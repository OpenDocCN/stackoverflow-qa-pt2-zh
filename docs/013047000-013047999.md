# StackOverflow 问答 13047000-13047999

# apple-push-notifications - 如何使用普通 php 发送苹果 mdm 推送通知？

> ID：13047002
> 
> 赞同：0
> 
> 时间：2012-10-24T10:05:46.527
> 
> 标签：apple-push-notifications, mdm

到目前为止，我已经为 IOS 完成了一个 apple-mdm-ota-server。这些设备将以下内容交付给服务器（以 plist/xml 的形式）：

-Push Magic Token -Device Token (b64 format oO) -PN-Topic (com.apple.mgmt.xxx) -UDID (in hexcode) -UnlockToken (很长的 b64 编码的东西)

我需要将以下内容发送到来自苹果的推送通知事物：

{"mdm":"pushMagic"}

Pushmagic = Push Magic 令牌

我需要如何编写需要写入 apns 套接字的数据？我尝试了适用于其他推送通知的那个，但它没有。什么都没有发生:-(。

```
$apns_url = 'gateway.push.apple.com';  

[...]

$apns = stream_socket_client('ssl://' . $apns_url . ':' . $apns_port,
$error, $error_string, 2, STREAM_CLIENT_CONNECT, $stream_context);

fwrite($apns, chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ',
'', $wellWrittenToken)) . chr(0) . chr(strlen($mdmInitialPush)) .
$mdmInitialPush);

[...] 
```

$error 为 0。 $wellwrittentoken = 十六进制代码中的设备令牌 $apns_xx - ssl 的东西似乎有效，因为它给出了错误消息，因为它没有 $mdminitialpush - 我要发送的消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:11:21.533

我没有看到您在设置流时包含您的 APNS 密钥。这是（大致）我们所做的：

```
$apns_certkey_path = '/path/to/cert/and/key/file' ;
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $apns_certkey_path);

$apns = stream_socket_client(
  'ssl://' . $apns_url . ':' . $apns_port,
  $error,
  $errorString,
  2, // timeout
  STREAM_CLIENT_CONNECT,
  $streamContext
);

$payload = json_encode(array('mdm' => $PushMagic));
$apnsMessage = chr(0)  . chr(0)
             . chr(32) . base64_decode($ApnsTokenB64)
             . chr(0)  . chr(strlen($payload)) . $payload;
fwrite($apns, $apnsMessage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T16:09:08.837

使用[这个](https://github.com/immobiliare/ApnsPHP)库

```
function push_device($data) {
    $push = new ApnsPHP_Push(
        ApnsPHP_Abstract::ENVIRONMENT_PRODUCTION,
        '../MyPushCert.pem'
    );
    $push->connect();
    $message = new ApnsPHP_Message_Custom($data["Token"]);
    $message->setCustomProperty('mdm', $data["PushMagic"]);
    $push->add($message);
    $push->send();
    $push->disconnect();
} 
```

# c# - 替换在 TypeText 之后不起作用

> ID：13047006
> 
> 赞同：1
> 
> 时间：2012-10-24T10:06:11.707
> 
> 标签：c#, word-automation, word-2010

我需要生成 doc（真正的 doc，而不是 docx）文件，我发现的“最佳”方式是使用 word 自动化（Word 2010）。我有我打开的文件，然后在将其保存为新名称之前替换其中的值。（例如：我将“CHRONO”替换为“155023”）。为此，我使用 Application.Selection.Find。当新值超过 255 个字符（微软的限制......）时，我遇到了问题。为了避免这个问题，我在这种情况下使用 TypeText。我现在的问题是一旦我使用 TypeText，替换不再起作用。我找不到原因。任何想法将不胜感激。

我的代码在一个函数中，在 foreach 中调用每个值来替换：

```
private void Replace(Application app, string name, string newValue)
{
    Selection selection = app.Selection;
    Find find = selection.Find;
    Replacement replacement = find.Replacement;

    find.ClearFormatting();
    find.Text = "<" + name + ">";

    // Word limitation : can't replace with more than 255 characters, 
    // use another way to do it if that's the case
    if (tempNewValue.Length < 255)
    {
        replacement.ClearFormatting();
        replacement.Text = tempNewValue;
        find.Execute(Replace: replaceAll);
    }
    else
    {
        while (find.Execute())
        {
            selection.TypeText(tempNewValue);
        }
    }

    Marshal.ReleaseComObject(replacement);
    Marshal.ReleaseComObject(find);
    Marshal.ReleaseComObject(selection);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:39:33.400

我发现了问题。在调试中使用可见字运行程序时，我确切地看到了它的作用以及它为什么不起作用。

事实上，`Replace()`有效，但它只替换光标之后的事件。为了解决这个问题，我需要将光标重置为文档的原点：

```
else
{
    while (find.Execute())
    {
        selection.TypeText(tempNewValue);
    }
    selection.GoTo(1, 1);
} 
```

# android - 如何清除 Android 中的任务并更改根活动？

> ID：13047008
> 
> 赞同：5
> 
> 时间：2012-10-24T10:06:20.130
> 
> 标签：android, android-activity, task

**情况**

活动 A -> 活动 B -> 活动 C

当活动 C 开始时，我希望 C 成为根活动，而 A 和 B 完成。

我怎样才能做到这一点？

**UDPATE**

我在 10 级，所以我不能使用 11 级及更高级别的 CLEAR_TASK 标志。**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:30:14.247

将以下行设置清单中活动C的条目

```
android:clearTaskOnLaunch="true" 
```

[http://developer.android.com/guide/topics/manifest/activity-element.html#clear](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:01:48.440

在您的启动意图中添加一个标志：

```
FLAG_ACTIVITY_CLEAR_TASK 
```

示例： Intent launchC = new Intent(getApplicacionContext(),nameC.class);

launchC.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);

与先前的答案基本相同，但先前的方法每次启动 C 时都会强制执行清除任务，但使用标志您可以拥有不同的控件。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:59:34.770

更新解决方案

我使用 startActivityForResult 解决它并发送回一个结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T10:14:17.560

打电话后

```
startactivity() method call this.finish(); 
```

在 A 上，然后是 B

希望这能满足您的要求

# ipad - iPad - Safari 状态栏覆盖部分网页，其中 apple-mobile-web-app-capable 设置为 true

> ID：13047012
> 
> 赞同：1
> 
> 时间：2012-10-24T10:06:34.087
> 
> 标签：ipad, mobile-safari, ios-standalone-mode

使用以下两个元标记以允许在 iPad 上全屏显示的网页：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
```

现在的问题是，浏览器的状态栏覆盖了网页的标题。如何避免这种情况？状态栏是透明的，但这不是解决办法，网页头部有一些链接，不能再点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:49:47.303

将内容设置为“黑色半透明”时，状态栏将略微透明并位于 Web 应用程序的顶部。如果您在顶部有文本，您可能不需要此选项。

试试这个：

```
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

或这个：

```
<meta name="apple-mobile-web-app-status-bar-style" content="default"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-06T01:07:08.287

尝试在正文顶部添加 20 像素的边距（或任何包含您希望显示在状态栏下方的内容的元素）。状态栏高 20 像素。

```
body {
    margin-top: 20px;
} 
```

设置背景颜色`html`来设置状态栏的背景：

```
html {
    background: #778899;
} 
```

# php - 致命错误：未找到“Imagick”类

> ID：13047015
> 
> 赞同：3
> 
> 时间：2012-10-24T10:06:40.950
> 
> 标签：php, imagemagick, wamp

PHP 5.3.8

WAMP 2.2.21

ImageMagick 6.6.2 Q16

* * *

**致命错误：无论如何都找不到类“Imagick”**。不管我多少次...

1.  安装/重新安装不同版本的 ImageMagick
2.  尝试各种 VC9 构建的 php_imagick.dll 到 'wamp\bin\php\php5.3.8\ext\'
3.  已更新我的 php.ini 以包含 'extension=php_imagick.dll'
4.  重新启动了我的电脑和 WAMP ......我数不清多少次 O_o

我在 WAMP 启动时也收到此错误

![在此处输入图像描述](../Images/d935c1e42e06f8df996805afa2110163.png)

* * *

有趣的是 php_imagick.dll 通过 WAMP 任务栏出现在我的 PHP 扩展中

![在此处输入图像描述](../Images/c543fe8805495629ab6366a9a47c2f3f.png)

但不在我的 localhost PHP-Loaded Extensions 中：

![本地主机加载的扩展](../Images/2ef9d654df87e52baaa937bceaf560c3.png)

* * *

有没有人知道为什么会这样？或者有什么建议？

* * *

解决方案：我必须努力学习... WAMP 2.2 x32 而不是 x64，ImageMagick 6.6.4 Q16 最多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:33:46.310

您没有加载`php_imagick.dll`扩展。

首先检查文件*是否*存在并且可读。如果是，那么它没有加载，因为*DLL 本身*需要一些其他 DLL；Windows 通常不会显示此错误。您将需要一些诸如[DEPENDS 之](http://www.dependencywalker.com/)类的工具来加载`php_imagick.dll`并查看它包含哪些未解析的外部。

`libeay32.dll`您可能会发现某些函数是由某个库（例如不同的 VC 运行时（例如`MSVCR90.DLL`）。

例如，`php_imagick.dll`我发现的一个示例 PHP 5.3 依赖于这两个 DLL

```
CORE_RL_WAND_.DLL
CORE_RL_MAGICK_.DLL 
```

猜猜看，CORE_RL_MAGICK*本身取决于其他符号*，这解释了这个人遇到的问题（他的解决方案可能比必要的更彻底，但是，嘿，不管怎样——它*也可能*对你有用，但请继续阅读)

[ImageMagick - “CORE_RL_magick_.dll not found”或如何使用 ruby​​ 1.9.2 在 Windows 上安装 RMagick](https://stackoverflow.com/questions/5811388/imagemagick-core-rl-magick-dll-not-found-or-how-to-install-rmagick-on-windo)

使用 DEPENDS 再次查看 CORE_RL_MAGICK 会发现依赖于特定版本的 Visual C++ 运行时（对于某些版本的 IM，QT 也是如此），这与被称为“VC6 对抗 VC9”的丑陋蠕虫有关（例如[http: //www.websiteadministrator.com.au/articles/install_guides/installing_php533_pg2.html](http://www.websiteadministrator.com.au/articles/install_guides/installing_php533_pg2.html)）。

现在，你应该**怎么**做？这*取决于*. 字面上地; 因为不是盲目地随机重新安装，直到星星是正确的（再次：它*可能会*工作。它经常这样做！），我会在 DLL 上启动 DEPENDS `imagick`，然后在 ImageMagick 核心 DLL 上启动，依此类推，直到我找到迷宫曲折的小依赖，所有类似的，Windows 应该告诉你，但没有。

（这就是为什么它被称为“ *DLL Hell* ”）。

# php - PHP中的下拉列表

> ID：13047021
> 
> 赞同：-2
> 
> 时间：2012-10-24T10:06:57.163
> 
> 标签：php, mysql, html

我需要帮助来解决我的问题。我不能让我的选择器显示 92 次，我为此编写了 FOR 指令，但它只显示一个选择器，其值形式为 Database ，我该怎么做......我的代码：

```
<?php
  $con = mysql_connect("localhost","root","sergios.com");
    if (!$con)
       {
       die('Could not connect: ' . mysql_error());
  }

mysql_select_db("phptests", $con);

$result = mysql_query("SELECT * FROM Category");

 for($i=1;$i<92;++$i){  
  echo "<select>";
        while ($line = mysql_fetch_array($result, MYSQL_ASSOC))
    {
    echo "<option>" .  $line['name'] . "</option>";
     }
      echo "</select>"; 
      }

  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:08:15.773

您需要在循环之外获取打开和关闭选择。由于您已经在遍历结果，因此不需要额外的 for 循环：

```
$con = mysql_connect("localhost","root","sergios.com");
if (!$con)  {
   die('Could not connect: ' . mysql_error());
}

mysql_select_db("phptests", $con);

$result = mysql_query("SELECT * FROM Category");

echo "<select>";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC))
{
  echo "<option>" .  $line['name'] . "</option>";
}
echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:11:19.087

您必须在 for 循环之外构建选项

```
$result = mysql_query("SELECT * FROM Category"); 
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) 
{ 
    $myOptions .= "<option>" .  $line['name'] . "</option>"; 
} 
for($i=1;$i<92;++$i){   
  echo "<select>"; 
     echo $myOptions;    
  echo "</select>";  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:12:00.863

我认为您需要显示 92 个选择框。试试下面的代码......

```
$result = mysql_query("SELECT * FROM Category"); 
$options = "";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC))
{
  $options .= "<option>" .  $line['name'] . "</option>";
}
for($i=1;$i<92;++$i){ 
    echo "<select>";
    echo $options;
    echo "</select>"; 
} 
```

# google-drive-api - 如何禁用我的 mimetype 的复制功能？

> ID：13047031
> 
> 赞同：0
> 
> 时间：2012-10-24T10:07:45.107
> 
> 标签：google-drive-api

我们的应用程序在数据存储中存储文件的附加数据。当用户直接从驱动器界面复制文件时，我看不到同时复制相关数据的方法。

有没有办法在用户制作副本时得到通知，或者有没有办法在我们的应用程序的驱动器界面中禁用菜单项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:08:46.097

目前没有办法做到这一点，除了轮询用户的更改提要以进行更改。不过请继续关注，我们计划添加通知支持，以便在发生这种情况时通知您。

要直接回答您的问题，不支持按 MIME 类型禁用复制。

# amazon-s3 - 在 S3 或 Cloudfront 的所有内容中设置默认标头变量

> ID：13047032
> 
> 赞同：1
> 
> 时间：2012-10-24T10:07:55.123
> 
> 标签：amazon-s3, http-headers, amazon-cloudfront

我是 AWS 的新手，我想弄清楚如何修复每个文件头变量。更具体地说，我想在所有从云端提供的具有源 s3 的文件中添加以下变量：

*   缓存控制：公共，最大年龄=10368000
*   过期：格林威治标准时间 2013 年 9 月 27 日星期五 11:14:00
*   内容编码：gzip

我可以通过aws存储桶浏览（或通过使用诸如cloudberry之类的第3方软件）在每个文件（一个接一个）添加自定义元数据，我可以设置http标头变量并通过ftp应用于每个文件），但是我拥有很多文件不仅是我想在现有文件上设置标头变量，而且最重要的是我需要自动化这个过程，所以下周的更新不需要单独修复。

谢谢， c

# mysql - Flyway MySQL 语法错误

> ID：13047033
> 
> 赞同：4
> 
> 时间：2012-10-24T10:07:55.530
> 
> 标签：mysql, jdbc, flyway

我们从 1 个月开始使用 Flyway，没有遇到任何问题。

但是，今天我尝试添加一个非常长（超过 1500 行）的新迁移脚本，并遇到了一个奇怪的 MySQL 语法错误。

我在 MySQL Workbench 中打开了这个脚本，没有报告语法错误，脚本执行没有错误。

这个名为“V10012__insert-acceptance-testing-event-moment-passed.sql”的脚本包含以下说明。

> *   插入语句 1
> *   插入语句 2
> *   ...
> *   INSERT 语句 LAST - 1
> *   INSERT 语句最后

MySQL报告的错误如下：

> [ERROR] 由 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException 引起：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 232 行 [ERROR] com.googlecode.flyway.core. migration.MigrationException: 迁移到版本 10012 失败！请恢复备份并回滚数据库和代码！

该错误在“INSERT statement LAST”语句中报告。

但是，如果我在脚本中反转“INSERT 语句 LAST”和“INSERT 语句 LAST - 1”，则会在“INSERT 语句 LAST - 1”（现在位于文件末尾）上报告错误。所以我在“INSERT statement LAST”中没有错误，因为 Flyway 成功执行了它。

此外，如果现在我从脚本“V10012_insert-acceptance-testing-event-moment-passed.sql”中完全删除“INSERT statement LAST”语句，*并将该语句放入一个名为“V10013* _test.sql”的新文件中，flyway 执行我所有的迁移脚本都成功了！

那么，我最初的“V10012__insert-acceptance-testing-event-moment-passed.sql”脚本中可能存在什么问题？

是否有可能的脚本大小限制？

以下是有关我的环境的有用信息：

> *   我的脚本使用了很多 /* */ 注释
> *   Flyway Maven 插件 1.7
> *   Maven 2.0.3
> *   mysql:mysql-connector-java:5.1.21
> *   MySQL 5.5.X
> *   Java JDK 1.7.0_09-b05
> *   Windows 7的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:17:58.590

我终于找到了问题的原因。

在我的脚本中，我有：

```
... 
...

/* INSERT statement LAST - 1 */ 
INSERT INTO `table_1` (`id`, `string_1`, `string_2`)
VALUES (
    1, 
    'aaa',   /* COMMENT 1*/
    'bbb'    /* COMMENT 2*/
);

/* INSERT statement LAST */
INSERT INTO `table_2` (`id`, `string_3`)
VALUES (
    1,       /* COMMENT 3   */
    'cccc'   /* COMMENT 4    */
); 
```

问题似乎出在 COMMENT 2 和 COMMENT 4 上。如果我删除主题 flyway 成功执行我的所有迁移脚本。

例如，此脚本将起作用：

```
... 
...

/* INSERT statement LAST - 1 */ 
INSERT INTO `table_1` (`id`, `string_1`, `string_2`)
VALUES (
    1, 
    'aaa',   /* COMMENT 1*/
    'bbb'    
);

/* INSERT statement LAST */
INSERT INTO `table_2` (`id`, `string_3`)
VALUES (
    1,   /* COMMENT 3   */
    'cccc'   
); 
```

那么，也许这是 Flyway 解析器中的一个错误？

我今天没有时间对其进行测试，但似乎仅在以下情况下才会出现此错误：

*   我们在 VARCHAR （或我想的其他字符串列类型）之后有评论
*   此注释位于 ')' 字符之前

这个问题似乎只有在一个 SQL 脚本中存在多个插入语句时才能重现。

此外，我认为没有放在')'之前的评论是正确的，比如：

```
/* INSERT statement LAST */
INSERT INTO `table_2` (`id`, `string_3`)
VALUES (
    1,   /* COMMENT 3   */
    'cccc',  /* COMMENT 4   */
    'dddd'
); 
```

这里 COMMENT 3 和 COMMENT 4 在 Flyway 中通过，因为它们位于 ',' 之后和字符串值之前，但它们没有放在 ')' 字符之前。

希望这可以帮助;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T21:10:56.843

由于飞行路线，这不太可能。这几乎肯定与 flyway 使用的 MySQL 驱动程序有关。使用 MySql 本机客户端，您自然会认为它可以处理任何合法语法。即使是“可选”的评论块

我知道 MySql 的 jdbc 驱动程序中*SURE*的一个问题是它无法处理动态分隔符交换。因此，触发器和存储过程可能会成为一个问题，特别是如果它们是使用生成的，`mysqldump`但随后您使用 Java 应用程序重新摄取。

如果您查看[此处](https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html)并转到`spring.datasource.separator`您会看到这是在系统范围内（基本上）设置为`;`.

现在想象一下当涉及到脚本中的这一行时它将如何表现：

```
DELIMITER ;;
CREATE FUNCTION `int2vancode`(id BIGINT(20)) RETURNS varchar(255)
BEGIN
    DECLARE num VARCHAR(10);
    DECLARE length INT;
    SET num = conv(id, 10, 36);
    SET length = char_length(num);

    return CONCAT(conv(length -1 , 10, 36), num);
END ;;
DELIMITER ; 
```

Java 驱动程序是愚蠢的，并且不会解释任何这些语句，即使该`DELIMITER`语句显然是针对客户端的

我现在遇到一个问题，即本机客户端执行每个脚本都没有问题，但 flyway 说我有一个语法错误，即使 intellij 也看不到。

** 更新**

我解决了我的问题，它或多或少证实了我看到的问题：我有一个创建表：

```
CREATE TABLE `Position` (
  PositionID INT NOT NULL AUTO_INCREMENT,
  `Name` varchar(200) COLLATE utf8_unicode_ci NOT NULL
); 
```

即使我的 bash 脚本迭代执行这些脚本没有问题，我也不得不逃脱`Name`并让 flyway 接受它。`Position`

也许我可以告诉 Java 驱动程序来帮助它？

# sql - sql - 如何计算两行的差异？

> ID：13047035
> 
> 赞同：3
> 
> 时间：2012-10-24T10:08:02.467
> 
> 标签：sql, sql-server

我有一张这样的桌子：

```
Item    ProviderId

Item1   1

Item1   2

Item2   1

Item3   1 
```

我希望得到一张新桌子。在新表中，它只列出了`item`至少有两个不同`ProviderId`s 的 s。

所以在上面的例子中，因为只有`item1`两个不同的`ProviderId`我希望得到这样的表：

```
Item

Item1 
```

我怎样才能写出声明来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:09:44.850

你必须使用`group by`和`having`：

```
select item
from table
group by item
having count(distinct ProviderId)>=2 
```

或没有`distinct`

```
select item
from tab
group by item, ProviderId
having count(1)>=2; 
```

## [sql 小提琴](http://sqlfiddle.com/#!3/a4a58/5/0)演示

以查询为表：

```
select item
from (select item, ptoviderId from tabA) as tab
group by item, ProviderId
having count(1)>=2; 
```

如果要创建新表，可以使用`into`：

```
select item
into newTable
from table
-- or (select item, ptoviderId from tabA)
group by item
having count(distinct ProviderId)>=2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:25:31.320

试试这个：

```
 SELECT [Item]      
      FROM [TABLE_NAME]
      GROUP BY [Item]
      HAVING COUNT(DISTINCT ProviderId) >1
    GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:09:56.810

```
INSERT INTO <your new table> (newTableItem)
    (SELECT Item
    FROM <table>
    GROUP BY Item
    HAVING COUNT(DISTINCT ProviderId) > 1)-- or just HAVING COUNT(*) > 1 if one Item can't have two times the same ProviderId 
```

# c# - C#中的组合框反射

> ID：13047037
> 
> 赞同：1
> 
> 时间：2012-10-24T10:08:17.103
> 
> 标签：c#, combobox

我有这个代码：

```
typeof(ComboBox).GetProperty("SelectedItem").SetValue("comboBox1", "", null); 
```

它不工作。这是错误：

> “对象与目标类型不匹配”

怎么了？

更新：

我有我的对象的名称（字符串中的组合框。如：

```
string []s = new s[3];
s[0]="comboBox0"; 
s[1]="comboBox1"; 
s[2]="comboBox2"; 
```

我想为我的 comboBox 的属性 SelectedItem 设置一个值`s[i]`。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:10:04.117

[`SetValue`](http://msdn.microsoft.com/en-us/library/hh194291.aspx)需要有`ComboBox`对象，而不是字符串“comboBox1”。我相信您的应用程序中有一个 ComboxBox 对象，假设：

```
ComboBox comboBox1 = ....; 
```

所以你可以打电话：

```
typeof(ComboBox).GetProperty("SelectedItem")
                .SetValue(comboBox1, "", null); 
```

如果你使用 .NET 4.5，你可以去掉最后一个输入：

```
typeof(ComboBox).GetProperty("SelectedItem")
                .SetValue(comboBox1, ""); 
```

**编辑**：根据您的评论，您不需要使用反射，下面是您只要知道名称就可以获得combox1：

```
var comboBox1 = Controls.OfType<ComboBox>()
                      .SingleOrDefault(c => c.Name == "Combobox1");

comboBox1.SelectedItem = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:13:29.597

您发送到的第一个参数是`PropertyInfo.SetValue`您要设置值的对象。例如，如果您将 ComboBox 对象命名为，`comboBox1`那么您必须从更改`SetValue("comboBox1", "", null);`为`SetValue(comboBox1, "", null);`

您可以阅读有关[PropertyInfo.SetValue Method](http://msdn.microsoft.com/en-us/library/hh194291.aspx)的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:14:52.200

该`SetValue`方法需要3个参数，[MSDN](http://msdn.microsoft.com/en-us/library/xb5dd1f1%28v=vs.100%29.aspx)第一个参数是实例对象，第二个是值，第三个是索引属性的索引，如果不使用则设置为null。

所以

```
var box = <method to get combobox1>;
typeof(ComboBox).GetProperty("SelectedItem").SetValue(box,"",null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:07:15.637

在放置 ComboBox 的表单中，添加以下方法：

```
public void SetComboBoxValue(string comboBoxName, string value)
{
    ComboBox foundCombo = Controls.OfType<ComboBox>().SingleOrDefault(c => c.Name == comboBoxName) as ComboBox;
    if (foundCombo == null)
        return;
    foundCombo.SelectedItem = value;
} 
```

# android - 获取图片旋转后的坐标

> ID：13047040
> 
> 赞同：0
> 
> 时间：2012-10-24T10:08:23.307
> 
> 标签：android

我在旋转屏幕以加载之前的状态时使用此方法：

```
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);
    view1 = new DrawView(this);
    setContentView(view1);
    Bundle bundle = this.getIntent().getExtras();
    onRestoreInstanceState(bundle);
    getCoordinates();//NO WORKS WELL
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState){
    //Here I set the values ​​to images: colors, borders, etc ...
} 
```

我在 AndroidManifest 中有下一行：

```
android:configChanges="orientation|screenSize" 
```

在 getCoordinates() 方法中，我有以下代码：

```
public void getCoordinates(){
    final int[] values = new int[2];
    image.getLocationInWindow(values);
    x = values[0];
    y = values[1];
    width = image.getWidth();
    height = image.getHeight();
} 
```

前面的代码并不完全是我所拥有的，但它作为一个例子。我的真实代码没有太大变化。但是我有一个问题，我必须知道图像的坐标才能在图像之间画线。但是，如果我通过示例启动该方法 (onConfigurationChanged(Configuration newConfig) )，因为该方法尚未执行所有行且该方法尚未结束，则 UI 未完全加载。因此在坐标中获取空值。一旦用户界面充满电以获取坐标，我不知道如何自动启动方法 getCoordinates()。任何人都可以帮助我吗？

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:48:44.043

添加布局侦听器。

请参阅：[如何判断布局何时绘制？](https://stackoverflow.com/questions/7733813/how-can-you-tell-when-a-layout-has-been-drawn/7735122#7735122)

# jquery - 哪个数字具有特定类的 div

> ID：13047043
> 
> 赞同：0
> 
> 时间：2012-10-24T10:08:32.770
> 
> 标签：jquery

我想拥有类'currentWeek'的ul的数量（int）。我的 html 看起来像这样：

```
<div class="calendarContainer">
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <ul class="currentWeek">
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div> 
```

这就是我所有 UL 的方法

```
var weeksCount = widget.find(".calendarContainer").children().length; 
```

但我不知道怎么知道 currentWeek 是第三

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:09:39.920

这个怎么样：

```
widget.find('.currentWeek').index() 
```

引用[**.index**](http://api.jquery.com/index/)文档：

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

如果您需要获取该元素的自然数（不是从 0 开始的），您可能需要将 1 添加到结果中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:10:13.983

您可以使用[**index()**](http://api.jquery.com/index/)方法来获取兄弟元素中元素的索引。它是零索引的，这意味着您将获得第一个元素的 0 和第二个元素的 1，依此类推。

**[现场演示](http://jsfiddle.net/zCVmT/)**

```
$('.currentWeek').index() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:10:12.630

您可以使用[`index()`](http://api.jquery.com/index/)：

```
$(".currentWeek").index(); 
```

如果您需要指定相对于您需要计数的元素，请使用：

```
$(".currentWeek").index(".calendarContainer ul"); 
```

两种方法都返回**2**，因为索引从零开始。

# html - angularjs上的事件传播

> ID：13047046
> 
> 赞同：0
> 
> 时间：2012-10-24T10:08:48.250
> 
> 标签：html, javascript-events, angularjs

我正在使用 angularjs 实现一个网络应用程序（对我来说是第一次）。我想为用户提供的功能之一是当用户单击菜单中的图像时在主窗口中创建一个 div。

为此，我创建了一个指令，如下所示。

```
var platform = angular.module('platform', []);

platform.directive('addElement', function() {

  return function (scope,element, attrs){
        var createElement;

        createElement = function(){
            $('<div>Test</div>').appendTo('#body-main-window');
        };

        $(this).on('click',createElement);
    } 
}); 
```

这是以下html代码：

```
<img class = "imgMenu" src="styles/img/logo_add.png" add-element /> 
```

问题是在元素上触发的 onClick 事件看起来会传播到其所有祖先。事实上，无论我点击哪里，都会创建 div。这不是预期的行为，因为仅当用户单击指令所在的图像时才应创建 div。

此外，当单击时，指令的执行次数与具有指令属性的图像一样多。

这是一个小提琴来说明我的问题：http: [//jsfiddle.net/6Ku7D/10/](http://jsfiddle.net/6Ku7D/10/)

一种解决方案是使用 ng-click 指令，但这意味着在控制器中进行一些 DOM 修改（这不是实现我的目标的正确方法）。因此，指令是解决方案，但我被卡住了..

最好的祝福

**编辑（额外信息）**

实际上，这只是我想做的事情的一部分。简而言之，我想点击的元素在我的应用程序的菜单中。这些元素只是一些对象的名称。通过单击它们，我想创建一个 div，它不仅包含名称，还包含该对象的其他可编辑信息。此外，我将创建的 div 应该是可拖动的（使用 jquery-ui），最后，我应该能够“链接”这些 div 以创建工作流。实际上，我想做的是与[雅虎管道非常相似的东西](http://pipes.yahoo.com/pipes/)（为混搭/工作流版本提供用户友好的界面）但专用于计算机科学（数据挖掘）的研究人员。对象将是算法、数据集或可视化技术，它们首先通过我开发的 Web 服务导入。因此，它并不像“向现有数组添加值”那么简单。你还认为我应该使用 ng-click 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:17:21.303

这是一个 Jquery 事件问题...

尝试使用 stopPropagation() 来防止事件冒泡。

```
platform.directive('addElement', function() {

  return function (scope,element, attrs){
        var createElement;

        createElement = function(e){
            $('<div>Test</div>').appendTo('#body-main-window');
           e.stopPropagation();
        };

        $(this).on('click',createElement);
    } 
}); 
```

* * *

**编辑**

我明白你想要做什么，[这里有一个工作 Plunk](http://plnkr.co/edit/g0ptxe)可以做你想做的事情......也就是说，我认为你不是最好的方法。

如果您想在 Angular 中的值列表中添加一个新值，我认为您将很难做到这一点。再说一次，我不知道你的最终目标是什么......但试试这个：

[这是我建议的解决方案](http://plnkr.co/edit/xP2NWk)

```
<body ng-controller="MainCtrl"> 
    <div id="menu">
        <div ng-repeat="item in listTest" class="toAddIcon" ng-click="addResult()">
            {{item}}, click here to add a div to results
        </div>                          
    </div>

    <hr/>
    <div id="displayResult"> 
        <header> -- Results -- </header>   
        <div ng-repeat="result in results">{{result}}</div>
    </div>
</body> 
```

JS：

```
app.controller('MainCtrl', function($scope) {
  $scope.listTest = ['Peter','Bob','Susan'];   
  $scope.results = [];

  $scope.addResult = function(){
    $scope.results.push('TEST');
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:06:58.507

我会使用 ng-click。我不知道为什么这意味着通过控制器进行 DOM 操作：

```
var platform = angular.module('platform', []);

platform.directive('addElement', function() {

  return function (scope,element, attrs){

        scope.createElement = function(){
            $('<div>Test</div>').appendTo('#body-main-window');
        };

    } 
}); 
```

HTML 代码：

```
<img class="imgMenu" src="styles/img/logo_add.png" add-element ng-click="createElement()" /> 
```

# java - Java - 蓝牙 API Bluecove 问题

> ID：13047048
> 
> 赞同：3
> 
> 时间：2012-10-24T10:08:53.643
> 
> 标签：java, bluetooth, bluecove

我在 Java 中使用 Bluecove API 时遇到问题。我计划创建一个基本的 BT 监听器，以便从自制设备（由 Arduino 驱动）接收一些数据。我有以下很容易理解的代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;

import javax.bluetooth.*;
import javax.microedition.io.*;

public class Bluetooth
{
    private void startServer() throws IOException
    {
    //Create a UUID for SPP
    UUID uuid = new UUID("1101", true);
    //Create the servicve url
    String connectionString = "btspp://localhost:" + uuid +";name=Magic Merlin Server";

    //open server url
    StreamConnectionNotifier streamConnNotifier = (StreamConnectionNotifier)Connector.open(connectionString);

    //Wait for client connection
    System.out.println("\nServer Started. Waiting for clients to connect...");
    StreamConnection connection = streamConnNotifier.acceptAndOpen();

    RemoteDevice dev = RemoteDevice.getRemoteDevice(connection);
    System.out.println("Remote device address: "+dev.getBluetoothAddress());
    System.out.println("Remote device name: "+dev.getFriendlyName(true));

    //read string from spp client
    InputStream inStream=connection.openInputStream();
    BufferedReader bReader=new BufferedReader(new InputStreamReader(inStream));
    String lineRead=bReader.readLine();
    System.out.println(lineRead);

    //send response to spp client
    OutputStream outStream = connection.openOutputStream();
    PrintWriter pWriter=new PrintWriter(new OutputStreamWriter(outStream));
    pWriter.write("Response String from SPP Server\r\n");
    pWriter.flush();
    pWriter.close();

    streamConnNotifier.close();
    }

    public static void main(String[] args) throws IOException
    {
    LocalDevice localDevice = LocalDevice.getLocalDevice();
    System.out.println("Address: "+localDevice.getBluetoothAddress());
    System.out.println("Name: "+localDevice.getFriendlyName());

    Bluetooth sampleSPPServer = new Bluetooth();
    sampleSPPServer.startServer();
    }
} 
```

当我尝试执行我的代码时，我收到了这个奇怪的错误：

```
Exception in thread "main" javax.bluetooth.BluetoothStateException: BlueCove com.intel.bluetooth.BluetoothStackBlueZ not available
at com.intel.bluetooth.BlueCoveImpl.loadStackClass(BlueCoveImpl.java:342)
at com.intel.bluetooth.BlueCoveImpl.detectStack(BlueCoveImpl.java:427)
at com.intel.bluetooth.BlueCoveImpl.access$500(BlueCoveImpl.java:65)
at com.intel.bluetooth.BlueCoveImpl$1.run(BlueCoveImpl.java:1020)
at java.security.AccessController.doPrivileged(Native Method)
at com.intel.bluetooth.BlueCoveImpl.detectStackPrivileged(BlueCoveImpl.java:1018)
at com.intel.bluetooth.BlueCoveImpl.getBluetoothStack(BlueCoveImpl.java:1011)
at javax.bluetooth.LocalDevice.getLocalDeviceInstance(LocalDevice.java:75)
at javax.bluetooth.LocalDevice.getLocalDevice(LocalDevice.java:95)
at Bluetooth.main(Bluetooth.java:50) 
```

第 50 行是`LocalDevice localDevice = LocalDevice.getLocalDevice();`.

我的计算机上有一个启用的 BT 加密狗，所以我对此感到非常失望。如果您对如何解决此问题有任何想法，那就太好了！

无论如何，感谢您阅读本主题。问候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T19:10:58.347

如果这是在 Linux 上，您可以检查两件事：

*   你`net.sf.bluecove:bluecove-gpl:2.1.0`的类路径中有吗？有关更多信息，请参阅[此](https://code.google.com/p/bluecove/wiki/maven2)内容。
*   你有`libbluetooth-dev`安装包吗？不过，这可能是 Xubuntu 特有的。此包内含BlueZ，输入`apt-cache show libbluetooth-dev`查看说明。其他 Linux 发行版可能有一个等效的库

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-28T17:36:28.813

除了 bluecove-xxxjar 之外，其他任何遇到此问题的人都可能需要下载 bluecove-gpl-xxxjar。你可以在这里得到它，[https://code.google.com/p/bluecove/downloads/list](https://code.google.com/p/bluecove/downloads/list)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:24:09.660

最后，我找到了一种使用名为“GlovePie”的应用程序的更简单方法。它提供了一个非常简单的接口来检索传感器值并通过网络协议发送它。然后一个java程序听那个协议并获取值。

上述错误（在我的第一篇文章中）是 Bluecove 跟踪器上报告的常见问题。

# qt - Qt 和 std::string

> ID：13047049
> 
> 赞同：0
> 
> 时间：2012-10-24T10:09:02.323
> 
> 标签：qt, stdstring

我有一个奇怪的问题。当我通过 Qt 文件对话框打开文件时，我的工具运行正常。但是，当我在 VS 2010 中将其他库中的 dll 绑定到我的项目中时，当我打开文件时，该工具会崩溃。通过调试我发现它发生在基本字符串的析构函数中。以下行导致问题：

```
std::string inputFilename = aFilenames.at(i).toStdString(); 
```

其中aFilenames 是一个QStringList。相反，如果我写：

```
std::string inputFilename = "C:\\test.txt"; 
```

然后它工作。那么 std::string 出了什么问题，为什么当我将另一个库中的 dll 绑定到我的项目中时会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:34:13.900

试试这个：

```
string(aFilenames.at(i).toLocal8Bit()) 
```

# c# - 在 DropDownList 中显示多个值并以编程方式访问这些值

> ID：13047054
> 
> 赞同：2
> 
> 时间：2012-10-24T10:09:13.440
> 
> 标签：c#, asp.net, combobox

我有 DropDownList 这看起来像这样：

```
<asp:DropDownList ID="ddl1" runat="server" AutoPostBack="True" DataSourceID="lds1"
                                 DataTextField="Description" DataValueField="Description" Height="22px" OnSelectedIndexChanged="ddl1_SelectedIndexChanged"
                                Width="339px" ondatabound="ddl1_DataBound">                                    
</asp:DropDownList> 
```

Linq 数据源

```
<asp:LinqDataSource ID="lds1" runat="server" ContextTypeName="MyDataContext"
                                TableName="MyView" > 

</asp:LinqDataSource> 
```

我的观点：

```
SELECT     Description, COUNT(*) AS Quantity
FROM         MyTable
GROUP BY Description 
```

在下拉列表中，我想显示如下数据：

描述1 32

其中 description1 是 MyView.Description 中的字符串，32 是 MyView.Quantity 中的整数。而且我需要能够以编程方式访问所选下拉项目的数量。

我也可以直接在 LinqDataSource 中对数据进行分组。什么都行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:13:54.497

使用 ListControl.AppendDataBoundItems 属性：

[AppendDataBoundItems 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

从文档中：“AppendDataBoundItems 属性允许您在数据绑定发生之前将项目添加到 ListControl 对象。数据绑定后，项目集合包含来自数据源的项目和先前添加的项目。”

使用[SelectedValue 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)以编程方式访问数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:19:21.910

您是否尝试过在 SQL 级别连接结果，将结果分配给您自己的变量并在下拉列表中使用它？

我的 SQL 需要完善，但如果我没记错的话是这样的：

```
SELECT field1 + ' -' + CONVERT(NVARCHAR, field2) as DisplayValue 
```

然后，您将在下拉框中显示 DisplayValue。

# java - 如何使用 Selenium WebDriver 从隐藏元素中读取文本？

> ID：13047056
> 
> 赞同：48
> 
> 时间：2012-10-24T10:09:18.743
> 
> 标签：java, selenium-webdriver, hidden-field

我正在尝试从这样`1000`的隐藏中读取示例字符串`<div>`：

```
<div id="hidden_div" style="visibility:hidden">1000</div> 
```

我知道这`WebElement.getText()`不适用于 Selenium 2（WebDriver）中的隐藏元素，所以我搜索了解决方案（[比如这个](https://groups.google.com/forum/?fromgroups=#!topic/webdriver/U-TAff1emvo)），显然下面的代码应该可以工作：

```
WebElement hiddenDiv = seleniumDriver.findElement(By.id("hidden_div"));
String n = hiddenDiv.getText(); // does not work (returns "" as expected)
String script = "return arguments[0].innerText";
n = (String) ((JavascriptExecutor) driver).executeScript(script, hiddenDiv); 
```

但这对我不起作用，变量`n`总是以`null`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2015-09-09T09:13:12.547

也可能有用：

在某些情况下，人们可能会发现获取隐藏文本很有用，可以通过调用从元素的`textContent`或`innerText`属性`innerHTML`中检索到`element.attribute('attributeName')`。

`element.getAttribute("textContent")`为我工作。

在那里查看更多细节-> [http://yizeng.me/2014/04/08/get-text-from-hidden-elements-using-selenium-webdriver/](http://yizeng.me/2014/04/08/get-text-from-hidden-elements-using-selenium-webdriver/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-24T10:58:28.617

编辑：哦，这行得通。

```
String script = "return document.getElementById('hidden_div').innerHTML"; 
```

在火狐中。

这也是如此。

```
String script = "return arguments[0].innerHTML"; 
```

我也尝试过，但它似乎不适用于纯 Javascript。如此处所述，使用 Jquery 启动浏览器。[如何在 Selenium 中使用 JQuery？](https://stackoverflow.com/questions/3235013/how-to-use-jquery-in-selenium)并使用以下代码编写脚本。

```
String script = "return $('#hidden_div').text();"; 
```

这行得通。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-10T17:01:00.100

在已经给出的答案的基础上，我创建了这个实用方法（Java）。也许这对其他人有帮助。

```
public static String getText(WebDriver driver, WebElement element){
    return (String) ((JavascriptExecutor) driver).executeScript(
        "return jQuery(arguments[0]).text();", element);
} 
```

*   我只使用[jQuery 的 text()](https://api.jquery.com/text/)来提取文本节点。innerHTML 也会给你 HTML 标签。
*   [在没有冲突](https://api.jquery.com/jQuery.noConflict/)的情况下，我使用 jQuery 而不是 $
*   不要操纵元素或其可见性

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-17T17:27:06.080

试试这个

```
 WebElement hiddenElement  = GET YOUR ELEMENT HERE;
        String hiddenContent= hiddenElement.getAttribute("textContent"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-05T19:58:10.203

我建议使用：

```
JavascriptExecutor js = (JavascriptExecutor)hiddenDiv;
String n=(String) js.executeScript("return document.getElementById('hidden_div').value;");
System.out.println(n); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-27T13:39:28.970

我遇到了读取不可见元素的相同问题，但我希望返回一个 WebElement 对象来进行进一步解析（不仅仅是它的文本）。

这段代码满足了我的要求。

```
(WebElement) ((JavascriptExecutor) driver).executeScript(
    "arguments[0].style[\"display\"] = \"block\";"+
    "arguments[0].style[\"visibility\"] = \"visible\";"+
    "return arguments[0];", 
element); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-13T17:28:56.430

*我对 Selenium （以及整个编程）相对较新，但我只是分享一个对我有用的解决方案。*

Selenium 2 不是为直接处理具有隐藏可见性的元素而设计的。例如，您将无法找到它的 ID 或 CSS 选择器。

我遇到了一个机器人的情况，我有一个包含很多元素的 HTML 表格，当点击它们时，会打开一个隐藏可见性的下拉菜单。它甚至在另一个框架中。

这是一种特殊情况，但我找不到任何解决方案，所以我选择了这个（坏的）解决方案，但它确实有效，尽管代码很丑。

首先你应该`switchToDesiredFrame();` - 在这里输入你的`driver.switchTo.frame()`逻辑。

比：

```
WebElement table = driver.findElements(By.tagName("table")).get(index_1);

List<WebElement> dataCells= table .findElements(By.tagName("td"));

WebElement spceificDataCellIWanted = dataCells.get(index_2);

System.out.println(spceificDataCellIWanted.getText()); 
```

dataCells 是字面上的`<td>`标签，它们成为`WebElements`一个列表，就像's 是“容器”`<td>`下的列表中的元素一样。`<table>`

它适用于我的 Chrome 和 Firefox，但不适用于任何无头浏览器，不知道具体原因。如果你们遇到类似的事情并且有更优雅的解决方案（可能不那么难找到），请分享！

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-02-27T12:35:02.820

```
type='hidden' 
```

当我们遇到任何这种情况时，我们应该做的第一件事是尝试任何对该页面没有任何更改的操作，例如拖动等，然后进行框架切换。

尝试 a `getText()`，如果这不起作用，请尝试上述方法作为第二种选择。

# search - jqgrid - 将搜索结果发送到 cfc

> ID：13047076
> 
> 赞同：0
> 
> 时间：2012-10-24T10:10:15.823
> 
> 标签：search, jqgrid, coldfusion

您好我正在使用自定义按钮将搜索结果发送到服务器。在 FF 和 Chrome 中效果很好。在 Internet Explorer 中，网格会更新以反映搜索，但从服务器返回的结果始终相同。它们实际上总是与第一次搜索的结果相同。我猜测过滤条件 $grid[0].p.postData.filters 在发送到服务器之前没有得到更新。

```
 $grid.jqGrid('navButtonAdd', '#pager', {caption: "", buttonicon: "ui-icon-copy", title: "Export",
      onClickButton: function() {
          $.post("scripts/scraprecords.cfc?method=getRecordsExcel&returnFormat=json", {_search:$grid[0].p.search, filters:$grid[0].p.postData.filters}, function(res) {
            var h = "<a href='temp/"+res+"'><img src='images/download-button.png' border='0'></a>"
            var $dialog = $('<div align=center></div>')
                .html('Your Report has been generated.<br>'+h)
                .dialog({autoOpen: true,title: 'Information',closeText:'hide',show:'slide',modal: true});
            },"json");
      }
  }); 
```

任何帮助将不胜感激，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:37:00.683

查看之前关于 jqGrid 和 IE 缓存的讨论。

[jqGrid 数据存储在浏览器缓存中？](https://stackoverflow.com/questions/3885658/jqgrid-data-stored-in-browser-cache)

# ruby-on-rails - 停止发布到外部服务以查找用户 ID

> ID：13047082
> 
> 赞同：1
> 
> 时间：2012-10-24T10:10:26.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不确定如何描述这个问题，所以会尽量清楚。

我们的 Rails 应用程序中有一个页面，我们的客户可以在其中更新他们的信用卡详细信息。表单发布到外部服务以验证详细信息。然后透明地重定向回我们。

最初，我将表单放在它自己的控制器中进行测试（完美运行），但我只是将它移到了我的 users_controller 中。

表单发布并重定向到执行一些检查的确认操作。当我从用户控制器中发布时，我收到一个错误：

```
 Couldn't find User with id=k2hx5p36w3g9rxsz 
```

这实际上是交易的 id。不是用户。

网址如下所示：

```
 http://localhost:8080/settings/confirm?http_status=200&id=k2hx5p36w3g9rxsz&kind=update_payment_method&hash=9c85b12c1242cd58de27b2582c934e34a0e9455e6 
```

在我的控制器中，我有这个：

```
def billing
  @user = current_user 
  @credit_card = current_user.default_credit_card  
  @tr_data = CreditCard::TransparentRedirect.update_credit_card_data(:redirect_url => confirm_credit_card_info_url, :payment_method_token => @credit_card.token)
  ...
end

def credit_card_confirm
  @user = current_user 
  @result = CreditCard::TransparentRedirect.confirm(request.query_string)

  if @result.success?
    redirect_to user_billing_path, :notice => "Credit card updated"
  else
    render :action => "billing"
  end
end 
```

在我的路线中：

```
match '/settings/confirm' => 'users#credit_card_confirm', :as => :confirm_credit_card_info 
```

我该怎么做才能避免将 ID 作为用户 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:02:31.140

您可能有类似 a `before_filter`or的东西`cancan`，它从 params 获取 id 并尝试加载相应的对象。这是控制器中的常见做法。

关键是`params`包含以下合并：

*   `/users/:id`从路由器 ( )设置的命名参数
*   查询字符串，由[http://apidock.com/rails/Rack/Utils/parse_nested_query转换](http://apidock.com/rails/Rack/Utils/parse_nested_query)
*   正文（如果存在），如上所述或根据需要从 JSON/XML 转换。

所以`GET /users/1`和`GET /users?id=1`有同样的效果。

解决方案是了解 id 用于加载用户的特定代码片段。如果它是您的代码（或以其他方式可跳过），则跳过过滤器或任何适合该`credit_card_confirm`操作的内容，如果它不是您的代码，则必须使用单独的控制器。

# scala - Scala：无法从内部类引用中获取外部类成员

> ID：13047083
> 
> 赞同：2
> 
> 时间：2012-10-24T10:10:31.537
> 
> 标签：scala, inner-classes

我似乎无法从内部类引用中获取外部类成员：

```
class Outer(st: Int)
{
  val valOut = st
  def f = 4
  class Inner { val x = 5 }
}

object myObj {
val myOut = new Outer(8)
val myIn = new myOut.Inner
val myVal: Int = myIn.valOut//value f is not a member of ... myOut.Inner
val x = myIn.f//value valOut is not a member of ... myOut.Inner
} 
```

我已经在包内尝试过这个，并且在 eclipse 工作表中都不起作用。我在 Eclipse 3.7.2 中使用 Scala 2.10.0RC1 和 Scala 插件 2.1.0M2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T10:15:47.040

我不知道你为什么希望它编译。毕竟，`Inner`没有那些成员，只有它的封闭类有它们。你可以通过这种方式实现你想要的：

```
class Outer(st: Int) {
  val valOut = st
  def f = 4
  class Inner {
    val outer = Outer.this
    val x = 5
  }
}

object myObj {
  val myOut = new Outer(8)
  val myIn = new myOut.Inner
  val myVal: Int = myIn.outer.valOut
  val x = myIn.outer.f
} 
```

# android - 如何更改 actionbarsherlock 主页图标

> ID：13047084
> 
> 赞同：0
> 
> 时间：2012-10-24T10:10:33.077
> 
> 标签：android, android-layout

我尝试了一切来更改actionsherlock栏上的图标，但它只显示了android徽标。我试过这个来替换图标但失败了。我正在为我的操作栏颜色使用自定义主题。

```
getSupportActionBar().setIcon(R.drawable.ic_launcher); 
```

这是我的 string.xml

```
 <style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
<item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
<item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item></style><style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar"><item name="android:background">@drawable/actionbar</item><item name="background">@drawable/actionbar</item><item name="android:displayOptions">showHome</item></style> 
```

这是清单文件

```
<application android:label="Myapp" 
    android:logo="@drawable/ic_launcher"> 
    <activity
        android:name="com.android.twitter.SplashScreen"
          android:launchMode="singleTop"
        android:configChanges="orientation|screenSize"
          android:theme="@style/Theme.MyTheme"
          /> 
```

我不想在操作栏上显示标题..我只想显示我的应用程序的徽标，所以有没有办法通过编码更改图标？谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:12:42.880

您可以在活动代码中执行此操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getSupportActionBar().setIcon(R.drawable.ic_actionbar_home);
    getSupportActionBar().setTitle("");
} 
```

# java - 我似乎无法弄清楚如何修复我的 ksoap2 android 代码中的错误

> ID：13047085
> 
> 赞同：2
> 
> 时间：2012-10-24T10:10:34.047
> 
> 标签：java, android, solution

```
 public void onClick(View button_one) 
           {
              new Thread(new Runnable() 
                 {
                    public void run() 
                       {
                          final SoapObject request;
                          request.post(new Runnable() // THIS post over HERE !!!
                             {
                                public void run() 
                                   {
                                      request = new SoapObject(NAMESPACE, METHOD_NAME);
                                   }
                             });
                       }
                }).start();
           } 
```

**问题：**帖子带有下划线，eclipse的解决方案如下，但这会产生大量新问题

```
-The method post(new Runnable(){}) is undefined for the type SoapObject 
```

另外，这会成功运行吗？还是我做错了什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:11:57.347

错误消息很清楚：您的`request`变量没有`post()`方法。看起来您正在尝试使用[View.post()](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)，它在 UI 线程上运行代码。这不是必需的，只需像这样创建您的对象：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

# regex - 匹配特定子域，但使用正则表达式匹配任何域

> ID：13047087
> 
> 赞同：0
> 
> 时间：2012-10-24T10:10:36.403
> 
> 标签：regex

我想匹配一个特定的子域，但任何使用正则表达式的域。

例子：

*   [http://webmail.domain1.com](http://webmail.domain1.com) => 匹配
*   [http://webmail.domain2.net](http://webmail.domain2.net) => 匹配
*   [http://webmail.domain3.de](http://webmail.domain3.de) => 匹配
*   [http://www.domain1.com](http://www.domain1.com) => 不匹配
*   [http://some.domain2.be](http://some.domain2.be) => 不匹配
*   [http://another.domain3.com](http://another.domain3.com) => 不匹配

我还需要在该正则表达式匹配中获得与其余查询字符串匹配的组：

[http://webmail.domain1.com/default.aspx?q=1&p=2](http://webmail.domain1.com/default.aspx?q=1&p=2)

*   第 1 组：[http](http://webmail.domain1.com) ://webmail.domain1.com => 这必须匹配
*   第 2 组：default.aspx?q=1&p=2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:19:25.080

干得好：

```
^(http:\/\/webmail\..+?\.com)(.*) 
```

在这里测试：[http ://rubular.com/r/rVu8zYHCE7](http://rubular.com/r/rVu8zYHCE7)

这是一个不特定于`.com`：

```
^(http:\/\/webmail\..+?(?:\/|$))(.*) 
```

# windows - Git存储库未更新

> ID：13047089
> 
> 赞同：2
> 
> 时间：2012-10-24T10:10:59.350
> 
> 标签：windows, git, ubuntu

**背景：**

*   在一个网络中，有两台 PC，一台使用 Windows 7，另一台使用 Ubuntu 12.10 作为操作系统。
*   两者都安装了 Git。[来自http://git-scm.com/download/win](http://git-scm.com/download/win)的 Windows和来自`apt-get install git-core`.
*   Ubuntu PC 配置了 Samba，以便可以使用其主机名访问网络中的 Windows PC。
*   使用`git clone http://windowspc/system/.git`，可以在 Ubuntu PC 中从 Windows PC 创建存储库的克隆。

**问题：**

*   对 Windows PC 中的代码进行了更改。命令`git add .`和`git commit -m"Comment."`在 Windows PC 的 Git 提示符下发出。
*   回到 Ubuntu PC，当`git fetch`和`git pull`命令出现问题时，会显示消息`Already up-to-date`。
*   但是，在 Windows PC 中所做的任何更改都不会出现在 Ubuntu PC 中。

**问题**

*   从 Windows PC 到 Ubuntu PC 的更新文件应该采用什么路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:59:59.330

我习惯在提交后执行“git push”。

我将创建一个由 Windows 机器和 Ubuntu 机器共享的裸存储库。然后，我会在您提交更改后修改您的说明以包含“git push”。然后你可以使用 gitk 来确保一切都是最新的。顺便说一句，我发现在 Windows 下访问 git 的最佳方法是使用 cygwin。

我创建在 Windows 和 Unix/Linux 之间共享的裸存储库的方法是：

```
cd /cygdrive/c/source
git clone --bare --no-hardlinks -l . /cygdrive/s/shareddir/source.git 
```

要将新的裸存储库连接回原始源代码：

```
cd /cygdrive/c/source
git remote add origin /cygdrive/s/shareddir/source.git
git remote update
git remote -v
git branch --set-upstream master origin/master 
```

# java - Google App Engine Datastore 写入：如何远程启用/禁用只读模式？

> ID：13047091
> 
> 赞同：3
> 
> 时间：2012-10-24T10:10:59.647
> 
> 标签：java, google-app-engine, readonly

在阅读备份[GAE 的 Datastore](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)时，其中：

> 我们强烈建议您在备份或恢复期间将应用程序设置为只读模式...

经过粗略检查后，*似乎*唯一的方法是通过 GAE Web 管理 UI，您可以在其中**禁用**或**重新启用**页面内某处的写入。

我想编写一些 Ant 构建文件和/或 shell 和/或 Python 脚本，让我能够自动备份/恢复我的 GAE 应用程序的数据存储区。这意味着我需要一种方法来自动启用/禁用写入（将我的应用程序从“只读”模式进出）到我的数据存储区，所有这些都来自某个脚本（就像我说的那样，无论是 Ant，bash或 Python）。

所以我问：这甚至可能吗？或者这是*必须*“手动”完成的事情（通过 Web 管理 UI）？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T07:46:18.063

[Capabilities Python API](https://developers.google.com/appengine/docs/python/capabilities/overview)是您可以用来读取应用程序某些功能（如 DataStore 写入）的状态的 API。不幸的是，这个 Api 只有读取状态的方法，但没有设置状态的方法。

**编辑：**

* * *

由于代码必须参考 Capabilities API 来获取 App-engine 中每个功能的状态，并避免因超额配额、系统维护等导致的故障......一种可能的解决方案是在 Capabilities 前面放置一种接口标志中的 API 以禁用每个功能。

伪代码即：

```
class DatasToreWriteCapabiliti{
  boolean DATASTORE_WRITE = true;

  public disable(){ DATASTORE_WRITE = false;}
  public enable(){ DATASTORE_WRITE = true;}

  public CapabilityStatus status(){
     if(DATASTORE_WRITE == false) return CapabilityStatus.DISABLED;

     CapabilitiesService service = CapabilitiesServiceFactory.getCapabilitiesService();
     return service.getStatus(Capability.DATASTORE_WRITE).getStatus();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:38:11.213

我认为您对“将您的应用程序设置为只读模式”的含义感到困惑：您认为这是 GAE 提供的服务，但它实际上意味着，在您的应用程序中，您创建了一种模式来防止写入同时您正在执行备份。

我希望 Web 界面提供的可选只读模式不是为在备份期间冻结而设计的，而只是为了管理数据存储的状态。

# .htaccess - 使用目录进行 301 重定向

> ID：13047092
> 
> 赞同：1
> 
> 时间：2012-10-24T10:11:04.967
> 
> 标签：.htaccess, redirect, http-status-code-301

以下工作正常

```
RewriteCond %{HTTP_HOST} !^www\.mydomain\.com$
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [L,R=301] 
```

现在我需要做同样的事情，但需要一个目录，比如

www.mydomain.com/oldname/something 到 www.mydomain.com/NEWNAME/something

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:33:46.887

在重定向域的规则之前，添加以下规则：

```
RewriteRule ^/?oldname/(.*)$ http://www.mydomain.com/newname/$1 [L,R=301] 
```

# maven - 使用 Maven 在 Glassfish 上进行热部署

> ID：13047093
> 
> 赞同：5
> 
> 时间：2012-10-24T10:11:14.313
> 
> 标签：maven, deployment, glassfish-3

我已经构建了一些 POM 文件来将 EAR 部署到 Glassfish V3。

它适用于第一次部署，但下一次部署，它崩溃了：

```
[INFO] asadmin --host localhost --port 4848 --user admin --passwordfile C:/Documents and
Settings/Olivier/Local Settings/Temp/mgfp8179073735921963426.tmp --interactive=false --echo=true --terse=true d
eploy --name sim --force=false --precompilejsp=false --verify=false --generatermistubs=false --availabilityenabled=false --asyncreplication=true --keepreposdir=false --keepfailedstubs=false --isredepl
oy=false --logreportederrors=true --upload=false "E:\\workspaces\\java\\sim_final\\ear\\target\\ear-0.0.1-SNAPSHOT.ear"
[ERROR] remote failure: Erreur lors du dÚploiementá: L'application portant le nom sim est dÚjÓ inscrite. SpÚcifiez que le redÚploiement doit Ûtre forcÚ ou redÚployez l'application. Sinon, s'il s'agit
d'un nouveau dÚploiement, choisissez un nom diffÚrent. Pour plus d'informations, consultez le fichier server.log. 
```

总而言之，我可以部署一次，但不能部署两次。

这是因为如您所见，force 参数设置为 false (--force=false)，因此应用程序已经存在使用此名称，并且不会再次部署。

可能，如果我做了一个取消部署目标，然后是一个部署目标，这将起作用，但我很确定我可以配置部署目标（在 Glassfish 上进行热部署）以将强制参数设置为 true，但我找不到方法来做到这一点。

试图这样做：

```
<configuration>
<force>true</force>
...
</configuration> 
```

但生成的脚本再次包含 --force=false 。

所以我的问题是：如何在不删除第一个同名应用程序的情况下使用部署目标同时部署同一个应用程序？

谢谢

奥利维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T02:48:01.353

我在这里发布了一个解决方案使用 maven glassfish 插件和修改 asadmin.bat[重新部署带有货物的远程 glassfish 失败](https://stackoverflow.com/questions/17045318/redeploy-remote-glassfish-with-cargo-fails/28006736#28006736)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T20:24:06.883

您可以尝试如下：

```
mvn glassfish:redeploy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T01:57:11.173

> 试图这样做：

```
<configuration>   
  <force>true</force>
  ...
</configuration> 
```

如果您使用的是 maven glassfish 插件的 2.2 版，这将起作用。但也有一些坏消息：

1.  不幸的是，2.2 还没有发布，并且插件的积极开发似乎已经停止了一段时间（代码更新已经超过 3 年了）。所以我们不太可能看到 2.2 版的发布
2.  [托管快照版本](http://maven.ocean.net.au/snapshot)的存储库似乎也没有启动，因此您甚至无法使用未发布的快照版本（除非您[下载](https://svn.java.net/svn/maven-glassfish-plugin~svn)版本 2.2-SNAPSHOT 的源代码并尝试自己构建它）。

> 如何使用部署目标同时部署同一个应用程序而不删除同名的第一个应用程序

使用 Maven Glassfish 插件？你不能。

相反，您可能希望查看一些可以让您直接执行 asadmin 命令的东西，以便您可以手动传递`--force`选项：

*   使用[maven 插件](https://github.com/eskatos/asadmin)执行 asadmin 命令：
*   使用 maven 插件将 asadmin[作为 shell 命令执行](https://stackoverflow.com/questions/3491937)

# linux - 让操作系统为 Erlang 提供更多内存访问权限

> ID：13047095
> 
> 赞同：0
> 
> 时间：2012-10-24T10:11:15.390
> 
> 标签：linux, unix, memory, erlang, mnesia

我一直在功能强大的服务器上运行 erlang 应用程序。但是，有时，您无法避免此类内存错误，尤其是当用户很多时

```
崩溃转储被写入：erl_crash.dump
eheap_alloc：无法分配 467078560 字节的内存（“堆”类型）。

```

更烦人的是你有一个 20GB 内存的服务器，比如 8 个内核。看看 erlang 说的内存，它无法分配，这就是它崩溃的原因，也令人不安，因为与服务器的库存相比，它的内存非常少。

我今天的问题（我希望它没有关闭），是什么操作系统配置可以完成（考虑 RedHat、Solaris、Ubuntu 或 Linux），以使其在需要时为 erlang VM 提供更多内存？

如果要在此类功能强大的服务器上运行 erlang 应用程序，那么对于底层操作系统应该考虑哪些内存考虑（在 erlang 之外）？

**问题背景**
Erlang 消耗主内存，尤其是当进程数以千计时。我正在使用`Yaws Web Server`. 在同一个节点上，我让 Mnesia 运行大约 3 个`ram_copies`表。它是一个通知系统，作为运行在 Intranet 上的大型 Web 应用程序的一部分。用户通过 JSONP 从运行在不同 Web 服务器和不同硬件上的主应用程序访问这个系统。每个用户连接都直接向 mnesia 查询它需要的任何数据。然而，随着用户的增加，我总是得到`crash dump`. 我已经尽可能地调整了应用程序本身，将代码清理为标准，使用比字符串更多的二进制文件等避免了偏航进程和 mnesia 之间的 gen_servers 等单点，以便每个连接直接命中 mnesia。该服务器功能强大，具有大量 RAM 和磁盘空间。但是，当我的节点需要更多内存时会崩溃，这就是为什么我需要找到一种方法来强制操作系统将更多内存扩展到 erlang。操作系统是`REDHAT ENTERPRISE 6`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:14:12.187

这可能是因为您在 32 位模式下运行，只有大约 4 GB 的 RAM 是可寻址的。尝试切换到 64 位版本的 erlang 并重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T12:59:45.540

我读过的几个不同的服务器教程说，如果服务以非 root 用户身份运行，您可能必须编辑 /etc/security/limits.conf 以允许该用户访问比通常允许的更多的内存。下面的示例让用户 fooservice 使用 2GB。

```
fooservice      hard    memlock   2097152 
```

# eclipse-plugin - 快速搜索查看零件

> ID：13047097
> 
> 赞同：3
> 
> 时间：2012-10-24T10:11:21.253
> 
> 标签：eclipse-plugin

在我的 Eclipse 插件中，我使用`TableViewer`. `CTRL`我已经通过按+后显示的自定义对话框为此视图添加了搜索功能`F`。为此，我使用了附加到`TableViewer`表的键侦听器。在 Windows 中，搜索工作正常，但在 Linux 中，它被其他功能覆盖：Eclipse 在活动视图的底部显示一个文本字段并进行增量搜索。

我希望我的插件在两个平台上的行为都相同（我还没有决定哪种方法更方便）。

*   如何在 Windows 中启用/修改此功能？
*   如何在 Linux 中禁用它？

# java - Gdata API 博主示例

> ID：13047098
> 
> 赞同：2
> 
> 时间：2012-10-24T10:11:25.653
> 
> 标签：java, api, gdata, blogger

我在为 gdata java 库运行此示例代码时遇到问题：

```
import java.net.URL;
import com.google.gdata.client.Query;
import com.google.gdata.client.blogger.BloggerService;
import com.google.gdata.data.Feed;

public class AccessBloggerSample {

public static void main(String[] args) throws Exception {
   BloggerService service = new BloggerService("Testing-Blogger");
   service.setUserCredentials("tmerachli@gmail.com", "XXX");
   System.out.println("Google: " + BloggerService.getVersion());
   URL feedUrl = new URL("http://minhchaunyc.blogspot.com/feeds/posts/default ");
   Query query = new Query(feedUrl);
   System.out.println("service: ");
   Feed resultFeed = service.getFeed(query, Feed.class);
   System.out.println("blogs: " + resultFeed.getEntries().size());
   }
} 
```

我收到以下错误：

```
java.lang.NoClassDefFoundError: com/google/common/collect/Maps
at com.google.gdata.wireformats.AltRegistry.<init>(AltRegistry.java:118)
at com.google.gdata.wireformats.AltRegistry.<init>(AltRegistry.java:100)
at com.google.gdata.client.Service.<clinit>(Service.java:555)
at AccessBloggerSample.main(AccessBloggerSample.java:23)
Caused by: java.lang.ClassNotFoundException: com.google.common.collect.Maps
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at com.google.gdata.wireformats.AltRegistry.<init>(AltRegistry.java:118)
at com.google.gdata.wireformats.AltRegistry.<init>(AltRegistry.java:100)
at com.google.gdata.client.Service.<clinit>(Service.java:555)
at AccessBloggerSample.main(AccessBloggerSample.java:23)
at __SHELL0.run(__SHELL0.java:6)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at bluej.runtime.ExecServer$3.run(ExecServer.java:724)` 
```

任何想法为什么我得到这个？我正在通过 BlueJ 编译和运行我的代码，我将所有 jar 文件提取到 BlueJ 的 lib 目录中，并且代码编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:04:25.413

您需要将番石榴添加到您的 Java Build-Patproject：[http ://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

# c# - 在 C# 中从 MYSQL 读取 Mediumblob 数据类型

> ID：13047099
> 
> 赞同：3
> 
> 时间：2012-10-24T10:11:29.740
> 
> 标签：c#, mysql, byte

我在 MYSQL Server 中有一个数据库。有一个表存储一个带有其信息的图像。该图像的数据类型是 Mediumblob。我需要阅读它并存储在一个字节 [] 中，但我不知道该怎么做。有人有这种情况的解决方案吗？太感谢了:)

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:27:15.813

[查看MySQL 网站上这篇文章](http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-blob.html)中的示例，您应该能够像这样处理数据：

要存储图像：

```
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

// initialize "conn" and "cmd" here

FileStream fs = new FileStream(@"c:\image.png", FileMode.Open, FileAccess.Read);
FileSize = fs.Length;

byte[] rawData = new byte[FileSize];
fs.Read(rawData, 0, FileSize);
fs.Close();

conn.Open();

string SQL = "INSERT INTO file VALUES(NULL, @FileSize, @File)";

cmd.Connection = conn;
cmd.CommandText = SQL;
cmd.Parameters.AddWithValue("@FileSize", FileSize);
cmd.Parameters.AddWithValue("@File", rawData);

cmd.ExecuteNonQuery();

conn.Close(); 
```

并阅读它：

```
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
MySql.Data.MySqlClient.MySqlDataReader myData;

// initialize connection and query here...

myData = cmd.ExecuteReader();

if (!myData.HasRows)
    throw new Exception("There are no BLOBs to save");

myData.Read();

int FileSize = myData.GetUInt32(myData.GetOrdinal("file_size"));
byte[] rawData = new byte[FileSize];

myData.GetBytes(myData.GetOrdinal("file"), 0, rawData, 0, (int)FileSize);

FileStream fs = new FileStream(@"C:\newfile.png", FileMode.OpenOrCreate, FileAccess.Write);
fs.Write(rawData, 0, (int)FileSize);
fs.Close(); 
```

此代码显示如何将图像保存到文件中（并假设它以 PNG 格式存储），但是您可以对数据执行任何操作...

# django - 强制 django_compressor 重新编译 css/less 文件

> ID：13047102
> 
> 赞同：3
> 
> 时间：2012-10-24T10:11:31.367
> 
> 标签：django, apache, apache2, django-compressor

我们让用户将他们自己的自定义 css/less 上传到我们的 django 应用程序。

我们所有的 css/less 文件都由[django_compressor](http://django_compressor.readthedocs.org/) “on-the-fly”压缩。

最初部署应用程序时，所有 css 文件都将移动到该`collect-static`目录。

当用户上传自定义 css 样式时，他们会替换`collect-static`目录中较少的文件之一。

问题在于这些更改仅在重新加载 apache 时才会出现，因此 django-compressor 会生成一个新的 css 文件。

有没有办法强制 django-compressor 重新生成它的编译和缓存文件？`sudo services apache2 reload`在 django 应用程序级别触发 a 时我会感到不舒服。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:25:01.100

我可以想出两个可能的解决方案，我不太喜欢这两个。

您可以从[incron](http://packages.debian.org/wheezy/incron)或 cron中调用`compress`( [doc )：](http://django_compressor.readthedocs.org/en/latest/usage/#pre-compression)

```
python manage.py compress 
```

或者你可以设置一个非常低的`COMPRESS_REBUILD_TIMEOUT`。（[文档](http://django_compressor.readthedocs.org/en/latest/settings/#caching-settings)）

顺便说一句，您将用户脚本作为单独的捆绑包，对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:22:43.453

我使用了不同的方法。我现在正在使用离线压缩，无论如何这对于多服务器部署来说更快更好。

我为用户提供了一个界面来更改某些 css 和更少的值。我将这些 css/less 值保存在数据库表中，以便用户可以轻松地编辑这些内容。

为了使新的 css/less 值可用于前端（编译的 css 文件），我将用户在 less 文件中输入的值写入磁盘并重新运行`python manage.py compress`命令。

这样会生成编译后的压缩器文件，如果用户输入了无效的 less 代码，这会导致编译错误，压缩器会停止并保留旧的 css 文件。

这是我的 save() 方法：

```
 def save(self, *args, **kwargs):

        #write the less file to the file system
        #everytime the model is saved
        try:

            file_location = os.path.join(settings.STATIC_ROOT, 'styles', 'less', 'custom_styles.less')

            with open(file_location, 'w') as f:
                f.write(render_to_string('custom_styles/custom_stylesheet_tmpl.txt', {'platform_customizations': self}))

        except IOError:
            #TODO show error message to user in admin backend and via messaging system
            raise IOError

        #re-run offline compress command in prod mode
        management.call_command('compress')

        super(PlatformCustomizations, self).save(*args, **kwargs) 
```

# html - 用于访问此页面的 IIS 405 HTTP 动词不允许使用电子邮件

> ID：13047103
> 
> 赞同：2
> 
> 时间：2012-10-24T10:11:32.437
> 
> 标签：html, perl, email, iis, formmail

首先，我对IIS很熟悉，但是没有太多的实践经验，所以我来这里。

我已经设置了 IIS7 并将我的 HTML 网站、脚本等放入 wwwroot 文件夹。出于测试目的，我可以在本地浏览该网站。

我有一个带有简单电子邮件表单的网页，它使用马特的脚本存档：FormMail.pl。提交后，我遇到了这个错误：

```
 405 - HTTP verb used to access this page is not allowed.
 The page you are looking for cannot be displayed because an invalid method (HTTP verb) was used to attempt access. 
```

我不确定此错误或如何解决它，以便电子邮件表单正常工作。

如果您需要有关此问题的任何其他信息，我将提供尽可能多的信息。

谢谢 ：）

更新：

好的，所以我修改了我的 HTML 以使用 nms 脚本。在 IIS 中，我必须启用 CGI 和 ISAPI，因为它们没有安装。安装它们后，我为 *.pl、*cgi 添加了一个脚本处理程序映射；还将动词 GET、HEAD 和 POST 添加到两个处理程序映射中。我比使用：

```
 <!DOCTYPE htmlPUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
 <head>
 <title>Perl Test</title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
 </head>
 <body>
 <h1>Perl is working!</h1>
 </body>
 </html> 
```

测试 *.pl 和 *.cgi 是否在 localhost 上工作。

现在到了我被卡住的部分......

当我单击提交按钮时，它会将我定向到 formmail.cgi（formmail.pl 由于某种原因不起作用），但它只会将我定向到 cgi 脚本和一个空白的白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:30:14.833

405 表示您的 Web 服务器无法识别请求中的 HTTP 方法（GET、POST、HEAD 等）。在您的情况下，我认为默认情况下不允许 .pl 扩展名来处理 POST 请求。请参阅[此链接](http://www.somacon.com/p126.php)（取自[此处](https://stackoverflow.com/questions/6617210/http-405-on-error-on-http-post-iis-asp-net)）以创建处理程序映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:08:11.110

检查此错误最重要的是控制台窗口中的 HTML 选项卡。或者，如果错误显示在浏览器中，请查看那里。无论哪种情况，请查看“请求的 URL”的文件类型。

如果它是 *.json 文件，请按照这些说明进行操作。如果是其他格式，您可能需要调整处理程序映射中使用的 exe 文件。确保在服务器级别配置每个！！！在单击 Mime Types 或 Handler Mappings 之前不要单击站点；单击服务器名称（在树/对象资源管理器中），以便每个站点继承设置。如果您也在网站上设置它们，您的 web.config 会显式应用处理程序映射，但如果您在服务器级别添加它则不会。

[http://www.uipress.com/add-json-handler-support-in-iis-7/#.UT_bw9aOR8E](http://www.uipress.com/add-json-handler-support-in-iis-7/#.UT_bw9aOR8E)

由于您正在处理 CGI，因此您将有一个稍微不同的脚本映射可执行文件。这至少应该让你走上正轨。

# unix - 使用 rsync 或类似工具从 Dropbox 复制到 UNIX 机器？

> ID：13047105
> 
> 赞同：3
> 
> 时间：2012-10-24T10:11:32.703
> 
> 标签：unix, dropbox, rsync

有什么方法可以直接将数据从 Dropbox 服务器复制到 UNIX 服务器，而无需成为 root 用户或在那里安装 Dropbox 软件？

就像是：

```
rsync -aP myusername@dropbox.com:somepath/ . 
```

（想要这样做的原因是 UNIX 服务器和 Dropbox 服务器之间的传输速度会快得多，因为它们都在主干上，而不是我的本地计算机和具有家庭宽带连接的 UNIX 服务器之间的传输速度） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:58:05.250

您可以使用 wget 从命令行将文件从保管箱下载到服务器。就像是

```
wget http://dl.dropbox.com/u/12345678/largefile.zip 
```

如果您的链接速度较慢，并且在下载所有文件之前下载中断，您可以使用 wget 的 -c 选项从停止的地方继续下载。做就是了：

```
wget -c http://dl.dropbox.com/u/12345678/largefile.zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:49:41.293

我不相信您可以通过 SSH 访问 Dropbox 服务器。想想看，这意味着 Dropbox 服务器将拥有数千个甚至数百万个 SSH 帐户，这只是用户使用它的机会。此外，一个默认的 Unix 用户有权读取 Unix 操作系统的大量内容，并将其限制为仅几个命令是一件大事。想象一下，如果您的 Unix 用户能够以某种方式看到另一个 Unix 用户的数据，包括他们的 Dropbox 数据。不过好主意。

编辑：大写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T13:46:25.993

尝试 rclone [https://github.com/dropbox/dbxcli/issues/60#issuecomment-497713363](https://github.com/dropbox/dbxcli/issues/60#issuecomment-497713363)

安装

```
$ curl -OJN https://downloads.rclone.org/rclone-current-linux-amd64.zip
$ unzip rclone-current-linux-amd64.zip
$ cp rclone-v1.47.0-linux-amd64/rclone ~/bin/ 
```

配置[https://rclone.org/dropbox/](https://rclone.org/dropbox/)

```
$ rclone config
2019/05/31 15:00:07 NOTICE: Config file "/home/roman/.config/rclone/rclone.conf" not found - using defaults
No remotes found - make a new one
n) New remote
s) Set configuration password
q) Quit config
n/s/q> n
name> dropbox
Type of storage to configure.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value
 1 / A stackable unification remote, which can appear to merge the contents of several remotes
   \ "union"
 2 / Alias for a existing remote
   \ "alias"
 3 / Amazon Drive
   \ "amazon cloud drive"
 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc)
   \ "s3"
 5 / Backblaze B2
   \ "b2"
 6 / Box
   \ "box"
 7 / Cache a remote
   \ "cache"
 8 / Dropbox
   \ "dropbox"
 9 / Encrypt/Decrypt a remote
   \ "crypt"
10 / FTP Connection
   \ "ftp"
11 / Google Cloud Storage (this is not Google Drive)
   \ "google cloud storage"
12 / Google Drive
   \ "drive"
13 / Hubic
   \ "hubic"
14 / JottaCloud
   \ "jottacloud"
15 / Koofr
   \ "koofr"
16 / Local Disk
   \ "local"
17 / Mega
   \ "mega"
18 / Microsoft Azure Blob Storage
   \ "azureblob"
19 / Microsoft OneDrive
   \ "onedrive"
20 / OpenDrive
   \ "opendrive"
21 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)
   \ "swift"
22 / Pcloud
   \ "pcloud"
23 / QingCloud Object Storage
   \ "qingstor"
24 / SSH/SFTP Connection
   \ "sftp"
25 / Webdav
   \ "webdav"
26 / Yandex Disk
   \ "yandex"
27 / http Connection
   \ "http"
Storage> 8
** See help for dropbox backend at: https://rclone.org/dropbox/ **

Dropbox App Client Id
Leave blank normally.
Enter a string value. Press Enter for the default ("").
client_id>
Dropbox App Client Secret
Leave blank normally.
Enter a string value. Press Enter for the default ("").
client_secret>
Edit advanced config? (y/n)
y) Yes
n) No
y/n> n
Remote config
Use auto config?
 * Say Y if not sure
 * Say N if you are working on a remote or headless machine
y) Yes
n) No
y/n>
y/n> y
If your browser doesn't open automatically go to the following link: http://127.0.0.1:53682/auth
Log in and authorize rclone for access
Waiting for code...
Got code
--------------------
[dropbox]
type = dropbox
token = {"access_token":"<token>","token_type":"bearer","expiry":"0001-01-01T00:00:00Z"}
--------------------
y) Yes this is OK
e) Edit this remote
d) Delete this remote
y/e/d> y
Current remotes:

Name                 Type
====                 ====
dropbox              dropbox

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
e/n/d/r/c/s/q> q 
```

从保管箱复制所有文件[https://rclone.org/docs/](https://rclone.org/docs/)

```
$ rclone copy --dry-run dropbox:/ .
$ rclone copy dropbox:/ . 
```

# spring-mvc - Spring Insight 使用 Spring 应用程序在 Cloudfoundry 上工作的要求是什么

> ID：13047106
> 
> 赞同：2
> 
> 时间：2012-10-24T10:11:36.373
> 
> 标签：spring-mvc, spring-roo, cloud-foundry, spring-insight

我有一个在cloudfoundry 中运行的spring mvc 生成的应用程序（通过ROO）。我还可以部署 spring 洞察力。但我的应用显示“洞察：此堆栈不支持”。

它不应该在弹簧堆栈上工作吗？需要什么才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:59:58.963

访问[http://insight.cloudfoundry.com/](http://insight.cloudfoundry.com/)并使用您的 cloudfoundry 凭据登录。之后，您将部署一个额外的应用程序[http://insight-xxxx.cloudfoundry.com/](http://insight-xxxx.cloudfoundry.com/)，您将在其中拥有一个包含所有应用程序的 spring 洞察仪表板。

# sql - 如何在 Aqua Data 中打开查询分析器（窗口）

> ID：13047114
> 
> 赞同：1
> 
> 时间：2012-10-24T10:12:01.587
> 
> 标签：sql, database, ide, aquafold

[要在Aqua Data Studio](http://www.aquafold.com/aquadatastudio.html) (ADS)中打开查询分析器 (QA) ，我现在右键单击导航窗格中的表，然后选择*Script Object To Window As*，然后*选择 SELECT*

这变得很麻烦。有没有更容易做到这一点的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:12:01.587

在尝试打开查询分析器之前，请确保您首先连接到服务器！

* * *

## 要在 ADS 中打开 QA，请执行以下操作之一：

*   使用计算机键盘命令：（`Ctrl+Q` 或`Ctrl+Shift+W`在单独的窗口中打开 QA）。
*   单击*工具栏*上的*服务器*并选择*查询分析器*。
***   在导航栏中，右键单击连接的服务器下显示的任何节点，然后选择*Query Analyzer*。**

# websphere - 使用 @PersistenceUnit 在 Websphere 中注入 EntityManagerFactory 的问题

> ID：13047115
> 
> 赞同：2
> 
> 时间：2012-10-24T10:12:04.127
> 
> 标签：websphere, jpa-2.0, code-injection, persistence.xml

我在将 webapp 从 Glassfish 3.1 移植到 Websphere 8.5 时遇到问题。问题在于 JPA2 的使用：在 Glassfish 中运行的以下配置在 Websphere 中不起作用：

```
<persistence-unit name="pippoPU" transaction-type="JTA">  
<jta-data-source>jdbc/pippo</jta-data-source> 
```

和：

```
@ManagedBean(name = "xxxxxxx")
@ViewScoped
public class MioJSFBean implements Serializable {
    .....
    .....

    @Resource
    private UserTransaction utx = null;

    @PersistenceUnit(unitName = "pippoPU")
    private EntityManagerFactory emf = null;

    ....
    ....
} 
```

问题是 EntityManagerFactory 没有注入 .. 它仍然为空 ..

两个应用程序服务器都符合 JEE6。

（几个月前，我尝试使用 Weblogic 10.3，如果我没记错的话，当我直接从 Eclipse 部署时遇到了同样的问题......这是一个已知问题，可以通过设置“发布为展开的存档”来解决来自 weblogic-eclipse 插件。）

有人有什么建议吗？

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:03:32.427

当项目中的任何实体出现问题/错误时，就会发生这种情况。
Websphere 只在日志中输出一行 - 我相信你会找到它：

```
[ERROR] The server cannot create an EntityManagerFactory factory 
```

您需要将日志记录级别设置为`com.ibm.ws.jpa.*`to `All messages and traces`。然后，您将在日志中找到问题的根本原因。

# java - 通过 Maven 构建配置文件选择类

> ID：13047118
> 
> 赞同：2
> 
> 时间：2012-10-24T10:12:06.543
> 
> 标签：java, maven, ejb

我对 Maven 和 Java EE 编程很陌生。

我想创建一个用于身份验证测试的存根类，它应该在默认的 Maven 构建配置文件中激活。

目前我有两个同名但在不同包中的类。是否可以通过设置 maven 构建配置文件参数以某种方式选择要在构建阶段使用的正确类？我还在我的项目中使用 EJB 和 JSF2.0，并且身份验证对象是在其中一个 bean 中创建的：

```
AuthUtil util = new AuthUtil(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:22:13.947

这是可能的，有一些步法。您必须将您的类置于依赖项中并以这种方式使用配置文件：

```
<profiles>
    <profile>
        <id>default</id>
        <dependencies>
             <dependency>...</dependency>
       </dependencies>
    </profile>
    <profile>
        <id>someotherprofile</id>
        <dependencies>
             <dependency>...</dependency>
       </dependencies>
    </profile>
 </profiles> 
```

此外，这些类必须在同一个包中才能工作。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:20:13.043

您可以在属性文件中指定具体类，并通过 maven 构建配置文件过滤属性文件，因此它们将获得不同的值。然后属性文件将被 java 代码读取并相应地使用。

有什么理由这样做吗？感觉这不是正确的做事方式……

# python - 在spider_close信号发送之前调用Python Scrapy函数？

> ID：13047120
> 
> 赞同：5
> 
> 时间：2012-10-24T10:12:19.310
> 
> 标签：python, signals, scrapy, web-crawler

我使用 scrapy 编写了一个爬虫，它会向不同的站点发出一大堆 HtmlXPathSelector 请求。在（异步）满足每个请求后，它会在 .csv 文件中创建一行数据。无法查看最后满足哪个请求，因为如果尚未提取数据，则重复请求（有时它会丢失几次数据）。即使我从一个整洁的列表开始，输出也很混乱，因为这些行是在提取数据后立即写入的。

现在我想根据一列对该列表进行排序，但在每个请求完成之后。**'spider_close' 信号可以用来触发真正的功能吗？**如下所示，我尝试将信号与调度程序连接起来，但这个函数似乎只打印出东西，而不是处理变量甚至调用其他函数。

```
def start_requests(self)
    ...  dispatcher.connect(self.spider_closed, signal=signals.engine_stopped) ....

def spider_closed(spider):
    print 'this gets printed alright'   # <-only if the next line is omitted...
    out = self.AnotherFunction(in)      # <-This doesn't seem to run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-23T19:19:46.133

我拼凑了一个管道来为你解决这个问题。

文件：Project.middleware_module.SortedCSVPipeline

```
import csv
from scrapy import signals

class SortedCSVPipeline(object):

    def __init__(self):
        self.items = []
        self.file_name = r'YOUR_FILE_PATH_HERE'
        self.key = 'YOUR_KEY_HERE'

    @classmethod
    def from_crawler(cls, crawler):
        pipeline = cls()
        crawler.signals.connect(pipeline.spider_closed, signals.spider_closed)
        return pipeline

    def spider_closed(self, spider):
        for item in sorted(self.items, key=lambda k: k[self.key]):
            self.write_to_csv(item)

    def process_item(self, item, spider):
        self.items.append(item)
        return item

    def write_to_csv(self, item):
       writer = csv.writer(open(self.file_name, 'a'), lineterminator='\n')
       writer.writerow([item[key] for key in item.keys()]) 
```

文件：settings.py

```
ITEM_PIPELINES = {"Project.middleware_module.SortedCSVPipeline.SortedCSVPipeline" : 1000} 
```

运行此程序时，您将不再需要使用项目导出器，因为此管道将为您完成 csv 写入。此外，您的设置中管道条目中的 1000 需要比您要在此之前运行的所有其他管道更高的值。我在我的项目中对此进行了测试，结果生成了一个按我指定的列排序的 csv 文件！高温高压

干杯

# asp.net - 在 gridview 的下拉菜单中，在 OnSelectedIndexChanged 上找到 GridRow

> ID：13047121
> 
> 赞同：2
> 
> 时间：2012-10-24T10:12:19.733
> 
> 标签：asp.net, datagridview

我有一个 asp.net 网格视图。下拉列表类型的模板字段包含在列中：

```
<asp:TemplateField HeaderTextLabel="strManagedOETeamart">
                        <ItemTemplate>
                            <asp:DropDownList runat="server" AutoPostBack="True" OnSelectedIndexChanged="SelectedTeamartChanged">
                                <asp:ListItem Selected="True" Value="White"> White </asp:ListItem>
                                <asp:ListItem Value="Silver"> Silver </asp:ListItem>
                                <asp:ListItem Value="DarkGray"> Dark Gray </asp:ListItem>
                                <asp:ListItem Value="Khaki"> Khaki </asp:ListItem>
                                <asp:ListItem Value="DarkKhaki"> Dark Khaki </asp:ListItem>
                            </asp:DropDownList>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

当用户选择另一个项目时，如何获取 GridViewRow？

```
 protected void SelectedTeamartChanged(object sender, EventArgs e)
    {
        DropDownList dropDown = (DropDownList) sender;
        //I would like to know the GridViewRow this DropDownList is in

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:15:01.833

您正在寻找的[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)财产：

```
GridViewItem row = (GridViewRow)dropDown.NamingContainer; 
```

顺便说一句，这适用于任何类型的 Web 数据绑定控件，例如`GridView`、或.`DataList``Repeater``ListView`

考虑这个更复杂的要求：你有一个`GridView`嵌套在另一个中的`GridView`。现在您正在处理一个 DropDownList 的`SelectedIndexChanged`事件，它位于孩子的内部，`GridView`并且您想要获取对`GridViewRow`parent的引用`GridView`：

```
var control = (Control)sender;
var row = (GridViewRow)control.NamingContainer;
var parentRow = (GridViewRow)row.NamingContainer.NamingContainer; 
```

这是获得它的最安全和最简单的方法。

# jar - 如何将 jar 应用程序设置为使用 Java 6 而不是 7

> ID：13047122
> 
> 赞同：2
> 
> 时间：2012-10-24T10:12:20.020
> 
> 标签：jar, path, java, advanced-installer

如何将我的 java jar 应用程序设置为使用 jre 6 而不是 jre 7？我这样做是因为如果应用程序使用 jre 7，我正在使用的库存在一些兼容性问题。

编辑：该应用程序将附带具有jre6 安装程序的自己的安装程序（使用[高级安装程序）。](http://www.advancedinstaller.com)但是不知道怎么去追踪jre6的安装文件夹。如何跟踪它并使 jar 文件使用 jre6？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:41:52.043

您可以从 Advanced Installer 更简单地执行此操作。你有两个选择：

1.  通过从 Java 产品页面转到“虚拟机”选项卡并将最小和最大 JRE 版本设置为 1.6，强制包使用机器上找到的 JRE 1.6

2.  从同一页面的项目中将 1.6 版的 JRE 作为捆绑包添加。这意味着 Advanced Installer 将自动在您的包中导入应用程序所需的 JRE 资源，从而增加包大小，并将它们安装在应用程序的安装文件夹中。此 JRE 包将仅由您的应用程序使用并随它一起删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:15:24.920

使用 java.exe 运行应用程序时，您可以提供 Java 1.6 安装的绝对路径。就像是：

```
absolute_path_to_java6_dir/bin/java -jar yourRunnableJar.jar 
```

或者

```
absolute_path_to_java6_dir/bin/java -cp .;yourJar.jar;otherJarFiles className 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:19:44.957

您可以在启动应用程序时检查正在运行的 JVM 版本。

```
System.getProperty("java.version"); 
```

通过这种方式，您可以向最终用户提供有意义的解释。

# java - java中泛型数组的解决方法

> ID：13047123
> 
> 赞同：2
> 
> 时间：2012-10-24T10:12:22.540
> 
> 标签：java, generics

我有一个任务，我需要制作自己的（简单）通用链表：

```
public class Node<T> {

   private int key;
   private T data;
   private Node<T> nextNode;

} 
```

但我需要用哈希表实现一个字典。我想制作一个包含节点的列表。如果发生冲突（两个类型的对象分散到同一个节点，我只是将它们链接起来 - 链表）。

**我必须自己实现这个，没有外部帮助（已经实现的列表或其他）**

我想如何做到这一点：

```
public class GenericDictionary<T> implements GenericDictionary_interface<T> {

    private int capacity;   
    private Node<T> [] slots;

    public GenericDictionary () {   
        this.capacity = 31;
        slots = new Node<T>[capacity];  // the array I need which I disperse to
    }
} 
```

然而，这并不完全可能。我确实尝试阅读了该主题，尝试在此处搜索 SO ......但我根本没有得到它。

我唯一的要求是......不要对变量/方法名称偷懒，请让它们易于理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:23:21.847

这是您可以做的最好的事情：

```
 @SuppressWarnings("unchecked")
    Node<T>[] slots = (Node<T>[]) new Node<?>[capacity]; 
```

你无法摆脱警告（除了压制它）。当您需要一个泛型类的数组时，您需要创建具有未指定泛型类型的数组，然后对其进行转换。

# android - 在 Android 应用程序之间共享数据

> ID：13047126
> 
> 赞同：1
> 
> 时间：2012-10-24T10:12:36.733
> 
> 标签：android, keychain

我想在不同的 Android 应用程序之间共享数据。在 iOS 应用程序上，我使用带有 accessGroup 属性的钥匙串，因此数据只能从我的应用程序访问，而且即使我删除所有应用程序，数据也会保留。

我可以使用什么机制在 Android 上做同样的事情？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:15:49.023

您可以使用[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)。 [这](http://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iv-android-content-providers/)是一个关于 ContentProviders 的好教程。[这篇](http://codeoncloud.blogspot.in/2012/06/data-sharing-between-two-android.html)文章专门讲述了使用它的数据共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:15:16.687

[`ContentProviders`是](http://developer.android.com/guide/topics/providers/content-providers.html)在 Android 上用于在应用程序之间共享数据的方式。

来自 Android 教程：

> 内容提供者管理对结构化数据集的访问。它们封装数据，并提供定义数据安全性的机制。内容提供程序是将一个进程中的数据与另一个进程中运行的代码连接起来的标准接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:15:32.613

使用[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)来做到这一点。

# ios - 动画 UIView 就像它靠近或远离一样

> ID：13047130
> 
> 赞同：0
> 
> 时间：2012-10-24T10:12:50.083
> 
> 标签：ios, uiviewanimation

我看到了[这个线程](https://stackoverflow.com/questions/8175367/iphone-uiview-animation-resize-in-like-disappear-in-water-and-comes-back-floatin)，但解决方案不是我想要的。

我想弹出一个 UIView ，其动画类似于应用程序从 SpringBoard 中出现的方式（它似乎更近了），并使其消失并移开。我尝试为框架设置动画，但效果是内容未调整大小：不幸的是，我无法为视图的内容分配约束；如果视图以正确的尺寸显示并且只有“图形上下文”被调整大小，结果应该是这样的。

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:21:36.200

这从大小的 10% 开始，然后变为视图大小的 100%

```
view.transform = CGAffineTransformScale(view.transform, 0.1, 0.1);
[UIView animateWithDuration:0.35 animations:^{
    view.transform = CGAffineTransformScale(view.transform, 1.0, 1.0);
} completion:^(BOOL finished) {
}]; 
```

还记得`#import <QuartzCore/QuartzCore.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:20:00.993

您可以为视图层的 transform.scale 和 opacity 设置动画。有关详细信息，请参阅此答案：[https ://stackoverflow.com/a/3463362/550177](https://stackoverflow.com/a/3463362/550177)

# java - JAVA sql NOT IN 列表语句

> ID：13047132
> 
> 赞同：5
> 
> 时间：2012-10-24T10:12:58.533
> 
> 标签：java, sql-server

我正在尝试从记录 ID 不在列表中的数据库中选择记录。

看看下面@我的问题。

```
String Sqlids = "2,6,3,9"; // this is dynamic so the number of element is unknown

String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN (2,6,3,9) ORDER BY NEWID()";
PreparedStatement stat = con.prepareStatement(str);
ResultSet rs = stat.executeQuery(); 
```

上述语句工作正常，但如果我将其更改为

```
String Sqlids = "2,6,3,9";
String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN (Sqlids) ORDER BY NEWID()";
PreparedStatement stat = con.prepareStatement(str);
ResultSet rs = stat.executeQuery();

//i also try this
String Sqlids = "2,6,3,9";
String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN (?) ORDER BY NEWID()";
PreparedStatement stat = con.prepareStatement(str);
stat.setString(1,Sqlids );

ResultSet rs = stat.executeQuery(); 
```

上面的语句没有过滤由于 Sqlids 是一个字符串，因此将其视为一个参数，因此它返回重复的行，是否有用于存储诸如 2,6,3,9 之类的值的整数格式？因为 Sqlids 来自一个名为 SqlidList 的数组列表，所以我尝试这样的 somtin

```
Iterator iTr = SqlidList.iterator();
while(iTr.hasNext()){
    stat.setString(1,iTr.next().toString()+",");
} 
```

但 setString(1,--) 不可用，因为它在一个 while 循环中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:07:26.667

将您的 id 转换为 String[] 后使用[Connection#createArrayOf](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5B%5D%29)

```
String[] ids = {"2", "6", "3", "9"};

String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN ? ORDER BY NEWID()";
PreparedStatement stat = con.prepareStatement(str);
stat.setArray(1, con.createArrayOf("text",ids));
ResultSet rs = stat.executeQuery(); 
```

如果您的 JDBC 驱动程序不支持 createArrayOf （在这种情况下），我可能只是在适当的位置构造查询字符串，例如：

```
String Sqlids = "2,6,3,9";
String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN ("+Sqlids+") ORDER BY NEWID()"; 
```

或者，如果您有一组 id，请使用实用程序方法来创建数组内容：

```
public static String toSqlArray(List<String> strings) {
    StringBuilder sb = new StringBuilder();
    boolean doneOne = false;
    for(String str: strings){
        if(doneOne){
            sb.append(", ");
        }
        sb.append("'").append(str).append("'");
        doneOne = true;
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:39:28.040

我解决问题的方法是：

1.  SQL = "...ID 不在 ({0}) ..."

2.  有一种方法可以构建一个包含多个？等于 SqlidList 的大小

    ```
    public static String buildQuestionMarks(final int count) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < count; i++) {
       sb.append("?" + ",");
    }
    return sb.substring(0, sb.length() - 1); 
    ```

    }

3.  使用 java.text.MessageFormat.format() 插入列表？进入 sql 字符串 finalSql = MessageFormat.format(SQL, questionMarksString);

4.  有一种方法可以在准备好的语句上设置参数。类似于您所写的内容，尽管您需要增加 stat.setString() 的第一个参数

这应该适用于可变数量的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:21:49.523

您是否尝试过使用

```
 int[] array = {2,6,3,9};
    String str= "SELECT TOP 1 * FROM student WHERE ID NOT IN (?,?,?,?) ORDER BY NEWID()";
    PreparedStatement stat = con.prepareStatement(str);
    for(int i = 1; i <= array.length; i++)
        stat.setString(i,array[i - 1]);

    ResultSet rs = stat.executeQuery(); 
```

# extjs - ExtJS4 和 Symfony 2

> ID：13047134
> 
> 赞同：0
> 
> 时间：2012-10-24T10:13:03.670
> 
> 标签：extjs, symfony, extjs4

我必须混合 Symfony2 和 ExtJS4。所有视图都需要用 ExtJS 渲染，而不是 twig。

所有应用程序都位于安全区域，只有成员才能访问它。

当用户启动应用程序时，主视口会显示登录表单。连接后，显示整个应用程序。

实际上，/路由需要显示视口。它将调用 ajax 请求来检查用户是否已连接。

如果是，启动应用程序 如果不是，显示登录表单

而且我不知道该怎么做，我的控制器中的 / 操作等待响应，我只想启动 javascript。

编辑：登录表单必须使用 ExtJS 制作。

安全.yml

```
firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/login$
            security: false

        secured_area:
            pattern:    ^/
            form_login:
                check_path: /login_check
                login_path: /login
            logout:
                path:   /logout
                target: / 
```

和 loginAction

```
 public function loginAction()
    {
        if ($this->get('request')->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
            $error = $this->get('request')->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
        } else {
            $error = $this->get('request')->getSession()->get(SecurityContext::AUTHENTICATION_ERROR);
        }

        $json = json_encode(array(
            'username' => $this->get('request')->getSession()->get(SecurityContext::LAST_USERNAME),
            'error'         => $error,
        ));
        $response = new Response($json);
        $response->headers->set('Content-Type', 'application/json');

        return $response;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:24:25.120

过程应该是 -

1.  对 login_check 进行 ajax 调用
2.  将 json 响应读入对象并检查设置的任何变量以表示成功或失败
3.  如果用户未登录，则显示登录窗口
4.  在登录按钮的单击事件中，再进行一次ajax调用以将其登录
5.  如果他们进行了身份验证，则返回一个变量以通过 json 进行通知，并显示应用程序，如果没有，则提示他们消息中出了什么问题。

-

```
var login = Ext.create('Ext.window.Window', {
    id: 'login',
    height: 200,
    width: 350,
    layout: 'anchor',
    modal: true,
    title: 'Welcome, Please Login',
    items: [
        this.username = Ext.create('Ext.form.field.Text', {
            fieldLabel: 'Username'
        }),
        this.password = Ext.create('Ext.form.field.Text', {
            fieldLabel: 'Password'
        }),
        this.submit = Ext.create('Ext.button.Button', {
            text: 'Login'
        })
    ]
});

login.submit.on('click', function (btn, e, eOpts) {
    Ext.Ajax.request({
        scope: this,
        params: {
            username: login.username.getValue(),
            password: login.password.getValue()
        },
        url: 'yoursite/login',
        success: function(response, opts) {
            var obj = Ext.decode(response.responseText);
            if (obj.logged_in === true) {
                //Show App
            } else {
                //Display error message
            }
        }
    });
});

Ext.Ajax.request({
    scope: this,
    url: 'yoursite/login_check',
    success: function(response, opts) {
        var obj = Ext.decode(response.responseText);
        if (obj.username === null) {
            //Show Login window
            login.show();
        } else {
            //Logic to show app if logged in
        }
    }
}); 
```

# wpf - URI 和 xaml 中的资源

> ID：13047143
> 
> 赞同：0
> 
> 时间：2012-10-24T10:13:42.827
> 
> 标签：wpf, xaml, resources, uri, imagesource

我有一个充当视图的视图模型的类。该类有一个 ImageSource 类型的公共成员。现在我需要将属性类型更改为 uri（或字符串）。但问题是我找不到从具有 URI 的资源字典访问单个资源的方法。

例如，此刻我正在做这样的事情：

```
VectorResourcesDictionary = new ResourceDictionary();
Uri uri = new Uri("pack://application:,,,/assembly;component/IconResources.xaml", UriKind.Absolute);
VectorResourcesDictionary.Source = uri;
object rawResource = VectorResourcesDictionary["VectorIcon.LeftArrowIcon"];
return pickerSymbol = rawResource as ImageSource; 
```

现在如何使用 URI 而不是 ImageSource 获得类似的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:47:29.380

很简单，只需将属性类型从 ImageSource 更改为 Uri：

```
public Uri PickerSymbol // i just guess the property name
{
    get
    {
        // get resource as string instead of ImageSource
        ...
        string uri = rawResource as string
        return new Uri(uri);
    }
} 
```

在您的视图中保持与 PickerSymbol 属性的绑定，Uri 将自动转换为 ImageSource。

```
<Image Source="{Binding PickerSymbol}" /> 
```

# ruby - cgi中ruby中的换行符

> ID：13047144
> 
> 赞同：2
> 
> 时间：2012-10-24T10:13:44.220
> 
> 标签：ruby, cgi

这是我的脚本

```
#!/usr/bin/env ruby
require 'sqlite3'
print "Content-type: text/html\r\n\r\n"
print "<html><body>Hello Stack Overflow<p></body></html>\r\n"

database = SQLite3::Database.new( "new.database" )
database.execute( "create table new_table (id INTEGER PRIMARY KEY, content TEXT);" )

database.execute( "insert into new_table (content) values ('this is a stack')")
database.execute( "insert into new_table (content) values ('this is overflow')")

rows = database.execute( "select * from new_table" )

p rows 
```

这有效，但在一行中打印行。我想添加一个换行符，但我不知道如何。html标签

不起作用，\n 也没有。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:22:47.153

从您的问题中，我知道您想`rows`逐行打印变量的内容，如果是，那么您可以将`rows`其视为数组变量并使用`each`with `row`。

例如，

```
rows.each do |x|
   print "#{x}\n"
end 
```

如果对你有帮助，试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:17:39.310

`<br>`将完成这项工作，因为您正在打印 HTML。

```
rows.each do |row|
   print row + '<br>'
end 
```

# html - 根据内表调整字段集

> ID：13047150
> 
> 赞同：1
> 
> 时间：2012-10-24T10:14:16.507
> 
> 标签：html, css, html-table, internet-explorer-8, fieldset

我有这个代码：

```
<fieldset>
 <label>show/hide table</label>
  <table class="tableStyle2">
    table code - a wide table
  </table>
</fieldset> 
```

字段集在 Chrome 和 Firefox 中自动调整其宽度，但在 IE8 中不自动调整。有解决办法吗？试过：

```
.tableStyle2 {
    border-collapse: collapse;
    font-family: 'Lucida Grande','Lucida Sans Unicode','Verdana,Arial,Helvetica,sans-serif';
    width: 100%;
    font-size: 12px;
    overflow: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:31:55.433

添加`disply:inline-block`到`fieldset`

```
fieldset{width:auto; display:inline-block}​ 
```

**[演示](http://jsfiddle.net/vqjYu/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:16:56.253

您是否尝试将宽度样式直接应用于字段集属性？

```
<fieldset style="width: 100%;">...</fieldset> 
```

# android - 三星 GT-P5100 的计算器包名称是什么？

> ID：13047152
> 
> 赞同：1
> 
> 时间：2012-10-24T10:14:18.850
> 
> 标签：android, android-intent, package, calculator

我曾经启动三星 GT-p5100 平板电脑的内置计算器活动，但它会导致崩溃。我之前将这段代码用于我的“HTC Sensation”，这对我有用：

```
Intent i = new Intent();
i.setClassName("com.android.calculator2",
"com.android.calculator2.Calculator"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:24:06.843

您应该使用[此处](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_APP_CALCULATOR)`CATEGORY_APP_CALCULATOR`规定的 Intent 类别。

这样它就不是特定于设备的。

从参考：

> 公共静态最终字符串 CATEGORY_APP_CALCULATOR
> 
> 自：API 级别 15 与 ACTION_MAIN 一起用于启动计算器应用程序。该活动应该能够执行标准的算术运算。
> 
> 注意：这不应用作 Intent 的主键，因为它不会导致应用程序以正确的操作和类别启动。相反，将此与 makeMainSelectorActivity(String, String) 一起使用以在选择器中生成具有此类别的主 Intent。
> 
> 常数值：“android.intent.category.APP_CALCULATOR”

例子：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
intent.setComponent(new ComponentName(CALCULATOR_PACKAGE, CALCULATOR_CLASS));
Calculator.this.startActivity(intent); 
```

更多信息[在这里](http://myandroidsolutions.blogspot.nl/2012/06/android-open-calculator-from-android.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:22:09.563

好吧，三星 Galaxy S3 吧`com.sec.android.app.popupcalculator`。

需要注意的是，三星可能会从一个操作系统版本更改为另一个操作系统版本。当然，它会从一个 OEM 变为另一个 OEM。因此，使用这种方法打开计算器可能不是一个好主意。

# java - rundll32 url.dll,FileProtocolHandler

> ID：13047158
> 
> 赞同：4
> 
> 时间：2012-10-24T10:14:54.113
> 
> 标签：java, windows, command-line, ms-word, rundll32

我`rundll32 url.dll,FileProtocolHandler my_file.dotx`用来在 Windows 下打开文件。

它适用于 .docx 文档，但是当我尝试使用 .dotx 文档（模板文档）时，它会基于模板创建一个新的 .docx。

就像 Windows 资源管理器中的正常行为一样：当您双击 .dotx 模板文件时，它会基于它创建一个新的 .docx 文件。如果要打开真正的 .dotx 文件，则必须右键单击它并选择“打开”而不是“新建”。

问题是：如何对 rundll32 做同样的事情？命令中是否有强制打开基础模板而不是创建新文档的选项？

编辑：我需要一种在命令行中没有 C 函数的方法，只是纯文本（我正在使用 Java 来做）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:20:39.073

也许您可以在[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)周围包装一个简单的 C 程序，并传递动词 OPEN。

```
ShellExecute(NULL, TEXT("open"), 
TEXT("rundll32.exe"), TEXT("url.dll,FileProtocolHandler pathToGadget"), 
NULL, SW_SHOWNORMAL); 
```

[我在这里](http://www.microsoftfaqs.com/Articles/14842292/ShellExecute_to_open_a_gadget_file)找到了这个例子。

编辑：

由于您在 Java 中执行此操作 - 您可以尝试像这样对 ShellExceute 函数进行[JNI 包装](http://www.teamdev.com/jniwrapper/)[（来自我在 The Wannabe Java Rockstar 上找到的示例并被屠杀）](http://weblog.janek.org/Archive/2004/06/27/JNIWrapper-JavaDesktopInt.html)

```
 public static boolean execute(String file, String parameters) {
    Function shellExecute =
      Shell32.getInstance().getFunction(SHELL_EXECUTE.toString());
    Int32 ret = new Int32();
    shellExecute.invoke(ret, // return value
                        new Parameter[] {
                          new Handle(),         // hWnd
                          new Str("open"),      // lpOperation
                          new Str(file),        // lpFile
                          new Str(parameters),  // lpParameters
                          new Str(),            // lpDirectory
                          new Int32(1)          // nShowCmd
                        });
    if(ret.getValue() <= 32) {
        System.err.println("could not execute ShellExecute: " +
                           file + ". Return: " + ret.getValue());
    }
    return (ret.getValue() > 32);
  }

  public static void main(String[] args) {
    ShellExecute.execute("rundll32.exe","url.dll,FileProtocolHandler pathToGadget" );
  } 
```

# javascript - 选择 optgroup 中的所有选项

> ID：13047165
> 
> 赞同：12
> 
> 时间：2012-10-24T10:15:15.343
> 
> 标签：javascript, jquery, html

我有一个`select`带有分组的元素`option`。单击 an时，我需要选择（或取消选择）所有`option`s 。我还需要能够一次选择多个 s。`optgroup``option``optgroup`

我希望它的工作方式是这样的：

*   如果未选择任何内容，我想单击一个选项并选择同一 optgroup 中的所有选项。
*   如果已经选择了一个或多个 optgroup，我想单击另一个 optgroup 中的一个选项，然后选择所有这些选项。
*   如果已经选择了一个或多个 optgroup，我希望能够按住 Ctrl 键单击未选择的 optgroup 中的选项，并选择该 optgroup 中的所有选项。
*   如果已经选择了一个或多个 optgroup，我希望能够按住 Ctrl 键单击所选 optgroup 中的一个选项，并取消选择该组中的所有选项。

查看 Stack Overflow 上的其他答案，我创建了以下内容：

HTML：

```
<select multiple="multiple" size="10">
    <optgroup label="Queen">
        <option value="Mercury">Freddie</option>
        <option value="May">Brian</option>
        <option value="Taylor">Roger</option>
        <option value="Deacon">John</option>
    </optgroup>
    <optgroup label="Pink Floyd">
        <option value="Waters">Roger</option>
        <option value="Gilmour">David</option>    
        <option value="Mason">Nick</option>                
        <option value="Wright">Richard</option>
    </optgroup>
</select> 
```

jQuery：

```
$('select').click(selectSiblings);
function selectSiblings(ev) {
    var clickedOption = $(ev.target);
    var siblings = clickedOption.siblings();
    if (clickedOption.is(":selected")) {
        siblings.attr("selected", "selected");
    } else {
        siblings.removeAttr("selected");
    }
}​ 
```

我在这里做了一个例子：http: [//jsfiddle.net/mflodin/Ndkct/](http://jsfiddle.net/mflodin/Ndkct/) （遗憾的是jsFiddle似乎不再支持IE8了。）

这在 Firefox (16.0) 中按预期工作，但在 IE8 中它根本不起作用。从其他答案中，我发现 IE8 无法处理or`click`上的事件，这就是我将其绑定到然后使用. 但在 IE8 中，仍然指向整个而不是被点击的那个。如何找出单击了哪个（或包含）以及它是被选中还是取消选中？`optgroup``option``select``$(ev.target)``$(ev.target)``select``option``option``optgroup`

另一个意想不到的行为，但相比之下较小，是在 Chrome (20.0) 中，直到鼠标离开`select`. 有人知道解决方法吗？​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:10:38.727

不是选择选项跨浏览器问题的具体问题的答案，我认为已经回答了，但是选择数据并将其传递回服务器的问题的解决方案是将您的标记更改为更适合的东西多选

如果您改用复选框，则可以将它们放在列表中并添加增强js以全选和取消全选

[http://jsfiddle.net/Ndkct/43/](http://jsfiddle.net/Ndkct/43/)

```
<dl>
<dt>Queen</dt>
<dd>
    <ul>
        <li>
            <input id="Mercury" name="bandmembers" value="Mercury" type="checkbox" />
            <label for="Mercury">Freddie</label>
        </li>    
        <li>
            <input id="May" name="bandmembers" value="May" type="checkbox" />
            <label for="May">Brian</label>
        </li>    
        <li>
            <input id="Taylor" name="bandmembers" value="Taylor" type="checkbox" />
            <label for="Taylor">Roger</label>
        </li>    
        <li>
            <input id="Deacon" name="bandmembers" value="Deacon" type="checkbox" />
            <label for="Deacon">John</label>
        </li>    
    </ul>
</dd>
<dt>Pink Floyd</dt> ... 
```

js 现在已经足够简单了

```
$("dt")
    .css("cursor","pointer")
    .click(function(){
        var $el = $(this).next();
        var $checks = $el.find(":checkbox");
        if($checks.is(":not(:checked)")){
           $checks.attr("checked",true); 
        }else{
           $checks.attr("checked",false); 
        }
    }); 
```

（这个小提琴[http://jsfiddle.net/Ndkct/44/](http://jsfiddle.net/Ndkct/44/)添加了一个父复选框以使其更有用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:27:03.907

由于 Internet Explorer 版本 10 仍然不支持`optgroup`or上的任何有用事件`option`，因此针对此问题的任何跨浏览器解决方案都不能依赖于来自这些元素的直接事件。

*注意：* MSDN 文档声称`optgroup`支持`click`事件，但从 IE 10 开始，这似乎仍然不是现实： http: [//msdn.microsoft.com/en-us/library/ie/ms535876(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/ie/ms535876(v=vs.85).aspx)

我在 Chrome 27、Firefox 20、Safari 6、IE 9 和 IE 10 中测试了以下内容（我目前无法访问 IE 8）。

这是您可以使用的示例：http: [//jsfiddle.net/potatosalad/Ndkct/38/](http://jsfiddle.net/potatosalad/Ndkct/38/)

```
// Detect toggle key (toggle selection)
$('select')
    .on('mousedown', function(event) {
        // toggleKey = Command for Mac OS X; Control for others
        var toggleKey = (!event.metaKey && event.ctrlKey && !(/Mac OS/.test(navigator.userAgent))) ? event.ctrlKey : event.metaKey;
        if (toggleKey === true) {
            $(this).data('toggleKey', true);
        }
        $(this).data('_mousedown', true);
    })
    .on('mouseup', function() {
        $(this).data('_mousedown', null);
    });
// Chrome fix for mouseup outside select
$(document).on('mouseup', ':not(select)', function() {
    var $select = $('select');
    if ($select.data('_mousedown') === true) {
        $select.data('_mousedown', null);
        $select.trigger('change');
    }
});

$('select')
    .on('focus',  storeState)
    .on('change', changeState);

function storeState() {
    $(this).data('previousGroup', $('option:selected', this).closest('optgroup'));
    $(this).data('previousVal',   $(this).val());
};

function changeState() {
    var select = this,
        args   = Array.prototype.slice.call(arguments);

    var previousGroup = $(select).data('previousGroup'),
        previousVal   = $(select).data('previousVal');
    var currentGroup  = null,
        currentVal    = $(select).val();

    var selected = $('option:selected', select),
        groups   = selected.closest('optgroup');

    console.log("[change] %o -> %o", previousVal, currentVal);

    if ((previousVal === currentVal) && (groups && groups.length == 1)) {
        // selected options have not changed
        // AND
        // only 1 optgroup is selected
        // -> do nothing
    } else if (currentVal === null || currentVal.length === 0) {
        // zero options selected
        // -> store state and do nothing
        storeState.apply(select, args);
    } else { // a select/deselect change has occurred
        if ($(select).data('toggleKey') === true
            && (previousVal !== null && previousGroup !== null && groups !== null)
            && (previousVal.length > currentVal.length)
            && (previousGroup.length === groups.length)
            && (previousGroup.get(0) === groups.get(0))) {
            // options within the same optgroup have been deselected
            // -> deselect all and store state
            $(select).val(null);
            storeState.apply(select, args);
        } else if (currentVal.length === 1) {
            // single option selected
            // -> use groups
            currentGroup = groups;
        } else if (groups.length === 1) {
            // multiple options selected within same optgroup
            // -> use groups
            currentGroup = groups;
        } else {
            // multiple options selected spanning multiple optgroups
            // -> use last optgroup
            currentGroup = groups.last();
        }
    }

    $(select).data('toggleKey', null);

    if (currentGroup !== null) {
        $('optgroup', select).not(currentGroup).children(':selected').attr('selected', false);
        $(currentGroup).children(':not(:selected)').attr('selected', true);
        storeState.apply(select, args);
    }
}; 
```

它通过将先前选择的组和选项存储在`select`元素上并确定`optgroup`应该选择（或取消选择）哪些来工作。

可以根据开发人员的需要更改某些行为。例如，在选择多个`options`跨越多个的情况下`optgroups`（通过单击并向下拖动，如屏幕截图所示）：

![跨越多个 optgroup 选择了多个选项](../Images/ee9182f2ee0a1be54a0240ffecaa354b.png)

这种情况下的默认冲突解决方案是始终使用最后一个`optgroup`，但可以更改为始终使用第一个，或者`optgroup`具有最大数量的已选择选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:31:50.787

这解决了问题，您只需要在选择 init 后添加此代码。

```
$( '.chzn-results .group-result' ).each( function () {
    var self      = $( this )
        , options = $( '~li', self )
        , next    = options.filter( '.group-result' ).get( 0 )
    ;
    self.data( 'chzn-options', options.slice( 0, options.index( next ) ) );
} )
.click( function () { 
    $( this ).data( 'chzn-options' ).mouseup()
 } )
.hover( function () { 
    $( this ).data( 'chzn-options' ).addClass( 'highlighted' );
 }, function () { 
    $( this ).data( 'chzn-options' ).removeClass( 'highlighted' );
 } )
.css( { cursor: 'pointer' } ) 
```

感谢在 github 上发布此修复程序的 adriengibrat：
[https ://github.com/harvesthq/chosen/issues/323](https://github.com/harvesthq/chosen/issues/323)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:02:19.877

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

$(document).ready(function() {
    $('select').click(function(tar) {
        var justClickValue = tar.target.value;

        var selectedGroup = $('option[value="'+justClickValue+'"]').parent();

        if (selectedGroup.hasClass("allSelected")) {
            selectedGroup.removeClass("allSelected");
            $("option").each(function() {
                $(this).removeAttr("selected");
            });
        } else {
            $(".allSelected").removeClass("allSelected");
            selectedGroup.addClass("allSelected");
            $(".allSelected option").each(function() {
                $(this).attr("selected", "selected");
            });
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T10:52:22.850

希望这会奏效

```
$("#SelectID").live("click",function() {
var elements = this.options; //or document.getElementById("SelectID").options;
for(var i = 0; i < elements.length; i++){
   if(!elements[i].selected)
    elements[i].selected = true;
}
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-27T09:28:11.843

根据您的问题选择/取消选择所有选项。您可以尝试以下代码，可能会对您有所帮助。

代码：

javascript代码：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"> 
```

```
 $(function(){

                $('#allcheck').click(function(){
                var chk=$('#select_option >optgroup > option');
                chk.each(function(){
                  $(this).attr('selected','selected');
            });
   });  
$('#alluncheck').click(function(){

              var chk=$('#select_option >optgroup > option');
              chk.each(function(){
              $(this).removeAttr('selected');
          });
     });}); 
```

html代码：

```
 <select multiple="multiple" size="10" id="select_option" name="option_value[]">
          <optgroup label="Queen">
            <option value="Mercury">Freddie</option>
            <option value="May">Brian</option>
            <option value="Taylor">Roger</option>
            <option value="Deacon">John</option>
        </optgroup>
        <optgroup label="Pink Floyd">
            <option value="Waters">Roger</option>
            <option value="Gilmour">David</option>    
            <option value="Mason">Nick</option>                
            <option value="Wright">Richard</option>
       </optgroup>
 </select>
<br>
       <strong>Select&nbsp;&nbsp;<a style="cursor:pointer;" id="allcheck">All</a>
  &nbsp;|&nbsp;<a style="cursor:pointer;"  id="alluncheck">None</a></strong> 
```

# jquery - 动态添加的表行不会触发 Click 事件

> ID：13047169
> 
> 赞同：17
> 
> 时间：2012-10-24T10:15:28.027
> 
> 标签：jquery, html-table, click, row, add

我有一个空表，我使用以下方法通过 jQuery 添加行：

```
$('#table > tbody:last').append('<tr id="' + symbol.Code1 + '"><td>' + symbol.Code1 + '</td><td>' + symbol.Code2+ '</td><td>' + symbol.Code3+ '</td></tr>'); 
```

一切都很好，但是当我实施时：

```
$("#table tr").click(function(e) {
    alert(this.id);
}); 
```

没发生什么事。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T10:16:24.623

您需要[事件委托](http://learn.jquery.com/events/event-delegation/)，您可以使用**[它](http://api.jquery.com/on/)**来为动态添加的元素绑定 click 事件。**您通过单击绑定的方式将应用于现有元素**，但不适用于稍后添加的元素。

```
$(document).on("click", "#table tr", function(e) {
    alert(this.id);
}); 
```

您可以`on`通过 id 或父类提供最接近的父选择器来限制范围。

```
$('.ParentElementClass').on("click", "#table tr", function(e) {
    alert(this.id);
}); 
```

**[委托活动](http://api.jquery.com/on/)**

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T10:16:57.387

你必须使用`.on`方法

```
$("#table").on('click','tr',function(e) { 
    alert($(this).attr('id')); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T10:16:36.420

在将事件绑定到*现有*事件后动态添加行。您可以使用[委托事件方法](http://api.jquery.com/on/)来解决问题：

```
$("#table").on("click", "tr", function(e) {
    alert(this.id);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-01T11:22:54.887

```
$(document).on('click', "#tbl-body tr td", function(e) { 
    alert(this.id);
}); 
```

# jquery - 直接孙子的 jQuery 选择器

> ID：13047172
> 
> 赞同：3
> 
> 时间：2012-10-24T10:15:42.923
> 
> 标签：jquery, jquery-selectors

有没有更好的方法来编写以下遍历使用`selectors`？

```
$table.children('tbody').children('tr'); 
```

我想过滤直系孙子，而不包括进一步的后代（表内表）。

在 jQuery 文档`$table.find('> tbody > tr')`中被标记为已弃用。

**更新** 我正在寻找一个更快或等效于上述方法的选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:25:51.820

作为替代选择器，我只能建议以下内容。`el.childNodes`此外，我怀疑是否有比方法表示的简单 DOM 迭代更快的东西`children()`。

```
$table.find("tr:not(tr tr)")​​​​​​​​; 
```

**演示：http:** [//jsfiddle.net/mZppb/](http://jsfiddle.net/mZppb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:19:02.913

如果是立即使用：

```
$('table > tbody > tr'); 
```

# php - 使用带有多个索引的 PHP 的 Sphinx

> ID：13047179
> 
> 赞同：3
> 
> 时间：2012-10-24T10:16:12.693
> 
> 标签：php, search, full-text-search, sphinx

我问了一些类似的问题，但可能没有提供所需的所有信息。

我已经设置了最新版本的 Sphinx - 并创建了索引（虽然我不是 100% 我已经优化了这个配置）（请参阅底部的 pastebin 链接了解这个配置）

下面是连接到 Sphinx API 的脚本，它带有我想执行搜索的字符串“教学” - 目前我有四个索引（请参阅此处的配置 - [http://pastebin.com/DGgheqYm](http://pastebin.com/DGgheqYm)）我' d 需要能够确定每个结果来自哪个索引，因为这将确定我需要在哪个表上执行查询

例如..

```
// {$table}/{$pk} would vary depending on which index we are using (eg if articles index - then it would use the table called 'articles'
$IDs = implode(",",array_keys($result["matches"]));
$sql = "SELECT * FROM {$table} WHERE {$pk} IN ($IDs) ORDER BY FIELD(`id`,$IDs)" 
```

使用它返回的 ID 数组，任何人都可以建议最好的方法：-

*   确定结果来自哪个索引以确定查询

*   而且..如果我以“正确的方式”来做这件事- Spinx 有点菜鸟:)

    ```
    <?php
    include('api/sphinxapi.php');
    $cl = new SphinxClient();
    $cl->SetServer( "localhost", 9312 );
    $cl->SetMatchMode( SPH_MATCH_ANY  );
    $result = $cl->Query( "teaching" );

    if ( $result === false ) {
    echo "Query failed: " . $cl->GetLastError() . ".\n";
    }
    else {
    if ( $cl->GetLastWarning() ) {
      echo "WARNING: " . $cl->GetLastWarning() . "
    ";
    }

    if ( ! empty($result["matches"]) ) {
      foreach ( $result["matches"] as $doc => $docinfo ) {
            echo "$doc\n";
      }

      print_r( $result );
     }
     }

     exit;
     ?> 
    ```

[http://pastebin.com/rDYa3MUj](http://pastebin.com/rDYa3MUj) http://pastebin.com/DGgheqYm

更新：这里仍然有问题是 Sphinx API 的输出 - 我不明白为什么我使用 Barry 帖子的帮助添加的属性似乎没有出现 [http://pastebin.com/jzBexCBq](http://pastebin.com/jzBexCBq)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:21:40.190

每个索引设置一个“常量”属性....

```
source articles
...
sql_query = SELECT ID, 1 AS table_id, Title, Description FROM articles
sql_attr_uint = table_id
...

source publications
...
sql_query = SELECT Title_ID, 2 AS table_id, Title, PageTitle, PageContent, Description FROM publications
sql_attr_uint = table_id
...

//etc 
```

然后

```
foreach ( $result["matches"] as $doc => $docinfo ) {
    switch($docinfo['attrs']['table_id']) {
        case 1: echo "Article:$doc\n"; break;
        case 2: echo "Publication:$doc\n"; break;
        case 3: echo "Library Content:$doc\n"; break;
        //etc
    }
} 
```

# mysql - 在 sql 查询中使用单引号和双引号

> ID：13047192
> 
> 赞同：0
> 
> 时间：2012-10-24T10:17:09.027
> 
> 标签：mysql, quotes

我对使用带变量的引号的 sql 查询有一些问题。（一般我使用“绑定”，所以我没有这种问题）。这是查询：

```
$myquery = mysql_query("SELECT * FROM mytable ORDER BY id ASC WHERE var='".$var."'"); 
```

语法似乎不正确，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:19:28.070

那么你可以尝试这样的事情：

```
$query = sprintf("SELECT * FROM mytable WHERE var='%s' ORDER BY id ASC",mysql_real_escape_string($var));
$result = mysql_query($query) or die("Error:" . mysql_error()); 
```

另请注意， ORDER BY 的位置错误。它更具可读性，您无需为单个 qoute 连接而烦恼。mysql注入也是安全的。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:36:52.983

一般来说，您应该使用 DBD（Perl 数据库驱动程序）或其他语言和驱动程序组合提供的参数绑定功能。我知道您正在使用 PHP（尽管您应该相应地标记您的问题以消除歧义。

[这是关于如何在 PHP 中绑定 SQL 参数](https://stackoverflow.com/questions/1860130/how-to-bind-sql-variables-in-php)（使用 PDO）的 StackOverflow 线程。请注意，与其他语言中的类似功能相比，PHP PDO::bindParam 方法存在一些限制。因此，请阅读链接的线程以获取警告。

[这是关于将参数绑定到语句](http://books.google.com/books?id=WfoOrfuwcb8C&pg=PA121&lpg=PA121&dq=%22Binding+Parameters+to+Statements%22+perl&source=bl&ots=tUJs0SNw4G&sig=XFfaAJsvrsrBPaQGH-yGKe7gB5s&hl=en&sa=X&ei=T8GHUO4wjv7wBMe8geAG&ved=0CEgQ6AEwBA#v=onepage&q=%22Binding%20Parameters%20to%20Statements%22%20perl&f=false)的另一个讨论... for Perl（但在概念上适用于其他编程语言及其 SQL 库/驱动程序）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T10:20:50.027

你可以像这样使用它

```
$myquery = mysql_query("SELECT * FROM mytable ORDER BY id ASC WHERE var='$var'"); 
```

# header - 标头和 Selenium Webdriver 2

> ID：13047195
> 
> 赞同：3
> 
> 时间：2012-10-24T10:17:25.483
> 
> 标签：header, webdriver

有没有办法在 Selenium WebDriver 测试中添加标题？（就像 Firefox Modify Headers 插件一样）我不能使用 HtmlUnitDriver，因为浏览器必须是可见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:23:41.253

WebDriver 不允许您使用任何基于浏览器的驱动程序更改或设置标头。您可以在以下 URL 找到很多关于他们对标头和响应代码的决定的信息。 [http://code.google.com/p/selenium/issues/detail?id=141](http://code.google.com/p/selenium/issues/detail?id=141)

我们使用 Apache HTTP 客户端进行这种类型的测试，我们不想检查呈现的页面元素，而只想检查响应和标题信息。

您还可以为您的 selenium 测试提供浏览器 mob 代理以及上面的 url 中提到的。我已经将它用于其他目的，它很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T10:34:43.677

有其他方法可以做到这一点`Browsermob-Proxy`

由于`Browsermob-proxy`在我们处理 selenium 网格时有其自身的局限性，以下是我解决此问题的方法。希望对具有类似设置的任何人都有帮助。

1.  将 ModHeader 扩展添加到 chrome 浏览器

如何下载 Modheader？关联

```
ChromeOptions options = new ChromeOptions();
options.addExtensions(new File(C://Downloads//modheader//modheader.crx));

// Set the Desired capabilities 
DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(ChromeOptions.CAPABILITY, options);

// Instantiate the chrome driver with capabilities
WebDriver driver = new RemoteWebDriver(new URL(YOUR_HUB_URL), options); 
```

2.  转到浏览器扩展并捕获 ModHeader 的本地存储上下文 ID

[![从 ModHeader 捕获 ID](../Images/ee8659b4c1a3df7f51eebfe3b8c99978.png)](https://i.stack.imgur.com/WV5yi.png)

3.  导航到 ModHeader 的 URL 以设置本地存储上下文

.

```
// set the context on the extension so the localStorage can be accessed
driver.get("chrome-extension://idgpnmonknjnojddfkpgkljpfnnfcklj/_generated_background_page.html");

Where `idgpnmonknjnojddfkpgkljpfnnfcklj` is the value captured from the Step# 2 
```

4.  现在使用将标头添加到请求中`Javascript`

.

```
 ((Javascript)driver).executeScript(
         "localStorage.setItem('profiles', JSON.stringify([{  title: 'Selenium', hideComment: true, appendMode: '', 
             headers: [                        
               {enabled: true, name: 'token-1', value: 'value-1', comment: ''},
               {enabled: true, name: 'token-2', value: 'value-2', comment: ''}
             ],                          
             respHeaders: [],
             filters: []
          }]));"); 
```

其中`token-1`, `value-1`, `token-2`,`value-2`是要添加的请求标头和值。

5.  现在导航到所需的 Web 应用程序。

    `driver.get("your-desired-website");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-10T16:52:21.757

下面是一个简短的例子，说明如何在 Python 中使用 Seleniumwire：

```
from seleniumwire import webdriver

def set_chrome_driver():
        options = webdriver.ChromeOptions()
        options.add_argument("--start-maximized")
        options.add_argument("--disable-infobars")
        options.add_argument("--no-proxy-server")
        driver = webdriver.Chrome(executable_path=r'C:\Automation_package\chromedriver.exe')
        driver.get('http://172.1.1.1:5000/path/api/')
        driver.header_overrides = {"iv-user": "Admin", "iv-groups": "SuperAdmin", "iv-roles": "Viewers",}
        driver.get('http://172.1.1.1:5000/path/api/') 
```

# forms - 如何过滤 zf2 表单？

> ID：13047205
> 
> 赞同：0
> 
> 时间：2012-10-24T10:18:15.013
> 
> 标签：forms, validation, zend-framework2

我正在尝试为我的表单元素添加过滤器

```
$this->add(array(
        'name' => 'name',
        'attributes' => array(
            'type' => 'text',
            'required' => true,
        ),
        'options' => array(
            'label' => 'Name',
        ),
        'filters' => array(
            array('name' => 'StringTrim'),
            array('name' => 'StripTags'),
        )
    )); 
```

但我仍然可以在这个元素中添加一些标签，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:20:38.573

创建两个类，一个用于表单，另一个用于过滤器，并为您的表单设置过滤器。

```
$form = new Form\CommentForm();
$form->setInputFilter(new Form\CommentFilter());
return $form; 
```

有关更多信息，请参阅[https://github.com/nsenkevich/comment/tree/master/Comment](https://github.com/nsenkevich/comment/tree/master/Comment)

# visual-studio-2010 - Visual Studio：查询 TFS 工作项：AND/OR 逻辑不起作用？

> ID：13047209
> 
> 赞同：21
> 
> 时间：2012-10-24T10:18:38.823
> 
> 标签：visual-studio-2010, tfs, workitem

我需要在我们的项目中找到与某个主题相关的 TFS 工作项。为此，我尝试使用 Visual Studio 中的查询生成器查询工作项。

由于我希望搜索多个术语，因此我想像这样的查询：

```
WHERE (
Priority > 300 AND 
(Title.Contains('Dog') OR Title.Contains('Cat') OR Title.Contains('Hamster'))) 
```

现在，根据[http://msdn.microsoft.com/en-us/library/dd286638.aspx](http://msdn.microsoft.com/en-us/library/dd286638.aspx)（部分*And/Or*），应该可以这样做：

```
 | Priority|   >    | 300
And | Title | Contains | Dog
Or  | Title | Contains | Cat
Or  | Title | Contains | Hamster 
```

但是......这并不像描述的那样工作：据我所知，这被视为

（优先级 > 300 AND Title.Contains('Dog')) OR Title.Contains('Cat') OR Title.Contains('Hamster'))）

现在这对我来说有点问题，因为除了“优先级”标准之外，我还有 8 个附加标准需要应用于所有匹配项（日期、状态等）。而且我不仅有三个可能的冠军匹配，而且大约有十个。这样一来，我最终会得到一个非常长且大部分是多余的查询。

..或者，我在这里错过了什么吗？有没有另一种方式来表达这些陈述？或者还有其他查询 TFS 工作项的方法，比如其他工具？

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T10:37:03.827

您需要将您的 Title 子句“组合”在一起以获得您期望的查询。选择三个“Title”子句，右键单击并选择“Group Clauses”。

![组子句](../Images/943949f5e395d487ebd70b99ab4f4483.png)

这是我在 VS2012 中创建的用于执行此操作的查询的片段，但在 2010 年也是如此。

它只会查找具有优先级`>4` **和**包含 或 的标题**的** `Crash`工作`Error`项`Working`。

![使用分组子句查询](../Images/9ec373f13e7ac0ad086bb4c6b22399ce.png)

# c++ - 用于检测轮廓的“NULL 指针被传递”

> ID：13047212
> 
> 赞同：2
> 
> 时间：2012-10-24T10:18:47.233
> 
> 标签：c++, c, opencv

[我正在处理的程序](https://stackoverflow.com/questions/12971093/better-algorithm-for-edge-filter-in-video-programming)是一个轮廓检测程序，它过滤我们在捕获帧中的最大轮廓，将其涂成红色并打印出对象的中心坐标。有时当我调试程序时，我会收到以下错误消息：

```
OpenCV Error: Null pointer (NULL array pointer is passed) in unknown function, file ......../array.cpp line 2382 
```

我已经搜索了问题的根源，并发现如果第一个（和下一个）捕获的帧中没有检测到轮廓（轮廓为 NULL），程序将崩溃。直到现在，我还没有找到任何解决方案让这个程序忽略错误，直到至少检测到一个轮廓。那么关于如何阻止这个问题发生的任何线索？

提前致谢。干杯

P/S：检测到轮廓后，程序就可以正常工作了。目前使用 OpenCV 2.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:32:15.517

我建议，如果你找不到轮廓，你就忘记处理框架。

```
cvFindContours( src_gray, storage, &contours, sizeof(CvContour), 
    CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE, cvPoint(0,0));
if(contours==NULL)
   continue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:39:30.140

在这段代码中：

```
CvSeq* largest_contour = NULL;
...
while (current_contour != NULL){
    double area = fabs(cvContourArea(current_contour,CV_WHOLE_SEQ, false));       
    if(area > largestArea){
        largestArea = area;
        largest_contour = current_contour;
    }
    current_contour = current_contour->h_next;
} 
```

...您最终可能会`largest_contour`等于`NULL`if`current_contour`开始是它自己`NULL`，并且没有“可取之处” `contours2`（它本身也在`NULL`处理开始时）。

稍后，正如你所注意到的，`contours`存在`NULL`并不重要，因为它被“恢复”了`contours2`

> 检测到轮廓后，程序将正常工作

但在*第一帧*，这不可能发生。

然后，`largest_contour`永远不会`NULL`改变它的初始值。

我怀疑这与以下行不符：

```
cvMoments(largest_contour, &moments, 1); 
```

然后我会修改

```
if (largest_contour)
    cvMoments(largest_contour, &moments, 1);
else
    continue; // loop to next frame 
```

# c++ - 您可以从 C++ 程序连接到 Socket.IO 吗？

> ID：13047218
> 
> 赞同：1
> 
> 时间：2012-10-24T10:19:08.257
> 
> 标签：c++, html, websocket, socket.io

我们有一个学生项目，我的队友必须通过套接字连接到我。我正在运行一个 HTML5 网页，并且与该网页分开我正在创建一个 Socket.IO 服务器。他正在运行一个 C++ 程序，在该程序中他扫描 RFID，他必须通过套接字发送到我的网页。我们正在努力与他建立联系。有没有办法让他用 C++ 连接到我的 websocket？

我在没有包含的情况下复制了他的所有代码（因为我不是 C++ 程序员）

```
int main(array<System::String ^> ^args)
{
        array<System::String ^>^ dataArray = gcnew array<System::String ^>(51);
        Socket^ aarsServer = gcnew Socket(AddressFamily::InterNetwork, SocketType::Stream, ProtocolType::Tcp);
        array<unsigned char>^ MSG = gcnew array<unsigned char>(1024);
        int a;
        String ^dataAux;// ^dataSend;

        SerialPort^ arduino;
        arduino = gcnew SerialPort("COM4", 2400);
        arduino->ReadTimeout = 1000;

        for(int b=0;b<50;b++)
                dataArray[b]="1234569877";

        while(1)
        {    
                a=0;
                try{
/*  //LEITURA COM TIMEOUT
                arduino->Open();
                dataAux="";
                arduino->DiscardOutBuffer();
                dataAux = arduino->ReadLine();
                arduino->Close();

*/ 
                ////////BLOKO GRANDE//////////////////////      
                if(dataAux!="")
                        {
                                while(a<50)
                                        {
                                                //PROCURAR ESPACO FREE E BUFFERIZR
                                                if(dataArray[a]=="")
                                                        break;
                                                        a++;
                                        }
                                dataArray[a]=dataAux;

            try{
                        //TENTAR ESTABELER, ENVIAR EM REALTIME E LIMPAR O BUFFER
                IPEndPoint^ iped = gcnew IPEndPoint(IPAddress::Parse("192.168.10.2"), 8765);//Server IP
        aarsServer->Connect(iped);
                 //int rcv = aarsServer->Receive(MSG);
                //dataSend="1, " + dataAux + ", 155.238.44.55";
                MSG = Encoding::ASCII->GetBytes("1," + dataArray[a] + ",192.168.10.1");//device IP
                aarsServer->Send(MSG, MSG->Length, SocketFlags::None);
                aarsServer->Shutdown(SocketShutdown::Both);
                aarsServer->Close();
                dataArray[a]="";
                }

                catch (SocketException^ BB)
    {
        Console::WriteLine("Connection Failed with error: {0}", BB->Message);

    }
        ////////BLOKO GRANDE//////////////////////  ///////////////////////////
                }
                }

                catch (TimeoutException ^AA)
                {
                arduino->Close();

                }
                ////////BLOKO PEKENO//////////////////////      

            try{
                        //TENTAR ESTABELER, ENVIAR EM OFFLINE TUDO E LIMPAR O BUFFER
                IPEndPoint^ iped = gcnew IPEndPoint(IPAddress::Parse("192.168.10.2"), 8765);//Server IP
        aarsServer->Connect(iped);
                 //int rcv = aarsServer->Receive(MSG);
                //dataSend="1, " + dataAux + ", 155.238.44.55";
                for(int c=0; c<50; c++)
                {
                        if(dataArray[c]!="")
                        {
                                MSG = Encoding::ASCII->GetBytes("0," + dataArray[a] + ",192.168.10.1");//device IP
                                aarsServer->Send(MSG, MSG->Length, SocketFlags::None);
                                dataArray[c]="";
                        }
                }
                aarsServer->Shutdown(SocketShutdown::Both);
                aarsServer->Close();

                }

                catch (SocketException^ BB)
    {
        Console::WriteLine("Connection Failed with error: {0}", BB->Message);

    }
        ////////BLOKO PEKENO//////////////////////  ///////////////////////////

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:02:53.153

如果您想在 C++ 中使用 WebSocket，那么您应该考虑使用 C++ WebSocket 库。在这个 Wikipedia[页面](http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations)上有一个它们的列表。

我以前使用[libwebsockets](http://git.warmcat.com/cgi-bin/cgit/libwebsockets)将 HTML 5 应用程序连接到 C++ 应用程序。[该库在此处](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/tree/test-server)附带示例客户端和服务器代码。

# architecture - 工作队列解决方案

> ID：13047223
> 
> 赞同：2
> 
> 时间：2012-10-24T10:19:35.703
> 
> 标签：architecture, queue, message-queue, priority-queue

我正在研究工作队列的新解决方案。队列（或多个队列）将包含工作项，这些工作项将由人类使用基于 Web 的软件系统来处理，该系统使用队列中的项。因此，工作队列中的项目可能会在队列中保留很长时间。队列解决方案不需要处理大吞吐量，它不需要是一个快速的系统，但应该以与消息队列相同的方式运行。即多个消费者以先进先出消息为食。

除了工作消费者之外，我还需要能够管理队列。查看队列中的工作项、编辑它们、删除它们、更改优先级等……

我研究过 ActiveMQ、RabbitMQ、HornetQ 和其他符合 JMS 的队列解决方案。这些似乎都很好，即可扩展、健壮等。但缺乏适合我要求的内置管理能力。它们似乎也是为高吞吐量而构建的。

我要替换的系统由一个简单地实现为数据库模式的队列系统组成。工作项消费者从表而不是内存队列中选择。除了可扩展性之外，我不确定内存解决方案（例如 ActiveMQ）相对于现有系统有什么好处。

我的问题是：我应该基于这些解决方案之一构建我的工作队列系统，ActiveMQ、Rabbit、Hornet.. 等等。还是有一个专门为工作队列目的而不是高吞吐量而构建的开源工作队列系统消息队列工作？或者，我应该坚持使用基于数据库模式的解决方案。

非常感谢。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:23:51.790

您不应该使用排队机制 - 我会使用内存中的项目。请记住，您不想删除某些内容，您可以将它们保存在表格中以进行审核等 - 这不是经典的消息传递，而是更多的工作流状态跟踪。这与排队几乎为零。

# installation - 使用变量的复杂快捷方式 Installshield

> ID：13047229
> 
> 赞同：0
> 
> 时间：2012-10-24T10:19:53.060
> 
> 标签：installation, installshield, shortcut

我需要在 Installshield 中为我的应用程序创建一个快捷方式，这样做的路径是：

```
C:\app\bin\exe.exe -basekey ini -ininame settings.ini -p cal.p -pf s:\pfs\sec_l_oea.pf 
```

此快捷方式本质上分为三个位：

```
C:\app\bin\exe.exe 
```

这是我想使用系统搜索找到的现有软件的位置。

```
-basekey ini -ininame settings.ini -p cal.p -pf 
```

这将始终相同，不需要任何变量

```
s:\pfs\sec_l_oea.pf 
```

用户必须浏览才能找到此文件。

我的问题是我不知道如何获取第一部分的路径，我已经设置了一个系统搜索以希望找到它，并将其存储在“PROWIN”变量中，但是，我如何在设置时访问该变量捷径？

我还可以知道如何获取用户变量（来自安装）并根据第 3 部分设置快捷方式。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:47:35.180

一旦将文件存储在变量/属性中，我认为可以通过将名称放在带有方括号的字符串中来在多个地方使用它。

你的论点可能看起来像这样：

`-basekey ini -ininame settings.ini -p cal.p -pf [PROWIN]`

附带一点：在 installshield 术语中，动态存储的值始终是字符串，它们被称为“属性”而不是变量，这可能有助于将来的搜索。

# android - iOs 网站：针对不同版本的 iOs（以及不同版本的 Android）

> ID：13047231
> 
> 赞同：3
> 
> 时间：2012-10-24T10:20:00.330
> 
> 标签：android, html, ios, css

对于 Internet Explorer，您可以使用条件注释（甚至是 hack）来定位特定版本的 IE。针对不同版本的 iO 是否有类似的东西。

我有一个网站可以在 iOS 4.2+ 上完美运行，但在旧版本上会中断。我可以通过更改 CSS 以隐藏一些元素来使其在旧版本上工作，但随后它会因新版本而中断。

我只想将我的旧 iOS 样式表发送到旧版本，并让它被新版本忽略。

在开发应用程序时，针对不同版本的 iO 有很多资源，但对于网站似乎没有任何资源。

作为一个额外的问题，我也想知道如何针对不同版本的android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:33:37.793

您对设备、浏览器、操作系统等的检测。必须使用从浏览器发送的用户代理字符串来完成。这是识别用户环境的典型方法。但我可以理解您只提供 HTML/CSS/Js，因此您没有后端代码来执行此操作。

我的建议是您有条件地使用 JavaScript 下载正确的 CSS 和 JS 文件。

您可以通过 Javascript 获取用户代理字符串`navigator.userAgent`，然后您可以根据正在运行的浏览器/操作系统/设备下载所需的正确文件。

[在http://www.w3schools.com/jsref/prop_nav_useragent.asp](http://www.w3schools.com/jsref/prop_nav_useragent.asp)查看更多信息

根据检测Android版本。操作系统版本“*应该*”也在 UA 字符串中...查看此站点以获取 Android 用户代理。 [http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/)

# python - 全局变量问题

> ID：13047235
> 
> 赞同：0
> 
> 时间：2012-10-24T10:20:07.130
> 
> 标签：python, user-interface, wxpython

当运行我的类的实例时，如下面的代码所示。我尝试使用“打印 importWindow.GetDataVal()”来向我显示输入到对话框中的值，但它什么也没打印。我怎样才能让它显示必要的价值？

```
import wx

class ImportDialog(wx.Frame):

    def __init__(self, *args, **kwds):
        # begin wxGlade: ImportDialog.__init__
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, *args, **kwds)

        self.dataValues=''
        self.path = wx.TextCtrl(self, -1, "", size=(175,25))
        self.button_1 = wx.Button(self, -1, "Browse for haarcascades")
        self.button_1.Bind(wx.EVT_BUTTON, self.fetchHaarPath)
        self.ok = wx.Button(self, -1, "OK")
        self.ok.Bind(wx.EVT_BUTTON, self.confirmOK)
        self.cancel = wx.Button(self, -1, "Cancel")
        self.cancel.Bind(wx.EVT_BUTTON, self.CloseAll)
        self.label_1 = wx.StaticText(self, -1, "Name of detect object:")
        self.name = wx.TextCtrl(self, -1, "")
        self.spin_ctrl_1 = wx.SpinCtrl(self, -1, "", min=0, max=100)
        self.spin_ctrl_2 = wx.SpinCtrl(self, -1, "", min=0, max=100)

        self.__set_properties()
        self.__do_layout()
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: ImportDialog.__set_properties
        self.SetTitle("Import Custom Haarcascade")
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: ImportDialog.__do_layout

        grid_sizer_1 = wx.GridSizer(3, 2, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add(self.path, 0, 0, 0)
        grid_sizer_1.Add(self.button_1, 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add(self.label_1, 0, 0, 0)

        grid_sizer_1.Add(self.name, 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add(self.spin_ctrl_1, 0, 0, 0)
        grid_sizer_1.Add(self.spin_ctrl_2, 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add((20, 20), 0, 0, 0)
        grid_sizer_1.Add(self.ok, 0, 0, 0)
        grid_sizer_1.Add(self.cancel, 0, 0, 0)
        self.SetSizer(grid_sizer_1)
        grid_sizer_1.Fit(self)
        self.Layout()
        # end wxGlade

    def fetchHaarPath(self,event):
        wildcard = "XML files (.xml)|*.xml"
        haarPicker = wx.FileDialog(None, "Choose a file",
                               wildcard=wildcard,
                               style=wx.OPEN)
        if haarPicker.ShowModal() == wx.ID_OK:
            #print "Haarcascade filepath:", haarPicker.GetPath()
            self.path.SetValue(haarPicker.GetPath())
            haarPath=haarPicker.GetPath()
        haarPicker.Destroy()
        self.haarPath=haarPath

    def confirmOK(self,event):
        print "Path:", self.path.GetValue()
        print "Name:", self.name.GetValue()
        print "Size:", self.spin_ctrl_1.GetValue(),"X",self.spin_ctrl_2.GetValue()

        print
        #C:\Users\Foster\Documents\Roland\ims project\haarcascades\eyeglasses.xml@@(50,50)&&eye
        #C:\Users\Foster\Documents\Roland\ims project\haarcascades\eyeglasses.xml@@(50,50)&&eye
        dataVal=""
        dataVal=str(self.path.GetValue())+"@@("+str(self.spin_ctrl_1.GetValue())+","+str(self.spin_ctrl_2.GetValue())+")&&"+str(self.name.GetValue())
        self.setDataVal(dataVal)
        #print self.GetDataVal()
        self.CloseAll(event)

    def GetDataVal(self):

        return self.dataValues

    def setDataVal(self,valueData):
        self.dataValues=valueData

    def CloseAll(self,event):

        self.Close()

# end of class ImportDialog
if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    importWindow = ImportDialog(None, -1, "")
    app.SetTopWindow(importWindow)
    importWindow.Show()
    print "<"
    print importWindow.GetDataVal()
    print ">"
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:31:25.610

从技术上讲，它不会打印“无”，它会在标准输出中打印一个空行。

那是因为您使用空字符串进行初始化并且只更改该字符串`dataValues`，我猜是在用户按下确认按钮之后。`ImportDialog``confirmOK`

您的打印语句在用户有机会按下该按钮之前执行。

# java - Eclipse远程调试器连接到JVM时，如何在Unix机器上运行Java程序时从服务器端挂起Java程序？

> ID：13047241
> 
> 赞同：0
> 
> 时间：2012-10-24T10:20:26.713
> 
> 标签：java, eclipse, debugging, unix, suspend

我正在使用 Eclipse 远程调试器连接到在 Unix 机器上运行我的应用程序的 JVM。我可以轻松地从 Eclipse 挂起/恢复远程应用程序。我的问题是如何从后端实现相同的目标？

假设有一个只有后端知道的触发器或条件。一旦检测到触发器，我想指示 JVM 暂停，以使自己能够在我的工作站上使用 Eclipse 中的调试器检查当前程序状态。

# visual-studio-2008 - SSRS/CRM：未显示下拉列表

> ID：13047247
> 
> 赞同：0
> 
> 时间：2012-10-24T10:20:56.843
> 
> 标签：visual-studio-2008, reporting-services, dynamics-crm, dynamics-crm-4

我对上一个问题有一个后续问题[。](https://stackoverflow.com/questions/12933562/ssrs-getting-a-specific-value-from-different-rows-of-a-dataset)

我有一个客户和特定年份的清单。但现在我必须创建一个下拉列表，以便用户可以选择生成缺席/在场列表的年份。

为了实现这一点，我创建了一个生成年份的数据集（从今年到过去的特定年份）。此数据集使用年份值填充参数 (CRM_Year)。最后我过滤了通过参数提供缺席/存在值的数据集。

我的问题是，当我预览报告时，我可以看到带有年份值的下拉列表，但是当我将报告上传到 CRM 并尝试运行它时，我收到以下错误消息：

```
[MissingParameterException: The 'CRM_Year' parameter is missing a value] 
```

我什至从未在 CRM 中看到 ddl。我对解决此问题的解决方案感到非常困惑。任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:11:18.353

我会尝试将参数重命名为没有 CRM_ 的名称，因为有一些以它开头的保留参数。我已经做了你正在尝试的事情，所以它应该是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:49:45.027

我终于做到了。在我在这里发布问题后，我从头开始重新构建报告，只取一个又一个，并在 CRM 中对其进行测试。

尽管我的解决方案与以前的解决方案相同，但这对我来说效果很好。所以我认为这个解决方案可以是[Jeroen 发布的解决方案的变体。](https://stackoverflow.com/users/419956/jeroen)

# php - PHP数组新结构形式与现有形式

> ID：13047256
> 
> 赞同：-5
> 
> 时间：2012-10-24T10:21:30.977
> 
> 标签：php

我有一个 sql 查询，它为我提供以下格式的数组。基本上，第零个元素是 event_id，第一个元素是与事件相关的 photo_id。以下是数组

```
Array
(
[0] => Array
    (
        [0] => 1
        [1] => 1
    )

[1] => Array
    (
        [0] => 1
        [1] => 2
    )

[2] => Array
    (
        [0] => 1
        [1] => 3
    )

[3] => Array
    (
        [0] => 0
        [1] => 4
    )

[4] => Array
    (
        [0] => 0
        [1] => 5
    )

[5] => Array
    (
        [0] => 1
        [1] => 6
    )

[6] => Array
    (
        [0] => 0
        [1] => 7
    )

[7] => Array
    (
        [0] => 1
        [1] => 8
    )

[8] => Array
    (
        [0] => 0
        [1] => 9
    )

[9] => Array
    (
        [0] => 1
        [1] => 10
    )

[10] => Array
    (
        [0] => 2
        [1] => 11
    )

[11] => Array
    (
        [0] => 2
        [1] => 12
    )

) 
```

我需要将所有第零个元素转换为键，将第一个元素转换为值。即所有相同的事件ID 都有自己的一组照片。所以输出应该像：

```
array(
    [1]=>[1,2,3,6,8,10]
    [0]=>[4,5,7,9]
    [2]=>[11,12] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:25:02.523

```
$newArray = array ();

foreach ($array as $key => $value)
{
    $newArray[$value[0]][] = $value[1];
}

print_r($newArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:25:16.963

干得好：

```
$res = array();
foreach($arr as $k=>$v){
    $res[$v[0]][]=$v[1];
}
print_r($res); 
```

# java - 无法解析 activemq.base 占位符

> ID：13047258
> 
> 赞同：1
> 
> 时间：2012-10-24T10:21:35.450
> 
> 标签：java, jms, jetty, activemq

我尝试将 activemq Web 控制台附加到我的控制台应用程序。这是我的应用程序的 context.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
...
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>activemq.properties</value>
    </property>
 </bean> 

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:${activemq.base}/conf/credentials.properties</value>
    </property>
</bean>
...

<import resource="${activemq.base}/conf/jetty.xml" />
... 
```

我的 activemq.properties 文件包含：activemq.base=D:\development\apache-activemq-5.6.0

我不断收到错误消息，例如 "Could not resolve placeholder 'activemq.base'" ，但它实际上是写在 .properties 文件中的。

我用谷歌搜索了大量的网页和解决方案，其中大多数都说必须指定 activemq.base。这里有没有我看不到的错误？

先感谢您！

编辑：

试图将配置部分更改为：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>activemq.properties</value>
            <value>file:${activemq.base}/conf/credentials.properties</value>
        </list>
    </property>
</bean> 
```

但仍然没有变化。一样的东西。

# google-app-engine - 适用于 Android 应用的 Google App Engine 后端

> ID：13047260
> 
> 赞同：2
> 
> 时间：2012-10-24T10:21:44.200
> 
> 标签：google-app-engine, eclipse-plugin

在 Eclipse 的谷歌插件中找不到“生成 App Engine 后端”选项。

这个被删了吗？？我正在使用 Windows 机器进行开发（几个月前我听说此选项存在一些问题 - 这是否已解决）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:06:29.383

它目前已被删除。不确定它何时或是否会回来。

# php - 从 php 中的存储过程中获取值

> ID：13047263
> 
> 赞同：3
> 
> 时间：2012-10-24T10:22:01.613
> 
> 标签：php, mysql, codeigniter, stored-procedures

这是我的 SP：

```
DELIMITER $$

CREATE DEFINER=FUNCTION `test`(p_begin varchar(10),p_end varchar(10),p_code varchar(2)) RETURNS varchar(10) CHARSET latin1
BEGIN
    DECLARE V_ADA VARCHAR(8);
    DECLARE V_LAST VARCHAR(8);
    DECLARE V_NIK  VARCHAR(8);

    select NIK INTO V_NIK from absen where join_date >= p_begin and join_date<= p_end AND company_id=p_code ORDER BY NIK DESC LIMIT 1 ;

    SET V_NIK=V_NIK+1;
    return V_NIK;
END 
```

我正在尝试使用 php 获取返回值：

```
$query=$this->db->query("select test(\"$begin\",\"$end\", \"$code\")")->result();

    var_dump($query);
    die; 
```

结果是：

```
array(1) { [0]=> object(stdClass)#20 (1) { ["test("2007-01-01","2007-12-31", "1")"]=> string(7) "118" } } 
```

我的问题是我想从存储过程（“118”）中获取值，但我不知道如何将对象更改为字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:28:13.313

如果您需要将对象作为文本发送到其他地方（数据库、Javascript 代码），您可以选择序列化、json_encode、XML 转换等，具体取决于您的具体情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:29:40.497

试试这个：

```
$query=$this->db->query("select test(\"$begin\",\"$end\", \"$code\")")->result();

// Cast object to array (also you can try get_object_vars() to do that)
$query = (array)$query[0];

// Get the last value from array (it the only on so it is OK)
echo end($query); 
```

也许会有所帮助..

# actionscript-3 - Flash - Firefox 中的加载程序错误

> ID：13047266
> 
> 赞同：0
> 
> 时间：2012-10-24T10:22:19.617
> 
> 标签：actionscript-3, flash, firefox, actionscript, loader

我正在编写一个应用程序，它使用 Loader 对象从服务器中提取多达几十张图像。它在除 Firefox 之外的所有浏览器中都能正常工作，我发现在超过 6 个左右的连接中，有些连接根本不会加载——而且我不再收到进度事件（并且无法检测到任何错误/错误事件）

我扩展了 Loader 类，如果传输时间超过 10 秒，它将终止并重新打开传输，但是这个临时 hack 产生了一个新问题，当打开很多连接时，其中许多将加载 90-图片的奇数百分比，因超过时间限制而被杀死，再次打开，加载 90-odd 百分比等......直到流量低到足以让它真正完成。这意味着我传输的数据量是实际请求的数据量的许多倍！

在任何其他浏览器中都不会发生这种情况（我预计 IE 会出现错误，所以 Firefox 出现异常是出乎意料的！），我可以编写一个类来管理 Loaders，但想知道是否有其他人看到过这个问题？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:56:06.317

也许尝试限制并发连接数。与其一次加载所有资产（然后 FP 或浏览器管理连接），不如尝试构建一个队列。

构建一个简单的队列相当容易 - 只需创建一个 URL 数组并在每次加载器完成加载前一个资产时移动或弹出一个值。
您可以使用现有的加载器管理器，如[LoaderMax](http://www.greensock.com/loadermax/)或[BulkLoader——](https://github.com/arthur-debert/BulkLoader)它们允许创建队列、限制连接数并且相当健壮。LoaderMax 是我的最爱。

# android - 如何让我的应用接受来自其他应用的搜索意图？

> ID：13047268
> 
> 赞同：1
> 
> 时间：2012-10-24T10:22:30.567
> 
> 标签：android, search, android-intent

我的可搜索活动目前在 Android 清单中如下所示：

```
<activity
    android:name=".activity.Search"
    android:launchMode="singleTop" >

    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>

    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" />

</activity> 
```

我希望能够将我的应用程序作为可搜索元素添加到预安装的“Google 搜索”应用程序中，从而接受其搜索意图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:58:16.523

我刚刚在 android dev 博客上找到[了这个页面。](http://android-developers.blogspot.de/2009/09/introducing-quick-search-box-for.html)我一直缺少的是我的 .xml 文件`android:includeInGlobalSearch="true"`中的 xml 属性`searchable.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:27:57.027

似乎是正确的。您是否在 Google 搜索应用设​​置中启用了您的应用，使其可搜索？

# database - VB6程序需要MS Access吗？

> ID：13047269
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:22:34.737
> 
> 标签：database, ms-access, vb6

我用VB6编写了一个程序。它连接到 Access 数据库。

当我在另一台计算机上运行 exe 时，我收到以下错误消息：运行时错误 713：应用程序定义或对象定义错误。

这台电脑没有安装office。这可能是此错误消息的原因吗？我需要在这台电脑上安装office才能将VB6与Access数据库连接起来吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:24:58.360

Access 有两部分，“后端”Jet 或 ACE 数据库和“前端”应用程序。您不需要 Access 即可使用 Jet。您需要 ACE，如果您参考 ACE 驱动程序，可以免费下载。如果您引用 Access 应用程序，则需要 Access。

# xamarin.android - 清除应用设置中的数据后，Mono for Android App 在启动时崩溃

> ID：13047270
> 
> 赞同：6
> 
> 时间：2012-10-24T10:22:34.907
> 
> 标签：xamarin.android

我发现我的 Mono for Android 应用程序在用户转到 Settings->Apps->MyApp 并选择“清除数据”后每次启动都会崩溃。我使用 Mono for Android“Hello World”应用程序创建了一个新项目，这个应用程序表现出完全相同的行为，这让我假设这发生在我无法控制的单声道堆栈中的某个地方。如果我使用 adb logcat 检查，这是我可以找到的相关行：

```
I/ActivityManager(  185): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=Test_App.Test_App/test_app.Activity1} from pid 386
D/dalvikvm(18358): Late-enabling CheckJNI
I/dalvikvm(18358): Turning on JNI app bug workarounds for target SDK version 8...
I/ActivityManager(  185): Start proc Test_App.Test_App for activity Test_App.Test_App/test_app.Activity1: pid=18358 uid=10074 gids={3003}
D/dalvikvm(  119): GC_EXPLICIT freed 37K, 3% free 12553K/12867K, paused 1ms+2ms
I/ActivityThread(18358): Pub Test_App.Test_App.mono.MonoRuntimeProvider.__mono_init__: mono.MonoRuntimeProvider
D/dalvikvm(18358): Trying to load lib /data/data/Test_App.Test_App/lib/libmonodroid.so 0x4168ba48
D/dalvikvm(18358): Added shared lib /data/data/Test_App.Test_App/lib/libmonodroid.so 0x4168ba48
D/dalvikvm(  119): GC_EXPLICIT freed <1K, 3% free 12553K/12867K, paused 2ms+2ms
E/mono    (18358): WARNING: The runtime version supported by this application is unavailable.
E/mono    (18358): Using default runtime: v2.0.50727
D/OpenGLRenderer(  386): Flushing caches (mode 1)
D/dalvikvm(  119): GC_EXPLICIT freed <1K, 3% free 12553K/12867K, paused 1ms+1ms
I/mono    (18358): Stacktrace:
I/mono    (18358): 
D/OpenGLRenderer(  386): Flushing caches (mode 0)
D/Zygote  (  119): Process 18358 terminated by signal (11)
I/ActivityManager(  185): Process Test_App.Test_App (pid 18358) has died.
W/ActivityManager(  185): Force removing ActivityRecord{41a85018 Test_App.Test_App/test_app.Activity1}: app died, no saved state 
```

有人在他的单声道应用程序中有相同的行为吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:55:36.517

设法解决了我自己的问题。在项目设置下，我必须转到“Mono for Android Build”选项卡，选择发布配置并使链接器“链接所有程序集”而不是“仅链接 SDK 程序集”。通过反复试验解决了这个问题，但是你能做什么..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-21T12:50:36.693

我发现的另一个解决方案是在构建应用程序时禁用“共享运行时”。

在 Visual Studio 中，这是在您的 Android 项目设置中，Android 选项 > 打包选项卡 > 打包属性 > 使用共享运行时（取消勾选）

它使生成的 APK 有点大，但意味着用户可以在您的应用程序上执行“清除数据”，重新启动它，它会运行而不会崩溃！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T03:15:34.230

在 LG G3 Vigor 上使用 Visual Studio 2015 和 Xamarin Forms 应用程序作为测试设备。几个月来一切都很好。我正在测试性能文档，所以我决定在设置 -> 常规 -> Vigor 上的应用程序中对我的应用程序执行清除缓存。完成后，当我将应用程序部署到设备时，Vigor 会导致运行时错误。该应用程序可以在其他设备、模拟器和 iOS 模拟器上正常运行。

我尝试了这篇文章中列出的其他建议。我最终在设备上进行了出厂重置。解锁开发者模式并重新连接到我的电脑后，它现在再次编译并运行该应用程序。

我认为如果一个人不想恢复出厂设置，可以尝试撤销 USB 调试授权并重新授权，看看这是否能让事情恢复正常。这可能会在 VS2015 和重置由缓存重置引起的任何问题的设备之间创建不同的连接路径。如果所有其他方法都失败了，我可以恢复出厂设置。希望它有助于以防万一发生在某人身上。

# gstreamer - Gstreamer 多路复用器，大写被拒绝

> ID：13047272
> 
> 赞同：1
> 
> 时间：2012-10-24T10:22:41.183
> 
> 标签：gstreamer, avi, matroska, muxer

我在 Win 7 x64 上的 Gstreamer OSS Build 0.10.7 中使用以下管道（简化）：

```
udpsrc ! application/x-rtp, media=(string)video, clock-rate=(int)90000, encoding-name=(string)H264,        payload=(int)96 !
gstrtpjitterbuffer latency=200 ! rtph264depay ! tee name=h264Tee 

h264Tee. ! queue ! h264parse ! mux. 

matroskamux name=mux ! filesink location=rec.mkv sync=false // same for avimux/mp4/qt

h264Tee. ! queue ! ffdec_h264 ! tee name=videoTee 

//.videoTee ! queue ! dx9videosink
//.videoTee ! queue ! appsink

//udpsrc ! queue ! directsoundsink

audiotestsrc ! mux. //only for testing, should be connected to udpsrc 
```

该管道通过 Gstreamer-Sharp 启动。这是管道的控制台输出：

```
WARN default xoverlay.c:354:gst_x_overlay_set_xwindow_id:<videoSink> Using deprecated gst_x_overlay_set_xwindow_id()
ERROR d3dvideosink d3dvideosink.c:2204:gst_d3dvideosink_release_swap_chain: Direct3D device has not been initialized
WARN bin gstbin.c:2378:gst_bin_do_latency_func:<pipeline0> failed to query latency
WARN matroskamux matroska-mux.c:970:gst_matroska_mux_video_pad_setcaps:<mux> pad video_0 refused caps 05370C40 
```

只要我不使用复用器，视频和音频都可以正常播放。当在管道中包含多路复用器时，视频立即冻结并且听不到声音。什么是错的，为什么混音器拒绝盖帽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:02:28.230

好的，我自己解决了：上面的视频上限不包含播放不需要的 sprop-parameter-sets。但是，对于编码，它们是必需的，因为流的各种属性都在这些属性中进行了编码：

```
udpsrc ! 
application/x-rtp, media=(string)video, clock-rate=(int)90000, 
encoding-name=(string)H264, 
sprop-parameter-sets= (string)\"Z0LADdkBQfsBEAAAAwAQAAADAyjxQqSA\\,aMuMTIA\\=\", 
payload=(int)96, 
ssrc (uint)2332354585, 
clock-base=(uint)1158355497, 
seqnum-base=(uint)10049 !
gstrtpjitterbuffer latency=200 ! rtph264depay ! tee name=h264Tee 

... 
```

# sql - 创建表并从 sql 调用它

> ID：13047275
> 
> 赞同：-2
> 
> 时间：2012-10-24T10:22:46.533
> 
> 标签：sql, plsql

我有一个创建新临时表的 PL/SQL 函数。为了创建我使用的表`execute immediate`。当我在 oracle sql developer 中运行我的函数时，一切正常；该函数创建没有错误的临时表。但是当你使用 SQL 时：

```
Select function_name from table_name 
```

我得到一个例外：

```
ORA-14552: cannot perform a DDL, commit or rollback inside a query or DML
ORA-06512: at "SYSTEM.GET_USERS", line 10
14552\. 00000 -  "cannot perform a DDL, commit or rollback inside a query or DML "
*Cause:    DDL operations like creation tables, views etc. and transaction
       control statements such as commit/rollback cannot be performed
       inside a query or a DML statement. 
```

更新

抱歉，从平板电脑写入，文本格式有问题。我的功能：

```
CREATE OR REPLACE FUNCTION GET_USERS 
(
    USERID IN VARCHAR2
)
RETURN VARCHAR2 
AS
    request VARCHAR2(520) := 'CREATE GLOBAL TEMPORARY TABLE ';
BEGIN
    request := request || 'temp_table_' || userid || 
            '(user_name varchar2(50), user_id varchar2(20), is_administrator varchar2(5)') ||
            ' ON COMMIT PRESERVE ROWS';
    EXECUTE IMMEDIATE (request);
    RETURN 'true';
END GET_USERS; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:17:27.900

错误是明确的：

> ORA-14552: 无法在查询或 DML 中执行 DDL、提交或回滚

在 Oracle 中，您不能在查询中提交。一个可能的解释是它没有任何意义，因为 Oracle 中的查询是原子的（要么完全成功，要么不做任何更改），如果您在 DML 中间提交，这将无法工作。对于选择查询，必须从单个逻辑时间点返回所有行，如果您在选择中间提交，您将得到不一致的结果。

由于 Oracle 中的 DDL 发出隐式提交，因此您不能在查询中进行 DDL。

不过，这在您的情况下应该不是问题：类似 SQL 服务器的临时表不等同于 Oracle中的**GLOBALLY临时表。**Oracle 中的临时表总是以 为前缀是有原因的`GLOBALLY`：尽管临时表中的数据对每个会话都是私有的，但它们对所有会话都是可见的。

在 Oracle 中，创建临时表是一项相对昂贵的操作，您不应该创建单独的临时表：所有执行相同工作的会话都应该使用相同的公共结构。而不是创建多个临时表，在 Oracle 中，您应该创建一次表并在所有过程中重用它。如果您以后需要它，为什么要放弃它？

在任何情况下，如果您决定执行多个依赖于 SELECT 的 DDL，您可以在 PLSQL 块而不是 SELECT 查询中执行它：

```
DECLARE
   l VARCHAR2(100);
BEGIN
   FOR cc IN (SELECT col FROM tab) LOOP
      l := create_temp_table(cc.col);
   END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:14:43.673

我在 Oracle 10g XE 上测试了以下解决方案，它对我有用。

创建函数：

```
CREATE OR REPLACE FUNCTION GET_USERS 
(
    USERID IN VARCHAR2
)
RETURN VARCHAR2 
AS
    request VARCHAR2(255) := 'CREATE GLOBAL TEMPORARY TABLE ';
BEGIN
    request := request || 'temp_table_' || userid || 
            '(user_name varchar2(50), user_id varchar2(20), is_administrator varchar2(5))' ||
            ' ON COMMIT PRESERVE ROWS';
    EXECUTE IMMEDIATE request;
    RETURN 'true';
END GET_USERS; 
```

运行功能：

```
SET SERVEROUTPUT ON
DECLARE
 RESULT  VARCHAR(255);
BEGIN
   RESULT:=gET_USERS('ADMIN3');
   dbms_output.put_line(result);
END; 
```

并从临时表中选择：

```
SELECT * FROM temp_table_admin3; 
```

# wordpress - WooCommerce - 按类别条件的商店页面

> ID：13047276
> 
> 赞同：0
> 
> 时间：2012-10-24T10:22:56.003
> 
> 标签：wordpress, conditional, woocommerce

如何在 WooCommerce 的主商店窗口中检查产品类别的条件？例如：

```
if($product_category == 'service') {
    echo 'alpha';
} else {
    echo 'beta';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:12:41.210

```
if (is_product_category('slug')) { // Example: Shirts
   echo 'alpha, hello im a shirt';
} else {
   echo 'beta';
} 
```

# mongodb - 如何使用 C# 驱动程序正确构建 MongoDB 嵌套属性名称

> ID：13047277
> 
> 赞同：1
> 
> 时间：2012-10-24T10:22:57.160
> 
> 标签：mongodb, mongodb-.net-driver

我一定遗漏了一些非常明显的东西。有人请羞辱我；

我正在构建 2.2 聚合查询，C# Linq 驱动程序本身并不支持这些查询，因此我必须使用点分表示法为嵌套属性构建字符串化名称。假设我有这样的结构；

```
 db.so.insert({
    a:1,
    b:2,
    n : {
        z:4,
        x:5,
        y: {
           v:"value",
        }
    }
}); 
```

因此，要引用“值”，我需要使用名称`n.y.v`或`n[y][v]`. 现在，由于我从 Web 客户端 ( `http://www.demo.org/exampleQuery?field1=n&field2=y&field3=v`) 接收查询的字段属性名称选择，因此我需要构造属性名称；

```
var fieldNameForQuery = field1+"."+field2+"."+field3; 
```

我显然对此感到紧张，所以我当然会通过清理我的输入参数来防御 NOSQL 注入，但我更愿意为此使用 C# 驱动程序。

我想我想要类似的东西；

```
MongoDB.Driver.BuildNestedFieldName(field1, field2, field3)); 
```

这基本上是我必须自己编写的，但感觉就像是一个杂物，我宁愿不承担以这种方式构建数据库安全字段名称的责任。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:46:31.873

目前没有功能可以做你想做的事。但是，如果所有的功能都是在中间粘贴“.”，那么我们并没有解决注入问题，因为我们插入的东西不能被注入......注入问题将通过确保“field1”、“field2”和“field3”是字段名称的有效值。当然，根据[http://bsonspec.org/#/specification](http://bsonspec.org/#/specification)并没有太多无效的内容。我们唯一要检查的是字符串中没有 2 个空终止符。所以......这并没有给我们留下太多我们可以做的事情。

这有意义吗？

# html - Joomla 中的 HTML 部分弄乱了网站的其他部分

> ID：13047279
> 
> 赞同：1
> 
> 时间：2012-10-24T10:23:04.700
> 
> 标签：html, joomla

在 Nix 的帮助下，我有一个部分想放在 Joomla 页面上。问题是，当我放入该部分时，它会弄乱整个网站，即使代码在 Joomla 的编辑器中，并且没有连接到网站的其余部分。知道为什么吗？部分代码可以在这里找到：

[http://jsfiddle.net/GRf9v/222/](http://jsfiddle.net/GRf9v/222/)

```
<section>
<style type="text/css">
section {
background: #A8DBFF;
border-radius: 4px;
width: 275px; height: 300px;
margin:5px;
padding: 10px;
border: solid 1px #E0E0E0;
float: left;
position: relative;
display: inline;
}
div {
background: #fff;
border: solid 1px #E0E0E0;
border-radius: 4px;
margin-left: -15px;
padding:5px;
} 

o { 
background: orange; 
margin-left: 15px;
border-radius: 2px;
color: white;
font-weight: bold;
}

ul { list-style: disc; margin: 5px 0; padding: 0 15px; }​
</style>
<div>
    <o>Resultater&nbsp</o>&nbspmed mennesker
</div>
<ul>
    <li>Banan</li>
    <li>Jordbær</li>
    <li>Æble</li>
</ul>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sem nibh, tincidunt id         vulputate quis, feugiat venenatis eros. Aliquam turpis ibh</p>
</section>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:25:48.653

这仍然会影响整个页面的 CSS。尝试放入`ID`您的部分并编辑您的CSS：

```
<section id="my_section">
<style type="text/css">

#my_section {
background: #A8DBFF;
border-radius: 4px;
width: 275px; height: 300px;
margin:5px;
padding: 10px;
border: solid 1px #E0E0E0;
float: left;
position: relative;
display: inline;
}
#my_section div {
background: #fff;
border: solid 1px #E0E0E0;
border-radius: 4px;
margin-left: -15px;
padding:5px;
} 

#my_section o { 
background: orange; 
margin-left: 15px;
border-radius: 2px;
color: white;
font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:35:51.227

您可以简单地将`class`或添加`id`到您的部分以使其具体如下：

**HTML：**

```
<section class="section"></section> 
```

**CSS：**

```
.section {

}
.section div {

} 
.section o { 

}
.section ul {

} 
```

# ios - 我可以使用多个自定义 URL 方案来使用 Facebook iOS SDK 进行身份验证吗

> ID：13047282
> 
> 赞同：2
> 
> 时间：2012-10-24T10:23:20.363
> 
> 标签：ios, facebook, authentication, configuration

在阅读文档时，它指出：

> 添加您的 Facebook 应用程序 ID
> 
> 最后，您需要将 Facebook 应用程序 ID 放在应用程序主 .plist 文件中的两个位置。使用字符串值创建一个名为 FacebookAppID 的键，并在其中添加应用 ID：
> 
> 此外，创建一个名为 URL 类型的数组键，其中包含一个名为 URL Schemes 的数组子项。给这一个项目，你的应用 ID 以 fb 为前缀：

我的问题如下。我们的应用程序有 2 个开发环境，当基本上有几个环境变量需要更改时，我想避免创建另一个构建目标。上面的文档状态为“单个项目”，但如果我可以放入 2 个项目，即 fb8234923847293 和 fb0238343466（不是真实 ID），那就太好了

我认为这行不通。

无论如何我可以声明多个 URL 方案，以便如果 facebook 应用程序想要在身份验证后启动我的应用程序，我的应用程序将响应来自我们拥有的这两个开发 facebook 应用程序中的任何一个的请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:21:03.263

所以，我的问题是基于我一定记错了，因为我认为该应用程序不能很好地处理多个 Facebook 应用程序 URL。确实如此。

为了完整起见，我将回答这个问题。在 FB 文档中，它告诉您在 URL 方案数组中创建一个项目，您可以根据该数组中的各种 FB 应用程序 ID 继续添加更多方案，应用程序将响应其中任何一个。

简单的。

# iphone - 内部分发 - ios sdk

> ID：13047285
> 
> 赞同：5
> 
> 时间：2012-10-24T10:23:33.240
> 
> 标签：iphone, ios, ad-hoc-distribution, in-house-distribution

我对内部分发和临时分发感到困惑。

1.  内部和临时分发应用程序是否需要让苹果审查团队审查？

2.  内部分发和临时分发有什么区别？

3.  创建内部应用程序证书和分发流程的任何示例/指南？

4.  内部分发是否需要收集用户 UDID 来配置？

5.  如果我开始使用内部/临时分发来分发“A”应用程序，我可以稍后将“A”应用程序分发到 App Store 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:29:28.527

1.  不，他们没有。
2.  通过内部分发，您可以在公司员工使用的任何 iOS 设备上安装该应用程序，而无需设备的 UDID。Ad-Hoc 用于在选定数量的设备上测试应用程序（每个帐户每年 100 个唯一设备）。
3.  是的，请参阅 Apple [iOS 开发者企业计划](https://developer.apple.com/support/ios/enterprise.html)
4.  不，内部分布式应用程序没有任何 UDID 限制。
5.  可以，但您需要进入 AppStore 开发者计划，而不是用于内部分发的企业版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:37:41.610

**Ad Hoc Distribution 授权一组有限的设备运行您的应用程序**

加入标准计划的 iOS 开发者还可以在 App Store 之外分发应用程序到多达 100 台不同的设备上，仅用于测试目的。要使用临时分发，请为您的应用创建一个存档，或让团队成员向您发送存档应用的 iOS 应用商店包 (.ipa)。

您通过提供 .ipa 文件来分发您的应用程序，供用户安装在他们的设备上。由于您选择了有效的临时配置文件来存档应用程序，因此用户无需在其设备上安装配置文件，只需 .ipa 文件即可。用户可以使用 iTunes 在他们的设备上安装该应用程序。如果用户想使用 Xcode 在他们的设备上安装应用程序，请将存档共享为 .xcarchive 文件包。

**内部分发允许公司在内部分发应用程序** 注册企业计划的 iOS 开发人员可以在内部分发，而无需识别单个设备或使用 App Store。要在内部分发您的应用程序，请创建您的应用程序存档，或让队友向您发送存档的应用程序。使用您公司的授权软件分发机制分发您的内部应用程序。由于应用程序文件可以安装在任何 iOS 设备上，因此请确保保护此文件的分发。您公司的成员可以使用 iTunes、iPhone 配置实用程序或 Xcode 在他们的设备上安装该应用程序。

# css - 如何使用自定义 CSS 覆盖 RichFaces 组件的 CSS

> ID：13047296
> 
> 赞同：2
> 
> 时间：2012-10-24T10:23:53.267
> 
> 标签：css, jsf, richfaces

我有一个`<rich:popupPanel>`我必须设计的样式。我检查了元素，发现使用了以下 CSS。

```
.rf-pp-hdr-cnt {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    font-weight: bold;
    font-family: Arial, Verdana, sans-serif;
    font-size: 17px;
} 
```

现在我已经对此 CSS 进行了更改，并将其包含在我的 CSS 文件中。但是，我的自定义 CSS 将被忽略，并且会读取原始 RichFaces 样式。如何使用我的自定义 CSS 并覆盖原始 CSS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:05:32.877

首先，您需要确保选择器*至少*与您想要覆盖的样式的原始选择器一样强大。因此，如果您想要覆盖的原始样式由 example 指定`.rf-something-else .rf-pp-hdr-cnt {}`，它是一个更强大（更具体）的选择器，那么它将始终获得优先权，除非您`!important`为每个被覆盖的样式添加（丑陋的）属性。

其次，您需要确保您的自定义 CSS在 RichFaces*之后加载。*实现这一点的最简单方法是`<h:outputStylesheet>`在`<h:body>`.

```
<h:head>
    ...
</h:head>
<h:body>
    <h:outputStylesheet name="custom.css" />
    ...
</h:body> 
```

这样，*在*所有自动包含的 JSF/RichFaces 资源之后，它将隐式地重新定位到HTML的*末尾。*`<head>`

 *### 也可以看看：

*   [W3 CSS2 规范 - 6.4.3 计算选择器的特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)
*   [Sitepoint.com CSS 参考 - 特异性](http://reference.sitepoint.com/css/specificity)*

# javascript - 使用带有 Zepto 的 Backbone.js 作为 jQuery 的替代品

> ID：13047297
> 
> 赞同：0
> 
> 时间：2012-10-24T10:23:55.223
> 
> 标签：javascript, jquery, backbone.js, zepto

> **可能重复：**
> [Backbone.js + Zepto.js 示例](https://stackoverflow.com/questions/9737826/backbone-js-zepto-js-examples)

如何设置backbone.js 以使用Zepto 而不是jQuery？

# c# - WPF自定义控件中的Cannont Update控件

> ID：13047298
> 
> 赞同：0
> 
> 时间：2012-10-24T10:23:56.260
> 
> 标签：c#, .net, wpf

我创建了一个自定义控件，其中包含一个按钮。该按钮的样式是为了容纳一个有两行的网格，第一行是图像，第二行是 TextBlock。我为自定义控件编写了一个事件处理程序。当鼠标进入对象的路径时，会触发 MouseEnter 事件，我尝试更改 TextBlock 的 FontSize 和 Foreground 颜色，但控件不会更新。相比之下，我尝试修改常规 TextBlock 的（不是自定义控件和控件模板的一部分）属性，并且它们会即时正确更新。

我在这里想念什么？这是事件处理程序的代码：

```
private void ThemeButton_MouseEnter(object sender, MouseEventArgs e)
{
    InitializeProperties();

    TextElement.FontSize = 16;
    TextElement.Text = "new text";
    TextElement.Foreground = Brushes.Red;

    TextBlock element = MainWindow.FindChild<TextBlock>(MainWindow.StartWindow, "textField");
    element.Text = "new text for regular textblock";
    element.Foreground = Brushes.Red;
} 
```

InitializeProperties 是一个初始化 TextElement(typeof TextBlock) 和 ImageElement(typeof Image) 属性的方法。它们不为空。这些属性只是常规的 .NET 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:58:49.360

哇...我的问题实际上是属性（TextElement 和 ImageElemenet）指向模板（自定义控件）中的元素，而不是实际在窗口中呈现的元素...

请记住，在搜索元素时，始终在渲染完成后开始搜索（即当用户操作触发事件或类似事件时开始搜索），以便元素进入可视树！

# python - matplotlib 绘图错误，python

> ID：13047302
> 
> 赞同：1
> 
> 时间：2012-10-24T10:24:21.947
> 
> 标签：python, matplotlib

尝试使用 matplotlib 绘图时出现这个可怕的巨大错误：

```
Traceback (most recent call last):
  File "24oct_specanal.py", line 90, in <module>
    main()
  File "24oct_specanal.py", line 83, in main
    plt.plot(Svar,Sav)
  File "/usr/lib64/python2.6/site-packages/matplotlib/pyplot.py", line 2458, in plot
    ret = ax.plot(*args, **kwargs)
  File "/usr/lib64/python2.6/site-packages/matplotlib/axes.py", line 3849, in plot
    self.add_line(line)
  File "/usr/lib64/python2.6/site-packages/matplotlib/axes.py", line 1443, in add_line
    self._update_line_limits(line)
  File "/usr/lib64/python2.6/site-packages/matplotlib/axes.py", line 1451, in _update_line_limits
    p = line.get_path()
  File "/usr/lib64/python2.6/site-packages/matplotlib/lines.py", line 644, in get_path
    self.recache()
  File "/usr/lib64/python2.6/site-packages/matplotlib/lines.py", line 392, in recache
    x = np.asarray(xconv, np.float_)
  File "/usr/lib64/python2.6/site-packages/numpy/core/numeric.py", line 235, in asarray
    return array(a, dtype, copy=False, order=order)
ValueError: setting an array element with a sequence. 
```

这是我正在使用的代码：

```
import numpy as np
import numpy.linalg
import random
import matplotlib.pyplot as plt
import pylab
from scipy.optimize import curve_fit
from array import array

def makeAImatrix(n):

    A=np.zeros((n,n))
    I=np.ones((n))
    for i in range(0,n):
        for j in range(i+1,n):
            A[j,i]=random.random()
    for i in range(0,n):
        for j in range(i+1,n):
                A[i,j] = A[j,i]
    for i in range(n):
        A[i,i]=1
    return (A, I)

def main():
    n=5 #number of species
    t=1 # number of matrices to check
    Aflat = []
    Aflatlist = [] #list of matrices
    Aflatav = []
    Aflatvar = []
    Aflatskew = []
    remspec = []
    Afreeze = [] #this is a LIST OF VECTORS that stores the vector corresponding to each extinct species as
                  #it is taken out. it is NOT the same as the original A matrix as it is only
                  #coherant in one direction. it is also NOT A SQUARE.
    Sex = [] # (Species extinct) this is a vector that corresponds to the Afreeze matrix. if a species is extinct then
                #the value stored here will be -1\. 
    Sav = [] # (Species average) The average value of the A cooefficiants for each species
    Svar = [] # (Species variance)

    for k in range (0,t):
        allpos = 0
        A, I = makeAImatrix(n)
        while allpos !=1: #while all solutions are not positive

            x = numpy.linalg.solve(A,I)
            if any(t<0 for t in x): #if any of the solutions in x are negative
                p=np.where(x==min(x)) # find the most negative solution, p is the position

                #now store the A coefficiants of the extinct species in the Afreeze list
                Afreeze.append(A[p])
                Sex.append(-1) #given -1 value as species is extinct.

                x=np.delete(x, p, 0)
                A=np.delete(A, p, 0)
                A=np.delete(A, p, 1)
                I=np.delete(I, p, 0)

            else: 
                allpos = 1 #set allpos to one so loop is broken
        l=len(x)

        #now fill Afreeze and Sex with the remaining species that have survived
        for m in range (0, l):
            Afreeze.append(A[m])
            Sex.append(1) # value of 1 as this species has survived

        #now time to analyse the coefficiants for each species.

        for m in range (0, len(Sex)):
            X1 = sum(Afreeze[m])/len(Afreeze[m]) # this is the mean
            X2 = 0
            for p in range (len(Afreeze[m])):
                X2 = X2 + Afreeze[m][p]

            X2 = X2/len(Afreeze[m])
            Sav.append(X1)
            Svar.append(X2 - X1*X1)

    spec = []
    for b in range(0,n):
        spec.append(b)

    plt.plot(Svar,Sav)
    plt.show()
    #plt.scatter(spec, Sav)
    #plt.show()

if __name__ == '__main__':
    main() 
```

我根本想不通！我认为它以前可以工作，但后来就停止了工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:19:15.277

您的问题在此部分：

```
if any(t<0 for t in x): #if any of the solutions in x are negative
    p=np.where(x==min(x)) # find the most negative solution, p is the position
    #now store the A coefficiants of the extinct species in the Afreeze list
    Afreeze.append(A[p]) 
```

您正在索引一个二维数组，结果仍然是一个二维数组。因此，您`Afreeze`将获得附加的二维数组，而不是一维数组。稍后，在对 的各个元素求和的地方`Afreeze`，求和的 2D 数组将产生 1D 数组，并将其添加到`Sav`和`Svar`。当您将这些变量提供给 时`plt.plot()`，matplotlib 将获得一个数组作为元素之一，而不是单个数字，这当然无法处理。

你可能想要：

```
if any(t<0 for t in x): 
    p=np.where(x==min(x))
    Afreeze.append(A[p][0]) 
```

但是我并没有尝试过多地遵循脚本的逻辑；这取决于你。

也许很高兴看看这是否确实是您想要`print`的： A[p][0] 在附加到`Afreeze`.

我注意到由于`random.random()`在矩阵创建中，if 语句并不总是正确的，所以问题并不总是出现。小细节，但可能会使人感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:47:44.167

修正你的身份？

```
import numpy as np
import numpy.linalg
import random
import matplotlib.pyplot as plt
import pylab
from scipy.optimize import curve_fit
from array import array

def main():
    n=20 #number of species
    spec=np.zeros((n+1))
    for i in range(0,n):
        spec[i]=i
    t=100 #initial number of matrices to check
    B = np.zeros((n+1)) #matrix to store the results of how big the matrices have to be

    for k in range (0,t):
        A=np.zeros((n,n))
        I=np.ones((n))
        for i in range(0,n):
            for j in range(i+1,n):
                A[j,i]=random.random()

        for i in range(0,n):
            for j in range(i+1,n):
                A[i,j] = A[j,i]

        for i in range(n):
            A[i,i]=1

        allpos = 0

        while allpos !=1: #while all solutions are not positive

            x = numpy.linalg.solve(A,I)
            if any(t<0 for t in x): #if any of the solutions in x are negative
                p=np.where(x==min(x)) # find the most negative solution, p is the position
                x=np.delete(x, p, 0)
                A=np.delete(A, p, 0)
                A=np.delete(A, p, 1)
                I=np.delete(I, p, 0)

            else: 
                allpos = 1 #set allpos to one so loop is broken
        l=len(x)
        B[l] = B[l]+1
    B = B/n
    pi=3.14

    resfile=open("results.txt","w")
    for i in range (0,len(spec)):
        resfile.write("%d " % spec[i])
        resfile.write("%0.6f \n" %B[i])
    resfile.close()

    plt.hist(B, bins=n)
    plt.title("Histogram")
    plt.show()

    plt.plot(spec,B)
    plt.xlabel("final number of species")
    plt.ylabel("fraction of total matrices")
    plt.title("plot")
    plt.show()
if __name__ == '__main__':
    main() 
```

明白啦：

![在此处输入图像描述](../Images/74908224e36555a2cff14b9a3bef6a02.png)

# android - Facebook Android SDK，提示用户认证切换会话

> ID：13047307
> 
> 赞同：0
> 
> 时间：2012-10-24T10:24:52.307
> 
> 标签：android, facebook, authentication, login, logout

这有点难以解释。我正在android上构建一个应用程序，该应用程序应该像“支架”一样在会议中使用，因此人们会在会议结束后提交一些反馈。请注意，有很多人将在同一设备上使用此应用程序。

该应用程序将由同一设备上的不同用户使用，并且所有用户都应该在继续之前使用他们的 Facebook 帐户登录。出于安全原因，我希望有一种方法可以在提交民意调查后破坏 Facebook 会话，或者简单地说，每次发布新的民意调查时，当用户被要求登录 Facebook 时，我想强制 Facebook 提示即使存在活动会话，也会出现身份验证对话框（再次输入用户名和密码）。

我到处找，我什么也没找到。我知道有一种方法可以在 Facebook 上请求扩展的注销权限，但请注意此权限需要在登录后获得批准，因此如果用户在登录后决定不批准此权限，此会话将直到打开浏览器并从 Facebook 站点执行注销为止。

我也考虑过销毁浏览器 cookie，但我不知道 android SDK 是否有这样的权限来执行此操作。

请，如果任何机构有任何想法摆脱这个问题，我真的很感激任何建议或解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:54:52.920

我相信您可以使用[Facebook SDK for Android 3.0 (beta)](https://developers.facebook.com/android/)做到这一点。

您可以关闭 SSO（通过使用[SUPPRESS_SSO 行为](https://developers.facebook.com/docs/reference/android/3.0/SessionLoginBehavior#SUPPRESS_SSO)），它应该每次都会打开一个 Web 对话框。一旦用户完成与您的应用程序的交互，您就可以调用 session. [closeAndClearTokenInformation()](https://developers.facebook.com/docs/reference/android/3.0/Session#closeAndClearTokenInformation%28%29)

使用对话登录时不会保留 Cookie。

# c# - C# 抽象类错误

> ID：13047311
> 
> 赞同：1
> 
> 时间：2012-10-24T10:25:05.840
> 
> 标签：c#, abstract

```
public abstract class IEnvelopeFactory {

    public Queue<IEnvelopeFactory> m_Queue<IEnvelopeFactory>;

    public IEnvelopeFactory() { }

    ~IEnvelopeFactory() { }

    public virtual void Dispose() { }

    /// <summary>
    /// Parsing
    /// </summary>
    /// <param name="input"></param>
    /// <param name="envelope"></param>
    public abstract bool Parse(string input, out Envelope envelope);

    /// <summary>
    /// Formatting
    /// </summary>
    /// <param name="env"></param>
    /// <param name="envStr"></param>
    public abstract bool Format(Envelope env, out string envStr);
} 
```

我收到一个错误，因为 Line public Queue m_Queue 中预期的语法错误“（”；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:27:21.673

这与它是一个抽象类无关。这只是一个无效的变量声明：

```
public Queue<IEnvelopeFactory> m_Queue<IEnvelopeFactory>; 
```

你期望第二个`<IEnvelopeFactory>`做什么？它为`Queue<T>`. 它应该只是：

```
public Queue<IEnvelopeFactory> m_Queue; 
```

...虽然理想情况下你一开始就不会有公共领域。

（我也建议*不要*仅仅为了它而添加终结器。*极少*需要终结器。另外，如果你有一个`Dispose`方法，你为什么不实现`IDisposable`？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:26:37.407

尝试更改为：

```
public abstract class IEnvelopeFactory {    
    public Queue<IEnvelopeFactory> m_Queue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:26:55.983

您已经强指定类型，无需在变量名中添加泛型部分：

```
public Queue<IEnvelopeFactory> m_Queue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:46:08.570

```
public Queue<IEnvelopeFactory> m_Queue; 
```

够了：您已经指定了`m_Queue`变量的确切类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T10:26:26.343

制作`m_Queue<IEnvelopeFactory>`=>`m_Queue`

换句话说：

```
public Queue<IEnvelopeFactory> m_Queue; 
```

如果你不想要，出于某种原因，立即初始化它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T10:27:47.840

也许是因为它应该是：

```
public Queue<IEnvelopeFactory> m_Queue = new Queue<IEnvelopeFactory>(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T10:28:05.390

将您的代码更改为 -

```
public Queue<IEnvelopeFactory> m_Queue; 
```

队列类的语法 -

```
[SerializableAttribute]
[ComVisibleAttribute(false)]
public class Queue<T> : IEnumerable<T>, ICollection, 
    IEnumerable 
```

您可以在类中定义一个引用变量 -

```
public Queue<IEnvelopeFactory> m_Queue; 
```

您可以在类中初始化 Queue 变量 -

```
public Queue<IEnvelopeFactory> m_Queue = new Queue<IEnvelopeFactory>(); 
```

# android - 在活动结果的布局中隐藏元素

> ID：13047315
> 
> 赞同：0
> 
> 时间：2012-10-24T10:25:16.330
> 
> 标签：android, textview, visibility, unreachable-code

在收到活动的结果后，我试图在布局中隐藏 textView。我有一个变量声明 - 查看 lblEmptyList，我在 onCreate 中对其进行了实例化：

```
lblEmptyList = findViewById(R.id.emptyList); 
```

我试过这个：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            switch (requestCode) {

            case 1:
...
lblEmptyList.setVisibility(View.GONE); 
```

但我收到“无法访问的代码”错误。我试图像这样直接访问它：

```
findViewById(R.id.emptyList).setVisibility(View.GONE); 
```

我尝试使用数值而不是 View.GONE，但我不断收到此“无法访问的代码”错误。我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:04:00.593

该`lblEmptyList.setVisibility(View.GONE);`行必须在其余代码之前执行。

# jquery - 句柄内的 Jquery UI 滑块值

> ID：13047317
> 
> 赞同：1
> 
> 时间：2012-10-24T10:25:17.237
> 
> 标签：jquery, jquery-ui

我有一个 jquery 滑块，它的样式是值在句柄内。我有一个脚本可以在此滑块中选择的日期工作，但我想在句柄中显示日期。

我已经尝试过了，但它不起作用。

```
$("#slider2").slider({
    max:30,
    min:7,

    slide: function(event, ui) {  

        $("#days").val(ui.value);
        $("#date").html(addDaysToDate(parseInt($("#days sliderControl-label v-labelCurrent unit").val())));
                update();
    },
    create: function(event, ui) {
      $("#date").html(addDaysToDate(parseInt($("#days sliderControl-label v-labelCurrent unit").val())));
    }    
}); 
```

这是一个[小提琴](http://jsfiddle.net/jonnystudent/6hyVP/15/)。所以在句柄中，它应该看起来像这样![天数按钮](../Images/3a3360637a874955e3c89e04624d99f5.png)，计数最多为 30 天。

干杯，

约拿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T22:43:28.607

您的代码引用了不存在元素的 id（“amount2”、“date”等）。

而且，我认为您引用了 ID 为“days”的滑块，也不存在。

在[这个小提琴](http://jsfiddle.net/6hyVP/107/)中，我留下了一个有点工作的例子，它更新了句柄内的当前滑块值。这只是通过给这个句柄一个 id 来实现的：

```
<div id="slider2"><a id="days" class="ui-slider-handle"></a></div> 
```

并在滑块的滑动事件中正确更新其值：

```
$("#days").html(ui.value); 
```

# android - 使用 rawQuery() 方法更新表不起作用

> ID：13047321
> 
> 赞同：12
> 
> 时间：2012-10-24T10:25:31.863
> 
> 标签：android, sqlite

我尝试了以下 SQLite 查询：

```
 int idServizo = 150;
    String whereClause = id_servizio+" = '"+idServizio+" ' ";
    ContentValues cv = new ContentValues();
    cv.put("sync", 1);

    int r = dbManager.updateTable("myTable", cv, whereClause); 
```

其中字段 sync 和 id_servizio 都是整数。方法 updateTable 是：

```
 public int updateTable(String table, ContentValues values, String whereClause){
    int r = mDb.update(table, values, whereClause, null);
    return r;
}

 // mDb is SQLiteDatabase object 
```

这一切都很好。但是如果我用 rawQuery() 方法尝试这个：

```
 public Cursor RawQuery(String sqlQuery, String[] columns){
    return mDb.rawQuery(sqlQuery, columns);    
} 
```

表没有更新！即使没有发生错误。

```
 int idServizo = 150;
 String updateQuery ="UPDATE myTable SET sync = 1 WHERE id_servizio = "+idServizio;
 dbManager.RawQuery(updateQuery, null); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-12-15T11:27:56.287

这是因为在执行 rawQuery 时会返回游标。如果没有调用，`cursor.moveToFirst()`数据库`cursor.close()`将不会更新。

```
int idServizo = 150;
String updateQuery ="UPDATE myTable SET sync = 1 WHERE id_servizio = "+idServizio;
Cursor c= dbManager.rawQuery(updateQuery, null);

c.moveToFirst();
c.close(); 
```

我不知道需要调用 moveToFirst() 但这工作正常并且数据库得到更新。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T10:37:04.060

问题解决了。

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

无法工作，因为`rawQuery`运行提供的 SQL 并返回`Cursor`结果集。

如果我想返回我必须使用的表`rawQuery`，否则不！

[在android/sqlite数据库中增加一条记录的值](https://stackoverflow.com/questions/3427516/increase-the-value-of-a-record-in-android-sqlite-database)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-26T14:10:09.693

您应该使用 db.execSQL() 而不是 db.rawQuery()。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-04T16:32:24.590

而不是这样做：

```
Cursor c= dbManager.RawQuery(updateQuery, null);
c.moveToFirst();
c.close(); 
```

你只需要这个：

```
dbManager.execSQL(updateQuery, null); 
```

## -------------------------------------------------- --------------------------

发布答案是因为有时很多人（比如我）不阅读评论。最受欢迎的答案不正确，但[Yaqub Ahmad 的](https://stackoverflow.com/users/265167/yaqub-ahmad)评论是正确的。

[CommonsWare](https://stackoverflow.com/users/115145/commonsware)的答案在[此答案](https://stackoverflow.com/questions/29591319/insert-in-method-rawquery-does-not-work)中解释：

> rawQuery() 用于返回结果集的 SQL 语句。对不返回结果集的 SQL 语句（如 INSERT）使用 execSQL()。

## -------------------------------------------------- --------------------------

[execSQL 的文档：](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String))

```
public void execSQL (String sql) 
```

**执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。**

[rawQuery 的文档：](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase#rawQuery(java.lang.String,%20java.lang.String[]))

```
public Cursor rawQuery (String sql, 
                String[] selectionArgs) 
```

**运行提供的 SQL 并返回结果集上的 Cursor。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T10:29:20.293

您的`update`呼叫将 ID 格式化为字符串，而`rawQuery`呼叫格式为数字。

假设表中的 ID 确实是一个字符串，请使用：

```
String updateQuery = "UPDATE myTable SET sync = 1 WHERE id_servizio = '" + idServizio + "'"; 
```

# vba - 自动保存附件

> ID：13047323
> 
> 赞同：0
> 
> 时间：2012-10-24T10:25:37.330
> 
> 标签：vba, outlook

因此，目标是当我收到来自客户的包含所需附件的电子邮件时，将附件保存到我选择的位置。

**这是我的新代码，它编译但不输出文件？**

提前致谢。

```
Private WithEvents Items As Outlook.Items

Private Sub Application_Startup()
    Dim olApp As Outlook.Application
    Dim objNS As Outlook.NameSpace
    Set olApp = Outlook.Application
    Set objNS = olApp.GetNamespace("MAPI")
    Set Items = objNS.GetDefaultFolder(olFolderInbox).Items
End Sub

Private Sub Application_NewMail()

Dim oInbox As MAPIFolder
Dim oItem As MailItem

Set oInbox = Application.Session.GetDefaultFolder(olFolderInbox)
Set oItem = oInbox.Items.GetLast

'Only act if it's a MailItem
Dim Msg As Outlook.MailItem
If TypeName(item) = "MailItem" Then
    Set Msg = oItem

    'Change variables to match need. Comment or delete any part unnecessary.
    If (Msg.SenderName = "Name Of Person") And _
        (Msg.Subject = "Subject to Find") And _
        (Msg.Attachments.Count >= 1) Then

        'Set folder to save in.
        Dim olDestFldr As Outlook.MAPIFolder
        Dim myAttachments As Outlook.Attachments
        Dim Att As String

        'location to save in.  Can be root drive or mapped network drive.
        Const attPath As String = "C:\"

        ' save attachment
        Set myAttachments = item.Attachments
        Att = myAttachments.item(1).DisplayName
        myAttachments.item(1).SaveAsFile attPath & Att

        ' mark as read
       Msg.UnRead = False
    End If
End If

ProgramExit:
    Exit Sub

ErrorHandler:
    MsgBox Err.Number & " - " & Err.Description
    Resume ProgramExit
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:24:40.947

当您打开 VBA 窗口时，您将看到名为“ThisOutlookSession”的对象，这是您放置代码的位置。

此事件在收到收到的新电子邮件时自动触发：

```
Private Sub Application_NewMail()

Dim oInbox As MAPIFolder
Dim oItem As MailItem

Set oInbox = Application.Session.GetDefaultFolder(olFolderInbox)
Set oItem = oInbox.Items.GetLast

//MsgBox oItem.To
//Etcetera 

End Sub 
```

关于您的编辑，我并没有真正调查它为什么不起作用，但您可以使用它，我测试过：

```
Dim atmt As Outlook.Attachment
Dim Att As String
Const attPath As String = "U:\"

For Each atmt In Msg.Attachments
    Att = atmt.DisplayName
    atmt.SaveAsFile attPath & Att
Next 
```

请注意，您似乎没有保存文件，因为您无法在 WinExplorer 中使用“修改日期”来显示最新保存的附件（我刚刚注意到）。但是你可以按字母顺序查找。

# javascript - 调用 jquery 函数并在箭头按键上传递一个对象

> ID：13047327
> 
> 赞同：0
> 
> 时间：2012-10-24T10:25:44.153
> 
> 标签：javascript, jquery, function, keypress

尝试调用一个函数“clickEvent()”并使用 jQuery 将一个带有箭头键属性的 obj 传递给它。但我没有达到这个功能。这是代码。谢谢。

**请注意：我正在分叉现有代码，但将我的 arrowPress 事件添加到其中。因此，如果 (direction != null) 区域，一切都应该保持原样，以便文档准备就绪。**

```
$(document).ready(function() {
    $('body').keyup(function(event) {
        var direction = null;

        // handle cursor keys
        if (event.keyCode == 37) {
            // slide left
            direction = 'prev';
        } else if (event.keyCode == 39) {
            // slide right
            direction = 'next';
        }

        if (direction != null) {
            //alert($('.'+ direction).attr('rel'));
            //need to pass the alert above as an obj to the function clickEvent() below.
        }
    });

}); //end $(document).ready

//function on external .js src
(function($) {
    function clickEvent(obj) {
        alert(obj.attr("rel"));
    }

    $.fn.slidingPage = function(options) {
        $el = $(this);
    }
})(jQuery); //end ext js scr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:38:16.327

该函数`clickEvent`在另一个函数的作用域内，将它们放入相同的作用域或更高的作用域：

```
function clickEvent(obj) {
    alert(obj.attr("rel"));
}

$.fn.slidingPage = function(options) {
    var $el = $(this);
};

(function($) {
    $('body').keyup(function(event) {
        var direction = null;

        // handle cursor keys
        if (event.keyCode == 37) {
            // slide left
            direction = 'prev';
        } else if (event.keyCode == 39) {
            // slide right
            direction = 'next';
        }

        if (direction != null) {
            clickEvent( $('.'+ direction) );
        }
    });

}); 
```

没有理由将`clickEvent`and`slidingPage`声明放在文档就绪处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:58:45.180

感谢安德烈·库兹明……

```
if (direction != null) {

   $('.'+ direction).click();       

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:02:28.400

如果您需要将代码包装到匿名函数中以防止全局变量污染，那么您的事件和函数代码应该放在同一范围内。

您可能需要在 .prev 和 .next 上触发点击事件。

```
$(document).ready(function() {
    $('body').keyup(function(event) {
        var direction = null;

        // handle cursor keys
        if (event.keyCode == 37) {
            // slide left
            direction = 'prev';
        } else if (event.keyCode == 39) {
            // slide right
            direction = 'next';
        }

        if (direction != null) {
            $('.'+ direction).click()
        }
    });

}); //end $(document).ready 
```

# string - 如何在 C++/CLI 中将 char[] 的内容传输到 String^

> ID：13047330
> 
> 赞同：0
> 
> 时间：2012-10-24T10:25:58.460
> 
> 标签：string, c++-cli, string-concatenation, char-pointer

我在 C++/CLI 程序中有命令行参数，用 char* argv[] 表示。我想将所有连接到 String^ 类的内容传输。

代码：

```
String ^masterString = "Commands=>";

for(int i=0; argv[i] != nullptr; ++i)
masterString += String(argv[i]); 
```

但是，我发现上述内容在我使用运算符的最后一个语句中不起作用`+=`。

1.  这里有什么错误的用法？这里的错误是没有运算符匹配操作数。

2.  还有其他更好的方法将内容从 char* 存储到 String^ 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:19:44.133

查看[MSDN](http://msdn.microsoft.com/en-us/library/bb384865.aspx)，主要是[这个](http://msdn.microsoft.com/en-us/library/bb384859.aspx)：

```
#include <stdlib.h>
#include <string.h>
#include <msclr\marshal.h>

using namespace System;
using namespace msclr::interop;

int main() {
   const char* message = "Test String to Marshal";
   String^ result;
   result = marshal_as<String^>( message );
   return 0;
} 
```

*顺便说一句*：我没有检查这个。刚google了一下。但是，我认为这会起作用，因为它发布在 MSDN 中。

# git - Git如何重新设置我已经推送的（个人）分支？

> ID：13047333
> 
> 赞同：2
> 
> 时间：2012-10-24T10:26:08.087
> 
> 标签：git, git-rebase

我读了[git book](http://git-scm.com)但不知何故忘记了上面写着的[规则](http://git-scm.com/book/en/Git-Branching-Rebasing#The-Perils-of-Rebasing)：

> **不要对已推送到公共存储库的提交进行变基。**
> 
> 如果您遵循该准则，您会没事的。如果你不这样做，人们会恨你，你会被朋友和家人鄙视。

在这里，我在工作中创建了一个本地分支 feature-xyz，我将其推送到远程仓库。我把它拉到另一台电脑上，做了更多的工作，然后推了。回到工作岗位，我拉了树枝。几次提交后，我重新调整了我的分支。现在我完成了 feature-xyz 并希望将其推送到远程存储库，但这显然失败并显示以下消息：

```
$ git push origin feature-xyz
To git@<url>:<repo>.git
 ! [rejected]        feature-xyz -> feature-xyz (non-fast-forward)
error: failed to push some refs to 'git@<url>:<repo>.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

显然，拉远程分支会产生各种冲突。所以我决定删除远程分支：

`git push origin :feature-xyz`

并重新创建它：

`git push origin feature-xyz`

但是我想知道是否有更好的工作流程不涉及删除远程分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:35:01.040

那就不要变基了。合并。
即，不要`feature-branch`在`anotherBranch`. 合并`anotherBranch`为`feature-branch`.

注意删除远程分支或者`push --force`同一个分支是一样的。
在这两种情况下，您都发布了新的 SHA1，重写了历史，这对于以前拉过`feature-branch`.

# java - 硒元素在系统中发现但在詹金斯中没有

> ID：13047336
> 
> 赞同：4
> 
> 时间：2012-10-24T10:26:21.420
> 
> 标签：java, junit, jenkins, selenium-webdriver

我和我的团队最近开始使用 Selenium Web Driver 和 JUnit 开发自动化脚本。我正面临一个问题，我真的不知道如何进行。任何建议都会很有用。

这里是问题：我有一个页面，我在一个表单中上传了两个excel，然后按提交按钮确认上传。

上传完成后，它会用数据填充数据库，下一页会确认每个 Excel 的行数。

我正在尝试获取确认上传的元素，它是“标签”类型。

所有这些都在我的电脑（windows 7，firefox webdriver）上在本地成功运行。

上传我的代码时，当 jenkins 构建/执行它时，我得到一个“找不到元素”并且测试失败。

由于我无法直观地访问 jenkins 运行的内容，因此我将元素确认（在 jenkins 上失败）替换为`getPageSource()`.

`getPageSource()`返回我希望看到的页面以及我试图找到的元素（本地和詹金斯）。

关于可能发生的事情有什么想法吗？

***笔记：***

有两个 10sec thread.sleep。每次上传excel时一个，点击提交后一个，确保加载下一页，保证excel提交成功。

我尝试使用 xpath 定位元素。事实上，我在 Firefox 中使用了 Firebug 给我的 xpath，在 Chrome 中使用了 Web 开发人员。只是为了确保xpath没有任何问题。两个 xpath 在我的本地机器上都成功地找到了元素，但在 jenkins 上失败了。

执行测试（在本地和在 Jenkins 上）我可以看到数据库按应有的方式填充。

请原谅缺少代码，但我可以分享的内容受到限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:17:40.503

Try using fluentwait instead of Thread.sleep(). Your element might not have been loaded in 10 seconds you may try this

```
// Waiting 30 seconds for an element to be present on the page, checking
 // for its presence once every 5 seconds.
   Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
   .withTimeout(30, SECONDS)
   .pollingEvery(5, SECONDS)
   .ignoring(NoSuchElementException.class);

WebElement foo = wait.until(new Function<WebDriver, WebElement>() {
 public WebElement apply(WebDriver driver) {
   return driver.findElement(By.id("foo"));
 }
}); 
```

as given [here](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html).

# android - 如何在没有 root 的情况下从 Android Canvas 捕获视频？

> ID：13047338
> 
> 赞同：3
> 
> 时间：2012-10-24T10:26:23.410
> 
> 标签：android, android-canvas, screen-capture

我正在开发一个带有画布和SurfaceView的绘画应用程序，我想记录用户操作并生成视频。

在这一刻，我正在尝试：

```
public static Bitmap captureView(View v) {
    Log.v(CAPTURE_TAG, "init");
    v.setDrawingCacheEnabled(true);
    v.buildDrawingCache(true);
    Bitmap b = Bitmap.createBitmap(v.getDrawingCache());
    //v.destroyDrawingCache();
    v.setDrawingCacheEnabled(false); // clear drawing cache
    Log.v(CAPTURE_TAG, "Fin:");
    return b;
} 
```

我每 50 毫秒调用一次，使用计时器和 AsynTask，在 AsynkTask 上，在 onPostExecute 方法上，我将位图保存在外部存储中：

```
public class takeCaptureTask extends AsyncTask<View, Void, Bitmap> {

    @Override
    protected void onPostExecute(Bitmap result) {
        Log.v("taskCapt", "Fin - InitSave");
        new saveCaptureTask().execute(result);
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.v("taskCapt", "init");
    }

    @Override
    protected Bitmap doInBackground(View... params) {
        return Utils.captureView(params[0]);
    }
} 
```

最后使用 NDK 和 ffmpeg 生成视频。

我的问题是性能，使用这个，每个屏幕截图需要 200 毫秒（5FPS），我至少需要 15 FPS。

我的问题是：
1-我以正确的方式在没有root的情况下进行屏幕录制？
2-我可以使用其他方法截取画布吗？
3-可以在没有root的情况下从NDK截屏吗？在这种情况下，怎么办？
4- 使用 NDK 将数据保存到外部存储更快吗？
5-如何缓冲大量图像以供以后处理？

我为我糟糕的英语道歉。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:02:52.573

这将取决于您如何绘制。您实际上可以使用 Bitmap 和 Canvas 作为绘图缓冲区，这很容易捕获。有很多方法可以做到这一点，包括只在视图发生变化时做一个屏幕截图

# javascript - 如何更改隐藏值和文本

> ID：13047343
> 
> 赞同：0
> 
> 时间：2012-10-24T10:26:52.100
> 
> 标签：javascript, jquery

我目前正在尝试制作一个下拉菜单，从菜单中选择其中一个链接将更改隐藏值以及超链接的文本。这是基于 Twitter 的 Bootstrap 下拉菜单，并使用 jQuery：

```
<div id="periodChooser" class="btn-group">
   <input type="hidden" value="1" name="dtype" id="dtype1"></input>
   <a data-toggle="dropdown" href="javascript:;">Weekend</a>  
   <ul class="dropdown-menu">
      <li><a href="javascript:;" data-value="1">Weekend</a></li>
      <li><a href="javascript:;" data-value="2">Week</a></li>
      <li><a href="javascript:;" data-value="3">Midweek</a></li>
   </ul>
</div> 
```

我尝试编写的脚本如下：

```
<script>
jQuery(function($){
    $('#periodChooser').each(function() {
        $('.dropdown-menu a').click(function() {
            $('.btn-group').find('input[type=hidden]').val($(this)
                    .data('value')).change();
            $('.btn-group').find('.btn:eq(0)').text($(this).text());
        });
    });         
});
</script> 
```

不幸的是，虽然它没有返回任何特定错误，但代码不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:30:35.260

将事件绑定到每个

```
<script>
       $('#periodChooser .dropdown-menu a').click(function() {
            $('.btn-group').find('input[type=hidden]').val($(this)
                    .data('value')).change();
             $('.btn-group').find('.btn:eq(0)').text($(this).text());
     });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:35:56.967

我认为这可以优化并使其更可重用。

首先，您使用的 jQuery 选择器`$('.btn-group')`非常低效。

其次，如果您将使用多个“小部件”，它会中断，因为上下文是整个文档，它会找到该类的所有元素`.btn-group`。

`<ul>`第三，使用绑定到父元素而不是每个元素的单个事件处理程序会更有效`<a>`。它被称为“事件委托”。[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
<script>
$('#periodChooser').each(function() {
    var $input = $('input', this),
        $select = $('>a', this);

    $('ul', this).on('click', 'a', function() {
        var $this = $(this);

        $input.val($this.data('value')).change();
        $select.html($this.html());
    });
});
</script> 
```

我在 JSBin 中提供了这段代码：http: [//jsbin.com/welcome/38724/edit](http://jsbin.com/welcome/38724/edit)

我在这里做了什么？

```
<script>
$('#periodChooser').each(function() {
    // Find and store input and "select" element only once.
    var $input = $('input', this),
        $select = $('>a', this); // This finds only direct child element <a>

    // Find the <ul> element inside the #periodChooser
    // Bind a click event that will "bubble up" from <a> elements that are children of it
    $('ul', this).on('click', 'a', function() {
        // Wrap a jQuery around the <a> element
        var $this = $(this);

        // Set the input value and execute "change" event(s)
        $input.val($this.data('value')).change();

        // Change the "select" title. Doesn't matter if you use html() or text() - choose yourself!
        $select.html($this.html());
    });
});
</script> 
```

现在，您可以使用它在单个页面内制作多个小部件！:)

```
<script>
$('.btn-group').each( /* Well, you know, the function goes here... */ );
</script> 
```

当然，这里还有很多其他事情要做，比如打开和关闭“选项列表”、滚动和可能还有很多其他事情......

# java - Jsoup 获取通用文本

> ID：13047346
> 
> 赞同：0
> 
> 时间：2012-10-24T10:26:56.487
> 
> 标签：java, web-scraping, jsoup

可能是愚蠢的问题，但我需要一种简单的方法来使用 Jsoup 在 html 页面中查找字符串。

例如，我需要一种简单的方法来查找`Capocchia`我的文档。

```
Document doc = Jsoup.connect("http://example.com/").execute();

String myString = doc.parse; 
```

接着？我应该用什么？我不知道我的文本将在哪个选择器中，它可能在`a`, `p`, `span`,`div`和其他...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:27:06.700

嗯，这是一个相当难以回答的问题！如果你不知道，我们也不知道。如果您正在寻找“从我需要的任何地方获取我需要的任何东西”的通用答案，恐怕它并不那么简单。

您可以随时尝试[在此处](http://jsoup.org/cookbook/extracting-data/selector-syntax)查找选择器文档，或者您可以升级该答案的描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T22:32:58.010

这很简单：

```
Document page = Jsoup.connect("http://www.zomato.com/mumbai/starbucks-coffee-fort").get();

boolean containsCapocchia = page.text().contains("Capocchia");

System.out.println(containsCapocchia); 
```

此页面的结果是`false`;)

# .htaccess - htaccess 抛出无限期重定向

> ID：13047350
> 
> 赞同：2
> 
> 时间：2012-10-24T10:27:13.047
> 
> 标签：.htaccess, http, redirect, https, indefinite

我正在尝试使用 htaccess 将我的页面重定向到 https。同时我希望其他页面应该在 http 上工作。以下是我的 .htaccess 代码。

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

# Turn SSL on for index.php
RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{REQUEST_URI} \/trimmApp\/index\.php [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [L]

# Turn SSL off everything exluding index.php (and some files used on index.php that need to serve through https only)

RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{REQUEST_URI} !\/trimmApp\/index\.php [NC]
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [L] 
```

Http 到 https 的重定向发生得很好，但是，htpps 重定向到另一个[https://index.php](https://index.php)并且这种情况无限期地发生。我尝试了几乎所有可能的 wrt httpd.cong AllowOveride 设置，

以下是我的重写日志的快照：

```
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70][rid#2b0c83a4cb90/initial] (4) [perdir /var/www/] RewriteCond: input='80' pattern='!^443$' => matched
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70][rid#2b0c83a4cb90/initial] (4) [perdir /var/www/] RewriteCond: input='/check/ping.html' pattern='\/trimmApp\/index\.php' [NC] => not-matched
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70][rid#2b0c83a4cb90/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/check/ping.html -> check/ping.html
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70][rid#2b0c83a4cb90/initial] (3) [perdir /var/www/] applying pattern '^(.*)$' to uri 'check/ping.html'
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70][rid#2b0c83a4cb90/initial] (4) [perdir /var/www/] RewriteCond: input='80' pattern='=443' => not-matched
10.x.x.x - - [24/Oct/2012:06:17:21 --0400] [xyz.com/sid#2b0c835afd70] 
```

不确定必须发生什么。帮助将不胜感激。我的 linux 版本是 Centos 5.6

# javascript - 正则表达式允许精度前 3 位和精度后 2 位

> ID：13047357
> 
> 赞同：-3
> 
> 时间：2012-10-24T10:27:40.913
> 
> 标签：javascript, asp.net, .net, regex, scripting

我写了一个只需要整数的正则表达式，但我需要重写这个正则表达式，只允许精度前 3 位和精度后 2 位

怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:28:59.333

如果它必须始终包含 3 位数字、一个小数点和 2 位数字，例如`412.88`，则：

```
/^\d{3}\.\d{2}$/ 
```

如果它之前*最多*可以有3 位数字，之后*最多可以*有2 位数字（可能根本没有小数点），那么可能是这样的：

```
/^\d{1,3}(\.\d{1,2})?$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:30:47.140

在**c#中**

`@"^\d{3}\.\d{2}$"`

```
//in c# we need to use verbatim string `@""` to treat escape sequences as normal literals instead of giving it a special meaning.. 
```

在**JavaScript中**

`/^\d{3}\.\d{2}$/`

# c++ - 使用 XP 视觉样式清单时状态栏控件无法正确调整大小

> ID：13047361
> 
> 赞同：3
> 
> 时间：2012-10-24T10:27:51.007
> 
> 标签：c++, c, winapi

在我的程序中，我创建了一个状态栏控件，然后为它设置了一个新字体。我遇到的问题是，当我包含 XP 视觉样式清单（即通用控件 6.0）时，状态栏不会调整大小以匹配新的字体大小。

例如

```
hGiantFont = CreateFont(-48, 0, 0, 0, FW_NORMAL, FALSE, FALSE,      
   FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS,
   CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH |    
   FF_DONTCARE, L"MS Shell Dlg 2");

hStatusBar = CreateWindowEx ( 
   0, STATUSCLASSNAME, NULL, WS_CHILD | WS_VISIBLE, 
   0, 0, 0, 0, hWnd, (HMENU)666, hInst, NULL    
);      

SendMessage(hStatusBar, WM_SETFONT, (WPARAM)hGiantFont,  
   (LPARAM)MAKELONG(TRUE, 0));

SendMessage(hStatusBar, WM_SIZE, 0, 0); 
```

执行最后一行后，什么也没有发生！它不会调整大小。请注意，如果我不包括视觉样式清单，它可以正常工作！我用 ICC_BAR_CLASSES 尝试了 InitCommonControls() 和 InitCommonControlsEX() 都无济于事。

我还尝试使用 MoveWindow 和 SetWindowPos 来更改大小或移动状态栏。包含视觉样式清单后，状态栏不会移动，它似乎粘在特定的大小和位置上。

这是 ComCtl32.dll 6.0 中的错误吗？或者是一个非常烦人的预期功能。解决方法是什么？

还有其他人尝试过同样的事情并取得成功吗？

编辑：

好的，我决定将整个程序包含在下面，这样人们就可以尝试一下，看看我的意思。它只是一个简单的 Win32 应用程序，添加了几行代码。如果您注释掉顶部的 #pragma manifest 行，您会注意到它按预期工作，并且使用 manifest 行，状态栏不会调整大小。

```
// StupidStatusBar.cpp : Defines the entry point for the application.

#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='*' publicKeyToken='6595b64144ccf1df'    language='*'\"") 

#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <tchar.h>
#include <commctrl.h>
#pragma comment(lib, "comctl32.lib")

// Global Variables:
HINSTANCE hInst;                                    
wchar_t *szTitle = L"Stupid Status Bar";    
wchar_t *szWindowClass = L"StupidClass";    

// Forward declarations of functions included in this code module:
ATOM                MyRegisterClass(HINSTANCE hInstance);
BOOL                InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);

int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
{
    MSG msg;
    INITCOMMONCONTROLSEX icex;

    icex.dwSize = sizeof(INITCOMMONCONTROLSEX);
    icex.dwICC = ICC_WIN95_CLASSES;

    if(!InitCommonControlsEx(&icex))
    {
        MessageBox(NULL, L"Error initializing common controls", L"Error", MB_OK);
        return 1;
    }

    MyRegisterClass(hInstance);

    // Perform application initialization:
    if (!InitInstance (hInstance, nCmdShow))
        return FALSE;

    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int) msg.wParam;
}   

ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style      = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon      = LoadIcon(NULL, IDI_APPLICATION);
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = NULL;
    wcex.lpszClassName  = szWindowClass;
    wcex.hIconSm        = LoadIcon(NULL, IDI_APPLICATION);

    return RegisterClassEx(&wcex);
}

BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;

   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

   if (!hWnd)
      return FALSE;

   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   return TRUE;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    HWND hStatusBar;
    HFONT hGiantFont;

    switch (message)
    {
    case WM_CREATE:
        hGiantFont = CreateFont(-48, 0, 0, 0, FW_NORMAL, FALSE, FALSE,     FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS,
        CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"MS Shell Dlg 2");

        hStatusBar = CreateWindowEx ( 
            0, STATUSCLASSNAME, NULL, WS_CHILD | WS_VISIBLE, 
            0, 0, 0, 0, hWnd, (HMENU)666, hInst, NULL   
        );      
        SendMessage(hStatusBar, WM_SETFONT, (WPARAM)hGiantFont, (LPARAM)MAKELONG(TRUE, 0));
        SendMessage(hStatusBar, WM_SIZE, 0, 0);
        SetWindowText(hStatusBar, L"Testing Testing");
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:12:18.827

解决了。必须覆盖状态栏的默认 proc 并使其 WM_SIZE 大小写返回 0。然后在我的主窗口中使用 MoveWindow 手动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-20T23:35:21.030

我有一个类似的问题，我认为 Win32 API 库中没有废话，它可以工作，但必须遵循一定的程序，这在 Win32 API 文档中没有这么清楚地显示（截至目前，它在[https ://code.msdn.microsoft.com/CppWindowsCommonControls-9ea0de64，L](https://code.msdn.microsoft.com/CppWindowsCommonControls-9ea0de64)部分）；如下：

1）全局，定义变量hWndStatusbar：

```
HWND hWndStatusbar; 
```

2) 在主窗口过程的 WM_CREATE 的末尾添加以下代码（如果 WndProc 窗口过程中尚未处理“case WM_CREATE”，则添加它）：

```
RECT rcStatusRect;

int iStatusBarWidths[1];

GetClientRect(hWnd, &rcStatusRect);

iStatusBarWidths[0] = rcStatusRect.right;

hWndStatusbar = CreateWindowEx(0, STATUSCLASSNAME, NULL, WS_CHILD | WS_VISIBLE | SBARS_SIZEGRIP, 0, 0, 0, 0, hWnd, NULL, hInst, NULL);

SendMessage(hWndStatusbar, SB_SETPARTS, (WPARAM)1, (LPARAM)iStatusBarWidths);

SendMessage((HWND)hWndStatusbar, (UINT)SB_SETTEXT, (WPARAM)(INT)0 | 0, (LPARAM)(LPSTR)TEXT("Hello")); 
```

3) 如果你的 WndProc 窗口过程中没有处理“case WM_SIZE”，只需添加它，并在末尾添加以下代码：

```
int iStatusBarWidths[1];

iStatusBarWidths[0] = -1;

SendMessage(hWndStatusbar, SB_SETPARTS, (WPARAM)1, (LPARAM)iStatusBarWidths);

SendMessage(hWndStatusbar, WM_SIZE, 0, 0); 
```

这就像一切，对我来说它就像这样，在 Visual Studio Community 2015 下。

# html - 链接不起作用

> ID：13047365
> 
> 赞同：-2
> 
> 时间：2012-10-24T10:27:59.583
> 
> 标签：html, css, wordpress

谁能看到为什么我的标题中的链接不适用于主页和联系我们页面。

[http://www.rg3fitness.com/](http://www.rg3fitness.com/)

似乎看不出代码有任何问题。它们是硬编码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:33:25.750

添加`z-index: 100;`到`.home-contact`

```
.home-contact {
float: left;
position: relative;
left: 690px;
top: 10px;
z-index: 100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:36:35.020

...现在添加

`z-index` 在你的`.home-contact`课上

```
.home-contact{
z-index:11;
} 
```

# c - getcwd() 在创建新指针后返回 NULL

> ID：13047366
> 
> 赞同：1
> 
> 时间：2012-10-24T10:28:02.473
> 
> 标签：c, segmentation-fault, getcwd

我刚开始学习linux和C，请不要严格评判我。

我正在尝试查找当前工作目录并在此目录中打开文件以查找特定单词。如果我只找到 cwd，它会给出正确的 cwd，但是当我添加 while 循环 cwd 为空时。

```
#include <unistd.h>
#include <stdio.h>
#include <limits.h>
main(){
char *buff;
char *currentDir =getcwd(buff,PATH_MAX);

printf("Current directory: %s\n",currentDir);

FILE *file;
char *filename = "profile";
file = fopen(filename,"r");
if(file == NULL)
{
fprintf(stderr,"File %s wasn't found\n",filename);
}

while(1)
{
    char buffer[80];
    char *token;
    fgets(buffer,80,file);
    if(feof(file))
    {break;}
    else{
    *token = strtok(buffer,"=");
        if(strcmp(token,"HOME")==1);
        {
        printf("HOME token is found");
        } 
    }
free(token);
}

fclose(file);
} 
```

输出：当前目录：（空）分段错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:30:08.227

`buff`指向随机内存。

你可能想这样声明`buff`：

```
char buff[PATH_MAX] = ""; 
```

* * *

如果在 Linux 上，则可以`getcwd()`通过这样做来分配所需的内存：

```
char * currentDir = getcwd(NULL, 0); 
```

`currentDir`完成后需要传递给`free()`它，`buff`然后不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:32:40.913

删除行：

> 免费（代币）；

`token`指向`buffer`，它在堆栈上。所以，不需要释放它。

另一个错误是：

> *token = strtok(缓冲区,"=");

`strtok()`返回 a `char*`，所以这应该是：

```
token = strtok(buffer,"="); 
```

您还应该将循环修改为：

```
#include <string.h>

...
char buffer[80];
while (fgets(buffer,80,file)) {
    char *token = strtok(buffer,"=");
    if (strcmp(token,"HOME") == 0);
    {
        printf("HOME token is found");
    }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:12:37.807

获取当前目录的小功能：

```
void get_working_dir(void) 
{
    char buf[PATH_MAX];

    if (getcwd(buf, sizeof(buf)) == NULL) {
       fprintf(stderr, "Err.:(%d) - %s: curr. workdir\n", errno,strerror(errno));
       exit(EXIT_FAILURE);
    }

    /* print current directory */
    printf("%s\n", buf);
} 
```

调用函数：

```
get_working_dir(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-29T19:01:50.210

我遇到了同样的问题，所以我查看了手册页，据说如果 getcpw() 系统调用为 NULL，它将 malloc 缓冲区。我认为问题在于您的缓冲区没有为空，因此请尝试使用 NULL 指针对其进行初始化

```
 char *buff=NULL;
    buff=getcwd(buff,PATH_MAX); 
```

# umbraco - 基于 Umbraco 国家/地区的访客重定向

> ID：13047368
> 
> 赞同：0
> 
> 时间：2012-10-24T10:28:05.733
> 
> 标签：umbraco

我需要根据访问者的位置重定向访问者，并在方向之前显示弹出窗口。

有没有可用的包和链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:30:17.663

查看 Maxmind 的 Apache GeoIP 插件——它可能是最可靠的来源。

如果您想“屏蔽”国家/地区，还有一款名为 BlockScript 的软件。

编辑：刚刚注意到你在 Windows 服务器上。不过还是看看 Maxmind - 有很多工具仍然与您相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:49:53.320

也许您应该查看 IP2Location 模块？

[http://our.umbraco.org/projects/developer-tools/ip2location-integration](http://our.umbraco.org/projects/developer-tools/ip2location-integration)

我还没有尝试过，但它看起来可以提供您需要的功能

# python - 返回特定字符出现次数最多的字符串

> ID：13047372
> 
> 赞同：1
> 
> 时间：2012-10-24T10:28:35.083
> 
> 标签：python

给定一个像“abbbd cdda cbaa”这样的字符串，你将如何确定特定字符（如“b”）出现次数最多的单词。我的初始代码：

```
sample = "abbbd cdda cbaa"
sample_splitter = sample.split()
#sample_splitter is now [abbbd, cdda, cbaa]
for word in sample_splitter:
  word.count("b") #this returns the number of occurrences of the char b
  max(word.count("b")) #this will return the highest number 
```

我一直在弄清楚如何将字母的最高计数与与之关联的数组值相关联。在这种情况下，应该是**“abbbd”**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:31:06.017

像这样：`max()`使用`str.split()`：

```
>>> strs= "abbbd cdda cbaa"
>>> max(strs.split(),key=lambda x:x.count("b"))
'abbbd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T09:43:30.907

该`collections`库包含有用的类，该类`Counter`也可用于计算集合中最常见的元素。

```
>>> import collections
>>> sample = "abbbd cdda cbaa"
>>> collections.Counter(sample).most_common(1)
[('a', 4)] 
```

请注意，参数指定要返回的元素的数量（从最常见到最不常见）——在这种情况下，只需要最常见的元素。

# eclipse-cdt - 使用 Subclipse 插件时如何解决 Eclipse CDT 中的非工作索引器？

> ID：13047373
> 
> 赞同：0
> 
> 时间：2012-10-24T10:28:41.773
> 
> 标签：eclipse-cdt, subclipse, indexer

在使用 Eclipse CDT 时，我从来没有遇到过索引器的任何问题。但是现在我开始使用 Subclipse 插件，没有任何效果。我一直在尝试禁用索引器并重新启用它，但没有运气。试图从工作区中删除项目并签出一个新的工作副本，但没有成功。我只是简单地了解所有内容：

```
Could not find symbol 'xxxxx' in index 
```

或许值得一提的是项目中的文件是 svn:externals，不确定这是否有什么不同。另外，我在 Windows 资源管理器中看到只有一个`.project`文件，不应该还有一个`.cproject`文件吗？

我正在使用：Eclipse CDT 8.1.0 (Juno) 和 Subclipse 1.8.16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:29:55.477

我的 C++ 项目使用 Subclipse 1.8 运行 Juno 时遇到了同样的问题。我的问题是，当我从 SVN 存储库的角度检出存储库时，我选择了第二个选项“作为工作区中的项目检出”。当我选择第一个选项“签出为使用新建项目向导配置的项目”时，它签出了我的整个存储库，然后立即开始索引。

我首先选择第二个选项的原因是因为它似乎会检查我的存储库，而第一个选项似乎想创建一个空项目——结果证明这是一个错误的印象，因为它确实会检查存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:17:45.287

您是否尝试过创建一个新的 CDT 项目，然后比较创建的 .xxx 文件和文件夹？也许您没有将所需的所有文件都存储在存储库中，因此未正确配置新的签出。

# sql - SQL 'ONCREATE' 命令

> ID：13047374
> 
> 赞同：0
> 
> 时间：2012-10-24T10:28:53.313
> 
> 标签：sql, sql-server, sqlcommand

我正在使用 DeZign for Databased v6 来设计我的 sql 数据库。

它一直运行良好，直到这个当前视图 SQL 代码：

```
CREATE VIEW %viewname%
AS
SELECT     dbo.tblSiteChallengeMember.id, tblSiteMemberDetail_2.memberNickname AS mediator, dbo.tblSiteGame.name AS gameName,
                      tblSiteMemberDetail_1.memberNickname AS teamMemberName, dbo.tblSiteChallengeMemberTeam.accepted, dbo.tblSiteChallengeMemberTeam.teamNumber,
                      dbo.tblSiteChallengeMember.matchDate, dbo.tblSiteChallengeMember.dateAdded, dbo.tblSiteChallengeMember.completed,
                      dbo.tblSiteMemberDetail.memberNickname AS creatorName, dbo.tblSiteChallengeMediator.refferalCount,
                      dbo.tblSiteChallengeMediator.dateAdded AS mediatorJoinDate
FROM         dbo.tblSiteChallengeMemberWin RIGHT OUTER JOIN
                      dbo.tblSiteChallengeMember INNER JOIN
                      dbo.tblSiteMemberDetail ON dbo.tblSiteChallengeMember.creatorId = dbo.tblSiteMemberDetail.id ON
                      dbo.tblSiteChallengeMemberWin.challengeId = dbo.tblSiteChallengeMember.id LEFT OUTER JOIN
                      dbo.tblSiteMemberDetail AS tblSiteMemberDetail_1 INNER JOIN
                      dbo.tblSiteChallengeMemberTeam ON tblSiteMemberDetail_1.id = dbo.tblSiteChallengeMemberTeam.memberId ON
                      dbo.tblSiteChallengeMember.id = dbo.tblSiteChallengeMemberTeam.challengeId RIGHT OUTER JOIN
                      dbo.tblSiteGame ON dbo.tblSiteChallengeMember.gameId = dbo.tblSiteGame.id LEFT OUTER JOIN
                      dbo.tblSiteMemberDetail AS tblSiteMemberDetail_2 INNER JOIN
                      dbo.tblSiteChallengeMediator ON tblSiteMemberDetail_2.id = dbo.tblSiteChallengeMediator.memberId ONCREATE VIEW %viewname%
AS
SELECT     dbo.tblSiteChallengeMember.id, tblSiteMemberDetail_2.memberNickname AS mediator, dbo.tblSiteGame.name AS gameName,
                      tblSiteMemberDetail_1.memberNickname AS teamMemberName, dbo.tblSiteChallengeMemberTeam.accepted, dbo.tblSiteChallengeMemberTeam.teamNumber,
                      dbo.tblSiteChallengeMember.matchDate, dbo.tblSiteChallengeMember.dateAdded, dbo.tblSiteChallengeMember.completed,
                      dbo.tblSiteMemberDetail.memberNickname AS creatorName, dbo.tblSiteChallengeMediator.refferalCount,
                      dbo.tblSiteChallengeMediator.dateAdded AS mediatorJoinDate
FROM         dbo.tblSiteChallengeMemberWin RIGHT OUTER JOIN
                      dbo.tblSiteChallengeMember INNER JOIN
                      dbo.tblSiteMemberDetail ON dbo.tblSiteChallengeMember.creatorId = dbo.tblSiteMemberDetail.id ON
                      dbo.tblSiteChallengeMemberWin.challengeId = dbo.tblSiteChallengeMember.id LEFT OUTER JOIN
                      dbo.tblSiteMemberDetail AS tblSiteMemberDetail_1 INNER JOIN
                      dbo.tblSiteChallengeMemberTeam ON tblSiteMemberDetail_1.id = dbo.tblSiteChallengeMemberTeam.memberId ON
                      dbo.tblSiteChallengeMember.id = dbo.tblSiteChallengeMemberTeam.challengeId RIGHT OUTER JOIN
                      dbo.tblSiteGame ON dbo.tblSiteChallengeMember.gameId = dbo.tblSiteGame.id LEFT OUTER JOIN
                      dbo.tblSiteMemberDetail AS tblSiteMemberDetail_2 INNER JOIN
                      dbo.tblSiteChallengeMediator ON tblSiteMemberDetail_2.id = dbo.tblSiteChallengeMediator.memberId ON
                      dbo.tblSiteChallengeMember.mediatorId = dbo.tblSiteChallengeMediator.id 
```

这会引发 SQL 错误：

```
Msg 102, Level 15, State 1, Procedure vwGetChallengeDetails, Line 19
Incorrect syntax near 'ONCREATE'. 
```

我对数据库仍然很陌生，但我从未见过 ONCREATE 命令（**代码中的 AS 上方**）。有人可以检查一下并告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:41:04.417

这不是两次相同的代码，而是第一个版本的一部分被切断并且缺少一些空格？第二个副本看起来很完整。尝试这个：

```
CREATE VIEW %viewname%
AS
  SELECT dbo.tblSiteChallengeMember.id,
         tblSiteMemberDetail_2.memberNickname AS mediator,
         dbo.tblSiteGame.name AS gameName,
         tblSiteMemberDetail_1.memberNickname AS teamMemberName,
         dbo.tblSiteChallengeMemberTeam.accepted,
         dbo.tblSiteChallengeMemberTeam.teamNumber,
         dbo.tblSiteChallengeMember.matchDate,
         dbo.tblSiteChallengeMember.dateAdded,
         dbo.tblSiteChallengeMember.completed,
         dbo.tblSiteMemberDetail.memberNickname AS creatorName,
         dbo.tblSiteChallengeMediator.refferalCount,
         dbo.tblSiteChallengeMediator.dateAdded AS mediatorJoinDate
  FROM   dbo.tblSiteChallengeMemberWin
         RIGHT OUTER JOIN dbo.tblSiteChallengeMember
                          INNER JOIN dbo.tblSiteMemberDetail
                            ON dbo.tblSiteChallengeMember.creatorId = dbo.tblSiteMemberDetail.id
           ON dbo.tblSiteChallengeMemberWin.challengeId = dbo.tblSiteChallengeMember.id
         LEFT OUTER JOIN dbo.tblSiteMemberDetail AS tblSiteMemberDetail_1
                         INNER JOIN dbo.tblSiteChallengeMemberTeam
                           ON tblSiteMemberDetail_1.id = dbo.tblSiteChallengeMemberTeam.memberId
           ON dbo.tblSiteChallengeMember.id = dbo.tblSiteChallengeMemberTeam.challengeId
         RIGHT OUTER JOIN dbo.tblSiteGame
           ON dbo.tblSiteChallengeMember.gameId = dbo.tblSiteGame.id
         LEFT OUTER JOIN dbo.tblSiteMemberDetail AS tblSiteMemberDetail_2
                         INNER JOIN dbo.tblSiteChallengeMediator
                           ON tblSiteMemberDetail_2.id = dbo.tblSiteChallengeMediator.memberId
           ON dbo.tblSiteChallengeMember.mediatorId = dbo.tblSiteChallengeMediator.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:44:51.610

DeZign 不知何故尝试两次创建相同的视图，但只删除了之前代码的一部分来创建新的。

在“oncreate”中删除“on”之前的所有代码修复了代码。

# android - Android：下载的文件大小小于其实际大小

> ID：13047376
> 
> 赞同：0
> 
> 时间：2012-10-24T10:29:07.330
> 
> 标签：android

我想自动更新我的应用程序
这是我正在使用的代码

```
public void Update(String apkurl){
      try {
            URL url = new URL(apkurl);
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = Environment.getExternalStorageDirectory() + "/download/";
            File file = new File(PATH);
            file.mkdirs();
            File outputFile = new File(file, "DeliverReceipt.apk");
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) {
                fos.write(buffer, 0, len1);
            }
            fos.close();
            is.close();//till here, it works fine - .apk is download to my sdcard in download file

            /*Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/apk/" + "DeliverReceipt.apk")), "application/vnd.android.package-archive");
            startActivity(intent);  //installation is not working        
            */
        } catch (IOException e) {
            Toast.makeText(getApplicationContext(), "Update error!", Toast.LENGTH_LONG).show();
        }
  } 
```

下载的文件只有20kb大小，比原来的要小，
我该如何解决这个问题？
谢谢
*注意：如果我在浏览器中尝试这个 url 它可以工作，可以下载一个 apk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:23:59.447

您可能应该在关闭文件之前刷新，使用`fos.flush()`

# jquery - 启动、停止和重新启动

> ID：13047377
> 
> 赞同：0
> 
> 时间：2012-10-24T10:29:09.123
> 
> 标签：jquery, button, jquery-animate

大家好，我已经写了这段代码

```
<script>

            //animate 2 div while clicked on one of the three
    $(document).ready(function(){
        $('.click').one("click", function(){
            $('.mainContent').animate(
                {"height":"+=620px"},
                800,
                'easeInBack');
            $('.eneButton').animate(
                { "top":"+=310px"},
                1500,
                'easeInOutExpo');
            $('.eneButton').animate(
                {"left":"-=310px"},
                1500,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"top":"+=620px"},
                2000,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"left":"-=620px"},
                2000,
                'easeInOutExpo');
                            //turn the close button on
            $('close').on('click');
                            //disable the .click button
            $('.click').off('click');
        });
    });

            //close a div and start animation 
    $('.close').one("click", function(){
        $('.content, .sec').fadeOut(250)

            $('.giardButton').animate(
                {"left":"+=620px"},
                1500,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"top":"-=620px"},
                1500,
                'easeInOutExpo');

            $('.eneButton').animate(
                {"left":"+=310px"},
                1500,
                'easeInOutExpo');
            $('.eneButton').animate(
                { "top":"-=310px"},
                1500,
                'easeInOutExpo');

            $('.mainContent').animate(
                {"height":"-=620px"},
                3500,
                'easeInBack');
                            //turn the .click button on
            $('.click').on('click');
                            //turn the close button off 
            $('.close').off('click');
        });

    //animate the first windows with sub-categories while press the .click button
    $(document).ready(function(){
        $('#riscaldamento li.cont').one("click", function(){
            $('#riscaldamento li.cont').css({'float':'left', 'margin':'5px'});
            $('.content #riscaldamento').animate(
                {"height":"50px", "padding":"30px"},
                1500
            );
        })

        $('#energie li.cont').one("click", function(){
            $('#energie li.cont').css({'float':'left', 'margin':'5px'});
            $('.content #energie').animate(
                {"height":"50px", "padding":"30px"},
                1500
            );
        })

        $('#giardinaggio li.cont').one("click", function(){
            $('#giardinaggio li.cont').css({'float':'left', 'margin':'5px'});
            $('.content #giardinaggio').animate(
                {"height":"50px", "padding":"30px"},
                1500
            );
        })
    });

    //open new windows with the content of every sub-categories
    $(document).ready(function(){
        $('#riscButton').click(function(){
            $('#energie, #giardinaggio, .ene, .ris, .gia').slideUp(1500);
            $('#riscaldamento').delay(100).slideDown('easeOutBounce');
            $('.cont').css({'height':'auto'});
        });
        $('#eneButton').click(function(){
            $('#riscaldamento, #giardinaggio, .ene, .ris, .gia').slideUp(1500);
            $('#energie').delay(100).slideDown('easeOutBounce');
            $('.cont').css({'height':'auto'});
        });
        $('#giardButton').click(function(){
            $('#energie, #riscaldamento, .ene, .ris, .gia').slideUp(1500);
            $('#giardinaggio').delay(100).slideDown('easeOutBounce');
            $('.cont').css({'height':'auto'});
        });
    });
    //click menu secondario per contenuto secondario riscaldamento
    $(document).ready(function(){
        $('#risCont').click(function(){
            $('.ris, .ene, .gia').fadeOut(50);
            $('#secRisc').delay(200).fadeIn(500);
        })
        $('#risCont1').click(function(){
            $('.ris, .ene, .gia').fadeOut(50);
            $('#secRisc1').delay(200).fadeIn(500);
        })
        $('#risCont2').click(function(){
            $('.ris, .ene, .gia').fadeOut(50);
            $('#secRisc2').delay(200).fadeIn(500);
        })
        $('#risCont3').click(function(){
            $('.ris, .ene, .gia').fadeOut(50);
            $('#secRisc3').delay(200).fadeIn(500);
        })
        $('#risCont4').click(function(){
            $('.ris, .ene, .gia').fadeOut(50);
            $('#secRisc4').delay(200).fadeIn(500);
        })

    });
    //click menu secondario per contenuto secondario energie
    $(document).ready(function(){
        $('#eneCont').click(function(){
            $('#secEne1, #secEne2, .ris, .gia').fadeOut(50);
            $('#secEne').delay(200).fadeIn(500);
        })
        $('#eneCont1').click(function(){
            $('#secEne, #secEne2, .ris, .gia').fadeOut(50);
            $('#secEne1').delay(200).fadeIn(500);
        })
        $('#eneCont2').delay(200).click(function(){
            $('#secEne1, #secEne, .ris, .gia').fadeOut(50);
            $('#secEne2').fadeIn(500);
        })
    });
    //click menu secondario per contenuto secondario giardini e piscine
    $(document).ready(function(){   
        $('#giaCont').click(function(){
            $('#secGia1, .ris, .ene').fadeOut(50);
            $('#secGia').delay(200).fadeIn(500);
        })
        $('#giaCont1').click(function(){
            $('#secGia, .ris, .ene').fadeOut(50);
            $('#secGia1').delay(200).fadeIn(500);
        })
    });
        //Nascondo i secondi menu
        $('#riscaldamento,#energie,#giardinaggio').hide();

        //nascondo i contenuti
        $('.ene, .ris, gia').hide();

        //Nascondo i contenuti energie
        $('#secEne,#secEne1,#secEne2').hide();

        //nascondo i contenuti giardini
        $('#secGia, #secGia1').hide();

        //nascondo il noscript
        $('.noscript').hide();
    </script> 
```

现在，当我单击带有 class="click" 的 div 时，您如何看到一个动画和一个子类别窗口在侧面打开，这个窗口有其他链接可以打开各种内容，每个内容都有一个“X”按钮关闭窗口并在原始位置重新设置 div class="click" 的动画。问题从这里开始，如果我再次单击 class="click" 动画就不会再发生了，但只有侧面的窗口出现了 sub-categories 。知道如何重新启用 class="click" 以便我可以重新启动第一个动画吗？

这是您可以测试动画的链接 [http://satidrotermica.com](http://satidrotermica.com)

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:48:51.050

好的，我找到的解决方案是：

```
$(document).ready(function(){
        $('.click').live('click', function(){
            $('.mainContent').animate(
                {"height":"+=620px"},
                800,
                'easeInBack');
            $('.eneButton').animate(
                { "top":"+=310px"},
                1500,
                'easeInOutExpo');
            $('.eneButton').animate(
                {"left":"-=310px"},
                1500,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"top":"+=620px"},
                1500,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"left":"-=620px"},
                1500,
                'easeInOutExpo');
            //remove the class .click when the animation is done
            //so that the animation, even if you click wont start again
            $('.click').removeClass('click');
        });

    $('.close').live('click', function(){
        $('.content, .sec').fadeOut(250)

            $('.giardButton').animate(
                {"left":"+=620px"},
                1500,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"top":"-=620px"},
                1500,
                'easeInOutExpo');

            $('.eneButton').animate(
                {"left":"+=310px"},
                1500,
                'easeInOutExpo');
            $('.eneButton').animate(
                { "top":"-=310px"},
                1500,
                'easeInOutExpo');

            $('.mainContent').animate(
                {"height":"-=620px"},
                2750,
                'easeInBack');
            //Add class .click to #nav ul li so that when the closing animation
            //is done you can restart all from the begin
            $('#nav ul li').addClass('click');
        });
    }); 
```

正如你所看到的，在第一个动画结束时，我删除了所有动画的类，在最后一个动画结束时，关闭一个，当一切都关闭时，我再次在 DOM #nav ul li 中添加类，这样我可以重新单击按钮，动画可以从头开始。

# c - 变量的类型 int32_t、int64_t 等

> ID：13047379
> 
> 赞同：-3
> 
> 时间：2012-10-24T10:29:15.043
> 
> 标签：c

我对 C/C++ 中变量的类型有一个简单的问题，即可以声明这样的类型

int32_t、int64_t 等

我的问题是这些类型中的“t”是什么意思，与通常的类型（如 int32、int64）有什么区别。

谢谢！

...

抱歉，我不知道如何正确回答所有回答我问题的人，而不是单独写评论。无论如何，感谢大家的回复。好吧，我不得不说我正在解析代码，而且我是 C/C++（不是 C#）的新手

关于 int32_t 等，它们似乎确实在头文件中单独定义：

```
#include <stdint.h>
#ifdef _FAST_
#define SHORT  uint_fast16_t
#define INT    uint_fast32_t
#define LONG   uint_fast64_t
#else
#define SHORT  uint16_t
#define INT    uint32_t
#define LONG   uint64_t
#endif 
```

有人能解释一下这个结构是什么意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:34:50.847

这些看起来像 C++ 类型（Boost 库 cstdint 的一部分）。您在什么情况下看到这些类型？你在使用 Boost 库吗？

编辑：我猜“t”代表“type”或“typedef”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:35:25.827

`Int32_t`没有像and这样的内置类型`Int64_t`，也没有`_t`可以添加到现有类型的魔法后缀。

类型`Int32_t`和`Int64_t`必须在代码中的某处定义。他们可能以某种方式使用`Int32`and`Int64`类型，但并没有因为类型名称包含其他类型名称而涉及魔法。就编译器而言，`ABigNumber`它们也可以被命名。`ABiggerNumber`

# xslt - 字符串的 XSLT 格式

> ID：13047382
> 
> 赞同：0
> 
> 时间：2012-10-24T10:29:22.173
> 
> 标签：xslt

我是 XSLT 的新手。

我运行以下选择

```
<xsl:value-of select="./@name"/> 
```

我得到以下结果

> TestSomething.Cancel(GIVEN WHEN THEN)

我想让输出说

> 给定的时间

而不是 TestSomething.Cancel(GIVEN WHEN THEN)

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:06:50.957

如果您可以在您正在使用的 xslt 处理器上发布源 XML 和一些信息会有所帮助，但我猜我会这么说。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="/">
        <xsl:value-of select="substring-before(substring-after(./@name, '('), ')')"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:07:15.900

利用 ...

```
<xsl:value-of select="substring-before(substring-after(./@name,'('),')')" /> 
```

# jquery - Navgrid 刷新按钮什么都不做

> ID：13047389
> 
> 赞同：0
> 
> 时间：2012-10-24T10:29:35.220
> 
> 标签：jquery, jqgrid

我有一个网格，当我单击刷新按钮时，它什么也不做。没有向服务器发出请求。但我可以看到它执行 beforeRequest() 函数。有谁知道发生了什么？

```
jQuery("#paramlistFlex").jqGrid({
    url: root + mod + '/setlistview',
    datatype: "local",
    colNames:[' ', 'Name of Set', 'Description of Set', 'Date of Set'],
    colModel:[
        {name:'myac', width:50, fixed:true, sortable:false, resize:false, formatter:'actions', formatoptions:{keys:true, editbutton : false, delbutton : false, delOptions: {reloadAfterSubmit:false},editOptions: {reloadAfterSubmit:false}}},
        {name:'set_name',index:'set_name', width:200},
        {name:'set_desc',index:'set_desc', width:400},
        {name:'set_date',index:'set_date', width:200}
        ],
    width: $('.body').width()-25,
    height: ($('.body').height()-240)/2,
    pager: '#pagerFlex2',
    sortname: 'set_id',
    sortorder: "desc",
    editurl: root + mod + '/detailpost',
    caption:"Set of Parameter List",
    onSelectRow: function(id){
        activedf = "#paramlistFlex";
    },
    afterInsertRow: function () {
        var grid = $(this),
        iCol = getColumnIndexByName(grid,'myac'); // 'act' - name of the actions column
        grid.find(">tbody>tr.jqgrow>td:nth-child(" + (iCol + 1) + ")")
        .each(function() {
            if ($(this).find(">div>div").length == 2)
            {
                $("<div>",
                    {
                        title: "Delete",
                        mouseover: function() {
                            $(this).addClass('ui-state-hover');
                        },
                        mouseout: function() {
                            $(this).removeClass('ui-state-hover');
                        },
                        click: function(e) {
                            df_delete_1($(e.target).closest("tr.jqgrow").attr("id"));
                        }
                    }
                  ).css({float:"left"})
                   .addClass("ui-pg-div ui-inline-edit")
                   .append('<span class="ui-icon ui-icon-trash"></span>')
                   .prependTo($(this).children("div"));

            }
        });
    },
    beforeRequest: function() {
        var setid = $('input[name=item]').val();
        if (setid == "")
            setid = 0;

        jQuery("#paramlistFlex").jqGrid('setGridParam',{postData:{setid: setid}});
        console.log('hiya');
    }
});

jQuery("#paramlistFlex").jqGrid('navGrid','#pagerFlex2',{add:false,edit:false,del:false,search:false});
jQuery("#paramlistFlex").jqGrid('gridResize', {minWidth:350, maxWidth:1920, minHeight:80, maxHeight:1080} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:41:07.370

您`datatype: "local"`在网格中使用。从您提出的如何填充 jqGrid 的代码中还不清楚。如果您`addRowData`用于填充，您应该知道这是填充本地网格的最慢方式。

在这种情况下，该`url`参数将被忽略，`datatype: "local"`并且网格的重新加载将使用*本地数据*完成。例如，如果您在第二页上或者如果数据被过滤，则过滤器将被重置并且页码将为 1。如果您想*从服务器*加载数据，您必须更改`datatype`为`"json"`或`"xml"`相对于`setGridParam`触发器之前“重载网格”事件。

# xslt - XSLT 删除不必要的元素

> ID：13047394
> 
> 赞同：3
> 
> 时间：2012-10-24T10:29:53.250
> 
> 标签：xslt

我正在尝试编写一个 xslt 代码，它将检查描述元素是否存在，如果它存在，那么它将显示描述元素，但如果它不存在，那么它不应该显示描述元素。但是我下面的代码仍然显示元素尽管它没有任何价值。我们如何对其进行编码，以便在没有服务描述的情况下不会显示描述元素。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

   <xsl:template match="Service">
     <xsl:element name="equipment">
      <xsl:if test="description !='' ">
          <xsl:value-of select="description" />
      </xsl:if>
      <xsl:if test="not(description)">
      </xsl:if>
     </xsl:element>
    </xsl:template>
   </xsl:stylesheet> 
```

因为有一个空的设备元素被返回。我希望它只返回前 2 个不为空的设备元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:54:16.433

更新的解决方案如下；请检查

```
 <xsl:template match="Services">
    <xsl:for-each select="Service">
      <xsl:if test="count(description) &gt; 0 and description!=''">
        <equipment>
          <xsl:value-of select="description"/>
        </equipment>
      </xsl:if>
    </xsl:for-each>

  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:22:02.413

这对你有用吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<!-- place <result /> as root to produce wellformed XML -->
<xsl:template match="/">
  <result><xsl:apply-templates /></result>
</xsl:template>

<!-- rewrite those <Service /> that have a <description /> -->
<xsl:template match="Service[./description]">
  <equipment><xsl:value-of select="description" /></equipment>
</xsl:template>

<!-- remove those who do not -->
<xsl:template match="Service[not(./description)]" />
</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:54:44.583

```
 <xsl:template match="/">
  <xsl:apply-templates select="//Service"/>
  </xsl:template>
<xsl:template match="Service">
      <xsl:if test="description !='' ">
           <xsl:element name="equipment">
          <xsl:value-of select="description" />
     </xsl:element>
      </xsl:if>
    </xsl:template> 
```

或者

```
 <xsl:template match="/">
  <xsl:apply-templates select="//Service"/>
  </xsl:template>
   <xsl:template match="Service">
      <xsl:if test="child::description[text()]">
       <xsl:element name="equipment">
          <xsl:value-of select="description" />
            </xsl:element>
      </xsl:if>
    </xsl:template> 
```

# multithreading - 几个走在网格上的步行者：如何组织线程？

> ID：13047397
> 
> 赞同：2
> 
> 时间：2012-10-24T10:30:04.717
> 
> 标签：multithreading

我的算法正在处理 DEM。DEM（数字高程模型）是地面地形的表示，其中在网格节点处已知高程。

我的问题可以总结如下： Q 是一个包含要访问的节点的队列。开始时，网格的边界被推入 Q。

```
while Q is not empty, do 
   remove Node N from the top of Q
   if N was never visited then do 
      consider the 8 neighbors of N
      among them select the unvisited ones
      among them select those with a higher elevation than N's
      push these at Q's tail
      mark N as visited
  done
done 
```

如上所述，该算法将通过连续上升的路径从边界到达的每个节点标记为“已访问”。值得注意的是，队列中节点的处理顺序并不重要。另请注意，某些点可能会要求从边界到达曲折的上升路径。例如，想象一个圆锥体，其周围有一个螺旋形的沟。犁沟的脊是一条独特而曲折的路径，能够到达圆锥体的顶部，而不会下降到犁沟中。

无论如何，我想多线程这个算法。我仍然处于想知道哪个是最好的数据和线程组织的第一步，以便在编写野兽时尽可能减少调试痛苦。

我的第一个想法是将网格划分为瓦片，并将队列拆分为网格中的瓦片。瓷砖堆积在工作清单中。一些线程正在解析工作列表，并抓取当前可以做某事的任何图块。

处理特定图块首先需要图块的队列不为空。如果步行者的瓷砖必须访问瓷砖边缘的节点，我可能还需要锁定相邻的瓷砖。

我在想，当步行者无法在需要时锁定相邻的瓦片时，它可以跳到本地队列中的下一个节点，甚至线程本身也可以将瓦片释放到工作列表并寻找另一个瓦片从事于。

我对多线程编程的实际经验足以理解，这个可爱的描述很可能在我调试时变成一场噩梦。但是，我没有足够的经验来评估对算法进行编程的各种可能性并做出正确的决定，因为我不会有一个月的时间来调试意大利面。

谢谢阅读 ：）

# python - 有没有办法在 python 中检测模块 globals() 的顺序？

> ID：13047399
> 
> 赞同：0
> 
> 时间：2012-10-24T10:30:12.203
> 
> 标签：python, reflection, global-variables

python模块中使用了一些全局变量：

```
ImFirst = 1  
ImSecond = 2  
AndImThird = "three" 
```

globals() 给出了这些名称和值的字典，但不幸的是它不是 OrderedDict （显然，因为 globals() 早于集合模块）。

有没有办法获得全局名称在模块中出现的顺序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:47:22.410

您可以使用[tokenize.generate_tokens](http://docs.python.org/library/tokenize.html#tokenize.generate_tokens)来收集有关令牌名称出现顺序的数据。

例如，如果将此文件另存为`/tmp/test.py`并运行 `python /tmp/test.py`，它将读取自己的代码并报告全局变量出现的顺序：

```
import tokenize
import io
import token
import collections
import itertools

class Token(collections.namedtuple('Token', 'toknum tokval start end line')):
    @property
    def tokname(self):
        return token.tok_name[self.toknum]

ImFirst = 1  
ImSecond = 2  
AndImThird = "three"
if ImSecond:
    ImFourth = 4.0

seen = set()
order = []
with open('/tmp/test.py', 'r') as f:
    for tok in itertools.starmap(Token, tokenize.generate_tokens(f.readline)):
        if tok.tokname == 'NAME' and tok.tokval not in seen:
            seen.add(tok.tokval)
            order.append(tok.tokval)

order = [name for name in order if name in globals()]
print(order) 
```

产量

```
['tokenize', 'io', 'token', 'collections', 'itertools', 'Token', 'ImFirst', 'ImSecond', 'AndImThird', 'ImFourth', 'seen', 'order', 'f', 'tok', 'name'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:34:49.900

感谢 eryksun 上面的评论，我深入研究了 sys._getframe() 的“属性树”，
显然所有全局名称，按代码中出现的顺序，都存在于：

```
sys._getframe().f_code.co_names 
```

它还包括未定义的变量，但是用 globals() 加入这个信息就可以了。

# c# - 使用 devexpress ASPXGridViewExporter 工具将网格视图转换为 pdf

> ID：13047400
> 
> 赞同：1
> 
> 时间：2012-10-24T10:30:12.797
> 
> 标签：c#, asp.net, vb.net, devexpress

有什么方法可以使用 Devexpress ASPXGridViewExporter 工具将 Asp.net 网格视图转换为 PDF 格式或任何其他格式，而无需将现有的网格视图转换为 Devexpress ASPXGridView？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:55:53.500

你可以这样做，但要导出，你需要通过一个迂回的方法。

首先，您需要拥有`datasourceID`绑定到 ASP gridview 的那个。您可以按照导出的步骤操作；下面的代码应该写在Export Button Click上。

```
 ASPxGridView grd = new ASPxGridView(); //create instance of aspxgridview
        grd.AutoGenerateColumns = true; //this should be set true so that automatically data gets bind
        grd.ID = "Test"; //give any id
        grd.DataSource = objs; //Datasource Id - could be objectdatasource
        grd.KeyFieldName = "TestField";  //keyfield name in the datasource
        this.Controls.Add(grd);             
        grd.DataBind();

        ASPxGridViewExporter1.GridViewID = "Test";
        ASPxGridViewExporter1.WritePdfToResponse();
        this.Controls.Remove(grd); //would remove the temporarily created instance of devex grid 
```

# jquery - 如果存在某些类，则尝试让 IF/IS 更改 SRC

> ID：13047402
> 
> 赞同：0
> 
> 时间：2012-10-24T10:30:15.543
> 
> 标签：jquery

尝试使此功能正常工作时遇到麻烦。

```
$(".chopping").click(function() {
if($("#sink").is('.1-0sinkblack')) {
$("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');
}

}); 
```

在没有 if/is 函数的情况下，下面的代码可以工作，但是添加 if/is 似乎不起作用。我错过了什么吗？我相信所有 DIV 都可以正常工作。

```
$(".chopping").click(function() {
$("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:32:01.220

```
$(".chopping").on('click', function() {
    if($("#sink").hasClass('1-0sinkblack')) {
        $("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');
    }

}); 
```

这是演示：http: [//jsfiddle.net/78zx4/](http://jsfiddle.net/78zx4/)

使用[**is**](http://api.jquery.com/is/)函数没有问题，您可能需要使用[**on**](http://api.jquery.com/on/)函数修改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:44:14.003

最干净的解决方案应该是：

```
$(".chopping").click(function() {    
   if($("#sink.1-0sinkblack").length == 1) {
       $("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');      
   };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:33:31.677

用这个

```
$(".chopping").click(function() {
if($("#sink").hasClass('1-0sinkblack')) {
$("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');
}

}); 
```

或者

```
$(".chopping").click(function() {
if($("#sink").attr("class")=='1-0sinkblack') {
$("#accessories2").attr('src', 'chooser/acc/1-0-cb.png');
}
}); 
```

# c# - C#中的一次性密码在一段时间后过期？

> ID：13047403
> 
> 赞同：1
> 
> 时间：2012-10-24T10:30:16.587
> 
> 标签：c#, asp.net, one-time-password

我正在为 C#.net 中的一个网站创建一个登录页面，遇到了一个问题，希望你们能帮助我。

情况是这样的：用户来到登录屏幕，然后从那里输入他们的电子邮件，我们将参考数据库来检查有效性，如果有效，将随机生成一个 8 位密钥生成并发送到电子邮件。用户现在应该检查他/她的电子邮件以获取“一次性密码”，然后键入一个文本框以继续。

生成和电子邮件发送已完成，但我不确定如何继续执行此操作

我的团队成员之间进行了一些讨论，其中一位提议使用会话超时，然后当单击按钮时，将发送电子邮件，将创建一个会话变量并在其中存储一次性密码，然后我们将引用用户使用会话变量输入的文本框文本，如果正确，他们将登录。

我想到的另一种方法是使用 Javascript 计时器，然后在网页上使用不可见的标签进行引用。但我不确定Javascript是否可以允许这种情况发生..

对于这种情况，您最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:32:26.960

它是时间敏感的，只需将代码存储在具有到期日期时间的数据库中。然后，当用户带着他们的令牌回来时，您可以查看它是否还没有过期，如果已经过期，那么请他们重新开始这个过程。

# jquery - 播放选项在 SlidesJS 中不起作用？

> ID：13047405
> 
> 赞同：1
> 
> 时间：2012-10-24T10:30:20.520
> 
> 标签：jquery, autoplay, slidesjs

根据 SlidesJS 文档，您应该能够通过设置“播放”选项来设置自动播放速度，如下所示：

```
$(document).ready(function() {
    $('#header-slideshow').slides({
        effect : 'fade',
        crossfade : true,
        fadeSpeed : 1000,
        play: 5000,   <------------------------- Autoplay interval
        pause : 2500, <-------- What?
        hoverPause : true
    });
}); 
```

它不起作用，它根本不会自动播放。我也不明白“暂停”和“播放”之间的区别。

根据文档：

**播放（号码）：**

> 自动播放幻灯片，一个正数将设置为 true，并且是**幻灯片动画之间的时间，**以毫秒为单位。

**暂停（数字）：**

> 单击下一个/上一个或分页时暂停幻灯片。正数将设置为 true，并且是以毫秒为单位**的暂停时间**。

没看懂，有什么区别？不过，他们俩现在似乎都没有做任何事情。

我错过了什么？

文档在这里： [http ://www.slidesjs.com/#docs](http://www.slidesjs.com/#docs)

**编辑** 我忘了提到幻灯片实际上正在工作。jQuery 被导入等，当我单击导航按钮时幻灯片工作。只是自动播放不起作用。

**编辑** 做了一个 JSFiddle，也没有在那里工作。 [http://jsfiddle.net/WbGeL/](http://jsfiddle.net/WbGeL/)

**解决方案** hoverPause 选项无法按预期工作。一旦我将鼠标悬停在网页上（实际上是在任何地方），它就会认为我正在将鼠标悬停在幻灯片上。即使我将鼠标移出整个浏览器，它仍然认为我在悬停，这导致自动播放不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:18:24.850

尝试添加

```
 autoplay: true; 
```

我认为播放设置是针对幻灯片持续时间的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T16:08:12.300

你的小提琴没有工作，因为'slidejs'没有加载（它不是jQuery的一部分）。因此，我将缩小版粘贴到您的 javascript 上方并进行了一些调整。

本质上，您的代码很好。如果您要使用 hoverPause，您必须包含 pause 参数以“重新启动”幻灯片。

只修改了您的 .slides 参数：

```
$(function() {
    $('#slideshow').slides({
        effect : 'fade',
        crossfade : true,
        fadeSpeed : 1000,
        play: 5000, //  <---- Wait to start and slide change interval.
        hoverPause : true,
        // miliseconds to wait before resume play on mouseout (hoverPause).
        pause : 10
    });
}); 
```

这是修改后的小提琴：http: [//jsfiddle.net/WbGeL/7/](http://jsfiddle.net/WbGeL/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:43:07.673

你能发布获取javascript错误吗？

你应该做以下事情： -

1) 包含 jQuery 文件。2) 包含 Sliders 插件 js 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T22:31:30.123

我遇到了同样的问题，但我做了一些调查，发现该`play`选项需要一个包含各种播放选项的对象。据我了解，`play`主要用于触发基于播放/停止按钮的幻灯片，但它确实有一个`auto`打开自动播放的选项：

```
play: {
    active: false,        // Don't display play/stop button
    auto: true,           // Activates autoplay
    effect: "fade",
    interval: 5000       // Time between slides
}, 
```

希望有帮助！

# android - 管理单个表单字段的分页（滑动视图）的最佳方法？

> ID：13047406
> 
> 赞同：0
> 
> 时间：2012-10-24T10:30:23.343
> 
> 标签：android, android-lazyadapter

我对 android 中的一种表单有更多详细信息。由于设计限制，我不想添加滚动视图。现在我想在滑动时加载视图（单个表单中总共有 5 页）。实现这一目标的最佳选择是什么？采用一种 xml 布局并在滑动时隐藏/显示不同的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:59:08.627

我认为[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)会是最好的。它也可用于[兼容性包](http://developer.android.com/tools/extras/support-library.html)以实现向后兼容性。

检查这个[android viewpager implementation](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

# c++ - 如何在 C++ 中的不同类之间进行转换？

> ID：13047408
> 
> 赞同：1
> 
> 时间：2012-10-24T10:30:33.477
> 
> 标签：c++

我有一个与转换不同类有关的问题，如下代码脚本所示：

```
template<typename E>
class Coordinate 
{
public:
    E x_;
    E y_;
    Coordinate(E x, E y):x_(x),y_(y) {};
    Coordinate():x_(0),y_(0) {};
    ~Coordinate() {};
};

typedef vector<Coordinate<float> > Cordfloat;
typedef vector<Coordinate<double> > Corddouble;

int main()
{
    Corddouble myarray;
    Coordinate<float> value(1.2,1.3);
    // myarray.push_back(value);  // failed!!!
    // Option 1
    Coordinate<double> temp;
    temp.x_ = static_cast<double>(value.x_);
    temp.y_ = static_cast<double>(value.y_);
    myarray.push_back(temp);
    // Option 2
    // myarray.push_back(static_cast<Coordinate<double> >(value)); // failed!!!
    // Option 3
    // myarray.push_back(dynamic_cast<Coordinate<double> >(value)); // failed!!!

    return 0;
} 
```

在上面的代码中，我尝试了三种方法来完成这项工作。只有第一种方法有效。看来我不能直接使用`static_cast`and`dynamic_cast`进行转换。我想知道是否还有其他方法可以执行转换任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:34:48.570

添加转换构造函数**或**转换运算符（您可能只需要两者之一）：

```
template<typename E>
class Coordinate 
{
public:
    E x_;
    E y_;
    Coordinate(E x, E y):x_(x),y_(y) {};
    Coordinate():x_(0),y_(0) {};
    ~Coordinate() {};

    template<typename T>
    /*explicit*/ Coordinate(Coordinate<T> const& o)
       :x_(static_cast<E>(o.x_))
       ,y_(static_cast<E>(o.y_))
    {
    }

    template<typename T> /*explicit*/ operator Coordinate<T>() {
        return Coordinate<T>(static_cast<T>(x_), static_cast<T>(y_));
    }

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T10:35:38.570

在 Coordinate 中创建一个从另一个 Coordinate 隐含的构造函数，因此：

```
template< typename E > class Coordinate 
{
  public:
    template< typename F >
    Coordinate( Coordinate<F> const& coord ) 
        : x_(coord.x_), y_(coord.y_)
    {
    }

    // rest
} 
```

或者在您的构造函数中

```
 : x_( static_cast<E>(coord.x_) ),
          y_( static_cast<E>(coord.y_) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T10:34:48.630

模板化的构造函数和模板化的赋值可以巧妙地完成这项工作：

```
template<typename E>
class Coordinate 
{
public:
    E x_;
    E y_;
    //...

    template<typename T>
    Coordinate(Coordinate<T> const & c ) 
    : x_(static_cast<E>(c.x_)), 
      y_(static_cast<E>(c.y_)) 
    {
    }

    template<typename T>
    Coordinate<E> & operator=(Coordinate<T> const & c ) 
    {
       x_ = static_cast<E>(c.x_);
       y_ = static_cast<E>(c.y_);
       return *this;

    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T10:40:25.023

如果一个类/结构是另一个类/结构的子类，或者定义了从一个类/结构到另一个的转换运算符或转换构造函数，则只能将一个对象从一个类/结构转换为另一个类/结构。（我在这里撇开内置类型，它们有明确定义的转换）。

您可以使用 static_cast 从一个类转换为其基类之一。要将基类转换为派生类，您必须使用 dynamic_cast（在进行强制转换之前检查基类实际上是派生类对象）。

Coordinate<float> 既不是 Coordinate<double> 的子类也不是超类。

因此，您唯一的解决方案是编写一个转换运算符或将构造函数从 Coordinate<float> 转换为 Coordinate<double>。

# r - 从上一个函数调用 answer

> ID：13047411
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:30:50.893
> 
> 标签：r

我正在尝试在 R 中编写一个函数，该函数将作为其输出返回，即前一个函数的一个输出。前面的函数返回一个包含 3 个不同事物的列表。

到目前为止，我想出如何做到这一点的唯一方法是完全复制和粘贴原始函数，并让它只返回一个答案，但肯定有更短的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:51:44.963

如果原始函数名为`foo()`，如

```
foo <- function ( something ) {
  # some code
  return(list(residuals, residualssquared,tss))
} 
```

然后就做

```
bar <- function ( something ) {
  return ( foo(something)$tss )
} 
```

或者干脆使用`foo(something)$tss`来直接访问`tss`组件的返回值`foo()`。真的没有必要`bar()`在`foo()`.

# c# - XmlSerializer - 数组中的数组

> ID：13047412
> 
> 赞同：1
> 
> 时间：2012-10-24T10:30:51.800
> 
> 标签：c#, .net, xmlserializer

我有以下 xml 文件：

```
<ArrayOfX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <X>
    <Name>Name1</Name>
    <ArrayOfY>
      <Y>
        <Member1>1</Member1>
      </Y>
      ...
    </ArrayOfY>
  </X>
  ...
</ArrayOfX>

public class X {
    public string Name { get; set; }
    public List<Y> Y { get; set; }
}

public class Y {
    public String Member1 { get; set; }
} 
```

但如果我尝试使用 XmlSerializer 反序列化，Name 包含正确的值，但 Y 列表为空。任何想法？

```
XmlSerializer serializer = new XmlSerializer( typeof( List<X> ) );
return (List<X>)serializer.Deserialize(reader); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:34:39.770

您需要使用 typeof(Y) 填充“extraTypes”数组参数。

请参阅[http://msdn.microsoft.com/en-us/library/e5aakyae.aspx](http://msdn.microsoft.com/en-us/library/e5aakyae.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:57:56.483

尝试这个：

```
public class X {
    public string Name { get; set; }
    [XmlArray(ElementName = "ArrayOfY")]
    public List<Y> Y { get; set; }
} 
```

使用您的类定义，如果您尝试序列化 a `List<X>`，输出将如下所示：

```
<ArrayOfX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <X>
    <Name>Name1</Name>
    <Y> <!-- Not ArrayOfY -->
      <Y>
        <Member1>1</Member1>
      </Y>
      ...
    </Y>
  </X>
  ...
</ArrayOfX> 
```

您提供的 xml 文件不是`XmlSerializer(typeof(List<X>))`. 它期待`<Y>`而不是X`<ArrayOfY>`的`List<Y>`成员。

我添加的属性将指示序列化程序查找名称为 ArrayOfY 的元素。

# html - 用于键盘导航的 tabindex 或焦点

> ID：13047416
> 
> 赞同：5
> 
> 时间：2012-10-24T10:31:17.640
> 
> 标签：html, accessibility

目前，我在可访问性和 WCAG 方面做了大量工作，但我试图让所有用户，尤其是那些使用键盘导航的用户都能很好地工作的一件事是跳转到内容链接。

这听起来很简单，只需在页面顶部放置一个指向锚点的链接，人们就可以“点击”它来跳过导航或其他基本上不重要的内容。

但是，问题是，当您使用键盘“单击”锚链接然后再次点击“tab”键时，您会直接在“跳转到内容”链接之后进入元素，而不是主中的下一个元素内容区。即，您链接到的锚点尚未获得焦点。

这似乎是一个常见问题，因为我还没有找到一个带有“跳转到内容”链接的网站，它可以正常工作。甚至[Vision Australia](http://www.visionaustralia.org.au)网站也有这个问题。

我希望有人知道一种技术/黑客/库来完成这项工作。

**编辑**：我可以确认这个问题发生在 Chrome 和 Safari 中，但不是我 Mac 上的 Firefox。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T03:17:11.627

大多数浏览器在视觉上向下滚动到同一页面链接的目标，但实际上并没有将键盘焦点放在该链接上。您可以使用 JavaScript（或 JQuery，如下例所示）将焦点放在目标上：

```
$("a[href^='#']").not("a[href]='#'").click(function() {
   $("#"+$(this).attr("href").slice(1)+"").focus();
}); 
```

但是，WebKit 中存在一个错误，即使该解决方案也无法在 Chrome 和 Safari 等 WebKit 浏览器中运行。大约一年前，我写了一篇关于此的博客文章，其他几篇文章也以此为基础：

*   [特里尔汤普森博客文章](http://terrillthompson.com/blog/161)
*   [更多来自 Damon Muma](http://whatisdamon.com/blog/2012/01/why-your-skip-to-content-link-might-not-work/)
*   [Zegnat 的纯 JavaScript 解决方案](https://gist.github.com/1900563)
*   [WebKit 错误报告](https://bugs.webkit.org/show_bug.cgi?id=17450)
*   [铬气泡报告](http://code.google.com/p/chromium/issues/detail?id=37721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T10:20:34.970

您可以在要接收下一个焦点的内容上方放置另一个元素。然后跳到该元素并使用 diff 方式将其从视图中隐藏，例如 font-size 0 或没有内容的 ap 标记等。

```
<div class="skip-nav-container">
  <a class="skip-to-main-content" href="#mainContent">Skip to main content</a>
</div>

<nav>
<!--skip this content-->
</nav>

<div class="skip-nav-target">
  <p class="skip-nav-target-content" id="mainContent"></p>
</div>
<main>
<!--next element in the main content area-->
<!--main content-->
</main> 
```

# android - Android ActionBar Sherlock - 完全删除选项卡之间的分隔线

> ID：13047417
> 
> 赞同：3
> 
> 时间：2012-10-24T10:31:18.350
> 
> 标签：android, actionbarsherlock

我正在尝试完全删除 ActionBar（实际上是 ActionBarSherlock）中选项卡之间的分隔线；即选项卡之间没有图像，选项卡之间也没有间隙（我在选项卡中使用平铺图像背景）。理想情况下，我希望在 XML 中删除分隔符，而不是在代码中。

我尝试了几种方法，但似乎没有任何效果，例如：

```
<style name="Theme.MyTheme.ActionBarTab" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:divider">@null</item>
    <item name="divider">@null</item>
    <item name="actionBarDivider">@drawable/empty</item>
    <item name="android:showDividers">none</item>
</style> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T11:04:26.863

原来我设置了错误的样式。该`android:showDividers`属性确实有效，但是当它应用于从样式继承的`Widget.Sherlock.ActionBar.TabBar`样式时。所以 XML 的相关位是：

```
<style name="Theme.Client" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionBarTabBarStyle">@style/Theme.Client.ActionBarTabBar</item>
    <item name="actionBarTabBarStyle">@style/Theme.Client.ActionBarTabBar</item>
</style>

<style name="Theme.Client.ActionBarTabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:background">@drawable/tab_bar_bg_tiled</item>
    <item name="background">@drawable/tab_bar_bg_tiled</item>
    <item name="android:showDividers">none</item>
</style> 
```

# android - 用于测试 android 客户端应用程序的自定义 Web 服务

> ID：13047418
> 
> 赞同：0
> 
> 时间：2012-10-24T10:31:19.917
> 
> 标签：android, web-services, rest, testing

我想知道是否有一种免费的网络服务，我可以在其中添加我的简单服务器应用程序，它将回答我的 android 应用程序的请求......我需要这个用于测试目的。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:36:43.707

是的！如果您使用的是[KSoap](http://ksoap2.sourceforge.net/)库，[这里](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)有一个创建和测试 Web 服务的教程，该服务将把摄氏度转换为华氏温度，然后再转换回来。

**在线程启动器的一些评论后编辑**

如果你自己写了你的webservice并想托管它，我推荐使用windows下的IIS，如果服务是用WCF写的

[IIS 7.5 简介](http://www.codeproject.com/Articles/290238/Getting-Started-with-IIS-7-5-and-ASP-NET-2-0-Class)

您还可以在 Windows Azure 上托管 Web 服务

[关于此主题的 Stackoverflow 帖子](https://stackoverflow.com/questions/4312343/hosting-wcf-service-on-azure)

# .htaccess - 使用 .htaccess 将非 www 重定向到 www，包括 .co.uk 之后的句点

> ID：13047421
> 
> 赞同：0
> 
> 时间：2012-10-24T10:31:37.890
> 
> 标签：.htaccess, mod-rewrite

我的 htaccess 文件中有以下重写规则，这是我在网站上发现的建议（我不再记得了）。

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www.example.co.uk)?$ [NC]
RewriteRule (.*) http://www.example.co.uk/$1 [R=301,L] 
```

我正在测试这些组合以查看重定向是如何工作的，这些是结果

```
example.co.uk/foo/bar.html to www.example.co.uk/foo/bar.html
example.co.uk./foo/bar.html to www.example.co.uk/foo/bar.html
example.co.uk:80/foo/bar.html to www.example.co.uk/foo/bar.html
example.co.uk/ to www.example.co.uk
example.co.uk./ to www.example.co.uk
example.co.uk:80/ to www.example.co.uk
example.co.uk to www.example.co.uk
example.co.uk:80 to www.example.co.uk 
```

唯一没有工作的是**`example.co.uk. to example.co.uk.`**

我不知道如何改变这个条件来处理这个单一的场景，并希望得到一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:08:40.847

如果您只是在 example.co.uk 之后添加点和 a ，它不会起作用吗？然后？像这样：

```
RewriteCond %{HTTP_HOST} !^(www.example.co.uk)?.?$ [NC] 
```

# javascript - 显示更多选项的复选框

> ID：13047428
> 
> 赞同：0
> 
> 时间：2012-10-24T10:32:03.957
> 
> 标签：javascript, coldfusion

我正在使用 ColdFusion 8 创建一个搜索表单，并希望用户能够选中一个框，如果他们希望出现高级搜索选项。

这是我到目前为止所拥有的：

在我的 javascript 文件中：

```
function showDiv(advancedVal)
{  
  if(advancedVal == '') {
    $('moreOptions').style.display = "";
  } else {
    $('moreOptions').style.display = "none";
  }
} 
```

在我的 CF 文件中：

```
<input name="advanced" type="checkbox" value="" id="advanced" onclick="showDiv('');">

<div id="moreOptions" style="display:none;" class="moreOptions">
<table>
drop down boxes
</table>
</div> 
```

复选框在另一个表中，这有关系吗？

任何人都知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:34:34.683

你在使用 jQuery 吗？那么它应该是：

`$('moreOptions').style.display = ""`应该`$('#moreOptions').show()`

或者

`$('moreOptions')[0].style.display = ""`

**UPD**

我想这就是你想要的：

```
function showDiv(obj) {
    var more = document.getElementById('moreOptions');
    more.style.display = obj.checked ? "" : "none";
}​ 
```

并更改您的标记：

```
<input name="advanced" type="checkbox" value="" id="advanced" onchange="showDiv(this)"> 
```

见演示[http://jsfiddle.net/dfsq/Kexbu/2/](http://jsfiddle.net/dfsq/Kexbu/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:35:35.267

更改`$('moreOptions')`为`$('#moreOptions')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:43:25.230

如果你不使用 jQuery，你的代码应该是：

```
function showDiv(advancedVal)
{  
  if(advancedVal) {
    document.getElementById('moreOptions').style.display = "";
  } else {
    document.getElementById('moreOptions').style.display = "none";
  }
} 
```

和

```
<input name="advanced" type="checkbox" value="" id="advanced" onchange="showDiv(this.checked)"> 
```

这是一个例子：http: [//jsfiddle.net/XN8aK/1/](http://jsfiddle.net/XN8aK/1/)

# javascript - 如何在 javascript 获取的 textarea 数据上添加标签/图像？

> ID：13047433
> 
> 赞同：1
> 
> 时间：2012-10-24T10:32:13.807
> 
> 标签：javascript, css, onclick, textarea

我有这个 javascript 函数，它放置了一个`--- quote ----`人们可以在网站上使用的 double。我的目标是用我已经拥有的图像或块引用（使用 CSS 样式）替换 ---quote---。因此，如果有人点击按钮，他们必须得到一个引用图像或块引用，这将在 textarea 上可见。问题是我无法让它工作。

```
<input type="button" onclick="hen('d','--- (<? echo $language[quote2] ?>: <? echo $language[quote] ?>) ---\n\r','\n\r--- (<? echo $language[quote2] ?>: <? echo $language[quote] ?>) ---\r')" value="- <? echo $language[quote] ?> -" /> 
```

例如，这是我尝试过的，它不再显示按钮。

```
<input type="button" onclick="hen('d','--- (<blockquote id="entry"><? echo $language[quote2] ?>: <? echo $language[quote] ?></blockquote) ---\n\r','\n\r--- (<? echo $language[quote2] ?>: <? echo $language[quote] ?>) ---\r')" value="- <? echo $language[quote] ?> -" /> 
```

我怎样才能让它工作我的朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:04:19.923

好吧，我可以告诉你为什么按钮至少消失了。您通过在双引号中列出 blockquote id 来打破 onclick 属性。试试这个，看看它会把你带到哪里：

```
<input type="button" onclick="hen('d','--- (<blockquote id=\'entry\'><? echo $language[quote2] ?>: <? echo $language[quote] ?></blockquote) ---\n\r','\n\r--- (<? echo $language[quote2] ?>: <? echo $language[quote] ?>) ---\r')" value="- <? echo $language[quote] ?> -" /> 
```

尽管如果您尝试将 HTML 元素插入到 Textarea 中，我认为这是不可能的。您可能想尝试使用 a`<div contenteditable="true"></div>`代替（当然，这只适用于支持 contenteditable 属性的浏览器。

# ajax - 嵌套模型不绑定

> ID：13047436
> 
> 赞同：3
> 
> 时间：2012-10-24T10:32:42.110
> 
> 标签：ajax, asp.net-mvc-3, model-binding

我想将 JSON 数据结构传递给 MVC (3) 控制器，将 JSON 对象转换为 C# 对象，并绑定所有属性。其中一个属性是简单类型。这是基本的模型绑定，对吧？

这是我的模型：

```
public class Person
{
    public string Name { get; set; }
    public JobTitle JobTitle { get; set; }
}

public class JobTitle
{
    public string Title { get; set; }
    public bool IsSenior { get; set; }
} 
```

这是我的 Index.cshtml 页面（它发出一个 AJAX 请求，传入一个与“Person”类的结构匹配的 JSON 对象）：

```
<div id="myDiv" style="border:1px solid #F00"></div>
<script type="text/javascript">
var person = { 
        Name: "Bob Smith",
        JobTitle: { 
            Title: "Developer",
            IsSenior: true
        } 
    };

$.ajax({
    url: "@Url.Action("ShowPerson", "Home")",
    data: $.param(person),
    success: function (response){
        $("#myDiv").html(response);
    },
    error: function (xhr) {
        $("#myDiv").html("<h1>FAIL</h1><p>" + xhr.statusText + "</p>");
    }
});
</script> 
```

我的 HomeController 看起来像这样：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult ShowPerson(Person person)
    {
        return View(person);
    }
} 
```

暂时忽略“ShowPerson.cshtml”文件，因为问题发生在需要之前。

在 HomeController.ShowPerson 动作中，“person.Name”属性被正确绑定，“person.JobTitle”对象（包含“Title”和“IsSenior”属性）被实例化，但仍具有“Title = null”的默认值和“IsSenior = false”。

我确定我过去已经毫无问题地完成了嵌套模型绑定。我错过了什么？任何人都可以解释为什么模型绑定似乎只能工作一层吗？

我已经搜索过了，似乎其他人在从表单发送数据时都遇到了绑定问题，所以也许我的 $.ajax() 请求中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:41:40.990

好的，你需要做一些改变，

*   将**数据类型**设置为`json`
*   将**contentType**设置为`application/json; charset=utf-8`.
*   使用[**JSON.stringify()**](http://msdn.microsoft.com/en-us/library/cc836459%28v=vs.94%29.aspx)

下面是修改后的代码。（*经测试*）

```
var person = { 
    Name: "Bob Smith",
    JobTitle: { 
        Title: "Developer",
        IsSenior: true
    } 
};

var jsonData = JSON.stringify(person);

$.ajax({
  url: "@Url.Action("ShowPerson", "Home")",
  data: jsonData,
  dataType: 'json',
  type: 'POST',
  contentType: "application/json; charset=utf-8",

  success: function (response){
    $("#myDiv").html(response);
  },
  error: function (xhr) {
    $("#myDiv").html("<h1>FAIL</h1><p>" + xhr.statusText + "</p>");
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:43:05.510

将内容类型添加到 ajax

```
contentType: "application/json; charset=utf-8",
dataType: 'json',
type: 'POST',
data: $.toJSON(person); 
```

# python - 从 Objective-C 调用 Python 代码

> ID：13047438
> 
> 赞同：2
> 
> 时间：2012-10-24T10:33:03.783
> 
> 标签：python, objective-c, nsbundle

我正在寻找从 Objective-C 程序中调用 Python 代码的最佳方式。几个细节：

*   Python 的代码根本不使用 PyObjC，只是 Python 的基础。
*   有几个 Python 文件，每个文件都具有相似的功能（也称为“主题变体”）。

# NSBundle

将每个 *.py 封装到 *.bundle 是我想到的第一件事。

PythonClass.py：

```
import objc
NSObject = objc.lookUpClass('NSObject')

class PythonClass(NSObject):
    def Function(self):
        print("Python is speaking!") 
```

设置.py：

```
from distutils.core import setup
import py2app

setup(
    plugin = ['PythonClass.py'],
) 
```

终端命令：`python setup.py py2app -s -p objc`

它工作正常，但有几个问题：

*   **大 *.bundle 大小**。即使[Foundation 没有导入](http://www.hardcoded.net/articles/embedded-pyobjc)，并且 bundle 是半独立的（标志“-s”），*.bundle 的大小约为 1MB。有没有其他方法可以减小尺寸？
*   **PyObjC 依赖**。类不使用 objc，但如果我们不子类化`NSObject`，那么在 Objective-C 方面，`[bundle principalClass]`是`(Null)`并且`PythonClass`不能被实例化。有没有办法避免`NSObject`在 *.py 中使用？

# CFBundle

我也一直在考虑使用`CFBundle`，但`CFBundleGetFunctionPointerForName(...)`总是返回`NULL`（当然，在这种情况下，*.py 包含一个函数，而不是一个类）。我找不到关于这件事的任何材料。也许你们中的一些人更幸运。

有没有更好的方法将 Python 嵌入到 Objective-C 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:56:00.563

使用 Python/C API（Python 和 C 之间的桥梁）、调用 Python 代码的 C++ 类（OOP 层，便于管理）和[这种](https://stackoverflow.com/questions/496664)方法将 C++ 类放入 CFBundle。

如有必要，这也适用于动态库 (*.dylib) 而不是 CFBundle。

# java - 如何访问 Facelets 页面中的会话属性

> ID：13047446
> 
> 赞同：9
> 
> 时间：2012-10-24T10:33:54.030
> 
> 标签：java, jsf, session, login, facelets

我已经使用 JSF 和 PrimeFaces 实现了一个登录表单。我在 PrimeFaces 展示网站中使用了[这个示例。](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)

我有一个 Facelets 页面来显示一个数据表。现在我需要将上面的登录表单与这个表格页面整合起来。所以我在 LoginBean.java 中添加了几行来处理会话属性。

```
 if (username.equals(getUsername_db()) && password.equals(getPassword_db())) {//valid user and paward
        loggedIn = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", getUsername_db());
        //new lines
        FacesContext context2 = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context2.getExternalContext().getSession(true);
        session.setAttribute("user", username);
        //end of new lines
        ... 
```

如果用户未登录，我需要从数据表中隐藏一列。现在我的问题是，如何访问我的 Facelets 页面中的会话属性？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T10:57:09.290

您已将登录用户存储为名称为“user”的会话属性。

所以它在 EL 中可用如下：

```
#{user} 
```

您可以只使用`empty`EL 中的关键字来检查它是否存在（即是否已登录），您可以使用 JSF 组件的`rendered`属性来指示是否生成 HTML 输出。

```
<h:panelGroup rendered="#{not empty user}">
    <p>Welcome #{user}, you have been logged in!</p>
</h:panelGroup> 
```

在您隐藏表格列的特定情况下，只需按如下方式使用它：

```
<p:column rendered="#{not empty user}">
    ...
</p:column> 
```

存储会话属性的更好方法是使用`ExternalContext#getSessionMap()`. 这样你的代码就没有臭味的`javax.servlet.*`进口了。

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("user", username); 
```

* * *

**与具体问题无关**，为什么要进行以下检查？

```
if (username.equals(getUsername_db()) && password.equals(getPassword_db())) { 
```

你为什么不只是`SELECT ... FROM user WHERE username=? AND password=?`在 SQL 中做一个？还是您不相信它返回正确行的数据库？

# node.js - 节点快捷方式或 BAT

> ID：13047447
> 
> 赞同：0
> 
> 时间：2012-10-24T10:33:58.523
> 
> 标签：node.js, batch-file, shortcut

我厌倦了手动输入路径并在命令提示符下运行。

这是我需要的：

1.  运行命令提示符
2.  `cd c:\socket\nodejs`
3.  执行`node test.js`

如何为此创建 BAT 或快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:48:05.327

只需创建一个快捷方式来创建一个`cmd`窗口并将其工作目录设置为`c:\socket\nodejs`. 在开发过程中保持窗口打开。您还可以将快捷方式复制到您的启动目录中，以便在您登录时打开该窗口。

# python - 在 OSX 上安装 pycrypto 时，链接器命令在 fastmath 中失败

> ID：13047450
> 
> 赞同：1
> 
> 时间：2012-10-24T10:34:08.570
> 
> 标签：python, pip, fabric, pycrypto

我做了`pip install pycrypto`（实际上想安装`fabric`，但在 pycrypto 上失败了）并得到了下面的错误。我在 python 2.7.3 上。也试过3.3，但同样的错误。请问我该如何解决？

我的铿锵版本：

```
$ clang --version
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix 
```

错误：

```
...

creating build/lib.macosx-10.7-x86_64-2.7/Crypto/Signature

copying lib/Crypto/Signature/__init__.py -> build/lib.macosx-10.7-x86_64-2.7/Crypto/Signature

copying lib/Crypto/Signature/PKCS1_PSS.py -> build/lib.macosx-10.7-x86_64-2.7/Crypto/Signature

copying lib/Crypto/Signature/PKCS1_v1_5.py -> build/lib.macosx-10.7-x86_64-2.7/Crypto/Signature

running build_ext

running build_configure

building 'Crypto.PublicKey._fastmath' extension

creating build/temp.macosx-10.7-x86_64-2.7

creating build/temp.macosx-10.7-x86_64-2.7/src

cc -fno-strict-aliasing -fno-common -dynamic -I/usr/local/include -Wall -Wstrict-prototypes -std=c99 -O3 -fomit-frame-pointer -Isrc/ -I/usr/include/ -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_fastmath.c -o build/temp.macosx-10.7-x86_64-2.7/src/_fastmath.o

src/_fastmath.c:1545:20: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]

                        else if (result < 0)

                                 ~~~~~~ ^ ~

src/_fastmath.c:1621:20: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]

                        else if (result < 0)

                                 ~~~~~~ ^ ~

2 warnings generated.

cc -bundle -undefined dynamic_lookup -L/usr/local/lib build/temp.macosx-10.7-x86_64-2.7/src/_fastmath.o -lgmp -o build/lib.macosx-10.7-x86_64-2.7/Crypto/PublicKey/_fastmath.so

ld: illegal text-relocation to ___gmp_binvert_limb_table in /usr/local/lib/libgmp.a(mp_minv_tab.o) from ___gmpn_divexact_1 in /usr/local/lib/libgmp.a(dive_1.o) for architecture x86_64

clang: error: linker command failed with exit code 1 (use -v to see invocation)

error: command 'cc' failed with exit status 1

----------------------------------------

Command /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-build/pycrypto/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-riA3zG-record/install-record.txt --single-version-externally-managed failed with error code 1 in /var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-build/pycrypto

Exception information:
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/basecommand.py", line 107, in main
    status = self.run(options, args)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/commands/install.py", line 261, in run
    requirement_set.install(install_options, global_options)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/req.py", line 1166, in install
    requirement.install(install_options, global_options)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/req.py", line 589, in install
    cwd=self.source_dir, filter_stdout=self._filter_install, show_stdout=False)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/util.py", line 612, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-build/pycrypto/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-riA3zG-record/install-record.txt --single-version-externally-managed failed with error code 1 in /var/folders/_2/fwbd8jjn0mj_y_9w4f31g2nm0000gn/T/pip-build/pycrypto 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:19:02.787

我使用的是 HPC 版本的 gcc。所以我删除了它并在 Xcode 中重新安装了命令行工具。然后我就可以安装pycrypto和fabric了。

# classification - 使用 RapidMiner 设计聚类过程

> ID：13047452
> 
> 赞同：1
> 
> 时间：2012-10-24T10:34:13.957
> 
> 标签：classification, cluster-analysis, data-mining, decision-tree, rapidminer

我在机器学习或集群方面没有太多经验，所以我对如何解决这个问题有点茫然。我感兴趣的数据由 4 列组成，其中一列只是一个 id。其他 3 个包含数值数据，值 >= 0。我需要的聚类实际上非常简单，我可以手动完成，但稍后会变得不太清楚，所以我想从正确的过程开始。我需要 6 个集群，它们取决于 3 列（称为 A、B 和 C），如下所示：

```
A    B    C        Cluster
---- ---- -------- -------
0    0    0        0
0    0    >0       1
0    >0   <=B      2
0    >0   >B       3
>0   any  <=(A+B)  4
>0   any  >(A+B)   5 
```

在这个阶段，这些集群将洞察数据，为进一步分析提供信息。

由于我对此很陌生，我还没有充分了解进行聚类的各种算法，所以我真的不知道从哪里开始。任何人都可以建议使用合适的模型，或者我可以研究的一些模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:52:11.613

这对我来说看起来**不像****集群**。

相反，我认为您需要一个简单的**决策树分类**。

它应该已经在 Rapidminer 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:15:04.183

您可以使用“生成属性”运算符。

这会从现有属性创建新属性。

创建所有规则会相对令人厌烦，但它们会像

集群：如果 (((A==0)&&(B==0)&&(C==0)),1,0)

# java - Scala Seq.grouped 吃掉我的迭代器

> ID：13047454
> 
> 赞同：3
> 
> 时间：2012-10-24T10:34:22.463
> 
> 标签：java, scala, iterator

作为一名 C# 程序员，我对 Java / Scala 迭代器设计有一个粗略的了解。

我正在尝试（懒惰地-因为来源可能很大）从`RecordReader`（在某些第三方库中）读取记录。我需要每 100 条记录做一些额外的工作。

```
for (group <- reader.iterator.zipWithIndex.grouped(100)) {
  for ((record, i) <- group) {
    println(i + "|" + record.key)
  }
  // ...
} 
```

这给了我最后的记录，重复，每次。

如果我不使用`grouped`，它可以正常工作并且我得到每条记录。我是否缺少有关延迟流或 Java 迭代器的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:05:34.557

要进行故障排除，请尝试在另一个迭代器中装饰您的迭代器，以打印正在发生的事情：

```
def wrap[T](i: Iterator[T]) = new Iterator[T] {
  def hasNext = { val b = i.hasNext; println("hasNext => " + b); b }
  def next() = { val n = i.next(); println("next() => " + n); n }
}

val reader = Iterator.from(20).take(10).toList
for (group <- wrap(reader.iterator).zipWithIndex.grouped(5)) {
  for ((v, i) <- group) println("[" + i + "] = " + v)
} 
```

在迭代器上调用 wrap，第一次实例化迭代器。这将打印如下内容：

```
hasNext => true
hasNext => true
next() => 20
hasNext => true
next() => 21
hasNext => true 
```

这应该可以帮助您确定迭代器是否表现不佳......例如，库可能无法正确处理`hasNext`多次调用而不调用`next`. 在这种情况下，您可以进行修改`wrap`以使迭代器行为正确。还有一件事，从症状来看，感觉就像您在调用分组之前已经使用了迭代器。所以要格外小心，检查你之前是否使用过相同的迭代器引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:15:11.340

我认为问题可能是`Record.key`只返回一些变量的当前值，这些变量在迭代器被消耗时发生了变异（而不是让记录在构造时实际捕获键值）。一个例子可能会使它更清楚。首先，让我们使用 scala REPL 编写一些**没有**出现问题的测试代码：

```
case class Record( key: Int )
def getRecordIterator: Iterator[Record] = {
  var currentKey: Int = 0
  (1 to 10).iterator.map{ i => 
    currentKey += 1
    new Record( currentKey )
  }
} 
```

然后我们可以尝试在不使用的情况下进行迭代`grouped`：

```
for ((record, i) <- getRecordIterator.zipWithIndex) {
  println(i + "|" + record)
} 
```

这给了我们（如预期的那样）

```
0|Record(1)
1|Record(2)
2|Record(3)
3|Record(4)
4|Record(5)
5|Record(6)
6|Record(7)
7|Record(8)
8|Record(9)
9|Record(10) 
```

然后使用`grouped`：

```
for (group <- getRecordIterator.zipWithIndex.grouped(3)) {
  for ((record, i) <- group) {
    println(i + "|" + record)
  }
  println("---")
} 
```

这使：

```
0|Record(1)
1|Record(2)
2|Record(3)
---
3|Record(4)
4|Record(5)
5|Record(6)
---
6|Record(7)
7|Record(8)
8|Record(9)
---
9|Record(10)
--- 
```

到现在为止，一切都很好。

`Record`现在让我们稍微改变一下定义：

```
trait Record {
  def key: Int
  override def toString = "Record(" + key + ")"
}
def getRecordIterator: Iterator[Record] = {
  var currentKey: Int = 0
  (1 to 10).iterator.map{ i => 
    currentKey += 1
    new Record{ def key = currentKey }
  }    
} 
```

有了这个改变，我们在不使用时仍然有相同的结果`grouped`，但这是我们在使用时得到的结果`group`：

```
0|Record(3)
1|Record(3)
2|Record(3)
---
3|Record(6)
4|Record(6)
5|Record(6)
---
6|Record(9)
7|Record(9)
8|Record(9)
---
9|Record(10)
--- 
```

问题的根源在于，仅调用`next`我们的迭代器就会改变`Record.get`. 这个问题可以更简单地说明：

```
val it = getRecordIterator
val r1 = it.next
println(r1) // prints "Record(1)" as expected
val r2 = it.next
println(r2) // prints "Record(2)" as expected
println(r1) // this now prints "Record(2)", not "Record(1)" anymore! 
```

# websphere-mq-fte - wmq-fte 预调用 java 失败

> ID：13047456
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:34:31.467
> 
> 标签：websphere-mq-fte

我正在使用 Websphere MQ 7.5 实现 FTE 网络。

我已经开发了一个 java 程序作为 precall tr​​ansfert 运行。这是我的程序：我已经用 java.exe 的路径更新了 agent.properties 文件重新启动我的代理创建一个新的 transfert 在调用面板中，我配置了一个预调用：程序：java 参数：-jar c:\PATH\TO\ MY\JAR\myJar.jar myArgument

transfert 失败，显示的错误就像 java 没有收到任何参数。

当我在 Windows 提示符下测试我的命令时，它可以工作。

此外，我的第一次尝试是运行包含 java 命令的批处理脚本，但它也不起作用。

我不想使用退出，因为该程序特定于传输。

编辑：我测试了一个简单的 java -version 命令，它可以工作。

```
 <preSourceCall>
  <command name="java" retryCount="0" retryWait="0" successRC="0" type="executable">
    <argument>-jar C:\mqfteTest\ExitsJava.jar C:\mqfteTest\userExitTest\FileRef_20121023.txt</argument>
  </command>
</preSourceCall> 
```

返回错误：

```
 <callResult outcome="failure" retries="0">
    <result outcome="failure" returnCode="1" time="2012-10-24T12:39:52.419Z">
      <stdout>
        <line/>
        <line>Syntaxe : java [-options] class [args...]</line>
        <line>           (pour l'ex‚cution d'une classe)</line>
        <line>   ou  java [-jar] [-options] jarfile [args...]</line>
         ...
       <line>JVMJ9VM007E Option de ligne de commande non identifiee : -jar C:\mqfteTest\ExitsJava.jar C:\mqfteTest\userExitTest\FileRef_20121023.txt</line>
        <line>Could not create the Java virtual machine.</line>
      </stderr> 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:17:54.337

I am not quite sure if I have understood the question. Assuming your aim is to invoke Java class before the transfer begins, you can use MFT exits to achieve that. Here is a [link](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.wmqfte.doc/sample_source_end_exit.htm) to WMQ MFT v7.5 sample source end user exit.

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:43:20.663

我终于设法执行了我的预调用：

对于 Windows 平台，我使用了一个批处理脚本，并将脚本和 jar 放在一个文件夹中，路径中没有空格。

我没有设法使用 java 命令，将打开 PMR 以了解原因。

编辑 ：

终于明白为什么了！！事实上，所谓的“argumentS”（在 precall conf 中）实际上只是一个论点。

我还设法将我的 precall 部署在 iseries as400 上。

命令行是相同的，但 shell 的声明必须是

```
 #!/QOpenSys/usr/bin/sh 
```

使用 #!/bin/sh wmq-fte 无法捕获程序的退出

现在一切都很好。

我还发现了一个奇怪的行为（它将针对另一个 PMR）：

当要发送的文件位于命令路径的子目录中时，传输失败。

希望这会对某人有所帮助。

问候

# python - 使用 Twisted 限制带宽

> ID：13047458
> 
> 赞同：10
> 
> 时间：2012-10-24T10:34:34.377
> 
> 标签：python, twisted, bandwidth-throttling

我正在尝试设置下载/上传文件的速度限制，发现twisted 提供了[twisted.protocols.policies.ThrottlingFactory](http://twistedmatrix.com/documents/current/api/twisted.protocols.policies.ThrottlingFactory.html)来处理这项工作，但我做错了。我设置了`readLimit`and `writeLimit`，但文件仍在以最大速度下载。我究竟做错了什么？

```
from twisted.protocols.basic import FileSender
from twisted.protocols.policies import ThrottlingFactory
from twisted.web import server, resource
from twisted.internet import reactor
import os

class DownloadPage(resource.Resource):
    isLeaf = True

    def __init__(self, producer):
        self.producer = producer

    def render(self, request):
        size = os.stat(somefile).st_size
        request.setHeader('Content-Type', 'application/octet-stream')
        request.setHeader('Content-Length', size)
        request.setHeader('Content-Disposition', 'attachment; filename="' + somefile + '"')
        request.setHeader('Accept-Ranges', 'bytes')

        fp = open(somefile, 'rb')
        d = self.producer.beginFileTransfer(fp, request)

        def err(error):
            print "error %s", error

        def cbFinished(ignored):
            fp.close()
            request.finish()
        d.addErrback(err).addCallback(cbFinished)

        return server.NOT_DONE_YET

producer = FileSender()
root_resource = resource.Resource()
root_resource.putChild('download', DownloadPage(producer))
site = server.Site(root_resource)
tsite = ThrottlingFactory(site, readLimit=10000, writeLimit=10000)
tsite.protocol.producer = producer
reactor.listenTCP(8080, tsite)
reactor.run() 
```

**更新**

所以在我运行它之后的某个时候：

```
2012-10-25 09:17:03+0600 [-] Unhandled Error
Traceback (most recent call last):
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/application/app.py", line 402, in startReactor
        self.config, oldstdout, oldstderr, self.profiler, reactor)
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/application/app.py", line 323, in runReactorWithLogging
        reactor.run()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/internet/base.py", line 1169, in run
        self.mainLoop()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/internet/base.py", line 1178, in mainLoop
        self.runUntilCurrent()
    --- <exception caught here> ---
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/internet/base.py", line 800, in runUntilCurrent
        call.func(*call.args, **call.kw)
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/protocols/policies.py", line 334, in unthrottleWrites
        p.unthrottleWrites()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/protocols/policies.py", line 225, in unthrottleWrites
        self.producer.resumeProducing()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/protocols/basic.py", line 919, in resumeProducing
        self.consumer.unregisterProducer()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/web/http.py", line 811, in unregisterProducer
        self.transport.unregisterProducer()
      File "/home/chambylov/environments/transfer/local/lib/python2.7/site-packages/twisted/protocols/policies.py", line 209, in unregisterProducer
        del self.producer
    exceptions.AttributeError: ThrottlingProtocol instance has no attribute 'producer' 
```

我知道我不应该像我知道的那样分配生产者`tsite.protocol.producer = producer`，我是 Twisted 的新手，我不知道如何以另一种方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:51:32.143

[每个生产者都需要（最终）注册您想要使用数据的任何内容](http://twistedmatrix.com/documents/current/core/howto/producers.html)。我在这里看不到任何地方的注册。也许这就是你遇到的问题？

Twisted 已经在 Friendster 等一些大型项目中使用过，但是所有的回调都不适合我用 python 编写的通常方式（而且我有一些函数式编程经验）。我切换到[gevent](http://www.gevent.org/)。

如果您正在使用 gevent 库，则许多细节（提供异步功能的回调/生成器）都被抽象出来，因此您通常可以只用猴子修补您的代码并以您通常的面向对象风格编写它用于。如果您正在与不熟悉 js/lisp 之类的大量回调语言的人一起进行项目，我敢打赌他们会喜欢 gevent 而不是 twisted。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T11:09:22.173

正如[egbutter](https://stackoverflow.com/a/13647506/2069071)所说，您必须注册生产者。所以代替这个：

```
tsite.protocol.producer = producer 
```

您必须显式调用**registerProducer**方法：

```
tsite.protocol.registerProducer( ... ) 
```

或者，如果您使用**FileSender**作为生产者，调用它的**beginFileTransfer**方法，在我们的例子中：

```
file_to_send = open( ... )
producer.beginFileTransfer(file_to_send, tsite.protocol) 
```

# objective-c - iOS替换html实体

> ID：13047463
> 
> 赞同：0
> 
> 时间：2012-10-24T10:34:49.000
> 
> 标签：objective-c, ios, automatic-ref-counting, html-entities

我看到了这段代码[https://gist.github.com/takuma104/ntlniph/blob/master/gtm/Foundation/GTMNSString+HTML.h](https://gist.github.com/takuma104/ntlniph/blob/master/gtm/Foundation/GTMNSString+HTML.h)

但它不适用于启用 ARC 的项目，或者至少在没有额外移植的情况下。如果我想用相应的符号替换 HTML 实体，你建议我应该怎么做？解析为 XML 不是一个选项，因为 HTML 可能不是有效的 XML。

我在想有一些匹配实体的正则表达式，并有一个块来处理每个匹配并用字符替换它。

还有实体代码和值之间的映射的内置结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:31:46.737

您仍然可以在 ARC 项目中使用不支持 ARC 的代码。您可以在项目的“构建阶段”的“编译源”部分中为特定文件禁用 ARC。选择要为其禁用 ARC 的文件，然后按 Enter。然后在出现的文本框中输入字符串“-fno-objc-arc”。

# javascript - 在 JavaScript 中创建 Array 实例时总是需要使用 new 吗？

> ID：13047467
> 
> 赞同：0
> 
> 时间：2012-10-24T10:35:03.993
> 
> 标签：javascript, arrays

> **可能重复：**
> [在 Javascript 中声明数组时要遵循的最佳实践是什么？](https://stackoverflow.com/questions/11500492/what-are-the-best-practices-to-follow-when-declaring-an-array-in-javascript)

*在使用[]*定义变量之后不要使用 new Array 是否正确？

```
var v = [];
v = Array(5); // is new necessary? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:36:53.293

第一行创建一个空数组。

第二个创建一个包含 5 个元素的数组，所有元素都具有 value `undefined`。

***两者都*用是没有意义**的。使用哪一种取决于您要做什么，但在实践中并不经常遇到第二种形式。第一个很可能就是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:38:33.830

您正在将 v 的值从长度为零的数组重新分配给长度为 5 的数组。这使得该`=[]`部分变得多余。

编辑：

这里的主要区别是可以修改 Array 构造函数的原型，因此最终得到的不一定与标准问题 javascript Array 相同。

当你使用 [] 赋值时，使用了一个内部构造函数，这意味着数组原型篡改不会影响你的新对象。例如，当您尝试调用 join 方法时，我可以设置`Array.prototype.join=function(){alert("duh");}`并且您构建使用的所有数组都会警告“duh”。`new Array(...)`使用分配的数组`[]`不受此影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:39:17.137

不，没有必要，因为两者都做同样的事情。基本上你应该做的是：

```
var v=[];  or var v=[value1, value2 ...]; 
```

定义数组的第二个版本有一些问题，例如：

`Array(4)`==> 创建一个空的 4 元素数组

`Array(4,5)`==> 创建一个包含 2 个元素（4 和 5）的数组

因此，如果您想创建一个 1 元素数组，它会在您的脸上爆炸。因此，建议使用第一个版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:42:12.967

`Array`简单的答案是，在声明中使用关键字几乎没有充分的理由，无论是：

```
var a = Array(n) 
```

或者

```
var a = new Array(n) 
```

只需使用：

```
var a = []; 
```

反而。

见[https://stackoverflow.com/a/11500550/6782](https://stackoverflow.com/a/11500550/6782)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T10:49:32.660

不必`new`与 Array 一起使用，我认为您可以在不使用`new`运算符的情况下创建 Array

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T11:06:49.447

您正在创建两个`Array`对象并丢弃一个，因此您所做的事情是不必要的。

声明变量并创建一个数组：

```
var v;
v = new Array(5); 
```

或者作为一个单一的陈述：

```
var v = new Array(5); 
```

创建数组的首选方法是`new Array`在您想要指定大小时使用，当您想要从项目创建数组时使用数组文字：

```
var a1 = new Array(42); // creates an array with 42 undefined items
var a2 = [1, 2, 3]; // creates an array with the 3 items 
```

对于零大小的数组，您可以使用：

```
var a1 = new Array(); // creates an empty array
var a2 = []; // creates an empty array 
```

构造`Array`函数也可以获取项目列表，但应该避免使用，因为如果有一个项目并且该项目是数字的，它的行为会有所不同：

```
var a1 = new Array(100, 101, 102); // creates an array with three items
var a2 = new Array(100, 101); // creates an array with two items
var a3 = new Array(100); // creates an array with 100 undefined items 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-24T10:42:08.130

JavaScript - 与大多数语言不同 - 为您提供在需要时自我扩展的数组。但这并不意味着它没有成本。

*如果你有一个长度为 N 的数组并在索引 M >= N 处放置一些东西，它必须创建一个长度为 M - 1 的新数组，将 N 中的所有内容复制到其中，然后添加你的元素，这很慢。* **请注意，JavaScript 有非常多样化的实现，有些人只是将数组视为具有特殊长度属性的普通对象。**

因此，为避免这种情况，当您知道数组的大小但不知道它将包含什么时，您可以使用`new Array( size )`. 如果您知道它将包含什么，最好使用 litteral notation `[ item1, item2 ]`。如果你真的不知道，就放`[]`.

**添加**

# java - 显示照片内存不足

> ID：13047468
> 
> 赞同：6
> 
> 时间：2012-10-24T10:35:07.090
> 
> 标签：java, android, image

我正在使用一个对话框在我的 android 项目中显示图像。第一个打开正常，但是当我关闭它并再次执行该过程以显示不同的应用时，应用程序因内存错误而崩溃（它在三星 Galaxy s3 上运行 - 所以应该不是问题）。

**错误：**

```
10-24 11:25:45.575: E/dalvikvm-heap(29194): Out of memory on a 31961104-byte allocation.
10-24 11:25:45.580: E/AndroidRuntime(29194): FATAL EXCEPTION: main
10-24 11:25:45.580: E/AndroidRuntime(29194): java.lang.OutOfMemoryError
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:418)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.graphics.drawable.Drawable.createFromPath(Drawable.java:882)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.ImageView.resolveUri(ImageView.java:569)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.ImageView.setImageURI(ImageView.java:340)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at com.directenquiries.assessment.tool.AddAsset.loadPhoto(AddAsset.java:771)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at com.directenquiries.assessment.tool.AddAsset$11.onClick(AddAsset.java:748)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:936)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.AbsListView.performItemClick(AbsListView.java:1359)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2988)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.widget.AbsListView$1.run(AbsListView.java:3783)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.os.Handler.handleCallback(Handler.java:605)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.os.Looper.loop(Looper.java:137)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at android.app.ActivityThread.main(ActivityThread.java:4517)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-24 11:25:45.580: E/AndroidRuntime(29194):    at dalvik.system.NativeStart.main(Native Method) 
```

**加载代码：**

```
public void loadPhotoList(){

    Cursor f = db.rawQuery("select * from stationphotos where StationObjectID =  '"+ checkStationObjectID + "'", null);  
    final ArrayList<String> mHelperNames= new ArrayList<String>();

            if(f.getCount() != 0) {
              f.moveToFirst();

                f.moveToFirst();
                while(!f.isAfterLast()) {
                    mHelperNames.add(f.getString(f.getColumnIndex("FilePath")));
                    f.moveToNext();
                }
            }
     f.close();
     final String [] nameStrings = new String [mHelperNames.size()];

     for(int i=0; i<mHelperNames.size(); i++)
        nameStrings[i] = mHelperNames.get(i).toString();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Select Picture");
    builder.setItems(nameStrings, new DialogInterface.OnClickListener() {

       public void onClick(DialogInterface dialog, int item) {

          loadPhoto(mHelperNames.get(item).toString());

       }

    });

    AlertDialog alert = builder.create();

    alert.show();

 }

public void loadPhoto(String imagepath){

    Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.activity_show_image);
    dialog.setTitle("Image");
    dialog.setCancelable(true);

    ImageView img = (ImageView) dialog.findViewById(R.id.imageView1);
    img.setImageResource(R.drawable.ico_partial);
    Uri imgUri = Uri.parse(imagepath);
    img.setImageURI(imgUri);

    dialog.show();
} 
```

**编辑：**我现在用来使它工作的东西：

```
public static Bitmap decodeSampledBitmapFromFile(String imagePath, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imagePath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(imagePath, options);
}
    public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
}

img.setImageBitmap(decodeSampledBitmapFromFile(imagepath, 500, 500)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:58:55.337

我经历过这种情况，但我不知道我的答案是否是最佳实践......

这可能是你的问题：

```
Uri imgUri = Uri.parse(imagepath);
    img.setImageURI(imgUri); 
```

> 当我加载照片时，堆高达 44mb。

如果您加载一个大图像，那么您可能会耗尽内存。此外，如果在加载一系列图像时未能使用适当的内存管理，您将耗尽内存。

我使用[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)对文件进行解码，并使用[BitmapFactory.Options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)创建一个新的 sclaed 位图，然后将其显示在屏幕上。

这个想法是 BitmapFactory.Options 使您可以更好地控制图像可能使用的潜在内存。例如，无需在甚至不支持这些分辨率的屏幕上以全尺寸显示 1920x1080 图像。

有一些相关的 stackoverflow 问题可能会对您有所帮助，尤其是：[处理大型位图](https://stackoverflow.com/questions/2220949/handling-large-bitmaps)，重点关注 BitmapFactory.Options 选项`inJustDecodeBounds`。

最后，我发现了这个很棒的轻量级库[Aquery](http://code.google.com/p/android-query/)。它有一大堆处理大文件的方法，到目前为止它做得很好。很值得一看。它在 Web 开发方面使用与 Jquery 类似的范例（因此得名），并引入了更短的语法来操作视图。他们文档的以下部分涉及本地和远程源的图像加载，包括后备图像：

[http://code.google.com/p/android-query/wiki/ImageLoading](http://code.google.com/p/android-query/wiki/ImageLoading)

# ruby-on-rails - 未定义的局部变量或方法错误

> ID：13047469
> 
> 赞同：0
> 
> 时间：2012-10-24T10:35:09.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 ruby​​ on rails 项目中，我在`update`.

```
undefined local variable or method ` ' for #<ProfileController:0x007fd904dc8568>. 
```

但是，我在控制器中找不到**(` ')**。

**配置文件控制器#update**

```
def update       
   unless params[:sport_name].nil? 
     ps_array = params[:sport_name]
     level =[params[:level1],params[:level2],params[:level3]]
     # play_sports id 
     sp_id = [params[:sp_id1], params[:sp_id2], params[:sp_id3]]

     arr = [ps_array["1"],ps_array["2"],ps_array["3"]]
     sport_id = [params[:sport_id1],params[:sport_id2],params[:sport_id3]]
     check = [params[:check1], params[:check2], params[:check3]]

     if @user.play_sports.count != 0

       (0..2).each do |i|
           if (check[i].to_i == 1)
           PlaySport.where("id = ?", sp_id[i]).update_all(:is_active=>false)
           # new save 
           newuser_ps = PlaySport.new
           newuser_ps.sport_id = arr[i]
           newuser_ps.is_active = true
           newuser_ps.level = level[i]
           newuser_ps.user_id = current_user.id
           newuser_ps.save
         end
       end
     else         
       (0..2).each do |i|    
         newuser_ps = PlaySport.new
         newuser_ps.sport_id = arr[i]
         newuser_ps.level = level[i]
         newuser_ps.is_active = true
         newuser_ps.user_id = current_user.id
         newuser_ps.save
       end
     end        
   end

   respond_to do |format|        
   end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:04:42.140

这可能是您将其视为空间的隐形字符，但 ruby​​ 不是。通过在体面的编辑器中选择文本进行检查，这将显示它们是空格还是其他。

# javascript - 淘汰赛导致无法解析 foreach 循环中的绑定属性

> ID：13047473
> 
> 赞同：0
> 
> 时间：2012-10-24T10:35:26.030
> 
> 标签：javascript, html, knockout.js

**编辑：**回答我自己，错误是因为旧版本的淘汰赛，总是使用最新版本，并检查现有的！

我一直在关注淘汰赛教程，并尝试自己做一些事情，但得到了错误，即使我基本上有相同的代码。

```
<ul data-bind="foreach: tasks">
<li>
    <input data-bind="value: title" />
</li>
</ul>

   <script type="text/javascript">
        (function () {
            function Task(data) {
                this.title = ko.observable(data.contentName);
            }

            function TaskListViewModel() {
                // Data
                var self = this;
                self.tasks = ko.observableArray([]);

                // Load initial state from server, convert it to Task instances, then populate self.tasks
                $.getJSON('<%= Url.Action("GetContentList", "TranslateContentMenu") %>',
                    {
                        languageId: $('#LanguageIdNameValuePairs').val()
                    },  function (allData) {
                    var mappedTasks = $.map(allData, function (item) { return new Task(item) });
                    self.tasks(mappedTasks);
                });
            }

            var test = new TaskListViewModel();
            console.log(test);
            ko.applyBindings(new TaskListViewModel());
        }())
</script> 
```

我正在调用的服务返回此结果： [{"contentId":"1b07790c","contentName":"test"},{"contentId":"1b07790c","contentName":"test"},{"contentId ":"1b07790c","contentName":"test"}]

这是错误，直接从萤火虫控制台出来：错误：无法解析绑定属性。消息：ReferenceError：标题未定义；属性值：值：title

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:01:52.910

你不应该得到这样的错误，因为此时`tasks`数组应该是空的，并且敲除不应该生成`<li>`标签。确保您使用或不使用类似这样的东西来初始化`tasks`数组。`[]``nothing``[""]`

您也可以尝试使用空`Task`对象初始化任务：

```
self.tasks = ko.observableArray(new Task()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:04:49.313

我得到的错误是因为我使用的是淘汰赛 1.2.1，截至今天的最新版本是 2.1.0，升级淘汰赛使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:43:46.723

正如@Artem 在评论中指出的那样，这在他构建的 jsFiddle 中确实有效。我唯一能把它归结为你的 HTML 格式错误。你写了：

```
<ul data-bind="foreach: tasks">
<li>
    <input data-bind="value: title" />
</li> 
```

Knockout 不喜欢格式不正确的 HTML。你应该试试：

```
<ul data-bind="foreach: tasks">
<li>
    <input data-bind="value: title" />
</li>
</ul> 
```

# android - 在android上存储信用卡信息是否安全？

> ID：13047475
> 
> 赞同：5
> 
> 时间：2012-10-24T10:35:29.577
> 
> 标签：android, security, credit-card, keystore

在我的方法中，用户第一次想用信用卡付款，他必须重新输入他的登录密码和完整的信用卡信息。

支付成功后，我生成一个随机密钥，将其打包为密钥库，最后将密钥库文件存储在内部存储中，该密钥库文件由用户的登录密码锁定。另一方面，信用卡信息会被这个密钥加密，变成Base64编码的字符串，最后写入内部存储的文件中。

下次用信用卡付款时，用户还必须重新输入他的登录密码，这样我就可以用它来解锁密钥库文件并提取密钥。在这一点上，我有能力解密用户的信用卡信息。

以上是我保护存储在设备上的信用卡信息的方法，它安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:40:13.487

不要在设备上保存用户信用卡数据！只是没有办法让它安全。植根手机可以让应用程序更轻松地访问敏感数据。设备可能会丢失或被盗。您必须实现对服务器的安全用户登录并将 CC 数据存储在那里。

尝试使用这个[http://developer.authorize.net/downloads/](http://developer.authorize.net/downloads/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:55:39.267

看来我在帖子中的方法终于是我的答案了。

由于安卓对内部存储提供访问限制（[见此链接](http://developer.android.com/guide/practices/security.html#Data)），即使设备丢失或被盗，黑客仍然无法访问密钥库并通过暴力破解方法。

但还有另一个问题。

在有根电话中，“坏程序”可能会听软键盘，我应该做一些其他的学习工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:58:24.160

您永远不应该在用户设备上存储信用卡号。

PCI 需要每季度对您的加密元素进行一次密钥更改——那么您将如何实现呢？强制用户每 3 个月更改一次密码？如果他们从不登录来更改它怎么办？

您的方法极易受到攻击者成为“客户”以试图破坏您的系统的攻击——他将能够在自己的设备上正确执行此操作，而不会检测或抵抗他的攻击。然后他可以使用他学到的知识来攻击您其他客户的帐户。请让我们知道您正在开发的网站 - 如果您遵循这种设计方法，我想在您完成后远离它。

# android - 在应用程序启动时读取布局大小

> ID：13047480
> 
> 赞同：5
> 
> 时间：2012-10-24T10:35:42.110
> 
> 标签：android, android-layout, android-scrollview

我需要`ScrollView`在活动启动期间检索布局 xml 文件中定义的高度。这是实现这一点的最佳实践。我试过将代码放在`onCreate()`,`onStart()`和`onResume()`. All 在启动时将高度设为 0。有没有类似`onFinishInflate()`活动的方法？

这是我的代码：

```
myScroll=(ScrollView) findViewById(R.id.ScrollView01);
int height=myScroll.getHeight(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:47:36.663

你可以这样做：

获取对 ScrollView 的最终引用（在 onGlobalLayout() 方法中访问）。接下来，从 ScrollView 中获取 ViewTreeObserver，并添加一个 OnGlobalLayoutListener，覆盖 onGLobalLayout 并在此侦听器中获取测量值。

```
final ScrollView myScroll = (ScrollView)findViewById(R.id.my_scroll);
ViewTreeObserver vto = myScroll.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        LayerDrawable ld = (LayerDrawable)myScroll.getBackground();
        height = myScroll.getHeight();
        width=myScroll.getHeight();
        ViewTreeObserver obs = myScroll.getViewTreeObserver();
        obs.removeOnGlobalLayoutListener(this);
    }

}); 
```

在此线程中查看更多信息：

[如何检索视图的尺寸？](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:46:03.093

您需要在执行布局*后查询视图边界。*建议的地方是`onWindowFocusChanged(boolean)`。有关更多信息，请参阅此问题：[如何获取视图的绝对坐标](https://stackoverflow.com/questions/2224844/how-to-get-the-absolute-coordinates-of-a-view/2226048)

此外，如果你敢于扩展你的 Layout 类，例如创建一个等的子类`LinearLayout`，你可以用这种方式覆盖它的 onLayout()：

```
@Override
public void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);

    myScroll=(ScrollView) findViewById(R.id.ScrollView01);
    int height=myScroll.getHeight();
} 
```

# java - Android - AsyncTask 中的 setAdapter()

> ID：13047481
> 
> 赞同：3
> 
> 时间：2012-10-24T10:35:47.347
> 
> 标签：java, android, android-listview, android-asynctask, android-adapter

我需要用 AsyncTask 填充 ListView。此代码有效，TextView 更改为“开始”，然后更改为“结束”。但是 ListView 是空白的，没有显示。在日志中，我看到“array = 3”。

```
package a.test3;

import java.util.ArrayList;

import a.test3.MainActivity;
import a.test3.R;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {

    GrabURL mt;
    TextView textView;
    ListView lvMain;
    ArrayList<String> result_arr = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView = new TextView(this);
        lvMain = (ListView) findViewById(R.id.listView1);

        mt = new GrabURL();
        mt.execute();
    }

    public class GrabURL extends AsyncTask<Void, Void, ArrayList<String>> {             
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            textView.setText("Begin");
            setContentView(textView);
        }

        @Override
        protected ArrayList<String> doInBackground(Void... params) {
            result_arr.add("a");
            result_arr.add("b");
            result_arr.add("c");
            return result_arr;
        }

        @Override
        protected void onPostExecute(ArrayList<String> result) {
            super.onPostExecute(result);

            Log.d("info", "array = " + result.size());

            textView.setText("End");
            setContentView(textView);

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(MainActivity.this,
                    android.R.layout.simple_list_item_1, result);
            lvMain.setAdapter(adapter);
        }
    }
} 
```

请告诉我，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:40:06.870

看你的代码

```
 textView.setText("End");
        setContentView(textView);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(MainActivity.this,
                android.R.layout.simple_list_item_1, result_arr);
        lvMain.setAdapter(adapter); 
```

您为活动设置视图（布局）。您只在此处显示 TextView `setContentView(textView);`。`ListView lvMain;`当您将 TextView 设置为 Activity 的 ContentView 时，您的 ContentView 中没有。

删除此行

```
setContentView(textView); 
```

如果它仍然无法正常工作，请添加

```
textView.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:01:25.020

您缺少对 Adapter.notifyDataSetChanged() 的调用。您的代码应如下所示

```
@Override
protected void onPostExecute(ArrayList<String> result) {
    ...
    lvMain.setAdapter(adapter);
    adapter.notifyDataSetChanged();
} 
```

# hibernate - 使用连接表休眠一对多，并休眠注释

> ID：13047483
> 
> 赞同：12
> 
> 时间：2012-10-24T10:35:51.803
> 
> 标签：hibernate, annotations, one-to-many, hibernate-annotations

我想使用连接表在两个表之间建立一对多的关系。

这就是我想使用连接表的原因：

*   [Hibernate 单向一对多关联 - 为什么连接表更好？](https://stackoverflow.com/questions/1307203/hibernate-unidirectional-one-to-many-association-why-is-a-join-table-better)
*   [为什么建议避免外键上的单向一对多关联？](https://stackoverflow.com/questions/2092611/why-is-it-recommended-to-avoid-unidirectional-one-to-many-association-on-a-forei)

最后，我想使用 Hibernate 注释来执行此操作。

我找到了一些使用 xml 映射来执行此操作的示例，但没有使用注释。

我相信这就是需要创建表格的方式

```
CREATE TABLE `PRODUCT` (
  `PRODUCT_ID`      BIGINT       PRIMARY KEY AUTO_INCREMENT
);

CREATE TABLE `PARTS` (
  `PART_ID`         BIGINT       PRIMARY KEY AUTO_INCREMENT
);

-- USER_IMAGE_ID must be unique if we want a one-to-many relationship between PRODUCTS & PARTS tables
CREATE TABLE `USER_DETAILS_IMAGE` (
  `PRODUCT_ID`      BIGINT,
  `PART_ID`         BIGINT UNIQUE,
  CONSTRAINT `FK_PRODUCT_ID`  FOREIGN KEY (`PRODUCT_ID`)   REFERENCES `PRODUCT`(`PRODUCT_ID`),
  CONSTRAINT `FK_PART_ID`     FOREIGN KEY (`PART_ID`)      REFERENCES `PARTS`(`PART_ID`)
); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-24T11:15:23.093

不要寻找例子。阅读[官方文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html_single/#example-one-to-many-with-join-table)：

```
@Entity
public class Product {

    private String serialNumber;
    private Set<Part> parts = new HashSet<Part>();

    @Id
    public String getSerialNumber() { return serialNumber; }
    void setSerialNumber(String sn) { serialNumber = sn; }

    @OneToMany
    @JoinTable(
            name="PRODUCT_PARTS",
            joinColumns = @JoinColumn( name="PRODUCT_ID"),
            inverseJoinColumns = @JoinColumn( name="PART_ID")
    )
    public Set<Part> getParts() { return parts; }
    void setParts(Set parts) { this.parts = parts; }
}

@Entity
public class Part {
   ...
} 
```

另外，请注意，这是单向一对多关联的默认设置。因此，如果默认表和列名适合您，您甚至不必提供`@JoinTable`注释。

# php - Magento 中具有自定义选项的库存水平

> ID：13047484
> 
> 赞同：0
> 
> 时间：2012-10-24T10:36:02.687
> 
> 标签：php, magento, options, inventory

所以我浏览了整个谷歌，并没有发现太多积极回应的方式。

我想要做的是将新产品添加到我的 Magento 商店。

该产品是一件外套，外套有 3 种尺寸。小号/大号/大号

我使用自定义选项添加了一个下拉列表，起初一切似乎都很好。然后我意识到我无法管理每种尺寸的数量。见下图。

有没有办法编辑每种尺寸的库存/数量？

反馈非常非常感谢！- 谢谢！

![Magento 自定义选项](../Images/b6ace1d431ebc4b9effa037e41869004.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:38:25.047

您需要使用可配置的产品。

外套（主要产品是可配置产品）

简单产品：

*   外套尺寸 S
*   外套尺寸 M
*   外套尺寸 L

您可以在简单的产品级别管理库存信息。

教程在这里： http: [//www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)

# erlang - Erlang 共享 ETS 表

> ID：13047488
> 
> 赞同：1
> 
> 时间：2012-10-24T10:36:12.657
> 
> 标签：erlang, shared, ets

Erlang ETS 表可以在不同进程之间共享吗？因此，如果我有两个进程在不同的 Erlang 运行系统上运行，我能否以某种方式链接它们，以便我在一个 ETS 表中所做的所有更改都会反映在另一个表中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T10:52:12.957

在单个 Erlang 节点中，ETS 表可以通过传递`public`选项来完全共享`ets:new`。（但请注意，如果其所有者死亡，则该表将被销毁，除非您设置了继承人。）

如果需要跨多个 Erlang 节点共享表，则需要使用 Mnesia。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T22:04:10.537

您不能在不同节点上的进程之间“共享”ETS 表，ETS 表只能由创建它的节点上的进程访问。如果要共享 ETS 表，则需要在一个节点上创建一个进程，即具有该表的节点，并通过此进程从另一个节点访问该表。这并不是那么困难。

# c# - 将参数从 java 传递到 c# 应用程序出错

> ID：13047489
> 
> 赞同：0
> 
> 时间：2012-10-24T10:36:18.523
> 
> 标签：c#, java, command-line, parameters, arguments

嗨，我有一个非常烦人的问题，我无法理解原因。

我有 ac# 表单应用程序，它在 main 中接收一些 args 并使用它们连接到设备（ip、port、user、passw）。它还会打印这些参数以查看它们是否正确。

现在，如果我使用 Windows 提示符中的参数调用 exe，一切正常。但是，如果我使用运行时 exec() 函数从 java 执行相同的操作，应用程序将启动，以与以前完全相同的方式打印正确的参数，但不连接！

好像论点是错误的……有什么建议吗？也许 exec 传递与提示不同？

我已经用 vs 调试了这个过程，变量在两种情况下都是相同的，但是连接函数（这提醒了设备供应商的第三方库）

代码

```
public MyForm(string[] args) 
{ 
   InitializeComponent(); 
   if (args.Length > 0) 
   { 
      this.IP = args[0]; 
      this.PASSWORD = args[4]; 
      this.ID = args[3]; 
      this.PORT = args[1]; 
      this.logTextArea.AppendText("Connection to " +
                    IP +":"+PORTA+" "+ID+" "+
                    PASSWORD+"\n"); 
   } else set fixed values

JAVA
     Runtime.getRuntime().exec("MyForm.exe IP PORT NOT_USED ID PASSW"); 
```

# sql-server - 当值为 NULL 时 SQL Server 标准不起作用

> ID：13047490
> 
> 赞同：0
> 
> 时间：2012-10-24T10:36:20.240
> 
> 标签：sql-server, sql-server-2008

有没有一种方法可以捕获所有值`FieldName <> 'Value'`，即返回字段名称为 NULL 的记录，不用说`(FieldName <> 'Value' OR FieldName IS NULL`）对于每个条件字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:37:26.000

```
ISNULL(FieldName,'') <> 'Value' 
```

或使用

```
SET ANSI_NULLS OFF;
<..your query..> 
```

但是，[设置 ANSI_NULLS](http://msdn.microsoft.com/en-us/library/ms188048.aspx)的功能即将淘汰。

# php - 保存包含空变量的字符串以供以后使用

> ID：13047491
> 
> 赞同：0
> 
> 时间：2012-10-24T10:36:26.197
> 
> 标签：php

我再次尝试解释，希望这更清楚。这是我的核心课程。

```
function __construct() 
{

    $nav = array
    (
        "foo" => "bar",
        "foo" => "bar",
    );  

    $navBar = $var_dev->navBar;

    function navGenerator($navBar) 
    {

    return $navBar;

        /*foreach ($nav as $link_name => $link)
        {
        return $var_dev->navBar;
        //return '"<li><a href="'. $link_name . '">' . $link . '</a></li>';
        }*/

    }

} 
```

这是调用 navBar 的另一个类...

```
class standardHandle 
{
    public $navBar = 'lawl';
} 
```

以上工作正常，但我想`$navBar = '<li><a href="'. $link_name . '">' . $link . '</a></li>'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:41:47.727

您可以在核心类中创建两个公共变量。现在从另一个类中，您需要实例化核心类并访问这两个变量并将值放入其中。例如。

**这与“我想要核心，从包含两个变量的标准句柄中获取一个字符串”的问题无关。**

编辑：我想我互换了班级。但是您知道如何访问其他类的值。

```
class Coreclass {

       var $var1;
       var $var2;

       function someFunction() {

       }

}

//your other class

 class OtherClass {

       var $coreClass;

       function __construct() {
            $this->coreClass= new Coreclass () ;

            $this->coreClass->var1 = "somevalue";
            $this->coreClass->var2 = "someothervalue";
    }

 } 
```

# yii - 使用 CDbCriteria 进行搜索

> ID：13047492
> 
> 赞同：2
> 
> 时间：2012-10-24T10:36:30.393
> 
> 标签：yii

有没有办法在`compare()`我选择的字段中进行 CDbCriteria 搜索（如 ），但使用模型的`search()`方法而不是手动添加`compare()`条件？

请注意，我的目标是让我写更少的行，不多也不少。所以，如果解决方案真的很麻烦和/或混乱，我会选择“add-a-few-compares()”方法。

我当前的代码：

```
$criteria = new CDbCriteria;
$criteria->with = array('A', 'B', 'C', 'D', 'E');

$criteria->compare("A.field1", "test", false, 'OR');
$criteria->compare("A.field2", "test", false, 'OR');
$criteria->compare("B.field1", "test", false, 'OR');
$criteria->compare("B.field2", "test", false, 'OR');

$dataProvider = new CActiveDataProvider('Z', array(
    'criteria'=>$criteria,
    //pagination...
    //more options...
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:09:08.520

**更新：**您似乎[实际上正在寻找](https://stackoverflow.com/questions/13047492/searching-with-cdbcriteria#comment17746042_13050988 "https://stackoverflow.com/questions/13047492/searching-with-cdbcriteria#comment17746042_13050988")（来自此答案下方的评论）部分匹配，为此您必须传递`true`给您的`compare`电话：

```
$criteria->compare("A.field1", "test", true, 'OR'); 
```

甚至可以传递给`addCondition`：

```
$criteria->addCondition('A.field1 LIKE "%test"','OR');
// or with params as below
$criteria->addCondition('A.field2 LIKE :test','OR');
$criteria->params=array(
    ':test'=>'%test%',
); 
```

* * *

正如我在评论中已经提到的，我认为不可能使用每个模型的默认`search()`方法。但是还有其他选择，例如您可以[`addCondition`使用](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addCondition-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addCondition-detail")：

```
$criteria = new CDbCriteria;
$criteria->with = array('A', 'B', 'C', 'D', 'E');
$criteria->together = true; // you'll need together so that the other tables are joined in the same query

$criteria->addCondition('A.field1 = "test"','OR');
$criteria->addCondition('A.field2 = "test"','OR');
// and so on 
```

我建议使用上述内容，因为`compare` [(doc-link)](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail")实际上应该用于您想要“智能”确定比较运算符的情况，例如：如果您从用户输入中获取测试值并且用户是允许使用运算符（<、>、<= 等）。在确定了要在条件中使用的运算符后，相应地`compare`调用其他函数，包括`addCondition`. 所以使用`addCondition`至少会避免那些不必要的检查。

此外，如果您所要做的只是检查相等性，即如果您的 sql`WHERE`应该是：

```
WHERE A.field1 = "test" OR A.field2 = "test" 
```

那么你甚至不需要`addCondition`，你可以简单地使用更复杂的`condition`（[doc](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#condition-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#condition-detail")）：

```
$criteria->condition='A.field1 = "test" OR A.field2 = "test"';
// or even better if you use params
$criteria->condition='A.field1 =:test1 OR A.field2 =:test2 OR B.field1 =:test3 OR B.field2 =:test3';
$criteria->params=array(
    ':test1'=>'test',
    ':test2'=>'anothertest',
    'test3'=>'tests' // omitting ':' here for params also works
); 
```

# html - 拍摄html页面快照的代码？

> ID：13047493
> 
> 赞同：1
> 
> 时间：2012-10-24T10:36:32.483
> 
> 标签：html, html5-canvas, screenshot

> **可能重复：**
> [使用 HTML5/Canvas/Javascript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)

我想知道通过代码制作网页快照的方法。我不需要任何外部服务器或其他东西来做这些事情。这项工作应该通过html编码来完成。我不知道 HTML-Canvas 将如何解决这个问题。

# asp.net - Datagrid 没有保持正确的页面

> ID：13047495
> 
> 赞同：0
> 
> 时间：2012-10-24T10:36:36.593
> 
> 标签：asp.net, vb.net, datagrid, .net-1.1, asp.net-1.1

使用 .NET 1.1 的 DataGrid，我在其中填充了很多链接，并且每页显示 10 个链接。我在 DataGrid 的页脚中启用了分页。如果我转到数据网格中的第 10 页，然后单击 DataGrid 中的链接，则会加载正确的页面，但 DataGrid 的分页位置会返回到第 1 页。

如果单击的链接在第 10 页等，我如何将其保留在第 10 页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:40:37.870

`AllowPaging`您需要指定您所在的女巫页面。因此，请处理对象的更改页面事件并执行以下操作：（确保您`DataBind`正确地将网格设置为`DataSource`on`Page_Load`事件。）

```
Private Sub dgSomething_PageIndexChanged(ByVal source As Object, ByVal e As System.Web.UI.WebControls.DataGridPageChangedEventArgs) Handles dgSomething.PageIndexChanged
    Me.dgSomething.CurrentPageIndex = e.NewPageIndex()
    'Then reload data Grid. It will take the next 'pageSize' to display.
End Sub 
```

希望这可以帮助

# html - 喜欢按钮不会发布到 Facebook

> ID：13047498
> 
> 赞同：1
> 
> 时间：2012-10-24T10:36:45.267
> 
> 标签：html, facebook, post, facebook-like, back

我知道有很多关于这个主题的帖子，我已经阅读了所有这些帖子，但没有解决我的问题。

我不知道发生了什么，直到一两个星期前它还运行良好。现在，当我点击我文章上的点赞按钮时，我在 facebook 上看不到它。更多，如果我在like按钮上写评论，仍然不起作用。

代码是：

```
<div class="fb-like" data-href="http://steagu.ro/index.php?id=<?php echo $myid; ?>&amp;cat=1" data-send="false" data-width="200" data-show-faces="false"></div> 
```

我也用 xfbml 代码尝试过，但结果相同。

当然，我有 facebook 需要的另一部分，就在正文部分之后：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=386320764714835";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

[你可以在这里](http://steagu.ro/index.php?id=2816&cat=1)测试like按钮。奇怪的是我没有对代码进行任何更改。该按钮正在计算喜欢，但对 Facebook 页面没有影响。由于它只发生在我身上，一定是我的网站有错误，我无法找到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:20:46.010

我不确定这是否会有所帮助，但我使用的代码与您的代码相似，并且它也停止了工作，所以我在谷歌上搜索并发现以下似乎工作得更好：

```
<iframe src="https://www.facebook.com/plugins/like.php?href=http://www.youwebsitename.co.uk"
                    scrolling="no" frameborder="0" style="border: none; width: 300px; height: 20px;"></iframe> 
```

请参阅以下链接 [https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

正如它在文章中提到的，iframe 使用更广泛，更容易实现。

希望那有帮助

# android - 有没有办法将 Virtualbox Android 用作 VS 的模拟器

> ID：13047499
> 
> 赞同：2
> 
> 时间：2012-10-24T10:36:48.600
> 
> 标签：android, visual-studio, xamarin.android, xamarin

由于 SDK 附带的模拟器非常慢，所以我想尝试连接到在 Virtualbox 中运行的模拟器。但是当我必须选择设备时，我得到了 IP：端口，但它被禁用了。我想它被认为是一个真正的设备。有没有办法以某种方式将它用作模拟器？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:05:08.737

有更多关于[更快的模拟器的信息](http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/)

> 我得到了 IP：端口，但它被禁用了

在您必须设置网络适配器之前

在VirtualBox“（你的虚拟机名称）”->**设置->网络适配器->适配器1->附加到**

您必须选择 **Only-host Adapter**

输入 # **netcfg**后显示 eth0 的 ip

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-01T22:17:18.280

查看适用于 Visual Studio 的新 Android 模拟器

[http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/introducing-visual-studio-s-emulator-for-android.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/introducing-visual-studio-s-emulator-for-android.aspx)

# android - 如何让多个意图过滤器在同一个任务中启动一个活动

> ID：13047509
> 
> 赞同：3
> 
> 时间：2012-10-24T10:37:12.267
> 
> 标签：android, android-activity, android-manifest, android-lifecycle

我的应用程序的根活动有两个意图过滤器

```
<activity
    android:name=".MyActivity"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Dialog" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.nfc.action.NDEF_DISCOVERED" />
        <data android:mimeType="application/com.example.package" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

一个过滤器用于从启动器图标启动应用程序，另一个是在用户触摸 NFC 标签时启动 Activity。

我希望当用户从应用程序中的任何活动中按下 HOME 按钮时，下次他按下启动器图标或触摸 NFC 标签时，应用程序必须恢复（每个应用程序都是如此）。

但这就是正在发生的事情：当用户点击 NFC 标签时，会启动第一个活动。然后他导航到进一步的活动。按主页。再次点击 NFC 标签，启动第一个活动（MyActivity），并清除之前的堆栈。

另一方面，当用户选择启动器图标，导航到更多活动，按 HOME，然后再次按启动器图标时，MyActivity 作为堆栈顶部的新活动启动。（现在堆栈中有两个 MyActivity）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:10:13.207

您需要定义活动的启动方式。如果您希望您的活动始终在同一任务上启动，请使用：`android:alwaysRetainTaskState="true"`和`android:taskAffinity="your.task.name"`

还要查看`android:launchMode="singleTop"`并`android:launchMode="singleTask"`进一步控制活动的启动方式。

# c - 局部结构和指针

> ID：13047510
> 
> 赞同：0
> 
> 时间：2012-10-24T10:37:13.513
> 
> 标签：c, pointers, structure

我有一个将结构作为参数的函数，例如：

```
add_new_structure(structure s); 
```

然后存放在里面 `structure structure_list[200];`

问题：

**1.**当我想使用结构时，我有一个类似的功能

```
structure *getStructure(int id)
{
return &structure_list[id];
} 
```

如果我添加一个这样的结构，它会起作用吗：

```
void init()
{
   structure test;
   memset(&test,0,sizeof(structure));
   add_new_structure(test);
} 
```

然后从另一个函数调用getStructure？像这样：

```
void anotherFunction()
{
    structure *got_test = getStructure(0);
} 
```

因为我记得我不能有局部变量然后从另一个函数调用它，对吗？

**2.这样存放更好吗？**

改变`add_new_structure() parameter to structure *s`;

`structure *structure_list[200];`然后通过调用 add_new_structure(&test);将其存储在里面

**3\. 哪个更好？或者正确的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:11:35.327

正如我认为您指出的那样，选项 2 行不通。这比说不能在函数外部使用指向局部变量的指针要微妙一些。可以这么说，它们仅在功能仍处于“活动状态”时才有效。在选项 2 中，`structure test`当`structure *structure_list[200]`您调用`add_new_structure`. 此时，某个函数正在调用`init`，它正在调用`add_new_structure`. 当你从 中返回时`init`，你放入的内存地址`structure_list`不再属于原来的拥有者，这是很危险的。如果这解释过于机械化，您应该查看堆栈如何工作以了解原因。

如果不使用`malloc`可能会带来很多复杂性的 using 及其朋友，我会倾向于将内存存储在 中`structure_list`，并进行一些小的修改，您可以通过`structure test`引用而不是值传递。从风格上讲，这可能是两者之间的合理折衷。

```
void init() {
    structure test;
    memset(&test,0,sizeof(structure));
    add_new_structure(&test);
}

void add_new_structure(structure *s) {
    if (structure_count < 200) {
        structure_list[structure_count++] = *s;
    }
} 
```

这在很大程度上取决于是什么`structure`（如果它本身包含指针，谁拥有这些指针？），但希望这能提供一些直觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:50:23.513

第一种方法，即直接将实例作为参数传递，是可行的。因为调用函数时会复制整个实例。您存储的是原始结构实例的副本。

但是，您不能传递和存储指向局部变量的指针。在这种情况下会出现你上面提到的问题。

恕我直言，以上两种方法都不正确。第一种方法在将参数传递给函数时会引入过多的开销。而第二个无法实现您想要的。您最好使用`malloc`/动态分配内存`calloc`并将指针存储在数组中。不要忘记在使用结束时释放对象以防内存泄漏。像这样：

```
void init()
{
   structure *test = NULL;
   test = (structure *) calloc(1, sizeof(structure));
   add_new_structure(test);
}

void add_new_structure(structure *s); 
```

# java - 修改“黑盒”Servlet 响应输出

> ID：13047515
> 
> 赞同：1
> 
> 时间：2012-10-24T10:37:51.983
> 
> 标签：java, regex, httpresponse, servlet-filters

**问题：**

我有一个生成报告的 servlet，更具体地说是报告的表体。它是一个黑匣子，我们无权访问源代码。

尽管如此，它的工作还是令人满意的，并且不打算在短期内重写或替换 servlet。

我们需要修改它的响应文本以更新它生成的一些链接到其他报告，我正在考虑使用一个过滤器来查找锚文本并使用正则表达式替换它。

**研究：**

我遇到了[这个](https://stackoverflow.com/questions/5009650/where-can-i-find-a-java-servlet-filter-that-applies-regex-to-the-output)有正则表达式过滤器的问题。这应该是我需要的，但也许不是。

我并没有尝试在[解析](http://en.wikipedia.org/wiki/Parsing)术语的严格意义上解析 HTML，并且我没有使用该语言的完整规范。我拥有的是组成表格主体的 HTML 标记子集，并且没有嵌套表格，因此 servlet 生成的 HTML 子集不是递归的。

我只需要找到/替换锚目标并向标签添加一个属性。

**所以问题是：**

我需要修改 servlet 的输出以更改所有此类链接：

```
<a href="http://mypage.com/servlets/reports/?a=report&id=MyReport&filters=abcdefg"> 
```

进入如下链接：

```
<a href="http://myOtherPage.com/webReports/report.xhtml?id=MyReport&filters=abcdefg" target="_parent"> 
```

我应该使用[@ Jeremy Stein](https://stackoverflow.com/users/9702/jeremy-stein)编写的正则表达式过滤器还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:57:47.530

假设目标 A 标记中唯一不同的部分是 href 属性的查询组件，那么这个经过测试的正则表达式解决方案应该做得很好：

```
// TEST.java 20121024_0800
import java.util.regex.*;
public class TEST {
    public static String fixReportAnchorElements(String text) {
        Pattern re_report_anchor = Pattern.compile(
            "<a href=\"http://mypage\\.com/servlets/reports/\\?a=report&id=([^\"]+)\">",
            Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);
        Matcher m = re_report_anchor.matcher(text);
        return m.replaceAll(
            "<a href=\"http://myOtherPage.com/webReports/report.xhtml?id=$1\" target=\"_parent\">"
            );
    }
    public static void main(String[] args) {
        String input =
            "test <a href=\"http://mypage.com/servlets/reports/?a=report&id=MyReport&filters=abcdefg\"> test";
        String output = fixReportAnchorElements(input);
        System.out.println(output);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:58:53.633

我使用[了 Jeremy Stein（点击进入问题）](https://stackoverflow.com/questions/5009650/where-can-i-find-a-java-servlet-filter-that-applies-regex-to-the-output)课程，并进行了一些更改：

a) 确保过滤器链或 servlet 中的任何人都不会在包装器对象上调用 getOutputStream()，否则它会抛出 invalidStateException（检查[BalusC](https://stackoverflow.com/questions/4574511/httpscookiefilter-illegalstateexception-getoutputstream-has-already-been-ca)对主题的回答）。

b) 我想在页面上进行一次更改，所以我没有在 web.xml 上放置任何 filterConfig。

b.2) 我也没有在 web.xml 上放任何东西。使用`javax.servlet.annotation.WebFilter`了类本身。

c）我直接在类上设置模式和替换字符串：

```
Pattern searchPattern = Pattern.compile("<a (.*?) href=\".*?id=(.*?)[&amp;|&]filtros=(.*?)\" (.*?)>(.*?)</a>");
String replaceString = "<a $1 href=\"/webReports/report.xhtml?idRel=$2&filtros=$3\" target=\"_parent\" $4>$5</a>"; 
```

注意`.*?`要尽可能少地匹配，以避免匹配超过想要的。

为了测试匹配和正则表达式，我使用了我在研究该主题时[发现的这个小程序。](http://myregexp.com/signedJar.html)

希望这可以帮助任何有同样问题的人。

# c - 将人类时间转换为纪元 Unix 时间返回负数

> ID：13047516
> 
> 赞同：1
> 
> 时间：2012-10-24T10:37:53.083
> 
> 标签：c, mktime, time-t

我目前正在处理一些 C 代码，并且正在尝试将人类可读的日期转换为纪元时间戳（unix 时间戳）。但是，它总是返回一个负数。我正在使用`struct tm`并硬编码日期的值，直到我让它正常工作。下面是代码

```
struct tm t;
time_t t_of_day;
t.tm_year = 2012 - 1970;
t.tm_mon = 9;
t.tm_mday = 24;
t.tm_hour = 11;
t.tm_min = 34;
t.tm_sec = 30;
t.tm_isdst = 1;
t_of_day = mktime(&t);
printf("Epoch time stamp is: %ld\n", t_of_day); 
```

当这段代码执行时，我得到`-858000330`.

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:42:34.047

`2012 - 1970`计算为 42。而 1942 年在 1970 年 1 月 1 日之前。这是正常的，`mktime()`但会导致负时间戳。

来自 mktime 手册页：

```
tm_year   The number of years since 1900. 
```

将您的年份计算更改为`2012 - 1900`，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:43:54.713

在来到这里之前，请阅读手册页：

逐字逐句`man mktime()`：

> tm结构的成员是：
> 
> tm_sec 分钟后的秒数，通常在 0 到 59 的范围内，但可以最大为 60 以允许闰秒。
> 
> tm_min 小时后的分钟数，范围为 0 到 59。
> 
> tm_hour 午夜过后的小时数，范围为 0 到 23。
> 
> tm_mday 月份中的某一天，范围为 1 到 31。
> 
> tm_mon 自一月以来的月数，范围为 0 到 11。
> 
> **tm_year 自 1900 年以来的年数。**
> 
> tm_wday 自星期日以来的天数，范围为 0 到 6。
> 
> tm_yday 自 1 月 1 日以来的天数，范围为 0 到 365。
> 
> tm_isdst 指示夏令时在所述时间是否有效的标志。如果夏令时有效，则该值为正，如果没有，则为零，如果信息不可用，则为负。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T10:43:56.743

tm_year 是自 1900 年以来的年数，而不是 1970 年。

# javascript - 创建 POST 标头

> ID：13047517
> 
> 赞同：0
> 
> 时间：2012-10-24T10:38:00.423
> 
> 标签：javascript, post, extjs, header, request

事情是这样的：我有一个数组，我必须将它发送到另一个页面......不使用 AJAX 请求。我正在尝试将我的用户重定向到这个新页面，或者可能会打开一个带有新页面的弹出窗口，但是这个新页面必须在 POST 请求中接收数组数据。

我如何在javascript中做到这一点？我在发送之前对我的数组进行 JSON 编码没有问题，我只是不知道如何将我的用户重定向到带有“附加”数据的新页面，在 javascript 中。

我正在使用 ExtJS4，所以如果 Ext.util 上有任何内容，我使用它没有问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:21:44.553

你可以这样做（使用javascript）

*   制作一个新的表格

*   将动作设置为新页面

*   将方法设置为 POST

*   添加隐藏字段

*   将字段的值设置为您要发送的此值

*   务实地提交表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:41:45.540

您可以[Ajax POST](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)到目标页面的 url：

```
Ext.Ajax.request({
    url:'/target/url/', async:false, method:'POST',
    jsonData: {
        jsonArray: yourJsonArray            
    }
    success: function() {
        console.log('posted successfully');
    }
}); 
```

`async:false`失去异步功能；如果您不需要 POST 同步，只需将其删除。

# c# - 从 Uri 对象 C# 获取文件扩展名或“HasExtension”类型 bool

> ID：13047521
> 
> 赞同：28
> 
> 时间：2012-10-24T10:38:27.210
> 
> 标签：c#, .net, uri

快速提问：

谁能想到比 RegEx 或一般文本搜索更好的方法来确定 Uri 对象（不是 URL 字符串）是否具有文件扩展名？

*   从[http://example.com/contact](http://example.com/contact)生成的 Uri 对象不
*   从[http://example.com/images/logo.png](http://example.com/images/logo.png)生成的 Uri 对象确实

欢迎任何想法。如果我在 .NET 框架/Uri 类中遗漏了一些已经做到这一点的东西，我深表歉意。

* * *

稍微复杂一点。

*   从[http://example.com/contact.is.sortof.valid](http://example.com/contact.is.sortof.valid)生成的 Uri 对象不
*   从[http://example.com/images/logo.is.sort.of.valid.png](http://example.com/images/logo.is.sort.of.valid.png)生成的Uri对象

* * *

我已经接受了 craigtp 的回答；但是，对于我需要的解决方案就是这样。

```
var hasExtension = Path.HasExtension(requestUri.AbsolutePath); 
```

对于所有尝试过的人。要获得完整而全面的答案，您显然需要一个 mime 类型字典来进行进一步检查。例如*[http://example/this.is.sort.of.valid.but.not.a.mime.type](http://example/this.is.sort.of.valid.but.not.a.mime.type)*会返回 "true" has `Path.HasExtension`，但是，对于我需要的，我永远不会有这种类型的路径在。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-24T10:59:59.437

您可以使用该类的[`HasExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.hasextension.aspx)方法[`System.IO.Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)来确定 Uri 的字符串是否具有扩展名。

通过使用对象的[`AbsoluteUri`](http://msdn.microsoft.com/en-us/library/system.uri.absoluteuri.aspx)属性[`Uri`](http://msdn.microsoft.com/en-us/library/txt7706a.aspx)，您可以检索代表 Uri 的完整字符串。将此字符串传递给 Path 类的`HasExtension`方法将正确返回一个布尔值，指示 Uri 是否包含文件扩展名。

将以下代码复制并粘贴到一个简单的控制台应用程序中以进行测试。只有`myUri3`并`myUrl4`返回True，这也说明该`HasExtension`方法可以正确处理文件名（和扩展名）后面的附加字符（即Querystrings）。

```
using System;
using System.IO;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Uri myURI1 = new Uri(@"http://www.somesite.com/");
            Uri myURI2 = new Uri(@"http://www.somesite.com/filenoext");
            Uri myURI3 = new Uri(@"http://www.somesite.com/filewithext.jpg");
            Uri myURI4 = new Uri(@"http://www.somesite.com/filewithext.jpg?q=randomquerystring");

            Console.WriteLine("Does myURI1 have an extension: " + Path.HasExtension(myURI1.AbsoluteUri));
            Console.WriteLine("Does myURI2 have an extension: " + Path.HasExtension(myURI2.AbsoluteUri));
            Console.WriteLine("Does myURI3 have an extension: " + Path.HasExtension(myURI3.AbsoluteUri));
            Console.WriteLine("Does myURI4 have an extension: " + Path.HasExtension(myURI4.AbsoluteUri));

            Console.ReadLine();
        }
    }
} 
```

**编辑：**

根据提问者关于确定扩展是否是*有效*扩展的编辑，我在下面编写了一些新代码（复制并粘贴到控制台应用程序中）：

```
using System;
using System.IO;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Uri myUri1 = new Uri("http://www.somesite.com/folder/file.jpg?q=randomquery.string");
            string path1 = String.Format("{0}{1}{2}{3}", myUri1.Scheme, Uri.SchemeDelimiter, myUri1.Authority, myUri1.AbsolutePath);
            string extension1 = Path.GetExtension(path1);
            Console.WriteLine("Extension of myUri1: " + extension1);

            Uri myUri2 = new Uri("http://www.somesite.com/folder/?q=randomquerystring");
            string path2 = String.Format("{0}{1}{2}{3}", myUri2.Scheme, Uri.SchemeDelimiter, myUri2.Authority, myUri2.AbsolutePath);
            string extension2 = Path.GetExtension(path2);
            Console.WriteLine("Extension of myUri1: " + extension2);

            Console.ReadLine();
        }
    }
} 
```

这个新代码现在解构了 Uri 对象的所有组成部分（即 Scheme -`http`部分等），并专门*删除*了 Uri 的任何查询字符串部分。[这解决了Adriano](https://stackoverflow.com/users/1207195/adriano)在对此答案的评论中指出的潜在问题，即查询字符串可能包含点字符（从而可能会弄乱该`HasExtension`方法）。

解构 Uri 后，我们现在可以正确确定 Uri 字符串*是否*具有扩展名以及该扩展名是*什么*。

从这里开始，这只是将此扩展名与已知有效扩展名列表进行匹配的情况。这部分是 .NET 框架永远不会提供给您的，因为*任何*文件扩展名都可能有效（如果需要，任何应用程序都可以组成自己的文件扩展名！）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T10:55:55.497

其他人建议的 Uri.IsFile 属性不起作用。

从文档

```
The IsFile property is true when the Scheme property equals UriSchemeFile.

file://server/filename.ext" 
```

[http://msdn.microsoft.com/en-us/library/system.uri.isfile.aspx](http://msdn.microsoft.com/en-us/library/system.uri.isfile.aspx)

您可以做的是获取 URI 的 AbsolutePath（例如对应于 /contact 或 /images/logo.png），然后使用 FileInfo 类检查/获取扩展名。

```
var uris = new List<Uri>()
{
  new Uri("http://mysite.com/contact"),
  new Uri("http://mysite.com/images/logo.png"),
  new Uri("http://mysite.com/images/logo.png?query=value"),
};

foreach (var u in uris)
{
  var fi = new FileInfo(u.AbsolutePath);
  var ext = fi.Extension;
  if (!string.IsNullOrWhiteSpace(ext))
  {
    Console.WriteLine(ext);
  }
} 
```

您可能需要检查支持的扩展列表以处理更复杂的情况（contact.is.sortof.valid 和 contact.is.sortof.valid.png）

测试：

```
"http://mysite.com/contact"                             //no ext
"http://mysite.com/contact?query=value"                 //no ext
"http://mysite.com/contact?query=value.value"           //no ext
"http://mysite.com/contact/"                            //no ext
"http://mysite.com/images/logo.png"                     //.png
"http://mysite.com/images/logo.png?query=value"         //.png
"http://mysite.com/images/logo.png?query=value.value"   //.png
"http://mysite.com/contact.is.sortof.valid"             //.valid
"http://mysite:123/contact.is.sortof.valid"              //.valid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T21:38:25.877

看看 UriBuilder 类。您不仅可以检索 url 的某些部分，还可以随意交换它们。

```
public bool HasExtension(Uri myUri)
{
    var validExtensions = new List<string>() { ".png", ".jpg" };
    var builder = UriBuilder(myUri)
    foreach (var extension in validExtensions) {
        if(builder.Path.Equals(extension, StringComparison.InvariantCultureIgnoreCase))
            return true;
    return false;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-22T01:10:25.947

这是我使它正确的解决方案；）

```
 var inputString = ("http://ask.com/pic.JPG http://aSk.com/pIc.JPG "
        + "http://ask.com/pic.jpg "
        + "http://yoursite.com/contact "
        + "http://yoursite.com/contact?query=value "
        + "http://yoursite.com/contact?query=value.value "
        + "http://yoursite.com/contact/ "
        + "http://yoursite.com/images/Logo.pnG "
        + "http://yoursite.com/images/lOgo.pNg?query=value "
        + "http://yoursite.com/images/logo.png?query=value.value "
        + "http://yoursite.com/contact.is.sortof.valid "
        + "http://mysite:123/contact.is.sortof.valid").Split(' ');

        var restultString = "";

        foreach (var is1 in inputString)
        {
            restultString += (!string.IsNullOrEmpty(restultString) ? " " : "") +
                  (Path.HasExtension(is1) ? Path.ChangeExtension(is1, Path.GetExtension(is1).ToLower()) : is1);
        } 
```

# html - 如何使图像边框均匀？

> ID：13047524
> 
> 赞同：4
> 
> 时间：2012-10-24T10:38:35.730
> 
> 标签：html, image, css, xhtml

我为图像添加了 1 个像素边框。同时，我试图为图像边缘赋予半径。我的问题是由于图像已经用 Photoshop 进行了四舍五入，边缘的边框看起来比它应该的要薄

你可以从这里查看。

[http://jsfiddle.net/fVNgA/](http://jsfiddle.net/fVNgA/)

我怎样才能使边界均匀？

```
img{ -webkit-border-radius: 5px; -moz-border-radius: 5px; border: 1px solid #000; }
<img src='http://carantina.com/wp/wp-content/themes/new/images/home_pic1.jpg'>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:54:31.177

将图像包装成 a`span`并添加`css`到其中

[http://jsfiddle.net/96wVp/](http://jsfiddle.net/96wVp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:47:31.813

添加“填充：1px；” 到图像样式:)

顺便说一句，这里有另一个线程概述了类似的问题，原因是：[CSS 3 border-radius 属性；Chrome 中的角落太苍白？](https://stackoverflow.com/questions/6411701/css-3-border-radius-property-corners-too-pale-in-chrome-solved)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:47:54.417

Chrome 使用方角作为内边框。因此，在 Chrome 中，您将无法获得确切的感觉，而在 Firefox 中，即使内部边框也使用圆角。

**Chrome 和 Firefox 中的屏幕截图**

![](../Images/d9e989d59b5aaca7ca13dc2ed8659666.png)

我的建议是最好包含泛型`border-radius`，而且对于 Chrome，修复将是添加`overflow: hidden;`和`padding: 1px;`.

**CSS**

```
img {
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; /* Add this for fallback */
    overflow: hidden; /* Hack for Chrome */
    padding: 1px; /* Hack for Chrome */
    border: 1px solid #000;
} 
```

**在 Chrome 黑客攻击之后**

![](../Images/d7663a1dac5d02c0180c560cb8a0dff7.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T10:52:54.463

问题不在于边界，而在于它的应用方式和您使用的图像。尝试在 Photoshop 中以 6px 的半径圆角并将其保存为具有透明背景的 png。发生的事情是您正在放置边框，然后边框实际上在图像的角落下方移动。由于您的图像是 jpg 并且 jpg 不支持透明度，因此您的圆角实际上有方形的白色角。这是一个带有透明图像而不是 jpg 的图像示例。 [http://jsfiddle.net/calder12/fVNgA/6/](http://jsfiddle.net/calder12/fVNgA/6/)

代码只是因为他们不会让我在没有代码的情况下发布小提琴......有时这很有意义>。>

```
<style>img{ -webkit-border-radius: 5px; -moz-border-radius: 5px; border: 1px solid #000; }    </style>
<img src='http://calderonline.com/images/home_pic1.png'>​ 
```

# cakephp - 如何最小化 CakePHP 中的“包含”查询？

> ID：13047525
> 
> 赞同：5
> 
> 时间：2012-10-24T10:38:36.943
> 
> 标签：cakephp, has-many, belongs-to, containable

我有三个模型，*Users*，*Comments*和*Pages*。

*用户* **有很多** *评论*，*评论* **属于** *页面*。

所有模型都使用该`containable`行为，并且默认为`recursive -1`.

*如果我在Comments*上调用`find()`查询，其中**包含**请求包括*Page*模型的字段，这将使用单个查询正确返回结果，自动将*Page*表连接到用户。

 *****如果我从*User*模型（**包含** *Comment*和*Comment.Page*）调用一个类似的查询，结果是一个查询以获取*Comments*，然后是每个评论的查询以获取相关的*Page*。

有没有办法配置模型以保持 JOIN 优化？*我假设相关模型（ Comments* ）上的 belongsTo 声明将遵循主机模型（*Users*）。

**更新**

我应该澄清一下，我的问题使用了我实际案例研究的简化版本。虽然我需要的最小解决方案将包括这个初始*模型* **hasMany** *Model* **belongsTo** *Model*结构，但我也在寻找一个或多个额外的**belongsTo** *模型*的解决方案（虽然我会自动使用 LEFT JOIN，因为这将是可行的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:42:35.737

嗯，这很有趣。这是一种应该在核心中实现的优化:)

无论如何，我认为您可以通过稍微不同地构建查询来获得相同的结果（可能格式不同）：

```
$this->User->Comment->find('all', array(
  'conditions' => array(
    'Comment.user_id' => $userId
  ),
  'contain' => array(
    'User',
    'Page'
  )
)); 
```

通过从 Comment 模型中搜索，它应该使用两个左连接来连接数据，因为它们都是 1:1 的关系。注意：结果数组可能看起来与从 User 模型中搜索时略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:50:34.910

我找到一个很好的方法是创建一个[自定义的 find 方法](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types)。

例如，我会在您的 User 模型中创建一个方法，例如调用`_findUserComments()`. 然后，您将在此方法中执行所有连接、包含等操作。然后在您的控制器中，无论您需要获取所有用户的评论，您都可以这样称呼它：

```
$this->User->find('UserComments', array(
    "conditions" => array(
        'User.id' => $userId
    )
)); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T03:32:33.480

如果模型定义如下：

1.  评论模型属于页面和用户。
2.  页面属于用户，有很多评论。
3.  用户有很多页面和评论

下面的代码将返回一个连接查询：

```
$this->loadModel('Comment');
$this->Comment->Behaviors->attach('Containable');
$queryResult = $this->Comment->find('all', array(
   'contain' => array(
       'User', 
       'Page'
    )
)); 
```

下面的代码将返回两个查询。页面和用户加入一个查询并在另一个查询中加入所有评论

```
$this->loadModel('Page');
$this->Page->Behaviors->attach('Containable');
$queryResult = $this->Page->find('all', array(
   'contain' => array(
        'User', 
    'Comment'
   )
)); 
```

并且下面的代码将返回三个查询，每个模型一个：

```
$this->loadModel('User');
$this->User->Behaviors->attach('Containable');
$queryResult = $this->User->find('all', array(
    'contain' => array(
        'Page', 
        'Comment'
    )
)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:43:11.240

那么您是否在问是否有更简单的方法来包含您的所有查询？如果您想包含当前控制器中的所有内容。您可以在 beforeFilter() 回调中执行包含，它将应用于该控制器中的所有查询。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T12:58:36.103

我不太确定我是否理解您的问题，但我认为您对 Comment -> Page 链接的许多 sql 调用有疑问？如果这是正确的，那么

1.  尝试[可链接的行为](https://github.com/rafaelbandeira3/linkable)，它可以减少 sql 调用，并且几乎可以像 contains 一样工作
2.  或者，如果它几乎与您想要的数据相同，则在您对 hte sql 调用（例如 Comment-Model）感到满意的特定模型中创建一个函数，并通过用户模型调用它`$this->Comment->myFindFct($params);`

希望有帮助

编辑：我想到的一件事。您可以将关联数组中的连接类型更改为`inner`，这使得蛋糕也可以单独调用关联模型*****

# c++ - 使用指针和使用静态对象的单例实现之间的区别

> ID：13047526
> 
> 赞同：27
> 
> 时间：2012-10-24T10:38:43.030
> 
> 标签：c++, design-patterns, singleton

编辑：抱歉我的问题不清楚，为什么书籍/文章更喜欢实现#1 而不是实现#2？

在 Singleton 类的实现中使用指针与使用静态对象的实际优势是什么？为什么大多数书都喜欢这个

```
class Singleton
{
  private:

    static Singleton *p_inst;
    Singleton();

  public:

    static Singleton * instance()
    {
      if (!p_inst)
      {
        p_inst = new Singleton();
      }

      return p_inst;
    }
}; 
```

超过这个

```
class Singleton
{
  public:
    static Singleton& Instance()
    {
        static Singleton inst;
        return inst;
    }

  protected:
    Singleton(); // Prevent construction
    Singleton(const Singleton&); // Prevent construction by copying
    Singleton& operator=(const Singleton&); // Prevent assignment
    ~Singleton(); // Prevent unwanted destruction
}; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T11:04:33.620

> 为什么书籍/文章更喜欢实现#1 而不是实现#2？

因为大多数描述 Singleton 反模式的文章在尝试在 C++ 中安全地实现它时并没有完全理解所有的隐患。很难做到正确。

> 在 Singleton 类的实现中使用指针与使用静态对象的实际优势是什么？

使用带`new`但不带的指针`delete`可确保对象永远不会被销毁，因此在其生命周期结束后访问它就没有危险。结合“惰性”创建，第一次访问它，这保证了所有访问都是对有效对象的。缺点是创建不是线程安全的，并且对象和它获取的任何资源都不会在程序结束时释放。

使用本地静态对象，在任何支持 C++11 线程模型的编译器上创建都是线程安全的；此外，该对象将在程序结束时被销毁。但是，可以在对象销毁后访问该对象（例如，从另一个静态对象的析构函数中），这可能会导致严重的错误。

最好的选择是尽可能避免静态数据和全局可访问的数据。特别是，永远不要使用 Singleton 反模式；它将全局静态数据与奇怪的实例化限制相结合，使测试变得不必要地困难。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T10:42:40.130

第二个版本（使用局部静态变量）具有显着优势。

它不需要使用自由存储，因此不会被检测为内存泄漏。它是线程安全的（in `C++11`）。它更短更简单。

唯一的缺点是不可能使其成为可移植的线程安全的（对于 C++11 之前的编译器），并且它没有为您提供显式销毁单例实例的选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T10:55:14.187

我**总是**更喜欢第二种，但第一种确实有一些潜在的有趣优势：-

*   清晰 - 检查指针是否为空实际上是编译器在构造静态对象时所做的工作。从“学习”的角度来看，了解在方法范围内使用静态对象时发生的情况是有启发性的。

*   惰性分配 - 在第一种情况下，Singleton 对象是堆分配的。如果您的函数永远不会运行，则永远不会构造对象并且永远不会消耗内存。但是，在第二种情况下，链接器在程序启动之前分配内存来保存对象，即使“构造”是惰性的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-24T10:43:27.140

第二个具有非确定性破坏。第一个，您可以控制何时删除指针（如果有的话）。

当然，第一个构造不是线程安全的，但可以使用`boost::call_once`（或`std::call_once`如果可用）来实现

第二个构造很常见，以至于许多编译器使它成为线程安全的，即使从技术上来说它不是标准的（尽管按照标准，对象应该只创建一次，我不确定标准对完成的看法在另一个线程使用它之前进行构造）。

如果销毁顺序没有问题，那么您可以继续使用静态版本，只要您的编译器保证它是线程安全的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-24T10:58:51.507

第二个例子被称为“Meyers' Singleton”，因为它首先发表在“Effective C++”或“More Effective C++”中。我不确定是哪一个，但两者都是在“设计模式”之后出版的——所以四人组在他们的书写作时可能还没有意识到第二种模式。

此外，第一种方法对于其他语言来说更为标准——你可以用 Java 或 C# 做第一种，但不能用第二种方法，所以来自不同背景的人可能是第一种更出名的另一个原因。

在技​​术方面，第一种方法可以控制单例何时被销毁，但这也可能会给您带来很多麻烦。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T10:42:43.500

一个优点是您不必检查单例是否已经被实例化。

另一个是您不必担心取消分配任何内存。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-04-03T10:35:19.180

非本地静态怎么样？有人看到这个问题吗？

```
class Singleton
{
    static Singleton singleton;
    Singleton();
    // etc

public:
    static Singleton &Instance() { return singleton; }
};

Singleton Singleton::singleton;

// etc 
```

# ios - 向 AlertView 发送参数

> ID：13047527
> 
> 赞同：1
> 
> 时间：2012-10-24T10:38:49.337
> 
> 标签：ios, parameters, uialertview

我有一个委托，它接收一条消息，以删除该项目作为参数的项目。我想显示一个确认 AlertView，然后，如果用户按是，我想删除它。

所以，我所拥有的是

被调用的委托方法：

```
- (void) deleteRecording:aRecording(Recording*)aRecording {

     NSLog(@"Cancel recording extended view");
     UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: NSLocalizedString(@"Cancel recording",nil)
                      message: NSLocalizedString(@"Are you sure you want to cancel the recording?",nil)
                      delegate: self
                      cancelButtonTitle: NSLocalizedString(@"No",nil)
                      otherButtonTitles: NSLocalizedString(@"Yes",nil), nil];
    [alert show];
    [alert release];

} 
```

那就是检查哪个按钮被按下的方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    switch (buttonIndex) {
        case 0:
        {
            NSLog(@"Delete was cancelled by the user");
        }
        break;

        case 1:
        {

            NSLog(@"Delete deleted by user");
        }

    }

} 
```

所以，我的问题是，如何将 aRecording 参数从第一种方法发送到第二种方法？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:42:59.693

1.  将该变量存储在成员变量中（最简单的解决方案）
2.  如果您只传递一个 int 变量，则可以设置 AlertView 标记属性。

    ```
     myAlertView.tag  = YOUR_INT; 
    ```

3.  > 根据[文件](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)，
    > 
    > *注意： UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。*
    > 
    > 因此，仅当您不打算将应用提交到应用商店时，请使用第三种方法。感谢用户 soemarko ridwan 的提示。

    对于传递复杂对象，子类 UIAlertView，添加对象属性

    ```
    @interface CustomAlertView : UIAlertView
    @property (nonatomic, retain) id object;
    @end

    @implementation CustomAlertView
    @synthesize object;
    - (void)dealloc {
        [object release];
        [super dealloc];
    }
    @end 
    ```

    当你创建 AlertView

    ```
     CustomAlertView *alert = [[CustomAlertView alloc]
                      initWithTitle: NSLocalizedString(@"Cancel recording",nil)
                      message: NSLocalizedString(@"Are you sure you want to cancel the recording?",nil)
                      delegate: self
                      cancelButtonTitle: NSLocalizedString(@"No",nil)
                      otherButtonTitles: NSLocalizedString(@"Yes",nil), nil];
    [alert setObject:YOUR_OBJECT];
    [alert show];
    [alert release]; 
    ```

    在代表

    ```
    - (void)alertView:(TDAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
         NSLog(@"%@", [alertView object]);
    } 
    ```

# visual-studio-2010 - 如何制作非 GUI MFC 应用程序？

> ID：13047537
> 
> 赞同：0
> 
> 时间：2012-10-24T10:39:50.727
> 
> 标签：visual-studio-2010, mfc, visual-c++-2010

我做了一个基于 MFC 的项目，它当然有 GUI。现在我需要将其更改为非 GUI。所以，每当我开始构建项目时，它应该在后台运行而不是显示 GUI。

我希望我的问题很清楚。请建议我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:17:20.407

作为改造，这不是最简单的事情。最简单的方法是通过在主窗口（以及任何辅助窗口和任何其他 UI 元素的等效项）上使用 ShowWindow(SW_HIDE) 来隐藏 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:51:34.600

为什么不简单地创建支持 MFC 的控制台应用程序并使其成为 Windows 服务？

# hibernate - 拒绝访问 http://repository.jboss.com/maven2/

> ID：13047539
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:40:02.033
> 
> 标签：hibernate, maven, jboss, annotations

我试图向我的 Maven 项目添加休眠注释，但出现以下错误：

> *   ArtifactDescriptorException：无法读取hibernate-commons-annotations的工件描述符：hibernate-commons-annotations：jar：3.0.0.GA：ArtifactResolutionException：无法传输hibernate-commons-annotations：hibernate-commons-annotations：pom：3.0.0来自 http://repository.jboss.com/maven2/ 的 .GA 被缓存在本地存储库中，直到 JBoss 存储库的更新间隔已过或强制更新后，才会重新尝试解析。原始错误：无法将工件 hibernate->commons-annotations:hibernate-commons-annotations:pom:3.0.0.GA 从/到 JBoss 存储库 (http://repository.jboss.com/maven2/) 传输：拒绝访问>http://repository.jboss.com/maven2/hibernate-commons-annotations/hibernate-commons-annotations/3.0.0.GA/hibernate-commons-annotations-3.0.0.GA.pom。错误 > 代码 403，
>     *   ArtifactDescriptorException：无法读取hibernate->annotations：hibernate-annotations：jar：3.3.0.GA的工件描述符：ArtifactResolutionException：无法从[http：/传输hibernate-annotations：hibernate->annotations：pom：3.3.0.GA /repository.jboss.com/maven2/](http://repository.jboss.com/maven2/)已缓存在本地存储库中，直到 JBoss 存储库的 >update 间隔已过或强制更新后才会重新尝试解析。原始错误：无法从/到 JBoss 存储库 (http://repository.jboss.com/maven2/) 传输工件 hibernate-annotations:hibernate->annotations:pom:3.3.0.GA: Access denied to [http:// repository.jboss.com/maven2/hibernate->annotations/hibernate-annotations/3.3.0.GA/hibernate-annotations-3.3.0.GA.pom](http://repository.jboss.com/maven2/hibernate-)。错误代码 403，禁止

我使用此代码

```
<repository>
  <id>JBoss repository</id>
  <url>http://repository.jboss.com/maven2/</url>
</repository> 
```

和

```
<!-- Hibernate annotation -->
<dependency>
    <groupId>hibernate-annotations</groupId>
    <artifactId>hibernate-annotations</artifactId>
    <version>3.3.0.GA</version>
</dependency>

<dependency>
    <groupId>hibernate-commons-annotations</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>3.0.0.GA</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T15:55:50.620

根据[JBoss Maven Repositories](https://community.jboss.org/wiki/MavenRepository)的描述， `http://repository.jboss.com/maven2/`已弃用，应替换为`http://repository.jboss.org/nexus/content/groups/public/`.

您可以阅读开发人员应如何[配置 Maven 以使用 JBoss Repository](https://community.jboss.org/wiki/MavenGettingStarted-Developers)。

所以在你的 POM 中使用：

```
<repositories>
  <repository>
    <id>jboss-public-repository-group</id>
    <name>JBoss Public Repository Group</name>
    <url>http://repository.jboss.org/nexus/content/groups/public/</url>
  </repository>
</repositories> 
```

对于`hibernate-annotations:hibernate-annotations:3.3.0.GA`依赖项，使用 Maven 中央存储库无济于事，因为它不是由它托管的。但它由**JBoss Deprecated**中的 JBoss Repository 托管。
但是，您会在 Maven Central 中找到它（重命名）`org.hibernate:hibernate-annotations:3.3.0.ga`。

如果您真的想使用已弃用的存储库：

```
<repositories>
  <repository>
    <id>jboss-deprecated</id>
    <name>JBoss Deprecated</name>
    <url>https://repository.jboss.org/nexus/content/repositories/deprecated/</url>
  </repository>
</repositories> 
```

[那里](https://community.jboss.org/wiki/MavenRepository)解释了不同的 JBoss Maven 存储库/组。

也可以看看 ：

*   [如何在 Maven 中添加远程存储库](http://www.mkyong.com/maven/how-to-add-remote-repository-in-maven-pom-xml/)

关于 JBoss，已弃用的 groupId（如`hibernate-annotations`）在[此处](https://community.jboss.org/wiki/MavenJBossGroupIds)发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:42:51.163

请改用 Maven 中央存储库。看看[这里](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.hibernate%22%20AND%20a%3a%22hibernate-annotations%22)。

# java - 行中行与 Ext GWT 网格

> ID：13047545
> 
> 赞同：0
> 
> 时间：2012-10-24T10:40:20.970
> 
> 标签：java, gwt, gxt

是否有可能`RowExpander`不是 HTML 而是另一行？也就是说，一行有一个展开 [+] 图标，然后展开时，子行看起来像“子行”？

例如我有一个`List<ModelData>`这样的：

```
ModelData column1 = new BaseModelData();
column1.set("Date", "11-11-11");
column1.set("Time", "11:11:11");
column1.set("Code", "abcdef");
column1.set("Status", "OK");

ModelData column2 = new BaseModelData();
column2.set("Date", "11-11-11");
column2.set("Time", "12:11:11");
column2.set("Code", "abcdef");
column2.set("Status", "Failed");

ModelData column3 = new BaseModelData();
column3.set("Date", "11-11-11");
column3.set("Time", "13:11:11");
column3.set("Code", "abcedf");
column3.set("Status", "Failed");

ModelData column4 = new BaseModelData();
column4.set("Date", "11-11-11");
column4.set("Time", "14:11:11");
column4.set("Code", "abcdef");
column4.set("Status", "Failed");

List<ModelData> data = ...
data.add(model1);
data.add(model2);
data.add(model3);
data.add(model4); 
```

并且这将在 Grid 中呈现为两列（按`Code`and`Status`列分组）：

```
 Date | Time     | Code   | Status
-------------------------------------
     11-11-11 | 11:11:11 | abcedf | OK
[+]  11-11-11 | 12:11:11 | abcedf | Failed
 |--->11-11-11 | 13:11:11 | abcedf | Failed
 |--->11-11-11 | 14:11:11 | abcedf | Failed 
```

像这样的东西。

**更新：**

我被告知解决方案是扩展`RowExpander`类并与类合并`GridView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:32:22.147

您可以查看**GroupingView**和**TreeGrid**并为您定制其中一个。这比尝试重用 GridView 的行渲染功能要安全得多。

# xcode - XCode 4 单元测试：是否可以忽略某些测试用例？

> ID：13047546
> 
> 赞同：7
> 
> 时间：2012-10-24T10:40:22.333
> 
> 标签：xcode, unit-testing, ocunit, sentestingkit

有没有办法忽略特定的测试用例而不注释掉它？

一些测试是在实现存在之前编写的，所以在提交任何代码之前，我想首先标记这些测试被忽略，这样我的任何同事都不会感到震惊。

将它们注释掉会导致丢失失败的、不完整的测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-14T15:08:18.797

您可以右键单击左侧面板中的测试并选择“禁用”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:42:09.537

在 OCUnit (SenTestingKit) 中没有内置的方法来注释测试。

一种方法是更改​​测试方法的名称。我在要禁用但希望它继续编译的测试的开头添加了“XXX”。例如，

```
- (void)XXXtestSomething 
```

然后我可以搜索“XXXtest”来查找所有禁用的测试方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:12:18.043

这应该可以通过“其他测试标志”构建设置来实现。和

```
 -SenTest ClassToTest 
```

您可以指定要测试的类，但不能指定单个方法。

更多信息可以在这里找到：[快速单元测试，红色毛衣](http://www.red-sweater.com/blog/779/fast-unit-testing-iterations)

# c# - 使用 SendMessage 获取选定的文本

> ID：13047556
> 
> 赞同：0
> 
> 时间：2012-10-24T10:41:22.137
> 
> 标签：c#, .net, winapi

可以说我有窗口的处理程序包含选定的文本..

我只需要从此窗口中获取选定的文本。

我知道我们可以使用*SendMessage() API*和**EM_GETSEL**常量来做到这一点，但我真的很困惑如何做到这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:34:34.340

`WM_GETTEXT`消息将帮助您-

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace TextFocusedns 
{
    public partial class TextFocusedFrm : Form
    {
        #region APIs

        [DllImport("user32.dll")]
        public static extern bool GetCursorPos(out Point pt);

        [DllImport("user32.dll", EntryPoint = "WindowFromPoint", CharSet = CharSet.Auto, ExactSpelling = true)]
        public static extern IntPtr WindowFromPoint(Point pt);

        [DllImport("user32.dll", EntryPoint = "SendMessageW")]
        public static extern int SendMessageW([InAttribute] System.IntPtr hWnd, int Msg, int wParam, IntPtr lParam);
        public const int WM_GETTEXT = 13;

        [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        internal static extern IntPtr GetForegroundWindow();

        [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        internal static extern IntPtr GetFocus();
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    internal static extern int GetWindowThreadProcessId(int handle, out int processId);

    [DllImport("user32", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
    internal static extern int AttachThreadInput(int idAttach, int idAttachTo, bool fAttach);
    [DllImport("kernel32.dll")]
    internal static extern int GetCurrentThreadId();

    [DllImport("user32", CharSet = CharSet.Auto, SetLastError = true)]
    internal static extern int GetWindowText(IntPtr hWnd, [Out, MarshalAs(UnmanagedType.LPTStr)] StringBuilder lpString, int nMaxCount);

    #endregion

    private System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer() { Interval = 100, Enabled = true };

    public TextFocusedFrm()
    {
        InitializeComponent();
    }

    private void TextFocusedFrm_Load(object sender, EventArgs e)
    {
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        try
        {
            MultiLineTextBox.Text = GetTextFromFocusedControl();
        }
        catch (Exception exp)
        {
            MultiLineTextBox.Text += exp.Message;
        }
    }

    //Get the text of the focused control
    private string GetTextFromFocusedControl()
    {
        try
        {
            int activeWinPtr = GetForegroundWindow().ToInt32();
            int activeThreadId = 0, processId;
            activeThreadId = GetWindowThreadProcessId(activeWinPtr, out processId);
            int currentThreadId = GetCurrentThreadId();
            if (activeThreadId != currentThreadId)
                AttachThreadInput(activeThreadId, currentThreadId, true);
            IntPtr activeCtrlId = GetFocus();

            return GetText(activeCtrlId);
        }
        catch (Exception exp)
        {
            return exp.Message;
        }
    }

    //Get the text of the control at the mouse position
    private string GetTextFromControlAtMousePosition()
    {
        try
        {
            Point p;
            if (GetCursorPos(out p))
            {
                IntPtr ptr = WindowFromPoint(p);
                if (ptr != IntPtr.Zero)
                {
                    return GetText(ptr);
                }
            }
            return "";
        }
        catch (Exception exp)
        {
            return exp.Message;
        }
    }

    //Get the text of a control with its handle
    private string GetText(IntPtr handle)
    {
        int maxLength = 512;
        IntPtr buffer = Marshal.AllocHGlobal((maxLength + 1) * 2);
        SendMessageW(handle, WM_GETTEXT, maxLength, buffer);
        string w = Marshal.PtrToStringUni(buffer);

       Marshal.FreeHGlobal(buffer);
            return w;
        }
    }
} 
```

# c# - 如何使用 C# 和 Powershell 类远程访问我的 ActiveDirectory 服务器

> ID：13047557
> 
> 赞同：0
> 
> 时间：2012-10-24T10:41:27.073
> 
> 标签：c#, asp.net, powershell, active-directory, remote-server

我必须构建一个 Web 应用程序，它可以在 ActiveDirectory 中添加一个关于 powerhell 命令的新用户，但我不知道我该怎么做。

如果我为交换服务器这样做，它就可以工作。

这是我在交换服务器中添加联系人的代码：

```
string URL = "http://server141.test-company.com/PowerShell/";
string Schema ="http://schemas.microsoft.com/powershell/Microsoft.Exchange";

public string CreateRemoteConnectionToExchange(string UserName, string Password, string Mailbox)
        {
                SecureString SecurePassword = new SecureString();

                string str_password = Password;
                string str_username = UserName;

                foreach (char x in str_password)
                {
                    SecurePassword.AppendChar(x);
                }

                PSCredential cred = new PSCredential(str_username, SecurePassword);

                WSManConnectionInfo connectionInfo = new WSManConnectionInfo(new Uri(URL), Schema, cred);

                connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Default;

                Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo);

                PowerShell powershell = PowerShell.Create();
                PSCommand command = new PSCommand();

                command.AddCommand("New-MailContact");
                command.AddParameter("ExternalEmailAddress", "SMTP:" + Mailbox + MailExtension);
                command.AddParameter("Name", Mailbox);
                command.AddParameter("Alias", Mailbox);
                command.AddParameter("FirstName", Mailbox);
                command.AddParameter("Initials", "");
                command.AddParameter("LastName", "");
                command.AddParameter("OrganizationalUnit", OrganizationalUnit);
                command.AddParameter("DomainController", configDC);

                powershell.Commands = command;

                try
                {
                    runspace.Open();

                    powershell.Runspace = runspace;

                    powershell.Invoke();

                    return "Der Kontakt wurde Erfolgreich erstellt";
                }
                catch (Exception ex)
                {
                    ...

                }
                finally
                {
                    runspace.Dispose();
                    runspace = null;
                    powershell.Dispose();
                    powershell = null;
                }

        } 
```

我不知道如何对 ActiveDirectory 进行远程操作：/ 我需要 URL 和架构字符串。ActiveDirectory 在[http://server137.linde-wiemann.com/](http://server137.linde-wiemann.com/)上？= OU=NPS,OU=services,DC=test-company,DC=com 或 LDAP://OU=NPS,OU=services,DC=test-company,DC=com

大家可以帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:13:52.320

我发现这段关于活动目录的代码是这个链接，它显示了几乎所有关于活动目录的功能。

[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)

# asp.net - 如何为特定页面集启用/禁用 IHttpModule

> ID：13047559
> 
> 赞同：0
> 
> 时间：2012-10-24T10:41:36.403
> 
> 标签：asp.net, ihttpmodule

我有一段代码正在预处理提交的表单。目前它是复制/粘贴解决方案，但现在我在三个页面上使用基本相同的代码，我想封装它。最初的想法是使用 IHttpModule 来实现。唯一的问题是：如何只为几个页面注册这个模块，所以我可以在 BeginRequest 事件处理程序中做我的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:22:16.583

ASP.NET HttpModule 附加到处理管道本身，因此所有请求都经过此处理，您必须检查要处理的请求。对于您的要求， HttpHandler 可能是更好的选择。将所有选定的页面放在一个文件夹中，并像这样注册 HttpHandler。

```
<add verb="*" path="/selected/*.aspx" type="YourHandler,Assembly"/> 
```

# xml - 使用 MVC 4 Web API，在 XML 中返回数组时如何更改 ArrayOf 节点的格式

> ID：13047562
> 
> 赞同：1
> 
> 时间：2012-10-24T10:41:42.687
> 
> 标签：xml, asp.net-mvc, json, xml-serialization, asp.net-web-api

我想在返回时控制根节点的输出`IEnumerable<T>`。目前，我得到一个`<ArrayOf_>`节点作为根：

```
<ArrayOfMyClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <MyClass>
            <Number>1</Number>
    </MyClass>
    <MyClass>
            <Number>2</Number>
    </MyClass>
</ArrayOfMyClass> 
```

我希望能够将其更改为其他内容（就此而言，没有命名空间）：

```
<NewRoot>
    <MyClass>
            <Number>1</Number>
    </MyClass>
    <MyClass>
            <Number>2</Number>
    </MyClass>
</NewRoot> 
```

我不想创建组类，因为虽然这适用于 XML，但我不希望 JSON 输出中的组类集合属性：

```
{
    "ListOfMyClass": [
        {
            "Number": 1
        },
        {
            "Number": 2
        }
    ]
} 
```

相反，我想保持默认状态：

```
[
    {
        "Number": 1
    },
    {
        "Number": 2
    }
] 
```

我意识到似乎已经回答了一些类似的问题，但所有这些问题都将我带入了死胡同。我也可以自己破解结果（糟糕），但我希望有一种最佳实践方法可以使用提供的东西来做到这一点；注释，格式化程序等

在将 JSON 输出保留为默认值的同时，有没有人在这方面取得了任何成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:38:12.787

你试过这个吗？

```
public MyController : ApiController
{
    public NewRoot Get()
    {
        // return data
    }
}

public NewRoot: IEnumerable<MyClass>
{
} 
```

# algorithm - 有没有办法用一些素数的乘法来分割一个数字

> ID：13047571
> 
> 赞同：0
> 
> 时间：2012-10-24T10:42:07.757
> 
> 标签：algorithm, primes

我正在寻找一种算法来帮助我拆分数字**N**就像
N = (p [1] ^a ) *(p [2] ^b )* .....*(p [n] ^z )

在哪里

```
N is the given number
p is prime numbers smallest to greatest
a,b,..z are the power over the prime
* is the multiplication operation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:44:37.617

这称为**因式分解**。谷歌关键词：`prime factorization algorithm`。

问题是，我们仍然无法真正快速地做到这一点。它为密码学（例如 RSA 算法）提供了很好的基础。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:49:28.973

整数分解的算法有很多：试除法、Pollard 的 rho 算法、椭圆曲线、二次筛等。谷歌搜索其中一些主题会有所帮助。为了让你开始，这里是一个通过试除法分解的算法：

```
function td_factors(n)
    f = 2
    while f * f <= n
        if n % f == 0
            output f
            n /= f
        else
            f = f + 1
    output n 
```

为了进一步阅读，我谦虚地在我的博客上推荐[这篇文章。](http://programmingpraxis.com/essays)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:40:00.327

如果我们不关心时间优化，这不是一个那么复杂的问题！以下是有效的简单代码。

```
#include<iostream>
#include<vector>
#include<map>
#include<cmath>

using namespace std;

int get_primes(int max_number, vector<int> &primes)
{
    int *table = new int[max_number + 1];

    memset(table, -1, sizeof(int) * (max_number + 1));

    table[0] = table[1] = 0;

    primes.clear();

    for(int i = 2;i<=max_number ;i++)
    {
        if(table[i])
        {
            primes.push_back(i);
            for(int j = i * i;j<=max_number;j+=i)
            {
                table[j] = 0;
            }
        }
    }

    delete [] table;
    return primes.size();
}

int get_prime_factor(int number, map<int , int> &factors)
{
    vector<int> primes;
    get_primes(number,primes);

    factors.clear(); 
    int ret = 0;
    for(int i = 0;primes[i] <= number;)
    {
        if(number % primes[i] == 0)
        {
            ret ++;
            factors[primes[i]] ++;
            number /= primes[i];
        }
        else
            i++;
    } 
    return ret;
}

int main()
{
    cout<<"Please input a number:"<<endl;
    int number;

    cin>>number;

     map<int , int> factors;
     get_prime_factor(number,factors);

    for(map<int,int>::iterator itr= factors.begin();itr != factors.end();++itr)
    {
            cout<<"("<<itr->first<<"**"<<itr->second<<")";
    }

    cout<<endl;
    getchar();
    getchar();
    return 0;

} 
```

希望能帮助到你！

# iphone - 本地存储还是 SQLite？

> ID：13047574
> 
> 赞同：0
> 
> 时间：2012-10-24T10:42:20.227
> 
> 标签：iphone, objective-c, ios, xcode, sqlite

我正在开发我的应用程序，让我可以在我的 iphone 上存储我的在线 DVD 信息。只是想知道使用 localStorage 或 SQLite。此外，我将来会更新我的应用程序，我不想丢失我存储的数据。你推荐我哪一个？！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:51:01.140

> 我的在线 DVD 信息

可以是大信息，然后使用核心数据或SQLite。

> 另外我将来会更新我的应用程序，我不想丢失我存储的数据

如果您在不删除旧版本的情况下进行更新，则 SQLite 数据将保留。这也适用于 NSUserDefault。您可以将钥匙串用于永久数据存储，但用于少量数据。在不了解您的要求的情况下不能说更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:48:11.130

无论如何，我对 localStograge 了解不多，SQLite 会给你很好的选择：

1.  可移植到安卓
2.  可以在不丢失以前的数据库的情况下进行更新。

这是初始化数据库并升级它的示例代码。

```
+(void) InitalizeDB
{
    NSFileManager   *fileManager = [NSFileManager defaultManager];
    NSError         *error;
    NSString        *dbPath = [self getDBPath];
    BOOL            success = [fileManager fileExistsAtPath:dbPath];

    if(!success) 
    {       
        NSString    *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"QuestionsDB.sqlite"];

        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
    if (success)
    {
        if (sqlite3_open([dbPath UTF8String], &gDatabase) != SQLITE_OK)
        {
            sqlite3_close(gDatabase);
            gDatabase = nil;
        }
    }
    if (gDatabase != nil)
        [self Upgrade];
}

+(void)Upgrade
{
    sqlite3         *NewDatabase = nil;
    NSString        *NewDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"QuestionsDB.sqlite"];
    const char      *szVersion = "SELECT DBVersion FROM Version";
    sqlite3_stmt    *sqlOldVersion;
    sqlite3_stmt    *sqlNewVersion;

    if (sqlite3_open([NewDBPath UTF8String], &NewDatabase) != SQLITE_OK)
    {
        sqlite3_close(NewDatabase);
        NewDatabase = nil;
    }

    if (NewDatabase != nil)
    {
        if (sqlite3_prepare_v2(gDatabase, szVersion, -1, &sqlOldVersion, NULL) != SQLITE_OK)
            NSAssert1(0, @"Failed to compile sql statment %s", sqlite3_errmsg(gDatabase));
        if (sqlite3_prepare_v2(NewDatabase, szVersion, -1, &sqlNewVersion, NULL) != SQLITE_OK)
            NSAssert1(0, @"Failed to compile sql statment %s", sqlite3_errmsg(NewDatabase));
        if (sqlite3_step(sqlOldVersion) == SQLITE_ROW && sqlite3_step(sqlNewVersion) == SQLITE_ROW)
        {
            if (sqlite3_column_int(sqlOldVersion, 0) < sqlite3_column_int(sqlNewVersion, 0))
            {
                [self UpgradeCategories:NewDatabase];
                [self UpgradeQuestions:NewDatabase];
                [self UpgradeQuestionChoices:NewDatabase];
            }
        }
        else 
        {
            NSAssert(0, @"Failed to retreive questions database version.");
        }

    }   
    sqlite3_close(NewDatabase);
} 
```

# c# - 如何分块读取大量数据？

> ID：13047575
> 
> 赞同：2
> 
> 时间：2012-10-24T10:42:24.853
> 
> 标签：c#, wcf, soap, chunks

我有一个项目，我应该使用外部 WCF 服务，其方法如下所示：

```
Items catalogItems = externalClient.getCatalogItems(auth, idCatalog, 1, 100); 
```

在调用 getCatalogItems 服务方法后，我应该以这种方式将返回的项目数组转换为原始 SOAP 消息：

```
Message response = Message.CreateMessage(MessageVersion.Default, ReplyAction_GetCatalogItems, catalogItems); 
```

getCatalogItems 服务方法中的最后 2 个参数指定应在每次调用中获取的数据块的大小。例如，如果我们有 1050 条记录，所有这些记录都应该以 100 的块获取 10 次，而以 50 的块获取 1 次。

我知道我应该阅读数据，直到它们可用。我有两个问题：

1.  我怎么知道我应该在哪里继续阅读？例如，如果我已经阅读了 100 条记录的第一部分，我如何知道 reader 的当前位置在哪里？

2.  我怎么知道我什么时候到达终点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:55:00.030

一种方法是让客户端负责记住状态（即客户端当前所在的页码）。

因此，您可以更改方法调用以包括页码和每页参数的项目：

```
Items catalogItems = externalClient.getCatalogItems(auth, idCatalog, pageNumber, itemsPerPage); 
```

然后，该服务基本上可以根据 pageNumber 和 itemsPerPage 值选择一组项目，并且它不需要保存状态。（注意：如果您使用数据库作为项目的存储库，这可以很容易地转换为选择查询）

您也可以更改返回值以包括项目总数：示例：

```
CatalogResponse respone = externalClient.getCatalogItems(auth, idCatalog, pageNumber, itemsPerPage);

public class CatalogResponse 
{
   private _totalItems;
   private _items;
} 
```

这也为客户端提供了灵活性来确定每次调用中要接收的项目块，并为最终用户选择页面大小提供了灵活性。

# c++ - 我可以使用 std::copy 将数据的位模式从整数向量复制到无符号字符数组吗

> ID：13047576
> 
> 赞同：1
> 
> 时间：2012-10-24T10:42:28.240
> 
> 标签：c++, vector, copy, std, memcpy

最近我一直在尝试更新一些代码以利用标准 C++ 库函数而不是旧的 C 样式函数。特别是，我尝试执行以下操作（为简单起见，人工工作示例 - 我知道代码很难看，但它简明扼要地说明了问题）：

```
std::vector<int> vData;
vData.push_back(10990);
vData.push_back(11990);
vData.push_back(12990);
vData.push_back(13990);

unsigned char szBuffer[100];
memset(szBuffer,0,sizeof(szBuffer));

std::copy(vData.begin(),vData.end(),szBuffer); 
```

我期望这会以与我尝试替换的代码类似的方式运行：

```
memcpy(szBuffer,&vData[0],sizeof(int)*vData.size()); 
```

但是调试代码，很明显`std::copy`我写的代码只是写入`unsigned char`缓冲区的前4个字节，而不是向量中4个整数的完整位模式。有人可以告诉我我做错了什么，还是只是我不能`std::copy`以这种方式使用并且应该坚持使用`memcpy`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:47:06.310

坚持`memcpy`，`std::copy`是智能的，它理解所涉及的类型并正确转换`int`为`unsigned char`使用标准转换。`memcpy`是无知的，这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:33:23.803

> 我期待这会以与我试图替换的代码类似的方式表现......

`std::copy`所写的不能以类似于 a`std::memcpy`或的方式表现，因为的元素与 的元素`std::memmove`之间的类型不匹配。克服这种类型不匹配的一种方法是将其转换为：`std::vector<int>``unsigned char szBuffer[100]``szBuffer``int*`

```
std::copy(vData.begin(),vData.end(),reinterpret_cast<int*>(szBuffer)); 
```

那`reinterpret_cast`是个人喜好问题。我宁愿看到一些尖叫“危险，危险，威尔罗宾逊！”的东西。对于可以通过隐藏但不会消除 UB 可能性的 C 样式转换调用未定义行为的东西。我（和我的项目经理霸主）可以 grep 为`reinterpret_cast`.

UB 的潜力在这里是真实的，因为由于对齐问题，无法保证此演员表是有效的。

另请注意，不能保证`std::copy`将通过`memcpy`或实现`memmove`。标准（2003 年或 2011 年）中没有一个词说`std::copy`需要通过`memcpy`或`memmove`如果可能的话。（旁白：在我见过的每一个实现中，如果这样做会“好像”采用了幼稚的实现，`std::copy`则将通过这种方式实现。）`std::memmove`

从这里切换`std::memcpy`到`std::copy`这里的唯一原因是美学。有时美学会成为阻碍。“愚蠢的一致性是小头脑的妖精。” 我建议坚持使用`std::memcpy`. 它完全符合您的要求，并且这种用法是安全的，因为没有重叠并且缓冲区大小合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:52:09.703

因为标准是的行为（如果不是确切的实现） `std::copy` 相当于：

```
namespace std { 
  template< typename InIter, typename OutIter >
  OutIter std::copy( InIter begin, InIter end, OutIter outp )
  {
     for( ; begin != end; ++begin, ++outp )
     {
         *outp = *begin;
     }
     return outp;
  }
} 
```

这意味着它逐个成员地复制，递增每个迭代器并返回输出中的下一个写入位置。

这与 memcpy 的行为不同，而 memcpy 正是您在这里真正想要的。使用 memcpy 没有任何问题（即使某个 Microsoft 编译器告诉您它不安全，但它可能是不安全的，但如果您不能正确驾驶卡车，那么驾驶卡车也是如此，这并不意味着没有人可以驾驶） .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T11:10:18.283

要将向量的内容解释为原始内存，`reinterpret_cast`请使用`unsigned char *`：

```
std::copy(reinterpret_cast<unsigned char *>(&*vData.begin()),
          reinterpret_cast<unsigned char *>(&*vData.end()), szBuffer); 
```

您需要间接并获取开始和结束元素的地址，因为不能保证它`vector::iterator`是指针类型。

这是为数不多的有保证的安全使用`reinterpret_cast`.

# c++ - C++ 移动/删除符号

> ID：13047578
> 
> 赞同：1
> 
> 时间：2012-10-24T10:42:33.857
> 
> 标签：c++, c++11

假设我有一个`.cpp`文件，我必须在其中包含一个声明某个符号的第三方头文件（我们称之为`div`）。我不需要这个符号，但我需要定义我自己的`div`符号。但是，原始符号可能会被头文件的其他部分使用。是否可以从全局命名空间中删除符号（类似于`undef`ing 宏）？

我想要这样的东西：

```
#include <string> //stdlib.h defines div symbol
//do some symbol removal magic here
std::string div; 
```

`-std=c++11`使用带有选项的 gcc-4.7/clang 进行编译。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:46:37.957

您不能从定义符号的命名空间（包括全局命名空间）中删除符号。

将您自己的包装`div`在您自己的命名空间中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T10:52:04.820

基本上，**没有**。

但是正如其他人所说，您可以使用命名空间来获得与实际上本质上完全不同的符号相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T12:59:04.473

我从未使用过它，但您可以尝试使用[GNU objcopy](http://sourceware.org/binutils/docs/binutils/objcopy.html)（如[https://stackoverflow.com/a/1950629/721929](https://stackoverflow.com/a/1950629/721929)中的建议）。

但是我认为如果您可以控制源代码，则可以避免这种情况。测试这是否有效将花费大量时间。

```
--redefine-sym old=new
Change the name of a symbol old, to new. This can be useful when one is 
trying link two things together for which you have no source, 
and there are name collisions. 

objcopy --redefine-sym oldNew=newNew libBlue.a 
```

# vba - 一定时间段内校验值相同

> ID：13047580
> 
> 赞同：1
> 
> 时间：2012-10-24T10:42:40.100
> 
> 标签：vba, excel

我有两个带有相同工作表的工作簿，我需要测试它们（来自不同来源）获得的数据是否相同或在某个阈值内。这个，我已经可以做的很好了。我创建了第三个工作簿来计算两者之间的差异。

但是，问题是一个工作簿在第二个之前更新几秒钟，这意味着如果一个单元格获得两次快速更新，我的计算就会落后。

所以我在想的是我记下工作簿 1 中的单元格值（更新速度更快的工作簿），如果在`x`工作簿 2 单元格之后的任何时间长达几秒钟的值与记录的值相同，它们就很好。

...但是我将如何解决这个问题，VBA 甚至是最好的工具吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:55:54.150

使用时间戳和 vba - 甚至可能是条件格式和一些好的公式 - 可以肯定地解决这个问题。

但是，如果没有任何工作要做，向您提供解决方案是相当大的一步。

基本上，您只需创建时间戳（在内部作为变量，或在单元格中的导入过程中），然后在阈值用完后比较您的值。如果您比较的单元格的值仍然匹配，那么没关系。

但是，这完全取决于您如何解决数据输入和比较问题。

我的基本感觉，在我红了你的问题之后：“你为什么不降低计算的更新率？”

另一个想法：只需使用一个指示单元格，在 1 和 0 左右之间切换，以指示更新是否已经发生 - 因此，如果进行比较，则比较值 + 指示符。这基本上是使用没有时间的时间戳。

# r - 将一行中的值添加到R中的前一个值

> ID：13047582
> 
> 赞同：5
> 
> 时间：2012-10-24T10:42:43.363
> 
> 标签：r, row

我想在 R 中执行一个在 excel 中很容易完成的简单操作：

我有一个由 5045 个名为 K 的条目组成的 col。我想创建第二个 col L，其中第一个值为 L1=100+K[1]，第二个值为 L2=L1+K[2]，第三个值为 L3= L2+K[3] 以此类推。

有没有一种简单的方法可以在 R 中做到这一点？在 Excel 中，只需拉下 col。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:49:59.097

尝试类似的东西

```
L <- 100 + cumsum(K) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T10:50:22.663

一种方法是使用`cumsum()`和欺骗一点。例如，给定`K`：

```
K <- 1:10 
```

为了简单起见，我要添加`1`（不是`100`）到`K[1]`，我们要生成：

```
> 1 + K[1]
[1] 2
> (1 + K[1]) + K[2]
[1] 4
> ((1 + K[1]) + K[2]) + K[3]
[1] 7
.... 
```

这是一个累积和。我们需要对要添加到第一个元素的常量进行一些欺骗，因为我们只希望它影响第一个元素，而不是添加到每个元素。因此这是**错误的**

```
> L <- cumsum(1 + K) 
> L
 [1]  2  5  9 14 20 27 35 44 54 65 
```

我们真正想要的是：

```
> L <- cumsum(c(1, K))[-1]
> L
 [1]  2  4  7 11 16 22 29 37 46 56 
```

其中，我们将常量连接到向量`K`作为第一个元素并应用于该向量`cumsum()`，但从 中删除输出的第一个元素`cumsum()`。

这当然可以以稍微简单的方式完成：

```
> L <- 1 + cumsum(K)
> L
 [1]  2  4  7 11 16 22 29 37 46 56 
```

*即*计算`cumusum()`然后添加常量（我现在看到的是@gd047 在他们的答案中建议的内容。）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:41:43.687

如 Paul Hiemstra 所示，内置函数`cumsum()`很快。但是 for 循环的解决方案可以通过使用编译器包来加速。

```
library(compiler)
fls_compiled <- cmpfun(for_loop_solution) 
```

然后使用相同的数据让我们运行 `benchmark`如下

```
benchmark(for_loop_solution(sample_data), 
          cumsum_solution(sample_data),
          fls_compiled(sample_data), 
          replications = 100)
                            test replications elapsed relative user.self
2   cumsum_solution(sample_data)          100   0.013    1.000     0.013
3      fls_compiled(sample_data)          100   0.726   55.846     0.717
1 for_loop_solution(sample_data)          100   4.417  339.769     3.723
  sys.self user.child sys.child
2    0.000          0         0
3    0.006          0         0
1    0.031          0         0 
```

所以尽可能使用内置函数。如果没有内置，请尝试编译器包。它通常提供更快的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:56:01.907

下面显示了一个`for`基于循环的解决方案。就速度而言，这可能不是您想要的，其中矢量化函数`cumsum`要快得多。

```
a = 1:10
b = vector(mode = "numeric", length = length(a))
b[1] = 1 + a[1]

for(idx in 2:length(a)) {
  b[idx] = a[idx] + b[idx - 1]
} 
```

一些时间安排：

```
require(rbenchmark)

for_loop_solution = function(a) {
    b = vector(mode = "numeric", length = length(a))
    b[1] = 1 + a[1]

    for(idx in 2:length(a)) {
      b[idx] = a[idx] + b[idx - 1]
    } 
    return(invisible(b))
}

cumsum_solution = function(a) {
   return(1 + cumsum(a))
}

sample_data = 1:10e3
benchmark(for_loop_solution(sample_data), 
          cumsum_solution(sample_data), 
          replications = 100)
                            test replications elapsed relative user.self
2   cumsum_solution(sample_data)          100   0.013    1.000     0.011
1 for_loop_solution(sample_data)          100   3.647  280.538     3.415
  sys.self user.child sys.child
2    0.002          0         0
1    0.006          0         0 
```

这表明 using`cumsum`比使用显式 for 循环快几百倍。当长度增加时，这种影响会更加明显`sample_data`。*

# xquery - XQuery 嵌套循环错误

> ID：13047583
> 
> 赞同：0
> 
> 时间：2012-10-24T10:42:44.730
> 
> 标签：xquery, oracle-osm

我正在使用`OSM`7.2.0.3 并且我有一个带有`Order Recognition Rule`, 的墨盒`Order Data Rule`（在转换选项卡内）

在 ODR 我有这个 XQuery 代码：

```
declare namespace im="http://xxx";
declare namespace xs="http://www.w3.org/2001/XMLSchema";

declare variable $order := fn:root(.)/im:Order;

<_root>
  <Order>
  {
    for $moli in $order/MainOrderLineItem
      return {
        <OrderLineItem>
          {$moli/LineItemAttributeInfo/LineItemAttribute}
        </OrderLineItem>
        {
          for $oli in $moli/OrderLineItem
          return 
            <OrderLineItem>
              {$oli/LineItemAttributeInfo/LineItemAttribute}
            </OrderLineItem>
        }
      }
  }
  </Order>
</_root> 
```

OSM 中没有编译错误，但在运行时我得到：

```
Invalid Order Specification Fault
Order data expression failed due to oracle.communications.ordermanagement.rule.XMLRuleException 
```

我通过 Web 服务提交 XML 来运行 OSM。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:37:34.647

`return`ed XML 实际上应该在括号中而不是大括号中。`OrderLineItem`在第一个返回的元素和*FLWOR*表达式之间还需要有一个逗号，而不是用大括号括起来：

```
declare namespace im="http://xxx";
declare namespace xs="http://www.w3.org/2001/XMLSchema";

declare variable $order := fn:root(.)/im:Order;

<_root>
  <Order>{
    for $moli in $order/MainOrderLineItem
    return (
      <OrderLineItem>
        {$moli/LineItemAttributeInfo/LineItemAttribute}
      </OrderLineItem>,
      for $oli in $moli/OrderLineItem
      return 
        <OrderLineItem>
          {$oli/LineItemAttributeInfo/LineItemAttribute}
        </OrderLineItem>
    )
  }</Order>
</_root> 
```

# jquery - 如果页面上有多个表单，如何使用 jQuery bind-submit 提交一个表单？

> ID：13047584
> 
> 赞同：3
> 
> 时间：2012-10-24T10:42:45.157
> 
> 标签：jquery, submit, bind, forms, http-post

我将 jQuery 的提交函数绑定到表单标签。这适用于一个表单，但如果我有多个表单，它会提交 Post 变量中所有表单的数据。

我怎样才能只提交一份表格？

```
$('form').bind('submit',function() {
    var data = $('form').serializeAnything();
    $.post('forms/form.ajax.submit.php',data,function(response) {
        ...
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:46:44.713

为您的表单使用 ID 并将其用于数据变量。

```
var data = $('#this_form').serializeAnything(); 
```

或通过查找父表单来遍历`$(this).closest('form').serializeAnything();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T16:28:56.247

而不是`$('form').serializeAnything();`你想要的`$(this).serializeAnything();`（或者，也许，`$(this).serialize();`如果 jQuery 的标准序列化函数可以）。

```
/* attach a submit handler to each form */
$('form').submit(function (event) {

    /* stop form from submitting normally */
    event.preventDefault();

    /* get some values from elements on the page: */
    var $form = $(this),
        form_data = $form.serialize(),
        url = $form.attr('action');

    /* Send the data using post */
    var posting = $.post(url, form_data);
    console.log('finished ajax post');

    /* Put the results in a div */
    posting.done(function (data) {
        console.log('now load response');
        $('#result').empty().append( $(data) );
    });
}); 
```

请参阅[http://jsfiddle.net/jhfrench/QjaTq/29/ 上的工作示例](http://jsfiddle.net/jhfrench/QjaTq/29/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:58:36.310

您可以使用选择器 id 或类来完成。

例如

var data = $( '#formID' ).serializeAnything();

var data = $( '.formCLASS' ).serializeAnything();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:45:27.587

```
var data;
data=$('form1').serializeAnything();
data+=$('form2').serializeAnything();
data+=$('form3').serializeAnything(); 
```

# jquery - 将函数添加到 jQuery 中的函数

> ID：13047585
> 
> 赞同：2
> 
> 时间：2012-10-24T10:42:48.973
> 
> 标签：jquery, function

我想这是一个容易解决的问题，对谷歌来说有点棘手。我有这个函数，它随机生成一些数字 1 秒，直到它达到实际值（`number()`），只是一个浮华的效果。但是，该值是一个 7 位数字，我想用逗号分隔它。我对这两个功能都有工作功能，但我不知道如何让它们一起工作。我试图将`digits()`函数添加到我的`number()`函数中，但是当数字是随机生成时，我无法显示逗号，只有在完成后才能显示。

这是我的`number()`代码：

```
(function($){
    $.fn.extend({
        number: function(options) {
            if ( ! this.length)
                return false;

            this.defaults = {
                endAt: 90,
                numClass: 'autogen-num',
                interval: 65  // ms
            };
            var settings = $.extend({}, this.defaults, options);

            var $num = $('<span/>', {
                'class': settings.numClass
            });

            return this.each(function() {
                var $this = $(this);

                // Wrap each number in a tag.
                var frag = document.createDocumentFragment(),
                    numLen = settings.endAt.toString().length;
                for (x = 0; x < numLen; x++) {
                    var rand_num = Math.floor( Math.random() * 10 );
                    frag.appendChild( $num.clone().text(rand_num)[0] )
                }
                $this.empty().append(frag);

                var get_next_num = function(num) {
                    ++num;
                    if (num > 9) return 0;
                    return num;
                };

                // Iterate each number.
                $this.find('.' + settings.numClass).each(function() {
                    var $num = $(this),
                        num = parseInt( $num.text() );

                    var interval = setInterval( function() {
                        num = get_next_num(num);
                        $num.text(num);
                    }, settings.interval);

                    setTimeout( function() {
                        clearInterval(interval);
                    }, settings.duration * 1000 - settings.interval);
                });

                setTimeout( function() {
                    $this.text( settings.endAt.toString() );
                }, settings.duration * 1000);
            });
        }
    });
})(jQuery); 
```

这是我的`digits()`代码：

```
$.fn.digits = function(){ 
    return this.each(function(){ 
        $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
    })
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:05:00.760

numbers 函数一次只替换一个数字，并且它依赖于数字是数字，因此在循环期间用包含逗号的字符串替换它们并不是一个真正的选择！

我重建了 numbers 函数来处理字符串。不知道它是否是你要找的东西，但它是我能得到的最接近的：

```
(function($){
    $.fn.numAnim = function(options) {
        if (!this.length) return false;

        this.defaults = {
            endAt: 2060,
            numClass: 'autogen-num',
            duration: 1,   // seconds
            interval: 30  // ms
        };
        var settings = $.extend({}, this.defaults, options),
            $this = this,
            interval = setInterval(function() {
                var numb = parseInt(Math.random() * (Math.pow(10, settings.endAt.toString().length)));
                $this.text(numb.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
            }, settings.interval),
            timer = setTimeout(function() {
                clearInterval(interval);
                $this.text(settings.endAt.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
            }, 1000*settings.duration);
    }
})(jQuery);

$("#number").numAnim({
    endAt: 4103518,
    duration: 1
});​ 
```

[**小提琴**](http://jsfiddle.net/XFF4M/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:28:36.643

您正在使用 jquery，但不知道您是否可以在其中放置回调 anyehrere。函数完成后触发回调。

在解决方法方面，您是说它会生成一个 1 秒的随机数，但您也说它有 7 位数字。无论哪种方式，您都会得到他的逻辑，并且肯定可以做出调整。

1.  您创建一个布尔变量，一旦您的第二个（1000 毫秒）结束或您的随机数长度达到 7，它会将布尔变量切换为 true。
2.  您稍后在您的代码中，添加一个 while 循环，直到该布尔值设置为 true 并从那里触发您的第二个函数。

我敢肯定，这是做到这一点的众多方法之一。希望能帮助到你。也许有人有更好的建议。谢尔斯！

# android - 在哪里下载 Android SDK 18

> ID：13047594
> 
> 赞同：-3
> 
> 时间：2012-10-24T10:43:48.513
> 
> 标签：android, sdk

> **可能重复：**
> [日食的 ADT 18 在哪里获得？](https://stackoverflow.com/questions/13046779/where-do-get-adt-18-for-eclipse)

任何在哪里下载 Android SDK 18 的想法，新的 20 从这里[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)将只适用于 ADT 20，我相信这很糟糕。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:50:17.070

我认为您的意思是 SDK 工具的 v18。找到工具包的名称，并在 URL 前面使用它。

例如，**windows 版本**为：

```
http://dl-ssl.google.com/android/repository/tools_r18-windows.zip 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:48:49.903

您可以从以下链接获取版本 18。希望这可以帮助！

[http://dl.google.com/android/installer_r18-windows.exe](http://dl.google.com/android/installer_r18-windows.exe)

将 18 更改为其他版本以下载相应的安装程序。

# android - 如何在 Android 中卷曲布局

> ID：13047603
> 
> 赞同：1
> 
> 时间：2012-10-24T10:44:18.030
> 
> 标签：android, android-layout

我以前尝试过这些：

[Android 页面卷曲对 layout/s 的影响](https://stackoverflow.com/questions/8180592/android-page-curl-effect-on-layout-s)

[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

这很有帮助，但我想要的是卷曲布局，带有按钮、动画或一些控件。不仅仅是卷曲图像。请帮忙。

# web-services - 使用 SOAP UI 进行负载测试

> ID：13047604
> 
> 赞同：1
> 
> 时间：2012-10-24T10:44:24.697
> 
> 标签：web-services, soap, soapui, load-testing

我有一个`SOAP UI 4.5.1`，我进行了负载测试，它工作正常。我的问题是我每次都运行相同的请求，我需要更改我发送的肥皂请求的值。

例如，我有一个我的肥皂请求块：

```
 <ns:Assessment>
    <ns:Project>
       <ns:ProviderId>SHL</ns:ProviderId>
       <ns:ProjectId>SampleAssessment</ns:ProjectId>
    </ns:Project>
 </ns:Assessment> 
```

提供者 ID：SHL 项目 ID：SampleAssessment

有没有办法让这些值从某种间隔发生变化？例如：提供商 ID`[SHL, SLH, LHS]` 项目 ID`[SampleAssessment, TestAssessment, AnotherAssessment]`

通过负载测试，我发出了三个请求，因此第一个请求值如下所示：

```
 <ns:Assessment>
    <ns:Project>
       <ns:ProviderId>SHL</ns:ProviderId>
       <ns:ProjectId>SampleAssessment</ns:ProjectId>
    </ns:Project>
 </ns:Assessment> 
```

对于第二个这样的：

```
 <ns:Assessment>
    <ns:Project>
       <ns:ProviderId>SLH</ns:ProviderId>
       <ns:ProjectId>TestAssessment</ns:ProjectId>
    </ns:Project>
 </ns:Assessment> 
```

等等...

有没有办法通过 SOAP UI 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:25:07.587

From my experience, you will need to use a Groovy Script step.

For example, if you have a step before your request that is a script, you can use something like:

```
context.setProperty("ProviderId", "SHL") 
```

Then in your request, use:

```
<ns:ProviderId>${ProviderId}</ns:ProviderId> 
```

Of course, this doesn't buy you much by itself. There are few ways to vary what the context.setProperty("ProviderId", "SHL") line will set. You can create a collection and iterate over it using something like:

```
 def providers = ['ABC', 'DEF', 'GHI', 'JKL']

 providers.each() {
     context.setProperty("ProviderId", it)
     testRunner.runTestStepByName( "nameofteststep" )
 } 
```

Where "nameofteststep" is the name of the Soap Request test step. This might sound odd, but if you right click the test step and disable it, the groovy script will still be able to execute it but it will not run sequentially. By that I mean that the groovy script will run it 4 times, but it won't run a fifth time when the script is complete because it is after the script. Then you just need to keep in mind that each load test thread makes four requests, but I am pretty sure that the SoapUI statistics will take this into account for you... might want to keep an eye out for it, though.

Alternatively, you could check the 'threadIndex' and set a the context variable based on that. A bit like this here: [Log ThreadCount](https://stackoverflow.com/questions/10543071/how-can-i-log-the-current-threadcount-in-soapui).

You could also use a collection without a loop and increment an index that you save as a testcase property and send the string corresponding to the index.

Personally, I think the first way is the most straightforward but I can provide an example of the other ones if you like.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:16:17.113

有一种简单的方法可以做到这一点，而无需编写 groovy 脚本。

创建测试用例后，您应该包括以下测试步骤：

1-数据源

2-请求

三环

数据源将读取一个 excel 文件（或其他数据源方法，如 XML、groovy、JDBC、gird .. 但是 excel 是最简单的一种）。您应该包含数据（您需要在请求中更改）

在测试请求中，您需要右键单击并选择“获取数据”。请注意，您的测试请求应如下所示

```
<ns:ProviderId>${ProviderId}</ns:ProviderId> 
```

然后最后一步是“循环”。这用于返回第一步，直到数据结束。

我希望这有帮助。

# git - 可以在 git repo 中保留（相当少）数量的图像/二进制数据吗？

> ID：13047605
> 
> 赞同：2
> 
> 时间：2012-10-24T10:44:26.010
> 
> 标签：git, github

相关：[这个 SO question](https://stackoverflow.com/questions/5756324/how-do-i-handle-images-in-a-git-repo)。

在上述问题中，OP 询问的是一个包含大量二进制数据（即图像）的项目。我有一个类似的问题，但规模较小。我正在开发一个托管在 github 上的项目。该项目是一个带有 GUI 的应用程序，因此我有一些将要使用的图像。

图片的数量相当少（可能不超过一百张），其中大多数是小型 PNG。由于我在不同的机器上工作，所以每次都能获得一整套用于构建的资源对我来说很重要。现在我不确定我应该如何处理这些图像。到目前为止，我可以想到两个选择：

*   将图像与代码一起保存在存储库中（顺便说一句，它们不太可能更改，但以后可能会添加新的）
*   将图像保存在其他地方（例如，在云存储中）并在每次需要时下载它们。

我很乐意选择第一个，因此我的问题是：

将二进制数据保存在 repo 中是否会以不希望的方式影响它（使其变慢，或大幅增加它的大小或其他任何东西）？或者，考虑到我拥有的数据量，我不应该担心它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:53:45.520

我们开发了一个中等大小的 Web 应用程序，所以我们也有常见的图像。我没有看到任何不利影响。

所以，在我看来，这完全没问题。我宁愿将构建所需的一切都打包到一个存储库中并一起进行版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:54:21.613

你可以在 git repos 中有二进制文件。它在变更集方面效率不高，但 git 可以忍受。

您的图像可能不会有太大变化，所以这不是一个大问题。

我有带有 Excel 文件等的 git repos。它可以工作。我更喜欢将这些东西放在我的仓库中，而不是其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:54:41.113

我会说再看看你提到的问题的答案。这并不是一个真正的问题（尤其是对于拥有少量资产的您而言）。

如果您将图像放在云中，您将没有可追溯的历史记录。因此，不容易恢复到以前的图像、恢复已删除的图像以及所有其他版本控制优势。

# ruby - rvm 中每个 ruby 版本的不同 ruby gem 版本

> ID：13047609
> 
> 赞同：6
> 
> 时间：2012-10-24T10:44:44.170
> 
> 标签：ruby, rubygems, rvm

我通过 rvm 安装了 ruby​​ 1.8.7 和 1.9.3。对于每个 ruby​​ 版本，我想：

*   将 gem 1.3.7 用于 ruby​​ 1.8.7
*   将 gem 1.8.x 用于 ruby​​ 1.9.3

如何在 rvm 中设置上述内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:03:56.397

```
$ rvm use 1.8.7
$ rvm rubygems 1.3.7
$ rvm use 1.9.3
$ rvm rubygems latest-1.8
$ gem -v
1.8.24
$ rvm use 1.8.7
$ gem -v
1.3.7 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T12:33:13.953

当安装 rvm 然后 rvm install ruby​​ --version 它采用最新的 ruby​​gems 版本。因此，只需按照以下步骤操作：

1.  `rvm use 1.8.7`
2.  `gem -v`，例如`1.8.24`这样的显示
    如果您想使用 ruby​​gems 特定版本，只需遵循步骤#3 和#4。
    这是用于在 rvm 中设置 ruby​​gems 的语法
3.  `rvm rubygems [x.y.z|latest-x.y|latest|remove]`
    例如这样：
    检索rubygems-1.3.7

    ```
    % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
    100  284k  100  284k    0     0  94166      0  0:00:03  0:00:03 --:--:--  125k
    Extracting rubygems-1.3.7 ...
    Removing old Rubygems files...
    Installing rubygems-1.3.7 for ruby-1.8.7-p371 ...
    Installation of rubygems completed successfully. 
    ```

    然后

4.  `gem -v`=> 它显示 1.3.7

5.  `rvm rubygems 1.3.7`

如果您想使用任何其他版本，请转到第 3 步

前任：`rvm rubygems latest`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-05T19:54:04.997

如果您已经在 rvm 中为 1.3.7 和 1.8.x 创建了 gemset，请跳过此步骤。否则，您需要创建 gemset。

以下是如何创建 gemset 然后切换到它： rvm 1.8.7 # 切换到 ruby​​ 1.8.7 rvm gemset create 1.3.7 # 你可能必须这样做： rvm --force ruby​​gems 1.3.7 rvm gemset使用 1.3.7 # 使用它

下次你想使用 ruby​​ 1.8.7 和 gemset 1.3.7 你只需要这样做： rvm use 1.8.7@1.3.7 # 这设置了 ruby​​ 版本和 gem 版本 ruby​​ -v # 检查 ruby​​ 版本，应该= 1.8.7 gem --version # 检查 gemset 版本，应该 = 1.3.7

对 ruby​​ 1.9.3 和 gemset 1.8.x 重复此操作。

您可以在此处了解如何执行此操作并找到其他 rvm 相关主题的问题的答案：[http ://rvm.io/gemsets/using](http://rvm.io/gemsets/using)

# php - 在PHP中的非字母数字上拆分字符串？php的本机功能可以吗？

> ID：13047610
> 
> 赞同：1
> 
> 时间：2012-10-24T10:44:44.713
> 
> 标签：php, regex, split, native, pcre

我试图在非字母数字字符上拆分字符串，或者简单地说我想拆分单词。我立即想到的方法是使用正则表达式。

**例子：**
`$string = 'php_php-php php';
$splitArr = preg_split('/[^a-z0-9]/i', $string);`

但是我发现这种方法存在两个问题。

1.  它不是原生的 php 函数，完全依赖于服务器上运行的 PCRE 库。
2.  一个同样重要的问题是，如果我在一个单词中有标点符号怎么办？
    **示例：** 现在这会将字符串溢出， 但我希望它为
    `$string = 'U.S.A-men's-vote';
    $splitArr = preg_split('/[^a-z0-9]/i', $string);`
    `[{U}{S}{A}{men}{s}{vote}]`
    `[{U.S.A}{men's}{vote}]`

所以我的问题是：

*   我们如何根据单词来拆分它们？
*   是否有可能使用 php 本机函数或以我们不依赖的其他方式来做到这一点？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:58:28.517

听起来像是[str_word_count()](http://www.php.net/manual/en/function.str-word-count.php)的情况，第二个参数使用经常被遗忘的 1 或 2 值，第三个参数包括连字符、句号和撇号（或您希望视为单词部分的任何其他字符）作为一部分一个词；后跟一个[array_walk()](http://www.php.net/manual/en/function.array-walk.php)从结果数组值的开头或结尾[修剪](http://www.php.net/manual/en/function.trim.php)这些字符，因此只有在它们实际嵌入“单词”时才包含它们

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T10:47:52.853

要么你安装了 PHP（然后你也有 PCRE），要么你没有。所以你的第一点不是问题。

然后，如果您想从拆分分隔符中排除标点符号，您需要将它们添加到您的字符类中：

```
preg_split('/[^a-z0-9.\']+/i', $string); 
```

如果您想根据上下文以不同的方式处理标点字符（例如，如果后跟空格，则仅将点作为分隔符），您也可以这样做：

```
preg_split('/\.\s+|[^a-z0-9.\']+/i', $string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:59:46.450

根据我的评论，您可能想尝试（根据需要添加尽可能多的分隔符）

```
$splitArr = preg_split('/[\s,!\?;:-]+|[\.]\s+/', $string, -1, PREG_SPLIT_NO_EMPTY); 
```

然后，您必须处理“引用”单词的情况（在正则表达式中做到这一点并不容易，因为 'is" "this' 引用了？以及如何？）。

所以我认为最好将 ' 和 " 保留在单词中（这样 "it's" 是一个单词，而 "they 'll" 是两个单词），然后分别处理这些情况。例如，正则表达式会遇到一些麻烦正确处理

```
they 're 'just friends'. Or that's what they say. 
```

虽然有“'re”和一个单词序列，其中第一个是左引号，最后一个是右引号，第一个不是已知序列（'s，'re，'ll，'d ...）可以在应用程序级别处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:51:15.763

这不是一个 php 问题，而是一个合乎逻辑的问题。

单词可以用 - 连接。缩写可能看起来像短句。

您可以通过创建仅适合此特定短语的解决方案来直接匹配您的示例。但是您无法为所有可能的短语找到解决方案。这将需要基于神经计算的内容识别。

# django - 使用crispy-forms时自定义模板中的form.errors位置

> ID：13047613
> 
> 赞同：2
> 
> 时间：2012-10-24T10:44:54.527
> 
> 标签：django, django-crispy-forms

[仅当在一页上使用多个清晰表单](https://github.com/maraujop/django-crispy-forms)时，如何在一个位置显示 form.errors ？

例如，我的模板中有以下表格：

```
<form enctype="multipart/form-data" action="" method="post">{% csrf_token %}
    {% load crispy_forms_tags %}
    {% crispy form_A %}
    {% if crispy form_B %}
        {% crispy crispy form_B %}
    {% endif %}
    <input type="submit" value="Submit"/>
</form> 
```

请注意，对于 form_A 和 form_B，self.helper.form_tag 都设置为 False。

目前，当在 form_B 的 clean() 方法中引发 ValidationError 时，form.errors 将显示在 form_B 中（在 form_A 下方）。我希望将 form_A 和 form_B 的所有 form.errors 显示在同一位置（在页面顶部）。有没有办法用脆皮表格自定义这个输出？

# vb.net - 限制运行线程数？

> ID：13047614
> 
> 赞同：0
> 
> 时间：2012-10-24T10:44:56.670
> 
> 标签：vb.net, multithreading

我继承了下面的一些工作正常的代码，唯一的问题是，我希望能够限制任何时候运行的线程数，目前我有大约 8-10 个并行运行的作业，我想要随时将线程数限制为 3 或 4，这是否可以使用下面的代码而无需太多更改？

```
Public Sub threading_Example()

 Dim threadList As New List(Of Thread)

 For n = 0 To numJobs 'about 8-10 normally

     Dim new_job As New System.Threading.Thread(New System.Threading.ParameterizedThreadStart(AddressOf do_Job))
     Dim job As New Job

     'job.stuff = stuff

     newJob.Start(job)
     threadList.Add(new_job)

 Next

 For Each t As Thread In threadList
     t.Join()
 Next

End Sub

Public Sub do_Job(ByVal job As Object)
   'do task 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:25:30.307

根据您使用的版本，您也可以简单地试试这个：

```
Parallel.For(0, 10, 
            (New ParallelOptions() With {.MaxDegreeOfParallelism = 4}), 
             Sub(i As Integer)
                ' do job        
                System.Threading.Thread.Sleep(2000)
                Debug.Print("done no. {0}", i)
             End Sub) 
```

无需任务列表并加入线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:25:54.607

尝试使用[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)，例如：

```
ReadOnly Sem As New Semaphore(3, 4)

    Sub Main()

        Dim threadList As New List(Of Thread)
        Dim numJobs As Integer
        For n = 0 To numJobs

            Dim new_job As New System.Threading.Thread(New System.Threading.ParameterizedThreadStart(AddressOf do_Job))

            new_job.Start()
            threadList.Add(new_job)

        Next

        For Each t As Thread In threadList
            t.Join()
        Next

    End Sub

    Public Sub do_Job(ByVal job As Object)

        Sem.WaitOne()
        'only 3 or 4 threads at time can do task
        Sem.Release()
    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:54:29.160

我的建议是使用线程池。线程池内置了许多优化。例如，线程池可以确定机器拥有的内核数，并相应地调度线程数。如果创建的线程数量更多但没有得到正确利用，线程池将杀死额外的线程。

考虑使用线程池重构代码。线程池还可以选择限制线程数（但不推荐这样做。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:55:21.827

我建议改用 ThreadPool。您可以使用 SetMin|MaxThreads 方法限制它使用的线程数。

# windows-8 - Visual Studio 2012 构建的应用程序会默认为 Metro 风格吗？

> ID：13047615
> 
> 赞同：0
> 
> 时间：2012-10-24T10:45:07.223
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

我正计划构建一个可以在 Windows 7 和 8 上运行的应用程序。而且我希望它是 Metro（现代 UI）风格。我的问题是，如果我使用 Visual Studio 2012 构建应用程序，默认情况下会是 Metro 风格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:55:59.350

没有

Metro 风格仅适用于 Windows 8。如果你想创建一个可以在win8和win7上运行的应用程序，你必须创建一个普通的windows桌面应用程序。还要记住，这样的应用程序不适用于更便宜（WinRT 版本）的 Surface 平板电脑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:45:22.447

Windows 8 APP 可以更具体地称为只能从 Windows 应用商店安装和使用的应用程序。天生就是都市人。但是，如果您深入研究此类应用程序的项目，您会发现 Metro 风格只是在 WPF 和 Silverlight 中应用为 CSS 或 Theme.xaml 的主题。

您可以创建可用于针对多个平台的库。此外，很少有 Metro 风格主题可用于 .NET 4.0 和 4.5 应用程序，它们旨在在 Windows 7 上运行以保持 UI 布局一致。

# iphone - 我可以在 iTunes 1024 图标上应用圆角和阴影吗？

> ID：13047621
> 
> 赞同：0
> 
> 时间：2012-10-24T10:45:21.343
> 
> 标签：iphone, ios, icons, itunes

“应用管理中iTunesConnect内提交的iTunes图标不得​​有圆角或光泽”

我可以为“预渲染”添加设置以使其具有预设的角和光泽吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:05:00.763

你可以对图像做任何事情。但我猜rounded不会被接受，因为Itunes会自己渲染它。如果你把阴影。Itunes 将在其中添加另一个阴影，因此您的图像将不会按您的需要显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:19:44.513

角落将被渲染的区域（它们会在那里，因为系统会自动添加它们！没有办法围绕角落。）只是永远不会显示在任何地方。你可以在那个区域做你想做的事，但它没有任何用处。

但我不建议您为图像添加角，因为角在不同的情况/分辨率下没有相同的半径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:08:11.670

根据我的经验，不建议在上面涂上阴影，因为苹果会自己涂上阴影。事实上，您的应用可能不会被接受。此外，图标等还有其他条件（阅读 iTunes 良好实践）。

# mysql - 求sql外行，谁能告诉我这个sql是否高效？

> ID：13047625
> 
> 赞同：5
> 
> 时间：2012-10-24T10:45:27.403
> 
> 标签：mysql, sql

我正在写一个这样的sql

```
SELECT uid
  FROM search
 WHERE MATCH(product) AGAINST('football basketball')
   AND status=1
 ORDER BY MATCH(product) AGAINST('football basketball') DESC 
```

我在mysql中运行它没问题，但我不确定它是否有效。我想知道这个“ **MATCH(product) AGAINST('football Basketball')** ”是否跑了两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:09:09.760

这可能无需担心：

```
SELECT uid, MATCH(product) AGAINST('football basketball') as imatch
  FROM search
 WHERE imatch 
  AND status=1
 ORDER BY imatch DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T18:28:31.417

如果您不想同时选择匹配项，则需要将别名放在 where 子句中。但是别名只运行一次并将结果存储在“变量”中

```
SELECT uid
FROM search
WHERE MATCH(product) AGAINST('football basketball') as imatch
AND status = 1
ORDER BY imatch DESC 
```

# java - ANT 安装问题

> ID：13047627
> 
> 赞同：0
> 
> 时间：2012-10-24T10:45:31.673
> 
> 标签：java, android, ant

请原谅我的法语英语^^

我在安装 ANT 时遇到问题...

*   我已经在 apache 网站上下载了 ANT Zip
*   我已将环境变量 ANT_HOME 设置为：C:\Program Files\apache-ant-1.8.4
*   我已将环境变量 JAVA_HOME 设置为：C:\Program Files\Java\jdk1.7.0_07
*   我在 PATH 变量中添加了：C:\Program Files\apache-ant-1.8.4\bin

但是当我想在 CMD 中测试“ant”或“ant -version”命令时，我遇到了这个错误：（对我来说是法语：P，我已经为你翻译了：D）“ant”不是识别为内部或外部命令、可运行程序或批处理文件。

你有想法吗？

我必须安装这个程序才能在 Android 上使用“zxing”:)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:00:41.433

PATH 环境变量的更改不适用于打开的命令行。

如果您只是更改了 PATH，则需要打开一个新的命令行终端。您可以通过键入来检查`echo %PATH%`。

# ios - 淡入图像顶部的文本也淡入，这是 iOS webview 的问题吗？

> ID：13047629
> 
> 赞同：2
> 
> 时间：2012-10-24T10:45:34.590
> 
> 标签：ios, image, webview, transition, fadein

这是IOS webview的问题吗？如果我把文字放在有淡入效果的图片上（使用css3），文字也会有淡入效果。如何删除文本淡入效果？

代码在这里：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"/>
    <title>text on top of a fade-in image has render problem, is this an issue of iOS   webview?</title>
<style type="text/css">
body{ position: relative;}
.lazy >img{opacity: 0; -webkit-transition:opacity 1s ease; }
.text-container{font-family: "Georgia"; color: #666; font-size: 14px; line-height: 1.8em; position: absolute; top:10px; left:500px;}
</style>
</head>
<body>

<div class="image-container lazy">
    <img src="http://www.szobafaldekor.hu/images/otlettar/nimo-2-x.jpg"/>
</div>

<div class="text-container">
    <p>Look at the text changes.  </p>
    <p>Look at the text changes.  </p>
    <p>Look at the text changes.  </p>
    <p>Look at the text changes.  </p>
    <p>Look at the text changes.  </p>
    <p>Look at the text changes.  </p>
</div>

<script type="text/javascript">
    window.onload = function(){
        var imgs =document.querySelectorAll("img");
        for( var i= 0,j=imgs.length; i<j; i++ )
        {
            imgs[i].style.opacity = 1;
        }
    }
</script>
</body>
</html> 
```

# xcode - 我可以在 10.6.8 上使用的最新版本的 xcode 是什么？

> ID：13047630
> 
> 赞同：2
> 
> 时间：2012-10-24T10:45:37.853
> 
> 标签：xcode

我可以在 10.6.8 上使用的最新版本的 xcode 是什么？有什么办法可以下载吗？我目前有第一个版本的 xcode 4（即甚至没有 4.2）

我可以升级吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:42:34.760

它是 xcode 4.2，您可以在开发中心下载它，但您将无法使用比雪豹上的任何更新的版本。 [Xcode 4.2 雪豹](https://developer.apple.com/downloads/index.action?name=Xcode#)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-03T16:30:48.810

雪豹的4.2似乎不再可用。3.2.6 是 [http://adcdownload.apple.com/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg](http://adcdownload.apple.com/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:36:32.623

您可以从中了解更多信息：

[MAC 10.6.8 兼容的 IOS 和 XCODE 是什么？](https://discussions.apple.com/thread/4265893?start=0&tstart=0)

# ios - 难以理解块编程的这一部分

> ID：13047631
> 
> 赞同：2
> 
> 时间：2012-10-24T10:45:48.973
> 
> 标签：ios, objective-c, objective-c-blocks

这是来自[apple blocks docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW3)，我很难理解这一点，请任何人解释一下

> 如果你没有显式声明一个块表达式的返回值，它可以从块的内容中自动推断出来。如果推断返回类型并且参数列表为 void，那么您也可以省略 (void) 参数列表。如果或当存在多个 return 语句时，它们必须完全匹配（必要时使用强制转换）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:17:27.260

1）**如果没有显式声明块表达式的返回值，可以从块的内容中自动推断出来**

块

```
void ^(float aFloat) {
   printf("value is :%f",aFloat);
}; 
```

也可以写成

```
^(float aFloat) {
   printf("value is :%f",aFloat);
}; 
```

不用说返回类型。返回类型是自动推断的。对于返回非 void 值的块来说确实如此。

2）**如果返回类型是推断的并且参数列表是void，那么你也可以省略（void）参数列表**

这有点难以理解和混淆，因为文档特别说

> 不带参数的块必须在参数列表中指定 void。

我相信这种块是可能的。

```
 ^{
     printf("Hello world");
 } 
```

推断返回值的位置，因此不需要 void。我不确定这一点，所以想澄清一下。

3)**如果或当存在多个 return 语句时，它们必须完全匹配（必要时使用强制转换）。**

简单地说，一个块必须只返回一种类型的数据。它不能返回整数**和**浮点数。

# spring - 动态的

> ID：13047636
> 
> 赞同：1
> 
> 时间：2012-10-24T10:46:02.093
> 
> 标签：spring, aspectj

我正在寻找一种方法来动态启用 aspectJ 加载时间编织，例如基于 JNDI 属性是否为真。

基本上， (context:load-time-weaver) 有条件地有这个标签。

有什么快速的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:33:32.867

看看[Spring 配置文件](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)：

```
<beans profile="production">
    <context:load-time-weaver />
</beans> 
```

如果配置文件名称是`production`，将启用 LTW。否则整个内部块将被忽略。我不确定是否可以使用 JNDI 变量设置配置文件，但还有多种其他方法，例如：JVM 属性、环境变量、Web 上下文参数，或者您可以通过编程方式设置它们。

# google-docs - Google Docs：如果 H 列 < 0，如何给我发电子邮件

> ID：13047640
> 
> 赞同：1
> 
> 时间：2012-10-24T10:46:23.623
> 
> 标签：google-docs

如果 H 列中任何单元格中的值低于 0，我希望有一个功能可以向我发送一次并且仅一次的电子邮件。

# java - 如何获取动态cookie

> ID：13047644
> 
> 赞同：2
> 
> 时间：2012-10-24T10:46:31.687
> 
> 标签：java, dynamic-linking, apache-httpcomponents, dynamic-loading

我想获取`id`您在[广告设置页面上](http://www.google.com/ads/preferences)选择加入时 Google 发出的 cookie （如果您已经接受目标广告，则必须先选择退出才能看到我所指的页面）。

我发现，为了获取此 cookie，您必须以该页面中的形式`GET`对URL 执行 HTTP。`action`问题是这个 URL 包含一个散列，它会随着每个新的 HTTP 连接而改变，所以，首先，我必须去这个页面并获取这个 URL，然后，`GET`对 URL 执行。

我正在使用 HttpComponents 来获取[http://www.google.com/ads/preferences](http://www.google.com/ads/preferences)但是当我使用 JSOUP 解析内容时，只有一个脚本并且找不到任何表单。

恐怕会发生这种情况，因为内容是使用某种超时动态加载的……有谁知道解决方法吗？

**编辑**：顺便说一句，我现在使用的代码是：

```
 HttpClient httpclient = new DefaultHttpClient();

        // Create a local instance of cookie store
        CookieStore cookieStore = new BasicCookieStore();
        // Bind custom cookie store to the local context
        ((AbstractHttpClient) httpclient).setCookieStore(cookieStore);
        CookieSpecFactory csf = new CookieSpecFactory() {
            public CookieSpec newInstance(HttpParams params) {
                return new BrowserCompatSpec() {
                    @Override
                    public void validate(Cookie cookie, CookieOrigin origin)
                            throws MalformedCookieException {
                        // Allow all cookies
                        System.out.println("Allowed cookie: " + cookie.getName() + " "
                                + cookie.getValue() + " " + cookie.getPath());
                    }
                };
            }
        };
        ((AbstractHttpClient) httpclient).getCookieSpecs().register("EASY", csf);

        // Create local HTTP context
        HttpContext localContext = new BasicHttpContext();
        // Bind custom cookie store to the local context
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
        HttpGet httpget = new HttpGet(doubleClickURL);
        // Override the default policy for this request
        httpclient.getParams().setParameter(
                ClientPNames.COOKIE_POLICY, "EASY"); 

        // Pass local context as a parameter
        HttpResponse response = httpclient.execute(httpget, localContext);

        HttpEntity entity = response.getEntity();

        if (entity != null) {                               
                InputStream instream = entity.getContent();

                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(instream));
                instream.close();
                // Find action attribute of form
                Document document = Jsoup.parse(reader.readLine());
                Element form = document.select("form").first();         
                String optinURL = form.attr("action");
                URL connection = new URL(optinURL);
                // ... get id Cookie

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:22:56.003

您可能有更多机会使用[HtmlUnit](http://htmlunit.sourceforge.net/)、[Selenium](http://seleniumhq.org/)或[jWebUnit](http://jwebunit.sourceforge.net/)来完成此类任务。JSoup 不解释 Javascript，并且您指向的 Google 页面充满了应由浏览器执行以生成您所看到的内容的 Javascript。

HtmlUnit 独立于操作系统，不需要安装任何其他东西，但我从未将它用于复杂的 Javascript 网站。HtmlUnit 也可以像 JSoup 一样从网页中提取数据，但是如果您更喜欢使用它，您仍然可以将 html 提供给 JSoup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:37:46.287

终于我找到了！我发现以下网站描述了双击 cookie 协议：

[隐私咨询](http://www.interhack.net/pubs/dc-proto-fail/)

`id`然后，就像在该域中使用 name和 value设置一个 cookie 一样简单`A`。然后向[http://www.google.com/ads/preferences](http://www.google.com/ads/preferences)发出 HTTP 请求，他们会设置正确的 ID 值。

这是一个非常具体的问题，但我希望这对未来的观众有用。

顺便说一句，我发现 amazon.com 例如是 Ad-sense Network 的成员。双击的 HTTP 请求通过主页中的脚本发送到：

[http://ad.doubleclick.net/adj/amzn.us.gw.atf](http://ad.doubleclick.net/adj/amzn.us.gw.atf)

在那里您可以找到一个脚本，该脚本似乎是为您提供 id cookie 的实际代码。不过，如果您使用带有值的 cookie 访问`A`它，它将设置双击的 id。

# hibernate - H2、JPA2、JBoss AS 7 和事务

> ID：13047645
> 
> 赞同：1
> 
> 时间：2012-10-24T10:46:35.000
> 
> 标签：hibernate, jpa-2.0, jboss7.x, h2

当我使用 MySQL 后端时，我有一个完美运行的测试。

持久性.xml：

```
<persistence-unit name="pu">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/mysqlTM</jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.cache.use_second_level_cache" value="true" />

        <!-- Properties for Hibernate -->
        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

但是，当我按如下方式切换到 H2 时：

持久性.xml

```
 <persistence-unit name="pu">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
        <property name="hibernate.cache.use_second_level_cache" value="true" />

        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

使用股票 JBoss 7.1 安装中定义的标准数据源，我得到以下异常：

```
Caused by: javax.persistence.TransactionRequiredException: JBAS011469: Transaction is required to perform this operation (either use a transaction or extended persistence context) 
```

谷歌帮助不大。我宁愿使用 H2 进行测试，只是为了加快测试过程。

提前感谢您的任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:30:33.930

回答问题，以便可以关闭。

事实证明，关于交易的错误消息是一个红鲱鱼。该错误是由于 MySQL 和 H2 在查询中处理区分大小写的方式不同造成的。

将查询更新为区分大小写解决了该问题。

# powershell - psexec powershell 输出

> ID：13047652
> 
> 赞同：1
> 
> 时间：2012-10-24T10:46:45.337
> 
> 标签：powershell, psexec, output

我尝试像这样远程执行powershell脚本：

```
psexec -i \\host -u user -p pass PowerShell C:\tst\tst.ps1 
```

tst.ps1 的源代码：

```
$TempLogFilePath = "$(Get-Date -u "%Y-%m-%d")-LogFileEventLog.log"
Start-Transcript -Path "$TempLogFilePath" -Append
echo (Get-Date –f o)

Stop-Transcript
Exit 0 
```

当一个运行命令远程执行这个脚本时，脚本定位在远程机器上，在本地机器上什么也不输出。在 cmd.exe 中运行的命令。如何将输出输出到本地控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:53:08.127

```
PsExec.exe \\host -u domain\user -p pass cmd /c "echo . | %SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe C:\WINDOWS\system32\Hello.ps1" 
```

此构造可帮助您运行远程 powershell 脚本，但脚本应位于远程计算机上。

和第二次建设

```
Param(
[alias("sp")]
[string]$script_path,
[alias("u")]
[string]$user_name,
[alias("p")]
[string]$password,
[alias("h")]
[string]$host_name
)
$pass = convertto-securestring $password -asplaintext -force
$mycred = new-object -typename System.Management.Automation.PSCredential -argumentlist $user_name,$pass
invoke-command -credential $mycred -computername $host_name -filepath $script_path 
```

但我不知道如何传递 args 字符串以使用参数执行远程脚本

# java - 特定值列表的 XSLT 应用模板

> ID：13047654
> 
> 赞同：1
> 
> 时间：2012-10-24T10:46:48.100
> 
> 标签：java, transform, xslt

我是 XSLT 的初学者。

我的源 XML 如下

```
<Options>
    <Option>
        <Data>Data1</Data>
        <Type>A</Type>
    </Option>
    <Option>
        <Data>Data2</Data>
        <Type>B</Type>
    </Option>
    <Option>
        <Data>Data3</Data>
        <Type>C</Type>
    </Option>
    <Option>
        <Data>Data4</Data>
        <Type>D</Type>
    </Option>
    ...
</Options> 
```

我有用于过滤上述方法的结果的参数，如下所示

```
<xsl:param name="filterType" select="'A,C'"/> 
```

输出应如下所示：

```
<Result>
     <Data Type="A">Data1<Data>
     <Data Type="C">Data3<Data>
</Result> 
```

下面是我创建的 XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:param name="filterType" select="'A,C'"/>
    <xsl:template match="Options">
       <xsl:element name="Result">
         <xsl:apply-templates select="Option"/>
       </xsl:element>
    </xsl:template?

    <xsl:template match="Option">
       <xsl:element name="Data">
           <xsl:attribute name="Type">
               <xsl:value-of select="Type"/>
           </xsl:attribute>
           <xsl:value-of select="Data"/>
       </xsl:element>
    </xsl:template?
</xsl:stylesheet> 
```

在为标签应用模板时，`'Option'`我需要使用`filterType`. 我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:07:59.593

我想你只是想要

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:param name="filterType" select="'A,C'"/>

    <xsl:variable name="filter" select="concat(',', $filterType, ',')"/>

    <xsl:template match="Options">
       <Result>
         <xsl:apply-templates select="Option[contains($filter, concat(',', Type, ','))]"/>
       </Result>
    </xsl:template>

    <xsl:template match="Option">
       <Data Type="{Type}">
         <xsl:value-of select="Data"/>
       </Data>
    </xsl:template>

</xsl:stylesheet> 
```

# iphone - 在 iOS 6 中发送 udp 数据包

> ID：13047661
> 
> 赞同：2
> 
> 时间：2012-10-24T10:47:20.113
> 
> 标签：iphone, objective-c, xcode, udp

我正在努力从 iphone 发送任何东西，我遵循了[本指南](http://www.benripley.com/development/ios/udp-broadcasting-on-iphone-using-bsd-sockets/)起初我从 cfSocketRef 开始，因为我认为您通过更改协议将它们用于 UDP 和 TCP，但我没有运气。

所以这里是 BSD 套接字的代码。似乎什么都没有发送。我有一个在 localhost:port 上等待的 java 套接字服务器。

有任何想法吗？或者可能是一个有效的指南/示例 xcode 项目。

```
 #import "ViewController.h"
    #include <CFNetwork/CFNetwork.h> //temp //dont leave here put it in a header
    #include <sys/socket.h>
    #include <netinet/in.h>
    #include <arpa/inet.h>

    @interface ViewController ()

    @end

    @implementation ViewController

    static void socketCallback(CFSocketRef cfSocket, CFSocketCallBackType
                               type, CFDataRef address, const void *data, void *userInfo)
    {
        NSLog(@"socketCallback called");
    }
    //

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        int sock = 0; /// ?
        unsigned int echolen;

        NSLog(@"starting udp testing");
        cfSocketRef = CFSocketCreate(/*CFAllocatorRef allocator*/       NULL,
                                     /*SInt32 protocolFamily*/          PF_INET,
                                     /*SInt32 socketType*/              SOCK_DGRAM,
                                     /*SInt32 protocol*/                IPPROTO_UDP,
                                     /*CFOptionFlags callBackTypes*/    kCFSocketAcceptCallBack | kCFSocketDataCallBack,
                                     /*CFSocketCallBack callout*/       (CFSocketCallBack)socketCallback,
                                     /*const CFSocketContext *context*/ NULL);

        struct sockaddr_in destination;
        memset(&destination, 0, sizeof(struct sockaddr_in));
        destination.sin_len = sizeof(struct sockaddr_in);
        destination.sin_family = AF_INET;

        NSString *ip = @"localhost";
        destination.sin_addr.s_addr = inet_addr([ip UTF8String]);
        destination.sin_port = htons(33033); //port

        NSString *msg = @"message sent from iPhone";
        /* server port */
        setsockopt(sock,
                       IPPROTO_IP,
                       IP_MULTICAST_IF,
                       &destination,
                       sizeof(destination));

        const char *cmsg = [msg UTF8String];

        echolen = strlen(cmsg);

        if (sendto(sock,
                   cmsg,
                    echolen,
                    0,
                    (struct sockaddr *) &destination,
                    sizeof(destination)) != echolen)
        {
            NSLog(@"did send");
        }
        else
        {
            NSLog(@"did not send");
        }

    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:20:18.960

第一个问题：您忘记创建套接字：

```
if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1) {
    NSLog(@"Failed to create socket, error=%s", strerror(errno));
} 
```

这部分不起作用：

```
NSString *ip = @"localhost";
destination.sin_addr.s_addr = inet_addr([ip UTF8String]); 
```

`inet_addr`转换以点表示法表示 IPv4 地址的字符串，例如“127.0.0.1”。

要将诸如“localhost”之类的主机名转换为 IP 地址，您必须使用`gethostbyname`, 或`getaddrinfo`（后者适用于 IPv4 和 IPv6）。

检查返回值时还有另一个错误`sendto`：`sendto`在成功情况下返回发送的字节数，在错误情况下返回（-1）。所以它应该看起来像：

```
if (sendto(sock, ...) == -1) {
    NSLog(@"did not send, error=%s",strerror(errno));
} else {
    NSLog(@"did send");
} 
```

检查 的值`errno`会很快发现您的问题。如果您忘记创建套接字，则错误消息是

> 未发送，错误=非套接字上的套接字操作

**评论：**

*   `cfSocketRef`在您的功能中完全未使用。
*   为什么要设置`IP_MULTICAST_IF`套接字选项？据我所知，单播消息不需要，只需要多播消息。

# android - 相机：图像投影

> ID：13047681
> 
> 赞同：0
> 
> 时间：2012-10-24T10:48:12.797
> 
> 标签：android, android-camera, trigonometry, android-capture

我想用相机在墙上投射图像。本质上，图像必须根据相机和墙壁之间的距离进行缩放。

首先，我使用直角三角函数（visionHeight * Math.tan(a)）进行距离计算。它不是 100% 准确但仍接近实际值。

其次，知道了距离，我们可以尝试使用等腰三角形三角公式计算出所有全景高度：c = a * tan(A); `A = mCamera.getParameters().getVerticalViewAngle();` 结果比实际物体高度高出大约 30%，这有点奇怪。

`double panoramaHeight = (distance * Math.tan( mCamera.getParameters().getVerticalViewAngle() / 2 * 0.0174532925)) * 2;`

我也尝试使用相同的等腰三角形公式计算出这些角度，但现在知道了距离和高度。我有 28 度和 48 度角。

这是否意味着android相机不会渲染它拍摄的所有东西？而且，您还可以提出哪些其他解决方案？

![在此处输入图像描述](../Images/842319e1d5e02e5a150f72f77914ec8d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T04:12:16.310

网络搜索显示 getVerticalViewAngle() 返回的值不能在所有设备上盲目信任；另请注意，您应该考虑缩放级别和纵横比，请参阅[确定智能手机相机的视角](https://stackoverflow.com/questions/3261776/determine-angle-of-view-of-smartphone-camera)

# iphone - iOS 开发者企业计划和 iOS 开发者计划

> ID：13047691
> 
> 赞同：0
> 
> 时间：2012-10-24T10:49:02.827
> 
> 标签：iphone, ios

我有一个 iOS 开发者计划的帐户。

1.  我可以将我当前的帐户升级到 iOS 开发者企业计划吗？
2.  iOS 开发者企业计划可以允许开发者将应用分发到应用商店吗？
3.  iOS 开发者企业计划和 iOS 开发者计划帐户可以一起加入吗？还是账户不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:57:39.713

1.  不，一旦您购买了某种类型的其中一种，它就会保持这种类型

2.  不可以，企业帐户只允许企业分发

3.  否 - 他们必须保持单独的帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-16T15:19:19.813

1.  您无法升级当前帐户。您必须为企业创建一个新的。
2.  基本上，企业帐户用于内部目的以在您的组织内分发构建，但您也可以将构建上传到**AppStore**。为此，您必须支付 299 美元。
3.  不，Enterprise 和 Developer 都是单独的帐户。

有关企业帐户的更多详细信息：[https ://developer.apple.com/programs/enterprise/](https://developer.apple.com/programs/enterprise/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-27T12:45:43.590

1.  不，一旦您购买了某种类型的其中一种，它就会保持这种类型
2.  不可以，企业帐户只允许企业分发
3.  不，他们必须保持单独的帐户

# windows - Windows中的cmake问题

> ID：13047693
> 
> 赞同：9
> 
> 时间：2012-10-24T10:49:14.293
> 
> 标签：windows, gcc, configuration, cmake

我正在尝试在 Windows 中使用 cmake 和 MinGW编译这段（*相当复杂的）代码：*

```
#include <iostream>

int main()
{
    std::cout << "Test" << std::endl;
    return 0;
} 
```

这是`CMakeLists.txt`文件（在 Linux 中可以正常工作）：

```
cmake_minimum_required(VERSION 2.6)

SET(CMAKE_C_COMPILER path/to/gcc)
SET(CMAKE_CXX_COMPILER path/to/g++)

project(cmake_test)

add_executable(a.exe test.cpp) 
```

使用命令：

```
cmake -G"MinGW Makefiles" . 
```

我收到这些错误：

```
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeMinGWFindMake.cmake:20 (MESSAGE):
  sh.exe was found in your PATH, here:

  C:/MinGW/msys/1.0/bin/sh.exe

  For MinGW make to work correctly sh.exe must NOT be in your path.

  Run cmake from a shell that does not have sh.exe in your PATH.

  If you want to use a UNIX shell, then use MSYS Makefiles.

Call Stack (most recent call first):
  CMakeLists.txt:8 (project)

CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_C_COMPILER_ENV_VAR
CMake Error: Could not find cmake module file:C:/cmake_test/CMakeFiles/CMakeCCompiler.cmake
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_CXX_COMPILER_ENV_VAR
CMake Error: Could not find cmake module file:C:/cmake_test/CMakeFiles/CMakeCXXCompiler.cmake
-- Configuring incomplete, errors occurred! 
```

这些错误对我没有多大帮助。考虑到它在 Linux 中工作，它必须与 Window 的配置有关。

感谢您的任何帮助！

配置：
- Windows 7
- MinGW/GCC 4.6.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-16T07:26:14.770

你可能会得到更好的结果，`-G "MSYS Makefiles"`而不是`"MinGW Makefiles"`- 但我警告你 -[它会很慢](https://stackoverflow.com/questions/2256214/why-is-configure-so-slow-in-msys)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-22T10:58:25.190

这是由于您在路径 `C:/MinGW/msys/1.0/bin/`中使用 CMake 和 MinGW 生成项目，将其从路径中删除并`C:/MinGW/bin/`添加

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:10:32.643

从 PATH 中删除 sh.exe 得到了改进。
我得到更多错误，但在稍后阶段......

# jquery - 同位素过滤后div不可点击

> ID：13047694
> 
> 赞同：0
> 
> 时间：2012-10-24T10:49:19.613
> 
> 标签：jquery, jquery-plugins, show, jquery-isotope

我已经使用 jQuery isotope 插件成功实现了一个过滤器，它相应地过滤掉了内容。唯一的问题是过滤后附加到过滤内容的点击功能在过滤器实施后不再起作用。
这是我的代码：

```
jQuery(document).ready(function(){

var jQuerycontainer = jQuery('#projectimages');

jQuerycontainer.isotope({
    itemSelector: '.shown',
    animationEngine: 'css',
    masonry: {
    columnWidth: 2
    }
});

jQuery('#menu a').click(function(){
    var selector = jQuery(this).attr('data-filter');
    jQuerycontainer.isotope({ filter: selector });
  return false;
});
});

jQuery(document).ready(function(){

jQuery(".hidden").hide();
jQuery(".pics-hidden").hide();

jQuery('.wp-image-111').click(function() {
      jQuery('.post-98').addClass('shown').removeClass('hidden').delay(300).fadeIn(100);
      jQuery('#projectimages').isotope('reloadItems').isotope();
       });       
}); 
```

实现过滤器后，附加到（'.wp-image-111'）的点击功能不再起作用，这是有原因的吗？如果是这样有没有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:55:52.470

```
jQuery('#post-'+jQuery(this).attr('larget'))
.removeClass('shown')
.addClass('.hidden')
  ---------^
.removeClass('#post-'+jQuery(this)
.attr('larget')).hide(); 
```

应该

```
 jQuery('.close').click(function() {
   jQuery('#post-'+jQuery(this).attr('larget'))
    .removeClass('shown')
    .addClass('hidden');
   jQuery('#post-'+jQuery(this).attr('larget')).attr("id",""); 
```

});

你不能删除 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T11:56:00.330

可能是你没有应用推荐的 CSS；我没有，我的过滤器上的链接只指向隐藏的项目（因为它们仍然存在并且我猜是最重要的！） - 它们现在在应用这些后可以工作：

```
/**** Isotope filtering ****/

.isotope-item {
  z-index: 2;
}

.isotope-hidden.isotope-item {
  pointer-events: none;
  z-index: 1;
} 
```

# html - 表格单元格属性忽略宽度

> ID：13047703
> 
> 赞同：7
> 
> 时间：2012-10-24T10:50:03.137
> 
> 标签：html, css, css-tables

我为 div 设置了一个 CSS 属性 table-cell。我还指定了 div 的宽度并将溢出设置为隐藏，但是由于 table-cell 属性，div 不关心宽度。如果我放置任何大图像，它会超出宽度。如何使用表格单元格并为 div 使用固定宽度？

```
.right{
    display: table-cell;
    overflow: hidden !important;
    vertical-align: top;
    width: 400px;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T10:59:53.980

奇怪，[这个 JSFiddle](http://jsfiddle.net/ZfnKg/3/)似乎对我有用。

你在什么浏览器中遇到问题？

此外，要强制表格单元格的最大宽度，请使用该`max-width`属性。你可以[在这里看到它](http://jsfiddle.net/83K7X/)，代码如下。

HTML：

```
<div class='table'>
  <div class='tr'>
    <div class='right'>hey</div>
  </div>
</div>​ 
```

CSS：

```
.table {
    display: table;
}
.tr {
    display: table-row;
}
.right{
    display: table-cell;
    overflow: hidden !important;
    vertical-align: top;
    max-width: 400px;
    outline: 1px solid #888;
}​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T10:56:09.013

`display: table-cell`将遵循表格大小规则 - 如果内容太大，它将扩展以使其适合。

你真的需要使用`display: table-cell`吗？为了使其工作，您必须将其包装在另一个 div 中，将其宽度设置为 400 并将其设置为，`overflow: hidden`但这似乎适得其反。

# objective-c - '发送到实例的无法识别的选择器'

> ID：13047705
> 
> 赞同：0
> 
> 时间：2012-10-24T10:50:06.340
> 
> 标签：objective-c, ios, cocoa-touch, selector

我收到以下错误

```
[UIViewController setThisViewData:]: unrecognized selector sent to instance 0x71800b0
2012-10-24 16:06:05.071 Movie Rental[5468:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController setThisViewData:]: unrecognized selector sent to instance 0x71800b0' 
```

在“ **basicInfoViewController.m** ”的以下行：

```
 contactInfoViewController *destViewController = segue.destinationViewController;
 destViewController.thisViewData = [[NSMutableDictionary alloc] initWithDictionary:self.viewData]; 
```

我的**contactInfoViewController.h**看起来像

```
@interface contactInfoViewController : UIViewController
{
    NSMutableDictionary *thisViewData;
}
@property(nonatomic, strong) NSMutableDictionary *thisViewData; 
```

我已经包括了

```
@synthesize thisViewData; 
```

为实施。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:56:47.120

看起来您还没有在界面构建器中为 UIViewController 设置类，因此您没有获得 contactInfoViewController，而是获得了 UIViewController。

# mysql - mysql超级用户不能创建数据库，只能看到information_schema表

> ID：13047706
> 
> 赞同：0
> 
> 时间：2012-10-24T10:50:06.027
> 
> 标签：mysql, linux, networking, centos

由于某种原因，这是一个反复出现的问题......

使用mysql 5.5，我只是想创建一个可以远程连接到数据库的用户，可以访问所有数据库，并创建数据库。

我创建了一个用户：

```
create user 'dev'@'%' identified by 'abcdefg'; 
```

然后使用以下命令授予所有权限：

```
GRANT ALL ON *.* to 'dev'@'192.168.%' IDENTIFIED BY 'abcdefg' WITH GRANT OPTION; 
```

结果是用户无法创建数据库，并且由于某种原因只能看到 information_schema 数据库。

```
Databases

Create database: Documentation
No Privileges

Database Ascending
information_schema
Total: 1 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:29:25.740

创建用户并授予其权限后，您需要刷新权限（当您使用 root 用户登录时）

> 同花顺特权；

# grails - 在 Grails 中找到对集合的共享引用

> ID：13047709
> 
> 赞同：1
> 
> 时间：2012-10-24T10:50:17.943
> 
> 标签：grails

在我的应用程序中，用户进行搜索。该搜索会返回一份可以被聘用的人员名单。但是，用户可以对同一个职责进行多次搜索（例如，我需要两个人来这个城市，三个人来那个城市）。每次搜索都会产生一个“Prepresupuesto”，每个 Prepresupuesto 都会产生一个“Cocontrato”。所有的“Cocontrato”都构成一个“Contrato”，所有的“Prepresupuestos”都构成一个单一的“Presupuesto”。所有这些都符合整个职责，在应用程序中称为“活动”。

当我试图保存那个“Cocontrato”时，我收到了异常。这是代码：

```
ArrayList<Prepresupuesto> prepresus=Prepresupuesto.findAllByCamp(campid)

        Presupuesto pres=new Presupuesto()

        for(int i=0;i<prepresus.size();i++){

            pres.prepresu.add(prepresus[i])

            pres.camp=Campaign.get(prepres.camp.id)

            pres.estado="Pending"

            total=total+prepresus[i].total

            crearCocontrato(prepresus[i])
            } 
```

方法 crearCocontrato()：

```
public crearCocontrato(Prepresupuesto prep){
    Set <Azafata>azas=prep.azafatas
    Cocontrato cocon=new Cocontrato()
    cocon.contrato=con
    cocon.precio=prep.precio
    cocon.azafatas=azas
    cocon.total=prep.total
    cocon.horas=prep.horas
    cocon.horario=prep.horario
    cocon.localidad=prep.localidad
    cocon.fechaInicio=prep.fechaInicio
    cocon.fechaFin=prep.fechaFin
    cocon.presu=prep
    cocon.camp=prep.camp

    if(!(cocon.save(flush:true))){
        render (view:"fallos", model:[azafataInstance:cocon])

    }
} 
```

异常在 if 中启动。

有什么帮助吗？我有点迷茫，我是 Grails 的新手，我想我不完全理解这个例外。

谢谢！

编辑：例外：

```
Found shared references to a collection: com.publidirecta.Cocontrato.azafatas.     Stacktrace follows:
Message: Found shared references to a collection: com.publidirecta.Cocontrato.azafatas
Line | Method
->> 2448 | crearCocontrato in com.publidirecta.EntidadController$$ENmku0D2
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   2394 | boton           in     ''
|    886 | runTask . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
|    908 | run             in     ''
^    680 | run . . . . . . in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:22:22.973

当两者都引用同一个集合时，您可能会尝试保存多个实体（cocon）。很难在您发布的这段代码中检测到它可能在其他地方，但我会说当您这样做时：

```
Set <Azafata>azas=prep.azafatas
cocon.presu=prep 
```

然后，当您保存 cocon 时，它指向与 prep 相同的集合。看看这个[链接](https://stackoverflow.com/questions/1692871/found-shared-references-to-a-collection-org-hibernate-hibernateexception)，它说的是同样的事情。

解决此问题的一种方法是将逐个元素添加到要复制到的列表中，而不是通过执行共享引用`a.list = b.list`。

[这](http://programming34m0.blogspot.com.br/2009/11/hibernate-exception-in-grails-when.html)也可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:15:43.390

是的，Tiago，在深入研究代码（它是继承的代码......）之后，我发现问题出在你所说的。我通过这样做解决了它：

```
ArrayList <Azafata> azas=new ArrayList<Azafata>()
    for(int i=0;i<prep.azafatas.size(); i++){
        azas.add(prep.azafatas.toArray()[i])
} 
```

一切都很好:) 谢谢你的回答。

# android - 无法为 Eclipse 设置 Android sdk 路径？

> ID：13047711
> 
> 赞同：2
> 
> 时间：2012-10-24T10:50:19.300
> 
> 标签：android, eclipse

我已经在 ubuntu 10.4 上安装了 Android sdk 并安装了 ADT pulgin。但是当我打开日食。我收到以下错误消息。

![打开 Eclipse 时出现错误消息](../Images/b451a2c65e787ad38be90235c55a215d.png)

编辑：我的电脑里已经有java了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T11:20:50.310

打开 Eclipse 并转到 Preferences (Window -> Preferences)，选择 Android 选项卡并浏览到您的 SDK 位置。

如果这不起作用，请尝试重新安装 Android SDK

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-25T10:51:20.613

我正在添加这两张图片，以便为我和其他人直观地**存档**！GoogleDorks：“Eclipse 中 Android 的 SDK 路径在哪里”

1) 窗口 > 首选项

![在此处输入图像描述](../Images/82d1b99be0547c3723925315e802a810.png)

2) 安卓

![在此处输入图像描述](../Images/bc169abd72562ab9f7e6d03e0d9065af.png)

# html - 如何在第三个 div 中顶部对齐两个 div？

> ID：13047714
> 
> 赞同：1
> 
> 时间：2012-10-24T10:50:33.327
> 
> 标签：html, css

我需要左 div 作为菜单，右作为内容。
我正在尝试采用这篇文章中公认的答案：
[CSS：如何在另一个 div 中获取两个浮动 div](https://stackoverflow.com/questions/1790648)

```
#container {width:900px;}
#left {
    width: 150px;
    float: left;
}
#right {
    width: 500px;    
    margin-left: 170px;
}
.clearBoth{clear:both;} 
```

HTML

```
<div id="container">
<div id="left">leftMenu</div>
<div id="right">rightContent</div>
<div class="clearBoth"></div>
</div> 
```

# left 和 #right 应该顶部对齐，但 #right 在 #left 下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:52:42.080

您是否也尝试过给正确的 div 一个浮点数？

```
#right {
width: 500px;    
margin-left: 170px;
float: left;
} 
```

一个 jsfiddle 向你展示它的工作原理:)

[http://jsfiddle.net/LtUzc/](http://jsfiddle.net/LtUzc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:55:14.497

试试这个

```
#container {width:900px;}
#left {
    width: 500px;
    float: left;
}
#right {
    width: 500px;    

float: left;

}
.clearBoth{clear:both;}    

<div id="container">
<div id="left">leftMenu</div>
<div class="clearBoth"></div>
<div id="right">rightContent</div>

</div> 
```

# spring - Spring + Hibernate4 错误 CurrentSessionContext 始终为空

> ID：13047716
> 
> 赞同：0
> 
> 时间：2012-10-24T10:50:36.127
> 
> 标签：spring, hibernate, sessionfactory

我在一个简单的java应用程序中使用带有spring 3.1的Hibernate 4。

我使用以下代码创建 Spring SessionFactory，然后将其转换为休眠 SessionFactory：请这里缺少 waht ...这是正确的方法吗？还是我错过了什么..？请帮忙！

```
.....
......
context=new ClassPathXmlApplicationContext(new String[]{"spring.xml"});
    return (SessionFactory) context.getBean("mySessionFactory");
...... 
```

会话工厂的 CurrentSessionContext 始终为空！所以我无法执行

```
sessionFactory.getcurrentSession() 
```

-> 给我一个 java.lang.NullPointer 异常

spring.xml 中的 myBean 声明：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

 <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/test"/>
    <property name="username" value="root"/>
    <property name="password" value=""/>
  </bean>

      <bean id="mySessionFactory"  name="mySessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean" scope="singleton">
        <property name="dataSource" ref="myDataSource"/>
        <property name="mappingResources">

          <list>
            <value>TblUrls.hbm.xml</value>
          </list>
        </property>
         <property name="hibernateProperties">
             <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop> 
                <prop key="hibernate.show_sql">true</prop> 
                <prop key="hibernate.hbm2ddl.auto">update</prop> 
                <prop key="hibernate.show_sql">true</prop> 
                <prop key="hibernate.transaction.jta.platform">org.hibernate.service.jta.platform.internal.SunOneJtaPlatform</prop>
                <prop key="hibernate.current_session_context_class">org.springframework.orm.hibernate4.SpringSessionContext</prop>
              </props>
        </property>
      </bean>
   <bean class="org.springframework.orm.hibernate4.support.OpenSessionInViewInterceptor">
        <property name="sessionFactory">
            <ref local="mySessionFactory" />
        </property>
    </bean>

    <bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "mySessionFactory" />

    </bean>
<!--   <bean id="myProductDao" class="hib.TblUrlsHome"> -->
<!--     <property name="sessionFactory" ref="mySessionFactory"/> -->
<!--   </bean> -->

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:35:48.453

你所要做的
`sessionFactory.openSession();`

这应该可以解决您的问题。

# c# - 在 Visual Studio 中的设计时连接/绑定用户控件？

> ID：13047720
> 
> 赞同：0
> 
> 时间：2012-10-24T10:50:58.060
> 
> 标签：c#, .net, winforms, visual-studio, user-controls

考虑以下用 c# 编写的用户控件：

```
class MyControl : UserControl {
  MyControl Left { get; set; }
  MyControl Right { get; set; }
} 
```

我正在寻找一种能够“连接”在设计时放置在表单上的 MyControls 的方法，这样我的客户就不必手动编写这些连接。可能吗？如果是，如何？

目前我的客户必须做这样的事情：

```
myControl1.setLeft(myControl2);
myControl1.setRight(myControl3); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:29:56.877

我认为您可以选择 IExtenderProvider。ExtenderProvider 将属性添加到它可以扩展的控件。你可以在这里找到一个例子：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.iextenderprovider.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.iextenderprovider.aspx)

```
enum AttachDirection { Right, Left, None }

[ProvideProperty("IsRequired", typeof(Control))]
class MyControl : UserControl, IExtenderProvider
{ 
    MyControl Left { get; set; } 
    MyControl Right { get; set; }

    public bool CanExtend(object extendee)
    {
        if (extendee is MyControl)
            return true;
        return false;
    }

    public void SetAttachTo (Control ctrl, AttachDirection direction)
    {
         if(direction == AttachDirection.Right)
             this.setRight(ctrl);
         else if (direction == AttachDirection.Left)
             this.setLeft(ctrl);
    }
    //And so on ...
} 
```

# lucene - Lucene 4.0 示例代码

> ID：13047723
> 
> 赞同：1
> 
> 时间：2012-10-24T10:51:06.243
> 
> 标签：lucene

我无法让它与 Lucene 4.0 及其新功能一起使用......有人可以帮帮我吗？

我从网上抓取了一堆 html 文档。现在我想计算每个文档的不同单词的数量。

这就是我使用 Lucene 3.5 的方式（对于单个文档。为了获得所有文档，我循环遍历所有文档……每次使用仅包含一个文档的新 RAMDirectory）：

```
Analyzer analyzer = some Lucene Analyzer;
RAMDirectory index;
index = new RAMDirectory();
IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);
String _words = new String();
// get somehow the String containing a certain text:
_words = doc.getPageDescription();  

try {
   IndexWriter w = new IndexWriter(index, config);
   addDoc(w, _words);
   w.close();
} catch (IOException e) {
e.printStackTrace();
} catch (Exception e) {
   e.printStackTrace();
 }
try {
 // System.out.print(", count Terms...  ");
 IndexReader reader = IndexReader.open(index);
 TermFreqVector[] freqVector = reader.getTermFreqVectors(0);
 if (freqVector == null) {
 System.out.println("Count words:  ": 0"); 
 }
 for (TermFreqVector vector : freqVector) {
String[] terms = vector.getTerms();
int[] freq = vector.getTermFrequencies();
int n = terms.length;
System.out.println("Count words: " + n);
  .... 
```

如何使用 Lucene 4.0 做到这一点？

但是，我更喜欢使用 FSDirectory 而不是 RAMDirectory 来执行此操作；如果我有大量文档，我想这会更高效？

感谢和问候 C.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:21:42.820

使用字段/术语 API。

特别参见示例“访问特定文档的术语向量字段”

看到您正在遍历所有文档，如果您的最终目标确实类似于所有文档中唯一术语的平均数量，请继续阅读“索引统计部分”。例如，在这种情况下，您可以使用 #postings / #documents 有效地计算：getSumDocFreq()/maxDoc()

[http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/package-summary.html#package_description](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/package-summary.html#package_description)

# java - 是否有在 Apache Camel + Java 中存储和检索 cookie（如 curl 和 php 中的 cookiejar）的工具

> ID：13047732
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:51:57.133
> 
> 标签：java, cookies, curl, apache-camel

我正在移植一个依赖于 curl 提供的 cookiejar 的 php 片段来获取 cookie 并在后续调用中使用它。我在用 Apache Camel 在 Java 中实现相同的代码时遇到了问题。我无法读取返回的 cookie。有什么建议么？

php片段如下：

```
$ckfile = tempnam ("/tmp", "CURLCOOKIE");
....
curl_setopt($ch,CURLOPT_URL,$url);

curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $ckfile);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);

    // Executing the ch
    $result['EXE'] = curl_exec($ch);
    $result['INF'] = curl_getinfo($ch);
    $result['ERR'] = curl_error($ch);
    //print_r($result['EXE']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:36:44.507

它对您所做的问题的描述有点差。只有 PHP 代码。并且没有关于哪个 Camel 版本以及您在 Camel 中做什么等信息。

值得一提的是，cookie 应该作为标头存储在 Camel 消息中。

# android - 单击警报对话框中的编辑文本时如何在android中隐藏键盘

> ID：13047735
> 
> 赞同：0
> 
> 时间：2012-10-24T10:52:07.583
> 
> 标签：android, dialog, layout-inflater

我使用 alertdialog 使用编辑文本显示我的 txt 文件内容。这是用于警报对话框的代码

```
File sdcard = Environment.getExternalStorageDirectory();
                    file = new File(sdcard.getPath() + Constants.USERNOTE_FOLDER + "/"+value);  
                    System.out.println("txt file path name : "+file);

                //Read text from file
                StringBuilder text = new StringBuilder();

                try {
                    BufferedReader br = new BufferedReader(new FileReader(file));
                    String line;

                    while ((line = br.readLine()) != null) {
                        text.append(line);
                        text.append('\n');
                    }
                }
                catch (IOException e) {
                    //You'll need to add proper error handling here
                }

                System.out.println("text value : "+text);
                String filename=null;
                String toRemove = ".txt";
                if(value.endsWith(toRemove)) {
                     filename=value.substring(0,value.length()-toRemove.length());
                }
                System.out.println("file name : "+filename);

                 LayoutInflater factory = LayoutInflater.from(ViewUserNote.this); 
                 final  View textEntryView = factory.inflate(R.layout.readusernote, null);
                 EditText readval = (EditText)textEntryView.findViewById(R.id.readtext);
                 readval.setText(text);
                 Builder alert = new Builder(ViewUserNote.this);
                 AlertDialog dialog =alert.create();
                 dialog.setTitle(filename);
                 dialog.setView(textEntryView);

                 dialog.show(); 
```

在此，当我单击编辑文本时，不应显示键盘。我应该如何实施 tis。请任何人帮助我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:57:05.930

```
 final InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
```

您始终可以禁用您的编辑文本，只需将可单击、已启用、可聚焦属性设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:33:43.977

**编辑**

```
alert.setNegativeButton(cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        saveimage();
                        InputMethodManager im = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                        im.hideSoftInputFromWindow(input.getWindowToken(), 0);
                        dialog.cancel();
                    }
                }); 
```

# linux - shell 脚本的更改在 Linux 中不会刷新

> ID：13047736
> 
> 赞同：0
> 
> 时间：2012-10-24T10:52:08.800
> 
> 标签：linux, shell, unix

我有一个名为 的 shell 脚本`startmq.sh`来运行 activeMQ。但是我更改了脚本，它根本没有刷新更改。

即使我只写了`echo "Hello World"`，它也没有刷新，并试图用错误的参数运行 activeMQ。

然后，我复制`startmq.sh`到`abc.sh`并尝试运行`abc.sh`. 它显示了`Hello World`。另外，我需要使用那个标准名称`startmq.sh`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:54:58.563

`startmq.sh`由于其路径位于`PATH`环境变量中，因此必须有另一个可访问的地方的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:56:12.327

可以是，您在服务器上有多个此脚本吗？

在 bash 下执行以下 **whereis**向您显示脚本的位置，并向**您**显示女巫脚本正在启动...

```
 bash:# whereis startmq.sh 
   bash:# which startmq.sh 
```

# .net - 在 Windows 应用商店应用程序中的 Direct3D 中呈现 XAML

> ID：13047742
> 
> 赞同：0
> 
> 时间：2012-10-24T10:52:48.633
> 
> 标签：.net, windows-runtime, direct3d, winrt-xaml, windows-store-apps

我想将 XAML 渲染到纹理/位图并在 Direct3D 中绘制纹理/位图（例如，将其放置在立方体一侧）。

为了在 Windows Phone 上实现这一点，我可以使用**UIElementRender**。它产生纹理，可以在 3D 世界 (XNA) 的任何地方绘制。

是否可以在 Windows Store App 中做同样的事情？

**SwapChainBackgroundPanel**不是很适合，因为它只允许将 XAML 覆盖在 Direct3D 表面上，但不能将 XAML 渲染为纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:14:09.123

那会很有趣，但我认为它不受支持。3 种可用的互操作机制仅用于在 XAML 应用程序中呈现 DX，而不是相反。

如果您只想对元素应用 3D 变换 - 有一个Projection 类型的[Projection](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.projection)属性，它可以是支持基本平移/旋转变换的 PlaneProjection 或 Matrix3DProjection，您可以使用它来应用任何 3D 矩阵变换.

# facebook-javascript-sdk - Facebook All.Js 新错误

> ID：13047743
> 
> 赞同：3
> 
> 时间：2012-10-24T10:52:52.840
> 
> 标签：facebook-javascript-sdk

我有一个使用 Facebook JS SDK 的网站，并且自 2 年多以来一直运行良好

今天 Facebook 部分（我使用 SDK 在主页的选项卡中显示用户时间线）停止工作，当页面加载时它给了我这个 JavaScript 错误

任何帮助将不胜感激

错误：错误：表达式是字符串类型，而不是对象源文件：[http](http://connect.facebook.net/en_US/all.js) ://connect.facebook.net/en_US/all.js 行：37

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:54:04.517

它并不像替换`FB.Data.waitOn`and那样简单`FB.Data.query`。

我目前正在使用`FB.Data.query`函数调用`FQL`来优雅地测试用户是否接受了`publish_stream`我的应用程序的权限。像这样：

```
FB.api('/me', function(response) {
    var user_id = response.id;
    var query = FB.Data.query('select publish_stream from permissions where uid={0}', user_id);
    query.wait(function(rows) {
        if (rows[0].publish_stream == 1) {
            //user has accepted our publish_stream permissions
        } else {
            //user has not accepted our publish_stream permissions
        }
    });
}); 
```

在谷歌搜索了那个糟糕的 facebook 开发者论坛之后；[直到我在这里遇到另一篇帖子检查新的 facebook javascript sdk 的扩展权限](https://stackoverflow.com/questions/3388367/check-for-extended-permissions-with-new-facebook-javascript-sdk)之前，我无法找到我想要的东西

然后我能够想出我的解决方案：

```
FB.api('/me/permissions', function(response) {
    if (response && response.data) {
        var permissions = response.data.shift();
        //console.log(permissions);
        if (!permissions || (!permissions.publish_stream) || (permissions.publish_stream == 0)) {
            //user has not accepted our publish_stream permissions
        } else {
            //user has accepted our publish_stream permissions
        }
    }
}); 
```

# sql-server-2008 - 更改具有 1000 多条记录的 SQL Server 表中的列名

> ID：13047746
> 
> 赞同：1
> 
> 时间：2012-10-24T10:53:09.173
> 
> 标签：sql-server-2008

我有一个列，想更改它的名称，但没有其他使用查询，最好的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:03:21.050

您可以使用系统存储过程[`sp_rename`](http://msdn.microsoft.com/en-us/library/ms188351.aspx)：

```
EXEC sp_rename 'dbo.Test.OldName', 'NewName', 'COLUMN'; 
```

这是包含 1000 条记录的完整示例：

```
create table dbo.Test(ID int IDENTITY(1,1), OldName varchar(10));

declare @i int;
SET @i = 0;
WHILE @i < 1000
BEGIN
   SET @i = @i + 1;
   INSERT INTO dbo.Test Values(CAST(@i AS varchar(4))+ '. record');
END;

SELECT * FROM dbo.Test;

EXEC sp_rename 'dbo.Test.OldName', 'NewName', 'COLUMN';  

SELECT * FROM dbo.Test;

DROP TABLE dbo.Test; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T11:00:48.873

您可以使用

```
sp_RENAME 'TableName.[Your_Old_ColumnName]' , '[Your_New_ColumnName]', 'COLUMN' 
```

注意：重命名列名会破坏您的查询、存储过程等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:04:13.863

调用存储过程[sp_rename](http://msdn.microsoft.com/en-us/library/ms188351%28v=sql.105%29.aspx)应该是最简单最快的方法

```
USE AdventureWorks2008R2;
GO
EXEC sp_rename 'Sales.SalesTerritory.TerritoryID', 'TerrID', 'COLUMN';
GO 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T10:57:09.343

```
 EXEC sp_rename 'myColumn', 'myColumn2', 'COLUMN' 
```

# prolog - 从知识库中删除谓词

> ID：13047749
> 
> 赞同：0
> 
> 时间：2012-10-24T10:53:12.373
> 
> 标签：prolog

我想提出一个问题。我有一个正在处理的知识库，我希望用户使用 delete_predicate 删除他想要的谓词。

知识库是这样的：

```
is_tired(erin).
is_tired(mary). 
```

我已将删除谓词定义为

```
delete_predicate(Predicate):-tell('my_knowledge_base.pl'),
    retract(Predicate),
    told. 
```

假设用户想要删除谓词 is_tired(mary)。他将输入以下查询：

```
?-delete_predicate(is_tired(mary)). 
```

并且给定的谓词将从 kb 中删除。我尝试了上述规则，但它删除了所有 kb 的内容！！

我真的很感激任何指针！

我将准确地展示我需要 delete_predicate 如何工作。

假设我在前面提到的知识库中增加了一些谓词：

```
:-dynamic(tired/1).
tired(kosta).
tired(renata).
tired(jim).
tired(mom).
tired(sister).
tired(mother).
tired(uncle).
tired(me). 
```

如果用户想删除累（妈妈）。从kb他会查询这个：

```
?-delete_predicate(tired(mom)). 
```

然后，知识库将删除该谓词，它看起来像这样：

```
tired(kosta).
tired(renata).
tired(jim).
%here used to be the tired(mom).
tired(sister).
tired(mother).
tired(uncle).
tired(me). 
```

如果用户想从 kb 中删除疲倦（我），那么 kb 将是：

```
tired(kosta).
tired(renata).
tired(jim).
%here used to be tired(mom).
tired(sister).
tired(mother).
tired(uncle).
%here used to be tired(me). 
```

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:29:12.137

收回/ 1 实际工作：

```
?- findall(X,is_tired(X),L).
L = [erin, mary].

?- delete_predicate(is_tired(mary)).
true.

?- findall(X,is_tired(X),L).
L = [erin]. 
```

但我认为您正试图将撤回的谓词存储在“my_knowledge_base.pl”中。因为你在告诉/告诉之间什么都不写，所以文件仍然是空的。

你可以这样做

```
delete_predicate(Predicate) :-
    open('my_knowledge_base.pl', append, S),
    (  retract(Predicate)
    -> format(S, '~q.~n', [Predicate])
    ;  true % what about errors?
    ),
    close(S). 
```

然后该文件将包含已删除的事实。

**编辑**实际上我不明白这个问题：一种可能性可能是

```
delete_predicate(Predicate) :-
        open('my_knowledge_base.pl', append, S),
        format(S, ':- retract(~q).~n', [Predicate]),
        close(S). 
```

**编辑**我们可以在将 :-retract(Predicate) 附加到文件之前测试是否收回成功。使用您喜欢的语法

```
delete_predicate(Predicate) :-
  (  retract(Predicate)
  -> append('my_knowledge_base.pl'),
     format(':- retract(~q).~n', [Predicate]),
     told
  ;  true % or fail?=
  ). 
```

# jquery - 返回 false 不退出 foreach 循环

> ID：13047750
> 
> 赞同：2
> 
> 时间：2012-10-24T10:53:17.777
> 
> 标签：jquery

我想返回 false 或中断 foreach 循环。但它不起作用。这是我尝试过的代码。

```
 function validate()
    {
        var validate="false";
        var atLeastOneIsChecked =  $("input[name='city[]']").is(":checked");
        if(atLeastOneIsChecked==true){

            $("input:checkbox[name='city[]']:checked").each(function(j){
                var city=$(this);

                $('select[name="category[]"]').each(function(i){

                    if(i==j){
                         if($(this).val()=="0"){
                         alert("Please select hotel category");
                         city.click();
                           //validate="false";
                            return false;
                       }
                        else
                        {
                            validate="true";
                        }

                    }
    // return false;
                }); 
                alert(j);
               // return false;
            });
            //return false;
        }
        else
        {
            alert('Please select atleast one city.');
            validate="false";
        }
        if(validate=="true"){
            return true;
        }
        else
        {
            return false;
        }
    } 
```

在“请选择酒店类别”之后，该函数应返回 false。但是表格是在警报之后发布的。我不知道有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:37:16.737

感谢大家。我修改了我的代码

```
function validate()
    {
        var validate="false";
        var atLeastOneIsChecked =  $("input[name='city[]']").is(":checked");
        if(atLeastOneIsChecked==true){

            $("input:checkbox[name='city[]']:checked").each(function(j){
                var city=$(this);
                $('select[name="category[]"]').each(function(i){
                    if(i==j){
                        if($(this).val()=="0"){
                            alert("Please select hotel category");
                            city.click();
                            city.attr('checked', true);
                            validate="false";
                            return false;
                        }
                        else
                        {
                            validate="true";
                        }
                    }
                }); 
                if(validate=="false"){
                    return false;
                }
            });
        }
        else
        {
            alert('Please select atleast one city.');
            validate="false";
        }
        if(validate=="true"){
            return true;
        }
        else
        {
            return false;
        }
    } 
```

现在它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:04:45.997

将处理程序放在您的表单标签中，如下所示：

```
<form onsubmit="return validate();" method="POST" action="post.php">

  ..

</form> 
```

然后它将在提交时被调用，如果您在函数中返回 false，它将阻止表单提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:01:12.307

如果我没有错，那么您所犯的错误是您认为：

```
if($(this).val()=="0"){
    alert("Please select hotel category");
    city.click();        
    //validate="false";
    return false;
} 
```

将阻止点击处理程序发布表单。return false 部分需要在提交表单之前调用的事件处理程序中发生。

# html - 使用手写笔功能时保持长手颜色值

> ID：13047751
> 
> 赞同：2
> 
> 时间：2012-10-24T10:53:34.027
> 
> 标签：html, css, stylus

我正在尝试编写一个小的 mixin 来为 Internet Explorer 创建一个过滤器渐变。该函数称为 filter-gradient 并采用 2 个颜色参数。

当您传递 #ffffff 的颜色值时，手写笔会自动将其缩短为 #fff。有没有办法维护长手版本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:05:35.263

您可以为此使用该`unquote()`功能，因此`unquote('#ffffff')`总是会给您`#ffffff`，而不会缩短。

# java - 从 Eclipse 远程连接到 MySQL 数据库

> ID：13047752
> 
> 赞同：0
> 
> 时间：2012-10-24T10:53:34.453
> 
> 标签：java, eclipse, connection-pooling, remote-connection

我需要从我的 Eclipse 项目连接到 MySQL 远程数据库。

我以这种方式更改我的 context.xml：

```
<Resource name="jdbc/aname" auth="Container" type="javax.sql.DataSource"
          maxActive="100" maxIdle="30" maxWait="10000"
          username="userdb" password="pwddb" driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://ipaddress/dbname" 
          factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" /> 
```

我使用 ConnectionPool 并在查找中使用

```
DataSource ds = (DataSource)initContext.lookup("java:/comp/env/jdbc/aname"); 
```

我没有成功连接到数据库。我得到这个例外：

```
Unexpected exception resolving reference
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.GeneratedConstructorAccessor22.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:266)
at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:175)
at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:667)
at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:607)
at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:470)
at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:135)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:112)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:99)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:501)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:224)
at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at mypackage.login.LoginValidatorAction.execute(LoginValidatorAction.java:44)
at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:241)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:294)
... 61 more

javax.naming.NamingException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at org.apache.naming.NamingContext.lookup(NamingContext.java:860)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at mypackage.login.LoginValidatorAction.execute(LoginValidatorAction.java:44)
at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

**编辑**

我发现 ny mysql db hosting 不允许来自其网络之外的连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:03:32.230

我建议尝试一个测试项目以确保您可以远程连接。下面是一个应该可以工作的代码示例——您需要指定您的 IP 地址、用户名、密码和您希望连接的数据库名称，我在括号中标记了这些名称。确保 MySQL 数据库的用户名具有远程访问权限（类似于 GRANT ALL PRIVILEGES ON exampledb.* TO username@'%' IDENTIFIED BY 'password'; ）注意，'%' 指定连接可以来自任何 IP -地址。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class JDBCExample {

public static void main(String[] argv) throws SQLException {

    //-------------------------------------------------------------------------
    System.out.println("-------- MySQL JDBC Connection Testing ------------");

    try {

        Class.forName("com.mysql.jdbc.Driver");

    } catch (ClassNotFoundException e) {

        System.out.println("Where is your MySQL JDBC Driver?");
        e.printStackTrace();
        return;

    }

    System.out.println("MySQL JDBC Driver Registered!");
    Connection connection = null;

    try {
        connection = DriverManager
                .getConnection("jdbc:mysql://192.168.1.8:3306/[DATABASE_NAME_HERE]",
                        "[YOUR_USERNAME]", "[YOUR_PASSWORD]");

    } catch (SQLException e) {
        System.out.println("Connection Failed! Check output console");
        e.printStackTrace();
        return;
    }

    if (connection != null) {
        System.out.println("You made it, take control your database now!");
    } else {
        System.out.println("Failed to make connection!");
    }
    //-------------------------------------------------------------------------

            /*
    Statement stmt = connection.createStatement();
    boolean result = stmt.execute("CREATE TABLE Students " +
            " (student_ID INT UNSIGNED NOT NULL AUTO_INCREMENT, " +
            " PRIMARY KEY (student_ID), firstName varchar(255), " +
            " lastName varchar(255))");
    System.out.println("\tTable creation result: " + result + "\t");
    System.out.println("**Note: The expected result is FALSE");
            */
}
} 
```

编辑：此解决方案适用于使用 InnoDB 引擎在 Linux 服务器上运行的 MySQL 5.5 安装。上面的代码是从 Eclipse 运行的，其中包含在项目属性的构建路径中的 Connector/J .jar 文件 - 只是为了澄清。

# c++ - argv[1] 仅包含 Visual C++ 2010 中第一个命令行参数的第一个字母

> ID：13047754
> 
> 赞同：2
> 
> 时间：2012-10-24T10:53:43.540
> 
> 标签：c++, c, visual-studio-2010, visual-c++

> **可能重复：**
> [C++ 中的 _tmain() 和 main() 有什么区别？](https://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c)

我有一个控制台应用程序，它采用一个命令行参数。

```
int _tmain(int argc, char* argv[])
{
    ...
    printf("Path: %s\n", argv[1]);
        ...
} 
```

当我使用参数 ( `myprogram.exe D:\myfolder\myfile`) 运行程序时，它会打印`Path: D`而不是`Path: D:\myfolder\myfile`.

我应该如何更改提取第一个命令行参数 ( `argv[1]`) 的过程，以便它返回完整路径，而不仅仅是第一个字母？

我试图将路径放在引号 ( `myprogram.exe "D:\myfolder\myfile"`) 中，但没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:04:25.693

使用`_tprintf`而不是`printf`. 您的程序几乎可以肯定编译为`UNICODE`，因此，每个“字符”占用两个字节。

您调用`printf`which 对单字节字符进行操作。第二个字节恰好是 0，因此`printf`认为它到达了字符串的末尾，因为零字节被认为是字符串的终止。

并确保您`argv`的声明为`TCHAR`而不是`char`。保持一致：要么使用`TCHAR`例程，要么不使用。但是不要混用，除非你有**很好**的理由（即你知道你在做什么并且你正准备做一些魔法）。很有可能你不这样做，你也不应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:06:37.307

Visual Studio C++ 有一种处理 Unicode 支持的特殊方式。[tchar.h](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.80%29.aspx)中的宏根据项目设置扩展为符号的普通或宽字符版本。所以`_tprintf`展开为`printf`or `wprintf`。似乎您正在尝试使用`printf`，如果您的项目设置启用了 Unicode 支持，那么您遇到的正是预期的问题。看看 tchar.h 并尝试`_tprintf`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:06:02.107

在 Visual Studio 中，主函数通常占用 wchar 类型的参数。如果是这种情况，请尝试通过 wprintf 函数输出：

```
wprintf("Path : %S", argv[1]); 
```

注意大写的“S”。如果你用小写的 's' 代替它，它只会打印第一个字符。这就是宽字符的工作原理。你应该在 msdn 论坛上阅读更多关于它们的信息。

# java - HashSet 是否制作添加对象的内部副本？

> ID：13047757
> 
> 赞同：1
> 
> 时间：2012-10-24T10:53:47.960
> 
> 标签：java, reference

假设我有一个递归函数，就像这样

```
public void someRecur(List<Integer>someList){
  if(someBreakCondition)
    Set.add(someList);
  for(int i = 0; i < someLen ; i++){
    someList.add(someInt);
    someRecur(someList);
    someList.remove(someInt);
   }
} 
```

删除是否影响已放入集合的列表？我应该怎么做才能给集合一个列表的实际副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:56:46.567

> 删除是否影响已放入集合的列表？

是的，会受到影响。您放入 Set 的不是实际列表，而是对该列表的引用。因此，当列表被修改时，所有指向该列表的引用都会看到更改。

> 我应该怎么做才能给集合一个列表的实际副本？

因为，您可以创建一个新列表，并将原始列表中的所有元素添加到该列表中并将其添加到您的`Set`-

```
List<Integer> newList = new ArrayList<Integer>();
newList.addAll(someList);
set.addAll(newList); 
```

**或者，简单地说： -**

```
set.addAll(new ArrayList<Integer>(someList)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T10:55:11.670

您不会将*对象*放入地图中；您添加对堆中存在的对象的*引用。*

Java 数据结构保存对对象的引用，而不是对象本身。如果从数据结构中删除引用，其他对象可能仍具有该引用的副本。

如果两个对象持有对可变对象的引用，那么每个对象都会看到另一个对象所做的更改。（这就是为什么线程安全很重要。）

当没有人引用堆上的对象时，它就有资格进行 GC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T10:59:31.887

我必须警告您，**在将对象放入集合后，您不能更改它**——这就是您在代码中所做的：您将列表添加到集合中，然后再更新它。这会弄乱它的哈希码并破坏 HashSet。也许你甚至不需要一个 Set 那里，而是另一个列表。

您可以通过克隆（如其他地方所建议的那样）或通过显式构造一个`new ArrayList(someList)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T10:55:23.717

不，`HashSet`不会复制您添加到其中的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T10:55:41.297

该集合将保存对列表的引用-因此*只有一个列表*。您可以直接在原始列表中添加/删除项目，也可以使用集合中的列表：它具有相同的效果。

# json - 将带有布尔值的 json 对象发布到 MVC3 控制器始终为 false

> ID：13047760
> 
> 赞同：2
> 
> 时间：2012-10-24T10:54:11.893
> 
> 标签：json, asp.net-mvc-3, jquery

我有一个包含几个布尔值的对象。但我未能将其发布到 mvc3 控制器，服务器已成功接收其他值。

```
$.ajax({
     url: url,
     type: 'POST',
     data: JSON.stringify(g),
     datatype: 'json',
     contentType: 'application/json;charset=utf-8',
     success: function (data) {
      }
}); 
```

调用`JSON.stringify(g)`将返回以下字符串 ( *partial )

```
"Entry":["true","false"],"Exit":"false","Speeding":["true","false"],"SpeedLimit":"110","EES_Monday":["true","false"],"EES_Tuesday":["true","false"],"EES_Wednesday":["true","false"],"EES_Thursday":["true","false"],"EES_Friday":["true","false"],"EES_Saturday":"false","EES_Sunday":"false" 
```

但是，我的服务器控制器未能接收到布尔值

```
[HttpPost]
public String Edit(EditModel g){ } 
```

所有布尔值都是假的。但是会收到其他值。

潜在的原因是什么？

我整个下午都被困在这里。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:45:07.600

看起来，您的布尔值是以`string`. 也许您的 JSON 反序列化器不会转换`"true"`为`true`

在静态类型语言中（包括 C#）

```
true != "true" 
```

# ios - Apple 的 HTTP Live Streaming 的 openssl aes-128 加密问题

> ID：13047767
> 
> 赞同：1
> 
> 时间：2012-10-24T10:54:38.743
> 
> 标签：ios, encryption, openssl, aes, http-live-streaming

我们正在为 Apple使用`openssl aes-128 encryption`流媒体。`HLS video streaming`

以下是用于`aes-128 encryption`

```
openssl aes-128-cbc -salt -k <HEXKey> -iv <HEXIV> -in <INFILE> -out <OUTFILE> 
```

在我的`Playlist / Index`文件下面用于 hls 流式传输。

```
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:NO
#EXT-X-VERSION:2
#EXT-X-KEY:METHOD=AES-128,URI="http://xxx.xxxx.xxx/key.txt",IV=0x00000000000000000000000000000000
#EXT-X-TARGETDURATION:10
#EXTINF:10,
http://xxx.xxxx.xxx/encry.ts
#EXT-X-ENDLIST 
```

其中，`key.txt`包含格式为 的十六进制键`0x00000000000000000000000000000000`。

但这不起作用，也不能在`IOS`设备上播放媒体。提供错误为`This movie could not be played`

我不确定，有什么问题。这个问题是`encryption method`还是`playlist file`

请帮我。我会欣赏的。

提前致谢

**编辑 ：**

我觉得，以下信息很少，如果有任何问题，可能会有所帮助。

下面是我用来创建十六进制的命令`key`和`IV`

```
openssl enc -aes-128-cbc -k String@MyKey -P -md sha1 
```

如果有任何问题，请帮助我。

现在我的播放列表文件解析很好`Media Stream Validator`，但是在验证媒体时它给出了以下错误。

```
unable to parse segment due to encryption 
```

请帮助任何人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:53:34.577

您的问题实际上与文件'key.txt'有关。HLS 规范说，#EXT-X-KEY 标记中的 URI 属性必须指向一个文件，该文件具有二进制格式的 16 个八位字节数组，而不是您提供的十六进制字符串。

有关更多信息，请参阅：[https ://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-10#section-5](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-10#section-5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:15:13.793

好吧，实际问题是`key.txt`我在几个小时前才找到的文件。我`key.txt`的 , 不应该包含`hexkey`, 但应该包含`16bytes`键。

所以我的密钥创建方法并在加密方法和`playlist`文件中使用它是错误的步骤。

以下是我所做的更改，并开始工作。

创建密钥的命令

```
openssl rand -base64 12 
```

现在我在 key.txt 文件中添加了这个密钥，并且我的 index.m3u8 文件指向了这个密钥文件。

用于加密的命令，使用上述密钥的 c# 使用 hexdump`<hex-key>`

```
openssl aes-128-cbc -e -in <infile> -out <outfile> -p -nosalt -iv <hex-iv>  -K <hex-key> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:28:36.683

您的 EXT-X-KEY 语法错误：

在密钥 uri 之前应该是**URI**而不是**Key**。

```
#EXT-X-KEY:METHOD=AES-128,URI="http://xxx.xxxx.xxx/key.txt",IV=0x00000000000000000000000000000000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-20T16:13:50.797

我有同样的问题，但仅在 IOS 设备上（chromecast、firefox 等浏览器都可以）这是我的播放列表

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-TARGETDURATION:4
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
#EXT-X-KEY:METHOD=AES-128,URI="https://xxxxxx/xxxxx/xxxxxx/xxx/xxxxx/xxxx/xxxx_enc.key",IV=0x000000000000000000
#EXTINF:3.840000,
xxx_480p_000.ts
#EXTINF:1.440000,
xxx_480p_001.ts
#EXT-X-ENDLIST 
```

我检查了 safari web 检查器，但我无法理解，密钥已正确下载，但在下载第一段时停止

有同样问题的人吗？

[![在此处输入图像描述](../Images/17d801d67f5f7969622a0f3954dba6ab.png)](https://i.stack.imgur.com/GV0Yh.png)

# php - 如果表单字段为空，则将替代值插入 mysql 数据库

> ID：13047769
> 
> 赞同：-2
> 
> 时间：2012-10-24T10:54:53.920
> 
> 标签：php, mysql, forms, webforms

以下表格收集有关访问者颜色偏好的数据。

如果用户提交空白表单，如何将预定义的替代值插入 mysql 数据库。

这里要考虑的是我不想阻止用户使用表单验证提交空白表单。

我目前的后端代码如下：

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO users (color_name) VALUES (%s)",

   GetSQLValueString($_POST['color_name'], "text")),

  mysql_select_db($database_x, $x);
  $Result1 = mysql_query($insertSQL, $x) or die(mysql_error());

  $insertGoTo = "choicecolor.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  } 
```

* * *

```
<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
<table align="center">
  <tr valign="baseline">
    <td align="right" nowrap="nowrap">Enter Color Name:</td>
    <td><input type="text" name="color_name" value="" size="32" /></td>
  </tr>
   <tr valign="baseline">
    <td nowrap="nowrap" align="right"><input type="hidden" name="MM_insert" value="form1" /></td>
                    <td>
                    <input type="submit" value="Submit Color Name" />
                    </td>
                  </tr>
                </table>
              </form>
              </td>
            </tr>
      </table>
</form> 
```

如果访问者提交一个空白表单而没有输入任何值，`"no choice"`则应将预定义的值（例如，`"yellow"``"yellow"`

在这种情况下如何使用 PHP 预定义值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:30:11.910

要在 php 中执行此操作，请添加类似这样的内容

```
$toInsert = isset($_POST['color_name'])? $_POST['color_name']: 'Your default string'; 
```

然后改变这一行

```
$insertSQL = sprintf("INSERT INTO users (color_name) VALUES (%s)", GetSQLValueString($_POST['color_name'], "text")); 
```

对此

```
$insertSQL = sprintf("INSERT INTO users (color_name) VALUES (%s)", GetSQLValueString($toInsert, "text")); 
```

但你真的应该先看看 PDO 等。同样正如*Dark Wish*提到的，在数据​​库级别而不是使用 php 可能会更好。

# winforms - 在 TableLayoutPanel 中移动行

> ID：13047772
> 
> 赞同：5
> 
> 时间：2012-10-24T10:55:04.177
> 
> 标签：winforms, visual-studio, visual-studio-2012, windows-forms-designer

我不知道如何`TableLayoutPanel`在设计器中移动一行。你是怎样做的？

我无法拖动它们，没有向上或向下移动它们的按钮，并且将所有控件从一行移动到另一行既乏味又耗时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:55:29.717

要在设计器中执行此操作，您需要使用第三个空行，假设您要交换第 1 行和第 2 行。

*   添加一个空行 3。
*   从第 1 行 > 第 3 行移动控件
*   从第 2 行移动控件 > 第 1 行
*   从第 3 行移动控件 > 第 1 行
*   删除第 3 行

是的，这是一种解决方法，但它可以完成工作。

或者，您可以更改 Designer.cs 文件中的代码。在那里您可以更改以下内容：

```
this.myTableLayout.Controls.Add(this.myLabel1, 0, 0);//Change the order of these items.
this.myTableLayout.Controls.Add(this.myLabel2, 0, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T16:58:21.577

如果您`TableLayoutPanel`的子控件没有停靠（即，您可以拖动它们），您可以简单地将每个控件从第一行拖到第二行的相应单元格中。然后，Windows 窗体设计器将为您交换控件，因为每个单元格中只能有一个控件。[这个技巧也可以在 MSDN 上找到](https://msdn.microsoft.com/en-us/library/w4yc3e8c(v=vs.110).aspx#Anchor_9)。

它仍然不理想，但至少您不必使用此方法创建或删除行，也不必手动编辑设计器代码。

# java - Java中的AES解密-IvParameterSpec太大

> ID：13047774
> 
> 赞同：1
> 
> 时间：2012-10-24T10:55:10.073
> 
> 标签：java, encryption, aes

我将使用两个密钥解密明文。

正如您在图片中看到的，我们有一个加密文件，其中包含 KEY1（128 字节）、KEYIV（128 字节）、key2（128 字节） - 在这种情况下不使用 - 和密文。

![描述性图像](../Images/8124aa745d2ea12a4a03965ff787663d.png)

我在这里得到的错误是：

```
Exception in thread "main" java.security.InvalidAlgorithmParameterException: 
Wrong IV length: must be 16 bytes long. 
```

但它是 64 字节。

```
public class AES {
 public static void main(String[] args) throws Exception {

  byte[] encKey1 = new byte[128];

  byte[] EncIV = new byte[256];
  byte[] UnEncIV = new byte[128];
  byte[] unCrypKey = new byte[128];
  byte[] unCrypText = new byte[1424];

  File f = new File("C://ftp//ciphertext.enc");
  FileInputStream fis = new FileInputStream(F);
  byte[] EncText = new byte[(int) f.length()];
  fis.read(encKey1);
  fis.read(EncIV);
  fis.read(EncText);
  EncIV = Arrays.copyOfRange(EncIV, 128, 256);
  EncText = Arrays.copyOfRange(EncText, 384, EncText.length);
  System.out.println(EncText.length);
  KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
  char[] password = "lab1StorePass".toCharArray();
  java.io.FileInputStream fos = new java.io.FileInputStream(
    "C://ftp//lab1Store");
  ks.load(fos, password);

  char[] passwordkey1 = "lab1KeyPass".toCharArray();

  PrivateKey Lab1EncKey = (PrivateKey) ks.getKey("lab1EncKeys",
    passwordkey1);

  Cipher rsaDec = Cipher.getInstance("RSA"); // set cipher to RSA decryption
  rsaDec.init(Cipher.DECRYPT_MODE, Lab1EncKey); // initalize cipher ti lab1key

  unCrypKey = rsaDec.doFinal(encKey1); // Decryps first key

  UnEncIV = rsaDec.doFinal(EncIV); //decryps encive byte array to undecrypted bytearray---- OBS! Error this is 64 BYTES big, we want 16?
  System.out.println("lab1key "+ unCrypKey +" IV " + UnEncIV);
  //-------CIPHERTEXT decryption---------
  Cipher AESDec = Cipher.getInstance("AES/CBC/PKCS5Padding");
  //---------convert decrypted bytearrays to acctual keys
  SecretKeySpec unCrypKey1 = new SecretKeySpec(unCrypKey, "AES");
  IvParameterSpec ivSpec = new IvParameterSpec(UnEncIV);

  AESDec.init(Cipher.DECRYPT_MODE, unCrypKey1, ivSpec );

  unCrypText = AESDec.doFinal(EncText);

  // Convert decrypted cipher bytearray to string
  String deCryptedString = new String(unCrypKey);
  System.out.println(deCryptedString);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:20:50.733

由于位和字节之间的混淆，您的数组完全错误。您的 IV 实际上是 256 字节长，而不是 64 字节，即使应用程序通过了它，它也会抱怨 128 字节的密钥。AES 是使用 128 位到 256*位*密钥的 128 位密码。它应该看起来更像这样：

```
byte[] encKey1 = new byte[16];
byte[] EncIV = new byte[16];
byte[] UnEncIV = new byte[16];
byte[] unCrypKey = new byte[16]; 
```

另一个潜在的错误是 unCrypText 的定义，它应该是：

```
byte[] unCrypText = new byte[(int) f.length()]; 
```

就像 EncText 一样，但这对于测试可能无关紧要。

# java - 是否可以选择要在 Maven 构建中使用的包

> ID：13047780
> 
> 赞同：0
> 
> 时间：2012-10-24T10:55:23.153
> 
> 标签：java, maven, ejb

> **可能重复：**
> [通过 Maven 构建配置文件选择类](https://stackoverflow.com/questions/13047118/selecting-class-by-maven-build-profile)

我有两个名为 com.app.util 和 com.app.mock 的包。mock 包具有部分或全部相同的类，这些类也在 util 包中实现。是否可以选择所选的 Maven 配置文件正在使用哪个包？我想在测试配置文件中使用模拟包和类，但不在发布配置文件中。另外我希望只使用在模拟包中找到的类，否则构建将默认为 util 包类。如果这是不可能的，那么在构建过程中进行此类“覆盖”的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:00:03.947

您可以从编译中[排除类。](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#excludes)但也许你最好将包之间的依赖关系分离到不同的 Maven 模块中。会有一个 API 模块，一个依赖于 API 模块的模拟模块和一个也依赖于 API 模块的普通实现模块。`test`对于测试，您在模拟模块上声明具有范围的依赖项。为了打包应用程序，您声明了对实现模块的依赖关系。

# asp.net - 我的 HttpContext.GetLocalResourceObject 方法虚拟路径是什么？

> ID：13047781
> 
> 赞同：2
> 
> 时间：2012-10-24T10:55:34.290
> 
> 标签：asp.net

我已阅读[http://msdn.microsoft.com/en-us/library/ms149953.aspx](http://msdn.microsoft.com/en-us/library/ms149953.aspx)并需要验证我的`GetLocalResourceObject`虚拟路径是什么。

我的本地资源文件位于我的电脑上：

C:\inetpub\wwwroot\GlobalX\Input\App_LocalResources

在这个文件夹中是我的站点处理的所有语言的资源文件（InputContactDetails.aspx.ro.resx、InputContactDetails.aspx.hi.resx 等），以及默认资源文件（InputContactDetails.aspx.resx）。

当我尝试实现虚拟路径字符串时收到错误消息。以下是我的违规代码行：

```
return '<%= HttpContext.GetLocalResourceObject("~/GlobalX/Input/App_LocalResources/InputContactDetails.aspx.resx", "ContactDetails.Text", new System.Globalization.CultureInfo("ro")) %>'; 
```

我尝试过`~/GlobalX/Input/App_LocalResources`作为虚拟路径和其他几种排列，但我得到了同样的错误。

如果有人能证明我做错了什么，我将不胜感激。

这是我收到的错误消息：

> 未找到此页面的资源类。请检查资源文件是否存在，然后重试。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：找不到此页面的资源类。请检查资源文件是否存在，然后重试。
> 
> 源错误：
> 
> 第 410 行：函数 languageContactPromptPhone(var_lcs) { 第 411 行：if (var_lcs == "af") { 第 412 行：返回 '<%= HttpContext.GetLocalResourceObject("~/GlobalX/Input/App_LocalResources/InputContactDetails.aspx.resx", "ContactDetails.Text", new System.Globalization.CultureInfo("ro")) %>'; 第 413 行：} 第 414 行：否则 if (var_lcs == "sq") {
> 
> 源文件：c:\inetpub\wwwroot\GlobalX\Input\InputContactDetails.aspx 行：412
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：找不到此页面的资源类。请检查资源文件是否存在并重试。]
> System.Web.Compilation.LocalResXResourceProvider.CreateResourceManager() +2785818 System.Web.Compilation.BaseResXResourceProvider.EnsureResourceManager() +24 System.Web.Compilation.BaseResXResourceProvider.GetObject(String resourceKey , CultureInfo 文化) +15
> System.Web.Compilation.ResourceExpressionBuilder.GetResourceObject(IResourceProvider resourceProvider, String resourceKey, CultureInfoculture, Type objType, String propName) +23
> System.Web.HttpContext.GetLocalResourceObject(String virtualPath, String resourceKey, CultureInfoculture) +38
> ASP.input_inputcontactdetails_aspx.__RenderContentInputContactDetails(HtmlTextWriter __w, Control parameterContainer) in c:\inetpub\wwwroot\GlobalX\Input\InputContactDetails.aspx:412
> System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +109
> System.Web .UI.Control.RenderChildren(HtmlTextWriter writer) +8
> System.Web.UI.Control.Render(HtmlTextWriter writer) +10
> System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
> System.Web.UI .Control.RenderControl(HtmlTextWriter writer, ControlAdapter 适配器) +8991378
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
> System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
> System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
> System.Web.UI.Control.Render(HtmlTextWriter writer) +10 System.Web.UI.Control.Render(HtmlTextWriter writer
> ) Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8991378
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
> System .Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
> System.Web.UI.UpdatePanel.RenderChildren(HtmlTextWriter writer) +256
> System.Web.UI.UpdatePanel.Render(HtmlTextWriter writer) +37
> System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8991378
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer) + 25
> ASP.masterpages_masterinput_master.__RenderformMasterInput(HtmlTextWriter __w, Control parameterContainer) in c:\inetpub\wwwroot\GlobalX\MasterPages\MasterInput.master:140
> System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +109
> System. Web.UI.HtmlControls.HtmlForm.RenderChildren（HtmlTextWriter 编写器）+173
> System.Web.UI.HtmlControls.HtmlContainerControl.Render（HtmlTextWriter 编写器）+31
> System.Web.UI.HtmlControls.HtmlForm.Render（HtmlTextWriter 输出）+53 System.Web.UI.Control.RenderControlInternal（HtmlTextWriter 编写器，ControlAdapter 适配器）+27
> System.Web.UI.Control.RenderControl（HtmlTextWriter 编写器，ControlAdapter 适配器) +8991378
> System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer) +40
> System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
> System.Web.UI.Control.RenderChildren(HtmlTextWriter writer ) +8
> System.Web.UI.Control.Render(HtmlTextWriter writer) +10
> System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter 适配器) +27
> System.Web.UI.Control.RenderControl（HtmlTextWriter writer，ControlAdapter 适配器）+8991378
> System.Web.UI.Control.RenderControl（HtmlTextWriter writer）+25
> System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+ 208
> System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
> System.Web.UI.Page.Render(HtmlTextWriter writer) +29
> System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
> System .Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter 适配器) +8991378
> System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
> System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+3060

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-02T13:45:34.560

在代码隐藏中的 Asp.Net 4.6 中有相同的错误。这是由于路径中有*App_LocalResources引起的。*

```
HttpContext.GetLocalResourceObject("~/App_LocalResources/Default.aspx", "SampleResource.Text") 
```

导致错误：找不到此页面的资源类。请检查资源文件是否存在，然后重试。

没有*/App_LocalResources*它可以工作：

```
HttpContext.GetLocalResourceObject("~/Default.aspx", "SampleResource.Text") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:07:32.363

尝试使用/GlobalX/Input/App_LocalResources/InputContactDetails.aspx.resx，删除~

# android - 如何通过终端检查 Ubuntu 中的 android sdk 版本？

> ID：13047783
> 
> 赞同：6
> 
> 时间：2012-10-24T10:55:41.187
> 
> 标签：android, ubuntu

我已经在我的 Ubuntu 机器上安装了 android sdk，我正在尝试查看我使用的版本是什么。当谷歌搜索时，我在堆栈溢出中发现了很少的链接

[如何检索android sdk版本？](https://stackoverflow.com/questions/1882883/how-to-retrieve-the-android-sdk-version)

[Android 如何查看版本](https://stackoverflow.com/questions/5919267/android-how-to-check-version)

这些链接指定通过代码获取版本的方法，但是我如何通过 ubuntu 中的终端检查它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:58:37.367

您发布的两种方法适用于 Android 设备，不适用于安装了 Android SDK 进行开发的计算机。您应该在 Ubuntu 机器上安装了许多 Android SDK。

在终端中检查您机器中的所有 SDK，您可以使用[sdkmanager](https://developer.android.com/studio/command-line/sdkmanager.html)工具：

```
${ANDROID_HOME}/tools/bin/sdkmanager --list 
```

它将向您展示三个主要块`Installed packages`：`Available Packages`和`Available Updates`。

您也可以使用相同的工具来更新和安装/卸载软件包。

# php - php多个foreach循环

> ID：13047785
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:55:46.383
> 
> 标签：php, wordpress

您好，我正在 wordpress 中创建一个 php 脚本来生成一个动态 html 表，该表的数据是从数据库中获取的，

函数是这样的：

1) 主题 2) 主题 3) 项目

对于每个 [主题]，有 [主题]，对于每个 [主题]，有多个 [项目]

我想将每个 [topic] 显示为新行，并在其中显示 [items]

这是我的功能不起作用帮助我更正我的代码。

```
function dynamic_table($attr) {

global $wpdb;

$ThemeCode = $attr['theme'];
$Themes = getThemeinfo($ThemeCode);
$sr = 1;

$dt_list = $wpdb->get_results("SELECT * FROM wp_mtresources WHERE ThemeCode= '$ThemeCode'");
if(!empty($dt_list)) {
    echo '<h2>' . $Themes['Desc'] . '</h2>
        <table style="margin: auto; margin-bottom: 30px;" border="0" cellspacing="0" cellpadding="0">
        <tbody>
            <tr>
                <th>Topic</th>
                <th>Presenation</th>
                <th>Worksheets</th>
                <th>Other Resources</th>
            </tr>
            ';
    foreach ($dt_list as $dt) {
        $tp_list = $wpdb->get_results("SELECT * FROM wp_mtresources WHERE TopicCode= '$dt->TopicCode'");

        $Topics = getTopicsinfo($dt->ThemeCode, $dt->TopicCode);    
            echo '  
                <tr>
                    <td colspan="4" style="text-align:center;"><a href=""> ' . $Topics['TopicDesc'] . ' </a></td>
                </tr>';
            foreach ($tp_list as $tp) {

                echo '
                    <tr>
                        <td>' . $tp->ResourceLocation.'</td>    
                        <td></td>   
                        <td></td>   
                        <td></td>   
                    </tr>       
                ';

            }
    }   
        echo '</tbody>
              </table>';    
} else {
    return 'No Theme or Topic found.';
}   

 }
 add_shortcode('dt', 'dynamic_table'); 
```

这是意想不到的结果 [截图](http://i.stack.imgur.com/vGR1Z.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:18:37.117

首先我会从你的数据库中选择

```
PDO example..
while($rows = $query->fetch(PDO:FETCH_ASSOC)){
  $data = $rows;
} 
```

现在一切都在 $data 数组中，以您的表名作为键。

在其他数组中保存任何其他数据

`$another_array = ['example', 'example'];` <- 只是一个例子，可以是另一个像上面那样的数据库检索，不管只是另一个数据数组！

然后对于每个循环的数组之一，但访问该循环中的其他数组..

```
$array1 = ['one', 'two', 'three'];
$array2 = ['a', 'b', 'c'];

foreach($array1 as $k => $v){
     echo $v.' - '.$array2[$k];
} 
```

结果看起来像..

> 一 - a 二 - b 三 - c

对不起，如果这还不够清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-11T22:04:07.650

在我的一个例子中，我确实喜欢这样

```
$i=0;
$count=10;
echo count($_POST['dates']);echo'<br>';
while($i<10 )
{
$date = ($_POST['dates'][$i]) ;
$fee = ($_POST['fee'][$i]);
echo "The value of  is".$date .'-------'.$fee;
echo'<br>';
$i=$i+1;
} 

and it gave answer like 
The value of is2017-02-28-------800
The value of is2017-02-21-------1000
The value of is2017-02-13-------200 
```

# fonts - 是否可以逐步加载网络字体？

> ID：13047786
> 
> 赞同：0
> 
> 时间：2012-10-24T10:55:47.710
> 
> 标签：fonts, webfonts

我正在构建一个必须使用自定义字体（特别是 Ubuntu）的网页。不幸的是，该网站还需要多语言，管理员稍后会添加其他语言。要求可以通过单击按钮添加其他语言。

因此，字体需要相当大才能容纳所有潜在的字符。即使在 WOFF 中，仅字体就会产生大约 500KB 的大小。这太糟糕了。

另一方面，如果我现实地看待它，最可能的语言将是拉脱维亚语、英语、俄语、德语、爱沙尼亚语、立陶宛语。也许是法国人，如果他们决定一路走下去的话。这意味着拉丁文+西里尔文以外的任何东西都不太可能。这可能会严重减小字体大小。

尽管如此，我还是愿意为任何可能发生的事情做好准备。是否可以以某种方式将字体“拆分”为两部分 - “基本”和“扩展”，然后分别加载它们？这样拉丁语/西里尔语就可以快速加载，但其余的只会在以后加载，如果有的话？

哦，这也需要在IE7和IE8上工作。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:26:09.280

[您可以使用FontForge](http://fontforge.org)、免费和开源工具（[此处](https://stackoverflow.com/a/12976510/1067730)的操作方法）或使用[FontSquirrel 的生成器](http://www.fontsquirrel.com/fontface/generator)创建仅包含对某些语言的支持的几种字体- 只需确保选择拉丁或西里尔文等字符的子集：

![字体松鼠](../Images/5800a978999fa9a31d3d5ffb12b134d8.png)

# mysql - 删除级联到表

> ID：13047792
> 
> 赞同：1
> 
> 时间：2012-10-24T10:55:55.783
> 
> 标签：mysql, cascade

如何将删除级联添加到此表创建脚本？id_fk 来自 mytable 表。

```
 CREATE TABLE IF NOT EXISTS `ip` (

  `ip_id` int(11) NOT NULL AUTO_INCREMENT,

  `id_fk` int(11) DEFAULT NULL,

  `ip_add` varchar(40) DEFAULT NULL,

  PRIMARY KEY (`ip_id`),

  KEY `id_fk` (`id_fk`)

) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:07:01.047

试试这个：

```
ALTER TABLE `ip`
ADD CONSTRAINT `FK_mytable` FOREIGN KEY (`id_fk`) REFERENCES `mytable` (`id`)   
ON DELETE CASCADE ON UPDATE CASCADE; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:05:04.387

添加[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)并指定要做什么以及何时做。

```
 ALTER TABLE ip
    ADD CONSTRAINT constraint_name
        FOREIGN KEY index_name(id_fk)
            REFERENCES other_table(other_column_name)
                ON DELETE CASCADE
                ON UPDATE CASCADE; 
```

您可以直接在表定义中包含约束：

```
FOREIGN KEY index_name(id_fk)
    REFERENCES other_table(other_column_name)
        ON DELETE CASCADE
        ON UPDATE CASCADE; 
```

# excel - Excel VBA：使用相同单元格的内容执行覆盖单元格内容的功能

> ID：13047795
> 
> 赞同：0
> 
> 时间：2012-10-24T10:55:59.893
> 
> 标签：excel, vba

我正在尝试对 Excel VBA 中的一列数据运行一个简单的操作。如果 B 列中的单元格以“N”*之前*的字母开头，则该单元格不会发生任何事情。如果单元格以字母“N”或更高的字母开头（在字母表中），则它将单元格内容替换为“!!!!!”。

这是我的代码，它正确地将其应用于*另一*列：

```
Range("C1", Range("C1").End(xlDown)).Value = "=IF(LEFT(A1,1)<""N"",B1,""!!!!!"")" 
```

这工作正常，并使列 C 包含正确的输出。但是，为了替换 B 列，我需要将 C 列转换为文字值，然后删除所有 B 列。

这些额外的步骤似乎有点不必要和麻烦。有没有办法直接在 B 列上应用公式，而无需将值分配给单独的列然后破坏原始 B 列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:15:21.533

将 myRng 设置为您需要的任何行数。它似乎不适用于完整的列。

```
Sub CaptainProgsSub()

Dim myRng As Range, cell As Range
Set myRng = Range("B1:B100")

For Each cell In myRng
    If Left(Range("B" & cell.row), 1) > "N" Then Range("B" & cell.row) = "!!!!!"
Next cell

End Sub 
```

# java - 插入数据后无法刷新 JTable 内容

> ID：13047804
> 
> 赞同：1
> 
> 时间：2012-10-24T10:56:21.320
> 
> 标签：java, swing, jtable, defaulttablemodel

我正在将 JTable 实现为用户注册表单，我几乎完成了，但是当添加数据时，它不显示输入的最新数据，而且 JTable 的大小非常小。我怎样才能增加它？

代码在下面的链接[JTable 实现](http://pastebin.com/mbTQJCfF)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:09:29.223

除非您告诉它，否则您的表不会神奇地知道您何时添加了数据。

看看[DefaultTableModel#addRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5b%5d%29)

将新行插入数据库后，您需要将其添加到表模型中。

看看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:33:14.337

用这个

```
DefaultTableModel myData = new DefaultTableModel();
JTable table = new JTable(myData); 
```

// 使用模型类型构造函数初始化表

```
 String offer = "pankaj ";
    Object [] rowData=new Object[]{offer,null}; 
```

//将字符串转换为对象数组 myData.addRow(rowData);

//使用defaulttablemodel类的addRow(Object[] rowData)方法

# python - python中的加权随机样本

> ID：13047806
> 
> 赞同：9
> 
> 时间：2012-10-24T10:56:34.037
> 
> 标签：python, algorithm, random

我正在寻找一个函数的合理定义，该函数`weighted_sample`不只返回给定权重列表的一个随机索引（类似于

```
def weighted_choice(weights, random=random):
    """ Given a list of weights [w_0, w_1, ..., w_n-1],
        return an index i in range(n) with probability proportional to w_i. """
    rnd = random.random() * sum(weights)
    for i, w in enumerate(weights):
        if w<0:
            raise ValueError("Negative weight encountered.")
        rnd -= w
        if rnd < 0:
            return i
    raise ValueError("Sum of weights is not positive") 
```

给出一个具有恒定权重的分类分布）但是其中的一个随机样本`k`，**没有替换**，就像与`random.sample`相比`random.choice`。

就像`weighted_choice`可以写成

```
lambda weights: random.choice([val for val, cnt in enumerate(weights)
    for i in range(cnt)]) 
```

`weighted_sample`可以写成

```
lambda weights, k: random.sample([val for val, cnt in enumerate(weights)
    for i in range(cnt)], k) 
```

但我想要一个不需要我将权重分解为（可能很大）列表的解决方案。

编辑：如果有任何不错的算法可以给我一个直方图/频率列表（与参数格式相同`weights`）而不是一系列索引，那也将非常有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T15:11:12.743

从你的代码：..

```
weight_sample_indexes = lambda weights, k: random.sample([val 
        for val, cnt in enumerate(weights) for i in range(cnt)], k) 
```

..我假设权重是正整数，并且“没有替换”是指没有替换解开的序列。

这是基于 random.sample 和 O(log n) 的解决方案`__getitem__`：

```
import bisect
import random
from collections import Counter, Sequence

def weighted_sample(population, weights, k):
    return random.sample(WeightedPopulation(population, weights), k)

class WeightedPopulation(Sequence):
    def __init__(self, population, weights):
        assert len(population) == len(weights) > 0
        self.population = population
        self.cumweights = []
        cumsum = 0 # compute cumulative weight
        for w in weights:
            cumsum += w   
            self.cumweights.append(cumsum)  
    def __len__(self):
        return self.cumweights[-1]
    def __getitem__(self, i):
        if not 0 <= i < len(self):
            raise IndexError(i)
        return self.population[bisect.bisect(self.cumweights, i)] 
```

### 例子

```
total = Counter()
for _ in range(1000):
    sample = weighted_sample("abc", [1,10,2], 5)
    total.update(sample)
print(sample)
print("Frequences %s" % (dict(Counter(sample)),))

# Check that values are sane
print("Total " + ', '.join("%s: %.0f" % (val, count * 1.0 / min(total.values()))
                           for val, count in total.most_common())) 
```

### 输出

```
['b', 'b', 'b', 'c', 'c']
Frequences {'c': 2, 'b': 3}
Total b: 10, c: 2, a: 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T15:29:54.187

您要创建的是非均匀随机分布。这样做的一种不好的方法是创建一个巨大的数组，其中输出符号与权重成比例。因此，如果 a 的可能性是 b 的 5 倍，那么您将创建一个数组，其中 a 的数量是 b 的 5 倍。这适用于权重甚至是彼此的倍数的简单分布。如果你想要 99.99% a 和 0.01% b 怎么办？您必须创建 10000 个插槽。

有个更好的方法。所有具有 N 个符号的非均匀分布都可以分解为一系列 n-1 个二进制分布，其中每个分布的可能性均等。

因此，如果您有这样的分解，您首先会通过从 1 - N-1 生成均匀随机数来随机选择二进制分布

```
u32 dist = randInRange( 1, N-1 ); // generate a random number from 1 to N; 
```

然后说选择的分布是具有两个符号 a 和 b 的二元分布，a 的概率为 0-alpha，b 的概率为 alpha-1：

```
float f = randomFloat();
return ( f > alpha ) ? b : a; 
```

如何分解任何非均匀随机分布有点复杂。本质上，您创建了 N-1 个“桶”。选择概率最低的符号和概率最高的符号，并将它们的权重按比例分配到第一个二进制分布中。然后删除最小的符号，并删除用于创建此二进制分布的较大符号的权重。并重复这个过程，直到你没有留下任何符号。

如果您想使用此解决方案，我可以为此发布 c++ 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:37:57.247

如果你构建了正确的数据结构来`random.sample()`进行操作，你根本不需要定义一个新的函数。只需使用`random.sample()`.

在这里，`__getitem__()`是 O(n)，其中 n 是您拥有的具有权重的不同项目的数量。但它在内存中很紧凑，只`(weight, value)`需要存储对。我在实践中使用过类似的课程，对于我的目的来说它非常快。请注意，此实现采用整数权重。

```
class SparseDistribution(object):
    _cached_length = None

    def __init__(self, weighted_items):
        # weighted items are (weight, value) pairs
        self._weighted_items = []
        for item in weighted_items:
            self.append(item)

    def append(self, weighted_item):
        self._weighted_items.append(weighted_item)
        self.__dict__.pop("_cached_length", None)

    def __len__(self):
        if self._cached_length is None:
            length = 0
            for w, v in self._weighted_items:
                length += w
            self._cached_length = length
        return self._cached_length

    def __getitem__(self, index):
        if index < 0 or index >= len(self):
            raise IndexError(index)
        for w, v in self._weighted_items:
            if index < w:
                return v
        raise Exception("Shouldn't have happened")

    def __iter__(self):
        for w, v in self._weighted_items:
            for _ in xrange(w):
                yield v 
```

然后，我们可以使用它：

```
import random

d = SparseDistribution([(5, "a"), (2, "b")])
d.append((3, "c"))

for num in (3, 5, 10, 11):
    try:
        print random.sample(d, num)
    except Exception as e:
        print "{}({!r})".format(type(e).__name__, str(e)) 
```

导致：

```
['a', 'a', 'b']
['b', 'a', 'c', 'a', 'b']
['a', 'c', 'a', 'c', 'a', 'b', 'a', 'a', 'b', 'c']
ValueError('sample larger than population') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T14:43:23.877

由于我目前对结果的直方图最感兴趣，因此我想到了以下解决方案`numpy.random.hypergeometric`（不幸的是，对于 和 的边界情况，它的行为很糟糕，`ngood < 1`因此需要单独检查这些情况。）`nbad < 1``nsample < 1`

```
def weighted_sample_histogram(frequencies, k, random=numpy.random):
    """ Given a sequence of absolute frequencies [w_0, w_1, ..., w_n-1],
    return a generator [s_0, s_1, ..., s_n-1] where the number s_i gives the
    absolute frequency of drawing the index i from an urn in which that index is
    represented by w_i balls, when drawing k balls without replacement. """
    W = sum(frequencies)
    if k > W:
        raise ValueError("Sum of absolute frequencies less than number of samples")
    for frequency in frequencies:
        if k < 1 or frequency < 1:
            yield 0
        else:
            W -= frequency
            if W < 1:
                good = k
            else:
                good = random.hypergeometric(frequency, W, k)
            k -= good
            yield good
    raise StopIteration 
```

我很乐意就如何改进这一点或为什么这可能不是一个好的解决方案提出任何意见。

一个实现这个（和其他加权随机的东西）的 python 包现在在[http://github.com/Anaphory/weighted_choice](http://github.com/Anaphory/weighted_choice)上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-20T00:25:10.590

另一种解决方案

```
from typing import List, Any
import numpy as np

def weighted_sample(choices: List[Any], probs: List[float]):
    """
    Sample from `choices` with probability according to `probs`
    """
    probs = np.concatenate(([0], np.cumsum(probs)))
    r = random.random()
    for j in range(len(choices) + 1):
        if probs[j] < r <= probs[j + 1]:
            return choices[j] 
```

例子：

```
aa = [0,1,2,3]
probs = [0.1, 0.8, 0.0, 0.1]
np.average([weighted_sample(aa, probs) for _ in range(10000)])

Out: 1.0993 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-24T11:25:50.910

样品非常快。因此，除非您有很多兆字节要处理，否则 sample() 应该没问题。

在我的机器上，从 10000000 个长度为 100 的样本中生成 1000 个样本需要 1.655 秒。从 10000000 个元素中遍历 100000 个长度为 100 的样本需要 12.98 秒。

```
from random import sample,random
from time import time

def generate(n1,n2,n3):
    w = [random() for x in range(n1)]

    print len(w)

    samples = list()
    for i in range(0,n2):
        s = sample(w,n3)
        samples.append(s)

    return samples

start = time()
size_set = 10**7
num_samples = 10**5
length_sample = 100
samples = generate(size_set,num_samples,length_sample)
end = time()

allsum=0
for row in samples:
    sum = reduce(lambda x, y: x+y,row)
    allsum+=sum

print 'sum of all elements',allsum

print '%f seconds for %i samples of %i length %i'%((end-start),size_set,num_sam\
ples,length_sample) 
```

# java - 为什么在 Java EE 中使用 CDI

> ID：13047807
> 
> 赞同：52
> 
> 时间：2012-10-24T10:56:35.410
> 
> 标签：java, spring, jakarta-ee, cdi

我知道有很多文章解释了如何在 Java EE 中使用 CDI，但我无法弄清楚这实际上带来了什么优势。例如，假设我有一个当前使用 Foo 实例的类。我可能会做

```
Foo myFoo = new Foo(); 
```

或者

```
// Better, FooFactory might return a mock object for testing    
Foo myFoo = FooFactory.getFoo(); 
```

我一直在阅读使用 CDI 可以做到的内容：

```
@Inject
Foo myFoo; 
```

但为什么这比以前基于工厂的方法更好？我假设还有其他一些我不知道的用例，但我无法确定这一点。

如果我理解了下面的回答，那么这个概念就是 DI 框架充当集中配置的主对象工厂。这是一个合理的解释吗？

**更新**

从那以后我开始学习 Spring，现在这变得更有意义了。下面的段落取自*Spring in Practice*，以一个类为例，`AccountService`该类又使用`AccountDao`. 我为冗长的引用道歉，但我认为这确实是为什么注入的资源提供了超出标准初始化的东西的核心。

*您可以使用 new 关键字构造 AccountService，但服务层对象的创建很少如此简单。它们通常依赖于 DAO、邮件发送者、SOAP 代理等等。您可以在 AccountService 构造函数中以编程方式（或通过静态初始化）实例化这些依赖项中的每一个，但这会导致硬依赖项和级联更改，因为它们被换出。*

*此外，您可以在外部创建依赖项，并通过 setter 方法或构造函数参数在 AccountService 上设置它们。这样做会消除硬的内部依赖关系（只要它们是通过接口在 AccountService 中声明的），但是您会到处重复初始化代码。以下是创建 DAO 并以 Spring 方式将其连接到 AccountService 的方法：*

```
<bean id="accountDao" class="com.springinpractice.ch01.dao.jdbc.JdbcAccountDao"/>

<bean id="accountService"
    class="com.springinpractice.ch01.service.AccountService">
    <property name="accountDao" ref="accountDao"/>
</bean> 
```

如上所述配置了 beans，您的程序现在可以`AccountService`从 Spring ApplicationContext 请求一个实例，Spring DI 框架将处理所有需要实例化的实例。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-24T11:01:35.757

编写 CDI 的人给了你一个大对象工厂；他们为您完成了工作，比您做得更好。它是 XML 配置或注释驱动的，因此您不必将所有内容都嵌入代码中。

依赖注入引擎，比如 Spring，比你的工厂做得更多。复制他们提供的所有东西需要不止一个工厂类和一行代码。

当然，您不必使用它。你总是可以自由地发明自己的轮子。你应该——[如果你的目的是学习如何制造轮子](http://www.joelonsoftware.com/articles/fog0000000007.html)或消除依赖。

但是，如果您只想开发应用程序，最好使用其他人提供的工具，当他们为您提供优势时。

关于依赖注入的[开创性文章](http://martinfowler.com/articles/injection.html)由 Martin Fowler 撰写。我建议阅读它；八年后，它仍然很棒。

> “还不清楚更多是什么”

这里有几个优点：

1.  松耦合
2.  更容易测试
3.  更好的层次感
4.  基于接口的设计
5.  动态代理（转至 AOP）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-24T11:49:29.053

使用依赖注入的目的是使使用注入的东西的代码不依赖于工厂。对于您的工厂代码示例，您的代码中嵌入了一个静态方法调用，而 DI 方法不需要该方法调用。

被注入的东西`myFoo`不应该知道工厂。工厂对您的 DI 所没有的测试选项进行了限制。具体来说，如果你有一个 Bar 对象有一个 Foo，那么对该 Bar 对象的测试可以直接创建一个 Foo 或模拟 Foo 并将其放在 Bar 上，而无需涉及 FooFactory，并且你不必编写一个 FooFactory，这是样板，不做任何事情来实现应用程序业务逻辑。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-05T00:08:21.783

这是关于企业编程是什么的一个重要而微妙的问题。

名称选择得很好：上下文和依赖项。

CDI 与更好或更简洁的代码无关，它旨在确保大型组织能够构建复杂的分布式软件系统并共享数据。这是为了 100% 确保政府或其他官僚机构可以不加选择地为他们控制的每一个软件分发独立的、记录良好的软件包。请记住，现在几乎可以注入任何 POJO。

假设您正在构建某种客户端应用程序，并且您希望它在角落打印用户的名字。

*   这家大公司的企业架构师希望你拥有这种能力，但作为一名初级软件工程师，你不可能获得数据库的密钥。

*   他们还希望通过网络保护数据，但该公司不会支付任何工程师在每次需要共享数据片段时重新设计身份验证客户端。

*   他们希望您能够查询和更新此信息，但希望在比任何应用程序更高的级别上处理交易。

*   他们希望您能够在设置块中使用简单的模拟来测试您的课程。

*   他们希望类之间的耦合涉及最少的静态方法。

*   不断地不断地......

大多数 JSR 可能有一个“EA 希望能够……”隐藏在某个地方。

**CDI 是首选，因为它允许大型（任意？）水平和垂直规模的应用程序共享上下文、依赖关系，从而共享数据。**

用福勒的话来说：

> “问题是我怎样才能建立这个链接，以便我的列表器类不知道实现类，但仍然可以与实例对话以完成其工作。”
> 
> “但是如果我们希望以不同的方式部署这个系统，我们需要使用插件来处理与这些服务的交互，以便我们可以在不同的部署中使用不同的实现。”
> 
> “这些容器使用的方法是确保插件的任何用户都遵循一些约定，允许单独的汇编模块将实现注入到列表器中。”

简而言之，它们允许对复杂的企业应用程序进行集中的“命令和控制”。 *Java EE*是一个系统化、可靠的抽象过程，而 CDI 是它的化身，运行良好，几乎使其不可见。它使复杂应用程序的拼接变得微不足道。

还有两件事：

1.  请注意，CDI 与“服务定位器模式”和平共处，在 Java EE 中称为 JNDI，如果客户端开发人员需要在许多相同类型的替代方案中进行选择，则这种模式更为可取。

2.  在许多情况下，尤其是非企业（字面意思）情况下，CDI 的火力超出了所需。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-21T18:47:33.377

在高层次上，与 CompSci 上的大多数东西一样，它提供***了一定程度的间接***（或抽象），否则将在您的应用程序中硬编码为`Foo myFoo = new Foo();`. 这种间接性带来了松散耦合的代码，这使得事情变得模块化，这使得以更简单的方式替换、服务、测试等类或子系统变得容易。

请注意，间接/抽象有许多设计和模式——依赖注入只是其中之一。

您问题的另一个方面是“为什么选择 CDI？” - 好吧，因为有人已经为你完成了这项工作。您*总是*可以构建自己的东西，但是当目标是构建一个必须在预算内按时执行的真实世界系统时，这通常是浪费时间。当有一位米其林星级厨师愿意为您做这些工作时，为什么还要为杂货和烹饪烦恼呢？

# javascript - 这行得通吗？发送无线电输入数据

> ID：13047808
> 
> 赞同：0
> 
> 时间：2012-10-24T10:56:38.317
> 
> 标签：javascript

> **可能重复：**
> [使用 Javascript 获取单选按钮值](https://stackoverflow.com/questions/9618504/get-radio-button-value-with-javascript)

我正在尝试发布我的输入数据。其中大部分位于文本框中，但一个字段是单选按钮。我不确定语法是否正确。

```
var myProps = [];
            var type = document.getElementByName().value;

        function addProp(id) {
            if type = "text" {
            var value = encodeURIComponent(document.getElementById(id).value);
            }
            if type = "radio" {
            var value = encodeURIComponent(valueRadioButtonList(id).value);
            }
            myProps.push(id + "=" + value);
        }

        addProp('child_name');
        addProp('age');
        addProp('hometown');
        addProp('boy_girl');
            addProp('first_name');
        addProp('last_name');
        addProp('email');
        addProp('address1');
        addProp('address2');
        addProp('city');
        addProp('state');
        addProp('zip');
        addProp('country');

xmlhttp.send(myProps.join("&")); 
```

# xcode - 在一条线上移动一个点：两点之间有一条线

> ID：13047814
> 
> 赞同：1
> 
> 时间：2012-10-24T10:57:06.943
> 
> 标签：xcode, geometry, trigonometry

我在另外两个点之间的线上有一个标签点。从线的第一个点说它的 20 像素。

现在我想移动线的第一个点，带上标签点，所以我移动第一个点并将线重绘到线的最后一点。工作正常，但我如何将标签移动到新行，从左边再次放置 20px。

（长度 20px 作为一个变量而有所不同，具体取决于用户将标签放在哪里）。

我在想虽然使用 Y=kx+m 不能正确...

这是我到目前为止所写的：

```
-(double)positionOfLabel{
    //return relative position of label on old line, relatively the first point.
    return [self length]-   sqrt(self.label.center.x*self.label.center.x+self.label.center.y*self.label.center.y);
    //return [self length]-sqrt((self.last.x - self.label.center.x)*(self.last.x -  self.label.center.x) + (self.last.y - self.label.center.y)*(self.last.y -      self.label.center.y));
}

-(void)labelTranslate:(double)length{
    NSLog(@"Translating label length:%f", [self length]);
    double m= (self.last.y-self.first.y)/(self.last.x-self.first.x);
    double x= self.first.x+length/(sqrt(1+m*m));
    double y= x*m;
    NSLog(@"Moving label to:%f,%f", x,y);
    [self.label setCenter:CGPointMake(x, y)];

} 
```

标签的位置意味着返回标签放置的第一个点的距离。

[线条移动示例，因此线条图像](http://users.student.lth.se/et08dc0/files/arrowsmove.png)末端的两个点

正如您在图像中看到的，箭头表示由第一个点和最后一个点组成的线。红点和第一个点之间的距离在箭头的移动/平移过程中被保留。但是，这不适用于我的算法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:18:51.170

使用 Y=kx+m 形式不是一个好主意（因为垂直线），所以建议使用参数形式：

![在此处输入图像描述](../Images/d0666736e751c27870e0b9cabb486de7.png)

```
Norm = Sqrt((X2-X1)*(X2-X1) + (Y2-Y1)*(Y2-Y1)) // check for 0
Dir_X = (X2 - X1) / Norm
Dir_Y = (Y2 - Y1) / Norm
Label_X = X1 + 20 * Dir_X
Label_Y = Y1 + 20 * Dir_Y 
```

# c++ - C++ 日期解析实现

> ID：13047817
> 
> 赞同：2
> 
> 时间：2012-10-24T10:57:37.790
> 
> 标签：c++, regex, string, validation, boost

我目前正在将日期解析为程序。

格式可以是以下形式：

```
DDMMYYYY
DDMMYY
DDMM

DD/MM/YYYY
DD/MM/YY
DD/MM 
```

除了日期之外，还会包含其他内容，例如：

```
19/12/12 0800 1000 
```

这打破了我当前使用 boost::date_time 和 tokenizer 的实现。

对于这种情况，最好的建议是什么？我是否能够有一个更好的实现来允许以下内容：

```
19 Sep 12  // DD MMM YY 
```

我的想法是将它们作为字符串以 DDMMYYYY 形式返回，以便在程序的其他部分使用。这是最好的方法还是有更好的建议/替代方案？

*编辑：

决定服用 DDMMYYYY、DDMMYY 和 DDMM 不太可行。只能使用带有反斜杠的日期。

输出保持不变，格式为：DDMMYYYY

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:00:38.567

使用 boost.regex，您可以执行以下操作：

```
#include <iostream>
#include <boost/regex.hpp>

using namespace std;
using namespace boost;

int main(int argc, char* argv[])
{
    regex re("(\\d{2})\\/(\\d{2})(?:\\/?(\\d{2,4}))?");

    cmatch m;

    regex_search("1234 10/10/2012 4567", m, re);
    cout << m.str(1) + m.str(2) + m.str(3) << endl;
    regex_search("1234 10/10/12 4567", m, re);
    cout << m.str(1) + m.str(2) + m.str(3) << endl;
    regex_search("1234 10/10 4567", m, re);
    cout << m.str(1) + m.str(2) << endl;

    return 0;
} 
```

像这样编译：

```
g++ --std=c++11 -o test.a test.cpp -I[boost_path] [boost_path]/stage/lib/libboost_regex.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:22:31.920

您可以使用一些正则表达式库或内置 **sscanf**函数。它比 reg exp 更原始，但可以在您的情况下使用

```
/* sscanf example */
#include <stdio.h>

int main ()
{
   char sentence []="data 1";
   char str [16];
   int i;

   sscanf(sentence,"%s %d",str,&i);
   printf("%s -> %d\n",str,i);

 return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T10:04:13.633

以下代码适用于我。

```
regex regExDate("\\d{4}-\\d{2}-\\d{2}");
string date = "abc:\\2016-09-12";
smatch match;

if (regex_search(date, match, regExDate))
{
 string strDate = match.str();
} 
```

# xml - QT：XML Schema 验证 XSD，断言

> ID：13047820
> 
> 赞同：2
> 
> 时间：2012-10-24T10:57:46.473
> 
> 标签：xml, qt, xsd, qt4, qtxml

我想通过 QXmlSchema 使用 XSD 1.1 的断言功能。

如果使用以下 xsd 对其进行测试：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<xsd:element name="root">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="node1">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:integer">
                        <xsd:minInclusive value="0"/>
                        <xsd:maxInclusive value="100"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="node2">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="x" type="xsd:int"/>
                        <xsd:element name="y" type="xsd:int"/>
                    </xsd:sequence>
                    <xsd:assert test="x+ y=0"/>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

和以下xml：

```
<root>
    <node1>1</node1>
    <node2>
          <x>1</x>
          <y>3</y>
    </node2>
</root> 
```

现在，以下代码片段返回有效的模式和 xml 数据，即使断言应该为假。

```
 QXmlSchema schema;
 schema.load(schemaData);
 schema.isValid(); // true <=====
 QXmlSchemaValidator validator(schema);
 validator.validate(xmlData)); //true <===== 
```

知道为什么吗？是不是因为 Xsd 1.1 没有在 Qt 中实现？如果是这样，为什么模式被认为是有效的？

# mysql - 使用什么 SQL JOIN 来获取跨表的唯一值？

> ID：13047821
> 
> 赞同：0
> 
> 时间：2012-10-24T10:57:54.697
> 
> 标签：mysql, sql, join

假设我有 2 张桌子 T1 和 T2。我需要表 T2 中不存在的表 T1 中的所有值。那个 SQL 会是什么样子？

```
T1:         T2:
T1.ID       T2.ID   
T1.Value    T2.T1ID 
T1.Date     T2.Value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:12:22.160

> 我需要表 T2 中不存在的表 T1 中的所有值。那个 SQL 会是什么样子？

你的意思是你需要每一个`T1.Value`不匹配的`T2.Value`？

如果是这样，你可以使用这样的东西：

```
SELECT * FROM T1
WHERE Value NOT IN (SELECT Value FROM T2) 
```

然而，MySQL 可能不太擅长找到执行此查询的最佳计划，因此如果您的**测量结果**显示存在性能问题，请尝试以下操作：

```
SELECT DISTINCT T1.*
FROM T1 LEFT JOIN T2 ON T1.Value = T2.Value
WHERE T2.ID IS NULL 
```

请注意 DISTINCT 子句，它确保 T1 行不会被 JOIN“相乘”。

甚至像这样，如果您*只*关心`T1.Value`：

```
SELECT DISTINCT T1.Value
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:59:40.347

这正是 a`LEFT JOIN`的用途。在你的情况下：

```
SELECT T1.* 
FROM T1
LEFT JOIN T2 ON T1.ID=T2.T1ID
WHERE T2.ID IS NULL 
```

推荐阅读：[MySQL JOIN 语法](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:59:48.973

```
select t1.* from t1
left join t2 on t1.id = t2.id
where t2.id is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:39:43.513

如果我理解你是正确的，你需要这样的东西：

```
SELECT *
  FROM t1
 WHERE NOT EXISTS (SELECT 1 FROM t2 WHERE t1.id = t2.t1id) 
```

这将返回 t1 中在 t2 中没有任何匹配记录的所有记录 (t1.id = t2.t1id)。

# sql - 如何识别 sql exec() 正确执行命令

> ID：13047833
> 
> 赞同：1
> 
> 时间：2012-10-24T10:58:33.040
> 
> 标签：sql

如果我运行 sql EXEC() 命令，那么我如何确认该命令已正确执行。因为我没有找到该命令的任何成功/失败返回类型。假设我的命令是：

```
EXEC('INSERT into '+@t1+'('+@c1+') values ('+@v1+')') 
```

或任何其他方式来确认该命令是否正确执行到目标表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:02:12.257

尝试`@@rowcount`在 exec 命令后使用全局变量：

```
select @@rowcount 
```

它显示受最后一个命令影响的行。

如果要捕获异常：

```
BEGIN TRY
   EXEC('fake code') 
   select @@rowcount -- if exec works correctly 
END TRY
BEGIN CATCH
    PRINT N'Your message';
END CATCH; 
```

[MSDN](http://msdn.microsoft.com/pl-pl/library/ms175976.aspx)关于`try-catch`.

# ios - TTTAttributedLabel 行数错误

> ID：13047836
> 
> 赞同：2
> 
> 时间：2012-10-24T10:58:38.413
> 
> 标签：ios

根据上面的标题，有人在使用 TTTAttributedLabel 时遇到过这个问题吗？

目前，如果标签仅显示 1 行，则不会从应用程序中显示。但如果标签大小超过 1 行，它工作正常。

有没有人遇到过这个问题/错误？希望这也可以帮助其他人，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:52:47.170

基于这两个帖子：

*   [https://github.com/mattt/TTTAttributedLabel/issues/15](https://github.com/mattt/TTTAttributedLabel/issues/15)
*   [https://github.com/mattt/TTTAttributedLabel/issues/52](https://github.com/mattt/TTTAttributedLabel/issues/52)

CoreText 如何测量高度以及绘制文本时实际呈现的内容（当它是单行时）似乎存在问题。

似乎正在发生的是文本存在，但绘制文本的窗口仍然太小。所以解决方案是手动将 TTTAttributeLabel 的框架设置为大于 sizeToFit 给出的值。

这包括两个步骤：

1.  检测标签的高度何时为单行
2.  将高度调整为更大的东西

这样的事情会做到这一点：

```
if (labelHeight < kSingleLineLabelHeight) {
   labelHeight = kSingleLineLabelHeight
} 
```

然后相应地设置标签高度。

# blackberry - 黑莓中实际像素和html（css）像素之间的关系是什么？

> ID：13047837
> 
> 赞同：0
> 
> 时间：2012-10-24T10:58:39.157
> 
> 标签：blackberry, browser

我正在实施一个 phonegap 应用程序。这里一切都很好，但是当我谈论设备规格时，例如：

> 1)BlackBerry Bold Touch 9900 屏幕规格如下

```
Body    Dimensions  115 x 66 x 10.5 mm (4.53 x 2.60 x 0.41 in)
Weight              130 g (4.59 oz)
Keyboard QWERTY     Display     Type    TFT capacitive touchscreen, 16M colors
Size               640 x 480 pixels, 2.8 inches (~286 ppi pixel density) 
```

但是当我在 java 脚本中测试以下函数时：

```
function findScreenSize()
{
    alert("width:"+window.innerWidth +"Height:"+ window.innerHeight);   
} 
```

> 它显示尺寸宽度：356 高度：267 (356 x 267)
> 
> 2)BlackBerry Bold Touch 9930 屏幕规格如下

```
Body Dimensions     115 x 66 x 10.5 mm (4.53 x 2.60 x 0.41 in)
Weight          130 g (4.59 oz)
Keyboard QWERTY     - Touch-sensitive controls
Display     Type        TFT capacitive touchscreen, 16M colors
Size                640 x 480 pixels, 2.8 inches (~286 ppi pixel density) 
```

然后我运行相同的 javaScript 函数，得到以下输出：

> 它显示尺寸宽度：417 高度：313 (417 x 313)

为什么它会这样？

任何人都可以知道核心像素和HTML像素之间的关系吗？请给出答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:22:19.517

我得到了解决方案

以前我使用以下元标记（在以下两个元标记中添加“<”开头）

**meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">**

但现在我正在使用

**meta name="viewport" content="width=device-width,target-densitydpi=device-dpi,user-scalable=no,initial-scale=1.0">**

现在它显示相同

# git - Git 命令等于 git push --prune

> ID：13047838
> 
> 赞同：4
> 
> 时间：2012-10-24T10:58:43.813
> 
> 标签：git

我正在寻找 git 版本 1.7.4 中不可用的命令，但我无法升级 git 客户端。

那么，是否有任何命令相当于

```
git push --prune 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:42:37.390

*   远程“`prune`删除 下所有过时的远程跟踪分支`<name>`。这些过时的分支已经从 引用的远程存储库中删除`<name>`，但仍然在“ `remotes/<name>`”中本地可用。
*   `prune`for push “删除没有本地对应的远程分支” 。

这个想法是列出所有远程分支（`git branch -r`），如果没有同名的本地分支，则`git push origin :remoteBranchName`（在远程删除它）

# android - 如何从扩展组件触发 UI Activity 方法

> ID：13047842
> 
> 赞同：1
> 
> 时间：2012-10-24T10:58:53.877
> 
> 标签：android

```
@Override
protected void onAnimationEnd() {
    super.onAnimationEnd();
} 
```

视图的这种被覆盖的方法可以触发，但是我怎样才能从这个方法中触发 UI 方法呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:03:11.897

你想在 UI 线程上运行一些东西吗？您可以在 中调用该`runOnUiThread`方法`Activity`，并通过`Runnable`它传递，这将在 Ui 线程上执行代码。

```
 runOnUiThread(new Runnable() {

    @Override
    public void run() {
       // Do something on the UI Thread
    }
  }); 
```

您必须记住，这`runOnUiThread`会将代码切换到 Ui 线程，因此请确保在切换后不再执行任何操作。您还必须记住您正在切换线程，因此您不能保证`runOnUiThread`方法内的代码将在您调用它之后的任何内容之前运行。

因此，在您的示例中，您将使用：

```
@Override
protected void onAnimationEnd() {
    super.onAnimationEnd();
    runOnUiThread(new Runnable() {

        @Override
        public void run() {
           // Do something on the UI Thread
        }
    });
    // continue with non-UI Thread stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:14:05.870

好吧，这就是我的做法：

```
@Override
protected void onAnimationEnd() {
    super.onAnimationEnd();
    MainActivity.handler.sendEmptyMessage(0);
} 
```

我在 MainActivity 中有一个静态处理程序对象，用于查找传入消息。仅此而已，但我想知道是否有更好的方法？

# entity-framework - 如何在 Entity Framework 5 中包含子对象的子对象

> ID：13047845
> 
> 赞同：167
> 
> 时间：2012-10-24T10:59:14.060
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5, entity-framework-4.1

我正在使用`Entity Framework 5 code first`和`ASP.NET MVC 3`。

我正在努力让子对象的子对象填充。下面是我的课。。

应用类；

```
public class Application
{
     // Partial list of properties

     public virtual ICollection<Child> Children { get; set; }
} 
```

儿童班：

```
public class Child
{
     // Partial list of properties

     public int ChildRelationshipTypeId { get; set; }

     public virtual ChildRelationshipType ChildRelationshipType { get; set; }
} 
```

ChildRelationshipType 类：

```
public class ChildRelationshipType
{
     public int Id { get; set; }

     public string Name { get; set; }
} 
```

存储库中用于返回所有应用程序的部分 GetAll 方法：

```
return DatabaseContext.Applications
     .Include("Children"); 
```

Child 类包含对 ChildRelationshipType 类的引用。要与应用程序的孩子一起工作，我会有这样的事情：

```
foreach (Child child in application.Children)
{
     string childName = child.ChildRelationshipType.Name;
} 
```

我在这里得到一个错误，对象上下文已经关闭。

我如何指定每个子对象必须包含`ChildRelationshipType`我上面所做的对象？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-10-24T11:39:11.937

如果包含该库`System.Data.Entity`，则可以使用该方法的重载，该`Include()`方法采用 lambda 表达式而不是字符串。然后，您可以`Select()`使用 Linq 表达式而不是`string`路径来处理子项。

```
return DatabaseContext.Applications
     .Include(a => a.Children.Select(c => c.ChildRelationshipType)); 
```

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2017-03-28T16:56:05.267

使用 .NET Core 中的 EF Core，您可以使用关键字`ThenInclude`：

```
return DatabaseContext.Applications
 .Include(a => a.Children).ThenInclude(c => c.ChildRelationshipType); 
```

包括儿童收藏中的儿童：

```
return DatabaseContext.Applications
 .Include(a => a.Childrens).ThenInclude(cs => cs.ChildRelationshipType1)
 .Include(a => a.Childrens).ThenInclude(cs => cs.ChildRelationshipType2); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-24T12:42:45.280

我最终做了以下事情并且它有效：

```
return DatabaseContext.Applications
     .Include("Children.ChildRelationshipType"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-08T17:52:19.920

使用通用存储库模式并为此实现通用解决方案的一个很好的例子可能看起来像这样。

```
public IList<TEntity> Get<TParamater>(IList<Expression<Func<TEntity, TParamater>>> includeProperties)

{

    foreach (var include in includeProperties)
     {

        query = query.Include(include);
     }

        return query.ToList();
} 
```

# windows - struct sockaddr, sin_family 不是成员

> ID：13047846
> 
> 赞同：4
> 
> 时间：2012-10-24T10:59:18.287
> 
> 标签：windows, sockets, visual-c++

根据 msdn 的这篇文章（ [http://msdn.microsoft.com/en-us/library/windows/desktop/ms740496(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740496(v=vs.85).aspx)），结构因选择的协议而异！

现在我想使用来自[http://www.intelliproject.net/articles/showArticle/index/check_tcp_udp_port](http://www.intelliproject.net/articles/showArticle/index/check_tcp_udp_port)的代码来检查端口是否打开！

现在我有 struct sockaddr 如下：

```
struct sockaddr {
    ushort  sa_family;
    char    sa_data[14];
}; 
```

但需要这种结构：

```
struct sockaddr {
    short   sin_family;
    u_short sin_port;
    struct  in_addr sin_addr;
    char    sin_zero[8];
}; 
```

哪些改变是必要的？

（Ws2_32.lib 已链接，以下包括

```
#define WIN32_LEAN_AND_MEAN

// sockets
#include "windows.h"
#include <winsock2.h>
#include <ws2tcpip.h> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T11:05:20.313

在套接字 API 中，要使用的地址结构取决于协议。如果您使用的是 IPv4，您需要的结构是`sockaddr_in`.

套接字 API 很久以前就出现了，`void *`当时还不是标准的。指针在所有套接字函数中的使用方式与我们使用指针`sockaddr`的方式完全相同。`void *`这些函数希望您将指针传递给与您使用的协议相关的结构。令人不快的是，每当您将指针传递给您的地址结构时，您都需要进行强制转换，但您无能为力。

**IPv4 示例：**

```
struct sockaddr_in address;

// ...

memset( &address, 0, sizeof(address) );

address.sin_family = AF_INET;
address.sin_port = htons(1100);
address.sin_addr.s_addr = INADDR_ANY;

if ( bind( sock, (struct sockaddr *)&address, sizeof(address) ) < 0 )
{
   //....
} 
```

# ibm-mq - 长时间空闲后放置消息不起作用

> ID：13047848
> 
> 赞同：2
> 
> 时间：2012-10-24T10:59:28.617
> 
> 标签：ibm-mq

我使用 MQ v7 库（无 JMS）编写了一个简单的 Java 客户端。我尝试使用以下模式将消息放入队列：

```
Put a message
Wait for x minutes
Put a message again 
```

它可以工作，但如果空闲时间太长（5-7 分钟之间），我会收到以下错误：

```
MQJE001: An MQException occurred: Completion Code 2, Reason 2195
MQJE007: IO error reading message data
Error occured during API call - reason code0
MQJE001: Completion Code 2, Reason 2009
MQJE001: An MQException occurred: Completion Code 2, Reason 2009
MQJE003: IO error transmitting message buffer
MQJE001: Completion Code 2, Reason 2009
MQJE001: An MQException occurred: Completion Code 2, Reason 2009
MQJE003: IO error transmitting message buffer
MQJE001: Completion Code 2, Reason 2009
MQJE001: An MQException occurred: Completion Code 2, Reason 2009
MQJE003: IO error transmitting message buffer
MQJE001: Completion Code 2, Reason 2009
MQJE001: An MQException occurred: Completion Code 2, Reason 2009
MQJE003: IO error transmitting message buffer
MQJE001: An MQException occurred: Completion Code 2, Reason 2009
MQJE003: IO error transmitting message buffer
MQJE001: Completion Code 2, Reason 2009
An MQSeries error occurred : Completion code 2 Reason code 2009
com.ibm.mq.MQException: MQJE001: Completion Code 2, Reason 2009
        at com.ibm.mq.MQQueue.put(MQQueue.java:1511) 
```

在阅读了有关该主题的几个线程后，此错误通常是创建 FDC 转储，但我在系统和队列管理器日志中没有任何内容。该通道是 SVRCONN 通道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:59:25.837

好的，这里有一些有趣的可能性，但没有足够的描述来缩小范围，所以我将采用霰弹枪的方法，你可以从那里开始。

长时间等待的错误通常意味着套接字已超时或被防火墙或网络策略切断。

*   应用程序是否在等待时指定 Fail If Quiescing？
*   哪个版本的客户端和 QMgr？一般来说，更高版本的客户端更好，即使是旧的 QMgrs。最好的情况是最近的客户端*和*最近的 QMgr，在这种情况下，WMQ 本机协议心跳比 TCP 心跳更可靠。您提到了 V7，但可能是 V7.0.0、V7.0.1、V7.1 或 V7.5。

在这种情况下，它是*客户端*获取 2195，所以我希望错误会显示在客户端。如果 2195 发生在客户端并且在套接字消失后，QMgr 将不会剪切 FDC 文件，因为此时它无法知道错误。客户端诊断可以更清楚地了解正在发生的事情。

*   您是否从 IBM 的媒体中获取了 jar 文件或安装了客户端？如果您拥有完整的客户端，则有许多用于跟踪和本地诊断的选项。否则，您只有 Java 跟踪工具。
*   客户端的本地错误日志文件或 FDC 显示什么？

在 QMgr 方面，2009 通常会导致一条消息说通道已断开连接，但没有 FDC。但是，QMgr 可能不知道通道已断开连接，直到 TCP 使套接字超时，并且在大多数系统上该间隔默认为 2 小时。因此，日志中的错误可能在连接丢失*后*最多两个小时内不会被写入。

*   可以调整频道以比 2 小时更快地做出响应。准确的调优取决于前面讨论的 QMgr 和客户端版本。
*   发生这种情况时，是否有任何孤立的通道实例仍在运行？当您执行 a 时`DIS CHS(svrconn name)`，是否有任何条目未被活动程序考虑在内？如果您无法分辨，请将失败的程序移至专用的 SVRCONN 频道。
*   主机服务器的系统范围的 TCP 超时设置为多少？

如前所述，您使用的版本在调整和诊断方面有很大的不同。如果这是新开发，我建议的第一件事是确保您使用的是[V7.5 客户端](http://ibm.co/SupptPacMQC75)。它适用于任何 QMgr，但调整和诊断比早期版本更好。如果 QMgr 的版本不支持它们，您将不会获得诸如对话共享或预读之类的东西，但您确实会从所有纯粹的客户端改进中受益。

# javascript - 使用 javascript 时下拉列表事件未触发

> ID：13047849
> 
> 赞同：0
> 
> 时间：2012-10-24T10:59:29.457
> 
> 标签：javascript, asp.net

我在触发下拉列表事件时遇到问题。

我有以下下拉列表：

```
asp:dropdownlist id="ddlhello" Runat="server" AutoPostBack="True"  onchange="javascript:return ChangeHeader();" 
```

我还在后面的代码中添加了一个事件，即 selectedindex 更改事件。

现在当我执行页面时出现问题：它执行 javascript 但服务器端代码没有触发。如果我删除此行`onchange="javascript:return ChangeHeader();"`，则服务器端代码将触发。

当我检查源页面时，它显示了两个`onchange`相关的事件：一个用于 javascript，另一个用于服务器端。

我认为它正在选择客户端代码而忽略了服务器端。

我不太确定，所以我想知道行为原因。

什么是出路。

我希望执行服务器和客户端代码。我已经寻找解决方案，但我没有找到任何正确的原因。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:01:20.203

您不能将服务器端事件与下拉列表绑定，将其与 onselectedindexchanged 绑定

> onselectedindexchanged="DropDownList1_SelectedIndexChanged"

```
<asp:dropdownlist id="ddlhello" Runat="server" AutoPostBack="True"   onselectedindexchanged="DropDownList1_SelectedIndexChanged" onchange="javascript:return ChangeHeader();" </asp:dropdownlist> 
```

从客户端返回 false 会停止回发。

```
function ChangeHeader()
{
 //return false; // will stop the postback
  return true; //will cause postback
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:06:40.420

使用如下代替 onchange="return ChangeHeader();" onchange="ChangeHeader();"

我希望这可以帮助你。

# python - 在 gtk 的 GtkDialog 中按下转义键时如何禁用销毁？

> ID：13047851
> 
> 赞同：3
> 
> 时间：2012-10-24T10:59:33.690
> 
> 标签：python, gtk

我制作了一个`GtkDialog`对象，但我想禁用或处理转义按下事件，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:51:17.897

连接到[delete-event](http://developer.gnome.org/gtk/stable/GtkWidget.html#GtkWidget-delete-event)，并在回调中检查事件是否被 ESC 按键触发。返回 TRUE 停止事件传播（这是您要忽略 ESC 键按下的内容），返回 FALSE 将传播事件并关闭对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-02T11:34:08.913

如果您：

[![在此处输入图像描述](../Images/dacf7c2938444169b6eeb693ccec3189.png)](https://i.stack.imgur.com/BsRfm.png)

将响应信号绑定到事件：

```
 def on_dialogBigLabel_response(self, widget, response_id):
        print('on_dialogBigLabel_response Widget: %s | response_id: %s' % (widget, response_id))

        if response_id == Gtk.ResponseType.OK:
            print('OK')
            self.dialogBigLabel.hide()
        else:
            print('Response: %i' % response_id) 
```

现在逃逸响应是-4，这里我们没有隐藏或破坏对话框。

# visual-studio - 查找 Visual Studio 2012 的实时调试工具

> ID：13047862
> 
> 赞同：0
> 
> 时间：2012-10-24T11:00:01.333
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-debugging

我看过一个**视频，展示了****vs2012**的实时调试工具。它允许您同时*编码*和*调试*！在视频中，他们实现了“**快速排序**”，通过编辑“ *if 语句的条件*”和“*数组的索引*”。 **将鼠标悬停在一个变量上，该值将立即计算**。然后，程序员可以发现算法中的条件是更小还是更大。

不幸的是，我忘记了它的链接。它类似于“ **Light Table** ”，它使您能够通过将鼠标悬停在变量名称上来查看代码的结果。

这真的很酷。它在哪里 ？任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:03:20.190

你在想[这样](http://ermau.com/making-instant-csharp-viable-visualization/)或[这样](http://www.chris-granger.com/2012/04/12/light-table---a-new-ide-concept/)的事情吗？
他们都受到 Bret Victor 的精彩演讲[Inventing on Principle的启发](https://vimeo.com/36579366)

# javascript - js使用json渲染很多html

> ID：13047864
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:00:05.607
> 
> 标签：javascript, templates

我调用我的 api 并返回 json 对象，然后它会生成很多充满内容的 div。但我一直使用连接来插入我的对象属性。有更好的方法吗？

```
$.each(JSON, function(key, value) { 
  var content = display_mention(value);
  $("#mentions_container").append(content);
    });

    function display_mention(mention) {
       //this str will be much more complex and use lots of concatenation
   var str = "<div data-id='" + mention.id +"'> " + mention.texto + "</div></br>";
   return str;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:04:37.763

有一种更好的方法，它被称为客户端模板。

查看 mustache.js [https://github.com/janl/mustache.js](https://github.com/janl/mustache.js) 或 handlebars.js [http://handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:05:13.933

我喜欢用这个人作为微模板引擎：

```
String.prototype.tpl = function(o) {
    return this.replace(/{([^{}]*)}/g,
        function(a, b) {
            var r = o[b];
            if (!o[b]) return "";
            return typeof r === 'string' || typeof r === 'number' ? r : a;
        }
    );
};

var data = {
  title: 'C pocket reference',
  type: 'PDF Document',
  tag: 'programming',
  created_at: '5.31.2010'
}

var html = '<tr><td>{title2}</td><td>{type}</td><td><a href="tags/{tag}">{tag}</a></td><td>{created_at}</td></tr>'.tpl(data); 
```

这很简单，但它会让你的代码更干净。

但是您应该明确地查看更严肃的解决方案，例如：[jQuery 模板](http://api.jquery.com/category/plugins/templates/)（您使用 jQuery）或从这里选择其他一些[http://microjs.com/#templating](http://microjs.com/#templating)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:13:19.407

如果您不需要更大的引擎，您可以编写一个简单的模板函数。

```
function template(str, context) {
    return str.replace(/\{([a-z]+)\}/g, function(match, key) {
        return context[key];
    });
} 
```

您只需使用这样的对象上下文调用它：

```
template("<div data-id='{id}'> {texto}</div></br>", mention); 
```

# css - 更改我网页的整个颜色架构

> ID：13047866
> 
> 赞同：0
> 
> 时间：2012-10-24T11:00:09.610
> 
> 标签：css, colors

背景：我正在为我的 web 应用程序做一个重要的新功能版本，我认为通过更新用户界面来“庆祝”会很好。由于我没有专业重新设计的预算，我想我可以对 style.css 表进行一些细微的更改。

理想情况下，会有一个程序可以导入我的 style.css 表（颜色是围绕 Windows XP 设计的）并以 Windows 7 的样式导出新的 style.css 表。虽然我见过允许您导入 css 表的程序并自己玩每种颜色然后导出[我既没有时间也没有时间做的事情]，我还没有看到任何东西会自动改变你的整个css表，同时保持你的颜色之间的某种相关性。

我编写了以下 VBA 代码 [我知道它可以改进很多，但我只是将它放在一起进行实验] 这将改变 style.css 工作表的所有颜色（如果它被粘贴到活动 Excel 工作表的 A 列中） . 假设 CSS 颜色以十六进制表示，例如 #123456（其中 12 是红色分量，34 是绿色分量，56 代表蓝色分量）当前的代码使颜色的红色分量更大，和蓝色成分较少。[查看函数makeWarmer]

```
Sub changeCSSColors()
    For j = 1 To 1390 'number of rows
        a = Cells(j, 1)
        b = InStr(a, "#")
        If b > 0 Then
            aHex = UCase(Mid(a, b + 1, 6))
            If isHexS(aHex) Then
                a = Left(a, b) + makeWarmer(aHex) + Mid(a, b + 7)
                Cells(j, 1) = a
            End If
        End If
    Next j

End Sub

Function isHex(aChar)
    If InStr("ABCDEFabcdef01234567890", aChar) > 0 Then isHex = True Else isHex = False
End Function

Function isHexS(aString)
    For j = 1 To Len(aString)
        b = Mid(aString, j, 1)
        If Not isHex(b) Then isHexS = False: Exit Function
    Next j
    isHexS = True
End Function

Function makeWarmer(aString)
    b = addOneToChar(Mid(aString, 1, 1))
    c = subOneToChar(Mid(aString, 5, 1))
    makeWarmer = addOneToChar(Mid(aString, 1, 1)) + Mid(aString, 2, 1) + addOneToChar(Mid(aString, 3, 1)) + Mid(aString, 4, 1) + addOneToChar(Mid(aString, 5, 1)) + Mid(aString, 6, 1)
End Function

Function swapBlueGreen(aString)
  swapBlueGreen = Mid(aString, 3, 2) + Mid(aString, 1, 2) + Mid(aString, 5, 2)
End Function

Function addOneToChar(aChar)
    If (aChar >= "0" And aChar <= "8") Or (aChar >= "A" And aChar <= "E") Then
        aChar = Chr(Asc(aChar) + 1)
    ElseIf aChar = "9" Then
        aChar = "A"
    ElseIf aChar = "F" Then
        aChar = "F"
    End If
    addOneToChar = aChar
End Function

Function subOneToChar(aChar)
    If (aChar >= "1" And aChar <= "9") Or (aChar >= "B" And aChar <= "F") Then
        aChar = Chr(Asc(aChar) - 1)
    ElseIf aChar = "A" Then
        aChar = "9"
    ElseIf aChar = "0" Then
        aChar = "0"
    End If
    subOneToChar = aChar
End Function 
```

我还尝试使用函数 SwapBlueGreen 更改蓝色和绿色组件。但是，这两种功能我都没有得到令人满意的视觉效果。[Web 应用程序看起来很奇怪]

有没有人有其他关于函数的想法，而不是我可以使用的 makeWarmer 或 SwapBlueGreen，也许是某种掩蔽。或者，也许有一些软件可以满足我的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:46:42.997

您可以将旧文档转换为 SASS 并使用[强大的 SASS 颜色函数](http://nex-3.com/posts/89-powerful-color-manipulation-with-sass)进行操作。

这可能比自己编写程序更容易:)

# entity-framework - 实体框架代码优先：查询多对多导航属性而不加载到内存中

> ID：13047868
> 
> 赞同：3
> 
> 时间：2012-10-24T11:00:15.193
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3

我想知道在不首先将所有关系对象加载到内存中的情况下查询多对多关系的最佳方法。

例如，Category 和 Article 具有多对多关系。这意味着我的 Category 类有一个（延迟加载的）导航属性，如下所示：

```
class Category
{
     public long Id {get; set;}
     public ICollection<Articles> Articles {get; set;}
} 
```

如果我只想选择可见的文章，我可以像这样查询导航属性：

```
category.Articles.Where(a => a.IsVisible) 
```

但是据我所知，这会在执行 IsVisible 检查之前将所有相关文章加载到内存中。

是否可以在不将它们加载到内存的情况下查询相关文章，即作用于 IQueryable 而不是 ICollection？如果这是一对多关系，那么我可以直接查询 Article DbSet 以实现我所追求的目标，但是多对多关系存储在 sql 的链接表中，这意味着我无法使用 DbSet 来查询它。我唯一的选择是手动编写将查询链接表的原始 sql 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:43:10.157

这是一种方法：

```
var visibleArticlesQuery = context.Category.Where(c => c.Id == category.Id)
                                           .SelectMany(c => c.Articles)
                                           .Where(a => a.IsVisible); 
```

例如，也可以使用 查询 Article DbSet `Contains`。

# xsd - xsd 验证以允许意外元素

> ID：13047871
> 
> 赞同：2
> 
> 时间：2012-10-24T11:00:23.017
> 
> 标签：xsd

我需要你的帮助:'(我在 XSD 验证方面遇到问题，它返回带有意外元素的错误。但我想允许并跳过任何意外元素。我尝试使用`<xs:any>`但它不允许在下面`<xs:all>`并且`<xs:element ref`不起作用，我有不知道如何解决它：

```
<xs:complexType>
        <xs:all>
            <xs:any processContents="lax" maxOccurs="unbounded" minOccurs="0" />
            <xs:element name="id" type="xs:integer" />
            <xs:element name="lastname" type="xs:string" />
            <xs:element name="firstname" type="xs:string" />
            <xs:element ref="adress" />
            <xs:element ref="phone" />
        </xs:all> 
```

例如，当我收到意外元素“性别”时，它会返回错误。你知道哪个标签可以提供帮助吗？或任何解决方案。提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T20:52:35.250

更改`<xs:all>`为[http://www.w3schools.com/schema/schema_complex_any.asp](http://www.w3schools.com/schema/schema_complex_any.asp)`<xs:sequence>`中指定的它将起作用。

```
<xs:element name="person">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="firstname" type="xs:string"/>
      <xs:element name="lastname" type="xs:string"/>
      <xs:any minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

# ruby-on-rails - 重置密码链接要求用户登录

> ID：13047877
> 
> 赞同：0
> 
> 时间：2012-10-24T11:00:46.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用设计进行身份验证。当忘记密码被调用时，它会询问邮件地址并发送一个指向邮件的链接，但是当我点击邮件中的链接时，我得到：

> > 您需要先登录或注册，然后才能继续。

如何更改此设置，以便在单击链接时要求输入新密码？

**更新：**

我已将路线更改如下：

```
devise_for :users do
  resources :users, :only => [:index, :new, :create, :edit, :update, :destroy] 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:05:31.387

看来您更改了管理密码的控制器（`Devise::PasswordsController`默认情况下）并添加`before_filter :authenticate_user!`了，对吗？然后你需要移除过滤器。

如果没有，您能描述一下您所做的定制吗？

**更新：**这是因为您的资源和设计的路线冲突。[在设计 wiki 上](https://github.com/plataformatec/devise/wiki/How-To%3a-Manage-users-through-a-CRUD-interface)，您可以找到解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:00:56.573

添加这一行：

```
skip_before_filter :authenticate_user, :only => ['password_change_action'] 
```

到`password_change`动作的控制器。

# routes - Play Framework 路由函数类型

> ID：13047879
> 
> 赞同：1
> 
> 时间：2012-10-24T11:00:50.070
> 
> 标签：routes, playframework-2.0

我想知道我们是否可以像传递 Int 或 Long 或 String 等那样在函数中传递 Map 或 List？如果是，那么如果我们有地图怎么办？

我正在使用播放 2.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:59:43.003

不在 2.0.4 中，除非您定义一些隐式查询绑定器。Play 2.1+ 为通用列表（即`List[T]`）定义了查询绑定器。您可以从存储库中复制实现并将其粘贴到您的项目中（就像我所做的那样 - 请参阅此[问题和答案](https://stackoverflow.com/questions/12997782/how-to-pass-a-variable-being-an-array-in-javascript-to-a-controller-accepting-li)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:41:48.760

您的问题有点不清楚，但我猜您指的是 Play`/conf/routes`调度机制，其中路由语句如下：

```
GET /hello/:id      controllers.Application.hello(id: Int) 
```

将被编译以便`id`解析为`Int`（或其他），并传递给`hello`Action。猜测更多，您可能想要解析查询字符串（例如`"a=1&b=2"`to `Map("a" -> "1", "b" -> "2"`），并将其作为`Map[String, String]`参数传递给 Action。

我不认为这是可能的。您可以编写引用查询字符串的路由条目，并且可以使用正则表达式，但这不会让您到达那里。要访问 GET 请求的查询参数，请将`request`参数添加到 Action，然后查看`request.queryString`

# node.js - 我需要远程调用 mongoexport 并从 node.js 获取结果

> ID：13047880
> 
> 赞同：9
> 
> 时间：2012-10-24T11:01:02.220
> 
> 标签：node.js, mongodb, csv, remote-server

我不知道该怎么做，我需要将 mongodb 集合导出为 .csv。在节点中使用 spawn.child_process 调用 mongoexport 将完成此操作，但我的 mongodb 服务器和节点服务器当前位于不同的机器上。

如何从我的节点服务器远程调用我的 mongo 服务器上的 mongoexport，然后将 .csv 获取到节点服务器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T11:30:54.413

首先，确保 MongoDB 端口已打开，并且您可以从服务器连接。然后，使用

```
mongoexport --username user --password pass --host host --db database --collection coll --type=csv --fields=displayName,emailAddress --query='{"status": "verified"}' -o users-YEAR-DAY-MONTH.csv 
```

如果服务器位于公共网络中，请确保使用身份验证。

[https://docs.mongodb.com/manual/security/](https://docs.mongodb.com/manual/security/)

或者，运行 ssh 命令可能更简单，`mongoexport`在 MongoDb 服务器上运行，然后`sftp`返回文件（可能先压缩它）。

[有关mongoexport](https://docs.mongodb.com/manual/reference/program/mongoexport/)的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-28T19:31:30.807

我使用了@GianfrancoP 的答案，但不推荐使用语法。您现在需要包含要导出的字段名。这是更新的语法：

```
mongoexport --username user --password pass --host host --db database --collection coll --type=csv --fields fieldname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:26:36.093

GianPaJ 给出的答案是我正在使用的解决方案，但缺点是它仅将导出的数据输出到远程主机，而不是您的客户端。

一种解决方法是对导出的文件使用 SCP 或 SFTP。如果我弄清楚如何使用 mongoexport 选项实际传输该文件，我将更新这篇文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T11:09:13.107

我创建了这个命令来跳过 stfp 步骤来导出我的数据库。

```
ssh user@remote_host_ip  "mongoexport --host localhost --db dbname --username username --password pass --authenticationDatabase admin --collection collectionname --fields field1,field2 --type=csv" >> export.csv 
```

如果您在 mongodb 上应用了身份验证，则可以 ssh 远程并提供 mongodb 用户名、密码和身份验证数据库，否则跳过它。这将在本地系统上创建 export.csv。

# django - 管理可安装应用程序的 Django 测试隔离

> ID：13047882
> 
> 赞同：3
> 
> 时间：2012-10-24T11:01:12.207
> 
> 标签：django, django-testing

我维护一个可安装的 Django 应用程序，其中包括一个常规测试套件。

当项目作者为他们的站点运行时，自然而然`manage.py test`地，他们自己的应用程序以及任何第三方安装的应用程序（例如我的应用程序）的测试都将运行。

我看到的问题是，在几种不同的情况下，用户的特定`settings.py`信息将包含导致我的应用程序测试失败的配置。

几个例子：

*   一些测试需要检查返回的错误信息。这些错误消息使用国际化框架，因此如果站点语言不是英语，那么这些测试将失败。
*   一些测试需要检查特定的模板输出。如果站点正在使用自定义模板（应用程序支持），那么测试将最终使用他们的自定义模板而不是默认模板，并且测试将再次失败。

我想尝试找出一种明智的方法来隔离我的测试运行的环境，以避免这种情况。

我目前的计划是让我所有的 TestCase 类扩展一个基本的 TestCase，它[会覆盖 settings](https://docs.djangoproject.com/en/dev/topics/testing/#overriding-settings)以及我可能需要处理的任何其他环境设置。

我的问题是：

*   这是应用程序级测试环境隔离的最佳方法吗？有没有我错过的替代方案？
*   看起来我一次只能覆盖一个设置，理想情况下我可能想要一个完全干净的配置。有没有办法做到这一点，如果没有，我需要确保设置哪些主要设置才能进行基本的干净设置？
*   我相信我的说法是正确的，`INSTALLED_APPS`由于实现细节和全局状态问题，覆盖某些设置可能实际上不会以预期的方式影响环境。它是否正确？我需要注意哪些设置，哪些全局缓存的环境信息可能不会按预期受到影响？
*   除了设置之外，我还需要确保什么其他环境状态是干净的？

更一般地说，我也对任何关于这对于其他第三方可安装应用程序有多大问题的上下文感兴趣，或者是否有任何计划进一步解决核心问题。我在 IRC 上看到过关于类似问题的对话，例如。一些 Django 的 contrib 应用程序在意外的设置配置下运行。我似乎还记得几次使用第三方应用程序和 django contrib 应用程序都遇到过类似的情况，所以感觉我并不是唯一一个面临此类问题的人，但目前尚不清楚是否就这是否达成共识需要更多工作或现状是否足够好的事情。

注意：

*   这些是集成级别的测试，所以我想在全局级别解决这些环境问题。
*   我需要支持 Django 1.3，但可以放入一些兼容性包装器，只要我不重新实现大量 Django 代码。
*   显然，由于这是一个可安装的应用程序，我不能只指定我自己`DJANGO_SETTINGS_MODULE`的用于测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:16:59.723

我看到 Jezdez 使用的一种很好的隔离方法是调用`my_app.tests`一个包含所有测试代码（[示例](https://github.com/jezdez/django_compressor/tree/develop/compressor/tests)）的子模块。这意味着当有人安装您的应用程序时，默认情况下不会运行这些测试，因此他们不会得到随机幻像测试失败，但如果他们想检查他们是否没有无意中破坏某些东西，那么它就像添加`myapp.tests`到`INSTALLED_APPS`获取一样简单它运行。

在测试中，您可以尽最大努力确保使用正确的环境存在`override_settings`（如果这不在 1.4 中，则没有那么多代码）。我个人的感觉是，对于集成类型测试，它们是否失败可能并不重要。如果您愿意，您可以包含一个干净的设置文件 ( [`compressor.test_settings`](https://github.com/jezdez/django_compressor/blob/develop/compressor/test_settings.py))，这对于主要项目可能更合适。

另一种方法是您将测试分开一点 - 有两个独立的测试主体，用于`contrib.admin`，位于`django.contrib.admin.tests`和位于`tests.regression_tests.contrib.admin`（或类似路径）的测试。检查公共 api 和核心功能的那些（应该）位于第一个，而任何可能被其他人的（合理的）配置破坏的东西都位于第二个。

恕我直言，整个运行的外部应用程序测试完全被破坏了。它当然不应该默认发生（并且有关于这种情况的讨论），它甚至不应该是一件事 - 如果有人的外部应用程序测试套件被我的猴子补丁（或其他什么）破坏了，我实际上并不关心 -而且我绝对不希望它破坏我网站的构建。也就是说，上述方法允许那些不同意的人相当容易地运行它们。Jezdez 可能拥有与其他任何人一样多的主要可插拔应用程序，即使他的方法存在一些微妙的问题，至少也存在行为一致性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:02:31.917

由于您正在发布一个可重用的第三方应用程序，我看不出使用该应用程序的开发人员应该更改代码的任何理由。如果代码没有改变，开发人员不需要运行你的测试。

最好的解决方案，IMO，是让测试位于可安装包之外。当您安装 Django 并运行`manage.py tests`时，您不会运行 Django 测试套件，因为您相信您安装的 Django 版本是稳定的。对于使用您的第三方应用程序的开发人员来说，这应该是相同的。

如果有特定设置要确保您的库正常工作，只需编写使用这些设置值的测试用例。

这是一个可重用的 django 应用程序示例，它的测试位于已安装的包之外：

[https://github.com/Yipit/django-roughage/tree/master](https://github.com/Yipit/django-roughage/tree/master)

这是一种开发python模块的流行方式，如下所示：

[https://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)

[https://github.com/getsentry/sentry](https://github.com/getsentry/sentry)

# asp.net - 不同国家的 ASP.NET MVC 路由

> ID：13047886
> 
> 赞同：0
> 
> 时间：2012-10-24T11:01:23.053
> 
> 标签：asp.net, asp.net-mvc-3, routing, asp.net-mvc-routing

我有一个服务于几个不同国家的网站。当用户访问该站点时，我将使用 IP 定位器工具来确定他们来自哪个国家/地区。所有国家/地区都会说英语，因此呈现的视图将是相同的，但是定价会有所不同以及其他一些事情。

我想要的路由是这样的：

*   mydomain.com/UK/Pricing
*   mydomain.com/Australia/Pricing
*   mydomain.com/UK/Features/SomeFeature
*   mydomain.com/Australia/Features/SomeFeature

你明白了……

谁能提供我在 global.asax 中需要的路由？

我尝试了以下方法，但我不想为每个国家/地区创建视图：

```
routes.MapRoute(
"Default", 
"{country}/{controller}/{action}/{id}", 
 new { country = "UK", controller = "Home", action = "Index", id = "" }
 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:23:27.270

您的路线应该足够好，您只需在 Action 方法中添加一个参数即可检索国家/地区值：

```
public ActionResult Index(int id, string country) {
  // your code here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:05:19.580

我是您也可以使用的 WebForms

```
string country = Page.RouteData.Values["country"].ToString(); 
```

不确定这是否也适用于 MVC，但我会这么认为。

# jquery - jquery mouseenter，悬停事件未触发

> ID：13047888
> 
> 赞同：0
> 
> 时间：2012-10-24T11:01:25.877
> 
> 标签：jquery

目前正在尝试为 Input 标签绑定 mouseenter 或 hover 事件，我的代码有点像下面

```
$('#details_Owner').hover(HoverIn, HoverOut);
$('#details_Owner').mouseenter(HoverIn);

$(e.srcElement)
    .parent('.column')
    .children("div")
    .each(function(item) { $(this).remove()});

d = $('<div />')
    .addClass("cstooltip")
    .text($(e.srcElement).val())
    .hide()

$(e.srcElement).parent('.column').append(d);
$(e.srcElement)
    .parent('.column')
    .children("div")
    .show() 
```

导致问题的事情是当输入标签被禁用时，事件不会触发，这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:05:18.307

这是一个相关主题：[禁用输入上的事件](https://stackoverflow.com/questions/3100319/event-on-a-disabled-input)

总之 ：

> 禁用的元素不会触发鼠标事件。大多数浏览器会将源自禁用元素的事件沿 DOM 树向上传播，因此事件处理程序可以放置在容器元素上。但是，Firefox 没有表现出这种行为，当您单击禁用的元素时，它什么也不做。

但是，如果需要，您会在上面提到的主题上找到解决方法

# r - pdf 设备和字体系列“Arial”/或：更改 PDF 中的字体名称（不是字体）

> ID：13047889
> 
> 赞同：6
> 
> 时间：2012-10-24T11:01:32.010
> 
> 标签：r, pdf, fonts, typeface

我在 R 中的字体和 PDF 输出有问题。在这台 Windows 机器上没有*Helvetica*并且设备使用的字体似乎是*Arial*，如下所示。一个简单的问题是，使用了 Arial（如我所愿），但编辑了它说使用*Helvetica*的 PDF 文件。如何让 R 将正确的名称写入 PDF 文件。`pdf(...,family="Arial")`不起作用，因为这个系列是未知的（grDevices 版本 2.15.1）。

或者我可以在 PDF 中替换这个字体，然后用我想要的字体创建一个文件吗？

R-PDF-输出 ![R 输出：Arial 字体](../Images/c06b2799e43ae17ec6a4519e9e54fa20.png)

与本文的比较：[Arial 与 Helvetica](http://ilovetypography.com/2007/10/06/arial-versus-helvetica/) ![在此处输入图像描述](../Images/3e74d3d7e4b1a3787767b1cf905ce7e7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-24T16:10:29.537

从 R-3.1.0 开始，这要简单得多。现在，要获得 Arial 字体，只需设置`family="ArialMT"`：

```
pdf("Arial.pdf", height=0.3, width=1.45, family="ArialMT")
grid::grid.text("CGJQRSafrst1237")
dev.off() 
```

引用 2014 年 4 月的[R-3.1.0 发行说明](https://stat.ethz.ch/pipermail/r-announce/2014/000572.html)：

> pdf() 和 postscript() 设备有一个新系列“ArialMT”。这只会在可以访问 Monotype TrueType 字体（期刊有时要求）的查看器上正确呈现。

为确保无论在何处查看 pdf 都能正确呈现，您还需要在文档中嵌入所需的 Arial 字体。这是一种简单的方法：

```
library(extrafont)
loadfonts()  ## Really only needed the first time you use extrafont
## Modify this to point to the corresponding Ghostscript executable on your own machine
Sys.setenv(R_GSCMD = "C:/Program Files/gs/gs9.07/bin/gswin64c.exe")
embed_fonts("Arial.pdf") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:50:15.713

正如评论之一所述，不需要嵌入 base 14 字体，Helvetica 是其中一种字体。PDF 消费者应该为此类字体提供替代品，而 Arial（或 Arial MT）通常用于Helvetica 的地方。

我对 R 不熟悉，但[之后您似乎可以嵌入字体](http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/embedFonts.html)

编辑：[这个问题的答案](https://stackoverflow.com/questions/2670809/how-to-get-ghostscript-to-use-embedded-fonts-in-pdf) 解释了如何在之后使用 ghostscript 嵌入字体，只要确保 GS 将 Helvetica（或 Arial）映射到您想要的字体版本即可。感谢 Gavin Simpson 让我搜索那个 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:18:05.283

您需要设置一个新的字体系列以用于`pdf()`. 这要求您拥有`*.afm`要使用的字体的 Adob​​e Font Metric 文件（文件）。如果您还没有 Arial文件，您可以将`.tty`文件转换为这些文件`.afm`或在互联网上查找Arial 文件。`.afm`

```
Arial <- Type1Font(family = "Arial",
                   metrics = c("ArialMT.afm",
                               "arial-BoldMT.afm", 
                               "Arial-ItalicMT.afm",
                               "Arial-BoldItalicMT.afm")) 
```

其中字符向量`metrics`包含相关`.afm`文件的路径，文件应按以下顺序指定：

1.  素颜
2.  黑体
3.  斜体脸
4.  粗斜体脸

您使用该`pdfFonts()`函数将映射添加到这些新字体

```
pdfFonts(Arial = Arial) 
```

`Arial`之前产生的对象在哪里`Type1Font()`。

最后一步是使用`family`参数，`pdf()`其中引用由 定义的现有系列之一`pdfFonts()`：

```
pdf("testArial.pdf", family = "Arial")
plot(1:10, 1:10)
dev.off() 
```

我没有尝试过这个，因为我的系统上没有 Arial，也没有太多`.afm`文件，但我从几个来源拼凑起来：

1.  Paul Murrell 和 Brian Ripley (2006) PostScript 和 PDF 图形中的非标准字体。*R 新闻*，**6（2）**：41-47。 [PDF格式](http://cran.r-project.org/doc/Rnews/Rnews_2006-2.pdf)
2.  今年早些时候[，David L. Carlson 在 R 邮件列表上发表了](https://stat.ethz.ch/pipermail/r-help/2012-February/303063.html)一篇文章。

取决于您的系统设置方式的另一种选择是基于 Cairo 的 PDF 设备，因为它将使用您系统的功能来识别和加载仅基于字体名称的字体。有关详细信息，请参见`?cairo_pdf`然后的**Cairo 字体**部分`?X11`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:28:18.697

R 默认情况下不嵌入字体。它只是指定要使用 Helvetica。你可能最好嵌入字体。有两种方法可以做到这一点，要么使用`cairo_pdf`设备，要么使用[`extrafont`](http://cran.r-project.org/web/packages/extrafont/index.html)通常设备的包装`pdf`。`cairo_pdf`简单得多，但输出与`pdf`.

# c# - 如何在 ASP.NET C# 应用程序中使用 SSL

> ID：13047893
> 
> 赞同：-4
> 
> 时间：2012-10-24T11:01:59.647
> 
> 标签：c#, asp.net, ssl, https

我是 Asp.net 应用程序中的安全新手。我想在我开发的 asp.net 本地应用程序中启用 SSL。我需要逐步实施 ssl 到我的 asp.net 项目。我在网上找到的大多数文章都只解释了证书的安装。作为一个新手，我要做的第一件事是将我的 http 转换为 https。我需要更改 web.config 中的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:39:51.517

首先，您必须购买 SSL 证书。那不是免费的。

然后，您需要在本地 IIS 上进行托管。如果您在 Windows 上运行，您可以在程序和功能中激活它。然后您可以在那里安装 SSL 证书（您可以在 IIS 管理器中找到一个图标）。

我猜你在 Visual Studio 中运行网站，而在 IIS 上托管网站是完全不同的。如果您没有这样做的经验，我会建议您从那开始，或者看看您是否可以避免使用 SSL 证书。

# python - 在 Python 中复制数组/列表的有效方法

> ID：13047895
> 
> 赞同：9
> 
> 时间：2012-10-24T11:02:01.687
> 
> 标签：python, ruby, arrays

注意：我是一名 Ruby 开发人员，试图在 Python 中找到自己的方式。

当我想弄清楚为什么某些脚本使用`mylist[:]`而不是`list(mylist)`复制列表时，我对各种复制方法进行了快速基准测试`range(10)`（参见下面的代码）。

**编辑：**我更新了测试以使用 Python `timeit`，如下所示。这使得无法直接将其与 Ruby 进行比较，因为*timeit*不考虑循环，而 Ruby`Benchmark`则考虑，因此 Ruby 代码仅供*参考*。

**Python 2.7.2**

```
Array duplicating. Tests run 50000000 times
list(a)     18.7599430084
copy(a)     59.1787488461
a[:]         9.58828091621
a[0:len(a)] 14.9832749367 
```

作为参考，我也在 Ruby 中编写了相同的脚本：

**红宝石 1.9.2p0**

```
Array duplicating. Tests 50000000 times
                      user     system      total        real
Array.new(a)     14.590000   0.030000  14.620000 ( 14.693033)
Array[*a]        18.840000   0.060000  18.900000 ( 19.156352)
a.take(a.size)    8.780000   0.020000   8.800000 (  8.805700)
a.clone          16.310000   0.040000  16.350000 ( 16.384711)
a[0,a.size]       8.950000   0.020000   8.970000 (  8.990514) 
```

**问题 1：**有`mylist[:]`什么不同之处在于它比 even 快*25%*`mylist[0:len(mylist)]`。它是直接复制到内存中还是什么？

**问题 2：** *编辑：*更新后的基准测试不再显示 Python 和 Ruby 的巨大差异。**是：**我是否以某种明显低效的方式实现了测试，所以 Ruby 代码比 Python 快得多？

现在代码清单：

Python：

```
import timeit

COUNT = 50000000

print "Array duplicating. Tests run", COUNT, "times"

setup = 'a = range(10); import copy'

print "list(a)\t\t", timeit.timeit(stmt='list(a)', setup=setup, number=COUNT)
print "copy(a)\t\t", timeit.timeit(stmt='copy.copy(a)', setup=setup, number=COUNT)
print "a[:]\t\t", timeit.timeit(stmt='a[:]', setup=setup, number=COUNT)
print "a[0:len(a)]\t", timeit.timeit(stmt='a[0:len(a)]', setup=setup, number=COUNT) 
```

红宝石：

```
require 'benchmark'

a = (0...10).to_a

COUNT = 50_000_000

puts "Array duplicating. Tests #{COUNT} times"

Benchmark.bm(16) do |x|
  x.report("Array.new(a)")   {COUNT.times{ Array.new(a) }}
  x.report("Array[*a]")   {COUNT.times{ Array[*a] }}
  x.report("a.take(a.size)")   {COUNT.times{ a.take(a.size) }}
  x.report("a.clone")    {COUNT.times{ a.clone }}
  x.report("a[0,a.size]"){COUNT.times{ a[0,a.size] }}
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T11:10:39.510

使用[`timeit`](http://docs.python.org/library/timeit.html)python 中的模块来测试时间。

```
from copy import *

a=range(1000)

def cop():
    b=copy(a)

def func1():
    b=list(a)

def slice():
    b=a[:]

def slice_len():
    b=a[0:len(a)]

if __name__=="__main__":
    import timeit
    print "copy(a)",timeit.timeit("cop()", setup="from __main__ import cop")
    print "list(a)",timeit.timeit("func1()", setup="from __main__ import func1")
    print "a[:]",timeit.timeit("slice()", setup="from __main__ import slice")
    print "a[0:len(a)]",timeit.timeit("slice_len()", setup="from __main__ import slice_len") 
```

结果：

```
copy(a) 3.98940896988
list(a) 2.54542589188
a[:] 1.96630120277                   #winner
a[0:len(a)] 10.5431251526 
```

肯定是涉及的额外步骤`a[0:len(a)]`是它缓慢的原因。

下面是两者的字节码对比：

```
In [19]: dis.dis(func1)
  2           0 LOAD_GLOBAL              0 (range)
              3 LOAD_CONST               1 (100000)
              6 CALL_FUNCTION            1
              9 STORE_FAST               0 (a)

  3          12 LOAD_FAST                0 (a)
             15 SLICE+0             
             16 STORE_FAST               1 (b)
             19 LOAD_CONST               0 (None)
             22 RETURN_VALUE        

In [20]: dis.dis(func2)
  2           0 LOAD_GLOBAL              0 (range)
              3 LOAD_CONST               1 (100000)
              6 CALL_FUNCTION            1
              9 STORE_FAST               0 (a)

  3          12 LOAD_FAST                0 (a)    #same up to here
             15 LOAD_CONST               2 (0)    #loads 0
             18 LOAD_GLOBAL              1 (len) # loads the builtin len(),
                                                 # so it might take some lookup time
             21 LOAD_FAST                0 (a)
             24 CALL_FUNCTION            1         
             27 SLICE+3             
             28 STORE_FAST               1 (b)
             31 LOAD_CONST               0 (None)
             34 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T11:22:21.310

我无法评论 ruby​​ 时间与 python 时间。但我可以评论`list`vs. `slice`。这是对字节码的快速检查：

```
>>> import dis
>>> a = range(10)
>>> def func(a):
...     return a[:]
... 
>>> def func2(a):
...     return list(a)
... 
>>> dis.dis(func)
  2           0 LOAD_FAST                0 (a)
              3 SLICE+0             
              4 RETURN_VALUE        
>>> dis.dis(func2)
  2           0 LOAD_GLOBAL              0 (list)
              3 LOAD_FAST                0 (a)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE 
```

请注意，`list`需要 a`LOAD_GLOBAL`才能找到函数`list`。在 python 中查找全局变量（和调用函数）相对较慢。这可以解释为什么`a[0:len(a)]`也更慢。还要记住，`list`需要能够处理任意迭代器，而切片则不能。这意味着`list`需要分配一个新列表，在迭代列表时将元素打包到该列表中，并在必要时调整大小。这里有一些很昂贵的东西——必要时调整大小和迭代（在 python 中有效，而不是在 C 中）。使用切片方法，您可以计算您需要的内存大小，这样可能可以避免调整大小，并且迭代可以完全在 C 中完成（可能使用 a`memcpy`或其他东西。

*免责声明*：我不是 python 开发人员，所以我不知道内部是如何`list()`实现的。我只是根据我对规范的了解进行推测。

**编辑** ——所以我查看了源代码（在 Martijn 的指导下）。相关代码在[`listobject.c`](http://hg.python.org/cpython/file/84cd07899baf/Objects/listobject.c#l2439). 然后在第 799 行调用`list`。如果对象是列表或元组，该函数会检查它是否可以使用快速分支（第 812 行）。最后，从第 834 行开始完成繁重的工作：`list_init``listextend`

```
 src = PySequence_Fast_ITEMS(b);
 dest = self->ob_item + m;
 for (i = 0; i < n; i++) {
     PyObject *o = src[i];
     Py_INCREF(o);
     dest[i] = o;
 } 
```

将其与我认为在`list_subscript`（第 2544 行）中定义的切片版本进行比较。这调用`list_slice`（第 2570 行），其中繁重的工作由以下循环（第 486 行）完成：

```
 src = a->ob_item + ilow;
 dest = np->ob_item;
 for (i = 0; i < len; i++) {
     PyObject *v = src[i];
     Py_INCREF(v);
     dest[i] = v;
 } 
```

它们几乎是相同的代码，因此大型列表的性能几乎相同也就不足为奇了（其中解包切片、查找全局变量等小东西的开销变得不那么重要了）

* * *

以下是我将如何运行 python 测试（以及我的 Ubuntu 系统的结果）：

```
$ python -m timeit -s 'a=range(30)' 'list(a)'
1000000 loops, best of 3: 0.39 usec per loop
$ python -m timeit -s 'a=range(30)' 'a[:]'
10000000 loops, best of 3: 0.183 usec per loop
$ python -m timeit -s 'a=range(30)' 'a[0:len(a)]'
1000000 loops, best of 3: 0.254 usec per loop 
```

# c# - 使用 multi.Read 时，输出参数始终为空

> ID：13047896
> 
> 赞同：5
> 
> 时间：2012-10-24T11:02:10.143
> 
> 标签：c#, dapper

我们正在广泛使用[Dapper.Net](http://code.google.com/p/dapper-dot-net/)，并且对它非常满意。**但是，我们在尝试使用multi.Read**从存储过程中检索输出参数时遇到了一个问题：

```
var p = new DynamicParameters(); 
p.Add("@id", id); 
p.Add("TotalRows", dbType: DbType.Int32, direction: ParameterDirection.Output); 

using (var multi = cnn.QueryMultiple(string.Format("dbo.[{0}]", spName), p,
    commandType: CommandType.StoredProcedure))
{  
    int TotalRows = p.Get<int>("@TotalRows"); //This is always null

    var results = multi.Read<New_Supplier>().ToList<IDBSupplier>();
    var areas = multi.Read<node>().ToList<IDBNode>();
    var categories = multi.Read<node>().ToList<IDBNode>();
    int TotalRows = multi.Read<int>().FirstOrDefault(); // This works

} 
```

但是，如果我们使用**connection.Query**语法来获取单个结果集，则会填充输出参数：

```
var result = cnn.Query<New_Supplier>(string.Format("spname"), p,
    commandType: CommandType.StoredProcedure).ToList<New_Supplier>();
int TotalRows = p.Get<int>("@TotalRows"); 
```

错误是Dapper DynamicParameters中输出参数上AttachedParam的sqlValue始终为null。

为了解决这个问题，我们将输出参数的值添加到存储过程的结果集中，并以这种方式读取它。

为什么参数总是为空？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T11:13:08.750

在 TDS 流中，`OUT`参数*位于末尾*。在您的`Query<T>`示例中，您已经*使用了 TDS 流*：

```
var result = cnn.Query<New_Supplier>(string.Format("spname"), p,
    commandType: CommandType.StoredProcedure).ToList<New_Supplier>();
int TotalRows = p.Get<int>("@TotalRows"); 
```

所以因为你已经消费了流，所以已经达到了新的参数值，你应该有可用的值。在`QueryMultiple`示例中，您**尚未**到达 TDS 流的末尾。尝试移动`p.Get`：

```
var p = new DynamicParameters(); 
p.Add("@id", id); 
p.Add("TotalRows", dbType: DbType.Int32, direction: ParameterDirection.Output); 

using (var multi = cnn.QueryMultiple(string.Format("dbo.[{0}]", spName), p,
    commandType: CommandType.StoredProcedure))
{      
    var results = multi.Read<New_Supplier>().ToList<IDBSupplier>();
    var areas = multi.Read<node>().ToList<IDBNode>();
    var categories = multi.Read<node>().ToList<IDBNode>();
}
int TotalRows = p.Get<int>("@TotalRows"); 
```

如果*这*不起作用，请告诉我；p

# forms - rails 3 - 添加一个不会提交表单的按钮

> ID：13047900
> 
> 赞同：1
> 
> 时间：2012-10-24T11:02:15.573
> 
> 标签：forms, ruby-on-rails-3.2

我正在尝试在表单中添加一些“下一步”和“后退”按钮。想法是将填写过程分成几个步骤，使用这些按钮，当前步骤的 div 被隐藏，下一个相应的。显示上一步。

我的问题是，当我以下列方式添加按钮时......

```
<button class="proceed_button" id="loan_information">Proceed</button>
<button class="cancel_button" id="loan_information">Cancel</button> 
```

...他们提交表格。表单标签内的每个按钮都被认为是提交按钮吗？如果是这样，我该如何改变这种行为？如果不是，那他们为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:51:35.150

我不确定您是否想要一个按钮，也许您希望它*看起来*像一个按钮。无论哪种方式，请参阅这篇文章：[rails 3：将链接显示为按钮？](https://stackoverflow.com/questions/6247491/rails-3-display-link-as-button)

一旦你有了你的按钮，你需要更新你的 javascript 以防止在点击它时发生任何事情（假设你有 jquery）。为那些没有 js 的恐龙提供一个真正的后备仍然很好，所以假设你的继续按钮为没有 js 的用户提交，对于那些有 js 的用户，你会做类似的事情：

```
$('#proceed_button').click(function(e) { e.preventDefault(); // Show and hide your divs here }); 
```

另请注意，在您发布的代码中，您不应该有两个具有相同 id 的按钮，您的 id 和类看起来交换了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:15:51.623

好的，解决方案是按钮需要一个类型。

```
<button type="button" class="proceed_button" id="loan_information">Proceed</button>
<button type="button" class="cancel_button" id="loan_information">Cancel</button> 
```

像这样，它不会再提交表单了。

根据[http://w3schools.com/html5/att_button_type.asp](http://w3schools.com/html5/att_button_type.asp)默认类型取决于浏览器，因此您应该始终指定类型。

# c# - SQL Server：产生输出（打印语句）之前的延迟

> ID：13047903
> 
> 赞同：1
> 
> 时间：2012-10-24T11:02:28.083
> 
> 标签：c#, sql, sql-server, sql-server-2008, sql-execution-plan

我可能对正在发生的事情有一点感觉，但我想我会要求得到确认，并可能会寻找替代方案。

作为背景，我编写了一个 C# 应用程序，它为存储过程提供了一个小型前端。该过程包含许多来自其他存储过程的临时表插入（和一个表值 udf），以及一些 xml 处理。

为了了解我在存储过程中的进展情况，`InfoMessage`我`SqlInfoMessageEventHandler`从`SqlConnection`. 我已经在整个 SP 的各个地方放置了一些信息丰富的打印语句，因此我可以了解已完成的处理并相应地更新状态栏）。

SP 的粗略结构如下：

```
Print 'Beginning processing'

Create Temp Table
Insert into Temp Table from Table Valued UDF

Print 'Creating working Tables'
Create more Temp Tables
Insert into Temp Tables from SPs (each SP contains a print statement e.g 'Starting SP1'). 
```

所有消息都被成功接收和处理，但是在从服务器返回任何消息之前有几秒钟的延迟，然后前几条消息同时到达（好像它们都被处理了但输出被推迟了一段时间尽管）。

我天真地假设（我仍然需要了解很多关于 DB 机制的知识）我的初始打印语句将在 SP 中的任何其他处理指令发生之前返回。

我假设服务器正在做一些关于获取执行计划和/或可能重新计算计划的事情，或者查询优化器是否在返回任何结果之前进行了一些预处理？

希望我的问题可以从那乱七八糟的文字中合理地理解。本质上，查询优化器是否会让服务器在过程实际开始顺序遇到我的打印语句之前执行一些选择/插入？

我还尝试在我的初始打印语句之前进行一些小型临时表操作，因此在缓慢的操作开始之前会返回一些行，但结果大致相同。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:06:44.500

我可以通过 MSSM 判断，当您使用 PRINT 语句时，它们会迟到，因为一旦缓冲区已满，就会发生输出。如果您想立即输出消息，请使用：

RAISERROR('Message',0,0) WITH NOWAIT

它将作为打印工作，但会立即输出。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:27:24.137

我宁愿使用 SELECT 语句而不是 PRINT -

```
SELECT 'Beginning processing'

Create Temp Table
Insert into Temp Table from Table Valued UDF

SELECT 'Creating working Tables'

Create more Temp Tables
Insert into Temp Tables from SPs (each SP contains a print statement e.g 'Starting SP1'). 
```

# jasper-reports - 只有当它的细节带是页面上的最后一个时才可能打印元素？

> ID：13047905
> 
> 赞同：3
> 
> 时间：2012-10-24T11:02:28.087
> 
> 标签：jasper-reports

是否有可能获得条件，只有当元素的详细信息带是 Jasper Reports 中的最后一页时，我才能打印元素？

我们可以在页面上有变量说记录号。但是我们如何得到每一页的计算总记录呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:50:43.520

这是通过变量上的“重置类型”完成的

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="612" pageHeight="792" columnWidth="612" leftMargin="0" rightMargin="0" topMargin="10" bottomMargin="10" uuid="39852bd8-6125-4359-8d76-06927e7be492">
    <queryString>
        <![CDATA[SELECT ROWNUM N FROM dual  CONNECT BY LEVEL <= 200 ]]>
    </queryString>
    <field name="N" class="java.math.BigDecimal"/>
    <variable name="N_count_page" class="java.lang.Integer" resetType="Page" calculation="Count">
        <variableExpression><![CDATA[$F{N}]]></variableExpression>
    </variable>
    <variable name="N_count_report" class="java.lang.Integer" calculation="Count">
        <variableExpression><![CDATA[$F{N}]]></variableExpression>
    </variable>
    <title>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="93284d9f-1ee0-4a15-b227-31b55aa2e48b" x="0" y="0" width="376" height="20"/>
                <textElement textAlignment="Center">
                    <font size="14" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Page Count"]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <columnHeader>
        <band height="20">
            <staticText>
                <reportElement uuid="a7113fdd-591b-4fee-9123-981ab75c6fa6" mode="Opaque" x="0" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#000000"/>
                <textElement/>
                <text><![CDATA[N]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20">
            <textField>
                <reportElement uuid="54bac746-4efb-4412-81bc-b4ba807c60fd" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{N}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <pageFooter>
        <band height="50">
            <staticText>
                <reportElement uuid="4c685263-0ef7-4a68-a328-39901ef2806f" x="0" y="0" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <text><![CDATA[Rows on page :]]></text>
            </staticText>
            <textField>
                <reportElement uuid="c65214f1-82dc-476a-8439-087854bbc5c6" x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{N_count_page}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="48b37aff-b169-4ca2-b9dd-30c026988f68" x="289" y="30" width="80" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement uuid="983ccfed-d783-429e-bc6c-3fa488b2e106" x="369" y="30" width="40" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
    <lastPageFooter>
        <band height="64">
            <staticText>
                <reportElement uuid="240e2f86-991a-4fc1-941b-56cc43b28c25" x="0" y="24" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <text><![CDATA[Rows on report :]]></text>
            </staticText>
            <textField>
                <reportElement uuid="718d4481-4716-4071-9989-27d5119fb428" x="100" y="24" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{N_count_report}]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement uuid="f03359be-3bbe-4da8-9bd8-ac024aa6f289" x="369" y="44" width="40" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="ad4aa2c0-9ad8-4892-a16f-0bb584c93916" x="289" y="44" width="80" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="b4bdd29a-4ef9-46cc-a57a-df7577bdd73f" x="0" y="0" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <text><![CDATA[Rows on page :]]></text>
            </staticText>
            <textField>
                <reportElement uuid="39952747-170c-4747-8e2c-0e12ab608ae9" x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{N_count_page}]]></textFieldExpression>
            </textField>
        </band>
    </lastPageFooter>
</jasperReport> 
```

# c# - 何时在 Attributes.Add 上使用 MergeAttribute

> ID：13047908
> 
> 赞同：2
> 
> 时间：2012-10-24T11:02:32.580
> 
> 标签：c#, asp.net-mvc-3, tagbuilder

使用 TagBuilder 时，可以使用`TagBuilder.Attributes.Add(..)`或`TagBuilder. MergeAttribute(..)`向正在构建的 HTML 元素添加属性：

```
TagBuilder formBuilder = new TagBuilder("form");
formBuilder.Attributes.Add("method", "get");
formBuilder.Attributes.Add("action", url);

TagBuilder buttonBuilder = new TagBuilder("input");
buttonBuilder.MergeAttribute("type", "submit");
buttonBuilder.MergeAttribute("value", buttonText); 
```

但是这两者有什么不同，我什么时候应该更喜欢一个而不是另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:03:23.693

通过查看`TagBuilder`dotPeek，我可以看到 Attributes 是一个 SortedDictionary

来自 ctor：

```
this.Attributes = new SortedDictionary<string, string>(StringComparer.Ordinal); 
```

在 SotredSet 上调用 Add 最终会调用内部函数 AddIfNotPresent(item)

```
public bool Add(T item)
{
  return this.AddIfNotPresent(item);
} 
```

这意味着这`Attributes.Add`与在没有设置的情况下调用 MergeAttribute 相同`replaceExisting == true`。

```
 public void MergeAttribute(string key, string value, bool replaceExisting)
    {
      ...

      if (!replaceExisting && this.Attributes.ContainsKey(key))
        return;
      this.Attributes[key] = value;
    } 
```

所以我的建议是使用 MergeAttribute 而不是 Add 并始终指定 replaceExisting 以提高可读性并确保不会出现意外结果。

# php - 样式化多个while循环结果，让它们彼此相邻？

> ID：13047909
> 
> 赞同：0
> 
> 时间：2012-10-24T11:02:34.090
> 
> 标签：php, html, css, while-loop, styling

我有一个通过包装数据库进行搜索的搜索表单。一切正常，花花公子，当提交搜索时，我会在带有图片的样式框中显示的不同页面上获得返回结果。但不幸的是，它们似乎一个接一个地显示在彼此的下方。虽然他们回来很好，我得到了正确的结果。我希望能够彼此相邻显示三个，然后他们转到下一行并再显示三个，依此类推，直到我用完结果。

这是PHP：

```
<?php
            $con = mysql_connect ("localhost", "horizon1", "D2j616H5O@Lw");
                   mysql_select_db ("horizon1_delyn", $con);

            if (!$con)
                { 
                    die ("Could not connect: " . mysql_error());
                }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $depth   = mysql_real_escape_string($_POST['depth']);
            $varWidth = mysql_real_escape_string($_POST['traywidth']);
            $varHeight= mysql_real_escape_string($_POST['trayheight']);
            $varRange = mysql_real_escape_string($_POST['trayrange']);
            $varType  = mysql_real_escape_string($_POST['traytype']);
            $varShape = mysql_real_escape_string($_POST['trayshape']);
            $varImage = mysql_real_escape_string($_POST['imagename']);

            if (isset($varHeight) && !empty($varHeight)) {
                    $low  = ($varHeight."00");
                    $high = ($varHeight."99");
                } else {
                    $low  = ("000");
                    $high = ("999");
                }

            if (isset($varWidth) && !empty($varWidth)) {
                    $min  = ($varWidth."00");
                    $max = ($varWidth."99");
                } else {
                    $min  = ("000");
                    $max = ("999");
                }   

            $sql = "SELECT * FROM range WHERE 
                        description LIKE '%".$descrip."%'  
                    AND trayrange   LIKE '%".$varRange."%' 
                    AND traytype    LIKE '%".$varType."%' 
                    AND trayshape   LIKE '%".$varShape."%'
                    AND traywidth   BETWEEN '".$min."'  AND '".$max."' 
                    AND trayheight  BETWEEN '".$low."' AND '".$high."' ";

                $r_query = mysql_query($sql);  

                while ($row = mysql_fetch_array($r_query)) 
                    { 
                        echo '<div id="results">';
                        echo '<p class="image">
                                <img src="   '. $row['imagename'] . '" width="150" length="80"> 
                                    </p>';
                        echo '<div id="table"><br />
                                <strong> Tool Code: </strong>  '. $row['toolcode'];
                        echo '<br /><strong> Description: </strong> '. $row['description']; 
                        echo '<br /><strong> Tray range: </strong> '. $row['trayrange']; 
                        echo '<br /><strong> Tray type:  </strong> '. $row['traytype'];
                        echo '<br /><strong> Tray size:  </strong> '. $row['traysize']; 
                        echo '<br /><strong> Tray shape: </strong> '. $row['trayshape'] . '</div>' . '<br />';
                        echo '<a href="enquire.html">Enquiry Page</a> <br />' . 
                             '<a href="packingtest.html">Back to Search</a>';
                        echo '</div>' . '<br />';
                    }
                if (mysql_num_rows($r_query) <= 0){
                    echo 'No results match your search, please try again';
               }
        ?> 
```

这是CSS：

```
 <style>
 #boxes {
padding: 10px;
margin-top: 20px;
margin: 10px;
float: left;
display: block;
}
 #results {
width: 212px;
    padding: 5px;
    background: #E8CF24;
display: block;
    overflow:auto;

font-family: Verdana, Geneva, sans-serif;
font-size: 11px;
font-color: #FFF;

border: 2px solid #cccccc;
-moz-border-radius: 7px;
-webkit-border-radius: 7px;
border-radius: 7px;

-moz-box-shadow: 2px 2px 2px #cccccc;
-webkit-box-shadow: 2px 2px 2px #cccccc;
box-shadow: 2px 2px 2px #cccccc;
}
 #table {
margin-top: 10px;
width: 200px;
    padding: 3px;
    background: #FFF;
display: block;
    overflow:auto;

border: 2px solid #cccccc;
-moz-border-radius: 7px;
-webkit-border-radius: 7px;
border-radius: 7px;

-moz-box-shadow: 2px 2px 2px #cccccc;
-webkit-box-shadow: 2px 2px 2px #cccccc;
box-shadow: 2px 2px 2px #cccccc;
}
 .image {
margin-left: 28px;
margin-bottom: 0px;
margin-top: 5px;
}
 a:link {
color: #000423;
font-family: Arial, Helvetica, sans-serif;
font-size: 13px;
}
 </style> 
```

我尝试使用 CSS 对其进行编辑，但我可以更改位置和填充、边距等。但我无法让它们彼此对齐。

有谁能帮忙吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T11:09:57.147

在您的 css 中将其添加到您的 #results 选择器。

```
#results {
   float:left
} 
```

编辑：对不起，这不是正确的答案。删除上面的代码并查看下面的代码。

用下面的代码替换 while 循环。

编辑：不要忘记初始化 $count 变量。($count = 0;) 只需复制粘贴代码，它应该适合你。

```
 $count = 0;
   while ($row = mysql_fetch_array($r_query)) 
    { 

        $t = $count%3;
        echo ($t==2) ?  '<div id="results">' : '<div id="results" style="float:left">';

        echo '<p class="image">
                <img src="   '. $row['imagename'] . '" width="150" length="80"> 
                    </p>';
        echo '<div id="table"><br />
                <strong> Tool Code: </strong>  '. $row['toolcode'];
        echo '<br /><strong> Description: </strong> '. $row['description']; 
        echo '<br /><strong> Tray range: </strong> '. $row['trayrange']; 
        echo '<br /><strong> Tray type:  </strong> '. $row['traytype'];
        echo '<br /><strong> Tray size:  </strong> '. $row['traysize']; 
        echo '<br /><strong> Tray shape: </strong> '. $row['trayshape'] . '</div>' . '<br />';
        echo '<a href="enquire.html">Enquiry Page</a> <br />' . 
             '<a href="packingtest.html">Back to Search</a>';
        echo '</div>';

        $count++;
    } 
```

这就是我得到的。我没有使用css文件。

![在此处输入图像描述](../Images/dd881d5748e89e96b71f8192de4c81b4.png)

# string - 删除查询字符串 - 重写规则

> ID：13047910
> 
> 赞同：0
> 
> 时间：2012-10-24T11:02:34.547
> 
> 标签：string, mod-rewrite, rewrite

如何从 url 末尾删除查询字符串？更具体地说，这是我的重写规则：

```
RewriteRule example-(.*).html$ examples/view-example.php?param1=parameter&param2=$1&split=- 
```

我希望它返回 404 或重定向到`www.mydomain.com/example-one.html`：

```
www.mydomain.com/example-one.html?param1=parameter&param2=one&split=- 
```

这是我尝试过的，它不起作用：

```
RewriteCond %{REQUEST_URI}  /examples/view-example\.php
RewriteCond %{QUERY_STRING} param1=parameter&param2=(.*)&split=-
RewriteRule ^(.*)$ http://mydomain.com/example-%1.html$ 
```

我觉得`RewriteRule ^(.*)$ http://mydomain.com/example-%1.html$`不对。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:37:21.287

这应该可以解决问题：

```
RewriteCond %{QUERY_STRING} ^param1=parameter&param2=(.*)&split=-
RewriteRule ^/examples/view-example\.php$ http://mydomain.com/example-%1.html [R=301] 
```

虽然，我不明白你想做什么`www.mydomain.com/example-one.html?param1=parameter&param2=one&split=-`

# visual-studio - 除Bug外的WorkItem的格式描述

> ID：13047912
> 
> 赞同：1
> 
> 时间：2012-10-24T11:02:40.767
> 
> 标签：visual-studio, tfs, formatting, workitem

我正在寻找一种方法来格式化类型为或的 WorkItems的**描述**，但是用于更改 Font、FontSize、FontColor 的 ToolBar 可用于格式化**Steps to Reproduce**的格式对于这些 WorkItems 不可用。`UserStory``Issue``Task`**`Bugs`**

 **我想知道是否可以为描述启用工具栏。

我已经在 Visual Studio 2010 和 2012 中使用 TFS 插件对此进行了测试。我们使用的是 TFS 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:19:27.287

这在 TFS 2010 中是不可能的，因为默认描述字段是纯文本而不是 HTML。在 TFS 2012 中，此字段已[更改](http://bartwullems.blogspot.co.uk/2012/10/tfs-2012-work-item-description-field-is.html)为 HTML。

您“可以”创建一个新的描述字段“MyCompany.DescriptionHtml”，例如 HTML 类型，但您必须确保没有人（或任何报告等）曾经将 System.Description 用于任何事情。此外，您需要将所有现有描述迁移到新字段。**

# http - 为什么 Gmail 没有更快地重新连接？

> ID：13047913
> 
> 赞同：0
> 
> 时间：2012-10-24T11:02:44.683
> 
> 标签：http, web-applications, gmail, websocket, socket.io

当[Gmail](https://mail.google.com/)断开连接时，它会显示如下消息：

> 未连接。在 3:36 连接... [立即尝试]

更快的重新连接间隔真的有那么大吗？

我之所以问是因为我正在开发一个基于[Socket.IO](http://socket.io/)的移动网络应用程序，并且我想避免像在 Gmail 上那样收到消息。相反，我想象一个方案，例如：

*   以一秒到一分钟之间的快速随机间隔重新连接， *加上*

*   重新连接某些用户交互，*加上*

*   [在浏览器状态](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#browser-state)更改时重新连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:06:25.463

您的应用程序失去与服务器的连接的原因之一可能是服务器或与服务器的连接过载。通过重新连接尝试向其发送垃圾邮件可能会使情况变得更糟。

最后，这取决于您的可用性要求。当用户在电子邮件程序中花费很长时间时，他通常不会经常与它进行交互，而是在阅读一封电子邮件。此外，邮件客户端可以忍受几分钟的断开连接，因为电子邮件在发送后几个小时的延迟被阅读并不罕见。因此，GMail 在尝试重新连接之前可以忍受更长的延迟。当您有一个用户不断与服务器交互的应用程序时，您可能希望重新连接尝试的延迟更短。

# visual-studio - Visual Studio 2012 更改 Web 浏览器

> ID：13047914
> 
> 赞同：54
> 
> 时间：2012-10-24T11:02:45.170
> 
> 标签：visual-studio, visual-studio-2012

**如果我在文本编辑器**中单击控制并单击超链接，它将在新的 Visual Studio 选项卡中打开 URL。我宁愿在我系统的默认 Web 浏览器（可能是 Google Chrome）中在 Visual Studio 之外打开该链接。我该如何安排？

我说的是代码注释中的超链接。

* * *

我正在使用 Visual Studio **2012**。我发现了一个2009 年的[类似问题](https://stackoverflow.com/questions/1201570/how-do-i-open-links-in-visual-studio-in-my-web-browser-and-not-in-visual-studio)，但是接受的答案（宏）在 Visual Studio 2012 中不起作用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T17:46:49.583

令人沮丧的是，这在 Visual Studio 2012 或 2013 中是不可能的。

[在http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2723548-open-links-in-an-actual-browser](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2723548-open-links-in-an-actual-browser)向开发人员报告的错误请添加您的投票！

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-08-22T05:56:28.700

有一个扩展[Open in External Browser](http://visualstudiogallery.msdn.microsoft.com/46c0c49e-f825-454b-9f6a-48b216797eb5?SRC=VSIDE)。我正在使用 Visual Studio 2013 Professional。这个对我有用。

安装：

1.  转到“工具”-“扩展和更新...”
2.  在左侧窗格中选择“在线”-“Visual Studio 库”
3.  在搜索字段中输入“在外部浏览器中打开”
4.  点击“安装”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-27T14:08:31.597

在 VS 2012 Professional 中，在运行调试图标旁边的工具栏上，是可以展开的单词“开始”。展开后，您可以选择“打开方式...”，您可以选择浏览器来打开 Web 项目。它不会运行调试器，它只会在所选浏览器中打开网站。（工具栏 > 开始（扩展）> 打开方式...）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-07T09:34:48.933

似乎不可能（除非您的默认浏览器是 IE，所以您不会知道其中的区别）。

正如 Anand 上面所写，您可以*ctrl* +*右键单击*​​链接，然后选择`open link in external window`（您不能在起始页上执行此操作，只能在打开的网页上执行此操作）但无论您的默认浏览器是什么，它仍然会在 IE 中打开窗口。

即使您转到 *TOOLS* --> *Options* --> *Environment* --> *Web Browser*，您也会注意到它表明 IE 和内部 VS Web 浏览器是同级的。

因此，只需从地址栏中复制 URL 并将其粘贴到您的默认浏览器（我认为这并不太麻烦）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T11:14:02.030

如果您在这种情况下使用 Visual Studio 2010，则可以使用默认浏览器切换器应用程序：

1.  在您的工具栏菜单上选择**“工具”**
2.  然后从选项中选择**“扩展管理器”**
3.  它将在左侧打开扩展管理器窗口有选项选择**“在线画廊”**选项
4.  在在线图库中搜索**“WoVS 默认浏览器切换器”**
5.  下载并安装
6.  下载后重启VS

希望这对你最有效

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-19T09:00:19.493

好吧，我找到了一个不太干净的解决方法：P

*   将 .html 文件添加到您的项目中
*   打开新的 .html 文件并在编辑器中单击。
*   现在从 Visual Studio 顶部菜单转到“文件”>“浏览方式...”。

    ![在此处输入图像描述](../Images/cbd793f6cc16a2251d9fe233cfee89f2.png)

*   在“浏览方式”窗口中，选择所需的浏览器并单击“设置为默认值”按钮。

    ![在此处输入图像描述](../Images/79432820636ccab7b9769459caae4c07.png)

*   单击浏览按钮设置新的默认选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T20:16:46.723

我找到了一种方法来更改 Visual Studio Express 2012 for Web 中所有操作的默认浏览器。它记录[在这里](http://msdn.microsoft.com/en-us/library/df5x06h3.aspx)：

> 默认情况下，Visual Studio 使用您的默认浏览器来测试页面。要使用不同的浏览器或 Page Inspector，请在 [the] Solution Explorer 中右键单击 [ **an .aspx** ] 页面，然后单击 [...] **Browse With** [，它可以让您从列表中选择一个浏览器，添加新的浏览器到列表中，或将其设置为默认浏览器。（此处的默认浏览器设置仅适用于 Visual Studio 环境，不适用于 Windows。）

这也改变了 MVC 项目的默认浏览器`F5`，因为我习惯于关闭 IE 来停止调试。当我让 Visual Studio 使用我系统的默认浏览器时，我首先必须从浏览器切换回它以停止调试，因为关闭浏览器选项卡不会。

不幸的是，它仍然无法在浏览器的评论中打开链接。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-03T06:32:46.120

我实际上不知道您在超链接下的意思是什么，但是您可以通过简单地..卸载 IE9（控制面板->软件->Windows 组件->再见 IE9）轻松地使 VS2012 与另一个浏览器一起工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-08T10:23:05.523

这是你必须做的：

1.  转到标准菜单工具栏
2.  单击“添加或删除按钮”
3.  勾选“调试目标”选项

![在此处输入图像描述](../Images/8e819ecc665ebb5db8e569fc10a4fbd4.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-14T08:12:05.520

VS 2012 -->> 文件 -->> 浏览方式 -- >> 选择浏览器 -->> 点击“设置默认”按钮 -->> 现在点击“浏览”按钮

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-02-23T04:47:05.907

通过这个设置...

![在此处输入图像描述](../Images/047a2dfedd0d7a05f1d5f8557d697ff1.png)

希望对你有帮助

# c# - OutputDataReceived 不适用于 windows git.exe

> ID：13047916
> 
> 赞同：2
> 
> 时间：2012-10-24T11:02:55.233
> 
> 标签：c#, .net, console

我确实有一个奇怪的问题：我尝试调用 git.exe 通过一个小的 c# console-application-> 克隆一个存储库

```
Process p = new Process();
p.StartInfo.FileName = "path/to/git/git.exe";
p.StartInfo.Arguments = "clone SomeGitRepoWhichRequiresPassword";
p.StartInfo.UseShellExecute = false;
p.EnableRaisingEvents = true;

p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.RedirectStandardError = true;

p.OutputDataReceived += OutputDataReceived;
p.ErrorDataReceived += ErrorDataReceived;
p.Exited += Exited;

p.Start();
p.BeginOutputReadLine();
p.BeginErrorReadLine();
p.WaitForExit(); 
```

当我尝试克隆需要用户输入（例如输入 ssh 密码）的存储库时，不会触发任何事件，因此我无法以编程方式对该输入做出反应。有没有办法真正获得所有命令输出？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:51:07.753

为什么要以编程方式输入密码？您可以尝试在 Git 存储库 URL 中写入密码，如下所示：

```
git clone https://username:password@github.com/username/repository.git 
```

# css - 分页项目在悬停时移动并添加边框

> ID：13047918
> 
> 赞同：0
> 
> 时间：2012-10-24T11:03:06.250
> 
> 标签：css

悬停时此菜单项正在移动。如何使项目静止且悬停时不移动。放置特定宽度和高度时也会发生同样的事情。这是新的 JSFiddle 链接。 [http://jsfiddle.net/tagaawang/zTCCf/3/](http://jsfiddle.net/tagaawang/zTCCf/3/)

/ *CSS* /

```
 <style type="text/css">
        .div{margin:0 auto;position:relative;margin-top:40px;}
   .pagination{height: 42px;
        clear: right;
        top: -21px;
        left: 0;
        position: absolute;}
   .pagination ul{width: 100%;max-height: 42px;}
   .pagination li{font-family: 'Open Sans', sans-serif;
        list-style: none;
        cursor: pointer;
        font-weight: 600;
        line-height: 23px;
        text-indent: 8px;
        color: white;
        background-color: #0083DE;
        height: 26px;
        font-size: 14px;display: inline-block;
        width: 26px;margin-left:10px;  }
    .pagination li.selected{background-color: white;
        border: 4px solid #F0F0F0;
        padding: 5px;
        position: relative;
        font-weight: 600;
        color: #0F7ABE;
        font-family: 'Open Sans', sans-serif;}
     .pagination li:hover{background-color: #0083DE;
        border: 4px solid #F0F0F0;
        padding: 5px;
        position: relative;
        font-weight: 600;
        color: #ffffff;
        font-family: 'Open Sans', sans-serif;}​
    </style> 
```

**html**

```
<div class="div">
<div class="pagination">
    <ul>
    <li>1</li>
    <li class="selected">2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    </ul>
</div>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:12:39.780

根据您的代码，悬停和/或选定状态带有 4px 的边框：

```
border: 4px solid #F0F0F0; 
```

这会导致偏离 4 像素的偏移，解决方案：

添加与站点背景颜色相同的边框作为占位符，然后在悬停时更改`border-color`.

```
.pagination li{
  border: 4px solid #fff;
}
.pagination li.selected, .pagination li:hover {
  border-color: #F0F0F0;
} 
```

# java - JPA 独立模式 - 在 EntityTransaction 之外更改托管实体字段有效 - 为什么？

> ID：13047919
> 
> 赞同：2
> 
> 时间：2012-10-24T11:03:06.407
> 
> 标签：java, jpa

我正在独立模式下试验**JPA**（由 Hibernate 支持）。我注意到以下代码成功地将数据库值更改为“乱码”：

```
A a = em.find(A.class, 1);
a.setA1("garbled");
entityTransaction.begin();   // line 3
entityTransaction.commit();  // line 4
em.close(); 
```

**在第 3 行**之前没有其他事务**begin()**。[EntityTransaction 的 API 规范中](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityTransaction.html)使用的语言似乎另有说明，或者在使用**begin()**和**commit()划分****JPA**实体事务的模型中可能有些违反直觉？请注意，第**3**行和**第 4**行是必需的，因为将它们注释掉不会更改数据库值。

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:40:15.760

`a`在您的示例中，是与实例关联的托管实体`em`，可以在事务边界之外进行修改，并将作为从同一实体管理器实例提交事务的一部分持久化。事务边界仅定义提交事务时进入数据库的内容以及事务失败时恢复对数据库所做的更改。假设您在示例中的事务失败，`a`仍然会进行更改，只是数据库不会有这些更改，因此对其他人不可见。

如果您期望托管实体不应该在事务边界之外进行修改，或者在事务边界之外对它们的任何更改都不应该被持久化，那么这是不正确的。托管实体的生命周期与其实体管理器相关联。******

# javascript - 使用 AngularJS 的 ng-options 进行选择

> ID：13047923
> 
> 赞同：451
> 
> 时间：2012-10-24T11:03:20.007
> 
> 标签：javascript, angularjs, html-select, ng-options

我在其他帖子中读过它，但我无法弄清楚。

我有一个数组，

```
$scope.items = [
   {ID: '000001', Title: 'Chicago'},
   {ID: '000002', Title: 'New York'},
   {ID: '000003', Title: 'Washington'},
]; 
```

我想将其渲染为：

```
<select>
  <option value="000001">Chicago</option>
  <option value="000002">New York</option>
  <option value="000003">Washington</option>
</select> 
```

而且我还想选择 ID=000002 的选项。

我已阅读*[select](http://docs.angularjs.org/api/ng.directive:select)*并尝试过，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：805
> 
> 时间：2012-10-24T12:59:51.360

需要注意的一件事是，ngOptions*需要*ngModel 才能工作......注意`ng-model="blah"`其中的意思是“将 $scope.blah 设置为选定的值”。

试试这个：

```
<select ng-model="blah" ng-options="item.ID as item.Title for item in items"></select> 
```

这里有更多来自 AngularJS 的文档（如果你还没有看过的话）：

> 对于数组数据源：
> 
> *   数组中值的标签
> *   选择作为数组中值的标签
> *   数组中的值的标签组=选择为数组中的值的标签组
> 
> 对于对象数据源：
> 
> *   对象中（键，值）的标签
> *   在对象中选择作为 (key , value) 的标签
> *   对象中的（键，值）按组标记
> *   为对象中的（键，值）按组选择标签组

* * *

有关 AngularJS 中选项标记值的一些说明：

使用时`ng-options`，**ng-options 写出的选项标签的值将始终是选项标签所关联的数组项的索引**。这是因为 AngularJS 实际上允许您使用选择控件选择整个对象，而不仅仅是原始类型。例如：

```
app.controller('MainCtrl', function($scope) {
   $scope.items = [
     { id: 1, name: 'foo' },
     { id: 2, name: 'bar' },
     { id: 3, name: 'blah' }
   ];
}); 
```

```
<div ng-controller="MainCtrl">
   <select ng-model="selectedItem" ng-options="item as item.name for item in items"></select>
   <pre>{{selectedItem | json}}</pre>
</div> 
```

以上将允许您直接选择整个对象`$scope.selectedItem`。**关键是，使用 AngularJS，您无需担心选项标签中的内容。让 AngularJS 处理它；您应该只关心您范围内模型中的内容。**

[这是一个演示上述行为的 plunker，并显示了写出的 HTML](http://plnkr.co/edit/SxIvt4KThWLtWvh3PnOh?p=preview)

* * *

处理默认选项：

关于默认选项，我在上面没有提到一些事情。

**选择第一个选项并删除空选项：**

您可以通过添加一个简单的方法来做到这一点，`ng-init`它将模型（从`ng-model`）设置为您重复的项目中的第一个元素`ng-options`：

```
<select ng-init="foo = foo || items[0]" ng-model="foo" ng-options="item as item.name for item in items"></select> 
```

`foo`注意：如果碰巧正确初始化为“虚假”的东西，这可能会有点疯狂。`foo`在这种情况下，您很可能需要处理控制器中的初始化。

**自定义默认选项：**

这有点不同；在这里，您需要做的就是添加一个选项标记作为您选择的子项，具有空值属性，然后自定义其内部文本：

```
<select ng-model="foo" ng-options="item as item.name for item in items">
   <option value="">Nothing selected</option>
</select> 
```

注意：在这种情况下，即使您选择了不同的选项，“空”选项也会保留在那里。AngularJS 下选择的默认行为不是这种情况。

**进行选择后隐藏的自定义默认选项：**

如果您希望自定义的默认选项在您选择一个值后消失，您可以将 ng-hide 属性添加到您的默认选项：

```
<select ng-model="foo" ng-options="item as item.name for item in items">
   <option value="" ng-if="foo">Select something to remove me.</option>
</select> 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-11-27T20:52:34.190

我正在学习 AngularJS，并且也在努力选择。我知道这个问题已经得到解答，但我还是想分享更多代码。

在我的测试中，我有两个列表框：汽车品牌和汽车型号。模型列表被禁用，直到选择了某些品牌。如果品牌列表框中的选择稍后被重置（设置为“选择品牌”），则模型列表框再次被禁用，并且其选择也被重置（为“选择模型”）。品牌作为资源被检索，而模型只是硬编码。

### 制作 JSON：

```
[
{"code": "0", "name": "Select Make"},
{"code": "1", "name": "Acura"},
{"code": "2", "name": "Audi"}
] 
```

### 服务.js：

```
angular.module('makeServices', ['ngResource']).
factory('Make', function($resource){
    return $resource('makes.json', {}, {
        query: {method:'GET', isArray:true}
    });
}); 
```

### HTML 文件：

```
<div ng:controller="MakeModelCtrl">
  <div>Make</div>
  <select id="makeListBox"
      ng-model="make.selected"
      ng-options="make.code as make.name for make in makes"
      ng-change="makeChanged(make.selected)">
  </select>

  <div>Model</div>
  <select id="modelListBox"
     ng-disabled="makeNotSelected"
     ng-model="model.selected"
     ng-options="model.code as model.name for model in models">
  </select>
</div> 
```

### 控制器.js：

```
function MakeModelCtrl($scope)
{
    $scope.makeNotSelected = true;
    $scope.make = {selected: "0"};
    $scope.makes = Make.query({}, function (makes) {
         $scope.make = {selected: makes[0].code};
    });

    $scope.makeChanged = function(selectedMakeCode) {
        $scope.makeNotSelected = !selectedMakeCode;
        if ($scope.makeNotSelected)
        {
            $scope.model = {selected: "0"};
        }
    };

    $scope.models = [
      {code:"0", name:"Select Model"},
      {code:"1", name:"Model1"},
      {code:"2", name:"Model2"}
    ];
    $scope.model = {selected: "0"};
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-10-26T07:21:25.590

出于某种原因，AngularJS 让我感到困惑。他们的文档在这方面非常糟糕。欢迎更多好的变体示例。

无论如何，我对 Ben Lesh 的回答略有不同。

我的数据集合如下所示：

```
items =
[
   { key:"AD",value:"Andorra" }
,  { key:"AI",value:"Anguilla" }
,  { key:"AO",value:"Angola" }
 ...etc..
] 
```

现在

```
<select ng-model="countries" ng-options="item.key as item.value for item in items"></select> 
```

仍然导致期权价值成为指数（0、1、2等）。

添加*Track By*为我修复了它：

```
<select ng-model="blah" ng-options="item.value for item in items track by item.key"></select> 
```

我认为您想将一组对象添加到选择列表中的情况更常见，所以我要记住这个！

请注意，从 AngularJS 1.4 开始，您不能再使用 ng-options，但您需要`ng-repeat`在选项标签上使用：

```
<select name="test">
   <option ng-repeat="item in items" value="{{item.key}}">{{item.value}}</option>
</select> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-09-28T10:59:01.093

这个问题已经回答了（顺便说一句，Ben 提供了非常好的和全面的答案），但我想添加另一个元素以确保完整性，这可能也非常方便。

在 Ben 建议的示例中：

```
<select ng-model="blah" ng-options="item.ID as item.Title for item in items"></select> 
```

使用了以下[ngOptions](https://docs.angularjs.org/api/ng/directive/ngOptions)表单：`select as label for value in array`.

**标签**是一个表达式，其结果将是`<option>`元素的标签。在这种情况下，您可以执行某些字符串连接，以获得更复杂的选项标签。

例子：

*   `ng-options="item.ID as item.Title + ' - ' + item.ID for item in items"`给你标签`Title - ID`
*   `ng-options="item.ID as item.Title + ' (' + item.Title.length + ')' for item in items"`为您提供标签，如`Title (X)`，其中`X`是标题字符串的长度。

您还可以使用过滤器，例如，

*   `ng-options="item.ID as item.Title + ' (' + (item.Title | uppercase) + ')' for item in items"`为您提供类似 的标签`Title (TITLE)`，其中 Title 属性的 Title 值和 TITLE 是相同的值，但转换为大写字符。
*   `ng-options="item.ID as item.Title + ' (' + (item.SomeDate | date) + ')' for item in items"`给你标签`Title (27 Sep 2015)`，如果你的模型有一个属性`SomeDate`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-09-06T05:51:47.490

在 CoffeeScript 中：

```
#directive
app.directive('select2', ->
    templateUrl: 'partials/select.html'
    restrict: 'E'
    transclude: 1
    replace: 1
    scope:
        options: '='
        model: '='
    link: (scope, el, atr)->
        el.bind 'change', ->
            console.log this.value
            scope.model = parseInt(this.value)
            console.log scope
            scope.$apply()
) 
```

```
<!-- HTML partial -->
<select>
  <option ng-repeat='o in options'
          value='{{$index}}' ng-bind='o'></option>
</select>

<!-- HTML usage -->
<select2 options='mnuOffline' model='offlinePage.toggle' ></select2>

<!-- Conclusion -->
<p>Sometimes it's much easier to create your own directive...</p> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-07-13T21:08:25.900

如果您需要为每个选项自定义标题，`ng-options`则不适用。而是使用`ng-repeat`选项：

```
<select ng-model="myVariable">
  <option ng-repeat="item in items"
          value="{{item.ID}}"
          title="Custom title: {{item.Title}} [{{item.ID}}]">
       {{item.Title}}
  </option>
</select> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-10T08:40:47.037

我希望以下内容对您有用。

```
<select class="form-control"
        ng-model="selectedOption"
        ng-options="option.name + ' (' + (option.price | currency:'USD$') + ')' for option in options">
</select> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-09T15:18:14.663

它可能很有用。绑定并不总是有效。

```
<select id="product" class="form-control" name="product" required
        ng-model="issue.productId"
        ng-change="getProductVersions()"
        ng-options="p.id as p.shortName for p in products"></select> 
```

例如，您从 REST 服务填充选项列表源模型。一个选定的值在填充列表之前是已知的，并且已设置。使用 $http 执行 REST 请求后，列表选项就完成了。

但未设置所选选项。由于未知原因，影子 $digest 执行中的 AngularJS 未按应有的方式绑定选择。我必须使用 jQuery 来设置所选内容。这很重要！AngularJS，在阴影中，将前缀添加到由 ng-repeat 选项生成的 attr“值”的值。对于 int，它是“数字：”。

```
$scope.issue.productId = productId;
function activate() {
    $http.get('/product/list')
       .then(function (response) {
           $scope.products = response.data;

           if (productId) {
               console.log("" + $("#product option").length);//for clarity
               $timeout(function () {
                   console.log("" + $("#product option").length);//for clarity
                   $('#product').val('number:'+productId);

               }, 200);
           }
       });
} 
```

# java - 是否有输出 javascript 代码的 Javacc 版本？

> ID：13047926
> 
> 赞同：4
> 
> 时间：2012-10-24T11:03:31.110
> 
> 标签：java, javascript, parsing, antlr, javacc

我正在寻找一个解析器生成器，它接受 Javacc 语法文件 (.jj) 并在 Javascript（而不是 Java）中生成解析器。这样的事情存在吗？或者，将 .jj 文件转换为 ANTLR（可以输出 Javascript）可以理解的东西会有多困难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:18:03.210

> 我正在寻找一个解析器生成器，它接受 Javacc 语法文件 (.jj) 并在 Javascript（而不是 Java）中生成解析器。这样的事情存在吗？

显然，没有。

> 或者，将 .jj 文件转换为 ANTLR（可以输出 Javascript）可以理解的东西会有多困难？

这将是非常重要的，您需要手动完成。但实际难度可能取决于您尝试转换的语法。

* * *

值得注意的是，还有其他解析器生成器在 Javascript 中输出解析器。（而且，不，我不会列出它们或推荐一个！）

显然，输入语言将不同于 Javacc 输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:11:08.797

只要只使用 JDK 的特定子集，Google 的 GWT 就会将 java 代码编译为 JavaScript。我也不确定它带来了多少特定于 GWT 的杂物。但这可能是一种可能性：使用 javacc 生成 java 代码，然后 GWT 将其转换为 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T07:48:40.837

我最近向 JavaCC 添加了对 GWT 兼容解析器目标的支持（不依赖于 Java IO 类）。我最近写了两篇关于如何使用 JavaCC 以便可以通过 GWT 生成 JavaScript 解析器的博客。下方链接：

[使用 JavaCC 和 GWT 构建 Web 解析器（我的博文）](http://consoliii.blogspot.co.uk/2014/04/creating-gwt-compatible-parser-using.html)

[JavaCC 6.1 开发构建](https://java.net/projects/javacc/sources/svn/revision/484)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T14:03:38.713

如果你不介意重写你的语法，我已经用 Kotlin 通用代码编写了一个解析器构建器，所以它可以在 JavaScript 平台上运行。

语法语法相当简单，类似于 EBNF。

您可以在此处查看详细信息，如果您想尝试一下，还有一个在浏览器中运行的演示链接。

[https://medium.com/@dr.david.h.akehurst/a-kotlin-multi-platform-parser-usable-from-a-jvm-or-javascript-59e870832a79](https://medium.com/@dr.david.h.akehurst/a-kotlin-multi-platform-parser-usable-from-a-jvm-or-javascript-59e870832a79)

# c++ - c++字符串到utf8有效字符串使用utf8proc

> ID：13047927
> 
> 赞同：3
> 
> 时间：2012-10-24T11:03:47.213
> 
> 标签：c++, string, utf-8

我有一个 std::string 输出。使用 utf8proc 我想将其转换为有效的 utf8 字符串。 [http://www.public-software-group.org/utf8proc-documentation](http://www.public-software-group.org/utf8proc-documentation)

```
typedef int int32_t;
#define ssize_t int
ssize_t utf8proc_reencode(int32_t *buffer, ssize_t length, int options)
Reencodes the sequence of unicode characters given by the pointer buffer and length as UTF-8\. The result is stored in the same memory area where the data is read. Following flags in the options field are regarded: (Documentation missing here) In case of success the length of the resulting UTF-8 string is returned, otherwise a negative error code is returned.
WARNING: The amount of free space being pointed to by buffer, has to exceed the amount of the input data by one byte, and the entries of the array pointed to by str have to be in the range of 0x0000 to 0x10FFFF, otherwise the program might crash! 
```

那么首先，我如何在最后添加一个额外的字节？那么如何从 std::string 转换为 int32_t *buffer？

这不起作用：

```
std::string g = output();
fprintf(stdout,"str: %s\n",g.c_str());
g += " ";   //add an extra byte?? 
g = utf8proc_reencode((int*)g.c_str(), g.size()-1, 0);
fprintf(stdout,"strutf8: %s\n",g.c_str()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:51:40.963

您很可能实际上并不想要`utf8proc_reencode()`-该函数采用有效的 UTF-32 缓冲区并将其转换为有效的 UTF-8 缓冲区，但是由于您说您不知道数据的编码是什么，所以您不能使用那个功能。

所以，首先你需要弄清楚你的数据实际上是什么编码。你可以使用[http://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/)来测试你是否已经有有效的 UTF-8 和`utf8::is_valid(g.begin(), g.end())`. 如果这是真的，你就完了！

如果为假，事情就会变得复杂......但 ICU ( [http://icu-project.org/](http://icu-project.org/) ) 可以帮助你；见[http://userguide.icu-project.org/conversion/detection](http://userguide.icu-project.org/conversion/detection)

一旦您稍微可靠地知道您的数据采用什么编码，ICU 可以再次帮助将其转换为 UTF-8。例如，假设您的源数据`g`采用 ISO-8859-1：

```
`UErrorCode err = U_ZERO_ERROR; // check this after every call...
// CONVERT FROM ISO-8859-1 TO UChar
UConverter *conv_from = ucnv_open("ISO-8859-1", &err);
std::vector<UChar> converted(g.size()*2); // *2 is usually more than enough
int32_t conv_len = ucnv_toUChars(conv_from, &converted[0], converted.size(), g.c_str(), g.size(), &err);
converted.resize(conv_len);
ucnv_close(conv_from);
// CONVERT FROM UChar TO UTF-8
g.resize(converted.size()*4);
UConverter *conv_u8 = ucnv_open("UTF-8", &err);
int32_t u8_len = ucnv_fromUChars(conv_u8, &g[0], g.size(), &converted[0], converted.size(), &err);
g.resize(u8_len);
ucnv_close(conv_u8);` 
```

`之后，您`g`现在持有 UTF-8 数据。`

# javascript - 如何为页面上找到的每个元素添加事件观察者？

> ID：13047933
> 
> 赞同：1
> 
> 时间：2012-10-24T11:04:01.593
> 
> 标签：javascript, prototypejs, dom-events

我正在使用 Prototype 脚本来检测 Div 下的所有选择标签，然后在每个标签上添加一个事件/观察者！

这是找到我需要的元素的代码：

```
Event.observe(window, 'load', function() {
  var tab=$("product-options-wrapper").descendants();
  var attCode=[];
  var j=0;

  for (i=0;i<tab.length;i++) {
    if (tab [i].tagName =="SELECT") {
      attCode[j++]=tab[i].id
    }
  }
}); 
```

我有我需要的所有 ID。如何为每个人添加一个观察者（更改时）？

```
$(id).on("change", function(event) {
  alert(id+"__"+$(id).value);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:35:31.197

Prototype 支持开箱即用的事件委托。[Event.on](http://api.prototypejs.org/dom/Event/on/)采用可选的第二个选择器参数。所以在你的情况下：

```
$("product-options-wrapper").on('click', 'select', function(event, element) {

  // This callback will only get fired if you've clicked on a select element that's a descendant of #product-options-wrapper
  // 'element' is the item that matched the second selector parameter, in our case, the select.

  ....

}); 
```

该参数可以是任何 CSS 选择器字符串：

```
$('my-element').on('click', '.some-class', function(event, element) { ... }); 
```

* * *

也请查看[Element.select](http://api.prototypejs.org/dom/Element/select/)。这会将原始问题中的代码压缩为基本上一行：

```
$("product-options-wrapper").select('select'); 
```

这似乎有点令人困惑，因为您的选择器字符串是“选择”（您希望所有 SELECT 元素都位于#product-options-wrapper 下）。你也可以这样做：

```
$$('#product-options-wrapper select'); 
```

它们都返回一个匹配元素的数组。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:10:02.887

应该这样做。如果您需要更多帮助，请发布您的 html 或更好的[jsfiddle 。](http://jsfiddle.net/)

```
$(function(){
    $('#product-options-wrapper select').on("change", function(e) {
       alert(id+"__"+$(this).val());
    });
}); 
```

我猜你忘记了`.`product-options-wrapper 开头的那个来表明它是一个类？或者它真的是一个标签？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:25:39.653

您只需要 div 上的单击处理程序（换句话说，使用[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)）

```
var tab = $("product-options-wrapper");
tab.on('click',function(e){
  e = e || event;
  if ( /^select$/i.test((e.target || e.srcElement || {}).tagName) ){
    //do stuff
  }
}); 
```

# javascript - 使用 Javascript 使用 Select 中的值预览图像

> ID：13047934
> 
> 赞同：1
> 
> 时间：2012-10-24T11:04:11.317
> 
> 标签：javascript, html, image, preview

在我的脚本中，我有一个选择字段：

```
<select name="src[jumpMenu]" id="jumpMenu" onchange="ChangeImage(this.value,'preview');">
    <option value="A">AStyle</option>
    <option value="B">BStyle</option>
    <option value="C">CStyle</option>
</select> 
```

我在下面得到了这个Javascript：

```
<script language="Javascript" type="text/javascript">
<!--
function ChangeImage(newimage,imageid) {
if(document.getElementById(imageid).src != newimage)
   document.getElementById(imageid).src = newimage;
}
// -->
</script> 
```

这是我的问题：

由于对其他文件的依赖性（我不会更改），我无法更改这些值。

您是否知道任何解决方案，例如如何将“A”切换为“img/src/A_top.png”并使其与此脚本一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:07:31.240

```
document.getElementById(imageid).src = "img/src/"+newimage+"_top.png"; 
```

# iphone - 从 NavigationBar 项目堆栈中删除项目

> ID：13047938
> 
> 赞同：0
> 
> 时间：2012-10-24T11:04:19.713
> 
> 标签：iphone, ios, xcode, uinavigationbar

基本我需要从 NavigationBar 项目堆栈中删除项目

更多详细信息：我有这样的视图层次结构：A -> B -> C -> B，“->”表示视图之间的分隔。我正在使用 NavigationBar 在视图之间导航。我希望当用户从视图 C 转到 B 时，会有返回按钮将用户导航到视图 A 而不是视图 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:09:35.173

您可以通过弹出到第一个视图控制器

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

如果您想弹出到 navigationController 的特定视图控制器，只需执行此操作

```
 [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] animated:YES]; 
```

这将弹出到导航控制器的第二个 viewController（如果有）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:07:37.057

似乎**A**是你`rootViewController`的`navigationBarController`。`backButton`所以你可以在**B 类**中制作你自己的，然后点击那个按钮，只写 -

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

# android - 如何在 onTouch 上仅使用 ACTION_DOWN 并允许其余的默认操作

> ID：13047939
> 
> 赞同：0
> 
> 时间：2012-10-24T11:04:19.573
> 
> 标签：android, onlongclicklistener

这里的目标是在谷歌地图上放置标记。

我想在用户执行 longClick() 时放置标记。

问题。长点击监听器没有关于用户点击位置的数据。我只能知道他真的点击了。此外，如果我使用触摸事件并且不使用它（我要求地图使用其默认监听器进行滚动），即使触摸重置，我也不会监听任何其他触摸事件。（其他事件不会发生这种情况，afaik）。

我如何知道用户在哪里进行了 longClick，以便我可以在地图中放置一个标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:16:07.973

```
public boolean onTouchEvent(MotionEvent event) {
   switch(event.getAction()) {
   case MotionEvent.ACTION_DOWN:
       dosomething
       return true; // processed the event
   default:
       return false;
   }
} 
```

这将允许您处理 ACTION_DOWN 事件，并对所有其他事件进行默认处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:46:59.473

检查这是否有助于检测长按。的`onFinish()`方法`CountdownTimer`是您需要放置代码以添加标记的位置。

它将用于检测长按，不确定它是否会覆盖`MapView`;)

```
 public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                Log.d("action down", "action down started");
                countDownTimer = new CountDownTimer(2500, 1000) {

                    @Override
                    public void onTick(long millisUntilFinished) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onFinish() {
                        // TODO Auto-generated method stub
                        Toast.makeText(getApplicationContext(),
                                "long clicked", Toast.LENGTH_SHORT).show();
                    }
                };
                countDownTimer.start();
                Log.d("action down", "action down ended");
                break;

            case MotionEvent.ACTION_UP:
                countDownTimer.cancel();
                countDownTimer = null;
                break;

            default:
                break;
            }
            return false;
        } 
```

# c# - 与 SQL Server 中的 where 子句相关的问题

> ID：13047940
> 
> 赞同：5
> 
> 时间：2012-10-24T11:04:24.527
> 
> 标签：c#, sql-server

我有一个表名学生有 (studentId, StudentName,Address,PhoneNo)

我为用户提供了一个过滤器，可以从 Combobox 中仅选择 StudentId 以获取学生的详细信息...并生成报告。

我编写了以下查询来获取学生详细信息：

```
(select * from Students where StudentId = stdId) 
```

这里 stdId 是我从代码传递的参数

`"ALL"` 如果我选择单个studentId，它工作正常......但是在用户选择Comobobox中，如果用户从组合框中选择我也提供了`All`我想显示所有学生的详细信息

`stdId`那么如果用户选择我应该传入什么`All` ？

我在 C# 中使用了内联查询（不使用 SQL 存储过程）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:08:07.460

如果用户选择全部，则传递`NULL`到`@StudentId`并将您的查询更改为：

```
select *
from Students
where (StudentId=@StudentId OR @StudentId IS NULL) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T11:16:28.367

你可以这样做。

```
SELECT * from Students s
WHERE s.studentId = ISNULL(@StudentId,s.studentId) 
```

在组合框中选择“全部”时，在 @studentid 参数中传递 null。如果您不能在参数中传递 null 则传递 -1 或任何不能包含在您的组合框选项中的内容，并像这样：（如果 -1= All）

```
 SELECT * from Students s
 WHERE s.studentId = @StudentId or @StudentId=-1 
```

你也可以试试Curt给出的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T11:08:34.743

在您的存储过程标头中，更改@StudentId 的定义，以便它可以作为NULL 传递。

```
ALTER PROCEDURE dbo.WhateverYourProcedureIsCalled( @StudentId int  = null ) 
```

然后按如下方式更改您的 WHERE 子句

...

```
SELECT * from Students
WHERE @StudentId IS NULL OR StudentId = @StudentId 
```

在您的代码中，如果传递了 ALL，则可以省略设置 @StudentId 参数值的部分。如果未通过，SQL Server 将使用默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T11:10:30.173

如果查询中包含 where 子句，您还需要提供有效的参数值，因此当包含 where 子句时，不可能获取所有学生。

您需要根据组合框中选择的值来区分您的查询。您可以执行以下操作。

```
int studentId = 0;
//Where selectedValue comes from your combobox
Int32.TryParse(selectedValue, out studentId);
var query = "select * from Students";
if (studentId > 0)
{
  query = query + " where StudentId = @StudentId";
  //Remember to add studentId as parameter value
} 
```

# jquery-ui - 禁用 jQueryUI 按钮并保持其原始布局/样式

> ID：13047942
> 
> 赞同：1
> 
> 时间：2012-10-24T11:04:30.280
> 
> 标签：jquery-ui, jquery, jquery-ui-button

如果我使用“禁用”选项禁用 jQueryUI 按钮，按钮会变暗。但我不希望它那样 - 我只希望它没有响应并以其原始布局风格 - 没有翻转，没有点击 - 一切都死了。

从按钮取消绑定按钮单击无济于事。也可以使用 unbind() 解除按钮上的所有事件的绑定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:10:20.703

事实上，您可以在禁用按钮后删除“禁用”类：

```
$( "button" ).button();

$( "button" ).button('disable');

$( "button" ).removeClass('ui-button-disabled ui-state-disabled') 
```

这是一个小提琴：http: [//jsfiddle.net/9gq9n/](http://jsfiddle.net/9gq9n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:35:13.723

好的，我终于想通了。要禁用任何 jQueryUI 按钮，包括附加标签的“按钮化”复选框（同时保留其原始布局），您必须执行以下操作：

*   解绑其事件
*   将事件与其标签解除绑定

所以，这里有一个例子：

```
$("mybuttons").unbind();
$("mybuttons").getLabels().unbind(); 
```

我正在使用我最近编写的插件（[最初](https://stackoverflow.com/questions/285522/find-html-label-associated-with-a-given-input/13047684#13047684)由 SO 成员[Gijs](https://stackoverflow.com/users/713326/gijs)编写，但并不总是有效......）

```
jQuery.fn.getLabels = function () {
    return this.map(function () {
        var parentLabels = $(this).parents('label').get();
        var associatedLabels = this.id ? associatedLabels = $("label[for='" + this.id + "']").get() : [];
        return parentLabels.concat(associatedLabels);
    });
}; 
```

希望能帮助到你。

# android - 有没有办法获得接近传感器与物体的精确距离？

> ID：13047944
> 
> 赞同：4
> 
> 时间：2012-10-24T11:04:35.117
> 
> 标签：android, android-sensors, proximity

我想获得从设备的接近传感器到活体的精确距离。

我唯一得到的是“0.0” - 用于近距离，“8.0”/“7.0”（因设备而异） - 用于远距离。

这就是我用来获取距离的方式：

```
@Override
public final void onSensorChanged(SensorEvent event)
{
    final float distanceX = event.values[0];
} 
```

有没有办法获得精确的距离？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:02:52.277

[位置传感器指南](http://developer.android.com/guide/topics/sensors/sensors_position.html#sensors-pos-prox)对接近传感器进行了以下说明：

> 大多数接近传感器返回绝对距离，以厘米为单位，但有些只返回近距和远距值。

所以精度取决于设备。

# ios - 从 LevelHelper 扩展 LHSprite

> ID：13047945
> 
> 赞同：0
> 
> 时间：2012-10-24T11:04:36.723
> 
> 标签：ios, cocos2d-iphone, extend, levelhelper

我正在尝试`LHSprite`从 LevelHelper 扩展 a ，以便可以为不同的元素添加不同的行为。

**好的，到目前为止一切都很好，但是你想要什么？**

基本上想象一组具有不同动作的角色。我希望能够定义一个`Character`扩展`LHSprite`和定义`move`方法的类。所有角色都应该扩展这个`Character`类并定义自己的动作。通过这种方式，我可以将元素添加到地图中，并且可以以相同的方式处理它们（在移动方面）。

**好的，我明白了，但是你做了什么？**

到目前为止，我已经关注了这个[关于自定义 LHSprites 的链接，](http://www.levelhelper.org/app/documentation/docs/COCOS2D_customSprite.htm)但我遇到了一个问题：我的案例与那个案例的第一个区别是我不使用 LevelHelper 添加我的元素（至少是我试图扩展的那些）。我在代码中添加了我的元素，因为我希望这些元素的随机数量位于随机位置。

所以我制作了这个创建 cop 的 init 方法（即 extends`Character`和`Character`extends `LHSprite`）。这个方法实际上看起来更像是“添加到加载器”方法，但无论如何：

```
- (id) initInLoader:(LevelHelperLoader *) loader andNumber: (int) i 
                                                     atPos: (CGPoint) pos{
    self = (Cop *) [ loader createBatchSpriteWithName:@"cop_01" 
                            fromSheet:@"copSheet" fromSHFile:@"enemies" ];

    _uniqueName = [ NSString stringWithFormat:@"Cop_%d", i + 1 ];
    [ self setUniqueName: _uniqueName];

    [ self prepareAnimationNamed:@"cop" fromSHScene:@"enemies" ];
    [ self setAnimationDelayPerUnit: 1.0f/70.0f ];

    self.position = pos;

    [ self playAnimation ];
} 
```

到目前为止，一切都很好。我可以看到我的警察站着并且生气勃勃。但是，当我尝试调用 move 方法（或任何其他方法）时，它会给我一个无法识别的选择器崩溃。

我相信这个错误是由于演员阵容而发生的，`(Cop *)`但我不知道如何超越这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:06:35.420

我发现我需要给关卡助手添加一个标签。但是，这个标签没有在源文件中更新，所以我不得不在 LevelHelperLoader.h 中手动添加它`enum LevelHelper_TAG`。

然后我必须在初始化 LevelHelper 时注册该标签

```
 [[LHCustomSpriteMgr sharedInstance] registerCustomSpriteClass:[Cop class] 
                                                        forTag:COP_TAG]; 
```

当我从加载器中获取该元素时，我必须传递该标签：

```
self = (GlowWorm *) [ loader createBatchSpriteWithName:@"cop_01" 
                                             fromSheet:@"copSheet" 
                                            fromSHFile:@"enemies" 
                                                   tag: COP_TAG]; 
```

**编辑**

*回答对问题提出新答案的用户*

在初始化 LevelHelper 之前，不要忘记告诉 LevelHelper 的新类。你可以用这条线做到这一点：

```
[[LHCustomSpriteMgr sharedInstance] registerCustomSpriteClass:[Cop class] 
                                                       forTag: COP_TAG ]; 
```

# django - 使用 i118n 查找键 [LANGUAGES] 时出错

> ID：13047967
> 
> 赞同：1
> 
> 时间：2012-10-24T11:05:51.537
> 
> 标签：django, internationalization

我很难让 i118 工作。调用我的 html 时，我得到：

```
Failed lookup for key [LANGUAGES] in u"[{'projects': [<Project: etwas>]}]" 
```

这是我的工作流程：

```
#setting.py
LANGUAGE_CODE = 'de'

ugettext = lambda s: s

LANGUAGES = (
   ('de', ugettext('German')),
   ('en', ugettext('English')),
   ('pt', ugettext('Portuges')),
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    #...

TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (
    'django.core.context_processors.i18n',
)

#base.html
{% load i18n %}
<html>
<body>
<form action="/i18n/setlang/" method="post"> 
{% csrf_token %}
<input name="next" type="hidden" value="next/page" /> 
<select name="language"> 
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
    <option value="{{ language.code }}">{{ language.name_local }}  ({{ language.code }})</option>
{% endfor %}

#projects.html
{% extends 'base.html' %}
{% load i18n %} 
{% block content %}
{% for p in projects %}
    <h1>{{ p.title_en }}</h1>
    <p>{{ p.body_de }} </p>
    <p>{{ p.body_pt }} </p>
    <hr>    
{% endfor %}
{% endblock %} 
```

我错过了什么？我在网上找不到有关错误消息的任何有用信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:25:58.860

看起来您没有使用[RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:26:00.457

似乎`'django.core.context_processors.i18n'`没有正确调用。

这可能是因为您的视图`django.shorcuts.render_to_response`没有使用`context_instance=template.RequestContext(request)`.

一个解决方案是切换到[`django.shortcuts.render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render).

# ruby-on-rails - 不明白变量声明、符号、方法、实例变量、类变量的区别

> ID：13047969
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:05:58.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

根据帖子建议更新了这篇文章：rails 中不一致的命名约定让我很困惑。似乎语法在铁路中无处不在......

**这里有些例子：**

为什么下面的迁移中有逗号？为什么关键字“default”前面没有冒号？这个默认关键字是什么？一个方法，或一个变量，一个符号.. 那该死的东西是什么？？：

```
add_column :zombies, :rotting, :boolean, default: false 
```

**这是另一个例子：**

为什么年龄不 :age （带冒号）？**为什么在它之前用“ ：** ”调用make_rotting ？

```
 class Zombie < ActiveRecord::Base
       before_save :make_rotting

   def make_rotting
      if age > 20
         self.rotting = true
      end
    end
 end 
```

我是一个 Java 人，是的，Java 很冗长，但至少它是一致的，我想回去:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:13:22.793

我同意，Ruby 和 Rails 一开始可能会很混乱。

如果您提供代码示例，我认为您会得到更好的答案。因为您是初学者，您可能`variable`对方法或`:value`键/符号有误解。

我可以帮助你的一件事是：

`variable: :value`实际上是

`key: :value`（`:value`符号在哪里）

Ruby 的新哈希语法曾经是：

`:key => :value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:30:06.167

首先有不同类型的变量：

1.局部变量

```
foobar 
```

2.实例变量

```
@foobar 
```

3.类变量

```
@@foobar 
```

4.全局变量

```
$foobar 
```

您可以通过它们的使用方式简单地区分它们。

现在如果谈论模型的属性，可以声明为

```
property :foobar, :type => FIXNUM 
```

现在`validate`和`validates`两者都不一样

```
validates :foobar ,:numerically => {:greater_than_or_equal_to => 0} 
```

where`validates`用于验证属性。

```
validate :method_name 
```

在哪里`validate`验证某些方法

# sql - SQL Join 设置值从 table2 到 table1，其中 id 相同

> ID：13047972
> 
> 赞同：0
> 
> 时间：2012-10-24T11:06:02.880
> 
> 标签：sql, join, sql-server-2008-r2

我有下表

```
+-----+------+
| sID | name |
+-----+------+
|   2 | MXX  |
|   3 | ISS  |
|   4 | FSS  |
|   5 | SSA  |
|   6 | PSA  |
+-----+------+ 
```

和下表

```
+-----+-------+
| sID | pname | 
+-----+-------+
|   1 | qqq   |      
|   1 | yyy   |         
|   2 | zzz   |
|   1 | lll   |
|   2 | mmm   | 
|   3 | ttt   |
|   3 | sss   |
|   5 | xxx   |
|   5 | iii   |
+-----+-------+ 
```

并且连接结果应该看起来像

```
+-----+-------+----------+
| sID | pname | supplier |
+-----+-------+----------+
|   1 | qqq   |          |
|   1 | yyy   |          |
|   2 | zzz   | MXX      |
|   1 | lll   |          |
|   2 | mmm   | MXX      |
|   3 | ttt   | ISS      |
|   3 | sss   | ISS      |
|   5 | xxx   | SSA      |
|   5 | iii   | SSA      |
+-----+-------+----------+ 
```

想法是将第一个表中的列值放在`name`第二个表中`sID`相同的位置

我试过`Select * From TABLE1 c LEFT join TABLE2 T on c.sID=T.sID`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:09:09.807

你的左连接是错误的方式。

```
 select table2.sid, pname, table1.name as supplier 
 from table2  
    left join table1 on table2.sid = table1.sid 
```

或将您的更改`left join`为`right join`

# google-analytics - 时事通讯注册的事件跟踪

> ID：13047975
> 
> 赞同：0
> 
> 时间：2012-10-24T11:06:24.667
> 
> 标签：google-analytics, event-tracking

我想跟踪有多少人注册了时事通讯。我可以通过 Google Analytics 中的事件跟踪来做到这一点。但是有一个问题。我在按钮上找到了以下代码

```
<form name="ccoptin" action="http://visitor.r20.constantcontact.com/d.jsp" target="_blank" method="post" onsubmit="return SubscribeValidate()"> 
```

然后我必须放置以下代码

```
onClick="_gaq.push(['_trackEvent', 'newsletter signup', 'email', 'Sidebar',, false]);" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:09:36.020

onClick 正在跟踪按钮。对于表单，将代码添加到成功的“验证”功能和/或“谢谢”页面上。

```
var SubscribeValidate = function () {
  // Make sure the form is filled out
  if ($("#email").text() != "") {
    return false;
  }

  // Track in Google Analytics
  _gaq.push(['_trackEvent', 'newsletter signup', 'email', 'Sidebar', , false]);

  window.location = "/thanks"; // or $("#modal").modal();
} 
```

# list - Sencha touch 2 向嵌套列表添加数据

> ID：13047980
> 
> 赞同：0
> 
> 时间：2012-10-24T11:06:36.877
> 
> 标签：list, sencha-touch, sencha-touch-2

我有一个嵌套列表的视图，我想知道如何将我的数据添加到嵌套列表中。

```
Ext.define('app.view.myview', {
extend: 'Ext.Panel',

config: {
    layout: 'vbox',
    fullscreen: true,
    items: [
        {
            xtype: 'horizontallistview',
            id: 'oldotheruserhorizontallistview',
            data: **this.data.otheruser.cards**,
            flex: 1,
        },
        {
            xtype: 'horizontallistview',
            data: **this.data.thisuser.cards**,
            flex: 1,
        }
    ],

}}); 
```

我的商店是这样的：

```
data: [
        {
            id : 20001,
            thisuser: {
                cards: [
                    {
                        typeid: 5,
                        quantity:12,
                    },
                    {
                        typeid: 5,
                        quantity:12,
                    },
                    {
                        typeid: 5,
                        quantity:12,
                    },
                ]
            },
            otheruser: {
                cards: [
                    {
                        typeid: 5,
                        quantity:12,
                    },
                    {
                        typeid: 5,
                        quantity:12,
                    },
                    {
                        typeid: 5,
                        quantity:12,
                    },
                ]
            },
        },] 
```

它是如何工作的？就像我现在的“data.this.data.otheruser.cards”不起作用。

# wcf - 如何捕获 WCF 服务端点

> ID：13047989
> 
> 赞同：3
> 
> 时间：2012-10-24T11:07:13.813
> 
> 标签：wcf, configuration, impersonation, capture, endpoint

我正在实现一个由 IIS 托管的 WCF 服务，它模拟调用者。当我在 Web.config 文件中有服务端点配置时，一切都按预期工作。

我想以编程方式设置服务端点，但我遗漏了一些东西，因为调用者没有被模拟（端点工作正常，除了那个小细节）。有什么方法可以捕获从 web.config 代码中创建的服务端点，以便在调试时我可以找到这个和我以编程方式创建的有什么区别？

谢谢，

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:51:39.240

您可以使用默认服务主机工厂从代码中的 web.config 访问端点（并可能将调试器附加到 IIS 进程以查看它包含的内容）。

```
 public class MyServiceHostFactory : ServiceHostFactory
    {
        protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {
            return new MyServiceHost(serviceType, baseAddresses);
        }
    }

    public class MyServiceHost : ServiceHost
    {
        public MyServiceHost(Type serviceType, Uri[] baseAddresses)
            : base(serviceType, baseAddresses)
        {
        }

        protected override void OnOpening()
        {
            // At this point you have access to the endpoint descriptions
            foreach (var endpoint in this.Description.Endpoints)
            {
                Console.WriteLine("Endpoint at {0}", endpoint.Address.Uri);
                Binding binding = endpoint.Binding;
                BindingElementCollection elements = binding.CreateBindingElements();
                foreach (var element in elements)
                {
                    Console.WriteLine("  {0}", element);
                }
            }

            base.OnOpening();
        }
    } 
```

并在 .svc 文件中指定`Factory="YourNamespace.MyServiceHostFactory"`属性。

# c# - 如何从 Windows 服务关闭远程计算机

> ID：13047991
> 
> 赞同：0
> 
> 时间：2012-10-24T11:07:14.583
> 
> 标签：c#, windows, windows-services

我正在尝试从另一台 Windows 计算机上运行的 Windows 服务关闭网络中的 Windows 计算机。

在控制台中，我可以这样做：

```
net use \\ComputerName Password /u:User
shutdown /s /t 0 /m \\ComputerName 
```

但是当我尝试从我的 Windows 服务中执行此操作时：

```
Process.Start("net", "use \\ComputerName Password /u:User");
Process.Start("shutdown", "/s /t 0 /m \\ComputerName"); 
```

没发生什么事。

我知道存在权限问题，因为我的服务在 LocalSystem 帐户上运行，但我尝试将其更改为我的本地用户，但仍然无法正常工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:12:53.807

对于它的价值，您可以使用记录在案的 WMI [Win32_OperatingSystem/Win32Shutdown 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394058%28v=vs.85%29.aspx)以编程方式执行此操作。

链接的文章还包含有关如何从 C++ 使用 WMI 的示例链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:12:10.903

如果您使用`Process.Start`，则在单独的会话中调用每个命令。相反，您需要为命令提示符启动一个进程，并通过同一会话调用这两个命令。`cmd /?`是你的朋友。

```
cmd /c [commands] 
```

...可以将命令与`&`or链接起来`;`。

# ruby-on-rails - 根据 newrelic 统计，Rails 视图呈现缓慢

> ID：13047992
> 
> 赞同：1
> 
> 时间：2012-10-24T11:07:15.973
> 
> 标签：ruby-on-rails, performance, views, newrelic

我看到 Rails 视图渲染存在性能问题。根据Newrelic Stats：

![新遗物统计](../Images/6010076454545c02ed6f05478ec434dd.png)

这种缓慢的渲染在请求期间*随机*出现。

*   此问题是否与从文件系统读取文件速度慢有关？
*   有没有办法在较低级别进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:12:08.437

（免责声明：我不确定我是否正确解释了该屏幕截图中发生的事情）

您的视图渲染似乎很慢，不是因为它运行的 Ruby 代码（需要 0.219 秒），而是因为它执行了 8 个 SQL 查询，每个查询需要一秒钟。您可能只需要优化这些查询（例如返回更少的结果、向表中添加索引等）。

# android - 是否有任何 Android 版本的 R（无需 root 设备）？

> ID：13047994
> 
> 赞同：17
> 
> 时间：2012-10-24T11:07:23.703
> 
> 标签：android, r

是否有适用于 android 平台的[R](http://www.r-project.org/)`.apk`版本/等效版本，特别是文件？

如果没有，如何从[源代码](http://cran.r-project.org/sources.html)构建它而不使设备*生根*？

（R 是用于统计计算和图形的免费软件环境。它可以在各种 UNIX 平台、Windows 和 MacOS 上编译和运行。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-06T14:38:25.050

我会为这个已经有点过时的问题添加一个答案，因为事情在过去一年左右发生了一些变化。

您可以使用可从 Google Play 获得的 GNURoot 软件在 Android 设备上本地安装 R。尽管它的名字，GNURoot 不需要生根设备。[我在我的博客http://www.r-ohjelmointi.org/?p=1434](http://www.r-ohjelmointi.org/?p=1434)中详细介绍了安装过程。

您还可以通过浏览器使用R-Fiddle ( [http://www.r-fiddle.org/](http://www.r-fiddle.org/) )，如果您可以在旅途中连接到 WLAN，那么它可能也值得测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T05:16:50.063

RStudio 服务器是一种可能性，您可以从平板电脑上使用它 - [http://goo.gl/PAEvR](http://goo.gl/PAEvR)

# c++ - 使用仪器分析在 iOS 设备上运行的 C++ 代码

> ID：13047997
> 
> 赞同：1
> 
> 时间：2012-10-24T11:07:29.847
> 
> 标签：c++, ios, profiling, instruments

我正在尝试使用仪器分析在设备上运行的一些信号处理代码。代码是用 C++ 编写的。下面是几秒钟的输出数据分析。. .

![在此处输入图像描述](../Images/6ebc84e3cee3af6c77a37811488bcf52.png)

很明显，对 powf 的调用占用了大部分 CPU 时间，但是，我找不到如何确定对 powf 的哪些调用是我的代码中最大的问题。我发誓，当我以前使用 Shark 时，在源中获取呼叫的行号真的很容易。我能从仪器中得到的只是机器代码的废话。

展开`powf`三角形得到以下结果。. . .

![在此处输入图像描述](../Images/b510833cc8269e1af9ae74b3708c25d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:10:57.283

看起来包含调用的代码`powf`是您传递给 CoreAudio 的回调函数的一部分。Instruments 似乎无法符号化回调的调用链，因此您只是在代码中看到原始地址。可以使用合适的工具识别这些地址（*例如*`otool`，或类似的），但从长远来看，更好的策略是实现一个测试工具，该工具使用虚拟数据在循环中调用您的回调代码 - 当您将它用于未来的调试和分析活动时，这很可能会得到回报。请注意，为方便起见，您可以将测试工具构建为 Mac OS X 可执行文件以进行分析/调试，因为两个平台上的错误和性能瓶颈很可能相似，至少初步近似。