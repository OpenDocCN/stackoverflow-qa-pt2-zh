# StackOverflow 问答 13982000-13982999

# asp.net-mvc - ASP.NET Razor MVC 中复杂数据类型的 DisplayName 属性

> ID：13982000
> 
> 赞同：2
> 
> 时间：2012-12-20T23:10:41.577
> 
> 标签：asp.net-mvc, razor, attributes

我有一个非常简单的要求。在 MVC4 项目中，我必须显示一个带有 @HTML.labelFor 字段的表单，该字段从 viewmodel 类的属性的属性字段中派生值。它适用于简单的属性，例如员工代码，但它不适用于人员类的自定义数据类型。

```
namespace MvcApplication1.Models
{
  public class EmployeeViewModel
  {
    [Display(Name = "Employee Code:")]
    public string EmpCode { get; set; }

    public person PersonInfo { get; set; }

    [Display(Name = "Department Name:")]    
    public string Department { get; set; }
  }
}

namespace MvcApplication1.Models
{
  public class Person
  {
    [Display(Name = "First Name:")]
    public string FName { get; set; }

    [Display(Name = "Last Name:")]
    public string LName { get; set; }
  }
} 
```

`@Html.LabelFor(m => Model.EmpCode)`将标签正确显示为员工代码：

`@Html.LabelFor(m => Model.PersonInfo.FName)`将标签错误地显示为 FName：

`@Html.LabelFor(m => Model.PersonInfo.LName)`将标签错误地显示为 LName：

`@Html.LabelFor(m => Model.PersonInfo.Department)`将标签正确显示为部门名称：

我试图弄清楚如何显示对象类型属性的属性信息。我有使用扩展方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:27:10.837

您使用了错误的属性。下面这个简单的例子有效。

**控制器：**

```
public ActionResult Index()
{
    var model = new ParentModel {
        Name = "Parent name", 
        Child = new ChildModel {
            Name = "Child name"
        }
    };

    return View(model);
} 
```

**楷模：**

```
public class ParentModel
    {
        [DisplayName("Parent name:")]
        public string Name { get; set; }
        public ChildModel Child { get; set; }
    }

    public class ChildModel
    {
        [DisplayName("Child name:")]
        public string Name { get; set; }
    } 
```

**看法：**

```
@model ParentModel

@Html.LabelFor(model => model.Name)
@Html.LabelFor(model => model.Child.Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:26:31.813

你的人属性是空的吗？

尝试添加一个默认构造函数`EmployeeViewModel`并添加

```
PersonInfo = new Person(); 
```

# heroku - Heroku：进程已暂时禁用

> ID：13982002
> 
> 赞同：2
> 
> 时间：2012-12-20T23:10:55.673
> 
> 标签：heroku

运行时`heroku ps`或`heroku run {anything}`我收到错误：

！进程已暂时禁用。

尝试从合作者或所有者处运行会导致相同的问题。我有一张 Heroku 的故障单，但没有任何回应。他们的状态应用程序说现在一切都很好。我可以控制台进入我帐户中的其他应用程序，但不是这个。

怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:24:29.057

来自 heroku：“这是由于前一段时间在共享数据库迁移期间在您的应用程序上放置了一个锁引起的；在绝大多数情况下，这个锁在迁移完成时会自动删除，但似乎有一小部分应用程序没有去掉这个标志。”

# android - 如何知道 EditText 的高度？

> ID：13982014
> 
> 赞同：1
> 
> 时间：2012-12-20T23:12:26.447
> 
> 标签：android, android-edittext

我想根据 EditText 的高度做一些事情。我怎么知道 EditText 的高度？我的代码如下所示。

```
<EditText  
    android:id="@+id/edit"  
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="true"       
/>

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);
    EditText edit = (EditText) findViewById(R.id.edit);
    edit.setTextSize(20);       
    edit.setText("Hello, world");
    int height = edit.getHeight(); // this returns 0
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T23:16:01.850

这是一个快速的答案：请谷歌。

你可以试试这个：以及

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    EditText edit = (EditText) findViewById(R.id.edit);
    edit.setTextSize(20);       
    edit.setText("Hello, world");       
    edit.measure(0, 0);
    int height = edit.getMeasuredHeight();
} 
```

# smalltalk - 带有双屏幕的 Pharo / Squeak 环境

> ID：13982018
> 
> 赞同：6
> 
> 时间：2012-12-20T23:12:59.193
> 
> 标签：smalltalk, pharo, squeak, visualworks

我只是想知道是否有一种方法可以在 Pharo 或 Squeak 中使用多个屏幕。我只是从 VisualWorks 切换到 Pharo，我真的很想念这个功能。我习惯于将我的工作区/成绩单放在一个上，而将我的浏览器放在另一个上。

谢谢， 亨里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T21:37:16.227

从 2005 年左右开始，Squeak 就开始支持多窗口的基础知识。它只需要花费数年时间要求这种能力的人之一，并向我们保证，制造/找到时间和精力去做更高级别的工作是至关重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:10:58.387

好的，所以现在的答案是：

要在多个屏幕上使用 Pharo/Squeak：

*   将主窗口跨越它们两个；
*   或启动多个图像。

现在没有将变形作为单独窗口的选项可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-19T22:55:13.107

您现在可以使用[GToolkit](https://gtoolkit.com)。Pharo 的新 Gtk 后端也支持它

# git - 运行 Pub 安装遇到错误？

> ID：13982021
> 
> 赞同：0
> 
> 时间：2012-12-20T23:13:18.463
> 
> 标签：git, dart, dart-editor

![pubinstall 问题的屏幕截图](../Images/71058e3ae8ce44bc1f4eb4cd00c33cf8.png)

下面给出的是我在 pub 安装过程中突然开始面临的问题。

请帮助我，因为我需要更新依赖项以确保应用程序开始使用我的 sql。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:06:19.243

它看起来像 corobot-web 的问题。看起来不是酒吧的错：-/

# css - 鼠标悬停在列表项上晃动

> ID：13982023
> 
> 赞同：2
> 
> 时间：2012-12-20T23:13:30.217
> 
> 标签：css, positioning, margin, padding

**[当我将鼠标悬停在此处](http://jsfiddle.net/32pFM/1/)**的列表项上时，如何防止晃动？到目前为止，我已经尝试了不同的边距和填充。我还检查了哪个 css 元素溢出，但找不到任何结果。

我的CSS在这里：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
    background:#000000;
    color:#fff;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}

.temizle{clear:both;}

#containerANA{
    width:1100px;
    height:auto;
    margin: 0 auto;
    font:10px arial, helvetica, Geneva, sans-serif;

}

#content{
    width:100%;
    margin-top:0px;
}

#content p{
  position: relative;
  margin-left:auto;
  margin-right:auto;
  top:0px;
  display: block;
  padding: 5px;    
  color: #769B4E;
  font-size:18px;
  font-family: arial, helvetica, Geneva, sans-serif;
  text-align:justify;   
  border: 0px solid #769B4E;
  margin-top: 10px;
  margin-bottom: 10px;
}

#content p a{
    color:#ccc;
    text-decoration:none;
}

#content p a:hover{
    background:#e5da5f;
    color:#000;
}

.ikinciSol{
    width:550px;
    height:auto;
    float:left;
    margin-right:0px;
    font-family:Verdana, Geneva, sans-serif;
    text-align:left;
}

.ikinciSol h1{
    font-weight:bold;
    text-decoration:none;
    font-size:14px;
    font-family:Verdana, Geneva, sans-serif;
    color:#fb891a;
}

.ikinciSol ul
{
    list-style-type: none;

}

.ikinciSol #playlist li {
    margin-left:50px;
}

.ikinciSol ul li .singer{
    font-size:18px;
    display:inline;
}

.ikinciSol ul li .song{
    font-size:14px;
    display:inline;
}

.ikinciSol ul li a{
    text-decoration:none;
    color:#fff;
    margin-right:5px;

}

.ikinciSol ul li .singer a:hover{
    background:#e5da5f;
    color:#000;
}

.ikinciSol ul li  .song a:hover{
    background:#FF9966;
    color:#000;
}

.artist_track{
    margin-right:12px;

}
.fav{

}    

.ilgiliOge{
    width:402px;
    height:306px;
    font-size:24px;
    padding:0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:26:18.850

问题是当您悬停鼠标时，`<li>`由于共享按钮，高度会发生变化。为了防止这种情况发生，你应该给`min-height`列表项一个。最重要的是，如果您想让文本相对于您的按钮居中，您还应该对其进行`line-height`一些调整。

CSS 代码：

```
.ikinciSol #playlist li {
    min-height:40px;
    line-height:40px;
}
.ikinciSol #playlist li .fav a {
    position:relative;
    top:5px;
} 
```

JSFiddle 链接：http: [//jsfiddle.net/vZnFF/](http://jsfiddle.net/vZnFF/)

PS：您不应该在列表项之间添加中断。PS2：你可以用 CSS 做同样的 :hover 效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:20:27.260

您需要让社交媒体图标等于或小于`<li>`.

[http://jsfiddle.net/32pFM/3/](http://jsfiddle.net/32pFM/3/)

```
.fav img{
    height: 16px;
} 
```

注意：这只是一种选择，您还可以设置列表元素的高度。你得到跳跃的原因是由于隐藏/显示大于包含元素高度的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:20:34.343

通过使用边距，您走在了正确的道路上，但它们没有任何效果，因为您将 .singer 类设置为“内联”。将其更改为“inline-block”，然后使用margin-top，您可以实现您想要做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T23:23:25.167

问题是 Facebook 和 twitter 图标的高度。您可能想要制作更小的图像或为图像设置高度：

```
.fav img{
    height: 1em;
} 
```

[http://jsfiddle.net/nivas/tuUhX/1/](http://jsfiddle.net/nivas/tuUhX/1/)

# facebook-graph-api - 将 API 调用电子邮件存储在变量中

> ID：13982025
> 
> 赞同：1
> 
> 时间：2012-12-20T23:13:44.560
> 
> 标签：facebook-graph-api, scope, user-permissions

我无法将用户的电子邮件地址存储在 javascript 的变量中。我要做的是调用 API，获取电子邮件地址，并将其存储在“电子邮件”变量中，以用于屏幕上的其他功能。

我的代码如下所示：

```
function emailCheck(){
    var email;
    FB.api('/me',email = function(response){
        return response.email;
        })
    }

    alert(email); 
```

我确实检查以确保我拥有适当的权限。我会放入`alert(response.email)`我的回复部分，它会通过正确的电子邮件发出警报。问题是我无法在函数**之外访问电子邮件变量。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:54:42.823

您需要使用延续，因为所有 API 方法都是异步的

```
function emailCheck(continuation){
  FB.api('/me', function(response){
    continuation(response && response.email);
  });
}

emailCheck(function(email) {
  alert(email);
} 
```

另一种方法是使用 Promises、Futures 或 deferreds（实际上是一样的）来抽象其中的一部分。

# java - 将文本文件写入 Jar

> ID：13982026
> 
> 赞同：0
> 
> 时间：2012-12-20T23:13:51.183
> 
> 标签：java, jar, resources

我正在编写一个“构建”另一个程序。我计划将设置保存在生成​​的 jar 文件中，但是在写入外部 jar 时遇到了一些问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:17:34.227

jar 只是一个 zip 文件，因此您只需压缩文件并使用 .jar 扩展名命名 zip。

一个方便的创建 jar 档案的库是[Shrinkwrap](http://www.jboss.org/shrinkwrap)，它允许您使用 Java API 将类、资源等放入 jar 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:20:15.913

更好的解决方案是创建第二个 jar，并编写您自己的 ClassLoader 以从该 jar 加载类。一种插件机制。

# android - Android OpenGL 库 + 编写opengl图形的软件，实际使用

> ID：13982028
> 
> 赞同：1
> 
> 时间：2012-12-20T23:13:53.513
> 
> 标签：android, opengl-es, generator

我想在 Android 游戏上使用 OpenGL 图形并阅读一些基础教程文章。我认为手工准备 OpenGL 代码是非常困难、漫长和耗时的。实际准备OpenGL代码的实用方法是什么。是否有任何编辑器可以生成 OpenGL 对象代码或任何可以帮助生成 OpenGL 代码的软件？公司如何准备 OpenGL 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:54:58.887

快速响应：与谷歌一起研究“android 3d 引擎”，然后选择满足您需求的那个。

从开源的角度来看，使用任何开放的图形库（#andengine #libgdx #shadingzen...）作为主要框架，这样您就不需要编写很多复杂的 OpenGL 代码。要创建 3D 网格，您可以使用支持多种导出格式的#Blender，您甚至可以用 python 编写自己的。有很多关于如何在 OpenGL 中使用 Wavefront (.obj) 对象的示例（例如[https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/核心/形状/OBJMesh.java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/shapes/OBJMesh.java)）。

没有您想象的 OpenGL 代码生成工具。OpenGL 是一个 API，它允许您管理不足以显示对象的 GPU 驱动程序状态，您还需要编写自己的 3d 引擎（即使它非常简单）或使用任何已经制作的引擎。

再次，做一些研究，找到满足您需求的工作流程和引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T08:37:20.717

对于图形编程的新手来说，OpenGL 非常难学。如果您对 Java 感到满意，那么我建议您查看 LibGDX。Libgdx 或实际上任何其他游戏引擎的工作方式是，它们通过围绕 OpenGL 程序编写包装器来隐藏 OpenGL 编程的困难。因此，如果您对 Java 等高级语言感到满意，那么在 Libgdx 中工作会容易得多。然后你就可以开始你的游戏了。

我推荐 Libgdx 的原因显然很简单，

A) 从外面我发现他们有一个非常活跃的论坛和大量的测试代码、演示。

B）从免费开源的角度来看，来自 Libgdx 的粒子编辑器也很特别。

C）在桌面验证输出的能力是非常特殊的，它节省了大量的时间。

看起来 AND 引擎或 cocos2d 其他免费开源引擎不再像以前那样活跃。可能他们在 Zynga ville 玩得很开心 :)

# android - 直到 RemoteView 更新后，Android 小部件才会响应点击

> ID：13982034
> 
> 赞同：0
> 
> 时间：2012-12-20T23:14:24.853
> 
> 标签：android, asynchronous, widget, remoteview, android-launcher

我有一个 android 应用程序小部件，它在首次启动时从 Internet 获取一些信息。

更准确地说，它启动了一个异步执行网络调用的服务。在该网络调用结束时，在 UI 线程中，它使用新信息更新小部件的远程视图。

触摸小部件的特定部分会加载一个活动，该活动会检查网络调用是否存储了任何内容，但这是基于网络调用响应大小的条件语句，如果该对象不包含正确的内容，那么它将不要加载那个。

我的问题是触摸小部件似乎不会加载活动，直到异步网络调用完成。这对我来说并不重要，因为那是一个单独的线程。

似乎从来没有这样的情况，我的活动甚至可以检查空对象的条件。相反，我触摸了小部件，它似乎被放入队列中，因此当网络调用完成时，它会加载我的活动并显示有关该网络调用的信息。

为什么会这样？这与我如何更新我的 remoteView 有关吗？`onUpdate`我的视图在小部件的方法中首次放置在启动器屏幕上时就有监听器。谢谢

# c# - 使用 linq to xml 获取特定值

> ID：13982035
> 
> 赞同：2
> 
> 时间：2012-12-20T23:14:31.067
> 
> 标签：c#, xml, linq, linq-to-xml

我正在开发 Windows 8 Metro 应用程序，我需要从 XML 文件中获取一些信息。我用 LINQ to XML 解析它，但我遇到了问题。这是 XML：

```
<feed xmlns="http://www.allocine.net/v6/ns/">
  <page>1</page>
  <count>1</count>
  <results type="movie">10</results>
  <results type="person">0</results>
  <totalResults>10</totalResults>
  <movie code="61282">
    <originalTitle>Avatar</originalTitle>
    <title>Avatar</title>
    <productionYear>2009</productionYear>
    <release>
      <releaseDate>2010-09-01</releaseDate>
    </release>
    <castingShort>
      <directors>James Cameron</directors>
      <actors>Sam Worthington, Zoe Saldana, Sigourney Weaver, Stephen Lang, Michelle Rodriguez</actors>
    </castingShort>
    <statistics>
      <pressRating>4.33333</pressRating>
      <userRating>4.31338</userRating>
    </statistics>
    <poster path="/medias/nmedia/18/78/95/70/19485155.jpg" 
            href="http://images.allocine.fr/medias/nmedia/18/78/95/70/19485155.jpg"/>
    <linkList>
      <link rel="aco:web" 
            href="http://www.allocine.fr/film/fichefilm_gen_cfilm=61282.html"/>
    </linkList>
  </movie>
</feed> 
```

我需要获取“电影”节点的“代码”值和节点“链接”的“href”值，但我尝试的所有事情都失败了......

您可以认为 XML 的开头是`<movie>`因为我获取了文件并对其进行了解析以保持 XML 的整洁。我的文件以`<movie code="">`

对于像“演员”这样的经典价值，我这样做：

```
Actors = (string)query.Element("castingShort").Element("actors") 
```

它运行良好！我的问题是带有名称的特定值。

编辑 ：

这就是我对你的建议所做的。

```
 var group1 = new SampleDataGroup("Group-1", "Films", "", "Assets/icone_groupe_all_movies.jpg", "Films sur le DD");
        movieName = "avatar";
        Uri = "http://api.allocine.fr/rest/v3/search?partner=YW5kcm9pZC12M3M&filter=movie,person&count=1&page=1&q=" + movieName + "&format=xml";
        var httpResponse = await new HttpClient().GetAsync(Uri);
        string sourceCode = get_new_xml(await httpResponse.Content.ReadAsStringAsync());
        XDocument doc = XDocument.Parse(sourceCode);
        XNamespace ns = "http://www.allocine.net/v6/ns/";
        XElement movie = doc.Root.Element(ns + "movie");
        XElement castingShort = movie.Element(ns + "castingShort");
        XElement statistics = movie.Element(ns + "statistics");
        Data data = new Data
        {
            MovieCode = (string)movie.Attribute("code"),
            OriginalTitle = (string)movie.Element(ns + "originalTitle"),
            Title = (string)movie.Element(ns + "title"),
            ProductionYear = (string)movie.Element(ns + "productionYear"),
            Directors = (string)castingShort.Element(ns + "directors"),
            Actors = (string)castingShort.Element(ns + "actors"),
            PressRating = (string)statistics.Element(ns + "pressRating"),
            UserRating = (string)statistics.Element(ns + "userRating"),
            Cover = (string)movie.Element(ns + "linkList").Element(ns + "link").Attribute("href")
        };
        group1.Items.Add(new SampleDataItem("Group-1-Item-1", data.Title, data.Cover, data.ProductionYear, "", data.ReleaseDate, group1));
        this.AllGroups.Add(group1); 
```

但不幸的是它仍然没有工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:24:55.323

因此，您在 xml 中声明了命名空间，您应该声明并初始化一个 XNamespace 对象，并在指定 XName 对象（元素方法的参数）时使用它：

```
XDocument xdoc = XDocument.Load(path_to_xml);
XNamespace ns =  "http://www.allocine.net/v6/ns/";
XElement movie = xdoc.Root.Element(ns + "movie");
var code = (int)movie.Attribute("code");
var href = (string)movie.Element(ns + "linkList")
                        .Element(ns + "link").Attribute("href"); 
```

* * *

如果您只有一个`<movie>`元素，那么您不需要对电影元素序列进行操作并将单个电影视为列表。只需获取`movie`节点并通过解析该节点创建新的数据对象：

```
XNamespace ns =  "http://www.allocine.net/v6/ns/";
XElement movie = xdoc.Root.Element(ns + "movie");
XElement castingShort = movie.Element(ns + "castingShort");
XElement statistics = movie.Element(ns + "statistics");
Data data = new Data
{
    MovieCode = (int)movie.Attribute("code"),
    OriginalTitle = (string)movie.Element(ns + "originalTitle"),
    Title = (string)movie.Element(ns + "title"),
    ProductionYear = (string)movie.Element(ns + "productionYear"),
    Directors = (string)castingShort.Element(ns + "directors"),
    Actors = (string)castingShort.Element(ns + "actors"),
    PressRating = (string)statistics.Element(ns + "pressRating"),
    UserRating = (string)statistics.Element(ns + "userRating"),
    Cover = (string)movie.Element(ns + "linkList")
                         .Element(ns + "link").Attribute("href") 
}; 
```

# wordpress - 论文框架和自定义帖子类型

> ID：13982036
> 
> 赞同：1
> 
> 时间：2012-12-20T23:14:39.620
> 
> 标签：wordpress, custom-post-type, wordpress-thesis-theme

第一次在论文中创建/实现自定义帖子类型，而不是第一次使用自定义帖子类型。

我使用 Reed Write 插件来创建自定义帖子类型。该网站使用的是论文 1.8.5。

在下一页 (http://www.snyderleadership.com/press-releases/) 上，我将主要内容与自定义帖子类型的内容一起放入其中。

我使用 custom_functions.php 文件创建了一个自定义页面模板，并为自定义帖子类型的内容调用了 db。这是我的代码：

```
/* CUSTOM PRESS RELEASE TEMPLATE - ADDED by BRETT ATKIN */

function press_releases_page() {
if (is_page('press-releases') || is_page('583')) { ?>

<div id="content">
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="post_box">
    <div class="headline_area"><h1><?php the_title(); ?></h1></div>
    <div class="format_text">
    <?php the_content(); ?>
    <?php endwhile; ?>
    <?php endif ?>
    <?php
        $original_query = $wp_query;
        $wp_query = null;

        $args = array (
        'post_type' => 'press-release',
        'post_status' => 'publish',
        'posts_per_page' => -1,
        'orderby' => 'date',
        'order' => 'DESC'
        );
        $wp_query = new WP_Query($args);
        ?>
    <div id="press-releases">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <div id="press-wrapper">
            <div id="press-image">
                <?php echo wp_get_attachment_image(get_post_meta($post->ID, 'release_image', true)); ?>
            </div><!-- end press-image div -->
            <div id="press-information">
                <p class="press-date"><?php echo get_post_meta($post->ID, 'release_date', true); ?></p>
                <p class="press-link"><a href="<?php echo get_post_meta($post->ID, 'release_link', true); ?>" target="_blank"><?php echo get_post_meta($post->ID, 'release_title', true); ?></a></p>
                <p class="press-author"><?php echo get_post_meta($post->ID, 'release_author', true); ?></p>
            </div><!-- end press-information div -->
            <div style="clear:both;"></div>
        </div><!-- end press-wrapper div -->
        <?php endwhile; endif; wp_reset_postdata(); ?>
    </div><!-- end press-releases div -->
    </div>
    </div>
    </div><!-- end content -->
    <?php echo thesis_sidebars(); ?>
<?php } }

add_action('thesis_hook_custom_template', 'press_releases_page'); 
```

似乎一切正常，只是没有为自定义帖子类型提取数据。

在其他网站上完成了此操作（使用自定义主题），我不确定我是否在这里做错了，或者是否是论文问题。

任何帮助都会很棒。

谢谢

布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:13:08.997

这是最终的工作代码。感谢当地 WP Guru 朋友和 maiorano84 的帮助。我们没有找出原因，但我们做了很好的解决方案。

```
function press_releases_page() {
if (is_page('press-releases') || is_page('583')) { ?>

<div id="content">
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="post_box">
    <div class="headline_area"><h1><?php the_title(); ?></h1></div>
    <div class="format_text">
    <?php the_content(); ?>
    <?php endwhile; ?>
    <?php endif ?>

    <?php
        $original_query = $wp_query;
        $wp_query = null;

        $args = array (
        'post_type' => 'press-release',
        'post_status' => 'publish',
        'posts_per_page' => -1,
        'orderby' => 'date',
        'order' => 'DESC'
        );
        $wp_query = new WP_Query($args);
    ?>

    <div id="press-releases">
        <?php if ( $wp_query->have_posts() ) : while ( $wp_query->have_posts() ) : $wp_query->the_post(); ?>
        <?php $results = get_post_custom(); ?>
        <div id="press-wrapper">
            <div id="press-image"><?php echo wp_get_attachment_image($results['release_image'][0] ); ?></div><!-- end press-image div -->
            <div id="press-information">
                <p class="press-date"><?php echo $results['release_date'][0] ?></p> 
                <p class="press-link"><a href="<?php echo $results['release_link'][0] ?>" target="_blank"><?php echo $results['release_title'][0] ?></a></p>
                <p class="press-author"><?php echo $results['release_author'][0] ?></p>
            </div><!-- end press-information div -->
            <div style="clear:both;"></div>
        </div><!-- end press-wrapper div -->
        <?php endwhile; endif; wp_reset_query(); wp_reset_postdata(); ?>
    </div><!-- end press-releases div -->
    </div>
    </div>
    </div><!-- end content -->
    <?php echo thesis_sidebars(); ?>
<?php } }

remove_action('thesis_hook_custom_template', 'thesis_custom_template_sample');
add_action('thesis_hook_custom_template', 'press_releases_page'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:31:49.053

尝试改变这个：

```
<div id="press-releases">
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<div id="press-wrapper"> 
```

对此：

```
<div id="press-releases">
<?php if ( $wp_query->have_posts() ) : while ( $wp_query->have_posts() ) : $wp_query->the_post(); ?>
<div id="press-wrapper"> 
```

**更新：**

我能看到的唯一另一件事是您没有重置您的帖子数据，并且 $wp_query 变量实际上是一个 Wordpress 全局变量。尝试使用重置功能并更改您的 WP_Query 实例名称，如下所示：

```
<?php
    wp_reset_query();
    wp_reset_postdata();

    $args = array (
    'post_type' => 'press-release',
    'post_status' => 'publish',
    'posts_per_page' => -1,
    'orderby' => 'date',
    'order' => 'DESC'
    );
    $query = new WP_Query($args);
    ?>
<div id="press-releases">
    <?php if ( $query->have_posts() ) : while ( $query->have_posts() ) : $query->the_post(); ?> 
```

**更新 2：**

现在您已经将包装器写入文档，您需要规范化您的信息。尽量避免使用元数据而不是普通的帖子属性。我想您的元数据“release_image”是指向服务器某处图像的链接：

```
<?php if ( $query->have_posts() ) : while ( $query->have_posts() ) : $query->the_post();
?>
    <div id="press-wrapper">
        <div id="press-image">
            <img src="<?php echo get_post_meta(get_the_ID(), 'release_image', true); ?>" />
        </div><!-- end press-image div -->
        <div id="press-information">
            <p class="press-date"><?php echo the_date(); ?></p>
            <p class="press-link"><a href="<?php the_permalink(); ?>" target="_blank"><?php the_title(); ?></a></p>
            <p class="press-author"><?php the_author(); ?></p>
        </div><!-- end press-information div -->
        <div style="clear:both;"></div>
    </div><!-- end press-wrapper div -->
    <?php endwhile; endif; wp_reset_postdata(); ?> 
```

# bash - 检查目录是 /Library 还是 /Public

> ID：13982039
> 
> 赞同：2
> 
> 时间：2012-12-20T23:14:48.177
> 
> 标签：bash

我正在尝试编写一个 bash 脚本，该脚本获取用户主目录并循环遍历第一级子目录，并且仅当它不是 /Library 或 /Public 文件夹时才对这些目录执行一些维护。我到目前为止的代码不起作用，因为我收到一条错误消息，指出 $dir 返回的目录名称是一个目录。这是代码：

```
#!/bin/bash

user="short name"
source_root="/Users/"

source_use="$source_root$user"
cd "$source_use"

dirarr=( */ )

echo ${dirarr[@]}

for dir in "${dirarr[@]}"
do 
    if ( "$dir" -ne "/Library" -o "$dir" -ne "/Public")
        then echo $dir.
            # do something
    fi
done 
```

任何人都可以帮我完成这项工作。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:21:53.403

您的脚本有几个问题：

1.  您需要在语句中使用`[ ]`or ，而不是. 在您的示例中，创建一个子外壳并尝试运行一个命令，这就是您收到您看到的错误消息的原因。`[[ ]]``if``( )``( )``"$dir"`

2.  您正在与找不到的字符串进行比较 - 尝试`"Library/"`并`"Public/"`改为。

3.  您可能想要`-a`而不是`-o`.

4.  `-ne`用于比较数字。你想要`!=`。

这是您的脚本的更正版本：

```
#!/bin/bash

user="short name"
source_root="/Users/"

source_use="$source_root$user"
cd "$source_use"

dirarr=( */ )

echo ${dirarr[@]}

for dir in "${dirarr[@]}"
do 
    if [ "$dir" != "Library/" -a "$dir" != "Public/" ]
    then
        echo $dir.
        # do something
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:27:07.210

试试这个：

```
cd $source_root$user

for dir in `find . -maxdepth 1 -type d`
do
  if [ $dir = ./Library ] || [ $dir = ./Public ]
  then
    continue
  fi

  (Perform actions)
done 
```

此外，bash 是倒退的。`!=`是字符串不等式，`-ne`是整数不等式。所以，也改为等号。

祝你好运！

# bash - Bash 中的 $RANDOM 不起作用

> ID：13982042
> 
> 赞同：5
> 
> 时间：2012-12-20T23:14:59.817
> 
> 标签：bash, random

此脚本中的问题可能出在哪里？

```
#!bin/bash
NUMBER=$RANDOM
echo " The number is: $NUMBER" 
```

当我启动这个脚本时，它会这样写：

```
The number is: 
```

（我正在运行 Ubuntu 12.04）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:16:28.973

因为你的 shebang 有错误，它应该是：

```
#!/bin/bash 
```

（注意缺失`/`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T18:44:20.847

最后，我找到了它可能对您不起作用的原因。

原因可能是您将脚本运行为 (sh myScript.sh) 以使其工作尝试 (bash myScript.sh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T02:38:49.803

可能：您有多余的空间不属于它们这是正确的：

```
NUMBER=$RANDOM 
```

当您实际将其输入 bash 或脚本时，这是不正确的：

```
NUMBER =$RANDOM 
```

真实脚本中的 shebang 错误使脚本打印“找不到文件”并提前退出，没有其他输出。我相信这不是报告的错误。

请仔细检查您的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:52:13.000

我遇到了完全相同的问题......对我来说正在工作（在脚本中）而不是：“echo $RANDOM”尝试：“$$”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T21:38:22.783

我很抱歉混淆了之前的消息，因为 $$ 完全是另外一回事

但我为这个问题找到了一些替代解决方案：生成从 0 到 12 的随机数使用： var=$(shuf -i0-12 -n1)

原文出处： [Shell脚本随机数生成](https://stackoverflow.com/questions/5992638/shell-script-random-number-generating)

# maven - Findbugs UnionBugs 作为 maven 构建的一部分抛出异常“读取/解析故障”，并从命令行工作

> ID：13982045
> 
> 赞同：0
> 
> 时间：2012-12-20T23:15:07.870
> 
> 标签：maven, ant, findbugs

有人见过 UnionBugs 蚂蚁任务的问题吗？

我的 maven 构建通过 maven 插件生成 findbug，并在报告项目中使用 unionBugs 通过 antrun 连接 xml，该报告项目通过 antrun 将所有报告连接在一起。当端到端构建运行时，我看到下面的错误，但文件存在并且可以读取。当我在构建后运行 concat 项目时，我会生成所需的报告。我希望堆空间问题会引发一个非常不同的错误并且堆有 2G。

如果您对如何调查此问题有一些想法，请告诉我。如果没有，我会更新问题，我应该弄清楚。现在，我将其拆分为两个 maven 执行，这还可以，但并不理想。

**错误**

```
Trouble reading/parsing .../core/api/target/findbugs/findbugsXml.xml 
```

**pom摘录**

```
<taskdef name="unionBugs" classname="edu.umd.cs.findbugs.anttask.UnionBugs" classpathref="maven                <taskdef name="unionBugs" classname="edu.umd.cs.findbugs.anttask.UnionBugs" classpathref="maven.plugin.classpath"/>

            <!-- Combin findbugs output -->
            <delete dir="${trunk}/target/findbugs" />
            <mkdir dir="${trunk}/target/findbugs" />
            <unionBugs to="${findbugs.xml.out}">
              <fileset dir="${trunk}">
                <include name="core/**/target/findbugs/findbugsXml.xml"/>
                <include name="app/target/findbugs/findbugsXml.xml"/>
                <include name="modules/*/target/findbugs/findbugsXml.xml"/>
              </fileset>
            </unionBugs> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:02:05.833

问题可能是我超出了最大打开文件的 ulimit (ulimit -n)。我不知道这是否是遇到问题的唯一方法。

*   只有在运行生成 findbugs 结果的完整构建后才会出现问题
*   在单独的 maven 进程中执行的 unionBugs 任务不会导致问题
*   ulimit -n175 ; cd concat-findbugs；mvn install *导致问题*

解决方案 - 在 Linux 上提高 ulimit [Setting Max Open files](https://stackoverflow.com/questions/1212925/on-linux-set-maximum-open-files-to-unlimited-possible)

# entity-framework - Breeze.js 不支持具有 TimeSpan 属性的 EF 实体？

> ID：13982046
> 
> 赞同：2
> 
> 时间：2012-12-20T23:15:09.090
> 
> 标签：entity-framework, entity-framework-4, breeze

在将 TimeSpan 属性添加到 DocCode 项目中的 Employee 实体后，我收到了 NotSupportedException。所以我知道它不受支持，但是......是否有计划进行转换或克服这个问题的方法。我们在实体中广泛使用 TimeSpan，有没有办法支持 TimeSpan 或计划？

1.  添加了 Duration 属性

> ```
> public class Employee
> {
>     ...
>     public DateTime? HireDate { get; set; }
> 
>     public TimeSpan? Duration { get; set; }
> 
>     [MaxLength(60)]
>     public string Address { get; set; }
>     ...
> } 
> ```

当在运行单元测试的 NorthwindController 上调用 MetaData() 方法时，它会失败：

```
System.NotSupportedException was unhandled by user code
HResult=-2146233067
Message=There is no store type corresponding to the EDM type 'Edm.Time(Nullable=True)' of primitive type 'Time'.
Source=System.Data.SqlServerCe.Entity
StackTrace:
   at System.Data.SqlServerCe.SqlCeProviderManifest.GetStoreType(TypeUsage edmType)
   at System.Data.Entity.ModelConfiguration.Edm.Services.StructuralTypeMappingGenerator.MapTableColumn(EdmProperty property, DbTableColumnMetadata tableColumnMetadata, Boolean isInstancePropertyOnDerivedType, Boolean isKeyProperty)
   at System.Data.Entity.ModelConfiguration.Edm.Services.PropertyMappingGenerator.Generate(EdmEntityType entityType, IEnumerable`1 properties, DbEntitySetMapping entitySetMapping, DbEntityTypeMappingFragment entityTypeMappingFragment, IList`1 propertyPath, Boolean createNewColumn)
   at System.Data.Entity.ModelConfiguration.Edm.Services.EntityTypeMappingGenerator.Generate(EdmEntityType entityType, DbDatabaseMapping databaseMapping)
   at System.Data.Entity.ModelConfiguration.Edm.Services.DatabaseMappingGenerator.GenerateEntityTypes(EdmModel model, DbDatabaseMapping databaseMapping)
   at System.Data.Entity.ModelConfiguration.Edm.Services.DatabaseMappingGenerator.Generate(EdmModel model)
   at System.Data.Entity.ModelConfiguration.Edm.EdmModelExtensions.GenerateDatabaseMapping(EdmModel model, DbProviderManifest providerManifest)
   at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
   at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
   at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
   at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.InternalContext.Initialize()
   at System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes()
   at System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext()
   at Breeze.WebApi.EFContextProvider`1.GetCsdlFromObjectContext(Object context)
   at Breeze.WebApi.EFContextProvider`1.GetCsdlFromDbContext(Object context)
   at Breeze.WebApi.EFContextProvider`1.BuildJsonMetadata()
   at Breeze.WebApi.ContextProvider.Metadata()
   at DocCode.Controllers.NorthwindController.Metadata() in c:\Users\anwalker\Downloads\breeze-runtime-plus-0.78.2\Samples\DocCode\DocCode\Controllers\NorthwindController.cs:line 20
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:02:24.740

在 0.84.1 版本中添加了 TimeSpan 支持。

TimeSpan 在微风客户端上表示为 ISO 8601“持续时间”字符串。见[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

完整的查询支持包括过滤和返回 TimeSpan/Duration 属性的能力。IE

```
var query = EntityQuery.from("Contracts").where("TimeElapsed", ">", "PT4H30M"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:41:54.003

好的，经过一些研究，使用 ISO8601 'duration' 标准将 .NET 时间跨度序列化到 javascript 客户端是有意义的，该标准将天、小时、分钟和秒的时间跨度表示为格式化字符串，例如：“PnnnDTnnHnnMnn .nnnS”。显然，您将需要客户端上的 javascript 库来解释和使用它。这能满足您的需求吗？

我已将此添加到我们的功能请求日志中，但也请将其添加到 Breeze[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中（并为它投票:)）。这有助于我们优先处理未完成的功能请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:50:17.990

嗯..这个请求是有道理的。但是，您希望它在 javascript 中转换成什么，一个字符串或自某个时间点以来的秒数或......。.NET 时间跨度是否有标准的 javascript 表示？

# python - Python 的 property() 应该用作装饰器还是保存到变量中？

> ID：13982054
> 
> 赞同：1
> 
> 时间：2012-12-20T23:16:53.747
> 
> 标签：python, properties, decorator

哪种是使用 Python 内置函数[property()](http://docs.python.org/2/library/functions.html?highlight=property#property)的首选方式？作为装饰器还是保存到变量中？

这是一个保存`property()`到变量的示例`color`。

```
class Train(object):
    def __init__(self, color='black'):
        self._color = color

    def get_color(self):
        return self._color

    def set_color(self, color):
        self._color = color

    def del_color(self):
        del self._color
    color = property(get_color, set_color, del_color) 
```

这是相同的示例，但使用了装饰器。

```
class Train(object):
    def __init__(self, color='black'):
        self._color = color

    @property
    def color(self):
        return self._color

    @color.setter
    def color(self, color):
        self._color = color

    @color.deleter
    def color(self):
        del self._color 
```

我发现有些人喜欢对只读属性使用装饰器语法。例如。

```
class Train(object):
    def __init__(self, color='black'):
        self._color = color

    @property
    def color(self):
        return self._color 
```

但是在保存到变量时也可以实现相同的功能。

```
class Train(object):
    def __init__(self, color='black'):
        self._color = color

    def get_color(self):
        return self._color
    color = property(get_color) 
```

[自PEP20](http://www.python.org/dev/peps/pep-0020/)声明以来，相同功能的两种方式让我感到困惑

> 应该有一种——最好只有一种——明显的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:28:31.260

在功能上，这两种方式是等价的。装饰器语法只是语法糖。

```
@some_decorator
def some_func():
    ... 
```

……相当于……

```
def some_func():
    ....
some_func = some_decorator(some_func) 
```

装饰器语法使您的代码更清晰（非装饰器语法意味着您必须键入“some_func”三次！）并且您的意图更加明显，所以我会说绝对使用装饰器语法。

# java - 实体列表的 CriteriaBuilder 和 isMember (Hibernate)

> ID：13982058
> 
> 赞同：1
> 
> 时间：2012-12-20T23:17:20.570
> 
> 标签：java, hibernate, jpa, criteriaquery

好的，我正在尝试做一些非常奇怪的事情。我正在尝试使用 CriteriaBuilder 和 CriteriaQuery 返回包含实体集合中给定对象的所有实体。几个小时以来，我一直在努力解决这个问题，相关文档很少，也不是特别有用。任何帮助将不胜感激。

相关课程摘录如下。

```
@Entity
public class Entry {
    @ManyToMany(fetch=FetchType.EAGER)
    private List<Tag> tags = new ArrayList<Tag>();
}

@Entity
public class Tag {
    @Size(min=1,max=63)
    @Column(unique=true)
    @NotNull
    private String name;
}

@Repository
@Transactional
public class EntryDaoImpl extends RefineableDao implements EntryDao{
    @Autowired
    private EntityManager em;

    @Override
    public List<Entry> search(final Map<String,Object> refinement){
        CriteriaBuilder cb = em.getCriteriaBuilder();
        CriteriaQuery<Entry> query = cb.createQuery(Entry.class);
        Root<Entry> entry = query.from(Entry.class);
        query.orderBy(cb.desc(entry.get("createTime")));
        query.select(entry);
        query.where(this.refineQuery(refinement, cb, query, entry));
        return em.createQuery(query).getResultList();
    }
} 
```

所以基本上，我需要能够找到包含给定标签的条目。我知道如果这是我正在做的唯一改进，这可以很简单地完成，但是对同一个 CriteriaQuery 进行了许多其他改进，我从不保证会进行哪些改进。

如果您真的需要了解后端，请查看[http://pastebin.com/QJnkYRRh](http://pastebin.com/QJnkYRRh)。这是一个可怕的没有评论的混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:50:58.353

好的。我已经找到了我为什么遇到问题的答案`CriteriaBuilder.isMember()`。问题是`Path`需要`Path<? extends Collection>`。这样，isMember() 就像我希望的那样工作。

# linux - 如何仅在期望脚本中获取最后一次发送的输出

> ID：13982063
> 
> 赞同：1
> 
> 时间：2012-12-20T23:17:48.973
> 
> 标签：linux, shell, tcl, expect

我想使用 expect_out 来获取以下代码段的最后一次发送的输出

```
while {[gets $cmds command]>=0} {
    send "$command\r"
    expect "*"
    set result $expect_out(buffer)
    puts $gout $result
} 
```

但 expect_out(buffer) 似乎保持所有以前的输出我怎样才能实现我的目标？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:45:57.290

未经测试，但在发送命令`expect *` *之前尝试添加另一个。*

如果在开发期望程序时有疑问，请添加`exp_internal 1`到脚本的顶部。

# iphone - 游戏中心排行榜显示好友中有 2 名玩家，所有玩家中只有 1 名

> ID：13982065
> 
> 赞同：3
> 
> 时间：2012-12-20T23:17:52.777
> 
> 标签：iphone, game-center

我在我正在制作的一个小游戏中实现了`Leaderboards`低谷，并发布了来自两个帐户的分数。`Game Center`

到目前为止，一切都很好，但是当我在 Game Center 中查看时，我在列表中看到了我的两个分数，`friends`但只有我的分数在`all players`列表中。

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-06T13:27:10.377

我有同样的问题。我需要向**其他帐户发送邀请**。只有在那之后，我才能查看其他帐户的分数。希望这有效。不过，我不知道“玩家”部分。它显示“没有玩家”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T20:49:59.657

是的，毕竟问题似乎是沙盒游戏中心的更新缓慢，所以如果您实施排行榜并尝试使用不同的帐户，请等待几个小时，然后再尝试检查您是否有错误。

# c# - ElementHost 中托管的 WPF 元素未正确重绘

> ID：13982066
> 
> 赞同：4
> 
> 时间：2012-12-20T23:17:59.160
> 
> 标签：c#, wpf, elementhost, hwndsource

我正在编写一个程序来在 C# 中实现 COM 组件。该组件也提供了一个 UI 组件。为了便于实现组件的未来添加，我决定使用 WPF 在 Xaml 中编写 UI，并将其包装在 ElementHost 控件中，以便将句柄返回给 COM 使用者。

这就是有趣的地方。该元素托管在 win32 选项卡控件中。第一次选择选项卡时，它加载正常。切换到另一个选项卡并返回会导致它无法正确绘制组件。如果我在其中移动鼠标，它将绘制 TextBox 元素，但它永远不会重绘整个 UserComponent。

我已经尝试了我看到的所有可能的解决方案，从更改组件的高度/宽度值到将 HwndTarget 置于 SoftwareOnly 呈现模式。

我不确定此时要尝试什么，因此欢迎提出建议。我真的很想在不使用 Windows 窗体的情况下做到这一点，因为它的未来维护者不是最好的程序员，告诉他们编写一个带有数据绑定的 Xaml 文件比手动布局表单并设置要容易得多代码隐藏中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:16:16.797

还没遇到过这样的问题。切换到托管选项卡时，尝试强制刷新或聚焦（方法）到托管包装器或 HwndSource。

# php - MySQL 语句同时使用 JOIN、ON 和 WHERE 不起作用

> ID：13982074
> 
> 赞同：2
> 
> 时间：2012-12-20T23:18:44.687
> 
> 标签：php, mysql, sql, database, join

数据库：

表 #1: xx_users (id, name, user_id, location, network)

表 #2: xx_questions (id, user_id, time)

代码：

```
$friends = $facebook->api('/me/friends');
$arr= $friends['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}

$sql = "SELECT q.*, u.location, u.network
            FROM xx_questions q 
            JOIN xx_users u 
            ON q.user_id = u.user_id
            WHERE q.user_id = $user OR
//***       q.user_id IN (".implode(',', $friend_ids_arr).") OR
            u.location = (SELECT location FROM xx_users WHERE user_id = $user) OR
            u.network = (SELECT network FROM xx_users WHERE user_id = $user)
            ORDER BY q.time DESC"; 
```

问题行是带有注释掉星号的行。它应该选择提问者 ID 与用户的 Facebook 好友之一匹配的所有问题，但它不会选择任何内容。知道有什么问题吗？

**编辑**

SQL 输出为：

```
SELECT q.*, u.location, u.network
FROM xx_questions q JOIN xx_users u
ON q.user_id = u.user_id
WHERE q.user_id = 528782060 OR q.user_id IN (123456, 234567 etc) OR
u.location = (SELECT location FROM xx_users WHERE user_id = 528782060) OR
u.network = (SELECT network FROM xx_users WHERE user_id = 528782060)
ORDER BY q.time DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:35:59.480

正确的代码是：

```
SELECT q.*, u.location, u.network
FROM xx_questions q JOIN xx_users u
ON q.user_id = u.user_id
AND q.user_id = 528782060 OR q.user_id IN (123456, 234567 etc) OR
u.location = (SELECT location FROM xx_users WHERE user_id = 528782060) OR
u.network = (SELECT network FROM xx_users WHERE user_id = 528782060)
ORDER BY q.time DESC 
```

# css - 容器内具有可变尺寸的水平居中 div

> ID：13982076
> 
> 赞同：0
> 
> 时间：2012-12-20T23:19:07.387
> 
> 标签：css, center, css-position, centering

我有一个尺寸可变的 div，我需要在其容器内动态水平居中。这是当前的结构...

```
<div class="outer">
    <div class="inner">Sample</div>
</div> 
```

...“内部” div 的高度和宽度取决于其内容，并且它需要在“外部” div 内水平居中（左右两侧的空间相等），这可能或可能没有固定尺寸（因此“内部”可能在“外部”div 的宽度内，或者可能溢出，但始终居中）。以下是我目前拥有的款式...

```
.outer {
    width: 10px;
    margin: 0 auto;
    position: relative;
}
.inner {
    position: absolute;
    bottom: 0;
} 
```

...“外部”的属性可以很好地将其集中在它所包含的内容中，但是“内部”的属性使其与“外部”div 的左边缘对齐。

我为“内部”尝试了一些具有负边距和左/右值的选项，但它们似乎取决于固定的像素值，而我需要它的尺寸相对于其内容保持可变。

需要注意的是，“内部” div 需要绝对定位，因为它必须固定到“外部”的底部边缘（因此是“底部：0”），即使“外部”的高度比内。

这是一个正在运行的示例：http: [//jsfiddle.net/bVC3J/](http://jsfiddle.net/bVC3J/)

有人对我如何在不使用 JS 的情况下实现这一目标有任何想法吗？如果没有 CSS 解决方案，我对 JS 持开放态度，因此欢迎您作为最后的手段提出建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:36:30.463

这可能会为您完成工作：http: [//jsfiddle.net/fF3A4/1/](http://jsfiddle.net/fF3A4/1/)

```
.outer {
    width:300px;
    height:300px;
    display:table-cell;
    background:#333;
    vertical-align:bottom;
    text-align:center;
}
.inner {
    width:200px;
    margin:0 auto;
    background:#ccc;
    display:inline-block;
} 
```

# objective-c - 如何找到引用了 Objective-C 对象的位置？

> ID：13982080
> 
> 赞同：4
> 
> 时间：2012-12-20T23:19:23.013
> 
> 标签：objective-c, xcode

我在 Xcode 中使用 Allocations 工具来跟踪正在创建但未释放的对象。随着代码的执行，我可以看到对象计数增加，并且我可以看到使用调用堆栈创建对象的位置，但我无法确定对象引用的保存位置。我认为它们被保存在第 3 方库中，但开发人员说“不，它必须是你的代码”。我将代码中的引用设置为零，但对象仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T11:45:07.123

我认为不存在可以告诉您每个参考在任何时间点的位置的工具。当您使用 ARC 时，根据我的经验，有两种相当常见的方法可以让自己陷入引用循环并泄漏内存：

1.  类 A 对类 B 的实例具有强引用，而类 B 对类 A 的同一实例具有强引用。
2.  块隐式保留对其捕获的对象的引用。所以一个明显的问题是当你的对象保留一个保留对自身的引用的块时。

**例子：**

```
self.retainedBlock = ^{
    [self doSomething];
}; 
```

**使固定：**

```
__weak id weakSelf = self;
self.retainedBlock = ^{
    id strongSelf = weakSelf;
    [strongSelf doSomething];
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-22T22:48:58.843

这是一个绝望的策略，但你可以做的是：

1.  为受影响的对象禁用 ARC（或解决它；见下文）；
2.  添加日志记录`retain`，`autorelease`和`release`；
3.  通过日志跟踪已知的过度保留对象。

最简单的例子：

```
- (void)release
{
    NSLog(@"%@ : %@", self, [NSThread callStackSymbols]);
    [super release];
} 
```

`[NSThread callStackSymbols]`（尽管在实践中，将内存管理调用的数组保留在由 eg 索引的字典中`[NSValue valueWithPointer:self]`，然后从 lldb 或通过将其写入磁盘来访问它可能要聪明得多；为什么还要手动有效地索引数据?)

解决 ARC 的最简单方法可能是编写一个禁用 ARC 的单个类，该类可以将您的日志记录内存管理方法调配到您要跟踪的对象上。

# android - 再一次：为什么我的 ImageView 不刷新？

> ID：13982085
> 
> 赞同：1
> 
> 时间：2012-12-20T23:19:38.697
> 
> 标签：android, imageview, invalidation, translate-animation

我知道这个问题之前已经回答过好几次了，但是这个新手找不到有效的答案。

我尝试使用 TouchImageView（扩展 ImageView）实现全景查看器。首先，我尝试使用 TranslateAnimation，但也失败了（我的问题[没有答案](https://stackoverflow.com/questions/13963836/can-a-panorama-viewer-effect-be-done-with-translateanimation)，所以我认为这对于 TouchImageView 是不可能的）。

然后我尝试了艰难的方式，使用 ImageView.matrix，移动一点，暂停，移动一点，暂停......好吧，至少这是我的想法。

问题是我只能在 4 或 5 秒后看到全景图的最终位置，什么也没有。我什至放了两个`ImageView.invalidate();`，没有任何成功。我尝试使用 Threads 和 AsyncTasks 也没有成功（问题是它们必须更新主 UI，否则我会得到一个异常；但在我看来使用 AsyncTask 来更新 UI 线程是错误的）。好吧，我尝试了我能想到的一切。

无论如何，下面是我的简单代码（AsyncTask 尝试，但我所做的一切都在里面）。观察不遵守`foto.invalidate();`的`onPreExecute`方法中的（为什么？）。有一些评论让你看看我还尝试了什么。

我的简单代码，`foto`(Touch)ImageView 在哪里：

```
class animatepanorama extends AsyncTask<Void, Void, Void> {
    float scale = foto.cropScale * foto.baseScale;
    Matrix m = foto.matrix;
    protected void onPreExecute(Void arg0) {
        m.setScale(scale, scale);
        foto.Scale = foto.cropScale;
        foto.setImageMatrix(m);
        foto.invalidate();
    }
    @Override
    protected Void doInBackground(Void... arg0) {
        // new Thread(new Runnable() { public void run() {
        //synchronized(foto) {
        runOnUiThread(new Runnable() {
            public void run() {
                for (int i = 0; i < 100; i++) {

                    try {
                        Thread.sleep(25);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    m.setScale(scale, scale);
                    m.postTranslate(-i * scale * 8, 0);
                    foto.setImageMatrix(m);
                    foto.invalidate();
                }
            }
        });
        //}
        // }}).start();
        return null;
    }
    protected void onPostExecute(Void arg0) {
        foto.invalidate();
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:46:15.943

尝试不要从 UI 线程上的 doinbackground 运行它，而是使用 publishProgress 和 onProgressUpdate？问题是 doinbackground 不在 uithread 上运行，而是在“后台”运行，因此对于所有 UI 更新，它必须将其传递给 onprogressupdate。

将您的异步更改为：

```
class animatepanorama extends AsyncTask<Void, Integer, Void> { 
```

然后可以使用 Integer 参数调用 onProgressUpdate

```
 for (int i = 0; i < 100; i++) {

        try {
            Thread.sleep(25);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        publishProgress(0);

    } 
```

并覆盖这个：

```
@Override
protected void onProgressUpdate(Integer... values) {
    if (values[0] == 0) {
        m.setScale(scale, scale);
        m.postTranslate(-i * scale * 8, 0);
        foto.setImageMatrix(m);
        foto.invalidate();
    }
} 
```

# jquery - 为什么jQuery mouseenter / leave动画两次？

> ID：13982086
> 
> 赞同：0
> 
> 时间：2012-12-20T23:19:43.533
> 
> 标签：jquery, jquery-animate, mouseevent

我有这个代码：

```
$(document).ready(function(){
     $('.first').mouseenter(function(){
         $(this).animate({
             top: '115px'
         }, 500 );
     });
     $('.first').mouseleave(function(){
         $(this).animate({
         top: '127px'
         }, 500 );
     });
 }); 
```

当我运行它时，我的 .first div 至少上下两次，如果不是更多的话，我不知道为什么会这样。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:25:28.433

如果您不希望它们建立，则需要在添加更多动画之前停止动画队列：http: [//jsfiddle.net/bgjxk/](http://jsfiddle.net/bgjxk/)

```
$(document).ready(function(){
     $('.first').mouseenter(function(){
         $(this).stop().animate({
             top: '115px'
         }, 500 );
     });
     $('.first').mouseleave(function(){
         $(this).stop().animate({
         top: '127px'
         }, 500 );
     });
});​ 
```

你也可以使用 CSS3 过渡来完成同样的事情，更流畅，而不用担心动画队列：http: [//jsfiddle.net/bgjxk/1/](http://jsfiddle.net/bgjxk/1/)

```
.first{
    ...
    position:absolute;
    top:127px;
    transition:top .25s linear; /* use them vendor prefixes */
}
.first:hover{
    top:115px;
} 
```

# android - Facebook graph api /me (Android/iOS SDK) 在使用代理时失败

> ID：13982087
> 
> 赞同：2
> 
> 时间：2012-12-20T23:19:46.103
> 
> 标签：android, xcode, facebook, facebook-graph-api, proxy

我尝试配置 android wifi 代理以将所有流量发送到 fiddler2 代理。然后我测试了Facebook登录功能。登录成功，但是当我尝试使用返回的访问令牌调用 graph api /me 时，它​​失败了。我认为它失败了，因为我无法从响应中获取用户 ID。我可以在 fiddler2中看到一些`https`数据包。`graph.facebook.com`

在我排除`graph.facebook.com`在 android wifi 配置中使用代理之后。/me 使用用户 ID 正确返回。

同样的事情也发生在 iPhone 上。但 iPhone 不能排除域使用代理。我被困住了。

登录成功，进入`https://m.facebook.com`。那么facebook graph api有什么限制吗？

# sql - 或多列有效

> ID：13982093
> 
> 赞同：2
> 
> 时间：2012-12-20T23:20:19.787
> 
> 标签：sql, performance, indexing

假设我有一张桌子`50 columns`。我想做类似的事情：

```
SELECT * FROM table WHERE column1=value1 OR column2=value2 OR ... 
```

我怎样才能有效地做到这一点？

1.  `indexes`我可以在许多/所有列中添加一堆或一个索引。这会有帮助吗？

2.  我可以创建一个`secondary table`带有列（`id, field_name, field_value`

3.  我还可以做些什么？

有关更多信息：

*   行添加非常频繁，但之后很少编辑。
*   行在添加后被多次选择（可能几十但可能不是数百）。
*   表有 100,000 多行，表扫描太慢。
*   具体来说，给定一行，我想在 ANY 列上查找与该行匹配的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:06:23.210

暂且讨论更改数据库设计...

* * *

组合索引（查询中引用的许多或大部分列的索引）对您的查询没有帮助，它有一堆`OR`'d`colN = 'foo'`谓词。MySQL 不会使用该索引来满足您的查询。即使要使用索引，基础表中的其他列仍然需要对每一行进行检查，因此 MySQL 很可能只是访问所有数据页而根本不使用索引。（如果您的查询中碰巧有 GROUP BY 或 ORDER BY，MySQL 可能能够使用该索引来优化这些操作，特别是如果它是一个“覆盖”索引，其中包含您的查询引用的每一列。

另一方面，如果您在每一列（作为索引中的前导列）上都有一个单独的索引，并使用 进行检查`OR colN = 'foo' OR colN = 'bar'`，则 MySQL 可能会考虑为您的查询使用“索引合并”计划。

但它必须是每一列的索引。如果您的查询甚至只检查一个不是任何索引中的前导列的列，那么 MySQL 将别无选择，只能检查表中的每一行。因此，在“许多”列上设置单独的索引将无助于您的查询，因为很可能不会使用任何索引。

即使您确实为每一个被引用的大量列都有一个单独的索引，MySQL 对返回的总行数（从每个索引组合）的估计也可能太大，并且 MySQL 可能会决定“索引合并”太昂贵了，而是选择全表扫描。

* * *

总而言之，帮助您查询的索引只有两种选择（而且它们都不是一个真正好的选择）：

1) 具有可用于满足 GROUP BY 或 ORDER BY 子句的前导列的“覆盖索引”（避免“使用文件排序”操作）

`OR colN = 'literal'`2) 由查询中的谓词检查的每一列（作为前导列）上的单独索引

但同样，这些都不是一个好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:27:55.597

当您遇到这样的场景时，它通常表明可能存在规范化表格的空间（您的场景 B）。如果没有关于您的列实际包含哪些数据以及您的整体表访问模式是什么的进一步信息，将很难知道。

话虽如此，在没有任何类型的表结构更改的情况下，您只需要在可能要查询的每一列上都有一个索引，以防止全表扫描。

# c# - 在天蓝色表中插入数据的问题？

> ID：13982100
> 
> 赞同：2
> 
> 时间：2012-12-20T23:20:56.030
> 
> 标签：c#, azure, azure-table-storage

我对天蓝色表存储有疑问。我有天蓝色的表名 Html，它看起来像：

```
public class Html : TableServiceEntity, Ibase
{
        public string Time { get; set; }
        public string Name { get; set; }
        public string File { get; set; }
        public string Type { get; set; }
        public byte[] CardTypeId { get; set; }
        public byte[] Card { get; set; }
        public byte[] Thumb { get; set; }
        public byte[] Tags { get; set; }
        public string ThumbUri { get; set; }
} 
```

存储工作正常。但是当我尝试存储以下数据时，没有任何例外，而且表中也没有数据条目。我有一个截图：

![在此处输入图像描述](../Images/0694abc514b9a38f9f397cdf27217b60.png)

在上面的屏幕截图中，如果您看到我在发生天蓝色表条目的代码行上放置了一个断点。图像还包含插入到表中的数据，但是当我从表中访问实体时，没有在表中输入这些数据。谁能告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T16:08:34.563

在给定的示例中，您尝试插入超过 64Kb（Thumb ~ 81Kb）的属性。请参阅[http://msdn.microsoft.com/en-us/library/dd179338.aspx](http://msdn.microsoft.com/en-us/library/dd179338.aspx)并查看所有表实体限制。您可能需要将此属性的内容存储在 BLOB 中，而不是 TableStorage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:35:27.543

我认为您缺少构造函数，您需要在其中定义行键和分区键。你能尝试合并相同的吗

# networking - 使用多个 Windows Phone 设备创建 wifi 网络？

> ID：13982105
> 
> 赞同：3
> 
> 时间：2012-12-20T23:22:26.513
> 
> 标签：networking, windows-phone, wifi

我有这个问题。我想为 Windows Phone 平台创建一个多人游戏应用程序。我想为 4 个人提供一些非常好的操作。一部手机将主持游戏，其他 3 部将连接到主机。为此，我想我需要将装有 Windows Phone 8 操作系统（甚至是 Windows Phone 7？）的手机连接到一个使用 wifi 连接的网络。

所以我的问题是 - 是否可以在 4 个装有 Windows Phone 8 操作系统（或 WP7？）的设备之间创建一个 wifi 网络？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:49:37.077

在 Windows Phone 7 上（它在 Windows Phone 8 上受支持，但您必须在 Windows Phone 7 下构建项目（以获得 XNA 支持）），XNA Game Studio 游戏支持以下类型的网络：

通过玩家服务访问 Xbox LIVE。这仅适用于已向 Microsoft 注册以在 Windows Phone 上访问 Xbox LIVE 的开发人员。有关在 Windows Phone 开发人员上注册 Xbox LIVE 的更多信息，请访问 developer.windowsphone.com。

使用超文本传输​​协议 (HTTP) 的 Web 请求。这适用于 Windows Phone 上的所有应用程序。

推送通知。推送通知也通过 HTTP（客户端和服务器）实现，并可用于 Windows Phone 上的所有应用程序。

[此外，Microsoft 在其Windows Phone 开发中心示例](http://code.msdn.microsoft.com/wpapps)站点上提供了一些游戏网络示例。就像这个包含客户端和服务器源代码[的 Tic-Tac-Toe Over Sockets Example](http://code.msdn.microsoft.com/wpapps/Tic-Tac-Toe-Over-Sockets-cffbffd3)或这个[Rock Paper Scissors Example](http://code.msdn.microsoft.com/wpapps/Multicast-Sockets-Sample-51190c11)一样。

最后，请记住，如果您开始专门针对 Windows 8 的新游戏项目，请在考虑 XNA 相关项目时使用以下提示：

面向 Windows Phone OS 7.1 的 XNA Game Studio 4.0 应用程序仍然得到完全支持，并继续在 Windows Phone 8 设备上运行。

您可以继续开发和维护面向 Windows Phone OS 7.1 的新的或现有的 XNA Framework 应用程序。

您无法将面向 Windows Phone OS 7.1 的现有 XNA Framework 应用程序升级为面向 Windows Phone OS 8.0。

您不能创建面向 Windows Phone OS 8.0 的新 XNA Framework 应用程序。

当您选择 XNA Game Studio 4.0 工程模板时，您只能选择 Windows Phone OS 7.1 作为目标操作系统。

您可以在面向 Windows Phone OS 8.0 的应用程序中使用某些 XNA Framework 程序集。

您可以在面向 Windows Phone OS 8.0 的应用程序中引用和使用以下 XNA Framework 程序集。您不能在面向 Windows Phone OS 8.0 的应用程序中引用或使用不在此列表中的其他 XNA Framework 程序集。

```
Microsoft.Xna.Framework.dll
Microsoft.Xna.Framework.Audio.dll
Microsoft.Xna.Framework.GamerServices.dll
Microsoft.Xna.Framework.GamerServicesExtensions.dll
Microsoft.Xna.Framework.Input.Touch.dll
Microsoft.Xna.Framework.Media.dll
Microsoft.Xna.Framework.MediaLibraryExtensions.dll 
```

资料来源：[Microsoft MSDN](http://msdn.microsoft.com/en-us/library/hh221582.aspx) [XNA Framework 和 Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207003%28v=vs.105%29.aspx)

# intellij-idea - IntelliJ 调试窗口布局

> ID：13982106
> 
> 赞同：2
> 
> 时间：2012-12-20T23:22:34.953
> 
> 标签：intellij-idea

我已将调试工具框架移动到布局的右侧。这很好，除了一个问题。工具内部的选项卡布局（即框架、变量、监视）是水平布局的。结果是我无法同时看到 Frames 和 Variables 选项卡，因为没有足够的空间。如果我可以简单地垂直布局选项卡，这样就可以正常工作，这样框架就位于变量选项卡的上方。

我到处找了一个允许这样做的设置，但我找不到它。是否可以？也许不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:11:12.167

我不认为这是 IntelliJ 的功能。我在 IntelliJ 12 中看不到它。因为它是一个社区驱动的 IDE，你总是可以对它提出一个[功能请求，](http://youtrack.jetbrains.com/)看看它有多好。

# sql - Apps 脚本中的日期时间

> ID：13982107
> 
> 赞同：0
> 
> 时间：2012-12-20T23:22:40.610
> 
> 标签：sql, datetime, google-apps-script, google-bigquery

var dataInitial = '2012-11-01 00:00:00';

var dataFinal = '2012-11-02 22:00:00';

var strOrders = stmt.executeQuery('SELECT orders_id, date_purchased FROM `zen_orders`WHERE `orders_status`IN (3, 48, 49, 53) AND `last_modified`BETWEEN ' + dataInicial + ' AND ' + dataFinal);

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行 (linha 12) 的“00:00:00 AND 2012-11-02 22:00:00”附近使用正确的语法

此查询适用于 PHP :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:19:50.677

例如，MS ACCESS SQL 日期必须`#`包装它们。包含文字日期值时使用的正确字符是井号 (#)。[参考 MS Access](http://www.techrepublic.com/article/10-tips-for-working-with-dates-in-microsoft-access/6135056)。当你进行日期计算时，这真的很重要。也许您可能需要在 Google Script 中为 SQL 使用某些字符/前缀。因此，如果可以查看有关使用日期/参数化日期/为 Google 脚本构建 sql 字符串的文章，那就太好了。

要缩小问题范围，试试这个：

```
var strOrders = stmt.executeQuery('SELECT orders_id, date_purchased 
FROM zen_orders WHERE orders_status IN (3, 48, 49, 53) 
AND last_modified BETWEEN last_modified - Interval 7 day AND Now()); 
```

如果这在您的脚本中运行良好，那么肯定与您解析日期的方式有关。格式。

假设您使用的是**GOOGLE BigQuery**，只需知道 BigQuery 目前没有`Date`or`DateTime`数据类型。您应该在 BigQuery 中将日期戳存储为日期格式的整数，并可以使用该函数`POSIX (UNIX epoch)`将它们转换为人类可读的时间。`FORMAT_UTC_USEC`

另一种方法是将日期戳存储为格式中的字符串，使用该函数`YYYY-MM-DD HH:MM:SS.uuuuuu`在您的有序查询中转换它们。`PARSE_UTC_USEC()`

*   [参考 BigQuery](https://stackoverflow.com/questions/11609524/ordering-date-11-jan-2012-in-sql-using-google-bigquery)

# r - lattice grid.arrange 在网格内扩展图形

> ID：13982108
> 
> 赞同：0
> 
> 时间：2012-12-20T23:22:42.530
> 
> 标签：r, graph, lattice

我从格子开始。我有几个地块，然后我想用 grid.arrange 处理

这是两个图表的示例

```
graph1<-useOuterStrips(barchart(value1~Var1|Var2+Var3,data=table.df, ylab=NULL)
graph2<-useOuterStrips(barchart(value2~Var1|Var2+Var3,data=table.df, ylab=NULL)
grid.arrange(graph1,graph2, nrow=2, ncol=2, left=("percentage")) 
```

它运作良好，但是我想更改网格上每个行的高度（以扩展图形）。我试图在 grid.arrange 上包含论点，但没有看到做这项工作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:34:37.577

传递给`grid.arrange`和被传递给的正确参数`grid.layout`是`heights`.

话虽如此，如果您为布局中的所有单元格发送相同的高度，则高度将保持不变。您可能需要增加绘图设备的大小。

如果你想要每行有不同的高度，你可以。

使用来自的示例`?barchart`

```
x <-barchart(yield ~ variety | site, data = barley,
          groups = year, layout = c(1,6), stack = TRUE,
          auto.key = list(space = "right"),
          ylab = "Barley Yield (bushels/acre)",
          scales = list(x = list(rot = 45)))
y <-barchart(yield ~ variety | site, data = barley,
          groups = year, layout = c(1,6), stack = TRUE,
          auto.key = list(space = "right"),
          ylab = "Barley Yield (bushels/acre)",
          scales = list(x = list(rot = 45)))

grid.arrange(x,y,ncol=1, heights = c(1.5,2)) 
```

![在此处输入图像描述](../Images/b8f8018c735c134b3a7e6e468fe9118e.png)

这是丑陋和无用的，但显示了这个概念。

# java - Android Libgx Frogger 游戏崩溃：找不到类 'com.rengelbert.froggergdx.FroggerGame'

> ID：13982110
> 
> 赞同：1
> 
> 时间：2012-12-20T23:22:47.540
> 
> 标签：java, android

我正在尝试在这里运行教程：[http ://www.rengelbert.com/tutorial.php?id=175](http://www.rengelbert.com/tutorial.php?id=175)

这是 Frogger 游戏，我导入了项目并且 Java 版本运行良好，但是在运行 Android 版本时我遇到了崩溃。我对整个事情很陌生，正在寻求帮助。

这是我得到的：

```
12-20 17:32:01.725: E/dalvikvm(231): Could not find class 'com.rengelbert.froggergdx.FroggerGame', referenced from method com.rengelbert.froggergdx.FroggerGDX.onCreate
12-20 17:32:01.755: W/dalvikvm(231): VFY: unable to resolve new-instance 611 (Lcom/rengelbert/froggergdx/FroggerGame;) in Lcom/rengelbert/froggergdx/FroggerGDX;
12-20 17:32:01.755: D/dalvikvm(231): VFY: replacing opcode 0x22 at 0x0003
12-20 17:32:01.755: D/dalvikvm(231): Making a copy of Lcom/rengelbert/froggergdx/FroggerGDX;.onCreate code (44 bytes)
12-20 17:32:01.875: D/dalvikvm(231): Trying to load lib /data/data/com.rengelbert.froggergdx/lib/libgdx.so 0x45f3d990
12-20 17:32:01.915: D/dalvikvm(231): Added shared lib /data/data/com.rengelbert.froggergdx/lib/libgdx.so 0x45f3d990
12-20 17:32:01.915: D/dalvikvm(231): No JNI_OnLoad found in /data/data/com.rengelbert.froggergdx/lib/libgdx.so 0x45f3d990
12-20 17:32:01.949: D/AndroidRuntime(231): Shutting down VM
12-20 17:32:01.955: W/dalvikvm(231): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
12-20 17:32:01.955: E/AndroidRuntime(231): Uncaught handler: thread main exiting due to uncaught exception
12-20 17:32:01.975: E/AndroidRuntime(231): java.lang.NoClassDefFoundError: com.rengelbert.froggergdx.FroggerGame
12-20 17:32:01.975: E/AndroidRuntime(231):  at com.rengelbert.froggergdx.FroggerGDX.onCreate(FroggerGDX.java:14)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.os.Looper.loop(Looper.java:123)
12-20 17:32:01.975: E/AndroidRuntime(231):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-20 17:32:01.975: E/AndroidRuntime(231):  at java.lang.reflect.Method.invokeNative(Native Method)
12-20 17:32:01.975: E/AndroidRuntime(231):  at java.lang.reflect.Method.invoke(Method.java:521)
12-20 17:32:01.975: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-20 17:32:01.975: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-20 17:32:01.975: E/AndroidRuntime(231):  at dalvik.system.NativeStart.main(Native Method)
12-20 17:32:01.995: I/dalvikvm(231): threadid=7: reacting to signal 3
12-20 17:32:01.995: E/dalvikvm(231): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
12-20 17:32:03.975: I/Process(231): Sending signal. PID: 231 SIG: 9 
```

所以我想这是造成它的原因：`12-20 17:32:01.725: E/dalvikvm(231): Could not find class 'com.rengelbert.froggergdx.FroggerGame', referenced from method com.rengelbert.froggergdx.FroggerGDX.onCreate`

我在这个主题上找到了这个帖子：[libgdx game not working in android devices](https://stackoverflow.com/questions/11346331/libgdx-game-not-working-in-android-phones)

在进入 Java Build Class 并检查 gdx.jar 后端 jar 文件和 FroggerDesktop 文件后，我仍然遇到崩溃。

如果这些文件是依赖项，为什么在我导入项目时不会自动检查它们？我想在导入项目后，一切都应该设置好了吗？

谢谢您的帮助。

# android - 无法弄清楚为什么我的 android 应用程序的重置按钮不起作用

> ID：13982115
> 
> 赞同：0
> 
> 时间：2012-12-20T23:23:34.417
> 
> 标签：android

我今天一直在开发这个应用程序，但我似乎无法弄清楚代码有什么问题。

我可以在模拟器和我的摩托罗拉 Bravo (2.2) 上运行该应用程序，但是当我完成一轮并按下“重置”按钮时，它突然给我一个错误，该程序不再工作了。有没有什么办法解决这一问题？

这是 logcat 错误（整个红色部分）：

```
12-20 23:01:27.636: E/StrictMode(585): null
12-20 23:01:27.636: E/StrictMode(585): android.app.ServiceConnectionLeaked: Service     com.android.exchange.ExchangeService has leaked ServiceConnection     com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ceb270 that was originally     bound here
12-20 23:01:27.636: E/StrictMode(585):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-20 23:01:27.636: E/StrictMode(585):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-20 23:01:27.636: E/StrictMode(585):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-20 23:01:27.636: E/StrictMode(585):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-20 23:01:27.636: E/StrictMode(585):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId  (AccountServiceProxy.java:116)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-20 23:01:27.636: E/StrictMode(585):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-20 23:01:27.636: E/StrictMode(585):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-20 23:01:27.636: E/StrictMode(585):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-20 23:01:27.636: E/StrictMode(585):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-20 23:01:27.636: E/StrictMode(585):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-20 23:01:27.636: E/StrictMode(585):  at java.lang.Thread.run(Thread.java:856) 
```

这是我的源文件：

```
package com.example.rockpaperscissorlizardspock;
import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.*;
import android.view.View.OnClickListener;

public class rockpaperscissorlizardspock extends Activity {
    /** Called when the activity is first created. */

    private TextView resultText;
    private Button play, reset;
    private ImageButton scissors, paper, rock, lizard, spock;
    private int paperimg, paper_pressedimg, scissorsimg, scissors_pressedimg,     rockimg, rock_pressedimg, lizardimg, lizard_pressedimg, spockimg, spock_pressedimg;
        private ImageView compSciss, compPaper, compRock, compLiz, compSpock;
    Random rand = new Random();
    int compChoice = 0;
    String pChoice ="";
    String cChoice = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Initialize();
    }

    /** initialize all of the components*/
     private void Initialize()
    {
        play = (Button) findViewById(R.id.button1);
        reset = (Button) findViewById(R.id.button2);
        resultText = (TextView) findViewById(R.id.resultText);
        lizard = (ImageButton) findViewById(R.id.imageButton4);
        spock = (ImageButton) findViewById(R.id.imageButton5);
        scissors = (ImageButton) findViewById(R.id.imageButton3);
        paper = (ImageButton) findViewById(R.id.imageButton2);
        rock = (ImageButton) findViewById(R.id.imageButton1);
        compSciss = (ImageView) findViewById(R.id.computerScissors);
        compPaper = (ImageView) findViewById(R.id.computerPaper);
        compRock = (ImageView) findViewById(R.id.computerRock);
        spockimg = R.raw.spock;
        spock_pressedimg = R.raw.spock_pressed;
        lizardimg = R.raw.lizard;
        lizard_pressedimg = R.raw.lizard_pressed;
        paperimg = R.raw.paper;
        paper_pressedimg = R.raw.paper_pressed;
        scissorsimg = R.raw.scissors;
        scissors_pressedimg = R.raw.scissors_pressed;
        rockimg = R.raw.rock1;
        rock_pressedimg = R.raw.rock1_pressed;

        /**set the button Listeners*/
        play.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                play();
            }
        });

        reset.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                paper.setImageResource(paperimg);

                 rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                lizard.setImageResource(lizardimg);
                spock.setImageResource(spockimg);
                compPaper.setImageResource(paperimg);
                compRock.setImageResource(rockimg);
                compSciss.setImageResource(scissorsimg);
                compLiz.setImageResource(lizardimg);
                compSpock.setImageResource    (spockimg);               
                pChoice = "";
                cChoice = "";
                play.setEnabled(false);
                reset.setEnabled(true);
                scissors.setEnabled(true);
                paper.setEnabled(true);
                rock.setEnabled(true);
                lizard.setEnabled(true);
                spock.setEnabled(true);
                resultText.setText("");
            }
        });

        /*
         * Declaring what happens when specific choices are made.
         */

        scissors.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){    
                     scissors.setImageResource(scissors_pressedimg);
                    paper.setImageResource(paperimg);
                    rock.setImageResource(rockimg);
                    spock.setImageResource(spockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "S";
                    play.setEnabled(true);
             }
         });

         paper.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                    paper.setImageResource(paper_pressedimg);
                    scissors.setImageResource(scissorsimg);
                    spock.setImageResource(spockimg);
                    rock.setImageResource(rockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "P";
                    play.setEnabled(true);
            }
         });

        rock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                rock.setImageResource(rock_pressedimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                spock.setImageResource(spockimg);
                lizard.setImageResource(lizardimg);
                pChoice = "R";
                play.setEnabled(true);
            }
        });

        lizard.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                 lizard.setImageResource(lizard_pressedimg);
                 spock.setImageResource(spockimg);
                 rock.setImageResource(rockimg);
                 scissors.setImageResource(scissorsimg);
                 paper.setImageResource(paperimg);
                 pChoice = "L";
                 play.setEnabled(true);
            }
         });

        spock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                spock.setImageResource(spock_pressedimg);
                lizard.setImageResource(lizardimg);
                rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                pChoice = "SP";
                play.setEnabled(true);
            }
        });

    }

    /**The method that chooses the computer's move and compares
     *  to the player's move.
     */
    public void play()
    {
        compChoice = rand.nextInt(5);

        if(compChoice == 0)
        {
            cChoice = "R";
            compRock.setImageResource(rock_pressedimg);
            }
        else if(compChoice == 1){
            cChoice = "P";
            compPaper.setImageResource(paper_pressedimg);
        }       
         else if(compChoice == 2)
        {
            cChoice = "S";
            compSciss.setImageResource(scissors_pressedimg);
            }
        else if(compChoice == 3)
           {
            cChoice = "L";
             compLiz.setImageResource(lizard_pressedimg);
            }
        else if(compChoice == 4)
       { 
       cChoice = "SP";
       compSpock.setImageResource(spock_pressedimg);
       }

    check();
}

/**
 * Compares the Computer's and the Player's moves.
 */
public void check()
{
    if(pChoice == "R") //Rock
    {
        if(cChoice == "R")
            resultText.setText("Draw");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");
    }

    else if(pChoice == "P") //Paper
    {
        if(cChoice == "R")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("Draw");

        else if(cChoice == "S")
            resultText.setText("You Lose");

        else if(cChoice == "SP")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Lose");

    }

    else if(pChoice == "S") //Scissors
    {
        if(cChoice == "R")
            resultText.setText("You Lose");

        else if(cChoice == "P")
            resultText.setText("You Win");

        else if(cChoice == "S")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");

    }

    else if(pChoice == "L") //Lizard
    {
      if(cChoice == "R")
        resultText.setText("You Lose");

      else if(cChoice == "L")
        resultText.setText("Draw");

      else if(cChoice == "SP")
        resultText.setText("You Win");

      else if(cChoice == "S")
        resultText.setText("You Lose");

      else if(cChoice == "P")
        resultText.setText("You Win");
    }

    else if(pChoice == "SP") //Spock
    {
        if(cChoice == "SP")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "R")
            resultText.setText("You Win");

    }

    gameOver();
}

/**
 * Runs at the end of each round. Disables all of the buttons
 * except for the reset button.
 */
public void gameOver()
{
    play.setEnabled(false);
    scissors.setEnabled(false);
    rock.setEnabled(false);
    paper.setEnabled(false);
    spock.setEnabled(false);
    lizard.setEnabled(false);
    reset.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:18:09.997

你会遇到一个棘手 `com.android.exchange.ExchangeService has leaked...`
的错误有时会发生这种错误，与你的代码无关。
我建议您这样做，但不能保证它是否会起作用。

1.  对于模拟器，尝试创建一个新的 AVD 并在那里进行测试。
2.  至于您的设备，请卸载应用程序并重试。如果它再次发生，请告诉我它是否在第一次尝试时发生。

# sqlalchemy - 从查询对象中删除行

> ID：13982116
> 
> 赞同：0
> 
> 时间：2012-12-20T23:23:58.920
> 
> 标签：sqlalchemy

我想知道是否可以在进行批量更新之前从查询对象中删除一些随机行。

**例子：**

```
writerRes = self.session.query(table)
writerRes = writerRes.filter(table.userID==3)
-> Delete some of the rows randomly
writerRes.update({"userID": 4}) 
```

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:02:17.747

[使用 SA 选择随机行](https://stackoverflow.com/questions/60805/getting-random-row-through-sqlalchemy)取决于数据库。基于那个答案。

Postgresql 和 Sqlite3：

```
number_of_random_rows = 3
rand_rows = session.query(table.userid).order_by(func.random()).limit(number_of_random_rows).subquery()
session.query(table).filter(table.userid.in_(rand_rows)).delete(synchronize_session='fetch') 
```

MySQL：

```
number_of_random_rows = 3
rand_rows = session.query(table.userid).order_by(func.rand()).limit(number_of_random_rows).subquery()
session.query(table).filter(table.userid.in_(rand_rows)).delete(synchronize_session='fetch') 
```

...

# android - 如何在Android上触摸和拉动文本以绕圈旋转？

> ID：13982118
> 
> 赞同：1
> 
> 时间：2012-12-20T23:24:28.027
> 
> 标签：android, text, rotation, touch, android-canvas

我在圆圈上有一些文字，我希望用户能够触摸和拖动文本，并让它沿着圆圈移动......

我使用 Canvas 做到了这一点，但我不知道如何让它以这种方式响应触摸。我不反对重新开始并采用非画布方法。

我怎样才能做到这一点？伪代码将不胜感激。

![圆圈上的文字](../Images/55ca7924c8ff354b6f7b0ad3136f165b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:33:12.383

我可能错了，但考虑到这是一张画布。然后，您的工作就是检测触摸了哪些文本。

为视图设置 onTouchListener 后，您将获得 ACTION_DOWN 事件的事件坐标。您检查并获取被触摸的文本。如果没有，则返回 false。否则，返回真。

现在，如果用户移动他的手指，您将收到更多带有 ACTION_MOVE 的事件。在这种情况下，您可能希望根据此事件与上一个事件之间的差异来移动所选文本。一旦你计算出文本的新位置，你就会调用`invalidate()`which 应该强制重绘。

最后，当用户停止移动时，您将收到一个带有 ACTION_UP 的事件。那就是您必须将文本放回其原始位置或任何您想要的位置。

# php - 如何从 Web 应用程序获取 linux 分区信息（df 命令）

> ID：13982119
> 
> 赞同：0
> 
> 时间：2012-12-20T23:24:45.963
> 
> 标签：php, ssh, cpanel, partitioning, whm

我的朋友有某种管理面板，他在其中显示来自多个服务器的信息。他正在使用[cPanel XML api](http://www.google.se/url?sa=t&rct=j&q=cpanel%20xml%20api&source=web&cd=5&cad=rja&ved=0CGIQFjAE&url=https://github.com/CpanelInc/xmlapi-php&ei=yp7TUI-FM6nB0QG8goFA&usg=AFQjCNFtbE5wDK40s1eqLi0tC6VaErUyjw&bvm=bv.1355534169,d.dmQ)来显示一些东西，例如服务器负载平均值，代码看起来像这样：

```
include("xmlapi.php");

$conf = simplexml_load_file("servers.xml");

foreach ( $conf->server as $server ) {
    $xmlapi = new xmlapi( $server->ip );
    $xmlapi->set_debug(1);
    $xmlapi->hash_auth( $server->user, $server->accesshash);
    $loadavg = $xmlapi->loadavg();

    print $server->ip . " - " . $loadavg->one . " - " . $loadavg->five . " - " . $loadavg->fifteen;
} 
```

我一直在阅读[wiki](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/XmlApi)，但我发现更接近的是检索帐户磁盘使用情况。但我需要来自以 root 身份在 ssh 中运行的“df”命令的信息。**什么是更容易和最安全的方法？**因为我需要从多台服务器而不是从运行代码的服务器获取 df 命令输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:36:48.053

为什么需要以“root”身份运行 df？我当然可以在我的 Linux 机器上以自己的身份运行它？（是的，这是一个问题，而不是一个答案）

假设您对机器具有完全访问权限，您可能会设置一个用户帐户“df”，它在 sudoers 中列出，带有`!authenticate`属性（因此它可以在没有密码的情况下执行 sudo），然后`ssh df@${machine} sudo df` 您还可以限制 sudo 以便 df“用户可以只做df，而不做，例如`rm -rf /`或`adduser blah`

当然，将您的 ssh 设置为使用公钥/私钥挑战，而不是使用您的 php 代码在源代码中设置密码 - 如果没有别的，因为它使其更灵活，并且您不必更新源代码您决定更改密码。

# mips32 - 在 mips32 上加载字节

> ID：13982126
> 
> 赞同：1
> 
> 时间：2012-12-20T23:25:26.853
> 
> 标签：mips32

我从 mips32 开始，当我试图从字符串中获取一个字母来打印它时我被卡住了。代码应该获取字符串，逐个字符地打印它，当它找到一个`i`print时`iiing`。

```
.data
msg: .asciiz "testing"
i: .asciiz "iiing"

.text

.globl main

main:           
    la $t0, msg
    la $t1, i
    li $t2, 0
loop:
     bneq $t0, 105, end #$t0=i?
     lb $a0, ($t0)
     li $v0, 4
     syscall
     addi $t0, $t0, 1
     b loop

end:
     move $a0, $t1
     li $v0, 4
     syscall 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:39:33.980

你有几个问题。

1.  您正在比较`$t0`，这是当前字符的*地址，而不是字符本身。*将该测试移到该`lb`行下方并针对`$a0`.

2.  `105`在 ASCII 中是`E`，不是`i`。尝试`151`（或者更正常，`0x69`）。

3.  你想比较`beq`，不是`bneq`。

4.  在循环内部，您应该使用`11`打印单个字符的 syscall ，而不是`4`打印字符串的当前系统调用。

5.  您的程序最后不会进行退出系统调用 ( `10`)。

您可以查看[此链接](http://www.doc.ic.ac.uk/lab/secondyear/spim/node8.html)以获取系统调用列表。

这是一个完整的工作程序供参考：

```
 .data

msg: .asciiz "testing"
i:   .asciiz "iiing"

    .text
    .globl main

main:           
    la $t0, msg
    la $t1, i
    li $t2, 0

loop:
    lb $a0, ($t0)
    beq $a0, 0x69, end
    li $v0, 11
    syscall
    addi $t0, $t0, 1
    b loop

end:
    move $a0, $t1
    li $v0, 4
    syscall
    li $v0, 10
    syscall 
```

# java - 如何使用 Wordpress 在 Spring Web 应用程序中对用户进行身份验证？

> ID：13982130
> 
> 赞同：2
> 
> 时间：2012-12-20T23:25:39.197
> 
> 标签：java, wordpress, spring

有没有办法使用 wordpress 安全性来验证用户，类似于使用 facebook 或 twitter 进行身份验证？似乎在使用 facebook 进行身份验证时，应用程序会在其会话中注入一些东西，以允许请求应用程序知道用户已通过身份验证并已登录。wordpress 中有什么东西或者我可以写一些东西来提供这个设施。

我想有一个用于静态信息的 wordpress 站点，而对于更动态的类型信息，请使用 spring web 应用程序。类似于您对托管 html 文件的 apache Web 服务器所做的操作，并为 jsp 移动到 tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:27:20.720

[使用 Spring Security](http://www.packtpub.com/article/opening-up-to-openid-with-spring-security)进行 OpenID 身份验证非常容易。如果您不想自己做，您可能需要考虑使用[Janrain Engage](http://janrain.com/products/engage/)来支持各种“社交登录”。

# html - 如何在 CSS3 中只为 2 的背景设置动画？

> ID：13982136
> 
> 赞同：1
> 
> 时间：2012-12-20T23:26:41.413
> 
> 标签：html, css

大家好，我有这个**CSS 样式**：

```
body { 
    width:100%;
    height:100%; 
    background:#fff;
    background-image: url(bg.png), url(clouds.png);
    background-repeat: repeat;
    font-family: tahoma;
    font-size: 14px;
    margin:0;
}

@-webkit-keyframes float {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 1200px 0;
    }
}

@media only screen and (min-device-width: 1024px) {
    body {
      -webkit-animation-name: float;
      -webkit-animation-duration: 60s;
      -webkit-animation-iteration-count: infinite;
      -webkit-animation-timing-function: linear;
        -moz-animation-name: float;
        -moz-animation-duration: 60s;
        -moz-animation-iteration-count: infinite;
        -moz-animation-timing-function: linear;
    }
} 
```

此代码为**bg.png**图像设置动画。但我想为**cloud.png**图像制作动画。我可以做些什么来动画**cloud.png**而不是**bg.png**？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:01:16.033

**改变了这个：** `background-image: url(bg.png), url(clouds.png);`

**在这：** `background-image: url(clouds.png), url(bg.png);`

# java - 使用扫描仪生成数组

> ID：13982147
> 
> 赞同：1
> 
> 时间：2012-12-20T23:27:47.990
> 
> 标签：java, java.util.scanner

我正在使用 java 并希望使用 Scanner 来获取用户输入然后输出数组。

我创建了一个适用于其中一个的文件和一个单独的文件适用于另一个，但我想询问用户问题并获取自定义数组属性（可变数量的数组、可变行、可变列、变量加法、减法和数组的乘法）

```
import java.util.Scanner;
import java.io.IOException;

public class ScannerDemoforNetbeans
{

public static void main (String [] args)throws IOException
{
//`enter code here`
System.out.println ("Okay, you got it! How many rows  do you want");
   Scanner rc= new Scanner (System.in);
   public static rows;
   rows= rc.nextInt();
   System.out.println ("How many columns do you want?");
   Scanner c = new Scanner (System.in);
   public static columns;
   columns = c.nextInt();
   System.out.println ("Rows" + rows);
   System.out.println ("Columns:" + columns);

}
   // }   
   // public static void createarray (String [] args)
   // {
    int matWidth = ScannerDemoforNetbeans.columns;
        int matHeight = ScannerDemoforNetbeans.rows;
        int maxCellValue = 70;

                    int [][] mat1 = new int [matHeight][matWidth];
                    int [][] mat2 = new int [matHeight][matWidth];
                    int [][] sum = new int [matHeight][matWidth];

                    for (int i=0; i<matHeight; ++i)
                    {
                        for (int j=0; j<matWidth; ++j)
                        {
                            java.util.Random r = new java.util.Random();
                            mat1 [i][j]= r.nextInt (maxCellValue);
                            mat2 [i][j] = r.nextInt (maxCellValue);
                        }
                    }

                    print2Darray (mat1);
                    System.out.println ();
                    print2Darray (mat2);
                    for (int i=0; i<matHeight; ++i)
                    {
                        for (int j=0; j<matWidth; ++j)
                        {
                            sum [i][j]= mat1 [i][j] + mat2 [i][j];
                        }
                    }
                    System.out.println ();
                    print2Darray (sum);
    }
    public static void print2Darray (int[][]arr)
    {
        for (int [] i : arr)

        {
          for (int j : i)  
          {
              System.out.print (j + " ");
          }
        System.out.println();
        }
    System.out.println ();
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:54:31.817

```
package araay;
import java.util.Scanner;

public class Araay {

    public static void main(String[] args)
    {

      Scanner a=new Scanner(System.in);
     int i=0;
     int j=0;
     int arr[][]=new int [3][3];
     System.out.println ("Enter the numbers");

     for (i=0;i<=3;i++)
          for(j=0;j<=3;j++)
     arr[i][j]=a.nextInt();>>>Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
    at araay.Araay.main(Araay.java:18)//this error is occur in this code plz solve it

     for (i=0;i<=3;i++)
     for(j=0;j<=3;j++)
      System.out.println("The matrix of array is "+arr[i][j]+"\t");
      System.out.println();
    }

} 
```

# python - 如何在 Aptana 3 中使用 Tkinter？

> ID：13982156
> 
> 赞同：1
> 
> 时间：2012-12-20T23:29:06.143
> 
> 标签：python, tkinter, aptana

我一直在使用 IDLE 和 Tkinter，但它一直在我身上崩溃，所以我正在使用 PyDev 切换到 Aptana Studio 3（我已经用于 Web 开发）。我无法让 Tkinter 正确导入。我已经通过项目属性菜单编辑了 sys.path 中的路径，以包含[IDLE 网站上显示](http://www.python.org/getit/mac/tcltk/#how-python-chooses-which-tk-release-to-use)的位置，但它仍然没有导入模块。

有没有人尝试将 Tkinter 与 Aptana 3 一起使用？关于从这里去哪里的任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:50:35.150

[http://pydev.org/manual_101_root.html](http://pydev.org/manual_101_root.html)的第一行说：

“本手册假定您的机器中已经安装了 Python 和/或 Jython 和/或 IronPython，以及 Eclipse、Aptana Studio 2 或 Aptana Studio 3。”

所以它应该适用于 Aptana 3 :-)

您确定根据您的 python 版本使用正确的 from Tkinter import / from tkinter import 吗？

另外，您是否检查过库是否正确加载到 Aptana 中？/lib/ 和 /Lib/ 有一些东西可能会导致问题。（不确定这是否是您对 sys.path 所做的意思？）

# nuget - 如何创建解决方案级别的 NuGet 包？

> ID：13982158
> 
> 赞同：19
> 
> 时间：2012-12-20T23:29:12.250
> 
> 标签：nuget

如何创建解决方案级 NuGet 包。也就是说，它不涉及任何项目，并列在 .nuget\packages.config 中（不在任何项目级 packages.config 文件中）。

例如，psake 和 RavenDB.Server 是解决方案级别的 NuGet 包。

我在 .nuspec 文件或 nuget.exe 的文档中找不到任何关于解决方案级包的内容。当他们调用 nuget pack 时，我在这两个项目的构建过程中找不到任何特别之处。事实上，我根本找不到一个关于创建解决方案级包的搜索结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T01:33:08.917

我找到了 Phil Haack 的简短评论。它来自CodePlex 上的一个[问题：](http://nuget.codeplex.com/workitem/1049)

> 我们已经支持这一点。只是不要将任何内容放在 /Content 文件夹或 /Lib 文件夹中。如果您的包仅在 /Tools 文件夹中有内容，则该包将不会安装在项目中。

还没有机会对此进行测试，但这听起来像是您正在寻找的东西。快速浏览一下 RavenDB.Server 包（将 .nupkg 重命名为 .zip）揭示了一个与 Phil 在他的评论中所说的一致的设置。没有内容文件夹，没有 lib 文件夹。很多文件。这些文件不在`/tools`文件夹中，所以我认为可以安全地假设这不是必需的。

# node.js - 使用 Mongoose 模式验证密码/确认密码

> ID：13982159
> 
> 赞同：14
> 
> 时间：2012-12-20T23:29:16.977
> 
> 标签：node.js, mongodb, express, mongoose

我有一个`userSchema`看起来像这样的：

```
var userSchema = new Schema({
    name: {
      type: String
    , required: true
    , validate: [validators.notEmpty, 'Name is empty']
    }
  , username: {
      type: String
    , required: true
    , validate: [validators.notEmpty, 'Username is empty']
    }
  , email: {
      type: String
    , required: true
    , validate: [
        { validator: validators.notEmpty, msg: 'Email is empty' }
      , { validator: validators.isEmail, msg: 'Invalid email' }
      ]
    }
  , salt: String
  , hash: String
}); 
```

到目前为止，我所有的验证都在模式中进行，我想知道如何通过密码验证来实现这一点。用户在两个字段中输入密码，模型应该检查它们是否相同。

这种验证是否属于模式？我是这种验证的新手。

我应该如何验证密码？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-23T22:50:32.833

我最终发现您可以使用**虚拟路径**和`invalidate`函数的组合来实现这一点，如本要点所示，用于匹配密码的相同目的：[https ://gist.github.com/1350041](https://gist.github.com/1350041)

直接引用：

```
CustomerSchema.virtual('password')
.get(function() {
  return this._password;
})
.set(function(value) {
  this._password = value;
  var salt = bcrypt.gen_salt_sync(12);
  this.passwordHash = bcrypt.encrypt_sync(value, salt);
});

CustomerSchema.virtual('passwordConfirmation')
.get(function() {
  return this._passwordConfirmation;
})
.set(function(value) {
  this._passwordConfirmation = value;
});

CustomerSchema.path('passwordHash').validate(function(v) {
  if (this._password || this._passwordConfirmation) {
    if (!val.check(this._password).min(6)) {
      this.invalidate('password', 'must be at least 6 characters.');
    }
    if (this._password !== this._passwordConfirmation) {
      this.invalidate('passwordConfirmation', 'must match confirmation.');
    }
  }

  if (this.isNew && !this._password) {
    this.invalidate('password', 'required');
  }
}, null); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-21T15:19:36.033

我认为密码匹配属于客户端界面，不应该到达服务器（数据库层已经太多了）。对于用户体验来说，最好不要仅仅为了告诉用户 2 个字符串不同而进行服务器往返。

至于瘦控制器、胖模型……所有这些灵丹妙药都应该回击鼻祖。在任何情况下都没有好的解决方案。在他们自己的背景下思考他们每个人。

在这里引入胖模型的想法，使您可以将功能（模式验证）用于完全不同的目的（密码匹配），并使您的应用程序依赖于您现在使用的技术。有一天你会想要改变技术，你会得到一些根本没有模式验证的东西......然后你必须记住你的应用程序的那部分功能依赖于它。而且您必须将其移回客户端或控制器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-27T18:30:47.403

我知道线程很旧，但如果它可以节省某人的时间......我的方法使用预验证钩子并且非常适合我

```
schema.virtual('passwordConfirmation')
    .get(function() {
      return this._passwordConfirmation;
    })
    .set(function(value) {
        this._passwordConfirmation = value;
    });

schema.pre('validate', function(next) {
    if (this.password !== this.passwordConfirmation) {
        this.invalidate('passwordConfirmation', 'enter the same password');
    }
    next();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T00:00:28.537

我在 express-validator 降到 ./routes/signup.js 中的模式级别之前使用它：

```
exports.post = function(req, res){
  req.assert('email', 'Enter email').notEmpty().isEmail();
  req.assert('username', 'Enter username').notEmpty().isAlphanumeric().len(3,20);
  req.assert('password', 'Enter password').notEmpty().notContains(' ').len(5,20);

  res.locals.err = req.validationErrors(true);

  if ( res.locals.err ) {
    res.render('signup', { message: { error: 'Woops, looks like we need more info...'} });
    return;
  }

  ...//save
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T01:25:58.360

您可以通过向模型实例添加新的函数属性来将自定义方法附加到模型实例[`Schema.methods`](http://mongoosejs.com/docs/guide.html#methods)（您也可以使用创建模式函数[`Schema.statics`](http://mongoosejs.com/docs/guide.html#statics)。）这是一个验证用户密码的示例：

```
userSchema.methods.checkPassword = function(password) {
    return (hash(password) === this.password);
};

// You could then check if a user's password is valid like so:
UserModel.findOne({ email: 'email@gmail.com' }, function(err, user) {
    if (user.checkPassword('secretPassword')) {
        // ... user is legit
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T07:08:49.187

注册时无需提交二次验证密码。您可能会在客户端验证这两个字段是否相等而侥幸逃脱。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-03T23:49:11.837

这有点晚了，但为了人们有类似的问题。我最近遇到了类似的问题，这就是我的解决方法；我使用了一个名为 joi 的库

```
const joi = require('joi');
     ...
function validateUser(user){
  const schema = joi.object({
    username: joi.string().min(3).max(50).required(),
    email: joi.string().min(10).max(255).required().email(),
    password: joi.string().min(5).max(255).required(),
    password2: joi.string().valid(joi.ref('password')).required(),
  });

  return schema.validate(user);
}

exports.validate = validateUser; 
```

# php - stomp->hasFrame() 用队列中的消息返回 false

> ID：13982163
> 
> 赞同：1
> 
> 时间：2012-12-20T23:29:40.923
> 
> 标签：php, activemq, stomp

当使用 ActiveMQ 队列中的数据时，我遇到了以下问题

使用以下代码：

```
$stomp = new Stomp($activeMQURI);
$stomp->subscribe($queue);
while ($stomp->hasFrame()) {

    $frame = $stomp->readFrame();

    if ($frame) {
        $stomp->ack($frame);
    }

} 
```

在 $stomp->hasFrame() 返回 false 之前，它只会循环大约 1-10 条消息。问题是队列中还有 10k 条消息！

当我在确认后延迟时，一切都按预期工作：

```
$stomp = new Stomp($activeMQURI);
$stomp->subscribe($queue);
while ($stomp->hasFrame()) {

    $frame = $stomp->readFrame();

    if ($frame) {
        $stomp->ack($frame);
        sleep(1);
    }

} 
```

我在想这是因为 ActiveMQ 服务器在消费者（我的代码）请求另一个帧之前没有机会处理 ack。谁能解释发生这种情况的真正原因，也许比睡眠更好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:07:10.717

您并没有真正指定您使用的是什么客户端，所以这是一个一般性的答案。大多数客户端提供一个阻塞接收调用，或者定时或无限等待，当消息到达时返回，或者在定时情况下指示失败。代理向您的客户端发送消息的速度取决于很多因素，例如目的地上的消费者数量、每个消费者设置的预取大小以及网络速度等。您的代码不应该期望立即转身，并且能够处理消息流量停滞的情况。这是我能给出的最好的答案，因为我对你的设置一无所知。

# javascript - YouTube HTML5 播放器在 seekTo 后出现黑屏。我的错误还是 YouTube 的？

> ID：13982164
> 
> 赞同：1
> 
> 时间：2012-12-20T23:29:45.723
> 
> 标签：javascript, html, youtube

更新：没有收到对此问题的解释/解决方案，并将其作为潜在缺陷报告给 Google：

[https://code.google.com/p/gdata-issues/issues/detail?id=3917](https://code.google.com/p/gdata-issues/issues/detail?id=3917)

我正在一个网站上工作，我想在其中使用 YouTube 的**HTML5**播放器以预定义的时间戳显示视频的各个部分。我相信代码可以在 Flash 播放器上正常工作。

为了论证起见，在引用的视频中，我希望以 10 秒和 25 秒的时间戳显示视频。

我认为我做的一切都是正确的。视频被多次加载，“onReady”，代码调用“seekTo”时间码，然后暂停播放。

这是代码。如果您对 JSBin 不熟悉，请单击“输出”屏幕右上角的“使用 JS 运行”来运行它。

[http://jsbin.com/ereneh/3/edit](http://jsbin.com/ereneh/3/edit)

我觉得好像我已经尝试了所有排列，但我无法让视频在时间戳处显示视频的屏幕截图。如果我手动将视频播放到时间戳然后暂停，它可以工作（如预期的那样）。如果我让代码运行然后点击“播放”，视频将从正确的时间戳恢复，并且图像似乎立即出现。

我是否错误地使用了 API 和/或忽略了某些东西？这是一个错误吗？

控制台显示重复的 404，但是一旦单击“播放”就会出现这些，并且没有明显的问题结果；视频按预期播放。

获取[http://www.youtube.com/get_video?noflv=1&video_id=vn57vxP4M18&el=embedded&eurl=unknown&fmt=43&ptk=youtube_none&splay=1&start=25000](http://www.youtube.com/get_video?noflv=1&video_id=vn57vxP4M18&el=embedded&eurl=unknown&fmt=43&ptk=youtube_none&splay=1&start=25000) 404（未找到）

# nservicebus - 订阅数据库前的 Memcached

> ID：13982165
> 
> 赞同：0
> 
> 时间：2012-12-20T23:29:46.523
> 
> 标签：nservicebus

我想知道是否可以将 memcached 放在订阅数据库前面。我知道 NServiceBus 正在使用 NHibernate，它支持 memcached。

我们的订阅数据库遇到了一些不稳定的问题，并且由于订阅很少更改，因此它们将是存储在 memcached 中的绝佳候选者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:36:42.700

如果 NHibernate 支持它，它就会工作。您可能需要考虑在数据库中内置和/或支持一些冗余。

# android - 将 strings.xml 翻译成其他语言 - Eclipse 工具？

> ID：13982166
> 
> 赞同：0
> 
> 时间：2012-12-20T23:29:48.333
> 
> 标签：android, localization, translation

我正在寻找一个很好的解决方案来将我的 strings.xml 翻译成各种其他语言。我听说过 motodev，但我无法访问此站点，而且似乎不再支持此站点...

你知道我可以轻松翻译我的字符串的任何替代方法吗？

谢谢！

编辑：对不起，我应该更准确地说：我想自己翻译字符串，我只是在寻找一个工具，指出哪些字符串尚未翻译，并且可以比较两个或多个不同的字符串。 xml（不同的语言）

例如：

你叫什么名字？| 是登的名字吗？我叫乔治 | - - 失踪 - - -

因此，如果缺少某些内容，我不必在每个 strings.xml 中搜索...

问候并感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:13:21.603

翻译 Strings.xml 没有简单的方法。除非您有人为您翻译，否则您将永远无法为几乎任何超过两个单词的句子获得好的翻译。

我建议不要使用自动翻译，因为在我的一个应用程序中放入了一些内容后，由于翻译质量很差，我收到了许多邮件和差评。

但是，如果您仍然想这样做，谷歌翻译与机器交易一样准确。

# android - Android 颜色（Paint 中的 setColor）需要负整数？

> ID：13982172
> 
> 赞同：2
> 
> 时间：2012-12-20T23:30:02.813
> 
> 标签：android

我只是想在 Android 中绘制/绘制画布。但是，当我使用十六进制值或使用 setARGB 方法设置颜色时，它不起作用。但是当我使用 Color.x（例如 Color.GREEN）时，它可以工作。这是代码：

```
 Bitmap image = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(image);
    Paint paintBackground = new Paint();
    int green = Color.argb(0, 0, 255, 0); // 65280 (Won't work)
    green = 0x0000ff00; // 65280 (Won't work)
    paintBackground.setARGB(0, 0, 255, 0);
    green = paintBackground.getColor(); // 65280 (Won't work)
    green = Color.GREEN; // -16711936 (Works!)
    paintBackground.setColor(green);
    green = paintBackground.getColor(); // -16711936
    paintBackground.setStyle(Paint.Style.FILL);
    canvas.drawRect(0, 0, bitmapWidth, bitmapHeight, paintBackground); 
```

所以基本上 Color.GREEN 返回 -16711936 - 这很有效。但是，十六进制值是 65280 - 这不起作用。也就是说，它不会绘制绿色矩形。

我需要使用十六进制值，因为我需要将颜色设置为`0x00ffff00`此处，然后再设置为不同的十六进制值。

Android 颜色（Paint 中的 setColor）是否需要负整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T23:31:42.730

问题是`0x0000ff00`不是*绿色*，而是完全*透明的绿色*。正如您已经注意到的那样，完全*不透明的绿色*将是。同样，在使用时，您需要指定alpha 以使颜色完全*不透明*。`0xff00ff00``-16711936``setARGB``255`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T21:05:27.283

颜色包含 4 个字段，alpha、红色、绿色和蓝色。每当任何事情大多不透明时，它都是负面的。50.2%*透明*绿色为正 (0x7F00FF00/2,130,771,712)，49.8%*透明*绿色为负 (0x8000FF00/-2,147,418,368)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T20:50:06.460

您也可以调用`Color.rgb(0, 255, 0)`. `rgb()`默认情况下，alpha 为 255，完全不透明。*

# java - 从 jar 文件中读取声音文件

> ID：13982174
> 
> 赞同：5
> 
> 时间：2012-12-20T23:30:28.477
> 
> 标签：java, audio, jar

所以我一直在制作游戏，并决定要为它制作音效。我可以很好地播放声音，直到我将类文件和（和 wav 音频文件）打包到 jar 中，却发现它找不到文件。我`getClass().getResource("sounds/enemyExplode.wav")`用来获取文件。我应该使用其他方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T21:56:56.153

在一个 jar 中，我了解到使用 getResourceAsStream() 效果更好。如果您使用的是 AudioInputStream，那么它也同样有效：

```
AudioInputStream ais = AudioSystem.getAudioInputStream
(Sound.class.getResourceAsStream(fileName)); 
```

这就是文件名的外观（soundbase，在您的情况下是“声音”）：

```
"/" + soundbase + "/" + file.wav 
```

我有一个功能齐全的声音课程，几年前我在网上的某个地方找到了它，效果很好。我稍微修改了它，但如果你想让我发布它，它应该适用于大多数情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T02:11:30.120

The class loader's **getResource()** method operates on resources within the class path. If you have the sounds at the following location in the JAR:

```
/sounds/enemyExplode.wav 
```

Then you need to use a leading slash in front of the path (just as above) in that call.

Remember a JAR file is really nothing more than a packaged up version of the filesystem (same format as a zip) and the class loader operates upon it as it would if it were a filesystem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T03:38:05.897

首先，确保您的声音实际打包在 jar 文件中。您可以使用任何支持 zip 的存档器打开 jar 文件。

其次，当您调用时，`blabla.getClass().getResources("sounds")`您相对于 blabla 的类路径进行操作，这意味着包含 blabla 的完整包名将被添加到“声音”以解析 jar 文件中的完整路径。

如果要指定绝对路径，只需在路径前加上斜杠：`blabla.getClass().getResources("/sound")`

# search - index 'delta': lock: 未能锁定 sphinx_test.spl: 没有这样的文件或目录；索引不可用

> ID：13982177
> 
> 赞同：1
> 
> 时间：2012-12-20T23:31:25.333
> 
> 标签：search, sphinx

当 Sphinx 启动时，我收到以下警告：

> 警告：compat_sphinxql_magics=1 已弃用；请更新您的应用程序和配置 警告：索引“delta”：锁定：锁定失败 C:\Sphinx\conf\sphinx_test.spl：没有这样的文件或目录；索引不可用

## 配置文件

```
source main
    {
        ...MYSQL options...
        sql_query_pre   = UPDATE delta_index SET last_index_time = NOW() WHERE counter_id = 1;
        sql_query_pre   = SET @a := 0;
        sql_query_pre   = SET NAMES utf8
        sql_query       = \
            SELECT @a := @a + 1 AS id, m.message_id AS mid, user_see.user_id AS user_see_id, ms.message_stream_id AS msid, \
            d.name AS dname, m.text AS mtext, CONCAT(user_write.first_name, ' ', user_write.last_name) AS name, ms.subject AS subj \
            FROM message_stream AS ms \
            INNER JOIN message m \
            ON m.message_stream_id = ms.message_stream_id \
            INNER JOIN user user_write \
            ON m.user_id = user_write.user_id \
            INNER JOIN message_stream_has_basket mshb \
            ON ms.message_stream_id = mshb.message_stream_id \
            INNER JOIN basket b \
            ON mshb.basket_id = b.basket_id \
            INNER JOIN department d \
            ON b.department_id = d.department_id \
            INNER JOIN user_has_department uhd \
            ON uhd.department_id = d.department_id \
            INNER JOIN user user_see \
            ON uhd.user_id = user_see.user_id \
            WHERE (b.user_id IS NULL OR uhd.user_id = b.user_id \
            AND m.date_created <= (SELECT last_index_time FROM delta_index WHERE counter_id = 1))
        sql_attr_uint       = user_see_id
        sql_attr_uint       = mid
        sql_attr_uint       = msid
    }

    source delta : main
    {
        sql_query_pre   = SET NAMES utf8
        sql_query       = \
            SELECT @a := @a + 1 AS id, m.message_id AS mid, user_see.user_id AS user_see_id, ms.message_stream_id AS msid, \
            d.name AS dname, m.text AS mtext, CONCAT(user_write.first_name, ' ', user_write.last_name) AS name, ms.subject AS subj \
            FROM message_stream AS ms \
            INNER JOIN message m \
            ON m.message_stream_id = ms.message_stream_id \
            INNER JOIN user user_write \
            ON m.user_id = user_write.user_id \
            INNER JOIN message_stream_has_basket mshb \
            ON ms.message_stream_id = mshb.message_stream_id \
            INNER JOIN basket b \
            ON mshb.basket_id = b.basket_id \
            INNER JOIN department d \
            ON b.department_id = d.department_id \
            INNER JOIN user_has_department uhd \
            ON uhd.department_id = d.department_id \
            INNER JOIN user user_see \
            ON uhd.user_id = user_see.user_id \
            WHERE ((b.user_id IS NULL OR uhd.user_id = b.user_id) \
            AND m.date_created > (SELECT last_index_time FROM delta_index WHERE counter_id = 1))
        sql_attr_uint       = user_see_id
        sql_attr_uint       = mid
        sql_attr_uint       = msid
    }

    index main
    {
        source      = main
        path        = C:\Sphinx\conf\sphinx_test
        docinfo     = extern
        charset_type    = utf-8
        charset_table   = 0..9, A..Z->a..z, a..z, -, \
                        U+00C1->U+00E1, U+00C9->U+00E9, U+00CD->U+00ED, \
                        U+00D3->U+00F3, U+00D6->U+00F6, U+0150->U+0151, \
                        U+00DA->U+00FA, U+00DC->U+00FC, U+0170->U+0171, \
                        U+00E1, U+00E9, U+00ED, U+00F3, U+00F6, U+0151, \
                        U+00FA, U+00FC, U+0171
        min_word_len    = 2
        enable_star = 1
        min_prefix_len  = 2
    }

    index delta : main
    {
        source      = delta
        path        = C:\Sphinx\conf\sphinx_test
        docinfo     = extern
        charset_type    = utf-8
        charset_table   = 0..9, A..Z->a..z, a..z, -, \
                        U+00C1->U+00E1, U+00C9->U+00E9, U+00CD->U+00ED, \
                        U+00D3->U+00F3, U+00D6->U+00F6, U+0150->U+0151, \
                        U+00DA->U+00FA, U+00DC->U+00FC, U+0170->U+0171, \
                        U+00E1, U+00E9, U+00ED, U+00F3, U+00F6, U+0151, \
                        U+00FA, U+00FC, U+0171
        min_word_len    = 2
        enable_star = 1
        min_prefix_len  = 2
    }

    indexer
    {
        mem_limit       = 32M
    }

    # searchd options (used by search daemon)
    searchd{
        listen      = 9310
        log         = C:\Sphinx\conf\searchd.log
        query_log       = C:\Sphinx\conf\query.log
        max_children    = 30
        pid_file    = C:\Sphinx\conf\searchd.pid
    } 
```

我正在运行 main+delta 索引，一切正常，搜索引擎正在搜索，我有正确的搜索结果。

```
C:\Sphinx\bin>indexer --config C:\Sphinx\conf\sphinx_test.conf main delta 
```

之后我运行增量索引，索引有正确的文档（只有新文档），但搜索引擎失败，我没有结果。似乎 delta 覆盖了 main。（我正在搜索主要和增量）

```
C:\Sphinx\bin>indexer --config C:\Sphinx\conf\sphinx_test.conf delta

C:\Sphinx\bin>searchd --config C:\Sphinx\conf\sphinx_test.conf 
```

# phalcon - Phalcon 无效文档错误

> ID：13982178
> 
> 赞同：0
> 
> 时间：2012-12-20T23:31:37.397
> 
> 标签：phalcon

我有一个名为 User 的 Phalcon\Mvc\Collection 模型。当我尝试通过这样的电子邮件获取用户时

```
User::findFirst(array("conditions" => array("email" => $email))); 
```

我得到两个不同的结果。如果变量 $email 包含数据库中存在的电子邮件，我会得到预期的结果。但是，如果变量 $email 不包含数据库中存在的电子邮件，我会收到“无效文档”消息。

Phalcon 版本 0.8.0。它似乎也适用于 0.7.0 版。

感谢您的时间和帮助。

# sql - 使用 tsql 如何确定复合外键的哪一列对应复合主键/唯一键的哪一列？

> ID：13982183
> 
> 赞同：0
> 
> 时间：2012-12-20T23:32:30.867
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想组合一个 sql 查询，它将显示复合外键的哪些列对应于它们的主/唯一键的哪些列。

例如，如果数据库有

```
CREATE TABLE TA
(
    B int,
    C int
)

ALTER TABLE TA ADD CONSTRAINT [UK_CB] UNIQUE NONCLUSTERED 
(
    C ASC,
    B ASC
)

CREATE TABLE TB
(
    D int,
    E int
)

ALTER TABLE TB ADD CONSTRAINT [FK_TA] FOREIGN KEY (D, E) REFERENCES TA(C, B) 
```

然后我希望查询返回

```
| Pk/Uk | PK/UK Column |  FK   | FK Column |
--------------------------------------------
| UK_CB |      C       | FK_TA |     D     |
| UK_CB |      B       | FK_TA |     E     | 
```

如果可能的话，我宁愿只使用 INFORMATION_SCHEMA 视图。

我知道 INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE，但这只会给我特定约束中的列。

我可以加入 INFORMATION_SCHEMA.COLUMNS 并使用序数位置做一些事情，但这会错误地假设关键引用是按序数顺序排列的。

有没有办法查询数据库以获得复合键之间的列对应关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:10:36.533

我在 INFORMATION_SCHEMA 视图中找不到经过验证的列顺序。但是，如果您可以使用系统目录视图（而不是 INFORMATION_SCHEMA 视图），您可以执行以下操作（这是一个[sql fiddle](http://sqlfiddle.com/#!3/02a5e/39)）。我看不到将其与 pk/uk 关联的直接方法，但您可以在 pk/uk 表中找到列：

```
SELECT
  fk.name as constraint_name,
  sfkc.constraint_column_id,
  sfkc.parent_column_id,
  fkt.name as fk_table,
  fkc.name as fk_column,
  sfkc.referenced_column_id,
  pkt.name as pk_table,
  pkc.name as pk_column
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns AS sfkc
  ON fk.object_id = sfkc.constraint_object_id
JOIN sys.tables AS fkt
  ON  sfkc.parent_object_id = fkt.object_id
JOIN sys.columns as fkc
  ON fkt.object_id = fkc.object_id
 AND sfkc.parent_column_id = fkc.column_id
JOIN sys.tables AS pkt
  ON sfkc.referenced_object_id = pkt.object_id
JOIN sys.columns as pkc
  ON pkt.object_id = pkc.object_id
 AND sfkc.referenced_column_id = pkc.column_id 
```

# django - 在生产服务器上收集静态命令

> ID：13982189
> 
> 赞同：0
> 
> 时间：2012-12-20T23:33:29.457
> 
> 标签：django

当我在本地服务器上设置 DEBUG=TRUE 时 - 一切正常。

但是我想在生产服务器上运行我的应用程序，所以我将我的代码推送到服务器上。然后在服务器上我运行**collectstatic**将所有静态文件复制到 STATIC_ROOT，我得到了这个错误：

![在此处输入图像描述](../Images/98da08d35163ba992321aad1fc1b3551.png)

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:37:52.170

看起来您为 Windows 机器指定了错误的路径（我认为您必须使用正斜杠而不是反斜杠，就好像它是 UNIX 路径一样？我不在 Windows 上使用 Python，所以我不确定）或者其他您指定的路径根本不存在。

# android - 使用 android bundle 时，为什么序列化堆栈反序列化为 ArrayList？

> ID：13982192
> 
> 赞同：10
> 
> 时间：2012-12-20T23:34:04.487
> 
> 标签：android, serialization, bundle

序列化：

```
Bundle activityArguments = new Bundle();
Stack<Class<? extends WizardStep>> wizardSteps = new Stack<Class<? extends WizardStep>>();
wizardSteps.push(CreateAlarmStep5View.class);
wizardSteps.push(CreateAlarmStep4View.class);
wizardSteps.push(CreateAlarmStep3View.class);
wizardSteps.push(CreateAlarmStep2View.class);
wizardSteps.push(CreateAlarmStep1View.class);

activityArguments.putSerializable("WizardSteps", wizardSteps); 
```

反序列化：

```
Stack<Class<? extends WizardStep>> wizardSteps = 
(Stack<Class<? extends WizardStep>>) getIntent().getExtras().getSerializable("WizardSteps"); 
```

例外：

> 12-20 23:19:45.698：E/AndroidRuntime(12145)：原因：java.lang.ClassCastException：java.util.ArrayList 无法转换为 java.util.Stack

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T23:45:57.723

它的已知[错误](http://code.google.com/p/android/issues/detail?id=3847)。我很惊讶它仍然存在。

使用通用容器，例如：

```
public class SerializableHolder implements Serializable {
private Serializable content;
public Serializable get() {
    return content;
}
public SerializableHolder(Serializable content) {
    this.content = content;
 }
} 
```

如果您使用`GSON`库，请将您的堆栈转换为字符串并用作捆绑的单个字符串而无需序列化。它应该工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T11:23:41.947

只需将您从包中检索到的可序列化转换为列表，创建一个新堆栈，然后将所有列表项添加到堆栈中：

```
Serializable serializable = savedInstanceState.getSerializable("key");
List<Something> list = (List<Something>) serializable;
Stack<Something> stack = new Stack<Something>();
stack.addAll(list); 
```

为什么要投射到 List 而不是 ArrayList 你问？因为如果这在某些 Android 版本中得到修复，您将不会再次出现 ClassCastException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:46:29.867

我希望不是在胡说八道！

Stack 没有实现 Serializable ，而只是扩展了 Serializable `Vector`，相当于`ArrayList`

我不知道它的真正定义`equivalent`以及它的松散程度，但只要说可序列化的 Stack 的第一个超类是 Vector 就足够了。

既然我们看到了这个异常，那么我可能会假设将 Serializable 转换为 ArrayList 不应该抛出这个异常。否则，我是在胡说八道。

# windows-phone-7 - 设置查询字符串，但仍然得到 NullReferenceException

> ID：13982194
> 
> 赞同：0
> 
> 时间：2012-12-20T23:34:14.183
> 
> 标签：windows-phone-7

我想在另一页上显示错误消息。我得到了 NullReferenceException，但是查询字符串设置在有错误的页面上。有人会告诉我我的代码有什么问题吗？

```
 catch (Exception ex)
        {
            //Dispatcher.BeginInvoke(new Action(() =>MessageBox.Show(ex.StackTrace,"Error!",MessageBoxButton.OK)));

           string query=@"/ErrorPage.xaml?msg=" + ex.StackTrace.ToString() ;
           Dispatcher.BeginInvoke(new Action(() =>this.NavigationService.Navigate(new Uri(query, UriKind.Relative))));
        } 
```

当页面加载到其他页面时，有显示错误消息的代码

```
 public ErrorPage()
    {
        InitializeComponent();
        string msg = NavigationContext.QueryString["msg"].ToString();
        lstMessage.Items.Add(msg);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:05:38.947

我应该将我的代码放入 MainPage_Load 方法中。有用。

```
 public ErrorPage()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(MainPage_Loaded);                       
    }

    private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        MessageBoxResult result = MessageBox.Show(CMSPhoneApp.App.GlobalVariables.strNofifyEmailSubject,
                        "Report Error", MessageBoxButton.OKCancel);
        if (result == MessageBoxResult.OK)
        {
            //according to the serach  it works on real devices (not on the emulator)
            //the reason the EmailComposer not pop up because can't set up an email account on the emulator
            EmailComposeTask emailcomposer = new EmailComposeTask();
            emailcomposer.To = CMSPhoneApp.App.GlobalVariables.reportAddress;
            emailcomposer.Subject = CMSPhoneApp.App.GlobalVariables.strNofifyEmailSubject;
            emailcomposer.Body = CMSPhoneApp.App.GlobalVariables.errorMsg;
            emailcomposer.Show();

        }
        else
        {
            App.GoBack();
        }
    } 
```

# c# - 带有等待的异步 lambda 表达式返回任务？

> ID：13982195
> 
> 赞同：19
> 
> 时间：2012-12-20T23:34:15.237
> 
> 标签：c#, windows-runtime, async-await

我有以下代码：

```
 // Get all of the files from the local storage directory.
        var files = await folder.GetFilesAsync();

        // Map each file to a stream corresponding to that file.
        var streams = files.Select(async f => { return await f.OpenStreamForWriteAsync(); }); 
```

我希望`streams`是 type`IEnumerable<Stream>`但实际上它是 of `IEnumberable<Task<Stream>>`，如果我省略了 await 关键字，这是我所期望的。的返回类型`OpenStreamForWriteAsync`是`Task<Stream>`——当然等待它应该产生一个`Stream`？

那么，为什么 return await 语句会返回一个 Task？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T23:42:43.980

所有`async`方法都返回`void`、`Task`或`Task<TResult>`。lambda 只是一个匿名方法，因此仍然适用。它本质上与这个命名方法相同：

```
private static async Task<Stream> Foo(TypeGOesHere f )
{
    return await f.OpenStreamForWriteAsync(); 
} 
```

为了让它返回 a`Stream`它需要一个阻塞方法，而不是异步方法：

```
private static Stream Foo(TypeGOesHere f )
{
    return f.OpenStreamForWriteAsync().Result; 
} 
```

你可能不想要那个。

如果对您有帮助，您可以使用以下方法将您的`IEnumerable<Task<Stream>>`变成一个：`Task<Stream[]>``Task.WhenAll`

```
Task<Stream[]> resultTask = Task.WhenAll(streams); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-13T12:29:21.210

这不是最好的解决方案吗？

```
 // Get all of the files from the local storage directory.
    var files = await folder.GetFilesAsync();

    // Map each file to a stream corresponding to that file and await the Task that waits for all tasks to complete? maybe thats whats being implied above...
    var streams = await Task.WhenAll(files.Select(async f => { return await f.OpenStreamForWriteAsync(); })); 
```

# ruby - 带有for循环的ruby方法，意外返回

> ID：13982196
> 
> 赞同：1
> 
> 时间：2012-12-20T23:34:33.480
> 
> 标签：ruby, ruby-on-rails-3

我有一个`MyModel`带有返回特定记录的方法的模型（请参见下面的逻辑）。

```
def self.find_future_rec   #note2
  rec = find(rand(MyModel.count)+1)   #note1
  while rec.nil? | (rec.expdate<Date.today)
    rec = find(rand(MyModel.count)+1)
  end
  return rec
end 
```

每个类记录都有一个类`MyModel`变量`expdate`。`Date`（我知道这是一种可怕的查找记录的方法，这更多是为了我自己的熏陶，也是一些测试代码。）

1.  此方法将在找到合适的记录之前遍历几个不需要的记录，但返回的记录始终是在 找到的`note 1`记录，即查询的第一条记录。这里有一些懒惰的分配吗？
2.  我必须添加`self`at`note2`才能在静态上下文中调用该方法。这是正确的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:17:17.563

当你给它一个 ID 来查找时，该[`find`](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find)方法永远不会返回`nil`：如果它找不到你要查找的记录，它会引发[`ActiveRecord::RecordNotFound`](http://api.rubyonrails.org/classes/ActiveRecord/RecordNotFound.html)异常。所以，`rec`总是非`nil`而且`rec.nil?`总是假的。这意味着你的循环真的是这样的：

```
while rec.expdate < Date.today 
```

如果你的循环总是返回`rec`from`#note1`那么你根本就不会进入`while`循环，而且你总是`MyModel`在第一次尝试时得到一个理想的结果。

其他需要考虑的点：

1.  有时东西会被删除，所以`Model.count + 1`不一定是最大 ID。
2.  `find`引发异常以指示失败，因此您需要`rescue ActiveRecord::RecordNotFound`而不是检查`nil`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T00:01:12.787

您正在使用`|`哪个是布尔或。尝试使用`or`或`||`。

添加`self`以使方法成为类方法（“静态”是一个不错的近似值）确实是解决此问题的正确方法之一。

# maven - 如何使用 Android Maven 插件导入多种构建类型的原生库

> ID：13982204
> 
> 赞同：1
> 
> 时间：2012-12-20T23:34:56.903
> 
> 标签：maven, android-ndk, android-maven-plugin

如何使用 Maven 导入同一个本地库的多个构建类型？

一点上下文，我正在使用 Android Maven 插件，并且我正在尝试导入一个为本机库，该库是为几种不同的 CPU 架构构建的。我在[这里](http://code.google.com/p/maven-android-plugin/wiki/NativeLibsAsDependencies)阅读了显示如何声明依赖项的帖子，但我仍然必须在我的存储库中本地安装 .so 文件。我对如何将第三方库安装到我的本地存储库中并不感到困惑，我对如何命名这些东西感到困惑。例如，假设我们有依赖：

```
<!-- Declare the dependency on a native library, already deployed in the Maven repository -->
  <dependency>
    <groupId>com.acme.android</groupId>
    <artifactId>libsample_jni</artifactId>
    <version>0.1</version>
    <scope>runtime</scope>
    <type>so</type>
  </dependency> 
```

加载库的代码是：

```
System.loadLibrary("sample_jni"); 
```

但是假设我们有多个针对不同 CPU 架构的 libsample_jni 构建。我将使用什么命名约定以便将库放在我的 APK 中的正确文件夹中？这甚至是命名约定问题吗，因为插件对此负责？我需要在依赖声明中包含一些标签来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:01:26.007

在这种情况下，应通过在其 maven 命名坐标中指定不同的分类器值来区分不同 CPU 架构的不同二进制工件。
见[http://maven.apache.org/pom.html#Maven_Coordinates](http://maven.apache.org/pom.html#Maven_Coordinates)

# c# - 数据绑定到模型，具有自定义验证属性 - 何时绑定和验证？

> ID：13982210
> 
> 赞同：2
> 
> 时间：2012-12-20T23:35:49.993
> 
> 标签：c#, winforms, data-binding

我对 WinForms 数据绑定和自定义验证有点陌生。

假设我的域中有一个简单的模型：

```
public class SecurityObject
{

    [StringLength(25)]
    public string Name { get; set; }

    public bool HasAccess { get; set; }
} 
```

Name 属性数据绑定到 TextBox。我想应用自定义属性验证，以便在违反验证时显示工具提示。（注意：是的，我知道我可以在文本框上设置 MaximumLength 属性，并计划这样做，但这不是我现在的问题。）

我的问题是，应该在什么时候触发验证？

1.  似乎不能在 TextBox_Validating(..) 中触发它，因为此时新值尚未写回模型。

2.  它可以在 TextBox_Validated(..) 处触发，因为此时该值已写回模型。然而，这似乎不合适，因为 TextBox 认为它是有效的，而它所绑定的模型不是 - 对我来说似乎很可疑。

3.  我想您可以禁用自动绑定，然后通过调用 DataBinding.WriteValue(...) 在 TextBox_Validating(...) 中手动触发它 - 但付出如此多的额外努力并破坏了一半的数据点似乎很可惜首先绑定。

那么，在数据绑定时运行模型验证的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:54:16.757

IMO 验证事件是应该进行验证的地方。

> 似乎不能在 TextBox_Validating(..) 中触发它，因为此时新值尚未写回模型。

值是否已在模型中实际设置并不重要，不是吗？那这个呢：

```
ValidationContext vc = new ValidationContext(myEntity, null, null);
vc.MemberName = "myProperty";
Boolean isValid = Validator.TryValidateProperty(formPropertyValue, vc, null); 
```

# java - 如果当前线程崩溃，读写锁会发生什么

> ID：13982211
> 
> 赞同：0
> 
> 时间：2012-12-20T23:35:54.157
> 
> 标签：java, multithreading, reentrantreadwritelock

正如标题所说，很好奇当前线程崩溃时读写锁会发生什么。

```
 readlock.lock();
 try {
    ...
 } finally {
   readlock.unlock();
 } 
```

我们绝对可以在 finally 块中解锁以防止任何突然出现。但是如果 readLock.lock() 语句崩溃了，锁会自动释放吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:08:10.927

*   如果`readlock.lock`抛出异常。
*   锁定操作失败。
*   没有获取锁。
*   否`unlock`是必需的。

如果在 期间抛出运行时异常`readlock.lock`，但正在获取锁。`lock`作者错误地实现了它。您可以为作者提交错误报告 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:06:44.610

如果您引用类，那么（尚未调用）`java.util.concurrent.locks.ReentrantReadWriteLock`之后的线程崩溃将不会释放读锁。`readlock.lock()``readlock.unlock()`

但写锁却不同。写锁定义了一个所有者，并且只能由获取它的线程释放。相比之下，读锁没有所有权的概念，不要求释放读锁的线程与获得它的线程相同。

我建议放入`readlock.lock()`try-finally 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:59:47.653

这取决于您对“readlock”变量的实现以及“您的线程是如何崩溃的”。据我所见，“readlock”变量可以是任何类型，并且线程崩溃的方式有多种。

仅供参考，每个 java 对象都有一个“监视器”。如果您需要同步多个线程对共享变量的访问，我建议您花一些时间阅读 java 教程的这一章：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/index.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)

# java - 将变量发送到不同的类

> ID：13982212
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:36:06.473
> 
> 标签：java, class, variables, bluej

我在发送可变余额和存款以从 Driver 转移到 BankAccount 时遇到问题，有人有什么建议吗？我正在使用 BlueJ。

这是驱动程序类和方法-

```
 import javax.swing.JOptionPane;
public class Driver
{
    int choice;
    String number;
    String name;
    double deposit;
    double withdraw;
    double balance;
    //public Driver()
    public Driver()
    {
         String number = JOptionPane.showInputDialog("1\. Deposit 2\. Withdraw 3\. Balance 4\. Change name 5\. Exit");
         int choice = Integer.parseInt(number);
         do
         {
         if( choice == 1)
         {
             String input = JOptionPane.showInputDialog("How much would you like to deposit?");
             deposit = Integer.parseInt(input);
             BankAccount b = new BankAccount();
             b.Deposit();
             Driver a = new Driver(); 
```

这是 BankAccount 程序-

```
public class BankAccount
{
double balance = 400;
double deposit;
double withdraw;
double Interest = 1.05;
String name;
String accountNumber;

public double Deposit()
{
    //String input = JOptionPane.showInputDialog("How much would you like to deposit?");
    //deposit = Integer.parseInt(input);
    if (deposit < 10000)
    {
        balance = deposit + balance;

    }
    return balance;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:45:38.410

您必须在`BankAccount`课堂上使用您的 depost 方法，如下所示

```
public double Deposit(double deposit){

...........

} 
```

你的云端硬盘课程应该是

```
...
    b.Deposit(deposit);
... 
```

方法调用

# java - 按索引检索 Map 的键

> ID：13982220
> 
> 赞同：3
> 
> 时间：2012-12-20T23:36:29.910
> 
> 标签：java, map

> **可能重复：**
> [Java 中的双向地图？](https://stackoverflow.com/questions/10699492/bi-directional-map-in-java)

`Map`当键不是数字且无序时，如何按索引检索键？

例如 ：

```
Map<String, Integer> test = new TreeMap<String, Integer>();
test.put("a", 1);
test.put("b", 2);
test.put("z", 3);
test.put("m", 4); 
```

我想知道`z`我有索引 2 还是`a`索引 0。

我知道我可以用增量做脏循环来得到它，但是还有另一种聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:50:42.177

使这有点令人困惑的是，您是根据添加项目的顺序还是根据键的自然顺序（例如：字母顺序）来引用索引

您可以使用 map.keySet() 获取可能键的列表，但不能保证键集将按照您添加它的顺序

如果您想以某种顺序（例如：字母顺序）保存数据，您可以使用 TreeMap 而不是 HashMap。如果您更喜欢其他订购方式，您可以实现自己的比较器

# scripting - 从最大的注册表子键读取批处理文件？

> ID：13982222
> 
> 赞同：0
> 
> 时间：2012-12-20T23:36:31.877
> 
> 标签：scripting, batch-file, registry

我正在尝试修改我的批处理脚本以获取某个软件的安装路径，但是它需要与版本无关，并且安装路径存储在版本子键中，所以基本上我要做的是检测最好的版本子键并从那里获取安装路径。

下面是获取注册表值的代码现在的样子：

> FOR /F "skip=2 tokens=2,*" %%A IN ('REG.exe query "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node......\6.30" /v "InstallLocation"') DO set "InstallPath= %%B"

基本上我不想依赖关键地址末尾的“6.30”部分，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:59:05.677

由于我不知道您正在查看哪个确切的软件，我将参考 Winodws 7 x64 上的 Adob​​e Reader。

**回答：**

以下示例将输出父项中的所有子键。

```
for /f "delims=" %%A in ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Adobe\Acrobat Reader"') do if not "%%~A"=="" echo.%%~nxA 
```

输出：

```
9.5
10.0
11.0 
```

**样本：**

从那里开始，只需记住最大的并在下一次查询值数据时使用它。

```
@echo off
setlocal EnableDelayedExpansion
set "xVersion="
set "xPath="

:: Retrieve Greatest Version
for /f "delims=" %%A in ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Adobe\Acrobat Reader"') do (
    if not "%%~A"=="" if "%%~nxA" GTR "!xVersion!" set "xVersion=%%~nxA"
)

:: Validate Version
if "%xVersion%"=="" goto :eof

:: Retrieve Install Path
for /f "tokens=1,2,*" %%A in ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Adobe\Acrobat Reader\%xVersion%\Installer" /v Path') do (
    set "xPath=%%~C"
)

:: Show Results
echo.%xPath%
endlocal 
```

输出：

```
C:\Program Files (x86)\Adobe\Reader 10.0\ 
```

**奖金：**

如果您想验证`%%~nxA`是一个数字，这是我的批处理例程。

```
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:IsNumber <xReturn> <xInput> [xDelims]
:: Return true if the input is a base 10 number, else return false.
:::: Does not allow any seperators unless specified by xDelims. ,.[tab][space]
setlocal
if not "%~2"=="" set "xResult=true"
for /f "tokens=1 delims=1234567890%~3" %%n in ("%~2") do set xResult=false
endlocal & if not "%~1"=="" set "%~1=%xResult%"
goto :eof

:: Usage Example.
:: The variable xResult will be set to true if %%~nxA is a decimal number.
call :IsNumber xResult "%%~nxA" "." 
```

# jquery - 对象不支持此属性或方法 IE8

> ID：13982227
> 
> 赞同：1
> 
> 时间：2012-12-20T23:37:10.763
> 
> 标签：jquery, internet-explorer

我在 IE8 中遇到错误：`Object doesn't support this property or method`但在其他浏览器中一切正常，没问题。刷新 IE 后，错误消失，幻灯片正确显示。

这是代码。

```
$(window).load(function(){
  $('.flexslider').flexslider({
    animation: "slide",
    start: function(slider){
      $('body').removeClass('loading');
    }
  });
}); 
```

导致错误的行是`$('.flexslider').flexslider({`

我尝试了各种解决方案均无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:56:08.710

找到了答案，它不在我发布的代码行中。我正在使用

```
<script defer src="scripts/jquery.flexslider.js"></script> 
```

加载脚本，我将其更改为

```
<script src="scripts/jquery.flexslider.js"></script> 
```

现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:45:58.253

```
$(function() {
    $(window).load(function() {
        $('.flexslider').flexslider({
          animation: "slide",
          start: function(slider){
          $('body').removeClass('loading');
         }
    });
}); 
```

这利用了 jQuery.ready()，它比 $(window).load() 跨浏览器更可靠。

实际上，您可以完全替换 $(window).load() （如果您不需要等待图像等）。

```
$(function() {
    $('.flexslider').flexslider({
        animation: "slide",
        start: function(slider){
        $('body').removeClass('loading')
    }
}); 
```

此外，确保包含 flexslider 的脚本包含在页面的“head”部分中。如果你将它包含在 body 中或者通过创建一个 DOM 节点来加载它，那么 load 和 ready 都不会保证它已经被执行。

# ruby-on-rails - 使用关系实体上的属性对多对多关系建模

> ID：13982231
> 
> 赞同：0
> 
> 时间：2012-12-20T23:38:02.857
> 
> 标签：ruby-on-rails, ruby

我正在尝试一些非常简单的事情。此时我有三个模型：

```
Player >> PlayerMatch >> Match

class Match < ActiveRecord::Base
  attr_accessible :date, :goals_team_a, :goals_team_b
  has_many :PlayerMatches
  has_many :Players, :through => :PlayerMatches
end

class Player < ActiveRecord::Base
  attr_accessible :name, :password_confirmation, :password, :user
  has_many :PlayerMatches
  has_many :matches, :through => :PlayerMatches
end

class PlayerMatch < ActiveRecord::Base
  attr_accessible :match_id, :player_id, :team
  belongs_to :player
  belongs_to :match
end 
```

模型 PlayerMatch 是连接实体。在每场比赛中，一名球员可以在 A 队或 B 队，这就是为什么我在 PlayerMatch 上制作了该属性球队。

**如何为每场比赛设置价值团队？**我想做类似的事情：

```
p = Player.new
//set players attributes
m = Match.new
//set match attributes

p.matches << m 
```

现在我只想让他的球队参加那场特定的比赛。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:21:40.687

使用您设置的模型，您可以执行以下操作：

```
p = Player.create
m = Match.create
pm = PlayerMatch.create(:player => p, :match => m, :team => 'Team') 
```

如果您希望像示例中那样自动创建 PlayerMatch，您可以在之后检索它并在此时设置团队：

```
p = Player.create
m = Match.create
p.matches << m

pm = p.matches.where(:match_id => m.id).first
pm.update_attributes(:team => 'Team') 
```

除非您说单个玩家可以为不同的球队参加不同的比赛，否则您似乎可能希望球员属于一个球队。

[这篇文章](https://stackoverflow.com/questions/8059238/creating-controllers-and-views-for-a-has-many-through-relationship-in-rails-3)也有一些与这个问题相关的信息。

# qt-creator - 自动为多个通用 QtCreator 项目指定构建配置设置

> ID：13982234
> 
> 赞同：5
> 
> 时间：2012-12-20T23:38:42.497
> 
> 标签：qt-creator

我想为大型工作区中的数百个项目中的每一个自动生成`*.creator`、`*.files`、`*.includes`和文件。`*.config`我希望每个项目都通过自定义构建工具包和一组构建配置使用外部工具构建。根据我对 QtCreator 的阅读，在我看来，这样做的唯一方法是`*.creator.user`提前为每个项目生成文件并包含必要的构建配置，或者打开每个项目，允许 QtCreator 生成`*.creator.user`该项目的文件，然后将构建配置信息插入该文件。`*.creator.user`我不想生成或追溯编辑整个文件，而是生成类似`*.pro.shared`文件的东西（[http://doc.qt.digia.com/qtcreator-2.4/creator-sharing-project-settings.html](http://doc.qt.digia.com/qtcreator-2.4/creator-sharing-project-settings.html)）对于每个项目可能都是相同的，并且不需要弄乱所有其他用户设置。不幸的是，QtCreator 似乎没有任何类似的`*.creator.shared`文件可以用来合并共享设置。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:45:44.117

构建设置基本上是您无法共享 .user 文件的原因：它们包含对特定于一个 Qt Creator 实例的数据的引用。这些主要是 Qt 版本、工具链和工具包的 id。

您可以创建 .user 文件，这应该没有问题，只要您插入在您的创建者实例中使用的 id。如果你做错了，那么创建者将丢弃这些设置，然后使用默认值重新生成它们。

确保包括 ProjectExplorer.Project.Updater.FileVersion 否则 creator 将使用一系列转换步骤更新您的配置，这很可能会破坏一切（前提是您没有开始使用与 Qt Creator 版本 1.3 兼容的数据：-）。

# sugarcrm - SugarCRM 迁移线索模块

> ID：13982235
> 
> 赞同：1
> 
> 时间：2012-12-20T23:39:04.163
> 
> 标签：sugarcrm, data-migration, database-migration

我正在尝试移动sugarCRM 数据（潜在客户、机会和申请人，这些是sugarCRM 中的模块） - 我有.csv 文件。没有这家公司托管的 SQL.its，他们不会给我 sql。问题是，例如，潜在客户有 212 个列（字段），而普通的 SugarCRM 的字段要少得多。我试图找出导入所有数据的最佳方式，而无需使用 Studio 单独创建每个字段。Opportunities 模块在托管版本上也有 110 个字段 - 而常规的 SugarCRM 只有大约 27 个。所以我的问题是如何创建所有字段以便我可以导入它们 我已经创建了一个获取列名的文件，我做到了将所有数据导入到名为 Leads1 的表中。当我将其重命名为潜在客户并检查时...数据未显示在页面上。有任何想法吗？（请不要回答并说：

任何想法或建议将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:28:07.050

无论是否使用 SQL，您都需要在 Studio 中重新创建字段，因为您需要视图也包含字段。这很乏味，但在这种情况下唯一真正可行的选择。执行此操作时，字段的名称必须完全相同，这样导入才能正常工作，这一点很重要。

如果您可以破解一些代码，另一种选择是创建一个模块，该模块将从 SugarCRM 中为您导出整个数据库的 SQL，并将整个文件结构导出为 zip，这样您就不必重新创建任何内容。

顺便说一句 - 确保您要迁移到的 SugarCRM 实例是完全相同的版本。完成导入后，您可以升级到所需的版本。这保证了数据库结构将是相同的（假设自定义字段被适当地创建）。

祝你好运！

# unix - 带有日期后缀的 cron 命令？

> ID：13982236
> 
> 赞同：1
> 
> 时间：2012-12-20T23:39:04.290
> 
> 标签：unix, cron, crontab

在命令行中我能够做到

`cp htlog.out test.$(date '+%m%d%Y')`

但是当我尝试像这样 crontab 时：

```
37 17 * * 1-5 cd the/dir && cp htlog.out test.$(date "+%m%d%Y") 
```

它失败并来自 CRON DAEMON 的以下消息：

```
/bin/sh: -c: line 0: unexpected EOF while looking for matching `"'
/bin/sh: -c: line 1: syntax error: unexpected end of file 
```

而且我在命令之后确实有结束线。该 crontab 条目有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:40:38.753

`%`in`crontab`有特殊含义，应该是*反斜杠*，所以：

```
37 17 * * 1-5 cd the/dir && cp htlog.out test.$(date "+\%m\%d\%Y") 
```

来自`man 5 crontab`：

> 命令中的“%”字符，除非用反斜杠 * () 转义，否则将更改为换行符，第一个 % 之后的所有数据将作为标准输入发送到命令。

# php - ajax formdata append 不适用于键值样式

> ID：13982237
> 
> 赞同：5
> 
> 时间：2012-12-20T23:39:12.983
> 
> 标签：php, javascript, ajax, form-data

为什么这段代码不起作用？我应该如何在 formdata 中附加其他数据？

```
fd = new FormData();
fd.append("file_for_upload", file_blob_chunk);
fd.append("test", "testing");
fd.append("test2", original_file_name);

xhr = new XMLHttpRequest(); 
xhr.open("POST", "files/index/" + file_name + '/' + file_part, true);
xhr.send(fd); 
```

当我调试它时，我可以看到“file_for_upload”的数组，但看不到“test”或“test2”的数组。

基本上通常你会使用 $_FILES 然后它应该显示 file_for_upload 的数组。它就是这样工作的。但现在我需要添加另一个，例如 original_file_name。但它没有显示另一个数组。

是否有可能是因为我在 html 页面中只有一个用于文件上传的表单，而没有其他两个文本框表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:13:23.137

你会在`$_POST`. 只有文件进入`$_FILES`.

# android - 如何动画片段移除

> ID：13982240
> 
> 赞同：40
> 
> 时间：2012-12-20T23:39:20.893
> 
> 标签：android, animation, fragment

我想为片段的移除设置动画。

我试过：

```
getSupportFragmentManager().beginTransaction()
    .setCustomAnimations(R.anim.push_down_in, R.anim.push_up_out)
    .remove(myFragment)
    .commit(); 
```

但片段只是消失了。

我注意到 out 动画只播放“替换”，所以我尝试用一​​个空片段替换片段，如下所示：

```
getSupportFragmentManager()
    .beginTransaction()
    .setCustomAnimations(R.anim.push_down_in, R.anim.push_up_out)
    .replace(viewId, new Fragment())
.commit(); 
```

但它仍然只是消失消失了。

那么，如何为片段的移除设置动画呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-11T08:10:12.933

当我遇到类似问题时，我看到了这一点，只是想我会快速记下。

我认为您应该为当前的片段视图设置动画，而不是创建一个虚拟片段来替换现有片段。动画完成后，您可以简单地删除片段。

我就是这样做的：

```
final FragmentActivity a = getSherlockActivity();

if (a != null) {
    //Your animation
    Animation animation = AnimationUtils.loadAnimation(a, R.anim.bottom_out);
    animation.setDuration(getResources().getInteger(android.R.integer.config_shortAnimTime));

    //You can use AnimationListener, MagicAnimationListener is simply a class extending it.
    animation.setAnimationListener(new MagicAnimationListener() {
        @Override
        public void onAnimationEnd(Animation animation) {
            //This is the key, when the animation is finished, remove the fragment.
            try {
                FragmentTransaction ft = a.getSupportFragmentManager().beginTransaction();
                ft.remove(RestTimerFragment.this);
                ft.commitAllowingStateLoss();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

    //Start the animation.  
    getView().startAnimation(animation);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-22T01:09:36.360

我想到了。

退出视图在进入视图的画布上进行动画处理，因此如果没有进入画布，则没有用于动画的画布。

为了显示动画，我必须始终使用替换并使用与退出的相同大小的输入片段。动画完成后，我将新片段的视图设置为消失。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-07T09:52:30.413

您可以通过将此自定义动画设置为 fragmentTransaction 来为移除设置动画

```
 fragmentTransaction.setCustomAnimations(R.anim.right_in, R.anim.defff,R.anim.defff,R.anim.right_out); 
```

第三个和第四个参数用于删除片段

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-12T06:48:04.643

我从 Zoltish answer 得到灵感，这是我的实现：

1.在片段中添加这个方法，它会将片段动画到屏幕左侧：

```
public void animateOut()
{
    TranslateAnimation trans=new TranslateAnimation(0,-300*Utils.getDensity(getActivity()), 0,0);
    trans.setDuration(150);
    trans.setAnimationListener(new Animation.AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            ((BetsActivty)getActivity()).removeFrontFragmentAndSetControllToBetting();
        }
    });
    getView().startAnimation(trans);
} 
```

onAnimationEnd() 内部的方法像这样删除片段：

```
getSupportFragmentManager().beginTransaction().
        remove(getSupportFragmentManager().findFragmentById(R.id.fragment_container)).commit(); 
```

2.从活动的onBack()调用片段的animateOut。

干杯

顺便说一句，我的 getDensity() 是：

```
public static int getDensity(Context context)
{
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    return (int)metrics.density;
} 
```

我用它计算当前运行设备的 DP 值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-14T08:59:09.807

在插入下一个片段之前用一个空片段替换，并延迟下一个片段的插入（200ms），以便可以播放空白片段的退出动画，解决了我的问题。

这是插入带有退出动画的空片段的代码。

```
getSupportFragmentManager()
                        .beginTransaction()
                        .setCustomAnimations(R.anim.exit, R.anim.pop_exit)
                        .replace(R.id.fragmentLayout, new Fragment())
                        .commit(); 
```

退出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
               android:fromXDelta="0"
               android:toXDelta="-100%"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="200"/>

</set> 
```

pop_exit.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
               android:fromXDelta="0"
               android:toXDelta="100%"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="200"/>

</set> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-02T10:29:13.200

我同意 hugoc 和这里的一些代码来解决它

```
public class MyActivity extends Activity {
    //Some thing
    public void Fragment2BackToFragment1(Fragment fragment1, Fragment fragment2) {
        FragmentManager manager = getSupportFragmentManager();
        FragmentTransaction ft = manager.beginTransaction();
        animateExit(fragment2);
        ft.replace(R.id.main_content, fragment1, "fragment1");
        ft.commit();
    }
    private void animateExit(Fragment exitFragment) {
        if (exitFragment != null) {
            final View view = exitFragment.getView();
            if (view != null) {
                int anim = R.anim.fade_out;
                Animation animation =
                    AnimationUtils.loadAnimation(getActivity(), anim);
                animation.setAnimationListener(new Animation.AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        view.postDelayed(new Runnable() {
                            @Override
                            public void run() {
                                view.setVisibility(View.GONE);
                            }
                        }, 300);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
                view.startAnimation(animation);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-31T17:07:50.997

@hugoc 说的原因

> 退出视图在进入视图的画布上进行动画处理，因此如果没有进入画布，则没有用于动画的画布。
> 
> 为了显示动画，我必须始终使用替换并使用与退出的相同大小的输入片段。动画完成后，我将新片段的视图设置为消失。

以下是实际代码：

```
FragmentManager manager = getSupportFragmentManager();
    FragmentTransaction transaction = manager.beginTransaction();
    transaction.setCustomAnimations(R.anim.slide_in_bottom, R.anim.slide_out_top);
    transaction.hide(removeFragment).add(R.id.fragment_container,addFragment).commit();
    transaction = manager.beginTransaction();
    transaction.remove(removeFragment).commit(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-12T23:08:35.673

### 下面是一个简单的修复：

1-在 fragment.getView() 上调用动画。

2-删除 onAnimationEnd() 中的片段。

```
final Fragment frag= getSupportFragmentManager().findFragmentById(R.id.fragmentContainer);
        frag.getView().animate().alpha(0f).scaleX(0f).scaleY(0f)

                .setListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        super.onAnimationEnd(animation);
                        getSupportFragmentManager()
                                .beginTransaction()
                                .remove(frag)
                                .commit();
                    }
                }).start(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-30T05:43:35.993

输入内容：
必须显示的新片段

什么退出：
必须隐藏的是当前片段

什么 popEnter：
它是必须显示的前一个片段

什么 popExit：
必须隐藏的当前片段

要使用这些动画，您应该将它们定位在显示或隐藏事务命令上。退出动画不适用于删除/替换过​​程。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-08T11:53:11.673

**setCustomAnimations(enter, exit, popEnter, popExit)**支持进出动画，所以设置四个动画，必须在**transaction.replace()之前保留**

> 科特林：

```
 val manager = supportFragmentManager
    val transaction = manager.beginTransaction()
    transaction.setCustomAnimations(android.R.anim.slide_in_left, android.R.anim.slide_out_right ,
            android.R.anim.slide_in_left, android.R.anim.slide_out_right)
    transaction.commit() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-13T07:12:56.030

所以简单的方法：

当您打开一个片段（从父 Activity 调用）时：

```
 FragmentA fragment = new FragmentA();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.setCustomAnimations(R.anim.slide_up, R.anim.slide_down);
    transaction.add(android.R.id.content, fragment);
    transaction.addToBackStack(null);
    transaction.commit(); 
```

指定进入和退出事务

> transaction.setCustomAnimations(R.anim.slide_up, R.anim.slide_down);

关闭片段时（从片段内部调用）

```
getActivity().getSupportFragmentManager().beginTransaction().setCustomAnimations(R.anim.slide_up, R.anim.slide_down).remove(this).commit(); 
```

指定进入和退出事务

> setCustomAnimations(R.anim.slide_up, R.anim.slide_down)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-09T12:35:19.040

[在https://developer.android.com/training/basics/fragments/animate](https://developer.android.com/training/basics/fragments/animate)中查看不同的动画变体。

在任何事件（按钮单击、超时等）上，您都可以在片段中编写：

```
parentFragmentManager.beginTransaction()
    .setCustomAnimations(android.R.anim.slide_in_left, android.R.anim.slide_out_right)
    .remove(this)
    .commitAllowingStateLoss()
// parentFragmentManager.popBackStack() - might be needed if the fragment keeps visible after removing. 
```

# html - 使用 HTML 将表单元素放入表格中

> ID：13982243
> 
> 赞同：0
> 
> 时间：2012-12-20T23:39:43.913
> 
> 标签：html

有没有办法将用户的 HTML 表单选择放入表格中？因此，假设他们从标有“最喜欢的水果”的下拉菜单中选择第一个选项“苹果”。然后，“Apples”将出现在同一页面的表格中。任何帮助是极大的赞赏。我想做什么的例子：我有以下下拉菜单。用户选择他或她最喜欢的游戏，当他们这样做时，会出现一个新的 div 询问原因。每个选择都必须打印在表格中。我不确定如何。

```
<tr><td>
<script>

var sections = {
    'TF2': 'section2',
'why': 'section3',  
};  
var selection = function(select) {

for(i in sections)
    document.getElementById(sections[i]).style.display = "none";    

document.getElementById(sections[select.value]).style.display = "block";

}

</script>
<form id="survey" action="#" method="post">
<tr><td><div id="section1" style="display:block;">
    <label for="game">Select Your Favorite Game</label>
    <select id="game" onchange="selection(this);">
                <option disabled selected>Choose</option>
        <option value="TF2">TF2</option>
        <option value="LoL">League of Legends</option>
        <option value="Minecraft">Minecraft</option>
    </select>
</div></tr></td>

<tr><td><div id="section2" style="display:none;">
    <label for="type">Why do you like it?:</label>
    <select id="type" onchange="selection(this);">
                        <option disabled selected>Options</option>
        <option value="fun">Fun</option>
        <option value="easy">Easy</option>
        <option value="difficult">Difficult</option>
    </select>
        </div></tr></td> 
```

我想在页面上的表格中显示用户的选择。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:16:29.950

看看我刚刚创建的[这个](http://jsfiddle.net/2CxeU/)小提琴。它应该让你前进。

我几乎没有使用 jquery 的经验，并且能够根据上面@Billy Moat 提供的链接以及上面的这个链接快速[弄清楚](http://api.jquery.com/selected-selector/)`:selected`

# ios - 如何根据 XML 生成动态 UITableView？

> ID：13982244
> 
> 赞同：0
> 
> 时间：2012-12-20T23:40:00.700
> 
> 标签：ios, uitableview, uitabbarcontroller

我正在尝试根据 XML 文件在我的 iPad 应用程序中创建一个菜单栏。我决定使用动态 UITableView 来实现它。

XML 文件是这样的：

```
 <?xml version="1.0" encoding="UTF-8" ?>
     <menuBar>
          <menu id="1" text="File">
               <menuItem id="11" text="New Panel" />
               <menuItem id="12" text="Open" />
          </menu>
          <menu id="2" text="Edit">
               <menuItem id="21" text="Size" />
               <menuItem id="22" text="Font" />
               <menu id="3" text="Option">
                    <menuItem id="31" text="XX" />
               </menu>
          </menu>
     </menuBar> 
```

所以菜单栏可能有好几级。一个菜单可能包含另一个菜单以及一些菜单项，例如，`menu id="2"`有一个`menu id="3"`，并且`menu id="3"`有它自己的`menuItem`。

我知道如何`UITableViewCell`动态创建。问题是当细胞是一种时我不知道如何创建下一个级别`menu`以及如何在更深层次上创建细胞`UITableView`。

如果您知道如何实现这一点，请帮助我。或者，如果有更好的方法来生成菜单而不是使用`UITableView`，请告诉我。干杯:)

==========更新===========

我只收到一次 XML，所以我可以在解析 XML 时创建这些 tableview 吗？我以后不需要再次创建它们。

例如，当有一个`menu`元素时，我将 a 添加`cell`到当前级别`tableview`，并创建一个`new tableview`作为下一个级别，现在当有一个`menuItem`元素时，我将一个新单元格添加到 this `new tableview`。当当前菜单元素中没有更多元素时，返回上一级tableview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:26:11.033

在您的表格视图委托（通常是 的子类`UITableViewController`）中，实现`tableView:didSelectRowAtIndexPath:`对用户点击单元格的反应。然后实现需要 1) 创建另一个的新实例，`UITableViewController`该实例将管理菜单层次结构的下一级；和 2) 将新控制器推送到 a 的导航堆栈上`UINavigationController`。

这是一个非常粗略的草图：

```
- (void) tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
  [tableView deselectRowAtIndexPath:indexPath animated:NO];

  YourTableViewController* aController = [[YourTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
  [self.navigationController pushViewController:aController animated:YES];
  [aController release];
} 
```

此代码示例假定您正在为其编写代码的控制器已经在导航控制器 ( `self.navigationController`) 的堆栈中。

无论如何，你应该好好看看 Apple 的类文档`UINavigationController`，以及他们的“View Controller Programming Guide for iOS”。

# facebook - Opengraph 动作提交

> ID：13982245
> 
> 赞同：0
> 
> 时间：2012-12-20T23:40:03.977
> 
> 标签：facebook, facebook-opengraph, submission

我尝试在 facebook 平台上提交我的操作以供批准，

但他们要求我改变一些东西：

> 在开发者提交工具中，请将您的动作变位更改为：commented on, commented on, is commenting on, are commenting on

我第二次提交了操作并询问了更多信息......答案是一样的，似乎没有人能够在 facebook 方面提供帮助。

如果我理解，他们会要求我用“on”修改评论共轭，但情况已经如此，我不知道如何解决。

我厌倦了尝试在 facebook 上执行此操作，因为 facebook 无法用更明确的消息来回答......

关于这个主题的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:23:36.287

查看屏幕截图中界面部分下方的“句子预览”部分，应该更清楚他们为什么要求您更改它

有了你所拥有的，Facebook 上的故事将采用以下格式

`Ahwebdev commented an article on **`

或者

`Ahwebdev commented <ARTICLE TITLE HERE> on **`

屏幕截图第一行中的“on”位于应用名称之前，而不仅仅是对象类型名称/对象标题之前

# php - Joomla 模板中隐藏的垃圾邮件/广告链接

> ID：13982248
> 
> 赞同：3
> 
> 时间：2012-12-20T23:40:39.720
> 
> 标签：php, javascript, html, css, joomla

当我在查看我正在构建的网站的源代码时，我刚刚发现了一些隐藏的链接，我发现了一些隐藏的垃圾邮件链接。

我花了一个小时试图在一些模板文件中找到它们，但没有运气。链接如下（来自html源代码）：

```
<div id="jxtc-zt"><a href="http://magical-place.ru/" target="_blank" 
title="достопримечательности Европы">достопримечательности Европы</a></br><a 
href="http://joomla-master.org/" target="_blank" title="шаблоны Joomla 3.5">шаблоны  Joomla
3.5</a></div> 
```

还有这个：

```
</div><div id="jxtc-zt"><a href="http://battlefield4.com.ua/" target="_blank" 
title="Battlefield 4">Battlefield 4</a><br><a href="http://www.absolut.vn.ua/" 
target="_blank" title="минеральные воды">минеральные воды</a></div></div></div> 
```

您对如何找出它们的创建位置有什么建议吗？

它可能以某种方式被混淆了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:37:46.213

有同样的问题，但找到了解决方案。

该代码确实隐藏在 template_name\html\com_content\article\default.php 下的模板中。文本是使用 base64 编码的，我有 2 个实例，1 个在文章之前，一个在结尾。使用的代码是：

```
<?php  if (!$params->get('show_intro')) :
    echo $this->item->event->afterDisplayTitle;
endif; ?><?php
$mgp='PGRpdiBpZD0iamItYmYiPjxhIGhyZWY9Imh0dHA6Ly9tYWdpY2FsLXBsYWNlLnJ1LyIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSLQvtGC0LfRi9Cy0Ysg0YLRg9GA0LjRgdGC0L7QsiI+0L7RgtC30YvQstGLINGC0YPRgNC40YHRgtC+0LI8L2E+PGJyPjxhIGhyZWY9Imh0dHA6Ly9qb29tbGEtbWFzdGVyLm9yZy8iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i0YDQsNGB0YjQuNGA0LXQvdC40Y8gSm9vbWxhIDMuNSI+0YDQsNGB0YjQuNGA0LXQvdC40Y8gSm9vbWxhIDMuNTwvYT48L2Rpdj4=';
echo base64_decode($mgp);?> 
```

我只是从第二个中删除了代码

```
<?php ~ through to ?> 
```

在两个链接中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T23:59:01.573

如果您在任何网站的文档中都找不到“战地”一词，请尝试搜索（不带引号）：

```
"QmF0dGxlZmllbGQ=" (Base64 representation), 
"426174746c656669656c64" (Hexademical representation),
"&#66;&#97;&#116;&#116;&#108;&#101;&#102;&#105;&#101;&#108;&#100;" (ASCII). 
```

这些将是最常见的编码方式。

如果仍然没有运气，则手动定位代码：删除主模板文件（最常见的是 index.php ）中的小块代码并观察是否不需要的链接在删除后消失。如果确实如此-您已经找到了代码，那就对它负责。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:09:19.277

对于那些有类似问题的人，我想提出一个彻底的解决方案。

二进制搜索工具，如“Text-Crawler”或“String Finder”（适用于 Windows）很方便，然后在根文件夹中搜索“整个不需要的文本中最不常见的单词”。

接下来正如“Jevgeni Boga~”在上述答案中指出的那样，尝试搜索这些字符串的散列形式，可以是base64，hexadecimal，aasci。

现在，如果您仍然无法将确切代码归零，那么隐藏代码很可能是从数据库而不是文件中获取的，因此您的下一个搜索位置是您的数据库，而且它很容易通过 "phpmyadmin" 执行字符串搜索。

所有你需要做的就是去“phpmyadmin home”然后选择“你的数据库”然后选择“搜索”....

要搜索的词或值：=>“注入代码中最不常见的词”

查找：=> 保留默认（至少一个单词）

内表：=> 选择全选内列：=> 留空..

现在，如果您的“不需要的代码”隐藏在数据库中，那么您很可能会得到它。

现在还有一种可能性，正如上面所说的那样，代码在加载页面后被某些脚本注入，你可以通过禁用浏览器中的 javascript 来确定不是这种情况......

还有其他各种需要注意的事情......比如检查代码是文本格式还是只是文本的图像......那么如果是这种情况，那么你必须寻找那个文件，比如 . jpg 或 .png...此外，还可以使用“URLdata:image/png;base64”方法从 CSS 中解析图像...

或者最后只搜索“iframe”标签，也许这是从其他来源获得的 iframe。

# javascript - 是否可以将 Testacular 用于非 AngularJS 应用程序进行端到端测试

> ID：13982249
> 
> 赞同：3
> 
> 时间：2012-12-20T23:41:01.497
> 
> 标签：javascript, jquery, jasmine, karma-runner, end-to-end

我正在构建一个简单的应用程序，并希望使用 Testacular 作为测试运行器。Testacular 易于设置用于单元测试，但将它用于 e2e 的可能性似乎也很大，但是我的应用程序不会在 AngularJS 中。这是可能的（或简单的）吗，还是我应该更多地关注 Selenium？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:36:04.903

是的！来自 Testacular 的[GH 页面](http://vojtajina.github.com/testacular/)：

> ### 测试框架不可知
> 
> 用 Jasmine、Mocha、QUnit 描述你的测试。或者为您喜欢的任何框架编写一个简单的适配器。

由于上述测试框架不依赖于库，因此只要您可以使用其中一个框架测试您的库代码，您就可以使用 testacular 为其提供测试运行程序。

**话虽**如此，睾丸**不是**硒。它允许您在浏览器环境中测试您的代码，但据我所知，它不像 selenium 那样提供导航、DOM 查询、用户仿真等。如果您正在为您的 JS 代码寻找 selenium 功能，您应该查看[Soda](https://github.com/LearnBoost/soda)，这是一个很棒的库，由 TJ 和 Mt. Olympus 上的其他众神编写::cough:: 我的意思是 LearnBoost 的开发人员提供了一个 JS 适配器用于 selenium 的有线协议等。

但是，如果您仍然认为 testacular 是可行的方法，那么请查看他们的[示例配置文件](https://github.com/testacular/testacular/blob/master/test/client/testacular.conf.js)，这应该可以让您朝着正确的方向开始。希望这可以帮助！

# python - Pandas 中两个不同来源的堆积条形图

> ID：13982250
> 
> 赞同：2
> 
> 时间：2012-12-20T23:41:03.230
> 
> 标签：python, matplotlib, pandas

我想这很容易，但我尝试了一段时间来获得答案，但没有取得多大成功。我想为两个类别生成堆积条形图，但我在两个单独的日期框架中有这样的信息：

这是代码：

```
first_babies = live[live.birthord == 1] # first dataframe
others = live[live.birthord != 1] # second dataframe

fig = figure()
ax1 = fig.add_subplot(1,1,1)

first_babies.groupby(by=['prglength']).size().plot(
                     kind='bar', ax=ax1, label='first babies') # first plot
others.groupby(by=['prglength']).size().plot(kind='bar', ax=ax1, color='r',
               label='others') #second plot
ax1.legend(loc='best')
ax1.set_xlabel('weeks')
ax1.set_ylabel('frequency')
ax1.set_title('Histogram') 
```

![在此处输入图像描述](../Images/2c5e59025e5c4516845eaf4ccb21d6d9.png)

但我想要这样的东西，或者像我说的那样，堆积条形图，以便更好地区分类别：

![在此处输入图像描述](../Images/0a42e6efcf3810d8f52d27e0fc6e8181.png)

我不能使用`stacked=True`，因为它不能使用两个不同的图，我不能创建一个新的数据框，因为`first_babies`并且`others`没有相同数量的元素。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:40:14.353

首先创建一个新列来区分`'first_babies'`：

```
live['first_babies'] = live['birthord'].lambda(x: 'first_babies' if x==1 else 'others') 
```

你可以[`unstack`](http://pandas.pydata.org/pandas-docs/dev/reshaping.html#reshaping-by-stacking-and-unstacking)分组：

```
grouped = live.groupby(by=['prglength', 'first_babies']).size()
unstacked_count = grouped.size().unstack() 
```

现在您可以直接绘制[堆积条形图](http://pandas.pydata.org/pandas-docs/stable/visualization.html#bar-plots)：

```
unstacked_count.plot(kind='bar', stacked=True) 
```

# windows - 使用 git 远程 URL 协调 PuTTY 和 OpenSSH

> ID：13982254
> 
> 赞同：0
> 
> 时间：2012-12-20T23:41:09.533
> 
> 标签：windows, git, virtual-machine, putty, openssh

在本地开发机器上，我使用 Windows 和 PuTTY，以及一个 linux 服务器 VM，我用它来复制开发环境，例如运行测试等。VM (VirtualBox) 使用包含我的本地项目的 vboxfs 共享。

我已经在我的机器上设置了 msysgit 以使用我首选的 SSH 客户端 PuTTY，并且一切正常。不幸的是，当我设置一个 git 远程 URL 时，它必须使用 PuTTY 的格式来指定一个会话 ( `ssh://<session name>/<repo>`) 才能使 msysgit 工作，这意味着没有一个 git url 在 VM 环境中工作。这不是什么大不了的事，但我很好奇：有没有办法协调这两种配置，这样我就可以在任一环境中使用 git 命令，而无需每次手动设置远程 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:44:03.773

一种解决方法是在 Linux 机器上安装 PuTTY。那里有几个预编译版本，或者您可以下载官方源并编译它们。

# java - 四元数连接仅在轴对齐时有效

> ID：13982255
> 
> 赞同：0
> 
> 时间：2012-12-20T23:41:16.193
> 
> 标签：java, android, math, 3d, quaternions

我有一个简单的四元数实现对象旋转。如果我创建两个四元数表示围绕相同的轴对齐向量（即沿 X、Y 或 Z 轴）的旋转，则结果与通过它们的大小之和的单个旋转相同（即旋转 PI/2 然后 PI /2 再次与 PI 旋转相同）。那挺好的。

一旦旋转轴未与轴对齐，则串联会偏离预期（按 PI/2 旋转，然后 PI/2 再次*与*按 PI 旋转不同）。这不好。

在仔细研究了我的代码几天后，我没有发现任何问题，所以现在让我问一下：我是否在某种程度上从根本上误解了四元数的工作原理？我根据它们所代表的轴角旋转来推理四元数，因为坦率地说，我并不完全理解四元数。

如果没有，你能看看我的代码吗？:-) 我只是将整个东西（用 Java 编写——我的目标是 Android）推送到 GitHub： [https](https://github.com/wtracy/quaternions) ://github.com/wtracy/quaternions 在 Quaternions 目录下是一个 Eclipse 项目。（您不需要 Eclipse 来读取任何内容，但它很方便。）四元数类位于 src/ 文件夹下。在 test/ 文件夹中是运行我的 Quaternion 类所需的类的 JUnit 测试和存根。

我已尽力使我的代码和测试易于理解。我觉得要求互联网在我的代码中查找错误感到愚蠢，但我没有想法。:-P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:24:28.847

您的四元数乘法中有符号错误。

```
public Quaternion times(Quaternion q2) {
    Quaternion q1 = this;
    float w = q1.w*q2.w - q1.x*q2.x - q1.y*q2.y - q1.z*q2.z;
    float x = q1.x*q2.w + q1.w*q2.x + q1.z*q2.y - q1.y*q2.z;
    float y = q1.w*q2.y - q1.x*q2.z + q1.y*q2.w + q1.z*q2.x;
    float z = q1.w*q2.z - q2.x*q2.y + q1.y*q2.x + q1.z*q2.w;
    return new Quaternion(w, x, y, z);
} 
```

写出来的产品是

```
(w1 + x1*i + y1*j + z1*k)*(w2 + x2*i + y2*j + z2*k)
= w1*w2 - x1*x2 - y1*y2 - z1*z2
+ (w1*x2 + x1*w2 + y1*z2 - z1*y2)*i
+ (w1*y2 - x1*z2 + y1*w2 + z1*x2)*j
+ (w1*z2 + x1*y2 - y1*x2 + z1*w2)*k 
```

自从

```
i*j = k    j*i = -k
j*k = i    k*j = -i
k*i = j    i*k = -j 
```

你在方程中有一个减号的错误术语`x`和`z`- 如果两个轴相同，那不会有什么不同，因为你也可以写（作为速记）

```
(r + v)*(s + w) = r*s - <v|w> + r*w + s*v + v×w 
```

对于共线向量，`v×w = 0`但如果轴不同，它会显示出来。

此外，在等式中`z`，

```
float z = q1.w*q2.z - q2.x*q2.y + q1.y*q2.x + q1.z*q2.w;
                          ^^^^^^^^^ 
```

你有一个错字，`q2`对这两个因素都使用一次。

它应该是

```
public Quaternion times(Quaternion q2) {
    Quaternion q1 = this;
    float w = q1.w*q2.w - q1.x*q2.x - q1.y*q2.y - q1.z*q2.z;
    float x = q1.x*q2.w + q1.w*q2.x - q1.z*q2.y + q1.y*q2.z;
    float y = q1.w*q2.y - q1.x*q2.z + q1.y*q2.w + q1.z*q2.x;
    float z = q1.w*q2.z + q1.x*q2.y - q1.y*q2.x + q1.z*q2.w;
    return new Quaternion(w, x, y, z);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:31:38.347

> 一旦旋转轴不是轴对齐的，那么串联就会偏离预期（旋转 PI/2 然后 PI/2 再次与旋转 PI 不同）。这不好。

即使你算对了，你仍然会发现情况并非如此。三维空间中的旋转一般是不可交换的。如果您先执行旋转 A，然后执行旋转 B，则通常最终会得到与先执行旋转 B 再执行旋转 A 不同的方向。

# node.js - node.js 应用程序的新贵脚本

> ID：13982257
> 
> 赞同：11
> 
> 时间：2012-12-20T23:41:37.303
> 
> 标签：node.js, ubuntu, upstart

我无法启动[Upstart](http://upstart.ubuntu.com/)脚本。

这是脚本（/etc/init/ 中的 app.conf）

```
description "node.js server"
author      "kvz"

start on startup
stop on shutdown

script
   # We found $HOME is needed. Without it, we ran into problems
   export HOME="/root"

   exec sudo -u /usr/local/bin/node \
                /var/www/vhosts/travelseguro.com/node/app.js \
                2>&1 >> /var/log/node.log
end script 
```

当我运行时`sudo start app`，我得到：

> 开始：未知工作：应用程序

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T13:02:03.580

我在基于 Redhat 的最新 Amazon (AWS) linux 上运行时遇到了同样的问题。

我调用了我的[新贵](http://upstart.ubuntu.com/)文件，当我运行时，我会收到类似的错误。`/etc/init``node.conf``sudo start node``start: Unknown job: node`

事实证明，如果您的`.conf`文件中有错误，该作业将无法启动。所以我开始注释掉所有的行，然后慢慢建立起来找到错误。 **错误消息不是很清楚，看起来像暴发户找不到您的 conf 文件。**

跟踪您的“/var/log/messages”将帮助您调试 Upstart 日志到那里（它可能在 Ubuntu 上有所不同。我说`init: /etc/init/node-upstart.conf:8: Unknown stanza`这有助于我深入了解它。在我的特殊情况下，我错误地声明了变量。

在[AskUbuntu](https://askubuntu.com/questions/30796/upstart-script-doesnt-start)上查看类似的线程。

这是我*编辑*的工作脚本：

```
<!-- language: lang-sh -->
#!upstart
# using upstart http://upstart.ubuntu.com/getting-started.html and node forever  https://github.com/nodejitsu/forever/  
# to run server
# redhat has additional sudo restrictions, you must comment out 'Default requiretty' from /etc/sudoers
#startup monitoring script derived from http://stackoverflow.com/questions/11084279/node-js-setup-for-easy-deployment-and-updating

description "node.js server"
author      "jujhar"
env PROGRAM_NAME="node"
env FULL_PATH="/home/httpd/buto-middleman/public"
env FILE_NAME="forever.js"
env NODE_PATH="/usr/local/bin/node"
env USERNAME="springloops"

start on startup
stop on shutdown

script
    export HOME="/root"  
    export NODE_ENV=staging #development/staging/production

    echo $$ > /var/run/$PROGRAM_NAME.pid
    cd $FULL_PATH        
    #exec sudo -u $USERNAME $NODE_PATH $FULL_PATH/$FILE_NAME >> /var/log/$PROGRAM_NAME.sys.log 2>&1
    exec $NODE_PATH $FULL_PATH/$FILE_NAME >> /var/log/$PROGRAM_NAME.sys.log 2>&1
end script

pre-start script
    # Date format same as (new Date()).toISOString() for consistency
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Starting" >> /var/log/$PROGRAM_NAME.sys.log
end script

pre-stop script
    rm /var/run/$PROGRAM_NAME.pid
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Stopping" >> /var/log/$PROGRAM_NAME.sys.log
end script 
```

--**编辑 2013-06-01** --

如果您像我一样使用 Centos 或 Amazon Linux，请查看此[init.d 脚本](https://gist.github.com/nariyu/1211413)。

--**编辑 2013-10-14** --

这是我在 Amazon Linux（基于 Redhat）上实际使用的 init.d 脚本[要点的链接。](https://gist.github.com/jujhars13/6994349)我只是将它保存在我的项目中的一个`init.d`文件夹下，然后在文件夹中符号链接到它，`/etc/init.d`现在它是一个守护进程/服务！

--**编辑 2014-06-05** --

查看[Jeff Dickey](https://twitter.com/dickeyxxx)在生产中使用[systemd的 Node.js 的这篇很棒的](http://www.freedesktop.org/wiki/Software/systemd/)[博客文章](http://blog.carbonfive.com/2014/06/02/node-js-in-production/?utm_source=nodeweekly&utm_medium=email)，它比我们在这里所做的所有事情 (恕我直言) 更干净、更容易。他还使用 Ansible 来控制他的集群（我喜欢这个），但如果你还没有准备好，你不必走那么远。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-02T11:45:50.480

经过几次尝试后，我为 upstart 实现了工作 .conf 文件，该文件用作重启后自动启动的服务，并在崩溃时重新启动（重生）。它还可以使用非特权用户权限启动我的应用程序。该文件的名称是 /etc/init/my-app.conf。

要启动/停止服务，请使用

```
sudo start my-app / sudo stop my-app 
```

如果您有类似的错误

```
start: Unknown job: my-app 
```

执行以下命令

```
sudo initctl reload-configuration 
```

我的 /etc/init/my-app.conf 文件：

```
#my-app                                                                           
description "node.js my-app website"                                                  
env FULL_PATH="/home/myuser/app.prod/app"                                              
env NODE_PATH="/usr/bin/node"                                                     

start on filesystem or runlevel [2345]                                            
stop on [!2345]                                                                   

script                                                                            
    export HOME="/root"                                                           
    export NODE_ENV=production                                                    
    echo $$ > /var/run/my-app.pid                                                 
    cd $FULL_PATH        
    #Use exec below if you want to launch it under myuser, 
    #don't forget to create /var/log/my-app.sys.log with appropriate permissions
    #exec sudo -u myuser sh -c "$NODE_PATH server.js >> /var/log/my-app.sys.log 2>&1" 
    exec $NODE_PATH server.js >> /var/log/my-app.sys.log 2>&1                     
end script                                                                        

pre-start script                                                                  
    echo "[`date`] (sys) Starting" >> /var/log/my-app.sys.log                     
end script                                                                        

pre-stop script                                                                   
    rm /var/run/my-app.pid                                                        
    echo "[`date`] (sys) Stopping" >> /var/log/my-app.sys.log                     
end script                                                                        

#uncomment respawn if you want to restart your service in case of crash
#respawn                                                                          
#respawn limit 50 30 
```

我建议您在确保一切正常后取消注释 respawn。

**更新**

我改进了我的脚本（请记住，它不是在 root 下工作，而是在普通用户**zn**下工作）：

```
#znapi.conf                                                                    
description "node.js zn api"                                        

env FULL_PATH="/home/zn/app.prod"                          
env NODE_PATH="/usr/bin/node"                                  
env LOG="/var/log/znapi.log"
env PIDFILE="/var/run/znapi.pid"

# Start up when the system hits any normal runlevel, and 
#start on filesystem or runlevel [2345]     
#start when mongod started
start on started mongod

# shuts down when the system goes to shutdown or reboot.
stop on runlevel [06]                                                              

respawn
respawn limit 50 5

pre-start script                                                    
    # check that log file exist or create it
    test -f $LOG || { touch $LOG; chown zn:zn $LOG; }

    # Date format same as (new Date()).toISOString() for consistency
    echo "[`date`] (sys) Starting" >> $LOG            
end script                                                          

script                                                                       
    export NODE_ENV=production
    exec start-stop-daemon --start -m -p $PIDFILE -c zn -d $FULL_PATH -x server.js >> $LOG 2>&1
end script                                                                   

pre-stop script                                                              
    rm $PIDFILE                                                   
    echo "[`date`] (sys) Stopping" >> $LOG                    
end script 
```

# ios - iOS 推送通知服务批量大小

> ID：13982258
> 
> 赞同：3
> 
> 时间：2012-12-20T23:42:13.433
> 
> 标签：ios, apple-push-notifications

我们正在尝试向大约 500,000 台 iOS 设备发送通知。我们目前已将批量大小设置为 200，并且注意到 Apple 在收到 300k 条左右消息后拒绝我们的连接。我们怀疑 Apple 将我们的连接/拆卸解释为 DOS 攻击。什么是适合我们使用的批量大小？此外，关于为如此大量的设备发送通知的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:34:04.650

您的推送通知服务器必须保持与 Apple 的套接字流推送服务器的持久连接，而不会经常断开连接。

我建议使用 Node.js 编写你的推送服务器，它是为这些东西设计的。

然而，有一些事情也可能导致 Apple 断开您的推送服务器。

使用推送通知，有两种类型的证书 - 开发和生产。

使用开发证书签名的应用程序将生成开发推送令牌，而使用生产证书签名的应用程序即使在同一设备上也会生成不同的生产推送令牌。

您的服务器必须确保它不会将开发令牌发送到与 Apple 推送服务器的生产套接字流连接。

混合令牌和环境将导致 Apple 的推送服务器断开您的推送服务器。

你如何分离你的推送令牌是你需要在你的服务器中构建的东西。

希望有帮助。

# php - ID3标签中的奇怪符号

> ID：13982260
> 
> 赞同：1
> 
> 时间：2012-12-20T23:42:17.233
> 
> 标签：php, html, mp3, metadata

我在 php 中使用元数据阅读器。它工作得很好，但是当我使用它将来自函数的值放入 INPUT 时，我在输入框中得到奇怪的符号。

这是源代码：

```
if($fileStatus == 1){
    include ("include/functions.php");
    $filename=$uploaded;
    $mp3file=new CMP3File;
    $mp3file->getid3($filename);
    $hej = "hejhejhej";
    ?>
    <form>
        <input type="text" name="hej" value="<?php echo $hej;?>">
        <input type="text" name="title" value="<?php echo "$mp3file->title";?>"><br>
        <input type="text" name="artist" value="<?php echo "$mp3file->artist";?>"><br>
        <input type="text" name="album" value="<?php echo "$mp3file->album";?>"><br>
        <input type="text" name="year" value="<?php echo "$mp3file->year";?>"><br>
        <textarea name="artist"><?php echo "$mp3file->comment";?></textarea><br>
        <input type="text" name="genre" value="<?php echo "Ord($mp3file->genre)";?>"><br>
    </form>
    <?php   
} 
```

我从浏览器获得的源代码：

```
<form>
                    <input type="text" name="hej" value="hejhejhej">
                    <input type="text" name="title" value="Selene 
```

### 截屏

![](../Images/e848b6e341baba2ac1396311c1ffd1e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:28:08.733

这个问题的解决方案是“Trim()”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:52:42.597

您看到的奇怪字符是因为 CMP3File 使用 fread 从实际 MP3 文件中获取字节（如果您想了解更多信息，请阅读 ID3 标签）。如果您想将实际字节视为字符串，请使用 ord 函数，如下所示：

```
<?php
    for($i = 0; $i < strlen($mp3file->title); $i++) {  
        echo ord($mp3file->title[$i]);  
    }  
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:49:41.303

### 尝试使用 HTML 实体。

这可能是因为 UTF-8 并且浏览器不支持该编码。可能是，PHP[`htmlentities`](http://php.net/manual/en/function.htmlentities.php)可能会帮助你。代替：

```
<?php echo $hej;?> 
```

和：

```
<?php echo htmlentities($hej);?> 
```

# java - Android 平板电脑和相机之间的 USB 批量传输

> ID：13982264
> 
> 赞同：42
> 
> 时间：2012-12-20T23:42:49.057
> 
> 标签：java, android, usb, android-camera

我想使用该`bulkTransfer`功能在相机和 Android 平板设备之间交换数据/命令。我写了这个Activity，但是方法`bulkTransfer`返回`-1`（错误状态）。为什么它会返回错误？

```
public class MainActivity extends Activity {

    private TextView text;
    private int TIMEOUT = 1000;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (TextView) findViewById(R.id.txt);
        usbTest();
    }

    private void usbTest() {
        UsbDevice device = (UsbDevice) getIntent().getParcelableExtra(
                                                                      UsbManager.EXTRA_DEVICE);
        if (device == null)
            text.setText("device null");
        else
            text.setText("device not null");

        UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
        HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
        text.setText(text.getText() + "\nDevices connected: "
                     + deviceList.values().size());
        Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();

        while (deviceIterator.hasNext()) {
            device = deviceIterator.next();
            text.setText(text.getText() + "\nDevice name: "
                         + device.getDeviceName());
            text.setText(text.getText() + "\nDevice protocol: "
                         + device.getDeviceProtocol());
            text.setText(text.getText() + "\nDevice id: "
                         + device.getDeviceId());
            text.setText(text.getText() + "\nDevice product id: "
                         + device.getProductId());
            text.setText(text.getText() + "\nDevice vendor id: "
                         + device.getVendorId());
            text.setText(text.getText() + "\nDevice class: "
                         + device.getDeviceClass());
            text.setText(text.getText() + "\nDevice subclass: "
                         + device.getDeviceSubclass());
            text.setText(text.getText() + "\nDevice interface count: "
                         + device.getInterfaceCount());
            text.setText(text.getText() + "\n\n");
        }

        // communicate with device
        UsbInterface intf = device.getInterface(0);
        UsbEndpoint endpoint = intf.getEndpoint(0);
        UsbDeviceConnection connection = manager.openDevice(device);
        connection.claimInterface(intf, true);

        for (int i = 0; i < intf.getEndpointCount(); i++) {
            UsbEndpoint ep = intf.getEndpoint(i);
            if (ep.getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                if (ep.getDirection() == UsbConstants.USB_DIR_OUT) {
                    endpoint = ep;
                    text.setText("Found: "+i);
                }
            }
        }

        // byte[] opensession = { 0x0C, 0x00, 0x00, 0x00, 0x01, 0x00, 0x02,
        // 0x10,
        // 0x00, 0x00, 0x00, 0x00 };
        // connection.bulkTransfer(endpoint, opensession, opensession.length,
        // TIMEOUT);

        byte[] getEvent = { 0x0C, 0x00, 0x00, 0x00, 0x01, 0x00, toByte(0xC7),
            toByte(0x90), 0x00, 0x00, 0x00, 0x00 };
        int status = connection.bulkTransfer(endpoint, getEvent,
                                             getEvent.length, TIMEOUT);
        //text.setText("Status: " + status);

        byte[] capture = { 0x14, 0x00, 0x00, 0x00, 0x10, 0x00, 0x0E, 0x10,
            0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00 };
        connection.bulkTransfer(endpoint, capture, capture.length, TIMEOUT);

        // teminate communication
        BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
                    UsbDevice device = (UsbDevice) intent
                    .getParcelableExtra(UsbManager.EXTRA_DEVICE);
                    if (device != null) {
                        // call your method that cleans up and closes
                        // communication with the device
                    }
                }
            }
        };

    }

    public static byte toByte(int c) {
        return (byte) (c <= 0x7f ? c : ((c % 0x80) - 0x80));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-28T03:30:14.707

我认为这个函数没有通过正确的端点

```
int status = connection.bulkTransfer(endpoint, getEvent,
                                     getEvent.length, TIMEOUT); 
```

这是来自

```
UsbInterface intf = device.getInterface(0);
UsbEndpoint endpoint = intf.getEndpoint(0); 
```

可能是USB接口不正确。请检查索引 0 参数是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-24T09:54:10.483

检查 USB 端点方向。我遇到了一些 USB_DIR_OUT 是 USB_DIR_IN 而 USB_DIR_IN 是 USB_DIR_OUT 的设备，这会导致一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-18T06:20:57.203

提供的代码中有一些看起来错误的地方：a）`OpenSession`首先需要使用事务 id 0 完成请求，b）增加事务 id，c）从`USB_DIR_IN`.

我的理解是第一个请求应该打开一个到相机的会话，只有在这之后你才能使用`GetEvent`请求。此外，您需要增加事务 id 并且仅将 id 0 用于`OpenSession`. 下面是我为尼康相机找到的 PTP 规范的引用。

> TransactionID 是从 0x00000001 开始按数字顺序排列的连续序列。用于 OpenSession 操作的 TransactionID 应为 0x00000000。

[我在我的Github](https://github.com/michaelzoech/remoteyourcam-usb)上为 Nikon 和 Canon 应用程序开源了一个 Android 相机应用程序。该代码已有几年历史了。您将很难编译它，但 PTP 代码可能是一个很好的参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T12:29:46.580

我怀疑您没有正确搜索接口和端点。

请参阅下面的说明。

建议：测试端点是否有效，并尝试将其与设备描述符匹配。

* * *

一个界面可以有多个设置。

AFAIK，对于相机，它们应该是相机界面的三个备用设置。

*   零带宽——内部没有端点——很可能是备用设置 0
*   等时（如果相机支持）——内部等时端点
*   Bulk -- 里面的批量端点 <-- 你感兴趣的地方

（我不知道实际的 USB 相机规格，但这应该适用于 USB 上的所有流媒体协议（正如我在音频类中看到的那样））

您需要搜索批量备用设置，然后在其中的端点上执行通信。

# python - 如何在 LXML 中使用 XPATH 根据属性指定特定元素

> ID：13982270
> 
> 赞同：3
> 
> 时间：2012-12-20T23:43:45.920
> 
> 标签：python, html, lxml

我正在努力提高我对 XPATH 的理解。我有一个包含许多元素的文档。我正在寻找文档中包含一些加粗的特定文本的字体元素。

这是 div 元素中的字体元素的示例。字体元素具有我想要捕获的粗体文本

```
<div style="line-height:120%;padding-bottom:10px;padding-top:10px;font-size:10pt;"><font style="font-family:inherit;font-size:10pt;font-weight:bold;">SECTION 1.&nbsp;&nbsp;&nbsp;&nbsp;Executive&nbsp;Summary</font></div> 
```

让我明确一点，这是一个更大的文件的一部分。我找到了一个 XPATH 教程，它描述了如何选择特定元素

只是为了确保我没有遇到我如何阅读文件的问题

```
tree=html.fromstring(open('c:\\mytest.htm')

x=tree.xpath('//font') 
```

这是因为 x 有 3023 个元素，当我检查它们时，我发现它们都是字体元素。有些是我想要的元素。

然后我尝试通过使用来隔离相关元素

```
my_elements = tree.xpath('//font[@font-weight='bold']') 
```

这不起作用，因为 my_elements 是空的。在写这个问题时，我仔细查看了 html 的片段，并在 IDLE 中玩了一些。我认为问题在于我没有字体标签字体粗细的属性。字体粗细与样式属性有关。本例中字体标签的唯一属性是样式。想多说，又怕把水搅得太多

底线我希望能够使用 xpath 来查找所有粗体字体元素并在文本中包含单词部分我可以通过迭代元素并以非常笨重的方式进行测试来做到这一点

```
my_elements = [e for e in tree.iter() if e.tag == 'font' if 'bold' in e.values()[0] ]
my_elements = e for e in my_elements if 'section' in e.text_content().lower() 
```

XPATH 看起来很值得理解。

感谢您的任何解释。

嗯，我终于走上了正轨

```
testelem=tree.xpath('//font[contains(@style,"font-weight:bold")]') 
```

好的，现在我们使用 and 运算符

```
testelem=tree.xpath('//font[contains(@style,"font-weight:bold") and contains(text(),"SECTION")]') 
```

现在使它不区分大小写

我正在接近理解 contains 的工作原理，但我很高兴有人提出解决方案

```
testelem=tree.xpath('//font[contains(@style,"font-weight:bold") and starts-with(translate(text(),"SECTION","section"),"section")]') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-01T17:50:24.597

**只要意识到这篇文章就像 > 2 岁**，无论如何我仍然希望这个答案能帮助遇到这个问题的人。

您可以在**lxml**的 xpath中使用[正则表达式](http://lxml.de/xpathxslt.html#regular-expressions-in-xpath)。默认情况下，XPath 支持[EXSLT](http://www.exslt.org)命名空间中的正则表达式：

 **```
testelem = tree.xpath('//font[re:match(text(), \
                      "^(?i)section.*") and \
                      contains(@style, "font-weight:bold")]',
                      namespaces={'re': "http://exslt.org/regular-expressions"})

print testelem
[<Element font at 0x1042f49f0>]

for t in testelem:
    print t.text, t.attrib

SECTION 1\.    Executive Summary {'style': 'font-family:inherit;font-size:10pt;font-weight:bold;'} 
```**

# ruby - 如何在 Mac OS 10.8.2 上安装 ruby 指南针

> ID：13982274
> 
> 赞同：1
> 
> 时间：2012-12-20T23:44:25.213
> 
> 标签：ruby, macos, compass-sass

我开始`gem update`，它运行如下：

```
Marios-MacBook-Pro:~ MarioVMtz$ gem update --system
Updating RubyGems
Updating rubygems-update
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /Library/Ruby/Gems/1.8 directory. 
```

我安装了Mac OS 10.8.2 上`xcode rvm`还需要安装什么？`ruby compass`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:12:36.430

使用 sudo 运行命令？**sudo** gem update --system 应该解决您的直接问题。

# unit-testing - Matlab Level2 / c-sfunctions的单元测试

> ID：13982282
> 
> 赞同：2
> 
> 时间：2012-12-20T23:45:44.353
> 
> 标签：unit-testing, matlab, simulink

我正在寻找一种在 Matlab/Simulink 函数上运行测试的方法。对于“正常”功能，xUnit-Framework 很好。

是否有任何已知的方法来为 Level2 或 c-sfunctions 创建测试？

我知道这将比普通的单元测试复杂得多，但不知何故这应该是可能的？

是否有任何详细信息需要哪些参数来调用函数？

（我问了这个问题——没有得到答案——一周前在[Matlab Central](http://www.mathworks.de/matlabcentral/answers/56350-writing-tests-for-sfunctions)上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T18:48:44.597

**您可以使用适当的TLC**文件（目标语言编译器）从模型生成 C 代码，该文件可以在生成的代码中内联 simulink s-function 块。

稍后您可以对生成的代码执行测试。

如果 S-Function 编写正确，您还可以模拟模型，并在运行时向模型/S-Function 块提供测试输入/数据。

# ruby-on-rails - Rails collection_select 不接受 :selected 选项

> ID：13982285
> 
> 赞同：1
> 
> 时间：2012-12-20T23:45:57.880
> 
> 标签：ruby-on-rails, ruby, hash

我正在使用 a`collection_select`来显示哈希的内容：

### 哈希

```
CATEGORY1_TEXT_STYLE = {
  'Normal' => 'normal',
  'Normal Centered' => 'normal center',
  'Bold' => 'bold'
  ...
} 
```

### 收藏选择

```
= collection_select :category1_style1, :first, Homepage::CATEGORY1_TEXT_STYLE, :last, :first, options = { :selected => style_selected(@style.first) } 
```

### `style_selected`（来自助手）

```
def style_selected(value)
  returnval = ''
  Homepage::CATEGORY1_TEXT_STYLE.each { |key, val| returnval = key if val == value }
  returnval
end 
```

### 控制器

```
@style = Homepage.find(0).category1_style.gsub('-', '').split("\n")[1..-1] 
```

这输出：`[" bold center", " blue center", " normal center", " blue center"]`

这很令人困惑，因为我不确定如何让它根据该哈希选择一个选定的值。我在使用 id 值（数字）之前已经完成了它并且它有效，但是这个键/值对都是字符串，并且该`:selected => ""`字段似乎不想再次匹配字符串，无论它是匹配键还是价值（我都试过了）。

关于在处理字符串时尝试让集合选择显示默认选定值的任何见解？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:53:36.943

答案在这里：[http ://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select#632--selected](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select#632--selected)

> 如果您希望默认选择某个对象，请务必使用其 id，而不是整个对象。

# cygwin - 通过cygwin在windows 7上安装gearman并得到“configure: error: Unable to find libevent”

> ID：13982293
> 
> 赞同：0
> 
> 时间：2012-12-20T23:46:54.887
> 
> 标签：cygwin, gearman, libevent

我是一个新手，尝试使用此处的教程通过 cygwin 在 Windows 上安装 gearman： [http ://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/](http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/)

我需要安装 gearman 才能在我的 Windows 7 笔记本电脑上进行开发。

我已经在我的`C:\cygwin\libeventInstall`目录中安装了 libevent，但是当我`./configure`在 gearman 上执行时，它给了我`error: configure: error: Unable to find libevent`

我读过我需要安装 libevent-devel。我不知道 libevent-devel 是什么以及如何通过 cygwin 安装它。我为 libevent-devel 找到了一堆 .rpm 安装文件，但我认为我不能在 Windows 上安装它。我还发现了一个 libevent-devel-2.0.11-1.tar.bz2 但它包含一堆头文件并且没有配置文件。似乎没有任何关于如何在 cygwin 上安装 libevent-devel 的文档。

卡了几天。任何指针都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:13:54.297

放弃使用cygwin。尝试按照上述重新安装 libevent 并重新运行 gearman ./configure 并且“配置：错误：无法找到 libevent”仍然存在。

采纳了 James Butler 的建议，改用 virtualbox。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:44:36.743

您需要构建 LibEvent，它不包含在 Cygwin 中。我*没有尝试过*，但[谷歌搜索](http://comments.gmane.org/gmane.comp.lib.libevent.user/338)导致以下说明：

1.  你需要
    *   [http://win6.jp/Cygwin/cygwin-1.5.25-15-ipv6-0.22.zip](http://win6.jp/Cygwin/cygwin-1.5.25-15-ipv6-0.22.zip)
    *   [http://monkey.org/~provos/libevent-1.4.9-stable.tar.gz](http://monkey.org/~provos/libevent-1.4.9-stable.tar.gz)
2.  将 cygwin-1.5.25-15-ipv6-0.22.zip 解压到你的 cygwin 文件夹中，关于这个文件阅读网站[http://win6.jp/Cygwin/](http://win6.jp/Cygwin/)
3.  在 libevent http.c 文件中添加行 ---> #define EAI_SYSTEM 11
4.  现在安装 libevent
5.  。/配置
6.  制作
7.  进行安装

我还发现这个[SO 线程](https://stackoverflow.com/questions/8321187/build-libevent-under-windows-with-cygwin)很有趣，因为 Libevent 开发人员正在发表评论。

# html - 页脚 div 发挥作用

> ID：13982294
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:47:03.450
> 
> 标签：html, css

我正在尝试在我的网站上放置一个页脚，我希望将提交的文本放在一个字段中，但由于某种原因，我的两个 div 没有相处，正如您在[这个 JSFiddle](http://jsfiddle.net/PfFun/1/)中看到的那样。

页脚的所有 CSS 是：

```
.footer {
  background-image: url('debut_dark.png');
  color: white;
  width: 900px;

  margin-left: auto;
  margin-right: auto;
  margin-bottom: 3px;

  padding-top: 15px;
  padding-bottom: 15px;
  padding-left: 25px;
  padding-right: 25px;
} 
```

我找不到它有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:51:35.383

您需要`.contentdata`正确关闭 div ..`<div>`而不是，`</div>`这意味着`.footer`在内部`.contentdata`弄乱了尺寸。

```
<div class="contentdata">
   <?php echo $content; ?>
</div> 
```

**演示在** [http://jsfiddle.net/gaby/PfFun/3/](http://jsfiddle.net/gaby/PfFun/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:49:55.770

从`.footer`CSS 中删除宽度。

```
.footer {
background-image: url('debut_dark.png');
color: white;

margin-left: auto;
margin-right: auto;
margin-bottom: 3px;

padding-top: 15px;
padding-bottom: 15px;
padding-left: 25px;
padding-right: 25px;
} 
```

只是猜测，因为您还没有解释它的外观。

# python - `setattr`（和`getattr`）的使用可以被认为是不好的做法吗？

> ID：13982297
> 
> 赞同：9
> 
> 时间：2012-12-20T23:47:48.140
> 
> 标签：python, getattr, setattr

`setattr`并且`getattr`有点进入我的编程风格（主要是科学的东西，我对 python 的了解是自说自话的）。

考虑到这一点`exec`并`eval`继承潜在的危险，因为在某些情况下它们可能会导致安全问题，我想知道对于`setattr`相同的论点是否被认为是有效的。（关于`getattr`我发现[这个问题](https://stackoverflow.com/questions/2909423/is-it-bad-practice-to-use-pythons-getattr-extensively)包含一些信息 - 尽管论证不是很有说服力。）

据我所知，`setattr`可以不用担心太多，但老实说我不太相信我的python知识，如果我错了，我想尝试改掉使用的习惯`setattr`.

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T00:05:08.010

首先，它肯定可以更容易地解决现有的安全漏洞。

例如，假设您有执行`exec`, `eval`, SQL 查询或通过字符串格式构建的 URL 等的代码。假设您正在传递、说`locals()`或过滤`__dict__`到格式化命令或作为`eval`上下文或其他任何东西。使用`setattr`显然会扩大安全漏洞，使我更容易找到攻击代码的方法，因为您不再确定要传递给这些函数的内容。

但是，如果您不做任何其他不安全的事情怎么办？`setattr`那么安全吗？

没有那么糟糕，但它仍然不安全。如果我可以影响您正在设置的属性的名称，例如，我可以在您的对象上替换我想要的任何方法。

您可以尝试通过例如首先检查旧值是否不可调用，或者不是方法类型描述符或其他方式来防止这种情况。以同样的方式，您可以尝试防止人们在 SQL 参数中调用函数`eval`或在 SQL 参数中添加引号和分号等。这实际上与任何其他情况相同。尝试关闭所有通往敞开的门的非法路径比一开始就不开门要困难得多。

如果名称从不来自任何可能受用户影响的东西怎么办？

那么，在那种情况下，你为什么要使用`setattr`？没有充分的理由`setattr`使用文字进行调用。

无论如何，当 Lattyware 说通常有更好的方法来解决手头的问题时，他几乎肯定是在谈论可读性、可维护性和惯用性。但是使用这些更好的方法的副作用是您还经常避免任何安全隐患。

90% 的情况下，解决方案是使用 a`dict`而不是对象。与 Javascript 不同，它们在 Python 中不是一回事，而且它们的使用方式也不相同。A`dict`没有方法、继承或内置的特殊名称，因此您不必担心这些。它还具有更方便的语法，您可以在其中说`d['foo']`而不是`setattr(o, 'foo')`. 而且它可能更有效。等等。但归根结底，使用 a 的`dict`原因是概念上的原因：a`dict`是值的命名集合；类实例是模型空间对象的表示，它们不是一回事。

那么，为什么会`setattr`存在呢？

它的存在与其他低级功能相同的基本原因，例如能够访问`im_func`or `func_closure`，或者具有类似`traceback`and的模块`imp`，或者像对待任何其他方法一样处理特殊方法，或者就此而言`exec`and `eval`。

首先，您可以使用这些低级工具构建更高级别的东西。例如，要构建`collections.namedtuple`，您需要`exec`或`setattr`。

其次，您有时需要在运行时对代码进行猴子补丁，因为您无法在编译时修改它（甚至可能看到它），而类似的工具`setattr`对于这样做是必不可少的。

这个`setattr`特性——很像`eval`——经常被来自 Javascript、Tcl 或其他一些语言的人滥用。但只要它可以永久使用，您就不想将其从语言中删除。（TOOWTDI 不应该被理解为只能编写一个程序。）

但这并不意味着你应该尽可能地使用这些东西。你不会写`mylist.__getitem__(slice(1, 10, 2))`而不是`mylist[1:10:2]`. 有时，能够`__getitem__`直接调用或显式构建`slice`对象是让其余代码更加pythonic的基础，或者是本地化解决方法以避免感染其余代码的方法。否则，有更清晰和更简单的方法可以做到这一点。

# push-notification - APNS 推送请求已成功发送，但通行证未更新

> ID：13982305
> 
> 赞同：2
> 
> 时间：2012-12-20T23:49:11.710
> 
> 标签：push-notification, apple-push-notifications, passbook

我设置了一个应用程序来生成存折通行证。成功安装在设备上，我可以进行手动（下拉）更新。

接下来我开始实施APNS。我正在使用增强的请求方法连接到生产环境，发送一个空的有效负载（根据需要），当我请求推送通知时它不返回错误代码，但我的通行证永远不会更新，我看到没有请求访问我的服务器. 我正在使用自己的设备进行测试，直到我可以看到自己的更新。没有收到通行证更新。

然后我实施了反馈服务，希望它能告诉我一些事情。我注意到了这一点。如果我传入推送令牌，我会收到一个响应，表明设备没有收到通知（即使传递设置为自动更新）。通行证没有更新。

我很感激任何关于为什么推送通知似乎没有到达的信息。

谢谢。-埃里希

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:10:15.100

要检查的一个问题是您没有使用沙盒 APNS 服务器。所有 Passbook 推送请求都应发送到实时 APNS 服务器。

尝试从设备上的开发人员设置的 PassKit 部分启用附加日志记录选项，然后将设备连接到 Xcode 并在发送推送时监控控制台。如果收到推送，那么您应该能够看到您的设备请求从您的网络服务更新连续剧，并且您还应该看到服务器的响应。

假设您发送了一个序列号并且它与您设备上安装的序列号相匹配，那么您应该会看到设备请求更新的 .pkpass 包。

如果没有收到推送，请尝试在监控设备控制台时打开和关闭自动更新。可能是设备没有收到有效的注册 (201) 响应，或者您使用的是过时的令牌 - 您将能够通过控制台看到这些。

# javascript - 在 Javascript 中，删除元素或将其显式设置为未定义更有效

> ID：13982306
> 
> 赞同：16
> 
> 时间：2012-12-20T23:49:15.603
> 
> 标签：javascript

假设我有一个关联数组 Foo，带有键栏和值 xyz。

```
 console.log(Foo['bar']);

 >> xyz

 delete Foo['bar'];
 console.log Foo['bar'];

 >> undefined

 Foo['bar'] = 'xyz';
 console.log(Foo['bar']);

 >> xyz

 Foo['bar'] = undefined;
 console.log (Foo['bar']);

 >> undefined 
```

我的问题是，两者中哪一个更有效，它们有什么不同吗？是否存在我应该使用其中一个的场景？

谢谢！

结果：

感谢大家帮助并向我展示 jsperf。将其设置为 undefined 似乎（相对）比 delete 快得多，尽管下面指出的所有警告也非常有趣（事实上，我可能会在未来大量使用 delete 以避免将来出现 leftfield 错误）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:53:28.150

我没有对这些操作的性能进行基准测试（正如我在评论中提到的，只是在[http://www.jsperf.com](http://www.jsperf.com)上创建一个小基准），但我会失去一些关于差异的说法。

您将始终擅长`delete`ing 属性，将它们设置为`undefined`或`null`将让人员和/或代码挂起，这与`IN`操作员核对。

像

```
if( 'bar' in Foo ) { } 
```

如果`true`您设置`Foo.bar`为`undefined`. 如果你去，它不会`delete Foo.bar`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T23:57:53.213

请注意，如果原型链上存在同名属性，则从对象中删除属性将用同名属性之一替换该属性。

将属性设置为 null 或 undefined 只会掩盖它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T23:54:59.803

从长远来看，它会产生负面的性能差异，因为`b`在后者分配给`undefined`. 例如：

```
var a = { b : 0 };

a.b = undefined;

a.hasOwnProperty("b");
>>> true 
```

`in`关键字 (为 true ) 也是如此`"b" in a`，因此当是较大对象的一部分时，这很可能会阻碍迭代。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-20T06:50:30.427

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-15T18:32:40.387

经过一些实验和研究，我得出结论，至少在我的机器上，使用`delete`操作符比赋值慢 6 倍`undefined`。尽管如此，重要的是要记住[jAndy 关于原型链和属性存在的说法](https://stackoverflow.com/a/13982339/9821959)。

如果您想重新执行我的测试，我实例化了一个包含 50,000 个项目的数组。（项目数量无关紧要，只要它大到足以显示两个测试之间的差异。）

```
let arr = new Array(500000).fill(null).map(() => ({"item": 42})); 
```

然后我计算了将每个对象的 item 属性分配给数组中未定义的时间量与删除数组中每个对象的 item 属性所需的时间量。

```
console.time("Assignment To Undefined");
arr.forEach(object => object.item = undefined);
console.timeEnd("Assignment To Undefined");

//Reset the array here...

console.time("Deletion");
arr.forEach(object => delete object.item);
console.timeEnd("Deletion"); 
```

我的所有结果：

*   删除：大约 200 - 170 毫秒。
*   作业：大约 15 - 40 毫秒。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-20T23:55:09.323

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-21T00:19:19.473

由于删除该属性不会以编程方式将其设置为未定义，因此它实际上取决于您想要的编程结果。

`delete Foo['bar'];`从对象中删除`bar`属性。`Foo`如果有人迭代`Foo`.

`Foo['bar'] = undefined`将属性设置为未定义，但它仍然存在于对象上并且仍然存在，但值为`undefined`.

因此，如果您想摆脱该属性，请使用`delete`. 如果您希望该属性仍然存在，但有一个`undefined`值，则将其设置为`undefined`.

如果您真的只是想知道哪个最快并且由于某种原因不关心编程差异，那么请访问 jsperf.com，为自己制作两个比较测试用例，并在一堆不同的浏览器中运行 jsperf你。所有性能问题都应通过相关的真实世界测试来回答。

# sdk - CUDA 5.0：如果类具有“检查”方法，则 checkCudaErrors 无法找到正确的“检查”方法

> ID：13982308
> 
> 赞同：1
> 
> 时间：2012-12-20T23:49:18.007
> 
> 标签：sdk, cuda, compiler-errors, sample

由于从 CUDA 示例中删除了 cutil.h 标头，因此引入了一些新的标头，例如 helper_cuda.h、helper_functions.h。

我使用的主要关键字之一是 CUDA_CHECK_ERROR，我认为它已被 checkCudaErrors 取代。

在我的大部分代码中，宏都可以编译并且运行良好。但是，当我在具有名为 check(..) 的函数的类中使用它时，checkCudaErrors 函数会给出编译错误。

这是一个例子：

```
#include <stdio.h>

#include <cuda_runtime.h>
#include <helper_cuda.h>
#include <helper_functions.h>

template<typename T>
class Trivial {

public:

    void check()
    {

    }

    void initialize() 
    {
        checkCudaErrors(cudaMalloc(NULL, 1));
    }

    T val;

};

int main(int argc, char **argv)
{

    Trivial<int> tt;

    tt.initialize();

    return 0;
} 
```

以及编译结果：（使用 GCC 4.5 编译时也会出现同样的错误！）

```
1>------ Build started: Project: ZERO_CHECK, Configuration: Release x64 ------
2>------ Build started: Project: massivecc, Configuration: Release x64 ------
2>  trivial_main.cpp
2>..\src\trivial_main.cpp(19): error C2660: 'Trivial<T>::check' : function does not     take 4 arguments
2>          with
2>          [
2>              T=int
2>          ]
2>          ..\src\trivial_main.cpp(18) : while compiling class template member         function 'void Trivial<T>::initialize(void)'
2>          with
2>          [
2>              T=int
2>          ]
2>          ..\src\trivial_main.cpp(29) : see reference to class template         instantiation 'Trivial<T>' being compiled
2>          with
2>          [
2>              T=int
2>          ]
3>------ Skipped Build: Project: ALL_BUILD, Configuration: Release x64 ------
3>Project not selected to build for this solution configuration 
========== Build: 1 succeeded, 1 failed, 1 up-to-date, 1 skipped ========== 
```

当我删除模板参数时，也会出现同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:30:03.107

我必须将 check(..) 函数的定义从 helper_functions.h 复制到我的类的头文件中才能编译该类。

```
#include <stdio.h>    
#include <cuda_runtime.h>
#include <helper_cuda.h>
#include <helper_functions.h>    
class Trivial {    
public:    
    template< typename T >
    bool check(T result, char const *const func, const char *const file, int const line)
    {
        if (result) {
            fprintf(stderr, "CUDA error at %s:%d code=%d(%s) \"%s\" \n",
            file, line, static_cast<unsigned int>(result), _cudaGetErrorEnum(result), func);
            return true;
        } else {
            return false;
        }
    }

    void check() {  }

    void initialize() 
    {
        checkCudaErrors(cudaMalloc(NULL, 1));
    }
};

int main(int argc, char **argv)
{
    Trivial tt;
    tt.initialize();    
    return 0;
} 
```

所以，这主要解决了我的问题，我的代码编译成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T21:17:24.307

参考第 680 行 helper_cuda.h 中的源代码

[https://github.com/pathscale/nvidia_sdk_samples/blob/master/vectorAdd/common/inc/helper_cuda.h](https://github.com/pathscale/nvidia_sdk_samples/blob/master/vectorAdd/common/inc/helper_cuda.h)

你会发现 checkCudaErrors 声明了一个 #define checkCudaErrors(val) check ( (val), #val, **FILE** , **LINE** )，它接受一个参数并使用基于 config 的 3 个其他参数调用 check。注意它也在第 680 行中定义

而在您的情况下，您定义了一个不带任何参数的检查。不同的声明和定义，多个定义的情况。

# signalr - 使用 SignalR 作为 WebRTC 的服务层

> ID：13982309
> 
> 赞同：6
> 
> 时间：2012-12-20T23:49:36.527
> 
> 标签：signalr, webrtc, xsockets.net

[这是我提出的另一个问题](https://stackoverflow.com/questions/13960924/troubleshooting-webrtc-code)的后续，但提供了更准确的信息。

我有两个基本相同的网页来演示 WebRTC，一个使用 XSockets 作为后端信号层，一个使用 SignalR 作为后端信号层。

这两个后端基本上是相同的，不同之处仅在于它们（显然）具有不同的方式将数据发送到客户端。同样，两个客户端上的 TypeScript/JavaScript WebRTC 代码完全相同，因为我已经抽象出信号层。

问题是 XSockets 站点始终如一地工作，而 SignalR 站点却失败了（大部分一致，但不完全）。通常调用时会失败`peerConnection.setLocalDescription()`，但也可以静默失败；或者它（有时）甚至可以工作。

您可以在这里看到两个不同的页面在运行：

XSockets 站点：http: [//xsockets.demo.alanta.com/](http://xsockets.demo.alanta.com/)

SignalR 网站：[http ://signalr.demo.alanta.com/](http://signalr.demo.alanta.com/)

两者的源代码都在[https://bitbucket.org/smithkl42/xsockets.webrtc，XSockets](https://bitbucket.org/smithkl42/xsockets.webrtc)版本在分支上`xsockets`，SignalR 版本在`signalr`分支上。

所以我的问题是：有人知道为什么使用一个信号层而不是另一个信号层会对 WebRTC 产生任何影响吗？例如，是否其中一个或另一个发回 Unicode 字符串而不是 ANSI？还是我误诊了问题，真正的区别在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:39:46.440

弄清楚了。事实证明，SignalR 1.0 RC1 中有一个错误，它将字符串中的任何“+”更改为空格。所以 SDP 中的行看起来像这样：

`a=ice-pwd:qZFVvgfnSso1b8UV1SUDd2+z`

正在变成这样：

`a=ice-pwd:qZFVvgfnSso1b8UV1SUDd2 z`

但是因为不是每个 SDP 在关键行上都有一个“+”，所以有时它会起作用。一切都解释了。

该错误已报告给从事 SignalR 工作的好人（请参阅[https://github.com/SignalR/SignalR/issues/1194](https://github.com/SignalR/SignalR/issues/1194)），同时，一个简单的`encodeURIComponent()`和`decodeURIComponent()`围绕有问题的字符串修复了它。

# linux - else 中的字符串匹配期望

> ID：13982310
> 
> 赞同：4
> 
> 时间：2012-12-20T23:49:37.570
> 
> 标签：linux, shell, expect

我想在发送命令后对 telnet 使用 expect 它可能会返回不同的结果让我说，比如以下 3 种可能性

```
1 successful
2 normal
3 there are something wrong...blabla
  you can refer to ....blabla

expect{
   "successful" {}
   "normal" {} 
   #here, for the third possibility, I want to use something like "else", so what should I put here? thanks!
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:42:42.997

您要查找的关键字是`default`.

```
expect{
   "successful" {}
   "normal" {} 
   default {}
} 
```

# php - mysql_real_escape_string 不回显变量

> ID：13982313
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:50:03.977
> 
> 标签：php, sanitize

我正在尝试清理变量并且遇到问题。

此代码正确输出回声：

```
$to_raw = $_POST['to'] ;
echo $to_raw; 
```

但这没有返回：

```
$to_raw = mysql_real_escape_string($_POST['to']) ;
echo $to_raw; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:53:11.243

如果您没有调用，该功能`mysql_real_escape_string`将不起作用`mysql_connect`。更好的解决方法是在**顶部**创建一个 MySQL 连接，然后再调用`mysql_real_escape_string`.

```
mysql_connect("localhost");
$to_raw = mysql_real_escape_string($_POST['to']) ;
echo $to_raw; 
```

### 建议

与已弃用的函数相比，使用`PDO`or函数更好。`mysqli_*``mysql_*`

# java - Java >> 运算符查找字符是否唯一

> ID：13982314
> 
> 赞同：0
> 
> 时间：2012-12-20T23:50:15.780
> 
> 标签：java, string, character, operator-keyword

我不太确定这段代码是如何工作的：

```
public static boolean isUniqueChar2(String str) {
    int checker = 0;

    for (int i = 0; i < str.length(); ++i) {
        int val = str.charAt(i) - 'a';
        System.out.println(str.charAt(i) );
        System.out.println(val);
        if ((checker & (1 << val)) > 0)
            return false;
        checker |= (1 << val);
    }
    return true;
} 
```

特别是我不了解特定的 >> 运算符和检查器的作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:02:15.150

看起来这种方法仅适用于小写字母。该变量是初始化为所有s`checker`的 32 位位图。`0`该代码`1 << val`采用 1 并将其移动到 的位置`val`，它表示字母表中的一个字母（a=0、b=1、c=2 等）。 `if ((checker & (1 << val)) > 0)`返回`false`，因为 0 以外的任何值都表示一个字母被重复了。循环中的最后一行，`checker |= (1 << val);`将位设置`val`在下一次迭代之前的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:55:37.753

> > 和 | 是按位移位和二进制或。我建议您阅读二进制和位运算符：[http ://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

a |= b 只是 a = a | 的简写。b 类似于 a += b 到 a = a + b

# web-services - 这是一种什么样的 Web MVC 模式？

> ID：13982320
> 
> 赞同：-3
> 
> 时间：2012-12-20T23:51:12.340
> 
> 标签：web-services, model-view-controller, design-patterns, web-applications, coldfusion

我想知道下图是哪种 MVC 模式。我们正在根据这种模式使用 ColdFusion 开发一个 Web 应用程序，到目前为止进展顺利。但它甚至是某种 MVC 吗？

![](../Images/51a15dec3670b2d0460db51d3299ee8b.png)

前端页面通常包括：
- 包括相应的网关（每个模型组件都有自己的网关，具有专用功能）
- 使用提供的 GATEWAY 结构（包含表示所需数据的组件、数组、结构等）来呈现输出
- 简单流程控制（if/else/loops）遍历提供的数据或区分视图状态
- 如果需要：构建表单（POST 到同一页面）并根据 GATEWAY 规范命名它们的字段名称

GATEWAY 文件（总是与前端页面分开）验证请求（通常是 POST 数据）并负责数据检索（即选择/插入/更新数据库）。通常 GATEWAY 请求数据而不考虑操作（评估运行时数据，如 SESSION）。所有操作都是故障安全的，因此结果结构中要么有数据，要么数据为空。无论哪种方式，结构中的两个数组（成功、错误）都提供了处理期间所有执行操作的日志，以便在前端页面上做出相应的反应。大多数数据是作为组件（对象）提供的，但总而言之，它不是一种完全面向对象的方法。它们唯一的共同点是：它们都描述了输入参数（GET、POST、Session、Cookie）和传出参数，例如（RESTful）Web 服务。

我想出了很多关于使用的模式的想法，但我还不能在所有方面都匹配它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:06:26.850

在我看来，MVC 提供的最重要的东西是视图和模型之间的分离。通过这样做，您可以完全替换视图或模型，而无需更改另一个。事实上，控制器的主要目的是充当两者之间的中间人。需要切换数据库服务器，你不应该改变你的视图，甚至你的控制器。需要创建一个新视图，或者替换你拥有的视图，你不应该真的弄乱你的模型或控制器。

问自己有关您将要创建的这个拟议框架的问题，答案应该很容易。

# android - Android：listview 数组适配器未正确包装内容

> ID：13982321
> 
> 赞同：0
> 
> 时间：2012-12-20T23:51:18.970
> 
> 标签：android, layout, android-activity, android-arrayadapter

我有一个 Theme.Dialog 活动，它向用户显示设备列表。该活动使用带有动态创建的 ArrayAdapter 的 ListView 来显示设备列表。然而，出于某种原因，ListView（以及活动本身）没有调整大小以正确包装其内容。相反，它的作用就像是设置了大约一半屏幕的宽度（并且这在具有不同屏幕尺寸的设备上仍然存在）。不过，我一生都无法弄清楚这是在哪里设置的。

谁能看到我错过了什么？（我试图从以下代码中删除不相关的位）

这是我的活动：

```
public class DeviceListActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Setup the window
        setContentView(R.layout.device_list);

        // Initialize array adapters
        mPairedDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);

        // Find and set up the ListView for paired devices
        ListView pairedListView = (ListView) findViewById(R.id.paired_devices);
        pairedListView.setAdapter(mPairedDevicesArrayAdapter);

        //the following doesn't do anything
        //getWindow().setLayout(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        mPairedDevicesArrayAdapter.add("asdfasdfa");        

    }
} 
```

这是 device_list.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@id/paired_devices"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:stackFromBottom="true" 
        android:background="#0000FF"/>
        <!-- the colour shows the listview stretching wider than the text it contains -->

</LinearLayout> 
```

这是我的 AndroidManifest.xml 的相关部分：

```
<activity
     android:name=".DeviceListActivity"
     android:configChanges="keyboardHidden|orientation"
     android:label="too wide"
     android:theme="@android:style/Theme.Dialog">
</activity> 
```

这是 device_name.xml（用于初始化 ArrayAdapter：

```
<?xml version="1.0" encoding="UTF-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5.0dip"
    android:textSize="18.0sp" /> 
```

如果你一直坚持到现在阅读这个问题，我已经很感激了。

这是最终结果（我的应用程序的其余部分在后台）： ![我无法弄清楚为什么对话框没有包装文本。](../Images/6cb9befb91ae7d398dbbcc4224526c97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T23:53:46.667

我意识到这本质上是一个封闭的问题，但我相信通过在这个答案[https://stackoverflow.com/a/8876358](https://stackoverflow.com/a/8876358)中看到的主题中将 windowIsFloating 设置为 true，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T01:45:12.997

我终于能够让它工作..我将 Listview 子类化并改变了它的测量方式。似乎列表视图本身只会测量第一个孩子。所以它使用第一个孩子的宽度。我将其更改为在列表视图子项中搜索最宽的行。

因此对话框内容的 xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<com.mypackage.myListView
    android:id="@+id/lv"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
 /> 
```

myListView 看起来像这样：

```
public class MyListView extends ListView{

public MyListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // TODO Auto-generated method stub
    int maxWidth = meathureWidthByChilds() + getPaddingLeft() + getPaddingRight();
    super.onMeasure(MeasureSpec.makeMeasureSpec(maxWidth, MeasureSpec.EXACTLY), heightMeasureSpec);     
}

 public int meathureWidthByChilds() {
    int maxWidth = 0;
    View view = null;
    for (int i = 0; i < getAdapter().getCount(); i++) {
        view = getAdapter().getView(i, view, this);
        //this measures the view before its rendered with no constraints from parent
        view.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
        if (view.getMeasuredWidth() > maxWidth){
            maxWidth = view.getMeasuredWidth();
        }
    }
    return maxWidth;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:15:07.890

我很确定这是因为`android:theme="@android:style/Theme.Dialog"`，那些讨厌的对话框有自己的宽度和高度。

请尝试以下操作：创建一个`Fragment`代表您`ListActivity`的`Listview`. 将它放在您的其他 Fragments 上会创建类似对话框的行为。

我 100% 确定问题出在 Theme.Dialog 上。你最好的办法是改变你显示该列表的策略。（例如使用片段）

# c# - 获取标签之间的文本

> ID：13982322
> 
> 赞同：4
> 
> 时间：2012-12-20T23:51:27.137
> 
> 标签：c#, regex

嘿，我有一个如下所示的输入字符串：

```
Just a test Post [c] hello world [/c] 
```

输出应该是：

> 你好世界

有人可以帮忙吗？

我尝试使用：

```
Regex regex = new Regex("[c](.*)[/c]");
var v = regex.Match(post.Content);
string s = v.Groups[1].ToString(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T00:01:24.987

您可以在没有`Regex`. 考虑这种扩展方法：

```
public static string GetStrBetweenTags(this string value, 
                                       string startTag, 
                                       string endTag)
{
    if (value.Contains(startTag) && value.Contains(endTag))
    {
        int index = value.IndexOf(startTag) + startTag.Length;
        return value.Substring(index, value.IndexOf(endTag) - index);
    }
    else
        return null;
} 
```

并使用它：

```
string s = "Just a test Post [c] hello world [/c] ";
string res = s.GetStrBetweenTags("[c]", "[/c]"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T03:17:46.670

在正则表达式中

```
[character_group] 
```

方法：

> 匹配`character_group`.

请注意，`\, *, +, ?, |, {, [, (,), ^, $,., #`and`white space`是[字符转义](http://msdn.microsoft.com/en-us/library/4edbef7e%28v=vs.100%29.aspx)，您必须`\`在表达式中使用它们：

```
\[c\](.*)\[/c\] 
```

正则表达式中的反斜杠字符`\`表示它后面的字符要么是特殊字符，要么应该按字面意思解释。

因此，如果您编辑正则表达式，您的代码应该可以正常工作：

```
Regex regex = new Regex("\[c\](.*)\[/c\]");
var v = regex.Match(post.Content);
string s = v.Groups[1].ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:57:47.063

将您的代码更改为：

```
Regex regex = new Regex(@"\[c\](.*)\[/c\]");
var v = regex.Match(post.Content);
string s = v.Groups[1].Value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-15T02:03:56.313

捎带@horgh的回答，这增加了一个包容/独占的选项：

```
public static string ExtractBetween(this string str, string startTag, string endTag, bool inclusive)
{
    string rtn = null;

    int s = str.IndexOf(startTag);
    if (s >= 0)
    {
        if(!inclusive)
            s += startTag.Length;

        int e = str.IndexOf(endTag, s);
        if (e > s)
        {
            if (inclusive)
                e += startTag.Length;

            rtn = str.Substring(s, e - s);
        }
    }

    return rtn;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T23:58:34.783

你在找这样的东西吗？

```
var regex = new Regex(@"(?<=\[c\]).*?(?=\[/c\])");
foreach(Match match in regex.Matches(someString))
    Console.WriteLine(match.Value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-07T22:10:21.190

此代码还考虑了相同的开始标签，并且可以忽略标签大小写

```
 public static string GetTextBetween(this string value, string startTag, string endTag, StringComparison stringComparison = StringComparison.CurrentCulture)
    {
        if (!string.IsNullOrEmpty(value))
        {
            int startIndex = value.IndexOf(startTag, stringComparison) + startTag.Length;
            if (startIndex > -0)
            {
                var endIndex = value.IndexOf(endTag, startIndex, stringComparison);
                if (endIndex > 0)
                {
                    return value.Substring(startIndex, endIndex - startIndex);
                }
            }
        }
        return null;
    } 
```

# java - 如何为有向网络图中的节点分配权重并计算有效节点权重

> ID：13982323
> 
> 赞同：0
> 
> 时间：2012-12-20T23:51:26.943
> 
> 标签：java, algorithm, graph, graph-algorithm, jung

**我的问题：**

1.  我有一组节点，其中一些节点通过定向边连接。
2.  我想将权重分配给每个节点和每个边。
3.  最后，我想根据连接节点的影响计算有效节点权重。

**背景：**

1.  目前我正在使用 JUNG 来解决我的问题。
2.  我查看了 JUNG 包*edu.uci.ics.jung.algorithms.scoring*。但不确定他们是否会帮助我实现我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:53:40.440

一种方法是将您的节点表示为 Java 类，并将权重表示为此类的属性。您可以保留一组边作为类的字段，并实现一个计算有效权重的方法（例如：getEffectiveWeight()）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:05:41.257

想到了两种方法：

1.  向您的和类中添加一个`weight`字段。`Node``Edge`

2.  创建两个`Map`s。一种使用`Node`s 作为键，另一种使用`Edge`s 作为键。然后将 存储`weight`为值。

# mongodb - mongodb稀疏索引和分片键

> ID：13982326
> 
> 赞同：0
> 
> 时间：2012-12-20T23:51:43.757
> 
> 标签：mongodb, indexing, sharding, nosql

我浏览了文档，找不到明确的答案

假设我在 [a,b,c] 上有一个稀疏索引

1.  是否会将具有“a”“b”字段但没有“c”的文档插入索引？

2.  在最新的 mongodb 版本中是否必须有分片键索引？

3.  如果是这样，是否可以使用上述复合稀疏索引在 [a] 上进行分片？（说a，b将永远存在）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:13:42.313

1.  如果`c`不存在，并且查询`c`在查询计划中使用索引，则不会找到文档，因为它不存在于索引中。
2.  分片键必须被索引并且是唯一的。还可以查看[分片参考文档](http://docs.mongodb.org/manual/core/sharding/)`shard key`上的注释，它说

> **理想的分片键：**
> 
> 很容易被分割，这使得 MongoDB 很容易在分片之间分发内容。具有有限数量可能值的分片键并不理想，因为它们可能导致某些“不可拆分”的块。有关详细信息，请参阅基数部分。将在集群之间分配写操作，以防止任何单个分片成为瓶颈。出于这个原因，与插入时间高度相关的分片键是不好的选择；然而，具有更高“随机性”的分片键更能满足这一要求。有关其他背景信息，请参阅写入缩放部分。将使 mongos 可以直接从单个特定的 mongod 实例返回大多数查询操作。您的分片键应该是您的查询使用的主要字段，因此，具有高度“随机性”的字段是不好的选择。有关具体示例，请参阅查询隔离部分。

所以如果假设，如果 mongo 接受一个稀疏索引作为 shard key，mongo 将不知道在哪里放置不适合索引的文档。有人可以争论，为此目的将它们全部放在另一个碎片中。反驳的论点是，如果它长大了会发生什么......因此我认为这样做没有意义，即使它是允许的。

3-我怀疑稀疏索引会起作用，因为**分片需要唯一索引**，而稀疏索引不符合标准。唯一索引要求，我在文档中没有找到，但如果你使用 mongo admin shell 帮助，它会告诉你。

# javascript - 处理表单数据和显示结果的最简单方法是什么？

> ID：13982330
> 
> 赞同：1
> 
> 时间：2012-12-20T23:51:57.947
> 
> 标签：javascript, html, forms

我设置了一个基本的 html 表单，其中包含各种输入。我想从表单中获取这些输入并将它们内联显示在新页面上，在更大的股票文本块中的适当位置。

例如，表格会询问您的姓名。假设您输入“John”。然后，我想将该名称显示在新页面上的一个股票文本块中，例如：“嗨，约翰，这是您的文本。”

将有许多表单输入，因此使用弹出提示没有意义。我意识到这是一个非常简单的问题，但我真的坚持这一点。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:06:24.637

这是一个使用 jQuery 的示例，它将输入的文本放置在一段文本中的占位符中。您可以在此处尝试工作示例：

[http://jsfiddle.net/hansvedo/D63K7/](http://jsfiddle.net/hansvedo/D63K7/)

```
<form id="info_form">
    <input id="first_name" type="text" value="John">
    <input id="submit_button" type="submit" value="Submit">
</form>

Placeholder text
<div id="paragraph">Hi <span id="first_name_placeholder"></span>, lorem ipsum.</div>​ 
```

```
$(document).ready(function(){
    $('#submit_button').click(function(event){
        // Stop the form from actually submitting.        
        event.preventDefault();            

        // Capture the entered name and put it into the placeholder.
        var first_name = $('#first_name').val();
        $('#first_name_placeholder').html(first_name);

        // Hide the form
        $('#info_form').hide();        

        // Reveal the paragraph.
        $('#paragraph').show();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:57:23.900

这是一个仅使用 Javascript 的简单示例：

```
<html>
<body>
Name: <input type="text" id="name" />
<input type="button" value="Submit" onclick="submit()" />
<script>
function submit() {
    w = window.open();
    var name = document.getElementById('name').value;
    w.document.write('Hello ' + name + ', this is your text' );
}
</script>
</body>
</html> 
```

# spring - 将spring服务bean注入部署在jboss中的CXF Web服务时出错

> ID：13982338
> 
> 赞同：0
> 
> 时间：2012-12-20T23:53:17.963
> 
> 标签：spring, jboss, cxf

我很难弄清楚为什么我的 spring bean 没有被注入到部署到 jboss 中的 CXF Web 服务中。这是场景：

我有多个实现接口的服务类

这是实施＃1

```
@Service("retrieveService")
@Scope("prototype")
@Transactional(propagation=Propagation.REQUIRED)
public class RetrieveService extends BaseService implements IEuclidService 
{
    @Resource
    private EntrLoanRepository entrLoanRepository;

    @Override
    public RetrieveResponse serve(RequestMessage request) 
    {
                    entrLoanRepository.findByEntrLoanId();
    }
} 
```

这是实施＃2

```
@Service("disableService")
@Scope("prototype")
@Transactional(propagation=Propagation.REQUIRED)
public class DisableService extends BaseService implements IEuclidService 
{
    @Resource
    private EntrLoanRepository entrLoanRepository;

    @Override
    public RetrieveResponse serve(RequestMessage request) 
    {
                EntrLoan entrLoan = new EntrLoan();
                entrLoan.setEndDate( new Date());
                entrLoanRepository.save(entrLoan);
    }
} 
```

我有我的 cxf Web 服务，我希望将一个 spring（服务）bean 注入其中。

```
@javax.jws.WebService
public class Euclid implements IEuclid {

    private IEuclidService euclidService

    public MyResponse myMethod(MyRequest req)
    {
    <!-- How do I inject an instance of RetrieveService here ???-->
    euclidService.serve();
    }
} 
```

我试过这样做：

`euclidService = ctx.getBean("retrieveService", RetrieveService.class);`

但我收到错误消息：

```
 com.sgb.euclid.contracts.RetrieveEnterpriseLnIdRequest@31d908
     ***1 EuclidService is NULL
     *****Instantiating Spring Bean
     org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'retrieveService' must be of type [com.sgb.euclid.ws.service.RetrieveService], but was actually of type [$Proxy98]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1102)
        at com.sgb.euclid.ws.web.Euclid.retrieve(Euclid.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:58)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:58)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
        at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.as.webservices.deployers.WSComponentInstanceAssociationInterceptor.processInvocation(WSComponentInstanceAssociationInterceptor.java:49)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
        at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)
        at org.jboss.as.webservices.invocation.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:111)
        at org.jboss.wsf.stack.cxf.JBossWSInvoker.performInvocation(JBossWSInvoker.java:149)
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)
        at org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.invoke(AbstractJAXWSMethodInvoker.java:178)
        at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:64)
        at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:129)
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:107)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:236)
        at org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:88)
        at org.jboss.wsf.stack.cxf.transport.ServletHelper.callRequestHandler(ServletHelper.java:156)
        at org.jboss.wsf.stack.cxf.CXFServletExt.invoke(CXFServletExt.java:87)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:221)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:141)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
        at org.jboss.wsf.stack.cxf.CXFServletExt.service(CXFServletExt.java:135)
        at org.jboss.wsf.spi.deployment.WSFServlet.service(WSFServlet.java:140)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:149)
        at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
        at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:145)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:652)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:919)
        at java.lang.Thread.run(Thread.java:662) 
```

我不太明白“类型 [$Proxy98]”是什么。我在日志中搜索，但看不到它来自哪里。我认为这与春天有关？不管怎样，我做错了什么，我无法实例化一个spring bean，记住bean不是在beans.xml中定义的，而是注释的。

我觉得我错过了一些东西，但不能完全把我的手指放在它上面。

当我在 jboss 上进行部署时，配置 xml 与我在网上看到的示例有点不同。这是我的 jboss-cxf.xml：

```
 <jaxws:endpoint id="POJOEndpoint" 
        implementor="com.sgb.euclid.ws.web.Euclid"
        wsdlLocation="WEB-INF/wsdl/EnterpriseLoanIdentifier.wsdl" 
        address="http://localhost:8080/euclid-ws">
        <jaxws:properties>
            <entry key="schema-validation-enabled" value="true" />
        </jaxws:properties>
        <jaxws:invoker>
            <bean class="org.jboss.wsf.stack.cxf.InvokerJSE" />
        </jaxws:invoker>
    </jaxws:endpoint> 
```

这是 applicationContext-ws.xml：

```
 <import resource="applicationContext-core.xml" />
    <import resource="applicationContext-jpa.xml" />

    <!-- setting up packages to scan for components -->
    <context:component-scan base-package="com.sgb.euclid.ws.service" />

    <tx:annotation-driven 
    transaction-manager="transactionManager" /> 
```

这里是对应的web.xml

```
<!--  setting up spring configuration to instantiate the spring container  -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext-ws.xml</param-value>
</context-param>

<servlet>
    <servlet-name>euclid</servlet-name>
    <servlet-class>com.sgb.euclid.ws.web.Euclid</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>euclid</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我无法弄清楚我的错误是什么。任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:53:45.753

解决方案似乎如下：

```
euclidService = ctx.getBean("retrieveService", IEuclidService .class); 
```

或者

```
euclidService = (IEuclidService) ctx.getBean("retrieveService"); 
```

看来 getBean 只能转换为接口而不能转换为实现类。... 基于[http://forum.springsource.org/showthread.php?71543-Proxy-Type-Conversion-Error](http://forum.springsource.org/showthread.php?71543-Proxy-Type-Conversion-Error)

另一种解释是： [Abstract DAO 模式和 Spring 的“Proxy cannot be cast to ...”问题！](https://stackoverflow.com/questions/3852564/abstract-dao-pattern-and-springs-proxy-cannot-be-cast-to-problem)

# c++ - 将整数重新解释为浮点数是否安全？

> ID：13982340
> 
> 赞同：25
> 
> 时间：2012-12-20T23:53:28.587
> 
> 标签：c++, casting, floating-point

`static_cast`注：原来我错问了；这就是为什么最重要的答案`static_cast`首先提到的原因。

我有一些带有小端浮点值的二进制文件。我想以独立于机器的方式阅读它们。我的字节交换例程（来自 SDL）对无符号整数类型进行操作。

简单地在整数和浮点数之间进行转换是否安全？

```
float read_float() {
    // Read in 4 bytes.
    Uint32 val;
    fread( &val, 4, 1, fp );
    // Swap the bytes to little-endian if necessary.
    val = SDL_SwapLE32(val);
    // Return as a float
    return reinterpret_cast<float &>( val );  //XXX Is this safe?
} 
```

我希望这个软件尽可能便携。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-20T23:55:55.083

好吧，`static_cast`它是“安全的”并且它具有定义的行为，但这可能不是您所需要的。将整数值转换为浮点类型只会尝试在目标浮点类型中表示相同的整数值。即`5`类型`int`将变成`5.0`类型`float`（假设它可以精确表示）。

您似乎正在做的是在声明为变量`float`的一块内存中构建值的对象表示。`Uint32`要产生结果`float`值，您需要*重新解释*该内存。这将通过`reinterpret_cast`

```
assert(sizeof(float) == sizeof val);
return reinterpret_cast<float &>( val ); 
```

或者，如果您愿意，也可以是同一事物的指针版本

```
assert(sizeof(float) == sizeof val);
return *reinterpret_cast<float *>( &val ); 
```

尽管这种类型的双关语不能保证在遵循严格别名语义的编译器中工作。另一种方法是这样做

```
float f;

assert(sizeof f == sizeof val);
memcpy(&f, &val, sizeof f);

return f; 
```

或者你可以使用著名的 union hack 来实现内存重新解释。这在 C++ 中是正式非法的（未定义行为），这意味着此方法只能用于支持它作为扩展的某些实现

```
assert(sizeof(float) == sizeof(Uint32));

union {
  Uint32 val; 
  float f;
} u = { val };

return u.f; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T00:11:36.943

简而言之，这是不正确的。您正在将整数转换为浮点数，编译器当时会将其解释为整数。上面介绍的联合解决方案有效。

另一种与联合做同样事情的方法是使用这个：

```
return *reinterpret_cast<float*>( &val ); 
```

它与上面的联合解决方案同样安全/不安全，我肯定会推荐一个断言来确保 float 与 int 大小相同。

我还要警告说存在不兼容 IEEE-754 或 IEEE-854 的浮点格式（这两个标准具有相同的浮点数格式，老实说，我不完全确定细节差异是什么）。因此，如果您有一台使用不同浮点格式的计算机，它就会崩溃。我不确定是否有任何方法可以检查这一点，除了可能在某处存储一组罐装字节以及浮点中的预期值，然后转换这些值并查看它是否“正确”出现。

# java - 为什么带 arg 的构造函数取消定义默认构造函数？

> ID：13982345
> 
> 赞同：0
> 
> 时间：2012-12-20T23:53:55.977
> 
> 标签：java, constructor, default-constructor

考虑 -

```
public class Class_A {

    public void func() {...}

    public void func(int a){...} 
```

三个都 -

```
Class_A a = new Class_A(); // legal
a.func(); // legal
a.func(1); // legal 
```

但是在将*带有arg* like`public Class_A (int a){...}`的构造函数添加到`Class_A`之后，*默认构造函数*变为-

```
Class_A a = new Class_A(); // The constructor Class_A() is undefined 
```

那迫使我添加`public Class_A() {/*Do Nothing*/}`到`Class_A`.

既然每个类都有*默认构造函数* ，为什么*默认构造函数*和*带有 arg 的*构造函数不能同时存在并且是相同 `func()`的`func(int a)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:55:57.923

它具有默认构造函数，除非您定义自己的构造函数，在这种情况下您需要重新定义默认构造函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T23:56:10.793

因为如果您编写构造函数，编译器不会为您编写默认构造函数。你必须明确地写一个。

来自[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)：

> 如果一个类不包含构造函数声明，则隐式声明一个没有形式参数且没有 throws 子句的默认构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:56:20.800

这是相反的方式。

如果您没有任何构造函数，则默认情况下会得到无参数的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T23:58:43.913

“默认构造函数”这个名称意味着它是在您自己不提供时提供的。只要您提供了自己的构造函数，编译器就不会为您生成默认构造函数。

注意不要将默认构造函数与无参数构造函数混淆。这是两个完全不同的东西。

# jquery - 单击 ajaxpagination 时 div 框淡入

> ID：13982348
> 
> 赞同：1
> 
> 时间：2012-12-20T23:54:56.163
> 
> 标签：jquery, ruby-on-rails, ruby

当我点击分页链接时，我试图让我的 div 框慢慢淡入淡出

继承人

**js**

```
 <script type="text/javascript">
   $(document).ready(function(e){
     $('.ajaxpagination').on('click', function(e){
       $('#news_box').fadeToggle('slow');
     });
   });
  </script> 
```

**继承人的html**

```
 <h2 class="black"> Recent News <div class="line_section"><div> </h2>
 <%= ajax_links :section_id => "recent_news" do %> 
   <%= will_paginate @news_all %>
 <% end %>
 <div id="news_box" class="row"> 
   <div class="span12">
     <ul class="recent-news"> 
       <%= ajax_loadzone do %>
         <% @news_all.each do |news| %>
           <li style="font-size: 16px; line-height: 19px; letter-spacing: 1px; font-size: 14px; color: #555; text-align: left;">
             <%= link_to image_tag(news.photo.url), news, class: 'pull-left', style: 'margin-right:40px; margin-top: 2px; width: 300px;' %> 
             <div style=" width: 600px; float: right;">
               <%= link_to news.title, news %> <br />
               <%= link_to news.date, news, style: 'font-size: 10px; color: black; position: relative; top: 15px;' %> 
               <i style="position: relative; top: 18px;" class="icon-comment"><%= link_to (news.comments.count), news, :style => 'font-size: 8px; color: white; font-weight: bold; position: absolute; top: 0px; right: 5px;' %></i>
               <br /> <br />
               <%= truncate news.content, length: 500 %>  <br />  
               <%= link_to 'Read More...', news, style: 'font-size: 12px !important;' %>
            </div>
          </li>
        <% end %> 
      <% end %>
      <%= will_paginate @news_all %>
   </div><!-- end span12 -->
 </div><!-- end row --> 
```

这是页面的链接[http://www.batman-fansite.com/batnews](http://www.batman-fansite.com/batnews)

我得到了效果，但它看起来不太好，动画来来去去太快了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:25:46.973

尝试使用以毫秒为单位的值

```
<script type="text/javascript">
 $(document).ready(function(e){
   $('.ajaxpagination').on('click', function(e){
   $('#news_box').fadeToggle(4000);
    });
   });
</script> 
```

# qt-creator - QtCreator 在哪里存储有关套件的数据？

> ID：13982353
> 
> 赞同：12
> 
> 时间：2012-12-20T23:55:23.493
> 
> 标签：qt-creator

对于特定项目，QtCreator 将有关项目使用的每个[工具包](http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html)的构建配置的信息存储在其`*.creator.user`文件中。有些试剂盒是自动检测的；工具包也可以通过转到`Options-->Build & Run-->Kits`并选择来手动定义`Add`。但是，我无法弄清楚 QtCreator 实际存储可用套件信息的位置。删除`*.creator.user`使用特定工具包的所有文件不会从工具包列表中删除该工具包，并且我在计算机上的 Qt 文件夹中的任何位置都找不到我定义的任何自定义工具包的名称（我正在使用Qt5 RC2，所以我正在寻找它的`Qt5/QtCommercial5.0.0-rc2/Tools/QtCreator/share`子目录）。有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T08:50:43.360

SDK 将一组文件存储在`$CREATOR_INSTALL_DIR/share/QtProject/qtcreator`. 使用此创建者实例的每个人都使用这些。

特定于用户的文件位于您的主目录中`~/.config/QtProject/qtcreator`（或`%APPDATA%/QtProject/qtcreator`在 Windows 上，不了解 Mac）。

这些工具包在一个名为的文件中`profiles.xml`（我首先将整个东西称为配置文件，但由于它与`.pro`-files`qmake`使用冲突，因此它被重命名）。工具链在`toolchains.xml`，Qt 版本在`qtversions.xml`.

-files 仅包含与其相关的项目的`.user`数据。基本上，在“项目”模式下设置的所有内容最终都在`.user`文件中。

# model - CakePHP 中的扭曲关系

> ID：13982356
> 
> 赞同：0
> 
> 时间：2012-12-20T23:55:49.327
> 
> 标签：model, cakephp-2.0

我在开发这个 CakePHP 模型/控制器时遇到了困难。

我有一个产品模型。该模型有许多定价、图像、视频、内容选项卡等。

该模型还需要与其他产品有许多关系。- 例如。配件、套件、子产品（父级的变体型号）

所以我创建了一个 products_products 表，其中有一个 product_id 和一个 related_id - 相关配件/套件或子产品的 id - 加上关系类型。

表看起来像：id,product_id,related_id,type,sort...

我的挑战是——当我加载一个主要产品时，我想获取它相关产品的所有相关模型数据——因此，将相关模型视为它自己的产品（它是）并加载所有相关模型数据

我可以使用 HABTM 关系轻松地从相关表中加载数据.. 但是仅仅知道产品是相关的并不能给我它的产品模型数据——定价、视频、图像、促销等。

那么开发和加载这个模型的最佳方式是什么？我可以使用标准关联模型关系来做到这一点，还是我需要使用主产品模型来获取我的相关项目，使用子查询使用相关 products_products 表中的产品 ID 列表（这看起来很不像蛋糕）

? 我会很感激有经验的蛋糕师的任何意见。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:37:34.907

[通过使用自我关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#multiple-relations-to-the-same-model)，您可以省去很多麻烦。

本质上，您需要在 Product 模型中创建一个 parent_id 字段，并且带有配件等的产品将在 parent_id 字段中具有主要产品的 id。这将简化将产品从数据库中取出的过程，因为您只需调用 find('threaded')。

从那里，很容易为保存有关产品的视频/图像数据的表设置 hasMany 关系。

# c# - 包装 List.Add() 给出 - 对象引用未设置为对象的实例

> ID：13982358
> 
> 赞同：6
> 
> 时间：2012-12-20T23:55:51.167
> 
> 标签：c#, runtime-error, nullreferenceexception

我想`List`用我的自定义类包装类。至于现在我有这样的东西；

```
public class PriorityListOfNodes
{

    private List<Node>          list_;
    private IComparer<Node>     sorter_;

    public List<Node> List_ {
            get {return list_;}
            set {list_ = value;}
    }

    public PriorityListOfNodes ()
    {
            sorter_ = new NodeSorter_fValueDescending ();
    }

    public Node PopFromEnd ()
    {
            Node temp = new Node (list_ [list_.Count - 1]);
            list_.RemoveAt (list_.Count - 1);
            return temp;
    }

    public Node PeekFromEnd ()
    {
            return list_ [list_.Count - 1];
    }

    public void Add (ref Node toAdd)
    {
            Debug.Log (toAdd);
            list_.Add (toAdd);
            list_.Sort (sorter_);
    }
} 
```

当我现在做

```
Node temp = new Node(10,20); //custom constructor
PriorityListOfNodes l = new PriorityListOfNodes();
l.add(temp); 
```

我得到运行时异常：

> 你调用的对象是空的

我也试过没有`ref`但结果相同。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T00:00:10.340

你从来没有真正实例化一个`List<Node>`.

```
 public PriorityListOfNodes ()
    {
            sorter_ = new NodeSorter_fValueDescending ();
            list_ = new List<Node>();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:02:07.100

默认情况下，类具有空的无参数构造函数，因此您实际上拥有：

```
public class PriorityListOfNodes
{
    private List<Node> list_;
    // ...

    public PriorityListOfNodes()
    {
    }

    // ...
} 
```

当您稍后调用时`Add`，您的列表已声明，但未初始化。您需要在某个时候执行此操作，可能在构造函数中：

```
public class PriorityListOfNodes
{
    private List<Node> list_;
    // ...

    public PriorityListOfNodes()
    {
         this.list_ = new List<Node>();
         // ...
    }

    // ...
} 
```

请参阅[使用构造函数 (C#)](http://msdn.microsoft.com/en-gb/library/ms173115%28v=vs.80%29.aspx)。

# java - Java Gson 反序列化

> ID：13982363
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:56:13.633
> 
> 标签：java, gson

我无法反序列化这个：

```
{
   "backup_times":{
      "12":{
         "time":"2012-12-20 11:52:01",
         "status":"T"
      },
      "2":{
         "time":"2012-12-20 11:22:57",
         "status":"T"
      },
      "3":{
         "time":"2012-12-20 11:23:35",
         "status":"T"
      },
      "13":{
         "time":"2012-12-20 11:52:57",
         "status":"T"
      },
      "9":{
         "time":"2012-12-20 11:46:09",
         "status":"T"
      },
      "4":{
         "time":"2012-12-20 11:28:53",
         "status":"T"
      },
      "5":{
         "time":"2012-12-20 11:30:53",
         "status":"T"
      },
      "10":{
         "time":"2012-12-20 11:48:30",
         "status":"T"
      },
      "11":{
         "time":"2012-12-20 11:49:57",
         "status":"T"
      }
   }
} 
```

这种结构是否可以将其转换为自定义类？

这是我目前拥有的当前 java 类，它基本上包含字符串的 hashmap 作为键和 Job 子类作为值：

```
 public class RestoreDatesJsonReader {
    private HashMap<String, Job> backupTimes;

    public static class Job {
        private String time;
        private String status;
        public String getTime() {
            return time;
        }
        public void setTime(String time) {
            this.time = time;
        }
        public String getStatus() {
            return status;
        }
        public void setStatus(String status) {
            this.status = status;
        }
    }

    public HashMap<String,Job> getBackupTimes() {
        return backupTimes;
    }

    public void setBackupTimes(HashMap<String, Job> backup_times) {
        this.backupTimes = backup_times;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:22:26.727

GSON（默认情况下）依赖于您的 POJO，其变量名称与您的 JSON 对象匹配。

`backupTimes`将您的对象更改为`backup_times`，这将正常工作。

您的另一个选择是`@SerializedName`为您的字段使用注释：

```
@SerializedName("backup_times") private HashMap<String, Job> backupTimes; 
```

这告诉 Gson`backup_times`在您的 JSON 中映射到`backupTimes`您的 POJO。

（一旦我有时间回去这样做，就把它从评论移到正确的答案）

Javadoc在这里：http: [//google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/annotations/SerializedName.html](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/annotations/SerializedName.html)

# django - Jquery：如何通过ajax确认表单提交

> ID：13982371
> 
> 赞同：0
> 
> 时间：2012-12-20T23:57:34.613
> 
> 标签：django, jquery

我有一个在 Django 和 Jquery 上运行的应用程序。我正在通过 ajax 提交 Bootstrap Modal 表单。如果发现返回表单的任何错误，我会进行服务器端表单验证。否则，我会返回一个包含我想要显示的表单内容的 html 表格。但是前端怎么知道服务器返回的html内容是表单还是结果表呢？

```
$('#id_form').live("submit", function(e){
    e.preventDefault();
    form = $(this);
    frequest_id= form.attr('data-frequest-id');
    submitForm('#myModal', form, frequest_id);
});

function submitForm(target, form, frequest_id){
    $.ajax({
        url:form.attr('action'),
        type:'post',
        data:form.serialize(),
        dataType:"html",
        error:function(data, status, xhr){
            Error();
            LoadingDone();
        },
        beforeSend:function(){
            Loading();
        },
        success:function(data, status, xhr){
            $(target).modal(data);
                    //if form has submitted call method to add result to the div
        },
        complete:function(){
            LoadingDone();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:03:24.167

您可以使用 jQuery 的[.is() 方法](http://api.jquery.com/is/)。

```
success:function(data, status, xhr){
    $(target).modal(data);
    if ($(data).is('form')) {
        //if form has submitted call method to add result to the div
    }
} 
```

# c# - 未使用 ADO.NET 数据模型更新的数据源

> ID：13982372
> 
> 赞同：0
> 
> 时间：2012-12-20T23:57:46.510
> 
> 标签：c#, silverlight, ado.net, wcf-ria-services, ado.net-entity-data-model

所以我正在用 C#/Silverlight 创建一个仪表板。仪表板连接到具有数据模型和域服务的远程数据库。在我的数据库中，我创建了一个新视图，并将其添加到数据模型中。由于某种原因，将其添加到数据模型后，它并没有出现在 Visual Studio 2010 的数据源中。这是为什么呢？我尝试刷新数据源，但没有奏效。有任何想法吗？

我觉得这应该很容易解决，但我想我今天已经盯着它太久了，哈哈。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:41:03.050

好吧，看来我已经解决了这个问题。我只需要删除 .edmx 文件和域服务并重新创建它。然后它正确地将所有内容添加到数据源中。

# android - ImageView 将大图像缩小为小的模糊图像

> ID：13982376
> 
> 赞同：2
> 
> 时间：2012-12-20T23:57:56.580
> 
> 标签：android, android-layout

我正在使用 Ignition 类 RemoteImageView 来异步下载和显示图像。RemoteImageView 是 ImageView 的子类。

我正在下载 600x600 的图像并以各种尺寸显示它们...... 260x260、100x100 等。我注意到图像看起来模糊、不那么清晰，其中有伪影。

我对图像渲染不太了解，但我注意到当我在谷歌浏览器中查看相同的图像并尝试在浏览器中缩小时，它会暂时呈现出模糊的外观，然后线条会变直，图像再次变得不那么模糊和清晰 - 所以我猜有某种渲染效果用来显示我没有用我的 ImageView 做的图像。

图像来自服务器；我无法更改这些原始图像或向我发送不同尺寸的图像。

我还能做什么——希望不会增加很多低效率的事情，因为有时我需要在 ListView 中一次在屏幕上显示几十个这样的小图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:02:06.177

尝试使用`android:scaleType="centerCrop"`

您必须在 ImageView 的宽度和高度上设置硬编码的 dp 尺寸才能以这种方式获得所需的效果，但我基本上使用的是这个解决方案。嗯，不是真的。但是，如果您想指定生成的缩放（和裁剪）图像的尺寸，您可以这样做。

[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# mysql - 选择到 @var 始终为空

> ID：13982377
> 
> 赞同：1
> 
> 时间：2012-12-20T23:58:00.420
> 
> 标签：mysql, stored-functions

好的，这是我的mysql函数

```
DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `password_reset_request`(spUsername VARCHAR(120)) RETURNS varchar(255) CHARSET utf8
BEGIN
    DECLARE vcode VARCHAR(255);
    DECLARE muid INTEGER;
    SET vcode = "test";

    select id into muid from scheme.users where username=@spUsername limit 1;

    RETURN muid;

    IF muid is null THEN
        RETURN 'BADUSER';
    ELSE
        insert into `password_reset`(`uid`,`code`) 
            values ( muid,vcode)
        ON DUPLICATE KEY UPDATE
            `code`=vcode;
        RETURN vcode;
    END IF;
END 
```

我的问题`muid`是总是这样`null`。我什至用 替换了所有内容`muid`，`@muid`这并没有改变结果。

当我运行`select id from scheme.users where username=@spUsername limit 1;`并替换`@spUsername`为传递给函数的相同值时，它会为我提供正确的信息。

我还进行`RETURN @spUsername`了验证该变量是否设置正确，并且确实如此。

有任何想法吗？大概是在做傻事。

表方案

```
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(120) NOT NULL,
  `email` varchar(200) NOT NULL,
  `password` varchar(200) NOT NULL,
  `vcode` varchar(120) NOT NULL,
  `isverified` bit(1) DEFAULT b'0',
  `verifydate` datetime DEFAULT NULL,
  `date_created` datetime DEFAULT NULL,
  `date_modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username_UNIQUE` (`username`)
)

CREATE TABLE `password_reset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL,
  `code` varchar(255) NOT NULL,
  `iscompleted` bit(1) DEFAULT b'0',
  `date_created` datetime DEFAULT NULL,
  `date_modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uid_UNIQUE` (`uid`)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:11:29.780

试试这个：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `password_reset_request`(_spUsername VARCHAR(120)) RETURNS VARCHAR(255) CHARSET utf8
    READS SQL DATA
BEGIN
    DECLARE _vcode VARCHAR(255);
    DECLARE _muid INT(10) DEFAULT 0;
    SET vcode = "test";

    SELECT id INTO _muid 
    FROM scheme.users 
    WHERE username = _spUsername 
    LIMIT 1;

    IF _muid = 0 THEN
        RETURN 'BADUSER';
    ELSE
        INSERT INTO `password_reset`(`uid`,`code`) 
            VALUES ( _muid, _vcode)
        ON DUPLICATE KEY UPDATE
            `code` = _vcode;
        RETURN _vcode;
    END IF;
END$$

DELIMITER ; 
```

# xml - 有没有办法导出渲染图像/svg+xml？

> ID：13982378
> 
> 赞同：0
> 
> 时间：2012-12-20T23:58:09.407
> 
> 标签：xml, svg

我正在开发一个为站点图形生成图像/svg+xml 的模板引擎。

有没有办法将其导出/保存为文件？

由于透明度，PNG 会更可取。

更好的方法是捕获 HTML 和 CSS 以供离线查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:02:16.540

[Apache Batik](http://xmlgraphics.apache.org/batik/)具有光栅化 SVG 并将结果导出为 PNG（以及其他格式）的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:33:16.787

如果你想使用 webkit 的渲染器而不是 apache 的渲染器，这是我制作的 phantomjs hack，它需要一个 svg 并将其保存为 png：[https ://gist.github.com/2946954](https://gist.github.com/2946954)

# java - 打印java代码没有任何反应

> ID：13982388
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:59:10.483
> 
> 标签：java, printing

大家好，我有下面的代码，它符合得很好，没有错误，但它没有做任何事情，它的意思是打印出一个页面说

你好，世界有美好的一天

但什么也没发生，我做错了什么？

代码 ：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Richard
 */
import java.io.*;
import javax.print.*;
import javax.print.attribute.*;
import javax.print.attribute.standard.*;
import javax.print.event.*;

public class printtest {
    public static void main(String[] args) {
        try {
            // Open the image file

            String testData = "hello world \r\n have a nice day.";
            InputStream is = new ByteArrayInputStream(testData.getBytes());
            DocFlavor flavor =  DocFlavor.INPUT_STREAM.AUTOSENSE   ;

            //DocFlavor flavor = DocFlavor.STRING.TEXT_PLAIN;     
            //DocFlavor flavor = DocFlavor.CHAR_ARRAY.TEXT_PLAIN;

            // Find the default service

            PrintService service = PrintServiceLookup.lookupDefaultPrintService();
            System.out.println(service);

            // Create the print job
            DocPrintJob job = service.createPrintJob();
            Doc doc= new SimpleDoc(is, flavor, null);

            PrintJobWatcher pjDone = new PrintJobWatcher(job);

            // Print it
            job.print(doc, null);

            pjDone.waitForDone();

            // It is now safe to close the input stream
            is.close();

        } catch (PrintException e) {
            System.out.println("print exception");
            System.out.println(e.getMessage());
        } catch (IOException e) {
            System.out.println("IO exception");
            e.printStackTrace();
        }

    }

    static class PrintJobWatcher {
        // true iff it is safe to close the print job's input stream
        boolean done = false;

        PrintJobWatcher(DocPrintJob job) {
            // Add a listener to the print job
            job.addPrintJobListener(new PrintJobAdapter() {
                public void printJobCanceled(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobCompleted(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobFailed(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobNoMoreEvents(PrintJobEvent pje) {
                    allDone();
                }
                void allDone() {
                    synchronized (PrintJobWatcher.this) {
                        done = true;
                        PrintJobWatcher.this.notify();
                    }
                }
            });
        }
        public synchronized void waitForDone() {
            try {
                while (!done) {
                    wait();
                }
            } catch (InterruptedException e) {
            }
        }
    }

} 
```

我刚刚完成了 void main(String[] args) printtest.main ({})

它会出现一个窗口显示：

Win32 打印机：HP988FD1 (HP Officejet Pro 8600)

然后什么也不做，作业出现在队列中一瞬间，但没有任何反应，重新安装了打印机的驱动程序等仍然没有运气，工作正常，下面的代码我已经运行并成功打印了页面来自：

```
import java.awt.*;
import java.awt.font.*;
import java.awt.geom.*;
import java.awt.print.*;
import java.text.*;
/**
* The PrintText application expands on the
* PrintExample application in that it images
* text on to the single page printed.
*/
public class PrintText implements Printable {
/**
* The text to be printed.
*/
private static final String mText = 
"Four score and seven years ago our fathers brought forth on this "
+ "continent a new nation, conceived in liberty and dedicated to the "
+ "proposition that all men are created equal. Now we are engaged in "
+ "a great civil war, testing whether that nation or any nation so "
+ "conceived and so dedicated can long endure. We are met on a great "
+ "battlefield of that war. We have come to dedicate a portion of "
+ "that field as a final resting-place for those who here gave their "
+ "lives that that nation might live. It is altogether fitting and "
+ "proper that we should do this. But in a larger sense, we cannot "
+ "dedicate, we cannot consecrate, we cannot hallow this ground." 
+ "The brave men, living and dead who struggled here have consecrated "
+ "it far above our poor power to add or detract. The world will "
+ "little note nor long remember what we say here, but it can never "
+ "forget what they did here. It is for us the living rather to be "
+ "dedicated here to the unfinished work which they who fought here "
+ "have thus far so nobly advanced. It is rather for us to be here "
+ "dedicated to the great task remaining before us--that from these "
+ "honored dead we take increased devotion to that cause for which "
+ "they gave the last full measure of devotion--that we here highly "
+ "resolve that these dead shall not have died in vain, that this "
+ "nation under God shall have a new birth of freedom, and that "
+ "government of the people, by the people, for the people shall "
+ "not perish from the earth.";
/**
* Our text in a form for which we can obtain a
* AttributedCharacterIterator.
*/
private static final AttributedString mStyledText = new AttributedString(mText);
/**
* Print a single page containing some sample text.
*/
static public void main(String args[]) {
/* Get the representation of the current printer and 
* the current print job.
*/
PrinterJob printerJob = PrinterJob.getPrinterJob();
/* Build a book containing pairs of page painters (Printables)
* and PageFormats. This example has a single page containing
* text.
*/
Book book = new Book();
book.append(new PrintText(), new PageFormat());
/* Set the object to be printed (the Book) into the PrinterJob.
* Doing this before bringing up the print dialog allows the
* print dialog to correctly display the page range to be printed
* and to dissallow any print settings not appropriate for the
* pages to be printed.
*/
printerJob.setPageable(book);
/* Show the print dialog to the user. This is an optional step
* and need not be done if the application wants to perform
* 'quiet' printing. If the user cancels the print dialog then false
* is returned. If true is returned we go ahead and print.
*/
boolean doPrint = printerJob.printDialog();
if (doPrint) {
try {
printerJob.print();
} catch (PrinterException exception) {
System.err.println("Printing error: " + exception);
}
}
}
/**
* Print a page of text.
*/
public int print(Graphics g, PageFormat format, int pageIndex) {
/* We'll assume that Jav2D is available.
*/
Graphics2D g2d = (Graphics2D) g;
/* Move the origin from the corner of the Paper to the corner
* of the imageable area.
*/
g2d.translate(format.getImageableX(), format.getImageableY());
/* Set the text color.
*/
g2d.setPaint(Color.black);
/* Use a LineBreakMeasurer instance to break our text into
* lines that fit the imageable area of the page.
*/
Point2D.Float pen = new Point2D.Float();
AttributedCharacterIterator charIterator = mStyledText.getIterator();
LineBreakMeasurer measurer = new LineBreakMeasurer(charIterator, g2d.getFontRenderContext());
float wrappingWidth = (float) format.getImageableWidth();
while (measurer.getPosition() < charIterator.getEndIndex()) {
TextLayout layout = measurer.nextLayout(wrappingWidth);
pen.y += layout.getAscent();
float dx = layout.isLeftToRight()? 0 : (wrappingWidth - layout.getAdvance());
layout.draw(g2d, pen.x + dx, pen.y);
pen.y += layout.getDescent() + layout.getLeading();
}
return Printable.PAGE_EXISTS;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:23:52.267

在完成打印作业之前，API 可能`PrintService`正在等待`InputStream`关闭。

删除`pjDone.waitForDone()`并看看会发生什么（这对我来说很好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T12:16:13.770

我遇到了类似的问题，但要打印 PDF，而不是基本文本。它在 Linux (Fedora) 上运行良好，但在 Windows 上却不行。因此，如果它可以帮助任何人，这是我的解决方案：

我注意到打印机可能无法处理 PDF。我最终决定使用第三方库[Apache PdfBox](https://pdfbox.apache.org/)，它运行良好。

如果有帮助，我在回答类似问题[https://stackoverflow.com/a/39271053/935039时写了一些示例代码。](https://stackoverflow.com/a/39271053/935039)

# jquery - 使用 jquery 下拉选择自动更新需要帮助

> ID：13982394
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:59:53.330
> 
> 标签：jquery

我正在尝试创建一种 pc builder 但是在使用下拉列表时，它不会更新价格；

```
$(document).ready(function() 
{     
var total = 0; //Base price

function calcTotal() 
{ 
$("select").each(function() 
{ 
    //This happens for each checked input field 
    var cost = $(this).val(); //I beleive the problems are here and...
    total += parseInt(cost); //total = total + cost             
   }); 
}       

//This happens when the page loads 
calcTotal();     
$("form").before('<p class="total">Base Price of Your Custom PC: <strong>£' + total + '</strong></p>'); 
$(":submit").before('<p class="total">Base Price of Your Custom PC: <strong>£' + total + '</strong></p>'); 

$("input:checkbox, input:radio").click(function() //... and problem here?
{ 
    total = 0;  //Base price
    calcTotal(); 
    $("p.total").html("Total Cost of Your Custom PC: <strong>£" + total + "</strong>"); 
}); 

}); 
```

还有我的html；

```
<head>
<title>Test - PC Builder</title>

<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">google.load("jquery", "1")</script>
<script src="t.js" type="text/javascript"></script>
</head>

<body>

    <form action="###" method="post">

Choose an Operating System
<input type="hidden" value="1" name="qty1">
<select name="productpr1">
<option value="Case A:10">---</option>
<option cost="25" value="Win 7:25">Win 7 (add £25)</option>
<option cost="50" value="Win 8:50">Win 8 (add £50)</option>
</select>
<br>
Choose a Case
<input type="hidden" value="1" name="qty2">
<select name="productpr2">
<option value="Case A:10">---</option>
<option cost="10" value="Case A:10">Case A (add £10)</option>
<option cost="15" value="Case B:15">Case B (add £15)</option>
</select>

        <!-- Send Button -->
        <input name="return" type="hidden" value="#">
        <input type="submit" value="Buy Now!">

    </form>

</body>
</html> 
```

我将`cost=""`其用作计算计算的值，但是当我加载 html 页面时，我得到`£NaN`了价格的值？我不能使用 value 属性，因为它用于另一个功能。

任何人都可以帮忙吗？

见[http://jsfiddle.net/T3T7v/5](http://jsfiddle.net/T3T7v/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:21:59.560

如果你想要`cost`属性的值，你应该使用`$(this).attr('cost')`而不是`$(this).val()`- 请参阅 jQuery 的[attr()](http://api.jquery.com/attr/#attr1)。

也就是说，成本显然不是一个有效的 html 属性。你应该避免使用它。如果您需要使用自定义属性，您应该使用`data-cost`-see [data-* attributes](http://html5doctor.com/html5-custom-data-attributes/)。

将来可能值得使用[Firebug](http://getfirebug.com/)或[Webkit Inspector](http://trac.webkit.org/wiki/WebInspector)之类的工具通过您的 JS 进行调试，并自由使用[console.log()](https://developer.mozilla.org/en-US/docs/DOM/console.log)语句来缩小您的问题范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:34:20.113

好的，单独的答案，因为这里发生了很多事情：

首先，您尝试使用以下方法从所有选择中获取选定的选项：

```
 $('select').each(function() {/*...*/}); 
```

不会工作。你应该使用[:selected](http://api.jquery.com/selected-selector/)

```
 $(':selected').each(function() {/*...*/}); 
```

在其中，您还需要处理所选选项没有值（这是默认值）的情况。我会去：

```
 var id = $(this).attr('id');
 if(typeof id !== 'undefined')
 {
     total += parseInt(id, 10); // Note: always supply a base when using parseInt
 } 
```

尽管可能有一种更简洁的方法。另请注意，您有`parseInt('id')`，这是错误的。您想解析`id`变量的值，而不是字符串`'id'`。

最后，一行：

```
$('').change(function() //Error must be here? 
```

显然需要：

```
$('select').change(function() 
```

总的来说，我可能也会稍微改变结构，但这是另一天的故事。在这里工作 jsFiddle：http: [//jsfiddle.net/T3T7v/12/](http://jsfiddle.net/T3T7v/12/)

# gradle - 如何使用 Gradle 从 distZip 中排除文件？

> ID：13982395
> 
> 赞同：15
> 
> 时间：2012-12-20T23:59:57.243
> 
> 标签：gradle, jar

我正在使用 Gradle 1.3 并让它为一个小项目工作。它完全按照我的意愿创建 .JAR 文件。但是，当我让它使用 distZip 创建一个 ZIP 文件时，所有 JAR 文件都被包含在内。

我的 build.gradle 文件的内容：

```
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'application'

group = 'com.some.project'
version = '1.0.2.0'
description = 'Update Server'
mainClassName = 'com.some.project.updateserver.client.Client'

defaultTasks 'compileJava', 'jar'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

allprojects {
    tasks.withType(Compile) {
        options.debug = true
        options.compilerArgs = ['-Xlint:all']
    }
}

dependencies {
    compile "$commonsCodecGroup:commons-codec:$commonsCodecVersion"
    compile "$commonsConfigurationGroup:commons-configuration:$commonsConfigurationVersion"
    compile "$commonsLangGroup:commons-lang:$commonsLangVersion"
    compile "$commonsLoggingGroup:commons-logging:$commonsLoggingVersion"
    compile "$cxfGroup:cxf-bundle-minimal:$cxfVersion"
    compile "$cxfGroup:cxf-rt-databinding-jaxb:$cxfVersion"
    compile "$cxfGroup:cxf-rt-frontend-jaxrs:$cxfVersion"
    compile "$cxfGroup:cxf-rt-transports-common:$cxfVersion"
    compile "$cxfGroup:cxf-rt-transports-http:$cxfVersion"
    compile "$jacksonGroup:jackson-jaxrs:$jacksonVersion"
    compile "$jmockitGroup:jmockit:$jmockitVersion"
    compile "$logBackGroup:logback-classic:$logBackVersion"
    compile "$logBackGroup:logback-core:$logBackVersion"
    compile "$servletGroup:servlet-api:$servletVersion"
    compile "$slf4jGroup:slf4j-api:$slf4jVersion"
    compile "$springGroup:spring-aop:$springVersion"
    compile "$springGroup:spring-asm:$springVersion"
    compile "$springGroup:spring-beans:$springVersion"
    compile "$springGroup:spring-context:$springVersion"
    compile "$springGroup:spring-core:$springVersion"
    compile "$springGroup:spring-expression:$springVersion"
    compile "$springGroup:spring-tx:$springVersion"
    compile "$springGroup:spring-web:$springVersion"
    compile "$wsRestfulGroup:jsr311-api:$wsRestfulVersion"

    testCompile "$junitGroup:junit:$junitVersion"
}

repositories {
    mavenCentral()
}

task clientJar(type: Jar, description: 'Assembles a jar archive for running a simple client against the Update Server.') {
    appendix = 'client'
    from sourceSets.main.output
    exclude('applicationContext.xml')
    exclude('com/some/project/json')
    exclude('com/some/project/updateserver/jaxrs')
    exclude('com/some/project/updateserver/oauth')
    exclude('com/some/project/updateserver/resource')
    exclude('com/some/project/updateserver/util/ManifestHash*')
}

task modelJar(type: Jar, description: 'Assembles a jar archive for reference by other projects that need to access the API model of Update Server.') {
    appendix = 'model'
    from sourceSets.main.output.classesDir
    exclude('applicationContext.xml')
    exclude('update-server-client.properties')
    exclude('com/some/project/json')
    exclude('com/some/project/updateserver/client')
    exclude('com/some/project/updateserver/jaxrs')
    exclude('com/some/project/updateserver/oauth')
    exclude('com/some/project/updateserver/resource')
}

jar {
    description = 'Assembles the relevant archive files for Update Server'
    dependsOn clientJar, modelJar
    exclude('update-server-client.properties')
    exclude('com/some/project/updateserver/client')
}

test {
    testLogging.exceptionFormat 'full'
    testLogging {
        events 'passed'
        minGranularity = 3
        stackTraceFilters 'groovy', 'entry_point', 'truncate'
        showStandardStreams = true
        debug {
            events 'started'
        }
    }
}

run {
    description = 'Runs the Update Server Client application'
    jvmArgs '-client'
    // optional args can be specified
    // args 'name1', 'value1'
}

distZip {
    archiveName "$project.name-client.zip"
    exclude('**/aopalliance-*.jar')
    exclude('**/asm-3.3.jar')
    exclude('**/bcprov-jdk*.jar')
    exclude('**/commons-codec-*.jar')
    exclude('**/commons-httpclient-*.jar')
    exclude('**/cxf-api-*.jar')
    exclude('**/cxf-common-utilities-*.jar')
    exclude('**/cxf-rt-bindings-*.jar')
    exclude('**/cxf-rt-core*.jar')
    exclude('**/geronimo-*.jar')
    exclude('**/isorelax-*.jar')
    exclude('**/jaxb-*.jar')
    exclude('**/jcip-annotations-*.jar')
    exclude('**/jcl-over-slf4j-*.jar')
    exclude('**/jettison-*.jar')
    exclude('**/jetty-*.jar')
    exclude('**/jmockit-*.jar')
    exclude('**/joda-time-*.jar')
    exclude('**/jul-to-slf4j-*.jar')
    exclude('**/log4j-over-slf4j-*.jar')
    exclude('**/logback-*.jar')
    exclude('**/mimepull-*.jar')
    exclude('**/msv-core-*.jar')
    exclude('**/not-yet-commons-*.jar')
    exclude('**/opensaml-*.jar')
    exclude('**/openws-*.jar')
    exclude('**/relaxngDatatype-*.jar')
    exclude('**/saaj-*.jar')
    exclude('**/serializer-*.jar')
    exclude('**/servlet-api-*.jar')
    exclude('**/slf4j-api*.jar')
    exclude('**/spring-*.jar')
    exclude('**/stax-*.jar')
    exclude('**/woodstox-*.jar')
    exclude('**/wssj4j-*.jar')
    exclude('**/xalan-*.jar')
    exclude('**/xmlbeans-*.jar')
    exclude('**/xml-resolver-*.jar')
    exclude('**/xmlschema-*.jar')
    exclude('**/xmlsec-*.jar')
    exclude('**/xmltooling-*.jar')
    exclude('**/xsdlib-*.jar')
} 
```

创建的主要 JAR 文件：

```
update-server-1.0.2.0.jar
-------------------------
applicationContext.xml
com/pearson/pss/json/JsonUtil.class
com/pearson/pss/updateserver/jaxrs/
com/pearson/pss/updateserver/jaxrs/JacksonObjectMapperFactory.class
com/pearson/pss/updateserver/model/PowerSchoolServerData$UPDATE_CATEGORY.class
com/pearson/pss/updateserver/model/PowerSchoolServerData.class
com/pearson/pss/updateserver/model/SimplePackageDescription.class
com/pearson/pss/updateserver/model/UpdateData.class
com/pearson/pss/updateserver/oauth/OAuthIdentity.class
com/pearson/pss/updateserver/oauth/OAuthTarget.class
com/pearson/pss/updateserver/oauth/OAuthTargetRegistry.class
com/pearson/pss/updateserver/oauth/OAuthTargetUpdateServerDownload.class
com/pearson/pss/updateserver/oauth/OAuthTicketData.class
com/pearson/pss/updateserver/oauth/PowerSourceDLOAuthBackChannel$PostValue.class
com/pearson/pss/updateserver/oauth/PowerSourceDLOAuthBackChannel.class
com/pearson/pss/updateserver/resource/Config$1.class
com/pearson/pss/updateserver/resource/Config.class
com/pearson/pss/updateserver/resource/CurrentDistrict$1.class
com/pearson/pss/updateserver/resource/CurrentDistrict.class
com/pearson/pss/updateserver/resource/DistrictDownloadRestriction.class
com/pearson/pss/updateserver/resource/OAuthDownloadFilter.class
com/pearson/pss/updateserver/resource/UpdateResource$1.class
com/pearson/pss/updateserver/resource/UpdateResource.class
com/pearson/pss/updateserver/util/ManifestHash.class
com/pearson/pss/updateserver/util/PackageUtil$1.class
com/pearson/pss/updateserver/util/PackageUtil$Architecture.class
com/pearson/pss/updateserver/util/PackageUtil$OS.class
com/pearson/pss/updateserver/util/PackageUtil.class
com/pearson/pss/updateserver/util/UpdateServerConstants.class
META-INF/cxf/org.apache.cxf.Logger
META-INF/MANIFEST.MF 
```

为运行简单客户端而创建的 JAR 文件：

```
update-server-client-1.0.2.0.jar
--------------------------------
com/pearson/pss/updateserver/client/Client.class
com/pearson/pss/updateserver/model/PowerSchoolServerData$UPDATE_CATEGORY.class
com/pearson/pss/updateserver/model/PowerSchoolServerData.class
com/pearson/pss/updateserver/model/SimplePackageDescription.class
com/pearson/pss/updateserver/model/UpdateData.class
com/pearson/pss/updateserver/util/PackageUtil$1.class
com/pearson/pss/updateserver/util/PackageUtil$Architecture.class
com/pearson/pss/updateserver/util/PackageUtil$OS.class
com/pearson/pss/updateserver/util/PackageUtil.class
com/pearson/pss/updateserver/util/UpdateServerConstants.class
META-INF/cxf/org.apache.cxf.Logger
META-INF/MANIFEST.MF
update-server-client.properties 
```

为发布 API 而创建的 JAR 文件：

```
update-server-model-1.0.2.0.jar
--------------------------------
com/pearson/pss/updateserver/model/PowerSchoolServerData$UPDATE_CATEGORY.class
com/pearson/pss/updateserver/model/PowerSchoolServerData.class
com/pearson/pss/updateserver/model/SimplePackageDescription.class
com/pearson/pss/updateserver/model/UpdateData.class
com/pearson/pss/updateserver/util/ManifestHash.class
com/pearson/pss/updateserver/util/PackageUtil$1.class
com/pearson/pss/updateserver/util/PackageUtil$Architecture.class
com/pearson/pss/updateserver/util/PackageUtil$OS.class
com/pearson/pss/updateserver/util/PackageUtil.class
com/pearson/pss/updateserver/util/UpdateServerConstants.class
META-INF/MANIFEST.MF 
```

运行“distZip”时创建的实际 ZIP 文件：

```
update-server-1.0.2.0.zip (actual contents)
-------------------------------------------
update-server-1.0.2.0/bin/update-server
update-server-1.0.2.0/bin/update-server.bat
update-server-1.0.2.0/lib/aopalliance-1.0.jar
update-server-1.0.2.0/lib/asm-3.3.jar
update-server-1.0.2.0/lib/bcprov-jdk15-1.45.jar
update-server-1.0.2.0/lib/commons-codec-1.4.jar
update-server-1.0.2.0/lib/commons-configuration-1.8.jar
update-server-1.0.2.0/lib/commons-httpclient-3.1.jar
update-server-1.0.2.0/lib/commons-lang-2.6.jar
update-server-1.0.2.0/lib/commons-logging-1.1.1.jar
update-server-1.0.2.0/lib/cxf-api-2.5.2.jar
update-server-1.0.2.0/lib/cxf-bundle-minimal-2.5.2.jar
update-server-1.0.2.0/lib/cxf-common-utilities-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-bindings-xml-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-core-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-databinding-jaxb-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-frontend-jaxrs-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-transports-common-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-transports-http-2.5.2.jar
update-server-1.0.2.0/lib/geronimo-activation_1.1_spec-1.1.jar
update-server-1.0.2.0/lib/geronimo-annotation_1.0_spec-1.1.1.jar
update-server-1.0.2.0/lib/geronimo-javamail_1.4_spec-1.7.1.jar
update-server-1.0.2.0/lib/geronimo-jaxws_2.2_spec-1.1.jar
update-server-1.0.2.0/lib/geronimo-jms_1.1_spec-1.1.1.jar
update-server-1.0.2.0/lib/geronimo-servlet_2.5_spec-1.1.2.jar
update-server-1.0.2.0/lib/geronimo-stax-api_1.0_spec-1.0.1.jar
update-server-1.0.2.0/lib/geronimo-ws-metadata_2.0_spec-1.1.3.jar
update-server-1.0.2.0/lib/isorelax-20030108.jar
update-server-1.0.2.0/lib/jackson-core-asl-1.9.4.jar
update-server-1.0.2.0/lib/jackson-jaxrs-1.9.4.jar
update-server-1.0.2.0/lib/jackson-mapper-asl-1.9.4.jar
update-server-1.0.2.0/lib/jaxb-api-2.2.3.jar
update-server-1.0.2.0/lib/jaxb-impl-2.2.4-1.jar
update-server-1.0.2.0/lib/jaxb-xjc-2.2.4-1.jar
update-server-1.0.2.0/lib/jcip-annotations-1.0.jar
update-server-1.0.2.0/lib/jcl-over-slf4j-1.6.1.jar
update-server-1.0.2.0/lib/jettison-1.3.1.jar
update-server-1.0.2.0/lib/jetty-continuation-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jetty-http-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jetty-io-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jetty-security-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jetty-server-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jetty-util-7.5.4.v20111024.jar
update-server-1.0.2.0/lib/jmockit-0.999.19.jar
update-server-1.0.2.0/lib/joda-time-1.6.2.jar
update-server-1.0.2.0/lib/jsr311-api-1.1.1.jar
update-server-1.0.2.0/lib/jul-to-slf4j-1.6.1.jar
update-server-1.0.2.0/lib/log4j-over-slf4j-1.6.1.jar
update-server-1.0.2.0/lib/logback-classic-1.0.0.jar
update-server-1.0.2.0/lib/logback-core-1.0.0.jar
update-server-1.0.2.0/lib/mimepull-1.4.jar
update-server-1.0.2.0/lib/msv-core-2011.1.jar
update-server-1.0.2.0/lib/neethi-3.0.1.jar
update-server-1.0.2.0/lib/not-yet-commons-ssl-0.3.9.jar
update-server-1.0.2.0/lib/opensaml-2.5.1-1.jar
update-server-1.0.2.0/lib/openws-1.4.2-1.jar
update-server-1.0.2.0/lib/relaxngDatatype-20020414.jar
update-server-1.0.2.0/lib/saaj-api-1.3.4.jar
update-server-1.0.2.0/lib/saaj-impl-1.3.12.jar
update-server-1.0.2.0/lib/serializer-2.7.1.jar
update-server-1.0.2.0/lib/servlet-api-2.5.jar
update-server-1.0.2.0/lib/slf4j-api-1.6.4.jar
update-server-1.0.2.0/lib/spring-aop-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-asm-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-beans-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-context-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-core-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-expression-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-jms-3.0.6.RELEASE.jar
update-server-1.0.2.0/lib/spring-tx-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/spring-web-3.1.1.RELEASE.jar
update-server-1.0.2.0/lib/stax2-api-3.1.1.jar
update-server-1.0.2.0/lib/update-server-1.0.2.0.jar
update-server-1.0.2.0/lib/woodstox-core-asl-4.1.1.jar
update-server-1.0.2.0/lib/wsdl4j-1.6.2.jar
update-server-1.0.2.0/lib/wss4j-1.6.4.jar
update-server-1.0.2.0/lib/xalan-2.7.1.jar
update-server-1.0.2.0/lib/xmlbeans-2.5.0.jar
update-server-1.0.2.0/lib/xml-resolver-1.2.jar
update-server-1.0.2.0/lib/xmlschema-core-2.0.1.jar
update-server-1.0.2.0/lib/xmlsec-1.4.6.jar
update-server-1.0.2.0/lib/xmltooling-1.3.2-1.jar
update-server-1.0.2.0/lib/xsdlib-2010.1.jar 
```

客户端不需要整个项目所需的所有 JAR 文件，只需要一小部分。这就是我希望 ZIP 文件的样子。

```
update-server-1.0.2.0.zip (wanted contents)
-------------------------------------------
update-server-1.0.2.0/bin/update-server
update-server-1.0.2.0/bin/update-server.bat
update-server-1.0.2.0/lib/commons-configuration-1.8.jar
update-server-1.0.2.0/lib/commons-lang-2.6.jar
update-server-1.0.2.0/lib/commons-logging-1.1.1.jar
update-server-1.0.2.0/lib/cxf-bundle-minimal-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-databinding-jaxb-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-frontend-jaxrs-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-transports-common-2.5.2.jar
update-server-1.0.2.0/lib/cxf-rt-transports-http-2.5.2.jar
update-server-1.0.2.0/lib/jackson-core-asl-1.9.4.jar
update-server-1.0.2.0/lib/jackson-jaxrs-1.9.4.jar
update-server-1.0.2.0/lib/jackson-mapper-asl-1.9.4.jar
update-server-1.0.2.0/lib/jsr311-api-1.1.1.jar
update-server-1.0.2.0/lib/neethi-3.0.1.jar
update-server-1.0.2.0/lib/wsdl4j-1.6.2.jar 
```

有人可以告诉我如何更改 build.gradle 文件以排除客户端不需要的 JAR 文件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-19T16:32:08.830

应用程序插件提供了一个配置元素`applicationDistribution`，它允许您从分发目标中排除特定的东西，例如：

```
applicationDistribution.exclude('foo*.jar') 
```

或者如果您想排除几件事，您可以使用 Groovy`with`块：

```
applicationDistribution.with {
    exclude 'foo*.jar'
    exclude 'bar*.jar'
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T16:34:46.790

我没有找到该插件的任何 API，但您可以在 github 存储库[https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/groovy中找到 ApplicationPlugin 的完整源代码/org/gradle/api/plugins/ApplicationPlugin.groovy](https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/groovy/org/gradle/api/plugins/ApplicationPlugin.groovy) 这个插件将所有引用从“project.configurations.runtime”复制到目录“lib”中。因此，您可以编辑运行时类路径并排除所有不需要的文件。这应该可以通过添加新配置并添加不应包含在此新配置中的依赖项来实现。您可能希望将排除的文件添加到运行类路径，以便执行您的应用程序。

```
configurations {
    providedCompile
}

dependencies {
    compile "define your dependencies that should be added to the zipfile"
    providedCompile "dependencies that shouldnt be added to the zipfile"
}

compileJava {
    sourceSets.main.compileClasspath += configurations.providedCompile
}

run {
    classpath += configurations.providedCompile
} 
```

此脚本确保您的类路径中拥有运行脚本所需的所有库，并且它从 distZip 范围中排除了“providedCompile”中定义的所有库。随意更改名为 providedCompile 的配置名称。

或者，您可以创建自己的 distTask：[在 Gradle 1.0 中使用插件应用程序时提供自己的脚本](https://stackoverflow.com/questions/11086523/provide-own-script-when-using-plugin-application-in-gradle-1-0)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-30T15:12:06.430

通过在 build.gradle 文件中添加以下行来尝试此操作：

```
distributions {
    main {
        baseName = 'ClassName'
        contents {
            exclude("**/*.jar")
        }
    }
} 
```

# javascript - 使用 jQuery，我们如何从值为 false 的所有元素中删除禁用属性？

> ID：13982398
> 
> 赞同：3
> 
> 时间：2012-12-21T00:00:25.040
> 
> 标签：javascript, jquery, jquery-selectors, dom-manipulation

我有如下打印的输入复选框。

```
<input type="checkbox" id="a1" value="11" disabled="false">
<input type="checkbox" id="a2" value="21" disabled="true">
<input type="checkbox" id="a3" value="31" disabled="false"> 
```

我知道 disabled 属性没有任何价值。因此，当属性存在时，无论分配给它的值如何，元素都会被禁用。我想从值为 false 的所有输入元素中删除所有禁用的属性。

使用 jQuery 我想使用如下代码。

```
$("*[disabled]").not(true).removeAttr("disabled"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:04:56.027

为什么不只匹配 where `disabled`is 的元素`false`？

```
$('[disabled="false"]​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​')​.removeAttr('disabled');​​​ 
```

**演示：http: [//jsfiddle.net/ASN29/](http://jsfiddle.net/ASN29/)**

无论属性的值如何，属性的存在`disabled`都会自动使元素禁用，因此这不是一个好主意。HTML是如何变成这样的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T00:04:58.123

您可以简单地使用这样的选择器：

```
$('input[disabled="false"]').removeAttr("disabled"); 
```

[jsFiddle 演示](http://jsfiddle.net/amTpv/)

`*`我补充说，它不是`input`，而是大大缩小了查询范围。这将搜索具有称为具有值`input`的属性的元素。`disabled``false`

我建议你根本不要这样做。该 HTML 不应该被生成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T00:11:41.237

如果要启用它们，请使用[`.prop()`](http://api.jquery.com/prop).. （*这是因为`disabled`作为`checkbox`输入*的实际属性）

```
$('input[disabled="false"]').prop('disabled', false); 
```

演示在[http://jsfiddle.net/gaby/Bn4dr/](http://jsfiddle.net/gaby/Bn4dr/)

* * *

但是，正确的方法是直接打印正确的*html*

```
<input type="checkbox" id="a1" value="11">
<input type="checkbox" id="a2" value="21" disabled>
<input type="checkbox" id="a3" value="31"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T00:04:42.100

```
​$(document).ready(function (){
    $('input:disabled').removeAttr('disabled');    
});​ 
```

这是[它的 jsFiddle](http://jsfiddle.net/6W2cv/)和关于[:disabled 选择器的文档](http://api.jquery.com/disabled-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T00:07:45.407

```
$('input[disabled="false"]').removeAttr("disabled"); 
```

见[http://jsfiddle.net/JKs4C/](http://jsfiddle.net/JKs4C/)

至于这是否是一个好主意，另一方面......我认为真正的答案是修复您的服务器端渲染，以完全忽略未禁用元素的禁用属性。否则，如果您的脚本出错、noscript 等，您最终会禁用所有元素。

# javascript - 为什么我的查找和替换代码不能正常工作？

> ID：13982400
> 
> 赞同：-4
> 
> 时间：2012-12-21T00:00:40.593
> 
> 标签：javascript, jquery

我需要找到并 .replaceWith 一些文本，例如：

> **absdef**替换为**111111**
> 
> **abcdefgiop**替换为**22222222**

但是当我的文字看起来像

> abcdef, abcdefgi

.replaceWith 对我来说效果不佳，我得到这样的结果：

> **111111** , 111111焦普

我使用这段代码：

```
$("*").contents().each(function() {
    if(this.nodeType == 3)
        this.nodeValue = this.nodeValue.replace("absdef", "111111");
});
//
$("*").contents().each(function() {
    if(this.nodeType == 3)
        this.nodeValue = this.nodeValue.replace("abcdefgiop", "22222222");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:37:42.660

颠倒顺序并将它们连接起来。

```
$("*").contents().each(function() {
    if(this.nodeType == 3)
        this.nodeValue = this.nodeValue.replace("abcdefgiop", "22222222")
                                       .replace("abcdef", "111111");
}); 
```

# wpf - 为什么这个非常基本的 StreamGeometry（正方形）不在 Window 的 OnRender 中渲染？

> ID：13982401
> 
> 赞同：2
> 
> 时间：2012-12-21T00:01:09.363
> 
> 标签：wpf, onrender

好吧，我难住了。为什么这不渲染正方形？（注意，我故意使用正负坐标，因此无论原点如何，它都会显示。不知道 x/y 是否反转等）

```
public partial class Main : Window
{
    StreamGeometry _cueGeometry;
    Brush          _cueBrush;
    Pen            _cuePen;

    public Main()
    {
        InitializeComponent();

        _cueGeometry = new StreamGeometry();
        using (var geometryContext = _cueGeometry.Open())
        {
            geometryContext.BeginFigure(new Point( 40, 40), true, true);
            geometryContext.LineTo     (new Point( 40,-40), true, true);
            geometryContext.LineTo     (new Point(-40,-40), true, true);
            geometryContext.LineTo     (new Point(-40, 40), true, true);
        }
        _cueGeometry.Freeze();

        _cueBrush = Brushes.AliceBlue;

        _cuePen = new Pen(Brushes.Gray, 1);
        _cuePen.Freeze();

    }

    protected override void OnRender(DrawingContext dc)
    {
        base.OnRender(dc);
        dc.DrawGeometry(_cueBrush, _cuePen, _cueGeometry);
    }

} 
```

## 更新

我注意到还有一些奇怪的事情。如果我将此代码移动到具有红色背景的 Panel 的子类中，它会呈现红色背景，然后呈现一个前面带有灰色边框的蓝色方块。（注意：它没有被剪裁到控件的边界，这就是我可以看到所有那个正方形的方式。）

但是，如果我只是将子类更改为 UserControl，则带有灰色边框的蓝色方块将呈现在红色控件的后面。（同样，我可以看到这一点，因为我禁用了剪辑。）

如果最终将其更改为 Control 的子类，我将不再获得红色背景，而*只会*获得带有灰色边框的蓝色方块。我认为这是因为 Control 自己不进行任何渲染，但仍然没有解释为什么背景颜色在 UserControl 而不是 Panel 中渲染在我的绘图上。我的猜测是模板中的某些元素出现在渲染的前面，但我想不出那会是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:28:31.063

找到了。窗口的默认模板在内容区域中有一个边框，该边框具有不透明的白色背景，阻碍了渲染。使用 Snoop，我找到了边界，将可见性更改为“隐藏”，果然，有渲染路径。

谜团已揭开！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:48:18.873

或者简单地将 Window 设置`Background`为`Transparent`或`{x:Null}`。

# sql - 使用左连接将 SQL 转换为 Linq

> ID：13982407
> 
> 赞同：1
> 
> 时间：2012-12-21T00:01:33.567
> 
> 标签：sql, linq

我需要将此 SQL 转换为 Linq 查询，但与往常一样，我无法弄清楚:(

我想我需要更深入地了解 Linq。

```
select butik.preferences.pref,isnull(butik.userpreferences.selected,0) as selected 
from butik.preferences
left join butik.userpreferences 
     on butik.preferences.id = butik.userpreferences.pref AND 
     butik.userpreferences.userid = 2 
```

谢谢克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:02:21.563

`left join`在 LINQ中没有直接的 a 翻译。但是有很多方法可以存档您想要的内容:)

```
from item in butik.preferences
select new
{
    Pref = butik.preferences.pref,
    IsSelected = 
        butik.userprefences.Any(up => up.pref == item.id && up.userid == 2)
        ? butik.userpreferences.First(up => up.pref == item.id && up.userid == 2).selected
        : false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:27:14.583

请尝试以下代码片段。

```
var Query = (from c in butik.preferences
     join v in butik.userpreferences.Where(v => v.userid == 2).DefaultIfEmpty() on c.id equals v.pref into JoinUserPref
     from v in JoinUserPref.DefaultIfEmpty()
     select new
     {
         pref = c.pref,
         selected = (v.selected == null ? 0 : v.selected)
     }); 
```

如果上面的代码片段不起作用，请尝试使用下面的 LINQPad。

[http://www.linqpad.net/](http://www.linqpad.net/)

# c - 在 C 中输出方程

> ID：13982408
> 
> 赞同：0
> 
> 时间：2012-12-21T00:01:34.607
> 
> 标签：c

我正在用 C 编写一个小程序，它将在 1 秒内输出 CPU 使用率的总百分比。我已经让它大部分工作了，它确实计算了正确的数字，但最终计算将 workOver 除以 totalOver * 100 它总是输出 0。我不知道为什么。任何帮助都会很棒。代码如下。

```
#include <stdio.h>
#include <glibtop.h>
#include <glibtop/cpu.h>
#include <unistd.h>
#include <math.h>

unsigned long cpu1Total, cpu1User, cpu1Nice, cpu1Sys, cpu1Work;
unsigned long cpu2Total, cpu2User, cpu2Nice, cpu2Sys, cpu2Work;
unsigned long workOver, totalOver, cpuTotal;

int main(){

    glibtop_init();

    glibtop_cpu cpu;
    glibtop_get_cpu (&cpu);

    cpu1Total = cpu.total;
    cpu1User = cpu.user;
    cpu1Nice = cpu.nice;
    cpu1Sys = cpu.sys;

    cpu1Work = cpu1User + cpu1Nice + cpu1Sys;

    usleep ( 1000000 ) ;

    glibtop_get_cpu (&cpu);

    cpu2Total = cpu.total;
    cpu2User = cpu.user;
    cpu2Nice = cpu.nice;
    cpu2Sys = cpu.sys;

    cpu2Work = cpu2User + cpu2Nice + cpu2Sys;

    workOver = cpu2Work - cpu1Work;
    totalOver = cpu2Total - cpu1Total;

    cpuTotal = workOver / totalOver * 100;

    printf("Cpu Idle : %ld \n", cpuTotal);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:02:47.073

除法中的变量被声明为整数。问题是如果你将两个整数相除，你将不会得到一个小数值。这意味着如果分母大于分子，则结果将为 0。

整数除法不会自动产生浮点结果。

要解决此问题，您可以将公式中的至少一个变量重新声明为浮点数，甚至将它们转换为计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:03:24.913

`unsigned long`当您应该使用`float`或`double`进行除法时，您正在使用。A`long`或任何整数值无法处理小数点，因此如果您有一个数字 0 < x < 1，那么当小数被截去时，您将剩下 0。

# ios - 三指捏合手势

> ID：13982409
> 
> 赞同：6
> 
> 时间：2012-12-21T00:01:49.587
> 
> 标签：ios, uigesturerecognizer, uipinchgesturerecognizer

我在尝试实现 3 指捏合时遇到了一些问题。

我一直在单独使用 2 指捏和 2 指旋转！（不需要或想要同时手势）问题是很多时候，系统识别出错误的动作，因为它们非常相似，所以我最终不得不移开手指并再次按下以尝试让系统识别旋转（通常它首先识别夹点）

我进行了很多搜索以查看是否有`delayBegin`帮助，或者我是否可以做一些激活同时手势的操作，但没有一个可以正常工作，所以我的想法是不要使用 2 个手指捏，我可以使用 3 个（因为它更容易捏比旋转）。

问题是，如您所知，Pinch 仅适用于 2 个手指。所以我决定我可以子类化`UIPinchGestureReconizer`并只允许它在屏幕上有 3 个手指时工作。其余的它可以像标准捏合一样工作，即使忽略无名指（计算比例）但确保无名指仍在屏幕上。

所以我为我的`ThreeFingerPinchRecognizer`（那个子类`UIPinchGestureRecognizer`）尝试了以下实现

```
@implementation GRThreeFingerPinchRecognizer

-(id)initWithTarget:(id)target action:(SEL)action
    {
    self = [super initWithTarget:target action:action];
    if(self){
    }
    return self;
}

- (void)reset
{
    [super reset];
}

 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    int numberOfTouches = event.allTouches.count;
    if (numberOfTouches == 3) 
     {
        [super touchesBegan:touches withEvent:event];
     }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    int numberOfTouches = event.allTouches.count;
    if (numberOfTouches == 3)
    {
        [super touchesMoved:touches withEvent:event];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{ 
        [super touchesEnded:touches withEvent:event];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];
 } 
```

因此，如您所见，我正在尝试获得与 2 指捏持相同的功能（通过仅调用`[super]`函数，并且在`touchesBegan`and`touchesMoved`函数中，我正在测试屏幕上是否有 3 个手指（通过查看`event.alltouches.count`)

有了这个，两根手指的旋转效果很好，但是捏的效果不是很好，很难激活它，当它激活时，它不能像两指捏一样工作......

我知道我可能做错了，所以任何帮助都会很棒！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:49:29.290

看到这个片段可以帮助你识别捏的状态：

```
if (pinch.numberOfTouches > 1)
{
    CGPoint firstPoint = [pinch locationOfTouch:0 inView:self];
    CGPoint secPoint = [pinch locationOfTouch:1 inView:self];
    currentUpperY = MIN(firstPoint.y, secPoint.y);
    if (previousY == 0) previousY = currentUpperY;
    Float32 y = (self.contentOffset.y + previousY - currentUpperY);
    [self setContentOffset:CGPointMake(0, y < 0 ? 0 : y) animated:NO];

    if (pinch.state == UIGestureRecognizerStateBegan)
    {
        pinchStarted = YES;
        firstY = MIN(firstPoint.y, secPoint.y);
        secondY = MAX(firstPoint.y, secPoint.y);
        NSArray *pinchedIndexs = [self indexPathsForRowsInRect:CGRectMake(0.0, firstY, CGRectGetWidth(self.bounds), secondY)];
        if (pinchedIndexs.count) itemToOpenOrClose = [[currentItems subarrayWithRange:NSMakeRange(((NSIndexPath *)[pinchedIndexs objectAtIndex:0]).row, pinchedIndexs.count - 1)] copy];
    }
}

if ((pinch.state == UIGestureRecognizerStateChanged && pinchStarted && itemToOpenOrClose.count)
    || pinch.state == UIGestureRecognizerStateEnded)
{
    if (pinch.scale > 1) // Pinch OUT
    {
        for (Item *item in itemToOpenOrClose)
        {                
            [self openItem:item inIndexPath:[NSIndexPath indexPathForRow:[currentItems indexOfObject:item] inSection:0]];
        }
    }
    else if (pinch.scale < 1) // Pinch IN
    {
        for (Item *item in itemToOpenOrClose)
        {
            [self closeItem:item inIndexPath:[NSIndexPath indexPathForRow:[currentItems indexOfObject:item] inSection:0]];
        }
    }

    if (pinch.state == UIGestureRecognizerStateEnded)
    {
        pinchStarted = NO;
        itemToOpenOrClose = nil;
        previousY = 0;
    }
} 
```

# c# - WCF服务json中的多个参数

> ID：13982416
> 
> 赞同：0
> 
> 时间：2012-12-21T00:02:41.710
> 
> 标签：c#, json, wcf

我正在尝试从窗口窗体中使用 WCF 服务。我试图调用的方法接受两个参数：

```
public String Redirect(String code, String[] data)
{
   //Some code here.
} 
```

现在，当我尝试连接到该功能时，不发送数据，Web 服务停止。我需要知道如何以正确的格式发送数据，以便函数接受断开连接。

PT：该函数只接受 json 数据。

我用来连接到网络服务的代码：

```
 String url = GetUrl();
            WebRequest request = WebRequest.Create(url);
            request.ContentType = "application/json";
            request.Method = "POST";
            System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
            request.GetResponse(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:19:13.787

我假设您使用`WebInvoke`了一种`POST`方法。解决方案很简单：您忘记将消息添加到正文中：

```
String url = GetUrl();
WebRequest request = WebRequest.Create(url);
request.ContentType = "application/json";
request.Method = "POST";

byte[] bytes = System.Text.Encoding.UTF8.GetBytes("Your JSON data");
request.ContentLength = bytes.Length;
var requestStream = request.GetRequestStream();
requestStream.Write(bytes, 0, bytes.Length); 
```

`You JSON data`会是这样的：

```
{
    "code": "10",
    "data": [
        "hello",
        "data"
    ]
} 
```

# .net - File.Open 访问冲突

> ID：13982418
> 
> 赞同：2
> 
> 时间：2012-12-21T00:02:46.743
> 
> 标签：.net, vb.net

我正在像这样在我的 Windows 服务中打开一个文件...

```
request.Report = File.Open(fName, FileMode.OpenOrCreate, FileAccess.ReadWrite) 
```

对象**请求**是一个第三方 DLL，它有一个数据类型“流”的成员**报告**，它读取文件的内容，但随后保持文件锁定，无论如何我可以将流推送到“request.Report”并且没有文件被锁定？

我试过了...

```
Dim iStream As FileStream = File.Open(fName, FileMode.OpenOrCreate, FileAccess.ReadWrite)
request.Report = iStream 
iStream.Close() 
```

但出现错误“流必须实现写入方法。”

不幸的是，我无法改变 3rd 方 DLL 的行为。**报告**方法接受文件流，然后也写入它。

谢谢

# objective-c - iOS NSURLConnection 每个主机的最大 TCP 连接数 + 端口端点

> ID：13982423
> 
> 赞同：1
> 
> 时间：2012-12-21T00:02:57.047
> 
> 标签：objective-c, ios, nsurlconnection

我的目标是研究 iOS 在实现持久连接时的局限性。

假设我将使用 NSURLConnection 作为我的 http 客户端。

我可以同时打开多少个 tcp 连接到单个主机？我可以为不同的主机打开多少个 tcp 连接？

默认值是什么，如何更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:11:10.507

在我测试的模拟器中，您可以为单个主机构建至少 10 个连接（如果您为每个主机设置连接，则更多）。

但是在设备中，似乎只允许一个连接，因为我建立了多个连接，其他连接可能会得到服务器的错误响应，这很奇怪。所以我认为设备中只支持一个连接，但我也没有任何关于这个的文档，也许我在设备中做错了测试，但希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T18:00:23.663

与给定主机默认值建立的最大同时连接数在 macOS 中为 6，在 iOS 中为 4。

您可以参考[https://developer.apple.com/documentation/foundation/nsurlsessionconfiguration/1407597-httpmaximumconnectionsperhost](https://developer.apple.com/documentation/foundation/nsurlsessionconfiguration/1407597-httpmaximumconnectionsperhost)

# windows-mobile - 当应用程序不活动时 FileSystemWatcher 失败

> ID：13982424
> 
> 赞同：1
> 
> 时间：2012-12-21T00:03:12.910
> 
> 标签：windows-mobile, filesystemwatcher, opennetcf

我正在尝试让一个应用程序（用 c# 编写）在 Windows mobile 6.1 设备上运行，在另一个应用程序后面的后台（使用 filesystemwatcher）。我写了一个简单的文件系统观察器，只要它是当前的应用程序（换句话说，只要你在它之后不打开另一个程序），它就可以很好地工作。即使在返回实例之后，文件系统观察器也不再起作用。它使用 OpenNETCF，因为 .net cf 不包括文件系统观察程序。

任何人都知道为什么这不起作用？

任何帮助将不胜感激。

这是我的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {

        OpenNETCF.IO.FileSystemWatcher f = new OpenNETCF.IO.FileSystemWatcher(@"c:\happydays", "*.*");
        f.IncludeSubdirectories = true;
        f.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite |
                       NotifyFilters.FileName | NotifyFilters.DirectoryName;

        f.Created += new FileSystemEventHandler(File_Created);                                  
        f.EnableRaisingEvents = true;
    }

    private void File_Created(object sender, OpenNETCF.IO.FileSystemEventArgs e)
    {
MessageBox.Show("File Created");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:13:45.270

我不确定您为什么会出现这种行为，但我可以猜测操作系统仅将文件通知消息发送到活动应用程序。

SDF`FileSystemWatcher`依赖于应用程序消息泵来运行，因为它在底层使用aygshell API，而aygshell 使用Windows 消息进行调度（微软的选择，不是我的选择）。由于几个原因，我不喜欢这样，所以我写了一个替代方案`FileSystemMonitor`，你可以在同一个命名空间和 DLL 中找到它，以及`FileSystemWatcher`. IIRC，它的工作方式不是 100% 相同，但考虑到我必须使用的文件系统 API，我使它尽可能接近。

# rspec - 当任何规范失败时如何自动制作Rspec save_and_open_page

> ID：13982425
> 
> 赞同：13
> 
> 时间：2012-12-21T00:03:12.580
> 
> 标签：rspec, capybara

我有...

**/spec/spec_helper.rb**：

```
require 'capybara/rspec'
require 'capybara/rails'
require 'capybara/dsl'

RSpec.configure do |config|
  config.fail_fast = true
  config.use_instantiated_fixtures = false 
  config.include(Capybara, :type => :integration)
end 
```

因此，一旦任何规范失败，Rspec 就会退出并显示错误。

在这一点上，我希望 Rspec 也自动调用 Capybara 的`save_and_open_page`方法。我怎样才能做到这一点？

[Capybara-Screenshot](https://github.com/mattheworiordan/capybara-screenshot)看起来很有希望，但是虽然它将 HTML 和屏幕截图保存为图像文件（我不需要），但它不会自动打开它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-05T09:06:35.640

在 rspec 的配置中，您可以为每个示例定义一个后挂钩（ [https://www.relishapp.com/rspec/rspec-core/v/2-2/docs/hooks/before-and-after-hooks ）。](https://www.relishapp.com/rspec/rspec-core/v/2-2/docs/hooks/before-and-after-hooks)它没有很好的记录，但是这个钩子的块可能需要一个`example`参数。在`example`您可以测试的对象上：

*   它是一个功能规范：`example.metadata[:type] == :feature`
*   它失败了吗：`example.exception.present?`

截取的完整代码应如下所示：

```
 # RSpec 2
  RSpec.configure do |config|
    config.after do
      if example.metadata[:type] == :feature and example.exception.present?
        save_and_open_page
      end
    end
  end

  # RSpec 3
  RSpec.configure do |config|
    config.after do |example|
      if example.metadata[:type] == :feature and example.exception.present?
        save_and_open_page
      end
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T21:20:58.533

在 RSpec 2 和 Rails 4 中，我使用了这个配置块：

```
# In spec/spec_helper.rb or spec/support/name_it_as_you_wish.rb
#
# Automatically save and open the page
# whenever an expectation is not met in a features spec
RSpec.configure do |config|
  config.after(:each) do
    if example.metadata[:type] == :feature and example.exception.present?
      save_and_open_page
    end
  end
end 
```

# android - 如何同步 TouchImageView 以一次缩放和滚动多个控件

> ID：13982426
> 
> 赞同：1
> 
> 时间：2012-12-21T00:03:19.647
> 
> 标签：android, scroll, imageview

我正在尝试修改[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)以便我可以拥有 n 个 TouchImageViews，当放大一个控件时，另一个控件会自动缩放。

我想为所有其他“注册”视图自动复制任何视图中的操作（例如：缩放、滚动等）。但我无法理解代码

相关：[如何获得图像的缩放功能？](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images/7458910#7458910)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:09:53.013

在方法中

```
 @Override
    public boolean onScale(ScaleGestureDetector detector) {
 . . . 
 } 
```

添加一些观察者模式，您可以向引用的“控件”添加回调，接下来您可以看到方法调整它的大小

```
matrix.postScale(mScaleFactor, mScaleFactor, viewWidth / 2, viewHeight / 2); 
```

这是我的第一个方法

# django - 为 Django 开发服务器设置 New Relic

> ID：13982435
> 
> 赞同：18
> 
> 时间：2012-12-21T00:04:10.063
> 
> 标签：django, newrelic

我正在使用 Django 并尝试使用 New Relic。是否可以监控 Django 开发服务器？我似乎只能在使用生产服务器设置 New Relic 方面寻求帮助。

## 编辑

'如何'以供将来参考：

（我用的是Django1.4）

1.  按照这个： [https ://newrelic.com/docs/python/python-agent-installation](https://newrelic.com/docs/python/python-agent-installation)

2.  作为该指南的最后一步（*与您的应用程序集成*），将您的`wsgi.py`文件更改为以下内容：

    ```
    import newrelic.agent

    newrelic.agent.initialize('/home/username/path/to/myproject/newrelic-1.9.0.21/newrelic.ini')

    import os
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")

    from django.core.wsgi import get_wsgi_application

    application = get_wsgi_application()
    application = newrelic.agent.wsgi_application()(application) 
    ```

现在在 New Relic 平台上登录您的帐户，向您的开发服务器发出一些请求，然后查看平台上的更改。感恩，你成功了！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T08:27:40.290

从 Django 1.4 开始， startproject 命令会创建一个该命令将使用[的 wsgi 文件。](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/#the-application-object)`runserver`

如果您有一个没有 wsgi 文件的旧 Django 项目，您可以按照 Django 文档中的说明创建一个，并[`WSGI_APPLICATION`](https://docs.djangoproject.com/en/dev/ref/settings/#wsgi-application)在您的`settings.py`文件中进行设置。

您应该能够通过修改此 wsgi 文件来设置新的 relic，如[Python 代理集成](https://docs.newrelic.com/docs/python/python-agent-integration#manual-integration)的 New Relic 文档所述。

# html - 具有锚点悬停状态的未知大小的垂直/水平中心图像

> ID：13982436
> 
> 赞同：0
> 
> 时间：2012-12-21T00:04:19.583
> 
> 标签：html, css

我正在尝试将具有未知尺寸的图像（水平和垂直）居中。这个图像可能比容器的大小（101x84）大，所以我需要用`max-width`和约束图像`max-height`。最后，图像需要具有悬停状态，如果用户将鼠标悬停在图像上，图标将出现在容器的中间。

目前，我的代码满足上述所有要求，除了我不能垂直对齐我的图像。我曾尝试遵循其他指南，例如将 img 更改为，`display:inline-block`但随后我失去了水平居中对齐。

如果可能，除非绝对必要，否则我宁愿不使用 javascript/jQuery。

[http://jsfiddle.net/uNvSU/1/](http://jsfiddle.net/uNvSU/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:45:56.360

尝试使用`display:table-cell`，然后使用`vertical-align:middle`，然后使用`margin:0 auto;`或`text-align:center`

那应该是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:06:18.437

我无法发表评论，所以我将其作为单独的答案。

`display:table-cell`IE7 不支持。因此，如果您必须支持 IE7，您可以添加以下内容以使其`display:table-cell`正常工作：

```
<!--[if lte IE 7 ]><table><td><![endif]-->
<div>                   
 ...
</div>
<!--[if lte IE 7 ]></td></table><![endif]--> 
```

此处还讨论了六种不使用 javascript 的垂直居中方式：[http ://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

# mysql - 是否可以将引用（“类型”）实体 FK 替换为表示该 FK 的完整可能值集的 BOOLEAN 属性？

> ID：13982437
> 
> 赞同：1
> 
> 时间：2012-12-21T00:04:21.707
> 
> 标签：mysql, data-modeling, denormalization

**在尝试通过删除连接（非规范化）来优化物理数据模型时，我选择采用用户可能为CommEventPurposeType**指定的所有可能值，将它们实现为**CommEventPurpose**中的 BOOLEAN 属性，并*最终*丢弃**CommEventPurposeType**表及其 FK在**CommEventPurpose**中。

**随后，我将使用 CHECK 约束来确保每个CommEventPurpose**实例只有一个 BOOLEAN 属性可以为 TRUE 。

采用这种方法的性能和空间权衡是什么？

平台：MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:14:46.973

MySQL 不强制执行`CHECK`约束。接受约束的语法`CHECK`，并将其作为文档保留在元数据中；但 MySQL 不强制执行它们。（当然，您可以使用触发器来自己强制执行这种类型的约束，同时使用 BEFORE INSERT 和 BEFORE UPDATE 触发器。）

但是，如果您只想选择一个值，那么更好的选择是单列`ENUM`数据类型。该`ENUM`数据类型仅允许分配预定义的值列表中的一个值。MySQL 确实强制执行了这一点。

（当“严格”的 SQL 模式未启用时，MySQL 有点松懈；当分配了无效值时，MySQL 不会抛出异常，而是默默地替换为“无值”占位符。）

与单独存储的布尔列相比，ENUM 将在行中节省大量空间（但是，您正计划实现布尔类型的存储，无论是单个字符还是 TINYINT。）

* * *

您还询问了性能。

`ENUM`与单独存储的“布尔”列相比，使用单个列可以获得更好的性能——更短的行、更少的 NULL 指示符、每块更多的行、仅在一列而不是多列上的索引、自动执行“只有一个”与调用存储程序（触发器）的开销。

* * *

就设计而言，使用`ENUM`数据类型与查找表的外键相比是完全可以接受的，特别是，如果您通常要执行与查找表的联接以检索要在屏幕或报告上显示的字符串值。

需要注意的是：只要您不消除“实体”表，就可以消除“查找”表。“实体”表是指包含代表“可以唯一标识且对业务很重要的人、地点、事物、概念或事件”的行的表。

因此，例如，包含“打开”、“关闭”、“待处理”、“已取消”、“延迟”等的“状态”列是一个完美的候选者，`ENUM,`因为这些不是单独可识别的“实体”，与我们真正关心的真实“实体”不同：客户、订单、发货、付款等。

* * *

**跟进**

没有方便的机制来获取 ENUM 的有效值列表；根据我的经验，大多数开发人员更喜欢有一个可以按照他们的正常模式运行“查找”查询的表。

我添加到“查找”表中的一件事是`seq`（序列）列，它指定了事物应在下拉列表中显示的顺序（因为有时，要求它们以非字母顺序列出，并且不容易从存储的字符串值中导出。）

我已经成功地实现了`ENUM`数据类型来代替查找表的外键。它提供了一个稍微干净的数据模型（避免了在图表上绘制的额外分散注意力和不必要的关系线），并提高了应用程序的性能，因为它避免了对那个查找表的 JOIN。从客户端来看，它就像一个 VARCHAR 列，在选择/插入/更新方面。

# ruby-on-rails - 在 Rails 控制器中执行原始 MongoDB 查询

> ID：13982438
> 
> 赞同：5
> 
> 时间：2012-12-21T00:04:25.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid3

我有以下原始 mongo 查询，我想直接在我的 Rails 控制器中执行：

```
 db.user_places.update({place_id: destroy_model.id}, {$set: {place_id: keep_model.id}}, false, true) 
```

对于续集，我`ActiveRecord::Base.connection.execute(sql)`用来执行我的 sql 查询。

使用 MongoDB/mongoid gem 的等效方法是什么？我已经尝试过[如何在 Ruby 中直接触发原始 MongoDB 查询](https://stackoverflow.com/questions/6548061/how-to-fire-raw-mongodb-queries-directly-in-ruby)，但我没有使用 MongoMapper。

谢谢你。

编辑：我对这个问题的解决方案是从 Mongoid 文档中运行以下内容：

`UserPlace.where(place_id: destroy_model.id).update_all(place_id: keep_model.id)`

这将生成上面的原始 mongo 查询并以 ActiveRecord 方式执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:19:47.057

我找到了一种无需与 Mongo 控制台建立连接的方法。使用 mongoid，您可以只使用 update_all 来生成相同的查询。

# video - 媒体播放控制 windows phone 8

> ID：13982441
> 
> 赞同：0
> 
> 时间：2012-12-21T00:04:37.523
> 
> 标签：video, windows-phone-8

我正在开发用于视频播放的 Windows Phone 8 应用程序。视频开始后，我希望用户能够在视频之间切换而无需退出`MediaPlayerLauncher`. 因此，我正在考虑在 windows phone 为视频显示的 3 个控件（倒带、暂停、快进）之上添加第四个控件。我查看`MediaPlaybackControls`并看到它也有一个用于跳过的控件。因此，我在代码中添加了以下行来显示 Skip 控件。

```
MediaPlayerLauncher launcher = new MediaPlayerLauncher();
launcher.Media = entry.Uri;
launcher.Controls = MediaPlaybackControls.Rewind | MediaPlaybackControls.Pause | 
                     MediaPlaybackControls.FastForward | MediaPlaybackControls.Skip;
launcher.Show(); 
```

entry.Uri 是我要播放的视频的 URI。我希望在播放视频时显示所有 4 个控件，但只显示原始的 3 个控件。我还注意到，无法为`MediaPlayerLauncher`对象指定多个视频文件，因为 Media 字段只接受一个 URI。

所以有人可以帮助我如何显示“跳过”控件以及“倒带”、“暂停”和“快进”，以及如何在按下“跳过”后切换视频。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:18:43.460

MediaPlayerLauncher isn't really meant for that usecase. And even at this usecase it does an "OK job". For example MediaPlayerLauncher doesn't support titles, subtitles, overlays, etc.

If you're trying to playback a list of items or want a tailored UI/UX for your media playback experience it's best to use [SmfPlayer](http://smf.codeplex.com/) which in turn uses the built-in MediaElement or SmoothStreamingMediaElement.

For example, here's [how to](http://smf.codeplex.com/documentation) create a playlist of several items with SmfPlayer for WP7:

```
<Core:SMFPlayer>
    <Core:SMFPlayer.Playlist>
        <Media:PlaylistItem MediaSource="http://smf.vertigo.com/videos/wildlife.wmv"/>
        <Media:PlaylistItem MediaSource="http://smf.vertigo.com/videos/wildlife.wmv"/>
        <Media:PlaylistItem DeliveryMethod="AdaptiveStreaming" MediaSource="http://ecn.channel9.msdn.com/o9/content/smf/smoothcontent/bbbwp7/big buck bunny.ism/manifest"/>
    </Core:SMFPlayer.Playlist>
</Core:SMFPlayer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:25:22.317

简单的答案是你不能。对于这种情况，您应该`MediaElement`在您的应用程序中使用。

但是，您将需要在您的应用程序中自己构建控件。

# python - 为什么 django.utils.importlib.import_module 不导入正确的应用程序？变量如何变化？

> ID：13982442
> 
> 赞同：1
> 
> 时间：2012-12-21T00:04:40.283
> 
> 标签：python, django, django-models, django-apps, python-import

我遇到了“模型未安装或抽象”错误，这些错误只发生在某些机器上而不是其他机器上，当我深入研究时，我发现问题是`load_app(self, app_name, can_postpone=False)`方法`django.db.models.loading.py`没有像 django 假设的那样工作。

在`def load_app(self, app_name, can_postpone=False)`第 87 行，我添加了一些打印语句。（这里的原始代码：[https](https://github.com/django/django/blob/master/django/db/models/loading.py#L87) ://github.com/django/django/blob/master/django/db/models/loading.py#L87 ）

```
 self.handled[app_name] = None
    self.nesting_level += 1
    app_module = import_module(app_name)
    print "APP--", app_name
    try:
        print "APPNAME-BEGIN", app_name, type(app_name)
        models = import_module('.models', app_name)
        print "APPNAME-END__", app_name
        print "LOADD", str(models), app_name
    except ImportError, e: 
```

您会认为`app_name`at与...中的`APPNAME-BEGIN`相同`app_name``APPNAME-END__`

这是输出：

```
2012-12-20 15:44:12.526254500 APPNAME-BEGIN users <type 'str'>
2012-12-20 15:44:12.590877500 APPNAME-END__ gradmaker
2012-12-20 15:44:12.590877500 LOADD <module 'gradmaker.models' from '/home/gradcon4/gradcon4/project/gradmaker/models.pyc'> gradmaker 
```

是怎么`app_name`改变的？为什么导入了错误的模块？（`gradmaker`而不是`users`）

在什么条件下会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:06:34.623

正在发生的事情是其中一条`import X`线提高了`ImportError`.

ie`import gradmaker.models as gradmaker`不正确，请`from gradmaker import models as gradmaker`改用。

被`ImportError`调用的函数之一捕获`import_module`并跳过。

因此，发生此错误的应用程序未正确导入。

导入线修复后，一切都很好。

变量没有改变，发生的事情是代码由于错误而跳出函数，并产生了奇怪的输出。

# python - Python美汤合并行

> ID：13982448
> 
> 赞同：3
> 
> 时间：2012-12-21T00:04:59.060
> 
> 标签：python, beautifulsoup

这是html

```
<table>
<tr>
<td class="break">mono</td>
</tr>
<tr>
<td>c1</td>
<td>c2</td>
<td>c3</td>
</tr>
<tr>
<td>c11</td>
<td>c22</td>
<td>c33</td>
</tr>
<tr>
<td class="break">dono</td>
</tr>
<tr>
<td>d1</td>
<td>d2</td>
<td>d3</td>
</tr>
<tr>
<td>d11</td>
<td>d22</td>
<td>d33</td>
</tr>
</table> 
```

现在我想在 csv 文件中这样输出：

```
mono c1 c2 c3
mono c11 c22 c33
dono d1 d2 d3
dono d11 d22 d33 
```

但我得到这样的输出：

```
mono
c1 c2 c3
c11 c22 c33
dono
d1 d2 d3
d11 d22 d33 
```

这是我的代码：

```
import codecs
from bs4 import BeautifulSoup
with codecs.open('dump.csv', "w", encoding="utf-8") as csvfile:

    f = open("input.html","r")

    soup = BeautifulSoup(f)
    t = soup.findAll('table')
    for table in t:
        rows = table.findAll('tr')
        for tr in rows:
            cols = tr.findAll('td')
            for td in cols:
                csvfile.write(str(td.find(text=True)))
                csvfile.write(",")
            csvfile.write("\n") 
```

请帮我解决这个问题。谢谢。

编辑：

解释了更多细节。这里我需要添加要附加的第一部分（单声道，多诺等）。

这里的规则是，除非我遇到一个新的“break”类，否则该类中的文本应附加到其下方的任何 tr 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:02:57.913

由于您的新问题实际上是与原始问题完全不同的问题，因此这是一个完全不同的答案：

```
for table in t:
    rows = table.findAll('tr')
    for row in rows:
        cols = row.findAll('td')
        if 'break' in cols[0].get('class', []):
            header = cols[0].text
        else:
            print header, ' '.join(col.text for col in cols) 
```

我假设一行将恰好是 1 个“中断”列，或者是 1 个或更多常规列。如果这些假设不成立，则可以修改代码。

另外，如果`join`函数中的生成器表达式让你感到困惑，同样的事情可以重写为显式循环：打印标题；然后对于每一列，打印该列；然后打印一个换行符。

既然你要求解释`'break' in cols[0].get('class', [])`，我会分解它。

*   `cols`是当前节点中每个节点`list`的 BS4对象之一。`Tag``td``tr`
*   `cols[0]`是第一个。
*   `cols[0].get('class', [])`将`Tag`对象视为字典，如[docs 中所述](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#attributes)，并在其上调用熟悉的`get(key, defaultvalue)`方法。
    *   在 BS4 中（与旧版本不同），按名称查找`Tag`属性总是返回`list`. 虽然 BS3 将返回`'foo bar'`for`<td class='foo bar'>`和`'bar'`for `<td class='foo' class='bar'>`，但 BS4 将返回`['foo', 'bar']`两者。
*   将它们放在一起，`cols[0].get('class', [])`将`['break']`适用于`<td class='break'>`案例，以及`[]`样本输入中的所有其他案例。

如上所述，我假设一行将恰好是 1 个“中断”列，或者是 1 个或更多常规列。您可以看到我在代码中使用这些假设的位置。但是，如果这些假设中的任何一个被打破，那么您还没有告诉我们足够多的信息来了解在这些情况下您想做什么。

如果您有任何没有列的行，显然`cols[0]`会引发`IndexError`. 但是你必须决定在这种情况下该怎么做。它应该什么都不做吗？只打印标题？更改为在我们看到标题行之前什么都不会打印的状态？无论您决定什么，它都应该易于编码。

如果您有任何带有标题的行后跟普通行，则普通行将被忽略。如果您有任何标题不是一行中的第一列，它们将被视为正常值。如果您在同一行中有多个标题，则除第一个之外的所有标题都将被忽略。等等。在每种情况下，这可能是也可能不是。但是在编写代码之前，您必须决定您想要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T00:12:29.893

使用内置`csv`模块处理 CSV 文件。这比手动操作要容易得多。

至于你的问题，这是因为你`csvfile.write('\n')`的缩进太远了，所以数据的写入就像它出现在表格中一样。改为制作一个生成器，它应该可以工作：

```
import csv
from bs4 import BeautifulSoup

def get_fields(soup):
    for td in soup.find_all('td'):
        yield td.get_text().strip()

with open('csvfile.csv', 'w') as csvfile:
    writer = csv.writer(csvfile)

    with open('input.html', 'r') as handle:
        soup = BeautifulSoup(handle.read())

    fields = list(get_fields(soup))

    writer.writerow(fields) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:22:59.873

如果你想一起运行表中的所有行，为什么不忽略这些行呢？

```
for table in t:
    cols = table.findAll('td')
    for td in cols:
        csvfile.write(str(td.find(text=True)))
        csvfile.write(",")
    csvfile.write("\n") 
```

使用 BeautifulSoup 而不是严格的解析器的一半原因是让你对结构松散（另一半是让你处理在生成结构时玩松散的人）。那么，当您可以逐列进行时，为什么要逐行然后尝试忽略逐行？

`csv`使用该模块比尝试手动格式化它要好得多，但这是一个单独的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T00:08:42.947

您是否尝试过取消缩进`csvfile.write("\n")`以使其出现在表格循环的末尾，而不是 tr 循环的末尾？

# c#-4.0 - 使用@foreach 在一个视图中显示 3 个模型

> ID：13982453
> 
> 赞同：1
> 
> 时间：2012-12-21T00:05:42.863
> 
> 标签：c#-4.0, asp.net-mvc-4

我有一个 ASP.NET MVC 4 C# 应用程序，我想在一个视图中显示来自 3 个不同模型的数据。

这些模式通过外键相关，如下所示：

```
Model A | Model B | Model C
ID      | ID      | ID
          A_ID    | B_ID 
```

在模型 A 的视图中，我希望能够显示在 B 和 C 中链接的数据。

现在，在模型 A（详细信息）的视图中，我可以执行以下操作：

```
@model Application.Models.A

@foreach (var b Model.B)
    {
        @Html.DisplayFor(modelB => B.Title)
        <br />
    } 
```

我希望能够做到：

```
@foreach (var b Model.B)
    {
        @Html.DisplayFor(modelB => B.Title)

        @foreach (var c Model.B.C)
        {
            @Html.DisplayFor(modelC => C.Title)
            <br />
        }

        <br />
    } 
```

您可以在 ruby​​ on rails 中执行此操作，我如何在 MVC 4 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:19:45.827

如果您使用任何流行的 ORM 工具（即：Nhibernate、实体框架），您就可以对这些关系进行建模。简而言之，在您对上述模式进行建模后，您将能够将 Application.Models.A 的实例传递到您的视图中。因为这种类型与其他实体有必要的关系。

但是实践创建一个单独的视图模型要好得多，因为将实体模型直接传递到视图中并不是一个好的实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:34:33.890

我想到了。

我正确设置了模型、控制器和关系。我只需要将我的视图修改为以下内容：

```
@foreach (var b in Model.Bs)
    {
        @Html.DisplayFor(B => b.Title)
        <br />
        foreach (var c in b.Cs)
        {
            @Html.DisplayFor(C => c.Title)
            <br />
        }
    } 
```

谢谢。

# ruby-on-rails - 需要从 2 个表中提取数据，尝试使用包含但失败

> ID：13982455
> 
> 赞同：0
> 
> 时间：2012-12-21T00:05:50.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个简单的问题。我有 2 个表：Followers（包含 id、user1、user2 列）和 Users（包含 id、name、address 列）。

我想获取给定用户的关注者的所有用户数据。即在尽可能高效的查询中，我想这样做：Followers.find_all_by_id(10)。然后，对于该列表中的每个关注者，我想在用户表中查找它们。

我显然可以做一个大的 for 循环，但我也知道我可以在这里使用包含语句。我只是不知道该怎么做。这是我到目前为止所得到的：

```
Follow.includes(:user).where('user1=?',current_user.id) 
```

这不起作用（我得到的结果只是 Follow 表的一个小节）。

谢谢你的帮助！林戈

这是我的模型的样子......

关注.rb：

```
class Follow < ActiveRecord::Base
  belongs_to :photo_taker, :class_name => "User"
  belongs_to :user 
end 
```

用户.rb：

```
has_many :followings, :class_name => 'Follow', :dependent => :destroy
has_many :followers, :class_name => 'Follow', :foreign_key => 'user2', :dependent => :destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:46:57.493

```
# Follow:
belongs_to :photo_taker, :foreign_key => :user2, :class_name => "User"
belongs_to :user, :foreign_key => :user1

# User:
has_many :followings, :class_name => 'Follow', :foreign_key => :user1, :dependent => :destroy
has_many :followers, :through => :followings, :source => :photo_taker, :dependent => :destroy

user.followers
#=> returns following users 
```

如果您需要包含关注者的完全关注对象。

```
user.followings.includes(:photo_taker) 
```

# assembly - 在 x86 程序集中打印字符串的问题

> ID：13982459
> 
> 赞同：1
> 
> 时间：2012-12-21T00:06:00.847
> 
> 标签：assembly, x86, masm

所以我有这个代码（它显示“输入您的输入：”然后当用户输入一个字符时，它会回显给他们）：

```
.model small
.stack 100h
.data
msg db 'Enter your input: $'

.code
start:
    mov     ah, 09h
    lea     dx, msg
    int     21h

    mov     ah, 1h
    int     21h

    mov     dl, al
    mov     ah, 2h
    int     21h

    mov     ax, 4c00h
    int     21h
end start 
```

当我组装它时，它可以工作，但在它说“输入您的输入：”之前，它显示了一堆随机的 ASCII 字符。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:12:49.950

嗯，好的 ole DOS...

您需要设置段寄存器：

```
start:
    mov     ax, @data
    mov     ds, ax
    ...
    ... 
```

# c++ - Xcode 在成功构建和运行后不显示输出

> ID：13982461
> 
> 赞同：0
> 
> 时间：2012-12-21T00:06:21.880
> 
> 标签：c++, xcode

目前，

我正在使用 Xcode 在 C++ 中进行一些编程。我打开了调试窗口并运行了一个简单的程序，例如这个程序，但没有输出。它没有运行，因为快捷方式 cmnd+r 不起作用。您究竟如何才能使该快捷方式再次起作用。

```
#include <iostream>

using namespace std;

int main()
{

cout << "Hi";
    return 0;

} 
```

# ruby-on-rails - OS X Lion、ImageMagick 和 RMagic - 如何安装？

> ID：13982474
> 
> 赞同：3
> 
> 时间：2012-12-21T00:07:32.870
> 
> 标签：ruby-on-rails, ruby, osx-lion, homebrew, rmagick

我正在尝试安装 ImageMagick 和 RMagic，因为它们在 OS X Lion 升级后无法工作。当我跑

```
brew install imagemagick 
```

我得到了错误

```
Error: You must `brew link libpng' before imagemagick can be installed 
```

但是当我`brew link libpng`按照错误消息中的说明运行时，我会得到：

```
Error: You must `brew link libpng' before imagemagick can be installed
Radek-Macs-MacBook-Pro-3:sharelock-staging radek$ brew link libpng
Linking /usr/local/Cellar/libpng/1.5.13... Warning: Could not link libpng. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/libpng/1.5.13/include/pnglibconf.h
/usr/local/include/pnglibconf.h may already exist.
/usr/local/include may not be writable. 
```

如何解决这个问题？我两天都在解决 RMagic 问题，但没有成功……这简直是一场噩梦……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-15T19:22:21.150

我遇到了同样的问题：

```
$ brew unlink jpeg 
$ brew link --overwrite jpeg
$ brew unlink libpng
$ brew link --overwrite libpng 
$ brew install imagemagick 
```

并且 pow 我启动并运行了 imagemagick

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T23:25:23.433

我在 Mountain Lion 中尝试使用 brew 安装 libpng 时发生了这种情况。

```
sudo chown <user>:wheel /usr/local/lib/pkgconfig/ 
```

为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:25:07.223

我以前也有过这样的抱怨`brew`。在我的情况下，它是通过取消链接然后重新链接来解决的；即运行`brew unlink "libname"`，然后`brew link "libname"`，将“libname”替换为链接不正确的软件名称；在你的情况下，“libpng”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T00:20:54.187

检查`/usr/local/include`目录的文件权限：

`$ ls -ld /usr/local/include`

这应该显示您是否具有创建指向该目录的符号链接的正确权限。一个简单的检查方法是：

`$ touch /usr/local/include/mydummytestfile && rm /usr/local/include/mydummytestfile`

如果上一个命令成功，那么您确实可以访问。另一方面，如果您收到错误消息：

`touch: /usr/local/include/mydummytestfile: Permission denied`，那么您将需要`brew`使用以下命令运行该命令`sudo`：

`$ sudo brew link libpng`

您需要提供密码。希望这可以帮助。

# java - 如何在 Java 浏览器中启用 javascript？

> ID：13982475
> 
> 赞同：0
> 
> 时间：2012-12-21T00:07:42.653
> 
> 标签：java, user-interface, jeditorpane

> **可能重复：**
> [jEditorPane 作为 Web 浏览器](https://stackoverflow.com/questions/4153806/jeditorpane-as-a-web-browser)

我有一个相对简单的小型网络浏览器，我希望在浏览器中启用 Javascript。我该怎么做呢？我希望保持浏览器相对简单，但任何改进或建议都将受到欢迎。继承人的代码。提前致谢。

```
public class javamark13 {

static String command ;
static JEditorPane epane;
static JPanel panel;
static JFrame  frame ;
static JTextField field ;
static JLabel  label;
static JButton  button ;
static JScrollBar bar ;

public static void main (String[] args){
    //design of the jpanel  jframe
    frame=new  JFrame ("Lotta Browser ");
    frame.setVisible(true );
    frame.setLocation(1,1);
    frame .setSize(1000,700);
    panel =new JPanel ();
    label=new JLabel("                         Enter a URL");
    label.setBounds(50,5,50,20);
    panel.add(label);
    button=new JButton("Search");
    button.setBounds(870, 0, 110, 25);

    frame .setContentPane(panel);
    panel.setBackground(Color.gray);
    panel .setLayout(null);
    epane=new JEditorPane();
    epane.setEditable(false);
    epane .setBounds(1, 25, panel.getWidth(),panel.getHeight());
    panel.add(epane);
    field=new JTextField ();
    panel.add(button);
    field.setBounds(75,1,panel.getWidth()-191,23);
    panel.add(field);

    //******************************************************

    button.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent arg0) {
            command =field.getText();
            String  http="http://www.";
            String com=".com/";
            command=http +command+com;
            field.setText(command);
            try {
                epane.setPage(new URL(command));
            } catch (MalformedURLException e) {

                e.printStackTrace();
            } catch (IOException e) {

                e.printStackTrace();
            };

        }});

};

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:12:38.450

请参阅此处发布的答案：[https ://stackoverflow.com/a/4154015/177154](https://stackoverflow.com/a/4154015/177154)

简而言之：JEditorPane 对 html 和 css 的支持有限，不支持 javascript 或 applet。

# linux - 什么是文件洞，如何使用？

> ID：13982478
> 
> 赞同：13
> 
> 时间：2012-12-21T00:08:27.060
> 
> 标签：linux, file, filesystems

据我了解，空洞可能作为 inode 的元数据进行维护，但实际磁盘并未填充空零。

1.  有人可以用现实生活中的使用示例来解释文件中的哪些漏洞可能有用吗？

2.  孔与*软*预分配相同吗？从磁盘使用的角度来看，即使没有使用实际的磁盘空间，但该空间也不能用于其他进程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T00:24:45.037

有洞的文件通常被称为稀疏文件。

当程序需要访问广泛的地址（偏移量）但不太可能触及所有潜在块时，它们很有用。虚拟化产品可以使用它来存储虚拟磁盘。假设您配置了一个具有 20 GB 磁盘的虚拟机，但它不会很快充满数据。创建一个 20 GB 的稀疏文件要快得多，该文件在开始时只使用几个磁盘块，然后让 VM 创建文件系统并以低速存储文件。

大型稀疏文件也可以在其某些块为空白（即填充空字节）时减小其大小。执行此操作的稀疏文件感知程序可以，而不是实际写入块，将它们从文件中删除（即在文件中打孔），效果完全相同，因为未分配的块在程序读取时返回零。

稀疏文件与预分配相反，它们被称为精简配置，也可能被称为磁盘过度使用。这允许创建比实际硬件支持更多的“虚拟磁盘空间”，并仅在必要时添加更多磁盘以扩展文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:12:32.763

空洞是“有用的”，因为它们减少了磁盘空间的使用（它们提供了更多可用空间）。它们在任何其他意义上都*不能使用。*当一个包含大块零的稀疏文件时，作为文件系统表示的一部分存在漏洞是“有用的”。

孔与预分配没有任何关系。在文件实际拥有数据之前，预分配使磁盘上的空间可用于文件中的数据。孔是数据的表示*……*特别是仅由零组成的块。

# javascript - YUI 动画一个 div 并淡入另一个

> ID：13982481
> 
> 赞同：0
> 
> 时间：2012-12-21T00:08:42.907
> 
> 标签：javascript, yui

当单击链接“单击此处开始”时，我需要为 div 的“介绍”设置动画，使其高度和宽度为零，这很有效。另一个 div 'theTest' 需要在同一事件中淡入。不幸的是，它不起作用。我是 YUI 的新手，我用[它](http://developer.yahoo.com/yui/examples/animation/basic.html)作为来源。

jsfiddle：http: [//jsfiddle.net/pV8eT/1/](http://jsfiddle.net/pV8eT/1/)

代码：

```
(function() {
    var introductionAttributes = {
        width: { to: 0 },
        height: { to: 0 }
    };
    var theTestAttributes = {
        visible: { to: true },
        width: { to: 500 },
        height: { to: 500 }
    };
    var introductionAnim = new YAHOO.util.Anim('introduction', introductionAttributes);
    var theTestAnim = new YAHOO.util.Anim('theTest', theTestAttributes);

    YAHOO.util.Event.on('startTest', 'click', function() {
        introductionAnim.animate();   //this works
        theTestAnim.animate();        //this doesnt work :(
    });
})(); 
```

如何修改代码以淡入 div "theTest" ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:40:40.530

我的猜测是问题在于`display: none`可见性。但我不知道如何解决它，因为我的 YUI 2 知识有限。

这是我在 YUI3 中的做法：

```
YUI().use('transition', function (Y) {
  var introduction = Y.one('#introduction'),
      test = Y.one('#theTest');

  Y.one('#startTest').on('click', function (e) {
    e.preventDefault();

    introduction.transition({
      width: 0,
      height: 0
    });
    // first set display to block, then change opacity
    // so it fades in
    test.setStyle('display', 'block').transition({
      opacity: 1
    });
  });
}); 
```

我还添加`opacity: 0`了 .css 的 CSS 样式`#theTest`。

这是一个工作示例：http: [//jsbin.com/odujer/1](http://jsbin.com/odujer/1)

# emacs - 在 Emacs 中滚动而不移动点，即使在屏幕外

> ID：13982486
> 
> 赞同：7
> 
> 时间：2012-12-21T00:09:54.107
> 
> 标签：emacs, scroll

我想将 Emacs 配置为在不移动点的情况下滚动缓冲区，即使它不在屏幕上。在我当前的设置中，当我做`(scroll-up 4)`的时间足够长时，我的观点最终将被移动以将其保留在可见缓冲区内。

我想改变它，因为它`idle-highlight`会为我着色一个符号，我想看看它的出现。当我滚动得足够远时，我的点会在它离开屏幕并退出之前移动`idle-highlight`。我怎样才能改变这个？

我正在使用 Emacs 24。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:42:30.293

我不知道如何进行这种滚动。但是一个可选的解决方案是使用`highlight-symbol`包。检查这个：[突出显示符号](http://nschum.de/src/emacs/highlight-symbol/)。如果您想尝试，只需按：`M-x package-install highlight-mode`

1.  这个包也可以做一个空闲的高亮`M-x highlight-symbol-mode`，你可以自定义它的延迟。

2.  如果您想持续突出显示`M-x highlight-symbol-at-point`，那么它将突出显示整个缓冲区点处的符号。`M-x highlight-symbol-remove-all`将清除整个缓冲区中的所有突出显示。

不完全是您问题的解决方案，希望有所帮助:-)

# asp.net - 使用 VB 配置中继器控制

> ID：13982491
> 
> 赞同：0
> 
> 时间：2012-12-21T00:10:42.997
> 
> 标签：asp.net, sql

我正在尝试创建一个中继器控件，但遇到了一个小问题。以下是中继器控制代码：

```
<asp:Repeater ID="movies" runat="server">
    <ItemTemplate>
        <table>
            <tr>
                <th>
                    Movie Title: <%# Container.DataItem("MovieTitle")%>
                </th>
                <th>
                    Genre: <%# Container.DataItem("Genre")%>
                </th>
            </tr>
            <tr>
                <td>
                    <%# Container.DataItem("Synopsis")%>
                </td>
            </tr>
            <tr>
                <td>
                    Staring: <%# Container.DataItem("Starring")%>
                </td>
            </tr>
            <tr>
                <td>
                    Director: <%# Container.DataItem("Director")%>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:Repeater> 
```

控件背后的VB代码是：

```
movie_title = Request.QueryString("id")
    myConn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
                Server.MapPath("../App_Data/MovieBoard.accdb"))
    myConn.Open()
    Dim sqlQuery = "Select movieID From Movies"
    Dim aCmd = New OleDbCommand(sqlQuery, myConn)
    aDataReader = aCmd.ExecuteReader()

    If aDataReader.Read() = True Then
        movieID = aDataReader(0)
    Else
        movieID = "0"
    End If

    query = ("Select MovieTitle, Genre, Synopsis, Starring, Director From Movies")
    cmd = New OleDbCommand(query, myConn)
    dr = cmd.ExecuteReader()
    movies.DataSource = dr
    movies.DataBind() 
```

但是，当我运行代码时，我得到：

```
Cannot use a leading .. to exit above the top directory.

Line 12:         Dim query, movie_title, movieID As String
Line 13:         movie_title = Request.QueryString("id")
Line 14:         myConn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
Line 15:                     Server.MapPath("../App_Data/MovieBoard.accdb"))
Line 16:         myConn.Open() 
```

我认为问题很小，但我似乎无法找到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:19:52.047

看起来像您正在使用的 Server.MapPath。尝试：

```
Server.MapPath("/App_Data/MovieBoard.accdb") 
```

../ 要求上一层的文件夹，错误告诉你它不能再高了。

# android - 带有媒体播放器的android viewpager，偶尔崩溃

> ID：13982492
> 
> 赞同：0
> 
> 时间：2012-12-21T00:10:44.160
> 
> 标签：android, nullpointerexception, media-player, android-viewpager

我制作了一个使用 3 种不同布局的 Viewpager。一个 Listview 索引页，后面是图片和文本的交替页面。XML 都是包含适当的 Imageview、Listview 或 Textview 的 LinearLayouts。文本页面中也可能有一个 MediaPlayer（如果数据库中有对声音的引用）。

我的问题是在页面中来回滚动（快速）时偶尔会发生崩溃。此时我总共只有5页，只有1页有声音。最终会有 21 页，其中 10 页会有声音。我猜有一些不整洁的地方我没有做适当的内存清理？

我应该在哪里寻找原因并解决它？MediaPlayer 似乎没有 onDestroy 方法。分配/释放媒体资源的最佳做法是什么（请记住，Viewpager 似乎在任何给定时刻都在内存中保存 3 页）。

编辑以添加更多信息：带有声音文件的页面是第三个（即在中间），因此它可能与在滑动到最后一页或第一页时从内存中丢失后重新创建视图有关。我不必为了得到错误而播放声音。我想我可能已经把它缩小了一些——在从第 1 页到第 5 页再滑动 41 次之后（这意味着这是第 11 次重新创建页面），它就死了。这个应用程序的另一部分设置相同（只是一个不同的数据库表）并且*也*计入 41，即如果我在应用程序的这一部分滑动 40 次，然后转到应用程序的另一部分，它是致命的 41，它会因相同类型的错误而死。

ps/请客气，我使用 Android 才 3 个月，在此之前对 Java 或 OOP 了解不多。

错误代码是 mp.setOnCompletionListener：

```
public void setSoundUrl(Uri path) throws IOException {
    mp = MediaPlayer.create(getContext(), path);
    mp.setOnCompletionListener(this);
    updateProgressBar();
} 
```

先前的错误是 audioPlayer.setSoundUrl(path);

```
private AudioPlayer setUpSound(LinearLayout ll, Matcher matcher) {
    AudioPlayer audioPlayer = new AudioPlayer(ll.getContext(),attrs);
    int soundRes = getResources().getIdentifier(matcher.group(2).trim(), "raw", "com.example");
    Uri path = Uri.parse("android.resource://com.example/" + soundRes);
    try {
        audioPlayer.setSoundUrl(path);
        audioPlayer.setTitle(matcher.group(3).trim());
    } catch (IOException e) {
        e.printStackTrace();
    }
    return audioPlayer;
} 
```

堆栈跟踪：

```
12-20 15:40:02.330: ERROR/AndroidRuntime(12321): FATAL EXCEPTION: main
    java.lang.NullPointerException
    at com.example.AudioPlayer.setSoundUrl(AudioPlayer.java:78)
    at com.example.ShowBirdText.setUpSound(ShowBirdText.java:127)
    at com.example.ShowBirdText.onCreateView(ShowBirdText.java:73)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
    at android.support.v4.view.ViewPager$3.run(ViewPager.java:237)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3806)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method) 
```

# c# - EntityKey 属性只能在属性的当前值为 null 时设置

> ID：13982493
> 
> 赞同：0
> 
> 时间：2012-12-21T00:10:49.253
> 
> 标签：c#, asp.net-mvc

我正在尝试创建一个新产品，并使用 ADO.NET Entity Framework 将其添加到我的数据库中。该产品具有卖方的外键。我通过从数据库中检索正确的卖方来建立链接，然后执行`p.Seller = seller;`

但是，我不断收到错误消息：

> EntityKey 属性只能在属性当前值为 null 时设置

当我执行该`db.AddToProduct(p);`行时。stackoverflow 上有类似的帖子解决这个问题，但解决方案不起作用。

```
 using (CastleDatabaseEntities db = new CastleDatabaseEntities())
    {
        SellerRepository sp = new SellerRepository();
        Seller seller = sp.GetSeller(username);

        Product p = new Product() { Name = name, 
            Amount = amount, 
            AmountSold = 0, 
            Price = price, 
            MaxSale = maxSales, 
            Description = description,
            Image = "",
            Suspended = false};

        p.Seller = seller;

        db.AddToProduct(p);
        db.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:21:43.437

如果已为该实体加载了 p.Seller，则通常会出现该错误，这没有意义，因为您正在创建新记录。简单的解决方法是：

```
p.SellerKey = seller.SellerKey; 
```

我知道，既然您已经有了记录，那么仅仅查询记录以获取密钥是很痛苦的，但这将是解决问题的好方法。另外，您可以尝试这样做：

```
seller.Products.Add(p); 
```

看看添加反向关系是否有效。

# sql - 更改 PIVOT 函数以添加相应的值而不是 SUM

> ID：13982494
> 
> 赞同：0
> 
> 时间：2012-12-21T00:11:00.837
> 
> 标签：sql, sql-server, database, sql-server-2008, sql-server-2005

从这个查询：

```
DECLARE @cols VARCHAR(1000)
DECLARE @sqlquery VARCHAR(2000)

SELECT  @cols = STUFF(( SELECT distinct  ',' + QuoteName(idIndice)
                        FROM tgpwebged.dbo.sistema_Indexacao as a FOR XML PATH('')
                        ), 1, 1, '')      

SET @sqlquery = 'SELECT * FROM
      (      
        select distinct a.id, b.idIndice  
        from tgpwebged.dbo.sistema_Documentos as a  
        join tgpwebged.dbo.sistema_Indexacao as b on a.id = b.idDocumento 
        join tgpwebged.dbo.sistema_DocType as c on a.idDocType = c.id
        join tgpwebged.dbo.sistema_DocType_Index as d on c.id = d.docTypeId 
        where d.docTypeId = 40      
        and (b.idIndice = 11 AND b.valor = ''11111111'' OR b.idIndice = 12 AND b.valor = ''11111'')       
       ) base
       PIVOT 
       (
        Sum(idIndice) 
        FOR [idIndice] IN (' + @cols + ')
        ) AS finalpivot' 

EXECUTE ( @sqlquery ) 
```

我得到这个结果：

```
id  10      11     12   13      9
13  NULL    11     12   NULL    NULL
14  NULL    11     12   NULL    NULL
16  NULL    NULL   12   NULL    NULL 
```

我不想在数据透视中使用 Sum(idIndice)，而是想找到一种方法来插入与其对应的值 idIndex。

这些值存储在 a.value 的 sabe 表中，这是一种简单的方法吗？无处可寻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:20:03.397

如果每个 idIndice 都有一个 a.value，那么您可以简单地使用 MIN(a.value) 或 MAX(a.value) 而不是 SUM(idIndice)

# javascript - Google Chrome - JS 和 CSS 问题

> ID：13982497
> 
> 赞同：0
> 
> 时间：2012-12-21T00:11:14.083
> 
> 标签：javascript, jquery, css

这是网站[http://okcpirot.rs/prijava](http://okcpirot.rs/prijava)的地址首先有JS问题：

JS 在除 Chrome 之外的所有浏览器中都可以使用，我不知道为什么。在这里我得到错误：

```
Uncaught TypeError: Object [object Object] has no method 'on prijava:142' 
```

第二个问题是 CSS。右上角的箭头应该在前面（用于打开和关闭登录区域）。除 Chrome 之外的所有浏览器都是这种情况。再一次，我没有线索。

这部分的 CSS 代码：

```
#top_area {background: rgba(0,0,0,.8); padding: 10px 0; position: fixed;width: 100%; top:0; z-index: 1000}
#login{float: right;}
#login {margin-right: 40px}
#login label {color:#F2F2F2;display: block; float: left; margin: 0 10px}
#login input {float: left; border: none;border-top: 1px solid #555; border-bottom: 1px solid #333; padding: 2px 5px;}
#login input:focus, .lozinka input {box-shadow: inset 0px 0px 2px rgba(0,0,0,.4)}
#login input[type=submit] {margin-left: 10px; }
#login input[type=submit]:hover, .lozinka input[type=submit]:hover  {box-shadow: inset 0px 0px 3px rgba(0,0,0,.5)}
.kreiraj_nalog{width: 16px;height: 16px;float: left;background: url(../img/resursi/kreiraj_novi_nalog.png) no-repeat;padding-right: 5px;}
.zaboravljena_lozinka{width: 16px;height: 16px;float: left;background: url(../img/resursi/zaboravljena_lozinka.png) no-repeat;padding-right: 5px;}
.top_area_links {float: right;clear: both;color:#F2F2F2 !important;padding-top: 5px; }
.top_area_links a {float: right; color:#F2F2F2 !important; margin-right: 5px;}

.korisnik{float: right;margin-right: 40px;padding: 11px;}
.korisnik p, .korisnik a {float: left;clear: none; color: #f2f2f2; margin: 0 5px;}
.korisnik a:hover {color: #f2f2f2;text-decoration: underline;}

.top_area_maska {position: fixed;width: 100%; top:0;}
.zatvori_top{float: right;width: 32px;height: 32px;background: url(../img/resursi/zatvori_otvori_top.png) no-repeat;display: inline-block;margin-top: 5px;position: relative;z-index: 100000;}
.zatvori_top:hover{background: url(../img/resursi/zatvori_otvori_top.png)  -32px 0 no-repeat;cursor: pointer;}
.otvori_top{background-position: 0px -32px }
.otvori_top:hover{background-position: -32px -32px }
.top_area_links a:hover {text-decoration: underline;} 
```

HTML部分：

```
<div class="top_area_maska clearfix">
    <div class="container_12 clearfix">
        <div class="zatvori_top <?php if($this->session->userdata('toggle_top') == TRUE )  echo 'otvori_top'?>"></div>
    </div>
</div>
<div id="top_area" class="clearfix" <?php if($this->session->userdata('toggle_top') == TRUE )  echo 'style="display: none"'?>>
    <div class="container_12">
        <?php
            if($this->session->userdata('is_logged_in') == FALSE) :
            $attributes = array('id' => 'login', 'class' => 'clearfix');
            $hidden = array('current_page' => current_url());
            echo form_open('korisnik/validacija', $attributes, $hidden);
         ?>
         <label for="email">Email</label>
         <input type="email" name="email" id="email" placeholder="Email" autocomplete='off' />
         <label for="pass">Lozinka</label>
         <input type="password" name="pass" id="pass" placeholder="Lozinka" autocomplete='off' />
         <input role=prijava type="submit" name="submit" value="Prijavi Se">
         <div class="top_area_links clearfix">
             <a class=""href="<?php echo base_url('prijava') ?>" role=nalog><span class="kreiraj_nalog"></span>Kreiraj Nalog</a>
             <a href="<?php echo base_url('prijava') ?>" role=lozinka><span class="zaboravljena_lozinka"></span> Zaboravljena Lozinka | </a>
         </div>
         <?php echo form_close();
            else :
          ?>
        <div class="korisnik">
            <p><?php echo $this->session->userdata('full_name') ?> | </p>
            <a href="<?php echo base_url() ?>korisnik/nalog/<?php echo str_replace(' ', '_', $this->session->userdata('full_name')) ?>/<?php echo $this->session->userdata('id_user') ?>">Moj Nalog | </a>
            <a href="<?php echo base_url() ?>korisnik/odjava">Odjavi se</a>
        </div>
        <?php endif; ?>
    </div>
</div> 
```

是某种黑魔法在起作用还是 Chrome 快疯了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:18:00.367

在 Chrome 中，它显示您的变量命名`name`实际上是一个包含“[object Object]”的字符串。它在设置为 .find("#ime") 之前已经具有此值。这似乎是一个全球范围的问题。我建议将变量的名称更改为不太常见的名称。

# windows-runtime - 从文件夹选择器访问“程序文件”

> ID：13982502
> 
> 赞同：0
> 
> 时间：2012-12-21T00:11:44.383
> 
> 标签：windows-runtime, windows-store-apps

有没有办法让用户从他们的 Program Files 文件夹中授予 Windows Store Application*只读权限？*

当我使用`FolderPicker`该类时，“程序文件”和“程序文件（x86）”文件夹是隐藏的。我相信这是因为这些文件夹是“系统”文件夹，所以我真的想我的问题也可以表述为：

可以`FolderPicker`显示系统文件夹吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:26:22.823

这是设计使然，Windows 商店应用程序是非常沙盒和安全的。为什么要访问程序文件文件夹？对于 Windows 商店应用程序来说，这是一个奇怪的要求。

编辑：有一种方法可以实现这一点。Windows 8 应用 Metro Commander 可以做到。

您需要做的是让用户选择“C”驱动器作为文件夹（使用文件夹 pciker），然后您可以通过编程方式访问它。

# html - 选择图像或视频

> ID：13982504
> 
> 赞同：0
> 
> 时间：2012-12-21T00:12:02.963
> 
> 标签：html, css, image, video

我试图弄清楚如何在 html 中显示图像或视频。澄清一下，我想显示视频，但如果视频不存在或找不到文件，我希望显示默认图片。基本上是一个图像文件，如果视频不存在或不存在则显示。这甚至可能吗？我一直试图弄清楚这一点。没运气。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:15:56.557

查看这段代码，它提供 HTML5 视频回退到 Flash 和 Flash 回退到简单图像，完全不涉及 javascript！

```
<!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise -->
<!-- warning: playback does not work on iOS3 if you include the poster attribute! fixed in iOS4.0 -->
<video width="100%" height="200px" controls>

    <!-- MP4 must be first for iPad! -->
    <source src="__VIDEO__.MP4" type="video/mp4" /><!-- Safari / iOS video    -->
    <source src="__VIDEO__.OGV" type="video/ogg" /><!-- Firefox / Opera / Chrome10 -->

    <!-- fallback to Flash: -->
    <object width="640" height="360" type="application/x-shockwave-flash" data="__FLASH__.SWF">

         <!-- Firefox uses the `data` attribute above, IE/Safari uses the param below -->
         <param name="movie" value="__FLASH__.SWF" />
         <param name="flashvars" value="controlbar=over&amp;image=__POSTER__.JPG&amp;file=__VIDEO__.MP4" />

         <!-- fallback image. note the title field below, put the title of the video there -->
         <img src="__VIDEO__.JPG" width="640" height="360" alt="__TITLE__"
         title="No video playback capabilities, please download the video below" />
    </object>
</video>

<!-- you *must* offer a download link as they may be able to play the file locally. customise this bit all you want -->
<p>    
     <strong>Download Video:</strong>
     Closed Format: <a href="__VIDEO__.MP4">"MP4"</a>
     Open Format:   <a href="__VIDEO__.OGV">"Ogg"</a>
</p>​ 
```

# java - 使用 JDOM 解析来自文件的 SOAP 响应

> ID：13982505
> 
> 赞同：0
> 
> 时间：2012-12-21T00:12:07.850
> 
> 标签：java, xml, soap, jdom

我正在尝试从文件中解析 SOAP 响应。这是 out.xml

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
    <response xmlns="http://tempuri.org/">
    <result>
    <config>...</config>
    <config>...</config>
    <config>...</config>
    </result>
    </response>
    </soap:Body>
    </soap:Envelope> 
```

这是 jdom 的代码：

```
SAXBuilder builder = new SAXBuilder();
try {

   Document document = builder.build( new File("out.xml"));
   Element root = document.getRootElement();
   Namespace ns = Namespace.getNamespace("http://tempuri.org/");
   List r = root.getChildren("config", ns);
   System.out.println(r.size());

} 
```

为什么会输出 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:19:16.473

JDOM 的`getChildren`方法是这样记录的（强调我的）：

> **这将返回直接嵌套在该元素内（一层深**）的所有子元素的列表，作为 Element 对象。

[在这里](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Element.html#getChildren%28%29)查看原文。

您对 的调用`getRootElement`将您置于`soap:Envelope`没有任何子`config`节点的 。

要解决此问题，您可以：

1.  `getChildren`多次调用以浏览`soap:Body`,`response`和`result`元素
2.  调用`getDescendants`以获取遍历整个层次结构而不仅仅是一个级别的迭代**器**

# php - 如果 Col=1，提前 1 周获取单次约会？

> ID：13982507
> 
> 赞同：0
> 
> 时间：2012-12-21T00:12:25.283
> 
> 标签：php, mysql

如果我的数据库中的列设置为 1，我正在尝试获取单个日期

这是我的结构：

```
CREATE TABLE IF NOT EXISTS `appointments` (
  `ID` int(255) NOT NULL DEFAULT '0',
  `Appointment` varchar(255) NOT NULL,
  `Date` date NOT NULL,
  `Location` text NOT NULL,
  `Reoccour` int(1) NOT NULL DEFAULT '0',
  `howfar` int(255) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是我的代码：

```
$Query = mysql_query("SELECT * FROM appointments");

    while ($Rows = mysql_fetch_array($Query))
    {
        echo "Appointment: {$Rows['Appointment']} <br>";
        echo "Date: {$Rows['Date']} <br>";
        echo "location: {$Rows['Location']} <br>"; 
        if ($Rows['Reoccour'] === 1)
        {
            $NextDate = date('o-m-d', strtotime("+{$Rows['howfar']}"));
            echo "Next Date: {$NextDate}";
        }

    } 
```

这似乎没有添加下一个日期并在我的回声中显示。

我究竟做错了什么？（除了使用`mysql_*`我不知道如何在 PDO 中执行此任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:36:16.207

```
$Query = mysql_query("SELECT * FROM appointments");

    while ($Rows = mysql_fetch_array($Query))
    {
        echo "Appointment: {$Rows['Appointment']} <br>";
        echo "Date: {$Rows['Date']} <br>";
        if ($Rows['Reoccour'] == 0)
        {   
        echo "location: {$Rows['Location']} <br><br>"; 
        }
        if ($Rows['Reoccour'] == 1)
        {
            $NextDate = date('o-m-d', strtotime("+{$Rows['howfar']} weeks"));
            echo "location: {$Rows['Location']} <br>"; 
            echo "Next Date: {$NextDate} <br><br>";
        }

    } 
```

你有两个问题。

1）您正在寻找与您的平等的严格比较，我将其更改`==`为`===`

2）您的第二个问题是您的`strtotime`正确用法将添加`weeks`到您的查询中。示例：

`echo date('o-m-d', strtotime("+3 weeks"));`

所以你的正确语法是： `echo date('o-m-d', strtotime("+{$Rows['howfar']} weeks)); // Notice The Additions of "weeks"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:22:26.707

吉姆的回答是正确的。但是，如果您不想使用 PDO，则应该认真考虑使用 mysqli_。mysql_ 已被弃用并且存在一些安全问题。但是，切换到 mysqli_ 相当轻松，它添加了各种新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:16:32.197

`mysql_fetch_array`将返回一个字符串数组。支票：

```
if ($Rows['Reoccour'] === 1){ 
```

`$Rows['Reoccour']`仅当既是 int 又是 1时才会通过（即为`"1" === 1`假。

尝试转换为 int 或使用`==`

# excel - 在excel VBA中转储数组垂直方向

> ID：13982511
> 
> 赞同：2
> 
> 时间：2012-12-21T00:12:33.623
> 
> 标签：excel, vba

当我试图将数组转储`Dim A (1 To 3) As String`到单元格的垂直范围时`A1:A3`，数组的第一个单元格会在所有范围内重复。

例如，假设 `A(1) = "a" , A(2) = "b" , A(3) = "c"`结果`a`在所有`A1:A3`范围内。

代码是`Range("A1:A3").Value = A`

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T00:27:41.530

```
Sub Tester()

Dim a(1 To 3)

    a(1) = "a"
    a(2) = "b"
    a(3) = "c"

    Range("A1:A3").Value = a  'all "a"

    Range("A1:C1").Value = a  'works, because left-to-right is the default

    Range("A1:A3").Value = Application.Transpose(a) 'works

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T03:26:44.977

我通常的做法是将数组重新设置为与范围对象相同的维度

对于 Range "A1:A3" 是一个 3*1 二维数组

```
Sub testing()
    Dim a()
    ' a(1 to rowCount, 1 to columnCount)
    ReDim a(1 To 3, 1 To 1)
    a(1, 1) = "A"
    a(2, 1) = "B"
    a(3, 1) = "C"
    Range("A1:A3").Value = a
End Sub 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-11-13T07:48:17.390

此函数将一维数组转置为“垂直”二维数组，然后可以将其分配给`Range.Value`. `Application.Transpose`不适合大数组（我的 Excel 2013 x64 上的 14464 个单元格）。

```
Private Function array_as_2d(arr)
    'Convert 1D array into 2D array
    Dim tmp
    tmp = Array()
    lb = LBound(tmp)
    ReDim tmp(LBound(arr) To UBound(arr), lb)
    For i = LBound(arr) To UBound(arr)
        tmp(i, lb) = arr(i)
    Next i
    array_as_2d = tmp
End Function

Sub test_assign()
    Dim a(0 To 2)
    a(0) = 7
    a(1) = 8
    a(2) = 9
    Range("A1:A3") = array_as_2d(a)
    Range("B1:B3") = array_as_2d(Array(1, 2, 3))
End Sub 
```

# jquery - 在网格中编辑行的模态表单（ASP.NET MVC）

> ID：13982514
> 
> 赞同：1
> 
> 时间：2012-12-21T00:12:48.113
> 
> 标签：jquery, asp.net-mvc, jquery-ui

很多天以来，我一直在尝试在 flexigrid 中实现模态对话框编辑，但没有成功。

我从一个非常简单的例子开始：

[http://mvc4beginner.com/Sample-Code/Insert-Update-Delete/Asp-.Net-MVC-Ajax-Insert-Update-Delete-Using-Flexigrid.html](http://mvc4beginner.com/Sample-Code/Insert-Update-Delete/Asp-.Net-MVC-Ajax-Insert-Update-Delete-Using-Flexigrid.html)

我对这个示例进行了很多扩展，但遇到了障碍，我不知道如何实现所需的功能。

我实现了以下jquery函数：

```
    函数 RunModalDialog（标题，网址）
    {
        $("#sform").dialog({
            自动打开：假，
            显示：“盲”，
            closeOnEscape：真，
            可调整大小：真，
            宽度：1200，
            身高：750，
            最小高度：600，
            最小宽度：950
        });
        如果（标题）
            $("#sform").dialog("option", "title", title);

        如果（网址）
            $("#sform").load(url).dialog("open");
        别的
          $("#sform").dialog("open");

```

我从添加按钮（不带 url）和编辑按钮（带 url）调用它。

Add 可以正常工作（虽然我还没有实现实际的保存和网格刷新），但我不能让它在 Edit 上工作。

这是我的主要视图代码

```
@model CardNumbers.Objects.Client

@{
    ViewBag.Title = "Clients";
}

@section scripts {
    <script src="@Url.Content("~/Scripts/Clients.js")" type="text/javascript" ></script>
}

<form id="frmClientsSearch">
    <label for="clientNo">Client No: </label>
    <input type="number" name="searchClientNo" class="numericOnly" /><br />
    <label for="clientName">Client Name: </label>
    <input type="text" size="25" value="Please enter the search value" class="SelectOnEntry"
        name="searchClientName" />

    <input type="button" id="btnClientsSearch" value="Find / Refresh" />
</form>
<div style="padding-left: 150px; padding-top: 50px; padding-bottom: 50px;" id="ClientsResults">
    <table id="flexClients" style="display: none">
    </table>
</div>

<div id="editor" style ="visibility :hidden ">
      @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "sform", title = "Client Info" }))
     { 
        @Html.Partial("_ClientForm", Model)   
      }      
</div> 
```

并且客户端控制器的 Edit 方法返回一个视图，它是

```
    @model CardNumbers.Objects.Client

    @{
        ViewBag.Title = "编辑客户端";
        布局 = "~/Views/Shared/_PopupLayout.cshtml";
    }

    @Html.Partial("_ClientForm", 模型)

    @section 脚本 {
        @Scripts.Render("~/bundles/jqueryval")

    }

```

I originally had the BeginForm inside the _ClientForm and I could see the form, but the x (close) and Resize didn't work. I now tried moving the line that starts the form outside, but now the behavior is even worse.

Can you tell me how this is supposed to work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:28:24.700

Two things I can think of doing is

1.  Check that the URL is valid,

2.  Call dialog once the div has been filled up

    `$("#sform").load(url).dialog("open");`

becomes

```
 $("#sform").load(url, function(){
       $("#sform").dialog("open");
    }); 
```

If a "complete" callback is provided, it is executed after post-processing and HTML insertion has been performed.

NOTE THIS WAS A PROPOSED ANSWER TO THE QUESTION BEFORE IT WAS MODIFIED

# mysql - 第一次尝试将MYSQL密码设置为root，但我收到一条错误消息

> ID：13982516
> 
> 赞同：1
> 
> 时间：2012-12-21T00:12:49.500
> 
> 标签：mysql

我第一次尝试将 MYSQL 的密码设置为 root，这就是我得到的.. 为什么会发生这种情况？您的帮助将不胜感激

```
[root@sandy /]# mysqladmin -u root password NEWPASSWORD
mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: NO)' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:16:55.370

你跑`mysql_secure_installation`了吗？这是准备 MySQL 环境所必需的（例如，删除匿名用户访问、测试数据库和**设置 root 密码**）。

# visual-studio - 为什么打开 Visual Studio 时智能感知和代码建议停止工作？

> ID：13982526
> 
> 赞同：158
> 
> 时间：2012-12-21T00:13:48.303
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-2013, visual-studio-2015, intellisense

[我在 Microsoft Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)中遇到了 Intellisense 问题。我将在一个项目中工作，编辑代码和诸如此类的东西（一段时间后，从 5 分钟到一个多小时不等），突然之间，没有更多的代码建议或智能感知。两者似乎同时完全停止工作。

我尝试过的唯一解决方案是重置所有设置，完全关闭 Visual Studio 并再次重新打开项目。有没有更好的解决方案或更新可以解决这个问题？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2015-01-16T19:36:17.327

我应该注意，自从升级我的 RAM 以来我没有遇到过这个问题。我无法确认它是否相关，但当我有 2-4GB RAM 时问题很普遍。自从去 8 和 16GB 以来没有问题。

如果似乎只有一个文件/窗口受到影响，请关闭并重新打开该文件。如果这不起作用，请尝试以下操作。

在 Visual Studio 中：

1.  单击工具->选项->文本编辑器->所有语言->常规
2.  取消选中“自动列出成员”
3.  取消勾选“参数信息”
4.  选中“自动列出成员”（是的，您刚刚取消选中的那个）
5.  检查“参数信息”（再次，您刚刚取消选中的那个）
6.  点击确定

如果这不起作用，请尝试以下几个步骤：

1.  关闭所有 VS 文档并重新打开
2.  如果仍然无法正常工作，请关闭/重新打开解决方案
3.  如果仍然无法正常工作，请重新启动 VS。

**对于 C++ 项目：**
MSDN 有一些事情可以尝试：[MSDN 建议](https://msdn.microsoft.com/en-us/library/ks1ka3t6%28v=vs.90%29.aspx?f=255&MSPPError=-2147217396)

损坏的`.ncb`文件似乎很可能。

来自 MSDN：

1.  关闭解决方案。
2.  删除`.ncb`文件。
3.  重新打开解决方案。（这会创建一个新`.ncb`文件。）

笔记：

*   在 VS 2013/2015 中测试

记录可能的原因：

*   在源页面中复制/粘贴控件。我发现我的`designer.vb`文件也没有从这里更新。
*   从导致错误的另一个页面复制/粘贴代码，因为复制的代码引用了不在我粘贴到的页面上的控件。
*   C++ 项目有损坏的`.ncb`文件

（如果您发现导致此问题的行为，请添加到评论中。）

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-07-17T12:26:24.147

对我**有用的是删除动态构建的 .suo 文件（解决方案用户选项）**，位于与解决方案文件相同路径的 .vs （隐藏）目录中。

我有时会遇到这个问题，它在不同的项目/解决方案中，但从不广泛。新项目总是运行良好。

运行 VS2015 专业版更新 -2-

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-28T12:28:34.437

我有同样的问题; Intellisense 会随机停止在某些文件中显示，但不会在其他文件中显示。我只是再次发生在我身上。点击`Ctrl`+`Space`不会显示任何内容`Form1`，切换到`Form2`或任何其他类将按预期弹出列表。重新启动 Visual Studio 通常可以解决问题，尽管这样一个基本功能被破坏是非常烦人和荒谬的......

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-21T08:40:33.103

我花了很多时间研究同样的问题。一些解决方案将此错误与一些引用的程序集相关联。其他人这么说，`Microsoft.Windows.Design.Extension.dll`应该`.Interactivity.dll`在项目的引用中。但是这些解决方案都不适合我。

我认为这是 Visual Studio 2012 中的一个错误，微软必须修复它。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-07-06T02:09:19.907

对我有用的是禁用然后重新启用*Resharper*

去
`Tools -> Options-> Resharper ->General`

单击
`Suspend`-> 这将禁用重新锐化器

然后检查您的 Intellisense 是否正常工作。就我而言，确实如此，然后我*恢复*了*Resharper*。

如果这不起作用，您可能需要转到
`Resharper -> Options-> Environment -> Intellisense -> General`

并将
智能感知更改为`Visual Studio`

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-12-22T08:12:12.963

我找到了一个 100% 对我有用的解决方案（我没有安装 ReSharper）。按下`Refresh`使`Solution Explorer`IntelliSense 回来。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-12-21T18:19:17.733

所有这些步骤都对我不起作用。奇怪的是，我注意到 Intellisense 正在为 Visual Studio 2015 中的另一种解决方案工作，但不是针对特定的解决方案。

我找到并删除了 .suo 文件并重新启动了 Visual Studio。那为我修好了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-13T12:30:24.377

我在 Visual Studio 2015 + C# 中遇到了这个问题。

过了一会儿，我这样解决了：

1）去：工具->选项->文本编辑器-> C#

2) 选中“自动列出成员”和“启用虚拟空间”这些选项。

可能某些扩展（例如 R#）会禁用这些选项以使用它们的工具。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-22T16:03:11.573

我在 C++ 上的 Visual Studio 2010 上遇到了同样的问题，我通过工具 -> 选项 -> 文本编辑器 -> C/C++ -> 高级 -> 禁用数据库 -> False，Ok 超越了它；关闭VS；打开VS，瞧。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-01T14:47:13.213

使用 Visual Studio > 2015 我删除了 .suo 文件。（通过文件资源管理器在您的项目中搜索）

重新启动视觉工作室，你很高兴。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-21T06:49:33.823

我在使用 Visual Studio 2015 Preview 时遇到了同样的问题。我已经关闭了相应的文件并重新打开它。这为我解决了问题:)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-09-13T15:37:22.453

就我而言，我通过右键单击 =>“包含在项目中”将 .ascx.cs 添加到项目中，但项目将其设置为“内容”而不是“编译”。一旦我将它设置为“编译”，智能感知又开始工作了。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-31T20:18:40.850

## MS Visual Studio 2017 Pro，C++ 项目

这个问题的好答案太多了。这*对我有用：*

* * *

IntelliSense**仅**在我通过双击解决方案文件加载项目时才起作用。

不幸的是，我尝试了上述所有答案，但没有运气。Dll，设置，依赖项......你的名字。很糟糕，你必须经历所有这些才能自动完成......错过我的 Vim 配置......

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-13T17:14:46.843

我有 VS2012 更新 4，问题是间歇性的，但是一旦它出现在正在编辑的特定页面上，它就会一直存在。一种解决方案是简单地关闭页面并重新编辑它。

这是一些尝试重新启动它的 KBD 快捷方式，但不知道它们是否有效。

[用于显示智能感知的 Visual Studio 键盘快捷键](https://stackoverflow.com/questions/3640544/visual-studio-keyboard-shortcut-to-display-intellisense)

这些解决方案都不适合我，顺便说一句，我正在使用 C#...

我认为这是另一个 IS 错误....过去有很多问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-15T22:49:34.550

@TonyL 的回答对我不起作用，但我注意到 Intellisense`foo`在我更改类中的方法签名后停止在类中工作`bar`。

关闭并重新打开`foo.cs`文件修复了它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-28T01:35:07.727

刚刚帮助我的一件事是

1.  删除所有存在的项目文件。我的项目有 10 个文件夹，30 多个文件。
2.  重新创建项目。

这大约需要 5 分钟 - 但随着智能感知实际开始工作，节省了大量时间。

需要注意的一件事是内存使用量（VS 2013 Ultimate 的右上角）下降了大约 40%。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-12-25T14:27:17.080

尝试安装更新 1 包，[链接](http://download.microsoft.com/download/8/A/5/8A5083CE-CD1C-4294-B094-A6CF8F95AD94/vsupdate_KB2707250.exe)。当我安装更新时，我遇到了同样的问题并解决了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-08-01T19:15:28.010

我的解决方案（我使用的是 perforce）是加载整个解决方案而不是单个文件。

最初我通过在 perforce 中单击它来加载文件

解决方案关闭VS（关闭单个文件）通过启动解决方案文件而不是单个文件重新打开

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-08T23:35:45.780

如果有人仍然遇到此问题，只需关闭解决方案，然后重新打开它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-01-14T17:27:11.497

对于python，请尝试单击底部状态栏左侧的“Python XX”按钮并将其更改为不同的值。

这是唯一对我有用的东西。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-10-13T15:11:49.583

如果您使用的是母版页，则在内容页中使用该母版页创建一个空白母版页。如果这解决了问题，则意味着您的原始母版页有问题。将您的原始代码逐步移植到新的母版页，并在每次移植后测试智能感知是否正常工作。这个技巧解决了我的智能感知问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-06-09T10:29:03.110

当一些依赖程序集被更改但被另一个 Visual Studio 实例（2015）锁定时，我遇到了这个问题。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-08-25T13:20:16.100

我遇到了同样的问题，结果是我从存储库新下载的解决方案没有自动下载 nuget 包，因此智能感知不可用，因为没有可用的显示正确建议所需的包。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-12-17T09:04:34.020

我只在一个文件中遇到了问题。在创建新类并对其进行处理之后，它还没有被添加到我的项目范围内。因此，当我在第二天关闭并重新打开我的解决方案时，该文件不在项目范围内。

将现有项目添加到项目范围为我修复了它。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-02-03T10:22:38.150

在我的情况下，Intellisense 无法识别导入的命名空间，尽管我可以成功编译项目。解决方案是取消选中项目引用选项卡上的导入命名空间，保存项目，再次检查并再次保存项目。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-01-04T21:34:16.343

就我而言，一开始我只是不注意，没有看到我的解决方案中的 30 多个项目中的一个说“（加载失败）”，即使它的一个文件仍然加载到编辑器中，但没有智能感知。重新加载项目就可以了。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-08-13T08:22:35.490

只要 Visual Studio 存在，我就已经处理了这个问题。是的，即使在当前版本中它仍然失败（尤其是对于大型项目。）

我想分享我的朋友和我为解决这个完全相同的问题而编写的小型免费工具。您基本上关闭了您的解决方案，将其文件夹拖到此工具的图标中，它将为您重置所有中间文件。（如果你想知道哪些，请阅读里面的文本手册。它不仅仅是一个文件。）

我用它来清理我所有的 VS 项目。所以[给你](https://dennisbabkin.com/utilities/#VSSolutionCleaner)：

[![在此处输入图像描述](../Images/c6c82638e30c0584d66575f5fa22dd8f.png)](https://i.stack.imgur.com/pPmk9.png)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-07-24T08:10:32.340

# 视觉工作室 2019

唯一对我有用：转到工具 -> 选项 -> 文本编辑器 -> C# -> Intellisense

并关闭

[![在此处输入图像描述](../Images/a3662b205828d24de29e11dd4476fa7f.png)](https://i.stack.imgur.com/2ARJ7.png)

事实证明，我太渴望尝试 VS 中的所有新功能 :) 不过，它只在一个解决方案中被破坏了。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-12-01T02:14:48.350

我目前正在 youtube 上观看 MVA python 教程，并注意到我的智能也消失了，在他们解释原因后不久，

与此类似的东西（请原谅我缺乏适当的编码词汇，我是编程新手，但我找到了解决方案）

答案：“Visual Studio 不能总是猜出您尝试输入的内容 - 因此它并不总是意识到它需要给您提示，例如，如果您尝试在变量中使用字符串并且需要智能感知来给您对于该字符串内容的选项，您有时必须告诉 Visual Studio 该变量实际上是一个字符串。

例子：

```
name = ' ' # insert this line to tell visual studio that your variable is a string.
name = input('whats your name? \n') 
name = name.upper() #then when you type name.u.... it will give you intellisense 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-07-31T15:56:22.003

错误列表中的**build + intellisense**仅在我的 Web 项目上停止工作。最终对我有用的修复是删除 .csproj.user 文件。当我打开解决方案时，Visual Studio 重新创建了该文件，并且一切都按预期工作。

然后我把新文件删了，把旧文件放回去，还是修好了，所以¯\ *(ツ)* /¯

# jquery - 在第二次单击时删除添加的 json 请求

> ID：13982527
> 
> 赞同：0
> 
> 时间：2012-12-21T00:13:52.960
> 
> 标签：jquery, ajax

我有一个基于 API 的论坛页面。单击图像时，它会加载主题的正文。

这是我用来在主题标题下方添加正文的代码：

```
$('img').click(function() {
    tid = $(this).parent().attr('id');
    $.ajax({
        url: 'ajax.php?tid=' + tid,
        success: function(data) {
            $('tr#' + tid).after("<tr><td colspan=\"7\">" + data + "</td></tr>");
        }
    });
}); 
```

如何在第二次点击时再次删除它？现在它只是在 TR 下面添加了另一个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:22:40.397

您可以为插入的元素添加一个 id，并检查它是否存在

```
$('img').click(function() {
    var row = $(this).parent(), 
        tid = row.attr('id'),
        bodyId = tid+'-body', // new id based on tid
        body = $('#'+bodyId);

    if (body.length){ // if topic body exists
        body.remove(); // remove it
    } else { // otherwise add it
        $.ajax({
            url: 'ajax.php?tid=' + tid,
            success: function(data) {
                row.after('<tr id="' + bodyId + '"><td colspan="7">' + data + '</td></tr>');
           }
    });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:21:39.200

尝试这个：

```
$('img').click(function() {
    var $this = $(this),
        $thisParentTr = $this.closest('tr'),
        tid = $thisParentTr.attr('id');
    if ($thisParentTr.next().hasClass('topic-added')) {
        $thisParentTr.next().remove();
    } else {
        $.ajax({
            url: 'ajax.php?tid=' + tid,
            success: function(data) {
                $thisParentTr.after("<tr class=\"topic-added\"><td colspan=\"7\">" + data + "</td></tr>");
            }
        });
    }
});​ 
```

但是，我建议在调用时隐藏并显示以保存其他请求，以防他们再次单击它。

**加法**- 这是一个[jsFiddle](http://jsfiddle.net/UF5Jt/1/)，我建议检查是否有新的 tr，如果没有得到新的；如果是且可见则隐藏，如果是且隐藏则显示。您可能会做一些整理工作，但我建议您这样做，而不是让人们通过单击图像一遍又一遍地进行 ajax 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:23:45.910

首先，我不建议在按 id 选择时使用 after，因为 after 是一个迭代器，而您真正想要的是使用 html() 设置 innerHTML 您可以在它周围设置某种条件，最简单的可能是一个标志：

```
 $('img').click(function() {
         flag = false;
         oldHTML = "";
         tid = $(this).parent().attr('id');
         $.ajax({
              url: 'ajax.php?tid=' + tid,
              success: function(data) {
                  if !(flag){
                      oldHTML = $('tr#' + tid).html();
                      $('tr#' + tid).html(oldHTML+"<tr><td colspan=\"7\">" + data + "</td></tr>");
                      flag = true;
                  } else {
                      flag = false;
                      $('tr#' + tid).html(oldHTML);
                  }
              }
         });
     }); 
```

更好的方法是使用以下内容显式检查下一个 tr 的内容：

```
 if$('tr#' + tid).html().indexOf(data) != -1{ 
```

或者交替地预写该行，然后使用 .show() 和 .hide() 来切换其显示。

# php - regex_match 的表单验证规则

> ID：13982529
> 
> 赞同：7
> 
> 时间：2012-12-21T00:13:59.043
> 
> 标签：php, codeigniter

我试图弄清楚我在这个验证规则上做错了什么，因为它说这个错误。

验证规则：

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|regex_match[a-z0-9]'); 
```

错误：

> 严重性：警告
> 消息：preg_match() [function.preg-match]：分隔符不能是字母数字或反斜杠

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T00:20:33.617

首先，您需要修复您的模式。你现在的模式是`a-z0-9`

它需要有一个分隔符来包围它，例如`/a-z0-9/`（如果您在使用反斜杠分隔符的 Codeigniter 中遇到问题，您还有许多其他选择：请参阅[PCRE 分隔符的手册页](http://php.net/manual/en/regexp.reference.delimiters.php)）

现在您有了一个模式，该模式与其中某个位置的字符串相匹配`a-z0-9`。请注意，如果您尝试将其作为字符类进行匹配，则需要再次将其括在方括号中以使其如此，所以`/[a-z0-9]/`

现在我将假设您实际上想要检查整个字符串是否为（小写）字母数字，而不仅仅是它具有匹配的字符。在这种情况下，您需要一个前锚、要匹配的字符类、一个重复修饰符（我假设您不想匹配一个空字符串并使其成为一个或多个），然后是一个用于指定匹配的锚必须延伸到最后：

`/^[a-z0-9]+$/`

您甚至可以通过用大括号代替加号并提供最小值、最大值来设置最小长度（留下最大值以使其长度超过最小值）......例如`/^[a-z0-9]{3,}$`

所以你的第三个参数*最终*看起来像：

`'trim|required|xss_clean|regex_match[/^[a-z0-9]+$/]'`

*除了*这实际上显然不会在 codeigniter 中工作（截至 2011 年 3 月，无论如何都是这种情况），因为它如何处理验证规则中的括号，所以你需要使用回调（[见这里](http://ellislab.com/forums/viewthread/185601/)）。

# 使用[回调](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)：

您可以在控制器（或其他适当范围）中放置如下函数：

```
public function _usernameRegex($userName) {
  if (preg_match('/^[a-z0-9]+$/', $userName ) ) 
  {
    return TRUE;
  } 
  else 
  {
    return FALSE;
  }
} 
```

然后，您设置规则以调用您的函数：

```
set_rules('username', 'Username', 'trim|required|xss_clean|callback__usernameRegex'); 
```

注意：如果您在控制器中创建回调函数，该函数以前导下划线命名，以防止 url 访问。有另一种方法可以通过创建一个扩展`CI_Form_validation`类的类来做到这一点，但这似乎是一个更复杂的解决方案。如果您使用前导下划线命名函数，请记住您*必须*在规则中包含它，这会导致`callback__usernameRegex`总共有两个下划线：一个用于前缀 of `callback_`，第二个用于函数名称，`_usernameRegex`. 这可能非常简单，不需要向您指出，但在我看来，这似乎很容易被忽略。[请参阅将自定义回调添加到 Codeigniter 表单验证](https://stackoverflow.com/questions/12878863/adding-custom-callback-to-codeigniter-form-validation#answer-12879127)的链接答案有关扩展的详细说明`CI_Form_validation`。请注意，如果您扩展表单验证，`callback_`则在`set_rules`.

您还可以为新回调设置消息：

`$this->form_validation->set_message('usernameRegex', 'The %s field must only contain lowercase letters and/or numbers');`

* * *

另一种方法是修改用于 form_validation 规则的 Codeigniter 自己的模式匹配。[Ellislab 论坛的链接描述了这个问题，然后是在线程中进一步](http://ellislab.com/forums/viewthread/185601/#883010)解决它的潜在方法。通过查看 Codeigniter 代码和指定的修复程序，他们提供的建议解决方案可能会破坏在规则中使用数组：通过使用递归匹配替换 Codeigniter 函数中的一个更好的正则表达式可以解决这两个问题，但可能会遇到更重的性能问题规则。

Codeigniter 对 form_validation 规则的模式匹配可在其 system/libraries/Form_validation.php 文件中找到，该文件位于 2.1.3 的第 115 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-30T06:13:24.690

使用以下代码在我的最后工作正常

```
$this->form_validation->set_rules('username', 'Username','trim|required|callback_username_check|regex_match[/^[a-z0-9]+$/]'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T00:23:10.863

php 的 preg_match 希望你的正则表达式被一个非字母数字字符包围（通常每个人都使用 /），将你的 setRules() 更改为：

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|regex_match[/a-z0-9/]'); 
```

# ssl - 通过 HTTPS 连接到 Prosody

> ID：13982531
> 
> 赞同：1
> 
> 时间：2012-12-21T00:14:40.073
> 
> 标签：ssl, https, xmpp, candy

我正在尝试设置韵律以使用糖果在 https 上工作。我已尝试配置 SSL 和列出的所有步骤以使其正常工作，但由于某种原因，当我尝试超时时，韵律日志中出现以下内容： `[https://servername.com:5280/http-bind](https://servername.com:5280/http-bind)`

```
server.lua: accepted new client connection from servername:23366 to 5280  
server.lua: accepted new client connection from servername:10667 to 5280  
server.lua: client servername:23366 read error: closed  
server.lua: closed client handler and removed socket from list 
```

当我尝试通过 http 做同样的事情时，它会起作用：结果是：“在我看来，你真的不像 BOSH 客户端......你想要什么？” `[http://servername.com:5280/http-bind](http://servername.com:5280/http-bind)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T19:33:05.060

**注意：**在最近的版本中，Prosody**默认在 5281 端口上提供 HTTPS**，因此该回复**不再相关**。

您正在 http 端口上尝试 https。这行不通。您可能需要为该端口配置 SSL 或使用 SSL 设置另一个。[设置 BOSH 服务器](http://prosody.im/doc/setting_up_bosh)页面描述了如何执行此操作：

```
bosh_ports = {
                 {
                    port = 5280;
                    path = "http-bind";
                 },
                 {
                    port = 5281;
                    path = "http-bind";
                    ssl = {
                             key = "bosh.key";
                             certificate = "bosh.crt"; 
                          }
                 }
              } 
```

# python - Google API Python 客户端 - AccessTokenRefreshError

> ID：13982533
> 
> 赞同：3
> 
> 时间：2012-12-21T00:14:46.963
> 
> 标签：python, google-api, google-oauth

```
def get_code(request):
    try:
        user_info_service = get_service(request.user, 'oauth2', 'v2')
        user_info = user_info_service.userinfo().get().execute()
        if user_info and user_info.get('id'):
            request.session['cur_user'] = user_info
            return redirect('/me')
        else:
            raise NoUserIdException()
    except AccessTokenRefreshError as atrfsh:
        print atrfsh
        print traceback.print_tb(sys.exc_info()[2])
    except:
        print "This was the exception..."
        print sys.exc_info()
        auth_uri = FLOW.step1_get_authorize_url()
        print auth_uri
        return redirect(auth_uri)

def get_service(user, name, version):
    storage = Storage(CredentialsModel, 'id', user, 'credential')
    credential = storage.get()
    http = httplib2.Http()
    http = credential.authorize(http)
    service = build(name, version, http=http)
    return service 
```

我一直`AccessTokenRefreshError`在`user_info = user_info_service.userinfo()`..线上。

在 AccessTokenRefreshError 的异常块中，它正在打印“invalid_grant”。

在阅读`OAuth2Credentials`对象的文档后：[http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client.OAuth2Credentials-class.html#authorize](http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client.OAuth2Credentials-class.html#authorize)，我发现 credential.authorize 方法在`get_service`显然应该自动刷新访问令牌。

我做错了什么，它无法刷新访问令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:29:05.567

**这是一种解决方法！**

我也大约每 10 次调用一次同样的错误`tasklists.list()`，所以问题不是唯一的`userinfo`。

我发现的唯一解决方案是将 API 调用置于重试循环中。立即重试失败，因此我在重试之前包含睡眠。睡眠时间为 45 秒，它的工作时间约为 99.5%。

我希望有人可以发布更好的解决方案。

# javascript - 一旦两个单独的功能可用，如何运行脚本？

> ID：13982545
> 
> 赞同：0
> 
> 时间：2012-12-21T00:16:34.677
> 
> 标签：javascript, ajax, wordpress

在我的测试站点上，我试图在用户切换视频之前使用 AJAX 加载一些关于视频的文本，然后在 ajax 成功返回后输入文本。

我需要检查 AJAX 是否已成功返回并且 javascript 函数是否可用。我怎样才能检查这个？

一旦加载了 AJAX 并且一旦 javascript 函数可用，我就可以单独运行一个函数，但我不知道它们会以哪个顺序出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:08:11.600

你可以对事件和回调做一些事情。我仍然不确定您所说的**“功能已可用”**是什么意思，但这是我脑海中浮现的一些东西，应该可以帮助您入门。

```
// Check if all conditions are complete.
function completionChecker(limit, callback) {
  // Private count variable will outlast scope due to closure.
  var count = 0;
  // Return a callback for the event.
  return function(event) {
    if(++count == limit) { 
      // Call the callback supplied.
      callback(); 
      // Remove the event listener, we've reached the limit.
      this.removeEventListener("finished", arguments.callee, false); 
    }
  }      
}

// Some function to perform when everything is complete.
function myFunc() { /* Do stuff */ }

// Create a custom event.
var myEvt = new CustomEvent("finished");
// Add a listener to the document. After 2 "finished" events, call myFunc.
document.addEventListener("finished", completionChecker(2, myFunc), false);

// Now in your ajax success callback, and wherever your other function 
// has "become available", fire the "finished" event.
document.dispatchEvent(evt); 
```

# c# - WinRT/Metro 中的增量散列

> ID：13982546
> 
> 赞同：2
> 
> 时间：2012-12-21T00:16:50.783
> 
> 标签：c#, hash, cryptography, windows-runtime

我正在移植一些大量使用增量 SHA-1 的代码：

```
SHA1 hasher = HashAlgoFactory.Create<SHA1>();
hasher.Initialize();

DiskIOCallback readCallback = null; 
readCallback = delegate(bool successful) {

if (successful)
    hasher.TransformBlock(hashBuffer, 0, count, hashBuffer, 0);
    offset += count;

if (!successful || offset == endOffset)
{
    object hash = null;
    if (successful)
    {
        hasher.TransformFinalBlock(hashBuffer, 0, 0);
        hash = hasher.Hash;
    } 
```

我正在寻找一个 WinRT/Metro 等价物。我以前用过 hasher.HashData；是否有一些相对简单的方法可以从 HashData 中获取增量行为，或者有一些替​​代方法可以实现与上述相同的功能（以 WinRT/Metro 方式）？我完全有可能遗漏了一些明显的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T06:09:38.800

您应该使用[CryptographicHash](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.cryptographichash.aspx)类：

```
var hashProvider = HashAlgorithmProvider.OpenAlgorithm(HashAlgorithmNames.Sha1);
var hasher = hashProvider.CreateHash(); 
```

您可以附加多个数据增量：

```
hasher.Append(bytesPart.AsBuffer()); 
```

完成后，您将检索哈希：

```
var hash = hasher.GetValueAndReset().ToArray(); 
```

# javascript - 动态创建匿名函数？

> ID：13982552
> 
> 赞同：2
> 
> 时间：2012-12-21T00:17:20.120
> 
> 标签：javascript, anonymous-function

我正在研究简单的进化人工智能。我需要动态生成一个匿名函数。为此，我有一个条件和操作列表：

```
 var conditions = [
    function () { return enemyNear(), }, 
    function () { return mySpeed() > 5; }, 
    function () { return 1 === 1; }];
   var actions = [
      function () { return alert('walk'); },
      function () { return alert('jump'); } 
      function () { return alert('attack'); } ] 
```

代码选择其中一个来生成一个新函数：

```
condition = conditions [Math.floor(Math.random()*conditions .length)];
actions = conditions [Math.floor(Math.random()*actions .length)]; 
```

如果选择的条件是`enemyNear()`并且选择的动作是`walk()`，我如何生成简单的匿名函数？

```
behavior = function() {
    if(enemyNear()) {
        walk();
    }
} 
```

如果需要，我可以更改数组的保存方式。如何才能做到这一点？

所有字符`behaviors`都在这样的循环中调用：

```
for(i=0,i<chars.length,i++) {
chars[i].behavior.call();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:23:43.167

最简单的方法是只将函数放在数组中：

```
var conditions = [
    enemyNear, 
    function () { return mySpeed() > 5; }, 
    function () { return 1 === 1; 
}];
var actions = [walk, attack, jump]; 
```

然后你可以定义`behave`为：

```
var behave = function(condition, action) {
    if(condition()) {
        action();
    }
} 
```

并使用它，例如：

```
behave(conditions[2], actions[1]); 
```

在这里，`2`并且`1`可能是一个随机生成的数字，如下所示：

```
var getRandomInt = function (min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

var actRandomly = function (conditions, actions) {
    behave(
        conditions[getRandomInt(0, conditions.length -1)],
        actions[getRandomInt(0, actions.length -1)]
    );
}; 
```

像这样称呼它：

```
actRandomly(conditions, actions); 
```

当然，这只是提出想法，并没有整齐地组织。

为了好玩，我创建了一个[Basic jsFiddle Demo Version](http://jsfiddle.net/pXQwD/1/)。

* * *

**注意：**`var`在定义变量时始终使用。不要污染全局范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T00:22:05.287

从此更改您的数组：

```
conditions = [enemyNear(), mySpeed()>5, 1=1]; 
```

对此：

```
conditions = [
    function() { return enemyNear() },  // or just enemyNear
    function() { return mySpeed() > 5 },
    function() { return 1 == 1 } // 1 = 1?
]; 
```

使用您当前的代码，您的函数被调用并`conditions`成为这些函数的输出数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T00:25:57.100

首先，在数组内部，您需要*引用*条件和操作函数。现在，您正在调用它们，因此它们基本上与无用的数组相同，例如：

```
conditions = [true, false, true];
actions = [undefined, undefined, undefined]; 
```

我会将其更正为：

```
var conditions = [enemyNear, 
  function() { return mySpeed() > 5 }, 
  function(){ return true; }];
var actions = [walk, attack, jump]; 
```

然后您可以创建一个生成行为的函数：

```
function generateBehavior(){
  var condition = conditions[Math.floor(Math.random() * conditions.length)];
  var action = actions[Math.floor(Math.random() * actions.length)];
  return function() {
    if(condition()) {
      action();
    }
  }
} 
```

[您可以在此JSFiddle 演示](http://jsfiddle.net/SeXZj/2/)中看到它的实际效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T00:24:25.320

```
condition = [
    enemyNear,
    function() { return mySpeed() > 5; },
    function() { return 1 == 1; }
]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T00:23:29.063

您需要将*函数*存储在 中`array`，而不是调用它们，否则您将函数的*结果*存储在数组中。

```
function enemyNear() {}
function walk() {}

conditions = [enemyNear]
actions = [walk]

behaviour = function() {
  if(conditions[randomNumber]()) {
    actions[randomNumber]();
  }
} 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-12-21T00:23:18.907

简单的。使用 eval()

```
var behavior;
eval("behavior = function() { if (enemyNear()) walk(); }");
behavior(); 
```

# c - 错误：在 'struct' 之前需要 ';'、标识符或 '('

> ID：13982553
> 
> 赞同：0
> 
> 时间：2012-12-21T00:17:31.430
> 
> 标签：c, struct

```
struct proc_time /* info and times about a single process*/ 
{ 
    pid_t pid; /* pid of the process*/ 
    char name[16]; /* file name of the program executed*/ 
    unsigned long start_time; /* start time of the process*/ 
    unsigned long real_time; /* real time of the process execution*/ 
    unsigned long user_time; /* user time of the process*/ 
    unsigned long sys_time; /* system time of the process*/ 
}; 

struct proctimes /* info and times about all processes we need*/ 
{ 
    struct proc_time proc; /* process with given pid or current process */ 
    struct proc_time parent_proc; /* parent process*/ 
    struct proc_time oldest_child_proc; /* oldest child process*/ 
    struct proc_time oldest_sibling_proc; /* oldest sibling process*/ 
}; 
```

我无法理解我的声明出了什么问题，并且在第二行`struct`开始时出现以下错误：

> 预期 ';'、标识符或 '(' 在 'struct' 之前"。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:19:44.480

问题是您使用 /.../ 作为非法的注释分隔符。该行：

```
struct proc_time proc; /process with given pid or current process/ 
```

应替换为：

```
 struct proc_time proc; /* process with given pid or current process */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:28:50.247

*如果您在文件范围内*声明这些结构（假设您修复了注释问题），则没有真正的原因会发生这种情况。

但是，如果您以某种方式设法在更大的结构中声明这些结构，那么您确实会从 C 编译器中得到一个错误

```
struct some_struct
{

  struct proc_time
  { 
    ...
  }; /* <- error: identifier expected */

  struct proctimes
  { 
    ...
  }; /* <- error: identifier expected */

}; 
```

在 C 语言中，以“嵌套”方式声明结构类型而不立即声明该类型的数据字段是非法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T06:32:02.250

在分号之前和右大括号之后添加结构别名，使我能够编译您的结构（在添加 main 方法并包括 stdlib.h 之后使用 gcc）。

```
struct proc_time /* info and times about a single process*/ 
{ 
    pid_t pid; /* pid of the process*/ 
    char name[16]; /* file name of the program executed*/ 
    unsigned long start_time; /* start time of the process*/ 
    unsigned long real_time; /* real time of the process execution*/ 
    unsigned long user_time; /* user time of the process*/ 
    unsigned long sys_time; /* system time of the process*/ 
} proc_time; 

struct proctimes /* info and times about all processes we need*/ 
{ 
    struct proc_time proc; /* process with given pid or current process */ 
    struct proc_time parent_proc; /* parent process*/ 
    struct proc_time oldest_child_proc; /* oldest child process*/ 
    struct proc_time oldest_sibling_proc; /* oldest sibling process*/ 
} proctimes; 
```

# codeigniter - CodeIgniter 在带有 ajax 回调的表单字段旁边单独显示错误

> ID：13982558
> 
> 赞同：5
> 
> 时间：2012-12-21T00:18:06.143
> 
> 标签：codeigniter, validation

我使用 CI 制作了一个表单，并有一个本地 form_validation() 库来验证每个字段输入，我使用 jQuery post 回调输入以检查每个字段是否有效，如果我希望每个错误填充到`form_error()`每个字段而不是`validation_errors()`?

请参考以下：

**看法：**

```
<script>
$("#btnregister").click(function() {
    var parameters = $("#reg_form").serialize();

    $.post(baseurl+'pages/registration', parameters, function(data) {
        if(data == "ok") {
            //show success message
        }else{

            $("#error").html(data); 

        }
    }, "html");
});
</script>

<div id="error"></div>
<form id="reg_form" method="post">
     <p>
     <label for="reg_username">Username</label><br />
     <input type="text" id="reg_username" name="reg_username" value="<?php echo set_value('reg_username'); ?>">
     <?php echo form_error('reg_username'); ?>
     </p>

     <p>
     <label for="reg_email">Email</label><br />
     <input type="text" id="reg_email" name="reg_email" value="<?php echo set_value('reg_email'); ?>">
     <?php echo form_error('reg_email'); ?>
     </p>

     <p><input type="button" id="btnregister" value="Register"></p>
</form>
</div> 
```

**控制器：**

```
public function registration(){
    $this->load->library('form_validation');

    $this->form_validation->set_rules('reg_username', 'Username', 'trim|required|min_length[4]|max_length[15]|xss_clean|is_unique[users.username]');
    $this->form_validation->set_rules('reg_email', 'Email', 'trim|required|valid_email|is_unique[users.email]');

    if($this->form_validation->run() == FALSE){
        echo validation_errors();

    }else{
        // insert to db
        echo "ok";
    }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T04:38:36.113

您必须构建自己的错误数组。如果我们可以访问 Form_validation 那就太好了，`$_error_array`但不幸的是它可以访问，`protected`并且没有访问方法。

我将更改您的控制器以输出 json 响应以使其更容易：

```
public function registration()
{
    $this->load->library('form_validation');
    $this->form_validation->set_rules('reg_username', 'Username', 'trim|required|min_length[4]|max_length[15]|xss_clean|is_unique[users.username]');
    $this->form_validation->set_rules('reg_email', 'Email', 'trim|required|valid_email|is_unique[users.email]');
    if ($this->form_validation->run())
    {
       $response['status'] = TRUE;
    }
    else
    {
        $errors = array();
        // Loop through $_POST and get the keys
        foreach ($this->input->post() as $key => $value)
        {
            // Add the error message for this field
            $errors[$key] = form_error($key);
        }
        $response['errors'] = array_filter($errors); // Some might be empty
        $response['status'] = FALSE;
    }
    // You can use the Output class here too
    header('Content-type: application/json');
    exit(json_encode($response));
} 
```

现在您的 ajax 成功回调可以读取响应的`status`和`errors`键。您可以遍历`data.errors`并将每个添加到输入字段：

```
$("#reg_form").submit(function() {
    var form = $(this);
    $.post(baseurl+'pages/registration', form.serialize(), function(data) {
        if (data.status == true) {
            //show success message
        }else{
            $.each(data.errors, function(key, val) {
                $('[name="'+ key +'"]', form).after(val);
            });​
        }
    }, "json");
}); 
```

另一种简单的方法是将表单发布到自身，并让您的 ajax 响应重新加载整个表单 - 这样消息和验证过滤器将在服务器端处理。

# c++ - Boost.asio async_read_some 编译错误

> ID：13982563
> 
> 赞同：1
> 
> 时间：2012-12-21T00:18:55.763
> 
> 标签：c++, boost, c++11, boost-asio

我在使用 async_read_some 时遇到了困难

我用 async_write_some 编译并成功了。

但是，我尝试使用 async_read_some 进行编译，

并提出了奇怪的错误，它可以找到正确的方法。

我是提升世界的新手。请帮我解决这些问题。

提前致谢。

opps编译错误是这样的

错误：没有匹配函数调用 'ws_async_tcp_connection::async_recv_msg_some(boost::asio::mutable_buffers_1, boost::_bi::bind_t, boost::_bi::list3, boost::arg<1> ( *)(), boost::arg<2> (* )()> >)' /home/chris/proto/inc/ws_async_tcp_connection.h:119: 注意：候选者是：void ws_async_tcp_connection::async_recv_msg_some(T&, Handler) [with T = boost ::asio::mutable_buffers_1, 处理程序 = boost::_bi::bind_t, boost::_bi::list3, boost::arg<1> ( *)(), boost::arg<2> (* )()> > ]

```
header 
-----------------------------------------------------------------------------------
class ws_async_tcp_connection{
    boost::asio::ip::tcp::socket socket_;
public:

    ws_async_tcp_connection(boost::asio::io_service& arg_io_service)
        : socket_(arg_io_service){}

    /*
    *   destructor
    */      
    ~ws_async_tcp_connection(){
        shutdown();
    }

    /*
    *   connect method
    *       : binding connection handler -> handle_connect
    */
    void connect(const std::string& host_addr, const std::string& port_no){
        boost::asio::ip::tcp::resolver resolver_(socket_.get_io_service());
        boost::asio::ip::tcp::resolver::query query_(boost::asio::ip::tcp::v4(), host_addr, port_no);
        boost::asio::ip::tcp::resolver::iterator end_point_iter = resolver_.resolve(query_);
        boost::asio::async_connect(socket_, end_point_iter, 
            boost::bind(&ws_async_tcp_connection::handle_connect, this, boost::asio::placeholders::error));
    }

    /*
    *   handle_connect
    *       : handle after the connect method called
    */
    void handle_connect(const boost::system::error_code& ec){
        if(!ec){
            // successfully established the connection - maybe print the remote ip, port
            /*  getting the remote_endpoint ip, port
            std::string connected_server_ip = socket_.remote_endpoint().address().to_string();
            unsigned short connected_server_port = socket_.remote_endpoint().port();
            */
        }
        else{
            // error handling - maybe use Logger class to print the error
            shutdown();
        }
    }

    /*
    *   set_option
    *       : set option for the tcp socket
    */
    template<typename SettableSocketOption>
    void set_option(const SettableSocketOption& option){
        // if performance is poor, then let's try no_delay option(true);
        /* keepalive option
            boost::asio::socket_base::keep_alive option(true);
            socket.set_option(option);
        */
        socket_.set_option(option);
    }

    /*
    *   is_open
    *       : socket is opened or not
    */
    bool is_open(){
        return socket_.is_open();
    }

    /*
    *   async_send_msg
    *       : send msg (warning! : will be blocked until the exact bytes you ask for are transmitted)
    */
    template <typename T, typename Handler> 
    void async_send_msg(const T& send_buf, Handler handler){
        boost::asio::async_write(socket_, send_buf, handler);
    }

    /*
    *   async_recv_msg
    *       : recv msg (warning! : will be blocked until the exact bytes you ask for are transmitted)
    */
    template <typename T, typename Handler> 
    void async_recv_msg(T& recv_buf, Handler handler){
        boost::asio::async_read(socket_, recv_buf, handler);
    }

    /*
    *   async_send_msg_some
    *       : send msg
    */  
    template <typename T, typename Handler> 
    void async_send_msg_some(const T& send_buf, Handler handler){
        socket_.async_write_some(send_buf, handler);
    }

    /*
    *   async_recv_msg_some
    *       : recv msg (Typically use this if you don't have to receive the exact numbers of bytes)
    */
    template <typename T, typename Handler> 
    void async_recv_msg_some(T& recv_buf, Handler handler){
        socket_.async_read_some(recv_buf, handler);
    }

    /*
    *   shutdown
    */
    void shutdown(){
        if(is_open()){
            boost::system::error_code ec;
            socket_.shutdown(boost::asio::ip::tcp::socket::shutdown_both, ec);
            if(ec){
                // may print shutdown error
            }
            socket_.close();
        }
    }

    /*
    *   socket
    *       : returning the current holding socket
    */
    boost::asio::ip::tcp::socket& socket(){
        return socket_;
    }
};

typedef boost::shared_ptr<ws_async_tcp_connection> async_tcp_ptr;

-------------------------------------------------------------------------------
src
-------------------------------------------------------------------------------

class async_tcp_test_server{
    enum{ buf_size = 1024 };
    boost::asio::ip::tcp::acceptor acceptor_;
    boost::array<char, buf_size> send_buf;
    boost::array<char, buf_size> recv_buf;
public:
    async_tcp_test_server(boost::asio::io_service& io_service, unsigned short port_no)
        : acceptor_(io_service, boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port_no)){

        // start an accept operation for a new connection
        async_tcp_ptr new_conn(new ws_async_tcp_connection(acceptor_.get_io_service()));
        acceptor_.async_accept(new_conn->socket(), boost::bind(&async_tcp_test_server::handle_accept, this,
            boost::asio::placeholders::error, new_conn));
    }

    void handle_accept(const boost::system::error_code& ec, async_tcp_ptr conn){

        if(!ec){
            send_buf.assign(0x00);
            string hello_str = "Welcome to connect Asynchronous TCP Test Server :)";
            memcpy(&send_buf[0], hello_str.c_str(), hello_str.length());
            conn->async_send_msg(boost::asio::buffer(send_buf), boost::bind(&async_tcp_test_server::handle_write, this, boost::asio::placeholders::error, conn));
            //conn->async_send_msg_some(boost::asio::buffer(send_buf), boost::bind(&async_tcp_test_server::handle_write, this, boost::asio::placeholders::error, 
                //boost::asio::placeholders::bytes_transferred, conn));
        }

        // start an accept operation for new connection
        async_tcp_ptr new_conn(new ws_async_tcp_connection(acceptor_.get_io_service()));
        acceptor_.async_accept(new_conn->socket(), boost::bind(&async_tcp_test_server::handle_accept, this,
            boost::asio::placeholders::error, new_conn));
    }

    void handle_write(const boost::system::error_code& ec, async_tcp_ptr conn){
        if(!ec){
            recv_buf.assign(0x00);
            conn->async_recv_msg_some(boost::asio::buffer(recv_buf), boost::bind(&async_tcp_test_server::handle_read, this, boost::asio::placeholders::error, 
                boost::asio::placeholders::bytes_transferred));
        }
    }

    void handle_read(const boost::system::error_code& ec, size_t num_recv_bytes){
        cout << recv_buf.data() << endl;
    }
};

int main(void)
{
    unsigned short port_no = 7807;
    boost::asio::io_service io_svr;
    async_tcp_test_server test_server(io_svr, port_no);
    io_svr.run();
} 
```

这是错误的输出（在我更改了 T& -> const T& 之后）

/home/chris/proto/boost/boost/bind/bind_template.hpp:15: 从 'boost::_bi::bind_t, boost::arg<1> ( *)(), boost::arg<2> (* )(), boost::_bi::value > > >' async_tcp_test_server.cpp:46: 从这里实例化 /home/chris/proto/boost/boost/bind/bind.hpp:69: 错误: 'void (async_tcp_test_server: :*)(const boost::system::error_code&, size_t)' 不是类、结构或联合类型 /home/chris/proto/boost/boost/asio/basic_stream_socket.hpp：在成员函数 'void boost: :asio::basic_stream_socket::async_read_some(const MutableBufferSequence&, const ReadHandler&) [with MutableBufferSequence = boost::asio::mutable_buffers_1, ReadHandler = boost::_bi::bind_t, boost::arg<1> ( *)(), boost ::arg<2> (*)(), boost::_bi::value > > >, 协议 = boost::asio::ip::tcp, StreamSocketService = boost::asio::stream_socket_service]': /home/chris/proto/inc/ws_async_tcp_connection .h:120：从 'void ws_async_tcp_connection::async_recv_msg_some(const T&, Handler) 实例化 [with T = boost::asio::mutable_buffers_1, Handler = boost::_bi::bind_t, boost::arg<1> ( *) (), boost::arg<2> (* )(), boost::_bi::value > > >]' async_tcp_test_server.cpp:46: 从这里实例化 /home/chris/proto/boost/boost/asio/basic_stream_socket .hpp:785：错误：不匹配调用 '(boost::_bi::bind_t, boost::arg<1> ( *)(), boost::arg<2> (*)(), boost::_bi::value > > >) (const boost::system::error_code&, const long unsigned int&)' /home/chris/proto/boost/boost/asio/detail/bind_handler.hpp:在成员函数 'void boost::asio::detail::binder2::operator()() [with Handler = boost::_bi::bind_t, boost::arg<1> ( *)(), boost::arg <2> (* )(), boost::_bi::value > > >, Arg1 = boost::system::error_code, Arg2 = long unsigned int]': /home/chris/proto/boost/boost/asio/ handler_invoke_hook.hpp:64: 实例化自 'void boost::asio::asio_handler_invoke(Function, ...) [with Function = boost::asio::detail::binder2, boost::arg<1> ( *)() , 升压::arg<2> (*)(), boost::_bi::value > > >, boost::system::error_code, long unsigned int>]' /home/chris/proto/boost/boost/asio/detail/handler_invoke_helpers.hpp:39:从 'void boost_asio_handler_invoke_helpers::invoke(Function&, Context&) 实例化 [with Function = boost::asio::detail::binder2, boost::arg<1> ( *)(), boost::arg<2> (* )( ), boost::_bi::value > > >, boost::system::error_code, long unsigned int>, 上下文 = boost::_bi::bind_t, boost::arg<1> ( *)(), boost: :arg<2> (*)(), boost::_bi::value > > >]' /home/chris/proto/boost/boost/asio/detail/reactive_socket_recv_op.hpp:110: 实例化自 'static void boost::asio::detail: :reactive_socket_recv_op::do_complete(boost::asio::detail::io_service_impl*, boost::asio::detail::operation*, const boost::system::error_code&, size_t) [with MutableBufferSequence = boost::asio: :mutable_buffers_1, 处理程序 = boost::_bi::bind_t, boost::arg<1> ( *)(), boost::arg<2> (*)(), boost::_bi::value > > >]' /home/chris/proto/boost/boost/asio/detail/reactive_socket_recv_op.hpp:80: 从 'boost::asio::detail::reactive_socket_recv_op 实例化::reactive_socket_recv_op(boost::asio::detail::socket_type, boost::asio::detail::socket_ops::state_type, const MutableBufferSequence&, int, Handler&) [with MutableBufferSequence = boost::asio::mutable_buffers_1, Handler = boost::_bi::bind_t, boost::arg<1> ( *)(), boost::arg<2> (*)(), boost::_bi::value > > >]' /home/chris/proto/boost/boost/asio/detail/reactive_socket_service_base.hpp:273: 从 'void boost::asio::detail:: 实例化reactive_socket_service_base::async_receive(boost::asio::detail::reactive_socket_service_base::base_implementation_type&, const MutableBufferSequence&, int, Handler) [with MutableBufferSequence = boost::asio::mutable_buffers_1, Handler = boost::_bi::bind_t, boost: :arg<1> ( *)(), boost::arg<2> (*)(), boost::_bi::value > > >]' /home/chris/proto/boost/boost/asio/stream_socket_service.hpp:318: 从'void boost::asio::stream_socket_service::async_receive(类型名 boost::asio::detail::reactive_socket_service::implementation_type&, const MutableBufferSequence&, int, const ReadHandler&) [with MutableBufferSequence = boost::asio::mutable_buffers_1, ReadHandler = boost::_bi::bind_t, boost::arg< 1> ( *)(), boost::arg<2> (* )(), boost::_bi::value > > >, 协议 = boost::asio::ip::tcp]' /home/chris/proto /boost/boost/asio/basic_stream_socket.hpp:787: 实例化自 'void boost::asio::basic_stream_socket::async_read_some(const MutableBufferSequence&, const ReadHandler&) [with MutableBufferSequence = boost::asio::mutable_buffers_1,ReadHandler = boost::_bi::bind_t, boost::arg<1> (*)(), boost::arg<2> (* )(), boost::_bi::value > > >, 协议 = boost::asio::ip::tcp, StreamSocketService = boost::asio::stream_socket_service] ' /home/chris/proto/inc/ws_async_tcp_connection.h:120: 实例化自 'void ws_async_tcp_connection::async_recv_msg_some(const T&, Handler) [with T = boost::asio::mutable_buffers_1, Handler = boost::_bi:: bind_t, boost::arg<1> ( *)(), boost::arg<2> (* )(), boost::_bi::value > > >]' async_tcp_test_server.cpp:46: 从这里 /home/ 实例化chris/proto/boost/boost/asio/detail/bind_handler.hpp:118：错误：不匹配调用 '(boost::_bi::bind_t, boost::arg<1> ( *)(), boost:: arg<2> (* )(), boost::_bi::value

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:14:42.733

As the compiler said, the function you're calling expects a non-const reference to a buffer: `async_recv_msg_some(T&, ... [with T = boost::asio::mutable_buffers_1`

You're passing a buffer by value: `async_recv_msg_some(boost::asio::mutable_buffers_1,` because you created it as a temporary object with the rvalue expression `boost::asio::buffer(recv_buf)`.

You'll have to change your function signature to either take `T` or `const T&` (I would go with `const T&`, because that's what `async_read_some` takes, and your function is just forwarding to that)

# c++ - C++ 为什么在类中可能存在循环依赖，但在命名空间或全局范围内却不行？

> ID：13982578
> 
> 赞同：2
> 
> 时间：2012-12-21T00:20:12.037
> 
> 标签：c++, circular-dependency

[我在一篇文章](http://strlen.com/java-style-classes-in-c)中遇到了以下代码

```
struct entire_program   
{
    struct B;

    struct A
    {
        B *bbb;
        void Aa() { B bb; bb.Bb(); };
    };

    struct B
    {
        A aaa;
        void Bb() { A aa; aa.Aa(); };
    };
}; 
```

为什么在这种情况下允许我调用方法`Bb()`，但是如果我更改`struct entire_program`它`namespace entire_program`会产生编译器错误？

我已经读过[这个问题](https://stackoverflow.com/questions/4938935/c-circular-dependency-namespace-vs-struct)，我要问的是：如果可以在类/结构/联合中调用尚未定义的方法，**为什么命名空间不能以相同的方式工作？**我对这种行为背后的动机很感兴趣。

[Programmers.SE 上的相关问题](https://softwareengineering.stackexchange.com/questions/180237/java-style-classes-in-c)（针对那些对文章中介绍的编码风格感兴趣的人）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:44:54.183

这正是 C++ 中类和命名空间的工作方式。类*必须*将整组（类成员）名称作为候选者，因为否则您将承担订购类成员的巨大负担，并且可能无法方便地首先订购您的公共接口。

另一方面，命名空间的工作方式几乎与 C 函数完全一样，并且按照它们在源文件中列出的顺序依次处理。不需要特殊功能，因为您始终可以在命名空间/全局范围内调用函数之前声明您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:47:35.253

循环依赖在类和命名空间中都是可能的。这只是在循环依赖情况下正确定义事物的问题。

在您的情况下，由于特殊处理类内成员函数定义而编译的代码`struct entire_program`：它们被允许“查看”封闭类的整个定义，包括当前点的上方和下方。但是他们看不到封闭命名空间的完整定义。使用命名空间，编译器只能看到在当前点之上声明的内容。

类和命名空间是非常不同的东西，所以在实践中通常不会出现在两者之间自由切换的问题。但仅出于说明目的，这可以在许多情况下实现，包括您的人工示例

```
namespace entire_program   
{
    struct B;

    struct A
    {
        B *bbb;
        void Aa();
    };

    struct B
    {
        A aaa;
        void Bb() { A aa; aa.Aa(); }
    };
}

inline void entire_program::A::Aa()
{
  B bb; bb.Bb();
} 
```

我上面的实现与您的实现相同，但它不依赖于对成员函数的特殊处理。如果您愿意，您可以在`struct entire_program`和之间自由切换。请记住，命名空间定义在结束后`namespace entire_program`没有 a 。`;``}`

# c++ - 使用 Qt 进行蓝牙编程

> ID：13982583
> 
> 赞同：-3
> 
> 时间：2012-12-21T00:21:27.667
> 
> 标签：c++, qt, bluetooth

我找不到很多使用 qt for mac osx 进行蓝牙编程的库。我主要使用 RFCOMM 协议因为我只需要将串行数据从 arduino 无线发送到笔记本电脑。有哪些可用的 Qt 蓝牙库以便我可以发送串行无线数据。我正在使用 Mac Osx Mountain Lion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:42:36.860

诚然：鉴于 Qt 在某种意义上本身就是一个“平台”，很难准确定义其服务的范围与操作系统的功能。

例如：你可以用它来做一些事情，比如[计算系统上的屏幕数量](http://doc.qt.digia.com/qt/qdesktopwidget.html#screenCount-prop)，这可能看起来有点开箱即用或“类似操作系统”。

但这些东西是经过严格挑选的。只有当它们适用于 Qt 运行的所有平台时，它们才会慢慢出现……并且是许多不同领域中 Qt 程序的常见案例。它不适用于（比如说）获取所有 WiFi 网络的名称及其信号强度的列表。

因此，您真正要问的是要链接到 Qt C++ 程序以在 OS/X 上进行蓝牙串行编程的外部库。我不知道，但由于它是 Mac，因此本机编程接口是 Objective-C 框架：

[Mac OS/X 框架上的蓝牙](http://developer.apple.com/library/mac/#documentation/devicedrivers/Conceptual/Bluetooth/BT_Bluetooth_On_MOSX/BT_Bluetooth_On_MOSX.html)

因此，如果您正在编写仅适用于 Mac 的程序，阻力最小的路径可能是加载 XCode 并在 XCode 中学习足够的 Objective-C 以使其运行。

之后，如果您真的想使用 C++ 和 Qt，您可以尝试找出正确的链接 voodoo 以使其工作。或者将通信程序保持为一个仍然用 Objective-C 编写的小型独立进程，并以其他方式与它通信（例如通过标准输入和输出）。

如果你走直接链接到 C++ 的道路，就会提到 C++ 头文件：

```
#include <IOBluetooth/IOBluetoothUserLib.h> 
#include <IOBluetooth/IOBluetoothUtilities.h> 
```

所以在网上搜索一下，你可能会找到更多。

# c# - 为什么我的标签没有被组合框更新

> ID：13982594
> 
> 赞同：1
> 
> 时间：2012-12-21T00:22:29.547
> 
> 标签：c#, winforms, data-binding

我正在使用从我的客户对象到组合框的 DataBindings。我试图实现的行为是标签文本将反映选择的名称。

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
  public partial class Form1 : Form
  {
    Customer selectedCustomer;
    List<Customer> list = new List<Customer>();

    public Form1()
    {
        InitializeComponent();
        selectedCustomer = new Customer() { Id = 2, FirstName = "Jane" };
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        label1.Text = selectedCustomer.FirstName;
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        list.Add(new Customer() { Id = 1, FirstName = "John" });
        list.Add(new Customer() { Id = 2, FirstName = "Jane" });

        comboBox1.DisplayMember = "FirstName";
        comboBox1.ValueMember = "Id";
        comboBox1.DataSource = list;
        comboBox1.DataBindings.Add("Text", selectedCustomer, "FirstName");
    }
  }

  public class Customer
  {
      public int Id { get; set; }
      public string FirstName { get; set; }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:27:44.710

您应该将所选项目分配给`selectedCustomer`字段：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    selectedCustomer = (Customer)comboBox1.SelectedItem;
    label1.Text = selectedCustomer.FirstName;
} 
```

如果您希望自动更改标签文本，您应该为标签添加数据绑定（当前您正在将其添加到组合框）：

```
label1.DataBindings.Add("Text", selectedCustomer, "FirstName"); 
```

但文本也不会更新。为什么？因为标签绑定到客户的特定实例（绑定添加时的一个） - 标签将反映它绑定到的客户的更改：

```
selectedCustomer.FirstName = "Serge"; 
```

但同样 - 如果您更改客户名称，则不会发生任何事情。为什么？因为客户应该实现`INotifyPropertyChanged`接口并引发事件以通知标签有关名称更改：

```
public class Customer : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private string _firstName;

    public int Id { get; set; }

    public string FirstName 
    { 
        get { return _firstName; } 
        set 
        { 
            _firstName = value; // well, it's better to check if value changed
            if (PropertyChanged !=null) 
                PropertyChanged(this, new PropertyChangedEventArgs("FirstName"));
        }
    }        
} 
```

现在，如果您要更改所选客户的名称，新值将出现在标签中。这就是数据绑定在winforms 中的工作方式。

# coldfusion - Coldfusion Query 循环在 cf10 中有效，但在 9 中无效

> ID：13982595
> 
> 赞同：7
> 
> 时间：2012-12-21T00:22:31.483
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10

为什么以下在 CF10 中有效但在 CF9 中无效？

```
<cfset out="">
<cfif isQuery( arguments.values ) >
    <cfloop query="#arguments.values#" >            
        <cfset out = '#out#<option value="#value#">#label#</option>'>
    </cfloop>
</cfif> 
```

CF9 声明“复杂对象类型不能转换为简单值”。对于包含 cfloop 的行。我正在使用 Coldbox 框架，它的调试器信息显示 arguments.values 是一个带有标签和值列的查询。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T00:33:29.080

在 CF10 之前，[cfloop](http://cfdocs.org/cfloop-looping-over-a-query)的查询属性只能是字符串——查询的名称——而不是变量本身。

因此，当您`#arguments.values#`尝试将复杂的查询对象转换为字符串时，以获取名称，这就是错误的来源。

它在 CF10 中有效，因为该属性已更新为也允许查询值。

**旁注：**

这行代码可以简化：

```
<cfset out = '#out#<option value="#value#">#label#</option>'> 
```

至：

```
<cfset out &= '<option value="#value#">#label#</option>'> 
```

此外，您很可能应该`HtmlEditFormat`在至少标签上使用 *，也许还应该使用 value。

^(*（或者`encodeForHtml`如果它只需要在 CF10+ 中工作）)

# r - 在R中绘制体素图像

> ID：13982597
> 
> 赞同：4
> 
> 时间：2012-12-21T00:22:43.187
> 
> 标签：r, 3d, voxel, rgl

您知道 R 中是否存在用于绘制体素对象（3D 数组）的库或函数吗？我找到了可以执行 3d 散点图的包 rgl，但我真的在寻找与 3D 数组一起使用的函数“image”的等价物。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-17T11:12:09.293

这是使用 rgl 包的基本示例。您可以轻松地将其转换为对 3D 数组进行操作的函数，以更改颜色、alpha 或其他感兴趣的特征。

```
library(rgl)
cubit=cube3d(color="blue", alpha=0.3)
cubit$vb[cubit$vb == -1]= 0
gridx=0:5;gridy=0:5;gridz=0:5
temp=cubit
plot3d(temp,box=FALSE,axes=FALSE,xlab="",ylab="",zlab="")
wire3d(temp,add=TRUE,color="blue",alpha=1)
for(ix in gridx){
  for(iy in gridy){
    for(iz in gridz){
      temp$vb[1,]=cubit$vb[1,]+ix
      temp$vb[2,]=cubit$vb[2,]+iy
      temp$vb[3,]=cubit$vb[3,]+iz
        shade3d(temp,add=TRUE,,alpha=runif(1))      
        wire3d(temp,add=TRUE,color="blue")
    }
  }
} 
```

我使用过类似的东西，但我注意到内存大小增长得非常快（我不能超过 60000 个体素，使用 3-4Gb RAM）。我已经尝试使用 plot3D 包中的 cube3D 进行类似的操作，认为非交互式绘图会（应该！）更节省内存，但由于某种原因，这个包的性能更差（只有 1000 个体素）。如果你有一个实心立方体，那么你可以更聪明地只使用 ploygon3D 图绘制外边缘......但这不是我的情况。我仍在使用 R 功能寻找更好的性能，但我认为我应该添加到这个对话中，以防任何其他流浪灵魂也在这里穿越。

# c# - 使用 Parallel.ForEach 对多个线程的依赖

> ID：13982600
> 
> 赞同：6
> 
> 时间：2012-12-21T00:23:00.223
> 
> 标签：c#, multithreading, dependency-injection, task-parallel-library, simple-injector

我使用 Simple Injector 作为我的 IoC 容器。SimpleInjector 使用[这种简单的技术来处理 Per Thread 和 Per Web Request 的混合生活方式](https://stackoverflow.com/questions/13147509/mixed-lifestyle-for-per-thread-and-per-web-request-with-simple-injector)

```
container.RegisterPerWebRequest<IWebRepository, Repository>();
container.RegisterLifetimeScope<IThreadRepository, Repository>();
container.Register<IRepository>(container.GetInstance<Repository>());

// Register as hybrid PerWebRequest / PerLifetimeScope.
container.Register<Repository>(() =>
{
    Repository repository;
    if (HttpContext.Current != null)
        repository = (Repository)container.GetInstance<IWebRepository>();
    else
        repository = (Repository)container.GetInstance<IThreadRepository>();

    return repository;
}); 
```

不幸的是（显然！），在我的 UnitOfWork 类的其他地方，当我使用 Parallel.ForEach 并尝试并行调用 Repository 类的多个实例时，这给了我一个问题，因为只有第一个线程在 HttpContext 中找到了一个值。当前的

```
using (TransactionScope scope = new TransactionScope())
{
    Parallel.ForEach(new List<IRepository>() { _repository1, _repository2 ... }, 
        (repository) =>
        {
            repository.Commit();
        });
    scope.Complete();
} 
```

既然我已经写完我可以看到的问题，我可能会要求不可能或愚蠢的东西......但是到底是什么......可以做到吗？单个请求/线程注册是否可用于多个内部线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T09:04:08.157

通过依赖注入，您尝试集中有关对象生命周期的知识。这个集中的地方被称为[Composition Root](https://freecontent.manning.com/dependency-injection-in-net-2nd-edition-understanding-the-composition-root/). 当您开始将依赖项从一个线程传递到另一个线程时，代码的那些部分必须知道传递这些依赖项是否安全。例如，这些依赖项是线程安全的吗？这些依赖项能否在新的上下文中运行（例如，在 HTTP 或 WCF 请求之外）？在许多情况下，这可能很容易分析，但会阻止您使用其他实现更改这些依赖项，因为现在您必须记住代码中有一个地方发生了这种情况，并且您需要知道传递了哪些依赖项。您再次分散了这些知识，使您更难推断您的 DI 配置的正确性，并且更容易错误配置容器，从而使您的代码直接（充其量）失败或导致难以调试的竞争条件（最坏的情况）。

因此，让每个新启动的线程通过向容器请求它来构建一个新的对象图是最安全的。不要将依赖项（即：由容器管理和注入的实例）从一个线程传递到另一个线程。

在您的情况下，您甚至似乎遇到了问题，因为您的存储库似乎与 HTTP 上下文有关系，因为它们似乎不能传输到其他线程。在那种情况下，这很“容易”：不要这样做;-)

这并不意味着您不能以任何方式进行多线程来提高性能。但是您必须确保此操作不会将依赖项从一个线程移动到另一个线程，或者何时移动；确保此代码（在您的情况下为`Parallel.ForEach`）位于应用程序的 Composition Root 内，因为这是唯一可以/应该知道此操作是否可以安全执行的地方。

但是，在您的特定情况下，我发现您提交多个线程非常可怕。该工作单元的提交不应该是原子的吗？当您在不同线程上执行存储库提交时，您确定此提交仍然是原子的吗？当其中一个提交失败但其他提交成功时会发生什么？如何回滚已经成功的操作？

我认为您可以（并且您可能已经）解决了这些问题，但是这种解决方案给系统增加了很多复杂性。您必须问自己性能改进是否可以弥补增加的复杂性。

[您可以在此处](https://simpleinjector.org/howto+multi-threading)找到有关在多线程应用程序中使用依赖注入的更多信息。

# ruby-on-rails - 设计忘记密码

> ID：13982606
> 
> 赞同：0
> 
> 时间：2012-12-21T00:23:32.013
> 
> 标签：ruby-on-rails, devise

我正在尝试使用 Devise 来处理“忘记密码”请求 - 当我单击“忘记密码”时，它会将我带到页面以输入我的电子邮件并单击“向我发送重置说明”。但是当我提交电子邮件时，我收到以下错误：

```
NameError in Devise::PasswordsController#create
uninitialized constant User::Mailer 
```

我不知道如何解决这个问题，甚至不知道如何获得设计控制器代码，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:01:40.207

如果您尝试设置设计的“忘记密码”，您在 environment/development.rb 中的设置应如下所示：

```
 config.action_mailer.smtp_settings = { :address => "smtp.xxxxx.co.uk",
                                         :user_name => "username",
                                         :password => "password",
                                         :authentication => "login" } 
```

关于你的另一个问题：[SMTP 服务器忙](https://stackoverflow.com/questions/13963795/rails-mailer-netsmtpserverbusy)我不明白你为什么首先是山魈。

# php - 制作 PHP CSS 和 HTML 进度条

> ID：13982609
> 
> 赞同：0
> 
> 时间：2012-12-21T00:23:38.210
> 
> 标签：php, html, css, progress-bar

我用 PHP、CSS 和 HTML 制作了一个进度条。好吧，它可以正常工作，但例如用户有 6/6 的耐力。该条将是 100% 的 6%。我将如何改变这个？这是下面的编码..

```
<div class="progress-outer">
    <div class="progress-inner" 
    style="width: <?php echo $energy ?>%;">Energy:<?php echo $energy . '/' . $max_energy ?></div>
    </div>​ 
```

CSS是..

```
.progress-outer {
background: #000000;
height: 20px;
padding: 2px;
border: 1px solid #FFFFFF;
}

.progress-inner {
font-size: 16px;
color: #FFFFFF;
font-weight: bold;
background: #333333;
height: 100%;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:27:18.443

第一个`<?php echo $energy ?>`应该是`<?php echo ($energy/$max_energy*100) ?>`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:31:42.033

它会是这样的（我添加了一些视觉风格进行测试..你可以删除`background-color`s_

```
<?php
$max_energy = 100;
$energy = 6;
?>
<div class="progress-outer" style="border:1px solid black;background:#ff0000;width:100px">
    <div class="progress-inner" style="background:#0F0;width:<?php echo ($energy/$max_energy * 100); ?>px;">Energy:<?php echo $energy . '/' . $max_energy; ?></div>
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T12:40:31.753

我完全不明白，但我猜他想创建一个基于两个数字百分比的进度条。

这是示例（我是在 javascript 中完成的，所以可见）： [http ://codepen.io/anon/pen/hCIKD](http://codepen.io/anon/pen/hCIKD)

所以php代码应该是这样的：

```
<?php
$current = 3;
$max = 6;
// (current / max) * 100% to obtain the percentage.
$percentage = ($current / $max) * 100;
echo "The percentage of ".$current." from ".$max." is ".$percentage;
?> 
```

希望能帮助到你。

# c++ - VS 2010 打开相机但只显示灰色窗口

> ID：13982615
> 
> 赞同：3
> 
> 时间：2012-12-21T00:24:10.310
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, opencv

我是这方面的新手，但一直在阅读并尝试不同的设置来帮助缩小问题范围！任何帮助我克服这个障碍将不胜感激。

目前我正在运行：Win 7 Ultimate、Visual C++ 2010 Express、OpenCV 2.2.0 和 Microsoft - LifeCam Studio Webcam - Silver 1080p HD。

我没有收到任何构建错误，当我运行程序时，我的相机会亮起（蓝灯表示它正在亮起）并且会弹出我认为应该显示我的相机馈送的屏幕，但它只是一个灰色的盒子，里面什么都没有。我认为下面的代码有助于缩小问题范围，但我不知所措。

```
int main()
{
CvCapture *webcam = NULL;
webcam = cvCreateCameraCapture(-1);
if(webcam!=NULL)
  {
   IplImage *frame = cvQueryFrame(webcam);
   cvShowImage("WEBCAM_TEST",frame);
   cvWaitKey(0);
   return 0;
  }
else
   {
     std::cout<<"CAMERA NOT DETECTED"<<std::endl;
     return 0;
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:22:14.577

您的代码有时会显示黑色图像，有时会在我的系统上显示正确的图像（Windows 7 64 VS2010 OpenCV 2.4.3）...但是当我将其放入循环中以实现不间断流式传输时，图像还可以...所以只需稍微修改您的代码并尝试...

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;

int main()
{
CvCapture *webcam = NULL;
webcam = cvCreateCameraCapture(-1);

if(webcam!=NULL)
  {
    while(true)
    {
        IplImage *frame = cvQueryFrame(webcam);
        cvShowImage("WEBCAM_TEST",frame);
        cvWaitKey(20);
    }
  }
else
   {
     std::cout<<"CAMERA NOT DETECTED"<<std::endl;
     return 0;
   }

return 0;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T01:08:00.117

在 OpenCV 中，如果您在创建相机捕获后获得帧，通常它是灰色的。您所要做的就是获取下一帧或在获取第一帧之前等待。这段代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
    VideoCapture cap(0);
    if(!cap.isOpened()) 
        return -1;

    Mat frame;
    namedWindow("01",1);

    //cap >> frame;   //option 1
    //waitKey(5000);   //option 2
    cap >> frame;
    imshow("01", frame);
    int key = waitKey(30);
    return 0;
} 
```

将显示灰色框架，但如果您取消注释选项 1 或选项 2 - 它会正常工作。

# mysql - mySQL delete--使用键列时触发安全更新模式错误

> ID：13982620
> 
> 赞同：0
> 
> 时间：2012-12-21T00:24:50.903
> 
> 标签：mysql, triggers, sql-delete

我试图删除 table1 中的条目，这些条目也出现在 table2 中。code 是 table1 和 table2 的主键。我使用以下查询：

```
delete from table1 where table1.code = any(select code from table2); 
```

但是，我收到以下错误消息：

> 错误代码：1175。您正在使用安全更新模式并且您尝试更新没有`WHERE`使用`KEY`列的表 要禁用安全模式，请切换首选项 -> SQL 编辑器 -> 查询编辑器中的选项并重新连接。

但我的理解是我已经使用了`WHERE`with`KEY`列。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:27:32.880

您没有在子查询中使用任何限制子句。

# c++ - 重新定义访问修饰符有什么影响？

> ID：13982623
> 
> 赞同：3
> 
> 时间：2012-12-21T00:25:15.137
> 
> 标签：c++

为了诱导类似 C#/Java 的语法，通过预处理命令重新定义 C++ 访问修饰符可能会产生什么影响？

```
#include <iostream>

// The access modifiers are redefined here.
#define public public:
#define protected protected:
#define private private:

class Halo
{
    public Halo(int xx)
    {
        x = xx;
    }

    public int getX()
    {
        return x;
    }

    private int x;
};

int main()
{
    Halo* halo = new Halo(3);

    std::cout << halo->getX();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T00:28:01.473

```
class B : public A {}; 
```

> `expected '{' before ':' token`
> `expected unqualified-id before ':' token`
> `expected class-name before ':' token`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T00:31:13.917

除了已经提到的语法错误的后果。这样做会让其他人感到困惑。很久以前，人们会用 Pascal 进行编程，然后在转向 C 时使用`#define BEGIN {`and `#define END }`，这导致代码看起来有点像 pascal，但当然在许多其他方面根本不像 pascal。

您正在使用不同的语言进行编程。那么，为什么要假装它不是。

我猜是因为您认为是 Java 才忘记删除您的光环对象？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T00:32:51.953

任何事情都可能发生，因为重新定义语言关键字是未定义的行为。

一般来说，您应该为您使用的语言编写惯用代码。如果您想使用 Java/C# 语法，只需用这些语言编写代码。

# python - 如何将文本数据拆分为列表？

> ID：13982625
> 
> 赞同：1
> 
> 时间：2012-12-21T00:25:27.740
> 
> 标签：python, split

*我有一个像这样的文本文件*：

```
1;2;3;4
5;6;7;8 
```

*我想将其转换为：*

```
[[1,2,3,4],[5,6,7,8]] 
```

使用 Python，我怎样才能做到这一点？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T00:28:52.617

您可以使用以下内容：

```
data = [[int(i) for i in line.split(';')] for line in open(filename)] 
```

使用 csv 模块的替代方法：

```
import csv
data = [[int(i) for i in ln] for ln in csv.reader(open(filename), delimiter=';')] 
```

如果字符串列表是可接受的：

```
data = [line.split(';') for line in open(filename)] 
```

或 csv 等价物：

```
data = list(csv.reader(open(filename), delimiter=';')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T00:32:02.307

作为多行字符串：

```
>>> s = """1;2;3;4
5;6;7;8"""

>>> [[int(x) for x in a.split(';')] for a in s.splitlines()]
[[1, 2, 3, 4], [5, 6, 7, 8]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T00:31:50.497

由于您的数据似乎是某种类似于 CSV 的数据，为什么不使用 python 的[csv 解析模块](http://docs.python.org/2/library/csv.html)呢？它可以免费处理编码并支持分隔符。

如果您只想要一些代码，请使用列表推导并使用以下`split`方法进行拆分`str`：

```
result = [line.split(';') for line in text.split("\n")] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T00:31:55.537

`'1;2;3;4'.split(';')``[1, 2, 3, 4]`将从string生成列表`'1;2;3;4'`，因此您只需对文件中的每一行执行此操作：

```
def split_lists(filepath, sep=';'):
    with open(filepath) as f:
        line_lists = []
        for line in f:
            line_lists.append(line.split(sep))
        return line_lists 
```

或者更紧凑地理解

```
def split_lists(filepath, sep=';'):
    with open(filepath) as f:
        return [line.split(sep) for line in f] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T02:08:26.263

感谢您提出有趣的问题，可以通过 2 个 map 和 1 个 for 循环来解决

```
s='1;2;3;4\n5;6;7;8'
map(lambda seq: [int(i) for i in seq], map(lambda x:x.split(';'), s.split('\n'))) 
```

# powershell - 复制项，其中文件名是计算机主机名

> ID：13982627
> 
> 赞同：3
> 
> 时间：2012-12-21T00:25:48.143
> 
> 标签：powershell

在 Powershell 中似乎是一个基本问题。我正在做一个从 UNC 共享到本地`C:\`驱动器的简单复制项脚本。这是我的代码：

```
$hostname = $env:computername    
Copy-Item -Path '\\server\share\$hostname.txt' -Destination 'C:\' 
```

我无法弄清楚让它使用变量检索与主机名名称匹配的文本文件的语法。如果我放入一个静态命名的 .txt 文件，该代码就可以工作。

我必须在该变量周围放置什么才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:31:34.920

您需要用这样的双引号替换单引号：

```
$hostname = $env:computername

Copy-Item -Path "\\server\share\$hostname.txt" -Destination 'C:\' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:29:52.030

单引号字符串不会扩展变量。您需要一个双引号字符串，例如：

```
Copy-Item "\\server\share\$hostname.txt" C:\ 
```

通常，您不需要在 PowerShell 命令中引用字符串参数，除非您需要变量扩展或字符串中有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:16:03.713

您也可以直接将环境变量嵌入双引号字符串中：

```
Copy-Item "\\server\share\$env:computername.txt" C:\ 
```

# bash - 使用 grep、awk、sed 等从行中提取子字符串

> ID：13982633
> 
> 赞同：-1
> 
> 时间：2012-12-21T00:26:21.437
> 
> 标签：bash, sed, awk, grep

我有一个包含许多行的文件，例如：

```
<a href="http://www.youtube.com/user/airuike" class="yt-uix-sessionlink yt-user-name " data-sessionlink="ei=CKPW6LXqqbQCFSqVIQod_BwsaQ%3D%3D" dir="ltr">lily weisy</a> 
```

我想提取www.youtube.com/user/airuike和lily weisy，然后我也想把airuike从www.youtube.com/user/中分离出来

所以我想得到 3 个字符串：www.youtube.com/user/airuike、airuike 和 lily weisy

如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:47:29.260

做这个：

```
sed -e 's/.*href="\([^"]*\)".*>\([^<]*\)<.*/link:\1 name:\2/' < data 
```

会给你第一部分。但我不确定你在这之后用它做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:44:36.843

```
$ awk '{split($0,a,/(["<>]|:\/\/)/); u=a[4]; sub(/.*\//,"",a[4]); print u,a[4],a[12]}' file
www.youtube.com/user/airuike airuike lily weisy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:49:14.797

由于是 html，而且 html 应该用 html 解析器而不是 grep/sed/awk 来解析，所以你可以使用我的[Xidel](http://videlibri.sourceforge.net/xidel.html)的模式匹配功能。

```
 xidel yourfile.html -e '<a class="yt-uix-sessionlink yt-user-name " dir="ltr">{$link := @href, $user := substring-after($link, "www.youtube.com/user/"), $name:=text()}</a>*' 
```

或者，如果您想要类似 CSV 的结果：

```
 xidel yourfile.html -e '<a class="yt-uix-sessionlink yt-user-name " dir="ltr">{string-join((@href, substring-after(@href, "www.youtube.com/user/"), text()), ", ")}</a>*' --hide-variable-names 
```

* * *

有点难过，你也想要艾瑞克琴弦，否则就这么简单

```
xidel /yourfile.html  -e '<a href="{$link}" class="yt-uix-sessionlink yt-user-name ">{$name}</a>*' 
```

（你应该可以使用`xidel '<a href="{$link:=., $user := filter($link, www.youtube.com/user/(.*)\', 1)}" class="yt-uix-sessionlink yt-user-name " dir="ltr">{$name}</a>*'`，但似乎我还没有考虑过语法。只是 *一个*错误检查，它破坏了一切。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T00:52:42.337

我认为这样的事情必须有效

```
while read line
do
    href=$(echo $line | grep -o 'http[^"]*')
    user=$(echo $href | grep -o '[^/]*$')
    text=$(echo $line | grep -o '[^>]*<\/a>$' | grep -o '^[^<]*')

    echo href: $href
    echo user: $user
    echo text: $text
done < yourfile 
```

正则表达式基础：[http ://en.wikipedia.org/wiki/Regular_expression#POSIX_Basic_Regular_Expressions](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Basic_Regular_Expressions)

更新：检查并修复

# ruby-on-rails - 在提交之前，Rails 表单验证出现在页面加载中

> ID：13982634
> 
> 赞同：0
> 
> 时间：2012-12-21T00:26:24.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好吧，我必须错过一些简单的东西。

我正在使用部分“/shared/_error_messages.html.erb”来处理

`<%= render 'shared/error_messages', object: f.object %>`

在我的表格中（一个用于添加程序，一个用于添加指标）。

当我导航到任何表单（/programs/new 和 metrics/new）时，验证会在页面加载时出现。

programs_controller 和 metrics_controller 在结构上是相同的（在 metrics_controller 中将 @metrics 替换为 @programs）：

```
#programs_controller.rb
def new
  @programs = Program.new(params[:name])
  if @programs.save
    flash[:success] = "Program saved"
    redirect_to "/program"
  else
    render 'new'
  end
end 
```

有什么想法可能导致这种情况吗？

这是部分内容：

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
     <% object.errors.full_messages.each do |msg| %>
       <li>* <%= msg %></li>
     <% end %>
    </ul>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:54:32.487

我不知道错误是什么，但问题是您正在将对象保存在`new`操作中。保存产生对象错误；这就是你看到它们的原因。

在`RESTful`某种程度上，新操作应该只是实例化一个模型并将对象传递给您的表单。表单会将其提交给`create`操作；你应该在哪里保存你的对象并检查错误。
就像是：

```
#programs_controller.rb
def new
  @programs = Program.new
end

def create
  @programs = Program.new(params[:program])
  if @programs.save
    # success
  else
    # failure
  end
end 
```

# jquery - 如何获取元素值然后在 :contains jquery 中使用它

> ID：13982638
> 
> 赞同：0
> 
> 时间：2012-12-21T00:27:10.607
> 
> 标签：jquery

我需要获取 h1 PHP echoed Page Title 元素的值，然后使用它来查找 li PHP echoed category name 中的任何匹配项，然后如果匹配，则将一个类添加到 span。这在jquery中可能吗？

```
<h1>PHP echoed Page Title</h1>
<ul>
<li><a href="">PHP echoed category name</a>
<span class="open">X</span>
  <ul>
    <li><a href="">PHP echoed category name</a></li>
    <li><a href="">PHP echoed category name</a></li>
    <li><a href="">PHP echoed category name</a></li>
</ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:31:11.923

这个解决方案中有一些假设。

假设 1：h1 是页面上唯一的 h1。

假设 2：您要附加的类是 'fooClass'

假设 3：您不想删除任何其他类。

假设 4：您不想在 li 中测试严格的字符串相等性，您想查看文本是否存在，您关心大小写，并且通常不想做任何正则表达式/字符串按摩魔术。

```
 header_text = $('h1').text();
    $('.open ul li').each(function(){
        if($(this).text().indexOf(header_text) != -1){
             $(this).parent().parent().addClass('fooClass');
             return(true); //this will terminate execution to avoid adding fooClass more then once.
        }           
    }); 
```

# c++ - 赋值运算符的定义是否存在缺陷？

> ID：13982644
> 
> 赞同：0
> 
> 时间：2012-12-21T00:27:44.633
> 
> 标签：c++, c++11, standards, variable-assignment

在我的 C++11 标准 (ISO/IEC 14882:2011(E)) 副本中，赋值运算符定义包括：

> 在简单赋值 ( `=`) 中，表达式的值替换左操作数引用的对象的值。

这不应该说“右操作数的值”而不是“表达式的值”吗？目前它似乎模棱两可，很容易被解释为“赋值表达式的值”。

在 [expr.ass] 的另一段中，“表达式”一词也有歧义：

> 如果左操作数不是类类型，则表达式被隐式转换（第 4 条）为左操作数的 cv 非限定类型

我认为这也意味着“正确的操作数”，对吧？

这也是我能找到的赋值运算符效果的唯一定义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T02:36:12.820

该标准通常假设读者有一些**常识**。

例如，在某些地方，它显然将对象和类的概念混为一谈。

这样做是为了避免由于文本中不必要的冗余而降低可读性，符合 DRY 原则：不要重复自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T00:32:41.613

“左操作数”在这两种情况下都是正确的：

1.  被替换的值是左操作数引用的对象。它将获得正确操作数的值，但这不是第一个引用描述的一部分。
2.  将值分配给非类类型时，该值清楚地转换为分配给对象的类型，即左操作数。

# php - php 输出部分代码没有任何回显

> ID：13982646
> 
> 赞同：0
> 
> 时间：2012-12-21T00:27:50.623
> 
> 标签：php, html

这是我的一段代码（全身代码）：

```
<body>
    <script type='text/javascript'>
        function AddEvent(Syear, Smonth, Sday, Eyear, Emonth, Eday, hallNumber){
            ...
        }
    </script>
    <?php
        function GetMonthByCoding($first , $second , $third) {
            ...
        }

        function GetDateByCoding($coding){
            ...
        }

        function GetDateFromLine($line){
            ...
        }

        $userid = '...';
        $magicCookie = 'cookie';

        $feedURL = "...";
        $sxml = simplexml_load_file($feedURL);

        foreach ($sxml->entry as $entry) {
            $title = stripslashes($entry->title);
            if ($title == "HALL") {
                $summary = stripslashes($entry->summary);
                $date = GetDateFromLine($summary);
                echo ("<script type='text/javascript' language='JavaScript'> AddEvent(" . $date['start']['year'] . ", " . $date['start']['month'] . ", " . $date['start']['day'] . ", " . $date['end']['year'] . ", " . $date['end']['month'] . ", " . $date['end']['day'] . "); </script>");
            }
        }
    ?>
  </body> 
```

*   `AddEvent()`是前面定义的 JavaScript 函数。

    我在浏览器中得到的是：

```
条目为 $entry) { $title = stripslashes($entry->title); if ($title == "HALL") { $summary = stripslashes($entry->summary); $date = GetDateFromLine($summary); 回声（“”）；} } ?>

```

看起来这是一个回声，但你可以看到在 foreach 中间没有回声。

谁能说我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:35:05.510

PHP 未安装，或未启用，或文件不是`.php`文件或服务器未被告知将其识别为要解析的文件。

尝试一下`View Source`，您应该会看到所有 PHP 代码。它出现的唯一原因是浏览器认为从`<?php`第一个到第一个的所有内容都是无效标签。`>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:31:15.853

我发现了问题，它是在变量 sxml 的名称中。我重命名它并且问题逃脱了。

# c++ - 在 Xcode 4 中使用和引用多个 cpp 文件

> ID：13982653
> 
> 赞同：1
> 
> 时间：2012-12-21T00:28:32.023
> 
> 标签：c++, xcode, compiler-errors

我是编程新手，我目前正在处理一个太大而无法保存在单个 cpp 文件中的项目，因此我决定将其拆分为不同 cpp 文件中的组成部分。

该项目有3个cpp文件；

> main.cpp、TwinCameraCapture.cpp、FaceCalibration.cpp、

代码的所有内容都在 FaceCalibration.cpp 和 TwinCameraCapture.cpp 中，main.cpp 如下所示：

```
#include "FaceCalibration.cpp"
#include "TwinCamCapture.cpp"

int main ()
{
    FaceCalibration();

    TwinCameraCapture();
} 
```

FaceCalibration 和 TwinCameraCapture 是它们各自 .cpp 文件中的主要功能。

现在，我知道我在这里做错了什么，我只是不知道它到底是什么。我在尝试编译时遇到的错误是：

> Apple Mach-O 链接器 (Id) 错误
> 
> 命令 /Developer/usr/bin/llvm-g++-4.2 失败，退出代码为 1

有人可以解释我做错了什么以及如何解决它，或者给我指一个可以这样做的指南吗？

谢谢

编辑：完整的错误信息是：

```
 ld: duplicate symbol getWindow(cv::Rect_<int>)   in
 /Users/facebooth/Library/Developer/Xcode/DerivedData/FullProgramTest-
awrdeznffntuoacjytwewfbjdmza/Build/Intermediates/FullProgramTest.build/Debug/FullProgramTest.build/Objects-normal/x86_64/FaceCalibration.o and 
/Users/facebooth/Library/Developer/Xcode/DerivedData/FullProgramTest-
awrdeznffntuoacjytwewfbjdmza/Build/Intermediates/FullProgramTest.build/Debug/FullProgramTest.build/Objects-normal/x86_64/main.o for architecture x86_64
    Command /Developer/usr/bin/llvm-g++-4.2 failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:49:01.933

通常，您不会将 .cpp 文件用作#include。您应该包含一个 .h 文件。

知道您的实际错误消息是什么会很有帮助，而不仅仅是“它失败了”，但我怀疑它是“重复的标识符”或类似的 - 因为您的 IDE 已经在编译和链接您的文件 TwincameraCapture.cpp，然后你去使那段代码成为你的主要源代码的一部分，这意味着编译器生成了两次相同的代码，并且链接器说“你的意思是其中的哪一个？” 当它看到两个名称完全相同的函数时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T04:21:50.457

Simply rename the .cpp file that **doesn't** include the main() function to a .h file and then adjust the #include appropriately and it will work. I haven't got far enough along to get to headers to know why it is like that in xCode or anything but I do know that this works.

# php - 如何根据当前版本运行 Phing 目标？

> ID：13982657
> 
> 赞同：0
> 
> 时间：2012-12-21T00:28:50.207
> 
> 标签：php, phing

如何创建一个 Phing 构建脚本来处理部署，并将项目从当前版本迁移到最新版本？

假设我已将部署分解为增量版本更新。假设我的实时服务器正在运行版本 1，我想部署版本 3

构建脚本应该将版本 1 更新到版本 2，然后从版本 2 更新到版本 3。

所以构建脚本可能看起来像这样。

```
<project name="deploy">
      <target name="version1">
           <if_version_is_0>
               ..do update
           </if_version_is_0>
      </target>
      <target name="version2" depends="version1">
           <if_version_is_1>
               ..do update
           </if_version_is_1>
      </target>
      <target name="version3" depends="version2">
           <if_version_is_2>
               ..do update
           </if_version_is_2>
      </target>

      <target name="build" depends="version3"/>
</project> 
```

我的问题是线路

```
<if_version_is_##> 
```

如何根据项目的当前版本创建条件？

我确实在文档中找到了[VersionTask](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#VersionTask)，但它处理版本号增加。我需要将当前版本读入一个属性或类似的东西。怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:39:29.353

我认为这个功能可能会做我想要的。

[http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixB-CoreTasks.html#LoadFileTask](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixB-CoreTasks.html#LoadFileTask)

```
<loadfile property="version" file="version.txt"/> 
```

这将让我将当前版本作为属性获取，然后我可以将其用作执行更新的条件。

# sql - 给每个记录子集一个组 ID

> ID：13982661
> 
> 赞同：0
> 
> 时间：2012-12-21T00:29:11.073
> 
> 标签：sql, sql-server

我需要为记录的子集分配等级。样本数据：

```
Colour Code        Size Code
DWMUL040             7
DWMUL040             8
DWMUL040             9
DWMUL040             10
DWMUL040             7
DWMUL040             8
DWMUL040             9
DWMUL040             10
DWMUL040             7
DWMUL040             8
DWMUL040             9
DWMUL040             10
DWMUL040             7
DWMUL040             8
DWMUL040             9
DWMUL040             10 
```

我需要数据看起来像这样：

```
Group ID            Colour Code        Size Code
1                   DWMUL040             7
1                   DWMUL040             8
1                   DWMUL040             9
1                   DWMUL040             10
2                   DWMUL040             7
2                   DWMUL040             8
2                   DWMUL040             9
2                   DWMUL040             10
3                   DWMUL040             7
3                   DWMUL040             8
3                   DWMUL040             9
3                   DWMUL040             10
4                   DWMUL040             7
4                   DWMUL040             8
4                   DWMUL040             9
4                   DWMUL040             10 
```

该列表将被排序，并且基本上，每当尺寸代码更改时，它就是一个新组。我有一种感觉，这会很难，因为尺码（这些是服装尺码）可以是任何“例如 XL”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:59:46.693

```
 select [colour code], [size code],
         row_number() over (partition by [colour code], [size code]
                            order by 1/0) [group id]
    from tbl
order by [group id], [colour code], [size code]; 
```

# objective-c - “未使用的变量”

> ID：13982662
> 
> 赞同：1
> 
> 时间：2012-12-21T00:29:13.870
> 
> 标签：objective-c

```
@implementation demoScene{

-(void) initializeScene {
moon *_moon=[[moon alloc]init];
}
-(void) updateBeforeTransform: (CC3NodeUpdatingVisitor*) visitor {

    deltaTime =deltaTime+visitor.deltaTime;
    NSLog(@"delta time=%0.12f",deltaTime);
    [_moon print:deltaTime/100000];
}
@end 
```

这是我的问题。

我想在方法中从月球类创建一个对象，`initializeScene`并且我想在方法中向该对象发送消息`updateBeforeTransform`。

当我输入这样的代码时，我无法向`_moon`对象发送消息并获得**“未使用的变量”警告消息。**

我知道该对象超出范围，但如果我需要从`updateBeforeTransform`方法发送消息。方法在`updateBeforeTransform`一秒钟内被调用 60 次。所以我不想在一秒钟内创建一个对象 60 次。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:32:17.617

您需要一个实例变量，而不是在`initializeScene`方法中创建一个新变量：

```
@implementation demoScene {
    moon *_moon; // You may already have this in the .h file - just have it in 1 place.
}

- (void)initializeScene {
    _moon = [[moon alloc] init]; // assign to ivar
}

- (void)updateBeforeTransform:(CC3NodeUpdatingVisitor*) visitor {
    deltaTime = deltaTime + visitor.deltaTime;
    NSLog(@"delta time=%0.12f", deltaTime);
    [_moon print:deltaTime / 100000];
}

@end 
```

旁注 - 类名应以大写字母开头。变量和方法名称以小写字母开头。

# c++ - Windows 应用商店应用程序的扩展 SDK 在远程调试期间不起作用

> ID：13982667
> 
> 赞同：0
> 
> 时间：2012-12-21T00:29:53.383
> 
> 标签：c++, visual-studio-2012, windows-8, windows-runtime, visual-studio-2013

我创建了一个[扩展 SDK](http://msdn.microsoft.com/en-us/library/jj127117.aspx)，它基本上由我使用 C++/CX 编写的 Windows 运行时组件组成。我这样做是为了让我的组件可供使用任何语言（C++、C# 或 JavaScript）构建 Windows 8 应用商店应用程序的开发人员使用。

SDK 在我的本地机器上运行良好。我可以在调试和发布配置中本地构建和运行我的应用程序。但是，当我尝试在远程机器上远程调试我的应用程序时，我注意到我的应用程序在尝试使用我的 SDK 中的组件时失败了。奇怪的是，仅当我的应用程序在调试模式下运行时才会发生此故障。在发布模式下，一切正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:52:42.867

## 使用 Visual Studio 2012

我想我想通了。我在我的 Extension SDK 的 redist 文件夹下的 Debug 和 Retail 文件夹中包含了 C++/CX WinRT 组件的相同二进制文件。

因此，此二进制文件始终依赖于 Visual Studio 2012 的发布 CRT。

现在，当我远程运行我的应用程序的发布版本时，应用程序二进制文件和 SDK 组件二进制文件都依赖于发布 CRT。并且在系统上也可以找到发布 CRT，因为该应用程序依赖于发布 VCLibs 包。所以发布应用程序工作正常。

但是，当我远程运行我的应用程序的调试版本时，该应用程序依赖于 Visual Studio 2012 中的调试 CRT，但 SDK 组件依赖于发布 CRT。由于该应用程序仅依赖于调试 VCLibs 包，因此它仅在运行时找到调试 CRT。因此 SDK 组件无法加载。

解决方案是确保在创建 SDK 时，发布二进制文件依赖于发布 CRT，而调试二进制文件依赖于调试 CRT。

有关 C++ 运行时如何用于 Windows 应用商店应用程序的详细信息，请参阅以下链接：http: [//blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)

* * *

更新它现在可以在 Visual Studio 2013 中使用

## 使用 Visual Studio 2013

在 Visual Studio 2013 中，VCLibs 调试 AppX 包包含调试和发布 CRT DLL。因此，在调试配置中，应用程序依赖于调试 CRT，而扩展 SDK 二进制文件依赖于发布 CRT。这两个 DLL 都可以在 VCLibs Debug AppX 包中找到。所以它有效。

# javascript - 如何将错误/信息 div 与其上方的文本框链接起来

> ID：13982671
> 
> 赞同：0
> 
> 时间：2012-12-21T00:30:15.697
> 
> 标签：javascript, html, forms

我有一个带有几个输入框的非常标准的 html 表单。我在每个文本框下都有一个小 div，当文本框具有焦点时显示方向（其余时间它们被隐藏）。div 还可以更改颜色并显示错误消息。

我希望能够有一个 javascript 函数来显示焦点方向，一个函数来显示模糊错误，一个函数来隐藏方向/错误等。

我遇到的问题是如何最好地将文本框和它们各自的 div 关联起来。我使用了一个命名约定，我给文本框一个 ID `field1`，然后调用它们的 div `field1Div`。这工作正常，但有些事情告诉我有更好的方法来做到这一点。

关联 div 和文本框的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:00:07.813

标签可能是更好的方法，但如果你想使用 Divs - 你可以使用这样的东西：

```
<html>
<head>
<script>
    function giveDirections(obj){  
obj.nextElementSibling.style.display="block"                
    }
    function hideDirections(obj){
    obj.nextElementSibling.style.display="none"
    }
    </script>
    </head>
<body>
    <input id="test" name="test" onfocus="giveDirections(this)" onblur="hideDirections(this)" />
    <div style="display:none">Hi I am some directions</div>
    </body>
</html> 
```

[http://jsfiddle.net/zq533/8/](http://jsfiddle.net/zq533/8/)

使用 this.nextElementSibling - 但我不确定每个浏览器都支持 - 我在 FF、IE 和 Chrome 上尝试过它并且它有效。

我确信有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:46:50.963

您可以为输入框定义自定义属性。

```
<html>
<head>
<script>
    function showHint(obj){  
        document.getElementById(obj.getAttribute("hintbox")).style.visibility = "visible";                  
    }
    function hideHint(obj){
        document.getElementById(obj.getAttribute("hintbox")).style.visibility = "hidden";  
    }
    </script>
    </head>
<body>
    <input hintbox="div1" onfocus="showHint(this)" onblur="hideHint(this)" />
    <div id="div1" style="visibility:hidden">hint 1</div>
    <input hintbox="div2" onfocus="showHint(this)" onblur="hideHint(this)" />
    <div id="div2" style="visibility:hidden">hint 2</div>
    </body>
</html>​ 
```

[http://jsfiddle.net/YhefV/](http://jsfiddle.net/YhefV/)

# javascript - Javascript 对象自定义函数

> ID：13982673
> 
> 赞同：2
> 
> 时间：2012-12-21T00:30:34.137
> 
> 标签：javascript, object, prototype, extend

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
> [Javascript 臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

我有一个基本功能，我想控制最终变成“bumpbox”的东西。我的目标是实例化这个的多个实例，并给每个声明的变量一个自定义配置。

该对象如下所示：

```
Project.Modules.bumpbox = function(in_trigger, container) {

    var config = {

        'speed': 500,
        'easing' : false,//will 
        'in_callback': false,
        'out_callback' : false,
        'visible': false,
        'out_trigger' : $('#bumpbox_out_trigger'),//this is set by default only change if you know what you are doing!
    };

    this.test = function() {

        //this should be the default function. 

    }; 
```

然后，从另一个文件中，我想实例化一个像 new Project.Modules.Bumpbox() 这样的实例并覆盖测试函数。

```
var bumpbox_controllers = {

            "map" : new Project.Modules.bumpbox($('#navigation_top li.map'), $('.bumpbox.map')),
            "contact" : new Project.Modules.bumpbox($('#navigation_top li.contact'), $('.bumpbox.contact')),
            "about" : new Project.Modules.bumpbox($('#navigation_left li.about'), $('.bumpbox.about')),
            "team" : new Project.Modules.bumpbox($('#navigation_left li.team'), $('.bumpbox.team')),
            "careers" : new Project.Modules.bumpbox($('#navigation_left li.careers'), $('.bumpbox.careers')),
            "services" : new Project.Modules.bumpbox($('#navigation_left li.services'), $('.bumpbox.services'))
        }; 
```

然后我想遍历其中的每一个并在每个中设置一个自定义 test() 函数，如下所示：

```
 bumpbox_controllers[i]['test'] = function() {

        alert(i);
    } 
```

但是当我运行这段代码时，它会将所有元素切换到最后一个调用的 i 值，在本例中为“服务”，而不是给每个元素一个唯一的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:42:18.427

您似乎需要为循环[关闭：](https://stackoverflow.com/q/750486/1048572)

```
for (var controller in bumpbox_controllers) {
    bumpbox_controllers[controller] = (function(i) {
        // creating a new context for i
        return function() {
            alert(i); // access the i in scope, not the controller
        }
    })(controller);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:41:20.707

要让每个`test()`都有自己的独特性`i`，请尝试：

```
bumpbox_controllers[i]['test'] = (function (i) {
    return function () {
        alert(i);
    };
}(i));​ 
```

# ruby-on-rails - Heroku 没有列出 pg_search_documents 表

> ID：13982690
> 
> 赞同：0
> 
> 时间：2012-12-21T00:32:00.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, pg-search

`pg_search_documents`这很奇怪，但由于某种原因，当我使用[heroku-sql-console](https://github.com/ddollar/heroku-sql-console)列出表时，heroku 似乎没有显示该表。

```
>> heroku sql

SQL> show tables
+------------------------+
|       table_name       |
+------------------------+
| activity_notifications |
| attachments            |
| businesses             |
| color_modes            |
| comments               |
| counties               |
| customer_employees     |
| customers              |
| delayed_jobs           |
| file_imports           |
| invitations            |
| invoices               |
| jobs                   |
| paper_stocks           |
| paper_weights          |
| quotes                 |
| rails_admin_histories  |
| schema_migrations      |
| tax_rates              |
| users                  |
+------------------------+ 
```

如您所见，没有提到 pg_search。

然后，在同一个会话中，

```
SQL> select * from pg_search_documents;
+---------------------------------------------------------------------------------------------------------------------+
| id |       content       | searchable_id | searchable_type  |        created_at         |        updated_at         |
+---------------------------------------------------------------------------------------------------------------------+
|  3 | Energy Centre       |             3 | Customer         | 2012-12-03 19:33:55 -0800 | 2012-12-03 19:33:55 -0800 |

+---------------------------------------------------------------------------------------------------------------------+ 
```

有趣的是，该`show tables`命令只列出了 20 个表，而`heroku pg:info`说有 21 个。

这是一个问题而不是好奇的原因是因为我无法`heroku db:pull`拉下`pg_search_documents`表格（其他一切都很好）并且我无法测试生产数据的迁移。

我`PG Version: 9.1.6`在heroku和`PostgreSQL 9.2.1`本地使用。还有 PgSearch 0.5.7。

任何想法是什么问题？

# c# - 如何处理空字符串？

> ID：13982693
> 
> 赞同：4
> 
> 时间：2012-12-21T00:32:17.867
> 
> 标签：c#, asp.net, .net

假设我有以下代码：

```
Request.QueryString["ids"].Split('|'); 
```

如果`ids`查询字符串中不存在，这将引发异常。是否有一种普遍接受的方法来处理这种情况。我认为以下所有选项都可以防止出现错误，但我想知道是否有一个（或完全不同的方法）被普遍接受为更好。

```
string[] ids = (Request.QueryString["ids"] ?? "").Split('|'); 
```

或者

```
string[] ids;
if(!String.IsNullOrEmpty(Request.QueryString["ids"]))
{
   ids = Request.QueryString["ids"].Split('|')
} 
```

或者

`?`

我认为所有这些都会起作用，但它们看起来有点难看。有没有更好的办法？

*更好 = 更容易阅读、更快、更高效或以上所有。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T00:39:54.083

我喜欢为此使用扩展方法：

```
public static string EmptyIfNull(this string self)
{
    return self ?? "";
} 
```

用法：

```
string[] ids = Request.QueryString["ids"].EmptyIfNull().Split('|'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:39:46.273

我个人会使用

```
string idStr = Request.QueryString["ids"];
ids = idStr == null ? new string[0] : idStr.Split("|"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:39:03.743

```
string[] ids = (Request.QueryString["ids"] as string).Split('|'); 
```

这将以与以下相同的方式失败`Request.QueryString["ids"]`

```
string[] ids;
if(!String.IsNullOrEmpty(Request.QueryString["ids"]))
{
   ids = Request.QueryString["ids"].Split('|')
} 
```

更重，可能会调用两次数据检索逻辑（并且您可能会因错误而产生两次副作用）=> 使用临时存储数据但更重。

```
string[] ids = (Request.QueryString["ids"] ?? "").Split('|'); 
```

绝对是最简单、最干净和更有效的方式，因为编译器会自己生成一个临时文件。

如果您经常遇到这种处理，您可以使用一堆具有流畅名称和行为的方法来构建自己的管道库。

# javascript - 如何按类获取元素？

> ID：13982697
> 
> 赞同：1
> 
> 时间：2012-12-21T00:32:52.277
> 
> 标签：javascript

下面是我的代码。我有一个搜索查询，它返回列表中的项目列表，其中包含一个弹出链接，该链接应显示与单击的相关的数据。我遇到的问题是我正在使用`getElementById`它并且它不能被重用，所以当弹出函数在列表的所有项目中相乘时，弹出窗口只显示与列表中的第一项相关的数据。

```
function pop() {
    var x = document.getElementById('popup');
    x.style.display = 'block';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:35:26.400

使函数通用。如果您通过事件处理程序调用它，那么您可以`pop`像这样重新格式化您的函数：

```
function pop() {
    this.style.display = 'block';
} 
```

# c# - 反映具有在单独程序集中定义的类型的属性的类

> ID：13982700
> 
> 赞同：3
> 
> 时间：2012-12-21T00:33:54.737
> 
> 标签：c#, .net, wcf, reflection

我有以下 WCF 课程：

```
namespace BusinessServices.Exposure.Data
{
    [DataContract]
    public class RiskItemBO : ExposureBO
    {
        [DataMember]
        public RiskItemBusinessService RiskItemBusinessService { get; set; }
    }
} 
```

`RiskItemBusinessService`是一个在其他 DLL 中定义的类，由、`String`和`Int`变量`Short`组成。我有方法为这些数据类型生成随机值。

我有以下问题：

我正在使用 Type.GetProperties() 来获取类中的所有属性，这确实给了我属性的名称`RiskItemBusinessService`，但是，当我尝试这样做时`PropertyInfo.PropertyType`，我得到`FileNotFoundException`（`RiskItemBusinessService`在不同的 DLL 中）。为此，我正在捕获异常并将 DLL 加载到 catch 子句中，但是当我尝试这样做`PropertyInfo.SetValue`时，`FileNotFoundException`即使我刚刚使用`Assembly.LoadFile`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:55:32.890

这很可能是您希望在客户端的服务引用中使用重用程序集的情况。

本质上，正如 John 所指出的，您添加了对包含`RiskItemBusinessService`. 然后您转到服务引用配置并启用选项以重用引用类型，对于特定引用，勾选您刚刚添加的程序集。这会重新生成没有指定类型代理的服务引用。从这里开始，您的服务将从程序集引用中构造变量，因此您应该能够像使用任何其他类型一样使用它。 ![在此处输入图像描述](../Images/9141c46e8936677bd04fbf697a918c25.png)

# ruby-on-rails - 查询期间Rails空白列名

> ID：13982701
> 
> 赞同：1
> 
> 时间：2012-12-21T00:34:10.700
> 
> 标签：ruby-on-rails, postgresql

我正在使用 Rails 和 Postgres，在加载和处理数据的过程中，我必须手动创建表并插入数据（好吧，脚本化，但重点是我没有使用 Rails/迁移）。我有一个正确定义的模型，但做的事情如下：

`Coordinator.find(123)`返回：

```
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for nil:NilClass
ActiveRecord::StatementInvalid: PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: ...tors".* FROM "coordinators"  WHERE "coordinators"."" = $1 LI...
: SELECT  "coordinators".* FROM "coordinators"  WHERE "coordinators"."" = $1 LIMIT 1 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:39:51.653

如果我对您的理解正确，您的模型上应该缺少一行，使您的表和 activerecord 之间建立了这种链接，有点像这样：

```
class Coordinator > ActiveRecord::Base
  set_table_name "coordinators"
  ... # stuff
end 
```

pcragone 编辑：

我只想添加那个运行

```
rake db:migrate
rake db:schema:dump 
```

似乎在没有设置表名的情况下解决了问题

# sockets - 套接字编程：这里有什么问题？

> ID：13982704
> 
> 赞同：0
> 
> 时间：2012-12-21T00:34:17.937
> 
> 标签：sockets, tcp

代码

```
struct sockaddr_in ser;
...
#line 68
fprintf(stderr, "Can't find host %s\n", inet_ntoa(ser.sin_addr)); 
```

编译（gcc ...）警告

```
68: warning: format '%s' expects type 'char *', but argument 3 has type 'int' 
```

但是“inet_ntoa()”确实应该返回“char *”，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:50:45.997

默认情况下，在没有活动原型的情况下使用的函数返回一个`int`. 此行为在 ISO C 标准中指定（至少在 C90 中）。

您需要包含声明该函数的头文件，以便编译器具有正确的原型。

# ruby - Ruby脚本'杀死'

> ID：13982707
> 
> 赞同：6
> 
> 时间：2012-12-21T00:34:55.217
> 
> 标签：ruby, amazon-web-services

我正在从命令行运行一个 ruby​​ 脚本。该脚本下载一个文件 (15 MB)，将其解压缩，将其解析为 JSON，然后用它填充一个 mysql 数据库。

当我运行它时，我会收到一条简单的“Killed”消息。这是怎么回事？我怎样才能找出问题所在？

我在 EC2 微型实例上使用它。

谢谢

这是脚本

```
require 'open-uri'
require 'zlib'
require 'json'

require_relative '../db/db.rb'

dl = open('........')
ex = Zlib::GzipReader.new dl
json = JSON.parse ex.read
events = json['resultsPage']['results']['event']

puts "starting to parse #{events.count} event(s)..."
created = 0
updated = 0

events[1..10].each do |event|
    performances = event['performance']
    performances.each do  |performance|
        ar_show = Show.find_or_initialize_by_songkick_id performance['id']
        ar_show.artist_name = performance['displayName']
        ar_show.new_record? ? created += 1 : updated += 1
        ar_show.save!
    end
end

Import.create :updated => updated, :new => created
puts "complete. new: #{created}   -   updated: #{updated}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T15:13:54.303

您几乎可以肯定内存不足，因为微型实例没有太多可用的内存或交换空间。我在 Perl 程序中遇到过这种情况。动态语言在处理大量数据时会占用大量内存。

测试这个理论的最好方法是在一个小时内启动一个小型或大型实例（这样您就不会为此付出太多）并在那里尝试脚本。如果它运行，您就知道微实例太小，您的程序无法在其上运行。

# ruby - 用于测试失败的 RSpec 较短的回溯输出

> ID：13982708
> 
> 赞同：11
> 
> 时间：2012-12-21T00:35:03.867
> 
> 标签：ruby, rspec

我正在使用 RSpec（最新版本，2.12.2）来测试我正在研究的一个小型 Rub​​y 类。我的问题是，当 RSpec 测试失败时，测试输出看起来非常冗长，并显示大量错误消息，几乎是完整的回溯。这意味着我必须向上滚动才能看到实际的错误消息和跟踪的顶部。

我相信默认情况下 RSpec 应该这样做，但它似乎并没有为我做这件事。例如，如果我运行`rspec spec/my_spec.rb:132`（只运行 L132 上的一项测试），我会得到以下输出：

```
 Failure/Error: @f.has_changed?("test").should be_true
   expected: true value
        got: false
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/fail_with.rb:33:in `fail_with'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/handler.rb:33:in `handle_matcher'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/syntax.rb:53:in `should'
 # /Users/JackFranklin/Dropbox/Sites/rubygems/filefixtures/spec/filefixtures_spec.rb:137:in `block (4 levels) in <top (required)>'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:114:in `instance_eval'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:114:in `block in run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:254:in `with_around_each_hooks'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:111:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:388:in `block in run_examples'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:384:in `map'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:384:in `run_examples'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:369:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `block in run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `map'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `block in run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `map'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `map'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `block in run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/reporter.rb:34:in `report'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:25:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
 # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

如您所见，这绝对是巨大的。我周围没有任何 RSpec 配置文件可能会改变传递给 RSpec 的配置。

有没有人见过这个？我试过谷歌搜索，但搜索没有结果。

编辑：然后我设置配置以确保它正在应用默认的回溯清理：

```
RSpec.configure do |config|
  # RSpec automatically cleans stuff out of backtraces;
  # sometimes this is annoying when trying to debug something e.g. a gem
  config.backtrace_clean_patterns = [
    /\/lib\d*\/ruby\//,
    /bin\//,
    /gems/,
    /spec\/spec_helper\.rb/,
    /lib\/rspec\/(core|expectations|matchers|mocks)/
  ]
end 
```

但这并没有什么不同。查看输出，应该将大部分内容过滤掉，但似乎没有应用配置？

再次编辑：

在我的配置中，我什至可以运行`cleaned_from_backtrace?(line)`以查看是否应该清理线路。这返回`true`：

```
 config.cleaned_from_backtrace?("/Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/fail_with.rb:33:in `fail_with'") 
```

但是终端中的实际输出保持不变！

编辑3：

我正在使用 command 运行 RSpec，仅此`rspec`而已。该项目的`.rspec`文件包含：

```
--color
--format progress 
```

也没有`~/.rspec`文件可以应用设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T20:16:48.420

[因此，在与Github 上](https://github.com/rspec/rspec-core/issues/754)的 RSpec 人员多聊了一会儿之后，我设法找到了问题所在。

问题在于，默认情况下，RSpec 会从回溯中删除与 Regex /gems/ 匹配的行。`gems`我将我的项目放在一个名为:的文件夹中`~/Dropbox/rubygems/myproject`，所以回溯的每一行都被删除了，当这种情况发生时，RSpec 会明智地向您显示整个回溯。

这解释了我所看到的行为。

总是那么傻。我希望如果其他人这样做，也许这个答案会为他们节省一些时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T01:15:38.570

看起来您正在使用`-b`, 运行 RSpec 以获得完整的回溯。通常，RSpec 不会像那样显示它自己的内部回溯，即使您的测试严重失败（即抛出异常而不仅仅是使断言失败）。如果您没有使用`-b`or显式运行它`--backtrace`，请检查并确保您没有在`.rspec`配置文件中设置该设置，或者您的 IDE 或任何未通过它的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:49:50.770

正如 Jim 所说，有一个`-b`or`--backtrace`选项可以启用完整的回溯。请记住，不仅仅是`.rspec`文件可以触发它；还有`~/.rspec`（对于开发人员的首选选项）。

要记住的另一件事是格式化程序可以吐出它想要的回溯的任何部分。格式化程序为任何第 3 方格式化程序提供了一种尊重回溯过滤配置的简单方法，但如果您使用的是第 3 方格式化程序，则不能保证它可以正确使用。您是否使用内置的 rspec 格式化程序之一？

最后，如果它不是其中之一，我没有想法。我必须有一个例子来回答你的问题。你能想出一个可重现的例子吗（希望是在一个要点上）？我尝试定期在 irc.freenode.net 的 rspec 频道闲逛，所以也许你可以在那里找到我，我们可以通过这种方式进行一些故障排除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-07T19:38:21.273

从版本 3.4.0 / 2015-11-11 开始，可以通过选项过滤回溯：

```
RSpec.configure do |config|
   config.filter_rails_from_backtrace!
end 
```

# objective-c - Sqlite插入语句不会在表中放一条记录

> ID：13982711
> 
> 赞同：1
> 
> 时间：2012-12-21T00:35:27.813
> 
> 标签：objective-c, sqlite, insert

此函数中的所有内容似乎都按预期工作，只是没有记录实际显示在数据库表中。如果我直接通过 Firefox sqlite manager 插件输入 sql，记录显示就好了。可能是一些令人沮丧的愚蠢，有什么想法吗？

```
- (IBAction)buttonInsertRecord:(id)sender
{
    // initializing db file access
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"KJV.sqlite"];

    // testing to see if database was found
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        // database not found
        labelStatus.text = @"database not found";
    }
    else
    {
        // database not found
        labelStatus.text = @"database found";
    }

    sqlite3_stmt *statement;
    sqlite3 *dbPointer;

    if (sqlite3_open(dbPath.UTF8String, &dbPointer) == SQLITE_OK)
    {
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO users (user_name, user_id) VALUES ('testuser', null);"];

        const char *insert_stmt = [insertSQL UTF8String];

        sqlite3_prepare_v2(dbPointer, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            labelStatus.text = @"added";
        }
        else
        {
            labelStatus.text = @"failed";
        }

        sqlite3_finalize(statement);
        sqlite3_close(dbPointer);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T01:00:30.127

```
 //your database is not writable because its in the bundle.
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"KJV.sqlite"]; 
```

如果你想要一个可读/可写的数据库，你可以这样做：

```
 - (void) createEditableCopyOfDatabaseIfNeeded 
    {   
        BOOL success;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSError *error;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"databasename.sqlite"];
        NSLog(@"writableDBPath == %@",writableDBPath);
        if ([fileManager fileExistsAtPath:writableDBPath])
        {
            NSLog(@"Database already exist");
        }
        else 
        {
            NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"databasename.sqlite"];
            success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
            if (!success) 
                NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
    } 
```

以及如何添加数据

```
- (void) addToDatabase
{
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"databasename.sqlite"];

        if(sqlite3_open([databasePath UTF8String], &mDatabase_update) == SQLITE_OK)
        {

            NSString *sqlQuery = [NSString stringWithFormat: @"Insert into table 
             .
             .
             .
             . 
```

# linux - 如何使用主要和次要编号获取设备文件名

> ID：13982713
> 
> 赞同：2
> 
> 时间：2012-12-21T00:35:53.120
> 
> 标签：linux, linux-kernel

我正在尝试在块 io 中添加一些调试消息以跟踪 linux 内核中的 io 操作。

IO 可能发生在多个块设备上，我对我`dev_t`有价值。

我可以从`dev_t`.

我想知道有没有办法`/dev/`使用这些主要和次要号码从 dir 获取设备文件名？

当然，我需要内核 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:04:19.030

这很简单：

1.  使用[bdget](http://lxr.free-electrons.com/source/include/linux/fs.h#L2047)函数查找`block_device`by `dev_t`。
2.  使用[bdevname](http://lxr.free-electrons.com/source/include/linux/fs.h#L2142)获取设备名称。
3.  使用[bdput](http://lxr.free-electrons.com/source/include/linux/fs.h#L2051)放置设备引用。

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T15:41:34.293

您也可以使用`libudev`. 由于您已经拥有`dev_t`id，因此这种方式更加简单。

```
#include <libudev.h>

// Create the udev context.
struct udev *udev = udev_new();

// Create de udev_device from the dev_t.
struct udev_device *dev = udev_device_new_from_devnum(udev, 'b', sb.st_dev);

// Finally obtain the node.
const char* node  = udev_device_get_devnode(dev);

udev_unref(udev); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:40:42.173

通常，您无法进行如此简单的反向映射。这是因为知道一些主要和主要数字，一个人总是可以`mknod`用来在任何地方创建有效的设备文件，不一定在`/dev`.

归根结底，内核并不关心具有特定主要/次要的任何特定设备节点是如何产生的——这样的节点只是内核设备驱动程序的入口点，可以处理这个硬件或软件设备。

当然，实际上在大多数现代 Linux 系统上，大多数设备节点都位于`/dev`其中并由其维护`udev`- 但它是用户空间守护进程，您的内核驱动程序无法与之通信。另请注意，`udev`可以配置为创建具有任何名称的新设备节点。

# sql - 特殊情况 where 子句的更好方法？

> ID：13982716
> 
> 赞同：1
> 
> 时间：2012-12-21T00:36:07.727
> 
> 标签：sql, where-clause

我有一个“特殊情况”需要在`sql`脚本中考虑。这是我到目前为止所拥有的，我“认为”它有效，但看起来很乱。它`sproc`假设有一个`@empStatus`参数。如果员工的`@empStatus=2`我想用`Status`of`1`或退回所有员工的`2`。

```
select *
from Employees
where Title='Associate' and Status=@empStatus and Department='Sales'
    OR (@empStatus=2 and (Status=@empStatus or Status=1) and Title='Associate' and Department='Sales') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:40:46.953

这应该涵盖它

```
SELECT 
    *
FROM
    Employees
WHERE
   Title='Associate'
   AND Department='Sales'
   AND ((Status=@empStatus) OR (@empStatus=2 AND Status=1)) 
```

# objective-c - 当我向上滑动 UIView 时调整 UITableView 的大小，就像显示键盘时发生的情况一样

> ID：13982718
> 
> 赞同：1
> 
> 时间：2012-12-21T00:36:11.643
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我正在向上滑动`UIView`a`UIDatePicker`作为子视图。这是在我的上方添加的`UITableView`，但不幸的是一些 tableView 行仍在我的`UIView`.

**UITableView 用键盘向上推：**

![在此处输入图像描述](../Images/1031603ce92d660e3792dcd9387eca04.png)

**UITableView 没有被我的观点推高，涵盖了最后几个领域：**

![在此处输入图像描述](../Images/da60da6d39b1dc37b094f0800ddc2b18.png)

当我向上滑动视图时是否可以动态调整大小`UITableView`，就像在 a 中显示键盘`tableView`并且仍然可以看到所有行一样？

**编辑：**

刚刚找到了一个很棒的 Apple 示例：http: [//developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:43:17.940

对的，这是可能的。作为向上滑动视图的动画的一部分，您可以继续动态更改 UITableView 的大小。如果你想做 UITableView 响应键盘的实际操作，不要管它的大小，而是改变它的内容插入和滚动指示器插入。在此处查看我的答案以及链接到的示例：

[uitableview 不使用键盘调整大小](https://stackoverflow.com/questions/13632041/uitableview-not-resizing-with-keyboard/13632311#13632311)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:24:09.630

好吧，这比我想象的要容易。就我而言，当我触摸一行时，我希望选择器显示并`tableView`改变它的高度，所以我使用：

```
[UIView animateWithDuration:0.4 delay:0.0 options: UIViewAnimationCurveEaseOut animations:^{

    self.pickerView.frame = CGRectMake(0, self.view.bounds.size.height-200, self.view.bounds.size.width, self.pickerView.frame.size.height);

    // shrink the table vertical size to make room for the date picker
    CGRect newFrame = self.tableView.frame;
    newFrame.size.height -= self.pickerView.frame.size.height;
    self.tableView.frame = newFrame;

} completion:nil]; 
```

然后，当我单击完成按钮并想要返回`tableView`到全高并隐藏我的 datePicker 时，我使用：

```
- (void)doneWithPicker:(BOOL)remove {

    CGRect newFrame = self.tableView.frame;
    newFrame.size.height += self.pickerView.frame.size.height;
    self.tableView.frame = newFrame;

    [UIView animateWithDuration:0.4 delay:0.0 options: UIViewAnimationCurveEaseOut animations:^{
        self.pickerView.frame = CGRectMake(0, self.view.bounds.size.height+300, self.view.bounds.size.width, self.pickerView.frame.size.height);
    } completion:^(BOOL finished){
        if (remove) {
            [self.pickerView removeFromSuperview];
            self.pickerView = nil;
        }
    }];

} 
```

此外，当添加`pickerView`作为子视图时，请确保将其添加到`window`：

```
[self.view.window addSubview:self.pickerView]; 
```

# mysql - MYSQL更新表查询

> ID：13982721
> 
> 赞同：0
> 
> 时间：2012-12-21T00:36:33.977
> 
> 标签：mysql, phpmyadmin

MYSQL更新查询

我需要将值从一个表更新到另一个表并创建值（如果它们不存在）如何为所有值或从一个 ID 到另一个 ID 的表单值执行此操作

这是查询，但我需要为每个 ID 运行它，这是很多工作，所以有没有更简单的方法？

所以 id_product 总是一样的

`

```
INSERT INTO ps_product_supplier 
(id_product_supplier, id_product, id_product_attribute, id_supplier,
product_supplier_reference, product_supplier_price_te, id_currency)  
VALUES(NULL, 6216, 0, (SELECT id_supplier FROM ps_product WHERE id_product = 6216,
(SELECT supplier_reference FROM ps_product WHERE id_product = 6216), 
(SELECT wholesale_price FROM ps_product WHERE id_product = 6216), 3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:41:53.900

使用[INSERT...SELECT](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)语法：

```
INSERT IGNORE INTO ps_product_supplier 
(id_product_supplier, id_product, id_product_attribute, id_supplier,
product_supplier_reference, product_supplier_price_te, id_currency)  
SELECT NULL, id_product, 0, id_supplier, supplier_reference, wholesale_price, 3
FROM ps_product 
```

该关键字`IGNORE`将允许查询仅插入目标表中尚不存在的记录。只有当您的目标表在字段上有主键（或唯一键）时，它才会起作用`id_product_supplier`。

# c - 将文本文件中的部分行提取到 C 编程中的新文件中

> ID：13982723
> 
> 赞同：3
> 
> 时间：2012-12-21T00:36:50.693
> 
> 标签：c, unix, text, line

我正在尝试从文本文件中提取部分行，并将其输出到 UNIX 平台下的 C 编程中的新文件中。例如，我有 file1.txt 如下：

设备：ABCDE1

日期：12/12/12

操作员=John Doe

我希望它在 file2.txt 中显示为：

ABCDE1，2012 年 12 月 12 日，约翰·多伊。

这是我到目前为止的代码，我打开并写入文件部分，但无法弄清楚如何在“设备：”之后提取信息，而不显示“设备：”它自己。我的代码只是复制 file1 的第一行，并将其放入文件 2：

* * *

```
#include "stdio.h"
main()
{
    FILE *fs, *ft;
    char ch ;
char file[100]="" ;
char Device [100];
char Date [80];

printf ("Enter file name and directory:");
scanf ("%s",&file);

    fs = fopen (file, "r") ;
    if ( fs == NULL )
    {
           puts ( "Cannot open source file" ) ;
           exit( ) ;
    }

    ft = fopen ( "file2.txt", "w" ) ;
    if ( ft == NULL )
    {
           puts ( "Cannot open target file" ) ;
           fclose ( fs ) ;
           exit( ) ;
    }

fscanf(fs, "%s %s", Device,Date);
fprintf(ft, "%s %s\n", Device,Date);

    fclose ( fs ) ;
    fclose ( ft ) ;
return 0;
} 
```

* * *

fscanf() 是一个很好的命令吗？或者是否有任何其他建议的命令来完成这项工作？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T00:44:25.537

[`fscanf()`](http://en.cppreference.com/w/c/io/fscanf)是一种可能使用的功能。你会遇到“John Doe”的一些问题，因为 scanf() 系列函数将 %s 视为“空格分隔的字符串”——所以你会读到“John”，然后下一步会得到 Doe 和其他在下一行，这可能不是您想要的。

fscanf() 本身有解决这个问题的方法。或者，您可以使用 fgets() 读取整行，然后使用一些字符串函数将其拆分。有趣的是，线条的格式略有不同，这让生活更具挑战性。

我故意不告诉你具体怎么做，因为我很确定你这样做的部分原因是为了学习。而且你从抄袭别人的作品中得不到任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:46:15.003

该`fscanf`函数从文件中读取数据（第一个参数），根据给定的格式（第二个参数）解析它，并根据格式加载指定的变量（其余参数）。[请参阅此处](http://www.cplusplus.com/reference/cstdio/fscanf/)的定义。这意味着在您的 fscanf 调用之后，您的`Device`和`Date`缓冲区拥有字符串`Device:`并`ABCDE1`存储在其中。不要同时打印设备和日期，只需打印日期。您现在必须设置一个循环来遍历整个文件，fscanf'ing 直到您获得 EOF 标志并在每次迭代时只打印第二个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T22:11:51.227

好的，所以我的代码开始工作了，它使用 igets 扫描字符串行，并使用**printf(&buffer[7]);** 仅在“设备：”之后输出答案。由于我将使用的记录将具有“设备、日期、操作员等”的固定位置，我什至不必搜索这些词，我只需将指针指向这些行。

但这是我的新问题，我当前的代码只读取文件的第一行，我怎样才能让它读取不同的行？例如，如果我只希望它读取第 1、2 和 5 行。

这是我的完整代码：

```
 main()
  {
    FILE *fs, *ft ;
    char ch ;
char file[100]="" ;
char line1[50];

printf ("Enter file name and directory:");
scanf ("%s",&file);

    fs = fopen (file, "r") ;
    if ( fs == NULL )
    {
           puts ( "Cannot open source file" ) ;
    }

    ft = fopen ( "book5.txt", "w" ) ;
    if ( ft == NULL )
    {
           puts ( "Cannot open target file" ) ;
           fclose ( fs ) ;
    }

    fgets(line1,50,fs);
printf(&line1[7]);
printf(",");
printf(&line1[7]);

    fclose ( fs ) ;
    fclose ( ft ) ;
 } 
```

谢谢您的帮助！

# algorithm - 符号比较

> ID：13982724
> 
> 赞同：2
> 
> 时间：2012-12-21T00:36:57.473
> 
> 标签：algorithm, math, comparison, logic, discrete-mathematics

如果这是一个基本问题或者已经有丰富的解决方案，请原谅我，但我不知道如何简洁地表达这个问题，我找不到任何结果。我一直在思考这个问题很长时间，但我似乎无法找到解决方案。

我想做的是通过字符串比较符号语句。例如，在数学中，

```
4x = 4x is true. 
```

但是关于

```
(12/3)x = 4x
(5-1)x = (4/1)x 
((5-1)/1)x = (4/1)x
so on . . . 
```

在证明中，

```
1 = sin(x)^2 + cos(x)^2
tan(x) = sin(x)/cos(x)
sin(2x) = 2*sin(x)*cos(x)
and so on . . . 
```

在逻辑上，

```
~~p <-> p
~(p * q) <-> (~p v ~q)
~(p v q) <-> (~p * ~q)
(p v q) <-> (q v p)
(p * q) <-> (q * p)
and so on . . . 
```

请记住，这些输入是字符串。我遇到的问题是，理论上存在无限多的情况，双方可以相等。

当然，第一个问题是如何解析数值与符号值并枚举它们。我在这方面没问题。

我什至不知道从哪里开始，所以任何指针都会受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:39:39.400

我会得到一个符号代数包。他们可以做一些事情，比如推导、简化和与归约的比较。许多也是可编程的。那里有一些不错的免费的。

这里有一个列表： [http ://en.wikipedia.org/wiki/List_of_computer_algebra_systems](http://en.wikipedia.org/wiki/List_of_computer_algebra_systems)

如果您正在寻找一种在代码中执行此操作的方法，也许您可​​以为您选择的语言找到一个符号代数库。

# html - 我如何使用 Watir 直接从文件中读取（解析）html？

> ID：13982725
> 
> 赞同：2
> 
> 时间：2012-12-21T00:37:03.187
> 
> 标签：html, ruby, file, parsing, watir

当然，我已经可以用 Nokogiri 做到这一点

```
doc = Nokogiri::HTML(src) 
```

其中 src 是我数据库中的文本列。

但我真的很喜欢 Watir 为开发人员提供的搜索界面，而不是 Nokogiri。

到目前为止，在我在互联网上的搜索中，没有太多关于如何做到这一点的证据，即。对于未托管的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T04:36:47.867

您可以通过在文件路径的开头添加“file://”来访问本地 html 文件（请参阅我[关于该主题的博客文章](http://jkotests.wordpress.com/2012/11/04/opening-local-html-files-with-watir-classic/)）。

例如，假设您的计算机上有一个 html 文件，位于“C:\users\testuser\desktop\test_file.html”。

如果你想打开这个文件并使用 Watir 与之交互，你可以这样做：

```
browser = Watir::Browser.new
browser.goto('file://C:\users\testuser\desktop\test_file.html') 
```

然后，您可以像通常与 Watir 一样与浏览器/页面/html 进行交互。

注意：如果您`NoMethodError: unknown property or method: 'document'`在尝试与浏览器交互时遇到异常，请确保您的浏览器正在由具有管理权限的用户打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T22:25:56.667

如果上述方法不适合您，您可以尝试直接使用驱动程序导航，如下所示：

```
browser = Watir::Browser.new 
browser.driver.navigate.to('file://Users/path/to/file.html') 
```

**PS我在Mac上，但这应该不管你的操作系统**

# jquery - 通过单击 jQuery 的第三个元素，使用 textarea 动态更改段落文本？

> ID：13982727
> 
> 赞同：1
> 
> 时间：2012-12-21T00:37:51.737
> 
> 标签：jquery, html, click, textarea, paragraph

我想通过单击第三个元素在另一个文本区域中显示书面文本区域文本。所以这是我目前正在使用的代码，但是当您按下**textarea**时它会显示书面文本：

```
 $(function(){
    $('#text').click(function(){
      $('#preview').text($(this).val());
    });
  }); 
```

这是 HTML 部分：

```
<textarea id="text"></textarea>
<textarea id="preview"></textarea>

<div id="show-text"></div> 
```

所以想法是当你点击 div#show-text 时，在 textarea#preview 中显示 textarea#text 中的文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T00:39:44.853

您的问题是您的点击事件已在 textarea 上注册。你真正要找的是：

```
 $(function(){
     $('#show-text').click(function(){
       $('#preview').text($('#text').val());
     });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T07:53:19.727

我在 Javascript 中创建了一个函数，即在段落中添加数据：

```
 <p id="textToAdd"></p>
    Enter your name: <input type="text" id="fname" onkeyup="myFunction()">

    <script>
    function myFunction() {
        $('#textToAdd').innerHTML = $('#fname').value;

    }
    </script> 
```

# mysql - Rails/MySQL：惰性符号绑定失败？

> ID：13982728
> 
> 赞同：3
> 
> 时间：2012-12-21T00:38:16.380
> 
> 标签：mysql, ruby-on-rails, rubygems

我白天是一名 .NET 开发人员，晚上是一名有抱负的 Rails 开发人员。我正在尝试使用 Rails 和 MySQL 作为我的数据库。我已经成功安装了两者。但是，我遇到了一个非常奇怪的问题，并且真的需要一些关于如何让这两者一起工作的建议。这是我收到的错误消息：

> [rake --tasks] dyld：惰性符号绑定失败：找不到符号：_mysql_get_client_info 引用自：/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle 预期在：平面命名空间dyld：找不到符号：_mysql_get_client_info 引用自：/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle 预期在：平面命名空间

我已经搜索了 StackOverflow 并尝试了很多东西。我真诚地希望有人可以帮助我。我已经在全新的 MacBook Pro Retina 上安装并运行了这一切。就命令行而言，我对操作系统的基本细节并不十分熟悉，但可以在某种程度上解决问题。

我该如何摆脱这个问题？

### 编辑显示 GEMFILE

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

# python - Sybase sybpydb 查询不返回任何内容

> ID：13982732
> 
> 赞同：6
> 
> 时间：2012-12-21T00:38:51.803
> 
> 标签：python, sql, sap-ase

我目前正在使用[sybpydb](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01692.1570/doc/html/car1308847098623.html)连接到 Sybase 15.7 服务器。似乎连接正常：

```
import sys
sys.path.append('/dba/sybase/ase/15.7/OCS-15_0/python/python26_64r/lib')
sys.path.append('/dba/sybase/ase/15.7/OCS-15_0/lib')
import sybpydb

conn = sybpydb.connect(user='usr', password='pass', servername='serv') 
```

工作正常。更改我的任何连接详细信息都会导致连接错误。

然后我选择一个数据库：

```
curr = conn.cursor()
curr.execute('use db_1') 
```

但是，现在当我尝试运行查询时，它总是返回`None`

```
print curr.execute('select * from table_1') 
```

我试过在同一个中运行`use`和`select`查询`execute`，我试过在每个之后都包含`go`命令，我试过`curr.connection.commit()`在每个之后都使用，但都没有成功。我已经确认，使用`dbartisan`and `isql`，我使用的相同查询返回条目。

为什么我在 python 中的查询没有得到结果？

编辑：

只是一些额外的信息。为了使`sybpydb`导入工作，我不得不更改两个环境变量。我将库路径（与我添加到的相同`sys.path`）添加到`$LD_LIBRARY_PATH`，即：

```
setenv LD_LIBRARY_PATH "$LD_LIBRARY_PATH":dba/sybase/ase/15.7/OCS-15_0/python/python26_64r/lib:/dba/sybase/ase/15.7/OCS-15_0/lib 
```

我不得不将`SYBASE`路径从 12.5 更改为 15.7。这一切都是在`csh`.

如果我打印 conn.error()，在每个 curr.execute() 之后，我得到：

```
("Server message: number(5701) severity(10) state(2) line(0)\n\tChanged database context to 'master'.\n\n", 5701) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:01:06.117

我完全理解您可能会对文档感到困惑的地方。它似乎无法与其他数据库扩展（例如 psycopg2）相提并论。

与大多数标准数据库扩展连接时，您可以指定一个数据库。然后，当您想从`SELECT`查询中取回数据时，您可以使用 fetch（一种*好的*方法）或迭代器（*更 Pythonic*的方法）。

```
import sybpydb as sybase

conn = sybase.connect(user='usr', password='pass', servername='serv')
cur = conn.cursor()

cur.execute("use db_1")
cur.execute("SELECT * FROM table_1")
print "Query Returned %d row(s)" % cur.rowcount

for row in cur:
    print row

# Alternate less-pythonic way to read query results
# for row in cur.fetchall():
#    print row 
```

试一试，让我们知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T21:46:32.590

Python 3.x 工作解决方案：

```
import sybpydb

try:
    conn = sybpydb.connect(dsn="Servername=serv;Username=usr;Password=pass")
    cur = conn.cursor()

    cur.execute('select * from db_1..table_1')

    # table header
    header = tuple(col[0] for col in cur.description)
    print('\t'.join(header))
    print('-' * 60)

    res = cur.fetchall()

    for row in res:
        line = '\t'.join(str(col) for col in row)
        print(line)

    cur.close()
    conn.close()

except sybpydb.Error:
    for err in cur.connection.messages:
        print(f'Error {err[0]}, Value {err[1]}') 
```

# css - Kendo Mobile Q3 2012 - 字体图标在 Android v4+ 中显示为正方形

> ID：13982736
> 
> 赞同：1
> 
> 时间：2012-12-21T00:39:29.400
> 
> 标签：css, listview, kendo-ui

当我在 Kendo UI Mobile 中强制使用平台“ios”时，Android v4+ 中没有一个默认字体图标正确显示（相反，我只看到使用正确的相应 CSS 颜色属性的实心方块）。有趣的是，图标在 Android v2.3.x 中可以正常显示。任何已知的解决方法？我已经看到了类似场景的 CSS 变通方法，但是，它们都是基于新的字体图标呈现方法之前的。

我正在使用 Kendo UI Mobile Q3 2012 版本 v2012.3.1114，并`data-icon="globe"`在 Kendo UI Mobile ListView 中使用我的列表标签上的属性。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:14:46.920

我以前也问过同样的问题，我得到了剑道的回答。

添加此样式：

```
 .km-root .km-on-android .km-view span.km-icon
{
    background: none;
}

.km-root .km-pane.km-pane.km-on-android .km-view span.km-icon:after
{
    background: none;
    -webkit-text-fill-color: inherit;
} 
```

# php - 如何从 JQuery 中的循环中获取特定值 - wordpress 查询帖子

> ID：13982741
> 
> 赞同：1
> 
> 时间：2012-12-21T00:39:51.237
> 
> 标签：php, jquery, wordpress

我有一个关于能够从隐藏的输入框中获取值的问题：

```
<?php  $i = 0; $j = 1;?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <?php get_template_part( 'content', get_post_format() ); 
        $postid[$i] = get_the_ID();
        echo "<input type='hidden' value='".$postid[$i]."' id='hiddenpostitle".$j."' name='hiddenpostitle'/> ";
        echo "<input type='hidden' value='".$j."' id='hiddenpostnumfield".$j."'/> ";            
    ?>
    <?php 
        $i++;
        $j++;
    ?>
<?php endwhile; endif; ?> 
```

因此，它的作用是绘制所有帖子并根据 Wordpress 对其进行格式化。在循环每个帖子时，我为每个帖子创建了 2 个输入框，一个带有带有增量变量的帖子 id，另一个用于存储带有增量变量的上述输入框的值。我正在制作产品概述，因此我需要能够访问正确的帖子并使用 JSON 发送该帖子。

我坚持的部分是获得点击的正确帖子类型。

到目前为止，这是我的 JQuery 代码：

```
<script type="text/javascript">
$(function () {
    $('.item-post a').each(function (i) {
        $(this).on("click", function (e) {
            alert(i);

            var num = $('#hiddenpostitle').val();
            alert(num);

            var prodname = $('#hiddenpostitle' + num /* + (i+1)*/).val();

            $.post('overviewcheck-515adfzx8522', {'ProdName': prodname}, function (response) { }, 'json');
        });
    });
    $('.item-post a').colorbox({ opacity: 0.3, href: "../overviewa512454dzdtfa" });
});
</script> 
```

这不能正常工作，因为它总是会给我第一个帖子，因为我没有得到被点击的相关产品。

示例：假设您单击 3 并且首先单击 1，即使单击 2 或 3 或 4，您也将始终获得 1。

我真的被困住了，需要帮助。不确定如何进行。

圣诞节快乐！

更新：

正在使用的新代码

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="post-id-holder">
      <?php get_template_part('content',get_post_format()); ?>
      <div class="post-id-data" post-id="<?php echo get_the_ID(); ?>" post-title="something"></div>
      </div>                        

    <?php endwhile; endif; ?>
<script type="text/javascript">
(document).ready(function() {
   $('.item-post a').click(function(){
    // find the article for the post
    var article  = $(this).parentsUntil('article').parent();
    var post_id = article.attr("id");
    var post_title $('.entry-title a',article).text();
    alert(post_id);
    alert(post_title);

    $.post('overviewcheck-515adfzx8522', 
    { 
    'ProdName': prodname

    },
    function(response) {
    },
    'json'
    );

   $('.item-post a').colorbox({opacity:0.3, href:"../overviewa512454dzdtfa"});
   });
}); 
```

回答：

谢谢马特！:)

这是代码，所以如果你遇到这个，你可以使用它！

Wordpress 查询部分：

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
 <div class="post-id-holder">
 <?php get_template_part('content',get_post_format()); ?>
  <div class="post-id-data" post-id="<?php echo get_the_ID(); ?>" post-title="something">      </div> 
 </div>                     

<?php endwhile; endif; ?> 
```

jQuery端：

```
<script type="text/javascript">
$(document).ready(function() {
 $('.item-post a').click(function(){
    // find the article for the post
        var article  = $(this).parentsUntil('article').parent();
    var post_id = article.attr("id");
    var post_title = $('.entry-title a',article).text();

        $.post('overviewcheck-515adfzx8522', 
                                        { 
        'ProdName': post_title

                                        },
         function(response) {
                                        },
         'json'
        );

       });
    $('.item-post a').colorbox({opacity:0.3, href:"../overviewa512454dzdtfa"});
});

</script> 
```

再次感谢大家！圣诞节快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:02:36.367

可能不是您问题的答案，但首先您应该`each`从此处删除该部分

```
$('.item-post a').each(function (i) {
    $(this).on("click", function (e){
        //...
    });
}); 
```

它应该是

```
$('.item-post a').on("click", function (e){
    //...
}); 
```

您应该在每个事件之外注册您的事件，不需要循环，`jQuery`会这样做。您也正在使用以下代码

```
$.post('overviewcheck-515adfzx8522', {'ProdName': prodname}, function (response) { 

}, 'json'); 
```

在这种情况下，第一个参数看起来不是有效`url`的，回调函数什么也没做，所以你应该修复这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:37:08.313

如果您不创建表单，则确实不需要使用输入标签。如果您的代码偶然在表单块内执行，它只会导致问题。如果您只想在 javascript 时发现 post-id，那么最好将其填充到 div 或 span 标签的属性中。

```
<?php while(have_posts()): ?>
<?php the_post(); ?>
<div class="post-id-holder">
    <?php get_template_part('content',get_post_format()); ?>
    <div class="post-id-data" post-id="<?php echo get_the_ID(); ?>" post-title="something"></div>
</div>
<?php endwhile; ?> 
```

稍后您可以通过 javascript 访问它。

```
<script type="text/javascript">
$(document).ready(function() {
   $('.item-post a').click(function(){
      // where are we? we are at any link inside the post, and that's no good.

      // find the holder parent
      var holder = $(this).parentsUntil('.post-id-holder');
      var data = $(".post-id-data",holder);

      var post_id = data.attr("post-id");
      var post_title = data.attr("post-title");
   });
});
</script> 
```

编辑：

在查看 HTML 之后，我认为您无需在模板中添加任何内容即可获得帖子 ID 和标题。

```
<script type="text/javascript">
$(document).ready(function() {
   $('.item-post a').click(function(){
      // find the article for the post
      var article  = $(this).parentsUntil('article').parent();
      var post_id = article.attr("id");
      var post_title $('.entry-title a',article).text();
      alert(post_id);
      alert(post_title);
   });
});
</script> 
```

# c# - 实体框架使用特定 DbMigration 实例迁移

> ID：13982744
> 
> 赞同：1
> 
> 时间：2012-12-21T00:40:14.077
> 
> 标签：c#, .net, entity-framework, plugins

我正在构建实体框架 (5) 的模块化实现，并且正在尝试实现模块化迁移。

这个想法是每个模块都可以注册其作为 DbMigration 实例的迁移（EF 已经使用它来注册迁移）。
我打算使用这个概念来迁移`Application_Start`数据库`Modules_Loaded`

```
Database.SetInitializer<YourContext>(
    new MigrateDatabaseToLatestVersion<YourContext, YourMigrationsConfig>());
Database.Initialize(false); 
```

有没有办法可以将模块注册的所有 DbMigrations 传递给`MigrateDatabaseToLatestVersion`？

* * *

## 研究

我最初以为我必须将 MigrateDatabaseToLatestVersion 子类化，但是在查看源代码后，我看不到可扩展性的一点，但它所做的只是

```
_config = new TMigrationsConfiguration
     {
          TargetDatabase = new DbConnectionInfo(connectionStringName)
     }; 
```

接着

```
var migrator = new DbMigrator(_config);
migrator.Update(); 
```

所以我查看了 DbMigrator 的源代码，其中有一个方法我可以覆盖调用`GetPendingMigrations`它返回`_historyRepository.GetPendingMigrations(_migrationAssembly.MigrationIds)`

然后我看了一下课堂上的`public virtual IEnumerable<string> GetPendingMigrations(IEnumerable<string> localMigrations)`方法`HistoryRepository`，它的工作是找出已经发生了哪些迁移（ ）并返回和`databaseMigrations`之间的差异=>`localMigrations``databaseMigrations``localMigrations.Except(databaseMigrations);`

所以我可以在那里传递我自己的一组 Id，这允许我创建一组自定义待定迁移。

但是还是有问题；`DbMigrator`'s`internal override void Upgrade(IEnumerable<string> pendingMigrations, string targetMigrationId, stringlastMigrationId)`使用`MigrationAssembly`EF 中定义的类的实例。

```
foreach (var pendingMigration in pendingMigrations)
        {
            var migration = _migrationAssembly.GetMigration(pendingMigration); 
```

这是`GetMigration(string migrationId)`：

```
public virtual DbMigration GetMigration(string migrationId)
    {
        DebugCheck.NotEmpty(migrationId);

        var migration
            = (DbMigration)_migrations
                               .SingleOrDefault(m => string.Equals(m.Id, migrationId, StringComparison.Ordinal));

        if (migration != null)
        {
            migration.Reset();
        }

        return migration;
    } 
```

太完美了，我应该重写那个类......哦等等：

```
internal class MigrationAssembly 
```

也是内部的。那么我怎么能覆盖这些属性呢？

这是指向源[http://entityframework.codeplex.com的链接](http://entityframework.codeplex.com)

**更新** 我无法在不编辑源代码的情况下找到一种方法。现在我正在寻找使用`DbModelBuilder`该类创建自定义迁移架构

# visual-studio-2012 - 是否可以在 Visual Studio Express 2012 上编译 Cinder？

> ID：13982751
> 
> 赞同：2
> 
> 时间：2012-12-21T00:41:01.010
> 
> 标签：visual-studio-2012, cinder

我对使用 Cinder 很感兴趣，但 0.8.4 版仅支持 VS 2008 和 VS 2010。有没有人能让 Cinder 在 VS Express 2012 上工作/编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T15:17:56.140

在最近发布的 0.8.5 版本中添加了对 Visual Studio C++ 2012 (Express) 的支持。有关更多信息，请参阅：http: [//libcinder.org/blog/posts/7_cinder-085-released/](http://libcinder.org/blog/posts/7_cinder-085-released/)

# android - 使用 ActionBarSherlock 在 SearchView 上出现 NullPointerException

> ID：13982758
> 
> 赞同：4
> 
> 时间：2012-12-21T00:41:50.900
> 
> 标签：android, nullpointerexception, actionbarsherlock, searchview

我正在使用`ActionBarSherlock`和支持库 v4。这是在“SherlockFragmentActivity”中。

我在第 269 行得到了一个 Nullpointer，如下所示。我已验证 SearchView 为空，而不是 SearchManager。虽然，`menu`也为空，但我不确定这是否正常？ **重要提示：它仅在我的 Android 4.0 和 4.1 测试中为空。在 2.3 中，它工作得很好！**

这是我的`SearchView`代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu, menu);

    SearchManager searchManager = 
        (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = 
        (SearchView) menu.findItem(R.id.menu_search).getActionView(); // line 269
    searchView.setSearchableInfo(
        searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(true);
    searchView.setSubmitButtonEnabled(true);
    return true;
} 
```

我现在有这个作为我的菜单项。

```
 <item
    android:id="@+id/menu_search"
    android:actionViewClass="com.actionbarsherlock.widget.SearchView"
    android:icon="@android:drawable/ic_menu_search"
    android:showAsAction="always"
    android:title="search"/> 
```

**日志猫**

```
FATAL EXCEPTION: main
java.lang.NullPointerException
 at com.---.---.master.MainFragmentActivity
    .setupSearchView(MainFragmentActivity.java:269)
 at com.---.---.master.MainFragmentActivity.onCreateOptionsMenu(
    MainFragmentActivity.java:258)
 at android.support.v4.app.Watson.onCreatePanelMenu(Watson.java:45)
 at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(
    ActionBarSherlock.java:559)
 at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(
    ActionBarSherlockCompat.java:479)
 at com.actionbarsherlock.internal.ActionBarSherlockCompat
    .dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:272)
 at com.actionbarsherlock.internal.ActionBarSherlockCompat$1.run(
    ActionBarSherlockCompat.java:984)
 at android.os.Handler.handleCallback(Handler.java:587)
 at android.os.Handler.dispatchMessage(Handler.java:92)
 at android.os.Looper.loop(Looper.java:123)
 at android.app.ActivityThread.main(ActivityThread.java:3683)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:507)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(
    ZygoteInit.java:839)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 at dalvik.system.NativeStart.main(Native Method) 
```

**进口：**

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.widget.SearchView;

import android.app.SearchManager; 
```

同样，我只在 4.0 模拟器和 4.1 设备中获得空指针。应用程序在 2.3 中运行良好。有一次，pre-ActionBarSherlock，使用相同的代码，除了`SearchView`通过正常方式（不是 Sherlock）导入它在 4.0 中工作得很好。我正在尝试使我的应用程序向后兼容并且破坏了较新的 Android 版本，但在较旧的版本中运行良好。

**编辑：** 当菜单项有时，它实际上是 2.3 中的 Null 和 4.0+ 中的 Cast Issue `android:actionViewClass="android.app.SearchView"` 然后我将其更改为 `android:actionViewClass="com.actionbarsherlock.widget.SearchView"` ，现在在 2.3 中为 FIXED，在 4.0+ 中为 Null

**更新：我似乎用 hack 来修复它：**

我添加了一个`menu-v11`文件夹，添加了 menu.xml 的重复文件，仅更改了一项：`android:actionViewClass="android.app.SearchView"`，否则它与另一个 menu.xml 文件相同。

在 Java 中，我这样做了：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    MenuItem searchItem = menu.findItem(R.id.menu_search);
    SearchManager searchManager = 
        (SearchManager) getSystemService(Context.SEARCH_SERVICE);

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
        SearchView searchView = (SearchView) searchItem.getActionView();
        searchView.setSearchableInfo(searchManager
            .getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(true);
        searchView.setSubmitButtonEnabled(true);
    } else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        setupNewSearchView(searchItem, searchManager);
    }
    return true;
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupNewSearchView(MenuItem searchItem,
        SearchManager searchManager) {
    android.widget.SearchView searchView = 
        (android.widget.SearchView) searchItem.getActionView();
    searchView.setSearchableInfo(searchManager
        .getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(true);
    searchView.setSubmitButtonEnabled(true);
} 
```

好吧，它有效，但我还没有把它作为答案，因为它看起来像是黑客的做法。对更好的想法持开放态度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T00:56:54.317

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:46:33.487

您正在尝试使用两个完全不同的类，它们都名为 SearchView 但在不同的包中。您不能简单地将对象从一个类转换为另一个类。com.actionbarsherlock.widget.Searchview 与 android.widget.SearchView 不同。因此，`searchView`在第 269 行为空。

从您的 Java 文件顶部查看导入对我们来说是相关的。

可能 R.id.menu_search 引用的视图是 android.widget.SearchView 并且您的代码期望它是 com.actionbarsherlock.widget.Searchview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:12:44.793

# git - 我必须给 Git 补丁起一个合理的名称吗？

> ID：13982759
> 
> 赞同：1
> 
> 时间：2012-12-21T00:41:50.993
> 
> 标签：git, patch

我创建补丁来存储临时修复，因为我不想将它们签入存储库。我使用命令喜欢`git format-patch --full-index HEAD~1..HEAD`创建补丁。但是当新的提交被检入存储库时，我的补丁可能由于一些冲突而无法应用。

现在我使用`git format-patch --full-index HEAD~1..HEAD --suffix=-`git rev-parse --short HEAD~1`.patch`这样我就有了来自父母的哈希 ID。我可以重新调整到以前的版本，应用补丁，然后重新调整到头。

似乎已经足够好了，但人们说“格式补丁”可以创建可以通过电子邮件发送给其他人的补丁。如果是这样，我想知道为什么我必须给补丁一个合理的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:49:35.203

你一定要吗？不。

是不是更可取，我猜是这样，它可以更容易地看到补丁的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:29:56.713

我认为这是个好主意（命名您所做的事情通常是个好主意，因为这意味着您了解自己在做什么），但我认为您在滥用 git 功能。

对于您所做的事情，您应该使用[`git stash`](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html). 这是一堆未应用的提交，您可以在其中留下未完成的工作，直到您想收回它。

```
$ git status
# dirty working tree
$ git stash
$ git status
# clean working tree - only untracked files
$ git checkout another-branch
# optional: work work work
$ git stash pop
# applies last stash to a clean working tree
$ git stash apply
# applies last stash to a clean working tree but don't remove it from the stash's stack
$ git stash apply
# re-applies same commit
$ git stash apply/pop stash@{3}
# applies/pops 4th commit in stash
$ git stash list
# lists all stash's items
$ git stash save "My commit message"
# saves stash (as with 'git stash' alone), but with a fixed message 
```

这不是一个使用会话，只是有用命令的示例。

有些人说您不必隐藏，但是当您“返回”该任务时，您应该稍后分支 + 提交 + 重置。（我找不到我前段时间读过的那篇博文，但没关系）。

# c++ - 从集合列表中删除重复项

> ID：13982763
> 
> 赞同：4
> 
> 时间：2012-12-21T00:42:05.020
> 
> 标签：c++, algorithm, std

我正在实施著名的“集合的子集”问题。我想我有一个很好的工作解决方案，但它包含重复项。我希望 list.unique() 能够解决这种情况，但是由于未定义集合 == 运算符，因此它不起作用。一组集合也不能解决这种情况（现在使用集合列表）。

有了 80% 的完整解决方案，我意识到有一种比我自带的算法更好的算法。但我想知道是否有一种聪明的方法可以在不完全重写算法的情况下删除重复项？

这是我的代码：

主.CPP：

```
#include "random.hpp"

using namespace std;

int main(void) {

    subsets2();

    getchar();
    return 0;
} 
```

随机.Cpp：

```
void getSubsets2(set<int> myset, list<set<int> > * ptr, int length) {

    if (length == 1) {
        ptr->push_back(myset);
    }

    else {
        set<int> second(myset);
        set<int>::iterator it;
        ptr->push_back(myset);

        it = myset.begin();
        myset.erase(it);
        it = second.begin();
        ++it;
        second.erase(it);

        getSubsets2(myset, ptr, length - 1);
        getSubsets2(second, ptr, length - 1);
    }
}

void subsets2(void) {
    const int N = 4;
    int myints[N] = {
        88, 33, 23, 22
    };
    set<int> myset(myints, myints + N);
    set<int> set2;

    list<set<int> > mylist;

    list<set<int> > * ptr;
    ptr = & mylist;

    list<set<int> > ::iterator it;
    set<int>::iterator it2;

    getSubsets2(myset, ptr, N);
    mylist.unique();

    for (it = mylist.begin(); it != mylist.end(); ++it) {
        set2 = * it;
        for (it2 = set2.begin(); it2 != set2.end(); ++it2) {
            cout << * it2 << " ";
        }
        cout << "\n";
    }

} 
```

输出：

```
 22 23 33 88
        23 33 88
        33 88
        88
        33
        23 88
        88
        23
        22 33 88 
        33 88
        88
        33
        22 88
        88
        22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:03:50.173

Unique()`consecutive`从容器中删除所有重复的元素。所以在运行 unique() 之前需要先对 mylist 进行排序。

```
 mylist.sort();
   mylist.unique(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:10:14.513

就像另一种方法一样，它`std::less<T>`是为所有标准容器定义的。因此，我们可以定义如下：

```
std::set<std::set<int>, std::less<std::set<int>>> set_of_sets; 
```

这将自动过滤掉重复的集合。一个完整的例子：

```
#include <set>
#include <vector>
#include <iostream>
#include <functional>

int main()
{
    std::vector<std::vector<int>> x = {{1,2,3}, {1,2}, {1,2,3}, {4,5,6},
                                       {4,5}, {5,6}, {4,5,6}};
    std::set<std::set<int>, std::less<std::set<int>>> set_of_sets;

    for(auto it = x.begin(); it != x.end(); ++it) {
        std::set<int> s;
        s.insert(it->begin(), it->end());
        set_of_sets.insert(s);
    }

    for(auto it = set_of_sets.begin(); it != set_of_sets.end(); ++it) {
        std::cout << "{";
        for(auto it2 = it->begin(); it2 != it->end(); ++it2) {
            std::cout << *it2 << ", ";
        }
        std::cout << "}\n";
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:10:48.103

使用字符串列表存储最终结果：

```
 list<string> uniq_list;
    for (it = mylist.begin(); it != mylist.end(); ++it) {
        set2 = * it; 
        stringstream ss; 
        for (it2 = set2.begin(); it2 != set2.end(); ++it2) {
            ss << * it2 << " ";
        }
        uniq_list.push_back(ss.str());
    }   
    uniq_list.sort();
    uniq_list.unique();
    for (list<string>::iterator it=uniq_list.begin(); it != uniq_list.end(); it++){
      cout << *it << endl;
    } 
```

# azure - 将 Azure VM 移动到 VNET

> ID：13982769
> 
> 赞同：3
> 
> 时间：2012-12-21T00:43:05.587
> 
> 标签：azure

是否可以将 Azure（不同的关联组）中已创建的 VM 移动到现有的 VNET？

引擎盖下是否有执行此操作的命令（powershell、cmdlet）？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T01:33:37.477

目前，您无法在创建 VM 后将其加入虚拟网络，您必须在 VM 创建期间执行此操作，如此[处所述](http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/b8486c3f-a969-4fb3-a95c-db80e76e407f)

您可以做的是删除您的虚拟机，这将删除 VM 配置，但您的操作系统磁盘仍将保存在 Azure 存储中。之后，您可以使用保存的 OS 磁盘创建新的虚拟机，并且在 VM 配置期间，您可以将其添加到您的虚拟网络。

# windows-ce - 从 Windows 7 远程控制 WinCE 6.0 设备

> ID：13982772
> 
> 赞同：8
> 
> 时间：2012-12-21T00:43:24.417
> 
> 标签：windows-ce, remote-desktop, vnc-server

我正在尝试寻找一种工具来从 Windows 7 机器远程控制运行 Windows CE 6.0 的摩托罗拉 MC3190 设备。

我已经将 Mymobiler 与 Intermec CN3 设备一起使用，所以我尝试了[这个问题](https://stackoverflow.com/questions/8754456/control-a-wince-device-from-desktop)的答案，但我无法让它工作。

*   我在 Mymobile 文件夹中尝试了 remote.exe.40 和 remote.exe.50
*   [在关于超级用户的问题](https://stackoverflow.com/questions/10446343/task-manager-on-windows-6-0-ce-for-motorola-mc3190-handheld-computer)中提到的CodeProject 上使用[任务管理器](http://www.codeproject.com/Articles/30871/Task-Manager-for-Windows-Mobile-and-Windows-CE)似乎 remote.exe 非常快地完成执行（或者正在静默崩溃）。
*   我的开始/程序菜单有一个`MyMobiler`条目，所以在某处似乎已经安装了一些东西
*   但是当我在桌面上运行 Mymobiler 时它无法连接，它在系统三中的图标保持灰色，鼠标悬停时显示未连接/
*   在`Proof MyMobiler works for WinCE` [视频](http://www.youtube.com/watch?v=xYFBECTrrG4#t=4s)中，处理器`ARM920T-PXA270M`在我的设备具有`Marevell, PXA32X-P`（[图像链接](https://imgur.com/PDjfh)）处理器时，这可能是原因吗？

我也尝试过`ActiveSync Remote Display`Windows [Mobile Developer Power Toys](http://www.microsoft.com/en-us/download/details.aspx?id=10601)。它会安装，但在启动时会显示一个错误框，其中包含消息“此设备的操作系统或 CPU 对此应用程序未知”

**如何让 MyMobiler 与运行 Windows CE 6.0 的摩托罗拉 MC3190 设备一起使用？是否有任何其他工具（最好是免费的）来远程控制此设备？**

编辑：我遇到了[EveryWAN](https://stackoverflow.com/a/10581665/18573)并找到了一个[安装程序](http://downloads.yahoo.com/software/mobile-pocket-pc-everywan-remote-support-personal-edition-s41502)。它开箱即用，但不可用于商业用途，并且该[网站](http://www.sparus-software.com/)似乎已不存在。

[PS：我意识到标签不准确，但我想在这些类似标签中使用能引起专家注意的东西。]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-22T23:21:58.860

我想澄清一个正确的答案。使用 Microsoft PowerToy activesync 远程显示时，两侧必须有一个应用程序 - 主机（手机）和远程（PC）。MyMobiler 也是如此。

在电脑上安装powertoy。

## 对于原始海报：这是您的错误消息的含义：

在 Activecync 远程显示的情况下，对于较新的设备（任何高于 ARM4 cpus - 这意味着，2008 及更高版本，或超过 200mhz cpus - 作为一个非常一般的指南），显示软件无法检测到您拥有什么类型的设备（它也是新的，不在列表中）。

## 对于motorola mc3190，你的cpu是arm5兼容的，

并且应该与具有 arm4 兼容组件的软件一起使用。ARD 确实有 arm 4 选项。看这里...

## 要解决这个问题：

您必须使用 PC 上的文件资源管理器，并导航到应用程序文件夹：c\Programs...\Windows Mobile Developer...\ActiveSync...\Devices\wce400\armv4t 并复制这两个文件。
仍然在 PC 上时，您必须导航到设备的 Windows 文件夹（运行 activesync，或将手机配置为硬盘），使用 PC 上的资源管理器导航到设备。

模糊地，它看起来像这样：资源管理器。> 设备（例如 HTC Phone:)
或 X:\ ，其中 x 是驱动器号。您选择的第一个子文件夹应该是 Windows。将两个文件粘贴到那里。

这两个文件现在被复制到手机上。

此时，您必须使用手机加载它的文件资源管理器并导航到内存上的那个 Windows 文件夹，然后手动运行您现在复制到那里的 cerdisp2.exe。

运行activesync，并且手机连接到电脑，

您现在可以在 PC 上运行 powertoy active remote display，它将与手机上运行的 exe 进行通信。

Xp 上的 ActiveSync 或 Windows Vista/7/8 上的 Windows Mobile Device Center 必须运行才能使这一切正常工作。

或者，该应用程序允许网络 ip 连接而不是 activesync，但我没有使用它。

使用完此应用程序后，您必须在手机上的 windows 文件夹（您复制的第二个文件）中运行 kill.exe，以卸载正在运行的 dll。

我可以使用 Xscale ARM11 528mhz cpu 手机验证此设置适用于 Xp、Win7 和 Win8。

## 对于 MyMobiler，请访问他们的网站并获取最新版本。

如果您使用的是旧版本，它将修复失败的连接。免费。他们不再支持它了。

我的 Mobiler 必须运行 activesync 并显示设备已连接。

我的 Mobiler 大大优于 ActiveSyncRD。* 会自动安装pc端应用，并通过activesync将远程应用推送到手机。*此外，当 activesync 运行时，无论何时连接手机，MyMobiler 应用程序也会自动加载到手机上。这样，每当您在桌面上运行 MyMobiler 时，它都会连接到手机并立即加载。*My Mobiler 允许全分辨率显示，而 ARD 限制为 320x400 或类似。640x800 看起来好多了。*MyMobiler 还允许完整的鼠标手势发送、复制和粘贴。ARD 提供的鼠标手势兼容性非常有限。

MyMobiler 也允许 IP 连接，但他们表示这比较慢。

我现在将 MyMobiler 与 Win8 和带多点触控的触摸板一起使用，并且鼠标手势发送得非常好。

对于 Windows V/7/8，您可能需要在 Mymobiler.exe 文件上运行兼容模式。导航到可能位于桌面上的 MyMobiler 文件夹。向下钻取直到找到 exe。右键单击并选择属性。兼容性。为此文件运行兼容模式，然后选择 XP。

## 更多注意事项：

这些应用程序很慢，因为 USB 很慢。

如果您在手机上启用 Fast USB，它将有助于显着加快任何远程显示的速度 - 但是 Fast USB 不稳定，并且不适用于某些配置。对我来说，它在 XP 上不起作用，但在 Win8 上起作用——虽然有时有点不稳定。在设备上：开始 > 设置图标 > 连接图标 > USB 到 PC 图标。勾选框启用。

此外，Win8 上的 MyMobiler 有时会拒绝连接。完全卸载 mymobile，断开手机，重新连接手机并观察 activesync 以确认连接。然后重新加载 mymobile。有时需要完全重新启动系统，但这种情况很少见。

* * *

CodeProject 上的 Windows Mobile Remote Controller 应用程序 - 如上所述，看起来很棒。它适用于 Windows Mobile 7 和 8 - 这太棒了。他提供了一个 rapi enabler 以允许与 WinMo 6 / 6.5 设备一起使用，这看起来也很有希望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T01:56:46.750

我从未使用过 MyMobiler，所以我无能为力，但是其他选项呢？

您是否查看过CodeProject上的[Windows Mobile Remote Controller 应用程序？](http://www.codeproject.com/Articles/24439/Windows-Mobile-Remote-Controller)

过去我在[SOTI 的掌上控制器上](http://www.soti.net/PCPro/)运气不错。它曾经是免费的，或者无论如何都有免费版本。不确定他们是否仍然这样做。

Windows CE 附带了一个名为 CERDISP（CE Remote Display 的缩写）的工具，该工具可以使用 Platform Builder 构建。我之前在网络上看到过它作为二进制下载（[例如这里](http://www.naurtech.com/wiki/wiki.php?n=Main.ToolsCERDisp)），所以不需要自己实际构建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:46:50.677

我在我的 Windows Mobile 6.5 手持设备上使用了 MyMobiler (remote.exe.50)。 ~~听起来你让它运行起来了。您是否在 Windows 7 机器上运行了 MyMobiler 客户端并通过 IP 地址连接到您的掌上电脑？（右键单击 Windows 7 通知区域中的图标，然后选择“连接 IP...”。）~~

~~它默认为 ActiveSync 地址（169.254.2.1？），因此如果您没有停靠并运行 ActiveSync，它最初将无法连接（但手动连接应该可以工作）。~~误读——您可以运行客户端，但不能运行服务器。

您还可以选择在您的掌上电脑上运行 VNC 服务器并使用常规 VNC 客户端连接到它。我已经为 Windows Mobile 2003 构建[了这个](http://sourceforge.net/projects/wincevncsvr/)，在 Visual Studio 2008 上没有太多障碍。Windows Mobile 6.5 可能也有类似的运气。

**编辑：**如果您收到以下消息：

```
'%s' is not a valid Pocket PC application. 
```

运行 MyMobiler 客户端时，这意味着您的 CPU 类型（或操作系统）与应用程序不兼容——所以我认为您的 PXA32X-P 不应该受到责备；特别是因为 MC3190 似乎能够运行 Windows Mobile 6.5（即 CPU 应该“相当”现代，支持 armv4i）。但是由于您没有提到看起来像这样的错误，我怀疑您的 Windows CE 6.0 版本不包含所有必需的依赖项。

我要检查的第一件事是 MyMobiler 的所有依赖项是否都存在于您的 Windows CE 6 构建中。Windows CE 是高度可定制的；因此，并非所有软件组件在不同版本的 Windows CE 中都是相同的。MyMobiler 是针对 Windows Mobile 而不是 Windows CE 构建的，因此您在 MC3190 上构建的 Windows CE 很可能没有所需的内容，而您链接的视频却有。

关于 ActiveSync Remote Display Power Toy，您收到的消息听起来像是桌面应用程序不知道要部署到您的设备的版本。

根据 ActiveSync 远程显示包中的 readme.txt：

> 如果您看到错误消息“此设备的操作系统或 CPU 对此应用程序未知”，这通常表示此工具无法识别当前设备的 CPU 类型，通常是 Windows CE 设备。解决方法是 1\. 查找设备的 CPU 类型（来自手册或制造商）。2\. 将\Devices\wce400\\cerdisp2.exe 复制到设备的\windows 文件夹中。3\. 在桌面/笔记本电脑上运行“cerhost2.exe -m”。4\. 在设备上运行 cerdisp2.exe。5\. 当不再需要远程显示时，终止设备上的 cerdisp2.exe。

您应该可以选择 armv4t 版本；如果没有，请使用 armv4 版本。

# r - SpatialPolygonsDataFrame 的裁剪

> ID：13982773
> 
> 赞同：28
> 
> 时间：2012-12-21T00:43:29.237
> 
> 标签：r, crop, spatial

我有两个`SpatialPolygonsDataFrame`文件：dat1，dat2

```
extent(dat1)
class       : Extent 
xmin        : -180 
xmax        : 180 
ymin        : -90 
ymax        : 90 

extent(dat2)
class       : Extent 
xmin        : -120.0014 
xmax        : -109.9997 
ymin        : 48.99944 
ymax        : 60 
```

我想使用 dat2 的范围裁剪文件 dat1。我不知道该怎么做。我之前只是使用“crop”功能处理光栅文件。

当我对当前数据使用此函数时，会出现以下错误：

```
> r1 <- crop(BiomassCarbon.shp,alberta.shp)
Error in function (classes, fdef, mtable)  : 

 unable to find an inherited method for function ‘crop’ for signature"SpatialPolygonsDataFrame"’ 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-21T07:31:06.333

**2014-10-9 添加的简化方法**：

`raster::crop()`可用于裁剪`Spatial*`（以及`Raster*`）对象。

例如，您可以使用它来裁剪`SpatialPolygons*`对象：

```
## Load raster package and an example SpatialPolygonsDataFrame
library(raster) 
data("wrld_simpl", package="maptools")

## Crop to the desired extent, then plot
out <- crop(wrld_simpl, extent(130, 180, 40, 70))
plot(out, col="khaki", bg="azure2") 
```

* * *

**原始（并且仍然有效）答案：**

rgeos**函数**使`gIntersection()`这非常简单。

使用 mnel 的漂亮示例作为起点：

```
library(maptools)
library(raster)   ## To convert an "Extent" object to a "SpatialPolygons" object.
library(rgeos)
data(wrld_simpl)

## Create the clipping polygon
CP <- as(extent(130, 180, 40, 70), "SpatialPolygons")
proj4string(CP) <- CRS(proj4string(wrld_simpl))

## Clip the map
out <- gIntersection(wrld_simpl, CP, byid=TRUE)

## Plot the output
plot(out, col="khaki", bg="azure2") 
```

![在此处输入图像描述](../Images/b22e15e081352b64c23a3c7928c61aec.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T01:27:15.817

这是一个`rgeos`使用世界地图作为示例的示例

这来自[R-sig-Geo 邮件列表](https://stat.ethz.ch/pipermail/r-sig-geo/2012-June/015340.html)上的 Roger Bivand 。Roger 是该`sp`软件包的作者之一。

以世界地图为例

```
library(maptools)

data(wrld_simpl)

# interested in the arealy bounded by the following rectangle
# rect(130, 40, 180, 70)

library(rgeos)
# create  a polygon that defines the boundary
bnds <- cbind(x=c(130, 130, 180, 180, 130), y=c(40, 70, 70, 40, 40))
# convert to a spatial polygons object with the same CRS
SP <- SpatialPolygons(list(Polygons(list(Polygon(bnds)), "1")),
proj4string=CRS(proj4string(wrld_simpl)))
# find the intersection with the original SPDF
gI <- gIntersects(wrld_simpl, SP, byid=TRUE)
# create the new spatial polygons object.
out <- vector(mode="list", length=length(which(gI)))
ii <- 1
for (i in seq(along=gI)) if (gI[i]) {
  out[[ii]] <- gIntersection(wrld_simpl[i,], SP)
  row.names(out[[ii]]) <- row.names(wrld_simpl)[i]; ii <- ii+1
}
# use rbind.SpatialPolygons method to combine into a new object.
out1 <- do.call("rbind", out)
# look here is Eastern Russia and a bit of Japan and China.
plot(out1, col = "khaki", bg = "azure2") 
```

![在此处输入图像描述](../Images/288cf4ec31fb992550f453a63aeb6659.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:25:11.693

您不能对 sp 多边形对象使用裁剪。您需要创建一个表示 dat2 的 bbox 坐标的多边形，然后可以使用 rgeos 库中的 gIntersects。

编辑：此评论与 2012 年可用的版本有关，现在不再如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T01:13:38.860

见?crop

> corp(x, y, filename="", snap='near', datatype=NULL, ...)
> 
> > x 光栅* 对象
> > 
> > y Extent 对象，或可以从中提取 Extent 对象的任何对象（请参阅详细信息

您需要使用`rasterize`raster 包中的函数对第一个 SpatialPolygon 进行光栅化

我创建了一些数据来展示如何使用光栅化：

```
n <- 1000
x <- runif(n) * 360 - 180
y <- runif(n) * 180 - 90
xy <- cbind(x, y)
vals <- 1:n
p1 <- data.frame(xy, name=vals)
p2 <- data.frame(xy, name=vals)
coordinates(p1) <- ~x+y
coordinates(p2) <- ~x+y 
```

如果我尝试：

```
 crop(p1,p2)
 unable to find an inherited method for function ‘crop’ for signature ‘"SpatialPointsDataFrame"’ 
```

现在使用光栅化

```
r <- rasterize(p1, r, 'name', fun=min)
crop(r,p2)

class       : RasterLayer 
dimensions  : 18, 36, 648  (nrow, ncol, ncell)
resolution  : 10, 10  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 
data source : in memory
names       : layer 
values      : 1, 997  (min, max) 
```

# svn - 从 SVN 检索最新的颠覆标签的最简单方法是什么？

> ID：13982778
> 
> 赞同：1
> 
> 时间：2012-12-21T00:44:28.033
> 
> 标签：svn, version-control

当我们标记时，我们使用以下格式。`YYYYMMDD_SPRINTNAME`

我们有多个环境，每个环境应该只安装特定的 sprint（电视节目名称）。例如，我们的 UAT 环境正在使用`FRIENDS`代码库。我们的 QA 环境正在处理`LAWORDER`代码库。

当我们标记时，它们都进入同一个存储库（与我们的分支不同）。所以运行 an 是`svn ls <PATH_TO_REPO> | tail -n1`行不通的。我希望为每个 sprint 名称运行相同的命令并获取该特定 sprint 的最新标签。

例如，`svn ls http://devbox/repos/projectname/tags`将显示以下内容。最新的标签位于底部（tail -n1 会起作用，但并非总是如此）。

```
20121210_CHOPPED
20121219_FRIENDS
20121220_MASH
20121220_FRIENDS
20121220_LAWORDER 
```

那么可能存在我们想要获取`FRIENDS`sprint 的最新标签的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:07:44.177

与其一味依赖tail的结果，相反@msell代码，我会建议手工逻辑和ls的小改动

`svn ls -v ROOT-OF-TAGS`

在这种情况下，每个标签的第一列将是创建的修订，并且在 grep 之后可以根据**数字检测最高修订，而不是顺序**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:44:18.000

Subversion 标签只是目录，就像分支一样。这种设计存在一些争议，因为标签可以很容易地修改（就像分支和目录一样）而无需太多注意。我做的第一件事是创建一个预提交挂钩，以允许人们创建标签，但防止标签被修改。

然而，这种设计的一大优点是标签具有 Subversion 的全部功能。您可以查看标签的创建者、创建时间和原因。您可以查看标签的来源、修订版本以及可能修改过标签的人。

这意味着如果你所有的标签都直接在 tags 目录下，你可以简单地使用`svn log`来查看`/tags`目录中的变化：

```
$ svn log -v $REPO/tags 
```

第一个条目将是创建的最后一个标签。如果您使用 Python 或 Perl，您可以拥有一个脚本，该脚本将在 PC 和 (U|li)nix 系统上运行，该脚本将返回最后创建的标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:58:03.370

也许使用 svn log 会给你你想要的，例如：

```
$ svn log http://some/repos/tags
------------------------------------------------------------------------
r4443 | joe | 2012-12-18 15:35:27 -0800 (Tue, 18 Dec 2012) | 1 line
Changed paths:
   A /tags/release-2.2.3.1-ga (from /branches/release-2.2:4442)

------------------------------------------------------------------------
r4345 | joe | 2012-11-21 17:40:11 -0800 (Wed, 21 Nov 2012) | 1 line
Changed paths:
   A /tags/release-1.7.4.1-ga (from /branches/release-1.7.4:3872)

Create tag for 1.1.4.1

... 
```

因此，您可以使用一些 shell 工具来选择您的 sprint 名称，或者读取 XML 格式的日志输出 (svn log --xml) 并从中挑选出来。无论您更擅长哪种方法。

# html - 脚本中的指导/不太确定我在寻找什么

> ID：13982780
> 
> 赞同：0
> 
> 时间：2012-12-21T00:44:39.877
> 
> 标签：html, forms, webforms

我是 CS 学位的 3 个学期，我希望自己做一些学习。作为一个附带项目，我决定尝试制作一个脚本，让每个设定的时间间隔（比如 5 分钟）输入一门课程'按下' html 网站上的按钮）

老实说，我不知道从哪里开始，对于我应该从哪些主题开始的任何指导都表示赞赏。

再次感谢，如果这是一个“愚蠢”的问题，对不起......我四处搜索，要么做这样的事情超出了我的想象，要么我还没有找到那个幸运的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:54:22.160

既然你喜欢[Autoit](http://www.autoitscript.com/site/autoit/)，你可能应该接受这个答案:)

# c# - Runat 服务器变量给出 NULL 引用错误

> ID：13982782
> 
> 赞同：1
> 
> 时间：2012-12-21T00:44:47.737
> 
> 标签：c#, asp.net, ascx

我有一个非常小的 ASCX 文件，它打算用作 BlogEngine.NET 主题的一部分，但我遇到了一个我无法弄清楚的错误。这是**FrontPageBox1.ascx**文件：

```
<%@ Control Language="C#" Debug="true" AutoEventWireup="true" CodeFile="FrontPageBox1.ascx.cs" Inherits="FrontPageBox1" %>
<%@ Import Namespace="BlogEngine.Core" %>

<div id="box1" runat="server"></div> 
```

这是文件后面的 C# 代码（**FrontPageBox1.ascx.cs**）：

```
using System;
using BlogEngine.Core;

public partial class FrontPageBox1 : BlogEngine.Core.Web.Controls.PostViewBase
{
    public FrontPageBox1()
    {
        Guid itemID = new Guid("6b64de49-ecab-4fff-9c9a-242461e473bf");
        BlogEngine.Core.Page thePage = BlogEngine.Core.Page.GetPage(itemID);

        if( thePage != null )
            box1.InnerHtml = thePage.Content;
        else
            box1.InnerHtml = "<h1>Page was NULL</h1>";
    }
} 
```

当我运行代码时，在引用“box1”的行上出现错误。

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

“box1”变量也没有出现在 WebMatrix 的 Intellisense 中，但错误是编译后的，所以我认为这不相关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T00:56:14.583

在 ASP.NET Web 窗体中，aspx/ascx 文件中定义的控件在初始化页面步骤期间被初始化，因此仅在`OnInit`事件之后可用。将您的逻辑从构造函数移动到`OnInit`事件处理程序

```
public partial class FrontPageBox1 : BlogEngine.Core.Web.Controls.PostViewBase
{
    protected override void OnInit(EventArgs e)
    {
        Guid itemID = new Guid("6b64de49-ecab-4fff-9c9a-242461e473bf");
        BlogEngine.Core.Page thePage = BlogEngine.Core.Page.GetPage(itemID);

        if( thePage != null )
            box1.InnerHtml = thePage.Content;
        else
            box1.InnerHtml = "<h1>Page was NULL</h1>";
    }
} 
```

# jquery - 为什么这个 ajax 帖子会被调用两次？

> ID：13982786
> 
> 赞同：4
> 
> 时间：2012-12-21T00:45:08.023
> 
> 标签：jquery

在检查了其他 SO 帖子后，我没有找到我的问题的答案——但显然这种类型的问题发生在其他人身上，而不是我的问题。但是一个 ajax .post 函数被调用了两次，虽然我不明白为什么。

这是 jQuery 1.8.0，使用 Firefox (Iceweasel) 浏览器。

这是我的 jquery 代码，它将函数附加到四个按钮，编辑、保存、新建、取消。还有一个填充选择列表的函数：

```
 var is_new = 0;

  $(document).ready(function()
  {
    // Attach event handlers to buttons
    $('#editbtn').on('click',pop_studyname);
    $('#newbtn').on('click',new_studyname);
    $('#savebtn').on('click',save_studyname);
    // disable the Save button until we have something to save
    $('#savebtn').attr('disabled',true);
    // disable the Cancel button until we have something to cancel
    $('#cancelbtn').attr('disabled',true);

  });

  function pop_studyname()
  {
    // pop the selected studyname into edit box.
    $('#edit_field').val($('#studylist :selected').text());
    // disable the New Study button
    $('#newbtn').attr('disabled',true);
    // enable the Cancel button
    $('#cancelbtn').attr('disabled',false);
    // and bind it to a function
    $('#cancelbtn').on('click',cancel_studyname);    
    // enable the Save button
    $('#savebtn').attr('disabled',false);
    // and bind it to a function
    $('#savebtn').on('click',save_studyname);
  }

  function new_studyname()
  {
    // clear edit box.
    $('#edit_field').val('');
    /**************************/
    /* set flag for New Study */
    is_new = 1;
    /**************************/

    // Enable the Cancel button
    $('#cancelbtn').attr('disabled',false);
    // and bind it to a function.
    $('#cancelbtn').on('click',cancel_studyname);
    // Disable the Edit button.
    $('#editbtn').attr('disabled',true);
    // Enable the Save button
    $('#savebtn').attr('disabled',false);
    // and bind it to a function.
    $('#savebtn').on('click',save_studyname);
    // put the cursor in the edit box
    $('#edit_field').focus();
  }

  function cancel_studyname()
  {
    // clear edit box.
    $('#edit_field').val('');
    // disable cancel button.
    $('#cancelbtn').attr('disabled',true);
    // disable Save button.
    $('#savebtn').attr('disabled',true);
    // Enable the Edit button.
    $('#editbtn').attr('disabled',false);
    // And the New Study button.
    $('#newbtn').attr('disabled',false);
    // Reset new study trigger variable. 
    is_new = 0;
  }

  function save_studyname()
  {
    // Are we saving a new or existing Study?
    if (is_new == 1) {
        $.post("saveStudyName.php",
        {'type': 'new', 'studyname': $('#edit_field').val()},
            function(resultmsg) {
              alert(resultmsg);
            }
        );
    // reset the trigger flag
    is_new = 0;

    } else {
      // Update an existing Study.
        // Get the record index and edited study name.
        var styndx = $('#studylist option:selected').val();
        var studyname = $('#edit_field').val();

    // Use ajax post call to update database.
        $.post("saveStudyName.php",
      {'type': 'update', 'studyname':studyname, 'styndx':styndx}, 
      function(resultmsg) {
              alert(resultmsg);
      });
    }
    // clear the edit field
    $('#edit_field').val('');
    // disable the Save button
    $('#savebtn').attr('disabled',true);
    // Enable the Edit button.
    $('#editbtn').attr('disabled',false);
    // Enable the New Study button.
    $('#newbtn').attr('disabled',false);
    // Finally, refresh the studyname picklist.
    refresh_studynames();
  }

  function refresh_studynames()
  {
    // repopulate studylist with update from database...
    // - form the query.
    // - send to database, get the result.
    // - use the result to repopulate the Study name select list.
    $.ajax({                                      
      url: 'getStudyNames.php',        //the script to call to get data          
      data: "",                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format
      error: function() {
        alert('Refresh of study names failed.');
      },
      success: function(data) 
      {
    var $studylist = $('#studylist').empty();
    $.each(data, function(i, record) {
       $studylist.append($("<option/>", {
        value: record.studyindex,
        text: record.studyname
        }));
    });
      } 
    });
  } 
```

查看 Web 控制台和调试器，我可以看到两个 POST（用于 saveStudyName.php）和两个 GET（来自 getStudyNames.php）正在发生，彼此相距仅几毫秒。第一个调用是正确的；但第二个不应该发生。由于涉及的逻辑，第二次调用中的参数不正确并且失败。

为了完整起见，这里是 HTML 代码：

```
<body >
<div id="container">
  <div id="header">
    <h1>Admin Module</h1>
  </div>
  <div id="navigation">
    <ul>
    <li><a href="AdminMenu.php">Admin Menu</a></li>
    <li><a href="../DNAPortal/DNA_Portal_Menu.php">DNA Portal</a></li>
    <li><a href='../DNAPortal/logout.php'>Logout</a></li>>
    </ul>
  </div>
  <div id="content">
    <h2>IBG Study Maintenance</h2>
    <p>
    <form name="StudySelection" action="process_StudyMaint.php" method="POST" onsubmit="return false" >
    <input type=hidden name=studyindex>
    <div id=content-container2>
      <fieldset>
      <LEGEND><b>Select Study &/or action</b></LEGEND>
    <p>
    <P CLASS=select_header>List of Studies<br>
    <SELECT multiple size=15 NAME="studylist" ID="studylist" STYLE="width: 150px">
    <?php
        $i=0;
        while ($i < $numstudies) {
            $styarr = pg_fetch_row($studyresult);
            echo "<option value=$styarr[0]>$styarr[1]\n";
            $i++;           
        }
      ?>
    </select>
    </p>                
      </fieldset>
    </div>
    <div  >

    </div>
    <div class="lower_block">
      Study name:<br>
      <input id="edit_field" type="text" size=30>
      <input type="button" name="editbtn" id="editbtn" value="Edit" sclass="btn">
      <input type="button" name="savebtn" id="savebtn" value="Save" sclass="btn">
      <input type="button" name="newbtn" id="newbtn" value="New Study" sclass="btn">
      <input type="button" name="cancelbtn" id="cancelbtn" value="Cancel" sclass="btn" disabled=TRUE >
    </div>
  </div>
</div>
</form>
</body> 
```

有什么方法可以阻止第二次通话的发生吗？我看不出发生这种情况的任何原因。

非常感谢任何帮助！太摇滚了！

--rixter

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:00:01.460

如果您在保存之前点击编辑或新建，那么它会被调用两次，因为您告诉过它。

加载页面时，您调用：`$('#savebtn').on('click',save_studyname);`

并且回调函数`pop_studyname()`和`new_studyname()`关于`Edit`和`New`按钮包含同一行。

如果您`.on()`为同一事件执行多个操作，您将收到多个呼叫。你需要确保它只被调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:35:19.610

请试试这个，它对我有用......

```
$(this).unbind(); 
```

# mysql - Azure 上 MySQL 的可扩展性

> ID：13982788
> 
> 赞同：0
> 
> 时间：2012-12-21T00:45:48.677
> 
> 标签：mysql, performance, azure, scalability

我在免费试用期内在 Azure 上使用 MySQL 实例。我注意到的一件事是`max_user_connections`在此选项下设置为 4，在[最高价格层](http://www.windowsazure.com/en-us/store/service/?name=cleardb)下设置为 40 。

这两个似乎都很低，除非我误解了什么。假设我有 41 个用户同时发出数据库请求，这不会因为超过最大允许连接数而导致失败吗？好像空间不大。

如何使用 Azure 来允许实际数量的同时连接？还是我想错了？我应该为 SQL Azure 转储 MySQL 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:09:50.323

如果您使用的是 .NET 框架，则连接池由数据提供者管理。与打开连接并在整个会话中保持打开状态不同，.NET 每个数据库操作/事务通常打开连接，执行单个任务，然后在操作完成后关闭连接。.NET MySQL 数据提供程序还支持高级连接池，请参阅 [http://www.devart.com/dotconnect/mysql/docs/ComparingProviders.html](http://www.devart.com/dotconnect/mysql/docs/ComparingProviders.html)

我假设 Azure 限制是指使用第一个（会话持续时间）替代方案的应用程序。

# javascript - 使用 javascript 在页面加载之前缓存数组中的动态图像

> ID：13982789
> 
> 赞同：3
> 
> 时间：2012-12-21T00:45:48.407
> 
> 标签：javascript, jquery, image, caching, dynamic

我正在尝试制作 4 个滑动画廊，但在以画廊形式显示图像之前，我需要在初始屏幕后面预加载（缓存）所有图像。我一直在尝试使用“jPreLoader v2 - [http://www.inwebson.com/jquery/jpreloader-a-preloading-screen-to-preload-images](http://www.inwebson.com/jquery/jpreloader-a-preloading-screen-to-preload-images) ”，但没有运气。

下面的代码是我如何尝试将每个画廊目录中的所有图像预加载到 jpreloader 后面的单个画廊中，然后一旦加载完成删除整个画廊并一次显示每个画廊。

```
var pictures =  [
    "1.jpg",
    "2.jpg",
    "3.jpg",
    "4.jpg",
    .......,
    "30.jpg"
 ]

$(window).load(function(){

preLoad();

function preLoad(){
    var max = 30;
    var pic;
    picture = '<table id="table" style="dipslay:table;"><tr>';
    for (var i=0;i < max; i++){
        if(i < 30){
            pic = "images/art/"+pictures[i];
            appendCell(pic);
        }
        if(i < 17){
            pic = "images/street/"+pictures[i];
            appendCell(pic);
        }
        if(i < 19){
            pic = "images/doc/"+pictures[i];
            appendCell(pic);
        }
        if(i < 16){
            pic = "images/commercial/"+pictures[i];
            appendCell(pic);
        }
    };
    picture += '</tr></table>';
    $('#imageScroller').append(picture);
}

function appendCell(pic){
    picture +="<td class='image'><img class='i' src='"+pic+"'></td>";
    return;
}
}); 
```

我不太确定如何在上面的动态图像加载循环上实现 jpreloader，而不是已经插入到 dom 中。

```
$(document).ready(function () {
$('body').jpreLoader();
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T01:14:00.157

下载图像时更新的自定义进度条

```
var pictures = [
                    "1.jgp",
                    "2.jpg"
                ];

var loadedSoFar = 0;

function loaded( ) {
    // do stuff
}

function updateProgress( ) {

    loadedSoFar++;

    var newWidth = $("#progress").width() * ( loadedSoFar / pictures.length );
    $("#bar").stop( true, true );
    $("#bar").animate({ width: newWidth }, 500, function( ) {
        if( loadedSoFar === pictures.length ) { loaded() }
    });
}

for( var i = 0; i < pictures.length; i++ ) {
    var img = new Image();
    img.src = pictures[ i ] + i;

    img.onload = function( ) {
        updateProgress();
    }
} 
```

演示[**在这里**](http://jsfiddle.net/bruno/nTYpM/2/)

# jquery - jQuery：on() 现在比 live() 更受欢迎，但是 on() 不适用于 jQuery Mobile？

> ID：13982790
> 
> 赞同：1
> 
> 时间：2012-12-21T00:46:00.143
> 
> 标签：jquery, jquery-mobile

我一直在努力使用以下功能：

```
$('#pageName').on('pagebeforecreate', function() {
  // Compile the page using Handlebars
}); 
```

然后我尝试切换`on`到`live`，尽管 jQuery 文档说不`live`推荐使用。现在一切正常。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:50:05.533

这发生在我身上几次，它与我的元素在执行 javascript 后动态生成有关。

尝试这个：

```
$('body').on('pagebeforecreate', '#pageName', function() {
    // Compile the page using Handlebars
}); 
```

你会想要使用一个更好的父元素，`body`但选择一个不会改变的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T00:49:50.210

`.on()`使用委托的语法（*即元素 DOM 层次结构处理发生在其后代上的事件*）与您使用的语法不同。（*参见[http://api.jquery.com/on/#direct-and-委托事件](http://api.jquery.com/on/#direct-and-delegated-events)*）

```
$('container-of-#pageName').on('pagebeforecreate','#pageName', function() {
  // Compile the page using Handlebars
}); 
```

当然，您需要更改`container-of-#pageName`为一个选择器，它是`#pageName`.

* * *

如果你不能这样做，那么你可以使用`body`and 这将完全模仿`.live()`（*但不建议这样做*）

```
$('body').on('pagebeforecreate','#pageName', function() {
  // Compile the page using Handlebars
}); 
```

# asp.net - 命名空间与实际文件层的关系

> ID：13982791
> 
> 赞同：1
> 
> 时间：2012-12-21T00:46:04.490
> 
> 标签：asp.net, namespaces, hierarchy

好的，正如标题所问，我目前在一个asp.net网站上工作，我发现所有的aspx和ascx文件实际上都留在一个命名空间中，但是它们之间存在不同的目录层次结构。请参见下面的示例。

```
Mainsite
   |    Dialogs
   |       |   Help.ascx
   |       |   Price.aspx
   |    Includes
   |       |   QuickLink.acsx
   |    Members
   |    Orders
   |    Login.aspx
   |    Default.aspx 
```

与上面的示例一样，所有 aspx 和 ascx 文件都属于命名空间**Order**，但是 Login.aspx 和 Price.aspx 位于不同的目录中。我的意思是默认情况下，当您在某个目录中创建 aspx 文件时，默认命名空间将继承目录信息。

问题是我发现了一个经常发生的错误，在 Default.aspx 中有对**Dialogs/Price.aspx**的 ajax 调用，然后错误消息找不到**Dialogs/Dialogs/Price.aspx**，这很奇怪。

# php - PHP中的远程MySQL连接

> ID：13982796
> 
> 赞同：3
> 
> 时间：2012-12-21T00:46:22.177
> 
> 标签：php, mysql, database-connection

我开始将软件项目从桌面应用程序迁移到 Web 应用程序。目前我正在使用与安装它的桌面相关联的本地 PHP/MySQL 连接。

我希望解决这个问题，并尝试通过我的 1and1 帐户创建一个 MySQL 数据库。我可以轻松创建数据库并记录我的帐户信息。我希望能够在我的系统上使用 PHP 脚本编辑这个数据库。但是，我无法获得有效的连接字符串。当我运行以下 PHP 脚本时：

```
$hostname="db*********.db.1and1.com";
$database="db*********";
$username="dbo*********";
$password="*********";

$link = mysql_connect($hostname, $username, $password); 
```

在我的网络浏览器中运行脚本时出现以下错误：

```
Warning: mysql_connect() [function.mysql-connect]: Unknown MySQL server host 'db*********.db.1and1.com' (11001) in C:\Program Files\xampp\htdocs\Remote_MySQL\rightbid_database_initialize.php on line 74
Connection failed: Unknown MySQL server host 'db*********.db.1and1.com' (11001) 
```

如何让我的本地系统识别 1and1 服务器主机？我是否正确地构建了我的连接字符串？是否可以从本地托管的 Windows PHP 连接访问远程服务器？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:51:48.297

我假设如果 1&1 阻止来自其网络外部的任何连接，会发生什么。

尝试使用连接

```
mysql -h HOST -u USERNAME -p DATABASENAME 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:52:10.837

确保 1and1 上的 MySQL 服务器将接受来自远程客户端的连接。不仅在本地主机上，还要确保端口 3306 对服务器开放。

# php - 密码正确但同时密码错误

> ID：13982798
> 
> 赞同：-6
> 
> 时间：2012-12-21T00:46:52.970
> 
> 标签：php, mysql

因此，每当我登录并且密码正确时，它都会说密码不正确。我将如何解决这个问题

```
<?php
session_start();
require "php/dbc.php";

$username     = mysql_real_escape_string($_POST['username']);
$password     = mysql_real_escape_string($_POST['password']);
$enc_password = md5($password);

if ($username && $password) {
    $query  = mysql_query("SELECT * FROM login WHERE username='$username'");
    $numrow = mysql_num_rows($query);
    if ($numrow != 0) {
        while ($row = mysql_fetch_assoc($query)) {
            $db_username  = $row['username'];
            $enc_password = $row['password'];
        }
        if ($username == $db_username && $enc_password == $db_password) {
            //echo "Logged in <a href='members.php'>Click here to enter the members area</a>";
            $_SESSION['username'] = $db_username;
            header("location: members.php");
        } else {
            header("location: top_nav.html?error=Incorrect Password");
        }
    } else {
        header("location: top_nav.html?error=That user doesn't exist");
    }
} else {
    header("location: top_nav.html?error=All fields are required");
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:59:22.060

您的错误在于如何获取和测试数据库存储的密码：

```
while ($row = mysql_fetch_assoc($query)){
    $db_username = $row['username'];
    $enc_password = $row['password']; // this should probably be $db_password
}
if ($username == $db_username && $enc_password == $db_password){ 
// this condition will be false as $db_password is null, 
// and so not equal to $enc_password which is currently set to the database value 
```

您的方法有点迂回 - 通常，我会查询用户名和加密的传入密码，而不是从数据库中加载密码以供稍后测试。

另外 - 你真的应该注意 mysql 库的 PHP 手册页上的大红框：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_connect()
> 
> PDO::__construct()

正如下面的评论中提到的 - 你应该使用 PDO 和准备好的查询

# php - 从数据库中的日期添加特定时间线？

> ID：13982800
> 
> 赞同：0
> 
> 时间：2012-12-21T00:47:06.597
> 
> 标签：php

这是我的代码。我正在尝试添加 $Rows['howfar'] 在这种情况下。可以说是2。

所以我试图在我的数据库中添加两周的日期：

```
//$Rows['howfar'] = 2 weeks for example.
    $NextDate = $Rows['Date'], strtotime("+{$Rows['howfar']} weeks")); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:50:27.667

```
$NextDate = date('Y-m-d', strtotime($Rows['Date'] . " +" . $Rows['howfar'] . " weeks")); 
```

# python - 在 scipy 稀疏矩阵中找到给定的行？

> ID：13982804
> 
> 赞同：0
> 
> 时间：2012-12-21T00:47:32.900
> 
> 标签：python, numpy, scipy, sparse-matrix

问题很简单：假设我有一个来自 scipy 稀疏矩阵 M（100,000X500,000）的给定行 r，我想在 M 矩阵中找到它的位置/索引？我怎样才能有效地做到这一点？

目前我正在尝试以下方式，但速度非常慢。

```
offset = 500
begin = 0
end  = begin + offset
row = row.todense() #convert sparse to dense
while 1:
    sub_M = M[begin:end,:].todense() #M matrix is too big that its dense cannot fit memory 
    labels=np.all(row == sub_M, axis=1) # here we find row in the sub set of M, but in a dense representation
    begin = end
    end = end + offset
    if (end - offset) == M.shape[0]:
        break
    elif end > M.shape[0]:
        end = M.shape[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:41:24.740

除非您想深入研究一种或多种稀疏矩阵类型的内部结构，否则您应该对矩阵使用 CSR 格式，并且：

*   计算每个矩阵行的长度（L2范数）；换句话说：`sum(multiply(M, M), 2)`
*   将 r 归一化为 (L2) 长度 1
*   矩阵乘法`M*r`（其中 r 被视为列向量）

如果条目`M*r`匹配相应行的长度，则您有一个匹配项。

请注意，默认`ord`值为`numpy.linalg.norm`L2 norm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T01:19:13.917

最后，我想出了一个非常简单但非常省时的解决方案。稀疏矩阵中的每一行都被转换为字符串，并与其索引/位置一起放入字典中。然后需要找到的行是字典的键，而 dic[str(row)] 给了我它的索引。

# python - Python：检查新文件并等待它们完成传输

> ID：13982806
> 
> 赞同：2
> 
> 时间：2012-12-21T00:47:39.123
> 
> 标签：python, video, filesystems, windows-server-2008

我有一个脚本来扫描目录以查看何时添加新文件，然后处理它们的内容。它们是视频文件，因此它们通常非常大，并且通过网络传输并且通常需要很长时间才能传输。所以我需要确保他们在继续之前完成了复制。

目前，一旦我在目录中找到了一个新文件，我就使用 os.path.mtime 检查修改日期，并将其与上次扫描文件的时间进行比较，看看它是否仍在修改中. 理论是，如果它不再被修改，那么它应该已经完成​​转移。

```
if getmtime(path.join(self.rootFolder, thefile)) < self.lastchecktime: newfiles.append[thefile] 
```

但这似乎不起作用 - 脚本过早触发并且处理失败，因为文件未完全加载。会不会是扫描之间没有足够的停顿以使 mtime 保持不变……？我在两次扫描之间给它 10 秒 - 这应该足够了，当然。

有没有一种简单/更pythonic的方式来做到这一点？这些文件位于在 VM 上运行的 Windows 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:19:44.137

您对文件的添加有任何控制权吗？如果是这样，您可以创建一个名称类似于`videoname-complete`视频上传完成后的空文件，并注意这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:22:00.270

您的检查不会是“我的修改时间是否大于上次检查的时间？”。

```
if os.path.getmtime(path) > self.lastAccessedTime: 
    # do something as modified time is greater than last time I checked
    pass 
```

我不是 Windows 人，但我相信会有一些等效的库来为 Windows 进行 inotify。这是在文件系统级别侦听文件或目录更改的一种非常好的方法。我要留下一些在 linux 上使用 pyinotify 工作的示例代码，这对使用 linux 的人会有所帮助。

```
class PTmp(pyinotify.ProcessEvent):
    def process_IN_CLOSE_WRITE(self, event):
        print "Changed: %s " % os.path.join(event.path, event.name)

wm = pyinotify.WatchManager()
mask = pyinotify.IN_CLOSE_WRITE
notifier = pyinotify.Notifier(wm, PTmp())
wdd = wm.add_watch(FILE_LOCATION, mask, rec=True)

while True:
    try:
        notifier.process_events()
        if notifier.check_events():
            notifier.read_events()

    except KeyboardInterrupt:
        notifier.stop()
        break 
```

# python - python webdriver的is_element_present在对象不存在时不起作用

> ID：13982807
> 
> 赞同：1
> 
> 时间：2012-12-21T00:48:14.253
> 
> 标签：python, webdriver

用 selenium ide 记录后，我在我的代码中得到了这个方法：

```
def is_element_present(self, how, what):
    try:
        self.driver.find_element(by=how, value=what)
    except NoSuchElementException, e:
        return False
    return True 
```

当对象存在时，它工作正常：

```
print self.is_element_present("id","kw") 
```

我得到了真实

但是当对象不存在时：

```
print self.is_element_present("id","kw1") 
```

在很长一段时间内（超过 self.driver.implicitly_wait(30)），我什么也没得到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:16:03.560

webdriver的版本和firefox的兼容性是首先要检查的。FF16 适用于 java 的 2.25。我认为 2.26 也支持 17。你每个都有什么版本？

编辑：对于 python 更改日志不会超出 FF13： [http ://selenium.googlecode.com/svn/trunk/py/CHANGES](http://selenium.googlecode.com/svn/trunk/py/CHANGES)

# assembly - 可能的或分支 mips32？

> ID：13982820
> 
> 赞同：0
> 
> 时间：2012-12-21T00:51:27.643
> 
> 标签：assembly, mips32

我正在尝试找到一种方法来做类似`bOR $a0, $a1, $a2 else`的事情，比如`if(a=b||a=c){blablabla}else{blabla}`在 java 中，但我不知道在 mips32 中做这件事的方法。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:00:20.547

自从我进行任何组装以来已经有很多年了，但是由于没有人回应，这就是我记得的。我希望你接受这个答案，如果没有其他原因，我正在为你重新经历我最糟糕的噩梦。

要在汇编中执行任何类型的逻辑，您需要进行比较，然后进行条件跳转。例如，以下形式的 if/else 语句：

```
if (a == b || a == c) {
    cond1
}
else {
    cond2
}
cond3 
```

将被翻译如下（伪代码）：

```
 cmp a,b
    je cond1
    cmp a,c
    je cond1
    ...
cond2:
    ...
    jmp cond3

cond1:
    ...
cond3:
    ... 
```

Cmp 比较值，而 je 是一个条件分支，如果最后一次比较显示值相等，则跳转。基本上，您到处都在使用 goto。同样，这是伪代码，但您应该很容易找到 MIPS 类似物。

说到这里，我发现了这个：http: [//jjc.hydrus.net/cs61c/handouts/loops4.pdf](http://jjc.hydrus.net/cs61c/handouts/loops4.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:06:09.117

x86 代码，但它应该给出一个想法。

```
 cmp     eax, ebx
    je      blablabla
    cmp     eax, ecx
    jne     blabla

blablabla: ; if a == b || a == c
    ;do your blablabla sutff here
    jmp     Continue

blabla: ; else
    ;do your blabla sutff here

Continue: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:33:03.537

假设你有`a`in `$a0`, `b`in`$a1`和`c`in`$a2`然后你会做

```
 beq $a0, $a1, if
  beq $a0, $a2, if
  bgez $zero, else
if:
    .. code if a=b or a=c
  bgez $zero, endif
else:
    .. code otherwise
endif: 
```

# kendo-ui - Kendo UI Mobile ListView - 加载更多按钮不起作用

> ID：13982821
> 
> 赞同：0
> 
> 时间：2012-12-21T00:51:32.143
> 
> 标签：kendo-ui

看起来“按下加载更多”选项不适用于最新版本的 Kendo Mobile UI (2012-q3)。我在 Galaxy Nexus 和 iPod 上试过。

[http://demos.kendoui.c​​om/mobile/listview/press-to-load-more.html](http://demos.kendoui.com/mobile/listview/press-to-load-more.html)

任何修复的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:12:54.797

这是一个错误，我们修复了它，修复将在下一个内部版本中提供。

作为一种解决方法，您可以重新设置按钮上的事件处理（从演示中获取的初始化代码）：

```
 var listview = $("#load-more").kendoMobileListView({
        dataSource: dataSource,
        template: $("#load-more-template").text(),
        loadMore: true
    }).data("kendoMobileListView");

    listview._loadButton
        .off("click.kendoMobileListView")
        .on("touchend.kendoMobileListView click.kendoMobileListView", $.proxy(listview._nextPage, listview)); 
```

这将破坏**stopLoadMore**方法，因此最好在可用时获取更新。

# jquery - 运行动画然后更改页面 - jquery

> ID：13982823
> 
> 赞同：1
> 
> 时间：2012-12-21T00:51:45.457
> 
> 标签：jquery

我正在尝试构建一个脚本，以防止链接立即更改页面并首先运行动画。这是我到目前为止所拥有的：

```
$('a').click(function(event){
    event.preventDefault();

    $('#nav-bar').animate({
        left:'-260'
    }, 1500, function(){
//want to use callback function to load the page....
            $(this).attr('href') what next?

        }
    ); 
```

我想重建默认事件并在回调函数中触发。是否有捷径可寻？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:55:28.953

用于`window.location.href`导航所需的页面，您还必须保存对单击的链接的引用，以便您可以在动画回调中使用它。

```
$('a').click(function(event){
    event.preventDefault();
    var self = this;
    $('#nav-bar').animate({
        left:'-260'
    }, 1500, function(){
            window.location.href = self.href;
        }
    ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T00:55:40.637

设置`window.location`为`href`

```
$('a').click(function(event){
    event.preventDefault();
    var href = this.href;

    $('#nav-bar').animate({
        left:'-260'
    }, 1500, function(){
        //want to use callback function to load the page....
        window.location = href;
    }
); 
```

# .htaccess - .htaccess 301 重定向动态 .cfm 页面

> ID：13982826
> 
> 赞同：0
> 
> 时间：2012-12-21T00:52:16.050
> 
> 标签：.htaccess, redirect, dynamic

我有 Google 索引的页面，例如 sample.com/product-detail.cfm?id=532323。这些页面有很多。这些页面不再存在，我想将它们全部重定向到我们新站点的主页。谁能建议如何重定向所有页面而不必单独执行每个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:46:34.370

> All of them should go to the home page

Then you can just check for `/product-detail.cfm` and ignore the `id=` param in the query string. You can do this with either mod_alias or mod_rewrite by adding these directives in the htaccess file in your document root:

Using mod_alias:

```
Redirect 301 /product-detail.cfm / 
```

Using mod_rewrite:

```
RewriteEngine On
RewriteRule ^product-detail.cfm$ / [L,R=301] 
```

# extjs - 骨干与 extjs（核心 + xtemplate + 存储）？

> ID：13982832
> 
> 赞同：2
> 
> 时间：2012-12-21T00:53:00.463
> 
> 标签：extjs, backbone.js

我使用 extjs 从 2.2 到 4.1

现在我找到了backbonejs，它是如此的轻量级。

我想知道它们是否与下表描述的工作相同？

我的意思是使用extjs-core + dataview + xtemplate + store（来自ext3，你可以打包你想要的），而不是使用整个extjs。

```
| BackBone   | ExtJS       |
|:-----------|------------:|
| underscore | ext-core    |  
| model      | model       |  
| collection | store       |  
| event      | event       |
| router     | ??          |
| view       | DataView + XTemplate|
| MIT        | GPLv3       | 
```

# python - 使用 Oauth 在 python 中执行 twitter 搜索

> ID：13982833
> 
> 赞同：0
> 
> 时间：2012-12-21T00:53:19.153
> 
> 标签：python, twitter

我想我只是在这里有点白痴，但我已经想出了如何获取我的时间线，但不知道如何将其修改为执行搜索。我目前有：

```
consumer = oauth.Consumer(key=CONSUMER_KEY, secret=CONSUMER_SECRET)
access_token = oauth.Token(key=ACCESS_KEY, secret=ACCESS_SECRET)
client = oauth.Client(consumer, access_token)

response, data = client.request(searchURL) 
```

我猜这是最后一行将更改为与搜索一起使用，但我不确定如何格式化它，如果我将 searchURL 更改为用于实际搜索的那个（它目前在时间线上）它说它是格式错误。

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:11:38.783

原来它是关闭的形式：

```
searchURL = https://api.twitter.com/1.1/search/tweets.json?q=obama&count=2&tresult_type=popular 
```

这是一个使用关键字“obama”的示例搜索，将计数设置为 2，并过滤热门结果。

```
response, data = client.request(searchURL)

tweets = json.loads(data) 
```

返回推文的格式有点……尴尬，但稍微玩一下就可以理解。

# c++ - 对析构函数的未定义引用

> ID：13982834
> 
> 赞同：4
> 
> 时间：2012-12-21T00:53:28.953
> 
> 标签：c++, reference, include, undefined, destructor

我已经用 c++ 编写了一些代码，但是当我尝试编译时，我得到了一个非常奇怪的错误，我不应该有。这是我的代码：

```
#include <iostream>
using namespace std;
#include "articles.h"
int main() {
  // Création des articles
  const Stylo s1 ("s1", "Stylo jade", "Watertruc", 500, "Noir");
  const Ramette r1 ("r1", "Ramette haute qualité", "Clairefont", 95, 80);
  // Création des lots (10 % de réduction)
  const Lot l1 ("l1", s1, 5, 10);
  cout << s1 << "\n" << r1 << "\n" << l1 << "\n";
} 
```

文章.h

```
#ifndef ARTICLES_H
#define ARTICLES_H
using namespace std;
#include <string>
#include <iostream>

class Article
{
    public:
    string getReference() const ;
    virtual string getDescriptif() const;
    virtual double getPU() const;
    string getMarque() const;
    virtual void Afficher(ostream&) const;
    ~Article();

    protected:
    Article(string);
        string reference;
    private:

};
//ostream& operator<<(ostream& os, const Article& art);

class ArticleUnitaire : public Article {
    public:
      ArticleUnitaire(string);
      ArticleUnitaire(string, string, string, double);
      string getMarque() const;
      void setMarque(string&);
      double getPU() const;
      void setPU(double&);
      void setDescriptif(string&);
      string getDescriptif() const;
      virtual void Afficher(ostream&) const;
      ~ArticleUnitaire();

    protected:
      string marque;
      double pu;
      string descriptif;
    private:

};
inline ostream& operator<<(ostream& os, const Article& art) {
  art.Afficher(os);
  return os;
}

class Stylo : public ArticleUnitaire {
    public:
      Stylo(string, string, string, double, string);
      virtual void Afficher(ostream&) const;
      string getCouleur() const;
      ~Stylo();
    protected:
    private:
      string couleur;

};

class Ramette : public ArticleUnitaire {
    public:
      Ramette(string, string, string, double, int);
      virtual void Afficher(ostream&) const;
      int getGrammage() const;
      ~Ramette();
    protected:
    private:
      int grammage;
};

class Lot : public Article {
    public:
      Lot(string, Article, int, int);
      double getPU() const;
      string getDescriptif() const;
      string getMarque() const;
      int getNbArticles() const;
      void setNbArticles(int&);
      int getPourcentage() const;
      void setPourcentage(int&);
      Article getArticle() const;
      void setArticle(Article&);
      virtual void Afficher(ostream&) const;
      ~Lot();

    protected:
    private:
      int nb;
      int pourcentage;
      Article art;
};

#endif // ARTICLES_H 
```

文章.cc

```
using namespace std;
#include <typeinfo>
#include <string>
#include <sstream>
#include "articles.h"

/*   Article   */

Article::Article(string ref) : reference(ref) {};

string Article::getReference() const {
  return reference;
}

string Article::getMarque() const {
  return "Sans marque";
}

void Article::Afficher(ostream& os) const {
  os << " : reference = " << getReference() << " ; descriptif = " << getDescriptif() << " ; marque = " << getMarque() << " ; PU = " << getPU();
}

Article::~Article() {};

/*   Article Unitaire   */

ArticleUnitaire::ArticleUnitaire(string r) : Article(r) {};

ArticleUnitaire::ArticleUnitaire(string r, string d, string m, double p) : Article(r), marque(m), descriptif(d), pu(p) {};

string ArticleUnitaire::getMarque() const {
  return marque;
}

void ArticleUnitaire::setMarque(string& m) {
  marque = m;
}

double ArticleUnitaire::getPU() const {
  return pu;
}

void ArticleUnitaire::setPU(double& p) {
  pu = p;
}

void ArticleUnitaire::setDescriptif(string& d) {
  descriptif = d;
}

string ArticleUnitaire::getDescriptif() const {
  return descriptif;
}

ArticleUnitaire::~ArticleUnitaire() {};

/*   Stylo    */

Stylo::Stylo(string r, string d, string m, double p, string c) : ArticleUnitaire(r,d,m,p), couleur(c) {};

string Stylo::getCouleur() const {
  return couleur;
}
void Stylo::Afficher(ostream& os) const {
  Article::Afficher(os);Lot
  os << " ; couleur = " << getCouleur();
}

Stylo::~Stylo() {};

/*   Ramette   */  
Ramette::Ramette(string r, string d, string m, double p, int g) : ArticleUnitaire(r,d,m,p), grammage(g) {};

int Ramette::getGrammage() const {
  return grammage;
}

void Ramette::Afficher(ostream& os) const {
  Article::Afficher(os);
  os << " ; grammage = " << getGrammage();
}

Ramette::~Ramette() {};

/*   Lot   */

Lot::Lot(string r, Article a, int n, int p) : Article(r), art(a), nb(n), pourcentage(p) {};

double Lot::getPU() const {
  return nb * art.getPU() * (100 - pourcentage) / 100;
}

string Lot::getDescriptif() const {
  stringstream sstm;
  sstm << "Lot de" << nb << " *" << art.getDescriptif() << "* ";
  return sstm.str();
}

string Lot::getMarque() const {
  return art.getMarque();
}

int Lot::getNbArticles() const {
  return nb;
}

void Lot::setNbArticles(int& nbArticles) {
  nb = nbArticles;
}

int Lot::getPourcentage() const {
  return pourcentage;
}

void Lot::setPourcentage(int& p) {
  pourcentage = p;
}

Article Lot::getArticle() const {
  return art;
}

void Lot::setArticle(Article& a) {
  art = a;
}

void Lot::Afficher(ostream& os) const {
  Article::Afficher(os);
  os << " ;reduction = " << getPourcentage() << " ; compose de " << getNbArticles() << " [" << art << " ]";
}

Lot::~Lot() {}; 
```

当我编译时：

```
g++ -Wall testArticles.cc
/tmp/ccwWjTWv.o: In function `main':
testArticles.cc:(.text+0xe8): undefined reference to `Stylo::Stylo(std::string, std::string, std::string, double, std::string)'
testArticles.cc:(.text+0x218): undefined reference to `Ramette::Ramette(std::string, std::string, std::string, double, int)'
testArticles.cc:(.text+0x2da): undefined reference to `Lot::Lot(std::string, Article, int, int)'
testArticles.cc:(.text+0x307): undefined reference to `Article::~Article()'
testArticles.cc:(.text+0x36f): undefined reference to `Lot::~Lot()'
testArticles.cc:(.text+0x37b): undefined reference to `Ramette::~Ramette()'
testArticles.cc:(.text+0x387): undefined reference to `Stylo::~Stylo()'
testArticles.cc:(.text+0x3b4): undefined reference to `Stylo::~Stylo()'
testArticles.cc:(.text+0x3e8): undefined reference to `Stylo::~Stylo()'
testArticles.cc:(.text+0x41c): undefined reference to `Stylo::~Stylo()'
testArticles.cc:(.text+0x450): undefined reference to `Stylo::~Stylo()'
testArticles.cc:(.text+0x48c): undefined reference to `Ramette::~Ramette()'
testArticles.cc:(.text+0x4c0): undefined reference to `Ramette::~Ramette()'
testArticles.cc:(.text+0x4f4): undefined reference to `Ramette::~Ramette()'
testArticles.cc:(.text+0x533): undefined reference to `Lot::~Lot()'
testArticles.cc:(.text+0x556): undefined reference to `Article::~Article()'
testArticles.cc:(.text+0x56a): undefined reference to `Lot::~Lot()'
testArticles.cc:(.text+0x57e): undefined reference to `Lot::~Lot()'
testArticles.cc:(.text+0x58f): undefined reference to `Ramette::~Ramette()'
testArticles.cc:(.text+0x5a0): undefined reference to `Stylo::~Stylo()'
/tmp/ccwWjTWv.o: In function `Article::Article(Article const&)':
testArticles.cc:(.text._ZN7ArticleC2ERKS_[_ZN7ArticleC5ERKS_]+0x17): undefined reference to `vtable for Article'
collect2: error: ld returned 1 exit status 
```

我在每个可能的网站上上网，每个人都说同样的话：看起来我搞砸了#include(s)。但我一直非常小心，我确信这是关于一些愚蠢和次要的事情，但已经 6 个小时了，我开始放弃了。这很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T00:57:56.363

您需要确保将所有 .cc 文件编译在一起。这样做`g++ -Wall articles.cc testArticles.cc`，或者你的文件实际上被调用了什么。这会将每个文件编译成一个 .o（对象）文件并为您将它们链接在一起。如果需要，您可以分多个步骤执行此操作：

```
g++ -Wall -c articles.cc
g++ -Wall -c testArticles.cc
g++ articles.o testArticles.o 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T00:57:03.710

您需要在命令行参数中包含所有源文件：

```
g++ -Wall testArticles.cc articles.cc 
```

或者，您可以创建一个 makefile 来定义源文件之间的依赖关系。对于 C++ 程序员来说，这是一个方便的工具，尤其是在 *nix 环境中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T00:57:13.307

您正在编译和链接`testArticles.cc`，但您没有编译`articles.cc`。这就是您收到链接器错误的原因；您实际上并没有在编译器可以看到的任何地方实现这些方法。

尝试使用

```
g++ -Wall articles.cc testArticles.cc 
```

# python - 如何让我的代码更有效率？

> ID：13982837
> 
> 赞同：3
> 
> 时间：2012-12-21T00:53:54.023
> 
> 标签：python

我有一个包含 tool_id、时间和消息的元组列表。我想从此列表中选择消息与某个字符串匹配的所有元素，以及时间在该工具的任何匹配消息的某个差异范围内的所有其他元素。

以下是我目前的做法：

```
# record time for each message matching the specified message for each tool 
messageTimes = {} 
for row in cdata:   # tool, time, message 
    if self.message in row[2]: 
        messageTimes[row[0], row[1]] = 1 

# now pull out each message that is within the time diff for each matched message 
# as well as the matched messages themselves 

def determine(tup): 
    if self.message in tup[2]: return True      # matched message 

    for (tool, date_time) in messageTimes: 
        if tool == tup[0]: 
            if abs(date_time-tup[1]) <= tdiff: 
               return True 

    return False 

cdata[:] = [tup for tup in cdata if determine(tup)] 
```

此代码有效，但运行时间太长 - 例如，当 cdata 有 600,000 个元素（这对于我的应用程序来说很典型）时，它需要 2 小时才能运行。

该数据来自数据库。最初我只是使用 SQL 获取我想要的数据，但这也花费了太长时间。我只选择了我想要的消息，然后为每个人做另一个查询以在每个人的时间差异内获取数据。这导致了数以万计的查询。所以我将其更改为一次提取所有潜在的匹配项，然后在 python 中处理它，认为这样会更快。也许我错了。

谁能给我一些加快速度的建议？

按照建议更新我的帖子以显示我在 SQL 中所做的事情。

我在 SQL 中所做的非常简单。第一个查询类似于：

```
SELECT tool, date_time, message 
FROM event_log
WHERE message LIKE '%foo%'
AND other selection criteria 
```

这已经足够快了，但它可能会返回 20 或 30,000 行。然后我遍历结果集，并为每一行运行一个这样的查询（其中 dt 和 t 是上面选择的一行中的 date_time 和工具）：

```
SELECT date_time, message
FROM event_log
WHERE tool = t 
AND ABS(TIMESTAMPDIFF(SECOND, date_time, dt)) <= timediff 
```

那花了大约一个小时。

我还尝试在一个嵌套查询中执行，其中内部查询从我的第一个查询中选择行，外部查询选择时间差异行。那花了更长的时间。

所以现在我选择没有消息 LIKE '%foo%' 子句，我正在取回 600,000 行并试图从 python 中提取我想要的行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T01:30:01.363

优化 SQL 的方法是在一个查询中完成所有操作，而不是遍历 20K 行并为每一行执行另一个查询。

通常这意味着您需要添加一个 JOIN，或者偶尔添加一个子查询。是的，只要您重命名一个或两个副本，您就可以将一个表加入到自身中。所以，像这样：

```
SELECT el2.date_time, el2.message 
FROM event_log as el1 JOIN event_log as el2
WHERE el1.message LIKE '%foo%'
AND other selection criteria
AND el2.tool = el1.tool
AND ABS(TIMESTAMPDIFF(SECOND, el2.datetime, el1.datetime)) <= el1.timediff 
```

现在，开箱即用可能不够快，因此有两个步骤可以改进它。

首先，查找任何明显需要索引的列。显然`tool`并且`datetime`需要简单的索引。`message`可能会受益于简单的索引，或者，如果您的数据库有更高级的东西，也许更高级的东西，但鉴于初始查询足够快，您可能不需要担心它。

偶尔，这就足够了。但通常，您无法正确猜测所有内容。并且可能还需要重新排列查询的顺序等。因此，您将需要`EXPLAIN`查询，并查看数据库引擎正在执行的步骤，并查看它在哪里进行缓慢的迭代查找可能正在执行快速索引查找，或者它在一个小集合之前迭代一个大集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T01:03:04.533

对于表格数据，您不能跳过 Python [pandas](http://pandas.pydata.org/)库，其中包含针对此类查询的高度优化代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:36:50.030

我通过如下更改代码来解决此问题：

-首先我将 messageTimes 设置为由该工具键入的列表的字典：

```
messageTimes = defaultdict(list)    # a dict with sorted lists

for row in cdata:   # tool, time, module, message
    if self.message in row[3]:
        messageTimes[row[0]].append(row[1]) 
```

- 然后在确定函数中我使用了二分法：

```
 def determine(tup):
    if self.message in tup[3]: return True      # matched message

    times = messageTimes[tup[0]]
    le = bisect.bisect_right(times, tup[1])
    ge = bisect.bisect_left(times, tup[1])
    return (le and tup[1]-times[le-1] <= tdiff) or (ge != len(times) and times[ge]-tup[1] <= tdiff) 
```

通过这些更改，花费超过 2 小时的代码花费了不到 20 分钟，甚至更好的是，花费 40 分钟的查询花费了 8 秒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T18:05:35.760

我又做了 2 处更改，现在 20 分钟的查询需要 3 分钟：

```
found = defaultdict(int)
def determine(tup):
    if self.message in tup[3]: return True      # matched message

    times = messageTimes[tup[0]]
    idx = found[tup[0]]
    le = bisect.bisect_right(times, tup[1], idx)
    idx = le
    return (le and tup[1]-times[le-1] <= tdiff) or (le != len(times) and times[le]-tup[1] <= tdiff) 
```

# c++ - 模板函数采用 std::vector 或 std::array

> ID：13982838
> 
> 赞同：12
> 
> 时间：2012-12-21T00:53:57.120
> 
> 标签：c++, arrays, templates, vector, c++11

我有一个函数，目前接受 2 个可以包含任何普通旧数据的向量......

```
template <class T>
void addData(const vector<T>& yData, vector<T> xData)
{ .. } 
```

问题：

*   考虑到这些容器采用不同数量的模板参数，是否可以将其修改为采用两个`std::array`或两个`std::vector`，甚至两者的组合？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T01:02:12.687

当然，这只是创建合适的类型特征的问题。该示例仅使用`f()`带有一个参数的函数，但扩展为采用任意数量的参数是微不足道的。

```
#include <array>
#include <vector>
#include <deque>
#include <utility>
#include <cstddef>

template <typename T>
struct is_array_or_vector {
    enum { value = false };
};

template <typename T, typename A>
struct is_array_or_vector<std::vector<T, A>> {
    enum { value = true };
};

template <typename T, std::size_t N>
struct is_array_or_vector<std::array<T, N>> {
    enum { value = true };
};

template <typename T>
typename std::enable_if<is_array_or_vector<T>::value>::type
f(T const&)
{
}

int main()
{
    f(std::vector<int>());    // OK
    f(std::array<int, 17>()); // OK
    f(std::deque<int>());     // ERROR
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T01:06:52.730

为什么不直接使用它，它适用于任何使用随机访问迭代器的容器，包括普通的旧数组。如果您可以使用迭代而不是索引，那么您也可以取消随机访问要求。

```
template <typename Cnt1, typename Cnt2>
void addData(const Cnt1& yData, Cnt2 xData) // is pass-by-value intended?
{
    using std::begin;
    using std::end;
    typedef decltype(*begin(yData)) T;
    const auto sizeY = end(yData) - begin(yData);
    const auto sizeX = end(xData) - begin(xData);
    // ...
} 
```

C++03 版本（不支持普通旧数组）：

```
template <typename Cnt1, typename Cnt2>
void addData(const Cnt1& yData, Cnt2 xData) // is pass-by-value intended?
{
    typedef Cnt1::value_type T;
    const size_t sizeY = yData.end() - yData.begin();
    const size_t sizeX = xData.end() - xData.begin();
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:05:41.733

另一种解决方案：

```
#include <iostream>
#include <vector>
#include <array>

using std::vector;
using std::array;

template <typename Container>
struct container_helper; // undefined

template <typename T>
struct container_helper<vector<T>>
{    
    explicit container_helper(vector<T>& data)
    : _data(data)
    {}

    T* get_data()
    { return &_data[0]; }

    size_t get_size()
    { return _data.size(); }

private:
    vector<T>& _data;
};

template <typename T, size_t N>
struct container_helper<array<T,N>>
{
    explicit container_helper(array<T,N>& data)
    : _data(data)
    {}

    T* get_data()
    { return &_data[0]; }

    size_t get_size()
    { return N; }

private:
    array<T,N>& _data;
};

template <typename Container1, typename Container2>
void add_data(Container1& c1, Container2& c2)
{
    container_helper<Container1> c1_helper(c1);
    container_helper<Container2> c2_helper(c2);

    /* do whatever you want with the containers */
    std::cout << "c1 size " << c1_helper.get_size() << std::endl;
    std::cout << "c2 size " << c2_helper.get_size() << std::endl;
}

int main()
{
    vector<int > v_ints(3);
    array<int, 2> a_ints;

    add_data(v_ints, a_ints);
} 
```

# ios - 添加未在 Xcode 的编辑器菜单中列出的约束

> ID：13982844
> 
> 赞同：22
> 
> 时间：2012-12-21T00:54:50.683
> 
> 标签：ios, xcode, nslayoutconstraint

我正在尝试向我的 NIB 添加布局约束，并且我正在按照苹果在此处提供的说明进行操作：

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/030-Edit_User_Interfaces/edit_user_interface.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/030-Edit_User_Interfaces/edit_user_interface.html)

它是关于添加约束的：

> 添加约束 选择要为其添加约束的一个或多个对象。
> 
> 从 Editor > Add Constraint 菜单中选择一个约束，或者从 Editor > Alignment 菜单中选择一个对齐类型。

找不到那个添加约束菜单。是什么赋予了？如何添加约束？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-21T02:54:40.500

该文档不正确。

约束是通过 Xcode 4.6 中 Interface Builder 工作区右下角的按钮添加的：

![Xcode 4.6 按钮](../Images/37ab9e5e9db38908e6822d72b248da1a.png)

左侧的按钮用于基于对齐的约束，中间的按钮（“工字梁”）用于固定间距/高度。

在 Xcode 5.0 中，这些按钮看起来有些不同，但功能非常相似：

![Xcode 5 按钮](../Images/d440989680edf0e7e7b385da260af891.png)

# debugging - valgrind 是否可以防止我要调试的段错误发生？

> ID：13982847
> 
> 赞同：6
> 
> 时间：2012-12-21T00:55:14.960
> 
> 标签：debugging, segmentation-fault, heap-corruption

我想确定是什么导致了段错误，我正在尝试使用 valgrind 来执行此操作。

[https://gist.github.com/4349869](https://gist.github.com/4349869)是一个要点，当我在没有 valgrind 的情况下运行某些东西时会出现段错误，但是当我使用 valgrind 时不会出现段错误。（我已经重复了几次，结果相同）

这是否意味着该错误是我使用 valgrind 时不会发生的 heisenbug，因此 valgrind 在这里没有任何用处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T14:31:34.757

> 这是否意味着该错误是我使用 valgrind 时不会发生的 heisenbug，因此 valgrind 在这里没有任何用处？

不，您仍然应该使用 Valgrind 并修复所有报告的错误。您描述的行为相当普遍，它记录在[Valgrind FAQ](http://valgrind.org/docs/manual/faq.html#faq.crashes)中：

> 当一个程序在 Valgrind 下运行时，它的环境与它在本地运行时略有不同。比如内存布局不同，线程调度方式不同。
> 
> 大多数时候这并没有什么区别，但它可以，特别是如果你的程序有问题。例如，如果您的程序因为错误地访问不可寻址的内存而崩溃，那么在 Valgrind 下运行时，该内存可能不会不可寻址。或者，如果你的程序有数据竞争，这些可能不会在 Valgrind 下表现出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T01:03:24.247

当使用调试信息编译或在 valgrind 下运行时更改内存位置时，可能会隐藏分段错误。当然这并不意味着你不能使用 valgrind 来调试你的应用程序。您应该修复 valgrind 报告的所有错误，例如无效的读/写错误。修复这些错误应该可以解决您的分段错误问题。

# html - 背景封面

> ID：13982850
> 
> 赞同：0
> 
> 时间：2012-12-21T00:55:41.840
> 
> 标签：html, css

我正在为我的网站使用类似背景的图像

我把它用图像覆盖了所有页面

```
body.questionary{
    background: url("../img/ques.jpg") no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

我的图像是 jpg 尺寸为 703x883，大小为 258KB

问题是当我看到这个图像非常大的页面时，就像一个缩放，我没有看到完整的图像，我只看到它的顶部。

任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:00:35.413

如果您的页面非常高，`background-size:cover`则会使背景图像按比例缩放以填充整个`body`.

* * *

如果您希望它仅填充视口，那么您将需要在另一个元素（*而不是 body*）中添加并设置它的样式

```
<body>
   <div id="background"></div>
...
</body> 
```

和

```
#background{
   position:fixed;
   z-index:0;
   top:0;
   right:0;
   bottom:0;
   left:0;
   background: url("../img/ques.jpg") no-repeat center center fixed;
   -webkit-background-size: cover;
   -moz-background-size: cover;
   -o-background-size: cover;
   background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:40:54.763

利用`background-size:100% 100%;`

[示例 jsfiddle](http://jsfiddle.net/WmwPc/2/)

值`contain`并保持[规范](http://dev.w3.org/csswg/css3-background/#the-background-size)`cover`定义的纵横比

> 'contain' 缩放图像，同时保留其固有纵横比（如果有），使其宽度和高度都可以放在背景定位区域内。
> 
> 'cover' 缩放图像，同时保留其固有纵横比（如果有），使其宽度和高度都可以完全覆盖背景定位区域。

# ios - 从动态创建的 UIbar 按钮启动 Utableview 控制器

> ID：13982852
> 
> 赞同：0
> 
> 时间：2012-12-21T00:55:46.817
> 
> 标签：ios, dynamic, uitableview, uibarbuttonitem, launch

```
- (void)createBarButtons
{
    UIBarButtonItem *myCheckButton = [[UIBarButtonItem alloc] initWithTitle:@"Check Records" style:UIBarButtonItemStylePlain target:self action:@selector(checkRecordsAction)];
    UIBarButtonItem *mySaveButton = [[UIBarButtonItem alloc] initWithTitle:@"Save" style:UIBarButtonItemStylePlain target:self action:@selector(saveAction)];
    [mySaveButton setTintColor:[UIColor colorWithRed:34.0/255.0 green:97.0/255.0 blue:221.0/255.0 alpha:1]];
    NSArray *myButtonArray = [[NSArray alloc]initWithObjects:mySaveButton, myCheckButton,nil];
    self.navigationItem.rightBarButtonItems = myButtonArray;
} 
```

我不知道这个问题是否属于过于本地化的类别。但是请帮帮我。所以就像你看到的那样，我创建了两个条形按钮项。保存只是将数据保存到 CoreData，工作得很好。但是检查记录应该启动一个新的 UITableviewcontroller。

```
- (void)checkRecordsAction
{
NSLog(@"the new stack action");
ITMSyncRecordsTVC *syncRecords  = [[ITMSyncRecordsTVC alloc]init];
//  [self presentViewController:syncRecords animated:YES completion:^{
//  self.navigationController.view.superview.bounds = CGRectMake(0, 0, 250, 250);}];
[self.navigationController pushViewController:syncRecords animated:YES];
} 
```

`ITMSyncRecordsTVC`是一个`TableViewController`带有“后退”按钮的按钮。因此，当我单击检查记录时，它会启动一个`tableview`控制器，但其中没有值，并且它没有显示我放在上面的“后退”栏按钮。到目前为止，我一直在使用 segues 和 storyboards 就好了。但是我不知道如何在没有它们的情况下启动新的视图控制器。我第一次进入 ios 是 ios6。我错过了一些我不知道的东西。所以让我知道如何调用/启动一个新的 TableViewController。在 android 中，我们有可以解决问题的意图。如果您需要更多信息，请告诉我。谢谢... 编辑：所以我编辑了我的`checkRecordsAction`代码。

编辑 ：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
ITMOrdersVC *ordersVC = [[ITMOrdersVC alloc]init];
NSLog(@"at line 188 %d",indexPath.row);
if(indexPath.row < self.salesOrdersArray.count)
{
    ordersVC.salesOrder = [self.salesOrdersArray objectAtIndex:indexPath.row];
    NSLog(@"the sales purchase order number is %@",ordersVC.salesOrder.purchaseOrderNumber);

    NSLog(@"done - 140");
    [self.navigationController pushViewController:ordersVC animated:YES];
}
} 
```

因此，在 ITMSyncRecordsTVC 表视图控制器上选择一行时，它会执行上述操作。我得到一个新的 ITMOrdersVC 屏幕，左侧有“后退”栏按钮和 2 个动态生成的栏按钮。我得到了 2 个动态生成的栏按钮，但没有后面。我想一旦我单击该行，它将“返回”到我将 salesOrder 对象传递到的上一个屏幕。我的下一步是检查我是否从 TVC 获取 salesorder 对象，然后加载它。所以基本上只有2个屏幕。第一个屏幕（保存，检查同步记录）。第二个屏幕单击 a.) 返回（转到第一个屏幕..什么都不做）或 b.) 单击第二个屏幕中的一行并填充第一个屏幕而不使用条形按钮。如果不清楚请问我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:05:52.373

要使用故事板启动新的表视图控制器，您需要：

1.  将您的主要场景嵌入导航控制器中。

    ![在导航控制器中嵌入主场景](../Images/7ee18414a67c933895ded9ddf4ef5d6a.png)

2.  您希望从主控制器到第二个控制器进行推送。所以从视图控制器图标（在主场景下方的栏中）控制拖动到下一个场景：

    ![添加推送转场](../Images/85f361d5020f3aea6795ad3c80782f27.png)

3.  然后它应该看起来像（注意目标表视图中导航栏的外观）：

    ![目的地有导航栏](../Images/79e61bcd8e2183258cd03c25f96dbe23.png)

4.  然后选择 segue 并给它一个“故事板标识符”：

    ![给 segue 故事板 id](../Images/d7124412f2885c5f3e5e23d67496d765.png)

5.  现在，您转换到该场景的代码如下所示：

`checkRecordsAction`: _

```
- (void)checkRecordsAction
{
    NSLog(@"the new stack action");

    [self performSegueWithIdentifier:@"PushSegue" sender:self];
} 
```

* * *

**更新：**

顺便说一句，为了充分披露，还有一个替代推送 segue 的方法。如果你给下一个场景本身，一个“故事板ID”，你可以使用下面的代码（显然用`"insertNextScenesStoryboardIdHere"`你给下一个场景的标识符替换：

```
- (void)checkRecordsAction
{
    NSLog(@"the new stack action");

    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"insertNextScenesStoryboardIdHere"];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

我个人不太喜欢这样，因为您的故事板现在有一个场景漂浮在那里而没有任何转场，您的代码现在已经决定了视图控制器之间的过渡性质与故事板中的所有内容等，但它是另一种方法。

# scala - SBT 交叉构建 - 为不同的 scala 版本选择不同的库版本

> ID：13982853
> 
> 赞同：5
> 
> 时间：2012-12-21T00:55:47.330
> 
> 标签：scala, sbt

是否可以将 SBT 配置为在交叉构建时使用完全不同的库版本，具体取决于构建项目的 scala 版本？

例如：

*   使用 Scala 构建时，`2.9.2`我想使用`"org.scalatest" % "scalatest_2.9.2" % "2.0.M5" % "test"`
*   使用 scala 构建时，`2.10.0`我想使用`"org.scalatest" % "scalatest_2.10.0-RC5" % "2.0.M5-B1" % "test"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T01:38:28.967

像这样的东西应该工作：

```
libraryDependencies <+= scalaVersion(scalatestDependency(_))

def scalatestDependency(scalaVersion: String) = scalaVersion match {
  case "2.9.2" => "org.scalatest" % "scalatest_2.9.2" % "2.0.M5" % "test"
  case "2.10.0" => "org.scalatest" % "scalatest_2.10.0-RC5" % "2.0.M5-B1" % "test"
} 
```

我假设您实际上的意思是库版本应该是相反的？:-)

[你可以在ScalaMock 2 build](https://github.com/paulbutcher/ScalaMock/blob/ScalaMock2/project/Build.scala)中看到这个主题的变化。

# java - 用于 Java 7 文件 I/O 的多态 I/O 实用程序函数

> ID：13982854
> 
> 赞同：0
> 
> 时间：2012-12-21T00:55:54.193
> 
> 标签：java, clojure, io, java-7, clojure-contrib

是否有用于 Java 7 文件 I/O 的 I/O 实用程序函数库，类似于 Clojure Contrib 或其他地方的 clojure.java.io？

具体来说，我对可以提供 Clojure 友好、强制 API 的实用程序感兴趣，这些`java.nio.file.Paths`API可以使用. 事实上，我认为这样的库会利用这些功能，但更容易获得包提供的附加路径操作功能，例如,等....`java.nio.file.Path``java.io.File``clojure.java.io.file``clojure.java.io.as-file``java.io.File``java.nio.file``relativize``subpath`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T09:00:50.640

你可以参考我遇到的这个[https://github.com/ToBeReplaced/nio.file](https://github.com/ToBeReplaced/nio.file)

# r - plot() 和 do.call()：如果使用“...”，如何将表达式传递给绘图标题？

> ID：13982856
> 
> 赞同：2
> 
> 时间：2012-12-21T00:56:16.787
> 
> 标签：r, plot, do.call, plotmath

运行以下代码时，我获得`Error in as.graphicsAnnot(text) : could not find function "bold"`. 我怎样才能解决这个问题？

```
my.qq <- function(x, main=expression(bold(italic(F)~~"Q-Q plot")),
                  margs=list(side=3, cex=par("cex.main"), font=par("font.main"),
                  adj=par("adj"), xpd=NA), ...)
{
    plot(qnorm(ppoints(n <- length(x))), sort(x), ...)
    do.call(mtext, c(list(main), margs))
}
x <- rnorm(100)
my.qq(x)
my.qq(x, main=substitute(bold(italic(F)[N(mu.,s2.)]~~"Q-Q plot"), list(mu.=0, s2.=1))) # fails 
```

我的目标是使用列表`margs`将其他参数传递给`mtext()`. 这通常是用 完成的`...`，但这些参数已经传递给`plot()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:06:59.627

`substitute`在这种情况下，返回一个语言对象，而不是一个表达式。该表达式`expression`在中使用松散`R`，但在这里似乎`mtext`需要一个类对象`expression`。

您可以通过包装来确保这`substitute(...)`一点`as.expression()`

```
my.qq(x, main=as.expression(substitute(bold(italic(F)[N(mu.,s2.)]~~"Q-Q plot"), list(mu.=0, s2.=1)))) 
```

或者更简单地通过传递一个表达式来替换（在正常调用中需要`mtext`）

```
my.qq(x, main=substitute(expression(bold(italic(F)[N(mu.,s2.)]~~"Q-Q plot")), list(mu.=0, s2.=1))) 
```

上面的两个例子都会产生 ![在此处输入图像描述](../Images/a98d94f327683c4eaf17df8d3da39e3a.png)

帮助中有一个注释`substitute`

> 当参数是表达式（...）时，替换和引用通常会引起混淆。结果是对表达式构造函数的调用，需要用 eval 求值以给出实际的表达式对象。

但是在这种情况下`eval`不需要

# c# - 无法连接到 net.tcp：连接尝试持续了一段时间

> ID：13982857
> 
> 赞同：12
> 
> 时间：2012-12-21T00:56:19.797
> 
> 标签：c#, wcf

在远程构建机器上，运行单元测试时出现以下错误。

**测试方法 MyNameSpace1.MyNameSpace2.Service.Test.MyPath.XYZServiceTest.FindRecord 抛出异常：System.ServiceModel.EndpointNotFoundException：无法连接到 net.tcp://localhost/MyABCServices/XYZService.svc。连接尝试持续了 00:00:02.0086605 的时间跨度。TCP错误代码10061：无法建立连接，因为目标机器主动拒绝它127.0.0.1:808。---> System.Net.Sockets.SocketException: No connection could be made because the target machine主动拒绝它 127.0.0.1:808**

我对这台构建机器的访问非常有限。我无法访问构建机器上的 iis 或我在本地开发机器上所做的服务。单元测试在我的本地开发机器上工作，但它们在构建机器上遇到上述错误。

我能做些什么来调试这个错误？我已经阅读过检查防火墙等内容。但我不知道该怎么做？我无法检查此服务的 Windows 服务是否已在构建机器上启动并运行。我试图登录到构建机器或将我的 IIS 连接到这台远程机器，但我不能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T01:35:55.037

对我来说最常见的问题是 Windows Service Net.Tcp Listener Adapter 没有在主机上运行。

还要检查您的 IIS Web 应用程序以确保启用的协议包括 net.tcp。例如我的有“http,net.tcp”，在我的绑定中我有“http *::94:,net.tcp:194:* ”

我不知道有什么好的方法可以远程检查 IIS 是否配置正确或 Windows 服务是否正在运行。您没有可以为您查看这些值的服务器管理员吗？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-23T04:27:21.210

[![启动 Net.Tcp 侦听器适配器服务已解决此问题。](../Images/6d00d7274f07703afb5ec38b5d9dd860.png)](https://i.stack.imgur.com/gp2Mj.png)

启动 Net.Tcp 侦听器适配器服务已解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T01:25:02.880

错误中是否`127.0.0.1:808`报告了实际的 IP:Port？如果是这样，那么您需要修复 IP（`127.0.0.1`与 同义[`localhost`](http://en.wikipedia.org/wiki/Localhost)，因此这将是您的本地计算机）。

否则，这看起来像是防火墙问题。

防火墙有两种常见的来源：

*   路由器
*   操作系统

路由器防火墙通常位于将内部网络连接到 Internet 的路由器上。在这些情况下，您（或有权访问的人）将需要登录路由器并将端口转发到机器的 IP。仅当尝试通信的两台计算机不在同一个内部网络上时才需要这样做。
例如，如果您的计算机通过 Internet 连接到服务器，则需要设置端口转发。如果两台计算机在同一个办公室的同一网络上，则不需要端口转发（这种情况在大公司中很常见，但有 IT 或网络人员来处理端口问题）。

假设您的服务器运行的是 Windows，您将需要具有 Admin(?) 访问权限的人登录并打开端口或允许您的服务接受传入请求。由于您表示您无权访问服务器，因此我建议让负责服务器的人员验证配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T01:41:34.720

当我读到它时，“单元测试”显然期望在某个 localhost 地址有一个 WCF net.tcp 端点。所以，为了让它工作，你可以

*   在构建服务器上添加所需的服务，它可能是共享服务器，或由另一个团队拥有，或其他一些我不知道的问题，或者
*   更改单元测试，使其不期望真正的实时 WCF 服务，而是模拟或伪造的服务。

我（显然）推荐第二种选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T20:47:05.843

感谢@sandeep 和@Erik 为我指明了正确的方向。我的是Windows 10系统。我没有 .NetTcpListender 适配器。我有 Net.tcp 端口共享服务，它被禁用了。我启用了它并启动了服务，它运行良好。现在我在同一个端口托管两个端点，如下所示

```
<services>
      <service behaviorConfiguration="mybehaviorConfiguration" name="FirstClass">
        <endpoint address="" binding="netTcpBinding" contract="IFirstClass"
           bindingConfiguration="netTcpBindingConfiguration" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:5000/MyService/FirstClass" />
          </baseAddresses>
        </host>
      </service>

      <service behaviorConfiguration="mybehaviorConfiguration" name="SecondClass">
        <endpoint address="" binding="netTcpBinding" contract="ISecondClass"
           bindingConfiguration="netTcpBindingConfiguration" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:5000/MyService/SecondClass" />
          </baseAddresses>
        </host>
      </service>
</services> 
```

[![在此处输入图像描述](../Images/dce9cf088c5b9a933fa79c10a290fadf.png)](https://i.stack.imgur.com/kiKKS.png)

# backbone.js - 骨干关系未设置父模型或反向关系_id

> ID：13982859
> 
> 赞同：3
> 
> 时间：2012-12-21T00:56:46.803
> 
> 标签：backbone.js, backbone-relational

在这个应用程序中，事件是发生的事情，而感觉是描述您对它的感受的嵌套对象。这是我的事件模型：

```
window.Incident = Backbone.RelationalModel.extend({

urlRoot: "/incidents",

idAttribute: "_id",

relations:[{
    type: Backbone.HasMany,
    key: 'feelings',
    relatedModel: 'Feeling',
    reverseRelation: {
        key: 'incident',
        includeInJSON: '_id'
    }
},
{
    type: Backbone.HasMany,
    key: 'thoughts',
    relatedModel: 'window.Thought',
    reverseRelation: {
        key: 'incident',
        includeInJSON: '_id'
    }
}],
 // rest of model...
}); 
```

这是感觉模型：

```
window.Feeling = Backbone.RelationalModel.extend({
  urlRoot: '/incidents',
  idAttribute: '_id'
}); 
```

至此，我可以CRUD事件了，也有感觉了。但是，感情并没有被分配相反的关系。在感觉上，属性“事件”被赋予值“空”。在我的 MongoDB 集合中，我得到了这两个不相关的对象：

```
{ "description" : "I feel sad", "_id" : ObjectId("50d3b1462ff17f07cf000002") }
{ "name" : "asdf", "intensityBefore" : "asdf", "intensityAfter" : "asdf", "incident" : null, "_id" : ObjectId("50d3b14e2ff17f07cf000003") } 
```

我在[https://github.com/mhurwi/cbt-app/tree/relational](https://github.com/mhurwi/cbt-app/tree/relational)有完整的项目。

请注意，此应用程序是由 Christophe Coenraets 的入门应用程序构建的： [https ://github.com/ccoenraets/nodecellar](https://github.com/ccoenraets/nodecellar)

现在已经有很多小时了，我不明白为什么这种关系不是由骨干关系设定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T15:38:04.030

您可能需要在 Feelings 模型上声明 BackboneRelational.HasOne，如下所示：

```
window.Feeling = Backbone.RelationalModel.extend({
    urlRoot: '/incidents',
    idAttribute: '_id',
    relations:[{
        type: Backbone.HasOne,
        key: 'incident',
        relatedModel: 'Incident'
    }]
}); 
```

# c# - 如何获取与 IWpfTextView 关联的 EnvDTE.Document？

> ID：13982861
> 
> 赞同：3
> 
> 时间：2012-12-21T00:57:01.043
> 
> 标签：c#, .net, visual-studio, envdte

我有一个`IWpfTextViewConnectionListener`基础扩展。我需要访问与我获得的`EnvDTE.Document`相关联的权限`IWpfTextView`。我试过 storage `_DTE.ActiveDocument`，但这仅适用于以前未打开的文件（如果文件已打开，则为`null`）。

如何获取正在显示的文本视图的文档对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:35:57.577

从一个`IWpfTextView.TextBuffer`，你可以得到`ITextBuffer`。从中，您可以使用`ITextDocumentFactoryService.TryGetTextDocument()`来获取匹配项`ITextDocument`（如果存在）。然后，`ITextDocument.FilePath`为您提供文件的路径。

然后，您可以枚举`DTE2.Documents`集合以找到具有相同路径的打开文档。

更多信息：http `ITextDocumentFactoryService`: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.itextdocumentfactoryservice.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.itextdocumentfactoryservice.aspx)

# haskell - thunk 使用多少内存？

> ID：13982863
> 
> 赞同：32
> 
> 时间：2012-12-21T00:57:05.347
> 
> 标签：haskell, lazy-evaluation, thunk

假设我有大量（数百万/十亿+）这些简单的`Foo`数据结构：

```
data Foo = Foo
    { a :: {-# UNPACK #-}!Int
    , b :: Int
    } 
```

有这么多这些浮动，有必要考虑它们消耗了多少内存。

在 64 位机器上，每个`Int`都是 8 个字节，所以`a`只需要 8 个字节（因为它是严格且未打包的）。`b`但是会占用多少内存呢？我想这会根据 thunk 是否被评估而改变，对吧？

我想在一般情况下这是不可能的，因为`b`可能取决于任何数量的内存位置，这些位置只保留在内存中，以防`b`需要评估。但是如果`b`只依赖于（一些非常昂贵的操作）`a`呢？那么，是否有一种确定的方法来判断将使用多少内存？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-21T09:58:13.577

除了 user239558 的回答之外，为了回应您的评论，我想指出一些工具，这些工具允许您检查您的值的堆表示，自己找到此类问题的答案并查看优化的效果和不同的编译方式。

## [ghc-数据大小](http://hackage.haskell.org/package/ghc-datasize)

告诉你闭包的大小。在这里，您可以看到（在 64 位机器上）在评估形式和垃圾收集之后，`Foo 1 2`它本身需要 24 个字节，包括依赖项，总共需要 40 个字节：

```
Prelude GHC.DataSize 测试> 让 x = Foo 1 2
Prelude GHC.DataSize 测试> x
富 {a = 1, b = 2}
Prelude GHC.DataSize 测试> System.Mem.performGC
Prelude GHC.DataSize 测试>closureSize x
24
Prelude GHC.DataSize 测试> recursiveSize x
40

```

要重现这一点，您需要使用 以编译形式加载数据定义`-O`，否则`{-# UNPACK #-}`编译指示无效。

现在让我们创建一个 thunk 并看到大小显着增加：

```
Prelude GHC.DataSize Test> 让 thunk = 2 + 3::Int
Prelude GHC.DataSize Test> let x = Foo 1 thunk
Prelude GHC.DataSize Test> x `seq` return ()
Prelude GHC.DataSize 测试> System.Mem.performGC
Prelude GHC.DataSize 测试>closureSize x
24
Prelude GHC.DataSize 测试> recursiveSize x
400

```

现在这是相当过分的。原因是这个计算包括对静态闭包、`Num`类型类字典等的引用，并且通常 GHCi 字节码非常未优化。所以让我们把它放在一个适当的 Haskell 程序中。跑步

```
main = do
    l <- getArgs
    let n = length l
    n `seq` return ()
    let thunk = trace "I am evaluated" $ n + n
    let x = Foo 1 thunk
    a x `seq` return ()
    performGC
    s1 <- closureSize x
    s2 <- closureSize thunk
    r <- recursiveSize x
    print (s1, s2, r) 
```

给`(24, 24, 48)`，所以现在这个`Foo`值是由`Foo`它自己和一个 thunk 组成的。为什么只有 thunk，不应该还有`n`添加另外 16 个字节的引用？为了回答这个问题，我们需要一个更好的工具：

## [ghc-堆视图](http://hackage.haskell.org/package/ghc-heap-view)

这个库（我的）可以调查堆并准确地告诉你你的数据是如何在那里表示的。所以将这一行添加到上面的文件中：

```
buildHeapTree 1000 (asBox x) >>= putStrLn 。ppHeapTree

```

我们得到（当我们向程序传递五个参数时）结果`Foo (_thunk 5) 1`。请注意，参数的顺序是在堆上交换的，因为指针总是在数据之前。plain`5`表示 thunk 的闭包存储了未装箱的参数。

作为最后一个练习，我们通过使 thunk 变得惰性来验证这一点`n`：现在

```
main = do
    l <- getArgs
    let n = length l
    n `seq` return ()
    let thunk = trace "I am evaluated" $ n
    let x = Foo 1 thunk
    a x `seq` return ()
    performGC
    s1 <- closureSize x
    s2 <- closureSize thunk
    s3 <- closureSize n
    r <- recursiveSize x
    buildHeapTree 1000 (asBox x) >>= putStrLn . ppHeapTree
    print (s1, s2, s3, r) 
```

给出一个`Foo (_thunk (I# 4)) 1`带有单独闭包的堆表示`n`（如`I#`构造函数的存在所示）并显示值及其总和的预期大小，`(24,24,16,64)`.

哦，如果这仍然太高，[getClosureRaw](http://hackage.haskell.org/packages/archive/ghc-heap-view/0.4.1.0/doc/html/GHC-HeapView.html#v:getClosureRaw)会为您提供原始字节。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-21T04:38:49.940

如果`b`被评估，它将是一个指向`Int`对象的指针。指针为 8 字节，`Int`对象由 8 字节的标头和 8 字节的标头组成`Int#`。

所以在这种情况下，内存使用是`Foo`对象（8 header, 8 `Int`, 8 pointer）+ boxed `Int`（8 header, 8 `Int#`）。

当`b`未计算时，8 字节指针 in`Foo`将指向一个[Thunk 对象](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/HeapObjects#Thunks)。[Thunk 对象](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/HeapObjects#Thunks)表示未计算的表达式。与`Int`对象一样，该对象有一个 8 字节的标头，但该对象的其余部分由未计算表达式中的自由变量组成。

所以首先，这个 thunk 对象中的自由变量的数量取决于创建 Foo 对象的表达式。创建 Foo 的不同方式将创建可能不同大小的 thunk 对象。

其次，[自由变量](http://en.wikisource.org/wiki/Page%3aScheme_-_An_interpreter_for_extended_lambda_calculus.djvu/22)是从表达式外部获取的未计算表达式中提到的所有变量，称为[闭包环境](http://en.wikipedia.org/wiki/Closure_%28computer_science%29#Lexical_environment)。它们是表达式的参数，需要存储在某个地方，因此它们存储在 thunk 对象中。

因此，您可以查看调用 Foo 构造函数的实际位置，并查看第二个参数中的自由变量的数量，以估计 thunk 的大小。

Thunk 对象实际上与大多数其他编程语言中的闭包相同，但有一个重要区别。当它被评估时，它可以被一个指向被评估对象的重定向指针覆盖。因此，它是一个自动记忆其结果的闭包。

此重定向指针将指向`Int`对象（16 个字节）。然而，现在“死”的 thunk 将在下一次垃圾收集时被消除。当 GC 复制 Foo 时，它将使 Foo 的 b 直接指向 Int 对象，从而使 thunk 未引用，因此是垃圾。

# sql - 相同的列比较如何导致它们之间的差异？

> ID：13982865
> 
> 赞同：1
> 
> 时间：2012-12-21T00:57:14.103
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

这个说法

```
SELECT * FROM TempTable t1 
```

给我这个输出：

```
id  idIndice    valor
----------------------------
13  11          11111111
13  12          11111
14  11          11111111
14  12          11111
16  12          11111 
```

现在稍作改动：

```
SELECT * FROM TempTable t1
WHERE (select count(*) from TempTable t2 where t1.id = t2.id AND t1.valor != t2.valor) = 1 
```

我明白了

```
id  idIndice    valor
----------------------------
13  11          11111111
13  12          11111
14  11          11111111
14  12          11111 
```

t1 和 t2 是相同的引用`tempTable`，我可以理解`t1.id = t2.id`，但是：

```
t1.valor != t2.valor 
```

对我来说太多了。为什么与 t1 和 t2 相同的列是相同表的引用可以不同？

以及为什么最后这个“= 1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:01:02.837

第二个查询本质上是“*选择具有相同 ID 和不同 valor 的行数为 1 的*任何行”，即“*选择任何具有重复 id 的行*”

这就是为什么`id=13`选择两行的原因，因为它们彼此重复，也是`id=14`选择两行的原因。

请注意，如果存在具有相同 ID 的三行，则不会选择它们，因为它们的重复 id 的数量不会是 1，而是 2。

# c++ - 在 C++ 中使用 C 头文件中的外部变量

> ID：13982868
> 
> 赞同：1
> 
> 时间：2012-12-21T00:58:06.567
> 
> 标签：c++, c, extern

我有一个用 C 为我编写的库。在库中有一个我需要在 foo.h 中使用的变量（在 C 中）

```
extern mystruct foobar; 
```

在 bar.h（在 C++ 中）中，我有以下课程。

```
#include foo.h

class myfoo { 

private:
   mystruct foobar;
} 
```

我想知道的是，如果我创建一个 myfoo 数组，每个 foobar 实例会引用同一个变量，还是每个实例都是独立于其他 myfoo foobar 的 myfoo 的唯一实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:01:13.763

这是交易：您**没有**使用`foo.h`'`foobar`变量`bar.h`（尤其如此，因为`foo.h`只有*声明* `foobar`，定义必须在实现文件中）。相反，您是在类的范围内重新声明一个具有相同名称和类型的变量。

这样，实例成员变量的所有常规规则都适用。特别是，每个实例`myfoo`都会有自己的实例`foobar`。

如果您从没有任何内容中删除了声明，则该声明将与您的文件`foo.h`完全无关。`bar.h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T01:01:36.060

`foobar`类定义中的成员定义在与at 全局范围`myfoo`不同的范围内。`foobar`它们是不同的变量，彼此无关，只是它们属于同一类型，并且恰好具有相同的名称（尽管在不同的范围内）。

如果你创建一个对象数组`myfoo`，每个对象都会有一个`mystruct`. 所有这些实例都将与在全局范围内声明的实例分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:49:25.687

> 我想知道的是，如果我创建一个 myfoo 数组，每个 foobar 实例会引用同一个变量，还是每个实例都是独立于其他 myfoo foobar 的 myfoo 的唯一实例？

如果你这样做：

```
#include foo.h

class myfoo 
{ 
private:
    mystruct foobar;
};

void func()
{
    myfoo f[3];
    // ...
} 
```

您创建了 3 个不同的*myfoo*对象，每个对象都有自己的*foobar*实例。

如果你改变 myfoo 声明如下：

```
#include foo.h

class myfoo 
{
private:
   static mystruct foobar;
};

// this extra declaration is required for 
// static member variables
mystruct myfoo::foobar;

void func()
{
    myfoo f[3];
    // ...
} 
```

*那么*myfoo 的三个实例将共享它们的单个 foobar 实例。

**注意**：

`class myfoo`声明可以在“.h”或“.cpp”文件中。

声明可能只出现`mystruct myfoo::foobar;`一次，因此它通常必须在“.cpp”文件（或“.cc”或您使用的任何文件）中。

# java - 字符串 -> java.util.Date -> java.sql.Date（带时间戳）

> ID：13982870
> 
> 赞同：9
> 
> 时间：2012-12-21T00:58:27.393
> 
> 标签：java, sql, postgresql, date, java.util.date

这是我的问题：我有一个用户输入的日期如下：2012-12-24（字符串）我将时间连接到该字符串，然后转换为 java.util.Date 我的代码如下所示：

```
String tempstartdate = startdte;  //startdte is the string value from a txtfield
       tempstartdate += " 00:01:00";
       String tempenddate = startdte;
       tempenddate += " 23:59:59";

SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");               
       java.util.Date validstartdte = null;
        java.util.Date validenddte = null;

validstartdte = df.parse(tempstartdate);  //validstartdte is a util.Date (and works)
validenddte = df.parse(tempenddate); 
```

我的问题是，当我使用该 util.Date 并希望将其设为 sql.Date 时：

```
java.sql.Date sqlstartDate = new java.sql.Date(validstartdte.getTime());
java.sql.Date sqlendDate = new java.sql.Date(validenddte.getTime()); 
```

它不会给我我分配的时间戳，它只会以 yyyy-MM-dd 的形式返回日期（例如 2012-12-23）。

为什么！？我很沮丧。
注意：我注意到当我使用断点时，我能够展开 sqlendDate 并看到其中有一个名为 cdate 的值返回：2012-12-12T23:59:59.000-0500 我正在使用的数据库是 PostgreSQL。

请帮忙！非常感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-21T01:06:29.247

`java.sql.Date`没有时间。

改为使用`java.sql.Timestamp`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-11T19:09:27.213

我可能很晚才能回答这个问题，但我认为这可能会有所帮助。

正如“Felipe Fonseca”所述，我将 util 日期转换为 sql 日期，如下所示：

```
public static java.sql.Timestamp convertToSqlDateTime(Date utilDate){
    return new java.sql.Timestamp(utilDate.getTime());
} 
```

通常，`java.sql.Date`只返回 Date 值和 time 将被丢弃。所以，为了得到时间也，`java.sql.TimeStamp`必须使用。

**TimeStamp**使用毫秒时间值构造 Timestamp 对象。整数秒存储在基础日期值中；小数秒存储在 Timestamp 对象的 nanos 字段中。

为此目的，`utilDate.getTime()`用于返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此日期对象表示**的毫秒数。**

如果我们只想要`java.sql.Date`，我们可以这样做：

```
public static java.sql.Date convertToSqlDate(Date utilDate){
    return new java.sql.Date(utilDate.getTime());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:05:16.130

由于您列出的原因，我完全放弃了使用 Java 的标准 Date 类。

我已经使用[Joda Time](http://joda-time.sourceforge.net/)一段时间了，发现它更简单。

# tsql - TSQL：使用 FOR XML 的每个元素一行

> ID：13982871
> 
> 赞同：14
> 
> 时间：2012-12-21T00:58:56.770
> 
> 标签：tsql, for-xml

我有一个 SQL Server 2005 查询，它生成一个大型结果集（最多几 GB）：

```
SELECT * FROM Product FOR XML PATH('Product') 
```

运行查询会生成一个包含包含许多产品元素的文档的单行：

```
Row 1:
<Product>
  <Name>Product One</Name>
  <Price>10.00</Price>
</Product>
<Product>
  <Name>Product Two</Name>
  <Price>20.00</Price>
</Product>
... 
```

我想更改查询，以便它返回多行，而不是一行包含具有多个产品元素的单个文档的结果集，每个行都有一个包含单个产品元素的文档：

```
Row 1:
<Product>
  <Name>Product One</Name>
  <Price>10.00</Price>
</Product>

Row 2:
<Product>
  <Name>Product Two</Name>
  <Price>20.00</Price>
</Product> 
```

最后，我想在没有 SQL Server 或我的应用程序将整个结果集加载到内存的情况下使用 IDataReader 从 C# 使用此查询。我可以对 SQL 进行任何更改以启用此方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T13:24:50.830

我想你想要这样的东西。（你可以在 AdventureWorks 上运行下面的查询）

```
SELECT ProductID
      ,( SELECT * FROM Production.Product AS b WHERE a.ProductID= b.ProductID FOR XML PATH('Name') ) AS RowXML
FROM  Production.Product AS a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-09T11:22:00.470

我想这会给你很好的结果，

```
SELECT top 3 Productid,Name, XmlColumn from Production.Product a cross apply ( select  top 1  a.* from Production.Product b FOR XML PATH('test')) as outputdata(XmlColumn) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-23T08:35:15.783

如果您知道列名，我宁愿避免嵌套选择表

```
SELECT ProductID,(SELECT Name, Price FOR XML RAW('Product'),ELEMENTS) AS RowXML
FROM  Production.Product AS a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:07:17.010

如果 PRICE 和 NAME 在一个表中 Product

```
SELECT * FROM Product FOR XML AUTO, ELEMENTS 
```

或者，如果没有，您可以创建一个视图 vw_Product ，它将仅返回您想要的 2 列，然后编写

```
SELECT * FROM vw_Product as Product FOR XML AUTO, ELEMENTS 
```

您可以使用 XmlReader 逐行读取此查询的结果，以避免在内存中加载大的 XML 文档。请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executexmlreader.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executexmlreader.aspx)

在您的查询中，您使用了 PATH('Product')，这就是它生成包含所有产品的单个节点的原因。

# regex - 正则表达式允许带有前瞻和“。”的单词边界。

> ID：13982873
> 
> 赞同：2
> 
> 时间：2012-12-21T00:59:13.633
> 
> 标签：regex, lookahead, word-boundary

我有字符串：

```
lorem ipsum Outer.Middle.Last dolor #1
lorem ipsum Outer.Middle dolor      #2 
```

目前我正在使用正则表达式`[[:<:]]Outer.Middle[[:>:]]`尝试仅匹配字符串#2。但是，由于幼稚的边界，这与字符串 #1 和 #2 都匹配。

我试图做某种前瞻，例如`[[:<:]]Outer.Middle(?!.)[[:>:]]`，但这是完全错误的。

正则表达式是必要的，因为我正在使用 PostgreSQL 并查询包含在文本正文中的类名。

任何解决方案或解决方案的指导都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:35:16.177

这对我有用：

```
select * from my_table where my_col ~ '[[:<:]]Outer\\.Middle[[:>:]](?!\\.)' 
```

这 。字符应该被转义（否则它们被视为匹配任何一个字符的通配符），并且反斜杠也需要转义。

这也相当于：

```
select * from my_table where my_col ~ '[[:<:]]Outer[.]Middle[[:>:]](?![.])' 
```

# javascript - 数组未正确返回（钛）

> ID：13982881
> 
> 赞同：0
> 
> 时间：2012-12-21T01:00:16.973
> 
> 标签：javascript, android, iphone, arrays, titanium

我正在使用钛中的函数返回数组。我的数组中有两个条目显示警报，但是当我访问另一个 js 文件中的返回值时。它只在警报中显示一个值这是我的代码（它在 db .js）：

```
function quizfun() {
    var dataArray=new Array();
    var quizes = db.execute('select * from Quiz');
    while (quizes.isValidRow()) {
        var counter = 0;
        dataArray[counter] = quizes.fieldByName('Quiz_Text');
        quizes.next();
        alert(dataArray[counter]);//Showing two values
        counter++;
    };
    return dataArray;
} 
```

这是我的另一个js文件：

```
 quizes = db.quizfun();
  alert(quizes[0]);//working
  alert(quizes[1]);//alert not showing anything 
```

你能告诉我我做错了什么吗？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:46:42.853

`var counter = 0;`应该在while循环之外。像

```
function quizfun() {
    var dataArray=new Array();
    var quizes = db.execute('select * from Quiz');
    var counter = 0;
    while (quizes.isValidRow()) {
        dataArray[counter] = quizes.fieldByName('Quiz_Text');
        quizes.next();
        alert(dataArray[counter]);//Showing two values
        counter++;
    };
    return dataArray;
} 
```

# javascript - 如何使用jquery防止页面进入底部？

> ID：13982892
> 
> 赞同：1
> 
> 时间：2012-12-21T01:01:39.497
> 
> 标签：javascript, jquery, html, dom

当用户点击按钮时，新内容会从 javascript 中加载。但是，页面会自动转到底部。如何让页面保持原位，以便用户可以滚动到底部然后单击按钮（在他们看到加载的新内容之后）？

javascript:

```
<script type="text/javascript">
   $(document).ready(function() {
      counter = {{page}};
      counter = counter-1;
       $("#load_more_videos").submit(function(event){
       event.preventDefault();
       console.log(counter);
        $('.more_videos').load("/more_videos/"+counter);

       })
    });
</script> 
```

html:

```
<form class="form-horizontal" method='get' action = '' id = 'load_more_videos'>
        {% csrf_token %}
        <input type='submit' class="btn btn-primary" value='Get more videos'/>
    </form>

<div class = 'more_videos'> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:14:59.807

一种想法是在加载事件回调中使用[.scrollTop() ，例如：](http://api.jquery.com/scrollTop/)

```
var scrollTop = $(window).scrollTop();

$('.more_videos').load("/more_videos/"+counter, function () {
    $('html body').scrollTop(scrollTop);
}); 
```

**笔记：** `This is completely untest and might make the page a little jumpy`

# inno-setup - 如何防止注册表项在 64 位 Windows 上被缩写

> ID：13982893
> 
> 赞同：1
> 
> 时间：2012-12-21T01:01:53.767
> 
> 标签：inno-setup, registrykey

在调试浏览器插件时，我注意到资源的位置在 Windows 64 位注册表项中被缩写。当手动编辑注册表项以使用资源的长格式路径时，插件开始被识别。

DLL 安装到 CommonFiles64，并且通过使用 InnoSetup 自动注册 DLL 将注册表项添加到 WOW64。

我的问题：如何防止 regsvr32 缩写资源的路径？

例如：我需要防止 someNicePlugin.dll 缩写为 someNic~.dll

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:08:11.410

RegSvr32 不写入注册表值；它只是加载 DLL 并调用 DLL 导出的函数。正是这些函数写入了值。因此，需要更改的是那些功能。

# asp.net-mvc-4 - ASP.NET MVC 4 中的版本控制 Web API 操作

> ID：13982896
> 
> 赞同：9
> 
> 时间：2012-12-21T01:02:18.847
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我有一个 ASP.NET MVC 4 应用程序。我想将新的 Web API 功能用于学习目的。我想学习如何公开相同的端点，但提供不同的版本。换句话说，我想公开如下端点：

```
http://mysite/1.0/Products/1
http://mysite/2.0/Products/1 
```

为了尝试做到这一点，我在默认的“Controllers”目录中添加了一个“Api”目录。在“Api”目录中，我还有另外两个目录：“Version1-0”和“Version2-0”。这些目录中的每一个都有一个名为“ProductsController”的 ApiController。

我试图通过在我的 WebApiConfig.cs 文件中添加以下路由定义来公开端点：

```
config.Routes.MapHttpRoute(
  name: "1-0Api",
  routeTemplate: "api/1.0/{controller}/{id}",
  defaults: new { id = RouteParameter.Optional }
); 
```

不幸的是，我不知道如何通过上面列出的 URL 公开操作。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T01:28:52.593

您可能会遇到问题，因为控制器具有相同的名称。控制器命名空间或它所在的文件夹对 WebAPI 来说根本不重要，只有名称才重要。我能想到的最简单的事情是重命名您的控制器 ProductsV1Controller 和 ProductsV2Controller 并设置两条路由指向您的控制器：

```
config.Routes.MapHttpRoute(
    name: "1-0Api",
    routeTemplate: "api/1.0/Products/{id}",
    defaults: new { controller = "ProductsV1", id = RouteParameter.Optional }
);
config.Routes.MapHttpRoute(
    name: "2-0Api",
    routeTemplate: "api/2.0/Products/{id}",
    defaults: new { controller = "ProductsV2", id = RouteParameter.Optional }
); 
```

当然，如果您想以这种方式公开多个控制器，这会变得很混乱。让我看看我能不能想出更好的东西给你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T16:41:24.910

Sebastiaan Dammann 在他的博客中描述了他如何通过编写自己的实现`IHttpControllerSelector`和支持接口来进行 Web API 版本控制。

[http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api](http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api)

他还把代码放在了github上

[https://github.com/Sebazzz/SDammann.WebApi.Versioning](https://github.com/Sebazzz/SDammann.WebApi.Versioning)

并为我们将其打包在 NuGet 中！:)

[https://nuget.org/packages/SDammann.WebApi.Versioning](https://nuget.org/packages/SDammann.WebApi.Versioning)

虽然实现`IHttpControllerSelector`肯定是（恕我直言）进行 Web API 版本控制的正确方法，但~~我认为如果他包括基于 HTTP`Accept`标头~~的版本能力将是理想的（参见[http://barelyenough.org/blog/2008/05/版本控制-rest-web-services/](http://barelyenough.org/blog/2008/05/versioning-rest-web-services/)）。

不幸的是，我的客户端无法使用`Accept`标头，所以他`RouteVersionedControllerSelector`对我来说是理想的。

**编辑：**不知道我是怎么错过的，但确实有一个`AcceptHeaderVersionedControllerSelector`可以用来做版本控制的*理想*方式。我目前正在一个新项目中使用它，但它仍然有[一些缺点](https://github.com/Sebazzz/SDammann.WebApi.Versioning/issues/16)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-05T19:42:45.640

[在使用 URL 的 Web Api 2 中](https://stackoverflow.com/questions/29462085/controller-versioning-in-web-api-2-using-url)使用 HttpControllerSelctor 实现控制器版本控制

有关更多信息，[您可以查看](http://bitoftech.net/2013/12/16/asp-net-web-api-versioning-accept-header-query-string/)[这里](http://blogs.msdn.com/b/webdev/archive/2013/03/08/using-namespaces-to-version-web-apis.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T18:47:46.753

您是否仍然定义了默认的 Web API 路由并且它*在*您的自定义路由之前？这将导致您的方案失败。以下路线定义（注意顺序）对我有用。

```
public static void Register(HttpConfiguration config) {
    config.Routes.MapHttpRoute(
        name: "1-0Api",
        routeTemplate: "api/1.0/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-03T06:45:12.583

如果我们采用您的第一种方法，那么它有助于路由并允许我们获取 V1、V2 的数据......但现在我们为一个控制器提供了 v1 和 v2 的示例，因此路由代码如下：

```
config.Routes.MapHttpRoute(
    name: "1-0Api",
    routeTemplate: "tables/v1/Products",
    defaults: new { controller = "ProductsV1", id = RouteParameter.Optional }
);
config.Routes.MapHttpRoute(
    name: "2-0Api",
    routeTemplate: "tables/v2/Products",
    defaults: new { controller = "ProductsV2", id = RouteParameter.Optional }
); 
```

但是我们有 20 多个控制器和多个版本，然后如何使其通用。

# asp.net - modalPopUpExtender 出现时可以绑定/填充/加载 GridView 吗？

> ID：13982900
> 
> 赞同：0
> 
> 时间：2012-12-21T01:02:35.867
> 
> 标签：asp.net, gridview, ajaxcontroltoolkit, modalpopupextender

我有 2 个更新面板。

第二个有一个 GridView 本机控件，它由面板控件包装。最后一个面板控件有一个来自 AjaxControlToolkit 的 ModalPopUpExtender。

我可以在加载事件页面将数据绑定到gridView，并且它在带有modalPopUpExtender的更新面板内工作得很好。

但是，当 ModalPopUpExtender 出现时，是否可以再次绑定或绑定 GridView ？

我想这样做是为了让网页加载得更快，并避免向用户询问正在寻找的项目，而且，如果搜索依赖于某些用户输入，我相信这是不可能的，但我只是要求当然。

致以我的问候。

参考：要使用 ModalPopUp+UpdatePanel+Grid，我遵循以下示例：[http ://weblogs.asp.net/rajbk/archive/2009/05/07/using-the-modal-popup-extender-to-build-a -popup-search-interface.aspx](http://weblogs.asp.net/rajbk/archive/2009/05/07/using-the-modal-popup-extender-to-build-a-popup-search-interface.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:16:26.320

显示 ModalPopupExtender 时绑定，而不是使用 UpdatePanel，因为显示事件是客户端事件。但是，您可以有一个显示“加载数据”的按钮，他们可以单击该按钮以获取结果，这是一个额外的单击，但会起作用。或者，如果您可以通过 JSON 获取结果，您可以使用 JavaScript 在客户端构建显示，这也将是高效的。

# css - jQuery toggleClass 在浏览器历史记录后不保留类

> ID：13982902
> 
> 赞同：0
> 
> 时间：2012-12-21T01:02:52.683
> 
> 标签：css, ajax, jquery

我在 ajax 请求后向按钮添加了一个类，以便按钮获得不同的颜色。如果我单击站点上的某些内容并返回，那么由 toggleClass 添加的新类就消失了。浏览器显示的可能不是更改的 DOM，而是第一页加载的原始 DOM。这是我的代码。

```
$('.toogleUser').click(function() {
    var event_id = $(this).val();
    $(this).toggleClass("active");
    $.ajax({
        url: "/add/",
        type: "POST",
        data: {
            event_id: event_id
        },
        cache: false
    }).done(function(msg) {
        $.ambiance({message: msg, type: "success"});
    });
}); 
```

**编辑：jquery doc 上的第一个演示保留了类属性：[http](http://api.jquery.com/toggleClass/) : //api.jquery.com/toggleClass/ 如果您突出一个段落，然后单击一个链接并返回，段落仍然保留“highlite”类.该代码除了togleClass之外什么都不使用。为什么我的代码在演示中不像这样工作？**

# python - 为什么使用 NoSQL 而不是 RDBMS？

> ID：13982906
> 
> 赞同：1
> 
> 时间：2012-12-21T01:03:03.263
> 
> 标签：python, mysql, ruby-on-rails, ruby, nosql

> **可能重复：**
> [NoSql vs 关系数据库](https://stackoverflow.com/questions/4160732/nosql-vs-relational-database)

我参加过几个项目，我的团队选择使用 NoSQL DB（即 MongoDB）而不是像 PostgreSQL 或 MySQL 这样的 RDBMS。在我们的项目进行到一半时，我团队中的大多数人最终都不喜欢 NoSQL 数据库。我的一个理论是 NoSQL 的用例数量非常有限，因此我们可能一开始就出于错误的原因选择了数据库。另一个理论是，许多最新的现代框架/gems/plugins/etc 在设计时都考虑到了 RDBMS，因此在 NoSQL 数据库中使用 ORM 感觉不自然（即 Mongoid）与在 Rails 中使用 ActiveRecord（SQL ORM）相比，例如设计时考虑了 ActiveRecord。也许将来易用性会更好？

NoSQL 应该是无模式的，但这真的有好处吗？这样做的数据完整性是否存在巨大风险？

有人可以给出使用 NoSQL DB 对关系数据库真正有用的真实用例吗？今天是世界末日所以我真的很想知道！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T01:06:00.690

NoSQL 应该在有大量数据的情况下很有用，而没有 RDBMS 所需的那种要求。

我不能给你任何用例，因为我认为这是一个小众的东西。基本上，NoSQL 听起来像是一种系统，如果你需要它，你会有一个很好的主意，如果你不需要它，那可能意味着你应该坚持使用 RDBMS。

关于关系模型有很多话要说，所以我不会轻易放弃它。

这是 Wiki，非常易读： [http ://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL)

# objective-c - Xcode 方案 menu/popupButton 是如何实现的？

> ID：13982908
> 
> 赞同：1
> 
> 时间：2012-12-21T01:03:04.237
> 
> 标签：objective-c, xcode, macos, cocoa, appkit

在 Xcode 的工具栏上，它有一个方案选择菜单（或类似 NSPopupButton）。看起来是用两个 NSPopupButton 实现的。或者用两个按钮实现，每个按钮都有一个菜单。有人对如何实施这个有建议吗？

感谢分享！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:19:17.343

Xcode 的 Scheme 菜单使用路径控件 (NSPathControl)，Xcode 也将其用于跳转栏。路径控件位于 Xcode 的对象库中，因此向您的应用程序添加一个相对容易。让路径控件看起来和行为类似于 Scheme 菜单需要更多的工作。

# visual-studio-2012 - 使用趋势科技时的 VS2012 编译问题

> ID：13982915
> 
> 赞同：3
> 
> 时间：2012-12-21T01:04:03.123
> 
> 标签：visual-studio-2012, antivirus

我在尝试使用安装在我的机器上的 VS2012 和 Trend Micro 防病毒软件编译我的项目时遇到了问题，我想了解为什么会发生这种情况，是否有其他人遇到过这种情况，以及可能的解决方案。

基本上，我有一个项目，其中包含一组在禁用趋势科技时可以正确编译的依赖项。但是，启用后，它似乎（通常但不总是）会导致某个特定项目的生成的二进制文件 (.dll) 被删除，这反过来又会导致相关项目无法编译。错误类型为：

58>CSC : 错误 CS0006: 找不到元数据文件 'C:\XXX\bin\XYZ.dll'

58>CSC : 错误 CS0006: 找不到元数据文件 'C:\XXX\bin\QWE.dll'

有趣的是：

*   XYZ是总是失败的项目；

*   趋势科技不制作任何日志或通知；

*   在启用和/或不启用趋势科技的编译测试之间不会应用任何代码更改；

*   这种情况最常发生在请求重建整个解决方案时；

我的 VS12 设置为 4 个并行构建，版本如下：

趋势科技防毒墙网络版客户端（适用于 Windows）

版本：10.6.2108 SP1

-

视觉工作室高级版 2012

版本：11.0.51106.01 升级1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:08:42.970

老实说，我还没有发现了解为什么防病毒软件或其他此类软件会搞砸的有用。事实是，它*确实*搞砸了。我的策略是为供应商记录它并让他们修复他们的错误，或者至少给你一个解决方法。

Visual Studio 与反病毒供应商可能正在测试的许多其他程序不同。例如，它会打开并加载大量 DLL。它在构建期间访问大量文件。这些是防病毒软件或其他安全软件可能非常感兴趣的活动。

# java - 如何获取 JTree 根节点的文件系统路径？

> ID：13982916
> 
> 赞同：0
> 
> 时间：2012-12-21T01:04:39.820
> 
> 标签：java, swing, jtree, treemodel

我在下面的代码中注意到

```
DefaultTreeModel treemodel = new DefaultTreeModel();
TreeNode root = treeModel.getRoot(); 
```

问题是`root`值是“root”而不是文件系统上文件的路径。

我期望的是像“C：\”或“D：\”这样的东西，具体取决于树。

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:09:11.380

不完全是您要问的问题，但这里是如何实现文件树的教程/示例。

[http://www.chka.de/swing/tree/FileTreeModel.html](http://www.chka.de/swing/tree/FileTreeModel.html)

# c++ - 试图通过 system() 运行字符串命令

> ID：13982917
> 
> 赞同：1
> 
> 时间：2012-12-21T01:04:57.627
> 
> 标签：c++, windows, string, visual-studio-2010

如何将字符串转换为可以通过 system() 执行的内容？

我有这个

```
std::string out = "some command to run" + some_string_variable;
system(out); 
```

这不会编译，它给了我一个转换错误

没有合适的从 std::string 到 const char * 的转换函数

但是如果我尝试运行

```
system("pause"); 
```

这样可行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T01:05:56.167

尝试

```
system(out.c_str()); 
```

系统函数声明如下，它`const char*`作为输入参数：

```
int system(const char *command); 
```

# java - Java：System.out 和 System.err 输出到同一个流？

> ID：13982919
> 
> 赞同：1
> 
> 时间：2012-12-21T01:05:02.173
> 
> 标签：java

使用时`System.out.println`或`System.err.println`有什么区别？在控制台应用程序中，它们似乎几乎相同。

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:08:11.667

差异是在底层操作系统中定义的。默认情况下，这两个流都发送到控制台（即您的监视器）。但是，用户可以独立地重定向它们。例如，在类 Unix 环境中，`java MyClass > output.txt`将重定向`System.out`到文件`output.txt`，但发送到的任何内容`System.err`仍将转到控制台。更多详情，您可以谷歌搜索`stdout`和`stderr`；这些是大多数操作系统上这些流的典型名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:09:00.770

区别在这里明确定义：

[http://docs.oracle.com/javase/6/docs/api/java/lang/System.html](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)

还定义了一些方法（您将在本文档中找到）如何更改这些流（System.setErr、System.setOut、System.setIn）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T01:11:04.530

`System.out`是标准输出，`System.err`是错误输出。

*   一些 IDE 控制台`System.out`以标准字体和`System.out`红色显示。

*   Java Web 服务器会将错误发送到两个不同的文件。

*   使用命令行将`java -jar yourjar.jar >out.txt 2>err.txt`发送`System.out`到`out.txt`和`System.err`到`err.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T01:16:39.223

除了这里其他人所说的，因为它们是两个独立的流，如果您互换使用它们，并发系统中的线程交错可能会导致打印顺序让您感到惊讶。这仅取决于操作系统在告诉处理器要做什么时如何确定它们的优先级。

# entity-framework - EF 中的多重性一对一

> ID：13982920
> 
> 赞同：0
> 
> 时间：2012-12-21T01:05:09.373
> 
> 标签：entity-framework

我正在使用 EF5，我需要创建以下关系

*   SavedApplicationQueue 和 SavedApplication 之间的一对一
*   BatchApplicationQueue 和 BatchApplication 之间的一对一

```
public abstract class BaseEntity
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public virtual int Id { get; set; }
}
public abstract class Queue : BaseEntity
{
    public string Status { get; set; }
    public DateTime? LastRun { get; set; }
}
public abstract class Application : BaseEntity
{
    public string ApplicationInhertirot { get; set; }
    public string AnotherApplicationInhertirot { get; set; }
}

public class BatchApplication : Application
{
    public bool BatchAppFlag { get; set; }
    public string BatchAppString { get; set; }
    public virtual BatchApplicationQueue BatchApplicationQueue { get; set; }
}

public class SavedApplication : Application
{
    public bool SavedAppFlag { get; set; }
    public string SavedAppString { get; set; }
    public virtual SavedApplicationQueue SavedApplicationQueue { get; set; }
}

public class SavedApplicationQueue : Queue
{
    [Required]
    [ForeignKey("SavedApplication")]
    public virtual SavedApplication SavedApplication { get; set; }
}

public class BatchApplicationQueue :Queue
{
    [Key]
    [ForeignKey("BatchApplication")]
    public override int Id { get; set; }

    [Required]
    public virtual BatchApplication BatchApplication { get; set; }
} 
```

我的流利程度是

```
modelBuilder.Entity<Application>()
            .Map<SavedApplication>(m =>
                {
                   m.ToTable("SApplication");
                   m.MapInheritedProperties();
                })
            .Map<BatchApplication>(m =>
                {
                   m.ToTable("BApplication");
                   m.MapInheritedProperties();
                });

modelBuilder.Entity<Queue>()
            .Map<SavedApplicationQueue>(m =>
                {
                  m.ToTable("SavedApplicationQueue");
                  m.MapInheritedProperties();
                })
            .Map<BatchApplicationQueue>(m =>
                {
                    m.ToTable("BatchApplicationQueue");
                    m.MapInheritedProperties();
                }); 
```

我遇到的问题是当我尝试创建/添加记录时

> 测试方法 Ef.Model.Test.UnitTest1.TestMethod1 抛出异常：System.InvalidOperationException：序列包含多个匹配元素

我认为这与身份有关，但我只是想创建所描述的关系和多样性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:09:22.257

首先，异常（显然）是由于映射。您这样做`modelBuilder.Entity<Application>()`，然后映射两种不同的类型。正确的 TPT 映射将是：

```
modelBuilder.Entity<SavedApplication>()
            .Map(m =>
              {
                m.ToTable("SApplication");
                m.MapInheritedProperties();
              });
modelBuilder.Entity<BatchApplication>()
            .Map(m =>
              {
                m.ToTable("BApplication");
                m.MapInheritedProperties();
              });

modelBuilder.Entity<SavedApplicationQueue>()
            .Map(m =>
              {
                m.ToTable("SavedApplicationQueue");
                m.MapInheritedProperties();
              });
modelBuilder.Entity<BatchApplicationQueue>()
            .Map(m =>
              {
                m.ToTable("BatchApplicationQueue");
                m.MapInheritedProperties();
              }); 
```

其次，虽然你不问，但是Id的覆盖有点奇怪，没有必要。这样的代码将映射两个 1:1 关联。

# django - 基于外键的django动态表单值

> ID：13982934
> 
> 赞同：3
> 
> 时间：2012-12-21T01:07:11.447
> 
> 标签：django, forms, dynamic

希望每个人都享受假期！:)

我可以在 django 中有一个表单，其中所有其他字段（ForeignKey、CharField 等）的默认值取决于单个字段的值，即 ForeignKey（在下拉字段中选择的值）？

**这是我的场景：**

*   国家/地区 = [US、DE、CH 等]（外键）
*   语言 = [英语、德语、普通话等] (ForeignKey)
*   我的准表格将包含以下字段：国家、语言
*   我希望根据用户选择的国家/地区自动更改语言。但是，用户应该能够将其更改为上面列出的任何选项。

先感谢您！圣诞节快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:53:11.143

据我了解，您希望在客户端实现这一目标，恐怕 django 功能无法在客户端为您提供帮助。您需要依赖客户端语言，例如`javascript`和`jQuery`。

我建议你看看[jquery-related-selects](https://github.com/ehynds/jquery-related-selects)来实现你想要的。在服务器端，您可以使用该[`initial`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#initial)方法设置字段的初始数据和/或通过覆盖表单的`__init__()`or`save()`方法（如果您已将实例传递给表单）来操作数据。

在表单被渲染之前，您可以使用 django 做很多事情，但是一旦表单被渲染，您需要处理这些东西，`client-side`直到您将数据发布[传递]回 django。

继续编码，并有一个美好的一年！

# java - 如何使用 Selenium 测试在跨度元素中选择值？

> ID：13982935
> 
> 赞同：5
> 
> 时间：2012-12-21T01:07:18.770
> 
> 标签：java, selenium, webdriver, web-testing

我要测试的页面有一个 span 元素，它实际上用作下拉选择菜单。“选择”元素的 Selenium 代码不起作用并抛出以下内容：

```
Exception in thread "main" org.openqa.selenium.support.ui.UnexpectedTagNameException: Element should have been "select" but was "span" 
```

该元素的代码如下所示：

```
<span style="width: 100%" val="30" id="countVal">30</span> 
```

我打开下拉菜单时的代码是：

```
<tr onclick="selectNewCount(1);" class="selec_option">
<td onmouseout="blankit(this)" onmouseover="colorit(this)" class="bones_pointer out_color" id="tdgroup1">50</td>
</tr> 
```

这是这样的：

![带有伪选择元素的表单](../Images/302f93e06f7ad52ac0f05b30f58a3041.png)

**编辑1：**

这是我的硒代码：

```
 // choose number of records.
        try {
            WebDriverWait wait = new WebDriverWait(driver, /*seconds=*/10);

            element = wait.until(presenceOfElementLocated(By.id("countVal")));

            Select select = new Select(element);
            select.deselectAll();
            select.selectByVisibleText("100");

        } catch (NoSuchElementException ex) {
            System.out.println("PAGE SOURCE: \n" + driver.getPageSource());
            ex.printStackTrace();
        } 
```

这是页面源代码在此元素周围的外观：

![在此处输入图像描述](../Images/8792b7de6bdbdca8757e6dcd85904c4a.png)

如果需要，我可以添加更多详细信息。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:17:24.600

所以这就是正在发生的事情：

当您单击`<div id="countSelect"></div>`JavaScript时`show_countSelector()`，将执行并将值附加到表中。那些“选择选项”实际上是“表格行”。

所以你的步骤是：
1）如果没有带有 id类`selec_option`的行，那么你需要先点击它。 2) 之后，您单击特定行。`div``countSelect``div`

因此，我将尝试展示 Java 代码（但是，我使用 Python 处理 Selenium）：

```
WebElement selectorElement = driver.find(By.xpath('//*[@id="countSelect"]')));

WebElement elementOfInterest;
try {
    //trying to get the "select option"
    elementOfInterest = selectorElement.findElement(By.xpath('//*[contains(@class,"selec_option")]/td[@text()="50"]'))

} catch (NoSuchElementException e) { 
    //so options are not visible, meaning we need to click first
    selectorElement.click()
    //good idea would be to put "wait for element" here
    elementOfInterest = selectorElement.findElement(By.xpath('//*[contains(@class,"selec_option")]/td[@text()="50"]'))
}
//this would select the option
elementOfInterest.click() 
```

像这样的东西。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:34:58.353

你试过 `selectByValue("value")`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:07:26.527

那是因为它不是`select`即使看起来像...

你必须使用另一种方法。我认为一个简单的

```
element = driver.find(By.id("countVal"));
element.click() 
```

应该管用

您必须找到选择工作的方式，后面应该涉及一些javascript。当您知道元素的变化是如何出现的时，您将能够找到在 Selenium 中可以做什么。但这肯定不是纯粹的`select`

（注意：这是一个未经测试甚至可能无法编译的代码，但它向您展示了我的观点）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:58:42.533

您只能将 Select 类与 html 本机选择一起使用...您使用实际上是跨度的自定义选择。

你的例子：

```
 public void selectValue(String item) {
    WebElement dropDown = driver.findElement(By.id("countTd"));
    dropDown.click();

    driver.findElement(By.xpath("//td[@id='countTd']/span[text()='" + item + "']")).click();
} 
```

# z3 - 将 IR 转换为 Z3 公式？

> ID：13982937
> 
> 赞同：4
> 
> 时间：2012-12-21T01:08:05.093
> 
> 标签：z3

我在 IR 中有一些代码，并且该代码已经是 SSA 形式。现在我正在尝试将此代码转换为 SMT 公式，然后将其提供给 Z3 进行一些验证。我有一些疑问：

1.  是否有任何技术论文详细解释了如何将 SSA IR 转换为 SMT 公式？我四处寻找，无济于事。

2.  对于那些计算指令，转换为 Z3 公式没有太大问题。但是，我仍在为无条件和有条件的分支指令而苦苦挣扎。关于如何将这些指令转换为 Z3 公式的任何建议？

非常感谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T03:30:12.580

我认为将基于 SMT 的程序验证工具分为两大类是公平的：

*   Fuzzer 和 Bug 查找器。这些工具本质上是将程序的一个执行路径编码为 SMT 公式。这些工具使用 SMT 来检查特定的执行路径是否可行。示例或此类工具有：[Pex](http://research.microsoft.com/pubs/77419/ParameterizedUnitTests%28FSE05%29.pdf)、[EXE](http://chicory.stanford.edu/PAPERS/EXE-cadarganesh-06.pdf)、[Sage](http://research.microsoft.com/en-us/um/people/pg/public_psfiles/ndss2008.pdf)。根据您的问题，您似乎已经知道如何将一条路径编码为 SMT。

*   扩展静态检查器和验证编译器。这些工具通常将程序简化为中间形式。然后，生成几个验证条件 (VC) 并将其发送到 SMT 求解器。他们中的大多数（全部？）尝试进行模块化验证，因为将整个程序验证为单个 SMT 问题的成本太高。Boogie-PL 是一种非常流行的中间格式。如果您将 IR 映射到 Boogie-PL，则可以使用[Boogie](http://boogie.codeplex.com)生成 SMT 格式的 VC。文章“[非结构化程序的最弱前提条件](http://research.microsoft.com/en-us/um/people/leino/papers/krml157.pdf)”描述了 Boogie-PL 如何编码为公式。请注意，Boogie 是开源的，代码可读性很强。因此，您还可以浏览代码以阐明详细信息。[鲁斯坦·莱诺](http://research.microsoft.com/en-us/um/people/leino/)还有一堆幻灯片解释了如何将 Boogie VC 编码为公式。其他相关项目是[ESC/Java 2](http://kindsoftware.com/products/opensource/ESCJava2/)、[Why3](http://why3.lri.fr/)、[VeriFast](https://people.cs.kuleuven.be/~bart.jacobs/verifast/)。

**编辑**（处理循环）：处理循环的最简单技术只是将它们展开给定次数。当我们这样做时，我们的验证工具就变成了“错误查找器”，因为我们基本上放弃了分析所有可能的路径。在工具（例如 ESC/Java、Why3、VeriFast）中，使用了[循环不变量](http://en.wikipedia.org/wiki/Loop_invariant)。Rustan 有一个关于循环不变量的精彩[视频和讲义。](http://research.microsoft.com/en-us/projects/verificationcorner/)循环不变量可以由用户提供，也可以自动计算。关于“循环不变综合”的论文很多。

循环不变示例：`duplet`此[Why3 验证示例](http://proval.lri.fr/gallery/duplets_c.en.html)中的函数。

另一种可能性是将您的 IR 编码为[muZ](http://rise4fun.com/Z3Py/tutorial/fixedpoints)。muZ 是 Z3 中可用的定点引擎。在这种方法中，可以直接对循环进行编码（参见 muZ 页面上的文章），无需提供循环不变量。然而，像 muZ 这样的引擎作为最先进的 SMT 求解器尚未成熟。

# c# - 元组列表到多维数组

> ID：13982940
> 
> 赞同：2
> 
> 时间：2012-12-21T01:08:19.740
> 
> 标签：c#, arrays, list, multidimensional-array, tuples

> **相关但不重复（这是一种完全不同的语言，PHP 不是 C#）：**
> [如何从列表创建多维数组？](https://stackoverflow.com/questions/7884337/how-to-create-multi-dimensional-array-from-a-list)

我将如何将“元组”列表转换为字符串 [，]？

这是网络爬虫的一部分，但出于好奇，我正在搞乱列表和数组的转换。这是方法。

```
private string[,] getimages(string url)
    {
        List<Tuple<string, string>> images = new List<Tuple<string, string>>();
        string raw = client.DownloadString(url);
        while (raw.Contains("<a class=\"title \" href"))
        {
            raw = raw.Substring(raw.IndexOf("<a class=\"title \" href"));
            String link = raw.Substring(24, raw.IndexOf(">", 24) - 26);

            int startname = raw.IndexOf(">", 24) + 1;
            int endname = raw.IndexOf("</a>&#32;");
            String name = raw.Substring(startname, endname - startname);

            images.Add(new Tuple<string, string>(name, link));

            raw = raw.Substring(endname);
        }

} 
```

我想返回“图像”，但转换为多维数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:16:38.607

一个简单直接的方法是只`for`列出列表：

```
string[,] result = new string[images.Count, 2];

for(int i=0; i<images.Count; i++)
{
  var tuple = images[i];
  result[i,0] = tuple.Item1;
  result[i,1] = tuple.Item2;
 }
 return result; 
```

# java - jQuery GET 和 Spring MVC 没有正确重定向

> ID：13982944
> 
> 赞同：-1
> 
> 时间：2012-12-21T01:08:47.983
> 
> 标签：java, jquery, jsp, redirect, spring-mvc

我有一个`start.jsp`页面。在其中我定义了一个 jQuery 点击处理程序：

```
$(document).ready(function() {
    $("#myButton").click(function() {
        // Injected from a Spring MVC controller returning a ModelAndView with
        // modelAndView.addObject("fizz", myFizz);
        var fizz = "${fizz}";

        // Synchronous HTTP Get to invoke page redirect.
        $.get(
            "/myWidgets",
            {
                "fizz": fizz
            },
            function(data) {
                // ???
            }
        );
    });
}); 
```

然后，在控制器中监听`/myWidgets`：

```
@RequestMapping(value = "/myWidgets.html", method = RequestMethod.GET)
public ModelAndView reloadAllTimeslots(@RequestParam("fizz") String fizz) {
    ModelAndView mav = new ModelAndView();

    // Should redirect the user to Oranges.jsp.
    mav.setViewName("fruits/Oranges");

    fruitDao.updateFruits(fizz);

    logger.info("This prints to my log file perfectly fine, so I know this handler gets invoked.");

    return mav;
} 
```

但是，当我在`start.jsp`页面上并单击`myButton`时，页面永远不会重定向到`Oranges.jsp`. 但是，控制器（上图）中的记录器语句会打印到我的服务器日志中。所以我*知道*代码 99% 都在工作，我只是没有得到我想要的用户体验。有人知道为什么我没有被重定向到这里吗？

**更新**：

我正在使用的视图解析器：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/views/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T03:39:17.453

该页面不会更改历史记录或加载不同的 URL（橙色），因为您使用的是 AJAX。事实上，大多数人都将这样的 AJAX 用于[单页应用程序](/questions/tagged/single-page-application "显示标记为“单页应用程序”的问题")行为。

如果您希望页面重新加载，您只需使用普通的 FORM 提交，例如：

```
<form action="/myWidgets" method="post">
<input type="hidden" name="fizz" value="${fizz}" />
<button type="submit">Click</button>
</form> 
```

以上不需要jQuery。

如果您想加载页面但使用 AJAX 并更改 URL，那么您应该查看 PJAX（pushstate history）之类的内容。

`redirect`当您指的是路由（或页面加载）时，您还应该避免使用该术语，特别是对于 HTTP 场景。对于大多数 Web 开发人员来说，重定向意味着 HTTP 301，这对于传统的表单 POST 提交来说很常见，但根本不是你在上面所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T03:39:17.770

对于此任务，执行该重定向的最佳方法（正如 Luiggi 在评论中提到的）是在 ajax 函数从服务器返回成功后通过 javascript 重定向。您永远不能仅通过 ajax 请求进行重定向。例如：

```
@RequestMapping(value = "/myWidgets.html", method = RequestMethod.GET)
@ResponseBody
public String reloadAllTimeslots(@RequestParam("fizz") String fizz) {
    fruitDao.updateFruits(fizz);

    logger.info("This prints to my log file perfectly fine, so I know this handler gets invoked.");

    return "success";
} 
```

并在 HTML 文件中：

```
$(document).ready(function() {
    $("#myButton").click(function() {
        var fizz = "${fizz}";

        // Synchronous HTTP Get to invoke page redirect.
        $.get(
            "/myWidgets",
            {
                "fizz": fizz
            },
            function(data) {
                // ???
            }
        ).success(function() { window.location.replace("http://stackoverflow.com"); })
         .error(function() { alert("error"); })
         .complete(function() { alert("complete"); });
    });
}); 
```

# ruby-on-rails - 设计在用户创建时不显示错误

> ID：13982947
> 
> 赞同：0
> 
> 时间：2012-12-21T01:09:13.343
> 
> 标签：ruby-on-rails, devise, gem

我遇到了一种情况，我试图在设计流程之外创建自己的用户，因为我需要在创建后立即修改用户模型。

以下是控制器的相关操作：

```
class HomeController < ApplicationController
  def resource
    @user || User.new
  end

  helper_method :resource

  def create_user
    @user = User.new email: params[:email]
  end

  def create_password
    @user = User.new email: params[:email], password: params[:password], password_confirmation: params[:password]

    if @user.save
      sign_in @user
      customer = Stripe::Customer.create(description: @user.email, card: params[:stripeToken])
      current_user.stripe_customer_id = customer.id
      Stripe::Charge.create(amount: 5000, currency: "usd", customer: user.stripe_customer_id)
      role = Role.find_by_name("purchased")
      current_user.roles << role
      current_user.save
      redirect_to user_root_url, notice: "You signed up"
    else
      render action: "create_user"
    end
  end
end 
```

我们的流程是这样的：

我们的主页上有一个带有支付按钮的文本框。用户输入他们的电子邮件，点击支付按钮，[条纹框弹出](https://stripe.com/docs/checkout)，输入抄送信息，点击“购买”并被定向到`create_user`页面。这：

```
.wrapper
  %h1 Create Password
  = form_tag create_password_home_url do
    = devise_error_messages!
    = label_tag :email
    = text_field_tag :email, @user.email
    %br
    = label_tag :password
    = password_field_tag :password
    %br
    = hidden_field_tag :stripeToken, params[:stripeToken]
    = submit_tag "Create Password" 
```

我们要求用户提供密码，这样就完成了用户端的帐户创建（在`create_password`操作中）。

如果成功保存，一切都会很好`@user`，如果没有，我会被重定向到“请创建密码”表单，但我没有收到设计错误。在我的测试用例中，我使用的是我知道系统中已经存在的电子邮件。在我们另一个由 Devise 供电的注册页面上，Devise 很好地告诉了我们这个错误。

在尝试调试时，我被引导到此代码`DeviseHelper`

```
def devise_error_messages!
    return "" if resource.errors.empty?

    messages = resource.errors.full_messages.map { |msg| content_tag(:li, msg) }.join
    sentence = I18n.t("errors.messages.not_saved",
                      :count => resource.errors.count,
                      :resource => resource.class.model_name.human.downcase)

    html = <<-HTML
    <div id="error_explanation">
      <h2>#{sentence}</h2>
      <ul>#{messages}</ul>
    </div>
    HTML

    html.html_safe
  end 
```

检查的值`resource.errors.empty?`实际上是`true`。

知道为什么没有将错误添加到资源中吗？

导轨 3.2.1

红宝石 1.9.2

**编辑**

辅助功能：

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
end 
```

被`resource`报告为`User`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:04:05.397

也许您需要`resource`在您的（我假设）上定义一个辅助方法`HomeController`返回`@user`.

```
def resource
  @user || User.new
end
helper_method :resource 
```

但是鉴于这两个动作都在`HomeController`并且`resource.errors.empty?`确实返回`true`，那么您可能在`resource`某处定义了一个方法，该方法返回您可能不想要的对象。

# c# - 如何使用 C# 通过 skype4com api 使 skype 静音

> ID：13982948
> 
> 赞同：0
> 
> 时间：2012-12-21T01:09:14.737
> 
> 标签：c#, api, skype

我只是在 c# 中使用 skype4com api，我对如何使用 api 使 skype 静音有点困惑。我在“skype.Mute = true;”行收到错误消息

错误：

```
Error   1   Ambiguity between 'SKYPE4COMLib.ISkype.Mute' and   'SKYPE4COMLib._ISkypeEvents_Event.Mute'  C:\Users\derp\documents\visual studio   2010\Projects\SkypeBot\SkypeBot\Form1.cs    33  39  SkypeBot 
```

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using SKYPE4COMLib;

namespace SkypeBot
{
public partial class Form1 : Form
{            
    public Skype skype = new Skype();
    public bool afk;
    public Form1()
    {
        InitializeComponent();
        ((_ISkypeEvents_Event)skype).MessageStatus += OnMessageStatus;
        skype.Attach(8);
    }
    void OnMessageStatus(ChatMessage msg, TChatMessageStatus status)
    {
            if (status.ToString() == "cmsSending" && msg.Sender.DisplayName == skype.CurrentUser.DisplayName)
            {
                if (msg.Body == "!afk")
                {
                        afk = !afk;
                        if (afk)
                        {
                            msg.Body = msg.Sender.FullName + " is now afk!"; 
```

以下行是问题：

```
 skype.Mute = true;
                        }
                        else
                        {
                            msg.Body = msg.Sender.FullName + " has returned!";
                        }
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:23:57.780

我手头没有 Skype API，但似乎 Skype 类实现了两个支持 Mute 属性的接口。

尝试将引用转换为特定接口，然后调用该方法，例如：

```
((ISkype)skype).Mute = true; 
```

或者

```
((_ISkypeEvents_Event)skype).Mute = true; 
```

# iphone - 我如何知道文本是否超出了文本视图的范围？

> ID：13982954
> 
> 赞同：3
> 
> 时间：2012-12-21T01:09:52.237
> 
> 标签：iphone, objective-c, ios, ipad

我想知道文本何时超出 UITextView 的范围并要求用户滚动。知道某种字体会占用多少行是没有用的——我怎么知道某种文本会占用多少行？

![在此处输入图像描述](../Images/32738517928daf75bcecd14fffa0db5b.png)

在上图中，我会添加一个淡入淡出效果，这样我就可以优雅地切断文本视图。但是，如果没有足够的文本滚动，则显示淡入淡出看起来不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T02:10:45.423

`contentSize`设置文本后获取。这是一个 CGSize ，`height`它将是 UITextView 在不滚动的情况下显示文本所需的高度。

```
myTextView.text = someText;
CGSize textSize = myTextView.contentSize;
float verticalSpaceNeededByText = textSize.height; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-27T03:15:24.117

为 Swift 3.x 更新

```
func textExceedBoundsOf(_ textView: UITextView) -> Bool {
    let textHeight = textView.contentSize.height
    return textHeight > self.textView.bounds.height
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:26:28.733

获取文本视图的属性文本并使用以下方法计算大小：

```
- (CGSize) size; 
```

然后你可以知道文本视图的边界和这个 UIFont 的属性来完成这项工作：

```
@property(nonatomic,readonly) CGFloat lineHeight; 
```

请注意，属性字符串的大小仅对长度有用，因为它认为文本在同一行。它不考虑行之间的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T02:00:14.033

我编写了一个自定义的 appDelegate 方法，我可以在应用程序的多个位置调用该方法以实现多种用途。方便确定高度以完美适合视图中的文本、自定义单元格高度、具有动态文本数据的表格行高以及 textViews 等...

* * *

1.  它非常灵活，您可以轻松确定任何文本需要在屏幕、容器或视图中完全显示的“感知”高度。

2.  获得结果后，您可以将其与 textView 高度的大小进行比较，如...。

3.  请记住，TextView 的高度和 TextView 的 textContainer 高度之间有一点缓冲。非常小，但您可以通过发送比您的 (TextView.frame.size.height -3) 略小的 MinHeight 来进行调整。

4.  如果您还需要它，您还可以使用可选的填充在其他尺寸上给自己一个小缓冲，这将返回一个更大的容器。

5.  如果您使用自定义字体，请使用新变量进行补偿并考虑到这一点，但按原样，这对系统字体非常有用。

* * *

**示例逻辑：**

```
//Logic Example:
if([appDelegate calculateTextHeight:@"Your_String_Passed_In_Here"] > textView.frame.size.height) {

    //Text will exceed Height of TextView and require scroll.

}else {
    //Text is within the TextView without need to scroll. 
} 
```

* * *

**方法：**

```
-(NSInteger)calculateTextHeight:(NSString *)text:(NSInteger)FontSize:(NSInteger)MaxWidth:(NSInteger)MinHeight:(NSInteger)optionalHeightPadding {

    //Determine the Size based on the Inputs:
    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FontSize] constrainedToSize:CGSizeMake(MaxWidth, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];

    //Add Optional Padding:
    int calH = size.height + optionalHeightPadding;

    //Determine if larger than Min:
    if (calH > MinHeight) {
        return size.height + optionalHeightPadding;
    }

    //Return Min
    return MinHeight;
} 
```

* * *

**注意提醒：** 我曾经使用*UILineBreakModeWordWrap*，但它在 iOS 6 中已被弃用，请改用*NSLineBreakByWordWrapping*。

# eclipse - 在 pom.xml 中为 Tomcat 7 设置 Servlet / JSP jar

> ID：13982955
> 
> 赞同：3
> 
> 时间：2012-12-21T01:09:57.610
> 
> 标签：eclipse, tomcat, maven, servlets

我正在使用 JDK 1.6、Maven 2.2.1、Tomcat 7 和 Eclipse Juno（企业版）。

尝试导入 javax.servlet.* 等包时；Eclipse 抱怨它的类路径（构建路径）中没有它。

所以，我所做的是在我的 pom.xml 文件中包含以下依赖项：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.3</version>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.0</version>
</dependency> 
```

在tomcat服务器启动期间：

```
INFO: Deploying web application archive C:\DevTools\tomcat\apache-tomcat-7.0.32\webapps\myapp.war
Dec 20, 2012 4:55:41 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\DevTools\tomcat\apache-tomcat-7.0.32\webapps\myapp\WEB-INF\lib\servlet-api-2.3.jar)
 - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

为什么要记录此消息？

此外，我似乎无法在 maven 存储库中找到 servlet-api 3.0 或 jsp 2.2 的正确版本

[http://mvnrepository.com/](http://mvnrepository.com/)

请帮助我...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T02:47:32.620

It is the responsibility of the web application container to provide both the Servlet/JSP API and implementation files. With your current Maven setup you are causing these library files to be bundled in your app, which consequently causes the class loader problems you are seeing in your log.

> When trying to import packages such as javax.servlet.*; Eclipse complained that it does not have it inside its classpath (build path).

Yes, you need the API libraries in your classpath in order to compile code that depends on them. You want to include these libraries on your *build* classpath, while at the same time not including them in the final deployable. You do this with Maven by identifying the `scope` of the dependent libraries as `provided`. Which basically means "these libraries are needed for compilation, but will eventually be provided by the app container, so don't actually include them in the deployable".

> Also, I can't seem to find the right versions for servlet-api 3.0 or jsp 2.2 in the maven repository

The Servlet 3.0 and JSP 2.2 API's have been bundled in the common JavaEE Web API. This is the dependency that you need to specify in your POM. Illustrated:

```
<dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T01:50:55.077

Tomcat 带有servet 和jsp jars。因此，您希望将它们从您的战争文件中排除。这可以通过指定[提供](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)的范围来完成。

添加`<scope>provided</scope>`到两个依赖项并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T12:34:56.083

您不应该将这些 JSP 和 Servlet 依赖项添加到您的项目中。J2EE 规范的实例化（例如 servlet）应该由应用程序服务器的运行时提供。

在 Eclipse 中，为您的应用程序服务器添加服务器运行时。右键单击项目并选择属性。然后构建路径 > 添加库 > 服务器运行时。

# c# - DLL 中的 SqlConnection 对象在实例化时抛出“不支持关键字”异常

> ID：13982956
> 
> 赞同：3
> 
> 时间：2012-12-21T01:09:59.833
> 
> 标签：c#, sql, dll, connection-string

我编写了一个 .dll 用于连接 SQL 数据库。当代码只是另一个 Visual Studio 项目中的类文件时，它可以正常工作。但是，现在我试图将它用作另一个中的 .dll，这一行会引发未处理的“ArgumentExcpetion”：

```
 SqlConnection sqlConn = new SqlConnection(connString); 
```

让我明白的是异常消息框中的文本。

```
Keyword not supported: '<comp name>\sqlexpress;initial catalog'. 
```

这与我在另一个程序中用于连接到本地计算机上的 SQL 数据库的连接字符串相同。我在 VS 2010 中调试时可以查看“Locals”窗口，并且连接字符串看起来与我使用过的其他项目中的完全相同（实际上，我只是复制并粘贴了它）

```
"<comp name>\\SQLEXPRESS;initial catalog=AgentResources;integrated security=True;MultipleActiveResultSets=true" 
```

这是实例化对象和添加连接字符串的方式。

```
BatchRecord record = new BatchRecord("DEV", "TEST");

record.ConnString = "<comp name>\\SQLEXPRESS;initial catalog=AgentResources;integrated security=True;MultipleActiveResultSets=true"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:17:03.577

该连接字符串无效。它应该是

```
 Data Source=<comp name>\\SQLEXPRESS; 
```

# asp.net-mvc - ReferentialConstraint 中的依赖属性映射到存储生成的列。列：'FeeID'

> ID：13982957
> 
> 赞同：1
> 
> 时间：2012-12-21T01:10:07.797
> 
> 标签：asp.net-mvc, vb.net, entity-framework, entity-framework-5

我收到错误：

> {“ReferentialConstraint 中的依赖属性映射到商店生成的列。列：'FeeID'。”}

设置：我手动创建了数据库（SQL Server 2012 和 SSMS）

我没有 edmx 文件

我有两个类`FeeMetaData`和`Fee`，它们映射到数据库中的两个表（`PFD.FeeMetaData`和`PFD.Fees`）

## 数据库结构

```
FeeMetadata
------------ 
FeeID  BIGINT  IDENTITY(1,1) PRIMARY KEY 
Something VARCHAR(25) NOT NULL

Fees
------------ 
FeeID  BIGINT  PRIMARY KEY NOT NULL
FeeBatchID  BIGINT NOT NULL
PersonID BIGINT 
Amount DECIMAL(18,2) NOT NULL
DueDate DATE NOT NULL 
```

FeeMetadata.FeeID 和 Fees.FeeID 之间存在一对一的关系

## 类结构

```
Imports System.ComponentModel.DataAnnotations
Imports System.ComponentModel.DataAnnotations.Schema
Namespace PFD
    <Table("FeeMetadata", Schema:="PFD")>
    Public Class FeeMetadata

        Public Sub New()
            MyBase.New()
        End Sub

        Public Sub New(ByVal tFee As SOACourt_v1)
            Me.New()
            Me.PfdFee = New PFD.Fee(tFee)
        End Sub

        <Key>
        <DatabaseGenerated(DatabaseGeneratedOption.Identity)>
        Public Property FeeID As Int64

        Public Property Something As String

        <ForeignKey("FeeID")>
        Public Property PfdFee As PFD.Fee
    End Class
End Namespace

Namespace PFD
<Table("Fees", Schema:="PFD")>
Public Class Fee
    Public Sub New()
        MyBase.New()
    End Sub

    Public Sub New(ByVal tFee As SOACourt_v1)
        Me.New()
        Me.Amount = tFee.Amount
        Me.DueDate = tFee.DueDate
    End Sub

    <DatabaseGenerated(DatabaseGeneratedOption.None)>
    Public Property FeeID As Int64

    Public Property FeeBatchID As Int64 = 0

    Public Property PersonID As Int64? = 0

    Public Property Amount As Decimal

    Public Property DueDate As Date = Date.Today
End Class
End Namespace 
```

## 用法

```
Using tContext As FeesContext = New FeesContext
    For Each tFee As SOACourt_v1 In tFees
        tContext.FeeMetadata.Add(New PFD.FeeMetadata(tFee))
    Next
    tContext.SaveChanges()     '  <---- Error occurs here
End Using 
```

关于导致错误的任何想法：

> {“ReferentialConstraint 中的依赖属性映射到商店生成的列。列：'FeeID'。”}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T02:02:24.380

虽然我还没有使用 EF 代码优先，但如果您在模型图中错误地设置实体关系，这看起来与您遇到的错误相同。特别是，在我看来，您的外键设置是反向的。

该错误是因为您告诉 Entity Framework 将该字段用作and`FeeId`之间的外键，但该字段是在类中自动生成的。这几乎肯定不是你打算做的。`FeeMetaData``Fee``FeeMetaData`

如果`Fee`是主表并且`FeeMetaData`有外键，那么你应该把标识字段放在`Fee`. 如果表是相反的，那么你的类是倒退的，你应该定义`Fee`一个`FeeMetaData`具有`FeeId`作为外键的属性。

# sql - 如何识别查询结果中导致致命错误的行？

> ID：13982963
> 
> 赞同：1
> 
> 时间：2012-12-21T01:10:59.210
> 
> 标签：sql, sql-server, tsql

我的查询运行了一段时间（输出行）然后停止，出错：

> 消息 8115，级别 16，状态 8，第 5 行将 int 转换为数据类型 numeric 的算术溢出错误。

这并没有告诉我哪一行（由 FROM 子句形成的行集 - 不是 SQL 查询中的哪一行）导致了这个错误。

我使用了旧技巧去查询选项并取消选中“set arithabort”和“set ansi_warnings”，这会导致查询继续运行并在有问题的单元格中放置一个 NULL。

问题是结果集可以在很多地方正确地有一个 NULL，所以这没有帮助。（并且错误消息同样含糊不清：“发生算术溢出。”）

我绞尽脑汁想弄清楚这一点——我曾想过使用游标或循环，但每个都有问题。

当你遇到这样的错误时，你们会怎么做，以便找出是哪一行导致的？

更新：感谢以下有用的建议；他们很棒而且工作得很好。但是，在解决这个问题之前（这个查询中有很多列），我只想查看导致错误的行。幸运的是，我猜到查询结果集中的最后一行是错误发生之前的那一行。当我进行查询以查看该行正下方的数据（当然减去计算字段）时，我立即注意到其中一个 INT 字段中的值大于正常值。

这似乎是在编写如下查询的麻烦之前的一个很好的第一步 - 但是谢谢，我会保存这些，并且稍后在查看有问题的数据时问题不是那么明显时肯定会需要它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:06:24.813

我们真的需要看看你的 SQL。你在使用 UNION 吗？第一行通常确定数据类型。你要插入另一个表吗？（就像我在下面假设的那样？）

将 SELECT 部分更改为 MAX 每个 INT 类型的列，删除此测试的所有其他列。答案可能很明显。

```
SELECT MAX(myFirstIntColumn) myFirstIntColumn,
MAX(mySecondIntColumn)
...
FROM same 
```

如果答案不明显，请查看您尝试插入的列，至少其中一个最大值不适合其中一个目标。您可以通过使用您尝试插入的数据类型测试获得的每个最大值来确认这一点。就像是：

```
 SELECT CAST(1122399 AS DECIMAL(7,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:58:47.350

> 消息 8115，级别 16，状态 8，第 5 行将 int 转换为数据类型 numeric 的算术溢出错误。

从整数到数字，我能想到的唯一错误来自小数位前预置位数的溢出，例如

```
select cast(123456 as numeric(7,2)) 
```

(7,2) 共 7 位，小数点后 2 位，小数位前 5 位。

对于这样的记录，您可以使用以下类型的查询来查找罪犯：

```
select ...
  from (... table(s) ...)
 where len(left(replace(cast(col1 as varchar),'.',space(100)),100)) > 5
   and col1 like '%.%' 
```

这将清除数字（有小数）位的列，以及小数位左侧超过 5 位的列。

# javascript - 从 Google 自定义搜索下载 Google 图片

> ID：13982966
> 
> 赞同：0
> 
> 时间：2012-12-21T01:11:08.640
> 
> 标签：javascript, python, json, web-applications

我有一个仅用于图像的自定义 Google 搜索引擎。我想这样做，以便当用户单击其中一个图像时，单击的图像会下载到服务器。

我该怎么做呢？

我听说您可以使用 Javascript 或 JSON 来执行此操作，但我不确定如何操作。

尝试了一些 Javascript - 但它没有用 - 这是我第一次制作网络应用程序，所以我对这种类型的东西不熟悉

**如果您不知道该怎么做-请至少给我一些提示，说明您认为可能是什么解决方案**

* * *

更新

基本上我想保存图像，以便我可以在我的网站的其他地方显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T11:08:47.500

试试这个可能对你有帮助。这里的图像将被下载到指定的位置而不是服务器。

```
<div id="download">
    <img src="http://www.edudemic.com/wp-content/uploads/2014/05/google.jpg" id="image" />
    <a class="http://www.edudemic.com/wp-content/uploads/2014/05/google.jpg" download="smile.jpg">Download image</a>
</div> 
```

# java - Java Iterables 使用每个 Foreach 构造“重置”迭代器

> ID：13982967
> 
> 赞同：6
> 
> 时间：2012-12-21T01:11:26.220
> 
> 标签：java, arraylist, foreach, iterator, iterable

我相信我已经注意到，对于某些 Iterables（例如这个[IterableString 类](http://www.java2s.com/Tutorial/Java/0140__Collections/CreatingIterableObjectsusingaforeachforlooponanIterableobject.htm)），要么创建了一个新的迭代器，要么迭代器以某种方式在每个新的 foreach 构造中重置为开头，但这似乎不会发生在其他 Iterables 中......

例如，如果您运行以下代码：

```
 import java.util.ArrayList;

public class test {

  public static void main(String args[]) {
    IterableString x = new IterableString("ONCE");

    System.out.println("***");
    for (char ch : x){
      System.out.println(ch);
    }

    System.out.println("***");
    for (char ch : x){
        System.out.println(ch);
     }

    ArrayList y = new  ArrayList();
    y.add('T');
    y.add('W');
    y.add('I');
    y.add('C');
    y.add('E');

    System.out.println("***");
    for (char ch : y){
        System.out.println(ch);
     }

    System.out.println("***");
    for (char ch : y){
        System.out.println(ch);
     }

    System.out.println();
  }
} 
```

您将看到以下输出：

```
 ***
O
N
C
E
***
***
T
W
I
C
E
***
T
W
I
C
E 
```

带有 x 的第二个 foreach 循环似乎从它停止的地方开始（在最后一项之后），但是带有 y 的第二个 foreach 循环似乎从它第一次开始的地方（在第一项）开始。为什么会这样？我们如何才能让 Iterables 表现得像后者（ArrayLists）？

更具体地说，我们将如何修改像 IterableString 这样的类以像 ArrayList 一样工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:26:06.110

该类`IterableString`（由您的[链接文章](http://www.java2s.com/Tutorial/Java/0140__Collections/CreatingIterableObjectsusingaforeachforlooponanIterableobject.htm)定义）既是`Iterable`又是`Iterator`。这是否是一个好主意是有争议的——但一个简单的解决方法是：

```
 // This method implements Iterable.
  public Iterator<Character> iterator() {
    return new IterableString(this.str);
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T01:25:56.347

An`ArrayList`能够在 java foreach 循环中被迭代，因为它`Iterable`在 Java 中实现了接口。该`Iterable`接口概述了一个`iterator`返回集合迭代器的方法。在 Java 中使用 foreach 循环在后台使用此方法中的迭代器。每次创建新的 foreach 循环时，`ArrayList`都会提供一个新的迭代器。

如果要创建一个可以在 Java 中使用 foreach 循环进行迭代的类，则需要实现`Iterable`接口并定义如何迭代集合。

# groovy - Kaleo 工作流程，groovy 代码出错

> ID：13982969
> 
> 赞同：1
> 
> 时间：2012-12-21T01:11:32.567
> 
> 标签：groovy, content-management-system, liferay

几乎可以正常工作了，但有时它会抛出异常（请参阅stacktrace），谁能告诉我为什么！我的工作流定义有一些常规代码，此代码用于连接到数据库并根据分类属性确定网络内容的下一步。这是 Liferay 6.1 ga 1，kaleo 工作流定义代码（条件节点）：

```
<script> <![CDATA[
        import groovy.sql.Sql;
        import java.util.List;
        import com.liferay.portal.kernel.util.GetterUtil;
        import com.liferay.portal.kernel.workflow.WorkflowConstants;
        import com.liferay.portal.kernel.workflow.WorkflowHandler;
        import com.liferay.portal.kernel.workflow.WorkflowHandlerRegistryUtil;
        import com.liferay.portlet.asset.model.AssetCategory;
        import com.liferay.portlet.asset.model.AssetEntry;
        import com.liferay.portlet.asset.model.AssetRenderer;
        import com.liferay.portlet.asset.model.AssetRendererFactory;
        import com.liferay.portlet.asset.service.AssetEntryLocalServiceUtil;
        import com.liferay.portal.model.WorkflowInstanceLink;
        import com.liferay.portal.service.WorkflowInstanceLinkLocalServiceUtil;

        try{
            String className = (String)workflowContext.get(WorkflowConstants.CONTEXT_ENTRY_CLASS_NAME);
            WorkflowHandler workflowHandler = WorkflowHandlerRegistryUtil.getWorkflowHandler(className);
            AssetRendererFactory assetRendererFactory = workflowHandler.getAssetRendererFactory();

            long classPK = GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_ENTRY_CLASS_PK));
            long companyId = GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
            long groupId = GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_GROUP_ID)); 
            AssetRenderer assetRenderer = workflowHandler.getAssetRenderer(classPK);
            AssetEntry assetEntry = assetRendererFactory.getAssetEntry(assetRendererFactory.getClassName(), assetRenderer.getClassPK());
            List<AssetCategory> assetCategories = assetEntry.getCategories();

            WorkflowInstanceLink workflowInstanceLink = WorkflowInstanceLinkLocalServiceUtil.getWorkflowInstanceLink(companyId, groupId, className, classPK);
            long instanceId = workflowInstanceLink.getWorkflowInstanceId(); 

            sql = Sql.newInstance('jdbc:postgresql://localhost:5432/CGATE1.1_TNMT_KG', 'postgres', '1234567', 'org.postgresql.Driver');
            long cateId;
            String[] nextTransitionName;
            HashMap<String, Object> context = new HashMap<String, Object>();

            for (AssetCategory assetCategory : assetCategories) {
                cateId = assetCategory.getCategoryId();
                row = sql.firstRow("SELECT cchc_fun_cmsworkflow_nexttask(?,?) as nexttask", [cateId, instanceId]);
                if(row.nexttask != null){                       
                    String nextTaskStr = row.nexttask;  

                    if(nextTaskStr.equalsIgnoreCase("Done")){
                        returnValue = "Duyệt"; return;
                    }

                    context.put("roleprefix", nextTaskStr);
                    serviceContext.setAttribute("context", context);
                    nextTransitionName = nextTaskStr.split('_');
                    if(nextTransitionName[0].equalsIgnoreCase("BT")){
                        returnValue = "Biên tập"; return;
                    }else if(nextTransitionName[0].equalsIgnoreCase("LD")){ 
                        returnValue = "Lãnh đạo"; return;
                    }else if(nextTransitionName[0].equalsIgnoreCase("XB")){
                        returnValue = "Xuất bản";
                        System.out.println("Xuất bản");
                        return;
                    }
                }
            }
        }catch(Exception ex){
                returnValue ="Duyệt"; return;
        }
        returnValue = "Hủy";
        ]]> </script>
    <script-language>groovy</script-language> 
```

堆栈跟踪：

```
 07:58:39,150 ERROR [ParallelDestination:109] Unable to process message {destinationName=liferay/kaleo_graph_walker, response=null, responseDestinationName=null, responseId=null, payload=com.liferay.portal.workflow.kaleo.runtime.graph.PathElement@161a2f1, values={principalPassword=null, principalName=11322, companyId=1}}
com.liferay.portal.kernel.messaging.MessageListenerException: java.lang.reflect.UndeclaredThrowableException
    at com.liferay.portal.kernel.messaging.BaseMessageListener.receive(BaseMessageListener.java:31)
    at com.liferay.portal.kernel.messaging.InvokerMessageListener.receive(InvokerMessageListener.java:65)
    at com.liferay.portal.kernel.messaging.ParallelDestination$1.run(ParallelDestination.java:106)
    at com.liferay.portal.kernel.concurrent.ThreadPoolExecutor$WorkerTask._runTask(ThreadPoolExecutor.java:669)
    at com.liferay.portal.kernel.concurrent.ThreadPoolExecutor$WorkerTask.run(ThreadPoolExecutor.java:580)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.reflect.UndeclaredThrowableException
    at $Proxy293.eval(Unknown Source)
    at com.liferay.portal.kernel.scripting.ScriptingUtil.eval(ScriptingUtil.java:40)
    at com.liferay.portal.workflow.kaleo.runtime.condition.ScriptingConditionEvaluator.evaluate(ScriptingConditionEvaluator.java:40)
    at com.liferay.portal.workflow.kaleo.runtime.condition.MultiLanguageConditionEvaluator.evaluate(MultiLanguageConditionEvaluator.java:47)
    at com.liferay.portal.workflow.kaleo.runtime.node.ConditionNodeExecutor.doExecute(ConditionNodeExecutor.java:65)
    at com.liferay.portal.workflow.kaleo.runtime.node.BaseNodeExecutor.execute(BaseNodeExecutor.java:78)
    at com.liferay.portal.workflow.kaleo.runtime.graph.DefaultGraphWalker.follow(DefaultGraphWalker.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:320)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
    at com.liferay.portal.dao.jdbc.aop.DynamicDataSourceTransactionInterceptor.invoke(DynamicDataSourceTransactionInterceptor.java:44)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy462.follow(Unknown Source)
    at com.liferay.portal.workflow.kaleo.runtime.graph.messaging.PathElementMessageListener.doReceive(PathElementMessageListener.java:54)
    at com.liferay.portal.kernel.messaging.BaseMessageListener.receive(BaseMessageListener.java:25)
    ... 5 more
Caused by: java.lang.Exception: java.lang.VerifyError: (class: org/codehaus/groovy/runtime/ArrayUtil, method: createArray signature: ()[Ljava/lang/Object;) Illegal type in constant pool
    at com.liferay.portal.kernel.messaging.proxy.ProxyRequest.execute(ProxyRequest.java:66)
    at com.liferay.portal.kernel.messaging.proxy.ProxyMessageListener.receive(ProxyMessageListener.java:50)
    at com.liferay.portal.kernel.messaging.InvokerMessageListener.receive(InvokerMessageListener.java:65)
    at com.liferay.portal.kernel.messaging.SynchronousDestination.send(SynchronousDestination.java:39)
    at com.liferay.portal.kernel.messaging.sender.DirectSynchronousMessageSender.send(DirectSynchronousMessageSender.java:60)
    at com.liferay.portal.kernel.messaging.sender.DefaultSingleDestinationSynchronousMessageSender.send(DefaultSingleDestinationSynchronousMessageSender.java:41)
    at com.liferay.portal.messaging.proxy.MessagingProxyAdvice.doInvokeSynchronous(MessagingProxyAdvice.java:106)
    at com.liferay.portal.messaging.proxy.MessagingProxyAdvice.invoke(MessagingProxyAdvice.java:60)
    at sun.reflect.GeneratedMethodAccessor1870.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    ... 28 more
Caused by: java.lang.VerifyError: (class: org/codehaus/groovy/runtime/ArrayUtil, method: createArray signature: ()[Ljava/lang/Object;) Illegal type in constant pool
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:210)
    at org.codehaus.groovy.ast.builder.AstBuilderTransformation.visit(AstBuilderTransformation.groovy:62)
    at org.codehaus.groovy.transform.ASTTransformationVisitor$3.call(ASTTransformationVisitor.java:302)
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:814)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:511)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:487)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:464)
    at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:306)
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:287)
    at groovy.lang.GroovyShell.parseClass(GroovyShell.java:727)
    at groovy.lang.GroovyShell.parse(GroovyShell.java:739)
    at groovy.lang.GroovyShell.parse(GroovyShell.java:766)
    at groovy.lang.GroovyShell.parse(GroovyShell.java:757)
    at com.liferay.portal.scripting.groovy.GroovyExecutor.getCompiledScript(GroovyExecutor.java:90)
    at com.liferay.portal.scripting.groovy.GroovyExecutor.eval(GroovyExecutor.java:51)
    at com.liferay.portal.scripting.ScriptingImpl.eval(ScriptingImpl.java:95)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.liferay.portal.kernel.util.MethodHandler.invoke(MethodHandler.java:83)
    at com.liferay.portal.kernel.messaging.proxy.ProxyRequest.execute(ProxyRequest.java:57)
    ... 45 more 
```

# javascript - 是否可以在 IE8 中运行一些 HTML5 输入类型？

> ID：13982973
> 
> 赞同：8
> 
> 时间：2012-12-21T01:12:05.660
> 
> 标签：javascript, html, internet-explorer, cross-browser, html-input

是否可以使用任何库在 IE8 中运行某些 HTML5 输入类型？
例如范围。

```
Points: <input type="range" name="points" min="1" max="10">
<input type="submit" value="send"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:24:00.297

IE8 不支持`<input type="range">`。在旧浏览器中实现这一点的最无缝方式是检测支持并在需要时使用“polyfills”。polyfill 旨在添加对旧浏览器的支持，通常使用一些 JavaScript 来尝试模拟本机行为。

[这个页面](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)有一个很棒的 polyfills 列表。（Modernizr 是检测对这类事物的支持的好方法。）您会在该列表中找到各种输入类型的 polyfill。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T01:40:47.770

您可以使用 modernizr 来检查您的浏览器是否支持 HTML5。
你可以使用它在 IE8 中工作的 Jquery UI Slider

检查此页面： http: [//jqueryui.com/slider/](http://jqueryui.com/slider/)
演示： http: [//jsbin.com/eduren/1/edit](http://jsbin.com/eduren/1/edit)

读取滑块值/百分比值：
var val = $('#slider').slider("option", "value");

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T01:21:02.720

在我的脑海中，我想到了 Chrome 框架，这是一个将 Chrome 引擎置于 Trident 引擎盖下的谷歌项目。

网址：[http ://www.google.com/chromeframe](http://www.google.com/chromeframe)

我自己从来没有试过。当浏览器遇到错误时，我们会修复它或找到解决方法。我不是附加组件的忠实粉丝，尤其是从管理的角度来看。

另一种选择是使用[modernizr](http://modernizr.com/)库来检测浏览器功能并找到解决方法。总有一些 hacky 方法可以让您的出路。使用[html5 shiv](http://code.google.com/p/html5shiv/)可能是找到出路的一种方式。这是我在处理 IE8 时更喜欢的第二个选项。问候。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T01:23:22.170

ie8 会将所有“html5”输入类型呈现为文本。但是，您可以使用 JavaScript 来定位这些类型，使用类似的东西

```
$('[type=range]').slider() //insert your favorite library here... 
```

我知道它没有标记 jquery，但我认为这个例子仍然很清楚

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-23T15:37:22.373

以下代码创建一个范围输入，然后检查浏览器是否是不支持范围输入的 Internet Explorer 版本。如果是这种情况，它会从 div 中创建一个范围输入，并使用一些 Javascript 代码使其具有交互性。

```
<input name="range" id="range" type="range" min="1" max="10" />
<!--[if lt IE 10]>
  <div id="range_ie" style="position:relative; width:255px; height:15px; font-size:0px; cursor:default" onselectstart="return false">
    <div style="position:absolute; left:0px; top:5px; width:100%; height:30%; border-left:1px solid gray; border-top:1px solid gray; border-right:1px solid white; border-bottom:1px solid white; background:silver"></div>
    <div id="slider" style="position:absolute; left:0px; top:0px; width:5px; height:100%; border:1px solid gray; background:#EBEBEB; font-size:15px" onmousedown="document.onmousemove=changevalue">&nbsp;&nbsp;</div>
  </div>
  <script type="text/javascript">
    //Hide the <input> element, otherwise older versions of IE will just display it as a text input
    document.getElementById("range").style.display = "none";

    //If the user releases the mouse after changing the value of the range input, it should stop changing
    document.body.onmouseup = function() {
      document.onmousemove = function(){};
    };

    function changevalue(e) {
      //Get the value of the input from the position of the cursor
      range.value = ((navigator.appName.substring(0, 3) == "Net") ? e.pageX : event.x) * (range.max - range.min) / (document.getElementById("range_ie").style.width.substring(0, document.getElementById("range_ie").style.width.search("px"))) + Number(range.min);

      //Check that the value isn't out of bounds
      if (Number(range.value) > Number(range.max)) {
        range.value = range.max;
      }
      if (Number(range.value) < Number(range.min)) {
        range.value = range.min;
      }

      //Move the slider to its new position
      document.getElementById("slider").style.left = (range.value - range.min) * Number(document.getElementById("range_ie").style.width.substring(0, document.getElementById("range_ie").style.width.search("px"))) / (Number(range.max) - Number(range.min)) + "px";
    }

    //If we click on the slider just like that, it should move
    document.getElementById("range_ie").onclick = changevalue;
  </script>
<![endif]-->
```

# cuda - cudaMalloc 会同步主机和设备吗？

> ID：13982975
> 
> 赞同：8
> 
> 时间：2012-12-21T01:12:24.467
> 
> 标签：cuda

我知道 cudaMemcpy 会同步主机和设备，但是 cudaMalloc 或 cudaFree 怎么样？

基本上我想在多个 GPU 设备上异步内存分配/复制和内核执行，我的代码的简化版本是这样的：

```
void wrapper_kernel(const int &ngpu, const float * const &data)
{
 cudaSetDevice(ngpu);
 cudaMalloc(...);
 cudaMemcpyAsync(...);
 kernels<<<...>>>(...);
 cudaMemcpyAsync(...);
 some host codes;
}

int main()
{
 const int NGPU=3;
 static float *data[NGPU];
 for (int i=0; i<NGPU; i++) wrapper_kernel(i,data[i]);
 cudaDeviceSynchronize();
 some host codes;
} 
```

但是，GPU 是按顺序运行的，找不到原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:26:37.893

尝试`cudaStream_t`为每个 GPU 使用。下面是取自 CUDA 示例的 simpleMultiGPU.cu。

```
 //Solver config                                                          
TGPUplan      plan[MAX_GPU_COUNT];
//GPU reduction results                                                                                   
float     h_SumGPU[MAX_GPU_COUNT];

....memory init....

//Create streams for issuing GPU command asynchronously and allocate memory (GPU and System page-locked)                             for (i = 0; i < GPU_N; i++)
{
    checkCudaErrors(cudaSetDevice(i));
    checkCudaErrors(cudaStreamCreate(&plan[i].stream));
    //Allocate memory                                                                                                                    checkCudaErrors(cudaMalloc((void **)&plan[i].d_Data, plan[i].dataN * sizeof(float)));
    checkCudaErrors(cudaMalloc((void **)&plan[i].d_Sum, ACCUM_N * sizeof(float)));
    checkCudaErrors(cudaMallocHost((void **)&plan[i].h_Sum_from_device, ACCUM_N * sizeof(float)));
    checkCudaErrors(cudaMallocHost((void **)&plan[i].h_Data, plan[i].dataN * sizeof(float)));

    for (j = 0; j < plan[i].dataN; j++)
    {
        plan[i].h_Data[j] = (float)rand() / (float)RAND_MAX;
    }
}

....kernel, memory copyback.... 
```

这里[有](http://developer.download.nvidia.com/CUDA/training/cuda_webinars_multi_gpu.pdf)一些使用多 GPU 的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-07T01:37:02.810

您看到 GPU 操作按顺序运行的最可能原因`cudaMalloc`是异步的，但`cudaFree`不是（只需在 CPU 线程上排队并在一系列操作结束时发送空闲请求）。

您需要使用固定内存进行从 CPU 内存到 GPU 内存的异步传输，Cuda 提供了两个实用函数`cudaMallocHost`和`cudaFreeHost`（而不是`malloc`和`free`）。顺便说一句，还有`cudaHostAlloc`更精细的控制，请阅读 CUDA 手册了解详细信息。

# batch-file - 如何通过asp.net schtasks将参数传递给bat文件

> ID：13982981
> 
> 赞同：3
> 
> 时间：2012-12-21T01:14:00.473
> 
> 标签：batch-file, process.start, windows-task-scheduler

我正在尝试使用 Visual Studios 2005 中的 Windows Process.start 服务来调用调用 bat 文件的 Windows 任务调度程序 (schtasks)。该过程工作正常，除了 bat 文件接受参数，但是当我尝试将参数传递到 bat 文件时它不起作用。

```
 public string RunSchtasks(string MachineName) 
{
    ErrorMessage = null;
    Process myProcess = new Process();
    ProcessStartInfo myProcessStartInfo = new ProcessStartInfo("schtasks");
    myProcessStartInfo.UseShellExecute = false;
    myProcessStartInfo.RedirectStandardError = true;
    myProcessStartInfo.RedirectStandardOutput = true;
    myProcessStartInfo.Arguments = "/run /s Machinename /tn mytest ParameterToPass2Bat"; 

   myProcess.StartInfo = myProcessStartInfo;

    try
    {
        myProcess.Start();
        StreamReader myStreamReader1 = myProcess.StandardOutput;
        string QueryResult = myProcess.StandardOutput.ReadToEnd();
    } 
```

我的代码在没有 ParameterToPass2Bat 部分的情况下运行良好。如果我想将此参数传递到 bat 文件中，它不会接受它。有谁知道如何做到这一点，以便 bat 文件通过 Schtasks 接收参数？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:24:45.577

[schtasks.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)没有任何用于将参数传递到计划任务的命令行功能。一种可能的方法是将参数文本保存在其自己的（临时）bat 文件中，其中包含经过特殊设计的内容以将其设置为环境变量。然后您所要做的就是从计划任务 bat 文件中调用参数 bat 文件，并设置环境变量。

参数 bat 文件的内容如下所示：

```
set parm=ParameterToPass2 
```

然后，您的计划任务 bat 文件的内容将执行参数 bat 文件：

```
C:\wherever\argument.bat 
```

# java - 很遗憾 已经停止。Android 石头剪刀布游戏

> ID：13982982
> 
> 赞同：0
> 
> 时间：2012-12-21T01:14:07.057
> 
> 标签：java, android

好的，所以我正在为 android 制作一个简单的石头、纸、剪刀游戏。到目前为止，我有以下内容：

```
package com.example.digitoolz;

import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageButton;
import android.widget.Toast;

public class GameActivity extends Activity {
    private int userChoice;
    private int compChoice;

    private int userScore = 0;
    private int compScore = 0;

    private Toast winnerToast;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game_button);

        ImageButton rockbutton = (ImageButton)findViewById(R.id.rock_button);
        rockbutton.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){
                userChoice = 0;         
                compChoiceSelector();
                winSelect();
            }
        });

        ImageButton paperbutton = (ImageButton)findViewById(R.id.paper_button);
        paperbutton.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){
                userChoice = 1;         
                compChoiceSelector();
                winSelect();
            }
        });

        ImageButton scissorsbutton = (ImageButton)findViewById(R.id.scissors_button);
        scissorsbutton.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){
                userChoice = 2;     
                compChoiceSelector();
                winSelect();
            }
        });
    }   

        public void compChoiceSelector(){
            Random ran = new Random();
            compChoice = ran.nextInt(0) + 3;
        }

        public void winSelect(){
            if(userChoice == compChoice){
                winnerToast.setText("It's a Draw!");
                }else if (userChoice == 0 && compChoice == 1){
                    winnerToast.setText("Paper beats Rock! You Lose!");
                    compScore++;
                }else if (userChoice == 0 && compChoice == 2){
                    winnerToast.setText("Rock beats Scissorcs! You Win!");
                    userScore++;
                }else if (userChoice == 1 && compChoice == 0){
                    winnerToast.setText("Paper beats Rock! You Win!");
                    userScore++;
                }else if (userChoice == 1 && compChoice == 2){
                    winnerToast.setText("Scissors beats paper! You Lose!");
                    compScore++;
                }else if (userChoice == 2 && compChoice == 0){
                    winnerToast.setText("Rock beats scissors! You Lose!");
                    compScore++;
                }else if (userChoice == 2 && compChoice == 1){
                    winnerToast.setText("Scissors beats paper... You Win.");
                    userScore++;
            }else{
                    winnerToast.setText("");
            }
        }
    } 
```

基本上，当谈到按下 3 个按钮（石头、纸或剪刀）中的任何一个时。我收到一个弹出窗口说“不幸的是 digitoolz 已停止工作。

我不知道为什么会这样！？请有人可以帮助我！

提前感谢大家！:)

```
12-21 01:02:19.711: D/AndroidRuntime(573): Shutting down VM
12-21 01:02:19.721: W/dalvikvm(573): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-21 01:02:19.782: E/AndroidRuntime(573): FATAL EXCEPTION: main
12-21 01:02:19.782: E/AndroidRuntime(573): java.lang.IllegalArgumentException
12-21 01:02:19.782: E/AndroidRuntime(573):  at java.util.Random.nextInt(Random.java:187)
12-21 01:02:19.782: E/AndroidRuntime(573):  at com.example.digitoolz.GameActivity.compChoiceSelector(GameActivity.java:59)
12-21 01:02:19.782: E/AndroidRuntime(573):  at com.example.digitoolz.GameActivity$2.onClick(GameActivity.java:40)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.view.View.performClick(View.java:3480)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.view.View$PerformClick.run(View.java:13983)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.os.Handler.handleCallback(Handler.java:605)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.os.Looper.loop(Looper.java:137)
12-21 01:02:19.782: E/AndroidRuntime(573):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-21 01:02:19.782: E/AndroidRuntime(573):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 01:02:19.782: E/AndroidRuntime(573):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 01:02:19.782: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-21 01:02:19.782: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-21 01:02:19.782: E/AndroidRuntime(573):  at dalvik.system.NativeStart.main(Native Method)
12-21 01:07:20.110: I/Process(573): Sending signal. PID: 573 SIG: 9 
```

新的Logcat：

```
12-21 02:33:17.920: D/AndroidRuntime(11568): Shutting down VM
12-21 02:33:17.920: W/dalvikvm(11568): threadid=1: thread exiting with uncaught exception (group=0x40abca08)
12-21 02:33:17.930: E/AndroidRuntime(11568): FATAL EXCEPTION: main
12-21 02:33:17.930: E/AndroidRuntime(11568): java.lang.RuntimeException: This Toast was not created with Toast.makeText()
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.widget.Toast.setText(Toast.java:277)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at com.example.digitoolz.GameActivity.winSelect(GameActivity.java:65)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at com.example.digitoolz.GameActivity$2.onClick(GameActivity.java:42)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.view.View.performClick(View.java:3538)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.view.View$PerformClick.run(View.java:14319)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.os.Handler.handleCallback(Handler.java:608)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.os.Looper.loop(Looper.java:156)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at android.app.ActivityThread.main(ActivityThread.java:5045)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at java.lang.reflect.Method.invokeNative(Native Method)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at java.lang.reflect.Method.invoke(Method.java:511)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-21 02:33:17.930: E/AndroidRuntime(11568):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:20:50.890

你的第一个问题是`nextInt()`需要一个大于 0 的数字。提供给`nextInt()`它的任何东西都会`<= 0`抛出`IllegalArgumentException`.

您的另一个问题可能是：您似乎没有实例化您的`winnerToast`. 它是全局的，但您的代码实际上从未执行过`winnerToast = new Toast(this);`您可能应该在您的方法中添加这行代码`onCreate()`以避免`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:25:41.123

正如您在[Random.nextInt(int)](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29)的文档中看到的那样，参数的值指定了 0 和参数之间的可用答案范围。您提供的 0 参数是无意义的，因此它会抱怨。

# python - sklearn.svm.SVC 没有给出稀疏数据集的支持向量索引？

> ID：13982983
> 
> 赞同：2
> 
> 时间：2012-12-21T01:14:13.710
> 
> 标签：python, machine-learning, libsvm, scikit-learn, scikits

sklearn.svm.SVC 没有给出稀疏数据集的支持向量索引。有什么技巧/方法可以获取 SV 的索引吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:34:36.983

恐怕不用去 cython 代码。这已经在待办事项列表上很久了。任何帮助将不胜感激。我认为应该不会太难。

# java - 当构造函数抛出未处理的异常时会发生什么

> ID：13982985
> 
> 赞同：9
> 
> 时间：2012-12-21T01:14:37.590
> 
> 标签：java, c++, memory-leaks

当构造函数抛出未处理的异常时会发生什么？对于 Java 和 C++？会不会有内存泄漏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T01:47:59.103

你问，

> “当构造函数抛出未处理的异常时会发生什么？对于 Java 和 C++？会不会有内存泄露？”

**未处理的异常**是没有关联处理程序的异常。

在 C++ 中，任何未处理的异常都会终止程序。在这种情况下堆栈是否被展开是未指定的，即成功构造的局部变量的析构函数可以根据编译器执行或不执行。从哪里抛出异常（例如在构造函数内部）是无关紧要的。

> **C++11 §15.3/9**：
> “如果没有找到匹配的处理程序，`std::terminate()` 则调用该函数；在此调用之前是否展开堆栈是`std::terminate()`实现定义的。”

Java中未处理的异常同样必然会终止程序，或者至少是当前线程，如果它不是主线程，但有保证的`finally`子句调用：

> **Java SE 7 语言规范 §11.3**：
> “如果找不到`catch` 可以处理异常的子句，则终止当前线程（遇到异常的线程）。在终止之前，所有 `finally`条款都被执行 […]”

由于程序终止，实际上程序本身没有内存泄漏，因为实际上操作系统会在进程之后进行清理。

但是，崩溃的程序可能会在磁盘上留下临时文件，并且可能会从服务器进程泄漏其他资源，包括这些服务器进程中的内存泄漏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T01:17:24.817

对于 Java：控制流返回给调用者，就像从常规方法抛出异常一样。没有内存泄漏（半构建的实例将被丢弃和垃圾收集）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T01:19:55.753

好吧，至少在 C++ 中，一个未处理的异常会一直持续下去，直到它到达你的 main() 并因此关闭你的程序。未释放的内存将由操作系统处理。

不确定这是否回答了您的问题...？

所以，基本上，就像它是从任何其他函数中抛出的一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-09T14:18:52.430

如果在构造函数中创建依赖对象，可能会发生内存泄漏。

在任何语言/环境中，如果这些依赖项被不清理它们的外部实体引用，这可能会导致泄漏。

在 JAVA 和 C# 中，如果未从外部引用依赖项，则不会导致泄漏。垃圾收集器最终会清理干净。

在 C++ 中，如果未从外部引用依赖项，这肯定会导致泄漏。

有关更多可能性，请参见 Jon 的回答：[Can constructors throw exceptions in Java?](https://stackoverflow.com/a/1371559/1037993)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T02:05:42.113

对于 C++，答案在 C++ FAQ 中。

[如何处理失败的构造函数？](http://www.parashift.com/c++-faq/ctors-can-throw.html)

[如果我的构造函数可能抛出异常，我应该如何处理资源？](http://www.parashift.com/c++-faq/selfcleaning-members.html)

[来自GOTW](http://www.gotw.ca/gotw/066.htm)的更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T01:24:15.243

值得补充的是：

1) Java 区分“已检查”和“未检查”异常

2）大多数用户定义的异常应该被“检查”。这意味着代码甚至不会*编译*，除非调用链中的每个模块 a) 处理异常，或 b) 明确标记它可以“抛出”异常

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-21T04:34:17.897

两种语言（C++ 或 Java）的情况相似但又有所不同。

当抛出异常时，它会向上传播堆栈，寻找处理程序。在 C++ 或 Java 中，它可能永远找不到一个，因此一直展开回到开始并终止程序。在 Java 中，有一个已检查异常的概念，它强制要求对异常进行某种处理（如果已检查）。在 C++ 中，有一个异常规范的概念，但它不切实际（设计不良）并且不应该使用，因此，在 C++ 中将所有异常视为“未检查”。

无论异常最终终止程序还是被捕获到它被抛出的上游的某个地方，导致该异常的展开过程都是重要的。如果它最终终止程序，那么在操作系统回收内存时当然不会出现内存泄漏。你需要担心的是：

*   如果异常最终在上游某处处理，则展开期间的内存泄漏；和，
*   其他类型的可能泄漏的资源（例如，挂起的数据库操作、网络连接等），因为如果程序终止，它们将不会被操作系统回收/撤消。

当堆栈展开发生时，在 C++ 中，简单地说，保证每个完全构造的堆栈绑定对象（包括正在构造的对象的数据成员或基类实例）将立即销毁（即确定性地）与创建它们的顺序完全相反。因此，只要所有资源都直接与对象的构造/销毁（也称为“RAII”）相关联，在展开过程中就不会发生（内存或其他资源）泄漏，因为成功获取的每个资源都将被释放（除非在展开期间释放资源失败，这是您需要小心处理的事情）。

在 Java 中，“堆栈”展开以相同的方式发生，只是不是立即销毁对象，而是将它们标记为已丢弃（即被垃圾回收），并最终在未来某个不确定的时间点销毁。这保证没有内存泄漏，只要垃圾收集器保持足够长的时间来完成它的工作，我不确定如果程序最终终止于未处理的异常（但此时无关紧要） . Java 的主要问题是其他资源。这些资源必须在`finally`块中释放。这些`finally`块保证在展开期间被执行，但是，当然，它们必须包含代码来释放相应的分配的资源`try`堵塞。只要程序员做他的工作，资源就不会泄漏。

从构造函数抛出异常的事实并没有太大区别，基本规则与抛出异常时不泄漏资源的基本规则相同：

*   *在 C++ 中，将每一个*资源（内存或其他）绑定到*一个*对象，语言保证其余的，没有泄漏。这是资源获取即初始化 (RAII) 习语。
*   在 Java 中，确保在其自己的 try-block 中写入每个*非*内存资源获取，该 try-block 具有自己的 finally-block 释放该*单个*资源。

在这两种情况下，您都必须干净地释放资源（不抛出）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-21T01:25:03.503

是否发生内存泄漏取决于代码的编写方式。如果您编写“好”代码，则不应出现内存泄漏。但是完全有可能想出严重错误的情况。

如果构造函数在构造函数中分配了任何东西，那么事情很可能会出错。

解决方法，一般来说就是使用所谓的“两阶段构造”，这样构造器本身就很简单，“不会出错”。构造对象后，您调用一个成员函数，该函数以可能失败的方式填充对象，然后您可以随意抛出异常，只要确保析构函数在某个点运行，一切都应该顺利进行。当心“析构函数中的部分构造对象” - 如果您的指针为 NULL，或者在析构函数的中途没有构造其他东西，会发生什么。

[以上内容受制于“在我们回到 main 之前某处有一个处理程序，并且我们确实想要做一些除了中止整个程序之外的事情”]。

# javascript - 类别/标签选择器

> ID：13982986
> 
> 赞同：1
> 
> 时间：2012-12-21T01:14:50.813
> 
> 标签：javascript, jquery, wordpress, css

尝试将投资组合库添加到我正在制作的自定义 wp 主题中。我已经筋疲力尽地尝试寻找甚至可以修改的解决方案和插件。我认为我在寻找解决方案时遇到的一个问题是我不完全确定哪些搜索词可以帮助我找到与我想要实现的目标相似的东西。

截至目前，我的导航有以下 div

```
<div id="tags" role="navigation">
<p>
<a class="portrait" href="#portrait">Portrait</a> / 
<a class="landscape" href="#landscape">Landscape</a> / 
<a class="sports" href="#sports">Sports</a> / 
<a class="nature" href="#nature">Nature</a> / 
<a class="weddings" href="#weddings">Weddings</a> / 
<a class="active" href="#">All</a>
</p>
</div> 
```

在我的导航下方是我的图像 div。我想做的是能够从图像导航中选择一个类别，并且只显示那些特别标记的图像。我不想要的是为该标签/选择打开一个新页面。我想让图像重新组织或淡入/淡出所选导航。

我确定那里有一个类似于我正在寻找的脚本或插件。或者就如何最好地实现这一点提供一些指导/建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:31:10.770

假设你有一个 ID 为 'tagImages' 的 div，给每个图像一个与锚类同名的数据属性，这段代码应该可以工作。

**预期的 HTML**

```
<div id="tagImages">
    <img src="/location/image.jpg" data-category="portrait" />
    <img src="/location/image.jpg" data-category="nature" />
    <img src="/location/image.jpg" data-category="nature" />
    <img src="/location/image.jpg" data-category="weddings" />
</div>​ 
```

**jQuery 代码**

```
$('#tags').on('click', 'a', function(e) {
    e.preventDefault();
    var cat = $(this).attr('class'),
        $tagImg = $('#tagImages').find('img');
    $tagImg.hide();
    if (cat === 'active') {
        $tagImg.show();
    } else {
        $tagImg.each(function() {
            if ($(this).data('category') == cat) {
                $(this).show();
            }
        });
    }
});​ 
```

这是一个[jsFiddle 示例](http://jsfiddle.net/xvrSr/)，演示了您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:18:30.727

Quicksand jquery 插件将为您做到这一点：

[http://razorjack.net/quicksand/](http://razorjack.net/quicksand/)

同位素插件：

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

或者使用一些css3：

[http://tympanus.net/Tutorials/CSS3FilterFunctionality/](http://tympanus.net/Tutorials/CSS3FilterFunctionality/)

# node.js - 如何在命令行启动 mimosa coffeescript 项目

> ID：13982989
> 
> 赞同：1
> 
> 时间：2012-12-21T01:15:45.580
> 
> 标签：node.js, requirejs, mimosa

我使用 mimosa 生成了一个 express 应用程序，并使用 mimosa watch --server 使用它。一切都很好。

有一个 server.coffee 文件，由 mimosa 自动生成并且符合 requirejs，其中包含行 exports.startServer = function(config) { ... }

如何通过命令行启动它？我尝试使用 coffee server.coffee，有时使用 -r。

谢谢！

OMGoodness，忘了提到我在 Windows 上。其他一切都与我在互联网上找到的任何示例相同（NPM 在 6 个月前安装得不好，但最近情况真的很好）。

Node v 0.8.14 咖啡 1.4.0 含羞草 0.6.1

Mimosa 说它从 server.coffee 运行 startServer。考虑到 server.coffee 的 requirejs 格式，命令行的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:57:31.273

含羞草作者在这里。对不起，我没有早点注意到这一点！随时欢迎您到 Google 群组提问：[https](https://groups.google.com/forum/#!forum/mimosajs) ://groups.google.com/forum/#!forum/mimosajs这会立即引起注意！

`coffee server.coffee`不是你应该执行的。

一旦你运行`mimosa new`了，你交付的项目就开始执行了`mimosa watch -s`。这将启动文件系统的监视，构建所有文件，然后通过调用`startServer`服务器文件的方法启动服务器。

# php - .flv 和 .f4v 文件扩展名显示意外的 mime 类型

> ID：13982991
> 
> 赞同：1
> 
> 时间：2012-12-21T01:16:15.440
> 
> 标签：php, mime-types, flv

当我查找 my 的 mime 类型时，其中`.flv`将它们声明为：application/octet-stream。`f4v``php`

我一直认为这些文件的 mime 类型是“video/x-flv”和“video/x-f4v”。这是一个新事物还是来自一个时髦的来源或什么的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:54:38.680

我在[这个答案](https://stackoverflow.com/questions/8734832/determining-mime-type-of-mac-upload-stream-file/8736109#8736109)中提到Winista 和 URLMon 都不能正确检测到 swf 或 flv。这就是您使用的 php 组件无法完全识别“video/x-flv”和“video/x-f4v”文件的原因。

Winista 使用一个**魔法**文件（包含 MIME 类型列表和指示特定文件起始位的相应十六进制字符）。

我建议您关注为什么没有其他人能够将 flv 检测添加到这个魔术文件中。winista 项目是一个旧的 Java 开源项目的移植。

我唯一的另一个想法是尝试 ffmpeg，也许它有能力检测这些 flv 和 f4v 文件的确切 MIME 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T08:05:52.647

我有一个类似的问题。[我的 PHP 5.4.7 上的FileInfo](http://www.php.net/manual/en/fileinfo.installation.php)（在 Windows 下的 XAMPP 中）能够将`.flv`文件检测为`video/x-flv`，但在视频上失败`.mkv`（应该将其检测为`video/x-matroska`，但返回`application/octet-stream`）和许多其他非典型多媒体格式。

为了解决这个问题，我完全放弃了 FileInfo 并使用以下函数恢复到旧的、好的*mime-by-extension*方法：

```
public static function getMimeTypeByExtension($file)
{
    $extensions = require('mimeTypes.php');

    if(($ext=pathinfo($file, PATHINFO_EXTENSION))!=='')
    {
        $ext=strtolower($ext);
        if(isset($extensions[$ext]))
            return $extensions[$ext];
    }
    return null;
} 
```

`mimeTypes.php`您可以在[pastebin.com](http://pastebin.com/pxwA9gFh)找到内容。它是由我通过合并[Apache SVN 的`mime.types`文件](http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/docs/conf/mime.types?view=annotate)[`mimeTypes.php`](https://github.com/yiisoft/yii/blob/master/framework/utils/mimeTypes.php)和来自 Yii 框架的类似数组来编译的。结果集在文件扩展名和对应的 MIME 类型之间有超过 1000 个关系。

**重要提示**：在使用此解决方案之前，您必须仔细考虑，您需要它的目的是什么？基于文件扩展名的 MIME 类型很容易被欺骗，只需更改该扩展名即可。因此，任何与安全相关的代码都应**尽可能远离我的解决方案**。

我需要它只是为了为[flowplayer](http://flowplayer.org/docs/)提供正确的 MIME 类型的视频文件。我假设，如果用户将此类文件的扩展名更改为其他内容，则 flowplayer 将无法播放该电影。

# java - 是否保证在 Java 中调用终结器？

> ID：13982992
> 
> 赞同：0
> 
> 时间：2012-12-21T01:16:22.897
> 
> 标签：java, android, jvm, dalvik, finalizer

是否保证在 Java 中调用终结器？如果 JVM 与 JVM 不同，那么 Dalvik VM for Android 的情况如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T01:18:16.410

不，他们不能保证被调用。不要依赖终结器来释放资源。

[https://www.securecoding.cert.org/confluence/display/java/MET12-J.+Do+not+use+finalizers](https://www.securecoding.cert.org/confluence/display/java/MET12-J.+Do+not+use+finalizers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T01:25:08.517

[这是java教程Object as a Superclass](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)的摘录

> **finalize() 方法**
> 
> Object 类提供了一个回调方法 finalize()，当对象变成垃圾时，可以调用该方法。Object 的 finalize() 实现什么都不做——你可以重写 finalize() 来进行清理，比如释放资源。
> 
> finalize() 方法可能会被系统自动调用，但是何时调用，或者是否调用，是不确定的。因此，您不应依赖此方法为您进行清理。例如，如果您在执行 I/O 后没有关闭代码中的文件描述符，并且您希望 finalize() 为您关闭它们，那么您可能会用完文件描述符。

最后一段是重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:44:58.553

终结器只是保证在实例被回收之前执行的东西。我确信它在 Dalvik VM 上遵循相同的规则。除此之外，即使最终调用了终结器，也有在不可预测的点上执行，并且以 vm 特定的方式执行，所以你最好将它用作安全网。在 JDK 7 之前，唯一的方法是为您的类导出显式资源释放方法，并在需要确保资源释放时显式调用它们。Try-with-resources 可以让您摆脱 JDK7 的困境。自动关闭

# excel - Excel：计算值在列中出现的次数

> ID：13982998
> 
> 赞同：1
> 
> 时间：2012-12-21T01:16:52.227
> 
> 标签：excel, excel-formula, excel-2011

Gah，我知道这必须比我想象的要容易：

我有一个简单的三列电子表格。第一列是我感兴趣的：它包含一个 00-49 的值。（这些数字表示第三列中的项目所属的主题。）

我要做的就是计算每个数字出现的次数。现在，我正在使用这个：

```
=SUM(COUNTIF(Sheet1!A2:A6716, {"00"})) 
```

在第二张纸上。它可以工作，但我发现没有手动输入值（00、01、02 等）的方法。我想我会笨拙地用这个函数迭代一个列旁边的列（基本上从 00 开始，然后`A1+1`向下填充），但这根本不起作用——我尝试了几种变体。

如您所见，我这里有很多行，我想自动计数。我尝试使用构建数组的函数，但我无法让它工作。我也不知道如何制作一个可以做到这一点的数据透视表。

在上面的公式中输入前十个（五十个主题）后，我知道，例如，我有 638 行以第一列的 00 开头，51 行 01，277 行 02，等等。

作为参考，前几行如下所示：

```
00   0.73,  10.2307/1496207
00   0.69,  10.2307/1496209
00   0.68,  10.2307/1496208 
```

直到你得到这个：

```
49   0.11   10.2307/1499809 
```

对于任何感兴趣的人，第二列是该主题（第一列）在文档中的比例，第三列是每个文档的 DOI。

我在 StackExchange 以及 Google 搜索结果中尝试了各种解决方案。有人请告诉我一件明显的事情，我在尝试思考这个问题时显然错过了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:21:52.380

我会使用：

```
=COUNTIF(Sheet1!A2:A6716, ROW() - 1) 
```

调整 ROW() - 1 以匹配您的偏移量，如果您从第 3 行开始，则需要 - 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:44:12.323

这不应该工作吗？

```
=COUNTIF(Sheet1!$A$2:$A$6716, 0)
=COUNTIF(Sheet1!$A$2:$A$6716, 1)
=COUNTIF(Sheet1!$A$2:$A$6716, 2)
=COUNTIF(Sheet1!$A$2:$A$6716, 3) 
```

如果我理解您需要正确执行的操作，则无需使用 SUM(); COUNTIF() 应该可以工作，但是您需要为第一列中的每个唯一值执行一次。如果您的第一列的值实际上是字符串而不是数字，您需要这样做：

```
=COUNTIF(Sheet1!$A$2:$A$6716, "00")
=COUNTIF(Sheet1!$A$2:$A$6716, "01")
=COUNTIF(Sheet1!$A$2:$A$6716, "02")
=COUNTIF(Sheet1!$A$2:$A$6716, "03") 
```

直到涵盖所有值。

# mysql - Order By on Join 需要很长时间

> ID：13982999
> 
> 赞同：0
> 
> 时间：2012-12-21T01:16:53.427
> 
> 标签：mysql, sql

当我添加从 JOINED 表派生的 ORDER BY 时，执行查询的时间从 0.008 秒上升到 0.50 秒，尽管 order by 字段上有一个索引。以下是查询：

```
SELECT a.productid 
FROM   products a 
   JOIN products_lng b FORCE INDEX (primary)
     ON a.productid = b.productid 
        AND b.code = 'US' 
   JOIN pricing c 
     ON c.productid = a.productid 
   JOIN thumbnails d 
     ON d.productid = a.productid 
   JOIN bigthumbnails e 
     ON e.productid = a.productid 
   JOIN products_categories f 
     ON f.productid = a.productid 
WHERE  a.forsale = 'Y' 
GROUP  BY b.productid 
ORDER  BY b.product 
```

解释计划： ![在此处输入图像描述](../Images/b22ed3175d795125d6a3773ab5ae23e3.png)

b 具有以下索引：

![在此处输入图像描述](../Images/6ba660baf8097a9e8e187e7c86d60e8c.png)

```
CREATE TABLE `products_lng` (
 `code` varchar(2) CHARACTER SET latin1 NOT NULL DEFAULT '',
 `productid` int(11) NOT NULL DEFAULT '0',
 `product` varchar(255) CHARACTER SET latin1 NOT NULL DEFAULT '',
 `descr` varchar(512) CHARACTER SET latin1 NOT NULL,
 `full_descr` varchar(1024) CHARACTER SET latin1 NOT NULL,
 `processed` varchar(1) CHARACTER SET latin1 NOT NULL,
 PRIMARY KEY (`code`,`productid`,`product`),
 KEY `ad` (`code`,`productid`,`product`,`descr`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:12:57.630

最后，ORDER BY 和 GROUP BY 的组合似乎是查询执行时间比正常情况更长的原因。然而，通过将查询放在子查询中并因此将 ORDER BY 和 GROUP BY 分开，我设法将执行时间大幅限制为 0.0015 秒，而不是原来的 0.5 秒。我仍然必须根据我的要求调整查询，但以下是它的外观。基本上它归结为在子查询中定义 WHERE 参数和周围查询您希望选择的值。

```
 SELECT z.*,d.*,e.*
FROM products_lng z
JOIN thumbnails d ON d.productid = z.productid
JOIN bigthumbnails e ON e.productid = z.productid
WHERE EXISTS
    ( SELECT b.productid
     FROM products b
     JOIN pricing c ON c.productid = b.productid
     JOIN products_lng i USE INDEX (PRIMARY) ON i.productid = b.productid
     AND i.code = 'US'
     JOIN products_categories f ON f.productid = b.productid
     WHERE b.productid = z.productid
     GROUP BY b.productid )
ORDER BY z.product 
```