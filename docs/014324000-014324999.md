# StackOverflow 问答 14324000-14324999

# c# - 如果类发生更改，是否需要重新编译和重新部署项目中的所有程序集？

> ID：14324001
> 
> 赞同：3
> 
> 时间：2013-01-14T18:02:15.907
> 
> 标签：c#, .net

如果我有一个包含一定数量公共类的类库（本例为 5 个），并且我有 3 个依赖于该库的项目（对于本例），我决定更改其中一个类，但只有 3 个类中的 1 个项目依赖于那个类。

我需要编译/链接/部署所有 3 个项目吗？

.NET 基本上是依赖于类的名称还是有某种类型的寻址依赖？（我有 c++ 背景，所以我知道在 c++ 中我必须重新部署所有 3 个项目）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:05:46.773

如果类继承自接口，并且您不更改接口（仅更改类实现），那么如果依赖程序集仅依赖于接口与类进行通信，则您不必更改依赖程序集。

如果更改依赖程序集所依赖的类的 API（如方法签名或名称），则必须修复依赖程序集以使用新 API。这包括更改类本身的名称。

所以这里的关键是提供一个稳定的API。如果更改 API，则必须更改依赖于 API 的代码。如果程序集不依赖（即它不依赖于您正在更改的任何 API 依赖项），那么您不必重新部署它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:06:00.400

如果重新编译类库项目，创建新的 DLL，则不必重新编译不依赖于 DLL 更改的项目，只要：

*   每个项目所依赖的公共接口不会以中断的方式改变。
*   这些项目仍然与 DLL 的新版本号兼容。

如果您的依赖项目不需要 DLL 的特定版本号或版本范围，则版本考虑不适用。

# linux - cgroups 隔离（分离组进程）

> ID：14324005
> 
> 赞同：7
> 
> 时间：2013-01-14T18:02:35.773
> 
> 标签：linux, isolation, cgroups

我有一个关于 cgroups 的问题，特别是考虑到隔离。

维基百科指出，您可以使用 cgroups 来隔离组，以便“组有单独的命名空间，因此他们看不到彼此的进程、网络连接或文件”。

我已经知道，如何在组之间共享或划分内存或 cpu，但想知道，组或用户如何只能看到他们自己的进程（例如必须在 cgrules.conf 和 cgconfig.conf 中的内容）。

例子：

当指定组的用户在他的控制台中输入 ps（或 ps -aux）时，应该只列出他的进程，而不是其他用户/组的进程（如 ps -u）。我知道我可以做一个快速而肮脏的编程方法来完成这样的事情，但我想知道它如何与 cgroups 一起工作。

非常感谢您的专业知识！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:49:41.240

Cgroups 并没有能力提供完整的命名空间隔离。您正在寻找的是 Linux Containers (LXC) -- [http://lxc.sourceforge.net/](http://lxc.sourceforge.net/)。LXC 使用 cgroups 进行资源管理，并允许您将进程容器化并将它们与主机系统隔离。Libvirt 还提供了一个 LXC 驱动程序，它可以轻松设置容器，甚至可以在容器中运行完整的操作系统。

更多来源：

*   [http://fedoraproject.org/wiki/Features/Securecontainers](http://fedoraproject.org/wiki/Features/Securecontainers)
*   [http://nigel.mcnie.name/blog/a-five-minute-guide-to-linux-containers-for-debian](http://nigel.mcnie.name/blog/a-five-minute-guide-to-linux-containers-for-debian)
*   [http://libvirt.org/drvlxc.html](http://libvirt.org/drvlxc.html)
*   [https://www.berrange.com/posts/2011/09/27/getting-started-with-lxc-using-libvirt/](https://www.berrange.com/posts/2011/09/27/getting-started-with-lxc-using-libvirt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T06:26:28.590

虽然 lxc 是提供隔离的一个很好的答案，但 cgroups 即使在缓存级别（如果处理器支持它）也具有此功能。许多集群管理器/资源管理器（如 Mesos）都在使用这些功能。使用 cgset，您可以为 cgroup 设置 IO、CPU 和内存的限制。[您可以在此处](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/ch-Subsystems_and_Tunable_Parameters.html)找到一些文档。

# ruby-on-rails-3 - 使用 capybara 进行 rspec2 验收测试

> ID：14324016
> 
> 赞同：0
> 
> 时间：2013-01-14T18:03:07.737
> 
> 标签：ruby-on-rails-3, capybara, rspec2, acceptance-testing

我正在尝试使用 rspec2 和 rails3 实现一个功能，基本上我有一个 Post 模型，我试图通过创建一个 Post 来测试它（我正在使用设备进行身份验证）

这是我的特色

```
spec/acceptance/new_post_feature_spec.rb

require 'spec_helper'
require 'rspec/example_steps'

feature "Creating a new post" do
  include Devise::TestHelpers
  before(:each) do
    @request.env["devise.mapping"] = Devise.mappings[:user]
    user = FactoryGirl.create(:user)
    sign_in user
  end

  Steps "Add a new post" do
    page.visit "/posts"
    page.should have_content("New Post")
  end
end 
```

但我收到了这个错误

```
undefined method `env' for nil:NilClass 
```

以下是我正在使用的宝石

```
gem "rspec-rails", "~> 2.0"
gem 'database_cleaner'
gem 'capybara'
gem "factory_girl_rails", ">= 4.1.0"
gem 'rspec-example_steps' 
```

和`Guard/Spork`

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:11:47.410

`@request`是控制器测试变量。这不是你想要的。事实上，在 capybara 规范中，您不需要指定设计映射并且您不能使用`sign_in`.

Capybara 启动浏览器，您必须告诉它进入您的登录页面并通过与在浏览器中相同的步骤登录。

试试这个：（您可能需要更改一些输入和按钮名称）

```
let(:user) { FactoryGirl.create(:user) }
before(:each) do
  page.visit new_user_session_path
  # note: use the email/password input names below if yours are different
  page.fill_in "user[email]", :with => user.email 
  page.fill_in "user[password]", :with => user.password
  page.click_button "Sign in"
end 
```

# php - 修改 usort 函数以包含键

> ID：14324020
> 
> 赞同：2
> 
> 时间：2013-01-14T18:03:27.437
> 
> 标签：php, sorting

我经历了所有类似的问题，但找不到答案……所以就这样吧。

我当前的数组，简化：

```
[顺序] => 数组
        (
            [0] => 数组
                (
                    [strSupplier] => XYZ
                    （改变其他领域）

                )

            [1] => 数组
                (
                    [strSupplier] => XYZ
                    （改变其他领域）
                )

            [2] => 数组
                (
                    [strSupplier] => YYZ
                    （改变其他领域）
                )

        )

```

代码：

```
                函数 custom_sort2($a,$b) {
                    返回 $a['strSupplier']>$b['strSupplier'];
                }  
                // 对多维数组进行排序            
                usort($tempOrderArray, "custom_sort2");

```

目前，我只对供应商进行排序，但是，我需要确保关键是第二个排序标准，我不确定它是否是。

有没有办法可以保证先按 strSupplier 排序，然后按 key 排序？如果这是内置在 uasort 或 usort 函数中的，我很抱歉 - 我没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:37:14.343

你的数组会这样：

```
[order] => Array
        (
            [0] => Array
                (
                    [key] => 0,
                    [strSupplier] => 'XYZ',
                    //(varying other fields)

                )

            [1] => Array
                (
                    [key] = 1,
                    [strSupplier] => 'XYZ',
                    //(varying other fields)
                )

            [2] => Array
                (
                    [key] = 2,
                    [strSupplier] => 'YYZ',
                    //(varying other fields)
                )

        ) 
```

然后，当你排序时：

```
function custom_sort2($a, $b) {
    $cmp = $cmpstr = strcmp($a['strSupplier'], $b['strSupplier']); //Compare the string
    $cmpkey = ($a['key'] == $b['key'] ? 0 : ($a['key'] > $b['key'] ? 1 : -1)); //Compare the key
    if ($cmpkey == 1)
        $cmp = ($cmpstr >= 0) ? 1 : 0;
    return $cmp; //If we are moving the element forward, then we need to check the key.
}
// Sort the multidimensional array
uasort($array, "custom_sort2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:20:27.743

您可以先尝试使用[ksort](http://php.net/manual/en/function.ksort.php)，然后按供应商排序。

# wordpress - wordpress：如何使用自定义 HTML 文件创建新帖子？

> ID：14324026
> 
> 赞同：0
> 
> 时间：2013-01-14T18:03:38.027
> 
> 标签：wordpress

我通过在

```
 /wp-content/themes 
```

就像是 ：

```
<?php
 *
 * Template Name: Contact Page
 */
 ?>
 <html ..... </html> 
```

然后在仪表板上添加一个新页面，选择这个新模板

问题是我无法将标签和类别关联到每个页面。我显然需要创建帖子。然后我怎么能从自定义 html 文件创建帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:06:39.627

使用自定义帖子类型并创建一个单一的{posttype}.php

我认为这将解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:24:13.107

自定义帖子类型正是您所需要的。本质上，它们是自定义内容容器和默认**帖子**的可扩展版本。它们可以像普通帖子一样与标签和类别相关联。

[您可以在此处](http://codex.wordpress.org/Post_Types)找到实施说明。:)

# php - 如何使用 cronjob 在 Codeigniter 的 /application 文件夹中执行 php 文件？

> ID：14324027
> 
> 赞同：0
> 
> 时间：2013-01-14T18:03:44.640
> 
> 标签：php, codeigniter, codeigniter-2

我需要在 /application 文件夹中执行一个 php 文件。该执行将由 cronjob 触发。php 文件还将在 /application 文件夹中写入另一个文件。为什么在 /application 文件夹中执行和写入？因为 php 文件将使用助手、库和控制器函数。

我已经尝试了下一个 cronjobs

```
* * * * * /usr/bin/wget http://example.com/codeigniter/application/controllers/cronjobs/CronJob.php
* * * * * /usr/bin/wget http://example.com/codeigniter/application/cronjobs/CronJob.php 
```

但不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:21:40.620

默认情况下，我的猜测是不允许您直接访问 /application/ 目录中的文件。您试图在浏览器中打开[http://example.com/codeigniter/application/controllers/cronjobs/CronJob.php ？](http://example.com/codeigniter/application/controllers/cronjobs/CronJob.php)怎么了？

打不开对吧？那么如果您在应用程序文件夹之外创建一个文件并在其中包含所需的控制器呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:17:26.790

如果 cron 任务在同一台机器上运行，您可以使用 CodeIgniter 的 CLI 内容：有关更多信息，请参阅[CodeIgniter 文档](http://ellislab.com/codeigniter/user-guide/general/cli.html)。它工作得很好。

# javascript - 单击时提醒表头名称

> ID：14324029
> 
> 赞同：1
> 
> 时间：2013-01-14T18:03:55.580
> 
> 标签：javascript, dom

下面如何修改代码，以便在用户单击列标题框时返回列标题的名称。IE。如果我点击“文件号”框，一个 javascript 警告框会提醒我列标题（th）的名称是“文件号”等。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#mstrTable {
     border: 1px solid black
}
#mstrTable td, th {
     border: 1px solid black
}

#mstrTable tr.normal td {
    color: black;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>
</head>
<body>
  <table id="mstrTable">
     <thead>
      <tr> 
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr> 
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr> 
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Approved</td>
        <td>1&nbsp;</td>
      </tr>

      <tr> 
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>2</td>
      </tr>
      <tr> 
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

<script type="text/javascript">
(
  function( )
  {
      var trows = document.getElementById("mstrTable").rows;

      for ( var t = 1; t < trows.length; ++t )
      {
          trow = trows[t];
          trow.className = "normal";
          trow.onclick = highlightRow;
      }

      function highlightRow(e)
      {
      alert('Row is ' + (this.rowIndex-1))
          for ( var t = 1; t < trows.length; ++t )
          {
              trow = trows[t];
              trow.className = ( trow == this && trow.className != "highlighted") ? "highlighted" : "normal";
          }
      }
  }
)();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:16:33.060

这应该这样做：**[jsFiddle 示例](http://jsfiddle.net/j08691/qMgdY/)**。

```
 (
  function () {
      var trows = document.getElementById("mstrTable").rows;
      for (var t = 1; t < trows.length; ++t) {
          trow = trows[t];
          trow.className = "normal";
          trow.onclick = highlightRow;
      }
      var theads = document.getElementsByTagName("th");
      for (var t = 0; t < theads.length; t++) {
          thead = theads[t];
          thead.onclick = highlightHead;
      }
      function highlightRow(e) {
          alert('Row is ' + (this.rowIndex - 1))
          for (var t = 1; t < trows.length; ++t) {
              trow = trows[t];
              trow.className = (trow == this && trow.className != "highlighted") ? "highlighted" : "normal";
          }
      }
      function highlightHead(e) {
          alert('Head is ' + this.innerHTML.toString());
      }
  })(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:21:02.563

所有的循环是怎么回事！不需要循环，使用你的事件对象告诉你点击了什么！

```
//assumes one thead and one tbody

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

tbody.onclick = function (e) {
   e = e || window.event;
   var td = e.target || e.srcElement; //assumes there are no other elements inside the td
   var row = td.parentNode;
   row.className = row.className==="highlighted" ? "" : "highlighted";
}

thead.onclick = function (e) {
   e = e || window.event;
   var th = e.target || e.srcElement;  //assumes there are no other elements in the th
   alert(th.innerHTML);
} 
```

以上可能是整个表格的一次点击事件，我不想检查被点击的元素类型。

[JSFiddle](http://jsfiddle.net/wv74z/)

# matlab - matlab和数组

> ID：14324030
> 
> 赞同：5
> 
> 时间：2013-01-14T18:03:57.017
> 
> 标签：matlab

我有这样的代码：

```
t = a:(b-a)/10:b;
y = myFunction(t); 
```

据我猜测，这段代码通过应用 to 的每个值来创建一个数组`t`和另一个数组。`y``t``myFunction`

但是，如果我手动将数组的第一个元素传递`t`给`myFunction`这样

```
y = myFunction(t); 
```

我不会得到第一个元素，`y`而是一个不同的数字。为什么？

PS
`myFunction`看起来像这样：

```
function res = myFunction(x)
    res = tanh(5*x.^2 + 3*x - 2) + exp((x.^3 + 6*x.^2 + 12*x + 8)/(2*x.^2 + 8*x + 7))-2.0;
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T18:10:07.317

在`myFunction`您正在执行右矩阵除法（使用`/`），而您打算使用逐元素除法（使用`./`）。

# c# - linq 一对一查询

> ID：14324032
> 
> 赞同：7
> 
> 时间：2013-01-14T18:04:04.927
> 
> 标签：c#, linq, linq-to-sql

试图获取音乐会名称、日期和地点（存储在另一张桌子上），但它似乎不起作用，但它不断拉回 null。

```
var test = from f in db.Concert
           where f.Name.StartsWith(concertName)
           select new
           {
               f.Name,
               f.StartDateTime,
               venues = from v in db.Venues
                        where v.ID == f.VenueID
                        select v.Address
           } 
```

编辑：

Venue 和 Concert 之间的关系是 Concert 具有与 Venue ID 相关的 VenueID。我需要传回一个字符串。就像是

```
foreach (var e in test)
{
   html += "<div> e.Name +":" + e.Address </div>;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T18:29:46.577

您可以使用群组加入来获取与音乐会相关的所有场地

```
var test = from f in db.Concert
           join v in db.Venues on f.VenueID equals v.ID into g
           where f.Name.StartsWith(concertName)
           select new
           {
               f.Name,
               f.StartDateTime,
               Venues = g.Select(x => x.Address)
           }; 
```

结果的使用：

```
foreach (var e in test)
{
   // e.Name
   // e.StartDateTime

   foreach(var address in e.Venues)
      // address
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:21:51.100

假设 Concerts 和 Venues 之间存在 1:1 的关系似乎是安全的。鉴于此，您可以`join`改用。

```
var test = from f in db.Concert
           join v in db.Venues on v.ID equals f.VenueID
           where f.Name.StartsWith(concertName)
           select new
           {
               f.Name,
               f.StartDateTime,
               v.Address
           }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:07:26.807

如果您设置了外键关系，则无需手动查询场所。在这种情况下，您可以使用`f.Venue`.

# opengl - GLSL phong 着色器，调试

> ID：14324038
> 
> 赞同：3
> 
> 时间：2013-01-14T18:04:36.640
> 
> 标签：opengl, glsl

我正在寻找调试我的 GLSL phong 着色代码的帮助。这是我的顶点着色器：

```
layout(std140) uniform Matrices {
    mat4 model[1024];
};

layout(location = 0) in vec4 vertexCoord;
layout(location = 2) in vec3 vertexNormal;

uniform mat4 view; // from lookAt() 
uniform mat4 projection; // perspective projection 

out vec3 Position;
out vec3 Normal;
out vec4 lightPosEye;

void main() {
    mat4 modelView = view * model[gl_InstanceID];
    mat3 normalMatrix = mat3(transpose(inverse(modelView)));
    //mat3 normalMatrix = mat3(modelView);

    vec4 lightPos = vec4(350, 350, 350, 1);
    lightPosEye = modelView * lightPos;

    Position = vec3(modelView * vertexCoord);
    Normal = normalize(normalMatrix * vertexNormal);

    gl_Position = projection * vec4(Position, 1.0);
} 
```

这是我的片段着色器：

```
in vec3 Position;
in vec3 Normal;
in vec4 lightPosEye;

layout(location = 0) out vec4 FragColor;

vec3 ads() {
    vec3 Ka = vec3(0, 0.5, 0);
    vec3 Kd = vec3(0, 0.5, 0);
    vec3 Ks = vec3(0, 0.1, 0);
    vec3 intensity = vec3(0.3, 0.5, 0.0);
    float shininess = 0.1;

    vec3 n = normalize(Normal);
    vec3 s = normalize(vec3(lightPosEye) - Position);
    vec3 v = normalize(vec3(-Position));
    vec3 r = reflect(-s, n);

    return intensity * (Ka + Kd * max(dot(s, n), 0.0) + Ks * pow(max(dot(r,v), 0.0), shininess));
}

void main() {
    FragColor = vec4(ads(), 1);
} 
```

这是结果的屏幕截图（出于调试目的，我还使用另一个几何着色器渲染法线）：

![渲染结果](../Images/e6384ab37bd46201e26f145fc0885f34.png)

立方体上的伪影是错误的，当我移动相机（更改视图矩阵）时，圆圈上的“阴影”也会移动一点。

我的 GLSL 代码中有任何明显的错误吗？

# facebook - Facebook API——在朋友的墙贴上写评论

> ID：14324039
> 
> 赞同：6
> 
> 时间：2013-01-14T18:04:51.353
> 
> 标签：facebook, facebook-graph-api, facebook-comments, facebook-wall

需要一种通过 Facebook API 对朋友的墙贴发表评论的方法（我正在使用 Python 包装器）。

考虑两个用户，Alice 和 Bob。我对两个用户都有 read_stream 和 write_stream 权限。

```
>>> alice_graph = GraphAPI(alice_access_token)
>>> bob_graph = GraphAPI(bob_access_token)

# Alice makes a post on her own wall, which returns the objects Graph API id
>>> alice_graph.put_wall_post("test_message", attachment={'name' : 'some_name', 'link' : 'some_link')
{u'id': u'some_facebook_id'}

# Alice can comment
>>> alice_graph.put_comment('some_facebook_id', "test comment")
{u'id': u'some_other_facebook_id'}

# But Bob cannot comment
>>> bob_graph.put_comment('some_facebook_id', "test_comment")
*** GraphAPIError: (#100) Error finding the requested story 
```

有趣的是，**这只发生在 Alice 的墙帖有`attachment`.** 如果 Alice 发布没有附件的墙贴，只是一条消息，则不会发生这种情况。

对于带有附件的墙柱和没有附件的墙柱之间的权限有何不同，我完全感到困惑。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:03:26.390

这最终只发​​生在 Alice 身上——其他用户 Bob 能够对他们的墙贴发表评论。我把它归结为 Alice 有奇怪的 Facebook 隐私设置。

# azure - VS 2012 使用 MSBuilld 命令发布配置文件和复制文件

> ID：14324045
> 
> 赞同：5
> 
> 时间：2013-01-14T18:05:27.310
> 
> 标签：azure, msbuild, visual-studio-2012

我已经在 Azure 上设置了带有 TFS 的 asp.net 网站，用于使用 VS 2012 进行源代码控制。我正在尝试使用 VS 2012 新发布配置文件和 MSBuild 复制文件。阅读这篇文章[Visual Studio 2012 Web Deployment Projects are Dead – Long Live Publishing Profiles](http://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead-ndash-long-live-publishing-profiles)，Doug 说您可以在发布配置文件中使用构建脚本。

因此，我在本地构建的 .csproj 中设置了一个测试。我只是简单地将 robots.txt 文件从根目录复制到 css 目录。这是我的测试。我在 TFS Build Process 模板中设置了我的 pubxml，在 process > 6\. Publishing -- Azure Website, Web Deploy Pubish Profile 下。

```
<Target Name="AfterBuild">
    <Copy SourceFiles="$(ProjectDir)robots.txt" DestinationFolder="$(ProjectDir)css\" />
</Target> 
```

我将此代码放入我的 pubxml 文件中，但我什么也没得到。我究竟做错了什么？是否可以在 Azure 上构建后复制文件？

**附加信息**

日志文件包含这些行，所以我确定发布配置文件正在运行。

```
AfterBuild:
  Creating directory "C:\a\src\...\css".
  Copying file from "C:\a\src\...\robots.txt" to "C:\a\src\...\css\robots.txt". 
```

以下是 Azure 的默认构建模板使用的构建步骤：

1.  验证解决方案配置：
2.  PrepareForBuild：
3.  核心编译：
4.  _CopyFilesMarkedCopyLocal：
5.  复制文件到输出目录：
6.  GenerateTargetFrameworkMonikerAttribute：
7.  核心编译：
8.  _CopyFilesMarkedCopyLocal：
9.  复制文件到输出目录：
10.  _CopyWebApplicationLegacy：
11.  验证全局包设置：
12.  从IntermediateAssembly 收集文件：
13.  从内容收集文件：
14.  CollectFilesFromIntermediateSatelliteAssembliesWithTargetPath：
15.  从参考收集文件：
16.  CollectFilesFromAllExtraReferenceFiles：
17.  CollectFilesFrom_binDeployableAssemblies：
18.  管道收集文件阶段：
19.  排除生成调试符号：
20.  PreTransformWebConfig：
21.  TransformWebConfigCore：
22.  PostTransformWebConfig：
23.  PreProfileTransformWebConfig：
24.  管道转换阶段：
25.  ProcessPublishDatabase设置：
26.  PreAutoParameterizationWebConfigConnectionStrings：
27.  AutoParameterizationWebConfigConnectionStringsCore：
28.  PostAutoParameterizationWebConfigConnectionStrings：
29.  PipelineMsdeploySpecificTransformPhase：
30.  验证发布配置文件设置：
31.  **CopyAllFilesToSingleFolderForMsdeploy：**
32.  PipelineCopyAllFilesToOneFolderForMsdeploy：
33.  包裹：
34.  生成MsdeployManifestFiles：
35.  PackageUsingManifest：
36.  生成示例部署脚本：
37.  管道部署阶段：
38.  **构建后：**

所以看起来 Azure 在“31\. CopyAllFilesToSingleFolderForMsdeploy”步骤中打包了所有文件。在 AfterBuild 步骤中运行副本似乎为时已晚。我将 Copy 命令移至目标“BeforeBuild”，但文件仍未在 CopyAllFilesToOneFolderForMsdeploy 步骤中结束。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T23:30:59.760

感谢 Sayed Ibrahim Hashimi 的文章[How to compress CSS/JavaScript before publish/package](http://sedodream.com/2011/02/25/HowToCompressCSSJavaScriptBeforePublishpackage.aspx)帮助我解决了这个问题。

可以直接复制Package Temp Directory。我最终将此目标添加到我的发布配置文件 (pubxml) 文件中。在“CopyAllFilesTOSingleFolderForMsdeploy”步骤完成后，此步骤将运行，这会将文件从解决方案的一部分复制到您指定的目标文件夹中。

```
<Target Name="AdditionalFilesForPackage" AfterTargets="CopyAllFilesToSingleFolderForMsdeploy">
    <Copy SourceFiles="$(ProjectDir)robots.txt" DestinationFolder="$(_PackageTempDir)\css\" />  
</Target> 
```

# weka - Weka - 如何删除所有值都丢失的属性？

> ID：14324055
> 
> 赞同：3
> 
> 时间：2013-01-14T18:06:30.300
> 
> 标签：weka, apriori

我有一个 CSV 文件，其中包含用于市场篮子分析的数据。我已经成功地将文件导入到Weka，但是我发现有些属性没有任何值，即所有值都丢失了。Weka 不允许我对这些数据使用 Apriori 算法，所以我想知道是否有办法从导入的数据中删除这些属性。

PS.：属性有上千种，所以我不想指定需要删除的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:55:31.720

您可以使用 WEKA 资源管理器中的“删除”过滤器删除它们。将数据加载到 WEKA 后：

1) 转到“处理”（第一个主选项卡）。

2) 在“过滤器”区域点击“选择”一个过滤器。

3）通过树导航到“过滤器”->“无监督”->“属性”->“删除”。

4）一旦选择了“删除”过滤器，单击“选择”按钮旁边的“删除”标签，它将打开一个对话框。

5) 用要删除的属性的索引/索引填写attributeIndices 文本字段，即“1,4,10”或“1-3,7”。

6) 单击对话框中的“确定”和主窗口过滤区域中的“应用”按钮。

就这样 ！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T07:47:42.503

我相信 weka.filters.unsupervised.attribute.RemoveUseless 可能会有所帮助

# c++ - Boost 从 tcp 套接字接收数据

> ID：14324060
> 
> 赞同：2
> 
> 时间：2013-01-14T18:06:42.180
> 
> 标签：c++, sockets, boost, tcp, boost-asio

我正在尝试从套接字读取特定数量的字节。我的服务器正在发送：

1) byte[0] - 消息的长度 2) byte[1:N] - 实际的消息

如何读取第一个字节，然后使用 boost::asio::ip::tcp::socket::read 读取剩余字节？这是代码片段：

```
 // receive data through the socket
    void TCPTestClient::ReceiveData( )
    {
        try
        {
            boost::system::error_code error;

            boost::asio::streambuf receivedStreamBuffer;

            // reserve 512 bytes in output sequence
            boost::asio::streambuf::mutable_buffers_type bufs =receivedStreamBuffer.prepare( 512 );
            boost::asio::read( m_socket,
                                   bufs,
                                   error );

            // transfer the buffer contents to string
            std::istream is( &receivedStreamBuffer );
            is >> m_receivedMessageStr;

            // throw exception if error occurred
            if ( error )
            {
                throw NetworkTestFailedException( error.message() );
            }
        }
        catch(...)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:40:21.000

您需要为一个字节的标头准备一个缓冲区，然后为消息准备另一个缓冲区。一个简化的例子可能是

```
boost::asio::read(                                                                                                                       
        m_socket,                                                                                                                        
        receivedStreamBuffer.prepare(1),                                                                                                 
        error                                                                                                                            
        );                                                                                                                               

if ( error ) {                                                                                                                           
    std::cerr << "Read header failed: " << boost::system::system_error(error).what() << std::endl;                                       
    return;                                                                                                                              
}                                                                                                                                        
receivedStreamBuffer.commit(1);                                                                                                          
std::istream header( &receivedStreamBuffer );                                                                                            
uint8_t size;                                                                                                                            
header >> size;                                                                                                                          

// reserve message size in output sequence                                                                                               
boost::asio::read(                                                                                                                       
        m_socket,                                                                                                                        
        receivedStreamBuffer.prepare( size ),                                                                                                 
        bufs,                                                                                                                            
        error                                                                                                                            
        );                                                                                                                               
if ( error ) {                                                                                                                           
    std::cerr << "Read message failed: " << boost::system::system_error(error).what() << std::endl;                                      
    return;                                                                                                                              
}                                                                                                                                        
receivedStreamBuffer.commit( size );                                                                                                     

// transfer the buffer contents to string                                                                                                
std::istream is( &receivedStreamBuffer );                                                                                                
is >> m_receivedMessageStr; 
```

# android - gson 数组解析

> ID：14324061
> 
> 赞同：0
> 
> 时间：2013-01-14T18:06:42.757
> 
> 标签：android, gson

如何解析

```
{
    "urls": [
        "http://www.url.com",
        "http://www.url.com",
        "http://www.url.com",
        "http://www.url.com",
        "http://www.url.com"
    ]
} 
```

使用gson？我总是以以下格式解析字符串：

```
{
        "urls": [
            x:"http://www.url.com",
            x:"http://www.url.com",
            x: "http://www.url.com",
            x: "http://www.url.com",
            x: "http://www.url.com"
        ]
    } 
```

如果不包含变量的名称（在本例中为 x），如何解析字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:34:01.793

它可以被解析为`Object`只有一个`urls`类型为 的字段`String[]`。换句话说，

```
class UrlList {
    String[] urls;
} 
```

假设您将文本放在一个`String`named`gsonText`中，您可以使用

```
Gson gson = new Gson();
UrlList uList = gson.fromJson(gsonText, UrlList.class); 
```

# tcp - TTL 字段和 IP 校验和

> ID：14324063
> 
> 赞同：2
> 
> 时间：2013-01-14T18:06:45.860
> 
> 标签：tcp, udp, ip, checksum, ttl

如果我更改IP 数据包中**的生存时间**(TTL) 字段，我是否还应该重新计算**IP 校验和**？

**那么传输层**的校验和呢？这也必须改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:22:30.703

是的。如果您更改IP 标头中的*任何*字段，则必须更新校验和。

至于传输层的校验和，理论上它取决于传输协议是什么......但实际上我不相信存在任何校验和覆盖 IP TTL 字段的传输协议。当然，TCP 和 UDP 的伪标头都没有涵盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T12:53:00.750

是的，如果您更改 TTL 字段，那么您也必须更改校验和，因为校验和与 TTL 字段相关。

此外，每跳都会更改 TTL。由于 TTL 在每一跳都在变化，所以校验和也会改变。

# git - 用于避免日志中出现大量合并噪音的 Git 工作流程

> ID：14324066
> 
> 赞同：2
> 
> 时间：2013-01-14T18:06:49.613
> 
> 标签：git, git-rerere

我们目前有一个工作流程，其中`master`有更长期的功能发布分支和编号的分支，例如`3.0`下周左右发布的版本。

在上面的例子中，我们将最后一分钟的更改推送到`3.0`需要合并到 master 中。如果我们不经常合并，我们最终会`master`过时而没有最近的更改。如果我们边走边合并，我们会得到充满从`3.0`to合并的日志`master`。

看似神奇的命令[git-rerere](http://www.kernel.org/pub/software/scm/git/docs/git-rerere.html)似乎可以解决这个问题，但只针对需要更新的本地主题分支。换句话说，如果`3.0`只在一个人的机器上而不是公开的，它就可以工作。

有没有办法让 master 保持最新而没有所有丑陋的合并噪音？我了解 rerere 的用法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:11:34.877

`rerere`代表“重用记录的决议”。它所做的只是通过记住您过去做出的决定来使您的合并/变基*更容易。*当它们实际发生时，它并没有让它们变得不那么嘈杂。它确实允许在不进行合并的情况下运行更长时间（因为您可以“预飞行”合并而不是推送结果）。

为什么“有充满合并的日志”是一个问题？您可以使用`git log --no-merges`在没有合并提交的情况下显示日志。

您的选择基本上是这样的：

*   减少合并的频率，这将使合并在您确实需要它们时变得更加困难
*   更频繁地合并并在日志中使用合并提交
*   使用变基，并处理公共存储库所涉及的问题
*   使用樱桃采摘，这意味着分支不会共享历史

# python - Python 多处理传递参考

> ID：14324069
> 
> 赞同：4
> 
> 时间：2013-01-14T18:06:59.343
> 
> 标签：python, multiprocessing

我正在尝试使用该模块`Queue`在进程之间传递自定义。`multiprocessing`问题是我没有把所有的方法都传到另一边。根据文档。

> 代理对象具有调用其所指对象的相应方法的方法（尽管并非所指对象的每个方法都必须通过代理获得）。代理通常可以以其所指对象的大多数相同方式使用

但它没有说明原因或解决方法。我想知道是否有人知道这样做的方法。

这是我正在尝试做的一个小例子。

**服务器：**

```
from multiprocessing.managers import BaseManager
from Queue import Queue

class KeyHandler(Queue):

    def __init__(self, elements=[]):
        Queue.__init__(self)

        for element in elements:
            self.put(element)

    def __iter__(self):
        return iter(self.get, object())

    def __call__(self):
        return self

class QueueManager(BaseManager):
    pass

keyhandler = KeyHandler(range(10))

QueueManager.register('keyhandler', callable=keyhandler)
manager = QueueManager(address=('', 50000), authkey='foobar')
server  = manager.get_server()
server.serve_forever() 
```

**客户：**

```
from multiprocessing.managers import BaseManager

class QueueManager(BaseManager):
    pass

QueueManager.register('keyhandler')
manager = QueueManager(address=('', 50000), authkey='foobar')
manager.connect()

keyhandler = manager.keyhandler()

for elem in keyhandler:
    print elem 
```

**追溯：**

```
Traceback (most recent call last):
  File "client2.py", line 14, in <module>
    for elem in keyhandler:
TypeError: 'AutoProxy[keyhandler]' object is not iterable 
```

该`__call__`方法有效，但该`__iter__`方法无效。我可以以某种方式强制/解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:24:17.940

使用**代理**。在客户端添加此类声明（连同导入`BaseProxy`）：

```
class KeyHandlerProxy(BaseProxy):
    _exposed_ = ('next', 'get')

    def __iter__(self):
        return self

    def next(self):
        o = self._callmethod('get')
        if object() == o:
            raise StopIteration
        return o 
```

并将`register`（客户的）更改为：

```
QueueManager.register('keyhandler', proxytype=KeyHandlerProxy) 
```

# android - 为 Android NDK 交叉编译 C 库

> ID：14324070
> 
> 赞同：2
> 
> 时间：2013-01-14T18:07:20.897
> 
> 标签：android, android-ndk, java-native-interface, cross-compiling

我对我目前正在尝试的东西有点困惑：我想通过 NDK 交叉编译一个 C 库以与 Android 一起使用，这样我就可以创建一个 JNI 包装器并从我的 Android java 代码中调用它的一些函数.

*   我按照本指南交叉编译 libopus（我想在我的项目中包含的库）：[http](http://mortoray.com/2012/08/21/android-ndk-cross-compile-setup-libpng-and-freetype/) ://mortoray.com/2012/08/21/android-ndk-cross-compile-setup-libpng-and-freetype/其中意味着**我目前在 /opt/android-ext/ 有一个独立的工具链，其中包含一个包含我交叉编译的库 (libopus.a、libopus.so 等) 的 lib 文件夹**。

*   我的 Android 项目上也已经有一个 jni 文件夹，其中包含一些带有我想要的 JNI 绑定的 C 代码，我可以从我的 Java 代码中调用它，但它什么也没做（我可以调用它，但它是一个空白函数） . 这意味着在我的项目中，有一个带有“libopusUtilsNative.so”（包装器）的 /lib/armeabi 目录。

我的问题是：

如何将刚刚交叉编译的库添加到项目中，以便（例如）我可以对已有的 C 源代码文件执行 #include 调用并访问库函数？我对如何：

1.  将我交叉编译的库包含到我的项目中。

2.  如何使我创建的包装器代码包含它（我猜这与向我的 Android.mk 文件中添加一些代码有关，但我一无所知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:20:13.763

您链接到的指南包含一个示例，说明如何修改 JNI 库（或在他的情况下，本机应用程序）的 Android.mk 文件以链接到交叉编译的库：

```
PLATFORM_PREFIX := /opt/android-ext/

LOCAL_PATH := $(PLATFORM_PREFIX)/lib
include $(CLEAR_VARS)
LOCAL_MODULE := libpng
LOCAL_SRC_FILES := libpng.a
include $(PREBUILT_STATIC_LIBRARY)

# The in your project add libpng
LOCAL_STATIC_LIBRARIES := android_native_app_glue libpng 
```

如果您想静态链接到 libopus，这几乎就是您的做法。或者，如果您想链接共享库，请使用以下内容：[Using my own prebuilt shared library in an Android NDK project](https://stackoverflow.com/questions/6165813/using-my-own-prebuilt-shared-library-in-an-android-ndk-project)

# assembly - 如何读取 ASCIIZ 字节字符串

> ID：14324076
> 
> 赞同：0
> 
> 时间：2013-01-14T18:07:38.493
> 
> 标签：assembly, input, x86, ascii, dos

我正在尝试编写一个程序来从输入中读取字节字符串并将其存储为 ASCIIZ 格式（字符串以 结尾`0`）。以下是我到目前为止的代码；读取字符串后，我无法弄清楚如何访问字符串中的最后一个字节并将其设置为`0`.

```
READ_ASCIIZ PROC
    PUSH BP
    MOV BP, SP

    MOV AH, 0AH
    MOV DX, 4H[BP]
    INT 21H

    POP BP
    RET 2H
READ_ASCIIZ ENDP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:34:02.743

您可以通过以下方式执行此操作（在 nasm 语法中，未经测试）：

```
 ; saved modified registers
  push  bx
  push  si
  ; get pointer to buffer
  mov   si, [bp+4]
  ; grab number of chars read 
  ; (zero-extending as the length is stored as a byte)
  movzx bx, byte [si+1]
  ; write zero at end of character buffer (overwriting the newline)
  ; (+2 since that's were the buffer starts)
  mov   byte [si+bx+2], 0
  ; restore registers
  pop   si
  pop   bx 
```

（注意这不是最优化的方法）

# php - PHP登录脚本不起作用，将变量传递回页面然后什么都不做

> ID：14324085
> 
> 赞同：0
> 
> 时间：2013-01-14T18:08:11.350
> 
> 标签：php

我正在学习 PHP，并且在使以下代码正常工作时遇到问题。基本上登录页面显示正确，并且没有错误并且变量似乎被正确分配，但是在页面重新加载时我只是得到相同的登录表单，看起来数据要么没有被传递，因此没有被采取行动。

我一遍又一遍地查看代码，甚至尝试了不同的方法（产生了相同的结果！）所以如果有人能帮助我花一分钟时间并指出正确的方向，那就太好了。

可能存在问题的一件事是我的服务器运行的是 5.3.9，而我正在使用的书是 PHP5，所以我调用的某些函数可能已被弃用。那会很痛苦...

```
 <?php 
include_once "common_db.inc";
$register_script = "register.php";

if (!isset ($userid)) {
    login_form();
    exit;
} else {
    session_start();
    session_register ("userid", "userpassword");
    $username = auth_user ($_POST['userid'], $_POST['userpassword']);

    if (!$username) {
        $PHP_SELF = $_SERVER['PHP_SELF'];
        session_unregister ("userid");
        session_unregister ("userpassword");
        echo "Failed to authorize. " .
                "Enter a valid DX number and password." . 
                "Click the link below to try again.<br>\n";
        echo "<a href=\"$PHP_SELF\">login</a><br>";
        echo "Click the following link to register<br>\n";
        echo "<a href=\"$register_script\">Register</a>";
        exit;
    } else {
        echo "Welcome, $username!";
    }
}

function login_form() 
    {
        global $PHP_SELF;
?>

<form method="post" action="<?php echo "$PHP_SELF"; ?>">
    <div align="center"><center>
        <h3>Please login to use the page you requested</h3>
        <table width="200" cellpadding="5">
            <tr>
            <th width="18%" align="right" nowrap>id</th>
            <td width="82%" nowrap>
                <input type="text" name="userid" />
            </td>
            </tr>
            <tr>
            <th width="18%" align="right" nowrap>password</th>
            <td width="82%" nowrap>
                <input type="password" name="userpassword" />
            </td>
            </tr>
            <tr>
            <td colspan="2" width="100%" nowrap>
                <input type="submit" value="login" name="Submit" />
            </td>
            </tr>
            </table>
            </center>
            </div>
</form>

<?php
    }
    function auth_user($userid, $userpassword)
    {
        global $dbname, $user_tablename;
        $link_id = db_connect($dbname);
        $query = "SELECT DXNumber FROM $user_tablename WHERE DXNumber = '$userid'
                                  AND userpassword = password ('$userpassword')";
        $result = mysql_query ($query);

        if (!mysql_num_rows($result)){
            return 0;
        }else{
            $query_data = mysql_fetch_row($results);
            return $query_data[0];
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:12:23.610

尝试

```
if (!isset $_POST['userid']) { 
```

看看是否有帮助。看起来 $userid 在您分支之前没有设置。

（由于愚蠢的拼写检查器而编辑。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:20:49.593

您没有定义`$userid`或检查表单是否已提交。尝试：

```
if (!isset($_POST['userid'])) { 
```

您在`auth_user`函数中的查询需要如下所示：

```
$query = "SELECT DXNumber FROM $user_tablename WHERE DXNumber = '$userid' AND userpassword ='" . $userpassword."'"; 
```

此外，您对 sql 注入持开放态度。您应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)并[阻止](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)它。

# javascript - 在 javascript 中包含 HTML

> ID：14324088
> 
> 赞同：0
> 
> 时间：2013-01-14T18:08:19.573
> 
> 标签：javascript, jquery, html

我必须`text`在 javascript 中使用负载作为`templates`. 它太糟糕了（我知道）。但是，当我通过 Ajax/PHP/JSON 获取结果时，它很优雅，但结果获取速度有点慢。我在弹出窗口中显示了这件事。所以我又回到了模板。我的问题是：“是否有任何工具可以自动将 HTML 代码解析为 javascript”。

示例：在`HTML`中，以下代码

```
<ul class="tabs">
    <li><a href="#" name="#tab1">Introduction</a></li>
    <li><a href="#" name="#tab2">Round</a></li>
    <li><a href="#" name="#tab3">Rules</a></li>
</ul> 
```

在 javascript 中变为：

```
'<ul class="tabs">'+
    '<li><a href="#" name="#tab1">Introduction</a></li>'+
    '<li><a href="#" name="#tab2">Round</a></li>'+
    '<li><a href="#" name="#tab3">Rules</a></li>'+
'</ul>'+ 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:20:39.797

这是一个如何使用隐藏元素[的示例。](http://jsfiddle.net/2E5fH/)`<code>`Facebook 广泛地做到了这一点。

HTML：

```
<div>here is some normal content</div>
<code class="template" id="template1"> 
  <div>this is a template</div>
</code>

<div id="renderedTemplate"></div> 
```

脚本：

```
var template = $("#template1").html();
var templateOutput = $("#renderedTemplate");

for( var i = 0; i < 10; i++ ){
    templateOutput.append(template);  
} 
```

CSS：

```
.template {
  display: none;
} 
```

但是，由于您不是 Facebook，因此请让您的生活更轻松，并按照@Shmiddty 的建议使用[Handlebars之类的东西。](http://handlebarsjs.com/)它使用了类似的方法，但在组合中添加了强大的模板功能，而不是逐字插入字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:14:26.403

```
<button>Show it</button>
<p style="display: none">Hello 2</p>

$("button").click(function () {
    $("p").show("slow");
}); 
```

[http://api.jquery.com/show/](http://api.jquery.com/show/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:09:50.500

将您的内容放在隐藏的 div 中并使用 jquery 的 .html() 方法加载它。

# c# - 如何在 Azure 中的角色实例之间共享 ASP.NET 中的 WCF 客户端凭据？

> ID：14324089
> 
> 赞同：2
> 
> 时间：2013-01-14T18:08:27.337
> 
> 标签：c#, asp.net, wcf, security, azure

此问题是此处会话问题中 ChannelFactory 缓存的延续：

[在 Azure 上的 ASP.NET 中缓存 WCF ChannelFactory 或客户端代理？](https://stackoverflow.com/questions/14322061/caching-wcf-channelfactory-or-client-proxy-in-asp-net-on-azure)

我如何共享凭据 (UserNameCredentials)，因此现在没有共享，并且必须以某种方式分布在 WCF 客户端的拆分实例中。显而易见的选择是将加密的凭据存储在缓存中？这是个好主意吗？还有其他方法吗？

# wpf - PRISM 4 WPF 登录用户

> ID：14324094
> 
> 赞同：0
> 
> 时间：2013-01-14T18:08:41.790
> 
> 标签：wpf, prism, unity-container

我正在尝试使用 Prism 4 和 UnityContainer for DI 创建一个遵循模块化架构的应用程序。我想知道您将如何在系统中传递当前登录的用户？

我认为用简单的登录表单验证我的用户登录凭据，在应用程序启动时点击我的 dataContext(EntityFramework 4) 并使用以下方法存储在应用程序的 App.Xaml.cs 中，这既好又脏：

```
App.Current.Properties["CurrentUser"] = user; 
```

但显然我加载的模块对应用程序一无所知。卡住...

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:28:55.627

[在这里http://compositewpf.codeplex.com/discussions/429579](http://compositewpf.codeplex.com/discussions/429579)从 CodePlex Prism 讨论中的小伙子那里得到了似乎是“正确”的解决方案

# r - 在 R 中本地（不是全局）设置种子

> ID：14324096
> 
> 赞同：30
> 
> 时间：2013-01-14T18:08:52.357
> 
> 标签：r, global, local, seeding

我只想在 R 中设置种子（在函数内部），但似乎 R 不仅在本地设置种子，而且在全局设置种子。这是我正在尝试（不）做的一个简单示例。

```
myfunction <- function () {
  set.seed(2)
}

# now, whenever I run the two commands below I'll get the same answer
myfunction()
runif(1) 
```

所以，我的问题是：为什么 R 会在全局范围内设置种子，而不仅仅是在我的函数内部？以及如何使 R 仅在我的函数中设置种子？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-14T18:27:43.087

这样的事情对我有用：

```
myfunction <- function () {
  old <- .Random.seed
  set.seed(2)
  res <- runif(1)
  .Random.seed <<- old
  res
} 
```

或者更优雅：

```
myfunction <- function () {
  old <- .Random.seed
  on.exit( { .Random.seed <<- old } )
  set.seed(2)
  runif(1)
} 
```

例如：

```
> myfunction()
[1] 0.1848823
> runif(1)
[1] 0.3472722
> myfunction()
[1] 0.1848823
> runif(1)
[1] 0.4887732 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T09:36:17.460

使用@Romain Francois 的答案，概括为函数：

```
withRandom <- function(expr, seed = 1) {
    old <- .Random.seed
    on.exit({.Random.seed <<- old})
    set.seed(seed)
    expr
} 
```

用法：

```
runif(2)
withRandom(seed = 2, {
    runif(1)
    runif(1)
})
runif(2)
withRandom(seed = 2, runif(2))
runif(2) 
```

输出：

```
> runif(2)
[1] 0.5776099 0.6309793
> withRandom(seed = 2, {
+     runif(1)
+     runif(1)
+ })
[1] 0.702374
> runif(2)
[1] 0.5120159 0.5050239
> withRandom(seed = 2, runif(2))
[1] 0.1848823 0.7023740
> runif(2)
[1] 0.5340354 0.5572494 
```

# objective-c - CLLocationManager 在发布模式下崩溃并出现错误 EXC_BAD_ACCESS 但不是调试模式

> ID：14324099
> 
> 赞同：1
> 
> 时间：2013-01-14T18:08:58.177
> 
> 标签：objective-c, memory-management, exc-bad-access, cllocationmanager, release-mode

弹出位置窗口时，我的游戏总是崩溃。

```
-(void) MyFunction
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyThreeKilometers;
    [locationManager startUpdatingLocation];
} 
```

每当它崩溃时，它都会返回 main 并显示错误**EXC_BAD_ACCESS**。但是，我没有收到任何堆栈跟踪来找出我的问题。僵尸都不提供堆栈跟踪。

一件有趣的事情是，这种崩溃只发生在 iOS 模拟器上的发布模式下。如果我将其更改为调试模式，它会完美运行。如果我在具有发布模式的设备上运行它，它会完美运行。如果我注释掉 [locationManager startUpdatingLocation]，它会完美运行。

我该如何解决这个问题？

# opengl-4 - 简单的三角形不会在 opengl 4.3 中绘制

> ID：14324100
> 
> 赞同：0
> 
> 时间：2013-01-14T18:08:58.903
> 
> 标签：opengl-4

我正在尝试opengl编程，在代码块中加载了一个默认示例，在加载了大量函数指针之后，我在一个窗口中获得了一个opengl 4.3上下文，可以用某种颜色清除（是的！ ），所以我继续尝试渲染一个三角形......好吧，它不工作，不知道我哪里出错了。没运气

这是相关的gl代码：

```
GLuint IndiceArray[3] = {
0, 1, 2
};

const float vertexPositions[] = {
    0.75f, 0.75f,
    0.75f, -0.75f,
    -0.75f, -0.75f,
};

const float vertexColors[] = {
    1.0f, 0.0f, 0.0f, 1.0f,
    0.0f, 1.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f, 1.0f,
};

//Prepare GPU program
vertexID = glCreateShader( GL_VERTEX_SHADER );
fragmentID = glCreateShader( GL_FRAGMENT_SHADER );

glShaderSource(vertexID, 1, &vsSource, NULL) ;
glShaderSource(fragmentID, 1, &fsSource, NULL) ;

glCompileShader( vertexID );
glCompileShader( fragmentID );

programID = glCreateProgram();
glAttachShader( programID, vertexID );
glAttachShader( programID, fragmentID );
glLinkProgram( programID );
glUseProgram( programID );

//Send to OpenGL
glGenBuffers(3, vertexAttribBufferID);

glBindBuffer( GL_ARRAY_BUFFER, vertexAttribBufferID[0] );
glBufferData( GL_ARRAY_BUFFER, sizeof(vertexPositions), vertexPositions, GL_STATIC_DRAW );

glBindBuffer( GL_ARRAY_BUFFER, vertexAttribBufferID[1] );
glBufferData( GL_ARRAY_BUFFER, sizeof(vertexColors), vertexColors, GL_STATIC_DRAW );

glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, vertexAttribBufferID[2] );
glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof(IndiceArray), IndiceArray, GL_STATIC_DRAW );

colorAttribID = glGetAttribLocation( programID, "colorIn" );
positionAttribID = glGetAttribLocation( programID, "vertexPos" );

/* program main loop */
while (!bQuit)
{
    /* check for messages */
    if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        /* handle or dispatch messages */
        if (msg.message == WM_QUIT)
        {
            bQuit = TRUE;
        }
        else
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }
    else
    {
        /* OpenGL animation code goes here */

        glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
        glClear(GL_COLOR_BUFFER_BIT);
        //Render!!
        glBindBuffer( GL_ARRAY_BUFFER, vertexAttribBufferID[0] );
        glEnableVertexAttribArray( positionAttribID );
        glVertexAttribPointer( positionAttribID, 2, GL_FLOAT, GL_FALSE, 0, 0 );

        glBindBuffer( GL_ARRAY_BUFFER, vertexAttribBufferID[1] );
        glEnableVertexAttribArray( colorAttribID );
        glVertexAttribPointer( colorAttribID, 4, GL_FLOAT, GL_FALSE, 0, 0 );

        glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, vertexAttribBufferID[2] );

        glDrawElements( GL_TRIANGLES, 3, GL_UNSIGNED_INT, 0 );
        glDisableVertexAttribArray( colorAttribID );
        glDisableVertexAttribArray( positionAttribID );

        SwapBuffers(hDC);
        Sleep (1);
    } 
```

和着色器：

```
const char vertexShader[] =
"#version 150 core\n"

"in vec2 vertexPos;\n"
"in vec4 colorIn;\n"
"smooth out vec4 outColor;\n"

"void main()\n"
"{\n"
"   gl_Position = vec4(vertexPos, 0.0f, 1.0f);\n"
"   outColor = colorIn;\n"
"}";

const char fragShader[] =
"#version 150 core\n"

"smooth in vec4 inColor;\n"
"out vec4 f_color;\n"

"void main()\n"
"{\n"
"   f_color = inColor;\n"
"}"; 
```

不用说，我将永远感谢任何帮助，可能会让我免于对 OpenGL 感到沮丧！！！

编辑：我只看到清除的背景，以防你想知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:01:28.247

好的，想通了：显然，您在着色器之间传递的数据必须与两边的变量同名，所以我的代码应该是：

```
const char vertexShader[] =
"#version 150 core\n"

"in vec2 vertexPos;\n"
"in vec4 colorIn;\n"
"smooth out vec4 outColor;\n"

"void main()\n"
"{\n"
"   gl_Position = vec4(vertexPos, 0.0f, 1.0f);\n"
"   outColor = colorIn;\n"
"}";

const char fragShader[] =
"#version 150 core\n"

"smooth in vec4 outColor;\n"
"out vec4 f_color;\n"

"void main()\n"
"{\n"
"   f_color = inColor;\n"
"}"; 
```

# uitableview - uitableviewcell 上的 UiTextField 的 Touch Down 事件并不总是有效

> ID：14324101
> 
> 赞同：1
> 
> 时间：2013-01-14T18:08:59.800
> 
> 标签：uitableview, uitextfield, storyboard, touch

好的，我是 iOS 新手，我发现了一些非常奇特的东西。我正在使用嵌入在 UITableViewCell 中的 UITextField，并且我尝试在触摸文本字段时显示带有一些选项的 UIPopOverController。

我正在使用 EditingDidBegin 事件，它工作正常，但是当我尝试触摸两次相同的文本字段时，第一次只能工作，所以我必须触摸另一个文本字段并再次触摸第一个文本字段。

因此，我尝试更改并使用 TouchDown 事件，但我发现它并不总是正常工作我必须多次触摸文本字段，有时它永远无法工作，我不知道为什么，因为当我在嵌入在 UiView 中的文本字段一切正常。

我不知道是否必须在 UiTableView 或 UITableViewCell 上进行更改，我正在使用带有 xCode 4.2 的情节提要。

如果有人可以帮助我，我会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:18:07.277

完成后，请在您的文本字段上调用`EditingDidBegin`。`resignFirstResponder`现在，下次您点击文本字段时，它应该可以按预期工作。

# sonarqube - 为什么 sonar(JaCoCo) 要求我测试我的包裹？

> ID：14324106
> 
> 赞同：3
> 
> 时间：2013-01-14T18:09:47.973
> 
> 标签：sonarqube, jacoco

我正在尝试关闭我的应用程序中的一些测试漏洞，并发现 JaCoCo 声纳插件在我的枚举中的覆盖率较小，因为它认为我应该测试包名称。

这是为什么？

它在我的一个枚举中显示了 97% 的覆盖率，并在包声明的顶部显示了一条红线，告诉我测试它......它在所有枚举和枚举中都这样做。

![声纳截图](../Images/c2082106405650ec7f83e8d70e991a0c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:41:50.147

我来这里是为了寻找这个问题的答案，经过更多的挖掘，我发现这是由于一些静态方法可以在 Jacoco 期望被覆盖的编译枚举类的字节码中找到。经过一些实验，我想出了以下超类，用于使用 JUnit 4 进行单元测试，这些单元测试专注于枚举。这解决了我的枚举覆盖问题。

```
import org.junit.Test;    
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import static org.junit.Assert.assertEquals;

public abstract class EnumTest {
    @Test
    public void verifyEnumStatics() throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        Class e = getEnumUnderTest();
        Method valuesMethod = e.getMethod("values");
        Object[] values = (Object[]) valuesMethod.invoke(null);
        Method valueOfMethod = e.getMethod("valueOf", String.class);
        assertEquals(values[0], valueOfMethod.invoke(null, ((Enum)values[0]).name()));
    }

    protected abstract Class getEnumUnderTest();
} 
```

然后像这样使用它：

```
public class TravelTypeTest extends EnumTest {
    @Override
    protected Class getEnumUnderTest() {
        return TravelType.class;
    }

    // other test methods if needed
} 
```

这是一个粗略的第一次尝试 - 它不适用于无论出于何种原因没有任何条目的枚举，并且无疑有更好的方法来获得相同的效果，但这将通过确保您可以锻炼生成的静态方法检索枚举的值，并且如果将第一个枚举条目的名称传递给 valueOf() 方法，您将获得第一个枚举条目。

理想情况下，我们会编写一个测试来搜索被测包中的所有枚举并以相同的方式自动执行它们（并且避免必须记住为每个继承自 EnumTest 的新枚举创建一个新的测试类），但我不'没有很多枚举，所以我还没有感到任何压力来尝试这个。

# google-calendar-api - OpenSocial API 在 Google 日历小工具中停止工作

> ID：14324109
> 
> 赞同：1
> 
> 时间：2013-01-14T18:09:50.283
> 
> 标签：google-calendar-api, opensocial, google-gadget, google-oauth

我发现我们在日历侧边栏小工具中使用的 opensocial API 停止工作。它在星期五仍然正常工作。我们使用 opensocial 来存储和获取一些键值数据，今天我们每次尝试读取任何内容时都会收到错误代码：badRequest（没有错误消息）。

这是我们正在使用的代码示例：

```
var idspec = opensocial.newIdSpec({ "userId" : "VIEWER", "groupId" : "SELF" });
var req = opensocial.newDataRequest();
req.add(req.newFetchPersonAppDataRequest(idspec, "mydata"), "get_data");
req.send(function(data){console.log(data)}); 
```

这是我们从谷歌得到的回应：

```
errorMessage_: undefined
  globalError_: true
  responseItems_: Object
  get_data: opensocial.ResponseItem
    data_: null
    errorCode_: "badRequest"
    errorMessage_: undefined 
```

该代码与此处描述的代码非常相似：http: [//docs.opensocial.org/display/OSREF/App+Data](http://docs.opensocial.org/display/OSREF/App+Data)

有没有人有类似的问题，或者知道如何解决它？我们正在我们的生产系统上使用它，该系统从早上开始就关闭了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:08:59.363

该 API 已被弃用。为了解决这个问题，我更改了使用 Google oAuth 2.0 导入 Google 联系人的实现，并且可以正常工作。

[https://developers.google.com/igoogle/docs/opensocial_rest_rpc](https://developers.google.com/igoogle/docs/opensocial_rest_rpc)（已弃用）。

要使用 Google oAuth 2.0，请访问以下链接：-

[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

# python - Python pickle 索引超出范围

> ID：14324116
> 
> 赞同：1
> 
> 时间：2013-01-14T18:10:37.627
> 
> 标签：python, windows, macos, sockets, pickle

当我尝试在 Windows 机器上运行我的 py 文件时出现以下错误，在 Mac 上一切正常，但我无法让两台机器相互通信。我必须在 ascii 中“转储”吗？如果是这样，我该怎么做？有什么建议么？谢谢！！

```
Traceback (most recent call last):
File "C:\Users\Keith\Desktop\rcserver\tcpserver_simpleReceive.py", line 23, in <module>
new_data = pickle.loads(data)
File "C:\Python27\lib\pickle.py", line 1382, in loads
return Unpickler(file).load()
File "C:\Python27\lib\pickle.py", line 858, in load
dispatch[key](self)
File "C:\Python27\lib\pickle.py", line 1165, in load_put
self.memo[self.readline()[:-1]] = self.stack[-1]
IndexError: list index out of range 
```

垃圾场：

```
if e.type == pygame.JOYAXISMOTION:
    client_socket.sendall (pickle.dumps(e.dict,0)) 
```

这是负载：

```
 data = client_socket.recv(1024)
new_data = pickle.loads(data) 
```

# php - 在 mysql_query 警告中添加 php

> ID：14324119
> 
> 赞同：-3
> 
> 时间：2013-01-14T18:10:57.063
> 
> 标签：php, mysql, warnings

我对 php 非常陌生，现在我尝试添加以下代码：`<?php echo $user_info['username']; ?>`在第 5 行内：

```
 <? // counter.php
if (!isset($_GET['show']) || $_COOKIE['cookietracker'] != 1) {
$conid = mysql_connect("localhost", "root", "") or die("Can't connect to database");
mysql_select_db("servers");
$query = mysql_query("UPDATE login SET points=points+1 WHERE username='<?php echo $user_info['username']; ?>'");
mysql_close($conid); unset($query);
setcookie("countertracker",1,time()+7200);
} else {
$query=mysql_query("SELECT points FROM login");
$result = mysql_fetch_row($query);
echo $result['points'];
}
?> 
```

但是当我这样做时，我得到了这个错误：`Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in C:\xampp\htdocs\servers\user_profiles\profile.php on line 5` 我一直在寻找！

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:13:55.243

您已经使用 PHP 语法，因此只需将变量连接到字符串中。试试这个：

```
$query = mysql_query("UPDATE login SET points=points+1 WHERE username='" . $user_info['username'] . "'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:13:21.087

尝试：

```
$query = mysql_query("UPDATE login SET points=points+1 WHERE username='".$user_info['username']."'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:13:47.803

试试这个：

`$query = mysql_query("UPDATE login SET points=points+1 WHERE username='" . $user_info['username'] . "'");`

您已经在 PHP 中，因此您无需重新声明您在 PHP 中。您只是连接一个字符串。

# java - 带有不连续系列折线图的 JFree Chart

> ID：14324121
> 
> 赞同：3
> 
> 时间：2013-01-14T18:11:07.440
> 
> 标签：java, jfreechart, linechart

我正在绘制 XYChart 范围，例如 1 到 10，然后 20 到 30 作为系列 1，以及 11 到 19 作为系列 2。它期待在 JFreeChart serie1 (1,0), (10,0) (20, 0 ), (30, 0) 和 series2 (11, 0), (19, 0)。问题是系列 1 线连接了从 1 到 30 的值，因此与系列 2 重叠。是否可以隐藏从 11 到 19 的系列 1。我可以使用两个以上的系列来做到这一点，但在这种情况下，它看起来很奇怪两个项目的图例中的多个系列。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:02:08.970

谢谢你的帮助。我是这样做的。 ![这是我的截图](../Images/52b8e9b3f7c27e47e88023d72f16f584.png)

要完成有问题的任务，我们需要在系列中添加另一个点，所以在上述情况下

series1 (1,0), (10,0), (10, null) (20, 0), (30, 0) series2 (11, 0), (19, 0)

(10, null) 将系列 1 从 10 打破到 20。这样系列 2 将占据我的情况如图所示的空间。让我知道是否有人需要进一步的帮助。

# security - Tomcat 6 和 SSL 不工作

> ID：14324122
> 
> 赞同：0
> 
> 时间：2013-01-14T18:11:09.117
> 
> 标签：security, tomcat, ssl, https, tomcat6

我阅读了很多关于如何配置 tomcat 以使用 ssl 的教程。

我在**http://localhost:8080**和**http://localhost:8443**中访问我的应用程序，但我无法在**https://localhost:8443 中访问。**

我使用了 apache [HOWTO](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)。

文件 key.keystore 可以工作，因为它在 Jboss 的其他应用程序中使用。

Bellow，它是 server.xml 配置中的新连接器。

```
<Connector 
    port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol" 
    acceptCount="100" 
    SSLEnable="true" scheme="https" secure="true" 
    clientAuth="false" sslProtocol="TLS" 
    keystoreFile="C:/ambiente/server/tomcat/Tomcat6.0/conf/key.keystore" keystorePass="xxxx" /> 
```

有什么问题？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:37:21.860

尝试使用 **SSLEnabled** ="true" scheme="https" secure="true"

# javascript - 模块粒度策略

> ID：14324123
> 
> 赞同：2
> 
> 时间：2013-01-14T18:11:10.280
> 
> 标签：javascript, knockout.js, requirejs

我正在使用 RequireJS 构建一个 KnockoutJS Web 应用程序来对其进行模块化。我正在尝试在几种将事物分解为模块的策略之间做出决定。

**扁平化方法**：
一种方法具有更扁平的目录结构和更大的模块：

```
/webapp
 |-/scripts
    |-/templates
    |  |-car_edit.html
    |  |-car-view.html
    |  |-person_edit.html
    |  |-person_view.html
    |-main.js
    |-person.js
    |-car.js 
```

例如，person 模块（在 person.js 中）是这样实现的：

```
define(['jquery', 'knockout', ...], function($, ko, ...) {

  var PersonViewModel = function PersonViewModel() { ... };

  var load = function load(id) { ... };

  var create = function create() { ... };

  var view = function view(element, model) { ... };

  var edit = function edit(element, model) { ... };

  return {
    Model : PersonViewModel, // exposes ViewModel for testing
    create : create,         // reserve id on server, return new empty Person
    load : load,             // get data from server, return new Person w/ data
    view : view,             // load view template, bind Person
    edit : edit              // load edit template, bind Person
  };
}); 
```

**深层结构方法：**
另一种方法是使用更深层的目录结构和更小的模块：

```
/webapp
 |-/scripts
    |-/car
    |  |-/templates
    |  |  |-edit.html
    |  |  |-view.html
    |  |- Model.js
    |  |- view.js
    |  |- edit.js
    |  |- create.js
    |  |- load.js
    |-/person
    |  |-/templates
    |  |  |-edit.html
    |  |  |-view.html
    |  |- Model.js
    |  |- view.js
    |  |- edit.js
    |  |- create.js
    |  |- load.js
    |-main.js 
```

代码类似于之前的示例，除了模块的每个部分现在都是它自己的模块：

```
//  /person/Model.js
define(['jquery', 'knockout', ...], function($, ko, ...) {

  return function Model() { ... };

});

//  /person/view.js:
define(['jquery', 'knockout', ...], function($, ko, ...) {

  return function view(element, model) { ... };

}); 
```

等等。

两种方法都是首选吗？我错过了更好的方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T04:37:52.830

使用 Backbone/Require 我们正在使用[这个 Boilerplate](https://github.com/gfranko/Backbone-Require-Boilerplate)，我认为您可以将它与另一个框架一起使用，并进行少量调整。

很全，找个模块也很容易，即使是第一次找代码。

# c# - 将 .NET 项目从 4.5 转换为 4.0 的最简单方法？

> ID：14324127
> 
> 赞同：6
> 
> 时间：2013-01-14T18:11:34.210
> 
> 标签：c#, .net

我有一个我在 4.5 中构建的 .NET 应用程序，它引用了一堆在 4.5 中构建的库，这些库本身也引用了 4.5 等。我试图将应用程序分发到的用户组有运行可执行文件时出现问题，因为它们安装了 4.0；特别是，他们得到了 MissingMethodException：

```
Method not found: 'System.Type System.Runtime.InteropServices.Marshal.GetTypeFromCLSID(System.Guid)'. 
```

因为我们可能无法让每个用户升级到 4.5（因为他们都没有他们机器上的管理员权限，这需要为每个用户单独的升级请求），我正在寻找一种简单的方法将项目重建为 4.0 . 这似乎要求我在 4.0 中重建每个库及其引用的库；有没有比逐个浏览每个库并构建 4.0 版本更简单的方法？我在想可能像“在目标框架中重建所有引用的库”的一键式选项或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:16:05.063

当我使用 Visual Studio 时，我右键单击项目，更改框架，修复引用并重新编译。通常是直截了当。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:52:15.103

如果您对 .Net 4.5 DLL 有依赖关系，那么如果您想成功降级您的项目，您还需要获得这些 .Net 4.0 版本。.Net 项目只能引用与引用程序集相同的 .Net 版本的 .Net DLL。

最简单的方法是使用[NuGet](http://nuget.org)之类的东西来管理您的依赖项。请注意，当您在 VS 中更改项目的目标框架版本时，您需要使用 NuGet 卸载并重新安装依赖项，因为当您更改目标框架版本时，NuGet 不会自动为您执行此操作。

当然，如果所有依赖项都是您自己的代码，并且您没有通过 NuGet 等依赖项管理系统发布它，那么您还需要将所有其他代码降级到 .Net 4.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:18:20.280

请查看[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb772098%28v=vs.90%29.aspx)以正确地将您的项目切换到较低的目标框架，而不会出现问题！对于版本而言，它有点过时，但过程与描述的相同！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T06:56:24.257

这是基于我的经验。我最初在.net framework 4.5 中创建了一个应用程序，但我想在.net framework 4.0 中转换它。我创建了最初创建 4.0 的新项目，然后我复制并粘贴了我以前的应用程序的所有表单和控件，它可以工作。框架 4.5 使用 Aero2 而 4.0 是 Aero...祝你好运 :)

# matlab - 绘制点 (x,y) 并使用第三个 (z) 作为 Matlab 中的颜色代码

> ID：14324132
> 
> 赞同：4
> 
> 时间：2013-01-14T18:11:44.783
> 
> 标签：matlab, matlab-figure

> **可能重复：**
> [matlab：具有大量数据点的散点图](https://stackoverflow.com/questions/13302623/matlab-scatter-plots-with-high-number-of-datapoints)

我有 3 个向量，每个向量包含 315,000 个元素。X、Y 和 Z。X 和 Y 是坐标，Z 是一个值。我必须将坐标绘制为二维图中的点，Z 是 X 和 Y 的每个坐标处的颜色指示器。我尝试过“分散”命令，但速度非常慢。有人会建议更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:20:38.390

根据您要查找的颜色图类型，您可以尝试类似

```
zmin=min(Z);
zmax=max(Z);
map=colormap;
color_steps=size(map,1);

hold on
for i=1:color_steps
    ind=find(Z<zmin+i*(zmax-zmin)/color_steps & Z>=zmin+(i-1)*(zmax-zmin)/color_steps);
    plot(X(ind),Y(ind),'o','Color',map(i,:));
end 
```

这个发现有点贵，但似乎比`scatter`. 我相信你可以进一步优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:43:52.447

[在这里](http://www.mathworks.com/matlabcentral/fileexchange/3747-cline-m)尝试`cline`从 MATLAB 文件交换。看起来它完全符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:02:42.880

您的代码很慢，因为向量的大小很大，而不是因为 SCATTER 函数。尝试将它们分解为更小尺寸的向量（例如，每个向量 10 个元素）并将每个向量放入元胞数组的一个元胞中。然后循环遍历单元阵列并单独分散每个较小的向量，以避免将太多加载到内存中。

```
hold on
for i=1:numel(XcoordCellArray):
  scatter(XcoordCellArray{i},YcoordCellArray{i},S,ZcoordCellArray{i})
end 
```

# interface-builder - 文件所有者没有响应？

> ID：14324134
> 
> 赞同：0
> 
> 时间：2013-01-14T18:11:45.397
> 
> 标签：interface-builder

我正在使用 IB 创建应用程序。但是文件的所有者不想工作！我看不到，其中有什么，无法从 IB 中的按钮拖动线条到代码。在代码中，一切正常。与急救人员的联系很好，但这不是我想要的。

例如，现在我无法将 UIButton 与它的 IBOutlet 连接起来，因为当我从按钮拖动线到代码时，没有任何反应。

有什么问题？

谢谢，马克西姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:15:49.210

在 IB 中设置文件的所有者类：

1.  选择文件的所有者（通过单击它）
2.  在实用程序区域中打开“身份检查器”。
3.  将最上面的字段“自定义类”设置为文件所有者的类。

# python - python 模糊 levenshtein 比率提前退出？

> ID：14324146
> 
> 赞同：1
> 
> 时间：2013-01-14T18:12:40.493
> 
> 标签：python, levenshtein-distance, fuzzy-search

我正在尝试相互比较 100k 个字符串。我无法进一步减少问题的大小（即集合中的#strings）。我正在使用 Levenshtein 比率进行比较。如果比率大于 0.9，我想将 2 个字符串存储在一个列表中。我的问题是关于运行时优化。由于 0.9 是我的标准，有没有办法将此值传递给 Levenshtein.ratio() 并期望在负面情况下提前退出？如果存在提前退出的方法，则可以节省一些运行时间。在 Levenshtein 算法中是否可以在计算完整距离之前尽早获得比率。

例如

```
import Levenshtein 
Levenshtein.ratio('lot of runtime','why not an early exit in this case by taking the intended ratio') 
```

有没有类似的东西：

```
Levenshtein.ratio('lot of runtime','why not an early exit in this case by taking the intended ratio', 0.9) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:19:43.890

是的，像您假设的那样提前退出是可能的。

该`Levenshtein`模块的源代码是免费提供的，因此您可以自己添加该功能。

您可能希望考虑另一种优化：三角不等式。如果字符串 A 与字符串 B 20% 相似，而字符串 B 与字符串 C 相似 90%，那么您知道字符串 A 不会与字符串 C 90% 相似。那是不可能的，所以您没有实际计算 AC Levenshtein 距离。

# google-apps-script - CalendarApp.getCalendarById 返回 null

> ID：14324147
> 
> 赞同：3
> 
> 时间：2013-01-14T18:12:52.333
> 
> 标签：google-apps-script

我们正在使用 Google Apps Premier，我刚刚注意到该`CalendarApp.getCalendarById()`功能的行为发生了变化，但它一定在上个月左右发生了变化，因为它在圣诞假期前工作。

使用 ) 函数的先前行为（12/2012 及之前）`CalendarApp.getCalendarById(`曾经是只要日历资源存在就始终返回日历对象的行为。现在，除非用户订阅了日历资源，否则此函数将返回 null。在我所做的测试中，只要订阅了我就会得到一个日历资源对象，而一旦我取消订阅，我就会开始得到一个空对象。我没有使用常规用户日历进行测试，并且仅使用资源（例如房间）进行了测试。

`var calendar = CalendarApp.getCalendarById(calendarID);`

这很烦人，因为我需要对许多我不想订阅的房间运行脚本。当前订阅房间或日历的解决方法不是很可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:58:24.950

情况一直如此。您一定是以前订阅过但没有意识到的。我向你保证，这段代码没有改变。

# javascript - 取消分配js中对象文字使用的内存

> ID：14324149
> 
> 赞同：2
> 
> 时间：2013-01-14T18:12:59.233
> 
> 标签：javascript

我知道 js 具有垃圾回收功能，可以释放不再引用的内存，但我很好奇 GC 是否适用于像这样引用它们的对象：

```
var x = {
  b:function(){
    alert('hello');
  },
  y:function(){ //init listeners
    $(some-dom-el).click(function(){
       x.b();
    });
  },
  z:function(){
    var ex = this.r(55,9000);
  },
  r:function(a,b){
    return a + b;
  }
}

$(function(){
   x.y();
}); 
```

那么使用`delete`on`var x`成功删除对象（当然是在手动删除事件侦听器之后）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:14:44.400

GC 确实知道如何处理循环引用。（旧的 IE 除外）。

但是，如果您在活动 DOM 元素中的事件处理程序中有引用，则您的对象将不会被 GC，因为该引用将永远存在。（或直到您删除处理程序或元素）

# version-control - trigger.io 多开发人员最佳实践

> ID：14324150
> 
> 赞同：2
> 
> 时间：2013-01-14T18:13:03.843
> 
> 标签：version-control, trigger.io

有没有人有关于如何在 trigger.io 平台上与多个开发人员一起开发的建议？我们有一个现有的源代码存储库/代码审查流程/暂存流程，并希望在我们涉足移动设备时以一种理智的方式共享 trigger.io 构建系统。

特别是，我们希望一些开发人员能够使用构建系统，并在我们为服务付费时启用额外的模块。

在这个 trigger.io 系统中似乎没有太多的文档或支持...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:58:38.340

支持团队工作实际上是我们最近发布的一项功能。我们刚刚写了一篇博文，应该足以让您开始使用它：[http ://trigger.io/cross-platform-application-development-blog/2013/01/15/introducing-projects/](http://trigger.io/cross-platform-application-development-blog/2013/01/15/introducing-projects/)

如果您有任何反馈或遇到任何问题，请在此处提问或发送电子邮件至 support@trigger.io。

# linux - 文件大小可以用来检测部分追加吗？

> ID：14324151
> 
> 赞同：1
> 
> 时间：2013-01-14T18:13:05.970
> 
> 标签：linux, unix, file-io, filesystems, posix

我正在考虑如何让我的应用程序在程序或操作系统崩溃后检测部分写入的记录。由于记录只**附加**到文件（从不被覆盖），写入时崩溃是否保证产生比应有的更短的文件大小？即使文件以读写模式而不是附加模式打开，只要写入始终在文件末尾，这是否也能保证？这将大大简化崩溃恢复，因为将最后一条记录的预期大小和位置与实际文件大小进行比较就足以检测到部分写入。

我知道随机访问写入可以由文件系统重新排序，但我无法找到有关附加时是否会发生这种情况的信息。我想一个乱序追加将需要文件系统在（稀疏）文件的尾部创建一个“洞”，在洞之外写入块，然后填充中间的块，但我希望这种方法效率很低，以至于没有人会以这种方式实现他们的文件系统。

我想另一个问题可能是文件系统在将新块附加到文件之前更新目录条目的文件大小字段，并且操作系统在两者之间崩溃。这在实践中是否发生过？（也许是ext4？）有没有一种快速的方法来检测它？（当尝试读取根据文件大小应该存在的未写入块时会发生什么？）

是否还有其他任何事情（例如磁盘/闪存驱动器执行的写入重新排序）会妨碍使用文件大小作为检测部分追加的方式？我不希望能够在我的应用程序中弥补这种驱动技巧，但了解一下会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:16:59.227

如果您想确保您永远不会丢失记录，您需要一个一致的日志或交易系统来存储您的文件。

除非您设置 O_DIRECT [您可能不想这样做]，或者您使用标记来指示“这已完全提交”，否则绝对不能保证写入已经完成，这仅在文件时写入已经关了。您可以在主文件中执行此操作，或者，例如，有一个在外部记录“最后写入记录”的文件。如果您打开和关闭该文件，只要 APP 是崩溃的，它应该是安全的 - 如果操作系统崩溃 [或以其他方式突然停止 - 例如断电、磁盘拔出等]，所有赌注都关闭了。

写入重新排序和写入缓存可以/可以在所有级别完成 - C 库、操作系统、文件系统模块和硬盘/控制器本身都能够重新排序写入。

# sdl - 如何在 Ubuntu 12.04.1 LTS 上安装 SDL_image？

> ID：14324154
> 
> 赞同：7
> 
> 时间：2013-01-14T18:13:37.987
> 
> 标签：sdl, ubuntu-12.04

我安装了 ubuntu 12.04.1 LTS。我刚刚安装了一个编译器来进行 C++ 编程。它的名字叫安茹塔。这是一个免费的编程软件。我想用那个做简单的游戏，但它向我展示了：`IMG_Load in-lSDL_image... no...`而且`SDL_image not found`，正如你在图片中看到的......

我试图谷歌它，安装它，但它不会工作。最简单的方法是什么？还是更适合 linux 上的新手游戏程序员？:-)

图片文件：freeimagehosting dot net/oo5dq

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-09T22:19:34.457

`sudo apt-get install libsdl-image1.2-dev`

在这里找到：
[如何在 linux 上安装 c 库（特别是 SDL_image）](https://stackoverflow.com/questions/12102657/how-to-install-c-library-on-linux-in-particular-sdl-image)

在 ubuntu 12.04 上为我工作

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-14T18:18:11.673

SDL_Image 是一个用于 C++ 开发的库。我建议首先使用 rad IDE 进行开发 - CodeBlocks 很好：

[http://www.codeblocks.org/downloads](http://www.codeblocks.org/downloads)

然后我建议遵循这些教程，它将指导您安装用于 C++ 游戏开发的相关 SDL 库 - SDL_Image 只是其中之一......而不是我要开始的那个：

[http://www.youtube.com/watch?v=Lb_Jy5HGMsk](http://www.youtube.com/watch?v=Lb_Jy5HGMsk)

这让我开始使用 SDL 和 C++ 开发。从那以后，我制作了一款具有不错图形 (2D) 和可玩性的游戏，以及使用 SDL_net 的在线组件。

祝你好运！

# gcc - 未定义对“dl_iterate_phdr”的引用

> ID：14324157
> 
> 赞同：4
> 
> 时间：2013-01-14T18:13:56.670
> 
> 标签：gcc, linker, ld

我需要帮助！！我正在尝试构建一个独立的可执行文件，即没有任何动态链接。

我编写了一个小测试程序，为它生成了一个名为 test.o 的可重定位目标文件。当我尝试使用 GNU 链接器构建独立可执行文件时，出现以下错误：

$ld -static -o test test.o /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/libc.a /usr/lib/gcc/i486-linux-gnu/4.4/libgcc .a /usr/lib/gcc/i486-linux-gnu/4.4/libgcc_eh.a /usr/lib/gcc/i486-linux-gnu/4.4/libgcc_eh.a(unwind-dw2-fde-glibc.o)：在函数`_Unwind_Find_FDE': (.text+0x190b): undefined reference to`dl_iterate_phdr'

如何解决**未定义的符号 dl_iterate_phdr**。该符号出现在哪个档案中？

谢谢！！！

编辑1：

以防万一我不是很清楚，我的动机是生成一个独立的可执行文件，即一个在加载到内存时完全准备好执行的可执行文件，即）所有符号解析和重定位都由程序链接器本身而不是动态链接器完成. 是否可以生成这样的可执行文件？

最后更新：

现在我让它直接使用以下命令来遵守 ld ：

$ld -static -o 测试 /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/gcc/i486-linux-gnu/4.4.3/crtbeginT.o /usr/lib/gcc/ i486-linux-gnu/4.4.3/crtend.o test.o --start-group /usr/lib/gcc/i486-linux-gnu/4.4.3/libgcc.a /usr/lib/gcc/i486- linux-gnu/4.4.3/libgcc_eh.a /usr/lib/libc.a --end-group

man ld 说 --start-group archives --endgroup 用于解析循环引用！！我还发现符号 dl_iterate_phdr 是在 libc.a 中定义的。

感谢你的帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:49:51.900

> 当我尝试使用 GNU 链接器构建独立的可执行文件时

不。使用`ld`链接任何用户空间程序通常是一个错误。您的链接行肯定不正确。

使用编译器驱动程序为您完成繁重的工作。这应该有效：

```
gcc -static -o test test.o 
```

> 我想使用 ld 因为我想构建一个独立的可执行文件

是什么让您相信 GCC 构建的可执行文件不如 ld 构建的可执行文件*那么*独立？不管是什么，你都错了：`gcc`只是`ld`用正确的参数调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-01T22:38:20.070

如果在针对 android 时遇到此错误，则需要链接 libdl.so (-ldl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-09T06:19:33.893

> gcc -o 主要 main.c -L 。-static-libgcc -Wl，-static -lhello -lc

# ios - 居中自定义大小的 UIModalPresentationPageSheet？

> ID：14324161
> 
> 赞同：3
> 
> 时间：2013-01-14T18:14:15.477
> 
> 标签：ios, ipad, cocoa-touch, ios6

我们可以使用以下代码（如下）创建非标准尺寸的表单视图，但生成的视图不是居中的——x 坐标始终是标准尺寸的表单视图所在的位置。更改视图和超级视图的中心属性不会以有用的方式影响任何内容。我们如何使用正确居中的自定义表单大小？

将以下代码添加到显示为 的视图控制器中`UIModalPresentationPageSheet`：

```
@implementation MySpecialFormsheet {
    CGRect _realBounds;
} 

- (void)viewDidLoad {
    // code below works great, but the resulting view isn't centered.
    _realBounds = self.view.bounds;
    [super viewDidLoad];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.view.superview.bounds = _realBounds;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:19:47.913

我只是在展示它之后才发现成功改变了框架。我实际上是这样做的：

```
GameSetupViewController *gameSetup = [[GameSetupViewController alloc] init];

[gameSetup setDelegate:self];

[gameSetup setModalPresentationStyle:UIModalPresentationPageSheet];

[self presentModalViewController:gameSetup animated:YES];

[gameSetup.view.superview setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];
[gameSetup.view.superview setFrame:CGRectMake(64, 64, 896, 640)]; 
```

但也许您可以使用 viewDidAppear 或其他一些句柄来侥幸成功。

# sqlite - SQLite 合并两列

> ID：14324171
> 
> 赞同：2
> 
> 时间：2013-01-14T18:15:29.403
> 
> 标签：sqlite, concatenation

此查询返回包含操作系统信息的两个单独的列，因为数据是基于扫描工具自动写入数据库表的，我无法手动更改列。我正在尝试编写一个将两行合并为一的查询（使用 operating_system_version 行中的数据填充操作系统行中的空白。

我现在的查询如下：

```
SELECT device_type, operating_system, operating_system_version
FROM DEVICES
WHERE user_name like '|%front-%|'
OR user_name like '|%back-%|'
OR user_name like '|%ap-%|'
OR user_name like '|%me-%|'
OR user_name like '|%mg-%|' 
```

它返回：

```
device_type    operating_system        operating_system_version

desktop         windows xp
desktop                                 windows 7 professional
desktop         windows xp              
desktop                                 windows 7 professional 
```

我希望它返回如下内容：

```
device_type    OS

desktop         windows xp
desktop         windows 7 professional                        
desktop         windows xp              
desktop         windows 7 professional 
```

我试过添加|| 如下所示，但它没有返回数据：

```
SELECT device_type, operating_system||operating_system_version
FROM DEVICES
WHERE user_name like '|%front-%|'
OR user_name like '|%back-%|'
OR user_name like '|%ap-%|'
OR user_name like '|%me-%|'
OR user_name like '|%mg-%|' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:25:57.207

```
SELECT device_type, coalesce(operating_system,operating_system_version) AS OS
FROM DEVICES
WHERE user_name like '|%front-%|'
OR user_name like '|%back-%|'
OR user_name like '|%ap-%|'
OR user_name like '|%me-%|'
OR user_name like '|%mg-%|' 
```

这将选择操作系统，或者如果为 null，则选择 operating_system_version 并将其作为列名 OS 返回。

如果要连接这两个字段，请尝试

```
SELECT device_type, coalesce(operating_system,'') || coalese(operating_system_version,'') AS OS
FROM DEVICES
WHERE user_name like '|%front-%|'
OR user_name like '|%back-%|'
OR user_name like '|%ap-%|'
OR user_name like '|%me-%|'
OR user_name like '|%mg-%|' 
```

# php - PHP xpath 包含类和不包含类

> ID：14324179
> 
> 赞同：25
> 
> 时间：2013-01-14T18:16:11.707
> 
> 标签：php, xpath, domxpath, xpathquery

标题总结了它。我正在尝试查询 HTML 文件以查找包含 class`result`且不包含 class的所有 div 标签`grid`。

```
<div class="result grid">skip this div</div>
<div class="result">grab this one</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-14T18:28:08.720

这应该这样做：

```
<?php
$doc = new DOMDocument();
$doc->loadHTMLFile('test.html');

$xpath = new DOMXPath($doc);
$nodeList = $xpath->query(
    "//div[contains(@class, 'result') and not(contains(@class, 'grid'))]");

foreach ($nodeList as $node) {
  echo $node->nodeName . "\n";
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T18:26:16.263

您的 XPath 将是`//div[contains(concat(' ', @class, ' '), ' result ') and not(contains(concat(' ', @class, ' '), ' grid '))]`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T18:35:47.890

XPATH 语法将是...

```
//div[not(contains(@class, 'grid'))] 
```

# c - 将两个不同的结构传递给同一个函数

> ID：14324182
> 
> 赞同：5
> 
> 时间：2013-01-14T18:16:26.563
> 
> 标签：c, function, struct, parameters

我有 2 个不同大小的结构，我想有一个可以将它们传递到的函数。但是，我不知道如何定义函数的参数以接受 2 个不同的结构。

我的结构如下

```
struct {
    int a;             // 2 byte
    int b;             // 2 byte
    int c;             // 2 byte
    int d;             // 2 byte
}  person1;                // 8 bytes

struct {
    int a;            // 2 byte
    DeviceAddress b;  // 8 bytes
    int c             // 2 bytes
    float d;      // 4 bytes
}  person2;               // 16 bytes

function print_struct(struct& ?????)
{
     actions here....
}

print_struct(person1);
print_struct(person2); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:22:51.843

不幸的是，C 中不相关结构的唯一选择是将指针传递给无类型的结构（即 as `void*`），并“在侧面”传递类型，如下所示：

```
struct person1_t {
    int a;             // 2 byte
    int b;             // 2 byte
    int c;             // 2 byte
    int d;             // 2 byte
}  person1;

struct person2_t {
    int a;            // 2 byte
    DeviceAddress b;  // 8 bytes
    int c             // 2 bytes
    float d;      // 4 bytes
}  person2;

void print_struct(void* ptr, int structKind) {
    switch (structKind) {
        case 1:
            struct person1 *p1 = (struct person1_t*)ptr;
            // Print p1->a, p1->b, and so on
            break;
        case 2:
            struct person2 *p2 = (struct person2_t*)ptr;
            // Print p2->a, p2->b, and so on
            break;
    }
}

print_struct(&person1, 1);
print_struct(&person2, 2); 
```

但是，这种方法很容易出错，因为编译器无法为您进行类型检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:19:11.180

这真的不可能。您可以创建一个包含两个结构和某种标识符的联合。然后将联合传入并使用标识符来确定其中包含哪个结构。

```
typedef struct sp1 {
    int a;             // 2 byte
    int b;             // 2 byte
    int c;             // 2 byte
    int d;             // 2 byte
}  person1_t;          // 8 bytes

typedef struct sp2 {
    int a;            // 2 byte
    DeviceAddress b;  // 8 bytes
    int c             // 2 bytes
    float d;          // 4 bytes
}  person2_t;         // 16 bytes

typedef union {
    person1_t person1;
    person2_t person2;
} people;

function print_struct(people *p, int id) // e.g. id == 1, struct is person1
{
    switch (id)
    {
         case 1: // Do person 1 things
         break;

         case 2: // Do person 2 things
         break;

         default: // Error
         break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:02:43.523

正如 dasblinkenlight 所说，如果您希望能够将两个不同的结构传递给函数，那么使用`void *`传递泛型指针将是可行的方法，但是这样做不是类型安全的，并且很容易导致容易出错的代码.

您想通过拥有两个独立的结构来实现什么功能？您可以考虑将信息组合到一个结构中，并使用一个打印函数来打印出所有非零值？

原谅可能不是最佳的 c 代码，我远非专家，这只是为了说明这一点:)

```
typedef struct datastruct {
    int a;
    int b;
    float c;
} datastruct;

void printData(datastruct *d){

    printf("Data:\n")
    printf((d->a) ? "a=%d", a : "");
    printf((d->b) ? "b=%d", b : "");
    printf((d->c) ? "c=%.2f", c : "");
    printf("\n");
}

int main(void) {

    datastruct data = {0};
    /* now set values as needed */

    printData(&data);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-14T18:20:07.260

```
typedef struct p1 {
    int a;             // 2 byte
    int b;             // 2 byte
    int c;             // 2 byte
    int d;             // 2 byte
} person1;                // 8 bytes

typedef struct p2{
    int a;            // 2 byte
    DeviceAddress b;  // 8 bytes
    int c             // 2 bytes
    float d;      // 4 bytes
} person2;               // 16 bytes

typedef enum ptypes {
    PERSON1,
    PERSON2
} person_type;

typedef union p1_or_p2 {
    person1 p1;
    person2 p2;
} person1_or_person2;

typedef struct p {
    person1_or_person2 person;
    person_type type;
} person;

// Creating a person struct variable:
person p;
person1 p1;
p1.a = 5;
p1.b = 2;
p.type = PERSON1;
p.person = (person1_or_person2) p1;

void print_struct(person p) {
     switch (p.type) {
        case PERSON1:
            // actions for person1 here....
              // you can access person1 like this:
                 p.person.p1;
        break;
        case PERSON2:
            // actions for person2 here....
              // you can access person2 like this:
                 p.person.p2;
        break;
     }
} 
```

# html - 是否可以将 avi 文件实时转换为 mp4？

> ID：14324184
> 
> 赞同：0
> 
> 时间：2013-01-14T18:16:40.757
> 
> 标签：html

我有一个 AVI 文件，我想在[Flowplayer](http://flowplayer.org)中播放。我知道它使用 HTML5 需要将电影文件转换为 MP4/OGV，所以我想知道是否存在一个框架可以将 AVI 文件实时转换为 MP4 文件（并且不一定存储在服务器）

......我越想这个，我就越开始认为这是不可能的。请证明我错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:42:50.497

视频可以通过硬件甚至软件实时（某种程度）进行转码，但我从来都不是一种实用的方法，因为您为每个视频的每个客户端花费了大量的处理能力。这太疯狂了。建议缓存页面...因此需要缓存视频。

一种简单的方法是将视频上传/放置在服务器的文件夹中，然后触发转码（使用 FFMPEG）到要提供的文件的文件。

# c# - 未知参数/返回类型的传递方法作为 C# 中的参数

> ID：14324186
> 
> 赞同：4
> 
> 时间：2013-01-14T18:16:56.747
> 
> 标签：c#, reflection, linq-expressions, methodinfo

这里有一个类似的问题：

[使用 C# 将方法作为参数传递](https://stackoverflow.com/questions/2082615/pass-method-as-parameter-using-c-sharp)

假设您知道方法的参数和返回类型。我想做点不一样的。我正在寻找创建 System.Reflection 的 .GetMethod(string) 的一个版本，它采用 lambda 函数 - 所以而不是：

```
MethodInfo methodInfo = typeof(MyClass).GetMethod("AddThing"); 
```

我可以使用更安全的编译：

```
MethodInfo methodInfo = ReflectionHelper.GetMethod<MyClass>(mc => mc.AddThing); 
```

因此，如果 ReflectionHelper 事先知道参数计数和返回类型，那么答案将很简单——例如，如果它没有参数并返回字符串：

```
public static MethodInfo GetMethod<T, TReturn>(Expression<Func<T, Func<TArg, TReturn>>> expr)
{
    return ((MethodCallExpression)expr.Body).Method;
} 
```

除了我事先不知道参数计数/返回类型，我想避免只是用 20 个覆盖大多数但不是所有情况的重载来发送垃圾邮件。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:34:50.977

您尚未在 lambda 中`mc => mc.AddThing`指定方法 - 您已指定方法组。

你可以做的是在表达式中编写一个方法调用——尽管它永远不会被执行，所以参数只需要指定你想要的重载。

所以，要使用它，你会写：

```
MethodInfo mi = GetMethod<MyClass>( mc => mc.AddThing( null ) ); 
```

那么表达式可能只是一个`Action`，而不是一个`Func`：

```
public static MethodInfo<T>( Expression<Action<T>> expr )
{
  return ( ( MethodCallExpression ) x.Body ).Method;
} 
```

与表达式检查一样，如果 lambda 不是预期的形式，这很容易出现运行时错误，但这是朝着摆脱“神奇”字符串的正确方向迈出的一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:24:43.453

我现在使用的解决方法，我称之为“垃圾邮件方法”，虽然丑陋但在有限的场景中起作用：

```
public class ReflectionHelper<T>
{
    public MethodInfo GetMethod<TA1>(Expression<Func<T, Func<TA1>>> expr)
    {
        return ((MethodCallExpression)expr.Body).Method;
    }
    public MethodInfo GetMethod<TA1, TA2>(Expression<Func<T, Action<TA1, TA2>>> expr)
    {
        return ((MethodCallExpression)expr.Body).Method;
    }
    public MethodInfo GetMethod<TA1, TA2, TA3>(Expression<Func<T, Action<TA1, TA2, TA3>>> expr)
    {
        return ((MethodCallExpression)expr.Body).Method;
    }
    . . . // And more
} 
```

它继续，指定一长串具有各种参数计数的潜在动作和函数。这使我实际上可以像这样使用它：

```
(new ReflectionHelper<MyClass>()).GetMethod<string>(mc => mc.SaySomething).Invoke("Hi"); 
```

所以它很接近 - 我只需按名称调用该方法，并且我确实避免传递虚假参数以便这样做，但我仍然被困在列出其参数的类型是什么 - 比我希望的要复杂为了。但是，在具有多个同名方法重载的情况下，传递参数的类型会将方法列表缩小到一个特定的重载。

我仍然对更简单的东西感兴趣，它可以像我的问题中那样采用一种方法。在方法重载的情况下会很模糊，但标准的 .GetMethod(string) 也是如此。

# ruby - 在 Windows 上使用 Ruby 的 popen3 或等效的

> ID：14324188
> 
> 赞同：3
> 
> 时间：2013-01-14T18:16:59.717
> 
> 标签：ruby, windows, process, popen3

我正在制作一个`Open3.popen3`用于运行 shell 命令的 Vim 插件，我需要结果和退出代码。它在 Linux 上运行良好，但在 Windows 上冻结。我已经`pry`在 Windows 下进行了检查，每当我运行`Open3.popen3`或`Process.spawn`shell 冻结时。我已经尝试安装`win32-open3-19`gem（并使用 加载它`require 'win32/open3`） - 但它仍然冻结。

我可以使用其他任何方法或宝石吗？我更喜欢尽可能接近的东西`Open3`（这样我的 Linux 和 Windows 版本可以共享尽可能多的代码）。

我正在运行通过 RubyInstaller 在 Windows 7 64 位上安装的 Ruby 1.9.3。

**更多详情**：

这是我要运行的确切代码：[https ://github.com/someboddy/vim-erroneous/blob/master/autoload/erroneous.rb#L43](https://github.com/someboddy/vim-erroneous/blob/master/autoload/erroneous.rb#L43)

它适用于 Linux，但在 Windows 上冻结。

在我的 Windows 上，我打开`pry`然后写：

```
require 'win32/open3'
inp,out,err,wait_thr=Open3.popen3('cmd') 
```

我的壳结冰了。当我在 Linux 上尝试它时（使用 'bash' 而不是 'cmd'）它工作得很好。我也试过'dir'（不应该等待用户输入），它也冻结了。

# python - Windows 脚本宿主 (Python) 对话框无响应

> ID：14324194
> 
> 赞同：2
> 
> 时间：2013-01-14T18:17:30.033
> 
> 标签：python, wsh

我正在尝试修改在下面找到的打印设置选项`File > Print Setup.`

我正在使用带有 Python 的 Windows 脚本主机。我使用`Alt + F`后面的`S`打开相应的对话框：

![打印设置](../Images/9fe28c7025102ce9b529fa676fc157cf.png)

当我手动执行这些命令时，打印设置框处于焦点位置，因此我可以按下`F`以选择“打印到文件”`{ENTER}`或`O`接受更改。

但是，我既没有`ALT+F`也没有`F`选择“文件”选项。

```
shell = win32com.client.Dispatch("WScript.Shell")
shell.AppActivate('Point of Sale')
shell.SendKeys("%fs") # I also tried "%fsf and "%fs%f" removing the other call to SendKeys"
time.sleep(0.1) # Removing this (or using a longer wait) makes no difference
shell.SendKeys("F") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:30:06.173

在发送“F”之前，您必须等待对话框出现。

试试这个：

```
shell.SendKeys("%fs")
time.sleep(.25)
shell.SendKeys("f") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:43:48.227

此问题与该软件的部分开发人员执行不正确有关。为了解决这个问题，我使用 SendKeys 发送多个`TABS`直到`File`被选中。

# ios - ALAssetsGroup，如何检查是否存在？

> ID：14324195
> 
> 赞同：1
> 
> 时间：2013-01-14T18:17:31.620
> 
> 标签：ios, objective-c, alassetslibrary, alasset

我有我的 ALAssetsGroup 对象。*例如*：

```
ALAssetsGroup *_someGroup. 
```

但用户可以将应用程序发送到后台并**删除此相册**。

*是否检查 assetsGroup 是否正确？*

```
[_someGroup numberOfAssets] returns the *old number of photos* even when the group doesn't exist 
```

* * *

```
[_someGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) 
```

崩溃::

*** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSOrderedSetM getObjects:range:]: range {0, 1} 超出了空有序集的范围”

* * *

ALAssetsGroup 也有`valueForProperty:`方法，我可以在其中获取`ALAssetsGroupPropertyURL` （检索唯一标识组的 URL 的键）。所以我可以枚举所有专辑并检查是否存在具有相同属性的专辑。但它仅在 iOS 5 中可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T09:09:56.980

我找到了解决方案：`ALAssetsGroupPropertyPersistentID`属性按我的预期工作。

所以我可以枚举专辑并检查它们是否具有相同的 ID。

# matlab - 如何绘制绘图水平积分投影的最小平均值？

> ID：14324196
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:17:37.013
> 
> 标签：matlab, plot, minimum, mean

我必须从二进制图像中绘制一个图（使用矩阵 MN）。我使用水平积分投影来查找行的平均值。在那之后，我想要最小平均坐标做一条水平线。

水平线怎么画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:10:39.997

很难说出你在问什么，但这里有一些代码可能会有所帮助。它对图像的行求和，找到最小和，然后在具有最小和的行上绘制图像加上一条水平线。

```
x = rand(50);
[~,i] = min(sum(x,2));
figure
imagesc(x)
hold on
plot(xlim, [i i], 'w') 
```

# c - 将数据写入二进制文件，然后将其读回

> ID：14324201
> 
> 赞同：0
> 
> 时间：2013-01-14T18:17:59.123
> 
> 标签：c, pointers, file-io

我正在尝试将数据写入二进制文件，然后从文件中读回数据。数据由单个数字（整数）nrows 组成。下面是我将数据写入二进制文件的代码。但是，当我尝试读回数据并使用 printf 打印结果时，我得到了一个无意义的结果：-2。

```
FILE *fout;
FILE *file_pointer;
int nrows = 5;

fout = fopen("matrixB.bin", "wb") //Writing to a binary file.//

fwrite(&nrows, sizeof(int), 1, fout); //Writing the number nrows to the binary file "matrixB.bin"//

file_pointer = fopen("matrixB.bin", "rb"); //Reading a binary file.//

fread(&nrows, sizeof(int), 1, file_pointer);

printf("%d", nrows); //Here -2 is printed, instead of 5.// 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:20:01.080

C 文件函数（ 、 等）的特征之一[`fread`](http://www.manpagez.com/man/3/fread/)是[`fwrite`](http://www.manpagez.com/man/3/fwrite/)它们通常执行缓冲 I/O。

您的程序在重新打开文件之前不会刷新和/或关闭文件。它应该。

# powershell - Exchange 2010 Powershell - 无法查看收件人筛选器

> ID：14324203
> 
> 赞同：0
> 
> 时间：2013-01-14T18:18:16.603
> 
> 标签：powershell, exchange-server-2010

我有一个我正在尝试修改的动态分发列表，但是当前的过滤器很复杂并且不是由我设置的。我正在尝试对其进行解码，以便从中排除某些电子邮件，因为目前它似乎包括域中的所有邮箱和联系人。

这是 Exchange 管理控制台中显示的当前过滤器，老实说，我对解码此字符串的过滤器知之甚少：

```
(&(!cn=SystemMailbox{*})(& (mailnickname=*) (| (&(objectCategory=person)(objectClass=user)(|(homeMDB=*)(msExchHomeServerName=*)))(&(objectCategory=person)(objectClass=contact)) ))) 
```

下面的 powershell 命令没有向我显示 Exchange 命令行管理程序中的过滤器，我可能比上面的查询更容易解码：

```
(Get-DynamicDistributionGroup GROUP_NAME).RecipientFilter 
```

我已经确定我是组织和收件人管理员组的一员，我是否还缺少其他东西才能在 Shell 中显示它？解码此过滤器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:53:01.193

如果您需要将 ldap 过滤器转换为opath，您可以使用以下脚本：

[http://gallery.technet.microsoft.com/scriptcenter/7c04b866-f83d-4b34-98ec-f944811dd48d](http://gallery.technet.microsoft.com/scriptcenter/7c04b866-f83d-4b34-98ec-f944811dd48d)

# android - 带有 Git (EGit) 的 Android 应用程序 - 我被提示多次保存 AndroidManifest.xml

> ID：14324206
> 
> 赞同：3
> 
> 时间：2013-01-14T18:18:23.893
> 
> 标签：android, eclipse, egit, eclipse-adt

我正在使用 Eclipse ADT 和 Git (EGit) 来开发 Android 应用程序。出于某种原因，每当我对 AndroidManifest.xml 文件进行更改时，我都必须保存它几次，而且随着时间的推移，它似乎需要更多的保存。现在，当我进行更改时，系统会提示我保存超过 10 次。我确认提示，然后弹出另一个提示（大约 10 秒后，Eclipse 被冻结）。

它说`The original file 'Android.Manifst.xml' has been deleted or is not accessible.`

这是不正确的，因为它没有被删除/无法访问，我不是为了上帝的缘故一直在编辑它！

这是一些与 Git 相关的问题吗？在提示保存之间也需要很长时间，在此期间 Eclipse 被冻结。这使发展速度放缓到令人难以置信的缓慢速度。

![在此处输入图像描述](../Images/004850a550a46c7bd8d80c8c7321f908.png)

# sql-server - 如何检测 SQL Server 中的重叠时间？

> ID：14324213
> 
> 赞同：1
> 
> 时间：2013-01-14T18:19:13.103
> 
> 标签：sql-server, time, overlapping

```
**Schedule Table** 
Day nvarchar()
StartTime time(7)
EndTime time(7) 
```

我想检测我的输入是否会与任何现有记录重叠。

```
Day -------- StartTime -------- EndTime
Sunday       10:00:00           15:00:00 
```

这将不允许插入一个值

```
Day -------- StartTime -------- EndTime
Sunday       10:00:00           11:00:00

Day -------- StartTime -------- EndTime
Sunday       10:00:00           12:00:00 
```

等等。

我的代码：

```
SELECT * FROM Schedule
WHERE Day = 'Sunday' AND
    NOT(StartTime < '10:00:00' AND EndTime > '11:00:00')
AND (StartTime < '10:00:00'  AND EndTime > '11:00:00') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:25:24.143

您可以使用 where 子句检测重叠时段，例如：

```
where   p1.startTime <= p2.EndTime
        and p2.startTime <= p1.EndTime 
```

如果您要插入，您可以将这些行替换为`p2`您要插入的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:34:48.837

```
 SELECT * FROM Schedule
    WHERE Day = 'Sunday' AND
    ('10:00:00' < EndTime AND '12:00:00' > StartTime)
    ORDER BY ScheduleID 
```

# html - 利用静态资产的缓存

> ID：14324218
> 
> 赞同：1
> 
> 时间：2013-01-14T18:19:40.133
> 
> 标签：html, caching, cdn

我知道您可以在自己的网络服务器上设置缓存，但是如何利用 CDN 的静态资产缓存。例如

```
FAILED - (No max-age or expires) - http://fonts.googleapis.com/css?family=Bree+Serif
FAILED - (No max-age or expires) - http://fonts.googleapis.com/css?family=Open+Sans 
```

并且托管在我的 Amazon S3 上的文件也没有缓存

我的 HTML 看起来像

```
<link href="http://fonts.googleapis.com/css?family=Bree+Serif" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T12:05:39.153

1.复制粘贴字体（或字体系列）CSS文件。

2.将生成的 FLAT CSS 文件放在您选择的位置和命名约定、Web 应用程序中的某个位置或您可以随时到达的集中已知位置。

3.下载每个 .ttf 文件，根据一些合理的约定重命名它们，包括实际的“.ttf”文件扩展名。mime 类型应包含在文件本身的二进制文件中。（这是一个很好的理论。如果有人知道如何测试它，请告诉我。）

4\. 再次将它们放置在您可以访问的合理位置。您在步骤 2 中放置 CSS 文件的目录中的“ttf/”目录对我来说似乎非常合理。

5.编辑 CSS 以反映那些 .ttf 的新 URL，而不是 Google 的“动态化”URL。

6.编辑原始 CSS 包含以反映您的平面 CSS 文件的新位置。享受网络字体的快速下载时间。

# c# - 设备魅力按钮单击是否有事件侦听器？

> ID：14324233
> 
> 赞同：0
> 
> 时间：2013-01-14T18:20:40.317
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps

我正在开发一个 Windows 8 Metro 应用程序，并想知道是否有任何方法可以收听正在选择的设备魅力栏按钮？我试图想出一种创建打印页面数据的好方法，而不必在每次更改页面上的内容时都这样做。

我现在正在设置共享合同事件侦听器，并注意到当您单击共享魅力按钮时会触发一个 DataRequested 事件。

```
DataTransferManager.GetForCurrentView().DataRequested += MainPage_DataRequested; 
```

我可以为设备魅力栏按钮单击实现类似的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:23:41.397

查看[http://www.jeffblankenburg.com/2012/11/20/31-days-of-windows-8-day-20-printing/](http://www.jeffblankenburg.com/2012/11/20/31-days-of-windows-8-day-20-printing/)以获取 C# 中的打印代码示例。您将需要这样的代码：

```
PrintManager manager = PrintManager.GetForCurrentView();
manager.PrintTaskRequested += manager_PrintTaskRequested; 
```

当然，还有“manager_PrintTaskRequested”事件处理程序的实现。有关完整的详细信息，请参阅文章。

# php - 从 PHP 查询中获取结果

> ID：14324235
> 
> 赞同：2
> 
> 时间：2013-01-14T18:20:43.203
> 
> 标签：php, mysql

我正在尝试编写一个 PHP 函数来检查给定值是否在数据库的列中。该函数接受参数`$userName`，并且将在数据库的列中检查`$link`位置。这是我到目前为止所得到的：`$userName``userid``$link`

```
<?php  
/*This function checks to see if the username is already in use  
INPUT: the userName to check for and a link to the database  
OUTPUT: true if there are no other users registered with userName  
*/  
function isUnique($userName, $link)  
{  
    $result = !!mysqli_fetch_row(mysqli_query($link, 'SELECT `userid`  
    FROM `login`  
    WHERE `userid` = \''.$userName.'\''));  
    return $result;  
}  

echo '<html><head><title>testing</title><body>';  
$uName = $_POST['us'];  
$pass = $_POST['pa'];  

//database work  
$link = mysqli_connect("localhost:3306", "root", "");  
if(!$link)  
    die('Could not connect to MySQL: '.mysql_error());  
$db_selected = mysqli_select_db($link, 'Accounts');  
if(!$db_selected)  
    die('Can\'t use Accounts: '.mysql_error());  
echo '<br />Using Accounts database<br />';  
if(isUnique($uName, $link))  
{  
    echo 'username is unique!<br />';  
}  
else  
{  
    echo 'username is not unique!<br />';  
}  
mysqli_close($link);  

echo '</body></html>';  
?> 
```

该页面总是说给定的用户名不是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:23:55.973

试试这个：

```
function isUnique($userName, $link) {
    return !!mysqli_fetch_row(mysqli_query($link, "select `userid` from `login` where `userid`='".$userName."'"));
} 
```

由于如果没有行则`mysqli_fetch_row`返回`null`，如果有则返回数组，因此转换为布尔值将告诉您是否存在行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:13:08.563

```
$userName = mysqli_escape_string($userName); // Or such

"SELECT COUNT(*) FROM login WHERE userid='$userName'" 
```

顺便说一句，IMO 最好`INSERT`检查插入的行数和错误代码/味精。如果那是 0 并且“...重复...”，那么您知道它正在使用中，并且可以正确处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:37:53.523

```
function isUnique($userName, $link)
{
                $result = mysqli_query($link, 'SELECT `userid`
                        FROM `login`
                        WHERE `userid` = \''.$userName.'\''));
                return mysqli_num_rows($result) == 0;
} 
```

复制自[phpfreaks](http://forums.phpfreaks.com/topic/273160-problem-with-retrieving-results-from-mysql-query/)

# entity-framework - ADO.NET 实体数据模型自动生成的代码违反代码分析 CA2214

> ID：14324238
> 
> 赞同：3
> 
> 时间：2013-01-14T18:21:18.713
> 
> 标签：entity-framework, ado.net, visual-studio-2012, code-analysis

在 VS 2012 下的 MVC 3 解决方案中，在运行代码分析后收到这样的消息听起来很奇怪：

![在此处输入图像描述](../Images/fe6580573fb46600104ba62ff462de34.png)

这很奇怪，因为“不要”分析中提到的类是由 VS 本身（不是我）生成的。

要重现这一点，您可以：

1.  将**ADO.NET 实体数据模型**添加到您的解决方案中，
2.  将您的数据库表（已经存在于 SQL Server 中）添加到图表中，
3.  重建解决方案，添加控制器和 cshtml 视图（那些是自动生成的）。
4.  从 ANALYZE 菜单运行代码分析。

所以，问题是，我们能做什么：重构自动生成的代码还是忽略这个消息？

下面是违反规则 CA2214 的自动生成类的示例：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Backoffice.Entities
{
    using System;
    using System.Collections.Generic;

    public partial class BR_SIMUL_Supermarket_Product
    {
        public BR_SIMUL_Supermarket_Product()
        {
            this.BR_SIMUL_Supermarket_Product_Price = new HashSet<BR_SIMUL_Supermarket_Product_Price>();
        }

        public int product_id { get; set; }
        public int category_id { get; set; }
        public string product_name { get; set; }
        public string product_measure { get; set; }
        public bool product_active { get; set; }
        public virtual BR_SIMUL_Supermarket_Category BR_SIMUL_Supermarket_Category { get; set; }
        more stuff here... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-11T00:46:37.993

这是我永久解决它的方法：[http ://chuckbeasley.com/blog/?p=42200](http://chuckbeasley.com/blog/?p=42200)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:58:13.543

你应该随意压制这些。有关更多详细信息，请查看 Entity Framework codeplex 站点上的此[讨论。](http://entityframework.codeplex.com/discussions/400154)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T07:16:41.757

这是为了允许延迟加载而设计的。当您通过它访问类`DbContext`时，尽管有警告，它不会在运行时失败。您应该仅在这些文件中禁止显示警告。

# java - ArrayList中的IndexOutOfBoundsException，同时检查null，java

> ID：14324239
> 
> 赞同：-2
> 
> 时间：2013-01-14T18:21:18.330
> 
> 标签：java, arraylist, null, indexoutofboundsexception

我遇到了一个 ArrayList 的问题，它应该填充一个 TableModel。在第二个 for 循环中，应用程序第三次崩溃

```
java.lang.IndexOutOfBoundsException: Index: 14, Size: 14 
```

在

```
if (al.get(i + 4)!=null) 
```

我不知道为什么，因为在这种情况下 i 是 10，所以它检查索引 14，它实际上是空的。它应该进入 else 循环，但它却崩溃了。感谢您的帮助，代码如下：

```
String[] teile = tabelleninhalt.split("#");
ArrayList<String> al = new ArrayList<String>();
        for (int i = 1; i < teile.length; i++) {
            al.add(teile[i]);

        }
        for (int i = 0; i < al.size(); i = i + 5) {
            if (al.get(i + 4)!=null) {
                tabModel.addRow(new Object[] { al.get(i), al.get(i + 1),
                        al.get(i + 2), al.get(i + 3), al.get(i + 4) });
            } else {
                tabModel.addRow(new Object[] { al.get(i), al.get(i + 1),
                        al.get(i + 2), al.get(i + 3) });
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:23:16.243

不，当大小为 14 时，*没有*索引 14。有效索引为 0 到 13（含）。

您的循环应如下所示：

```
for (int i = 0; i < al.size() - 4; i += 5) 
```

但是，如果您的列表打算包含 5 个条目，那么如果您的大小为 14，听起来您遇到了问题。大小不应该总是 5 的倍数吗？

编辑：如果您想将缺失的最终值视为有效地为空，但仍需要前 4 个字段，您可能需要：

```
for (int i = 0; i < al.size() - 3; i += 5) {
    if (i + 4 < al.size() && al.get(i + 4) != null) {
        ... // Use al.get(i + 4)
    } else {
        ... // Don't use it
    }
} 
```

（但很难根据一个没有给出任何要求的问题来判断。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:23:43.040

索引 14 是 的第 15 个元素`ArrayList`。像大多数编程语言一样，`List`Java 中的数组（和 s）是零索引的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:24:06.650

它不是空的，那个位置甚至不存在，这就是你得到`IndexOutOfBoundsException`异常的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:24:28.457

如果您尝试访问大于 arraylist 大小的位置，您将获得 IOBE。您无法将该位置与 null 进行比较，因为该位置不可访问。最好检查大小而不是 null。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T18:25:06.430

听起来您的数组中只有 14 个项目，存储在索引 0-13 中。尝试访问索引 14 将导致异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T18:25:07.083

问题是索引从 0 开始，最后一个元素的索引为 13。因此使用索引 14 访问它会引发 IndexOutOfBoundException

# java - 由 gps 提供商区分室内和室外

> ID：14324240
> 
> 赞同：1
> 
> 时间：2013-01-14T18:21:26.157
> 
> 标签：java, android

我想使用 gps 提供商区分我的用户何时在室内和何时在室外。这将通过 coruse 的 getAccuracy() 方法完成。那么从该方法返回的哪个值将是限制？

**从哪个值我可以确定我的用户在室内**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:27:07.910

本文解释了[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html) IE 如果您无法从 GPSProvider 获取位置但您可以从网络提供商处获取位置，您可以假设您在室内或地下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:27:51.940

在 GPS 中，没有“确定”的。我建议：如果 hor 精度为 10m 或更好，那么在户外的机会是很好的。

如果您没有任何 GPS 信号。那么您可能在室内或刚到户外。

在室外密集的城市地区，精度可以高于10m。

记录并显示 GPS 信号，并查看其在室内和室外的值。

在许多/大多数建筑物中，您根本没有 GPS 信号，除非您坐在窗边。我的 iphone 目前在室内显示 65m。

所以从那开始：

```
No GPS signal: indoors (or tunnel, garage)
hor accuracy > 20m : indoors
hor accuracy <= 10m:  outdoors
else grey zone 
```

# node.js - 将 req 变量从 .param 传递给 .use？

> ID：14324241
> 
> 赞同：0
> 
> 时间：2013-01-14T18:21:27.643
> 
> 标签：node.js, express, middleware

下面的代码演示了尝试`req.hash_id`从中间件登录。它对我显示为`undefined`. 无论如何我可以让它工作吗？或者在常规 .use 中间件中轻松解析“:hash”？

```
app.param("hash",function(req, res, next, id){
  req.hash_id = id;
  return next();
});

app.use(function(req, res, next){
  console.log(req.hash_id);
  return next();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:08:38.540

我认为您不能`req.params`在中间件函数中使用它，因为它绑定到特定的路由。您可以使用`req.query`，但是您必须以不同的方式编写路线，例如`/user?hash=12345abc`. 不确定将值从`app.param`to传递给`app.use`.

如果您的路线有特定的结构，就像`/user/:hash`您可以简单地写

```
// that part is fine
app.param('hash',function(req, res, next, id){
  req.hash_id = id;
  return next();
});

app.all('/user/:hash', function(req, res, next) { // app.all instead app.use
  console.log(req.hash_id);
  next();  // continue to sending an answer or some html
});

// GET /user/steve -> steve 
```

# oracle11g - 系统或目录表 - DBA_ / DBC - 输出不稳定

> ID：14324244
> 
> 赞同：0
> 
> 时间：2013-01-14T18:21:45.920
> 
> 标签：oracle11g, teradata

我正在尝试获取使用系统或目录表引用特定字段的所有表/视图（换句话说，所有对象）的列表。我正在使用以下查询。

```
select * 
  from dba_col_comments 
 where column_name like('SXX_AXXX_%') 
 order by 1; 
```

但是，输出是不稳定的。当我重复运行相同的查询而不进行任何更改时，输出会有所不同。例如，它产生了 9300 条记录，几分钟后又产生了 9350 条，几分钟后又产生了 9347 条。

我也在 Teradata 中观察到相同的行为。

我的理论是——在生产环境中，创建的临时对象可能会在系统/目录表中获得一个条目。

有什么想法/方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:26:51.480

在 Teradata 中，您会发现`global temporary tables`实例化（由 SQL 语句引用）的记录​​应添加到数据字典表 TVM 中。然后在会话注销后删除这些记录，只留下与`CREATE GLOBAL TEMPORARY TABLE`提交的原始语句关联的基表记录。

您可以使用视图找到这些实例`DBC.AllTempTables`。

在 Teradata 中，`volatile tables`不在数据字典内维护。

**编辑 - 您的里程可能会有所不同，但这应该让您开始使用 Teradata**

```
SELECT D1.DatabaseNameI AS DatabaseName_
     , T1.TVMNameI AS TableName_
     , F1.FieldName AS ColumnName_
  FROM "DBC".TVM T1
 INNER JOIN
       "DBC".Dbase D1
    ON D1.DatabaseId = T1.DatabaseId
 INNER JOIN
       "DBC".TVFields F1
    ON F1.DatabaseId = T1.DatabaseId
   AND F1.TableId = T1.TVMId
WHERE F1.FieldName = 'MyColumn'
  --AND D1.DatabaseNameI IN ('{Database1}', ... '{Database99}') -- Filter on databases
  AND F1.FieldType in ('i', 'i1', 'i2', 'i8') -- Integer, ByteInt, SmallInt, BigInt
  --AND T1.TableKind IN ('T') -- Optional Filter to just tables.
  AND NOT EXISTS
     (SELECT 'x'
        FROM "DBC".TempTables TT1
       WHERE Tt1.TableId = T1.TVMId
     )
; 
```

# python - 无法编辑实例属性的 Python 类

> ID：14324248
> 
> 赞同：2
> 
> 时间：2013-01-14T18:22:31.017
> 
> 标签：python, class, methods, python-3.x, instance

创建一个不能从类外部更改实例属性的类的最方便方法是什么**（**您仍然可以获取值），因此可以`self.var = v`在类内部调用方法，但不能`ClassObject().var = v`在外部调用班的？

我试过弄乱，`__setattr__()`但如果我覆盖它，则`name`无法在`__init__()`方法中启动该属性。唯一的方法是覆盖`__setattr__()`和使用`object.__setattr__()`，我目前正在这样做：

```
class MyClass(object):
    def __init__(self, name):
        object.__setattr__(self, "name", name)
    def my_method(self):
        object.__setattr__(self, "name", self.name + "+")
    def __setattr__(self, attr, value):
        raise Exception("Usage restricted") 
```

现在这个解决方案有效，已经足够了，但我想知道是否有更好的解决方案。这个问题是：我仍然可以`object.__setattr__(MyClass("foo"), "name", "foo_name")`从课堂外的任何地方打电话。

有没有办法完全防止将变量设置为类外的任何内容？

**编辑**：愚蠢的我没有提到我不是在`property`这里寻找，你们中的一些人已经回答了它，但是这对我来说还不够，因为它会`self._name`改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:37:08.067

不，你不能在纯 python 中做到这一点。

您可以使用属性将您的属性标记为只读；改用下划线前缀的“私有”属性：

```
class Foo(object):
    def __init__(self, value):
        self._spam = value

    @property
    def spam(self):
        return self._spam 
```

上面的代码只为属性指定了一个getter；Python 暂时不会让你设置值`Foo().spam`：

```
>>> class Foo(object):
...     def __init__(self, value):
...         self._spam = value
...     @property
...     def spam(self):
...         return self._spam
... 
>>> f = Foo('eggs')
>>> f.spam
'eggs'
>>> f.spam = 'ham'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: can't set attribute 
```

当然，您仍然可以`_spam`从外部访问 'private' 属性：

```
>>> f._spam
'eggs'
>>> f._spam = 'ham'
>>> f.spam
'ham' 
```

您可以使用双下划线约定，`__`在编译时重命名开头（但不是结尾！）的属性名称。这并不是为了使属性无法从外部访问，而是为了保护属性不被子类覆盖。

```
class Foo(object):
    def __init__(self, value):
        self.__spam = value

    @property
    def spam(self):
        return self.__spam 
```

您仍然可以访问这些属性：

```
>>> f = Foo('eggs')
>>> f.spam
'eggs'
>>> f.__spam
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Foo' object has no attribute '__spam'
>>> f._Foo__spam
'eggs'
>>> f._Foo__spam = 'ham'
>>> f.spam
'ham' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:35:34.580

在 Python 上没有严格的封装方式。您可以做的最好的事情是`__`在预期的私有属性前面加上 2 个下划线。这将导致它们被类名 (_ *ClassName* _AttribName) 破坏，因此如果您尝试在继承的类上使用它们，则不会引用基成员。如果您使用`getattrib()`或`setattrib()`虽然，名称不会被破坏。

您也可以覆盖 `__dir()__`以隐藏它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T18:35:36.797

您可以使用属性来模拟这种行为，但就像 Martijn 所说，可以直接访问变量。这样做是您不了解 Python 哲学的信号，请检查一下。

[为什么 Python 不是完全面向对象的？](https://stackoverflow.com/questions/3325343/why-python-is-not-full-object-oriented)

属性方式：

[http://docs.python.org/2/library/functions.html#property](http://docs.python.org/2/library/functions.html#property)

```
class C(object):
    def __init__(self):
        self._x = None

    def getx(self):
        return self._x
    def setx(self, value):
        raise Exception("Usage restricted")
    x = property(getx, setx) 
```

# django - Django 中的字节范围

> ID：14324250
> 
> 赞同：24
> 
> 时间：2013-01-14T18:22:33.213
> 
> 标签：django, http, http-headers

Django 中是否有现有的 HTTP 字节范围实现？即，当客户端发送 Range: 标头时，我希望我的 Django 应用程序接受它并回复 HTTP“206 Partial Content”响应。

我可以从头开始写一些东西，但肯定有人已经这样做了？

这有不同的部分：

1.  解析和完整性检查 Range 标头
2.  实际生成范围
3.  支持在响应中返回单个范围
4.  支持在单个响应中返回多个范围，经过适当的 MIME 编码

当然至少（1）和（4）在某处有图书馆支持？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-10T21:50:03.617

这是一些适用于 Django 1.11+ 的基本中间件代码。它只处理一个范围，但这就是我个人所需要的。

```
import os

from django.utils.deprecation import MiddlewareMixin

class RangesMiddleware(MiddlewareMixin):
    def process_response(self, request, response):
        if response.status_code != 200 or not hasattr(response, 'file_to_stream'):
            return response
        http_range = request.META.get('HTTP_RANGE')
        if not (http_range and http_range.startswith('bytes=') and http_range.count('-') == 1):
            return response
        if_range = request.META.get('HTTP_IF_RANGE')
        if if_range and if_range != response.get('Last-Modified') and if_range != response.get('ETag'):
            return response
        f = response.file_to_stream
        statobj = os.fstat(f.fileno())
        start, end = http_range.split('=')[1].split('-')
        if not start:  # requesting the last N bytes
            start = max(0, statobj.st_size - int(end))
            end = ''
        start, end = int(start or 0), int(end or statobj.st_size - 1)
        assert 0 <= start < statobj.st_size, (start, statobj.st_size)
        end = min(end, statobj.st_size - 1)
        f.seek(start)
        old_read = f.read
        f.read = lambda n: old_read(min(n, end + 1 - f.tell()))
        response.status_code = 206
        response['Content-Length'] = end + 1 - start
        response['Content-Range'] = 'bytes %d-%d/%d' % (start, end, statobj.st_size)
        return response 
```

像这样安装它`settings.py`：

```
MIDDLEWARE_CLASSES = [
    'path.to.RangesMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-26T21:30:11.717

这是两个相关的功能请求（一个是开放的，另一个是第一个的副本）：

*   [Ticket #22479 - 支持 django.views.static.serve 中的字节范围请求](https://code.djangoproject.com/ticket/22479)
*   [Ticket #23382 - 支持 django.views.static.serve 中的字节范围请求](https://code.djangoproject.com/ticket/23382)

这两个问题都基于[Google Group 的讨论](https://groups.google.com/forum/#!searchin/django-developers/http$20range/django-developers/NZ1qTkZ6vok/fhdz7rTtL1EJ)。

由于架构问题，票处于*“挂起”状态*，并且对于这是否真的是 Django 应该支持的东西没有达成共识。主要是因为网络服务器能够提供字节服务。

如果您仍然对实现感兴趣，则发送了一个尚未审查的补丁，实现了一个特殊的`RangedFileReader`类，用于使用 以块的形式返回响应，`StreamingHttpResponse`对标头进行解析和完整性检查`HTTP_RANGE`：

*   [从 HTTP 范围标头添加支持](https://github.com/satchamo/django/commit/2ce75c5c4bee2a858c0214d136bfcd351fcde11d)

您可以试用 fork 或使用该解决方案作为您自己的基础。

[仅供参考，这里](https://github.com/django/django/pull/2594)进行了另一次尝试- 它还没有完成，但对审查很有用。

* * *

要解析`Range`标头，请参阅：

*   `werkzeug`的[`parse_range_header()`](https://github.com/mitsuhiko/werkzeug/blob/4933bb18fc35d84fb04808ff6f385f30b7c59f97/werkzeug/http.py#L509)
*   [`parse_range_header()`](https://github.com/django/django/pull/2594/files#diff-60f461827b74beaf0ea54cb211e5e4ddR182)从上面提到的 PR
*   `httpheader`的[`parse_range_header()`](https://github.com/dmeranda/httpheader/blob/master/httpheader.py#L963)（另请参阅[使用 HTTP 范围请求](http://deron.meranda.us/python/httpheader/#using-ranges)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-19T02:43:10.557

# 关于内容范围的三种方法

根据你的情况选择合适的。

## 1.支持所有动态视图和静态文件

WhiteNoise[提供](http://whitenoise.evans.io/en/stable/index.html)了一个中间件来支持全局设置。

## 2\. 只支持静态文件

Nginx 可以支持静态和媒体文件。

请参阅[使用 uWSGI 和 nginx 设置 Django 和您的 Web 服务器的](http://uwsgi-docs.readthedocs.io/en/latest/tutorials/Django_and_nginx.html#configure-nginx-for-your-site)更多详细信息。如果某些视图需要重定向到静态或媒体文件，请参阅[stackoverflow 答案](https://stackoverflow.com/a/23404382/3640653)。

## 3\. 只支持特定的动态视图

[Django Ranged Response](https://github.com/i3thuan5/django-ranged-response)支持具有内容范围的响应。将此响应用于您想要的每个视图。这些视图主要是为媒体 API 设计的，例如语音合成、视频生成器。

* * *

声明：我是 Django Ranged Response 的贡献者。但我认为使用 WhiteNoise 最容易维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T03:38:07.640

如果您只是在测试中需要它并且不介意`nginx`在您面前运行`django`（它有很多其他优点，如分块等），那么您可以添加`proxy_force_ranges on;`到[http/server/location](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_force_ranges)，例如，修复诸如 Chrome 之类的问题要求它能够在视频中搜索（通过设置`video.currentTime`）等。

# jquery - 上传前在jQuery中减小图像文件大小

> ID：14324252
> 
> 赞同：1
> 
> 时间：2013-01-14T18:22:57.100
> 
> 标签：jquery, image, file-upload, image-resizing

我的客户在最大上传大小为 1Mb 的托管服务提供商上，我无法增加该限制。他们希望能够上传大于 1Mb 的图像，并让服务器调整它们的大小。

我想在它被 php 上传和处理之前减小图像文件大小（以任何可能的方式，减小宽度/高度是一种选择）。

我见过一些 jQuery 插件可以让你在上传之前裁剪图片的一部分，但这并不是我想要的。

理想情况下，我会使用一个插件来拦截表单提交，减小图像的大小，然后继续提交表单。虽然到目前为止我还没有找到这样的插件。如果没有任何东西可以解决这个问题，有没有办法做到这一点？

# sencha-touch-2 - Sencha Touch 2.1 基于MVC调用另一个视图

> ID：14324253
> 
> 赞同：0
> 
> 时间：2013-01-14T18:22:57.960
> 
> 标签：sencha-touch-2, sencha-touch-2.1

使用 ST 2.1 和 MVC 我试图调用另一个视图。我不应该为每个面板都有一个视图和一个控制器吗？如果需要当然可以。我认为关于页面的静态不需要控制器。

所以我的布局是。

```
app
 controller
   Main.js
   Contact.js
 view
   Main.js
   Contact.js
   About.js
resources
 css
 images
app.js
index.html 
```

这是我的整体项目结构。

我的 app.js 调用 Main.js。这是我的主要视图和控制器。我的主视图扩展了 Container。在主视图上，我创建了一个带有左右按钮和标题的标题栏。然后我创建了一个面板来保存我的主要按钮。然后我在底部创建了一个只有图像的工具栏。

我希望我的 Main 容器更改中间的面板，但保留顶部和底部栏。我的每一个观点都是一个面板，上面有各种各样的东西。我可以改变整个屏幕，但它需要我的标题栏和工具栏。

我希望这是足够的信息。谢谢，唐尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:35:23.473

如果您只想更改面板，则必须将该面板作为项目放入父面板中。当您想用其他面板或其他任何东西更改此面板时，只需获取父面板的引用并在添加新面板之前删除现有内容。

```
var p = Ext.getCmp("myPanel");
var pp = Ext.getCmp("parentPanel");
var newPanel = Ext.create('Ext.panel', {html : "some content"});
pp.remove(p, true);
pp.add(newPanel); 
```

PS - 我没有测试过这段代码，它只是指导方针。

# database - 具有良好查询/遍历能力的 Erlang 图形数据库？

> ID：14324256
> 
> 赞同：7
> 
> 时间：2013-01-14T18:23:02.973
> 
> 标签：database, graph, erlang

有使用复杂遍历的图数据库经验的人吗？并从 Erlang 使用它？优点？小字？

出于某种原因，默认选择似乎是 neo4j。

我喜欢 Phoebus（Erlang 中的分布式图形查询，基于 Google 的 Pregel 算法），但它似乎是废弃软件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-10T03:13:59.637

看看[OrientDB](http://www.orientechnologies.com/)，它是 Neo4J 的一个很好的替代品。OrientDB 是完全开源的，与具有商业许可证的 Neo4J 不同。此外，OrientDB 支持标准蓝图 API，并且基于 RB-Tree 算法，这些算法在各种图形用例中表现出色。

大多数图形数据库的共同点是它们只能按比例放大。它们可以横向扩展，尽管通常作为只读实例。这意味着如果您的数据量过多，您还需要一个非常大的服务器（内存和存储）。

**分布式图**替代方案是[Titan](http://thinkaurelius.github.io/titan/)。Titan是一个分布式图数据库，我相信它是基于Hadoop的。Titan 旨在向外扩展，可以为大规模并行提供一种有趣的方法，但需要一些开销。有些用例更合适，例如类似于 Google Pregel 用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:26:12.857

您可以在像[Stardog](http://stardog.com/)这样的 RDF 数据库中表示图。应该有一些现成的代码用于使用 erlang 进行 SPARQL 查询。

维基百科有一个很好的[三重商店](http://en.wikipedia.org/wiki/Triplestore)列表。

# c# - 在异常、硒测试、c 锐化绑定后恢复

> ID：14324257
> 
> 赞同：0
> 
> 时间：2013-01-14T18:23:02.940
> 
> 标签：c#, selenium

首先我必须声明，我是 Selenium 测试框架的新手，在编程方面不是很有经验。我需要进行客户端 Web 测试，我认为 selenium 是要走的路，我正在尝试构建一个架构。目前我正在努力从异常中恢复。

所以我订阅了一个事件，如果我的 Main 方法发生任何错误：

```
class Program
{
    static void Main()
    {
        AppDomain.CurrentDomain.UnhandledException += ExceptionHandler.CurrentDomainOnUnhandledException;

        var test = new Login.LoginPageTests();
        test.DoLogin();
    }
} 
```

因此，如果有任何东西被抛出，它会记录并返回到 baseURL。

```
class ExceptionHandler
{
    internal static void CurrentDomainOnUnhandledException(object sender, UnhandledExceptionEventArgs unhandledExceptionEventArgs)
    {
        var screenShot = TestHelpers.TakeScreenShot();
        var stack = new StackTrace();
        var callingMethod = stack.GetFrame(1).GetMethod().Name;
        var e = (Exception)unhandledExceptionEventArgs.ExceptionObject;

        Console.WriteLine("{0} : {1}\nscreenshot: {2}", callingMethod, e.Message, screenShot);
        var driver = TestHelpers.Driver;
        driver.Navigate().GoToUrl(TestHelpers.BaseUrl);
    }
} 
```

但是现在，假设我在测试方法中并且抛出了异常，它仍然会使一切崩溃。这是为什么？怎样才能继续运行下一个测试？

编辑：TestHelpers.Driver 是：

```
internal class TestHelpers
{
    internal const string BaseUrl = @"http://someUrl:8103";

    private static IWebDriver _driver;
    public static IWebDriver Driver
    {
        get
        {
            if (_driver == null)
            {
                _driver = new FirefoxDriver();
                _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));
                _driver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromSeconds(30));
            }
            return _driver;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T17:04:20.850

据我所知，`Nunit`有类似`Junit`的东西[TestWatcher](http://junit.czweb.org/apidocs/org/junit/rules/TestWatcher.html)，谷歌为此。

# java - ANT- 从多个包中加载多个 Java 文件

> ID：14324260
> 
> 赞同：1
> 
> 时间：2013-01-14T18:23:31.013
> 
> 标签：java, ant, ant-contrib

我有几个文件分散在几个包中。我需要一个一个地加载文件并使用 ANT 执行操作，但是每当我尝试时，只会加载一个文件。例如。我有 2 个课程 - **com.abc.one.One**和**com.bcd.two.Two**。以下脚本在两个循环迭代中打印两个文件名，但只打印第一个文件作为加载文件

```
<target name="build" description="My Task">
        <for param="file">
                <path>
                        <fileset dir="C:\workspace\AntTest1" includes="**\*.java" />
                </path>
                <sequential>
                <echo message="@{file}" />
                <loadfile property="loadedFile" srcfile="@{file}" />
                <echo message="${loadedFile}" />
                </sequential>
        </for>
</target> 
```

我已尝试搜索文档，但找不到有关如何使用 loadfile 任务的简明说明。我怀疑这可能是因为 ant 使用不可变字符串但无法解决。我试图通过创建新目标来拆分工作，但这也对我没有帮助。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:56:09.140

Ant 属性只能设置一次，设置后是不可变的。

距离我的 Ant 时代已经有一段时间了，但也许以下解决方案可以工作：对于每个文件，进行一次[antcall](http://ant.apache.org/manual/Tasks/antcall.html)调用，并将文件名作为参数。然后，在新目标中，加载文件并执行您的任务。请注意，antcall 会严重影响运行时性能。

# magento-1.7 - Magento 管理员网址 - 删除 index.php（Godaddy 服务器）

> ID：14324262
> 
> 赞同：0
> 
> 时间：2013-01-14T18:23:41.810
> 
> 标签：magento-1.7

Magento 安装在 WAMP 上并且工作正常。

站点 URL = localhost/shop <-||-> 管理员 URL = localhost/shop/index.php/admin

我将此 magento 移至 Godaddy 服务器。它不在根文件夹中。该站点位于名为“shop”的子文件夹中</p>

站点 URL = mydomain.com/shop <-||-> 管理员 URL = mydomain.com/shop/index.php/admin

前端 url 工作正常 - mydomain.com/shop/customer/account/login/

管理员 URL 不适用于包含的“index.php”。当我删除“index.php”并手动调用 url 时，它就可以工作了。

我希望我的管理员网址为[http://mydomain.com/shop/admin/system_config/edit/](http://mydomain.com/shop/admin/system_config/edit/) ....

## 我的配置

使用 Web 服务器重写 = 是

## 在.HTACCESS

RewriteBase /shop/

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T15:49:12.680

可以在此处找到替代解决方案： [如何从管理 URL 中删除 index.php](http://www.code007.ro/magento-how-to-remove-index-php-from-admin-url/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T09:35:18.807

要从 Magento 管理 URL 中删除 index.php，请在 Magento 文件夹的 /shop/index.php 文件顶部添加以下代码：

```
<?php
    function curPageURL() {
    $pageURL = 'http';
    if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
    $pageURL .= "://";
    if ($_SERVER["SERVER_PORT"] != "80") {
    $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    } else {
    $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    }
    return $pageURL;
    }

    $curUrl = curPageURL();
    $pos = strpos($curUrl, "index.php");

    // Note our use of ===.  Simply == would not work as expected
    // because the position of 'a' was the 0th (first) character.
    if ($pos === false) {
    //echo "The string '$findme' was not found in the string '$mystring'";
    } else {
    //echo "The string '$findme' was found in the string '$mystring'";
    //echo " and exists at position $pos";
    $newUrl = str_replace("index.php/", "", $curUrl);
    header("Location: $newUrl");
    exit;
    }
?> 
```

享受 ：）

# javascript - 间隔刷新json并显示结果而不刷新页面

> ID：14324269
> 
> 赞同：0
> 
> 时间：2013-01-14T18:24:10.417
> 
> 标签：javascript, jquery

我有一个像你在下面看到的 JSON，我想“保持活力”。我想不断地查询服务器（以连续的间隔“刷新”，比如 30 秒）并相应地更新页面上显示的内容。JSON 如下所示：

```
[
        {
            "Name": "Paul",
            "Date": "2012-10-26",
            "Score": 8
        },
        {
            "Name": "Janet",
            "Date": "2012-10-24",
            "Score": 18
        },
        {
            "Name": "Rick",
            "Date": "2012-10-26",
            "Score": 13
        }
] 
```

我当前显示的（静态）版本是：

```
<body>
<script>
$.getJSON('myjson.json', function(data) {
for (var i in data) {
var Name = data[i].Name;
var Score = data[i].Score;
}           
var output = "<ul>";
for (var i in data) {
output += "<li>" + Name + "--" + Score;
}
output += "</ul>";
document.getElementById("placeholder").innerHTML=output;
});
</script>
<div id="placeholder"></div>
</body> 
```

这当然会显示数据，但是随着服务器上的 json 更改（不刷新页面），我将如何将更改“流式传输”到“Score”？

这就是所谓的轮询吗？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:30:11.663

您只需要使用计时器，或者更具体地说，`setInterval()`...

```
<script>
    function getData() {
        $.getJSON('myjson.json', function(data) {
            for (var i in data) {
                var Name = data[i].Name;
                var Score = data[i].Score;
            }           
            var output = "<ul>";
            for (var i in data) {
                output += "<li>" + Name + "--" + Score;
            }
            output += "</ul>";
            document.getElementById("placeholder").innerHTML=output;
        });
    }
    setInterval(getData, 30000);

    $(function() {
        getData();
    });
</script> 
```

上述脚本将`getData()`在 document.ready 处运行该函数，然后每 30 秒运行一次，并`#placeholder`使用返回值更新元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:31:14.313

没有任何花里胡哨的东西，您可以将整个事情包装在一个函数中，然后使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)或[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)调用它，以便它以给定的时间间隔运行代码。

基本示例：

```
function getData(){
  ... your code ...

  setTimeout( getData, 3000 ); // Get data and refresh page every 3000 ms (3 seconds)
} 
```

// 调用函数开始数据收集

```
getData(); 
```

# python - Matplotlib 自定义标记/符号

> ID：14324270
> 
> 赞同：38
> 
> 时间：2013-01-14T18:24:19.503
> 
> 标签：python, matplotlib

所以有这个指南： http: [//matplotlib.org/examples/pylab_examples/scatter_symbol.html](http://matplotlib.org/examples/pylab_examples/scatter_symbol.html) ![在此处输入图像描述](../Images/f9c5e28793dc9701541fa2644c2488df.png)

```
# http://matplotlib.org/examples/pylab_examples/scatter_symbol.html
from matplotlib import pyplot as plt
import numpy as np
import matplotlib

x = np.arange(0.0, 50.0, 2.0)
y = x ** 1.3 + np.random.rand(*x.shape) * 30.0
s = np.random.rand(*x.shape) * 800 + 500

plt.scatter(x, y, s, c="g", alpha=0.5, marker=r'$\clubsuit$',
            label="Luck")
plt.xlabel("Leprechauns")
plt.ylabel("Gold")
plt.legend(loc=2)
plt.show() 
```

但是，如果您像我一样不想使用俱乐部套装标记怎么办...

你如何制作自己的记号笔_________？

***更新***

我喜欢这种特殊标记类型的原因是它很容易使用简单的 matplotlib 语法进行调整：

```
from matplotlib import pyplot as plt
import numpy as np
import matplotlib

x = np.arange(0.0, 50.0, 2.0)
y = x ** 1.3 + np.random.rand(*x.shape) * 30.0
s = np.random.rand(*x.shape) * 800 + 500

plt.plot(x, y, "ro", alpha=0.5, marker=r'$\clubsuit$', markersize=22)
plt.xlabel("Leprechauns")
plt.ylabel("Gold")
plt.show() 
```

![在此处输入图像描述](../Images/8d78372c9f1855d6d1ae178b0965b337.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-19T11:37:13.923

所以发现它只是使用数学文本符号，而不是引用存储在 matplotlib 模块中的任何基于向量的特殊标记......

```
from matplotlib import pyplot as plt
import numpy as np
from numpy.random import randint
import matplotlib

x = np.arange(0.0, 100.0, 2.0)
y = x ** 1.3 + np.random.rand(*x.shape) * 30.0
s = np.random.rand(*x.shape) * 800 + 500

markers = ['\\alpha', '\\beta', '\gamma', '\sigma','\infty', \
            '\spadesuit', '\heartsuit', '\diamondsuit', '\clubsuit', \
            '\\bigodot', '\\bigotimes', '\\bigoplus', '\imath', '\\bowtie', \
            '\\bigtriangleup', '\\bigtriangledown', '\oslash' \
           '\ast', '\\times', '\circ', '\\bullet', '\star', '+', \
            '\Theta', '\Xi', '\Phi', \
            '\$', '\#', '\%', '\S']

def getRandomMarker():
    return "$"+markers[randint(0,len(markers),1)]+"$"

def getMarker(i):
    # Use modulus in order not to have the index exceeding the lenght of the list (markers)
    return "$"+markers[i % len(markers)]+"$"

for i, mi in enumerate(markers):
    plt.plot(x[i], y[i], "b", alpha=0.5, marker=getRandomMarker(), markersize=randint(16,26,1))
    plt.plot(x[i], y[i]+50, "m", alpha=0.5, marker=getMarker(i), markersize=randint(16,26,1))
    # Let's see if their "center" is located where we expect them to be...
    plt.plot(x[i], y[i]+100, "y", alpha=0.5, marker=getMarker(i), markersize=24)
    plt.plot(x[i], y[i]+100, "k+", markersize=12, markeredgewidth=2)

plt.xlabel("x-axis")
plt.ylabel("y-axis")
plt.xlim( -5, plt.xlim()[1]+5 )
plt.ylim( 0, plt.ylim()[1]*1.1 )
plt.gcf().set_size_inches(12,6)
plt.show() 
```

![检查图像](../Images/3e4092a0ab2b685f979e7c386d69db9d.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-10-25T05:23:29.777

最灵活的选项`matplotlib`是[标记路径](https://matplotlib.org/3.1.1/gallery/shapes_and_collections/marker_path.html)。

我使用 Inkscape 将[笑脸 svg](https://commons.wikimedia.org/wiki/File:718smiley.svg)转换为单个 SVG 路径。Inkscape 还具有在光栅图像中跟踪路径的选项。我使用 svg path 将其转换为`matplotlib.path.Path`使用[svgpath2mpl](https://github.com/nvictus/svgpath2mpl)。

```
!pip install svgpath2mpl matplotlib
from svgpath2mpl import parse_path

import matplotlib.pyplot as plt      
import numpy as np                   
# Use Inkscape to edit SVG, 
# Path -> Combine to convert multiple paths into a single path
# Use Path -> Object to path to convert objects to SVG path
smiley = parse_path("""m 739.01202,391.98936 c 13,26 13,57 9,85 -6,27 -18,52 -35,68 -21,20 -50,23 -77,18 -15,-4 -28,-12 -39,-23 -18,-17 -30,-40 -36,-67 -4,-20 -4,-41 0,-60 l 6,-21 z m -302,-1 c 2,3 6,20 7,29 5,28 1,57 -11,83 -15,30 -41,52 -72,60 -29,7 -57,0 -82,-15 -26,-17 -45,-49 -50,-82 -2,-12 -2,-33 0,-45 1,-10 5,-26 8,-30 z M 487.15488,66.132209 c 121,21 194,115.000001 212,233.000001 l 0,8 25,1 1,18 -481,0 c -6,-13 -10,-27 -13,-41 -13,-94 38,-146 114,-193.000001 45,-23 93,-29 142,-26 z m -47,18 c -52,6 -98,28.000001 -138,62.000001 -28,25 -46,56 -51,87 -4,20 -1,57 5,70 l 423,1 c 2,-56 -39,-118 -74,-157 -31,-34 -72,-54.000001 -116,-63.000001 -11,-2 -38,-2 -49,0 z m 138,324.000001 c -5,6 -6,40 -2,58 3,16 4,16 10,10 14,-14 38,-14 52,0 15,18 12,41 -6,55 -3,3 -5,5 -5,6 1,4 22,8 34,7 42,-4 57.6,-40 66.2,-77 3,-17 1,-53 -4,-59 l -145.2,0 z m -331,-1 c -4,5 -5,34 -4,50 2,14 6,24 8,24 1,0 3,-2 6,-5 17,-17 47,-13 58,9 7,16 4,31 -8,43 -4,4 -7,8 -7,9 0,0 4,2 8,3 51,17 105,-20 115,-80 3,-15 0,-43 -3,-53 z m 61,-266 c 0,0 46,-40 105,-53.000001 66,-15 114,7 114,7 0,0 -14,76.000001 -93,95.000001 -76,18 -126,-49 -126,-49 z""")
smiley.vertices -= smiley.vertices.mean(axis=0)
x = np.linspace(-3, 3, 20)          
plt.plot(x, np.sin(x), marker=smiley, markersize=20, color='c')
plt.show() 
```

[谷歌 Colab 链接](https://colab.research.google.com/drive/1RonnV9F2iWa8uR_Q8rgSJTbtymOIJMKX)

[![从上面的代码片段创建的绘图](../Images/d5aeca00540168c49e2ad2aa3c431062.png)](https://i.stack.imgur.com/6oupq.png)

# java - 参数化类问题

> ID：14324276
> 
> 赞同：0
> 
> 时间：2013-01-14T18:24:41.450
> 
> 标签：java, generics, inheritance

我对参数化类型有一种奇怪的行为。我有一个扩展类 B 的类 A。A 有一个扩展类 Predicate 的内部类 A1。代码如下所示：

```
public abstract class A<T> extends B<T> {
    public T uniqueResult (String param, Object value) {
        A1 filter = new A1();
        filter.setParam(param);
        filter.setValue(value);
        return container.query(filter).next();
    }
    public class A1 extends Predicate<T> {
        public boolean match (T bean) {
            Object result = BeanUtils.getPropertyValue(bean, fieldName);
            return result == null ? null : result.equals(value);
        }  
    }
} 
```

最后类 D 扩展 A 并使用 uniqueResult 方法：

```
public class D extends A<MyVO> {
    public MyVO findById (BigDecimal id) {
        return uniqueResult("id", id);
    }
} 
```

问题是匹配方法（A1 内部）接收 BigDecimal 而不是 MyVO。如果我覆盖 D 中的 uniqueResult 方法，它可以正常工作，但我不明白为什么会发生这种情况。

覆盖的 uniqueResult 如下所示：

```
public MyVO uniqueResult (final String fieldName, final Object value) {
    return container().query(
        new Predicate<MyVO>() {
            private static final long   serialVersionUID    = 1L;
            public boolean match(MyVO bean) {
                Object result = BeanUtils.getPropertyValue(bean, fieldName);
                return result == null ? null : result.equals(value);
            }
        }
    ).next();
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:49:17.400

行为根本不受泛型的影响。它是编译时特性，泛型信息在编译后（实际上）丢失了。所以问题出在其他地方，IMO。

顺便说一句，你为什么不只介绍 Predicate getFilter() 并覆盖覆盖。会变得更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:26:37.020

问题在于 Java 泛型类型擦除。我使用的 API（包含 Predicate 类）在创建像 Predicate 这样参数化的谓词时出现问题。幸运的是，它提供了一个构造函数来接收要匹配的具体类作为参数。它并不优雅，但它有效。

代码是这样的：

A中的uniqueResult方法：

```
protected T uniqueResult (final String fieldName, final Object value) {
    return container().query(
        new Predicate<T>(getPredicateClass()) {
            private static final long   serialVersionUID    = 1L;
            public boolean match(T bean) {
                Object result = BeanUtils.getPropertyValue(bean, fieldName);
                return result == null ? null : result.equals(value);
            }
        }
    ).next();
} 
```

添加

```
protected abstract Class<T> getPredicateClass(); 
```

最后在 D 中：

```
protected Class<MyVO> getPredicateClass() {
    return MyVO.class;
} 
```

问候！

# security - TelNet 和 SSH 的优点和缺点

> ID：14324278
> 
> 赞同：0
> 
> 时间：2013-01-14T18:24:48.590
> 
> 标签：security, telnet

Telnet 和 SSH 是登录远程服务器的两种方式。SSH 必须优先于 Telnet。但是在 windows 中安装了 Telnet 包但没有安装 SSH，为什么我们更有可能使用像 PuttY 这样的第三方工具。

如果 SSH 在 Windows 中可用，我们如何启用它？SSH 和 Telnet 的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:50:05.940

Telnet 以明文形式发送所有内容，包括密码等用户帐户详细信息。默认情况下，它甚至不包含在 Windows Vista 或更高版本中。

默认情况下，PuTTY 可能不包含在 Windows 中，但它被广泛使用（并且也是开源的），它的所有问题都可以很快找到并解决，以确保使用安全。

# mysql - 具有多个 WHERE 子句的 SQL Like 语句

> ID：14324280
> 
> 赞同：0
> 
> 时间：2013-01-14T18:25:04.820
> 
> 标签：mysql, sql, where-clause, sql-like

我在让它工作时遇到问题。我有多个 WHERE 语句需要根据搜索查询中的条件信息发生。在那里，我似乎无法让这些`LIKE`陈述发挥作用。

在数据库中`STREET_NUM`&`STREET_NAME`位于不同的行中。我正在使用一个输入字段来检查被调用`$address`

我也在努力让`MIN`&`MAX`工作。

这是查询：

```
$sql = "SELECT * FROM arc_property_res WHERE ( arc_property_res.STATUS = 'Active'";
        if(!empty($_GET['city'])){
            // City only query!
            $sql .= "AND arc_property_res.CITY = '{$_GET['city']}'";
        }
        if(!empty($_GET['neighborhood'])){
            // Hood only query!
            $sql .= "AND arc_property_res.SUBDIVISION = '{$_GET['neighborhood']}'";
        }
        if(!empty($_GET['mls-number'])){
            // MLS only query!
            $sql .= "AND arc_property_res.MLS_ACCT = '{$_GET['mls-number']}'";
        }
        if(!empty($_GET['min-price']) && !empty($_GET['max-price'])){
            // MIN AND MAX only query!
            $sql .= "AND arc_property_res.LIST_PRICE = MIN('{$_GET['min-price']}') MAX('{$_GET['max-price']}')";
        }
        if(!empty($_GET['num-of-beds'])){
            // BEDS only query!
            $sql  .= "AND arc_property_res.BEDROOMS = '{$_GET['num-of-beds']}'";
        }
        if(!empty($_GET['num-of-baths'])){
            // BATHS only query!
            $sql  .= "AND arc_property_res.BATHS_FULL = '{$_GET['num-of-baths']}'";
        }
        if(!empty($_GET['mls-number'])){
            // BATHS only query!
            $sql  .= "AND arc_property_res.MLS_ACCT = '{$_GET['mls-number']}'";
        }
        if(!empty($_GET['address'])){
            $sql  .= "AND arc_property_res.STREET_NUM LIKE '%{$_GET['address']}'";
            $sql  .= "OR arc_property_res.STREET_NAME LIKE '{$_GET['address']}%'";
        }

    $sql .= ") ORDER BY {$orderby}{$price_order}{$comma}{$list_date}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:28:55.963

除了[您的查询有明显的“Bobby Tables”问题](http://xkcd.com/327/)外，手头的问题是您没有在`AND`. 这会产生如下所示的查询：

```
AND arc_property_res.BEDROOMS =3AND arc_property_res.BATHS_FULL =2 
```

`3`请注意，和之间没有空格`AND`- 语法错误。

您应该考虑对查询进行参数化，并以忽略已设置为的参数的方式对其进行修改`NULL`。

```
SELECT * FROM arc_property_res WHERE ( arc_property_res.STATUS = 'Active'
AND (arc_property_res.CITY = @cityParam OR @cityParam is NULL)
AND (arc_property_res.SUBDIVISION = @subdiv OR @subdiv is NULL)
...
) 
```

无论实际设置的参数数量如何，此修改都可以让您保持查询不变，获得相同的结果，花费几乎相同的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:27:48.163

我认为你所需要的只是`arc_property_res.STREET_NUM`. 此外，我建议您在整个代码的每一行周围添加一些空格，以免出现语法错误。

```
if(!empty($_GET['address'])){
    $sql  .= " AND (arc_property_res.STREET_NUM LIKE '%{$_GET['address']}' ";
    $sql  .= " OR arc_property_res.STREET_NAME LIKE '{$_GET['address']}%') ";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:35:03.627

`$sql .= "AND arc_property_res.LIST_PRICE = MIN('{$_GET['min-price']}') MAX('{$_GET['max-price']}')";`

min 和 max 函数适用于您想要获取数据库中字段的最小值和最大值时。

您想要的是比较标价以查看它是否介于用户提供的最小值和最大值之间。

```
 $sql .= " AND arc_property_res.LIST_PRICE >= '{$_GET['min-price']}' AND arc_property_res.LIST_PRICE <= '{$_GET['max-price']}'"; 
```

# emacs - 带有 SML 的 emacs：如何设置文件夹以便 emacs 控制台可以读取文件

> ID：14324283
> 
> 赞同：2
> 
> 时间：2013-01-14T18:25:16.960
> 
> 标签：emacs, sml

我正在使用带有 SML 插件的 emacs。我键入`C-c C-s`移动到 sml 控制台。之后，我想读取文件`A.sml`以进行导入。

```
use "A.sml"; 
```

但我会注意到错误：

> [使用失败：Io：openIn 在“Pair.sml”上失败，Win32TextPrimIO：openRd：失败]

我知道这个错误是因为 emacs 不知道在哪里读取这个文件。那么，我们如何设置目录或其他类似的东西，以便 SML 控制台可以读取此文件。（可以假设`A.sml`是存储的`D:\SML` ）

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:01:02.923

另一种方法是将文件直接加载到 SML 控制台中，`C-c C-l`并跳过切换到 SML 控制台的中间步骤，然后使用`use "A.sml"`. `C-c C-l`使用from加载`A.sml`将显示如下内容：

```
Load ML file: (default file.sml) ~/Directory/ 
```

然后按回车键加载`file.sml`到 SML 控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:53:38.700

在运行 sml-mode 的缓冲区中，您可以使用`C-c C-b`它来解释其内容。

如果不存在运行 SML 解释的缓冲区，它将询问您从哪个开始，然后解释内容。如果已经存在这样的缓冲区，它只会解释内容而没有任何麻烦。

# database-design - 如果支持 ORM 设计会使我的数据库变得混乱怎么办？

> ID：14324284
> 
> 赞同：0
> 
> 时间：2013-01-14T18:25:17.800
> 
> 标签：database-design

我有一个系统，用户可以在其中声明各种类型的对象-

```
Teams, 
Facilities, 
Equipment, 
Personnel 
```

用户由“单元”表示——组织馅饼的一个独立切片。在为这些对象之一创建声明后，他们可以设置声明的状态。看起来很简单，对吧？

好吧，这就是头痛的开始。如上所述，这些东西形成了一个松散的层次结构。超级用户使用少量链接表为每个对象创建模板。团队可以由设施、设备和人员组成，设施由设备和人员组成，单元可以为他们想要的任何东西创建索赔。非常灵活，但在后端很烦人。

团队、设施、设备和人员具有完全相同的列：

```
Id, 
Name, 
Description, 
DateCreated, 
CreatedById, 
IsArchived 
```

为了与 ORM 概念保持一致，现在每一个都是一个单独的表。当用户需要创建声明时，真正的痛苦就来了。层次结构将为我们留下以下表格：

```
TeamClaim, FacilityClaim, EquipmentClaim, PersonnelClaim, TeamFacilityClaim, 
TeamEquipmentClaim, TeamPersonnelClaim, so on and so forth. 
```

加上每个这些索赔表的另一个状态表。

显然，这只是垃圾。

因此，我将设计更改为一个名为 ClaimableItem 的表。它具有上述定义的列，以及“类型”列；这只是一个三个字母的表示。然后我创建了一个名为Claim 的表——它包含所有必要的列，并具有定义为ClaimableItemId 和ClaimableItemType 的复合唯一键。

我已经用我的 C# 代码对此进行了测试。EF4 可能讨厌重复使用密钥，但是一个小的解决方法（hack）使它相对容易完成；我可以在大约一个小时内更改我的所有模型、视图和控制器代码以适应新内容。

我的问题（最后）是这样的：**我的新单桌设计是废话吗？** 它使我的数据库不会被表弄得乱七八糟，实际上会加快添加新的 ClaimableItem 类型——无需为它们创建新对象。我的问题是，三个字母的表示不直观，值得一废，必须在代码中处理，这对我的纯粹主义者有点恼火。

**任何人都有更好的想法如何做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:38:28.010

首先，你有一些错误的假设。

1.  *以任何特定方式创建表都不*是“与 ORM 概念保持一致”。
2.  *没有*必要为每种类型都有单独的表
3.  没有必要到处都有链接表*。*

大多数 ORM 支持一种使用列鉴别器的继承形式，通常是某种类型的类型值，这与您提出的解决方案相同。

这是设计数据模型和数据库的一种非常实用和实用的方法，但它并不完全是“纯粹的”数据库设计概念，因为您可以再使用引用完整性和约束来确保只有某些值意味着某些东西。

例如，当您有一个 TeamClaim 链接表时，您可以（通过使用参照完整性）保证加入的每个值都是一个团队和一个声明，因为它们是数据库中不同的实体。

如果您打算将团队和索赔联系起来，但将设施和索赔联系起来，会发生什么？哎呀。并且数据库无法知道您犯了错误。

这类似于一个真正的查找表问题。

但是，对于许多人来说，失去参照完整性只是为获得更大的灵活性而付出的很小的代价。你只需要在你的代码中非常小心，不要让人们手动弄乱表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:24:00.137

听起来像是继承的一个很好的例子。有`Teams, Facilities, Equipment, Personnel`继承`ClaimableItem`和`Claim`参考`ClaimableItem`。

这实际上与您的建议非常相似。你说：

> 因此，我将设计更改为一个名为 ClaimableItem 的表。它具有上述定义的列，以及“类型”列；这只是一个三个字母的表示。然后我创建了一个名为Claim 的表——它包含所有必要的列，并具有定义为ClaimableItemId 和ClaimableItemType 的复合唯一键。

我认为您不需要复合外键。它们`Type`的鉴别器列可以坐在`ClaimableItem`表中。

这是*纯*的吗？我认为是这样。这是继承的完美案例。

最后的评论：在这种情况下，请凭直觉。如果您觉得解决方案很糟糕，并且您发现自己希望得到更简单的解决方案，那就去做吧。权衡有时是不明确的选择，随着时间的推移，开发人员学会本能地判断什么是长期正确的。

# java - 在 Java 中清理线程

> ID：14324288
> 
> 赞同：9
> 
> 时间：2013-01-14T18:25:32.683
> 
> 标签：java, multithreading, concurrency

我有一个 Java 方法，它对输入集执行两个计算：估计的和准确的答案。估算值总是可以在可靠的时间内廉价地计算出来。有时可以在可接受的时间内计算出准确的答案，有时则不能（先验未知......必须尝试看看）。

我要设置的是一些框架，如果准确的答案花费太长时间（固定超时），则使用预先计算的估计值。我想我会为此使用一个线程。主要的复杂性是计算准确答案的代码依赖于外部库，因此我不能“注入”中断支持。

这个问题的独立测试用例在这里，展示了我的问题：

```
package test;

import java.util.Random;

public class InterruptableProcess {
    public static final int TIMEOUT = 1000;

    public static void main(String[] args){
        for(int i=0; i<10; i++){
            getAnswer();
        }
    }

    public static double getAnswer(){
        long b4 = System.currentTimeMillis();
        // have an estimate pre-computed
        double estimate = Math.random();

        //try to get accurate answer
        //can take a long time
        //if longer than TIMEOUT, use estimate instead
        AccurateAnswerThread t = new AccurateAnswerThread();
        t.start();

        try{
            t.join(TIMEOUT);
        } catch(InterruptedException ie){
            ;
        }

        if(!t.isFinished()){
            System.err.println("Returning estimate: "+estimate+" in "+(System.currentTimeMillis()-b4)+" ms");
            return estimate;
        } else{
            System.err.println("Returning accurate answer: "+t.getAccurateAnswer()+" in "+(System.currentTimeMillis()-b4)+" ms");
            return t.getAccurateAnswer();
        }

    }

    public static class AccurateAnswerThread extends Thread{
        private boolean finished = false;
        private double answer = -1;

        public void run(){
            //call to external, non-modifiable code
            answer = accurateAnswer();
            finished = true;
        }

        public boolean isFinished(){
            return finished;
        }

        public double getAccurateAnswer(){
            return answer;
        }

        // not modifiable, emulate an expensive call
        // in practice, from an external library
        private double accurateAnswer(){
            Random r = new Random();
            long b4 = System.currentTimeMillis();
            long wait = r.nextInt(TIMEOUT*2);

            //don't want to use .wait() since
            //external code doesn't support interruption
            while(b4+wait>System.currentTimeMillis()){
                ;
            }
            return Math.random();
        }
    }
} 
```

这工作正常输出...

```
Returning estimate: 0.21007465651836377 in 1002 ms
Returning estimate: 0.5303547292361411 in 1001 ms
Returning accurate answer: 0.008838428149438915 in 355 ms
Returning estimate: 0.7981717302567681 in 1001 ms
Returning estimate: 0.9207406241557682 in 1000 ms
Returning accurate answer: 0.0893839926072787 in 175 ms
Returning estimate: 0.7310211480220586 in 1000 ms
Returning accurate answer: 0.7296754467596422 in 530 ms
Returning estimate: 0.5880164300851529 in 1000 ms
Returning estimate: 0.38605296260291233 in 1000 ms 
```

但是，我有一个非常大的输入集（大约数十亿个项目）来运行我的分析，我不确定如何清理未完成的线程（我不希望它们在背景）。

我知道有充分的理由不推荐使用各种销毁线程的方法。我也知道停止线程的典型方法是使用中断。但是，在这种情况下，我看不到我可以使用中断，因为该`run()`方法将单个调用传递给外部库。

**在这种情况下如何杀死/清理线程？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:58:46.643

我会尝试看看它是否会响应 Thread.interrupt()。当然减少你的数据，这样它就不会永远运行，但如果它响应一个中断（），那么你就可以回家了。如果他们锁定任何东西，执行 wait() 或 sleep()，代码将不得不处理 InterruptedException，并且作者可能做了正确的事情。他们可能会吞下它并继续，但有可能他们没有。

虽然从技术上讲，您可以调用 Thread.stop()，但您需要了解有关该代码的所有信息，才能确定它是否安全并且不会泄漏资源。但是，进行这项研究将引导您了解如何轻松修改代码以查找 interrupt() 。您几乎必须拥有源代码来审核它以确定这意味着您可以轻松地做正确的事情并在那里添加检查，而无需进行太多研究以了解调用 Thread.stop() 是否安全。

另一种选择是在线程中引发 RuntimeException。尝试清空它可能拥有的引用或关闭一些 IO（套接字、文件句柄等）。通过更改大小来修改它正在遍历的数据数组或将数据清空。您可以采取一些措施来使其引发异常并且未处理并且它将关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:51:58.217

如果您对外部库足够了解，例如：

1.  从不获取任何锁；
2.  从不打开任何文件/网络连接；
3.  从不涉及任何 I/O，甚至不涉及日志记录；

那么在上面使用它**可能**是安全的`Thread#stop`。您可以尝试并进行广泛的压力测试。任何资源泄漏都应该尽快显现出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:22:34.963

扩展chubbsondubs的答案，如果第三方库使用一些定义明确的API（例如`java.util.List`或一些特定于库的API）来访问输入数据集，您可以包装您传递给第三方的输入数据集-带有包装类的聚会代码，该类将在设置标志`List.get`后抛出异常，例如在方法中。`cancel`

例如，如果您将 a 传递`List`给您的第三方库，则可以执行以下操作：

```
class CancelList<T> implements List<T> {
  private final List<T> wrappedList;
  private volatile boolean canceled = false;

  public CancelList(List<T> wrapped) { this.wrappedList = wrapped; }

  public void cancel() { this.canceled = true; }

  public T get(int index) {
    if (canceled) { throw new RuntimeException("Canceled!"); }
    return wrappedList.get(index);
  }

  // Other List method implementations here...
}

public double getAnswer(List<MyType> inputList) {
  CancelList<MyType> cancelList = new CancelList<MyType>(inputList);
  AccurateAnswerThread t = new AccurateAnswerThread(cancelList);
  t.start();

  try{
    t.join(TIMEOUT);
  } catch(InterruptedException ie){
    cancelList.cancel();
  }

  // Get the result of your calculation here...
} 
```

当然，这种方法取决于几件事：

1.  您必须非常了解第三方代码，才能知道它调用了哪些方法可以通过输入参数进行控制。
2.  第三方代码需要在整个计算过程中频繁调用这些方法（即，如果它一次将所有数据复制到内部结构中并在那里进行计算，它将无法工作）。
3.  显然，如果库捕获并处理运行时异常并继续处理，这将不起作用。

# ios - 在我的自定义按钮中打开 Airplay 弹出框

> ID：14324290
> 
> 赞同：0
> 
> 时间：2013-01-14T18:25:46.237
> 
> 标签：ios, xcode, ipad, airplay

我想知道是否可以创建自定义播放按钮并将其添加到工具栏？即我想创建打开与原始 AirPlay 按钮相同的弹出框的按钮，以共享所有屏幕。我看到可以使用 MPMoviePlayerController 或 WebView，但这样我就可以发送视频或音频，但不是所有屏幕......

比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T16:50:09.430

在 iOS 5 中有一些[需要跳过的环节](https://stackoverflow.com/questions/5174204/customize-the-airplay-buttons-appearance)。在 iOS 6 中，这要容易得多。添加一个[`MPVolumeView`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)并使用`setRouteButtonImage:forState:`来改变图标：

```
airplayView = [[MPVolumeView alloc] initWithFrame:airplayContainer.bounds];
airplayView.showsVolumeSlider = NO;
[airplayView setRouteButtonImage:[UIImage imageNamed:@"airplay"] forState:UIControlStateNormal];
[airplayView setRouteButtonImage:[UIImage imageNamed:@"airplay-highlighted"] forState:UIControlStateHighlighted];
[airplayView setRouteButtonImage:[UIImage imageNamed:@"airplay-selected"] forState:UIControlStateSelected];
[airplayContainer addSubview:airplayView]; // or add it to your toolbar or wherever 
```

`airplayContainer`只是`UIView`我在 Interface Builder 中添加的一个普通的，以获得我想要的布局。

# java - 在 Eclipse 中编辑库

> ID：14324291
> 
> 赞同：2
> 
> 时间：2013-01-14T18:25:47.390
> 
> 标签：java, eclipse

我正在尝试增强图书馆。该库位于 Eclipse 的 Referenced 文件夹中。我认为在那个文件夹中我不能只编辑代码所以我想我必须将整个 .jar 文件作为一种项目导入，但我怎么能在**eclipse**中做到这一点.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:29:00.750

正确的方法是查找/下载库的源代码。丑陋的方法是[反编译](https://stackoverflow.com/questions/4375037/java-decompiler)库。

之后，编辑源代码，并针对您的自定义版本运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:29:58.250

您可能需要某种 Java 代码反编译器来获取该库的源代码，然后根据其源代码制作一个 Eclipse 项目。这将是乏味的，您将需要设置依赖项和所有这些。但是，您可能想查看该项目的源代码是否已经在 Internet 上的某个位置，例如开源库。一种更好的方法也可以通过扩展类来扩展该库。

# android - 如何使用独立的 NDK 工具链交叉编译库

> ID：14324293
> 
> 赞同：2
> 
> 时间：2013-01-14T18:25:50.183
> 
> 标签：android, makefile, arm

所以我正在尝试使用源代码交叉编译 Box2D，我想在我的 Mac 上为 Android 编译。我可以跑...

> ../box2d-read-only/Box2D/Build/gmake$ make

这很好用，现在我如何将我正在使用的 GCC 版本更新为 ARM 处理器的版本。我尝试了以下...

> 使 CC="/tmp/my-toolchain/bin/arm-linux-androideabi-gcc"

这似乎有效，但真的吗？我是 gcc 的新手，我预感它正在使用 Mac x86（或其他）gcc。有没有一种好方法来测试它是否为正确的拱门编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:46:05.670

我想我在文档中找到了答案，这似乎可行....

> 导出 PATH=/tmp/my-android-toolchain/bin:$PATH
> 
> export CC=arm-linux-androideabi-gcc # 或者 export CC=clang
> 
> export CXX=arm-linux-androideabi-g++ # 或者 export CXX=clang++
> 
> 制作

仍在努力确认它......

在文档中找到。

# sql-server - SQL Server 不使用索引

> ID：14324294
> 
> 赞同：1
> 
> 时间：2013-01-14T18:25:51.337
> 
> 标签：sql-server, indexing

我正在尝试在 SQL Server 中编写查询，但它正在对具有大约 3000 万行 (TGS_INFO) 的表进行表扫描，因此查询运行非常缓慢。

实际查询更复杂，但我已将其简化为仍然存在相同问题的更简单版本。

```
SELECT DISTINCT UNIT_ITEMS.DBKEY,
    UNIT_ITEMS.ID,
    UNIT_ITEMS.LOCATION1,
    UNIT_ITEMS.LOCATION2
FROM UNIT_ITEMS
INNER JOIN TGS.dbo.TGS_INFO
ON UNIT_ITEMS.UNIT_ID = TGS_INFO.UNIT_ID AND
    UNIT_ITEMS.ITEM_ID = TGS_INFO.ITEM_ID AND
    UNIT_ITEMS.LOCATION1 = TGS_INFO.LOCATION1 AND
    UNIT_ITEMS.LOCATION2 = TGS_INFO.LOCATION2 
```

这是执行计划。

```
StmtText
  |--Sort(DISTINCT ORDER BY:([DbName].[dbo].[UNIT_ITEMS].[DBKEY] ASC, [DbName].[dbo].[UNIT_ITEMS].[ITEM_ID] ASC, [DbName].[dbo].[UNIT_ITEMS].[LOCATION1] ASC, [DbName].[dbo].[UNIT_ITEMS].[LOCATION2] ASC))
       |--Hash Match(Inner Join, HASH:([DbName].[dbo].[UNIT_ITEMS].[UNIT_ID], [DbName].[dbo].[UNIT_ITEMS].[ITEM_ID], [DbName].[dbo].[UNIT_ITEMS].[LOCATION1], [DbName].[dbo].[UNIT_ITEMS].[LOCATION2])=([Expr1008], [Expr1009], [Expr1010], [Expr1011]), RESIDUAL:([DbName].[dbo].[UNIT_ITEMS].[UNIT_ID]=[Expr1008] AND [DbName].[dbo].[UNIT_ITEMS].[ITEM_ID]=[Expr1009] AND [DbName].[dbo].[UNIT_ITEMS].[LOCATION1]=[Expr1010] AND [DbName].[dbo].[UNIT_ITEMS].[LOCATION2]=[Expr1011]))
            |--Table Scan(OBJECT:([DbName].[dbo].[UNIT_ITEMS]))
            |--Compute Scalar(DEFINE:([Expr1008]=CONVERT_IMPLICIT(int,[TGS].[dbo].[TGS_INFO].[UNIT_ID],0), [Expr1009]=CONVERT_IMPLICIT(nvarchar(50),[TGS].[dbo].[TGS_INFO].[ITEM_ID],0), [Expr1010]=CONVERT_IMPLICIT(nvarchar(50),[TGS].[dbo].[TGS_INFO].[LOCATION1],0), [Expr1011]=CONVERT_IMPLICIT(int,[TGS].[dbo].[TGS_INFO].[LOCATION2],0)))
                 |--Table Scan(OBJECT:([TGS].[dbo].[TGS_INFO])) 
```

TGS_INFO 和 UNIT_ITEMS 在 UNIT_ID 和 ITEM_ID 上都有非聚集索引。如前所述，TGS_INFO 有大约 3000 万行，但它们均匀分布在大约一千个不同的 UNIT_ID 周围。UNIT_ITEMS 始终只包含一个 UNIT_ID。

以下是索引：

```
CREATE NONCLUSTERED INDEX [IX_UNIT_ID_ITEM_ID] ON [dbo].[TGS_INFO] 
(
    [UNIT_ID] ASC,
    [ITEM_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

CREATE NONCLUSTERED INDEX [IX_UNIT_ID_ITEM_ID] ON [dbo].[UNIT_ITEMS] 
(
    [UNIT_ID] ASC,
    [ITEM_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

正如我在评论中提到的，所有列都是 TGS_INFO 中的 VARCHAR(50)。UNIT_ITEMS 中的所有列都是整数。

作为记录，我没有设计 TGS_INFO 的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:29:22.210

如果您没有在索引中包含`LOCATION1`和`LOCATION2`，则无法仅从索引中满足连接。将这些列添加到两个表的索引中。

您可能还必须包括查询中引用的所有其他列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:03:00.857

我注意到执行计划显示以下内容：

```
|--Compute Scalar(DEFINE:([Expr1008]=CONVERT_IMPLICIT(int,[TGS].[dbo].[TGS_INFO].[UNIT_ID],0), [Expr1009]=CONVERT_IMPLICIT(nvarchar(50),[TGS].[dbo].[TGS_INFO].[ITEM_ID],0), [Expr1010]=CONVERT_IMPLICIT(nvarchar(50),[TGS].[dbo].[TGS_INFO].[LOCATION1],0), [Expr1011]=CONVERT_IMPLICIT(int,[TGS].[dbo].[TGS_INFO].[LOCATION2],0))) 
```

我想不出查询引擎对这些列进行隐式数据类型转换的充分理由，除非两个表之间的数据类型与您用于连接的列不匹配。

您也可以尝试移至`UNIT_ITEMS.LOCATION1 = TGS_INFO.LOCATION1 AND UNIT_ITEMS.LOCATION2 = TGS_INFO.LOCATION2`该`WHERE`子句，因为它们没有被索引覆盖。查询引擎通常足够聪明，可以解决这个问题，但这是值得尝试的。

# linux - as3 Air 2.5 Linux PrintJob Addpage 槽错误 nº 2057

> ID：14324295
> 
> 赞同：0
> 
> 时间：2013-01-14T18:25:56.023
> 
> 标签：linux, actionscript-3, air, adobe

我有下一行代码：

```
_printJob = new PrintJob();
        if (_printJob.start2(null, _printWorkSettings.usePageSetupDialog)) {
            MonsterDebugger.trace(this, new Date());
            try {
                _printJob.addPage(objectoToPrint, null, _printWorkSettings.jobOptions);
            } catch (error:Error) {
                MonsterDebugger.trace(this, error + "/n" + error.getStackTrace() + "/n" + error.toString());
            }
            _printJob.send();
            MonsterDebugger.trace(this, 'job sended to printer');
            MonsterDebugger.trace(this, new Date());
        } 
```

当它在运行 AIR 2.5 的 Linux 机器上执行时，我收到错误 2057，我检查了 start2 方法和发送之间的时间，并且是同一秒。我还检查了 objectToPrint 属性是否是 MovieClip。

这适用于 Windows PC，我无法进行比使用 MonsterDebugger 的跟踪更好的调试，所以关于如何获得有关 addPage 为何返回此错误的更多信息或任何有关的任何信息的任何想法Linux 上的打印作业？

顺便说一句，我也试过：

```
_printJob.addPage(objectoToPrint); 
```

我得到了同样的结果。

_printWorkSettings.usePageSetupDialog 属性始终为 true，因此我现在为用户显示打印菜单。

提前谢谢各位:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:05:20.607

我发现了问题，linux系统上只有一台打印机并且没有设置默认值所以addpage trowh错误。

[我在这个论坛](http://forums.adobe.com/thread/515196)上得到了灵感

# ios - 在 UIWebView 中加载包含许多 YouTube 视频的 HTML 文件时，应用程序会收到内存警告和崩溃

> ID：14324303
> 
> 赞同：8
> 
> 时间：2013-01-14T18:26:27.713
> 
> 标签：ios, memory-management, uiwebview

我`UIWebView`在我的应用程序中使用 a 。它通常运行良好，但存在应用程序收到内存警告并最终崩溃的情况。

我用这个加载内容：

```
[self.webView loadHTMLString:htmlString baseURL:baseURL]; 
```

有一个案例中`htmlString`有超过 25 个 YouTube 视频（这不是我的想法——这是我收到的网页）。所以在这种情况下，应用程序会收到一些内存警告并最终崩溃。

我该如何处理这种情况？是否可以在不同的步骤中加载 HTML 文件？

我不知道这是否与它有关，但我正在`UIWebView`动态设置大小 - 以及包含 Web 视图的滚动视图的内容大小。这是代码：

```
- (void) webViewDidFinishLoad:(UIWebView *)webView
{
    // Adaptamos las vistas al contenido y ocultamos el indicador de actividad

    // Ponemos el webView del tamaño justo del contenido

    CGRect frame = webView.frame;
    // Hace falta cambiar la height porque si no, no coge los cambios. Visualmente no se ve diferencia
    frame.size.height = 1;
    webView.frame = frame;
    CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
    frame.size.height = fittingSize.height;
    webView.frame = frame;

    // Movemos el botón y lo ponemos donde acabe el webView
    CGRect buttonFrame = self.visitSiteButton.frame;
    buttonFrame.origin.y = frame.origin.y + frame.size.height + 20;
    self.visitSiteButton.frame = buttonFrame;

    // Ampliamos el contenSize del scrollview general para que quepa todo el webView
    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width, self.visitSiteButton.frame.origin.y + self.visitSiteButton.frame.size.height + 10);
} 
```

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:39:38.770

一个淘气的小把戏怎么样。获取页面的html，代码如下：

```
NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];
    NSURLResponse * response = nil;
    NSError * error = nil;
    NSData * data  = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString* newStr = [[NSString alloc] initWithData:theData
                                     encoding:NSUTF8StringEncoding]; 
```

使用正则表达式查找视频元素并替换为您的自定义图像超链接标签 >。将 html 字符串显示为：

```
[webView loadHTMLString: baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:04:31.507

形势严峻。如果您确信您的代码不是原因（使用仪器检查泄漏）；那么您的下一个最佳选择可能是尝试避免崩溃。想到了几种可能性：

1）当您收到内存警告时，您可能会：

```
if (self.webView.loading) {
    [self.webview stopLoading];
    //inform user page cannot be fully loaded.
} 
```

2）如果这不起作用，您可以`return NO`遵循`UIWebViewDelegate` `webView:shouldStartLoadWithRequest:navigationType:`内存警告来阻止页面继续拉入大量资源。

3）也许作为最后的手段，停止 webview 加载，将其从您的视图中删除，然后释放它。

希望其中之一能奏效。你能分享让你崩溃的页面吗？听起来对测试目的很有帮助！此外 - 您应该向 Apple 提交 rdar，以防他们希望在较低级别解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:35:30.160

单个 HTML 页面中的 25 个 youtube 视频似乎太多了：内存已满，应用程序被杀死。

如果您不愿意修改 HTML 页面的设计，我怀疑还有很多事情要做。但如果你愿意，那么有很多选择。例如，您可以实现 HTML 的延迟加载（通过 javascript），以便只显示少数视频（如在 UITableView 中）。或者，您可以将链接到 youtube 的 HTML 代码替换为其他“更轻”的代码，然后让用户加载新的 UIWebView 以观看特定视频。等等。

# java - 仅在一项活动上删除/隐藏 searchView

> ID：14324304
> 
> 赞同：5
> 
> 时间：2013-01-14T18:26:33.320
> 
> 标签：java, android

我的项目中有 3 项活动，我想仅在一项活动的操作栏中删除/隐藏 searchView。

我试过 searchView.setVisibility(View.GONE); 但仍有可点击的图标。

main_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:id="@+id/menu_search"
      android:title="@string/menu_search"
      android:icon="@drawable/ic_menu_search"
      android:showAsAction="ifRoom|collapseActionView"
      android:actionViewClass="android.widget.SearchView" />
<item
    android:id="@+id/item_clear_memory_cache"
    android:title="@string/menu_item_clear_memory_cache"/>

<item
    android:id="@+id/item_clear_disc_cache"
    android:title="@string/menu_item_clear_disc_cache"/>

</menu> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T18:29:03.347

`menu.findItem(R.id.menu_search).setVisible(false);`应该是这样的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-08T09:34:07.303

您可以通过执行以下操作隐藏搜索视图和搜索图标：

```
searchItem.setVisible(false);
searchView.setVisibility(View.GONE); 
```

然后，您可以通过以下方式将其带回：

```
searchItem.setVisible(true);
searchView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-09T14:17:52.900

好吧，在这里进行一些研究之后，您可以找到我的完整示例。不要忘记在需要显示搜索视图的活动或片段中设置可见性和可见性。

我正在寻找一种**在首选项**中隐藏搜索视图的方法。

```
public class SettingsFragment extends PreferenceFragmentCompat {
    @Override
    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {
        setPreferencesFromResource(R.xml.preferences, rootKey);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // this means that we're telling the Activity that is hosting the Fragment that we want to display menus
        setHasOptionsMenu(true);
    }

    /**
     * ********************* SEARCH ********************
     */
    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        final MenuItem item = menu.findItem(R.id.action_search);
        final SearchView searchView = (SearchView) item.getActionView();
        item.setVisible(false);
        searchView.setVisibility(View.GONE);
    }

} 
```

和 menu_main.xml

```
<item android:id="@+id/action_search"
    android:title="@string/action_search"
    app:actionViewClass="androidx.appcompat.widget.SearchView"
    android:icon="@android:drawable/ic_menu_search"
    app:showAsAction="always|collapseActionView"
    /> 
```

# php - 解析错误：语法错误，第 192 行 /functions.php 中的意外 T_VARIABLE

> ID：14324305
> 
> 赞同：-5
> 
> 时间：2013-01-14T18:26:32.450
> 
> 标签：php, wordpress

从昨天早上开始，我的网站上出现了以下错误，该错误是使用 WP 3.2.1 通过 godaddy.com 托管的。我现在知道该网站被黑了。我无权访问 WP admin CP，因为它也带有相同的错误：

> 解析错误：语法错误，第 192 行 /home/content/xx/xxxxx/html/websites/xxxxxxxx/wp-includes/functions.php 中的意外 T_VARIABLE

这是 php 文件中的代码行：

```
$mm = substr( $mysqlstring, 8, 2 ); // Mysql string Month 
```

任何人都可以帮忙吗？

这是整个块：

```
function size_format( $bytes, $decimals = 0 ) {
$quant = array(
    // ========================= Origin ====
    'TB' => 1099511627776,  // pow( 1024, 4)
    'GB' => 1073741824,     // pow( 1024, 3)
    'MB' => 1048576,        // pow( 1024, 2)
    'kB' => 1024,           // pow( 1024, 1)
    'B ' => 1,              // pow( 1024, 0)
);
foreach ( $quant as $unit => $mag )
    if ( doubl// Mysql string Year
$mm = substr( $mysqlstring, 8, 2 ); // Mysql string Month
$md = substr( $mysqlstring, 5, 2 ); // Mysql string day
$day = mktime( 0, 0, 0, $md, $mm, $my ); // The timestamp for mysqlstring day.
$weekday = date( 'w', $day ); // The day of the week from the timestamp
if ( !is_numeric($start_of_week) )
    $start_of_week = get_option( 'start_of_week' );

if ( $weekday < $start_of_week )
    $weekday += 7;

$start = $day - 86400 * ( $weekday - $start_of_week ); // The most recent week start day on or before $day
$end = $start + 604799; // $start + 7 days - 1 second
return compact( 'start', 'end' );
}

/**
 * Unserialize value only if it was serialized.
 *
 * @since 2.0.0
 *
 * @param string $original Maybe unserialized original, if is needed.
 * @return mixed Unserialized data can be any type.
 */
function maybe_unserialize( $original ) {
    if ( is_serialized( $original ) ) // don't attempt to unserialize data that wasn't serialized going in
        return @unserialize( $original );
    return $original;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:31:37.277

前一行是：

```
if ( doubl// Mysql string Year 
```

显然，该行不完整，因此出现解析错误。

# asp.net - 集成测试：MembershipProvider - TypeLoadException

> ID：14324307
> 
> 赞同：2
> 
> 时间：2013-01-14T18:26:39.670
> 
> 标签：asp.net, tdd, asp.net-membership

我正在尝试编写一些使用 CustomMembershipProvider 创建/删除/更改用户的测试。CustomMembershipProvider 是 WebApp 程序集的一部分。

当我运行测试时，出现以下异常：

```
System.TypeLoadException : Could not load type 'WebApp.Framework.CustomMembershipProvider' from assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, ref StackCrawlMark stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName)
   at System.Type.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase)
   at System.Web.Security.Membership.InitializeSettings(Boolean initializeGeneralSettings, RuntimeConfig appConfig, MembershipSection settings)
   at System.Web.Security.Membership.Initialize()
   at System.Web.Security.Membership.get_Providers()
   at System.Web.Security.MembershipUser..ctor(String providerName, String name, Object providerUserKey, String email, String passwordQuestion, String comment, Boolean isApproved, Boolean isLockedOut, DateTime creationDate, DateTime lastLoginDate, DateTime lastActivityDate, DateTime lastPasswordChangedDate, DateTime lastLockoutDate)
   at BusinessLayer.Users.UserRepository.Add(User user, ref MembershipCreateStatus status) in UserRepository.cs: line 43
   at WebApp.Framework.CustomMembershipProvider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, ref MembershipCreateStatus status) in CustomMembershipProvider.cs: line 86
   at Tests.Framework.CustomMembershipProviderTests.CreateUser() in CustomMembershipProviderTests.cs: line 22 
```

当我执行这行代码时抛出异常：

```
 return new MembershipUser(
            "MyMembershipProvider",
            user.Name,
            null,
            user.EmailAddress,
            string.Empty,
            string.Empty,
            true,
            false,
            DateTime.MinValue,
            DateTime.MinValue,
            DateTime.MinValue,
            DateTime.MinValue,
            DateTime.MinValue); 
```

在我的测试项目中，将以下行添加到我的 app.conf 中：

成员定义：

```
 <system.web>
    <membership defaultProvider="MyMembershipProvider">
      <providers>
        <clear/>
        <add name="MyMembershipProvider" type="WebApp.Framework.CustomMembershipProvider" connectionStringName="DefaultConnection"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>
  </system.web> 
```

数据库连接：

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=WS050129\SQLEXPRESS;Initial Catalog=Users;Integrated Security=True;" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

对我来说看起来不错，但显然有些不对劲:)。有人能指出我正确的方向吗？这里有点不知所措。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T18:51:31.830

尝试改变这个：

```
<add name="MyMembershipProvider" type="WebApp.Framework.CustomMembershipProvider"       connectionStringName="DefaultConnection"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" /> 
```

...对此：

```
<add name="MyMembershipProvider" type="WebApp.Framework.CustomMembershipProvider, WebApp" connectionStringName="DefaultConnection"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" /> 
```

You may need to tweak that a little. But it looks like the problem is that, lacking information about what assembly the type is in, the framework is looking in `System.Web`. Flesh out the type definition attribute on that tag.

# excel - 查找列中的项目数并添加另一列中的值

> ID：14324308
> 
> 赞同：1
> 
> 时间：2013-01-14T18:26:43.127
> 
> 标签：excel, formula

我在表中有两列（A 和 B）。A 列有一个项目名称，B 列有一个数量。我想对所有具有相同名称的项目的数量求和。例子：

```
Item        |  Quantity
------------+----------
Red Hat     |         3
Green Shirt |         9
Red Hat     |         4
Blue Pants  |         6
Blue Pants  |         3
Green Shirt |        12 
```

我想在包含以下内容的表中添加一列：

```
Item        |  Quantity  |  Total
------------+------------+-------
Red Hat     |         3  |      7
Green Shirt |         9  |     21
Red Hat     |         4  |      7
Blue Pants  |         6  |      9
Blue Pants  |         3  |      9
Green Shirt |        12  |     21 
```

我希望能够按总数量最多的项目对表格进行排序（按项目名称分组，所以如果两个项目的总数量相同，我希望它们分开分组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:30:12.003

试试 SUMIF 函数。有关详细信息，请参阅[http://www.techonthenet.com/excel/formulas/sumif.php 。](http://www.techonthenet.com/excel/formulas/sumif.php)

更具体地说，单元格 C1 的公式应为：

`=SUMIF(A:A,A1,B:B)`

假设 A 列和 B 列分别是项目和数量。

![在此处输入图像描述](../Images/40dab659c754928382db60b92533689e.png)

# python - 将 Python 代码反汇编成字典

> ID：14324309
> 
> 赞同：2
> 
> 时间：2013-01-14T18:27:05.770
> 
> 标签：python, debugging, disassembly

我想为 Python 程序开发一个小型调试工具。对于“动态切片”功能，我需要找到在语句中访问的变量，并找到这些变量的访问类型（读取或写入）。

但是 Python 中内置的唯一反汇编功能是[`dis.disassemble`](http://docs.python.org/2/library/dis.html#dis.disassemble)，它只是将反汇编打印到标准输出：

```
>>> dis.disassemble(compile('x = a + b', '', 'single'))
  1           0 LOAD_NAME                0 (a)
              3 LOAD_NAME                1 (b)
              6 BINARY_ADD          
              7 STORE_NAME               2 (x)
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE 
```

我希望能够将反汇编转换为描述每条指令使用哪些变量的集合字典，如下所示：

```
>>> my_disassemble('x = a + b')
{'LOAD_NAME': set(['a', 'b']), 'STORE_NAME': set(['x'])} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:49:10.473

阅读[该`dis`模块](http://hg.python.org/cpython/file/c5451d4a0cdd/Lib/dis.py)的源代码，您会发现很容易进行自己的反汇编并生成您喜欢的任何输出格式。下面是一些在代码对象中生成指令序列的代码，以及它们的参数：

```
from opcode import *

def disassemble(co):
    """
    Disassemble a code object and generate its instructions.
    """
    code = co.co_code
    n = len(code)
    extended_arg = 0
    i = 0
    free = None
    while i < n:
        c = code[i]
        op = ord(c)
        i = i+1
        if op < HAVE_ARGUMENT:
            yield opname[op],
        else:
            oparg = ord(code[i]) + ord(code[i+1])*256 + extended_arg
            extended_arg = 0
            i = i+2
            if op == EXTENDED_ARG:
                extended_arg = oparg*65536L
            if op in hasconst:
                arg = co.co_consts[oparg]
            elif op in hasname:
                arg = co.co_names[oparg]
            elif op in hasjrel:
                arg = repr(i + oparg)
            elif op in haslocal:
                arg = co.co_varnames[oparg]
            elif op in hascompare:
                arg = cmp_op[oparg]
            elif op in hasfree:
                if free is None:
                    free = co.co_cellvars + co.co_freevars
                arg = free[oparg]
            else:
                arg = oparg
            yield opname[op], arg 
```

这是一个反汇编示例。

```
>>> def f(x):
...     return x + 1
... 
>>> list(disassemble(f.func_code))
[('LOAD_FAST', 'x'), ('LOAD_CONST', 1), ('BINARY_ADD',), ('RETURN_VALUE',)] 
```

您可以轻松地将其转换为所需的字典集数据结构：

```
>>> from collections import defaultdict
>>> d = defaultdict(set)
>>> for op in disassemble(f.func_code):
...     if len(op) == 2:
...         d[op[0]].add(op[1])
... 
>>> d
defaultdict(<type 'set'>, {'LOAD_FAST': set(['x']), 'LOAD_CONST': set([1])}) 
```

（或者您可以直接生成字典集数据结构。）

请注意，在您的应用程序中，您实际上可能不需要查找每个操作码的名称。相反，您可以在`opcode.opmap`字典中查找所需的操作码并创建命名常量，可能像这样：

```
LOAD_FAST = opmap['LOAD_FAST'] # actual value is 124
...
for var in disassembly[LOAD_FAST]:
    ... 
```

**更新**：在 Python 3.4 中，您可以使用新的[`dis.get_instructions`](http://docs.python.org/3.4/library/dis.html#dis.get_instructions)：

```
>>> def f(x):
...     return x + 1
>>> import dis
>>> list(dis.get_instructions(f))
[Instruction(opname='LOAD_FAST', opcode=124, arg=0, argval='x',
             argrepr='x', offset=0, starts_line=1, is_jump_target=False),
 Instruction(opname='LOAD_CONST', opcode=100, arg=1, argval=1,
             argrepr='1', offset=3, starts_line=None, is_jump_target=False),
 Instruction(opname='BINARY_ADD', opcode=23, arg=None, argval=None,
             argrepr='', offset=6, starts_line=None, is_jump_target=False),
 Instruction(opname='RETURN_VALUE', opcode=83, arg=None, argval=None,
             argrepr='', offset=7, starts_line=None, is_jump_target=False)] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T18:48:46.193

我认为这里的挑战是捕获 a 的输出`dis`而不是解析输出并创建字典。~~我不会介绍第二部分的原因是，没有提到字典的格式和字段（键、值），而且很琐碎。~~

正如我所提到的，捕获 OP 的挑战的原因`dis`是，它是打印而不是返回，但这可以通过上下文管理器捕获

```
def foo(co):
    import sys
    from contextlib import contextmanager
    from cStringIO import StringIO
    @contextmanager
    def captureStdOut(output):
        stdout = sys.stdout
        sys.stdout = output
        yield
        sys.stdout = stdout
    out = StringIO()
    with captureStdOut(out):
        dis.disassemble(co.func_code)
    return out.getvalue()

import dis
import re
dict(re.findall("^.*?([A-Z_]+)\s+(.*)$", line)[0] for line in foo(foo).splitlines() 
                                                  if line.strip())
{'LOAD_CONST': '0 (None)', 'WITH_CLEANUP': '', 'SETUP_WITH': '21 (to 107)', 'STORE_DEREF': '0 (sys)', 'POP_TOP': '', 'LOAD_FAST': '4 (out)', 'MAKE_CLOSURE': '0', 'STORE_FAST': '4 (out)', 'IMPORT_FROM': '4 (StringIO)', 'LOAD_GLOBAL': '5 (dis)', 'END_FINALLY': '', 'RETURN_VALUE': '', 'LOAD_CLOSURE': '0 (sys)', 'BUILD_TUPLE': '1', 'CALL_FUNCTION': '0', 'LOAD_ATTR': '8 (getvalue)', 'IMPORT_NAME': '3 (cStringIO)', 'POP_BLOCK': ''}
>>> 
```

# google-app-engine - 如何使用 appcfg.py 将重复的属性上传到 ndb 数据存储区

> ID：14324311
> 
> 赞同：3
> 
> 时间：2013-01-14T18:27:14.780
> 
> 标签：google-app-engine, app-engine-ndb, bulkloader

我一直在使用 appcfg.py 非常成功地上传数据，但我不确定如何`bulkloader.yaml`为重复属性设置导入转换或如何构建 CSV。例如：

在一个看起来像这样的帖子模型中：

```
class Post(models.Model):
  tags = ndb.StringProperty(repeated=True) 
```

`bulkloader.yaml`看起来像这样：

```
transformers:
- kind: Post
  connector: csv

  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
    - property: tags
      external_name: tags
      import_transform: ??? 
```

是`import_transform`正确的 API 来注册吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:39:11.307

我尝试了一种似乎可以使用 import_transform 的两步方法。首先创建一个模块（本质上是一个自定义转换文件），比如说 bulkmodify.py。然后在 bulkmodify 中定义一个将传入值转换为列表的转换

```
def list_convert(value):
    output=[value]
    return output 
```

然后在您的`bulkloader.yaml`文件中为您的重复属性指定导入转换：

```
import_transform: bulkmodify.list_convert 
```

另外不要忘记将您的模块包含在`bulkloader.yaml`文件顶部的导入列表中。

`- import: bulkmodify`

在我的输入 CSV 中，数据由多个引号构成，因此bulkloader 将它们作为具有多个列出值的单个属性引入

```
key,"""tag1"",""tag2"",""tag3""", property3, etc. 
```

# mysql - mysql UPDATE需要对其他表中的数据进行ORDERED BY

> ID：14324312
> 
> 赞同：1
> 
> 时间：2013-01-14T18:27:16.553
> 
> 标签：mysql, sql, sql-order-by, sql-update

这是一个有效的 SQL 语句（实际上是两个语句）——它获取一系列匹配的行并`delivery_number`为每一行添加一个增量：

```
SELECT @i:=0;
UPDATE pipeline_deliveries AS d
SET d.delivery_number = @i:=@i+1
WHERE d.pipelineID = 11
ORDER BY d.setup_time; 
```

但是现在，客户不再希望它们按`setup_time`. 他们需要根据出发时间排序，这是另一个表中的一个字段。我不知道该怎么做。

MySQL 文档以及[这个 answer](https://stackoverflow.com/a/9755637/901048)建议在 4.0 及更高版本（我们正在运行 MySQL 5.0）中我应该能够做到这一点：

```
SELECT @i:=0;
UPDATE pipeline_deliveries AS d RIGHT JOIN pipeline_routesXdeliveryID AS rXd
    ON d.pipeline_deliveryID = rXd.pipeline_deliveryID
LEFT JOIN pipeline_routes AS r
    ON rXd.pipeline_routeID = r.pipeline_routeID
SET d.delivery_number = @i:=@i+1
WHERE d.pipelineID = 11
ORDER BY r.departure_time,d.pipeline_deliveryID; 
```

但我得到了错误`#1221 - Incorrect usage of UPDATE and ORDER BY`。

那么正确的用法是什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:47:31.357

您不能混合`UPDATE`加入 2 个（或更多）表和`ORDER BY`.

您可以通过以下方式绕过限制：

```
UPDATE 
    pipeline_deliveries AS upd
  JOIN
    ( SELECT t.pipeline_deliveryID, 
             @i := @i+1 AS row_number 
      FROM 
          ( SELECT @i:=0 ) AS dummy
        CROSS JOIN 
          ( SELECT d.pipeline_deliveryID
            FROM 
                pipeline_deliveries AS d 
              JOIN 
                pipeline_routesXdeliveryID AS rXd
                  ON d.pipeline_deliveryID = rXd.pipeline_deliveryID
              LEFT JOIN 
                pipeline_routes AS r
                  ON rXd.pipeline_routeID = r.pipeline_routeID
            WHERE 
                d.pipelineID = 11
            ORDER BY 
                r.departure_time, d.pipeline_deliveryID
          ) AS t
    ) AS tmp
      ON tmp.pipeline_deliveryID = upd.pipeline_deliveryID
SET 
    upd.delivery_number = tmp.row_number ; 
```

* * *

上面使用了 MySQL 的两个特性，用户定义的变量和派生表内的排序。因为后者不是标准 SQL，它很可能会在 MySQL 的一个功能版本中中断（当优化器足够聪明地发现派生表中的排序是无用的，除非有`LIMIT`子句）。事实上，在最新版本的 MariaDB（5.3 和 5.5）中，查询将完全做到这一点。它会像`ORDER BY`不存在一样运行，结果不会是预期的。请参阅 MariaDB 站点上的相关问题：**[GROUP BY 技巧已被优化掉](https://kb.askmonty.org/en/group-by-trick-has-been-optimized-away/)**。

同样的情况很可能在未来的任何主流 MySQL 版本中发生（可能在 5.6 中，有人愿意测试这个吗？），这将改进优化器代码。

所以，最好用标准 SQL 来编写。最好的是尚未实现的窗口功能。但是您也可以使用自联接，这在效率方面不会很糟糕，只要您处理一小部分受更新影响的行。

```
UPDATE 
    pipeline_deliveries AS upd
  JOIN
    ( SELECT t1.pipeline_deliveryID
           , COUNT(*) AS row_number
      FROM
          ( SELECT d.pipeline_deliveryID
                 , r.departure_time
            FROM 
                pipeline_deliveries AS d 
              JOIN 
                pipeline_routesXdeliveryID AS rXd
                  ON d.pipeline_deliveryID = rXd.pipeline_deliveryID
              LEFT JOIN 
                pipeline_routes AS r
                  ON rXd.pipeline_routeID = r.pipeline_routeID
            WHERE 
                d.pipelineID = 11
          ) AS t1
        JOIN
          ( SELECT d.pipeline_deliveryID
                 , r.departure_time
            FROM 
                pipeline_deliveries AS d 
              JOIN 
                pipeline_routesXdeliveryID AS rXd
                  ON d.pipeline_deliveryID = rXd.pipeline_deliveryID
              LEFT JOIN 
                pipeline_routes AS r
                  ON rXd.pipeline_routeID = r.pipeline_routeID
            WHERE 
                d.pipelineID = 11
          ) AS t2
          ON t2.departure_time < t2.departure_time
          OR t2.departure_time = t2.departure_time 
             AND t2.pipeline_deliveryID <= t1.pipeline_deliveryID
          OR t1.departure_time IS NULL
             AND ( t2.departure_time IS NOT NULL
                OR t2.departure_time IS NULL
                   AND t2.pipeline_deliveryID <= t1.pipeline_deliveryID
                 )
      GROUP BY
          t1.pipeline_deliveryID  
    ) AS tmp
      ON tmp.pipeline_deliveryID = upd.pipeline_deliveryID
SET 
    upd.delivery_number = tmp.row_number ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:32:36.917

基于此[文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)

> 对于多表语法，UPDATE 更新 table_references 中命名的每个表中满足条件的行。在这种情况下，不能使用 ORDER BY 和 LIMIT。

在不太了解 MySQL 的情况下，您可以打开一个游标并逐行处理此问题，或者将其传递回您维护以处理此处理的客户端代码（PHP、Java 等）。

经过[更多挖掘](http://www.xaprb.com/blog/2006/08/10/how-to-use-order-by-and-limit-on-multi-table-updates-in-mysql/)：

> 要消除优化不佳的子查询，您需要将子查询重写为连接，但如何做到这一点并保留 LIMIT 和 ORDER BY？一种方法是在 FROM 子句中的子查询中查找要更新的行，因此 LIMIT 和 ORDER BY 可以嵌套在子查询中。通过这种方式，work_to_do 与自身的 10 个最高优先级无人认领的行相连接。通常，您不能在多表 UPDATE 中自加入更新目标，但由于它位于 FROM 子句的子查询中，因此在这种情况下它可以工作。

```
update work_to_do as target
   inner join (
      select w. client, work_unit
      from work_to_do as w
         inner join eligible_client as e on e.client = w.client
      where processor = 0
      order by priority desc
      limit 10
   ) as source on source.client = target.client
      and source.work_unit = target.work_unit
   set processor = @process_id; 
```

> 有一个缺点：行没有按主键顺序锁定。这可能有助于解释我们在这张桌子上偶尔遇到的死锁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-10T23:15:59.930

艰难的方式： -

```
    ALTER TABLE eav_attribute_option
        添加 temp_value TEXT NOT NULL
        排序顺序之后；
    更新 eav_attribute_option o
        加入 eav_attribute_option_value ov ON o.option_id=ov.option_id
        SET o.temp_value = ov.value
        WHERE o.attribute_id=90;
    设置@x = 0；
    更新 eav_attribute_option
        SET 排序顺序 = (@x:=@x+1)
        哪里属性_id = 90
        按温度值 ASC 排序；
    ALTER TABLE eav_attribute_option
        删除临时值；

```

# windows - 批处理文件从多个文件夹中的多个文件中删除某些字符串

> ID：14324313
> 
> 赞同：1
> 
> 时间：2013-01-14T18:27:30.870
> 
> 标签：html行添加到文件中。, windows, batch-file, dos, mhtml

我有一个包含许多子文件夹的文件夹，每个子文件夹都包含几十个`.mht`不同长度的文件。我需要帮助创建一个批处理脚本来过滤掉这个特定的字符串：

```
"</BODY></HTML>" 
```

在将其添加回末尾之前，我可以将[html行添加到文件中。](/questions/tagged/html "显示标记为“html”的问题")这是我到目前为止所拥有的：

```
setlocal enabledelayedexpansion

for /r %%a in (*.mht) do (
    for /f "skip=11" %%b in (%%a) do (if %%b=="</BODY></HTML>" del %%b)
    echo "stuff to add">>%%a
    echo "</BODY></HTML>">>%%a
) 
```

有什么方法可以修复我当前的脚本，或者你们中的任何人都知道更简单的方法吗？

**注意**：我尝试将除不需要的字符串之外的所有内容复制到临时文件，但前 11 行包含特殊字符，例如：`| , . :`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:31:01.850

## 更新

我添加了一个新脚本，它将用所需代码替换搜索词。该脚本可以处理特殊字符。

* * *

## 限制

1.  前导右括号**`]`**字符将从行首开始修剪。不是问题，因为 HTML 中不应有以该字符开头的行。**（如果需要，可以修复）**
2.  百分号**`%`**字符不能用于搜索词或替换词。

## 笔记

1.  行不能包含奇数个双引号**`"`**，所以我将双引号加倍**`""`**以确保偶数。这意味着如果您在任一字符串中有引号，它们也必须加倍！
2.  要使用该脚本，只需在以下代码行中将**搜索词**和**替换词替换**为您想要的内容。

    `set "_=%_:`**搜索词**`=`**替换词**`%"`

## 新脚本.bat

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion

:: Limitations
:: 1\. Any leading close bracket ] characters will be trimmed due to delims=].

for /r %%F in (html.txt) do if exist "%%~fF" (
    for /f "tokens=1,* delims=]" %%K in ('type "%%~fF" ^| find /n /v ""') do (
        set "_=%%L"
        call :Expand_
    )
)
goto End

:Expand_
:: NULL is a blank line or line with only a close bracket ].
if not defined _ echo. & goto :eof
:: Ensure even number of double quotation marks.
set "_=%_:"=""%"
:: Inject the code.
set "_=%_:</body>=<code>To Inject</code></body>%"
:: Escape batch special characters.
set "_=%_:^=^^%"
set "_=%_:<=^<%"
set "_=%_:>=^>%"
set "_=%_:&=^&%"
set "_=%_:|=^|%"
:: Revert quotations.
set "_=%_:""="%"
:: Display
echo(%_%
goto :eof

:End
endlocal
pause >nul 
```

* * *

## 原来的

这应该做你想要的。无需延迟扩展。应该支持所有特殊字符。

## 限制

1.  前导右括号**`]`**字符将被修剪。不是问题，因为 HTML 中不应有以右括号字符开头的行。 **（如果需要，可以修复。）**
2.  百分号**`%`**字符不能用于搜索词或替换词。

## 笔记

1.  行不能包含奇数个双引号**`"`**，所以我将双引号加倍**`""`**以确保偶数。这意味着如果字符串中有要匹配的引号，它们也必须加倍。**（不适用于您的场景）**
2.  不能在此行周围使用延迟扩展，`for /f %%S in ('echo "%xLine%"^| find /i "</body>"') do (`否则`!`感叹号会导致问题。

## 脚本.bat

```
@echo off
setlocal EnableExtensions

for /r %%F in (*.mht) do if exist "%%~fF" (
    rem Limitation - Any leading close bracket ] characters will be trimmed.
    for /f "tokens=1,* delims=]" %%K in ('type "%%~fF" ^| find /n /v ""') do (
        set "xLine="%%L""
        call :Match
        echo(%%L>>"%%~dpF\new_%%~nF%%~xF"
    )
    rem del "%%~fF"
    rem ren "%%~dpF\new_%%~nF%%~xF" "%%~nxF"
)
goto End

:Match
setlocal EnableExtensions DisableDelayedExpansion
rem Double the double quotations to ensure even number of double quotations.
set "xLine=%xLine:"=""%"
for /f %%S in ('echo "%xLine%"^| find /i "</body>"') do (
    rem Add your code to inject here.  Copy the template echo below.
    rem Note that special characters need to be escaped.
    echo Inject Code>>"%%~dpF\new_%%~nF%%~xF"
)
endlocal
goto :eof

:End
endlocal
pause >nul 
```

这会将新文件输出到`new_<filename>.mht` 如果您想用新文件替换旧文件，只需从and命令`rem`之前删除该命令。`del``ren`

# php - PHP 循环从记录号开始

> ID：14324315
> 
> 赞同：0
> 
> 时间：2013-01-14T18:27:38.940
> 
> 标签：php, html, mysql

我有 2 张桌子。一个向左飘，一个向右飘。每个表包含 8 行我想显示我的查询结果。我希望左侧的表格显示前 8 条记录，右侧的表格显示以下 8 条记录。现在我正试图弄清楚如何让右侧的表格显示记录号 8 - 16 .

这是我在左边桌子上的循环：

```
<?php do { ?>
      <tr>
        <td></td>
        <td><?php echo $row_rsSystems['systemName']; ?></td>
      </tr>
      <?php } while ($row_rsSystems = mysql_fetch_assoc($rsSystems)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:15:06.570

尝试这个：

```
 <table>

        <?php

        $i = 0;
        while ( $row = mysql_fetch_array($result) ){
            if ($i % 2 == 0){
                echo '<tr>';
            }
            echo '<td>'.$row['systemName'].'</td>';
            if ($i % 2 == 8){
                echo '</tr>';
            }
            $i++; 
        }

        //here is a check in case you don't have multiple of 3 rows
        if ($i % 8 != 0){
            echo '</tr>';
        }

        ?>

        </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:37:13.120

好吧，不确定你的表看起来如何，但你可以做两个查询并添加一个`LIMIT`。

第一：`LIMIT 0, 8`

第二个：`LIMIT 8, 8`

可能不是最好的方法，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:38:14.053

Do/While 处理 mysql 结果的方法可能不是必需的；改用以下内容：

```
$results = mysql_query($query, $connection);
while ($result = mysql_fetch_assoc($results)) { 
    echo $result['systemName'];
} 
```

至于跳到某个记录，您可以使用迭代器执行此操作：

```
$results = mysql_query($query, $connection);

$i = 0;
$skipahead = 8; //skip to the 8th record:

while ($result = mysql_fetch_assoc($results)) { 
    if($i<$skipahead) continue; //this performs the skip
    echo $result['systemName'];
    $i++; //increment
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:42:51.430

首先，您可能想使用`while(){}`而不是`do{...}while();`.
为了将数据分成两个表，我建议您使用两个临时数组来存储数据，然后使用它们来创建所需的表。像这样的东西：

```
$i = 0;
while($row_rsSystems = mysql_fetch_assoc($rsSystems)){
    if($i < 8){
       //stuff for the left table
       $right_table = array(...);
    }else{
       //stuff for the right table
       $left_table = array(...);
    }
    $i++;
} 
```

这样一来，您就可以一次性获得所有数据以达到最佳效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T18:42:14.940

以下应该有效：

```
<?php $i = 0; ?> 
```

对于每个表：

```
 <?php while ($row_rsSystems = mysql_fetch_assoc($rsSystems) && (++$i % 8)) {?>
      <tr>
        <td></td>
        <td><?php echo $row_rsSystems['systemName']; ?></td>
      </tr>
 <?php } ?> 
```

执行上述功能以避免 c&p。

`LIMIT`如果您只需要显示 16 个条目（使用关键字），并且如果您需要显示下一批（例如，16-32），则您的查询应该只获取 16 个条目，并且在您的查询中包含该参数（关键字`OFFSET`）。

[mysql SELECT 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)中提到的关键字。

# java - 如何迭代（并更改）作为另一个集合值的集合

> ID：14324324
> 
> 赞同：0
> 
> 时间：2013-01-14T18:28:30.783
> 
> 标签：java, collections, hashmap, hashset

我有一个将字节映射到字节集的映射。我想浏览地图并对场景进行更改。

```
private HashMap<Byte, HashSet<Byte>> table;
...
Iterator<Entry<Byte, HashSet<Byte>>> it = table.entrySet().iterator();
while( it.hasNext() ) {
   Map.Entry<Byte, HashSet<Byte>> pairs = it.next();
   byte node = pairs.getKey();
   HashSet<Byte> hSet = pairs.getValue();
   Iterator<Byte> setIter = hSet.iterator();
   while( setIter.hasNext() ) {
      byte sNode = setIter.next();  // Throws a ConcurrentModificationException
      ...
   }
 } 
```

当我尝试遍历子迭代器时，此代码会引发 ConcurrentModificationException。我应该怎么做才能在我的地图中迭代和更改这个集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:38:13.677

尝试这样的事情：

```
for(Byte node : table.keySet()) {
   HashSet<Byte> hSet = table.get(node);
   Iterator<Byte> setIter = hSet.iterator();
   while( setIter.hasNext() ) {
      byte sNode = setIter.next(); 
      ...
   }
 } 
```

如果你想修改`hSet`你最好的方法可能是循环一个副本`Set`：

```
for(Byte node : table.keySet()) {
    HashSet<Byte> hSet = table.get(node);

    for (Byte sNode : new HashSet<Byte>(hSet)) {
        //do things which modifies the original hSet
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:53:21.020

我认为您得到了例外，因为您在迭代期间修改了集合（在未包含在问题中的行中）。如果“快速失败”迭代器检测到集合的结构已更改，则它们会抛出它。

> 请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

[http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)

如果您只是在迭代时从集合中删除，则可以**使用迭代器的 remove 方法**而不是 Set 方法。如果您还想在迭代时添加到集合中，则需要创建集合的副本并对其进行迭代（但这种情况不太可能，您可以在不迭代的情况下添加到集合中......）

# javascript - 是否只有在特定域请求时才可以加载一些 CSS/JS/图像

> ID：14324327
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:28:46.103
> 
> 标签：javascript, css

我正在为问题跟踪器创建自定义模板。

现在，我想要做的是，使我的模板的 CSS/JS 仅对某些域可用--> 即，如果我的域上的网页尝试加载该 CSS/JS，那么它可以工作 - 但是如果任何其他域上的网页尝试加载该 CSS/JS 则它不应该工作。

是否可以做到以上几点？我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:31:38.120

根据您的服务器技术，您应该能够根据 IP 地址限制文件。因此，只需让您的文件只能从您想要的服务器（即您的域）访问。您有权访问服务器吗？或者您可以使用 htaccess （或类似的）来做同样的事情。

[.htaccess：如何通过 IP 限制对单个文件的访问？](https://stackoverflow.com/questions/3604526/htaccess-how-to-restrict-access-to-a-single-file-by-ip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:38:02.250

是的，这是可能的。浏览器通常会发送一个 HTTP Referrer Header，其中包含对样式表、javascript 文件等的请求。这表明包含该文件的 URL。[您可以通过使用 htaccess 文件、查看此链接](http://www.javascriptkit.com/howto/htaccess14.shtml)或使用诸如 PHP 之类的服务器端语言来提供文件来限制基于此标头的访问。

**注意：** HTTP 标头*很*容易被伪造，因此这不是实现此目的的安全方法。如果您进一步指定您的问题，我们可以查看您的特定用例。

# c++ - C++ ofstream 巨大的文本文件

> ID：14324328
> 
> 赞同：0
> 
> 时间：2013-01-14T18:28:48.670
> 
> 标签：c++, arrays, stream, fstream, ofstream

所以，这是我的一个简单部分的代码：

```
void ArrayToTextFile::textfiller(string *givenpointer){
    cout<< "Recieved array pointer address" << givenpointer << endl;
    const char * constantcharversion = path.c_str();
    ofstream filler(constantcharversion);

    int i = 0;
    //string delims = (string)delim;
    for(i = 0; i < sizeof(*givenpointer); i++) {
        filler << *givenpointer << delim;
        givenpointer = givenpointer + 1;
    }
    filler.close();
} 
```

指针指向字符串数组中的第一个元素。

`delim`是一个';'

这是我的主要课程：

```
#include <iostream>
#include "ArrayToTextFile.h"
#include <stdio.h>
#include <stdlib.h>

using namespace std;

int main()
{
    system("color 1A");

    cout << "Hello world!" << endl;
    string kinch[3] = {"a", "second el", "third"};
    ArrayToTextFile newone("C:/haha.txt", ';');
    string *pointy = &kinch[0];

    newone.textfiller(pointy);
    return 0;
} 
```

每当程序运行时，我永远无法进入 return 语句。事实上，我必须单击控制台窗口上的退出按钮。当我查看创建的文本文件时，它很大：

![看这里](../Images/fa7694f44a2a6673244a9c63293989bf.png)

我的问题是什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:14:58.247

您需要传入数组中的元素数量。`sizeof`只会给你一个以字节为单位的大小，这很少有用。为了获取数组的大小，您可以使用`(sizeof array)/(sizeof array[0])`，但在函数内部您只有一个指针，而不是数组，这会给您带来不同的结果。

# grid - 基于性能的云计算和网格计算比较

> ID：14324329
> 
> 赞同：1
> 
> 时间：2013-01-14T18:28:53.067
> 
> 标签：grid, cloud, grid-computing

云计算和网格计算在性能的基础上有何不同。比如说..我有一个本地网格和一个云服务..如果性能是我唯一的标准，那一个会更好！我在云计算和网格计算方面经历了许多差异，但在性能问题上没有发现任何重大问题。

PS :- 我对云计算有点陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:16:28.333

没法说。没有赢家。您的“性能”取决于物理机器的速度（CPU/RAM/IO）、您的工作负载和分布式系统的低效率。哪种类型的分布式系统最适合您取决于您​​的工作量。

对不起，但如果你提出一个更好的问题，你可能会得到更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T15:48:00.510

我不认为那是......要问的正确问题。例如，Google Compute Engine 根据您选择的硬件收费。

一般来说，您的代码在云（不等于“网格”）中的运行速度与在本地 LAN 中一样快。您需要弄清楚瓶颈在哪里（如果存在）。所有“网格”实现都将计算外包给“节点”。但是数据库层的瓶颈。

Hadoop 是通过“HDFS”（Hadoop 分布式文件系统）解决这个问题的。

例如，明显的替代方案是数据库集群。

无论如何，一般来说，您的代码在云中运行速度较慢是没有原因的（但是请不要告诉我数据库和网格之间的链接很慢！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T16:22:36.773

那么，对于云，您需要询问需要通过托管计算的机器和数据源之间的链接传输多少数据？以及多快。你提到你没有发现显着差异？您可能连接了非常少量的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T08:30:04.537

一般来说，云计算会给你带来更慢的机器，你的所有数据都必须通过互联网传输。但是，您可以按小时购买机器，因此对于计算能力的爆发，您可能买得起很多机器。

如果您设置自己的本地网格，您将能够决定您获得的机器规格，并按照您的喜好设置它们。但是，如果您不一直使用它们，那么购买大量它们会很昂贵。

如果您想进行成本分析，您可以在此处查看我们的成本计算器 ( [https://secure.slicify.com/Calculator.aspx](https://secure.slicify.com/Calculator.aspx) )，以大致了解从各种供应商（完全披露——这是我网站上的一个页面）。

# java - ExecutorService.submit，等待已经调度的类似实例

> ID：14324331
> 
> 赞同：0
> 
> 时间：2013-01-14T18:29:00.030
> 
> 标签：java, concurrency

我有一个`ExecutorService`（或 atm 的子类`ThreadPoolExecutorService`），我将任务传递给`submit(Runnable r)`.

有时，相同的任务会在它仍在运行时（重新）提交，然后我希望第二个提交等待第一个完成。即排队。如何做到这一点是一种更可取的方式？只有当提交的任务已经在运行时才应该排队，否则应该直接执行。

返回`Future<>`的 s 有时会用于取消任务。

像这样的东西；

```
 Runnable r = new LengthyRunnable();

    Future<?> f1 = submit(r); //should start to run
    Future<?> f2 = submit(r); //should be queued and wait for f1
    Future<?> f3 = submit(r); //in case f1 hasnt finished, and f2 is queued, should remove f2 from the queue and take it's place 
```

我已经将 ThreadPoolExecutorService 子类化，并且我使用 beforeExecute 和 afterExecute 来跟踪任务，但这变得越来越困难......我应该使用除 a 之外的其他东西`ThreadPoolExecutorService`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:50:22.143

我会做`LengthyRunnable`一个重复的任务（有一个合适的池间隔）来检查它是否需要再次运行。这样你就可以确定它不会运行多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:41:04.763

当 f3 已入队且 f2 尚未启动时，您希望删除已入队的 f2 任务。但是 ExecutorService 不会公开对队列的访问，因为底层实现可能甚至不是异步的。ThreadPoolExecutor 有一个底层队列，但实际上并没有公开它:)

如果您不想像某人建议的那样简单地进行可调度/循环任务，那么您可以考虑以下内容。

创建一个 WorkPerformer Runnable。将某种BlockingQueue 传递给它，即LinkedBlockingQueue。该队列将用于将您需要执行的某种 LongyTask 排入队列。

在调用代码中，您将创建一个可以窥视队列的同步块 - 如果 f2 在那里并且 f1 仍在运行（WorkPerformer 将具有某种同步标志），您将使 f2 出队并将 f3 入队。

如果不知道您背后的意图是什么，就很难提出更多/更好的建议。

# extjs4 - EXTJS 4 控制视图问题

> ID：14324335
> 
> 赞同：0
> 
> 时间：2013-01-14T18:29:16.190
> 
> 标签：extjs4, extjs4.1

我试图弄清楚如何执行以下操作，但我有点困惑。我有一个我称之为模块的视图：

```
Ext.define('MyApp.view.module.Module', {

  mixins : {
    observable :  'Ext.Util.Observable'
  },

  constructor : function(){
     this.addEvent('clickmodule');
     this.mixins.observable.constructor.call(this, config);
     this.init();
  }
   init : Ext.emptyFn
 }); 
```

此类扩展：

```
 Ext.define('MyApp.view.module.MyModule', {
 extends : 'MyApp.view.module.Module',
 alias : 'widget.mymodule',

  init : function() {
       this.on('clickmodule', function(){
         alert('this is always fired so the event works');
       }, this)
       this.init();
  },

  runModule : function(){
     this.fireEvent('clickmodule');
  }
  }); 
```

所以我有一个基本模块，然后是我的真实模块，当调用 runModule() 时，它只会触发我在名为 clickmodule 的基类中创建的事件。这可以工作并触发，但我是 init() 方法中的一个侦听器，它侦听要触发的事件并且它可以工作，所以我知道它被触发了。问题是如何让 Controlerl 监听事件并执行一些操作？我似乎找不到如何做到这一点的例子？因此，例如，我的控制器中有这个，但认为它不正确，我不知道该怎么做：

```
Ext.define('MyApp.controller.Desktop', {
 extends : 'Ext.app.Controller',
 refs : [
     ref : 'module',
     selector : 'mymodule'
  ],
 views : ['module.MyModule'],
 init : function(){
   this.control({
      'mymodule' : {
         clickmodule : this.onModuleClick
       }
   });
 },

 onModuleClick : function(){
     alert('this never gets called');
 } 
```

});

所以我知道事件被触发了，因为我在课堂上放了一个监听器并且它被调用了。但是我没有在控制器中做正确的事情，因为它在触发时似乎没有得到事件。我想我在设置 this.control 时遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:54:09.013

原来我的 MyApp.view.module.Module 需要扩展 Ext.Component。这是我可以让事件在控制器中触发的唯一方法。

# java - 缓存管理，如何自动删除元素？

> ID：14324336
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:29:19.133
> 
> 标签：java, android, caching

我正在用java实现缓存，但我还有最后一个问题要解决：如何处理元素的删除？

元素存储在磁盘上，每个元素都有有效期（然后是到期日期）和大小，我的缓存显然有最大大小和可以存储的最大元素数量。

我想象了三种执行元素删除的方法：

1.  将新元素插入缓存时**，调度线程**（每个元素一个）配置为在到期时间启动（以删除元素本身）
2.  **每 X 分钟**执行一个线程，以检查哪些元素可以被删除（并删除它们）
3.  **当达到限制（大小或数量）时**，最旧的元素被删除（或随机删除元素（更快））

关于第三点，使用此策略缓存将继续存储过期元素。显然，当需要其中之一时，将执行控制以检查元素是否仍然有效。

你有什么想法？管理缓存时的常见行为是什么？还有其他解决方案吗？

PS我正在为Android开发这个缓存，但我认为这不是那么重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:47:32.807

基本上，您必须知道缓存元素的使用频率以及使用顺序。缓存必须与操作系统一样，才能将最佳数据保存在内存中。

看看这些策略并采取你需要的策略：[http ://en.wikipedia.org/wiki/Page_replacement_algorithm](http://en.wikipedia.org/wiki/Page_replacement_algorithm)

一个好的提示是 LRU（最近最少使用）。但就像所有这些策略一样，它也有一些缺陷。这可能不适合您的使用情况。

LRU 的实现技巧：

除了地图之外，使用 PriorityQueue 来存储元素。使用全局计数器对其进行更新，每次使用其中一个元素时该计数器都会递增，并使用全局计数器的当前值重新插入 PriorityQueue 中的相应元素。

如果您需要从队列中删除一个项目，您只需从队列中删除第一个或最后一个元素（取决于您对 compareTo(...) 方法的实现）。并将其从地图中删除。

# java - JAX-WS 使用受保护或私有构造函数生成 WS 客户端

> ID：14324338
> 
> 赞同：0
> 
> 时间：2013-01-14T18:29:30.913
> 
> 标签：java, web-services, jax-ws, wsimport

我正在使用 JAX-WS 为一些 web 服务生成我的 jar 客户端。

任何人都知道是否可以使用带有受保护或私有构造函数的 jax-ws 生成 Web 服务客户端？

我正在使用带有 cxf-codegen-plugin 的 maven 来生成类 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:34:28.667

一种选择是......不要编译它:)。使用某些选项组合让 wsimport 生成源文件而不进行编译`-s <dir> -keep -Xnocompile`。然后，您可以在编译之前删除生成的服务类。如果您需要利用服务类中的嵌入信息，可以使用注释处理从注释中提取服务名称、名称空间和 WSDL 位置`WebServiceClient`。您还需要使用其中一种`Service.create()`方法替换服务类构造函数的任何使用。

编辑：我的错-我完全错过了您正在使用 CXF 工具（wsdl2java？）。我以前没有使用过它们，但如果它们不提供类似的功能，我会感到惊讶，所以一般方法应该仍然有效......

# scala - 向编译器请求有关@inline 的更多信息？

> ID：14324339
> 
> 赞同：10
> 
> 时间：2013-01-14T18:29:42.757
> 
> 标签：scala, compiler-construction, annotations, inline, scala-2.10

状态的文档[`@inline`](http://www.scala-lang.org/api/current/index.html#scala.inline)：

> 方法上的注释，要求编译器应该特别努力地内联带注释的方法。

但是，与类似的[`@tailrec`](http://www.scala-lang.org/api/current/index.html#scala.annotation.tailrec)注释不同，编译器（默认情况下）不提供任何关于它是否设法内联方法的信息。

**有什么方法可以确定编译器是否设法内联带注释的方法？**

具体来说，我希望编译器告诉我，例如，在所有合理的情况下，它都能够内联我标记的方法。（我能想到的一些情况会警告我，如果它不是，它不能内联一个方法`final`，因此如果类是子类，则需要一个 vtable 查找）

相关问题：

*   [我什么时候应该（也不应该）使用 Scala 的 @inline 注释？](https://stackoverflow.com/questions/4593710/when-should-i-and-should-i-not-use-scalas-inline-annotation/4594718#4594718)
*   [Scala 中的@inline 注释真的有助于提高性能吗？](https://stackoverflow.com/questions/2709095/does-the-inline-annotation-in-scala-really-help-performance)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T01:18:11.173

首先，您需要记住，Scalac 只会在您编译时尝试内联`-optimise`（或者`-Yinline`我认为）。

考虑以下简单情况：

```
class Meep {
  @inline def f(x: Int) = x + 19
}

object Main extends App {
  new Meep().f(23)
} 
```

如果我用 编译它`-optimise`，Scalac 会给我一个警告`there were 1 inliner warnings; re-run with -Yinline-warnings for details`：现在，除了语法傻笑，这并没有给我太多。

所以让我们重新编译`-Yinline-warnings`. 现在我得到：`At the end of the day, could not inline @inline-marked method f`。嗯，好的，这也不是很有帮助，但我想这就是我使用私有编译器标志所得到的。:) 顺便说一下，一些内联警告更有帮助 - 比如：（`Could not inline required method f because bytecode unavailable.`发生在 REPL 中）

编译器帮助解释`-Yinline-warnings`为`Emit inlining warnings. (Normally surpressed due to high volume)`，所以我想它必须根据具体情况使用。

无论如何，如果我们`f`将上述代码段中的定义更改为`@inline final def f(x: Int) = x + 19`，则内联警告将消失，并且该方法将被正确内联。

希望能有所帮助。

# flash-cs5.5 - 我的 .fla 文件被破坏了吗？

> ID：14324340
> 
> 赞同：0
> 
> 时间：2013-01-14T18:29:43.393
> 
> 标签：flash-cs5.5

我正在使用闪存 cs5.5

在保存 fla 文件时，我的电脑死机了，我不得不关闭程序。现在我试图回到文件中，它不会打开......

我所做的一切都永远失去了吗？？

而且我无法取出任何电影剪辑...

我想我会被解雇。如果我无法以某种方式恢复文件，这将非常糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:31:28.750

试一试：

[如何恢复损坏的 Flash CS5.5/CS6 FLA 文件](http://www.daffodilistic.com/2011/08/24/how-to-recover-a-corrupted-flash-cs5-5-fla-file/)

# asp.net - 带有 VS2010 SP1 的 IIS Express 不断重建网站

> ID：14324342
> 
> 赞同：6
> 
> 时间：2013-01-14T18:29:48.683
> 
> 标签：asp.net, iis-express, visual-studio-2010

我正在使用具有多个网站项目的大型解决方案，最近决定从 Cassini 切换到 IIS Express。大约有 10 名左右的开发人员共享相同的解决方案/项目，因此共享 web.configs，除了我之外，他们都在使用 IIS Express 愉快地工作。问题是，对于我无法弄清楚的任何模式，IIS Express 会不断地自我重置并执行新的构建，从而重置会话。

以下是它会自我重建的一些原因：

1.  编辑 ASPX 文件
2.  几分钟什么都不做
3.  编辑文件后面的代码
4.  正常使用网站

注意：上述操作并不总是会导致重建。使用卡西尼，这些动作中的许多都非常好。

与其他没有问题的开发人员相比，我的系统非常标准。

以下是更多信息：

*   我正在使用 VS2010 SP1 和 Windows 7 Professional。
*   我开始使用 IIS Express 7.0，但后来尝试升级到 8，结果相同。
*   我已经卸载/重新安装了 IIS Express 几次，没有任何运气。
*   使用 ReSharper 7.x
*   我已关闭编辑并继续

我现在处于完全调试模式，这种不断的重建/重置变得令人望而却步。

编辑：它实际上是根据 John Saunders 的建议使用健康监测进行验证的重建。

编辑：我没有提到的一件重要的事情是这主要发生在调试会话期间。不仅在调试会话期间，而且在通常情况下。事实上，增加一个断点，甚至达到一个断点都可能导致重建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T14:16:19.630

我会将 Resharper 视为问题的原因。尝试完全禁用或卸载 Resharper，看看问题是否仍然存在。

我对 dev express 自己的 coderush 感到更加满意......我不为他们工作，只是尝试了两者，Resharper 真的让我的系统陷入困境，我不喜欢它......

# r - 如何将“Mmmm yyyy”字符串转换为日期

> ID：14324344
> 
> 赞同：1
> 
> 时间：2013-01-14T18:29:51.840
> 
> 标签：r, date

我将日期作为字符格式，`January 2008` 我试图将它们转换为 Date 对象，使用`as.Date`. 当我尝试这个时：

```
as.Date("January 2008", "%B %Y") 
```

我回来了`NA`。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:43:42.027

就这样，官方给出了答案……

Month-Year 没有指定日期，因为您错过了一天。几个包将处理月-年“日期”。我知道的是**zoo**和**chron**。我怀疑**lubridate**也会处理这些问题，但正如 Hadley 在下面的评论中指出的那样，我错了。

Matthew 提到，一种可能的技巧是人为地为每个使用`paste`.

# silverlight - 显示用纯色覆盖的图片

> ID：14324355
> 
> 赞同：0
> 
> 时间：2013-01-14T18:30:14.770
> 
> 标签：silverlight, canvas, drawing

我正在尝试构建一个应用程序，该应用程序显示最初用纯色（黑色）覆盖的图片。这个想法是，当我单击那个黑色屏幕上的某个地方（最初）时，我单击黑色像素周围的圆形区域使其透明，这样我就可以看到后面的图像。

我想出的解决方案是使用带有我想要覆盖的图片作为背景的画布。黑色封面将以像素为单位（可能存储在矩阵中 - 图像最大为 500x500）。所有这些像素最初都将被涂成黑色，然后，知道用户单击的像素使该像素周围的所有像素透明（或删除），直到我清除具有预设直径的圆形区域。

我对画布没有太多经验，这个解决方案对我来说似乎很粗糙。我想问第二个意见，或者是否有人可以给我一个更好的解决方案

如果相关的话，我正在 Silverlight 中开发应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:41:11.460

一段时间后，我阅读了有关 Silverlight 控件的信息，最终使用了 Image.Clip。这是一个例子，以防像我这样的人需要它：

```
 <Image Source="Images/img.jpg" Width="150" Height="150" Canvas.Left="30" Canvas.Top="19">                                                
            <Image.Clip>
                <GeometryGroup FillRule="Nonzero">
                    <EllipseGeometry RadiusX="20" RadiusY="20" Center="100,100"></EllipseGeometry>
                    <EllipseGeometry RadiusX="20" RadiusY="20" Center="80,100"></EllipseGeometry>
                    <EllipseGeometry RadiusX="20" RadiusY="20" Center="80,83"></EllipseGeometry>                        
                    <EllipseGeometry RadiusX="20" RadiusY="20" Center="60,60"></EllipseGeometry>
                </GeometryGroup>
            </Image.Clip>
        </Image> 
```

当然，可以以编程方式放置省略号。

# tcl - 从 Tcl C 过程中获取输出

> ID：14324357
> 
> 赞同：2
> 
> 时间：2013-01-14T18:30:28.173
> 
> 标签：tcl

我有一个 C shell，它通常使用[`Tcl_Eval`](http://tmml.sourceforge.net/doc/tcl/CEval.html). 通常我只需执行用户输入的内容并获得一些状态就可以了。但是，现在我需要从用户键入的命令接收实际的 stdio 输出。有没有办法使用[Tcl C 程序](http://tmml.sourceforge.net/doc/tcl/index.html)来获得它？

作为旁注：我需要找出 Tcl 解释器中可用的当前过程列表，包括内置的和用户来源的。基本上，来自`info procs *`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:43:00.787

我想你可以这样：

1.  通过调用创建管道[`pipe(2)`](http://linux.die.net/man/2/pipe)。
2.  然后在你的插播中：

    1.  `stdout`通过调用它来关闭[`Tcl_Close()`](http://www.tcl.tk/man/tcl8.5/TclLib/OpenFileChnl.htm#M14)。
    2.  通过在关闭后立即`stdout`调用将管道的写端文件描述符转换为 Tcl 的通道。[`Tcl_MakeChannel()`](http://www.tcl.tk/man/tcl8.5/TclLib/OpenFileChnl.htm#M8)`stdout`

    或者只需将 替换为`stdout`对 的调用即可[`Tcl_SetStdChannel()`](http://www.tcl.tk/man/tcl8.5/TclLib/GetStdChan.htm)。

3.  处理来自管道的数据。

至于你的旁注——我认为你可以调用`Tcl_Eval()`你的解释器并使用来自 Tcl API 的列表处理函数来处理返回的列表。

*更新*（来自我的一条评论）：经过深思熟虑后，我认为可能只创建一个自定义 Tcl 通道，该实现将保存写入它的数据，然后将此类通道的实例注册为标准输出。见`Tcl_CreateChannel()`和`Tcl_RegisterChannel()`。

# devexpress - DevExpress XtraGrid ExportToXls 不适用于所有桌面：它的先决条件是什么？

> ID：14324359
> 
> 赞同：1
> 
> 时间：2013-01-14T18:30:35.867
> 
> 标签：devexpress, export-to-excel, xtragrid

XtraGrid 的 ExportToXls 方法的先决条件是什么？要做到这一点，除了 XtraGrid DLL 之外，是否还必须包含一些 DLL？导出是否在幕后使用 Office 互操作？我试图找出一个问题的根源，它在某些机器上工作而在其他机器上失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:32:27.997

> **XtraGrid 的 ExportToXls 方法的先决条件是什么？
> 要做到这一点，除了 XtraGrid DLL 之外，是否还必须包含一些 DLL？**

***答：***

***来源***：[导出方法和设置](http://documentation.devexpress.com/#WindowsForms/CustomDocument2536)以及[GridControl.ExportToXls(String,XlsExportOptions) 方法](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridGridControl_ExportToXlstopic837)

*XtraGrid 控件提供了一组允许您以[各种格式导出数据](http://documentation.devexpress.com/#WindowsForms/CustomDocument2536)的方法。这些方法使用 XtraPrinting 库中实现的例程导出数据。*

*[GridControl.ExportToXls(String)](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridGridControl_ExportToXlstopic833) Method 方法间接调用XtraPrinting 库的DevExpress.XtraPrinting.PrintingSystemBase.ExportToXls 方法。如果此库不可用，则该方法不执行任何操作。有关 ExportToXls 方法的详细信息，请参阅 DevExpress.XtraPrinting.PrintingSystemBase.ExportToXls 主题*

![XtraPrinting 库参考](../Images/991243d47e3e59ecd3259f1902ac9b5e.png)

> **导出是否在幕后使用 Office 互操作？**

关于这一点，您需要[询问 DevExpress](http://www.devexpress.com/Support/Center/Question/Create)人员以进行澄清。据我了解，它不需要任何 Microsoft Office 互操作 dll 引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:21:12.683

[GridControl.ExportToXls](http://help.devexpress.com/#WindowsForms/DevExpressXtraGridGridControl_ExportToXlstopic)方法间接调用DevExpress 打印库 (DevExpress.Printing.v12.2.Core.dll)的[PrintingSystemBase.ExportToXls方法。](http://help.devexpress.com/#CoreLibraries/DevExpressXtraPrintingPrintingSystemBase_ExportToXlstopic750)如果此库不可用，则该方法不执行任何操作。因此，您应该只在项目中引用 DevExpress.Printing.v12.2.Core.dll 库。不需要任何 Office 参考资料。

有关在 GridControl 中导出数据的一般信息，请参阅[导出概述](http://help.devexpress.com/#WindowsForms/CustomDocument995)。

要获得有关您的特定问题的有**保证的帮助**，请直接与[DevExpress 支持](http://www.devexpress.com/Support/Center)联系。

# android - 为什么需要定期重启 Eclipse 以防止性能下降？

> ID：14324361
> 
> 赞同：0
> 
> 时间：2013-01-14T18:30:39.760
> 
> 标签：android, eclipse, development-environment

Eclipse 在四核 12GB Windows 8 计算机上启动速度很慢。即使对于诸如打开文件之类的简单活动，它也会随着时间的推移减慢到爬行速度。重新启动 Eclipse 将恢复其初始性能。

有没有办法在不重新启动的情况下防止其性能随着时间的推移而恶化？

我使用 Eclipse 进行 Android 应用程序开发

补充：以下是eclipse.ini的内容：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx1024m 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:43:04.133

我想知道您的 Eclipse 内存设置是否设置得太低。即使您的机器有大量内存，如果您的设置使用默认值，您的 Eclipse 实例也可能没有利用所有可用资源。

这是一个很好的 SO 问题： [Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)

我不必经常关闭 Eclipse，所以我认为这不是正常行为——尤其是在拥有尽可能多资源的机器上。

# jquery - 使用 Jquery 将外部页面加载到 div 中会去除 .html 并引发错误页面

> ID：14324366
> 
> 赞同：0
> 
> 时间：2013-01-14T18:30:48.840
> 
> 标签：jquery, html

过去几天我一直在寻找解决方案，由于找不到解决方案，我想我会继续看看这里是否有人可以提供帮助。当单击各种导航链接（即关于，联系方式等）时，我试图让来自外部 html 页面（相同域 - 只是单独的页面，即）等）的内容`about.html`显示`contact.html`在`index.html`div 内的主页上`#topContent`）。我希望通过将网站的“主要内容”存储在外部页面上，我可以避免导航选择之间的刷新。

到目前为止，我能够加载默认页面（外部`main.html`文档），但由于某种原因，当我单击导航链接时，我被重定向到另一个页面，这会产生错误，因为“.html”已从路径（期待看到：site.com/about.html——实际显示：site.com/about）

我当前的更改在这里：[http](http://staging-site.site44.com/) : //staging-site.site44.com/ 我将创建一个 jsFiddle 文件，但此设置涉及加载多个 html 文件，所以我认为我不能用 jsFiddle 做到这一点。

任何帮助将非常感激！

谢谢！

HTML

```
 <nav id="headerNav">

            <ul class="navList">
                <li class="navItem"><a href="products" id="home" class="nav">Products</a></li>
                <li class="navItem"><a href="about" id="about" class="nav">About</a></li>
                <li class="navItem"><a href="portfolio" id="portfolio" class="nav">Portfolio</a></li>
                <li class="navItem"><a href="contact" id="contact" class="nav">Contact</a></li>
            </ul> 

        </nav>

    </div>

</div>

<!-- topMain -->
<div id="topContentWrapper">

     <div id="topContent">

    </div>

</div> 
```

JS

```
$(document).ready(function() {
// Load default page content of main.html
$("#topContent").load("main.html");

$("#home").click(function() {
//load home.html on click
    $("topContent").load("home.html");
});

$("#products").click(function() {
//load home.html on click
    $("topContent").load("products.html");
});

$("#about").click(function() {
//load home.html on click
    $("topContent").load('about.html #topContent');
});

$("#portfolio").click(function() {
//load home.html on click
    $("topContent").load("portfolio.html");
});
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:38:11.670

您的 Javascript 错误：

```
$(document).ready(function() {
// Load default page content of main.html
$("#topContent").load("main.html");

$("#home").click(function(e) {
//load home.html on click
    e.preventDefault();
    $("#topContent").load("home.html");
});

$("#products").click(function(e) {
//load home.html on click
    e.preventDefault();
    $("#topContent").load("products.html");
});

$("#about").click(function(e) {
//load home.html on click
    e.preventDefault();
    $("#topContent").load('about.html');
});

$("#portfolio").click(function(e) {
//load home.html on click
    e.preventDefault();
    $("#topContent").load("portfolio.html");
});
 }); 
```

您在 jQuery 中缺少“#”选择器。因此，您的点击无法将任何内容加载到 topContent 元素中。您还需要添加 e.preventDefault() 以防止链接在单击时尝试跟随 href。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:35:35.977

您的问题来自未正确设置的 href，缺少 '.html' 和 $('topContent') 选择器，缺少 '#'。顺便说一句，您必须在单击时阻止“A”标签的默认行为。

请参阅以下代码，使用重构：{更好的做法}

```
$(document).ready(function() {
   // Load default page content of main.html
   $("#topContent").load("main.html");

   $(".nav").click(function(e) {
       e.preventDefault();
       $("#topContent").load($(this).attr('href')+".html");
   });

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:39:14.900

这就是我要做的，首先在锚点中包含 .html 。

```
<ul class="navList" id="main-menu">
    <li><a href="products.html">Products</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="portfolio.html">Portfolio</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul> 
```

然后为所有这些使用一个 jQuery 函数：

```
$('#main-menu a').click(function(event){
    event.preventDefault(); // stops the page redirect

    var htmlFile = $(this).attr('href');    // gets href value from the anchor
    $.get(htmlFile, function(data) {        // you could use get/ajax/load
        $('#topContent').html(data);
    });
}); 
```

这不是我的想法，所以可能会有轻微的错误。

**附加说明：**您不需要那么多课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:40:03.413

下面的脚本在 chrome 控制台上工作

```
$('#topContent').load('about.html', function() {

}); 
```

问题出在`href="pagename"`，放入`href="#"`然后使用下面的函数

```
$("#about").click(function() {

$('#topContent').load('about.html', function() {

});
}); 
```

# ios - 如何改变 UITextField 的形状？

> ID：14324368
> 
> 赞同：1
> 
> 时间：2013-01-14T18:30:58.500
> 
> 标签：ios, objective-c, user-interface, uitextfield

我想实现自定义文本字段。这是我要实现的屏幕截图：

![在此处输入图像描述](../Images/1fee5cce0f60c0cbe3196abb9a316c8f.png)

所以我有一个`UITableView`with 单元格，在每个单元格中我有几个文本字段：一个 for `date`，一个 for `name`，一个 for `theme`，一个 for `text`。但是 UI 需要`theme`并且`text`彼此相邻（如图所示）。我想将其实现为单个`UITextField`，但据我所知，`UITextField`仅支持一种字体。所以也许有人会给我一条建议，如何实现屏幕截图中显示的设计——我必须绘制自定义文本字段，还是有更简单的解决方案？任何代码示例或提议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:47:15.647

**对于 iOS 6**：

您可以设置 a`UITextField`的属性字符串：

```
@property(nonatomic,copy) NSAttributedString *attributedText; 
```

我建议使用 NSMutableAttributedString 并利用多态性。

可变属性字符串可以为字符串的每个部分保存不同的属性。因此，您可以使用此方法仅为特定范围的字符串添加属性：

```
- (void)setAttributes:(NSDictionary *)attributes range:(NSRange)aRange; 
```

**对于 iOS 5**：

直接使用 this`UITextField`的属性：

```
- (void)setAttributes:(NSDictionary *)attributes range:(NSRange)aRange; 
```

# gcc - GDC 4.8 快照使用错误

> ID：14324372
> 
> 赞同：0
> 
> 时间：2013-01-14T18:31:06.833
> 
> 标签：gcc, build, d, gdc

尝试使用我自己的 GDC-4.8-20120105 构建在 D 中构建 Hello World

```
import std.stdio;
void main(string args[])
{
  auto x = 0b10;
  writeln(x);
} 
```

我收到以下错误：

```
per@lappis:~/alt$ gdc-4.8  ~/f.d /home/per/alt/x86_64-unknown-linux-gnu/lib64/libgphobos2.a 
/usr/lib/x86_64-linux-gnu/crt1.o(.text+0x20): error: undefined reference to 'main'
/tmp/cc8j7g1e.o:f.d:function _D1f9__modinitFZv: error: undefined reference to '_Dmodule_ref'
/tmp/cc8j7g1e.o:f.d:function _D1f9__modinitFZv: error: undefined reference to '_Dmodule_ref'
/tmp/cc8j7g1e.o:f.d:function _D1f12__ModuleInfoZ: error: undefined reference to '_D3std5stdio12__ModuleInfoZ'
... 
```

怎么了？

# java - 几乎所有线程都处于 NATIVE 状态时的 ThreadDump 问题

> ID：14324373
> 
> 赞同：5
> 
> 时间：2013-01-14T18:31:08.793
> 
> 标签：java, multithreading, thread-safety, thread-dump, jstack

我在我的应用程序中对主机进行了线程转储，其中大多数线程都处于`(state = IN_NATIVE)`状态。

在这些情况下，只有几个线程被阻塞：

```
Thread 31681: (state = BLOCKED)
 - sun.misc.Unsafe.park(boolean, long) @bci=0 (Interpreted frame)
 - java.util.concurrent.locks.LockSupport.park(java.lang.Object) @bci=14, line=156 (Interpreted frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await() @bci=42, line=1987 (Compiled frame)
 - java.util.concurrent.LinkedBlockingQueue.take() @bci=29, line=399 (Compiled frame)
 - java.util.concurrent.ThreadPoolExecutor.getTask() @bci=78, line=947 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=18, line=907 (Compiled frame)
 - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame) 
```

和

```
Thread 20966: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run() @bci=34, line=534 (Compiled frame) 
```

和

```
Thread 31682: (state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.ref.ReferenceQueue.remove(long) @bci=44, line=118 (Interpreted frame)
 - java.lang.ref.ReferenceQueue.remove() @bci=2, line=134 (Interpreted frame)
 - org.apache.commons.httpclient.JakartaHttpConnectionManager$ReferenceQueueThread.run() @bci=10, line=1104 (Interpreted frame) 
```

我们做了一些`HttpConnections`，请求在可配置的时间后超时。当我重新启动主机时，一切恢复正常。

所以，我认为线程应该在某个时候被阻塞。

在 NATIVE 代码中运行的线程指向这里：

```
 Thread 29587: (state = IN_NATIVE)
     - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Compiled frame; information may be imprecise)
     - java.net.SocketInputStream.read(byte[], int, int) @bci=84, line=129 (Compiled frame)
     - java.io.BufferedInputStream.fill() @bci=175, line=218 (Compiled frame)
     - java.io.BufferedInputStream.read1(byte[], int, int) @bci=44, line=258 (Compiled frame)
     - java.io.BufferedInputStream.read(byte[], int, int) @bci=49, line=317 (Compiled frame)
     - sun.net.www.MeteredStream.read(byte[], int, int) @bci=16, line=116 (Compiled frame)
     - java.io.FilterInputStream.read(byte[], int, int) @bci=7, line=116 (Compiled frame)
     - sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(byte[], int, int) @bci=4, line=2672 (Compiled frame)
     - javax.imageio.stream.FileCacheImageInputStream.readUntil(long) @bci=64, line=121 (Compiled frame)
     - javax.imageio.stream.FileCacheImageInputStream.read(byte[], int, int) @bci=69, line=167 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(long, boolean, boolean) @bci=0 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(boolean) @bci=12, line=532 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly() @bci=92, line=277 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(int) @bci=41, line=409 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(int, boolean) @bci=2, line=525 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(int, javax.imageio.ImageReadParam, boolean) @bci=3, line=968 (Compiled frame)
     - com.sun.imageio.plugins.jpeg.JPEGImageReader.read(int, javax.imageio.ImageReadParam) @bci=8, line=948 (Compiled frame)
     - javax.imageio.ImageIO.read(javax.imageio.stream.ImageInputStream) @bci=55, line=1422 (Compiled frame)
     - javax.imageio.ImageIO.read(java.net.URL) @bci=42, line=1374 (Compiled frame)
..............
.............    
 - java.util.concurrent.Executors$RunnableAdapter.call() @bci=4, line=441 (Interpreted frame)
     - java.util.concurrent.FutureTask$Sync.innerRun() @bci=30, line=303 (Interpreted frame)
     - java.util.concurrent.FutureTask.run() @bci=4, line=138 (Interpreted frame)
     - java.util.concurrent.ThreadPoolExecutor$Worker.runTask(java.lang.Runnable) @bci=59, line=886 (Interpreted frame)
     - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=28, line=908 (Interpreted frame)
     - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame) 
```

我认为这是罪魁祸首。我们在内部使用`ImageIO`和`Jsoup`进行这些调用的库。

我对阅读线程转储没有太多想法，而且我是新手。但任何帮助将不胜感激。

是否所有本机运行的线程都可能导致问题？我应该如何进行？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:46:12.043

前三个线程转储是等待执行新任务的空闲线程。你可以忽略它们。

我怀疑最后一个是在等待 IO，而不是消耗 CPU，但我不确定。

# backbone.js - Backbone：更新不调用回调函数

> ID：14324374
> 
> 赞同：0
> 
> 时间：2013-01-14T18:31:12.453
> 
> 标签：backbone.js

我正在尝试将功能添加到我的应用程序中，以便我可以更新我的数据库，然后更新 DOM。数据库更新得很好，但 DOM 没有。以下是我的部分观点：

```
 App.Views.Table = Backbone.View.extend({
    tagName: 'span',
    initialize: function(options) {
        this.model.on('change', this.render, this);
        this.model.on('update', this.remove, this);

        this.template = this.options.template;
        this.url = this.options.url;
    },
    events: {
        'click .verify': 'verify',
        'click .spam': 'spam',
        'click .duplicate': 'duplicate'
    },
    verify: function(e) {
        id = e.currentTarget.id;
        table = new App.Models.Table({ id: id });
        table.urlRoot = this.url;
        table.fetch();
        table.toJSON();
        table.set('verified', 1);
        table.save();

    },
    spam: function(e) {
        ...

    },
    duplicate: function(e) {
            ...
    },
    remove: function() {
        this.$el.remove();
        console.log('hello');
    },
    retrieveTemplate: function(model) {
        return _.template($('#' + this.template).html(), model);
    },
    render: function() {
        //console.log(this);
        this.$el.html(this.retrieveTemplate(this.model.toJSON()));
        return this;
    }
}); 
```

据我了解，完成后`this.model.on('update', this.remove, this);`应该调用我的删除函数`save`。但是回调没有触发，因为我没有得到`console.log`并且我的 DOM 没有被更新。我究竟做错了什么？我遵循了一个教程，但在教程中一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:39:49.187

没有`update`事件。我想你的意思是`sync`

[http://backbonejs.org/#Events-catalog](http://backbonejs.org/#Events-catalog)

`"sync" (model, resp, options) — when a model has been successfully synced with the server.`

我发现调试的另一个有用方法是使用`all`事件来查看触发了哪些事件。

**编辑：**

经过一些调试，该`verify()`函数的目标是将验证的属性保存到模型中。为此，我们需要更改`verify()`为

```
this.model.set('verified', 1);
this.model.save(); 
```

而不是创建一个新的`App.Model.Table`并将其设置为`table`变量。执行`table`.save() 是保存**新** `table`模型，而不是旧模型`this.model`。这就是为什么附加的事件处理程序会`this.model`被触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:43:14.880

Backbone.js 中没有“创建”或“更新”事件。这就是你的 remove() 回调没有触发的原因。

有关 Backbone 中可能事件的目录，请参见[http://backbonejs.org/#Events-catalog](http://backbonejs.org/#Events-catalog)。

***更新***：

在更仔细地查看您的代码后，答案很明确。它们是不同的模型：

```
initialize: function(options) {
    this.model.on('change', this.render, this);
    this.model.on('sync', this.remove, this); 
```

和

```
table = new App.Models.Table({ id: id });
...
table.save(); 
```

对象上发生的事件`table`不会触发绑定到完全不同模型（this.model）的事件处理程序。

既然已经有了模型，为什么还要创建另一个模型（表）？(this.model) ?

*** 更新 ***

我真的不明白你想要做什么，但也许试试这个：

```
table = new App.Models.Table({ id: id });
table.on('sync', this.remove, this); 
```

# c++ - C++ - 使用函数指针指向成员函数的问题

> ID：14324377
> 
> 赞同：0
> 
> 时间：2013-01-14T18:31:25.207
> 
> 标签：c++, function-pointers, typedef

我已经根据一些搜索应用了解决方案，但问题仍然存在。十分感谢你的帮助。

```
error: must use '.*' or '->*' to call pointer-to-member function ... 
```

源代码：

```
#include <stdio.h>

class A
{
  public:

    struct data;
    typedef int (A::*func_t)(data *);
    typedef struct data
    {
      int i;
      func_t func;
    }
    data;

    data d;

    void process()
    {
        d.func(&d);
    }

    A()
    {
        d.i = 999;
        d.func = &A::print;
    }

    int print(data *d)
    {
        printf("%d\n", d->i);
        return 0;
    }

};

int main()
{
    A *a = new A;

    a->process();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:39:09.777

```
d.func(&d); 
```

是不足够的。`func`是一个成员函数指针，它指向 的非静态成员`A`。所以它可以在`A`. 所以你需要这样写：

```
(this->*(d.func))(&d); 
```

只要你在里面写这个就行了`A`。

如果你想`func`从外部执行，比如 in `main()`，那么语法是这样的：

```
A a; 
(a.*(a.d.func))(&a.d); 
```

这是一个丑陋的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:38:42.207

您的`process`函数尝试调用`d.func`，但它是指向成员函数的指针。必须在某个对象上调用指向成员函数的指针。大概您希望 to 的实例为`A`，`this`在这种情况下，您的`process`函数应如下所示：

```
void process()
{
    (this->*(d.func))(&d);
} 
```

注意`->*`当你有一个指向它的指针时使用操作符来调用一个成员函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:49:48.087

其他答案已经说过您需要说`(this->*d.func)(&d)`调用指向成员函数的指针（因为您需要提供它所属的*对象*）

另一种选择是使函数成为静态函数，它不需要特殊的语法来调用。为此，请像这样更改 typedef：

```
typedef int (*func_t)(data *); 
```

然后将`print`函数设为静态：

```
static int print(data *d)
{
    ...
} 
```

现在你可以打电话`d.func(&d)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-14T18:39:47.140

不幸的是，您尝试做的事情是不可能的，原因是这`print`不是`static`成员函数。这意味着它需要一个隐式的第一个参数，即`this`指针。

我建议您尝试使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)and[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)函数，如下所示：

```
class A
{
    struct data
    {
        std::function<void(const data&)> func;
        int i;
    };

    data d;

public:
    A()
    {
        d.func = std::bind(&A::print, *this);
        d.i = 999;
    }

    void process()
    {
        d.func(d);
    }

    void print(const data& my_data)
    {
        std::cout << my_data.i << '\n';
    }
}; 
```

* * *

当然，由于`print`函数现在有了正确的`this`指针，您不再需要将数据结构传递给它：

```
class A
{
    struct data
    {
        std::function<void()> func;
        int i;
    };

    data d;

public:
    A()
    {
        d.func = std::bind(&A::print, *this);
        d.i = 999;
    }

    void process()
    {
        d.func();
    }

    void print()
    {
        std::cout << d.i << '\n';
    }
}; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-14T18:40:26.773

调用指针成员需要它所属的类是 this 参数。

尝试：

```
A a;
a.*(d.func)(&d); 
```

# javascript - 图像未显示在画布上

> ID：14324384
> 
> 赞同：0
> 
> 时间：2013-01-14T18:31:47.943
> 
> 标签：javascript, html, image, canvas, easeljs

```
<html>
<head>
<meta charset="utf-8">
<title>Game</title>
<script src="http://code.createjs.com/easeljs-0.4.2.min.js"></script>
</head>

<body>
<div id ="beeld">
<canvas id ="stageCanvas" width="1024" height="576">
<script src ="javascript.js"></script>
</canvas>
</div>

</body>
</html> 
```

这是我的 HTML

```
//Javascript Document
var canvas = document.getElementById('stageCanvas');
var stage = new Stage(canvas);

var Background;
var imgBackground = new Image();
imgBackground.src ="images/bg.png";

Background = new Bitmap(imgBackground);
Background.x = 0
Background.y = 0
stage.addChild(Background);
stage.update(); 
```

这就是我的js。

图像是 1024 x 576，所以它应该是全屏的。原版是 2048 x 576。我打算像背景一样向左滑动并在结束时自行重复。

所以我的问题是，为什么图像没有出现在画布上。

我对此很陌生，所以如果我问这么简单的问题，我很抱歉。

PS：如果我检查 HTML，它不会显示任何错误，它会显示图像正在加载。它只是没有..绘制..我猜。我很沮丧，因为我已经被困在这里几个小时了。

**我找到了一个工作代码**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Easel simple game</title>
<script src="http://code.createjs.com/easeljs-0.4.2.min.js"></script>
<script>
var canvas;
var stage;
var bg;
var score;
var ghost;

function init() {
    canvas = document.getElementById("StageCanvas");
    stage = new Stage(canvas);
    score = 0;

    bg = new Image();
    bg.src = "img/bg.png";
    bg.onload = setBG;
}

function setBG(event){
    var bgrnd = new Bitmap(bg);
    stage.addChild(bgrnd);
    stage.update();
}

</script>
</head>

<body onload="init();">
    <canvas id="StageCanvas" width="1240" height="576"></canvas>
</body>
</html> 
```

顺便说一句，这段代码是为别人工作的，所以我不相信。

这似乎完美无缺。但是一旦我删除 `bg = new Image(); bg.src = "img/bg.png"; bg.onload = setBG;` 它就会停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:42:14.157

```
Background = new Bitmap(imgBackground); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:59:37.990

我现在对 EaselJS 有同样的问题。虽然它可能对您有用，但您可以尝试添加一个自动更新画布的代码：

```
createjs.Ticker.addListener(stage); 
```

添加后，我能够将图像绘制在画布上，但是一旦我向图像添加任何变换（比例、定位、高度、宽度），它们就不会在绘制图像之前应用。

我也一直在为此挠头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:56:25.210

在 HTML 中：尝试将您的脚本标签移动`javascript.js`到 . 之前`</body>`或至少不移动到`<canvas>...</canvas>`. 另一件事是： and和and
之间有一个空格，这可能会导致某些浏览器出现问题。`src``=``id``=`

在 JavaScript 中：您需要执行`update`- 方法，`()`否则该行将只是对更新函数的列出引用。

```
stage.update(); 
```

我注意到的第二件事（虽然不是问题的一部分）：您使用的是 EaselJS 0.4.2，但 0.5.0 已经发布，以防万一您想保持最新状态：[http:// code.createjs.com/easeljs-0.5.0.min.js](http://code.createjs.com/easeljs-0.5.0.min.js) ;-)

# facebook - og：Facebook 在侧边栏提要中将图像调整为 30 x 30 像素，并且“所有活动”=看起来很糟糕

> ID：14324387
> 
> 赞同：0
> 
> 时间：2013-01-14T18:31:59.973
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在玩 Facebook 开放图。

我添加了一个 og:image 标签，以便刮板获取图像并将其显示在用户时间轴上以进行我的自定义操作。

在侧边栏上出现的活动提要上，在“所有活动”页面上，图像被调整为 30 x 30 像素，看起来很糟糕。

然而，在用户时间线上，徽标显示得足够大，看起来不错。

徽标的设计不是为了在 30 x 30 px 上看起来不错 :) 例如，对于我们的 android 应用程序，我们有一个更简单的小图标。

在这种情况下要做什么？是否有一个标签（我找不到）允许为需要小图像的情况指定一个图标，并在所有其他情况下使用该图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T04:06:00.217

您必须在代码上制作其他图片并重命名为徽标。之后，您可以使用此代码。

注意：图片应为正方形

```
<meta property="og:image:type" content="image/jpeg/jpg/png"> 
<meta property="og:image:width" content="250"> 
<meta property="og:image:height" content="250"> 
```

# css - 最大化窗口时要重新定位的文本

> ID：14324388
> 
> 赞同：0
> 
> 时间：2013-01-14T18:32:02.300
> 
> 标签：css

这是我的问题伙计们，当我最大化窗口时，我希望状态，到期日期，位于相对于页面的位置，即在相似的位置而不是相同的位置。最大化后，我希望 Status、Due Data 和 To 在最大化或页面展开时始终向右移动。我是 CSS 新手。谢谢你的时间，我期待你的帮助。

NOT MAXIMIZED ![前](../Images/e53205dd280dc7665370688c5343c2e5.png) MAXIMIZED ![后](../Images/7cd961ff8b253dcbc38eb7c4290fca38.png) 以上是屏幕截图，

这是我的 CSS 尝试：

```
#center-header-status
{
    position:relative;
    font-family:Arial;
    font-size:14;
    padding:25px;
    float:left;
    color:#5E5E5E;
    bottom:7px;
    text-align:justify;

}

#center-header-duedate
{
    position:relative;
    font-family:Arial;
    font-size:14;
    padding:25px;
    float:left;
    color:#5E5E5E;
    bottom:7px;

}

#center-header-to
{
    position:relative;
    font-family:Arial;
    font-size:14;
    padding:25px;
    float:left;
    color:#5E5E5E;
    margin-left:5px;
    bottom:7px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:41:54.230

一种方法是使用 css3 媒体查询，请查看

[http://www.css3.info/preview/media-queries/](http://www.css3.info/preview/media-queries/)
[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# django - 我可以将 Django 表单转换为 GET 请求字符串吗？

> ID：14324389
> 
> 赞同：3
> 
> 时间：2013-01-14T18:32:03.663
> 
> 标签：django, django-forms

我想采用一个现成的形式（即从`django.Forms.form`经过验证的绑定数据派生的类的对象）并对其进行 urlencode，就好像它是使用 GET 提交的一样。有内置的方法吗？

为了说明我为什么要问这个问题，以及为什么我不能只打电话`urlencode`，这个的输出应该是“ `box=on`”。

```
from django import forms
from urllib import urlencode

class DemoForm(forms.Form):
    box = forms.BooleanField(required=False)

instance = DemoForm({"box": True})  # it's irrelevant how this data is supplied
instance.is_valid()
print "encoded:", urlencode(instance.cleaned_data) 
```

实际上它是“ `box=True`”，因为`urlencode`它没有对格式进行编码，而是对已清理的值进行编码（相信我，`BooleanField`这是最简单的情况）。

所以我要求一种方法来对表单进行编码，就好像它是一个 GET 字符串一样。正确的 GET 字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T05:54:22.247

在表单的 clean_data 上调用 urllib 的 urlencode 在以下两种情况下效果不佳：

*   如果您使用的是 ModelChoiceField，cleaned_data 将包含实际对象，而不是 ID。这些将 urlencode() 到它们的字符串表示而不是它们的主键。
*   如果您使用的字段可以包含多个值（例如 MultiValueField、MultipleChoiceField 或其他），则 urlencode() 将丢失该字段中除一个值之外的所有值。所以 {'mykey':[1,2,3]} 变成 ?mykey=3 而不是 ?mykey=1&mykey=2&mykey=3 django 的方式。

要处理这两个问题，请使用表单的内置 urlencode 函数：

```
form = MyForm(request.POST) #or a dict or whatever
form.is_valid()
querystring = form.data.urlencode() 
```

请注意，这是在数据上调用的，而不是在 clean_data 上调用的。如果您的表单更改值作为验证的一部分，这些更改将不会在此处反映。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:29:17.533

我不完全确定您对现成表单的含义，因为表单通常没有关联的值。还是您的意思是填写用户填写的表格并将其发布为获取？

您可以使用 urllibs 编码来创建一个 get-string：

```
import urllib

print urllib.urlencode({'key1': 'value1', 'key2': 'value2'})
# key1=value1&key2=value2 
```

如果您想获取已发布的表单并从此数据创建 GET 字符串：

```
form = MyForm(request.POST)
if form.is_valid():
    print urllib.urlencode(form.cleaned_data)
    # name=value&name=value etc 
```

如果要为未绑定的表单创建 GET：

```
# this form contains intitial values
# which are shown when printing the form
form = MyForm()
print urllib.urlencode(form.initial)
# name=value&name=value etc 
```

# c# - 包含关键字的 Linq distinct 记录

> ID：14324390
> 
> 赞同：15
> 
> 时间：2013-01-14T18:32:08.780
> 
> 标签：c#, sql-server, asp.net-mvc, linq, entity-framework

我需要根据汽车关键字搜索返回一个不同的记录列表，例如：“Alfa 147”

问题是，因为我有 3 辆“阿尔法”汽车，它返回 1 + 3 条记录（阿尔法和 147 结果似乎是 1，阿尔法结果似乎是 3）

编辑：

SQL-Server 查询看起来像这样：

```
SELECT DISTINCT c.Id, c.Name /*, COUNT(Number of Ads in the KeywordAdCategories table with those 2 keywords) */
FROM Categories AS c
INNER JOIN KeywordAdCategories AS kac ON kac.Category_Id = c.Id
INNER JOIN KeywordAdCategories AS kac1 ON kac.Ad_Id = kac1.Ad_Id AND kac1.Keyword_Id = (SELECT Id FROM Keywords WHERE Name = 'ALFA')
INNER JOIN KeywordAdCategories AS kac2 ON kac1.Ad_Id = kac2.Ad_Id AND kac2.Keyword_Id = (SELECT Id FROM Keywords WHERE Name = '147') 
```

我的 LINQ 查询是：

```
 var query = from k in keywordQuery where splitKeywords.Contains(k.Name) 
                    join kac in keywordAdCategoryQuery on k.Id equals kac.Keyword_Id
                    join c in categoryQuery on kac.Category_Id equals c.Id
                    join a in adQuery on kac.Ad_Id equals a.Id
                    select new CategoryListByKeywordsDetailDto
                    {
                        Id = c.Id,
                        Name = c.Name,
                        SearchCount = keywordAdCategoryQuery.Where(s => s.Category_Id == c.Id).Where(s => s.Keyword_Id == k.Id).Distinct().Count(),
                        ListController = c.ListController,
                        ListAction = c.ListAction
                    };

        var searchResults = new CategoryListByBeywordsListDto();

        searchResults.CategoryListByKeywordsDetails = query.Distinct().ToList(); 
```

实体是：

```
public class Keyword
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}
// Keyword Sample Data:
// 1356 ALFA
// 1357 ROMEO
// 1358 145
// 1373 147

public class Category
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}
// Category Sample Data
// 1    NULL    1   Carros
// 2    NULL    1   Motos
// 3    NULL    2   Oficinas
// 4    NULL    2   Stands
// 5    NULL    1   Comerciais
// 8    NULL    1   Barcos
// 9    NULL    1   Máquinas
// 10   NULL    1   Caravanas e Autocaravanas
// 11   NULL    1   Peças e Acessórios
// 12   1   1   Citadino
// 13   1   1   Utilitário
// 14   1   1   Monovolume

public class KeywordAdCategory
{
    [Key]
    [Column("Keyword_Id", Order = 0)]
    public int Keyword_Id { get; set; }

    [Key]
    [Column("Ad_Id", Order = 1)]
    public int Ad_Id { get; set; }

    [Key]
    [Column("Category_Id", Order = 2)]
    public int Category_Id { get; set; }
}
// KeywordAdCategory Sample Data
// 1356 1017    1
// 1356 1018    1
// 1356 1019    1
// 1357 1017    1
// 1357 1018    1
// 1357 1019    1
// 1358 1017    1
// 1373 1019    1

 public class Ad
{
    // Primary properties
    public int Id { get; set; }
    public string Title { get; set; }
    public string TitleStandard { get; set; }
    public string Version { get; set; }
    public int Year { get; set; }
    public decimal Price { get; set; }

    // Navigation properties
    public Member Member { get; set; }
    public Category Category { get; set; }
    public IList<Feature> Features { get; set; }
    public IList<Picture> Pictures { get; set; }
    public IList<Operation> Operations { get; set; }
}

public class AdCar : Ad
{
    public int Kms { get; set; }
    public Make Make { get; set; }
    public Model Model { get; set; }
    public Fuel Fuel { get; set; }
    public Color Color { get; set; }
}
// AdCar Sample Data
// 1017 Alfa Romeo 145 1.6TDI 2013  ALFA ROMEO 145 1.6TDI 2013  12  2       1.6TDI  1000    1   2013    1   20000,0000  2052    AdCar
// 1018 Alfa Romeo 146 1.6TDI 2013  ALFA ROMEO 146 1.6TDI 2013  12  2   5   1.6TDI  1000    2   2013    1   20000,0000  2052    AdCar
// 1019 Alfa Romeo 147 1.6TDI 2013  ALFA ROMEO  147 1.6TDI 2013 12  2   6   1.6TDI  1000    3   2013    1   20000,0000  2052    AdCar 
```

我期望搜索“ALFA”的结果是“Cars: 3”，搜索“ALFA 147”的结果是“Cars: 1”，实际上我得到的结果是“Cars: 1 \n Cars: 3”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:49:15.160

kac 没有过滤单词...所以 kac、kac1 和 kac2 的连接将返回 3 行，因为这是此广告的关键字数

你应该删除它..

试试这个：

```
SELECT DISTINCT 
    c.Id, c.Name /*, COUNT(Number of Ads in the KeywordAdCategories table    with those 2 keywords) */
FROM 
    Categories AS c
INNER JOIN 
    KeywordAdCategories AS kac1 ON kac1.Keyword_Id = (SELECT Id 
                                                      FROM Keywords 
                                                      WHERE Name = 'ALFA')
                                AND kac1.Category_Id = c.Id
INNER JOIN 
    KeywordAdCategories AS kac2 ON kac1.Ad_Id = kac2.Ad_Id 
                                AND kac2.Keyword_Id = (SELECT Id 
                                                       FROM Keywords 
                                                       WHERE Name = '147')
                                AND kac2.Category_Id = c.Id 
```

我做了一个测试...

将环境设置为

```
 declare @Keywords table(id int,name varchar(max))
    insert into @Keywords(id,name)
    values (1356,'ALFA')
    ,(1357,'ROMEO')
    ,(1358,'145')
    ,(1373,'147')

    declare @Categories table(id int, name varchar(max))
    insert into @Categories(id,name)
    values (1,'Carros')
    ,(2,'Motos')

    declare @KeywordAdCategories table(Keyword_Id int, ad_Id int,Category_Id int)
    insert into @KeywordAdCategories (Keyword_Id , ad_Id,Category_Id)
    values (1356, 1017,1)
    ,(1356, 1018,1)
    ,(1356, 1019,1)
    ,(1357, 1017,1)
    ,(1357, 1018,1)
    ,(1357, 1019,1)
    ,(1358, 1017,1)
    ,(1373, 1019,1) 
```

我运行这两个查询：

```
--query 1
SELECT 
    c.Id, c.Name,COUNT(*) as [count]
FROM 
    @Categories AS c
INNER JOIN 
    @KeywordAdCategories AS kac1 ON kac1.Keyword_Id = (SELECT Id 
                                                       FROM @Keywords 
                                                       WHERE Name = 'ALFA')
                                 AND kac1.Category_Id = c.Id
GROUP BY 
    c.Id, c.Name 
```

我得到这个结果集：

```
 Id          Name       count
  ----------- ---------- -----------
  1           Carros     3 
```

第二个查询两个词...

```
--query 2
SELECT 
    c.Id, c.Name,COUNT(*) as [count]
FROM 
    @Categories AS c
INNER JOIN 
    @KeywordAdCategories AS kac1 ON kac1.Keyword_Id = (SELECT Id 
                                                       FROM @Keywords 
                                                       WHERE Name = 'ALFA')
                                 AND kac1.Category_Id = c.Id
INNER JOIN 
    @KeywordAdCategories AS kac2 ON kac1.Ad_Id = kac2.Ad_Id 
                                 AND kac2.Keyword_Id = (SELECT Id 
                                                        FROM @Keywords 
                                                        WHERE Name = '147')
                                 AND kac2.Category_Id = c.Id
GROUP BY
    c.Id, c.Name 
```

结果集是：

```
 Id          Name       count
 ----------- ---------- -----------
 1           Carros     1 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:57:53.047

您可以使用 Distinct() 方法。

```
var query = ...
var query = query.Distinct(); 
```

请参阅[此代码返回不同的值。但是，我想要返回一个强类型集合而不是匿名类型](https://stackoverflow.com/questions/7336275/linq-distinct-c-sharp)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T08:03:00.843

将查询字符串拆分为一个数组，并通过为每个关键字查询数据库并使用**unions**连接结果集进行迭代。结果集将是与任何给定关键字匹配的每个不同记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T01:41:56.973

也许这很接近？至少子查询打开它一点供您使用。

```
var query =
  from c in categoryQuery
  let keywords =
  (
    from k in keywordQuery where splitKeywords.Contains(k.Name)
    join kac in keywordAdCategoryQuery on k.Id equals kac.Keyword_Id
    where kac.Category_Id == c.Id
    join a in adQuery on kac.Ad_Id equals a.Id
    select k.Id
  ).Distinct()
  where keywords.Any()
  select new CategoryListByKeywordsDetailDto
  {
    Id = c.Id,
    Name = c.Name,
    SearchCount =
    (
      from kac in keywordAdCategoryQuery
      where kac.Category_Id == c.Id
      join kId in keywords on kac.Keyword_Id equals kId
      select kac.Id
    ).Distinct().Count(),
    ListController = c.ListController,
    ListAction = c.ListAction
  }; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T16:47:44.450

因此，如果我正确理解了需求，您希望文本中的所有单词子集都匹配，而不是您现在得到的 OR 匹配？我看到至少两个选项，其中第一个可能不会将拆分转换为 SQL：

```
var query = from k in keywordQuery where !splitKeywords.Except(k.Name.split(' ')).Any() 
```

这做出以下假设：

1.  您在关键字中的单词是空格分隔的。
2.  您正在寻找完全匹配而不是部分匹配。（即Test 将不匹配TestTest）。

另一种选择是使用谓词构建器动态生成谓词（有一段时间没有这样做，我的实现可能需要调整 - 但这是更有可能（并且在我看来更好）的解决方案）：

```
var predicate = PredicateBuilder.True<keywordQuery>();
foreach (string s in splitKeywords) {
    predicate.AND(s.Contains(k.Name));
}

query.Where(predicate); 
```

如果有人可以评论我的某些语法是否关闭，我将不胜感激。**编辑**：包括指向谓词构建器的良好参考的链接：[http ://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

**更新**

跨多个表的谓词构建器，如果有人来这里寻找如何做到这一点。 [PredicateBuilder 可以生成跨越多个表的谓词吗？](https://stackoverflow.com/questions/5303269/can-predicatebuilder-generate-predicates-that-span-multiple-tables)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-23T11:23:16.473

linq 的一大优点是您可以用更小、更简单的步骤构建复杂的查询，并让 linq 弄清楚如何将它们连接在一起。

以下是获取此信息的一种方法。I'm not sure whether this is the best and you would need to check it performs well when multiple keywords are selected.

假设关键字的定义类似于

```
var keywords = "Alfa 147";
var splitKeywords = keywords.Split(new char[] {' '}); 
```

**阶段1**

获取按广告和类别分组的关键字列表，以及

```
var subQuery = (from kac in keywordAdCategoryQuery  
    join k in keywordQuery  on kac.Keyword_Id equals k.Id 
    select new 
    {        
        kac.Ad_Id, 
        kac.Category_Id, 
        KeyWord = k.Name, 
    }); 

var grouped = (from r in subQuery 
    group r by new { r.Ad_Id, r.Category_Id}  into results
    select new 
    { 
        results.Key.Ad_Id , 
        results.Key.Category_Id , 
        keywords = (from r in results select r.KeyWord) 
    }); 
```

请注意，您发布的类表明您的数据库没有在表之间定义外键关系。如果他们这样做了，那么这个阶段的编写会稍微简单一些。

**第二阶段**

过滤掉没有每个关键字的任何组

```
foreach(var keyword in splitKeywords)
{
    var copyOfKeyword = keyword ;   // Take copy of keyword to avoid closing over loop
    grouped = (from r in grouped where r.keywords.Contains(copyOfKeyword) select r) ;
} 
```

**第三阶段**

按类别分组并计算每个类别的结果

```
var groupedByCategories = (from r in grouped 
    group r by r.Category_Id into results 
    join c in categoryQuery  on results.Key equals c.Id 
    select new 
    { 
        c.Id , 
        c.Name , 
        Count = results.Count()
    }); 
```

**第 4 阶段**

现在从 sql 中检索信息。这应该在一个查询中完成。

```
var finalResults = groupedByCategories.ToList(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-24T00:46:29.653

应该可以查询每个关键字然后合并结果集。重复值将从联合中删除，您可以计算出所需的聚合。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-23T04:31:23.793

尝试在选择时删除课程

```
 var query = (from k in keywordQuery where splitKeywords.Contains(k.Name) 
                        join kac in keywordAdCategoryQuery on k.Id equals kac.Keyword_Id
                        join c in categoryQuery on kac.Category_Id equals c.Id
                        join a in adQuery on kac.Ad_Id equals a.Id
                        select new
                        {
                            Id = c.Id,
                            Name = c.Name,
                            SearchCount = keywordAdCategoryQuery.Where(s => s.Category_Id == c.Id).Where(s => s.Keyword_Id == k.Id).Distinct().Count(),
                            ListController = c.ListController,
                            ListAction = c.ListAction
                        }).Distinct().ToList();

        var searchResults = new CategoryListByBeywordsListDto();

searchResults.CategoryListByKeywordsDetails = (from q in query select new           CategoryListByKeywordsDetailDto
{
                        Id = q.Id,
                        Name = q.Name,
                        SearchCount = q.SearchCount,
                        ListController = q.ListController,
                        ListAction = q.ListAction
                    }).ToList(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-11T13:22:31.610

嗨，如果我正确理解您的问题

> “问题是，因为我有 3 辆“阿尔法”汽车，它返回 1 + 3 条记录（阿尔法和 147 结果似乎是 1，阿尔法结果似乎是 3）

并且 Linq 并不是真正需要的，我可能有你需要的东西，只需将它作为新项目进行测试

```
 public Linqfilter()
    {
        //as Note: I modified a few classes from you because i doesn'T have your Member, Operation, Make,... classes

        #region declaration
        var originalAdCarList = new List<AdCar>() 
        {
            new AdCar(){Id=1017, Title= "Alfa Romeo 145 1.6TDI 2013", Category= new Category(){Id =12}} ,
            new AdCar(){Id=1018, Title= "Alfa Romeo 146 1.6TDI 2013", Category= new Category(){Id =11}} ,
            new AdCar(){Id=1019, Title= "Alfa Romeo 147 1.6TDI 2013", Category= new Category(){Id =12}} 
        };

        var originalKeywordAdCategoryList = new List<KeywordAdCategory>() 
        {
            new KeywordAdCategory() { Keyword_Id=1356, Ad_Id=1017,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1356, Ad_Id=1018,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1356, Ad_Id=1019,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1357, Ad_Id=1017,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1357, Ad_Id=1018,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1357, Ad_Id=1019,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1358, Ad_Id=1017,Category_Id=1},
            new KeywordAdCategory() { Keyword_Id=1373, Ad_Id=1019,Category_Id=1}            
        };

        var originalCategoryList = new List<Category>()
        {
            new Category(){Id=1,    Name="NULL    1   Carros"},
            new Category(){Id=2,    Name="NULL    1   Motos"},
            new Category(){Id=3,    Name="NULL    2   Oficinas"},
            new Category(){Id=4 ,   Name="NULL    2   Stands"},
            new Category(){Id=5 ,   Name="NULL    1   Comerciais"},
            new Category(){Id=8,    Name="NULL    1   Barcos"},
            new Category(){Id=9 ,   Name="NULL    1   Máquinas"},
            new Category(){Id=10 ,  Name="NULL    1   Caravanas e Autocaravanas"},
            new Category(){Id=11 ,  Name="NULL    1   Peças e Acessórios"},
            new Category(){Id=12 ,  Name="1   1   Citadino"},
            new Category(){Id=13 ,  Name="1   1   Utilitário"},
            new Category(){Id=14 ,  Name="1   1   Monovolume"}
        };

        var originalKeywordList = new List<Keyword>() 
        {
             new Keyword(){Id=1356 ,Name="ALFA"},
             new Keyword(){Id=1357 ,Name="ROMEO"},
             new Keyword(){Id=1358 ,Name="145"},
             new Keyword(){Id=1373 ,Name="147"}
        };
        #endregion declaration

        string searchText = "ALFA";

        // split the string searchText in an Array of substrings
        var splitSearch = searchText.Split(' '); 

        var searchKeyList =new List<Keyword>();

        // generate a list of Keyword based on splitSearch
        foreach (string part in splitSearch)
            if(originalKeywordList.Any(key => key.Name == part))
                searchKeyList.Add(originalKeywordList.First(key => key.Name == part));

        // generate a list of KeywordAdCategory  based on searchKList
        var searchKACList = new List<KeywordAdCategory>();
        foreach(Keyword key in searchKeyList)
            foreach (KeywordAdCategory kAC in originalKeywordAdCategoryList.Where(kac => kac.Keyword_Id == key.Id))
                searchKACList.Add(kAC);

        var groupedsearchKAClist = from kac in searchKACList group kac by kac.Keyword_Id;

        var listFiltered = new List<AdCar>(originalAdCarList);

        //here starts the real search part
        foreach (IGrouping<int, KeywordAdCategory> kacGroup in groupedsearchKAClist)
        {

            var listSingleFiltered = new List<AdCar>();
            //  generate a list of AdCar that matched the current KeywordAdCategory filter
            foreach (KeywordAdCategory kac in kacGroup)
                foreach (AdCar aCar in originalAdCarList.Where(car => car.Id == kac.Ad_Id))
                    listSingleFiltered.Add(aCar);

            var tempList = new List<AdCar>(listFiltered);
            // iterrates over a temporary copie of listFiltered and removes items which don't match to the current listSingleFiltered
            foreach (AdCar aC in tempList)
                if (!listSingleFiltered.Any(car => car.Id == aC.Id))
                    listFiltered.Remove(aC);
        }

        var AdCarCount = listFiltered.Count; // is the count of the AdCar who match

        var CatDic =new  Dictionary<Category, int>(); // will contain the Counts foreach Categorie > 0

        foreach(AdCar aCar in listFiltered)
            if(originalCategoryList.Any(cat => cat.Id ==aCar.Category.Id))
            {
                var selectedCat = originalCategoryList.First(cat => cat.Id == aCar.Category.Id);
                if (!CatDic.ContainsKey(selectedCat))
                {
                    CatDic.Add(selectedCat, 1);//new Category Countvalue
                }
                else
                {
                    CatDic[selectedCat]++; //Category Countvalue +1
                }
            }
    }
}

public class Keyword
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Category
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}

public class KeywordAdCategory
{
    //[Key]
    //[Column("Keyword_Id", Order = 0)]
    public int Keyword_Id { get; set; }

    //[Key]
    //[Column("Ad_Id", Order = 1)]
    public int Ad_Id { get; set; }

    //[Key]
    //[Column("Category_Id", Order = 2)]
    public int Category_Id { get; set; }
}

public class Ad
{
    // Primary properties
    public int Id { get; set; }
    public string Title { get; set; }
    public string TitleStandard { get; set; }
    public string Version { get; set; }
    public int Year { get; set; }
    public decimal Price { get; set; }

    // Navigation properties
    public string Member { get; set; }
    public Category Category { get; set; }
    public IList<string> Features { get; set; }
    public IList<int> Pictures { get; set; }
    public IList<string> Operations { get; set; }
}

public class AdCar : Ad
{
    public int Kms { get; set; }
    public string Make { get; set; }
    public int Model { get; set; }
    public int Fuel { get; set; }
    public int Color { get; set; }
} 
```

希望它会帮助你或其他人

## 编辑：

扩展我的 Methode`Linqfilter()`以回答请求

## 编辑2：

我认为这应该正是您正在寻找的

```
 var selectedKWLinq = from kw in originalKeywordList
                             where splitSearch.Contains(kw.Name) 
                             select kw;

        var selectedKACLinq = from kac in originalKeywordAdCategoryList
                              where selectedKWLinq.Any<Keyword>(item => item.Id == kac.Keyword_Id) 
                              group kac by kac.Keyword_Id into selectedKAC
                              select selectedKAC;

        var selectedAdCar = from adC in originalAdCarList
                           where (from skAC in selectedKACLinq
                                      where skAC.Any(kac => kac.Ad_Id == adC.Id)
                                  select skAC).Count() == selectedKACLinq.Count()
                           select adC;

        var selectedCategorys = from cat in originalCategoryList
                                join item in selectedAdCar
                                on cat.Id equals item.Category.Id
                                group cat by cat.Id into g
                                select g;

        //result part
        var AdCarCount = selectedAdCar.Count(); 

        List<IGrouping<int, Category>> list = selectedCategorys.ToList(); 
        var firstCategoryCount = list[0].Count();
        var secoundCategoryCount = list[1].Count(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-13T03:50:15.807

您正在对 CategoryListByKeywordsDetailDto 列表进行选择。Distinct 仅适用于 POCO 和匿名对象。在您的情况下，您需要实现 [IEqualitycomparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)才能选择不同的工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-13T08:46:16.717

我尝试使用 LINQ 直接针对内存集合（而不是通过 SQL） - 似乎对我有用（我认为主要的一点是你想要搜索适用于所有指定关键字的广告，而不是任何，正确? 无论如何，下面的一些示例代码（有点评论，不一定是最有效的，但希望能说明这一点......）

使用以下“数据集”：

```
private List<AdCar> AdCars = new List<AdCar>();
private List<KeywordAdCategory> KeywordAdCategories = new List<KeywordAdCategory>();
private List<Category> Categories = new List<Category>();
private List<Keyword> Keywords = new List<Keyword>(); 
```

使用您提供的数据在测试方法中填充...

搜索方法看起来有点像这样：

```
var splitKeywords = keywords.Split(' ');

var validKeywords = Keywords.Join(splitKeywords, kwd => kwd.Name.ToLower(), spl => spl.ToLower(), (kwd, spl) => kwd.Id).ToList();

var groupedAdIds = KeywordAdCategories
                .GroupBy(kac => kac.Ad_Id)
                .Where(grp => validKeywords.Except(grp.Select(kac => kac.Keyword_Id)).Any() == false)
                .Select(grp => grp.Key)
                .ToList();

var foundKacs = KeywordAdCategories
    .Where(kac => groupedAdIds.Contains(kac.Ad_Id))
    .GroupBy(kbc => kbc.Category_Id, kac => kac.Ad_Id);

//Results count by category
var catCounts = Categories
    .Join(foundKacs, cat => cat.Id, kacGrp => kacGrp.Key, (cat, kacGrp) => new { CategoryName = cat.Name, AdCount = kacGrp.Distinct().Count() })
    .ToList();

//Actual results set
var ads = AdCars.Join(groupedAdIds, ad => ad.Id, grpAdId => grpAdId, (ad, grpAdId) => ad); 
```

正如我所说，这更多是为了说明，请不要太仔细地看 Joins & GroupBy 等的使用（不确定它是否准确，呃，“最佳”）

因此，使用上述方法，如果我搜索“Alfa”，我会得到 3 个广告结果，如果我搜索“Alfa 147”，我只会得到 1 个结果。

编辑：我已更改代码以表示两种可能的结果（因为我不确定您的问题需要哪个）

`ads`将为您提供搜索返回的实际广告

`catCounts`将给出一个匿名类型列表，每个类型将查找结果表示为按类别划分的广告计数

这有帮助吗？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-14T00:03:32.180

Fiuu，这真是脑残。我将查询分成几部分，但它在最后作为一个整体执行（var 结果）。我返回了匿名课程，但意图很明确。

这是解决方案：

```
var keywordIds = from k in keywordQuery
                    where splitKeywords.Contains(k.Name)
                    select k.Id;

var matchingKac = from kac in keywordAdCategories
            where keywordIds.Contains(kac.Keyword_Id)
            select kac;

var addIDs = from kac in matchingKac
                group kac by kac.Ad_Id into d
                where d.Count() == splitKeywords.Length
                select d.Key;

var groupedKac = from kac in keywordAdCategoryQuery
                where addIDs.Contains(kac.Ad_Id)
                group kac by new { kac.Category_Id, kac.Ad_Id };

var result = from grp in groupedKac
                group grp by grp.Key.Category_Id into final
                join c in categoryQuery on final.Key equals c.Id
                select new
                {
                    Id = final.Key,
                    Name = c.Name,
                    SearchCount = final.Count()
                };

// here goes result.ToList() or similar 
```

# c# - 如何删除 DataContractSerializer 冗长

> ID：14324394
> 
> 赞同：2
> 
> 时间：2013-01-14T18:32:40.513
> 
> 标签：c#, .net, datacontractserializer

我们正在尝试序列化对象树。虽然我们已经成功了。我希望找到一种方法来简化生成的 xml。

这些对象如下所示：

```
public class RuleSet<T>
{
    public IEnumerable<IState<T>> States { get; set; }
    public IEnumerable<ICondition<T>> Conditions { get; set; }
}

public class State<T> : IState<T>
{
    public string Id { get; set; }
    public List<ITransition<T>> Transitions { get; set; }
}

public class Transition<T> : ITransition<T>
{
    public ICondition<T> Condition { get; set; }
    public IState<T> Next { get; set; }
}

public class Condition<T> : ICondition<T>
{
    public string Id { get; set; }
    public string Name { get; set; }    
} 
```

我们目前正在使用一个非常简单的序列化代码：

```
public void blah()
{
    var condition1 = new Condition<object>() {
        Id = "C1", AttributeName = "Foo", ExpectedValue = "Bar"
    };
    var condition2 = new Condition<object>() {
        Id = "C2", AttributeName = "Bar", ExpectedValue = "Foo"
    };

    var state1Transitions = new List<ITransition<object>>();
    var state2Transitions = new List<ITransition<object>>();
    var state3Transitions = new List<ITransition<object>>();

    var state = new State<object> {
        Id = "S1", Transitions = state1Transitions
    };
    var state2 = new State<object> {
        Id = "S2", Transitions = state2Transitions
    };
    var state3 = new State<object> {
        Id = "S3", Transitions = state3Transitions
    };

    state1Transitions.Add(new Transition<object> {
        Condition = condition1, Next = state2
    });
    state1Transitions.Add(new Transition<object> {
        Condition = condition2, Next = state3
    });
    state2Transitions.Add(new Transition<object> {
        Condition = condition2, Next = state3
    });
    var ruleSet = new RuleSet<object> {
        States = new List<IState<object>> {state, state2, state3}, 
        Conditions = new List<ICondition<object>>{condition1, condition2}
    };

    var stream1 = new MemoryStream();

    var serializer = new DataContractSerializer(typeof(RuleSet<object>),
        new List<Type> { 
            typeof(State<object>), 
            typeof(Transition<object>),
        typeof(AttributeEqualTo<object>)
    });

    serializer.WriteObject(stream1, ruleSet);
    stream1.Position = 0;

    var xml = new StreamReader(stream1).ReadToEnd();
    Console.WriteLine(xml);
} 
```

生成 XML 时，每个级别的输出都是完整的，而不是仅包含对对象的引用。基本上，`Transition<T>`对于每个状态和条件，我们都会得到一个完整的对象定义，即使它们是在其他地方定义的。

有没有办法让那些只是参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:09:10.057

这一切都取决于您如何创建您的[`DataContractSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx).

您需要调用[构造函数的重载，以指示您将保留对象引用](http://msdn.microsoft.com/en-us/library/aa344262.aspx)，并具有以下签名：

```
public DataContractSerializer(
    Type type,
    IEnumerable<Type> knownTypes,
    int maxItemsInObjectGraph,
    bool ignoreExtensionDataObject,
    bool preserveObjectReferences,
    IDataContractSurrogate dataContractSurrogate
) 
```

您可以为大多数参数传递默认值。在您的情况下，对`DataContractSerializer`构造函数的调用将如下所示：

```
var serializer = new DataContractSerializer(typeof(RuleSet<object>),
    new [] {
        typeof(State<object>),
        typeof(Transition<object>),
        typeof(AttributeEqualTo<object>)
    },
    Int32.MaxValue,
    false,
    /* This is the important flag to set. */
    true,
    null
); 
```

请注意，从`preserveObjectReferences`参数文档中，它使用非标准 XML（强调我的）：

> 保留对象引用
> 
> 类型：System.Boolean
> 
> true**使用非标准 XML 结构来保存对象引用数据**；否则为假。

如果您需要 .NET 之外的其他代码来解释这一点，那么解开引用可能会很困难（但不应该是不可能的）。

但是，它会阻止对象图自我复制并减少 XML 的大小（可能会相当大，考虑到您的引用有多深）。

# c# - XNA 游戏在“拖动”窗口时不更新，是否有任何事件处理程序？

> ID：14324395
> 
> 赞同：3
> 
> 时间：2013-01-14T18:32:40.743
> 
> 标签：c#, event-handling, xna, window, drag

我是 XNA 和 C# 的新手，在我的 XNA 项目中，我需要事件处理程序来预测游戏何时失去焦点，以便在再次获得焦点时同步音乐和视觉效果。但我遇到了一个问题；游戏在被拖动时不会“更新”，但我似乎找不到合适的事件监听器。我试过了：

```
System.Windows.Forms.Control.FromHandle(Window.Handle).Move += new EventHandler(DeactivateGame); 
```

这个在移动窗口时调用了很多次“DeactivateGame”。但即使它有效，尽管它多次调用该函数，但我看不到在释放窗口句柄时调用函数的事件处理程序，以便游戏可以通过调用“ActivateGame”再次恢复

旁注（如果有帮助的话）；

```
this.Activated += new EventHandler<EventArgs>(NotifyActivated);
this.Deactivated += new EventHandler<EventArgs>(NotifyDeactivated); 
```

这些事件处理程序在最小化窗口或将焦点放在游戏窗口以外的其他东西上时工作正常，但它不会注册被拖动的窗口。对于习惯编程的人来说可能很明显，但我只是想确保我已经提供了足够的信息

编辑：作为事件处理程序的结果，我要添加的函数是 DateTime/TimeSpan，当窗口失焦或被拖动时会调用它。当放下或再次获得焦点时，这会将当前时间与窗口失去焦点时设置的时间进行比较，以计算两者之间的损失时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:28:22.720

为了检测 XNA 窗口何时被拖动，您在正确的轨道上使用 Window.Handle 和 Windows 窗体。您可以简单地监听 ResizeBegin 和 ResizeEnd 事件来了解用户何时开始移动窗口以及何时释放它。

```
var xnaWinForm = (System.Windows.Forms.Control.FromHandle(Window.Handle) as System.Windows.Forms.Form);
if (xnaWinForm != null)
{
    xnaWinForm.ResizeBegin += new EventHandler(xnaWinForm_ResizeBegin);
    xnaWinForm.ResizeEnd += new EventHandler(xnaWinForm_ResizeEnd);
} 
```

这就是事件处理程序的样子。

```
void xnaWinForm_ResizeBegin(object sender, EventArgs e)
{
    // XNA window is starting to be moved.
}

void xnaWinForm_ResizeEnd(object sender, EventArgs e)
{
    // XNA window was released and is no longer being moved.
} 
```

然后只需将其与您提到的其他事件结合起来，以确定窗口何时最小化/恢复/活动，以确定窗口“非活动”多长时间。

# embedded - 我对 Modbus 通信有点陌生，很难弄清楚在“免费 modbus”的主端使用哪些功能

> ID：14324398
> 
> 赞同：2
> 
> 时间：2013-01-14T18:32:53.780
> 
> 标签：embedded, master-slave, microchip, modbus

我对 Modbus 通信有点陌生，我已经开始阅读“免费 Modbus”库。现在，我了解如何使用它来实现 Modbus 通信的从机端，但我似乎无法找到如何在主机端使用库。例如，我在主站调用什么函数来读取从站 19 的离散输入 3（例如）？

预先感谢您的帮助。

顺便说一句，我正在用 C 语言编写并为 MSP430 微控制器编程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T16:15:39.060

网站上没有直接说明，但是FreeMODBUS库只支持从端。例如，在 init 函数 ( modbus.html#ga0">http://www.freemodbus.org/api/group_modbus.html#ga0 ) 中，其中一个参数是“ucSlaveAddress” - 您的（从）设备的地址。

创建 FreeMODBUS 的人现在在商业库上工作，并且有一个主模式库 - [http://www.embedded-solutions.at/index.php/en/products/modbus-master](http://www.embedded-solutions.at/index.php/en/products/modbus-master)

# jquery - 使用 WCF 服务返回 JSON 的数据加载 jqxGrid

> ID：14324401
> 
> 赞同：0
> 
> 时间：2013-01-14T18:33:01.570
> 
> 标签：jquery, json, wcf

服务器端我正在使用 WCF 返回格式正确的 json。当我使用 jquery $.ajax 函数时，我能够接收到预期的数据，所以让我们假设（除非 jqWidgets 有细微差别）WCF 端是正确的。

我无法开始工作的是加载具有相同数据的 jqx dataAdapter。我尝试了十几种不同的方法，但总是没有记录。这是javascript。

```
<script type="text/javascript">
    $(document).read(function() {
        var source = {
            type: "GET",
            data: "",
            dataType: "json",
            dataFields: [
                { name: "ID" },
                { name: "Name" }
            ],
            url: "TestService.svc/GetAttributes",
            root: 'GetAttributesResult'
        };

        var dataAdapter = new $.jqx.dataAdapter( source );

        $("#jqxGrid").jqxGrid(
            {
                source: dataAdapter,
                columns: [
                    { text: 'ID', datafield: 'ID', width: 200},
                    { text: 'Name', datafield: 'Name', width: 200}
                ]
            });
    });
</script> 
```

作为参考，从我的 WCF 服务返回的数据如下所示

```
{"GetAttributesResult":[{"ID":"1","Name":"Make"},{"ID":"2","Name":"Model"}]} 
```

如果我尝试一些简单的事情

```
var dataAdapter = new $.jqx.dataAdapter(source); 
```

在使用 VS2012 进行调试时，我得到一个空记录集。

任何帮助是极大的赞赏。我愿意完全采用不同的设计方向，因为这在项目中还为时过早。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:41:03.540

这是一个帮助主题：[asp.net-web-service-grid.htm](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/asp.net-integration/asp.net-web-service-grid.htm)。此外，还有一个错字：dataFields 应该是 datafields。

# html - 带有粘性页眉的粘性页脚？

> ID：14324402
> 
> 赞同：1
> 
> 时间：2013-01-14T18:33:05.870
> 
> 标签：html, css, twitter-bootstrap

是否可以使用粘性页眉制作粘性页脚？

一切都很好，但是当我应用粘性标题时，我需要`body { padding-top: 60px; }`让它不与内容重叠。那么问题是我的页脚在页面下方。

小提琴：http: [//jsfiddle.net/NFpDG/](http://jsfiddle.net/NFpDG/)

## HTML

```
<div class="wrap">
  <div class="header">STICKY HEADER</div>
  <div class="content">CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />CONTENT
    <br />
  </div>
  <div class="push"></div>
</div>
<div class="footer">STICKY FOOTER</div> 
```

## CSS

```
html, body, .wrap {
  height: 100%;
}
.wrap {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin-bottom: -60px;
  /* for sticky footer to not go below page */
  padding-top: 60px;
  /* for sticky header to not overlap content */
}
.push, .footer {
  height: 60px;
}
.footer {
  background-color: green;
}
.content {
  background-color: yellow;
}
.header {
  background-color: blue;
  height: 60px;
  width: 100%;
  position: fixed;
  top: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:47:34.173

你为什么不只是添加`padding-top: 60px;`到`.content`而不是`.wrap`？

jsFiddle：http: [//jsfiddle.net/NFpDG/2/](http://jsfiddle.net/NFpDG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T17:07:47.683

我自己一直在研究这个问题。我见过很多解决方案，每个解决方案都有问题，通常涉及一些神奇的数字。

因此，使用来自各种来源的最佳实践，我想出了这个解决方案：

[http://jsfiddle.net/vfSM3/248/](http://jsfiddle.net/vfSM3/248/)

我想在这里特别实现的是让主要内容在绿色区域内的页脚和页眉之间滚动。

这是简单的CSS：

```
html, body {
  height:100%;
  margin:0;
  padding:0;
}
header {
  height: 4em;
  background-color:red;
  position:relative;
  z-index:1;
}
.content {
  background:white;
  position:absolute;
  top:5em;
  bottom:5em;
  overflow:auto;
}
  .contentinner {

}
.container {
  height: 100%;
  margin: -4em 0 -2em 0;
  background:green;
  position:relative;
  overflow:auto;
}
 footer {
   height: 2em;
   position:relative;
   z-index:1;
   background-color:yellow;
} 
```

# vb.net - FindWindow FindWindowEx

> ID：14324403
> 
> 赞同：1
> 
> 时间：2013-01-14T18:33:10.033
> 
> 标签：vb.net, findwindow, findwindowex

我编写了一个程序，该程序是在另一个程序中找到一个框并将焦点设置在它上面。完成此操作后，它将发送密钥并保存到此框。

我正在使用 Findwindow 和 FindwindowEx 来定位该框，但我遇到了一些问题。 ![在此处输入图像描述](../Images/efd8e9661c29a0660c1f46db572d972d.png) 如果您注意到窗口一直到第一个 TPanel 都是相同的。现在之后有 3Tpanel 类。在 3Tpanel 类之后有多个 TttgEdit 类。

我如何教授我想要选择的课程？到目前为止，这是我的代码。

德尔卡

```
Private Declare Function SetForegroundWindow Lib "user32" (ByVal hwnd As IntPtr) As Long

Private Declare Auto Function FindWindow Lib "user32.dll" ( _
ByVal lpClassName As String, _
ByVal lpWindowName As String _
) As IntPtr

Private Declare Auto Function FindWindowEx Lib "user32.dll" ( _
ByVal hwndParent As IntPtr, _
ByVal hwndChildAfter As IntPtr, _
ByVal lpszClass As String, _
ByVal lpszWindow As String _
) As IntPtr 
```

资源

```
 Dim hWnd As IntPtr = FindWindow("TRunprgForm", Nothing)
    If hWnd.Equals(IntPtr.Zero) Then
        Return
    End If
    cb1.Checked = True
    '--------------------instert here
    Dim hWndChild1 As IntPtr = _
    FindWindowEx(hWnd, IntPtr.Zero, "TmisinvForm", Nothing)
    If hWndChild1.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndChild2 As IntPtr = _
    FindWindowEx(hWndChild1, IntPtr.Zero, "TScrollBox", Nothing)
    If hWndChild2.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndChild3 As IntPtr = _
    FindWindowEx(hWndChild2, IntPtr.Zero, "TPageControl", Nothing)
    If hWndChild3.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndChild4 As IntPtr = _
    FindWindowEx(hWndChild3, IntPtr.Zero, "TTabSheet", Nothing)
    If hWndChild4.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndChild5 As IntPtr = _
    FindWindowEx(hWndChild4, IntPtr.Zero, "TttgCenterPanel", Nothing)
    If hWndChild5.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndChild6 As IntPtr = _
    FindWindowEx(hWndChild5, IntPtr.Zero, "TPanel", Nothing)
    If hWndChild6.Equals(IntPtr.Zero) Then
        Return
    End If

    Dim hWndEdit As IntPtr = _
    FindWindowEx(hWndChild6, IntPtr.Zero, "TttgDBEdit", Nothing)
    If hWndEdit.Equals(IntPtr.Zero) Then
        Return
    End If

    SetForegroundWindow(hWndEdit) 
```

左侧的数字，hWnd，每次关闭和打开屏幕时都会改变，所以我不能将它们用作静态数字。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:51:27.287

看起来你想要第二个 TPanel 在`TttgCenterPanel`.

为了做到这一点，您可以找到第一个 TPanel（您已经这样做了），然后找到作为 的后代的 TPanel `TttgCenterPanel`，并且位于第一个 TPanel 之后。您需要传入`hwndChild5`FindWindowEx` `hwndChildAfter of` 。

```
' .... all the stuff you did before

Dim hWndChild5 As IntPtr = _
FindWindowEx(hWndChild4, IntPtr.Zero, "TttgCenterPanel", Nothing)
If hWndChild5.Equals(IntPtr.Zero) Then
    Return
End If

Dim hWndChild6 As IntPtr = _
FindWindowEx(hWndChild5, IntPtr.Zero, "TPanel", Nothing)
If hWndChild6.Equals(IntPtr.Zero) Then
    Return
End If

Dim hWndChild6Second As IntPtr = _
FindWindowEx(hWndChild5, hWndChild6, "TPanel", Nothing)
If hWndChild6Second.Equals(IntPtr.Zero) Then
    Return
End If

Dim hWndEdit As IntPtr = _
FindWindowEx(hWndChild6Second, IntPtr.Zero, "TttgDBEdit", Nothing)
If hWndEdit.Equals(IntPtr.Zero) Then
    Return
End If

SetForegroundWindow(hWndEdit) 
```

从[FindWindowEx 的 MSDN 文档中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633500(v=vs.85).aspx)：

> hwndChildAfter [输入，可选]
> 
> 类型：HWND
> 
> 子窗口的句柄。**搜索从 Z 顺序中的下一个子窗口开始。**子窗口必须是 hwndParent 的直接子窗口，而不仅仅是后代窗口。
> 
> 如果 hwndChildAfter 为 NULL，则搜索从 hwndParent 的第一个子窗口开始。

如果您试图找到第二个 TPanel，此方法将有效。如果它们每次都是随机顺序，这将失败。

# javascript - JSON 对象可以扩展另一个 json 对象吗？

> ID：14324406
> 
> 赞同：0
> 
> 时间：2013-01-14T18:33:12.210
> 
> 标签：javascript, json, oop

我来自 Java 对象模型和 JSON 新手。试图了解 JSON 对象模型的真实性。它提供`implement`和`extend`能力吗？

如果不是，那么我将如何实现类似的对象模型？

我确实尝试过用谷歌搜索，但找不到任何具体的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:49:04.653

我有一种感觉，你的意思是“试图理解**JavaScript**对象模型的真实性”。如果您愿意，任何 javascript 对象的 JSON 表示将只是该对象的转录。因此，任何与 OO 结构有关的事情都必须在 JavaScript 中处理，而不是 JSON 本身。[这个问题](https://stackoverflow.com/questions/4162749/convert-js-object-to-json-string)可以很好地引导您以 JSON 格式表示您的对象。

PS：如果您对 java OO 模型感到满意，[typescript 的 Playground](http://www.typescriptlang.org/Playground/)对您来说可能是一个很好的“可视化工具”。在左侧面板上，您可以创建非常接近您在 java 中创建的对象（玩继承等）的东西，在右侧，您会看到它是 javascript“翻译”。非常干净，非常直截了当“按书本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:37:04.630

javascript 没有像 java 那样内置的 implements 或 extends 方法。如果需要，您可以构造方法来模拟该行为。那里有提供这些所需行为的 mvc 库，例如 mvc 库主干的模型类具有扩展功能。谷歌，javascript 继承了解更多信息。

# visual-studio-2012 - 更改 TFS 2012 中的“我的代码审查和请求”

> ID：14324409
> 
> 赞同：2
> 
> 时间：2013-01-14T18:33:24.377
> 
> 标签：visual-studio-2012, tfs, tfs-code-review

不知何故，我更改了用于代码审查的 TFS 2012 查询。这个查询可以在 VS 2012 的“我的工作”下找到。我可以通过选择标题“我的代码审查和请求”旁边的“打开查询”，然后选择“编辑查询”来查看查询的内容。但是，无法以会更改“我的代码审查和请求”的方式保存此查询，或者至少我看不到它。

我遇到的问题是有人查询已从默认值更改，我不知道如何将其恢复为默认值。这个问题对我和这个特定的 TFS 实例来说是孤立的。我可以连接到不同的 TFS 实例并使用与上述相同的步骤查看默认查询，因此我相对确定此问题与特定的 TFS 实例有关，而不是与我的本地计算机有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T12:14:00.987

尝试对这个 Microsoft 错误进行投票，看看它是否通过允许对“我的工作”视图生成的查询进行更多控制来推动 TFS 设计的改进：

[无法更正“我的工作”下列出的查询](https://connect.microsoft.com/VisualStudio/feedback/details/799330/queries-listed-under-my-work-cannot-be-corrected)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:28:18.073

你没有提到你是如何改变它的，所以我猜你定制了这个过程，如果是这样？当然这发生在现有项目上，但我猜它不会发生在新项目上？？？如果是这样，您可以下载存在问题的现有项目并使用相同的流程模板创建新项目，并尝试比较这 2 个流程以了解有什么不同以及如何更改它。

# ruby-on-rails - gem 方法的自定义控制器操作或“CRUD”？

> ID：14324416
> 
> 赞同：1
> 
> 时间：2013-01-14T18:34:09.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, crud

我将[社交宝石](https://github.com/cmer/socialization)用于“喜欢”和“关注”对象。我正在通过 AJAX 执行此操作。现在，我唯一喜欢的东西是`Program`.

我能够让它与`Likes`带有`create`和`destroy`动作的控制器以及控制器中的自定义控制器动作 ( `like`) 一起工作`Programs`。

如果需要，我可以发布代码，但我只是好奇其中一种方法是否更好，或者两者都可以接受，这取决于我的需要。（自定义方法`programs#like`代码更少，但似乎更少 Rails-y。）

# google-apps-script - SitesApp addHostedAttachment 限制？

> ID：14324417
> 
> 赞同：0
> 
> 时间：2013-01-14T18:34:09.383
> 
> 标签：google-apps-script

我们需要在 Google 协作平台页面中托管几千张小图片（每张大约 30k）。据[我阅读](http://support.google.com/sites/bin/answer.py?hl=en&answer=96770)和理解，除了域级别的存储限制和 50MB 的最大附件大小（每个附件）之外，站点没有任何限制。

我正在从其原始主机获取图像，然后使用如下代码行将它们添加为附件（简化）

```
var page = SitesApp.getPageByUrl(SITES_PAGE_URL);
var resp = UrlFetchApp.fetch(PHOTO_URL);
var imageBlob = resp.getBlob();
var attachment = page.addHostedAttachment(imageBlob); 
```

问题是我不能添加超过 501 个图像，之后我开始发现这个有趣且具有误导性的错误：“例外：您无权执行该操作。” 在 addHostedAttachment 上

有任何想法吗 ？？（我很难受 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:36:25.313

是的，这是一个限制。每页只能托管 500 张图片。过去，我通过拥有多个带有索引的页面来克服这个问题。像page1，page2等。

# android - 记录意图保存到自定义目录/文件

> ID：14324419
> 
> 赞同：0
> 
> 时间：2013-01-14T18:34:10.593
> 
> 标签：android, android-intent

我需要这样的东西，但是对于记录意图 **(* *Intent recordIntent = new Intent( MediaRecorder recorder; ** )** ：

```
 Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
           File imagesFolder = new File(Environment.getExternalStorageDirectory(),
                "SecExPhotos");
           imagesFolder.mkdirs(); // <----
           SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
            String date = dateFormat.format(new Date());
           File image = new File(imagesFolder, date + ".jpg");
           Uri uriSavedImage = Uri.fromFile(image);
           cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,uriSavedImage);
           startActivityForResult(cameraIntent, 2); 
```

我希望它是可行的。

# ruby-on-rails-3 - Ruby on Rails - etc/hosts 配置文件

> ID：14324420
> 
> 赞同：1
> 
> 时间：2013-01-14T18:34:16.117
> 
> 标签：ruby-on-rails-3, apache, hosts

这就是我在“etc/hosts”文件中的内容：

> 127.0.0.1 本地主机
> 
> 127.0.1.1 gotqn-系统-产品-名称
> 
> 127.0.0.1 depot.yourhost.com

这就是我在 apache2.conf 文件中添加的内容：

```
<VirtualHost *:80>

   ServerName depot.yourhost.com

   DocumentRoot "/home/gotqn/Aptana Projects/depot/public/"

   <Directory "/home/gotqn/Aptana Projects/depot/public">

      AllowOverride all

      Options -MultiViews

      Order allow,deny

      Allow from all

   </Directory>

</VirtualHost> 
```

当我输入**http://localhost/**时，我的浏览器会列出“var\www”文件夹中的所有文件，当我输入**http://depot.yourhost.com/**时，它会显示以下错误：

> **我们很抱歉，但有些不对劲。**

我检查了我的 rails 应用程序的 production.log 文件，它说：

> 连接到 database.yml 指定的数据库
> 
> 在 2013-01-13 20:32:41 +0200 StoreController#index 处理为 127.0.0.1 开始 GET "/" 作为 HTML 在 3 毫秒内完成 500 内部服务器错误
> 
> ActiveRecord::StatementInvalid（找不到表'carts'）：
> app/controllers/application_controller.rb:46:in `rescue in current_cart' app/controllers/application_controller.rb:44:in` current_cart' app/controllers/store_controller.rb:11:in 'index'

我想我的数据库配置有问题，因为表存在但找不到。

无论如何，我的问题是主机文件如何知道“depot.yourhost.com”意味着打开 rails 应用程序和“localhost”确实列出了我的“var\www”文件夹 - 我认为 RoR 正在使用端口 3000。

为什么80端口没有冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:05:39.303

使用轻量级 Webrick 服务器运行时，Rails 应用程序在端口 3000 下运行。由于您使用 mod_passenger 运行 Apache，因此根据您的 Apache 配置，该应用程序将在端口 80 上可用。

hosts 文件包含一个`127.0.0.1 depot.yourhost.com`将该域名定向到本地适配器 127.0.0.1 的条目。在需要咨询名称服务器以检索名称的地址之前，应始终检查主机文件。

接下来，您的 Apache 配置包括一个`VirtualHost`正在侦听*所有*网络适配器`*`的

```
<VirtualHost *:80> 
```

您的 Apache 配置必须设置为使用基于名称的虚拟主机，然后将变量与您的请求提供的请求标头`ServerName`匹配到.`HTTP_HOST``depot.yourhost.com`

因此，您可以`VirtualHost`根据需要在同一 IP 地址上使用端口 80，Apache 将根据`HTTP_HOST`标头决定将请求路由到哪个。

`DocumentRoot`最后，mod_passenger 将通过检查您在 VirtualHost 配置中指定的目录内容来检测应用程序是否是 Ruby on Rails 应用程序。如果它找到`public`目录作为它的目录并且找到`DocumentRoot`更高级别的 RoR 应用程序，Passenger 将尝试启动 Rails 应用程序。

现在，至于为什么要从`localhost`...获取目录列表在您的 Apache 配置中的其他地方，您必须有一个`VirtualHost`与 匹配`ServerName localhost`并将其设置`DocumentRoot`为`/vart/www`.

```
<VirtualHost *:80>
  ServerName localhost
  # or...
  ServerAlias localhost
</VirtualHost> 
```

如果您看到列出的目录内容而不是`403 Forbidden`（没有类似的索引文件`index.html`），那是因为 Apache 服务器配置或`VirtualHost`配置不*包含*该指令：

```
Options -Indexes 
```

在全局中添加它`httpd.conf`以防止在服务器范围内列出目录。

# google-chrome - Chrome 不渲染空间 unicode 字形

> ID：14324422
> 
> 赞同：2
> 
> 时间：2013-01-14T18:34:21.910
> 
> 标签：google-chrome, unicode, whitespace, font-face

我正在开发一个项目，该项目需要使用单个字形字体将流文本中的空格（unicode 0020）替换为特殊字符。我在 IE9+、Firefox 和 Safari 中运行良好，但 Chrome 不正常。Opera 看起来和 Chrome 一样，但我不必支持它。

我有一个 webfont，以通常的方式使用 Font Squirrel 制作，它只定义了 unicode 0020（空格），我在这样的堆栈中使用它：

```
font-family:'My Replacement Space', arial, sans-serif; 
```

在所有可用的浏览器中，空格被替换，所有其他字符都使用 arial（或 sans-serif）作为后备来呈现。在 Chrome 中，始终使用 Arial，并且空格保持空白。

任何人都记得与 Chrome 相关的任何错误和类似的东西吗？

非常感谢！

# actionscript-3 - scrollPane AS3 内的 MovieClip

> ID：14324423
> 
> 赞同：0
> 
> 时间：2013-01-14T18:34:23.980
> 
> 标签：actionscript-3

我从我的库中将一个movieClip 加载到一个滚动窗格中，并且在那个movieclip 中有一个文本字段。如何将文本动态插入该文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:43:36.653

有一些方法可以做到这一点。第一个是如果您仍然有对该 MovieClip 的引用，那么您只需键入

```
myMovieClip.myTextField.text = "foo"; 
```

如果你没有任何参考，你可以这样做

```
myScrollPane.source.myTextField.text = "foo"; 
```

在您的情况下， myScrollPane.source 应该参考您的 MovieClip

# javascript - 如何使用 jquery 获取可见元素

> ID：14324424
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:34:38.083
> 
> 标签：javascript, jquery

嗨，我有一个隐藏的 div，在其中我有可见的跨度。如果 span 没有 display none 属性，我想提醒一些文本。

```
<head>
    <script type="text/javascript">
        $(function() {
            if($('span').is(':visible')){
                alert(0)
            }
        })
    </script>
</head>
<body>
    <div class="fa" style="display:none">
        <span>sdf</span>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:42:55.393

根据[jQuery API](http://api.jquery.com/visible-selector/)

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。

Your `<span>` is a child of a `<div>` that's hidden with `display: none` - that means neither the `<div>`, nor the `<span>` consume any space in the document.

Which means that your `<span>` is hidden and your script has no errors - it does exactly what it suppose to do.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:39:27.820

你不导入 jQuery。

`head`在你的元素中添加这个：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

请注意，HTML 文件还必须具有 HTML 开始和结束元素，最好是 doctype。以下文件有效：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(function(){
      if($('span').is(':visible')){
       alert(0)
    }})
    </script>
</head>
<body>
<div class="fa" style="display:none">
<span>sdf</span>
</div>
</body>
</html> 
```

它什么也不做，因为您的跨度位于未显示的 div 中。

现在，如果您想准确地知道您的元素是否没有直接设置样式 display=none ，请像这样测试它：

```
if ($('span').get(0).style.display!='none') { 
```

[示范](http://dystroy.org/stackoverflow/14324424.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:43:46.010

The reason your alert doesn't fire is that your `span` isn't visible. The fact that it is contained within an element that has `display: none` means that it will not be shown. If you specifically want to check if it is `display: none` itself, use `css`.

```
 if($('span').css('display') != "none"){
            alert(0)
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:45:05.530

Your problem is that the div containing the span element has display:none as property, try this [Fiddle](http://jsfiddle.net/gracedescending/qxM8h/), you just put display:hidden instead of none and the JS works.

```
<div class="fa" style="display:hidden"><span>sdf</span></div> 
```

# html - CSS 响应式菜单元素定位

> ID：14324428
> 
> 赞同：0
> 
> 时间：2013-01-14T18:34:51.353
> 
> 标签：html, css, responsive-design

我正在尝试将我的旧网站菜单更改为对移动设备友好，并且在小屏幕上如何显示“菜单元素”时遇到问题。

菜单由 3 个元素（左、中、右）组成，现在在小屏幕上，它们以相同的顺序垂直排列。

但我想知道css是否有可能让它们像这样的位置，中间保持它的位置，左右移动到它下面，还是需要更多的技巧。

如何实现？

[http://img834.imageshack.us/img834/2203/menuse.jpg](http://img834.imageshack.us/img834/2203/menuse.jpg)

编辑，添加了我曾经玩过的简化代码：

```
<div id="header">

                    <div id="Bholder">
                        <div id="AButton"></div>
                        <div id="HButton"></div>    
                        <div id="CButton"></div>    
                    </div>

                </div> 
```

CSS

```
#Bholder{
margin-left: auto;
margin-right: auto;
max-width: 750px;

}

#AButton{
float: left;
width: 250px;
height:100px;
background-color: red;
}

#CButton{
float: left;
width: 250px;
height:100px;
background-color: green;
}

#HButton{
float: left;
width: 250px;
height:100px;
background-color: yellow;

}

@media only screen and (max-width: 767px){
#Bholder{
margin-left: auto;
margin-right: auto;
max-width: 250px;

}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:33:42.710

您可以尝试将左右元素浮动到右侧，将中间元素浮动到左侧。然后使包装元素的宽度与每个元素的大小相同，以使它们在视觉上“摇晃”。

但是，是的，代码有助于了解您是如何设置菜单的。

[编辑]

```
@media only screen and (max-width: 767px){
    #Bholder{
        margin-left: auto;
        margin-right: auto;
        max-width: 250px;
        position: relative;
    }
    #AButton {
       position: absolute;
       top: 100px;
       left: 0;
    }
    #HButton {
       position: absolute;
       top: 0px;
       left: 0px;
    }
    #CButton {
       position: absolute;
       top: 200px;
       left: 0;
    }
} 
```

注意：我会把它放在`<ul>`with`<li>`而不是`div`'s 中。我会`#id`为你的 CSS 使用 classes 而不是 's。

# java - 将圆圈转换为心脏 2d android

> ID：14324429
> 
> 赞同：-4
> 
> 时间：2013-01-14T18:34:52.993
> 
> 标签：java, android, math, 2d

嗨，对不起，但我的数学和物理太弱了，所以我尝试了很多次，但每次我失败时，我都需要你的帮助来完成我的应用程序，请将此圈子转换为心

```
import android.graphics.Bitmap;
public class Circle {
float origRadius,deltaRadius,radius,origX,deltaX,x,origY,deltaY,y;
int color,alpha,steps,currentStep;
Bitmap bitmap;

public Circle(float xCenter, float yCenter, float radius,
        int color, int steps) {
    this.x = xCenter;
    this.origX = xCenter;
    this.deltaX = (float) (40.0 * Math.random() - 20.0);

    this.y = yCenter;
    this.origY = yCenter;
    this.deltaY = (float) (40.0 * Math.random() - 20.0);

    this.origRadius = radius;
    this.radius = radius;
    this.deltaRadius = 0.5f * radius;

    this.color = color;
    this.alpha = 0;

    this.steps = steps;
}

void tick() {
    this.currentStep++;

    float fraction = (float) this.currentStep / (float) this.steps;

    this.radius = this.origRadius + fraction * this.deltaRadius;
    this.x = this.origX + fraction * this.deltaX;
    this.y = this.origY + fraction * this.deltaY;

    if (fraction <= 0.25f) {
        this.alpha = (int) (128 * 4.0f * fraction);
    } else {
        this.alpha = (int) (-128 * (fraction - 1) / 0.75f);
    }
}

boolean isDone() {
    return this.currentStep > this.steps;
}
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:04:12.283

MathWorld 有一个很棒的心形函数；[http://mathworld.wolfram.com/HeartCurve.html](http://mathworld.wolfram.com/HeartCurve.html)

基本上你必须在你的代码中做这样的事情；

```
float fraction = (float) this.currentStep / (float) this.steps; 
```

-->

```
float t = this.currentStep * 2.0 * Math.PI / (float) this.steps;

this.x = 16.0 * Math.pow(Math.sin(t), 3.0));
this.y = 13.0 * Math.cos(t) - 5.0 * Math.cos(2.0 * t) -
          2.0 * Math.cos(3.0 * t) - Math.cos(4.0 * t); 
```

希望对你有帮助，我是瞎写的，如有错误请多多包涵。对于半径，您可能想做这样的事情；

```
this.x *= radius / 16.0;
this.y *= radius / 16.0; 
```

# c++ - g ++ unicode字符ifstream

> ID：14324433
> 
> 赞同：-2
> 
> 时间：2013-01-14T18:35:18.760
> 
> 标签：c++, linux, unicode, g++, ifstream

这是关于文本输入文件中的 unicode 字符的问题。[这个讨论很接近，但并不完全是答案](https://stackoverflow.com/questions/12692067/and-other-unicode-characters-in-identifiers-not-allowed-by-g)。用 VS2008 编译并在 Windows 上执行这些字符在读取时被识别（可能表示为不同的符号但已读取） - 用 g++ 编译并在 linux 上执行它们显示为空白。

```
‚ ƒ „ … † ‡ ˆ ‰ Š ‹ Œ Ž ‘ ’ “ ” • – — ˜ ™ š › œ ž Ÿ 
```

其余的 Unicode 符号似乎工作正常，我没有检查它们，但发现这组不起作用。

问题：（1）为什么？(2) 有解决办法吗？

```
void Lexicon::buildMapFromFile(string filename )  //map
{
    ifstream file;
    file.open(filename.c_str(), ifstream::binary);
    string wow, mem, key;
    unsigned int x = 0;

    while(true) {
        getline(file, wow);
        cout << wow << endl;
        if (file.fail()) break; //boilerplate check for error
        while (x < wow.length() ) {
            if (wow[x] == ',') { //look for csv deliniator
                key = mem;
                mem.clear();
                x++; //step over ','
            } else 
                mem += wow[x++];
        }

        //cout << mem << " code " << key << " is " << (key[0] - '€') << " from €" << endl;

        cout << "enter 1 to continue: ";
        while (true) {
            int choice = GetInteger();
            if (choice == 1) break;
        }

        list_map0[key] = mem; //char to string
        list_map1[mem] = key; //string to char
        mem.clear(); //reset memory
        x = 0;//reset index
    }
    //printf("%d\n", list_map0.size());
    file.close();
} 
```

unicode 符号从 csv 文件中读取并解析为 unicode 符号和关联的字符串。最初我虽然代码中有一个错误，但在[这篇文章中，审查](https://stackoverflow.com/questions/14283751/c-linux-ifstream-read-csv-file)发现它很好，我关注了如何处理字符的问题。

测试是`cout << wow << endl;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:09:25.427

您显示的字符都是 Windows 代码页 1252 中的所有字符，这些字符在 ISO-8859 1 编码中不存在。这两种编码相似，因此经常混淆。

如果输入是 CP1252 并且您正在读取它，就好像它是 ISO-8859 1 一样，那么这些字符将被读取为控制字符，并且不会像正常的可见字符那样表现。

* * *

您可能做错了很多事情来导致这种情况，但是您必须发布更多详细信息才能确定是哪一个。更完整的答案需要了解您如何读取数据、如何在内部转换和存储数据、如何测试读取的数据以及输入数据和/或编码。

* * *

您显示的代码在读取数据时不会进行任何转换，用于打印数据的注释掉的代码是相同的；没有转换。这意味着要打印数据，您只是依赖输入数据来正确运行程序的平台。这意味着，例如，如果您在 Windows 的控制台中运行程序，那么您的输入文件需要使用控制台的代码页*进行编码。

要解决问题，您可以；确保输入文件与您运行程序的特定控制台所需的编码匹配；或者指定输入编码，读取时转换为已知的内部编码，然后打印时转换为控制台编码。

[* 如果不是，例如如果控制台是 cp437 而文件是 cp1252，那么您列出的字符将改为显示为：É æ Æ ô ö ò û ù ÿ Ö Ü ¢ £ ¥ ₧ ƒ á í ó ú ñ Ñ ª º ¿ ⌐ ¬ ½ ¼ ¡ « »]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:54:49.060

您的问题陈述没有详细说明 g++ 的平台，但从您的标签看来，您正在 linux 上编译相同的代码。

Windows 和 linux 都启用了 unicode。因此，如果您在 windows/vs-2008 中的代码具有 wstring 类，那么您必须在 linux/g++ 上将其更改回字符串。如果您在 linux 中使用 wstring，它将不会以相同的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:59:58.740

C++ 代码中的 Unicode 处理并不简单，它依赖于实现（您已经看到输出在 VS2008 和 g++ 之间发生了变化）。此外，Unicode 可以通过不同的字符编码（如 UTF-8 和 UTF-16）来实现。

[本页](http://www.codeproject.com/Articles/4563/Upgrading-an-STL-based-application-to-use-Unicode)有一篇启发性的文章。它讨论了基于 STL 的软件的 Unicode 转换。对于文本 i/o，主要武器是[codecvt](http://www.cplusplus.com/reference/locale/codecvt/)，这是一个库函数，可用于在不同字符编码系统之间转换字符串。

# actionscript-3 - 带有可点击点的 Actionscript 图像

> ID：14324436
> 
> 赞同：0
> 
> 时间：2013-01-14T18:35:25.660
> 
> 标签：actionscript-3

任何人都可以帮助提出以下解决方案：

我有一个大图像，将其视为地图，我想将此图像放在比图像小的查看器中，并且我必须能够通过单击并拖动它来滚动图像。我想在这张图片中放置一个指定的 x 和 y 坐标中的可点击点，并且能够点击这些点。

单击图像中的任何点时，图像将更改为新点..等等..

你能帮忙建议什么是加载图像的最佳对象并能够完成所有提到的点吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:09:50.253

您可以在查看窗口上捕获事件 MouseDown、MouseUp、MouseMove、MouseOut，这样您就可以准确控制您想要做什么。这是伪代码：

```
reset()
{
  isDown=false;
  downPointX=0;
  downPointY=0;
  distanceX=0;
  distanceY=0;
}

onMouseDown()
{
  isDown=true;
  downPointX=mouseX;
  downPointY=mouseY;
}

onMouseUp()
{
  if(distanceX+distanceY==0 and isDown)
    click(downPointX,downPointY);
  reset();
}

onMouseMove()
{
  if isDown then
    distanceX=mouseX-downPointX;
    distanceY=mouseY-downPointY;
    drag(distanceX,distanceY);
  endif;
}

onMouseOut()
{
  reset();
} 

drag(distanceX,distanceY)
{
  change your map coordinates
}

click(downPointX,downPointY)
{
  if(inSpot(downPointX,downPointY)==true)
    changeMap();
  endif;
}

changeMap()
{
  change your maps and spots
} 
```

避免为你的点精灵实现任何事件，否则你会得到意想不到的结果。

您可以查看这些以获取更多信息 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#eventSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#eventSummary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:03:32.153

这比你想象的要容易。你有几个目标需要考虑：

1.  “我想将此图像放在比图像小的查看器中”：您不需要任何特别的东西来做到这一点。这个概念很简单，你有一个蒙版覆盖，你希望大图像可见。

    ```
    var viewer:Sprite = new Sprite;             //200x200
    var imageMask:Sprite = new Sprite;          //200x200
    var imageContainer:Sprite = new Sprite;     //400x500

    imageContainer.mask = imageMask;
    viewer.addChild(imageContainer);

    //this will allow you to visibly see only 200x200 of the 
    //imageContainer at any time 
    ```

2.  “我必须能够通过单击并拖动它来滚动图像”：这有点逻辑，因为 imageContainer 必须在鼠标的 -（负）方向上移动。添加一些侦听器以检查鼠标操作，并根据需要拖动。

    ```
    var allowDrag:Boolean = false;

    imageContainer.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
    imageContainer.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
    imageContainer.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);

    function onMouseDown(e:Event):void{
        allowDrag = true;
    }

    function onMouseUp(e:Event):void{
        allowDrag = false;
    }

    function onMouseMove(e:Event):void{

        //return if not dragging
        if(!allowDrag) return;

        //move the imageContainer in a -(negative) direction of the mouse
        //use an index relative to the size of the viewer and imageContainer
        var speed:Number = 0.5;
        imageContainer.x -= (viewer.width/imageContainer.width)*speed;
        imageContainer.y -= (viewer.height/imageContainer.height)*speed;

        //clean the positions so the image remains within the viewer
        if(imageContainer.x > 0) imageContainer.x = 0;
        if(imageContainer.x < -viewer.width) imageContainer.x = -viewer.width;
        if(imageContainer.y > 0) imageContainer.y = 0;
        if(imageContainer.y < -viewer.height) imageContainer.y = -viewer.height;
    } 
    ```

3.  “我想在这张图片中放一个可点击的点在指定的 x 和 y 坐标上，并且能够点击这些点”：这还需要多一点思考。在这种情况下，您要做的是在可单击的图像上创建 [热点]，单击时 = 执行操作。

    ```
    //USAGE

    //define the click area coords
    var clickCoords:Rectangle = new Rectangle();
    clickCoords.x = 10;         //starts at x 10
    clickCoords.y = 10;         //starts at y 10
    clickCoords.width = 100;    //100 wide
    clickCoords.height = 100;   //100 tall

    //add the click listener
    var clickArea:Sprite = hotSpot(imageContainer,clickCoords);
    clickArea.addEventListener(MouseEvent.CLICK, onHotSoptClick);

    //hot spot factory
    function hotSpot(target:Sprite,coords:Rectangle):Sprite{

        //create the hotspot
        var hs:Sprite = new Sprite;
        hs.graphics.beginFill(0,0);
        hs.graphics.drawRect(0,0,coords.width,coords.height);
        hs.graphics.endFill();

        //add the hotspot to the target
        hs.x = coords.x;
        hs.y = coords.y;
        target.addChild(hs);

    }

    function onHotSoptClick(e:MouseEvent):void{
        //do something
    } 
    ```

重要提示：您可能希望保留您创建的热点列表，以便您可以进行垃圾清理，并且您计划为每个图像动态生成热点......然后您必须保留一个活动的热点列表并在不使用时删除。

# c# - 存储 UserProfile 信息和防止每次页面加载时调用数据库的好方法

> ID：14324442
> 
> 赞同：1
> 
> 时间：2013-01-14T18:35:40.903
> 
> 标签：c#, asp.net-mvc, razor

我正在尝试创建一种将用户的配置文件信息存储在会话或缓存中的方法，并且每次加载页面时都能够在手边拥有该信息，以防止每次加载页面时调用数据库。我希望能够将其中一些值放在共享布局中（这样我就可以将用户名放在右上角等）。在我的母版页布局的顶部，我有以下内容：

```
@{  

    Domain.Entities.UserProfile user = (Domain.Entities.UserProfile)HttpContext.Current.Session[Membership.GetUser().ProviderUserKey.ToString()]; 
} 
```

我使用`user.FirstName`母版页中的值。当用户登录时，我设置了会话。有没有更好的方法来做到这一点？如果我已注销并且我只是导航到仅限成员的页面，`[Authorize]`则会绕过过滤器并收到错误消息`Object reference not set to an instance of an object.`，因为我的用户配置文件尚未存储在会话中。我不会在会话中存储任何敏感信息，如 UserId 或任何东西，只是用户名、个人资料图片 url 等。我觉得可能有更好的方法来完成这样的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:37:27.990

您可以创建一个静态类作为接口来获取用户属性，这些属性将存储在会话状态中。

```
public class UserData{

    public static Domain.Entities.UserProfile GetUser(){
        string username;
        try{
            username = Membership.GetUser().ProviderUserKey.ToString();
        }catch(Exception e){
            //  just in case
            throw new AuthenticationException("The user isn't authenticated!");
        }

        var user = HttpContext.Current.Session[username] as Domain.Entities.UserProfile;
        if(user == null){
            user = //   get data from database
            HttpContext.Current.Session[username] = user;
        }
        return user;
    }
} 
```

然后，在您的方法中，您可以像这样使用它：

```
if (User.Identity.IsAuthenticated)
{
    UserProfile user = UserData.GetUser();

    //Your code goes here, no way user data is null.
} 
```

或在控制器中：

```
[Authorize]
public ActionResult Index(){

    UserProfile user = UserData.GetUser();

    return //stuff
} 
```

注意：我在无法测试的情况下做了这个，但我希望你明白这一点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:03:53.497

您可以将您的用户信息存储在身份验证 cookie 中。请记住，每次请求都会从客户端来回发送 cookie。因此，如果要存储大量信息，那可能不是正确的方法。

查看本文档的第 4 步，该步骤解释了如何在 cookie 中存储其他用户数据[http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics- CS](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-cs)

然后在你的母版页中，你可以有这样的东西

```
@{  

if (User.Identity.IsAuthenticated)
{
    //Your code goes here, no way user data is null.
} 
```

# wpf - 某些而不是其他的 WPF UserControl 属性绑定

> ID：14324446
> 
> 赞同：1
> 
> 时间：2013-01-14T18:35:51.930
> 
> 标签：wpf, binding

我的 xaml 中有以下三个项目，它们的可见性根据位于页面的 DataContext 中的布尔属性而改变。

```
<worklist:PhysicianQuickInsert Visibility="{Binding IsInsertingPhysician, Converter={StaticResource NullEmptyFalseToInvisibileConverter}}" />
<shared:LoadingIndicator Visibility="{Binding IsInsertingPhysician, Converter={StaticResource NullEmptyFalseToInvisibileConverter}}" />
<TextBlock Text="Test" Foreground="Red" Visibility="{Binding IsInsertingPhysician, Converter={StaticResource NullEmptyFalseToInvisibileConverter}}" /> 
```

TextBlock 和 LoadingIndicator 变得可见/折叠，但 PhysicianQuickInsert 没有做任何事情。

我已经验证了永远不会为 PhysicianQuickInsert 检索布尔属性的 getter。

为什么会发生这种情况？PhysicianQuickInsert 是一个用户控件，LoadingIndicator 也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:41:48.900

如果您`Visibility`在`UserControl`. 如果你已经这样做了，你可能需要确保它[默认是双向绑定的](https://stackoverflow.com/a/3887243/65358)，有一个合适的设置器等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:50:59.670

在对我的回答发表评论之后，这个问题是该用户控件绑定到其中的另一个数据上下文（不同类型）。我添加了一个 RelativeSource 并且它起作用了。

谢谢大家！

# android - 根据按钮保持时间开始活动

> ID：14324447
> 
> 赞同：0
> 
> 时间：2013-01-14T18:36:01.123
> 
> 标签：android, android-layout, android-widget

我正在开发一个应用程序，其中 UI 中有几个按钮，当用户单击一个按钮时，首先会听到音频输出，如果用户继续按住按钮，则会根据用户按住的按钮启动另一个活动. 我已经了解了音频输出，但不知道如何实现按钮保持动作。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:39:07.280

有[on click listener](http://developer.android.com/reference/android/view/View.OnClickListener.html)和[on long click listener](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)，两者都可以注册在一个按钮上。也许在点击时播放音频并在长按时开始活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:26:57.403

```
 Button button=(Button) findViewById(R.id.call);
    button.setOnLongClickListener(new OnLongClickListener() {

        public boolean onLongClick(View v) {
            // Start a new Activity     
            return false;
        }
    });

    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

         // Play the Audio
        }
    }); 
```

# java - 在 Java 中解析平面文件

> ID：14324450
> 
> 赞同：4
> 
> 时间：2013-01-14T18:36:14.780
> 
> 标签：java, file-handling

我有一个平面文件，其中数据以基于位置的格式存储例如。从**1 到 5** - 存储一些**x**值，从**6 到 13** - 存储一些**y**值，从**14 到 18** - 存储一些**z**值等等。我需要解析文件并获取这些值并填充豆。

谁能告诉我我能做的最好的方法是如何解析文件。我使用的是 Java 6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:59:45.593

非复杂的、固定长度的行在普通 java 中应该很容易。

为什么不只使用普通的基本子字符串？我已经看到它用于解析相当大的平面文件，它并不像听起来那么糟糕。也很容易从中获得概述。

```
myObject.setX(Integer.parseInt(input.substring(0,4)));
myObject.setY(input.substring(5,12); 
.. 
```

如果您真的很认真地将几个大型平面文件映射到 java，您可能想要使用一些库。

[Smooks](http://www.smooks.org)让您在 XML 文件中指定映射，并让 smooks 运行时映射从字段到对象。还有一个用于图形映射的 Eclipse IDE。这个库有点重量级。

我真的很喜欢[Apache Camel中的](http://camel.apache.org)[Bindy](http://camel.apache.org/bindy.html)组件。它需要引入消息路由器的开销，但是可以注释普通的 java 类，并且一次完成映射和 java 类。

```
// Like this
@FixedLengthRecord(length=54, paddingChar=' ')
public static class Order {

    @DataField(pos = 1, length=2)
    private int orderNr;

    @DataField(pos = 3, length=2)
    private String clientNr; 
```

# angularjs - angular.service 与 angular.factory

> ID：14324451
> 
> 赞同：1078
> 
> 时间：2013-01-14T18:36:41.180
> 
> 标签：angularjs, angular-services

我见过[angular.factory()](http://docs.angularjs.org/guide/dev_guide.services.creating_services)和[angular.service()](http://briantford.com/blog/huuuuuge-angular-apps.html)都用于声明服务；但是，我在官方文档中[找不到任何地方。](http://briantford.com/blog/huuuuuge-angular-apps.html) `angular.service`

这两种方法有什么区别？
哪个应该用于什么（假设他们做不同的事情）？

* * *

## 回答 #1

> 赞同：1275
> 
> 时间：2014-02-20T06:46:54.690

```
 angular.service('myService', myServiceFunction);
  angular.factory('myFactory', myFactoryFunction); 
```

* * *

在我这样说之前，我很难理解这个概念：

**服务**：您编写的*功能*将是**新的**：

```
 myInjectedService  <----  new myServiceFunction() 
```

**工厂**：将**调用**您编写的*函数*（构造函数） ：

 **```
 myInjectedFactory  <---  myFactoryFunction() 
```

你用它做什么取决于你，但有一些有用的模式......

### 比如写一个*服务*函数来暴露一个公共的API：

```
function myServiceFunction() {
  this.awesomeApi = function(optional) {
    // calculate some stuff
    return awesomeListOfValues;
  }
}
---------------------------------------------------------------------------------
// Injected in your controller
$scope.awesome = myInjectedService.awesomeApi(); 
```

### 或者使用*工厂*函数来公开公共 API：

```
function myFactoryFunction() {
  var aPrivateVariable = "yay";

  function hello() {
    return "hello mars " + aPrivateVariable;
  }

  // expose a public API
  return {
    hello: hello
  };
}
---------------------------------------------------------------------------------
// Injected in your controller
$scope.hello = myInjectedFactory.hello(); 
```

### 或者使用*工厂*函数返回构造函数：

```
function myFactoryFunction() {
    return function() {
        var a = 2;
        this.a2 = function() {
            return a*2;
        };
    };
}
---------------------------------------------------------------------------------
// Injected in your controller
var myShinyNewObject = new myInjectedFactory();
$scope.four = myShinyNewObject.a2(); 
```

* * *

### 用哪一个？...

你可以用两者来完成同样的事情。但是，在某些情况下，*工厂*为您提供了更多的灵活性来创建具有更简单语法的可注入对象。这是因为 myInjectedService 必须始终是对象，而 myInjectedFactory 可以是对象、函数引用或任何值。例如，如果您编写了一个服务来创建一个构造函数（如上面的最后一个示例），则必须像这样实例化它：

```
var myShinyNewObject = new myInjectedService.myFunction() 
```

可以说这比这更不可取：

```
var myShinyNewObject = new myInjectedFactory(); 
```

（但是您首先应该警惕使用这种类型的模式，因为控制器中的*新*对象会创建难以跟踪的依赖项，这些依赖项很难模拟以进行测试。最好让服务管理对象集合以用于你比`new()`狡猾地使用。）

* * *

### 还有一件事，他们都是单身人士......

还要记住，在这两种情况下，角度都可以帮助您管理单例。无论您在何处或多少次注入您的服务或函数，您都将获得对同一对象或函数的相同引用。（工厂只返回一个数字或字符串之类的值除外。在这种情况下，您将始终获得相同的值，但不是引用。）

* * *

## 回答 #2

> 赞同：319
> 
> 时间：2014-01-08T02:05:28.027

简单的说 ..

```
const user = {
  firstName: 'john'
};

// Factory
const addLastNameFactory = (user, lastName) => ({
  ...user,
  lastName,
});

console.log(addLastNameFactory(user, 'doe'));

// Service
const addLastNameService = (user, lastName) => {
  user.lastName = lastName; // BAD! Mutation
  return user;
};

console.log(addLastNameService(user, 'doe'));
```

* * *

## 回答 #3

> 赞同：247
> 
> 时间：2013-04-09T23:18:52.037

以下是主要区别：

## 服务

句法：`module.service( 'serviceName', function );`

结果：当将 serviceName 声明为可注入参数时，您将获得传递给**的函数实例**`module.service`。

用法：对于**共享实用函数**很有用，这些实用函数只需附加`( )`到注入的函数引用即可调用。也可以运行`injectedArg.call( this )`或类似。

## 工厂

句法：`module.factory( 'factoryName', function );`

结果：当将 factoryName 声明为可注入参数时，您将获得通过调用传递给**的函数引用返回的值**`module.factory`。

用法：对于返回一个**“类”**函数可能很有用，然后可以新建该函数以创建实例。

这是[使用 services 和 factory 的示例](http://jsfiddle.net/manishchhabra/Ne5P8/)。阅读有关[AngularJS 服务与工厂](http://blog.manishchhabra.com/2013/09/angularjs-service-vs-factory-with-example/)的更多信息。

您还可以在 stackoverflow 上查看[AngularJS 文档](http://docs.angularjs.org/guide/dev_guide.services.creating_services)和类似问题，[对 service vs factory 感到困惑](https://stackoverflow.com/questions/13762228/confused-about-service-vs-factory)。

* * *

## 回答 #4

> 赞同：139
> 
> 时间：2014-05-14T16:14:30.623

**TL;DR**

**1)**当你使用**工厂**时，你创建一个对象，向它添加属性，然后返回同一个对象。当您将此工厂传递给您的控制器时，对象上的这些属性现在将通过您的工厂在该控制器中可用。

```
app.controller('myFactoryCtrl', function($scope, myFactory){
  $scope.artist = myFactory.getArtist();
});

app.factory('myFactory', function(){
  var _artist = 'Shakira';
  var service = {};

  service.getArtist = function(){
    return _artist;
  }

  return service;
}); 
```

**2)**当您使用**Service**时，Angular 会在后台使用 'new' 关键字对其进行实例化。因此，您将向“this”添加属性，服务将返回“this”。当您将服务传递到您的控制器时，“this”上的那些属性现在将通过您的服务在该控制器上可用。

```
app.controller('myServiceCtrl', function($scope, myService){
  $scope.artist = myService.getArtist();
});

app.service('myService', function(){
  var _artist = 'Nelly';
  this.getArtist = function(){
    return _artist;
  }
}); 
```

**非 TL;DR**

**1) 工厂**
工厂是最流行的创建和配置服务的方式。没有什么比 TL;DR 所说的更多了。您只需创建一个对象，为其添加属性，然后返回相同的对象。然后，当您将工厂传递给您的控制器时，对象上的这些属性现在将通过您的工厂在该控制器中可用。下面是一个更广泛的示例。

```
app.factory('myFactory', function(){
  var service = {};
  return service;
}); 
```

现在，当我们将“myFactory”传递给我们的控制器时，我们附加到“服务”的任何属性都将可供我们使用。

现在让我们在回调函数中添加一些“私有”变量。这些将无法从控制器直接访问，但我们最终会在“服务”上设置一些 getter/setter 方法，以便能够在需要时更改这些“私有”变量。

```
app.factory('myFactory', function($http, $q){
  var service = {};
  var baseUrl = 'https://itunes.apple.com/search?term=';
  var _artist = '';
  var _finalUrl = '';

  var makeUrl = function(){
   _artist = _artist.split(' ').join('+');
    _finalUrl = baseUrl + _artist + '&callback=JSON_CALLBACK';
    return _finalUrl
  }

  return service;
}); 
```

在这里，您会注意到我们没有将这些变量/函数附加到“服务”。我们只是创建它们以便以后使用或修改它们。

*   baseUrl 是 iTunes API 需要的基本 URL
*   _artist 是我们要查找的艺术家
*   _finalUrl 是我们将调用 iTunes 的最终且完全构建的 URL makeUrl 是一个将创建并返回我们的 iTunes 友好 URL 的函数。

现在我们的辅助/私有变量和函数已经到位，让我们为“服务”对象添加一些属性。无论我们在“服务”上放置什么，我们都可以直接在我们将“myFactory”传入的任何控制器中使用。

我们将创建简单地返回或设置艺术家的 setArtist 和 getArtist 方法。我们还将创建一个方法，该方法将使用我们创建的 URL 调用 iTunes API。此方法将返回一个承诺，一旦数据从 iTunes API 返回，该承诺将履行。如果你没有太多在 Angular 中使用 Promise 的经验，我强烈建议你深入研究它们。

下面的**setArtist**接受一个艺术家并允许您设置艺术家。**getArtist**返回艺术家 callItunes 首先调用 makeUrl() 以构建我们将在 $http 请求中使用的 URL。然后它设置一个promise对象，用我们的最终url发出一个$http请求，然后因为$http返回一个promise，我们可以在请求之后调用.success或.error。然后我们用 iTunes 数据解决我们的承诺，或者我们拒绝它并显示一条消息说“有一个错误”。

```
app.factory('myFactory', function($http, $q){
  var service = {};
  var baseUrl = 'https://itunes.apple.com/search?term=';
  var _artist = '';
  var _finalUrl = '';

  var makeUrl = function(){
    _artist = _artist.split(' ').join('+');
    _finalUrl = baseUrl + _artist + '&callback=JSON_CALLBACK'
    return _finalUrl;
  }

  service.setArtist = function(artist){
    _artist = artist;
  }

  service.getArtist = function(){
    return _artist;
  }

  service.callItunes = function(){
    makeUrl();
    var deferred = $q.defer();
    $http({
      method: 'JSONP',
      url: _finalUrl
    }).success(function(data){
      deferred.resolve(data);
    }).error(function(){
      deferred.reject('There was an error')
    })
    return deferred.promise;
  }

  return service;
}); 
```

现在我们的工厂已经完工。我们现在可以将“myFactory”注入任何控制器，然后我们就可以调用我们附加到服务对象的方法（setArtist、getArtist 和 callItunes）。

```
app.controller('myFactoryCtrl', function($scope, myFactory){
  $scope.data = {};
  $scope.updateArtist = function(){
    myFactory.setArtist($scope.data.artist);
  };

  $scope.submitArtist = function(){
    myFactory.callItunes()
      .then(function(data){
        $scope.data.artistData = data;
      }, function(data){
        alert(data);
      })
  }
}); 
```

在上面的控制器中，我们注入了“myFactory”服务。然后，我们在 $scope 对象上设置来自“myFactory”数据的属性。上面唯一棘手的代码是如果您以前从未处理过承诺。因为 callItunes 返回了一个 Promise，所以我们可以使用 .then() 方法，并且只有在我们的 Promise 与 iTunes 数据一起实现时才设置 $scope.data.artistData。您会注意到我们的控制器非常“薄”。我们所有的逻辑和持久数据都位于我们的服务中，而不是我们的控制器中。

**2) 服务**
在处理创建服务时，最重要的事情可能是它是用“new”关键字实例化的。对于您的 JavaScript 专家，这应该会给您一个关于代码性质的重要提示。对于那些 JavaScript 背景有限或不太熟悉“new”关键字实际作用的人，让我们回顾一些 JavaScript 基础知识，这些基础知识最终将帮助我们理解服务的本质。

要真正看到使用“new”关键字调用函数时发生的变化，让我们创建一个函数并使用“new”关键字调用它，然后让我们展示解释器在看到“new”关键字时会做什么。最终结果将是相同的。

首先让我们创建我们的构造函数。

```
var Person = function(name, age){
  this.name = name;
  this.age = age;
} 
```

这是一个典型的 JavaScript 构造函数。现在，每当我们使用“new”关键字调用 Person 函数时，“this”都会绑定到新创建的对象。

现在让我们在 Person 的原型上添加一个方法，这样它就可以在我们的 Person“类”的每个实例上使用。

```
Person.prototype.sayName = function(){
  alert('My name is ' + this.name);
} 
```

现在，因为我们将 sayName 函数放在原型上，所以 Person 的每个实例都可以调用 sayName 函数以提醒该实例的名称。

现在我们的原型上已经有了 Person 构造函数和 sayName 函数，让我们实际创建一个 Person 实例然后调用 sayName 函数。

```
var tyler = new Person('Tyler', 23);
tyler.sayName(); //alerts 'My name is Tyler' 
```

因此，用于创建 Person 构造函数、向其原型添加函数、创建 Person 实例，然后在其原型上调用函数的所有代码看起来像这样。

```
var Person = function(name, age){
  this.name = name;
  this.age = age;
}
Person.prototype.sayName = function(){
  alert('My name is ' + this.name);
}
var tyler = new Person('Tyler', 23);
tyler.sayName(); //alerts 'My name is Tyler' 
```

现在让我们看看在 JavaScript 中使用“new”关键字时实际发生了什么。您应该注意到的第一件事是，在我们的示例中使用 'new' 之后，我们能够在 'tyler' 上调用方法（sayName），就好像它是一个对象一样——因为它是。所以首先，我们知道我们的 Person 构造函数正在返回一个对象，无论我们是否可以在代码中看到它。其次，我们知道因为我们的 sayName 函数位于原型上而不是直接位于 Person 实例上，所以 Person 函数返回的对象必须在查找失败时委托给它的原型。更简单地说，当我们调用 tyler.sayName() 时，解释器会说“好的，我要查看我们刚刚创建的 'tyler' 对象，找到 sayName 函数，然后调用它。等一下，我在这里看不到——我看到的只是名字和年龄，让我检查一下原型。是的，看起来它在原型上，让我称之为。”。

下面是如何思考“new”关键字在 JavaScript 中实际作用的代码。它基本上是上一段的代码示例。我已经放置了“解释器视图”或解释器在注释中查看代码的方式。

```
var Person = function(name, age){
  //The line below this creates an obj object that will delegate to the person's prototype on failed lookups.
  //var obj = Object.create(Person.prototype);

  //The line directly below this sets 'this' to the newly created object
  //this = obj;

  this.name = name;
  this.age = age;

  //return this;
} 
```

现在了解了 'new' 关键字在 JavaScript 中的真正作用，在 Angular 中创建服务应该更容易理解。

创建服务时要了解的最重要的事情是知道服务是使用“新”关键字实例化的。将这些知识与我们上面的示例相结合，您现在应该认识到您将直接将属性和方法附加到“this”，然后将从服务本身返回。让我们来看看这个实际操作。

与我们最初对 Factory 示例所做的不同，我们不需要创建一个对象然后返回该对象，因为就像之前多次提到的那样，我们使用了 'new' 关键字，因此解释器将创建该对象，让它委托给它是原型，然后将其返回给我们，而无需我们进行工作。

首先，让我们创建我们的“私有”和辅助函数。这看起来应该很熟悉，因为我们对我们的工厂做了完全相同的事情。我不会在这里解释每一行的作用，因为我在工厂示例中做过，如果您感到困惑，请重新阅读工厂示例。

```
app.service('myService', function($http, $q){
  var baseUrl = 'https://itunes.apple.com/search?term=';
  var _artist = '';
  var _finalUrl = '';

  var makeUrl = function(){
    _artist = _artist.split(' ').join('+');
    _finalUrl = baseUrl + _artist + '&callback=JSON_CALLBACK'
    return _finalUrl;
  }
}); 
```

现在，我们将把控制器中可用的所有方法附加到“this”。

```
app.service('myService', function($http, $q){
  var baseUrl = 'https://itunes.apple.com/search?term=';
  var _artist = '';
  var _finalUrl = '';

  var makeUrl = function(){
    _artist = _artist.split(' ').join('+');
    _finalUrl = baseUrl + _artist + '&callback=JSON_CALLBACK'
    return _finalUrl;
  }

  this.setArtist = function(artist){
    _artist = artist;
  }

  this.getArtist = function(){
    return _artist;
  }

  this.callItunes = function(){
    makeUrl();
    var deferred = $q.defer();
    $http({
      method: 'JSONP',
      url: _finalUrl
    }).success(function(data){
      deferred.resolve(data);
    }).error(function(){
      deferred.reject('There was an error')
    })
    return deferred.promise;
  }

}); 
```

现在就像在我们的工厂中一样，setArtist、getArtist 和 callItunes 将在我们将 myService 传递到的任何控制器中可用。这是 myService 控制器（与我们的工厂控制器几乎完全相同）。

```
app.controller('myServiceCtrl', function($scope, myService){
  $scope.data = {};
  $scope.updateArtist = function(){
    myService.setArtist($scope.data.artist);
  };

  $scope.submitArtist = function(){
    myService.callItunes()
      .then(function(data){
        $scope.data.artistData = data;
      }, function(data){
        alert(data);
      })
  }
}); 
```

就像我之前提到的，一旦你真正理解了“新”的作用，Services 几乎与 Angular 中的工厂相同。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2014-12-18T11:48:51.320

# 线索就在名字里

服务和工厂彼此相似。两者都会产生一个可以注入其他对象的单例对象，因此通常可以互换使用。

它们旨在在语义上用于实现不同的设计模式。

## 服务用于实现服务模式

服务模式是一种将您的应用程序分解为逻辑一致的功能单元的模式。一个示例可能是 API 访问器或一组业务逻辑。

这在 Angular 中尤为重要，因为 Angular 模型通常只是从服务器中提取的 JSON 对象，因此我们需要在某个地方放置我们的业务逻辑。

以 Github 服务为例。它知道如何与 Github 对话。它知道 url 和方法。我们可以将它注入到控制器中，它会生成并返回一个 Promise。

```
(function() {
  var base = "https://api.github.com";

  angular.module('github', [])
    .service('githubService', function( $http ) {
      this.getEvents: function() {
        var url = [
          base,
          '/events',
          '?callback=JSON_CALLBACK'
        ].join('');
        return $http.jsonp(url);
      }
    });
  )(); 
```

## 工厂实现工厂模式

另一方面，工厂旨在实现工厂模式。一种工厂模式，我们使用工厂函数来生成对象。通常我们可能会使用它来构建模型。这是一个返回 Author 构造函数的工厂：

```
angular.module('user', [])
  .factory('User', function($resource) {
    var url = 'http://simple-api.herokuapp.com/api/v1/authors/:id'
    return $resource(url);
  }) 
```

我们会像这样使用它：

```
angular.module('app', ['user'])
  .controller('authorController', function($scope, User) {
    $scope.user = new User();
  }) 
```

请注意，工厂也返回单例。

## 工厂可以返回一个构造函数

因为工厂只返回一个对象，所以它可以返回您喜欢的任何类型的对象，包括构造函数，正如我们在上面看到的。

## 工厂返回一个对象；服务是新的

另一个技术差异是服务和工厂的组成方式。将新建一个服务函数来生成对象。工厂函数将被调用并返回对象。

*   服务是新的构造函数。
*   工厂被简单地调用并返回一个对象。

这意味着在服务中，我们附加到“this”，在构造函数的上下文中，它将指向正在构建的对象。

为了说明这一点，下面是使用服务和工厂创建的同一个简单对象：

```
angular.module('app', [])
  .service('helloService', function() {
    this.sayHello = function() {
      return "Hello!";
    }
  })
  .factory('helloFactory', function() {
    return {
      sayHello: function() {
        return "Hello!";
      }
    }
  }); 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2015-12-10T12:55:34.330

这里的所有答案似乎都与服务和工厂有关，这是有效的，因为这是被问到的。但同样重要的是要记住还有其他几个，包括`provider()`、`value()`和`constant()`。

要记住的关键是每个都是另一个的特殊情况。每个特殊情况都允许您用更少的代码做同样的事情。每一个也有一些额外的限制。

要决定何时使用哪个，您只需查看哪个允许您用更少的代码做您想做的事。这是一张图片，说明了它们的相似程度：

[![在此处输入图像描述](../Images/45efa66223a7f0092054ad6ad87c629d.png)](http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/)

有关何时使用每个的完整分步细分和快速参考，您可以访问我从中获得此图像的博客文章：

[http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/](http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/)

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2014-06-27T00:17:34.073

### app.factory('fn', fn) 与 app.service('fn',fn)

**建造**

对于工厂，Angular 将调用该函数来获取结果。它是被缓存和注入的结果。

```
 //factory
 var obj = fn();
 return obj; 
```

对于服务，Angular 将通过调用*new*来调用构造函数。构造函数被缓存和注入。

```
 //service
  var obj = new fn();
  return obj; 
```

**执行**

工厂通常返回一个对象字面量，因为返回值*是*注入控制器、运行块、指令等的内容

```
 app.factory('fn', function(){
         var foo = 0;
         var bar = 0;
         function setFoo(val) {
               foo = val;
         }
         function setBar (val){
               bar = val;
         }
         return {
                setFoo: setFoo,
                serBar: setBar
         }
  }); 
```

服务函数通常不返回任何内容。相反，它们执行初始化并公开功能。函数也可以引用“this”，因为它是使用“new”构造的。

```
app.service('fn', function () {
         var foo = 0;
         var bar = 0;
         this.setFoo = function (val) {
               foo = val;
         }
         this.setBar = function (val){
               bar = val;
         }
}); 
```

**结论**

在使用工厂或服务方面，它们都非常相似。它们被注入到控制器、指令、运行块等中，并以几乎相同的方式在客户端代码中使用。它们也是单例 - 这意味着在注入服务/工厂的所有位置之间共享相同的实例。

那么你应该更喜欢哪个？任何一个 - 它们是如此相似，以至于差异微不足道。如果您确实选择了另一个，请注意它们的构造方式，以便您可以正确实施它们。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-03-10T15:04:24.847

我花了一些时间试图找出差异。

而且我认为工厂函数使用模块模式，服务函数使用标准的java脚本构造函数模式。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-06T14:54:33.470

工厂模式更灵活，因为它可以返回函数和值以及对象。

恕我直言，服务模式没有太多意义，因为它所做的一切都可以像工厂一样轻松地完成。例外情况可能是：

*   如果您出于某种原因关心实例化服务的声明类型 - 如果您使用服务模式，您的构造函数将是新服务的类型。
*   如果您已经有一个在其他地方使用的构造函数，您也想将其用作服务（尽管如果您想向其中注入任何东西，可能没有多大用处！）。

可以说，从语法的角度来看，服务模式是一种*更好的创建新对象的方法，但实例化的成本也更高。*其他人表示 Angular 使用“new”来创建服务，但这并不完全正确——它无法做到这一点，因为每个服务构造函数都有不同数量的参数。Angular 实际上所做的是在内部使用工厂模式来包装您的构造函数。然后它会做一些巧妙的玩弄游戏来*模拟*javascript 的“new”操作符，使用可变数量的可注入参数调用您的构造函数 - 但如果您直接使用工厂模式，则可以省略这一步，从而略微提高您的效率代码。**

# javascript - 在使用 localstorage 验证的 HTML 联系表单上返回 NULL 值

> ID：14324452
> 
> 赞同：0
> 
> 时间：2013-01-14T18:36:44.603
> 
> 标签：javascript, html, local-storage

我有 HTML 格式的标准联系表格：

```
<input type="text" class="text" value="" name="username" id="username" /> 
```

为了在发生错误时返回值，我使用了 localstorage：

```
$(document).ready(function() {

var item = window.localStorage.getItem('username');
$('input[name=username]').val(item);
$('input[name=username]').change(function() {
   window.localStorage.setItem('username', $(this).val());
}); 
```

问题出在 Internet Explorer 中。当我第一次使用联系表单打开我的页面时，所有字段的值都名为“NULL”。有没有办法让我删除它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:42:22.230

检查该值是否`null`在设置之前使用`.val()`?

```
if ( item !== null ) $('input[name=username]').val(item); 
```

# perl - Perl：测试类是否存在

> ID：14324453
> 
> 赞同：4
> 
> 时间：2013-01-14T18:36:44.807
> 
> 标签：perl, oop

我有一个名为 Question 的类，以及一堆取决于问题类型的子类。我可以针对子类创建对象，但我不应该能够创建类*Question*本身的对象：

```
#! /usr/bin/env perl

use strict;
use warnings;

#
# LOAD IN YOUR QUESTIONS HERE
#

my @list_of_questions;
for my $question_type qw(Science Math English Dumb) {
    my $class = "Question::$question_type";
    my $question = $class->new;
    push @list_of_questions, $question;
}

package Question;
use Carp;

sub new {
    my $class = shift;

    my $self = {};

    if ( $class = eq "Question" ) {
       carp qq(Need to make object a sub-class of "Question");
       return;
    }

    bless $self, $class;
    return $self;
}
yadda, yadda, yadda...

package Question::Math;
use parent qw(Question);
yadda, yadda, yadda...

package Question::Science;
use parent qw(Question);
yadda, yadda, yadda...

package Question::English;
use parent qw(Question);
yadda, yadda, yadda... 
```

请注意，这些不是模块，而只是我定义的要在我的程序中使用的类。因此，我无法在运行时测试模块加载。

当我运行上述内容时，我得到：

> `Can't locate object method "new" via package "Question::Dumb" (perhaps you forgot to load "Question::Dumb"?)`

有什么办法可以捕捉到这个特定的错误，所以我可以自己处理吗？我知道我可以创建一个有效类型的数组，但我希望能够以某种方式添加新的问题类型，而不必记住更新我的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:58:42.590

AFAICT 您想要做的是检查符号表以查看您的“类”（又名“包”）是否已定义。手动操作并不困难，但是 Class::Load 提供了更易读的糖并应用了“启发式”——不管这意味着什么。如果您不想使用此模块，那么 is_class_loaded 的源代码将引导您找到您实际寻求的任何答案。

```
use Class::Load qw(is_class_loaded);

for my $question_type (qw(Math English Science Dumb)) {
   my $class = "Question::$question_type";
   if(!is_class_loaded($class)) {
         # construct your new package at runtime, then
   }

   new_question($class);

} 
```

你的变量名（“class_type”）很奇怪，所以我修复了它。我也不知道 Module::Load 是否更好，但我们在工作中使用 Class::Load 。

编辑：裸 qw()s 在较新的 Perls 之一（5.14？）中已被弃用。这是一个愚蠢的弃用，但它就在那里，所以我们现在都必须学会将我们的 qw() foreachs 包装在括号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:04:24.667

这是我最终所做的：

```
package Question;
use Carp;

sub new {
    my $class = shift;
    my %params = @_;

    #
    # Standardize the Parameters
    # Remove the dash, double-dash in front of the parameter and
    # lowercase the name. Thus, -Question, --question, and question
    # are all the same parameter.
    #

    my %option_hash;

    my $question_type;
    for my $key (keys %params) {

        my $value = $params{$key};

        $key =~ s/^-*//;    #Remove leading dashes
        $key = ucfirst ( lc $key ); #Make Key look like Method Name

        if ( $key eq "Type" ) {
            $question_type = ucfirst (lc $value);
        }
        else {
            $option_hash{$key} = $value;
        }
    }

    if ( not defined $question_type ) {
        carp qq(Parameter "type" required for creating a new question.);
        return;
    } 

    #
    # The real "class" of this question includes the question type
    #

    my $self = {};
    $class .= "::$question_type";
    bless $self, $class;

    #
    # All _real does is return a _true_ value. This method is in this
    # class, so all sub-classes automatically inherit it. If the eval
    # fails, this isn't a subclass, or someone wrote their own `_real_
    # method in their sub-class.
    #

    eval { $self->_real; };
    if ( $@ ) {
        carp qq(Invalid question type of $question_type);
        return;
    }

    #
    # Everything looks good! Let's fill up our question object
    #

    for my $method ( keys %option_hash ) {
        my $method_set;
        eval { $method_set = $self->$method( $option_hash{$method} ) };
        if ( $@ or not $method_set ) {
            carp qq(Can't set "$method" for question type "$question_type");
            return;
        }
    }

    return $self;
} 
```

现在，我这样设置我的问题：

```
my $question = Question->new(
    --type     => Integer,
    --question => "Pick a number between 1 and 10.",
    --help     => "Try using the top row of your keyboard...",
    --from     => "1",
    --to       => "10",
);

if ( not defined $question ) {
    die qq(The question is invalid!);
} 
```

[Darch](https://stackoverflow.com/a/14387481/368630)的使用`Try::Tiny`很好。它看起来比将所有内容都包装在`eval`. 不幸的是，它不是标准模块。这个程序在近 100 个独立的系统上运行，使用 CPAN 模块太难了。尤其如此，因为这些系统位于防火墙后面，无法访问 CPAN 网站。

我基本上使用 Darch 的方法，除了我`_real`在我的超类中创建一个方法，我在祝福对象后尝试。如果它执行（这就是我真正关心的），那么这是我的超类的子类。

这就是我真正想要的：将我的子类隐藏在我的超类后面——就像这样`File::Spec`做一样。我的大多数类都有相同的方法，少数有一两个额外的方法。例如，我的 Regex 问题类型有一个 Pattern 方法，它允许我确保给出的答案与给定的模式匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:23:38.237

`Invalid::Class->new()`您不能在调用代码中使用不抛出异常之类的表达式，但您可以将其包装在异常处理中并将其包装在方法中。标准模式是提供一个“类型”参数来描述您要为工厂方法创建的子类。一个常见的反模式是将工厂方法放在基类上，创建循环依赖，并且必须做比应有的工作更多的工作。

通常在接口类上有工厂方法并让它构造一个不相关的专用基类的子类，当它失败时可能会发出警告或抛出。在代码中，看起来很像这样：

```
package Question;

use Try::Tiny;
use Carp qw/carp/;

sub new {
    my ($class, $type, @args) = @_;

    # could do some munging on $type to make it a class name here
    my $real_class = "Question::$type";

    return try {
        $real_class->new(@args);
    } catch {
        # could differentiate exception types here
        carp qq(Invalid Question type "$type");
    };
}

package Question::Base;

sub new {
    my ($class) = @_;

    return bless {} => $class;
}

package Question::Math;
use base 'Question::Base'; # `use parent` expects to load a module

package main;

use Test::More tests => 2;
use Test::Warn;

isa_ok(Question->new('Math'), 'Question::Math');
warning_like(
    sub { Question->new('Dumb') }, # I hear there's no such thing
    qr/^Invalid Question/
); 
```

# html - 每个页面的索引文件是设置站点的错误方法吗？

> ID：14324454
> 
> 赞同：0
> 
> 时间：2013-01-14T18:36:52.013
> 
> 标签：html, seo

我的目标是防止用户必须输入 .html 才能访问他们在我们网站上寻找的页面。在其他网站上，我将文件名保留为 /pagename.html，用户只能输入 /pagename 并且页面会加载。出于某种原因，我们的服务器设置（GoDaddy Plesk Parallel 服务器）无法做到这一点，所以我的解决方法是为我想要的每个页面创建一个文件夹，实际文件是 /index.html。我的目标已经完成，现在用户不必包含 .html 来加载页面。现在的问题是 Google 和 SEOmoz 的报告正在阅读大量重复的内容。原因是用户可以输入 3 种不同的内容来访问同一页面 - 如果包含“www”，从技术上讲是 6 种：

sitename.com/services
sitename.com/services/sitename.com/services/index.html
_

搜索引擎以第二种方式显示它（http://sitename.com/services/），如果你在没有“/”的情况下键入它，它会重定向到用“/”显示它。SEOmoz 说我为每个页面设置了 301 次重定向，以便实现这一点，但我们从未手动执行此操作。

我尝试创建一个 .htaccess 文件，其中包含从 sitename.com/services/ 到 sitename.com/services 的重定向，但由于重定向过多，该页面无法加载。

我是否打破了一些大规则，以这种方式设置它？

请注意，“sitename.com/services/”只是一个页面的示例，我们整个网站的 50 个页面都是按照这种性质设置的。实际站点是[http://www.logicalposition.com](http://www.logicalposition.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:41:01.997

首选方法是设置您的服务器来管理 URL 处理。例如，如果您在 Apache 服务器上，您可以使用以下建议并创建/更改 .htaccess 文件以获得所需的效果。

[http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:45:38.167

最直接的方法是使用 Apache 的 .htaccess（如果我没记错的话，GoDaddy 允许访问它，尽管我可能错了）进行重定向。

请参阅此帖子：[https](https://stackoverflow.com/a/5730126/549346) ://stackoverflow.com/a/5730126/549346（mods：可能重复？），它指示您在 .htacess 文件中放置类似以下内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:41:10.887

首先，听起来你还没有做基本的腿部工作来尽量减少这种情况。您需要决定是想要 www.samplesite.com 还是仅仅想要 samplesite.com？然后你可以很容易地用 .htaccess 设置它（见[这个方便的工具](http://www.htaccesseditor.com/en.shtml)）。这意味着您最多会有三个变体，而不是 6 个。

我会接受@Jassons 的建议并使用 URL 处理 - 我的 2 个客户目前使用 GoDaddy，两者都使用这种方法，因此应该得到完全支持。

一些更有用的 URL 处理/htaccess 重写链接（尽管注意：设置 301 重定向需要时间、耐心和仔细监控 Web Master Tools 上的抓取错误，因此 URL 处理更可取！）

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

极端的例子，但仍然相关 :)[使用 .htaccess 处理数千个重定向](https://stackoverflow.com/questions/11183100/handling-several-thousand-redirects-with-htaccess)

**编辑**强制尾部斜杠

您可以使用重写规则轻松地强制出现斜杠

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*) $1 [L]
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?category=$1 
```

我想你已经部分做到了，但你会注意到发送了一个 301 重定向标头，这意味着当蜘蛛访问你的网站时，它们会更新 URL 以使用尾部斜杠 - 它不会是一夜之间. 您也许可以使用[Web Master Tools](https://www.google.com/webmasters/tools/home?hl=en)来加快更改 URL 的速度。

资料来源：在[这个](http://www.mdj.us/web-development/force-the-trailing-slash-on-your-urls-with-modrewite-and-htaccess/)网站的一部分，它给你一个很好的解释它是如何工作的

# oracle - Perl + oracle 数据库

> ID：14324457
> 
> 赞同：0
> 
> 时间：2013-01-14T18:37:12.550
> 
> 标签：oracle, perl, database-administration

我是 perl 的新手，并试图列出昨天创建的所有 oracle 模式表，即 (sysdate - 1)

试图通过 perl 脚本实现上述目标并针对 oracle 数据库运行。

Q: 1\. 使用 perl 脚本列出所有最近创建的 oracle 表 2\. 结果中的列 (Schema, table_name, created datetime) 3\. 仅在创建任何新表时才提供输出，否则没有通过调度程序发送电子邮件

例如

```
select schema, table_name, created
from dba_objects
where created = sysdate - 1
and object_type = 'TABLE'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:45:52.790

根据`date`定义，Oracle 中的 A 包括一天部分和到秒的时间。即使您的会话`NLS_DATE_FORMAT`仅指定您要显示日期组件，时间仍然存在。时间几乎肯定会导致您的查询不返回任何行。`sysdate - 1`正好在 24 小时前返回。因此，如果今天是 2013 年 1 月 14 日 13:41:35，则`sysdate - 1`返回 2013 年 1 月 13 日 13:41:35。您的查询将仅返回在那一秒创建的表。

`trunc(sysdate)`今天午夜`trunc(sysdate - 1)`返回，昨天午夜返回。所以，很可能，你想要类似的东西

```
SELECT owner, object_name
  FROM dba_objects
 WHERE created >= trunc(sysdate - 1)
   AND created < trunc(sysdate)
   AND object_type = 'TABLE' 
```

由于`dba_objects`没有列`schema`or `table_name`，我假设您的意思是`owner`and `object_name`。

# java - 垂直旋转 JTextField

> ID：14324460
> 
> 赞同：3
> 
> 时间：2013-01-14T18:37:52.760
> 
> 标签：java, swing, rotation, jtextfield

我已经看到了许多询问如何以任意角度旋转 JLabel 或图像的问题。我需要做的就是将我的文本字段旋转 90 度，但我还没有找到专门针对该角度的更简单方法。我以为我正确复制了答案，但我的文本字段没有旋转。

这是我正在做的事情的SSCCE：

```
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class VerticalRotationSSCCE {

private static class VerticalTextField extends JTextField {

    private static final long serialVersionUID = 1L;

    public VerticalTextField(String text) {
        super(text);
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        int cx = getWidth() / 2;
        int cy = getHeight() / 2;
        g2.rotate(1/2 * Math.PI, cx, cy);
        super.paintComponent(g2);
    }

}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame frame = new JFrame();
            frame.getContentPane().add(new VerticalTextField("Foo"));
            frame.pack();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        }

    });
}

} 
```

关于如何旋转组件的答案中我缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:47:08.143

实际上，是的，它可以做到，但需要一些额外的库和访问一些已经从网上消失的源代码。

使用`JXLayer`，可以在运行时转换实时组件...

![在此处输入图像描述](../Images/d5b78bc17c11d592014fe51d204587ae.png)

```
public class JLayerTransform {

    public static void main(String[] args) {
        new JLayerTransform();
    }

    public JLayerTransform() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ExamplePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ExamplePane extends JPanel {

        private JSlider slider;
        private FieldPane fieldPane;
        private DefaultTransformModel transformModel;

        public ExamplePane() {

            setLayout(new BorderLayout());

            slider = new JSlider(0, 360);
            slider.setValue(0);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {

                    transformModel.setRotation(Math.toRadians(slider.getValue()));

                }
            });

            fieldPane = new FieldPane();

            transformModel = new DefaultTransformModel();
            transformModel.setRotation(Math.toRadians(0));
            transformModel.setScaleToPreferredSize(true);
            JXLayer<JComponent> rotatePane = TransformUtils.createTransformJXLayer(fieldPane, transformModel);

            add(slider, BorderLayout.NORTH);
            add(rotatePane);

        }
    }

    public class FieldPane extends JPanel {

        public FieldPane() {
            setLayout(new GridBagLayout());

            JTextField field = new JTextField(10);
            field.setText("Hello world");

            add(field);

        }
    }
} 
```

**注意事项**

这需要[JXLayer](http://java.net/projects/jxlayer/)（我使用的是版本 3）、[SwingX](http://swingx.java.net/)（我使用的是版本 1.6.4）和 Piet Blok 的优秀示例，这些示例在网上似乎不再可用……

我已将 JXLayer（第 3 版）的所有源代码和 Piet 的示例放入一个[zip](https://www.dropbox.com/s/re1hmvypp19oqy1/JXLayer-PBJar-Demo.zip)文件中，我建议，如果您有兴趣，请获取一份副本并将其存储在安全的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:55:29.417

如果不转换鼠标坐标，您将无法有效地旋转*交互式*组件，但您*可以*旋转图形上下文以呈现*非*交互式组件，如，如此[处](https://stackoverflow.com/a/6333584/230513)`JLabel`所示。

在您的示例中，`1/2 * Math.PI != Math.PI / 2`.

![图片](../Images/9d52ad2927291dc39e663d07e2ac97fb.png)

# python - 如何重命名数组访问/写入python中的变量？

> ID：14324462
> 
> 赞同：0
> 
> 时间：2013-01-14T18:38:00.227
> 
> 标签：python, arrays, macros, rename

我有一个对象，它在一个 numpy 数组中包含它的许多字段（它们都是 float64 类型）。其中一些字段具有我想在访问/写入时使用的有意义的名称，但以我目前的知识，我必须像这样访问和编写：

```
//access:
value = data[0]
//write:
data[0] = value 
```

如果我在 C 中工作，我会做这样的事情：

```
#define fieldname data[0]
//access:
value = fieldname
//write:
fieldname = value 
```

我怎样才能在 python 中做同样干净的事情？

编辑：所有这些字段都必须保留在 numpy 数组中，因为它们通过使用 numpy 矩阵运算的线性变换得到更新。

编辑：如果我写这个方法：

```
def fieldname(self):
  return self.data[0] 
```

我的访问看起来像预期的那样，但我不能以相同的方式写回数据。

```
//access:
value = self.fieldname 
```

（在此之前的代码中省略了 self ，因为我觉得这个问题泛化到对象之外的情况。）

这篇关于重载赋值运算符的帖子可能与我想要的很接近： [如何在 Python 中模拟赋值运算符重载？](https://stackoverflow.com/questions/6012763/how-to-emulate-assignment-operator-overloading-in-python)

解决方案：编写获取字段名称`__getattr__`并`__setattr__`在 self.data 上执行必要操作的方法。当提供的字段名称与数据以外的另一个属性的字段名称匹配时，这些将不会被调用，并在提供这些特殊属性的名称时添加从数据中获取内容的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:51:17.577

如果你的所有领域都有描述性标签，你可以做类似枚举的事情。Python 没有枚举，但有很多方法可以做类似的事情，如下所述：[如何在 Python 中表示“枚举”？](https://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python)

例如，冒着通常的枚举辩论的风险，您可以执行以下操作：

```
def enum(**enums):
    return type('Enum', (), enums)

Numbers = enum(ONE=1, TWO=2, THREE='three')
print Numbers.ONE
print Numbers.TWO
print Numbers.THREE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:25:05.347

您发布的第一种方法对我来说似乎很干净且足够清晰。请记住，

```
value = data[0] 
```

和

```
data[0] = value 
```

只是语法糖

```
value = data.__getitem__(0) 
```

和

```
data.__setitem__(0, value) 
```

分别。

如果您真的非常想让行访问更加清晰，请考虑为不同的字段名称定义常量。

```
FIELDNAME1, FIELDNAME2, FIELDNAME3 = range(3)

data[FIELDNAME1] = value

value = data[FIELDNAME2] 
```

# javascript - 格式化javascript数组

> ID：14324464
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:38:10.640
> 
> 标签：javascript, html, arrays

我有以下变量：

```
a = {y: 3, color: colors[0]}; 
b = {y: 5, color: colors[0]}; 
c = {y: 5, color: colors[0]}; 
d = {y: 3, color: colors[0]}; 
```

我想要这样的东西：

```
r = {y: 3, color: colors[0]}, 
    {y: 5, color: colors[0]}, 
    {y: 5, color: colors[0]}, 
    {y: 3, color: colors[0]}; 
```

我怎么能用这四个变量做到这一点？我试过类似的东西：

```
r = a+b+c+d; 
```

但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T18:41:58.597

如果你想要一个对象数组，那么首先你构造一个数组（`[...]`），然后是数组中的对象（`{...}`）。因此，您最终得到：

```
var r = [
    {y: 3, color: colors[0]}, 
    {y: 5, color: colors[0]},
    {y: 5, color: colors[0]},
    {y: 3, color: colors[0]}
]; 
```

或者，使用您现有的变量`var r = [a, b, c, d];`

# mysql - 用于只读操作的快速类似 sql 的数据库

> ID：14324466
> 
> 赞同：0
> 
> 时间：2013-01-14T18:38:12.557
> 
> 标签：mysql, sql, sql-server, database

我有一个 Web 应用程序，它通过一个 .dll（vb6 dll，是 VB6，请不要问为什么 - 大声笑）连接到一个 ms 访问文件，它会在其中进行一些查询并向用户呈现数据。

db 文件 ( ms access ) 很简单：它有 1 个大约 8 列的表，约 300.000 个条目和一些存储的查询。所以它是一个中等大小的数据库。

现在，由于大多数查询都很长（1 - 3 秒），我正在寻找的是，是否有其他一些具有 SQL 语法的 FASTER 数据库解决方案。所有查询都是只读的。

**要求**：必须能够通过vb6连接到它

***奖励点***：如果不需要运行守护程序（如在服务器中），但它只是一个简单的文件（可能是 sqlite，mongo？）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:04:17.840

试试[SQLite](http://www.sqlite.org/about.html)：[http](http://www.sqlite.org/about.html) ://www.sqlite.org/about.html和[ODBC 驱动程序](http://www.ch-werner.de/sqliteodbc/)。具有只读模式。此外，您可能会喜欢 - 可以从 CSV 文件中读取数据。

或[JavaDB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)和 JDBC-ODBC 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:10:59.650

您应该查看 SQL Server Express： http: [//www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx) SQL Server Express 允许您访问完整的 SQL Server 数据库引擎，但有一些限制（例如，数据库大小 < 4GB，使用的 CPU 数量 = 1）免费。

2012 版还有一个不需要“服务器”的“LocalDB”选项。似乎有几篇文章解释了如何从 VB6 连接到其中一篇文章（例如[http://piecesoeight.blogspot.com/2012/04/using-vb6vbscript-to-connect-to-sql.html](http://piecesoeight.blogspot.com/2012/04/using-vb6vbscript-to-connect-to-sql.html) ) 但它们似乎都不完整，因此您必须尝试一下。

# javascript - javascript：从数组中提取元素

> ID：14324469
> 
> 赞同：0
> 
> 时间：2013-01-14T18:38:12.473
> 
> 标签：javascript

我不知道是否应该这样做。

这是我的问题：

我创建了一个创建和存储 10 个 div 元素（具有唯一 ID）的函数。

我想创建另一个函数，它将一个数组作为其参数并提醒第 5 个 div（或任何特定 div 元素）的 ID。

请帮忙

```
function createText(){
    var combo = [];
    for( i =0; i<=5 ; i++) {
        var newText = document.createElement("input");
        newText.type = "text";
        newText.id = "text"+i;
        newText.style.width ="20px";
        newText.style.height ="20px";

        var newDiv = document.createElement("div");
        newDiv.type = "div";
        newDiv.id = "div"+i;
        newDiv.style.backgroundColor ="red";
        newDiv.style.cssFloat = "left"; 

        document.getElementById("tryingin").appendChild(newDiv.cloneNode());

        combo.push(document.getElementById("div"+i).appendChild(newText.cloneNode()));
    }

    alert(combo);
}

function alert(arr) {
    //now I want to alert the id of the div(or textbox) here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:45:11.933

假设你有一个 div 数组，它们都具有唯一的 id，一个函数看起来像这样：

```
function alertFifth(listOfDivs) {
  alert(listOfDivs[4].id);
} 
```

JavaScript 允许通过从 0 开始的索引访问数组（与大多数现代语言一样）。请注意，第五个元素在 CS 术语中被认为是第四个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:49:55.223

你的功能是错误的。

```
combo.push(document.getElementById("div"+i).appendChild(newText.cloneNode())); 
```

在这里，您将输入添加到 div，然后将输入添加到数组。[appendChild 方法返回对添加节点的引用](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)。

您需要分两行进行：

```
document.getElementById("div"+i).appendChild(newText.cloneNode());
combo.push(document.getElementById("div"+i)); 
```

然后你需要一个像这样的函数：

```
function aklertDivbyIndex(theDivs, index){
    return alert(theDivs[index].id);
} 
```

# python - 按百分比计算的随机布尔值

> ID：14324472
> 
> 赞同：9
> 
> 时间：2013-01-14T18:38:19.220
> 
> 标签：python, random, python-2.7

我正在尝试获得一个随机布尔值，但具有加权百分比。例如，我希望用户传递一个百分比（即 60），生成器将随机选择真正的 60% 的时间。

我所拥有的是：

```
def reset(percent=50):
    prob = random.randrange(0,100)
    if prob > percent:
        return True
    else:
        return False 
```

有一个更好的方法吗？这似乎效率低下且麻烦。我不需要它是完美的，因为它只是用来模拟数据，但我需要它尽可能快。

我已经搜索过（Google/SO）并且没有找到任何其他问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T18:40:18.230

只需返回测试：

```
def reset(percent=50):
    return random.randrange(100) < percent 
```

因为`<`低于运算符的结果已经是布尔值。您也不需要给出起始值。

请注意，如果要返回给定百分比，则需要使用*低于；*`True`如果`percent = 100`那么你想要`True`所有的时间，例如当所有`randrange()`产生的值都低于该`percent`值时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:40:19.167

怎么样：

```
def reset(percent=50):
    return random.randrange(0, 100) > percent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T21:28:14.090

@rjbez您要求一个在*X*百分比时间内返回*true的函数。*当 X == 0% 时，它应该总是返回 false。当 X == 100% 时，它应该始终返回 true。当前接受的答案现在是固定的并且具有适当的关系

 *```
def reset(percent=50):
    return random.randrange(100) < percent 
```*

# asterisk - 星号 PHPAGI 响应代码

> ID：14324475
> 
> 赞同：1
> 
> 时间：2013-01-14T18:38:31.387
> 
> 标签：asterisk, agi

我一直在尝试找到一个网站，其中列出了我可以响应调用者服务器的所有代码。现在我可以做任何一个：

```
$agi->answer();
$agi->busy(); 
```

我期待着发送喜欢，需要付款等。如果您知道，请帮我指出正确的路径，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:31:04.417

看这里： http: [//phpagi.sourceforge.net/phpagi2/docs/elementindex_phpAGI.html](http://phpagi.sourceforge.net/phpagi2/docs/elementindex_phpAGI.html)

大多数动作都是通过执行命令来执行的。例如，要重现录音，请使用 exec： http: [//phpagi.sourceforge.net/phpagi2/docs/phpAGI/AGI.html#methodexec](http://phpagi.sourceforge.net/phpagi2/docs/phpAGI/AGI.html#methodexec)

```
$agi->exec('Playback','hello-world'); 
```

# python - matplotlib 中 LaTeX 轴标签的粗体字重

> ID：14324477
> 
> 赞同：41
> 
> 时间：2013-01-14T18:38:39.957
> 
> 标签：python, matplotlib, latex

在[`matplotlib`](http://matplotlib.org/)您可以通过以下方式使轴标签的文本变为粗体

```
plt.xlabel('foo',fontweight='bold') 
```

您还可以将 LaTeX 与正确的后端一起使用

```
plt.xlabel(r'$\phi$') 
```

但是，当您组合它们时，数学文本不再是粗体

```
plt.xlabel(r'$\phi$',fontweight='bold') 
```

以下 LaTeX 命令似乎也没有任何效果

```
plt.xlabel(r'$\bf \phi$')
plt.xlabel(r'$\mathbf{\phi}$') 
```

**如何`$\phi$`在轴标签中加粗？**

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-14T19:01:59.847

不幸的是，您不能使用粗体字体加粗符号，请参阅tex.stackexchange 上的[这个问题](https://tex.stackexchange.com/questions/595/how-can-i-get-bold-math-symbols)。

正如答案所暗示的，您可以使用`\boldsymbol`粗体 phi：

```
r'$\boldsymbol{\phi}$' 
```

您需要加载`amsmath`到 TeX 序言中：

```
matplotlib.rc('text', usetex=True)
matplotlib.rcParams['text.latex.preamble']=[r"\usepackage{amsmath}"] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-15T15:46:40.627

如果您打算在整个情节中始终使用粗体字体，最好的方法可能是启用乳胶并添加`\boldmath`到您的序言中：

```
# Optionally set font to Computer Modern to avoid common missing font errors
matplotlib.rc('font', family='serif', serif='cm10')

matplotlib.rc('text', usetex=True)
matplotlib.rcParams['text.latex.preamble'] = [r'\boldmath'] 
```

然后你的轴或图形标签可以有任何数学乳胶表达式，并且仍然是粗体：

```
plt.xlabel(r'$\frac{\phi + x}{2}$') 
```

但是，对于不是数学的标签部分，您需要将它们显式设置为粗体：

```
plt.ylabel(r'\textbf{Counts of} $\lambda$'} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-05-14T14:52:54.703

如果有人像我一样从谷歌偶然发现这个，另一种不需要调整 rc 序言（并且与非乳胶文本冲突）的方法是：

```
ax.set_ylabel(r"$\mathbf{\partial y / \partial x}$") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-12T18:26:33.377

作为这个答案[Latex on python: \alpha 和 \beta 不起作用？](https://stackoverflow.com/questions/7836730/latex-on-python-alpha-and-beta-dont-work)指出。您可能有问题，`\b`因此`\boldsymbol`可能无法按预期工作。在这种情况下，您可能会使用以下内容：`'$ \\\boldsymbol{\\\beta} $'`在您的 python 代码中。前提是您使用序言`plt.rcParams['text.latex.preamble']=[r"\usepackage{amsmath}"]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T09:37:38.377

使用 LaTeX 排版图形中的所有文本时，您可以使用以下命令将“普通”（非方程式）文本加粗`\textbf`：

```
ax.set_title(r"\textbf{some text}") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-10T22:38:34.487

这些解决方案都不适合我，我惊讶地发现如此简单的事情却如此令人愤怒。最后，这对我的用例有用。我建议调整它以供您自己使用：

`plt.suptitle(r"$ARMA({0}, {1})$ Multi-Parameter, $\bf{{a}}$, Electrode Response".format(n_i, m), fontsize=16)`

`{0}`and指的`{1}`是提供给`format`方法的位置参数，意思`0`是指变量`n_i`和`1`指变量`m`。

注意：在我的设置中，由于某种原因，`\textbf`它不起作用。我读过`\bf`LaTeX 中不推荐使用的地方，但对我来说这是有效的。

# c++ - 使用来自控制台的输入进行 Eclipse 调试

> ID：14324487
> 
> 赞同：7
> 
> 时间：2013-01-14T18:39:14.147
> 
> 标签：c++, eclipse, debugging

我正在尝试使用 Eclipse 调试我用 C++ 编写的程序。该程序包括从用户那里获取输入，但是当我将输入输入到控制台时，它永远不会继续运行代码（它会一直要求输入）。如果不修复此问题，我将无法调试，希望能得到一些帮助。谢谢你。

代码卡在 while 循环 fgets 上：

```
int main(int argc, const char**argv) {
    FILE* inputFile = NULL;

    setlocale(LC_ALL, "");
    if(argc == 2){
        inputFile = fopen(argv[1], "r");
        if (inputFile == NULL){
            printf("Problem opening file %s, make sure correct path name is given.\n", argv[1]);
            return 0;
        }
    }
    else {
        inputFile = stdin;
    }

    char buffer[MAX_STRING_INPUT_SIZE];
    // Reading commands
    while ( fgets(buffer, MAX_STRING_INPUT_SIZE, inputFile) != NULL ) {
        fflush(stdout);
        if ( parser(buffer) == error ){
            printf("ERROR\n");
            break;
        }
    };
    fclose(inputFile);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-06T23:09:40.810

问题来自 Eclipse 缓冲控制台输入。修复它的一种方法是强制 Eclipse 使用 Windows/DOS 本机控制台进行调试。

该过程在[此处](http://nicolas.riousset.com/eclipse-how-to-debug-a-c-console-application-using-a-native-dos-console-instead-of-the-ide-integrated-one/)进行了详细描述，但很简短：

1.  从 Eclipse 菜单 File > New > C++ Project 创建您的 Hello World C++ 命令行项目
2.  在您的项目文件夹中，创建一个“.gdbinit”文本文件。它将包含您的 gdb 调试器配置
3.  编辑“.gdbinit”，并添加以下行（不带引号）：“set new-console on”
4.  在 Eclipse 中，转到菜单 Run > “Debug Configurations”，然后在左侧窗格中选择您的应用程序名称
5.  在“调试器”选项卡中，确保“GDB 命令文件”现在指向您的 « .gdbinit » 文件。否则，输入“.gdbinit”配置文件的路径
6.  单击“应用”和“调试”。你完成了 ！应启动本机 DOS 命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T23:21:32.483

好吧，我知道 Eclipse 控制台缓冲区并不总是按应有的方式工作 - 根据我的经验，使用 C 或 C++ 时它是最糟糕的。

如果您想在 Eclipse 中运行编译后的代码，这将*极大地帮助*但**不会消除**您在 Eclipse 中可能遇到的显示问题：

`setvbuf(stdout, NULL, 0, _IONBF);`

**但是**，我不知道这会如何影响在 Eclipse 中使用`stdin`. 您*最好*的选择是使用[Nicolas 的答案](https://stackoverflow.com/a/19824801/1986871)通过 DOS 控制台运行。多做一点工作，但我相信就足够了。

请注意，上面的行**只**应在通过 Eclipse 运行代码时使用，以便获得某种健全的输出缓冲区，而不会出现一些混乱的代码内解决方法。编译实际使用时需要**注释掉这一行。**

# jquery - jQuery 访问 var 外部就绪函数

> ID：14324490
> 
> 赞同：0
> 
> 时间：2013-01-14T18:39:31.893
> 
> 标签：jquery

我在准备好的函数中定义了以下内容

```
 js13(document).ready(function ($) {

            var socket = io.connect('http://xx.xx.xxx.xx:8080');

            socket.on('connect', function(){
                socket.emit('adduser', 'username');
            });

            socket.on('updatechat', function (username, data) {

                data = data.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\"/g, "&quot;");
                js13("#chatboxcontent").append('<div class="ui-chatbox-msg"><b>' + username + ':</b> ' + data + '</div>');
                js13("#chatboxcontent").scrollTop(js13("#chatboxcontent")[0].scrollHeight);                 

            });

            socket.on('updateusers', function(data) {
                $('#users').empty();
                $.each(data, function(key, value) {
                    $('#users').append('<div>' + key + '</div>');
                });
            });            

}); 
```

如何在就绪函数之外访问相同的套接字变量？我想从外部函数中访问它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:40:55.597

`socket`在准备函数之外定义变量..

```
var socket;

js13(document).ready(function ($) {
   socket = io.connect('http://xx.xx.xxx.xx:8080'); 
```

**注意：** var 声明在 ready 函数中被移除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:41:07.187

只需在外部创建变量`ready ()`。请记住在 as 中删除`var`声明`ready()`，然后将创建另一个局部变量。

```
var socket;
js13(document).ready(function ($) {

            socket = io.connect('http://xx.xx.xxx.xx:8080');
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:41:35.877

```
var socket;

js13(document).ready(function ($) {

    socket = io.connect('http://xx.xx.xxx.xx:8080');
    //...
}); 
```

# visual-studio - 面向 Visual Studio 2010 和 2012 的 VSIX 项目模板

> ID：14324504
> 
> 赞同：3
> 
> 时间：2013-01-14T18:40:38.320
> 
> 标签：visual-studio, vsix, visual-studio-templates

我正在创建一些 Visual Studio 项目模板，并将它们包装在 VSIX 中，以便最终上传到 Visual Studio 库。我希望一个 VSIX 支持在 Visual Studio 2010 和 Visual Studio 2012 上安装模板。

我想做的是针对我的一些项目模板（.vstemplate），以便它们仅安装在特定版本的 Visual Studio 上。例如，如果我有 VS2010.vstemplate 和 VS2012.vstemplate，当我在 VS 2012 上运行 VSIX 时，我不希望 VS2010 项目模板安装并在模板列表中可用。

单个 VSIX 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:36:05.577

对于不同版本的 Visual Studio 需要不同的模板，这似乎有点奇怪，但您可以创建一个[`IWizard`](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.visualstudio.templatewizard.iwizard.aspx)实现和一个包含两个[模板](http://msdn.microsoft.com/en-us/library/ms185308%28v=vs.100%29.aspx)但不定义任何[`ProjectTemplateLink Element`](http://msdn.microsoft.com/en-us/library/vstudio/ms171398.aspx). 当向导运行时，您可以检测 VS 的版本并使用该[`AddFromTemplate`](http://msdn.microsoft.com/en-us/library/vstudio/envdte._solution.addfromtemplate%28v=vs.100%29.aspx)方法为正确的 VSTemplate 创建项目。

# c# - DateTimePicker 计算以便第二个与第一个 datetimepicker 交互

> ID：14324505
> 
> 赞同：0
> 
> 时间：2013-01-14T18:40:44.600
> 
> 标签：c#, visual-studio

我试图让一个 DateTimePicker 与另一个交互，所以如果你选择类似：08-08-2013，那么第二个 DateTimePicker 的 Mindate 函数需要是那个日期，我尝试使用这个代码，但是这个代码赢了不行：

```
 private void datetimepicker1_ValueChanged(object sender, EventArgs e)
    {
        datetimepicker2.MinDate = datetimepicker1.Value.Date;
    } 
```

有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T10:35:15.303

I have recently written the same style of code, I have 2 DateTime Pickers set with a custom format.

The code I have and which works is

```
EndDate.MinDate = StartDate.Value;
StartDate.MaxDate = EndDate.Value; 
```

I believe it is the `.Date` that is causing the discrepancy in yours, as it is the only difference

# c# - 连接仪器时 NSActionDispatcher 被垃圾收集

> ID：14324507
> 
> 赞同：1
> 
> 时间：2013-01-14T18:40:54.143
> 
> 标签：c#, ios, mono, xamarin.ios, instruments

我正在尝试向我的 iOS 应用程序添加一个计时器，为此我使用以下代码：

```
using System;
using System.Drawing;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace MyNamespace
{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        UIWindow window;
        public static NavigationController MyNavigationController;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            RectangleF bounds = UIScreen.MainScreen.Bounds;
            MyNavigationController = new NavigationController(bounds);
            window = new UIWindow (bounds);
            window.RootViewController = MyNavigationController;
            window.MakeKeyAndVisible ();
            return true;
        }
    }

    public class NavigationController : UINavigationController
    {
        private RectangleF _bounds;
        private RectangleF _viewPort;

        public NavigationController(RectangleF bounds)
        {
            _bounds = bounds;
            NavigationBar.BarStyle = UIBarStyle.Black;
        }

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();
            _viewPort = new RectangleF(_bounds.Location, new SizeF(_bounds.Width, _bounds.Height - NavigationBar.Frame.Height));
            ShowFirstView(); // Default to showing FirstViewController
        }

        public void ShowFirstView()
        {
            PushViewController(new FirstViewController(_viewPort), true);
        }

        public void ShowSecondView()
        {
            PushViewController(new SecondViewController(_viewPort), true);
        }
    }

    public class FirstViewController : UIViewController
    {
        public FirstViewController(RectangleF bounds)
        {
            // Empty view
            View = new UIView(bounds);
            View.BackgroundColor = UIColor.White;
            Title = "First View";

            // Simple button to navigate to next view
            UIButton button = UIButton.FromType(UIButtonType.RoundedRect);
            button.Frame = new RectangleF(10,10,300,30);
            button.SetTitle("Show next view", UIControlState.Normal);
            button.TouchUpInside += (sender, e) => { AppDelegate.MyNavigationController.ShowSecondView(); };
            View.AddSubview(button);
        }
    }

    public class SecondViewController : UIViewController
    {
        private NSTimer _timer;

        public SecondViewController(RectangleF bounds)
        {
            // Empty View
            View = new UIView(bounds);
            View.BackgroundColor = UIColor.Blue;
            Title = "Second View";

            // Create timer
            _timer = NSTimer.CreateRepeatingScheduledTimer(2f, delegate { Console.WriteLine("Timer Fired"); });
        }
    }
} 
```

**当我在模拟器中**运行此代码时，它按预期工作，每 2 秒将“Timer Fired”写入控制台。

但是，当我附加 Apple Instruments，特别是**分配工具**`UIApplication.Main (args, null, "AppDelegate");`时，*Main.cs*中会引发异常

 *> 选择器从objective-c 对已被GC 处理的MonoTouch.Foundation.NSActionDispatcher (0x10AA2D50) 类型的托管对象调用

堆栈跟踪：

```
System.Exception: Selector invoked from objective-c on a managed object of type MonoTouch.Foundation.NSActionDispatcher (0x14FB5AC0) that has been GC'ed ---> System.Exception: No constructor found for MonoTouch.Foundation.NSActionDispatcher::.ctor(System.IntPtr)
  at System.Activator.CreateInstance (System.Type type, BindingFlags bindingAttr, System.Reflection.Binder binder, System.Object[] args, System.Globalization.CultureInfo culture, System.Object[] activationAttributes) [0x000f1] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:280
  at System.Activator.CreateInstance (System.Type type, System.Object[] args, System.Object[] activationAttributes) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:234
  at System.Activator.CreateInstance (System.Type type, System.Object[] args) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:229
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (IntPtr ptr, IntPtr klass) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:231
  --- End of inner exception stack trace ---
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (IntPtr ptr, IntPtr klass) [0x00045] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:236
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (IntPtr ptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:280
  at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (IntPtr ptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:297
  at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime:GetNSObjectWrapped (intptr)
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at MyNamescape.Application.Main (System.String[] args) [0x00000] in Main.cs:17 
```

需要注意的关键事项：

*   应用程序在模拟器中正常运行，正常情况下（无仪器）
*   该问题仅在分配工具对其进行监控时发生。如果使用其他仪器（例如泄漏），则不会出现此问题。
*   仅当我在设置计时器之前附加分配工具时才会出现此问题。如果我在设置计时器后附加分配工具，那么它会按预期工作。
*   分配工具适用于我的应用程序的其他视图控制器
*   我找不到`NSActionDispatcher`与此上下文相关的太多信息，或者在 MonoTouch 中找不到更多信息
*   我目前无法在物理设备上进行测试。

所以我不确定这是否是分配工具的问题，或者我是否在代码中做错了什么。非常感谢有关此问题的任何建议。

编辑：我更新了代码以显示导致问题的最简单的完整应用程序用例。（我已经根据 PouPou 关于不必要使用线程的评论更新了我的计时器代码）

更新（2013 年 1 月 17 日）：我使用 iPad 和 iPhone 模拟器 5.0、5.1 和 6.0 版进行了尝试，都产生了相同的结果。

更新（2013 年 1 月 18 日）：根据 Rolf 的请求添加了本机堆栈帧。

```
2013-01-18 13:28:47.579 TestTimer[12196:c07]   at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (IntPtr ptr, IntPtr klass) [0x00045] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:236 
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (IntPtr ptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:280 
  at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (IntPtr ptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:297 
  at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime:GetNSObjectWrapped (intptr)
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 
  at MyNamescape.Application.Main (System.String[] args) [0x00000] in Main.cs:16 
2013-01-18 13:28:47.623 TestTimer[12196:c07] 0   TestTimer                           0x00093a22 mono_handle_exception_internal_first_pass + 3058
1   TestTimer                           0x00095102 mono_handle_exception_internal + 1602
2   TestTimer                           0x00095c4f mono_handle_exception + 47
3   TestTimer                           0x000dda72 mono_x86_throw_exception + 306
4   ???                                 0x0b3e0f8f 0x0 + 188616591
at MonoTouch.ObjCRuntime.Runtime.GetNSObject (intptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:280
at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:297
at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) <IL 0x00017, 0x00094>
8   TestTimer                           0x00224873 get_managed_object_for_ptr + 115
9   TestTimer                           0x00229700 monotouch_trampoline + 448
10  Foundation                          0x019b9b90 __NSFireTimer + 97
11  CoreFoundation                      0x01315376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
12  CoreFoundation                      0x01314e06 __CFRunLoopDoTimer + 534
13  CoreFoundation                      0x012fca82 __CFRunLoopRun + 1810
14  CoreFoundation                      0x012fbf44 CFRunLoopRunSpecific + 276
15  CoreFoundation                      0x012fbe1b CFRunLoopRunInMode + 123
16  GraphicsServices                    0x04b807e3 GSEventRunModal + 88
17  GraphicsServices                    0x04b80668 GSEventRun + 104
18  UIKit                               0x0273965c UIApplicationMain + 1211
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x00056, 0x001f5>
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
at MyNamescape.Application.Main (string[]) [0x00000] in Main.cs:16
at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00049, 0x0014e>
23  TestTimer                           0x00010252 mono_jit_runtime_invoke + 722
24  TestTimer                           0x0017478e mono_runtime_invoke + 126
25  TestTimer                           0x00178be4 mono_runtime_exec_main + 420
26  TestTimer                           0x00178f55 mono_runtime_run_main + 725
27  TestTimer                           0x0006ba65 mono_jit_exec + 149
28  TestTimer                           0x0021f65d main + 2013
29  TestTimer                           0x00003125 start + 53 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:43:58.267

我（最终）发现这是 MonoTouch 中的一个错误（仪器拦截了保留/释放方法，这使 MonoTouch 感到困惑）。该错误已修复，并将包含在下一个稳定版本（6.0.9）中。*

# java - 附加到 JComboBox 的 ItemListener 的问题

> ID：14324514
> 
> 赞同：1
> 
> 时间：2013-01-14T18:41:11.157
> 
> 标签：java, swing, user-interface, jcombobox, jradiobutton

请看下面的代码

```
 import java.awt.event.*;
    import java.awt.*;
    import javax.swing.*;

    public class ComboIssue extends JFrame
    {
        private JRadioButton rOne, rTwo;
        private ButtonGroup group;

        private JComboBox combo;

        private JLabel label;

        public ComboIssue()
        {
            rOne = new JRadioButton("One");
            rOne.addActionListener(new ROneAction());
            rTwo = new JRadioButton("Two");
            rTwo.addActionListener(new RTwoAction());
            group = new ButtonGroup();
            group.add(rOne);
            group.add(rTwo);

            combo = new JComboBox();        
            combo.addItem("No Values");
            combo.addItemListener(new ComboAction());

            label = new JLabel("labellLabel");

            this.setLayout(new FlowLayout());
            this.add(rOne);
            this.add(rTwo);
            this.add(combo);
            this.add(label);

        this.pack();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        }

        private class ROneAction implements ActionListener
        {
            public void actionPerformed(ActionEvent ae)
            {
                combo.removeAllItems();
                combo.addItem("One");
            }
        }

        private class RTwoAction implements ActionListener
        {
            public void actionPerformed(ActionEvent ae)
            {
                combo.removeAllItems();
                combo.addItem("Two");
            }
        }

        private class ComboAction implements ItemListener
        {
            public void itemStateChanged(ItemEvent ie)
            {
                if(ie.getStateChange() == ItemEvent.SELECTED)
                {
                    label.setText("Selected");
                }
            }
        }

        public static void main(String[]args)
        {
            new ComboIssue();
        }

} 
```

这里我期待的是，

1.  选择一个单选按钮。它将替换组合框中的值。
2.  从组合框中选择一个值。现在 JLabel 文本将设置为“已选择”

但是，这不是正在发生的事情。相反，只要您选择单选按钮，JLabel 文本就会更改！！！为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:53:27.193

这是因为`ComboAction implements ItemListener`. 你没有改变组合框的值吗？当您选择单选按钮的值时？

**更新：**

好吧，你的代码有点问题。它改变了标签的值，因为你有一个`ItemListener`。所以我采用了`PopupMenuListener`当列表变得不可见时会拍摄的。你想要的就很好。

代码：

```
 import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class ComboIssue extends JFrame
{
    private JRadioButton rOne, rTwo;
    private ButtonGroup group;

    private JComboBox combo;

    private JLabel label;

    public ComboIssue()
    {
        rOne = new JRadioButton("One");
        rOne.addActionListener(new ROneAction());
        rTwo = new JRadioButton("Two");
        rTwo.addActionListener(new RTwoAction());
        group = new ButtonGroup();
        group.add(rOne);
        group.add(rTwo);

        combo = new JComboBox();
        combo.addItem("No Values");
        combo.addPopupMenuListener(new javax.swing.event.PopupMenuListener() {
        public void popupMenuCanceled(javax.swing.event.PopupMenuEvent evt) {
        }
        public void popupMenuWillBecomeInvisible(javax.swing.event.PopupMenuEvent evt) {
            jComboBox1PopupMenuWillBecomeInvisible(evt);
        }
        public void popupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {
        }
    });

        label = new JLabel("labellLabel");

        this.setLayout(new FlowLayout());
        this.add(rOne);
        this.add(rTwo);
        this.add(combo);
        this.add(label);

    this.pack();
    this.setVisible(true);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private class ROneAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            combo.removeAllItems();
            combo.addItem("One");
        }
    }

    private class RTwoAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            combo.removeAllItems();
            combo.addItem("Two");
        }
    }

       private void jComboBox1PopupMenuWillBecomeInvisible(javax.swing.event.PopupMenuEvent evt) {
   label.setText("selected");

}

    public static void main(String[]args)
    {
        new ComboIssue();
    }

       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:58:52.527

这是因为您的单选按钮的动作侦听器中有这段代码 `combo.removeAllItems();`

当您单击单选按钮时，然后在将该特定单选按钮文本添加到组合框中之前，您将删除所有项目，之后仅剩下的项目`JComboBox`是单击单选按钮后添加的项目，默认情况下选中该单选按钮，然后调用您`JComboBox`的`itemStateChanged`然后更改文本`JLabel`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:02:57.473

在这里，您的需求只需稍作改动即可完成

```
private class ROneAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            label.setText("Nothing Selected");   
            combo.removeAllItems();
            combo.addItem("One");
        }
    }

      private class RTwoAction implements ActionListener
      {
        public void actionPerformed(ActionEvent ae)
        {
            label.setText("Nothing Selected");
            combo.removeAllItems();
            combo.addItem("Two");
        }
       }
        private class ROneAction implements ActionListener
        {
            public void actionPerformed(ActionEvent ae)
            {
                combo.removeAllItems();
                combo.addItem("Select");
                combo.addItem("One");
            }
        }

        private class RTwoAction implements ActionListener
        {
            public void actionPerformed(ActionEvent ae)
            {
                combo.removeAllItems();
                combo.addItem("Select");
                combo.addItem("Two");
            }
        }

        private class ComboAction implements ItemListener
        {
            public void itemStateChanged(ItemEvent ie)
            {
                if(ie.getItem().equals("Two"))
                {
                    label.setText("Two Selected");
                } else if(ie.getItem().equals("One") ) {
                    label.setText("One Selected");
                }
            }
        } 
```

# php - Doctrine + Twig，如何在 OneToMany 关系中显示 Doctrine 集合并有限制？

> ID：14324515
> 
> 赞同：3
> 
> 时间：2013-01-14T18:41:11.197
> 
> 标签：php, symfony, doctrine, doctrine-orm, twig

我与两个实体有 OneToMany 关系：

一个`Article`有一个`Brand`，一个`Brand`有很多`Articles`。如何，在我的 Twig 模板中，每个模板只能显示 5`Articles`个`Brand`？

使用轻量级查询的最佳做法是什么？

下面，我的代码：

```
{% for brand in colBrands %}

        {% for article in brand.articles %}

            <!-- Display only 5 results and stop -->

        {% endfor %}

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:45:29.693

使用[切片](http://twig.sensiolabs.org/doc/filters/slice.html "片")函数：

```
{% for brand in colBrands %}

        {% for article in brand.articles|slice(0, 5) %}

            <!-- Display only 5 results and stop -->

        {% endfor %}

{% endfor %} 
```

# sql - 将一组唯一标识符传递给存储过程

> ID：14324516
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:41:18.687
> 
> 标签：sql, sql-server, tsql, stored-procedures

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)
> [将参数数组传递给存储过程](https://stackoverflow.com/questions/1069311/passing-an-array-of-parameters-to-a-stored-procedure)

我需要将一组唯一标识符传递给我的存储过程。我写了这个查询来测试我想要做什么：

```
SELECT  *
FROM    MyTable
WHERE   MyTable.TypeId IN ('852D7F39-302A-4E35-94D4-9A0335F8E9DC,1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82') 
```

此查询运行正确。所以我创建了这个存储过程：

```
CREATE PROCEDURE [dbo].[MySproc] (
@TypeIdsList varchar(8000)
) AS

BEGIN
EXEC(
    'SELECT *
    FROM    MyTable
    WHERE   MyTable.TypeId IN (' + @TypeIdsList + ')'
)
END 
```

但是当我用一些示例数据执行它时：

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[MySproc]
        @TypeIdsList = N'852D7F39-302A-4E35-94D4-9A0335F8E9DC,1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82'

SELECT  'Return Value' = @return_value

GO 
```

我收到此错误：

> *'D7F39' 附近的语法不正确。*

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:00:18.633

```
<ids>
    <id value='852D7F39-302A-4E35-94D4-9A0335F8E9DC'/>
    <id value='1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82'/>
</ids> 
```

```
 create procedure [dbo].[MySproc] (@TypeIdsList xml)
as 
begin

    declare @idoc int
    exec sp_xml_preparedocument @idoc output, @TypeIdsList
    create table #ids (id uniqueidentifier)

    insert into #ids
            select a.value
                from openxml (@idoc, '/ids/id',1)
            with (value uniqueidentifier) a

    select t.*
        from MyTable t 
            inner join #ids i with (nolock) on t.TypeId = i.id     

-- or
-- SELECT t.*
-- FROM MyTable t
-- WHERE t.TypeId IN (SELECT i.id FROM #ids WITH(NOLOCK))
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:52:54.130

我很困惑。你的第一个查询运行正确是什么意思？对于人类（至少是这个），您似乎正在寻找两个值： `'852D7F39-302A-4E35-94D4-9A0335F8E9DC'`或`'1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82'`. 但是，SQL 将您的表达式解释为*一个*`'852D7F39-302A-4E35-94D4-9A0335F8E9DC,1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82'`带有逗号的值。

您的存储过程似乎想将其转换为两个值。但是，逗号有问题。你需要类似的东西：

```
WHERE   MyTable.TypeId IN (''' + replace(@TypeIdsList, ',', '''') + ''')' 
```

哦，动态 SQL 会让人感到困惑。`charindex()`仅使用或`like`在常规 SQL 中可能更容易：

```
where charindex(','+MyTable.TypeId+',' , ','+@TypeIdsList+',') > 0 
```

或者

```
where ','+@TypeIdsList+',' like '%,'+MyTable.TypeId+',%' 
```

# html - 最小高度 100% 拉伸

> ID：14324526
> 
> 赞同：0
> 
> 时间：2013-01-14T18:41:39.450
> 
> 标签：html, height, css

我的 min-height 和 height 属性有问题。

[http://nickhellemans.be/nick/testing/](http://nickhellemans.be/nick/testing/)

当内容大于 100% 时，蓝色列不会直到页面末尾。（全屏）

**HTML**

```
 <div id="wrapper">
        <section id="sidebar">
        test
        </section>
        <section  class="contentViewer">
             content goes here
        </section>

    </div> 
```

**CSS**

```
body, html {
height:100%;
}

#wrapper {
width:100%;
height:100%;
}

section#sidebar {
float:left;
width:300px;
min-height:100%;
height: auto !important;
margin: auto;
background-color: blue;
overflow: hidden;
}

section.contentViewer {
height:auto;
position:absolute;
top:0;
right:0;
left:300px;
font-family: "brandon";
font-size:18pt;
} 
```

我已经尝试用谷歌搜索它，但我无法找到适合该问题的答案。熟悉这个问题并知道正确解决方案的人吗？

提前致谢

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:45:28.727

编辑（再次哈哈）

您将不得不避免浮动和绝对定位，因为您的父母不会与绝对定位的子元素一起缩放。因为它们不随比例缩放，所以它们将默认为 100%。我建议使用表格结构（左列、右列、垂直对齐顶部宽度：100% 等）

```
body, html, #wrapper { height: 100%; } /* defaults to 100% height */
#wrapper { display: table; }
#wrapper > * { display: table-cell; vertical-align: top; height: 100%; } /* Behave as tablecells */
#sidebar { background-color: blue; min-width: 200px; } /* min-width is important since other cell is 100% */
.contentViewer { background-color: red; width: 100%; } /* Fill up remaining space */
.container { position: relative; height: 100%; width: 100%; } /* Use containers for relative positioning '*/

<div id="wrapper">
  <section id="sidebar">
    <div class="container">
      <p>Left side</p>
    </div>
  </section>
  <section  class="contentViewer">
    <div class="container">
      <p>Yoopie</p>
    </div>
  </section>
</div> 
```

上面的代码是我使用 css 表的 2 列布局的基本结构。它允许流体设计，同时仍然能够使用相对定位。通常表格单元格不支持位置：相对；所以我总是使用 .container div 作为表格单元格的直接子元素

# iphone - 将数组发送到下一个视图控制器 iOs xcode

> ID：14324527
> 
> 赞同：1
> 
> 时间：2013-01-14T18:41:40.400
> 
> 标签：iphone, ios, xcode, arrays, xcode4.5

> **可能的重复：**
> [在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

我有 2 个视图控制器：

1.  指数
2.  第二

在索引中，我有 2`textfield`和`button`.

我填写了这个文本字段并按“下一步按钮”到第二个视图，我需要使用数组“显示”这两个文本字段（稍后我将发送 JSON 数据）。我怎样才能最好地实现？请帮忙！最好的问候
伊万。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:50:27.057

`@property`将类内声明`Second`为`textArray`. 然后在推送到`Second`from`Index`时，您需要设置此属性。

在`Second.h`档案中，

```
@property(nonatomic, strong) NSArray *textArray; 
```

在`Index.m`档案中，

```
Second *aSecond = [[Second alloc] init];
aSecond.textArray = @[textField1.text, textField2.text];
//write code to push from Index to Second 
```

现在在课堂`Second`上，您可以将它用作`aSecond.textArray[0]`和`aSecond.textArray[1]`

# c# - 解析文本字符串以从数据库中获取窗口位置和设置

> ID：14324531
> 
> 赞同：1
> 
> 时间：2013-01-14T18:42:06.980
> 
> 标签：c#, asp.net-mvc, database, parsing

您好，我正在尝试将设置存储在数据库中，以便允许我的 Web 应用程序的用户随身携带他们的设置，并在多台机器上设置相同的窗口。但我也将使用 cookie 来允许设置工作安全的无图像体验。（不，这不适用于明确的材料。）

到目前为止，我的想法是这样的

```
news{x:0,y:0,height:120,Width:120,order:1};
market{system:F-9QTZ,Distance:Region,category:Ships,subcat:Massive,selection:TestShip,x:120,y:0,width:120,height:120} 
```

我认为这有点像我自己的风格的 JSON。

是否有人对使用 C# 解析此问题的最佳方法有任何想法，或者对更有效的方法有不同的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:44:50.380

为什么不将它存储为实际的 JSON，然后解析会很容易。只需使用可用于解析的众多 .NET JSON 库之一并将它们映射到您的 GUI 相关类的属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:52:50.400

看看[这个问题](https://stackoverflow.com/questions/6620165/how-to-parse-json-in-c)，特别是看看它的 JSONSerialiser 部分。

# javascript - Backbone / RequireJS嵌套列表中的循环依赖

> ID：14324535
> 
> 赞同：7
> 
> 时间：2013-01-14T18:42:18.040
> 
> 标签：javascript, jquery, backbone.js, requirejs, circular-dependency

我正在使用 RequireJS 在 Backbone 中设置嵌套类别结构。

在这种结构中，一个类别集合包含类别模型，单个类别模型可以包含一个类别集合。

不幸的是，这似乎导致了 RequireJS 中可怕的循环依赖问题。我已经阅读了有关 RequireJS 的文档（[http://requirejs.org/docs/api.html#circular](http://requirejs.org/docs/api.html#circular)），但是我发现“a”和“b”的解释令人困惑。

这是我的代码，它导致了问题：

```
define([

    "jquery",
    "underscore",
    "backbone",
    "collections/categories"

    ], function( $, _, Backbone, CategoriesCollection ) {

    var Category = Backbone.Model.extend({

        defaults: {
            title: "Untitled"
        },

        parse: function(data) {
            this.children = new CategoriesCollection( data.children, {parse: true} );
            return _.omit( data, "children" );
        }

    });

    return Category;

}); 
```

...

```
define([

    "jquery",
    "underscore",
    "backbone",
    "models/category"

    ], function( $, _, Backbone, CategoryModel ) {

    var Categories = Backbone.Collection.extend({
        model: CategoryModel
    });

    return Categories;

}); 
```

我想知道是否有任何曾经经历过这种情况的人可以帮助我朝着正确的方向前进。

在此先感谢您的帮助，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T20:23:47.850

您只需要`require`在模型中需要它时再次使用该集合，因为最初传递的集合可以是未定义的：

```
define([

    "jquery",
    "underscore",
    "backbone",
    "collections/categories"

    ], function( $, _, Backbone, CategoriesCollection ) {

    var Category = Backbone.Model.extend({

        defaults: {
            title: "Untitled"
        },

        parse: function(data) { 
            if(!CategoriesCollection){
              CategoriesCollection = require("collections/categories");
            }

            this.children = new CategoriesCollection( data.children, {parse: true} );
            return _.omit( data, "children" );
        }

    });

    return Category;

}); 
```

在示例中，它们也导入`require`，但它也应该在没有导入的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:23:22.797

为此，您应该考虑使用像[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)这样的插件。

# java - Jsoup getElementsByAttributeValueMatching

> ID：14324540
> 
> 赞同：4
> 
> 时间：2013-01-14T18:42:47.040
> 
> 标签：java, regex, jsoup

[JSoup 讨论页面建议我在这里问我的问题。]

所以，我不是正则表达式专家，但我想知道我从 jsoup getElementsByAttributeValueMatching() 方法得到的结果。

如果我有一个 html 页面，其中包含以下链接：

```
<a href="/tweb/tiles/twr/EIDS_AT_20130108T134335/01/">Parent Directory</a>
<a href="1357681618315/">1357681618315/</a>
<a href="1357681649996/">1357681649996/</a> 
```

我查询：

```
Elements dirs = baseDir.getElementsByAttributeValueMatching("href", Pattern.compile("[0-9]+/")); 
```

希望只得到只有数字的 2 个链接（最后是一个斜线。）

但是，我得到了所有 3 个链接。

我编写了一个快速测试程序来检查 java 的模式匹配器对带有 3 个 href 字符串的正则表达式的响应，并且它只返回两个只有数字的，正如我所期望的：

```
String a = "/tweb/tiles/twr/EIDS_AT_20130108T134335/01/";
String b = "1357681618315/";
String c = "1357681649996/";

Pattern p = Pattern.compile("[0-9]+/");

System.out.println("a:"+ p.matcher(a).matches());
System.out.println("b:"+ p.matcher(b).matches());
System.out.println("c:"+ p.matcher(c).matches()); 
```

返回：a:false b:true c:true

所以，我的问题是，我错过了什么？

谢谢，莱纳斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:53:49.530

Jsoup 使用[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)，而不是[`Matcher#matches()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29). 所以，你需要供应`^`和`$`你自己。

```
Elements dirs = baseDir.getElementsByAttributeValueMatching(
    "href", Pattern.compile("^[0-9]+/$")); 
```

以下是解释差异的相关 javadoc 摘录*（重点是我的）*：

> ## 寻找
> 
> ...
> 
> ### 回报：
> 
> `true`当且仅当输入*序列*的子序列匹配此匹配器的模式

> ## 火柴
> 
> ...
> 
> ### 回报：
> 
> `true`当且仅当*整个*区域序列与此匹配器的模式匹配

至于为什么 Jsoup 使用`find()`而不是`matches()`，这是您必须向其创建者提出的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T06:51:55.613

当我们在 jsoup 中使用 select 时，您可以使用`[attr*=valContaining]`和。`[attr~=regex]`

元素 dirs = baseDir.select([attr~=regex]);

attr----> 属性正则表达式-----> 正则表达式应用于该属性的值

请参阅此处的文档[https://jsoup.org/apidocs/org/jsoup/select/Selector.html](https://jsoup.org/apidocs/org/jsoup/select/Selector.html)

# c - 为什么旧的 C 语言规范要求预先声明函数局部变量？

> ID：14324546
> 
> 赞同：32
> 
> 时间：2013-01-14T18:42:58.420
> 
> 标签：c, compiler-construction, language-design

在 C 编程语言中，我使用的所有语言修订版都在评估任何非声明性/赋值表达式之前强制执行了预先变量声明。C++ 似乎已经放弃了所有版本的这个要求。我也认识到更现代的 C 版本也放弃了这个要求，但我还没有使用任何这些标准。

我的问题是：有**什么历史原因阻止 C 语言按需自由声明而不是预先声明？**

显然，从工程的角度来看，我想到了许多原因，但对我来说，没有一个是特别合理的。

1.  防止发生晦涩的编译器行为错误（例如无限解析循环、用于评估的大量内存膨胀或宏的一些奇怪的极端情况。）
2.  防止不需要的编译器输出。这可能是任何东西，从混淆调试过程的符号输出和调试工具开发的简易性，到意外的堆栈存储顺序。
3.  可读性。我也觉得这很难接受，因为 C 虽然与那个时代的其他语言相比是为了可读性而设计的，但几乎没有在其他任何地方强制执行这种类型的结构。（除非您将原型设计视为类似的强制执行，但如果我记得原型是在 '89 规范中添加的。）
4.  实现复杂性和实际原因。这是我最倾向于相信的一个。作为工程师，我们必须做出某些考虑，以便在分配的时间范围内交付可行的产品。虽然我承认计算机科学和软件工程的专业领域都发生了巨大变化，但商业仍然是商业。归根结底，我确信贝尔想要一个可以在 Unix 编程环境中使用的成品来展示他们所取得的成就。

有没有人有任何好的资源来支持上述任何内容？我完全错过了什么吗？我们可以从黎明到黄昏进行推测，但我正在寻找好的硬参考。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-14T20:11:47.820

查看Dennis Ritchie 主页上的早期（第 6 版 Unix，1975） [C 手册，在那个版本中，函数局部变量](https://www.bell-labs.com/usr/dmr/www/cman.pdf)*只能*在函数的开头声明：

> 函数语句只是一个复合语句，它可能在开始时有声明。
> 
> > *函数声明*：{*声明列表[选择]* *声明列表*}

*声明列表*未定义（省略），但可以很容易地假设具有语法：

> *声明列表*：*声明* *声明列表[选择]*。

不允许其他复合语句包含变量（或实际上任何）声明。

这显然简化了实现；在早期的编译器源代码[`c02.c`](https://github.com/qrush/unix/blob/master/src/c/c02.c#L321)中，函数头函数`blkhed()`只需要对`auto`变量声明使用的堆栈空间求和，同时记录它们的堆栈偏移量，并发出代码以适当的量碰撞堆栈指针。在函数退出（`return`结束或结束）时，实现只需要恢复保存的堆栈指针。

K&R 觉得有必要*声明“变量的声明（包括初始化）可能跟在引入任何复合语句的左大括号之后，而不仅仅是开始函数的声明*”这一事实暗示了当时它是一个相对较新的功能. 它还表明组合声明初始化语法也是最近的一个特性，并且确实在 1975 年的手册中声明器不能有初始化器。

1975 年手册第 11.1 节特别指出：

> C 不是块结构语言；这可以公平地被认为是一个缺陷。

块语句和初始化声明 (K&R) 解决了该缺陷，混合声明和代码 (C99) 是逻辑延续。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T19:43:06.857

在 C89 中，变量定义必须位于块的开头。（有关块的定义，请参见 C 标准）据我所知，这是为了简化在汇编程序中处理变量的方式。例如，让我们看一个简单的函数：

```
void foo()
{
    int i = 5;
    printf("%i\n", i);
} 
```

当 gcc 将此函数转换为汇编代码时，对 foo() 的调用将归结为一堆指令，包括为函数范围设置堆栈帧。这个堆栈帧包括在函数范围内定义的变量的空间，并且为了匹配高级语言 C 中的相同范围，它们需要在块的开头定义。

最后，它是关于易于实现和效率，因为一次声明一堆变量，它在块的开头，使编译器能够将它们批量推送到堆栈上，大约 89这也是一个性能考虑。

当然，这个答案非常简化，只是为了简要说明为什么会以这种方式完成。有关更多信息，您可能应该阅读早期 C89 标准的一些草案。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-14T19:50:50.753

一个没有真正回答的简短答案：C 语言最初从其前身 B 语言继承了这种声明顺序限制。不幸的是，我不知道为什么用 B 语言这样做。

另请注意，在新生的 C 中（在[“C 参考手册”](http://cm.bell-labs.com/who/dmr/cman.pdf)中描述）使用非常量表达式初始化变量（甚至是局部变量）是非法的。

```
int a 5;
int b a; /* ERROR in nascent versions of C */ 
```

（附注：在 CRM 初始化语法中不包含该`=`字符）。在一般情况下，这有效地否定了代码内变量声明的主要好处：将有意义的运行时值指定为初始值设定项的能力。即使在更现代的 C89/90 中，这个限制仍然正式应用于聚合初始化器（尽管大多数编译器都忽略了它）

```
int a = 5, b = a;
struct { int x, y; } s = { a, b }; /* ERRROR even in C89/90 */ 
```

只有在 C99 中，才有可能使用运行时值进行各种本地初始化。这最终释放了代码内变量声明的全部功能，因此 C99 引入它们是完全合乎逻辑的。

# python - 从 Python 结构继承的子类示例

> ID：14324548
> 
> 赞同：1
> 
> 时间：2013-01-14T18:42:59.873
> 
> 标签：python

在阅读 Python`struct`模块的文档时，关于如何使用[struct Class](http://docs.python.org/2/library/struct.html#classes)的解释有些不足。也就是说，直到我意识到它并不意味着要从一个类继承来创建子类，就像一个可能对[threading.Thread 类对象](http://docs.python.org/2/library/threading.html#thread-objects)所做的那样。是[Doug Hellmann 的 PyMOTW](http://www.doughellmann.com/PyMOTW/struct/)让我明白了这一点。

不过我很好奇，是否可以创建`struct`子类？我想这些可以用来向 struct 对象添加功能，例如创建依赖于*数据流本身*的格式。对此的一种用途可能是具有可变长度字段的数据流，其长度包含在流的早期部分中。或者根据之前字段中设置的标志，包含或省略某些字段。

例如，假设我有以下数据流：

```
>>> data = '\x01\x00\x04\x73\x70\x61\x6d' 
```

我用以下方式解压它：

```
>>> struct.unpack('>BH4s', data)
(1, 4, 'spam') 
```

其中第一个元素是 a `data_type`，第二个是 a `length`，第三个是可变长度字符串，其长度由第二个元素指定。

如果我想创建一个“解包器”来查看该`length`部分以获取有关如何解包其余数据流的信息，那么创建一个`struct`子类会是一个好方法吗？那里已经有这种事情的例子了吗？

# jquery - flexslider 多控制导航

> ID：14324555
> 
> 赞同：3
> 
> 时间：2013-01-14T18:43:30.597
> 
> 标签：jquery, navigation, flexslider

在这种情况下，使用了单个 flexslider 实例，但需要使用两个控制导航，即 2 x controlNav 和没有 directionNav。该设计需要滑块顶部的控制导航和滑块上的控制导航，两者在功能上是相同的，只是样式不同。

我无法让滑块与 2 个导航一起使用。我尝试使用 jquery 的克隆和以下使用 flexslider 的同步和 asNavFor 函数的代码。

该网站可以在[http://virtual1.blueplanetdns.com找到](http://virtual1.blueplanetdns.com)

```
<?php
if( function_exists('get_field') ){

    if(get_field('slider_item')): ?>

    <?php if(get_field('slide_interval')) 
    {
        $interval = get_field('slide_interval');
        $intervalMultiplied = $interval * 1000 ; 
    }
    else
    {
        $intervalMultiplied = '5000';
    }
    ?>

    <script type="text/javascript">
        $(window).load(function() {
            $('.flexslider-manual-controls-second').flexslider({
                directionNav: false,
                controlNav: false,
                asNavFor: ".flexslider"
          });
        });
    </script>

    <script type="text/javascript">
        $(window).load(function() {
            $('.flexslider').flexslider({
              animation: "fade",
              //controlsContainer: ".flexslider-container",
              manualControls: ".flexslider-manual-controls li a",
              directionNav: false,
              slideshow: true,
              slideshowSpeed: <?php echo $intervalMultiplied; ?>,
              animationLoop: true,           
              pauseOnAction: false,
              pauseOnHover: true,
              sync: ".flexslider-manual-controls-second"
          });
        });
    </script>

    <div class="flexslider-container clearfix">

        <div class="flexslider-manual-controls-second">
            <ul class="slides">
                <?php while(has_sub_field('slider_item')): ?>
                    <li class="secondaryNav-item">
                    </li>       
                <?php endwhile; ?> 
            </ul>
        </div>

        <div class="flexslider">
            <ul class="slides">
                <?php while(has_sub_field('slider_item')): ?>
                    <?php
                    //Image 
                    $attachment_object = get_sub_field('slider_background_image');
                    $size = "slider";
                    //var_dump($attachment_object);

                    $image_url = wp_get_attachment_image_src( $attachment_object['id'], $size );
                    //var_dump($image_url);
                    //$image_title = $attachment_object['title'];
                    //$image_alt = $attachment_object['alt'];
                    //$image_description = $attachment_object['description'];
                    ?>
                    <li class="slider-item" style="background:url('<?php echo $image_url[0]; ?>') no-repeat left top;">
                        <div class="slider-content">
                            <?php if(get_sub_field('slider_title')) echo '<h2 class="slider-title">'.get_sub_field('slider_title').'</h2>'; ?>
                            <?php if (get_sub_field('slider_link')) echo '<a class="slider-link" href="'.get_sub_field('slider_link').'">Find out more</a>'; ?>
                        </div>
                    </li><!-- end slide-item -->       
                <?php endwhile; ?> 
            </ul>

            <ul class="flexslider-manual-controls">
                <?php while(has_sub_field('slider_item')): ?>

                    <li class="nav-item">
                        <a href="#"><?php echo get_sub_field('slider_tab_title'); ?></a>
                    </li>

                <?php endwhile; ?>
            </ul>

        </div>                            
    </div>          
<?php 
endif; 

}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T21:58:30.183

一种可能的解决方案是创建自己的导航按钮并设置样式，并使用 jQuery 将它们与 flexslider 集成。试试下面的代码。

html:

```
<div class="new-nav">
  <a href="" class="new-flex-next">next</a>
  <a href="" class="new-flex-previous">previous</a>
</div> 
```

JS：

```
$('.new-nav').on('click', 'a', function(event) {
  event.preventDefault();

  target = {
    next: $('.flexslider').data('flexslider').getTarget('next'),
    previous: $('.flexslider').data('flexslider').getTarget('prev')
  };

  if ( $(this).hasClass('new-flex-next') ){
    $('.flexslider').data('flexslider').flexAnimate(target.next);
  }
  else if ( $(this).hasClass('new-flex-previous') ){
    $('.flexslider').data('flexslider').flexAnimate(target.previous);
  }
}); 
```

# eclipse - 在 Eclipse 上将 CGI-BIN 添加到 Tomcat 7

> ID：14324556
> 
> 赞同：1
> 
> 时间：2013-01-14T18:43:33.607
> 
> 标签：eclipse, tomcat, proxy, cgi, cgi-bin

我正在尝试使用需要使用 CGI 代理的 OpenLayers WPS 客户端，但我不确定如何在我的 Java EE Web 应用程序上启用 CGI。

我知道我必须配置 Tomcat 以允许使用 WEB-INF/cgi 文件夹，但我不确定如何。

我在 Windows Server 2008 RC2 下使用 Eclipse Juno for Java EE 和 Tomcat 7 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:50:50.347

我建议阅读[Tomcat CGI 文档](https://tomcat.apache.org/tomcat-7.0-doc/cgi-howto.html)，该文档告诉您如何启用 CGI。

# javascript - 替换标签并保留属性

> ID：14324559
> 
> 赞同：2
> 
> 时间：2013-01-14T18:43:48.240
> 
> 标签：javascript, jquery

> **可能重复：**
> [更改标签名称但保留所有属性](https://stackoverflow.com/questions/6482847/change-the-tag-name-but-keep-all-the-attributes)

是否可以用`<a>`标签替换`<span>`标签并保留其所有属性？

我有这个 HTML，当有人点击**编辑**时，我想将所有编辑链接转换为跨度

```
<a href="javascript:void(0);" class="edit" data-id="123">Edit</a> 
```

一旦用户完成编辑（通过按**Save**或**Cancel**），我想将所有 span 标签转换回链接。

```
$(".edit").live("click", function(){
    $(".edit").addClass("inactive-link");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:58:51.407

这应该适合您的需求：

```
function switchTag(e, toTag) {
    var outerHTML = e.outerHTML;
    outerHTML = outerHTML.replace(/^<([a-z])(.*?)>(.*?)<\/\1>$/ig, "<" + toTag + "$2>$3</" + toTag + ">");
    e.outerHTML = outerHTML;
}; 
```

使用示例：

```
$(".edit").click(function() {
    switchTag(this, "span");
}); 
```

[演示可用](http://jsfiddle.net/8kKMS/)；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:54:35.593

正如 FAngel 所指出的，在这种情况下，样式更改要简单得多。我将继续使用事件委托而不是`.live`在我的示例中，因为`.live`将在以后的 jQuery 版本中删除：

```
$(document).on('click', '.edit', function (e) {
   //add inactive class to *this* link
   $(this).addClass('inactive-link');

   //stop default link behavior, i.e. opening a new page
   e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:57:20.750

```
$(".edit").live("click", function(e){
    if(!$(e.target).hasClass("inactive-link")) { //suppose $(this) will work instead of $(e.target), but do not remember for sure
         $(".edit").addClass("inactive-link");// after this is done - this function will not execute anymore for .edit elements because of previouse if statement
         //code to start editing
    }
}); 
```

只需检查单击的元素是否具有类 inactive-link。并在编辑完成后将其删除。

基本上，链接没有“禁用”功能。但是你可以在编辑模式下取消绑定事件处理程序，或者检查链接是否有一些类，就像我上面的代码一样。

另外，请注意 live 已被弃用，你应该更好地使用`.on`（如果你有一些最新的 jQuery，v1.7 和更高版本）。[在这里](http://api.jquery.com/live/)你可以找到如何`live`替换`on`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:54:35.410

```
// Replacement Tag
var replacementTag = 'span';

$('a').each(function() {
    var outer = this.outerHTML;

    // Replace opening tag
    var regex = new RegExp('<' + this.tagName, 'i');
    var newTag = outer.replace(regex, '<' + replacementTag);

    // Replace closing tag
    regex = new RegExp('</' + this.tagName, 'i');
    newTag = newTag.replace(regex, '</' + replacementTag);

    $(this).replaceWith(newTag);
}); 
```

链接[http://jsfiddle.net/tTAJM/19/](http://jsfiddle.net/tTAJM/19/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:03:27.947

我会使用两个容器：`links`和`edit-links`

按下编辑按钮时，我将使用从容器链接转换为`edit-links`的所有标签填充 div`<a>``<span>`

当按下保存按钮时，我会重新创建容器`<a>`中的所有标签。`links`

```
$('#myButtonEdit').click(function(){        
    $('#links').hide();
    $('#edit-links').empty();

    //loop on all <a> tags to create <span> in edit-links div
    $('a').each(function(){
        $('#edit-links').append('<span id="'+this.id+'" class="'+$(this).attr('class')+'">'+$(this).attr('href')+'</span>');
    });
});

$('#myButtonSave').click(function(){

    $('#edit-links').hide();
    $('#links').empty();

    //loop on all <span> tags to create <a> in links container
    $('#edit-links span').each(function(){
        $('#links').append('<a id="'+this.id+'" class="'+$(this).attr('class')+'" href="'+$(this).html()+'">'+$(this).html()+'</span>');
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T19:10:50.487

除了我不喜欢您解决问题的方式之外，这是一种可能的解决方案：

```
function replaceElement(el, tagName) {
  var attrs = {
    text: el.innerHTML
  };
  $.each(el.attributes, function() {
    attrs[this.nodeName] = this.nodeValue;
  });
  $(el).replaceWith($("<" + tagName + " />", attrs));
}

$("a.edit").on("click", function() {
  replaceElement(this, "span");
}); 
```

**演示：http:** [//jsfiddle.net/rxzdK/](http://jsfiddle.net/rxzdK/)

这里的新元素将包含被替换元素的所有属性。但是，您应该考虑根据标准`<span>`不应该具有属性。`src`

# r - 使用循环和命名约定在数据框中创建新的命名变量

> ID：14324562
> 
> 赞同：6
> 
> 时间：2013-01-14T18:43:54.010
> 
> 标签：r, for-loop, dataframe

关于 R 最令人沮丧的事情之一是难以通过算法和直观的方式使用名称创建新的数据框变量。

假设我有一个包含一些变量的数据框，并且想在循环中基于它们创建新变量。例如，我想创建新变量，它们是现有变量的累积和，并命名为`df$var_cumul`

```
temp<-as.data.frame(cbind(seq(0:10),seq(10:20)))
names(temp)<-c("x","y")
for (i in 1:ncol(temp)) {
  vname<-names(temp)[i]
  assign(paste("temp$",vname,"_cumul",sep=""),cumsum(contrs[,i]))
} 
```

我没有找到作品的排列。这可能是我经常使用 R 遇到的最大问题之一。

有没有一种简单直观的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:50:49.710

是的，`[[`运营商：

```
temp <- data.frame(x = 0:10, y = 10:20)

for (n in names(temp))
  temp[[paste0(n, "_cumsum")]] <- cumsum(temp[[n]]) 
```

# asp.net - 文件上传问题

> ID：14324563
> 
> 赞同：1
> 
> 时间：2013-01-14T18:44:00.453
> 
> 标签：asp.net, file-upload, web-config, devexpress

当我在 web.config 编译部分中将调试从 true 更改为 false 时，使用 DevExpress aspxFileUpload 控件上传大于 6-7 mb 的文件时遇到问题。

我也在`maxRequestLength="51200"`httpRuntime 部分设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:31:45.150

您可以尝试以下解决方案，看看它是否能解决您的问题：

方法一：

增加连接超时设置 要增加连接超时设置，请执行以下步骤。

注意默认情况下，IIS 连接超时设置为 120 秒。

1\. 单击开始，指向所有程序，指向管理工具，然后单击 Internet 信息服务 (IIS) 管理器。2.右键单击要配置的虚拟服务器，然后单击“属性”。3.单击网站选项卡。4\. 在“连接”下，在“连接超时”框中键入所需的秒数，然后单击“确定”。

方法二：

添加 executionTimeout 值 1.在记事本中打开 Web.config 文件。

2.添加所需的 executionTimeout 值。例如，将值替换如下。

```
<location path="upload.aspx"> 
    <system.web> 
      <httpRuntime executionTimeout="999999" maxRequestLength="2097151" /> 
    </system.web> 
  </location> 
```

# css - 溢出切割结果（附图）

> ID：14324570
> 
> 赞同：0
> 
> 时间：2013-01-14T18:44:32.933
> 
> 标签：css, list, overflow, hidden

![](../Images/332b52478148b3be038b8ac684ac59e7.png)

左侧的“结果”部分是当前正在发生的事情。右边的部分是我想要发生的结果。当结果组对于容器来说似乎很大时，容器底部的结果会显示隐藏自身。我一直在网上搜索 CSS 修复，任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:00:38.143

您可以使用一个技巧，包括`columns`可能不完全支持的技巧。

[http://jsfiddle.net/szGVu/](http://jsfiddle.net/szGVu/)

```
#holder{
  columns: 110px;
  -webkit-columns: 110px;
  -moz-columns: 110px;

  height: 300px;
  width: 110px;
  overflow: hidden;
}

.child{
  margin: 5px;
  height: 100px;
  width: 100px;
  display: inline-block;
} 
```

# xml - Xpath：从每个子集中获取具有特定标记的第一个节点

> ID：14324573
> 
> 赞同：1
> 
> 时间：2013-01-14T18:44:44.240
> 
> 标签：xml, xpath, xml-parsing

对于这个例子，我想从每个（真正的 xml 可能嵌套更深）中获取第一个`b`元素。`t`不幸的是，我仅限于`xpath 1.0`. 我最初的想法是这样的，`//t//b[position()=1]`但我无法让它发挥作用。

```
<t>
 <a>
   <b/>
   <b/>
   <b/>
 </a>
</t>
<t>
 <a>
   <b/>
   <b/>
   <b/>
 </a>
</t> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:11:36.643

这几乎是对的。首先注意谓词`[position()=1]`等同于 simple `[1]`，从现在开始我将使用更短的形式。现在*根据定义*

```
//t//b[1] 
```

是简写

```
//t/descendant-or-self::node()/child::b[1] 
```

所以它会给你所有`b`嵌套在 a 内的元素，并且是它们各自父元素`t`的第一个子元素。`b`因此给出

```
<t>
  <a>
    <b attr="1"/>
    <b attr="2"/>
  </a>
  <a>
    <b attr="3"/>
  </a>
</t> 
```

你会得到 b 的 1*和*3。如果你只想要`b`每个里面的第一个，`t`那么你需要

```
//t/descendant::b[1] 
```

鉴于上面的示例 XML，这将只返回`<b attr="1"/>`

您通常可以将`.//x`其视为等效，`descendant::x`但这是显示两者之间细微区别的边缘情况之一......

# android - Theme.Dialog 没有显示我想要的内容

> ID：14324574
> 
> 赞同：0
> 
> 时间：2013-01-14T18:44:47.363
> 
> 标签：android, android-intent, android-manifest

我只是想写一个MenuInflate。当用户单击 AboutUs 按钮时，应该会出现一个小对话框并写下我想要的内容。但不知何故，它写的是 MainActivity 而不是“About us About us”

```
public boolean onOptionsItemSelected(MenuItem item) {

            switch (item.getItemId()) {
            case R.id.aboutUs:
                Intent i = new Intent("com.android.ABOUT");
                finish();
                startActivity(i);
                break;
            case R.id.preferences:
                break;
            }

            return false;
        } 
```

这是我的 about.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="About me About Me" >
        </TextView>
    >

    </LinearLayout> 
```

和 AndroidManifest.xml 的相关部分

```
 <activity
            android:name=".AboutUs"
            android:exported="false"
            android:label="@string/title_activity_main"
            android:theme="@android:style/Theme.Dialog" >
            <intent-filter>
                <action android:name="com.android.ABOUT" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

![和截图](../Images/09e93f530daa0685263bc1e585d7aee5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:05:24.077

如果`setContentView(R.layout.my_layout_file)`未包含在`onCreate()`方法中，则 Android 不知道`View`要显示什么，导致`Activity`. 这也将阻止`Activity`能够实例化任何`Views`诸如`TextViews`、`EditText`s 、`Buttons`等。

[http://developer.android.com/reference/android/app/Activity.html#setContentView(android.view.View](http://developer.android.com/reference/android/app/Activity.html#setContentView(android.view.View) )

# c# - 带递归的 C# 类

> ID：14324575
> 
> 赞同：2
> 
> 时间：2013-01-14T18:44:47.333
> 
> 标签：c#, list, class, recursion

我正在尝试创建一个包含“项目”列表的类。我已经成功完成了，但是我想在项目列表中创建一个项目列表。我也能够做到这一点，但是我必须为项目中的类使用不同的名称。

我想使用相同的类名，因为这将用于生成一些类名很重要的 json。此外，我希望能够以一种可以像文件夹结构一样递归的方式来做到这一点。每个属性的所有属性都是相同的。我希望我能很好地解释这一点。我实际上是在尝试创建一个文件夹/文件结构，其中每个文件夹中可以有 x 个文件，也可以有 x 个文件夹等等。

**例如：**

文档库

> -物品
> 
> --Item.Items
> 
> ---项目.项目.项目
> 
> --Item.Items
> 
> -项目2等...

这是现有的代码：

```
public class DocLib
{
    public string Title { get; set; }
    public string spriteCssClass { get { return "rootfolder"; } }
    public List<item> items { get; set; }

    public DocLib()
    {
        items = new List<item>();
    }

    public class item
    {
        public string Title { get; set; }
        public string spriteCssClass { get; set; }
        public List<document> documents { get; set; }

        public item()
        {
            documents = new List<document>();
        }

        public class document
        {
            public string Title { get; set; }
            public string spriteCssClass { get; set; }
        }
    }
} 
```

我相信可能有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:47:51.263

只需让 items 成为您“自己”类型的列表

```
public class DocLib{
   public string Title { get; set; }
   public string spriteCssClass { get { return "rootfolder"; } }

   List<DocLib> _items;

   public DocLib(){
      _items = new List<DocLib>();
   }

   public List<DocLib> Items { 
      get{
         return _items;
      }
   }
} 
```

编辑使用示例：

```
public static class DocLibExtensions {
    public static void Traverse(this DocLib lib,Action<DocLib> process) {
        foreach (var item in lib.Items) {
            process(item);
            item.Traverse(process);
        }
    }
}

class Program {
    static void Main(string[] args) {

        DocLib rootDoc = new DocLib {Title = "root"};

        rootDoc.Items.Add( new DocLib{ Title = "c1" });
        rootDoc.Items.Add(new DocLib { Title = "c2" });

        DocLib child = new DocLib {Title = "c3"};
        child.Items.Add(new DocLib {Title = "c3.1"});

        rootDoc.Items.Add(child);

        rootDoc.Traverse(i => Console.WriteLine(i.Title));

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:57:32.957

你也可以用泛型来做到这一点。

```
public class DocLib<T>
{
   public T Item { get; set; }
   public IEnumerable<DocLib<T>> Items { get; set; }
}

public class Item
{
   public string Title { get; set; }
   public string spriteCssClass { get; set; }
}

//Usage
//Set up a root item, and some sub-items
var lib  = new DocLib<Item>();
lib.Item = new Item { Title="ABC", spriteCssClass="DEF" };
lib.Items = new List<DocLib<Item>> { 
  new DocLib<Item>{ Item = new Item {Title="ABC2", spriteCssClass="DEF2"} },
  new DocLib<Item>{ Item = new Item {Title="ABC3", spriteCssClass="DEF3"} }
};

//Get the values
var root = lib.Item;
var subItems = lib.Items.Select(i=>i.Item); 
```

# apache - 将旧网址重定向到新网址所需的 mod 重写帮助

> ID：14324580
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:45:05.950
> 
> 标签：apache, .htaccess, url-rewriting, permalinks

基本上我正在尝试从这个旧网址移动所有网址：

[http://www.gamingonlinux.com/index.php?threads/crusader-kings-2-will-be-released-for-linux-today.1629/](http://www.gamingonlinux.com/index.php?threads/crusader-kings-2-will-be-released-for-linux-today.1629/)

到一个新的网址（当我将我的网站移动到新系统时，所有外部链接都不起作用）

[http://www.gamingonlinux.com/articles/crusader-kings-2-will-be-released-for-linux-today.1629](http://www.gamingonlinux.com/articles/crusader-kings-2-will-be-released-for-linux-today.1629)

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:08:42.137

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/index\.php$  [NC]
RewriteCond %{QUERY_STRING} ^[^/]+/([^/]+)/?  [NC]
RewriteRule .*   articles/%1?        [R=301,L] 
```

永久重定向

`http://www.gamingonlinux.com/index.php?anything/query`带或不带斜杠

至：

`http://www.gamingonlinux.com/articles/query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:52:04.193

在主目录的 .htaccess 中，这些方面的东西应该可以工作：

```
RewriteEngine on
RewriteRule ^articles/([^/\.]+)$ index.php?threads/$1/ [L] 
```

如果没有，Google 和 Bing 上有大量关于 mod_rewrite 和正则表达式的文档！

*编辑*：据我了解，您希望“/articles/”网址指向“index.php?thread”网址。如果我理解正确，您希望它反过来，如下所示：

```
RewriteEngine on
RewriteRule ^index.php?threads/([^/\.]+)/$ articles/$1 [L] 
```

*EDIT2*：由于网址中的问号，出现了一点问题。之后的所有内容都成为 QUERY_STRING 而不是 url 的一部分。我已经测试了以下代码，它可以工作：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} threads/(.*)
RewriteRule ^index\.php$ articles/%1 [L] 
```

希望有帮助。

# url-rewriting - 谷歌对多个内容的处罚

> ID：14324581
> 
> 赞同：0
> 
> 时间：2013-01-14T18:45:07.760
> 
> 标签：url-rewriting

假设我有一个 html 页面。通过 URL 重写，我管理了 100 个指向该页面的 URL。谷歌会将其识别为多个内容并给予我惩罚吗？（我不尝试这样做，这只是一个理论问题）

幕后花絮：由于技术原因，我希望有一些不同的 URL 包含标题。（我不能在任何地方都使用相同的长 URL。）所以现在我担心谷歌会对此做出什么反应。

感谢您的回答！

编辑：两个示例，这些 URL 指向同一页面：

```
http://myexample.com/holidays/entry14/My-great-title
http://myexample.com/holidays/entry14 
```

有很多网站这样做 - 但正如我所说 - 我真的不知道谷歌会对此做出什么反应。处罚是一件危险的事情。

# xcode - UIViewController 中的 Xcode UITableView 不显示内容

> ID：14324585
> 
> 赞同：0
> 
> 时间：2013-01-14T18:45:38.200
> 
> 标签：xcode, uitableview, uiviewcontroller

我有一个问题，我的 UIViewController 中有一个 UITableView，但是当我将内容添加到我的 UITableView 并重新加载数据时，什么也没有发生。

我的 UIViewController：

```
@interface WPCreateViewController : UIViewController<UITableViewDelegate, UITableViewDataSource, UIActionSheetDelegate> {
    ....
    @property (strong, nonatomic) IBOutlet UITableView *tableViewEntities;
    @property (strong, nonatomic) NSMutableArray *entities;
    ....
    - (IBAction)cancel:(id)sender;
    - (IBAction)save:(id)sender;
    - (IBAction)addEntities:(id)sender;
    - (IBAction)deleteEntities:(id)sender;
} 
```

实现是这样的：

```
@implementation WPCreateViewController

- (void)viewDidLoad{
    [super viewDidLoad];
    ....
    [self.tableViewEntities setAllowsMultipleSelectionDuringEditing:YES];
    [self.entities setArray:[[NSMutableArray alloc] init]];

    ....
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.entities count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellID = @"WPEntityCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    }

    cell.textLabel.text = [[self.entities objectAtIndex:indexPath.row] name];
    cell.detailTextLabel.text = [[self.entities objectAtIndex:indexPath.row] description];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

如果我尝试添加一些东西，就像我说的那样，我有这个方法与一个按钮连接

```
- (IBAction)addEntities:(id)sender {
    Entity *temp = [[Entity alloc] init];
    temp.name = @"Test";
    temp.description = @"TestTest";

    [self.entities addObject:temp];

    [self.tableViewEntities reloadData];
} 
```

顺便说一句，所有连接都正确设置，那么为什么 uitableview 不显示任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:48:12.717

将您的视图控制器设置为 tableView 的委托和数据源。

# android - Android中不同来源的倾斜矩阵

> ID：14324594
> 
> 赞同：1
> 
> 时间：2013-01-14T18:46:44.940
> 
> 标签：android, matrix, skew

我在尝试倾斜我的位图时遇到了一些麻烦。我希望我的位图倾斜，而它的底部保持固定。

这是我正在做的矩阵变换

```
 Matrix matrixx = new Matrix();

        matrixx.postSkew(-(events.getX() / 8) / 1000f, 0);

        matrixx.postTranslate(0, transtop);

        canvas.drawBitmap(bm2, matrixx, new Paint()); 
```

其中 events.getX 是手指的当前位置。当我这样做时，当图像向左倾斜时，位图的顶部似乎保持固定。

然而，我试图让位图的底部保持固定，而图像向右倾斜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:18:41.057

解决了。

您必须在另一个 postSkew 方法中更改 pivotx 和 pivoty。

```
boolean android.graphics.Matrix.postSkew(float kx, float ky, float px, float py) 
```

# php - 如何允许属性而不转义它们？

> ID：14324595
> 
> 赞同：0
> 
> 时间：2013-01-14T18:46:50.370
> 
> 标签：php, html

我正在使用 TinyMCE，我允许用户提交 HTML 代码。代码。我将此代码插入数据库，因此我使用 PHP 的 mysql_real_escape_string，但问题是当我这样做时，它会转义 TinyMCE 给出的引号，并且完成的样式被破坏。

所以我的问题是我如何允许它，以便用户可以提交带有属性的 HTML 代码，同时仍然防止 mysql 注入。

这是我的代码

```
if($_POST)
{
    $landingPage = mysql_real_escape_string($_POST['landingPage']);
    $landingPage = strip_tags($landingPage, '<p><em><span><strong>');
} 
```

# c# - 使用静态类型而不是变量

> ID：14324596
> 
> 赞同：5
> 
> 时间：2013-01-14T18:46:54.737
> 
> 标签：c#

当您的项目不使用命名空间时，有没有办法告诉编译器使用静态类型而不是变量？

例如，我有一个名为 User 的类，其中包含各种静态和非静态方法。假设其中一个静态方法被调用`GetUser()`。

我正在尝试`User.GetUser()`从一个在范围内也有一个变量（从基类继承）的方法调用该方法，该变量名为 User。但是，编译器抱怨说它找不到`User.GetUser()`，因为它认为我指的是范围内的用户变量。

如果这个项目使用命名空间，我可以这样做`ns1.User.GetUser()`，但在这种情况下这是不可行的。有没有办法告诉编译器我指的是`User`类型而不是`User`变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T18:48:29.910

您可以使用：

```
global::User.GetUser() 
```

或者一个 using 指令来别名类型：

```
using UserType = User;

...

UserType.GetUser(); 
```

我强烈建议您使用命名空间:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T18:49:24.090

你会写`global::User.GetUser()`吗？

见[全球](http://msdn.microsoft.com/en-us/library/cc713620.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T18:49:55.047

1.  使用`global::User.GetUser()`.

2.  使用别名：`using UserClass = User;`

3.  重命名变量。

4.  重命名类型。

5.  缩小变量的范围，使其不再在您使用它的范围内。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T18:50:32.363

或者，您可以为静态类使用别名。在您的`using`指令中，您可以添加：

```
using StaticUser = User; 
```

那么就不会再有歧义了。

# ruby-on-rails - 使用 Rails 从另一个网站获取 json 对象

> ID：14324597
> 
> 赞同：0
> 
> 时间：2013-01-14T18:46:56.547
> 
> 标签：ruby-on-rails, ruby, json, controller

我有一个 Ruby 脚本，它查询另一个网站，然后提供一个 json 文件。我对 Rails 很陌生。我正在使用带有 1 个网络测功机的 Heroku，我不想再添加任何测功机。

如何让 Rails 执行此脚本？我会从控制器做吗？

执行脚本会导致超时吗？

我将如何保存 json 文件以便我可以对其执行其他操作？

# pentaho - Pentaho水壶数据库错误

> ID：14324601
> 
> 赞同：1
> 
> 时间：2013-01-14T18:47:23.597
> 
> 标签：pentaho, kettle

我正在尝试`Infobright`从 Kettle Spoon 连接到数据库。15 分 2 秒后，我收到以下消息：

> com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障。

有人可以告诉我在哪里更改勺子/水壶中的设置，或者是否有任何其他问题给我这个错误消息。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:39:16.097

好的，这就是我所怀疑的——这实际上是一个 MySQL 的东西——对长时间运行的查询的限制。

如果您确实需要超过 15 分钟，您可以调整参数，请参见此处：

[http://wiki.pentaho.com/display/eai/mysql](http://wiki.pentaho.com/display/eai/mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:51:04.373

In pentaho if you follow the below instructions then you can easily avoid communication link failure messages.

1)Increase the write_net to 12000 secs(2 mins) 2)Increase the heap memory size as 1024

Because pentaho is a java based language if you are running the long running queries it cant handle the huge amount data.

# knockout.js - 当观察到的数组被推送到时，为什么这个 Child Computed Observable 没有更新？

> ID：14324603
> 
> 赞同：1
> 
> 时间：2013-01-14T18:47:31.227
> 
> 标签：knockout.js, computed-observable

我有一个简单的例子来说明这一点。取一个简单地保存一组项目的 a 。每一行都有一个可观察的属性，在这种情况下是一个日期。ui 绑定到一组排序项，这只是一个计算的 observable。这个计算出的 observable 反过来正在监视一个计算出的 observable，它将过滤掉行。

为什么这不能按需要级联？

```
//simple table model
var TableModel = function(){
var self = this;
self.items = ko.observableArray([
new TableRowModel(5),
new TableRowModel(2),
new TableRowModel(9),
new TableRowModel(7)
]);
 self.filtered = ko.computed(function(){
return [self.items()[0], self.items()[1], self.items()[2]];
 });
 self.sortedItems = ko.computed(function(){
return _.sortBy(self.filtered(), function(item){
    return item.value();
});
});
};

var TableRowModel = function(value){
  var self = this;

self.value = ko.observable(new Date(2013, value, 1));
};

var model = new TableModel();
ko.applyBindings(model);

model.items.push(new TableRowModel(1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:23:51.170

在您的代码中一切正常。“二月”不存在，因为它被过滤掉了。

该`push()`方法**将新项目插入到最后一个位置。**但是在您的系统中，`self.filtered`您只显示位置 0、1、2 的项目。但是当您`push`在代码中调用时，新项目将被插入位置 4，因此不会显示。

如果您想显示“二月”，您可以使用`unshift`：

> myObservableArray.unshift('Some new value') 在数组的开头插入一个新项

所以在你的代码中：

```
model.items.unshift(new TableRowModel(1)); 
```

这是一个更新的[JSFiddle](http://jsfiddle.net/nemesv/hnkqP/)。

# asp.net-mvc - 在Controller中使用依赖注入和存储库模式时如何处理业务规则？

> ID：14324609
> 
> 赞同：3
> 
> 时间：2013-01-14T18:47:45.103
> 
> 标签：asp.net-mvc, dependency-injection, repository-pattern

因此，在使用 MVC（或 Web API）的 Repository 模式的所有 DI 示例中，有 99% 在控制器操作中显示了与下面类似的内容（省略了构造函数注入代码`_repository`）。问题是假设不需要首先处理任何内容（如规则）并且立即开始持久性：

```
public ActionResult Create(Person person)
{
    if (ModelState.IsValid)
    {
      _repository.Add(person);
    }

    return View(person);
} 
```

问题是，如果我需要在持久化对象之前处理领域层中的*规则怎么办？*`person`显然，我不在 Controller 中执行该逻辑，而是在域层中需要它。下面哪个选项更好：

**选项 1：**将要在域/业务层中调用的存储库上的所有持久性细节委托并从控制器中拉出。更新后的代码如下所示：

```
if (ModelState.IsValid)
{
  using (busniessLogic = new MyApp.BusniessLogic(_repository))
  {
       busniessLogic.ProcessRulesAndSavePerson(person);
  }
} 
```

领域层可能有这样的方法：

```
public void ProcessRulesAndSavePerson(Person person)
{
   //process some rules...

   if(rules = true)
   {
     //use injected repository to add now that rules have passed
     _repository.Add(person)
   }
} 
```

**选项 2：**在 Controller 中保持与现在相同，但只需在保存到存储库之前调用处理规则即可。更新后的代码如下：

```
if (ModelState.IsValid)
{
  using (busniessLogic = new MyApp.BusniessLogic())
  {           
       busniessLogic.ProcessRulesAboutPerson(person);
       _repository.Add(person)
  }
} 
```

我也对其他想法持开放态度，但我倾向于选项 #1。我喜欢保持控制器薄，只是将注入的 _repository 传递给需要它的层。

对此的任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:26:49.677

这两个选项都将创建对业务逻辑处理器的依赖，在使用关键字时始终必须小心，`new`因为当您尝试对方法进行单元测试时，几乎总是会遇到问题，这违背了依赖注入的目的。

您最好创建一个处理复杂业务逻辑的服务并将其注入您的控制器。如果您的大部分逻辑都很复杂，我会跳过将存储库一起传递给控制器​​，而只依赖服务为我处理所有事情。

控制器：

```
public MyController(IPersonService personService) 
{
    _personService = personService;
}

public ActionResult Create(Person person)
{
    if (ModelState.IsValid)
       _personService.Create(person);
    else
       ......
} 
```

人员服务：

```
public PersonService(IPersonRepository repo) 
{
    _repo = repo;
}

public int Create(Person person)
{
    //businesslogic
    return _repo.Add(person);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:17:48.127

不一定是最好的方法，但这是我通常的做法：

*   IService（在您的情况下为业务逻辑）被注入控制器（而不是 IRepository）
*   如果 ModelState 有效 => 控制器将调用 IService 中将模型作为参数的方法
*   如果需要，将 IRepository 注入到 Service 实例中。

这使我能够： - 能够对提供 IService 模型的控制器进行单元测试。- 让控制器不了解存储库和数据访问层。

# ios - iOS 5/6 Twitter 分享无对话

> ID：14324613
> 
> 赞同：0
> 
> 时间：2013-01-14T18:47:56.883
> 
> 标签：ios, ios5, twitter, ios6

我想在没有本机对话框的情况下分享到 Twitter，有没有办法实现这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:51:02.087

是的。您可以创建自己的对话框，并在后台使用[TWRequest API](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWRequestClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010942)来调用 Twitter 的 API。

参考[Twitter 的 API 文档](https://dev.twitter.com/docs)以获取要设置的适当值。

这样，您仍然可以利用 iOS 内置的 twitter 凭据处理功能，而不是自己动手。

# iphone - 选择多个图像的问题

> ID：14324617
> 
> 赞同：0
> 
> 时间：2013-01-14T18:48:18.450
> 
> 标签：iphone, ios, camera, uiimagepickercontroller, freeze

[如何检测 iPhone/iPad 设备上的总可用/空闲磁盘空间？](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:17:32.523

我假设单击“完成”按钮会调用取消选择器；在这种情况下，您可以尝试您是否尝试实现委托方法：

```
 - (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
      [self dismissViewControllerAnimated:YES completion:^(void) {
           NSLog(@"Cancelled pick");
      };
 } 
```

看起来你在打电话`release`——有什么理由不使用 ARC？

如果我不得不猜测，我会说也许警报解除实际上是在调用类似的东西

```
 [imagePicker.delegate imagePickerControllerDidCancel:imagePicker]; 
```

但它已经发布了，所以你会看到这个“锁定”问题。也许在调试器中单步执行并确保这些对象仍然存在。

*编辑：*

虽然它不能解决您的原始问题，但您可以在启动图像选择器之前检查可用空间，可能使用类似[这样的内容，因此帖子](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)建议：

```
- (uint64_t)freeDiskspace
 {
     uint64_t totalSpace = 0;
     uint64_t totalFreeSpace = 0;

     __autoreleasing NSError *error = nil;  
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
     NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

     if (dictionary) {  
         NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
         NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
         totalSpace = [fileSystemSizeInBytes unsignedLongLongValue];
         totalFreeSpace = [freeFileSystemSizeInBytes unsignedLongLongValue];
         NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
     } else {  
         NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %d", [error domain], [error code]);  
     }    

     return totalFreeSpace;
 } 
```

# jquery - 提交后没有出现确认

> ID：14324621
> 
> 赞同：4
> 
> 时间：2013-01-14T18:48:34.893
> 
> 标签：jquery, html

在这里有一个 jsfiddle，我正在尝试整理一个确认信息，该确认信息应在提交后出现，以确保用户是否要提交：

[http://jsfiddle.net/baxGm/1/](http://jsfiddle.net/baxGm/1/)

问题是没有出现确认，有谁知道这是为什么？

**HTML：**

```
<form id='choiceForm' action='assessment.php' method='post'>
    <p><strong>Chosen Assessment:</strong></p>
    <table>
    <tr>
        <th></th>
        <td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='' /></td>
    </tr>
    <tr>
        <th>Assessment:</th>
        <td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /></td>
    </tr>
    <tr>
        <th>Date:</th>
        <td><input type='text' id='currentDate' name='Datecurrent' readonly='readonly' value='' /></td>
    </tr>
    <tr>
        <th>Start Time:</th>
        <td><input type='text' id='currentTime' name='Timecurrent' readonly='readonly' value=''/></td>
    </tr>
    </table>
    <p id='submitchoicebtn'>
        <input id='choiceSubmit' type='submit' value='Choose Assessment' name='choiceSubmit' onClick='myClickHandler(); return false;'/>
    </p>
    <div id='currentAlert'></div>
</form> 
```

**查询：**

```
function choicevalidation() {
    var isDataValid = true;
    var currentAssesO = document.getElementById("currentAssessment");
    var currentAssesMsgO = document.getElementById("currentAlert");

    currentAssesMsgO.innerHTML = "";

    if (currentAssesO.value == "") {
        $('#targetdiv').hide();
        currentAssesMsgO.innerHTML = "Please Select an Assessment to edit from the Assessment Drop Down Menu";
        isDataValid = false; 
    } else {
        currentAssesMsgO.innerHTML = "";
    }
    return isDataValid;
}

function showConfirm() {
    var examInput = document.getElementById('curentAssessment').value;
    var dateInput = document.getElementById('currentDate').value;
    var timeInput = document.getElementById('currentTime').value;

    return confirm("Are you sure you want to take the following Assessment:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);
}  

function myClickHandler() {
    if (choicevalidation()) {
        showConfirm();
    }
} 
```

**更新：**

```
 <body>

    <script type="text/javascript">

        $('#sessionsDrop').change( function(){

            $('#targetdiv').hide();

            if( $(this).val() !== '' ){
                var text = $(this).find('option:selected').text();
                var split = text.split(' - ');
                $('#currentId').val($(this).find('option:selected').val());
                $('#currentAssessment').val( split[0] );     
                $('#currentDate').val( split[1] );     
                $('#currentTime').val( split[2] );     
            }
            else{
                $('#currentAssessment,#currentDate,#currentTime,#currentId').val('');           
            }
        });

        $('#assessmentForm').delegate('change','select',(function(warnings)
{
    return function()
    {
        warnings.html('');
    };
}($('#warnings'))));

function validation(e) {

                var isDataValid = true;

                var moduleTextO = document.getElementById("modulesDrop");

                var errModuleMsgO = document.getElementById("moduleAlert");

         if (moduleTextO.value == ""){
          $('#targetdiv').hide();
          $('#assessmentForm').hide();
          $('#choiceForm').hide();
          $('#submitchoicebtn').hide();
          errModuleMsgO.innerHTML = "Please Select a Module";
          isDataValid = false;    
        }else{
                errModuleMsgO.innerHTML = ""; 
            }

                if (isDataValid === false)
    {
        if (e.preventDefault)
        {
            e.preventDefault();
            e.stopPropagation();//VERY important
        }
        e.returnValue = false;
        e.cancelBubble = true;
    }

            return isDataValid;

            }

       function choicevalidation() {

                var isDataValid = true;

                var currentAssesO = document.getElementById("currentAssessment");

                var currentAssesMsgO = document.getElementById("currentAlert");

          currentAssesMsgO.innerHTML = "";

      if (currentAssesO.value == ""){
          $('#targetdiv').hide();
          currentAssesMsgO.innerHTML = "Please Select an Assessment to edit from the Assessment Drop Down Menu";
          isDataValid = false; 
        }else{
            currentAssesMsgO.innerHTML = "";
        }
            return isDataValid;

        }

        function showConfirm(){

              var examInput = $('#currentAssessment').val();
            var dateInput = $('#currentDate').val();
            var timeInput = $('#currentTime').val();

            return confirm("Are you sure you want to take the following Assessment:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput)          
} 

$('#choiceSubmit').click(function(e){myClickHandler(e)});

function myClickHandler(e){
    e.preventDefault(); 
     if(choicevalidation()){ 
                if(showConfirm())
                   $('#choiceForm').submit();
     } 
}

    </script>   

   Logged In: <b>Mayur Patel</b> | <a href='./studentlogout.php'>Logout</a>     
        <div class="topcorner"><a id="studentmenulink" href="studentmenu.php">Back to Menu</a></div>

        <noscript style='color: red'><img src="Images/warning-2.fw.png" alt="Javascript Warning" id="warningImage" name="warningSymbol"/> In order to use this application without any problems, you must have javascript enabled</noscript>

        <div id="js">

<h1>TAKE AN ASSESSMENT</h1>   

<form action="/u0867587/Mobile_app/assessmentchoice.php" method="post" onsubmit="return validation(event);">
<table>
<tr>
<th>Module: <select name="modules" id="modulesDrop">
<option value="">Please Select</option>
<option value="CHI2513_Systems Strategy_1">CHI2513 - Systems Strategy</option>
<option value="CHT2220_Interactive Systems_4">CHT2220 - Interactive Systems</option>
</select></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
<div id="moduleAlert"></div>
<div id="targetdiv"></div>
</form>

<div id='lt-container'>
<form action='/u0867587/Mobile_app/assessmentchoice.php' method='post' id='assessmentForm'>
<p id='warnings'></p>
<p><strong>Selected Module:</strong> CHI2513 - Systems Strategy <input type='hidden' value='1'></p>
<p><strong>Assessments:</strong> <select name="session" id="sessionsDrop">
<option value="">Please Select</option>
<option value='28'>LDREW - 09-01-2013 - 09:00</option>
<option value='29'>BQNYF - 10-01-2013 - 10:00</option>
<option value='22'>WDFRK - 17-01-2013 - 09:00</option>
<option value='26'>POKUB1 - 25-01-2013 - 15:00</option>
</select> </p>   
</form>
</div>
<div id='rt-container'>
<form id='choiceForm' action='assessment.php' method='post'>

    <p><strong>Chosen Assessment:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Assessment:</th>
    <td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Date:</th>
    <td><input type='text' id='currentDate' name='Datecurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Start Time:</th>
    <td><input type='text' id='currentTime' name='Timecurrent' readonly='readonly' value=''/> </td>
    </tr>
    </table>
    <p id='submitchoicebtn'>
    <input id='choiceSubmit' type='submit' value='Choose Assessment' name='choiceSubmit'/>    
    </p>
    <div id='currentAlert'></div>
    </form>

    </div>

</div>

<script type="text/javascript">
document.getElementById('js').style.display = 'block';
</script>

    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:59:07.650

myClickHandler() 不是全局函数，它位于 jquery onload 函数的上下文中，因此您会收到“myClickHandler is not defined”错误。

使用常规 jquery 事件绑定而不是内联 onclick 和函数

```
$("#choiceSubmit").click(function(){
  if(choicevalidation()){ 
    showConfirm(); 
  } 
  return false;
}); 
```

[http://jsfiddle.net/baxGm/3/](http://jsfiddle.net/baxGm/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:49:11.870

好的，在这种情况下`input`is 类型`submit`，这意味着它的默认行为是提交。在这个小提琴中：http: [//jsfiddle.net/efuZA/](http://jsfiddle.net/efuZA/)我没有更改类型，而是添加`e.preventDefault()`以防止它立即提交然后使用`submit()`。

# python - Pymongo 或 Mongodb 将两个相等的 python 字典视为不同的对象。我可以强迫他们受到同样的对待吗？

> ID：14324626
> 
> 赞同：11
> 
> 时间：2013-01-14T18:48:52.220
> 
> 标签：python, mongodb, pymongo

请查看以下代码行和结果：

```
import pymongo

d1 = {'p': 0.5, 'theta': 100, 'sigma': 20}
d2 = {'theta': 100, 'sigma': 20, 'p': 0.5}

I get the following results:

d1 == d2 // Returns True

collectn.find({'goods.H': d1}).count() // Returns 33

collectn.find({'goods.H': d2}).count() // Returns 2 
```

其中，`collectn`是一个 Mongodb 集合对象。

是否有设置或查询方法，以便我为上述两个查询获得相同的结果？

他们本质上使用的是同一个字典（在存在的意义上`d1 == d2`）`True`。我正在尝试执行以下操作：在将记录插入数据库之前，我检查是否已经存在具有正在添加的确切值组合的记录。如果是这样，那么我不想创造新的记录。但是由于上面显示的行为，即使它确实存在并且将重复记录添加到数据库中（当然，具有不同的_id但所有其他值都是相同的，我更喜欢），也有可能得到该记录不存在没有那个）。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:53:39.487

[您遇到的问题在此处](http://docs.mongodb.org/manual/core/read-operations/#read-operations-subdocuments)的 mongodb 文档中进行了说明。它还与 Python 字典是无序的，而 MongoDB 对象是有序的 BSON 对象这一事实有关。

相关的报价是，

> 如果子文档与指定的子文档（包括字段顺序）完全匹配，则子文档内的相等匹配选择文档。

我认为如果将所有三个属性都视为主对象的子属性，而不是作为子对象的一个​​属性集合，我认为你可能会*更好*。这样子对象的排序就不会被 python 解释器强加到查询中。

例如...

```
d1 = {'goods.H.p': 0.5, 'goods.H.theta': 100, 'goods.H.sigma': 20}
d2 = {'goods.H.theta': 100, 'goods.H.sigma': 20, 'goods.H.p': 0.5}

collectn.find(d1).count()
collectn.find(d2).count() 
```

...可能会产生更一致的结果。

最后，一种改变更少代码的方法：

```
collectn.find({'goods.H.' + k:v for k,v in d1.items()})
collectn.find({'goods.H.' + k:v for k,v in d2.items()}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:54:24.153

我只能想到两件事要做：

1.  将您的查询构造为：`collectn.find({'goods.H.p':0.5, 'goods.H.theta':100, 'goods.H.sigma':`20}).count()。这将找到正确数量的文件......

2.  重组你的数据->如果你看一下[MongoDB：索引顺序和查询顺序必须匹配？](https://stackoverflow.com/questions/5245737/mongodb-indexes-order-and-query-order-must-match)你会希望你可以在 p,sigma,theta 上建立索引，这样当在查询中，任何顺序的术语都会提供正确的结果。在我的简短测试中（我不是专家），我无法以一种与您当前的结构产生相同效果的方式进行索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:24:51.097

我认为您正在寻找[$where 运算符](http://docs.mongodb.org/manual/reference/operators/#_S_where)。

这适用于节点：

```
var myCursor = coll.find({$where: function () {return obj.goods.H == d1}});
myCursor.count(function (err, myCount) {console.log(myCount)}); 
```

在 Python 中，我相信您需要传入[BSON 代码对象](http://api.mongodb.org/python/current/api/bson/code.html)。

文档警告说，$where 运算符应该作为最后的手段使用，因为它会带来性能损失，并且不能使用索引。

似乎值得建立子属性的排序，并在可能的情况下在插入或作为后期处理时强制执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T20:03:02.107

我认为您的问题在 mongodb doc 中提到：

> 该字段必须与子文档完全匹配，包括 order....

在这里查看[文档](http://docs.mongodb.org/manual/applications/read/)。有子文档的例子。

子文档中的字段必须与查询中的字段顺序相同才能匹配。

# android - 片段、可打包对象和返回栈

> ID：14324628
> 
> 赞同：1
> 
> 时间：2013-01-14T18:49:04.287
> 
> 标签：android, android-fragments, fragment

假设我有片段 1 和片段 2。

片段 1 创建一个`Person`对象并将`name`属性设置为“George”。

Fragment 1 然后创建 Fragment 2，将 Person 对象作为 a 传递`Parcelable`，然后将 Fragment 2 推入回栈。

片段 2 读入 parcelable。后来，Fragment 2 将 的 更改`name`为`Person`Nancy。

用户点击后退按钮，将 Fragment 2 从堆栈中弹出并返回到 Fragment 1。

现在我们回到片段 1，`Person`对象的属性是什么？`name`是乔治还是南希？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:08:55.913

看起来`Fragment2`你得到的实际上是对 parcelable 对象的引用`Fragment1`。这样，您可以得出您正在修改同一个对象的结论。

[安卓文档：](http://developer.android.com/reference/android/os/Parcel.html)

> Parcel 的一个不同寻常的功能是能够读取和写入活动对象。对于这些对象，不会写入对象的实际内容，而是写入引用该对象的特殊标记。从 Parcel 中读回对象时，您不会获得该对象的新实例，而是获得一个句柄，该句柄对最初写入的完全相同的对象进行操作。

如果它可以帮助您知道该怎么做；）

干杯!

# jgrapht - graph.addEdge() 隐式添加不存在的顶点？

> ID：14324630
> 
> 赞同：2
> 
> 时间：2013-01-14T18:49:06.167
> 
> 标签：jgrapht

虽然 JGraphT 将添加顶点和添加边的行为分开是件好事，但您肯定会想将两者结合起来吗？换句话说，如果您尝试添加一条边，其中一个（或两个）顶点都不在图中，那么添加它们？

JGraphT 是否有这样的快捷方式来编写 3 个方法调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:12:15.013

您可以简单地覆盖 JGraphT 的方法，使其添加图中尚不存在的顶点：

```
@Override
public E addEdge(V sourceVertex, V targetVertex) {
    if (!containsVertex(sourceVertex)) {
        addVertex(sourceVertex);
    }
    if (!containsVertex(targetVertex)) {
        addVertex(targetVertex);
    }
    return super.addEdge(sourceVertex, targetVertex);
} 
```

# vba - InlineShape.Width 在第一次运行时不起作用

> ID：14324631
> 
> 赞同：1
> 
> 时间：2013-01-14T18:49:06.043
> 
> 标签：vba, image, ms-word, width

我正在尝试使用 VBA 调整 Word 文档中的图片大小。该代码工作正常，但仅在第二次运行时。如果您打断它然后单步执行它，它也可以工作。有人可以评论我所缺少的吗？

```
Documents.Open FileName:=vDirectory & "\" & vFile

Dim objPic As InlineShape
For Each objPic In ActiveDocument.InlineShapes

If objPic.Width > CentimetersToPoints(16.51) Then
    With objPic
        .Width = CentimetersToPoints(16.51)
    End With
End If

Next objPic 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T15:52:52.310

从访问中运行单词宏时，我遇到了完全相同的问题。（Word中也出现了错误）

我终于改变了我的代码：

```
Dim objWord as object
Dim pic as InlineShape
Set objWord = CreateObject("Word.Application")    
With objWord.ActiveDocument
    For Each pic In .InlineShapes
        If pic.Width > 450 Then
            pic.Width = 450
        End If
    Next
End With 
```

至：

```
Dim objWord as object
Dim pic as InlineShape
Set objWord = CreateObject("Word.Application")    
With objWord.ActiveDocument
    For Each pic In .InlineShapes
        If pic.Width > 450 Then
            pic.Width = 450
        End If
    Next
    For Each pic In .InlineShapes
        If pic.Width > 450 Then
            pic.Width = 450
        End If
    Next
End With 
```

工作正常。和看起来一样愚蠢！

# hta - 使用 HTA 写入文本文件

> ID：14324634
> 
> 赞同：3
> 
> 时间：2013-01-14T18:49:11.440
> 
> 标签：hta

我正在尝试创建一个允许用户将数据添加到文本文件的 HTA 文件。我在该地区相当缺乏经验。

我需要完成几件事：

1.  将输入的数据位写入文本文件（我的代码就是这样做的）
2.  让用户从可用文件的下拉列表中选择要写入的文件
3.  如果数据可以通过单击或按 Enter 提交，那就太好了
4.  清除提交时的字段
5.  记录每个条目。不覆盖文本文件中的数据（我的代码覆盖）

例子：

123
456
789

如果我的代码看起来不连贯，我深表歉意。

任何帮助或建议将不胜感激。

谢谢你。

```
<html><head>
<SCRIPT LANGUAGE="VBScript">

    Sub Window_onLoad
        window.resizeTo 480,150
    End Sub 

</SCRIPT>
<script language="javascript">
function Writedata()
{
var fso = new ActiveXObject("Scripting.FileSystemObject");
var write_id;
write_id = document.getElementById('write_id').value ;
alert('The data has been written to \n' + write_id);
var s = fso.CreateTextFile(write_id, true);

s.WriteLine(document.getElementById('name_id').value);

s.Close();
}
</script>
</head>
<body>

<table>
<tr>
<td>Input: </td>
<td><input type="text" name="name" value="" id="name_id"></td>
<td><select><option name="write" value="C:\temp\test1.txt" id="write_id">Option1</option>    </select></td>
<td><input type="button" onclick="Writedata()" value="submit"></td>
</tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:05:09.573

看起来你已经编辑了你的代码。虽然它可以更灵活：

`var s = fso.CreateTextFile(write_id, true);`也许更确切地说：

```
var s = fso.OpenTextFile(write_id, 2, true); 
```

其中`2`表示字节码： `1`= 读取，`2`= 写入，`8`= 追加。

`write_Id`应包含文件的完整路径，例如`D:/Foldername/filename.txt`.

* * *

这不是你应该使用的方式`select`，而是像这样给`id`for`select`本身：

```
<select id="write_id">
    <option value="C:\temp\test1.txt">Option1</option>
</select> 
```

现在 selected 的值`option`也存储为 的值`select`，您可以像现在一样在脚本中读取它。

你也可以在 JS 中声明一个变量并一起赋值：

```
var write_id = document.getElementById('write_id').value; 
```

# java - 我们如何引用文件的特定行？

> ID：14324635
> 
> 赞同：1
> 
> 时间：2013-01-14T18:49:18.577
> 
> 标签：java, algorithm, file, data-structures, hash

我正在阅读有关算法问题的内容，其中一个如下：

> 有一个包含数百万行数据的文件，有 2 行是相同的。这些行太长了，可能不适合记忆。找到 2 条相同的线。

建议的解决方案是分段读取行并为每行创建散列。
例如，您通过构建第 1 行的第 1 部分的哈希（可以在内存中读取）然后构建第 1 行的第 2 部分的哈希到第 1 行的第 N 部分来构建第 1 行的哈希。
将哈希存储在文件或哈希表​​。对于任何相同的哈希值，比较行。如果线条相同，我们解决了它。

尽管我从高层次上理解了这个解决方案，但我不知道如何实现它。我们如何将哈希与文件中的特定行相关联？这是语言实现的细节吗？
例如，在 Java 中我们将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:54:26.457

真正的答案是购买更多内存。您可以在 Java 2 GB 中拥有的最长字符串，并且现在可以安装在机器中。您可以以不到 200 美元的价格购买 32 GB。

* * *

但要解决问题，我建议你

*   找到每一行的偏移量。
*   找到相同长度的线（使用偏移量的差异）
*   计算具有相同长度的行的 64 位或更长的哈希值。
*   对于具有相同哈希的行，进行逐字节比较。

注意：如果您没有足够的内存来缓存整个文件，这将需要很长时间。如果您有一台 32 GB 的机器并且它有一个 64 GB 的文件，那么每次传递大约需要 20 分钟，并且这有多个传递。

* * *

> 1）哪个API可以找到偏移量？

您计算已读取的字节数，这就是偏移量。

> 2）真正的答案是购买更多的内存项目经理不同意这个对于真实的产品。你有不一样的经历吗？

我向他们指出，如果他们认为这是对资源的良好利用，我可以花一天的时间花费他们 > 1000 美元（即使这不是我得到的报酬），从而节省 100 美元的可重用内存。我让他们决定；）

我 8 岁的儿子在他制造的 PC 中有 8 GB，因为内存花了我 24 英镑。然而，您是对的，有些项目经理认为 8 GB 对于专业人士来说太多了，而他们每小时要花费这么多钱！？我在 PC 中有 16 GB，我不用来运行任何严重的东西，因为我在 256 GB 的机器上工作。这些天你可以购买 2 TB 的机器，这对于大多数应用程序来说都是多余的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:32:11.167

虽然我同意解决方案是利用现代技术，并利用如今的廉价内存，但问题在于锻炼大脑并了解如何在给定的限制条件下解决问题。

您谈到的散列相当简单。java 解决方案可以利用引擎盖下的一些东西，这可能会掩盖实际发生的事情，所以我将首先解释解决方案，然后再解释 java 实现。

通用解决方案：

Hashing，如 SHA1、MD5 等，通过压缩输入生成一个整数。假设您只能在每行中存储前 MB 的字符。

*   您将遍历每一行，获取前 MB 的字符，然后将其传递给散列算法（例如 MD5）。
*   然后将哈希映射为键，将行号列表/数组映射为值。
*   在第一次通过后，任何匹配前 MB 字符的行都将以相同的散列结束，因此在映射中的相同列表中。
*   为了准备第二遍，您搜索地图并剔除任何仅包含一个行号的列表。
*   然后，您通过从映射中的剩余条目中编译行号来创建行号列表，这些行将是第二遍中检查的唯一行。
*   第二遍，您从行列表中的每一行中提取第二 MB 字符，将它们散列并以与第一遍相同的方式将它们放入地图中。
*   遍历映射中的条目，剔除只有一个行号的哈希条目。
*   重复第二步，但增加字符块 (MB) 以与通行号一致。
*   当你到达一个只有一个带有多个行号的散列并且该散列只有两个元素的通道时，这些行是相同的两个。

这本质上是一个树搜索。

Java 方法：Java 有一个名为 HashMap 的类，它会自动对键进行哈希处理。通过使用

```
HashMap<String,ArrayList<Integer>> 
```

对于您的主地图，您只需每次调用

*   map.get(mbBlock).add(lineNumber); 当然，您应该检查这是否是第一次使用此键，以免出现空指针异常。
*   每次通过后，剔除仅包含一行的条目。
*   重复剩余的行，直到你只剩下两个行号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:55:08.250

1.  获取每行的前 k 个字符，其中 k 是可配置的。做你的散列以找到可能具有相同行的几组行。

2.  根据第一步的结果，您极大地缩小了搜索范围，在每个较小的组上运行您的算法以获取接下来的 k 个字符。

3.  如果不是在最坏的情况下，搜索范围在每一轮之后都会显着缩小。

算法的诀窍是把大问题分解成小问题，充分利用前面步骤的结果。

# javascript - Javascript：从 ajax 成功设置类属性

> ID：14324637
> 
> 赞同：7
> 
> 时间：2013-01-14T18:49:22.790
> 
> 标签：javascript, jquery

我有一个名为 Spotlight 的“类”/函数。我正在尝试通过 ajax 检索一些信息并将其分配给 Spotlight 的属性。这是我的 Spotlight 课程：

```
function Spotlight (mId,mName) {
    this.area = new Array();

    /**
     * Get all area information
     */
    this.getArea = function () {

        $.ajax({
            url: base_url +'spotlight/aGetArea',
            type: 'POST',
            success: function (data) {
                this.area = data;
            }
        });
    }
} 
```

我已将该对象分配给一个数组，并且很难从 Spotlight 中访问它，因此我希望使用“this”访问所有内容。虽然成功功能似乎在课堂之外，但我不知道如何在课堂内制作它。

有没有办法使用 this.area 而不是 Spotlight.area 将数据放入类属性中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T18:54:46.750

this 的值取决于每个函数的调用方式。我看到解决此问题的 3 种方法：

### 1.为此创建别名

```
var that = this;
this.getArea = function () {
    $.ajax({
        url: base_url +'spotlight/aGetArea',
        type: 'POST',
        success: function (data) {
            that.area = data;
        }
    });
}; 
```

### 2.使用jQuery`.ajax` `context`选项

```
this.getArea = function () {
    $.ajax({
        url: base_url +'spotlight/aGetArea',
        type: 'POST',
        context : this,
        success: function (data) {
            this.area = data;
        }
    });
}; 
```

### 3\. 使用绑定函数作为回调

```
this.getAreaSuccess = function (data) {
    this.area = data;
};
this.getArea = function () {
    $.ajax({
        url: base_url +'spotlight/aGetArea',
        type: 'POST',
        success: this.getAreaSuccess.bind(this)
    });
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:51:46.970

反正`Spotlight.area`也行不通。您只需要保留外部`this`：

```
this.area = [];
var theSpotlight = this; 
```

然后在回调中：

```
 theSpotlight.area = data; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:55:43.557

在success函数内部时，**this**对应success函数的作用域。

```
function Spotlight (mId,mName) {
    this.area = [];
    var scope = this;

    /**
     * Get all area information
     */
    this.getArea = function () {

        $.ajax({
            url: base_url +'spotlight/aGetArea',
            type: 'POST',
            success: function (data) {
                scope.area = data;
            }
        });
    }
} 
```

# python - python while循环中断

> ID：14324639
> 
> 赞同：1
> 
> 时间：2013-01-14T18:18:44.140
> 
> 标签：python

我正在尝试为我的程序做一个开/关开关：（见后面`###`我在说什么）

```
while 1:
    str = raw_input("insert your word: ")
    n = input("insert your scalar: ")
    def string_times(str, n):
        return n * str
    print string_times(str, n)

    ###
    def switch(on,off):
        raw_input("On or off? ")
        if switch == "on":
            continue
        if switch == "off":
            break
    switch(on,off) 
```

我得到一个 continue not in loop 错误。基本上，我想在程序运行一次后创建一个开或关开关。我要修复什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T18:28:14.367

您不能在嵌套函数中使用`break`and 。`continue`改用函数的返回值：

```
def switch():
    resp = raw_input("On or off? ")
    return resp == "on":

while True:
    # other code

    if not switch():
        break 
```

请注意，在循环中定义函数没有什么意义。在循环之前定义它们，因为创建函数对象需要一些性能（尽管很少）。

该`switch()`函数不需要参数（您根本没有使用它们），并且`continue`也不需要。如果你没有跳出循环，当你到达终点时，它只会从顶部继续。

`continue`仅当您希望循环再次从顶部开始时才需要*跳过循环中的其余代码*：

```
count = 0
while True:
    count += 1
    print count
    if loop % 2 == 0:
        continue

    print 'We did not continue and came here instead.'

    if count >= 3:
        break

    print 'We did not break out of the loop.' 
```

# jquery - 创建和删除课程？

> ID：14324645
> 
> 赞同：0
> 
> 时间：2013-01-14T18:50:00.787
> 
> 标签：jquery, css, class, jquery-animate, css-transitions

> **可能重复：**
> [jQuery 创建 CSS 规则/类@运行时](https://stackoverflow.com/questions/1212500/jquery-create-css-rule-class-runtime)

是否可以使用 jQuery 创建和删除 css 类？

请注意，我不是在谈论`addClass`and `removeClass`。我实际上想用jQuery编写一个新类并删除旧类。

我问的原因是因为我有很多动画要转换为 CSS3 过渡。它有点毛茸茸，因为`height`我设置的初始值是动态的，所以我目前正在尝试将类从没有转换的类更改为有转换的类。

问题是 CSS 比 jQuery 快得多，即使我先设置 CSS 设置然后切换类，新的 CSS 设置实际上是在切换类*之后*应用的（喜欢过渡）。

所以，我想动态创建类并添加它们然后删除它们并删除它们。

如果这不可能，有谁知道如何解决我的动态 CSS 设置问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:53:46.340

您可以向 html 文档添加新元素：

```
$("<style type='text/css'> .myclass{ color:#000; border:1px solid #000;} </style>").appendTo("head"); 
```

但我认为不可能直接将其附加到外部 css 文件。

# html - iPhone/iPad 上不显示背景图像

> ID：14324646
> 
> 赞同：2
> 
> 时间：2013-01-14T18:50:02.650
> 
> 标签：html, ios, css

我们的 Magento 网站上有一个背景图片，由于内容的数量，它会根据需要进行扩展。它在 PC 和（希望是 Mac）上运行良好。但在任何 iOS 设备上，都不会显示白色背景。

我已经附上了两张截图——一张是它在普通 PC 浏览器中的样子，另一张是它在 iPhone 上的样子。（截图见下一篇）

这是我们的网站：[http ://tinyurl.com/arfpf7g](http://tinyurl.com/arfpf7g)

这是一个直接指向 iOS 设备上未显示的图像的链接：http: [//tinyurl.com/bcovmvg](http://tinyurl.com/bcovmvg)

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:55:15.427

问题是 iOS 对它可以加载的图像的最大尺寸有限制。从内存来看，它是 3 到 5 兆像素，具体取决于设备。作为参考，您的图像是 9.78mp (978 x 10000)。

你的背景图片绝对没有理由那么大。它是 171kb，大约 10px 后可以重复。切掉顶部，它可能有 10px 高，你可以使用它来实现相同的效果`background-repeat: repeat-y`。然后只需将背景的顶部应用到另一个元素。

或者，可以使用框阴影和虚线边框在 css 中复制该背景图像。

CSS：

```
.outer {
  margin: 20px;
  width: 200px;
  box-shadow: 0 0 10px 4px rgba(0, 0, 0, 0.3);
  padding: 10px;
}

.inner {
  height: 200px;
  border: 1px dashed #bde432;
} 
```

HTML：

```
<div class="outer">
  <div class="inner"></div>
</div> 
```

演示：http: [//jsfiddle.net/WUpEF/](http://jsfiddle.net/WUpEF/)

# paypal - PayPal Prestahop 货币转换

> ID：14324650
> 
> 赞同：1
> 
> 时间：2013-01-14T18:50:13.377
> 
> 标签：paypal, prestashop

我正在使用[Prestahop 1.5](http://prestashop.com)并希望使用[PayPal](http://paypal.com)模块来接收付款，但不支持**克罗地亚库纳 (HRK)**，因此我试图找到一种在将其处理为 PayPal 之前将其从**HRK**转换为**美元的方法。**

有人在这方面取得成功吗？或者知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T23:25:03.450

来自一个 prestashop 论坛讨论，关于不支持货币的同一问题：

在贝宝模块 express_checkout/process.php 第 102 行

```
$this->currency = new Currency((int)$this->context->cart->id_currency); 
```

改成：

```
$this->currency = new Currency((int)$this->context->cart->id_currency=2); 
```

其中 2 是货币 ID

您应该找到美元货币 ID 并在此示例中替换它。我没有对此进行测试，但值得一试。

# vhdl - VHDL 格雷码计数器

> ID：14324652
> 
> 赞同：0
> 
> 时间：2013-01-14T18:50:24.930
> 
> 标签：vhdl, gray-code

我正在尝试使用移位寄存器和 4-1 MUX 实现格雷码计数器。有谁知道要使用什么逻辑？！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:43:00.223

我不确定这是否满足您“使用移位寄存器和 4-1 多路复用器”的要求，但这是 Altera 的一个小型且功能强大的灰色计数器参考设计：

[https://www.altera.com/support/support-resources/design-examples/design-software/vhdl/vhd-gray-counter.html](https://www.altera.com/support/support-resources/design-examples/design-software/vhdl/vhd-gray-counter.html)

# sql - SQL中的变量数组

> ID：14324655
> 
> 赞同：0
> 
> 时间：2013-01-14T18:50:33.267
> 
> 标签：sql, arrays, variables

我很难弄清楚我的问题。希望你们都知道这是否可能。我已经达到了对 MS Access 的限制，我正在尝试将我的 Access 模块转换为在 SQL Server 上运行。

这是我正在运行的可视化基本代码：

```
Set rs1 = db.OpenRecordset("select * from ReportFilter")
If rs1.EOF = True Then GoTo nextstep1    
rs1.MoveFirst
a = 0
Do
    b = 0
    RPrim(a, b) = rs1.Fields(0).Value
    b = b + 1
    RPrim(a, b) = rs1.Fields(1).Value
a = a + 1
rs1.MoveNext
If rs1.EOF = True Then GoTo nextstep1
Loop 
```

我不确定，并尝试了一些“谷歌搜索”来弄清楚如何在 SQL 服务器上执行此操作。

reportfilter 表已经填充，我只是找不到一种方法来用表值填充变量。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:59:58.313

Access 和 SQL Server 之间的区别之一是 Access 嵌入了对 VBA 的支持——即不仅是一个数据库，而且还是一个紧凑的应用程序平台。SQL Server 是一种更健壮、可扩展和企业级的 RDBMS，并且不像 VBA 那样带有嵌入式 4GL 语言。我建议将您的扩展 SQL Server 解决方案与 VB.net 结合起来（您几乎可以在其中插入您的 Access VBA，可能只需要稍作修改）或使用任何其他免费语言（例如，Perl 是轻量级的或 Java）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:00:07.863

这看起来像您正在尝试将表中的前两列读入数组。SQL Server 没有数组。您正在读取 VB 中的数组。这本身与数据库无关。

您可以在 SQL Server 上运行原始查询，它应该可以正常工作。

您可以用数据库中的查询替换后续代码。

另外，养成明确列出列的习惯：

```
select <col1>, <col2>
from ReportFilter 
```

# django - 为动态选择字段设置默认值

> ID：14324662
> 
> 赞同：0
> 
> 时间：2013-01-14T18:51:10.647
> 
> 标签：django, django-forms

我有一个表格，要求用户输入他们的邮政编码。一旦他们这样做，它就会将他们发送到另一个表单，其中有一个名为“pickup_date”的字段。这会从前一个字段中获取 zip 的值，并将与该邮政编码匹配的所有可用pickup_dates 获取到 ChoiceField 中。我在模型表单的**init中设置了所有这些。**

```
def __init__(self,*args,**kwargs):

    super(ExternalDonateForm,self).__init__(*args,**kwargs)

    if kwargs:
        zip = kwargs['initial']['zip']
        self.fields['pickup_date'] = forms.ChoiceField(choices = self.get_dates(zip))

    elif self.errors:
        zip = self.data['zip']
        self.fields['pickup_date'] = forms.ChoiceField(choices = self.get_dates(zip)) 
```

我遇到的问题是表单上还有其他错误。我使用`elif self.errors`来重新生成可能的选择，但它不默认为原始选择的选项。它返回并默认为第一选择。我怎样才能使它成为表单错误的默认选项是最初发布的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:23:56.973

将 self.fields['pickup_date'] 更改为 self.fields['pickup_date'].initial 看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:37:08.977

在玩了一段时间后，我得到了它的工作。上面，我使用返回元组的 get_dates() 函数设置所有动态选择。[我没有这样做，而是使用自定义的ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)而不是常规的 ChoiceField返回了这样的字段对象。

```
class MyModelChoiceField(ModelChoiceField):

    def label_from_instance(self, obj):
        return obj.date.strftime('%a %b %d, %Y') 
```

日期功能

```
def get_dates(self,zip):        
            routes = Route.objects.filter(zip=zip).values_list('route',flat=True)
            pickups = self.MyModelChoiceField(queryset = PickupSchedule.objects.filter(         
                    current_count__lt=F('specials'),
                    route__in=routes,
                ).order_by('date')
            )    

            if not pickups:
                pickups = (('----','No Pickups Available At This Time'),)

            return pickups 
```

在**初始化**中，我设置了`self.fields['pickup_date']`这样的值..

```
self.fields['pickup_date'] = self.get_dates(zip) 
```

# c++ - 具有非阻塞控制台输入的跨平台方式

> ID：14324663
> 
> 赞同：1
> 
> 时间：2013-01-14T18:51:13.053
> 
> 标签：c++, c, input, console, cross-platform

我需要一种以非阻塞方式调用 std::cin 的跨平台方式。我知道线程是可能的，但也许有更好的选择？Threds 似乎是矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:04:37.190

标准 C 和 C++ 不提供任何方法来执行非阻塞 I/O。通常，在用户按下键之前，C 和 C++ 运行时环境根本看不到任何输入`<ENTER>`。

因此，唯一的选择实际上是使用单独的线程来读取输入，或者使用特定于平台的方法来执行非阻塞输入（可能已包装，以便在移植到不同平台时可以轻松替换该部分。库之类的`ncurses`提供这些为许多平台预先包装的输入法）。

# php - 我可以把这段代码减半吗？

> ID：14324665
> 
> 赞同：0
> 
> 时间：2013-01-14T18:51:14.520
> 
> 标签：php

我有一个 php 表单和很多标记，所以我需要重复相同的表单来创建新的页面条目和相同的编辑，所以例如现在正在做的是

```
if($_GET['page'] == 'hello') {
   //A whole lot of markup goes here
   <form method="post">
     <input type="text" name="whatever" />
     <input type="submit" name="create_new" />
   </form>
} elseif ($_GET['page'] == 'edit_hello') {
   //Same form markup is here, only change is the retrieved 
   //data values are echo'ed out in respective fields
   $query = mysqli_fetch_array(mysqli_query(...));
   <form method="post">
     <input type="text" name="whatever" value="<?php echo $query['column_name']; ?>" />
     <input type="submit" name="create_new" />
   </form>
} 
```

所以知道如何使用相同的代码来创建新条目以及更新表单值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:54:31.303

使用一个变量并给它一个空字符串的默认值。

```
if($_GET['page'] == 'hello') {
   $whatever = "";
} elseif ($_GET['page'] == 'edit_hello') {
   $query = mysqli_fetch_array(mysqli_query(...));
   $whatever = $query['column_name'];
}

<form method="post">
   <input type="text" name="whatever"
      value="<?php echo htmlspecialchars($whatever); ?>" />
   <input type="submit" name="create_new" />
</form> 
```

请注意，我还为您添加了适当的转义，以便您避免 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:55:08.027

像这样的东西应该可以工作（未经测试）

```
$value = '';

if ($_GET['page'] == 'edit_hello') $value = $query['column_name'];

if (in_array($_GET['page']), array('hello', 'edit_hello')) { ?>
<form method="post">
     <input type="text" name="whatever" value="<?php echo $value; ?>" />
     <input type="submit" name="create_new" />
   </form>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:58:48.557

我不确定我是否正确理解您的问题。您想使用相同的表单来创建新条目或编辑，对吗？例如，简单的方法可以是这样，但还有许多其他方法。

如果您为编辑模式创建表单，则在其上添加一个隐藏字段。在表单的发布请求后，您可以检查此变量。记住：您需要更新一些键，以便更新正确的数据库记录。

```
if (isset($_POST["variable"]))
{
//updateaction
}
else 
{ //insertaction 
} 
```

亲切的问候

# java - 基于胶囊图的Java多线程程序

> ID：14324667
> 
> 赞同：0
> 
> 时间：2013-01-14T18:51:24.103
> 
> 标签：java, multithreading, uml, signals, state-machine

我有一个基于胶囊图的 java 程序，其中我有 3 个类胶囊、端口和 state_machine。一个州的统计机 prnts 其州的 nr。程序的工作原理是[这样的](https://docs.google.com/drawings/d/193Xxmg44ogTGnS6HKrk8Xxg0xclertKnWvCAHGoxq-M/edit)

面：

```
public class SimpleCapsule {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
    Port p2=new Port(null);

    Capsule1 c1= new Capsule1(3,1, p2, null);
    Capsule1 c2= new Capsule1(2,-3, null, p2);    

    //while ( false ){
        c1.state.start();
        c2.state.start();
      //  }
   }
} 
```

港口：

> 公共类端口{
> 
> ```
> private Port connect;
> public boolean signal=true;
> 
> public Port (Port c){
>     this.connect=c;
>     }
>  public void snedSignal(boolean b){
>     if (this.connect!=null){
>     this.connect.signal=b;
>     } 
> } 
> ```
> 
> public boolean getSignal(){ return this.signal; } }

胶囊：

```
 public class Capsule1 {
      public StateMachine1 state; public Port port;    

 public Capsule1 (int i, int signal, Port connecte, Port thisPort){

     if (thisPort!=null){
         this.port=thisPort;
         }else{
         port=new Port(connecte);
         }    

     state= new StateMachine1 (i,signal,this.port);
     }

 } 
```

状态机：

```
public class StateMachine1 extends Thread{
    public boolean signal=false;
    public int nr, signalSend;    
    public Port port;

    public StateMachine1(int i, int signalNr, Port p){
        this.nr=i;        
        this.signalSend=signalNr;
        this.port=p;
    }    

    @Override
    public void run(){        
        System.out.println(nr+"started");
    while (true){
        if (this.port.getSignal()){
            for (int i=0; i<this.nr;i++){                
                System.out.println(nr+"th: "+i+" sS");                                            
                    if (signalSend==i){
                        port.snedSignal(true);                            
                    }else{
                        port.snedSignal(false);                        
                    }   
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException ex) {
                    Logger.getLogger(StateMachine1.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

        }else{
            System.out.print(nr+"TH-"+this.port.getSignal()+" ");                    
        }
    }
    }
} 
```

像这样，程序运行良好，但如果你评论状态机类的最后一个原始数据： `System.out.print(nr+"TH-"+this.port.getSignal()+" ");`第二个状态机**SM2**在第 3 个或第 4 个信号启动后没有收到。

问题是什么？我在这个信号发送过程中哪里出错了？

# sql - sql查询帮助多连接？

> ID：14324672
> 
> 赞同：0
> 
> 时间：2013-01-14T18:51:34.630
> 
> 标签：sql, oracle, join

这是我的表，我使用 sql developer oracle

Carowner(车主id, carowner-name,)

汽车（Carid、汽车名称、车主 ID*）

驱动程序（driver_licenceno，驱动程序名称）

比赛（比赛编号、比赛名称、奖金、比赛日期）

RaceEntry(Race no*, Car id*, Driver_licenceno*, Finishing_position)

我试图列出做下面的查询

**从今年年初开始，哪些车手在比赛中排名第二。输出中包含比赛名称、车手姓名和赛车名称**

我尝试过

```
select r.racename, d.driver-name, c.carowner-name

from race r, driver d, car c, raceentry re

where re.finishing_position = 2 and r.race-date is ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:00:51.663

首先，当您定义超过 3 个或 4 个表恕我直言时，很难习惯 where 子句中的多个连接。

改为这样做：

```
Select 
  a.columnfroma
, b.columnfromb
, c.columnfromc
from tablea a
  join tableb b on a.columnAandBShare = b.columnAandBShare
  join tablec c on b.columnBandCShare = c.columnBandCShare 
```

虽然没有人会说这是您必须使用的方法，但它是一种更具可读性的执行连接方法。

否则，您将在 where 子句中进行连接，如果您的连接中有其他谓词，您将不得不注释掉哪个是哪个，如果您需要返回并查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:51:19.710

就像是：

```
select r.racename, d.driver-name, c.carowner-name
from race r
join raceentry re on r.race_no = re.race_no
join car c on re.car_Id = c.car_id
join driver d on re.driverliscenceNo = d.driverliscenceNo
where re.finishing_position = 2 and r.race-date >='20130101' 
```

这假设只有一辆车和一名车手在特定比赛中获得第二名。否则您可能需要更多条件。如果这是您自己的表格设计，您需要立即开始学习如何在表格之间命名一致。这很重要。多个表中的字段应具有相同的名称和数据类型。您还需要停止使用隐式语法。这是一个 aSQL 反模式和一种非常糟糕的编程技术。它会导致诸如意外交叉连接之类的错误，并且当事情变得更复杂时更难阅读和维护。正如您正在学习的那样，您需要立即停止这种坏习惯。

# rest - LDAP 到 SAML/REST 代理

> ID：14324673
> 
> 赞同：3
> 
> 时间：2013-01-14T18:51:36.260
> 
> 标签：rest, ldap, saml

我们正在做一个云 POC，我们将在云中托管只能与 LDAP 通信的应用程序。云中是否有任何系统/设备/虚拟目录从应用程序端看起来像是一个 LDAP 服务器，并且在输出端通过 Internet 与我们的 SSO 产品对话，该产品可以针对我们的用户进行身份验证隐藏在我们内部防火墙内的企业 LDAP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:13:52.830

新兴的[SCIM（跨域身份管理系统）](http://www.simplecloud.info/)协议可能对您所说明的用例更有意义。它旨在围绕身份存储提供一个简单的 REST API，以便您可以执行创建/读取/更新/删除操作。从理论上讲，可用的内容可以通过 SCIM 服务器中的某些策略来控制，以使您的客户端与后端 LDAP 目录进行交互。

现在很多产品都在采用 SCIM 标准，比如 Ping Identity、Salesforce 和 UnboundID 的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:04:17.357

您需要部署连接到 ldap 的身份提供程序。您可以采用 CAS 或 SAML 技术。

在该维基百科条目中，您可以查看不同的产品（商业和免费软件）： [http ://en.wikipedia.org/wiki/SAML-based_products_and_services](http://en.wikipedia.org/wiki/SAML-based_products_and_services)

他们中的大多数都支持 Ldap 作为身份验证源后端。

另请查看此线程： [PHP、Python、Ruby 应用程序之间的单点登录方式](https://stackoverflow.com/questions/13276242/way-to-single-sign-on-between-php-python-ruby-applications/13286721#13286721)

# c# - 尝试运行应用程序的第二个实例时如何将主窗体置于顶部

> ID：14324676
> 
> 赞同：0
> 
> 时间：2013-01-14T18:51:37.930
> 
> 标签：c#

我用一种形式编写了一个简单的 Windows 应用程序。它的目的是只在一个实例中运行。我使用互斥锁方法并在第二个实例尝试运行时抛出一条消息。现在我想更改此消息框，并且我只想在尝试触发第二个实例时将第一个实例置于顶部。我的代码目前是：

```
namespace WindowsFormsApplication2
{
    static class Program
    {

        [STAThread]                
        static void Main()
        {

            bool mutexCreated = false;
            System.Threading.Mutex mutex = new System.Threading.Mutex(true,@"Local\WindowsFormsApplication2.WindowsFormsApplication2.exe", out mutexCreated);

           if(!mutexCreated )  
           {
               if( MessageBox.Show("The application is already running.Hit the OK to exit",             "",MessageBoxButtons.OK, MessageBoxIcon.Information ) != DialogResult.Cancel )
               {
                  mutex.Close(); 
                  return;
               }
           }

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:42:26.530

.NET 已经对此提供了很好的支持，既支持单实例应用程序，又让第一个应用程序知道另一个实例正在启动。强烈赞成这个而不是自己旋转。使用 WindowsFormsApplicationBase 类，更改 Program.cs 文件，如下所示：

```
using System;
using System.Windows.Forms;
using Microsoft.VisualBasic.ApplicationServices;    // Add reference to Microsoft.VisualBasic

namespace WindowsFormsApplication1 {
    class Program : WindowsFormsApplicationBase {
        public Program() {
            this.EnableVisualStyles = true;
            this.IsSingleInstance = true;
            this.MainForm = new Form1();
        }
        protected override void OnStartupNextInstance(StartupNextInstanceEventArgs e) {
            e.BringToForeground = true;
        }
        [STAThread]
        public static void Main(string[] args) {
            new Program().Run(args);
        }
    }
} 
```

请注意 OnStartupNextInstance() 方法如何确保将主窗口带回前台。您还可以使用它的 e.CommandLine 属性来获取从第二个实例传递到主实例的命令行参数。如果您使用文件关联，这往往很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:14:28.830

这是我能找到的做同样事情的帖子的最新版本。本质上，您获取其他流程信息，然后将其提交。

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/42b3db75-e61e-4f59-bf2b-c96a40cfb4e4](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/42b3db75-e61e-4f59-bf2b-c96a40cfb4e4)

# ios - NSFetchRequest - 包括挂起的更改

> ID：14324685
> 
> 赞同：3
> 
> 时间：2013-01-14T18:52:44.030
> 
> 标签：ios, core-data, nsfetchrequest, nsfetchedresultscontroller

我的 NSFetchedResultsController 出现问题，似乎可以通过打开 IncludesPendingChanges 来解决，这让我很担心。**（我发现这不是真的，包括未决的更改也无济于事。）**

发生的情况是我的 Fetched Results Controller 在完整的 API 刷新时正确获取并显示我的对象。逐步进行，我已经确认这个完整的 API 刷新的临时上下文被保存和合并，没有错误。

但是，如果我随后返回到从不同导航流执行相同获取请求的视图，则仅返回和显示一个部分完整的对象，而不是完整的对象集。如果我此时执行完整的 API 刷新，刷新会显示正确的对象。

我相信我的问题可能是 mergeChangesFromContextDidSaveNotification 没有传播到主要上下文，但是从我的日志和逐步执行来看，在我看来它正在正确保存。我不知道从这里去哪里。虽然 IncludesPendingChanges 修复了症状，但我认为它不能解决根本问题。

作为一些附加信息，我正在使用这个框架来管理我的核心数据：[https ://github.com/vokalinteractive/CoreDataManager-iOS](https://github.com/vokalinteractive/CoreDataManager-iOS)

我通过在 VIFetchedResultsController.m 的第 156 行添加来打开 includesPendingChanges

```
 [fetchRequest setIncludesPendingChanges:YES] 
```

**编辑**无论什么侥幸让我相信 includePendingChanges 到 YES 修复了问题不再存在。原来这个项目有一些非常麻烦的内存管理，在花了一整天清理之后，我仍然没有接近完成这项工作。不过，在同一点上，更改似乎没有传播到主数据存储，或者没有坚持下去。

作为提示，就像我在下面的评论中提到的那样，即使我指定“includePendingChanges：YES”，使用以下命令注销我获取的对象：

```
[self.fetchedResultsController.fetchedObjects description] 
```

以“includesPendingChanges：NO”结尾。知道什么会导致这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:31:18.420

也许你弄错了。默认`includesPendingChanges`值为`YES`，因为这是您通常想要的行为。您的 UI 更新被破坏是意料之中的。

将此属性设置`NO`为实际上只是为了方便使用 提取`NSDictionaryResultType`，尤其是在包含可以在数据库级别处理的简单聚合时。

我怀疑这绝不是您的错误，而是您使用的框架可能存在缺陷。无论如何，您认为是一个问题，实际上只是预期的行为。

[请参阅文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/doc/uid/TP30001170-SW5)中的两个简短段落，其中对此进行了很好的解释。

# android - 文档中根元素之后的标记必须格式正确。样式.xml

> ID：14324688
> 
> 赞同：1
> 
> 时间：2013-01-14T18:52:49.530
> 
> 标签：android, xml, styles

我得到的错误：

```
"The markup in the document following the root element must be well-formed." 
```

使用 Eclipse，我的 styles.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<resources xmlns:android="schemas.android.com/apk/res/android"/>
   <style name="ToDoTheme"parent="@android:style/Theme.Black"> 
      <item name="android:textSize">12sp</item> 
   </style> 
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:15:22.847

哦！看起来你关闭`<resources .... />`得太早了。您需要删除`/`第一个`resources`以使收盘`</resources>`平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:04:20.413

那里的物品`;`在`<resources.../>;`做什么。我会先摆脱它。

# vb.net - VB.NET 杀死多进程

> ID：14324692
> 
> 赞同：0
> 
> 时间：2013-01-14T18:53:15.000
> 
> 标签：vb.net

我使用这段代码来杀死一个特定的进程：

```
Dim pProcess() As Process = System.Diagnostics.Process.GetProcessesByName("notepad")

For Each p As Process In pProcess
    p.Kill() 
```

但是如何使用相同的代码杀死多个进程？像记事本和单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:10:00.230

...我会建议，正如@Christian K 建议的那样，您在.Net 上进行更多研究，因为大多数程序员不喜欢仅仅杀死进程，但是您可以通过创建一个子例程来做您想做的事情：

```
Sub KillProcess(ByVal ProcessName As String)
    Dim pProcess() As Process = System.Diagnostics.Process.GetProcessesByName(ProcessName)

    pProcess(0).Kill()
End Sub 
```

然后你会像这样使用它：

```
 KillProcess("notepad")
    KillProcess("winword") 
```

希望这可以帮助

# ios - 参考模态中的第二个子视图

> ID：14324694
> 
> 赞同：0
> 
> 时间：2013-01-14T18:53:16.247
> 
> 标签：ios, storyboard, modalviewcontroller

我有一个主/详细应用程序，我正在从我的主视图中显示一个模式。我的模态包含一个导航控制器和两个子视图。第一个子视图（登录）推送到第二个子视图（选择和初始化数据）。如何获得对第二个子视图的引用，以便我可以在我的主视图中捕获它的委托调用？

目标是在用户登录后更新我的主表视图，并从 JSON Web 服务初始化核心数据数据库。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:22:51.183

当您说“子视图”时，我假设您指的是模态呈现的导航控制器堆栈的第二个视图控制器。如果是这样，您无法在呈现之前从您的主视图中引用它，因为它尚未创建（模态 NavController 对此负责）。

您可以参考第*一个*viewController - as

```
[[self presentedViewController] topViewController] 
```

将您自己作为委托传递给该控制器，然后该控制器将负责在创建第二个控制器时将您的委托引用传递给第二个控制器。

更简单地说，您可以从第二个 viewController 中参考*演示*设置：

```
[[self navigationController] presentingViewController] 
```

这将使您获得对容器控制器的引用，从那里您可以轻松地获得对详细视图控制器的引用。

您可以使用该路由将数据返回到主表视图。

另请参阅我的答案：
[如何使用 StoryBoard 在 NavigationController 和 ViewController 之间传递值？](https://stackoverflow.com/questions/14307316/how-can-i-pass-value-between-navigationcontroller-and-viewcontroller-with-storyb/14307642#14307642)

# php - 在 Javascript 中使用 PHP

> ID：14324698
> 
> 赞同：0
> 
> 时间：2013-01-14T18:53:29.010
> 
> 标签：php, javascript, html

我刚刚发现 PHP 可以像这样在 Javascript 中使用：

```
<script>
function seeTime() {
alert("<?php echo time(); ?>");
}
</script>

<button onclick="seeTime();">Click Me</button> 
```

每次单击“Click Me”按钮时，上面的代码都会弹出一条带有 Unix 时间戳的警报消息。但问题是，每次单击按钮的时间都保持不变，直到重新加载页面。

我知道 AJAX 是解决方案，但有没有其他方法可以更新 javascript 代码/文件中的数据，而无需使用任何外部 php 文件通过 AJAX 从中获取数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:56:13.023

> 我知道 AJAX 是解决方案，但有没有其他方法可以更新 javascript 代码/文件中的数据，而无需使用任何外部 php 文件通过 AJAX 从中获取数据？

是的，根本不要使用 PHP：

```
function seeTime() {
    alert(Math.floor(new Date().getTime()/1000));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:56:22.873

您对 PHP 和 JavaScript 感到困惑。PHP*没有*在 JavaScript 中“使用”。PHP 在服务器上运行并生成页面，然后将其发送到浏览器。

`<?php echo time(); ?>`替换为当前时间戳，然后发送到运行 JavaScript 的浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:56:46.490

据我所知这是不可能的，PHP代码是在服务器端编译的，所以你从php编译返回的都是静态值，你必须使用AJAX来刷新时间值。

如果你愿意，你可以用 JS 设置时间。

# javascript - jquery - 单击菜单项或其他元素将更改正文背景图像

> ID：14324699
> 
> 赞同：0
> 
> 时间：2013-01-14T18:53:31.880
> 
> 标签：javascript, jquery, html

我已经阅读了很多教程，但似乎无法正确理解。好的，我知道当您对完全相同的元素执行某些操作时，jquery click 功能有效，但是您如何使其影响另一个元素并切换回来？

我有一个菜单，当我单击一个项目时，我希望背景（正文）更改为图像。

示例：HTML

```
<body>
<ul class="menu"> 
  <li class="menu-item"><a>item 1</a></li>
  <li class="menu-item"><a>item 2</a></li>
  <li class="menu-item"><a>item 3</a></li>

</ul>
</body> 
```

查询

```
$(".menu-item a").click(function () {
  $(body).css('background', 'http://example.com/image.png'); <-- first menu item
  $(body).css('background', 'http://example.com/image.png'); <-- second menu item
  $(body).css('background', 'http://example.com/image.png'); <-- third menu item
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:01:51.343

您可以使用`.index()`- [**DEMO**](http://jsfiddle.net/rGFzJ/)

```
$("a").on("click", function(e) {
  e.preventDefault();

  var i = $("li").index( $(this).parent() );

  if ( i === 1 ) {
    $('body').css('background', 'beige');
  } else if ( i === 2 ) {
    $('body').css('background', 'honeydew');
  } else {
    $('body').css('background', 'pink');
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:00:43.850

这看起来像你想要做的吗？

```
$(".menu-item a:nth-child(1)").click(function () { // first menu item
    $(body).css('background', 'http://example.com/image.png');
});
$(".menu-item a:nth-child(2)").click(function () { // second menu item
    $(body).css('background', 'http://example.com/image.png');
});
$(".menu-item a:nth-child(3)").click(function () { // third menu item
    $(body).css('background', 'http://example.com/image.png');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:08:45.990

我不知道你在尝试什么，但我可以给你提示。

```
$(".menu-item a") // is an array/jquery collection of all elements that match the selector
    .click(function () { // binds the function now to the click event of every item found
        $(this); // is now the currently clicked element
        // you can now traversal with $(this) for example
        $(this).siblings(); // will be a collection of all surrounding elements
        $(this).next(); // is the next element after the current one, can be chained like:
        $(this).next().next(); // but I wouldn't recomand
        $(this).prev(); // same as next but prev
        $(this).parent(); // selects the direct parent element, in your case the li element
        $(this).children(); // would select the direct children of the current element
        // and so on.... there are much more possibilities
        // on every of this possibilities you can do your background change
        $("some selector"); // is of course still possible

        // i think you are trying to do this:
        var menuItems = $(".menu-item a");
        menuItems.eq(0).css("background", "url to bg 1");
        menuItems.eq(1).css("background", "url to bg 2");
        menuItems.eq(2).css("background", "url to bg 3");
    }) 
```

查看jQuery 文档的[遍历部分。](http://api.jquery.com/category/traversing/)我也总是建议查看 jQuery 实际在做什么。许多人躲在 jQuerys api 后面，不知道发生了什么。这导致了很多误解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:27:07.697

你可以试试这样的

HTML：

```
<body>
  <ul class="menu">
    <li class="menu-item"><a name="blue" href="#">item 1</a></li>
    <li class="menu-item"><a name="red" href="#">item 2</a></li>
    <li class="menu-item"><a name="orange" href="#">item 3</a></li>
 </ul>
</body> 
```

CSS：

```
 .red {
    background:red;
  }
  .blue {
     background:blue;
  }
  .orange {
    background:orange;
 } 
```

查询：

```
$('.menu').on('click', 'a', function () {
  var bgColor = $(this).attr('name');
   $('body').removeClass().addClass(bgColor);
   return false;
 }); 
```

[**演示**](http://jsfiddle.net/NGH9r/26/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:55:09.053

我建议这样做的方法是获取已单击元素的位置。您可以通过使用 jQuery 的 index() 函数来做到这一点，正如其他海报所建议的那样。请记住，这将为您提供一个从零开始的位置索引，这意味着位置计数从 0 开始，而不是 1。

根据已单击的项目，您根据您提供的示例代码将 CSS 类分配给作为主体元素的目标项目。

另外，我注意到您的 JS 评论即使被编辑过仍然无效。JS 中的单行注释使用双斜杠，`//`而多行注释`/*`以`*/`.

这是我的解决方案：http: [//jsfiddle.net/tgZUK/](http://jsfiddle.net/tgZUK/)。

# php - 查询正确执行，但性能不佳

> ID：14324702
> 
> 赞同：0
> 
> 时间：2013-01-14T18:53:50.663
> 
> 标签：php, mysql, algorithm

我建立了一个每天收集信息的数据库。就像日历一样，数据库存储会员的每日金额。如果月份不匹配任何现有月份（MY），数据库将创建一个新的 html 月份表。我已经解决了这个问题，如下：

```
mysql_query("something goes here");
while(condition)
{
    mysql_query("something goes here")
    while(condition)
    {
        mysql_query("something goes here");
        while()
        {
            ....................
        }
        ........................
    }
} 
```

当我发现这个算法时，它运行良好。但是，几天后，它给我的服务器带来了沉重的负担。然后我在 PHP 中尝试了相同的算法（但我不能这样做）。我怎样才能让它运行得更快？代码如下：

```
 $q2=mysql_query("SELECT  a.member_id,a.dates,MONTH(dates) AS months,
                        YEAR(dates)AS years,sum(amount) as sums
                        FROM account AS a
                        left join member as m
                        on(a.member_id=m.member_id)
                        GROUP BY (SELECT EXTRACT(YEAR_MONTH FROM dates))
                        ORDER by dates DESC
        ");
        $k=0;
        while($data2=mysql_fetch_assoc($q2))
        {
            $months=$data2['months'];
            $years=$data2['years'];
            $daten = new DateTime($data2['dates']);

            print "<tr><th align='left'><b>".$daten->format('F-Y')."</b></th>";

            $q3=mysql_query("select * from member");

            while($data3=mysql_fetch_assoc($q3))
            {
                $id3=$data3['member_id'];
                $q4=mysql_query("
                                SELECT SUM(amount) AS total FROM account
                                WHERE member_id=$id3
                                AND month(dates)=$months
                                AND year(dates)=$years                              
                            ");
                while($data4=mysql_fetch_assoc($q4))
                {
                    $total=$data4['total'];

                    print "<td class='total'>".number_format($total)."</td>";
                }
            }
            print "<td class='total'><b>".$data2['sums']."</b></td></tr>";
            $k=$k+$data2['sums'];
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:19:21.710

除其他事项外：

*   您正在`SELECT * FROM member`为第一个查询中的每一行运行查询。这个查询是独立于循环的，所以每次都重新运行是很浪费的。

*   对于`SELECT * FROM member`查询的每个结果，您都在运行*另一个*查询 ( `SELECT SUM(amount) AS total FROM account ...`)。这个查询有几个问题：

    *   首先，可以使用 a 将此查询组合到上一个查询中`GROUP BY`，以避免必须为每个成员运行一个查询。就像是：

        `SELECT member_id, SUM(amount) AS total FROM account WHERE ... GROUP BY member_id`

    *   其次，您正在使用`MONTH(dates) = $months AND YEAR(dates) = $years`. 这是低效的，因为它强制服务器检查每一行；如果 . 上有适当的索引，则将其转换为`dates`（例如`dates BETWEEN '$year-$months-01' AND '$year-$months-31'`）上的范围会加快速度`dates`。

一般来说：避免循环查询。生成页面所涉及的查询数量应尽可能地始终是一个很小的、几乎恒定的数字。它不应该随着您的数据而增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:07:24.720

您是否在 MySQL 数据库中设置了适当的索引？这可能会导致巨大的性能差异。[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# spock - 覆盖扩展规格中的功能

> ID：14324704
> 
> 赞同：1
> 
> 时间：2013-01-14T18:53:59.200
> 
> 标签：spock, geb

我正在尝试设置一个测试场景，我可以发布一个 JAR 测试，这些测试将在 95% 的时间内运行相同的测试集，但有 5% 的测试需要覆盖或停止父类。是否可以覆盖父规范？

```
class ParentSpec extends Specification {
    def "goto home page"() {
        given:
        to NormalHomePage

        expect:
        at NormalHomePage
    }
} 
```

...在一个单独的项目中，该项目引入了 ParentSpec 的依赖项

```
class ChildSpec extends ParentSpec {
    @Override
    def "goto home page"() {
        given:
        to SpecificHomePage

        expect:
        at SpecificHomePage
    }
} 
```

我可以做些什么来做到这一点或模拟这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:06:38.513

当前不支持覆盖特征方法。通过一些努力，可以编写一个跳过“超级”方法的扩展。

# .net - 是否可以绑定没有属性声明的 ivar？

> ID：14324705
> 
> 赞同：1
> 
> 时间：2013-01-14T18:54:00.617
> 
> 标签：.net, objective-c, xamarin.ios, interop

如果目标 c 类中有一个公共 ivar，例如

```
@interface MyClass : NSObject {
    NSString *thisItem;
} 
```

有什么方法可以将该 ivar 添加到我的目标 c 绑定中，以便我可以在 C# 中访问它而无需更改类并添加属性声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:39:13.733

可能的？当然，如果你可以用 C 或 Objective-C 来做，那么你也可以用 .NET 来做。

在这种情况下，您可以 p/invoke into[`object_getInstanceVariable`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/object_getInstanceVariable)和其他 ObjC 运行时函数。但是，这不会产生易于维护的代码。

# delphi - Delphi例程读取无线连接的RSSI？

> ID：14324706
> 
> 赞同：2
> 
> 时间：2013-01-14T18:54:07.343
> 
> 标签：delphi, logging, wireless, rssi

我想编写一个简单的实用程序来定期将我的 WiFi 路由器的 RSSI 记录到文本文件中。有人知道 Delphi 库或 API 包装器来读取无线路由器的 RSSI 值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:45:01.993

您可以使用[Native Wifi API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706556%28v=vs.85%29.aspx)获取活动网络 wifi 连接的 RSSI ，在调用`WlanOpenHandle`和`WlanEnumInterfaces`函数之后，您必须执行[`WlanQueryInterface`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706765%28v=vs.85%29.aspx)传递`wlan_intf_opcode_current_connection`枚举值和指向[`WLAN_CONNECTION_ATTRIBUTES`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706842%28v=vs.85%29.aspx)结构的指针的方法，从这里您必须访问[`wlanAssociationAttributes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706828%28v=vs.85%29.aspx)元素并最终读取字段的值`wlanSignalQuality`。

这是该字段的描述。

> wlan信号质量
> 
> ```
> A percentage value that represents the signal quality of the network. 
> ```
> 
> WLAN_SIGNAL_QUALITY 是 ULONG 类型。该成员包含一个介于 0 和 100 之间的值。值 0 表示实际 RSSI 信号强度为 -100 dbm。值 100 表示实际 RSSI 信号强度为 -50 dbm。您可以使用线性插值计算介于 1 和 99 之间的 wlanSignalQuality 值的 RSSI 信号强度值。

试试这个示例代码

```
uses
  Windows,
  SysUtils,
  nduWlanAPI   in 'nduWlanAPI.pas',
  nduWlanTypes in 'nduWlanTypes.pas';

procedure Scan();
var
  hClient              : THandle;
  dwVersion            : DWORD;
  ResultInt            : DWORD;
  pInterface           : Pndu_WLAN_INTERFACE_INFO_LIST;
  i                    : Integer;
  pInterfaceGuid       : TGUID;
  pdwDataSize, RSSI    : DWORD;
  ppData               : pndu_WLAN_CONNECTION_ATTRIBUTES;
begin
  ResultInt:=WlanOpenHandle(1, nil, @dwVersion, @hClient);
 try
  if  ResultInt<> ERROR_SUCCESS then
  begin
     WriteLn('Error Open CLient'+IntToStr(ResultInt));
     Exit;
  end;

  ResultInt:=WlanEnumInterfaces(hClient, nil, @pInterface);
  if  ResultInt<> ERROR_SUCCESS then
  begin
     WriteLn('Error Enum Interfaces '+IntToStr(ResultInt));
     exit;
  end;

  for i := 0 to pInterface^.dwNumberOfItems - 1 do
  begin
    Writeln('Interface  ' + pInterface^.InterfaceInfo[i].strInterfaceDescription);
    WriteLn('GUID       ' + GUIDToString(pInterface^.InterfaceInfo[i].InterfaceGuid));
    pInterfaceGuid:= pInterface^.InterfaceInfo[pInterface^.dwIndex].InterfaceGuid;

    ppData:=nil;
    pdwDataSize:=0;
    ResultInt:=WlanQueryInterface(hClient, @pInterfaceGuid, wlan_intf_opcode_current_connection, nil, @pdwDataSize, @ppData,nil);
    try
      if (ResultInt=ERROR_SUCCESS) and (pdwDataSize=SizeOf(Tndu_WLAN_CONNECTION_ATTRIBUTES)) then
      begin
        Writeln(Format('Profile %s',[ppData^.strProfileName]));
        Writeln(Format('Mac Address %.2x:%.2x:%.2x:%.2x:%.2x:%.2x',[
        ppData^.wlanAssociationAttributes.dot11Bssid[0],
        ppData^.wlanAssociationAttributes.dot11Bssid[1],
        ppData^.wlanAssociationAttributes.dot11Bssid[2],
        ppData^.wlanAssociationAttributes.dot11Bssid[3],
        ppData^.wlanAssociationAttributes.dot11Bssid[4],
        ppData^.wlanAssociationAttributes.dot11Bssid[5]]));
        RSSI := (ppData^.wlanAssociationAttributes.wlanSignalQuality div 2) - 100;
        Writeln(Format('RSSI %d dbm',[RSSI]));
      end;
    finally
      if ppData<>nil then
       WlanFreeMemory(ppData);
    end;
  end;
 finally
  WlanCloseHandle(hClient, nil);
 end;
end;

begin
  try
    Scan();
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
  Readln;
end. 
```

**注意**：不幸的是，AFAIK 不存在将 Native Wifi API 标头转换为 Delphi 的*官方*翻译，因此您可以同时使用[这些](https://dl.dropbox.com/u/12733424/Blog/WlanAPI.zip).

# c++ - C++如何直接访问内存

> ID：14324709
> 
> 赞同：1
> 
> 时间：2013-01-14T18:54:20.960
> 
> 标签：c++, memory

假设我在 C++ 中手动分配了很大一部分内存，比如 10 MB。

说实话，我想在这个区域的中间存储一些位。

我将如何获得那个位置的内存？

我知道访问原始内存的唯一方法是使用数组表示法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T18:56:07.217

数组表示法适用于此，因为分配的内存可以看作是一个大数组。

```
// Set the byte in the middle to `123`
((char *) memory_ptr)[5 * 1024 * 1024] = 123; 
```

`char`如果指针是另一种类型，我将类型转换为指针。如果它已经是一个`char`指针，则不需要类型转换。

* * *

如果您只想设置一个位，请将内存视为具有 8000 万个独立位的巨大位域。要找到您想要的位，例如位号 40000000，您必须先找到它所在的字节，然后再找到位。这是通过正常除法（查找字符）和模（查找位）完成的：

```
int wanted_bit = 40000000;

int char_index = wanted_bit / 8;  // 8 bits to a byte
int bit_number = wanted_bit % 8;

((char *) memory_ptr)[char_index] |= 1 << bit_number;  // Set the bit 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T19:04:43.157

数组表示法只是编写指针的另一种方式。您可以使用它，也可以像这样直接使用指针：

```
char *the_memory_block = // your allocated block.
char b = *(the_memory_block + 10); // get the 11th byte, *-operator is a dereference.
*(the_memory_block + 20) = b; // set the 21st byte to b, same operator. 
```

`memcpy`, `memzero`,`memmove`等`memcmp`也可能非常有用，如下所示：

```
char *the_memory_block = // your allocated block.
memcpy(the_memory_block + 20, the_memory_block + 10, 1); 
```

当然这段代码也是一样的：

```
char *the_memory_block = // your allocated block.
char b = the_memory_block[10];
the_memory_block[20] = b; 
```

这是这样的：

```
char *the_memory_block = // your allocated block.
memcpy(&the_memory_block[20], &the_memory_block[10], 1); 
```

此外，一个并不比另一个更安全，它们是完全等价的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T18:56:51.830

我认为数组表示法将是您的答案...您可以将位移运算符 << 和 >> 与 AND 和 OR 位掩码一起使用来访问特定位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:18:33.463

在 C/C++ 中，数组被视为指向其第一个元素的指针。因此，数组名只不过是其第一个元素的别名：

```
*pName is equivalent pName[0] 
```

接着：

```
*(pName+1) == pName[1];
*(pName+2) == pName[2]; 
```

等等。括号用于避免优先级问题。永远不要忘记使用它们。

编译后，两种方式的行为相同。为了可读性，我更喜欢括号表示法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T18:58:23.590

您可以使用数组表示法，也可以使用指针算术：

```
char* buffer = new char[1024 * 1024 * 10];

// copy 3 bytes to the middle of the memory region using pointer arithmetic
//
std::memcpy(buffer + (1024 * 1024 * 5), "XXX", 3); 
```

# matlab - Matlab：如何为 QR 码创建多项式生成器 Reed Solomon

> ID：14324718
> 
> 赞同：1
> 
> 时间：2013-01-14T18:55:01.473
> 
> 标签：matlab, qr-code, error-correction, reed-solomon

我必须制作一个 matlab 程序，它应该创建一个 QR 码。

我的问题是 Reed Solomon 纠错

用户输入他想要的单词。[...] 我得到了一串数字，我应该在多项式生成器中消失（Reed Solomon）（我发现一些做得很好的网站：[http](http://www.pclviewer.com/rs2/calculator.html) ://www.pclviewer.com/rs2/calculator.html ）

我希望它发生：例如我输入：32 91 11 120 209 114 220 77 67 64 236 17 236

[Reed Solomon 生成多项式]

我想知道：168 72 22 82 217 54 156 0 46 15 180 122 16

我找到了函数 rsenc comm.rsencoder gf ... 但是无法理解这些函数的操作。功能详解： http: [//www.mathworks.fr/fr/help/comm...n.html#fp12225](http://www.mathworks.fr/fr/help/comm...n.html#fp12225)

我尝试了这种类型的代码：

```
n = 255; k = 13; % Codeword length and message length
m = 8; % Number of bits in each symbol
msg = [32 91 11 120 209 114 220 77 67 64 236 17 236]; % Message is a Galois array.
obj = comm.RSEncoder(n, k);
c1 = step(obj, msg(1,:)');
c = [c1].'; 
```

他产生了 255 个字符串，而我想要 13 个输出。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T04:53:54.507

我认为你犯了一个错误。

'n' 是带有奇偶校验码的最终消息的长度。'k' 是消息的长度（符号数）

我想这会帮助你：

```
clc, clear all;
M = 16;     % Modulation Order || same that Max value, at your case: 256! 2^m
hEnc = comm.RSEncoder;
hEnc.CodewordLength = M - 1; % Max = M-1, Min = 4, Must be greater than MessageLenght
hEnc.MessageLength = 13;  % Experiment change up and down value (using odd number)
hEnc.BitInput = false;
hEnc
t = hEnc.CodewordLength - hEnc.MessageLength;
frame = 2*hEnc.MessageLength; % multiple of MensagemLength
fprintf('\tError Detection (in Symbols): %d\n',t);
fprintf('\tError Correction: %.2f\n',t/2);
data = randi([0 M-1], frame, 1); % Create a frame with symbols range (0 to M-1)
encodedData = step(hEnc, data);  % encod the frame 
```

# jquery - 克隆的表单输入行未提交到 POST

> ID：14324720
> 
> 赞同：0
> 
> 时间：2013-01-14T18:55:07.933
> 
> 标签：jquery, html, dom

我有以下 jQuery 代码：

```
$('#btnAdd').click(function() {
var i = ($('#stuff >tbody >tr').length)+1;
$('#stuff >tbody >tr:last').clone(true).find("input,select").each(function(){
$(this).attr({
'name': function(_, name){
   return name + i;
},
'value': ''
});}).end().insertAfter('#stuff >tbody>tr:last').show(); 
```

这会产生以下 DOM：

```
<tr>
<td class="td_6">
<select name="name1">
<option selected="" value="Bricklayers">Bricklayers</option>
<option value="Sheet Metal Workers">Sheet Metal Workers</option>
<option value="Sprinkler Fitters">Sprinkler Fitters</option>
</select>
<td>
<td class="td_6">
<input name="V_union" value="1" type="radio">Yes<input name="V_union" value="0" type="radio" checked="checked">No
</td>
<td class="td_6">
<input name="V_picketed" value="1" type="radio">Yes<input name="V_picketed" value="0" type="radio" checked="checked">No
</td>
<td>
</td>
</tr>

<tr style="">
<td class="td_6">
<select name="name13" value="">
<option selected="" value="Bricklayers">Bricklayers</option>
<option value="Sheet Metal Workers">Sheet Metal Workers</option>
<option value="Sprinkler Fitters">Sprinkler Fitters</option>
</select>
</td>
<td class="td_6">
<input name="V_union3" value="" type="radio">Yes<input name="V_union3" value="" type="radio" checked="checked">No
</td>
<td class="td_6">
<input name="V_picketed3" value="" type="radio">Yes<input name="V_picketed3" value="" type="radio" checked="checked">No
</td>
<td>
</td>
</tr> 
```

这是表单标签：

```
<form method="post" action="view_job.php" name="updateViolations" enctype="multipart/form-data"> 
```

动态输入的行在标签内。

当我在 $_POST 上执行 var_dump 时，我没有在 $_POST 变量中看到新的动态生成的表单输入。

我检查了其他几个问题，看来我做的一切都是正确的，但我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:18:45.790

感谢所有提交的内容。原来这是一个简单的修复。

[https://stackoverflow.com/a/3687359/983061](https://stackoverflow.com/a/3687359/983061)

再次感谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:03:20.490

看起来有一些重复的`id`属性。`id`每页只能使用一次。

您可以考虑将这些从更改`id`为`class`（`classes`每页可多次使用）。

重复：`clonedInput`, `td_6_left`, `check1`,`check13`

# php - 如何与独立的 PHP 服务器进行 FTP 传输通信？

> ID：14324723
> 
> 赞同：0
> 
> 时间：2013-01-14T18:55:10.620
> 
> 标签：php, apache, ftp, ftp-client, ftp-server

我有一个 Ubuntu 服务器，上面有我的 Apache 和 FTP 服务器（我使用的是 Proftpd 服务器）。我有一个小型 PHP CMS，对于数据库，我使用的是 MySQL 服务器。这是我的服务器端环境。现在在客户端，我有一个 C# ftp 客户端，用于从 FTP 服务器下载文件。此外，这个 C# 客户端与我的 PHP CMS 通信。

所以简而言之，一次发生两次通信

```
1\. C# client and FTP server for file transfer.
2\. C# client and PHP CMS for some other work. 
```

所以，现在我想要的是我的一个 CMS 网页上的 ftp 传输的实时进度（进度条）。

显然，我可以做的一件事是我可以告诉我的 C# 客户端使用一些 Web 服务或 Web 套接字将其下载进度上传到 PHP 服务器，然后我可以显示 ftp 传输的进度（基本上是 C# 客户端的下载进度）。

但在此之前，我只想知道我的 PHP 服务器是否可以检查 FTP 服务器在做什么。因为，他们之间没有发生通信，我不知道如何完成它？我有一个 MySQL 服务器，我知道 proftp 可以与 MySQL 服务器通信，它有一些预定义的表，我可以在其中存储 ftp 服务器正在执行的任何操作。但是可以用它来显示实时进度吗？他们是否有任何其他技术可以做到这一点，还是我必须强制我的 C# 客户端这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:38:28.287

根据您的说法，您根本不需要与 FTP 服务器对话（当然，下载文件除外）。您的 FTP 客户端可以将 FTP 传输状态上传到 Web 套接字（为什么不能直接显示？），由 CMS 恢复并显示在页面中。通过使用会话，您甚至不需要在任何地方主动保存该信息，只要 Web 套接字调用正确初始化会话 cookie。

在 FTP 客户端下载回调函数中，只需添加一个调用即可将进度状态发送到服务器。在那里，scriptlet 会将其保存到`$_SESSION['download_status']`. 然后，CMS 页面上的 AJAX 调用可以检索它并定期显示它。

不要忘记同时上传 FTP 会话和异常状态（传输中断等）。

# git - 在 ubuntu 的 git 存储库中设置 AWSDevTools-RepositorySetup.sh

> ID：14324724
> 
> 赞同：3
> 
> 时间：2013-01-14T18:55:12.637
> 
> 标签：git, amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

当我在我的 git 存储库中运行 AWSDevTools 的设置时，我收到以下错误。

`[[: not found cp: cannot stat`/home/user/aws/.git/scripts'：没有这样的文件或目录`

我将脚本文件夹从 AWSDevTools .zip 直接复制到 git 存储库，然后收到此错误：

`[[: not found cp: cannot create directory`.git/AWSDevTools'：没有这样的文件或目录`

将 AWSDevTools 从 .zip 复制到存储库，同时认为安装程序只是希望 repo 中的这些文件夹运行，但我继续收到相同的目录错误。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T22:21:05.863

假设您的仓库位于`/home/user/aws/`（`.git`文件夹内），

您的 AWSDevTools 位于`/home/user/AWS-ElasticBeanstalk-CLI-2.3/AWSDevTools/Linux`

然后，您应该能够按照以下步骤操作：

1）打开命令提示符，`cd`到`/home/user/aws`（你的仓库）

2）运行`/home/user/AWS-ElasticBeanstalk-CLI-2.3/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh`。

3)`git aws.config`

4) 输入 AWS 详细信息

然后你可以`git add`,`git commit`和`git aws.push`. 让我知道您在这些步骤中遇到的错误。

# android - 用于查询的 TouchDB Android 动态视图

> ID：14324725
> 
> 赞同：0
> 
> 时间：2013-01-14T18:55:14.413
> 
> 标签：android, dynamic, touchdb

我成功地让我的 Android 应用程序与我的 iriscouch 数据库同步。在这个数据库中，我有大约 100 个文档，每个文档代表一条公共交通线路及其相应的车站，例如：

```
 {
   "_id": "1",
   "_rev": "1-9658663cc48789829fb505ce2e0fd4ce",
   "name": "1",
   "stations": [
       {
           "_id": "Stefan-Fadinger-Platz",
           "name": "Stefan-Fadinger-Platz",
           "long": "16.35464100",
           "lat": "48.16771000"
       },
       {
           "_id": "Julius-Raab-Platz",
           "name": "Julius-Raab-Platz",
           "long": "16.38323500",
           "lat": "48.21135300"
       },
       {
           "_id": "Schwedenplatz U",
           "name": "Schwedenplatz U",
           "long": "16.37765200",
           "lat": "48.21178500"
       },
    ....
    } 
```

如何根据用户选择从 Android 访问这些数据，例如获取 1 号线的所有车站？据我所知，我需要为每个查询创建一个视图，但我认为手动创建 100 个视图并不高效。有没有动态的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T00:21:51.770

您可以在 TouchDB 中本地创建视图。

[http://wiki.apache.org/couchdb/HTTP_view_API](http://wiki.apache.org/couchdb/HTTP_view_API)

它们的工作方式与常规 CouchDB 视图相同。您可以向视图提供参数，以帮助您根据用户选择进行过滤。

# php - foreach 循环 - 每个项目不同的类

> ID：14324726
> 
> 赞同：0
> 
> 时间：2013-01-14T18:55:14.850
> 
> 标签：php, foreach

我需要为 foreach 循环中的每 6 个 div 赋予不同的类名。我认为我下面的想法会奏效，但每个项目似乎都有相同的 div。

```
<?php $num = 0; ?>
<?php foreach ($divs as $div): ?>

    <?php if($num % 1 == 0): ?>
    <div class="threecol grey one">
    <?php elseif($num % 2 == 1): ?>
    <div class="threecol green two ">
    <?php elseif($num % 3 == 2): ?>
    <div class="sixcol blue last three">
    <?php elseif($num % 4 == 3): ?>
    <div class="threecol grey">
    <?php elseif($num % 5 == 4): ?>
    <div class="sixcol blue">
    <?php elseif($num % 6 == 5): ?>
    <div class="threecol green last">
    <?php endif; ?>

        Rest of html

    </div>

<?php $num++ ?>
<?php endforeach; ?> 
```

为了简化我基本上需要

1st/7th/13th/19th ...等 div 是`<div class="threecol grey">`

2日/8日/14日/20日...等`<div class="threecol green">`

3日/9日/15日/21日...等`<div class="sixcol blue last">`

4日/10日/16日/22日 `<div class="threecol grey">`

5日/11日/17日/23日 `<div class="sixcol blue">`

6日/12日/18日/24日 `<div class="sixcol blue">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:57:49.483

很丑……为什么不呢

```
$classes = array('grey one', 'green two', 'blue last three', 'grey', 'blue', 'green last');
foreach($divs as $div) {
   $class = $classes[$i++ % 6];
   echo '<div class="threecol ' . $class . '">';
} 
```

主要问题是您在模运算中不断更改除数，因此您总是得到 0 余数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:59:25.683

您误解了导致剩余股息的模运算符。因此，`% 1`将*始终*为零，因为该操作永远不会有余数。你想这样做：

```
$num % 6 == 1
...
$num % 6 == 2 
```

等等。您也可以`$num % 6`提前做并将其存储在变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:59:04.167

```
<?php foreach ($divs as $i => $div): ?>
    <?php if($i % 6 == 0): ?>
    <div class="threecol grey one">
    <?php elseif($i % 6 == 1): ?>
    <div class="threecol green two ">
    <?php elseif($i % 6 == 2): ?>
    <div class="sixcol blue last three">
    <?php elseif($i % 6 == 3): ?>
    <div class="threecol grey">
    <?php elseif($i % 6 == 4): ?>
    <div class="sixcol blue">
    <?php elseif($i % 6 == 5): ?>
    <div class="threecol green last">
    <?php endif; ?>
        Rest of html
    </div>
<?php endforeach; ?> 
```

考虑使用 switch case 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T18:57:10.540

```
<?php if(floor($num / 6) == 0): ?>
<div class="threecol grey one">
<?php elseif(floor($num / 6) == 1): ?>
<div class="threecol green two ">
<?php elseif(floor($num / 6) == 2): ?>
<div class="sixcol blue last three">
<?php elseif(floor($num / 6) == 3): ?>
<div class="threecol grey">
<?php elseif(floor($num / 6) == 4): ?>
<div class="sixcol blue">
<?php elseif(floor($num / 6) == 5): ?>
<div class="threecol green last">
<?php endif; ?> 
```

这将给出：

*   `threecol grey one`对于从 0 到 5 的列
*   `threecol grey two`用于从 6 到 11 的列
*   ETC..

# ios - 映射到核心数据（Web API 命名不一致）

> ID：14324731
> 
> 赞同：2
> 
> 时间：2013-01-14T18:55:29.697
> 
> 标签：ios, core-data, asp.net-web-api

我正在从 Web API 将数据导入和导出到 Core Data。

我与之交互的 Web API 与自身的命名不一致，当然也不符合我在核心数据模型中用于属性的命名约定。（我无法控制更改 API 约定）。

为了说明这个问题，在一个 api 调用中，联系人的数据可能如下所示：

```
"rows": [
    {
        "name": "Bob",
        "group": "Testing Group A",
        "email_address" : "bob@fakedata.com"
    }
] 
```

在另一个仍然返回联系人的不同调用中，它可能看起来像这样：

```
"rows": [
    {
        "Name": "Bob",
        "group_name": "Testing Group A",
        "Email" : "bob@fakedata.com"
    }
] 
```

注意到键命名的细微差别了吗？过去，我通过为每个 API 调用进行“映射”来解决此类问题。映射只是一个 NSDictionary，其中包含我使用的核心数据名称的键，以及 API 服务器键的值。

因此，解决这两个调用中的每一个都需要每个调用都有一个如下所示的 NSDictionary

```
dict = @{ @"name" : @"name", @"group" : @"group", @"email" : @"email_address" };

dict = @{ @"name" : @"Name", @"group" : @"group_name", @"email" : @"Email" }; 
```

这工作得很好，它肯定是解决这个问题的一种途径，但是在每个 API 调用中都有这些映射不是很优雅，而且对于代码可维护性来说肯定是糟糕的设计。

所以这里真正的问题是：有没有人有更好的解决方案来管理 web api 到 Core Data 的映射？显然，编写良好的 Web API 是理想的解决方案，但即使映射编写良好的 API 也可能有细微的差别（例如，核心数据要求属性以小写字母开头）。

我提出的解决方案是将映射添加到“用户信息”下的核心数据属性中（下图查看示例），但我使用属性的此功能的经验为零，我不知道是否有办法我忽略了更好的选择。谢谢你的帮助。

![在此处输入图像描述](../Images/24b5e72bbfdba59b2d17b79ea9be86c8.png)

**附加说明**：是的，我广泛使用了 Restkit，它确实有方便的映射（类似于我在上面使用 NSDictionary 解释的方式）。但是对于这个项目，我正在消除对这样一个我无法控制且不完全理解的框架的依赖。我用一个简单的 NSURLConnection 来提取这些数据。

**更新** 如果您沿着这条路线走（顺便说一句，这非常好，接受的答案有很大帮助）。我建议不要使用关键字“地图”，因为它不是默认值。改用“key”，因为这不需要对用户信息字段进行两次编辑。对于我的特定项目，有很多映射，这很烦人。现在改变为时已晚，但要从我的错误中吸取教训。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:22:19.437

哇，这是一个搞砸的 Web API。

您建议的方法或多或少是我如何处理它。但是`mapX`，我没有使用多个键，而是使用一个`map`键，其值是逗号分隔的映射列表。在这种情况下，键`map`的值为`Company,Company_Name,company`。这样你就可以读取一个已知的密钥，而不是反复测试下一个是否存在。`NSString`您可以使用'方法轻松地将逗号分隔的列表转换为数组`componentsSeparatedByString:`。

另一种方法是将所有这些放在一个属性列表中，您可以在运行时读取该列表。这将是有效的，但我更喜欢将所有信息保存在一个地方，并且用户信息字典是理想的。

顺便说一句，Core Data 并不要求属性名称以小写字母开头。然而，Xcode 的数据模型编辑器确实强制执行该限制——迫使您遵循您可能有理由违反的准则。如果您愿意，可以手动编辑模型文件并将属性名称更改为以大写字母开头。该文件为 XML，如果工具兼容性设置为 Xcode 4.0 或更高版本，则非常易于阅读。一旦你这样做了，你甚至可以使用带有这些属性的 Xcode 的内置类生成。

# asp.net - youtube api 以只读方式获取特定视频返回

> ID：14324732
> 
> 赞同：0
> 
> 时间：2013-01-14T18:55:30.213
> 
> 标签：asp.net, vb.net, youtube, youtube-api, youtube.net-api

我正在尝试将一些 youtube 功能集成到我的网站中。我能够拉入我的上传。当我遍历结果时，我看到视频不是只读的。

但是，当我去更新视频时，我将视频提要用于返回 readonly = TRUE 的特定视频！

我正在使用与拉入上传提要相同的设置和请求，所以我不确定为什么这不起作用。

调试时，我正在获取视频，但它在 .Update() 行上引发了对象引用错误。

```
Dim settings As New YouTubeRequestSettings("exampleapp", BusinessLayer.Constants.YOUTUBE_DEV_KEY, Session("token"))
Dim ytRequest As New YouTubeRequest(settings)

Dim videoEntryUrl As String = "http://gdata.youtube.com/feeds/api/videos/" & litVideoId.Text
Dim v As Video = ytRequest.Retrieve(Of Video)(New Uri(videoEntryUrl))

If v IsNot Nothing Then

    v.Title = txtTitle.Text.Trim
    ytRequest.Update(Of Video)(v)

End If 
```

有没有人看到或处理过这个？想法？也许我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:36:56.430

我认为由于路径，您会收到对象引用错误。请看下面我的例子：

```
 YouTubeRequestSettings settings = new YouTubeRequestSettings("NETUnittests", YTDeveloperKey, YTUser, YTPassword);

        settings.Timeout = 10000000;
        YouTubeRequest request = new YouTubeRequest(settings);
        Google.YouTube.Video video = new Google.YouTube.Video();
        //video.VideoId = lblVideoID.Text;

        //http://gdata.youtube.com/feeds/api/users/USER_ID/uploads/VIDEO_ID

    Uri videoEntryUrl = new Uri("http://gdata.youtube.com/feeds/api/users/default/uploads/" + lblVideoID.Text);    video = request.Retrieve<Google.YouTube.Video>(videoEntryUrl);

        if (video.ReadOnly == false)
        {

        }

        string tt = video.Title;
        string dd = video.Description;

        video.Title = tbTitle.Text;
        video.Description = tbDescription.Text;
        video.Keywords = tbKeywords.Text;

        //video.Status.Value = "private";
        request.Update(video); 
```

# python - 将 JSON 数据插入到 sqlite - OperationalError：无法识别的令牌“{”

> ID：14324735
> 
> 赞同：2
> 
> 时间：2013-01-14T18:56:04.503
> 
> 标签：python, json, sqlite, pysqlite

我在我的代码中做这样的事情：

```
import sqlite3
...
sqlString=company['name']+","+simplejson.dumps(info)
cur.execute("INSERT INTO companyInfo VALUES("+sqlString+")") 
```

但我收到以下错误：cur.execute("INSERT INTO companyBlobs VALUES("+valueString+")") sqlite3.OperationalError: unrecognized token: "{"

我猜这是 JSON 数据转义的问题，但不知道如何解决。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:04:20.880

尝试使用参数化查询：

```
sqlString=company['name']+","+simplejson.dumps(info)
cur.execute("INSERT INTO companyInfo VALUES (?)", (sqlString, )) 
```

这将自动转义您的输入。

# linux - 将换行符附加到 Linux 目录中的所有文件

> ID：14324743
> 
> 赞同：1
> 
> 时间：2013-01-14T18:56:24.960
> 
> 标签：linux, command-line, newline

我在 Visual Studio 中有一个可以成功构建和运行的项目。我需要让它在 Linux 中工作。一个问题是换行符与 Linux 中的不同，因此我收到大量警告说“文件末尾没有换行符”。一个接一个地为所有文件添加换行符很乏味，我想知道是否有一个Linux命令可以用来对目录中的所有文件执行相同的操作（这里，操作是将换行符附加到文件末尾）在 Linux 中？

提前致谢！

-莱奥诺拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:14:30.793

大多数 linux 都有一个`dos2unix`有助于文件转换的命令。

# git - 在 MediaTemple DV 上部署 Git

> ID：14324744
> 
> 赞同：5
> 
> 时间：2013-01-14T18:56:37.173
> 
> 标签：git, mirror, mediatemple

我有一个 MediaTemple dv 服务器和一个我想部署的带有 Git 版本的项目。情况如下：

*   我在本地机器上开发网站。
*   我在本地 git repo (repoA) 上提交更改
*   [我通过 Tower ( http://www.git-tower.com](http://www.git-tower.com) )将更改推送到在线存储库 (repoB) （存储库位于无法通过 http 访问的文件夹中）

我想自动从远程存储库 (repoB) 镜像到位于 /var/www/vhosts/hostname.com/foldername 的公共 html 文件夹

我怎样才能自动化这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:04:29.193

这是一个有据可查、易于自动化的工作流程。本质上，您正在寻找服务器端 git 挂钩。尝试这些作为起点：

*   [简单的 git post-commit 钩子将提交的文件复制到某个文件夹](https://stackoverflow.com/questions/7633299/simple-git-post-commit-hook-to-copy-committed-files-to-a-certain-folder)
*   [使用 Git 管理网站](http://toroid.org/ams/git-website-howto)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T23:34:55.307

几个月前我试图这样做，最终能够从该站点过于高级和模糊响应的页面中将其拼凑起来。我终于把它记下来并为不那么高级的用户解释了它。我在 mediatemple 网格服务器上设置了我的，所以你的应该是相似的。它是为不熟悉整个命令行过程的人编写的。看看有没有帮助。祝你好运。

[使用 git 部署](http://jmorgan.ws/index.php/deploying-with-git-part-1/)

# c# - 是否存在有利于读者的 ReaderWriterLockSlim 等价物？

> ID：14324748
> 
> 赞同：16
> 
> 时间：2013-01-14T18:56:50.017
> 
> 标签：c#, .net, multithreading, concurrency, readerwriterlockslim

我使用[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.readerwriterlockslim%28v=vs.90%29.aspx)已经有一段时间了，到目前为止它已经满足了我的需求。当我继续微调我的应用程序时，我发现这`ReaderWriterLockSlim`对于我的用例来说不是最理想的。

根据文档（和我的经验），它有利于作者而不是读者（即当读者和作者排队时，作者将获得优先权）。但是，我需要一个有利于读者的等价物。我了解此类组件的副作用（特别是作家饥饿问题）。

是否有任何人可以指出的生产就绪等价物？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T09:08:37.617

根据 MSDN，ReaderWriterLockSlim 偏爱作家。这意味着当队列中有读者和作者时，作者将获得优先权。

这会产生读者饥饿，测试代码重现这个是[here](http://pastebin.com/mG9MRz09)。我假设只有在写入是一个涉及线程上下文切换的长操作时才会发生饥饿。至少它总是在我的机器上复制，所以如果我错了，请告诉我。

另一方面，.net 2.0 中的 ReaderWriterLock 不会产生读取器或写入器饥饿，但会降低性能。[这](http://pastebin.com/ETneGHhV)是上一个示例中的修改代码，以表明没有发生饥饿。

因此，回到您的问题 - 这取决于您需要 RW 锁的哪些功能。递归锁、异常处理、超时 - 最接近支持上述所有内容的*生产质量*RW 锁，并且有利于读者的可能是 ReaderWriterLock。

您也可以采用描述[第一个读者-作者问题](http://en.wikipedia.org/wiki/Readers-writers_problem)的 wiki 文章中的代码，但当然您需要手动实现上述所有必需的功能，并且实现会有写者饥饿问题。

锁芯可能看起来像这样：

```
class AutoDispose : IDisposable 
{ 
  Action _action; 
  public AutoDispose(Action action) 
  { 
    _action = action; 
  }
  public void Dispose()
  {
    _action();
  }
}

class Lock
{
  SemaphoreSlim wrt = new SemaphoreSlim(1);
  int readcount=0;

  public IDisposable WriteLock()
  {
    wrt.Wait();
    return new AutoDispose(() => wrt.Release());
  }

  public IDisposable ReadLock()
  {
    if (Interlocked.Increment(ref readcount) == 1)
        wrt.Wait();

    return new AutoDispose(() => 
    {
      if (Interlocked.Decrement(ref readcount) == 0)
         wrt.Release();
    });
  }
} 
```

比较 3 个实现的性能，使用 3 个读取器线程和 3 个写入器线程，使用简单的内存操作（使用长阻塞操作会产生 RWLockSlim 的读取器饥饿和自定义锁的写入器饥饿）：

![性能比较](../Images/a6474279c1c6bf0fdf952d75c0c9b50e.png)

我确保编译器不会展开工作负载循环，但可能还有其他我不知道的陷阱，所以对这些测量持保留态度。测试的源代码在[这里](http://pastebin.com/9tEEpX0N)。

# java - JRuby 不工作

> ID：14324751
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:57:19.283
> 
> 标签：java, ruby, jruby

我得到了最新的源代码。我将 jruby-1.7.2/bin 子目录路径添加到 $PATH。

现在当我跑步时

```
$jirb 
```

或者

```
$jruby -v 
```

我收到错误消息：**“找不到 Java 类：org.jruby.Main**

我的 Java 版本是 1.4.2

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:02:12.350

[http://www.oracle.com/technetwork/java/javase/index-jsp-138567.html](http://www.oracle.com/technetwork/java/javase/index-jsp-138567.html) => 你应该考虑升级 Java

JRuby 1.7+ 仅支持 Java 6+（参见此处：[http](http://www.jruby.org/2012/10/22/jruby-1-7-0.html) ://www.jruby.org/2012/10/22/jruby-1-7-0.html ）

# git - Get-ChildItem 执行 git status

> ID：14324754
> 
> 赞同：2
> 
> 时间：2013-01-14T18:57:28.837
> 
> 标签：git, powershell-2.0

我希望能够使用 Windows PowerShell 命令

```
Get-ChildItem -include .git  -Force -Recurse | ?{ $_.PSIsContainer -and $_.Attributes -match "Hidden"} 
```

并`git status`为找到的每个“记录”执行并将其输出到文本文件。

这样我就可以报告我的不同步更改。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:57:41.643

最后，我将在我的配置文件中为此命令设置一个别名。

```
Get-ChildItem -include .git -Force -Recurse | ?{ $_.PSIsContainer -and $_.Attributes -match "Hidden"} | foreach-object {$a=Get-Location; cd $_.parent.fullname; Get-Location; git status; cd $a;} 
```

# linux - Cut 和 Awk 命令：分隔符行为

> ID：14324755
> 
> 赞同：1
> 
> 时间：2013-01-14T18:57:31.707
> 
> 标签：linux, awk

我尝试使用 cut 命令从“ls -l”命令输出中获取文件名列表及其大小。

```
$ ls -l | cut -f 5,9 -d " " 
```

它给了我基于“单一空白”作为分隔符的输出。当“ls -l”输出在某些行中包含连续空格时，该命令的输出不适用于这些行。只有单个空格作为列分隔符的行会给出正确的输出。

当我运行以下命令时：

```
$ ls -l | awk '{ print $5"\t"$9 }' 
```

awk 忽略多个空格并从“ls -l”输出中正确提取列。而 cut 将每个空格视为分隔符，将值放在错误的列中。

它为所有行提供正确的输出。

为什么会这样？我可以用 cut 命令做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:08:14.680

awk 在空格上分割字段。*cut 在分隔符*上分割字段。awk 是解决这个问题的更好工具。

作为替代方案，您可以通过管道`ls -l`连接到一个实用程序，该实用程序可以压缩多个空格字符（可能是`tr -s`），也可以是一个实用程序，用一个空格字符替换多个空格字符（可能是`sed`）。*然后*cut 会做你想做的事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T21:33:03.993

[不要解析`ls`](http://mywiki.wooledge.org/ParsingLs)——如果包含空格，您的代码将不会打印完整的文件名。要获取文件大小和名称，请使用[`stat`](http://man.cx/stat)：

```
stat -c "%s %n" * 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:08:04.093

试试这个？：

```
ls -l | tr -s ' ' | cut -d ' ' -f 5, 9 
```

# c# - 如何以可靠的方式获得唯一的机器指纹？

> ID：14324758
> 
> 赞同：2
> 
> 时间：2013-01-14T18:57:33.667
> 
> 标签：c#, security, hardware, guid, uniqueidentifier

> **可能重复：**
> [唯一的计算机 ID](https://stackoverflow.com/questions/3474940/unique-computer-id)

我正在开发一个服务器/客户端应用程序，它需要为不同的目的（许可证、安全性等）实现一个字符串客户端跟踪系统，为每个新注册的客户端分配一个唯一的身份。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:00:24.427

这是一篇相当不错的 CodeProject 文章：http: [//www.codeproject.com/Articles/28678/Generating-Uni ​​que-Key-Finger-Print-for-a-Computer](http://www.codeproject.com/Articles/28678/Generating-Unique-Key-Finger-Print-for-a-Computer)

# php - 如何使用 foreach() 来迭代 YQL XML 并抓取 HTML？

> ID：14324766
> 
> 赞同：1
> 
> 时间：2013-01-14T18:58:05.760
> 
> 标签：php, html, xml, yql

不知道该怎么称呼它，所以我会很快详细说明。

我有一个我正在尝试使用[YQL](http://developer.yahoo.com/yql/console/)控制台构建的屏幕抓取工具。该查询为用户提供了 XML 或 JSON 的选择。我的目标是控制台的 YQL>data>html 方面，并选择 XML 作为我的输出格式。

我的 YQL 查询：

> [选择 * 从 html WHERE url="http://google.com"](http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url=%22http://google.com%22&diagnostics=true)

这将为您提供 XML 格式的 Google.com 文档树的读数。太多输出无法粘贴到这篇文章中，所以只需单击链接。

我的问题来自于使用 PHP 遍历 XML 树以正确显示此请求的输出。我不知道如何有效地创建一个 foreach 语句（或任何其他语句）来有效地抓取 XML 输出并收集文档树并根据我自己的需要重新显示它。

我的PHP：

```
$searchUrl = "google.com";

if(isset($_REQUEST['searchUrl'])) {
    $searchUrl = $_REQUEST['searchUrl'];
}

$query = "select * from html where url=\"http://".$searchUrl."\"";

$url = "http://query.yahooapis.com/v1/public/yql";

// Get Subcategory Article Data
$parameterData = "q=".urlencode($query);
$parameterData .= "&diagnostics=true";

// setup CURL 
$ch = curl_init($url); 
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $parameterData); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_TIMEOUT, 20);

// send
$response = trim(urldecode(curl_exec($ch)));

// parse response
$xmlObjects = @simplexml_load_string($response);

foreach ($xmlObjects->diagnostics as $diagnostics) {
    echo "<a href=".$diagnostics->url." target='_blank'>".$diagnostics->url."</a>";
}
foreach ($xmlObjects->results as $result) {
    // here is where I would go echo $result->body or something along those lines
} 
```

我想我在这一点上有点难过，因为我不知道下一步该去哪里导航这种格式的 XML 树。在`query>results>body`XML 之后，我不确定在哪里收集剩余的对象，并将其输出到我的文档中的`pre`标签或类似的东西中。

我想提供一个输入字段供用户输入自己的域，我的 PHP 将提交查询，迭代响应，并将文档树返回给用户以进行 HTML 查看和调试。

在迭代大量具有相同内部结构（如 RSS 提要或类似性质的东西）的父元素的上下文中，我熟悉 PHP 和 XML。在本例中，我正在处理一个动态 XML 树、一个大型响应对象和一个波动的内部结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:59:37.167

以下代码将结果正文显示为 html 页面：

```
<?php

 // ... the code you posted in the question
 //     !without the diagnostics output!
 //     read comments of the answer to know why

?>
<html>
  <head>
  </head>
<?php
foreach ($xmlObjects->results as $result) {
    // asXml() will return the content of body as xml string
    echo $result->body->asXml();
    break;
}
?>
</html> 
```

请注意，由于您不会`<head>`通过 YQL 获取页面元素，因此在大多数情况下，输出看起来会很混乱。

# cordova - Cordova Phonegap Camera getpicture 在带有 DATA_URL 选项的 BlackBerry 上不起作用

> ID：14324767
> 
> 赞同：3
> 
> 时间：2013-01-14T18:58:19.330
> 
> 标签：cordova, blackberry, camera

我有一个使用相机功能的黑莓应用程序。

代码库来自 PhoneGap 2.3.0 中提供的“示例应用”

索引 HTML 已添加该行

```
 <input type="button" value="Take Picture" onclick="app.takePhoto();" /> 
```

index.js 添加了以下功能：

```
takePhoto: function(){
    navigator.camera.getPicture(this.cameraSuccess, 
                                this.cameraError, 
                                {   quality: 50, 
                                    destinationType: Camera.DestinationType.DATA_URL
                                } );
},
cameraSuccess: function(imageData){
    console.log(imageData);
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
},
cameraError: function(){
    alert("error!");
} 
```

如果我运行 Ripple Simulator，chrome 中的错误控制台会显示：

```
Received Event: deviceready cordova-2.3.0.js:8165
Received Event: deviceready ripple.js:39
blob:http%3A//localhost/1b218c8e-6902-4780-a652-8f7f4d52fe28 cordova-2.3.0.js:8165
blob:http%3A//localhost/1b218c8e-6902-4780-a652-8f7f4d52fe28 ripple.js:39
GET data:image/jpeg;base64,blob:http%3A//localhost/1b218c8e-6902-4780-a652-8f7f4d52fe28 
```

如果我运行模拟器，在添加图像作为相机数据后，我会弹出一个错误，错误日志显示为：

```
1:01:16.054: cordovaExample [2013-01-14 18:55:03.858]: Error in error callback: Camera1387674010 = ReferenceError: Can't find variable: imageData 
```

当我在设备上运行时，我实际上并不知道如何读取错误输出。

根据我所展示的内容，为什么我的 Phone Gap 应用程序没有在黑莓设备上拍照？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:16:52.187

Phonegap **DestinationType.DATA_URL**选项不适用于某些 BB 设备，主要是较新的设备。因为现代手机（如 BB 9800）有更好的相机，它们也会产生更大的图片，因此将它们转换为 BASE64 字符串会导致内存问题和空 imageData 变量。

您可以通过降低**targetWidth**和**targetHeight**来测试它。如果它适用于较低的分辨率，那么这就是你的问题。

它可以通过使用**FILE_URI**而不是**DATA_URL**来解决。但无论哪种方式，你都应该尝试。

如果**FILE_URI**不起作用，则问题出在 BB 相机中。

# c# - 从各种视频设备捕获实时视频

> ID：14324770
> 
> 赞同：-5
> 
> 时间：2013-01-14T18:58:34.913
> 
> 标签：c#, .net, video

我不确定我必须从哪里开始创建 .NET 应用程序 (C#) 以“从各种视频设备捕获实时视频”。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:09:26.750

有一个代码项目项目可以使用directx 完成您正在寻找的工作。

[http://www.codeproject.com/Articles/7123/Capture-Live-Video-from-various-Video-Devices](http://www.codeproject.com/Articles/7123/Capture-Live-Video-from-various-Video-Devices)

# android - Android 文件系统和可用空间混乱

> ID：14324771
> 
> 赞同：3
> 
> 时间：2013-01-14T18:58:39.657
> 
> 标签：android, filesystems

当我想查看我的 android 上的*总*可用空间时，我通常会同时查看*内部​​存储*和*外部存储（SD 卡）*。

根据我在一些 SO 答案中读到的内容，我会发现内部存储数据（可用空间、可用空间等）如下所示：

```
 File path            = Environment.getDataDirectory();
 StatFs stat          = new StatFs(path.getPath());
 long blockSize       = stat.getBlockSize();
 long totalBlocks     = stat.getBlockCount();
 long availableBlocks = stat.getAvailableBlocks();
 //Logging added to make sure I am not going mad
 Log.v(TAG,"Available Blocks: "+Long.toString(availableBlocks));
 Log.v(TAG,"Total Blocks: "+Long.toString(totalBlocks));
 Log.v(TAG,"Block size: "+Long.toString(blockSize)); 
```

如果我想获取我的 android 设备的外部存储（SD 卡），我会运行如下代码：

```
 FilePath path           = Environment..getExternalStorageDirectory();
  StatFs stat             = new StatFs(Environment.getPath());
  this.extblockSize       = stat.getBlockSize();
  long exttotalBlocks     = stat.getBlockCount();
  long extavailableBlocks = stat.getAvailableBlocks();
  //More logging to ensure I am not mad!
  Log.v(TAG,"EXTAvailable Blocks: "+Long.toString(extavailableBlocks));
  Log.v(TAG,"EXTTotal Blocks: "+Long.toString(exttotalBlocks));
  Log.v(TAG,"EXTBlock size: "+Long.toString(extblockSize)); 
```

我说的对吗？这就是您在 android 设备上读取外部和内部存储的方式吗？

假设我是对的，我有一点问题。当我在三星 Galaxy SIII 上运行上面的代码时，上面的代码片段返回的内存量完全相同。现在我知道我的三星有大约 25GB 的内部存储器，并且我有一张 4GB 的 SD 卡。

然而，这两段代码都返回正确的 25GB 总计和 23GB 空闲，这也是正确*的，但仅适用于内部存储*。我只是一辈子不知道如何读取*SD 卡*的文件系统信息。有关正在输出的实际值，请参阅下面的日志输出。

```
01-14 20:49:25.485: V/VLRApplication(730): Available Blocks: 6031460
01-14 20:49:25.485: V/VLRApplication(730): Total Blocks: 6702651
01-14 20:49:25.485: V/VLRApplication(730): Block size: 4096

01-14 20:49:25.485: V/VLRApplication(730): EXTAvailable Blocks: 6031460
01-14 20:49:25.485: V/VLRApplication(730): EXTTotal Blocks: 6702651
01-14 20:49:25.485: V/VLRApplication(730): EXTBlock size: 4096 
```

所以我一定是误解了这个概念。有人可以为我澄清一下吗？是否调用`Environment.getExternalStorageDirectory()`不设置 SD 卡的路径？顺便说一句，我没有在 AVD 模拟设备中尝试过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:13:07.227

大多数人的*外部*概念与谷歌不同。内部空间与 SD 卡一起算作外部存储目录。

问题是，物理 SD 卡安装在同一个文件系统中，并且位置因制造商/ROM 而异。[这里](https://stackoverflow.com/questions/5694933/find-an-external-sd-card-location)和[这里](https://stackoverflow.com/questions/11281010/how-can-i-get-external-sd-card-path-for-android-4-0)有一些关于这个问题的问题。不幸的是，似乎没有设备通用的解决方案。

# php - 无法创建表 - mysqli

> ID：14324777
> 
> 赞同：0
> 
> 时间：2013-01-14T18:58:52.217
> 
> 标签：php, mysql, mysqli

我正在处理我的个人项目，目前我正在处理安装脚本。但是，它不能正常工作，因为它当前应该创建两个包含一些列的表。

这是代码：

```
<?php

$db = "table";
$user = "root";
$pass = "xxxxxxxxx";

$dothemagic = new mysqli("localhost",$user,$pass,$db);
if(!$dothemagic){
    die("Teit jotain pahasti väärin! ".mysql_error());
}
else {
    echo "Yhteys tietokantaan luotu!<br>";}

$product = "CREATE TABLE product
    (
    ID int NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (ID),
    Name varchar(80),
    Description varchar(6000),
    Price varchar(10)
    )
";

$kategory = "CREATE TABLE product
    (
    ID int NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (ID),
    Name varchar(80),
    Description varchar(6000)
    )
";
if(!mysqli_query($product,$dothemagic)){
    echo "Taulua tuote ei voitu luoda! Tarkista asetuksesi!<br>";
}
else{echo "Taulu tuote on luotu!<br>";}

if(!mysqli_query($kategory,$dothemagic)){
    echo "Taulua kategoria ei voitu luoda! Tarkista asetuksesi!<br>";
}
else{echo "Taulu kategoria on luotu!<br>";} 
```

当我导航到脚本位置时，我得到以下文本：

```
Yhteys tietokantaan luotu!
Taulua tuote ei voitu luoda! Tarkista asetuksesi!
Taulua kategoria ei voitu luoda! Tarkista asetuksesi! 
```

所以在英语中，它连接到数据库，但它无法创建表。由于它在 root 上运行，它应该拥有所有的权利......怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:04:07.630

我相信你的论点顺序不正确。根据[文档](http://php.net/manual/en/mysqli.query.php)，`$link`应该是第一个。您似乎将其置于此处的第二个位置。

如果你使用面向对象的风格，就更难出错了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-18T06:02:37.390

The CREATE TABLE statement is used to create a table in MySQL. We must add the CREATE TABLE statement to the mysqli_query() function to execute the command.

# python - 从元组列表中提取值（在这种情况下，列表中只有一个元组）

> ID：14324779
> 
> 赞同：0
> 
> 时间：2013-01-14T18:58:54.547
> 
> 标签：python, google-app-engine, google-cloud-datastore, tuples

我在 python GAE 工作。

无法弄清楚为什么我不能使用`[index]`. 从日志中，我可以看到我的`leveloneAdd`变量中确实有一个值，例如 ( `'english'`, `'subject'`) - 但是当我循环遍历我的元组 1 时，我的变量中变得空了`tag`-`htype`当我期待`tag = 'english'`和`htype = 'subject'`.

有人有什么想法吗？

```
for each in leveloneAdd:
    tag = each[0]
    htype = each[1]
    q1 = Level_1_Headings.all().filter("name1 =",tag).filter("heading_type =",htype).get() 
```

因此，我按照 Martijn 的建议在日志中进行了 repr，这是我的日志：感谢您的所有输入！喜欢这个板子——这是我使用 Martijn 建议的日志——我认为它像字符串一样解释整个事情——

```
INFO     2013-01-14 19:28:17,030 main.py:291] each is ('math', 'subject')
INFO     2013-01-14 19:28:17,030 main.py:292] u"('math', 'subject')"
INFO     2013-01-14 19:28:17,030 main.py:294] tag is (
INFO     2013-01-14 19:28:17,030 main.py:296] heading type is ' 
```

看起来字符串被视为字符串？如何将其转换为真正的元组阅读。这是我应该在其中创建元组的原始代码（然后它转到客户端，然后返回，如日志中所示。）

对于 h1 中的 x：listone.append((str(x.name1),str(x.heading_type)))

上面的值在输入选择下拉框表单中，然后从服务器端 python - 我通过
leveloneAdd = (self.request.get_all("list_uno[]"))获取值

对不起，如果这些看起来很基本的问题，我是一个试图变得更好的初学者！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:05:54.887

如果`leveloneAdd == ('english', 'subject')`那么它不是一个元组列表，它只是一个元组，所以`each`在循环的每次迭代中都会将一个字符串作为一个值。

`leveloneAdd == [('english', 'subject')]`如果这是一个内部包含元组的列表，您的代码将可以正常工作。

如果可以的话，您最好的选择是修复代码，因此 leveloneAdd 始终是一个元组列表，如果您不能这样做，那么当它是一个包含两个字符串的元组时，您必须通过将 leveloneAdd 设为一个列表来修复它在里面。小心，测试所有输入，因为在处理这种转换时很容易出错。

在[文档](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get_all)中说`get_all`应该返回一个列表，也许它仅在有多个参数时才返回一个列表。如果是这种情况，如果它是字符串，您可以将值转换为列表：

```
if isinstance(leveloneAdd, basestring):
    leveloneAdd = [leveloneAdd] 
```

之后，只需将 leveloneAdd 的值拆分为 ','

还要调整你的Javascript以避免额外的字符，如“（”和“'”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:31:30.363

FC 说的是真的。

我对单元素与元组的问题有点困惑。如果基本问题只是检测您是否将简单值或元组作为 的元素`leveloneAdd`，那么您可能会考虑将其`listoneAdd`作为元组列表，即使您要添加的内容是单个元素。这样，当您从列表中拉出一个元素时，您将始终知道您可以对其进行索引：

```
listoneAdd = [('one',), ('foot',), ('three', 'pigs')]
for element in listoneAdd:
    print "element is " + str(element)
    for i in range(0,len(element)):
        print "    do something with value " + element[i]` 
```

产生：

```
element is ('one',)
    do something with value one
element is ('foot',)
    do something with value foot
element is ('three', 'pigs')
    do something with value three
    do something with value pigs` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:03:29.563

尝试这个：

```
for (tag, htype) in leveloneAdd:
    # stuff 
```

如果它不是一个元组，你会得到类似“Too many values to unpack”的错误。

* * *

我误读了OP。

当我遇到这样的问题时，我通常会尝试这样的事情：

```
for thing in list:
    try:
        (tag, htype) = thing
    except:
        import pdb
        pdb.set_trace() 
```

然后你会得到调试器，你可以看看'东西'是否是你认为的那样。

* * *

根据 OP，“事物”不是元组，而是 unicode 字符串。要解决您的问题，请转换为字符串，然后拆分字符串。代码如下：

```
thing = u'(a,b)'
[tag, htype] = str(thing).lstrip('(').rstrip(')').split(',') 
```

这假设您总是期望两个条目的元组。

# c# - 在 BackgroundWorker 中格式化 RichText

> ID：14324781
> 
> 赞同：0
> 
> 时间：2013-01-14T18:59:02.997
> 
> 标签：c#

我正在使用文件侦听器（用于 txt 文件）`FileSystemWatcher`并希望将所有新行附加到`RichTextBox`. 将新文本格式化为富文本需要大量的 cpu 能力，所以我决定为此使用 BackgroundWorker。

该程序仍在运行，但当我锁定 MS Windows 并重新登录时，表单会挂起。似乎 BackgroundWorker 线程正在阻塞 UI 线程。`BeginInvoke`使用代替`Invoke`for AppendText 到 RichTextBox没有其他效果。

当我将未格式化的文本传递给`e.Result`一切`bw_DoWork`正常时（没有阻塞线程）。临时 RichTextBox 未附加到主窗体。如何解决“挂起”问题？

代码示例之前的逻辑：`FileSystemWatcher`事件`Changed`开始`BackgroundWorker.RunWorkerAsync`。

```
StringBuilder unformattedText;

private void bw_DoWork( object sender, DoWorkEventArgs e )
{
    // Write all new lines for this file to 
    // StringBuilder variable unformattedText
    ReadFromFile (...)

    // Need a temporary RichTextBox to create new formatted text
    RichTextBox tempRtb = new RichTextBox();

    // Split new unformatted text with regex, format some tokens 
    // and append each to temporary RichTextBox tempRtb
    HighlightWords( tempRtb, unformattedText );

    e.Result = tempRtb.Rtf;
}

private void bw_RunWorkerCompleted( object sender, RunWorkerCompletedEventArgs e )
{
    string rtfText = e.Result as string;

    // Append text to main RichTextBox 
    if (rtb.InvokeRequired)
    {
            rtb.BeginInvoke(
                new MethodInvoker( delegate
                {
                    AppendRichText( rtb, rtfText );
                } ) );
    }
    else
    { 
        AppendRichText( rtb, rtfText );
    }
}

private void AppendRichText(RichTextBox rtb, string text)
{
    // Append formatted text at the end of the RichTextBox
    rtb.Select( rtb.TextLength, 0 );
    rtb.SelectedRtf = text;

    rtb.ScrollToCaret();
} 
```

注意：这些只是理解问题的代码部分。它不完整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:01:39.700

`RichTextBox`不能在工作线程上创建或操作。您*必须*在 UI 线程上执行此操作。

在`bw_RunWorkerCompleted`UI 线程上运行，因此`BeginInvoke`不是必需的。

您需要将所有代码`ReadFromFile`移入之后`bw_RunWorkerCompleted`，您将不再需要临时文件`RichTextBox`。

# java - Java - 线程资源和执行时间

> ID：14324790
> 
> 赞同：0
> 
> 时间：2013-01-14T18:59:25.380
> 
> 标签：java

为了获得线程的执行时间，我正在使用

```
ManagementFactory.getThreadMXBean().getThreadCpuTime(t1.getId()) 
```

其中 t1 是一个线程。

现在我需要打印一个线程正在使用的资源，有没有办法知道资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:05:36.230

我会`printResources`在你的线程类中引入一个方法，然后`t1`转换为它的本地类，你可以在其中调用该`printResources`方法。

# php - 保护无会话 RESTful API 端点

> ID：14324792
> 
> 赞同：6
> 
> 时间：2013-01-14T18:59:31.437
> 
> 标签：php, api, rest, curl, restful-authentication

我为一个项目创建了一个简单的 RESTful API，部分遵循[Riyad Kalla 的这篇非常好的博客文章](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)。现在，我在 Stack Overflow 上阅读了几十个类似的问题，但我似乎无法找到我的安全问题的答案。

简而言之，我的请求是这样的：

1.  客户端有一个公共 API 密钥（纯文本，任何嗅探网络流量或正确检查代码源的人都可以访问）
2.  客户端使用公共 API 密钥向服务器发送请求
3.  服务器有一个秘密的 API 密钥（对除开发人员以外的任何人都是秘密的）
4.  服务器创建一个由客户端请求数据和秘密 API 密钥组成的 HMAC-SHA1 哈希
5.  服务器向 API 服务器发送与客户端请求相同的请求，但包括生成的 HMAC-SHA1
6.  API 服务器根据它收到的公共 API 密钥在其数据库中查找秘密 API 密钥
7.  API 服务器使用与开发者服务器相同的数据重新创建 HMAC-SHA1 哈希
8.  如果哈希匹配，则认为请求有效并正常处理

我担心使用我的服务的人可以获取公共 API 密钥（比如说通过嗅探网络流量），然后简单地将客户端最初使用 AJAX 通过浏览器执行的相同请求直接卷曲到开发人员的服务器。因此，恶意用户可以被认证为合法用户，并使用其他人的秘密 API 密钥访问 API。

我将尝试举一个具体的例子。通常我会这样做：

1.  AJAX 对我的服务器的获取请求。
2.  我的服务器使用我的 API 密钥对我的请求进行哈希处理并将其发送到 API 服务器。
3.  API 服务器验证我的请求并返回有效负载。

但我很害怕：

1.  Dr. Evil 会嗅探我的公共 API 密钥。
2.  Dr. Evil 将使用我的公共 API 密钥将 get 请求卷曲到我的服务器。
3.  我的服务器将使用我的 API 机密对 Dr. Evil 的请求进行哈希处理，并将其发送到 API 服务器。
4.  API 服务器验证并返回有效载荷以完成 Dr. Evil 的恶毒计划。
5.  邪恶博士发出邪恶的笑声。

我遗漏了什么，或者这只是 RESTful API 游戏的一部分？

更新：我自愿省略任何形式的时间戳验证，以保持简单，只关注身份验证问题。

更新 2：我`$_SERVER['HTTP_REFERER']`在流程中添加了验证。这里的目标是客户端必须与请求一起发送引荐来源网址，并且它必须与 API 端数据库中列出的引荐来源网址相匹配。不幸的是，HTTP 引荐来源网址很容易被伪造。这是另一个级别的安全性，但仍不完美。

更新 3：我已更改服务器端代码以将引用者设置为远程 IP 地址。这会强制发送到我的服务器的每个请求都希望使用秘密 API 密钥进行哈希处理，最终到达具有原始请求 IP 地址的 API 服务器。然后可以验证此 IP，并且可以通过请求。我相信仍然可以伪造`$_SERVER['REMOTE_ADDR']`，但它比伪造更复杂`$_SERVER['HTTP_REFERER']`......我猜仍然不完美。

**更新 4**：根据这些帖子：[如何伪造 $_SERVER['REMOTE_ADDR'] 变量？](https://stackoverflow.com/questions/5092563/how-to-fake-serverremote-addr-variable)和[https://serverfault.com/questions/90725/are-ip-addresses-trivial-to-forge](https://serverfault.com/questions/90725/are-ip-addresses-trivial-to-forge)`$_SERVER['REMOTE_ADDR']` ，虽然很困难，但伪造是可能的。但是，由于您无法控制伪造的网络，因此不可能收到来自伪造请求的响应。请求可以成功验证，但其响应不会落入恶意之手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:07:16.297

使用 HMAC，您走在正确的轨道上。但是，还有两件事可以使您的应用程序更加安全。

1.  需要客户端 POST 中的时间戳，需要在服务器时间的 5 分钟内验证。它也应该包含在 HMAC 生成中。如果有人试图更改此 HMAC 签名将无效，除非他们拥有更新 HMAC 签名的密钥。
2.  使用带有证书验证的 SSL。防止中间人攻击。不允许任何非 ssl 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:06:50.293

我发现阻止其他脚本使用公共 API 密钥并向服务器端 HMAC 哈希脚本发送请求的解决方案是将原始请求者的*身份*与请求一起发送。我`$_SERVER['REMOTE_ADDR']`用来确定原始请求者的身份，因为它更难伪造，而且伪造通常意味着他们不会得到回应。

```
/* $this as a class that handles requests */

// Build hash and include timestamp
$this->vars['timestamp'] = time();
$this->vars['hash'] = hash_hmac('sha1', http_build_query($this->vars).$this->vars['token'], API_SECRET);

// Send request to API
curl_setopt_array($this->curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url,
    CURLOPT_POST => $this->method == 'post' ? 1 : NULL,
    CURLOPT_POSTFIELDS => $this->method == 'post' ? $this->vars : NULL,
    CURLOPT_CONNECTTIMEOUT => 15,
    CURLOPT_TIMEOUT => 15,
    CURLOPT_REFERER => $_SERVER['REMOTE_ADDR'], // Referer here!
    CURLOPT_MAXREDIRS => 3,
    CURLOPT_HTTPGET => $this->method == 'get' ? true : false
)); 
```

一旦发送，API 不仅会检查数据库中的 API 密钥，还会检查是否`$_SERVER['HTTP_REFERER']`被列为允许！这也允许 API 在每个用户的基础上接受服务器。

# sql - 合并所有并在sql中合并

> ID：14324793
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:59:33.993
> 
> 标签：sql, database, merge, union

这是我需要的：
我有：

```
Table A  PT*,NAME,AGE
Table B  PT*,COURSE,RESULT
Table C  PT*,COURSE,RESULT,RANk 
```

想知道如何将**表**B 和表 C 合并，然后与表 A 合并以获得如下输出（表 D）。PT是其中的PKey。

```
PT NAME AGE COURSE RESULT RANK
100 SLK   29  Test1  29          - result of merge between Table A and Table B 
200 AAR   30  Test2  23     10   - result of merge between Table A and Table C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:33:12.527

要获得理想的输出，只需执行一个简单的 SQL SELECT 查询：

```
SELECT A.PT, A.NAME, A.AGE, B.COURSE, B.RESULT, C.RANK
FROM 
A join B on A.PT=B.PT
join C ON A.PT = C.PT 
```

顺便说一下，为什么您需要表 C 中的 COURSE、RESULT 字段，因为它们已经存储在表 B 中？

# c# - 如何将 JSON 数组（作为字符串）解析为 Dictionary 在 C# 中？

> ID：14324794
> 
> 赞同：2
> 
> 时间：2013-01-14T18:59:38.220
> 
> 标签：c#, arrays, json, parsing, dictionary

我有以下格式的字符串：

```
{ "Updated" : [ { "FIRST_NAME" : "Aaa", "LAST_NAME" : "Bbb" } ] } 
```

我怎样才能得到一本字典，这样我就可以打电话了`dict["FIRST_NAME"]`？

我尝试了以下方法，但我认为它们不起作用，因为我的字符串是 JSON*数组*？如果是这种情况，如何将其更改为常规 JSON 字符串？我认为它不需要是一个包含简单数据类型的数组......数组的大小永远不会超过1 - 即，不会有重复的字段。

```
Dictionary<string, string> dict = serializer.Deserialize<Dictionary<string, string>>(jsonString); //didn't work

JArray jArray = JArray.Parse(jsonString); //didn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:48:49.350

你所拥有的是一个复杂的对象，它可以被解析为一个字典数组的字典！

所以你可以像这样解析它：

```
var dic = serializer.Deserialize<Dictionary<string, Dictionary<string, string>[]>>(jsonString)["Updated"][0];
var firstName = dic["FIRST_NAME"];
var lastName = dic["LAST_NAME"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:13.290

使用动态变量可能更容易。请参阅[将 JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)更多细节。

# twitter-bootstrap - Twitter Bootstrap - 停止容器调整大小？

> ID：14324802
> 
> 赞同：1
> 
> 时间：2013-01-14T19:00:09.423
> 
> 标签：twitter-bootstrap, resize, containers, fixed

如何阻止引导元素使用浏览器调整大小？

那么当我改变浏览器的宽度时，容器和导航栏的宽度保持不变？

我google了很多，但我找不到答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:49:16.207

如果您正在谈论使用 bootstrap 并使用from 调整大小`div`的类停止 a `container`，请确保您**没有**使用`bootstrap-responsive.css`. 这应该可以解决这个问题。

如果您一般谈论 html 元素，则需要向每个元素添加`height`和`width`css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T20:59:42.210

您应该禁用 Bootstrap 的响应功能。

[http://getbootstrap.com/getting-started/#disable-responsive](http://getbootstrap.com/getting-started/#disable-responsive)

# c# - 传递带有额外参数的委托函数

> ID：14324803
> 
> 赞同：16
> 
> 时间：2013-01-14T19:00:15.940
> 
> 标签：c#, delegates

我有一个如下所示的代表：

```
public delegate bool ApprovalPrompt(ApprovalType type, int receipt, params string[] info); 
```

我接受这种类型的委托作为我要调用的函数的参数。但是，在一个特定的调用函数中，我想将一些额外的数据传递给与该委托匹配的函数。

这是实现函数的签名：

```
private static bool LogApprovalNeeded(FraudFilterUtilities.ApprovalType type, int receipt, params string[] info) 
```

它被称为如下：

```
PrepareReceipt(LogApprovalNeeded); 
```

我希望它是：

```
private static bool LogApprovalNeeded(Customer cust, FraudFilterUtilities.ApprovalType type, int receipt, params string[] info) 
```

理想情况下将按如下方式使用：

```
PrepareReceipt(LogApprovalNeeded(myCustomer)) 
```

* * *

我怎样才能完成这样的事情？我宁愿不需要在类中声明一个字段只是为了保存`Customer`一个函数和回调之间的参数......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T19:03:50.677

您可以使用 lambda 来“咖喱”您的函数：

```
PrepareReceipt((type, receipt, info) => 
    LogApprovalNeeded(myCustomer, type, receipt, info)) 
```

对函数进行柯里化是存储对函数的引用但具有一个或多个“固定”参数的正式术语，从而改变了方法的签名。

当您的函数签名不需要委托提供的所有参数时，您也可以使用 lambda；您可以通过不传递 lambda 中的所有参数来有效地丢弃参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T19:03:06.483

您可以使用 lambda 来实现您所需要的。

```
PrepareReceipt((type, receipt, info) =>
               LogApprovalNeeded(myCustomer, type, receipt, info)); 
```

或者，将您的`LogApprovalNeeded`签名更改为：

```
static bool LogApprovalNeeded(ApprovalType type, int receipt, 
                              Customer cust = null, params string[] info)
{
} 
```

但考虑到您已经在`cust`.

**编辑：**正如 Servy 正确指出的那样，签名的更改不会让您按照您的描述调用该方法。但是，如果您将与相关的逻辑移动`Customer`到`PrepareReceipt`，则不需要使用上述方法（它基本上会生成一个新的匿名方法并包装`myCustomer`在一个闭包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T16:49:51.487

如果您需要委托部分应用程序的通用解决方案（减少参数），请查看[NReco Commons](http://www.nrecosite.com/nrecolib_net.aspx)开源库，它包含可以对任何委托类型执行此操作的 PartialDelegateAdapter：

```
var logApprovalForCustomer = (new PartialDelegateAdapter(LogApprovalNeeded,
    new[] {myCustomer})).GetDelegate<Func<FraudFilterUtilities.ApprovalType,int,string[],bool>>(); 
```

在此示例中，第一个参数固定为 myCustomer 值。此外，它还尝试在运行时协调参数类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-05T17:51:33.487

Lamba 方法并不完美：它们没有属性并且会导致代码混乱。
如果你想避免这种方法，你可以用另一种方式来做，就像 JavaScript 的`.bind()`函数一样。
该函数可以在 C# 中进行如下调整，使用带有一些扩展方法的静态类：

```
//This code requires the Nu-get plugin ValueTuple
using System.Diagnostics;

public static class Extensions
{

    [DebuggerHidden, DebuggerStepperBoundary]
    public static WaitCallback Bind(this Delegate @delegate, params object[] arguments)
    {
        return (@delegate, arguments).BoundVoid;
    }

    [DebuggerHidden, DebuggerStepperBoundary]
    public static Func<object, object> BindWithResult(this Delegate @delegate, params object[] arguments)
    {
        return (@delegate, arguments).BoundFunc;
    }

    [DebuggerHidden, DebuggerStepperBoundary]
    private static void BoundVoid(this object tuple, object argument)
    {
        tuple.BoundFunc(argument);
    }

    [DebuggerHidden, DebuggerStepperBoundary]
    private static object BoundFunc(this object tuple, object argument)
    {
        (Delegate @delegate, object[] arguments) = ((Delegate @delegate, object[] arguments))tuple;
        if (argument != null)
            if (!argument.GetType().IsArray)
                argument = new object[] { argument };
        object[] extraArguments = argument as object[];
        object[] newArgs = extraArguments == null ? arguments : new object[arguments.Length + extraArguments.Length];
        if (extraArguments != null)
        {
            extraArguments.CopyTo(newArgs, 0);
            arguments.CopyTo(newArgs, extraArguments.Length);
        }
        if (extraArguments == null)
            return @delegate.DynamicInvoke(newArgs);
        object result = null;
        Exception e = null;
        int argCount = newArgs.Length;
        do
        {
            try
            {
                if (argCount < newArgs.Length)
                {
                    object[] args = newArgs;
                    newArgs = new object[argCount];
                    Array.Copy(args, newArgs, argCount);
                }
                result = @delegate.DynamicInvoke(newArgs);
                e = null;
            } catch (TargetParameterCountException e2)
            {
                e = e2;
                argCount--;
            }
        } while (e != null);
        return result;
    }
} 
```

现在您可以为您的方法（不是 lambda）创建一个委托并为其分配一些固定参数：

```
MessageBox.Show(new Func<double, double, double>(Math.Pow).BindWithResult(3, 2)(null).ToString()); //This shows you a message box with the operation 3 pow 2 
```

因此，下面的代码将产生一个`WaitCallback`委托：

```
new Func<double, double, double>(Math.Pow).Bind(3, 2) 
```

而下面的代码将产生一个`Func<object, object>`委托：

```
new Func<double, double, double>(Math.Pow).BindWithResult(3, 2) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-14T19:04:30.740

您可以更改`PrepareReceipt`函数以获取附加参数。签名看起来像`public void PrepareReceipt(Customer customer, ApprovalPrompt approvalPrompt)`完成这个。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-14T19:10:59.497

您不能将其传递给该委托，因为委托未声明客户类型的参数。“简单的答案”是更改委托的签名以采用新的参数。

也就是说，这也需要修改代表的所有消费者。

# java - 类变量：公共访问只读，但私有访问 r/w

> ID：14324805
> 
> 赞同：4
> 
> 时间：2013-01-14T19:00:25.447
> 
> 标签：java, class-variables

在我当前的项目中，我有一个将其实例存储在变量中的类。这个实例应该可以被项目中的所有其他类访问，但它只能被它自己的类改变。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T19:01:41.120

写一个`public`getter，但*没有* `public`setter。和领域本身`private`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T19:06:43.360

简而言之，就是所谓`immutable object`的，构造后的状态是`Object`不能改变的。

`String`是 immutable 的一个常见例子`Class`。

`class` `immutable`通过以下方式制作 -

*   确保类不能是`overridden`- 制作`class` `final`，或使用 `static`工厂并保持构造函数私有。
*   制作字段`private`和`final`
*   强制调用者在一个步骤中完全构造一个对象，而不是使用`no-argument constructor`结合随后的`setXXX`方法调用。
*   不提供任何可以以任何方式改变对象状态的方法——不仅仅是`setXXX`方法，而是任何可以改变状态的方法
*   如果类有任何可变对象字段，那么当在类和它的调用者之间传递时，它们必须被防御性地复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-13T19:21:12.023

有人建议“public getter but no public setter for the private field”。

注意：这仅在字段是原始类型时才有效。
如果是带setter的对象，内容还是可以修改的；因此不是只读的。

有趣的是，Java 语言提供了一些结构来使返回类型为只读，而无需进行深度复制/克隆。

我正在成像 ReadOnly getEmployee() { ...}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:10:36.827

可以在许多地方找到用于实例化单例的样板代码，例如参见[http://www.javacoffeebreak.com/articles/designpatterns/index.html](http://www.javacoffeebreak.com/articles/designpatterns/index.html)

请注意，许多人认为单例是一种反模式，因为一旦您的应用程序中充斥着对单例的引用，就很难摆脱它。

# powershell - Powershell V2 查找和替换

> ID：14324808
> 
> 赞同：1
> 
> 时间：2013-01-14T19:00:48.450
> 
> 标签：powershell, replace

我正在尝试以编程方式更改文件中的日期。我需要修复的行如下所示：

```
 set @@dateto = '03/15/12' 
```

我需要编写一个 powershell V2 脚本来替换单引号内的内容，但我不知道该怎么做。

我最接近的看起来像这样：

```
 gc $file | ? {$_ -match "set @@dateto ="} | % {$temp=$_.split("'");$temp[17] 
     =$CorrectedDate;$temp -join ","} | -outfile newfile.txt 
```

问题：它给出了一个关于索引 17 超出范围的错误。此外，outfile 仅包含一行（未修改的行）。我很感激这方面的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:17:55.940

你可以做这样的事情（虽然你可能想处理极端情况）：

```
$CorrectedDate = '10/09/09'
gc $file | %{ 
    if($_ -match "^set @@dateto = '(\d\d/\d\d/\d\d)'") { 
        $_ -replace $matches[1], $CorrectedDate; 
    }  
    else {
        $_
    } 
} | out-file test2.txt
mv test2.txt $file -force 
```

# javascript - CSS曲线渐变和box-shadow

> ID：14324809
> 
> 赞同：7
> 
> 时间：2013-01-14T19:00:50.980
> 
> 标签：javascript, html, css

可以使用 CSS 使内容容器的左右边缘看起来像这张图片吗？如果可能的话，我一直在想办法在不使用图像的情况下做到这一点。

![左右边框的图像](../Images/770ff8caaadd14f26b75ec3bbaeeec88.png)

这是我一直在研究的 jsFiddle。“顶级”类的 CSS 永远不会被应用。“底部”类的 CSS 似乎工作正常。

[http://jsfiddle.net/kXuQY/](http://jsfiddle.net/kXuQY/)

HTML：

```
<div class="drop-shadow top bottom">
  Content here.
</div> 
```

CSS：

```
.drop-shadow {
/** Create container.  Box-shadow here is to color the inside of the container **/
 position:relative;
 width:50%;
 background: none repeat scroll 0 0 #FFFFFF;
 box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
 padding:3em;
 margin: 2em 20px 4em;
 text-align:center
}

.top:before,
.top:after {
  /** Generate pseudo-elements ('before' and 'after') and push them behind the container box. Position pseudo-elements ('before', and 'after') and give them dimensions **/
 content:"";
 position:absolute;
 z-index:-1;
 top:20px;
 left:0;
 width:40%;
 height:1em;
 max-width:150px;
 -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 -webkit-transform:rotate(70deg);
 -moz-transform:rotate(70deg);
 -o-transform:rotate(70deg);
 transform:rotate(70deg);
}

.top:after{
  /**One of the pseudo-elements then needs to be positioned on the other side of the element and rotated in the opposite direction. This is easily done by overriding only the properties that need to differ **/
 right:0;
 left:auto;
 -webkit-transform:rotate(-70deg);
 -moz-transform:rotate(-70deg);
 -o-transform:rotate(-70deg);
 transform:rotate(-70deg);
}

.bottom:before,
.bottom:after {
  /** Generate pseudo-elements ('before' and 'after') and push them behind the container box. Position pseudo-elements ('before', and 'after') and give them dimensions **/
 content:"";
 position:absolute;
 z-index:-2;
 top:90px;
 left:0;
 width:10%;
 max-width:150px;
 -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
 -webkit-transform:rotate(99deg);
 -moz-transform:rotate(99deg);
 -o-transform:rotate(99deg);
 transform:rotate(99deg);
}

.bottom:after{
  /**One of the pseudo-elements then needs to be positioned on the other side of the element and rotated in the opposite direction. This is easily done by overriding only the properties that need to differ **/
 right:0;
 left:auto;
 -webkit-transform:rotate(-99deg);
 -moz-transform:rotate(-99deg);
 -o-transform:rotate(-99deg);
 transform:rotate(-99deg);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T21:04:20.403

您可以使用`::before`和`::after`伪元素来实现效果，请参见[此处](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)。

示例：（[演示](https://jsfiddle.net/okpnuzjt/)）

**HTML：**

```
<div id="box">
<h1>css-3-box-shadow</h1>
<p>some text</p>
</div> 
```

**CSS：**

```
#box:before, #box:after {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.7);
    bottom: 15px;
    box-shadow: 0 15px 10px rgba(0, 0, 0, 0.7);
    content: "";
    left: 10px;
    max-width: 300px;
    position: absolute;
    top: 80%;
    transform: rotate(-3deg);
    width: 50%;
    z-index: -1;
}

#box:after {
    left: auto;
    right: 10px;
    transform: rotate(3deg);
}

#box {
    background: none repeat scroll 0 0 #DDDDDD;
    border-radius: 4px 4px 4px 4px;
    color: rgba(0, 0, 0, 0.8);
    line-height: 1.5;
    margin: 60px auto;
    padding: 2em 1.5em;
    position: relative;
    text-shadow: 0 1px 0 #FFFFFF;
    width: 60%;
} 
```

# vb.net - 将表映射到类

> ID：14324811
> 
> 赞同：1
> 
> 时间：2013-01-14T19:00:55.350
> 
> 标签：vb.net, design-patterns

如果您有以下课程：

```
Public Class Male
    Inherits Person

    Private Age As integer
    Private TelephoneNumber As String

End Class 
```

和下表

```
CREATE TABLE Person (ID int identity not null, Age int, TelephoneNumber varhchar(30), sex varhchar(6), primary key (ID)) 
```

为了填充 Male 类，您必须运行 SQL 语句，说：WHERE Sex='MALE'。如果一个数据库表有两个类，这是一个糟糕的设计选择吗？即存在一对多的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:12:05.257

这是`Table per Class Hierarchy`，而且是完全可以接受的。此设计模式使用单个表来存储多个子类，并使用鉴别器（在您的情况下`Sex`）来区分它们。

# iphone - 在 RSA 解密中将 uint8_t 转换为 NSString

> ID：14324813
> 
> 赞同：0
> 
> 时间：2013-01-14T19:01:05.540
> 
> 标签：iphone, ios, objective-c, ios5

我正在尝试实现 RSA 算法，我遵循了苹果[参考](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW13)。但是我遇到了将 uint8_t 转换为 NSData 到 NSString 的问题。

到目前为止我已经这样做了..这些函数在[参考中定义](http://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW13)

```
-(void)test{
    [self generateKeyPairPlease];
    NSData *data = [self encryptWithPublicKey]; //All goes well until here
    [self decryptWithPrivateKey:data]; 

} 
```

对于加密我做了..

```
- (NSData *)encryptWithPublicKey
{
    OSStatus status = noErr;

    size_t cipherBufferSize;
    uint8_t *cipherBuffer;                     // 1

// [cipherBufferSize]
    const uint8_t dataToEncrypt[] = "the quick brown fox jumps "
                            "over the lazy dog\0"; // 2
    size_t dataLength = sizeof(dataToEncrypt)/sizeof(dataToEncrypt[0]);

    SecKeyRef publicKey = NULL;                                 // 3

    NSData * publicTag = [NSData dataWithBytes:publicKeyIdentifier
             length:strlen((const char *)publicKeyIdentifier)]; // 4

    NSMutableDictionary *queryPublicKey =
                            [[NSMutableDictionary alloc] init]; // 5

    [queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
    [queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];
                                                                // 6

    status = SecItemCopyMatching
    ((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKey); // 7

//  Allocate a buffer

    cipherBufferSize = SecKeyGetBlockSize(publicKey);
    cipherBuffer = malloc(cipherBufferSize);

//  Error handling

    if (cipherBufferSize < sizeof(dataToEncrypt)) {
        // Ordinarily, you would split the data up into blocks
        // equal to cipherBufferSize, with the last block being
        // shorter. For simplicity, this example assumes that
        // the data is short enough to fit.
        printf("Could not decrypt.  Packet too large.\n");
        return NULL;
    }

    // Encrypt using the public.
    status = SecKeyEncrypt(    publicKey,
                                kSecPaddingPKCS1,
                                dataToEncrypt,
                                (size_t) dataLength,
                                cipherBuffer,
                                &cipherBufferSize
                                );                              // 8

//  Error handling
//  Store or transmit the encrypted text

    if (publicKey) CFRelease(publicKey);

    NSData *encryptedData = [NSData dataWithBytes:cipherBuffer length:dataLength];

    free(cipherBuffer);

    return encryptedData;
} 
```

但是在`decryptWithPrivateKey`我无法将 `uint8_t *plainBuffer`（解密结果）转换为`NSString`.First 时，我尝试将其转换为`NSData`打印时`NSLog`正确显示字节，但随后`NSData`未转换为字符串。

```
- (void)decryptWithPrivateKey: (NSData *)dataToDecrypt
{
    OSStatus status = noErr;

    size_t cipherBufferSize = [dataToDecrypt length];
    uint8_t *cipherBuffer = (uint8_t *)[dataToDecrypt bytes];

    size_t plainBufferSize;
    uint8_t *plainBuffer;

    SecKeyRef privateKey = NULL;

    NSData * privateTag = [NSData dataWithBytes:privateKeyIdentifier
                                         length:strlen((const char *)privateKeyIdentifier)];

    NSMutableDictionary *queryPrivateKey = [[NSMutableDictionary alloc] init];

    // Set the private key query dictionary.
    [queryPrivateKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
    [queryPrivateKey setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
    [queryPrivateKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [queryPrivateKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];
    // 1

    status = SecItemCopyMatching
    ((__bridge CFDictionaryRef)queryPrivateKey, (CFTypeRef *)&privateKey); // 2

    //  Allocate the buffer
    plainBufferSize = SecKeyGetBlockSize(privateKey);
    plainBuffer = malloc(plainBufferSize);

    if (plainBufferSize < cipherBufferSize) {
        // Ordinarily, you would split the data up into blocks
        // equal to plainBufferSize, with the last block being
        // shorter. For simplicity, this example assumes that
        // the data is short enough to fit.
        printf("Could not decrypt.  Packet too large.\n");
        return;
    }

    //  Error handling

    status = SecKeyDecrypt(    privateKey,
                           kSecPaddingPKCS1,
                           cipherBuffer,
                           cipherBufferSize,
                           plainBuffer,
                           &plainBufferSize
                           );                              // 3

    //*******************************************************************************
    // Not able to convert  uint8_t *plainBuffer to string 
    // I also tried to convert it into NSData and then try to convert it into NSString but can't 
    //What Should i do here to get string back

  if(privateKey) CFRelease(privateKey);
}
@end 
```

我想知道如何将解密结果转换`uint8_t plainBuffer`为`NSData`或`NSString`简单地`NSString`以便我得到我的字符串。有关我的加密和密钥生成代码，请参阅此[参考](http://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW13)。

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:29:19.327

我知道这个问题很老，并且标记为已解决，但我遇到了类似的问题。我发现苹果文档中的加密方法似乎有错误

```
NSData *encryptedData = [NSData dataWithBytes:cipherBuffer length:dataLength]; 
```

datalength 在这里是错误的变量。我用 cipherbuffersize 替换它

```
NSData *encryptedData = [NSData dataWithBytes:cipherBuffer length:cipherBufferSize]; 
```

现在一切对我来说都很好。我希望它对我以外的其他人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:04:28.680

最可能的问题是您正在调用[`+[stringWithCharacters:length:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)Unicode 字符（更准确地说是 UTF-16 代码点），但您可能使用 UTF-8 或其他 8 位编码。

您必须知道您拥有哪种编码，以便您可以调用`+[stringWithCString:encoding:]`（或者，如果它是 UTF-8，`+[stringWithUTF8String:]`简称为 UTF-8）。

请注意，与 不同的是`stringWithCharacters`，这些方法不需要长度，并且期望您的数据以空值结尾。因此，除非您确定数据将始终具有终止符，否则您应该明确检查它，或者分配字符串然后调用`-[initWithBytes:length:encoding:]`.

如果你不知道明文在加密之前是什么字符集，你需要找出来。作为人类，您通常可以通过查看它来判断，尤其是当它主要是 ASCII 时。使用缓冲区创建一个`NSData`并记录它并查看十六进制。如果是 UTF-16，ASCII 字符将与空值交替出现，`'Hello'`因此`48 00 65 00 6C 00 6C 00 6F 00`. 但是计算机并不能很好地进行猜测。（`+[stringWithContentsOfFile:usedEncoding:error:]`通常正确的原因是它查看了扩展属性`com.apple.TextEncoding`，大多数 Cocoa 应用程序在保存文件时都会写入该属性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:37:36.580

我设法通过遵循这段 [代码](https://github.com/kuapay/iOS-Certificate--Key--and-Trust-Sample-Project)来解决我的问题。它是相同的代码，但字符串的编码是不同的。在`encryptWithPublicKey`我使用过的函数中

`uint8_t *dataToEncrypt= (uint8_t *)[@"the quick brown fox jumps over the lazy dog" UTF8String];`

代替

`const uint8_t dataToEncrypt[] = "the quick brown fox jumps " "over the lazy dog\0";`

在`decryptWithPrivateKey`我用它来解码

```
 NSData *decryptedData = [NSData dataWithBytes:plainBuffer length:plainBufferSize];
 NSString *decryptedString = [[[NSString alloc] initWithData:decryptedData encoding:NSUTF8StringEncoding] autorelease]; 
```

# android - 如何暂停和恢复服务

> ID：14324814
> 
> 赞同：6
> 
> 时间：2013-01-14T19:01:09.410
> 
> 标签：android, service, android-lifecycle, resume

我是一名 android 初学者，不幸的是，到目前为止，我无法为我的服务问题找到令人满意的答案。我希望你能帮助我。我认为我的问题解决了一个共同的任务。

我的情况如下：我实现了自己的服务，它只记录 GPS 位置并将它们存储在列表中。一旦服务停止，它将数据写入数据库。

这很好用，但现在该服务应该有某种“*暂停模式*”，它会停止录制并可以在以后恢复。实现此功能的最佳方式是什么？

到目前为止，我提出了两个（诚然不是很令人满意）的想法：

1.  实现我自己的服务生命周期（启动、停止、暂停、恢复）并将 GUI 绑定到服务。此外，绑定似乎是异步发生的，这使得更新 GUI（启用和禁用启动/停止控件）有点混乱。

2.  暂停时，服务会停止，GPS 位置会附加到单例类中的某个列表中。在恢复时，服务将再次启动，依此类推。我在这里看到的问题是应用程序可能会在暂停模式下被杀死并且数据丢失。

# assembly - NASM 中的计算器

> ID：14324816
> 
> 赞同：1
> 
> 时间：2013-01-14T19:01:21.203
> 
> 标签：assembly, x86, nasm, dos, dosbox

我正在尝试在 NASM (Asembly) 中编写计算器。它没有显示任何错误，但是在我输入两个数字以添加它们之后，程序就卡住了。之后就什么都做不了了。

这是代码：

```
org 100h

_start:
;LOGO
mov ah, 9
mov dx, logo1
int 21h

mov ah, 9
mov dx, logo2
int 21h

;MENU
mov ah, 9
mov dx, ramka1
int 21h

mov ah, 9
mov dx, wybor
int 21h

mov ah, 9
mov dx, dzialanie1
int 21h

mov ah, 9
mov dx, dzialanie2
int 21h

mov ah, 9
mov dx, dzialanie3
int 21h

mov ah, 9
mov dx, dzialanie4
int 21h

mov ah, 9
mov dx, dzialanie5
int 21h

mov ah, 9
mov dx, ramka2
int 21h

mov ah, 9
mov dx, nwln
int 21h

; WYBOR DZIALANIA
mov ah, 0
int 16h

cmp al, '1' 
je dodawanie 

cmp al, '5'
je wyjscie

dodawanie:

mov ah, 9
mov dx, zmienna1
int 21h

mov ah, 0ah
mov dx, bufor
int 21h

lea si, [bufor + 2] 
mov cx, 0
mov cl, [bufor + 1]
call tekst_na_liczbe

mov [liczba1], ax

mov ah, 9
mov dx, nwln
int 21h

mov ah, 9
mov dx, zmienna2
int 21h

mov ah, 0ah
mov dx, bufor
int 21h

lea si, [bufor + 2]
mov cx, 0
mov cl, [bufor + 1]
call tekst_na_liczbe

add ax, [liczba1]

mov di, liczba
call liczbe_na_tekst

mov bl, '$'
mov bx,ax
mov [bx+liczba], bl

mov ah, 9
mov dx, wynik
int 21h

mov ah, 9
mov dx, liczba
int 21h

mov ah, 9
mov dx, nwln
int 21h

mov ah, 9
mov dx, nwln
int 21h

jmp _start

;WYJSCIE
wyjscie:

mov ax, 4C00h
int 21h

zmienna1 db "||Podaj pierwsza liczbe: $"

bufor db 15
db 0
times 15 db '$'

liczba db 15
db 0
times 15 db '$'

zmienna2 db "||Podaj druga liczbe: $"

liczba1 dd 0
liczba2 dd 0

wynik db 10, 13, "//Wynik: $"

nwln db 10, 13, '$'

menu db "Wybierz dzialanie:", 10, 13, 10, 13, '$'

;WYSWIETLENIE LOGO I MENU
logo1 db      "==============================================", 10, 13, "$"
logo2 db      "||Kalkulator w ASM                          ||", 10, 13, "$"
ramka1 db     "==============================================", 10, 13, "$"
wybor db      "||Wybierz dzialanie:                        ||", 10, 13, "$"
dzialanie1 db "||1.Dodawanie                               ||", 10, 13, "$"
dzialanie2 db "||2.Odejmowanie                             ||", 10, 13, "$"
dzialanie3 db "||3.Mnozenie                                ||", 10, 13, "$"
dzialanie4 db "||4.Dzielenie                               ||", 10, 13, "$"
dzialanie5 db "||5.Wyjcie z kalkulatora                    ||", 10, 13, "$"
ramka2 db     "==============================================", "$"

liczbe_na_tekst:
push cx
push dx
push si
mov cx, 10 
mov si, 0 
.dziel:
mov dx, 0 
div cx 
add dl, '0' 
mov bp,di
add di,si
mov dl,[bp]
inc si 
cmp ax, 1
jge .dziel 
push esi 
dec esi 
mov ecx, 0 
.odwroc:
mov bx, di 
mov di, cx 
add di, cx 
mov al,[bx] 
inc cx 
dec si
cmp cx, si
jl .odwroc 
pop ax 
pop dx
pop cx
ret

tekst_na_liczbe:
push bx
push dx
mov ax, 0 
mov bx, 0 
.petla:
mov dx, 10 
mul dx 
mov dl, [si+bx] 
sub dl, '0' 
add ax, dx 
inc bx 
cmp bx, cx 
jl .petla 
pop dx
pop bx
ret 
```

对不起，部分代码是波兰语，但总体上应该可以理解。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:27:24.437

由于绝对没有评论，因此很难理解发生了什么。

在`liczbe_na_tekst`函数中，一开始你推`cx`,`dx`和`si`，但最后你弹出`ax`, `dx`, `cx`。之前`call liczbe_na_tekst` `si`似乎包含一个地址到你的缓冲区。最后`liczbe_na_tekst`它被传递给`ax`.

`dodawanie`标签后：

```
dodawanie:
 ...
lea si, [bufor + 2]
...
call liczbe_na_tekst

mov bl, '$'
mov bx,ax 
```

在这里，您首先写入`'$'`但`bl`立即`bx`使用`ax`（丢失`'$'`您之前仅存储在`bl`一条指令中）。`bx`现在包含`bufor + 2`（最初来自`lea si, [bufor + 2]`）的地址，然后代替`'$'`，`bl`现在包含 的地址的低 8 位`bufor + 2`。

```
mov [bx+liczba], bl 
```

然后，在这里您写入`[bufor+liczba+2]`地址的低 8 位`bufor + 2`，而不是`'$'`。`bx`此处包含 的地址`bufor + 2`。

我认为这不是你打算做的。当您修改`liczbe_na_tekst`or的代码时，您的代码可能会崩溃`tekst_na_liczbe`（当您将地址`bufor`和`liczba`、 和子函数相加`liczbe_na_tekst`并`tekst_na_liczbe`在内存中的数据之后）`，并且程序在 CPU 到达非法指令或进入无限循环时崩溃.

我认为您至少需要修复以下部分：

的`push`和`pop`指令`liczbe_na_tekst`：

```
liczbe_na_tekst:
    push ax
    push cx
    push dx
    push si
    ...
    pop si
    pop dx
    pop cx
    pop ax
    ret 
```

然后之后`call liczbe_na_tekst`：

```
mov bx,ax
mov [bx+liczba], byte '$' 
```

可能还需要一些其他修复。没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:00:18.300

这可能不是“答案”......无论如何都不是“答案”......但对我来说它看起来“错误”。

 `````
; WYBOR DZIALANIA
mov ah, 0
int 16h

cmp al, '1' 
je dodawanie 

cmp al, '5'
je wyjscie

dodawanie: 
```` 

`如果输入恰好是“5”，我们转到`wyjscie`（波兰语表示“退出”？）。任何其他输入——包括但不限于“1”——我们“失败”到`dodawanie`. 这是你的意图吗？``

# android - 通知果冻豆问题的打开活动

> ID：14324821
> 
> 赞同：0
> 
> 时间：2013-01-14T19:01:43.277
> 
> 标签：android, notifications, android-notifications, android-4.2-jelly-bean

简而言之：

**我需要**的是打开一个活动，开始倒计时，最小化，在计时器变为 0 时启动通知，并通过点击通知回到活动的先前状态而不创建新的

**我所拥有**的是：

```
Intent intent = new Intent(ctx, MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent pIntent = PendingIntent.getActivity(ctx, 0, intent, 0); 
```

它适用于 android <4.2，但是当在 Jelly Bean 上运行时，它会打开一个新的 Activity 实例。似乎果冻豆不识别任何标志 Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP

我怎样才能让它运行 4.2+ ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:39:44.353

只需将您的活动启动模式设置为

```
launchMode="singleTop" 
```

# android - 创建基于 OPUS 编解码器的多播服务器 (android/linux)

> ID：14324825
> 
> 赞同：5
> 
> 时间：2013-01-14T19:01:55.823
> 
> 标签：android, linux, audio-streaming, multicast, codec

我正在尝试为我正在处理的音频项目创建一个基于 OPUS 的多播服务器，它将在 O-Droid X 上运行 (http://www.hardkernel.com/renewal_2011/products/prdt_info.php?g_code =g133999328931) 用于这个项目。目前我不确定从哪里开始使用 OPUS 编解码器在 linux 或 android 中创建和制作多播服务器。这是我从头开始完成的第一个用于音频支持的多播服务器。如果有任何指针，他们将不胜感激。

此外，使其可通过网页访问并通过该网页可播放将是一种理想的情况，这样就不需要客户端上的特定应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:49:08.490

显然 Icecast 做了很多你正在寻找的东西。它是开源的 (GPL) 并支持使用 Ogg 容器格式的 Opus 流，您可以了解一些通用的软件架构理念。我的 SoundWire Android 应用程序（带有 Win/Linux 服务器）以低延迟进行 Opus 流式传输，但网络协议是自定义的......我不知道任何可以实现低延迟的既定开放协议（根据我的定义，1 秒延迟并不低潜伏）。

我的方法是构建一个传统的网络服务器，为每个客户端设置一个普通的单播 UDP 套接字。如果您想要低延迟，请避免使用 TCP，那么您将不得不以某种方式处理 UDP 的数据报性质。使用 Opus，每个客户端流式传输的数据量不会过多。我仅将多播用于发现（自动定位服务器）。

我建议您从一些开源服务器代码开始并根据您的需要对其进行调整，引入非常易于集成的 Opus，如果合适，请选择 Ogg 等容器格式（搜索 Ogg Opus）。如果您想要浏览器兼容性，那么您将或多或少地实现 Web 服务器的一部分（HTTP 等），并且将不得不放弃您的低延迟目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:27:10.830

作为一般说明，等待回复我的评论：您会失望地得知多播几乎没有用。除了您在现实世界中可能不会遇到的一些不寻常的配置之外，**多播在 Internet 上不起作用**，因为大多数路由器都没有配置为通过它。它实际上只能在本地网络上使用。

至于通过网页访问它，你几乎不走运。浏览器没有对多播的本地支持，对 OPUS 的支持也不广泛，而且大多数扩展浏览器功能的标准方法（例如，Javascript 和 Flash）也对您没有太大帮助。您*可能*可以在 Java 小程序中实现它，但是安装了有效 Java 的用户代理的数量正在迅速减少（尤其是最近的 Java 漏洞利用），并且生成的小程序最终可能需要提升权限才能使用多播。

# actionscript-3 - 麻烦将方程转换为 as3

> ID：14324830
> 
> 赞同：0
> 
> 时间：2013-01-14T19:02:30.417
> 
> 标签：actionscript-3, vector, linear-algebra

我正在阅读有关向量的在线教程，我正在寻找向量之间的角度[here](http://chortle.ccsu.edu/vectorlessons/vch10/vch10_6.html)

在这里，作者使用以下向量并通过替换方程得到角度 35.26 度。

```
Vector a is (4, 4, 4)T     Vector b is (4, 0, 4)T     Calculate: au · bu  =  cos θ 
```

我将其转换为 as3 并使用相同的向量来比较答案

代码：

```
var a:Vector3D = new Vector3D(4, 4, 4);
var b:Vector3D = new Vector3D(4, 0, 4);

//magnitute
var am:Number = Math.sqrt(a.x * a.x + a.y * a.y + a.z * a.z);
var bm:Number = Math.sqrt(b.x * b.x + b.y * b.y + b.z * b.z);
trace(am,bm);
//normalized
var aa:Vector3D = new Vector3D(a.x/am,a.y/am,a.z/am);
var bb:Vector3D = new Vector3D(b.x/bm,b.y/bm,a.z/bm);
//dot product
var costheta:Number = aa.x * bb.x + aa.y * bb.y + aa.z * bb.z;

trace(costheta);
//angle in degrees
trace( Math.acos(costheta) * 180 / Math.PI); 
```

输出：

正如教程中给出的那样，我正确地得到了弧度和度数

```
0.816496580927726
35.264389682754654 
```

现在，问题是，我使用[了另一个](http://chortle.ccsu.edu/vectorlessons/vch10/vch10_7.html)使用不同向量的示例，只是替换了我的 as3 程序中的变量

```
f  =  (4, 3, 2)T
g  =  (-1, 4, 4)T 
```

预期输出（来自网站）

```
0.51721
58.885 
```

我期待正确的输出，但它与网站上作者的答案不匹配。

```
0.3879049103011416
67.17580053566918 
```

与[另一个例子相同的情况。](http://chortle.ccsu.edu/vectorlessons/vch10/vch10_10.html)

```
p  =  ( -2, 4, 3)T
q  =  ( 3, 1, -4)T 
```

预期产出

```
-0.50985 
120.654° 
```

我的输出

```
0.2549249642552304
75.23086102240184 
```

错误在哪里？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:01:08.660

我认为这是你的问题：

```
var bb:Vector3D = new Vector3D(b.x/bm,b.y/bm,a.z/bm); 
```

你打错字了。它应该是

```
var bb:Vector3D = new Vector3D(b.x/bm,b.y/bm,b.z/bm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:34:57.047

如果您只想让事情在不弄脏数学的情况下工作 - 您可以使用 Vecotr3D 类的 angleBetween(Vecotr3D,Vecotr3D) 方法。下面是一个示例代码：

```
var cameraPos:Vector3D=new Vector3D(view.camera.x,view.camera.y,view.camera.z);
var angleInRadians:Number=Vector3D.angleBetween(mesh[i].forwardVector,cameraPos); 
```

# google-plus - 在 Google+ 上分享大图（也许是照片分享）？

> ID：14324834
> 
> 赞同：1
> 
> 时间：2013-01-14T19:02:44.560
> 
> 标签：google-plus

我目前正在开发一个 Google Hangouts 应用程序，除其他外，该应用程序的功能是在用户的 Google+ 页面上发布指向某些页面的链接。
因为共享内容主要是视觉的东西（准确地说是动态生成的图像）​​，所以我一直在研究让用户流中的帖子显示一张大的全角图片的方法，本质上是一种类似于[此处可见](https://plus.google.com/115900903196483234016/posts/LgCoqHAbe4v)的效果（免责声明：我不支持以任何方式链接的公司，这只是我发现的第一个外观示例）。

现在，我已经阅读了关于共享按钮和片段的 Google+ 文档，了解如何通过单击进行共享以及自定义链接附带的内容，但从视觉上看，附加的缩略图比我认为理想的要小一些对于任务（可见![在这个截图上](../Images/9821831d23281ba4114a58698fa0445e.png)）。
大图片显示的示例与照片共享功能相关联，所以我查看了 Google+ API，看看是否有办法自动化它，但正如[API 文档登录页面所述](https://developers.google.com/+/api/)，“Google+ API 当前提供对公共数据的只读访问。”。那时没有能力通过官方渠道追求目标。
下一步，GitHub。有些网站已经为其内部通信编写了包装器，因此创建了某种非官方的 API，所以我在那里碰碰运气。在各种库中，我发现一个不是官方 API 的包装器[google-plus-extension-jsapi](https://github.com/mohamedmansour/google-plus-extension-jsapi/)，而是为 Chrome 扩展而不是网页的上下文编写的，我无法让它工作，主要是因为使用 WebSQL 和跨域 XMLHTTPRequests。

因此，在没有任何进一步线索的情况下，我问社区 - 网页应用程序是否有任何方式为用户提供在其 Google+ 流上共享全角图片的能力，或者我是否仅限于标准共享缩略图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:43:15.020

我将确认，您无法使用 Google+ API 执行您尝试执行的操作，因为没有流式写入 API，并且您无法控制共享的呈现方式。

正如您已经确定的那样，您不能在没有用户交互（例如分享）的情况下将帖子（例如图片）直接写入用户的信息流。对于品牌页面，有[Pages API](https://developers.google.com/+/api/pages-signup)，但它目前不公开，并且仅限于 Pages 而不是 People/Profiles。

您可以生成指向外部图像的共享链接，然后如果用户单击它，图像就会出现在他们的流中。正如您所注意到的，图像将是一个小缩略图，而不是全出血照片，并且将呈现为共享 - 如果您希望图像填满整个流区域，则不可取。

# java - 未提供的源文件的 javac 编译器错误

> ID：14324836
> 
> 赞同：0
> 
> 时间：2013-01-14T19:02:59.897
> 
> 标签：java, jaybird

运行时出现此错误`javac -d classes myfiles...`。奇怪的是，我的任何文件夹中都没有 PooledPreparedStatementHandler.java，我的任何源文件中也没有 PooledPreparedStatementHandler 子字符串。我发现的唯一参考是 jaybird jar 中的 PooledPreparedStatementHandler.class（在我的类路径中使用和需要）。

```
./lib/jaybird-full-2.1.6.jar (all class files, no java files) 
```

这是错误：

```
org/firebirdsql/pool/PooledPreparedStatementHandler.java(org/firebirdsql/pool:PooledPreparedStatementHandler.java):32: package org.apache.xalan.lib.sql does not exist
import org.apache.xalan.lib.sql.XConnection; 
```

这是编译命令：

```
find src/main/java -type f -name "*.java"| xargs javac -target 1.5 -d war/WEB-INF/classes 
```

这个错误的根源是什么？我正在使用 oracle javac 1.6.0_26

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:04:12.710

看起来您的项目中有 Jaybird 源代码的修改副本，该副本与您的其余代码一起编译。原始的 Jaybird 2.1.6 版本[`org.firebirdsql.pool.PooledPreparedStatementHandler`](https://github.com/FirebirdSQL/jaybird/blob/Jaybird_2_1_6/src/pool/org/firebirdsql/pool/PooledPreparedStatementHandler.java)（GitHub 上 2.1.6 标签的链接）没有引用`org.apache.xalan.lib.sql.XConnection`.

它实际上看起来像是在尝试编译一个版本`PooledPreparedStatementHandler.java`，而不仅仅是使用 Jaybird jar 文件中的类。您可能想检查结果是否`find src/main/java -type f -name "*.java"`包含任何 Jaybird`.java`文件（即在 org.firebirdsql.* 包中）。

您还可以在构建时尝试在类路径中包含[Xalan-J](https://xml.apache.org/xalan-j/)。如果目标文件夹中包含一个副本`PooledPreparedStatementHandler`，则源文件会以某种方式包含在您的构建中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:30:15.643

从[源代码](http://www.jarvana.com/jarvana/view/org/firebirdsql/jdbc/jaybird/2.1.6/jaybird-2.1.6-sources.jar!/org/firebirdsql/pool/PooledPreparedStatementHandler.java?format=ok)来看，它看起来像是`PooledPreparedStatementHandler`在尝试导入`org.apache.xalan.lib.sql.XConnection`，所以你依赖它。而且由于您的构建类路径中没有它，因此您会收到错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T19:08:15.837

马克实际上在评论中给了我答案。如果您想要分数标记，请将其移至答案。在此之前，JayBird 将 Xalan 2.3.1 列为[依赖](http://mvnrepository.com/artifact/org.firebirdsql.jdbc/jaybird/2.1.6)项。我只需要将它包含在类路径中。

# asp.net-mvc - MVC 隐藏 IIS 中的虚拟目录

> ID：14324837
> 
> 赞同：0
> 
> 时间：2013-01-14T19:03:00.280
> 
> 标签：asp.net-mvc, razor

我将 IIS 服务器中的默认目录设置为 MVC 4 Razor 应用程序。我进行了设置，以便可以将动态操作传递到 url。例如。

www.mydomain.com/4
www.mydomain.com/5

基本上这两个启动帐户分别用于 id 为 4 和 5 的用户。

效果很好。

但是，我在同一台服务器上有一个名为 admin 的虚拟目录。我希望我可以导航到 www.mydomain.com/admin 但遗憾的是 MVC 拦截了它并认为我正在查找 amdin 的用户 ID。

有没有办法在路由中戳洞以允许虚拟目录？

提前致谢！

/埃里克

########## 添加我的路线

```
 //route for site root
        routes.MapRoute(
        "YourRouteName", // Route name
        "{flightNumber}/{action}", // URL with parameters
        new { controller = "Home", action = "Index", flightNumber = " " } // Parameter defaults
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:52:26.710

你可以限制你的路线：

```
routes.MapRoute(
    "YourRouteName",
    "{flightNumber}/{action}",
    new { controller = "Home", action = "Index" },
    new { flightNumber = @"\d+" }
); 
```

现在要求您必须始终拥有`flightNumber`一个或多个数字，后跟可选的控制器操作。

因此`/5`会触发控制器的`Index`动作`Home`并传递它的`flightNumber = 5`参数，并且`/5/admin`会触发控制器的`Admin`动作`Home`并传递它的`flightNumber = 5`参数。

现在，如果您的 id 不是整数而是字符串，事情会变得复杂，因为路由引擎将不再能够消除您的路由歧义。您可以`action`使用 RegEx 将部件限制为可能的操作列表，但发现这种方法有点限制，因为如果有人向 Home 控制器添加新操作，他还需要更新路由约束。

# asp.net - 使用 MySQL 的 ASP.NET 4.5 OAuth

> ID：14324840
> 
> 赞同：2
> 
> 时间：2013-01-14T19:03:13.650
> 
> 标签：asp.net, mysql, oauth, webforms, dotnetopenauth

我使用来自 ASP.NET 4.5 Web 窗体站点的默认模板创建了一个项目，并将我的 MembershipProvider 设置为 MySQLMembershipProvider，但 OAuth 使用 App_Data 文件夹中名为 DefaultConnection.mdf 的另一个存储。

如何为我的 OAuth 使用与默认会员资格相同的数据库？

我以前从未使用过 OAuth，那么是否有 MySQL 提供程序甚至 EF 提供程序，或者有没有办法使用已经为我的应用程序定义的默认 ADO.NET 提供程序？

ps：我所知道的关于 ASP.NET 的一切都来自“Pro ASP.NET 4 in C# 2010”，那里没有关于 OAuth 的任何东西 kkk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:40:24.420

找到了答案...

刚刚在我的数据库中创建了两个必需的表：UserOpenAuthAccounts 和 UsersOpenAuthData。

我的默认 ConnectionString 曾经被命名为 AppConnection，然后我将其重命名为 DefaultConnection，然后一切正常。

很高兴知道我们可以在哪里更改 OpenAuth ConnectionString 名称而不是默认的 ConnectionString 名称。

# c# - 在运行时更改表达式委托主体？

> ID：14324842
> 
> 赞同：2
> 
> 时间：2013-01-14T19:03:25.467
> 
> 标签：c#, .net, .net-4.0, expression-trees

我有这个代码，它产生一个委托，将 myNumber 乘以 5

```
ParameterExpression numParam = Expression.Parameter(typeof(int), "num");
ConstantExpression five = Expression.Constant(5, typeof(int));
BinaryExpression numMultiply = Expression.Multiply(numParam,five); 
```

让我们创建委托：

```
Expression<Func<int, int>> lambda1 =
    Expression.Lambda<Func<int, int>>(
        numMultiply,
        new ParameterExpression[] { numParam });
Console.Write(lambda1.Compile()(4)); 
```

现在假设我想将此表达式树更改为，`Add`而不是`Multiply`
这里是新行：

```
BinaryExpression numAdd = Expression.Add(numParam,five); 
```

但是我怎样才能改变 lambda1 以便它现在将使用`numAdd`而不是`multiply`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:06:40.243

您只需构建一个新的，然后编译它。

```
Expression<Func<int, int>> lambda1 =
     Expression.Lambda<Func<int, int>>(
         numAdd,
         new ParameterExpression[] { numParam }); 
```

从[MSDN 页面](http://msdn.microsoft.com/en-us/library/bb397951.aspx)：

> 表达式树应该是不可变的。这意味着如果要修改表达式树，则必须通过复制现有表达式树并替换其中的节点来构建新的表达式树。您可以使用表达式树访问者来遍历现有的表达式树。

“应该是”这个短语有点奇怪，但是当您查看 API 时，您会看到所有相关属性（Body、Left、Right）都是只读的。

# ios - NSDateFormatter 崩溃

> ID：14324849
> 
> 赞同：0
> 
> 时间：2013-01-14T19:04:01.217
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我正在尝试使用 NSDateFormatter 格式化日期，但我的应用程序因 EXC_BAD_ACCESS 而崩溃。

这是代码：

```
DateInputTableViewCell *cell0 = (DateInputTableViewCell *)[paramTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
DateInputTableViewCell *cell1 = (DateInputTableViewCell *)[paramTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:1 inSection:0]];

NSString *fromDate = [[Helpers defaultFormatter] stringFromDate:cell0.dateValue];
NSString *toDate = [[Helpers defaultFormatter] stringFromDate:cell1.dateValue]; 
```

上面的代码我从我拥有的两个自定义 UITableViewCell 中获取日期。这些值不为空（我已经测试过）。但是，当我尝试使用 Helpers 类中的 defaultFormatter 方法时，应用程序崩溃了。下面是代码：

```
+ (NSDateFormatter *)defaultFormatter{
    defaultFormatter = [[NSDateFormatter alloc] init];
    NSLocale* locale = [[NSLocale alloc] initWithLocaleIdentifier:@"pt_BR"];
    [defaultFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"America/Sao_Paulo"]];
    [defaultFormatter setDateFormat:@"yyyy'-'MM'-'dd' 'HH':'mm':'ss"];
    [defaultFormatter setLocale:locale];
    [locale release];
    return defaultFormatter;
} 
```

自定义 UITableViewCell 的 NSDateFormatter 定义如下：

```
self.dateFormatter = [[NSDateFormatter alloc] init];
self.dateFormatter.timeStyle = NSDateFormatterNoStyle;
self.dateFormatter.dateStyle = NSDateFormatterMediumStyle; 
```

我在这里看到了一些类似的问题，但无法解决这个问题！

提前致谢！

**编辑**

![在此处输入图像描述](../Images/85854a7a8a4f07319bf36265cad31829.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:07:57.153

您的`defaultFormatter`方法没有返回任何内容，因此您得到一个垃圾值，您尝试将`stringFromDate:`导致崩溃的消息发送到该值。编译器应该警告你这个，所以总是修复你的编译器警告！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:08:53.900

正如我在评论中提到的，您的方法`return`中缺少声明。`defaultFormatter`您应该`defaultFormatter`在设置值后返回。

应该是这样的

```
+ (NSDateFormatter *)defaultFormatter{
    defaultFormatter = [[NSDateFormatter alloc] init];
    NSLocale* locale = [[NSLocale alloc] initWithLocaleIdentifier:@"pt_BR"];
    [defaultFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"America/Sao_Paulo"]];
    [defaultFormatter setDateFormat:@"yyyy'-'MM'-'dd' 'HH':'mm':'ss"];
    [defaultFormatter setLocale:locale];
    [locale release];
    return defaultFormatter;
} 
```

# laravel - 如何更改 Handlebars.js 的默认分隔符？

> ID：14324850
> 
> 赞同：17
> 
> 时间：2013-01-14T19:04:04.307
> 
> 标签：laravel, handlebars.js

我需要使用handlebars.js，我还使用来自Laravel（PHP 框架）的Blade 模板引擎。标签 {{}} 与完全相同的刀片占位符冲突。

如何将那些 {{var}} 更改为 <% var %> 之类的东西？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-12-26T17:12:08.810

尽管您可能无法配置 Handlebars 的表达式分隔符，但这并不是解决 Handlebars 和 Blade 之间冲突的唯一方法。Blade 提供的语法允许您通过指定应该传递给 Handlebars 的内容来避免冲突。（这是合适的，因为 Blade 一开始就产生了冲突，而且这是必要的，因为 Blade 在 Handlebars 看到它之前就处理了模板。）只需在您希望 Blade 忽略并按*原样*传递给 Handlebars`@`的花括号之前添加. [这是一个更大示例](https://medium.com/on-coding/eaa550829538)的非常短的片段：

 *```
...
    <link
        rel="stylesheet"
        type="text/css"
        href="{{ asset("css/bootstrap.theme.3.0.0.css") }}"
    />
    <title>Laravel 4 Chat</title>
</head>
<body>
    <script type="text/x-handlebars">
        @{{outlet}}
    </script>
... 
```

`{{outlet}}`将传递给 Handlebars，但`{{ asset("css/bootstrap.theme.3.0.0.css") }}`将由 Blade 处理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-14T13:41:13.553

I created [handlebars-delimiters](https://github.com/jonschlinkert/handlebars-delimiters) on GitHub / npm to make it easy to use custom delims with Handlebars.

```
var Handlebars = require('handlebars');
var useDelims = require('handlebars-delimiters');

var a = Handlebars.compile('{{ name }}<%= name %>')({name: 'Jon'});
console.log(a);
//=> 'Jon<%= name %>'

// Pass your instance of Handlebars and define custom delimiters
useDelims(Handlebars, ['<%=', '%>']);
var b = Handlebars.compile('{{ name }}<%= name %>')({name: 'Jon'});
console.log(b);
//=> '{{ name }}Jon' 
```

The idea for the compile function came from [https://stackoverflow.com/a/19181804/1267639](https://stackoverflow.com/a/19181804/1267639)

Suggestions for improvement or pull requests are welcome!

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-04T12:58:33.963

我做了这个功能。希望它对某人有用..

```
/**
* change the delimiter tags of Handlebars
* @author Francesco Delacqua
* @param string start a single character for the starting delimiter tag
* @param string end a single character for the ending delimiter tag
*/
Handlebars.setDelimiter = function(start,end){
    //save a reference to the original compile function
    if(!Handlebars.original_compile) Handlebars.original_compile = Handlebars.compile;

    Handlebars.compile = function(source){
        var s = "\\"+start,
            e = "\\"+end,
            RE = new RegExp('('+s+'{2,3})(.*?)('+e+'{2,3})','ig');

            replacedSource = source.replace(RE,function(match, startTags, text, endTags, offset, string){
                var startRE = new RegExp(s,'ig'), endRE = new RegExp(e,'ig');

                startTags = startTags.replace(startRE,'\{');
                endTags = endTags.replace(endRE,'\}');

                return startTags+text+endTags;
            });

        return Handlebars.original_compile(replacedSource);
    };
};

//EXAMPLE to change the delimiters to [:
Handlebars.setDelimiter('[',']'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-31T12:26:24.990

`.blade`除了更改分隔符之外，您还可以在没有扩展名的情况下使用车把模板创建文件。只需将这些文件包含在您的刀片模板中即可。例如

刀片模板文件 - template.blade.php

```
@extends('master.template')

@section('content')

    @include('handlebars-templates/some-template-name') 

@stop 
```

some-template-name 文件 - some-template-name.php

```
<script type="text/x-handlebars" data-template-name="content">
<div>
 <label>Name:</label>
 {{input type="text" value=name placeholder="Enter your name"}}
</div>
<div class="text">
<h1>My name is {{name}} and I want to learn Ember!</h1>
</div>
</script> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-14T19:06:45.150

这对于“标准”车把是不可能的。[https://github.com/wycats/handlebars.js/issues/227](https://github.com/wycats/handlebars.js/issues/227)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-07T11:24:39.910

“如果你需要显示一个用花括号括起来的字符串，你可以通过在你的文本前加上 @ 符号来逃避 Blade 行为”

```
@{{varname}} 
```

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-19T15:49:16.013

我使用并更新了 user1875109 的源代码，现在它可以与 Handlebars v3.0.3 一起使用：

```
/**
* change the delimiter tags of Handlebars
* @author Francesco Delacqua
* @param string start a single character for the starting delimiter tag
* @param string end a single character for the ending delimiter tag
*/
Handlebars.setDelimiter = function(start,end){
    //save a reference to the original compile function
    if(!Handlebars.original_compile) Handlebars.original_compile = Handlebars.compile;

    Handlebars.compile = function(source){
        var s = "\\"+start,
            e = "\\"+end,
            RE = new RegExp('('+s+')(.*?)('+e+')','ig');

            replacedSource = source.replace(RE,function(match, startTags, text, endTags, offset, string){
                var startRE = new RegExp(s,'ig'), endRE = new RegExp(e,'ig');

                startTags = startTags.replace(startRE,'\{');
                endTags = endTags.replace(endRE,'\}');

                return startTags+text+endTags;
            });

        return Handlebars.original_compile(replacedSource);
    };
};

//EXAMPLE to change the delimiters to [:
Handlebars.setDelimiter('[',']'); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-30T08:14:16.747

有一个选项可以告诉模板引擎不解析代码的某些部分并将其视为纯文本。

找到以下方法来做到这一点，希望它对某人有所帮助。

在刀片模板引擎 (laravel) 中，您可以使用 @verbatim 指令。这样您就不必将@ 添加到每个变量。例子 ：

```
@verbatim
    <div class="container">
        Hello, {{ name }}.
    </div>
@endverbatim 
```

同样对于树枝模板引擎（symfony），您可以通过使用阻止整个代码

```
{% verbatim %}
    <div>
        My name is {{name}}. I am a {{occupation}}.
    </div>
{% endverbatim %} 
```*

# iphone - 使用 UIAppearance 时 UIBarButtonItem 的奇怪行为

> ID：14324859
> 
> 赞同：2
> 
> 时间：2013-01-14T19:04:20.950
> 
> 标签：iphone, ios, xcode, uinavigationbar, uibarbuttonitem

我正在使用 UIAppearance 自定义导航栏、标签栏和 uibarbuttonitem 等元素。除了 UIBarButtonItem 元素的一个非常奇怪的行为之外，它工作得很好。在导航控制器层次结构的顶层，一切看起来都不错，但是如果我按下下一个视图控制器，UIBarButtonItem 元素会向下移动一点，但同时，后退按钮会保持在正确的位置。我附上了两张图片来说明我的问题。

**1) 导航控制器层次结构中的第一个视图控制器**

![在此处输入图像描述](../Images/c315f37302cff4b59893f2b98fd2b7b2.png)

**2) 导航控制器层次结构中的第二个视图控制器**

![在此处输入图像描述](../Images/bafa267dd31225919753f669cb9b1e56.png)

**编辑：代码**

```
 //Change navigation bar appearance
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"GPNavigationBarBackground.png"] forBarMetrics:UIBarMetricsDefault];
    [[UINavigationBar appearance] setShadowImage:[[UIImage alloc] init]];
    [[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"GPNavigationBarShadow.png"]];

    [[UINavigationBar appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor whiteColor], UITextAttributeTextColor,
      [UIFont boldSystemFontOfSize:17], UITextAttributeFont,nil]];
    [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:2.f forBarMetrics:UIBarMetricsDefault];

    UIImage *buttonBackground = [[UIImage imageNamed:@"GPNavigationBarButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];
    UIImage *buttonPressedBackground = [[UIImage imageNamed:@"GPNavigationBarButtonPressed.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];

    UIImage *backButtonBackground = [[UIImage imageNamed:@"GPNavigationBarBackButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 10)];
    UIImage *backButtonPressedBackground = [[UIImage imageNamed:@"GPNavigationBarBackButtonPressed.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 10)];

    [[UIBarButtonItem appearance] setBackgroundImage:buttonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:buttonPressedBackground forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonPressedBackground forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];

    [[UIBarButtonItem appearance] setBackButtonBackgroundVerticalPositionAdjustment:1.f forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundVerticalPositionAdjustment:1.f forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setTitlePositionAdjustment:UIOffsetMake(0, 1.f) forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:14:16.357

好吧，在思考了这个问题之后，我终于解决了。上面的代码是绝对正确的。唯一的问题是 UIBarButtonItem 背景图像的高度。UIAppearance 代理允许您设置所有图形，但不允许您更改 UIBarButtonItem 的高度。

> **因此，在自定义 UIBarButtonItem 时，请始终记住 UIBarButtonItem 不能高于 30pt。这意味着自定义艺术品不应超过此尺寸。**

您可以设置高于 30pt 的背景图像，但您会遇到与上述相同的问题。

# javascript - jQuery滑块根据滑块值更改img

> ID：14324864
> 
> 赞同：1
> 
> 时间：2013-01-14T19:04:42.217
> 
> 标签：javascript, jquery, jquery-ui

我试图让我的滑块值来识别它的值并更改图像。这是对 jquery 的默认功能的赞许，不赞成的概念。因此，如果用户向左滑动（大拇指向下），请更改 img css(opacity) 以显示哪个被选中。

我认为这就足够了，但它实际上完全移除了滑块。

```
if ui.value >= 51{
  $('img.up').css('opacity','.8');
  alert('cool');
}
if ui.value <= 49{
    $('img.down').css('opacity','.8');
    alert('too bad');
} 
```

**我在[这里做了一个小提琴](http://jsfiddle.net/VjyT7/8/)。如何使滑块值生效？**

我知道我可能应该问/提出另一个问题，为什么滑块不会生成多个。但如果你有什么建议，我也会采纳。

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:12:16.330

您忘记在`if`语句中添加括号。

```
$('img.up, img.down').css('opacity','.4');
if (ui.value >= 51) {
  $('img.up').css('opacity','.8');
}
if (ui.value <= 49) {
  $('img.down').css('opacity','.8');
} 
```

[***演示***](http://jsfiddle.net/psybJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:05.193

我已经更新了你的小提琴。如果我没有错，这就是您想要的最终结果。试试这个代码并检查小提琴。

```
$("#slider").slider({
 value:50,
 min: 0,
 max: 100,
 step: 50,
 slide: function( event, ui ) {
 if (ui.value >= 51){
     $('img.up').css('opacity','.8');
     $('img.down').css('opacity','.4');  
 }
 if (ui.value <= 49){
    $('img.down').css('opacity','.8');
    $('img.up').css('opacity','.4');
 }
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:18:41.030

您的 if 语句缺少括号

```
$("#slider").slider({
      value:50,
      min: 0,
      max: 100,
      step: 50,
      slide: function( event, ui ) {
        if (ui.value >= 51){
          $('img.up').css('opacity','.8');
          alert('cool');
        }
        if (ui.value <= 49){
            $('img.down').css('opacity','.8');
            alert('too bad');
        }
      }
    }); 
```

# jquery - JavaScript 中的 SVG 无法正确呈现

> ID：14324867
> 
> 赞同：2
> 
> 时间：2013-01-14T19:05:03.440
> 
> 标签：jquery, svg, jquery-animate, svg-animate

我正在将点添加到与世界各地的推文相对应的地图上。添加推文时，它将由一个红点表示。

在接下来的 30 秒内（与 Tweet 轮询延迟相同的时间间隔），这些点会慢慢变黑，表明它们已经过时了。

下面的代码就是这样做的，但是在第一次轮询之后，随后的轮询会将地图上所有新旧点的颜色更改为红色。此外，渐变动画仅在映射第一组点时发生。

任何想法为什么？

[**这是正在运行的地图。在现代浏览器中查看。**](http://jonathonmoore.com/mkt/index2.php)

```
function addCircle(coordinates, tipText, r) {
    tweetNumber++;

    // Max number of dots on a map at any given time
    if (tweetNumber == 200) {
        tweetNumber = 0;
    }

    // Removes expired circles 
    $('#' + tweetNumber).remove();

    var rad;
    //determine if radius size needs to be bumped
    if (arguments.length == 3) {
        rad = r;
    } else {
        rad = 3;
    }

    // Add radar-style ping effect
    map.append('svg:circle')
        .style("stroke", "rgba(255,49,49,.7)")
        .style("fill", "rgba(0,0,0,0)")
        .attr("cx", coordinates[0])
        .attr("cy", coordinates[1])
        .attr("r", 3)
        .transition()
        .delay(0)
        .duration(2000)
        .attr("r", 30)
        .style("stroke", "rgba(255,49,49,0.0001)").transition().duration(2000).remove();

    // Add circles representing tweets
    map.append('svg:circle').attr("class", "tweetCircles")
        .attr("id", tweetNumber)
        .style("fill", "rgba(240,49,49,1)")
        .attr("cx", coordinates[0])
        .attr("cy", coordinates[1])
        .attr("r", rad)
            .append("svg:animate") // Fade effect (only works 1st time)
                .attr("attributeName", "fill")
                .attr("from", "rgba(255,0,0,1)")
                .attr("to", "rgba(0,0,0,1)")
                .attr("dur", "30s");

    // Adds a tooltip to each dot to read the tweets
    addTipsy(tipText, tweetNumber);
} 
```

# ios - UILabel 集文本在动画期间绘制在较旧的文本上

> ID：14324868
> 
> 赞同：1
> 
> 时间：2013-01-14T19:05:05.417
> 
> 标签：ios, objective-c, multithreading

如果您能帮助我，我无法理解出了什么问题，那就太好了！

我有一个像字幕一样的`UIlabel`动画`UIView AnimationWithDuration`......（我需要让这段代码工作，我不能在其他地方分叉一些东西，请不要提供字幕代表。）

在这个动画中我设置了一个新的文本，不幸**的是前一个不是替换而是绘制了**。我最终得到了两个相互重叠的文本。如果我再次尝试设置文本，它可能会被清理，或者它可能会绘制第三条线。

我尝试了以下代码，认为这可能是线程问题，但它没有做任何事情

```
@synchronized (self.songLabel.text) {
    self.songLabel.text = nil;
    self.songLabel.text = [trackItems objectForKey:@"TrackName"];
} 
```

我已将我的`songLabel`getter 和 setter 设置为原子的，它也无济于事。

我不知道该尝试什么...谢谢您的帮助！

编辑：这是处理动画的代码

```
- (void)animateSongLabel
{

    if (!self.player.rate) {

        [UIView animateWithDuration:.5 animations:^{

            self.songLabel.left = 25.f;
        }];

        return;
    }

    if (!self.canAnimateLabel) {
        return;
    }
    self.animateLabel = NO;
    [UIView animateWithDuration:.25 delay:0\. options:UIViewAnimationOptionCurveLinear animations:^{

         self.songLabel.left -= 15.f;

    } completion:^(BOOL finished) {

        self.animateLabel = YES;

        if (self.songLabel.right < -10.f) {

            self.songLabel.left = 320.f;
        }
        [self animateSongLabel];
    }];
} 
```

# c# - 从代码隐藏中获取 edititemtemplate 的值

> ID：14324869
> 
> 赞同：4
> 
> 时间：2013-01-14T19:05:13.917
> 
> 标签：c#, label, detailsview, edititemtemplate

我有一个详细信息视图，我从会员资料中获取了一些数据并将其显示在详细信息视图中......这很好用：

```
 <ItemTemplate>
                <asp:label ID="FirstName" runat="server" />
 </ItemTemplate> 
```

但是当我单击编辑按钮时，该字段上没有显示任何内容。这就是我在编辑模板上所做的：

我这样称呼 ItemUpdating：

```
 protected void DetailsView1_ItemUpdating(Object sender, DetailsViewUpdateEventArgs e)
    {
        //I get my memberprofle here
        MemberProfile memberp = MemberProfile.GetuserProfile(data);
        MembershipUser myuser = Membership.GetUser()

        Label labelfName = DetailsView1.FindControl("FirstName") as Label;
        labelfName.Text = memberp.fName;
    } 
```

我应该改用 Itemupdated 吗？或者当单击编辑按钮时我应该调用另一种方法来填充编辑时的名字字段？此外，我在编辑模式下将其保留为“标签”（通常是文本框）的原因是该字段必须是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:17:15.353

当您进入编辑模式时，不会触发事件 ItemUpdating。您必须使用 DataBound 事件来正确设置所需的文本值。

如有必要，您可以询问 DetailsView 的 CurrentMode 属性以了解您是在编辑还是显示。

结果如下所示：

```
protected void DetailsView1_DataBound(object sender, EventArgs e)
{
    Label l = DetailsView1.FindControl("FirstName") as Label;
    if (DetailsView1.CurrentMode == DetailsViewMode.Edit)
    {
        //obtained from your sample
        MemberProfile memberp = MemberProfile.GetuserProfile(data);
        MembershipUser myuser = Membership.GetUser()

        l.Text = memberp.fName;
    }
    else
    { 
        l.Text = "Another text or nothing";
    }
 } 
```

请务必在 Detailsview1 控件中定义 DataBound 事件。

**备注**：可能会受到数据绑定模式的影响。如果是这样，请告诉我并举个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:08:19.437

将 RowUpdating 和 RowEditing 事件添加到您的 gridview。

[http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html](http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html)

# jquery - 理想表单表单上的网页加载和可能的错误

> ID：14324871
> 
> 赞同：0
> 
> 时间：2013-01-14T19:05:15.570
> 
> 标签：jquery, forms, webforms

我有一个由 Idealforms 创建的 jQuery 表单。

这些表单由 jQuery 验证，提醒用户注意错误和更多信息。但是，只要页面加载了理想的集成表单，页面就会加载到表单上，并在第一个字段（即“必填字段”）显示表单错误消息。

我从未遇到过这样的问题，并且希望表单在用户单击该字段并在顶部加载网页之前不显示错误。

我有很多页面都有这个错误，一个例子在这里[https://dl.dropbox.com/u/104598901/Website/business.html](https://dl.dropbox.com/u/104598901/Website/business.html)

我期待着解决这个问题，并欢迎任何意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:50:04.747

我是理想形式的开发者。默认情况下，除非您使用该`focusFirst`方法，否则不会发生这种情况。删除 HTML 中的第 233 行。

```
$myform.focusFirst(); // delete this line 
```

那会做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:45:37.797

我很确定这是您使用的插件所固有的。不幸的是，代码被最小化了，所以我不能在代码本身中给你任何指针。

您可以使用以下方法覆盖它：

```
$("input").focus(function(){
  if($(this).text().length < 1){
     event.stopPropagation();
   }
   else{

     }
 }) 
```

如果该字段中没有任何内容，这*应该*会阻止它出现，但我不能确切地说，因为我不知道该插件并且无权访问它的内部。

# c++ - 蛮力搜索算法与 C++ 中的线程的并行化

> ID：14324877
> 
> 赞同：4
> 
> 时间：2013-01-14T19:05:39.397
> 
> 标签：c++, multithreading, algorithm, search

我一直在使用 C++ 开发一个蛮力程序，该程序暂时只处理字母数字值（仅限小写）和未知长度的密码。

我正在使用四核计算机，所以我将可能性列表分为四个部分，每个部分都有一个线程。

这些部分是：

```
000...0 to 8zz...z
900...0 to hzz...z
i00...0 to qzz...z
r00...0 to zzz...z 
```

我可以更好地利用线程来提高速度吗？由于 4 个线程中只有 1 个会达到密码，因此感觉 3/4 的程序是在浪费时间。

似乎如果我可以让线程以某种方式一起工作，它会更有效率，但是我似乎想不出一种方法来做到这一点。

非常感谢任何建议，我对线程很陌生。

**编辑：我应该澄清一下，因为它是一个用于学术目的的相当简单的程序，我实际上只破解了一个密码，并且一旦找到它就会发出信号以杀死剩余的 3 个线程。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:17:14.897

这里有一些想法：

*   您可以使用原子布尔变量在已找到密码的线程之间进行通信。每个线程只需要定期检查（例如，在尝试下一个密码之前）是否设置了标志。
*   除了静态地将工作分成四个相等的部分，您还可以使用一个中央密码列表来尝试让每个线程在需要时获取项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:11:02.140

对于 4 个线程，这是尽可能高效的。不会浪费任何运行时间，因为您必须使用蛮力检查所有可能性......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:43:35.763

您可以创建一个全局`bool`变量，`true`如果某些线程找到正确的密码（如果找到密码，则将其设置为 true），并检查它是否设置为 true，例如，在每个线程中尝试每 1000 个密码后. 当其他线程已经找到正确的密码时，这将减少线程中无效的迭代。

*在开始时，您必须将此全局变量设置为`false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T16:49:07.630

您可以设置一个初始化为零的信号量和一个等待该信号量的杀手线程。当一个线程找到答案时，让它提升信号量，释放杀手线程，以便它可以将其他线程发送到线程天堂。

这与检查全局标志相同，仅在内核中检查全局线程，而不是在每次迭代时检查，而仅在上下文切换时检查。

# javascript - 模板中的下划线条件

> ID：14324879
> 
> 赞同：1
> 
> 时间：2013-01-14T19:05:44.030
> 
> 标签：javascript, jquery, backbone.js, underscore.js

这是我的模板：

```
var tmpl = _.template('<<%= elementTag %> <% if (_.has(elementClass)) { %> class="<%= elementClass %>" <% } %> <%= elementExtra %>><%= template(elementContent) %></<%= elementTag %>>'); 
```

我将使用此模板渲染的一些对象没有`elementClass`属性集。我尝试使用`_.has`，以便模板仅尝试打印`elementClass`已定义但我没有成功的对象的属性。控制台错误仅说明`elementClass`未设置，可能是因为条件语句未能按我的预期工作。

我知道这是一个简单的问题，但我似乎无法解决它 - 如何在这样的语句中使用条件来检测没有设置某些属性的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:02:40.177

一般来说，你不能用[`_.isDefined`](http://underscorejs.org/#isUndefined)这个。考虑这个模板：

```
<script id="t" type="text/x-underscore-template">
    <% if(!_.isUndefined(elementClass)) { %>
        <%= elementClass %>
    <% } else { %>
        No such thing.
    <% } %>
</script> 
```

这个代码：

```
var t = _.template($('#t').html());
console.log(t({ })); 
```

调用`t`应该给你一个 ReferenceError 因为编译的模板函数没有`elementClass`作用域。因此，如果您的对象根本没有`elementClass`属性，那么当您尝试获取模板时模板函数将失败。

演示：http: [//jsfiddle.net/ambiguous/H22D2/](http://jsfiddle.net/ambiguous/H22D2/)

问题是该`_.isUndefined`函数只能检查表达式的*值*，它无法检查[`with`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)您传递给它的变量（或由于模板的内部使用而导致的属性）是否已声明。

如果对象将具有`elementClass`属性但它可能具有未定义的值，那么您可以使用`_.isDefined`：

```
t({ elementClass: undefined }) 
```

会好的。

演示：http: [//jsfiddle.net/ambiguous/LUakg/](http://jsfiddle.net/ambiguous/LUakg/)

如果对象可能有也可能没有`elementClass`属性，那么你会被困住使用[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)as`typeof`不会尝试评估其操作数。像这样的东西：

```
<script id="t" type="text/x-underscore-template">
    <% if(typeof elementClass !== 'undefined') { %>
        <%= elementClass %>
    <% } else { %>
        No such thing.
    <% } %>
</script> 
```

在所有三种感兴趣的情况下都可以正常工作：

```
var t = _.template($('#t').html());
console.log(t({ }));
console.log(t({ elementClass: undefined }));
console.log(t({ elementClass: 'pancakes' })); 
```

演示：http: [//jsfiddle.net/ambiguous/H5xC7/](http://jsfiddle.net/ambiguous/H5xC7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:24:11.573

您可以检查是否`elementClass`不是`undefined`。（使用`_.isUndefined`，正如我之前认为的那样，不会。）

```
var tmpl = _.template('<<%= elementTag %> <% if ( typeof elementClass !== "undefined" ) ) { print("class=\'elementClass\'") } %> <%= elementExtra %>><%= template(elementContent) %></<%= elementTag %>>'); 
```

# spring - 在 Spring 中，如何将整数列表绑定到 RequestParam？

> ID：14324881
> 
> 赞同：9
> 
> 时间：2013-01-14T19:05:48.100
> 
> 标签：spring, http-request-parameters

我有来自客户端的参数正在发送，例如

```
ids[] = 11
ids[] = 12
ids[] = 21 
```

在服务器端，我有一个带有以下方法的 Spring 控制器：

```
@RequestMapping("/delete.x")
public @ResponseBody Map<String, Object> delete(HttpServletRequest request, @RequestParam("ids[]") List<Integer> ids) { 
```

当我尝试迭代 id 集合时，如下所示：

```
for (Integer id : ids) { 
```

我得到一个例外如下：

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer 
```

Spring 是否将 id 的类型更改为 List<String>？不管我怎么想，我怎样才能避免这个问题并将 id 作为整数存储在 List 中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T19:23:50.483

您面临的问题是 java 具有类型擦除功能。所以在运行时 a`List<Integer>`等同于 a`List<String>`并且 spring 无法知道你想要 Integers 到你的列表中。

解决方法可能是使用整数数组而不是整数列表。

```
@RequestMapping("/delete.x")
public @ResponseBody Map<String, Object> delete(HttpServletRequest request,
  @RequestParam("ids[]") Integer[] ids) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-22T04:43:12.167

对于字符串，我已经这样做了，并且运行正常

```
<form action="addArticals">
    <input name="artical[]" type="text"> </input>
    <input name="artical[]" type="text"> </input>
    <input name="artical[]" type="text"> </input>
    <input name="artical[]" type="text"> </input>
    .
    .
    .
    .
    <input name="artical[]" type="text"> </input>
</form> 
```

在控制器中它会是这样的

```
@RequestMapping("/addArticals")
public String articalStore(@RequestParam("artical[]")List<String> articals, Modal modal)
{
} 
```

# javascript - 如何使用客户端代码阻止一个国家 /地区访问网站

> ID：14324882
> 
> 赞同：2
> 
> 时间：2013-01-14T19:05:48.417
> 
> 标签：javascript, jquery, html, geolocation

我已经用谷歌搜索了很长时间来达到我的目标，但徒劳无功。

我有一个博客，我为其购买了一个自定义域。

不幸的是，据我所知，我认为博主不支持 php 或`.htaccess`类似的东西。

我认为它只支持基本的东西，如`html`, `css`, `javascript`, `jquery`, `ajax`.....我猜服务器端没有什么是可能的（即：php）。

我想阻止特定国家/地区访问我的网站。有没有办法使用简单的客户端代码来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:18:51.067

您可以使用访问者 IP 地址并对其进行地理位置搜索。

请参阅此问题以[仅使用 Javascript 获取客户端 IP？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)然后您可以将其传递给[freegeoip](http://freegeoip.net/static/index.html)之类的服务以获取信息。

从他们的主页：

```
http://freegeoip.net/json/google.com?callback=show 
```

结果是：

```
show({"city": "Mountain View", "region_code": "CA", "region_name": "California", "metrocode": "807", "zipcode": "94043", "longitude": "-122.057", "country_name": "United States", "country_code": "US", "ip": "209.85.145.147", "latitude": "37.4192"}); 
```

当然也可以换成`google.com`访问者的IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:19.163

有一些第三方 API 可以帮助您检测国家/地区。您可以使用以下代码来检测国家

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  alert('Latitude: ' + data.latitude +
        '\n Longitude: ' + data.longitude +
        '\n Country: ' + data.address.country);
}); 
```

但确实人们可以禁用 javascript 以进入您的网站。您应该从服务器阻止它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T19:10:22.937

使用线程找到[最简单的方法来检测 PHP 中的客户端区域设置](https://stackoverflow.com/questions/297542/simplest-way-to-detect-client-locale-in-php)来检测国家。然后停止处理页面，根据国家/地区重定向或阻止等。或基于您的服务器语言的类似内容。

# powershell-2.0 - 读取名称每天更改的文件

> ID：14324886
> 
> 赞同：0
> 
> 时间：2013-01-14T19:06:31.917
> 
> 标签：powershell-2.0

需要有关此 PS 脚本的一部分的帮助。我基本上需要阅读文件的内容（查找导入的单词）。每天都会生成新文件，格式为 power_XX.log XX 代表月份中的某天。不知道我在忽略什么，但如果文件存在并且找到“导入”一词，它应该生成一个 true。提前致谢

```
 ************************
#today is a working day
    $today = (get-date).day
$fileofday = Get-ChildItem -Path \\noctest1\c$\temp\*.log ('power_' + $today + '.log')
if ($fileofday -and (select-string -Path '\\noctest1\c$\temp\*.log ($fileofday)'-Pattern 'imported' -Quiet))
******************************************* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:48:45.803

```
$today = (get-date).day;
$filePath = join-path -path "\\noctest1\c`$\temp" -childpath $("power_$today.log");
$importedFound = $false;
$todayFileExists = test-path $filePath
if ($todayFileExists) {
    $importedFound = select-string $filePath -pattern "imported" -quiet;
} 
```

`$importedFound`如果找到文件并包含“导入”，则现在为真，否则为假。

# android - 原始查询返回错误

> ID：14324887
> 
> 赞同：0
> 
> 时间：2013-01-14T19:06:34.070
> 
> 标签：android, sqlite, fts3

这不应该很好吗？

```
Cursor cursor = ourDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE " +     KEY_NAME + " = \'chaman\'",, null); 
```

我不知道，但是当我尝试调用时出现错误

```
cursor.getString(1); 
```

它说 CursorIndexOutofBoundsException

我已经使用创建了我的表

```
db.execSQL("CREATE VIRTUAL TABLE " + DATABASE_TABLE
                + " USING fts3 (" + KEY_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME
                + " TEXT NOT NULL, " + KEY_ADDRESS
                + " TEXT NOT NULL, " + KEY_CONTACT + " TEXT NOT     NULL, "
                + KEY_BALANCE + " DOUBLE);"); 
```

& 我确定 chaman 存在于我的表中，因为我可以在我的数据库中查看它。

怎么了？请帮帮我。我被困在这里最后 1 小时。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:09:04.227

CursorIndexOutOfBoundException 意味着您要么忘记打电话，`moveToFirst()` *要么*确实打电话`moveToFirst()`但您没有检查其结果（即光标为空）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:09:47.743

你需要打电话给[`moveToFirst`](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)

```
if(cursor.moveToFirst()) {  // returns false if no results
  // do stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:11:58.680

使用检查游标计数是个好主意`cursor.getCount()`，如果计数> 0，则执行`moveToFirst`，然后尝试使用`cursor.getString(1)`

# jquery-mobile - jQuery Mobile 无法在 Spring MVC/Roo 页面中滚动

> ID：14324893
> 
> 赞同：0
> 
> 时间：2013-01-14T19:07:09.730
> 
> 标签：jquery-mobile, spring-mvc, spring-roo

我使用 Spring Roo 创建了一个示例 Web 应用程序，并将 jQuery Mobile 1.1 示例代码嵌入到一个空的 jspx 页面中。下面我粘贴了我使用的代码。

这确实显示得很好。

问题是我无法向上或向下滚动。

有没有人知道是什么阻止了页面滚动或向下的能力？

```
<div>
<div data-role="page" id="mylist" data-cache="never">
    <div data-role="header">
        <h1>Persons</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <h2>News</h2>
        <ul>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
            <li>Test code.</li>
        </ul>   
        <div class="clear" style="height:20px;"></div>          
    </div><!-- /content -->
</div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:33:28.357

我正在更新此问题，以便可以将问题标记为已回答。感谢bhagyas。

正如我在对 bhagyas 的原始问题中评论的那样，我能够通过消除冲突的 js 文件来解决这个问题。

# xcode - 在 UITableViewCell 中对齐 UIImage

> ID：14324894
> 
> 赞同：0
> 
> 时间：2013-01-14T19:07:15.267
> 
> 标签：xcode, uitableview, uiimage

我正在尝试将 UIImageView 对齐到 UITableViewCell 的左侧。

我以为我必须使用类似的东西

```
cell.imageView.image = [UIImageView CGFloat....]; 
```

但事实证明它不起作用。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:20:33.810

这可能有效：

```
cell.imageView.contentMode = UIViewContentModeLeft; 
```

# c# - 基于客户端登录的 URL 重定向

> ID：14324897
> 
> 赞同：1
> 
> 时间：2013-01-14T19:07:18.487
> 
> 标签：c#, asp.net, url, rewrite

如何在 c# .net 或 asp.net 4.0 中基于注册客户端重定向 url。例如，如果客户注册为“client1”并且我们的网站是 www.mycompany.com，那么客户收益的每个页面都应该是 www.client1.mycompany.com。

更详细的例子：

例如，创建的另一个客户端是 Client2。我通常创建的页面就像“www.mycompany.com/product.aspx”“www.mycompany.com/categories.aspx”应该显示为“www.client2.mycompany.com/product.aspx”和www .client2.mycompany.com/categories.aspx”分别

我在网上搜索并找到静态页面或在应用程序启动期间使用 Gloabal.asax，但在用户登录后没有找到任何东西。

# java - 在 jdk7 与 jdk6 中开发

> ID：14324898
> 
> 赞同：0
> 
> 时间：2013-01-14T19:07:20.983
> 
> 标签：java, jakarta-ee

虽然我了解作为用户，升级到 java 7 update 11 非常重要。对于开发，将 jdk6 用于新项目是否有优势？我知道 java 7 有新特性，尤其是 nio-2，所以使用 java 7 有优势，但是坚持使用 jdk6 有优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:18:21.290

JDK 的新版本总是具有有助于简化开发和使语言整体成熟的特性。

[在这里阅读更多](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html)

通常建议您对新项目使用最新版本，除非您受到公司或任何其他约束的限制。根据我的经验，公司可能会因为稳定性问题而限制其员工使用特定版本的 Java，以及必须处理专门用旧版本编写的遗留代码等，他们可能还会有限制因素，以防操作环境也受到限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:15:22.590

选择要编译的 JDK 版本确实是更好的问题；这就是我想你要问的。一般来说，如果您可以使用早期 JDK 中可用的 API 开发应用程序，这意味着使用不是最新版本的 JDK 的用户可以使用您的应用程序。您指定的 JDK 编译器级别设置运行应用程序所需的最低版本。

显然，在更高级别的 JDK 上编译是有好处的，因为您现在有更多 API 可供您使用。

编辑：请注意，在 Eclipse 之类的东西中，这是通过设置项目（或工作区）的编译器合规级别来指定的。

# ruby-on-rails - 使用 oauth2 使用“消费者令牌”发出请求

> ID：14324899
> 
> 赞同：0
> 
> 时间：2013-01-14T19:07:22.117
> 
> 标签：ruby-on-rails, ruby, oauth, oauth-2.0

我将[intridea/oauth2](https://github.com/intridea/oauth2)用于 oauth2 功能。身份验证和使用访问令牌发出请求时一切正常。

但我不知道如何在没有访问令牌的情况下发出请求。我认为它可以简单地与

```
client = OAuth2::Client.new(key, secret, :site => site)
client.request(:post, "/api/users", {params: {param1: "val1"}}) 
```

但这似乎不起作用。它没有在请求中设置任何 oauth 标头。

我该如何提出这样的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:45:57.840

图书馆似乎没有这样的能力。所以我现在有两种身份验证方式。您可以在此页面上找到一些信息：[http ://railscasts.com/episodes/352-securing-an-api?view=asciicast](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:12:55.007

然后完全忽略 oAuth。例如，使用简单`Net::HTTP`的请求或使用像[REST 客户端](https://github.com/archiloque/rest-client)这样的库。

# c# - 应用程序之间的 WP8 后退按钮

> ID：14324901
> 
> 赞同：1
> 
> 时间：2013-01-14T19:07:44.150
> 
> 标签：c#, windows-phone-8

我在 Windows Phone 8 上有一个应用程序，可以在 Internet Explorer 上打开一个链接。页面加载到最后，当我想返回应用程序时，Internet Explorer 会阻塞并且不会返回。

这是我在 Internet Explorer 中打开链接的代码。

```
text.NavigateUri = new Uri(url, Urikind.Absolute); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:47:45.430

我想你会想做这样的事情：

```
//After your page has finished loading
NavigationService.Navigate(new Uri(url, Urikind.Absolute)); 
```

不过，这从您的问题中并不完全清楚。您想在用户单击网页中的某些内容后返回应用程序，还是只是在页面加载完成后返回应用程序？无论哪种方式，您都希望处理该事件，然后调用上面的行。

# php - 为什么我不能读取这个数组？

> ID：14324909
> 
> 赞同：-3
> 
> 时间：2013-01-14T19:08:28.210
> 
> 标签：php, arrays, wordpress

我目前正在为 WordPress 开发一个插件，我正在尝试使用`get_options`. 结果，我得到了一个以选项和选项名称为键的数组，但由于某种原因我无法读取它：

```
$options = get_option('widget_widgetname');
var_dump($options); 
```

这是的输出`var_dump()`：

```
array(2) { [2]=> array(5) 
           { 
             ["string"]=> string(6) "Search" 
             ["title"]=> string(12) "WDSearchForm" 
             ["show_wrapper"]=> string(0) "" 
             ["animate"]=> string(0) "" 
             ["animateWidth"]=> string(2) "80" 
           } 
           ["_multiwidget"]=> int(1) } 
```

但是当我执行以下操作时，它不起作用：

```
echo $options["string"]; // No output
echo $options["title"]; // No output 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:10:36.003

正如您在 中看到的`var_dump`，您有一个多维数组。

你应该使用：

```
echo $options[2]["string"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:09:55.393

看起来这是一个嵌套数组。尝试：

```
echo $options[2]["string"];
echo $options[2]["title"]; 
```

这是一个重新格式化的转储，使结构更清晰：

```
array(2) {
    [2]=> array(5) { 
             ["string"]=> string(6) "Search" 
             ["title"]=> string(12) "WDSearchForm" 
             ["show_wrapper"]=> string(0) "" 
             ["animate"]=> string(0) "" 
             ["animateWidth"]=> string(2) "80" 
           }
    ["_multiwidget"]=> int(1)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:10:12.960

这是一个多维数组。尝试`echo $options[2]["string"]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:10:18.537

它是一个二维数组。这应该可以解决问题：

```
echo $options[2]["string"];
echo $options[2]["title"]; 
```

或者

```
$options = $options[2];

echo $options["string"];
echo $options["title"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:10:16.610

```
echo $options[2]["string"]; // output
echo $options[2]["title"]; // output 
```

# ruby-on-rails - RSpec 测试跳过过滤器

> ID：14324910
> 
> 赞同：0
> 
> 时间：2013-01-14T19:08:30.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我正在使用只能在生产中运行的 gem。

```
skip_after_filter :kachow_auto_include unless Rails.env.production? 
```

我如何测试在 RSpec 的测试和开发过程中是否跳过了这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:23:25.753

存根 Rails.env 上的方法调用，然后调用操作，例如：

```
it "should run in production environment" do
  Rails.env.stub(:production?) { true }
  MyController.should_receive(:kachow_auto_include)
  get :action_that_triggers_after_filter
end

it "should not run unless in production" do
  Rails.env.stub(:production?) { false }
  MyController.should_not_receive(:kachow_auto_include)
  get :action_that_triggers_after_filter
end 
```

# ruby-on-rails - ActiveSupport 通知 - 打印到控制台或登录到调试？

> ID：14324911
> 
> 赞同：0
> 
> 时间：2013-01-14T19:08:34.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activesupport

当我的 FbPlace 类（mongo 文档）的对象被更新时，我想触发一个新对象的创建。FbPlace 仅通过控制台或 rake 任务中的脚本进行更新。`rails s`是否可以检查我的 fb_places 订阅是否在我的选项卡或日志文件中正确触发？

```
ActiveSupport::Notifications.subscribe("fb_places_updated.graph_engine") do |*args|
  puts "WORKS"
  Rails.logger.debug("+++ WORKS")
  #Other irrelevant logic 
end 
```

我已经添加`puts`并`Rails.logger.debug`查看当我执行类似的操作时通知是否被触发`FbPlace.update_attribute(name: "test_name")`，但我还没有看到任何打印到控制台或我的日志文件的内容。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:30:15.810

您没有指定实际订阅事件的位置。我会想象您在初始化程序中执行此操作，并且 rake 任务会加载环境，因此应该没问题。

要查看事件发生时块是否得到评估，您可以使用[Pry](http://pryrepl.org/)，这样您只需键入`args`并查看里面的内容。将其放入您的 Gemfile 中，然后：

```
ActiveSupport::Notifications.subscribe("fb_places_updated.graph_engine") do |*args|
  binding.pry
end 
```

运行 rake 任务。如果您没有最终进入 Pry 会话，则不会触发该事件。我不确定什么应该触发该`fb_places_updated.graph_engine`事件。我认为你使用它`mongoid`，据我所知它不会触发任何仪器 - 需要有另一面：

```
ActiveSupport::Notifications.instrument("fb_places_updated.graph_engine", some_data: 42) 
```

如果是这种情况，我不会打扰通知，只需使用[after_update 回调](http://mongoid.org/en/mongoid/docs/callbacks.html#callbacks)或模型中的[观察者](http://mongoid.org/en/mongoid/docs/callbacks.html#observers)。

# sql - 使用 MERGE 语句合并 Windows Azure SQL 数据库上的大量数据导致错误 40552

> ID：14324915
> 
> 赞同：2
> 
> 时间：2013-01-14T19:08:44.460
> 
> 标签：sql, azure-sql-database

我目前正在合并*Windows Azure SQL Database*中的大型数据集。我想知道是否有办法不出现以下错误：

> 40552 : 由于事务日志空间使用过多，会话已终止。尝试在单个事务中修改更少的行。

我的数据集超过 1500 万条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:32:44.547

从应用程序中找到需要导入的记录数，并根据批处理大小计算需要执行的批处理数。然后对于每个批次，创建一个新的 SQL 命令，该命令执行具有正确偏移索引的合并存储过程。确保在每个 SQL 命令之间插入一个短暂的延迟，因为如果它们运行得太快，Windows Azure SQL 数据库可能会由于请求数量过多而引发**40501 。**

```
CREATE PROCEDURE [dbo].[MergeCustomerTables]
        @offsetIndex int = 0,
        @batchSize int = 10000
AS

DECLARE @offset as bigint

SELECT @offset = @offsetIndex *  @batchSize

MERGE Customers AS Target
USING (SELECT a.[Name], a.[LastName], a.[Email] from CustomerInsertTable as a
       ORDER BY a.[Email]
       OFFSET  @offset ROWS 
       FETCH NEXT @batchSize ROWS ONLY 
) AS Source
ON (Target.[Email] = Source.[Email])
WHEN MATCHED THEN
    UPDATE SET Target.[Name] = Source.[Name]
             , Target.[LastName] = Source.[LastName]
WHEN NOT MATCHED BY TARGET THEN
    INSERT ([Name], [LastName], [Email])
    VALUES (
     Source.[Name] 
     , Source.[LastName]
     , Source.[Email]
    ); 
```

# oop - 汽车类是否违反单一责任原则？

> ID：14324917
> 
> 赞同：1
> 
> 时间：2013-01-14T19:08:45.903
> 
> 标签：oop, design-patterns, single-responsibility-principle

即使我认为我理解单一职责原则和高/低内聚原则，以下问题仍然让我有些困惑

1）假设`Planet`和`Bird`属性在`Car`类中任意/随机放置（即，没有代码`Car`需要或对这两个属性返回的两个对象进行操作） - 换句话说，`Planet`属性`Bird`不属于 Car 类

一种）

*SRP*声明对象应该只有一个改变的理由。

```
public class Car
{
    public void StartEngine()
    { ... }

    private Planet Planet
    {
        get { ... }
    }

    private Bird Bird
    {
        get { ... }
    }
} 
```

班级是否`Car`违反 SRP？我会说它不会破坏 SRP，因为任何更改`Planet`或`Bird`实例都不会传播到`Car`类？

b)

> 内聚是指一个类中方法和类级别变量的密切程度。在高度内聚的类中，所有方法和类级变量一起使用以完成特定任务。在具有低内聚度的类中，函数被随机插入到一个类中并用于完成各种不同的任务

假设即使`Car`类包含这两个随机属性，它仍然只完成一个特定任务（或几个密切相关的任务）：

我们会说它`Car`具有 *低内聚性*，即使它仍然执行特定任务（或几个密切相关的任务）？

2）假设实例的方法使用`Planet`and属性来完成特定*任务*，那么即使在概念上这两个属性不属于（因此最好将and实例作为传递）对它们进行操作的 a 方法的参数）`Bird``Car``Car`*`Car``Planet``Bird``Car`*

 *谢谢你

**赫尔顿自行车：**

1)

> 当您将 Bi​​rd 和 Planet 封装在 Car 中时（如果它们是私有的则更糟），所以现在 Car 类有三个改变的理由：

我看不出`Car` 有什么改变的三个原因，因为在我的第一个问题中，`Car's`方法甚至不对这两个属性进行操作，因此对公共 API 的任何更改`Planet's`都`Bird's`不会影响`Car`类？

2)

```
The problem here has two components:
1\.  Bird and Planet are contained (as opposed to aggregated) in Car class;
2\.  Bird and Planet are not conceptually related to Car, much less by some containment relationship. 
```

a）这令人困惑：无论是否包含或聚合实例 ，由于实例的`Car`修改而必须修改的机会（至少在我的第一个问题中）是否完全相同？`Planet``Bird``Planet``Bird`

b）在第二个问题中，`Car`do 方法对两个属性进行操作以执行**单个特定任务**，所以它们在概念上至少不是有些相关吗？你会说即使在第二个问题中，类**的凝聚力也很低**，即使它只执行一个**任务**（并且正在使用这两个属性来完成任务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:16:17.370

1）我会说`Car`不能成立`Planet`and `Bird`。这样 Car 有两个不同的职责：汽车功能和持有一些奇怪的物体。应该有一些其他对象/类可以保存世界中的对象：例如：类`WorldContainer`

2）我会说你的两个例子的凝聚力都很低。管理汽车和一些不同的对象应该使用其他一些界面来完成。将它们粘合在一起的界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:19:41.643

car 类确实具有低内聚性，因为它指的是与它的职责集完全不同的类。它还具有更高的耦合面，因为由于 Planet 和 Bird 是公共的，您已经向消费者提供了对这些属性的访问权限，这意味着您现在向任何消费者添加了另外两个“更改原因”，无论是否汽车在内部使用这些。

无论如何，SRP 已被违反，仅仅是因为 Car 现在负责“获得行星或鸟类的方法”，而无视任何耦合/内聚论点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:53:12.717

SRP 意味着一个类应该只有一个改变的理由。

因此，对 Car 类的修改应该意味着 Car 概念模型发生了变化。

但是，当您将 Bi​​rd 和 Planet 封装在 Car 中时（如果它们是私有的则更糟），因此现在 Car 类有三个更改的理由：

1.  修改汽车概念模型和/或行为；
2.  修改 Bird 概念模型和/或行为；
3.  修改 Planet 概念模型和/或行为；

这里的问题有两个组成部分：

1.  Bird 和 Planet 包含（而不是聚合）在 Car 类中；
2.  Bird 和 Planet 在概念上与 Car 无关，更不用说某种包含关系。

或者，坦率地说（我希望你这样做是一种教学练习），所显示的架构根本没有意义。

* * *

聚合示例（在 Python 中）。非内聚类在引用它们的 Car 类定义之外定义。汽车依赖于Bird和Planet，但现在Bird和Planet独立存在。

```
class Bird():
    hasWings = True

class Planet():
    isFlat = False

class Car():
    owner = Bird()
    substrate = Planet() 
```

* * *

参数传递示例（仅汽车类，假设其他类与上述类似）。现在 Car 构造函数（`__init__`python 中的方法）将实例作为参数。这可能会或可能不会被首选。依赖和耦合仍然存在，但现在可能更加具体。

```
class Car():
    def __init__(bird, planet)
        owner = bird
        substrate = planet 
```

* * *

最后，整个内聚和耦合问题与软件本身并没有太大关系，而是与开发人员有关。编译器不会介意您的命名空间、项目文件夹和文件分发是否混乱，只要它“编译”即可。但是像你做的那样做没有任何意义（在 Car 类中放置一个 Bird 和一个 Planet 类）。刚开始，您对每个类的版本控制会非常混乱。

所以，你不应该违背的纯洁，不是为了它而写在书本上的。这种纯度是（或应该是）人类与机器指令斗争的结果。面向对象和一般的软件架构不是为机器设计的，而是为开发人员的（部分）头脑设计的。*

# php - 提交按钮，下一步

> ID：14324918
> 
> 赞同：0
> 
> 时间：2013-01-14T19:08:47.533
> 
> 标签：php, jquery, html, database

我完成了用户输入信息并从下拉列表中选择的搜索页面。我还添加了按钮 AddList，您可以在其中拥有多个更改标签名称的搜索表单。所有搜索最终都将在一个提交按钮中执行，每个搜索将在一个查询中进行。我的表包含所有信息，元组只包含数字。

**更新：**我尝试更改输入标签的输入类型，但启用和禁用功能似乎不适用于整数，仅适用于文本字段。我该如何解决？

我的提交是明天，这是我的搜索代码：

```
 <script type="text/javascript">

            $('#exactButton').live('click', function(){
                $(this).prev().prev().prev().prev().prev().removeAttr('disabled');

                $(this).prev().prev().prev().attr('disabled',true);
                $(this).prev().prev().prev().prev().attr('disabled',true); 
            });

            $('#rangeButton').live('click',function(){
                $(this).prev().prev().removeAttr('disabled');
                $(this).prev().prev().prev().removeAttr('disabled');

                $(this).prev().prev().prev().prev().attr('disabled',true);
            });

        })
    </script> 
```

这是我的 HTML 代码：

```
 <button id="button">Add List</button><br><br>
        <form id ="form" name="search" method="get" action="test.php">
            <div id="div">
                <select name ="select" >
                    ...options...
                </select>

                Value:<input type="text" name="exact" id="exactField" />

                From: <input type="text" name="from" id="fromField" />
                To: <input type="text" name="to" id="toField" />

                <br>
                <input type="button" name="answer" value="Range" id="rangeButton" />
                <input type="button" name="answer" value="Exact" id="exactButton" />

            </div>
            <br>
            <input type="submit"name="search" value="Submit">
        </form> 
```

先感谢您..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:21:46.657

正如 Dagon 所说，您将在 URL 中看到所有提交的参数，因为您正在使用 method 提交表单`GET`。这是很好的解释：[http ://www.w3schools.com/php/php_get.asp](http://www.w3schools.com/php/php_get.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:29:59.660

一个想法：为元素添加一些自定义属性（也添加到克隆中）。

```
this.attr("mycustomattribute","somevalue"); 
```

在此之后，您可以使用自定义属性和值获取页面上的所有元素。

```
divs = $('div[mycustomattribute="somevalue"]'); //should give all div container with attribute "mycustomattribute" with value "somevalue" 
divs.each(function(){ 
   console.log(this,$(this).attr('name'));//show expression (for debug)
}); 
```

然后您可以收集这些元素，将其序列化并将其添加到您的帖子中。未测试，但一个想法。

亲切的问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:50:14.813

在 PHP 中，它已经存在。

`print_r($_GET);`将列出 GET 方法发送的所有参数

`print_r($_POST);`将列出所有通过 POST 方法发送的参数。

然后，当然，您需要在数组中进行迭代以将每个值包含在查询语句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T05:12:57.870

您可以使用前缀或后缀命名输入，对应于用户单击以添加列表并将这些输入集添加到仅表单的序列。

```
<form id ="form" name="search" method="get" action="test.php">
    <div>
            <select name ="select[1]" >
                ...options...
            </select>

            Value:<input type="text" name="exact[1]" class="exactField" />

            From: <input type="text" name="from[1]" class="fromField" />
            To: <input type="text" name="to[1]" class="toField" />

            <br>
            <input type="button" name="answer[1]" value="Range" class="rangeButton" />
            <input type="button" name="answer[1]" value="Exact" class="exactButton" />

        </div>
    <div>
            <select name ="select[2]" >
                ...options...
            </select>

            Value:<input type="text" name="exact[2]" class="exactField" />

            From: <input type="text" name="from[2]" class="fromField" />
            To: <input type="text" name="to[2]" class="toField" />

            <br>
            <input type="button" name="answer[2]" value="Range" class="rangeButton" />
            <input type="button" name="answer[2]" value="Exact" class="exactButton" />

        </div>
.
.
.
        <br>
        <input type="submit"name="search" value="Submit">
</form> 
```

# ruby-on-rails - Rails 的 link_to_function 弃用状态？

> ID：14324919
> 
> 赞同：21
> 
> 时间：2013-01-14T19:08:48.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, ruby-on-rails-4, link-to-function

`link_to_function`Rails 中 Javascript 助手的状态如何？我读到，包括在[这个 stackoverflow question](https://stackoverflow.com/questions/5063246/rails-3-status-of-link-to-function-method)中，它在 Rails 3.0 中被弃用，然后被弃用，然后在 3.2.4 中再次被弃用。它是我可以依赖并教给学生的东西吗？我刚刚阅读了[Rails 3.2.8 的发行说明（通过搜索）](http://weblog.rubyonrails.org/2012/8/9/ann-rails-3-2-8-has-been-released/)：

> 恢复了 button_to_function 和 link_to_function 助手的弃用。拉斐尔·门东萨·弗朗萨

这现在在哪里？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-14T19:17:42.180

`link_to_function`在分支中不被弃用，**将来**也不会被弃用。但它在当前的**master**分支中已被弃用，并且在 Rails 4.0 发布时将被弃用。所以我猜它会在 4.1 中从 Rails 代码中删除。所以你可以教学生这样做（来自 rails 4 changelog）：`3-2-stable``3-2-stable`

 **> 我们建议使用 Unobtrusive JavaScript。例如：

```
link_to "Greeting", "#", class: "nav_link"

$(function() {
  $('.nav_link').click(function() {
    // Some complex code

    return false;
  });
}); 
```

或者

```
link_to "Greeting", '#', onclick: "alert('Hello world!'); return false", class: "nav_link" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-17T11:32:16.893

这是我对这个问题的解决方案：

在 JavaScript 中：

```
// define function to be called
function awesome_func(a,b,c){
  console.log(a,b,c);
}

//clean implementation of link_to_function
$(function(){
  $('[data-on][data-call][data-args]').each(function(d){
    try{
       $(this).on( $(this).data('on'), function(){
          window[$(this).data('call')].apply(window,$(this).data('args'))})
    }catch(e){
       if(typeof(console) != 'undefined' && typeof(console.log === 'function'))
         console.log(e);
    }
  });
}) 
```

然后你可以在rails中做：

```
link_to 'Awesome Button', '#', data:{on: :click, call: 'awesome_func',args: '[1,"yeah",{b:4}]' 
```

这似乎是他们希望我们编码的方式:)，不过我喜欢 link_to_function

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-29T18:24:23.790

基于 Elias Baixas 的回答...如果这对任何人都有帮助，我必须对其进行一些更改才能使其正常工作...我必须添加`eval`并且`preventDefault`（我在 JS fwiw 上非常糟糕）

```
link_to fa_icon('info-circle'),
        '#',
        data: {
          on: :click,
          call: 'channel_info',
          args: Array('some data').to_json
        }

function channel_info(a){
  console.log(a)
}

//clean implementation of link_to_function
$(function(){
  $('[data-on][data-call][data-args]').each(function(d){
    try{
      $(this).on( $(this).data('on'), function(event){
        console.log($(this).data('args'));
        window[$(this).data('call')].apply(window,eval($(this).data('args')));
        event.preventDefault();
      })
    } catch(e) {
     if(typeof(console) != 'undefined' && typeof(console.log === 'function'))
       console.log(e);
    }
  });
}) 
```**

# java - 数组列表程序

> ID：14324920
> 
> 赞同：-4
> 
> 时间：2013-01-14T19:08:48.337
> 
> 标签：java

我做了一个程序，但输出显示`0`. 你能看出我做错了什么吗？我的评估说明问这个。

```
package snippet;

import java.util.ArrayList;

public class CO2FromElectricity {
    // declaration of private instance variables

    /**
     * Default constructor to create an object from the CO2FromElectricity class.
     */
    CO2FromElectricity() {
    }

    /**
     * A mutator method which calculates the average annual electricity bill.
     * 
     * @param monthlyBill
     *            an ArrayList containing the monthly bills for home electricity use.
     * @return the average monthly electricity bill.
     */
    public double calcAverageBill(ArrayList<Double> monthlyBill) {
        monthlyBill.add(279.41);
        monthlyBill.add(238.03);
        monthlyBill.add(248.64);
        monthlyBill.add(258.73);
        monthlyBill.add(395.48);
        monthlyBill.add(419.91);
        monthlyBill.add(431.15);
        monthlyBill.add(407.56);
        monthlyBill.add(417.14);
        monthlyBill.add(308.35);
        monthlyBill.add(337.91);
        monthlyBill.add(320.77);
        double sum = 0.0;
        double monthlyTotal = 0.0;

        for (int i = 0; i < monthlyBill.size(); i++) {
            sum += monthlyBill.get(i);
        }

        return monthlyTotal / monthlyBill.size();
    }

    /**
     * A mutator method which calculates the average annual price of electricity.
     * 
     * @param monthlyPrice
     *            an ArrayList containing the monthly price of electricity per kilowatthour.
     * @return the average monthly price of electricity.
     */
    public double calcAveragePrice(ArrayList<Double> monthlyPrice) {
        monthlyPrice.add(0.1117);
        monthlyPrice.add(0.1107);
        monthlyPrice.add(0.1110);
        monthlyPrice.add(0.1113);
        monthlyPrice.add(0.1135);
        monthlyPrice.add(0.1138);
        monthlyPrice.add(0.1217);
        monthlyPrice.add(0.1215);
        monthlyPrice.add(0.1216);
        monthlyPrice.add(0.1228);
        monthlyPrice.add(0.1209);
        monthlyPrice.add(0.1192);
        double sum = 0.0;
        double monthlyTotal = 0.0;

        for (int i = 0; i < monthlyPrice.size(); i++) {
            sum += monthlyPrice.get(i);
        }
        return monthlyTotal / monthlyPrice.size();
    }

    /**
     * A mutator method which calculates the annual home CO2 emission from electricity.
     * 
     * @param avgBill
     *            the average monthly home electricity bill.
     * @param avgPrice
     *            the average monthly price of home electricity.
     * @return the annual home CO2 emission from home electricity use.
     */
    public double calcElectricityCO2(double avgBill, double avgPrice) {
        return (avgBill / avgPrice) * 1.37 * 12;
    }
} 
```

输出应如下所示。请看看我做错了什么。

> ```
> Average Monthly Electricity Bill: 191.23  
> Average Monthly Electricity Price: 0.11  
> Annual CO2 Emissions from Electricity Usage: 28667.1 pounds 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:13:59.633

每月总计始终为 0.0。所以你的函数返回 0.0/sum

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:21:03.110

输出为 0 因为你写：

```
double monthlyTotal = 0.0; 
```

我想你想

```
 return  sum/monthlyPrice.size(); 
```

# html - CSS 属性选择器 + 之后：不在 Chrome 中工作？

> ID：14324924
> 
> 赞同：3
> 
> 时间：2013-01-14T19:09:10.637
> 
> 标签：html, google-chrome, css

我有以下 css/html

```
<!DOCTYPE html>
<html>
<head>
    <style>
        a[href$=".pdf"]:after{
            content: "[pdf]";

        }
    </style>
</head>
<body>
<p>This is an example <a href="helloworld.pdf">Text with a pdf link</a></p>
<p>This is an example <a href="helloworld.png">Non PDF link</a></p>
</body>
</html> 
```

当我在**IE8**中打开它时，它按预期工作：PDF 链接在之后添加了文本，而 PNG 没有。但是，当我在**Chrome 23.0.1271.97**中打开它时，两个链接都将 [pdf] 附加到末尾。更奇怪的是，当我点击非pdf链接时，最后的[pdf]在点击时消失了，而在点击PDF链接时它并没有消失。

![在这里查看 Chrome 结果的样子](../Images/c3d34d9ef89c53516d8ef6775bc29035.png)

当我做

```
a[href$=".pdf"]{
    color: red;
} 
```

pdf 链接是红色的，而非 pdf 链接不是，即使在 Chrome 中也是如此。

为什么 Chrome 在使用 :after 和 content 时似乎不尊重属性选择器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:51:33.637

当我[只使用 :after 规则](http://jsfiddle.net/Bbv5B/1/)时，我看到了同样的问题。

```
a[href$=".pdf"]:after{
    content: "[pdf]";
} 
```

但是，当我[添加不带 :after 的规则](http://jsfiddle.net/Bbv5B/2/)时，[pdf] 不再位于底部。确实很奇怪。

```
a[href$=".pdf"]:after{
    content: "[pdf]";
}

a[href$=".pdf"]{
    color: red;
} 
```

看起来这可能是一个[chrome bug](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/7fPyT-A7RTI)。:before/:after 不适用于属性选择器，除非该项目已经使用属性选择器设置样式。[这是记录的错误](http://code.google.com/p/chromium/issues/detail?id=125719#c10)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:57:44.497

这绝对似乎是一个错误。然而，我似乎确实有一种解决方法是使用基本选择器设置*一些东西*，然后设置之后。因此，例如，[这有效](http://jsfiddle.net/vGMPr/3/)：

```
a[href$=".pdf"] {
  font-size: inherit;
}
a[href$=".pdf"]:after {
  content: "[pdf]";
} 
```

# linux - Tcpdump 命令 - Linux - Unix

> ID：14324925
> 
> 赞同：-2
> 
> 时间：2013-01-14T19:09:12.027
> 
> 标签：linux, shell, unix, ubuntu, command

我正在使用 tcpdump 命令捕获网络接口 eth0 上的流量

**tcpdump -Xvv -n -i eth0 -c 300 > captureFile.txt**

在外壳中出现下一条消息

tcpdump：监听 eth0，链接类型 EN10MB（以太网），捕获大小 96 字节 捕获 300 个数据包 过滤器接收到 302 个数据包 0 个数据包被内核丢弃

我怎么能在命令行中不显示消息？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:18:19.947

在命令行末尾添加**2>/dev/null ：**

```
tcpdump -Xvv -n -i eth0 -c 300 > captureFile.txt 2>/dev/null 
```

Tcpdump 将消息写入标准错误，> 重定向仅适用于标准输出。

如果您希望消息出现在 captureFile.txt 中，请使用：

```
tcpdump -Xvv -n -i eth0 -c 300 > captureFile.txt 2>&1 
```

有关重定向的更多信息，请参阅[http://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:45.720

如果我理解正确，您想禁止该命令的输出。

如果你想压制：

*   只是消息（常规输出），使用：

    ```
    command > /dev/null 
    ```

*   只是错误（不推荐）：

    ```
    command 2> /dev/null 
    ```

*   错误和常规消息（同样，不推荐）：

    ```
    command > /dev/null 2>&1 
    ```

这需要`tcpdump`将捕获的数据转储到文件中。您可以通过使用`-w`开关来做到这一点：

```
tcpdump -w capture.log 
```

# xml - 如何将 XSLT 文件编译为字节码并在浏览器中运行？

> ID：14324930
> 
> 赞同：0
> 
> 时间：2013-01-14T19:09:33.703
> 
> 标签：xml, xslt

我有一个 XML 文件和一个相应的 XSL 样式表，用于将 XML 转换为 XHTML 文档。这可能是一个愚蠢的问题，但是我该如何执行 XSL 文件呢？现在，当我在浏览器中打开我的 XSL 文件时，会显示带有颜色代码和适当格式的代码副本。但是，显然我希望看到程序的输出。我研究了一下，发现 XSLT 文件没有被编译成字节码，因此无法运行。是否有某种类型的处理应用程序可以完成这项工作来编译 XSLT 文件？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:22:37.987

“字节码”是一条红鲱鱼。问题是如何将 XML 提供给 XSLT 程序并执行该程序。没有一种方法可以做到这一点，因为这取决于您工作的环境。

为了让您入门，这里有一种方法。大多数浏览器都理解`xsl-stylesheet`处理指令。因此，您可以将这样的 XML 文件提供给浏览器：

```
<?xml-stylesheet type="text/xsl" href="my-xsl-stylesheet.xsl"?>
<myxmlfile>...</myxmlfile> 
```

当您在浏览器中加载 xml 文件时，它将`my-xsl-stylesheet.xsl`从服务器检索，将其应用于当前 xml，并显示结果。（确保您的文件使用正确的 MIME 类型，例如`application/xml`.）

但还有更多选择。您可以在检索文档时在服务器上转换 XML。您可以将所有 XML 预编译为 html 并将 html 直接提供给浏览器。如果您的浏览器支持 XML 的编程转换，则可以使用带有一些 javascript 的 HTML 文件，使用 XMLHttpRequest 加载 XML 和 XSLT 并在浏览器上运行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:10.510

您是否在 XML 文件中引用 XSL 文件？

```
 <?xml version="1.0" encoding="UTF-8"?>
 <?xml-stylesheet type="text/xsl" href="class.xsl"?> 
```

当您在浏览器中加载 XML 文件时，浏览器将加载 XSL 文件并将规则应用于 XML 数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:16:29.040

[`xml-stylesheet`处理指令](https://stackoverflow.com/questions/2038304/xslt-pi-and-stylesheet-parameters)用于指定用于转换 XML 文档的 XSLT 样式表。

# javascript - 为什么 Chrome 对内联事件使用 `with`

> ID：14324935
> 
> 赞同：6
> 
> 时间：2013-01-14T19:09:55.603
> 
> 标签：javascript, google-chrome

如果您在 Chrome 中查看[**此小提琴**](http://jsfiddle.net/SBkmr/)并单击打开 js 控制台的触发器文本，您将看到：

![在此处输入图像描述](../Images/f075ba652c96aedc6550462358ed8911.png)

所有这些`with`块的原因是什么，它的价值是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:18:37.020

在我看来，当事件处理程序被指定为 HTML“onclick”属性时，它似乎是浏览器为事件处理程序创建函数的方式。我*认为*这样做是：

*   为事件对象和您提供的代码创建一个带有单个参数的事件处理函数；
*   使元素（`<a>`标签）、空对象 (?) 和文档对象的属性看起来是该函数中代码的可用符号。

也就是说，`this[0]`是`<a>`元素本身，`this[1]`看起来像一个空的 Object 实例，并且`this[2]`是文档对象。这意味着在您作为“onfoo”事件处理程序属性的一部分编写的代码中（而*不是*从直接 JavaScript 代码绑定的任何普通事件处理程序中的代码），可以引用目标元素的属性（用于您正在设置属性）和文档元素的属性，*就好像它们存在于范围链中一样。*

如果你稍微改变一下代码：

```
$('<a href=# onclick="console.log(baseURI);"> ... 
```

然后你得到`<a>`元素的“baseURI”属性的值。不需要在“baseURI”前面加上任何明确引用`<a>`元素的 DOM 节点的东西；它只是“那里”，就好像它是`var`在某个封闭范围内声明的。

（现在检查 w3c 规范……）*编辑*——我还没有找到任何规定哪些符号应该可用于事件处理程序中的脚本代码。这真的很奇怪。

*再次编辑*——Firefox 似乎也在做同样的事情，尽管我在`with`任何地方都没有看到明确的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:45:49.493

`with`将它的参数移到范围堆栈的顶部。所以它甚至高于全局对象、函数参数等。不知道他们为什么使用它。也许它是一个生成的代码。

# vb.net - 如何在 OLEDB/JET DataTable 中手动定义列类型？

> ID：14324945
> 
> 赞同：0
> 
> 时间：2013-01-14T19:10:58.620
> 
> 标签：vb.net, oledb, jet

我正在将数据从 Excel 电子表格导入 VB.NET `DataTable`。这个 Excel 电子表格在前 18 行中有很多垃圾数据，包括很多空单元格。我最终在后处理中删除了这些行，但我需要按原样访问 Excel 文件，根本不需要手动修改它。

我意识到该设置`IMEX=1`指示 Jet 引擎假定所有列都是文本。但是，我在将其设置为另一个值时遇到了问题（下面将详细解释）。因此，默认的 Jet 引擎列类型扫描不会特别好。

我想：

1.  导入前手动定义列类型
2.  强制 Excel 扫描更多行（我相信默认为 8）以确定列类型

但是，我确实对想法 #2 有疑问。我没有打开的管理权限`regedit.exe`，所以我无法使用该方法修改注册表。我以前确实通过某种方式导入密钥来规避这个问题，但我不记得我是怎么做到的。所以＃1将是一个理想的解决方案，除非有人可以帮助我实施想法＃2。

这可能吗？目前，我正在使用以下方法：

```
If _
    SetDBConnect( _
    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & filepath & _
    ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1""", True) Then

    dtSchema = _dh.GetOleDbSchemaTable()

    If _dh.Errors <> "" Then
       Throw New Exception("::LoadFileToBuffer.GetOleDbSchemaTable::" & _dh.Errors())
    End If

    For Each sheetRow In dtSchema.Rows
       If sheetRow("TABLE_NAME").ToString() = "TOTAL_DOLLARS$" Then
          totalDollars = sheetRow("TABLE_NAME").ToString()
        ElseIf sheetRow("TABLE_NAME").ToString() = "TOTAL_UNITS$" Then
          totalUnits = sheetRow("TABLE_NAME").ToString()
       End If
    Next

    'Get total dollars table
     sql.Append("SELECT * FROM [" & totalDollars & "]")
     dtDollars = _dh.GetTable(sql.ToString())
End If 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:26:58.203

你应该可以说：

```
 sql.Append("SELECT * FROM [" & totalDollars & "$A18:X95]") 
```

其中 totalDollars 是工作表名称，x95 是最后一个有效行。除非它们在第 18 行可用，否则您将无法包含标题。

# java - 这个确定字符串是否包含所有唯一字符的Java代码如何工作？

> ID：14324947
> 
> 赞同：2
> 
> 时间：2013-01-14T19:10:58.870
> 
> 标签：java, operators

我有一个我在网上找到的程序，它基本上告诉它是否`String`包含所有唯一字符，下面是代码

```
private static boolean areCharsUnique(String str) {
        if (str.length() > 256)
            return false;
        int checker = 0;
        for (int i = 0; i < str.length(); i++) {
            int val = str.charAt(i) - 'a';
            if ((checker & (1 << val)) > 0) {
                return false;
            }
            checker |= (1 << val);
        }
        return true;
    } 
```

我对这行代码感到困惑，`if ((checker & (1 << val)) > 0)`而且

`checker |= (1 << val);`

我知道这`<<`是一个左移运算符，但是在上述情况下，左移到底有什么帮助呢？

**简而言之，上述程序是如何工作的？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T19:16:02.580

此代码在假设 ASCII 字符集在其映射中具有连续字符的假设下工作，因此`a == 97, b == 98`，等等。

从这里开始，您可以计算与`a`字符的增量距离，例如`'e' - 'a' = 5`。此距离用于设置（通过`checker |= (1 << val)`）整数（具有 32 位）中的位。

因此，如果`'e'`找到一个字符，则索引 5 处的位将设置为 1 `checker`。

这是通过确保您永远不会找到之前已经设置的位（通过`if (checker & (1 << val)) > 0)`）为每个字符完成的。

这仅适用于小写字符（即使因为 int 有 32 位）。安`HashSet<Character>`肯定会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:16:49.650

每个字符都转换为从 0 (== 'a') 到 26 (== 'z') 及以上的数字索引。对于这些索引中的每一个，都设置了整数值 (== 'checker') 中的相应位。如果该索引的位已设置，您可以确定该字符已包含在给定字符串中。

请注意，此算法仅适用于小写字符串，对于大写字符，值会溢出并给出不可靠的结果。对此的一种解决方法是将“检查器”类型从 int 转换为 long。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T19:23:32.700

我们在这里将每个字符转换为从 0 ('a') 到 25 ('z') 的数字索引

```
 int val = str.charAt(i) - 'a'; 
```

在这里，我们看一下二进制表示，`checker` 例如，如果`checker = 001` 这意味着我们已经计算了 char 'a'，因为第一位设置为 1。

在这一行中，我们检查是否设置了与当前字母相关的位。`1<<val`表示`00100..00`，其中`1`设置在`val`左起第-个位置。其他数字为零。关于二进制操作，您可以[在 TopCoder阅读](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=bitManipulation)

```
if ((checker & (1 << val)) > 0) {...} 
```

这条线`checker |= (1 << val);`在位置`val`从左到`1`中设置位`checker`。

**编辑：**`checker`在这里你可能会 假设`bool arr[32]`，

和

`int val = str.charAt(i) - 'a';`一样`if(arr[str.charAt(i) - 'a'] == true) ...`

并且 `checker |= (1 << val);`等于`arr[val] = true`。

因此，在乞求时，您将所有元素都`arr`设置为零。 `val`- 是从“a”到“z”的字母的整数表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:13:01.143

此代码将每个小写字符的存在存储为 32 位整数中的单个位。

`1 << val`计算仅设置该位的数字。

# build - 大规模配置管理（100 个模块）

> ID：14324953
> 
> 赞同：1
> 
> 时间：2013-01-14T19:11:05.953
> 
> 标签：build, module, configuration-management

对许多模块进行配置管理有哪些聪明的想法，每个模块都有自己的主干/分支/标签？

Maven 似乎非常适合我们的项目，但我想知道那里还有什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:18:14.770

查看 Ivy，一个更轻量级的 Maven 版本，更严格地关注 CM

# python - 使用 os.system 或 subprocess.call 运行 scrapy 命令

> ID：14324955
> 
> 赞同：1
> 
> 时间：2013-01-14T19:11:09.133
> 
> 标签：python, apache, xampp, scrapy, scrapyd

我有一个 Scrapy 项目，它在 Apache (XAMPP) 上运行基于 Web 的界面，允许用户创建、修改和调度蜘蛛，还包括在 6800 端口调用 scrapyd 以获取挂起/运行/完成的蜘蛛。除了一个例外，这一切都很好......如果scrapyd没有运行，我显然无法安排蜘蛛或从scrapyd获取待处理/正在运行/已完成的蜘蛛。

我目前有一个呼叫`http://localhost:6800`，如果失败，我会显示一条消息，说明服务器当前未运行，并且我有一个启动服务器的链接。单击该链接时，它会调用一个 Python 页面，该页面会调用 os.system 来启动服务器。我对 Python 还很陌生，并且仍在尝试掌握操作系统功能，并且我尝试了几种不同的方法，这些方法是我在 Stack Overflow 上找到的（例如 subprocess.call 和 os.popen/popen2/ popen3) 但它们似乎都不起作用。

我知道使用`scrapy server`你需要在scrapy项目目录中启动scrapyd所以我也尝试使用它来调用它`twistd -ny extras/scrapyd.tac`

对我来说，运行scrapy 命令或通过Python 调用twistd 的最佳方式是什么？

# c# - 为 XmlReader 设置相对文件引用

> ID：14324956
> 
> 赞同：1
> 
> 时间：2013-01-14T19:11:14.487
> 
> 标签：c#, asp.net

今天为了测试我正在使用：

```
XmlReader ProductDoc = XmlReader.Create(@"c:\inetpub\wwwroot\data\xml\foo\bar.xml", settings); 
```

我需要使它更加相对而不是完全限定的名称，但似乎无法找到使其工作的方法。

我真的没有太多访问 web.config 文件的权限，所以不想去那里。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:16:59.873

这就是你需要的

```
Server.MapPath("/data/xml/foo/bar.xml") 
```

文档[在此处](http://msdn.microsoft.com/en-us/library/ms524632%28VS.90%29.aspx)

# mysql - 检测 MySQL 中未使用的函数

> ID：14324958
> 
> 赞同：0
> 
> 时间：2013-01-14T19:11:28.093
> 
> 标签：mysql, database, stored-functions

我最近完成了一个 MySQL 数据库的开发。在开发过程中，我创建了多个实际在各种视图中使用的存储函数。在试验过程中，版本函数的数量不断增加，现在我想删除那些在视图中实际未使用的函数。

有没有快速列出所有这些功能的方法？

# java - GUI程序不工作

> ID：14324959
> 
> 赞同：1
> 
> 时间：2013-01-14T19:11:29.080
> 
> 标签：java, swing, user-interface, jscrollpane

我一直在开发一个应用程序，您可以在其中设置包含项目的类别列表，然后将其制成文本文件。但是我为它制作的 GUI 并不能完全正常工作。我认为错误位于名为 Cat（或“添加类别”）的 JMenuItem 中，或者位于我显示类别的方式中（Update() 方法）。它应该要求一个名称，创建一个以此命名的类别并将其显示在 JScrollPane 中，但什么也没有出现。这是代码：

```
public class GUIBuilder {
    public JFrame frame;
    public JPanel LeftPanel;
    public JPanel RightPanel;
    public JScrollPane scroll;
    public JMenuBar bar;
    public JMenu File;
    public JMenu Add;
    Inventory inv;

    public void go() {
        frame = new JFrame();

        scroll = new JScrollPane();

        bar = new JMenuBar();
        File = new JMenu("File");
        Add = new JMenu("Add...");
        bar.add(File);
        bar.add(Add);

        JMenuItem Save = new JMenuItem(new AbstractAction("Save") {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent arg0) {

            }
        });
        JMenuItem Load = new JMenuItem(new AbstractAction("Load") {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent arg0) {

            }
        });
        JMenuItem Generate = new JMenuItem(new AbstractAction("Generate Text File") {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent arg0) {

            }
        });
        File.add(Save);
        File.add(Load);
        File.add(Generate);

        JMenuItem Cat = new JMenuItem(new AbstractAction("Add Category") {
            private static final long serialVersionUID = 1L;
            JFrame Cat;

            public void actionPerformed(ActionEvent arg0) {
                Cat = new JFrame("Add Category");
                final JTextField name = new JTextField(15);
                JButton Submit = new JButton(new AbstractAction("Submit") {
                    private static final long serialVersionUID = 1L;

                    public void actionPerformed(ActionEvent arg0) {
                        String n = name .getText();
                        if (n != null) {
                            inv.addCategory(new Category(n));
                            pullThePlug();
                            GUIBuilder.this.Update();
                        }
                    }
                });
                Cat.setLayout(new BorderLayout());
                Cat.add(name, BorderLayout.CENTER);
                Cat.add(Submit, BorderLayout.SOUTH);
                Cat.setSize(250, 150);
                Cat.setVisible(true);
            }
            public void pullThePlug() {
                WindowEvent wev = new WindowEvent(Cat, WindowEvent.WINDOW_CLOSING);
                Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
            }
        });
        JMenuItem item = new JMenuItem(new AbstractAction("Add Item") {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent arg0) {

            }
        });
        Add.add(Cat);
        Add.add(item);

        frame.setJMenuBar(bar);
        frame.setSize(500, 800);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.add(scroll);

        inv = new Inventory();
    }

    public void Update() {
        for (int i = 0; i < inv.categories.size(); i++) {
            Category cat = inv.categories.get(i);
            JPanel p = new JPanel();
            JTextPane name = new JTextPane();
            name.setText(cat.getName());
            scroll.add(p);
        }
    }
} 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:16:46.063

您需要将您的添加`JTextPane name`到您的`JPanel p`.

（在我看来，您还缺少一种`main`可以构造 a 的方法`GUIBuilder`- 但也许那是在您的问题中没有显示的另一个文件中？）

* * *

另外，如果你创建一个空的`JScrollPane`，你需要通过添加组件`scrollpane.getViewport().add(yourcomponent);`。

您还需要一些布局管理。最简单的方法（可能也是你打算做的）是：

```
 public void Update() {
        JPanel p = new JPanel();
        for (int i = 0; i < inv.categories.size(); i++) {
            Category cat = inv.categories.get(i);
            JTextPane name = new JTextPane();
            p.add(name);        
            name.setText(cat.getName());                
        }
        scroll.getViewport().add(p);       
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:54:53.800

在`inv`显示`JFrame`.
你也应该交换语句

```
frame.setVisible(true);
frame.add(scroll); 
```

到

```
frame.add(scroll);
frame.setVisible(true); 
```

因此，添加您的`JScrollpane`. 在您的组件已经显示时添加组件是非常棘手的。
我真的建议你用这个语句结束你的方法，`frame.setVisible(true);`甚至将这个语句提取到一个自己的方法中，该方法在`go()`完成时被调用。
...好吧，那么最好重命名`go()`为`init()`，但那是另一回事；）。在我看来，将构建和显示框架分开是一种很好的做法。
**编辑：** 重新阅读您的代码后，我看不到您`JScrollpane`的填写位置。你在哪里添加一些东西？
您还应该阅读[Java 编码约定](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)，因为属性不应以大写字母开头。这将大大提高您代码的可读性。

# python - python - 如何根据分号、空格和逗号的任意组合在python中拆分字符串？

> ID：14324962
> 
> 赞同：0
> 
> 时间：2013-01-14T19:11:41.480
> 
> 标签：python, split

我想拆分一个由分号、空格和逗号的任意组合分隔的字符串。例如：

输入：`"Jan,Feb;Mar Apr, May;"`

输出：`["Jan","Feb","Mar","Apr","May"]`

因为该`split()`方法将完全匹配您在其中指定的内容，这不是我需要的，所以我不能`split()`在这里简单地使用方法。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T19:14:37.007

使用`re.split`：

```
>>> [s for s in re.split(r'[ ,;]', '"Jan","Feb";"Mar" "Apr", "May";') if s]
['"Jan"', '"Feb"', '"Mar"', '"Apr"', '"May"'] 
```

`if s`过滤掉空字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:16:23.650

`re.findall`这里看起来不错：

```
In [168]: strs='"Jan","Feb";"Mar" "Apr", "May";'

In [169]: import re

In [170]: re.findall(r'\w+',strs)
Out[170]: ['Jan', 'Feb', 'Mar', 'Apr', 'May'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T19:16:48.843

通常正确的答案是正则表达式，但碰巧你*可以*`split`用方法和解决这个特殊问题`replace`：

```
>>> s = "one two,three;four"
>>> s.replace(',',' ').replace(';',' ').split()
['one', 'two', 'three', 'four'] 
```

* * *

我认为[Ashwini 的解决方案](https://stackoverflow.com/users/846892/ashwini-chaudhary)是最好的——与其尝试删除所有分离的杂物，不如搜索有用的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:19:17.957

还有一个优雅的非正则表达式解决方案，使用`str.translate`后跟`str.split`

```
>>> in_str = '"Jan","Feb";"Mar" "Apr", "May";'
>>> in_str.translate(None,",; ")[1:-1].split("\"\"")
['Jan', 'Feb', 'Mar', 'Apr', 'May'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:16:16.843

试试这个：

```
import re

c = b'"Jan","Feb";"Mar" "Apr", "May"';
needle = r'("[^, ;]*")'
r = re.compile(needle)

months = r.findall(c)
print months 
```

# c# - 构造函数可以创建自己的对象吗？

> ID：14324963
> 
> 赞同：3
> 
> 时间：2013-01-14T19:11:45.457
> 
> 标签：c#

我正在使用以下语句。

```
IEnumerable<Stuff> output = list.Entities.Select(
  element => new Stuff(element)); 
```

有时该*元素*不需要包含在内，因此我添加了一个条件。

```
IEnumerable<Stuff> output = list.Entities.Where(
  element => IsDecent(element)).Select(
    element => new Stuff(element)); 
```

现在，我突然想到，跳过检查器并导致创建新的*Stuff*以产生 nada （返回*null*或根本不返回任何内容）可能会更简洁，因此省略了不雅元素的添加。或者也许在满足这样的条件时自动调用析构函数。当然，检查需要在其他地方执行，即在*Stuff*的构造函数中。

1.  可能吗？
2.  推荐吗？
3.  应用广泛吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:14:52.653

您应该使用您现在正在使用的代码。从可用性的角度来看， A`Where`和 a`Select`要*好得多*，然后 a`Select`有时将项目映射到`null`（或其他一些“非真实项目”占位符），而这些项目原本不应该存在。您只需要摆脱或忽略那些在路上的空项目。

你在做两件事；将项目过滤到满足条件的项目，然后将每个项目映射到另一种类型的项目。您的代码应该反映您正在做这两件事的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:19:15.547

不，除了从 new 构造的对象之外，不可能返回任何东西。您可以从构造函数中抛出，从而阻止创建特定对象，但必须处理此类异常。

我不建议在创建对象时尝试阻止构造/销毁对象 - 通常预期对象的构造会成功。不按照其他答案中的建议调用构造函数是更清洁的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:17:12.740

> 可能吗？

对的，这是可能的。但需要条件验证（Where 子句将转换为 Select 子句）

> 推荐吗？

我不能推荐或不推荐。但从代码审查的角度来看，它看起来有问题和狡猾。

> 应用广泛吗？

未见广泛应用。[空对象模式](http://sourcemaking.com/design_patterns/null_object)更为人所知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:18:55.890

1.  是的。
2.  No'ish（取决于一些额外的超超特殊情况，这**可能**是最好的方法）。
3.  没见过。不过，很酷的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:59:36.353

既然你问了，请注意`new Nullable<int>()`返回`null`。

但我想重复[一下 Servy 所说](https://stackoverflow.com/a/14325000/284795)的 - 你当前的代码很好。不要过度复杂化！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-14T19:20:22.893

我认为你所拥有的可能是最好的。但是如果你打算组合它们，你可以使用这样的扩展方法：

```
static class Extensions {
    public static IEnumerable<U> SelectWhere<T, U>(
                    this IEnumerable<T> @this, 
                    Predicate<T> filter, 
                    Func<T, U> map) 
    {
        foreach (T element in @this) {
            if (filter(element)) yield return map(element);
        }
    }
} 
```

你会这样使用它：

```
list.Entities.SelectWhere(IsDecent, element => new Stuff(element)) 
```

# html - NodeJs：表达弄乱渲染的html代码

> ID：14324964
> 
> 赞同：0
> 
> 时间：2013-01-14T19:11:46.197
> 
> 标签：html, node.js, express

> **可能重复：**
> [ExpressJS：如何输出漂亮的 html](https://stackoverflow.com/questions/5276892/expressjs-how-to-output-pretty-html)

我使用 Express 作为 node.js 的框架。事实上，我没有任何错误或麻烦，除了一个小问题，当我右键单击浏览器并点击“查看页面源代码”选项时，我所有的 HTML 代码看起来都一团糟，并不是所有的缩进，实际上我think 是一行，例如：

```
<html><head><title>Trade</title><link rel="stylesheet" href="/css/bootstrap/bootstrap.css"/><link rel="stylesheet" href="/css/trade.css"/><link rel="stylesheet" href="/css/bootstrap/bootstrap-responsive.css"/></head><body>... 
```

代替

```
<html>
  <head>
    <title>Trade</title>
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.css"/>
    <link rel="stylesheet" href="/css/trade.css"/>
    <link rel="stylesheet" href="/css/bootstrap/bootstrap-responsive.css"/>
  </head>
 <body> 
```

我知道这不是一个真正的问题，但知道我的代码看起来像这样一团糟，让我夜不能寐;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:21:26.277

只需使用

```
app.configure('development', function(){
  app.locals.pretty = true;
}); 
```

看到[这个](https://stackoverflow.com/questions/5276892/expressjs-how-to-output-pretty-html)相关的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:16:02.737

您的来源都在一条线上没有问题。

它仍然会呈现为有效的 DOM。

它是一行的原因可能是由于使用 express 创建页面的方式。

# python - scikit-learn 支持/计划了哪些非负线性模型？

> ID：14324976
> 
> 赞同：3
> 
> 时间：2013-01-14T19:12:55.207
> 
> 标签：python, linear-regression, scikit-learn

Scikit-learn 提供了大量有用的线性模型。但是，我正在研究一个具有非负约束的线性问题（即解决方案变量应该是非负的）。

我想使用 scikit-learn，但我看到的唯一可以支持当前非负性的函数是 Lasso()，通过 'positive=true' 标志。LassoCV() 或 lasso_path() 不支持非负性。

scikit-learn 中是否有其他非负线性模型可用？有计划在不久的将来包括这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-09T23:13:14.203

当前稳定版本的 scikit-learn 支持和中的kwarg `positive`（尽管文档字符串中似乎没有提到后者）。非负使用示例：[https ://github.com/scikit-learn/scikit-learn/blob/master/examples/linear_model/plot_lasso_coordinate_descent_path.py](https://github.com/scikit-learn/scikit-learn/blob/master/examples/linear_model/plot_lasso_coordinate_descent_path.py)`LassoCV``lasso_path``lasso_path`

和相关的`ElasticNet`CV 版本也支持非负选项。

# mysql - 如何限制来自特定主机的查询

> ID：14324979
> 
> 赞同：0
> 
> 时间：2013-01-14T19:13:06.047
> 
> 标签：mysql, grant

如何确保 'anil' 不能从任何名为 '%desk%' 的机器上运行命令？

```
mysql> show grants for anil;

+------------------------------------------------------------------------------------+
| Grants for anil@%                                                                  |
+------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'anil'@'%'                                                   |
| GRANT SELECT, CREATE TEMPORARY TABLES, LOCK TABLES ON `production`.* TO 'anil'@'%' |
+------------------------------------------------------------------------------------+

mysql> revoke all privileges, grant option from 'anil'@'%desk%';
ERROR 1269 (HY000): Can't revoke all privileges for one or more of the requested users

mysql> revoke usage on *.* from 'anil'@'%desk%';
ERROR 1141 (42000): There is no such grant defined for user 'anil' on host '%desk%'

mysql> revoke SELECT, CREATE TEMPORARY TABLES, LOCK TABLES ON `production`.* from 'anil'@'%desk%';
ERROR 1141 (42000): There is no such grant defined for user 'anil' on host '%desk%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:23:28.610

MySQL 只允许您*授予*权限，它没有能力授予*除*特定主机之外的所有主机，或者以您尝试的方式基于主机名拒绝权限。完成此操作的唯一方法是仅向用户授予可接受的主机名的权限。该`REVOKE`命令仅*删除*以前的`GRANT`ed 权限。

如果您的网络碰巧被分成子域 [即：*.desk.company.tld 和 *.serv.company.tld]，您应该能够授予`'anil'@'%.serv.company.tld'`或类似的子网：`'anil'@'192.168.1.%'`.

# c++ - 用于 64 位处理器的 libodbc makefile

> ID：14324983
> 
> 赞同：2
> 
> 时间：2013-01-14T19:13:11.957
> 
> 标签：c++, sql, 64-bit

我面临为 64 位处理器安装 libodbc 的问题。win32 安装文档已经可用，但在使用 x64 平台编译时不适用。在这种情况下，编译器会抱怨，因为它找不到文件“config.h”。我想这可以用 nmake 生成，但对于 x64，该过程尚不清楚。有没有人已经面临这个问题并设法解决它？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T21:32:31.820

You might be able to use sqlExe. It is a command line based utility that uses ODBC to connect to any database.

It is open source and the code is available at: [http://sourceforge.net/projects/sqlexe/](http://sourceforge.net/projects/sqlexe/)

You could compile it for your 64 bit system.

# javascript - 如何知道 TOP 和 LEFT 根据旋转度数使用什么？

> ID：14324984
> 
> 赞同：0
> 
> 时间：2013-01-14T19:13:18.323
> 
> 标签：javascript, html, math, rotation

伙计们，我的数学真的很差，我该怎么做：

我正在旋转一个div：

`document.getElementById('pig').style.webkitTransform = 'rotate('180 + 'deg' + ')';`

并用按键移动它，但我需要根据我的度数对角移动它。

*   考虑到 0 度，我应该只将我的 div 向右移动
*   考虑到 180 度，我应该只将我的 div 向左移动
*   考虑到 90 度，我应该只将我的 div 移到顶部
*   考虑到 270 度，我应该只将我的 div 移动到底部

我需要使用什么魔法才能知道我应该穿多少

`document.getElementById('pig').style.top`

我应该穿多少

`document.getElementById('pig').style.left`

如果不清楚，请问我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:24:27.173

将度数转换为[弧度](http://en.wikipedia.org/wiki/Radian)：

```
var deg = /* whatever */;
var rad = deg * (Math.PI/180); 
```

然后使用[`Math.sin()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/sin)and[`Math.cos()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/cos)分别获取垂直和水平分量：

```
 var yComponent = Math.sin(rad);
 var xComponent = Math.cos(rad); 
```

# c# - 为什么 Array 不是泛型类型？

> ID：14324987
> 
> 赞同：70
> 
> 时间：2013-01-14T19:13:34.240
> 
> 标签：c#, generics, types, language-design

`Array`声明：

```
public abstract class Array
    : ICloneable, IList, ICollection, IEnumerable { 
```

我想知道为什么不是：

```
public partial class Array<T>
    : ICloneable, IList<T>, ICollection<T>, IEnumerable<T> { 
```

1.  如果将其声明为泛型类型会出现什么问题？

2.  如果它是泛型类型，我们是否还需要非泛型类型，或者它可以派生自`Array<T>`? 如

    ```
    public partial class Array: Array<object> { 
    ```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-22T01:17:44.963

# 历史

> *如果数组成为泛型类型会出现什么问题？*

回到 C# 1.0，他们主要从 Java 复制了数组的概念。泛型在当时并不存在，但创建者认为它们很聪明，并复制了 Java 数组所具有的损坏的协变数组语义。这意味着您可以在没有编译时错误（而是运行时错误）的情况下完成这样的事情：

```
Mammoth[] mammoths = new Mammoth[10];
Animal[] animals = mammoths;            // Covariant conversion
animals[1] = new Giraffe();             // Run-time exception 
```

在 C# 2.0 中引入了泛型，但没有协变/逆变泛型类型。如果数组是通用的，那么你就不能`Mammoth[]`转换为`Animal[]`，这是你以前可以做的事情（即使它被破坏了）。所以使数组泛型会破坏*很多*代码。

只有在 C# 4.0 中才引入了接口的协变/逆变泛型类型。这使得一劳永逸地修复损坏的数组协方差成为可能。但同样，这会破坏很多现有代码。

```
Array<Mammoth> mammoths = new Array<Mammoth>(10);
Array<Animal> animals = mammoths;           // Not allowed.
IEnumerable<Animals> animals = mammoths;    // Covariant conversion 
```

* * *

# 数组实现通用接口

> *为什么数组不实现泛型和`IList<T>`接口？`ICollection<T>``IEnumerable<T>`*

多亏了一个运行时技巧，每个数组`T[]` *都会*`IEnumerable<T>`自动实现。¹从[类文档](http://msdn.microsoft.com/en-us/library/czz5hkty)：`ICollection<T>``IList<T>`^([`Array`](http://msdn.microsoft.com/en-us/library/czz5hkty))

> 一维数组实现`IList<T>`、`ICollection<T>`、`IEnumerable<T>`和泛型接口。这些实现在运行时提供给数组，因此，泛型接口不会出现在 Array 类的声明语法中。`IReadOnlyList<T>``IReadOnlyCollection<T>`

* * *

> *你能使用数组实现的接口的所有成员吗？*

不，文档继续以下评论：

> 将数组强制转换为这些接口之一时要注意的关键是添加、插入或删除元素的成员 throw `NotSupportedException`。

那是因为（例如）`ICollection<T>`有一个`Add`方法，但你不能向数组中添加任何东西。它会抛出异常。这是 .NET Framework 中的另一个早期设计错误示例，它会在运行时向您抛出异常：

```
ICollection<Mammoth> collection = new Mammoth[10];  // Cast to interface type
collection.Add(new Mammoth());                      // Run-time exception 
```

而且由于`ICollection<T>`不是协变的（出于显而易见的原因），您不能这样做：

```
ICollection<Mammoth> mammoths = new Array<Mammoth>(10);
ICollection<Animal> animals = mammoths;     // Not allowed 
```

当然，现在还有协变[`IReadOnlyCollection<T>`接口](http://msdn.microsoft.com/en-us/library/hh881542.aspx)，它也由引擎盖下的数组实现¹，但它只包含`Count`所以它的用途有限。

* * *

# 基类`Array`

> *如果数组是泛型的，我们还需要非泛型`Array`类吗？*

在早期，我们做到了。所有数组都通过它们的基类 实现非泛型[`IList`](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)和 接口。这是为所有数组提供特定方法和接口的唯一合理方式，也是基类的主要用途。您会看到枚举的相同选择：它们是值类型，但从;继承成员。以及继承自.[`ICollection`](http://msdn.microsoft.com/en-us/library/system.collections.icollection.aspx)[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)`Array``Array``Enum``MulticastDelegate`

> *`Array`既然支持泛型，是否可以删除非泛型基类？*

是的，如果泛型类存在的话，所有数组共享的方法和接口都可以定义在泛型`Array<T>`类上。然后你可以编写，例如，`Copy<T>(T[] source, T[] destination)`而不是`Copy(Array source, Array destination)`使用某些类型安全的额外好处。

但是，从面向对象编程的角度来看，最好有一个通用的非泛型基类`Array`，该基类可用于引用*任何*数组，而不管其元素的类型如何。就像如何`IEnumerable<T>`继承自`IEnumerable`（仍然在某些 LINQ 方法中使用）。

> *`Array`基类可以派生自吗`Array<object>`？*

不，这会产生循环依赖：`Array<T> : Array : Array<object> : Array : ...`. 此外，这意味着您可以将*任何*对象存储在数组中（毕竟，所有数组最终都将继承自 type `Array<object>`）。

* * *

# 未来

> *是否可以添加新的泛型数组类型`Array<T>`而不会过多影响现有代码？*

不可以。虽然可以使语法适合，但不能使用现有的数组协方差。

数组是 .NET 中的一种特殊类型。它甚至有自己的通用中间语言指令。如果 .NET 和 C# 设计者决定走这条路，他们可以制作`T[]`语法糖`Array<T>`（就像`T?`语法糖一样`Nullable<T>`），并且仍然使用在内存中连续分配数组的特殊指令和支持。

但是，您将失去将数组`Mammoth[]`转换为它们的基本类型之一的能力`Animal[]`，类似于您无法`List<Mammoth>`转换为的方法`List<Animal>`。但是数组协方差无论如何都被破坏了，并且有更好的选择。

> *数组协方差的替代方案？*

所有数组都实现`IList<T>`. 如果`IList<T>`接口被制作成适当的协变接口，那么您可以将任何数组`Array<Mammoth>`（或任何列表）转换为`IList<Animal>`. 但是，这需要`IList<T>`重写接口以删除所有可能更改底层数组的方法：

```
interface IList<out T> : ICollection<T>
{
    T this[int index] { get; }
    int IndexOf(object value);
}

interface ICollection<out T> : IEnumerable<T>
{
    int Count { get; }
    bool Contains(object value);
} 
```

（请注意，输入位置上的参数类型不能是`T`因为这会破坏协方差。但是，对于and来说`object`已经足够了，当传递一个不正确类型的对象时会返回。实现这些接口的集合可以提供它们自己的泛型和.)`Contains``IndexOf``false``IndexOf(T value)``Contains(T value)`

然后你可以这样做：

```
Array<Mammoth> mammoths = new Array<Mammoth>(10);
IList<Animals> animals = mammoths;    // Covariant conversion 
```

甚至还有很小的性能改进，因为在设置数组元素的值时，运行时不必检查分配的值是否与数组元素的实际类型兼容。

* * *

# 我的刺

`Array<T>`如果这种类型在 C# 和 .NET 中实现，结合上面描述的真正的协变`IList<T>`和`ICollection<T>`接口，我尝试了它的工作原理，并且它工作得非常好。我还添加了不变量`IMutableList<T>`和`IMutableCollection<T>`接口来提供我的新接口`IList<T>`和`ICollection<T>`接口所缺乏的变异方法。

我围绕它构建了一个简单的集合库，您可以[从 BitBucket 下载源代码和编译的二进制文件](https://bitbucket.org/Virtlink/m42-collections/)，或者安装 NuGet 包：

> [**M42.Collections**](https://www.nuget.org/packages/M42.Collections/) – 比内置 .NET 集合类具有更多功能、特性和易用性的专用集合。

* * *

¹ ) .Net 4.5 中的数组`T[]`通过其基类实现`Array`：[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx), [`IList`](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx), [`ICollection`](http://msdn.microsoft.com/en-us/library/system.collections.icollection.aspx), [`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx), [`IStructuralComparable`](http://msdn.microsoft.com/en-us/library/system.collections.istructuralcomparable.aspx), [`IStructuralEquatable`](http://msdn.microsoft.com/en-us/library/system.collections.istructuralequatable.aspx); 并默默地通过运行时：[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx), [`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx), [`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx), [`IReadOnlyList<T>`](http://msdn.microsoft.com/en-us/library/hh192385.aspx), 和[`IReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/hh881542.aspx).

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-15T19:15:31.247

**【更新，新的见解，到现在感觉还少了点什么】**

关于前面的回答：

*   数组是协变的，就像其他类型一样。您可以实现类似 'object[] foo = new string[5];' 与协方差，所以这不是原因。
*   兼容性可能是不重新考虑设计的原因，但我认为这也不是正确的答案。

但是，我能想到的另一个原因是，数组是内存中线性元素集的“基本类型”。我一直在考虑使用 Array<T>，您可能还想知道为什么 T 是一个对象以及为什么这个“对象”甚至存在？在这种情况下，T[] 正是我认为 Array<T> 的另一种语法，它与 Array 协变。由于类型实际上不同，我认为这两种情况相似。

请注意，基本对象和基本数组都不是面向对象语言的要求。C++ 就是一个完美的例子。没有这些基本构造的基本类型的警告是无法使用反射处理数组或对象。对于您习惯于制作 Foo 的对象，这会使“对象”感觉自然。实际上，没有数组基类也同样不可能执行 Foo ——这并不常用，但对于范式同样重要。

因此，让 C# 没有 Array 基类型，但具有丰富的运行时类型（特别是反射）是 IMO 不可能的。

所以更多细节......

**数组在哪里使用以及为什么它们是数组**

像数组这样基本的东西有一个基本类型用于很多事情，并且有充分的理由：

*   **简单数组**

是的，我们已经知道人们使用`T[]`，就像他们使用 一样`List<T>`。两者都实现了一组通用接口，确切地说：`IList<T>`、`ICollection<T>`、`IEnumerable<T>`、`IList`和。`ICollection``IEnumerable`

如果您知道这一点，您可以轻松地创建一个数组。我们也都知道这是真的，这并不令人兴奋，所以我们继续……

*   **创建集合。**

如果你深入研究 List，你最终会得到一个 Array - 确切地说：一个 T[] 数组。

那为什么呢？虽然您可以使用指针结构（LinkedList），但它并不相同。列表是连续的内存块，并通过成为连续的内存块来获得速度。这有很多原因，但简单地说：处理连续内存是处理内存的最快方式 - 在你的 CPU 中甚至有指令可以使它更快。

细心的读者可能会指出这样一个事实，即您不需要一个数组，而是 IL 理解并可以处理的“T”类型元素的连续块。换句话说，你可以在这里去掉 Array 类型，只要你确保 IL 可以使用另一种类型来做同样的事情。

请注意，有值和类类型。为了保持最佳性能，您需要将它们存储在您的块中......但对于编组它只是一个要求。

*   **编组。**

编组使用所有语言都同意进行通信的基本类型。这些基本类型是字节，整数，浮点数，指针......和数组。最值得注意的是数组在 C/C++ 中的使用方式，如下所示：

```
for (Foo *foo = beginArray; foo != endArray; ++foo) 
{
    // use *foo -> which is the element in the array of Foo
} 
```

基本上，这会在数组的开头设置一个指针并递增指针（使用 sizeof(Foo) 字节），直到它到达数组的末尾。在 *foo 处检索元素 - 它获取指针 'foo' 指向的元素。

再次注意，有值类型和引用类型。你真的不想要一个 MyArray ，它只是将所有装箱的东西存储为一个对象。实现 MyArray 变得更加棘手。

一些细心的读者可能会在此处指出您实际上并不需要数组，这是真的。您需要类型为 Foo 的连续元素块 - 如果它是值类型，则它必须作为（字节表示）值类型存储在块中。

*   **多维数组**

所以更多......那么多维呢？显然规则不是那么非黑即白，因为突然间我们不再拥有所有的基类：

```
int[,] foo2 = new int[2, 3];
foreach (var type in foo2.GetType().GetInterfaces())
{
    Console.WriteLine("{0}", type.ToString());
} 
```

强类型刚刚消失，你最终得到了集合类型`IList`，`ICollection`和`IEnumerable`。嘿，那我们应该如何获得尺寸呢？当使用 Array 基类时，我们可以这样使用：

```
Array array = foo2;
Console.WriteLine("Length = {0},{1}", array.GetLength(0), array.GetLength(1)); 
```

...但是如果我们看一下类似的替代方案`IList`，则没有等价物。我们将如何解决这个问题？这里应该介绍一个`IList<int, int>`？这肯定是错误的，因为基本类型是 just `int`。怎么样`IMultiDimentionalList<int>`？我们可以做到这一点，并用当前在 Array 中的方法填充它。

*   **数组具有固定大小**

您是否注意到有重新分配数组的特殊要求？这与内存管理有关：数组是如此低级，以至于它们不了解增长或收缩是什么。在 C 中，您将为此使用“malloc”和“realloc”，并且您确实应该实现自己的“malloc”和“realloc”，以了解为什么确切地具有固定大小对于您直接分配的*所有事物都很重要。*

如果你看一下，只有几件事以“固定”大小分配：数组、所有基本值类型、指针和类。显然我们处理数组的方式不同，就像我们处理基本类型的方式不同一样。

**关于类型安全的旁注**

那么，为什么首先需要这些所有这些“接入点”接口呢？

在所有情况下，最佳做法是为用户提供类型安全的访问点。这可以通过比较如下代码来说明：

```
array.GetType().GetMethod("GetLength").Invoke(array, 0); // don't... 
```

像这样编码：

```
((Array)someArray).GetLength(0); // do! 
```

类型安全使您在编程时马虎。如果使用得当，编译器会发现错误，而不是在运行时发现错误。我不能强调这是多么重要 - 毕竟，您的代码可能根本不会在测试用例中被调用，而编译器将始终评估它！

**把它们放在一起**

所以......让我们把它们放在一起。我们想要：

*   强类型数据块
*   它的数据连续存储
*   IL 支持以确保我们可以使用酷炫的 CPU 指令，使其快速流血
*   公开所有功能的通用接口
*   类型安全
*   多维性
*   我们希望将值类型存储为值类型
*   和其他任何语言一样的编组结构
*   和一个固定的大小，因为这使得内存分配更容易

对于任何集合来说，这都是相当低级别的要求……它需要以某种方式组织内存以及转换为 IL/CPU……我想说它被认为是基本类型是有充分理由的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-14T19:15:41.597

兼容性。Array 是一种历史类型，可以追溯到没有泛型的时代。

`Array`今天，有，然后`Array<T>`，然后是特定的类是有意义的；）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-14T19:31:32.743

> 因此，我想知道为什么不是：

原因是 C# 的第一个版本中没有泛型。

> 但我无法弄清楚自己会出现什么问题。

问题是它会破坏大量使用`Array`该类的代码。C# 不支持多重继承，所以像这样的行

```
Array ary = Array.Copy(.....);
int[] values = (int[])ary; 
```

会坏掉的。

如果 MS 从头开始​​重新制作 C# 和 .NET，那么制作泛型类可能没有问题`Array`，但事实并非如此。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T16:28:40.163

除了人们提到的其他问题之外，尝试添加泛型`Array<T>`还会带来一些其他困难：

*   即使今天的协方差特性从引入泛型的那一刻起就已经存在，它们对于数组来说还是不够的。设计用于对 a 进行排序的例程`Car[]`将能够对 a 进行排序`Buick[]`，即使它必须将数组中的元素复制到 type 的元素中`Car`，然后再将它们复制回来。将元素从 type 复制`Car`回 a`Buick[]`并不是真正的类型安全，但它很有用。可以定义一个协变数组一维数组接口，以使排序成为可能[例如，通过包含一个 `Swap(int firstIndex, int secondIndex) 方法]，但是很难做出像这样灵活的东西数组是。

*   虽然一个`Array<T>`类型可能适用于 a `T[]`，但在泛型类型系统中没有办法为任意数量的下标定义一个包含`T[]`, `T[,]`, `T[,,]`,等的族。`T[,,,]`

*   .net 中没有办法表达两种类型应该被视为相同的概念，这样一个类型的变量`T1`可以被复制到一个类型`T2`，反之亦然，两个变量都持有对同一个对象的引用。使用`Array<T>`类型的人可能希望能够将实例传递给期望的代码`T[]`，并从使用的代码中接受实例`T[]`。如果旧样式的数组不能在使用新样式的代码之间传递，那么新样式的数组将更像是一个障碍而不是一个特性。

可能有一些方法可以让类型系统按其`Array<T>`应有的方式运行，但这种类型的行为方式与其他泛型类型完全不同，因为已经有一种类型实现了所需的行为（即`T[]`），尚不清楚定义另一个会带来什么好处。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-22T02:37:17.703

正如大家所说 - original`Array`是非泛型的，因为它在 v1 中出现时没有泛型。下面推测...

要使“Array”通用（现在有意义），您可以

1.  保留现有`Array`并添加通用版本。这很好，但是“数组”的大多数用法都涉及随着时间的推移而增长，这很可能是因为更好地实现了相同的概念`List<T>`。此时添加“不增长的元素的顺序列表”的通用版本看起来不是很吸引人。

2.  删除非泛型`Array`并替换为`Array<T>`具有相同接口的泛型实现。现在您必须为旧版本编译代码以使用新类型而不是现有`Array`类型。虽然框架代码有可能（也很可能很难）支持这种迁移，但总是有很多代码是由其他人编写的。

    作为`Array`非常基本的类型，几乎所有现有代码（包括具有反射和编组到本机代码和 COM 的自定义代码）都使用它。因此，即使版本之间的微小不兼容（.Net Framework 的 1.x -> 2.x）的价格也会非常高。

因此，结果`Array`类型将永远存在。我们现在有`List<T>`作为通用等价物来使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T23:28:38.197

也许我遗漏了一些东西，但除非数组实例被强制转换或用作 ICollection、IEnumerable 等。那么你不会用 T 数组获得任何东西。

数组速度很快，并且已经是类型安全的，不会产生任何装箱/拆箱开销。

# ruby-on-rails - 为父模型设置值

> ID：14324988
> 
> 赞同：0
> 
> 时间：2013-01-14T19:13:34.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型，场地和音乐会。音乐会属于一个场地，场地有很多音乐会。在我的表单中，我使用自定义设置器设置音乐会场地，表单如下所示：

```
<%= form_for @concert do |f| %>      
      <%= f.label :venue_name, "Venue" %>
      <%= f.text_field :venue_name %> 
```

然后在我的模型中：

```
 def venue_name=(name)
    self.venue = Venue.find_or_create_by_name(name) if name.present?
  end 
```

问题是，如果正在创建模型，我还想向模型添加地址。这可能与孩子的形式？是否可以将名称和地址同时传递给设置器？

编辑：

正如下面建议的评论，我已经开始使用accepts_nested_attributes_for。Ryan Bates 在这里有一个很棒的截屏视频：[http](http://railscasts.com/episodes/196-nested-model-form-revised) ://railscasts.com/episodes/196-nested-model-form-revised或者文档也很好。

我之前曾为此使用过accept_nested，但由于这是belongs_to方面的问题，所以我很挣扎。现在我已经回去了，我的修复是，对于这个例子，不是做 @concert.venue.build，belongs_to 方面的语法是 @concert.build_venue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:20:50.963

如果您向您的用户展示他们可以在您的模型上添加由逗号、at 符号、分号等分隔的名称和地址，您可以使用正则表达式将它们分开并分别插入它们中的每一个。

```
def venue_name=(name)
  venue = name.split(',')[0] # The comma (,) can be any symbol
  address = name.split((',')[1]
  # Insert venue
  # Insert address
end 
```

这是丑陋的方式。

# delphi - TDownloadURL 无法从 HTTPS 下载

> ID：14324989
> 
> 赞同：6
> 
> 时间：2013-01-14T19:13:46.343
> 
> 标签：delphi, https, delphi-xe2, pascal, tfilestream

我一直在尝试通过 TDownloadURL 类创建（TFileStream）PDF，但我在从 URL 获取文件/流时确实遇到了麻烦，特别是如果 URL 是 HTTPS。

我不确定我是否清楚，但我会发布一个片段，以便帮助理解：

```
implementation
var pdfStreamed: TDownloadUrl;
var fileStream : TFileStream;
  procedure generateStream;
  begin
    pdfStreamed:= TDownLoadURL.Create(nil);
    with pdfStreamed do
      begin
        URL := 'https://farm9.staticflickr.com/8327/8106108098_08e298f0d9_b.jpg'; //stream;
        FileName := 'D:\';
        ExecuteTarget(nil);
//        Execute;
      end;
  end; 
```

URL 属性在 HTTP 和 HTTPS 中都存在！但它给我一个错误：异常类异常，带有消息“下载 URL 时出错：[https](https://farm9.staticflickr.com/8327/8106108098_08e298f0d9_b.jpg) ://farm9.staticflickr.com/8327/8106108098_08e298f0d9_b.jpg ”。

可以指出我做错了什么吗？我为此搜索了很多，但找不到任何有效且简单的东西！

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T19:49:24.770

`TDownloadURL`只是微软[`URLDownloadToFile()`](http://msdn.microsoft.com/en-us/library/ms775123%28v=VS.85%29.aspx)功能的一个薄包装，它支持 HTTPS 就好了。

`TDownloadURL`不幸的是，没有告诉你为什么`URLDownloadToFile()`失败。但是，我可以看到您将`FileName`属性设置为只是一个文件夹路径，但您需要将其设置为要创建以保存下载数据的目标文件的完整路径和文件名。IOW，改变这个：

```
FileName := 'D:\'; 
```

对此：

```
FileName := 'D:\8106108098_08e298f0d9_b.jpg'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:44:02.277

使用 Remy 的更改文件名的答案来指定正确的保存位置，但要修复，请将 ExecuteTarget 行更改为类似

`ExecuteTarget(Self);`

我刚刚用这两个更改尝试了您的代码，它成功下载了图像。本质上，该组件需要一个句柄来引用，从[这里](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/63d56d14-e2c6-44b0-8102-4db45c8aed9a)

# android - GPS 地理定位应用程序在 Android 的 Phonegap 中不起作用

> ID：14324992
> 
> 赞同：0
> 
> 时间：2013-01-14T19:14:21.963
> 
> 标签：android, cordova, geolocation

我正在创建一个获取用户位置的应用程序。这些应用程序使用 3G 可以正常工作，当我禁用 3G 并想仅使用 GPS 运行应用程序时，问题就出现了，该应用程序甚至无法启动。

我有的代码：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
}

function onSuccess(position) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                        'Longitude: '          + position.coords.longitude             + '<br />' +
                        'Altitude: '           + position.coords.altitude              + '<br />' +
                        'Accuracy: '           + position.coords.accuracy              + '<br />' +
                        'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                        'Heading: '            + position.coords.heading               + '<br />' +
                        'Speed: '              + position.coords.speed                 + '<br />' +
                        'Timestamp: '          + new Date(position.timestamp)          + '<br />';
}

function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T19:15:26.713

地理位置并不意味着您将使用 GPS。默认情况下，您将使用网络位置。您必须启用高精度！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:17:04.417

确保您在清单中的权限包括 Position.FINE，以便您的应用程序将被允许使用 gps 接收器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T19:23:36.503

转到您的 Android 清单并检查您是否有权执行此操作。

# php - 如何在 preg_replace() 函数中使用 substr() 函数？

> ID：14324996
> 
> 赞同：6
> 
> 时间：2013-01-14T19:14:30.897
> 
> 标签：php, regex, html-parsing

这是我到目前为止所拥有的，但无论我尝试什么，我`album-content`都不会被截断`substr()`。

```
$gallery = preg_replace('/(<div class="album-content">)(.*?)(<\/div>)/e', "'$1' . substr(\"$2\", 0, 50) . '$3'", $gallery); 
```

更新：

原来我的班级名称不正确，而我的正则表达式似乎确实有效。我只需要再做一次 str_replace() 来取消转义输出。

```
$gallery = preg_replace('/(<div class="album-desc">)(.*?)(<\/div>)/e', "'$1' . substr(\"$2\", 0, 50) . '$3'", $gallery);
$gallery = str_replace('\"album-desc\"', '"album-desc"', $gallery); 
```

修改前的输出：

```
<a href="..." class="album">
    <div class="album-content"><p class="album-title">Album 1</p>
        <div class="album-desc"><p>This will be truncated by substr().</p></div>
    </div>
    <img src="..." />
</a> 
```

无论如何，谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:16:46.237

采用`preg_replace_callback()`

```
$replace = preg_replace_callback('/(asd)f/i', function($matches) {
    $matches[1] = substr($matches[1], 0, 2);

    return $matches[1];
}, 'asdf'); 
```

[完整的文档](http://php.net/manual/en/function.preg-replace-callback.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:17:05.350

它必须是

```
..., "'$1'" . substr("$2", 0, 50) . "'$3'", ... 
```

使用字符串的 substr“外部”。

# javascript - 阅读在 Firefox/IE 中工作的 cookie，而不是 Chrome

> ID：14324998
> 
> 赞同：0
> 
> 时间：2013-01-14T19:14:37.233
> 
> 标签：javascript

我有一个代码可以更改样式表并将它们保存在 Firefox 和 IE 中的 cookie 中，但它在 Chrome 中不起作用。

这是我正在使用的代码：

```
<head>
<link href="default.css" title="default" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="javascript.js"></script>

</head>
<body>
<ul id="dropdown">
<li> Choose theme
    <ul> 
        <li id="stylesheet1" > <a href="#"> Default </a></li>
        <li id="stylesheet2" > <a href="#"> Theme 1 </a></li>
        <li id="stylesheet3" > <a href="#"> Theme 2 </a></li>
        <li id="stylesheet4" > <a href="#"> Theme 3 </a></li>
    </ul>
</li>
</ul> 

</body> 
```

javascript.js 包含以下内容：

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  } 
}

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheet();
  createCookie("style", title, 365);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title);

function initate()
{

document.getElementById("stylesheet1").onclick = function() {
   setActiveStyleSheet("default");
   return false
};
document.getElementById("stylesheet2").onclick = function() {
   setActiveStyleSheet("theme1");
   return false
};
document.getElementById("stylesheet3").onclick = function() {
   setActiveStyleSheet("theme2");
   return false
};
document.getElementById("stylesheet4").onclick = function() {
   setActiveStyleSheet("theme3");
   return false
}

}

window.onload = initate; 
```

它确实可以在 Chrome 中更改样式表，但是当我重新加载页面时，它不会像在 IE 和 Firefox 中那样保留所选的样式表。我不知道为什么它在 Chrome 中不起作用。我是 javascript 新手，使用的大部分代码不是由我编写的，而是从不同的地方获取的，所以我不太了解其中的大部分内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:39:51.593

您正在覆盖以前的 onclick 处理程序，只有第二个正在执行：

```
document.getElementById("stylesheet1").onclick = function() {
    createCookie(T1, style, 7);
};

...

var style1 = document.getElementById("stylesheet1");

style1.onclick = function () { 
  setActiveStyleSheet("default"); 
  return false;
}; 
```

从我对使用 jQuery 的评论来看，你的整个`initiate`函数，目前大约 50 行，可以用这种方式重写，大约 7 行：

```
$("li a").click(function () {
   # Turn our text ("Theme 1") into the name of the sheet ("theme1")
   var sheetName = $(this).text().toLowerCase().replace(/ /g, "");

   createCookie(T1, sheetName, 7)
   setActiveStyleSheet(sheetName); 
}); 
```