# StackOverflow 问答 14058000-14058999

# ruby-on-rails - 如何在 Rails 中使用 Cloudinary 将直接上传字段与模型相关联？

> ID：14058000
> 
> 赞同：5
> 
> 时间：2012-12-27T16:38:34.247
> 
> 标签：ruby-on-rails, image-uploading, cloudinary

使用 Cloudinary 和他们的 Carrierwave 插件，我可以在我的视图中编写一个表单，将图像上传到他们的云并将其绑定到一个名为的模型属性`picture`，如下所示：

```
<%= form_for(@post) do |post_form| %>
  <%= post_form.hidden_field(:picture_cache) %>
  <%= post_form.file_field(:picture) %>
<% end %> 
```

这行得通。但是我不知道如何在遵循他们[在 Rails 中直接上传的文档](http://cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery)时将属性绑定到模型。他们的示例使用未绑定到模型的 form_tag：

```
<%= form_tag(some_path, :method => :post) do  %>
  <%= cl_image_upload_tag(:image_id) %>
    ...
<%= end %> 
```

我正在寻找一些类似的例子`<%= post_form.some_upload_method(:picture) %>`。其他人是否有机会直接上传他们的模型并知道我在寻找什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:08:24.823

您可以使用以下语法：

```
<%= post_form.cl_image_upload(:picture) %> 
```

# mysql - 导入数据库

> ID：14058001
> 
> 赞同：0
> 
> 时间：2012-12-27T16:38:34.553
> 
> 标签：mysql, database, dreamweaver, cpanel

我有一个从服务器的 myphpadmin 导出的 .sql 文件。我想在我没有 cPanel 访问权限的另一台服务器上使用它。

我有数据库名称、数据库用户名、数据库密码，但没有主机名。

我使用 Dreamweaver 进行连接，并且成功。但是接下来我该怎么办？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:40:56.353

等等，你没有“主机”？那么，您是如何通过 Dreamweaver 进行连接的呢？

如果此数据库用户具有执行此类任务的适当权限，您可以尝试以编程方式执行此操作，请检查以下问题： [通过 Java 以编程方式导入 (mysql) 数据库转储](https://stackoverflow.com/questions/1955268/importing-a-mysql-database-dump-programmatically-through-java)

# servicestack - 服务堆栈蛋白质跟踪器教程的问题（不会启动元数据）

> ID：14058002
> 
> 赞同：1
> 
> 时间：2012-12-27T16:38:39.403
> 
> 标签：servicestack

服务堆栈蛋白质跟踪器教程的问题（不会启动元数据）

我的主要问题是当我启动网站并转到 /metadata 时，什么也没有出现

这是网络配置中的新条目

```
 <system.webServer> 
    <handlers> 
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" /> 
    </handlers> 
  </system.webServer> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:59:01.870

看起来问题是缺少 IIS。:(

将配置更改为此，现在我看到了元数据

```
 <system.web>
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
    </httpHandlers>
  </system.web> 
```

很高兴继续教程的下一部分:)

# boost-python - 扩展受保护的函数 boost::python

> ID：14058005
> 
> 赞同：0
> 
> 时间：2012-12-27T16:38:43.773
> 
> 标签：boost-python, extending-classes

我有 C++ 代码（不是我的，所以它不可编辑）。问题在于扩展受保护的函数和类。

```
#include "ExtraClass.h"
...
MyClass::MyClass()
{
...
protected:
    bool Func{}
    ExtraClass m_Foo;
...
} 
```

**我需要在 Python 中访问 m_Foo 方法和受保护的函数，例如 Func(** )

```
from MyClass import  *
bar = MyClass()
bar.m_Foo.Run() //something like this 
```

但有一个编译器错误：*error: 'ExtraClass MyApp::m_Foo' is protected*

PS。如果我更改为 public 保护（仅供尝试）。我只能在只读模式下访问 *m_Foo*：

```
class_<MyClass>("MyClass", init<>()) 
    .def_readonly("m_Foo", &MyClass::m_Foo) 
```

更改为 *def_readwrite* 会导致编译器错误：

> /boost_1_52_0/boost/python/data_members.hpp:64:11：错误：'<em>中的'operator='不匹配（（（ExtraClass）c）+（（sizetype）（（const boost :: python :: detail::member `<ExtraClass, MyClass`>*)this)->boost::python::detail::member `<ExtraClass, MyClass`>::m_which)) = d'</p>

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:39:41.260

通常，如果要包装受保护的成员，则需要从使成员公开的父级派生一个（包装器）类。（您可以简单地说`using Base::ProtectedMember`在一个`public`部分中公开它而不是包装它）。然后，您将正常包装它。像这样：

```
class MyWrapperClass : public MyClass {
  public:
    using MyClass::m_Foo;
}; 
```

在这个特殊的例子中（实际上还没有完全出炉），如果你想访问 m_Foo，那么你需要包装 ExtraClass。假设您有 readwrite 的问题可能是 ExtraClass 的实现（它可能不提供您可以使用的 operator=）。

# facebook - 使用 FB Graph API 获取 facebook 事件

> ID：14058010
> 
> 赞同：1
> 
> 时间：2012-12-27T16:38:55.273
> 
> 标签：facebook, facebook-graph-api

> **可能重复：**
> [我们能在时间线上访问生活事件吗？](https://stackoverflow.com/questions/8642638/will-we-be-able-to-access-life-events-on-a-timeline)

我想使用 facebook api 获取事件，例如使用 facebook graph API 的结婚纪念日等。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:44:07.760

请参阅 Facebook 图形 API。 [https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# javascript - 隐藏与删除 DOM 元素

> ID：14058013
> 
> 赞同：19
> 
> 时间：2012-12-27T16:38:58.890
> 
> 标签：javascript, jquery, css, optimization

## 隐藏与删除

处理 DOM 元素、隐藏或删除的最佳方法是什么？假设环境可以多次改变。元素可以有点击回调或其他事件回调。

**隐藏**

什么时候隐藏什么是最好的？如果单击一个按钮隐藏多个项目，您可以一个一个隐藏，也可以创建 css 规则来做到这一点。

*选项1：*

```
<style>
.superContent{/*...*/}

.superContent.noEdit .occultable{
    display:none;
}
</style>

<form class=”superContent” action=”...”&gt;
    <label>Name</label>
    <input type=”text” />
    <input type=”submit” class=”occultable” value=”send”/>
</form>

<button id=”hideAll”&gt;Edit</button>
<script type=”text/javascript”&gt;
    $(“#hideAll”).click(function(){
        $(“.superContent”).toggleClass(“noEdit”);
    });
</script> 
```

[http://jsfiddle.net/p8mU8/](http://jsfiddle.net/p8mU8/)

另一种选择是只隐藏所需的项目（这些可能很少或很多）：

*选项 2：*

```
<script type=”text/javascript”&gt;
    $(“#hideAll”).click(function(){
        $(“.occultable”).toggle();
    });
</script> 
```

[http://jsfiddle.net/JAmF9/](http://jsfiddle.net/JAmF9/)

* * *

**消除**

要修改 DOM，您还可以删除不需要的项目并稍后重新插入它们。

*选项 3：*

```
<form class="superContent">
    <label>Name</label>
    <input type="text" />
    <input id="sendbutton" type="submit" class="occultable" value="send"/>
</form>

<button id="hideAll">Edit</button>​

<script type=”text/javascript”&gt;
$("#hideAll").click(function(){
    if( $(".superContent").find("#sendbutton").length>0 ){
        $(".superContent").find("#sendbutton").remove();
    }
    else{
        $(".superContent").append('<input id="sendbutton" type="submit" class="occultable" value="send"/>');
    }
});​
</script> 
```

[http://jsfiddle.net/Yj5Aw/](http://jsfiddle.net/Yj5Aw/)

这些只是小例子。假设 UI 包含大量元素。你认为最好的选择是什么？哪个内存泄漏更少，性能更高？

有一些 javascript 框架，如 kendo-ui，可以删除元素。jQueryUI 更喜欢隐藏项目，但小部件 Tab sortable 会创建用户临时拖动的选项卡。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-27T16:41:50.373

很明显你知道

*   当您想重新显示元素时，隐藏是最好的。
*   当您不需要再次使用这些元素时，删除是最好的。

当您隐藏元素然后重新显示它们时，这些元素不会丢失所有的回调和数据，特别是在使用 jQuery 时。

当您删除不必要的元素时，您会减少为您的页面分配的内存，尽管在大多数情况下这不会是一个显着的变化。

# url - 如何创建自定义的 Web 域？

> ID：14058014
> 
> 赞同：0
> 
> 时间：2012-12-27T16:39:06.290
> 
> 标签：url, dns

例如，直接来自 Stack Overflow：

> [http://winterba.sh/](http://winterba.sh/)

那是怎么回事？我以前见过它，一直想知道它是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:41:09.110

.sh 是圣赫勒拿域名后缀。类似于美国的 .us。

[http://en.wikipedia.org/wiki/.sh](http://en.wikipedia.org/wiki/.sh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:40:43.663

这里没有什么特别的......而不是使用顶级域`.com`（如在 stackoverflow **.com**中），他们使用的是顶级域`.sh`。

就这样。只要您想要作为域的单词以某些现有顶级域的字母结尾，您就可以使用这样的域。

# .htaccess - .htaccess 文件 - 重写规则不适用于新主机

> ID：14058018
> 
> 赞同：1
> 
> 时间：2012-12-27T16:39:17.127
> 
> 标签：.htaccess, mod-rewrite, rewrite

我一直在使用（123-reg）托管的根目录中使用以下内容，现在我已经搬到 Godaddy 并且这些规则似乎不再起作用。我已经联系了他们的支持，他们说他们遵循 linux mod-rewrite 规则的默认设置，他们认为我的脚本有问题......？

这是我正在使用的：

```
 RewriteEngine On
    RewriteRule ^fishing/$ fishing.php [L] 
```

我在 .htaccess 中有更多规则，但会选择这个作为示例。

当我使用 123-reg 时，我可以简单地输入[http://domain.com/fishing](http://domain.com/fishing)，它会加载 fishing.php 文件。

在 Godaddy 上，这直接到 404。任何人都可以看到这里发生了什么明显的事情吗？

有关信息：如果我输入完整路径，它可以正常工作：http: [//domain.com/fishing.php](http://domain.com/fishing.php)但这不是我想要的。

任何人都可以确认这是一个标准的重写规则并且应该使用 apache mod-rewrite 规则的默认值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:06:45.683

事实证明，由于某种原因，您必须添加：

```
 Options -Multiviews 
```

到您的 .htaccess 文件以使其正常工作。

如果 GoDaddy 的技术人员知道这些信息，那将会很有帮助。我在互联网上的许多论坛上都看到过关于 godaddy 的类似问题。希望这对其他人有帮助。

# c# - DependencyProperty.RegisterAttached 所需的命名约定

> ID：14058021
> 
> 赞同：1
> 
> 时间：2012-12-27T16:39:55.677
> 
> 标签：c#, .net, xaml, windows-runtime, winrt-xaml

我已经看过关于 的官方[MSDN](http://msdn.microsoft.com/en-us/library/ms597495.aspx)文档`DependencyProperty.RegisterAttached`，但是，它似乎并没有表明[这个问题暗示的这个必需的命名约定](http://msdn.microsoft.com/en-us/library/ms597495.aspx)

我知道代码必须是这样的：

```
public static readonly DependencyProperty HandleKeyPressEventProperty =
    DependencyProperty.RegisterAttached("HandleKeyPressEvent",
                                        typeof(bool),
                                        typeof(MyDataGrid),
                                        new UIPropertyMetadata(true));
public static bool GetHandleKeyPressEvent(DependencyObject obj)
{
    return (bool)obj.GetValue(HandleKeyPressEventProperty);
}
public static void SetHandleKeyPressEvent(DependencyObject obj, bool value)
{
    obj.SetValue(HandleKeyPressEventProperty, value);
} 
```

在这种情况下，是否需要 Get 和 Set 方法来保留该名称？附加财产是否必须以“财产”结尾？另外，我可以让我的代码变成这样：

```
public static readonly DependencyProperty HandleKeyPressEventProperty =
    DependencyProperty.RegisterAttached("FooEvent", //change registered name
                                        typeof(bool),
                                        typeof(MyDataGrid),
                                        new UIPropertyMetadata(true));
public static bool GetHandleKeyPressEvent(DependencyObject obj)
{
    return (bool)obj.GetValue(HandleKeyPressEventProperty);
}
public static void SetHandleKeyPressEvent(DependencyObject obj, bool value)
{
    obj.SetValue(HandleKeyPressEventProperty, value);
} 
```

谁能弄清楚这个“神奇”的命名方案以及我必须遵循什么样的标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:57:08.017

我不确定是否需要其中的所有内容，但这也是我使用的格式，我认为这是我随处可见的格式。如果您更改其中的任何内容，即使它仍然有效 - 您将引入混乱和无政府状态！:)

这是[我的代码片段](http://bit.ly/xyzzersnippets)中的一个版本，基于修订后[的 Dr. WPF 的片段](http://drwpf.com/blog/2007/11/17/my-wpf-code-snippets/)：

```
#region IsDirty
/// <summary>
/// IsDirty Attached Dependency Property
/// </summary>
public static readonly DependencyProperty IsDirtyProperty =
    DependencyProperty.RegisterAttached(
        "IsDirty",
        typeof(bool),
        typeof(AnimationHelper),
        new PropertyMetadata(false, OnIsDirtyChanged));

/// <summary>
/// Gets the IsDirty property. This dependency property 
/// indicates blah blah blah.
/// </summary>
public static bool GetIsDirty(DependencyObject d)
{
    return (bool)d.GetValue(IsDirtyProperty);
}

/// <summary>
/// Sets the IsDirty property. This dependency property 
/// indicates blah blah blah.
/// </summary>
public static void SetIsDirty(DependencyObject d, bool value)
{
    d.SetValue(IsDirtyProperty, value);
}

/// <summary>
/// Handles changes to the IsDirty property.
/// </summary>
/// <param name="d">
/// The <see cref="DependencyObject"/> on which
/// the property has changed value.
/// </param>
/// <param name="e">
/// Event data that is issued by any event that
/// tracks changes to the effective value of this property.
/// </param>
private static void OnIsDirtyChanged(
    DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    bool oldIsDirty = (bool)e.OldValue;
    bool newIsDirty = (bool)d.GetValue(IsDirtyProperty);
}
#endregion 
```

# r - 导出包括置信区间的线性回归结果

> ID：14058023
> 
> 赞同：0
> 
> 时间：2012-12-27T16:40:02.450
> 
> 标签：r, export, regression, linear-regression

嘿，我怎样才能导出用于制作我为下面的线性回归模型生成的图表的结果表。

```
d <- data.frame(x=c(200110,86933,104429,240752,255332,75998,
                    204302,97321,342812,220522,110990,259706,65733),
                y=c(200000,110000,165363,225362,313284,113972,
                    137449,113106,409020,261733,171300,344437,89000))

lm1 <- lm(y~x,data=d)

p_conf1 <- predict(lm1,interval="confidence")

nd <- data.frame(x=seq(0,80000,length=510000))
p_conf2 <- predict(lm1,interval="confidence",newdata=nd)

plot(y~x,data=d,ylim=c(-21750,600000),xlim=c(0,600000)) ## data
abline(lm1) ## fit
matlines(d$x,p_conf1[,c("lwr","upr")],col=2,lty=1,type="b",pch="+")

matlines(nd$x,p_conf2[,c("lwr","upr")],col=4,lty=1,type="b",pch="+") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:25:54.433

仍然不完全确定您想要什么，但这似乎是合理的：

```
dat1 <- data.frame(d,p_conf1)
dat2 <- data.frame(nd,y=NA,p_conf2)
write.csv(rbind(dat1,dat2),file="linpredout.csv") 
```

它包括`x`, `y`（等于观察值或`NA`对于未观察到的点）、预测值`fit`和`lwr`/`upr`边界。

**编辑**：修正错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:50:47.950

这将返回一个矩阵，其中包含构建置信区间所需的一些信息：

```
> coef(summary(lm1))
                Estimate   Std. Error   t value     Pr(>|t|)
(Intercept) 21749.037058 2.665203e+04 0.8160369 4.317954e-01
x               1.046954 1.374353e-01 7.6177997 1.037175e-05 
```

任何关于线性回归的文本都应该有置信区间的公式。您可能需要根据您使用的公式计算一些辅助量。predict 的代码是可见的......只需在控制台输入：

```
predict.lm 
```

并且不要忘记置信区间与预测区间不同。

# coldfusion - Coldfusion：简单的 cfgridupdate 验证

> ID：14058024
> 
> 赞同：3
> 
> 时间：2012-12-27T16:40:22.280
> 
> 标签：coldfusion, cfgrid, cfgridcolumn

我尝试使用一个非常**简单**的CFGRID（带有 CFGRIDUPDATE）但不允许 NULLS。

```
<cfset strWarning= "">  

<cfif IsDefined("FORM.gridEntered")> 
    <cfif FORM.myName EQ '' OR FORM.myURL EQ ''>
        <cfset strWarning= "Error: Form fields cannot be blank">
    <cfelse>
        <cfgridupdate grid="gridSomething" 
          dataSource="qryTSQL" tableName="tblName" keyOnly="Yes"> 
    </cfif> 
</cfif> 

<cfoutput>#strWarning#</cfoutput><br />

<cfform> 
<cfgrid name="gridSomething" query="qryTSQL" 
       selectMode="Edit" format="HTML">  
    <cfgridcolumn name = "myID" display="No"> 
    <cfgridcolumn name = "myName">
    <cfgridcolumn name = "myURL"> 
</cfgrid> 

<cfinput type="submit" name="gridEntered"> 
```

我得到的错误是 -**错误诊断：**复杂对象类型无法转换为简单值。该表达式已请求一个变量或一个中间表达式结果作为一个简单值。但是，结果不能转换为简单值。简单值是字符串、数字、布尔值和日期/时间值。查询、数组和 COM 对象是复值的示例。错误的最可能原因是您尝试将复杂值用作简单值。例如，您尝试在 cfif 标记中使用查询变量。

*我想我正在考虑这个理想的解决方案。*

谢谢。

**编辑：更新的错误消息**

错误诊断：在 FROM 中未定义元素 MYURL。

```
Form scope - struct

FIELDNAMES  GRIDENTERED,__CFGRID__CFFORM_1__GRIDSOMETHING
GRIDENTERED Submit Query
GRIDSOMETHING.MYID  Form scope - array 
1   1001 

GRIDSOMETHING.MYURL Form scope - array 
1   /test_d.cfm 

GRIDSOMETHING.ORIGINAL.MYID Form scope - array 
1   1001 

GRIDSOMETHING.ORIGINAL.MYURL    Form scope - array 
1   /changed.cfm 

GRIDSOMETHING.ROWSTATUS.ACTION  Form scope - array 
1   U 

__CFGRID__CFFORM_1__GRIDSOMETHING   __CFGRID__EDIT__=2 MYID Y MYURL Y 1 U 1001 1001 /test_d.cfm /changed.cfm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:40:35.877

网格的工作方式与标准`FORM`字段不同。由于网格包含多行数据，[CF 创建新/更改值的数组](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7acf.html)。每个网格列一个，即

```
 FORM.gridname.columnName 
```

要确定特定列的*任何*值是否为空，您需要遍历该列的数组并检查每个值：

```
 <cfset updateCount = arrayLen(FORM.gridSomething.myName) />
    <cfloop from="1" to="#updateCount#" index="x">
         <cfset nameValue = trim( FORM.gridSomething.myName[x] ) />
         <cfset urlValue  = trim( FORM.gridSomething.myURL[x]) ) />

         <!--- one or both of the values is empty --->
         <cfif not len( nameValue ) OR not len( urlValue )>
             ... empty value found. do something here ....

         </cfif>
    </cfloop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-10T03:44:27.167

将此函数添加到您的代码中并将其传递给 FORM 范围，如下所示；在页面上或 CFC 的工作方式相同！清除在简单网格更新中阻塞空白列的某些 CF 版本的错误

```
 <cffunction name="cleanGridUpdate" >
        <cfargument name="FORM" >
        <cfloop collection="#FORM#" item="thisOne">
        <cftry>
            <cfset thisDeep = arrayLen(FORM[thisOne])>
                <cfloop index="x" from="1" to="#thisDeep#">
                    <cfif len(FORM[thisOne][x])lt 1>
                        <cfset FORM[thisOne][x] = javaCast( "null", 0 )>
                    </cfif>
                </cfloop>               
            <cfcatch>
                <cfset cat=1>   
            </cfcatch>
          </cftry>
          </cfloop>
         <cfreturn form>
     </cffunction>

    <cfif isDefined('URL.action') AND URL.action eq 'gridUpdate'>
       <cfset cleanGridUpdate(FORM)>
       <cfgridupdate grid="#URL.table#" table="#URL.table#" datasource="your_DS" 
        keyonly="yes" > 
    </cfif>

    <cfform action="##?action=gridUpdate&table=cheesePuffs" method="post">
       <cfgrid name='cheesePuffs' format='HTML'/>
       <cfinput name="submit" type="submit" value>
    </cfform> 
```

# parsing - 杯子解析器中的移位/减少冲突

> ID：14058027
> 
> 赞同：2
> 
> 时间：2012-12-27T16:40:39.397
> 
> 标签：parsing, cup

我写了这个语法：

```
/* Precedences */ 
precedence left UMINUS;
precedence left ID;

Expr ::=      ID:e              
    | NUM:e             

    | Expr:e1 TIMES Expr:e2     

    | LP Expr:e RP          

    ;

Call ::= ID:id LP  ExprComma:args RP  ; 
```

当我尝试在这个程序上运行解析器时：

```
weirdAverage(5) 
```

（标记是：id lp num（即 expr）rp）

我得到：

```
 Syntax error in line 1 '(' 
```

所以，我尝试删除这个：

```
 precedence left ID; 
```

现在我得到一个错误：

```
 [java] Warning : *** Shift/Reduce conflict found in state #16
 [java]   between Expr ::= ID (*) 
 [java]   and     Call ::= ID (*) LP ExprComma RP 
 [java]   under symbol LP
 [java]   Resolved in favor of shifting.
 [java] Warning : *** Shift/Reduce conflict found in state #79
 [java]   between Expr ::= ID (*) 
 [java]   and     Call ::= ID (*) LP ExprComma RP 
 [java]   under symbol LP
 [java]   Resolved in favor of shifting.
 [java] Error : *** More conflicts encountered than expected -- parser generation aborted 
```

# java - Java堆空间异常，无法删除从服务器收到的文件

> ID：14058028
> 
> 赞同：1
> 
> 时间：2012-12-27T16:40:41.637
> 
> 标签：java

我已经编写了下面的代码，但是在调用了将近 150 次之后，它抛出了“线程中的异常“Thread-245”java.lang.OutOfMemoryError：Java 堆空间”问题只是出现在 (b = new byte[1024 * 1024] ;) Java 代码：

```
class Client implements Runnable {
private Socket socket;
private BufferedInputStream bufin = null;
private BufferedOutputStream bufout = null;
String path;
private byte[] b;

Client(Socket socket, String path) {
    this.socket = socket;
    this.path = path;
}

@Override
public void run() {
    try {
        bufin = new BufferedInputStream(socket.getInputStream());
        bufout = new BufferedOutputStream(new FileOutputStream(path));

        b = new byte[1024 * 1024];
        int num = 0;
        while ((num = bufin.read(b)) != -1)
            bufout .write(b, 0, num);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            bufin.close();
            bufout .close();
            b = null;
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

}

我试图更清楚地描述这个问题。是这样的：我写了我的ServerSocket，当客户端发送请求时，服务器然后将请求放在一个新线程中，如下所示：

```
public void start() {
      boolean started = false;
      try {
              ServerSocket ss = new ServerSocket(8888);
              started = true;
              while (started) {
              String path = "C:/Pic/"+ new SimpleDateFormat("yy-MM-dd-HH_mm_ss_ms").format(new Date()) + ".jpg";
              Socket s = ss.accept();
              new Thread(new Client(s, path)).start();
             }
       } catch (IOException e) {
              e.printStackTrace();
       } 
```

}

在这种情况下，服务器将接收来自任何客户端的请求......还有第二个问题，我认为该问题将导致 Java 堆空间异常，即当服务器收到图片时，图片无法从中删除关闭服务器之前的磁盘，当我删除它时，它**显示“操作无法完成，因为文件在 Java(TM) 平台 SE 二进制文件中打开”**。而我已经关闭了客户端线程中的输入输出。现在我无法找到问题的根源，1.为什么会发生 Heap Exception anr 2.为什么在服务器运行期间文件无法从磁盘中删除。非常感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:19:34.270

我怀疑堆耗尽不允许程序在异常发生后正常运行，然后在 finally 块中，使流保持打开状态。我建议你在打开流之前更改程序以分配内存块；此外，要关闭 finally 块中的流，我建议您使用示例中所述的 IOUtils commons-io 类：

[悄悄靠近](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.OutputStream%29)

```
byte[] data = "Hello, World".getBytes();

OutputStream out = null;
try {
 out = new FileOutputStream("foo.txt");
 out.write(data);
 out.close(); //close errors are handled
} catch (IOException e) {
 // error handling
} finally {
 IOUtils.closeQuietly(out);
} 
```

这使您可以确保在 finally 块中关闭所有流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:03:07.097

由于每个线程都在创建一个 1MB 的数组缓冲区，因此您的内存不足。您想查看最大堆大小是多少（这取决于几个变量）并在命令行增加最大大小，例如：java -Xmx1024M myclass.class

另外，你说你开始了 150 个客户。为什么他们不收集垃圾？也许所有 150 个线程都立即启动并且所有线程都在同时获取该内存？我建议使用线程池来执行这些操作，这样您就可以限制正在运行的客户端数量。

对于您保存文件的服务器的问题（您无法删除它）是因为您遇到了堆内存错误。当你得到这个时，所有的赌注都结束了。服务器仍然持有对该文件的引用，并且 bufout.close() 可能没有工作。

# python - 'window_maximize()' 不是 Selenium 中 WebDriver 的属性

> ID：14058034
> 
> 赞同：0
> 
> 时间：2012-12-27T16:41:07.923
> 
> 标签：python, selenium, selenium-webdriver

我正在使用 Selenium，对于此任务，我需要在页面加载后最大化浏览器，问题是我收到以下错误并且似乎无法理解如何解决它。

```
AttributeError: 'WebDriver' object has no attribute 'window_maximize' 
```

这是我正在测试的代码

```
from pyvirtualdisplay import Display
from ftplib import FTP
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait # available since 2.4.0
from selenium.webdriver.common.keys import Keys

#initialize HIDDEN display
display = Display(visible=0, size=(1366, 768))
display.start()

browser = webdriver.Firefox()

browser.get('http://youtube.com/')
browser.window_maximize();
... 
```

不是`window_maximize`的属性`browser`吗？

我正在使用 python 和 Selenium Server 2.28

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T06:45:25.463

您可以使用`browser.maximize_window()`. 我认为问题出在错误的函数名上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:23:37.083

好的，在寻找如何使用之后，`window_maximize`我发现我可以使用它`browser.set_window_size(800, 600)`。

我测试过，它工作正常。将浏览器设置为`browser.set_window_position(0, 0)`

答案在这里找到了[如何使用 Selenium 2-WebDriver 的 Python 绑定来最大化浏览器窗口？](https://stackoverflow.com/questions/8075297/how-to-maximize-a-browser-window-using-the-python-bindings-for-selenium-2-webdri)

# prolog - Prolog未定义的程序错误？

> ID：14058036
> 
> 赞同：2
> 
> 时间：2012-12-27T16:41:24.943
> 
> 标签：prolog

最近刚开始学习 Prolog，我不知道为什么会出现这个错误。

这是 .pl 文件中的“代码”：

```
bigger(elephant, horse).
bigger(horse, donkey).
bigger(donkey, dog).
bigger(donkey, monkey).

isbigger(X, Y) :- bigger(X, Y).
isbigger(X, Y) :- bigger(X, Z),print(Z),print(’ ’) ,isbigger(Z, Y). 
```

每当我尝试检查哪种动物更大时，我都会收到此错误：

```
 1 ?- bigger(donkey, monkey).
  ERROR: toplevel: Undefined procedure: bigger/2 (DWIM could not correct goal) 
```

请问有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-03T15:46:40.243

你需要一个我认为的断言：

```
assert(bigger(donkey, monkey)). 
```

我自己今天才开始，这个花了我一段时间才弄清楚。

祝你好运！

# android - Android SDK 工具 rev21 和 ACRA

> ID：14058037
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:41:30.607
> 
> 标签：android

我将 Android SDK 工具更新为 rev21，将 Android SDK 平台工具更新为 rev16。现在我的这个代码 id 不起作用。

```
 @Override
public void onCreate()
{
    ACRA.init(this);
    ErrorReporter.getInstance().setReportSender(new LocalReportSender(getApplicationContext())));
    super.onCreate();
} 
```

错误：

```
12-27 10:39:37.100: E/AndroidRuntime(5608): java.lang.NoClassDefFoundError: org.acra.ACRA 
```

出了什么问题？我确实检查了外部 jar 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:46:52.660

你得到一个`NoClassDefFoundError`因为你的 ACRA jar 文件在运行时不可用。

为了让它在运行时可用，您必须在 java 构建路径中检查 jar 文件上的复选框，如下所示：

![在此处输入图像描述](../Images/91f321c449ae6cde410f06affabc44dd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:57:00.107

将 ACRA jar 放在`libs/`项目目录中。这将保证它在应用程序（classes.dex）中编译。

# autohotkey - 为什么这段代码不起作用

> ID：14058038
> 
> 赞同：0
> 
> 时间：2012-12-27T16:41:37.470
> 
> 标签：autohotkey

这个有效：

```
CapsLock::( 
```

但是这个没有：

```
CapsLock::(
+CapsLock::CapsLock 
```

当我按下大写锁定按钮时我想要一个支架，但我也想要在按住 shift 的同时按下它时的原生大写锁定动作！我将使用“\”键做同样的事情（但使用相反的括号），但也不起作用。

我正在使用自动键 v1.0.48.05

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:51:06.017

这对我有用...

```
+CapsLock::CapsLock
$CapsLock::( 
```

顺便说一句，我在没有 shift 的情况下访问 ( 和 ) 是：

```
:?*:[[::(
:?*:]]::) 
```

在这里我按 [ 或 ] 两次得到 ( 或 )

# python - Python - 返回数组中的最大数。错误

> ID：14058040
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:41:40.373
> 
> 标签：python, arrays, numbers, max

我有一个 Python 脚本，它通过 FTP 连接到一个网站，并列出了该网站上程序的当前版本号。我创建了一个数组来保存版本号，直到脚本从数组中挑选出最大的数字并告诉我它是什么。例如，我的数组通常如下所示：

```
array = ['1.04','1.6','1.14'] 
```

所以我用...

```
max_in_array = max(array) 
```

返回数组中的最大值。

不幸的是，我收到的最大数字是“1.6”，而事实上，“1.14”是最新的版本号。我能想到的唯一另一件事就是切断“1”。从数组列表中，以便我收到：

```
array = ['04','6','14'] 
```

然后将其粘贴回去以获取完整的版本号。但由于该网站包含许多版本，例如“2.02.04”和“1.14.01”，我不知道如何有效地做到这一点。

任何帮助将不胜感激！

* * *

```
os.chdir("./gnu/"+_package)

pope = len(_package) + 1 ## Cuts off name of program
char = len(_package) - 12 ## Cuts off extension ".tar.gz"

for tok in glob.glob("*.tar.gz"):
    token.append(tok) ## Appends name to array
    bork = max(token) ## Gets max version number (sometimes useless)
    print bork
    char = len(bork) - 7

for _gnu in glob.glob("*.tar.gz"): ## Finds only matches with .tar.gz
    _gnuapp.append(_gnu[pope:char]) ## Appends version number to array
    spoke = max(_gnuapp) ## Gets max version number
    _ver = _package + "-" + spoke + ".tar.gz" ## Compiles the package name, ver #, and extension
    _down(_user, _ver, _package) ## Opens information in download module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:45:08.760

**编辑：**抱歉，起初误解了这个问题 - 请参阅[此答案](https://stackoverflow.com/questions/1714027/version-number-comparison)以了解有关比较版本号的一些方法。在那里取第二个答案（建议使用`distutils.version`'s `StrictVersion`），你可以试试这个：

```
In [3]: from distutils.version import StrictVersion

In [4]: s = ['1.04','1.6','1.14', '2.02.04', '1.14.01']

In [5]: max(s, key=StrictVersion)
Out[5]: '2.02.04' 
```

* * *

需要注意的一件事是，您实际上是在比较字符串而不是数字。您可以做的一件事是确保您自己比较数字（不管您以后想要对项目做什么）是为`max`函数提供一个键：

```
In [1]: s = ['1.04','1.6','1.14']

In [2]: max(s, key=float)
Out[2]: '1.6' 
```

由于您要比较浮点值（而不是字符串），因此这会比较字符串的浮点等效项。但是，最好在继续之前将它们转换为浮点数：

```
In [4]: s = ['1.04','1.6','1.14']

In [5]: s_floats = [float(x) for x in s]

In [6]: s_floats
Out[7]: [1.04, 1.6000000000000001, 1.1399999999999999] 
```

然后，您可以按预期使用 max ：

```
In [9]: max(s_floats)
Out[9]: 1.6000000000000001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:05:14.113

您需要依次比较主要版本和次要版本。Max 函数接受一个关键参数，您可以使用它来修改可比较的，通过将字符串转换为主要和次要版本的元组

```
>>> max(array, key = lambda e: map(int, e.split(".")))
'1.14' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:49:41.543

您可以使用一个列表，其中每个程序版本都将存储为另一个列表，如下所示：

列表 = [[1,14],[1,6],[1,4]]

其中每个版本组件都是内部列表的一部分。

然后你可以这样排序：

```
sortedlist = sorted(sorted(sorted(list, key=lambda x: x[2]), key=lambda x: x[1]),key=lambda x: x[0]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:15:46.070

在版本号中，您必须播放不同的拆分号，然后先按 mayor_version 比较，然后按 minor_version 比较。

我很确定这次有人解决了...

谷歌搜索后...

是的！！确实是 Python 人。检查这个：

[http://pydoc.org/get.cgi/usr/local/lib/python2.5/distutils/version.py](http://pydoc.org/get.cgi/usr/local/lib/python2.5/distutils/version.py)

# r - 查找R中每列每个因子的数量

> ID：14058042
> 
> 赞同：1
> 
> 时间：2012-12-27T16:41:47.447
> 
> 标签：r, matrix, apply, r-factor

我正在尝试编写代码，允许我在 R 中找到每列每个因子的数量，但我希望每列中的因子水平相同。我认为这应该是微不足道的，但我遇到了两个地方，当使用 apply with factor 和使用 apply with table 时，R 没有返回我期望的值。

考虑这个样本数据：

```
mat <- matrix(sample(1:10,90,replace=TRUE),ncol=10,nrow=9)
mat.levels <- as.character(unique(as.vector(mat)))
mat.factor <- as.data.frame(apply(mat,2,as.character)) 
```

我的第一步是重新调整每一列，使因子水平相同。起初我试过：

```
apply(mat.factor,2,factor,levels=mat.levels)
#But the data structure is all wrong, I don't appear to have a factor anymore!
str(apply(mat.factor,2,factor,levels=mat.levels)) 
```

所以我用循环蛮力强迫它......

```
for (i in 1:ncol(mat.factor)) {
      levels(mat.factor[,i]) <- mat.levels
    } 
```

然后我遇到了另一个应用问题。我认为现在我已经设置了因子水平，如果我在列中缺少给定因子，则表函数应该为该因子水平返回 0 计数。然而，当我使用 apply 时，似乎零计数的因子水平被丢弃了！

```
apply(mat.factor,2,table)$V10
str(apply(mat.factor,2,table)$V10)
#But running table just on that one column yields the expected result!
table(mat.factor[,10])
str(table(mat.factor[,10])) 
```

有人会解释在这两种情况下发生了什么吗？我在误解什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:54:13.523

阅读详细信息部分的第一句话，`?apply`然后运行`as.matrix(mat.factor)`以查看问题。用于`lapply`数据帧，而不是`apply`.

这是一个例子：

```
mat.factor <- as.data.frame(lapply(mat.factor,factor,levels = mat.levels))
lapply(mat.factor,table) 
```

# sql - 如果两个值相等，order by 子句如何工作？

> ID：14058045
> 
> 赞同：16
> 
> 时间：2012-12-27T16:41:49.453
> 
> 标签：sql, oracle10g, sql-order-by

这是我的 NEWSPAPER 表。

```
 National News   A   1
    Sports          D   1
    Editorials      A   12
    Business        E   1
    Weather         C   2
    Television      B   7
    Births          F   7
    Classified      F   8
    Modern Life     B   1
    Comics          C   4
    Movies          B   4
    Bridge          B   2
    Obituaries      F   6
    Doctor Is In    F   6 
```

当我运行这个查询

```
select feature,section,page from NEWSPAPER
where section = 'F'
order by page; 
```

它给出了这个输出

```
Doctor Is In    F   6
Obituaries      F   6
Births          F   7
Classified      F   8 
```

但是在 Kevin Loney 的 Oracle 10g Complete Reference 中，输出是这样的

```
Obituaries      F   6
Doctor Is In    F   6
Births          F   7
Classified      F   8 
```

请帮助我了解它是如何发生的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T16:51:17.850

如果您需要在子句的第一列中的两个值相同时发生*可靠、可重现*`ORDER BY`的排序，您应该始终提供另一个辅助列来进行排序。虽然您可以假设它们会根据输入的顺序（据我所知几乎总是如此，但请注意 SQL 标准没有指定任何形式的默认排序）或索引，但您永远不应该（除非它是专门针对您正在使用的引擎记录的——即使那样我个人也不会依赖它）。

如果您想在每个页面中按功能按字母顺序排序，您的查询应该是：

```
SELECT feature,section,page FROM NEWSPAPER
WHERE section = 'F'
ORDER BY page, feature; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-27T16:52:07.103

在关系数据库中，表是集合并且是无序的。该`order by`子句主要用于输出目的（以及其他一些情况，例如包含 的子查询`rownum`）。

这是一个很好的起点。SQL 标准没有指定当 an 上的键`order by`相同时会发生什么。这是有充分理由的。可以使用不同的技术进行分类。有些可能是稳定的（保持原始顺序）。有些方法可能不是。

关注集合中是否有相同的行，而不是它们的顺序。顺便说一句，我认为这是一个不幸的例子。这本书的例子不应该有模棱两可的种类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-17T18:57:57.810

当您使用该`SELECT`语句从表中查询数据时，行在结果集中出现的顺序可能不是您所期望的。

在某些情况下，出现在结果集中的行按照它们在表中物理存储的顺序排列。但是，如果查询优化器使用索引来处理查询，行将按照索引键顺序存储时出现。因此，结果集中的行顺序是不确定的或不可预测的。

> 查询优化器是数据库系统中的一个内置软件组件，它确定 SQL 语句查询请求数据的最有效方式。

# javascript - jquery mobile multipage上的jsignature未正确启动

> ID：14058048
> 
> 赞同：2
> 
> 时间：2012-12-27T16:42:09.107
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在将 3 个 jsignature div 加载到我的 jquery 移动应用程序中。当我将它们加载到某些页面时，它们会显示并正常工作：

![在此处输入图像描述](../Images/ab29bbf37356eb19a135db084d9c959f.png)

但是当它们被加载到其他页面时，div 会显示为一个被压扁的高度并且对触摸没有响应：

![在此处输入图像描述](../Images/f484466c4afc6940cebf8b4c0a880287.png)

我正在页面底部使用文档就绪功能加载它们，这看起来不错：

```
<div id="info" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<h1>NewF</h1>
</div>
<div data-role="content">
<form data-persist="garlic" encoding="multipart/form-data" encType="multipart/form-data">
<input type="text" placeholder="Your Name" name="_fid_14" id="_fid_14" />
</form>
</div></div>

<div id="sigemail" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<h1>Signatures & Email</h1>
</div>
<div data-role="content">
<div id="fcmsig" style="width:600px; height:150px;"></div>
<div id="gcsig" style="width:600px; height:150px;"></div>
<div id="inspsig" style="width:600px; height:150px;"></div>
<form data-persist="garlic" encoding="multipart/form-data" encType="multipart/form-data">
<br>
<p>What email address would you like the QAF pdf sent to?</p><input type="text"  name="_fid_210" id="_fid_210" />
</form>
    </div></div>

<script>
    $(document).ready( function(){
        $('#fcmsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        $('#gcsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        $('#inspsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
    });
</script> 
```

但是当我更改为这个时，每个签名都加载到自己的页面中，它们会丢失大小和功能：

```
div id="info" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<h1>NewF</h1>
</div>
<div data-role="content">
<form data-persist="garlic" encoding="multipart/form-data" encType="multipart/form-data">
<input type="text" placeholder="Your Name" name="_fid_14" id="_fid_14" />
</form>
</div></div>

<div id="sigemail" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<h1>Signatures & Email</h1>
</div>
<div data-role="content">
<form data-persist="garlic" encoding="multipart/form-data" encType="multipart/form-data">
<br>
<p>What email address would you like the QAF pdf sent to?</p><input type="text"  name="_fid_210" id="_fid_210" />
<a data-theme="a" href="#fcmsignature" data-role="button" data-transition="slidefade" data-inline="true">Field CM Signature</a><br>
<a data-theme="a" href="#gcsignature" data-role="button" data-transition="slidefade" data-inline="true">Contractor Signature</a><br>
<a data-theme="a" href="#inspsignature" data-role="button" data-transition="slidefade" data-inline="true">Inspector Signature</a>
</form>
</div></div>

<div id="fcmsignature" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<input data-theme="a" class="ui-btn-left" type="button" value="Clear" onclick="$('#fcmsig').jSignature('clear')"/>
<a href="#" data-theme="a" data-rel="back" data-role="button" class="ui-btn-right" data-inline="true">Save</a>
<h1>FCM Signature</h1>
</div>
<div data-role="content">
<div id="fcmsig" style="width:600px; height:150px;"></div>
</div></div>

<div id="gcsignature" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<input data-theme="a" class="ui-btn-left" type="button" value="Clear" onclick="$('#gcsig').jSignature('clear')"/>
<a href="#" data-theme="a" data-rel="back" data-role="button" class="ui-btn-right" data-inline="true">Save</a>
<h1>Contractor Signature</h1>
</div>
<div data-role="content">
<div id="gcsig" style="width:600px; height:150px;"></div>
</div></div>

<div id="inspsignature" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<input data-theme="a" class="ui-btn-left" type="button" value="Clear" onclick="$('#inspsig').jSignature('clear')"/>
<a href="#" data-theme="a" data-rel="back" data-role="button" class="ui-btn-right" data-inline="true">Save</a>
<h1>Inspector Signature</h1>
</div>
<div data-role="content">
<div id="inspsig" style="width:600px; height:150px;"></div>
</div></div>

<script>
    $(document).ready( function(){
        $('#fcmsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        $('#gcsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        $('#inspsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
    });
</script> 
```

我尝试在签名页面上使用 pageinit，但得到了相同的结果：

```
<div id="fcmsignature" data-role="page" data-theme="c">
<div data-role="header" data-theme="b">
<input data-theme="a" class="ui-btn-left" type="button" value="Clear" onclick="$('#fcmsig').jSignature('clear')"/>
<a href="#" data-theme="a" data-rel="back" data-role="button" class="ui-btn-right" data-inline="true">Save</a>
<h1>FCM Signature</h1>
</div>
<div data-role="content">
<script>
$('#fcmsignature').live('pageinit',function(event){
    $('#fcmsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
});
</script>
<div id="fcmsig" style="width:600px; height:150px;"></div>
</div></div> 
```

我不确定为什么它们会在一个子页面中工作，而不是另一个。有什么想法吗？

*   更新：直接刷新 /index.html#fcmsignature 可以正确显示签名。所以这个问题在某种程度上与签名的启动有关——这就是我尝试 pageinit 的原因（没有成功）。我还在按钮上尝试了 data-transition="none" ，但没有变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:05:19.903

试试这个语法：

```
$('#fcmsignature, #gcsignature, #inspsignature').live('pageshow',function(e,data){
    $('#fcmsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
    $('#gcsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
    $('#inspsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
}); 
```

此语法将负责加载 jQuery 和 jQuery mobile，并且仅当页面**fcmsignature、#gcsignature、#inspsignature**即将显示时才有效。并且因为您每页使用一个签名，所以像这样使用它：

```
$('#fcmsignature').live('pageshow',function(e,data){
        if($('#fcmsig').find('.jSignature').length == 0){
            $('#fcmsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        }
});

$('#gcsignature').live('pageshow',function(e,data){
        if($('#gcsig').find('.jSignature').length == 0){
            $('#gcsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        }
});

$('#inspsignature').live('pageshow',function(e,data){
        if($('#inspsig').find('.jSignature').length == 0){
            $('#inspsig').jSignature({'UndoButton':false,color:"#000000",lineWidth:1});
        }
}); 
```

jQM 不是为使用***$(document).ready( function(){***而构建的。阅读我的另一篇文章以了解原因：[https ://stackoverflow.com/a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:16:57.850

只是为了澄清其他遇到此问题的人，将 jSignature 附加到“pageshow”事件对我有用。

```
 $("#signpage").live("pageshow",function(e,data){
      if($("#signature").find(".jSignature").length == 0){
                    $("#signature").jSignature();
      }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T14:33:20.807

为了更新其他答案，**jQuery live() 函数自 jQuery 1.7 起已被弃用，自 jQuery 1.9 起已被删除。**现在您将要使用 jQuery Mobile“pagecontainershow”事件处理程序并检查您当前所在的页面，然后执行`if`其他答案中建议的块，如下所示：

```
$(document).on("pagecontainershow", function(evt, ui){
    var pageID = $('body').pagecontainer('getActivePage').prop('id');

    if(pageID == 'signaturePage'){
        if($("#signatureDiv").find(".jSignature").length == 0){
            $("#signatureDiv").jSignature();
        }
    }
} 
```

此方法适用于 jQuery 1.11.3 和 jQuery Mobile 1.4.5。

# windows - 创建一个应用程序并在右键单击文件时附加它

> ID：14058051
> 
> 赞同：1
> 
> 时间：2012-12-27T16:42:23.230
> 
> 标签：windows, visual-studio-2012

我想最好在 C# VS12 中制作一个应用程序，并且我想将它附加在右键菜单上，将文件路径作为参数传递，如果我也可以在多项选择中做到这一点，那就太好了。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:48:02.710

in the installer of your application you need to add a file extension association. (for development you can test that by registering the extension manually: right click, open with...). the file name that was clicked will be passed to your app as a command line argument (those are the args[] in the main method of you app).

multiple selection is a bit trickier but certainly doable. when your app starts you need to check if you have an instance of the app already running (using a mutex for example) and send a message to that instance with the file name you received.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:49:44.070

If you have not worked with context menu handling, you should take a look at [this tutorial](http://msdn.microsoft.com/en-us/library/bb776881%28VS.85%29.aspx).

For the file path handling, you could take a look at [this image editing example](http://www.codeproject.com/Articles/15171/Simple-shell-context-menu).

# security - 最佳实践 - 即使通过 https 发送也加密密码？

> ID：14058053
> 
> 赞同：3
> 
> 时间：2012-12-27T16:42:31.497
> 
> 标签：security

如果之前有人问过这个问题，我深表歉意，但我希望得到最新的答案。

我对服务器端安全性非常陌生，我想正确地做到这一点。

我的问题：加密通过 HTTPS 发送的密码是最佳实践吗？

我看过一些帖子，建议在密码发送到 POST 变量之前使用 Javascript 对密码进行加密，但我不确定在使用 HTTPS 时是否有必要这样做。

请注意：当密码存储在数据库中时，我有意对密码进行散列和加盐处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:44:01.257

如果使用 HTTPS，则没有太多理由加​​密客户端和服务器之间发送的数据。HTTPS 会为您做到这一点，因此任何进一步的加密都是多余的。

我能想到提前加密密码的唯一原因是在客户端对其进行哈希处理，以避免清除密码保留在服务器内存或日志中。这有点偏执，在现实世界中可能没有多大用处。无论如何，日志都不应该记录密码，如果有人可以访问您的服务器内存，那么除了密码加密之外，您还有其他问题需要解决。

此外，在客户端加密密码可以让其他人看到加密/散列是如何执行的。恕我直言，这比让它在服务器内存中驻留几毫秒更具安全风险。

# asp.net-mvc-3 - Safari iFrame cookie 问题

> ID：14058057
> 
> 赞同：2
> 
> 时间：2012-12-27T16:42:56.387
> 
> 标签：asp.net-mvc-3, iframe, safari

我意识到有几个与此相关的问题；但是我一直在疯狂地试图完成这项工作。简单地说，我有一个位于我们公司服务器上的 MVC3 应用程序，它在客户端 URL 上的 iFrame 中提供。其他所有浏览器都很好，除了 Safari，它默认打开了整个“无第三方 cookie”设置。

所以这是我迄今为止尝试过的（我们有自定义库，所以其中一些函数是特定于我们的东西的）：

看法：

```
@if ((HttpContext.Current.Request.UserAgent.ToLower().IndexOf("safari") >= 0) && HttpContext.Current.Request.Cookies["safari_cookie_set"] == null)
{
  using (Html.BeginRouteFormSSL(RouteNames.SafariRedirect, FormMethod.Post, new { id = "safari-fix-form" }))
  {   <input type="submit" value="Go!" /> }
} 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public virtual ActionResult SafariRedirect()
{
  ActionResult result = null;

  Response.Cookies.Add(new HttpCookie("safari_cookie_set", "cookie ok"));
  result = RedirectToRouteNoSSL(Index);

  return result;
} 
```

Javascript：

```
safariValidate: function(){
  if ($.browser.safari == true && document.cookie.indexOf("safari_cookie_set") == -1){
          $("#safari-fix-form").submit();
      }
} 
```

所以最初，前提是使用 javascript 自动发布到 iframe（因此是 .submit()）。它似乎工作了一天左右。现在，无论我如何发布（请注意此处的输入按钮...），都不会在 iframe 中设置 cookie。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:33:31.440

经过深思熟虑和与不同浏览器的斗争，我们公司最终决定放弃 cookie，转而使用基于数据库的会话。这完全解决了这个问题，因为我们正在处理在 iframe 中托管我们网站的第三方网站。

希望这对其他人有所帮助 - 在 iframe 中使用 cookie 没有干净的方法。

# applescript - 使用applescript在finder中移动文件

> ID：14058061
> 
> 赞同：4
> 
> 时间：2012-12-27T16:43:03.720
> 
> 标签：applescript, finder

我只想将图像从一个文件夹移动到另一个文件夹，替换已经存在的那个：

```
tell application "Finder"
      copy file "/Users/xx/Documents/img.jpg" to folder "/Users/xx/Documents/State"
   end tell 
```

当我运行它时，我收到一条错误消息说

> Finder 出现错误：无法将文件夹 [路径] 设置为文件 [路径]"。"文件夹 [路径] 中的编号 -10006

请帮我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T17:15:55.607

尝试：

```
tell application "Finder"
    duplicate POSIX file "/Users/xx/Documents/img.jpg" to POSIX file "/Users/xx/Documents/State" with replacing
end tell 
```

或者

```
tell application "Finder"
    move POSIX file "/Users/xx/Documents/img.jpg" to POSIX file "/Users/xx/Documents/State" with replacing
end tell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T01:15:10.397

正如@adayzdone 所指出的，出现错误是因为您使用的是 Posix 样式的路径而没有声明它。

另一种方法是使用冒号分隔的 HFS 路径，如下所示：

```
move file "Macintosh HD:Users:xx:Documents:img.jpg" ¬
to "Macintosh HD:Users:xx:Documents:State:" with replacing 
```

使用冒号分隔的路径，您需要包含整个内容，包括卷名（我在这里假设 Macintosh HD），否则它会抛出我们的好朋友错误 10,006。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-20T09:49:21.693

它帮助了我：

```
set theSource to POSIX file "/Users/xx/Documents/img.jpg"
set theDest to POSIX file "/Users/xx/Documents/State"

tell application "Finder"
    move theSource to folder theDest with replacing
end tell 
```

# cocoa - 虚拟键码转换器（字符到整数）

> ID：14058067
> 
> 赞同：3
> 
> 时间：2012-12-27T16:43:24.440
> 
> 标签：cocoa, keycode

有没有办法将字符（`@"A"`）转换为 CGKeyCode（可可开发）？我已经尝试了很多“解决方案”，但都没有奏效。

我已经实现了这个`keyCodeForKeyString`方法，但它真的很短，并且不包括键盘中的所有字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:00:05.373

这个问题似乎回答了相同（或非常相似）的问题： [如何将 ASCII 字符转换为 CGKeyCode？](https://stackoverflow.com/questions/1918841/how-to-convert-ascii-character-to-cgkeycode)

# c# - 具有 Close() 和 Dispose() 的 streamwriter 有什么意义？

> ID：14058071
> 
> 赞同：6
> 
> 时间：2012-12-27T16:43:47.293
> 
> 标签：c#, .net, vb.net, visual-c++, com

当您调用`Close`活动`StreamWriter`时，无法再向流中写入任何代码（因为它已被关闭）。要打开另一个流，您必须创建 a 的新实例，`StreamWriter`因为没有“打开”方法。

我的问题是，除了关闭流之外`Close`，什么`Dispose`时候你不能真正使用任何东西有什么意义？`Dispose`

我可以理解是否有一个`Open`功能，即您可以关闭一个文件，然后使用相同的`StreamWriter`. 但是因为只有`Close`并且除了之后你不能真正使用任何东西`Dispose`，为什么不干脆摆脱`Close`并`Dispose`关闭底层流作为它的第一个动作呢？

我知道这`Dispose`来自于`IDisposeable`所有这些。我想知道的是为什么无论如何`Close`都需要特别需要`Dispose`。`Close`

据我所见，如果无法使用相同的方法打开另一个流，那么当您别无选择时，`StreamWriter`没有任何意义，因为所有其他方法都变得无用。`Close``Dispose`

为什么当它们可以合并成一个方法时`StreamWriter`会有麻烦呢？`Close``Close``Dispose`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:00:06.180

在处理流时，有一个长期存在的约定，`Close`即他们必须关闭流的方法。这是许多程序员在处理流时习惯并期望看到的术语。没有`Close`方法的流可能会令人困惑，并且人们可能需要一些时间才能意识到他们应该使用`Dispose`来关闭流。

类当然*可以*`IDisposable`显式实现，因此`Dispose`如果没有强制转换，该方法就不会存在`IDisposable`，并且我已经消除了一些混乱，但他们选择不这样做，并在其中留下两个重复的方法班上。

是否使用`Dispose`或`Close`关闭流完全取决于您的个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:48:18.740

根据[文档](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.close.aspx)，`Close`只需调用`Dispose`值为`true`.

> *   此方法覆盖 Close。
>     
>     
> *   Close 的此实现调用 Dispose 方法并传递一个真值。
>     
>     
> *   您必须调用 Close 以确保所有数据都正确写入底层流。在调用 Close 之后，StreamWriter 上的任何操作都可能引发异常。如果磁盘空间不足，调用 Close 会引发异常。

`Dispose`本身继承自[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，由具有需要释放资源的类使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:48:20.283

打开流会分配应用程序和系统资源。如果您的应用程序打开许多流而不关闭它们，那么它会限制其他应用程序访问这些文件的能力。尽快关闭流很重要。

至于为什么流没有能力重新打开，这基本上是.NET方法。该类代表一个开放的流。所以创建一个访问流并尽快摆脱它。当您想再次访问该流时，您可以创建另一个。

我认为创建一个可以重新打开的流类是有效的，但它确实会导致一些问题，因为当流关闭时许多方法将不起作用。最后，流类确实代表了一个*开放*流。

`Dispose`只是为了更容易确保及时清理流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:53:02.883

> 为什么不直接摆脱 close 并将关闭底层流作为其第一个操作呢？

这是很好的编程习惯。

假设您家中的灯在您离开时会自动关闭。*当你离开时你*不必关灯，但这是个好*习惯*。这样，您就不会要求您居住的每间房屋都自动关灯。你会养成自己关闭它们的习惯。

显式调用`Close()`告诉读者（和系统）“我已经完成了这个流”，调用`Dispose()`告诉系统（和读者）“你可以释放任何嵌入的资源”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-27T16:49:49.093

当你说“为什么不只是摆脱......”时，你走在正确的轨道上，但它是倒退的。如果您查看底层代码，`StreamWriter.Close()`您将看到：

```
public override void Close()
{
  this.Dispose(true);
  GC.SuppressFinalize((object) this);
} 
```

因此，Close() 方法就是您告诉框架您已完成写入流的方式。

# python - 如何使用 PyQt4 在网页上单击“警报”消息中的按钮

> ID：14058077
> 
> 赞同：1
> 
> 时间：2012-12-27T16:44:08.263
> 
> 标签：python, qt, button, pyqt, pyside

在网页上，当我创建新用户时，会显示“新用户已创建”的警报消息。为了继续，我必须单击“确定”按钮。所以问题是我真的不知道如何点击它。

当我需要单击常规按钮时，我会执行以下操作：

```
doc = self.page().currentFrame().documentElement()
submit_button = doc.findFirst('input[id=my-submit-button]')
submit_button.evaluateJavaScript('this.click()') 
```

但是如何单击警报消息中的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:59:37.833

您正在寻找`QWebPage::javaScriptAlert ( QWebFrame * frame, const QString & msg )` [功能](http://doc.qt.digia.com/qt/qwebpage.html#javaScriptAlert)：

> 每当框架内运行的 JavaScript 程序使用消息 msg 调用 alert() 函数时，都会调用此函数。
> 
> 默认实现显示带有 QMessageBox::information 的消息 msg。

# php - mysql查询适用于纯文本，但不适用于变量

> ID：14058079
> 
> 赞同：2
> 
> 时间：2012-12-27T16:44:16.747
> 
> 标签：php, mysql

我正在尝试打印一些主题信息，但进展并不顺利。这是我的查询：

```
SELECT * FROM topics WHERE id='$read' 
```

这行不通。我已经回显了`$read`变量，它说`1`。那么，如果我这样做：

```
SELECT * FROM topics WHERE id='1' 
```

它完美地工作。我不明白有什么问题。里面没有隐藏角色`$read`或其他类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:46:33.430

Try like this:

```
$query = "SELECT * FROM topics WHERE id='" . $read . "'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:46:26.500

```
SELECT * FROM topics WHERE id=$read 
```

it consider it as string if you put i single quotes

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:44:59.967

`ID`通常是一个数字字段，它应该是

```
$id = 1;
$query = "SELECT * FROM topics1 WHERE id = {id}" 
```

如果您`strings`出于某种原因使用，请触发类似的查询

```
$id = '1';
$query = "SELECT * FROM topics1 WHERE id = '{$id}'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:55:38.513

我想知道为什么所有参与者都没有阅读清楚地说明带有引号的查询的问题

```
SELECT * FROM topics WHERE id='1' 
```

工作正常。

至于问题本身，可能是一些错字。可能在其他一些代码中，没有直接连接到 $read 变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T17:29:19.400

看起来您可能在查询生成方面遇到问题，正如其他人所指出的那样。正如 Akash 所指出的，最好先将查询构建到字符串中，然后将该字符串提供给 MySQL API。这使您可以轻松访问方便的调试技术。如果您仍然遇到问题，请尝试此操作。

```
$id = 1;
$query = "SELECT * FROM `topics1` WHERE `id`={$id}";
echo ": Attempting Query -> {$query}<br />";

$res = mysql_query($query, $dblink);
if($res <= 0)
    die("The query failed!<br />" . mysql_error($dblink) . "<br />");

$cnt = mysql_num_rows($res);
if($cnt <= 0)
{
    $query = "SELECT `id` FROM `topics1`";
    echo "No records where found?  Make sure this id exists...<br />{$query}<br /><br />";

    $res = mysql_query($query, $dblink);
    if($res <= 0)
        die("The id listing query failed!<br />" . mysql_error($dblink) . "<br />");

    while($row = mysql_fetch_assoc($res))
        echo "ID: " . $row['id'] . "<br />";
} 
```

这至少可以让您在调用之间进行监控，查看您的查询实际上是什么样子，mysql 对此有何评论，如果所有其他方法都失败，请确保您正在寻找的 ID 确实存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T17:12:42.433

尝试

```
$query = sprintf("SELECT * FROM topics WHERE id='%s';",$read); 
```

如果需要，还记得转义变量。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-27T16:47:02.010

try with this : SELECT * FROM topics WHERE id=$read

# .net - 关闭数据库连接

> ID：14058084
> 
> 赞同：1
> 
> 时间：2012-12-27T16:44:35.457
> 
> 标签：.net, sql, database

要关闭我的数据库，我使用这个： SqlConnection.Close(); 但是我的应用程序卡在这种方法中......

每次我访问数据库时，我都会这样做：

```
string cmdSQL = "select min(shortAddress) from FreeShortAddress";

using (SqlCeCommand cmd = new SqlCeCommand(cmdSQL))    
{
    cmd.Connection = (SqlCeConnection)this.SqlConnection;    
    var r = cmd.ExecuteScalar();    
} 
```

这是正确的方法吗？你怎么能看到哪个连接（在哪个桌子上）被阻止了？

谢谢你。

[编辑]您知道强制关闭所有连接而不会卡住的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:47:49.283

我在打开和关闭连接时使用的一般模式是这样的：（取自[我关于 using 语句的问题的旧答案](https://stackoverflow.com/questions/4717789/in-a-using-block-is-a-sqlconnection-closed-on-return-or-exception/4717802#4717802)。）这种模式会在连接应该关闭时自动关闭。（退出 using 语句时）

```
using (SqlConnection connection = new SqlConnection(connectionString)) 
{    
  int employeeID = findEmployeeID();    
  try    
  {

            connection.Open();
            SqlCommand command = new SqlCommand("UpdateEmployeeTable", connection);
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.Add(new SqlParameter("@EmployeeID", employeeID));
            command.CommandTimeout = 5;

            command.ExecuteNonQuery();    
   } 
   catch (Exception) 
   { 
      /*Handle error*/ 
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:23:56.833

尝试使用这个：

```
using (SqlCeCommand cmd = new SqlCeCommand(cmdSQL))    
{
    cmd.Connection = (SqlCeConnection)this.SqlConnection;    
    var r = cmd.ExecuteScalar(CommandBehavior.CloseConnection);    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:00:08.537

这确实是关闭连接的一种方法，我真的在任何地方都使用它以避免通过使用 try catch 语句来混乱代码，顺便说一句，您可以在您的版本中使用 yield 关键字。但不是try catch。:)

# android - Android Wheelview 重复值

> ID：14058087
> 
> 赞同：0
> 
> 时间：2012-12-27T16:44:43.803
> 
> 标签：android

我有这组适配器的轮视图

```
NumericWheelAdapter minAdapter = new NumericWheelAdapter(this, 00, 30); 
```

问题是，数到 9 后，它再次显示“1”。像这样

5 6 7 8 9 1 1 1

应该是这样的 5 6 7 8 9 10 11 12

我认为需要 View Holder 来解决这个问题。谁能知道如何在轮视图适配器中实现视图支架？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T00:23:08.267

```
new NumericWheelAdapter(this, 00, 30,"%02d"); 
```

这对我有用，这也使得在单个滚轮中产生更大的数字成为可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:36:58.707

嗨，我通常根据设计的 WheelView Yuri Kanivets 构建新库。这是我的作品，希望你会喜欢。 [https://code.google.com/p/wheel-controllers/](https://code.google.com/p/wheel-controllers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:07:00.513

根据您*看到*的输出`0`，`1`、和元素`2`的`10`、和只是由于宽度而被截断。只需改变' 的宽度以适应更宽的元素。`11``12``WheelView`

# javascript - Cufon 与悬停混淆

> ID：14058088
> 
> 赞同：1
> 
> 时间：2012-12-27T16:44:43.447
> 
> 标签：javascript, html, css, cufon

我现在正在拔头发，因为 Cufon 要么在玩，要么我想得太复杂了。我有一个跨度链接类，其中包含文本。跨度内的字体颜色应在悬停状态下更改。

```
Cufon.replace('.info-grid a span', { fontFamily: 'Vegur', hover: true, color: 'white', hoverables: { a: true, span: true } }); 
```

使用上面的代码，当你打开网站时，字体是白色的。我认为这是因为上面的代码实际上并没有设置悬停状态，但是我该如何设置呢？我尝试设置 .info-grid a:hover span 类，但它没有用。

CSS...

```
.info-grid a span {
    position: relative;
    left: 10px;
    top: 80px;
    font-size: 0.94em;
    line-height: 1.3em;
    font-weight: bold;
    text-transform: uppercase;
    color: #009FD4;
    background-color: #ffffff;
}
.info-grid a:hover span {
    color: #fff;
    background-color: #009FD4;
} 
```

HTML

```
<div class="info-panel" id="info-firstteam">
    <h3>First Team</h3>

         <div class="info-grid">

         <div>
              <a href="../players/profiles/1.html" class="pic-no1">
              <p id="nametext"><span id="firstline">James</span><br><span id="secondline">Tillotson</span></p>
              </a>
         </div>

         <div>
         ...additional divs for players
         </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:48:49.357

You probably wanted to setup `color` as part of `:hover` styling, right? In that case you should put this rule inside `hover` property, like this:

```
Cufon.replace('.info-grid a span', { 
  fontFamily: 'Vegur', 
  hover: {
    color: 'white'
  },
  hoverables: { a: true, span: true } 
}); 
```

It's said in the [**documentation**](https://github.com/sorccu/cufon/wiki/Styling), however...

```
Nesting :hover-enabled elements is unrecommended and may lead to unpredictable results. 
```

... and the way I see it, this notice should be accounted in your case. So maybe it's best to depend on `:hover` state of `a` only for changing the colors, replacing the code with this:

```
Cufon.replace('.info-grid a', { 
  fontFamily: 'Vegur', 
  hover: {
    color: 'white'
  }
}); 
```

... as `<a>` elements are 'hoverable' by default.

# python - Apache 后面的 Twisted Web 服务器 - 找不到资源

> ID：14058089
> 
> 赞同：1
> 
> 时间：2012-12-27T16:44:45.633
> 
> 标签：python, apache, proxy, twisted

我在 localhost 的 8001 端口和 apache2 上使用 mod_proxy 运行 twisted.web.server。Apache根据以下配置设置为代理

```
http://localhost/jarvis ----> http://localhost:8001/ 
```

此规则的 httpd 配置是

```
ProxyPass /jarvis http://localhost:8001/
ProxyPassReverse /jarvis http://localhost:8001/ 
```

扭曲的应用程序的服务器配置代码片段如下：

```
if __name__ == '__main__':
root = Resource()
root.putChild("clientauth", boshProtocol())
logging.basicConfig()
factory = Site(root)
reactor.listenTCP(8001, factory)
reactor.run() 
```

当我去

```
http://localhost:8001/clientauth 
```

它按预期运行。但是，当我使用

```
http://localhost/jarvis/clientauth 
```

它给出错误 - “没有这样的子资源。” 据我了解 - 请求已正确代理到扭曲的 Web 服务器。但是为什么子资源没有被识别呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:07:54.377

您缺少 RewriteRule。我还没有测试过，但你的问题的解决方法或多或少是这样的：

`RewriteRule ^/jarvis/(.*) /$1`

确保启用了 mod_rewrite。

这是我通常用作参考的链接：[http ://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

祝你好运！

# c# - 为什么 Linq xml OrderBy 不为我工作？

> ID：14058094
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:45:15.017
> 
> 标签：c#, xml, linq, sql-order-by

我有以下 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <invoice xmlns="http://www.jemos.co.uk/xsds/experiments">
<header date="2012-12-27T13:17:03.652Z" invoiceId="0yFUWhwmHH">
    <seller name="euxz0bIqiC">
        <address line1="fxWDfaMu8O" line2="u5LmqdrH6f" line3="5c7XVSiXCh"
            city="CyCJOexD1v" postcode="Td4RmntPah" country="_vzVd1oo1Z" />
    </seller>
    <buyer name="UKNWLox8WE">
        <address line1="6RcK4QKz94" line2="U04UEsRMjh" line3="lnSWe9NY0r"
            city="g5nj0tbJbx" postcode="evyno9yUR6" country="rpIgh2XDIo" />
    </buyer>
</header>
<details>
    <items>
        <item id="ZBV9eUw0MS" description="h_x4Lqr2bp" quantity="1356614223664"
            price="0.552495629185551" currency="NdqzH508tA" />
        <item id="HNAQbfAXrv" description="sTgStzKny7" quantity="1356614223666"
            price="0.10527685341195969" currency="tvJUSZjipG" />
        <item id="ikJ0y_8TdZ" description="RUXb6n7cMJ" quantity="1356614223667"
            price="0.8693868918655814" currency="8LHywfSuC7" />
        <item id="lbdLaiI7zK" description="B_kId9Er07" quantity="1356614223668"
            price="0.9610746134524019" currency="bJvcOByXzx" />
        <item id="fBRl89ir8K" description="CuUiyjfFrz" quantity="1356614223669"
            price="0.6002495627735738" currency="WqB4AgH6Jv" />
    </items>
</details> 
```

并得到以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;

namespace XMLExperiments
{
class Program
{

    static void Main(string[] args)
    {

        XDocument xml = XDocument.Parse(Properties.Resources.test);
        IEnumerable<XElement> items = xml.Descendants()
            .Where(el => el.Name.LocalName.Contains("item"));

        foreach (XElement item in items)
        {
            IEnumerable<XAttribute> attrs = item.Attributes()
                .OrderBy(at => at.Name.LocalName);                  
            foreach (XAttribute attr in attrs)
               Console.WriteLine("Attribute name: {0}", attr.Name.LocalName);

        }

        Console.ReadKey();
    }
}
} 
```

执行后，我得到以下信息：

![在此处输入图像描述](../Images/99cbb0e9f70a68e8c9786e626057ad6c.png)

我本来希望“货币”首先出现，而所有其他项目都正确排序。如果我按降序排序，也会发生类似的事情。

任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:48:50.527

Based on your output, it looks like it did.

The last few lines are:

```
currency  
description  
id  
price  
quantity 
```

In your screen shot there are 4 places where "currency" exists and 5 that "quantity" exists. All things point to the first line simply being scrolled off the top.

# vba - 循环未通过整个表运行

> ID：14058096
> 
> 赞同：1
> 
> 时间：2012-12-27T16:45:21.927
> 
> 标签：vba, ms-access, loops, recordset

所以我有一个内置的系统，它设置了一些不同的标志等等，但我想做的一件事是获取临时表的内容并将其发送到另一个用于跟踪的表。我正在尝试使用插入循环来做到这一点，但我根本无法弄清楚如何使其按预期工作。

```
Private Sub Form_Load()
    DoCmd.SetWarnings False
    DoCmd.OpenQuery ("qryDeleteEmail")
    Dim db As Object
    Dim rst As Object
    Dim test As Object

    Set db = Application.CurrentDb
    Set rst = db.OpenRecordset("qryDate")
    Set test = db.OpenRecordset("tblEmailTemp")

    If Me.RecordsetClone.RecordCount = 0 Then
        MsgBox ("No delinquent accounts. No email will be generated.")
        Me.Refresh
        DoCmd.Close acForm, "qryDate", acSaveNo
        DoCmd.CancelEvent
    Else
        rst.MoveFirst
        Do Until rst.EOF
           rst.Edit
           rst!NeedsEmail = 1
           rst.Update
           rst.MoveNext
        Loop

        'DoCmd.Requery
        'rst.Close

        DoCmd.RunMacro ("StagingTable")
        test.MoveFirst

        Do Until test.EOF
            CurrentDb.Execute "Insert Into EmailTracking (Account, ExpirationDate)" & _
                "Values ('" & AccountName & "', '" & ExpirationDate & "')"
            test.MoveNext              
        Loop

        test.Close
        rst.MoveFirst

        Do Until rst.EOF
            rst.Edit
            rst!EmailSent = 1
            rst.Update
            rst.MoveNext
        Loop

        'DoCmd.Requery
        rst.Close
        DoCmd.RunMacro ("Close")
        'DoCmd.OpenQuery ("qryDeleteEmail")
    End If
    Exit Sub
End Sub 
```

现在发生的事情是将临时表的第一条记录复制两次。例如，我有一个帐户名 A 和一个帐户名 S，但不是插入 A 的记录和 S 的记录，而是简单地插入 A 两次。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:01:20.637

创建并测试一个更简单的程序，该程序只专注于您要解决的问题。不幸的是，我不确定那个问题是什么。反正我会建议这个...

```
Public Sub TestLoopThruTable()
    Dim db As DAO.database
    Dim test As DAO.Recordset
    Dim strInsert As String

    DoCmd.SetWarnings True ' make sure SetWarnings is on
    Set db = CurrentDb
    Set test = db.OpenRecordset("tblEmailTemp")
    Do While Not test.EOF
        strInsert = "INSERT INTO EmailTracking (Account, ExpirationDate)" & vbCrLf & _
            "VALUES ('" & AccountName & "', '" & ExpirationDate & "')"
        Debug.Print strInsert
        'db.Execute strInsert, dbFailOnError
        test.MoveNext
    Loop
    test.Close
    Set test = Nothing
    Set db = Nothing
End Sub 
```

`ExpirationDate)`请注意，在您的原始版本中和之间没有空格`Values`。我使用了换行符 ( `vbCrLf`) 而不是空格，但两者都可以让 db 引擎满意。

我确定`SetWarnings`是开着的。在您的代码中，您在开始时将其关闭，但从未再次将其重新打开。使用`SetWarnings`off 操作会抑制重要信息，否则您可以使用这些信息来理解代码问题。

当该代码循环遍历记录集时，它只是创建一个`INSERT`语句并为每一行显示它。您可以在立即窗口中查看输出（使用`Ctrl`+`g`键盘快捷键转到那里）。复制其中一个`INSERT`语句并通过粘贴到新 Access 查询的 SQL 视图中进行测试。如果它在那里失败，找出你需要改变什么来满足数据库引擎。如果`INSERT`成功，请尝试从您的代码中执行它们：`db.Execute`通过从该行的开头删除单引号来启用该行。

您编写`VALUES`子句的方式似乎`[ExpirationDate]`是一个文本字段。但是，如果它的数据类型实际上是日期/时间，则不要在要插入的值周围加上引号；使用`#`日期分隔符而不是引号。

还要确保包含`Option Explicit`在代码模块的声明部分中，如下所示：

```
Option Compare Database
Option Explicit 
```

我提到了这一点，因为在这个问题的早期版本中你展示了`Option Compare`但没有`Option Explicit`。尝试对代码进行故障排除`Option Explicit`是浪费时间 IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:00:53.120

我不确定您要在这里做什么；很难理解声明`ErrorHandler`中的内容`Else`（即使已评论）。

就循环记录集而言，我建议您阅读一些有关 MS-Access 中 VBA 编程基础的内容。您可以从阅读以下文章开始。这是关于 VBA 记录集的快速介绍，然后是 VBA 中最常见的错误。

[http://allenbrowne.com/ser-29.html](http://allenbrowne.com/ser-29.html)

[http://www.techrepublic.com/blog/10things/10-mistakes-to-avoid-when-using-vba-recordset-objects/373](http://www.techrepublic.com/blog/10things/10-mistakes-to-avoid-when-using-vba-recordset-objects/373)

它应该可以帮助您改进代码。

# javascript - 画布：无间断的曲线

> ID：14058097
> 
> 赞同：1
> 
> 时间：2012-12-27T16:45:22.567
> 
> 标签：javascript, html, canvas

我已经在`canvas`. 但是我遇到了一个问题：

当线宽很小时（3），曲线看起来不错；
当线宽大（20）时，曲线由于断裂而看起来不好。

![在此处输入图像描述](../Images/6195de82898fa67e3ed17c1e8244a4f1.png)

```
canvas.node.onmousemove = function (e) {
         if (!canvas.isDrawing) {
             return;
         }
         var x = e.pageX - this.offsetLeft;
         var y = e.pageY - this.offsetTop;
         ctx.beginPath();
         ctx.moveTo(canvas.lastX, canvas.lastY);
         ctx.strokeStyle = '#000000';
         ctx.lineWidth = self.lineWidth();
         ctx.lineTo(x, y);
         ctx.stroke();
         ctx.closePath();
         canvas.lastX = x;
         canvas.lastY = y;
};
canvas.node.onmousedown = function (e) {
         canvas.isDrawing = true;
         canvas.lastX = e.pageX - this.offsetLeft;
         canvas.lastY = e.pageY - this.offsetTop;
};
canvas.node.onmouseup = function (e) {
         canvas.isDrawing = false;
}; 
```

如何避免大线中断并使我的线稳固？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:05:12.443

您是否尝试过将`lineJoin`属性设置为画布上下文？

设置后添加以下行`lineWidth`。

```
ctx.lineJoin = 'round'; 
```

如果您在完成所有使用的渲染之前*关闭*了路径，这将*不起作用*。*`lineTo``ctx.closePath()`*

 *您必须在开始绘制线条*之前*打开路径，并在完成绘制线条*后*关闭它。

此外，如果您在绘图`moveTo`期间使用移动绘图光标，`lineJoin`则不会发挥作用。

您可以尝试以下修改后的代码（最后我还包含了一个 JSFiddle 链接）。

**编辑 1：**更新了代码，因为我忘了向`lineJoin`其中添加属性。

**编辑 2：**将该`moveTo`行移至适当的侦听器方法。

```
canvas.node.onmousemove = function (e) {
         if (!canvas.isDrawing) {
             return;
         }
         var x = e.pageX - this.offsetLeft;
         var y = e.pageY - this.offsetTop;

         ctx.lineTo(x, y);
         ctx.stroke();

         canvas.lastX = x;
         canvas.lastY = y;
};
canvas.node.onmousedown = function (e) {
         canvas.isDrawing = true;
         canvas.lastX = e.pageX - this.offsetLeft;
         canvas.lastY = e.pageY - this.offsetTop;

         ctx.moveTo(canvas.lastX, canvas.lastY);
         ctx.beginPath();
         ctx.strokeStyle = '#000000';
         ctx.lineWidth = self.lineWidth();
         ctx.lineJoin = 'round';

};
canvas.node.onmouseup = function (e) {
         ctx.closePath();
         canvas.isDrawing = false;
}; 
```

[在这里](http://jsfiddle.net/uFagt/2/)工作 JSFiddle 。*

# mysql - 如何获得现在前两个月的时间？

> ID：14058100
> 
> 赞同：0
> 
> 时间：2012-12-27T16:45:40.527
> 
> 标签：mysql

我将使用**DATE_ADD**，现在如果我想获得从 2012-10-1 到现在的时间，我该怎么办？时间格式：2012-12-01 00:32:01

```
 created=DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD( DATE_ADD(
         NOW(), 
         INTERVAL 1 YEAR),
         INTERVAL 11*RAND() MONTH),
         INTERVAL 30*RAND() DAY),
         INTERVAL 23*RAND() HOUR),
         INTERVAL 59*RAND() MINUTE),
         INTERVAL 60*RAND() SECOND) 
```

当我使用上面的代码时，它得到的时间不是我想要的。谢谢。如何纠正？

例如：`30*RAND(3)` 价值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:22:50.177

尝试这个

```
SET @MIN = '2010-04-30 14:53:27';
SET @MAX = '2012-04-30 14:53:27';
SELECT TIMESTAMPADD(SECOND, FLOOR(RAND() * TIMESTAMPDIFF(SECOND, @MIN, @MAX)), @MIN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:10:08.927

`FROM_UNIXTIME(UNIX_TIMESTAMP('2012-10-01') + (RAND() * (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP('2012-10-01'))), '%Y-%m-%d %H:%i:%s')`

应该这样做，我想。

函数可以在[这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)找到。

# android - Android：如何显示两个 GeoPoint 之间的路线？

> ID：14058103
> 
> 赞同：0
> 
> 时间：2012-12-27T16:46:07.920
> 
> 标签：android, android-mapview, geopoints

使用下一页的示例，它可以完美运行。 [http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html](http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html)

但是当我将坐标更改为我的国家（智利）时，我无法让它显示路线。

我想这一定是个问题。

```
UrlString StringBuilder = new StringBuilder ();
urlString.append ("http://maps.google.com/maps?f=d&hl=en");
urlString.append ("& saddr =");/ / from
urlString.append (Double.ToString ((double) src.getLatitudeE6 () / 1.0E6));
urlString.append (",");
urlString.append (Double.ToString ((double) src.getLongitudeE6 () / 1.0E6));
urlString.append ("& daddr =");/ / to
urlString.append (Double.ToString ((double) dest.getLatitudeE6 () / 1.0E6));
urlString.append (",");
urlString.append (Double.ToString ((double) dest.getLongitudeE6 () / 1.0E6));
urlString.append ("& ie = UTF8 & 0 & om = 0 & output = kml"); 
```

那是问题吗？

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T01:56:37.180

LOGCat：12-30 01：53：29.688：D/dalvikvm（444）：GC_EXTERNAL_ALLOC 在 61 毫秒内释放了 699 个对象/57992 个字节 12-30 01：53：52.207：D/dalvikvm（444）：GC_FOR_MALLOC 释放了 4288 个对象/251664 个字节在 64 毫秒内 12-30 01:53:52.437：D/dalvikvm(444)：GC_FOR_MALLOC 在 63 毫秒内释放了 10135 个对象/618320 个字节 12-30 01:53:52.648：D/dalvikvm(444)：GC_FOR_MALLOC 释放了 4973 个对象/325032 个字节在 60 毫秒内 12-30 01:53:52.869：D/dalvikvm(444)：GC_FOR_MALLOC 在 67 毫秒内释放了 6369 个对象/389008 个字节 12-30 01:53:53.127：D/dalvikvm(444)：GC_FOR_MALLOC 释放了 8604 个对象/656224 个字节在 67 毫秒内 12-30 01:53:53.347：D/dalvikvm(444)：GC_FOR_MALLOC 在 67 毫秒内释放了 8603 个对象 / 609784 个字节 12-30 01:53:53.477：I/Maps.MyLocationOverlay(444)：从 gps 12 请求更新-30 01:53:53.747：I/MapActivity(444)：处理网络更改通知：CONNECTED 12-30 01:53:53.747：E/MapActivity(444): 无法获得连接工厂客户端 12-30 01:53:54.037: D/dalvikvm(444): GC_EXTERNAL_ALLOC 在 71 毫秒内释放了 1000 个对象 / 366296 字节 12-30 01:53:55.858: D/ dalvikvm(444)：GC_EXPLICIT 在 247 毫秒内释放了 8102 个对象/505920 个字节 12-30 01:53:56.218：D/dalvikvm(444)：GC_EXTERNAL_ALLOC 在 57 毫秒内释放了 135 个对象/22680 个字节 12-30 01:53:58.199:D/ dalvikvm(444)：GC_EXPLICIT 在 61 毫秒内释放了 137 个对象/23768 个字节 12-30 01:54:00.468：D/dalvikvm(444)：GC_EXPLICIT 在 56 毫秒内释放了 162 个对象/46864 个字节GC_EXTERNAL_ALLOC 在 57 毫秒内释放了 135 个对象/22680 个字节 12-30 01:53:58.199：D/dalvikvm(444)：GC_EXPLICIT 在 61 毫秒内释放了 137 个对象/23768 个字节 12-30 01:54:00.468:D/dalvikvm(444): GC_EXPLICIT 在 56 毫秒内释放了 162 个对象 / 46864 字节GC_EXTERNAL_ALLOC 在 57 毫秒内释放了 135 个对象/22680 个字节 12-30 01:53:58.199：D/dalvikvm(444)：GC_EXPLICIT 在 61 毫秒内释放了 137 个对象/23768 个字节 12-30 01:54:00.468:D/dalvikvm(444): GC_EXPLICIT 在 56 毫秒内释放了 162 个对象 / 46864 字节

浏览器中的 URL 工作正常。

从：-36.738486,-73.0893 到：-36.825623,-73.054372

谢谢！

# opengl - 使用 OpenGL 绘制图块的技术

> ID：14058104
> 
> 赞同：2
> 
> 时间：2012-12-27T16:46:10.593
> 
> 标签：opengl, tile

到目前为止，我基本上一直在使用 XNA 进行所有编程，并希望使用 C++ 继续使用 OpenGL（以及用于 IO 的 SFML、创建窗口等）。对于初学者，我想创建一个基于图块的游戏，我主要看的是[LazyFoo 的教程](http://lazyfoo.net/tutorials/OpenGL/index.php)。

我只有两个问题：

我应该如何绘制瓷砖？我应该使用即时绘图、数组、VBO 还是什么？VBO 对此感觉有点矫枉过正，但我​​不确定。使用即时绘图非常诱人，但显然它已被弃用。也许它可以用于这个目的，因为它是 2D 的，并且只适用于一堆四边形。

我想要很多不同的图块，因此我的所有图块都不会适合单个纹理而不使其变得庞大。我读过使用 bindTexture 并不是很便宜，因此我应该尽可能避免调用。我想也许我可以为我的纹理创建一个管理器，并将它们拼接成一个大纹理并绑定它，但它的尺寸是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:22:19.507

不要使用立即模式！它使用起来很麻烦，并且已从最近的 OpenGL 版本中删除。使用顶点数组，最好是通过 VBO。最后，它们更容易使用，相信我。

关于纹理的切换。我们正在讨论在非常复杂的场景中优化纹理切换模式。在你的情况下，这根本不重要。

### 更新

现在你担心的事情甚至没有使用它们。这比过早优化更糟糕。我建议您首先掌握 OpenGL，然后开始担心状态切换管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:05:58.617

关于纹理图集；这通常是通过将纹理拼接成二次幂大小的纹理组来完成的。例如，在基于图块的游戏中，您可能有一个特定的图块集（例如，冰世界的图块）在 2 或 3 个纹理上组合在一起。当您想要渲染它们时，您将确定哪些图块是可见的，然后将每个纹理绑定一次并从该纹理渲染图块以用于屏幕上可见的任何图块。

这需要相当多的设置时间才能正确完成。您需要保留有关图集的每个子纹理的信息，以便在引用图块时找到正确的纹理并渲染该纹理的适当区域。您还需要一种对渲染操作进行分组的好方法，以便它们在绑定适当的纹理时发生。

正如 datenwolf 所说，我不会在早期过于关注复杂的纹理系统。纹理的急切绑定将足够快，直到您走得更远。

# java - Selenium 服务器在被 SIGTERM 杀死后没有绑定到套接字

> ID：14058111
> 
> 赞同：5
> 
> 时间：2012-12-27T16:46:53.033
> 
> 标签：java, linux, selenium, jetty

在被杀死一次后，selenium 服务器会挂起所有进一步的启动，甚至没有尝试获取服务器端口。

重新启动可以解决问题。以不同的用户身份运行也会使 selenium 再次启动，但在*该*进程被终止后，它将不再工作。

这是在 VirtualBox VM 中的 Linux 2.6.32-5-amd64（debian 挤压）上。查看系统调用的日志，当它[工作](https://gist.github.com/4389650)时，[当它不](https://gist.github.com/4389655)工作时，某些组件似乎在套接字被绑定之前就锁定了。[硒日志](https://gist.github.com/4389679)没有太大帮助。

输出也没有给出任何指示：

```
$ java -jar selenium-server-standalone-2.28.0.jar
Dec 27, 2012 5:41:35 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
17:41:35.703 INFO - Java: Sun Microsystems Inc. 14.0-b16
17:41:35.704 INFO - OS: Linux 2.6.32-5-amd64 amd64
17:41:35.737 INFO - v2.28.0, with Core v2.28.0\. Built from revision 18309
17:41:35.867 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
17:41:35.868 INFO - Version Jetty/5.1.x
17:41:35.868 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
17:41:35.869 INFO - Started HttpContext[/selenium-server,/selenium-server]
17:41:35.869 INFO - Started HttpContext[/,/] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T16:46:53.033

这是一个Java问题；它的 RNG 不必要地从`/dev/random`. 在 VM 上，随机池是有限的，并且经常在一两次运行后耗尽。出于某种原因，selenium/Jetty 启动的一部分要求有问题的 RNG。要解决此问题，[建议使用 Java`/dev/urandom`代替](https://stackoverflow.com/a/2325109/35070)：

```
java -Djava.security.egd=file:/dev/./urandom \
     -jar selenium-server-standalone-2.28.0.jar 
```

工作正常。

# jquery - How to see changes happening to my HTML by a jQuery script?

> ID：14058114
> 
> 赞同：3
> 
> 时间：2012-12-27T16:47:11.090
> 
> 标签：jquery, html, debugging

What is the best way to see the changes happening to my HTML while something is changed with AJAX / jQuery? The change happens too quickly (and disappears afterwards) for me to properly debug the HTML added through Firebug.

Edit: I did not write the script itself and have no control over it either.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T10:39:30.390

我不确定这是否会对您有所帮助，但您应该在 FF 中运行它并使用 Firebug 和 Venkman（Javascript 调试器）等 FF 插件来调试 HTML 和 JS。

您将能够在 Firebug 中看到 HTML 的动态变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T10:42:54.853

在 Chrome 开发者工具中，你可以选择 DOM-element，并放置 DOM-breakpoint `Subtree modification`。之后，如果某些脚本尝试更改它，调试器将在代码中的这一点中断。不知道其他开发工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T10:43:18.283

```
console.log('usual info log');
console.warn('warning will show exclam. mark in FF or yellow color text in Opera');
console.error('you will definitely recognize it from all the rest'); 
```

如果您打算使用日志观察工作流程，这几个函数应该可以帮助您区分运行时发生的情况。

关于结构更改，正如上面多次提到的，您可以使用断点查看您的 DOM。

# mysql - MySQL Database Error when using Convert or Cast (String to Interger)

> ID：14058115
> 
> 赞同：1
> 
> 时间：2012-12-27T16:47:29.537
> 
> 标签：mysql, codeigniter

Running into the following error in MySQL. I have tried using convert as well with no luck. The customer would like to be able to filter data where a customer ID will be something like: BOB102, REB293, REC203\. I will need to pretty much be searching for customer numbers > 200, and so on.

**You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INTEGER)) > 0 )' at line 6**

```
SELECT `orders_jobs`.* 
FROM (`orders_jobs`) 
INNER JOIN `orders_users` ON `orders_jobs`.`customer` = `orders_users`.`id` 
WHERE `orders_jobs`.`active` = 1 
AND `orders_users`.`active` = 1 
AND ( CAST(orders_users.cust_number AS INTEGER)) > 0 ) 
```

Now these may not always be 3 string characters long it might be 4 also, ie: BKER2938

**NOTE**: As Edga mentioned, I needed to use UNSIGNED instead of integer, but because of the characters it is converting all to 0 instead, is there possibly a different method?

**Data Examples (for the field cust_number):** MTQ32499,BGM31620,RES42935,CAM31717,CRED31672 (note the last one is 4 chars. I believe it will only be 3 or 4 characters long)

I need to return only the customers who have cust_number > 40000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:50:51.780

你应该使用

```
CAST AS SIGNED 
```

或者

```
CAST AS UNSIGNED 
```

更多信息[在这里](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)

- 编辑

作为一种解决方法，如果最后 5 个字符始终是数字，则可以使用[SUBSTRING](http://dev.mysql.com/doc/refman/5.0/en//string-functions.html#function_substring)

# javascript - 确认回发 OnClientClick 按钮 ASP.NET

> ID：14058116
> 
> 赞同：46
> 
> 时间：2012-12-27T16:47:29.877
> 
> 标签：javascript, asp.net, button, postback

```
<asp:Button runat="server" ID="btnUserDelete" Text="Delete" CssClass="GreenLightButton"
                           OnClick="BtnUserDelete_Click"
                           OnClientClick="return UserDeleteConfirmation();" 
 meta:resourcekey="BtnUserDeleteResource1" /> 
```

我试过了：

```
function UserDeleteConfirmation() {
        if (confirm("Are you sure you want to delete this user?"))
            return true;
        else
            return false;
} 
```

和

```
function UserDeleteConfirmation() {
    if (confirm("Are you sure you want to delete this user?")) {
            __doPostBack(btnUserDelete, '');
    }

    return false;
 } 
```

而且它们都不起作用。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-27T16:53:54.443

试试这个：

```
<asp:Button runat="server" ID="btnUserDelete" Text="Delete" CssClass="GreenLightButton"
                       OnClick="BtnUserDelete_Click"
                       OnClientClick="if ( ! UserDeleteConfirmation()) return false;" 
 meta:resourcekey="BtnUserDeleteResource1" /> 
```

这样，“返回”仅在用户单击“取消”时执行，而不是在他单击“确定”时执行。

顺便说一句，您可以将 UserDeleteConfirmation 函数缩短为：

```
function UserDeleteConfirmation() {
    return confirm("Are you sure you want to delete this user?");
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-06-05T16:25:47.610

这里有一些可行的解决方案，但我没有看到任何人解释这里实际发生的事情，所以即使这是 2 岁，我也会解释它。

您添加的 onclientclick javascript 没有任何“错误”。问题是 asp.net 将它添加到 onclick 的东西上，以便在你放在那里的任何代码运行之后运行。

例如这个 ASPX：

```
<asp:Button ID="btnDeny" runat="server" CommandName="Deny" Text="Mark 'Denied'" OnClientClick="return confirm('Are you sure?');" /> 
```

渲染时变成这个 HTML：

```
<input name="rgApplicants$ctl00$ctl02$ctl00$btnDeny" id="rgApplicants_ctl00_ctl02_ctl00_btnDeny" 
onclick="return confirm('Are you sure?');__doPostBack('rgApplicants$ctl00$ctl02$ctl00$btnDeny','')" type="button" value="Mark 'Denied'" abp="547"> 
```

如果您仔细观察，将永远无法到达 __doPostBack 内容，因为“确认”将始终在到达 __doPostBack 之前返回 true/false。

这就是为什么您需要确认仅返回 false 而在值为 true 时不返回的原因。从技术上讲，它返回 true 还是 false 都没有关系，这种情况下的任何返回都会产生阻止调用 __doPostBack 的效果，但是为了约定，我会保留它，以便它在 false 时返回 false 并且对 true 不执行任何操作.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-22T14:29:49.940

您可以像这样将上述答案放在一行中。而且你不需要编写函数。

```
 <asp:Button runat="server" ID="btnUserDelete" Text="Delete" CssClass="GreenLightButton"
         OnClick="BtnUserDelete_Click" meta:resourcekey="BtnUserDeleteResource1"
OnClientClick="if ( !confirm('Are you sure you want to delete this user?')) return false;"  /> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-27T17:18:26.373

使用 jQuery UI 对话框：

脚本：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
 $(function () {

            $("#<%=btnUserDelete.ClientID%>").on("click", function (event) {
                event.preventDefault();
                $("#dialog-confirm").dialog({
                    resizable: false,
                    height: 140,
                    modal: true,
                    buttons: {
                        Ok: function () {
                            $(this).dialog("close");
                            __doPostBack($('#<%= btnUserDelete.ClientID %>').attr('name'), '');
                        },
                        Cancel: function () {
                            $(this).dialog("close");
                        }
                    }
                });
            });
 });
</script> 
```

HTML：

```
<div id="dialog-confirm" style="display: none;" title="Confirm Delete">
    <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>Are you sure you want to delete this user?</p>
</div> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-27T16:49:46.987

试试这个 ：

```
<asp:Button runat="server" ID="btnUserDelete" Text="Delete" CssClass="GreenLightButton" 
   onClientClick=" return confirm('Are you sure you want to delete this user?')" 
   OnClick="BtnUserDelete_Click"  meta:resourcekey="BtnUserDeleteResource1"  /> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-06-21T17:35:22.437

代码是这样的：

在 Aspx 中：

```
<asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" CausesValidation=true /> 
```

在 CS 中：

```
protected void Page_Load(object sender, System.EventArgs e)
{
     if (!IsPostBack)
     {
         btnSave.Attributes["Onclick"] = "return confirm('Do you really want to save?')";          
     }
}

protected void btnSave_Click(object sender, EventArgs e){
    Page.Validate();
    if (Page.IsValid)
    {
       //Update the database
         lblMessage.Text = "Saved Successfully";
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-27T17:11:35.127

试试这个： `OnClientClick="return confirm('Are you sure ?');"` 还设置：`CausesValidation="False"`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-04-22T16:53:40.410

试试这个：

```
<asp:Button runat="server" ID="btnDelete" Text="Delete"
   onClientClick="javascript:return confirm('Are you sure you want to delete this user?');" OnClick="BtnDelete_Click" /> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-29T13:56:17.523

这是在确认之前进行客户端验证的简单方法。它利用内置的 ASP.NET 验证 javascript。

```
<script type="text/javascript">
    function validateAndConfirm() {
        Page_ClientValidate("GroupName");  //'GroupName' is the ValidationGroup
        if (Page_IsValid) {
            return confirm("Are you sure?");
        }
        return false;
    }
</script>

<asp:TextBox ID="IntegerTextBox" runat="server" Width="100px" MaxLength="6" />
<asp:RequiredFieldValidator ID="reqIntegerTextBox" runat="server" ErrorMessage="Required"
    ValidationGroup="GroupName"  ControlToValidate="IntegerTextBox" />
<asp:RangeValidator ID="rangeTextBox" runat="server" ErrorMessage="Invalid"
    ValidationGroup="GroupName" Type="Integer" ControlToValidate="IntegerTextBox" />
<asp:Button ID="SubmitButton" runat="server" Text="Submit"  ValidationGroup="GroupName"
    OnClick="SubmitButton_OnClick" OnClientClick="return validateAndConfirm();" /> 
```

来源：[使用来自 Javascript 的 ASP.Net 验证器控件的客户端验证](http://techbrij.com/client-side-validation-using-asp-net-validator-controls-from-javascript "使用来自 Javascript 的 ASP.NET 验证器控件的客户端验证")

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-12T12:02:37.587

试试这个：

```
function Confirm() {
    var confirm_value = document.createElement("INPUT");
    confirm_value.type = "hidden";
    confirm_value.name = "confirm_value";

        if (confirm("Your asking")) {
            confirm_value.value = "Yes";
            document.forms[0].appendChild(confirm_value);
        }
    else {
        confirm_value.value = "No";
        document.forms[0].appendChild(confirm_value);
    }
} 
```

在按钮调用功能中：

```
<asp:Button ID="btnReprocessar" runat="server" Text="Reprocessar" Height="20px" OnClick="btnReprocessar_Click" OnClientClick="Confirm()"/> 
```

在类 .cs 调用方法中：

```
 protected void btnReprocessar_Click(object sender, EventArgs e)
    {
        string confirmValue = Request.Form["confirm_value"];
        if (confirmValue == "Yes")
        {

        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-24T11:57:33.240

我知道这是旧的，有很多答案，有些真的很复杂，可以快速和内联：

```
<asp:Button runat="server" ID="btnUserDelete" Text="Delete" CssClass="GreenLightButton" OnClick="BtnUserDelete_Click" OnClientClick="return confirm('Are you sure you want to delete this user?');" meta:resourcekey="BtnUserDeleteResource1" /> 
```

# batch-file - 查找具有特定扩展名的文件并在命令行中用作参数

> ID：14058117
> 
> 赞同：-2
> 
> 时间：2012-12-27T16:47:33.780
> 
> 标签：batch-file

我有个问题。我需要一个脚本（用于 .bat 文件）在当前文件夹中查找扩展名为 .appx 的文件并将其用作脚本中的参数`add-appxpackage {Path to this file}`

这是用于 Windows 8 软件包安装（用于测试需要）。只是为了在测试环境中快速更新程序的新版本。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:37:13.603

在批处理文件中，使用该`for`语句为目录中的每个文件运行命令。

```
@for %%a in (*.appx) do ( add-appxpackage "%%~fa" ) 
```

有关更多信息，`help for`请在命令行中键入。

# c++-cli - excution in a folder that dosen't have the dlls used

> ID：14058121
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:47:59.203
> 
> 标签：c++-cli

there is any way to have an execution file (*.exe) that run in a folder that doesn't have the dlls referenced by the project??

for example:

```
using namespace System;
using namespace dllNet;

int main(array<System::String ^> ^args)
{
    dllNet::Class1::SayHi();
    Console::WriteLine(L"Hello World");
    return 0;
} 
```

i want to execute my project without dllNet.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:50:15.237

No, unfortunately, the program cannot run without the libraries needed.

# jquery - 我无法弄清楚的 Jquery .siblings() 错误

> ID：14058128
> 
> 赞同：0
> 
> 时间：2012-12-27T16:48:29.590
> 
> 标签：jquery, html, css

嗨，你能看到我在 jquery 上做错了什么吗？我试图做到这一点，当您将鼠标悬停在其中一个文本上时，其他两个将应用 css。错误与 $(".yo") 或 ('blur'); 我把它们链接错了吗？提前致谢

我已经编辑了 jquery，但现在在 mouseout 上它仍然与 css 保持一致？！

**查询：**

```
$(".blur").mouseover(function(){
    $(this).siblings().addClass('blur textshadow');     }).mouseout(function(){
    $(this).siblings().removeClass('textshadow out');
}); 
```

**HTML：**

```
<div class="yo">
<div class="blur out" id="one"> hi </div>
<div class="blur out" id="two"> my </div>
<div class="blur out" id="three"> name </div>
</div> 
```

**CSS：**

```
div.blur
{
text-decoration: none;
color: #339;
}

div.blur:hover, div.blur:focus
{
text-decoration: underline;
color: #933;
}

.textshadow div.blur, .textshadow div.blur:hover, .textshadow div.blur:focus
{
text-decoration: none;
color: rgba(0,0,0,0);
outline: 0 none;
-webkit-transition: 400ms ease 100ms;
-moz-transition: 400ms ease 100ms;
transition: 400ms ease 100ms;
}

.textshadow div.blur,
.textshadow div.blur.out:hover, .textshadow div.blur.out:focus
{
text-shadow: 0 0 4px #339;
}

.textshadow div.blur.out,
.textshadow div.blur:hover, .textshadow div.blur:focus
{
text-shadow: 0 0 0 #339;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:53:07.487

`.blur`是孩子 - 用[`$(this).children()`](http://api.jquery.com/children/).

```
<a class="yo">
    <a class="blur out" id="one"> hi </a>
    <a class="blur out" id="two"> my </a>
    <a class="blur out" id="three"> name </a>
</a> 
```

也就是说，你**不应该**嵌套`<a>`标签。你确定你不是要使用`div`标签吗？

* * *

`.blur`是兄弟姐妹 - 用[`$(this).siblings()`](http://api.jquery.com/siblings/).

```
<a class="yo">whatever</a>
<a class="blur out" id="one"> hi </a>
<a class="blur out" id="two"> my </a>
<a class="blur out" id="three"> name </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:00:46.180

好的，您肯定遇到了兄弟姐妹功能的问题。您使用“yo”类作为选择器，并在询问其兄弟姐妹时使用。它没有兄弟姐妹！您需要获取它的孩子，因为所有其他链接都是“哟”的孩子。

由于我还没有实际测试过您的代码，因此很难判断您是否还有其他问题。但对我来说，在一个链接中有 3 个链接似乎也很奇怪？重点是什么？为什么 div 内没有 3 个链接？

我希望这是一个帮助

问候克里斯汀

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:26:43.347

将其简化为 -

```
$('.blur').hover(
    function(){
        $(this).siblings().addClass('out textshadow');
},  function() {
        $(this).siblings().removeClass('out textshadow');
}); 
```

将您的 CSS 修改为此 -

```
.blur { 
    text-decoration: none; 
    color: #339; }  
div.blur:hover, div.blur:focus {
    text-decoration: underline; 
    color: #933; }  
.textshadow { 
    text-decoration: none; 
    color: rgba(0,0,0,0); 
    outline: 0 none; 
    -webkit-transition: 400ms ease 100ms; 
    -moz-transition: 400ms ease 100ms; 
    transition: 400ms ease 100ms; }  
.out {
    text-shadow: 0 0 4px #339;} 
```

这是一个工作示例：http: [//jsfiddle.net/r2gQ3/](http://jsfiddle.net/r2gQ3/)

顺便说一句 - 最好为 blur 类使用另一个名称，以免与 .blur() 方法混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:07:26.190

改变这个

```
$(".yo").mouseover(function(){ 
```

到

```
$(".yo > div").mouseover(function(){ 
```

乙：

```
$(document).ready(function(){
    $(".yo > div").mouseover(function(){
        $(this).siblings().addClass('blur');
    }).mouseout(function(){
        $(this).siblings().removeClass('blur');
    }); 
}); 
```

测试：http: [//jsbin.com/ajokok/1/edit](http://jsbin.com/ajokok/1/edit)

# python - AttributeError: 'module' object has no attribute 'TemporaryFile'

> ID：14058133
> 
> 赞同：2
> 
> 时间：2012-12-27T16:48:52.017
> 
> 标签：python, import

I am new to python.And i am learning the standard library.

Whenever i run the code below , it always raise the `AttributeError...` And it seems like there is something wrong with the import command.

Also , i try to run it on the interactive interpreator,and it works just fine.

# The sample code

```
import tempfile
import os

#temp = tempfile.TemporaryFile()
temp = tempfile.mktemp()

print "tempfile","=>",temp

file = open(temp,"w+b")
file.write("*" * 1000)
file.seek(0)
print len(file.read()),"byte"
file.close()

try:
   os.remove(temp)
except OSError:
   pass 
```

# The error output

```
Traceback (most recent call last):
  File "tempfile.py", line 1, in <module>
    import tempfile
  File "/home/zhkzyth/codeRep/pytest/tempfile.py", line 5, in <module>
    tempfile = tempfile.mktemp()
AttributeError: 'module' object has no attribute 'mktemp'
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 12, in <module>
    import subprocess, tempfile, os.path, urllib, re, pwd, grp, os
  File "/home/zhkzyth/codeRep/pytest/tempfile.py", line 5, in <module>
    tempfile = tempfile.mktemp()
AttributeError: 'module' object has no attribute 'mktemp'

Original exception was:
Traceback (most recent call last):
  File "tempfile.py", line 1, in <module>
    import tempfile
  File "/home/zhkzyth/codeRep/pytest/tempfile.py", line 5, in <module>
    tempfile = tempfile.mktemp()
AttributeError: 'module' object has no attribute 'mktemp' 
```

# My enviroment

*   ubuntu12.04
*   python2.7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:54:48.577

你给自己的文件命名了`tempfile.py`吗？如果是这样，请将其重命名，删除所有 *.pyc 文件，然后重试。

PS：提供带有回溯的错误的实际文本会告诉我们这些事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-27T17:01:53.837

尝试访问不属于模块中的类或函数的属性会引发 AttributeError 异常，该属性可能已在使用的更高版本的 Python 解释器中被弃用。我建议您检查您正在运行的 Python 的版本，并确保您的 dir(module) 包含您尝试使用的属性

# php - Onclick leads function leads to increment resets the page, value + 1

> ID：14058135
> 
> 赞同：2
> 
> 时间：2012-12-27T16:49:02.860
> 
> 标签：php, javascript, function, session, onclick

I was searching for hours now and still couldn't find the correct answer. This might seem simple but I need your help, here's the Problem: There are two buttons, 1.) increment button and 2.) decrement(subtract) button, when I click button 1, the value $a get +1 when I click button 2, $a get -1.

Seems simple right?

It should go back to the same page (reload), with the changed value $a

ex: $a = 0;
1.) click increment button 2.) reload page $a = 1; 3.) click decrement button $a=0

very simple, I'm just not that good to figure it out on my own.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:36:22.650

如果要在重新加载/页面更改后保存要使用的变量，则需要将该变量存储在 cookie 或会话中。在这种情况下，我会推荐会话。所以这里有一个例子：

**脚本名称：** index.php

```
<?PHP
    /* You need to start a session in order to 
    *  store an retrieve variables. 
    */
    session_start();
    if(!isset($_SESSION['value'])) { // If no session var exists, we create it.
        $_SESSION['value'] = 0; // In this case, the session value start on 0.
    }

    if(isset($_GET['action'])) {
        switch($_GET['action']) {
            case 'add': // Yeah, PHP allows Strings on switchs.
                $_SESSION['value'] ++;
            break;
            case 'remove':
                $_SESSION['value'] --;
            break;
        }
        /* If you avoid the next two lines, you'll be adding or removing when
        *  you refresh, so we'll redirect the user to this same page.
        *  You should change the 'index.php' for the name of your php file.
        */
        header("Location: index.php");
        exit();
    }
?>

<html>
    <head>
        <title>:: Storing user values in session ::</title>
    </head>
    <body>
        <p>The current value is: <?PHP echo $_SESSION['value']; ?></p>
        <p><a href="?action=add" target="_SELF">Increase value</a></p>
        <p><a href="?action=remove" target="_SELF">Decrease value</a></p>
    </body>
</html> 
```

如果您将该代码保存在一个名为“index.php”的单个 php 文件中，您将看到您正在寻找的行为。

我希望这对您有所帮助，并祝您新年快乐！

PS：请注意，在这种情况下，我只使用单一的动作。我在这里没有使用 Javascript，因为您的问题的标题是 PHP。如果您想使用 Javascript 或 JQuery 执行此操作，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:34:06.400

我不是 php 开发人员，但根据您的问题，我了解到您丢失了变量的值，因为它重新加载并将所有变量重置为默认值。您确定要做的是持久化（可能在 cookie、会话或服务器中，并始终从这些存储中加载值）。

# ajax - POST is not getting through to web service

> ID：14058139
> 
> 赞同：2
> 
> 时间：2012-12-27T16:49:25.543
> 
> 标签：ajax, jquery, autocomplete, asmx, jquery-1.8

I've added my code to pastebin at the following address: [http://pastebin.com/L03zGPhS](http://pastebin.com/L03zGPhS) The service is up and running. I can invoke it. I am additionally using firebug and getting the following results on the POST:

```
POST http://localhost:51204/AddrService.asmx/GetZipCode
15ms    
HeadersPostResponse
JSON
zip
"40"
Source
{'zip': '40' } 
```

Showing the service function:

```
 [WebMethod]
  public List<Zip> GetZipCode(string zip) 
```

I can get this to work with jQuery 1.4.2, but I'm upgrading a lot of jQuery widgets to 1.8 and can't get the autocomplete to work. Am I missing something they changed in the AJAX autocomplete call. Documentation to a correct answer will suffice if it is useful.

UPDATE I found through Google Chrome that I'm getting a 500 error. I'm not certain why because I'm hitting localhost on both the service and the aspx page. Does anybody know if they changed something that would affect the security of hitting localhost, or if I could have possibly left out and important jQuery reference that would let autocomplete work for 1.4 but not 1.8?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:02:57.337

也许这可以阐明您的问题——自动完成 API 指出：

> “即使遇到错误，您也必须始终调用响应回调。这样可以确保小部件始终具有正确的状态。”

（来源：[http](http://api.jqueryui.com/autocomplete/#option-source) ://api.jqueryui.com/autocomplete/#option-source ）

# java - 如何告诉 Java 库在 Jython 中使用哪些属性

> ID：14058146
> 
> 赞同：2
> 
> 时间：2012-12-27T16:49:45.207
> 
> 标签：java, properties, jasper-reports, jython

我在使用 Jython 运行 xmldatasource 示例项目时遇到问题。

这是我的代码：

```
#!/usr/bin/jython

"""
 - cd buildEnv/xmldatasource; ant javac
 - cd buildEnv/xmldatasource/build/classes; jar -cf xmldatasource.jar XmlDataSourceApp.class
 - copy buildEnv/xmldatasource/build/classes/xmldatasource.jar to deploy/lib/xmldatasource.jar
"""

import os
import sys

cwd = os.path.realpath(".")

sys.path.extend([cwd + '/lib/xmldatasource.jar'])
sys.path.extend([cwd + '/lib/jasperreports-5.0.0.jar'])
sys.path.extend([cwd + '/lib/ant-1.7.1.jar'])
sys.path.extend([cwd + '/lib/antlr-2.7.5.jar'])
sys.path.extend([cwd + '/lib/barbecue-1.5-beta1.jar'])
sys.path.extend([cwd + '/lib/barcode4j-2.1.jar'])
sys.path.extend([cwd + '/lib/batik-anim.jar'])
sys.path.extend([cwd + '/lib/batik-awt-util.jar'])
sys.path.extend([cwd + '/lib/batik-bridge.jar'])
sys.path.extend([cwd + '/lib/batik-css.jar'])
sys.path.extend([cwd + '/lib/batik-dom.jar'])
sys.path.extend([cwd + '/lib/batik-ext.jar'])
sys.path.extend([cwd + '/lib/batik-gvt.jar'])
sys.path.extend([cwd + '/lib/batik-parser.jar'])
sys.path.extend([cwd + '/lib/batik-script.jar'])
sys.path.extend([cwd + '/lib/batik-svg-dom.jar'])
sys.path.extend([cwd + '/lib/batik-svggen.jar'])
sys.path.extend([cwd + '/lib/batik-util.jar'])
sys.path.extend([cwd + '/lib/batik-xml.jar'])
sys.path.extend([cwd + '/lib/bcel-5.2.jar'])
sys.path.extend([cwd + '/lib/bsh-2.0b4.jar'])
sys.path.extend([cwd + '/lib/castor-1.2.jar'])
sys.path.extend([cwd + '/lib/commons-beanutils-1.8.0.jar'])
sys.path.extend([cwd + '/lib/commons-collections-2.1.1.jar'])
sys.path.extend([cwd + '/lib/commons-digester-2.1.jar'])
sys.path.extend([cwd + '/lib/commons-javaflow-20060411.jar'])
sys.path.extend([cwd + '/lib/commons-logging-1.1.1.jar'])
sys.path.extend([cwd + '/lib/dom4j-1.6.1.jar'])
sys.path.extend([cwd + '/lib/groovy-all-2.0.1.jar'])
sys.path.extend([cwd + '/lib/hibernate3.jar'])
sys.path.extend([cwd + '/lib/hsqldb-1.8.0-10.jar'])
sys.path.extend([cwd + '/lib/iText-2.1.7.js1.jar'])
sys.path.extend([cwd + '/lib/jackson-annotations-2.0.5.jar'])
sys.path.extend([cwd + '/lib/jackson-core-2.0.5.jar'])
sys.path.extend([cwd + '/lib/jackson-databind-2.0.5.jar'])
sys.path.extend([cwd + '/lib/jaxen-1.1.1.jar'])
sys.path.extend([cwd + '/lib/jcommon-1.0.15.jar'])
sys.path.extend([cwd + '/lib/jdt-compiler-3.1.1.jar'])
sys.path.extend([cwd + '/lib/jfreechart-1.0.12.jar'])
sys.path.extend([cwd + '/lib/jpa.jar'])
sys.path.extend([cwd + '/lib/jxl-2.6.10.jar'])
sys.path.extend([cwd + '/lib/log4j-1.2.15.jar'])
sys.path.extend([cwd + '/lib/mondrian-3.1.1.12687.jar'])
sys.path.extend([cwd + '/lib/png-encoder-1.5.jar'])
sys.path.extend([cwd + '/lib/poi-3.7-20101029.jar'])
sys.path.extend([cwd + '/lib/poi-ooxml-3.7-20101029.jar'])
sys.path.extend([cwd + '/lib/poi-ooxml-schemas-3.7-20101029.jar'])
sys.path.extend([cwd + '/lib/rhino-1.7R3.jar'])
sys.path.extend([cwd + '/lib/saaj-api-1.3.jar'])
sys.path.extend([cwd + '/lib/serializer.jar'])
sys.path.extend([cwd + '/lib/servlet-api-2.4.jar'])
sys.path.extend([cwd + '/lib/spring-beans-2.5.5.jar'])
sys.path.extend([cwd + '/lib/spring-core-2.5.5.jar'])
sys.path.extend([cwd + '/lib/velocity-1.7-dep.jar'])
sys.path.extend([cwd + '/lib/xalan-2.7.1.jar'])
sys.path.extend([cwd + '/lib/xbean.jar'])
sys.path.extend([cwd + '/lib/xercesImpl-2.9.0.jar'])
sys.path.extend([cwd + '/lib/xml-apis-ext.jar'])
sys.path.extend([cwd + '/lib/xml-apis.jar'])

import XmlDataSourceApp

from java import util
import java.io as javaio 
properties = util.Properties()
propertiesfis =javaio.FileInputStream("jasperreports.properties") 
properties.load(propertiesfis) 

javaObj = XmlDataSourceApp()

javaObj.fill() 
```

如您所见，应该加载所有依赖项。当我尝试调用 fill() 方法时，我收到以下错误： l

```
og4j:WARN No appenders could be found for logger (net.sf.jasperreports.extensions.ExtensionsEnvironment).
log4j:WARN Please initialize the log4j system properly.
Traceback (innermost last):
  File "java.py", line 84, in ?
at net.sf.jasperreports.engine.util.JRQueryExecuterUtils.getExecuterFactory(JRQueryExecuterUtils.java:114)
at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:1082)
at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:667)
at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1258)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:877)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:126)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:464)
at net.sf.jasperreports.engine.JasperFillManager.fillToFile(JasperFillManager.java:249)
at net.sf.jasperreports.engine.JasperFillManager.fillToFile(JasperFillManager.java:155)
at net.sf.jasperreports.engine.JasperFillManager.fillReportToFile(JasperFillManager.java:678)
at XmlDataSourceApp.fill(XmlDataSourceApp.java:132)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)

net.sf.jasperreports.engine.JRRuntimeException: net.sf.jasperreports.engine.JRRuntimeException: No query executer factory registered for the 'xPath' language. 
```

我只使用 jython java.py 运行此代码。

我认为代码不起作用，但我不知道如何正确设置属性。根据示例项目，该属性必须设置如下：

```
net.sf.jasperreports.xpath.executer.factory=net.sf.jasperreports.engine.util.xml.JaxenXPathExecuterFactory 
```

但是如果我使用 Jython 会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:19:28.350

我使用 PY4J 而不是 Jython 解决了 java 属性的问题。

# g-wan - How to disable G-WAN servlet internal cache?

> ID：14058150
> 
> 赞同：1
> 
> 时间：2012-12-27T16:49:57.127
> 
> 标签：g-wan

gwan version: 3.12.26

servlet type: C and Perl

problem:

gwan internal cache make request not re-read the script

test:

1.  create 'log' dir :

    ```
    [bash]# mkdir -p /dev/shm/random-c
    [bash]# chmod 777 /dev/shm/random-c 
    ```

2.  create /path/to/gwan/0.0.0.0_8080/#0.0.0.0/csp/random.c

    ```
    // ============================================================================
    // C servlet sample for the G-WAN Web Application Server (http://trustleap.ch/)
    // ----------------------------------------------------------------------------
    // hello.c: just used with Lighty's Weighttp to benchmark a minimalist servlet
    // ============================================================================
    // imported functions:
    //   get_reply(): get a pointer on the 'reply' dynamic buffer from the server
    //    xbuf_cat(): like strcat(), but it works in the specified dynamic buffer
    // ----------------------------------------------------------------------------
    #include <sys/time.h>
    #include "gwan.h" // G-WAN exported functions
    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    //------------------
    void init_random(){
        struct /*sys/time.h->*/timeval res;
        /*sys/time.h->*/gettimeofday(&res,NULL);
       /*stdlib.h->*/srand( (unsigned int)/*stdlib.h->*/time(NULL) + res.tv_usec);
    }

    //------------------
    char *get_rnd_char(int num){
        char *char_list = "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        int  char_list_len = 62;
        char *ret = (char *)/*stdlib.h->*/malloc((num * sizeof(char)) + 1);
        int i,r;

        for(i=0;i<num;i++){
            r=(int) (/*stdlib.h->*/rand() % char_list_len);
            ret[i] = char_list[r==char_list_len ? r-1 : r];
        }
        ret[num] = '\0';
        return ret;
    }

    //------------------
    int main(int argc, char *argv[])
    {
        char *rnd_out; //-- random data for browser output and file input
        char *rnd_file; //-- random file
        char *rnd_path; //-- for speed let's make on ramdisk /dev/shm/random-c/
        char *t;
        FILE *F;

        int num_char=10;
        int arg_cnt=1;

        if(argc>0){
            //-- why nobody love C ? one of the reason is these kind parsing thing
            while ((t = /*string.h->*/strtok(argv[0], "=")) != NULL) {
                argv[0] = NULL;
                if(arg_cnt == 2){
                    num_char = /*stdlib.h->*/atoi(t);
                }
                arg_cnt++;
            }
        }else{
            //-- get random number betwen 1 to 1000
            num_char = (rand() % 1000)+1;
        }

        init_random();

       //-- create random data
        rnd_out = get_rnd_char(num_char);

        //-- creating "log" path
        //-- why nobody love C ? more reason
       rnd_file = get_rnd_char(20);
       // "/dev/shm/random-c/xxxxxxxxxxxxxxxxxxxx" -> 38 chars + 1 for \0
       rnd_path = (char *)/*stdlib.h->*/malloc((38 * sizeof(char)) + 1);
       rnd_path[0] = '\0';
       /*string.h->*/strcat(rnd_path,"/dev/shm/random-c/");
       /*string.h->*/strcat(rnd_path,rnd_file);

        //-- save to file
        F = /*stdio.h->*/fopen(rnd_path,"w");
            /*stdio.h->*/fprintf(F,"%s",rnd_out);
        /*stdio.h->*/fclose(F);

       //-- send output to browser
       /*gwan.h->*/xbuf_cat(get_reply(argv), rnd_out);

        //-- cleanup memory
        //-- why nobody love C ? MAIN reason: no easy way of memory management
       /*stdlib.h->*/free(rnd_file);
       /*stdlib.h->*/free(rnd_out);
       /*stdlib.h->*/free(rnd_path);

       return 200; // return an HTTP code (200:'OK')
    }

    // ============================================================================
    // End of Source Code
    // ============================================================================ 
    ```

3.  run on browser:

    ```
    http://localhost:8080/?random.c 
    ```

    then you should have one 20char random file at /dev/shm/random-c/

4.  here the 'problem', run:

    ```
    ab -n 1000 'http://localhost:8080/?random.c' 
    ```

    my ubuntu have output:

    ```
    Finished 1000 requests

    Server Software:        G-WAN
    Server Hostname:        localhost
    Server Port:            8080

    Document Path:          /?random.c
    Document Length:        440 bytes

    Concurrency Level:      1
    Time taken for tests:   0.368 seconds
    Complete requests:      1000
    Failed requests:        361
       (Connect: 0, Receive: 0, Length: 361, Exceptions: 0)
    Write errors:           0
    Total transferred:      556492 bytes
    HTML transferred:       286575 bytes
    Requests per second:    2718.73 [#/sec] (mean)
    Time per request:       0.368 [ms] (mean)
    Time per request:       0.368 [ms] (mean, across all concurrent requests)
    Transfer rate:          1477.49 [Kbytes/sec] received 
    ```

    try:

    ```
    [bash]# ls /dev/shm/random-c/ 
    ```

    the directory only list 4 or 5 random files, which expected was 1000files

5.  tested on random.c and perl's version random.pl

so the back to beginning question, how to disable GWAN internal cache, I try to read gwan user guide for set something in handler, but found nothing (or I miss something in that guide ).

thanks for GWAN team for this great product. any answer welcome .. thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:34:57.663

我认为您正在谈论的功能是微缓存。要禁用它，URI 需要在 200 毫秒内对每个请求都是唯一的。（就像在 URI 上添加随机数）

[G-WAN 常见问题解答](http://gwan.com/faq#cache)状态：

> *“为了免除对前端缓存服务器的需求（并让 G-WAN 用作缓存反向代理），G-WAN 支持微缓存，这是一种 RESTful 功能。当以高并发调用给定 URI 时以及生成payload 需要很长时间，然后 G-WAN 会自动缓存一个页面 200 毫秒（Internet 上的平均延迟）以确保缓存是最新的：在 200 毫秒内，连续请求提供预期的结果。为防止触发微缓存，请对并发请求使用不断变化的查询参数（每个用户会话 id、随机数、计数器等）。*

请注意，对于 v4.10+，默认情况下禁用缓存，请查看`gwan/init.c`文件。

# jquery - zeroclipboard通过jquery触发点击事件

> ID：14058156
> 
> 赞同：3
> 
> 时间：2012-12-27T16:50:50.310
> 
> 标签：jquery, click, zeroclipboard

ZeroClipboard 是一个 javascript + flash 脚本，它允许浏览器将文本放入剪贴板，它在所选元素上放置一个透明的 flash，当您单击它时，您可以将文本插入剪贴板，这可行，没问题，但我想要使其自动化。Onload 在剪贴板中放置一个字符串，以便用户以后可以粘贴它。一些代码 main.js

```
$('document').ready(function() {
ZeroClipboard.setMoviePath("http://url/to/ZeroClipboard.swf");
  var clip=new ZeroClipboard.Client();
 clip.on( 'load', function(client) {
   clip.glue('#redirlink');
} );
}); 
```

html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" >
  <head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="main.js"></script>

    <title>TEST</title>
  </head>
  <body>

      <div >
     <a  id="redirlink" data-clipboard-text="abcd" href="http://alabala.com" >Click HERE</a>

    </div>

  </body>
</html> 
```

好的，现在问题是我如何模拟 zeroClipboard 放置的点击事件？我试过了，`$('#obkect_id").click();`它不起作用（事件触发，但它对剪贴板没有影响，但是当我用鼠标单击时，它起作用了）。有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T05:11:43.650

ZeroClipboard 的最新版本已经取消了 Client()。因此代码也发生了一些变化。在此处从[Github](https://github.com/zeroclipboard/ZeroClipboard)下载最新版本

然后说你想在页面/元素加载时更新/放置一些字符串。假设单击具有 id '#id' 的'元素'，剪贴板需要加载一些文本

```
<script>
var str = 'Some text';
$('element').attr('data-clipboard-text','str');
ZeroClipboard.setDefaults({moviePath:'http://...../ZeroClipboard.swf'});
var clip = new ZeroClipboard($('#id'));
clip.on('complete',function(client, args){
alert('Copied');
});
</script> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T06:55:14.620

不幸的是，您无法模拟对 Flash 对象的单击，并将其设置在剪贴板[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html#](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html#)中。这是 Adob​​e 的一项安全预防措施。

# regex - Vim 正则表达式在行首匹配方括号失败

> ID：14058162
> 
> 赞同：4
> 
> 时间：2012-12-27T16:51:10.430
> 
> 标签：regex, vim, syntax-highlighting, hlsl

我正在为 Direct3D 编写语法文件，但属性有问题：

```
[unroll]
for(int i = 0...) 
```

这里，“展开”是一个属性。我正在使用正则表达式在方括号内查找一些关键字以将它们标识为属性。我正在使用的正则表达式有效，除非在左方括号之前没有空格：

```
[unroll] // does not work
 [unroll] // works 
```

只要至少有一个，左方括号之前的空格（或制表符）的数量无关紧要。

这是我正在使用的正则表达式（简化为仅匹配展开）：

```
syn match hlslAttribute /^\s*\[unroll\]/ 
```

如果使用同样的问题：

```
syn match hlslAttribute /.*\[unroll\]/ 
```

编辑：如评论中所述：它在搜索文件时有效，但在匹配语法突出显示的模式时无效。

当前的语法高亮文件可以在以下位置找到： http: [//pastebin.com/zr1bGLt0](http://pastebin.com/zr1bGLt0)

要为 .fx 或 .hlsl 文件启用语法高亮，您必须将 hlsl.vim 文件（pastebin 中的那个）复制到任何 Vim 安装中的语法文件位置（/syntax: /usr/share/vim/vim73/ syntax/) 并将这一行添加到您的 .vimrc 中：

```
autocmd BufNewFile,BufRead *.fx,*.fxc,*.fxh,*.hlsl set ft=hlsl 
```

然后创建一个具有先前扩展名之一的文件并写入：

```
[unroll]
 [unroll] 
```

第二行将是相同的颜色，而第一行不会。他们两个应该和第二个一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T00:34:28.270

正如您在评论中发现的那样，通常原因是另一个语法组的干扰（在您的情况下，由不同的插件彩虹括号）。如果这是相同语法的一部分，您通常可以通过更改嵌套层次结构来解决问题，但是使用外部插件，您可能不走运。

问题是 Vim 只提供了两种高亮机制，`:syntax`（绑定到缓冲区）和`:match`/`matchadd()`绑定到窗口。因此，如果您想为缓冲区自定义突出显示，则必须使用`:syntax`并冒着干扰文件类型语法的风险，或者使用`matchadd()`并且必须使用复杂的自动命令以使其仅适用于当前缓冲区。

# c - 是否有保证至少有两个字节的 C99 数据类型？

> ID：14058166
> 
> 赞同：0
> 
> 时间：2012-12-27T16:51:15.477
> 
> 标签：c, memory, types, c99, endianness

为了确定系统的字节顺序，我计划将一个**多字节**整数值存储在一个变量中，并通过一个包裹在 a 中的来访问第**一个字节**；例如：`unsigned char``union`

```
union{
    unsigned int val;
    unsigned char first_byte;
} test;

test.val = 1; /* stored in little-endian system as "0x01 0x00 0x00 0x00" */

if(test.first_byte == 1){
    printf("Little-endian system!");
}else{
    printf("Big-endian system!");
} 
```

我想让这个测试跨平台移植，但我不确定 C99 标准是否保证`unsigned int`数据类型的大小大于**一个字节**。此外，由于“C 字节”在技术上不必是 8 位大小，因此我不能使用精确宽度的整数类型（例如`uint8_t`、`uint16_t`等）。

C99 标准是否保证任何 C 数据类型的大小至少为两个字节？

**PS**假设 an`unsigned int`实际上大于一个字节，在所有 C99 兼容平台上，我的`union`行为是否符合我的预期（变量`first_byte`访问 variable 中的第一个字节）？`val`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:58:10.733

由于`int`必须具有至少 16 位的范围，`int`因此将满足您在大多数实际系统上的标准。`short`（和`long`, 和）也是如此`long long`。`int16_t`如果您想要正好 16 位，则必须查看是否`uint16_t`在`<stdint.h>`.

如果您担心`CHAR_BIT`大于 8 的系统，那么您必须更加努力。如果`CHAR_BIT`是 32，则只能`long long`保证容纳两个字符。

* * *

### C 标准对整数类型大小的规定

[理查德 J 罗斯三世](https://stackoverflow.com/users/427309/richard-j-ross-iii)在评论中说：

> 该标准绝对没有说明 int 的大小，只是它必须大于或等于 short，因此，例如，在我工作过的某些系统上它可能是 10 位。

相反，C 标准对不同类型必须支持的范围的下限有规定，10 位的系统`int`不会符合 C。

具体来说，在 ISO/IEC 9899:2011 §5.2.4.2.1 **Sizes of integer types`<limits.h>`**中，它说：

> ¶1 下面给出的值应替换为适用于`#if` 预处理指令的常量表达式。此外，除了`CHAR_BIT`and之外`MB_LEN_MAX`，以下内容应替换为与作为根据整数提升转换的相应类型的对象的表达式具有相同类型的表达式。它们的实现定义值的大小（绝对值）应等于或大于所示值，符号相同。
> 
> — 不是位域的最小对象的位数（字节） `CHAR_BIT 8`
> 
> [...]
> 
> — 类型对象的最小值`short int`
> 
> `SHRT_MIN -32767`// -(2 ^(15) - 1)
> 
> — 类型对象的最大值`short int`
> 
> `SHRT_MAX +32767`// 2 ^(15) - 1
> 
> — 类型对象的最大值`unsigned short int`
> 
> `USHRT_MAX 65535`// 2 ^(16) - 1
> 
> — 类型对象的最小值`int`
> 
> `INT_MIN -32767`// -(2 ^(15) - 1)
> 
> — 类型对象的最大值`int`
> 
> `INT_MAX +32767`// 2 ^(15) - 1
> 
> — 类型对象的最大值`unsigned int`
> 
> `UINT_MAX 65535`// 2 ^(16) - 1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T17:08:38.127

GCC 提供了一些宏来给出系统的字节顺序：[GCC 通用预定义宏](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)

示例（来自提供的链接）：

```
/* Test for a little-endian machine */
#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__ 
```

当然，这仅在您使用 gcc 时才有用。此外，字节序的条件编译可以被认为是有害的。这是一篇很好的文章：[字节顺序谬误](http://commandcenter.blogspot.jp/2012/04/byte-order-fallacy.html)。

我宁愿使用常规条件来让编译器检查另一种情况。IE：

```
if (__BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__)
... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T16:59:02.590

不，什么都不能保证大于一个字节——但可以保证没有（非位域）类型*小于*一个字节，并且一个字节可以容纳 256 个不同的值，所以如果你有 an`int8_t`和 an `int16_t`，那么保证`int8_t`是一个字节，所以`int16_t`必须是两个字节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T17:03:46.090

C 标准只保证 `char <= short <= int <= long <= long long`[ 和`unsigned`] 的大小。因此，理论上，可能存在对于所有尺寸只有一种尺寸的系统。

如果在某些特定架构上不会出错真的很重要，我会添加一段代码来对代码执行类似`if (sizeof(char) == sizeof(int)) exit_with_error("Can't do this....");`的操作。

在几乎所有机器中，`int`或者`short`应该完全没问题。我实际上并不知道任何机器`char`的`int`大小相同，但我 99% 确信它们确实存在。那些机器也可能有它的本机`byte`！= 8 位，例如 9 或 14 位，以及 14、18 或 36 或 28 位的字......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:55:02.367

[查看stdint.h](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html)的手册页（`uint_least16_t`2 个字节）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T16:58:38.643

至少根据[http://en.wikipedia.org/wiki/C_data_types](http://en.wikipedia.org/wiki/C_data_types) - int 的大小保证为两个“char”长。所以，这个测试应该可以工作，尽管我想知道是否有更合适的解决方案。一方面，除了极少数例外，大多数架构的字节序都设置在编译时，而不是运行时。不过，有一些架构可以切换字节顺序（我相信 ARM 和 PPC 是可配置的，但 ARM 传统上是 LE，而 PPC 主要是 BE）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T17:25:07.873

A conforming implementation can have all its fundamental types of size 1 (and hold at least 32 bits worth of data). For such an implementation, however, the notion of endianness is not applicable.

Nothing forbids a conforming implementation to have, say, little-endian `short`s and big-endian `long`s.

So there are three possible outcomes for each integral type: it could be big-endian, little-endian, or of size 1\. Check each type separately for maximum theoretical portability. In practice this probably never happens.

Middle-endian types, or e.g. big-endian stuff on even-numbered pages only, are theoretically possible, but I would refrain from even thinking about such an implementation.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-26T22:23:36.680

While the answer is basically "no", satisfying the interface requirements for the stdio functions requires that the range [0,UCHAR_MAX] fit in `int`, which creates an implicit requirement that `sizeof(int)` is greater than 1 on hosted implementations (freestanding implementations are free to omit stdio, and there's no reason they can't have `sizeof(int)==1`). So I think it's fairly safe to assume `sizeof(int)>1`.

# php - Ajax 邮件程序脚本不起作用，要编辑什么？

> ID：14058168
> 
> 赞同：1
> 
> 时间：2012-12-27T16:51:26.363
> 
> 标签：php, javascript, email, jquery

我没有收到任何电子邮件，可能是什么问题？

ui.js

```
sendEmail = function(username, callback) {
  var msg = getMessage(username);
  $.ajax({
   type: 'POST',
   url: 'ui.php', 
   data: '***What should I type here ?***', 
   success: callback
  }); 
```

用户界面.php

```
<?php
$to = "XXXXXX@gmail.com";
$subject = "you got mail";
$message = $_POST['getMessage'];
$send = @mail($to, $subject, $message);
if(!$send){    
    die();  
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:56:28.077

数据应该是数据的散列。所以在你的情况下：

```
sendEmail = function(username, callback) {
  var msg = getMessage(username);
 $.ajax({
   type: 'POST',
   url: 'ui.php', 
   data: { getMessage : 'Actual message' }, 
   success: callback
  }); 
```

还要确保你定义了你在success-callack中使用的回调函数。如果您对响应不感兴趣，可以将其保留。

还有一个使用 POST 发布 ajax 请求的[快捷方式。](http://api.jquery.com/jQuery.post/)

# objective-c - 用于创建 Core Data 数据库的 Web 服务

> ID：14058174
> 
> 赞同：0
> 
> 时间：2012-12-27T16:51:55.417
> 
> 标签：objective-c, ios, web-services, cocoa, core-data

我有一个 iOS 应用程序，我必须为其开发一个 Web 服务，该服务将创建和填充核心数据数据库（取决于用户权限），以便将其返回到应用程序。

你有什么建议吗？

我应该创建一个核心数据命令行工具以便从任何 Web 服务中使用它吗？

# android - Soundpool 归档

> ID：14058185
> 
> 赞同：1
> 
> 时间：2012-12-27T16:52:38.293
> 
> 标签：android

我有一个用于播放混合音频文件的 SoundPool[]。Soundpools一起玩没有任何问题，而且非常高效！非常简短：

```
 private SoundPool[] sound = new SoundPool[C.ROWS];
    // every sound is initizialized with a load()
    // and when asked...
public void play(int row, int variation) {
    if (mute[row]) return;
    if (variation != 0)
        sound[row].play(variation_scheme[row][variation-1], volume[row], volume[row], PRI, 0, 1f);
} 
```

这只是为了展示！:) 我没有放其他代码，因为一切都很好，这不是一个真正的问题。相反，我的问题是：

如何将应用程序的整个输出重定向到文件，而不是（或除了）音频扬声器？换句话说，有两个主要的解决方案： 1\. 我如何指示 AudioPool 将声音播放（）到文件而不是音频设备？2.或者如何将我的应用程序（甚至所有手机）的所有音频输出重定向到文件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T22:32:11.483

我发现如何录制音频的唯一方法是记录正在按下的声音的每个信息，例如持续时间（使用媒体播放器）、soundID、毫秒时间戳以播放到毫秒、音量、速率（如果需要）。然后将这些写入文本文件（内部或外部）以供以后使用。创建一个播放系统，从文本文件中解码保存的信息并将其组织在一些数组或哈希图中，并通过某种播放方法进行播放，可能使用处理程序和 postDelay 播放声音和所需时间，然后插入必要的数据从数组或哈希图中播放声音。

通过这种方式，您可以拥有自己的数据文件来播放声音序列。

# haskell - 正反，haskell 懒惰方法

> ID：14058187
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:52:46.063
> 
> 标签：haskell

我正在寻找更多关于 haskells 懒惰方法的 Pro 和 contras

***临***

*   无限数据结构的可能性（例如，取 5 [1..] 的 fib）
*   更高的性能：不要做多余的事情（例如 head (map (2 *) [1 .. 10]) 只计算前 2 个）

***魂斗罗***

*   我会更先进，因为有严格的顺序
*   Debuggen 也会比较困难
*   所需内存量和速度的预测也将更加困难

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:38:27.000

首先，[惰性求值](http://en.wikipedia.org/wiki/Lazy_evaluation)并不是在 Haskell 中发明的，这样归类它是不正确的。

其次，Haskell 也有急切的评估（相反；当被提及时评估）的可能性。

第三，惰性评估工具也很容易在其他语言和技术中获得；Python 的生成器（回想一下`xrange`函数）、C++ 中的 Meyers 单例和模板实例化、运行时链接器中的延迟符号解析——都是这种想法的例子。

所以无论如何，适应这个想法和相应的词汇对软件工程师来说永远不会有害。

至于利弊，你提到了主要的。可以命名更多（请记住，您几乎可以使用任何具有数据结构和函数调用的语言来执行这些操作）：

*   [**递归**](http://www.haskell.org/haskellwiki/Tying_the_Knot)数据结构，例如，您可以在其中创建一个列表值，其中元素排列成一个圆圈，头部是`next`“最后一个”的元素；遍历这样的列表将产生无限重复的元素序列。可能不是最有启发性的例子，但你可以对树、图表等做同样的事情。

*   使用惰性数据结构而不是内置原语来安排**控制流；**想想用惰性列表构建[协程。](http://en.wikipedia.org/wiki/Coroutine)这实际上是更复杂和令人费解的评估顺序的硬币的另一面（即你的*对手*是一个优势）。

*   计算的半自动**并行**化。这更多的是[引用透明性](https://stackoverflow.com/questions/210835/what-is-referential-transparency)的优势，而不是懒惰的评估；但是，这些功能仍然非常有机地融合在一起。

*   在性能方面，当考虑惰性评估时，经常会想到**[记忆化；](http://en.wikipedia.org/wiki/Memoization)**尽管自动执行它是一个很难（可能仍未解决）的问题，其中包含许多细节和陷阱。

所以，基本上，如果你更深入地观察它，每个方面都伴随着可能性和权衡；作为一名软件工程师，你的任务是了解所有这些，并根据具体的问题细节做出明智的选择。

# javascript - 使用 Underscore.js 从 Object 中删除空属性/虚假值

> ID：14058193
> 
> 赞同：87
> 
> 时间：2012-12-27T16:53:08.547
> 
> 标签：javascript, arrays, object, underscore.js

我有一个具有多个属性的对象。我想删除任何具有虚假值的属性。

这可以通过[`compact`](http://underscorejs.org/#compact)on 数组来实现，但是对象呢？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2014-10-10T08:45:44.470

从下划线版本 1.7.0 开始，您可以使用[`_.pick`](http://underscorejs.org/#pick)：

```
_.pick(sourceObj, _.identity) 
```

## 解释

第二个参数`_.pick`可以是用于选择值的谓词函数。选择谓词返回*真*值的值，而忽略谓词返回*假值的值。*

> **挑选**_.pick（对象，*键）
> 
> **返回object**的副本，过滤后仅包含白名单**键**（或有效键数组）的值。或者接受一个谓词，指示选择哪些键。

`_.identity`是一个辅助函数，它返回它的第一个参数，这意味着它也可以作为一个谓词函数来选择真值并拒绝假值。Underscore 库还附带了许多其他谓词，例如`_.pick(sourceObj, _.isBoolean)`仅保留布尔属性。

如果你经常使用这种技术，你可能想让它更有表现力：

```
var pickNonfalsy = _.partial(_.pick, _, _.identity); // Place this in a library module or something
pickNonfalsy(sourceObj); 
```

也提供了下划线版本 1.6.0 `_.pick`，但它不接受谓词函数而不是白名单。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-12-27T17:08:14.537

您可以制作自己的下划线插件（mixin）：

```
_.mixin({
  compactObject: function(o) {
    _.each(o, function(v, k) {
      if(!v) {
        delete o[k];
      }
    });
    return o;
  }
}); 
```

然后将其用作本机下划线方法：

```
var o = _.compactObject({
  foo: 'bar',
  a: 0,
  b: false,
  c: '',
  d: null,
  e: undefined
}); 
```

## 更新

正如[@AndreiNeculau](https://stackoverflow.com/users/465684/andrei-neculau) [指出的那样](https://stackoverflow.com/questions/14058193/remove-empty-properties-falsy-values-from-object-with-underscore-js/19750822#comment-33713647)，这个mixin 会影响原始对象，而原始的`compact`下划线方法会[返回数组的副本](http://underscorejs.org/#compact)。
为了解决这个问题并使我们的`compactObject`行为更像它的*表亲*，这里有一个小的更新：

```
_.mixin({
  compactObject : function(o) {
     var clone = _.clone(o);
     _.each(clone, function(v, k) {
       if(!v) {
         delete clone[k];
       }
     });
     return clone;
  }
}); 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-09-03T22:23:16.527

# 快速清除：`_.omitBy( source, i => !i );`

这与埃米尔的回答相反。这样，恕我直言，读起来更清楚；它更不言自明。

如果您没有 ES6 的奢华，那么清洁度会稍微低一些：`_.omitBy( source, function(i){return !i;});`

## 备用：`_.omitBy( source, _.isEmpty)`

使用**`_.isEmpty`**，而不是`_.identity`真实性，**也可以方便地从集合中删除空数组和对象，并且可能不方便地删除 numbers 和 dates**。因此，结果不是对 OP 问题的确切答案，但是在寻找删除空集合时它可能很有用。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-05-17T07:13:22.280

使用 lodash 的[变换](http://lodash.com/docs#transform)，

```
_.transform(obj, function(res, v, k) {
  if (v) res[k] = v;
}); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-12-27T16:55:59.840

```
Object.keys(o).forEach(function(k) {
    if (!o[k]) {
        delete o[k];
    }
}); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-11-03T07:35:40.950

您可以创建一个浅克隆：

```
_(obj).reduce(function(a,v,k){ 
     if(v){ a[k]=v; } 
     return a; 
},{}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-10T22:55:01.423

突然间，我需要创建一个函数来递归地删除 falsies。我希望这有帮助。我正在使用 Lodash。

```
var removeFalsies = function (obj) {
    return _.transform(obj, function (o, v, k) {
        if (v && typeof v === 'object') {
            o[k] = _.removeFalsies(v);
        } else if (v) {
            o[k] = v;
        }
    });
};

_.mixin({ 'removeFalsies': removeFalsies }); 
```

然后你可以使用它：

```
var o = _.removeFalsies({
  foo: 'bar',
  a: 0,
  b: false,
  c: '',
  d: null,
  e: undefined,
  obj: {
    foo: 'bar',
    a: 0,
    b: false,
    c: '',
    d: null,
    e: undefined
  }
});

// {
//   foo: 'bar',
//   obj: {
//     foo: 'bar'
//   }
// } 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-12-27T16:55:35.303

对于对象使用删除。

```
for(var k in obj){

  if(obj.hasOwnProperty(k) && !obj[k]){
    delete obj[k];
  }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-06T00:46:41.787

要添加到 gion_13 的答案：

```
_.mixin({
  compactObject : function(o) {
     var newObject = {};
     _.each(o, function(v, k) {
       if(v !== null && v !== undefined) {
         newObject[k] = v
       }
     });
     return newObject;
  }
}); 
```

这个创建一个新对象并添加键和值，而不是克隆所有内容并删除键值对。细微差别。

但更重要的是，显式检查 null 和 undefined 而不是 false，这将删除具有 false 作为值的键值对。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-20T07:20:55.577

你应该`pickBy`从 lodash 使用。

pickBy 的默认签名是`_.(sourceObj, [_.identity])`这样它会删除空属性

```
_.pickBy(sourceObj); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-03T09:09:04.203

在 lodash 你这样做：

```
_.pickBy(object, _.identity); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-05-30T19:00:35.470

虽然`_.compact`记录在数组中使用。它似乎也适用于对象。我刚刚在 chrome、opera 和 firefox 控制台中运行了以下命令：

```
var obj = {first: 1, second: null, third: 3, fourth: function(){return 5}}
undefined
_.compact(obj)

[1, 3, function()] 
```

更新：由于示例表明调用`_.compact`对象将删除键并返回压缩数组。

# matlab - 大文件（256 MB 或更多）被 128 字节/Matlab 工作区内存溢出或限制替换？

> ID：14058200
> 
> 赞同：1
> 
> 时间：2012-12-27T16:53:49.370
> 
> 标签：matlab, memory-management, simulation

我在 Matlab 2011b 中运行一个需要几天时间的模拟。因此，我在每次迭代时将模拟数据记录在数据结构中，然后记录到文件（*.mat 格式）中。我正在观察我的模拟/数据记录的特殊行为。我观察到记录的 mat 文件一旦超过 256 MB 左右就会被 128 字节文件替换。我不确定大小，但我观察到文件大小接近 256 MB 或以下，然后被 128 字节文件替换。我想知道是否有人有类似的问题。解决方法是什么？是否存在高达 256MB 左右的 Matlab 工作区内存限制？有没有办法改变这个限制？

我正在使用 Matlab 2011b 版本，并使用并行计算工具箱在不同的 Matlab 工作人员中运行我的脚本的多个实例（我的服务器中最多 12 个内核）。他们在每个工人中的模拟都是独立的。Matlab 2011b 在 Linux/CentOS/Mac 上运行，观察结果涵盖所有工作人员，甚至在 Windows 7 中。因此，我认为这是可以调整的 Matlab 设置或配置。非常感谢任何建议或解决方法。

更新：我正在更新我的代码正在执行的示例脚本。迭代指数可以根据模拟时间增加：

```
%Matlab workspace memory test 
% filename: sim_workspace_mem_test.m
clear; clc;
TotalData=[];
for i=1:1000
   for j=1:1000
    for k=1:100

        data.x=rand(100,100);
        data.y=randi(100,100);

        TotalData{i,j,k}=data;

    end
    filename='SimData';
    save(filename, 'TotalData');
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:51:34.383

尝试用不同的名称保存它，并且不那么频繁地保存文件一百万次。

```
clear; 
TotalData = [];
for i=1:1000
  for j=1:1000
    for k=1:100
        data.x=rand(100,100);
        data.y=randi(100,100);
        TotalData{i,j,k}=data;
    end
  end
    if mod(i,10)==0 %Save every 1 percent progress
       filename=['SimData' num2str(i)]; %Give each savefile a different name
       save([filename, 'TotalData');
    end
end
filename='SimData';
save(filename, 'TotalData'); %Just to be safe, we save the final result 
```

# java - 在泽西岛处理 JSON 解析错误

> ID：14058201
> 
> 赞同：3
> 
> 时间：2012-12-27T16:53:50.793
> 
> 标签：java, json, exception-handling, jersey

如何在我的 Jersey REST 应用程序中截获解析错误？我已经注册了，`ExceptionMapper<Exception>`但那些没有被抓住。

它将以下内容返回给客户端

```
Unexpected character ('y' (code 121)): expected a valid value (number,
  String, array, object, 'true', 'false' or 'null')
  at [Source: org.apache.catalina.connector.CoyoteInputStream@161d5f3;
  line: 1, column: 92] 
```

但我想发送我自己的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T21:44:31.190

我猜你的 ExceptionMapper 已经注册，它没有被应用于其他包，你正在调用 Jersey 库代码来解析 JSON。

在 Try{ }catch() 块中包围所有对 Jersey 进行解析的调用，其中 catch 应该返回错误代码而不是进一步处理。

或者，看起来 Tomcat 可能在错误到达您的应用程序之前就抛出了错误。也许是配置方式或客户端通信方式的问题？这是明文HTTP吗？

# c++ - 避免在 ListView 中截断标签

> ID：14058206
> 
> 赞同：2
> 
> 时间：2012-12-27T16:54:07.077
> 
> 标签：c++, winapi, 3dsmax

伙计们！我使用列表视图（图标模式）来显示由图像和标签组成的项目。正如您在镜头中看到的那样，行高在 y 上是可变的，具体取决于标签长度。问题是我想要绘制完整的标签，但它们会自动缩小成两行： ![所有过长的字符串都被截断了](../Images/4392e055d160f93ccf42512752fe6873.png)

奇怪的是，一旦你选择了一个项目，整个标签就会显示出来： ![所选项目显示不截断](../Images/890971004b411e4d676108804c7cebb7.png) 取消选择项目时也是如此，但是当另一个项目被选中时，只有那个会完全显示。在我的情况下，有没有办法（无需手动绘制文本）来避免截断？如果需要一些代码来回答这个问题，请不要犹豫。

问候，萨塔拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:51:10.430

我猜这是一个设计选择：让事情看起来不那么混乱。例如，将您的桌面与所有标签完全显示...在我的情况下看起来会很乱。

但是，您可以通过自己绘制标签来解决此问题。查看[自定义绘图](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761817%28v=vs.85%29.aspx)，这是列表控件提供的一项服务。问题是它通常是全有或全无的方法，因此这可能需要您自己绘制所有内容：边框、图像、标签等。另一种选择是变得 hacky：子类化窗口并在 Windows 之后再次绘制标签响应几条消息（不幸的是，Windows 没有将绘画限制为`WM_PAINT`，这是过去遗留下来的优化......）

# google-chrome - Chrome 语言错误

> ID：14058209
> 
> 赞同：0
> 
> 时间：2012-12-27T16:54:15.250
> 
> 标签：google-chrome, joomla

> **可能重复：**
> [为什么 Chrome 会错误地确定页面是不同的语言并提供翻译？](https://stackoverflow.com/questions/2467454/why-does-chrome-incorrectly-determine-page-is-in-a-different-language-and-offer)

在我的一个页面上，chrome 告诉我我的页面是用葡萄牙语写的。它是西班牙语的。我无法弄清楚为什么会这样。这是链接：[网页](http://applesat.com/index.php/tarifas)

所有其他页面都正常，没有任何错误。

我使用 Joomla 2.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:43:15.007

谷歌的语言算法并不是最好的。

尝试使用内容语言的元标记明确

```
<meta http-equiv="content-language" content="es-es"> 
```

# c# - C# 接口转换...字典查找？

> ID：14058211
> 
> 赞同：2
> 
> 时间：2012-12-27T16:54:20.183
> 
> 标签：c#

每次将对象转换为接口时，C# 是否都会进行字典查找？我认为它必须。

可以实现数百个接口的通用对象 -> GetType() -> 按名称（或数字 ID，不会在可预测的位置）获取接口 -> 从数组中获取方法指针并保存到转换对象

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:27:07.653

假设我们有：

```
object x = whatever;
IFoo y = (IFoo)x; 
```

您正确地指出，运行时而不是编译器必须以某种方式确定该方法是否成功或抛出无效的强制转换异常。

运行时如何做到这一点的确切细节是一个实现细节，而且很*复杂*。运行时使用许多相当复杂的技术来确保此测试在常见情况下是快速的。此外，CLR 的一个有趣特性是引用标识和值标识是同一事物。如果类型测试成功，则存储在 x 和 y 中的位相同。（这在 C++ 中通常不是这种情况；相反，对象的不同“视图”会导致不同的指针。）这意味着必须实现额外的机制才能有效地处理接口方法的分派。

我没有足够的 CLR 内部知识或专业知识来准确地向您描述所有这些机制是如何工作的。如果你想要一个更好的答案，也许你可以问一个更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:58:38.223

我不认为这与运行时有任何关系。它都是在编译阶段处理的。

# java - 实现参数长的Bitset函数

> ID：14058212
> 
> 赞同：0
> 
> 时间：2012-12-27T16:54:30.977
> 
> 标签：java, bitset

BitSet的set()函数是set(int param)。我正在尝试通过发送一个long类型来实现Bitset函数。有没有API或教程？谢谢。

```
BitSet mobiphoneUsers = new BitSet();

bitset.set(12311111111111111111L);

if(bitset.get(1231111111111111111L)) {
    System.out.println("1231111111111111L is mobiphone user");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:59:04.333

如果您要创建`BitSet`超过 20 亿位的 a，我猜这些条目中只有一小部分被设置。对于像这样设置的“稀疏”位，最好使用`HashSet<Long>`.

```
HashSet<Long> bitset = new HashSet<Long>();

bitset.add(12311111111111111111L);

if(bitset.contains(1231111111111111111L)) {
    System.out.println("1231111111111111L is mobiphone user");
} 
```

# mercurial - 如何在重命名大量文件期间仅更改部分文件名

> ID：14058218
> 
> 赞同：0
> 
> 时间：2012-12-27T16:55:10.930
> 
> 标签：mercurial, file-rename

我有很多文件，例如：

```
Post - something_is_here1.rb
.
.
Post - something_is_here100.rb 
```

我想将它们重命名为：

```
Article - something_is_here1.rb
.
.
Article - something_is_here100.rb 
```

我不想对`hg rename`每个文件进行手动处理。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:59:17.803

仅使用 Mercurial 无法做到这一点。

相反，您可以使用一个小的 shell 脚本：

```
for f in Post*; do
    hg mv "$f" "Article${f#Post}"
done 
```

或者，您可以以其他方式重命名文件，然后使用`hg addremove`，如果文件相同，它将检测重命名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:19:33.720

您不能在 Mercurial 中执行此操作，但您可以使用任何外部工具和一个不带 shell 脚本的 Mercurial 命令执行它

*   使用任何 3 方工具使用所需的模式重命名文件
*   应用于工作副本`hg addremove --similarity 100`（-s|--similarity 将检测步骤 1 中的*纯重命名）*

# android - 以编程方式更改 SettingsActivity 小部件的文本

> ID：14058220
> 
> 赞同：0
> 
> 时间：2012-12-27T16:55:18.673
> 
> 标签：android, android-widget, android-activity

我正在开发我的第一个安卓应用程序。我使用向导创建了一个 SettingsActivity，到目前为止效果很好。现在我想以编程方式更改输入字段：我正在生成一个字符串，我希望在输入字段中默认预设该字符串。

这是我的输入字段，它是自动生成的 pref_general.xml 中的条目：

```
 <EditTextPreference
        android:capitalize="words"
        android:defaultValue="@string/pref_default_display_name"
        android:inputType="textCapWords"
        android:key="example_text"
        android:maxLines="1"
        android:selectAllOnFocus="true"
        android:singleLine="true"
        android:title="@string/pref_title_display_name" /> 
```

我的问题是：如何在我的代码中访问此输入字段？通常我使用请求 UI 元素

```
findViewById(R.*.*); 
```

我假设在这里我可以使用

```
findViewById(R.string.pref_default_display_name); 
```

但这只会给我null！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:44:40.610

根据您正在做的事情，您可以使用[`findPreference()`](http://developer.android.com/reference/android/preference/PreferenceGroup.html#findPreference%28java.lang.CharSequence%29) 来获取`EditTextPreference`对象：

```
EditTextPreference pref = myPrefGroup.findPreference("example_text"); 
```

从中获得 a`View`并不容易，而且通常没有必要。您可以尝试使用[`getView()`](http://developer.android.com/reference/android/preference/Preference.html#getView%28android.view.View,%20android.view.ViewGroup%29)它，但这可能会或可能不会返回您想要的内容。

如果您只想设置 的输入值`EditTextPreference`，您可以使用[`setText()`](http://developer.android.com/reference/android/preference/EditTextPreference.html#setText%28java.lang.String%29)它，就像使用 any 一样`EditText`：

```
EditTextPreference pref = myPrefGroup.findPreference("example_text");
pref.setText("Foo!"); 
```

您可以查看提供的文档中的其他内容`Preference`和`EditTextPreference`可以执行的操作，但有些操作无法在首选项屏幕中完成。（这只是 Android 的限制。）

# c# - .NET 4.0/4.5 WinForms MenuStrip 窃取焦点的奇怪错误

> ID：14058222
> 
> 赞同：13
> 
> 时间：2012-12-27T16:55:22.463
> 
> 标签：c#, .net, winforms

我们最近升级到 VS 2012，同时升级到 .NET Framework 4.5。这引入了一个与 WinForms MenuStrip 控件相关的奇怪且令人讨厌的错误。同样的错误也出现在针对 .NET Framework 4.0 的应用程序中，因为 4.5 的安装程序显然也更新了 4.0 的部分内容。因此，一个完美工作的代码模式现在因为框架升级而被打破。

**问题描述：**
我有一个带有 MenuStrip 的 Form1。对于其中一个下拉项，事件处理程序打开另一个 Form2（不一定是子项，只是另一个 Form）。如果用户右键单击新的 Form2 或其子控件之一，这会触发 ContextMenuStrip 的 Show()，则原始 Form1 会再次弹出到前台。
这与 Form2 中的所有其他 UI 操作无关。可以调整大小、移动、最小化、最大化 Form2、在控件之间切换、输入文本等。 Form1 的 MenuStrip 似乎记得它导致 Form2 的打开并在第一次右键单击时获得焦点。

我正在尝试不同的方法，但到目前为止找不到解决方法。星座并不少见，可能会影响周围的许多 WinForms 应用程序。因此，我决定在这里发布它，因为可行的解决方案可能会引起普遍关注。如果有人知道解决方法或至少对我有一些线索，我会很高兴。

我能够在以下代码中提炼出它的精髓。它应该可以在任何安装了 .NET 4.5 的机器上重现，并且在分别针对 4.0 和 4.5 时发生 - 但不是在 3.5 或更低版本上。

```
using System;
using System.Windows.Forms;

namespace RightClickProblem {
    static class Program {
        [STAThread]
        static void Main() {
            // Construct a MenuStrip with one item "Menu" with one dropdown-item "Popup"
            var mainMenu = new MenuStrip();
            var mainItem = new ToolStripMenuItem("Menu");
            mainItem.DropDownItems.Add(new ToolStripMenuItem("Popup", null, Popup));
            mainMenu.Items.Add(mainItem);

            // Create form with MenuStrip and Show
            var form1 = new Form();
            form1.Controls.Add(mainMenu);
            Application.Run(form1);
        }

        private static void Popup(object sender, EventArgs e) {
            // Create a form with a right click handler and show
            var form2 = new Form();
            var contextMenu = new ContextMenuStrip();
            contextMenu.Items.Add("Just an item...");
            form2.ContextMenuStrip = contextMenu;
            form2.Show();
            // Problem: contextMenu.Show() will give focus to form1
        }
    }
} 
```

**编辑：**我花了一些时间逐步浏览 .NET Framework 源代码，发现根本原因很可能在 System.Windows.Forms.ToolStripManager 中。在那里，微软正在使用消息过滤器来跟踪窗口激活，这在某种程度上是为 MenuStrip 错误实现的。
与此同时，我还发现 Microsoft 已经在一个修补程序中解决了这个问题（参见[http://support.microsoft.com/kb/2769674](http://support.microsoft.com/kb/2769674)），并希望这将在未来的 .NET Framework 4.5 更新中找到方法。

不幸的是，很难强制将此修补程序应用于所有客户端计算机。因此，仍然非常感谢可行的解决方法。到目前为止，我自己一直无法找到切实可行的解决方案......

**编辑#2：**原始 KB 编号适用于 Win8，但在 KB 2756203 下有类似的适用于 Win7 和 Vista 的修补程序。如果有人可以使用它，请在此处找到下载的修补程序：http: [//thehotfixshare.net/board/index.php ?autocom=downloads&showfile=15569](http://thehotfixshare.net/board/index.php?autocom=downloads&showfile=15569)。我们对其进行了测试，它确实解决了问题。如果我们很快就找不到解决方法，我们将使用修补程序。

**编辑#3：对 spajce 提出的已接受解决方案的评论显然，在***任何*
ContextMenu 上调用 Show()将说服原始 MenuStrip 忘记它对焦点的要求。这可以通过某种方式完成，以便虚拟 ContextMenu 甚至不会显示在屏幕上。我找到了在任何 Form 的构造函数中插入以下代码段的最短且最容易实现的方法：

 *```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();

        using (var dummyMenu = new ContextMenuStrip()) {
            dummyMenu.Items.Add(new ToolStripMenuItem());
            dummyMenu.Show(Point.Empty);
        }
    }
} 
```

因此，打开的每个表单都会清除 ToolStripMenu 系统的损坏状态。不妨将此代码放在像 FormHelper.FixToolStripState() 这样的静态方法中，或者将其放在模板 Form 的 OnCreateControl(...) 中并从中继承所有 Forms（无论如何我们幸运地做了什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:20:18.550

这是我的解决方案:)

```
 static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            // Construct a MenuStrip with one item "Menu" with one dropdown-item "Popup"
            var mainMenu = new MenuStrip();
            var mainItem = new ToolStripMenuItem("Menu");
            mainItem.DropDownItems.Add(new ToolStripMenuItem("Popup", null, Popup));
            mainMenu.Items.Add(mainItem);

            // Create form with MenuStrip and Show
            var form1 = new Form();
            form1.Controls.Add(mainMenu);
            Application.Run(form1);
        }

        private static void Popup(object sender, EventArgs e)
        {
            // Create a form with a right click handler and show
            var form2 = new Form();
            var contextMenu = new ContextMenuStrip();
            contextMenu.Items.Add("Just an item...");
            var loc = form2.Location; //<---- get the location
            var p2 = new Point(loc.X, loc.Y); //<---- get the point of form
            form2.ContextMenuStrip = contextMenu;
            form2.ContextMenuStrip.Show(form2, p2); //<---- just add this code.
            form2.Show();
            // Problem: contextMenu.Show() will give focus to form1
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T14:22:03.473

我也遇到了这个问题。我不想更改代码，因为我觉得我的程序做得对。我在微软网站上找到了修复：

[http://support.microsoft.com/kb/2750147](http://support.microsoft.com/kb/2750147)

它确实有所作为，我们今天早上刚刚将它安装在 2 台用户计算机上。现在，我们的 IT 人员正在将它安装在所有计算机上，因为它已经过测试并证明可以工作。*

# c# - WPF C# 应用程序部署 - 运行 exe 时没有任何反应

> ID：14058224
> 
> 赞同：4
> 
> 时间：2012-12-27T16:55:34.350
> 
> 标签：c#, wpf, debugging, deployment

我已经复制了 Windows 7 VM 和 Windows Vista 笔记本电脑上 Debug 文件夹的内容。两者都安装了 Dot Net 4.5。所有程序集都设置为复制本地和AFAIK，我没有引用应用程序文件夹中的任何内容。当我在两台不同的开发人员计算机（一台 Win8，一台 Win7）上运行该应用程序时，它运行良好，就像在 Visual Studio (F5) 中运行它一样。

在部署计算机上并非如此。问题是我没有收到错误消息。在我双击非开发机器上的可执行文件后，绝对没有任何反应。

我尝试在 WinDbg.exe 中启动它并得到以下输出：[http ://pastebin.com/43PbwyGx](http://pastebin.com/43PbwyGx)

那么我该如何调试它以找出缺少的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:13:30.090

查看您的 WindDbg 转储，您有第二次机会执行**`CLR exception - code e0434352 (!!! second chance !!!)`**.
我会看一下*Igor Dvorkin*的这篇文章，[为什么我不断收到异常代码 e0434352](http://ig2600.blogspot.com/2011/01/why-do-i-keep-getting-exception-code.html)。他在哪里讨论它是一个通用异常以及如何启动 cdb 以查找底层异常是什么。

他还链接到他的另一篇博文，[Finding CLR exceptions without visual studio](http://ig2600.blogspot.com/2009/07/finding-clr-exceptions-with-visual.html)，他在其中描述了使用 cdb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:38:29.417

开发机器是 64 位的，而其他机器是 32 位的吗？如果是这种情况并且您正在构建为 AnyCPU，那么您的所有引用也需要是 AnyCPU（或匹配您的程序运行的平台）。如果您构建为 x64，那么我认为您的所有引用也必须是 x64，x86 也是如此。

通常，在这种情况下您会看到的异常是 BadImageFormatException（它通常也使用 Side By Side Configuration 的来源记录到 Windows 应用程序事件日志中）。

此外，仅供参考，有时您可能能够在 Windows 事件日志中找到异常。我认为是应用程序日志，我认为源通常是 .NET 运行时或应用程序错误。详细信息可能包括实际异常以及堆栈跟踪。

我不确定要记录这些错误需要满足哪些条件，但这是需要考虑的事情。

# asp.net-web-api - Asp.net Web API：在控制器上未找到任何操作

> ID：14058228
> 
> 赞同：0
> 
> 时间：2012-12-27T16:55:38.873
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我正在使用 Visual Studi0 2010。在我的`WebApiConfig.cs`文件中，我有以下配置，我可以映射这两个 url`/Values`和`/Values/1`. 它工作正常。

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new {id= RouteParameter.Optional  } 
        ); 
```

因为我想要我的自定义 URL`/Values/Machines`和`/Values/Machines/100`，所以我将上面的设置更改为下面。

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new {action="get", id= RouteParameter.Optional  } 
        ); 
```

它现在映射到下面的 url，除了这个，`/Values/1`. 请让我知道我错过了什么。

```
1./Values
2./Values/Machines
3./Values/Machines/100 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:09:52.920

这是预期的行为。根据您的新路线，第一个参数`Values`应为控制器名称，第二个参数`1`应为动作，但您没有名称的动作`1`

为了到达 Action，您需要带有新路由的 url 应该是这样的：`/Values/Index/1`

你可以这样做：

```
routes.MapRoute(
    name: "IndexWithParam",
    url: "{controller}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    constraints: new { id = @"\d+" }
);

routes.MapRoute(
    name: "Default", // Route name
    url: "{controller}/{action}/{id}", // URL with parameters
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

在这种情况下，如果 Url 是这样的：`/Values/1`，它将到达第一个路由并将其重定向到`/Values/Index/1`。请注意，我在这条路线上设置了一个约束，以确保第二个参数是一个数字。

# java - 命名 Tomcat 工作线程

> ID：14058233
> 
> 赞同：0
> 
> 时间：2012-12-27T16:55:53.010
> 
> 标签：java, multithreading, tomcat, monitoring

有没有一种简单的方法来更改 Tomcat 为其工作线程提供的默认名称？理想情况下，我希望与某个 Web 应用程序关联的所有线程都以它们的名称命名，也许作为前缀。例如，如果我部署 app1.war 和 app2.war，我希望 app1 的所有线程的名称中都包含*app1*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:59:44.700

来自[论坛](http://tomcat.10.n6.nabble.com/Change-thread-name-of-HTTP-worker-threads-at-Runtime-td2143050.html)，以更好的格式重新发布在这里；一个简单的[过滤器](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Introduction)，将每个线程重命名为请求 URI，在此示例中：

```
public class ThreadNameFilter implements javax.servlet.Filter { 

    public void doFilter(ServletRequest req, ServletResponse resp, 
        FilterChain fc) throws IOException, ServletException { 

        HttpServletRequest httpReq = (HttpServletRequest)req; 
        final Thread curThr = Thread.currentThread(); 
        final String oldName = curThr.getName(); 

        // change the name of the current thread to something related
        // to the application (e.g. URI)
        try { 
            curThr.setName(httpReq.getRequestURI()); 
            fc.doFilter(req, resp); 
        } finally { 
            curThr.setName(oldName); 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:39:10.903

线程只是暂时与特定的 web 应用程序“关联”。

我无法想象为什么这会很有用：

*   记录应该包括上下文信息（例如，什么组件正在记录）
*   分析可以很容易地揭示正在执行的代码（从而揭示正在“运行”的 webapp）
*   异常包括完整的堆栈跟踪，可以揭示正在执行的代码（从而揭示正在“运行”的 webapp）
*   可以通过线程转储检查长时间运行的线程（从而揭示在长时间运行的请求中“运行”的 webapp）

# r - 如何阻止 normalizePath 返回标记化路径

> ID：14058236
> 
> 赞同：0
> 
> 时间：2012-12-27T16:56:04.927
> 
> 标签：r, text, runtime-error, token, output

我有一个 R 程序，它进行大量数据分析并将结果输出到文本文件。不幸的是，当我打电话时

```
system2("open", file_path_as_absolute(toFile)); 
```

R解释器声明如下

```
'../output/HLA-A,B,C,DR,DP,DQ' not found
'GT2' not found
'vs' not found
'LT2_DRB1_output2of9.10.11.12.13.14.16.25.26.28.30.31.32.33.37.38.40.47.57.58.60
.67.70.71.73.74.77.78.85.86.txt' not found 
```

基于此错误，我假设 file_path_as_absolute 标记了文件名，但我不确定如何禁用它。我也尝试过 normalizePath()，但我得到了同样的错误。

**编辑**

文件本身被称为

```
"HLA-A,B,C,DR,DP,DQ GT2 vs LT2_DRB1_output2of9.10.11.12.13.14.16.25.26.28.30.31.32.33.37.38.40.47.57.58.60.67.70.71.73.74.77.78.85.86.txt" 
```

并且位于`../output`

这是我运行打开文件的代码，它给了我同样的错误

```
openSesame <- paste0('"', file_path_as_absolute(toFile), '"');
system2("open", openSesame); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:27:29.503

我可以让以下代码在我的系统上工作，从存在姊妹目录的目录开始`../output`（我的系统上没有`open`，所以我用作`gedit`外部命令）：

```
fn <- "HLA-A,B,C,DR,DP,DQ GT2 vs LT2_DRB1_output2of9.10.11.12.13.14.16.25.26.28.30.31.32.33.37.38.40.47.57.58.60.67.70.71.73.74.77.78.85.86.txt"
prot <- function(x) paste0('"',x,'"')
writeLines(c("a","b"),con=paste0("../output/",fn))
n <- tools::file_path_as_absolute(paste0("../output/",fn))
file.show(n)
system2("gedit",prot(n)) 
```

您能否在系统上失败的这些方面制作一个可重复的示例？（`file.show()`对你有用吗？）

（出于代码格式化的目的，作为答案而不是评论发布......）

# jquery - KOJS 绑定手动订阅与映射插件

> ID：14058240
> 
> 赞同：0
> 
> 时间：2012-12-27T16:56:25.273
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin

我有一个绑定到我的 KOJS 模型的复选框。

```
<input type="checkbox" data-bind="checked:settings.remember"> 
```

当用户更改复选框的值时，我正在尝试更新数据库。但是，视图模型在这些 jQuery 函数*之后更新：*

```
$("input[type='checkbox']").click(function(){ });

$("input[type='checkbox']").change(function(){ });

$("input[type='checkbox']").mouseup(function(){ }); 
```

换句话说，当我在这些函数中查看我的 viewModel 时，它会在用户更改复选框*之前*返回复选框的值。因此，如果复选框曾经为真，现在告诉我为假（并显示为假），viewModel 仍将显示为真。

在绑定发生后，我是否可以使用其他一些 jQuery 函数？或者你能想到在我的 viewModel 变量改变后调用函数的任何其他聪明的方法吗？请注意，我当前的 viewModel 声明是：

```
var viewModel = {};
//...get some data from AJAX calls
ko.mapping.fromJSON(data, viewModel.'+file+'); 
```

其中文件是一些动态值（我从多个数据库中绘制我的视图模型）

我可以使用下面的 hacky 解决方案来解决上述问题（请参阅我的答案），但 RP Niemeyer 的回答表明手动订阅有更好的方法。到目前为止，我还无法弄清楚在我的 viewModel 中定义事物以及使用映射插件。

[到目前为止](http://jsfiddle.net/WVZxD/)，这是我的代码，当然，它不适用于 JSFiddle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:20:02.983

一般来说，这类事情的一个不错的选择是在您的视图模型本身中处理它。例如，您可以使用[手动订阅](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)（`settings.remember`如果它是可观察的）并触发您的数据库调用。

```
settings = {
  remember: ko.observable(false)
};

settings.remember.subscribe(function(newValue) {
    //run your logic here
}, settings); 
```

调用的第二个参数`subscribe`确定`this`函数运行时间的值。

如果您真的被迫与在 Knockout 之外更改的字段进行交互，那么您可能希望连接一个“更改”处理程序，但要等到调用 ko.applyBindings 之后。然后，您的更改事件处理程序将在 Knockout 已添加到元素的更改处理程序之后运行。但是，如果您的内容在模板中并被重新渲染，那么您的处理程序将会丢失。

我强烈建议使用手动订阅方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:25:08.990

RP Niemeyer 上面的回答可能比这要好得多，但这是我解决了我的问题的临时修复：

```
$("input[type='checkbox']").click(function() {
  viewModel.settings.remember($(this).is(":checked"));';
  //...AJAX it away
}); 
```

# google-chrome - 谷歌浏览器正在删除关闭时尚未过期的 cookie

> ID：14058241
> 
> 赞同：1
> 
> 时间：2012-12-27T16:56:26.080
> 
> 标签：google-chrome, cookies, devise, ruby-on-rails-3.2

我正在使用 Rails gem Devise 来管理登录。当我选中记住我复选框并登录时，如果我关闭浏览器，用户应该保持登录状态。在谷歌浏览器中；但是，他们会被注销。

我已经验证了“remember_user_account_token”cookie 是在选中该框时创建的；但是，当我关闭浏览器并重新打开时，cookie 消失了。我还验证了 cookie 设置为在未来 2 周后到期（2013 年 1 月 10 日上午 10:20:29）。

任何想法为什么 Chrome 会在关闭时删除未过期的 cookie？它在 Safari 中运行良好。

这是创建并随后删除的 cookie：

```
Name:   remember_user_account_token
Content:    BAhbB1sGaQIEhiIiJDJhJDEwJHFNdEI1L1Q0WHp1bFA1NzM0S0locHU%3D--d61dcd25ec1de81879e7214cb373b9504eed0797
Domain: xxx.dev
Path:   /
Send for:   Any kind of connection
Accessible to script:   No (HttpOnly)
Created:    Thursday, December 27, 2012 11:25:19 AM 
Expires:    Thursday, January 10, 2013 11:18:13 AM 
```

# c# - 通用属性比较 - 识别属性更改

> ID：14058243
> 
> 赞同：1
> 
> 时间：2012-12-27T16:56:33.400
> 
> 标签：c#, generics, overloading, anonymous

我在两个类之间映射数据，其中一个类是在另一个（销售订单）中创建或修改数据的采购订单。如果销售订单值不为空，我还会保留更改的事务日志。你能建议一种使这个通用的方法吗？

```
private static DateTime CheckForChange(this DateTime currentValue, 
    DateTime newValue, string propertyName)
{
    if (currentValue == newValue) return currentValue;
    LogTransaction(propertyName);
    return newValue;
}
private static decimal CheckForChange(this decimal currentValue, 
    decimal newValue, string propertyName)
{
    if (currentValue == newValue) return currentValue;
    LogTransaction(propertyName);
    return newValue;
}
private static int CheckForChange(this int currentValue, 
    int newValue, string propertyName)
{
    if (currentValue == newValue) return currentValue;
    LogTransaction(propertyName);
    return newValue;
} 
```

### 原始建议代码示例

```
private static T CheckForChange<T>(this T currentValue, T newValue, 
    string propertyName) where T : ???
{
    if (currentValue == newValue) return currentValue;
    LogTransaction(propertyName);
    return newValue;
} 
```

### 最终修订：

```
 public static T CheckForChange<T>(this T currentValue, T newValue, 
        string propertyName, CustomerOrderLine customerOrderLine)
    {
        if (object.Equals(currentValue, newValue)) return currentValue;
        //Since I am only logging the revisions the following line excludes Inserts
        if (object.Equals(currentValue, default(T))) return newValue;
        //Record Updates in Transaction Log
        LogTransaction(customerOrderLine.CustOrderId, 
                       customerOrderLine.LineNo, 
                       propertyName, 
                       string.Format("{0} was changed to {1}",currentValue, newValue)
                       );
        return newValue;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:58:08.720

你非常接近:)神奇的解决方案是使用`Equals`方法

```
public static T CheckForChange<T>(this T currentValue, T newValue, string propertyName)
{
    if (currentValue.Equals(newValue)) return currentValue;
    LogTransaction(propertyName);
    return newValue;
} 
```

您可以增强我的解决方案并检查空值：

```
public static T CheckForChange<T>(this T currentValue, T newValue, string propertyName)
{
    bool changed = false;
    if (currentValue == null && newValue != null) changed = true;
    else if (currentValue != null && !currentValue.Equals(newValue)) changed = true;
    if (changed)
    {
        LogTransaction(propertyName);
    }
    return newValue;
} 
```

*** 编辑 ***

如评论中所示，我们可以使用`object.Equals`以下方法解决空值检查问题：

```
public static T CheckForChange<T>(this T currentValue, T newValue, string propertyName)
{
    if (object.Equals(currentValue,newValue)) return currentValue;
    LogTransaction(propertyName);
    return newValue;
} 
```

# facebook-opengraph - Post og.likes 删除查询字符串参数

> ID：14058244
> 
> 赞同：5
> 
> 时间：2012-12-27T16:56:39.343
> 
> 标签：facebook-opengraph, jsapi

我正在使用 FB.api 发布 og.likes 操作，但我想将跟踪代码附加到 URL，并且 Facebook 删除了额外的查询字符串参数，并且 URL 与 HTML 元 og:url 参数相同，以及其他 Facebook 参数。

是否可以将参数附加到此 URL？

# c# - 读取文本文件并写入列表

> ID：14058249
> 
> 赞同：1
> 
> 时间：2012-12-27T16:57:04.243
> 
> 标签：c#, linq, parsing, split

他们是一种将文本文件一次拆分到多个位置并保存到列表的方法吗？

我能够在一个地方进行拆分并写入这样的列表：

```
var incomplete = File
            .ReadAllLines(path)
            .Select(a => a.Split(new[] { '|' }, StringSplitOptions.None)[5].Trim())
            .ToList(); 
```

我想分成四个位置，然后写入一个列表。

```
var mnbrs = File
            .ReadAllLines(path)
            .Select(a => a.Split('|')[2].Trim())
            .Select(b => b.Split('|')[5].Trim())
            .Select(c => c.Split('|')[6].Trim())
            .Select(d => d.Split('|')[11].Trim())
            .ToList(); 
```

这给了我错误索引超出了数组的范围。

任何帮助表示赞赏。我也可以以不同的方式拆分和阅读文件。我只是想避免读取文件拆分一次然后列出然后读取 agian 并再次拆分并执行四次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:00:11.853

您想分两步完成。首先拆分，然后选择各个列：

```
File
    .ReadAllLines(path)
    .Select(a => a.Split(new[] { '|' }, StringSplitOptions.None))
    .Select(a => new {
        Column1 = a[2].Trim(),
        Column2 = a[5].Trim(),
        Column3 = a[6].Trim(),
        Column4 = a[11].Trim()
    })
    .ToList(); 
```

演示：http: [//ideone.com/aNyNT5](http://ideone.com/aNyNT5)

# javascript - 如何在悬停时停止和启动此功能

> ID：14058250
> 
> 赞同：0
> 
> 时间：2012-12-27T16:57:18.127
> 
> 标签：javascript, jquery, function, intervals

我想在容器 div 的悬停上停止并启动一个函数，我尝试了 myLoop.stop(); 重置变量，但它不能正常工作......有什么想法吗？？？

```
 //Continuous Scroll
var nex = 1;
var timeInterval = 1000;
$(".logoContainer").hover(function(){
    // Stop Function Here

},function () {
    // Start Function Here
})
function myLoop () { //  create a loop function
setTimeout(function () {    //  call a 3s setTimeout when the loop is called
  if( cache.isAnimating ) return false;
  cache.isAnimating = true;
  aux.navigate( 1, $el, $wrapper, settings, cache );
  nex++; 
  if (nex < 100) {
    myLoop(); 
   }  
  }, timeInterval)
 }
myLoop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:00:14.177

我建议在你的函数中放置一个标志`setTimeout`并根据你想要的事件更改这个标志，看看这个： [http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

您的代码可能需要一些重构，像这样的东西（伪代码）怎么样：

```
function callThisFunctionEveryXSeconds(){
    if(continueFlag){
        keepScrolling();
    }
}
$(someDiv).mouseenter() { continueFlag = true; }
$(someDiv).mouseleave() { continueFlag = false; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:23:54.410

好的，我必须更改结束函数的变量，然后在 mouseout(hoverOut) 上重置并再次触发：

```
 //Continuous Scroll
var nex = 1,timeInterval = 1000,loop = 0;
function myLoop () { //  create a loop function
    setTimeout(function () {    //  call a 3s setTimeout when the loop is called
        if( cache.isAnimating ) return false;
            cache.isAnimating = true;
            aux.navigate( 1, $el, $wrapper, settings, cache );
            nex++; 
        if (nex < 100) {
            myLoop(); 
        }  
        }, timeInterval)
    }
myLoop();

$(".logoContainer").hover(function(){
    nex = 100;
},(function(){
    nex = 1;
    myLoop();
        })
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:03:50.213

使用`clearTimeout`停止`setTimeout`。

```
var nex = 1;
var timeInterval = 1000;
$(".logoContainer").hover(function(){
        looper.stop();

    },function () {
        looper.start();
    });

function myLoop () { //  create a loop function
    var timeout;
    this.start = function(){
        timeout = setTimeout(function () { 
            cache.isAnimating = true;
            aux.navigate( 1, $el, $wrapper, settings, cache );
            nex++; 
            if (nex < 100) {
                myLoop(); 
            }  
        }, timeInterval);
    }
    this.stop = function () {
        clearTimeout(timeout);
    }
}
var looper = new myLoop() 
```

# php - PHP 包含 ../ 失败打开

> ID：14058253
> 
> 赞同：1
> 
> 时间：2012-12-27T16:57:45.897
> 
> 标签：php

我试图从父目录中包含一个 php 文件，但出现错误：

> admin@webby:~$ /usr/bin/php /var/phpscripts/email_parser/tests/_email-test.php PHP 致命错误：require_once(): 无法打开所需的 '../PlancakeEmailParser.php' (include_path='. :/usr/share/php:/usr/share/pear') 在第 6 行的 /var/phpscripts/email_parser/tests/_email-test.php
> 
> 致命错误：require_once()：在 /var/phpscripts/email_parser/tests/_email 中打开所需的 '../PlancakeEmailParser.php' (include_path='.:/usr/share/php:/usr/share/pear') 失败-test.php 在第 6 行

PHP 文件

```
#!/usr/bin/php
<?php
error_reporting(E_ALL ^ E_NOTICE ^E_WARNING);
ini_set("display_errors" , 1);

require_once("../PlancakeEmailParser.php");

// etc

?> 
```

文件夹结构

```
admin@webby:/var/phpscripts/email_parser$ find .
.
./composer.json
./README.txt
./LICENSE.txt
./PlancakeEmailParser.php
./tests
./tests/_email-test.php 
```

为了进行测试，当我`PlancakeEmailParser.php`进入`tests`目录并从要求中删除“../”时它工作正常

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:01:24.330

线

```
require_once("../PlancakeEmailParser.php"); 
```

未使用完全限定的文件系统路径或 PHP-URI 方案。因此其结果取决于 PHP 配置，最常见的原因是[包含目录配置](http://php.net/ini.core#ini.include-path)。

PHP CLI 可以使用与您的网络服务器不同的配置文件*- 或者 -*工作目录与您的网络服务器不同（可能后者在您的特定场景中扮演更多角色）。

你想要的也可以很容易地完全限定：

```
require_once(__DIR__ . "/../PlancakeEmailParser.php"); 
```

这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T11:44:10.133

引用[PHP CLI SAPI：与其他 SAPI 的差异](http://php.net/manual/en/features.commandline.differences.php)：

> 它不会将工作目录更改为脚本的工作目录。（保留 -C 和 --no-chdir 开关以保持兼容性）

为了保持脚本中的相对路径按原样工作，请将目录更改为脚本所在的位置，然后执行脚本：

```
cd /var/phpscripts/email_parser/tests/ && ./_email-test.php 
```

# jquery - 从菜单将值发布到 html 页面

> ID：14058261
> 
> 赞同：0
> 
> 时间：2012-12-27T16:58:28.437
> 
> 标签：jquery, html

我有一个 jQuery 多级 CSS 菜单，我希望当用户单击其中一个子菜单时将 href 值发布到页面 iframe.html，任何帮助将不胜感激。

```
<input type=hidden name=arav value="1234"><ul id='nav'>

<li> <a href='#'>Main menu 1</a>
<ul>
<li style='background-color:#b0c4de;'><a href=getrss.php?q=suna-pol>1submenu 1</a></li>
<li style='background-color:#bebebe;'><a href=getrss.php?q=suna-spo>1submenu 2</a></li>
</ul>
<li> <a href='#'>Main menu 2</a>
<ul>
<li style='background-color:#b0c4de;'><a href=getrss.php?q=arab-me>2submenu 1</a></li>
</ul>
</li>
</ul>

<div class="iframe" >

<iframe name="iframe999" src="iframe.html"  width="100%"  frameborder="0" scrolling="yes" id="iframe" onload='javascript:resizeIframe(this);' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:37:04.040

你可以这样使用它：http: [//jsfiddle.net/6v3dC/](http://jsfiddle.net/6v3dC/)

```
$('a').click(function(e) {
    e.preventDefault();
    $('#iframe').attr('src', $(this).attr('href'));
});​ 
```

# c# - 转换为列表中的特定类型

> ID：14058263
> 
> 赞同：0
> 
> 时间：2012-12-27T16:58:34.077
> 
> 标签：c#, .net, list, types, foreach

因此，假设我们有一个名为 Car 的类和其他三个类（Opel、Volkswagen 和 Peugeot），它们从 Car 继承信息，但此外每个类都有一个特定的变量。

所以我创建了一个新的汽车列表，在其中添加了这三种类型的 CarOpel..etc。

```
Opel CarOpel = new Opel(parameters); 
```

ETC...

```
List<Car> Cars = new List<Car>();
Car.Add(CarOpel); 
```

ETC...

当我使用“foreach”语句时，如何从每个类中访问这些特定变量

```
foreach ( Car car in Cars )
{
      // how to convert *car* in *Opel* , *Volkswagen* or *Peugeot* to get that specific variable?
} 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T16:59:56.743

```
var opelCars = cars.OfType<Opel>()

foreach ( Opel car in cars.OfType<Opel>())
{
} 
```

其他解决方案是使用`is`关键字

```
foreach ( Car car in cars)
{
    if(car is Opel) 
    {
        var opel = (Opel)car;
    }
} 
```

如果您需要降低您的汽车以做某事，这可能表明您的继承层次结构错误或您的方法不在正确的位置。它可能应该是`Car`在派生类中被覆盖的类中的虚拟方法。还可以考虑阅读有关访问者模式的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:00:28.797

您必须将其转换为特定类型。

```
foreach(Car car in Cars) 
{ 
    CarOpel opel = car as CarOpel;

    if (opel != null)
    {
        //do something with Opel
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:01:00.597

使用[is](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.71%29.aspx)或[as](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)运算符。

```
foreach ( Car car in Cars )
{

  if (car is Opel)
  {
   // do opel operation
    var op = (Opel)car;
  }

  if (car is Volkswagen)
  {
   // do VW operation
    var vw = (Volkswagen)car;
  }
} 
```

# regex - perl 正则表达式的匹配超出了应有的范围——由于 shell 转义

> ID：14058269
> 
> 赞同：1
> 
> 时间：2012-12-27T16:58:54.490
> 
> 标签：regex, perl

我有很多文件需要更改一行。

这是代码：

```
GetOptions ('full' => \$full,
        'dbno=s' => \$dbno,
            'since=s' => \$since,
            'printSQL' => \$printSQL,
            'nwisDB=s' => \$nwisDBOption);

# Find the NWISDB to be extracted

if ($nwisDBOption eq '') {
  $nwisdb = &WSCExtractor::getNwisdb;
} else {
  $nwisdb = uc($nwisDBOption);
} 
```

这是我想要的：

```
GetOptions ('full' => \$full,
        'dbno=s' => \$dbno,
            'since=s' => \$since,
            'printSQL' => \$printSQL,
            'nwisDB=s' => \$nwisDBOption) || &WSCExtractor::usage();

# Find the NWISDB to be extracted

if ($nwisDBOption eq '') {
  $nwisdb = &WSCExtractor::getNwisdb;
} else {
  $nwisdb = uc($nwisDBOption);
} 
```

这是我正在使用的 perl 命令：

```
perl -pi -e "s/\\\$nwisDBOption\);/\\\$nwisDBOption\) || \&WSCExtractor::usage\(\);/" extractor-template 
```

结果如下：

```
GetOptions ('full' => \$full,
        'dbno=s' => \$dbno,
            'since=s' => \$since,
            'printSQL' => \$printSQL,
            'nwisDB=s' => \$nwisDBOption) || &WSCExtractor::usage();

# Find the NWISDB to be extracted

if ($nwisDBOption eq '') {
  $nwisdb = &WSCExtractor::getNwisdb;
} else {
  $nwisdb = uc($nwisDBOption) || &WSCExtractor::usage();
} 
```

它匹配 $nwisDBOption 的第二个实例，即使它前面没有 \。我尝试在前面添加更多 \ 以防 perl 吃掉它们。当时不匹配。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:25:00.010

我假设您使用的是 Unixish 操作系统，而不是 Windows。由于您在代码周围使用双引号，因此 shell 正在解析它，并且 - 除其他外 - 将双反斜杠替换为单个反斜杠。所以 perl 看到的代码实际上*不是*：

```
s/\\\$nwisDBOption\);/\\\$nwisDBOption\) || \&WSCExtractor::usage\(\);/ 
```

但：

```
s/\$nwisDBOption\);/\$nwisDBOption\) || \&WSCExtractor::usage\(\);/ 
```

您可以通过运行以下命令轻松确认这一点：

```
echo "s/\\\$nwisDBOption\);/\\\$nwisDBOption\) || \&WSCExtractor::usage\(\);/" 
```

无论如何，有几种方法可以解决这个问题。我建议使用单引号而不是双引号，或者只是将代码写入实际的 Perl 脚本文件并以这种方式运行。

但是，如果您真的想要，您*可以*将代码中的所有反斜杠加倍。

# java - java中的多线程最佳实践

> ID：14058272
> 
> 赞同：6
> 
> 时间：2012-12-27T16:59:05.103
> 
> 标签：java, multithreading

我是 Java 编程新手。我有一个用例，我必须并行执行 2 个数据库查询。我的班级结构是这样的：

```
class A {
    public Object func_1() {
        //executes db query1
    }

    public Object func_2() {
        //executes db query1
    }
} 
```

现在我在同一个类中添加了另一个函数 func_3 ，它调用这两个函数，但也确保它们并行执行。为此，我正在使用可调用对象和期货。以这种方式使用它是否正确？我将这个变量存储在一个临时变量中，然后使用它从 func_3 调用 func_1 和 func_2（我不确定这是正确的方法）。或者有没有其他方法可以处理此类案件？

```
class A {
    public Object func_1() {
        //executes db query1
    }

    public Object func_2() {
        //executes db query1
    }

    public void func_3() {
        final A that = this;
        Callable call1 = new Callable() {
            @Override
            public Object call() {
               return that.func_1();
            }
        }

        Callable call2 = new Callable() {
            @Override
            public Object call() {
               return that.func_2();
            }
        }
        ArrayList<Callable<Object>> list = new ArrayList<Callable<Object>>();
        list.add(call1);
        list.add(call2);
        ExecutorService executor = Executors.newFixedThreadPool(2);
        ArrayList<Future<Object>> futureList = new ArrayList<Future<Object>>();
        futureList = (ArrayList<Future<Object>>) executor.invokeAll(list);
        //process result accordingly
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:10:50.743

首先，您不需要将其存储在另一个局部变量中：外部函数将可用，`func_1()`或者`func_2()`当您想要获取`this`外部类时，您只需使用`A.this`.

其次，是的，这是常见的方法。此外，如果您要经常调用 func_3 - 避免创建固定线程池，则应该将其作为参数传递，因为线程创建相当“昂贵”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:53:20.703

Executor(Service) 的整个想法是为许多小任务使用少量线程。在这里，您使用 2 线程执行器执行 2 个任务。我要么创建全局定义的执行程序，要么只为 2 个任务生成 2 个线程。

# wcf - 服务于企业应用程序的 WCF 服务的故障转移机制

> ID：14058277
> 
> 赞同：1
> 
> 时间：2012-12-27T16:59:25.197
> 
> 标签：wcf, failover

我们有一组在单台计算机上运行的 WCF 服务，它们共同为 WPF 应用程序提供服务，该应用程序可以在同一台机器上或远程机器上（仅在同一网络内）。我们需要故障转移机制，因此当任何服务崩溃或挂起时 - 我们希望重新启动服务并通过调用适当的方法对其进行初始化。

由于我们不知道为 WCF 服务实施故障转移的行业标准是什么 - 我们已经以这种方式实施。我们启动托管在控制台应用程序中的主 WCF 服务以及另一个辅助 WCF 服务，该服务通过调用给定端点上的公开方法不断检查主 WCF 服务的运行状况。如果主 WCF 服务失败，它将扮演主 WCF 服务的角色并启动另一个辅助 WCF 服务。

上述方法运行良好，但我们看到的唯一问题是内存，因为我们成对启动服务并且每个主机都需要 10MB 内存。

谁能帮我在这种情况下实施故障转移的行业惯例是什么？

# php - 更改时区并基于此从 MYSQL 获取结果

> ID：14058283
> 
> 赞同：0
> 
> 时间：2012-12-27T16:59:47.180
> 
> 标签：php, mysql, timezone

我正在开发一个新项目，该项目有很多不同的数据，并且都存储在具有相同时区时间戳的数据库中，东海岸，我确保在通过加载任何内容之前将服务器时区切换到它

```
date_default_timezone_set("America/New_York"); 
```

但是我似乎无法理解它，我想要一个允许选择时区的搜索功能，如果他们选择西海岸时区，我应该只更改 PHP 部分吗？或者我应该以不同的方式查询数据库？所有数据都对时间非常敏感，事实证明很难将其缠绕在我的脑海中。

任何帮助或逻辑将不胜感激：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:13:40.847

主要问题是 MySQL 对时区的支持是*可笑*的。大多数其他数据库允许您将时区定义为 datetime 列的一部分，而不是 MySQL。相反，它们会强制您进行连接范围或服务器范围的时区设置。

您最好的选择是确保 MySQL 将所有日期时间存储为 GMT / UTC。您可以通过`SET time_zone = 'UTC'`在连接上运行来强制执行此操作。在设置字符集的同时进行。您*正在*设置连接字符集，*对*吗？

在 PHP 方面，您可以使用[DateTime](http://php.net/class.datetime)和[DateTimeZone](http://php.net/class.datetimezone)的组合从 MySQL 获取日期时间并将它们显示在用户的时区中。例如，假设我们`2012-11-13 14:15:16`从 MySQL`DATETIME`列中获取日期。从 PHP 交互式提示：

```
php > $from_mysql = '2012-11-13 14:15:16';
php > $utc = new DateTimeZone('UTC');
php > $ts = new DateTime($from_mysql, $utc);
php > $pdt = new DateTimeZone('America/Los_Angeles');
php > $ts_pdt = clone $ts;
php > $ts_pdt->setTimezone($pdt);
php > echo $ts_pdt->format('r'), "\n";
Tue, 13 Nov 2012 06:15:16 -0800 
```

如图所示，如果 UTC 不是您使用`date_default_timezone_set`. 切换 DateTime 的时区就像给它一个新的时区一样简单。我曾经`clone`在这里工作过副本。DateTimes 是可变的，有时很容易发现自己不小心破坏了它。

反向日期数学的工作方式相同，只需将他们的选择转换为 UTC 并在本地数字上运行数学。

tl;博士：

*   *仅在 UTC (GMT) 中*存储*和*执行日期时间计算**
**   *仅显示*用户时区中的所有日期时间*

# php - 限制两个限制之间的字符数

> ID：14058285
> 
> 赞同：0
> 
> 时间：2012-12-27T16:59:58.427
> 
> 标签：php, validation, if-statement, error-handling

我有一个验证 if 语句，主要检查两件事。首先：查看名为“why”的下拉框是否为空，如果为空则会向前端发送错误消息，说明我们需要您给我们一个合理的理由。这很好用。现在我有第二个条件，如果出于任何原因“为什么”下拉框中的值是“其他”并且如果评论框为空，那么这将引发另一个错误。现在这两个工作正常，如果它是空的会说“请在评论框中解释您访问的性质！”

我的问题是我试图让评论框的长度在 15 到 45 个字符之间。我一直在使用这个 signinpage.php 验证大约 20 几个小时，以使其完全符合我的要求，但我无法到达我想要的地方。任何帮助都会很可爱！

```
if(empty($why)) {
            $errors[] = 'Please make sure to select the proper reasoning for your vistit today!';
    } 
        elseif ($why ==='Other' && empty($comments)) {
            $errors[] = 'Please explain the nature of your visit in the comments box!';

        if (strlen($comments) < 15) {
            $errors[] = 'Your explaination is short, please revise!';
    }
        if(strlen($comments) > 45) {
            $errors[] = 'Your explaintion is to long, please revise!';
    }
    } 
```

缩进：

```
if(empty($why)) {
    $errors[] = 'Please make sure to select the proper reasoning for your vistit today!';
} 
elseif ($why ==='Other' && empty($comments)) {
    $errors[] = 'Please explain the nature of your visit in the comments box!';

    if (strlen($comments) < 15) {
        $errors[] = 'Your explaination is short, please revise!';
    }
    if(strlen($comments) > 45) {
        $errors[] = 'Your explaintion is to long, please revise!';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:04:01.807

如果你正确地复制和粘贴了这个，那么你的括号会把事情搞砸。将所有评论验证放入一个部分，仅在`$why==="Other"`.

```
if(empty($why))
    $errors[] = 'Please make sure to select the proper reasoning for your vistit today!';
elseif ($why ==='Other'){
    if(empty($comments))
        $errors[] = 'Please explain the nature of your visit in the comments box!';
    else{
        if (strlen($comments) < 15)
            $errors[] = 'Your explaination is short, please revise!';
        if(strlen($comments) > 45)
            $errors[] = 'Your explaintion is to long, please revise!';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:04:57.777

```
if(empty($why)) {
        $errors[] = 'Please make sure to select the proper reasoning for your vistit today!';
} 
elseif ($why ==='Other' && empty($comments)) {
        $errors[] = 'Please explain the nature of your visit in the comments box!';
}
elseif($why === 'Other'){
    if (strlen($comments) < 15) {
        $errors[] = 'Your explaination is short, please revise!';
    }
    if(strlen($comments) > 45) {
        $errors[] = 'Your explaintion is to long, please revise!';
    }
} 
```

您将长度检查包含在要求注释为空的检查中。

# r - MapR 分发的 rhive.connect() 问题

> ID：14058295
> 
> 赞同：3
> 
> 时间：2012-12-27T17:00:21.620
> 
> 标签：r, hive, mapr

加载和初始化 RHive（使用 rhive.init()）后，我在 rhive.connect() 中收到以下错误：

```
java.lang.UnsatisfiedLinkError: no MapRClient in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1734)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1028)
        at com.mapr.fs.MapRFileSystem.<clinit>(MapRFileSystem.java:1298)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1028)
        at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1079)
        at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1413)
        at org.apache.hadoop.fs.FileSystem.access$100(FileSystem.java:69)
        at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:1453)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1435)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:232)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:115)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at RJavaTools.invokeMethod(RJavaTools.java:386) Unable to load libMapRClient.so native library Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :   java.lang.UnsatisfiedLinkError: no MapRClient in java.library.path 
```

当我使用 hive 服务器 IP 地址运行 rhive.connect("10.2.138.168") 时，我得到了同样的错误。我的环境变量设置为：

```
MAHOUT_HOME=/opt/mapr/mahout/mahout-0.7  
JAVA_HOME=/usr/java/default
HADOOP_HOME=/opt/mapr/hadoop/hadoop-0.20.2
HADOOP_CONF_DIR=/opt/mapr/hadoop/hadoop-0.20.2/conf  
HIVE_HOME=/opt/mapr/hive/hive-0.9.0 
```

如果我运行 rhive.env()，我会收到以下警告/错误：

```
Hive Home Directory : /opt/mapr/hive/hive-0.9.0
Hadoop Home Directory : /opt/mapr/hadoop/hadoop-0.20.2
Hadoop Conf Directory : /opt/mapr/hadoop/hadoop-0.20.2/conf
Default RServe List
################################# IMPORTANT ############################################# ############################### /\/\/\/\/\/\/\ ########################################## # Use of slaves and masters file to start/stop jobtracker/tasktracker is not supported. # Please use maprcli: # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker start # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker start # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker stop # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker stop #########################################################################################warning: cant't connect to a Rserver at ################################# IMPORTANT #############################################:6311warning: cant't connect to a Rserver at ############################### /\/\/\/\/\/\/\ ##########################################:6311warning: cant't connect to a Rserver at # Use of slaves and masters file to start/stop jobtracker/tasktracker is not supported.:6311warning: cant't connect to a Rserver at # Please use maprcli::6311warning: cant't connect to a Rserver at # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker start:6311warning: cant't connect to a Rserver at # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker start:6311warning: cant't connect to a Rserver at # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker stop:6311warning: cant't connect to a Rserver at # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker stop:6311warning: cant't connect to a Rserver at #########################################################################################:6311
Disconnected HiveServer and HDFS
Warning messages:
1: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  ################################# IMPORTANT #############################################:6311 cannot be opened
2: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  ############################### /\/\/\/\/\/\/\ ##########################################:6311 cannot be opened
3: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # Use of slaves and masters file to start/stop jobtracker/tasktracker is not supported.:6311 cannot be opened
4: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # Please use maprcli::6311 cannot be opened
5: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker start:6311 cannot be opened
6: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker start:6311 cannot be opened
7: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -jobtracker stop:6311 cannot be opened
8: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  # /opt/mapr/bin/maprcli node services -nodes <list of ip addrs> -tasktracker stop:6311 cannot be opened
9: In socketConnection(host, port, open = "a+b", blocking = TRUE) :
  #########################################################################################:6311 cannot be opened 
```

编辑：

然后我设置：

```
export LD_LIBRARY_PATH=/opt/mapr/hadoop/hadoop-0.20.2/lib/native/Linux-amd64-64/ 
```

现在，rhive.connect() 返回以下错误：

```
2012-12-27 17:09:23,1578 ERROR Client fs/client/fileclient/cc/client.cc:676 Thread: 139849490286464 Unlink failed for file rhive_udf.jar, error Permission denied(13)
2012-12-27 17:09:23,1578 ERROR JniCommon fs/client/fileclient/cc/jni_common.cc:1219 Thread: 139849490286464 remove: File /rhive/lib/rhive_udf.jar, rpc error, Permission denied(13)
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  java.io.IOException: Target hdfs:/rhive/lib/rhive_udf.jar already exists
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/opt/mapr/hive/hive-0.9.0/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/opt/mapr/hadoop/hadoop-0.20.2/lib/slf4j-log4j12-1.4.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  org.apache.thrift.transport.TTransportException: java.net.ConnectException: Connection refused
NULL 
```

关于我哪里出错的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:46:23.827

Java 找不到 dll 库。启动应用程序时，您必须将 java.library.path 属性设置为指向要加载的 dll。

```
java -Djava.library.path=/opt/mapr/hadoop/hadoop-0.20.2/lib/native/ 
```

# iphone - 如何使用 NSDateFormatter 解析这些时区？

> ID：14058298
> 
> 赞同：0
> 
> 时间：2012-12-27T17:00:31.827
> 
> 标签：iphone, ios, macos, nsdate, nsdateformatter

我正在解析大量互联网日期。首先我尝试使用`en_US_POSIX`语言环境的格式化程序，然后使用`en_GB`. 代码看起来或多或少是这样的：

```
{
    NSDate *date = [dateString dateWithDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z (zzz)" localeIdentifier:@"en_US_POSIX"];
    if (date) return date;
    date = [dateString dateWithDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z (zzz)" localeIdentifier:@"en_GB"];
    return date;
}

- (NSDate*) dateWithDateFormat:(NSString*)dateFormat localeIdentifier:(NSString*)localeIdentifier
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:localeIdentifier];
    formatter.dateFormat = dateFormat;
    [formatter dateFromString:self];
} 
```

但是，具有以下时区的日期字符串无法解析：

```
Mon, 16 Jul 2012 12:08:17 +0100 (GMTUK)
Thu, 6 Sep 2012 13:00:06 +0900 (KST)
Wed, 3 Nov 2010 10:12:15 +0100 (Hora est�ndar romance)
Wed, 14 Sep 2011 14:37:35 +0100 (IST)
Wed, 2 May 2012 09:41:06 +0200 (MEST)
Sun, 31 Oct 2010 12:53:06 +0800 (SGT)
Thu, 19 Jan 2012 08:34:44 -0300 (UYT) 
```

我究竟做错了什么？

我应该仅在这些情况下预处理字符串以删除时区括号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:57:06.193

`NSDate`可以存储没有时区信息的时间点。由您的软件决定特定`NSDate`实例是以 UTC 还是本地时区存储时间点。在大多数情况下，您希望使用 UTC 日期。

因此，在解析日期时处理时区差异很重要。但是不可能记住日期最初所在的时区（至少不是`NSDate`仅使用实例）。

所以我建议你把括号中的时区去掉，只解析它之前的数字时区偏移量。这样，您可以将所有字符串转换为`NSDate`UTC 实例，并且在解析字符串时应该没有任何问题。

日期不应该是（即数字时区偏移的大写 Z）吗？

```
@"EEE, dd MMM yyyy HH:mm:ss ZZZ" 
```

# .net - GDI+ DrawString() - 将字符串视为一组单独的字符

> ID：14058302
> 
> 赞同：0
> 
> 时间：2012-12-27T17:00:43.450
> 
> 标签：.net, gdi+, gdi

> **可能重复：**
> [如何为单个字符着色并保持适当的间距/字距调整/对齐？](https://stackoverflow.com/questions/13163894/how-to-color-individual-characters-and-maintain-proper-spacing-kerning-align)

使用 GDI+，我想将字符串分解为单个字符，以便可以在字符串中的任何位置更改字体类型、大小或粗细。

**用法示例：**

1.  ****B****老第一个字符。

2.  第一个字符使用古英语字体（即“从前”->“O”=古英语字体）

3.  **在**句子中为特定单词（字符组）加下划线。

我找不到任何例子。我不知道如何解决这个问题。

```
Public Class Character
    Public Property ID As Integer
    Public Property Value As Char
    Public Property CharacterFont As Font
    Public Property CharacterColor As Brush

    Public Sub New()
        CharacterFont = New Font("Times New Roman", 12)
    End Sub
End Class 
```

……

```
Public Class CharacterBlock
    Private _characters As New List(Of Character)
    Public Property Alignment As StringAlignment

    Public Sub New()
        Alignment = StringAlignment.Center
    End Sub

    Public Sub New(p_characters As List(Of Character))
        Me.New()
        _characters = p_characters
    End Sub

    Public Sub New(p_characters As String)
        Me.New()
        _characters = (From s In p_characters.ToList Select New Character With {.Value = s}).ToList
    End Sub

    Public Sub New(p_characters As String, p_font As System.Drawing.Font)
        Me.New()
        _characters = (From s In p_characters.ToList Select New Character With {.Value = s, .CharacterFont = p_font}).ToList
    End Sub

    'TODO: Add methods to measure and draw character blocks 
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:16:45.903

据我所知，没有任何东西以这种方式构建......你应该完成绘制字符块的所有逻辑，仅在一行中非常“容易”，但处理行尾并开始写入下一行可能很棘手。

为了让用户更改和格式化文本，我会使用 RichTextBox。

有一些控件可以更轻松地使用 RichTextBox，这是其中之一：http: [//www.codeproject.com/Articles/30799/Extended-RichTextBox](http://www.codeproject.com/Articles/30799/Extended-RichTextBox)

一旦你有了允许用户格式化的文本编辑器，你需要打印它。以下是一些如何打印 RichTextBox 内容的示例：

*   [http://social.msdn.microsoft.com/forums/en-US/winforms/thread/2502a239-77cb-4072-b37e-1e087ff64841/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/2502a239-77cb-4072-b37e-1e087ff64841/)
*   [http://www.c-sharpcorner.com/uploadfile/kirtan007/print-richtextbox-content-with-formating-in-C-Sharp-windows-forms/](http://www.c-sharpcorner.com/uploadfile/kirtan007/print-richtextbox-content-with-formating-in-C-Sharp-windows-forms/)

You can add the code that makes the magic of printing RichTextBox content in the Extended RichTextBox Control.

# file - IE。通过 JS 打开 fileUpload 并执行 form.Submit()

> ID：14058304
> 
> 赞同：1
> 
> 时间：2012-12-27T17:00:48.333
> 
> 标签：file, internet-explorer, upload

我的页面上有一个 FileUpload。我们的网站对所有按钮和文本框都有类似的设计。据我所知，我们无法更改 fileUpload 中“浏览...”按钮的样式。这就是为什么我必须自定义 FileUpload。我有文本框、我们自定义的“浏览...”按钮和隐藏的 FileUpload。当用户单击我们的自定义“浏览...”按钮时，我调用模拟 FileUpload 单击的 JQuery 函数：

```
browseButton.click(function (){
    fileUpload.click();
}); 
```

除 IE 外，所有浏览器都正常！我得到“SCRIPT5：访问被拒绝”。在 form.Submit() 上。我已经阅读了一些文章，人们写道，我们可以创建一个标签来替换 IE 的“浏览...”按钮。但我必须只使用我们定制的按钮。有可能解决这个问题吗？

# php - xml和json请求慢的问题

> ID：14058311
> 
> 赞同：1
> 
> 时间：2012-12-27T17:01:20.267
> 
> 标签：php, mysql, xml, json, cron

我正在写一个网站，显示来自 Own3d 和 Twitch 的某种直播。我在 own3d 和 twitch api 的 xml 和 json 请求很慢时遇到了一些问题，所以我联系了 Own3d。他们真的很友好，这就是他们的回应：

> 你好雅各布，
> 
> 我们的 API 响应时间是正常的，但您可能遇到的问题是因为您每次刷新网站时都在请求信息。
> 
> 大多数其他网站（例如 clgaming.net）都运行 cron 作业，该作业大约每分钟收集一次在线和离线流的信息，并写入本地数据库，以便在有人加载网站时快速。
> 
> 问候， own3D.tv 支持团队

所以这就是我所做的，我编写了一个 PHP 脚本，将信息写入我的 Mysql 数据库，稍后当我将网站上线时我会 cronjob，它运行良好，但随着我的数据库变得越来越大，我现在再次遇到问题：我现在有我的数据库中有 65 个流媒体，我想我又遇到了请求时间问题。首先我收到错误消息：

> 致命错误，超过 30 秒的最大执行时间

我认为没问题让最大执行时间增加。( `ini_set('max_execution_time', 300);`)

现在发生的是，我收到不工作请求的随机错误。

例如：

> 警告：file_get_contents(http://api.justin.tv/api/stream/list.json?channel=schabs) [function.file-get-contents]：打开流失败：HTTP 请求失败！第 20 行 D:\wamp\www\Lol Streamportal\database_actualize.php 中的 HTTP/1.1 400 错误请求

它发生在 Own3d 和 twitch 上，正如我所说的那样，它是随机的，哪些流可以工作，哪些不可以。实际上，我认为应该可以让它更好地工作，因为 clgaming f.ex 有超过 1,000 个流，如果在他们的 cronjob 脚本中在线，可能必须检查这些流。

我想在我再次联系 own3d 或 twitch 之前我问你们，因为我真的对 XML 一点经验都没有，对 Json 也没有，也许你们中的一些人有一个如何解决它的想法，或者我不应该编写脚本在PHP中，而是在JDBC左右？

我不想炫耀我的整个代码，但我可以给你导致问题的函数的代码。（如果真的需要，我也可以发布其他代码）

```
function get_online($stream_id, $typ) {
    // Ownd3d Streams
    if($typ == 'o') {
        $xml = simplexml_load_file('http://api.own3d.tv/liveCheck.php?live_id='.$stream_id);
        $isLive = $xml->liveEvent->isLive;
        if($isLive == 'true') {
            return true;    
        }
        else {
            return false;   
        }
    }
    // Twitch Streams
    else if($typ == 't') {
        $api = "http://api.justin.tv/api/stream/list.json?channel=".$stream_id;
        $json = file_get_contents($api);
        $exist = strpos($json, $stream_id);
        if($exist) {
            return true;
        }
        else{
            return false;  
        }       
    }
    else {
        return false;   
    }
} 
```

正如我所说，当我的数据库较小时，我根本没有问题。但自从我收到超过 50 个条目后，我开始遇到问题。感谢所有的答案。

编辑：我刚刚有了一个想法。也许 twitch.tv 和 Own3d 在一段时间内允许发送的请求数量有限，也许我会联系他们。我可以解决这个问题的一件事是编写 2 或 3 个不同的脚本，它们只发送对数据库中前 30 个条目的请求，第二个脚本用于接下来的 30 个，依此类推。

# android - 动画 - 停止动画并显示动画中的特定图像

> ID：14058314
> 
> 赞同：0
> 
> 时间：2012-12-27T17:01:29.937
> 
> 标签：android, xml, animation

我怎样才能停止动画（我认为是 .stop() ）。那么它应该是动画中出现静态的图片。第二张图片应该是显示的那张。

我怎么做？

这是 XML 动画列表：

```
 <?xml version="1.0" encoding="utf-8"?>
 <animation-list xmlns:android="http://schemas.android.com/apk/res/android" >
     <item android:drawable="@drawable/app" android:duration="1200"/>
 <item android:drawable="@drawable/app2" android:duration="250"/>
 </animation-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:13:37.950

经过几个小时的研究，我自己解决了这个问题。

```
Object tag = layout.getTag();
    int backgroundId = R.drawable.night;

    if( tag != null && ((Integer)tag).intValue() == backgroundId) {
        backgroundId = R.drawable.day;
        playAnimation();
    }
    else
    {
        animatedLoerg.selectDrawable(1);
        animatedLoerg.stop();
    }

    layout.setTag(backgroundId);
    layout.setBackgroundResource(backgroundId); 
```

用标签解决了。

# mysql - 每晚将信息从 MySQL 传输到 SQL Server

> ID：14058316
> 
> 赞同：0
> 
> 时间：2012-12-27T17:01:35.367
> 
> 标签：mysql, sql-server-2008

我们的一个客户有一个根据他们的需要定制的软件。我们无法访问软件的源代码，但我们可以访问使用 MySQL 数据库的软件后端。因此，我们可以访问 MySQL 数据库中的所有表。我们还有另一个使用 MS SQL Server 2008（数据库）的软件。我们需要在每天结束时将 MySQL 中表的信息引入 MS SQL Server，以便我们可以保持两个数据库（软件）之间的一致性。

我发现很多文章介绍了如何将信息从 SQL Server 发送到 MySQL（使用链接服务器）。但不是反过来。我是这个数据库的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:34:25.890

这可以作为“拉”来完成，在 SQL Server 端从 MySQL 数据库运行。

您将设置链接服务器，就像在您找到的文章中一样。

“技巧”（根据我对 SQL Server 2005 的经验）是使用`OPENQUERY`，例如

```
SELECT * FROM OPENQUERY(LINKEDMYSQL, 'select foo from database.table_name') 
```

`sp_serveroptions`我必须设置一些（在 SQL Server 2005 中），或者`rpc_out`类似的东西。

有几种不同的方式来引用 OPENQUERY（作为内存表或临时表）。所需资源和性能（对于大型集）存在一些差异。我最终使用（一种相对有效的）INSERT 从针对 MySQL 数据库的 OPENQUERY 选择插入到 SQL Server 临时表中。然后，我处理了临时表中的行。

# c# - 如何按名称访问 XLSheet 列数据？

> ID：14058322
> 
> 赞同：0
> 
> 时间：2012-12-27T17:01:57.890
> 
> 标签：c#, excel

我的应用程序正在使用互操作库读取 excel 文件数据。我的代码如下。

```
string filepath = "C:\\SAddresses.xls";

XLApp=new Excel.Application();
XLBook = XLApp.Workbooks.Open(filepath, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
XLSheet = (Excel.Worksheet)XLBook.Worksheets.get_Item(1);
cRange = XLSheet.UsedRange;

for (int rowcnt = 2; rowcnt < cRange.Rows.Count; rowcnt++)
{
    for (int colidx = 1; colidx < cRange.Columns.Count; colidx++)
    {
        colvalue+=((cRange.Cells[rowidx,colidx] as Excel.Range).Value2);
    }
} 
```

在上面我可以使用每个行索引和列索引来获取数据。但是我想使用列名而不是列索引来读取列数据。如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:35:29.790

这是 ExelTable 类的摘录，我已经使用了一段时间：

```
class ExcelTable
{
    public const int SignificantCharsInVariableName = 10;

    private string[] columnNames = null;
    private string[,] data = null;

    private string[] DefineColumnNames(string[,] R)
    {
        string[] names = new string[R.GetLength(1)];

        for (int i = 0; i < R.GetLength(1); i++)
        {
            names[i] = R[0, i].Trim();
        }

        return names;
    }

    public string GetValue(int row, string varName)
    {
        string s;
        int col;

        try
        {
            col = GetColumn(varName);

            s = data[row, col].Trim();
        }
        catch (Exception)
        {
            s = "???";
        }

        return s;
    }

    private int GetColumn(string name)
    {
        return GetColumn(name, this.columnNames, obligatory: true);
    }

    private int GetColumn(string name, string[] names, bool obligatory = false)
    {
        string nameStart;

        //  first try perfect match
        for (int i = 0; i < names.Length; i++)
            if (names[i].Equals(name))
                return i;

        //  2nd try to match the significant characters only
        nameStart = name.PadRight(SignificantCharsInVariableName, ' ').Substring(0, SignificantCharsInVariableName);
        for (int i = 0; i < names.Length; i++)
            if (names[i].StartsWith(nameStart))
                return i;

        if (obligatory)
        {
            throw new Exception("Undefined Excel sheet column '" + name + "'");
        }

        return -1;
    }

} 
```

数据按命名列组织。该名称是数据数组顶行中的第一个单元格。示例代码尝试处理不完美的名称匹配和其他错误情况。可以使用更聪明的集合`Dictionary<string, int>`，例如存储列名和列索引之间的映射。

我的 GetColumn() 函数允许非强制性列。GetValue() 使用它“按名称”返回给定行中的值。如果未找到该列，则返回问号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:43:52.587

如果您只想将循环中的数字转换为列名（这是我从您的问题中读到的），那么我在所有电子表格例程中都使用以下静态方法：

```
public static string ExcelColumnNumberToName(int columnNumber)
{
    int dividend = columnNumber;
    string columnName = string.Empty;
    int modulo;

    while (dividend > 0)
    {
        // Get the remainder of a division by 26 (we take one from the dividend as column "A" is not zero, but one).

        modulo = (dividend - 1) % 26;

        // Convert the remainder (plus 65 - the ASCII decimal code for "A") to a character and add it to the beginning of the string (since column names
        // increase by adding letters to the left hand side). 

        columnName = Convert.ToChar(65 + modulo).ToString() + columnName;

        // Set the dividend for the next iteration of the loop by removing the amount we just converted and dividing it by 26 (in effect treating it like
        // a base-26 number and dropping it by an order of magnitude)

        dividend = (int)((dividend - modulo) / 26);
    }

    return columnName;
} 
```

您需要稍微调整引用单元格的方式。所以而不是

```
cRange.Cells[rowidx,colidx] 
```

你会用

```
cRange.get_Range(ExcelColumnNumberToName(colidx), rowidx) 
```

但这并没有真正给你带来任何优势，而不是你目前的做法。我使用它的原因是为了报告目的将循环计数器转换为列名，所以如果你需要它来做类似的事情，那么它可能是有意义的。

# jquery - gauge.js - 无法开始工作

> ID：14058325
> 
> 赞同：10
> 
> 时间：2012-12-27T17:02:23.380
> 
> 标签：jquery

我正在尝试使用 gauge.min.js 而不是咖啡来实现[http://bernii.github.com/gauge.js/ 。](http://bernii.github.com/gauge.js/)但对于我的生活，我什至无法展示这一点。谁能给我代码来显示这个？就像编写 html 文档一样，我可以对其进行编辑并放入我的工作中。请任何帮助都会很棒。这里有点菜鸟。谢谢

如果有人可以制作文档并链接到它，那就太好了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T17:36:43.193

应用 Gauge 效果的元素必须是`canvas`元素，而不是`div`.

见：http: [//jsfiddle.net/RctL3/1/](http://jsfiddle.net/RctL3/1/)

不得不承认，这仅在文档的从句中提到：

> Gauge 类处理画布上的绘图并启动动画。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T18:27:12.850

将您的更改`<div id="foo">`为 a `<canvas id="foo">`，它将正常工作。

# php - 我的 websocket 的服务器源检查安全吗？

> ID：14058330
> 
> 赞同：6
> 
> 时间：2012-12-27T17:02:38.407
> 
> 标签：php, security, websocket

我正在使用[https://github.com/lemmingzshadow/php-websocket/](https://github.com/lemmingzshadow/php-websocket/)

我可以允许一些域，并且我已经允许`localhost`了一个指向我的本地服务器的域。但我想知道在他的计算机上有服务器的其他人是否可以使用他的本地主机服务器中的脚本连接到我的 websocket（通过我的域）。

以下是相关代码：

-> 服务器/server.php

```
$server->setAllowedOrigin('localhost');
$server->setAllowedOrigin('mydomain.com'); 
```

-> 服务器/lib/WebSocket/Connection.php

```
// check origin:
if($this->server->getCheckOrigin() === true)
{
    $origin = (isset($headers['Sec-WebSocket-Origin'])) ? $headers['Sec-WebSocket-Origin'] : false;
    $origin = (isset($headers['Origin'])) ? $headers['Origin'] : $origin;
    if($origin === false)
    {
        $this->log('No origin provided.');
        $this->sendHttpResponse(401);
        stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
        $this->server->removeClientOnError($this);
        return false;
    }

    if(empty($origin))
    {
        $this->log('Empty origin provided.');
        $this->sendHttpResponse(401);
        stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
        $this->server->removeClientOnError($this);
        return false;
    }

    if($this->server->checkOrigin($origin) === false)
    {
        $this->log('Invalid origin provided.');
        $this->sendHttpResponse(401);
        stream_socket_shutdown($this->socket, STREAM_SHUT_RDWR);
        $this->server->removeClientOnError($this);
        return false;
    }
} 
```

-> 服务器/lib/WebSocket/Server.php

```
public function checkOrigin($domain)
{
    $domain = str_replace('http://', '', $domain);
    $domain = str_replace('https://', '', $domain);
    $domain = str_replace('www.', '', $domain);
    $domain = str_replace('/', '', $domain);

    return isset($this->_allowedOrigins[$domain]);
}

public function setAllowedOrigin($domain)
{
    $domain = str_replace('http://', '', $domain);
    $domain = str_replace('www.', '', $domain);
    $domain = (strpos($domain, '/') !== false) ? substr($domain, 0, strpos($domain, '/')) : $domain;
    if(empty($domain))
    {
        return false;
    }
    $this->_allowedOrigins[$domain] = true;     
    return true;
} 
```

**编辑：**

也许我不够清楚。我希望每个人都可以连接到 websocket，但前提是他们在我的域（或我的本地主机）中，比如 AJAX 中的同源策略。

我担心的是，如果我允许本地主机，也许其他计算机中的所有其他本地主机也将被允许。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:49:22.427

如果你想确定，你应该添加一个 IP 检查，分析`$_SERVER["REMOTE_ADDR"]`. 正在检查的来源是客户端提供的文本值，可以很容易地伪造。

```
if (!in_array($_SERVER["REMOTE_ADDR"], array("127.0.0.1", "ip.of.dom.ain")) exit; 
```

如果您不想对 IP 地址进行硬编码或者频繁更改，您可以使用[gethostbyname](http://php.net/gethostbyname)来获取域的 IP 地址，如下所示。请注意，当必须为域查询 DNS 时，这将增加每个请求的延迟，并且当您的 DNS 出现故障时，这种方式将导致超时。（当然可以优化以下代码）

```
$allowed_origins = array('localhost', 'mydomain.com');
$allowed_ips = array();
foreach ($allowed_origins as $domain) {
    $server->setAllowedOrigin($domain);
    $allowed_ips[] = gethostbyname($domain);
}
if (!in_array($_SERVER["REMOTE_ADDR"], $allowed_ips)) exit; 
```

执行此操作的正确方法可能是通过您的 Web 服务器保护您的资源，以便它只接受来自您希望允许的 IP 地址的请求（请参阅[Apache](https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#deny)中的拒绝或[nginx](http://wiki.nginx.org/HttpAccessModule#deny)中的拒绝）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T23:46:45.340

虽然当我只想允许我的本地主机时，我担心允许来自所有本地主机的连接，但我发现在[另一个问题](https://stackoverflow.com/questions/7605667/how-to-assure-that-websocket-was-opened-from-my-webpage)中，[卡纳卡](https://stackoverflow.com/users/471795/kanaka)说：

> 澄清一下，在不妥协且表现良好的浏览器中运行的 Javascript 不会影响 Sec-WebSocket-Origin 的值，该值保存页面加载的原始站点的值（允许您的服务器仅允许某些起始点）。但是，如果您在 Node.js 中作为 WebSocket 客户端运行 Javascript，它可以将原始值设置为任何它想要的值。CORS 安全性是为了浏览器用户的安全，而不是为了您的服务器。您需要其他机制来保护您的服务器。

然后，我的起源检查代码根本不安全；并且是否都允许所有本地主机都没有关系，因为如果有人有足够的知识使用他自己的本地主机连接到我的 websocket，那么他很可能可以修改 Origin 标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T07:06:49.697

如果您正在检查`Origin`标头，则足以强制执行诸如同源策略之类的内容。标`Origin`头可以在自定义应用程序（如节点 WebSocket 客户端）中在浏览器之外被欺骗，但这没关系，对于普通的 HTTP 请求来说是一样的。SOP 仅与浏览器有关。

所以检查`Origin`标头不是关于访问保护，而是关于 CSRF 保护。如果用户当前已登录，则不允许不受信任的第三方站点连接到您的 WebSocket 端点（自动发送凭据）。

# android - 光标索引超出范围

> ID：14058332
> 
> 赞同：0
> 
> 时间：2012-12-27T17:02:54.180
> 
> 标签：android, cursor

我遇到游标索引越界异常。

我的代码如下。

```
SQLiteDatabase db = this.getWritableDatabase();
String completedInList = "SELECT COUNT(*) FROM " + TABLE_BUCKET_ITEMS + " WHERE "
                + KEY_BUCKET + " = " + bucketNo + " AND " + KEY_FLAG + " = 1" ;

Cursor cursor = db.rawQuery(completedInList, null);
int completed = Integer.parseInt(cursor.getString(0));

String totalNoList = "SELECT COUNT(*) FROM " + TABLE_BUCKET_ITEMS + " WHERE "
                + KEY_BUCKET + " = " + bucketNo;
cursor.close();

Cursor cursor2 = db.rawQuery(totalNoList, null);
int total = Integer.parseInt(cursor2.getString(0));

float percentage = ((float)completed) / total;

cursor2.close();
db.close(); 
```

我希望 sql 查询的返回值是一个数字，这就是我将索引编码为 0 的原因，如下所示：`cursor.getString(0)`

但是为什么我遇到游标索引超出范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:12:02.277

[医生](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)说 `rawQuery`退货

> 一个 Cursor 对象，位于第一个条目之前

所以你似乎需要 `moveToFirst`在使用前打电话`cursor.getString`

# command-line-interface - Grunt 文件：如何在运行时添加命令行选项？（咕噜0.3.15+）

> ID：14058335
> 
> 赞同：2
> 
> 时间：2012-12-27T17:03:03.600
> 
> 标签：command-line-interface, command-line-arguments, gruntjs

如何在运行时在 Grunt 文件中添加和评估命令行选项？

我试过这个：

```
module.exports = function(grunt) {
  var cli = grunt.cli;

  cli.optlist["environment"] = {
    "short": "E",
    info: "Build environment",
    type: String
  };

  // This only outputs "environment=abc" if Grunt was called with
  //   --environment, with -E it returns "environment=undefined"
  console.log("environment=" + grunt.option("environment"));

  grunt.initConfig({ ... });

...
} 
```

只要我使用`--environment`开关它就可以工作，使用时`-E`返回`grunt.option()`未定义。奇怪的是，新选项显示在`--help`屏幕上。

显然选项对象只初始化一次：[https](https://github.com/gruntjs/grunt/blob/0.3-stable/lib/grunt/cli.js#L105) ://github.com/gruntjs/grunt/blob/0.3-stable/lib/grunt/cli.js#L105 。我无法弄清楚为什么在使用长开关选项时会评估新选项。

我想我应该在添加新选项后重新解析选项。我可以再次调用[grunt.tasks()](https://github.com/gruntjs/grunt/blob/0.3-stable/lib/grunt/cli.js#L36)，但这不起作用，正如我所料。

错误的方法。有什么更好的方法？

在创建 Grunt 助手或任务时，我会有同样的限制吗？这是一个应该在 Grunt 内部更改的一般限制吗？

这个问题与：

*   Grunt 0.3.15+（据我所知，它也应该适用于 0.4.x）
*   节点 0.6.18

## 编辑

我现在对 Grunt 进行了更多的逆向工程，并尝试更改 Grunt 本身以允许自己在运行时添加选项。

我跳过在 Grunt 中编写更改，因为它太多且具有误导性，我认为。让我描述一下总结的变化。

到目前为止，这是我的 Grunt 文件：

```
grunt.addOptions({
    "environment": {
            "short": "L",
            info: "Build environment",
            type: String
    }
}); 
```

`addOptions()`尝试将传递的选项添加到对象`optlist`，然后重新解析选项对象。重新解析只需将[此处的代码](https://github.com/gruntjs/grunt/blob/0.3-stable/lib/grunt/cli.js#L94)包装到一个在初始化时和 endof 时调用的方法中即可`addOptions()`。

到目前为止，我的实施并没有解决问题。我将不得不在 Grunt 中进行太多更改，因为 Grunt 的内部依赖结构不允许加载和解析 Grunt 文件（这需要解析的命令行选项），然后进一步初始化命令行选项配置（这是我的方法）。

我认为应该与 GitHub 的 Grunt 开发人员讨论为 Grunt 文件提供自定义选项。

## 到目前为止我的回答

那我该怎么回答...

我上面的例子是正确和合适的，只要一个人可以接受长选项。

一旦我有更多信息，我会更新这个问题。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:42:42.670

也许我遗漏了一些东西，但是您需要对两者进行测试：

```
var environment = grunt.option("E") || grunt.option("environment"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T17:16:48.333

值得一提的是，随着您要使用的命令行参数数量的增加，您*将*遇到与 grunt 内部使用的一些参数的冲突。

我用[nopt-grunt解决了这个问题](https://www.npmjs.com/package/nopt-grunt)

来自插件作者：

> 咕噜棒极了。Grunt 对使用附加命令行选项的支持并不出色。当前的文档具有误导性，因为它们提供了使用布尔标志和带有值的选项的示例，但它们并没有告诉您它仅适用于单个选项。尝试并使用多个选项，事情很快就会崩溃。

*** 我之前发布过这个，但是我在命令行参数上玩得很糟糕，当你用谷歌搜索“grunt 中的命令行参数”时，这个排名非常高。这绝对值得一试

# c# - Spy++/UISpy，windows窗体上的对象只有在活动时才存在

> ID：14058337
> 
> 赞同：1
> 
> 时间：2012-12-27T17:03:10.887
> 
> 标签：c#, visual-studio-2008, automation, ui-automation, inspector

我正在开发 VS2008 中的 C# .NET 应用程序，以自动在另一个 3rd 方应用程序上填写表单（无法访问源代码）。我的应用程序使用 UIAutomationClient 类来执行诸如关注或选择表单上的元素之类的事情。我遇到的问题是我需要处理的一些对象只有在它们有焦点时才可见。例如，如果当前活动元素是列表，我只能从列表中选择一个项目。我的解决方法是发送“标签”，直到我正在寻找的元素存在（有时表单上有数百个元素）。从技术上讲，它是可行的……但是必须有一种更优雅的方式来使元素可见。

同样，我使用 UISpy、Inspector 和 Spy++（32 或 64）来帮助识别对象，并且它们只能在它们处于活动状态时识别某些元素。一旦他们失去焦点，他们就不再出现在树中。我认为这是因为这些应用程序很可能是使用相同的 HWND 搜索方法开发的。

我的问题是，UIAutomation 可以识别这些非活动对象吗？是否有一个钩子或替代类可以暴露它们并务实地识别它们？

谢谢，

# c# - 以固定间隔触发事件

> ID：14058339
> 
> 赞同：1
> 
> 时间：2012-12-27T17:03:15.370
> 
> 标签：c#, multithreading, console-application

我有一个场景，我想跟踪我的控制台应用程序是活着还是死了（由于异常等）。

当控制台应用程序正在执行它的处理时，我希望有一个机制，它有一个计时器，它在每 N 分钟后继续调用一个报告方法，这个被调用的方法会更新数据库中的时间戳。

所以 ：

```
1 - Console application starts 
2 - Reports time stamp
3 - Keeps on doing its task (while in parallel it reports again after N seconds) 
```

我知道我可以生成一个线程并让它在“N”分钟后休眠并再次唤醒，但这是多么可靠，因为线程可能在资源空闲之前不会触发，并且“N”分钟可能不再有效，因为线程将按时开火。

我如何确保在处理过程中并行完成报告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:07:26.597

与其创建自己的线程，不如使用内置定时器：

```
 private DateTime startTime;
    private System.Threading.Timer theTimer; 
```

启动计时器：

```
 this.startTime = DateTime.Now;
            TimerCallback callback = TimerTick;
            this.theTimer = new System.Threading.Timer(callback, null, 0, 1000); 
```

回调方法：

```
 void TimerTick(object stateInfo)
    {
        TimeSpan currentTime = DateTime.Now - startTime;
        // Do your stuff here.
    } 
```

这将创建一个无延迟的计时器，每秒触发一次。

[MSDN 页面](http://msdn.microsoft.com/en-us/library/2x96zfy7.aspx)

第一个整数是调用*回调*方法`dueTime`之前延迟的时间量。指定零会立即启动计时器。

 *第二个整数是`period`- 即*回调方法*调用之间的时间间隔。

您需要确保您的处理`TimerTick`时间少于您指定的时间段或确保它可重入 - 即它可以应对在前一次调用完成之前被调用的情况。你如何做到这一点 - 或者你是否可以做到这一点 - 取决于你的应用程序。*

# python - 在python中为信号添加噪声

> ID：14058340
> 
> 赞同：106
> 
> 时间：2012-12-27T17:03:19.963
> 
> 标签：python

我想为我在 Python 中模拟的大约 100 个 bin 信号添加一些随机噪声 - 使其更加逼真。

在基本层面上，我的第一个想法是逐个bin，只在某个范围内生成一个随机数，然后从信号中添加或减去它。

我希望（因为这是 python）可能有一种更智能的方法可以通过 numpy 或其他东西来做到这一点。（我想理想情况下，从高斯分布中提取并添加到每个 bin 中的数字也会更好。）

提前感谢您的任何回复。

* * *

我只是在计划我的代码的阶段，所以我没有任何东西可以展示。我只是在想可能有一种更复杂的方式来产生噪音。

就输出而言，如果我有 10 个具有以下值的箱：

Bin 1: 1 Bin 2: 4 Bin 3: 9 Bin 4: 16 Bin 5: 25 Bin 6: 25 Bin 7: 16 Bin 8: 9 Bin 9: 4 Bin 10: 1

我只是想知道是否有一个预定义的函数可以增加噪音给我类似的东西：

Bin 1：1.13 Bin 2：4.21 Bin 3：8.79 Bin 4：16.08 Bin 5：24.97 Bin 6：25.14 Bin 7：16.22 Bin 8：8.90 Bin 9：4.02 Bin 10：0.91

如果没有，我将逐个 bin 并从高斯分布中选择一个数字添加到每个数字中。

谢谢你。

* * *

它实际上是来自我正在模拟的射电望远镜的信号。我希望能够最终选择模拟的信噪比。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-12-27T17:09:36.087

您可以生成一个噪声数组，并将其添加到您的信号中

```
import numpy as np

noise = np.random.normal(0,1,100)

# 0 is the mean of the normal distribution you are choosing from
# 1 is the standard deviation of the normal distribution
# 100 is the number of elements you get in array noise 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2018-12-08T23:31:47.673

对于那些试图在[SNR](https://en.wikipedia.org/wiki/Signal-to-noise_ratio)和 numpy 生成的正常随机变量之间建立联系的人：

[1] ![信噪比](../Images/3ccf2a0f1e00753e89ad3e4c46ec16c6.png)，重要的是要记住 P 是*平均功率*。

或以 dB 为单位：
[2]![信噪比 dB2](../Images/8f50df99cb2b0d1ef17352e8d67a9b73.png)

在这种情况下，我们已经有了一个信号，我们想要产生噪声来给我们一个想要的 SNR。

虽然根据您要建模的内容，噪声可以有不同的[风格，但一个好的开始（尤其是对于这个射电望远镜示例）是](https://en.wikipedia.org/wiki/Noise_(signal_processing))[加性高斯白噪声 (AWGN)](https://en.wikipedia.org/wiki/Additive_white_Gaussian_noise)。如前面的答案所述，要对 AWGN 建模，您需要在原始信号中添加一个零均值高斯随机变量。该随机变量的方差将影响*平均*噪声功率。

对于高斯随机变量 X，平均功率![EP](../Images/2b5b9218d50153a363d64f183de63e1f.png)，也称为二阶[矩](https://en.wikipedia.org/wiki/Normal_distribution#Moments)，为
[3] ![前任](../Images/f79b4ebd8b583e02f6c4045bc1a4b0f2.png)

所以对于白噪声，![前任](../Images/a1c364ea9d5e8ddc92119673631d632f.png)平均功率等于方差![前任](../Images/74c56611bc4d2a385980b6ef8a6dddd6.png)。

在 python 中对此进行建模时，您可以
1\. 根据所需的 SNR 和一组现有测量值计算方差，如果您希望测量值具有相当一致的幅度值，这将起作用。
2\. 或者，您可以将噪声功率设置为已知水平，以匹配接收器噪声之类的东西。接收器噪声可以通过将望远镜指向自由空间并计算平均功率来测量。

无论哪种方式，确保在信号中添加噪声并在线性空间而不是 dB 单位中取平均值非常重要。

下面是一些用于生成信号并绘制电压、以瓦特为单位的功率和以 dB 为单位的功率的代码：

```
# Signal Generation
# matplotlib inline

import numpy as np
import matplotlib.pyplot as plt

t = np.linspace(1, 100, 1000)
x_volts = 10*np.sin(t/(2*np.pi))
plt.subplot(3,1,1)
plt.plot(t, x_volts)
plt.title('Signal')
plt.ylabel('Voltage (V)')
plt.xlabel('Time (s)')
plt.show()

x_watts = x_volts ** 2
plt.subplot(3,1,2)
plt.plot(t, x_watts)
plt.title('Signal Power')
plt.ylabel('Power (W)')
plt.xlabel('Time (s)')
plt.show()

x_db = 10 * np.log10(x_watts)
plt.subplot(3,1,3)
plt.plot(t, x_db)
plt.title('Signal Power in dB')
plt.ylabel('Power (dB)')
plt.xlabel('Time (s)')
plt.show() 
```

[![产生的信号](../Images/c09e9e234d1ab0f9d4fd6e1f3de187ee.png)](https://i.stack.imgur.com/8UNws.png)

以下是根据所需 SNR 添加 AWGN 的示例：

```
# Adding noise using target SNR

# Set a target SNR
target_snr_db = 20
# Calculate signal power and convert to dB 
sig_avg_watts = np.mean(x_watts)
sig_avg_db = 10 * np.log10(sig_avg_watts)
# Calculate noise according to [2] then convert to watts
noise_avg_db = sig_avg_db - target_snr_db
noise_avg_watts = 10 ** (noise_avg_db / 10)
# Generate an sample of white noise
mean_noise = 0
noise_volts = np.random.normal(mean_noise, np.sqrt(noise_avg_watts), len(x_watts))
# Noise up the original signal
y_volts = x_volts + noise_volts

# Plot signal with noise
plt.subplot(2,1,1)
plt.plot(t, y_volts)
plt.title('Signal with noise')
plt.ylabel('Voltage (V)')
plt.xlabel('Time (s)')
plt.show()
# Plot in dB
y_watts = y_volts ** 2
y_db = 10 * np.log10(y_watts)
plt.subplot(2,1,2)
plt.plot(t, 10* np.log10(y_volts**2))
plt.title('Signal with noise (dB)')
plt.ylabel('Power (dB)')
plt.xlabel('Time (s)')
plt.show() 
```

[![具有目标 SNR 的信号](../Images/c79e7578d6decf76a6d1ab9d86ff27a3.png)](https://i.stack.imgur.com/82NT4.png)

下面是一个基于已知噪声功率添加 AWGN 的示例：

```
# Adding noise using a target noise power

# Set a target channel noise power to something very noisy
target_noise_db = 10

# Convert to linear Watt units
target_noise_watts = 10 ** (target_noise_db / 10)

# Generate noise samples
mean_noise = 0
noise_volts = np.random.normal(mean_noise, np.sqrt(target_noise_watts), len(x_watts))

# Noise up the original signal (again) and plot
y_volts = x_volts + noise_volts

# Plot signal with noise
plt.subplot(2,1,1)
plt.plot(t, y_volts)
plt.title('Signal with noise')
plt.ylabel('Voltage (V)')
plt.xlabel('Time (s)')
plt.show()
# Plot in dB
y_watts = y_volts ** 2
y_db = 10 * np.log10(y_watts)
plt.subplot(2,1,2)
plt.plot(t, 10* np.log10(y_volts**2))
plt.title('Signal with noise')
plt.ylabel('Power (dB)')
plt.xlabel('Time (s)')
plt.show() 
```

[![具有目标噪声水平的信号](../Images/788d6aec0e997bf571274dafbfb8af72.png)](https://i.stack.imgur.com/mbwvd.png)

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2014-10-03T15:11:58.383

...对于那些像我这样的人来说，他们的 numpy 学习曲线还很早，

```
import numpy as np
pure = np.linspace(-1, 1, 100)
noise = np.random.normal(0, 1, 100)
signal = pure + noise 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-09-07T10:24:17.920

对于那些想要在 pandas 数据框甚至 numpy ndarray 中加载的多维数据集添加噪声的人，这里有一个示例：

```
import pandas as pd
# create a sample dataset with dimension (2,2)
# in your case you need to replace this with 
# clean_signal = pd.read_csv("your_data.csv")   
clean_signal = pd.DataFrame([[1,2],[3,4]], columns=list('AB'), dtype=float) 
print(clean_signal)
"""
print output: 
    A    B
0  1.0  2.0
1  3.0  4.0
"""
import numpy as np 
mu, sigma = 0, 0.1 
# creating a noise with the same dimension as the dataset (2,2) 
noise = np.random.normal(mu, sigma, [2,2]) 
print(noise)

"""
print output: 
array([[-0.11114313,  0.25927152],
       [ 0.06701506, -0.09364186]])
"""
signal = clean_signal + noise
print(signal)
"""
print output: 
          A         B
0  0.888857  2.259272
1  3.067015  3.906358
""" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-07T18:31:43.770

# AWGN 类似于 Matlab 函数

```
def awgn(sinal):
    regsnr=54
    sigpower=sum([math.pow(abs(sinal[i]),2) for i in range(len(sinal))])
    sigpower=sigpower/len(sinal)
    noisepower=sigpower/(math.pow(10,regsnr/10))
    noise=math.sqrt(noisepower)*(np.random.uniform(-1,1,size=len(sinal)))
    return noise 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-26T10:55:20.947

在现实生活中，您希望模拟带有白噪声的信号。您应该向信号中添加具有正态高斯分布的随机点。如果我们谈论具有以单位/SQRT(Hz) 给出的灵敏度的设备，那么您需要从它设计您的点的标准偏差。在这里，我给出了为您执行此操作的函数“white_noise”，其余代码是演示并检查它是否执行了应有的操作。

```
%matplotlib inline
import numpy as np
import matplotlib.pyplot as plt
from scipy import signal

"""
parameters: 
rhp - spectral noise density unit/SQRT(Hz)
sr  - sample rate
n   - no of points
mu  - mean value, optional

returns:
n points of noise signal with spectral noise density of rho
"""
def white_noise(rho, sr, n, mu=0):
    sigma = rho * np.sqrt(sr/2)
    noise = np.random.normal(mu, sigma, n)
    return noise

rho = 1 
sr = 1000
n = 1000
period = n/sr
time = np.linspace(0, period, n)
signal_pure = 100*np.sin(2*np.pi*13*time)
noise = white_noise(rho, sr, n)
signal_with_noise = signal_pure + noise

f, psd = signal.periodogram(signal_with_noise, sr)

print("Mean spectral noise density = ",np.sqrt(np.mean(psd[50:])), "arb.u/SQRT(Hz)")

plt.plot(time, signal_with_noise)
plt.plot(time, signal_pure)
plt.xlabel("time (s)")
plt.ylabel("signal (arb.u.)")
plt.show()

plt.semilogy(f[1:], np.sqrt(psd[1:]))
plt.xlabel("frequency (Hz)")
plt.ylabel("psd (arb.u./SQRT(Hz))")
#plt.axvline(13, ls="dashed", color="g")
plt.axhline(rho, ls="dashed", color="r")
plt.show() 
```

[![有噪声的信号](../Images/5b772a05e498e810165e745ac7933002.png)](https://i.stack.imgur.com/lN35A.png)

[![PSD](../Images/a94e5cf57d7fe82bff293552eb2f57b8.png)](https://i.stack.imgur.com/xKWSj.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-28T20:09:24.593

上面的答案很棒。我最近需要生成模拟数据，这就是我开始使用的。分享对他人有帮助的案例，

```
import logging
__name__ = "DataSimulator"
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

import numpy as np
import pandas as pd

def generate_simulated_data(add_anomalies:bool=True, random_state:int=42):
    rnd_state = np.random.RandomState(random_state)
    time = np.linspace(0, 200, num=2000)
    pure = 20*np.sin(time/(2*np.pi))

    # concatenate on the second axis; this will allow us to mix different data 
    # distribution
    data = np.c_[pure]
    mu = np.mean(data)
    sd = np.std(data)
    logger.info(f"Data shape : {data.shape}. mu: {mu} with sd: {sd}")
    data_df = pd.DataFrame(data, columns=['Value'])
    data_df['Index'] = data_df.index.values

    # Adding gaussian jitter
    jitter = 0.3*rnd_state.normal(mu, sd, size=data_df.shape[0])
    data_df['with_jitter'] = data_df['Value'] + jitter

    index_further_away = None
    if add_anomalies:
        # As per the 68-95-99.7 rule(also known as the empirical rule) mu+-2*sd 
        # covers 95.4% of the dataset.
        # Since, anomalies are considered to be rare and typically within the 
        # 5-10% of the data; this filtering
        # technique might work 
        #for us(https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule)
        indexes_furhter_away = np.where(np.abs(data_df['with_jitter']) > (mu + 
         2*sd))[0]
        logger.info(f"Number of points further away : 
        {len(indexes_furhter_away)}. Indexes: {indexes_furhter_away}")
        # Generate a point uniformly and embed it into the dataset
        random = rnd_state.uniform(0, 5, 1)
        data_df.loc[indexes_furhter_away, 'with_jitter'] +=  
        random*data_df.loc[indexes_furhter_away, 'with_jitter']
    return data_df, indexes_furhter_away 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-28T14:11:52.063

Akavall 和 Noel 的精彩回答（这对我有用）。另外，我看到了一些关于不同分布的评论。我也尝试过的一个解决方案是对我的变量进行测试并找到它更接近的分布。

```
numpy.random 
```

可以使用不同的发行版，可以在其文档中看到：

[文档 numpy.random](https://numpy.org/doc/1.16/reference/routines.random.html#module-numpy.random)

作为来自不同分布的示例（示例来自 Noel 的回答）：

```
import numpy as np
pure = np.linspace(-1, 1, 100)
noise = np.random.lognormal(0, 1, 100)
signal = pure + noise
print(pure[:10])
print(signal[:10]) 
```

我希望这可以帮助从原始问题中寻找这个特定分支的人。

# c++ - STL 与结构中的速度问题

> ID：14058341
> 
> 赞同：-4
> 
> 时间：2012-12-27T17:03:27.970
> 
> 标签：c++, c, stl, struct

最近我看到了 C 和 C++ 之间的一些速度差异，有时很难说在一种情况下哪一个更快。

我知道 STL 自推出以来已经简化了很多，但它是否以速度/内存成本简化了一些东西？

例如，有多种方法可以使用带有指针的结构来定义堆栈/队列/二叉树/图等。不过，这些实现有点复杂。另一种方法是简单地使用来自 STL 的向量，该向量具有使用模板随意增加和减小大小的能力。还为地图、队列等实现了许多模板。

我的问题是，您认为哪种实现在时间和内存复杂性方面更有效，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:11:08.003

C++ 标准库经过多年的开发、性能调整和调试，随着编译器优化的改进，您可以从标准容器中获得非常好的开箱即用性能。可能最大的性能瓶颈是去堆获取内存，在某些情况下可以减少，例如`reserve`向量。

如果您正在编写 C++，只需根据您的软件需求使用所有可用的容器和算法。然后，如果您有性能问题，您可以分析您的代码（很可能瓶颈仍然不是标准库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:42:09.360

这里的关键当然是，如果您使用“侵入式”解决方案，也就是说，您将链表的链接存储在每个节点内，而不是拥有一个单独的节点结构，该结构包含指向其他位置的指针/引用，该位置包含数据本身，会有一些性能影响[并且可以在两个方向上起作用-不一定侵入式解决方案总是最好的]。

人们弄错的典型情况是，他们比较将分配的对象存储在某种容器中，然后将其与将对象副本存储在容器中的解决方案进行比较。如果该容器需要通过重新分配来“增长”，那么它将导致性能问题。但这只是“如果要存储的东西的选择错误”或“这种类型的对象存储的容器类型错误”。

在大多数情况下，你如何做某事（例如它是一棵树还是一个向量）的实现是你获得 100 倍改进的地方。为这种类型的存储编写特定的东西会给你 5-20% 的改进，这取决于原始代码的好坏和优化代码的编写好坏。现在，假设它不是游戏中渲染循环的内部细节的一部分，也不是 OS 内核中的调度程序或内存分配代码，那么 5% 是不值得拥有的，而对于绝大多数代码，20% 的改进可能是[对于系统功能的一部分-如果您将内容存储在容器中，希望您可以用它做更多的事情，而不仅仅是简单地存储它并在容器内容上来回工作，对吗？]

在花时间优化代码之前，应该对代码花费时间的地方进行一些体面的分析。然后你可以攻击使它变得更好。第一步是查看“这里的算法的行为是什么？” 当我们可以使用更快的不同方法时，我们是否花费 O(2^n) 对某些东西进行排序？当列表、堆栈或队列可能是更好的选择时，我们是否会花时间从大型数组中插入/删除内容？当我们可以写入较少数量的大块时，我们是否正在将小块数据写入磁盘？

这类问题将为您带来 5、10、100 倍的改进，从而带来真正的不同。当然，剃掉 5% 的东西是值得的。有时减少 0.5% 的折扣是值得的，如果它能让你的游戏以 200 fps 而不是 100 fps 运行，因为正是这 0.5% 的折扣让你超过了帧切换率。但总的来说，如果它至少没有将速度提高一倍，您可能应该将时间花在其他地方。

# objective-c - GCRectMake 的 iOS 错误 - 将“int”发送到不兼容类型“CGRect”（又名“struct CGRect”）的参数

> ID：14058342
> 
> 赞同：3
> 
> 时间：2012-12-27T17:03:32.133
> 
> 标签：objective-c, ios, uiviewcontroller, cgrectmake

我是 iOS 编程的新手。

我正在关注一个指南，一本关于 iOS 的意大利语书。对于第一个应用程序，我必须这样修改`ViewController.m`：

```
#import "ViewController.h"

@implementation ViewController

- (void)didReceiveMemoryWarning{
    [super didReceiveMemoryWarning];
    // Release Any chached data, images, etc that aren't in use.
}    

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)datiDettaglioChiudi:(datiDettaglio *)controller{
    //altre operazioni possibii dopo la dismissModal
    NSLog(@"... di ritorno dal DismissModal...");
    [controller dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"dettaglio"]){
        datiDettaglio *mioController1 = segue.destinationViewController;
        [mioController1 setDelegate:self];
        //aggiunta di una UILabel - qui è possibile personalizzare la propria vista     direttamente da codice
        UILabel *testLabel = [[UILabel alloc] initWithFrame: GCRectMake(30,100,250,40)];
        [testLabel setText:@"Etichetta di test"];
        [testLabel setBackgroundColor:[UIColor greenColor]];
        [testLabel setTextColor:[UIColor blackColor]];
        [mioController1.view addSubview:testLabel];

    }
}

- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
}

@end 
```

问题在这里：

```
UILabel *testLabel = [[UILabel alloc] initWithFrame: GCRectMake(30,100,250,40)]; 
```

在`GCRectMake`：我有一个警告和一个错误：

```
WARNING Implicit declaration of function 'GCRectMake' is invalid in C99
ERROR   Sending 'int' to parameter of incompatible type 'CGRect' (aka 'struct CGRect') 
```

我真的不明白出了什么问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T17:17:34.200

是`CGRectMake`，不是`GCRectMake`。CG 代表核心图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:06:31.613

这（除了我的评论）应该修复错误

```
 UILabel *testLabel = [[UILabel alloc] initWithFrame: CGRectMake(30.0f,100.0f,250.0f,40.0f)]; 
```

# sql - 文本文件的集中存储

> ID：14058346
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:03:47.790
> 
> 标签：sql, nosql, storage, centralized

我考虑集中存储具有不同元数据和内容设置（唯一行、键：值行）的文本文件，但仍然不知道要使用哪种技术 - 像 PostgreSQL 或 NoSQL 解决方案这样的 sql db。

大文件：每个 100 - 600 mb，读取/写入 100 - 500 行的小查询

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:34:30.400

实际上，SQL 和 NoSQL 系统之间的选择取决于您正在运行的系统类型。与大多数 NoSQL 系统相比，SQL 相对昂贵，因为它提供了所有 ACID 保证——原子性、一致性、完整性和持久性。如果您确实需要一致的数据，这些都是保持数据一致性的重要保证。如果您不需要一致的数据（例如，您是一个缓存解决方案或者您是 Twitter），那么 NoSQL 系统的效率就会变得更有吸引力。

对于您的特定用例；听起来好像没有很多解决方案可以帮助您。修改文本文件的中间部分本质上需要（至少）在编辑指向磁盘之后重写文本文件的整个部分（假设您实际上希望文件是磁盘上的纯文本）。

您可能能够在 SQL 或 NoSQL 之上构建一个系统，将文本文件表示为行或行块，并能够以面向行的方式对它们进行操作。但即使是那种类型的系统也可能对 100-600MB 大的文件效率低下。考虑将文件本身存储为 SQL 中的某种结构化数据；然后在用户请求全文文件时按需重新生成文件。

# c# - C# UrlEncode 但允许某些字符集

> ID：14058350
> 
> 赞同：3
> 
> 时间：2012-12-27T17:04:04.083
> 
> 标签：c#, unicode, urlencode

我有一个应用程序，用户可以在其中上传名称可以包含非拉丁字符（例如西里尔文或中文）的文件。例如：

```
http://localhost/привет мир.html 
```

然后，我需要能够对非法和/或特殊字符（如空格）的文件名进行 URL 编码。当我按如下方式对 URI 进行 URL 编码时：

```
string uri = "http://localhost/привет мир.html";
string encoded = HttpUtility.UrlPathEncode(uri);
Console.WriteLine(encoded); 
```

这给了我以下结果：

```
http://localhost/%d0%bf%d1%80%d0%b8%d0%b2%d0%b5%d1%82%20%d0%bc%d0%b8%d1%80.html 
```

我真正想要的是：

```
http://localhost/привет%20мир.html 
```

大多数浏览器都支持这种格式，而我的用户（在这种情况下是俄罗斯人）需要能够以他们的语言和字符集查看更易于显示的 URL。

有没有办法对 URI 进行 URL 编码并且不编码某些字符集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:32:53.123

您将需要创建自己的`HttpEncoder`.

[HttpEncoder 类](http://msdn.microsoft.com/en-us/library/system.web.util.httpencoder.aspx)-**备注**部分解释了如何设置您的网站以`HttpEncoder`在`HttpUtility`、`HttpServerUtility`和`HttpResponseHeader`.

# php - 在drupal 的theme_form_element 函数中，数组+= 运算符抛出不支持的操作数错误

> ID：14058352
> 
> 赞同：-3
> 
> 时间：2012-12-27T17:04:08.450
> 
> 标签：php, arrays, drupal-7, operator-overloading

在 drupal 中，此代码会引发无法捕获的 php 错误：

```
/*
* @param $variables
*   An associative array containing:
*   - element: An associative array containing the properties of the element.
*     Properties used: #title, #title_display, #description, #id, #required,
*     #children, #type, #name.
*
* @ingroup themeable
*/
function theme_form_element($variables) {
  //print_r($variables); die("daa`");
  $element = &$variables['element'];
  // This is also used in the installer, pre-database setup.
  $t = get_t();

  // This function is invoked as theme wrapper, but the rendered form element
  // may not necessarily have been processed by form_builder().

  $element += array(
    '#title_display' => 'before',
  );
... 
```

drupal 函数的最后一行抛出错误。

`$variables['element']`进入函数时是一个数组。当`$element`引用分配给它时，它（在 内`$variables`）从 type更改`Array`为 type `&Array`。该变量`$element`将自身报告为 type `Array`。

以下行在使用而不是 += 运算符时不会引发相同的错误：

```
$element = $element + array();
$new = array_merge($element, array()); 
```

@iputonmyrobeandwizardhat 要求提供 sscce，我试图在下面提供。但是，该代码不会单独导致与在 drupal 的渲染过程中使用时抛出的相同错误。谁能推荐一种隔离错误的方法？

```
<?php
function theme_form_element($variables) { 
  $element = &$variables['element'];         
  var_dump($variables);                //['element'] becomes type &array

  //not fatal
  $element2 = $element + array( '#title' => 'before'); 

  //not fatal
  $element3 = array_merge($element, array( '#title' => 'before'));   

  $element += array( '#title_display' => 'before');  
    var_dump($element);
}

$variables_array = array
(
'element' => array
    (
        '#type' => 'textfield',
        '#title' => 'First Name:',
        '#default_value' => '',
        '#size' => 60,
        '#maxlength' => 64,
        '#description' => 'First name',
        '#required' => 1,
        '#input' => 1,
        '#autocomplete_path' => '',
        '#process' => Array ('ajax_process_form'),

        '#theme' => 'textfield',
        '#theme_wrappers' => Array('form_element'),

        '#defaults_loaded' => 1,
        '#tree' => '',
        '#parents' => Array('first_name'),

        '#array_parents' => Array('first_name'),

        '#weight' => 0,
        '#processed' => 1,
        '#attributes' => Array(),

        '#title_display' => 'before',
        '#id' => 'edit-first-name',
        '#name' => 'first_name',
        '#value' => '',
        '#ajax_processed' => '',
        '#sorted' => 1,
        '#children' => '<input type="text" id="edit-first-name" name="first_name" value="" size="60" maxlength="64" class="form-text required" />'
    )

);    
?> 
```

输入：

```
// base64_encode(serialize($variables));
YToxOntzOjc6ImVsZW1lbnQiO2E6MjY6e3M6NToiI3R5cGUiO3M6OToidGV4dGZpZWxkIjtzOjY6IiN0aXRsZSI7czoxMToiRmlyc3QgTmFtZToiO3M6MTQ6IiNkZWZhdWx0X3ZhbHVlIjtzOjA6IiI7czo1OiIjc2l6ZSI7aTo2MDtzOjEwOiIjbWF4bGVuZ3RoIjtpOjY0O3M6MTI6IiNkZXNjcmlwdGlvbiI7czoxMDoiRmlyc3QgbmFtZSI7czo5OiIjcmVxdWlyZWQiO2I6MTtzOjY6IiNpbnB1dCI7YjoxO3M6MTg6IiNhdXRvY29tcGxldGVfcGF0aCI7YjowO3M6ODoiI3Byb2Nlc3MiO2E6MTp7aTowO3M6MTc6ImFqYXhfcHJvY2Vzc19mb3JtIjt9czo2OiIjdGhlbWUiO3M6OToidGV4dGZpZWxkIjtzOjE1OiIjdGhlbWVfd3JhcHBlcnMiO2E6MTp7aTowO3M6MTI6ImZvcm1fZWxlbWVudCI7fXM6MTY6IiNkZWZhdWx0c19sb2FkZWQiO2I6MTtzOjU6IiN0cmVlIjtiOjA7czo4OiIjcGFyZW50cyI7YToxOntpOjA7czoxMDoiZmlyc3RfbmFtZSI7fXM6MTQ6IiNhcnJheV9wYXJlbnRzIjthOjE6e2k6MDtzOjEwOiJmaXJzdF9uYW1lIjt9czo3OiIjd2VpZ2h0IjtpOjA7czoxMDoiI3Byb2Nlc3NlZCI7YjoxO3M6MTE6IiNhdHRyaWJ1dGVzIjthOjA6e31zOjE0OiIjdGl0bGVfZGlzcGxheSI7czo2OiJiZWZvcmUiO3M6MzoiI2lkIjtzOjE1OiJlZGl0LWZpcnN0LW5hbWUiO3M6NToiI25hbWUiO3M6MTA6ImZpcnN0X25hbWUiO3M6NjoiI3ZhbHVlIjtzOjA6IiI7czoxNToiI2FqYXhfcHJvY2Vzc2VkIjtiOjA7czo3OiIjc29ydGVkIjtiOjE7czo5OiIjY2hpbGRyZW4iO3M6MTIxOiI8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVkaXQtZmlyc3QtbmFtZSIgbmFtZT0iZmlyc3RfbmFtZSIgdmFsdWU9IiIgc2l6ZT0iNjAiIG1heGxlbmd0aD0iNjQiIGNsYXNzPSJmb3JtLXRleHQgcmVxdWlyZWQiIC8+Ijt9fQ== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:13:44.727

+= 适用于数组和引用。

```
$arr = array(1);
$e = &$arr;
$e += array(1,2);

print_r($e);//Array ( [0] => 1 [1] => 2 ) 
```

[http://codepad.org/0M5ChPgt](http://codepad.org/0M5ChPgt)

# ruby-on-rails - Rails 2.3 中的 Rails 正则表达式日期验证

> ID：14058353
> 
> 赞同：2
> 
> 时间：2012-12-27T17:04:10.400
> 
> 标签：ruby-on-rails

我创建了一个视图，其中有两个输入，两个日期，我希望用户以特定格式键入它们。我将其创建为索引而不是表单，长篇大论。我正在尝试使用正则表达式来验证用户输入的日期。我希望日期的格式为 YYYY-MM-DD，因此如果用户以不同的格式输入日期，则会导致错误。这个正则表达式应该放在控制器还是模型中？我已经在模型中尝试了 validates_format_of，但它似乎不起作用。我也在 Rails 2.3 和 ruby​​ 1.8.7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:43:57.527

```
validates_format_of :date, :with => /^\d{4}-\d{2}-\d{2}$/ 
```

你说 validates_format_of 似乎不起作用。这是什么意思？请提供更多信息。

# arrays - 已编译 tpl 中的 Smarty 和 OOP

> ID：14058355
> 
> 赞同：0
> 
> 时间：2012-12-27T17:04:26.730
> 
> 标签：arrays, oop, smarty

```
$_smarty_tpl->tpl_vars['Variable']->value 
```

我想知道 smarty 如何访问对象。smarty_tpl 是对象，但是编译的 tpl 的代码示例中的属性是什么？是数组`tpl_vars`还是`value`两者的混合？

在 php 中，我创建了一个 smarty 对象并将其与方法一起使用（例如分配和显示）。在模板本身（文件 .tpl）中，我不使用 OOP，而是使用类似于 html 的程序样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:47:56.927

我试着做一个小例子，希望能让你明白这个语法：

```
//A class that represents a fruit basket, a collection of fruits. Similar to $smarty, which is a collection of variables (among other things)
class FruitBasket
{
    public $basket = array();

    public function foo() {

    }
}
//A class that represents a fruit. It has some properties, like 'name' and 'color' 
class Fruit
{
    public $name = null;
    public $color = null;

    public function __construct($fruit_name) {
        $this->name = $fruit_name;
    }
}

$fruits = array();  //Make an array that will hold various fruits

$fruit = new Fruit('banana');   //Create a fruit
$fruit->color = 'yellow';       //Assign a value to its 'color' property 
$fruits['banana'] = $fruit;     //Assign the fruit to the 'fruits' array

//Make the same steps for 2 more fruits
$fruit = new Fruit('apple');
$fruit->color = 'red';
$fruits['apple'] = $fruit;

$fruit = new Fruit('pear');
$fruit->color = 'green';
$fruits['pear'] = $fruit;

$fruit_basket = new FruitBasket(); //Create a new fruit basket
$fruit_basket->basket = $fruits; //Assign the $fruits array to its 'basket' property

echo $fruit_basket->basket['banana']->color;    //prints 'yellow' 
```

# java - 当 ProgressBar 达到 100 时如何退出应用程序？

> ID：14058356
> 
> 赞同：0
> 
> 时间：2012-12-27T17:04:38.717
> 
> 标签：java, swing, progress-bar, jframe, jprogressbar

好的，我有这个示例 Java 代码。你们中的许多人可能以前见过它。由于我对 Java 很陌生，我想知道在 ProgressBar 达到 100% 或在我的情况下是 num >= 2000 之后，您实际上是如何调用程序来关闭的？

代码：

```
 package progress;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ProgressMonitor extends JFrame {
JProgressBar current;
JTextArea out;
JButton find;
Thread runner;
int num = 0;

public ProgressMonitor()
{
    super("Progress monitor");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(205,68);
    setLayout(new FlowLayout());
    current = new JProgressBar(0,2000);
    current.setValue(0);
    current.setStringPainted(true);
    add(current);
}
public void iterate()
{
    while(num<2000){
    current.setValue(num);
    try{
        Thread.sleep(1000);

    }catch (InterruptedException e) { }
    num+=95;
    }
}   

    public static void main(String[] args) {
        ProgressMonitor pm = new ProgressMonitor();
        pm.setVisible(true);
        pm.iterate();

    }

} 
```

我尝试在 while 块中使用 if 语句，所以我写了

```
if(num >=2000) System.exit(0); 
```

但什么也没发生。

我还尝试转换 JProgressBar getValue() 方法并将其装箱为整数

```
if ((Integer)current.getValue() >= 100) System.exit(0); 
```

和 current.getValue() >= 2000 的那个，但都不适合我。

你能帮我找到解决办法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:33:19.557

我不太确定你的问题......但这确实有效：

```
public void iterate() {
    while (num < 2000) {            
        current.setValue(num);
        try {
            Thread.sleep(500);

        } catch (InterruptedException e) {
        }

        num += 95;

        if (num >= 2000)
            System.exit(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:38:21.433

您可以在构建 JFrame 时检查 javadoc：

```
public interface WindowConstants
{
    /**
     * The do-nothing default window close operation.
     */
    public static final int DO_NOTHING_ON_CLOSE = 0;

    /**
     * The hide-window default window close operation
     */
    public static final int HIDE_ON_CLOSE = 1;

    /**
     * The dispose-window default window close operation.
     * <p>
     * <b>Note</b>: When the last displayable window
     * within the Java virtual machine (VM) is disposed of, the VM may
     * terminate.  See <a href="../../java/awt/doc-files/AWTThreadIssues.html">
     * AWT Threading Issues</a> for more information.
     * @see java.awt.Window#dispose()
     * @see JInternalFrame#dispose()
     */
    public static final int DISPOSE_ON_CLOSE = 2;

    /**
     * The exit application default window close operation. Attempting
     * to set this on Windows that support this, such as
     * <code>JFrame</code>, may throw a <code>SecurityException</code> based
     * on the <code>SecurityManager</code>.
     * It is recommended you only use this in an application.
     *
     * @since 1.4
     * @see JFrame#setDefaultCloseOperation
     */
    public static final int EXIT_ON_CLOSE = 3;

} 
```

# cluster-analysis - 如何将文本文件转换为 .arff 格式（weka）

> ID：14058357
> 
> 赞同：2
> 
> 时间：2012-12-27T17:04:40.020
> 
> 标签：cluster-analysis, weka, hierarchical-clustering

请告诉我如何将文本文件转换为 .arff 格式（weka），因为我想对 1000 txt 文件进行数据聚类。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:37:42.187

WEKA 中实现了一些转换器，只需找到正确的格式或对您的数据进行少量更改（使用 awk、sed...）。

以下是与该主题相关的 API 页面：[http ://weka.sourceforge.net/doc.stable/weka/core/converters/package-summary.html](http://weka.sourceforge.net/doc.stable/weka/core/converters/package-summary.html)

例如，这里是如何从 CSV 转换为 ARFF：

```
java weka.core.converters.CSVLoader filename.csv > filename.arff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T13:49:06.487

这是您可以使用的代码

```
package text.Classification;
import java.io.*;
import weka.core.*;
public class TextDirectoryToArff {

public Instances createDataset(String directoryPath) throws Exception {
FastVector atts;
FastVector attVals;
atts = new FastVector();
atts.addElement(new Attribute("contents", (FastVector) null));
String[] s = { "class1", "class2", "class3" };
attVals = new FastVector();
for (String p : s)
    attVals.addElement(p);
atts.addElement(new Attribute("class", attVals));
Instances data = new Instances("MyRelation", atts, 0);
System.out.println(data);

InputStreamReader is = null;
File dir = new File(directoryPath);
String[] files = dir.list();
for (int i = 0; i < files.length; i++) {
    if (files[i].endsWith(".txt")) {
    double[] newInst = new double[2];
    File txt = new File(directoryPath + File.separator + files[i]);

    is = new InputStreamReader(new FileInputStream(txt));
    StringBuffer txtStr = new StringBuffer();

    int c;
    while ((c = is.read()) != -1) {
        txtStr.append((char) c);
    }
    newInst[0] = data.attribute(0).addStringValue(txtStr.toString());
    int j=i%(s.length-1);
    newInst[1] = attVals.indexOf(s[j]);
    data.add(new Instance(1.0, newInst));

    }
}
return data;
}

public static void main(String[] args) {

TextDirectoryToArff tdta = new TextDirectoryToArff();
try {
    Instances dataset = tdta.createDataset("/home/asadul/Desktop/Downloads/text_example/class5");
    PrintWriter fileWriter = new PrintWriter("/home/asadul/Desktop/Downloads/text_example/abc.arff", "UTF-8");
    fileWriter.println(dataset);
    fileWriter.close();
} catch (Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace();
}

} 
```

}

# twitter-bootstrap - Bootstrap Typeahead 从查询中选择任何单词

> ID：14058358
> 
> 赞同：0
> 
> 时间：2012-12-27T17:04:44.147
> 
> 标签：twitter-bootstrap, typeahead, bootstrap-typeahead

我使用以下代码获取 Bootstrap Typehead 文本框的源代码：

```
$(document).ready(function () {
        $("input[id$='txtSearchWhat']").typeahead({
            source: function (typeahead, query) {
                $.get("http://localhost:5980/Services/AutoComplete.svc/WordLookup", {     text: typeahead },
                function (data) {

                    return query(data.d);
                });

            }
        });
    }); 
```

这适用于列表（示例）

```
- Pizza
- Lasagne
- Pasta 
```

输入例如“P”，它会显示 Pizza 和 Lasagne 输入例如“as”，它会显示 Lasagne 和 Pasta

我需要知道的是，我没有找到答案，也不知道该怎么做：

我该怎么做，用上面的列表，输入例如“我想要一个比萨”，比萨就会出现。例如，Pizza 或 Lasagne 显示 Pizza 和 Lasagne。换句话说。如何实现从多个单词中选择的预输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:16:36.857

您可以传递给预输入的选项之一是自定义匹配器函数。

```
matcher: function( item ) {
  // The 'item' parameter is any item in your list (e.g. "Pizza" )
  // Use this.query to access the search string (e.g. "I want a Pizza")
  // return true if this.query matches item through your custom logic
} 
```

# java - 如何在 ubuntu 终端上更正配置 grails？

> ID：14058362
> 
> 赞同：1
> 
> 时间：2012-12-27T17:05:12.897
> 
> 标签：java, ubuntu

我有以下内容`.bashrc`：

```
JAVA_HOME="/usr/bin/java"
GRAILS_HOME="/root/grails"
PATH=$PATH:$JAVA_HOME:$GRAILS_HOME/bin

export JAVA_HOME
export GRAILS_HOME
export PATH 
```

但是，当我`> grails`在终端中执行时，我得到：

```
root@localhost:~# grails
grails: JAVA_HOME is not a directory: /usr/bin/java 
```

当我试图替换为

```
JAVA_HOME="/usr/share/java" 
```

那么结果是：

```
root@localhost:~# grails
grails: JAVA_HOME is not defined correctly; can not execute: /usr/share/java/bin/java 
```

我在那里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:10:29.793

我希望`JAVA_HOME`包含包含（和其他）的`bin`目录。`java`

很明显，您选择的这两个选项不正确。

查看我的 Ubuntu 安装，我在 下有许多 Java 包`/usr/lib/jvm`，我会在那里选择一个合适的包，例如

```
export JAVA_HOME=/usr/lib/jvm/java-6-openjdk-amd64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T12:36:22.320

确保来源更改的文件，例如： $ source [所做更改的文件名] 在您的示例 .bashrc

# ruby-on-rails - Rails - 在索引视图上显示相关数据

> ID：14058364
> 
> 赞同：1
> 
> 时间：2012-12-27T17:05:18.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在努力让belongs_to 模型在索引页面的部分内正确迭代。

**课程：**

```
class Chapter < ActiveRecord::Base
  attr_accessible :name, :chapter_num,
  belongs_to :chapter
  #fields: :id, :name, :chapter_num
end

class County < ActiveRecord::Base
  attr_accessible :name, :county_num, :chapter_id
  has_many :counties
  #fields: :id, :name, :county_num, :chapter_id
end

class ChaptersController < ApplicationController
  def index
    @chapters = Chapter.all
    @counties = County.all(:joins => :chapter, :select => "counties.*, chapters.id")
  end
end 
```

**应用程序/视图/章节/index.html.erb：**

```
<h1>Chapter Index</h1>
  <%= render @chapters %>
<br />
<%= link_to "Add a new Chapter", new_chapter_path, class: "btn btn-large btn-primary" %> 
```

**应用程序/视图/章节/_chapter.html.erb：**

```
<div class="row">
  <div class="span5 offset1"><h4><%= link_to chapter.name, edit_chapter_path(chapter.id) %></h4></div>
  <div class="span2"><h4><%= chapter.chapter_num %></h4></div>
</div>
<!-- here's where the problem starts -->
<% @counties.each do |county| %>
<div class="row">
  <div class="span4 offset1"><%= county.name %></div>
  <div class="span4 offset1"><%= county.county_num %></div>
  <div class="span2"><%= link_to 'edit', '#' %></div>
</div>
<% end %>
<%= link_to "New county", new_county_path %>
<hr> 
```

当前代码显示了下面的屏幕截图。问题是它会遍历所有县，而不仅仅是与给定章节相关的县。![索引视图的屏幕截图](../Images/286160f132302cab1df4a444fbf8ee4e.png)

我如何在部分中添加章节特定变量，这将导致县基于该`:chapter_id`字段进行迭代，因为我在索引视图中，而不是显示视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:37:27.383

```
class ChaptersController < ApplicationController
  def index
    @chapters = Chapter.all
    # @counties = County.all(:joins => :chapter, :select => "counties.*, chapters.id")
  end
end 
```

看法：

```
<% chapter.counties.each do |county| %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:43:07.833

我认为这样的事情对你有用：

```
<%= @chapters.each do |chapter| %>

    <div class="row">
      <div class="span5 offset1"><h4><%= link_to chapter.name, edit_chapter_path(chapter.id) %></h4></div>
      <div class="span2"><h4><%= chapter.chapter_num %></h4></div>
    </div

    <% chapter.counties.each do |county| %>
        <div class="row">
          <div class="span4 offset1"><%= county.name %></div>
          <div class="span4 offset1"><%= county.county_num %></div>
          <div class="span2"><%= link_to 'edit', '#' %></div>
        </div>
    <% end %>
    <%= link_to "New county", new_chapter_county_path(chapter) %>
<% end %> 
```

请注意，关键是要理解，因为每个章节都有很多县，所以您应该遍历每个章节的县，通过`chapter.counties.each`它只会给您属于该特定章节的县。

另请注意用于创建新县的不同 link_to 路径。如果您的路线设置为将县嵌套在章节下，您应该可以这样做 `new_chapter_county_path(chapter)`

# java - OpenCV：多米诺骨牌圆点/圆盘检测

> ID：14058366
> 
> 赞同：8
> 
> 时间：2012-12-27T17:05:19.417
> 
> 标签：java, android, opencv

我正在开发一个 Android 应用程序，该应用程序使用 OpenCV for Android 计算正在看到的多米诺骨牌碎片的所有点的总和 - 如图所示。

![一个样品](../Images/8e3f84c337f42bd46ccbfef091959f6b.png)

问题是，我找不到过滤其他轮廓并只计算我在多米诺骨牌中看到的点的方法，我尝试使用 Canny 边缘查找然后使用 HoughCircles，但没有结果，因为我没有绝对的顶部岩石视图和 HoughCircles 仅检测完美圆圈 :)

这是我的代码：

```
public Mat onCameraFrame(Mat inputFrame) {
    inputFrame.copyTo(mRgba);

    Mat grey = new Mat();
    // Make it greyscale
    Imgproc.cvtColor(mRgba, grey, Imgproc.COLOR_RGBA2GRAY);

    // init contours arraylist
    List<MatOfPoint> contours = new ArrayList<MatOfPoint>(200);     

    //blur
    Imgproc.GaussianBlur(grey, grey, new Size(9,9), 10);        
    Imgproc.threshold(grey, grey, 80, 150, Imgproc.THRESH_BINARY);

    // because findContours modifies the image I back it up
    Mat greyCopy = new Mat();
    grey.copyTo(greyCopy);

    Imgproc.findContours(greyCopy, contours, new Mat(), Imgproc.RETR_TREE, Imgproc.CHAIN_APPROX_NONE);      
    // Now I have my controus pefectly

    MatOfPoint2f mMOP2f1 = new MatOfPoint2f();

    //a list for only selected contours
    List<MatOfPoint> SelectedContours = new ArrayList<MatOfPoint>(400);     

    for(int i=0;i<contours.size();i++)
    {

        if(here I should put a condition that distinguishes my spots, eg: if contour inside is black and is a black disk)
        {
            SelectedContours.add(contours.get(i));
        }
    }
    Imgproc.drawContours(mRgba, SelectedContours, -1, new Scalar(255,0,0,255), 1);       
    return mRgba;        
} 
```

编辑：

阈值后轮廓的一个独特特征是它们从内部完全是黑色的，无论如何我可以计算给定轮廓的平均颜色/强度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T07:28:01.287

SO上有一个类似的问题和可能的解决方案，名为[Detection of coin (and fit ellipses) on an image](https://stackoverflow.com/questions/4785419/detection-of-coins-and-fit-ellipses-on-an-image)。在这里你会发现一些关于 opencv 函数的建议`fitEllipse`。

你应该看看[这个以获得更多关于 opencv 函数的信息`fitEllipse`](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#cv-fitellipse)。

此外，要仅检测图像中的黑色元素，您可以使用 HSV 颜色模型，仅查找黑色。你可以[在这里找到解释](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)。

# c# - 将数据集绑定到列表框

> ID：14058368
> 
> 赞同：0
> 
> 时间：2012-12-27T17:05:20.730
> 
> 标签：c#, data-binding

我有两个列表框。一个由用户填写。

```
daUsers = new SqlDataAdapter("SELECT * FROM Users", connection);
daUsers.Fill(UsersLocal);
listBox2.DataSource = UsersLocal;
listBox2.DisplayMember = "Name";
listBox2.ValueMember = "ID"; 
```

二是文件填写。在文档 dataTable 中，我使用 UserID 存储相同的数据。现在我想将第二个列表框与来自 Document DataTable 的数据绑定，其中 UserID 来自第一个 ListBox。我怎么能这样做？我通过 SQLCommand 尝试过，但失败了。

```
 daDocuments = new SqlDataAdapter("SELECT * FROM Documents WHERE UserID='listbox2.SelectedValue'", connection); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:11:46.907

```
string queryString = ("SELECT * FROM Documents WHERE UserID='" + listbox2.SelectedValue + "'"; 
```

然后使用它`string`为您的文档分配数据`ListBox`。

# java - Java解析字节

> ID：14058369
> 
> 赞同：0
> 
> 时间：2012-12-27T17:05:27.360
> 
> 标签：java, byte

我有一个字节 b

字节有 8 位

```
bits for single byte

0 = status
1 = locale
2 = AUX
bits (3 & 4) relay
 1\. 0 (hence 00) still
 2\. 1 (hence 01) noStill
 3\. 2 (hence 10) stationed
 4\. 3 (hence 11) slow
5 = message;
6 = stuff
7 = moreStuff 
```

我将如何解析第 3 位和第 4 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:10:21.930

您可以使用`BitSet`class 从字节值中检索特定位：

```
public static BitSet fromByte(byte b)
{
    BitSet bits = new BitSet(8);
    for (int i = 0; i < 8; i++)
    {
        bits.set(i, (b & 1) == 1);
        b >>= 1;
    }
    return bits;
} 
```

通过使用上述方法，您可以获得`BitSet`字节的表示并获取特定位：

```
byte b = ...; // byte value.
System.out.println(fromByte(b).get(2));  // printing bit #3
System.out.println(fromByte(b).get(3));  // printing bit #4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:10:46.937

尝试

```
 boolean still = (b & 0xC) == 0x0;
    boolean noStill = (b & 0xC) == 0x4;  
    boolean stationed = (b & 0xC) == 0x8; 
    boolean slow = (b & 0xC) == 0xC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:16:28.277

```
switch ((b>>3)&3){
  case 0: return still;
  case 1: return noStill;
  case 2: return stationed;
  case 3: return slow
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T17:09:34.550

`bitwise AND`( `&`)

例子：

```
 myByte & 0x08 --> myByte & 00001000 --> 0 if and only if bit 4 of "myByte" is 0; 0x08 otherwise 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T17:12:03.883

如果我猜对了，您希望这些位可以像这样被解析`b[3]`：`b[4]`

```
00 = still
01 = noStill
10 = stationed
11 = slow 
```

我会这样做：

```
if(b[3] == 0) { // still or noStill
    if(b[4] == 0) {/* still */}
    if(b[4] == 1) {/* noStill */}
}
if(b[3] == 1) { // stationed or slow
    if(b[4] == 0) {/* stationed */}
    if(b[4] == 1) {/* slow */}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-13T10:53:51.407

在[JBBP](https://code.google.com/p/java-binary-block-parser/)中看起来像

```
@Bin(type = BinType.BIT) class Parsed { byte status; byte locale; byte aux; byte relay; byte message; byte stuff; byte moreStuff;}
final Parsed parsed = JBBPParser.prepare("bit status; bit locale; bit aux; bit:2 relay; bit message; bit stuff; bit moreStuff;").parse(new byte[]{12}).mapTo(Parsed.class); 
```

# c++ - Qt qrc 资源文件 - 无法加载图标

> ID：14058370
> 
> 赞同：14
> 
> 时间：2012-12-27T17:05:31.943
> 
> 标签：c++, qt, icons, qt5, qicon

我有一个 Qt5 桌面项目，并使用 Qt Creator 编辑器添加了一个“resource.qrc”文件，该编辑器在项目的 .pro 文件中创建了以下行：

```
RESOURCES = resource.qrc 
```

我放了一个空白前缀和一个 png 文件（14x14），并尝试像这样使用它：

```
QPixmap pixmap = QPixmap ("://my_image.png");
ui->combobox->addItem(QIcon(pixmap), "itemname"); 
```

问题是：图标不会出现！

以下作品：

```
QPixmap pixmap(14,14);
pixmap.fill(QColor("red"));
ui->combobox->addItem(QIcon(pixmap), "itemname"); 
```

所以问题一定出在资源嵌入过程中。我注意到生成的“exe”里面没有资源部分……我没有静态链接的外部库，所以我认为我不需要Q_INIT_RESOURCE(resource) 宏（它给了我未定义的外部）

更新：我在这里发布我的 qrc 文件：

```
<RCC>
    <qresource prefix="/">
        <file>my_image.png</file>
    </qresource>
</RCC> 
```

这很简单，我不明白为什么在运行时图标没有出现

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-10T23:23:24.340

我最近遇到了同样的问题，我的资源字符串格式错误。如果您使用的是当前版本的 Qt Creator，您可以打开您的 .qrc 文件进行编辑，然后右键单击您要处理的资源（在本例中为图像），然后单击“将资源路径复制到剪贴板”。瞧，您每次都有正确的资源字符串。

Qt Creator 很棒。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-29T18:12:26.067

@Nikos C. 为您提供有用的建议，但我认为您的主要问题是您没有使用正确的资源链接。

在您的代码中，您有：

```
QPixmap pixmap = QPixmap ("://my_image.png"); 
```

但是，根据[文档](http://qt-project.org/doc/qt-5/resources.html)，它应该是

```
QPixmap pixmap = QPixmap (":/my_image.png"); 
```

或者您可以为您的资源提供别名，然后使用这些别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T15:05:12.630

问题已解决，使用 rcc.exe C:\root\QT>c:\root\QT\4.7.4\bin\rcc.exe Headless.qrc -o qtresources.cpp 在编译过程中，路径中应该有图像。创建 qtresources.cpp 文件，将此文件包含在 makefile 或项目中。您应该能够看到图像。

# sql - 根据给定日期获取前几个月的最大日期

> ID：14058371
> 
> 赞同：0
> 
> 时间：2012-12-27T17:05:36.893
> 
> 标签：sql, oracle

我正在尝试编写一个查询，该查询将根据以下条件为我提供`max date`表单。`Table_A`

如果给定日期（输入参数）在当年的 4 月 1 日到**9 月 30 日**`MAX(date)`之间，则在 4 月 1 日之前返回。

或者

如果给定日期（输入参数）介于 10 月 1 日和次年**3 月 31 日之间**`MAX(date)`，则在 10 月 1 日之前返回。

例如 ：

1.  给定日期为 2012 年 12 月 27 日（日期在 10 月 1 日至次年 3 月 31 日之间）返回 2012 年 9 月 29 日
2.  给定日期为 2012 年 8 月 17 日（日期在 4 月 1 日至次年 9 月 30 日之间） 返回日期（4 月 1 日之前的最大日期为 3 月 29 日）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:35:57.423

尝试这个：

```
select max(case
            when trunc(the_date) between to_date('01-apr-'||the_year, 'dd-mon-yyyy')
                                     and to_date('30-sep-'||the_year, 'dd-mon-yyyy')
             and dte < to_date('01-apr-'||the_year, 'dd-mon-yyyy')
            then
              dte
            when trunc(the_date) between to_date('01-oct-'||the_year, 'dd-mon-yyyy')
                                     and to_date('31-mar-'||(the_year+1), 'dd-mon-yyyy')
             and dte < to_date('01-oct-'||the_year, 'dd-mon-yyyy')
            then
              dte
           end) max_date
  from table_a a 
       cross join (select v_inp_date the_date,
                          to_char(add_months(v_inp_date,-3), 'yyyy') the_year
                     from dual) dte; 
```

所以你输入的日期在`dte`部分

```
v_inp_date 
```

和

```
 to_char(add_months(v_inp_date,-3), 'yyyy') the_year 
```

例如一个小测试：

```
SQL> create table table_a(dte date);

    Table created.

SQL> insert into table_a values(to_date('28-sep-2012', 'dd-mon-yyyy'));

1 row created.

SQL> insert into table_a values(to_date('29-sep-2012', 'dd-mon-yyyy'));

1 row created.

SQL> insert into table_a values(to_date('28-mar-2012', 'dd-mon-yyyy'));

1 row created.

SQL> insert into table_a values(to_date('29-mar-2012', 'dd-mon-yyyy'));

1 row created.

SQL> insert into table_a values(to_date('28-sep-2011', 'dd-mon-yyyy'));

1 row created.

SQL> insert into table_a values(to_date('27-mar-2011', 'dd-mon-yyyy'));

1 row created.

SQL> commit;

Commit complete.

SQL> var inpdate varchar2(20);
SQL> exec :inpdate := '27-dec-2012';

PL/SQL procedure successfully completed.

SQL> select max(case
  2              when trunc(the_date) between to_date('01-apr-'||the_year, 'dd-mon-yyyy')
  3                                       and to_date('30-sep-'||the_year, 'dd-mon-yyyy')
  4               and dte < to_date('01-apr-'||the_year, 'dd-mon-yyyy')
  5              then
  6                dte
  7              when trunc(the_date) between to_date('01-oct-'||the_year, 'dd-mon-yyyy')
  8                                       and to_date('31-mar-'||(the_year+1), 'dd-mon-yyyy')
  9               and dte < to_date('01-oct-'||the_year, 'dd-mon-yyyy')
 10              then
 11                dte
 12             end) max_date
 13    from table_a a
 14         cross join (select to_date(:inpdate,'dd-mon-yyyy') the_date,
 15                            to_char(add_months(to_date(:inpdate,'dd-mon-yyyy'), -3), 'yyyy') the_year
 16                       from dual) dte;

MAX_DATE
---------
29-SEP-12

SQL> exec :inpdate := '17-aug-2012';

PL/SQL procedure successfully completed.

SQL> /

MAX_DATE
---------
29-MAR-12

SQL> exec :inpdate := '01-oct-2011';

PL/SQL procedure successfully completed.

SQL> /

MAX_DATE
---------
28-SEP-11

SQL> exec :inpdate := '01-apr-2011';

PL/SQL procedure successfully completed.

SQL> /

MAX_DATE
---------
27-MAR-11

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:40:44.550

我的示例中的结束日期是 2012 年 12 月 31 日，您可以将其延长至 2013 年以上。我正在即时构建表格 - 为每一行打印 max_date。另外，我对最大日期进行硬编码。您不需要执行任何此操作，这只是示例。将 &1 和 &2 替换为不带引号的值...：

```
SELECT date_table --, start_date, end_date
, (CASE WHEN date_table BETWEEN To_Date('01-APR-2012') And To_Date('30-SEP-2012') Then max_apr_date 
        WHEN date_table BETWEEN To_Date('01-OCT-2012') And To_Date('31-DEC-2012') Then max_oct_date
   END) max_date
FROM
(
SELECT *
  FROM
  (
   SELECT TRUNC(SYSDATE,'Y')+LEVEL-1   date_table
        , To_Date('&1')                start_date  
        , To_Date('&2')                end_date 
        , '29-MAR-2012'                max_apr_date 
        , '29-Sep-2012'                max_oct_date
    FROM dual 
    CONNECT BY LEVEL <= (ADD_MONTHS(TRUNC(SYSDATE,'Y'),12)-TRUNC(SYSDATE,'Y') )
  )
   WHERE date_table BETWEEN start_date AND end_date
)
/ 
```

# android - getView() 无法正常工作

> ID：14058372
> 
> 赞同：0
> 
> 时间：2012-12-27T17:05:37.933
> 
> 标签：android, listview, android-listview, listadapter

看代码：-

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;

    if (row == null) {
        LayoutInflater inflater = ((Activity)  mContext).getLayoutInflater();
        row = inflater.inflate(R.layout.country_row, parent, false);
    }

    return row;
} 
```

国家行 XML 是：--

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal"
  android:weightSum="1" >

<TextView
    android:id="@+id/nameOfCountry"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
    android:text="Country" />

<CheckBox
    android:id="@+id/checkBox"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.2"
    android:gravity="right" /> 
```

现在我的问题是，一旦我检查了列表视图中的几个复选框并滚动列表视图，许多其他复选框就会自动选中....

我知道 getView 有问题，但我不知道在哪里....

如果我不重用转换视图，问题也会得到解决。但这是一个愚蠢的想法......

有什么想法吗.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:10:44.163

如果您重用旧的`View`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:11:54.197

那是因为 ListView 会回收视图。从本质上讲，它重用了一些屏幕外的视图，使新的视图出现在屏幕上以帮助提高性能。有 2 种处理方法：

1.  在返回行之前设置视图的值。例如，您将设置`nameOfCountry`以及是否在该`return view`行之前选中复选框。但是，要做到这一点，您需要跟踪检查的内容。

2.  不要使用`convertview`并且每次都膨胀一个新视图。这可能会导致性能下降，但只要列表不太长，它就不应该太引人注目（至少根据我的经验）。简单地忽略`convertview`价值

# c# - 如何在松散耦合的应用程序中将状态信息传递给 GUI

> ID：14058373
> 
> 赞同：4
> 
> 时间：2012-12-27T17:05:50.217
> 
> 标签：c#, logging

我第一次尝试使用依赖注入来松散耦合一个新的应用程序。我的问题是如何将状态信息传回给用户。在过去，所有代码都塞进 GUI 中，如果非常混乱且无法维护，这很容易。类的安排是这样的（请不要检查我的 UML 技能——它们不存在）：

![应用概述](../Images/fccf64bff868e02779309bf5518ff47d.png)

如果我们选择右手边。AirportsInformationRepository 只存储数据并在被询问时提供给控制器。一开始，它使用 Persist 类获取信息，以从用户硬盘驱动器中获取与给定过滤器匹配的文件。它使用反编译器从文件中提取信息。所有这些都可以正常工作，并且信息本身会按应有的方式进入 GUI。

同时，我的问题是如何告诉用户正在发生的事情。这可能发生在反编译器中，例如，如果它获得的文件无法反编译或可能不包含数据。如果配置文件在说谎并且某些文件夹不存在，则它可能发生在 Persist 类中。除非出现致命错误，否则此类问题不应停止该过程。

如果出现致命错误，则需要立即返回给用户，整个过程应该停止。否则，可以通过该过程以某种方式收集警告，然后在扫描完成时显示。

我熟悉日志记录，并且该应用程序确实有一个记录器来监视应用程序是否存在未处理的异常和其他故障。这写入磁盘，我像大多数人一样使用它来处理错误。我不想将其用于向用户报告状态，因为老实说，如果找不到文件或用户输入了配置文件的无效路径，则应用程序没有任何问题。

我考虑过：

*   在每个类中累积一个日志，并在进程完成（或失败）时将其传递回消费者。我发现这真的很乱
*   使用事件，但如果消费者正在订阅并且事件以与日志相同的方式传递链，那么我认为这并没有好得多。我想另一种方法是让 GUI 直接订阅，但它不应该对反编译器一无所知....
*   一个家庭滚动记录器，它可以是静态类，也可以在 program.cs 中实例化
*   某种消息传递框架——我承认我不清楚，但我认为它与中央事件处理程序非常相似，GUI 可以订阅它而无需了解其他类的任何信息。

所以总结一下。什么是积累“一切照旧”状态信息并在扫描结束时将其提供给 GUI 的最佳方式，同时能够在致命问题上停止。

提前感谢您阅读本文。为帖子的长度道歉。

**编辑** 我应该说该应用程序使用的是 NET 3.5。我会改变它以获得一个优雅的解决方案，但是......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:29:22.073

当您处理典型的“流”处理时，甚至可能是多线程/并发处理流，最好的方法是“邮槽”/消息泵。通过交换消息，您可以轻松地协调应用程序的多个层，包括报告错误、通知下一个命令链等。我不是指 Windows 消息，我的意思是：

```
public abstract class Message
{
   public abstract void Process();
} 
```

然后：

```
public class MessageQueue
{
   private Queue m_Queue;
   public void Post(Message msg) {....}
   public void Process() {.....}
} 
```

然后在应用程序的每个线程/处理层上分配一个 MessageQueue 并传递消息，如下所示：

```
 GUIMessageQueue.Post(
           new ErrorMessage("Internal async file reader ran out of buffer")); 
```

在 GUI 线程上放置一个读取 GUI 队列并将其称为 Process() 的计时器。现在，您可以创建许多消息派生的工作项来执行各种任务，这些任务非常容易在线程/逻辑层之间进行编排。此外，消息可能包含与它们相关的数据块的引用：

public AirplaneLandedMessage: Message { public Airplane Plane ...... }

这是我在大规模并行链处理系统中使用的一些真实代码：

```
/// <summary>
/// Defines a base for items executable by WorkQueue
/// </summary>
public interface IWorkItem<TContext> where TContext : class
{
  /// <summary>
  /// Invoked on an item to perform actual work. 
  /// For example: repaint grid from changed data source, refresh file, send email etc... 
  /// </summary>
  void PerformWork(TContext context);

  /// <summary>
  /// Invoked after successfull work execution - when no exception happened
  /// </summary>
  void WorkSucceeded();

  /// <summary>
  /// Invoked when either work execution or work success method threw an exception and did not succeed
  /// </summary>
  /// <param name="workPerformed">When true indicates that PerformWork() worked without exception but exception happened later</param>
  void WorkFailed(bool workPerformed, Exception error);

}

/// <summary>
/// Defines contract for work queue that work items can be posted to
/// </summary>
public interface IWorkQueue<TContext> where TContext : class
{
  /// <summary>
  /// Posts work item into the queue in natural queue order (at the end of the queue)
  /// </summary>
  void PostItem(IWorkItem<TContext> work);

  long ProcessedSuccessCount{get;}
  long ProcessedFailureCount{get;}

  TContext Context { get; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:12:41.247

好吧，致命错误是容易的部分，它们只是通过异常处理。工作线程在遇到阻止继续工作的问题时可以抛出异常，然后在某个时候当它冒泡到 UI 层时，您可以捕获异常并向用户显示适当的错误消息，而无需实际操作使应用程序崩溃。您可以使用不同类型的异常和异常消息来允许不同的问题导致不同的 UI 响应。

至于指示非致命状态，您可以使用该`IProgress`接口。在您的 UI 层中，您可以创建一个`Progress`实例，该实例在被调用时会更新......无论新状态如何。然后，您可以`IProgress`通过工作人员类传递实例，并在您有信息要提供时触发它。

由于您是 4.5 之前的版本，因此重写此类很容易。

```
public interface IProgress<T>
{
    public void Report(T parameter);
}

public class Progress<T>:IProgress<T>
{
    public event Action<T> ProgressChanged;

    public Progress() { }
    public Progress(Action<T> action)
    {
        ProgressChanged += action;
    }

    void IProgress<T>.Report(T parameter)
    {
        ProgressChanged(parameter);
    }
} 
```

注意：真正的`Progress`类将事件编组到 UI 线程中，我没有添加那部分，所以要么添加它，要么在事件处理程序中执行它。

# javascript - 为什么我的 WordPress 插件中没有加载我的 javascript？

> ID：14058376
> 
> 赞同：0
> 
> 时间：2012-12-27T17:06:09.590
> 
> 标签：javascript, plugins, wordpress

我正在开发一个使用 jquery 的插件（已经加载在头部）。我无法加载我的插件的 javascript：

```
 function add_my_js(){
        echo 'joy joy joy';
        wp_register_script('hdjs',plugins_url('/css/homedepotslider.js', __FILE__));
        wp_enqueue_script('hdjs');
    }

add_action('wp_print_scripts','add_my_js'); 
```

它将运行该函数（我看到“joy joy joy”）但不加载脚本。注意：“joy”文本被用来查看函数是否运行。

我以相同的方式（使用_style）加载了我的插件css并且没有问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:24:09.893

您正在查找错误的目录；我怀疑`js`文件在`css`目录中。复制和粘贴时请务必小心。

我想它应该看起来像：

```
function add_my_js(){
        echo 'joy joy joy';
        wp_register_script('hdjs',plugins_url('/js/homedepotslider.js', __FILE__));
        wp_enqueue_script('hdjs');
}

add_action('wp_print_scripts','add_my_js'); 
```

# makefile - make，变量取决于目标

> ID：14058383
> 
> 赞同：1
> 
> 时间：2012-12-27T17:06:35.533
> 
> 标签：makefile, gnu

生成文件

```
abc:
TEST=$@ /* TEST=abc */

def:
TEST=$@ /* TEST=def */

xxx:
        @echo $(TEST) 
```

如果我运行`make abc xxx`，我期望输出`abc`。

如果我运行`make def xxx`，我期望输出`def`。

但它不是那样工作的。似乎`make`不允许我在目标中定义变量。我的问题是如何定义取决于构建的目标的变量及其值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:39:51.703

使用 GNU Make，您可以复制 Makefile 的预期结果，如下所示：

```
echo.%:
    @echo $* 
```

或者简单地说：

```
%:
    @echo $* 
```

这些将允许您分别指定`make echo.abc`or`make abc`并将`abc`其视为输出。

这一切都很好，但听起来你会对特定于目标的变量更感兴趣。如果变量值依赖于目标名称，但不是目标名称的子字符串，则可以执行以下操作：

```
%:
    @echo $(TEST)

abc: TEST=xyzzy

def: TEST=plugh 
```

这允许您指定`make abc`并查看`xyzzy`为输出。

* * *

如果您想超越这一点，以便目标的行为根据命令行上指定的其他目标而改变，我们有两个选择：要么让`.PHONY`目标更新主要目标使用的文件，要么进行一些处理`MAKECMDGOALS`变量：

选项1：

```
xxx: xxx.temp
    @cat xxx.temp
    @rm xxx.temp

abc def:
    @echo $@ > xxx.temp

.PHONY: xxx abc def 
```

这依赖于命令行目标按顺序处理的事实（*如果您指定多个目标，请按照您命名它们的顺序依次处理每个目标。* -GNU Make Manual，第 9.2 节），因此您必须指定`make abc xxx`和不是`make xxx abc`。

选项 2：

```
ifneq (,$(findstring abc,$(MAKECMDGOALS)))
    VAR=abc
else ifneq (,$(findstring def,$(MAKECMDGOALS)))
    VAR=def
endif

xxx:
    @echo $(VAR)

abc def:
    @echo -n > /dev/null

.PHONY: xxx abc def 
```

`@echo -n > /dev/null`抑制`make: Nothing to be done for 'abc'.`消息。这对我来说似乎更笨拙，如果您可以容忍临时文件，我会推荐选项 1。

# php - 删除 mongoDb gridFs 上的文件会导致“0”，即使它存在

> ID：14058385
> 
> 赞同：0
> 
> 时间：2012-12-27T17:06:50.427
> 
> 标签：php, mongodb, gridfs

这段代码有什么明显的错误吗？

```
$result = $this->_grid->remove(
    $someQueryWithOneResult, array('safe' => true, 'justOne' => true)
);
if ($result['n'] === 0) {
    throw new FileNotFoundException("no file with xuuid '" . $xuuid . "'", 404);
} else if ($result['n'] === 1) {
    return true;
} 
```

有时会抛出异常（意味着结果为 0）。我很确定该文件存在，然后将其删除。我在批处理作业中针对具有 2 个分片和 2 个副本集的 mongoDb 集群运行它。

我怀疑 mongoDb 中的一个错误是 PHP 驱动程序（可能是 'safe' => true 不起作用），或者可能是分片有问题。

有任何想法吗？谷歌真的帮不上忙 :-(

问候

马尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:39:08.027

您可能会遇到[https://jira.mongodb.org/browse/SERVER-4532](https://jira.mongodb.org/browse/SERVER-4532)或其变体[https://jira.mongodb.org/browse/SERVER-7958](https://jira.mongodb.org/browse/SERVER-7958)。

这些已在当前开发版本 2.3（将成为 2.4 生产版本）中修复，并且这些修复已向后移植到 2.2，并将在今年冬天晚些时候在 2.2.3 版本中发布。

# objective-c - 有什么方法可以监控 Mac 上的新应用程序安装事件？

> ID：14058387
> 
> 赞同：4
> 
> 时间：2012-12-27T17:06:54.910
> 
> 标签：objective-c, macos, cocoa, events, notifications

我想运行一个守护进程来监控这个事件，如何获取这个事件？通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:17:45.957

有一个 FSEvents API，它看起来像你需要的东西：[https ://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:17:45.703

有[文件系统事件 API](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html#//apple_ref/doc/uid/TP40005289-CH4-SW4)来观察文件系统的变化。

# asp.net - 在图像标签中使用 css sprite

> ID：14058389
> 
> 赞同：0
> 
> 时间：2012-12-27T17:07:00.543
> 
> 标签：asp.net, css, cross-browser, background-image, css-sprites

我有一个精灵，其中有所有徽标之王。我想得到一个特定的，所以我正在使用这个**css**

```
.prog_logo { background-image:url('../../image/sprite_logo.png'); }
.prog_logo_prime { background-position:0px -81px; width:52px; height:51px; } 
```

在我的**aspx**中，我创建了一个图像

```
<asp:Image ID="imgLogo" CssClass="prog_logo prog_logo_prime" runat="server" /> 
```

## 问题

*   在歌剧院

![在此处输入图像描述](../Images/f36ee391d3338b2b83c8ed521ec2da98.png) **完美的。**

*   在铬

![在此处输入图像描述](../Images/eb280aca5dea94547585606d19b1dd22.png) **白色边框。**

*   在 IE 9

![在此处输入图像描述](../Images/2c35ea351afb6b771fa6f4b28c8af997.png) **精灵也带有白色边框。**

*   在FF

~~图像根本没有出现。~~ **检查评论**

* * *

如何在所有浏览器中解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:19:38.800

给css添加border:none怎么样？

```
.prog_logo { background-image:url('../../image/sprite_logo.png'); border:none; } 
```

# javascript - 全日历选择方法

> ID：14058392
> 
> 赞同：1
> 
> 时间：2012-12-27T17:07:08.703
> 
> 标签：javascript, fullcalendar

我正在使用 FullCalendar 创建一个交互式日历，但我遇到了一个很好的障碍。

当此人进行小时范围选择（单击并拖动）时，我会打开一个对话框，允许用户为他们的事件命名并在需要时修改日期/时间选择。我想要的是使用对话框中的新日期/时间选择重新呈现选择，如果它发生变化。

目前，当我运行 select 方法时，我的选择区域刚刚从视图中删除，我希望它保留并更新为当前选择。

这是我的代码

```
$('#UserCalendarToHour, #UserCalendarToMin').change(function(){
    var allDay = false;
    var startDate = new Date($('#UserCalendarFromDate').val()+' '+$('#UserCalendarFromHour').val()+':'+$('#UserCalendarFromMin').val());
    var endDate = new Date($('#UserCalendarToDate').val()+' '+$('#UserCalendarToHour').val()+':'+$('#UserCalendarToMin').val());
    if($('#UserCalendarAllDay').is(':checked')){
        allDay = true;
    }
    $('#calendar').fullCalendar('unselect');
    $('#calendar').fullCalendar('select',startDate.toString(),endDate.toString(),allDay);
}); 
```

现在我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T12:00:24.343

该`select`方法期待`startDate`并`endDate`作为 Date 对象。您正在将它们转换为文本。此外，根据文档，

> allDay 是一个布尔值，指示是否选择了整天（月视图中的天或议程视图中的“全天”槽）或时间槽。

因此，如果您要选择时隙，则需要将其设置为`false`.

您将在选择回调文档中更清楚地看到它。相同类型的参数似乎适用于该方法。我花了一段时间才意识到这一点。例如，您可能会对具有相似名称但类型不同的事件对象属性感到困惑。在这里看到它：

[http://arshaw.com/fullcalendar/docs/selection/select_callback/](http://arshaw.com/fullcalendar/docs/selection/select_callback/)

# facebook - 如何从我的 facebook 应用程序在我的 facebook 页面上发布？

> ID：14058393
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:07:13.990
> 
> 标签：facebook, publish

我想从我的应用程序/网站将图像发布到我的 Facebook 页面。我怎样才能做到这一点？谁能帮我一个php代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:45:51.683

使用**Feed** API

例如：从javascript你可以这样做 -

```
var obj =   {
                link: URL,
                message: MESSAGE,
                access_token: ACCESS_TOKEN,

            };

FB.api('/PAGE_ID/feed', 'post',obj); 
```

注意 - ACCESS_TOKEN 是 APP 的用户令牌。

这样feed就会通过APP在PAGE上发布

# javascript - jQuery/CSS 选择 :before 和 :after 伪元素

> ID：14058394
> 
> 赞同：3
> 
> 时间：2012-12-27T17:07:16.497
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [如何使用 jQuery 访问伪元素的样式属性？](https://stackoverflow.com/questions/3743513/how-do-i-access-style-properties-of-pseudo-elements-with-jquery)
> [使用 jQuery 操作 CSS :before 和 :after 伪元素](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery)

我正在做一个开/关开关，并决定尝试使用`:after`伪元素作为物理开关。样式是这样的，我只需要在浮动右和浮动之间切换伪元素来打开和关闭它。

我可以在 jQuery 或纯 javascript 中选择伪元素吗？我试过`$("#myid:after")`and `$("#myid::after")`，它们都在样式表中工作，但不能作为 jQuery 选择器工作。

还是我必须放弃并使用额外的 div 或 span？对于伪元素来说，这似乎是一个很大的缺点。

# python - 检查存储库和更新

> ID：14058398
> 
> 赞同：1
> 
> 时间：2012-12-27T17:07:30.650
> 
> 标签：python

我正在使用（非常）旧的 Python 库 PyGame 制作游戏。但这不是我要问的。

如何编写代码来检查具有最新版本的服务器中的存储库，检查版本是否更新或相同，如果更新提示用户下载（或拒绝）游戏更新，因为它将将在多个版本中开发，并允许玩家随着我们进行更改而逐步更新。

就像 Minecraft 一样，一旦更新出来，它就会提示你更新……但在 Python 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:48:04.017

为此，您需要做 3 件事：

1.  一个服务器，您将在其中存储有关更新和版本的所有信息。

    *   它可以是一个只有一个页面的 Web 服务器（对于 Python，请参见`flask`、`web.py`、`django`、`pylons`等，或 PHP 或其他）。
    *   它将当前版本作为输入（`GET`/`POST`请求）并输出可用的更新（以可以解析的格式，`JSON`最好是 XML 或纯文本）。
    *   这些可以从数据库中获取（请参阅`MySQL`、`postgresql`或任何适用于您选择的 Web 服务器的 ORM，`sqlalchemy`）
    *   或者通过检查服务器上可用文件的名称（如果文件将托管在同一 Web 服务器上）（名称将具有模式`XXX-r24-20121224.tar.gz`，您将检查文件列表`glob`或其他内容）。
2.  每次启动游戏时都会查询服务器的一段代码，以检查网络服务器是否有更新。例如，您可以使用`requests`或`urllib2`。

3.  一段将下载和更新您的实际游戏的代码。

    *   Web 服务器应为您提供更新文件所在位置的链接
    *   从那里您必须下载它（使用`requests`or `urllib2`）
    *   解压缩它（使用`zipfile`or `tarfile`）并用它替换您的实际文件。
    *   现在这一切都取决于您的文件的布局方式：
        *   如果您要分发源代码，您可以将其全部构建在一个包中，然后您只需替换整个包。
        *   包和 Python 实际上说明了这`zipfile`一点，它们为您提供了仅将 Python 文件放入 zip 文件中的选项，而 Python 为您提供了将所述 zip 文件添加到`PYTHONPATH`并直接从那里导入的选项。
        *   如果您使用`py2exe`或其他任何东西编译它，这将是一个不同的问题：您可能只能更新一个 zip 文件，或者替换实际的 DLL 和其他东西，这可能是一团糟。
        *   如果它是一个 deb 包或类似的包，您可能希望使用它来更新，并要求用户执行此操作或其他操作。

我希望这会有所帮助，即使它非常抽象。必须这样做:)

现在我将给出我自己的（有偏见的）意见：如果您已经有一个网站正在运行，请使用它来为这样的事情添加一个页面。否则我会推荐一个免费的主机，它允许你使用烧瓶建立一个网站。我建议这样做，因为它很容易立即运行，而且它允许您使用出色的 ORM sqlAlchemy。此外，我只会告诉用户有一个新版本并让他们弄清楚从哪里获得它。除非您只以一种标准方式分发它。

# nlp - 斯坦福 coreNLP - 忽略撇号的拆分词

> ID：14058399
> 
> 赞同：2
> 
> 时间：2012-12-27T17:07:34.867
> 
> 标签：nlp, stanford-nlp

我正在尝试使用 Stanford coreNLP 将一个句子分成单词。我对包含撇号的单词有疑问。

例如，句子：我今年 24 岁。

像这样分裂：[I] ['m] [24] [years] [old]

是否可以使用斯坦福 coreNLP 像这样拆分它？：[I​​'m] [24] [years] [old]

我尝试过使用 tokenize.whitespace，但它不会在其他标点符号上拆分，例如：'?' 和 '，'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T02:51:03.050

如果你只是重新连接被撇号分割的标记呢？

这是Java中的一个实现：

```
public static List<String> tokenize(String s) {
    PTBTokenizer<CoreLabel> ptbt = new PTBTokenizer<CoreLabel>(
            new StringReader(s), new CoreLabelTokenFactory(), "");
    List<String> sentence = new ArrayList<String>();
    StringBuilder sb = new StringBuilder();
    for (CoreLabel label; ptbt.hasNext();) {
        label = ptbt.next();
        String word = label.word();
        if (word.startsWith("'")) {
            sb.append(word);
        } else {
            if (sb.length() > 0)
                sentence.add(sb.toString());
            sb = new StringBuilder();
            sb.append(word);
        }
    }
    if (sb.length() > 0)
        sentence.add(sb.toString());
    return sentence;
}

public static void main(String[] args) {
    System.out.println(tokenize("I'm 24 years old."));  // [I'm, 24, years, old, .]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T14:07:05.470

目前，没有。随后的斯坦福 CoreNLP 处理工具都使用[Penn Treebank 标记化](http://www.cis.upenn.edu/~treebank/tokenization.html)，它将缩略词分成两个标记（将“I'm”视为“I am”的简化形式，使其成为两个“单词”[I] ['m]） . 听起来您想要一种不同类型的标记化。

虽然有一些标记化选项，但没有一个可以改变这一点，并且后续工具（如 POS 标记器或解析器）会在不拆分收缩的情况下运行不佳。您可以将这样的选项添加到标记器，更改（删除）REDAUX 和 SREDAUX 尾随上下文的处理。

您也可以按照@dhg 的建议通过后期处理加入缩略语，但您希望在“if”中更仔细地进行操作，以便它不会加入引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:17:19.120

有所有格和收缩。你的例子是收缩。仅寻找撇号不会发现两者之间的区别。“这是皮特的回答。我相信你知道这一点。” 在这两个句子中，我们各有一个。

通过词性标签，我们可以分辨出区别。使用树外科医生语法，您可以组装、更改它们等等。语法在这里列出：http: [//nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/trees/tregex/turgeon/package-summary.html](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/trees/tregex/tsurgeon/package-summary.html)。我发现树外科医生在分离 NP 组时非常有用，因为我喜欢通过连词来分解它们。

或者，'m 是否源于“am”？您可能想要寻找那些并寻找它的词干标签，然后简单地将其恢复为该值。词干在机器学习和分析的许多其他方面都非常有用。

# php - 检查数字是否有逗号

> ID：14058401
> 
> 赞同：-3
> 
> 时间：2012-12-27T17:07:48.560
> 
> 标签：php, numbers

我正在用 PHP 创建一个游戏，如果用户达到每 50 分（50、100、150、200、250、300、350、400 ......），我想给他们一些东西

想法：

如果用户有 50 分，他们将在游戏中获得金钱（在 MySQL 查询中）。

我愿意：

```
$iUserPoints = 50 / 50; 
```

如果结果为“1”，则添加查询。

如果他们有 412 分，结果将是 (412 / 50 = 8,24)。所以他们什么也得不到。

我该如何检查？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:16:30.743

您可以使用 Modulu 查看一个数字是否可以被 50 或您选择的任何其他数字整除。

例如在 C# 中你会写：

```
if ( number % 50 == 0) 
    { Do Something...} 
```

用于 PHP

```
if ($counter % 50) {
echo "This number is not divisible by 50.";
} else {
echo "This number is divisible by 50.";
} 
```

# javascript - Internet Explorer 抛出对象不支持 JQuery 的属性或方法

> ID：14058403
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:07:56.090
> 
> 标签：javascript, internet-explorer-8, facebook-javascript-sdk

我假设这很明显，但我无法自己解决。我正在使用 Facebook javascript API 来允许用户登录到我创建的页面。以下 javascript 抛出错误对象不支持此属性或方法。IE 说第一行是抛出错误。有人知道我在做什么错吗？

```
document.getElementById('auth-loginlink').addEventListener('click', function () {
            FB.login(function (response) {

            }, {scope: 'email,user_likes,read_stream'}); 
```

该页面可以访问[http://claritytrec.ucd.ie:9000/signup](http://claritytrec.ucd.ie:9000/signup)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:11:25.087

您正在以 Quirks 模式运行您的页面。在声明文档类型之前不能有任何字符或空行。

只有 IE >= 9 知道`addEventListener()`，请使用`attachEvent()`较旧的 IE。[attachEvent 在 MSDN 中](http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx)，您可以通过 MSDN 页面的左侧链接找到有关 IE 遗留事件处理模型的更多信息。

# google-chrome - 如何使用css3 flexbox创建多列布局而不垂直扩展？

> ID：14058404
> 
> 赞同：16
> 
> 时间：2012-12-27T17:07:58.540
> 
> 标签：google-chrome, css, webkit, flexbox

我在 Chrome 中使用 css3 的 flexbox（无需为此担心跨浏览器）。我很难说服它按照我想要的方式布置我的内容。这是我的目标的草图：

![在此处输入图像描述](../Images/96fb4ec4fa6de8f6916001ae89b33bc8.png)

这是我尝试的 jsFiddle：http: [//jsfiddle.net/Yht4V/2/](http://jsfiddle.net/Yht4V/2/)这似乎工作得很好，除了每个`.group`都会扩展其高度而不是创建多个列。

我在这里普遍使用 flexbox。`body`垂直布局，`#content`div 占据页面的剩余高度。每个`.group`都是水平放置的。最后，每个都在一个垂直的包装`.item`内布置。`.group`

不幸的是，每个都`.group`通过扩展高度最终成为一列`#content`，这会导致垂直滚动条（不需要）。如果我将每个的高度设置为`.group`固定的像素大小，项目会分成多列，但这会破坏弹性框的流动性。这是固定高度的样子：http: [//jsfiddle.net/Yht4V/3/](http://jsfiddle.net/Yht4V/3/)

`#content`那么，由于所有内容都使用弹性框进行管理而没有设置固定高度，我怎样才能让我的div 不垂直扩展？我期待 flexbox 触发更多列，而不是扩展其父级的高度并导致滚动条。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T18:33:13.577

从我在 Flexbox 的 Chrome 和 Opera 实现中看到的情况来看，a `flex-direction`of column 需要限制元素的高度，否则它将继续垂直扩展。它不必是一个固定值，它可以是一个百分比。

也就是说，您想要的`.group`元素布局也可以通过使用 CSS Columns 模块来实现。元素的流动将类似于 flexbox 列方向的流动，但只要有足够的宽度，它就会创建列，而不管文档有多长。

[http://jsfiddle.net/Yht4V/8/](http://jsfiddle.net/Yht4V/8/)（你必须原谅缺少前缀）

```
html {
    height: 100%;
}

body {
    height: 100%;
    display: flex;
    flex-flow: column nowrap;
}

h1 {
    padding: 1em;
}

#content {
    padding: 10px;
    background-color: #eee;
    display: flex;
    flex-grow: 1;
}

#content > .group {
    margin: 10px;
    padding: 10px;
    border: 1px solid #cfcfcf;
    background-color: #ddd;
    flex: 1 1 auto;
}

#content > .group:first-child {
    columns: 10em;
    flex-grow: 2;    
}

#content > .group .item {
    margin: 10px;
    padding: 10px;
    background-color: #aaa;
    break-inside: avoid;
}

#content > .group .item:first-child {
    margin-top: 0;
} 
```

把它当作一堆嵌套的弹性盒，这是我能得到的最接近的：

[http://jsfiddle.net/Yht4V/9/](http://jsfiddle.net/Yht4V/9/)（同样，没有前缀）

```
html {
    height: 100%;
}

body {
    height: 100%;
    display: flex;
    flex-flow: column nowrap;
}

h1 {
    padding: 1em;
}

#content {
    padding: 10px;
    background-color: #eee;
    display: flex;
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
}

#content > .group {
    margin: 10px;
    padding: 10px;
    border: 1px solid #cfcfcf;
    background-color: #ddd;

    display: flex;
    flex-flow: column wrap;
    flex: 1 1 30%;
    max-height: 100%;
}

#content > .group .item {
    margin: 10px;
    padding: 10px;
    background-color: #aaa;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T13:45:01.470

在您的 css - display 中替换以下内容 **：-webkit-flex;** 到以下 - **显示：-webkit-box；**

这对我来说效果很好:-)

# javascript - 轨道滑块：不显示字幕

> ID：14058409
> 
> 赞同：3
> 
> 时间：2012-12-27T17:08:14.457
> 
> 标签：javascript, jquery, slider, responsive-design

我正在尝试将*Foundation 3*幻灯片*Orbit*实施到我的 Foundation 移动响应式设计中。当我尝试在幻灯片上放置标题时，没有显示，但标题栏会显示。这是基于包含的主页模板，因此滑块组件的 CSS 并未与所提供的内容有所不同，但包含了一个覆盖 CSS 文件，但不会影响任何内容。（style.css）我尝试了两种方法，都不管用。[你可以在这里看到问题](http://c0105.paas1.tx.modxcloud.com/)。感谢您给我的任何帮助，我是响应式设计的新手。

```
 <div id="slider">

<img data-caption="#slide1" src="http://placehold.it/1000x400&text=[img 1]" />
<img data-caption="#slide2" src="http://placehold.it/1000x400&text=[img 2]" />
<img data-caption="#slide3" src="http://placehold.it/1000x400&text=[img 3]" />

      </div>

<span class="orbit-caption" id="slide1">Caption for Slide 1</span>
<span class="orbit-caption" id="slide2">Caption for slide 2</span>
<span class="orbit-caption" id="slide3">Caption for slide 3</span>

    </div> 
```

我也试过：

```
 <div id="slider">

<div data-caption="#slide1"> <img src="http://placehold.it/1000x400&text=[img 1]" /></div>
<div data-caption="#slide2"><img src="http://placehold.it/1000x400&text=[img 2]" /></div>
<div data-caption="#slide3"><img src="http://placehold.it/1000x400&text=[img 3]" /></div>

      </div>

<span class="orbit-caption" id="slide1">Caption for Slide 1</span>
<span class="orbit-caption" id="slide2">Caption for slide 2</span>
<span class="orbit-caption" id="slide3">Caption for slide 3</span>

    </div> 
```

我的启蒙JS：

```
 <script type="text/javascript">
   $(window).load(function() {
       $('#slider').orbit({
             bullets: false,
             timer: true,
             captions: true,
             animation: 'fade' });
   });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:15:27.290

我也刚遇到这个问题。我设法通过在“jquery.foundation.orbit.js”中的第 391 行之前移动第 394 行来解决这个问题。问题是当前版本的轨道在解析跨度中的文本*之前*`#`从 data-caption 的值中删除了 。*`.orbit-caption`*

 *因此，我认为您的代码示例没有任何问题。你只需要自己修复“jquery.foundation.orbit.js”，或者等待下一个修复它的版本。

当前版本：

```
390\. // if location selector starts with '#', remove it so we don't see id="#selector"
391\. if (captionLocation.charAt(0) == '#') {
392\.     captionLocation = captionLocation.substring(1, captionLocation.length);
393\. }
394\. captionHTML = $(captionLocation).html(); //get HTML from the matching HTML entity 
```

固定版本：

```
390\. captionHTML = $(captionLocation).html(); //get HTML from the matching HTML entity
391\. // if location selector starts with '#', remove it so we don't see id="#selector"
392\. if (captionLocation.charAt(0) == '#') {
393\.     captionLocation = captionLocation.substring(1, captionLocation.length);
394\. } 
```

如果您使用的是“foundation.min.js”，则需要编辑第 46 行。查找以下内容：

`t.charAt(0)=="#"&&(t=t.substring(1,t.length)),n=e(t).html()`

并将这两个部分反转为如下所示：

`n=e(t).html(),t.charAt(0)=="#"&&(t=t.substring(1,t.length))`

我还没有测试过这是否会破坏其他任何东西，但它确实解决了您遇到的字幕问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:42:47.527

该框架显然具有预定义的类和 ID，因此您必须使用它，如果您使用其他未定义的，它将无法工作。您的代码几乎没问题，但是无论您在哪里使用`"slide1"`, `"slide2"`，`"slide3"`都应该使用`"#captionOne"`, `"#captionTwo"`, `"#captionThree"`。

来自网站： http: [//foundation.zurb.com/docs/orbit.php](http://foundation.zurb.com/docs/orbit.php)

**添加字幕**

Orbit 的另一个很棒的功能是可以为每张幻灯片添加标题。过程很简单，只需添加`data-caption="#captionId"`内容`div`或`img`. 然后，在您的下方`div id="featured"`，添加`span class="orbit-caption" id="captionId"`将保存您的字幕内容。您可以添加尽可能多的可用幻灯片，只需确保 data-caption 和 span 的 id 相同，并且您将 # 添加到 data-caption 中，如下面的代码所示。

```
<div id="featuredContent">
<div data-caption="#captionOne">
<h4>This is a content slider.</h4>
<p>Each slide holds arbitrary content, like text or actions.</p>
</div>
<div data-caption="#captionTwo">
<h4>We can include text and buttons, like this!</h4>
<p>We take no responsibility for what happens if you click this button.</p>
<p><a href="http://www.youtube.com/watch?v=dQw4w9WgXcQ" class="button"   target="_blank">Rock My World!</a></p>
</div>
<div data-caption="#captionThree">
<h4>What? You did not click it?</h4>
<p>We gave you the benefit of the doubt. Maybe you did, and now you are back!</p>
</div>
</div>

<span class="orbit-caption" id="captionOne">Here is a caption...</span>
<span class="orbit-caption" id="captionTwo">Here is a caption2...</span>
<span class="orbit-caption" id="captionThree">Here is a caption3...</span> 
```

如果您遵循我写的内容，它应该可以工作。希望能帮助到你。*

# c - C 中的向量实现

> ID：14058410
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:08:18.093
> 
> 标签：c, vector, dynamic-arrays

我试着用谷歌搜索它，但没有可靠的答案。有哪些可用的、仍然维护的 C 动态数组实现？他们每个人的优缺点是什么，最好的一个是什么（速度/占地面积比）？只是问问，这样我就不必重新发明轮子了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:17:13.420

[GLib](http://developer.gnome.org/glib/2.35/glib-data-types.html)中的[GArray 可以满足](http://developer.gnome.org/glib/2.35/glib-Arrays.html)您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:22:17.053

如果您正在寻找诸如来自 Objective-C 的 NSMutableArray 之类的东西，或者来自 Java 的诸如 ArrayList 之类的东西，您将找不到任何东西（至少是标准 C）。不过，您可以在 C 中创建自己的动态数组实现。它将花费您几行代码，并且实现起来并不难。

所有你需要记住的是时间与记忆。您可以执行一个实现，每次推送/添加一个元素时分配一个更大的新数组，然后在返回或引用中为您弹出它，或者您可以每次重新分配内存。我没有看到两者都有很大的优势，除了 realloc 是一个我认为是低级实现的 C 库函数，这意味着它可能更快，并且在实现方面我会选择 realloc 一个，因为它更快实施。您甚至可以构建一个 api，为您提供排序类型和清理所有方法。

现在由你决定。

希望这可以帮助。

# mysql - 存在则更新，不存在则插入

> ID：14058411
> 
> 赞同：6
> 
> 时间：2012-12-27T17:08:24.297
> 
> 标签：mysql, batch-file

> **可能重复：**
> [如果存在，我如何在 MySQL 中更新，如果不插入（又名 upsert 或合并）？](https://stackoverflow.com/questions/1218905/how-do-i-update-if-exists-insert-if-not-aka-upsert-or-merge-in-mysql)

我有可以为预订引擎批量更新价格的程序。

用于更新批次的示例用户输入价格是这样的

```
$dateStart = '2012-12-01';
$dataEnd = '2012-12-31';
$hotelId = 1;
$price = 300000; 
```

而数据库是这样的

```
id | date       | hotelId | price
1  | 2012-12-01 | 1       | 100000 
```

MySQL查询应该如何进行批量更新和插入条件如果`date`并且`hotelId`已经存在然后进行更新，但如果不存在则插入？

我知道如果每天循环并检查PHP中是否存在数据真的会花费很多内存。

```
for($i=1; $i<=31; $i++){...} 
```

我正在寻找解决方案，如何使用可以节省计算机资源的单个/任何 mysql 查询来完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:10:57.350

使用[`INSERT ... ON DUPLICATE KEY UPDATE ...`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)语句。

它将要求您在`date`和`hotelId`列上有一个 UNIQUE 或 PRIMARY 复合索引，以便触发 DUPLICATE KEY 条件。

# c# - 将参数传递给事件处理程序

> ID：14058412
> 
> 赞同：21
> 
> 时间：2012-12-27T17:08:30.090
> 
> 标签：c#, winforms

我想`List<string>`使用我的事件传递我的 as 参数

```
public event EventHandler _newFileEventHandler;
    List<string> _filesList = new List<string>();

public void startListener(string directoryPath)
{
    FileSystemWatcher watcher = new FileSystemWatcher(directoryPath);
    _filesList = new List<string>();
    _timer = new System.Timers.Timer(5000);
    watcher.Filter = "*.pcap";
    watcher.Created += watcher_Created;            
    watcher.EnableRaisingEvents = true;
    watcher.IncludeSubdirectories = true;
}

void watcher_Created(object sender, FileSystemEventArgs e)
{            
    _timer.Elapsed += new ElapsedEventHandler(myEvent);
    _timer.Enabled = true;
    _filesList.Add(e.FullPath);
    _fileToAdd = e.FullPath;
}

private void myEvent(object sender, ElapsedEventArgs e)
{
    _newFileEventHandler(_filesList, EventArgs.Empty);;
} 
```

从我的主要形式我想得到这个列表：

```
void listener_newFileEventHandler(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-27T17:10:41.460

创建一个新的 EventArgs 类，例如：

```
 public class ListEventArgs : EventArgs
    {
        public List<string> Data { get; set; }
        public ListEventArgs(List<string> data)
        {
            Data = data;
        }
    } 
```

并将您的活动设为：

```
 public event EventHandler<ListEventArgs> NewFileAdded; 
```

添加触发方法：

```
protected void OnNewFileAdded(List<string> data)
{
    var localCopy = NewFileAdded;
    if (localCopy != null)
    {
        localCopy(this, new ListEventArgs(data));
    }
} 
```

当你想处理这个事件时：

```
myObj.NewFileAdded += new EventHandler<ListEventArgs>(myObj_NewFileAdded); 
```

处理程序方法将如下所示：

```
public void myObj_NewFileAdded(object sender, ListEventArgs e)
{
       // Do what you want with e.Data (It is a List of string)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T17:17:44.923

您可以将事件的签名定义为您想要的任何内容。如果事件需要提供的唯一信息是该列表，则只需传递该列表：

```
public event Action<List<string>> MyEvent;

private void Foo()
{
     MyEvent(new List<string>(){"a", "b", "c"});
} 
```

然后在订阅事件时：

```
public void MyEventHandler(List<string> list)
{
    //...
} 
```

# windows-runtime - FolderInformation 和 FileInformation 的用途是什么？

> ID：14058413
> 
> 赞同：2
> 
> 时间：2012-12-27T17:08:36.630
> 
> 标签：windows-runtime, windows-store-apps

我试图找出 FolderInformation 和 FileInformation 的用途以及如何使用它们。到目前为止，我了解到 FolderInformation 更多地作用于文件夹本身，而 StorageFolder 作用于文件夹内容（http://stackoverflow.com/questions/13944488/in-metro-whats-the-difference-between-folderinformation-and-storagefolder ）。但是这两个类都有类似的成员，比如 CreateFileAsync，这使得区别有点模糊。

有人能解释一下 FolderInformation 和 FileInformation 的实际用途是什么吗？

我也很欣赏一个如何使用这些类的小例子。在 Internet 上找不到太多内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:20:29.267

如果您进一步检查 FolderStorage 和 FolderInformation 之间的差异（与 File 交易对手相同），您将看到 FolderInformation 实现了另一个接口，即[IStorageItemInformation](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/windows.storage.bulkaccess.istorageiteminformation.aspx)。

基本上，此界面将为相关文件或文件夹提供元数据信息。例如，对于 MP3 音乐文件，您可以检索基本的 ID3 标签信息（曲目名称、艺术家等），对于 JPG 图像文件，您可以检索基本的 EXIF 信息（拍摄日期，...） .

它还提供了一个事件来监听这些信息可能发生的变化。我可以想象这对于更新音乐播放器或照片查看器中的显示信息非常有用。

# php - 动态拉取 Wordpress 类别

> ID：14058416
> 
> 赞同：0
> 
> 时间：2012-12-27T17:08:41.010
> 
> 标签：php, wordpress

我希望有人能帮助我。我已经知道如何使用以下代码在 wordpress 中提取最新帖子：

```
<?php query_posts('posts_per_page=1'); ?>
<?php while (have_posts()): the_post(); ?> 
<h4><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h4>
<?php the_excerpt(); ?>
<?php endwhile;?> 
```

这很好用，但我想扩展这个功能。我希望能够根据特定类别拉帖子。例如，我正在处理的网站有一个名为“社交媒体”的页面，其中包含有关该主题的信息。它还有一个同名的博客类别。我想知道如何将帖子从博客的社交媒体部分拉到信息性社交媒体页面（等等 - 我们将有大约 10 个类别也需要它们的相关帖子）。

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:51:16.887

你可以用这样的代码来做到这一点：

```
<?php $social_media_id = get_category( 'social-media', ARRAY_A ); ?>
<?php $social_media = query_posts( 'posts_per_page=1,category=' . $social_media_id['cat_ID'] ); ?>
<?php while (have_posts()): the_post(); ?> 
<h4><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h4>
<?php the_excerpt(); ?>
<?php endwhile; ?> 
```

对于该`get_category`部分，您可以将硬编码`social-media`替换为`$pagename`（如果它与类别名称相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:14:45.363

`wp_list_categories`可以在这方面为您提供帮助。代码将类似于以下代码：

```
<ul>
    <?php wp_list_categories('orderby=books&include=2'); ?>
</ul> 
```

详细信息可以在这里找到。[http://codex.wordpress.org/Function_Reference/wp_list_categories](http://codex.wordpress.org/Function_Reference/wp_list_categories)

# ruby-on-rails - 在炼油厂CMS中显示页面列表

> ID：14058417
> 
> 赞同：1
> 
> 时间：2012-12-27T17:08:41.643
> 
> 标签：ruby-on-rails, refinerycms

我正在尝试根据其父页面（如果有）作为参数生成页面列表。

当我在 rails 控制台中运行代码时，它可以工作。

但在视图中我得到“每个未定义的方法”并且输出为零。

我已经按照本教程进行操作： [http ://refinerycms.com/guides/using-custom-view-or-layout-templates#create-a-custom-action](http://refinerycms.com/guides/using-custom-view-or-layout-templates#create-a-custom-action)

这是我的代码： [https ://gist.github.com/c69aa0a62d5936df00e5](https://gist.github.com/c69aa0a62d5936df00e5)

我错过了什么？

# android - onTouchEvent 在地图上标记

> ID：14058418
> 
> 赞同：0
> 
> 时间：2012-12-27T17:08:51.740
> 
> 标签：android, google-maps, google-maps-markers, touch-event

我正在研究位置提醒项目。我想标记它被触摸的位置。我创建了 3 个类：GoogleDemo3、MapOverlay1 和 MapOverlay。MapOverlay1 类是 GoogleDemo3 的内部类。MapOverlay1 类在给定位置的地图上绘制标记。当地图在某个位置被触摸时，MapOverlay 应该返回地理点。因此，借助返回的地理点 MapOverlay1 应该绘制标记。但它不断给出未捕获的异常。以下是代码：package in.out.google.demo；

```
import java.util.List;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class GoogleDemo3 extends MapActivity 
{    
MapView mapView; 
MapController mc;
GeoPoint p;

class MapOverlay1 extends com.google.android.maps.Overlay
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(
            getResources(), R.drawable.ic_launcher);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
        return true;
    }

}
/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_google_demo3);

    mapView=(MapView) findViewById(R.id.MapView);

    mc = mapView.getController();

    //---Add a location marker---
    MapOverlay1 mapOverlay1 = new MapOverlay1();
    MapOverlay mapOverlay = new MapOverlay(this,mapView); 
    p=mapOverlay.geopoint();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay1);        
    listOfOverlays.add(mapOverlay);
    mc.animateTo(p);
    mc.setZoom(17); 

    mapView.invalidate();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我又创建了一个类 MapOverlay

```
package in.out.google.demo;

import android.content.Context;
import android.view.MotionEvent;
import android.webkit.WebView.FindListener;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class MapOverlay extends Overlay{
Context c;
GeoPoint p;
MapView mapView;
public MapOverlay(Context context, MapView mapView){
    this.c=context;
    this.mapView=mapView;
    }

  public boolean onTouchEvent(MotionEvent event) 
  {   
      //---when user lifts his finger---
      MapView mapView;
      mapView=this.mapView;

      if (event.getAction() == 1) {                
          GeoPoint p = mapView.getProjection().fromPixels(
              (int) event.getX(),
              (int) event.getY());
              Toast.makeText(c, 
                  p.getLatitudeE6() / 1E6 + "," + 
                  p.getLongitudeE6() /1E6 , 
                  Toast.LENGTH_SHORT).show();
                this.p=p;
      }
        return false;              
} 
  public GeoPoint geopoint(){
      return this.p;
  }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:59:00.190

您现在遇到的问题，由以下原因引起：

```
p=mapOverlay.geopoint(); 
```

`p`在这一行中获得一个空值，作为尚未初始化`p`的类中的值。`MapOverlay`

在`MapOverlay`替换：

```
GeoPoint p; 
```

通过类似的东西：

```
GeoPoint p = new GeoPoint(nnn, mmm); 
```

除此之外，您的代码仍然存在一些问题：

*   `BitMap`每次绘制叠加层时，您都在解码。这应该在覆盖构造函数中完成。
*   您总是`false`从回来`onTouchEvent()`，这将无法区分地图移动和触摸添加标记。

问候。

# apache-zookeeper - ZookKeeper 食谱依赖项

> ID：14058420
> 
> 赞同：0
> 
> 时间：2012-12-27T17:09:03.370
> 
> 标签：apache-zookeeper

我是 zookeeper 的新手，并尝试使用这里实现的一些 zookeeper 食谱：[https](https://github.com/apache/zookeeper/tree/trunk/src/recipes) ://github.com/apache/zookeeper/tree/trunk/src/recipes 。这样我就不必自己建造它们了。

似乎它们没有作为 maven Central 等 Zookeeper 库的一部分分发。 Zookeeper 社区的约定是什么？我应该只提取源代码并自己构建它们吗？或者我是否遗漏了一些东西，它们很容易从中央回购中使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:33:35.957

没有直接回答你的问题，但是......

也许您会发现 Curator ( [https://github.com/Netflix/curator/wiki](https://github.com/Netflix/curator/wiki) ) 有用？我们肯定到目前为止。它实现了许多基本的 ZooKeeper 配方，并捆绑为单独的 Maven 依赖项。

# php - 如何在 PHP 中将其他语言的维基百科 url 转换为英文？

> ID：14058421
> 
> 赞同：0
> 
> 时间：2012-12-27T17:09:07.177
> 
> 标签：php, string, preg-replace, preg-match

我有一个维基百科网址说（某些语言但不是英语），

`http://ru.wikipedia.org/wiki/Liz_Claiborne,_Inc`

我想将此网址转换为英文 wiki 网址，即。

`http://en.wikipedia.org/wiki/Liz_Claiborne,_Inc`

但是我想知道最有效的方法是什么？

我尝试`".wikipedia"`在字符串中搜索并将前 2 个字符替换为`en`.

但如果输入很简单，

`http://wikipedia.org/wiki/Liz_Claiborne,_Inc`

如何处理所有情况？

希望我对我的问题很清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:27:54.277

这将改变现有的语言环境，或者在缺少时添加一个：

```
$urls = array(
    'http://wikipedia.org',
    'http://ru.wikipedia.org',
    'http://en.wikipedia.org',
);
$regex  = '/(?<=^http:\/\/|^https:\/\/)(?:[a-z]{2}\.|\b)(?=wikipedia.org)/i';
$change = 'de';
echo '<pre>';
foreach ($urls as $url)
    echo preg_replace($regex, "$change.", $url), "\n";
die; 
```

然而，仅仅改变语言环境的问题是你会得到很多丢失的页面。最重要的是最后一个，并且对于大多数语言来说是不同的：

```
http://en.wikipedia.org/wiki/Internet
http://fo.wikipedia.org/wiki/Alnet
http://gv.wikipedia.org/wiki/Eddyr-voggyl 
```

所有这些页面都是关于“互联网”的，但它们都不能通过简单地更改语言环境来访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:21:43.330

我会使用正则表达式来获取您要查找的子字符串。一个简单的工作示例：

```
<?php
$regex = '@http\://.*(wikipedia\.org/.+)@';
$url = 'http://ru.wikipedia.org/wiki/Liz_Claiborne,_Inc';
preg_match($regex, $url, $matches);
echo 'http://en.'.$matches[1];
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:24:14.723

页面名称可能因语言而异，因此您不能简单地猜测 URL。

适用于所有页面的唯一方法是解析维基百科页面以查找`href`“其他语言”链接的值：

```
<li class="interwiki-en"><a href="__url__" title="__title__" hreflang="en" lang="en">English</a></li> 
```

# php - 使用 getJSON() 获取 JSON 的问题

> ID：14058423
> 
> 赞同：1
> 
> 时间：2012-12-27T17:09:23.840
> 
> 标签：php, jquery, json, drupal

我试图让我的 javascript 从我网站另一个页面上的 url 读取 JSON。计划是在该 url 上存储一个带有链接的图像，并将其显示在我网站的首页上。我之前能够为类似的显示器做到这一点，所以我认为这次会很容易。出于某种原因，getJSON 甚至没有从我的 URL 读取 JSON，我很确定它是正确的，我修改了之前显示的代码。

此代码创建 JSON（在 PHP 中）：

```
function tf_feature_url_callback() {
  // get last row from the table
  $qry = 'SELECT * FROM tf_daily_featured_item ORDER BY fiid DESC LIMIT 1';
  $result = db_query($qry);
  $linkData = db_fetch_object($result);
  $data = array('link'=>$linkData->link);
  // encode the data as a json string
  $json_link = json_encode($data);
  echo $json_link;
} 
```

JSON 在页面上显示为：

```
{"link":"test.com"} 
```

这是 JavaScript：

```
// this is the url with JSON data
var urlURL = '/tf_feature/get_url';

$(document).ready(function() {
    $.getJSON(urlURL, function(data) {
        alert("TEST");
    });
}); 
```

我没有收到警报，所以我很确定我的 javascript 甚至没有进入 getJSON 函数。

您可以在网站上调用 getJSON 的次数是否有限制？我已经叫了几次了。

***编辑：***

这是我的回调（我正在使用 Drupal，这是一个模块）

```
// callback for the url
  $items['tf_feature/get_url'] = array(
    'title' => 'Featured Item URL Callback',
    'page callback' => 'tf_feature_url_callback',
    'access arguments' => 'access content',
    'type' => MENU_CALLBACK
  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:15:36.463

好的，首先我不得不说我畏缩了`urlURL`;-) 但是继续前进，这里没有足够的信息来完全诊断您的问题。您的代码很可能没有运行；也许在您的 onReady 运行时页面已经加载？再说一次，也许不是；没有更多信息很难说。

我强烈建议获取 Firefox 的 Firebug 插件，或者使用 Chrome（内置）开发工具。其中任何一个都能够告诉您 AJAX 请求是否正在发生，如果正在发生，将会返回什么。此外，您可以`debugger`在代码中添加行，当遇到这些行时，这两个工具都会暂停，让您查看发生了什么（您可以检查变量值等）。

尝试使用其中一种工具，我真的希望您能够自己调试这个问题。

# c# - 一段 Python 代码的 C# 包装器

> ID：14058426
> 
> 赞同：0
> 
> 时间：2012-12-27T17:09:36.587
> 
> 标签：c#, python, interface, numpy, wrapper

为一些现有的 Python 函数编写 C# 包装器是否很困难？我想在 C# 代码中使用 numpy 方法，将 python 代码绑定到 C# 代码。

很抱歉没有那么多细节，没有摘录，...

亲切的问候 ; )

# css - css 如何应用其样式属性

> ID：14058433
> 
> 赞同：0
> 
> 时间：2012-12-27T17:10:10.313
> 
> 标签：css, styles

css样式一旦被应用不应该永久改变吗？见下文：

```
 <style>
div{width:100px;height:100px;background-color:red}
div:hover{background-color:black}
</style>

<body>
<div></div>
</body> 
```

我的意思是说，当`hover`元素上发生时，元素的背景颜色会改变，一旦改变，它应该永久改变，因为悬停状态改变了元素的属性。

我也看到了永久改变财产的案例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:12:11.150

不，`hover`意味着只有当鼠标悬停在元素上时才会应用此样式。一旦鼠标停止悬停在元素上，样式就会恢复到以前的样子。

如果您希望进行这样的永久性更改，您可能需要 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:20:03.987

ezuk 的答案很好（接受那个），但我很无聊，想到了一个仅使用 CSS 的非常愚蠢的解决方案。

## HTML

```
<div>
  <span>hello</span>
</div>​ 
```

## CSS

```
body, html {
  width: 100%;
  height: 100%;
}
div {
  display: inline-block;
  background-color: #eee;
}
div:hover {
  width: 100%;
  height: 100%;
}
div:hover > span {
  background-color: #555;
} 
```

[在 JSFiddle 上查看](http://jsfiddle.net/bkaf8/)

它一直有效，直到您将鼠标移出浏览器（或 iFrame 或其他）

:)

# node.js - mongodb，获取更新后的结果行

> ID：14058440
> 
> 赞同：1
> 
> 时间：2012-12-27T17:10:35.393
> 
> 标签：node.js, mongodb, socket.io

我正在使用 mongodb、node.js 和 socket.io，我正在尝试减少访问数据库的次数。我需要更新一行；在返回更新的行之后，我就是这样做的：

```
db.collection('users').update({_id:targetID}, {$set: { 'property': 'value' }}, {safe:true}, function(err, result) {
    db.collection('users').find({_id:targetID}).toArray(function(error, results){
        //a socket.io resend the content
    });
}); 
```

它有效，但我真的觉得我在这里迈出了无用的一步。更新函数的回调似乎是一个布尔值。

顺便说一句，有没有比这个更好的文档：http: [//docs.mongodb.org/manual/applications/update/](http://docs.mongodb.org/manual/applications/update/)？我想找到属性和方法的列表。例如`{safe:true}`。没有它似乎无法工作，但我在参考中找不到它。

也许我完全错了，这不是我应该这样做的方式。如果你有更好的主意... :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:24:57.717

您可以使用它[`findAndModify`](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#findandmodify)来有效地执行此操作：

```
db.collection('users').findAndModify(
    {_id: targetID}, [], 
    {$set: { 'property': 'value' }}, 
    {new: true}, // Return the updated doc rather than the original
    function(err, result) {
        // result contains the updated document
    }
); 
```

# java - 在 EditText 框中填充数据

> ID：14058442
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:10:43.107
> 
> 标签：java, php, android, mysql, sqlite

是否有任何可能的方法来`EditText`使用保存在`SQLite`数据库中的数据填充我的框。我搜索，尝试从许多网站学习和理解如何获取已经插入`SQLite`数据库的数据，我可以从任何活动中检索它并填充到 required 中`EditText`。请帮助如何在框中插入数据`SQLite`以及如何在`EditText`框中读取和填充。我会感谢你的。当我与**Android**建立连接`PHP`并从`MySQL`. 我该如何解决这个问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T18:45:27.213

检查这些..
[从数据库中获取数据并将其设置在 edittext](https://stackoverflow.com/questions/9630859/fetching-data-from-database-and-set-it-on-edittext)
[使用数据库中的值填充 EditText](https://stackoverflow.com/questions/5921386/populate-edittext-with-value-from-database)
[如何将数据从 edittext 存储到 android sqlite 数据库？](https://stackoverflow.com/questions/8793795/how-to-store-the-data-from-edittext-to-android-sqlite-database)
还有一个关于数据库操作的教程..
[http://wowjava.wordpress.com/2011/09/26/working-with-sqlite-on-android/](http://wowjava.wordpress.com/2011/09/26/working-with-sqlite-on-android/)

# window - pygtk 最小化和最大化窗口

> ID：14058452
> 
> 赞同：0
> 
> 时间：2012-12-27T17:11:08.403
> 
> 标签：window, pygtk, window-managers

我正在使用 pygtk，一旦我最小化窗口（iconyfy），窗口管理器就会使用它的动画来做到这一点。在我最小化它之前（用户不能这样做；没有最小化按钮，仅来自代码）它位于桌面的右侧大小。现在，当用户单击 tackbar 图标 wm 时会显示窗口，但它不在右侧，它会转到屏幕中央。有没有办法消除这种行为？我正在使用 ubuntu 12.04。

# python - 使 Python 记录器将除日志文件之外的所有消息输出到标准输出

> ID：14058453
> 
> 赞同：588
> 
> 时间：2012-12-27T17:11:21.280
> 
> 标签：python, logging, error-logging

*除了*应该去的日志文件之外，有没有办法使用`logging`模块自动将内容输出到标准输出？例如，我希望所有对、、的调用都去到他们想要的地方，但另外总是被复制到。这是为了避免重复消息，例如：*`logger.warning``logger.critical``logger.error``stdout`*

 *```
mylogger.critical("something failed")
print "something failed" 
```

* * *

## 回答 #1

> 赞同：797
> 
> 时间：2012-12-27T17:12:56.517

所有日志记录输出都由处理程序处理；只需将 a 添加[`logging.StreamHandler()`](http://docs.python.org/library/logging.handlers.html#streamhandler)到根记录器即可。

这是一个配置流处理程序（使用`stdout`而不是 default `stderr`）并将其添加到根记录器的示例：

```
import logging
import sys

root = logging.getLogger()
root.setLevel(logging.DEBUG)

handler = logging.StreamHandler(sys.stdout)
handler.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)
root.addHandler(handler) 
```

* * *

## 回答 #2

> 赞同：673
> 
> 时间：2015-01-28T14:39:03.627

记录到标准输出的最简单方法：

```
import logging
import sys
logging.basicConfig(stream=sys.stdout, level=logging.DEBUG) 
```

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2017-06-26T12:43:02.013

`handlers`您可以为 file 和stdout创建两个处理程序，然后创建一个带有[`basicConfig`](https://docs.python.org/3/library/logging.html#logging.basicConfig). 如果两个处理程序的 log_level 和格式输出相同，这可能会很有用：

```
import logging
import sys

file_handler = logging.FileHandler(filename='tmp.log')
stdout_handler = logging.StreamHandler(sys.stdout)
handlers = [file_handler, stdout_handler]

logging.basicConfig(
    level=logging.DEBUG, 
    format='[%(asctime)s] {%(filename)s:%(lineno)d} %(levelname)s - %(message)s',
    handlers=handlers
)

logger = logging.getLogger('LOGGER_NAME') 
```

* * *

## 回答 #4

> 赞同：77
> 
> 时间：2014-07-27T06:24:08.233

可以使用多个处理程序。

```
import logging
import auxiliary_module

# create logger with 'spam_application'
log = logging.getLogger('spam_application')
log.setLevel(logging.DEBUG)

# create formatter and add it to the handlers
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')

# create file handler which logs even debug messages
fh = logging.FileHandler('spam.log')
fh.setLevel(logging.DEBUG)
fh.setFormatter(formatter)
log.addHandler(fh)

# create console handler with a higher log level
ch = logging.StreamHandler()
ch.setLevel(logging.ERROR)
ch.setFormatter(formatter)
log.addHandler(ch)

log.info('creating an instance of auxiliary_module.Auxiliary')
a = auxiliary_module.Auxiliary()
log.info('created an instance of auxiliary_module.Auxiliary')

log.info('calling auxiliary_module.Auxiliary.do_something')
a.do_something()
log.info('finished auxiliary_module.Auxiliary.do_something')

log.info('calling auxiliary_module.some_function()')
auxiliary_module.some_function()
log.info('done with auxiliary_module.some_function()')

# remember to close the handlers
for handler in log.handlers:
    handler.close()
    log.removeFilter(handler) 
```

请参阅：[https ://docs.python.org/2/howto/logging-cookbook.html](https://docs.python.org/2/howto/logging-cookbook.html)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-05-07T09:22:21.243

记录到文件和标准错误的最简单方法：

```
import logging

logging.basicConfig(filename="logfile.txt")
stderrLogger=logging.StreamHandler()
stderrLogger.setFormatter(logging.Formatter(logging.BASIC_FORMAT))
logging.getLogger().addHandler(stderrLogger) 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2018-11-12T07:38:03.820

这是一个基于功能强大但文档很少的[`logging.config.dictConfig`方法](https://docs.python.org/3/library/logging.config.html#logging.config.dictConfig)的解决方案。它不是将每条日志消息都发送到`stdout`，而是将日志级别`ERROR`和更高级别的消息发送到 ，并将`stderr`其他所有消息发送到`stdout`。如果系统的其他部分正在收听`stderr`或，这将很有用`stdout`。

```
import logging
import logging.config
import sys

class _ExcludeErrorsFilter(logging.Filter):
    def filter(self, record):
        """Only lets through log messages with log level below ERROR (numeric value: 40)."""
        return record.levelno < 40

config = {
    'version': 1,
    'filters': {
        'exclude_errors': {
            '()': _ExcludeErrorsFilter
        }
    },
    'formatters': {
        # Modify log message format here or replace with your custom formatter class
        'my_formatter': {
            'format': '(%(process)d) %(asctime)s %(name)s (line %(lineno)s) | %(levelname)s %(message)s'
        }
    },
    'handlers': {
        'console_stderr': {
            # Sends log messages with log level ERROR or higher to stderr
            'class': 'logging.StreamHandler',
            'level': 'ERROR',
            'formatter': 'my_formatter',
            'stream': sys.stderr
        },
        'console_stdout': {
            # Sends log messages with log level lower than ERROR to stdout
            'class': 'logging.StreamHandler',
            'level': 'DEBUG',
            'formatter': 'my_formatter',
            'filters': ['exclude_errors'],
            'stream': sys.stdout
        },
        'file': {
            # Sends all log messages to a file
            'class': 'logging.FileHandler',
            'level': 'DEBUG',
            'formatter': 'my_formatter',
            'filename': 'my.log',
            'encoding': 'utf8'
        }
    },
    'root': {
        # In general, this should be kept at 'NOTSET'.
        # Otherwise it would interfere with the log levels set for each handler.
        'level': 'NOTSET',
        'handlers': ['console_stderr', 'console_stdout', 'file']
    },
}

logging.config.dictConfig(config) 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2020-08-10T10:59:17.777

有关更详细的解释 - 该[链接](https://docs.python.org/3/howto/logging.html)上的出色文档。例如：很简单，你只需要设置两个记录器。

```
import sys
import logging

logger = logging.getLogger('')
logger.setLevel(logging.DEBUG)
fh = logging.FileHandler('my_log_info.log')
sh = logging.StreamHandler(sys.stdout)
formatter = logging.Formatter('[%(asctime)s] %(levelname)s [%(filename)s.%(funcName)s:%(lineno)d] %(message)s', datefmt='%a, %d %b %Y %H:%M:%S')
fh.setFormatter(formatter)
sh.setFormatter(formatter)
logger.addHandler(fh)
logger.addHandler(sh)

def hello_logger():
    logger.info("Hello info")
    logger.critical("Hello critical")
    logger.warning("Hello warning")
    logger.debug("Hello debug")

if __name__ == "__main__":
    print(hello_logger()) 
```

输出 - 终端：

```
[Mon, 10 Aug 2020 12:44:25] INFO [TestLoger.py.hello_logger:15] Hello info
[Mon, 10 Aug 2020 12:44:25] CRITICAL [TestLoger.py.hello_logger:16] Hello critical
[Mon, 10 Aug 2020 12:44:25] WARNING [TestLoger.py.hello_logger:17] Hello warning
[Mon, 10 Aug 2020 12:44:25] DEBUG [TestLoger.py.hello_logger:18] Hello debug
None 
```

输出 - 在文件中：

[![登录文件](../Images/c6d46a511ea36781660f53d89560af28.png)](https://i.stack.imgur.com/edeFh.png)

* * *

### 更新：彩色终端

包裹：

```
pip install colorlog 
```

代码：

```
import sys
import logging
import colorlog

logger = logging.getLogger('')
logger.setLevel(logging.DEBUG)
fh = logging.FileHandler('my_log_info.log')
sh = logging.StreamHandler(sys.stdout)
formatter = logging.Formatter('[%(asctime)s] %(levelname)s [%(filename)s.%(funcName)s:%(lineno)d] %(message)s', datefmt='%a, %d %b %Y %H:%M:%S')
fh.setFormatter(formatter)
sh.setFormatter(colorlog.ColoredFormatter('%(log_color)s [%(asctime)s] %(levelname)s [%(filename)s.%(funcName)s:%(lineno)d] %(message)s', datefmt='%a, %d %b %Y %H:%M:%S'))
logger.addHandler(fh)
logger.addHandler(sh)

def hello_logger():
    logger.info("Hello info")
    logger.critical("Hello critical")
    logger.warning("Hello warning")
    logger.debug("Hello debug")
    logger.error("Error message")

if __name__ == "__main__":
    hello_logger() 
```

输出： [![在此处输入图像描述](../Images/ea36feca336c787a224d321cb648e98a.png)](https://i.stack.imgur.com/Q5gAi.png)

### 推荐：

从文件[完成记录器配置](https://stackoverflow.com/questions/38537905/set-logging-levels/65975273#65975273)`INI`，其中还包括`stdout`和的设置`debug.log`：

*   `handler_file`
    *   `level=WARNING`
*   `handler_screen`
    *   `level=DEBUG`

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2019-01-23T12:32:07.453

由于没有人共享一个整洁的两个班轮，我将分享我自己的：

```
logging.basicConfig(filename='logs.log', level=logging.DEBUG, format="%(asctime)s:%(levelname)s: %(message)s")
logging.getLogger().addHandler(logging.StreamHandler()) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-02T20:00:58.833

这是一个非常简单的例子：

```
import logging
l = logging.getLogger("test")

# Add a file logger
f = logging.FileHandler("test.log")
l.addHandler(f)

# Add a stream logger
s = logging.StreamHandler()
l.addHandler(s)

# Send a test message to both -- critical will always log
l.critical("test msg") 
```

输出将在标准输出和文件中显示“test msg”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-28T13:18:30.480

我简化了我的源代码（其原始版本是 OOP 并使用配置文件），为您提供@EliasStrehle 的替代解决方案，而不使用 dictConfig（因此最容易与现有源代码集成）：

```
import logging
import sys

def create_stream_handler(stream, formatter, level, message_filter=None):
    handler = logging.StreamHandler(stream=stream)
    handler.setLevel(level)
    handler.setFormatter(formatter)
    if message_filter:
        handler.addFilter(message_filter)
    return handler

def configure_logger(logger: logging.Logger, enable_console: bool = True, enable_file: bool = True):
    if not logger.handlers:
        if enable_console:
            message_format: str = '{asctime:20} {name:16} {levelname:8} {message}'
            date_format: str = '%Y/%m/%d %H:%M:%S'
            level: int = logging.DEBUG
            formatter = logging.Formatter(message_format, date_format, '{')

            # Configures error output (from Warning levels).
            error_output_handler = create_stream_handler(sys.stderr, formatter,
                                                         max(level, logging.WARNING))
            logger.addHandler(error_output_handler)

            # Configures standard output (from configured Level, if lower than Warning,
            #  and excluding everything from Warning and higher).
            if level < logging.WARNING:
                standard_output_filter = lambda record: record.levelno < logging.WARNING
                standard_output_handler = create_stream_handler(sys.stdout, formatter, level,
                                                                standard_output_filter)
                logger.addHandler(standard_output_handler)

        if enable_file:
            message_format: str = '{asctime:20} {name:16} {levelname:8} {message}'
            date_format: str = '%Y/%m/%d %H:%M:%S'
            level: int = logging.DEBUG
            output_file: str = '/tmp/so_test.log'

            handler = logging.FileHandler(output_file)
            formatter = logging.Formatter(message_format, date_format, '{')
            handler.setLevel(level)
            handler.setFormatter(formatter)
            logger.addHandler(handler) 
```

这是一个非常简单的测试方法：

```
logger: logging.Logger = logging.getLogger('MyLogger')
logger.setLevel(logging.DEBUG)
configure_logger(logger, True, True)
logger.debug('Debug message ...')
logger.info('Info message ...')
logger.warning('Warning ...')
logger.error('Error ...')
logger.fatal('Fatal message ...') 
```*

# html - 页脚未拉伸到 100% 宽度

> ID：14058455
> 
> 赞同：2
> 
> 时间：2012-12-27T17:11:30.873
> 
> 标签：html, width, footer, css

我希望页脚的宽度能够拉伸 100% 的页面。但是，我在 HTML 文档的主体上定义了 min-width:1000px 和 max-width:1000px 以帮助创建流畅的布局。现在，当我创建将其设置为 max/min-width:100% 的页脚时，它不会跨越整个页面，并且受到正文上设置的 min/max-width 的限制。有没有办法将页脚的宽度设置为 100%，同时在正文中将最小/最大宽度定义为 1000 像素？HTML 和 CSS 的代码是：

HTML：

```
<!doctype html>
<html lang="en">
<head>
Some Text
</head>
<body>

<header>
Some Text
</header>
<section class="mainSection">
    <article class="mainArticle">
            <header>
                <h4>Some Text</h4>
            </header>
            <p>
                    Some text
            </p>
    </article>
</section>
<footer>
    <section class="footerSection">
        <article class="footerArticle">
            <p>Some Text</p>
        </article>
    </section>
</footer> 
```

CSS：

```
body{
    margin:0px auto;
    min-width:1000px;
    max-width:1000px;
    height:auto;
    background-color: #97cdcd;
    background-size: 5px 5px;
    background-image: linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
    background-image: -webkit-linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
    background-image: -moz-linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
}
body > footer{
    margin:0px;
    padding:0px;
    min-width:100%;
    max-width:100%;
    background:#ffffff;
    height:auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:13:54.587

不要在正文上定义最大和最小宽度，而是创建一个内容 div 来包裹您的主要内容区域，并在您的内容 div 上应用该区域的最大和最小样式。

因为你的页脚是身体的一个孩子，而不是在正常流程之外，由于盒子模型，它总是受到身体宽度的限制。这实际上非常有用，只要您牢记盒子模型和流程的规则即可。因此，如果页脚不应受这些属性的限制，则这些属性应应用于页脚的同级而不是其父级。

例如，`section`如果您不需要`header`也应用这些规则，则可以只在元素上应用 max/min。否则，请执行以下操作：

```
<!doctype html>
<html lang="en">
<head>
Some Text
</head>
<body>
<div class="content-wrapper">
<header>
Some Text
</header>
<section class="mainSection">
    <article class="mainArticle">
            <header>
                <h4>Some Text</h4>
            </header>
            <p>
                    Some text
            </p>
    </article>
</section>
</div>
<footer>
    <section class="footerSection">
        <article class="footerArticle">
            <p>Some Text</p>
        </article>
    </section>
</footer>

</body> 
```

CSS：

```
 `.content-wrapper{
        margin:0px auto;
        min-width:1000px;
        max-width:1000px;
        height:auto;
        background-color: #97cdcd;
        background-size: 5px 5px;
        background-image: linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
        background-image: -webkit-linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
        background-image: -moz-linear-gradient(rgba(189, 204, 211, .50) 50%, transparent 50%, transparent);
    }
    body > footer{
        margin:0px;
        padding:0px;
        min-width:100%;
        max-width:100%;
        background:#ffffff;
        height:auto;
    }`
```

`显然，您可能希望将某些样式应用于整个主体而不是内容包装器 div，这只是一个示例。`

 `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:14:42.977

简单地说：**不**- 页脚是主体的子级，宽度百分比属性是相对于父级的。

在这种情况下，您已将 body 元素（父元素）设置为固定宽度，因此子元素不会是流动的。相反，通过给它 100% 的宽度，你是说*给它 100% 的 body 元素的宽度*，即 1000px。

如果您打算在正文上保留最大和最小宽度属性，则修复它的唯一方法是绝对定位页脚 - 不理想。我建议您删除 max 和 min 属性并完全尝试不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:15:58.133

简短的回答：没有

你给页脚的 100% 宽度是你给它的容器的 1000px 的 100%。您的问题的解决方案是将`<header>`and`<section>`标记放在容器标记中，并在其上设置 1000px 限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:16:34.073

前部在身体内部，因此受限于身体尺寸。

您可以在正文中创建一个包装器 div；在 wrapper div 中包含 header 和 mainSection，使其为 1000px，footer div 为 100%。`

# email - PHP进程死亡时发送电子邮件的最佳方式

> ID：14058458
> 
> 赞同：10
> 
> 时间：2012-12-27T17:11:46.580
> 
> 标签：email, nginx, php

我写了一个快速的 PHP 页面来处理 502 请求。当遇到 502 并触发电子邮件时，Nginx 将重定向到此页面。

问题是，大多数时候遇到 502 是因为 PHP 已经死了，所以不再可能使用 PHP 写入数据库和发送电子邮件。对 PHP-FPM 设置的调整有很大帮助（重新启动 PHP 等），但我仍然想要一个后备。

有很多方法可以在 PHP 之外发送电子邮件，但我很好奇其他人在做什么并取得了成功？我想保持简单的配置（即在服务器上没有另一个复杂的依赖关系）和可靠性原因。

谷歌搜索和搜索结果并不多，可能是因为“死亡”和“失败”为我的场景带来了很多误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:52:41.363

如何使用 cronjob（基于 bash）定期解析 error_log 文件（x 小时）并在找到`resuming normal operations`上一个时期（x 小时）类似的内容时发送电子邮件（mutt/mail）。我认为是简单而有效的...

```
[Thu Dec 27 14:37:52 2012] [notice] caught SIGTERM, shutting down
[Thu Dec 27 14:37:53 2012] [notice] Apache/2.2.22 (Ubuntu) PHP/5.4.6-2~precise+1 configured -- resuming normal operations 
```

**更新：**

@Brian 正如@takeshin 所说，如果你愿意，cronjobs 甚至可以每秒运行一次，但有些系统管理员可能会咬你……：|

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T01:56:49.757

这就是我最终所做的。我还没有将它推广到我们的产品服务器上，但是到目前为止所有的测试看起来都不错。

Nginx 本身不支持 CGI，所以你需要另一种方法来做到这一点。[thttpd](http://acme.com/software/thttpd/)非常符合要求。nginx [wiki](http://wiki.nginx.org/ThttpdCGI)上有一篇很好的文章，展示了如何使用它。

我使用以下内容配置了 thttpd：

```
dir=/var/www/htdocs
user=thttpd
logfile=/var/log/thttpd.log
pidfile=/var/run/thttpd.pid
port=8000
cgipat=**.cgi 
```

并将其添加到我的 nginx 配置中：

```
error_page 502 @thttpd;

location @thttpd {
    include proxy.include;
    proxy_pass http://127.0.0.1:8000;
} 
```

最后，我创建了一个基本的 CGI 脚本，它在命令行上调用 PHP 并传入我已经编写的 PHP 脚本。这对我来说是一个理想的解决方案，因为脚本已经设置为登录到我们的警报表并发送电子邮件。这也是实时的，因为脚本将在 nginx 返回 502 代码后立即执行（根据脚本的逻辑，随后的 502 不会用电子邮件锤我）。

我能够运行一些模拟测试来强制 nginx 返回 502（请参阅[此处](https://serverfault.com/questions/165929/simulate-502-504-on-nginx)的更多信息）。

我将继续对此进行调整，但我对部署它的相对容易性以及可以重用现有代码感到非常满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:30:48.653

我们有双重解决方案。

如果 PHP 死了，我们使用 shell 脚本发送电子邮件通知。我们使用 shell 脚本中的 shell 命令检查 php 服务是否正在运行，如果它没有运行，我们将触发 shell 命令以发送电子邮件。

这一切都在几行 Shell 脚本中。不是太难。

当然，在 cron 中设置它。

# c - 当程序正常退出或异常退出时执行一个函数

> ID：14058463
> 
> 赞同：1
> 
> 时间：2012-12-27T17:12:04.133
> 
> 标签：c, unix, signals, exit

我想在 C 程序退出时执行管家功能。我知道`atexit()`哪个可以帮助注册正常退出的函数，但不适用于 SIGINT 或 SIGQUIT 等信号。我不想为默认行为是终止程序的所有此类信号注册信号处理程序。我只想注册一个函数，该函数将在程序终止之前执行，无论原因是什么。我怎样才能在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:26:46.127

你能把你的c程序作为子进程运行吗？您可以为此使用任何 exec 系列功能。

如果您的子进程正常或异常终止，那么有更好的选项可以从父进程查询子进程的退出状态。

据此，您应该能够在父级中调用您的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:28:12.863

好吧，我不是 C/C++ 开发人员，但看看这个可能对你有帮助的问题。[关闭挂钩 c++](https://stackoverflow.com/questions/6974822/shutdown-hook-c)。尽管在 Java 中有一个非常好的方法，但在 CI 中不认为有一个专门的函数来实现这个目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T08:37:18.797

如果您已经知道您将收到什么类型的信号，您可以在 c 中编写一个信号处理程序。

对于 Linux，请检查此答案：[Ctrl + C 中断事件处理 in Linux](https://stackoverflow.com/questions/17766550/ctrl-c-interrupt-event-handling-in-linux)

一些额外的参考： [https](https://www.gnu.org/software/libc/manual/html_node/Signal-Handling.html#:~:text=24%20Signal%20Handling,disconnection%20of%20a%20phone%20line) ://www.gnu.org/software/libc/manual/html_node/Signal-Handling.html#:~:text=24%20Signal%20Handling,disconnection%20of%20a%20phone%20line 。

对于 Windows，请查看以下链接： [C++: Continue execution after SIGINT](https://stackoverflow.com/questions/2031746/c-continue-execution-after-sigint)

# ios - 漂亮的旧 facebook 对话帖子 VS iOS6 本机对话帖子

> ID：14058465
> 
> 赞同：1
> 
> 时间：2012-12-27T17:12:16.147
> 
> 标签：ios, facebook, ios6

我在我的应用程序中成功集成了 Facebook SDK 3.1，并且我正在尝试向 iOS6+ 用户推荐仅 iOS6+ 的功能。我可以展示分享表，但是当我看到我墙上的帖子时，我很失望。这是一张图片来描述我的意思：

![](../Images/4292395427ba05859147cdcd9adf1442.png)

第一个是从 iOS6 之前的对话框（网络弹出窗口）获得的，第二个是从新的 iOS6+ Native Facebook 对话框（换句话说，SLComposeViewController）获得的。

我的问题是：

**有没有办法使用 FacebookNativeDialog 使第二个帖子看起来像第一个？是否可以像以前一样提供参数字典，以便帖子将正确显示“通过 {myAppName}”？或者它只是显示帖子的新方式，而旧方式已被弃用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:39:45.550

两件事情：

1/“通过 iOS”归因 - 目前这是按设计进行的，无法为您的应用定制。

2/ 具有相同的外观 - 您可以通过在设置作曲家时仅提供链接来获得此信息（即不提供图像）：

```
SLComposeViewController *fbVC = [SLComposeViewController
                                 composeViewControllerForServiceType:SLServiceTypeFacebook];

[fbVC setCompletionHandler:^(SLComposeViewControllerResult result) {
    if (result == SLComposeViewControllerResultCancelled) {
        NSLog(@"Canceled");
    } else if (result == SLComposeViewControllerResultDone) {
        NSLog(@"Posted");
    }
}];
[fbVC addURL:[NSURL URLWithString:@"https://developers.facebook.com/ios"]];
[self presentViewController:fbVC animated:YES completion:nil]; 
```

获得相同外观的关键是链接到的页面具有 Facebook 可以识别以正确显示数据的 Open Graph 标签。您可以通过将链接输入[https://developers.facebook.com/tools/debug来测试 OG 标签是否良好](https://developers.facebook.com/tools/debug)

如果页面没有 OG 标签，则只会显示链接。

# macos - git更改后终端没有提示

> ID：14058467
> 
> 赞同：0
> 
> 时间：2012-12-27T17:12:20.477
> 
> 标签：macos, terminal

我一直在尝试解决无法从 github 克隆 --recursive 的问题。我浏览了[**说明**](https://help.github.com/articles/set-up-git)。我完成了所有命令，运行命令后：

```
git config --global credential.helper osxkeychain 
```

，终端刚刚挂断。

当我尝试退出它时，它告诉我 git 仍在运行。Ctrl-C 显示`[Process completed]`但仍然没有命令提示符。

我试图删除该`com.apple.Terminal.plist`文件，但这只会删除我的首选项。我也试过重启。

我正在使用 Mac OS X 10.8.2

# jquery - 如何将嵌套导航拆分为高度几乎相等的列

> ID：14058474
> 
> 赞同：3
> 
> 时间：2012-12-27T17:12:55.100
> 
> 标签：jquery, html, split, responsive-design

我正在开发一个带有导航覆盖（节点和子节点）的响应式网站。导航应拆分为 4 列用于桌面视图或 2 列用于平板电脑视图。`<ul />`这是一个嵌套列表导航，因此围绕它构建了一个列。我的想法是，只需将导航写在 1 列中，然后使用 jquery 将其动态排列为 4 或 2 列。

html:

```
<!-- overlay -->
<nav class="overlay"> 
    <!-- ul for column -->
    <ul>
        <!-- nodes & subnodes -->
        <li><a href="#">node</a>
            <ul>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
            </ul>
        </li>
        <li><a href="#">node</a>
            <ul>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>                    
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
                <li><a href="#">subnode</a></li>
            </ul>
        </li>
        <li><a href="#">node</a> ...
    </ul>
</nav> 
```

我写了这个函数：

```
 $.fn.arrangeObjects = function(wrapWith, maxCols) {

        this.each(function() {
            if ($(this).parent(wrapWith).length) $(this).unwrap();
        });

        this.parent().each(function() {
            var $el = $(this).children();
                amount = $el.length,
                wrapAmount = amount / maxCols;

            for (var i = 0; i < amount; i += wrapAmount) {
                $el.slice(i, i + wrapAmount).wrapAll('<'+ wrapWith +'/>');
            }
        });
    }; 
```

用于台式机：

```
$(".overlay > ul > li").arrangeObjects('ul', 4); 
```

用于平板电脑：

```
$(".overlay > ul > li").arrangeObjects('ul', 2); 
```

此解决方案将节点分成等份的列。不幸的是，这样看起来不太好：http:
[//bern09.ch/notgood.png](http://bern09.ch/notgood.png)

我想要实现的是排列几乎相同的列高，如下所示：
[http ://bern09.ch/good.png](http://bern09.ch/good.png)

我必须以某种方式尊重子节点的数量，但我真的不知道如何实现这一点。也许有人有很好的提示，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T22:52:53.760

好的。我懂了。这有点棘手。昨天我开始计算每一列的高度，但我相信这种方法更灵活：

```
 this.parent().each(function () {
        var $subnodes       = $(this).children();

        // true will cause counter increment
        // false will cause counter decrement
        var inc     = true;
        var cols    = [];

        for (var i = 0; i < maxCols; i++) {
            cols.push($('<ul></ul>'));
            cols[i].appendTo($(this));    
        }

        function sortByHeight(a, b) {
            return $(a).height() > $(b).height() ? 0 : 1;
        }

        $subnodes = $subnodes.sort(sortByHeight);

        var i = 0;
        $subnodes.each(function () {
            // logic for left and right boundry
            if (i < 0 || i === maxCols) {
                inc = !inc;
                // this will cause node to be added once again to the same column
                inc ? i++ : i--;
            }

            cols[i].append($(this));

            inc ? i++ : i--;
        });
    }); 
```

这是一个概念。首先，我按所​​有节点的高度（从最高到最低）对所有节点进行排序，然后将它们附加到从左到右再到后的列（由 maxCols 指定）。它不如你的漂亮，不幸的是打破了 wrapAll 的使用（我非常喜欢它）。我已经在进行将使用`threshold`参数的小优化。当最短列和最长列之间的高度差大于阈值时，最长列的最后一个元素将移动到最短列。那么它应该看起来更自然。让我知道这是否是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T23:41:05.450

首先也是最重要的 - 排序和分组应该尽可能在后端发生，在这种情况下就是这样。

当您在每列 UL 中对结果进行排序和分组后，您可以将 CSS3 列与旧版浏览器的 jQuery 后备一起使用，[在此处解释](http://sickdesigner.com/masonry-css-getting-awesome-with-css3/)。

```
.overlay {
    -moz-column-count: 4;
    -moz-column-gap: 10px;
    -webkit-column-count: 4;
    -webkit-column-gap: 10px;
    column-count: 4;
    column-gap: 10px;
} 
```

* * *

但是，如果您坚持使用 JavaScript 处理所有内容，则[可以使用 Multi Column List jQuery 插件。](http://codeasily.com/jquery/multi-column-list-with-jquery)
它似乎提供了您需要的解决方案。然而，它是在不久前编写的，因此您可能必须针对最新的 jQuery 版本修改其中的部分内容，并且可能会稍微满足您的需求。

# ios - 在 iOS 中选择适当的多线程技术

> ID：14058478
> 
> 赞同：1
> 
> 时间：2012-12-27T17:13:26.297
> 
> 标签：ios, ios6, nsurlconnection, grand-central-dispatch, performselector

我对在 iOS 中使用哪个多线程工具来访问服务和根据服务数据更改 UI 感到困惑，

1.  首先我习惯了使用 NSURLConnection 及其委托，使用 didreceiveresponse、didreceivedata 等委托来完成任务
2.  其次，我学习并使用 GCD 从块代码中访问服务并更新 UI
3.  现在我正在学习使用 performSelectorInBackground() 在后台线程中工作

显然对在哪里使用哪个工具感到困惑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:22:00.890

1.  `NSURLConnection`委托调用是从远程服务器接收数据的“老派”方式。此外，在单个类中使用几个 NSURLConnection 实例（`UIViewController`或其他类）也不是很舒服。现在最好使用`sendAsynchronousRequest..`带有完成处理程序的方法。您还可以定义完成处理程序将在哪个操作队列（UI 的主队列或其他后台队列）上运行。
2.  GCD 适用于不同的任务，不仅仅是通过`initWithContentsOfURL:`方法获取远程资源。您还可以控制接收块的队列类型（并发、串行等）
3.  `performSelectorInBackground:`也是在后台线程中执行方法的“老派”方式。如果您没有使用 ARC，则需要设置单独的自动释放池以避免内存泄漏。它还有一个限制，即不允许给定选择器接受任意数量的参数。在这种情况下，建议使用`dispatch_async`.

还有`NSOperationQueue`with`NSOperation`及其子类 ( `NSInvocationOperation`& `NSBlockOperation`)，您可以在其中在后台运行任务以及在主线程上获取有关已完成任务的通知。恕我直言，它们比 GCD 更灵活，您可以创建自己的操作子类并定义它们之间的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:25:01.807

最重要的是，你**永远不会**在除主线程之外的另一个线程中更改 UI。

我认为，您提到的所有要点都在后台使用相同的技术：**GDC**。但我不确定。

无论如何，就线程而言，您应该使用哪种工具并不重要。
而是你的目的的问题。如果您不想获取小图像或仅获取少量数据，您可以`contentsOfURL`在`performSelectorInBackground()`GDC 调度块或 GDC 调度块中使用。
如果它是关于更多数据和更多信息，如进度或错误处理，你应该坚持使用 *NSURLConnection`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:25:34.470

我建议在所有情况下都使用 GCD。其他技术仍然存在，但主要是为了向后兼容。

GCD 更好有 3 个原因（至少）：

1.  它非常**易于**使用，并且由于使用了块，代码仍然非常可读
2.  它比 NSOperation 之类的级别低，因此当您需要高性能多线程时它**要快得多**
3.  它是轻量级且**非侵入性**的，因此当您想在方法中间添加线程管理时，您的代码不必进行实质性更改。

# android - 在 ImageView 内对齐大图像而不缩放

> ID：14058479
> 
> 赞同：2
> 
> 时间：2012-12-27T17:13:30.947
> 
> 标签：android, android-layout, android-imageview

我试图在 ImageView 内显示一个大图像（比屏幕宽），我使用矩阵比例类型。

```
<ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/pizza_intro_test"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:scaleType="matrix" 
        /> 
```

但是，我无法在 ImageView 中对齐图像。我想显示图像的“右”部分，但 ImageView 显示“左”部分。

这是当前状态：

![当前状态](../Images/840f3c4a906dd126b5a60b57f7c0c052.png)

这是我想要达到的状态：

![期望的状态](../Images/592f8bf966828c33fda5f4c3872fa7f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T10:42:13.323

我通过设置源和目标 Rect 做了类似的事情。诀窍是在目标 Rect 上使用负值。这样您就可以在可见画布之外“开始绘制”图像的左侧，而右侧将在画布本身上绘制。

目标矩形应该是这样的：

```
float scale = canvas.getHeight() / (float)bm.getHeight(); 
Rect dest = new Rect(canvas.getWidth()-bm.getWidth()*scale,canvas.getWidth(), canvas.getHeight()) 
```

您可以在 onDraw() 上定义它并将其与

```
canvas.drawBitmap(bm, null, mDstRect, mPaint); 
```

您不需要在 XML 或代码上设置任何 scaleType。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:24:46.010

签出 Matrix.setRectToRect 方法并尝试实现它。
[http://developer.android.com/reference/android/graphics/Matrix.html#setRectToRect%28android.graphics.RectF,%20android.graphics.RectF,%20android.graphics.Matrix.ScaleToFit%29](http://developer.android.com/reference/android/graphics/Matrix.html#setRectToRect%28android.graphics.RectF,%20android.graphics.RectF,%20android.graphics.Matrix.ScaleToFit%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T20:06:56.363

尝试将图像视图的重力设置为正确。

```
<ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:src="@drawable/pizza_intro_test"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:scaleType="matrix" 
        /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-25T11:08:01.823

也许这为时已晚，但即使我今天也遇到了同样的问题并使用以下代码段修复了它。

所有对齐/缩放选项都在 scaleType 属性中。

现在，如果要将图像与 ImageView 的开头对齐，请使用**`android:scaleType="fitStart"`**.

同样，**`android:scaleType="fitEnd"`**将其与 ImageView 的底部对齐。

# prolog - “开放式列表”和“差异列表”之间的区别

> ID：14058483
> 
> 赞同：8
> 
> 时间：2012-12-27T17:13:55.877
> 
> 标签：prolog, difference-lists

“开放式列表”和“差异列表”有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:18:52.320

正如[http://homepages.inf.ed.ac.uk/pbrna/prologbook/node180.html](http://homepages.inf.ed.ac.uk/pbrna/prologbook/node180.html)上所解释的，开放列表是一种用于实现差异列表的工具。

打开列表是在列表中的某个位置有未分配变量的任何列表，例如：`[a,b,c|X]`. 您可以使用开放列表来实现称为差异列表的数据结构，它正式指定了指向第一个元素和开放端的两个术语的结构，传统上定义为：`[a,b,c|X]-X`，以便更轻松地对此类列表进行操作。

例如，如果您只有一个开放列表，则可以在末尾添加元素，但您需要遍历所有项目。在差异列表中，您可以只使用列表末尾变量（`Hole`在上面的页面上称为 a）来跳过迭代并在恒定时间内执行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:16:25.497

例如

开放式：[a,b,c | _]

差异列表：[a,b,c|U]-U。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-30T17:00:45.837

这两个概念似乎都是列表，但实际上它们不是。一个是具体的术语，另一个是约定俗成的。

## 开放式列表、部分列表

开放式列表是不是列表但可以实例化以使其成为列表的术语。在标准术语中，它们被称为**部分列表**。这里是部分列表：`X`, `[a|X]`,`[X|X]`都是部分列表。

开放式列表的概念建议使用此类列表来模拟某些开放式状态。想一想可能由一个开放式列表表示的字典。每次添加新项目时，“部分列表末尾”的变量都会被实例化为一个新元素。虽然这种编程技术在 Prolog 中是完全可行的，但它有一个很大的缺点：程序将严重依赖于过程解释。而且在许多情况下，根本无法进行声明性解释。

## 差异列表

差异列表实际上不是列表本身，而是列表的某种使用方式，以便*预期列表*由两个变量表示：一个用于列表的开头，一个用于列表的结尾。出于这个原因，谈论**列表差异**而不是差异列表会很有帮助。

考虑：

```
el(E, [E|L],L). 
```

在这里，最后两个参数可以看作是形成了一个区别：一个包含单个元素的列表`[E]`。您现在可以从更简单的列表中构造更复杂的列表，**前提是您尊重某些约定**，这些约定本质上是第二个参数仅被进一步传递。这样的差异永远不会相互比较！

```
el2(E, F, L0,L) :-
   el(E, L0,L1),
   el(F, L1,L). 
```

请注意，这只是一个约定。这些列表没有被强制执行。考虑到：

```
?- el2(E, F, L, nonlist).
L = [E,F|nonlist]. 
```

该技术也用于编码[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题") s。

# wcf - 关于 WCF 服务作为 wcf 启动器的配置文件中的条目的一些基本查询

> ID：14058484
> 
> 赞同：0
> 
> 时间：2012-12-27T17:13:57.780
> 
> 标签：wcf, configuration, app-config

我是 WCF 世界的新手。我只是下载了一个代码并看到了 wcf 服务配置文件，但由于我缺乏知识，我对 WCF 服务的配置文件中的条目感到困惑。我浏览了一些在线文章，但我仍然感到困惑。

## 这是我的问题

1）`<service name="WCFService.Service"` 何时需要服务名称？我可以省略服务名称吗？如果可以，可能会出现什么样的问题？

2）我可以将任何名称设置为服务名称，如 abc.xyz 还是有一些分配服务名称的规则？

3）基地址有什么用？如果省略基地址，那么可能是什么问题。当需要基地址时。根据下面的配置条目，有两个基地址...为什么需要两个基地址。当人们给出更多的基地址时？只需查看下面的 2 个基地址，然后告诉我为什么人们给出两个基地址，为什么不给出一个……有什么具体原因吗？

4）有两个端点一个是tcp，另一个是mex。如果我省略 mex 基地址，那么服务将无法被发现？如果是，这意味着没有人可以从 VS IDE 或 svcutil 创建代理......我是对的。

5）如果mex端点将被删除，那么如何与服务交互......必须有其他出路。如果是这样，那么告诉我如何作为客户端与服务进行交互。

6)

 **只需查看上面的 mex 端点并告诉我我们可以写 mex 端点 url 之类的东西吗

```
**net.tcp://localhost:1645/MyServer/mex** instead of ChatServer ?? 
```

实际上 wcf 服务托管在名为 ChatServer 的 win 表单项目中。这是 url 变成**net.tcp://localhost:1645/ChatServer/mex 的原因吗？**

我见过很多人写 mex 端点，这里没有 url 分配给 mex 端点的地址标签....为什么？当我应该像上面那样编写 mex 端点时...请举例说明。

7) /mex....是什么意思**net.tcp://localhost:1645/ChatServer/mex** /mex 是强制的，mex 是固定词？

8) 现在看到 tcp 端点

 **tcp 端点地址没有 url 而 tcp 这个词已分配给地址属性...为什么？

我们不能将任何有效的 url 分配给 tcp 端点的地址字段吗？

9) tcp 端点的地址字段将始终具有称为“tcp”的固定词，无论是规则还是约定。

10) 如果我需要添加另一个名为 wsdualhttp 绑定的端点，那么我需要在配置文件中写入什么

11）假设某个开发服务将托管在 IIS 中，但客户端可以是另一个 asp.net Web 应用程序并赢得应用程序，那么他/她需要做什么？那么应该使用什么 url 客户端从 VS ide 创建代理？任何人都可以提供示例配置条目。

12) 如果我希望人们可以使用两个 url 来创建我的服务代理，如何编写配置文件......一个是示例**net.tcp://localhost:1645/ChatServer/mex**，另一个是**http:/ /localhost:1645/ChatServer/message.svc**

我知道我的问题非常基本，但我仍然无法对这些问题进行分类。还指导我如何拥有丰富的知识来大胆地创建配置文件条目。

是否有任何工具可以为我的服务创建正确的配置条目....我是否有任何自动化应用程序可以代表开发人员执行此操作。谢谢

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
<services>
<service name="WCFService.Service" behaviorConfiguration="behaviorConfig">

<host>
  <baseAddresses>
    <add baseAddress="net.tcp://localhost:1645/ChatServer/"/>
    <add baseAddress="http://localhost:1648/ChatServer/"/>
  </baseAddresses>
  </host>
  <endpoint address="tcp"
                  binding="netTcpBinding"
                  bindingConfiguration="tcpBinding"
                  contract="ChatService.IChat"/>

 <endpoint address="net.tcp://localhost:1645/ChatServer/mex"
                  binding="mexTcpBinding"
                  contract="IMetadataExchange"/>

 </service>
 </services>

 <behaviors>
 <serviceBehaviors>
 <behavior name="behaviorConfig">
  <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
  <serviceDebug includeExceptionDetailInFaults="true"/>
  <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100"/>
 </behavior>
 </serviceBehaviors>
 </behaviors>
 <bindings>
 <netTcpBinding>
 <binding name="tcpBinding"
                 maxBufferSize="67108864"
                 maxReceivedMessageSize="67108864"
                 maxBufferPoolSize="67108864"
                 transferMode="Buffered"
                 closeTimeout="00:00:10"
                 openTimeout="00:00:10"
                 receiveTimeout="00:20:00"
                 sendTimeout="00:01:00"
                 maxConnections="100">
  <security mode="None">
  </security>
  <readerQuotas maxArrayLength="67108864"
                          maxBytesPerRead="67108864"
                          maxStringContentLength="67108864"/>
  <reliableSession enabled="true" inactivityTimeout="00:20:00"/>
  </binding>
  </netTcpBinding>
  </bindings>
  </system.serviceModel>
  </configuration> 
```

## 我的编辑部分从这里开始

3）你在说什么共同的部分。您在我的完整配置文件中看到了什么共同部分...请举例说明。

你说....如果省略基地址，则每次都需要多次指定公共部分。如果为多个传输协议指定端点，则需要多个基地址

你能用例子让我理解你所说的省略基地址吗，因为在阅读了你对第 3 点的回答后，我不清楚这些事情

4) 如果我禁用 mex 端点，那么如何使用 svcutil 创建 wsdl？如果我给我的服务 dll，那么客户端可以解码代码并获得我的完整源代码。你能更详细地告诉我你想对第 4 点说什么吗

12) 如果我公开两个 url 来使用我的服务，那么 asp.net 客户端可以使用 tcp url 创建服务代理，例如**net.tcp://localhost:1645/ChatServer/mex ??** Web客户端使用tcp绑定会有什么问题吗？**因为 tcp 状态已满，但 web 是无状态的……这就是为什么我要问 web 客户端使用 tcp 绑定 url net.tcp://localhost:1645/ChatServer/mex**会有任何问题

 **13）在我的示例中，mex 端点看起来像

 **但是很多人创建了 mex 端点，例如

 **所以告诉我两个 mex 端点之间有什么区别......还告诉我什么时候应该去 1ts mex 端点，什么时候人们应该去第二个 mex 端点

14）在我的情况下，如果我会像这样写 mex end

 **和 tcp 端点之类的

 **那会是什么结果。我的服务是否会被发现。在这种情况下，我应该使用什么地址来创建服务代理。

如果可能的话，请用迷你样本回答我的问题以便于理解，因为我是 WCF 的新手......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:29:09.393

你的答案一一

1.  始终需要服务名称。如果在配置文件中省略它，将出现与格式错误的配置文件相关的运行时错误（错误指示服务名称无效）。如果你在代码中省略它，它将形成编译时错误。

2.  不可以。服务名称应该对应于实现服务的类型（连同命名空间）。检查[此](https://stackoverflow.com/questions/2077615/wcf-contract-name-could-not-be-found-in-the-list-of-contracts)答案以获取详细信息。

3.  如果定义了多个端点（如服务端点和 mex 端点）与某个公共部分，则可以在基地址标签中指定公共部分。端点地址属性中只需要差分部分（通常为“”为服务端点，“mex”为mex端点）如果省略基地址，则每次都需要多次指定公共部分。如果为多个传输协议指定了端点（即 http 和 net.tcp 的基地址不同），则需要多个基地址。
    示例在[这里](http://pastebin.com/ncguZBki)有和没有基地址。
    共同部分是“net.tcp://localhost:1645/ChatServer”

4.  如果省略 mex 端点，则需要离线向客户端提供合约信息。正如您所提到的，服务将无法被发现。因此，您需要以某种方式向客户端应用程序提供服务/数据合同信息（作为 WSDL/库/源文件）。要创建客户端，您需要的只是合约和配置。如果 mex 可用，则从 mex 端点收集此信息。如果 mex 不可用，则必须离线提供此信息。示例（通过电子邮件发送合同库和配置）。

5.  出路是离线提供合约信息（如步骤4所述）

6.  是的，但不建议避免歧义。

7.  不，“mex”不是固定的。它可以是任何东西（只要 URL 有效）。“mex”只是未说明的协议/标准。

8.  端点地址 = baseAddress + 地址属性。
    在这种情况下，地址（tcp 端点）=“net.tcp://localhost:1645/ChatServer/”+“tcp”

9.  这不是惯例。它可以是任何东西（只要 URL 有效）。

10.  [wsdualhttpbinding](http://msdn.microsoft.com/en-us/library/ms731821.aspx)配置参考链接。然而并不是因为传输协议是http，你需要提供完整的地址。baseAddress 将不会被拾取。这是由于[协议映射。](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/default-protocol-mapping-in-wcf-4-0/)

11.  客户端应用程序（无论是 ASP.NET/console/win app/WPF/ 任何其他）都需要添加[WCF 客户端配置和代理](http://msdn.microsoft.com/en-us/library/ms731745.aspx)。

12.  如果由客户决定，他们想要使用哪个 URL（前提是他们有权访问并且他们知道）。如果您想在服务器端执行此操作，您可以使用[路由服务](http://msdn.microsoft.com/en-us/library/ee517423.aspx)功能（在 WCF 4.0 及更高版本中可用）。我不确定 Web 客户端如何使用 tcp 客户端（安全策略是否允许这样做？）。不管怎样，从服务器端暴露两个端点对于客户端如何访问端点没有问题。

由于格式问题，13/14 代码片段不可见。**************

# c# - C# ODATA , 用子实体扩展 N 级

> ID：14058485
> 
> 赞同：1
> 
> 时间：2012-12-27T17:14:01.843
> 
> 标签：c#, odata

我真的需要你的帮助来实现以下目标：

首先让我向您展示我的数据库数据模型：

```
1- mebs_schedule=>mebs_ingesta
2- mebs_ingesta=>mebs_ingestadetails
3- mebs_ingesta=>mebs_videoitem
4- mebs_ingesta=>mebs_channel=>mebs_channeltuning 
```

使用下面的 URI，我可以得到这棵树以提供时间表参考：

```
mebs_schedule=>mebs_ingesta

mebs_ingesta=>mebs_ingestadetails

mebs_ingesta=>mebs_videoitem

mebs_ingesta=> mebs_channel 
```

URI =`"mebs_schedule({0})?$expand=mebs_ingesta/mebs_videoitem,mebs_ingesta/mebs_ingestadetails,mebs_ingesta/mebs_channel"` 现在我还想为每个 mebs_channel 事件获取关联的 mebs_channeltuning 集合。

我在谷歌上花了一些时间来了解这是如何实现的，但什么也没有。

一些暂定：

`mebs_schedule(79)?$expand=mebs_ingesta&expand=mebs_videoitem,mebs_ingestadetails,mebs_channel&expand=mebs_channe.mebs_channeltuning`

最后一个问题是有什么方法可以扩展所有导入的 Data Model 。

谢谢你的帮助。

环境：VS .NET 2010 / C# 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:52:29.127

这应该可以正常工作：

```
URI = "mebs_schedule({0})?$expand=mebs_ingesta/mebs_videoitem,mebs_ingesta/mebs_ingestadetails,mebs_ingesta/mebs_channel/mebs_channeltuning" 
```

我只是在最后添加了“/mebs_channeltuning”。请注意，您不需要仅显式扩展 mebs_channel，因为它会由于其子项被扩展而被扩展（在该更改之后）。

暂定的解决方案有很多问题。一个是 expand 需要在它之前的 $ 符号（否则它不会被识别为查询选项）。其次是服务器通常只接受一个 $expand 查询选项。（并且 . 不是扩展的分隔符）。

没有办法扩展一切。这是有意的，因为扩展会使数据潜在地呈指数增长，因此可能会导致服务器和客户端出现问题。客户必须明确要求每次扩展。

# mysql - java.sql.SQLException：用户拒绝访问

> ID：14058486
> 
> 赞同：2
> 
> 时间：2012-12-27T17:14:09.563
> 
> 标签：mysql, permission-denied

我想创建一个可以从任何主机访问 Mysql 服务器的用户

我用

`create user abc@10.10.131.17 identified by 'abc123'`

和

`grant all privileges mydb.* to 'abc'@'%';`

但是当我运行客户端时，会发生错误： `"java.sql.SQLException: Access denied for user 'abc'@'10.10.0.7' (using password: YES)`

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:18:31.197

`FLUSH PRIVILEGES;`一个明显的猜测是您在发表`GRANT`声明后没有这样做。

另一个明显的猜测（不确定问题中是否有拼写错误）是 is 的语法`GRANT`，`GRANT ALL PRIVILEGES ON mydb.* TO 'abc'@'%';`其中包含`ON`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:26:54.440

您已经创建了一个允许 IP 的用户，`10.10.131.17`并且您正在尝试从 IP 连接 MySQL 服务器`10.10.10.7`。所以它不会工作。要访问 MySQL 服务器，您必须创建用户允许 IP`10.10.10.7`或允许所有 IP 使用`%`.

```
CREATE USER `abc`@`10.10.10.7` IDENTIFIED BY 'abc123' 
GRANT ALL PRIVILEGES mydb.* TO `abc`@`10.10.10.7`; 
```

**或者**

```
CREATE USER `abc`@`%` IDENTIFIED BY 'abc123' 
GRANT ALL PRIVILEGES mydb.* TO `abc`@`%`; 
```

# html - 设置表格 td 高度和溢出滚动

> ID：14058487
> 
> 赞同：4
> 
> 时间：2012-12-27T17:14:18.473
> 
> 标签：html, css, html-table

我有一个表格，我想`td`在其内容超过行的指定高度时显示一个垂直滚动条。

我有[这个](http://jsbin.com/ixetu/87/edit)示例代码，但无论内容如何，​​它都不会在 y 轴上显示活动滚动条。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T17:20:10.877

浏览器不会将溢出滚动条应用于`TD`标签。您需要将表格单元格的内容包含在`div`标签中，然后滚动：

```
<td><div>Do you see what I meancxzdaaaaaaaaaaaaa?</div></td> 
```

和：

```
td > div { overflow-y:scroll;overflow-x:hidden;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T17:20:23.917

`Overflow:scroll;`应该在块级元素上给出一个滚动条，但事实`td`并非如此。它应该在 a 上做什么`td`？CSS 规范对此并不清楚，因此浏览器行为有所不同。

Chrome 会应用滚动条，但 FF 和 IE 不会。对于跨浏览器解决方案，您可以添加一个额外的容器 div 并将 CSS 应用于该容器。

```
<html>
  <head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
      table { width:250px;table-layout:fixed;border-collapse:collapse }
      table tr { height:1em;  }
      td > div { overflow-y:scroll;overflow-x:hidden;} 
    </style>
  </head>
  <body>
    <table border="1">
      <tr>
        <td>This is a test.</td>
        <td><div>Do you see what I meancxzdaaaaaaaaaaaaa?</div></td>
        <td>I hate this overflow.</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-26T08:52:28.043

```
td > div { overflow-y:auto;} 
```

这将在需要时添加垂直滚动条。

# ios - 如何在 UIImageView 顶部居中对齐 UILabel

> ID：14058491
> 
> 赞同：0
> 
> 时间：2012-12-27T17:14:33.170
> 
> 标签：ios, uiimageview, uilabel

我有一个 UIImageView，上面有一个 UILabel。这个 UILabel 有一个文本向用户显示有多少人喜欢他的内容（有点像 Facebook 喜欢或评论），UIImageView 和 UILabel 都很小，所以 UI 需要完美。现在，如果 UILabel 显示一个 2 位数字，它仍然显示正确对齐，但是当我进入 3 位数字时，它有点偏斜，我如何确保始终可以通过代码将它与 UIImageView 对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:29:58.090

类似于 Scott 的回答，但使用的是发帖人要求的代码

```
//assume that UIImageView (imageView) and UILabel (label) are already defined
label.frame = CGRectMake(imageView.frame.origin.x, imageView.frame.origin.y - label.frame.size.height, imageView.frame.size.width, label.frame.size.height);
label.textAlignment = UITextAlignmentCenter; 
```

注意：您还需要确保 UILabel 的 struts 和 autoresize 掩码与 UIImageView 的相匹配，以确保它在不同尺寸和不同方向的屏幕上看起来合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:22:10.490

一个正在发生的事情的屏幕截图会很好，但您总是可以尝试使标签与图像的宽度相同，然后将标签的文本居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:32:33.183

试试这个：

```
UILabel *label = [[UILabel alloc] initWithFrame:imageView.frame];
label.textAlignment = NSTextAlignmentCenter; 
```

这可能会起作用，因为 UITextAlignmentCenter 在 iOS 6 及更高版本中已弃用。

# javascript - 如何使用 javascript 从模式中解析一些文本？

> ID：14058498
> 
> 赞同：0
> 
> 时间：2012-12-27T17:15:19.713
> 
> 标签：javascript, regex

该字符串包含如下值：

```
my string [[ [[test1]] test2 ]] other text 
```

我怎样才能得到一个值`test1`和`test2`不同的变量？

**我试过！**

```
var test = "my string [[ [[test1]] test2 ]] other text";

var reg = /[^\[\]]*[\w ]+(?=\])/i;
var reg2 = /\]\]\s*(.*)\s*\]\]/i;

result = reg2.exec(test);

​alert(result);​ 
```

我自己制作的第二个常规，但它仍然不是答案，它返回给我一个数组。那么如何使它只有一个值而不是整个数组呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:18:01.100

使用这个正则表达式`[^\[\]]*[\w ]+(?=\])`

# java - 使用 gflot 创建 GWT 应用程序

> ID：14058499
> 
> 赞同：1
> 
> 时间：2012-12-27T17:15:22.540
> 
> 标签：java, gwt, web-applications, flot

所以我正在考虑用 gflot 创建一个 GWT 项目。任何人都可以提供有关如何开始的简短教程。当谈到 Eclipse 中的 java 项目时，我是个新手。我了解如何在 Eclipse 中创建 GWT 项目，并且我有 gflot jar 文件，但我不知道如何将两者连接起来。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:10:56.000

您必须下载 gflot jar 文件并将其用作 eclipse 中 gwt 项目中的外部 jar 库。

您可以查看[此问题](https://stackoverflow.com/questions/13988653/gwt-using-external-jar/13988769#13988769)的答案以获取更多详细信息。

# java - jTextField 只接受字母和空格

> ID：14058505
> 
> 赞同：2
> 
> 时间：2012-12-27T17:15:46.017
> 
> 标签：java, swing, filter, jtextfield

如果用户输入其他字符，我希望用户只输入字母或空格，我想用我搜索过的 jOptionPane 给消息，我尝试了下面的代码

```
if (!(Pattern.matches("^[a-zA-Z]+$", answerField1.getText())))
        JOptionPane.showMessageDialog(null, "Please enter a valid character", "Error", JOptionPane.ERROR_MESSAGE); 
```

但现在无论我输入什么都会给出错误

现在我更改了代码

```
Pattern letterPattern = Pattern.compile("^[a-zA-Z]+$");

if (!(letterPattern.matcher(answerField1.getText()).matches()))
      {
    JOptionPane.showMessageDialog(null, "Please enter a valid character", "Error", JOptionPane.ERROR_MESSAGE);
} 
```

现在它只在用户第一次输入数字时给出消息。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T19:20:11.127

使用 a `DocumentFilter`，这是我做的一个例子，它只接受字母字符和空格：

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;
import javax.swing.text.DocumentFilter.FilterBypass;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextField jtf = new JTextField();
        //add filter to document
        ((AbstractDocument) jtf.getDocument()).setDocumentFilter(new MyDocumentFilter());

        frame.add(jtf);

        frame.pack();
        frame.setVisible(true);
    }
}

class MyDocumentFilter extends DocumentFilter {

    @Override
    public void replace(FilterBypass fb, int i, int i1, String string, AttributeSet as) throws BadLocationException {
        for (int n = string.length(); n > 0; n--) {//an inserted string may be more than a single character i.e a copy and paste of 'aaa123d', also we iterate from the back as super.XX implementation will put last insterted string first and so on thus 'aa123d' would be 'daa', but because we iterate from the back its 'aad' like we want
            char c = string.charAt(n - 1);//get a single character of the string
            System.out.println(c);
            if (Character.isAlphabetic(c) || c == ' ') {//if its an alphabetic character or white space
                super.replace(fb, i, i1, String.valueOf(c), as);//allow update to take place for the given character
            } else {//it was not an alphabetic character or white space
                System.out.println("Not allowed");
            }
        }
    }

    @Override
    public void remove(FilterBypass fb, int i, int i1) throws BadLocationException {
        super.remove(fb, i, i1);
    }

    @Override
    public void insertString(FilterBypass fb, int i, String string, AttributeSet as) throws BadLocationException {
        super.insertString(fb, i, string, as);

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:29:08.200

第一行末尾有一个分号。所以它并没有真正正确地测试。

像这样的声明（这就是你所拥有的）：

```
if (condition) ; 
```

如果条件为真，将执行空语句 (;)，然后转到下一行。如果条件为假，它将转到下一行。这两个动作具有相同的结果。

您可以尝试在所有“if”语句上使用大括号。有时很乏味，但更难搞砸。

```
if (!(Pattern.matches("^[a-zA-Z]+$", answerField1.getText()))) {
    JOptionPane.showMessageDialog(null, "Please enter a valid character", "Error", JOptionPane.ERROR_MESSAGE);
} 
```

这就是我会做的。您可以删除分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T04:36:16.490

此代码可能会帮助您：

```
answerField1.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            char ch = e.getKeyChar();
            if(Character.isDigit(ch)){
                answerField1.setText("");
                JOptionPane.showMessageDialog(null, "Enter Alphabet Only !");
                                     }
                                            }
    }); 
```

# jquery - 操作一个运行中的延迟

> ID：14058506
> 
> 赞同：2
> 
> 时间：2012-12-27T17:15:50.650
> 
> 标签：jquery, jquery-deferred

```
$(function(){

    var dfd = $.when( $('div').eq(0).fadeOut(1000) );

    // ADD NOW NEW FUNCTION DO dfd

    dfd.then(function(){
        alert();
    });

}); 
```

如果它正在运行但尚未解决，是否可以向 dfd 延迟对象添加另一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:31:08.747

It's a bit unclear, but I think that you want to check whether the deferred is resolved and add another callback if it's not:

[http://jsfiddle.net/RT23y/1/](http://jsfiddle.net/RT23y/1/)

Essentially you can just check

```
if (dfd.state() == 'resolved') 
```

to see whether another callback can be added.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:19:09.787

在标准的 jQuery 方法链中，我们期望`.fadeOut()`返回 jQuery，但是在表达式中......

```
$.when( $('div').eq(0).fadeOut(1000) )...; 
```

...通过一个内部 jQuery 魔术，传递给的参数实际上`$.when()`是一个从. 明确地说，我们会写...`fx``$('div').eq(0)`

```
$.when( $('div').eq(0).fadeOut(1000).promise('fx') )...; 
```

实际上没有理由使用`$.when()`，除非你需要做一些事情来响应两个或更多的承诺。因此我们可以写...

```
var promise = $('div').eq(0).fadeOut(1000).promise(); 
```

...给出可以以多种方式附加任意数量的“完成”回调的承诺。

这是可能的示例：

```
var promise = $('div').eq(0).fadeOut(1000).promise();

promise.then(function() {
    alert('done 1');
});

promise.done(function() {
    alert('done 2');
});

promise.then(function() {
    alert('done 3');
}).always(function() {
    alert('done 4');
}); 
```

**[演示](http://jsfiddle.net/U4AgZ/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T17:20:17.987

您可以使用[.promise()](http://api.jquery.com/promise/)：

```
$('div').eq(0).promise().done(function(){
    alert();
}); 
```

# wpf - 选择时将 TabItem.Header 从图像更改为文本

> ID：14058507
> 
> 赞同：1
> 
> 时间：2012-12-27T17:15:51.567
> 
> 标签：wpf, xaml, tabcontrol, tabitem

我遇到了一个我正在寻求解决方案的问题。我有一个添加了样式的 tabControl。

我想在每个tabitem.header上仅显示图像，然后选择该选项卡时，然后从标题和显示文本中隐藏图像（另一个不活动的标头将显示图像）。

任何人都可以提供任何帮助吗？

```
<Window.Resources>
    <Style TargetType="{x:Type TabItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid Name="Borderer" Background="#FF777777" Height="70" Width="90">
                        <ContentPresenter x:Name="ContentTabItem" ContentSource="Header" VerticalAlignment="Center" HorizontalAlignment="Center" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Foreground" Value="#FF000000" />
                            <Setter TargetName="Borderer" Property="Background" Value="WhiteSmoke" />

                            <Setter Property="Header" >
                                <Setter.Value>
                                    <Grid>
                                        <ContentPresenter ContentSource="Tag" />
                                    </Grid>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <TabControl Height="189" HorizontalAlignment="Left" Margin="94,123,0,0" Name="tabControl1" VerticalAlignment="Top" Width="500">
        <TabItem Name="tabItem1" IsSelected="True" >
            <TabItem.Tag>
                <TextBlock Text="blab lab la" />
            </TabItem.Tag>
            <TabItem.Header>
                <Image Source="images/img1.png" Width="35" Height="35" />
            </TabItem.Header>

            <TabItem.Content>
                <Grid>
                    <TextBlock Name="aaa" />
                </Grid>
            </TabItem.Content>
        </TabItem>
        <TabItem >
            <TabItem.Tag>
                <TextBlock Text="la lab blab" />
            </TabItem.Tag>
            <TabItem.Header>
                <Image Source="images/img2.png" Width="35" Height="35" />
            </TabItem.Header>
            <TabItem.Content>
                <Grid>
                    <TextBlock Name="bbb" />
                </Grid>
            </TabItem.Content>
        </TabItem>
    </TabControl>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:58:30.877

实际上，您可以在不替换 TabItem 上的整个 ControlTemplate 的情况下执行此操作。您可以在选择 TabItem 时更改 TabItem 的 HeaderTemplate，从而使您的 Style 更短：

```
<DataTemplate x:Key="SelectedHeaderTemplate" >
    <ContentControl Content="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=TabItem}, 
                                      Path=Tag}" />
</DataTemplate>

<Style TargetType="{x:Type TabItem}">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="HeaderTemplate" Value="{StaticResource SelectedHeaderTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

# ios - 是否可以使用 iPad 从网页中拍照？

> ID：14058517
> 
> 赞同：2
> 
> 时间：2012-12-27T17:16:31.147
> 
> 标签：ios, ipad, web-applications, camera, photo

我正在构建一个用于跟踪库存的网络 Intranet 应用程序，我希望能够使用 iPad 上的内置摄像头为每件商品拍照。这可能吗？

我使用应用程序对条形码做了类似的事情，但我还没有找到任何可以对照片做同样事情的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:30:31.927

这个堆栈溢出问题可能会有所帮助：

[在 iOS 中通过浏览器访问 HTML5 相机](https://stackoverflow.com/questions/6336641/html5-camera-access-through-browser-in-ios)

@user295691 写道：

> 在 IOS6 苹果通过 <input type=file> 标签支持这一点。我在 Apple 的开发人员文档中找不到有用的链接，但这里有一个示例 [http://www.aaronlumsden.com/articles/ios6-the-benefits-for-html5-web-app-development/](http://www.aaronlumsden.com/articles/ios6-the-benefits-for-html5-web-app-development/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:28:50.770

您可以使用 PhoneGap 框架来实现这一点。JavaScript 用作 Web 应用程序和本机功能之间的桥梁。

# java - 比较 SQLite 数据库中的数据 - Android (java)

> ID：14058520
> 
> 赞同：0
> 
> 时间：2012-12-27T17:16:36.617
> 
> 标签：java, android, sqlite, type-mismatch

我制作了一个包含 3 列的 SQLite 高分；排名（整数），分数（长）和百分比（整数）。我正在尝试从列中提取所有数据，并将它们与用户刚刚获得的分数进行比较，以查看他们的新分数是否进入了前 10 名的高分列表。

我希望先按百分比对高分进行优先排序，然后再得分以打破任何平局。下面是我开始这样做的地方。我在正确的轨道上吗？即使在 Java 之外，我也从未使用过 SQLite，所以这对我来说都是全新的。

预先感谢您的帮助。

```
//Check if new record makes the top 10.
public boolean check(int rank, long score, int percentage) {
    //SQL query to get last score/percentage if highscores has 10 records...
    long[] scores = new long[9];
    int[] percentages = new int[9];
    scores = db.execSQL("SELECT " + SCORE + " FROM " + TABLE + ";");  //Error:  Type mismatch
    percentages = db.execSQL("SELECT " + PERCENTAGE + " FROM " + TABLE + ";");  //Error:  Type mismatch
    //Algorithms to compare scores and percentages go here...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:19:27.627

```
 scores = db.execSQL("SELECT " + SCORE + " FROM " + TABLE + ";"); 
```

`execSQL`返回无效。

根据[javadoc](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)

> 执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。

您可能需要使用[查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)（或）[rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D,%20android.os.CancellationSignal%29)机制来进行选择。

# python - web.py 类导入错误

> ID：14058522
> 
> 赞同：0
> 
> 时间：2012-12-27T17:16:48.307
> 
> 标签：python, web.py

这是我的 index.py（它在文件夹 /NetWeave_Custom 中）

```
import web
import lib.html

web.config.debug = True

urls = (
    '/', 'index',
)

class index:
    def GET(self):
        markup = html.abstr()
        print markup.element

if __name__ == "__main__":
    app.run()

app = web.application(urls, globals(), autoreload=False)
application = app.wsgifunc() 
```

然后这是我的 html.py（它在 /NetWeave_Custom/lib/ 中）

```
class abstr:
    element = 'Hello World'; 
```

但是我收到 500 内部服务器错误。谁能告诉我我做错了什么？我是 web.py 框架的新手。谢谢！

编辑：

使用上面的代码，我得到了错误： ImportError: no module named lib.html

最终编辑：

工作代码如下所示：

```
import web
from lib import html

web.config.debug = True

urls = (
    '/', 'index',
)

class index:
    def GET(self):
        markup = html.abstr()
        return markup.element

if __name__ == "__main__":
    app = web.application(urls, globals(), autoreload=False)
    app.run()

application = app.wsgifunc() 
```

然后这是我的 html.py（它在 /NetWeave_Custom/lib/ 中）

```
class abstr:
    element = 'Hello World'; 
```

浏览器显示：'Hello World' 所以更改是在调用它之前定义应用程序（不是真正相关，但对你来说这是必要的——没有这个它确实可以正常工作），返回 markup.element 而不是打印它，并创建一个lib 子目录中的空白`__init__.py`文件，因此据我所知， lib 将被视为模块（或包？）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:21:06.000

您 import `lib.html`，但不要使用该全名。相反，您仅指`html`.

如果出现导入​​错误，则说明`lib`找不到包；可能有以下两种情况之一：

*   您应该`import html`改用，这也可以解决不正确的参考。

*   该`lib`目录缺少它的`__init__.py`文件（可以为空）。该文件将使其成为一个包，并允许您导入它。然后将引用更改`html`为`lib.html`：

    ```
    class index:
        def GET(self):
            markup = lib.html.abstr()
            print markup.element 
    ```

    *或*将导入更改为：

    ```
    from lib import html 
    ```

您还尝试`app`在定义之前运行。将最后几行更改为：

```
if __name__ == "__main__":
    app = web.application(urls, globals(), autoreload=False)
    app.run() 
```

最后但同样重要的是，您需要将`NetWeave_Custom`目录（完整、绝对路径）添加到`PYTHONPATH`; 如果您正在使用`mod_wsgi`查看[`WSGIPythonPath`](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:45:06.097

答案是双重的。`__init__.py`我在 lib 子目录中没有文件。另一个错误是我写的`print`，而不是`return markup.element`……Doh！

# asp.net - 在页面刷新时保留文本框值

> ID：14058524
> 
> 赞同：1
> 
> 时间：2012-12-27T17:17:11.507
> 
> 标签：asp.net

我在用户控件 uc1 中有一个文本框。我已将此 uc1 嵌入到名为 default.aspx 的页面中。我的问题是在运行应用程序并在文本框中输入一些数据后，刷新页面时我想显示我在文本框中输入的值而不清除文本框。我想要有关如何实现此目标的代码帮助。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:25:49.953

在您的 aspx.cs 页面顶部创建一个全局变量：

```
 public string textboxValue
    {
        get
        {
            if (ViewState["textboxValue"] != null)
                return ViewState["textboxValue"].toString();
            else
                return "";
        }

        set
        {
            ViewState["textboxValue"] = value;
        }
    } 
```

然后，在 PageLoad() 中，为 textboxValue 赋值：

```
protected void Page_Load(object sender, EventArgs e)
    {
if(!IsPostBack)
textboxValue = MyTextBox.Value;
else
MyTextBox.Value = textboxValue;
} 
```

您还可以随时使用 textboxValue 来分配 MyTextBox 的值，或以任何其他可能对您有用的方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:40:19.867

所有 asp.net 服务器端控件 ( ) 的默认行为`runat="server"`是保持其状态。如果您的文本框在您的页面刷新时被清除，您可能会在代码中自己清除该值。

您是动态添加文本框还是用户控件？如果是这样，你在做`PageInit`吗？稍后添加它们可能会导致它们丢失状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:13:18.723

我能够在不清除文本框中的值的情况下刷新页面。我这样做如下：我在 UC1.vb 中创建了一个公共属性，如下所示： Public Property textbox_value() As String

```
 Get
        If Session("textbox1") IsNot Nothing Then
            Return Session("textbox1").ToString()
        Else
            Return ""
        End If
    End Get
    Set(value As String)
        Session("textbox1") = value
    End Set
End Property 
```

在用户控件的 page_load 事件中，我添加了以下代码： If IsPostBack Then textbox_value= textbox1.Text ElseIf Not IsPostBack Then ' 第一次加载页面或刷新页面时 textbox1.Text = textbox_value End If

希望能帮助到你。

# ruby - 以编程方式使用 selenium 与 ace 编辑器交互

> ID：14058532
> 
> 赞同：4
> 
> 时间：2012-12-27T17:17:40.067
> 
> 标签：ruby, selenium-webdriver, watir

我正在尝试使用`selenium-webdriver`. 特定页面使用 ace 编辑器进行语法高亮显示。问题是我可以使用

```
driver.get "http://codetable.org"
elem = driver.find_element(:css, "#editor textarea")
elem.send_keys "Hello" 
```

但我无法清除曾经输入的文字。`elem.clear`对页面没有影响。

有什么方法可以以编程方式删除屏幕上的文本？我怀疑这是因为 ace 添加了额外的 css。我正在使用`ruby 1.9.3`.

我也试过这个

```
irb(main):035:0> driver.find_element(:css, ".ace_content").clear
Selenium::WebDriver::Error::UnknownError: Element must be user-editable in order to clear it.
    from [remote server] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:53:16.963

看起来当一个值输入到 textarea 时，它被应用到另一个 span。textarea 总是有一个空白值，这就解释了为什么`clear`似乎不起作用。

如果要清除文本，我认为您可能必须使用键盘快捷键 - ctrl+a 然后删除。尝试：

```
elem.send_keys [:control, 'a'], :delete 
```

# svn - 乌龟svn清理不起作用

> ID：14058533
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:17:40.460
> 
> 标签：svn, tortoisesvn, code-cleanup

尝试更新 svn 时显示“403 禁止错误”。我无法更新项目。进入每个文件夹时，我可以更新。但在一个文件夹中再次发生相同的错误。svn 有时会提示执行清理命令.但是当清理时给出。它表明 **清理不工作。**我已经看到锁定可能是问题。但注意已锁定。当添加的新文件正在更新时，它不会在我的本地副本中更新..

**我现在在新位置结账，我可以更新但 CLEAN UP 不起作用**

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:22:32.423

特权有问题。如果清理不起作用，您确定您拥有正确的凭据，您可以做的最好的事情是在一个新文件夹中检出项目并在这个新文件夹中检出每个文件。如果您在尝试提交文件时仍然收到错误，则服务器上出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:58:13.287

403 Forbidden 意味着您无权访问工作副本中引用的路径。您必须要求您的服务器管理员为您检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T07:07:13.970

将 svn 更新到下一个版本。现在一切正常

# iphone - Objective-C RabbitMQ 客户端未收到消息

> ID：14058538
> 
> 赞同：2
> 
> 时间：2012-12-27T17:18:00.773
> 
> 标签：iphone, ios, xcode, rabbitmq

我正在开发一个 iOS 应用程序并为 RabbitMQ [https://github.com/profmaad/librabbitmq-objc使用 profmaad 的 Objective-c 客户端](https://github.com/profmaad/librabbitmq-objc)

这是我用来建立连接并开始监听事件的代码：

```
-(void)establish{

   AMQPConnection *connection = [[AMQPConnection alloc] init];
   [connection connectToHost:<host> onPort:<port number>];
   [connection loginAsUser:<username> withPasswort:<password> onVHost:<vHost>];

   AMQPChannel *channel = [connection openChannel];
   AMQPQueue *queue = [[AMQPQueue alloc] initWithName:<queue name> onChannel:channel isPassive:NO isExclusive:NO isDurable:NO getsAutoDeleted:NO];

   AMQPConsumer *consumer = [[AMQPConsumer alloc] initForQueue:queue onChannel:channel useAcknowledgements:YES isExclusive:NO receiveLocalMessages:NO];
   AMQPConsumerThread *consumerThread = [[AMQPConsumerThread alloc] initWithConsumer:consumer];
   consumerThread.delegate = self;
}
-(void)amqpConsumerThreadReceivedNewMessage:(AMQPMessage *)theMessage
{
   NSLog(@"message = %@", theMessage);
   NSLog(@"message.body = %@", theMessage.body);
} 
```

问题是，从未调用过 amqpConsumerThreadReceivedNewMessage！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:33:15.233

您需要先启动消费者线程。

```
[consumerThread start]; 
```

# .net - NServiceBus 中的 IWantToRunAtStartup 和 IWantToRunWhenTheBusStarts 之间的区别？

> ID：14058540
> 
> 赞同：3
> 
> 时间：2012-12-27T17:18:16.717
> 
> 标签：.net, nservicebus, nservicebus3

我正在创建一个 NServicebus 托管进程，并希望初始化我的 IOC 容器并创建一个自托管 Web API 的实例。我试图了解实现 IWantToRunAtStartup 和 IWantToRunWhenTheBusStarts 接口之间的概念差异，因此我可以将初始化代码放在适当的位置。对于这些初始化，哪个接口会更好地实现？

我相信我会为 web api 使用 IWantToRunAtStartup，因为它具有进程关闭时需要的停止接口。但是既然接口说它是依赖注入的，那么 IOC 容器是否应该在 IWantToRunWhenTheBusStarts 或其他地方初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T05:20:54.977

在 V3 中使用：

```
IWantToRunWhenTheBusStarts 
```

在 V4 中，我们引入了一个新接口，称为：

```
IWantToRunWhenBusStartsAndStops 
```

这个新接口也在 v5 中使用。

# asp.net - 会话的最大长度是多少 ASP.net 4.0 会话 ID - 存储为 varchar 或 char 或 nvarchar？

> ID：14058551
> 
> 赞同：4
> 
> 时间：2012-12-27T17:19:04.103
> 
> 标签：asp.net, sql-server, session, asp.net-4.0, sessionid

我检查了我自己的服务器会话 ID，它们都是 24 个字符

我将每个登录的个人会话 ID 存储在我的 sql 服务器中

所以我的问题是

有一个专栏

`char(24)`存储访问者的 SessionId 是否足够？

ASP.NET 4.0

```
Session kept as : State Server tcpip=127.0.0.1:42424 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:25:51.717

撇开您是否应该这样做不谈，SessionIDManager 对会话 ID 实施 80 个字符的限制。

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.sessionidmaxlength(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.sessionidmaxlength(v=vs.100).aspx)

# c# - 使用 C++/CLI Wrapper 从 C# 调用 C++ 库

> ID：14058553
> 
> 赞同：1
> 
> 时间：2012-12-27T17:19:13.370
> 
> 标签：c#, c++-cli

我有一个 C++ 库，其标题如下所示：

```
void NotMyFun(double * a, int * b); 
```

该函数从 读取`a`并写入`b`。为了调用该库，我创建了一个 C++/CLI 包装器，其中定义了以下函数：

```
static void MyWrapperFun(double * a, int * b)
{
    NotMyFun(a,b);
} 
```

并且工作正常。例如，从 C# 代码中，我有两个托管数组，即`double[] ma`和`double[] mb`​​ ，其中`ma`已经保存了一些有意义的数据，并且`mb`在调用包装器时被 - 有意义地 - 填充。下面是调用包装函数的好方法吗？

```
unsafe
{
    fixed (double* pma = ma)
    {
        fixed (int* pmb = mb)
        {
            MyWrapperNS.MyWrapperClass.MyWrapperFun(pma,pmb);
        }
    }
} 
```

不安全的指针是一种快速的方法吗？在向/从 C++/CLI 包装器传递和检索时，是否涉及任何数据复制？或者指针已经指向 C# 数组中的连续内存空间？

此外，我需要在这里手动清理内存吗？如果指针与托管 C# 数组的内存相关联，我猜想它们之后会被正确地垃圾收集，但只是想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:51:52.123

我个人认为你把事情复杂化了。我会避免使用不安全的代码并跳过 C++/CLI 层。我会使用一个简单的 p/invoke 声明如下：

```
[DllImport(@"mylib.dll")]
static extern void NotMyFun(double[] a, int[] b); 
```

因为`double`and`int`是 blittable 类型，所以不需要复制。编组器只是在调用期间固定数组。

# python - 关于 Python 桌面开发的 Enthought Traits/TraitsUI 的意见

> ID：14058555
> 
> 赞同：12
> 
> 时间：2012-12-27T17:19:25.560
> 
> 标签：python, user-interface, traits, enthought, enaml

我正在寻找关于使用[Traits](http://code.enthought.com/projects/traits/) / [TraitsUI](http://code.enthought.com/projects/traits_ui/) / [enaml](http://docs.enthought.com/enaml/)进行 Python 桌面开发的意见和经验。

文档和 Enthought 支持看起来很有希望，所以我想知道开发人员使用这个堆栈的真实第一手经验。

更新：

我的主要兴趣是迁移旧的几个桌面数据库应用程序：CRUD/查询/报告。然后，我对数据访问层特别感兴趣：现在，我正在使用 PosgtreSQL 和 [peewee](http://peewee.readthedocs.org/en/latest/peewee/models.html#fields)（一个简约的 ORM）：

*   是否有对 SQL 数据库的内置或辅助项目支持？
*   如果是这样，是否有任何 ORM 支持？（我想 SqlAlchemy 是这里的“标准”）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T14:03:07.163

作为机械工程的博士后研究员，我第一次开始使用 Traits 和 TraitsUI 来构建 GUI。我之前构建 GUI 的经验是使用 MATLAB 的 GUIDE，相比之下，我发现 TraitsUI 非常简单易上手。TraitsUI 具有非常线性的进度与努力，对于我用它所做的有限的 GUI 构建，它已经绰绰有余了。

作为一名专业开发人员（完全披露：我在 Enthought 工作），我的观点发生了一些变化。首先，重要的是要区分 Traits（输入、验证、通知和依赖系统）和 TraitsUI（内置并基于 Traits 的 GUI 层）。我一直在使用 Traits，它支撑着我编写的很多代码。特别是对于它的依赖和通知实用程序，我认为它是无价的。

但是，很快就会开始遇到 TraitsUI 对应用程序构建的限制。正如我之前提到的，TraitsUI 对于中小型应用程序来说已经足够了，但是创建更复杂的布局变得很困难，我们花了很多时间与 TraitsUI 搏斗，以生成更大、更复杂和更灵活的应用程序界面。

这导致了 Enaml 或多或少的空白板开发。Enaml 在其核心使用基于约束的布局系统并与 Traits 集成。从一开始，它就解决了 TraitsUI 的布局弱点。我们每个使用过这两种系统的人都更喜欢 Enaml，我们认为它是未来 GUI 构建的首选工具。布局 GUI 的控制水平和灵活性非常出色——在 repo 中有一些漂亮的演示可供查看。

也就是说，初始学习曲线略微（但只是略微）陡峭，因为从一开始就掌握某些概念（例如 MVC 分离）是有帮助的。经验丰富的开发人员会立即看到其中的价值，但对于具有科学或工程背景的新用户来说，这可能是一个更大的障碍。不过，这只是一个小障碍，很容易清除。此外，虽然功能集已接近完成，但仍有一些漏洞。在填充它们方面取得了稳步进展，但从技术上讲，Enaml 仍处于测试阶段。

总的来说，如果你想决定学习哪个工具集，我的建议是学习 Enaml。这就是我们现在和将来会使用的。

[更新 - 2018 年 1 月]

由于此答案继续获得意见并引发对话，因此该意见的更新早就应该更新了，第一个答案可以追溯到 2012 年底。Enaml 主要是一个主要开发人员的工作。当他在 2013 年初离开 Enthought 时，他分叉了 enaml 存储库并开始在[核酸/enaml](https://github.com/nucleic/enaml)存储库中开发它。我们（Enthought）决定不开发一个竞争分支，并引入了一个瘦接口库[enthought/traits-enaml](https://github.com/enthought/traits-enaml)以提供与`nucleic/enaml`. 大约在同一时间，我们还引入了[enthought/qt_binder](https://github.com/enthought/qt_binder)以提供对 Traits/TraitsUI 框架中低级 Qt 小部件的轻松访问，该框架提供了与 Enaml 提供的大部分相同的布局灵活性。

现在 Traits/TraitsUI 是我们用于大多数应用程序 GUI 构建的堆栈。我们继续在 Python 2 和 3 中维护和开发 Enthought 工具套件（Chaco、Kiva、Envisage 等）中的 Traits、TraitsUI 和其他库，它们继续满足我们的需求，特别是在[enthought/envisage](https://github.com/enthought/envisage)可插拔方面 -应用框架。

我修改后的建议是，如果你想用 Python 构建一个富客户端应用程序（不是 Web 应用程序），我会说学习 Traits 和 TraitsUI。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T03:23:22.493

免责声明：我在 Enthought 担任开发人员和培训师。

要回答问题的第二部分，Traits 中没有任何 ORM 或数据库支持，因此您必须自己动手。这主要是因为 Traits 是为了支持科学应用程序开发而不是企业应用程序开发而开发的（但这就是 Traits*确实*支持 NumPy 的原因）。

不幸的是，大多数 ORM（例如 SQLAlchemy、Django 的 ORM，我也看到了 Peewee）和 Traits 都使用声明式接口和元类来使定义对象结构变得非常容易，但缺点是不一起玩得很好。如果你想避免一个显式的桥接层，那么你需要对 Traits 和 ORM 有一个扎实的理解。

如果我正在开发这种应用程序，我最终可能会避免使用 ORM 并直接从特征写入 DBAPI 层，可能为此目的定义一些自定义特征类型（例如，`Property`特征工厂，其`fget`并`fset`执行数据库查询）。

综上所述，承认我偏爱 Enthought 的技术，有一些工具可能更适合将简单的 CRUD UI 放在数据库之上。一种可能性是[Dabo](http://dabodev.com/)，但还有其他可能性，例如[Camelot](http://www.python-camelot.com/)。

# java - 从资源中获取位图

> ID：14058561
> 
> 赞同：0
> 
> 时间：2012-12-27T17:19:38.417
> 
> 标签：java, android, nullpointerexception

我有这段代码可以将项目添加到 ArrayList：

```
 public Questions(int questionMode) {
            getID = new Random();
            allQuestions = new ArrayList<Question>();

            allQuestions.add(new Question(2, 0, 0, 2, 5, (BitmapFactory.decodeResource(getResources(), R.drawable.flag_dutch)), "The Netherlands", true)); //<-- error at this line
        } 
```

我已经在类的构造函数中引入了 allQuestions，但是当我运行代码时，我得到了 NullPointerException。这是我的日志：

```
12-27 18:14:25.335: E/InputEventReceiver(3583): Exception dispatching input event.
12-27 18:14:25.335: E/MessageQueue-JNI(3583): Exception in MessageQueue callback: handleReceiveCallback
12-27 18:14:25.340: E/MessageQueue-JNI(3583): java.lang.NullPointerException
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.obattech.twoplayergame.Questions.createFlagQuestions(Questions.java:80)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.obattech.twoplayergame.Questions.<init>(Questions.java:54)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.obattech.twoplayergame.games.GuessFlag.startCountDown(GuessFlag.java:199)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.obattech.twoplayergame.games.GuessFlag$1.onTouch(GuessFlag.java:75)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.View.dispatchTouchEvent(View.java:7332)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2115)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1468)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.app.Activity.dispatchTouchEvent(Activity.java:2487)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2063)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.View.dispatchPointerEvent(View.java:7520)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3376)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3308)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4402)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4380)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4484)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.os.MessageQueue.nativePollOnce(Native Method)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.os.MessageQueue.next(MessageQueue.java:125)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.os.Looper.loop(Looper.java:124)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at android.app.ActivityThread.main(ActivityThread.java:4898)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at java.lang.reflect.Method.invokeNative(Native Method)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at java.lang.reflect.Method.invoke(Method.java:511)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-27 18:14:25.340: E/MessageQueue-JNI(3583):   at dalvik.system.NativeStart.main(Native Method)
12-27 18:14:25.340: D/AndroidRuntime(3583): Shutting down VM
12-27 18:14:25.340: W/dalvikvm(3583): threadid=1: thread exiting with uncaught exception (group=0x410e72a0)
12-27 18:14:25.350: E/AndroidRuntime(3583): FATAL EXCEPTION: main
12-27 18:14:25.350: E/AndroidRuntime(3583): java.lang.NullPointerException
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.obattech.twoplayergame.Questions.createFlagQuestions(Questions.java:80)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.obattech.twoplayergame.Questions.<init>(Questions.java:54)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.obattech.twoplayergame.games.GuessFlag.startCountDown(GuessFlag.java:199)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.obattech.twoplayergame.games.GuessFlag$1.onTouch(GuessFlag.java:75)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.View.dispatchTouchEvent(View.java:7332)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2115)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1468)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.app.Activity.dispatchTouchEvent(Activity.java:2487)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2063)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.View.dispatchPointerEvent(View.java:7520)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3376)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3308)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4402)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4380)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4484)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.os.MessageQueue.nativePollOnce(Native Method)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.os.MessageQueue.next(MessageQueue.java:125)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.os.Looper.loop(Looper.java:124)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-27 18:14:25.350: E/AndroidRuntime(3583):     at dalvik.system.NativeStart.main(Native Method) 
```

我认为这与从资源中获取位图有关，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:23:48.527

我假设`Questions`是你的`Activity`，因为你用它作为参考`getResources()`。

在这种情况下，你不能把东西放在构造函数中（除了初始化变量）并期望它们工作；的`Activity`资源此时尚未准备好使用。改用[`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getID = new Random();
        allQuestions = new ArrayList<Question>();

        allQuestions.add(new Question(2, 0, 0, 2, 5, (BitmapFactory.decodeResource(getResources(), R.drawable.flag_dutch)), "The Netherlands", true)); //<-- error at this line
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:25:00.517

您在这里有一个 NULL 指针：Questions.java:80

您需要包含此代码才能真正了解问题所在。这在 StackTrace 中报告（从顶部开始，向下阅读，直到看到引用的代码）。

# java - NetBeans 在设计视图中删除自动生成的动作侦听器

> ID：14058562
> 
> 赞同：3
> 
> 时间：2012-12-27T17:19:40.250
> 
> 标签：java, netbeans, view, actionlistener

我正在使用 NetBeans 设计视图。我向要删除的*JMenuItem*添加了一个动作侦听器。我似乎做不到，因为生成的代码在灰色区域，IDE 不允许我编辑它。我也无法通过属性窗口将其删除。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:56:29.603

您可以更改受保护的代码，请参见此处[http://wiki.netbeans.org/FaqFormEditingGuardedBlocks](http://wiki.netbeans.org/FaqFormEditingGuardedBlocks)

但我认为你不应该。

单击 JMenuItem，转到属性窗格。

在“属性”窗格中，转到“事件”选项卡并从那里删除操作侦听器。如果你什么都不给，它将显示`"<none>"`为事件侦听器。

现在将不会调用动作侦听器函数，尽管代码仍然存在。

但是，如果这些死代码行困扰着您，那么您可以评论它们，或者删除 JMenuItem 并重新添加。这将完全删除代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:58:22.460

**选择 Design 视图，然后在Navigator**窗格中找到您的 JMenuItem 。它默认位于左侧。如果不存在，请在菜单中选择：

> 窗口 => 导航 => 导航器

或者，也可以单击 Ctrl+7。
当您在 Navigator 窗格中找到您的 JMenuItem 时，选择它，右键单击并选择**Delete**。

* * *

更新

当然，通过执行上述操作，您将摆脱 JMenuItem 本身。
如果您想摆脱动作侦听器本身，`<none>`请按照@nitgeek 的建议选择所需的动作。

# java - Java使用swing创建数字时钟

> ID：14058563
> 
> 赞同：-5
> 
> 时间：2012-12-27T17:19:41.337
> 
> 标签：java, swing, clock, digital

我正在做一些项目，其中的一部分——数字时钟。我希望那个时间像：17:3:5 会显示为 17:03:05。我的代码在下面（工作）。但是它有一些问题：我不确定我是否使用了正确的计时器，而且我的程序看起来很复杂，也许你可以帮助简化代码或提供一些想法如何以简单的方式编写它，谢谢。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Calendar;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.WindowConstants;

public class SimpleDigitalClock {

    public static void main(String[] args) {

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        DigitalClock myClock = new DigitalClock();
        f.add(myClock);
        f.pack();
        f.setVisible(true);
    }

    static class DigitalClock extends JPanel {

        String stringTime;
        int hour, minute, second;

        String correctionHour = "";
        String correctionMinute = "";
        String correctionSecond = "";

        public void setStringTime(String xyz) {
            this.stringTime = xyz;
        }

        public int findMinimumBetweenTwoNumbers(int a, int b) {
            return (a <= b) ? a : b;
        }

        DigitalClock() {

            Timer t1 = new Timer(1000, new ActionListener() {
                public void actionPerformed(ActionEvent e) {

                    repaint();
                }
            });
            t1.start();
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            Calendar now = Calendar.getInstance();
            hour = now.get(Calendar.HOUR_OF_DAY);
            minute = now.get(Calendar.MINUTE);
            second = now.get(Calendar.SECOND);

            if (hour < 10) {
                this.correctionHour = "0";
            }
            if (hour >= 10) {
                this.correctionHour = "";
            }

            if (minute < 10) {
                this.correctionMinute = "0";
            }
            if (minute >= 10) {
                this.correctionMinute = "";
            }

            if (second < 10) {
                this.correctionSecond = "0";
            }
            if (second >= 10) {
                this.correctionSecond = "";
            }
            setStringTime(correctionHour + hour + ":" + correctionMinute+ minute + ":" + correctionSecond + second);
            g.setColor(Color.BLACK);
            int length = findMinimumBetweenTwoNumbers(this.getWidth(),this.getHeight());
            Font myFont = new Font("SansSerif", Font.PLAIN, length / 5);
            g.setFont(myFont);
            g.drawString(stringTime, (int) length/6, length/2);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:26:12.090

格式化日期是`SimpleDateFormat`设计的目的：

```
DateFormat format = new SimpleDateFormat("hh:mm:ss");
String stringTime = format.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:44:15.850

其他答案已评论您的代码的其他部分。

要居中显示，您可以使用以下绘图代码。

```
 g.setColor(Color.BLACK);
        int length = Math.min(this.getWidth(), this.getHeight());
        Font myFont = new Font("SansSerif", Font.PLAIN, length / 5);
        g.setFont(myFont);
        Graphics2D g2d = (Graphics2D) g;
        FontMetrics fm = g2d.getFontMetrics();
        Rectangle2D r = fm.getStringBounds(stringTime, g2d);
        int x = (this.getWidth() - (int) r.getWidth()) / 2;
        int y = this.getHeight() / 2;
        g.drawString(stringTime, x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:30:11.207

完整的修改类：

```
static class DigitalClock extends JPanel {

    String stringTime;

    public void setStringTime(String xyz) {
        this.stringTime = xyz;
    }

    public int findMinimumBetweenTwoNumbers(int a, int b) {
        return (a <= b) ? a : b;
    }

    DigitalClock() {

        Timer t1 = new Timer(1000, new ActionListener() {
            public void actionPerformed(ActionEvent e) {

                repaint();
            }
        });
        t1.start();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Calendar now = Calendar.getInstance();
        int hour = now.get(Calendar.HOUR_OF_DAY);
        int minute = now.get(Calendar.MINUTE);
        int second = now.get(Calendar.SECOND);

        String correctionHour = (hour < 10) ? "0" : "":
        String correctionMinute = (minute < 10) ? "0" : "";
        String correctionSecond = (second < 10) ? "0" : "";
        setStringTime(correctionHour + hour + ":" + correctionMinute+ minute + ":" + correctionSecond + second);
        g.setColor(Color.BLACK);
        int length = findMinimumBetweenTwoNumbers(this.getWidth(),this.getHeight());
        Font myFont = new Font("SansSerif", Font.PLAIN, length / 5);
        g.setFont(myFont);
        g.drawString(stringTime, (int) length/6, length/2);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);
    }
} 
```

}

# cassandra - 如何将参数传递给 WSO2 DSS 中的 Cassandra CQL 查询

> ID：14058564
> 
> 赞同：2
> 
> 时间：2012-12-27T17:19:45.913
> 
> 标签：cassandra, wso2, cql, wso2dss

我一直在尝试让参数化的 CQL 查询在 WSO2 DSS 中工作。不幸的是，我没有成功。当我遇到紧急问题时，请尽快感谢您的帮助。

以下是 DBS 文件内容

```
<data name="CassParamTest">
   <config id="CassDs">
      <property name="org.wso2.ws.dataservice.protocol">jdbc:cassandra://localhost:9161/oneDataAux</property>
      <property name="org.wso2.ws.dataservice.driver">org.apache.cassandra.cql.jdbc.CassandraDriver</property>
   </config>
   <query id="getEmps" useConfig="CassDs">
      <sql>select employeeNumber from EMPLOYEES where employeeNumber = :employeeNumber</sql>
      <param name="employeeNumber" sqlType="STRING" />
   </query>
   <operation name="getEmps">
      <call-query href="getEmps">
         <with-param name="employeeNumber" query-param="employeeNumber" />
      </call-query>
   </operation>
</data> 
```

实际上参数employeeNumber 是一个数字。但我不断收到错误。所以我也尝试了String，但无济于事。我也试过？而不是命名参数

这是我得到的错误。

**当参数为字符串时，**

```
<soapenv:Fault xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:axis2ns12="http://ws.wso2.org/dataservice">
   <soapenv:Code>
      <soapenv:Value>axis2ns12:DATABASE_ERROR</soapenv:Value>
   </soapenv:Code>
   <soapenv:Reason>
      <soapenv:Text xml:lang="en-US" xmlns:xml="http://www.w3.org/XML/1998/namespace">DS Fault Message: Error in DS non result invoke.
DS Code: DATABASE_ERROR
Nested Exception:-
javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: CassParamTest
Location: /CassParamTest.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: getEmps
Current Params: {employeeNumber=1002}
Nested Exception:-
java.sql.SQLNonTransientException: No Update Count was returned from the CQL statement passed in an 'executeUpdate()' method

</soapenv:Text>
   </soapenv:Reason>
   <soapenv:Detail>
      <axis2ns11:DataServiceFault xmlns:axis2ns11="http://ws.wso2.org/dataservice">DS Fault Message: Error in DS non result invoke.
DS Code: DATABASE_ERROR
Nested Exception:-
javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: CassParamTest
Location: /CassParamTest.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: getEmps
Current Params: {employeeNumber=1002}
Nested Exception:-
java.sql.SQLNonTransientException: No Update Count was returned from the CQL statement passed in an 'executeUpdate()' method

</axis2ns11:DataServiceFault>
   </soapenv:Detail>
</soapenv:Fault> 
```

**当参数为数字时，**

```
DS Code: DATABASE_ERROR
Nested Exception:-
javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: CassParamTest
Location: /CassParamTest.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: getEmps
Current Params: {employeeNumber=1002}
Nested Exception:-
java.sql.SQLException: Mismatched types: java.math.BigInteger cannot be cast to java.lang.String 
```

感谢您的时间和您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T03:32:57.833

我找到了解决方案。我错过了输出映射。似乎如果没有输出映射，DSS 会将命令作为更新命令（请参阅[http://docs.wso2.org/wiki/display/DSS301/Cassandra](http://docs.wso2.org/wiki/display/DSS301/Cassandra)）

# regex - 正则表达式，查找网址的最后一部分

> ID：14058566
> 
> 赞同：0
> 
> 时间：2012-12-27T17:20:00.110
> 
> 标签：regex, preg-match

让我们取一个像这样的网址

```
www.url.com/some_thing/random_numbers_letters_everything_possible/set_of_random_characters_everything_possible.randomextension 
```

如果我想捕获“set_of_random_characters_everything_possible.randomextension”会`[^/\n]+$`起作用吗？（解决方案取自[Trying to get the last part of a URL with Regex](https://stackoverflow.com/questions/13369961/trying-to-get-the-last-part-of-a-url-with-regex)）

我的问题是：“\n”部分是什么意思（即使没有它也可以工作）？而且，如果 url 具有最随意的字符组合“/”，它是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:52:40.183

首先，请注意这`www.url.com/some_thing/random_numbers_letters_everything_possible/set_of_random_characters_everything_possible.randomextension`不是一个没有`http://`前面那样的方案的 URL。

其次，不要自己解析 URL。您使用什么语言？您可能不想使用正则表达式，而是使用已经编写、测试和调试过的现有模块。

如果您使用的是 PHP，则需要该[`parse_url`](http://php.net/manual/en/function.parse-url.php)功能。

如果您使用 Perl，则需要该[`URI`](http://search.cpan.org/dist/URI/)模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:26:56.063

看看这个解释：[http ://regex101.com/r/jG2jN7](http://regex101.com/r/jG2jN7)

基本上这里发生的是“匹配除斜线和换行符之外的任何字符，无限到 1 次”。人们插入`\r\n`否定字符类，因为在某些程序中，否定字符类将匹配除已插入的内容之外的任何内容。`[^/]`在这种情况下匹配新行也是如此。

例如，如果您的文本中有换行符，您将无法获取换行符之后的数据。

但是，在您的情况下并非如此。您需要`(PCRE_DOTALL)`为此行为使用 s 标志。

TL;DR：您可以留下或删除它，这无关紧要。

询问是否有任何不清楚的地方，或者我解释得有点草率。

# php - 错误 500 内部服务器错误 - apache2 - 论坛 ipb

> ID：14058567
> 
> 赞同：0
> 
> 时间：2012-12-27T17:20:02.050
> 
> 标签：php, apache, http, forum

我知道有很多关于这个错误的话题，但还没有找到解决方案......我在 linux 和 apache（2.0）上重新安装了新版本的 php（5.4.9），全部由我构建。

我安装了 wordpress，它运行良好，但是当我尝试登录或打开我的旧论坛（invision 电源板）时出现错误：错误 HTTP 500（内部服务器错误）。

这个论坛的目录是/forum 文件夹的权限是：0755 我的根目录下的.htaccess 是

```
DirectoryIndex index.php
RewriteEngine On
RewriteRule ^old/(.*)$ /$1 [R=301,L]
RewriteBase / 
```

我的 httpd conf 目录是

```
<Directory />
#Options FollowSymLinks
#Options Indexes FollowSymLinks Includes ExecCGI
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

Mod rewrite 与 wordpress 完美配合，唯一的问题是这个旧论坛（保存了许多数据），有什么解决方案可以解决这个问题吗？

# javascript - 为什么 HTML 按钮的“属性”窗口中没有“事件”按钮？

> ID：14058570
> 
> 赞同：2
> 
> 时间：2012-12-27T17:20:09.417
> 
> 标签：javascript, asp.net, .net, html, visual-studio-2012

我正在使用 Visual Studio 2012，我希望它`onclick`为 HTML 按钮生成一个简单的 JavaScript 事件。我在设计器中选择按钮，转到属性，但没有用于事件的闪电按钮。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:27:30.033

使用 jQuery

```
$("#btnID").click(function() {
 ///your actions
}); 
```

[在http://api.jquery.com/click/](http://api.jquery.com/click/)上阅读更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:44:19.307

该事件不存在，因为 HtmlButton 类只是一个包装器，因此渲染器可以创建 HTML 输出。

基本的 ASP.NET 等效项（带有事件）将是 System.Web.UI.WebControls.Button。

现在，所有 System.Web.UI.HtmlControls 都接受 AddAttribute 方法，这将允许您以编程方式指定控件的行为。例如，假设您的 HTML 页面上有以下代码：

```
<input type='Button' ID='btn1'> 
```

并且您想添加一个 javascript 事件。首先，使其可以被服务器端代码访问：

```
<input type='Button' ID='btn1' runat='server'> 
```

然后，在代码隐藏中，添加内容：

```
this.btn1.AddAttribute("onclick", "doSomething();"); 
```

你去吧。希望这对你有用！

# node.js - 使用 NPM 在私有 LAN 上安装 Node.js 模块？

> ID：14058574
> 
> 赞同：2
> 
> 时间：2012-12-27T17:20:20.223
> 
> 标签：node.js, installation, npm

我正在尝试在未连接到网络的 LAN 上安装 node.js。我已经安装了 node.js 没有任何问题，但似乎 npm 想上网，

```
 http GET [https://registry.npmjs.org/moment](https://registry.npmjs.org/moment) 
```

所以我无法安装我需要的模块。

这是生成的 npm-debug 文件：

```

0 info it worked if it ends with ok
1 verbose cli [ 'C:\\Program Files\\nodejs\\\\node.exe',
1 verbose cli   'C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
1 verbose cli   'install',
1 verbose cli   'moment',
1 verbose cli   '-g' ]
2 info using npm@1.1.69
3 info using node@v0.8.16
4 verbose node symlink C:\Program Files\nodejs\\node.exe
5 verbose read json C:\Documents and Settings\User.PALS-DADS\Application Data\npm\package.json
6 verbose read json C:\Documents and Settings\User.PALS-DADS\Application Data\npm\package.json
7 verbose cache add [ 'moment', null ]
8 silly cache add name=undefined spec="moment" args=["moment",null]
9 verbose parsed url { pathname: 'moment', path: 'moment', href: 'moment' }
10 silly lockFile b56def36-moment moment
11 verbose lock moment C:\Documents and Settings\User.PALS-DADS\Application Data\npm-cache\b56def36-moment.lock
12 silly lockFile b56def36-moment moment
13 verbose addNamed [ 'moment', '' ]
14 verbose addNamed [ null, '' ]
15 silly lockFile 42aa250a-moment moment@
16 verbose lock moment@ C:\Documents and Settings\User.PALS-DADS\Application Data\npm-cache\42aa250a-moment.lock
17 silly addNameRange { name: 'moment', range: '', hasData: false }
18 verbose url raw moment
19 verbose url resolving [ 'https://registry.npmjs.org/', './moment' ]
20 verbose url resolved https://registry.npmjs.org/moment
21 info trying registry request attempt 1 at 16:47:42
22 http GET https://registry.npmjs.org/moment
23 info retry will retry, error on last attempt: Error: getaddrinfo ENOENT
24 info trying registry request attempt 2 at 16:47:52
25 http GET https://registry.npmjs.org/moment
26 info retry will retry, error on last attempt: Error: getaddrinfo ENOENT
27 info trying registry request attempt 3 at 16:48:52
28 http GET https://registry.npmjs.org/moment
29 silly lockFile 42aa250a-moment moment@
30 error Error: getaddrinfo ENOENT
30 error     at errnoException (dns.js:31:11)
30 error     at Object.onanswer [as oncomplete] (dns.js:123:16)
31 error If you need help, you may report this log at:
31 error     
31 error or email it to:
31 error     
32 error System Windows_NT 5.1.2600
33 error command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "moment" "-g"
34 error cwd C:\Documents and Settings\User.PALS-DADS\Desktop
35 error node -v v0.8.16
36 error npm -v 1.1.69
37 error syscall getaddrinfo
38 error code ENOTFOUND
39 error errno ENOTFOUND
40 verbose exit [ 1, true ]

```

如何在不连接网络的情况下安装模块？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:35:19.437

如果您查看[文档](https://npmjs.org/doc/install.html)，您会发现您可以通过简单地将文件系统路径或 URL 传递给包含您要安装的包的[tarball来安装包。](http://registry.npmjs.org/moment/-/moment-1.7.2.tgz)

```
npm install http://server.on.lan/moment.tgz 
```

当然，如果有问题的包指定了任何依赖项，npm 将尝试从 Web 获取它们。moment 没有任何内容，因此您应该可以下载 tarball 并安装它。

然而，如果你想安装其他有依赖关系的包，你最好在你的局域网上[设置一个 npm 注册表镜像。](https://blog.caurea.org/2012/01/31/local-npm-registry-mirror.html)

# python - 如何在python中使用libtorrent的udp协议跟踪器协议

> ID：14058585
> 
> 赞同：0
> 
> 时间：2012-12-27T17:21:22.297
> 
> 标签：python, udp, libtorrent

我已经浏览了以下链接[http://www.rasterbar.com/products/libtorrent/udp_tracker_protocol.html](http://www.rasterbar.com/products/libtorrent/udp_tracker_protocol.html)但我无法理解我们需要调用哪些函数才能使用 udp 跟踪器的协议发送数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:07:35.257

这是一个跟踪器协议。客户端无需采取任何操作即可使用它。您只需要在其跟踪器列表中添加一个具有 udp:// URL 的种子。libtorrent 将自动联系跟踪器，无论它们是 http 还是 udp。

# coldfusion - 根据下拉框过滤 CFGRID

> ID：14058586
> 
> 赞同：1
> 
> 时间：2012-12-27T17:21:26.130
> 
> 标签：coldfusion, cfgrid

我是 ColdFusion 的新手，我正在努力弄清楚如何做一些我可以在 MS Access 中轻松完成的简单功能。

这是我想做的事情：我想`cfgrid`根据下拉框过滤其数据。然后根据另一个下拉框（如果需要）进一步过滤该数据。

任何帮助将不胜感激。

例子：

```
 <html>

<!---Grid Source---> 
<cfquery name="getArtists" datasource="cfartgallery">
    SELECT A.*
    FROM ARTISTS A
    WHERE
        1=1
    <cfif structKeyExists(form,'dropdownbox1')>
      AND STATE like <cfqueryparam value="%#dropdownbox1#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
      <cfif structKeyExists(form,'dropdownbox2')>
      AND LASTNAME like <cfqueryparam value="%#dropdownbox2#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
      </cfif> <!--- DropdownBox 2 --->
    </cfif> <!--- DropdownBox 1 --->
    ORDER BY A.LASTNAME, A.FIRSTNAME
</cfquery>

<head>
</head>
<body style="padding:20px;">

<cfform>

<cfformgroup type="horizontal" style="backgroundAlpha:0;font-size:12;color:##000;">
    <cfformgroup type="vertical" width="100">

<!---Query for STATE--->
<cfquery name="getState" datasource="cfartgallery">
    SELECT A.STATE   
    FROM ARTISTS A
</cfquery>

<!---STATE Dropdown---> 
<cfselect name="dropdownbox1" query="getState" queryposition="below" 
    label="State:"  value="STATE" display="STATE"  
    required="no" 
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>

    </cfformgroup>
    <cfformgroup type="vertical" width="100">

<!---Query for LastName--->
<cfquery name="getLast" datasource="cfartgallery">
    SELECT A.LASTNAME   
    FROM ARTISTS A
</cfquery>

<!---LastName Dropdown---> 
<cfselect name="dropdownbox2" query="getLast" queryposition="below" 
    label="Last Name:"  value="LASTNAME" display="LASTNAME"  
    required="no" 
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>
    </cfformgroup>
    </cfformgroup>

     <cfformitem type="spacer" height="20"/>

<!---Grid---> 
        <cfgrid name="myGrid" query="getArtists" format="html">
            <cfgridcolumn name="ARTISTID" header="ARTISTID" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FIRSTNAME" header="FIRSTNAME" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="LASTNAME" header="LASTNAME" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="ADDRESS" header="ADDRESS" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="CITY" header="CITY" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="STATE" header="STATE" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="POSTALCODE" header="POSTALCODE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="EMAIL" header="EMAIL" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="PHONE" header="PHONE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FAX" header="FAX" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="THEPASSWORD" header="THEPASSWORD" headeralign="center" dataalign="center"/>
         </cfgrid>

    </cfform>

</body>
</html> 
```

***更新***

Ben Koshy 给我的代码就像一个魅力问题一样工作，但是当我将表单更改为 format="flash" 时，它给了我一个错误“没有名称为 'submit' 的方法”。我需要做什么来解决这个问题？

谢谢约翰尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:02:09.873

使用 CFGRID 所需的大部分工作都在为电网供电的 CFQUERY 端。在这里，我们只需检查下拉框表单字段名称的存在，然后编写一些额外的 SQL 来根据该条件进行过滤。

```
<cfquery name="getPeople" datasource="myDSN">
  SELECT
    column1, column2
  FROM
    People
  WHERE
    1=1
    <cfif structKeyExists(form,'dropdownbox1')>
      AND column1 like <cfqueryparam value="%#dropdownbox1#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
      <cfif structKeyExists(form,'dropdownbox2')>
      AND column1 like <cfqueryparam value="%#dropdownbox2#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
      </cfif> <!--- DropdownBox 2 --->
    </cfif> <!--- DropdownBox 1 --->
</cfquery>

<cfgrid ... > 
```

更新：这是使用您的示例代码的示例。

```
<html>
<cfparam name="form.state" default="">
<cfparam name="form.lastname" default="">

<!---Grid Source---> 
<cfquery name="getArtists" datasource="cfartgallery">
    SELECT A.*
    FROM ARTISTS A
    WHERE
        1=1
    AND STATE like <cfqueryparam value="%#form.state#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
    AND LASTNAME like <cfqueryparam value="%#form.lastname#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
    ORDER BY A.LASTNAME, A.FIRSTNAME
</cfquery>

<head>
</head>
<body style="padding:20px;">

<cfform action="index.cfm" method="post">

<cfformgroup type="horizontal" style="backgroundAlpha:0;font-size:12;color:##000;">
    <cfformgroup type="vertical" width="100">

<!---Query for STATE--->
<cfquery name="getState" datasource="cfartgallery">
    SELECT A.STATE   
    FROM ARTISTS A
    WHERE
        1=1
        AND LASTNAME like <cfqueryparam value="%#form.lastname#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
</cfquery>

<!---STATE Dropdown---> 
<cfselect name="state" query="getState" queryposition="below" 
    label="State:"
    value="STATE"
    display="STATE"  
    required="no"
    selected="#form.state#"
    onchange="submit();"
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>

    </cfformgroup>
    <cfformgroup type="vertical" width="100">

<!---Query for LastName--->
<cfquery name="getLast" datasource="cfartgallery">
    SELECT A.LASTNAME   
    FROM ARTISTS A
    WHERE
        1=1
        AND STATE like <cfqueryparam value="%#form.state#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
</cfquery>

<!---LastName Dropdown---> 
<cfselect name="lastname" query="getLast" queryposition="below" 
    label="Last Name:"  value="LASTNAME" display="LASTNAME"  
    selected="#form.lastname#"
    required="no" 
    onchange="submit();"
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>

    <a href="index.cfm"><input type="button" value="Reset"></a>
    </cfformgroup>
    </cfformgroup>

     <cfformitem type="spacer" height="20"/>

<!---Grid---> 
        <cfgrid name="myGrid" query="getArtists" format="html">
            <cfgridcolumn name="ARTISTID" header="ARTISTID" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FIRSTNAME" header="FIRSTNAME" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="LASTNAME" header="LASTNAME" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="ADDRESS" header="ADDRESS" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="CITY" header="CITY" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="STATE" header="STATE" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="POSTALCODE" header="POSTALCODE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="EMAIL" header="EMAIL" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="PHONE" header="PHONE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FAX" header="FAX" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="THEPASSWORD" header="THEPASSWORD" headeralign="center" dataalign="center"/>
         </cfgrid>

    </cfform>

</body>
</html> 
```

# machine-learning - 在 Rapid Miner 中为数值属性添加常量值

> ID：14058589
> 
> 赞同：2
> 
> 时间：2012-12-27T17:21:33.267
> 
> 标签：machine-learning, data-mining, rapidminer

我正在使用 rapidminer，我有一个带有数字字段（属性）的数据集，我想简单地为这个特性的所有值添加一个常量（例如 1），

我该怎么做？到目前为止，我还没有发现任何简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:58:05.013

使用数据转换 > 属性集缩减... > 生成 > 生成属性

使用函数创建新列，将旧列的值加1

如果您的原始属性是“X1”，那么表达式应该类似于“X1 + 1”

视频在这里：

[http://vancouverdata.blogspot.ca/2011/08/rapidminer-etl-transforming-attributes.html](http://vancouverdata.blogspot.ca/2011/08/rapidminer-etl-transforming-attributes.html)

# html - 无论窗口大小如何定位元素

> ID：14058590
> 
> 赞同：0
> 
> 时间：2012-12-27T17:21:41.533
> 
> 标签：html, css, margin

无论窗口大小如何，我在放置一个边距为 2% 的元素时都遇到了一些问题。我可以使用基本边距 (%) 移动元素，但是一旦我调整窗口大小，元素就不会随之移动。

我只希望它在所有窗口大小中始终位于窗口右侧的 2%！

有什么建议么？

现在我只是尝试添加一些文本和以下 CSS：

```
 position:absolute;
text-decoration:underline;
text-align:right;
right:0;
width:15em;
top:-3%;
margin-right:1%;
color:#ffffff;
font-size:0.65em; 
```

这也不会停留在右边！我可以用边距移动它，但只能“向左”。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:23:23.750

为什么不绝对*定位*元素*？*

```
​#myDiv {
    position: absolute;
    right: 2%;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:48:05.910

这不行吗？不要乱用绝对！:P

```
float: right;
margin-right: 2%; 
```

[http://jsfiddle.net/8qkXj/1/](http://jsfiddle.net/8qkXj/1/)

# c++ - 调用函数对象时如何保证参数评估的顺序？

> ID：14058592
> 
> 赞同：19
> 
> 时间：2012-12-27T17:21:46.623
> 
> 标签：c++, c++11

[关于在使用 std::make_tuple 时如何避免构造函数的未定义执行顺序](https://stackoverflow.com/q/14056000/1120273)的问题的答案引发了一次讨论，在该讨论中我了解到可以保证构造函数的参数评估顺序：Using *abraced-init-list* the order保证从左到右：

```
T{ a, b, c } 
```

表达式`a`、`b`和`c`以给定的顺序计算。情况就是这样，即使该类型`T`只定义了一个普通的构造函数。

显然，并非所有被调用的东西都是构造函数，有时在调用函数时保证评估顺序会很好，但是没有像*大括号参数列表*这样的东西来调用具有定义的参数评估顺序的函数。问题变成了：对构造函数的保证是否可以用来构建一个函数调用工具（“ `function_apply()`”），并为参数的评估提供排序保证？要求调用函数对象是可以接受的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T17:25:16.087

像这样一个愚蠢的包装类呢：

```
struct OrderedCall
{
    template <typename F, typename ...Args>
    OrderedCall(F && f, Args &&... args)
    {
        std::forward<F>(f)(std::forward<Args>(args)...);
    }
}; 
```

用法：

```
void foo(int, char, bool);

OrderedCall{foo, 5, 'x', false}; 
```

如果你想要一个返回值，你可以通过引用传递它（你需要一些特征来提取返回类型），或者将它存储在对象中，以获得如下接口：

```
auto x = OrderedCall{foo, 5, 'x', false}.get_result(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T18:02:14.077

我提出的解决方案是`std::tuple<...>`将参数放在一起，而不是使用该对象的元素调用函数对象。好处是可以推导出返回类型。实际的具体逻辑是这样的：

```
template <typename F, typename T, int... I>
auto function_apply(F&& f, T&& t, indices<I...> const*)
    -> decltype(f(std::get<I>(t)...)) {
    f(std::get<I>(t)...);
}

template <typename F, typename T>
auto function_apply(F&& f, T&& t)
    -> decltype(function_apply(std::forward<F>(f), std::forward<T>(t),
                               make_indices<T>())) {
    function_apply(std::forward<F>(f), std::forward<T>(t),
                   make_indices<T>());
} 
```

...使用如下表达式调用：

```
void f(int i, double d, bool b) {
    std::cout << "i=" << i << " d=" << d << " b=" << b << '\n';
}

int fi() { std::cout << "int\n"; return 1; }
double fd() { std::cout << "double\n"; return 2.1; }
bool fb() { std::cout << "bool\n"; return true; }

int main()
{
    std::cout << std::boolalpha;
    function_apply(&f, std::tuple<int, double, bool>{ fi(), fd(), fb() });
} 
```

主要缺点是这种方法需要`std::tuple<...>`' 元素的规范。另一个问题是 MacOS 上当前版本的 gcc 以与它们出现的相反顺序调用函数，即不遵守*括号初始化列表*中的评估顺序（gcc 错误）或不存在（即，我误解了使用braced-init-list的保证。clang在同一平台上按预期顺序执行功能。

used 函数`make_indices()`只是创建一个合适的指针，指向一个类型的对象，`indices<I...>`其中包含一个可用于 a 的索引列表`std::tuple<...>`：

```
template <int... Indices> struct indices;
template <> struct indices<-1> { typedef indices<> type; };
template <int... Indices>
struct indices<0, Indices...>
{
    typedef indices<0, Indices...> type;
};
template <int Index, int... Indices>
struct indices<Index, Indices...>
{
    typedef typename indices<Index - 1, Index, Indices...>::type type;
};

template <typename T>
typename indices<std::tuple_size<T>::value - 1>::type const*
make_indices()
{
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:59:39.527

首先，我认为如果顺序确实很重要，最好在调用之前显式构造这些元素，然后将它们传入。更容易阅读，但更不有趣！

这只是对 Kerrek 的回答的扩展：

```
#include <utility>

namespace detail
{
    // the ultimate end result of the call;
    // replaceable with std::result_of? I do not know.
    template <typename F, typename... Args>
    static auto ordered_call_result(F&& f, Args&&... args)
        -> decltype(std::forward<F>(f)
                    (std::forward<Args>(args)...)); // not defined

    template <typename R>
    class ordered_call_helper
    {
    public:
        template <typename F, typename... Args>
        ordered_call_helper(F&& f, Args&&... args) :
        mResult(std::forward<F>(f)(std::forward<Args>(args)...))
        {}

        operator R()
        {
            return std::move(mResult);
        }

    private:
        R mResult;
    };

    template <>
    class ordered_call_helper<void>
    {
    public:
        template <typename F, typename... Args>
        ordered_call_helper(F&& f, Args&&... args)
        {
            std::forward<F>(f)(std::forward<Args>(args)...);
        }
    };

    // perform the call then coax out the result member via static_cast,
    // which also works nicely when the result type is void (doing nothing)
    #define ORDERED_CALL_DETAIL(r, f, ...) \
            static_cast<r>(detail::ordered_call_helper<r>{f, __VA_ARGS__})
};

// small level of indirection because we specify the result type twice
#define ORDERED_CALL(f, ...) \
        ORDERED_CALL_DETAIL(decltype(detail::ordered_call_result(f, __VA_ARGS__)), \
                            f, __VA_ARGS__) 
```

还有一个例子：

```
#include <iostream>

int add(int x, int y, int z)
{
    return x + y + z;
}

void print(int x, int y, int z)
{
    std::cout << "x: " << x << " y: " << y << " z: " << z << std::endl;
}

int get_x() { std::cout << "[x]"; return 11; }
int get_y() { std::cout << "[y]"; return 16; }
int get_z() { std::cout << "[z]"; return 12; }

int main()
{
    print(get_x(), get_y(), get_z());
    std::cout << "sum: " << add(get_x(), get_y(), get_z()) << std::endl;

    std::cout << std::endl;   

    ORDERED_CALL(print, get_x(), get_y(), get_z());
    std::cout << "sum: " << ORDERED_CALL(add, get_x(), get_y(), get_z()) << std::endl;

    std::cout << std::endl;

    int verify[] = { get_x(), get_y(), get_z() };
} 
```

最后一行是用来验证大括号初始值设定项实际上确实有效，通常情况下。

不幸的是，正如从其他答案/评论中发现的那样，GCC 没有做对，所以我无法测试我的答案。此外，MSVC Nov2012CTP 也没有正确处理（并且有一个令人讨厌的错误，扼杀了`ordered_call_result`†）。如果有人想用clang测试这个，那就太好了。

†对于这个特定的例子，尾随返回类型可以`decltype(f(0, 0, 0))`代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-01T23:41:19.983

> 可以使用对构造函数的保证来构建函数调用工具（“function_apply()”），并为参数的评估提供排序保证吗？

是的，[Fit](https://github.com/pfultz2/Fit)库已经这样做了[`fit::apply_eval`](http://pfultz2.github.io/Fit/doc/html/apply_eval/index.html)：

```
 auto result = fit::apply_eval(f, [&]{ return foo() }, [&]{ return bar(); }); 
```

所以`foo()`会在之前调用`bar()`。

# ria - 针对移动和桌面平台的单一应用程序开发

> ID：14058594
> 
> 赞同：3
> 
> 时间：2012-12-27T17:22:04.587
> 
> 标签：ria

我们正计划开发一个针对移动和桌面平台的应用程序。

我可以使用相同的代码库来开发针对移动和桌面平台的应用程序吗？如果我不能，我可以用简单的方法重新使用多少来开发桌面和移动应用程序？

或者，我如何通过在具有不同视图的某种逻辑的单个正在运行的应用程序中添加它来实现它？

我们考虑将 EXTJ 和 Sencha Touch 结合起来，但对于复杂的设计似乎不太可行。

应用程序的期望是 1\. 它应该在大多数 Windows 浏览器上顺利运行。2\. 它应该适用于 iPad、Android 手机和 Tabs。

是否有其他 RIA 框架可以帮助桌面和移动应用程序实现我的目标，那么请建议替代方案吗？

如果有人能分享他们做类似工作的经验，将不胜感激。

还是最好进行单独的应用程序开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:11:31.467

我知道这对于原始海报来说可能已经很晚了，我将其作为另一个项目发布，以供其他任何寻求跨平台 GUI 的人考虑。

[Kivy](http://github.com/kivy/kivy)是另一个跨平台的 GUI。看看使用 Kivy 制作的一些[应用程序。](https://groups.google.com/forum/?fromgroups=#!topic/kivy-users/_zleyIZHNMs)

Kivy 使用基于 OpenGL ES 2.0 构建的 GUI，因此您可以获得 Open GL 加速作为奖励。它建立在 python 之上，因此编程很容易。

除了常规的桌面操作系统，Kivy 还支持 iOS 和 Android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:46:38.823

I think you may look to follow pure MVC design in your application. Where your presenatation layer is independent of your business logic and is solely contributes to the GUI controlling, navigation, validation etc. In that case your business logic and data access layer would be same for all platforms and the development effort would be much lesser.

# c# - 在 C# 中使用 XSD 字符串验证 XmlDocument？

> ID：14058597
> 
> 赞同：5
> 
> 时间：2012-12-27T17:22:15.290
> 
> 标签：c#, xml, validation, xsd, xmldocument

我有一个`XmlDocument`需要针对 Xml Schema 进行验证的 C# 语言。我看过很多关于如何使用的文章`XmlDocument.Schemas.Add(namspace, xsdfilename)`，但是我的 XSD 没有保存在磁盘上，它在内存中（从数据库加载）。谁能给我有关如何`XmlDocument`使用 XSD 字符串验证的指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:37:28.830

```
using (StringReader stringReader = new StringReader(xsdString))
using (XmlTextReader xmlReader = new XmlTextReader(stringReader))
{
    xmlDocument.Schemas.Add(null, xmlReader);
} 
```

# algorithm - MIT Hashing 讲座讲解

> ID：14058602
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:22:36.163
> 
> 标签：algorithm, data-structures, hash

在 MIT，Lec 7 Introduction to Algorithms 视频 (http://www.youtube.com/watch?v=JZHBa-rLrBA) 他如何找到 1.A 为 5.5？（第 47 分钟）谢谢您花时间回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:32:18.077

请记住，作为分数处理的 1011001 右移 (w - r)。w 是 7，因为计算机有 7 位字。r 为 3，因为 m = 8 = 2^3 - 2^r。因此，您需要将 A 右移 (w - r) = 7 - 3 = 4。因此，您可以将 1011001 视为实际上是 101 PERIOD 1001，其中 101 是整数部分，而 1001 是小数部分。整数部分为 5。小数部分为 0.5 多一点。所以加起来是5.5。希望有帮助。

# javascript - REST - 如何限制未经授权的客户端软件的访问

> ID：14058603
> 
> 赞同：13
> 
> 时间：2012-12-27T17:22:48.073
> 
> 标签：javascript, android, rest, jakarta-ee, jersey

这是挑战：

服务/业务层有一个 REST (JSON) 接口。有两种客户端可以调用 API：在浏览器中运行的 web 应用程序和移动应用程序 (Android)。两者都是公开的。使用授权 (!) webapp 或授权 (!) 移动应用程序的每个人都应该有权访问资源。应禁止所有未经授权的客户端（例如脚本）。

注意：没有限制有多少或哪些用户可以访问服务层 -> 客户端公钥证书可能无法使用。只有客户端软件必须被授权。

在我看来，唯一的解决方案是“默默无闻”。

## 想法：

*   从服务器加载一个随机的 JS 函数（我们称之为“挑战”），它在浏览器（或应用程序）中执行，以特定方式对浏览器进行指纹识别（浏览器缺陷？），计算结果并发送结果每次调用 REST-API 时返回。

你有什么进一步的想法或建议吗？

提前谢谢你，对不起我的英语不好

## 编辑：

我的问题与用户身份验证和/或授权无关，而是与**客户端软件**身份验证 + 授权有关。

我的问题的背景是，我自己的应用程序（android + web）有一个 RESTful 后端，我不希望有人在它上面创建自己的客户端软件。这样做的原因是因为它是一个商业网站/应用程序，它提供了一些收集起来非常昂贵的数据。我想推广网站和移动应用程序，而不是 RESTapi（或某些第三方竞争对手）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T18:20:01.697

不幸的是，我的回答是你永远不应该信任客户端应用程序。

虽然有多种方法可以与您分发的客户端建立信任关系，但所有这些方法都可能被黑客入侵、破解或绕过。永远不要相信来自服务器外部的任何数据。曾经。永远不要依赖来自您的客户端或主要网络浏览器的连接。只要有足够的时间和精力，一切都可以被欺骗。

行业中此类问题的一些很好的例子很容易从游戏等事物中看到，即使有检查内存黑客和其他方法的例程，最终即使是像魔兽世界这样预算巨大的服务也经常看到他们的客户出现黑客攻击或完全客户端模拟器能够发送普通客户端无法发送的命令。依靠您的客户端软件来保持安全并且只向您的服务器发送正确的数据是灾难的根源。如果是为了重要的事情，请始终验证服务器端。始终正确地转义/参数化数据。使用白名单模型，并在适当的情况下最好使用基于用户输入而不是用户数据本身的符号表查找。等等。客户端验证应该只被视为帮助用户，而不是安全的东西。

如果您只是追求“足够好”，那么您可能有一些选择来帮助*减少*看到这种情况发生的可能性，例如像您提出的那样通过默默无闻的解决方案实现安全性，但即使那样，您也不应该*依赖*它不会发生。

一种解决方案是基本上不在客户端中包含客户端的主要功能，而是在运行时从服务器（javascript/etc）发送它，每次将逻辑包发送到客户端时使用不同的指纹，可能使用一系列不同的逻辑例程，其中一个是随机选择的。然后，您可以使包超时，跟踪哪个用户访问了哪个包，并让包返回遥测数据，您也可以使用这些遥测数据来帮助维护安全性。返回的逻辑与指纹发送的内容之间的任何不匹配都可以立即被认为是欺骗或黑客攻击。然而，最终，所有这些仍然可以被打败（像这样一个相对基本的例子可以被确定的人相当容易地打败，特别是如果你没有运行时内存安全性）。

有许多方法可以处理中间人 (MITM) 攻击，其中有人试图拦截数据，但没有一种方法可以完全解释受感染的端点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T17:44:17.160

Web 服务器通常支持“会话”的概念。当 Web 浏览器连接时，会在服务器上创建一个会话，该会话返回一个[会话 ID（通常作为 HTTP cookie）](http://en.wikipedia.org/wiki/Session_%28computer_science%29#HTTP_session_token)。然后，Web 浏览器将该会话 ID cookie 发送到对服务器的所有后续请求。

使用这种机制，许多编程语言/框架都有一个身份验证/授权模块，它允许用户对自己进行身份验证（通常使用用户名和密码）。一旦验证了用户的身份，会话就会使用用户的 ID 进行更新）。然后，服务器代码检查每个请求的会话中的用户 ID，以确保用户经过身份验证/允许发出请求（无论是 HTML 页面视图还是 API GET/POST）。

对于 Android（或 iOS ......）应用程序而言，情况可能会有所不同，但想法是相似的：让用户验证自己一次，给客户端一个“秘密令牌”，该令牌在服务器中与用户记录一起映射。然后这个令牌被传递给客户端发送的所有请求。

您可以为此使用本地库或更标准的库，例如[OAuth2](http://oauth.net/2/)。

# java - 系统中如何识别匿名内部类？

> ID：14058608
> 
> 赞同：2
> 
> 时间：2012-12-27T17:23:07.240
> 
> 标签：java, jvm, anonymous-class

JVM如何创建和识别匿名内部类？

例如，我可以为同一个接口创建多个匿名内部类，每个内部类都有自己独特的实现。而且这些都可以在同一个（显式）类中，因此它所在的类不能是整个标识符。那么 JVM 使用什么信息来确定一个匿名对象和另一个匿名对象呢？（我唯一能想到的是声明它的行号，但这似乎有点太人性化，不能成为真正的答案。）

有没有办法查看`.class`编译器为这些文件生成的文件？或者它们是在运行时动态创建的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:29:05.513

**Java代码：**

```
 public static void main(String...args) {
    TestInter t = null; 
            t = new TestInter() { //com/next/b/Test$1 
            };
            t= new TestInter() {  //com/next/b/Test$2
            };
     } 
```

**字节码：**

```
 L0
    LINENUMBER 8 L0
    ACONST_NULL
    ASTORE 1
   L1
    LINENUMBER 9 L1
    NEW com/nextcontrols/bureautest/Test$1
    DUP
    INVOKESPECIAL com/next/b/Test$1.<init>()V
    ASTORE 1
   L2
    LINENUMBER 11 L2
    NEW com/nextcontrols/bureautest/Test$2
    DUP
    INVOKESPECIAL com/next/b/Test$2.<init>()V
    ASTORE 1 
```

注意`INVOKESPECIAL`字节码中的行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:29:05.893

您可以通过尝试这样的简单示例来获得一些见解：

```
public class A {
    public static void main(String[] args)
    {
        L a = new L() { };
        L b = new L() { };
    }
}

interface L { } 
```

运行上面的代码会生成 3 个单独的类文件：

```
A.class
A$1.class
A$2.class 
```

# regex - 正则表达式：忽略除了最后的重复单词之外的重复单词？

> ID：14058614
> 
> 赞同：0
> 
> 时间：2012-12-27T17:23:23.563
> 
> 标签：regex

我希望有人可以帮助我。

我有以下文字：

*XX Oferta de empleo como Gestor Económico teste y financiero en Importante empresa, Jerez de la Frontera XX*

我只想匹配`Importante empresa`。

以下正则表达式可以正常工作：

```
XX.* en ([^,]+), .*XX 
```

但是，如果文本有`en`两次，例如：

*XX Oferta de empleo como Gestor Económico **en** teste y financiero **en** Importante empresa, Jerez de la Frontera XX*

它将匹配以下内容：

```
teste y financiero en Importante empresa 
```

你们有谁知道如何让我的正则表达式在匹配时只使用最接近逗号的，所以无论前面有多少个`en`我都只会匹配？`Importante empresa``en`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:51:45.773

对于您的示例，它应该可以正常工作，因为`.*`正则表达式开头的贪婪将匹配所有`en`s ，然后仅回溯到`en`字符串中的最后一个以允许正则表达式的其余部分匹配。我只能想到一种会失败的情况，那就是`/U`在 PHP 中使用修饰符使贪婪的量词变得懒惰，反之亦然。

但无论如何，您可以明确提出您的要求：

```
XX.* en ((?:(?!\ben\b)[^,])+), .*XX 
```

现在否定前瞻`(?!\ben\b)`断言在 and 之间不能再有任何`en`地方（使用单词边界来避免像 in或那样的误报匹配 ）。`en``,``\b``encuentro``dicen`

# sql - 计数、加入或可能的 GROUP By

> ID：14058616
> 
> 赞同：0
> 
> 时间：2012-12-27T17:23:29.533
> 
> 标签：sql, join, count, group-by

所以我做了一个简单的查询，给出了提到 PassportNumber = 'C_AA8' 的案例总数。但是，如果我为 RegistrationCase 中不存在的 PassportNumber 设置查询，它将返回 0（据我所知，它不能加入）。我该如何解决？并且有一种方法可以重新制作此查询以与 GROUP BY 一起使用？感谢您提供任何进一步的帮助。我正在将 MySQL 与 PHPmyadmin 和 AMPPS 一起使用。固定寄存器。

```
SELECT COUNT( unRegisterCase.PassportNumber ) + COUNT( RegistrationCase.PassportNumber ) + COUNT( RecoveringCase.NewPassportNumber ) AS result
FROM RegistrationCase
LEFT JOIN unRegisterCase ON unRegisterCase.PassportNumber = RegistrationCase.Passportnumber
LEFT JOIN RecoveringCase ON RecoveringCase.NewPassportNumber = RegistrationCase.Passportnumber
WHERE RegistrationCase.PassportNumber =  'C_AA8' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:32:55.517

不是吗？

```
SELECT COUNT(PassportNumber ) as PassportCount FROM
(
SELECT PassportNumber FROM RegistrationCase UNION ALL
SELECT NewPassportNumber FROM RecoveringCase UNION ALL
SELECT PassportNumber FROM unRegisterCaseber
) A
WHERE PassportNumber =  'C_AA8' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:27:37.507

以及 SQl 底部的 where 子句，它取消了左连接，

试试这个

```
 SELECT COUNT( UnregisterCase.PassportNumber ) + 
        COUNT( RegistrationCase.PassportNumber ) + 
        COUNT( RecoveringCase.NewPassportNumber ) AS result
 FROM RegistrationCase, unRegisterCase, RecoveringCase
 WHERE UnregisterCase.PassportNumber = RegistrationCase.Passportnumber
 AND RecoveringCase.NewPassportNumber = RegistrationCase.Passportnumber
 AND RegistrationCase.PassportNumber =  'C_AA8' 
```

还要检查是否区分大小写，因为 unRegister 和 Unregister 的拼写不同

# java - Java 运算符优先级

> ID：14058617
> 
> 赞同：4
> 
> 时间：2012-12-27T17:23:34.097
> 
> 标签：java, operators

由于Java中运算符优先级的正确性，我感到困惑。很久以前，我在教程中读到 AND 的优先级高于 OR，问题中提供的答案证实了这[一点](https://stackoverflow.com/questions/2263660/in-java-what-are-the-boolean-order-of-operations)。但是，我目前正在使用“Sun Certified Programmer for Java 6 Study Guide”学习 Java。本书包含以下示例：

```
int y = 5;
int x = 2;
if ((x > 3) && (y < 2) | doStuff()) {
    System.out.println("true");
} 
```

我正在复制并引用编译器如何处理上述代码的解释：

> `If (x > 3)`is`true`和is`(y < 2)`的其中一个或结果 ，然后 print 。由于短路，表达式被评估，就好像在 周围有括号一样。换句话说，它被评估为 之前的单个表达式和 之后的单个表达式。`doStuff()``true``"true"``&&``(y < 2) | doStuff()``&&``&&`

这意味着尽管 that`|`具有比 更高的优先级`&&`。是不是因为使用了“非短路OR”而不是短路OR？什么是真的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T17:28:46.177

那是因为它使用的是`|`操作符而不是`||`具有更高优先级的操作符。[这是](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)桌子。

改用`||`运算符，它会按照你的想法做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:13:59.000

> 由于短路 &&，表达式的计算就像 (y < 2) | 周围有括号一样。做东西（） ...

这种说法是不正确的，确实毫无意义。&& 是短路运算符的事实与 (y < 2) | 的评估无关 doStuff()，实际上只有在 doStuff() 返回布尔值时才能编译。不同之处（隐式括号）是 && 相对于 | 的*优先级*，在 JLS ##15.22-23 中定义为 && 较低。

# regex - 用于在字符串中查找数字的正则表达式

> ID：14058619
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:23:43.393
> 
> 标签：regex

> **可能重复：**
> [使用正则表达式从字符串中获取数字](https://stackoverflow.com/questions/1043619/get-numbers-from-string-with-regex)

嗨，我需要检查一个字符串是否为以下格式。

> case1/clientid2

在示例中，case 和 clientid 将是静态的，但数字会发生变化。是否可以使用正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:27:32.990

[是的，这](https://stackoverflow.com/questions/1043619/get-numbers-from-string-with-regex)绝对是重复的。

这是您可以使用的正则表达式，`case[\d]+/clientid[\d]+`

**编辑**：删除了转义字符。

# sql - 暂停 ssis 包

> ID：14058626
> 
> 赞同：0
> 
> 时间：2012-12-27T17:24:16.907
> 
> 标签：sql, csv, ssis

这是场景，

我从另一个来源（不是我的公司）获得了 CSV 文件的交易历史记录。如果事务已经在我的系统上，我使用 SSIS 包导入它们并逐行检查。之后，我需要检查新项目的数量是否包含在正常数字上，例如每周 500 个项目。如果数字高于我需要检查的数字，因为可能源文件没有正确输入（例如错误的列顺序，额外的空间等），所以没有对我的数据库进行插入。如果数字没问题，那么我需要将这些项目添加到我的数据库表中。

到目前为止，我管理包以将新的包插入临时表，然后如果消息正常，我手动检查行数和数据本身。

之后，我进行手动查询以从该临时表插入到最后一个。

我想知道我是否可以直接在主 SSIS 上执行这些额外步骤，例如在进程暂停时使用网格视图来查看新项目，在我关闭视图后，它会继续插入新项目的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:32:44.713

是的，您可以在 SSIS 中完成所有步骤。将记录插入临时表后；

*   创建执行 sql 任务以选择要插入的行数并将结果记录到变量中
*   检查变量编号是否在您可接受的范围内，如果编号不可接受，请使用工作流约束停止包
*   如果行数可以接受，则创建一个数据流任务，将临时表中的记录插入到真正的目标表中

# svn - SVN结账有什么作用？

> ID：14058629
> 
> 赞同：7
> 
> 时间：2012-12-27T17:24:48.167
> 
> 标签：svn

“SVN”结帐是否将 build.xml 文件放入所选文件夹中？

目前，我没有 SVN 存储库的权限。所以我想我可能会跳过 SVN 结帐步骤并继续构建。但是我收到一个错误，说 Build.xml 文件不存在。执行 SVN 检出后是否提供此 build.xml 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T17:36:15.287

`svn checkout`将存储库的工作副本检出（检索）到指定文件夹中。如果您无权访问存储库，并且文件夹中还没有源的当前副本，则您不可能进行构建。

如果那里有源的当前副本，它应该包括`build.xml`.

如果您*有权*访问存储库，则`svn checkout`仅在存储库中有一个用于检出副本的副本时才会检索该副本`build.xml`。换句话说，它不会神奇地添加一个`build.xml`如果存储库中不存在的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:07:52.067

Ant 是一个基于 XML 的配置工具，用于构建自动化（编译源代码和打包二进制文件）。Build.xml 是主要控制部分，其中包含所有必须按顺序自动完成的任务的信息。Build.bat 或 sh + Build properties 只是一个脚本文件，用于在执行构建任务之前准备系统环境。

现在，整个事情以及应用程序源都在中央服务器（SVN，CVS ...）上的任何版本控制系统中维护

当开发人员想要在他的本地系统上构建和打包应用程序时......他应该对具有源和构建脚本的根文件夹执行 SVN Checkout / SVN Update。通常最新版本将结帐。

# wordpress - WordPress 永久链接和 .htaccess 文件问题

> ID：14058631
> 
> 赞同：1
> 
> 时间：2012-12-27T17:24:58.530
> 
> 标签：wordpress, .htaccess

我正在使用 WordPress .htaccess 文件如下

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

这不适用于我的永久链接 /%postname%

可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:57:24.850

1.- Be sure that your set permalinks in `Permalink Settings` http:// your_domain/wp-admin/options-permalink.php

![enter image description here](../Images/2823eb4d6cda2070d4ecff21cab674b8.png)

2.- If you are using WP inside a subdir you must modify htaccess:

```
RewriteBase /subdir/ 
```

**UPDATE**:

3.- enable rewrite module. In ubuntu is easy:

```
sudo a2enmod rewrite 
```

4.- Allow .htaccess in server's config

```
<Directory /your_wp_dir>
AllowOverride All
</Directory> 
```

5.- After any change in server's config restart it (again in ubuntu is):

```
$ sudo service apache2 restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:23:17.823

您使用的是什么版本的 Apache？另外，请确保您检查测试页

```
<?php
phpinfo();
?> 
```

和 CTRL+F 用于“mod_rewrite”。

# c++ - 相同模板参数的特化

> ID：14058636
> 
> 赞同：2
> 
> 时间：2012-12-27T17:25:06.763
> 
> 标签：c++, templates

我有一个函数模板：

```
//the most generalized template 
template<typename typeArg, typename typeRet>
typeRet func(const typeArg &val); 
```

以及它的几个专业化，看起来像：

```
template<>
someType func(const otherType &val)
{
    //code
}

template<>
typeFoo func(const typeBar &val)
{
    //more code
} 
```

但它没有默认实现。

显然，这两种类型都不能自动推导出来，所以调用看起来像：

```
type1 var1 = func<argType,type1>(arg); 
```

仅在类型相同的情况下编写默认实现的正确方法是什么？

我尝试了一些变体：

**第一次尝试**

```
template<typename theOnlyType, theOnlyType>
theOnlyType func(const typeArg &theOnlyType)
{
    //code
} 
```

但是错了，因为这个函数只有一个模板参数，和上面的调用不对应。

**第二次尝试**

```
template<typename type1, typename type2>
type1 func(const type1 &theOnlyType)
{
    //code
} 
```

调用变得模棱两可，候选者是这个函数和第一个代码块中最通用的模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:29:54.187

经过一番研究，我想出了一个更好的解决方案。它涉及在静态方法周围添加一个包装类并通过全局方法分派它们：

```
#include <iostream>

namespace tag
{
    template <typename U, typename P>
    struct wrapper // default implementation
    {
        static U foo(P const &)
        {
            std::cout << "different types";
            return U();
        }
    };
}

namespace tag
{
    template <typename T>
    struct wrapper<T, T> // specialized
    {
        static T foo(T const &)
        {
            std::cout << "same type";
            return T();
        }
    };
}

template <typename U, typename P>
static inline U foo(P const &p)
{
    return tag::wrapper<U, P>::foo(p);
}

int main()
{
    foo<int>(0);
    foo<int>(true);
} 
```

我希望这有帮助。

* * *

~~[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)与[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)(C++11)一起使用：~~

 ~~```
template <typename A, typename B, typename = 
          typename std::enable_if<std::is_same<A, B>::value>::type> 
B foo(const A &) {

} 
```~~ 

或者将此版本用于 C++03 及更早版本：

```
template <typename A, typename B> struct foo; // implement for different types

template <typename T> struct foo<T, T> {
    T operator()(const T &) {
        // default impelentation
    }
};

int main() {

    foo<int, int> f;
    int n;

    f( n );

} 
```

~~我确信有办法改善这一点。我尝试对函数使用部分专业化，但我无法让它为我工作。~~

# java - java web start部署属性文件读取

> ID：14058640
> 
> 赞同：0
> 
> 时间：2012-12-27T17:25:22.590
> 
> 标签：java, file, properties, java-web-start

我正在尝试在 Java Web Start 中部署一个非常简单的应用程序。我对此完全陌生。

我的应用程序包含一个 Java 文件。通过 java (java CustomDemo) 运行应用程序时，它会显示一个包含一个按钮的对话框。当用户单击该按钮时，将读取一个属性文件，并且 Hello World 将作为标签显示在对话框中。

*   注意：在一个文件夹中，我有 java 类以及 .properties 文件。

我想在 Web Start 中部署该应用程序。

我遵循的步骤。

1.  我制作了我的应用程序的一个 jar（jar -cvf SampleDemo.jar CustomDialog.class）。
2.  我已经编写了 jnlp 文件。
3.  我创建了一个 index.html 页面
4.  将整个内容保存在 tomcat/webapps 中并部署在 tomcat 中。

现在的问题是，如果我将标签显示为任何硬编码的字符串，那么应用程序就像一个魅力一样工作。但是，当我读取属性文件时，我在 Java Web Start 中运行时遇到了异常，即“文件未找到接收”

我的示例代码如下

## CustomDialog.java

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JTable;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Enumeration;
import java.util.Properties;

public class CustomDialog extends JDialog implements ActionListener
{
    protected boolean i_boolButtonClicked = false;
    protected String LABEL                = "";

    public CustomDialog()
    {
        this.setSize(500, 300);
        JButton but = new JButton("Hello");

        //Start Anjan to read data/text from .properties file..
        Properties  i_propConfig        = new Properties();
        try
        {
            FileInputStream inStream = new FileInputStream("./Test.properties");
            i_propConfig.load( inStream  );
            inStream.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

        String l_strKey = "";
        String l_strVal = "";

        Enumeration l_enum = i_propConfig.keys();
        while(l_enum.hasMoreElements())
        {
            l_strKey = (String)l_enum.nextElement();

            if(l_strKey == null || l_strKey.equals( "" ))
                continue;

            l_strVal = i_propConfig.getProperty( l_strKey );

            if(l_strVal == null || l_strVal.equals( "" ))
                continue;
        }

        System.out.println("Properties read from file--> Key: "+l_strKey +" Value: " +l_strVal);
        LABEL = l_strVal;
        //End Anjan to read data/text from .properties file..

//      but.addActionListener(new ActionListener() 
//      {
//          public void actionPerformed(ActionEvent e) 
//          {
//              //getContentPane().add(new JLabel("Hello World"));
//              getContentPane().add(new JLabel(LABEL));
//              getContentPane().validate();
//          }
//      });

        but.addActionListener(this);

        Dimension dim=Toolkit.getDefaultToolkit().getScreenSize();          
        this.setLocation((int)(dim.width- getWidth ())/2,(int)(dim.height-this.getHeight ())/2);

        but.setSize(600, 5);
        this.add(but);
        this.setLayout(new FlowLayout(FlowLayout.LEFT));
        this.setVisible(true);
    }

    public static void main(String[] args) 
    {
        CustomDialog l_objCustomDialog = new CustomDialog();
    }

    protected void processWindowEvent(WindowEvent e) 
    {
        super.processWindowEvent(e);

        if (e.getID() == WindowEvent.WINDOW_CLOSING) 
        {
            setVisible(false);
            System.exit(0);
        }
    }

    public void actionPerformed(ActionEvent e) 
    {
        System.out.println("Hello button clicked......");
        getContentPane().add(new JLabel(LABEL));
        getContentPane().validate();
    }
} 
```

## SwingDemo.jnlp

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://172.28.1.139:8400/SwingDemo" href="SwingDemo.jnlp">
    <information>
        <title>Swing Demo</title>
        <vendor>Swing</vendor>
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
        <jar href="SwingDemo.jar" main="true" download="eager" />
    </resources>

    <application-desc
         name="SwingDemo Demo Application"
         main-class="SwingDemo.CustomDialog"
         width="300"
         height="300">
     </application-desc>
     <update check="background"/>

<security>
    <all-permissions/>
</security>
</jnlp> 
```

## 索引.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE> New Document </TITLE>
  <META NAME="Generator" CONTENT="EditPlus">
  <META NAME="Author" CONTENT="">
  <META NAME="Keywords" CONTENT="">
  <META NAME="Description" CONTENT="">
 </HEAD>

 <BODY>
    <script src="http://www.java.com/js/deployJava.js"></script>
    <script>
        // using JavaScript to get location of JNLP file relative to HTML page
        var dir = location.href.substring(0,location.href.lastIndexOf('/')+1);
        var url = dir + "SwingDemo.jnlp";
        deployJava.createWebStartLaunchButton(url, '1.6.0');
    </script>
 </BODY>
</HTML> 
```

几天来，我只是在挖掘，找不到任何解决方案。我认为在 web start 中必须有其他读取 .properties 文件的方法。任何人都可以提出任何清晰而聪明的方法来解决问题。

还有一件事我不想将属性文件固定在我的 jar 中。即使我也尝试过这种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:48:14.610

`FileNotFoundException`在 JWS 应用程序中修复 a 的方法。就是通过URL访问资源。

`getClass.getResource(String)`如果属性文件位于 JWS 应用程序的运行时类路径上，则可以使用该 URL 形成。`jar`（在JNLP 中的元素中引用的 Jar 中）。

如果资源在服务器上是松散的，则可以相对于代码库或文档库（如果它是一个小程序）形成一个 URL。

请注意，URL 实际上意味着“只读”而不是“读/写”。在属性发生变化的情况下，我们需要采用更复杂的策略来在本地序列化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:42:35.917

@Andrew Thompson 我已经按照您提到的加载资源的方式进行了操作。代码片段在这里：

```
String url = "Test.properties";

System.out.println("Before printing paths..");
System.out.println("Path2: "+ getClass().getResource(url).getPath());

FileInputStream inputStream = new FileInputStream(new File(getClass().getResource(url).toURI()));
i_propConfig.load(inputStream);
inputStream.close(); 
```

我已经在 Eclipse 中使用层次结构对其进行了配置（在源代码下有一个名为 SwingDemo 的文件夹。在 SwingDemo 中有我的 java 文件以及资源文件）...

*源代码

```
 *SwingDemo

      *CustomDialog.java

      *Test.properties 
```

当我在 Eclipse 上运行它时，一切都运行良好。但是，一旦我尝试从 cmd 行运行应用程序，就会发生空指针异常。

命令行部署层次结构如下：

文件夹：D:\Work\Java Progrms\SwingDemo

层次结构：*SwingDemo

```
 *CustomDialog.java            

              *Test.properties 
```

首先，我从 cmd 行 (javac CustomDialog.java) 在 SwingDemo 文件夹中编译了这个文件。然后我回到 Java Progrms 文件夹（正如我提到的 .java 类中的包）并使用著名的“java SwingDemo.CustomDialog”运行应用程序。当我之前使用 new FileInputStream("path") 时，我曾经遵循类似的步骤。这样做后，我得到空指针异常..

我认为“getClass().getResource(url)”无法从特定目录加载文件。这就是为什么我将资源放在与我的 java 文件相同的目录中的原因。它在 Eclipse 中运行良好。但是为什么当我从命令行运行时这会出错。

# c++ - 前向迭代器是输出迭代器吗？

> ID：14058642
> 
> 赞同：10
> 
> 时间：2012-12-27T17:25:24.673
> 
> 标签：c++, iterator-traits

ForwardIterators 是否必须是 OutputIterators？我当前的 STL 实现 (VS2012) 源自`forward_iterator_tag`and `input_iterator_tag`，`output_iterator_tag`但我在标准 [N3485] 中找不到这个要求。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T17:30:35.797

在 C++11 中，不，前向迭代器不需要是输出迭代器。输出迭代器要求就像迭代器可以拥有的一组额外要求，而不管它满足的其余迭代器要求如何。前向迭代器只需要是输入迭代器（§24.2.5/1）：

> 类或指针类型 X 满足前向迭代器的要求，如果：
> 
> *   X 满足输入迭代器的要求
> *   ...

事实上，前向迭代器只有在它是可复制分配类型序列的可变迭代器时才满足输出迭代器要求^(†</sup>。)

^(† 或常量迭代器，指向`operator=(...) const`具有可变成员定义的类型序列。)

更重要的是，迭代器标签由标准专门定义为（§24.4.3/2）：

```
namespace std {
  struct input_iterator_tag { };
  struct output_iterator_tag { };
  struct forward_iterator_tag: public input_iterator_tag { };
  struct bidirectional_iterator_tag: public forward_iterator_tag { };
  struct random_access_iterator_tag: public bidirectional_iterator_tag { };
} 
```

如您所见，`forward_iterator_tag`应该只继承自`input_iterator_tag`.

* * *

在 C++03 中，声明前向迭代器满足输入和输出迭代器的要求：

> 前向迭代器满足输入和输出迭代器的所有要求，并且可以在指定任一类型时使用。

但这在下面的段落中是矛盾的，指出常量前向迭代器不能满足输出迭代器的要求：

> 除了其类别之外，前向、双向或随机访问迭代器也可以是可变的或恒定的，具体取决于表达式 *i 的结果是作为引用还是作为对常量的引用。常量迭代器不满足输出迭代器的要求，并且表达式 *i（对于常量迭代器 i）的结果不能用于需要左值的表达式中。

但是，迭代器标记的定义与 C++11 中的相同。这个矛盾的措辞有一个[缺陷报告](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1808.html#476)，但它被关闭为不是缺陷，因为第一个引用在该部分的“介绍性文本”中，并且将来可能会重新措辞（确实如此）。

* * *

前向迭代器的[SGI 定义](http://www.sgi.com/tech/stl/ForwardIterator.html)作为输入和输出迭代器的改进给出（感谢评论中的@BenVoigt）。

尽管如此，如果我们看一下[迭代器标签的实现](http://www.sgi.com/tech/stl/stl_iterator_base.h)，我们会发现它`forward_iterator_tag`仍然只继承自`input_iterator_tag`。

看起来这在过去一直是一个相当混乱的领域，但如果 VS2012 定义`forward_iterator_tag`为继承自`output_`- 和`input_iterator_tag`，我只能假设它是一个错误。

# c++ - 模板模板参数或模板参数

> ID：14058643
> 
> 赞同：1
> 
> 时间：2012-12-27T17:25:32.757
> 
> 标签：c++, templates, parameters, specialization

假设我们有一个类`DefaultClass`是模板类。我们有许多专门针对特征的类`spec_traits`，我们称它们为`SpecClass1`itp。. `SpecClass#`本身可以是一个带有一个参数的模板，就像这样`SpecClass2<T>`。是否有一种优雅的方式来实现并且 `DefaultClass`可以使用。我使用专业化：`DefaultClass<SpecClass1>``DefaultClass<SpecClass<SomeType>, SomeType>`

```
// DefaultClass.hpp
template<typename T>
class _phonyTemplate;
class _phonyType;
class _phonyNonTemplate;

template <template <class> class TemplateT, class TypeT, class NonTemplateT>
class DefaultClass;

// for DefaultClass<SpecClass<SomeType>, SomeType>
template <template <class> class TemplateT, class TypeT>
class DefaultClass<TemplateT, TypeT, _phonyNonTemplate>
{
     // use SpecClass# traits
     typedef spec_traits<TemplateT<TypeT> >::some_type used_type;
};

// for DefaultClass<SpecClass1>
template <class NonTemplateT>
class DefaultClass<_phonyTemplate, _phonyType, NonTemplateT>
{
     // use SpecClass# traits
     typedef spec_traits<NonTemplateT>::some_type used_type;
};

// SpecClass1.hpp
class SpecClass1 : public DefaultType<_phonyTemplate, 
                                            _phonyType, SpecClass1> {};

// SpecClass2.hpp
template <typename TypeT>
class SpecClass2 : public DefaultType<SpecClass2, 
                                            TypeT, _phonyNonTemplateT> {}; 
```

有没有比使用这些`_phony`类型更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:49:48.480

最简单的方法似乎是为规范类型提供 typedef `SomeType`：

```
template <typename T>
class DefaultClass
{
    typedef typename T::SomeType SomeType;
};

// SpecClass1.hpp
class SpecClass1 : public DefaultType<SpecClass1> {};

// SpecClass2.hpp
template <typename TypeT>
class SpecClass2 : public DefaultType<SpecClass2<TypeT> > {}; 
```

# java - android中基于cookie的登录系统

> ID：14058645
> 
> 赞同：2
> 
> 时间：2012-12-27T17:25:42.357
> 
> 标签：java, php, android, session-cookies, httpurlconnection

我正在尝试为某些网站创建一个 android 应用程序。首先，我需要在这个应用程序上创建一个登录系统，它会询问用户其用户名和密码，然后将此数据发送到服务器上的某个 php 脚本，该脚本将检查数据库天气该用户是否存在。从而返回用户ID。以下是我这个过程的核心代码

```
myurl="http://10.0.2.2:80/login.php?username=name&pass=password"
                URL url = new URL(myurl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(10000 /* milliseconds */);
            conn.setConnectTimeout(15000 /* milliseconds */);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);
            // Starts the query
            conn.connect();
            int response = conn.getResponseCode(); 
```

这部分工作正常。我能够从中得到正确的回应。现在我需要的是通过 cookie 或任何其他方法来维护这个会话，即使用户关闭了这个应用程序，以便让用户保持登录状态，直到并且除非他手动注销。我的 login.php 有点如下

```
<?php
$name = $_GET['username'];
$pass = $_GET['pass'];
$userid = checkLogin($name, $pass);

if($userid!=NULL) {
    echo $userid;
} else { 
    echo "";
}
?> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:40:24.610

您是否尝试过使用 PHP session_start()，在会话中放置数据并对其进行修改？该脚本将帮助您进行测试。如果可行，您几乎可以肯定使用 PHP setcookie() 来保留客户端状态。

```
<?php // RAY_session_test.php
error_reporting(E_ALL);

// DEMONSTRATE HOW PHP SESSIONS WORK
// MAN PAGE HERE: http://php.net/manual/en/function.session-start.php

// START THE SESSION (DO THIS FIRST, UNCONDITIONALLY, IN EVERY PHP SCRIPT ON EVERY PAGE)
session_start();

// INITIALIZE THE SESSION ARRAY TO SET A DEFAULT VALUE
if (empty($_SESSION["cheese"])) $_SESSION["cheese"] = 1;

// SEE IF THE CORRECT SUBMIT BUTTON WAS CLICKED
if (isset($_POST['fred']))
{
    // ADD ONE TO THE CHEESE
    $_SESSION['cheese']++;
}

// RECOVER THE CURRENT VALUE FROM THE SESSION ARRAY
$cheese = $_SESSION['cheese'];

// END OF PROCESSING SCRIPT - CREATE THE FORM USING HEREDOC NOTATION
$form = <<<ENDFORM
<html>
<head>
<title>Session Test</title>
</head>
<body>
Currently, SESSION["cheese"] contains: $cheese<br/>
<form method="post">
<input type="submit" value="increment this cheese" name="fred"  />
<input type="submit" value="leave my cheese alone" name="john" />
</form>
</body>
</html>
ENDFORM;

echo $form; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:40:50.607

您应该在执行请求时使用 HttpContext，然后会话 cookie 将在 httpcontext 中处理。每次执行 hhtpRequest 时都必须传递 httpcontext。

这是维持会话的机制。

# python - 无法通过 https 连接到 Windows 机器

> ID：14058650
> 
> 赞同：0
> 
> 时间：2012-12-27T17:26:00.010
> 
> 标签：python, windows, https

我有一个作为 Windows 服务在 XP 机器 (SP3) 上运行的 python 服务器 (BaseHTTPServer.HTTPServer)。我正在尝试通过 https 连接，但超时。

该命令`netstat -an | find "5400"`给出

```
TCP    0.0.0.0:5400        0.0.0.0:0        LISTENING
TCP    0.0.0.0:5400        0.0.0.0:0        LISTENING 
```

我对服务器编程相当陌生，因此将不胜感激。如果我能提供更多信息，请告诉我。

编辑：

我使用 netcat ( `netcat -l -v -p 5400`) 设置了一个简单的服务器并尝试连接到该服务器。我在那里也没有运气，所以我正在更新一些更多信息。

当我使用连接到 netcat 服务器时，`telnet localhost 5400`我收到以下消息： `DNS fwd/rev mismatch: localhost != HUNGRY`

（饥饿是公司的名称）。

我尝试连接的机器位于 IP 地址为 198.183.3.187（从 获取`ipconfig`）并侦听端口 5400 的无线路由器上。

我首先在 ServerFault 上问了这个问题，但问题已关闭（出于我仍然不明白的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:06:47.717

结果我们办公室的无线网络拒绝了任何外部请求。我试图从蜂窝数据网络连接。一旦我连接到我们的无线信号，我就可以连接。

# c# - 如何编写包装类以使用部分泛型类型推断？

> ID：14058654
> 
> 赞同：4
> 
> 时间：2012-12-27T17:26:26.880
> 
> 标签：c#, generics, f#, type-inference, fluent-interface

这与[这个问题有关](https://stackoverflow.com/questions/2893698/partial-generic-type-inference-possible-in-c)。

我想创建一个通用包装类：

```
public abstract class Wrapper<T>
{
    internal protected T Wrapped { get; set; }
} 
```

带有以下扩展：

```
public static class WrapperExtensions
{
    public static W Wrap<W,T>(this T wrapped) where W:Wrapper<T>,new()
    {
        return new W {Wrapped = wrapped};
    }

    public static T Unwrap<T>(this Wrapper<T> w)
    {
        return w.Wrapped;
    }
} 
```

现在假设一个具体的 Wrapper：

```
public class MyIntWrapper : Wrapper<int>
{
    public override string ToString()
    {
        return "I am wrapping an integer with value " + Wrapped;
    }
} 
```

我想这样调用`Wrap`扩展：

```
MyIntWrapper wrapped = 42.Wrap<MyIntWrapper>(); 
```

这是不可能的，因为在 c# 中我们需要为`Wrap`扩展提供两个类型参数。（全有或全无）

显然，在 F# 中可以进行部分推理。

上面的代码在 F# 中的外观如何？

是否可以从 C# 中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:21:05.853

*显然，在 F# 中可以进行部分推理。*

是的，您的示例中只需要指定 W 。将推断 T。

*上面的代码在 F# 中的外观如何？*

```
[<AbstractClass>]
type Wrapper<'a>() =
    [<DefaultValue>]
    val mutable internal Wrapped : 'a

let Wrap<'W,'T when 'W :> Wrapper<'T> and 'W: (new: unit -> 'W)> (wrapped: 'T): 'W = 
    let instance = new 'W()
    instance.Wrapped <- wrapped
    instance

let Unwrap (w: Wrapper<_>) = w.Wrapped

type MyIntWrapper() =
    inherit Wrapper<int>()
    override this.ToString() = 
        sprintf "I'm wrapping an integer with value %d" this.Wrapped 
```

您可以通过这种方式从 F# 交互中调用 Wrap

```
> let wrapped = Wrap<MyIntWrapper,_> 5;;
val wrapped : MyIntWrapper = I'm wrapping an integer with value 5 
```

在我看来，这在 F# 中不是很惯用，我宁愿使用有区别的联合和模式匹配来包装/展开，但我不知道你的具体情况是什么。

*是否可以从 C# 中使用它？*

当然，但是如果您`Wrap`从 C# 调用，您将返回 C# 类型推断，并且必须指定第二个类型参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:58:48.443

实现自定义隐式转换：

[MSDN 示例](http://msdn.microsoft.com/en-us/library/aa288476%28v=vs.71%29.aspx)

```
struct MyIntWrapper
{
    public MyIntWrapper(int value) 
    {
        this.value = value; 
    }

    static public implicit operator MyIntWrapper(int value)
    {
        return new MyIntWrapper(value);
    }

    static public explicit operator int(MyIntWrapper wrapper)
    {
         return wrapper.value;
    }

    private int value;
} 
```

然后你可以写：

```
MyIntWrapper wrapped = 42; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T18:15:46.927

您可以在 F# 中执行此操作：

```
open System.Runtime.CompilerServices

type Wrapper<'T> =
  abstract Wrapped : 'T

[<Extension>]
module WrapperExtensions =

  [<Extension>]
  let Wrap wrapped = { new Wrapper<_> with member x.Wrapped = wrapped }

  [<Extension>]
  let Unwrap (w: Wrapper<_>) = w.Wrapped 
```

然后像这样从 C# 使用它：

```
var wrapped = 42.Wrap();
wrapped.Unwrap(); 
```

那是你要的吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T18:18:22.320

您可以使用帮助器类将通用参数分成两个单独的调用，从而推断出您想要的参数。LinqPad 示例：

```
void Main()
{
    MyIntWrapper wrapped = 42.Wrap().To<MyIntWrapper>(); 
}

public abstract class Wrapper<T>
{
    internal protected T Wrapped { get; set; }
}

public static class WrapperExtensions
{
    public static WrapHelper<T> Wrap<T>(this T wrapped) 
    {
        return new WrapHelper<T>(wrapped);
    }

    public static T Unwrap<T>(this Wrapper<T> w)
    {
        return w.Wrapped;
    }

    public class WrapHelper<T> 
    {
        private T wrapped;

        public WrapHelper(T wrapped) 
        {
            this.wrapped = wrapped;
        }

        public W To<W>() where W : Wrapper<T>, new() 
        {
            return new W {Wrapped = wrapped};
        }
    }
}

public class MyIntWrapper : Wrapper<int>
{
    public override string ToString()
    {
        return "I am wrapping an integer with value " + Wrapped;
    }
} 
```

特别要注意新类`WrapHelper<T>`，它公开了方法`To<W>`。向该方法传递一个显式的泛型参数，但对于原始`Wrap<T>`方法，它由 推断`this T`，返回该帮助程序类的实例，允许您将方法调用链接在一起以获得所需的内容。

# angularjs - var value 是工厂自动重置为其原始值

> ID：14058656
> 
> 赞同：0
> 
> 时间：2012-12-27T17:26:35.930
> 
> 标签：angularjs

我有一个工厂，我在其中声明了一个通过函数返回的 var。我正在为 var 分配一个初始值。

此函数绑定到控制器中的变量。

我在工厂中还有另一个函数，通过它我可以更改 var 的值。

问题是 var 保留为原始值，即使在通过第二个函数更改其值之后也是如此。

有什么想法吗？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:18:13.943

这个问题是完全正交的。

我有一个表单，在其提交上设置了一个值。但是，我使用的是 ng-click 而不是 ng-submit，这会导致表单提交和页面重新加载。这是重置变量。

# css - 现代图片库：流动的还是有弹性的？

> ID：14058661
> 
> 赞同：2
> 
> 时间：2012-12-27T17:26:55.017
> 
> 标签：css, gallery, responsive-design, fluid-layout, elasticlayout

### 从 ux.stackexchange 交叉发布（如建议）

我对 UX 和 IA 以及有关界面和解决方案设计的一切都是新手。我需要做一个基于网格的简单图片库。我读到了响应式设计和媒体查询。

好的，在宽屏中我有 7 列网格，在笔记本电脑中有 5 列，在平板电脑 3 和 smarthpone 1 中。这很酷。我已经通过流体布局完成了这项工作，使用百分比作为宽度属性。我喜欢这个解决方案，因为它对所有视口大小都很灵活。

但是如果用户使用“command +”或“command -”键改变字体大小呢？如果图像宽度是百分比，则容器大小不会改变，图像也不会改变。结果有点奇怪：一切都变小了，但图像没有改变（好吧，边距发生了变化，那就更奇怪了）。

但是，如果我使用 em 作为宽度，我将获得一个不再流畅的布局。

如何混合两种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:44:19.913

我个人喜欢设置 2 个单独的 CSS 样式表。一个用于主站点（桌面版），另一个用于移动设备。

所以在一个名为 responsive.css 的样式表中，你可以有这样的东西：

```
 @media only screen and (min-width: 768px) and (max-width: 1024px)
 {
   /*stuff in here*/
 } 
```

您可以根据需要调整宽度或在必要时添加更多宽度。

我个人不喜欢响应式设计，喜欢更流畅的设计。有这么多不同尺寸的移动设备，使用流畅的设计可能会更好地完成您想要实现的目标。

至于字体大小，请尝试始终使用 em，因为它会更准确地重新调整大小。

# matlab - 使用图像标签的 Matlab 图像提取

> ID：14058663
> 
> 赞同：2
> 
> 时间：2012-12-27T17:26:58.923
> 
> 标签：matlab

我有同一图像的标记版本和灰度版本，我想从灰度版本中提取具有特定标签编号的区域。

例如，图像标签包含标记为 1,2 和 3 的组件；我希望灰度图像中标签编号 = 3 的像素作为新的图像矩阵。有没有更简单的方法来做到这一点，而不是使用循环检查标签 = 3 的每个像素并将相应的像素设置为灰度值并关闭其他标签的像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:40:15.187

假设您有图像数组`img`和标签数组`lbl`。然后你可以构造一个新的图像，如下所示：

```
%# make a copy of the image
newImg = img;

%# turn off all the non-label-3 pixels
newImg(lbl~=3) = NaN; %# alternatively, you can mask with 0, but this may affect contrast 
```

# c# - 使用查询填充组合框时输出错误

> ID：14058665
> 
> 赞同：3
> 
> 时间：2012-12-27T17:27:08.340
> 
> 标签：c#

我试图用查询的输出填充组合框。我在组合框中显示的是 System.Data.DataRowView 这是我使用的代码：

```
string subConStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Master.accdb;Jet OLEDB:Database Password=password";
       string query = "SELECT DISTINCT Code FROM MasterTable";
       OleDbDataAdapter dAdapterComB = new OleDbDataAdapter(query, subConStr);
       System.Data.DataTable source = new System.Data.DataTable() ;
       dAdapterComB.Fill(source);
       comboBoxSubject.DataSource = source;
       comboBoxSubject.DisplayMember = "Subjects"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:31:40.720

您的数据表中没有“主题”列，因此组合框不知道使用哪个字段来显示组合框中的值。当它找不到成员时，它只会在 w DataRowView 上显示 .ToString

你可以试试：

```
comboBoxSubject.DisplayMember = "Code"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:32:43.123

将显示成员更改为“代码”

# c# - 如何遍历 DataContext 中的表和测试读取记录？

> ID：14058667
> 
> 赞同：1
> 
> 时间：2012-12-27T17:27:14.930
> 
> 标签：c#, linq, datacontext, loops

我正在尝试创建一个`TestMethod`将枚举我的数据上下文中的表并尝试从每个表中读取一条记录的方法。测试的目标是确保我的 .dbml 文件与底层数据库同步。到目前为止我所拥有的：

```
[TestMethod]
public void TestDataContextTables()
{
    using ( MyDataContext dataContext = new MyDataContext() )
    {
        int count = 0;
        IEnumerable<MetaTable> tableList = dataContext.Mapping.GetTables();

        foreach ( MetaTable table in tableList )
        {
            Debug.Print( "Testing " + table.TableName + "..." );

            // method to restore >= 1 record using LINQ...
            //Object dummy = from t in dataContext.Mapping.GetTables().Skip( count ).Take( 1 ) select t;  <-- wrong (1)
            //Object dummy = from t in dataContext.Mapping.GetTable( table.RowType.GetType() ) select t; <-- also wrong (2)
            //Object dummy = from t in dataContext.Mapping.GetTable( table.RowType.GetType() ).GetType() select t; <-- also wrong (3)

            Debug.Print( "OK\n" );
            count++;
        }
    }
} 
```

LINQ 语句 (1) 似乎没有读取任何实际数据。LINQ 语句 (2) 给出了编译时错误“找不到源类型 'MetaTable' 的查询模式的实现”，并且 (3) 给出了错误“找不到源类型的查询模式的实现” '系统类型'”。后两者告诉我，当我应该指代某*事物时，我指的是元**事物*。

 *我正在寻找的是一种`DataContext`在 LINQ 语句中引用每个表并从每条记录中返回一行的方法，以确保`SELECT`LINQ 与底层数据库生成 jibes。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:00:59.627

您可以通过 LINQ 枚举表名`select name from sys.tables`并使用 SqlQuery（假设您使用的是 EF）：

```
var result = db.Database.SqlQuery("select * from " + yourTableName).ToList(); 
```*

# jquery - 带有来自 XML 文件的图像路径的幻灯片

> ID：14058675
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:27:53.013
> 
> 标签：jquery, xml, slideshow

我尝试了很多幻灯片，我在网上找到了我用它们完成的。这项任务应该很容易，但由于我是一个 jquery 新手，所以它打败了我：

应使用 XML、JQUERY 或 Javascript

我想创建一个幻灯片，为此我将图片放在 IMAGES 文件夹中，我要做的就是将这些图片的路径写入 XML 文件并从那里读取，如下所示：

```
<allImages>
 <oneImage>
 Image/picture1.jpg
 </oneImage>
 <oneImage>
 Image/picture2.jpg
 </oneImage>
 <oneImage>
 Image/picture3.jpg
 </oneImage>
 <oneImage>
 Image/picture4.jpg
 </oneImage>
</allImages> 
```

没什么花哨的，只是一个幻灯片，在其路径位于 XML 文件中的图片上重复播放。这应该用 jQUERY 或 Javascript 来完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:54:48.023

我建议您使用 JSON 而不是 XML。JSON 比 XML 简单且快速

```
// JSON Object
var imagesJSON = [
  "Image/picture1.jpg",
  "Image/picture2.jpg",
  "Image/picture3.jpg",
  "Image/picture4.jpg"];

$(function() {
    LoopThroughImages();
});

var i=0;
function LoopThroughImages(){
    var imgPath = imagesJSON[i]; // Write the code for reading the image path from XML here
    $("#image").attr('src',imgPath  );
    i++;
    if(i >= 4)
        i=0;
    setTimeout(LoopThroughImages, 3000);
} 
```

[您可以在此处](http://jsfiddle.net/Gvjkf/1/)查看 JSFiddle 中的示例代码

# ravendb - RavenDB Id 的特殊配置

> ID：14058678
> 
> 赞同：1
> 
> 时间：2012-12-27T17:27:56.597
> 
> 标签：ravendb

我想在 RavenDB 的 Id 上修改两个小东西，所以我执行以下代码：

```
documentStore.Conventions.FindIdentityProperty = (prop) => prop.Name == "ID";
documentStore.Conventions.DocumentKeyGenerator = (entity) => entity.GetType().FullName + "/"; 
```

但是这些代码行只有在另一行没有启用的情况下才有效，我不能让两者一起工作。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:11:08.007

我完全按照您提供的代码测试了您的代码，它在 RavenDB 1.0.992 中工作。我认为您使用的是旧版本。

但实际上，您应该自定义`FindTypeTagName`约定而不是`DocumentKeyGenerator`.

```
documentStore.Conventions.FindIdentityProperty = prop => prop.Name == "ID";
documentStore.Conventions.FindTypeTagName = type => type.FullName; 
```

# java - 在 Java 中解析无限长的输入

> ID：14058679
> 
> 赞同：6
> 
> 时间：2012-12-27T17:27:58.513
> 
> 标签：java, inputstream, server-push

我写了一个“推送服务器”，当客户端打开一个连接时，它在服务器写入流时保持打开状态。我想知道如何用 Java 编写一个客户端，当它通过这个无限长的响应接收命令时，它会对命令做出反应。

问题是我不知道从哪里开始。如果您能指出我可以阅读 Javadoc 的课程的方向，那就太好了。我希望它能够立即响应，所以线程可能是必须的。

非常感谢您的帮助！

**编辑：**无限长度是指未知长度。无限这个词被用来强调连接通常永远不会被服务器关闭。没有大量数据正在传输。

**另一个编辑：**也许指出这是一个运行 PHP 脚本的 HTTP 服务器会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:43:00.633

如果它们是由换行符分隔的简单命令，那么滚动您自己的客户端应该相当简单：

**编辑：** HTTP 不是保持长期连接打开的最佳协议，您可能会遇到超时问题。下面的代码未经测试，但应该给你一个很好的起点。

**编辑 2：**正如评论中所指出的，线程池在这里可能是必要的或有用的，也可能不是。您应该注意，使用线程不会神奇地使事情变得更快或增加您可以处理的请求数量。使用线程池的好处是允许客户端在前一个命令仍在执行时立即接收新命令。如果处理命令需要一些 I/O 任务，例如调用另一台服务器，这可能很重要，但在您的情况下，这可能是矫枉过正。

```
ExecutorService svc = Executors.newCachedThreadPool();

URLConnection c = 
    new URL("http://192.168.1.122/push/out.php?nduid=1").openConnection();
c.setReadTimeout(30 * 60 * 1000); // Set the read timeout to 30 minutes
c.connect();
InputStream is = c.getInputStream();
BufferedReader r = new BufferedReader(new InputStreamReader(is, "UTF-8"));

String cmd = null;
while ((cmd = r.readLine()) != null) {
  svc.execute(new Runnable() {
    public void run() {
      processCmd(cmd); // work happens here in a different thread.
    }
  });
}

is.close(); 
```

这里的关键是只要底层 TCP 连接保持打开状态，从套接字返回的输入流就会保持打开状态。客户端可以继续从流中读取，并且`readLine`调用将在必要时阻塞，直到新数据到达。当`readLine`返回 null 时，这意味着底层输入流遇到了文件结尾，这反过来意味着服务器关闭了套接字。

一旦你有了完整的一行数据，你就可以将它提交到线程池中，以便在不同的线程中进行解析和执行。以这种方式分解工作可以让您专注于从单行文本解析和执行命令，这比尝试处理任意大的数据流更易于管理。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-27T17:39:06.280

如果打开到服务器的连接，那检查服务器并使用 a`while(server.isSending) { respond();}`然后关闭连接？

例子：

```
//Connection to the server
openConnection();

while(server.isSending()) {

    //Here can you respond in any way
    respond();
} 
```

您可能还必须使用[InputStream](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)。

*我对 InternetConnections 的工作不太熟悉，但我希望你走在正确的轨道上*

# sql-server - SQL Server CONVERT int to varchar with padding

> ID：14058680
> 
> 赞同：3
> 
> 时间：2012-12-27T17:28:02.430
> 
> 标签：sql-server, varchar, typeconverter

> **可能重复：**
> [最有效的 T-SQL 方法将左侧的 varchar 填充到一定长度？](https://stackoverflow.com/questions/121864/most-efficient-t-sql-way-to-pad-a-varchar-on-the-left-to-a-certain-length)

我通过使用 SQL 中的 datepart 函数返回给定日期时间的一周的数值。然后我将其转换为 varchar 以构建字符串。我的问题是我需要值小于 10 的周才能变为“01”而不是“1”。我需要这个，因为它以这种方式存储在另一个数据库中。

我的问题是，是否可以为 CONVERT 函数提供某种规范以强制 varchar 的长度为 2 而不是长度为 1？

这是我现在的声明：

```
convert(varchar(2),datepart(ww,'2013-1-3 11:00:00.000')) 
```

我可以让这个返回“01”而不是“1”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:30:21.077

把它包起来：

```
right('0' + convert(...), 2) 
```

或者：

```
right(100 + datepart(ww, ...), 2) 
```

# jquery-mobile - 如何在 jQuery Mobile 中动态更改列表视图列表项的主题？

> ID：14058684
> 
> 赞同：1
> 
> 时间：2012-12-27T17:28:20.567
> 
> 标签：jquery-mobile

我有一个拆分列表列表视图，其中包含一个名称，然后是一个星形图标作为拆分按钮。

当用户单击星形图标时，我想将星形更改为黄色（或其他东西），并将列表项也更改为该颜色。

我不确定如何动态更改该列表项主题。我试过像这样更改列表项的数据主题

```
$("#my_list_item").attr("data-theme","d"); 
```

然后甚至调用 listview('refresh') 但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T10:46:26.103

您可以使用：

```
$(id).buttonMarkup({theme:'a'}); 
```

改变。如果要恢复到旧主题，只需替换旧主题即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T05:03:58.630

试试 trigger('create') 方法

```
$("#my_list_item").attr("data-theme","d").trigger('create'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:51:04.953

您可以通过更改“li”的属性并触发 mouseout 事件来实现此目的。

```
$("#my_list_item").attr("data-theme","d").trigger('mouseout'); 
```

如果要更改列表中所有列表元素的主题，请使用

```
$("#my_list li").attr("data-theme","d").trigger('mouseout'); 
```

这是工作的jsfiddle：http: [//jsfiddle.net/ChaitanyaMunipalle/5yjZV/](http://jsfiddle.net/ChaitanyaMunipalle/5yjZV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T01:51:23.547

1.  删除列表项的按钮上下主题。（例如 ui-btn-up/down-“样本主题角色”）
2.  将新主题添加到列表项的按钮向上和向下主题。
3.  设置列表项的新主题。（例如 $(li).attr("data-theme", "swatch theme character")
4.  刷新列表视图。
5.  在列表项上触发 mouseout 事件。

[资源](http://blog.vawterconsultingservices.com/index.cfm/2012/5/13/Refresh-jQuery-Mobile-Listview-Themes-at-Runtime)

# javascript - 在从搜索 API 获取推文时使用“响应”

> ID：14058696
> 
> 赞同：0
> 
> 时间：2012-12-27T17:29:20.990
> 
> 标签：javascript, jquery

我是 jquery 和 javascript 的新手。在这里，我有一个使用 twitter;s 搜索 api 获取推文的代码。你能告诉我为什么我们在.done（）之后将参数“响应”传递给函数吗？这是如何工作的？

```
 $('#input').submit(function(e){
        e.preventDefault();
        e.stopPropagation();
           var hashtag = $(this).find('input[name="hashtag"]').val();
            var twitterapi = "http://search.twitter.com/search.json?";
            jQuery.ajax({
              type: "GET",
              url: twitterapi,
              data: {
                "q": hashtag,
                "rpp": 1000
              },
              dataType: 'jsonp'
            }).done(function (response) {
              var results = response.results;
              for (var i = 0; i < results.length; i++) {
                $("#tweet").append("<p class='tweet'>" +
                  "<span class='username'>" +
                  results[i].from_user +
                  "</span> <span class='tweet_content'> " +
                  results[i].text + "</span></p>");
              }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:41:45.717

在完成函数中，您添加一个函数参数，也称为回调函数。.done 是异步调用，一旦 twitter 服务器接收到调用，结果就会在回调中传递（.done() 中的函数）。响应数据在响应变量中返回。

# javascript - 使用 split() 将字符串解析为 JSON 或使用 JQuery 的 Javascript 的对象

> ID：14058698
> 
> 赞同：0
> 
> 时间：2012-12-27T17:29:21.803
> 
> 标签：javascript, jquery, json, split

我得到一个传递的字符串，它是一个独特的格式（虽然是一致的），我需要能够解析它，以便我可以修改它的各个部分，然后将它放回一起并将其作为字符串传回。

这是我通过的字符串。它的内容会定期更改，但每个项目的结构将保持不变。

```
 View
{
    Name: View1;
    Image
    {
        BackgroundImage: Image.gif;
        Position: 0, 0;
        Width: 320;
        Height: 480;
    }

    Button
    {
        BackgroundImage: Button.gif;
        Transition: View2;
        Position: 49, 80;
        Width: 216;
        Height: 71;
    }

    Button
    {
        BackgroundImage: Button2.gif;
        Position: 65, 217;
        Width: 188;
        Height: 134;
    }

    Label
    {
        Position: 106, 91;
        Width: 96;
        Height: 34;
        Text: "Button";
        FontSize: 32;
        Color: 0.12549, 0.298039, 0.364706, 1;
    }
    Scroll
    {
        Position: 106, 91;
        Width: 96;
        Height: 34;
        Button{
            BackgroundImage: Button2.gif;
            Position: 65, 217;
            Width: 188;
            Height: 134;
        }
        Button{
            BackgroundImage: Button2.gif;
            Position: 65, 217;
            Width: 188;
            Height: 134;
        }

    }

} 
```

我想我需要一个递归函数来查找每个 k,v 并将其放入适当的 Object 或 JSON 文件中，以便我可以修改。我所能得到的最远的是能够解析单个级别并将其放入 k,v 对象中。这是它解析的代码和字符串。

修改字符串以使用我的代码（单级深度。我删除了 View{} 和 Scroll{}）：

```
var content='Image{BackgroundImage: Image.gif;Position: 0, 0;Width: 320;Height: 480;}Image{BackgroundImage: Image2.gif;Position: 0, 0;Width: 320;Height: 480;}Button{BackgroundImage: Button.gif;Position: 49, 80;Width: 216;Height: 71;}Button{BackgroundImage: Button.gif;Position: 49, 80;Width: 216;Height: 71;}Button{BackgroundImage: Button2.gif;Transition: View2;Position: 65, 217;Width: 188;Height: 134;}Button{BackgroundImage: Button3.gif;Transition: View2;Position: 65, 217;Width: 188;Height: 134;}Label{Position: 106, 91;Width: 96;Height: 34;Text: "Button";FontSize: 32;Color: 0.12549, 0.298039, 0.364706, 1;}Label{Position: 106, 91;Width: 96;Height: 34;Text: "Button";FontSize: 32;Color: 0.12549, 0.298039, 0.364706, 1;}';

        var result = content.split('}');
        result.pop();// removing the last empty element
        var obj = {Controls:{}};

        function nextProp(key) {
            /*if(obj.Controls.hasOwnProperty(key)) {
                var num = key.match(/\d+$/);
                if (num) {
                    return nextProp(key.replace(num[0], '') + (parseInt(num[0], 10) + 1));
                } else {
                    return nextProp(key + '1');
                }
            }*/

            return key;
        }

        for (var i = 0; i < result.length; i++) {
            var key = result[i].split('{');
            var value = result[i].replace(key[0], '') + '}';
            obj.Controls[nextProp(key[0])] = value;
        }

        var initObjectList = '<div id="prePop">';
        $.each(obj.Controls, function (k, v) {
        initObjectList += '<div class="inLineObjects">' + '<div class="key">' + k + '</div><br/>' + '<div  class="value">' + v + '</div>' +'</div>';

        });
    initObjectList += '</div>';
    $('#code').append(initObjectList) 
```

回报：

```
{
    "Controls": {
        "Image": "{BackgroundImage: Image.gif;Position: 0, 0;Width: 320;Height: 480;}",
        "Image1": "{BackgroundImage: Image2.gif;Position: 0, 0;Width: 320;Height: 480;}",
        "Button": "{BackgroundImage: Button.gif;Position: 49, 80;Width: 216;Height: 71;}",
        "Button1": "{BackgroundImage: Button2.gif;Transition: View2;Position: 65, 217;Width: 188;Height: 134;}",
        "Button2": "{BackgroundImage: Button3.gif;Transition: View2;Position: 65, 217;Width: 188;Height: 134;}",
        "Label": "{Position: 106, 91;Width: 96;Height: 34;Text: \"Button\";FontSize: 32;Color: 0.12549, 0.298039, 0.364706, 1;}",
        "Label1": "{Position: 106, 91;Width: 96;Height: 34;Text: \"Button\";FontSize: 32;Color: 0.12549, 0.298039, 0.364706, 1;}"
    }
} 
```

我的问题是上面不允许我a）。定位 {} 之外的任何内容，因为它都是一个值和 b)。它没有任何类型的递归能力来处理多个级别，即 View>button>scrollview

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:57:18.850

```
function generalizeFunnyformat(raw) {
    "use strict";
    return ",;:{}".indexOf(raw) > -1? raw :
        " \t\r\n".indexOf(raw) > -1? " ": "a";
}

function infer(value) {
    "use strict";
    if (/^\d/.test(value)) {
        return parseFloat(value);
    } else if (/["']/.test(value)) {
        return value.substr(1, value.length - 2);
    } else {
        return value;
    }
}

function tokenEnd(state, first, second) {
    "use strict";
    state.token += first;
    if (!state.meta) {
        if (state.cursor &&
            state.cursor.hasOwnProperty(state.token)) {
            // This may be overly confident. What if primitives are also
            // allowed at the same nesting level?
            // Here we hope that coursor will be adjusted by bracket()
            // but if it doesn't happen, then we are lost.
            if (!(state.cursor[state.token] instanceof Array)) {
                state.cursor[state.token] = [state.cursor[state.token]];
            }
            state.extra = true;
            state.cursor = state.cursor[state.token];
            state.meta = state.cursor.length;
        } else {
            state.cursor[state.token] = null;
            state.meta = state.token;
        }
    } else if (state.appending) {
        if (state.cursor[state.meta] instanceof Array) {
            state.cursor[state.meta].push(state.token);
        } else {
            state.cursor[state.meta] =
                [state.cursor[state.meta], infer(state.token)];
        }
    } else {
        state.cursor[state.meta] = infer(state.token);
    }
    state.token = "";
}

function space(state, first, second) {
    "use strict";
    // noop
}

function token(state, first, secon) {
    "use strict";
    state.token += first;
}

function bracket(state, first, secon) {
    "use strict";
    var newCursor = { };
    state.cursor[state.meta] = newCursor;
    state.parents.unshift(state.cursor);
    state.cursor = newCursor;
    state.meta = "";
}

function close(state, first, second) {
    "use strict";
    state.cursor = state.parents[0];
    state.parents.shift();
    if (state.extra) {
        state.cursor = state.parents[0];
        state.parents.shift();
    }
    state.extra = false;
    state.appending = false;
}

function comma(state, first, second) {
    "use strict";
    state.appending = true;
}

function colon(state, first, second) {
    "use strict";
    state.appending = false;
}

function semi(state, first, second) {
    "use strict";
    if (state.token) {
        tokenEnd(state, "", second);
    }
    state.meta = "";
    state.appending = false;
}

function error(state, first, second) {
    "use strict";
    throw "Invalid character sequence: " + second +
        " cannot follow " + first;
}

function llparseFunnyFormat(source) {
    "use strict";
    var iterator, len = source.length - 1,
        first, second, genFirst, genSecond, handler,
        state = { result: null, cursor: { }, appending: false,
                  token: "", meta: null, parents: [], extra: false },
        parseTable = { "  ": space,
                       " :": space,
                       " a": space,
                       " ,": space,
                       " }": space,
                       " ;": space,
                       " {": space, // space
                       "aa": token,
                       "a ": tokenEnd,
                       "a:": tokenEnd,
                       "a;": tokenEnd,
                       "a{": tokenEnd,
                       "a,": tokenEnd,
                       "a}": error, // token
                       "{ ": bracket,
                       "{a": bracket,
                       "{}": bracket,
                       "{,": error,
                       "{:": error,
                       "{;": error,
                       "{{": error, // bracket
                       "} ": close,
                       "}}": close,
                       "}a": error,
                       "};": error,
                       "},": error,
                       "}:": error,
                       "}{": error, // close
                       ",,": error,
                       ",a": comma,
                       ", ": comma,
                       ",;": error,
                       ",:": error,
                       ",}": error,
                       ",{": error, // comma
                       "; ": semi,
                       ";a": semi,
                       ";}": semi,
                       ";,": error,
                       ";:": error,
                       ";;": error,
                       ";{": error, // semicolon
                       "::": error,
                       ":a": colon,
                       ": ": colon,
                       ":,": error,
                       ":;": error,
                       ":{": error,
                       ":}": error
                     };
    state.parents[0] = state.cursor;
    state.result = state.cursor;
    for (iterator = 0; iterator < len; iterator++) {
        first = source[iterator];
        second = source[iterator + 1];
        genFirst = generalizeFunnyformat(first);
        genSecond = generalizeFunnyformat(second);
        handler = parseTable[genFirst + genSecond];
        handler(state, first, second);
    }
    return state.result;
}

var test =
"View" +
"{" +
"    Name: View1;" +
"    Image" +
"    {" +
"        BackgroundImage: Image.gif;" +
"        Position: 0, 0;" +
"        Width: 320;" +
"        Height: 480;" +
"    }" +
"" +
"    Button" +
"    {" +
"        BackgroundImage: Button.gif;" +
"        Transition: View2;" +
"        Position: 49, 80;" +
"        Width: 216;" +
"        Height: 71;" +
"    }" +
"" +
"    Button" +
"    {" +
"        BackgroundImage: Button2.gif;" +
"        Position: 65, 217;" +
"        Width: 188;" +
"        Height: 134;" +
"    }" +
"" +
"    Label" +
"    {" +
"        Position: 106, 91;" +
"        Width: 96;" +
"        Height: 34;" +
"        Text: \"Button\";" +
"        FontSize: 32;" +
"        Color: 0.12549, 0.298039, 0.364706, 1;" +
"    }" +
"    Scroll" +
"    {" +
"        Position: 106, 91;" +
"        Width: 96;" +
"        Height: 34;" +
"        Button{" +
"            BackgroundImage: Button2.gif;" +
"            Position: 65, 217;" +
"            Width: 188;" +
"            Height: 134;" +
"        }" +
"        Button{" +
"            BackgroundImage: Button2.gif;" +
"            Position: 65, 217;" +
"            Width: 188;" +
"            Height: 134;" +
"        }" +
"" +
"    }" +
"" +
"}";

llparseFunnyFormat(test); 
```

以上是我可以从您的示例中理解的公平 LL(1) 解析器。看起来它可以满足您的需求，但边缘可能很粗糙。尤其是您可能希望处理该`infer()`函数以更好地推断它包含的数据类型。

它也不使用`eval()`- 您显然不想在通过 RPC 获得的数据中使用它。

此外，如果您研究一下，`parseTable`您会发现语法是为这种格式设计的有多糟糕。它有太多无效产品（甚至 JSON 更好！）。因此，让为您提供这些数据的人只使用 JSON 是完全有意义的，因为他们所做的肯定更糟。

**编辑：**更新代码以将同名键聚合到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:34:13.693

这应该有效：

```
str = str.replace(/(\w+)\s*\{/g, "$1:{"); // add in colon after each named object
str = str.replace(/\}(\s*\w)/g, "},$1"); // add comma before each new named object
str = str.replace(/;/g, ","); // swap out semicolons with commas
str = str.replace(/,(\s+\})/g, "$1"); // get rid of trailing commas
str = str.replace(/([\d\.]+(, [\d\.]+)+)/g, "[$1]"); // create number arrays
str = str.replace(/"/g, ""); // get rid of all double quotes
str = str.replace(/:\s+([^\[\d\{][^,]+)/g, ':"$1"');  // create strings

var obj;
eval("obj={" + str + "};");

alert(obj.View.Scroll.Button.Width); 
```

唯一的问题是您的伪 JSON 没有唯一的属性名称。例如，您`Button`在 下有两个属性`View`。我不确定你想如何解决这个问题，尽管你可以用另一个正则表达式来解决。但这至少应该解决您最初的对象创建问题。

如果您想查看它的实际效果，请查看[此 JSFiddle 。](http://jsfiddle.net/T59fL/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T18:26:01.967

好的，这应该可以。遵循确切的步骤。

> 1.  删除空格和换行符。
> 2.  用 ;"" 替换分号（分号、dblquote、dblquote）
> 3.  用“:”替换冒号（双引号冒号 dblquote）
> 4.  用 :{" 替换左大括号
> 5.  将右大括号替换为 }"

你应该完成了。

# java - 关闭 JOptionPane.showInternalOptionDialog 窗口本身

> ID：14058705
> 
> 赞同：0
> 
> 时间：2012-12-27T17:30:03.160
> 
> 标签：java, swing, fullscreen, joptionpane

```
final JFileChooser chooser = new JFileChooser(); 
JOptionPane.showInternalOptionDialog(this, chooser, "Browse",
        JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null,
        new Object[]{}, null);
            chooser.addActionListener(new ActionListener() {        
                public void actionPerformed(ActionEvent e) {
                   if(e.getActionCommand().equals(JFileChooser.APPROVE_SELECTION))

                        System.out.println("File selected: " +
 chooser.getSelectedFile());
                        //code to close here
                    } else { 
                        //code to close here
                    }
                }
            }); 
```

这段代码看起来很奇怪，但它只是我程序的一部分。我使用全屏`GraphicsDevice`。我将文件选择器放在内部**JOptionPane**中以保留全屏窗口。现在我想以编程方式关闭**JOptionPane**内部本身，而不是在我的 actionlistener 中关闭整个应用程序。怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:18:54.590

When you call showInternalOptionDialog, you cannot easily access the reference to the dialog. You could add options, ie. use

```
new Object[] { "Browse", "Cancel" } 
```

instead of

```
new Object[]{} 
```

but then you would end up having two sets of buttons. I think there is no easy way to use showInternalOptionDialog with JFileChooser. I would suggest to create JInternalFrame yourself.

```
final JFileChooser chooser = new JFileChooser();
JOptionPane pane = new JOptionPane(chooser, JOptionPane.PLAIN_MESSAGE,
            JOptionPane.DEFAULT_OPTION, null, new Object[0], null);
final JInternalFrame dialog = pane.createInternalFrame(this, "Dialog Frame");
chooser.addActionListener(new ActionListener() {

    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals(JFileChooser.APPROVE_SELECTION)) {
            System.out.println("File selected: "
                    + chooser.getSelectedFile());
        }
        dialog.setVisible(false);
    }
});
dialog.setVisible(true); 
```

Also in your code snippet you are invoking addActionListener after showInternalOptionDialog. The showInternalOptionDialog invocation will return only after you close the dialog, so the ActionListener will be created too late. You need to first addActionListener and then show the dialog.

# javascript - 在 click 方法中绑定事件

> ID：14058707
> 
> 赞同：2
> 
> 时间：2012-12-27T17:30:11.553
> 
> 标签：javascript, jquery

之前有人告诉我，我不应该在函数内部绑定事件。解决当前问题的最佳选择是什么？我单击一个链接，并从该链接中获取一些属性。这是我目前的做法。

```
$(".portfolioLink").click(function(){

            // Show slide and portfolio piece info
            $(".inner-content.portfolio").show();

            // Reset slides timer and pagination
            clearInterval($('#slides').data('interval'));
            $("ul.pagination li").removeClass("current");

            // Get ID from link that is clicked.
            var slideID = $(this).parent().attr("id");

            $("#previous").click(function() {
                slideID--;
                clearInterval($('#slides').data('interval'));
                $("ul.pagination li").removeClass("current");
                portfolioSwitch(slideID);
            });

            $("#next").click(function() {
                slideID++;
                clearInterval($('#slides').data('interval'));
                $("ul.pagination li").removeClass("current");
                portfolioSwitch(slideID);
            });
} 
```

我有两个来回按钮，它们是下一个和上一个按钮。根据我点击的链接，我想前进或后退。在点击事件之外拥有这些点击`$(".portfolioLink")`事件并同时从投资组合链接中获取这些属性的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:35:51.027

将单击事件绑定到另一个单击事件中意味着每次`.portfolioLink`单击 a 时，都会将一个新的单击函数绑定到 #previous/#next 按钮，因此如果单击两次它将增加两次`.portfolioLink`，如果单击三次则增加三次等。您可以使用更高范围的变量来解决问题，如下所示：

```
var slideID = 0;

$(".portfolioLink").click(function() {
    $(".inner-content.portfolio").show();

    clearInterval($('#slides').data('interval'));
    $("ul.pagination li").removeClass("current");

    slideID = $(this).parent().attr("id");
}

$("#previous, #next").click(function() {
    slideID = this.id=='next' ? slideID+1 : slideID-1;
    clearInterval($('#slides').data('interval'));
    $("ul.pagination li").removeClass("current");
    portfolioSwitch(slideID);
});
​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T17:35:28.360

> 之前有人告诉我，我不应该在函数内部绑定事件

在函数内部绑定事件处理程序不是问题，只有当该函数是另一个事件处理程序时。如果该其他事件处理程序将被执行多次（如在您的情况下），您将每次通常不想执行的绑定（添加）一个新的事件处理程序。

* * *

您可以使用共享变量（公共范围内的变量）...如果未设置，则在单击或单击`slideID`时不执行任何操作：`#next``#previous`

```
var slideID;

$(".portfolioLink").click(function(){
    // ...

    // Get ID from link that is clicked.
    slideID = $(this).parent().attr("id");
});

$("#previous").click(function() {
    if(typeof slideID !== 'undefined') {
       // ...
    }
});

$("#next").click(function() {
    if(typeof slideID !== 'undefined') {
       // ...
    }
}); 
```

`slideID`或者您使用默认幻灯片编号进行初始化。

# performance - 用于性能的 Vector 或 MutableList / ListBuffer

> ID：14058711
> 
> 赞同：5
> 
> 时间：2012-12-27T17:30:31.960
> 
> 标签：performance, scala, playframework-2.0, immutability

抱歉，如果这是重复的 - 我做了一些搜索，并没有找到我需要的东西。

我们的应用程序有一个性能关键部分，它将传入数据的 Play 2.0 `Enumerator`（可以被认为是 a ）转换为 a （或类似的）。我们将使用该方法，问题是什么是最高效的方法。（我将在代码中使用而不是，但想法应该是相同的。）`Stream``List``fold``Enumerator``Stream``Enumerator`

```
val incoming: Stream[Int] = ???
val result: Seq[Int] = incoming.fold(Seq.empty)(_ + _)
val result2: Seq[Int] = incoming.fold(MutableList.empty(_ += _).toSeq 
```

所以问题本质上是，重复附加到不可变代码`Vector`与重复附加到可变代码`MutableList`或`ListBuffer`性能关键代码相比如何？`List`我们只是因为我们需要`O(1)`追加（而不是前置）而被抛出。但是可变数据结构在性能或垃圾收集方面能给我们带来什么好处吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T18:09:14.357

你可能最好使用`ArrayBuffer`. 在我的机器上，您每秒可以获得以下附加数量：

```
preallocated Array[Int]    -- 830M
resized (x2) Array[Int]    -- 263M
Vector.newBuilder + result -- 185M
mutable.ArrayBuffer        -- 125M
mutable.ListBuffer         -- 100M
mutable.MutableList        --  71M
immutable.List + reverse   --  68M
immutable.Vector           --   8M 
```

我假设您并不总是只存储整数，并且您希望所有集合都没有额外的包装，因此`ArrayBuffer`只要您只需要附加到一端，性能最佳的解决方案就是这样。这些列表支持双向添加并且具有可比性。相比之下，Vector 慢得可怕——只有在您可以利用大量数据共享的情况下使用它，或者一口气创建它（见`Vector.newBuilder`结果，这太棒了；它是用于访问、迭代和创建的出色数据结构和*备用*更新，而不是一直更新）。

# maven-3 - maven install 给通过 artifactory 安装的 jar 错误

> ID：14058713
> 
> 赞同：0
> 
> 时间：2012-12-27T17:30:49.880
> 
> 标签：maven-3

我正在我们基于工件的存储库中部署一个名为**edireader.jar的特定 jar。**在 Artifactory 中 Edireader 的存储库浏览器页面中，显示了以下依赖项。我在模块的 POM.xml 中使用的相同依赖项。

```
<dependency>

<groupId>com.berryworks</groupId>

<artifactId>edireader</artifactId>

<version>4.7.3</version> 

</dependency> 
```

运行 maven install 时遇到以下错误，

```
“com.berryworks:edireader:jar:4.7.3 (compile)]: Failed to read artifact descriptor for com.berryworks:edireader:jar:4.7.3: Could not find artifact com.berryworks:berryworks:pom:4.7.3 in central (http://SERVER_Name:PORT/artifactory/libs-releases)” 
```

它正在尝试从 SERVER_Name:PORT/artifactory/libs-snapshots/com/berryworks/berryworks/4.7.3/berryworks-4.7.3.pom 下载 jar，这似乎是错误的，因为 jar 位于 //SERVER_Name:PORT/artifactory /simple/libs-releases-local/com/berryworks/edireader/4.7.3/

我尝试更改所有内容，但无法找到问题。我的问题是为什么它在 maven 安装期间没有选择 jar，因为它存在于工件服务器中。

编辑：这是我正在使用的 settings.xml

```
 <profiles>
<profile>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>libs-releases</name>
      <url>http://SERVER_Name:PORT/artifactory/libs-releases</url>
    </repository>
    <repository>
      <snapshots />
      <id>snapshots</id>
      <name>libs-snapshots</name>
      <url>http://SERVER_Name:PORT/artifactory/libs-snapshots</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>plugins-releases</name>
      <url>http://SERVER_Name:PORT/artifactory/plugins-releases</url>
    </pluginRepository>
    <pluginRepository>
      <snapshots />
      <id>snapshots</id>
      <name>plugins-snapshots</name>
      <url>http://SERVER_Name:PORT/artifactory/plugins-snapshots</url>
    </pluginRepository>
  </pluginRepositories>
  <id>artifactory</id>
</profile> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:22:55.013

我通过在 POM 中删除一些由 artifactory 创建的组件来解决上述问题

产生问题的POM如下

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.berryworks</groupId>
  <artifactId>edireader</artifactId>
  <packaging>jar</packaging>
  <version>4.7.3</version>
  <name>edireader</name>
  <url>http://maven.apache.org</url>

  <parent>
    <groupId>com.berryworks</groupId>
    <artifactId>berryworks</artifactId>
    <version>4.7.3</version>
  </parent>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.6</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.berryworks</groupId>
      <artifactId>test-tools</artifactId>
      <version>4.7.3</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.berryworks</groupId>
      <artifactId>JQuantify</artifactId>
      <version>3.3</version>
    </dependency>
    <dependency>
      <groupId>xmlunit</groupId>
      <artifactId>xmlunit</artifactId>
      <version>1.3</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
          <archive>
            <manifest>
              <addClasspath>false</addClasspath>
              <mainClass>com.berryworks.edireader.demo.EDItoXML</mainClass>
            </manifest>
          </archive>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </reporting>

</project> 
```

现在它只包含以下内容并且正在工作

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.berryworks</groupId>
  <artifactId>edireader</artifactId>
  <packaging>jar</packaging>
  <version>4.7.3</version>
  <name>edireader</name>
  <url>http://maven.apache.org</url>
</project> 
```

# wxpython - wxpython演示代码richtextctrl

> ID：14058720
> 
> 赞同：0
> 
> 时间：2012-12-27T17:31:58.747
> 
> 标签：wxpython

我正在使用 wxrichtextctrl 开发一个程序。我坚持为选择设置字体。经过大量谷歌搜索后，我找到了 wxpython 演示，在那里我找到了一个示例。以下是来自 wxpython 演示的原始代码，它正在生成一个错误。

```
 def OnFont(self, evt):
    if not self.rtc.HasSelection():
        return

    r = self.rtc.GetSelectionRange()
    fontData = wx.FontData()
    fontData.EnableEffects(False)
    attr = wx.TextAttr()
    attr.SetFlags(wx.TEXT_ATTR_FONT)
    if self.rtc.GetStyle(self.rtc.GetInsertionPoint(), attr):#line is generating error
        fontData.SetInitialFont(attr.GetFont())

    dlg = wx.FontDialog(self, fontData)
    if dlg.ShowModal() == wx.ID_OK:
        fontData = dlg.GetFontData()
        font = fontData.GetChosenFont()
        if font:
            attr.SetFlags(wx.TEXT_ATTR_FONT)
            attr.SetFont(font)
            self.rtc.SetStyle(r, attr)#generating error
    dlg.Destroy() 
```

如果 self.rtc.GetStyle(self.rtc.GetInsertionPoint(), attr): File "C:\Python27\lib\site-packages\wx-2.9.4-msw\wx\richtext.py"，我会收到错误消息，第 3121 行，在 GetStyle **TypeError 中：在方法 'RichTextCtrl_GetStyle' 中，预期参数 3 类型为 'wxRichTextAttr &'**。

文件“C:\Python27\lib\site-packages\wx-2.9.4-msw\wx\richtext.py”，第 3111 行，在 SetStyle return _richtext.RichTextCtrl_SetStyle(*args, **kwargs) TypeError: in method ' RichTextCtrl_SetStyle'，'wxRichTextAttr const &' 类型的预期参数 3

我正在使用 windows xp 和 wxpython 2.9 python 2.7。在演示中，字体和颜色也不起作用。getstyle 和 setstyle 正在生成错误。显然正因为如此，字体和颜色在 wxpython 演示中的richtextctrl 演示中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:28:44.747

您找到的示例代码可能适用于较旧的 wxPython 版本，这就是它不起作用的原因。

代替：

```
attr = wx.TextAttr() 
```

和：

```
attr = wx.richtext.RichTextAttr() 
```

这适用于`wx 2.8.12`和`wx 2.9.4`。

# cakephp - 在连接表 cakephp 中选择元素

> ID：14058722
> 
> 赞同：0
> 
> 时间：2012-12-27T17:32:05.337
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我尝试在 cakephp 中选择一个 id。我有这个：

```
 public function start($id = null) {
        $this->Round->id = $id;
} 
```

我尝试从一轮中获取项目 _id。proyect和round在BD有关系。我这样做但它不起作用：

```
 public function start($id = null) {
            $this->Round->id = $id;
            $this->Round->Project->id
           } 
```

和这个：

```
 public function start($id = null) {
                 $this->Round->id = $id;
                 $this->Round->project_id
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:07:44.883

好的，也许让我们尝试以简单的方式来做。Round 和 Proyect 有关系，所以如果你在他们的 ID 之间有关系，你可能可以这样做：

```
$proyect_id = $this->Round->field('proyect_id')); 
```

更改此 proyect_id

```
field('proyect_id')); 
```

到圆桌会议中外键的列名。它应该从 Proyect 表中返回 ID 列的值。

# groovy - 带有元类的 Groovy 扩展运算符

> ID：14058729
> 
> 赞同：0
> 
> 时间：2012-12-27T17:32:53.067
> 
> 标签：groovy

为什么这不起作用？

```
 shareholders*.metaClass.editing = false; 
```

但这有吗？

```
 shareholders.collect{it.metaClass.editing = false} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:33:34.133

您不能在 groovy 中以这种方式分配多个值，`[1, 2, 3] = 4`也不起作用

除非你需要一个列表，否则你`false`最好使用`each`而不是`collect`

# delphi - 如何在 delphi 程序中调用 TRichEdit 方法

> ID：14058732
> 
> 赞同：1
> 
> 时间：2012-12-27T17:33:04.610
> 
> 标签：delphi, vcl, procedure, trichedit

我再次向大家致敬，当然，在编码时遇到了另一个问题。

我写了以下片段：

```
procedure add_text(text : String);
begin
  MsgBox.SetFocus;
  MsgBox.SelStart := MsgBox.GetTextLen;
  MsgBox.Perform(EM_SCROLLCARET, 0, 0);
  MsgBox.SelText := time_stamp + ' ' + text + #13#10; //time_stamp is a function
end; 
```

问题是，我怎样才能在一个过程中访问那些 MsgBox 的方法？（由于“未声明的标识符 MsgBox”，程序无法编译

注意：如果不够清楚，请编辑问题。注意2：也尝试使用 TChatForm.MsgBox / ChatForm.MsgBox 但仍然不成功..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:41:18.173

只需使用您的 Richedit 作为参数调用程序：

```
procedure add_text(MsgBox:TRichedit;const text : String);
begin
  MsgBox.SetFocus;
  MsgBox.SelStart := MsgBox.GetTextLen;
  MsgBox.Perform(EM_SCROLLCARET, 0, 0);
  MsgBox.SelText := time_stamp + ' ' + text + #13#10; //time_stamp is a function
end; 
```

# ruby - 在 Ruby 中压缩 Gzip 字符串

> ID：14058733
> 
> 赞同：2
> 
> 时间：2012-12-27T17:33:05.530
> 
> 标签：ruby, compression, gzip, deflate

我将如何编写一种方法来压缩不包含头文件的 Gzip 字符串，并将其压缩到我解压缩它之前的完全相同的方式。原始压缩是在 C# 中完成的，我在 Ruby 中使用以下方法进行膨胀：

编辑：基本上，**我**想要这个膨胀匹配的 deflate 方法：

```
def inflate(string)
    zstream = Zlib::Inflate.new(-Zlib::MAX_WBITS)
    buf = zstream.inflate(string)
    zstream.finish
    zstream.close
    buf
end 
```

解压前的字符串为：

```
"5\x891\n\xC30\x10\x04{\xBDb\xEB\xE0F&\x81\xA4\xCA3\xDC\xA81\xD2\x1A]\xA1\x13\xB1.\x100\xFEF\xDE\e\x19\x9Cb\x99Yf\xCA\xB3A\x1A,\x13\xB1\x96R\x15I\x96\x85+5\x12\xA2=\xF4:\xAFb\xB9\xD0$\xA2\xF1\xF5>\xDA\xD3\xB9\x9A\xA8f\xFC\xD8\xE6\xFD\x00\x7F\xEB{\f!Uk{\xCF,\x91\xDC\x1C\x10J\xC4\xF7z\xCA\xE8p9\xF8\xFF\xF7\x93\xDEw\xD9\x7F" 
```

使用inflate解压后是：

```
 "What is the common difference in this arithmetic sequence?\n\n\\indenttext{11, 15, 19,\\dots}\n\n\\emcee{\n  \\mc \x964\n  \\mc 2\n *\\mc 4\n  \\mc 8\n  \\mc 11\n  }" 
```

我尝试过创建多个放气方法，但没有一个可以将其恢复为原始方法。谢谢你的帮助！

编辑：原始压缩是在 .NET 2.0 中使用以下方法完成的

```
byte[] compressedStringBytes = CompressGzipString(String); 
```

和 CompressGzipString 做：

```
MemoryStream compressed = new MemoryStream();
DeflaterOutputStream zosCompressed = new DeflaterOutputStream(compressed, new Deflater(Deflater.BEST_COMPRESSION, true));
zosCompressed.Write(data, 0, data.Length); 
```

如果无法将其还原为确切的原始文件，那么最标准化的压缩是什么，我的意思是一般压缩，并且能够以与原始文件相同的方式进行解压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:50:45.890

这取决于它在 C# 中是如何被压缩的；在 .NET 4.5 之前`System.IO.DeflateStream/GZipStream`，C# 中的类使用了与 zlib 显着不同的 Microsoft 实现的 DEFLATE（这意味着您可能无法使用 zlib 轻松模拟它）。在几乎所有情况下都更糟，所以在 .NET 4.5 中，他们用 zlib 替换了它，它*应该*能够匹配你在 Ruby 中可以做的事情。

如果您知道生成字符串的 C# 版本，您可以确定是否可以返回原始字节。如果它是使用 .NET 4.5 生成的，您应该能够使用相同的设置进行标准放气以获得相同的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:05:21.133

不同的压缩器，相同压缩器的不同版本，或具有不同设置的相同压缩器的相同版本，即使它们都使用相同的压缩数据格式（例如放气），也可以并且经常会为相同的输入产生不同的输出。唯一可以保证的是，当您解压缩时，您会得到与开始时完全相同的东西。事实上，这就是您真正需要的保证。为什么你想要完全相同的压缩流？

正如 Ron Warholic 所指出的，您甚至不*希望*从 .NET 4.5 之前的 .NET 损坏的 deflate 实现中恢复相同的压缩输出。由于 .NET 2.0 使用了它自己独特的、损坏的、deflate 实现，你不能用使用 zlib 的 ruby​​ 来复制它。

同样正如 Ron Warholic 所指出的，ruby 和 .NET 4.5 或更高版本都使用 zlib，因此都应该使用相同的压缩级别产生相同的压缩输出。虽然这不能永远保证，因为新版本的 zlib 可能会产生不同的输出，而 ruby​​ 或 .NET 中的一个可能会更新到它，而另一个不会。同样如下所述，您无法直接控制 .NET 类的压缩级别。

> 如果无法将其还原为确切的原始文件，那么最标准化的压缩是什么，我的意思是一般压缩，并且能够以与原始文件相同的方式进行解压缩？

无损压缩和解压缩的任何正确实现都将具有此属性。无论压缩数据可能有何不同，您都将始终返回到确切的原始数据。没有“最标准化的压缩”。

您`Zlib::Inflate.new(-Zlib::MAX_WBITS)`期待一个原始的放气流，没有标题或预告片。因此，您需要在 C# 端生成它。

从[.NET 文档](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)中不清楚`DeflateStream`该类是压缩为 deflate 格式还是 zlib 格式（后者是带有 zlib 包装器的 deflate 格式，由两个前缀字节和四个后缀字节组成，用于数据完整性检查）。如果它压缩为 deflate 格式，那么它将与您的`Zlib::Inflate.new(-Zlib::MAX_WBITS)`. 如果它压缩为 zlib 格式，那么它将兼容`Zlib::Inflate.new(Zlib::MAX_WBITS)`（即没有减号）。或者您可以删除前两个字节和最后四个字节以返回放气流。

.NET 中的`DeflateStream`类有点奇怪，因为它[`CompressionLevel`](http://msdn.microsoft.com/en-us/library/system.io.compression.compressionlevel.aspx)只有`enum`三个选项，而不是 zlib (0..9) 提供的十个级别。三个选项是`Optimal`、`Fastest`和`NoCompression`。最后一个必须是0，第一个可能是9，中间一个可能是1或3。无论如何，默认压缩级别是没有选项的！该级别 (6) 是压缩与时间的非常好的平衡。

您可能要考虑改用[DotNetZip](http://dotnetzip.codeplex.com/)。它为 zlib 提供了一个完整的接口，因此您可以准确地指定您想要做什么，并知道会发生什么。

# json - 无法将我的扩展程序提交到 Chrome 网上应用店：“发生错误：清单无效。”

> ID：14058738
> 
> 赞同：0
> 
> 时间：2012-12-27T17:33:49.243
> 
> 标签：json, google-chrome-extension, manifest, chrome-web-store

我正在尝试向 Chrome 网上应用店提交 Google Chrome 扩展程序，但出现以下错误：

> 发生错误：清单无效。如果您的清单包含评论，请删除它们，因为我们的画廊还不支持它们。

这是我的 manifest.json：

```
{
    "name": "IMGit Image Uploader",
    "version": "1",
    "description": "Easy and fast image uploading from a simple right click.",
    "background": {"page": "imgit.html"},
    "icons": {
        "16": "16.png",
        "48": "48.png",
        "128": "128.png"
    },
    "permissions": ["contextMenus","tabs","http://*/*","https://*/*",],
    "manifest_version": 2,
} 
```

Adobe Dreamweaver 在第 2 行显示语法错误。不知道为什么。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:16:05.723

尝试去掉JSON*中*多余的逗号：

```
{
"name": "IMGit Image Uploader",
"version": "1",
"description": "Easy and fast image uploading from a simple right click.",
"background": {
    "page": "imgit.html"
},
"icons": {
    "16": "16.png",
    "48": "48.png",
    "128": "128.png"
},
"permissions": [
    "contextMenus",
    "tabs",
    "http://*/*",
    "https://*/*"
],
"manifest_version": 2
} 
```

[您可以在此处](http://jsonlint.com/)验证您的 JSON 文件。

# jquery - jquery 按钮单击以作用于特定的 div 子级

> ID：14058739
> 
> 赞同：0
> 
> 时间：2012-12-27T17:34:05.370
> 
> 标签：jquery, children

我有一组按钮，当它们被点击时，我希望第一个孩子没有 css 显示，第二个孩子有 css 显示块，对于所有按钮，它不太工作，这就是我有。

JS：

```
$(".btn").click(function () {
  $(".btn:nth-child(2)").css ({
    display: "none"
  });
  $(".btn:nth-child(1)").css ({
    display: "block"
  });  
}); 
```

.btn 的结构

```
<div id="bow" class="btn" data-filter=".bow">
  <img class="filter_icon" src="http://www.klossal.com/klossviolins/icons/bow_icon.png" alt="">
  <img class="filter_icon not_selected" src="http://www.klossal.com/klossviolins/icons/bow_icon_selected.png" alt="">  
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:36:44.583

```
$(".btn").click(function () {
  $(this).find("img:nth-child(1)").css ({
    display: "none"
  })
  .end()
  .find("img:nth-child(2)").css ({
    display: "block"
  });  
}); 
```

# c# - 如何从客户端网络摄像头获取图像

> ID：14058741
> 
> 赞同：0
> 
> 时间：2012-12-27T17:34:10.917
> 
> 标签：c#, asp.net, twain

我正在寻找创建一个 ASP.Net 网站，用户可以在其中从那里的网络摄像头捕获图像并将其保存到我服务器上的数据库中。我曾尝试使用 TWAIN，但似乎找不到任何支持此功能的新相机。尝试使用 Silverlight 和 WIA 时也是如此。有没有人在这方面取得任何成功？

客户端计算机将配备我推荐的任何网络摄像头，因此如果您知道可行的型号，请分享。我已经尝试过 Microsoft LifeCam 和 Logitech，但都没有成功。

如果你已经这样做了，或者现在我真的很感激一些帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:00:49.793

如果您的目标是较新的浏览器（那些支持 WebRTC getUserMedia 方法的浏览器），那么 Photobooth.js 可能是您的选择。

引自 WebMonkey：“吸引我们眼球的最新 WebRTC 热点是开发人员 Wolfram Hempel 的 Photobooth.js，这是一个用于与设备相机配合使用的 JavaScript 库。”

[http://www.webmonkey.com/2012/12/add-an-html5-webcam-to-your-site-with-photobooth-js/](http://www.webmonkey.com/2012/12/add-an-html5-webcam-to-your-site-with-photobooth-js/)

和库本身：

[http://wolframhempel.com/2012/12/02/photobooth-js/](http://wolframhempel.com/2012/12/02/photobooth-js/)

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:46:26.247

asp.net 是一种服务器端技术，无法连接到客户端网络摄像头。您的浏览器高度沙盒化，不太可能允许访问用户的网络摄像头。

考虑构建 Flash 或 Silverlight 组件来访问网络摄像头。

对此的例外是，在许多移动平台上，浏览器可以通过`<input type="file" />`标签访问相机和图片存储。这在 Android 上已经有一段时间了，现在是 Safari v6 的一个选项。我不知道任何允许直接访问附加网络摄像头的桌面浏览器。

奖励解决方法是让用户拍照，然后通过文件上传访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:43:37.650

通过让用户在计算机上安装 Google Chrome Frame，然后使用 canvas 标签获取图像，我能够完成我想要的。效果很好，这里有一些示例代码：

```
 <div>

        <p id="status" style="color:red">
            <noscript>JavaScript is disabled.</noscript>
        </p>

        <table>
            <tr>
                <td>
                    <input id="btnTakePicture" type="button" value="Take Picture"; />
                </td>
                <td>
                    <input id="btnSave" type="button" value="Save Picture"; />
                </td>
            </tr>
        </table>

        <asp:Button ID="btnSavePicture" runat="server" Text="HiddenSave" OnClick="btnSavePicture_Click" CssClass="hiddencol"  />

        <asp:Panel ID="pnlHide" runat="server" style="display:none" >    
            <textarea id="eventdata" rows="18" cols="1" style="width: 100%" runat="server"></textarea>
        </asp:Panel>

        <script type="text/javascript">

                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia || navigator.msGetUserMedia;

                var webcam = (function () {

                    var video = document.createElement('video'),
                    photo = document.createElement('canvas');

                    function play() {

                        if (navigator.getUserMedia) {

                            navigator.getUserMedia({ video: true, audio: true, toString: function () { return "video,audio"; } }, onSuccess, onError);

                        } else {

                            changeStatus('getUserMedia is not supported in this browser.', true);
                        }

                    }

                    function onSuccess(stream) {

                        var source;

                        if (window.webkitURL) {

                            source = window.webkitURL.createObjectURL(stream);

                        } else {

                            source = stream; // Opera and Firefox
                        }

                        video.autoplay = true;

                        video.src = source;

                        changeStatus('Connected.', false);

                    }

                    function onError() {

                        changeStatus('Please accept the getUserMedia permissions! Refresh to try again.', true);

                    }

                    function changeStatus(msg, error) {
                        var status = document.getElementById('status');
                        status.innerHTML = msg;
                        status.style.color = (error) ? 'red' : 'green';
                    }

                    // allow the user to take a screenshot
                    function setupPhotoBooth() {
                        //var takeButton = document.createElement('button');
                        var takeButton = document.getElementById('btnTakePicture');
                        //takeButton.innerText = 'Take Picture';
                        takeButton.addEventListener('click', takePhoto, true);
                        //document.body.appendChild(takeButton);

                        //var saveButton = document.createElement('button');
                        var saveButton = document.getElementById('btnSave');
                        //saveButton.id = 'btnSave';
                        //saveButton.innerText = 'Save Picture';
                        saveButton.disabled = true;
                        saveButton.addEventListener('click', savePhoto, true);
                        //document.body.appendChild(saveButton);

                    }

                    function takePhoto() {

                        // set our canvas to the same size as our video
                        photo.width = video.width;
                        photo.height = video.height;

                        var context = photo.getContext('2d');
                        context.drawImage(video, 0, 0, photo.width, photo.height);

                        // allow us to save
                        var saveButton = document.getElementById('btnSave');
                        saveButton.disabled = false;

                        var data = photo.toDataURL("image/png");

                        data = data.replace("image/png", "");

                        document.getElementById("<%= eventdata.ClientID %>").value = data;

                    }

                    function savePhoto() {
                        //                        var data = photo.toDataURL("image/png");

                        //                        data = data.replace("image/png", "image/octet-stream");

                        //                        document.getElementById("<%= eventdata.ClientID %>").value = data;
                        //                        document.location.href = data;

                        SendBack();
                    }

                    return {
                        init: function () {

                            changeStatus('Please accept the permissions dialog.', true);

                            video.width = 320;
                            video.height = 240;

                            document.body.appendChild(video);
                            document.body.appendChild(photo);

                            navigator.getUserMedia || (navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

                            play();
                            setupPhotoBooth();

                        } ()

                    }

                })();

            function SendBack() {
                var btn = document.getElementById("<%= btnSavePicture.ClientID %>");
                btn.click();
            }

    </script>

    </div> 
```

# c# - SMTP 客户端不翻译内联 HTML

> ID：14058742
> 
> 赞同：0
> 
> 时间：2012-12-27T17:34:18.460
> 
> 标签：c#, .net, smtpclient

我在使用 SMTP/.NET 邮件将内联 HTML 发送到电子邮件时遇到问题。我已经尝试过标准类以及 MailDefininition 类，但我不断地内联原始代码，而不是翻译的页面。

我知道这可能是我缺少的一些小东西，下面是我的代码。谢谢

```
 public static void SendMail(string toAddress,  string subject, string messageBody)
    {
        MailDefinition message = new MailDefinition();
        message.CC = MailCCAddress;
        message.From = "orders@test.com";
        message.Subject = subject;
        message.IsBodyHtml = true;
        ListDictionary replacements = new ListDictionary();

        System.Net.Mail.MailMessage fileMsg;
        fileMsg = message.CreateMailMessage(toAddress, replacements, messageBody, new System.Web.UI.Control());

        string _hostName = HostName;

        SmtpClient client = new SmtpClient(_hostName);
        client.Credentials = CredentialCache.DefaultNetworkCredentials;
        //client.Send(message);
        client.Send(fileMsg);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:17:17.487

`MailMessage`如果您仍然遇到问题，您可能还希望设置Body-Encoding。例如，

```
//Nick's code
MailMessage mail = new MailMessage("orders@test.com", toAddress, subject, messageBody);
mail.IsBodyHtml = true;

//set encoding
mail.BodyEncoding = Encoding.UTF8; //or SevenBit, etc, whatever is appropriate.

//send
SmtpClient client = new SmtpClient(_hostName);
client.Send(mail); 
```

您还可以使用 AlternateViews 集合，它可以让您更好地控制内容的 MIME 类型（因此您可以将其指定为 text/html 等）。您还可以使用它来选择性地包含*纯*文本版本和 HTML 版本，如下所示：

```
//create the mail message
MailMessage mail = new MailMessage("orders@test.com", toAddress) { Subject = subject };

//first we create the Plain Text part
AlternateView plainView = AlternateView.CreateAlternateViewFromString("This is my plain text content, viewable by those clients that don't support html", null, "text/plain");
//then we create the Html part
AlternateView htmlView = AlternateView.CreateAlternateViewFromString("<b>this is bold text, and viewable by those mail clients that support html</b>", null, "text/html");

//add both views
mail.AlternateViews.Add(plainView);
mail.AlternateViews.Add(htmlView);

//send the message as before 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:49:02.600

```
MailMessage mail = new MailMessage("orders@test.com", toAddress, 
    subject, messageBody);

mail.IsBodyHtml = true;
SmtpClient client = new SmtpClient(_hostName);
client.Send(mail); 
```

如果这不起作用，则可能是您的 messageBody 有问题。您可以尝试调试代码，看看 messageBody 不是正确的 html 是否存在问题，或者它可能有一些字符被转义。

# jquery - 客户端验证

> ID：14058744
> 
> 赞同：0
> 
> 时间：2012-12-27T17:34:24.217
> 
> 标签：jquery, asp.net, validation

我是 asp.net 编程的新手。

我在 gridView 中有以下模板字段。

```
<asp:TemplateField
    HeaderText="Delete"
    <ItemTemplate>
        <asp:LinkButton
            runat="server"
            ID="lnkDelete"
            OnCommand="lnkDelete_Command"
            CommandArgument='<%#Eval("ItemID")%>'
            OnClientClick="showDeleteVerifiction()"
         </asp:LinkButton>
.... 
```

所以现在，我的删除按钮在我的 gridView 中工作。您可以假设函数 lnkDelete_Command 删除具有相应`ItemID`.

我想添加一个客户端（JS/Jquery）检查，以便能够提示用户是否要删除该项目，但我不完全确定如何执行此操作。

提前致谢。

编辑：

看了一些教程后，我尝试了以下方法：

```
showDeleteVerification = function()
{
    alert("not letting this pass");
    return false;
} 
```

但是，当我单击“确定”时，该项目仍然被删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:38:19.693

您需要添加`client`点击事件作为使用[**确认**](http://www.w3schools.com/js/js_popup.asp)javascript 功能。要绑定 onclick javascript 事件，您需要使用 asp.net 提供的[**OnClientClick 。**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.onclientclick%28v=vs.80%29.aspx)

确认功能将返回`true`或`false`为确定或取消。如果返回 true，您将有回发，而对于 false，则不会有回发。

```
OnClientClick="return confirm('Are you sure you want to delete');" 
```

如果您想调用您在问题中提到的函数：

```
<asp:LinkButton
        runat="server"
        ID="lnkDelete"
        OnCommand="lnkDelete_Command"
        CommandArgument='<%#Eval("ItemID")%>'
        OnClientClick="return showDeleteVerifiction()"
</asp:LinkButton>

function showDeleteVerification()
{
    return confirm("Are you sure you want to delete");        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:41:42.793

我认为您可以使用确认来实现您的结果：

而不是`alert`使用`confirm`

```
showDeleteVerification = function()
{
    confirm("not letting this pass");
    return false;
} 
```

# c# - System.InvalidCastException：对象不能从 DBNull 转换为其他类型

> ID：14058745
> 
> 赞同：6
> 
> 时间：2012-12-27T17:34:23.663
> 
> 标签：c#, oracle

我的代码中有一个例外。我已经尝试将我的 int64 更改为 int32 但这并没有改变它。

在数据库中，表示“column_ID”的单元格具有数据类型 NUMBER。

问题出在此代码的第 7 行：

```
private void dataGridView_ArticleINVIA_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.RowIndex >= 0 && e.RowIndex <= (sender as DataGridView).Rows.Count - 1)
    {
        try
        {
            Int64 id_riga = Convert.ToInt64((sender as DataGridView).Rows[e.RowIndex].Cells["column_ID"].Value);
            //Exception thrown here:
            int id_macchina = Convert.ToInt32((sender as 
                DataGridView).Rows[e.RowIndex].Cells["column_Machine"].Value);
            FormRecipeNote PopUpNote = new FormRecipeNote(id_macchina, 
                "MODIFICA", id_riga, 0);
            PopUpNote.ShowDialog(this);
            PopUpNote.Dispose();
         }
         catch (Exception Exc)
         {
             FormMain.loggerSoftwareClient.Trace(this.Name + " " + Exc);
         }
         //DataGrid_ArticleINVIA();
    }
} 
```

错误是：

```
System.InvalidCastException: Object cannot be cast from DBNull to other types.
   at System.DBNull.System.IConvertible.ToInt64(IFormatProvider provider)
   at System.Convert.ToInt64(Object value)
   at Software_Client.FormSendReceiveRecipe.dataGridView_ArticleINVIA_CellDoubleClick(Object sender, DataGridViewCellEventArgs e) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T17:38:09.323

正如错误消息所说，单元格的值是`DBNull.Value`并且它无法从它转换为您想要的任何值（在本例中为 a`long`或 an `int`）。您需要`DBNull`在转换/转换号码之前检查：

```
Int64 id_riga = 0;
object value = (sender as DataGridView).Rows[e.RowIndex].Cells["column_ID"].Value;
if(value != DBNull.Value) 
    id_riga = Convert.ToInt64(value); 
```

因为这会增加一些烦人的开销，所以如果你做了这么多，你可能想要创建一个帮助方法来为你做这件事。

```
public static long? getLongFromDB(object value)
{
    if (value == DBNull.Value) return null;
    return Convert.ToInt64(value);
} 
```

那么你的代码可以是：

```
Int64 id_riga = getLongFromDB((sender as DataGridView).Rows[e.RowIndex].Cells["column_ID"].Value)
    .GetValueOrDefault(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T17:36:58.960

您可以将有问题的行更改为：

```
int id_macchina = ((sender as DataGridView).Rows[e.RowIndex].Cells["column_Machine"].Value as int?).GetValueOrDefault(); 
```

`id_macchina`如果数据库中列的值为空，这将为变量提供默认值 int (0) `column_Machine`（将`DBNull`在 C# 中）

尝试这个：

```
object aa = DBNull.Value;
int a = (aa as int?).GetValueOrDefault(); 
```

它会起作用的！如果列是 ，则该值将为 0 `DBNull`。

*** 编辑 ***

但是尝试使用别的东西，这样可能会隐藏一些bug，比如改变数据类型，如果类型是long而不是数据库中的int，会一直给变量赋值0，我以前也遇到过这种情况，感谢@hvd 在他的评论中表明这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:25:02.387

我对你的一些评论感到有些困惑。例如，在您的代码中，注释表明包含的行`ToInt32`是错误发生的位置，但错误消息清楚地表明错误是从内部抛出的`ToInt64`。

另外，您说数据库中的值不为空。如果这是真的，您将不会获得 DBNull 值，因此可能值得稍微扩展您的代码，以便您可以放置​​一些断点并在尝试转换单元格之前直接检查单元格中的值。

我在下面发布了一些您可以使用的示例代码，包括一个您可能会觉得有用的转换辅助函数。

```
//--------- inside the try block of your event handler -----------//
        var row = (sender as DataGridView).Rows[e.RowIndex];
        object objId = row.Cells["column_ID"].Value;
        object objMachine = row.Cells["column_Machine"].Value;
        // place a breakpoint on the line below, 
                    // so you can inspect the "obj..." values above to see
                    // if they are DBNull or not.

        var id_riga = objId.FromDb<Int64>();
        var id_macchina = objMachine.FromDb<Int32>();
//-----------continue your code here---------//

//----outside the form class, possibly in a separate file -----/
static class DbObjectExtensions {
    public static T FromDb<T>(this object dbObj, T defaultValueIfNull = default(T)) where T : IConvertible {
        if (Convert.IsDBNull(dbObj))
            return defaultValueIfNull;
        if (dbObj is T)
            return (T)dbObj;
        return (T)Convert.ChangeType(dbObj, typeof(T));
    }
} 
```

我还想澄清我在上面看到的一条评论，上面写着“......它不是空的，它是 DBNull。两者是不同的”。在 C# 中，该陈述通常是正确的，但在其编写的上下文中它实际上具有误导性。它是针对先前的评论写的，上面说“[I] 检查了数据库的值并且不是 NULL”。为澄清起见，在大多数 .Net 数据库提供程序中，数据库字段中的 NULL 由 DBNull 表示。所以实际上，数据库中的 NULL 值通常与 C# 中的 DBNull 相同。因此，如果 OP 正确地说数据库值不是 NULL，那么它*确实*遵循单元格值不应该是 DBNull。

当然，`null`与 不一样仍然是正确的`DBNull`，因此检查对象是否为 null 并不能确定它是否为 DBNull，（但这不是 OP 所说的）。

最后一点，我写的扩展方法`FromDB`，包含一个可选参数，用于在传递的对象是 DBNull 的情况下默认返回值。这可以按如下方式使用：

```
//assuming -1 isn't a valid 
var id_riga = objId.FromDb<Int64>(-1); id
if (id_riga == -1) { /*handle case for null db value*/ } 
```

根据您自己的个人喜好，上述范例可能比其他答案中描述的 Nullable 版本更容易理解。

# c# - 在 SQL 中值为 null 时显示状态，例如已发送

> ID：14058751
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:34:44.397
> 
> 标签：c#, sql, string, null

我正在为我们的一些最终用户用 C# 编写一个 Windows 窗体应用程序，它基本上根据客户帐号在我们的一个表中清空了一个值。我正在使用 a`SqlDataAdapter`来执行此操作，它看起来像这样：

```
string acct_no = "".Trim();

da3.SelectCommand = new SqlCommand
            ("UPDATE prod.dbo.chartqueue" +
            "SET prod.dbo.chartqueue.sent_datetime = null" +
            "FROM prod.dbo.casemain" +
            "WHERE prod.dbo.casemain.casemain_id = hsmprod.dbo.chartqueue.casemain_id" +
            "AND prod.dbo.casemain.acct_num = @acct_no", cs5);

da3.SelectCommand.Parameters.AddWithValue("@acct_no", acct_no); 
```

我想做的是返回一个字符串，其值表示`Sent`或`Failed`取决于该列是否返回空值。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:41:30.023

您应该修改查询以包含在 where 子句中：`and hsmprod.dbo.chartqueue.sent_datetime is not null`。DataAdapter.Update 返回一个 int，它告诉您更新了多少行。如果它为零，您知道该字段已经包含一个空值，如果它是 1，您知道该字段不为空值。然后，您可以`return rowsUpdated == 0 ? "Failed" : "Sent";`根据您认为“失败”的内容执行或反之亦然。

# php - 从magento中的模型返回值

> ID：14058753
> 
> 赞同：0
> 
> 时间：2012-12-27T17:35:02.683
> 
> 标签：php, magento, model

我正在学习magento。我有一个模型，如下所示。

```
class Kaushikamdotcom_Test_Model_Validator extends Varien_Object {

    private $errors = array();

    public function validate($_post) {
        $validator = new Zend_Validate_NotEmpty();
        $validator->setMessages(
            array(
                Zend_Validate_NotEmpty::IS_EMPTY => "This field cannot be empty"
            )
        );
        if(isset($_post['save'])) {
            if(! $validator->isValid($_post['title'])) {
                $this->errors['title'] = "This field cannot be empty";      
            }
            if(! $validator->isValid($_post['filename'])) {
                $this->errors['filename'] = "This field cannot be empty";
            }
        }
    }

    public function getErrors() {
        return $this->errors;
    }
} 
```

在控制器中，我使用如下**验证**方法：

```
public function indexAction() {
    $this->loadLayout();
    $validator = Mage::getSingleton('test/validator');      
    if ($this->getRequest()->isPost()) {
        $validator->validate($this->getRequest()->getPost());
    }
    $this->renderLayout();
} 
```

我在块中调用模型（从**Mage_Core_Block_Template**扩展），如下所示：

```
public function _construct() {
   $this->validator = Mage::getSingleton('test/validator');
   $this->errors = $this->validator->getErrors();
   parent::_construct();
} 
```

下面的代码给了我返回值

```
public function getError($_key) {
   $errors = $this->validator->getErrors();
   return (isset($errors[$_key])) ? $errors[$_key] : '';
} 
```

如果使用以下代码而不是上面的代码，它不会给出任何返回值

```
public function getError($_key) {
   return (isset($this->errors[$_key])) ? $this->errors[$_key] : '';
} 
```

正如我们`$this->errors`在构造函数中初始化的那样，为什么它没有返回任何值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:11:28.507

问题中没有足够的信息来提供具体的答案，但总的来说，它不会返回任何值，因为您的`errors`数组没有**您在填充时**传入的键。

这是一个猜测，但你打电话给

```
$this->validator->getErrors(); 
```

看起来它返回一个 PHP 数组，而不是一个对象。因此，当您在 中调用它时`_construct`，`getErrors`将返回一个空数组。

但是，在`_construct`被调用和调用之间`getError`，系统状态发生了一些变化（可能创建了您尝试验证的表单和/或信息），因此对

```
$this->validator->getErrors(); 
```

返回一个新的 PHP 数组，这个数组填充了错误消息。但是，下面的代码

```
public function getError($_key) {
   return (isset($this->errors[$_key])) ? $this->errors[$_key] : '';
} 
```

仅引用在`_construct`. PHP 数组并不完全是对象——它们的行为更像原始值。它**不会**自动更新自身。

# powershell - 使用 powershell 卸载应用程序组

> ID：14058756
> 
> 赞同：1
> 
> 时间：2012-12-27T17:35:12.773
> 
> 标签：powershell

我正在使用以下命令获取要卸载的应用程序组：

```
$app = Get-WmiObject -Class Win32_Product | Where-Object {  $_.Name -match "Microsoft sql" } 
```

$app 是应用程序列表。我可以卸载整个组还是必须使用 foreach 循环？

PowerShell 版本 -3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:10:50.860

您将获得一个*对象数组*，该数组描述了一组*单独*的应用程序 (ManagementObject)。

应用程序单独卸载。使用 % 循环！

```
$app | % { $_.Uninstall() } 
```

# intellij-idea - 如何导出 IntelliJ 主题？

> ID：14058761
> 
> 赞同：14
> 
> 时间：2012-12-27T17:35:37.243
> 
> 标签：intellij-idea

当我修改我的配色方案时，`IntelliJ`要求我将其另存为新的。我是否可以在一台计算机上导出此主题以便重新导入另一台计算机？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-27T17:49:53.337

`File`| `Export Settings`（仅启用**配色方案**或您需要导出的一组选项）。在另一台机器上使用`File`| `Import Settings`.

另请参阅[帮助部分](http://www.jetbrains.com/idea/webhelp/exporting-and-importing-settings.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-19T02:54:04.103

如果您只想要一种仅导出配色方案的方法：

前往`File`| `Settings`在 Windows 或`IntelliJ IDEA`| `Preferences`在 Mac 上。然后，转到`Editor`→<code>Color Scheme，单击看起来像齿轮/齿轮的图标，然后单击 Export。

# ruby-on-rails - 用户控制器中的 NoMethodError#create

> ID：14058762
> 
> 赞同：1
> 
> 时间：2012-12-27T17:35:48.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在浏览 railstutorial.org 的书并收到错误消息

当我注册表格时出现错误

用户控制器中的 NoMethodError#create

我的 user_controller 类是

```
class UsersController < ApplicationController

    def new
        @user = User.new
    end

    def show
        @user = User.find(params[:id])
    end

    def create
        @user = User.new(params[:user])
        if @user.save
            redirect to @user
        else
        render 'new'
        end
    end

end 
```

routes.rb 文件是

```
SampleApp::Application.routes.draw do
  resources :users

  root to: 'static_pages#home'

 match '/signup', to: 'users#new'

match '/help' , to:'static_pages#help'
match '/about' ,to:'static_pages#about'
match '/contact' , to: 'static_pages#contact'

  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id))(.:format)'
end 
```

谁能帮助我为什么会收到这个错误。我只是rails的初学者。所以无法纠正这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:44:09.627

这实际上是控制器上创建操作的重定向部分的错字。改变`redirect to @user`解决`redirect_to @user`它。

# asp.net-mvc-4 - 少的 MVC 捆绑和缩小不适用于导入

> ID：14058766
> 
> 赞同：0
> 
> 时间：2012-12-27T17:36:09.763
> 
> 标签：asp.net-mvc-4, less, bundling-and-minification

我正在尝试在 VS 2012 中将 Metro-bootstrap (http://talkslab.github.com/metro-bootstrap/) 与 MVC 4 项目一起使用。我按照这篇文章 (http://stackoverflow.com/questions/9593254/mvc4-less-bundle-import-directory) 中的步骤进行操作，但我仍然收到有关未找到扩展名为 .less 的文件的错误消息试图解析 Metro-bootstrap.less。调用@import 时发生错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:27:21.037

尝试这种方法： http: [//blog.cdeutsch.com/2012/08/using-less-and-twitter-bootstrap-in.html](http://blog.cdeutsch.com/2012/08/using-less-and-twitter-bootstrap-in.html) 如果问题在此之后仍然存在，您能否发布您的捆绑包和错误的详细信息？

# sharepoint - 如何将当前匹配的xsl节点的值放入变量中？

> ID：14058776
> 
> 赞同：2
> 
> 时间：2012-12-27T17:37:06.677
> 
> 标签：sharepoint, xslt

在我的 xsl 中，我想`match`在几个节点上，然后将匹配节点的值抓取到一个变量中。我怎样才能做到这一点？

我需要在下面放置一个通配符变量`Budget0`：

```
<xsl:template match="FieldRef[@Name='Budget0' or @Name='Scope' or @Name='Risk' or @Name='Schedule']" mode="body">
    <xsl:param name="thisNode" select="."/>
    <xsl:variable name="currentValue" select="$thisNode/Budget0" />
    <xsl:variable name="statusRating1">(1)</xsl:variable>
    <xsl:variable name="statusRating2">(2)</xsl:variable>
    <xsl:variable name="statusRating3">(3)</xsl:variable>

    <xsl:choose>
        <xsl:when test="contains($currentValue, $statusRating1)">
            <span class="statusRatingX statusRating1"></span>
        </xsl:when>
        <xsl:when test="contains($currentValue, $statusRating2)">
            <span class="statusRatingX statusRating2"></span>
        </xsl:when> 
        <xsl:when test="contains($currentValue, $statusRating3)">
            <span class="statusRatingX statusRating3"></span>
        </xsl:when> 
        <xsl:otherwise>
            <span class="statusRatingN"><xsl:value-of select="$currentValue" /></span>
        </xsl:otherwise>                    
    </xsl:choose>
</xsl:template> 
```

在这个片段中，`xsl:template match...`效果很好；它似乎与这些领域相匹配。我可以在 Firebug 中看到这些字段`statusRating1`像它们应该的那样接收 css 类（因为它们都设置为接收`Budget0`字段的值。

**[更新]**

我发现如果我将它用于变量：

`<xsl:variable name="currentValue" select="current()/@Name" />`

或者

`<xsl:variable name="currentValue" select="FieldRef[@Name=current()/@Name"] />`

它将被标记在`otherwise`标签中，并打印该字段的名称。换句话说，html打印

`<span class="statusRatingN">Budget0</span>`

如果我尝试 Dimitre 的任何解决方案（如下），它永远不会在任何子句中匹配`when`，并且 html 会像这样输出（注意 span 的文本是空白的）：

`<span class="statusRatingN"></span>`

因此，我推断`$currentValue`只是获取属性的名称，而不是指节点的值。我需要参考那个特定节点的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:52:32.500

**使用**：

```
<xsl:variable name="currentValue" select="$thisNode/*[name()=current()/@Name]"/> 
```

**或者，或者**：

```
<xsl:variable name="currentValue" select="$thisNode/*[name()=$thisNode/@Name]"/> 
```

**或者，或者（最好）**：

```
<xsl:variable name="currentValue" select="*[name()=current()/@Name]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T04:17:15.300

啊，经过几个小时、几个小时、几个小时、几天和几个月，这是一个例子（我[在这个线程的帮助下](https://sharepoint.stackexchange.com/questions/42619/custom-field-xsl-name-vs-fieldtype)摆弄了自己）：

这两行是关键（Dimitre 的回答很接近）：

```
<xsl:param name="thisNode" select="."/>
<xsl:variable name="currentValue" select="$thisNode/@*[name()=current()/@Name]" /> 
```

这是整个函数，它读取两个不同的列并将值应用于任一列：

```
<xsl:template match="FieldRef[@Name='YesNo1']|FieldRef[@Name='YesNo2']" mode="body">
    <xsl:param name="thisNode" select="."/>

    <xsl:variable name="currentValue" select="$thisNode/@*[name()=current()/@Name]" />
    <xsl:variable name="yesvalue">Yes</xsl:variable>
    <xsl:variable name="novalue">No</xsl:variable>

    <xsl:choose>
        <xsl:when test="contains($currentValue, $yesvalue)">
            <span class="yesno yes"><xsl:value-of select="$currentValue" /></span>
        </xsl:when>
        <xsl:when test="contains($currentValue, $novalue)">
            <span class="yesno no"><xsl:value-of select="$currentValue" /></span>
        </xsl:when>
    <xsl:otherwise>
            <span class="yesnoN"><xsl:value-of select="$currentValue" /></span>
        </xsl:otherwise>
    </xsl:choose>

</xsl:template> 
```

# autocomplete - Yii CJuiAutoComplete 值未显示

> ID：14058780
> 
> 赞同：2
> 
> 时间：2012-12-27T17:37:14.180
> 
> 标签：autocomplete, yii, widget, yii-extensions

如果这已经存在，但我无法让它工作，我深表歉意。我需要显示名称并将 ID 存储在我的表中。这些名称来自其他模型（表）。当我在 chrome 网络检查器中检查 elts 时，我得到了名称和 ID。但是值不可见。但是当我尝试单击它们时它们正在填充，它会出现带有 ID 的警报。

谁能帮我把名字看得见-谢谢你的帮助

我的 _form.php 是这样的：

```
 <div class="row">
        <?php echo $form->labelEx($typeModel,'benefit_type'); ?>
        <?php
    $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'attribute'=>'name',
    'model'=>$typeModel,
    'sourceUrl'=>array('benefit/benefit_type_list'),
    'value'=>'Please select',
    'name'=>'name',
    'id'=>'id',
    'options'=>array(
        'minLength'=>'0',
         'select'=>"js:function(event, ui) {
     alert(ui.item.id);
                                        // $('#organisation_id').val(ui.item.id);
                                        }",
    ),
    'htmlOptions'=>array(
'id'=>'id',
    'size'=>45,
    'maxlength'=>45,
    ),
    )); ?>

    <?php echo $form->error($typeModel,'benefit_type'); ?> 
```

用于获取名称和 ID 的扩展类是：

```
 <? class EAutoCompleteAction extends CAction
    {
        public $model;
        public $attribute;
        public $id;
        private $results = array();
        public $returnVal = '';
        public function run()
        {
            if(isset($this->model) && isset($this->attribute)) {
                $criteria = new CDbCriteria();
                $criteria->compare($this->attribute, $_GET['term'], true);
                $model = new $this->model;
                foreach($model->findAll($criteria) as $m)
                {
                   // $this->results[] = $m->{$this->attribute};
                    //$this->results[] = $m-<{$this->id};
                    $this->results[] = array(
                        'name' => $m->{$this->attribute},
                            'id'=> $m->id
                    );

                    /* $this->returnVal .= $m->getAttribute('name').'|'
                    .$m->getAttribute('id'). "\n"; */
                }

            }

            echo CJSON::encode($this->results);
        }
    }
    ?> 
```

在我的控制器中：

```
public function actions()
    {
        return array(
                'benefit_type_list'=>array(
                        'class'=>'application.extensions.EAutoCompleteAction',
                        'model'=>'BenefitType', //My model's class name
                        'attribute'=>'name', //The attribute of the model i will search
                ),
        );

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:21:02.667

我使用这个扩展已经有一段时间了，但它使用了 Jquery 的自动完成功能，并且来自 EAutoCompleteAction 的数据集可能需要：

```
 $this->results[] = array(
                    'label' => $m->{$this->attribute},
                    'value'=> $m->id,
                    'id'=> $m->id
                ); 
```

来源：[yii论坛](http://www.yiiframework.com/forum/index.php/topic/10000-cjuiautocomplete-sourceurl/page__view__findpost__p__50076)

# java - 使用 Windows builder 摆脱 Java Swing 中的子菜单

> ID：14058783
> 
> 赞同：0
> 
> 时间：2012-12-27T17:37:27.423
> 
> 标签：java, swing, jmenu, jmenuitem

我正在尝试通过创建个人项目来学习 Java Swing 和 Windows Builder。我添加了一个菜单栏文件、编辑、查看、帮助等。当我点击“文件”时，我会打开、保存、另存为。这也是正确的。但是使用 Windows Builder 中的默认选项，在“打开”下给我一个由箭头指示的子菜单，但我不想要这个我想要的只是：

文件——打开——保存——另存为

我想摆脱

文件 - 打开 -> NULL（这是 Windows builder 中的默认设置）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:39:22.880

您可能添加了 "Open" `JMenu`，而不是添加了 "Open" `JMenuItem`。源代码将确认它。

`JMenuItem`是菜单树中的一片叶子。`JMenu`是其他`JMenu`s和`JMenuItem`s的容器。

# asp.net-mvc - 如何在实体框架 CodeFirst 中创建外键关系

> ID：14058785
> 
> 赞同：0
> 
> 时间：2012-12-27T17:37:28.637
> 
> 标签：asp.net-mvc, ef-code-first, foreign-key-relationship

我是 Entity Framework 的新手，我将其用于 ASP.NET MVC4 项目。我正在尝试创建外键关系，但没有取得太大成功。问题可能出在我的种子数据中，我不确定如何从较早的尝试中对其进行重组以使其正常工作。

这是我的两门课：

```
public class HardwareType
    {
        public int Id { get; set; }
        [Required]
        [StringLength(128)]
        public string HType { get; set; }
        public int HardwareId { get; set; }
        public virtual Hardware Hardware { get; set; }

    } 
```

和

```
public class Hardware
    {
        public int Id { get; set; }
        //public int HardwareId { get; set; }
        ...
        public virtual ICollection<HardwareType> HardwareType { get; set; }

    } 
```

这是我的示例种子数据：

```
protected override void Seed(Context context)
    {
        var loc = new List<Location> {
            new Location { LocationName = "Paradise Lane" },
            new Location { LocationName = "81st Street" }
        };
        loc.ForEach(l => context.Locations.Add(l));

        var type = new List<SoftwareType> {
            new SoftwareType { SType = "Suite" }
        };
        type.ForEach(t => context.SoftwareTypes.Add(t));

        var pub = new List<SoftwarePublisher> {
            new SoftwarePublisher { Publisher = "Adobe" },
            new SoftwarePublisher { Publisher = "Apple" },
            new SoftwarePublisher { Publisher = "Microsoft" }
        };

        var soft = new List<Software> {
            new Software { Title = "Adobe Creative Suite", Version = "CS6", SerialNumber = "1234634543", Platform = "Mac", Notes = "Macs rock!", PurchaseDate = "2012-12-04", Suite = true, SubscriptionEndDate = null, SeatCount = 0, Locations = loc.Where(s => s.LocationName == "Paradise Lane").ToArray(), Types = type.Where(s => s.SType == "Suite").ToArray(), Publishers = pub.Where(s => s.Publisher == "Adobe").ToArray() },
            new Software { Title = "Microsoft Office", Version = "2012", SerialNumber = "34252345", Platform = "PC", Notes = "PCs stink!", PurchaseDate = "2012-11-04", Suite = true, SubscriptionEndDate = null, SeatCount = 0, Locations = loc.Where(s => s.LocationName == "81st Street").ToArray(), Types = type.Where(s => s.SType == "Suite").ToArray(), Publishers = pub.Where(s => s.Publisher == "Microsoft").ToArray() },
            new Software { Title = "Apple iLife", Version = "2012", SerialNumber = "54675747564", Platform = "Mac", Notes = "Macs still rock!", PurchaseDate = "2012-12-04", Suite = true, SubscriptionEndDate = null, SeatCount = 0, Locations = loc.Where(s => s.LocationName == "Paradise Lane").ToArray(), Types = type.Where(s => s.SType == "Suite").ToArray(), Publishers = pub.Where(s => s.Publisher == "Apple").ToArray() }
        };
        soft.ForEach(s => context.Software.Add(s));

        var manuf = new List<Manufacturer> {
            new Manufacturer { ManufacturerName = "SonicWall" },
            new Manufacturer { ManufacturerName = "Cisco" },
            new Manufacturer { ManufacturerName = "Barracuda" },
            new Manufacturer { ManufacturerName = "Dell" },
            new Manufacturer { ManufacturerName = "HP" },
            new Manufacturer { ManufacturerName = "Maxtor" },
            new Manufacturer { ManufacturerName = "LaCie" },
            new Manufacturer { ManufacturerName = "APC" },
            new Manufacturer { ManufacturerName = "Intel" },
            new Manufacturer { ManufacturerName = "D-Link" },
            new Manufacturer { ManufacturerName = "Western Digital" },
            new Manufacturer { ManufacturerName = "Quantum" },
            new Manufacturer { ManufacturerName = "Seagate" },
            new Manufacturer { ManufacturerName = "Apple" },
            new Manufacturer { ManufacturerName = "Canon" },
        };

        var device = new List<DeviceType> {
            new DeviceType { DType = "Network Device"},
            new DeviceType { DType = "Other"}
        };

        var htype = new List<HardwareType> {
            new HardwareType { HType = "PC" },
            new HardwareType { HType = "Monitor" },
            new HardwareType { HType = "Printer" },
            new HardwareType { HType = "Miscellaneous" }
        };

        var hard = new List<Hardware> {
            new Hardware { AssetTagId = "2134", Type = device.Where(h => h.DType == "Network Device").ToArray(), Manufacturer = manuf.Where(h => h.ManufacturerName == "SonicWall").ToArray(), ServiceTagId = "5243", SerialNumber = "3456", ProductNumber = "2345", PurchaseDate = "2012-10-23", WarrantyExpiration = "2012-11-12", WarrantyType = "NBD", Location = loc.Where(h => h.LocationName == "Paradise Lane").ToArray(), Notes = "Scrapped",  HardwareType = htype.Where(h => h.HType == "Monitor").ToArray()},
            new Hardware { AssetTagId = "2134", Type = device.Where(h => h.DType == "Network Device").ToArray(), Manufacturer = manuf.Where(h => h.ManufacturerName == "SonicWall").ToArray(), ServiceTagId = "5243", SerialNumber = "3456", ProductNumber = "2345", PurchaseDate = "2012-10-23", WarrantyExpiration = "2012-11-12", WarrantyType = "NBD", Location = loc.Where(h => h.LocationName == "Paradise Lane").ToArray(), Notes = "Scrapped",  HardwareType = htype.Where(h => h.HType == "PC").ToArray() },
            new Hardware { AssetTagId = "2134", Type = device.Where(h => h.DType == "Network Device").ToArray(), Manufacturer = manuf.Where(h => h.ManufacturerName == "SonicWall").ToArray(), ServiceTagId = "5243", SerialNumber = "3456", ProductNumber = "2345", PurchaseDate = "2012-10-23", WarrantyExpiration = "2012-11-12", WarrantyType = "NBD", Location = loc.Where(h => h.LocationName == "Paradise Lane").ToArray(), Notes = "Scrapped",  HardwareType = htype.Where(h => h.HType == "PC").ToArray() }
        };
        hard.ForEach(h => context.Hardwares.Add(h));

        base.Seed(context);

    } 
```

我如何构造它以使外键关系起作用。现在，我收到此错误：`Unable to set field/property HardwareType on entity type CIT.Models.Hardware. See InnerException for details.`

内部异常是：`An item cannot be removed from a fixed size Array of type 'CIT.Models.HardwareType[]'`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:39:11.657

尝试像这样改变你的表结构：

```
public class Hardware 
{ 
public int Id { get; set; } 
. 
. 
. 
public HardwareTypeId { get; set; } 
public virtual HardwareType hardwareType {get;set;} 

} 
```

和硬件类型：

```
public class HardwareType 
{ 
public int Id { get; set; } 
public string TypeName {get;set;} 
} 
```

# processing - 处理追加浮动[]

> ID：14058787
> 
> 赞同：1
> 
> 时间：2012-12-27T17:37:44.803
> 
> 标签：processing, utilities

我正在开发一个处理应用程序，它应该从串行端口获取数据并放入各种图表中。我已经下载了 giCentre Utilities 库来绘制图表。

基于其中一个示例，我得到了它来绘制一个简单的图表，但由于它将实时从串行端口获取数据，我需要能够添加数据。我试图使用 Append() 函数，但没有任何运气。

```
import org.gicentre.utils.stat.*;    // For chart classes.

float[] test = {1900, 1910, 1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990};

float[] test2 ={ 19000,  6489,  6401, 7657, 9649, 9767, 12167, 15154, 18200, 23124};

XYChart lineChart;

/** Initialises the sketch, loads data into the chart and customises its appearance.
  */
void setup()
{
  size(500,200);
  smooth();
  noLoop();

  PFont font = createFont("Helvetica",11);
  textFont(font,10);

  // Both x and y data set here.  
  lineChart = new XYChart(this);
  append(test, 2050); 
  append(test2, 21000);
  lineChart.setData(test, test2);

  // Axis formatting and labels.
  lineChart.showXAxis(true); 
  lineChart.showYAxis(true); 
  lineChart.setMinY(0);

  lineChart.setYFormat("###");  
  lineChart.setXFormat("0000");   

  // Symbol colours
  lineChart.setPointColour(color(180,50,50,100));
  lineChart.setPointSize(5);
  lineChart.setLineWidth(2);
}

/** Draws the chart and a title.
  */
void draw()
{
  background(255);
  textSize(9);
  lineChart.draw(15,15,width-30,height-30);

} 
```

不是线吗

```
append(test, 2050); 
append(test2, 21000); 
```

应该在 (2050, 21000) 添加一个新数据点？每次串行数据进入时只需要调用这些，然后重新绘制绘图就很好了。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:56:04.867

该`append()`函数返回附加的数组。`append(test, 2050)`实际上并没有改变`test`数组，它*返回*一个相当于`test`附加了 2050 的数组。因此，您应该能够执行以下操作：

```
test = append(test, 2050);
test2 = append(test2, 21000); 
```

* * *

**编辑：**

这是处理参考页面上的文档：[`append()`](http://processing.org/reference/append_.html). 下面是一些可以作为简单测试（或学习工具）运行的代码：

```
void setup()
{
  int[] a = {1, 2, 3};
  int[] b;
  b = append(a, 4);

  print(a.length + "\n");
  print(b.length);
} 
```

返回

```
3
4 
```

# javascript - 如何在 Chrome 中强制加载动态、不安全的内容？

> ID：14058789
> 
> 赞同：22
> 
> 时间：2012-12-27T17:37:51.623
> 
> 标签：javascript, google-chrome, https

我在 https 中使用 Jira，我想用一些额外的 JS 进行一些调整。我的 JS 托管在不安全的服务器上（没有可用的 https）。

当我通过将不安全的 JS 文件插入 DOM（使用浏览器扩展程序）来动态加载它时，Chrome 告诉我：

> [已阻止] 位于的页面`https://jiraserver/browse`运行了来自 的不安全内容`http://myserver/jira.js`。

我可以看到这是非常安全的，但我不在乎。我想加载那个不安全的 JS 文件。我如何让 Chrome 信任我并按我说的做？

我的插入方法（在扩展代码中）：

```
document.body.appendChild((function(s){s.src='http://myserver/jira.js';return s;})(document.createElement('script'))); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T19:48:05.307

根据[此 Chrome 支持问答，](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1342714)您可以使用以下命令行标志启动 Chrome，以防止 Chrome 检查不安全的内容：

`--allow-running-insecure-content`

这是[一些](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)关于如何使用命令标志运行 Chrome 的文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:59:01.150

Chrome 根本不会在安全页面中加载不安全的脚本。

您的 jira.js 是否*必须*从服务器加载？将其注入页面的最佳方法是将其包含在您的扩展包中。

```
var s = document.createElement('script');
s.src = chrome.extension.getURL("jira.js");
s.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s); 
```

如果您*必须*从服务器加载它，我想您的扩展程序可以对脚本发出 XHR 请求，然后将响应注入页面。

```
// make a XHR request, then...
var s = document.createElement('script');
s.textContent = codeFromXHR;
(document.head||document.documentElement).appendChild(s);
s.parentNode.removeChild(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-08T13:40:12.400

我遇到了同样的问题：我们的客户端将托管在我们服务器上的 CSS 文件和 js 文件链接到一个不安全的域上。

我们将使用 Amazon CloudFront 解决它。他们使用经过验证的证书来服务 HTTPS。

这不是一个糟糕的使用解决方案，因为 CDN 通常是一个好主意，而且这些资源有些静态。（CSS 文件是为每个客户端量身定制的，实际上是生成的，但可以配置合理的 TTL 并根据需要刷新 CDN）

请注意，根据您的数据负载，CDN 解决方案甚至可能比实际购买证书更实惠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T03:52:12.237

我遇到了同样的问题，发现如果我们在 chrome 中登录到我们的 google 帐户，那么 Chrome 会停止在 https 中加载不安全的内容。

如果我们使用**隐身窗口**来加载具有不安全内容的网站，那么它将起作用。

# php - 如何在 PHP 中使用复选框？

> ID：14058790
> 
> 赞同：0
> 
> 时间：2012-12-27T17:38:00.257
> 
> 标签：php, html, mysql

所以现在我正在编码，所以用户可以通过检查他们想要删除的消息并点击删除按钮来删除他们的消息。

但是后来我的问题出现了，我如何删除一个以上只有一个查询的条目？

就像，如果它是单选按钮，我可以删除一个匹配正确的条目，`$_POST['radio']`但现在它可以只有一个条目，它可以是更多条目。

对不起，如果很难理解我的问题，如果你不明白，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:42:39.087

使用消息 ID 创建一个复选框数组。HTML 符号是这样的。

```
<input name="del[1]"
<input name="del[2]"
etc... 
```

然后迭代`$_POST['del']`以找到要删除的消息 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:00:00.447

我能想到的只是在用户端使用脚本并将字符串连接到帖子。您可以使用 document.getElementById 并通过在具有 id 的 div 内创建所有复选框或直接为您的框提供 id 来获取其值。

让我试着解释一下我自己：`$_POST['checkboxes']`你会得到一个字符串除以你已知/选择的字符，你可以用 php's 分割成一个字符串向量`explode()`。

但是，连接应该由用户端的脚本完成。

想象一下，你有一个价值 hello 的盒子和价值 world 的盒子。您需要做的是，而不是`action="submit"`在您的表单上，您将拥有类似`action="someJSFunction"`. 这个函数应该在一个字符串中获取所有选中的框值：（`String a += document.getElementById.value;`或类似的东西），然后你的函数进行提交。如果设置了这两个示例框并且您选择了 \ 字符作为分区，那么在您的 php 中`$_POST['checkboxes']`您将得到：hello\world。

如果您想通过提交保留表单操作，请将您的删除按钮类型设置为提交并 onclick 使其调用您的函数，但`return false`它会等待脚本结束提交。就像是：`onclick"someFunc(this); return false"`

我前段时间遇到过这个问题，这就是我解决它的方式。

希望这可以帮助。

# .net - 如何在不提示拨号对话框的情况下检查 Internet 连接是否可用？

> ID：14058798
> 
> 赞同：2
> 
> 时间：2012-12-27T17:38:37.163
> 
> 标签：.net, http, dial-up

我希望我的应用程序在连接可用时连接到服务器（以检查更新），但当连接不可用时什么也不做。我担心每当我的程序尝试这样做时，具有拨号连接的人可能会收到其中一个提示来拨打他们的 ISP。我意识到现在很少有人使用拨号上网，但仍然如此。

我自己已经关闭拨号十多年了，所以老实说，我不知道`WebRequest`在离线时执行 HTTP 请求（例如使用 a ）是否会显示这样的“拨号”提示。会吗？如果是这样，我怎样才能检查更新而不引起这样的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:19:01.223

通过使用这个：

```
My.Computer.Network.IsAvailable 
```

也许是这样的：

```
 Dim available As Boolean
    Try
        Dim client As New System.Net.Sockets.TcpClient("google.com", 80)
        available = True
    Catch ex As Exception
        available = False
    End Try 
```

如果结果为“可用”，您可以检查更新是否可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:26:20.967

[WinInet Api](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385483%28v=vs.85%29.aspx)实现的功能：

```
BOOL InternetGetConnectedState(
  _Out_  LPDWORD lpdwFlags,
  _In_   DWORD dwReserved
); 
```

可以在[此处找到特定 API 调用的详细信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384702%28v=vs.85%29.aspx)

* * *

**编辑：** 我提供了一个可用于测试的小代码示例。
值得注意的是，在底层，`My.Computer.Network.IsAvailable`P/Invokes并在丢弃标志的同时`InternetGetConnectedState`简单地返回一个**真/假值。**WinNt 和更高版本它通过网络接口枚举并为第一个连接的接口返回 true。

```
using System;

namespace InternetGetConnectedState
{
    [Flags]
    enum InternetConnectionFlags : uint
    {
        // Flags for InternetGetConnectedState and Ex
        Modem = 0x01,
        Lan = 0x02,
        Proxy = 0x04,
        ModemBusy = 0x08,  /* no longer used */
        RasInstalled = 0x10,
        Offline = 0x20,
        Configured = 0x40
    }

    class Program
    {
        [System.Runtime.InteropServices.DllImport("wininet.dll", SetLastError = true)]
        static extern bool InternetGetConnectedState(out InternetConnectionFlags flags, uint dwReserved);

        static void Main(string[] args)
        {
            InternetConnectionFlags flags;
            bool connectedState = InternetGetConnectedState(out flags, 0)

            // TODO:  Check Flags
        }
    }
} 
```

* * *

**编辑 2：** 在进一步查看 ILSpy 转储后，在 NT 之前在 Windows上进行`My.Computer.Network.IsAvailable`P/ Invokes。`InternetGetConnectedState`在 WinNt 及更高版本上，它通过网络接口枚举并为第一个连接的接口返回 true。所以，要么

```
My.Computer.Network.IsAvailable  'vb.net 
```

或者

```
System.Net.NetworkInformation.GetIsNetworkAvailable(); // C# 
```

是可行的解决方案。

也许禁用自动更新的选项是避免最终用户烦恼的另一种可能的解决方案。

# rms - 关闭 Xlet 仿真器后 RMS 存储值不可用

> ID：14058802
> 
> 赞同：1
> 
> 时间：2012-12-27T17:39:12.813
> 
> 标签：rms

我在 Xlet Emulator 上运行 LWUIT 程序。我将数据存储到 RMS 存储中，并且可以在模拟器未关闭时检索它，但是当模拟器关闭时，RMS 存储中的所有数据都将被删除，我在 Eclipse IDE 上运行它。有没有办法将数据永久存储在 RMS 中，以便即使在关闭模拟器后我也可以检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T17:26:09.373

不，Java 很烂。你应该知道。

# solr - SOLR - IndexOutOfBoundsException 错误

> ID：14058806
> 
> 赞同：1
> 
> 时间：2012-12-27T17:39:27.013
> 
> 标签：solr

我正在运行 SOLR，一切都很好，但今天突然我开始出现以下错误。

java.lang.RuntimeException: java.lang.IndexOutOfBoundsException: Index: 74, Size: 38 at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1103) at org.apache.solr.core.SolrCore。

![在此处输入图像描述](../Images/c27969190023f183b3e3ff61f8b767c7.png)

有人可以帮我解决这个问题吗？我们正在为许多实时站点运行 SOLR。但目前所有网站的搜索都下降了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:51:45.480

我的索引已损坏，我重新索引并解决了问题。

# android - 无法在 Android 中打开图像

> ID：14058808
> 
> 赞同：0
> 
> 时间：2012-12-27T17:40:01.797
> 
> 标签：android, image, exif

我正在用 android 开发一个应用程序，但在显示从 http 服务器下载的一些图像时遇到了问题。这是下载的代码：

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(URI.create(imageURL));
        httpGet.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials("user", "password"), "UTF-8", false));

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity responseEntity = httpResponse.getEntity();
        InputStream input = responseEntity.getContent();
        // Get the bitmap
        Options opt = new Options();
        opt.inScaled = true;
        opt.inDensity = 1;
        opt.inTargetDensity = 1;
        opt.inPreferQualityOverSpeed = false;
        opt.inPurgeable = true;
        opt.inSampleSize = 2;
        Bitmap myBitmap = BitmapFactory.decodeStream(input, null, opt);

        // Save the bitmap to the file
        String path = SMVAndroid.IMAGE_PATH;
        OutputStream fOut = null;
        File file = new File(path, fileName.concat(".jpeg"));
        fOut = new FileOutputStream(file);
        /*int byteRead;
        while((byteRead = input.read()) != -1){
            fOut.write(byteRead);
        }*/

        myBitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
        fOut.flush();
        fOut.close(); 
```

使用此方法无法下载某些图像，因此我尝试了注释代码并且它确实下载了，但我无法在 ImageView 组件上显示它。我试图查看图像是否采用不同的格式（尽管有扩展名）并使用名为 trid 的程序（http://mark0.net/soft-trid-e.html）我发现图像不起作用的被标识为 jpeg-exif，而起作用的只是 jpeg。我已经在我的 PC 中下载了图像并使用程序来读取 exif 信息，而那些有效的则没有任何信息。我已经断定问题可能是这个信息，但是当我用安卓手机拍照时，它也将这个信息保存在文件中，所以我不知道这个问题可能是什么。我也尝试在android浏览器中查看图像，但它不起作用。它也不适用于本机图像查看器。我可以设法在 Android 的 chrome 浏览器中看到图像，但是当我尝试使用浏览器下载它们时，它不会下载。有谁知道问题是exif吗？我在这里上传了图片： [http://img407.imageshack.us/img407/5977/1007e.jpg](http://img407.imageshack.us/img407/5977/1007e.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:26:22.857

我已经解决了这个问题。问题不在于 Exif 信息。这是图像的颜色类型。看来 android 无法读取 CMYK 格式的图像。我已经转换为 RGB 并且它打开了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:06:37.567

我不认为 Exif 是问题所在。Android 确实提供了 ExifInterface 来从 jpg 图像中读取 exif 数据。尝试通过 ExifInterface 读取 exif 数据，看看你得到了什么。

# ruby - 访问 Ruby 块中的函数

> ID：14058813
> 
> 赞同：0
> 
> 时间：2012-12-27T17:40:56.380
> 
> 标签：ruby, function, hash, scope, private

我正在使用一次性 Ruby 脚本（因此不在显式定义的模块或类中），并且很难从 .each 块中访问我之前在脚本中定义的函数。

```
def is_post?(hash)
  if hash["data"]["post"] == "true" #yes, actually a string
    true
  else 
    false
  end
end

#further down

threads["data"]["children"].each do |item|
  puts item["data"]["title"] unless item.is_post?
end 
```

结果：

```
in 'block in <top (required)>': private method `is_post?' called for #<Hash:0x007f9388008cf0\> (NoMethodError) 
```

`threads`是一个非常非常嵌套的哈希。散列，包含数组的散列，数组包含带有标头数据的散列，其中包含带有其余详细信息的另一个散列。有点乱，但我没有编写生成该模块的模块：P

这个想法是遍历数组并从每个数组中检索数据。

我的问题是：

*   我需要采取什么样的诡计才能`is_post?`从块内访问我的功能？

*   当我的脚本中没有任何私有声明时，为什么它会作为私有方法出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:55:44.890

## `Kernel`vs 实例方法，`self`vs 参数

```
def is_post?(hash)
  ...
end 
```

通过以这种方式定义方法，您正在为`Kernel`. 您可以选择通过 或 调用此`Kernel.is_post?(hash)`方法`is_post?(arg)`。除非`item`是`Kernel`对象，否则您不会`is_post?`为它定义方法。

你的方法只需要一个参数。如果 item 有一个`is_post?`方法，通过做`item.is_post?`，你不是提供一个参数，而只是提供`self`给方法。

## 解决方案

你可能应该更换

```
item.is_post? 
```

经过

```
is_post?(item) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:43:40.143

您不想调用`is_post?`（就像错误消息所说`item`的那样）。`Hash`你想要的是以下内容：

```
threads["data"]["children"].each do |item|
  puts item["data"]["title"] unless is_post?(item)
end 
```

# wpf - 使用 iValueConverter 格式化 TextBlock 的部分文本

> ID：14058814
> 
> 赞同：5
> 
> 时间：2012-12-27T17:40:57.450
> 
> 标签：wpf, ivalueconverter

我想将文本块的部分文本设为粗体。这是我在 IValueConverter 中尝试过的，但它似乎不起作用。

```
public class Highlighter : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value == null)
            {
                return null;
            }

            return "Question1:<Bold>Answer1</Bold>, Question2:<Bold>Answer2</Bold>, Question3:<Bold>Answer3</Bold>";

        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

这不会使答案变粗。

这就是我在 XAML 中使用它的方式。

```
<TextBlock Height="Auto" Width="Auto" MaxHeight="64" Text="{Binding Path=QuestionAnswer, Mode=OneWay, Converter={x:Static Highlighter}}" /> 
```

有没有办法通过格式化文本或将 TextBlock 发送到转换器来实现这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T18:32:02.490

绝对有可能与`TextBlock`控制有关，但考虑到您可能想要切换到其他控制（`ItemsControl`例如）的所有努力。

无论如何，这是一个解决方案。实际上有几个问题需要解决：

1.  `TextBlock.Text`属性是`string`，并且您不能将预格式化的文本分配给它
2.  `TextBlock.Inlines`可以接受格式化文本，但它是只读属性
3.  您必须自己格式化文本（可能有简单的方法来解析带有标签的文本并将格式化的输出生成为`Inline`对象的集合，但我不知道）

您可以创建一个附加属性来处理前两个问题：

```
public static class TextBlockEx
{
    public static Inline GetFormattedText(DependencyObject obj)
    {
        return (Inline)obj.GetValue(FormattedTextProperty);
    }

    public static void SetFormattedText(DependencyObject obj, Inline value)
    {
        obj.SetValue(FormattedTextProperty, value);
    }

    public static readonly DependencyProperty FormattedTextProperty =
        DependencyProperty.RegisterAttached(
            "FormattedText",
            typeof(Inline),
            typeof(TextBlockEx),
            new PropertyMetadata(null, OnFormattedTextChanged));

    private static void OnFormattedTextChanged(
        DependencyObject o,
        DependencyPropertyChangedEventArgs e)
    {
        var textBlock = o as TextBlock;
        if(textBlock == null) return;

        var inline = (Inline)e.NewValue;
        textBlock.Inlines.Clear();
        if(inline != null)
        {
            textBlock.Inlines.Add(inline);
        }
    }
} 
```

XAML 会改变一点：

```
<TextBlock local:TextBlockEx.FormattedText="{Binding Path=QuestionAnswer,
                                                     Mode=OneWay,
                                                     Converter={x:Static Highlighter}}" /> 
```

请注意，您需要将命名空间映射到 XAML`TextBlockEx`中声明的位置。`xmlns:local="clr-namepace:<namespace_name>"`

现在您需要在转换器中构造格式化文本而不是纯文本来解决最后一个问题：

```
public object Convert(object value, Type targetType, object parameter,
    CultureInfo culture)
{
    if(value == null)
    {
        return null;
    }

    var span = new Span();
    span.Inlines.Add(new Run("Question1: "));
    span.Inlines.Add(new Run("Answer1") { FontWeight = FontWeights.Bold });
    span.Inlines.Add(new Run(", "));

    span.Inlines.Add(new Run("Question2: "));
    span.Inlines.Add(new Run("Answer2") { FontWeight = FontWeights.Bold });
    span.Inlines.Add(new Run(", "));

    span.Inlines.Add(new Run("Question3: "));
    span.Inlines.Add(new Run("Answer3") { FontWeight = FontWeights.Bold });

    return span;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:45:57.480

是的，这样的事情应该让你走上正轨；

```
<TextBlock>
   <Run Text="Question / Binding / Whatever..."/>
   <Run Text="Answer / Binding / Whatever..." FontWeight="Bold"/>
</TextBlock> 
```

# java - 主要方法原型，为什么这些工作？

> ID：14058815
> 
> 赞同：1
> 
> 时间：2012-12-27T17:40:58.393
> 
> 标签：java

> **可能重复：**
> [正确的 Java main() 方法参数语法是什么？](https://stackoverflow.com/questions/4089572/what-is-the-correct-java-main-method-parameters-syntax)

为什么这些都有效？

```
static void main(String[] args )

static void main(String args[] )

static void main(String... args ) 
```

它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:41:42.143

> 它们之间有什么区别吗？

没有区别只是表示不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:46:20.820

没有不同..

```
 String[] args; // This representation means that args is of String[] type(Basically array)

 String args[]; // This means that args is an array(an array of string type)

 String... args; // This means that args is a string of variable length(Thus acting as an array) 
```

# c# - 如果我在 Codebehind 中创建一个文件，物理文件实际存在于哪里？

> ID：14058825
> 
> 赞同：1
> 
> 时间：2012-12-27T17:41:48.377
> 
> 标签：c#, asp.net, file, io

```
 protected void Page_Load(object sender, EventArgs e)
    {
            System.IO.File.WriteAllText(@"C:\CallInformation.txt", "Some data");
    } 
```

是服务器上的 CallInformation.txt 吗？还是客户端？如果它是服务器，除了指定计算机名称（@“\Workstation\c$\CallInformation.txt”）之外，我怎样才能让它保存文件客户端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:44:02.677

它建立在服务器上。如果您可以在客户端上创建文件而他们没有实际接受它，那将是一个重大的安全漏洞。您始终可以将数据作为流发送给他们，并允许他们选择保存位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T17:43:17.897

它在服务器上。后面的代码在 Web 服务器的上下文中执行。

要下载文件，有几种方法。[一种方法是按照以下](http://www.west-wind.com/weblog/posts/2007/May/21/Downloading-a-File-with-a-Save-As-Dialog-in-ASPNET)方式做一些事情：

```
Response.ContentType = "image/jpeg";
Response.AppendHeader("Content-Disposition","attachment; filename=SailBig.jpg");
Response.TransmitFile( Server.MapPath("~/images/sailbig.jpg") );
Response.End(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T17:44:33.157

如果您正在编写 Web 应用程序，您应该了解代码运行在服务器上。所以文件保存在服务器上。

要将其发送到客户端，您必须将文件的内容写入响应流。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T17:53:25.400

该文件将在服务器上创建。要在本地编写它，您需要一个客户端框架，而不仅仅是符合 W3C DOM 的浏览器，例如 Silverlight 和（可能）Flash - 即使这样，用户也会被提示允许它发生。

这是一篇解释如何完成的帖子：

[http://www.c-sharpcorner.com/uploadfile/dpatra/read-and-write-file-to-local-file-system-in-silverlight-4/](http://www.c-sharpcorner.com/uploadfile/dpatra/read-and-write-file-to-local-file-system-in-silverlight-4/)

希望能帮助到你。

# jquery - Blueimp / Jquery 每个文件的文件上传进度条

> ID：14058826
> 
> 赞同：7
> 
> 时间：2012-12-27T17:41:52.823
> 
> 标签：jquery, file-upload, progress-bar, blueimp

如何使用 jQuery File Upload(Blueimp [http://goo.gl/y1Y2b](http://goo.gl/y1Y2b) ) 为每个文件创建进度条？我有多个表格，每个表格都有一个上传按钮。

```
$('.fileupload').fileupload({
dataType: 'json',
add: function (e, data) {
    var formContainer = $($(this).parent()).parent();
    var file = data.files[0];
    var li  = $('<li/>').attr("id", 'li-upload-'+file.id).appendTo($(formContainer).children('.ul-files'));
    var link= $('<a/>').attr("href", '#').attr("data-href", file.delete_url).addClass("link-remove-file pull-right").attr("target", "_parent").attr("title", "Remove").appendTo(li);
    var ico = $('<i/>').addClass('icon-remove').appendTo(link);
    var spn = $('<span/>').html(file.name+' ('+Math.round(file.size/1024)+' K)').appendTo(li);
    var lod = $('<div/>').addClass('container-progress-upload').css("float", 'right').appendTo(li);
    var prg = $('<div/>').addClass('bar').css("width", '0%').attr("id", 'pgr-'+file.name).appendTo(lod);
    data.submit();
},
progress: function (e, data) {
    var file = data.files[0];
    var progress = parseInt(data.loaded / data.total * 100, 10);

    $('#pgr-'+file.name).css(
        'width',
        50 + '%'
    );
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:44:09.733

好吧，解决了，我只是这样做：

我这样做： **HTML**

```
<form id="frm-resposta-{CODHIST}" class="form-horizontal form-upload" method="post" action="<?php echo site_url('ticket/salvarhistorico');?>" enctype="multipart/form-data" data-url-upload="<?php echo site_url('ticket/postFile');?>">
<input class="fileupload" type="file" name="files[]" data-url="<?php echo site_url('ticket/postFile');?>" multiple> 
```

**JS：**

```
$(window).load(function () {
    'use strict';
$('.form-upload').fileupload({
        dataType: 'json',
        autoUpload: true,
        url: $('.form-upload').attr('data-url-upload'),
        maxFileSize: 5000000
    }); 
```

# smarty - 注意：未定义的偏移量：smarty 中的 0

> ID：14058829
> 
> 赞同：2
> 
> 时间：2012-12-27T17:41:57.067
> 
> 标签：smarty, notice

我收到以下通知并想澄清一下：

```
Notice: Undefined offset: 0 in /homepages/40/d35550088/htdocs/smarty/templates_c/
ef666588706a0451c86287e631024054e2f40226.file.list.tpl.php on line 434 

Notice: Undefined offset: 1 in /homepages/40/d35550088/htdocs/smarty/templates_c/
ef666588706a0451c86287e631024054e2f40226.file.list.tpl.php on line 434 

Notice: Undefined offset: 2 in /homepages/40/d35550088/htdocs/smarty/templates_c/
ef666588706a0451c86287e631024054e2f40226.file.list.tpl.php on line 434  

Notice: Undefined offset: 9 in /homepages/40/d35550088/htdocs/smarty/templates_c/
ef666588706a0451c86287e631024054e2f40226.file.list.tpl.php on line 434 
```

编译后的 tpl 中的代码行是：

`<?php if ($_smarty_tpl->tpl_vars['TablesLinked']->value[$_smarty_tpl->getVariable('smarty')->value['section']['i']['index']]){?>`

这是未编译的行：

`{if $TablesLinked[i]}`

上面的一行开始该部分：

`{section name=i loop=$NumberFields}`

我是否必须更改起始索引，因为偏移量意味着错误的索引？TablesLinked 不会出现在每个字段中，因为字段由链接表和普通字段组成，这就是我使用 if 子句的原因。

我希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:34:24.120

尽管在开发阶段将 error_reporting 设置为 E_ALL 并尝试消除所有通知是一个很好的做法，但我个人并不担心这些消息。它只是在循环期间找不到指定索引上的元素。无论如何，如果您坚持取消通知，您可以更改

```
{if $TablesLinked[i]} 
```

到

```
{if isset($TablesLinked[i]) && $TablesLinked[i]} 
```

# ios - RestKit IOS SSL证书无效

> ID：14058831
> 
> 赞同：0
> 
> 时间：2012-12-27T17:41:58.603
> 
> 标签：ios, ssl, glassfish, restkit

我安装了 GoDaddy 颁发的证书，并在使用 8181 端口调用 https 时出现以下错误。它适用于 HTTP。

此服务器的证书无效。您可能正在连接到伪装成“my.ip”的服务器。这可能会使您的机密信息面临风险。”

由于我使用的是 IP 而不是有效的域名，restkit 是否出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:52:40.557

如果您通过在浏览器中键入[https://your.ip:8181/进行连接，那就是问题所在。](https://your.ip:8181/)网站的 SSL/TLS 证书包含为其颁发的域名，并且它应该与地址栏中键入的名称匹配。

# r - R 注释中的动态 LaTeX 引用与 knitr

> ID：14058832
> 
> 赞同：5
> 
> 时间：2012-12-27T17:41:59.587
> 
> 标签：r, latex, knitr

`Sweave`关于（ [动态引用 Sweave 文档中 R 评论中的数字](https://stackoverflow.com/questions/9023256/dynamic-references-to-figures-in-a-r-comment-within-sweave-document)），我曾问过类似的问题， 并想看看是否有人在使用时有类似的答案`knitr`。

目标是拥有以下代码块

```
<<"example", fig.cap = "some figure", highlight = FALSE>>=
# the following code generated Figure \ref{fig:example}
plot(1:10, 1:10)
@ 
```

已在生成的 .pdf 中显示为

```
# the following code generated Figure 1.1
plot(1:10, 1:10) 
```

到目前为止，我发现通过设置`highlight = FALSE`R 代码被放置到`verbatim`生成的 .tex 文件中的环境中。如果环境可以`alltt`代替，`verbatim`那么我们将获得所需的输出。是否可以通过选项将未突出显示的代码块放置在`alltt`环境中`knitr`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:29:45.320

我在存储库中添加了一个示例[072-latex-reference.Rnw](https://github.com/yihui/knitr-examples/blob/master/072-latex-reference.Rnw)`knitr-examples`。基本思想是恢复转义`\ref{}`（应该`\textbackslash{}ref\{\}`在默认输出中）。

# java - 处理后将对象设置为 null 是一种好习惯吗？

> ID：14058834
> 
> 赞同：13
> 
> 时间：2012-12-27T17:42:11.937
> 
> 标签：java, garbage-collection

我有这样的场景：

```
public void processData(String name,String value) {

/* line 1 */    MyDTO dto = new MyDTO();  
/* line 2 */    dto.setName(name);
/* line 3 */    dto.setValue(value);
/* line 4 */    sendThroughJMSChannel(dto);
/* line 5 */    dto = null; //As a best practice, should I do this ?

} 
```

在*第 4 行*之后的程序中，我不需要`dto`进一步处理。作为最佳实践，我应该设置`dto`为`null`第*5 行*还是忽略它？

通过将其设置为`null`，我期待快速垃圾收集。这是正确的吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-27T17:44:42.017

不，不要设置局部变量来`null`加速 GC 收集它们：编译器足够聪明，可以在没有你帮助的情况下找出它；`null`分配只会让你的代码看起来很脏。

非本地变量是另一回事：如果您有一个成员变量可能会比必要的时间更长，最好将其设置为`null`并防止*延迟内存泄漏*。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-27T17:43:12.157

在第 4 行之后（一旦方法调用结束），它将超出范围，因此在这种情况下不需要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:30:41.200

正如已经说过的，编译器在本地范围内足够聪明，但在非本地范围内，它又是更加特定于上下文的。人们需要了解在特定点取消引用是多么合法。在使用 HashMap 时说 -

```
Map<String, Object> entry = new HashMap<String, Object>();
String name = "test";             
Object o = new Object();          
entry.put(name, o);                

o = null; 
name = null; 

System.gc(); // Nothing is eligible !!! Still referenced by the Map.

Object test = entry.get("test");    // Returns the object. 
```

在这种情况下，必须首先从 HashMap 中删除该条目。

# ios - CoreData 按表达式排序或选择一列作为表达式

> ID：14058836
> 
> 赞同：0
> 
> 时间：2012-12-27T17:42:17.847
> 
> 标签：ios, core-data

我有一个带有两`NSDate`列的表的 sqlite 后端的 coreData：eventStart 和 eventEnd。我想执行一个相当复杂的选择并对其进行排序。

对于应用程序中的主要显示之一，我想检索两件事：

1.  10 个持续时间 (eventEnd - eventStart) 小于指定值的事件
2.  10 个持续时间大于指定值的事件
3.  事件必须根据它们与指定值的距离正确排序

我马上遇到的两个问题是我找不到从表达式中*选择列的方法（日期计算）。*第二个`NSSortDescriptor`似乎只适用于列，而不适用于表达式。这与 SQLite 的工作方式相反，我想知道分解原始 SQL 是否更容易。

我应该提到，我将要使用的数据太大而无法放入内存中以进行排序等操作，尤其是因为排序是在表达式上，因此查询必须返回所有数据进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:26:09.970

如果您首先获取对象，那么您应该能够使用您想要的任何键对内存中的结果进行排序，包括返回您提到的间隔的方法。因此，您将使用返回此时间间隔的方法名称创建一个 NSSortDescriptor，用它创建一个新数组，然后只需调用

```
[originalFetchedArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

这将返回一个新的排序数组。如果您从 NSMutableArray 开始，则可以使用类似的方法对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:55:08.363

When I had a very similar problem, I just created a new column for the calculated value (in your case it will be duration). After that, the retrieval becomes trivial.

# php - PHP - PDO - 表单验证 - 即使存在错误也会执行插入语句

> ID：14058841
> 
> 赞同：0
> 
> 时间：2012-12-27T17:43:03.497
> 
> 标签：php, mysql, validation, error-handling, pdo

在完成验证之前我没有注意到它，但我意识到即使我的错误出现在我的表单框顶部，我也会转到 phpmyadmin 并查看数据，即使我故意添加错误，表单也会被提交.

然后我的第二个问题，包括上述问题，无论我做什么，学生 ID 或“anum”都没有发布。它继续在我的数据库的学生表中给我一个“0”值。

这是整个代码：

```
<?php
//Starting session
session_start();

// Validation starts here
if (empty($_POST) === false) {
    $errors   = array();
    $anum     = $_POST['anum'];
    $first    = $_POST['first'];
    $last     = $_POST['last'];
    $why      = $_POST['why'];
    $comments = $_POST['comments'];

    if (empty($anum) === true || empty($first) === true || empty($last) === true) {
        $errors[] = 'Form is incomplete please revise it!';
    } else {

        if (ctype_alnum($anum) === false) {
            $errors[] = 'A number can only consist of alphanumeric characters!';
        }
        if ((strlen($anum) < 9) && (strlen($anum)) > 9) {
            $errors[] = 'A number is incorrect!';
        }
        if (ctype_alpha($first) === false) {
            $errors[] = 'First mame must only contain alphabetical characters!';
        }
        if (ctype_alpha($last) === false) {
            $errors[] = 'Last name must only contain alphabetical characters!';
        }
        if (empty($why))
            $errors[] = 'Please make sure to select the proper reasoning for your vistit today!';

        elseif ($why === 'Other') {

            if (empty($comments))
                $errors[] = 'Please explain the nature of your visit in the comments box!';

            else {

                if (strlen($comments) < 15)
                    $errors[] = 'Your explaination is short, please revise!';

                if (strlen($comments) > 45)
                    $errors[] = 'Your explaintion is to long, please revise!';

            }

        }

        if (empty($errors) === false) {
            header('location: signedin.php');
            exit();
        }

        // Validations ends here

        $host     = "localhost"; // Host name
        $username = "root"; // Mysql username
        $password = "testdbpass"; // Mysql password
        $db_name  = "test"; // Database name

        // Connect to server via PHP Data Object
        $dbh = new PDO("mysql:host=localhost;dbname=test;", $username, $password);
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        try {
            $query = $dbh->prepare("INSERT INTO `students` (anum, FIRST, LAST, why, comments)
                                   VALUES (:anum, :FIRST, :LAST, :why, :comments)");

            $query->execute(

                array(
                    'anum'     => $_POST['anum'],
                    'first'    => $_POST['first'],
                    'last'     => $_POST['last'],
                    'why'      => $_POST['why'],
                    'comments' => $_POST['comments']
                ));
        } catch (PDOException $e) {
            error_log($e->getMessage());
            die($e->getMessage());
        }
        $dbh = null;

    }

}
?>

<html>
<body>
<title>Student Signin Form</title>
<table width="300" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
    <tr>
        <?php
        if (empty($errors) === false) {
            echo '<h3>';
            foreach ($errors as $error) {
                echo '<center><li>', $error, '</li></center>';
            }

            echo '<h3>';
        }
        ?>
    <form action="" method="post">
        <td>
            <table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
                <tr>

                <tr colspan="3">
                    <center></center>
                    <strong>Student Signin Form</strong></tr>
                <p>Student ID Number: <input type="text" name="anum" <?php if (isset($_POST['anum']) === true) {
                        echo 'value="', $_POST['anum'], '"';
                    } ?> />

                <p>First Name: <input type="text" name="first" <?php if (isset($_POST['first']) === true) {
                        echo 'value="', $_POST['first'], '"';
                    } ?> />

                <p>Last Name: <input type="text" name="last" <?php if (isset($_POST['last']) === true) {
                        echo 'value="', $_POST['last'], '"';
                    } ?> />

                <p>How may we help you? <select name="why"/>
                    <option value=""></option>
                    <option value="Appeal">Appeal</option>
                    <option value="Other">Other: Please specify the nature of your visit bellow</option>
                    </select>
                    </tr>

                    <br>

                <P>If other please describe the issue you are having.</P>
                <textarea rows="10" cols="50" name="comments" <?php if (isset($_POST['comments']) === true) {
                    echo 'value="', $_POST['comments'], '"';
                } ?>></textarea>

                <input type="submit" name="submit" value="Send"/>

    </form>

</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:21:13.880

在更多地挖掘和更多地了解我实际上在做什么（错误的方式）之后，我想出了我的解决方案。几乎我必须这样做，以便 Mysql 插入语句成为错误验证的一部分，而不是独立的。如果您查看我之前的代码，PDO 语句在代码中并没有真正的位置，它就在那里。造成这种情况的原因是

```
if (empty($errors) === false) {
        header('location: signedin.php');
        exit();
    } 
```

这样做是即使有错误我仍然必须重定向到不是所需影响的“signedin.php”。必须做的是首先将其从假变为真。

```
if (empty($errors) === true) {
        header('location: signedin.php');
        exit();
    } 
```

然后在这样做之后，您必须在 {} 之间输入您的 PDO 语句。

那么这意味着如果脚本发现错误，它将不会运行 PDO 插入。

但是，如果没有错误为真，它将运行插入脚本并对该脚本进行错误检查，然后如果插入正确，它将将用户重定向到下一页。

例子 ：

```
if (empty($errors) === true) 
{
            $host="localhost"; // Host name
            $username="root"; // Mysql username
            $password="testdbpass"; // Mysql password
            $db_name="test"; // Database name

            $dbh = new PDO("mysql:host=localhost;dbname=test;", $username, $password);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

                    try 
        {
                            $query = $dbh->prepare("INSERT INTO `students` (anum, first, last, why, comments) 
                                   VALUES (:anum, :first, :last, :why, :comments)");

                            $query->execute(
                                                array(
                                                        'anum'      => $_POST['anum'],
                                                        'first'     => $_POST['first'],
                                                        'last'      => $_POST['last'],
                                                        'why'       => $_POST['why'],
                                                        'comments'  => $_POST['comments']
                                                        )); 
        }
                catch (PDOException $e) 
        {
                error_log($e->getMessage());
                die($e->getMessage());
        }
   $dbh = null;    

        header('location: signedin.php');
        exit(); 
} 
```

希望有人会发现这个有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:06:39.630

好吧，看起来您正在编写一些代码而没有实际测试它是否有效。以这些行为例（大约第 50 行）：

```
 if (empty($errors) === false) {
            header('location: signedin.php');
            exit();
        } 
```

您正在`$errors`用错误消息填充数组。然后，如果出现错误，您将进行重定向。没有意义，因为这也会删除错误消息。

# puppet - 使用 puppet 在 ubuntu 11.04 上安装/管理 ntp

> ID：14058843
> 
> 赞同：0
> 
> 时间：2012-12-27T17:43:08.507
> 
> 标签：puppet

我已经查看了 git 和其他地方的一些 puppet-ntp 包，但不清楚它们将如何安装。似乎他们中的大多数都专注于将 ntp 或 ntpd 推送到客户端的 puppet 服务器。但是，如果我只有一个主机，我想管理它，并且没有 puppet 服务器怎么办。所以在那种情况下我可以使用：

```
package { 'ntp':    ensure => 'installed', } 
```

如果是这样，那么至少 puppet 网站应该提到它。想法是将这个包放在一个 ntp.pp 文件中并运行 puppet apply ntp.pp 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:24:43.867

我不确定你问这个问题的意图是什么，但如果你只想使用 puppet 安装一个包，你也可以使用：

```
puppet resource package ntp ensure=present 
```

# delphi - 使用delphi更改快捷方式链接的兼容模式

> ID：14058845
> 
> 赞同：2
> 
> 时间：2012-12-27T17:43:16.163
> 
> 标签：delphi, delphi-2010

我想使用 delphi 2010 代码设置快捷链接的兼容模式。这可能吗？

我们有时会创建快捷方式

```
procedure createShortcut2(const AFilePath, AArguments: String; shortcutbasename: string=''); 
```

如果我们可以在现有代码中更改兼容模式，那就太好了，但是，如果我们必须在现有快捷链接文件上设置 的值，那也可以。

# networking - 远程访问虚拟桌面；远程访问

> ID：14058847
> 
> 赞同：0
> 
> 时间：2012-12-27T17:43:17.403
> 
> 标签：networking, virtual, desktop

我不知道这是否是问这个问题的最佳地点。

但我需要找到解决我遇到的问题的方法。

我需要向少数用户提供对个人虚拟桌面的访问权限。

我需要看看我有什么选择。

如果需要，我可以提供一些机器作为服务器。如果有某种使用云或其他服务的选项，我可以付费。

我只需要能够为少数用户提供对具有安全性、长时间滞后和延迟的桌面的访问。所以他们可以在远程服务器上工作和使用应用程序。

我将感谢所有的帮助和解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:54:54.203

您尝试过[https://deskroll.com/](https://deskroll.com/)吗？

我使用它是因为它不需要安装，可以在浏览器中轻松运行，并且有免费试用版和非常便宜的许可证。

# winapi - 如何使用 BitBlt 进行复制？

> ID：14058848
> 
> 赞同：1
> 
> 时间：2012-12-27T17:43:29.273
> 
> 标签：winapi

谁能告诉我是否可以将某些颜色从一个 dc 复制到另一个？我有一个包含绘图的位图，我想使用 BitBlt 复制除白色背景颜色之外的所有内容。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:38:34.250

这是您需要[`TransparentBlt`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145141%28v=vs.85%29.aspx)功能的地方。它类似于`StretchBlt`，而后者又提供了优于`BitBlt`.

该函数需要额外的参数：

> cr透明 [输入]
> 
> 源位图中要视为透明的 RGB 颜色。

# vba - 打开宏以删除 KIll Excel.exe

> ID：14058850
> 
> 赞同：0
> 
> 时间：2012-12-27T17:43:39.817
> 
> 标签：vba, excel

我创建了一个可以正常工作的 Excel 宏，但是当我从（*在宏的一个不好的地方*`PERSONAL.XLS`）的开始目录将此代码添加到我的宏时，我无法打开宏，也找不到它。`MS Excel`

 *我怎样才能打开宏来删除这个坏代码！！！

```
Dim sKill As String
sKill ="TASKKILL /f /IM EXCEL.EXE"
....
shell sKill , vbHide 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:50:04.643

...为什么不从该目录中删除您的personal.xls 并重新开始？

或删除它，将其重命名为 a.xls 或其他任何内容，然后打开它。

或设置您的工具 > 宏选项，使宏不运行。*

# php - 选择并回显所有表格（无论它是什么）

> ID：14058851
> 
> 赞同：0
> 
> 时间：2012-12-27T17:43:43.517
> 
> 标签：php, mysql

我有一个表，我可以选择并回显列 (th) 和字段数据 (td) 的名称。但用户可以添加和删除列。我如何编写更灵活的代码来适应用户的变化？我的意思是能够在不知道所有字段的情况下拥有整个表格。

```
<?php  
$sql = "SELECT * from eee";
$result = mysql_query($sql,$con);
$id = mysql_field_name($result, 0);
$a = mysql_field_name($result, 1);
$b = mysql_field_name($result, 2);
$c = mysql_field_name($result, 3);
?>

<tr>
<th><input class="gris" type="text" name="<?php echo $id ?>" value="<?php echo $id ?>"/></th>
<th><input class="gris" type="text" name="<?php echo $a ?>" value="<?php echo $a ?>"/></th>
<th><input class="gris" type="text" name="<?php echo $b ?>" value="<?php echo $b ?>"/></th>
<th><input class="gris" type="text" name="<?php echo $c ?>" value="<?php echo $c ?>"/></th>
</tr>

<?php
$result = mysql_query("SELECT * FROM eee");
while($row = mysql_fetch_array($result))  {
?>
<tr>
<td> <input class="blanc" type="text" name="num" value="<?php echo $row['id']?>"/> </td>
<td><input class="blanc" type="text" name="a" value="<?php echo $row['a']?>"/></td>
<td><input class="blanc" type="text" name="b" value="<?php echo $row['b']?>"/></td>
<td><input class="blanc" type="text" name="c" value="<?php echo $row['c']?>"/></td>
</tr>

<?php } ?>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:58:42.913

What you are attempting to do is provide for a poor man's [ORM](http://en.wikipedia.org/wiki/Object-relational_mapping). I would suggest to you to read up on [INFORMATION_SCHEMA](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html). It is an ANSI standard that can provide you meta information about your databases and tables. You can select column names on the fly from there, and many modern RDMS's support it.

Another option would be to investigate [Doctrine](http://www.doctrine-project.org/projects/orm.html) as it will provide this functionality for you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:04:20.223

首先，就像人们评论的那样，您应该使用新的 mysql 库，例如 mysqli。

您可以使用 mysql_fetch_assoc($result) 来获取关联（ column => value ）数组。然后你可以循环遍历它。

```
$result = mysqli_query($query);

// Make the table headers
$assoc_data = mysqli_fetch_assoc($result);
echo "<tr>";
foreach ($assoc_data as $column => $data) {
    echo "<th>$column<th>";
}
echo "</tr>";

// Fill in the columns with the data from the DB
do {
    foreach($assoc_data as $column => $data) {
        echo "<td><input name=\"$column\" value=\"$data\"></td>";
    }
} while ($assoc_data = mysqli_fetch_assoc($result)); 
```

这样，如果数据库列发生更改或重命名或其他任何情况，您的表将自动调整以适应这些更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T18:01:06.567

假设`$rs`是一个包含结果集的关联数组的数组，就像您可以从大多数数据库接口获得的一样。[尤其是那些不使用 mysql_* 函数的函数，因为它们很快就会被弃用]

```
<?php

if( count($rs) == 0 ) { die('no values returned'); }

foreach( $rs[0] as $key => $value ) {
    printf('<th>%s</th>', $key);
}

foreach( $rs as $row ) {
    foreach($row as $value) {
        printf('<td>%s</td>', $value);
    }
} 
```

或者，如果您只是*必须*继续使用陈旧的旧功能......

```
<?php

$row = mysql_fetch_array($result) or die('no values returned');

foreach( $row as $key => $value ) {
    printf('<th>%s</th>', $key);
}

do {
    foreach($row as $value) {
        printf('<td>%s</td>', $value);
    }
} while($row = mysql_fetch_array($result)) 
```

对于您提供的任何大小的结果集，这两者都应该打印出带有适当列标题的表格。

# mysql - 无法在 localhost:3306 连接到 MySQL 服务器数据库

> ID：14058857
> 
> 赞同：2
> 
> 时间：2012-12-27T17:44:10.267
> 
> 标签：mysql, netbeans, connection

当我第一次在 Netbeans 中设置 MySQL 服务器时，一切都运行良好。现在有一天，当我连接到 MySQL 服务器时，我想我不小心点击了某些东西，或者我的计算机失去了电池寿命，并且在这些事件之后，我无法连接到 MySQL 服务器。我不确定上述任何一个事件是否会对连接到 MySQL 服务器数据库产生任何影响。

无论如何，自从这些事件以来，我发现我无法“启动”或“连接”到 MySQL 服务器数据库。我是通过 Netbeans IDE 来做这一切的。这是我如何尝试连接到我的数据库L的图片： ![在此处输入图像描述](../Images/5f724a1f0827db57a48d33f383f03507.png)

这是我单击连接后的错误消息：

无法连接。无法使用 com.mysql.jdbc.Driver（未知数据库 'twitterdata'）建立与 jdbc:mysql://localhost:3306/twitterdata 的连接。我要连接的数据库的名称是 twitterdata

1.  如何重新连接到 MySQL 服务器数据库“twitterdata”？
2.  我不熟悉 MySQL、数据库、服务器，也不知道如何重新连接。如果我应该提供任何其他有用的信息，请告诉我。
3.  我可以运行哪些 MySQL 工具来查找我的问题？
4.  为什么错误消息会告诉我数据库未知？

如果我到达 C:\ProgramData\MySQL\MySQL Server 5.5\data。有一个名为 twitterdata 的文件夹。![在此处输入图像描述](../Images/0ea4f38ccfbdabff159fe476405ed7f2.png)

以下是该目录的内容：![在此处输入图像描述](../Images/53bda2d278bf4646922ced0f820473dc.png)

1.  如果您需要更多信息或有其他有用的建议，请告诉我！

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-07T08:44:17.447

如果您使用的是 Windows 系统并且在连接时遇到错误“**无法连接 localhost 3306** ”。首先，您必须分两步启动 MySQL 服务：

1.  按“Windows键+ R”写入“services.msc”
2.  并以管理员身份运行启动 MySQL 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T10:28:22.173

可能存在三个问题：

1）您的服务器甚至没有运行。打开你的命令提示符并输入mysql 2）假设它是，你能检查它是否连接到正确的端口上。就像在网址中一样，您使用的是 3306，

尝试关注这篇文章： [如何找到我的 MySQL URL、主机、端口和用户名？](https://stackoverflow.com/questions/4093603/how-do-i-find-out-my-mysql-url-host-port-and-username)

3）如果您正在连接的数据库有任何凭据，您能检查一下吗？

[https://netbeans.org/kb/docs/ide/install-and-configure-mysql-server.html](https://netbeans.org/kb/docs/ide/install-and-configure-mysql-server.html)

# sqlite - sqlite3 插入动态表

> ID：14058863
> 
> 赞同：0
> 
> 时间：2012-12-27T17:44:25.297
> 
> 标签：sqlite, insert

我正在使用 sqlite3（将来可能是 sqlite4），我需要动态表之类的东西。我有许多具有相同格式的表：values_2012_12_27、values_2012_12_28、...（表数是动态的），我想动态选择接收一些数据的表。
我正在`_sqlite3_prepare`使用`INSERT INTO ? VALUES(?,?,?)`. 当然，这无法编译（附近有语法错误？）。在 sqlite 中有一种很好且简单的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:51:37.360

无法对表或列名等标识符使用 SQL 参数。

如果您不想保留这么多准备好的语句，只需在需要时随时准备它们。

* * *

如果您的数据库已正确规范化，您将拥有一个`values`带有额外`date`列的大表。这种组织通常是首选，除非您已经测量了两者并发现更好的性能（如果它确实存在）超过了管理多个表的开销。

# xhtml - 两个登录表单共享保存的浏览器数据，如何禁用？

> ID：14058870
> 
> 赞同：0
> 
> 时间：2012-12-27T17:45:07.647
> 
> 标签：xhtml

我正在开发一个使用两种登录表单的网站，一种用于普通用户，一种用于管理员。由于管理员也可以有一个独立的常规帐户，我想从浏览器中清除任何自动保存的数据中的表单。这样，管理面板就不会出现在早期阶段可能已在其他表单中填写的错误凭据。

这可能吗，如果可以，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:47:47.187

我看到你标记了这个问题 XHTML。我认为在 XHTML 中没有任何符合标准的方法可以做到这一点。也许有一些 JavaScript 技巧，但它会很混乱。

然而，HTML5 为表单定义了“自动完成”选项，因此您可以这样编写`<form>`标签：`<form action="..." autocomplete="off">`并且符合 HTML5 的浏览器不会自动填充字段（请记住设置 HTML5 文档类型！）这样做会导致用户看到类似这个：![没有自动填充](../Images/6d8edc4027bb5bd5011fedfc6205747c.png)

**根据 OP 的评论进行**编辑：更改字段的名称（理论上）会阻止一个字段的值自动完成另一个字段的值。**如果您的用户登录表单中的字段是`username`and`password`并且您调用了管理员登录中的字段`admin_username`and `admin_password`，则不会为另一个建议您使用其中一个的值。**

# css - 是否可以在媒体查询中使用 Foundation 语义网格混合？

> ID：14058872
> 
> 赞同：0
> 
> 时间：2012-12-27T17:45:26.060
> 
> 标签：css, sass, frontend, zurb-foundation

我用基础框架（http://foundation.zurb.com/）制作了一个小示例网格。网格由桌面模式下的四个浮动元素组成(_setting, $rowWidth 1140px)

*标记

```
 <div id="container">
    <div id="main">
       <div id="column"> 
```

*scss

```
 #container{
        @include outerRow(); 
    }
   .column{
        @include column(3);
    } 
```

以上基于这些来源的混合：http: [//foundation.zurb.com/docs/sass-mixins.php](http://foundation.zurb.com/docs/sass-mixins.php)

现在我想在平板电脑上以纵向模式查看示例时更改列结构。我做了这样的事情：

```
@media screen  and (min-width: 768px) and (orientation: portrait) {

    #container{
      @include outerRow(); 
    }
   .column{
          @include column(6);
    }

} 
```

出现以下错误：

```
>     DEPRECATION WARNING on line 21 of /Library/Ruby/Gems/1.8/gems/zurb-foundation-3.2.3/scss/foundation/mixins/_semantic-grid.scss:
>       @extending an outer selector from within @media is deprecated.
>       You may only @extend selectors within the same directive.
>       This will be an error in Sass 3.3.
>       It can only work once @extend is supported natively in the browser. 
```

谁能告诉我在基于基础的项目中为每个不同的媒体查询重新定义列结构的工作方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:29:24.113

一般来说，您需要做的就是`%clearfix`在媒体查询中重新定义扩展 mixin。如果这些类是在另一个文件中定义的，那么导入该文件也可以工作（前提是您没有将它放在某种控制块中，例如 if/else 语句）。

查看项目的来源，您想要做的事情可能不应该那样做（参见： [https ://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-网格.scss](https://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-grid.scss) )

您的示例代码中引用的两个 mixin 都会生成它们自己的媒体查询，因此请避免在同一个元素上调用它们两次，否则您最终会得到大量重复/未使用的 CSS。相反，只需覆盖实际需要修改的属性：

```
.exampleA {
    @include outerRow();

    @media screen and (min-width: 768px) and (orientation: portrait) {
        // do not @include outerRow() again here!
        // these are the only properties that are variable in the outerRow() mixin:
        width: $tabletWidth;
        min-width: $tabletMinWidth;
    }
} 
```

您需要意识到的另一[件事](https://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-grid.scss#L64)是，一旦您定义了您`$totalColumns`的 . [/_semantic-grid.scss#L64](https://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-grid.scss#L64)和[https://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-grid.scss#L19](https://github.com/zurb/foundation/blob/master/scss/foundation/mixins/_semantic-grid.scss#L19)）。默认情况下，您的平板电脑不能有 6 列，然后是 4 列。如果您需要这样做，您可以简单地自己运行该功能：`column``gridCalc()`

```
.exampleB {
    @include column(6);

    @media screen and (min-width: 768px) and (orientation: portrait) {
        width: gridCalc(2, 6); // columns, totalColumns
    }
} 
```

如果您对`$totalColumns`媒体查询的数量感到满意，请`$totalColumns`作为第二个参数传递。

# javascript - 如何以较小的页面尺寸使图像消失？

> ID：14058874
> 
> 赞同：5
> 
> 时间：2012-12-27T17:45:40.040
> 
> 标签：javascript, jquery, html, css

我正在为网站进行设计，当您减小页面大小时，我希望页脚中的特定图像消失。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T17:48:35.033

媒体查询不仅有可能，而且相当简单：

```
@media screen and (max-width: 600px) {

    .myImageClass {display:none;}

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:48:30.867

是的，这很容易做到。我建议您使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来完成工作。

```
/* Normal CSS rules (always applies) */
#footer { display: none; }

/* Media query rules to override previous rules, as necessary */
@media screen and (min-width: 800px) { 
   #footer { display: block; } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:48:16.533

这可以使用 CSS 媒体查询或使用 Javascript 来完成。SmashingMagazine 有一篇很好的文章可以帮助您入门：[http ://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

# d3.js - 如何在 nvd3 / d3.js 的 x 轴上显示日期？

> ID：14058876
> 
> 赞同：51
> 
> 时间：2012-12-27T17:45:52.313
> 
> 标签：d3.js, nvd3.js

我正在使用 nvd3，但我认为这是关于时间尺度和格式的一般 d3.js 问题。我创建了一个简单的例子来说明这个问题（见下面的代码）：

如果我省略了 xAxis 的 .tickFormat，它可以在没有日期格式的情况下正常工作。通过下面的示例，我得到了错误：

> 未捕获的类型错误：对象 1326000000000 没有方法“getMonth”

```
nv.addGraph(function() {

    var chart = nv.models.lineChart();

    chart.xAxis
         .axisLabel('Date')
         .rotateLabels(-45)
         .tickFormat(d3.time.format('%b %d')) ;

     chart.yAxis
         .axisLabel('Activity')
         .tickFormat(d3.format('d'));

     d3.select('#chart svg')
         .datum(fakeActivityByDate())
       .transition().duration(500)
         .call(chart);

     nv.utils.windowResize(function() { d3.select('#chart svg').call(chart) });

     return chart;
});

function days(num) {
    return num*60*60*1000*24
}

/**************************************
 * Simple test data generator
 */

function fakeActivityByDate() {
    var lineData = [];
    var y = 0;
    var start_date = new Date() - days(365); // One year ago

    for (var i = 0; i < 100; i++) {
        lineData.push({x: new Date(start_date + days(i)), y: y});
        y = y + Math.floor((Math.random()*10) - 3);
    }

    return [
        {
            values: lineData,
            key: 'Activity',
            color: '#ff7f0e'
        }
    ];
 } 
```

该示例（现已修复）位于*[带有 date axis 的 nvd3 中](http://ultrasaurus.github.com/nvd3-simpleline/date_axis.html)*。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-27T20:11:26.497

`Date`尝试在 x 轴的刻度传递给格式化程序之前创建一个新对象：

```
.tickFormat(function(d) { return d3.time.format('%b %d')(new Date(d)); }) 
```

[请参阅d3.time.format](https://github.com/mbostock/d3/wiki/Time-Formatting "D3 时间格式化文档")的文档以了解如何自定义格式化字符串。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-15T02:08:49.033

添加到 seliopou 的答案，正确地将日期与 x 轴对齐，试试这个：

```
chart.xAxis
      .tickFormat(function(d) {
          return d3.time.format('%d-%m-%y')(new Date(d))
      });

  chart.xScale(d3.time.scale()); //fixes misalignment of timescale with line graph 
```

# c# - GeckoFX：将 GeckoNode 转换为 GeckoHTMLElement

> ID：14058878
> 
> 赞同：2
> 
> 时间：2012-12-27T17:46:00.497
> 
> 标签：c#, dom, casting, geckofx

我只需要单击由唯一类标识的元素的第一个子项。

到目前为止，我的代码是：

```
geckoWebBrowser.Document.GetElementsByClassName("button")[0].FirstChild.Click(); 
```

问题是 GeckoFX 16 的`geckoWebBrowser.Document.GetElementsByClassName`返回一个类型的数组`GeckoNode`，它没有 Click 方法，所以这个代码不起作用。另一方面，该方法
`geckoWebBrowser.Document.GetElementsByName`
返回一个 Type 的数组`GeckoHTMLElement`，它确实有一个 Click 方法。

基于这一事实，我尝试使用`as`Operator 进行强制转换，但这总是会引发异常，并显示无法强制转换的消息。
我已经在 GeckoFX 的类中搜索了很多（遗憾的是没有任何文档），但我没有找到

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:57:36.767

在转换之前，您需要确保节点实际上是一个元素，而不是例如文本节点。

```
GeckoNode node = geckoWebBrowser.Document.GetElementsByClassName("button")[0].FirstChild;
if (NodeType.Element == node.NodeType)
{
  GeckoElement element = (GeckoElement)node;
  element.Click();
}
else
{
 // Even though GetElementByClassName return type could contain non elements, I don't think
 // it ever would in reality.
 Console.WriteLine("First node is a {0} not an element.", node.NodeType);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-27T19:12:20.180

你知道html是否已经加载了吗？

尝试在 DocumentCompleted 事件发生后运行此代码。

```
geckoWebBrowser1.DocumentCompleted += geckoWebBrowser1_DocumentCompleted;

private void geckoWebBrowser1_DocumentCompleted(object sender, EventArgs e)
{
   // Here you can add the coding to perform after document loaded
   GeckoInputElement txtbox = (GeckoInputElement)geckoWebBrowser1.Document.GetElementById("txtBox1");
   txtbox.SetAttribute("value","OK");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T04:03:39.057

GeckoElement 不支持 Click，但 GeckoHtmlElement。

geckoWebBrowser.Document.GetElementsBy... 不返回 GeckoHtmlElement，仅返回 GeckoElement(s)；好难过！

# android - 对用于端口的首选项设置 minValue 限制

> ID：14058882
> 
> 赞同：2
> 
> 时间：2012-12-27T17:46:12.147
> 
> 标签：android

我喜欢获取服务的端口，如下所示

```
 <EditTextPreference 
    android:defaultValue="4444" 
    android:key="port" 
    android:title="Port" 
    android:dependency="service_on"  
    android:inputType="number"      
    android:maxLength="4"        
    /> 
```

我已将其限制为 maxLength 4 但似乎没有 minlength 或 minvalue ??

基本上我想避免空值或较低值的端口，以避免已经在使用的端口/android分配的端口等冲突

任何想法我如何才能巧妙地更改 xml 而无需检查回调/侦听器？

谢谢，

# c# - winCE启动后如何强制查看SD/MMC卡

> ID：14058885
> 
> 赞同：6
> 
> 时间：2012-12-27T17:46:19.983
> 
> 标签：c#, windows-ce

我正在为与一些科学设备交互的新仪器开发软件。用户界面是通过 Windows CE 掌上电脑（Windows CE 600 V3.01 Build 195）。仪器设置为始终将柔性电缆的一端插入 PC 上的 SD 卡插槽。电缆插入仪器，另一端插入已安装的 SD 卡（如果存在）。SD 卡包含一个用于仪器的芯片，以及所需的软件/固件更新和与该芯片相关的数据文件。我有在 WinCE 启动时运行的 ac# 软件应用程序。此应用程序检查是否存在 SDMMC 卡，因为它依赖于与随附芯片相关的数据来实现某些功能。

我的问题：如果在 WinCE 启动时将 SD 卡插入柔性电缆的另一端，winCE 会检测到卡的存在并创建 \SDMMC 文件夹，允许软件读取数据。如果仅插入了柔性电缆，但另一端没有 SDMMC 卡，则 Windows 不会创建该文件夹。这是我期待的。但是我们的现场工程师会在软件处于活动状态时出于各种原因交换卡以更换芯片。如果在插入卡之前启动 Windows，则会出现此问题。由于使用了柔性电缆，WinCE 永远不会检测到卡已插入。它也永远不会检测到它已被删除。

该软件每 5 秒轮询一次 SD 卡。固件可以通过设置位来判断是否插入了卡，并将此信息传递给软件。如果卡以前不存在，现在检测到，但 \SDMMC 文件夹不存在，我希望软件触发 WinCE 再次尝试检测。我考虑过使用注册表值，但不清楚是否可以写入 HKEY_LOCAL_MACHINE SDMMc 值。我也不太确定这些值的含义。可以重置这些值吗？我看到 Storage Manager Registry 将定义如下：

```
[HKEY_LOCAL_MACHINE\System\StorageManager\Profiles\SDMMC] 
"Name"="SD MMC device"
"Folder"="SD Card 
```

有没有办法读/写这个注册表来戳winCE看看卡已经插在电缆的另一端？我完全不同意这个想法吗？还有其他方法可以做到这一点吗？

我为这个冗长的问题道歉。我通常在应用程序级别玩。谷歌搜索这个问题并没有给我我需要的答案，尽管我可能没有足够的知识来提出正确的问题。感谢你给与我的帮助。

更新：我仍在尝试找到解决此问题的方法。我目前的想法是在我的仪器固件检测到卡已插入时强制 Windows CE 重新枚举设备。我的代码轮询固件以在我的 c# 应用程序中接收此通知。对于我的仪器/应用程序，SD 卡始终位于“Dsk2:”中。当 c# 应用程序收到 SD 卡已插入的通知时，它会调用执行以下操作的方法：

代码

```
 hDevice = CreateFile("\\Dsk2:", (0x80000000) | (0x40000000), 0,
        IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);

     if (hDevice == INVALID_HANDLE_VALUE)
     {
        int hDeviceError = Marshal.GetLastWin32Error();
        // THis is an error - call GetLastERror to find
        // out what happened.
        using (StreamWriter bw = new StreamWriter(File.Open(App.chipDebugFile, FileMode.Append)))
        {
           String iua = "DevDriverInterface: error from CreateFile: " + hDeviceError.ToString();
           bw.WriteLine(iua);
        }
        return false;
     }

     bResult = DeviceIoControl(hDevice,
        IOCTL_DISK_UPDATE_PROPERTIES, 
        null,
        0,
        null,
        0,
        ref nBytesReturned,
        nOverLapped); 
```

/代码

在上面，CreateFile() 调用失败并出现错误 55：“指定的网络资源或设备不再可用”。

我的问题：我试图重新枚举设备是否合理？CreateFile 错误是否表明我应该进行 ActivateDevice() 调用？我在这里看到一个例子： [Problems getting a device driver to load at startup - WM6.1](https://stackoverflow.com/questions/3585333/problems-getting-a-device-driver-to-load-at-startup-wm6-1) of someone calls ActivateDevice() from c# code 并想知道这是否会解决让 WIndows CE 识别 SD 卡现在的问题插入。谁能帮我理解要发送到窗口的 ActivateDevice() 命令的参数？我用这种方法离谱吗？

这对我来说是全新的领域，我感谢您提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:19:13.327

对于任何感兴趣的人，这里是解决问题的代码。当固件检测到 SD 卡在上电后被插入或删除时调用此方法。本质上，它卸载/加载设备驱动程序：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
 public struct DEVMGR_DEVICE_INFORMATION
 {
  public uint dwSize;
  public IntPtr hDevice;
  public IntPtr hParentDevice;
  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 6)]
  public string szLegacyName;
  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
  public string szDeviceKey;
  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
  public string szDeviceName;
  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
  public string szBusName;
}

public enum DeviceSearchType : int
{
  DeviceSearchByLegacyName = 0,
  DeviceSearchByDeviceName = 1,
  DeviceSearchByBusName = 2,
  DeviceSearchByGuid = 3,
  DeviceSearchByParent = 4
}
class DevDriverInterface
{
  [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
  public struct SECURITY_ATTRIBUTES
  {
     public int nLength;
     public IntPtr lpSecurityDescriptor;
     public bool bInheritHandle;
  }

  [DllImport("coredll.dll", SetLastError = true)]
  public extern static int ActivateDeviceEx(string device, IntPtr regEnts,
     UInt32 cRegEnts, IntPtr devKey);

  [DllImport("coredll.dll", SetLastError = true)]
  public extern static bool DeactivateDevice(int handle);

  [DllImport("coredll.dll", SetLastError = true)]
  public static extern int FindFirstDevice(DeviceSearchType
  searchType, IntPtr searchParam, ref DEVMGR_DEVICE_INFORMATION pdi);

  // Constructor
  public DevDriverInterface() { }

  public bool MountSDCardDrive()
  {
     const int INVALID_HANDLE_VALUE = -1;

     string mRegPath1 = "";
     int handle = INVALID_HANDLE_VALUE;
     DeviceSearchType searchType = DeviceSearchType.DeviceSearchByDeviceName;

     DEVMGR_DEVICE_INFORMATION di = new DEVMGR_DEVICE_INFORMATION();
     di.dwSize = (uint)Marshal.SizeOf(typeof(DEVMGR_DEVICE_INFORMATION));

     String searchParamString = "SDH1";

     IntPtr searchParam = Marshal.StringToBSTR(searchParamString);

     handle = FindFirstDevice(searchType, searchParam, ref di);

     if (handle == INVALID_HANDLE_VALUE)
     {
        // Failure - print error
        int hFindFirstDeviceError = Marshal.GetLastWin32Error();
        using (StreamWriter bw = new StreamWriter(File.Open(App.chipDebugFile, 
            FileMode.Append)))
        {
           String iua = "DevDriverInterface: error from FindFirstDevice: " + 
                  hFindFirstDeviceError.ToString();
           bw.WriteLine(iua);
        }
        return false;
     }
     else
     {
        mRegPath1 = di.szDeviceKey;
        bool deactBool = DeactivateDevice((int) di.hDevice);
        if (deactBool == false)
        {
           using (StreamWriter bw = new StreamWriter(File.Open(App.chipDebugFile,
              FileMode.Append)))
           {
              String iua = "DevDriverInterface: DeactivateDevice: returned false -
                          FAILED";
              bw.WriteLine(iua);
           }
           return false;
        }

        Thread.Sleep(50);
        // Call ActiveDevice to setup the device driver
        handle = ActivateDeviceEx(mRegPath1, IntPtr.Zero, 0, IntPtr.Zero);
        if (handle == INVALID_HANDLE_VALUE)
        {
           // Failure - print error
           int hActivateDeviceError = Marshal.GetLastWin32Error();

           using (StreamWriter bw = new StreamWriter(File.Open(App.chipDebugFile, 
              FileMode.Append)))
           {
              String iua = "DevDriverInterface: error from ActivateDevice: " + 
                     hActivateDeviceError.ToString();
              bw.WriteLine(iua);
           }
           return false;
        }

     }

     return true;
  }

}; // end class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:32:40.790

在我在研华的同事的帮助下，这个问题得到了解决。他们为我提供了一个小型 c++ 可执行文件，该可执行文件验证加载/卸载设备驱动程序会触发 wince 识别已插入 SD 卡。然后我的问题变成了让它在我的 c# 应用程序中工作。在这个线程的一些帮助下（我自己的帖子）：

[c# FindFirstDevice 编组](https://stackoverflow.com/questions/14401432/c-sharp-findfirstdevice-marshaling)

我可以通过使用“SDH1”作为标识设备的字符串调用 FindFirstDevice()，然后调用 DeactivateDevice()/ActivateDeviceEX() 来实现此功能。如果有人对特定代码感兴趣，我可以稍后发布（我现在在家，代码在我的工作笔记本电脑上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:41:58.213

让我们看一下正常运行的系统中的事件顺序。

1.  设备启动并加载 SD/MMC 驱动程序
2.  卡已插入卡槽
3.  发生硬件中断（可能是电源检测，可能是数据 - 这取决于 OEM）
4.  中断处理程序通知 SDMMC 驱动程序存在卡
5.  驱动查询卡类型
6.  加载正确的功能驱动程序（存储等）（或在存储的情况下通知）
7.  功能驱动程序的工作是将硬件暴露给操作系统和应用程序

你的问题是如果卡已经在插槽中，#3 在启动时不会正确发生。这在 SD 或 USB 的平台开发中并不少见 - 在插槽通电之前，中断处理程序必须正常工作且未屏蔽。

很难为此创建软件解决方法，特别是如果 OAL（由硬件制造商而非 Microsoft 开发的操作系统的一部分）是一个黑匣子。我认为它是在这种情况下。

需要明确的是，这绝对是一个平台错误。第一个行动方案应该是与设备 OEM 的支持小组交谈，告诉他们他们有错误，看看是否可以让他们修复它。

如果失败（如果您没有购买很多设备，或者设备很旧，那么获得支持是....具有挑战性的）那么我建议深入研究平台 SDMMC 驱动程序，看看是否有任何方法可以进入过程的中间。我从未尝试过（我一直在 OEM 方面，只是修复了驱动程序或平台代码），所以我不确定是否有解决方案，但值得一看。

如果您下载并安装 Platform Builder 的评估版，源代码是免费的（请务必选择“安装源”选项）。都是C，尝试浏览并没有什么好玩的，但俗话说，“使用源代码，卢克。”

# powershell - 为什么带参数的 Get-Service 意味着按名称过滤

> ID：14058888
> 
> 赞同：0
> 
> 时间：2012-12-27T17:46:28.257
> 
> 标签：powershell, powershell-3.0

我试图了解 powershell 命令背后的机制。我看到[get-service](http://technet.microsoft.com/en-us/library/ee176858.aspx) 返回一个名称是其字段之一的服务对象，因此您可以按名称过滤（使用 where、select...）。

我试图理解为什么当我运行它时：

```
Get-Service *sql* 
```

PowerShell 假设参数是按名称过滤的？我可以在命令描述中的哪里看到它？

PowerShell-3.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:54:14.933

试试这个：

```
Get-Help Get-Service 
```

您会注意到默认参数集将接受第一个参数作为 -Name 参数。

您正在有效地执行此操作：

```
Get-Service -Name *sql* 
```

# visual-c++ - GCC v/s Visual Studio 运行时差异

> ID：14058890
> 
> 赞同：-2
> 
> 时间：2012-12-27T17:46:32.960
> 
> 标签：visual-c++, gcc

我为车辆路线项目编写了 C++ 代码。在我的戴尔笔记本电脑上，我安装了 Ubuntu 和 Windows 7。当我在 UNIX 平台上的 gcc 编译器中运行我的代码时，它的运行速度至少比 Windows OS 上的 Visual C++ 2010 上完全相同的代码快 10 倍（它们都在同一台机器上）。这不仅仅是针对一个特定的代码，事实证明这发生在我一直使用的几乎所有 C++ 代码中。

我假设对运行时的如此大差异以及为什么 gcc out 执行可视 C++ 运行时的原因有一个解释。有人可以启发我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:52:42.583

根据我的经验，两个编译器是相当的，但是你必须注意一些事情： 1\. Visual Studio 默认开启堆栈检查，这意味着每个函数都以少量的“memset”开始并以少量的“memcmp”。如果您想要性能，请关闭它 - 当您写入十元素数组的第 11 个元素时，它非常适合捕捉。2\. Visual Studio 做缓冲区溢出检查。同样，这会增加执行的大量时间。

请参阅：[Visual Studio 运行时检查](http://msdn.microsoft.com/en-us/library/8wtf2dfz.aspx)

我相信这些通常在调试模式下启用，但不是在发布版本中启用，因此您应该从发布版本和 gcc 上的 -O2 或 -O3 优化版本中获得类似的结果。

如果这没有帮助，那么也许您可以给我们一个小的（可编译的）示例以及相应的时间。

# apache - 为什么我的 HTTPS 重定向不起作用？

> ID：14058898
> 
> 赞同：1
> 
> 时间：2012-12-27T17:47:35.393
> 
> 标签：apache, .htaccess

我安装了 SSL，当我将它放入`https://`链接时它可以工作，证书在那里并且一切都按顺序显示。现在，我正在尝试`https`按照我在 SO 上的其他问题上找到的一些说明来始终强制使用我的管理文件夹。但是，似乎没有任何方法对我有用。

这就是我正在尝试的（在 .htaccess 中）：

```
RewriteCond %{HTTPS}  off
RewriteRule  ^/admin/$1  https://mydomain.com/admin/$1  [R=301,L,QSA] 
```

我究竟做错了什么？我在 Apache 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:49:14.457

试试这个：

```
RewriteCond %{HTTPS} !=on
RewriteRule ^/?admin/ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L,QSA] 
```

# javascript - 无法测试 Facebook Open Graph 操作

> ID：14058899
> 
> 赞同：0
> 
> 时间：2012-12-27T17:47:44.843
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-opengraph

我正在尝试测试一个 Open Graph Facebook 操作，但在思考如何操作时遇到了麻烦。我使用此视频开始：[http](http://www.youtube.com/watch?v=8x6T7-WFSBg) ://www.youtube.com/watch?v=8x6T7-WFSBg 。当我尝试运行代码（我已粘贴在下面）时，它给了我一个错误。我想我只是测试一下，看看我是否通过访问[http://graph.facebook.com/me/APP_NAME](http://graph.facebook.com/me/APP_NAME)得到正确的响应（app_name 当然被我的应用程序命名空间替换）。我得到了这个错误：

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

我假设我无法测试我的操作的原因是因为没有活动的访问令牌？我发现的问题是我是应用程序的管理员，所以我假设我应该以任何一种方式访问​​。

这是使用的代码（来自该视频），以便对 Open Graph 操作进行简单的基本测试。请注意，我已将应用程序的信息替换为所有大写的单词。提前感谢您的帮助，我对 Open Graph 非常陌生，我只是想深入了解一下。也感谢您对我的耐心等待！

这是代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xmlns:fb="https://www.facebook.com/2008/fbml"> 
     <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# APP_NAMESPACE: http://ogp.me/ns/fb/APP_NAMESPACE#">
  <meta property="fb:app_id" content="APP_ID" /> 
  <meta property="og:type"   content="APP_NAMESPACE:ACTION" /> 
  <meta property="og:url"    content="Put your own URL to the object here" /> 
  <meta property="og:title"  content="Sample ACTION" /> 
  <meta property="og:image"  content="https://fbstatic-a.akamaihd.net/images/devsite/attachment_blank.png" /> 
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    </head>
    <body>

    <input type="button" value="test" onclick="javascript:postAction('ACTION', 'OBJECT', 'URL OF THIS PAGE');" />

     <script type="text/javascript">
    function postAction( action, object_type, object_url ){
        FB.api('/me/APP_NAMESPACE:' + action + '?' + object_type + '=' + object_url, 'post', function(response){
            if (!response || response.error) {
                    alert('Error occured');
            } else {
                alert('Post was successful! Action ID: ' + response.id);
            }
        });
    }
    </script>

    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 'APP_ID', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         d.getElementsByTagName('head')[0].appendChild(js);
       }(document));
    </script>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:28:40.230

您需要使用应用程序对您的用户进行身份验证，请在此处查看更多信息：[http](http://hayageek.com/facebook-dialog-oauth/) ://hayageek.com/facebook-dialog-oauth/或通过 facebook dev [http://developers.facebook.com/docs/concepts/login/](http://developers.facebook.com/docs/concepts/login/)

# java - 如何访问在 UIComponent 的属性中链接的 bean？

> ID：14058905
> 
> 赞同：2
> 
> 时间：2012-12-27T17:48:04.177
> 
> 标签：java, validation, jsf-2, primefaces, el

我需要访问在 UIComponent 的 EL 表达式中使用的 bean 对象。

例如，在此示例代码中：

**xhtml:**

```
<h:form>
    <f:view>
        <p:selectBooleanButton value="#{baseBean.selected}" onLabel="Instalar" offLabel="Ignorar" onIcon="ui-icon-check" offIcon="ui-icon-close">
            <f:validator validatorId="baseValidator.items" />
        </p:selectBooleanButton>
        <p:commandButton type="submit" value="Submit"
            actionListener="#{baseBean.process}"
            ajax="false" />
    </f:view>
</h:form> 
```

**爪哇：**

```
@FacesValidator("baseValidator.items")
public static class BaseValidator implements Validator
{

    @Override
    public void validate(FacesContext context, UIComponent component,
            Object value) throws ValidatorException {
        ValueReference reference = component.getValueExpression("value").getValueReference(context.getELContext());
        Object o1 = reference.getBase();
        Object o2 = reference.getProperty();
        return; //break point here
    }

} 
```

当按下命令按钮时`BaseValidator.validate`，我需要获取`baseBean`使用的对象`<p:selectBooleanButton value="#{baseBean.selected}">`

我的代码目前正在抛出`NullPointerException`，因为`getValueReference`正在返回*null*。如何在 validate 方法中获取该对象？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T10:37:16.693

```
value="#{baseBean.selected}" should be changed as "#{baseBean.value}" 
```

# batch-file - 如何将随机文件夹中的文件批量复制到目标文件夹中？

> ID：14058906
> 
> 赞同：0
> 
> 时间：2012-12-27T17:48:03.960
> 
> 标签：batch-file

我需要一个批处理脚本将文件从特定目录的随机子文件夹复制到目标目录中。

比如在自己的子目录下会有一些文件，例如

```
.../source/a/file.txt
.../source/b/file.txt 
```

所以有很多这些文件，我想随机选择其中一个并将其复制到新目录中

```
.../destination/file.txt 
```

所以目标中的 file.txt 只是被其他同名但内容不同的文件覆盖。

我是批处理脚本的新手，我不太清楚如何从随机子文件夹中选择每个文件。我还希望它每 30 秒重复一次，直到我终止脚本，但我认为只要制作第二个脚本，每 30 秒调用一次这个 .bat 文件就足够了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:26:15.173

```
@echo off
setlocal EnableDelayedExpansion
rem Enter into the directory that contain the folders
pushd \Fullpath\source
rem Create an array with all folders
set i=0
for /D %%a in (*) do (
   set /A i+=1
   set folder[!i!]=%%a
)
rem Randomly select one folder
set /A index=(%random%*i)/32768 + 1
rem Copy the desired file
copy "!folder[%index%]!\file.txt" "\Fullpath\destination" /Y
rem And return to original directory
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:33:42.563

这可以满足您的要求。只需设置您的源目录、目标目录和文件名过滤器。

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

pushd "...\source\"

:: Enumerate Files. Method 1
set "xCount=0"
for /r %%A in (file.txt) do if exist "%%~A" set /a "xCount+=1"
echo %xCount%

:: Select a Random File.
set /a "xIndex=%Random% %% %xCount%"
echo %xIndex%

:: Find an Copy that File. Method 1
set "xTally=0"
for /r %%A in (file.txt) do if exist "%%~A" (
    if "!xTally!" EQU "%xIndex%" (
        xcopy "%%~fA" "...\destination\file.txt" /Y
        goto End
    )
    set /a "xTally+=1"
)

:End
popd
endlocal
pause 
```

键入[`xcopy /?`](http://technet.microsoft.com/en-us/library/cc771254%28v=ws.10%29.aspx)以查看其所有选项。

以下是文件枚举的一些替代循环方法。

```
:: Enumerate Files. Method 2
set "xCount=0"
for /f %%A in ('dir *.txt /a:-d /s ^| find "File(s)"') do set "xCount=%%~A"
echo %xCount%

:: Find an Copy that File. Method 2
set "xTally=0"
for /f "delims=" %%A in ('dir *.txt /a:-d /b /s') do (
    if "!xTally!" EQU "%xIndex%" (
        xcopy "%%~fA" "...\destination\file.txt" /Y
        goto End
    )
    set /a "xTally+=1"
) 
```

享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T03:57:58.037

批处理脚本的特点是

1.  它将所有文件从源文件夹复制到具有相似结构的目标文件夹（甚至保留空文件夹）。
2.  可以在存档文件夹（源）中保留 N 天最近的文件，剩余的文件将被移动到备份文件夹（目标）。
3.  可以安排到N天到N年。
4.  可用于任何源到目标文件夹备份。
5.  源文件夹可以随时添加N个文件夹并删除文件夹或文件，但目标文件夹始终添加文件夹并且永远不会删除任何文件夹或文件。

* * *

```
@echo off
Set "sourcefolder=E:\Interfaces"
Set "destinationfolder=E:\BackupInterface"
If Exist %sourcefolder% (
For /F %%* In ('Dir /b /aD "%sourcefolder%" 2^>nul') do (If Not Exist "%destinationfolder%\%%*" ( RD /S /Q "%destinationfolder%\%%*")
xcopy /e /v /i /y /q "%sourcefolder%\%%*" "%destinationfolder%\%%*" 
forfiles /p "%sourcefolder%\%%*" /s  /d -30 /c "cmd /c del /Q /S  @file" )
) Else (echo.Source folder could not be found)
:end of batch
echo.&echo.finished! 
```

* * *

# python - Python 在 Mac OS 上以块的形式解码 MP3

> ID：14058912
> 
> 赞同：5
> 
> 时间：2012-12-27T17:48:16.390
> 
> 标签：python, audio, header, mp3, bitrate

我有一个 Tornado Python 服务器，它一次接受一个可变比特率 mp3 文件（这些块由固定数量的帧组成）。

我所做的只是将二进制文件向前传递，但是，我想知道块的持续时间。因为它是可变比特率，所以我无法进行简单的计算。我正在研究 pymedia，但我在 mac OS 上开发，似乎 pymedia 无法安装在那里（而且，它自 2006 年以来一直没有更新）。我也试过 pymad 但无法安装它（它自 2007 年以来一直没有更新），无论如何它似乎更以文件为中心。

理想情况下，我想以例如[诱变剂](http://code.google.com/p/mutagen/wiki/Tutorial)的方式从每个块中提取比特率。但是，mutagen 需要一个文件作为输入，而我希望输入一个 mp3 帧或一系列这样的帧。

```
def _on_read_frames(self, data):
  logging.info('read from input:\n%s', data)
  binary_audio = base64.b64decode(data)
  # need to find out how many miliseconds went by here 
```

更新：这是近实时流媒体架构的一部分，因此 mp3 以小块编码，所以我目前的解决方案是使用允许简单计算的恒定比特率，我意识到使用可变比特率几乎没有任何好处这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-11T08:51:09.587

每帧有 1,152 个样本，所以如果你的块是固定数量的`N`帧，那么你的块是固定长度的`N*1152`样本。要将其转换为毫秒，您需要从帧头中找到采样率。

你只需要一个 MP3 解析器。这是完整解码器的源代码：[https](https://bitbucket.org/portalfire/pymp3) ://bitbucket.org/portalfire/pymp3 包括帧头解析代码，这确实是您所需要的。

以下是有关格式的更多文档：http: [//www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header](http://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header)

# memcached - Memcached 权限问题...也许？

> ID：14058916
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:48:37.610
> 
> 标签：memcached

如果我有权访问 memcached ...

```
telnet localhost 11211 // success 
```

我一定能够查看（GET）缓存中的所有键吗？

在我的本地机器上，我可以远程登录到内存缓存并执行“GET”操作。然而，在我使用 ssh 的远程机器上，我所有的“GET”操作都返回“END”，即没有结果。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:20:00.250

在 memcached.conf 文件中注释以下行并重新启动 memcached 服务器。

```
# -l 127.0.0.1 
```

请参阅这篇文章：[无法从 memcached 中取回缓存的项目？](https://stackoverflow.com/questions/13617035/cant-get-cached-items-back-from-memcached/13622047#13622047)

# java - OSX - 生成最终存档时出错：无法获取调试签名密钥

> ID：14058917
> 
> 赞同：0
> 
> 时间：2012-12-27T17:48:41.150
> 
> 标签：java, android, macos

我最近安装了 android sdk 并创建了我的第一个应用程序。当我尝试运行我的项目时，我收到此错误“生成最终存档时出错：无法获取调试签名密钥”。我使用终端命令 ls -a 查找了我的 ~/.android 文件夹，但该文件夹不存在。任何想法为什么 ~/.android 文件夹会丢失？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-20T23:06:14.517

在终端中，尝试输入“cd ~/.android”。然后，“打开”。并且您的 Finder 有望找到它。

# java - Java：读取带有字母矩阵的txt文件，并在里面搜索单词

> ID：14058918
> 
> 赞同：-1
> 
> 时间：2012-12-27T17:48:40.507
> 
> 标签：java, crossword

我正在尝试用 Java 编写一个基本程序，并且我正在使用 BlueJ。我必须阅读一个由字母组成的 15x15 矩阵的文本文件 (input.txt)，并在其中查找单词。这些单词是已知的并写入文件 input.txt。可能 txt 文件已经以某种方式格式化，因为它形成了矩阵和搜索词，但是当我去打印时，我跳过了前 7-8 行（矩阵）。

我是一个初学者，如果可能的话，我想要一些关于如何启动这个程序的帮助，关于如何在不省略前几行的情况下读取文件 input.txt，以及如何读取矩阵中的单词（单词已经知道）并像填字游戏一样返回单词的“位置”或“方向”（北、南、西、东、东北、北-ov、南-e等...）！

谢谢你们 ;）

文件 input.txt 是：

```
15
*
ESAFAMELBORPOZE
MTOTEQEVIRCSFCE
SDSTTNLHTIMSFUD
CITGSUGBANDTUOI
IVRUPORAMREFBCE
MEAIATGFTNOCSOR
MRTDDRDAENORRPO
ITEIEOINEMOIPOL
AIGANCTRPIPMRSO
UTIORETAEMOIEID
SIAAEUGAABRNZTA
CAMMINAVRAIEIIM
ARTSONOPRRTLOVM
ACATUDESNNONSOO
TALOBMABEAMVOSS
#
SMITH
TENENTE
FERMA
PROBLEMA
VORRA
STRATEGIA
AGOSTO
FRUTTA
NOIA
PAURA
GUIDI
SCIMMIA
CAMMINA
POSITIVO
SOMMA
SPADE
TRENO
TIRO
CORTO
MONTAGNE
CRIMINE
TUOI
LIBERI
SCRIVE
COMPAGNO
BAMBOLA
VAMPIRO
SEDUTA
BAND
DOLORE
DONO
PREZIOSO
DIVERTITI
BUFFO
NOSTRA
CUOCO
FASE
IDEE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:00:05.187

我会将数据存储两次 1\. 行作为字符串 -> 您可以使用`.indexOf` [水平搜索] 进行搜索 2\. 列作为字符串 -> 您可以使用`.indexOf` [垂直搜索]进行搜索

也许我什至会在所有行中附加“分隔符”以避免在每一行上进行迭代以进行搜索。（列相同）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T17:55:35.747

One way to think about it would be to think of your matrix as a graph, and find the walk for each word.

A bad algorithm for doing it would be to find the starting (or ending) letter of a word, then parse the entire tree of connecting letters until you find it, and repeat until you find the word.

Start [here](https://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29), and it should lead you to some much better algorithms.

# c++ - Eclipse 未定义参考中的 Crypto++

> ID：14058920
> 
> 赞同：1
> 
> 时间：2012-12-27T17:48:50.007
> 
> 标签：c++, eclipse, g++, crypto++

我正在尝试使用 MinGW 工具链将 Crypto++ 用于我的 Eclipse C++ 项目。问题是，每当我尝试使用加密函数时，都会被“未定义的引用”错误淹没。有谁之前经历过这个吗？这是我得到的（截断）：

更新

```
g++ -L "C:\\Libraries\\crypto++\\Win32\\DLL_Output\\Debug" -lpthread -lcryptopp -o "Grum Net.exe" "src\\Vault\\VaultNode.o" "src\\User.o" "src\\Grum Net.o" 
src\Grum Net.o: In function `ZN8CryptoPP18HashTransformationD2Ev':
C:/Libraries/crypto++/cryptlib.h:531: undefined reference to `vtable for CryptoPP::HashTransformation'
src\Grum Net.o: In function `ZN8CryptoPP18HashTransformationC2Ev':
C:/Libraries/crypto++/cryptlib.h:531: undefined reference to `CryptoPP::Algorithm::Algorithm(bool)'
C:/Libraries/crypto++/cryptlib.h:531: undefined reference to `vtable for CryptoPP::HashTransformation'
src\Grum Net.o: In function `ZN8CryptoPP31IteratedHashWithStaticTransformIjNS_10EnumToTypeINS_9ByteOrderELi0EEELj64ELj16ENS_5Weak13MD5ELj0ELb0EE4InitEv':
C:/Libraries/crypto++/iterhash.h:90: undefined reference to `CryptoPP::Weak1::MD5::InitState(unsigned int*)'
src\Grum Net.o:Grum Net.cpp:(.rdata$_ZTVN8CryptoPP5Weak13MD5E[__ZTVN8CryptoPP5Weak13MD5E]+0x18): undefined reference to `CryptoPP::IteratedHashBase<unsigned int, CryptoPP::HashTransformation>::Update(unsigned char const*, unsigned int)'
src\Grum Net.o:Grum Net.cpp:(.rdata$_ZTVN8CryptoPP5Weak13MD5E[__ZTVN8CryptoPP5Weak13MD5E]+0x1c): undefined reference to `CryptoPP::IteratedHashBase<unsigned int, CryptoPP::HashTransformation>::CreateUpdateSpace(unsigned int&)'
src\Grum Net.o:Grum Net.cpp:(.rdata$_ZTVN8CryptoPP5Weak13MD5E[__ZTVN8CryptoPP5Weak13MD5E]+0x24): undefined reference to `CryptoPP::IteratedHashBase<unsigned int, CryptoPP::HashTransformation>::Restart()'
src\Grum Net.o:Grum Net.cpp:(.rdata$_ZTVN8CryptoPP5Weak13MD5E[__ZTVN8CryptoPP5Weak13MD5E]+0x44): undefined reference to `CryptoPP::IteratedHashBase<unsigned int, CryptoPP::HashTransformation>::TruncatedFinal(unsigned char*, unsigned int)'
src\Grum Net.o:Grum Net.cpp:(.rdata$_ZTVN8CryptoPP5Weak13MD5E[__ZTVN8CryptoPP5Weak13MD5E]+0x4c): undefined reference to `CryptoPP::HashTransformation::TruncatedVerify(unsigned char const*, unsigned int)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:50:28.797

你`-L`在你的报价里面。你有没有尝试过：

```
g++ -L "C:\\Libraries\\crypto++" -lpthread -o "Grum Net.exe" "src\\VaultNode.o" "src\\User.o" "src\\Grum Net.o" 
```

现在 g++ 知道在哪里查找您的库，您还需要从*C:\Libraries\crypto++*目录中指定要使用的库：

```
g++ -L "C:\\Libraries\\crypto++" -lcryptolib1 -lcryptolib2 -lpthread -o "Grum Net.exe" "src\\VaultNode.o" "src\\User.o" "src\\Grum Net.o" 
```

# java - 如何更改我的 Eclipse 源格式化程序设置以处理以下示例？

> ID：14058921
> 
> 赞同：3
> 
> 时间：2012-12-27T17:48:50.197
> 
> 标签：java, eclipse

我在eclipse中写了这段代码

```
protected void createTables(SQLiteDatabase db) {
        db.execSQL(
                                          "create table " + CUSTOMERS_TABLE +" (" +                     
                        CustomerId + " text primary key," +
                        FirstName + " text," +
                        MiddleName + " text," +
                        LastName + " text," +
                        Portrait + " BLOB," +
                        Gender + " integer," +
                        Age + " integer," +
                        Passed + " integer"+
                ");" 
```

但是当我使用 source->format eclipse 格式化我的代码时，让它们像这样

```
protected void createTables(SQLiteDatabase db) {
        db.execSQL("create table " + CUSTOMERS_TABLE + " (" + CustomerId
                + " text primary key," + FirstName + " text," + MiddleName
                + " text," + LastName + " text," + Portrait + " BLOB," + Gender
                + " integer," + Age + " integer,"
                + Passed
                + " integer" +");" 
```

我希望 eclipse 格式化程序保持我的代码不变。我应该设置哪些设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:54:24.703

enclose the line you don't want eclipse to reformat between `// @formatter:off` and `// @formatter:on`:

```
protected void createTables(SQLiteDatabase db) {
    // @formatter:off
    db.execSQL(
                                      "create table " + CUSTOMERS_TABLE +" (" +                     
                    CustomerId + " text primary key," +
                    FirstName + " text," +
                    MiddleName + " text," +
                    LastName + " text," +
                    Portrait + " BLOB," +
                    Gender + " integer," +
                    Age + " integer," +
                    Passed + " integer"+
            ");"
    // @formatter:on 
```

# directx - DirectDrawSurface (DDS) 间距计算

> ID：14058925
> 
> 赞同：2
> 
> 时间：2012-12-27T17:49:19.493
> 
> 标签：directx, directdraw

过去两天我一直在研究 DDS 格式并编写 DDS 纹理加载器，只是出于好奇，我遇到了一些我认为理所当然的东西，即“音高计算公式”。我真的很好奇为什么它们被指定完全一样，没有任何理由。

例如，对于块压缩格式（DXT#n、BC#n），全部基于 S3TC，其计算方式为

最大值（1，（宽度+3）/4）*块大小

所以，max 给出了两个值中较大的一个，但为什么它会起作用呢？为什么要将纹理的宽度加 3，然后将其划分为“半字节边界”？

另一方面，一些遗留类型是：

(( 宽度+1 ) >> 1) * 4

因此，右移基本上是在二进制基础上移动小数点，或除以二。那么，为什么要加 1，然后除以 2 再乘以 4？丢失最右边的两位？

最后一个，对于其他格式：

( 宽度 * bpp + 7) / 8

我了解每个像素的位数和最接近的字节边界划分，但为什么要加 7？

有人可以多写一点吗？或者指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:57:51.930

这些计算正在四舍五入，因为某些格式无法存储任意宽度的数据。四舍五入很重要，否则你会丢失纹理的像素。您会注意到，通常加法比被除数少 1。整数除法通常向下舍入，因此通过比除数加 1，除精确倍数以外的任何数字都将舍入到下一个值。

例如，如果你加 3 然后除以 4：

*   1 = 1
*   2 = 1
*   3 = 1
*   4 = 1
*   5 = 2
*   6 = 2
*   等等

其余的计算说明了相应格式的存储要求。对于 DXT 压缩，有 4x4 的像素块，这就是为什么大小以 4 个像素块为单位，然后每个块占用固定数量的字节，即 blockSize multiplier。

第二个计算是四舍五入到 2 像素的倍数，然后乘以 4。这表明可能是 16 位像素格式，其中像素为 2 字节宽，行必须是 4 字节的倍数（因此是两个像素的倍数)

# language-agnostic - 这段代码总是会产生堆栈溢出吗？

> ID：14058926
> 
> 赞同：1
> 
> 时间：2012-12-27T17:49:29.360
> 
> 标签：language-agnostic, recursion, stack-overflow

我不小心写了一些代码，其中包含今天看起来像这样的行：

```
public void fun1(args){
     fun2(args); 
}

public void fun2(args){
     fun1(args);
} 
```

它是在 Java 中的，所以当代码运行时，它产生了堆栈溢出并且代码崩溃了。那里没问题。

但这是基于 Java 的，我在其他语言中也看到了这一点（主要是 OO 或命令式语言）。是否有任何语言支持递归，这*不会*导致堆栈溢出，但可能是不同的错误类型？或者会“允许”无限循环无限期地运行，也许有足够的内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T17:59:25.143

Yes, a language with [tail call optimisation](https://en.wikipedia.org/wiki/Tail_call) will avoid the stack overflow problem in this case. For example, the following Scheme code would execute indefinitely when one of the following functions is called:

```
(define (fun1 args)
    (fun2 args))

(define (fun2 args)
    (fun1 args)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:00:51.650

它进入内存的原因是运行时跟踪存储局部变量的上下文堆栈。每次输入方法时都会将新上下文添加到堆栈中（从技术上讲，在类似 Java 的语言中，每次遇到 '{'

所以，基本上如果你想让它工作，你不需要上下文跟踪。汇编程序似乎是一个非常好的候选人。但它也有它自己的问题。

更好的是，你为什么会想要这样的事情......你可能想重新评估你在做什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T18:02:19.757

如果每次迭代不需要额外的内存，无限循环并不总是会导致崩溃。

无限递归并不总是导致崩溃，特别是如果它是尾递归并且取决于编译器/编程语言。

“方案”支持尾递归。

# mysql - 在sql中将事务表与不同类型的事务连接起来

> ID：14058928
> 
> 赞同：1
> 
> 时间：2012-12-27T17:49:37.857
> 
> 标签：mysql, sql, relational-database

我正在为一家餐馆制作一个 mysql 数据库。

我有一个表叫做：`*tbl_contents*`它存储了用于准备不同菜单项的所有内容。
现在我必须为所有支出维护一张表。这些支出可以是“购买内容”或一些常规支出，如电费或餐厅租金。

如何将两种支出存储在同一张表中？

我有桌子`tbl_fixed_expanditures`和`tbl_contents`。如果我为厨房买了一些东西，它应该存放在里面`tbl_contents`，如果我已经支付了电费，它就会被保存在`tbl_fixed_expenditures`.

![在此处输入图像描述](../Images/0c6f27a568bd4e083196d50f2eb0d344.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:09:32.433

嗯，很难给出一个正确的答案，但我可以根据我目前的理解给你一些模糊的猜想。

如果这两种支出具有不同的属性，但它们有一些共同点，则应该对表格进行规范化。使用`expenditures_tranx`作为中间表（就像，在 OO 术语中，顶级类）和剩余的表`tbl_fixed_expanditures`，并且`tbl_contents`可以是“专用”表（再次，在 OO 术语中，那些将从父级“继承”属性的表表），它将存储有关支出的更详细信息。这是一个简单的模型实体关系草案来说明。

```
 ____________          ___________________        _______________________    
  |tbl_contents|-1----*-| expenditures_tranx|-*---1-|tbl_fixed_expenditures|
  |exp_id:fk___|        |___________________|       |exp_id:fk_____________| 
```

这是一篇解释这些概念的有趣文章：http: [//apps.topcoder.com/wiki/display/training/Entity+Relationship+Modeling](http://apps.topcoder.com/wiki/display/training/Entity+Relationship+Modeling)

Let me know what you think.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:10:37.220

You are essentially trying to represent inheritance in a relational database.

You have two "classes" which are similar in some ways, and different in others. My suggestion is to create a table to act as a parent to both `tbl_expanditures` and `tbl_fixed_expanditures`.

Here's what I would do:

```
+------------------+
| tbl_expenditures |
+------------------+
| id               |
+------------------+

+------------------------+
| tbl_fixed_expenditures |
+------------------------+
| id                     |
| expenditureId          |
| ...                    |
+------------------------+

+---------------------------+
| tbl_variable_expenditures |
+---------------------------+
| id                        |
| expenditureId             |
| ...                       |
+---------------------------+ 
```

...where `tbl_fixed_expenditures.expenditureId` and `tbl_variable_expenditures.expenditureId` both have a reference to `tbl_expenditures.id`.

This way, when you need to refer to them simply as "expenditures" (for example, in your transaction table), you can reference `tbl_expenditures`, and when you need information that is unique to either fixed or variable expenditures, you can refer to the "child" tables.

这是关系数据库中非常常见的问题，有多种处理方法，每种方法各有利弊。IBM 有一篇非常好的文章概述了这些选项，我强烈推荐它进一步阅读：

[http://www.ibm.com/developerworks/library/ws-mapping-to-rdb/](http://www.ibm.com/developerworks/library/ws-mapping-to-rdb/)

# css - 移动字体大小的 CSS

> ID：14058930
> 
> 赞同：1
> 
> 时间：2012-12-27T17:49:41.693
> 
> 标签：css, mobile

在设计移动网站时，声明字体大小的最佳方式是什么？目前虽然我正在使用视口，但我的文本应该只有 1 行，但会分成 2 行。我应该使用 px、em、% 还是（小、大等）声明我的字体大小？干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:00:36.830

使用像素或 em 很好，但如果您希望字体在移动视图中看起来相同，则应添加

`-webkit-text-size-adjust: none;`

这将保持大小，但会影响可读性。

**句法**

```
-webkit-text-size-adjust: none | auto | <percentage>; 
```

# jquery - 使 AJAX 调用返回的结果实时进行排序

> ID：14058936
> 
> 赞同：0
> 
> 时间：2012-12-27T17:50:28.337
> 
> 标签：jquery, sorttable.js

我有一个初始页面（program_finder.asp），它对一些结果进行 AJAX 调用：

```
 $('#filtersForm').submit(function(){
      $('#resultsPane').load('program_finder_backend.asp',$('#filtersForm').serializeArray());
      return false; 
```

这工作得很好。我提交参数，后端页面运行一些 SQL，然后转储到我的前端 resultsPane 区域就好了。返回的信息是一个表格。

我想要做的是使返回的信息表按列排序。我喜欢这个功能并想使用它：

[http://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)

对于具有可排序类的表，用户可以单击列标题对内容进行排序。我认为这是用户友好的。它工作正常是一个静态页面。

我加载它

```
 script src="sorttable.js"></script 
```

在初始文件的头部。

我很确定问题是在初始页面加载时，DOM 中不存在返回的表格内容，因此 sorttable.js 找不到它们。我很确定我需要一个 .live() 或 .on() 或 .delegate() 某个地方来使返回的表结果对初始页面可见，但我不知道该怎么做。

我想我想要类似的东西：

```
 $('table.sortable').on('click', function(){
       // but here I don't know how to call sorttable();
        }); 
```

如果不清楚，我将添加更多信息。

编辑：我应该补充说 sorttable 文档是这样说的：

> 对页面加载后添加的表格进行排序
> 
> 一旦您在运行时向页面添加了一个新表（例如，通过执行 Ajax 请求来获取内容，或通过使用 JavaScript 动态创建它），获取对它的引用（可能使用 var newTableObject = document.getElementById (idOfTheTableIJustAdded) 或类似的），然后执行以下操作：
> 
> sorttable.makeSortable(newTableObject);

但这对我没有任何帮助。我不明白。

编辑#2：把它放在这里以便于阅读。我试过：

```
 $('#filtersForm').submit(function(){
     $('#resultsPane').load('program_finder_backend.asp', $('#filtersForm').serializeArray(), function() {
         sorttable.makeSortable($("#resultsPane").find("table")[0]);
      return false});
    }); 
```

每个 Dogbert 都没有运气。这从初始页面直接转移到后端页面。

编辑#3

从引用的小提琴中添加 Adeneo 的代码：

```
 $('#filtersForm').submit(function(e){
e.preventDefault();
$('#resultsPane').load('program_finder_backend.asp', $('#filtersForm').serializeArray(), function() {
     sorttable.makeSortable($(this).find("table").get(0));
});
}); 
```

这似乎有效。我永远不会想到这一点。还要感谢 Dogbert。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:13:35.287

这应该有效：

```
$('#resultsPane').load('program_finder_backend.asp', $('#filtersForm').serializeArray(), function() {
  sorttable.makeSortable($("#resultsPane").find("table")[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:23:01.370

您必须阻止提交表单、加载表格、然后将表格作为普通 DOM 元素并将其传递给`makeSortable()`函数的默认操作，如下所示：

```
$('#filtersForm').submit(function(e){
    e.preventDefault();
    $('#resultsPane').load('program_finder_backend.asp', $('#filtersForm').serializeArray(), function() {
         sorttable.makeSortable($(this).find("table").get(0));
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T11:05:00.200

以为我会在这里发布这个，因为它可能会帮助别人。

Sorttable 工作得很好，直到您更改表格的内容（可能通过 AJAX 返回），然后它不知道这个新内容并且不再正确排序。

如果您要向其中注入新表，则函数 makeSortable(table) 可以正常工作，因为 sorttable 现在将遍历表并使其可排序。但是，如果您有一个已经通过 makeSortable(table) 放置的现有表格 - 可能在页面加载时 - 此表格标题单元格可能已经附加了一个 sorttable 事件处理程序，如果您只是调用 pass the table 只会让您感到悲伤再次进入 makeSortable。

这给我今天带来了一些麻烦，其中包含一个包含 AJAX 可更改内容的表，我发现 sorttable 在 AJAX 响应之后确实需要一个“重新加载”功能。所以这里

```
reload: function (table) {
  // get the head row and iterate each header cell
    headrow = table.tHead.rows[0].cells;
    for (var i=0; i<headrow.length; i++) {
        // use the provided removeEvent function to get rid of the current handler
        removeEvent(headrow[i], 'click', sorttable.innerSortFunction);

        // check if there is a currently sorted col and remove class
        if (headrow[i].className.search(/\bsorttable_sorted\b/) != -1) {
            headrow[i].className = headrow[i].className.replace('sorttable_sorted','');
        }
        if (headrow[i].className.search(/\bsorttable_sorted_reverse\b/) != -1) {
            headrow[i].className = headrow[i].className.replace('sorttable_sorted_reverse','');
        }
    }
    // remove any sort indicating arrows
    sortfwdind = document.getElementById('sorttable_sortfwdind');
    if (sortfwdind) { sortfwdind.parentNode.removeChild(sortfwdind); }
    sortrevind = document.getElementById('sorttable_sortrevind');
    if (sortrevind) { sortrevind.parentNode.removeChild(sortrevind); }
    // now we can make the table sortable with it's new content
    sorttable.makeSortable(table);
} 
```

只需将该函数放在 sorttable.js 中的shaker_sort 函数下（不要忘记在shaker_sort 的最后一个大括号后加一个逗号）。现在，如果您更改先前已排序表的内容，请将其传递给 reload 以使其再次可排序：

```
sorttable.reload(document.getElementById('#MyTableID')); 
```

**重要的**

要使上述重新加载函数起作用，您必须断开 sorttable.innerSortFunction 函数，以便它可以全局访问，否则删除事件处理程序将不起作用。为此，只需剪切并粘贴 innerSortFunction，使其成为 sorttable 上的函数，就像 reload 和 sort_shaker 一样。剪切并粘贴 innerSortFunction 函数后，确保它仍作为事件处理程序附加到标题，如下所示：

```
dean_addEvent(headrow[i],"click", sorttable.innerSortFunction); 
```

# file - OpenGL - 创建视频输出文件

> ID：14058937
> 
> 赞同：2
> 
> 时间：2012-12-27T17:50:34.523
> 
> 标签：file, opengl, video, video-capture, glreadpixels

我希望能够使用 OpenGL 创建视频输出文件，而不是通常在屏幕输出上显示。我正在考虑不使用 glutPostRedisplay() 或（SFML 版本，就像这样:) window.Display()，而是以某种方式使用 glReadPixels()。

glReadPixels 将像素内容放入内存中的数组中（您可能已经知道），但是如何将其转换为帧，并将多个帧串在一起形成一个视频文件？视频文件的格式是什么，以便我可以播放？

我应该解释一下我为什么要这样做：很多物理模拟可能需要很长时间才能计算出足够的信息来显示一帧，所以最好让它运行一夜，第二天早上播放视频文件。您不会希望每 5 分钟返回一次以查看发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:14:40.273

`glutPostRedisplay`是 GLUT 的一部分，而不是特定于 OpenGL 的东西。

您通常使用 PBuffer 或使用隐藏窗口和帧缓冲区对象进行屏幕外渲染。

可以通过多种方式将图像转换为视频。例如，您可以使用FFmpeg[作为](http://www.ffmpeg.org)`image2pipe`输入格式并将原始图像数据写入 ffmpeg 进程标准输入。一个更简单的方案是将每一帧转储到一个单独的图像文件中。使用[libpng](http://www.libpng.org)很简单。然后，您可以将单个图像合并到一个视频中。

但是，在进行物理模拟时，您不应将最终渲染转储到文件中。相反，您应该存储模拟数据以供以后回放，因为您可以调整渲染参数而无需重新模拟所有内容。您将不得不对渲染器进行调整！

# python - 修复原生 Cygwin Vim Python 支持

> ID：14058943
> 
> 赞同：4
> 
> 时间：2012-12-27T17:50:52.160
> 
> 标签：python, vim, plugins, cygwin

在我的 Linux 机器上安装 Vim 的 python-mode 插件后，我在使用 Cygwin 的 Windows 机器上使用相同的 .vim 文件夹收到以下错误消息：

```
pymode.vim required vim compiled with +python. 
```

所以基本上我需要用 Python 支持自己编译 Vim，就像在[用 python 支持编译 vim](https://stackoverflow.com/questions/3373914/compiling-vim-with-python-support)的问题中解释的那样？

这会很烦人，有人知道替代方案吗？毕竟 Windows Vim 似乎支持 Python。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T18:48:49.620

恐怕，这是解决它的唯一方法。令人不快，但至少只需几行即可：

```
$ hg clone https://vim.googlecode.com/hg/ vim
$ cd vim/src
$ ./configure \
--enable-multibyte \
--without-x \
--enable-gui=no \
--enable-pythoninterp

$ make
$ make install
$ ln -sf /usr/local/bin/vim.exe /usr/bin/vim 
```

确保您已经预先安装`libncurses-devel`了 Cygwin。

# android - RPC:S-5:AEC-0 继续得到它，在做了所有建议做的事情之后

> ID：14058946
> 
> 赞同：1
> 
> 时间：2012-12-27T17:51:11.493
> 
> 标签：android

得到一个 senua 平板电脑并不断收到错误消息 RPC:S-5:AEC-0。一直在做建议的事情，它适用于 1 次下载，然后再次给我该消息。有人可以帮忙吗？？？

# sql-server - 选择无法转换的行

> ID：14058950
> 
> 赞同：3
> 
> 时间：2012-12-27T17:51:44.500
> 
> 标签：sql-server, tsql

在我的表的一列中存储了房屋地址的编号。

不幸的是，我以前的同事不喜欢思考，所以他们制作了类型列`varchar`并且没有阻止软件上的输入......所以现在我被一堆房屋/公寓数量为“NI”的行困住了、“Not Info”、“Unknown”等，而不是一个有意义的数字......

我只想选择不是数字的行......类似`select * from table where CAST(column as int)`抛出异常

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:56:16.137

Take a look at [IsNumeric, IsInt, IsNumber](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/isnumeric-isint-isnumber), you can't use just isnumeric it will return true for - signs and other stuff like that

For example, this returns 1

```
SELECT ISNUMERIC('2d5'),
       ISNUMERIC('+') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:54:41.300

```
select * from table where ISNumeric(column)=0 
```

but it may give false positives .....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:56:08.820

Try this:

```
SELECT * FROM table WHERE ISNUMERIC(column + 'e0') = 0 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T17:55:19.273

Create a function that that tries the cast and any other logic that you needs then return 0 if the value doesn't meet your requirements if it succeeds return 1\. then use the function in the where clause

# jquery - jQuery绑定悬停和点击功能

> ID：14058955
> 
> 赞同：1
> 
> 时间：2012-12-27T17:52:00.390
> 
> 标签：jquery, click, hover

我有一张带有单独编号设施的地图，上面标有一个点，当悬停或选择时会改变颜色。选择后，单独容器中的文本会根据选择的设施更改内容。

我还有一个关于地图下数字的图例。单击图例文本时，它也会更改容器的文本内容。单独单击点或图例可以很好地更改悬停和选定的点或图例文本的颜色。

现在我正在尝试结合悬停/单击点以触发关联的图例文本悬停/成为选中的效果，反之亦然。

这是我第一次尝试 jQuery，所以请理解！我只在这个地方呆了大约一天。尽可能多地阅读——这可能是一个简单的解决方案，但我没有看到它。我尝试制作一个结合点和图例文本的新变量，并通过共享设施名称将它们链接起来，但这没有用。我认为 on (bind) 命令会将操作链接在一起，但这也不起作用。任何建议将不胜感激。提前致谢！

代码

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<div class="map_container">
<a class="dot" style="left: 315px; top: 189px;" facility="bldg4" work="bldg4work"></a>
<a class="dot" style="left: 514px; top: 188px;" facility="bldg7" work="bldg7work"></a>
<div class="legend">
4\. <a class="legt" facility="bldg4" work="bldg4work">Primary Clarifiers - West</a><br />
7\. <a class="legt" facility="bldg7" work="bldg7work">Secondary Clarifiers</a><br />
</div>
</div>
<script>
$("a.dot, a.legt").on({click: function(){
$("a.dot").removeClass("selected");
$(this).addClass("selected");
$("a.legt").removeClass("selected");
$(this).addClass("selected");
var work = ".work_detail#" + $(this).attr("work");
var htmlCode = $(work).html();
$(".detail_container").fadeOut(500, function(){
$(".detail_container .work_detail").html(htmlCode);
$(".detail_container").fadeIn(500);
});
}
});
</script>
</body>
</html>

css
.map_container a.dot {
display: block;
height: 20px;
width: 20px;
background-image: url(../images/dots.png);
background-repeat: no-repeat;
background-position: 0px 0px;
cursor: pointer;
position: absolute;
}
.map_container a.dot:hover {
background-position: 0px -20px;
}
.map_container a.dot.selected {
background-position: 0px -40px;
}   
.map_container a.legt {
font-family: Arial, Helvetica, sans-serif;
font-size: 1em;
color: #F00;
font-weight: bold;
text-decoration: none;
}
.map_container a.legt:hover {
font-family: Arial, Helvetica, sans-serif;
font-size: 1em;
color: #FF0;
font-weight: bold;
background-color: #630;
text-decoration: none;
}
.map_container a.legt.selected {
font-family: Arial, Helvetica, sans-serif;
font-size: 1em;
font-weight: bold;
color: #0F0;
background-color: #630;
} 
```

我试过这个悬停 - 我知道语法可能不正确，但我接近了吗？

```
 $('a.dot[facility*]').hover(function(){
    $('a.legt[facility*]').toggleClass('a.legt.hover');
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:22:12.003

如果您需要同时更改两个元素的悬停状态，则需要删除伪类 :hover 并让 jQuery 为您处理。我把你的 :hover 变成了一个 .hover 类。然后在鼠标输入时，我将类应用于点和图例，然后鼠标离开，从两者中删除类。我用这个例子创建了一个小提琴（必须改变点上的背景颜色才能看到它的工作，你可以删除那部分）。此外，对于自定义属性，您需要使用注释中提到的 data- 属性。这是一个[jsFiddle 示例](http://jsfiddle.net/psyon001/PwWtW/)

**HTML**

```
<div class="map_container">
    <a class="dot" style="left: 315px; top: 189px;" data-facility="bldg4" data-work="bldg4work"></a>
    <a class="dot" style="left: 514px; top: 188px;" data-facility="bldg7" data-work="bldg7work"></a>
    <div class="legend">
        4\. <a class="legt" data-facility="bldg4" data-work="bldg4work">Primary Clarifiers - West</a><br />
        7\. <a class="legt" data-facility="bldg7" data-work="bldg7work">Secondary Clarifiers</a><br />
    </div>
</div>​ 
```

**jQuery**

```
$('a.dot, a.legt').on({
    mouseenter : function(){
        var facility = $(this).data('facility');
        $('a[data-facility='+facility+']').addClass("hover");
    },
    mouseleave : function(){
        var facility = $(this).data('facility');
        $('a[data-facility='+facility+']').removeClass("hover");
    },
    click: function() {
            var $this = $(this),
            facility = $this.data('facility'),
            work = $this.data('work'),
            htmlCode = $('.work_detail#'+work).html(),
            $detailContainer = $('.detail_container');

        $('a.dot, a.legt').removeClass('selected');
        $('a[data-facility='+facility+']').addClass("selected");

        $detailContainer.fadeOut(500, function() {
            $detailContainer.find(".work_detail").html(htmlCode).end().fadeIn(500);
        });
    }
});​ 
```

**CSS**

```
.map_container a.dot.hover {
    background-position: 0px -20px;
}
.map_container a.legt.hover {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #FF0;
    font-weight: bold;
    background-color: #630;
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:54:14.960

假设您需要 bldg 作为设施属性的起始值。您还必须将 href 添加到您的锚点，并为锚点标签添加文本。

**[现场演示](http://jsfiddle.net/cFKtz/)**

```
 $('a.dot[facility^=bldg]').hover(function(){
    $('a.legt[facility^=bldg]').toggleClass('a.legt.hover');
 }); 
```

# excel - 使用复制目标和选择性粘贴来保持格式

> ID：14058963
> 
> 赞同：1
> 
> 时间：2012-12-27T17:52:54.140
> 
> 标签：excel, vba

这是我需要在复制单元格时将格式保留在目标工作簿中的代码行。我不确定如何将“PasteSpecial Paste:=xlPasteValues”之类的内容合并到其中。

```
wbkOut.Worksheets(1).Range("E44:E2000").Copy Destination:=wbkVer.Worksheets("Metabuild").Range("A" & wbkVer.Worksheets("Metabuild").Range("A65536").End(xlUp).Row + 1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T18:56:43.673

本是对的。既然他没有告诉你怎么做，我会的。

```
wbkOut.Worksheets(1).Range("E44:E2000").Copy 

With wbkVer.Worksheets("Metabuild")
  .Range("A" & .Rows.Count).End(xlUp).Offset(1).PasteSpecial xlPasteValues
End With 
```

您可能想要添加的另一件事是检查以确保工作表底部有足够的行来处理复制范围的行数（如果您可能需要）。如果行数不够，代码将抛出错误。

为此，代码将如下所示：

```
Option Explicit

Dim rngCopy as Range, lngCopy as Long

Set rngCopy = wkbOut.Worksheets(1).Range("E44:E2000")
lngCopy = rngCopy.Rows
rngCopy.Copy

With wbkVer.Worksheets("Metabuild")

    Dim rngCheck as Range
    Set rngCheck = .Range(.Range("A" & .Rows.Count).End(xlup).Offset(1),.Range("A" & .Rows.Count)

    If rngCheck.Rows >= lngCopy Then

       .Range("A" & .Rows.Count).End(xluP).Offset(1).PasteSpecial xlPasteValues

    Else

       Msgbox "Not enough space!"

   End If

End With 
```

# python - 将 Google Calendar API v 3 与 Python 结合使用

> ID：14058964
> 
> 赞同：12
> 
> 时间：2012-12-27T17:52:54.343
> 
> 标签：python, google-api, google-calendar-api

有人可以给我一个关于如何让 Google Calendar API v3 与 Python 客户端一起工作的明确解释吗？具体来说，最初的 OAuth 阶段让我非常困惑。我需要做的就是访问我自己的日历，阅读它并对其进行更改。Google 提供了此代码来配置我的应用程序：

```
import gflags
import httplib2

from apiclient.discovery import build
from oauth2client.file import Storage
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.tools import run

FLAGS = gflags.FLAGS

# Set up a Flow object to be used if we need to authenticate. This
# sample uses OAuth 2.0, and we set up the OAuth2WebServerFlow with
# the information it needs to authenticate. Note that it is called
# the Web Server Flow, but it can also handle the flow for native
# applications
# The client_id and client_secret are copied from the API Access tab on
# the Google APIs Console
FLOW = OAuth2WebServerFlow(
    client_id='YOUR_CLIENT_ID',
    client_secret='YOUR_CLIENT_SECRET',
    scope='https://www.googleapis.com/auth/calendar',
    user_agent='YOUR_APPLICATION_NAME/YOUR_APPLICATION_VERSION')

# To disable the local server feature, uncomment the following line:
# FLAGS.auth_local_webserver = False

# If the Credentials don't exist or are invalid, run through the native client
# flow. The Storage object will ensure that if successful the good
# Credentials will get written back to a file.
storage = Storage('calendar.dat')
credentials = storage.get()
if credentials is None or credentials.invalid == True:
  credentials = run(FLOW, storage)

# Create an httplib2.Http object to handle our HTTP requests and authorize it
# with our good Credentials.
http = httplib2.Http()
http = credentials.authorize(http)

# Build a service object for interacting with the API. Visit
# the Google APIs Console
# to get a developerKey for your own application.
service = build(serviceName='calendar', version='v3', http=http,
       developerKey='YOUR_DEVELOPER_KEY') 
```

但是（a）这对我来说完全没有意义；评论解释很糟糕，而且（b）我不知道在变量中放什么。我已经在 Google 上注册了我的程序并注册了一个服务帐户密钥。但给我的只是一个要下载的加密密钥文件和一个客户端 ID。我不知道什么是“developerKey”，或者什么是“client_secret”？那是关键吗？如果是，我如何获得它，因为它实际上包含在加密文件中？最后，考虑到我使用 API 的相对简单的目标（即，它不是多用户、多访问操作），有没有更简单的方法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T06:23:32.100

一个简单的（阅读：我已经完成的方式）方法是创建一个 Web 应用程序而不是一个服务帐户。这可能听起来很奇怪，因为您不需要任何类型的 Web 应用程序，但我以与您相同的方式使用它 - 对我自己的日历/添加事件/等进行一些查询。- 全部来自命令行，无需任何类型的网络应用程序交互。有一些方法可以使用服务帐户来完成（如果你确实想走那条路线，我会修改），但到目前为止这对我有用。

创建 Web 应用程序后，您将获得上述所有信息（旁注：上面的示例代码基于 Web 应用程序 - 要使用您`FLOW`需要调用的服务帐户`flow_from_clientsecrets`并需要进行进一步调整 - 请参阅[在这里](https://developers.google.com/api-client-library/python/guide/aaa_oauth#flow_from_clientsecrets)）。因此，您将能够填写此部分：

```
FLOW = OAuth2WebServerFlow(
    client_id='YOUR_CLIENT_ID',
    client_secret='YOUR_CLIENT_SECRET',
    scope='https://www.googleapis.com/auth/calendar',
    user_agent='YOUR_APPLICATION_NAME/YOUR_APPLICATION_VERSION') 
```

您现在可以填写您在 API 控制台中看到的值（`client_id`= 整个`Client ID`字符串，`client_secret`= 客户端密码，`scope`是相同的，`user_agent`可以是您想要的任何值）。至于这一`service`行，`developerKey`您可以`Simple API Access`在 API 控制台的部分下找到 API 密钥（标签为`API key`）：

```
service = build(serviceName='calendar', version='v3', http=http, 
    developerKey='<your_API_key>') 
```

然后，您可以添加一个简单的检查，如下所示，看看它是否有效：

```
events = service.events().list(calendarId='<your_email_here>').execute()
print events 
```

现在，当您运行此程序时，将弹出一个浏览器窗口，允许您完成身份验证流程。这意味着所有身份验证都将由 Google 处理，并且身份验证响应信息将存储在`calendar.dat`. 该文件（将与您的脚本存储在同一目录中）将包含服务现在将使用的身份验证信息。这就是这里的情况：

```
storage = Storage('calendar.dat')
credentials = storage.get()
if credentials is None or credentials.invalid == True:
  credentials = run(FLOW, storage) 
```

它通过查找该文件并验证内容来检查是否存在有效凭据（这一切都从您那里抽象出来，以便于实现）。在您进行身份验证后，该`if`语句将进行评估`False`，您将能够访问您的数据而无需再次进行身份验证。

希望这对这个过程有更多的了解——长话短说，制作一个 Web 应用程序并使用其中的参数，验证一次然后忘记它。我敢肯定我忽略了很多要点，但希望它适用于您的情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-03T16:24:01.813

Google 现在有一个很好的示例应用程序，可以让您轻松启动并运行。它在他们的 [入门](https://developers.google.com/google-apps/calendar/get_started)页面上以“5 分钟体验 - 快速入门”的形式提供。

如果您在没有浏览器的远程服务器上工作，它将为您提供直接访问的 URL。

# javascript - 如何使用 insertAfter 方法和 fadeIn 效果插入 html，以便 html 只是淡入

> ID：14058965
> 
> 赞同：2
> 
> 时间：2012-12-27T17:52:58.547
> 
> 标签：javascript, jquery, html

我尝试插入一些 html，同时给它一个淡入淡出的效果。这就是我试图实现它的方式，但它失败了：

```
<html>
<head>
<title></title>
<script src="Jquery.js">
</script>
</head>
<body>
<style type="text/css">
.container{
    background-color: red;
}
</style>
<div class="container"><img src="001.jpg" alt="sasuke"></div>

<script type="text/javascript">
(function(){
$("<p>lorem Ipsum blah blah </p>").insertAfter("img").fadeIn(1500);

})();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T18:36:33.220

在将元素添加到 DOM 时创建隐藏的元素，然后将其淡入：

```
(function(){
  var paragraph = $("<p>");
  paragraph.text("lorem Ipsum blah blah");
  paragraph.hide();
  paragraph.insertAfter("img");
  paragraph.fadeIn(1500);
})(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T17:54:43.607

You probably have to hide it to be able to fade it in:

```
$(function(){
    $('<p />', {text: 'lorem Ipsum blah blah '}).hide().fadeIn(1500).insertAfter("img");
}); 
```

[**FIDDLE**](http://jsfiddle.net/adeneo/DfLZe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:57:19.657

Try this:

```
 (function(){
     $("<p style="display:none;">lorem Ipsum blah blah </p>").insertAfter("img").fadeIn(1500);
 })(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T22:29:55.970

尝试这个;

```
(function(){
   $("<p>Fade in text </p>").hide().fadeIn(1500).insertAfter("img");
})(); 
```

[小提琴](https://jsfiddle.net/skhj335g/)

# ios - UICollectionViewCell 子视图接收点击 insted

> ID：14058966
> 
> 赞同：1
> 
> 时间：2012-12-27T17:53:02.577
> 
> 标签：ios, uiview, uicollectionviewcell

我有一个 UICollectionViewCell，上面有我的一些内容，如图像、标签、视图。

我想获得这种行为（就像正常细胞的相反行为）：

*   默认情况下，这个单元格有一个视图（一个简单的 UIView，设置了一个 alpha 来显示一些不透明度），就像它没有被选中时一样。
*   当用户选择单元格时，必须删除此 alpha 视图。

如果我尝试安装 UITapRecognizer：

```
 // Create gesture recognizer
UITapGestureRecognizer *oneTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onShadowLayerPressed)];

// Set required taps and number of touches
[oneTap setNumberOfTapsRequired:1];
[oneTap setNumberOfTouchesRequired:1];

// Add the gesture to the view
[self.shadowView addGestureRecognizer:oneTap]; 
```

并在方法之后

```
 - (void)onShadowLayerPressed
{
    [super setSelected:YES];
    [self setSelected:YES];
} 
```

水龙头是从 self.shadowView 收到的，但它不会发送到单元格....

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:07:31.577

您正在使用`@property (nonatomic, getter=isSelected) BOOL selected`并根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewCell_class/Reference/Reference.html)，

> 您通常不直接设置此属性的值。以编程方式更改此属性的值不会更改单元格的外观。选择单元格并突出显示它的首选方法是使用集合视图对象的选择方法。

所以你应该使用：

`- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UICollectionViewScrollPosition)scrollPosition`

这是记录[在这里](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)。

# entity-framework - Entity Framework 可以使用多个结果集进行包含吗？

> ID：14058969
> 
> 赞同：1
> 
> 时间：2012-12-27T17:53:11.800
> 
> 标签：entity-framework

当我查询实体并向我的查询中添加许多包含时，数据是非规范化的。
许多行包含仅相差几列的数据，而其他列包含相同的数据。
在我开始使用 ORM 之前，我更喜欢编写几个查询并接收多个手动组装复杂对象的结果集。尽管最佳方法取决于架构、返回记录的数量和实体的复杂性。

我想知道 EF 是否支持实例化复杂实体的第二种方式以及如何打开此模式。

**更新**

为了更清楚，我会夸大一点。

假设我们有`A`由 10000 个简单属性组成的实体：字符串、整数、日期等。除了这些属性 entity 还包含一个非常大的实体集合`B`。

让我们考虑一下查询：

```
context.ASet.Include("CollectionOfB"); 
```

对于收集服务器中包含的每个项目 B，返回 A 的简单属性的许多副本。

如果没有 ORM，我会创建查询，但只询问根对象的 id。然后我查询根对象，然后查询引用根对象 ID 的依赖项。
然后我用字典和哈希集处理 MARS 以组装实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:52:15.003

如果`Root`实体集不是太大，您可以尝试显式加载（语法`DbContext`）：

```
var roots = context.Roots.Where(someCondition).ToList();
foreach (var root in roots)
    root.Children = context.Entry(root).Collection(r => r.Children)
        .Query().ToList(); 
```

这适用于任何类型的关系，包括多对多关系。有 1 + N 个查询，如果 N 太大，与急切加载相比，它可能会在性能方面适得其反。

`Root`如果和之间*的*关系`Child`不是多对多的，您可以利用*关系修复*，它是上下文 (或) 的一个功能，可确保在实体加载或附加到上下文时自动构建对象图：**`ObjectContext``DbContext`**

 **```
var roots = context.Roots.Where(someCondition).ToList();
var rootIds = roots.Select(r => r.Id);
context.Children.Where(c => rootIds.Contains(c.Root.Id)).Load(); 
```

（我假设这里`Child`有一个反向导航属性`Root`。）

无论加载了多少实体，这始终是*两个查询。*`Root`关系修复将`root.Children`自动为每个附加的集合填充集合，`root`以便结果看起来*就像*您使用了急切加载：

```
var roots = context.Roots.Include("Children").Where(someCondition).ToList(); 
```

不幸的是，如果集合很大，该`Contains`方法很慢： [https](https://stackoverflow.com/a/8108643/270591) ://stackoverflow.com/a/8108643/270591 。但是，当您使用急切加载时，它仍然可能比数据重复造成的性能损失要好到一定数量。`rootIds``rootIds`

更喜欢其中一种选择是一个测试问题。我无法给出一般建议来使用适合所有情况的一种或另一种选择。**

# c# - 字典 覆盖 Indexer 和 FindEntry

> ID：14058970
> 
> 赞同：1
> 
> 时间：2012-12-27T17:53:15.140
> 
> 标签：c#, dictionary, mono

为了优化我的代码，我正在尝试创建我自己`Indexer`和我自己的`FindEntry`函数版本 - 这样我就可以在`Dictionary`-like 类中执行以下操作：

```
object IDictionary.this[int key] {
    get {
        int num = this.FindEntry(key);
        if (num >= 0) {
            return this.entries[num].value;                 
        }

        return null;
    }

    set {
        Dictionary<TKey, TValue>.VerifyValueType(value);
        this [key] = (TValue)((object)value);
    }
}

private int FindEntry (int key) {
    if (this.buckets != null) {
        int num = key & 2147483647;
        for (int i = this.buckets[num % this.buckets.Length]; i >= 0; i = this.entries[i].next) {
            if (this.entries[i].hashCode == num && this.comparer.Equals(this.entries[i].key, key)) {
                return i;
            }
        }
    }
    return -1;
} 
```

这很有用，因为我的字典的键是一个结构 - 但有时我有哈希码而不是键。

我正在寻找*除了*重写`Dictionary<TKey, TValue>`之外的解决方案`System`- 但我怀疑这可能是唯一的方法，因为其中的变量`entries`是私有的。

下面是我的代码的一个基本示例，以帮助展示我想要完成的工作。

```
struct SuperKey : IEquatable<SuperKey> {
    public int Id;
    public int Environment;

    public override int GetHashCode() {
        return this.Id;
    }

    public override bool Equals(object other) {
        return other is SuperKey ? Equals((SuperKey)other) : false;
    }

    public bool Equals(SuperKey other) {
        return this.Id == other.Id && this.Environment == other.Environment;
    }
} 
```

和

```
class Example {
    Dictionary<SuperKey, Player> players;

    void MyFunction() {
        SuperKey sk = new SuperKey(36, 1);
        Player p1 = new Player();

        players.Add(sk, p1);
    }

    void ReceiveEventForPlayer(int id, PlayerEventName name) {
        ReceiveEventForPlayer(id, 0, name);
    }

    void ReceiveEventForPlayer(int id, int environment, PlayerEventName name) {
        Player p = players[new SuperKey(id, 1)];
    }

} 
```

在`ReceiveEventForPlayer`上面的方法中，请注意以下行：

> `Player p = players[new SuperKey(id, 1)];`

我更希望能够使用：

> `Player p = players[id];`

但这不起作用......实际上能够使用*任何一种*语法*都是最理想的。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:06:22.443

您对`Dictionary<TKey, TValue>`可能无效的实施做出了很多假设。例如：

*   您假设通过开放寻址解决冲突。它们可以很容易地通过重新散列或链接来解决。
*   您假设存储桶位置是通过将返回的哈希码除以存储桶数量来计算的。还有其他可能性。
*   即使这两个假设被证明是正确的，您也假设实现在未来不会改变并且使您之前的假设无效。

您还假设您可以访问基类的内部数据结构，这是不可能的。据我所知，类的受保护接口`buckets`中没有数组。`Dictionary`

从您发布的内容来看，如果您的假设正确，您似乎唯一可以节省的执行时间就是计算每个项目的哈希码所花费的时间。这很容易通过在创建项目时计算项目的哈希码（即在构造函数中）并缓存它来解决。那么，你的`GetHashCode`方法就是`return this.cachedHashCode;`

当然，这假设您放入字典中的项目是不可变的。或者，至少，任何用于确定相等性的字段都是不可变的。

最后，您确定这`Dictionary`是您程序性能的限制因素吗？如果没有，也许您的优化工作最好花在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:55:04.047

Jim 和 Jon 是正确的，我认为解决问题的方法很简单：

只需更改为`GetHashCode`将数据库编号、“-”和用户编号连接起来，然后在该字符串上调用基本 GetHashCode。

通过这种方式，您不必更改生产和调试中的实现。*

# connection - 使用 HTMLUnit 抓取网页时连接被拒绝

> ID：14058972
> 
> 赞同：3
> 
> 时间：2012-12-27T17:53:18.000
> 
> 标签：connection, web-scraping, htmlunit

我正在尝试构建一个 java 应用程序来使用 HTMLUnit 抓取网站。提取一些数据后，应用程序遇到以下异常 - java.lang.RuntimeException: org.apache.http.conn.HttpHostConnectException: Connection to siteURL denied。

如果我再次运行应用程序，它能够在失败之前再次提取一些数据并出现相同的异常。服务器可能会看到来自同一客户端 IP 的大量请求并拒绝连接请求。

此外，当应用程序遇到此问题时，我可以使用浏览器连接到该站点。

我该如何克服这个问题？在网络抓取应用程序中，如何处理和解决此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T19:05:46.753

这就是我调试此类问题的方式：

下载[提琴手](http://fiddler2.com/get-fiddler)

默认情况下，fiddler 侦听端口 8888，您所要做的就是将 webClient 配置为使用 fiddler 作为代理，然后可以在 fiddler 中查看（分析、修改和重新发送）所有正在发送的请求。

```
 client.getOptions().setProxyConfig(new ProxyConfig("127.0.0.1", 8888)); 
```

根据我之前的经验，目标站点会在一段时间后阻塞，您可以尝试添加暂停或轮换代理和用户代理。您也可以尝试清除 cookie。

# ruby-on-rails - 如何获取“rqrcode-rails3”的站点根 URL 和路由？

> ID：14058975
> 
> 赞同：2
> 
> 时间：2012-12-27T17:53:23.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试生成每个商店网址的二维码。

例如，我有 Shop 模型，并且每个模型都有名称。
我可以通过这个生成二维码

> @qr = RQRCode::QRCode.new( url, :size => 4, :level => :h )

我如何在这里定义“url”？

如何获取站点的 URL 和 controller_action_url 的组合？它应该是这样的

url = root.site_path + '/' + shop_url(params[:id])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:57:03.703

shop_url already gives the full url

# emacs - 如何使 Emacs 24 像 Sublime Text 2 一样渲染字体？

> ID：14058977
> 
> 赞同：5
> 
> 时间：2012-12-27T17:54:09.717
> 
> 标签：emacs, fonts, sublimetext2

下图显示了 Sublime Text 2（左）和 Emacs 24（右，从自制软件安装）在我的 Mac 上如何呈现文本的比较。它们都使用正常重量的 Monaco，但正如您所见，Emacs 以某种别名的方式呈现文本。当我在 Mac 上使用 Emacs 23 时，问题没有出现。我想知道是否有任何方法可以解决它。

![字体渲染](../Images/3dfbc192c2f7db9dda16881853297bf8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T04:39:51.873

[我改用为 Mac OS X](http://emacsformacosx.com/)编译的 Emacs 解决了这个问题，它可以很好地呈现文本。我在问题中提到的 Emacs 版本是从 git 存储库构建的，我想这是问题所在，因为它太先进了。

### 更新：

该错误似乎是在最新的 Emacs 版本中引入的，请参阅报告[#11484](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11484) [#12996](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=12996) [#13106](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=13106)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:44:22.973

只需升级到 Emacs 24.3，他们就修复了这个错误。

# javascript - 获取 http://localhost:3000/projects/assets/jquery.masonry.js 404（未找到）

> ID：14058978
> 
> 赞同：1
> 
> 时间：2012-12-27T17:54:13.967
> 
> 标签：javascript, ruby-on-rails-3.2, asset-pipeline

我试图在我的 Rails 应用程序中添加一个 javascript-plugin 砌体，并想知道为什么它只适用于我的欢迎控制器 (localhost:3000/) 而不适用于其他控制器，如 localhost:3000/projects/1，虽然我是使用完全相同的代码。

我收到此错误：

> 获取 localhost:3000/projects/assets/jquery.masonry.js 404（未找到）

和

> 未捕获的类型错误：对象 [对象对象] 没有方法“砌体”
> 
> （匿名函数）
> 
> e.resolveWith jquery.min.js
> 
> e.extend.ready jquery.min.js
> 
> c.addEventListener.z

我假设我收到错误是因为路径错误 localhost/projects/assets 而不是 localhost/assets，但我不知道如何解决这个问题。欢迎任何帮助！

这是视图中的代码：

```
<% content_for(:scripts) do %>
<script type="text/javascript">

  $(function(){
    $('.squarescontainer').masonry({
      // options
      itemSelector : '.item',
      isAnimated: true
    });
  });

</script>
<% end %> 
```

这是我的application.rb：

```
<!DOCTYPE html>
<html>
  <head>
    <title>ifub</title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow&v1">
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

    <script src = "assets/jquery.masonry.js"></script>
    <script src = "assets/jquery.masonry.min.js"></script>

    <%= yield(:head) %>

  </head>

  <body>
    <%= render 'layouts/logo' %>

    <p class="notice"><%= notice %></p>
      <p class="alert"><%= alert %></p>

    <div class="frame">
      <div class="container">
        <%= yield %>
        <%= yield :scripts %>
      </div>
    </div>

  </body>
</html> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:00:55.230

您正在使用相对于当前路径的 URL，因此如果您的页面是 `localhost:3000/project/page.html`，则 JS url 将是`localhost:3000/project/assets/...`. 尝试像这样更改您的代码：

```
<script src = "/assets/jquery.masonry.js"></script>
<script src = "/assets/jquery.masonry.min.js"></script> 
```

请参阅资产前添加的“/”。在这种情况下，浏览器将相对于站点根目录加载脚本。在这种情况下，即使您当前的页面是`localhost:3000/project/page.html`，JS URL 仍然是`localhost:3000/assets/...`

此外，您应该只连接一个版本的插件 - 最小化与否

# cordova - Phonegap clearing input on focus

> ID：14058984
> 
> 赞同：1
> 
> 时间：2012-12-27T17:54:38.407
> 
> 标签：cordova, input, focus

I have a phonegap application with a bunch of input boxes, somehow when a touch the "next" button in a field, the next field is cleared on focus (Supose it was previously filled with some text).

Does the focus event trigger any other event that I'm not aware of? Is this a common behavior? any suggestion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:25:41.193

我认为下面的代码可以解决您的问题。

```
$(document).bind("mobileinit", function() {
    $.mobile.page.prototype.options.domCache = true;
}); 
```

# python - Parsing a lisp file with Python

> ID：14058985
> 
> 赞同：8
> 
> 时间：2012-12-27T17:54:38.053
> 
> 标签：python, parsing

I have the following lisp file, which is from the [UCI machine learning database](http://archive.ics.uci.edu/ml/datasets/Bach+Chorales). I would like to convert it into a flat text file using python. A typical line looks like this:

```
(1 ((st 8) (pitch 67) (dur 4) (keysig 1) (timesig 12) (fermata 0))((st 12) (pitch 67) (dur 8) (keysig 1) (timesig 12) (fermata 0))) 
```

I would like to parse this into a text file like:

```
time pitch duration keysig timesig fermata
8    67    4        1      12      0
12   67    8        1      12      0 
```

Is there a python module to intelligently parse this? This is my first time seeing lisp.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-27T18:21:08.217

如[this answer](https://stackoverflow.com/a/14040960/989121)所示，[pyparsing](http://pyparsing.wikispaces.com/)似乎是正确的工具：

```
inputdata = '(1 ((st 8) (pitch 67) (dur 4) (keysig 1) (timesig 12) (fermata 0))((st 12) (pitch 67) (dur 8) (keysig 1) (timesig 12) (fermata 0)))'

from pyparsing import OneOrMore, nestedExpr

data = OneOrMore(nestedExpr()).parseString(inputdata)
print data

# [['1', [['st', '8'], ['pitch', '67'], ['dur', '4'], ['keysig', '1'], ['timesig', '12'], ['fermata', '0']], [['st', '12'], ['pitch', '67'], ['dur', '8'], ['keysig', '1'], ['timesig', '12'], ['fermata', '0']]]] 
```

为了完整起见，这是格式化结果的方法（使用[texttable](http://pypi.python.org/pypi/texttable)）：

```
from texttable import Texttable

tab = Texttable()
for row in data.asList()[0][1:]:
    row = dict(row)
    tab.header(row.keys())
    tab.add_row(row.values())
print tab.draw() 
```

```
+---------+--------+----+--------+-----+---------+
| 时代| 密钥签名 | 圣 | 间距 | 杜尔 | fermata |
+=========+========+====+=======+=====+=========+
| 12 | 1 | 8 | 67 | 4 | 0 |
+---------+--------+----+--------+-----+---------+
| 12 | 1 | 12 | 67 | 8 | 0 |
+---------+--------+----+--------+-----+---------+

```

将该数据转换回 lisp 表示法：

```
def lisp(x):
    return '(%s)' % ' '.join(lisp(y) for y in x) if isinstance(x, list) else x

d = lisp(d[0]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:15:16.987

如果您知道数据是正确的并且格式统一（乍一看似乎如此），并且如果您只需要这些数据并且不需要解决一般问题......那么为什么不只是替换每个非数字有一个空格，然后分裂？

```
import re
data = open("chorales.lisp").read().split("\n")
data = [re.sub("[^-0-9]+", " ", x) for x in data]
for L in data:
    L = map(int, L.split())
    i = 1  # first element is chorale number
    while i < len(L):
        st, pitch, dur, keysig, timesig, fermata = L[i:i+6]
        i += 6
        ... your processing goes here ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:24:31.643

用正则表达式将其分成对：

```
In [1]: import re

In [2]: txt = '(((st 8) (pitch 67) (dur 4) (keysig 1) (timesig 12) (fermata 0))((st 12) (pitch 67) (dur 8) (keysig 1) (timesig 12) (fermata 0)))'

In [3]: [p.split() for p in re.findall('\w+\s+\d+', txt)]
Out[3]: [['st', '8'], ['pitch', '67'], ['dur', '4'], ['keysig', '1'], ['timesig', '12'], ['fermata', '0'], ['st', '12'], ['pitch', '67'], ['dur', '8'], ['keysig', '1'], ['timesig', '12'], ['fermata', '0']] 
```

然后将其制成字典：

```
dct = {}
for p in data:
    if not p[0] in dct.keys():
        dct[p[0]] = [p[1]]
    else:
        dct[p[0]].append(p[1]) 
```

结果：

```
In [10]: dct
Out[10]: {'timesig': ['12', '12'], 'keysig': ['1', '1'], 'st': ['8', '12'], 'pitch': ['67', '67'], 'dur': ['4', '8'], 'fermata': ['0', '0']} 
```

印刷：

```
print 'time pitch duration keysig timesig fermata'
for t in range(len(dct['st'])):
    print dct['st'][t], dct['pitch'][t], dct['dur'][t], 
    print dct['keysig'][t], dct['timesig'][t], dct['fermata'][t] 
```

正确的格式留给读者练习……

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-19T02:39:39.163

由于数据已经在 Lisp 中，所以使用 lisp 本身：

```
(let ((input '(1 ((ST 8) (PITCH 67) (DUR 4) (KEYSIG 1) (TIMESIG 12) (FERMATA 0))
            ((ST 12) (PITCH 67) (DUR 8) (KEYSIG 1) (TIMESIG 12) (FERMATA 0)))))

       (let ((row-headers (mapcar 'car (second input)))
          (row-data (mapcar (lambda (row) (mapcar 'second row)) (cdr input))))

     (format t "~{~A~^ ~}~%" row-headers)
     (format t "~{~{~A~^ ~}~^ ~%~}" row-data))) 
```

# android - DialogFragment OnClickListener strange Cursor behavior

> ID：14058986
> 
> 赞同：0
> 
> 时间：2012-12-27T17:54:37.993
> 
> 标签：android, cursor, android-sqlite, android-dialogfragment

I am using the code below in a class extending DialogFragment. Before adding the buttons I move a cursor to a certain position (see setDataFromCursor()) The strange thing is, that the position has changed when trying to get the position again in the OnClickListener of the positive button. I added some Log output which proves that. Does anybody know why that happens?

Thanks for your help!

Edit: In the debugger it is visible too. I step forward a few steps and the cursor position changes without calling moveToPosition.

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Log.v(TAG, "onCreateDialog");
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        LayoutInflater inflater = getActivity().getLayoutInflater();
        view = inflater.inflate(R.layout.query_tab_dialog_add_operation,
                null);
        name = (TextView) view.findViewById(R.id.editTextOPName);
        cimclass = (TextView) view.findViewById(R.id.editTextCIMclass);
        setDataFromCursor();
        builder.setView(view)
                .setTitle(
                        R.string.querytabfragment_dialog_editOperation_title)
                .setPositiveButton(R.string.apply,
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {
                                nameStr = name.getText().toString();
                                cimclassStr = cimclass.getText().toString();

                                Log.d(TAG,
                                        "cursor position: "
                                                + cursor.getPosition());
                                int id = cursor.getInt(0);
                                Log.d(TAG, "cursor on item: " + id);
                                // update affected row
                                queryDBHelper.editCIMQuery(id, nameStr,
                                        cimclassStr);
                                Log.d(TAG, "query edited. id: " + id
                                        + " name: " + nameStr
                                        + " cimclass: " + cimclassStr);
                                cursor.requery();
                            }
                        })
                .setNegativeButton(R.string.cancel,
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {
                                EditOperationDialogFragment.this
                                        .getDialog().cancel();

                            }
                        });
        return builder.create();
    }

    private void setDataFromCursor() {
        cursor.moveToPosition(cursorPosition);
        name.setText(cursor.getString(1));
        cimclass.setText(cursor.getString(2));          
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:05:16.477

您发布的代码不会改变光标在其他任何地方的位置。

但是，如果`cursor`引用绑定到 ListView 的 CursorAdapter 中使用的相同 Cursor，则在绘制 Dialog 时，它可能会掩盖 ListView 的一部分，从而迫使 ListView 重绘。这肯定会改变立场。

**解决方案：**要么`moveToPosition()`在 OnClickListener 中再次使用，要么获取一个独立的 Cursor。

# node.js - Inheriting Node.js' eventemitter fails

> ID：14058990
> 
> 赞同：0
> 
> 时间：2012-12-27T17:54:56.097
> 
> 标签：node.js, eventemitter

I'm trying to add the event listener to my class, but it fails, telling me the object has no 'on' method.

Here's the class in its own file:

```
var events = require('events');
var util = require('util');

var Motion = function Motion (app) {

    events.EventEmitter.call(this);

    // Load models
    app.loadModel('motion', 'motion');

    this.on('testevent', function () {
        console.log('an event has happened');
    });

    this.emit('testevent');

}

util.inherits(Motion, events.EventEmitter);

module.exports = Motion; 
```

And here's how I instantiate it:

```
var Motion = require('./plugins/motion.js');
var motion = new Motion(app); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:18:05.910

看起来您可能要求构造函数本身成为事件发射器。您的代码`new`使用构造函数生成对象。即，在`motion`您的代码段末尾生成的对象应该有一个`on`方法（正如 Vadim Baryshev 所指出的，如果这是意图，您的代码应该按照您的意愿工作，如果是这种情况，您可以忽略此答案的其余部分） .

如果你真的希望构造函数发出事件，那么看看[这个问题](https://stackoverflow.com/questions/13264937/constructor-function-as-an-event-emitter)和我提供给它[的答案。](https://stackoverflow.com/a/13517585/1287690)但是，这不是一个很好的解决方案，而且如果不使用非标准的`__proto__`.

更好的解决方案是为构造函数创建一个单独的事件发射器对象以用于发射。尽管我很喜欢构造函数模块模式，但它必须被丢弃。许多节点模块使模块本身成为发射器，并具有由模块公开的函数作为构造函数。例如：

```
var events = require('events');
var util = require('util');

exports = module.exports = new events.EventEmitter();

exports.Motion = function (app) {
    // Load models
    app.loadModel('motion', 'motion');

    // Emit event
    exports.emit('testevent');
}; 
```

并实例化：

```
var motion = require('./plugins/motion');

motion.on('testevent', function () {
    console.log('an object was constructed');
});

var motionObj = new motion.Motion(app); 
```

# wcf - wcf rest service consumption in c# console application

> ID：14058992
> 
> 赞同：1
> 
> 时间：2012-12-27T17:55:06.957
> 
> 标签：wcf, wcf-rest

I made wcf rest service by going New->projects->WCF Service Application I am unable to use methods in console application while i have hosted wcf rest service and referenced wcf rest service in application My Application code is below :
**IRestServiceImpL**

```
 [ServiceContract]
        public interface IRestServiceImpL
        {
        [OperationContract]
        [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Xml, 
        RequestFormat = WebMessageFormat.Xml, UriTemplate = "XmlData/{id}")]
        string XmlData(string id);

        [OperationContract]
        [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, 
        RequestFormat = WebMessageFormat.Json, UriTemplate = "JsonData/{id}")]
        string JsonData(string id);
        } 
```

**RestServiceImpL.svc.cs**

```
[AspNetCompatibilityRequirements(RequirementsMode
= AspNetCompatibilityRequirementsMode.Allowed)]
    public class RestServiceImpL : IRestServiceImpL
    {
       public string XmlData(string id)
       {
            return "you requested for " + id;
        }

        public string JsonData(string id)
        {
            return "you requested for " + id;
        }
} 
```

Config File

```
 <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
    <system.serviceModel>
    <bindings>
        <webHttpBinding>
            <binding name="StreamedRequestWebBinding"
                     bypassProxyOnLocal="true"
                     useDefaultWebProxy="false"
                     hostNameComparisonMode="WeakWildcard"
                     sendTimeout="10:15:00"
                     openTimeout="10:15:00"
                     receiveTimeout="10:15:00"
                     maxReceivedMessageSize="2147483647"
                     maxBufferSize="2147483647"
                     maxBufferPoolSize="2147483647"
                     transferMode="StreamedRequest"
                     crossDomainScriptAccessEnabled="true"
             >
                <readerQuotas maxArrayLength="2147483647"
                              maxStringContentLength="2147483647" />
            </binding>
        </webHttpBinding>
    </bindings>
    <services>
        <service name="RestService.RestServiceImpL" behaviorConfiguration="ServiceBehaviour">
            <!--<endpoint address="" binding="basicHttpBinding"  contract="RestService.IRestServiceImpL"></endpoint>-->
            <endpoint address="" binding="webHttpBinding" name="StreamedRequestWebBinding" bindingConfiguration="StreamedRequestWebBinding"  contract="RestService.IRestServiceImpL" behaviorConfiguration="web"></endpoint>
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehaviour">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="web">
                <webHttp/>
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
</system.serviceModel>
<system.webServer>
    <httpProtocol>
        <customHeaders>
            <add name="Access-Control-Allow-Origin" value="*"/>
        </customHeaders>
    </httpProtocol>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

I host this service application in IIS

Now after giving reference to console application when i call its methods by using proxy class then i got error of Invalid Operation Contract Exception that endpoint not specified

calling code is below :

```
ServiceClient oServiceClient = new ServiceClient();<br/>
oServiceClient.JsonData("123"); 
```

Please suggest what is problem in the code.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:15:48.737

感谢堆栈溢出的支持...我做到了.. 调用 Wcf Rest Service 代码如下所示：

```
//code for xml Response consumption from WCF rest Service[Start]
WebRequest req = WebRequest.Create(@"http://RestService.com/WcfRestService/RestServiceImpL.svc/XmlData/sad");
req.Method = "GET";
req.ContentType = @"application/xml; charset=utf-8";
HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
if (resp.StatusCode == HttpStatusCode.OK)
{
    XmlDocument myXMLDocument = new XmlDocument();
    XmlReader myXMLReader = new XmlTextReader(resp.GetResponseStream());
    myXMLDocument.Load(myXMLReader);
    Console.WriteLine(myXMLDocument.InnerText);
}
//code for xml Response consumption from WCF rest Service[END]

//****************************************************************************
//code for json Response consumption from WCF rest Service[Start]
WebRequest req2 = WebRequest.Create(@"http://RestService.com/WcfRestService/RestServiceImpL.svc/JsonData/as");
req2.Method = "GET";
req2.ContentType = @"application/json; charset=utf-8";
HttpWebResponse response = (HttpWebResponse)req2.GetResponse();
string jsonResponse = string.Empty;
using (StreamReader sr = new StreamReader(response.GetResponseStream()))
{
    jsonResponse = sr.ReadToEnd();
    Console.WriteLine(jsonResponse);
}
//code for json Response consumption from WCF rest Service[END] 
```

# ajax - Mule 3.3.0 - ajax connector and jersey resource on same domain

> ID：14058997
> 
> 赞同：1
> 
> 时间：2012-12-27T17:55:30.170
> 
> 标签：ajax, http, post, jersey, mule

I setup a ajax server in mule that hosts a webpage:

```
<ajax:connector name="ajaxServer" serverUrl="http://0.0.0.0:8090/test" resourceBase="${app.home}/docroot"> 
```

On the webpage, I want to be able to upload a file using http post to a jersey resource I have setup:

```
<flow name="ModuleUploadFlow">
    <http:inbound-endpoint address="http://localhost:8090/test/jersey" connectorref="HttpConnector"/>
    <jersey:resources>
        ...
    </jersey:resources>
</flow> 
```

The problem is that the ajax server binds to the port specified so my inbound http endpoint needs to be on a different port (domain). Is there a way to do the POST to a service on a different domain? I tried setting up an http proxy but I get the same port bound error. Any suggestions would help. Thanks.