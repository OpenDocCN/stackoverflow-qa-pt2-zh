# StackOverflow 问答 15144000-15144999

# html - 1 个表格中的 2 个 HTML 表单

> ID：15144004
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:00.553
> 
> 标签：html, forms, html-table

我有一个通过循环遍历结果集并创建行来动态生成的表。对于每一行，我需要包含 2 个复选框。每行的复选框A需要对应表格A，复选框B对应表格B。

我知道这是无效的，但下面的伪代码基本上是我想要的。我知道在 HTML5 中我可以指定输入元素属于哪个表单，但我的用户将主要使用 IE8，据我所知，它不支持此功能。

```
<form name="formA">
<form name="formB">
<table>
 <tr>
  <th>
  <th>
  <th>
 </tr>

LOOP

 <tr>
  <td><input type="checkbox" name="chkA" value="1"></td>
  <td>Something</td>
  <td><input type="checkbox" name="chkB" value="1"></td>
 </tr>

END LOOP

</table>

<input type="submit" /> //formA
<input type="submit" /> //formB
</form> //formA
</form> //formB 
```

关于我如何做到这一点的任何想法？我想一种方法是使用单个表单并根据单击的提交按钮更改操作，但我想在我这样做之前看看其他人是否有任何想法。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:45:05.010

可能最好的方法是把它全部放在一种形式中，然后根据选择的选项采取不同的行动。

例如

```
<form action="doStuff.php" method="post">
  <table>
    <tr>
      <th></th>
      <th></th>
    </tr>

<!-- LOOP -->
    <tr>
      <td><input type="checkbox" name="chkA" value="1"></td>
      <td><input type="checkbox" name="chkB" value="1"></td>
    </tr>

<!-- END LOOP -->
  </table>

  <div>
    <input type="submit" name="submit" />
  </div>
</form> 
```

**doStuff.php**

```
if (isset( $_POST["chkA"] ) ){

  // Checkbox A is checked.

}

if (isset( $_POST["chkB"] ) ){

  // Checkbox B is checked.

} 
```

# python - 在 Python 中使用“in”测试另一个子列表的一部分

> ID：15144009
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:13.993
> 
> 标签：python, nested-lists

这里的新手试图在另一个子列表中搜索一个子列表的一部分。

```
list_1 = [[1, 2, 9], [4, 5, 8]]
list_2 = [[1, 2, 3], [4, 5, 6], [1, 2, 5]]

for item in list_1:
    for otherItem in list_2:
        item[0:2] in otherItem[0:2] 
```

我希望这会回来

```
True
False
True
False
True
False 
```

但相反，我每次迭代都会出错。简而言之：

```
list_1[0][0:2] == list_2[0][0:2] #this returns true
list_1[0][0:2] in list_2[0][0:2] #this returns false 
```

我想我不明白它是如何`in`工作的。有人可以在这里教我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T19:29:29.517

`in`查看一个子列表是否是另一个列表的*元素*（不是子列表）：

```
[1,2] in [[1,2],[3,4]] 
```

将是`True`。

```
[1,2] in [1,2,3] 
```

会是`False`这样：

```
[1,2] in [1,2] 
```

然而：

```
[1,2] == [1,2] 
```

将是`True`。根据您实际尝试执行的操作，`set`对象可能很有用。

```
a = [1,2]
b = [1,2,3]
c = [3,2,1]
d = [1,1,1]
e = set(a)
len(e.intersection(b)) == len(a)  #True
len(e.intersection(c)) == len(a)  #True -- Order of elements does not matter
len(e.intersection(d)) == len(a)  #False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:35:21.457

鉴于您的示例列表：

```
list_1 = [[1, 2, 9], [4, 5, 8]]
list_2 = [[1, 2, 3], [4, 5, 6], [1, 2, 5]] 
```

这有效：

```
print [this[0:2]==that[0:2] for this in list_1 for that in list_2]
[True, False, True, False, True, False] 
```

或者，使用一组：

```
print [this for this in list_1 for that in list_2 if set(this[0:2])<set(that)]
[[1, 2, 9], [1, 2, 9], [4, 5, 8]] 
```

请注意，集合是无序的，因此：

```
>>> set([1,2])==set([2,1])
True 
```

的典型用法`in`是字符串：

```
>>> 'ab' in 'cbcbab'
True 
```

或序列中的单个元素：

```
>>> 100 in range(1000)
True 
```

或序列中的一个原子元素：

```
>>> (3,3,3) in zip(*[range(10)]*3)
True 
```

但是重叠列表元素不起作用：

```
>>> [1,2] in [0,1,2,3]
False 
```

除非元素的原子大小相同：

```
>>> [1,2] in [0,[1,2],3]
True 
```

但是您可以使用字符串来比较列表 a 是否在列表 b 中，如下所示：

```
>>> def stringy(li): return ''.join(map(str,li))
...
>>> stringy([1,2,9][0:2])
'12'
>>> stringy([1,2,9][0:2]) in stringy([1,2,5])
True 
```

因此，您的初衷可能是检查是否`item[0:2]`出现在`otherItem`循环中的任何地方，但按“项目”的顺序。您可以使用这样的字符串：

```
>>> print [this for this in list_1 for that in list_2 if stringy(this[0:2]) in stringy(that)]
[[1, 2, 9], [1, 2, 9], [4, 5, 8]] 
```

这与 set 版本不同`'12'!='21'`，`'12' not in '21'` 因此如果您更改了 list_2 的元素顺序：

```
list_1 = [[1, 2, 9], [4, 5, 8]]
list_2 = [[1, 2, 3], [4, 5, 6], [1, 5, 2]]

print [this for this in list_1 for that in list_2 if set(this[0:2])<set(that)]
[[1, 2, 9], [1, 2, 9], [4, 5, 8]]   # same answer since sets are unordered
print [this for this in list_1 for that in list_2 if stringy(this[0:2]) in stringy(that)]
[[1, 2, 9], [4, 5, 8]]              # different answer... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T19:32:39.490

```
print set([1,2]).intersection([1,2,3])==set([1,2]) 
```

将会`True`

使用设置交集我认为你可以得到你想要的

需要注意的是，集合是无序集合的唯一元素

因此`set([1,1,2]) == set([1,2])` ，这可能不一定适用于所有情况

# postgresql - Postgres - 将 bytea PNG 列转换为 GeoTiff

> ID：15144010
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:16.773
> 
> 标签：postgresql, postgis, gdal, geotiff, bytea

我已将大量图块加载到 postgres 数据库中，以在图块服务器中使用。这些都以 PNG 格式加载到 bytea 列中。

我现在发现瓦片服务器代码需要这些是 GEOTiff 格式。

命令：-

gdal_translate -of GTiff -expand rgb -co COMPRESS=DEFLATE -co ZLEVEL=6

完美运行。

但是，大量数据已经加载到远程服务器上。那么我可以在数据库中进行转换，而不是检索每个文件并单独对它们使用 gdal_translate 吗？我知道 gdal 通过安装在我的服务器上的光栅支持与 postgis 2.0 集成。

如果没有，关于如何有效地做到这一点的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:46:34.380

是否可以使用适当的程序语言在数据库中进行操作？我想。另外值得注意的是，gdal 对 Postgis 的支持是一种方式。

老实说，这种方法很可能是“像您正在做的那样使用外部图像处理检索个人记录、转换、恢复”。您可能会获得一些交易收益，但这可能会被锁定所抵消。

如果你打算走这条路，你可能会发现 pl/java 是最有用的方法，因为你可以加载 Java 支持的任何图像处理库并使用它。

但是，我不相信这会比检索/转换/加载更好。

# ios - AVFoundation 不播放声音

> ID：15144014
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:31.053
> 
> 标签：ios, xcode, audio, avfoundation, audiotoolbox

我一直使用音频工具箱播放我的声音，但用户说没有声音，这是因为当您处于静音状态时它不会播放。我已经尝试过很多次换成 av 基础，但它对我来说从来没有用过。这是我现在尝试使用的代码：

```
- (IBAction)soundbutton:(id)sender {
NSString *path = [[NSBundle mainBundle] pathForResource:@"EASPORTS" ofType:@"mp3"];
AVAudioPlayer * theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

[theAudio play];} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:34:03.027

原因可能是在 ARC 中，您的音频播放器是由 ARC 发布的，因此您需要对 进行强引用`AVAudioPlayer`，您可以通过设置`AVAudioPlayer`as 类级别属性来做到这一点。这是你的做法，在你的 `.h`文件中是这样的

```
@property (strong, nonatomic) AVAudioPlayer *theAudio; 
```

并在`.m`文件中像这样合成它

```
@synthesize theAudio; 
```

最后你的代码看起来像这样

```
- (IBAction)soundbutton:(id)sender {
    NSString *path = [[NSBundle mainBundle] pathForResource:@"EASPORTS" ofType:@"mp3"];
    self.theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:nil];
[self.theAudio play];
} 
```

还要检查您的委托方法是否有响应

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag;
- (void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error; 
```

# javascript - 将 ds.js 散点图绑定到 JSON 数据

> ID：15144016
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:38.793
> 
> 标签：javascript, json, d3.js, nvd3.js

ds.js中是否可以通过绑定JSON数据创建散点图？ds 网站上的示例使用我可以创建的 TSV 文件和 CSV 文件，但更愿意绑定到从服务器作为对象列表返回的数据。我已经看到了绑定到 JSON 格式数据的其他 d3 控件的示例，但我无法弄清楚如何将该功能转移到散点图上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:00:50.377

因此，要快速修改 bl.ocks.org/mbostock/3887118 上的示例

在 index.html 文件中，注释掉或删除：

```
d3.tsv("data.tsv", function(error, data) {
    data.forEach(function(d) {
    d.sepalLength = +d.sepalLength;
    d.sepalWidth = +d.sepalWidth;
  }); 
```

以及结论

```
}); 
```

在文件的最后。

在 d3.tsv 调用之前添加：

```
data = [
    { sepalLength:4.4, sepalWidth:3.5, petalLength:1.4, species: "setosa"},
    { sepalLength:4.9, sepalWidth:3.0, petalLength:1.3, species: "setosa"},
    { sepalLength:4.5, sepalWidth:3.0, petalLength:1.7, species: "setosa"},
    { sepalLength:4.2, sepalWidth:3.1, petalLength:1.5, species: "virginica"},
 ]; 
```

完毕。

现在，您可能希望从服务器获取数据，因此您只需使用[d3 json](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)调用，而不是静态数据或 d3.tsv 调用。

# windows - 使用 WCF 应用程序的 Windows 2008 R2 慢速网络数据传输

> ID：15144019
> 
> 赞同：0
> 
> 时间：2013-02-28T19:28:43.037
> 
> 标签：windows, wcf, iis-7, windows-server-2008-r2

我们在 Windows 2008R2 下的 IIS 7 上运行 WCF 服务。我们需要将文件从本地机器传输到另一台机器的网络共享路径。我们在 .NET 中使用普通的 Copy/Move api 进行文件复制/移动。它工作正常，但传输太慢。我们的开发机器速度非常快。

我们检查其他应用程序，如 SVN，也太慢了。似乎 TCP 传输很慢。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:08:17.270

终于找到了答案。

我们执行了以下命令并且工作正常

(a) netsh interface tcp set global chimney=disabled

(b) netsh interface tcp set global rss=disabled

(c) netsh interface tcp set global autotuning=disabled

附加链接：

[http://www.novell.com/support/kb/doc.php?id=7002232](http://www.novell.com/support/kb/doc.php?id=7002232)

[http://support.microsoft.com/kb/2675785](http://support.microsoft.com/kb/2675785)

# java - HSQLDB 和 log4j

> ID：15144021
> 
> 赞同：1
> 
> 时间：2013-02-28T19:28:47.753
> 
> 标签：java, log4j, hsqldb

我正在使用嵌入式类型的 hsqldb，并且我想将 log4j 用于所有日志输出。所有其他类都正确使用我的 log4j 配置。但是出于某种原因，hsqldb 仍然在控制台上输出！

```
<logger name="org.hsqldb">
    <level value="FATAL" />
</logger>

<root>
    <priority value="error" />
    <appender-ref ref="R" />
</root> 
```

![在此处输入图像描述](../Images/b86777c1e1adba009241d6c7c43eb87d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:49:22.530

这就是我最终要做的......

```
 server = new Server();
        if (log.isTraceEnabled()) {
            server.setSilent(false);
            server.setTrace(true);
        } else {
            server.setLogWriter(null);
            server.setSilent(true);
            server.setTrace(false);
        } 
```

# php - 将内爆字符串作为几个参数传递

> ID：15144024
> 
> 赞同：0
> 
> 时间：2013-02-28T19:29:00.280
> 
> 标签：php

我想做这样的事情：

`call_user_func(array('Class', 'Method'), implode(", ", $array));`

可能吗？内爆字符串包含几个表达式。然而，在这种形状中，如果 $array 包含 2 个元素，我会收到一个错误，即 Class::method() 需要 2 个参数，而不是 1 个。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:34:32.813

你想要[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)。

```
call_user_func_array(array('Class', 'Method'), $array); 
```

# ios - 在 iOS 中可以使用指针在视图之间传递数据吗？

> ID：15144025
> 
> 赞同：0
> 
> 时间：2013-02-28T19:29:07.170
> 
> 标签：ios, parameter-passing

我的问题更多的是“可以吗”而不是“如何做到这一点”。我有一个基于 navigationViewController 的简单应用程序。我有一个 viewControllerA 正在将另一个 viewControllerB 推入堆栈。我所做的是 - 在 vi​​ewControllerB 中我有一个 viewControllerA 类型的指针，所以当我将它推入堆栈时，我会说这样的话：

```
-(void)buttonPressed{
  ViewControllerB * nextView = [ViewControllerB alloc] init];
  nextView.lastView = self;
  [self.navigationViewController pushViewController:nextView animated:YES]; 
} 
```

然后，在新的 viewControler 中，我为第一个 viewControler 中的字段赋值：

```
lastView.dataString = @"ABC"; 
```

因此，当 viewControllerA 关闭时，我更改了 viewControllerA 中字段的值。

我的问题是：这样好吗？如果不是，你能告诉我为什么这不是一个好主意吗？我正在使用 NSString 值。

多谢你们 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:36:58.427

确保 ViewControllerB 没有保留它的`lastview`属性，否则这将是一个保留周期，两个视图控制器将永远不会被释放。将信息从子视图控制器传递给父视图的正确方法是使用协议。有很多类似的问题，例如参见[https://stackoverflow.com/a/9736559/568529](https://stackoverflow.com/a/9736559/568529)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:56:19.120

从技术上讲，这没问题，它会起作用。如前所述，确保您只持有对前一个视图控制器的弱引用，否则会导致保留周期。

然而，就可重用性和功能隔离而言，这并不是真正干净的。

您可以使用的其他三种方法：

*   代表团
*   键值观察
*   NS通知

# jquery - jQuery Sortable在更新时不输出可排序列表的顺序

> ID：15144027
> 
> 赞同：0
> 
> 时间：2013-02-28T19:29:11.507
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我真的不知道为什么这不起作用，这应该是一个简单的直接任务。

我有以下代码用于创建可排序列表。该列表有效并且是可排序的，但是它不会向用户提醒订单。

```
<html>
<!DOCTYPE html>
<head>
    <link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    <script type="text/javascript" href="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script src='js/jquery.sortable.js'></script>
    <script language="javascript" type="text/javascript">

        $(function() {
            $("#projectItems").sortable({
                update: function (event, ui) {

                    var order = $(this).sortable('toArray').toString();
                    alert(order);
                }
            });

        });

    </script>
</head>

<body>

    <div id="projectItems">
        <div id="item1">(1)</div>
        <div id="item2">(2)</div>
        <div id="item3">(3)</div>
        <div id="item4">(4)</div>
        <div id="item5">(5)</div>
    </div>

</body>

</html> 
```

我在这个小提琴链接中使用相同的代码，它似乎工作正常？[http://jsfiddle.net/FUXys/1/](http://jsfiddle.net/FUXys/1/)

在错误控制台中也没有发现错误。

当它在小提琴中的工作方式完全相同时，为什么这不会提醒订单？

任何建议或帮助将不胜感激。

**更新**

这是我的 jquery.sortable.js 中的代码：

```
/** HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */
(function($) {
var dragging, placeholders = $();
$.fn.sortable = function(options) {
    var method = String(options);
    options = $.extend({
        connectWith: false
    }, options);
    return this.each(function() {
        if (/^enable|disable|destroy$/.test(method)) {
           var items =  $(this).children($(this).data('items')).attr('draggable', method == 'enable');
        if (method == 'destroy') {
            items.add(this).removeData('connectWith items')
                .off('dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s');
        }
        return;
    }
    var isHandle, index, items = $(this).children(options.items);
    var placeholder = $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class="sortable-placeholder">');
    items.find(options.handle).mousedown(function() {
        isHandle = true;
    }).mouseup(function() {
        isHandle = false;
    });
    $(this).data('items', options.items)
    placeholders = placeholders.add(placeholder);
    if (options.connectWith) {
        $(options.connectWith).add(this).data('connectWith', options.connectWith);
    }
    items.attr('draggable', 'true').on('dragstart.h5s', function(e) {
        if (options.handle && !isHandle) {
            return false;
        }
        isHandle = false;
        var dt = e.originalEvent.dataTransfer;
        dt.effectAllowed = 'move';
        dt.setData('Text', 'dummy');
        index = (dragging = $(this)).addClass('sortable-dragging').index();
    }).on('dragend.h5s', function() {
        dragging.removeClass('sortable-dragging').show();
        placeholders.detach();
        if (index != dragging.index()) {
            items.parent().trigger('sortupdate', {item: dragging});
        }
        dragging = null;
    }).not('a[href], img').on('selectstart.h5s', function() {
        this.dragDrop && this.dragDrop();
        return false;
    }).end().add([this, placeholder]).on('dragover.h5s dragenter.h5s drop.h5s', function(e) {
        if (!items.is(dragging) && options.connectWith !== $(dragging).parent().data('connectWith')) {
            return true;
        }
        if (e.type == 'drop') {
            e.stopPropagation();
            placeholders.filter(':visible').after(dragging);
            return false;
        }
        e.preventDefault();
        e.originalEvent.dataTransfer.dropEffect = 'move';
        if (items.is(this)) {
            if (options.forcePlaceholderSize) {
                placeholder.height(dragging.outerHeight());
            }
            dragging.hide();
            $(this)[placeholder.index() < $(this).index() ? 'after' : 'before'](placeholder);
            placeholders.not(placeholder).detach();
        } else if (!placeholders.is(this) && !$(this).children(options.items).length) {
            placeholders.detach();
            $(this).append(placeholder);
        }
        return false;
    });
});
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:20:56.083

你有机会使用这个插件吗？[https://github.com/johnny/jquery-sortable](https://github.com/johnny/jquery-sortable)

此插件不支持“**更新**”参数。相反，你必须做类似的事情

```
$("#projectItems").sortable({
    onDrop: function  (item, container, _super) {
      _super(item)
      console.log(container.items) // already an array
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:44:16.993

使用[`stop( event, ui )`](http://api.jqueryui.com/sortable/#event-stop)而不是[`update( event, ui )`](http://api.jqueryui.com/sortable/#event-update).

```
$("#projectItems").sortable({
    stop: function (event, ui) {
        var order = $("#projectItems").sortable('toArray').toString();
        console.log(order);
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/FUXys/2/](http://jsfiddle.net/dirtyd77/FUXys/2/)

* * *

旁注：确保使用[`console.log()`](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)而不是`alert()`. 你会感谢我的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:53:23.297

我解决了它，原来它与 jquery.sortable.js 文件有关。[我从http://jqueryui.com/download/](http://jqueryui.com/download/)下载了一个不同的版本，它现在工作正常。

我现在可以将订单输出为警报或控制台日志。

感谢 Dom 和 P.Kelly 为我指明了正确的方向。

# android - 带有圆角的Android AlertDialog：角下方看到的矩形

> ID：15144033
> 
> 赞同：6
> 
> 时间：2013-02-28T19:29:39.703
> 
> 标签：android, android-alertdialog, custom-view

我想要一个`Dialog`带圆角的，但是当`Dialog`看到它时，它下面有一个矩形，它在角落下面可以看到，如下所示：

![在此处输入图像描述](../Images/c396fcab977fc45b9f1baa46a6c0758e.png)

我`dialog`使用自定义构建`DialogFragment`：

```
public class MyDialogFragment extends DialogFragment{
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.playdialog, null));
    return builder.create();
}
} 
```

对话框布局（playdialog）具有以下可绘制作为背景：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >

    <solid
        android:color="#AAAAAAAA" />

    <stroke
        android:width="2dp"
        android:color="#FF000000" />

    <corners android:radius="20dp" />
</shape> 
```

正如我所说，我将此可绘制对象设置为背景：

```
android:background="@drawable/dialog_background" 
```

我不想看到那个矩形。我该怎么做？？

在[这篇](https://stackoverflow.com/questions/7396529/android-rounded-rectangle-without-background-straight-edge-rectangle)文章中，用户遇到了同样的问题。我尝试使用对他有用的解决方案，但对我不起作用。我`DialogFragment`像这样修改了我的：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.playdialog, null));
    Dialog d = builder.create();
    d.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));

    return d;
} 
```

结果是完全一样的。如何删除该矩形？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-23T05:59:01.663

当我遇到同样的问题时我很震惊，解决方案也有点奇怪。创建您自己的自定义可绘制对象，例如见下文。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="@color/text_highlight" />

    <stroke
        android:width="5dp"
        android:color="@color/text_highlight" />

    <corners android:radius="12dp" />

    <stroke
        android:width="1dp"
        android:color="@android:color/transparent" />

</shape> 
```

将以下行添加到您的对话框中：

```
 dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

 // This is line that does all the magic
 dialog.getWindow().setBackgroundDrawableResource(                             
 R.drawable.dialog_rounded); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-25T09:56:06.687

尝试将您的样式设置`DialogFragment`为`Theme_Translucent.`

```
setStyle(STYLE_NO_FRAME, android.R.style.Theme_Translucent); 
```

这个对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T15:58:43.757

添加
`getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));`

到`onCreateView()`你的 MyDialogFragment 的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-28T06:55:18.560

我在代码中为对话框设置了透明背景。尝试这个：

```
@Override
public void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0x00ffffff));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T05:32:55.340

尝试这个：

```
customDialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

# ajax - jQUery ajax 调用返回一个 html 错误

> ID：15144034
> 
> 赞同：0
> 
> 时间：2013-02-28T19:29:53.470
> 
> 标签：ajax, jquery

嗨，我刚刚学习使用 jquery 和 ajax。并且尝试执行基本的 jquery 调用并检索 ok。但似乎我什么也没得到。

这是我的html：

```
<a href="#" class="addToCart" id="'.$idProduct.'" name="cart">Add to Cart</a> 
```

这是我的jQuery代码：

```
$('.addToCart').on('click', function(){
        var itemId = $(this).attr("id");
        $.ajax({
            url: 'cart.php',
            type: 'POST',
            data: itemId,
            dataType:'html',
            success: function(result){
                alert(result + " ceva ");
            },
            error : function(data){
                alert(data);
            }
        });
    }); 
```

这是我的 php 代码：

```
echo $_POST['cart']; 
```

当我尝试在成功警报中运行它时，我得到了这个：

![在此处输入图像描述](../Images/0b8960705235f70be6d499ff9536d5f5.png)

如何使这个 ajax 调用正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:34:08.663

您必须以键/值对的形式发送您的帖子数据，尝试

```
 $.ajax({
        url: 'cart.php',
        type: 'POST',
        data: {cart:itemId},//key -> cart, value -> itemId
        dataType:'html',
        success: function(result){
            alert(result + " ceva ");
        },
        error : function(data){
            alert(data);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:35:02.670

在我看来，您的 PHP 代码中有错误。返回的 HTML 包含一些文本，上面写着“注意：未定义的索引”等。

AJAX 调用成功 - 所以您会看到警报消息。

# c - 如何在c中的链表内创建链表

> ID：15144035
> 
> 赞同：1
> 
> 时间：2013-02-28T19:29:57.923
> 
> 标签：c, linked-list, structure

我想创建一个主列表，每个主列表元素都有另一个列表。

这就是我所做的

```
 typedef struct smallList
    {   char data;
        struct smallList *next;  

     } small;

    typedef struct bigList
    {
        int count;
        char data;
        struct bigList *next;
        struct smallList *head;
     } big; 
```

但是我如何访问大列表中的小列表数据并将内容添加到小列表中。非常感谢任何帮助。谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:34:53.607

所以，如果我们假设这个结构已经被填充，我们可以这样做：

```
struct smallList *smallElem = NULL;
struct bigList *bigElem = NULL;

for (bigElem = your_big_list(); bigElem != NULL; bigElem = bigElem->next) {
    // Do something with bigElem.

    for (smallElem = bigElem->head; smallElem != NULL; smallElem = smallElem->next) {
        // Do something with the smallElem.
        // Note that we can still reference bigElem here as well.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:35:07.740

如果`p`指向一个 bigList：

*   `bigList -> head`是 bigList 指向的小列表。
*   `(bigList -> head).data`是 smallList 包含的字符。
*   `(bigList -> next -> head)`是 bigList 中的第二个 smallList。
*   `(bigList > head -> next)`是 bigList 的第一个 smallList 中的第二个元素。

在获得指向要修改的结构的指针后，其他一切都相同。

# asp.net-mvc - MVC3 Html.DropDownListFor 和 html.EditorFor 用于同一字段

> ID：15144039
> 
> 赞同：1
> 
> 时间：2013-02-28T19:30:14.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我对 MVC 相当陌生，但对 ASP.Net 有一些不错的经验。

我试图调查我的下拉列表中可能有一个自定义选项。下面是我的下拉列表和我的编辑器。显然，在提交页面时，选择的值和输入的数据都不会被存储。我正在查看是否允许在下拉列表中使用“自定义”选项，是否可以存储在编辑器中输入的值而不是下拉列表选择？除非选择是下拉列表的自定义值，否则甚至可能不显示编辑器。

```
 @Html.DropDownListFor(model => model.Url, Model.individualPages)
     @Html.EditorFor(model => model.Url) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:12:35.423

您可以通过为具有不同 id 的不同选择生成选项并为`Url`属性呈现隐藏字段来实现。尝试以下：

```
<select id="url-list">
      @foreach(var item in Model.individualPages)
       {
           <option value="@Model.Url">
              @Model.Url
           </option>
       }
        <option > custom... </option>
</select>

<input type="text" id="custom-url"/>

@Html.HiddenFor(e=>e.Url)

<script>
   $(document).ready(function(){
        $("select#url-list").change(function(){
              var selectedItem =$("option:selected",$(this)),
                    selectedValue = selectedItem.val();

              $("#url").val(selectedValue);
        });
        $("form").submit(function(){
              var selectedItem = $("option:selected",$("select#url-list")),
                    selectedIndex = selectedItem.index(),
                      itemCount = $("option",$("select#url-list")).length;
                if (selectedIndex == itemCount -1)
                     $("#url").val($("#custom-url").val());
        });
   });
</script> 
```

# openssl - 使用 OpenSSL 将 PKCS#12 证书转换为 PEM

> ID：15144046
> 
> 赞同：279
> 
> 时间：2013-02-28T19:30:21.730
> 
> 标签：openssl, command, pkcs#12

我在 Windows 7 上有 OpenSSL x64，它是从[Google Code 上的 openssl-for-windows](https://code.google.com/p/openssl-for-windows/downloads/detail?name=openssl-0.9.8k_X64.zip)下载的。我正在尝试运行：

```
openssl pkcs12 -export -in "path.p12" -out "newfile.pem" 
```

但我得到一个错误。

```
unable to load private key 
```

如何使用 OpenSSL 从 PKCS#12 存储中提取 PEM 中的证书？

* * *

## 回答 #1

> 赞同：687
> 
> 时间：2013-02-28T20:00:36.847

尝试：

```
openssl pkcs12 -in path.p12 -out newfile.crt.pem -clcerts -nokeys
openssl pkcs12 -in path.p12 -out newfile.key.pem -nocerts -nodes 
```

之后你有：

*   newfile.crt.pem 中的证书
*   newfile.key.pem 中的私钥

要在没有密码的情况下将证书和密钥放在同一个文件中，请使用以下内容，因为空密码将导致无法导出密钥：

```
openssl pkcs12 -in path.p12 -out newfile.pem -nodes 
```

或者，如果您想为私钥提供密码，请省略`-nodes`并输入密码：

```
openssl pkcs12 -in path.p12 -out newfile.pem 
```

如果您需要直接从命令行（例如脚本）输入 PKCS#12 密码，只需添加`-passin pass:${PASSWORD}`：

```
openssl pkcs12 -in path.p12 -out newfile.crt.pem -clcerts -nokeys -passin 'pass:P@s5w0rD' 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-23T20:21:26.383

您只需要提供密码。您可以使用以下语法在同一命令行中执行此操作：

```
openssl pkcs12 -export -in "path.p12" -out "newfile.pem" -passin pass:[password] 
```

然后将提示您输入密码以加密输出文件中的私钥。如果要导出未加密的私钥（明文），请在上面的行中包含“节点”选项：

```
openssl pkcs12 -export -in "path.p12" -out "newfile.pem" -passin pass:[password] -nodes 
```

更多信息：[http ://www.openssl.org/docs/apps/pkcs12.html](http://www.openssl.org/docs/apps/pkcs12.html)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-02T21:08:11.997

`pyopenssl`如果您可以使用 Python，那么如果您有模块，那就更容易了。这里是：

```
from OpenSSL import crypto

# May require "" for empty password depending on version

with open("push.p12", "rb") as file:
    p12 = crypto.load_pkcs12(file.read(), "my_passphrase")

# PEM formatted private key
print crypto.dump_privatekey(crypto.FILETYPE_PEM, p12.get_privatekey())

# PEM formatted certificate
print crypto.dump_certificate(crypto.FILETYPE_PEM, p12.get_certificate()) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-12-28T12:49:45.203

有一个免费的开源 GUI 工具[KeyStore Explorer](https://keystore-explorer.org/)可用于处理加密密钥容器。使用它，您可以将证书或私钥导出到单独的文件中，或将容器转换为另一种格式（jks、pem、p12、pkcs12 等）

[![在此处输入图像描述](../Images/c534e19c87ba8f9ba7d07abb290b180f.png)](https://i.stack.imgur.com/jY7Vr.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-15T12:55:22.160

我有一个 PFX 文件，需要为 NGINX 创建 KEY 文件，所以我这样做了：

```
openssl pkcs12 -in file.pfx -out file.key -nocerts -nodes 
```

然后我不得不编辑 KEY 文件并删除所有内容，直到`-----BEGIN PRIVATE KEY-----`. 之后 NGINX 接受了 KEY 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-06T18:06:06.233

```
#!/usr/bin/env python3
from optparse import Option
from OpenSSL import crypto
import os
import warnings
from getpass import getpass
warnings.filterwarnings("ignore", category=DeprecationWarning) 

def sanitize_path(path):
    return os.path.expandvars(os.path.expanduser(path))

def main(in_file, out_file, passphrase=None):
    if not passphrase:
        passphrase = getpass(prompt=("SSL Private Key Passphrase: "))

    in_file = sanitize_path(in_file)
    out_file = sanitize_path(out_file)

    with open(in_file, "rb") as input_file:
        p12 = crypto.load_pkcs12(input_file.read(), passphrase)
        pem = crypto.dump_privatekey(crypto.FILETYPE_PEM, p12.get_privatekey())
    with open(out_file, "w") as output_file:
        output_file.write(pem.decode('utf-8'))

if __name__ == '__main__':
    from optparse import OptionParser
    usage = "usage: %prog  input_file output_file [passphrase]"
    p = OptionParser(usage=usage)
    opt, args = p.parse_args()
    main(*args) 
```

# php - 如何从 foreach 循环中的表中获取值？

> ID：15144051
> 
> 赞同：0
> 
> 时间：2013-02-28T19:30:50.367
> 
> 标签：php

我正在做的是尝试建立一个页面，用户可以在其中查看他们创建的工具并随时删除它们。我正在查询三个不同的表并将结果放入一个数组中。一旦这些值在一个数组中，一个 foreach 循环就会遍历并使用表中的所有信息填充一个表，如下所示：

```
 $counter = 1;
    echo '<table>'
    foreach ($recent_saved_tools as $key => $value) {

            echo '<tr name="item'.$counter.'">';
            echo '<td>';

            echo '<input type="hidden" name="tablename" value="'.$value['table'].'" />';
            echo '<input type="hidden" name="tabledelete" value="'.$value['delete'].'" />';
            echo '<input type="hidden" name="tableidfield" value="'.$value['idfield'].'" />';
            echo '<input type="hidden" name="tableid" value="'.$value['id'].'" />';

            //code to display the tool name and link
            echo '<a style="text-decoration:none;" href="'.WEBSITE.'tools/'.$value['URL'].'?saved_data_id='.$value['id'].'">'.$value['display'].'</a><br />';
            echo date("m/d/Y H:i:s", $key).'<br />';
            echo '</td><td>';

            //code to display the delete button
            echo '&nbsp;&nbsp;&nbsp;&nbsp;<input class="cssformbutton bluebutton" type="button" name="delete" id="deletebtn'.$counter.'" value="Delete" /><br /><br /><br /><br /></td>';

            $counter ++;

    }
    echo '</table>'; 
```

问题是每当我运行 SQL 查询时，无论我单击什么按钮，它总是从最后一个表行中获取值。我知道这与它们的命名方式有关（多个元素具有相同的名称），但我不知道如何解决这个问题。任何帮助，将不胜感激。

这是我用来删除项目的查询：

```
$query = 'UPDATE '.$value['table'].' SET '.$value['delete'].' = 1 WHERE '.$value['idfield'].' = '.$value['id'];

$sql->query($query); 
```

编辑：添加删除代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:36:53.163

看起来你没有关闭任何地方......

查询返回什么结果？你期待什么输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:37:45.077

每行都有一些发布到服务器的输入。它们具有相同的名称 - 对于每一行。你可以这样改变它：

```
echo '<input type="hidden" name="tablename'.$counter.'" value="'.$value['table'].'" />'; 
```

然后你可以`$_POST['tablename'.$rownr]`在你的删除代码中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:43:18.520

尝试将其改为 for 循环并将变量添加到末尾。

```
 $array;
    $counter = count($array);
    echo '<table>'
    for($i = 0; $i < $counter - 1; $i++) {

        echo '<tr name="item'.$i.'">';
        echo '<td>';

        echo '<input type="hidden" name="tablename" value="'.$value['table']. $i'" />';
        echo '<input type="hidden" name="tabledelete" value="'.$value['delete']. $i'" />';
        echo '<input type="hidden" name="tableidfield" value="'.$value['idfield']. $i'" />';
        echo '<input type="hidden" name="tableid" value="'.$value['id'].'" />';

        //code to display the tool name and link
        echo '<a style="text-decoration:none;" href="'.WEBSITE.'tools/'.$value['URL'].'?saved_data_id='.$value['id'].'">'.$value['display'].'</a><br />';
        echo date("m/d/Y H:i:s", $key).'<br />';
        echo '</td><td>';

        //code to display the delete button
        echo '&nbsp;&nbsp;&nbsp;&nbsp;<input class="cssformbutton bluebutton" type="button" name="delete" id="deletebtn'.$counter.'" value="Delete" /><br /><br /><br /><br /></td>';

}
echo '</table>'; 
```

# javascript - jQuery在div中显示数组

> ID：15144059
> 
> 赞同：1
> 
> 时间：2013-02-28T19:31:17.763
> 
> 标签：javascript, jquery, regex, html, text

我用一些 jQuery 制作了一个 HTML 页面，但它没有做我想做的事情：

1.  我希望 jQuery 获取 div 1 的文本。
2.  摆脱所有不受欢迎的字符。
3.  制作一个文本数组。
4.  在 div 2 中显示数组。

1 和 2 正在工作，3 也应该工作。

我做的：

```
<!DOCTYPE HTML>
<html>
<head>
<LINK href="layout.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script type="text/javascript">
$(document).ready(function() {
    var str = $("div.someText").text();
    var specialChars = "!@#$^&%*()+=-[]\/{}|:<>?,.";
    for (var i = 0; i < specialChars.length; i++) {
    str = str.replace(new RegExp("\\" + specialChars[i], 'gi'), '');
    }
    str = str.replace(/["'“”…]{1}/gi,".");
    str = str.replace(/[.*]{1}/gi," ");
    str = str.toLowerCase();
    var array = str.split(" ");
    for(var i = 0; i < array.length(); i++) {
        $("div.put").html(array[i] + "\n");
    }
})
</script>
<div class="someText">
Een kerel gaat met zijn pas gekochte hond naar de dierenarts. Eindelijk is hij aan de               
beurt en komt met zijn hond de behandelkamer binnen.......
“En?”, vraagt de dierenarts, “wat is het probleem?”. “Nou”, zegt de eigenaar van het beest,
“ik heb hem gekocht om te waken, maar elke keer als de bel gaat, dan gaat mijn hond in de hoek zitten”.
De dierenarts wrijft eens vakkundig over zijn kin en zegt tenslotte: “ja…dat doen boxers”.
</div>
<br />
<div class="put"></div>
</body>
</html> 
```

但我必须做错事，因为 div 2 什么也没显示。

谁能告诉我为什么我的代码没有按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:38:20.343

你有各种各样的问题，但我已经在这个演示中解决了这些问题：

[http://jsfiddle.net/TzSLh/](http://jsfiddle.net/TzSLh/)

1.  `array.length()`应该是`array.length`。这导致了致命的语义错误。
2.  `str.split(str, ' ')`应该是`str.split(' ')`。第一个参数是要分割的字符串。
3.  `.html("string')`每次都会覆盖 HTML。我已经用一种允许您附加 html 内容的方法对其进行了更新。`.text`如果只是文本，您也可以使用。如果您想要可见的换行符，请使用 CSS`white-space: pre`或使用`<br>`而不是`\n`. 您也可以跳过循环并执行`$("div.put").text(array.join("\n"));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:36:09.787

在该行`var array = str.split(str," ");`中，您使用了错误的语法`str.split()`。如果你想分割空间，你想要`str.split(" ")`. 我不确定您的代码目前对它做了什么，但我猜它会在控制台中引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:35:51.550

```
for(var i = 0; i < array.length(); i++) {
    $("div.put").html(array[i] + "\n");
} 
```

此代码将循环遍历您的数组，并且每次将每个带有“put”类的 div 的 innerHTML 设置为数组中索引的内容。

最后，它会将 innerHTML 设置为数组中最后一项的内容。其余的将被覆盖。

我怀疑您想使用[jquery append](http://api.jquery.com/append/)将每个项目添加到最后。例如，您可以将其添加为每个标签的跨度标签。

我也不确定你的 div 是否真的有“put”类。这可能是也可能不是错误。

# c - hping怎么能这么快发包呢？

> ID：15144066
> 
> 赞同：5
> 
> 时间：2013-02-28T19:31:48.820
> 
> 标签：c, linux, sockets, raw-sockets, packet-injection

我比较了两个工具的发送数据包速度，`hping`以及`packETHcli`. packETHcli 的命令行选项是

```
./packETHcli -i eth0 -m 2 -n 0 -d -1 -f icmpSample.pcap 
```

而对于 hping 是

```
hping --flood 192.168.0.1 
```

但是在iptraf中显示hping的发包速度比packETHcli快10倍左右。

两种工具都使用原始套接字，但为什么会有如此大的差异？

这是获取源代码的链接。

hping：[http ://wiki.hping.org/](http://wiki.hping.org/)

packETHcli：http: [//sourceforge.net/projects/packeth/](http://sourceforge.net/projects/packeth/)

**编辑：** 我注意到`hping`使用 AF_INET 原始套接字，有效负载是 TCP。`packETHcli`使用 PF_PACKET 原始套接字，在我的示例中，有效负载是带有 ICMP 有效负载的 IP 数据包。它会影响数据包发送速度吗？

**编辑2**

这次，我使用 ifconfig 来查找运行前后的 TX 数据包计数`hping3`差异`packETHcli`。并且发现这两个工具的数据包生成率接近。`hping3`大约是每秒 100000 个数据包，`packETHcli`大约是每秒 80000 个数据包。

我也`vnstat`用来测量数据包的生成率。结果与我从中得到的数字一致`ifconfig`。

所以，这似乎是`iptraf`谎言。并且我`iptraf`用来监控一个TCP数据包的重复重发，而不更新IP ID号和TCP序列号。`iptraf`认为我的数据包发送速率是每秒 0 个数据包。可能`iptraf`不计算重复的数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:55:11.407

*.pcap 文件中有每个数据包的时间戳信息。而且我认为工具packETHcli是在解析*.pcap文件，使用时间戳信息来模拟捕获*.pcap文件的网络环境，这意味着它必须根据时间戳在数据包之间添加一些延迟。

虽然 hping 没有。

我认为这就是区别。

如果是这样，packETHcli 工具中是否有任何选项支持加快数据包发送速度？

# java - 在java中的子列表中按属性对列表进行排序

> ID：15144070
> 
> 赞同：0
> 
> 时间：2013-02-28T19:31:55.970
> 
> 标签：java, list, sorting, object

我正在将一个分隔文件读入一个名为“Holder”的自定义对象中。Holder 包含一个名为“Record”的自定义对象列表。每个记录都是称为“字段”的自定义对象的列表。每个字段都有一个字符串名称和字符串值

```
public class Holder{
    private List RecordList;
    /* constructors and methods */
}

public class Record{
    private List FieldList
    /* constructors and methods */
}

public class Field{
    private String Name;
    private String Value;
    /* constructors and methods */
} 
```

我正在根据该行的第一项从数据库中提取 Field 对象的名称。这是我正在提取的文件的示例（行号 - 它们也将是记录索引 - 为了便于解释，从 0 开始添加）：

```
0 - A,123
1 - B,123,123456
2 - B,123,654321
3 - B,123,112233
4 - C,123,choice1,1/1/2011,12/31/2011
5 - C,123,choice2,1/1/2011,12/31/2011
6 - D,123,choice1,1/1/2011,12/31/2011,654321
7 - D,123,choice1,1/1/2011,12/31/2011,112233 
```

Holder 存储一个`Record`对象列表。每一行都成为一个`Record`存储对象列表的`Field`对象。逗号之间的每个字符串在对象`Value`上都成为自己的字符串。`Field`例如：对于第一个“B”记录（第 1 行），A`Record BLine1`对象将如下所示：

```
BLine1.getFieldList.get(0).getName() = "LineType"  //set from DAO not shown
BLine1.getFieldList.get(0).getValue() = "B"

BLine1.getFieldList.get(1).getName() = "Number"    //set from DAO not shown
BLine1.getFieldList.get(1).getValue() = "123"

BLine1.getFieldList.get(2).getName() = "Selection"  //set from DAO not shown
BLine1.getFieldList.get(2).getValue() = "123456" 
```

我需要按每个字段对这个列表进行排序。但根据 LineType 的不同，要排序的项目的类型和数量会发生变化。可以添加/删除 LineTypes，并且可以更改字段。所以我真的需要尽可能通用的东西。

它将按照字段在行中的顺序进行排序。所以它会被排序`FieldList.getValue(0), FieldList.getValue(1), .... FieldList.getValue(FieldList.size() - 1)`

因此，这是完成后行号的顺序：

```
0
3   
1
2
4
5
7
6 
```

进行这种排序的最佳/最有效方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:00:25.807

忽略所有可能的空值，这对于一个`Comparator<Record>`

```
public int compare(Record r1, Record r2) {
  // if one field list is longer than the other treat that one as greater
  int lenDiff = r1.getFieldList().size() - r2.getFieldList().size();
  if(lenDiff != 0) return lenDiff;

  // both field lists same length, do lexicographic comparison
  Iterator<Field> it1 = r1.getFieldList().iterator();
  Iterator<Field> it2 = r2.getFieldList().iterator();
  while(it1.hasNext()) {
    Field f1 = it1.next();
    Field f2 = it2.next();
    int diff = f1.getValue().compareTo(f2.getValue());
    if(diff != 0) return diff;
  }

  // all components equal, so both lists equal.
  return 0;
} 
```

您可以将其与`Collections.sort`.

显然，如果您可能有一条`null`记录，或者一条带有`null`字段的记录，或者一个带有`null`值的字段，那么一切都会变得更加混乱......

# python - 通过 python3 http.server 模块设置公共网络服务器

> ID：15144072
> 
> 赞同：1
> 
> 时间：2013-02-28T19:31:58.130
> 
> 标签：python, http, web, module, python-3.x

我是 python 新手，也是 web 开发新手。我在 http.server 模块的帮助下制作了一个 Python Web 应用程序，并在 localhost 端口上运行它。它在 localhost:abcd 工作正常。

现在我想在一些公共服务器上运行它，比如 pythonanywhere 或 heroku！但是不知道服务器地址和端口是什么。

我需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:29:08.353

在 PythonAnywhere 上，您可以在 your-username.pythonanywhere.com 上获得一个 Web 应用程序，该应用程序在端口 80 上运行——因此您只需在浏览器 URL 栏中键入[http://your-username.pythonanywhere.com/即可访问它。](http://your-username.pythonanywhere.com/)

# ruby - 我可以在 Ruby 中对（简单）块进行字符串化吗？

> ID：15144074
> 
> 赞同：0
> 
> 时间：2013-02-28T19:32:08.227
> 
> 标签：ruby, block

假设我有这个 Ruby 方法：

```
def get_proc_from_block(&block)
  return block
end 
```

现在，如果我用这样的块调用它：

```
p = get_proc_from_block(&:length) 
```

...有什么办法让我以某种方式检查`p`并从中获取字符串`"length"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:20:22.750

以下每个表达式都会产生相同的正则过程：

```
get_proc_from_block(&:length)
:length.to_proc
proc{ |a| a.length } 
```

并且 Ruby 不支持检查他们的源代码。有关更详细的答案，请查看以下问题：

*   [如何在 Ruby 中编组 lambda (Proc)？](https://stackoverflow.com/questions/23970/how-do-i-marshal-a-lambda-proc-in-ruby)
*   [你如何对 Ruby 代码进行字符串化/序列化？](https://stackoverflow.com/questions/199603/how-do-you-stringize-serialize-ruby-code)

# c# - 检查字节是否为 0x00

> ID：15144077
> 
> 赞同：5
> 
> 时间：2013-02-28T19:32:19.820
> 
> 标签：c#, bytearray, byte, bit-manipulation

编写此方法最易读（和惯用）的是什么？

```
private bool BytesAreValid(byte[] bytes) {
    var t = (bytes[0] | bytes[1] | bytes[2]);
    return t != 0;
} 
```

我需要一个函数来测试文件的前三个字节不是以`00 00 00`.

没有做太多的字节操作。上面的代码对我来说似乎不正确，因为`t`推断为 type `Int32`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T19:33:57.463

> `t`被类型推断为`Int32`

是的，因为`|`没有定义运算符（像大多数运算符一样）`byte`- 字节被提升为`int`值。（有关详细信息，请参阅 C# 4 规范的第 7.11.1 节。）

但是鉴于您只想将其与 0 进行比较，无论如何都可以。

就我个人而言，我只是把它写成：

```
return bytes[0] != 0 && bytes[1] != 0 && bytes[2] != 0; 
```

甚至：

```
return (bytes[0] != 0) && (bytes[1] != 0) && (bytes[2] != 0); 
```

这两个对我来说似乎更清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:21:54.827

```
private bool BytesAreValid(byte[] bytes) {
    return !bytes.Take(3).SequenceEqual(new byte[] { 0, 0, 0 });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T19:57:46.673

要预测可变数组长度并避免空引用异常：

```
private bool BytesAreValid(byte[] bytes)
{
    if (bytes == null) return false;

    return !Array.Exists(bytes, x => x == 0);
} 
```

非 Linq 版本：

```
private bool BytesAreValid(byte[] bytes)
{
    if (bytes == null) return false;

    for (int i = 0; i < bytes.Length; i++)
    {
        if (bytes[i] == 0) return false;
    }
    return true;
} 
```

# extjs - extjs 嵌套 json

> ID：15144078
> 
> 赞同：1
> 
> 时间：2013-02-28T19:32:20.747
> 
> 标签：extjs

从各个地方获取关于嵌套 json 在 extjs 中是否可用的相互冲突的信息。注意使用 Sencha Architect 可能会使事情复杂化......

我有一个通过 store/ajax 代理返回的客户端 json 对象。我无法访问第一级以外的任何内容。

JSON 看起来像这样：

```
 {
    "client": {
        "0": {
            "id": "12345",
            "type_id": "3",
            "association_id": "0",
            "is_active": "1",
            "manager_id": "2",
            "business_name": null,
            "has_payroll": "0",
            "business_proprietor_contact_id": null,
            "date_created": "1358893243",
            "date_modified": "1358893243"
        },
        "contacts": [
            {
                "id": "1",
                "client_id": "12345",
                "contact_id": "1",
                "is_primary": "0",
                "display_priority": "0",
                "relationship": "Client",
                "friendly_name": "Homer",
                "contact": [
                    {
                        "id": "1",
                        "surname": "Mr.",
                        "first_name": "Homer",
                        "middle_name": "J",
                        "last_name": "Simpson",
                        "client_id": "12345",
                        "date_created": "1356038714",
                        "date_modified": null
                    },
                    {
                        "addresses": [
                            {
                                "id": "1",
                                "contact_id": "1",
                                "address_id": "16",
                                "is_mailing_address": "0",
                                "is_primary_address": "0",
                                "display_priority": "0",
                                "address": {
                                    "0": {
                                        "id": "16",
                                        "address": "5 Dirt Rd",
                                        "address2": "",
                                        "city": "TAXMASTER",
                                        "state": "NY",
                                        "zip_code": "454545",
                                        "country": "USA",
                                        "other": null,
                                        "phone": null,
                                        "fax": null,
                                        "display_priority": null,
                                        "is_mailing_address": "1"
                                    },
                                    "data": [
                                        {
                                            "id": "10",
                                            "label": "Phone",
                                            "value": "BUT WHO WAS",
                                            "date_created": "1356104685",
                                            "date_modified": "1357142782",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "16",
                                            "is_deleted": "0"
                                        },
                                        {
                                            "id": "14",
                                            "label": "Fax",
                                            "value": "simile",
                                            "date_created": "1356557379",
                                            "date_modified": "1357142782",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "16",
                                            "is_deleted": "0"
                                        },
                                        {
                                            "id": "17",
                                            "label": "Also Known as:",
                                            "value": "DUDE",
                                            "date_created": "1357141357",
                                            "date_modified": "1357142782",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "16",
                                            "is_deleted": "0"
                                        }
                                    ]
                                }
                            },
                            {
                                "id": "6",
                                "contact_id": "1",
                                "address_id": "26",
                                "is_mailing_address": "0",
                                "is_primary_address": "0",
                                "display_priority": "0",
                                "address": {
                                    "0": {
                                        "id": "26",
                                        "address": "1 Lift Road",
                                        "address2": "",
                                        "city": "Tony Beach",
                                        "state": "KS",
                                        "zip_code": "15151",
                                        "country": "USA",
                                        "other": null,
                                        "phone": null,
                                        "fax": null,
                                        "display_priority": null,
                                        "is_mailing_address": "0"
                                    },
                                    "data": [
                                        {
                                            "id": "18",
                                            "label": "Phone:",
                                            "value": "cool phone number",
                                            "date_created": "1357141527",
                                            "date_modified": "1357141527",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "26",
                                            "is_deleted": "0"
                                        },
                                        {
                                            "id": "19",
                                            "label": "Note:",
                                            "value": "cool note",
                                            "date_created": "1357141527",
                                            "date_modified": "1357141527",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "26",
                                            "is_deleted": "0"
                                        }
                                    ]
                                }
                            },
                        ],
                        "data": [
                            {
                                "id": "1",
                                "label": "asdf",
                                "value": "dfdfefefefef",
                                "date_created": "1356038714",
                                "date_modified": "1356040822",
                                "user_id": "2",
                                "display_priority": "0",
                                "client_id": null,
                                "contact_id": "1",
                                "account_id": null,
                                "business_id": null,
                                "address_id": null,
                                "is_deleted": "0"
                            },
                            {
                                "id": "2",
                                "label": "asfd",
                                "value": "152151",
                                "date_created": "1356038714",
                                "date_modified": "1356040822",
                                "user_id": null,
                                "display_priority": "2",
                                "client_id": null,
                                "contact_id": "1",
                                "account_id": null,
                                "business_id": null,
                                "address_id": null,
                                "is_deleted": "0"
                            },
                        ]
                    }
                ]
            },
            {
                "id": "7",
                "client_id": "12345",
                "contact_id": "11",
                "is_primary": "0",
                "display_priority": "0",
                "relationship": "None",
                "friendly_name": "Mary Jane",
                "contact": {
                    "0": {
                        "id": "11",
                        "surname": "",
                        "first_name": "Mary Jane",
                        "middle_name": "",
                        "last_name": "Simpson",
                        "client_id": null,
                        "date_created": "1357145795",
                        "date_modified": null
                    },
                    "7": {
                        "addresses": [
                            {
                                "id": "11",
                                "contact_id": "11",
                                "address_id": "33",
                                "is_mailing_address": "0",
                                "is_primary_address": "0",
                                "display_priority": "0",
                                "address": {
                                    "0": {
                                        "id": "33",
                                        "address": "33 Street",
                                        "address2": "",
                                        "city": "NY",
                                        "state": "NY",
                                        "zip_code": "06830",
                                        "country": "USA",
                                        "other": null,
                                        "phone": null,
                                        "fax": null,
                                        "display_priority": null,
                                        "is_mailing_address": "0"
                                    },
                                    "data": [
                                        {
                                            "id": "31",
                                            "label": "Fax:",
                                            "value": "asdfasdf",
                                            "date_created": "1357145905",
                                            "date_modified": "1357145939",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "33",
                                            "is_deleted": "0"
                                        },
                                        {
                                            "id": "32",
                                            "label": "Fax:",
                                            "value": "sadfsadf",
                                            "date_created": "1357145905",
                                            "date_modified": "1357145905",
                                            "user_id": null,
                                            "display_priority": null,
                                            "client_id": null,
                                            "contact_id": null,
                                            "account_id": null,
                                            "business_id": null,
                                            "address_id": "33",
                                            "is_deleted": "0"
                                        }
                                    ]
                                }
                            }
                        ],
                        "data": [
                            {
                                "id": "29",
                                "label": "Phone:",
                                "value": "asdfsadf",
                                "date_created": "1357145833",
                                "date_modified": "1357145833",
                                "user_id": "2",
                                "display_priority": null,
                                "client_id": null,
                                "contact_id": "11",
                                "account_id": null,
                                "business_id": null,
                                "address_id": null,
                                "is_deleted": "0"
                            },
                            {
                                "id": "30",
                                "label": "Email:",
                                "value": "dsfgdsfg",
                                "date_created": "1357145855",
                                "date_modified": "1357145855",
                                "user_id": "2",
                                "display_priority": null,
                                "client_id": null,
                                "contact_id": "11",
                                "account_id": null,
                                "business_id": null,
                                "address_id": null,
                                "is_deleted": "0"
                            }
                        ]
                    }
                }
            }
        ],
        "notes": [
            {
                "id": "5",
                "client_id": "12345",
                "label": "This is a HomerHomer Note",
                "value": "This is from Homer's Dashboard Notes.",
                "contact_id": null,
                "address_id": null,
                "account_id": null,
                "account_data_id": null,
                "account_credential_id": null,
                "payment_id": null,
                "contact_log_id": null,
                "user_id": "2",
                "bill_id": null,
                "is_deleted": "0",
                "date_created": "1357148256",
                "date_modified": "1357148256"
            }
        ]
    }
} 
```

根据[https://stackoverflow.com/a/8318589/183254](https://stackoverflow.com/a/8318589/183254)嵌套 JSON 不可用。根据[https://stackoverflow.com/a/5604594/183254](https://stackoverflow.com/a/5604594/183254)它*是*可用的，但必须采用某种格式。

我根据 API 文档格式做了一个小测试：

```
{
    results: 2000,
    rows: [
        { id: 1, firstname: 'Bill', occupation: 'Gardener', cool: {neat: 'wow'} },
        { id: 2, firstname: 'Ben' , occupation: 'Horticulturalist' },
    ]
} 
```

有了这个，我可以从 tpl 调用所有内容。特别是`cool.neat`印刷品`wow`。然而，`cool`改为`cool:[{neat:'wow}]`休息。所以它似乎嵌套的 json 部分工作 - 可能只是部分因为我做错了什么。

我的想法是向 api 发出单个请求并收集所有需要的信息、解析它并将其发送到组件而不是为所需的每组数据创建代理是有意义的。我可能错了...

除了需要的指导/打脸，我还有两个问题：

1）尝试做我正在做的事情是否可行/可行？即尝试使用单个请求来收集多个组件的数据？

2）有没有办法从tpl调试数据？

这是来自 Sencha Architect 的 extjs 4.1

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:41:04.020

我有同样的问题。我可以绕过它的唯一方法（我尝试了映射和其他几种解决方案）基本上是拥有一个主商店和子商店。从 ajax 获取信息并将其带入主存储。有一个“加载”侦听器，当它加载时，检查是否需要将信息传递给其他商店。

将所有子存储 autoload 属性设置为 false 并且从不加载它们。

IE：

```
load: function(t,records,successful,eOpts) {
    var substores [{store: nameOfStore, root: rootPropInTheJson},
                   {store...etc...etc..];
    for (var i = 0; i < substores.length; i++) {
        if (pathtoroot* != undefined) {
            substores[i].store.add(pathtojsonroot)
        }
    }
} 
```

至少，这就是我认为你的意思。如果这就是你的意思，那么是的，我发现它很实用，我不知道第二个问题的答案。

# eclipse - Eclipse 外部工具无法启动 Meteorite: uname: command not found, 即使设置了 PATH

> ID：15144083
> 
> 赞同：1
> 
> 时间：2013-02-28T19:32:50.937
> 
> 标签：eclipse, meteor

在终端中一切正常：

```
alex@ubuntu:~/workspace/spt$ export PATH=$PATH:/usr/lib/meteor/bin
alex@ubuntu:~/workspace/spt$ mrt

Stand back while Meteorite does its thing

Done installing smart packages

Ok, everything's ready. Here comes Meteor!

 [[[[[ ~/workspace/spt ]]]]]

Running on: http://localhost:3000/ 
```

现在我想在 Eclipse 控制台中查看输出，所以我创建了“外部工具配置”并拥有：

![在此处输入图像描述](../Images/bbcd6791285148aa78eaf1b80e81ee62.png)

我还添加了PATH：

![环境 - 将 mrt 添加到 PATH](../Images/5681f77ebb3563567d9d3700c3431d8f.png)

但是，当我尝试运行时，我在控制台中得到以下输出：

> [1m[37m在陨石做它的时候站起来[39m[22m
> 
> [1m[37m完成安装智能包[39m[22m
> 
> [32mOk，一切准备就绪。流星来了！[39m
> 
> /home/alex/.meteorite/meteors/meteor/meteor/2d8b41a87cec884489ead138b5dfea31487363f3/meteor: 第 7 行: uname: command not found 抱歉，不支持此操作系统。

**关于发生了什么的任何想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:36:22.423

我认为当它说*附加*它是一个松散的定义时。如果流星找不到`uname`，则表示路径已清空到`/usr/lib/meteor/bin`. 您可以手动创建一个完整的路径变量：

找出您的路径，`echo $PATH`在您的终端中运行，并将您的添加`:/usr/lib/meteor/bin`到其中，并将其用作屏幕截图中该对话框中的路径。

# android - 缺少 Google Play 服务

> ID：15144084
> 
> 赞同：1
> 
> 时间：2013-02-28T19:32:51.633
> 
> 标签：google-play-services 。, android, google-maps, google-maps-api-2

我已经在我的项目中包含了 google play services 库，但是当我运行它时出现错误：缺少[google-play-services 。](/questions/tagged/google-play-services "显示标记为“google-play-services”的问题")我在我的项目中使用谷歌地图的代码，我可以用现在的问题编译它。我唯一的猜测是，在我最后一次 git 提交中，我有一个忽略文件，这可能导致了问题。我该如何解决这个问题？日志猫如下：

```
02-28 21:16:26.700: E/AndroidRuntime(30360): Caused by: java.lang.NullPointerException
02-28 21:16:26.700: E/AndroidRuntime(30360):    at .MapActivity.setMapSettings (MapActivity.java:226)
02-28 21:16:26.700: E/AndroidRuntime(30360):    at .MapActivity.onCreate(MapActivity.java:88)
02-28 21:16:26.700: E/AndroidRuntime(30360):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
02-28 21:16:26.700: E/AndroidRuntime(30360):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 
```

第226行如下：

> uiSettings = map.getUiSettings();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:48:59.777

我刚刚解决了。我的设备中的谷歌服务已经更新，我的项目的谷歌播放服务库是旧版本。我更新了它，问题已经解决了！

# ios - 一指图像缩放/裁剪

> ID：15144085
> 
> 赞同：0
> 
> 时间：2013-02-28T19:33:03.183
> 
> 标签：ios, imageview, gesture, image-scaling

我正在尝试在 iOS 上实现单指图像缩放/裁剪。类似于柯比·特纳的单指旋转。我正在寻找现有的库，或者如果您可以帮助我处理代码本身，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:23:27.973

我不太清楚你所说的单指裁剪是什么意思，但我为 iOS 裁剪制作了这个库。也许它可以提供帮助。[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

# gdb - 在 geany 中使用 libtool gdb

> ID：15144086
> 
> 赞同：0
> 
> 时间：2013-02-28T19:33:05.493
> 
> 标签：gdb, autotools, libtool

我正在开发一个使用 GNU autotools 的项目，所以为了使用 gdb 调试代码，我在 libtool 中运行 gdb：

```
libtool --mode=execute gdbtui foobar 
```

是否有可能从 geany IDE 中以某种方式做到这一点？或者以某种方式运行 libtool e geany 而不是 gdb？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T04:37:57.997

除了实际的调试插件[Debugger](http://github.com/geany/geany-plugins/blob/master/debugger/README)和更新和维护的[Scope](http://github.com/geany/geany-plugins/blob/master/scope/README)插件之外，您还可以在 Geany 本身中运行任意构建命令。后者[在手册](http://www.geany.org/manual/current/index.html#build-menu)中以及[wiki 上的](https://wiki.geany.org/howtos/configurebuildmenu)有用文章中进行了描述。

基本思想是您需要使用构建菜单的“设置构建命令”对话框来配置手册中描述的自定义命令（带有漂亮的屏幕截图和所有字段和占位符的描述）。您可以从 Geany 中的“帮助”菜单访问当前版本的手册。

# angularjs - Angularjs 指令-指令-控制器-服务交互

> ID：15144088
> 
> 赞同：3
> 
> 时间：2013-02-28T19:33:16.790
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

标题有点拗口但是有我现在的情况：

我有一个指令 (D1)，它是我在根目录中的模态弹出窗口的普通标记。我有一个指令 (D2) 在控制器的范围 (C1) 中。我想让 D2 设置模态 D1 内的内容。我有一个服务（S1），它被注入到 C1 中，它从网络中提取我想最终注入到 D1 中的数据。

D1 如下（模态的普通标记）： ![在此处输入图像描述](../Images/f451a633f420d6513aefe8771488d733.png)

在 C1 中的 S1 将数据返回给 D2 以填充 D1 后，D1 将如下所示。D2 将负责在 D1 中定义模型数据，例如 {{title}}。 ![在此处输入图像描述](../Images/14e5e1d393cbe3d3b228508b3c33035d.png)

这个想法是有一个通用的解耦模式（D1），可以通过另一个指令（D2）定义/填充。

我很难实现这个功能。加分项，我希望 D1 有一个 API，我可以调用它来使用复选框、输入、文本等不同元素填充模式。这与仅在 D1 之外构建标记然后将其完全注入 D1 不同。

基本代码如下：

```
myApp.controller('C1', function(S1){
   var results = S1.query();
   // populate D1 attributes with results from S1?  or a getter function in the controller to returns results to D1.
}

myApp.directive('D1', function() {
var createCheckBox = function( name ){ // one of many different element available exposed through D1's API.
    var checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.name = name;
    return checkbox;
}
return{
   restrict: "E",
   templateUrl: '/path/to/my/modal.html',
   controller: function( $scope ){ // hopefully this would be D1's API
       $scope.modalContent = [];
       this.addCheckBox = function( checkboxName ){
           $scope.push( this.createCheckBox( checkboxName ) );
       }
   }
   link: function( scope, element, attrs ){
        // set up events on the modal (such as closing it)
   }
}
} // end of D1

myApp.directive('D2', function() {
    return{
       restrict: "A",
       require: 'D1', // <-- do not think this is possible with my setup.
       link: function( scope, element, attrs ){
            element.bind( 'click', function(){
                // loop through data returned by service
                D1.addCheckBox(/* checkbox's name */ );
                // end loop
            });

       }
    } 
}// end of D2 
```

HTML 标记

```
<div ng-controller="root">
  <div ng-controller="C1">
     <span D2></span>
  </div>
  <D1></D1>
</div> 
```

感谢您关注这么远！

**TL;DR：寻找另一个问题来帮助解决**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:25:33.167

*Wow long question! Not sure I understood it all but following Jonnybojandles comment...*

Could you `$broadcast` and `$on`?

```
$rootScope.$broadcast('MyEvent'); // Fire an event

$scope.$on('MyEvent', function () {  });  // Handle the event 
```

Or simply use `$rootScope`?

# html - 如何将“表单”中的数据显示到带有相应表单数据表格的新网页？

> ID：15144089
> 
> 赞同：-2
> 
> 时间：2013-02-28T19:33:21.510
> 
> 标签：html, forms

我设计了一个包含一些用户字段的表单页面......表单上收集的数据可以邮寄到网站或电子邮件 ID......但我不知道如何在我创建的另一个网页上显示数据（目前处于离线模式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:40:36.740

html

```
<form action="welcome.php" method="post">
Name: <input type="text" name="name">
Age: <input type="text" name="age">
<input type="submit">
</form> 
```

远程文件`welcome.php`

```
<?php echo $_POST["name"]; ?>
<?php echo $_POST["age"]; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:41:11.467

您可以将网页另存为 .php 文件，这主要是 html，其中包含一些 php。

这样，您可以使用 post 或从表单提交中获取，并在另一个页面上接收信息并对其进行处理。

表单提交：[http ://w3schools.com/php/php_forms.asp](http://w3schools.com/php/php_forms.asp)

帖子：[http ://w3schools.com/php/php_post.asp](http://w3schools.com/php/php_post.asp)

获取：[http ://w3schools.com/php/php_get.asp](http://w3schools.com/php/php_get.asp)

有了给出的信息，这将为您指明正确的方向，并且可能是一个有用的学习资源，如果您在查看信息后有任何问题，请在您尝试中进行编辑，我会提供更多帮助。

# java - 如何在 Maven 项目中包含共享对象文件

> ID：15144091
> 
> 赞同：2
> 
> 时间：2013-02-28T19:33:23.743
> 
> 标签：java, maven, swig, shared-objects, gdal

我正在使用一个创建共享对象文件的外部 c++ 库（gdal/ogr），以便 java 可以利用它的功能。问题是我不确定我应该如何处理这些 .so 文件，以及我应该如何让 maven 在构建项目时使用它们。我发现[this](https://code.google.com/p/mavennatives/) tutorial on how to include shared object files

但是当我按照给出的指示进行操作时，我得到了这个错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at org.lwjgl.Sys$1.run(Sys.java:73)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
    at org.lwjgl.Sys.loadLibrary(Sys.java:95)
    at org.lwjgl.Sys.<clinit>(Sys.java:112)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:135)
    at com.googlecode.nativedependencies.example.App.main(App.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

有关相关 .so 文件的上下文及其生成方式，请参阅以下有关使用 java 绑定编译 gdal/ogr 的[链接](https://github.com/VertNet/reproject/wiki/GDAL-Java-Bindings)。

我只是在寻找包含这些文件的最强大的方法，以便我可以尽可能地在 java 中使用 gdal/ogr 库，就像使用任何其他普通 java 库一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:31:24.830

我认为这个插件可以帮助您构建 java 项目。但是您仍然需要通知 JVM 本地文件在哪里。

请参阅[如何通过 Eclipse 启动（而不是覆盖它）将本机库添加到“java.library.path”](https://stackoverflow.com/a/2309723/651140)或简单的[如何加载 Java 本机/共享库 (.so)](http://www.chilkatsoft.com/java-loadLibrary-Linux.asp)

您需要覆盖（在打开 eclipse 或运行 java 程序之前在同一个控制台中）

```
export LD_LIBRARY_PATH = "${workspace_loc}/lib:${LD_LIBRARY_PATH}" 
```

或添加到 java 命令：

```
-Djava.library.path="${workspace_loc:project}\lib;${env_var:PATH}" 
```

# python - Web2py 导入 python 模块

> ID：15144094
> 
> 赞同：1
> 
> 时间：2013-02-28T19:33:34.073
> 
> 标签：python, web2py

你好我正在尝试导入一个模块`import Image`。我收到了这个错误`<type 'exceptions.ImportError'> Cannot import module 'Image'`

我寻找了一个解决方案，并[在 web2py 的本地安装中找到了这个安装 Python 模块](https://stackoverflow.com/questions/8131279/install-python-module-in-local-install-of-web2py/8132009#8132009)

所以“我怎样才能将模块放在 app/modules 文件夹中”，所以 web2py 会在导入某些东西时首先检查那里，或者如果有人知道更好的解决方案，那么提供的解决方案请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:52:31.873

如果您使用的是 Windows 或 Mac web2py 二进制文件，它们包含自己的 Python 解释器，因此它们不会使用您系统安装的 Python 版本，也不会看到它的任何模块。如果您安装了自己的 Python 版本，最好从源代码运行 web2py，这同样简单（只需下载并解压缩 - 使用 web2py.py 文件而不是 web2py.exe 或 web2py.app 运行）。

# javascript - 如果没有适当的类，我该怎么做才能获得样式表？

> ID：15144096
> 
> 赞同：1
> 
> 时间：2013-02-28T19:33:42.487
> 
> 标签：javascript, jquery, html, css, fullcalendar

我正在使用 FullCalendar，它输出如下： ![在此处输入图像描述](../Images/32bf8d56ffae4c0eb22e86e379c21788.png) 像这样：

```
<div id="calendar" class="fc">
    <table class="fc-header" style="width: 100%">
        <tbody>
            <tr>
                <td class="fc-header-left"><span class="fc-button fc-button-prev fc-state-default fc-corner-left"><span class="fc-button-inner"><span class="fc-button-content">&nbsp;◄&amp;nbsp;</span><span class="fc-button-effect"><span></span></span></span></span><span class="fc-button fc-button-next fc-state-default fc-corner-right"><span class="fc-button-inner"><span class="fc-button-content">&nbsp;►&amp;nbsp;</span><span class="fc-button-effect"><span></span></span></span></span><span class="fc-header-space"></span><span class="fc-button fc-button-today fc-state-default fc-corner-left fc-corner-right fc-state-disabled"><span class="fc-button-inner"><span class="fc-button-content">today</span><span class="fc-button-effect"><span></span></span></span></span></td>
                <td class="fc-header-center"><span class="fc-header-title">
                    <h2>Feb 25 — Jun 7 2013</h2>
                </span></td>
                <td class="fc-header-right"></td>
            </tr>
        </tbody>
    </table>
    <div class="fc-content" style="position: relative; min-height: 1px;">
        <div class="fc-view fc-view-resourceNextWeeks fc-grid" style="position: relative;" unselectable="on">
            <table class="fc-border-separate" style="width: 100%" cellspacing="0">
                <thead>
                    <tr class="fc-first fc-last">
                        <th class="fc-resourceName">&nbsp;</th>
                        <th class="fc-id0 fc-widget-header fc-first" style="width: 13px;">Mon 2/25<br>
                            Week 9</th>
                        <th class="fc-id1 fc-widget-header" style="width: 13px;">Tue 2/26</th>
                        <th class="fc-id2 fc-widget-header" style="width: 13px;">Wed 2/27</th>
                        <th class="fc-id3 fc-widget-header" style="width: 13px;">Thu 2/28</th>
                        <th class="fc-id4 fc-widget-header" style="width: 13px;">Fri 3/1</th>
                        <th class="fc-id5 fc-widget-header" style="width: 13px;">Mon 3/4<br>
                            Week 10</th>
                        <th class="fc-id6 fc-widget-header" style="width: 13px;">Tue 3/5</th>
                        <th class="fc-id7 fc-widget-header" style="width: 13px;">Wed 3/6</th>
                        <th class="fc-id8 fc-widget-header" style="width: 13px;">Thu 3/7</th>
                        <th class="fc-id9 fc-widget-header" style="width: 13px;">Fri 3/8</th>
                        <th class="fc-id10 fc-widget-header" style="width: 13px;">Mon 3/11<br>
                            Week 11</th>
                        <th class="fc-id11 fc-widget-header" style="width: 13px;">Tue 3/12</th>
                        <th class="fc-id12 fc-widget-header" style="width: 13px;">Wed 3/13</th>
                        <th class="fc-id13 fc-widget-header" style="width: 13px;">Thu 3/14</th>
                        <th class="fc-id14 fc-widget-header" style="width: 13px;">Fri 3/15</th>
                        <th class="fc-id15 fc-widget-header" style="width: 13px;">Mon 3/18<br>
                            Week 12</th>
                        <th class="fc-id16 fc-widget-header" style="width: 13px;">Tue 3/19</th>
                        <th class="fc-id17 fc-widget-header" style="width: 13px;">Wed 3/20</th>
                        <th class="fc-id18 fc-widget-header" style="width: 13px;">Thu 3/21</th>
                        <th class="fc-id19 fc-widget-header" style="width: 13px;">Fri 3/22</th>
                        <th class="fc-id20 fc-widget-header" style="width: 13px;">Mon 3/25<br>
                            Week 13</th>
                        <th class="fc-id21 fc-widget-header" style="width: 13px;">Tue 3/26</th>
                        <th class="fc-id22 fc-widget-header" style="width: 13px;">Wed 3/27</th>
                        <th class="fc-id23 fc-widget-header" style="width: 13px;">Thu 3/28</th>
                        <th class="fc-id24 fc-widget-header" style="width: 13px;">Fri 3/29</th>
                        <th class="fc-id25 fc-widget-header" style="width: 13px;">Mon 4/1<br>
                            Week 14</th>
                        <th class="fc-id26 fc-widget-header" style="width: 13px;">Tue 4/2</th>
                        <th class="fc-id27 fc-widget-header" style="width: 13px;">Wed 4/3</th>
                        <th class="fc-id28 fc-widget-header" style="width: 13px;">Thu 4/4</th>
                        <th class="fc-id29 fc-widget-header" style="width: 13px;">Fri 4/5</th>
                        <th class="fc-id30 fc-widget-header" style="width: 13px;">Mon 4/8<br>
                            Week 15</th>
                        <th class="fc-id31 fc-widget-header" style="width: 13px;">Tue 4/9</th>
                        <th class="fc-id32 fc-widget-header" style="width: 13px;">Wed 4/10</th>
                        <th class="fc-id33 fc-widget-header" style="width: 13px;">Thu 4/11</th>
                        <th class="fc-id34 fc-widget-header" style="width: 13px;">Fri 4/12</th>
                        <th class="fc-id35 fc-widget-header" style="width: 13px;">Mon 4/15<br>
                            Week 16</th>
                        <th class="fc-id36 fc-widget-header" style="width: 13px;">Tue 4/16</th>
                        <th class="fc-id37 fc-widget-header" style="width: 13px;">Wed 4/17</th>
                        <th class="fc-id38 fc-widget-header" style="width: 13px;">Thu 4/18</th>
                        <th class="fc-id39 fc-widget-header" style="width: 13px;">Fri 4/19</th>
                        <th class="fc-id40 fc-widget-header" style="width: 13px;">Mon 4/22<br>
                            Week 17</th>
                        <th class="fc-id41 fc-widget-header" style="width: 13px;">Tue 4/23</th>
                        <th class="fc-id42 fc-widget-header" style="width: 13px;">Wed 4/24</th>
                        <th class="fc-id43 fc-widget-header" style="width: 13px;">Thu 4/25</th>
                        <th class="fc-id44 fc-widget-header" style="width: 13px;">Fri 4/26</th>
                        <th class="fc-id45 fc-widget-header" style="width: 13px;">Mon 4/29<br>
                            Week 18</th>
                        <th class="fc-id46 fc-widget-header" style="width: 13px;">Tue 4/30</th>
                        <th class="fc-id47 fc-widget-header" style="width: 13px;">Wed 5/1</th>
                        <th class="fc-id48 fc-widget-header" style="width: 13px;">Thu 5/2</th>
                        <th class="fc-id49 fc-widget-header" style="width: 13px;">Fri 5/3</th>
                        <th class="fc-id50 fc-widget-header" style="width: 13px;">Mon 5/6<br>
                            Week 19</th>
                        <th class="fc-id51 fc-widget-header" style="width: 13px;">Tue 5/7</th>
                        <th class="fc-id52 fc-widget-header" style="width: 13px;">Wed 5/8</th>
                        <th class="fc-id53 fc-widget-header" style="width: 13px;">Thu 5/9</th>
                        <th class="fc-id54 fc-widget-header" style="width: 13px;">Fri 5/10</th>
                        <th class="fc-id55 fc-widget-header" style="width: 13px;">Mon 5/13<br>
                            Week 20</th>
                        <th class="fc-id56 fc-widget-header" style="width: 13px;">Tue 5/14</th>
                        <th class="fc-id57 fc-widget-header" style="width: 13px;">Wed 5/15</th>
                        <th class="fc-id58 fc-widget-header" style="width: 13px;">Thu 5/16</th>
                        <th class="fc-id59 fc-widget-header" style="width: 13px;">Fri 5/17</th>
                        <th class="fc-id60 fc-widget-header" style="width: 13px;">Mon 5/20<br>
                            Week 21</th>
                        <th class="fc-id61 fc-widget-header" style="width: 13px;">Tue 5/21</th>
                        <th class="fc-id62 fc-widget-header" style="width: 13px;">Wed 5/22</th>
                        <th class="fc-id63 fc-widget-header" style="width: 13px;">Thu 5/23</th>
                        <th class="fc-id64 fc-widget-header" style="width: 13px;">Fri 5/24</th>
                        <th class="fc-id65 fc-widget-header" style="width: 13px;">Mon 5/27<br>
                            Week 22</th>
                        <th class="fc-id66 fc-widget-header" style="width: 13px;">Tue 5/28</th>
                        <th class="fc-id67 fc-widget-header" style="width: 13px;">Wed 5/29</th>
                        <th class="fc-id68 fc-widget-header" style="width: 13px;">Thu 5/30</th>
                        <th class="fc-id69 fc-widget-header" style="width: 13px;">Fri 5/31</th>
                        <th class="fc-id70 fc-widget-header" style="width: 13px;">Mon 6/3<br>
                            Week 23</th>
                        <th class="fc-id71 fc-widget-header" style="width: 13px;">Tue 6/4</th>
                        <th class="fc-id72 fc-widget-header" style="width: 13px;">Wed 6/5</th>
                        <th class="fc-id73 fc-widget-header" style="width: 13px;">Thu 6/6</th>
                        <th class="fc-id74 fc-widget-header fc-last">Fri 6/7</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="fc-week114 fc-first" style="">
                        <td class="fc-resourceName">Josh Larouche</td>
                        <td class="fc-id0 fc-widget-content fc-day0 fc-resource114 fc-first">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative; height: 0px;">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id1 fc-widget-content fc-day1 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id2 fc-widget-content fc-day2 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id3 fc-widget-content fc-day3 fc-resource114 fc-state-highlight fc-today">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id4 fc-widget-content fc-day4 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id5 fc-widget-content fc-day5 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id6 fc-widget-content fc-day6 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id7 fc-widget-content fc-day7 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id8 fc-widget-content fc-day8 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id9 fc-widget-content fc-day9 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id10 fc-widget-content fc-day10 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id11 fc-widget-content fc-day11 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id12 fc-widget-content fc-day12 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id13 fc-widget-content fc-day13 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id14 fc-widget-content fc-day14 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id15 fc-widget-content fc-day15 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id16 fc-widget-content fc-day16 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id17 fc-widget-content fc-day17 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id18 fc-widget-content fc-day18 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id19 fc-widget-content fc-day19 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id20 fc-widget-content fc-day20 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id21 fc-widget-content fc-day21 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id22 fc-widget-content fc-day22 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id23 fc-widget-content fc-day23 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id24 fc-widget-content fc-day24 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id25 fc-widget-content fc-day25 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id26 fc-widget-content fc-day26 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id27 fc-widget-content fc-day27 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id28 fc-widget-content fc-day28 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id29 fc-widget-content fc-day29 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id30 fc-widget-content fc-day30 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id31 fc-widget-content fc-day31 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id32 fc-widget-content fc-day32 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id33 fc-widget-content fc-day33 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id34 fc-widget-content fc-day34 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id35 fc-widget-content fc-day35 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id36 fc-widget-content fc-day36 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id37 fc-widget-content fc-day37 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id38 fc-widget-content fc-day38 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id39 fc-widget-content fc-day39 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id40 fc-widget-content fc-day40 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id41 fc-widget-content fc-day41 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id42 fc-widget-content fc-day42 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
                        <td class="fc-id43 fc-widget-content fc-day43 fc-resource114">
                            <div>
                                <div class="fc-day-content">
                                    <div style="position: relative">&nbsp;</div>
                                </div>
                            </div>
                        </td>
        </tr>
        </tbody></table>
        <div style="position: absolute; z-index: 8; top: 0; left: 0">
            <div class="fc-event fc-event-skin fc-event-hori fc-event-draggable fc-corner-left fc-corner-right" style="position: absolute; z-index: 8; left: 187px; background-color: rgb(255, 0, 0); border-color: rgb(255, 0, 0); width: 83px; top: 603px;">
                <div class="fc-event-inner fc-event-skin" style="background-color: rgb(255,0,0); border-color: rgb(255,0,0)"><span class="fc-event-time">10:30a</span><span class="fc-event-title" style="background-color: rgb(255,0,0); border-color: rgb(255,0,0)">Meeting</span></div>
                <div class="ui-resizable-handle ui-resizable-e">&nbsp;&nbsp;&nbsp;</div>
            </div>
            <div class="fc-event fc-event-skin fc-event-hori fc-event-draggable fc-corner-right" style="position: absolute; z-index: 8; left: 83px; width: 66px; top: 603px;">
                <div class="fc-event-inner fc-event-skin"><span class="fc-event-title">Long Event</span></div>
                <div class="ui-resizable-handle ui-resizable-e">&nbsp;&nbsp;&nbsp;</div>
            </div>
        </div>
    </div>
</div>
</div> 
```

不幸的是，这些类中的很多都对样式没有用处。

以下是我想做的几件事： 我希望每个星期一都被突出显示，但是没有班级知道这是星期一，day35 或 day37 对我来说意义不大。

我希望修复 Resources 列，但是，根据它的构建方式，我不确定这是可能的。

任何人都可以对我如何提出解决方案有任何见解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:43:47.837

最好从 php 或 javascript 动态生成它，但鉴于这种情况，我可能只是为星期一添加一个类。

```
<th class="monday, fc-id20 fc-widget-header" style="width: 13px;">Mon 3/25<br>Week 13</th> 
```

您拥有的那个源代码使用了一些不好的做法（不使用`<br />`, 内联样式）。

然后`.monday`在 CSS 中突出显示该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:43:05.033

正如 Jan 在评论中建议的那样，您必须自己搜索它。你可以如何做到这一点如下：

*   首先，找到有问题的合适的表。
*   然后找到所有`th`元素（这就是日期部分所在的位置）
*   然后将这些元素过滤为仅包含文本的元素`Mon`
*   然后为这些元素添加一个类

[http://jsfiddle.net/6YfKg/](http://jsfiddle.net/6YfKg/)

```
$(function()
  {
      $('#calendar .fc-view-resourceNextWeeks thead th')
          .filter(function()
                  {
                      if($(this).text().indexOf('Mon ') == 0) return true;

                      return false;
                  })
          .addClass('monday');
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:41:52.440

好吧，从我读过的内容来看，您将不得不编辑 fullCalendar 的源代码。这个话题已经在网络上讨论过了：有 [什么方法可以为 FullCalendar 中的特定日期着色？](https://stackoverflow.com/questions/2533240/any-way-to-colorize-specific-days-in-fullcalendar) [https://code.google.com/p/fullcalendar/issues/detail?id=191](https://code.google.com/p/fullcalendar/issues/detail?id=191)

从简单的 css 视图来看，如果每天都没有共同的指标，就没有优雅的方式来处理它

# vb.net - 如何使用 vb.net 保存 excel 文件？

> ID：15144097
> 
> 赞同：0
> 
> 时间：2013-02-28T19:33:45.580
> 
> 标签：vb.net, excel, vba

每当我尝试在 vb 中保存 excel 时，我都会遇到此错误。请有人帮助我这段代码有什么问题：

```
 xlWorkBook = xlApp.Workbooks.Add
        xlWorkSheet = xlWorkBook.Sheets("Sheet1")
        xlWorkBook.SaveAs(Filename:="C:\Users\PB\Documents\thesis\bookrecord", FileFormat:="xlCSV")
        xlApp.Visible = True 
```

保存语句从 HRESULT 获取错误异常：0x800A03EC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:03:20.643

我使用文件格式的枚举类型做了一个简单的测试，它创建的文件没有错误。如果这不起作用，请显示更多您的代码：

```
 xlWorkBook.SaveAs(Filename:="C:\Users\PB\Documents\thesis\bookrecord", FileFormat:=XlFileFormat.xlCSV) 
```

# android - 使用 Facebook SDK 上传照片时出错

> ID：15144102
> 
> 赞同：2
> 
> 时间：2013-02-28T19:34:11.703
> 
> 标签：android, facebook, android-facebook

[这与使用 Facebook Android SDK 3.0 上传照片时](https://stackoverflow.com/q/14162223/758458)出现的间歇性 SSL 错误类似，但该问题没有回复，我想在问题中提供更多详细信息。

我正在尝试使用以下代码将照片上传到用户的 Facebook 帐户：

```
ArrayList<Request> requests = new ArrayList<Request>();
for (String id : ids) {
    Uri uri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id);
    Bitmap b;
    try {
        b = MediaStore.Images.Media.getBitmap(getContentResolver(), uri);
    } catch (FileNotFoundException e) {
        Log.e(LOG_TAG, "Error uploading photo to facebook", e);
        return;
    } catch (IOException e) {
        Log.e(LOG_TAG, "Error uploading photo to facebook", e);
        return;
    }
    if (b != null) {
        requests.add(Request.newUploadPhotoRequest(FacebookLoginHelper.getInstance().getActiveSession(), b,
                null));
    }
}
List<Response> responses = Request.executeBatchAndWait(requests);
for (Response response : responses) {
    if (response.getError() == null) {
        Log.w(LOG_TAG, "Successfully uploaded image");
    } else {
        Log.w(LOG_TAG, "Error uploading image: " + response.getError().getErrorMessage());
    }
} 
```

我收到此错误：

```
02-28 11:26:52.936: W/System.err(5848): javax.net.ssl.SSLException: Write error:        ssl=0x72be0428: I/O error during system call, Broken pipe
02-28 11:26:52.936: W/System.err(5848):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_write(Native Method)
02-28 11:26:52.936: W/System.err(5848):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLOutputStream.write(OpenSSLSocketImpl.java:706)
02-28 11:26:52.936: W/System.err(5848):     at libcore.net.http.ChunkedOutputStream.writeHex(ChunkedOutputStream.java:102)
02-28 11:26:52.936: W/System.err(5848):     at libcore.net.http.ChunkedOutputStream.writeBufferedChunkToSocket(ChunkedOutputStream.java:128)
02-28 11:26:52.946: W/System.err(5848):     at libcore.net.http.ChunkedOutputStream.write(ChunkedOutputStream.java:77)
02-28 11:26:52.946: W/System.err(5848):     at java.io.BufferedOutputStream.flushInternal(BufferedOutputStream.java:185)
02-28 11:26:52.946: W/System.err(5848):     at java.io.BufferedOutputStream.write(BufferedOutputStream.java:139)
02-28 11:26:52.946: W/System.err(5848):     at android.graphics.Bitmap.nativeCompress(Native Method)
02-28 11:26:52.946: W/System.err(5848):     at android.graphics.Bitmap.compress(Bitmap.java:875)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request$Serializer.writeBitmap(Request.java:1688)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request$Serializer.writeObject(Request.java:1666)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request.serializeAttachments(Request.java:1569)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request.serializeToUrlConnection(Request.java:1467)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request.toHttpConnection(Request.java:933)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request.executeBatchAndWait(Request.java:1027)
02-28 11:26:52.946: W/System.err(5848):     at com.facebook.Request.executeBatchAndWait(Request.java:1003)
02-28 11:26:52.946: W/System.err(5848):     at com.mycompany.mypackage.services.FacebookPhotoUploadService.onHandleIntent(FacebookPhotoUploadService.java:50)
02-28 11:26:52.946: W/System.err(5848):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
02-28 11:26:52.946: W/System.err(5848):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 11:26:52.946: W/System.err(5848):     at android.os.Looper.loop(Looper.java:137)
02-28 11:26:52.946: W/System.err(5848):     at android.os.HandlerThread.run(HandlerThread.java:60)
02-28 11:26:52.946: D/skia(5848): ------- write threw an exception
02-28 11:26:52.946: W/com.mycompany.mypackage.services.FacebookPhotoUploadService(5848): Error uploading image: com.facebook.FacebookException: could not construct request body 
```

我确定的事情：

*   我在请求中发送的位图是有效的
*   我已通过活动会话正确登录 Facebook

在大约 15 或 20 次尝试中，我能够让它成功运行两次（通过在我的浏览器中访问 Facebook 并在那里查看图像来验证）。

我认为这并不重要，但这发生`onHandleIntent()`在`IntentService`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:07:00.820

我找到了解决这个问题的方法，它涉及绕过 Facebook SDK 并自己进行 HTTP 调用。详情在这里：[https ://stackoverflow.com/a/15260387/758458](https://stackoverflow.com/a/15260387/758458)

# android - Android - 将字符串传递给 Asynctask？

> ID：15144103
> 
> 赞同：1
> 
> 时间：2013-02-28T19:34:18.567
> 
> 标签：android, string, android-asynctask, parameter-passing

*与我之前关于 ANR 问题的问题有关（[Android - Strings.xml 与文本文件。哪个更快？](https://stackoverflow.com/questions/15135371/android-strings-xml-versus-text-files-which-is-faster)）。*

我尝试按照受访者的建议使用 AsyncTask，但我现在不知所措。

我需要将一个字符串从我的菜单活动传递给 Asynctask，但这真的让我很困惑。我已经搜索和学习了 5 个小时，但仍然无法做到。

这是我的代码片段：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    /** Create an option menu from res/menu/items.xml */
    getMenuInflater().inflate(R.menu.items, menu);

    /** Get the action view of the menu item whose id is search */
    View v = (View) menu.findItem(R.id.search).getActionView();

    /** Get the edit text from the action view */
    final EditText txtSearch = ( EditText ) v.findViewById(R.id.txt_search);

    /** Setting an action listener */
    txtSearch.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

            final EditText txtSearch = ( EditText ) v.findViewById(R.id.txt_search);
            String enhancedStem = txtSearch.getText().toString();
            TextView databaseOutput = (TextView)findViewById(R.id.textView8);

            new AsyncTaskRunner().execute();
            // should I put "enhancedStem" inside execute?
            }
          });
return super.onCreateOptionsMenu(menu);
} 
```

这是异步部分：已**更新**

```
public class AsyncTaskRunner extends AsyncTask<String, String, String> {
      String curEnhancedStem;
      private ProgressDialog pdia;

      public AsyncTaskRunner (String enhancedStem)
      {
           this.curEnhancedStem = enhancedStem;
      }

      @Override
      protected void onPreExecute() {
       // Things to be done before execution of long running operation. For
       // example showing ProgessDialog
          super.onPreExecute();
          pdia = ProgressDialog.show(secondactivity.this, "" , "Searching for words");
      }

    @Override
    protected String doInBackground(String... params) {

        if(curEnhancedStem.startsWith("a"))
        {
            String[] wordA = getResources().getStringArray(R.array.DictionaryA);
            String delimiter = " - ";
            String[] del;
            TextView databaseOutput1 = (TextView)findViewById(R.id.textView8);
            for (int wordActr = 0; wordActr <= wordA.length - 1; wordActr++)
            {
                String wordString = wordA[wordActr].toString();
                del = wordString.split(delimiter);

                if (curEnhancedStem.equals(del[0]))
                {
                    databaseOutput1.setText(wordA[wordActr]);
                    pdia.dismiss();
                    break;
                }
                else
                    databaseOutput1.setText("Word not found!");
            }
        }

       return null;
      } 

      @Override
      protected void onProgressUpdate(String... text) {
       // Things to be done while execution of long running operation is in
       // progress. For example updating ProgessDialog

      }

      @Override
      protected void onPostExecute(String result) {
       // execution of result of Long time consuming operation
      }
} 
```

检索现在有效。我看到它显示正在寻找的单词，但它突然终止了。也许是因为，就像你提到的那样，UI 的东西应该在执行后完成。如果是这种情况，我应该在 doInBackground() 部分返回什么，然后传递 onPostExecute()？

（非常感谢大家！我现在已经接近正常工作了！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:41:00.033

这就是问题所在，它们对于您在其中声明它们的方法是本地的，然后您正在声明一个`AsyncTask`无权访问它们的类。如果`AsyncTask`是菜单活动的内部类，那么您可以将它们声明为成员变量。

```
public class MenuActivity extends Activity
{
     String enhancedStem;
     .... 
```

如果它是一个单独的类，那么您可以在您的`Async`类中创建一个构造函数并将变量传递给构造函数。

```
public class AsyncTaskRunner extends AsyncTask<String, String, String> {
  String curEnhancedStem;
  private ProgressDialog pdia;

  public void AsyncTaskRunner (String variableName)
{
     this.curEnhancedStem = variableName;
} 
```

并称它为

```
 AsyncTaskRunner newTask = new AsyncTaskRunner(enhancedStem);
 newTask.execute(); 
```

此外，您不能在其中做任何`UI`事情，`doInBackground`因此需要在`Activity`类或类中的其他方法之一中进行更改，`Async`例如`onPostExecute()`它是否是内部类。否则，您可以将值传递回菜单活动以更新您的`TextView`

**编辑**

您仍在尝试使用此方法`UI`进行更改`doInBackground()`

```
TextView databaseOutput1 = (TextView)findViewById(R.id.textView8); 
```

然后当你打电话时`setText()`。这需要放入您的文件中`onPostExecute()`，但随后您需要将您的引用传递`TextView`给`AsyncTask`. 您可以将`String`您想要将文本设置为 from your 的内容传回并将其`onPostExecute()`设置在您的`Activity`. 希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:46:08.487

1.  `AsyncTaskRunner`为您的类创建一个构造函数。
2.  将 a `Context`（您的活动上下文）和`databaseOutput` `TextView`as 参数都传递给您的`AsyncTaskRunner`类构造函数。
3.  将这两个对象的引用保存在`AsyncTaskRunner`.
4.  传递`enhancedStem`给`execute()`方法。
5.  使用`Context`您传递给构造函数的第一个参数`ProgessDialog.show()`
6.  您无法`databaseOutput`从该`doInBackground()`方法访问。您只能`onPostExecute()`在 UI 线程上运行的 中访问它。因此，使用`databseOutput`您传递给构造函数的引用来相应地更新`onPostExecute()`方法中的 TextView。

请注意，您从该`doInBackground()`方法返回的任何内容都将作为该方法的参数提供给您`onPostExecute()`。

请参考[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

我建议您传递所需的数据，而不是使用封闭类访问它 - 这使您`ASyncTaskRunner`更加灵活，并且通常是更好的做法。

# vb.net - VB.NET 如何提供最佳性能“选择案例”或 IF... ELSEIF ... ELSE... END IF

> ID：15144104
> 
> 赞同：7
> 
> 时间：2013-02-28T19:34:25.113
> 
> 标签：vb.net, performance, if-statement, switch-statement, cycle

我有一个巨大的数据表，我需要遍历每一行并验证一个特定的值。

哪种方法给我更多的性能，IF ELSE 或 SELECT CASE 的结构？（我专注于为我提供最佳性能的方法）

否则（方法 #1）

```
For Each vRow In vDTtemp.Rows
    If vRow("Item") = "Time" Then
        vRow("Result") = "000"
    ElseIf vRow("Item") = "DateTime" Then
        vRow("Result") = "001"
    ElseIf vRow("Item") = "String" Then
        vRow("Result") = "002"
    Else
        vRow("Result") = "N/A"
    End If
Next 
```

选择案例（方法#2）

```
For Each vRow In vDTtemp.Rows
    Select Case vRow("Item")
        Case "Time"
            vRow("Result") = "000"
        Case "DateTime"
            vRow("Result") = "001"
        Case "String"
            vRow("Result") = "002"
        Case Else
            vRow("Result") = "N/A"
    End Select
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:04:22.030

没有区别，两种代码样式都会生成完全相同的 IL。通过在已编译的程序集上运行 ildasm.exe 工具可以看到一些内容。

通常，VB.NET 编译器*确实*会努力优化 Select 语句。当它使用简单的值类型作为选择器和平凡的 Case 语句时，这将起作用。生成的代码将使用专用的 IL 指令[Opcodes.Switch](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.switch%28v=VS.80%29.aspx)。它将被编译为使用查找表的机器代码。非常快。

但是，当您使用字符串表达式作为选择器时，这不起作用。为那个创建一个查找表需要相当于一个代表字典。这影响太大了，编译器只能将每个 case 语句转换为等效的 If 语句。但是，您可以通过在代码中创建此 Dictionary 来轻松优化它，因为字典键和值只是简单的字符串，因此很容易做到。你没有足够的箱子，而且琴弦太短，无法让这主要得到回报，尽管值得一试。它当然可以压缩你的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-20T14:18:22.263

在过去的几天里，我花了很多时间来解决同样的问题，并且找到了一种比其他方法快得多的方法。我也发现在字符串变量上使用 Select Case 等同于一系列 If/Else If 语句，而且两者都慢得令人失望。

但是，以下技术效果很好，并且将时间减少了 50% 以上。而不是原始代码：

```
For Each vRow In vDTtemp.Rows
    Select Case vRow("Item")
        Case "Time"
            vRow("Result") = "000"
        Case "DateTime"
            vRow("Result") = "001"
        Case "String"
            vRow("Result") = "002"
        Case Else
            vRow("Result") = "N/A"
    End Select
Next 
```

更改它以打开一个简单的布尔值，并使用 String.Equals 方法，如下所示：

```
For Each vRow In vDTtemp.Rows
    'Read out the row value so we only need to access the datarow once
    rowValue = vRow("Item")
    'Which of these statements is true?
    Select Case True
        Case rowValue.Equals("Time")
            vRow("Result") = "000"
        Case rowValue.Equals("DateTime")
            vRow("Result") = "001"
        Case rowValue.Equals("String")
            vRow("Result") = "002"
        Case Else
            vRow("Result") = "N/A"
    End Select
Next 
```

通过以这种方式接近它，我已经有了显着的改进，在一种情况下，我的代码从 100,000 次迭代循环中的 1.3 秒减少到 0.5 秒。如果这是在一个真正经常被称为时间关键的代码部分，那可能会产生很大的不同。

然而，正如在下面的评论中指出的那样，这会执行字符串的“序数”比较，如果使用非英语语言环境，这可能不会导致预期的行为（请参阅评论以获取示例）。

亚当。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-01T15:47:03.993

好的......这篇文章很久以前了，但现在我正在搜索相同的问题，我可以为此添加新的优化。现在我选择使用选择案例，以便更具可读性。另一方面，当“Dim”在 for-next 循环中时，性能会下降很多。

```
 For Each vRow In vDTtemp.Rows
------->  Dim rowItem = vRow("Item")
        If rowItem = "Time" Then
            vRow("Result") = "000"
        ElseIf rowItem = "DateTime" Then
            vRow("Result") = "001"
        ElseIf rowItem = "String" Then
            vRow("Result") = "002"
        Else
            vRow("Result") = "N/A"
        End If
    Next 
```

即使您想使用 if-then 结构，当 dim 处于 oitside 时也会快得多：

```
------->     Dim rowItem as string
             For Each vRow In vDTtemp.Rows
------->            rowitem= vRow("Item")
                If rowItem = "Time" Then
                    vRow("Result") = "000"
                ElseIf rowItem = "DateTime" Then
                    vRow("Result") = "001"
                ElseIf rowItem = "String" Then
                    vRow("Result") = "002"
                Else
                    vRow("Result") = "N/A"
                End If
            Next 
```

我希望这对更多人有帮助；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T21:00:53.837

如果您真的发现这是您的性能瓶颈，您可以尝试修改 If..Then 子句，如下所示仅访问索引器一次：

```
For Each vRow In vDTtemp.Rows
    Dim rowItem = vRow("Item")
    If rowItem = "Time" Then
        vRow("Result") = "000"
    ElseIf rowItem = "DateTime" Then
        vRow("Result") = "001"
    ElseIf rowItem = "String" Then
        vRow("Result") = "002"
    Else
        vRow("Result") = "N/A"
    End If
Next 
```

话虽如此，我怀疑这些都是过度优化的案例。编译器应该在这里做最好的事情。如果您从一个较长的 Select Case 中检查 IL，您可能会发现它在“goto”的封面下使用了一串 If..then 子句来转义其余子句。您最好的选择是获得最可维护的代码，因为您可能获得的性能优势将被您在 if..then 和 select case 之间看到的最小提升所抵消。

# javascript - JavaScript。如何仅禁用垂直滚动？

> ID：15144105
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:25.877
> 
> 标签：javascript, uiscrollview, scroll

此代码禁用所有滚动：

```
document.ontouchmove = function(event) {
    event.preventDefault();
} 
```

但是如何只禁用垂直滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:54:24.447

你有没有尝试过

```
yourdiv.onscroll = function(){
this.scrollTop = 0;
this.scrollLeft = 0;
} 
```

当然这可能仍然显示滚动条，最好使用 css

# visual-studio-2010 - Visual Studio C++ - “CLR”和“General”类别有什么区别？

> ID：15144106
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:28.813
> 
> 标签：visual-studio-2010, visual-studio

假设我正在制作一个新的空白项目。

“CLR 空项目”和“空项目”有什么区别？

我正在使用 Visual Studio Express 2010，但我认为这个问题比一个版本更深入。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:38:31.673

如果您创建一个空项目，C++ 项目的初始设置将使得生成的二进制文件将是“本机”代码，具体取决于您选择的处理器。如果您创建一个 CLR 空项目，则生成的二进制文件将是一个 CLR 二进制文件，使用 MSIL 而不是机器语言。根据您将如何使用二进制文件，您需要选择适当的类型。

# sql-server-2008 - INSERT INTO 动态添加的列

> ID：15144107
> 
> 赞同：2
> 
> 时间：2013-02-28T19:34:31.703
> 
> 标签：sql-server-2008, sql-server-2005

运行 SQL Server 2005/2008，我正在重写我的查询，使其更清晰、更合规，不包括坏习惯。我曾经有很多`IF`陈述并`PIVOT`做到这一点，但现在找到了一种更好的方法来实现它，只需要最后一点让它几乎完美。

```
DECLARE @startdate DATETIME;
DECLARE @enddate DATETIME;
DECLARE @showstore INT;
DECLARE @showcashier INT;
DECLARE @showregister INT;
DECLARE @showdate INT;
DECLARE @sql NVARCHAR(MAX);
DECLARE @result0 NVARCHAR(MAX);

SET @startdate = '1/1/2012';
SET @enddate = '2/28/2013';
SET @showdate = 1;
SET @showstore = 0;
SET @showcashier = 1;
SET @showregister = 0;
SET @startdate = DATEADD(DAY, DATEDIFF(DAY, 0, @startdate), 0);
SET @enddate = DATEADD(DAY, DATEDIFF(DAY, 0, @enddate), 0);

SET @sql = N'CREATE TABLE ##a13 (' + SUBSTRING(
CASE WHEN @showdate = 1 THEN ',[Transaction Date] DATETIME' ELSE '' END + 
CASE WHEN @showstore = 1 THEN ',[Store ID] VARCHAR(10)' ELSE '' END + 
CASE WHEN @showcashier = 1 THEN ',[Cashier] VARCHAR(100)' ELSE '' END + 
CASE WHEN @showregister = 1 THEN ',[Register] VARCHAR(20)' ELSE '' END, 2, 2000);

DECLARE myCursor CURSOR FOR
    SELECT DISTINCT c.CurrencyDesc 
    FROM dbo.Currencies AS c INNER JOIN dbo.rpPay AS p ON c.POSCurrency = p.PayType 
        INNER JOIN dbo.RPTrs AS r ON r.ReceiptNO = p.ReceiptNo
    WHERE
        c.CurrencyDesc <> 'Testing' AND c.CurrencyDesc <> 'Cash Change' AND
        r.TRSDate >= @startdate AND r.TRSDate <= @enddate
OPEN myCursor
FETCH NEXT FROM myCursor INTO @result0
WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @sql = @sql + ',[' + @result0 + '] INT'
        FETCH NEXT FROM myCursor INTO @result0
    END
CLOSE myCursor
DEALLOCATE myCursor

SET @sql = @sql + ')'
EXECUTE sp_executesql @sql, N'@startdate DATETIME, 
    @enddate DATETIME',@startdate, @enddate;

SET @sql = 'SELECT * FROM ##a13; DROP TABLE ##a13'
EXECUTE sp_executesql @sql 
```

这将返回一个没有行的表。（知道 Currencies 表有更多 CurrencyDesc 然后显示在此处，因为这些只是在提供的日期范围内使用的那些）

![在此处输入图像描述](../Images/88d026449807935a8866e0e71cf6d122.png)

这正是我对它的期望。到目前为止很好。现在我需要根据日期范围 ( `@startdate >= and <= @enddate`) 并根据他们从 4 个可能的选项 ( `@showstore, @showcashier, @showdate, @showregister`)

示例：日期从 2013 年 1 月 1 日到 2013 年 2 月 28 日，仅显示寄存器（如图所示）应具有以下数据：

```
 | Register | Cash  | House Acct | MasterCard | Visa/MC
--------------------------------------------------------
1 | 01       | 20.00 | 235.25     | 1235.32    | 135.23
2 | 02       | 30.00 | 3542.42    | 323.52     | 523.64
3 | 03       | 23.35 | 100.32     | 3267.24    | 235.25 
```

2005/2008 的原因是因为执行此操作的一些客户端仍然使用 2005，为了使用`PIVOT`我必须更改每个数据库的兼容性级别，即 2005。

PS。在我再次被大喊大叫之前，如果我使用 #a13 而不是全局 ##a13 它会给我

```
Msg 208, Level 16, State 0, Line 1
Invalid object name '#a13'. 
```

我该怎么做才能不使用全局临时表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T19:52:06.367

如果我在这里不正确，请澄清。

我相信您在问如何根据用户输入使用动态列填充表。这里的**正确**答案是，**不要那样做！**

这种事情的最佳实践是在输出表中包含所有字段，然后在您的应用程序/显示层中，您只显示用户请求的字段。

在 TSQL 中自定义表格布局只是为了进行简洁的表示会引入很多不必要的复杂性。这种复杂性也伴随着性能成本的增加。

如果您有一个静态输出表，那么使用给定的参数返回您的数据是微不足道的。

# php - laravel - 向新注册的验证添加消息

> ID：15144110
> 
> 赞同：1
> 
> 时间：2013-02-28T19:34:37.007
> 
> 标签：php, validation, laravel

在我所在的服务器没有启用 FILE_INFO 之后，我需要一种快速验证 Word 文档的方法。

```
Validator::register( 'word', function( $attribute, $value, $parameters )
{

    $valid_type = array(
        'application/msword',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    );

    $valid_extentions = array(
        'doc',
        'docx'
    );

    if( ! is_array( $value ) )
    {
        return false;
    }

    if( ! isset( $value['type'] ) )
    {
        return false;
    }

    if( ! in_array( strtolower( $value['type'] ), $valid_type ) )
    {
        return false;
    }

    if( ! in_array( strtolower( substr( strrchr( $value['name'], '.' ) , 1 ) ), $valid_extentions ) )
    {
        return false;
    }

    return true;

}); 
```

我知道这不是防弹的，但现在会做（如果你有任何建议，请添加）但是我如何为此添加一条消息，因为它目前返回

```
validation.word 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-07T18:25:36.623

要使**消息**全局化，请将其添加到主数组中的*/app/lang/en/validation.php*中的“url”之后，如下所示

```
<?php
return array(
    //...
    "url"              => "The :attribute format is invalid.",
    "word"             => "The document must be a Microsoft Word-file.",
//.. 
```

要使**自定义验证规则**全局使用，请使用*/app/validators.php*并添加如下内容：

```
<?php

class CustomValidator extends Illuminate\Validation\Validator
{
    //validate foo_bar
    public function validateFooBar($attribute, $value, $parameters)
    {
        return ($value == 'foobar');
    }
}

Validator::resolver(function($translator, $data, $rules, $messages)
{
    return new CustomValidator($translator, $data, $rules, $messages);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:05:12.127

您必须定义一个新的验证规则和消息。

自定义规则如下所示：

```
$rules = array(
    'input_file' => 'required|word',
); 
```

消息如下所示：

```
$messages = array(
    'word' => 'The document must be .doc!',
); 
```

最后，您必须使用规则和消息调用您的验证器：

```
$validator = Validator::make(Input::get(), $rules, $messages); 
```

查看官方文档[自定义验证](http://laravel.com/docs/validation#custom-validation-rules)

# javascript - 地理定位在手机上不起作用

> ID：15144111
> 
> 赞同：1
> 
> 时间：2013-02-28T19:34:44.730
> 
> 标签：javascript, android, mobile, geolocation

我有一个简单的 JavaScript 代码，可以获取用户坐标，在计算机上运行良好，但在手机上却不能这么说。

```
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
} 
```

从 w3schools 得到这个。第一次询问我是否想分享我的位置（同意），当我按下按钮执行该功能时，什么也没有发生（也没有错误消息），在我的电脑上工作，所以它不是代码。尝试了 2 种不同的设备：galaxy nexus 和galaxy s2 都是软糖。尝试了 chrome、chrome beta、firefox 和内置浏览器。在其中一些上，它甚至不需要弹出“共享位置”消息。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:58:50.603

我以前也遇到过这个问题，我认为无法*强制*共享位置，您至少必须提示用户是否要打开位置服务。但是，[这里](https://stackoverflow.com/questions/3470693/android-get-location-or-prompt-to-enable-location-service-if-disabled)有一个线程详细说明了如何提示 android 用户打开共享位置。另外，我会避免使用 w3schools。

良好的地理定位应用程序： [http ://www.9lessons.info/2011/06/geo-location-with-html5-and-jquery.html](http://www.9lessons.info/2011/06/geo-location-with-html5-and-jquery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T13:20:35.817

Html5 地理定位需要用户许可。如果您不想要这个，请使用外部定位器，例如[https://www.geoip-db.com](https://www.geoip-db.com)他们提供 JSON 和 JSONP 回调解决方案。

*   JSON：[https ://geoip-db.com/json/](https://geoip-db.com/json/)
*   JSONP 回调：[https ://geoip-db.com/json/geoip.php?jsonp=callback](https://geoip-db.com/json/geoip.php?jsonp=callback)

一个普通的javascript示例：

```
<!DOCTYPE html>
<html>
<head>
<title>Geo City Locator by geoip-db.com</title>
</head>
<body>
    <div>Country: <span id="country"></span></div>
    <div>State: <span id="state"></span></div>
    <div>City: <span id="city"></span></div>
    <div>Postal: <span id="postal"></span></div>
    <div>Latitude: <span id="latitude"></span></div>
    <div>Longitude: <span id="longitude"></span></div>
    <div>IP address: <span id="ipv4"></span></div>                             
</body>

<script>

    var country = document.getElementById('country');
    var state = document.getElementById('state');
    var city = document.getElementById('city');
    var postal = document.getElementById('postal');
    var latitude = document.getElementById('latitude');
    var longitude = document.getElementById('longitude');
    var ip = document.getElementById('ipv4');

    function callback(data)
    {
        country.innerHTML = data.country_name;
        state.innerHTML = data.state;
        city.innerHTML = data.city;
        postal.innerHTML = data.postal;
        latitude.innerHTML = data.latitude;
        longitude.innerHTML = data.longitude;
        ip.innerHTML = data.IPv4;
    }

    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://geoip-db.com/json/geoip.php?jsonp=callback';
    var h = document.getElementsByTagName('script')[0];
    h.parentNode.insertBefore(script, h);

</script> 
</html> 
```

# haskell - vim-haskellmode 和 hsenv

> ID：15144114
> 
> 赞同：7
> 
> 时间：2013-02-28T19:34:55.480
> 
> 标签：haskell, vim, cabal

我一直在使用[hsenv](https://github.com/Paczesiowa/hsenv)（取得了巨大的成功！）来处理常见的 cabal 依赖问题。

它很棒，但有一个我无法解决的小故障：如何说服（也很棒！）[vim-haskellmode](http://projects.haskell.org/haskellmode-vim/)使用由 hsenv 设置的环境变量——即编译时 GHC、cabal 数据库等的路径，生成标签等。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:24:31.187

抱歉，按错了按钮——我应该问关于如何使用 SO 的问题 :)

无论如何，一个更好的技巧是将它放入 .vimrc

```
let g:ghc=system("which ghc") 
```

这样（假设`g:ghc`在您运行 vim 时被绑定）它将获取`ghc` 当前正在使用的任何一个（通过 hsenv）。

兰吉特·贾拉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:05:49.090

一，简单的解决方案是破解一个人的 .vimrc 以便

```
let g:ghc="/path/to/hsenv/ghc" 
```

# mysql - 手动将 Joomla K2 项目从 1.5 导入到 3.0

> ID：15144115
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:56.473
> 
> 标签：mysql, database, joomla, joomla1.5, joomla-k2

我从 Joomla 1.5 升级时遇到了非常艰难的时期，所以我决定在 3.0 中重建一个客户混乱的网站，并重新开始。我宁愿将大量 K2 项目导出并导入到新数据库中。我已成功将数据导出到 sql 文件，换出表名，并将数据导入新数据库中。问题是内容没有显示在前端或后端...？我在这里想念什么？我认为这是一个关系数据库问题，显示此内容还有更多内容.. 有谁知道 k2 的内部结构以及我需要做什么才能完成这些内容？我真的不想手动执行此操作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T13:49:35.200

如果您要在新的 Joomla 3 上安装 K2 内容，请确保首先导入旧的用户表 - 我为此使用了 redMigrate（以前的 JUpgrade）（并且仅用于此......）。您在旧站点上导出并在新站点上导入的数据库中的 K2 项目。查找要在 1 上设置访问权限的类别和项目。

看看这里：[K2 帮助网站](http://getk2.org/community/English-K2-Community/164647-Joomla-15-to-30)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:07:04.483

也许您应该首先尝试升级到 joomla 2.5。使用这个名为 JUpgrade [http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658的扩展](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658)

我自己尝试过，对我来说效果很好（j1.5 k2 2.4.1）

# php - Ajax 登录返回修改后的标头错误

> ID：15144117
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:58.607
> 
> 标签：php, ajax, wordpress

我使用 wordpress 作为我的基础并制作了一个自定义登录表单。

阿贾克斯：

```
(function ( $ ) { 
  jQuery(document).ready(function() {

    $("#login_form").submit(function(event){
      //check the username exists or not from ajax
      jQuery.ajax({
        type: 'POST',
        url: my_ajax.ajaxurl,
        data: $('#login_form').serialize(),
        cache: false,
        //dataType: 'json',
        success: function(result) {
          var result=trim(result);
         if( result == 'success' ){
            window.location='/my-dashboard';
          } else {
            $('#message').html(result);
          }
          console.log(result);
        }
      });
      return false;    
    });
  }); 

function trim(str){
     var str=str.replace(/^\s+|\s+$/,'');
     return str;
}

}( jQuery )); 
```

登录表单：

```
<p id="message" style="color:red;"></p>
<form method="post" action="" id="login_form">

<div align="center">
<div >
   Email : <input name="email" type="text" id="email" value="" />
</div>
<div style="margin-top:5px" >
   Password :
    &nbsp;&nbsp;
    <input name="password" type="password" id="password" value="" />
</div>
  <div class="buttondiv">
      <input type="hidden" name="action" value="my_ajax_callback" />
      <input type="hidden" name="func" value="check_login" />
      <input name="submit" type="submit" id="submit" value="Login" style="margin-left:-10px; height:23px"  /> <span id="msgbox" style="display:none"></span>
  </div>
</div>
</form> 
```

函数.php

```
// Ajax
add_action( 'wp_ajax_nopriv_my_ajax_callback', 'my_ajax_callback' );
add_action( 'wp_ajax_my_ajax_callback', 'my_ajax_callback' );

// Your Login function

function check_login( $params ){
    require_once('lib/hash.php');
    $session = new SC_Session;
    // now you can use $session here
    $message=array();

    if(isset($_POST['email']) && !empty($_POST['email'])){
     mysqli_real_escape_string($mysqli, $params['email']);
    }else{ 
         $message[]='Please enter email';
    }

    if(isset($_POST['password']) && !empty($_POST['password'])){
        $password= mysqli_real_escape_string($mysqli, $params['password']);
    }else{
         $message[]='Please enter password';
    }

    $countError=count($message);
    if($countError > 0){
        for($i=0;$i<$countError;$i++){
            echo ucwords($message[$i]).'<br/><br/>';
        }
    } else {

    $hc=$mysqli->query("SELECT password FROM %table% email='".$email."' AND active=1");
    while($hp = $hc->fetch_object()) {
         $stored_hash = $hp->password;
    }

    $hasherd = new PasswordHash(8, false); 
    $check = $hasherd->CheckPassword($password, $stored_hash);

if($check) {
    //now validating the username and password
    $result=$mysqli->query("SELECT id, first_name, last_name, zip, email, password FROM %table% WHERE email='".$email."' AND active=1");
    while($row = $result->fetch_object()) {
    //if username exists
        if($result->num_rows > 0)
        {
            $date = date('Y-m-d h:i:s');
            $update_sql = $mysqli->query("UPDATE %table% SET last_login='".$date."'");

            $firstname = $row->first_name;
            $lastname = $row->last_name;
            $zip = $row->zip;
            $user_id = $row->id;
            $sex = $row->sex;

            $session->set_userdata( 'user_id', $user_id );
            $session->set_userdata( 'email', $email );
            $session->set_userdata( 'firstname', $firstname );
            $session->set_userdata( 'lastname', $lastname );
            $session->set_userdata( 'zip', $zip );
            $session->set_userdata( 'sex', $sex );

        }

    }
    echo ucwords('success');    
    //return $params;
    }   else{
            echo ucwords('please enter correct user details');
        }
    }
}
/**
* Ajax Submit
*/
function my_ajax_callback() {
    $response = call_user_func($_POST['func'], $_POST);
    header( "Content-Type: application/json" );
    echo json_encode($response);
    exit;
} 
```

登录当前运行良好，但每当 $message 抛出错误时，它都会与标题警告一起显示。

警告：无法修改标头信息 - 标头已由 /%wordpresslocation%/wp-content/themes/%theme 中的（输出开始于 /%wordpresslocation%/wp-content/themes/%theme%/functions.php:77）发送第 86 行的 %/functions.php 空

**回答** 我觉得自己像个白痴，想通了，因为我精通 php，所以我一直在混合 php 和 javascript。

```
(function ( $ ) { 
  jQuery(document).ready(function() {
    $('#message').slideUp();
    $("#login_form").submit(function(event){
      $('#message').slideUp();
      //check the username exists or not from ajax
      jQuery.ajax({
        type: 'POST',
        url: my_ajax.ajaxurl,
        data: $('#login_form').serialize(),
        dataType: 'json',
        success: function(params) {
         if( params == 'success' ){
         $('#message').html(params).fadeIn();
            document.location='/my-dashboard';
          } else {
               $('#message').html(params).fadeIn();
          }
        }
      });
      return false;    
    });
  }); 
}( jQuery )); 
```

并改变了

```
echo ucwords('success');    
        //return $params;
        }   else{
                echo ucwords('please enter correct user details');
            } 
```

对此

```
 $params = 'success';    
    return $params;
}else{
    $params = 'fail';
    return $params; 
```

并将参数发回

```
function check_login( $params ){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:41:35.077

那是因为打印了一个错误（echo ucwords（'请输入正确的用户详细信息'）;）

然后，您尝试设置标题。这是不可能的，标题总是必须在其他任何东西之前设置（这就是http的工作方式）

在发送标题之前，您必须重写打印文本的部分。它也不会发送有效的json，所以无论如何它都不会工作

# php - 在 mod rewrite 中忽略动态路径并保留子路径

> ID：15144118
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:58.933
> 
> 标签：php, mysql, mod-rewrite, seo

我有一个带有动态路径的站点，我需要知道如何保留或忽略它：

动态路径的几个示例：

```
http://www.example.com/185/seo-dynamic-field.html
http://www.example.com/186/seo-dynamic-field2.html 
```

如您所见，seo-dynamic-field.html 是从 mysql 生成的字段，仅用于友好的 url。id ( `185`& `186`) 是处理真实查询字符串的真实字符串，即：

```
RewriteRule ^/*(([^/]+)(.html))$ index.php?id=$2 [L] 
```

这是有效的：

```
http://www.example.com/186.html 
```

但我想做的是以下内容：

```
http://www.example.com/186/seo-field.html 
```

有没有办法忽略路径的第二个动态部分（seo-field1.html，seo-field2.html）？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:43:04.230

像这样的东西应该工作......

```
RewriteRule ^/?(\d+)/?.*\.html$ index.php?id=$1 [L] 
```

这是解释的正则表达式...

```
^/?(\d+)/?.*\.html$ 
```

```
Assert position at the beginning of the string «^»
Match the character “/” literally «/?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
Match the regular expression below and capture its match into backreference number 1 «(\d+)»
   Match a single digit 0..9 «\d+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the character “/” literally «/?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
Match any single character «.*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
Match the character “.” literally «\.»
Match the characters “html” literally «html»
Assert position at the end of the string (or before the line break at the end of the string, if any) «$» 
```

# javascript - 谷歌地图。以间隔放置标记

> ID：15144119
> 
> 赞同：0
> 
> 时间：2013-02-28T19:34:59.550
> 
> 标签：javascript, google-maps, google-maps-markers, settimeout

我一直试图让代码工作几个小时。在我看来，一切都很好，但它不起作用。标记不断出现在同一时间。

如果您能指出我的错误，我将不胜感激。提前致谢！

```
function dropMarker(data){
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(lat, lng),
        map: map,
        title: data.name,
        animation: google.maps.Animation.DROP
    });
    markers.push(marker);
    google.maps.event.addListener(marker, 'click', function() {
        showIW(this);
      });
}

function placeAllMarkers(data){
    clearMarkers();
    for(var i=0;i<data.length;i++){
        setTimeout(dropMarker(data[i]),100*i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:40:39.830

您必须将一个函数传递给 setTimeout 而不是在其中调用该函数。尝试

```
function placeAllMarkers(data){
    clearMarkers();
    for(var i=0;i<data.length;i++){
        setTimeout((function(i){return function(){dropMarker(data[i])};})(i),100*i);
    }
} 
```

# django - django 包含所有查询

> ID：15144126
> 
> 赞同：2
> 
> 时间：2013-02-28T19:35:25.010
> 
> 标签：django, django-orm

我有一些这样的模型；

```
class Ingredient(models.Model):
    name = models.CharField(max_length=128)

class Recipe(models.Model):
    name = models.CharField(max_length=128)
    ingredients = models.ManyToManyField(Ingredient, through='RecipeIngredient')

class RecipeIngredient(models.Model):
    recipe = models.ForeignKey(Recipe)
    ingredient = models.ForeignKey(Ingredient) 
```

我怎样才能找到包含所有成分的食谱？

这是一个例子；

```
>>> i1 = Ingredient(name="egg")
>>> i1.save()
>>> i2 = Ingredient(name="flour")
>>> i2.save()
>>> i3 = Ingredient(name="water")
>>> i3.save()
>>> i4 = Ingredient(name="milk")
>>> i4.save()
>>> i5 = Ingredient(name="sugar")
>>> i5.save()
>>> i6 = Ingredient(name="carrot")
>>> i6.save()
>>> i7 = Ingredient(name="wheat")
>>> i7.save()

>>> r1 = Recipe(name="omelet")
>>> r1.save()
>>> r1.ingredients.add(i1, i2, i3)
>>> r2 = Recipe(name="icecream")
>>> r2.save()
>>> r2.ingredients.add(i3, i4, i5)

>>> test = Recipe.objects.filter(ingredients__in=[i1.id, i2.id, i3.id, i4.id])
>>> test
[<Recipe: omelet>, <Recipe: omelet>, <Recipe: omelet>, <Recipe: icecream>, <Recipe: icecream>] 
```

我只想找到煎蛋卷。因为只有煎蛋卷含有鸡蛋（i1）、面粉（i2）、水（i3）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:46:10.427

也许把它连在一起？

```
Recipe.objects.filter(ingredients=i1.id).filter(ingredients=i2.id).filter(ingredients=i3.id).filter(ingredients=i4.id) 
```

# android - 电池信息服务。监控电池状态等

> ID：15144127
> 
> 赞同：0
> 
> 时间：2013-02-28T19:35:26.463
> 
> 标签：android

即使我的应用程序未打开，我也想跟踪电池信息（是否正在充电、电量等）。我想也许服务对它有好处？或者也许还有其他解决方案？我都竖起耳朵了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:57:14.230

需要在 AndroidManifest.xml 中声明服务，并且实现类必须扩展 Service 类或其子类之一。以下代码显示了服务声明及其实现的示例。

```
<service
  android:name="MyService"
  android:icon="@drawable/icon"
  android:label="@string/service_name"
  >
</service> 

public class MyService extends Service {

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
    //TODO do something useful
    return Service.START_NOT_STICKY;
  }

  @Override
  public IBinder onBind(Intent intent) {
  //TODO for communication return IBinder implementation
    return null;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T18:47:36.977

这实际上是一个非常古老的帖子，但由于接受的答案似乎是一个存根服务，我认为有必要更深入。

您需要在 android 清单中声明该服务。如果您将它放在某个包中，则声明将是：

```
<service android:name="packagename.servicename" /> 
```

然后你需要实现服务类。我为我的一个应用程序创建了一个。希望这对您有所帮助。

我在传感器的背景下有这个。传感器是我想要监控的东西，所以我创建了一个如下界面：

```
public interface Sensor {

    SensorType getSensorType();

    SensorName getSensorName();

} 
```

我必须`ENUM`代表我拥有的传感器的类型和名称的类：

```
public enum SensorName {
    ENVIRONMENTAL_SENSOR, AUDIO_SENSOR, SOUND_SENSOR, SOCIAL_SENSOR,
    LOCATION_SENSOR, PHOTO_SENSOR, ACCELEROMETER_SENSOR, BATTERY_SENSOR;
}

public enum SensorType {
    HARDWARE_SENSOR, SOFTWARE_SENSOR, HYBRID_SENSOR;
} 
```

由于我有多个传感器，并且我可能想要列出实现此接口所需的所有传感器。接下来我创建了一个抽象类来实现类似于我所有传感器的行为。

```
public abstract class SensorElement extends Service implements Sensor{

    protected SensorType type;
    protected SensorName name;

    @Override
    public abstract IBinder onBind(Intent arg0);

    @Override
    public int onStartCommand(Intent intent, int flags, int startId){
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public abstract void onCreate();

    @Override
    public void onDestroy(){
        super.onDestroy();
    }
} 
```

我的传感器需要这种方法才能正常工作。在我的情况下，我只需要绑定器将服务绑定到我的活动。

现在你想要什么，电池传感器本身：

```
public class BatterySensor extends SensorElement {

    // Binder given to clients
    private final IBinder mBinder = new BatteryLocalBinder();

    /**
     * Class used for the client Binder. Because we know this service always
     * runs in the same process as its clients, we don't need to deal with IPC.
     */
    public class BatteryLocalBinder extends Binder {
        public BatterySensor getService() {
            // Return this instance of MotionLightOrientationSensor so clients
            // can call
            // public
            // methods
            return BatterySensor.this;
        }
    }

    private static final String TAG = "BatterySensor";
    public static final SensorType type = SensorType.SOFTWARE_SENSOR;
    public static final SensorName name = SensorName.BATTERY_SENSOR;

    private int status;
    private boolean isCharging;
    private int chargePlug;
    private boolean usbCharge;
    private boolean acCharge;
    private int level;
    private int scale;
    private double batteryPct;
    private Battery battery;

    @Override
    public SensorType getSensorType() {
        return type;
    }

    @Override
    public SensorName getSensorName() {
        return name;
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return mBinder;
    }

    @Override
    public void onCreate() {
        Log.e(TAG, "onCreate");
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(powerconnectionreceiver, ifilter);
        battery = new Battery();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.e(TAG, "onStartCommand");
        super.onStartCommand(intent, flags, startId);
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        Log.e(TAG, "onDestroy");
        super.onDestroy();
        unregisterReceiver(powerconnectionreceiver);
    }

    private BroadcastReceiver powerconnectionreceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // Retrieves a map of extended data from the intent.
            status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
            isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING
                    || status == BatteryManager.BATTERY_STATUS_FULL;

            chargePlug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
            usbCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;
            acCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;
            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            batteryPct = level / (float) scale;
            battery.setStatus(status);
            battery.setCharging(isCharging);
            battery.setChargePlug(chargePlug);
            battery.setUsbCharge(usbCharge);
            battery.setAcCharge(acCharge);
            battery.setLevel(level);
            battery.setScale(scale);
            battery.setBatteryPct(batteryPct);

        }

    };

    public Battery getBatteryReading() {
        return this.battery;
    }

    public int getStatus() {
        return status;
    }

    public boolean isCharging() {
        return isCharging;
    }

    public int getChargePlug() {
        return chargePlug;
    }

    public boolean isUsbCharge() {
        return usbCharge;
    }

    public boolean isAcCharge() {
        return acCharge;
    }

    public int getLevel() {
        return level;
    }

    public int getScale() {
        return scale;
    }

} 
```

要从此传感器访问数据，您只需在活动中启动它，如下所示：

```
private BatterySensor batterySensor;
private boolean mBatteryBound = false;
private Intent intentBattery;

intentBattery = new Intent(this.context, BatterySensor.class); 
```

然后我启动服务：

```
context.startService(intentBattery); 
```

并绑定它：

```
if(this.context.bindService(intentBattery, mBatteryConnection, Context.BIND_AUTO_CREATE)){
            this.numBoundedSensors++;
        } 
```

要绑定它，你需要在你的活动中有这个类：

```
/** Defines callbacks for service binding, passed to bindService() */
    private ServiceConnection mBatteryConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName className,
                IBinder service) {
            // We've bound to LocalService, cast the IBinder and get LocalService instance
            BatteryLocalBinder BatteryBinder = (BatteryLocalBinder) service;
            batterySensor = BatteryBinder.getService();
            mBatteryBound = true;
        }

        @Override
        public void onServiceDisconnected(ComponentName arg0) {
            mBatteryBound = false;
        }
    }; 
```

然后，如果绑定成功，您可以从传感器调用所有方法，如下所示：

```
public Battery getBatteryData(){
        return mBatteryBound ? batterySensor.getBatteryReading() : null;
} 
```

# visual-studio - 需要在 vcproj 文件中的文件路径中使用环境变量

> ID：15144130
> 
> 赞同：1
> 
> 时间：2013-02-28T19:35:39.480
> 
> 标签：visual-studio, visual-studio-2005, vcproj

我们正在使用visual studio 2005。我知道，但这就是我们所拥有的。

因此，我们有一个项目文件夹，以及另一个文件夹中的一些“其他”代码。其他代码来自其他组并且是只读的。由于我们使用的是 clearcase，因此其他代码区域可能会发生变化。在不涉及很多无聊的细节（我自己仍然没有“明白”所以请不要问）的情况下，我们通常做的是使用 subst 将另一个驱动器的视图映射到固定驱动器号。

我想摆脱这种情况并使用一个环境变量来引用其他代码驱动器。

我定义了一个环境变量'blah'，指向其他代码的驱动器和路径。我通过简单地引用环境变量 %blah% 来修复解决方案文件。我的麻烦是试图让项目（vcproj）文件在从其他代码区域引用文件时具有类似的行为。

在 vcproj 文件中，我尝试过：

< 文件相对路径="%blah%..."

和

< 文件相对路径="$(blah)..."

两者都不起作用 - 当我尝试打开文件时收到错误消息：

> u:\path\to\vcprojfile\$(blah)...\myfile.c 无法打开文件。

在我修改 vcproj 文件之前，RelativePath 属性包含文件的绝对路径。那么，为什么环境变量没有被正确扩展呢？我什至可以在这里做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:33:22.503

尝试使用 UPPER CASE 作为环境变量和文件的相对路径。使用`RelativePath="$(BLAH)\Folder\myfile.c"`语法。它在 VS2005 中对我有用。

# winpe - Win PE 4.0 映像上的 .Net 3.5 应用程序

> ID：15144132
> 
> 赞同：0
> 
> 时间：2013-02-28T19:35:41.143
> 
> 标签：winpe

假设使用 WinPE-NetFx4.cab、WinPE-NetFx4_en-us.cab 和 WMI 等必备软件包正确设置了 WinPE 4.0 映像，是否应该执行在 Visual Studio 2008 中为 .NET 3.5 构建的应用程序？或者，应用程序是否链接到强名称签名的 3.5 程序集，这样它就不会使用 .NET 4.0 中的等效程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T08:12:17.690

我也在使用 WinPE 4.0 并遇到了同样的问题。我使用早期版本的 .NET Framework（.NET 3.0 和 3.5）开发的大多数应用程序都不会执行（执行但屏幕上没有显示）

对 WinPE 4.0 WIM 的 Windows 目录进行了进一步调查，`"Windows\Microsoft.NET\Framework"`仅显示安装了版本 4（对于我的情况是 v4.0.30319）的迹象（WinPE-NetFx4.cab）。

由此得出结论，微软的 WinPE 4.0 仅支持 .NET Framework 4。

为了使您的应用程序再次运行，使用 .NET Framework 4 程序集重新编译它们。

# sql - 当目标队列在本地时，sys.conversation_endpoints 是否可靠？

> ID：15144135
> 
> 赞同：0
> 
> 时间：2013-02-28T19:35:49.657
> 
> 标签：sql, sql-server, queue, service-broker

（有关解决方案，请参阅我在此原始帖子底部的编辑）

# 设置

我的 Microsoft SQL Server 2005 Express 数据库中有两个存储过程：

*   `WaitForMyMessage(@myName NVARCHAR(50), @myMessage NVARCHAR(MAX) OUTPUT)`
*   `ProvideMessage(@name NVARCHAR(50), @message NVARCHAR(MAX))`

我想`WaitForMyMessage()`阻止，直到有人`ProvideMessage()`用相应的名字打电话。如果有人已经`ProvideMessage()`使用该名称呼叫过，那么`WaitForMyMessage()`将立即返回提供的值。

我最初考虑使用具有 FIFO 队列行为的简单表来实现这一点，但找不到阻止`INSERT`进入该表的方法。因此`WaitForMyMessage()`必须进行民意调查，出于显而易见的原因，这是不可接受的。

# Q1：

**有没有一种有效的方法来阻止直到某个记录出现在表中？**该`WAITFOR`语句会很棒，但 SQL 似乎不支持它进行查询（仅支持`DELAY`、`TIME`或`RECEIVE`）。但类似的东西会很棒，

例如：

```
-- It would be great is SQL supported this, but as far as I can tell it doesn't.
DECLARE @t TABLE (ans NVARCHAR(MAX));
WAITFOR (
  WITH A AS (
    SELECT TOP (1) * 
    FROM ProviderMessage A 
    WHERE ProviderMessage.Name = @myName
    ORDER BY A.ID
  )
  DELETE FROM A 
  OUTPUT deleted.ID INTO @t
);
SET @myMessage = (SELECT ans FROM @t); 
```

所以它会一直闲置，直到有人将具有适当的记录插入`Name`表`ProviderMessage`中，一旦发生这种情况，该记录将被上面删除，同时检索其`Value`字段以返回给调用者。

### 其他想法

唉，我找不到**Q1**的答案，所以我继续使用 Service Broker 提供的实际消息队列来实现这个。考虑到 Service Broker 的力量和影响力，这似乎有点过头了，但是如果没有**Q1**的答案，我不得不试一试。我将我的服务和简单​​队列定义如下：

```
CREATE QUEUE q1
CREATE SERVICE s1 ON QUEUE q1 ([DEFAULT]) 
```

然后`WaitForMyMessage()`变成了：

```
DECLARE @farHandle UNIQUEIDENTIFIER;
SET @farHandle = (
  SELECT FarHandle 
  FROM ProviderInfo 
  WHERE ProviderInfo.Name = @myName
);
WAITFOR (
  RECEIVE @myMessage = CONVERT(NVARCHAR(MAX), message_body) 
  FROM q1
  WHERE conversation_handle = @farHandle
); 
```

并`ProvideMessage()`会发送消息，如下所示：

```
DECLARE @nearHandle UNIQUEIDENTIFIER;
SET @nearHandle = (
  SELECT NearHandle 
  FROM ProviderInfo 
  WHERE ProviderInfo.Name = @name
);
SEND ON CONVERSATION @nearHandle (@message) 
```

这一切都运行良好，除了一件事：似乎 Service Broker 不支持发现给定对话的近端和远端句柄。我**必须**两者都知道，这样我才能为两个过程填充`ProviderInfo`表格以进行私下通信。

# Q2：

**如何才能同时获得新对话的*近端*对话句柄和*远端*对话句柄？** 现在我通过这样的查询来做到这`sys.conversation_endpoints`一点：

```
-- Create the conversation
DECLARE @nearHandle UNIQUEIDENTIFIER; 
BEGIN DIALOG CONVERSATION @nearHandle 
FROM SERVICE s1 
TO SERVICE 's1' 
WITH ENCRYPTION = OFF; 

-- Queue an initialization message
SEND ON CONVERSATION @nearHandle ('');

-- Figure out the handle to the receiving side of this conversation
DECLARE @farHandle UNIQUEIDENTIFIER;
SET @farHandle = (
  SELECT conversation_handle 
  FROM sys.conversation_endpoints 
  WHERE conversation_id = (
    SELECT A.conversation_id 
    FROM sys.conversation_endpoints A 
    WHERE A.conversation_handle = @nearHandle 
  ) AND conversation_handle <> @nearHandle 
);

-- Get our initialization message out of the queue
DECLARE @unused TINYINT;
WAITFOR (
  RECEIVE @unused = status 
  FROM q1
  WHERE conversation_handle = @farHandle
);

-- Store both conversation handles, associated with this name
INSERT INTO ProviderInfo (Name, NearHandle, FarHandle)
 SELECT @name, @nearHandle, @farHandle 
```

但是由于 Service Broker 架构旨在支持更复杂的场景，包括分布式服务等，消息`sys.transmission_queue`甚至可能被放置在本地，以及其他实现的复杂性，我对我的方法对于生产来说足够健壮不是很有信心.

因此，如果我这样做的方式不健全，是否有“正确”的方式？我考虑尝试通过使用对话组来避免这种需要，但由于基本相同的问题而无法解决（对话组 ID 也没有传达给远端），并且我发现这些主题没有提供解决方案任何一个：

*   [Sql Server 服务代理](https://stackoverflow.com/questions/6434464/sql-server-service-broker)
*   [Sql Server Service Broker 对话组](https://stackoverflow.com/questions/1314050/sql-server-service-broker-conversation-groups)

## 结论

实现这项工作的障碍让我担心它不应该以这种方式使用，因此要么在某些生产场景中不起作用，要么将来可能不受支持。任何人都可以提供表明这种方式可靠的文档，或提供可靠且仍然有效的替代解决方案（有或没有 Service Broker）吗？

谢谢！

# 编辑：（解决方案）

这里的中心问题是 Q2（**如何同时获得新对话的近端对话句柄和远端对话句柄？**）。

多亏了几位贡献者的好主意，答案浮出水面（现在看起来很明显！）是通过在初始化消息`SELECT`之后立即从队列本身中获取远程句柄，因为该语句允许您过滤任何排队列！`SEND``SELECT`

因此，不要像我原来的帖子那样这样做：

```
-- Queue an initialization message
SEND ON CONVERSATION @nearHandle ('');

-- Figure out the handle to the receiving side of this conversation
DECLARE @farHandle UNIQUEIDENTIFIER;
SET @farHandle = (
  SELECT conversation_handle 
  FROM sys.conversation_endpoints 
  WHERE conversation_id = (
    SELECT A.conversation_id 
    FROM sys.conversation_endpoints A 
    WHERE A.conversation_handle = @nearHandle 
  ) AND conversation_handle <> @nearHandle 
);

-- Get our initialization message out of the queue
... 
```

我们可以更简单（更有效！）这样做：

```
-- Queue an initialization message with a unique identifier
DECLARE @initbin VARBINARY(36);
SET @initbin = CONVERT(VARBINARY(32), @nearHandle);
SEND ON CONVERSATION @nearHandle (@initbin);

-- Figure out the handle to the receiving side of this conversation using the known unique identifier
DECLARE @farHandle UNIQUEIDENTIFIER;
SET @farHandle = (SELECT conversation_handle FROM q1 WHERE message_body = @initbin)

-- Get our initialization message out of the queue
... 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:08:22.470

如果您需要来回传递消息，Service Broker 将非常适合您。在插入行之前没有内置功能可以阻止，但是您可以使用 a`query subscription`在查询的结果集发生更改时通知您。这是建立在 Service Broker 架构之上的，我认为您需要从 .NET 而不是 SQL 设置订阅。

回到Service Broker，如果它是本地的，您不必担心很多，例如路由等，因此您的案例是最简单的。传输队列只是需要发送的消息的存放区，无需担心。

我认为让你绊倒的事情是你不必担心获得对话句柄，因为无论如何你都会得到它们。

**(1)**让消息的接收者阻塞在队列中：

```
declare @status tinyint, @far_handle uniqueidentifier, @myMessage nvarchar(max);

waitfor (
    receive @status = status, 
            @far_handle = conversation_handle, 
            @myMessage = CONVERT(NVARCHAR(MAX), message_body) 
    from q1
) 
```

**(2)**从你的服务开始对话回到它自己：

```
declare @near_handle uniqueidentifier

begin dialog conversation @near_handle
from service s1 to service 's1'
with encryption = off

send on conversation @near_handle ('hello') 
```

现在，当您在 (2) 中开始对话时，您将获得连接侧的对话句柄，然后您可以做您想做的事情，即插入表格等。

在阻塞方面，当消息到达时，您会收集状态和消息正文，以及对话句柄，即对话*该*方的句柄。您可以使用它来回复、存储它、用它更新表行等。

现在的问题是，因为起初它是在没有对话句柄的情况下接收的，因为它没有对话句柄，所以当对话建立时，它应该将它的对话句柄放在接收的 where 子句中。

```
receive @status = status, 
        @myMessage = CONVERT(NVARCHAR(MAX), message_body) 
from q1
where conversation_handle = @far_handle 
```

否则它将开始接收自己发送的消息。这是因为您有一个服务在同一个队列中与自己对话。您可以通过使用 2 个服务相互交谈来解决这个问题。这通常是一种更清洁的方法。

这基本上消除了 go to 的需要`sys.conversation_endpoints`，这实际上是为了管理对话。

此外，为了干净利落地结束对话，您应该从双方结束它们。永远不要让自己陷入需要使用`end conversation with cleanup`.

要同时处理多个对话，您可以使用名为`queue activation`. 如果您不需要同时处理它们，则不需要这个。要使用激活，最好使用两个服务和队列。

## 完整示例

**(1)**做一些设置

```
create queue srcq
create service src on queue srcq([DEFAULT])
GO

create queue destq
create service dest on queue destq([DEFAULT])
GO 
```

**(2)**创建一个过程来处理收到的消息

```
create procedure messageHandler as 

declare @far_handle uniqueidentifier,
        @message xml,
        @message_type nvarchar(256),
        @name varchar(32),
        @payload nvarchar(max),
        @handler varchar(128)

waitfor (
    receive @far_handle = conversation_handle, @message_type = message_type_name, @message = cast(message_body as xml) 
    from destq
)

if (@message_type = 'http://schemas.microsoft.com/SQL/ServiceBroker/Error')
    -- Deal with error
    exec dealWithError 
else if (@message_type = 'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog') 
begin
    -- End the Conversation
    end conversation @far_handle; 
end 
else  
begin
    set @name = @message.value('(/xml/name)[1]', 'varchar(32)');
    set @payload = @message.value('(/xml/payload)[1]', 'nvarchar(max)');

    if (select ReceiverHandle from ProviderInfo where Name = @name) is null
        update ProviderInfo
            set ReceiverHandle = @far_handle
        where Name = @name;

    -- Now Process @name however you want to
    -- This basically creates a string, say 'bobHandler', and then executes it as an sp, passing it the payload
    set @handler = @name + 'Handler';
    exec @handler @payload; 
end 
GO 
```

**(3)**为与名称'bob'关联的消息创建一个处理程序

```
create procedure bobHandler (@payload nvarchar(max))
as
    print 'hello'
GO 
```

**(4)**设置目的队列使用激活

```
alter queue destq 
with activation (
    status = on,
    procedure_name = messageHandler,
    max_queue_readers = 10,
    execute as 'dbo'
)
GO 
```

**(5)**在Sender上，开始一个会话，存储发送句柄，然后发送一条消息

```
declare @near_handle uniqueidentifier
begin dialog conversation @near_handle
from service src to service 'dest'
with encryption = off

-- Store this handle somewhere for future use
merge into ProviderInfo p
using (
    select 'bob' as Name, @near_handle as SenderHandle
) t on p.Name = t.Name
when matched then
    update set SenderHandle = t.SenderHandle, ReceiverHandle = null
when not matched then
    insert (Name, SenderHandle) values (t.Name, t.SenderHandle);

send on conversation @near_handle ('<xml><name>bob</name><payload>89237981273982173</payload></xml>')
GO 
```

发送消息将导致消息处理程序唤醒，并调用“bobHandler”存储过程。设置`max_queue_readers`为 10 意味着可以同时处理 10 条消息。

如果您不想使用激活，因此接收器上的一个线程处理所有传入的消息，您可以通过简单地在目标队列上将其关闭，并将“messageHandler”存储过程更改为使用`wait for (receive)`并运行它来做到这一点循环中的代码。

如果这一切都结束了，因为您实际上希望一个人来调用接收过程，忘记激活，然后试试这个：

```
create procedure handleMessage (@name varchar(32))
as
    declare @far_handle uniqueidentifier,
        @message xml,
        @message_type nvarchar(256),
        @payload nvarchar(max),
        @handler varchar(128),
        @loop bit = 1

    while (@loop = 1)
    begin
        -- Wait for a handle with our name
        select @far_handle = conversation_handle
        from destq
        where cast(message_body as xml).value('(/xml/name)[1]', 'varchar(32)') = @name

        if (@far_handle is not null)
            set @loop = 0
        else
            waitfor delay '00:00:02'
    end

    set @loop = 1

    while (@loop = 1)
    begin
        waitfor (
            receive @message_type = message_type_name, @message = cast(message_body as xml) 
            from destq
            where conversation_handle = @far_handle
        )

        if (@message_type = 'http://schemas.microsoft.com/SQL/ServiceBroker/Error')
            -- Deal with error
            exec dealWithError
        else if (@message_type = 'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog')
        begin
            -- End the Conversation
            end conversation @far_handle;

            --Exit
            set @loop = 0
        end
        else 
        begin
            set @payload = @message.value('(/xml/payload)[1]', 'nvarchar(max)');

            if (select ReceiverHandle from ProviderInfo where Name = @name) is null
                update ProviderInfo
                    set ReceiverHandle = @far_handle
                where Name = @name;

            -- Now Process @name however you want to
            -- This basically creates a string, say 'bobHandler', and then executes it as an sp, passing it the payload
            set @handler = @name + 'Handler';
            exec @handler @payload;
        end
    end
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:00:49.050

我认为，就好像您在谈论 SQL Server 环境中的消息交换一样，Service Broker 肯定会为您提供解决方案。这不是所有任务和所有可能要求的完美解决方案，但它肯定会起作用。

通常，需要更详细地指定您的要求，但考虑到一些假设，我们可以为您找到两种可能的解决方案。假设 SB 配置为 Sender (ProvideMessage) 和 Target (WaitForMyMessage) 之间的对话

1.  假设我们的 Target 使用 WaitFor_Any_Message 过程。当 Target 收到任何消息时，它会调用 WaitFor_Any_Message 来检查名称并依次调用 WaitForMyMessage 来处理此消息。问题是 - 您是否需要处理其他消息？如果没有 - 没问题，请丢弃它们。如果是 - 调用另一个程序来处理它们。

2.  第二种方法是为任何名称配置单独的队列。

无论如何，SB 非常适合与单个数据库进行本地消息交换。这在几个生产部署中对我来说效果很好。

# java - 使用 GWT 2.5 时如何在 HTML 中编写（启用）Java 代码？

> ID：15144145
> 
> 赞同：15
> 
> 时间：2013-02-28T19:36:07.510
> 
> 标签：java, gwt, gwt-2.5

我已经开始利用 GWT 2.5。GWT 2.5最酷的[特性](https://plus.google.com/117487419861992917007/posts/Cg9vEE9csXS)是能够直接在我们的 HTML 页面中编写 Java 代码，如下所示：

```
<script type="text/java">
   String helloWorld = "Hello world";
   Window.alert(helloWorld);
</script> 
```

诀窍是`ServletFilter`在服务器端使用 a 。这`ServletFilter`使用 GWT 编译器将此 java 代码编译成 Javascript 并将其注入到返回给客户端的 HTML 中。

我无法弄清楚如何过滤它`web.xml`或如何将信息传递给编译器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:09:53.690

这是Google I/O 2012 -您所指[的 Google Web Toolkit 的历史和未来。](http://www.youtube.com/watch?v=VOf27ez_Hvg)这是Ray Cromwell 发布的[幻灯片。](https://docs.google.com/presentation/d/1pC9WK80-fzIs2iMQOO3Jsvfmqv2erI9xucuF3lHOE7Q/)

# php - CakePHP 2.2.4：将此 find('all') 转换为选择列表

> ID：15144147
> 
> 赞同：0
> 
> 时间：2013-02-28T19:36:27.240
> 
> 标签：php, cakephp, cakephp-2.1

我正在使用论坛控制器，但在生成论坛类别的下拉选择时遇到问题。

```
Forum hasmany ForumCategory (forum_id)
ForumCategory hasmany ForumPost (category_id)
ForumCategory hasmany ForumSubcat (parent_id)
ForumCategory belongs to Forum (forum_id)
ForumPost belongs to ForumCategory (category_id)
ForumSubcat belongs to ForumCategory (parent_id)
Forum belongs to Page (page_id) 
```

当用户去为论坛（模型称为ForumPost）添加新线程时，他们必须选择一个category_id（ForumCategory）。如果用户访问[http://www.domain.com/forum/add/5](http://www.domain.com/forum/add/5)，则 category_id 应预选为 5 并显示类别的标题。如果用户访问[http://www.domain.com/forum/add](http://www.domain.com/forum/add)，则应该取消选择 category_id 并且下拉菜单应该以默认选项“Select a Category”开始。

代码是

```
if($category_id){
    echo $this->Form->input('category_id', array('value' => $category_id, 'empty' => 'Select a Category'));
}
else{
    echo $this->Form->input('category_id', array('empty' => 'Select a Category'));
} 
```

$category_id 从路由传递到控制器以查看，上面的代码目前正在运行。

**我希望我的选择列表是分层的，显示所有具有 page_id = $page_id 的论坛（因此条件必须在论坛模型上）。在此之下，属于上述论坛的所有类别。最后是属于父类别的所有子类别。这是一个例子：**

```
Select a Category // default option
Help // Forum
--- Announcements // Category
--- Feedback & Suggestions // Category
--- Questions & Support // Category
General Discussion // Forum
--- Games & Polls // Category
--- Introductions // Category
--- Chit Chat // Category
Off Topic // Forum
--- Movies // Category
--- TV // Category
--- Music // Category
-------- Pop // Sub Category
-------- Rock // Sub Category
-------- R&B // Sub Category
--- Games // Category 
```

我需要它，以便如果用户选择论坛选项说“Off Topic”，则选择的 id 为空，验证将告诉他们选择一个类别，直到他们选择一个类别或子类别选项。

我已经尝试了几种方法，但我真的错过了这个方法。

这给了我一个有效的类别列表，按相应的论坛和`Forum.page_id = $page_id`作品​​的条件分组，但子类别不属于其父类别。

```
$this->ForumCategory->find('list', array(
    'fields' => array('ForumCategory.id', 'ForumCategory.title', 'Forum.title'),
    'conditions' => array('Forum.page_id' => $page_id),
    'recursive' => 0
)); 
```

这给了我想要的数组，但不在选择兼容列表中。**有没有办法可以很好地隐藏它，或者我不应该在这个字段中使用表单助手？**

```
 $this->Forum->find('all', array(
    'fields' => array('Forum.title'),
    'conditions' => array('Forum.page_id' => $page_id),
    'contain' => array(
        'ForumCategory' => array(
            'ForumSubcat'
        )
    )
)); 
```

[StackOverflow 上的这篇文章](https://stackoverflow.com/questions/6023349/cakephp-find-list-with-related-model-conditions)是最大的帮助，但原始发帖人没有更新问题以将他们将 find('all') 转换为列表。

# php - 一次连接 MySQL 服务器

> ID：15144150
> 
> 赞同：0
> 
> 时间：2013-02-28T19:36:37.070
> 
> 标签：php, mysql, database

我有几个 PHP 文件，每个文件都需要一个 Mysql 连接。然后我有一个带有 mysql 基本数据库查询的通用文件 connect.php，我在 Header.php 中添加了这个文件。

但值得关注的是，每次 connect.php 都会建立与 DB 的连接（因为这包含在 Header 中）。这将是有害的 MySql 服务器，我的应用程序很大而且大约。里面有 200 个表，有 20 万个条目。我想通过 php.ini 建立数据库连接，这意味着一旦我配置了 php.ini 就无需在代码中的任何位置添加 mysql_connect() 查询。php.ini 中只有一个设置。请解释我不熟悉php.ini的步骤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:46:59.080

> 我的应用程序很大而且大约。里面有 200 个表，有 200,000 个条目

那不是很大。然而，大量的表通常是一个很好的指标，表明您试图对数据进行分片并破坏规范化。

> 意味着一旦我配置了 php.ini，则无需在代码中的任何位置添加 mysql_connect() 查询

添加mysql_connect()真的那么难吗？? 如果在您的 ini 文件或自动添加的包含文件中设置了用户名/密码，您甚至不需要显式设置它们。事实上，如果你将 db 函数包装在你的包含文件中，你可以懒惰地连接：

```
<?php
ini_set('mysql.default_user', 'scott');
ini_set('mysql.default_password','pussycat');

$GLOBALS['my_db_handle']=false;

function wrap_mysql_connect()
{
   if (false===$GLOBALS['my_db_handle']) {
       $GLOBALS['my_db_handle']=mysql_connect();
       @mysql_select_db('my_preferred_db', $GLOBALS['my_db_handle']);
       @mysql_set_charset('utf8', $GLOBALS['my_db_handle']);
   }
   return $GLOBALS['my_db_handle'];
}

function wrap_mysql_query($sql)
{
   if (false===$GLOBALS['my_db_handle']) {
      wrap_mysql_connect();
   }
   if (false===$GLOBALS['my_db_handle']) {
      trigger_error(mysql_error());
      return false;
   }
   $result=mysql_query($sql, $GLOBALS['my_db_handle']);
   if (false === $result) {
      trigger_error(mysql_error());
      return false;
   }
   return result;
} 
```

虽然在不需要时打开数据库连接（并且在不再需要时未能显式关闭它们）确实会不必要地消耗资源，但开销并不大 - 请注意过早的优化。

# xml - 如何将 Scala 的 XML 输出打印到 Play！看法？

> ID：15144153
> 
> 赞同：0
> 
> 时间：2013-02-28T19:36:49.947
> 
> 标签：xml, scala, view, playframework, playframework-2.1

我创建了一些帮助类来为我的视图提供更多功能。例如，我有一个`Button`应该呈现一些自定义 HTML 以显示按钮元素的类。这些类是用纯 Scala 编写的，不使用 Play 的模板文件。但当然，我仍然可以（并且想要）`@Button( "label", ... )`从我的观点中称呼他们。

但是，我面临的问题是我的`toString`方法。

```
class Button( val label: String, ... )
{
    override def toString: String =
    {
        <a ...> ... </a>.toString
    }
} 
```

不幸的是，这会将 HTML 字符转义为`&lt;`视图中的等。

如何将 Scala 的 XML 正确导出到 Play 视图？我想坚持使用 XML，而不是将它们写成字符串......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:56:45.610

没有玩过Play，但谷歌快速搜索得出了这个：

[https://groups.google.com/forum/?fromgroups=#!topic/play-framework/WiDo3WJnC9s](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/WiDo3WJnC9s)

> 是的，任何输出都将被转义并包装在 play.templates.Html 类型中。
> 
> 所以如果你想控制转义机制，只需让你的动态表达式直接返回Html：
> `@Html("<strong>Do not escape</strong>")`

不会避免先将 XML 写入字符串，但我想这不是主要问题 :)

# ssrs-2008-r2 - 无法打开SSRS报表管理器中报表旁边的下拉箭头添加订阅

> ID：15144158
> 
> 赞同：31
> 
> 时间：2013-02-28T19:37:25.463
> 
> 标签：ssrs-2008-r2, reportmanager

我尝试配置报告管理器。是运行在server 2013上的sql2008r2报表服务，拉取报表是没有问题的。但是我无法打开报告之外的下拉箭头来添加订阅。

我在默认网站下的物理路径中添加虚拟目录，报告，C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager。

有谁知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-15T13:35:46.537

尝试将您的报表服务器 URL 添加到兼容性视图站点列表中。我在我们的 2008 报表服务器上遇到了同样的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-11T20:29:20.590

此下拉问题是兼容性设置的问题。转到：工具/兼容性视图设置并输入“localhost”和/或您的任何内容（两者都做）。“修复”事情。但是，由于这里有两个问题，请注意您仍然需要以“以管理员身份运行”打开 IE。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-10T08:06:10.970

转到 Internet Explorer 的右上角，然后选择页面图标。检查兼容性视图

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-16T11:38:44.360

我有同样的问题，将本地主机更改为机器名称也为我解决了这个问题。但仅限于 Internet Explorer。在 Firefox 和其他浏览器中，下拉菜单仍然不会弹出。但是组合 ReportServer <-> 而不是 IE 浏览器存在更多配置问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T06:35:01.617

I too was facing this issue. This was because of some authentication issue. I was trying to open the report manager on my local system with the url (http:// localhost/reports) but the dropdown was not coming to view, delete ,subscribe the reports on clicking the report. I tried opening the internet explorer in admin mode also and still there was the same issue. Then i changed the url i was opening to http:// machine name/reports and the dropdown menu started displaying. Instead of localhost, try opening the report manager by the machine name and it should work. Also you must have the rights to access the report server(For that open IE in admin mode and go to Report manager->site settings and assign a role to the user.)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-25T03:51:37.570

您可以单击报告，然后检查*Internet Explorer*页面的最顶部（在超链接中显示主页的位置），然后您会在超链接中看到您的报告路径 + 您的报告名称。

*   单击超链接的报告名称，然后它将打开包含订阅的管理页面。
*   单击订阅，现在您可以添加新订阅。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T19:54:09.203

据我所知，没有像 server 2013 这样的服务器 - 但我怀疑这特别重要。SSRS 2008 R2 部署的 2 个端点是 localhost/ReportServer 和 localhost/Reports - 报告是报表管理器端点，尽管我想您可以在配置管理器中重命名它。IIS 中没有为这些端点设置 - SSRS 直接处理，因此 IIS 中的任一端点都没有节点可配置。

我正在查看我安装的 ReportManager，但我没有看到任何内容或属性的“选项卡” - 为什么您认为它们应该存在？

我知道我们不应该寻求澄清问题，但我不知道如何回答您提出的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-02T22:07:57.197

我在使用 IE Edge 时遇到了同样的问题，最简单的解决方案是在 IE Edge 中获得报告列表后，单击右上角的省略号 (...)，然后选择使用 Internet Explorer 打开。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-28T14:53:15.117

现在这是一个非常古老的话题，但如果像我这样的人在 IE 即将结束时仍然挣扎。我所做的是我现在从 IE 获取 URL，而我仍然可以正常工作，因此我可以在 Edge 和 Chrome 中使用相同的格式，通过手动更改 URL 来访问选项。

"报表服务器 url"/Reports/Pages/Report.aspx?ItemPath=/"报表文件夹名称"/"报表名称"&SelectedTabId=PropertiesTab

例如 [https://example.com/Reports/Pages/Report.aspx?ItemPath=/myreportfolder/myreport&SelectedTabId=PropertiesTab](https://example.com/Reports/Pages/Report.aspx?ItemPath=/myreportfolder/myreport&SelectedTabId=PropertiesTab)

# c# - nhibernate 外键必须与引用的主键具有相同的列数

> ID：15144159
> 
> 赞同：0
> 
> 时间：2013-02-28T19:37:29.910
> 
> 标签：c#, sql-server-2005, nhibernate, fluent-nhibernate

我正在使用 NHibernate 3.3 和 FluentNHibernate 1.3。

我的数据库有两个表：InvoiceHeader 和 InvoiceDetail。标题有一个由两列组成的复合键。详细信息有一个单列主键。问题是细节没有组合键的两个部分；它只有其中的一部分。不存在外键约束。

```
public class TInvoiceHeader 
{
    public virtual TInvoiceHeaderIdentifier Identifier { get; set; }
    public virtual long Dwinvoiceid { get; set; }
    public virtual int InvTimeID { get; set; }
    public virtual IList<TInvoiceDetail> Details { get; set; }
    ....
}

public class TInvoiceHeaderIdentifier
{
    public virtual long Dwinvoiceid { get; set; }
    public virtual int InvTimeID { get; set; }
    ....
}

public TInvoiceHeaderMap() 
{
    CompositeId<TInvoiceHeaderIdentifier>(x => x.Identifier)
        .KeyProperty(x => x.Dwinvoiceid, "DWInvoiceID")
        .KeyProperty(x => x.InvTimeID, "InvTimeID");
    HasMany<TInvoiceDetail>(x => x.Details).KeyColumn("DWInvoiceID");
    ....
}

public class TInvoiceDetail 
{
    public virtual TInvoiceHeader Header { get; set; }
    public virtual long Dwinvoicedetailid { get; set; }
    public virtual long Dwinvoiceid { get; set; }
    ....
}

public TInvoiceDetailMap() 
{
    Table("tInvoiceDetail");
    LazyLoad();
    Id(x => x.Dwinvoicedetailid).GeneratedBy.Identity().Column("DWInvoiceDetailId");
    References<TInvoiceHeader>(x => x.Dwinvoiceid);
    ....
} 
```

我不知道如何进行这项工作，因为详细信息行没有 InvTimeID 键。我越来越：

> NHibernate.Cfg.Configuration - 外键 (FKAD4039AB666D3F7:tInvoiceDetail [DWInvoiceID])) 必须具有与引用的主键相同的列数 (tInvoiceHeader [DWInvoiceID, InvTimeID]) NHibernate.FKUnmatchingColumnsException: 外键 (FKAD4039AB666D3F7:tInvoiceDetail [DWInvoiceID]) ) 必须与 NHibernate.Mapping.ForeignKey.AlignColumns() 中 NHibernate.Cfg.Configuration.SecondPassCompileForeignKeys 中 NHibernate.Mapping.ForeignKey.AlignColumns(Table referencedTable) 中引用的主键 (tInvoiceHeader [DWInvoiceID, InvTimeID]) 具有相同数量的列（表表，ISet 完成） NHibernate.Cfg.Configuration - 外键 (FKAD4039AB666D3F7:tInvoiceDetail [DWInvoiceID])) 必须具有与引用的主键 (tInvoiceHeader [DWInvoiceID, InvTimeID]) NHibernate 相同的列数。FKUnmatchingColumnsException：外键 (FKAD4039AB666D3F7:tInvoiceDetail [DWInvoiceID])) 的列数必须与 NHibernate.Mapping.ForeignKey.AlignColumns(Table referencedTable) 在 NHibernate.Mapping.ForeignKey 的引用主键 (tInvoiceHeader [DWInvoiceID, InvTimeID]) 的列数相同NHibernate.Cfg.Configuration.SecondPassCompileForeignKeys 的 .AlignColumns()（表表，ISet 完成）

这能行吗？我的查询将始终从标题到详细信息，反之亦然。我无法修改表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T19:07:07.503

我在升级 nHibernate 和 Fluent nHibernate 后遇到了这个问题。看起来它与列名混淆了。

解决方案是手动命名我的列，问题就消失了。

```
public void Override(AutoMapping<Record> mapping)
    {
        mapping.Id(x => x.Id).Column("RecordId");
        mapping.Map(x => x.Name).Not.Nullable();
        mapping.References(x => x.Parent).Not.Nullable().Column("ParentRecordId");
        mapping.References(x => x.Type).Not.Nullable().Column("TypeId");
    } 
```

# matlab - 在 3D 图像中找到局部最大值

> ID：15144163
> 
> 赞同：0
> 
> 时间：2013-02-28T19:37:45.730
> 
> 标签：matlab, 3d, processing

我想使用 3D blob 检测器，它是一种过滤算法，用于检测图像中的球形物体。在此过滤器中，值大于其 26 邻域中所有像素的体素设置为 1

```
(s(x,y,z)=max(n26(x,y,z))) 
```

并且每隔一个像素设置为`0`。matlab 中是否有任何功能可以完成这项工作？

```
M(x,y,z)={ 1 if s(x,y,z)=max(n26(x,y,z))   
           0 otherwise 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:49:49.983

找到局部最大值的最简单方法是使用`imdilate`：

```
%# s = 3D array
msk = true(3,3,3);
msk(2,2,2) = false;
%# assign, to every voxel, the maximum of its neighbors
s_dil = imdilate(s,msk);
M = s > s_dil; %# M is 1 wherever a voxel's value is greater than its neighbors 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T08:23:54.673

matlabs自己[`imregionalmax`](http://www.mathworks.de/de/help/images/ref/imregionalmax.html?searchHighlight=imregionalmax)从一开始就支持26n，输出是合乎逻辑的。

8n 的二维示例：

```
A =

     1     1     1     1     1     1     1     1
     1     3     3     3     1     1     4     1
     1     3     5     3     1     4     4     4
     1     3     3     3     1     4     4     4
     1     1     1     1     1     4     6     4
     1     1     1     1     1     4     4     4

>> B = imregionalmax(A);
>> B

B =

     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0
     0     0     1     0     0     0     0     0
     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     1     0
     0     0     0     0     0     0     0     0 
```

# python - 错误，删除 EPD 后使用已弃用的类 PySimpleApp

> ID：15144168
> 
> 赞同：4
> 
> 时间：2013-02-28T19:38:14.563
> 
> 标签：python, macos, matplotlib, wxpython

我在 Mac OSX 10.8.2 上使用 spyder，我卸载了 Enthought。在我的代码中，我使用了 matplotlib 中的 pyplot。但是，当我运行简单的绘图程序时，我不断收到以下警告。

```
 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_wx.py:1382: wxPyDeprecationWarning: Using deprecated class PySimpleApp. 
      wxapp = wx.PySimpleApp() 
```

我尝试了 pip，手动安装 matplotlib 并没有帮助。我该怎么办？这些是我与绘图相关的代码行：

```
markerSize=400;
fig = plt.gcf()
plt.scatter(X,Y,marker='+',s=markerSize)
circle=plt.Circle((X[i]+k*meshStep,Y[i]+j*meshStep),frequency/magnification,color='r');
fig.gca().add_artist(circle)
plt.xlim(min(X)-1,max(X)+1)
plt.ylim(min(Y)-1,max(Y)+1) 
```

在卸载 Enthought 之前，我没有遇到这个问题，我的图形有缩放和移动按钮，但现在我只得到图形本身。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T19:48:16.527

您应该使用`wx.App(False)`而不是`wx.PySimpleApp`. `PySimpleApp`在 wxPython 2.9 中已被弃用。`wx.App(False)`基本上做同样的事情。

# java - Java ArrayList 的复杂排序

> ID：15144175
> 
> 赞同：1
> 
> 时间：2013-02-28T19:38:37.153
> 
> 标签：java, sorting, alphanumeric

我将以下字符串存储在`trendList`变量中。我做了一个排序，但数据没有正确排序。

即`ACLK_SCRN_200MHZ_DATAB_S0_P1:8`应该在之前 `ACLK_SCRN_200MHZ_DATAB_S0_P10:8`

因为`1 < 10`，以此类推，其余的字符串。

问题：如何进行这种字母数字排序以获得正确的顺序？

我必须制作自己的功能吗？那会是什么样子？

```
List<String> trendList = new ArrayList<String>(80000);

Collections.sort(trendList);

ACLK_SCRN_200MHZ_DATAB_S0_P0:8
ACLK_SCRN_200MHZ_DATAB_S0_P10:8
ACLK_SCRN_200MHZ_DATAB_S0_P11:8
ACLK_SCRN_200MHZ_DATAB_S0_P12:8
ACLK_SCRN_200MHZ_DATAB_S0_P13:8
ACLK_SCRN_200MHZ_DATAB_S0_P14:8
ACLK_SCRN_200MHZ_DATAB_S0_P15:8
ACLK_SCRN_200MHZ_DATAB_S0_P1:8
ACLK_SCRN_200MHZ_DATAB_S0_P2:8
ACLK_SCRN_200MHZ_DATAB_S0_P3:8
ACLK_SCRN_200MHZ_DATAB_S0_P4:8
ACLK_SCRN_200MHZ_DATAB_S0_P5:8
ACLK_SCRN_200MHZ_DATAB_S0_P6:8
ACLK_SCRN_200MHZ_DATAB_S0_P7:8
ACLK_SCRN_200MHZ_DATAB_S0_P8:8
ACLK_SCRN_200MHZ_DATAB_S0_P9:8
ACLK_SCRN_200MHZ_DATAB_S1_P0:8
ACLK_SCRN_200MHZ_DATAB_S1_P10:8
ACLK_SCRN_200MHZ_DATAB_S1_P11:8
ACLK_SCRN_200MHZ_DATAB_S1_P12:8
ACLK_SCRN_200MHZ_DATAB_S1_P13:8
ACLK_SCRN_200MHZ_DATAB_S1_P14:8
ACLK_SCRN_200MHZ_DATAB_S1_P15:8
ACLK_SCRN_200MHZ_DATAB_S1_P1:8
ACLK_SCRN_200MHZ_DATAB_S1_P2:8
ACLK_SCRN_200MHZ_DATAB_S1_P3:8
ACLK_SCRN_200MHZ_DATAB_S1_P4:8
ACLK_SCRN_200MHZ_DATAB_S1_P5:8
MLC_C_SAMPLE
MLC_SAMPLE
SWR
TOUCHDOWN
TEST_REV 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:47:09.867

您可以使用自己的 Comparator 执行此操作：

```
class TrendListComparator implements Comparator<String> {
     // retrieve the P and S
     final Pattern p = Pattern.compile(".*_S(\\d+)_P(\\d+).*");
     public int compare(String str1, String str2) {
         Matcher m1 = p.matcher(str1);
         Matcher m2 = p.matcher(str2);
         if (m1.matches() && m2.matches()) {
             Integer s1 = Integer.valueOf(m.group(1));
             Integer p1 = Integer.valueOf(m.group(2));
             Integer s2 = Integer.valueOf(m.group(1));
             Integer p2 = Integer.valueOf(m.group(2));
             // compare
             return s1.equals(s2) ? p1.compareTo(p2) : s1.compareTo(s2);
         } else {
             return str1.compareTo(str2); // standard sort if no P and S
         }
     }
}

Collections.sort(trendList, new TrendListComparator()); 
```

你可以在这里看到一个运行的例子：http: [//ideone.com/AleOEy](http://ideone.com/AleOEy)

您甚至可以只使用一个 Matcher 并在同一排序期间一直重复使用它：

```
class TrendListComparator implements Comparator<String> {
     // retrieve the P and S
     final Matcher m = Pattern.compile(".*_S(\\d+)_P(\\d+).*_S(\\d+)_P(\\d+).*").matcher("");
     public int compare(String str1, String str2) {
         if (m.reset(str1 + str2).matches()) {
             Integer s1 = Integer.valueOf(m.group(1));
             Integer p1 = Integer.valueOf(m.group(2));
             Integer s2 = Integer.valueOf(m.group(3));
             Integer p2 = Integer.valueOf(m.group(4));
             // compare
             return s1.equals(s2) ? p1.compareTo(p2) : s1.compareTo(s2);
         } else {
             return str1.compareTo(str2); // standard sort if no P and S
         }
     }
} 
```

见：http: [//ideone.com/EsfFPj](http://ideone.com/EsfFPj)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:42:19.683

你得到这个结果是因为它只使用默认的 String.compareTo 比较字符串，它使用原始字符代码。':' 出现在 '0'-'9' 之后，因此它会在之后进行整理。

您需要自己提供`Comparator`并致电

```
Collections.sort(trendList, new CustomComparator()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:44:53.957

您可以创建自己的实现[`Comparator<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)接口的类。在该`compare`方法中，您将需要解析字符串并从字符串的相关部分中提取需要按数字排序的数字。如果 s1 小于 s2，则该方法应返回一个小于 0 的数字，如果 s1 等于 s2 则返回 0，如果 s1 大于 s2 则返回大于 0 的数字。

```
public class MyTrendListComparator implements Comparator<String>
{
    public int compare(String s1, String s2)
    {
        // Parse and compare here.
    }
} 
```

然后将比较器的实例传递给`Collections.sort`：

```
Collections.sort(trendList, new MyTrendListComparator()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T19:45:47.680

您可以将自定义比较器传递给`Collections.sort()`函数：

```
Collections.sort(trendList, new Comparator<String>() {

    @Override
    public int compare(String s1, String s2) {
        int sValue1 = s1.split(...) // split the strings to retrieve their values
        int sValue2 = // ...
        int pValue1 = // ...
        int pValue2 = // ...
        if (sValue1 > sValue2) { return 1; }
        if (sValue1 < sValue2) { return -1; }
        if (pValue1 > pValue2) { return 1; }
        if (pValue 1 < pValue2) { return -1; }
        return 0;
    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T19:54:40.650

这是代码：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class CustomSorter {
   public static void main( String[] args ) {
      String[] data = {
         "ACLK_SCRN_200MHZ_DATAB_S0_P0:8",
         "ACLK_SCRN_200MHZ_DATAB_S0_P10:8",
         ...
         "ACLK_SCRN_200MHZ_DATAB_S1_P4:8",
         "ACLK_SCRN_200MHZ_DATAB_S1_P5:8",
      };
      List<String> trendList = Arrays.asList( data );
      Collections.sort( trendList, new Comparator< String >(){
         @Override public int compare( String o1, String o2 ){
            String[] p1 = o1.split( "_S\\d+_P" );
            String[] p2 = o2.split( "_S\\d+_P" );
            if( p1.length != 2 ) {
               throw new IllegalStateException("Unexpected item: '"+o1+"'");
            }
            if( p2.length != 2 ) {
               throw new IllegalStateException("Unexpected item: '"+o1+"'");
            }
            final int i1;
            try{
               i1 = Integer.parseInt(p1[1].substring(0,p1[1].indexOf(':')));
            } catch( NumberFormatException x ) {
               throw new IllegalStateException( "Unexpected item: '"+o1+"'");
            }
            final int i2;
            try{
               i2 = Integer.parseInt(p2[1].substring(0,p2[1].indexOf(':')));
            } catch( NumberFormatException x ) {
               throw new IllegalStateException("Unexpected item: '"+o2+"'");
            }
            int cmp = p1[0].compareTo( p2[0] );
            if( cmp == 0 ) {
               cmp = i1 - i2;
            }
            return cmp;
         }});
      for( String entry : trendList ) {
         System.out.println( entry );
      }
   }
} 
```

和输出：

```
ACLK_SCRN_200MHZ_DATAB_S0_P0:8
ACLK_SCRN_200MHZ_DATAB_S0_P1:8
ACLK_SCRN_200MHZ_DATAB_S0_P2:8
ACLK_SCRN_200MHZ_DATAB_S0_P3:8
ACLK_SCRN_200MHZ_DATAB_S0_P4:8
ACLK_SCRN_200MHZ_DATAB_S0_P5:8
ACLK_SCRN_200MHZ_DATAB_S0_P6:8
ACLK_SCRN_200MHZ_DATAB_S0_P7:8
ACLK_SCRN_200MHZ_DATAB_S0_P8:8
ACLK_SCRN_200MHZ_DATAB_S0_P9:8
ACLK_SCRN_200MHZ_DATAB_S0_P10:8
ACLK_SCRN_200MHZ_DATAB_S0_P11:8
ACLK_SCRN_200MHZ_DATAB_S0_P12:8
ACLK_SCRN_200MHZ_DATAB_S0_P13:8
ACLK_SCRN_200MHZ_DATAB_S0_P14:8
ACLK_SCRN_200MHZ_DATAB_S0_P15:8
ACLK_SCRN_200MHZ_DATAB_S1_P0:8
ACLK_SCRN_200MHZ_DATAB_S1_P1:8
ACLK_SCRN_200MHZ_DATAB_S1_P2:8
ACLK_SCRN_200MHZ_DATAB_S1_P3:8
ACLK_SCRN_200MHZ_DATAB_S1_P4:8
ACLK_SCRN_200MHZ_DATAB_S1_P5:8
ACLK_SCRN_200MHZ_DATAB_S1_P10:8
ACLK_SCRN_200MHZ_DATAB_S1_P11:8
ACLK_SCRN_200MHZ_DATAB_S1_P12:8
ACLK_SCRN_200MHZ_DATAB_S1_P13:8
ACLK_SCRN_200MHZ_DATAB_S1_P14:8
ACLK_SCRN_200MHZ_DATAB_S1_P15:8 
```

# javascript - 如何获取选中的单选按钮的值？

> ID：15144179
> 
> 赞同：3
> 
> 时间：2013-02-28T19:38:39.923
> 
> 标签：javascript, radio-button

我将这个简单的脚本附加到调查问卷中，并且在将所选答案显示在文本区域中时遇到问题。这是脚本：

```
function check() {
  var complete = 0;
  var total = 0;

  for (i=0;i<document.form.length;i++)
  {
     if (document.form.elements[i].checked == true && complete < 10) {
        complete++;
        total = (total) + (Math.round(document.form.elements[i].value));
     }
  }

  if (complete >= 10) {
     document.form.message.value = document.form.question1.value;
  }
} 
```

这是HTML：

```
<input type="radio" value="1" name="question1" onclick="check()"> A<br />
<input type="radio" value="2" name="question1" onclick="check()"> B<br />
<input type="radio" value="3" name="question1" onclick="check()"> C<br />
<input type="radio" value="4" name="question1" onclick="check()"> D<br />

<input type="radio" value="1" name="question2" onclick="check()"> E<br />
<input type="radio" value="2" name="question2" onclick="check()"> F<br />
<input type="radio" value="3" name="question2" onclick="check()"> G<br />
<input type="radio" value="4" name="question2" onclick="check()"> H<br />

<textarea name="message"></textarea> 
```

我希望返回值，但我得到`undefined`. 如果我更改脚本中返回文本的行：

```
 document.form.message.value = document.form.question1; 
```

我明白了`[object NodeList]`。我知道我错过了一些如此简单的东西，但我一生都找不到它。

另外，我是否可以将字母 A 到 H 连同值一起返回？我知道我可以用字母替换值，但需要那里的数字进行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:18:37.480

你在你的脚本中引用一个表单元素，你定义了一个表单吗？

答案似乎在这里得到解决 [Attach event listener through javascript to radio button](https://stackoverflow.com/questions/8922002/attach-event-listener-through-javascript-to-radio-button)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:57:01.017

我的回答是假设您希望`<textarea>`填充类似于以下内容的文本：

*用户对问题 A 回答了 1*

*用户对问题 F 回答了 2*

为了让**A**或**F**回传，我需要通过以下方式修改您的 html：

```
<input type="radio" value="1" name="question1" onclick="check(this, 'A')"> A<br />
<input type="radio" value="2" name="question1" onclick="check(this, 'B')"> B<br />
<input type="radio" value="3" name="question1" onclick="check(this, 'C')"> C<br />
<input type="radio" value="4" name="question1" onclick="check(this, 'D')"> D<br />

<input type="radio" value="1" name="question2" onclick="check(this, 'E')"> E<br />
<input type="radio" value="2" name="question2" onclick="check(this, 'F')"> F<br />
<input type="radio" value="3" name="question2" onclick="check(this, 'G')"> G<br />
<input type="radio" value="4" name="question2" onclick="check(this, 'H')"> H<br />

<textarea name="message"></textarea> 
```

否则，字母和无线电输入之间没有实际联系。

无论如何，这就是我所做的：

我注意到每个组都在重复相同的功能，所以我创建了一个对象构造函数：

```
var Answer = function () {
    this.text = '';
}; 
```

`this.text`将包含每组的特殊答案字符串。

现在让我们创建两个答案组对象：

```
var answerOne = new Answer();
var answerTwo = new Answer(); 
```

接下来是`check()`我们传递输入元素及其相关答案字符的函数：

```
var check = function (_input, _question) {
    if (_input.name === "question1") {
        answerOne.text = "User answered " + _input.value + " for Question " + _question + "\n";
    }
    if (_input.name === "question2") {
        answerTwo.text = "User answered " + _input.value + " for Question " + _question + "\n";
    }
    document.getElementsByName('message')[0].value = answerOne.text + answerTwo.text;
}; 
```

现在，当用户选择一个答案时，相应的答案组的字符串会相应地更新，而不会影响其他组的答案字符串。

这是一个 jsfiddle 工作：http: [//jsfiddle.net/smokinjoe/uC76f/13/](http://jsfiddle.net/smokinjoe/uC76f/13/)

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:42:09.217

在这里，您可以找到完整的解决方案。

您的代码中有几处出错了。1\. 你从广播组获取价值的方式。您需要迭代并找出选中的内容 2\. 将值设置为 textarea。你需要做`getElemenetsByName[x]`

```
<script>
function check() {
  var complete = 0;
  var total = 0;

    var x = document.getElementsByTagName('input');
    for(var k=0;k<x.length;k++){

            if (x[k].checked && complete < 10) {
                complete++;
                total = total + Math.round(x[k].value);
            } 

    }    

    (document.getElementsByName('message')[0]).value = total;       
}

</script>
<input type="radio" value="1" name="question1" onclick="check()"> A<br />
<input type="radio" value="2" name="question1" onclick="check()"> B<br />
<input type="radio" value="3" name="question1" onclick="check()"> C<br />
<input type="radio" value="4" name="question1" onclick="check()"> D<br />

<input type="radio" value="1" name="question2" onclick="check()"> E<br />
<input type="radio" value="2" name="question2" onclick="check()"> F<br />
<input type="radio" value="3" name="question2" onclick="check()"> G<br />
<input type="radio" value="4" name="question2" onclick="check()"> H<br />

<textarea name="message"></textarea> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T19:42:49.267

因为它是一个单选按钮，所以您需要遍历所有值以找到已选择的值。像这样的东西应该工作：

```
for (var i=0; i < document.form.question1.length; i++)
   {
   if (document.form.question1[i].checked)
      {
       document.form.message.value = document.form.question1[i].value;
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T17:03:03.397

没有对此进行测试，并且由于我不知道您的表格的名称（或 ID），或者您的文档中有多少表格，我已经通过它的 ID 引用了您的表格。

```
function check() {
    var complete = 0;
    var total = 0;
    var formId = 'EnterYourFormId';  // This could be passed as a paramter to the function instead (e.g. "function check(formId) {")
    var _from = document.getElementById(formId);  // The form could also be referenced by it's index, e.g. document.forms[0]

    for (i=0; i < _from.elements.length; i++) {
        if (_from.elements[i].type=='checkbox' && _from.elements[i].checked && complete < 10) {
            complete++;
            total = total + parseInt(_from.elements[i].value);
        }
     }

     if (complete >= 10) {
         _form.message.value = _form.question1.value;
     }
} 
```

# jquery - 使用 jQuery 抓取点击 src attr 的当前图像

> ID：15144182
> 
> 赞同：0
> 
> 时间：2013-02-28T19:38:46.887
> 
> 标签：jquery

试图获取当前图像选择的 src 值。

这是我的脚本

```
<script type="text/javascript">
      $(document).ready(function() {     
          $('#imagefiles ul li img').click(function() {
              var img = $this.attr('src');
                  alert(img);
          });
      });
</script> 
```

当我单击图像时，它说找不到变量`$this`。

关于我做错了什么或如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:40:14.677

使用`$(this)`, 不要`$this`将元素包装为 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:40:51.450

试试 $(this) 而不是 $this。

```
$('#imagefiles ul li img').click(function() { 
  var img = $(this).attr('src'); 
  alert(img); 
}); 
```

# actionscript-3 - 当一个类声明为final时，每个方法是否也自动声明为final？

> ID：15144185
> 
> 赞同：3
> 
> 时间：2013-02-28T19:39:03.813
> 
> 标签：actionscript-3, apache-flex, optimization, final

我知道如果一个类被声明为final，那么它的方法实际上是无法被覆盖的，因为首先需要一个子类来覆盖它们。话虽如此，我想知道这是否仍然与在该类中的每个方法前面输入“final”完全一样。

我问这个的原因是让方法最终可能会导致它们中的一些运行得更快；我想知道的是，对于已声明为 final 的类中的所有方法，这种加速优势是否自动平等地存在，或者您是否必须显式地将方法设为 final 才能获得这种优势。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:32:38.430

你不能扩展最终类，所以你不能覆盖它的方法。谈论方法是否是最终的并没有真正的意义。

final 方法的理论速度提高是因为编译器可以在有意义的情况下*内联函数。*很难准确预测编译器何时会这样做，而且大多数情况下您不会注意到差异。它没有记录（或据我所知），但我想启发式将基于函数的简短性以及是否在循环中使用。在这种情况下，函数包装器的开销与其包含的代码相比将变得非常重要。

`arguments`注意：对于使用该对象的函数，内联是不可能的。

在实践中，您几乎不会注意到速度差异。但是，如果您可以构建一个可以测量的案例，您可以通过将类设为 final 而不是方法来轻松进行测试。

**编辑：** FWIW，我试过了，无法衡量使用`final`方法和不使用方法之间的区别。`final`在课堂上使用也是一样的。[这个 SO 答案](https://stackoverflow.com/questions/8890160/are-there-any-benefits-when-using-final-in-as3) 得出了相同的结论。

# html - 表格宽度左右滚动网站

> ID：15144189
> 
> 赞同：0
> 
> 时间：2013-02-28T19:39:21.030
> 
> 标签：html, css, alignment

我很困惑是什么原因造成的。我有重复的站点，但在其中一个站点中，我有一个表格导致我的站点左右滚动。

使用 Web 开发人员工具栏，我可以勾勒出显示被推出的表格的表格。请参见图 1。

![在此处输入图像描述](../Images/fbb26e3e0e8576812901834b3522e2bd.png)

这是链接... [http://goo.gl/0r2if](http://goo.gl/0r2if) 此外，我已经尝试了 Firebug 中的所有内容，看看是否可以强制该表变小而没有任何快乐。

![在此处输入图像描述](../Images/7e743fe7f8eaeaa9cf9bc6bd7ce3d4c0.png) 我还将它与另一个站点进行了比较，该站点只是这个站点的复制品，似乎找不到区别。

我还搜索了是否可以在表格中找到奇怪的 100% 宽度的东西，但我尝试过的任何东西都没有奏效。

毫无疑问，这将是一个简单的错误，但我想我只需要对此有一些新的看法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:45:55.950

继续购物链接具有 css 值`width: 1083px;`

```
<a class="continue-shopping" href="/products/">Continue shopping</a>

#shoppingcartcontents a.continue-shopping {
    color: #9F1B32;
    display: block;
    font: 15px 'another_typewriterregular',arial,helvetica,sans-serif;
    padding-top: 10px;
    width: 1083px;
} 
```

它在购物车表的最后一行内，所以这就是它的原因。删除宽度，它是固定的。

# apache - 是否可以在 RewriteCond 的 CondPattern 中使用 mod_rewrite 服务器变量？

> ID：15144190
> 
> 赞同：10
> 
> 时间：2013-02-28T19:39:22.843
> 
> 标签：apache, mod-rewrite

使用[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)，我想使用服务器变量作为 a 的一部分`CondPattern`，`RewriteCond`例如：

```
RewriteCond %{HTTP_HOST} !^%{SERVER_NAME} [NC]
                           ^^^^^^^^^^^^^^ 
```

这将非常有用。我知道这`CondPattern`是一个与 Perl 兼容的正则表达式，这意味着例如`{}`我的示例中的字符需要以某种方式转义。我保持原样只是为了展示这个想法。

据我所知，上述文档没有提到任何关于它的内容，并且谷歌搜索我无法找到任何确定的内容。我的直觉是答案是*否定*的，但我想确定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-20T02:43:51.030

`CondPattern`不会扩展`%{VAR}`变量或`%N`对前一个的反向引用`RewriteCond`，所以大卫的建议

```
RewriteCond %{SERVER_NAME} ^(.*)$
RewriteCond %{HTTP_HOST} !%1 
```

`%{HTTP_HOST}`只要不包含文字 string就会成功`%1`，这不是您想要的。

根据您的示例，您想要什么

```
RewriteCond %{HTTP_HOST} !^%{SERVER_NAME} [NC] 
```

如果`HTTP_HOST`不以`SERVER_NAME`（不区分大小写）开头，则匹配。`RewriteCond`如果您包含`SERVER_NAME`在 中，则可以使用单个来实现这一点`TestString`，在正则表达式中捕获它，并使用`\N`它再次引用它：

```
RewriteCond "%{SERVER_NAME} %{HTTP_HOST}" "!(^[^ ]*) \1" [NC] 
```

正则表达式使用空格分隔`SERVER_NAME`，`HTTP_HOST`因为两个变量都不能有空格。

## Apache 表达式（2.4 及更高版本）

如果您实际上只是想测试 if `SERVER_NAME`equals ，使用[Apache 表达式](http://httpd.apache.org/docs/current/expr.html)`HTTP_HOST`会更简单：

```
# Case-sensitive comparison.
RewriteCond expr "%{HTTP_HOST} == %{SERVER_NAME}" 
```

或者

```
# Case-insensitive comparison.
RewriteCond expr "tolower(%{HTTP_HOST}) == tolower(%{SERVER_NAME})" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:01:11.777

不，你不能像那样直接使用变量，但你可以做的是这样的：

```
RewriteCond %{SERVER_NAME} ^(.*)$
RewriteCond %{HTTP_HOST} !%1 
```

第一行应始终匹配并捕获 SERVER_NAME。然后第二行使用捕获的值与 HTTP_HOST 进行比较。

# javascript - 处理多个滑动事件 HTML & Javascript/jQuery

> ID：15144191
> 
> 赞同：1
> 
> 时间：2013-02-28T19:39:26.697
> 
> 标签：javascript, android, html, ios, swipe

我目前正在尝试制作基于 HTML5 和 Javascript 的移动多人游戏。我使用 jQuery 插件“touchwipe”来处理不同 div 中的滑动事件，如下所示：

```
$('#play1').touchwipe({
            wipeLeft:   function(){ if(d1!="right") d1 = "left"; },
            wipeRight:  function(){ if(d1!="left") d1 = "right" },
            wipeUp:     function(){ if(d1!="up") d1 = "down" },
            wipeDown:   function(){ if(d1!="down") d1 = "up"}               
        })  

$('#play2').touchwipe({
            wipeLeft:   function(){ if(d2!="right") d2 = "left" },
            wipeRight:  function(){ if(d2!="left") d2 = "right"   },
            wipeUp:     function(){ if(d2!="up") d2 = "down"  },
            wipeDown:   function(){ if(d2!="down") d2 = "up" }
        }) 
```

当玩家不同时滑动时效果很好但是如果两个玩家同时滑动我该怎么做才能调用事件（例如玩家 1 向左滑动而玩家 2 同时向右滑动所以 d1 = “左”和d2 =“右”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T15:55:53.403

手机本身不处理多个滑动手势。您可以通过将两根手指放在触摸屏上来了解其工作原理。向 1 个方向滑动 1 个，另一个向相反方向滑动。没有队列可以对事件进行排序，因此只有捕获硬件的人才会中断。因此，第二个事件甚至永远不会在硬件级别触发，因此它无法在软件中排队。

将游戏扩展到 2 个设备，或使用点击事件（更容易封装和排队）可能会更好。

# java - Winsock2 & JNA，无法让 WSAEnumProtocols() 正常工作

> ID：15144192
> 
> 赞同：0
> 
> 时间：2013-02-28T19:39:28.173
> 
> 标签：java, jna, winsock2

*（也许我用烦人的细节解释了这个问题，tl;dr 版本在底部）*

我一直在尝试使用 JNA 在 Java 中创建一个简单的 Winsock 测试应用程序。我调用的第一个函数是 WSAStartup()，使用以下代码：

```
public interface Ws2_32 extends Library {
    Ws2_32 INSTANCE = (Ws2_32) Native.loadLibrary("ws2_32", Ws2_32.class);

    int WSAStartup(short version, LPWSADATA lpwsaData);

}

public static void main(String[] args){
    LPWSADATA   lpwsaData = new LPWSADATA();
    short       version = 2;
    int         result = Ws2_32.INSTANCE.WSAStartup(version,lpwsaData);

    System.out.println("WSAStartup() returned: " + result);

    if((resultado = Ws2_32.INSTANCE.WSAStartup(version,lpwsaData)) == 0){
        System.out.println("LPWSADATA struct:");
        System.out.println("wVersion: " + lpwsaData.wVersion);
        System.out.println("wHighVersion: " + lpwsaData.wHighVersion);

        System.out.print("szDescription: ");
        for(byte b : lpwsaData.szDescription){
            System.out.print((char) b);
        }
        System.out.print("\n");

        System.out.print("szSystemStatus: ");
        for(byte b : lpwsaData.szSystemStatus){
            System.out.print((char) b);
        }
        System.out.print("\n");

        System.out.println("iMaxSockets: " + lpwsaData.iMaxSockets);
        System.out.println("iMaxUdpDg: " + lpwsaData.iMaxUdpDg");
    }
} 
```

这有效，我得到以下值：

> w版本：2
> 
> wHighVersion：514
> 
> szDescription: WinSock 2.0
> 
> szSystemStatus：正在运行
> 
> iMaxSockets: 0
> 
> iMaxUdpDg: 0

WSAStartup() 成功返回后，我尝试调用 WSAEnumProtocols() 但出现以下错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：查找函数“WSAEnumProtocols”时出错：找不到指定的过程。

然后我使用 Dependency Walker 打开 ws2_32.dll，我发现没有同名的函数。我只找到了 3 个名称相似的：WSAEnumProtocolsA()、WSAEnumProtocolsW() 和 WSCEnumProtocols()。我将使用 WSAEnumProtocolsA() 作为示例，但我对所有 3 个都使用了下一个过程并得到了相同的结果：

首先我调用了 WSAStartup() 并且没有返回错误。根据 WSAEnumProtocols 的 MSDN 定义，第一次调用该函数应该是这样的：缓冲区。如果该长度为零，则函数应返回 -1 (SOCKET_ERROR)，并且对 WSAGetLastError() 的调用应返回 WSAENOBUFS，这意味着缓冲区不够大，无法包含 WSAEnumProtocols() 返回的信息，应设置变量 lpdwBufferLength具有可以传递给 WSAEnumProtocols 以检索所有请求信息的最小缓冲区大小。我不能让它工作。

我还尝试使用 WSASetLastError() 并将其设置为其他错误代码，然后调用 WSAGetLastError()，但它始终返回 0。

**tl;博士** 我无法让 WSAEnumProtocols(null, wsaprotocol_info, lpdwBufferLength) 工作。WSAEnumProtocols() 返回 -1 但 lpdwBufferLength 的值没有改变， WSAGetLastError() 返回 0 而不是 10055 (WSAENOBUFS)

**更新：**

这是我用来声明 Winsock 函数的接口

```
public interface Ws2_32 extends Library {
    Ws2_32 INSTANCE = (Ws2_32) Native.loadLibrary("ws2_32", Ws2_32.class);

    int WSAStartup(short version, LPWSADATA lpwsaData);
    int WSAEnumProtocolsW(int[] lpiProtocols, WSAPROTOCOL_INFO lpProtocolBuffer, int lpdwBufferLength);
    int WSACleanup();
    int WSAGetLastError();
    int WSASetLastError(int iError);
} 
```

这是我调用函数的代码：

```
public class TestWSAEnumProtocolsA {

    public void start(){

        WSAPROTOCOL_INFO        wsaprotocol_info = new WSAPROTOCOL_INFO();
        LPWSADATA               lpwsaData = new LPWSADATA();
        int                     lpdwBufferLength = -2;
        int                     result = 0;
        short                   version = 514;

        if((result = Ws2_32.INSTANCE.WSAStartup(version, lpwsaData)) != 0){
            System.out.println("Error #" + result + " at WSAStartup()");
            return;
        } else {
            System.out.println("WSAStartup() finished correctly.");

            if((result = Ws2_32.INSTANCE.WSAEnumProtocols(null, wsaprotocol_info, lpdwBufferLength)) == -1){
                System.out.println("WSAEnumProtocolsW() returned: " + result);
                System.out.println("lpdwBufferLength is: " + lpdwBufferLength);

                System.out.println("WSAGetLastError() returned: " + Ws2_32.INSTANCE.WSAGetLastError());

                System.out.println("Now I'm setting it to 10004");
                Ws2_32.INSTANCE.WSASetLastError(10004);
                System.out.println("WSAGetLastError() returned: " + Ws2_32.INSTANCE.WSAGetLastError());
            }
        }
    }
} 
```

该代码产生以下输出：

> WSAStartup() 正确完成。
> 
> WSAEnumProtocolsW() 返回：-1
> 
> lpdwBufferLength 为：-2
> 
> WSAGetLastError() 返回：0
> 
> 现在我将其设置为 10004
> 
> WSAGetLastError() 返回：0

这就是我定义调用这些函数时使用的结构的方式：

```
public class WinSock2_structs {

    public static class LPWSADATA extends Structure{

        public short            wVersion;
        public short            wHighVersion;
        public byte             szDescription[] = new byte[256+1];
        public byte             szSystemStatus[] = new byte[128+1];
        public short            iMaxSockets;
        public short            iMaxUdpDg;
        public char             lpVendorInfo;       
}

    public static class WSAPROTOCOLCHAIN extends Structure{

        public int   ChainLen;
        public int   ChainEntries[] = new int[7];
    }

    public static class GUID extends Structure{

        public int      Data1;
        public short    Data2;
        public short    Data3;
        public short    Data4;
        public byte     Data5[] = new byte[8];

    }

    public static class WSAPROTOCOL_INFO extends Structure{

        public int                  dwServiceFlags1;
        public int                  dwServiceFlags2;
        public int                  dwServiceFlags3;
        public int                  dwServiceFlags4;
        public int                  dwProviderFlags;
        public GUID                 ProviderId;
        public int                  dwCatalogEntryId;
        public WSAPROTOCOLCHAIN     ProtocolChain;
        public int                  iVersion;
        public int                  iAddressFamily;
        public int                  iMaxSockAddr;
        public int                  iMinSockAddr;
        public int                  iSocketType;
        public int                  iProtocol;
        public int                  iProtocolMaxOffset;
        public int                  iNetworkByteOrder;
        public int                  iSecurityScheme;
        public int                  dwMessageSize;
        public int                  dwProviderReserved;
        public char                 szProtocol[] = new char[256];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:05:00.780

您正在调用`WSAStartup()`两次，这将要求您调用`WSACleanup()`两次才能正确卸载 WinSock。你应该只打电话`WSAStartup()`一次。

该结构的`szProtocol`成员是一个元素 `WSAPROTOCOL_INFO`数组。映射到或取决于调用应用程序是为 ANSI/MBCS 还是 UNICODE 编译的。这就是ws2_32.dll中没有函数的原因。相反，有单独的（对于 Ansi）和（对于 Unicode）函数。由于 Java 使用 Unicode 字符串，您应该让您的 JNA 代码使用. 不使用, only ，这就是为什么没有单独的and函数的原因。`TCHAR``TCHAR``char``wchar_t``WSAEnumProtocols()``WSAEnumProtocolsA()``WSAEnumProtocolsW()``WSAEnumProtocolsW()``WSAStartup()``TCHAR``char``WSAStartupA()``WSAStartupW()`

如果您的 JNA 代码无法获取`WSAEnumProtocols()`并`WSAGetLastError()`正常工作，则可能是您声明/使用错误，但您没有显示任何代码，因此没有人能确定为什么它不适合您。

**更新：**尝试这样的事情（我不使用 JNA，所以这可能需要一些调整，但这会给你一个大致的想法）：

```
public interface Ws2_32 extends Library {

    // I don't know how to declare fixed size arrays in JNA,
    // so you will have to adjust these Structue declarations
    // as needed...

    public static class WSAData extends Structure {
        short wVersion;
        short wHighVersion;
        byte  szDescription[257];
        byte  szSystemStatus[129];
        short iMaxSockets;
        short iMaxUdpDg;
        String lpVendorInfo;
    };

    public static class WSAPROTOCOLCHAIN extends Structure {
        int ChainLen;
        int ChainEntries[7];
    };

    public static class WSAPROTOCOL_INFOW extends Structure {
        int dwServiceFlags1;
        int dwServiceFlags2;
        int dwServiceFlags3;
        int dwServiceFlags4;
        int dwProviderFlags;
        GUID ProviderId;
        int dwCatalogEntryId;
        WSAPROTOCOLCHAIN ProtocolChain;
        int iVersion;
        int iAddressFamily;
        int iMaxSockAddr;
        int iMinSockAddr;
        int iSocketType;
        int iProtocol;
        int iProtocolMaxOffset;
        int iNetworkByteOrder;
        int iSecurityScheme;
        int dwMessageSize;
        int dwProviderReserved;
        char szProtocol[256];
    };

    Ws2_32 INSTANCE = (Ws2_32) Native.loadLibrary("ws2_32", Ws2_32.class);

    int WSAStartup(short version, WSADATA lpwsaData);
    int WSAEnumProtocolsW(int[] lpiProtocols, WSAPROTOCOL_INFOW[] lpProtocolBuffer, IntByReference lpdwBufferLength);
    int WSACleanup();
    int WSAGetLastError();
    int WSASetLastError(int iError);
} 
```

.

```
public static void main(String[] args){
    WSADATA     wsaData = new WSADATA();
    short       version = 2;
    int         result = Ws2_32.INSTANCE.WSAStartup(version, wsaData);

    System.out.println("WSAStartup() returned: " + result);

    if(result == 0){
        System.out.println("WSADATA struct:");
        System.out.println("wVersion: " + wsaData.wVersion);
        System.out.println("wHighVersion: " + wsaData.wHighVersion);

        System.out.print("szDescription: ");
        for(byte b : wsaData.szDescription){
            System.out.print((char) b);
        }
        System.out.print("\n");

        System.out.print("szSystemStatus: ");
        for(byte b : wsaData.szSystemStatus){
            System.out.print((char) b);
        }
        System.out.print("\n");

        System.out.println("iMaxSockets: " + wsaData.iMaxSockets);
        System.out.println("iMaxUdpDg: " + wsaData.iMaxUdpDg");
    }
} 
```

.

```
public class TestWSAEnumProtocolsA {

    public void start(){

        WSAPROTOCOL_INFOW[]     wsaprotocol_info = new WSAPROTOCOL_INFOW[1];
        WSADATA                 wsaData = new WSADATA();
        IntByReference          dwBufferLength = new IntByReference(628); // sizeof WSAPROTOCOL_INFOW, in bytes
        int                     result = 0;
        short                   version = 2;

        if((result = Ws2_32.INSTANCE.WSAStartup(version, wsaData)) != 0){
            System.out.println("Error #" + result + " at WSAStartup()");
            return;
        }

        System.out.println("WSAStartup() finished correctly.");

        if((result = Ws2_32.INSTANCE.WSAEnumProtocolsW(null, wsaprotocol_info, dwBufferLength)) == -1){
            System.out.println("WSAEnumProtocolsW() returned: " + result);
            System.out.println("dwBufferLength is: " + dwBufferLength.getValue());
            System.out.println("WSAGetLastError() returned: " + Ws2_32.INSTANCE.WSAGetLastError());
        }
    }
} 
```

# apache-pig - 排序相关包

> ID：15144194
> 
> 赞同：5
> 
> 时间：2013-02-28T19:39:35.837
> 
> 标签：apache-pig

我有一个生成关系的 Pig 脚本

```
A: {x: chararray,B: {(y: chararray,z: int)}} 
```

我想根据 By 对 A 进行排序，但是以下部分给了我错误：

> 语法错误，z 处或附近出现意外符号

```
output = foreach A{
    sorted = order B by z DSC;
    generate x,sorted;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T23:35:34.920

使用 DESC 代替 DSC。

例如

```
output = foreach A{
    sorted = order B by z DESC;
    generate x,sorted;
} 
```

# django - Django ModeForm 未从浏览器接收 ImageField 文件

> ID：15144196
> 
> 赞同：0
> 
> 时间：2013-02-28T19:39:41.457
> 
> 标签：django, file-upload, django-forms

我对不保存所选文件的 ModelForm 有疑问。

我在接收表单数据的视图的第一行使用 pdb 看到了这一点：

```
(Pdb) pp request.FILES
<MultiValueDict: {}> 
```

该`enctype`属性在`form`标签中设置。这至少发生在 Chromium 和 Opera 中。

我已经阅读了很多关于这个问题的问题，但对我的情况没有任何帮助，还有什么进一步的想法吗？

这是模型的相关部分：

```
class AudioCut(models.Model):

    slug = models.SlugField(max_length=128, unique=True)
    logo = models.ImageField(upload_to=u'cuts_logos', blank=True) 
```

这是表格：

```
class AudioCutForm(ModelForm):
    "Form for creating a new AudioCut"
    start = SecondsSinceEpochField()
    tags = TagsCommaSeparatedField()

    class Meta:
        model = AudioCut
        fields = ('title', 'description', 'logo', 'start', 'length',
                    'category', 'tags', 'radio', 'show')
        widgets = {'title': TextInput(attrs={'size': 34, 'maxlength': 32}),
                    'radio': HiddenInput(), 'show': HiddenInput(),
                    'tags': Textarea()} 
```

这是视图：

```
def make_new_cut(request):

    if request.method == 'POST':
        cutform = AudioCutForm(request.POST, request.FILES)
        out_data['cutform'] = cutform
        if cutform.is_valid():
            newcut = cutform.save(False)
            newcut.owner = request.user
            newcut.save()
            cutform.save_m2m() 
```

这是模板：

```
<form enctype="multipart/form-data" id="cut_this_frm" method="post" action="#">{% csrf_token %}
    <label for="id_title">* T&iacute;tulo</label>{{cutform.title}}
    {{cutform.title.errors}}
    <label for="id_description">Descipci&oacute;n</label>{{cutform.description}}
    {{cutform.description.errors}}
    <label for="id_tags">Etiquetas</label>{{cutform.tags}}
    <span class="help_text">Separe las etiquetas con comas (,)</span><br/>
    {{cutform.tags.errors}}
    <input type="button" class="image_upload"/><label for="id_logo" class="image_upload">Agregar imagen</label>{{cutform.logo}}<span id="logo_filename">&emsp;</span>
    {{cutform.radio}}{{cutform.show}}{{cutform.start}}{{cutform.length}}
    <div class="errors">{{cutform.non_field_errors}}</div>
    <input type="hidden" name="next_url" id="next_url" value="#"/>
    <div class="save_cut"><input type="reset" value="Cancelar"/><input type="submit" value="Guardar"></div>
</form> 
```

我检查的其他内容，保存图像的文件夹存在并且服务器可以写入它。我可以使用 Django 的管理员添加图片。

我在 localhost:62080 上运行开发服务器。

# ruby-on-rails - 在模块中调用 Rails 常量

> ID：15144199
> 
> 赞同：0
> 
> 时间：2013-02-28T19:39:56.607
> 
> 标签：ruby-on-rails, ruby

我在 app/concerns 中声明了一个模块`MigrationProcedures`，我想用它来执行一些不受支持的 ActiveRecord SQL 语句。

在这个模块中，我需要调用常量

`[RAILS_ENV]['database']`

但就目前而言，rails 告诉我该`RAILS_ENV`方法中有一个未初始化的常量。

我不应该在下面使用它

```
def self.included(base)
...
end 
```

我尝试使用`AppName::RAILS_ENV`，但这告诉我不`MigrationProcedures::AppName`存在。我怎么能称这个常数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:53:08.067

您可以通过以下几种方式进入 Rails 环境：

```
c = ::Rails.application.config
my_env = ::ENV 
```

在第一种情况下`c.database_configuration[Rails.env]["database"]`，给你你想要的。

该`::SOME_MODULE`语法使您脱离当前的命名空间并进入一个新的命名空间。如果没有模块名称，它会将您带到 Ruby 环境的顶部。

[这个 Stack Overflow 的讨论很有启发性。](https://stackoverflow.com/questions/3009477/what-is-rubys-double-colon-all-about)

# python - Python 正则表达式仅在数字时匹配

> ID：15144200
> 
> 赞同：0
> 
> 时间：2013-02-28T19:40:00.913
> 
> 标签：python, regex

鉴于正则表达式和下面的单词，我想匹配 - 之后的部分（也可以是 _ 或空格），前提是分隔符之后的部分是数字并且后面没有任何内容（我基本上想成为一个数字和数字）。我正在使用组语句，但它似乎无法正常工作。它一直与开头的 3 匹配（如果我稍微修改一下，则匹配结尾的 1）。我如何实现这一点（通过使用分组）？

目标词：`BR0227-3G1`

正则表达式：`([A-Z]*\s?[0-9]*)[\s_-]*([1-9][1-9]*)`

它不应该匹配 3G1, G1 , 1G

它应该只匹配纯数字，如 3、10、2 等。

这里也是评估正则表达式的帮助网站：http: [//www.pythonregex.com/](http://www.pythonregex.com/)

更多示例：

它应该匹配：

```
BR0227-3
BR0227 3
BR0227_3 
```

成组`(BR0227) (3)`

`(BR0227)`它应该只匹配

```
BR0227-3G1
BR0227-CS
BR0227
BR0227- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:52:49.673

我会用

```
re.findall('^([A-Z]*\s?[0-9]*)[\s_-]*([1-9][1-9]*$)?', str) 
```

每个字符串都从第一组开始，到最后一组结束，因此`^`和`$`组可以帮助捕获。最后`$`的 要求捕获*所有*数字，但它是可选的，因此仍然可以捕获第一组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:43:21.497

由于您希望分组单词的开头和（可能）结尾，请执行以下操作：

```
r'\b([A-Z0-9]+)(?:[ _-](\d+))?\b' 
```

这会将单词的第一部分放在第一组中，并且可选地将其余部分放在第二组中。第二组将是`None`如果它不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:50:12.970

这应该匹配后跟“-”、“”或“_”的任何内容，后面只有数字。

```
(.*)[- _](\d+) 
```

# java - 确定通用可比数组的排名

> ID：15144201
> 
> 赞同：0
> 
> 时间：2013-02-28T19:40:03.870
> 
> 标签：java, algorithm, sorting, ranking

如果有此代码（取自[https://stackoverflow.com/a/4859279/1178781](https://stackoverflow.com/a/4859279/1178781)）：

```
import java.util.Comparator;

public class ArrayIndexComparator<T extends Comparable<? super T>> implements
        Comparator<Integer> {
    private final T[] array;

    public ArrayIndexComparator(T[] array) {
        this.array = array;
    }

    public Integer[] createIndexArray() {
        Integer[] indexes = new Integer[array.length];
        for (int i = 0; i < array.length; i++) {
            indexes[i] = i; // Autoboxing
        }
        return indexes;
    }

    @Override
    public int compare(Integer index1, Integer index2) {
        // Autounbox from Integer to int to use as array indexes
        return array[index1].compareTo(array[index2]);
    }
} 
```

当我运行程序时，会发生这种情况：

```
import java.util.Arrays;
import java.util.Comparator;

public class Launcher {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String[] countries = { "A", "H", "E", "C", "D", "F", "G", "B" };
        ArrayIndexComparator<String> comparator = new ArrayIndexComparator<String>(
                countries);
        Integer[] indexes = comparator.createIndexArray();
        Arrays.sort(indexes, comparator);
        System.out.print("Array:    ");
        System.out.println(Arrays.toString(countries));
        System.out.print("Rankings: ");
        System.out.println(Arrays.toString(indexes));
        System.out.println("");

        final Float[] scores2 = { 2.3f, 0.7f, 1.4f, 1.2f };
        ArrayIndexComparator<Float> comparator2 = new ArrayIndexComparator<Float>(
                scores2);
        indexes = comparator2.createIndexArray();
        Arrays.sort(indexes, comparator2);
        System.out.print("Array:    ");
        System.out.println(Arrays.toString(scores2));
        System.out.print("Rankings: ");
        System.out.println(Arrays.toString(indexes));
        System.out.println("");

        final Integer[] scores3 = { 1, 2, 0, 3 };
        ArrayIndexComparator<Integer> comparator3 = new ArrayIndexComparator<Integer>(
                scores3);
        indexes = comparator3.createIndexArray();
        Arrays.sort(indexes, comparator3);
        System.out.print("Array:    ");
        System.out.println(Arrays.toString(scores3));
        System.out.print("Rankings: ");
        System.out.println(Arrays.toString(indexes));
        System.out.println("");

        final Integer[] scores4 = { 1, 0, 2, 3 };
        ArrayIndexComparator<Integer> comparator4 = new ArrayIndexComparator<Integer>(
                scores4);
        indexes = comparator4.createIndexArray();
        Arrays.sort(indexes, comparator4);
        System.out.print("Array:    ");
        System.out.println(Arrays.toString(scores4));
        System.out.print("Rankings: ");
        System.out.println(Arrays.toString(indexes));
        System.out.println("");

    }

} 
```

输出如下：

```
Array:    [A, H, E, C, D, F, G, B]
Rankings: [0, 7, 3, 4, 2, 5, 6, 1]

Array:    [2.3, 0.7, 1.4, 1.2]
Rankings: [1, 3, 2, 0]

Array:    [1, 2, 0, 3]
Rankings: [2, 0, 1, 3]

Array:    [1, 0, 2, 3]
Rankings: [1, 0, 2, 3] 
```

我认为这应该正确地给出数组中对象的排名，但某些配置不会这样做。我错过了什么吗？或者这实际上不是排序来给出排名，而是别的什么？

例如：

```
Array:    [A, H, E, C, D, F, G, B]
Rankings: [0, 7, 3, 4, 2, 5, 6, 1]
Should be:[0, 7, 4, 2, 3, 5, 6, 1]

Array:    [2.3, 0.7, 1.4, 1.2]
Rankings: [1, 3, 2, 0]
Should be:[3, 0, 2, 1]

Array:    [1, 2, 0, 3]
Rankings: [2, 0, 1, 3]
Should be:[1, 2, 0, 3]    

Array:    [1, 0, 2, 3]
Rankings: [1, 0, 2, 3]
Should be:[1, 0, 2, 3] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:08:38.893

基于您不需要考虑重复的事实，您可以将所有内容更改为如下所示：

```
public static void main(String[] args) {
    String[] countries = { "A", "H", "E", "C", "D", "F", "G", "B" };
    ArrayComparator<String> comparator = new ArrayComparator<String>(
            countries);
    Integer[] indexes = comparator.createIndexArray();
    System.out.print("Array:     ");
    System.out.println(Arrays.toString(countries));
    System.out.print("Rankings: ");
    System.out.println(Arrays.toString(indexes));
    System.out.println("");

    final Float[] scores2 = { 2.3f, 0.7f, 1.4f, 1.2f };
    ArrayComparator<Float> comparator2 = new ArrayComparator<Float>(
            scores2);
    indexes = comparator2.createIndexArray();
    System.out.print("Array:     ");
    System.out.println(Arrays.toString(scores2));
    System.out.print("Rankings: ");
    System.out.println(Arrays.toString(indexes));
    System.out.println("");

    final Integer[] scores3 = { 1, 2, 0, 3 };
    ArrayComparator<Integer> comparator3 = new ArrayComparator<Integer>(
            scores3);
    indexes = comparator3.createIndexArray();
    System.out.print("Array:     ");
    System.out.println(Arrays.toString(scores3));
    System.out.print("Rankings: ");
    System.out.println(Arrays.toString(indexes));
    System.out.println("");

    final Integer[] scores4 = { 1, 0, 2, 3 };
    ArrayComparator<Integer> comparator4 = new ArrayComparator<Integer>(
            scores4);
    indexes = comparator4.createIndexArray();
    System.out.print("Array:     ");
    System.out.println(Arrays.toString(scores4));
    System.out.print("Rankings: ");
    System.out.println(Arrays.toString(indexes));
    System.out.println("");

} 
```

* * *

```
public class ArrayComparator<T extends Comparable<? super T>>{
    private final T[] array;
    private final SortedMap<T, Integer> sortedArray;

    public ArrayComparator(T[] array){
        this.array = array;
        sortedArray = new TreeMap<T, Integer>();
        for(int i = 0 ; i < array.length ; i ++){
            sortedArray.put(array[i], Integer.valueOf(i));
        }
    }

    public Integer[] createIndexArray(){
        Integer[] indexArray = new Integer[sortedArray.size()];
        int i = 0;
        for(T key : sortedArray.keySet()){
            indexArray[sortedArray.get(key)] = i;
            i++;
        }
        return indexArray;
    }
} 
```

然后运行它，您的输出如下所示：

```
Array:     [A, H, E, C, D, F, G, B]
Rankings:  [0, 7, 4, 2, 3, 5, 6, 1]

Array:     [2.3, 0.7, 1.4, 1.2]
Rankings:  [3, 0, 2, 1]

Array:     [1, 2, 0, 3]
Rankings:  [1, 2, 0, 3]

Array:     [1, 0, 2, 3]
Rankings:  [1, 0, 2, 3] 
```

这就是我相信你正在寻找的东西。

# bash - 在源日志记录脚本中捕获返回值

> ID：15144203
> 
> 赞同：0
> 
> 时间：2013-02-28T19:40:11.733
> 
> 标签：bash

我提供了一个脚本来处理两件事，捕获标准输出/错误和返回值。我正在使用进程替换：

记录器.sh

```
exec > >(
 cat
 echo $?
) 2>&1 
```

测试.sh

```
. ./logger.sh
ls abc 
```

因为我没有名为 abc 的文件，所以我希望看到这个回显返回代码的值`1`（来自`echo $?`）。我读到这永远不会与进程替换一起使用。这可以转换为命名管道吗？这行得通吗？

运行如下：

```
bash ./test.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:45:58.567

尝试这样做：

```
#!/bin/bash

trap 'echo "DEBUG[$?]" | tee /tmp/log' ERR

xxxx # a non existent command 
```

如果你已经有一个`trap`，你可以这样做：

```
#!/bin/bash

trap 'echo "DEBUG[$?]" | tee /tmp/log; do_something_else' ERR 0 1 2 3 15

xxxx # a non existent command 
```

# gtk - GTK3 - 监控从小部件发出的所有信号

> ID：15144206
> 
> 赞同：0
> 
> 时间：2013-02-28T19:40:19.187
> 
> 标签：gtk, gdk

有什么方法可以使用 GTK3 监控从小部件发出的所有信号？我知道`event`信号是在事件之前发出的，但我不确定 GTK 术语中“事件”和“信号”之间的区别——因为这似乎不能捕获所有信号。

我知道 GDK 有一个功能`gdk_set_show_events`，但这主要显示从操作系统发送到窗口的事件。有GTK3等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:27:02.497

没有内置函数 AFAIK，但我相信你可以自己破解一些东西：

使用[g_signal_lookup](http://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-lookup)获取 gtype 的所有信号 ID。然后在实例的每个信号上使用[g_signal_add_emission_hook](http://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-add-emission-hook)来注册一个挂钩，以便在发出该特定信号时调用。在钩子函数中，通过 为您提供了信号 id `*ihint`，[g_signal_query](http://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-query)应该从中为您提供打印调试消息所需的所有信息。（我没有测试它，但它应该工作）

请注意，不幸的是，这不适用于使用 G_SIGNAL_NO_HOOKS 定义的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T12:28:52.883

> 使用*g_signal_lookup*获取所有信号 id

它比描述的要复杂一些。为了使用*g_signal_lookup*，您首先需要一个信号名称。如果要独立于对象类型监控每个信号，首先需要列出特定实例类型的所有信号。这可以由*g_signal_list_ids*为一个*GType*安排。要获得实例上真正发出的所有信号，您需要遍历此实例的所有父类型。您可以使用*g_type_parent*来做到这一点。

我自己构建了一些实用程序功能，它们提供此功能用于与问题相同的调试目的。您可以使用 gemu_glib_util_connect_to_all_signals 为*GObject*实例的所有信号连接 Emission-Hook，或者使用[*gemu_gtk_util_signal_connect_to_widget_children*](https://github.com/Emanuesson/gemu-util/blob/master/gemu-glib-util.c)将 Emission-Hook连接到*GtkWidget*实例及其所有[*子代*](https://github.com/Emanuesson/gemu-util/blob/master/gemu-gtk-util.c)。

# r - 树包，使用 newdata 为 prune.tree

> ID：15144209
> 
> 赞同：0
> 
> 时间：2013-02-28T19:40:37.077
> 
> 标签：r, tree

我将一个数据框分为两个`subsets`,`trainSet`和`testSet`。然后我使用树库中的树命令：

```
tree1<-tree(y~., data=trainSet) 
```

然后假设我想使用 testSet 修剪树 1：

```
tree2<-prune.tree(tree1, newdata=testSet,best=7) 
```

但是，我注意到 tree2 的计算是基于原始的`trainSet`，而不是新的数据集（`testSet`）。

我不确定如何使 prune.tree 命令在新数据集上工作以选择最佳树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:09:28.100

使用`model.frame`，这应该工作

```
tree2<-prune.tree(tree1, newdata=model.frame(testSet),best=7) 
```

但我认为最好使用`cv.tree`which is 将对您的训练数据进行交叉验证并调用`prune.tree`它。

```
cv.tree(tree1, , prune.tree) 
```

这里有一个例子，从 MASS 包中起诉**fgl数据。**

```
 data(fgl, package="MASS")
 fgl.tr <- tree(type ~ ., fgl)
 prune.tree(fgl.tr,newdata=model.frame(fgl[1:200,])) 
```

# spring - 如何为不同的环境加载不同的弹簧属性

> ID：15144218
> 
> 赞同：1
> 
> 时间：2013-02-28T19:41:12.873
> 
> 标签：spring, properties, placeholder

我有两个属性文件。main.properties 文件定义了一个字段

环境=开发

* * *

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>file:${catalina.home}/conf/main.properties</value>
        <value>WEB-INF/project.${environment}.properties</value>
            </list>
        </property> 
```

但是，我得到了这个：无法打开 ServletContext 资源 [/WEB-INF/project.${environment}.properties]

有谁知道如何修理它？

# jquery - 该函数只被调用一次

> ID：15144222
> 
> 赞同：0
> 
> 时间：2013-02-28T19:41:36.860
> 
> 标签：jquery

我有一个悬停类，我正在显示一个“对话框”作为工具提示，其中包含上一个/下一个导航按钮。在此基础上，我正在更新内容。

但是，我只能执行一次。这是代码：

```
$(".corner").mouseenter(function(e){
    tt_index=1;

    var id=this.id;
    $("#popup-div").html(getMultipleBooking(id.toString(),tt_index));
    $("#popup-div").height(120);

     $("#popup-div").dialog({
         resizable: false,
         autoOpen: true,
         width: 277,
         position: [e.pageX+5, (e.pageY+5)-$(document).scrollTop()+10], 

         });

     $(".ui-dialog-titlebar").hide();

     //closing the dialog when mouse enters into the white space

     $("#tt_next").click(function(){
         ++tt_index;
         $("#popup-div").html(getMultipleBooking(id.toString(),tt_index));          
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:58:13.593

页面加载时，工具提示/对话框是否已经在 dom 中触发？此外，当您鼠标移出时，工具提示/对话框是否从 DOM 中删除？

如果是这样，那么您将不得不在 jQuery 中使用 on() 方法，[http:](http://api.jquery.com/on/) //api.jquery.com/on/ ..所以事件正在积极监听。如果是这种情况，您将丢失附加到 DOM 中触发器 (.corner) 的事件绑定。.. 随后，您还可以在推出触发器时使用 mouseleave 事件来触发。

例子：

```
$(".corner").on("mouseenter",function(e){ 
           code stuff goes here for mouseenter 
}).on("mouseleave",function(e){ 
           code stuff goes here for mouseleave 
}); 
```

希望这可以帮助！

# visual-studio-2010 - 使用 Visual Studio 将代码添加到 TFS

> ID：15144224
> 
> 赞同：0
> 
> 时间：2013-02-28T19:41:41.183
> 
> 标签：visual-studio-2010, tfs

我的本地机器上有代码，想把它放到 TFS 中。我在 TFS 中有一个新文件夹，并且我已将 TFS 工作区映射到本地文件夹。如何将代码从本地计算机添加到 TFS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:47:03.540

右键单击解决方案并选择`Add to source control...`。然后它会要求您选择要将其放入 TFS 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T15:50:05.147

右键单击需要上传代码文件的文件夹您将获得这些选项，然后选择 + 添加文件。它将为您提供两个选项来创建新文件或上传现有文件[![](../Images/09184d46f48550194469afcd965e365b.png)](https://i.stack.imgur.com/MiqRL.png)

# cxf - 使 JAX RS CXF 拦截器与 WebClient 一起工作

> ID：15144227
> 
> 赞同：1
> 
> 时间：2013-02-28T19:41:52.213
> 
> 标签：cxf, jax-rs, webclient, interceptor

`org.apache.cxf.jaxrs.client.WebClient`在使用 WebClient 类 ( )时，我遇到了使拦截器触发的问题。在调用 RESTful 服务的方法中，我添加了一个拦截器以在 out 阶段执行。我故意提供了无效属性，所以我可以看到拦截器失败，但该方法成功完成。

这是我正在使用的代码：

```
private String callService2(String webServiceUrl) {

    JAXRSClientFactoryBean bean = new JAXRSClientFactoryBean();
    bean.setAddress(webServiceUrl);

    // setup properties
    Map<String, Object> properties = new HashMap<String, Object>();

    properties.put("ws-security.signature.username", "client");
    properties.put("ws-security.signature.properties", 
                   "client_nonexistantfile.properties");

    bean.setProperties(properties);

    XmlSigOutInterceptor sigInterceptor = new XmlSigOutInterceptor();
    bean.getOutInterceptors().add(sigInterceptor);

    // use WebClient (or proxy) as usual
    WebClient wc = bean.createWebClient();
    TestInfoResponse response = wc.accept("application/xml").get(TestInfoResponse.class);
    return response.getContents();
} 
```

我期望`XmlSigOutInterceptor`逻辑失败，因为属性文件不存在，但该方法成功完成。添加`XmlSigOutInterceptor`.

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:06:38.747

这是我的坏事。XmlSigOutInterceptor 在执行 get 时不需要做任何事情，因为没有要签名的文档。所以拦截器正在开火，它马上就回来了。

对不起，噪音。

# python - Python重新缩进错误

> ID：15144230
> 
> 赞同：0
> 
> 时间：2013-02-28T19:42:02.307
> 
> 标签：python, syntax

我将一个 python 项目从 sublime2“转移”到了 eclipse。现在我得到了很多缩进错误。我试图用我们 reindent.py 脚本来纠正这个问题，但我得到了一个错误。

```
reindent -r /project_root 
```

或者

```
python -m reindent -r /project_root 
```

结果是：

```
IndentationError: unindent does not match any outer indentation level 
```

我想递归地重新缩进。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:48:29.773

您可能有一些制表符和一些空格，它需要保持一致。如果您没有很多文件，那么运行`python -m tabnanny <file name>.py`将有助于解决哪些文件有问题。

# xml - RSS提要阅读器显示旧新闻，不要更新

> ID：15144231
> 
> 赞同：1
> 
> 时间：2013-02-28T19:42:05.007
> 
> 标签：xml, rss, feed, feedburner

我有一个非常奇怪的问题。我从一个 XML 文件创建了一个 RSS 提要，并将其托管在我公司的网站上。我从 C# 应用程序添加了新的提要项（节点到 XML 文件中），当我直接在 Web 浏览器中检查提要时，我看到它们已填充。但是，当我通过 feedvalidator.org 运行我的提要时，大多数情况下，FeedValidator 会显示我的提要的旧版本。我将更改一些标签或属性，但 FeedValidator 仍然显示旧版本，并指出我的 RSS 中不再存在的问题。

我在其他 RSS 阅读器上也遇到过类似的问题。当我运行我的程序并添加 new`<item>s`时，我的 IFTTT 配方不会触发，FeedBurner 只显示旧新闻并且不添加新项目（在 ping 和重新同步之后），Google Reader 和 Outlook 也不显示任何新条目. 奇怪的是，我的 IFTTT 配方会在我添加`<item>s`. 几项检查：

*   我更新了我`<pubDate>`以包含正确的时区格式（即`Thu, 28 Feb 2013 13:11:26 CST`），但仍然没有触发器。
*   我的生存时间 (TTL) 是 2 分钟。
*   我之前使用 Atom 作为我的命名空间并且遇到了同样的问题......

我真的认为它必须与我公司的服务器有关。即使当我在 Web 浏览器中键入 XML 文件的直接链接（它显示最新消息）时，提要确实显示正确，但对于某些试图阅读它的网站来说，该文件似乎以某种方式被缓存。这听起来可能吗？

我的供稿：

原文[http://abdataclassaction.com/Newsletters/NewsFeed.xml](http://abdataclassaction.com/Newsletters/NewsFeed.xml)

FeedBurner [http://feeds.feedburner.com/AbDataClassActionNewsFeed](http://feeds.feedburner.com/AbDataClassActionNewsFeed)

如您所见，它们完全不同。

谁能提供一些想法？这已经让我死了好几个星期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:08:08.360

文件所在的服务器似乎无法正常工作。当我使用具有更高版本的 Windows Server 和 IIS 的服务器时，IFTTT 触发非常快。好像解决了...

# java - CountDownTimer 继续在后台滴答作响 — 如何在 onResume 中检索该计数？

> ID：15144232
> 
> 赞同：2
> 
> 时间：2013-02-28T19:42:05.633
> 
> 标签：java, android, countdowntimer

我有一个带有多个计时器的应用程序；当我启动一个时，我可以在 Eclipse 的 Logcat 中看到它倒计时。

当我点击`Back`按钮时，`onStop()`在应用程序中被调用，但计时器继续在 logcat 中倒计时（`onTick()`继续滴答）。

我想要的是什么时候`onResume()`被调用，我想得到那个仍在倒计时的计时器并继续它。这可能吗？

这是我开始倒计时的按钮：

```
//Button1 Timer
final CountDown button1 = new CountDown(420000,1000,bButton1);
bButton1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        button1.start();
        long currentTime = System.currentTimeMillis();
        //Set start time for calculating time elapsed if needed
        saveTime("START_TIME_BUTTON1", currentTime);
    }
});     

//Button2 Timer
final CountDown button2 = new CountDown(360000,1000,bButton2);
bButton2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        button2.start();
        long currentTime = System.currentTimeMillis();
        //Set start time for calculating time elapsed if needed
        saveTime("START_TIME", currentTime);
    }
}); 
```

我的`onResume()`样子是这样的：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    //Reset the timers on appropriate buttons if there was something running
    //If nothing was running or timer finished - have button in default state

    //See if there was a button1 timer running - if not, it will be 0
    SharedPreferences start = PreferenceManager.getDefaultSharedPreferences(this);
    long startTime = start.getLong("START_TIME_BUTTON1", 0);
    long timeElapsed = (System.currentTimeMillis()-startTime);
    long timeRemaining = (420000 - timeElapsed);        
    if (timeRemaining == 0) {
    } else if (timeRemaining > 0) {
        final CountDown button1Timer = new CountDown(timeRemaining,1000,bButton1);
        button1Timer.start();
        long currentTime = System.currentTimeMillis();
            saveTime("START_TIME", currentTime);            
    } else {
    }
} 
```

这实际上有效 - 在第一个计时器所在的位置启动另一个计时器，文本显示适当的数字并继续使用该方法`onResume()`倒计时。`onTick()`但是现在 logcat 显示了 2 个倒计时的计时器，而不是只有一个！

最终我不想启动另一个计时器，我只想拿起我启动的第一个计时器，它当前处于倒计时的位置并`onTick()`适当地显示。有没有办法做到这一点？服务会是我想要的吗？它是否已经是一项服务，因为它继续在后台打勾？

我对完成这项工作的最佳做​​法感到有些困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:15:39.887

`onTick()`将继续被调用，直到剩余时间达到 0 或您调用`cancel()`CountDownTimer。因此，在您的`onStop()`方法中，您需要调用`cancel()`要停止接收`onTick()`通知的计时器。

Android 的 CountDownTimer 实现使用 a`Handler`通过排队 a 来执行计时，以便在每个滴答之后`Message`发送到。`Handler`不幸的是，没有办法暂停 CountDownTimer，所以我相信你需要创建一个`Timer`具有适当值的新的，就像你现在正在做的那样。

在计算 timeElapsed 时，不应该使用`System.currentTimeMillis()`，因为它可以随时更改，而应该使用`SystemClock.elapsedRealtime()`. `System.currentTimeMillis()`是用于挂钟的计时器（时间和日期），因此可能会发生不可预测的变化，请参阅[Android 文档](http://developer.android.com/reference/android/os/SystemClock.html)。

# ruby - 使用设计http身份验证时如何手动注销？

> ID：15144236
> 
> 赞同：0
> 
> 时间：2013-02-28T19:42:15.683
> 
> 标签：ruby, devise, rack

我对 Ruby 很陌生，并且继承了一个（我相信）使用设计来处理 http 身份验证的 API。

我试图测试一条路线，但不小心使用不正确的凭据登录。但是，现在我“卡住了”，因为我找不到手动注销自己的方法（这个 API 也没有办法通过路由来完成），所以我可以使用正确的凭据登录。

我想知道是否有办法通过命令行（或其他一些手动方式）简单地注销。

我现在很菜鸟，所以我希望这个问题甚至有意义。值得注意的是，这里没有使用rails，而是使用rack。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:57:28.310

最简单快捷，只需终止浏览器（这将破坏您的会话）

# html - 下拉菜单将内容推开

> ID：15144239
> 
> 赞同：0
> 
> 时间：2013-02-28T19:42:19.853
> 
> 标签：html, css

[http://borbelykertlabor.hu/](http://borbelykertlabor.hu/)

在顶部菜单上单击“BLOG”，如果单击“Dísznövények”，您会在该圆圈徽标下方找到一个菜单，如果`<li>`元素之间的字符串内容过长，它将推动整个菜单ul 菜单向左。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:49:59.410

您的`kategoriak`元素是绝对定位的。但它没有被赋予宽度。它最初对齐并且在角落里看起来不错的事实只是巧合！

因此，当内容发生变化时，它只会增加宽度以适应内容。如果你用一个宽度（例如`width: 225px`）限制这个元素，那么菜​​单不会改变宽度，而是内容会换行。

# c# - 如何为每个登录用户获取静态对象以进行保留？

> ID：15144240
> 
> 赞同：0
> 
> 时间：2013-02-28T19:42:32.243
> 
> 标签：c#, asp.net-mvc, oop, asp.net-mvc-4

我在一项找不到解决方案的任务中苦苦挣扎

我有一个 asp net mvc 4 应用程序，我已经实现了权限系统。这个应用程序有一个静态对象，在用户登录时填充了权限信息。

它在登录后立即为每个用户创建一个新对象

每次用户调用操作时都会检查此对象。

但在管理员更改某些权限规则的情况下，我需要找到一种方法将此更改传播给所有登录用户。目前用户需要注销并重新登录才能使更改生效。

我能够获取所有当前登录的用户。但是如何获取与每个用户关联的静态对象呢？代码有点大，但它正在工作......我只需要找到一种方法来为每个登录的用户获取它

**这是对象：**

**模型：**

```
public static class permissionTemp
{
    public static Guid userGuid        { get; set; }
    public static string[] grupos      { get; set; }
    public static string[] permissoes  { get; set; }
} 
```

**控制器：**

```
public bool createPermissionObject(Guid userID, string username)
{
    using (gedaiappEntities context = new gedaiappEntities())
    {
        //Cria objeto global de permissões
        gedaiapp.Models.permissionTemp.userGuid = userID;
        //Resgata todos os grupos do usuário
        gedaiapp.Models.permissionTemp.grupos = Roles.GetRolesForUser(username);

        List<string> c = new List<string>();
        //Primeiro carrega permissões dos Grupos atribuidos ao usuário
        foreach (var grupo in gedaiapp.Models.permissionTemp.grupos)
        {
            //Recupera id do grupo
            var grpId = (from a in context.aspnet_Roles
                            where a.RoleName == grupo
                            select a.RoleId).First();

            //Resgata todas as permissões do grupo
            var permGrpIdsObj = from a in context.sistema_permissoes_grupos
                                where a.groupId == grpId
                                select a.idPermissao;

            if (permGrpIdsObj.Any())
            {
                var permGrpIdsLst = permGrpIdsObj.ToList();
                foreach (var permGrpId in permGrpIdsLst)
                {
                    var permName = (from a in context.aspnet_Roles
                                    where a.RoleId == permGrpId
                                    select a.RoleName).First();

                    c.Add(permName);
                }
            }
        }

        //Por último carrega as permissões individuais do usuário
        var permUsrIdsObj = from a in context.sistema_permissoes_usuarios
                            where a.userGuid == userID
                            select a.idPermissao;

        if (permUsrIdsObj.Any())
        {

            var permUsrIds = permUsrIdsObj.ToList();
            foreach (var permUsrId in permUsrIds)
            {
                var perm = (from a in context.aspnet_Roles
                            where a.RoleId == permUsrId
                            select a.RoleName).First();
                c.Add(perm);
            }
        }

        //Atribui todas as permissões encontradas (GRUPO e INDIVIDUAIS) para o modelo
        gedaiapp.Models.permissionTemp.permissoes = c.ToArray();
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:57:37.233

将静态更改为普通类。

```
public class permissionTemp
{
    public Guid userGuid        { get; set; }
    public string[] grupos      { get; set; }
    public string[] permissoes  { get; set; }
} 
```

创建对象并填充它。此外，请考虑将返回类型更改为 permissionTemp 而不是 bool。而且我不知道您返回 bool 结果的意图，因为您已经在开始时填充了 userID 并且始终返回 true。

```
public **permissionTemp** createPermissionObject(Guid userID, string username)
{
    var objPermission = new permissionTemp();
    using (gedaiappEntities context = new gedaiappEntities())
    {        

       //Cria objeto global de permissões
        objPermission.userGuid = userID;
        //
        objPermission.grupos = Roles.GetRolesForUser(username);

        ....

        objPermission.permissoes = c.ToArray();
    }
    return objPermission;
} 
```

**编辑**

当用户登录应用程序并在应用程序的其余部分使用它时，它可以存储在会话或配置文件中。但同时，如果管理员更改权限，它将在用户下次登录时应用。

**编辑**

我了解您要通过静态列表实现的目标。考虑这种情况，静态列表填充了所有用户权限并且管理员更改了权限，静态列表在新用户登录之前不会更新。因为静态列表不打算从数据库中更新数据，所以它保留在本地缓存中。

尝试在权限表上使用 SQLCacheDependecy，并处理它的 onchange 事件以更新会话。

# c# -

> ID：15144245
> 
> 赞同：3
> 
> 时间：2013-02-28T19:43:05.030
> 
> 标签：c#, wpf, xaml, styles

I'm attempting to use a resource dictionary and the style `TargetType` property to change the look of the buttons in my solution. I am receiving a cast error at run time when the first button is loaded. Everything is working fine if I manually set the style in the button's properties, but the point is to change the look of all the buttons, not one at a time.

Here's the relevant exception:

```
System.Windows.Markup.XamlParseException occurred
  HResult=-2146233087
  Message='Initialization of 'System.Windows.Controls.Button' threw an exception.' Line number '6' and line position '72'.
  Source=PresentationFramework
  LineNumber=6
  LinePosition=72
  StackTrace:
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at WpfTestApplication.Views.MainWindow.InitializeComponent() in d:\TFSC\CUDL\Research\Chris.Dailey\WpfTestApplication\WpfTestApplication\Views\MainWindow.xaml:line 1
       at WpfTestApplication.Views.MainWindow..ctor() in d:\TFSC\CUDL\Research\Chris.Dailey\WpfTestApplication\WpfTestApplication\Views\MainWindow.xaml.cs:line 28
  InnerException: System.InvalidCastException
       HResult=-2147467262
       Message=Unable to cast object of type 'MS.Internal.NamedObject' to type 'System.Windows.FrameworkTemplate'.
       Source=PresentationFramework
       StackTrace:
            at System.Windows.Controls.Control.OnTemplateChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
            at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
            at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
            at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
            at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
            at System.Windows.StyleHelper.ApplyStyleOrTemplateValue(FrameworkObject fo, DependencyProperty dp)
            at System.Windows.StyleHelper.InvalidateContainerDependents(DependencyObject container, FrugalStructList`1& exclusionContainerDependents, FrugalStructList`1& oldContainerDependents, FrugalStructList`1& newContainerDependents)
            at System.Windows.StyleHelper.DoStyleInvalidations(FrameworkElement fe, FrameworkContentElement fce, Style oldStyle, Style newStyle)
            at System.Windows.StyleHelper.UpdateStyleCache(FrameworkElement fe, FrameworkContentElement fce, Style oldStyle, Style newStyle, Style& styleCache)
            at System.Windows.FrameworkElement.OnStyleChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
            at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
            at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
            at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
            at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
            at System.Windows.DependencyObject.InvalidateProperty(DependencyProperty   dp, Boolean preserveCurrentValue)
            at System.Windows.FrameworkElement.UpdateStyleProperty()
            at System.Windows.FrameworkElement.OnInitialized(EventArgs e)
            at System.Windows.FrameworkElement.TryFireInitialized()
            at System.Windows.FrameworkElement.EndInit()
            at MS.Internal.Xaml.Runtime.ClrObjectRuntime.InitializationGuard(XamlType xamlType, Object obj, Boolean begin)
       InnerException: 
```

Here's the relevant code. The Resource Dictionary:

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">    <Style TargetType="{x:Type Button}">
    <Style TargetType="{x:Type Button}">
        <Setter Property="Control.Template" Value="{StaticResource ButtonTemplate}"
    </Style>
    <ControlTemplate x:Key="ButtonTemplate" TargetType="{x:Type Button}">
        <Border Name="Border" BorderBrush="Orange" BorderThickness="3" CornerRadius="3" Background="Red" TextBlock.Foreground="White">
            <Grid>
                <Rectangle Name="FocusCue" Visibility="Hidden" Stroke="Black" StrokeThickness="1" StrokeDashArray="1 2" SnapsToDevicePixels="True" ></Rectangle>
                <ContentPresenter RecognizesAccessKey="True" Margin="{TemplateBinding Padding}"></ContentPresenter>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Border" Property="Background" Value="DarkRed" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Border" Property="Background" Value="IndianRed" />
                <Setter TargetName="Border" Property="BorderBrush" Value="DarkKhaki" />
            </Trigger>
            <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="FocusCue" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Border" Property="TextBlock.Foreground" Value="Gray" />
                <Setter TargetName="Border" Property="Background" Value="MistyRose" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</ResourceDictionary> 
```

The main window:

```
<Window x:Class="WpfTestApplication.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<WrapPanel>
    <Button x:Name="ButtonGradient" Click="ButtonGradient_OnClick">Gradient</Button>
    <Button x:Name="ButtonDrawing" Click="ButtonDrawing_OnClick">Drawing</Button>
    <Button x:Name="ButtonEventTester"  Click="ButtonEventTester_OnClick">Event Tester</Button>
    <Button x:Name="ButtonCommandTester"  Style="{x:Null}" Command="New">Execute a Command</Button>
</WrapPanel> 
```

I would appreciate any input on what might be causing this. The outer error is completely useless, and I don't know enough about this to understand why a casting error might be occuring.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:19:23.800

Using VS2012 and your style above, I was able to successfully apply your ControlTemplate. I did wrap it in a `Style` first, but that's more a matter of preference.

The only other difference is that I had to guess what you did for your `Border` since that was not included.

The style below worked flawlessly at both design-time and run-time:

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border Name="Border" Background="LightBlue">
                    <Grid>
                        <Rectangle Name="FocusCue" Visibility="Hidden" Stroke="Black" StrokeThickness="1" StrokeDashArray="1 2" SnapsToDevicePixels="True" ></Rectangle>
                        <ContentPresenter RecognizesAccessKey="True" Margin="{TemplateBinding Padding}"></ContentPresenter>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="DarkRed" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="IndianRed" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="DarkKhaki" />
                    </Trigger>
                    <Trigger Property="IsKeyboardFocused" Value="True">
                        <Setter TargetName="FocusCue" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="TextBlock.Foreground" Value="Gray" />
                        <Setter TargetName="Border" Property="Background" Value="MistyRose" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-26T21:44:59.240

In Xaml code, [order matters](http://blog.alner.net/archive/2010/05/07/wpf-style-and-template-resources_order-matters.aspx). Place your template above the style that references it.

> When working with WPF resources, remember to declare the resources in the correct order.
> 
> A style or template that is referenced elsewhere must be defined before it can be used. In other words, if Style1 uses BrushA as a StaticResource, then BrushA must be defined before Style1\. Otherwise, you’ll get fun errors like:
> 
> Unable to cast object of type 'MS.Internal.NamedObject' to type 'System.Windows.FrameworkTemplate'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T13:57:41.227

I had a similar problem and it turned out that my style was using StaticResource instead of DynamicResource. [http://blog.alner.net/archive/2010/05/07/wpf-style-and-template-resources_order-matters.aspx](http://blog.alner.net/archive/2010/05/07/wpf-style-and-template-resources_order-matters.aspx)

# android - 如何在 Android 上使用寻址和验证 PostCodeAnywhere？

> ID：15144247
> 
> 赞同：1
> 
> 时间：2013-02-28T19:43:06.973
> 
> 标签：android, android-layout, android-widget, street-address

我正在构建一个应用程序，它从用户那里获取出发地和目的地地址。该公司从 PostCode anyWhere 购买了 Capture+ 用于我们的网站，我现在需要在 Android 上构建它。

我正在尝试构建一个类似于此演示的布局 [http://www.postcodeanywhere.co.uk/address-capture-software/try-it-now/](http://www.postcodeanywhere.co.uk/address-capture-software/try-it-now/)

我试图为此寻找 Android API，但没有找到 Java API [http://www.postcodeanywhere.co.uk/support/sample-code.aspx](http://www.postcodeanywhere.co.uk/support/sample-code.aspx)

此链接显示如何开始使用 Capture+，但同样只有 javascript 和一些 html 表单 [https://www.postcodeanywhere.co.uk/address-capture-software/guide/default.aspx?reg=1](https://www.postcodeanywhere.co.uk/address-capture-software/guide/default.aspx?reg=1)

我已经尝试阅读有关搜索对话框[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

但是我不确定这是否正确，我真的迷路了，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:30:03.353

我在 Postcode Anywhere 的技术支持团队工作。目前使用 Capture+ 功能只能使用集成过程中提供的 JavaScript 片段来完成。

然而，我们确实为我们的所有 API 调用提供了 JAVA 代码示例，您可以使用这些示例来实现更传统的“点击查找”方法。所有 API 都可以在这里找到：

[http://www.postcodeanywhere.co.uk/address-validation/api/](http://www.postcodeanywhere.co.uk/address-validation/api/)

对于英国，您需要的 API 是“查找”和“按 ID 检索”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:11:43.410

没问题，很高兴听到你成功了。

该服务旨在用于这两个部分的方法（查找和检索）。按 ID 检索是进行收费的呼叫。当没有进行“检索”时，可以使用多少个“查找”是有限制的。

如果你想给我发一封关于你的要求的电子邮件，我可以看看最好的方法吗？

我的电子邮件是 tomm@postcodeanywhere.com

干杯

# java - 如何调用构造函数？

> ID：15144249
> 
> 赞同：1
> 
> 时间：2013-02-28T19:43:14.417
> 
> 标签：java, constructor

我目前已经完成了使用 GUI 和所有内容制作推箱子游戏，并且我正在优化，我希望使对象尽可能合理，因此需要能够从类/对象中的方法调用构造函数。认为：

```
public class BoardGame() {

public BoardGame)() {
this(1)
}

public BoardGame(int level){
//Do stuff, like calling filelevel-to-board loaderclass
} 
```

如何在对象/类本身中创建一个调用此对象/类的构造函数的方法？例如：

```
public BoardGame nextLevel() {
return BoardGame(currentLevel+1);
} 
```

以上显然是未定义的！

这样，如果我想在另一个类中使用这个对象，我应该能够做到：

```
GameBoard sokoban = new GameBoard(); //lvl1
draw(GameBoard);
draw(GameBoard.nextLevel()); //draws lvl2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:45:00.727

您需要使用`new`关键字来调用构造函数。

```
public BoardGame nextLevel() {
    return new BoardGame(currentLevel + 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:48:50.847

调用构造函数需要`new`关键字并且总是创建一个新实例。例如，在您的示例代码中

```
GameBoard sokoban = new GameBoard(); //lvl1
draw(sokoban );
draw(sokoban.nextLevel()); //draws lvl2
sokoban <-- still level 1 
```

也许您希望 GameBoard 是可变的：

```
public class GameBoard {

    public GameBoard() {
        setLevel(1);
    }

    private void setLevel(int i) {
        currentLevel = i;
        ....
    }

    public void nextLevel() {
        setLevel(currentLevel+1);
    }
} 
```

# c++ - 类型转换/转换困境

> ID：15144251
> 
> 赞同：0
> 
> 时间：2013-02-28T19:43:17.860
> 
> 标签：c++, types, casting, type-conversion

我仍然只是从 C++ 开始，还没有处理太多类型转换。然而，我的印象是语法是`(type) (variables)`，这在这种情况下似乎不起作用。

```
float calcSphere (int radius)
{
    float sphereSA;

    sphereSA =  (4 * PI *  (radius*radius));

    return sphereSA;

} 
```

`#define PI 3.14`PI 是在代码顶部使用声明的符号常量，我试图通过使用来解决这个问题，`(float) (4 * PI * (radius*radius))`但这并没有解决任何问题。谷歌似乎也返回了关于这个主题的相当模糊的结果。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:53:05.447

只是一个猜测，但是，您是否收到有关初始化将双精度转换为浮点数的警告（使用 MSVS）？或者可能它搞砸了 b/c 一切最终都被转换为 '4' 的整数 b/c？

如果是这样，问题是当你输入一个数字时，它是一个双精度数。但是您将它用作浮点数，要解决它，该数字必须是所投射的。例如

```
sphereSA = ((float) 4 * (float) PI * radius * radius); 
```

但是，最好给编译器一些关于 PI 的类型信息。例如

```
namespace MyConstants {
    const float PI = 3.141;
}
sphereSA = ((float) 4 * MyConstants::PI * radius * radius); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-28T19:47:33.430

您正在使用 C 风格的演员表。强制转换的语法随着 C++ 的变化而改变。你想寻找这样的东西：

```
dynamic_cast<something*>( yourthing ); 
```

# wpf - 具有多种类型的 TreeView

> ID：15144255
> 
> 赞同：1
> 
> 时间：2013-02-28T19:43:21.073
> 
> 标签：wpf, treeview

我想建立一个这样的树视图：

```
People
Person 1
    Relatives
        Relative 1
        Relative 2
    Mom
    Dad
    Pets
        Pet 1
        Pet 2 
```

问题是一个人有 2 个列表（亲戚和宠物）和两个单项（妈妈和爸爸）。我对 HierarchicalDataTemplates 非常熟悉，但我还没有找到一种方法来做到这一点——那里有很多例子，但似乎没有一个混合这样的类型。

为了让事情变得更有趣，可能有些人没有妈妈或爸爸（可悲但真实）。该清单需要反映这一点。

我使用的数据来自使用实体框架的数据库，因此我的人员列表已经具有正确的结构 - 我不希望我的所有对象都来自某个常见的复合对象（也在许多示例中），每个人有一个“名字”和“孩子”。我也想在我的数据模板的绑定中使用每个对象的自然属性，例如 MomsFirstName、PersonsName。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:08:11.167

不确定这是否对您有帮助，但您可以提供自己的模板选择器，为每种类型选择不同的模板；它们都将被您选择的 ItemsPanelTemplate 对象封装，但它允许您对您指定的任何类型拥有非常不同的控件。这是我的用例，但我想您可以将相同的想法应用于 TreeView

```
 <ItemsControl>
    <ItemsControl.Resources>
        <DataTemplate x:Key="templateFoo">
        </DataTemplate>

        <DataTemplate x:Key="templateBar">
        </DataTemplate>

        <DataTemplate x:Key="templateJoe">
        </DataTemplate>
    </ItemsControl.Resources>

    <ItemsControl.ItemTemplateSelector>
        <local:MyTemplateSelector></local:MyTemplateSelector>
    </ItemsControl.ItemTemplateSelector>

    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Grid.Row"
                Value="{Binding Row}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

而这在某处

```
public class MyTemplateSelector: DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element == null || item == null)
            return null;

        if(item is Foo)
        {
            return element.FindResource("templateFoo") as DataTemplate;
        }

        if (item is Bar)
        {
            return element.FindResource("templateBar") as DataTemplate;
        }

        if (item is Joe)
        {
            return element.FindResource("templateJeo") as DataTemplate;
        }

        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:32:11.563

您是否尝试过使用 ItemTemplate 和 ItemTemplateSelector？

# php - 使用 EasyPHP 在 localhost 中配置重写 url

> ID：15144256
> 
> 赞同：2
> 
> 时间：2013-02-28T19:43:21.133
> 
> 标签：php, apache, .htaccess, mod-rewrite, easyphp

我正在尝试使用 EasyPHP 配置 .htaccess 以在 localhost 中设置重写 URL，但我得到的只是 404 错误。

我的本地网站是 C:\Projects\Test\，在 EasyPHP 中，我创建了一个新别名，其名称为“Test”，指向该位置。所以，要访问这个网站，我在浏览器中输入 127.0.0.1:8080/test。

.htaccess 文件位于本网站的根目录 (C:\Projects\Test\ .htaccess)。这只是一个示例，输入的所有内容都将用户重定向到“/user/initial.php”。

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([a-z,0-9,A-Z,_-]+)$ /user/inicial.php
</IfModule> 
```

我还按照以下步骤配置 apache 以便能够运行重写 URL：

*   更改了 httpd.conf 文件（位于 C:\Programs\EasyPHP-12.1\conf_files 中），其中：
*   取消注释“LoadModule rewrite_module modules/mod_rewrite.so”行；
*   将所有“AllowOverride None”语句更改为“AllowOverride All”。

这是我所做的一切。如果有人可以给我更多选择，我将不胜感激。

# java - 我正在尝试设置仅输入整数的要求，如果输入其他任何内容，则显示错误消息

> ID：15144258
> 
> 赞同：0
> 
> 时间：2013-02-28T19:43:22.417
> 
> 标签：java, if-statement, joptionpane

```
 ans = JOptionPane.showInputDialog(null,"There are currently "+clubSize+" people inside right now" +
                                                            "\nHow many People are in your party today.");
        int partyIn;
        try
            {
           partyIn = Integer.parseInt(ans);
            }
        catch (NumberFormatException e)
            {
           JOptionPane.showMessageDialog(null, "What you entered was not a number: " + ans);
            }
        if (clubSize + partyIn <= 125)
            {
            clubSize = clubSize + partyIn; 
            peopleIn = peopleIn + partyIn;
            }
        else
            {
            JOptionPane.showMessageDialog(null, "Sorry you have to many people in your party");
            } 
```

这将返回一个错误：变量 partyIn 可能尚未初始化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:57:00.743

如果输入的数字不是实数，则使用`Integer.parseInt`将抛出 a的事实。`NumberFormatException`捕获该异常，然后将错误通知用户。

```
int partyIn;
try
{
   partyIn = Integer.parseInt(ans);
}
catch (NumberFormatException e)
{
   JOptionPane.showMessageDialog(null, "What you entered was not a number: " + ans);
} 
```

# android - “R无法解决”

> ID：15144261
> 
> 赞同：2
> 
> 时间：2013-02-28T19:43:26.837
> 
> 标签：android, android-resources

我之前曾尝试在这里找到这个问题的答案，但没有一个修复对我有用。基本上，我的 Android 项目拒绝运行 - 即使我根本没有从您创建新项目时提供的默认程序编辑它。

我在 Eclipse 下有一条红线`R`，抛出错误*"R cannot be resolved to a variable"*。它建议我导入`android.R`，但是当我这样做时，会出现另一条红线，这次在 下方`activity_main`，说它*“无法解决或不是字段”*。

我完全不知道这里发生了什么，并且在编码或编程方面也不多产，所以绝对外行的任何答案都会非常棒。到目前为止，我的代码如下：

```
package com.randomproject.thebasics;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:59:43.250

尝试执行 Project->Clean，然后完全重新构建 (Ctrl+B)。Eclipse 有时会在自动生成的文件中出现一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:29:36.003

正如评论中所指出的，这个问题已经被回答了*数千*次。嗯，好吧，只有几十次。有两种可能：

**1) 资源错误** 您的清单或 res 目录中的文件之一有错误。资源编译器无法运行，gen目录下没有R.java类。查看 gen 文件夹，如果那里没有 R.java 文件，这是你的问题。

**2) 错误** 的导入 有时，为了*帮助*您，eclipse 会将 import android.R 添加到您的导入中，然后折叠导入部分，这样您就看不到它了。之后，您对 R.whatever 资源的任何引用都不会起作用。检查进口。如果存在，请删除 android.R。

# java - Tomcat Web xml URL-Pattern 不接受带参数的 url？

> ID：15144262
> 
> 赞同：1
> 
> 时间：2013-02-28T19:43:29.387
> 
> 标签：java, security, tomcat, web.xml, url-pattern

我正在尝试保护 tomcat6 上的几个页面以供出售的应用程序使用。除了两个（在下面的代码中标有双星号）之外，我成功地对大多数 URL 使用 URL 模式进行保护。这两个 URL 的不同之处在于它们采用确定视图的参数。我想限制这两个视图，因此指定了要阻止/保护/验证的确切 URL，如下所示。但是 Tomcat 不保护它们。

```
 <security-constraint>
            <web-resource-collection>
                    <web-resource-name>TopBraid</web-resource-name>
                    <description>Restrict few pages that need security.</description>
                    <url-pattern>/tbl/admin/*</url-pattern>
                    <url-pattern>/tbl/sparql/*</url-pattern>
                    **<url-pattern>/tbl/swp?_viewClass=appConfig:ServerConfigEditor</url-pattern>**
                    **<url-pattern>/tbl/swp?_viewClass=adminConfig:AdminEditPage</url-pattern>**
                    <url-pattern>/tbl/sp_reset</url-pattern>
                    <url-pattern>/tbl/sp_redeploy</url-pattern>
            </web-resource-collection>
            <auth-constraint>
                    <role-name>SERVER_ADMINS</role-name>
            </auth-constraint>
    </security-constraint>
    <security-role>
            <role-name>SERVER_ADMINS</role-name>
    </security-role>
    <login-config>
            <auth-method>FORM</auth-method>
            <realm-name>TopBraid</realm-name>
            <form-login-config>
                    <form-login-page>/logon.html</form-login-page>
                    <form-error-page>/logonError.html</form-error-page>
            </form-login-config>
    </login-config>
    <security-constraint>
            <web-resource-collection>
                <web-resource-name>Public</web-resource-name>
                <description>Matches any page.</description>
                <url-pattern>/*</url-pattern>
            </web-resource-collection>
    </security-constraint> 
```

我知道 JSR 规范可能将它们称为无效模式。想知道是否可以以某种方式指定模式以使其可以接受。还是有其他方法可以限制对我上面列出的两个 URL 的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:11:38.983

`/tbl/swp?_viewClass=tblconfig:ConfigEditor /tbl/swp?_viewClass=admins:AdminsEditorPage`从 Web 或应用程序服务器无法限制对特定 URL 参数及其值的访问，就像您在上面尝试做的那样。这种类型的过滤/URL 限制必须由应用程序本身通过为这些视图创建一个唯一的会话来执行。

当应用程序服务器解析传入的 URL 时，一旦它们到达第一个“？”，它们的工作就完成了。这是要传递给应用程序的第一个参数。从这里开始，应用程序必须处理任何类型的过滤/访问控制。

# jsp - 如何将jsp表单数据传递给bean类

> ID：15144266
> 
> 赞同：-1
> 
> 时间：2013-02-28T19:43:40.307
> 
> 标签：jsp, servlets, javabeans

伙计们，我有一个 jsp 表单，它将从人那里获取详细信息，例如姓名、密码、电子邮件、手机等。

现在我想使用 bean 类（带有 setter 和 getter 的类）在 servlet 中检索这些表单值，并且不使用 request.getParameter 和 useBean 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:10:43.123

您可以使用像 struts 这样的 MVC 框架，它会在后台执行 request.getParameter()，因此您不必这样做。您只需要确保您的 bean 类中的属性名称和它在 jsp 中的相应元素具有相同的名称。

例子

jsp页面：

```
<input type="text" name="firstName"> 
```

你的豆子

```
public class Person{
 private String firstName;
 public String getFirstName(){
       return firstName;
 }
 public void setFirstName(String firstName){
       this.firstName=firstName;
 } 
```

}

# c++ - 在 cuda / c++ 代码中使用模板类

> ID：15144272
> 
> 赞同：0
> 
> 时间：2013-02-28T19:44:07.683
> 
> 标签：c++, class, templates, cuda

我是 cuda 编码的新手，（并且在 c++ 方面没有大量经验）所以我一直在阅读以尝试找到解决此问题的方法，但通常不了解人们尝试和解释的内容，并且还没有得到它在职的。

基本上，我有一个 .cu 文件，其中包含两件事：

```
template <class ModelType>
__global__ void Stepkernel(ModelType *particles) 
```

和：

```
template <class ModelType>
void runTest(ModelType *particles) 
```

然后我有一个头文件，SamplerI.h，我没有写，但我试图包含对上面的 void 函数的调用，所以，在我拥有的所有#includes 之下：

```
template <class ModelType>
void runTest(ModelType *particles); 
```

然后稍后在标题中有一个函数，我在其中包含了对上述内容的调用。

头文件和相关文件在库 libdnest 中编译，我使用 nvcc -c step.cu 编译 .cu 文件，然后链接：

```
g++ -o main main.cpp step.o -ldnest 
```

现在，如果模板不存在（即我只有一个没有提及 ModelType 的 void 函数），所有这一切都很好，它会编译并运行，但是一旦我尝试包含模板，我就会得到以下编译错误：

```
../../include/SamplerImpl.h: In member function ‘bool       DNest3::Sampler<ModelType>::step() [with ModelType = Banana]’:
../../include/SamplerImpl.h:121:   instantiated from ‘void DNest3::Sampler<ModelType>::run() [with ModelType = Banana]’
main.cpp:37:   instantiated from here
../../include/SamplerImpl.h:159: error: no matching function for call to     ‘runTest(Banana*)’ 
```

而且我不知道该怎么做才能尝试修复它...

有没有人有任何想法？如果我解释得不够好，请告诉我，我会尝试包含更多信息，我真的不知道什么是重要的。

干杯林德利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:12:19.950

您需要在编译器实例化它的同一个源文件中有模板。

请注意，C++11 引入了“extern”，但并非所有编译器都支持这些。

# php - TYPO3，登录时加载旧会话

> ID：15144273
> 
> 赞同：0
> 
> 时间：2013-02-28T19:44:09.973
> 
> 标签：php, session, typo3

Wenn 在登录前端时浏览我的网站，TYPO3 有时会加载会话的旧状态。当我退出时，一切都很好，所有与会话相关的东西都被正确存储和加载。我现在搜索了六个小时，我真的看不到了。我想我会开始发布处理会话的控制器：http: [//pastebin.com/Guzud1AT](http://pastebin.com/Guzud1AT)

如果您需要任何其他信息，请询问。该页面位于此处：[http ://tinyurl.com/boakjw7](http://tinyurl.com/boakjw7)

说清楚：这发生在我登录时。不是登录然后注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:48:58.790

感谢大家的输入，但答案是 TYPO3 4.5.23 中的核心错误（仅此版本）。该错误已于 11 天前在此处报告：http: [//forge.typo3.org/issues/45570](http://forge.typo3.org/issues/45570)

要修复会话处理问题，只需安装此补丁：[https](https://review.typo3.org/#/c/18464/) : //review.typo3.org/#/c/18464/ 或降级到 4.5.22

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:44:04.303

我认为这很可能与typo3缓存有关。从您的评论中，我认为您主要关注“添加到购物篮”功能。您用于此功能的typo3 扩展名不应被缓存。**可以通过使用COA_INT**或**USER_INT** Typo3 cObjects (typoscript)添加扩展部分来避免缓存。另一种选择是通过修改扩展 php 代码来避免扩展缓存。

参考链接：

[http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/current/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/current/)

[http://www.pi-phi.de/164.html](http://www.pi-phi.de/164.html)

# jquery - 使用jQuery设置背景图像不起作用

> ID：15144274
> 
> 赞同：0
> 
> 时间：2013-02-28T19:44:12.267
> 
> 标签：jquery

再会

我想在 li 元素内的 div 上动态设置背景图像，这样我就不必单独指定每个 div 的背景图像......

但是，我的代码（JS）不起作用。另请参阅我的[FIDDLE](http://jsfiddle.net/RK5B4/1/)

HTML：

```
<div id="imageWrapper">
    <ul>
        <li>
            <div></div> <span></span>

        </li>
        <li>
            <div></div> <span></span>

        </li>
        <li>
            <div></div> <span></span>

        </li>
        <li>
            <div></div> <span></span>

        </li>
    </ul>
</div> 
```

CSS

```
#imageWrapper ul li div {
    width: 65px;
    height: 65px;
    background-position: center center;
} 
```

JS

```
$(document).ready(function () {
    var length = 4; //This is the number of images I have to add
    for (i = 0; i < length; i++) {
        $('#imageWrapper ul li div').css('background', 'url(/path/images/' + i '.jpg)');
    }
}); 
```

此外，我要加载的图像列表非常大。加载这么多图像并将它们填充到 DOM 中而不必写出所有 html 和 css 的最佳方法是什么——这太愚蠢了

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:22:46.027

这是 PHP 方法的示例。

```
<?php 
  echo '<div id="imageWrapper"><ul>';
    $i=4;
      while($i-->0){
       echo '<li class="background-'.$i.'"><div></div><span></span></li>'.PHP_EOL;
      }
  echo '</ul></div>';
?> 
```

`<li>`它用 div 和 span打印出 4秒。您仍然需要使用 CSS 添加背景。

元素打印出来`.background-1`, `.background-2`，因此您可以通过快速轻松地编辑类来更改背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:50:11.510

您可以使用此代码来完成此操作，但如果您必须修改那么多元素以更改其背景，则不建议使用 JavaScript 处理此问题。

```
$(document).ready(function () {
    $('#imageWrapper ul li').each(function(i){
        $(this)
            .find('div')
            .css('background-image', 'url(/path/images/' + (i+1) + '.jpg)');
    });
}); 
```

# c - 错误：警告：内置函数'memcpy'的不兼容隐式声明[默认启用]

> ID：15144276
> 
> 赞同：53
> 
> 时间：2013-02-28T19:44:16.690
> 
> 标签：c, memcpy

我得到这个错误。

```
error: warning: incompatible implicit declaration of built-in function ‘memcpy’ [enabled by default] 
```

这是代码：

```
int arr[ 12] = {1,0,0,0,0,0,0,0,0,0,9370, 0};
void *a = &arr;
memcpy(machine->mem, a,12*4); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-28T19:48:20.503

您可能忘记包含`<string.h>`.

添加`#include <string.h>`到文件的顶部。

# c++ - 重复使用容器或每次声明一个新容器

> ID：15144279
> 
> 赞同：4
> 
> 时间：2013-02-28T19:44:20.220
> 
> 标签：c++, performance, stl

假设您需要多次使用一个 STL 容器（set、map、queue）。哪种通用方法会更好？

1.  每次创建容器。
2.  每次都使用相同的全局对象，但要花一些时间来清除它。

```
// Option 1
void foo()
{
    set<int> S; //creating a new S each time foo is called.

    //use S...
}

// Option 2
set<int> S;
void foo()
{
    S.clear();

    //use S...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:10:14.903

如果不进行性能测试，我会告诉您，选项 2（重用）**稍微**快一点是直观的，因为您不是每次都构造和破坏容器。当你破坏容器时，它必须清除它，否则会出现内存泄漏。

但是，进行性能测试会产生不同的结果：

*   对于 std::list，似乎`clear`比析构函数花费的时间更长。
*   对于 std::set，结果几乎相同。
*   对于 std::map，结果很接近，但选项 1（析构函数）稍微快一些。
*   对于 std::vector，结果与 list 相似（尽管总体上 vector 快得多）

因此，总体而言，选项 1 似乎稍微快一些。我正在运行 VS2012，YMMV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:09:58.113

假设您不必处理多线程问题，情况 2 可能更好。主要是因为对于一些标准的 lib 容器 clear 避免了内存分配。具体查看[std::vector 的 clear function](http://www.cplusplus.com/reference/vector/vector/clear/)的文档。

清除不会导致内存重新分配，向量的容量不变。

# python - 在python中获取一个JSON对象

> ID：15144280
> 
> 赞同：1
> 
> 时间：2013-02-28T19:44:22.973
> 
> 标签：python, json, types

通常我用 Bottle 构建的 web 服务会返回 JSON 文件，效果很好。但是，我有一个需要调用本地函数的异常。

这是我试图做的：

```
import json
def getData():
    return json.dumps({'data': someData })

def function():
    try:
        # Fail
    except:
        print getData()
        print type(getData())
        json.load(getData()) 
```

所以它打印：

```
{"data": "myData"}
<type 'str'>
[...]
AttributeError: 'str' object has no attribute 'read' 
```

所以`json.dumps`给了我一个字符串。如何将其用作 JSON ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T19:49:48.587

`json.load`从文件对象加载 JSON。

`json.loads`从字符串加载。这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:49:54.763

使用`json.loads`而不是`json.load`. 根据[文档](http://docs.python.org/2/library/json.html)。

# html - 将页面分为两个部分

> ID：15144283
> 
> 赞同：0
> 
> 时间：2013-02-28T19:44:53.130
> 
> 标签：html

我有下面的html代码。我需要做的是将 wuiInPageNav 分成两部分。LeftArea 和 wuiMainPageNav 需要一直并排。LeftAre div 将保存我的 jstree 节点，而 wauiMainPageNave div 将保存我的图表和数据等。当我执行以下操作时，left 向左，wuiMainPageNav 向右。但是当我调整浏览器窗口的大小时，将其缩小，wuiMainPageNave 会下降到底部。无论浏览器窗口和大小如何，我如何确保 LeftArea 始终在左侧，而 wuiMainPageName 始终在右侧？这里没有。有任何想法吗？

```
div id="wuiLeftArea">
        <div id="wuiLefthandNavRoot">
            <h2 class="wui-hidden">Section Navigation</h2>
            <h3 class="wui-navigation-title">Applicaion</h3>
            <div id=tree></div>
        </div>
</div>

<div id=wuiMainArea>
    <div id=wuiMainContent>
        <div id=wuiInpageNav>

                <div id="top_chart" class="center"> </div>

        </div>
    </div>
 </div> 
```

CSS：

```
#wuiInpageNav {left:300px; float:right; width:1200px !important; overflow:hidden; }
div#wuiLeftArea{
    float: left;
    width: 16.25em;
    background-color: #f2f4f5; 
    padding-top: .5833em; 
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:52:03.117

**更新**

确保你没有做你的 CSS 内联：http: [//jsfiddle.net/FE79R/1/](http://jsfiddle.net/FE79R/1/)

HTML

```
<div id=wuiMainArea>
    <div id=wuiMainContent>
        <div id=wuiInpageNav>
            <div id="left">
                <div id="tree">tree</div>
            </div>
            <div id=main>
                <div id="top_charts" class="center"> </div>
                    <div class="main1">
                        <div id="top_chart1" class="center">top chart 1</div>
                        <div id="top_chart2" class="center">top chart 2</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
 </div> 
```

CSS

```
#wuiInpageNav { width:300px; overflow:hidden; }
#left { width:100px; float:left; position:relative; background-color:#f2f4f5;}
#main { width:200px; float:left; background-color:orange;} 
```

# asp.net-mvc - 为操作和 api 调用自定义授权？

> ID：15144289
> 
> 赞同：1
> 
> 时间：2013-02-28T19:45:16.507
> 
> 标签：asp.net-mvc, asp.net-mvc-4, attributes, asp.net-web-api

我最近问[了这个问题](https://stackoverflow.com/questions/15097356/custom-authorize-attribute-can-i-store-a-value-for-later)并成功设置了我的自定义授权属性。

但现在我在 api 调用方面遇到了另一面墙。我还需要以与操作调用相同的方式授权这些调用。我了解 System.Web.Http 和 System.Web.Mvc Authorize 属性之间存在差异。所以我创建了一个单独的 Api 特定属性，它基本上做同样的事情。但是，我在设置用户 - 主体和身份时遇到了麻烦，就像我在原始属性中所做的那样。

我的属性只需检查 cookie 中的某些值以授权请求，一旦属性读取了 cookie，我将解密的 cookie 信息存储在自定义主体/身份设置中。在我的 Api 调用中，当我从身份中检索此信息时，我的转换失败并且我收到一个空值。

这就是我存储信息的方式

api

```
HttpContext.Current.User = new MyPrinciple(new MyIdentity(decCookie.Name, decCookie.UserData)); 
```

行动

```
filterContext.RequestContext.HttpContext.User = new MyPrinciple(new MyIdentity(decCookie.Name, decCookie.UserData)); 
```

我如何检索我认为是相同的所需信息

```
(User.principal.Identity as MyIdentity).MyData; 
```

**问题**

1.  我真的需要有 2 个单独的属性吗
2.  对于 Api 属性，如何轻松存储信息以供以后在控制器中使用。或者基本上我不能以这种方式为这些调用实际获取/设置身份？

**编辑#1**

我找到了如何从我的 ApiController 正确访问我的 cookie 值，我只是缺少对 System.Web >_< 的引用。所以问题#2已经解决了！但＃1仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:35:58.917

Web API 和 MVC 没有任何共同点（技术上）——即使它们看起来相同。您需要两个单独的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:01:03.503

您只能从 c# 中继承一个类，并且每个 authorizeattribute 都存在于自己的命名空间中，因此您不能在单个类中进行。

您可以将它保存在一个公共命名空间中，然后调用一个公共类来完成提升。

可能的解决方案（未经测试）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;

namespace Common.Attributes
{
public class CustomAuthorize : System.Web.Mvc.AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        if (!HttpContext.Current.Request.IsAuthenticated || (HttpContext.Current.User as User) != null)
            return;

        filterContext.HttpContext.User = Authorize.ExtractIdentity(filterContext.HttpContext);
    }
}

public class CustomHttpAuthorize : System.Web.Http.AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.OnAuthorization(actionContext);

        if (!HttpContext.Current.Request.IsAuthenticated || (HttpContext.Current.User as User) != null)
            return;

            System.Threading.Thread.CurrentPrincipal = Authorize.ExtractIdentity(filterContext.HttpContext);
        }
    }  
}

public static class Authorize
{
    public static IIdentity ExtractIdentity(HttpContext context)
    {
        // do your magic here
    }
}
} 
```

# c# - 调整二叉树的范围搜索以获取外部元素

> ID：15144290
> 
> 赞同：2
> 
> 时间：2013-02-28T19:45:19.283
> 
> 标签：c#, data-structures, binary-tree, binary-search-tree, red-black-tree

我有一个 RedBlack [Balanced, sorted] 二叉树，我正在搜索它以找到 [lower,upper] 范围内的所有值。

```
public IEnumerable<TData> Range(
      BinaryTree<TData> root, 
      IComparer<TData> comparer, 
      TData lower, 
      TData upper)
{
    var stack = new Stack<State>(16);
    BinaryTree<TData> here = root;

    do
    {
        if (here == null)
        {
            if (stack.Count == 0)
                break;

            State popped = stack.Pop();
            yield return popped.Data;
            here = popped.Next;
            continue;
        }

        if (comparer.Compare(here.Data, lower) < 0)
        {
            here = here.Right;
        }
        else if (comparer.Compare(here.Data, upper) > 0)
        {
            here = here.Left;
        }
        else
        {
            stack.Push(new State {Next = here.Right, Data = here.Data});
            here = here.Left;
        }
    } while (true);  
} 
```

因此，使用此代码，如果我要使用这些值构建一棵树

```
 [0, 1, 4, 5, 6, 9], 
```

并搜索范围内的所有元素

```
 [3, 8] 
```

我会得到以下结果：

```
 [4, 5, 6]. 
```

我的问题是如何调整此算法以获取搜索的外部元素？像这样：

```
 [1, 4, 5, 6, 9] 
```

即值 3 在树中介于 1 和 4 之间，所以我想返回 1，类似地，值 8 介于 6 和 9 之间，我希望值 9 包含在结果中。

一个问题是我不想从根目录重新开始搜索

目前使用 NGenerics 实现

[编辑]

愿意接受一般的算法答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:12:17.160

我不确定您要填充红黑树的内容。但是，如果您使用的是数组或数据流（其元素数量不会改变），那么您可以使用[Segment Tree](http://en.wikipedia.org/wiki/Segment_tree)

```
class SegmentTree
{
    class Node
    {
        int max, min, s, e;
        Node left, right;

        @Override
        public String toString()
        {
            String str = "Min: "+this.min+" Max: "+this.max+" "+this.s+"-"+this.e;
            return str;
        }
    }

    private Node root;

    public SegmentTree() {}

    public SegmentTree(int[] array)
    {
        add(array);
    }

    public void add(int[] array)
    {
        root = add(0, array.length-1, array);
    }

    private Node add(int s, int e, int[] array)
    {
        Node n = new Node();
        n.s = s;
        n.e = e;

        if(n.s==n.e)
        {
            n.min = n.max = array[n.s];
            return n;
        }

        int mid = s+(e-s)/2;
        n.left = add(s, mid, array);
        n.right = add(mid+1, e, array);
        n.max = Math.max(n.left.max, n.right.max);
        n.min = Math.min(n.left.min, n.right.min);

        return n;
    }

    // Get the max value between the limits l and r (both inclusive)
    public int getMax(int l, int r)
    {
        return getMax(root, l, r);
    }

    private int getMax(Node n, int l, int r)
    {
        if(l<=n.s && r>=n.e)
            return n.max;
        if(l>n.e || r<n.s)
            return Integer.MIN_VALUE;
        return Math.max(getMax(n.left, l, r), getMax(n.right, l, r));
    }   

    public int getMin(int l, int r)
    {
        return getMin(root, l, r);
    }

    private int getMin(Node n, int l, int r)
    {
        if(l<=n.s && r>=n.e)
            return n.min;
        if(l>n.e || r<n.s)
            return Integer.MAX_VALUE;
        return Math.min(getMin(n.left, l, r), getMin(n.right, l, r));
    }
} 
```

**笔记**

如果数据增加或减少，则必须重建树。如果有频繁的插入/删除/更新，那么这根本不是一个好的选择。
当您有一组数据并且需要经常检查特定范围的值时，这非常有用。
我已经给出了存储最小值和最大值的示例。您可以在`Node`
Apologize 中存储值的总和或任何其他内容，以便在 JAVA 中编写代码 :)

# c# - 从另一个类和线程 C# 附加到 TextBox

> ID：15144292
> 
> 赞同：0
> 
> 时间：2013-02-28T19:45:24.810
> 
> 标签：c#

我有一个设置和显示文本框的表单。在表单加载方法中，我从一个完全独立的类名开始一个新线程`Processing`：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Processing p = new Processing();
        Thread processingThread = new Thread(p.run);
        processingThread.Start();
    } 
```

这是处理类。我想做的是在`Utilities`类中创建一个方法，该方法允许我从我需要的任何类更新文本框：

```
public class Processing
{        
    public void run()
    {               
        Utilities u = new Utilities();

        for (int i = 0; i < 10; i++)
        {
            u.updateTextBox("i");
        }                    
    }

 } 
```

然后终于`Utilites`上课了：

```
class Utilities
{
    public void updateTextBox(String text) 
    {
        //Load up the form that is running to update the text box
        //Example:  
        //Form1.textbox.appendTo("text"):
    }
} 
```

我已经阅读了`Invoke`方法、`SynchronizationContext`后台线程和其他所有内容，但几乎所有示例都使用与线程相同的类中的方法`Form`，而不是来自单独的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:51:33.373

该类`Progress`是专门为此设计的。

在您的表单中，在启动后台线程之前，创建一个`Progress`对象：

```
Progress<string> progress = new Progress<string>(text => textbox.Text += text); 
```

然后将该`progress`对象提供给您的工作方法：

```
Processing p = new Processing();
Thread processingThread = new Thread(() => p.run(progress));
processingThread.Start(); 
```

然后处理器可以报告进度：

```
public class Processing
{        
    public void run(IProgress<string> progress)
    {               
        for (int i = 0; i < 10; i++)
        {
            Thread.Sleep(1000);//placeholder for real work
            progress.Report("i");
        }                    
    }
} 
```

该类`Progress`在内部将捕获它首次创建的同步上下文，并编组由于`Report`调用该上下文而调用的所有事件处理程序，这只是一种奇特的说法，它负责移动到您的 UI 线程代表。它还确保您的所有 UI 代码都保留在表单的定义内，而所有非 UI 代码都保留在表单之外，有助于将业务代码与 UI 代码分开（这是一件非常好的事情）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:52:33.927

我会`AppendText()`向您的 Form1 类添加一个方法，如下所示：

```
public void AppendText(String text) 
{
    if (this.InvokeRequired)
    {
        this.Invoke(new Action<string>(AppendText), new object[] { text });
        return;
    }
    this.Textbox.Text += text;
} 
```

然后从你的实用程序类中，这样调用它：

```
class Utilities
{
    Form form1;   // I assume you set this somewhere

    public void UpdateTextBox(String text) 
    {
        form1.AppendText(text);
    }
} 
```

可以在此处找到对 .NET 中的线程的非常好的全面评论：[Multi-Threading in .NET](http://www.yoda.arachsys.com/csharp/threads/)。它有一个关于[WinForms](http://www.yoda.arachsys.com/csharp/threads/winforms.shtml)中的线程的部分，对您有很大帮助。

# c# - 如何在安装程序类中使用设置项目资源？

> ID：15144298
> 
> 赞同：0
> 
> 时间：2013-02-28T19:45:48.870
> 
> 标签：c#, visual-studio-2010, installation, setup-project

我写了一个`C# installer class`明确使用的方法`abcd.txt`。每次我的用户必须在安装时放入`abcd.txt`文件`System32`夹。这样安装程序类就可以使用它。

现在我已经添加`abcd.txt`到我的`setup project`. 是否可以使用代码访问该文件`installer class`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:33:06.550

将您的文件放在应用程序文件夹中，这会将您的文件复制到用户给定的位置。之后，您可以使用以下代码将此文件复制到 system32 文件夹中：

```
string targetDir = this.Context.Parameters["TargetDir"];
string destpath = Environment.GetFolderPath(Environment.SpecialFolder.System);
string filename = targetDir + "\filename";
File.Copy(filename, destpath); 
```

将代码放在类的`_AfterInstall`事件中`Installer`。

在这种情况下，您也可以访问此文件并根据需要进行修改。

# php - 嵌套年/月/帖子标题存档代码困难

> ID：15144306
> 
> 赞同：0
> 
> 时间：2013-02-28T19:46:10.510
> 
> 标签：php, wordpress

我正在尝试使用此问题（和答案）中的代码来制作嵌套的年/月/帖子标题存档菜单：[嵌套的年/月/帖子标题存档](https://stackoverflow.com/questions/14560216/nested-year-month-post-title-archive)

不幸的是，代码不起作用（显示年份和月份，但帖子标题下没有显示任何内容）。知道我可能做错了什么吗？

```
<div class="blog-list-archive">

<?php
/**/
$years = $wpdb->get_col( "SELECT DISTINCT YEAR(post_date)
FROM $wpdb->posts WHERE post_status = 'publish'
AND post_type = 'post' ORDER BY post_date DESC");
foreach($years as $year) :
?>
<li><a href="JavaScript:void()"><?php echo $year; ?></a>

    <ul class="archive-sub-menu">
        <?    $months = $wpdb->get_col("SELECT DISTINCT MONTH(post_date)
        FROM $wpdb->posts WHERE post_status = 'publish' AND post_type = 'post'
        AND YEAR(post_date) = '".$year."' ORDER BY post_date DESC");
        foreach($months as $month) :
        ?>
            <li><a href="<?php echo get_month_link($year, $month); ?>"><?php echo date( 'F', mktime(0, 0, 0, $month) );?></a>

                <ul class="archive-sub-menu">

                    <?  global $wpdb; $sposts = $wpdb->get_col( "SELECT ID 
                        FROM $wpdb->posts WHERE MONTH(post_date) = '$month'
                        AND YEAR(post_date) =  '$year' AND post_status = 'publish'
                        AND 'post_type' = 'post' ORDER BY post_date DESC" );
                        foreach( $sposts as $spost ) {
                    ?>
                        <li><a href="<?php echo get_permalink( $spost ); ?>"><?php echo get_the_title( $spost ); ?></a></li>

                        <?php } endforeach; ?>
                </ul>

            </li>

        <?php endforeach;?>

    </ul>

</li>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:04:16.163

这个循环：

```
foreach( $sposts as $spost ) {
?>
    <li><a href="<?php echo get_permalink( $spost ); ?>"><?php echo get_the_title( $spost ); ?></a></li>

<?php } endforeach; ?> 
```

对我来说看起来很奇怪。如果您使用花括号，则不需要`endforeach`. 如果您想使用`endforeach`一致性，请使用冒号而不是大括号，就像您对其他循环所做的那样。

# opencv - 如何延迟 OpenMp 并行线程

> ID：15144307
> 
> 赞同：0
> 
> 时间：2013-02-28T19:46:14.827
> 
> 标签：opencv, openmp

在互联网上做了一些调查之后，OpenCV 中的 Videocapture 对象似乎不是多线程安全的。我发现的一个建议是延迟线程执行。鉴于以下 omp 中的多部分示例，我将如何执行此操作，其中我基本上在任何地方都使用相同的 Videocapture 对象：

```
 #pragma omp parallel{ 

  #pragma omp sections nowait
    { 
    #pragma omp section
    { loadframe }
    #pragma omp section
    { loadframe;}
    #pragma omp section
    { loadframe }
     }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:11:51.477

```
 MyClass* mc = new MyClass();
  #pragma omp parallel sections
  {
   #pragma omp section
   {
      #pragma omp critical
      {
             mc->myFunc();
      }
    }
      #pragma omp section
   {
        #pragma omp critical
         {
             mc->myFunc();
        }
  }
   } 
```

[另外，这是一个很好的例子](http://www.viva64.com/en/a/0054/#ID0EBCBM)

# jquery - 延迟加载jquery插件减慢页面

> ID：15144308
> 
> 赞同：1
> 
> 时间：2013-02-28T19:46:23.163
> 
> 标签：jquery, jquery-plugins, lazy-loading

我有一个页面使用延迟加载插件来加载一堆小图像。我有一组过滤器可以删除元素和添加元素。因此，每次单击过滤器时，我都会在我的所有 img 元素上调用延迟加载。当我这样做时，它开始减慢页面速度，每次我调用 $("img").lazyload(); 它变得更加陷入困境。我尝试在元素被删除之前使用 unbind ，这样一旦添加的新元素就没有剩余的事件，但这仍然没有做任何事情。

任何人都知道为什么会发生这种情况。我的代码源很大，所以我不能拿出一个元素来发布。所以希望有人以前遇到过这个问题，并且可能知道它为什么会发生。

另一个问题是我必须调用 $(window).trigger("scroll"); 在我调用 $("img").lazyload(); 之后 为了加载图像。这正常吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T17:50:51.563

我有一个类似的问题，我今天能够弄清楚。在这里查看我对我的问题的解决方案：

[jQuery LazyLoad 插件减慢 div 滚动](https://stackoverflow.com/questions/17428976/jquery-lazyload-plugin-slowing-down-div-scrolling/17431675#17431675)

快速回答是，每次您在容器上运行它以检查滚动时，lazyload 都会绑定一个事件侦听器。不幸的是，它在重新绑定之前并没有取消绑定这个事件，所以当你一遍又一遍地运行延迟加载时，你会添加大量的滚动侦听器添加到容器中。一个快速的解决方案是 .unbind('scroll') 在您的容器上再次调用延迟加载。上面的链接有更深入的答案以及一些小提琴来查看差异。

# opengl-es - 使用帧缓冲区和 GLKit 的 GLKBaseEffect 渲染到纹理

> ID：15144310
> 
> 赞同：0
> 
> 时间：2013-02-28T19:46:31.197
> 
> 标签：opengl-es, opengl-es-2.0, glkit

我正在尝试使用 GLKit 绘制纹理（然后在对象上使用该纹理），但我收到`GL ERROR: 0x0502`了我认为这意味着传递给函数的值无效。问题是，错误是在效果 prepareToDraw 方法内的某个地方触发的。顶点数组似乎设置正确，因为我可以使用相同的设置毫无问题地绘制默认帧缓冲区。有什么我想念的吗？

```
GLint defaultFBO;
glGetIntegerv(GL_FRAMEBUFFER_BINDING, &defaultFBO);

GLenum status;
glBindFramebuffer(GL_FRAMEBUFFER, _boundsTextureFramebuffer);
glBindTexture(GL_TEXTURE_2D, self.backgroundTexture.name);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8_OES, 1024, 1024, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, self.backgroundTexture.name, 0);
status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
if (status != GL_FRAMEBUFFER_COMPLETE)
{
    NSLog(@"Failed to initialize the texture framebuffer");
}

effect.constantColor = [self.color vectorValue];
[effect prepareToDraw];

glBindVertexArrayOES(self.vertexArray);
glDrawElements(_data.mode, (GLsizei)self.data.indicesCount, GL_UNSIGNED_INT, (void*)0);
glBindVertexArrayOES(0);

glBindFramebuffer(GL_FRAMEBUFFER, (GLuint)defaultFBO); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:59:05.897

您发布的代码中遗漏了一件重要的事情：渲染缓冲区。添加一个可能会解决您的问题。这是我脑海中的一个例子：

```
 GLint defaultFBO;
    glGetIntegerv(GL_FRAMEBUFFER_BINDING, &defaultFBO);

    GLint defaultRBO;
    glGetIntegerv(GL_RENDERBUFFER_BINDING, &defaultRBO);

    glGenFramebuffers(1, &_boundsTextureFramebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, _boundsTextureFramebuffer);

    glGenRenderbuffers(1, &_boundsTextureRenderbuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, _boundsTextureRenderbuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA4, width, height);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _boundsTextureRenderbuffer);

    ...

    glBindFramebuffer(GL_FRAMEBUFFER, (GLuint)defaultFBO);
    glBindRenderbuffer(GL_RENDERBUFFER, (GLuint)defaultRBO); 
```

# php - 重力形式 - 获取当前页码

> ID：15144311
> 
> 赞同：9
> 
> 时间：2013-02-28T19:46:39.617
> 
> 标签：php, javascript, wordpress

我有一个多页表格。

我想在此表单的最后一页上执行一些自定义 JavaScript。从理论上讲，我所要做的就是检索当前页码并编写条件。

**很简单，对吧？**显然不是。

我原来的解决方法是这样的：

```
if ($('gform_page').last().css('display') !== 'none') {
    // perform custom scripts now that the last
    // Gravity Form page is being shown
} 
```

但`$('...').css('display')`返回我在表单中尝试过`undefined`的*每个元素。*每次用户点击“下一步”按钮时，都会触发自定义脚本。没有雪茄。

然后，在查看[Gravity Forms 文档](http://gravityhelp.com/documentation/page/Developer_Docs)后，我发现了两个看起来很有用的事件：`gform_post_render`和`gform_page_loaded`.

但是，文档没有说明如何访问参数。

```
jQuery(document).bind('gform_page_loaded', function(event, form_id, current_page){
    console.log(current_page);
    // returns nothing when loaded in the footer
    // returns [Object, object] when placed in an HTML field in the form
}); 
```

除了没有正确的代码之外，我还怀疑我没有将代码放在正确的位置，因为我在 functions.php 和 header.php 中也徒劳地尝试了以下内容（[如文档所示](http://gravityhelp.com/documentation/page/Gform_enqueue_scripts)）：

```
<?php
function enqueue_custom_script($form, $is_ajax){
    if ($is_ajax) :
        echo '<script>console.log(current_page);</script>';
    endif;
}
add_action("gform_enqueue_scripts", "enqueue_custom_script", 10, 2);
?> 
```

# 问题：

我需要什么代码来检索当前页码，更重要的是，我应该在哪里放置该代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T20:49:22.877

我得到了它。

显然，该功能[`rgpost`](http://www.gravityhelp.com/documentation/page/Rgpost/)对于访问当前页码至关重要。经过我自己的一些混乱之后，我能够在两个functions.php中以及在header.php中的wp_head（）函数之前获得以下代码。

```
function run_script_on_last_page($form) {
    if (!is_admin()) {
        $current_page = rgpost('gform_source_page_number_' . $form['id']) ? rgpost('gform_source_page_number_' . $form['id']) : 1;
        if ($current_page == 10) {
            wp_enqueue_script('custom_script', get_template_directory_uri() . '/js/custom_script.js', array('jquery'), null, true);
        }
    }
}
add_action('gform_enqueue_scripts_63', 'run_script_on_last_page'); 
```

如果您要复制/粘贴上面的代码，请确保：

*   替换`10`为您要检查的页面
*   确保您的参数在`wp_enqueue_script`
*   替换`63`为您的表单 ID

我发现一些有用的资源：

*   `gform_validation`过滤器文档的[这一部分](http://www.gravityhelp.com/documentation/page/Using_the_Gravity_Forms_%22gform_validation%22_Hook#Getting_the_Current_Page)
*   的文档[`gform_enqueue_scripts`](http://www.gravityhelp.com/documentation/page/Gform_enqueue_scripts)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-04T17:18:54.073

OPs 接受的答案可能很好用，但如果您有使用 Ajax 进行分页的表单设置，它就不起作用。

在那种情况下，我只能使用 Javascript 和以下方法让它工作；

[http://www.gravityhelp.com/documentation/page/Gform_post_render](http://www.gravityhelp.com/documentation/page/Gform_post_render)

```
jQuery(document).bind('gform_post_render', function (event, formId, current_page) {
    if (current_page == 2) {
        // do something
    }
}); 
```

您当然可以使用`formId`参数将其限制为特定形式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-25T00:46:36.637

当前接受的答案仅在用户从未转到表单中的上一页时才有效，如果他们这样做了，那么`gform_sourge_page_number`总是滞后一个。我找到了一个更好的解决方案（以这个钩子为例，但你应该能够在任何传递了 $form 的钩子中使用它）：

```
function run_script_on_last_page( $form)  {
  if ( !is_admin() ) {
    if ( \GFFormDisplay::get_current_page( $form['id'] ) == 10) {
        wp_enqueue_script( 'custom_script', get_template_directory_uri() . '/js/custom_script.js', array( 'jquery' ), null, true );
    }
  }
}

add_action( 'gform_enqueue_scripts_63', 'run_script_on_last_page' ); 
```

`GFFormDisplay::get_current_page( $form_id )`是许多方便的未记录功能之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-01T16:06:23.500

我写了一个返回当前页面的小函数：

```
// Get Gravity Forms Current Page
// Syntax: gf_current_page()
function gf_get_current_page()
{
    return rgpost('gform_source_page_number_' . $_POST['gform_submit']) ? rgpost('gform_target_page_number_' . $_POST['gform_submit']) : 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-30T12:36:38.657

除了接受的答案之外，这里是一个查找当前页面并动态查找表单中有多少页面的示例。此示例根据是否是表单的最后一页来更改按钮文本，而不是将脚本排入队列。

```
// Change the text of the 'Next' form button to 'Submit' when
// the current page is the final page of the form
add_filter( 'gform_next_button', 'next_to_submit', 10, 2 );
function next_to_submit( $next_button, $form ) {
    $replacement_next_button = $next_button;
    $last_page_number = 1;
    foreach ($form['fields'] as $field) {
        $is_hidden = RGFormsModel::is_field_hidden( $form, $field, array() );
        if ($field['pageNumber'] > $last_page_number && !$is_hidden) {
            $last_page_number = $field['pageNumber'];
        }
    }
    $current_page_number = rgpost('gform_source_page_number_' . $form['id']) ? rgpost('gform_source_page_number_' . $form['id']) : 1;
    if ($last_page_number === $current_page_number) {
        // If the current page is the final page
        $replacement_next_button = str_replace( 'Next', 'Submit', $next_button );
    }
    return $replacement_next_button;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T01:42:09.987

以下代码在 JavaScript 中适用于我：

```
$('.gf_step_active .gf_step_number').html() 
```

它将以多页的形式为您提供当前页面的页码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-14T07:24:13.177

使用 jQuery

```
 var current_page_ = 1+parseInt(jQuery('.gform_page:visible').index()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-12T17:56:19.443

尝试使用这个：

```
var current_visible_page = jQuery('.gf_step_active .gf_step_number').html();
console.log(current_visible_page); 
```

在控制台中使用上述方法来检查它是如何工作的。

# javascript - 如果宽度 == 200px 运行函数

> ID：15144312
> 
> 赞同：1
> 
> 时间：2013-02-28T19:46:43.767
> 
> 标签：javascript, jquery

这是一个[显示问题的jsFiddle](http://jsfiddle.net/hSqYG/)

我不确定为什么这不起作用：

```
if ($('#menu').width() == '200px') {
    alert("what");
} 
```

我希望在动画完成时出现警报。所以我假设我可以说，当动画完成后，元素的宽度为 200px，它会显示警报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T19:51:01.293

1）您在动画完成之前检查值。

2）您的宽度值将是“200”而不是“200px”

这是 jQuery 文档。您需要在代码的回调部分执行检查。

```
$('#clickme').click(function() {
  $('#book').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'
  }, 5000, function() {
    // Animation complete.   <---- your value check code goes here
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T19:49:24.497

[jQuery.width](http://api.jquery.com/width/)返回一个数字。您正在与字符串进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T19:55:41.277

检查更新的小提琴。我所做的是添加了一个“回调”函数，该函数在动画完成时执行。

```
$(this).stop().animate({ width: "200px" }, 250,
  function(){if ($('#menu').width() == '200') { alert("what"); } /* Callback Function */
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T19:51:28.863

`.width()`应该返回一个数字，而不是 "###px" 值， Try `if ($('#menu').width() == 200) {`。

# ruby-on-rails-3 - 使用 Devise + Rspec2 + Spork/Guard 请求规格

> ID：15144315
> 
> 赞同：1
> 
> 时间：2013-02-28T19:46:48.060
> 
> 标签：ruby-on-rails-3, integration-testing, rspec2, guard, spork

我已经设置了 Rspec2 + Spork + Guard + Devise

我的文件如下

```
#spec_helper.rb
Spork.prefork do
  #code
  Dir[Rails.root.join('spec/support/**/*.rb')].each {|f| require f}
  RSpec.configure do |config|
    config.extend ControllerMacros, :type => :controller 
  end 
end

Spork.each_run do
  # This code will be run each time you run your specs.
  FactoryGirl.reload
  include ControllerMacros
end

#spec/support/controller_macros.rb
module ControllerMacros
    def login_user
      before(:each) do
        @request.env["devise.mapping"] = Devise.mapping[:user]
        user = FactoryGirl.create(:user)
        sign_in user
      end
    end
end

#spec/support/devise.rb
Spec.configure do |config|
    config.include Devise::TestHelpers, :type => :controller
end 
```

在我的请求规范中

```
#spec/features/documents_spec.rb
require 'spec_helper'

describe "Documents" do

  login_user

  describe "GET /documents" do
    it "should display document name as sameera CV" do
      #spec code
    end
  end
end 
```

当我跑步时`bundle exec guard`，我得到

```
 1) Documents GET /documents should display document name as sameera CV
     Failure/Error: Unable to find matching line from backtrace
     NoMethodError:
       undefined method `env' for nil:NilClass
     # ./spec/support/controller_macros.rb:4:in `block in login_user' 
```

到目前为止，我已经通过谷歌做了很多修复，但似乎没有任何效果，有人可以帮助我:)

我上线了

*   导轨 3.2.9
*   rspec 2.12.0
*   设计 2.2.3

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:52:42.060

尝试更改`@request.env["devise.mapping"] = Devise.mapping[:user]`为`request.env["devise.mapping"] = Devise.mapping[:user]`in`spec/support/controller_macros.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:31:13.740

在这里，我正在回答我自己的问题，并且我能够为我提出的问题找到解决方法。

以下是我所做的步骤

1)从支持目录中删除`controller_macros.rb`and`devise.rb`

2）`ControllerMacros`从`spec_helper.rb`

3）添加以下代码

```
#spec/features/documents_spec.rb
before(:each) do
   user = FactoryGirl.create(:user)
   visit root_path
   fill_in 'user_email', :with => user.email
   fill_in 'user_password', :with => user.password
   click_button 'Sign in'
end 
```

我敢肯定应该有一种更优雅的方式（如设计维基中所述），但这很有效：）

# java - org.hibernate.hql.internal.ast.QuerySyntaxException: table is not mapped [from table]

> ID：15144316
> 
> 赞同：3
> 
> 时间：2013-02-28T19:46:53.137
> 
> 标签：java, mysql, hibernate

我正在尝试使用 MySQL 学习使用 Hibernate，但在一系列错误之前和之后我从未使用过它，我终于被困住了：

```
Exception in thread "main" org.hibernate.hql.internal.ast.QuerySyntaxException: country is not mapped [from country]
    at org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180)
    at org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110)
    at org.hibernate.hql.internal.ast.tree.FromClause.addFromElement(FromClause.java:93)
    at org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3291)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3180)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)
    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)
    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1735)
    at org.hibernate.tutorial.hbm.Test.main(Test.java:37) 
```

**我已经尝试过其他问题的可能解决方案，但没有，它不起作用。**这是我到目前为止所做的：

**hibernate.cfg.xml**（文件夹源代码）

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC 
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN" 
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration> 
    <session-factory> 
        <!-- Database connection settings --> 
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property> 
        <property name="connection.url">jdbc:mysql://localhost:3306/stock</property> 
        <property name="connection.username">root</property> 
        <property name="connection.password">root</property>   

        <!-- JDBC connection pool (use the built-in) --> 
        <property name="connection.pool_size">1</property>   

        <!-- SQL dialect --> 
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>   

        <!-- Echo all executed SQL to stdout --> 
        <property name="show_sql">true</property>   
        <property name="format_sql">true</property>
        <property name="hbm2ddl.auto">create</property>

        <!-- configuration pool via c3p0-->
        <property name="c3p0.acquire_increment">1</property>
        <property name="c3p0.idle_test_period">3600</property> <!-- seconds -->
        <property name="c3p0.min_size">3</property>
        <property name="c3p0.max_size">5</property>
        <property name="c3p0.max_statements">0</property>
        <property name="c3p0.timeout">3605</property> <!-- seconds -->
        <property name="hibernate.c3p0.preferredTestQuery">select 1;</property>

        <!-- Mapping files --> 
        <!--<mapping resource="country.hbm.xml"/> -->
    </session-factory> 
</hibernate-configuration> 
```

**country.hbm.xml** (文件夹 * *src\main\resources\org\hibernate\tutorial\hbm** )

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping>
    <class name="org.hibernate.tutorial.hbm.country" table="country">
        <id name="id_country">
        <property name="country"/>
    </class>
</hibernate-mapping> 
```

**国家.java**

```
package org.hibernate.tutorial.hbm;

public class country {
    private int id_country;
    private String country;

    public int getId_country() {
        return id_country;
    }
    public void setId_country(int id_country) {
        this.id_country = id_country;
    }
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

} 
```

**测试.java**

```
package org.hibernate.tutorial.hbm;

import java.util.List;

import org.hibernate.SessionFactory;
import org.hibernate.Session;
//import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.tutorial.hbm.country; /* required for test function only */

public class Test {

    private static final SessionFactory sessionFactory;

        static {
            try {
                // Initialize factory using contents of hibernate.cfg.xml
                sessionFactory = new Configuration().configure().buildSessionFactory();
            } catch (Throwable ex) {
                System.err.println("Initial SessionFactory creation failed." + ex);
                throw new ExceptionInInitializerError(ex);
            }

        }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public static void main (String[] args) {

        country mycls = new country();
        /* the id field will auto-increment to a unique value which will distinguish records */
        //mycls.setCountry("My Property");
        Session session = sessionFactory.openSession();
        session.beginTransaction();
        List result = session.createQuery( "from country" ).list();
        for ( country ctry : (List<country>) result ) {
            System.out.println( "Country (" + ctry.getId_country() + ") : " + ctry.getCountry() );
        }
        session.getTransaction().commit();
        session.close(); /* if this test succeeds, you'll find a new record in your MySQL database */

    }

} 
```

## -***编辑 20130301***

我已经根据你的建议改变了几件事

**休眠.cfg.xml**

```
<!-- Mapping files --> 
<mapping resource="org/hibernate/tutorial/hbm/Country.hbm.xml"/> 
```

**我重命名并移动了文件 Country.hbm.xml（它是 country.hbm.xml）并更改了它**

```
<class name="Country" table="country">
<!-- <class name="org.hibernate.tutorial.hbm.country" table="country"> --> 
```

该文件已移至**src\org\hibernate\tutorial\hbm**

**country.java 类重命名为 Country.java**

**最后在 Test.java 中修改了这一行**

```
List result = session.createQuery( "from Country" ).list();
        for ( Country ctry : (List<Country>) result ) {
            System.out.println( "Country (" + ctry.getId_country() + ") : " + ctry.getCountry() );
        } 
```

**现在我把它当作一个错误**

```
Initial SessionFactory creation failed.org.hibernate.InvalidMappingException: Could not parse mapping document from resource org/hibernate/tutorial/hbm/Country.hbm.xml
Exception in thread "main" java.lang.ExceptionInInitializerError
    at org.hibernate.tutorial.hbm.Test.<clinit>(Test.java:21)
Caused by: org.hibernate.InvalidMappingException: Could not parse mapping document from resource org/hibernate/tutorial/hbm/Country.hbm.xml
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3423)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXmlQueue(Configuration.java:3412)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3400)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1330)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1730)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1781)
    at org.hibernate.tutorial.hbm.Test.<clinit>(Test.java:18)
Caused by: org.hibernate.MappingException: class Country not found while looking for property: id_country
    at org.hibernate.internal.util.ReflectHelper.reflectedPropertyClass(ReflectHelper.java:232)
    at org.hibernate.mapping.SimpleValue.setTypeUsingReflection(SimpleValue.java:324)
    at org.hibernate.cfg.HbmBinder.bindSimpleId(HbmBinder.java:449)
    at org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:382)
    at org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:322)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:173)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3420)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: Country
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.hibernate.internal.util.ReflectHelper.classForName(ReflectHelper.java:192)
    at org.hibernate.internal.util.ReflectHelper.reflectedPropertyClass(ReflectHelper.java:228)
    ... 12 more 
```

我感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T20:14:24.060

你`country.hbm.xml`的格式不正确：

```
<id name="id_country"> 
```

是一个打开的标签，它永远不会关闭。我怀疑你的意思是：

```
<id name="id_country"/> 
```

（注意结束斜线）。

然后（正如@RameshK 指出的那样），您必须添加

```
<mapping resource="org/hibernate/tutorial/hbm/country.hbm.xml"/> 
```

到你的`hibernate.cfg.xml`文件。

一个小问题：按照正常的编码约定，Java 中的类是大写的，所以我会`country`改为`Country`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:48:57.533

我终于解决了这个问题，在编辑了我在那里显示的答案中的所有内容之后，我将 Country.hbm.xml 文件修改为：（注意注释行）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping>
    <!-- <class name="Country" table="country"> -->
    <class name="org.hibernate.tutorial.hbm.Country" table="country">
        <id name="id_country"/>
        <property name="country"/>
    </class>
</hibernate-mapping> 
```

它必须是`org.hibernate.tutorial.hbm.Country`而不是`org.hibernate.tutorial.hbm.country`

# c# - 重构检查不同文件扩展名的 if-else 语句

> ID：15144320
> 
> 赞同：1
> 
> 时间：2013-02-28T19:47:02.167
> 
> 标签：c#, asp.net

我有这段代码，我觉得可以清理（我可能是错的），但我想看看是否有人建议我如何将其更改为“更好”

```
string getExt = Path.GetExtension(DocumentUNCPath.Text);
        var convertFileId = Guid.NewGuid();
        var convertFilePath = @"c:\temp\" + convertFileId + ".pdf";

        if (getExt == ".doc" || getExt == ".docx" || getExt == ".txt" || getExt == ".rtf")
        {
            WordToPdf(convertFilePath);

        }
        else if (getExt == ".xlsx" || getExt == ".xls")
        {
            ExcelToPdf(convertFilePath);
        }
        else if (getExt == ".jpg" || getExt == ".png" || getExt == ".jpeg" || getExt == ".JPG" || getExt == ".PNG")
        {
            ImgToPDF(convertFilePath);
        } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T19:51:21.403

处理程序的扩展映射是此类情况的标准方法：

```
// populate with { ".doc", WordToPdf } and similar pairs
Dictionary<string, Action<string> > handlers = ... 

// find and call handler by extension 
// (use TryGetValue to check for existence if needed)
handlers[getExt]( convertFilePath ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T19:51:24.557

你可以做这样的事情

```
 switch (getExt.ToUpper()) 
    {    
       case "JPG":    
       case "PNG": 
.... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T20:38:16.050

我认为`Dictionary<string, Action<string>>`上面的答案是最优雅的答案，但为了完整起见，这里有一个通过字符串扩展的解决方案：

```
public static class StringExt
{
    public static bool MatchesAnyOf(this string text, params string[] targets)
    {
        return targets.Any(target => string.Compare(text, target, StringComparison.OrdinalIgnoreCase) == 0);
    }
} 
```

然后你可以这样写代码：

```
if (getExt.MatchesAnyOf(".doc", ".doxc", ".txt", ".rtf"))
{
    WordToPdf(convertFilePath);
}
else if (getExt.MatchesAnyOf(".xlsx", ".xls"))
{
    ExcelToPdf(convertFilePath);
}
else if (getExt.MatchesAnyOf(".jpg", ".png", ".jpeg", ".JPG", ".PNG")
{
    ImgToPDF(convertFilePath);
} 
```

此实现忽略大小写和文化，这适用于文件名，但不适用于一般用途 - 因此实际代码可能必须提供重载来指定文化和比较类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T19:58:39.533

以下最初可能是更多代码，但可以更好地扩展。

方法外：

```
 public static readonly List<string> WorkExtensions = new List<string> { ".doc", ".docx", ".txt", ".trf" };
    public static readonly List<string> ExcelExtensions = new List<string> { ".xlsx", ".xls" };
    public static readonly List<string> ImageExtensions = new List<string> { ".jpg", ".png", ".jpeg" }; 
```

方法内部：

```
 string getExt = Path.GetExtension(DocumentUNCPath.Text);
    var convertFileId = Guid.NewGuid();
    var convertFilePath = @"c:\temp\" + convertFileId + ".pdf";

    getExt = getExt.ToLower();

    if (WorkExtensions.Contains(getExt))
    {
        WordToPdf(convertFilePath)
    }
    else if (ExcelExtensions.Contains(getExt))
    {
        ExcelToPdf(convertFilePath);
    }
    else if (ImageExtensions.Contains(getExt))
    {
        ImgToPdf(convertFilePath);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T20:04:10.817

如果您正在寻找可扩展性，您可以考虑这样的事情：

```
public struct Converter {
  public string         Extension;
  public Action<string> ConvertAction;
}

public static class Extensions {
  static Action<string> WordToPdf  = (s) => {;};
  static Action<string> ExcelToPdf = (s) => {;};
  static Action<string> ImgToPdf   = (s) => {;};

  public static IEnumerable<Converter> Converters = new List<Converter> {
    new Converter {Extension = ".doc",  ConvertAction = WordToPdf},
    new Converter {Extension = ".docx", ConvertAction = WordToPdf},
    new Converter {Extension = ".txt",  ConvertAction = WordToPdf},
    new Converter {Extension = ".rtf",  ConvertAction = WordToPdf},

    new Converter {Extension = ".xls",  ConvertAction = ExcelToPdf},
    new Converter {Extension = ".xlsx", ConvertAction = ExcelToPdf},

    new Converter {Extension = ".jpg",  ConvertAction = ImgToPdf},
    new Converter {Extension = ".png",  ConvertAction = ImgToPdf},
    new Converter {Extension = ".jpeg", ConvertAction = ImgToPdf},
    new Converter {Extension = ".doc",  ConvertAction = ImgToPdf}
  };

  public void RunIt(string extension, string convertFilePath) {
    extension = extension.ToLower();
    var action = ( from a in Converters 
                   where a.Extension.Equals(extension) 
                   select a.ConvertAction).First();
    if (action != null) action(convertFilePath);
  }
} 
```

# java - 为什么我的 Android 应用程序中的计算（Eclipse）出现错误？

> ID：15144322
> 
> 赞同：2
> 
> 时间：2013-02-28T19:47:09.600
> 
> 标签：java, android, eclipse

我一直在开发一个 Android 应用程序，它用复数计算各种动作。我有几个错误，但 stackoverflow 社区非常有帮助，我确实意识到我的风格需要改进（命名）。然而，问题是程序出现计算错误，我对所有代码进行了三次检查，但由于某种原因它不能正确计算（即 2+2 不是 4），并且 logcat 没有显示错误。我也尝试将输出答案的部分移动到各个地方，但它仍然会出错。这是我的代码：

```
 package complex.OliverV;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;
    import android.widget.RadioButton;
    import android.widget.EditText;
    public class ComplexNumbersActivity extends Activity {
        /** Called when the activity is first created. */
Button Check;
RadioButton plus, minus, multiply, div;
EditText X1,X2,Y1,Y2;
TextView Ans;
int sign;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Check = (Button) findViewById(R.id.Check);
    plus = (RadioButton) findViewById(R.id.plus);
    minus = (RadioButton) findViewById(R.id.minus);
    multiply = (RadioButton) findViewById(R.id.multiply);
    div = (RadioButton) findViewById(R.id.div);
    Ans = (TextView) findViewById(R.id.Ans);
    X1=(EditText) findViewById(R.id.X1);
    X2=(EditText) findViewById(R.id.X2);
    Y1=(EditText) findViewById(R.id.Y1);
    Y2=(EditText) findViewById(R.id.Y2);
    plus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=1;
        }

    });
    minus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=2;
        }

    });
    multiply.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=3;
        }

    });
    div.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=4;
        }

    });
    Check.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String xs=X1.getText().toString();
            String xss=X2.getText().toString();
            String ys=Y1.getText().toString();
            String yss=Y2.getText().toString();
            double x3, y3;
            if(!xs.equals("") && !xss.equals("") && !ys.equals("") && !yss.equals("")&& xs != null && xss != null && ys != null && yss != null)
            {
            double x1=Double.parseDouble(xs);
            double x2=Double.parseDouble(xss);
            double y1=Double.parseDouble(ys);
            double y2=Double.parseDouble(yss);
            switch(sign)
            {
            case(1):
            {
                x3=(x1+x2);
                y3=(y1+y2);
                Ans.setText("x = "+x3+"y = "+y3);
            }
            case(2):
            {
                x3=(x1-x2);
                y3=(y1-y2);
                Ans.setText("x = "+x3+"y = "+y3);
            }
            case(3):
            {
                x3=((x1*x2) - (y1*y2));
                y3=((x2*y1) + (x1*y2));
                Ans.setText("x = "+x3+"y = "+y3);
            }
            case(4):
            {
                if(x2!=0 && y2!=0)
                {
                x3 = ((x1 * x2) + (y1 * y2)) / ((x2 * x2) + (y2 * y2));
                y3 = ((x2 * y1) - (x1 * y2)) / ((x2 * x2) + (y2 * y2));
                Ans.setText("x = "+x3+"y = "+y3);
                }
                else
                {
                    Ans.setText("Enter valid numbers!");
                }
            }

        }
        }
            else
            {
                Ans.setText("Enter valid numbers!");
            }
        }
    });
}       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:12:00.373

您`break;`的`switch`. 将它们添加到每个`case`. 每个也是`{}`不必要的`case`。

# asp.net - 如何捕获 DataBind 的别名？

> ID：15144324
> 
> 赞同：0
> 
> 时间：2013-02-28T19:47:12.427
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4, c#-3.0

我需要为我的 DataBind 捕获查询 SQL Server 的别名

我的查询

`string sqlConsulta = "SELECT CONVERT(VARCHAR(10), data_recebimento, 103) AS d1`

我需要得到别名'd1'。有可能吗？怎么做这个？

我尝试使用 Eval('d1') 进行制作，但未捕获别名。仅捕获列...

谢谢

# c++ - Win32 C++ 应用程序中的 McCabe 复杂性

> ID：15144326
> 
> 赞同：0
> 
> 时间：2013-02-28T19:47:19.180
> 
> 标签：c++, winapi, code-complexity

读过这个问题：

[用于 Java 中 switch 的 McCabe 循环复杂度](https://stackoverflow.com/questions/8291183/mccabe-cyclomatic-complexity-for-switch-in-java)

我的兴趣转向了无法以这种方式解决的 switch 语句（？）。

意识到 McCabe 的决策应该少于 20 以保证更好的可维护性，我开始怀疑 Win32 应用程序。

在制作 Win32 应用程序时，可以制作按钮。现在对于这些按钮，在它们上放置一个处理程序是非常典型的，并且在它们被按下时处理它们发送的消息通常在 Win32 回调函数中完成。

现在随着应用程序变得越来越大，这个 switch 语句变得越来越大（超过 20 个）。这是否意味着 Win32 应用程序的可维护性比其他应用程序（Java Swing？）更差？

或者这是 McCabe 复杂性的一个例外，如果是这样，那么这实际上以何种方式与其他应用程序类型的可维护性相提并论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:06:06.407

我认为这与 Win32 应用程序本身没有任何关系。这与使用 switch 语句有关。

没有什么可以阻止您使用映射，例如，将消息映射到处理该消息的函数。

在这种情况下，就您的代码而言，没有 switch 语句 - 只是一个映射查找，这意味着您的复杂性应该随着时间的推移保持不变。

您想要这样做的原因是，通过使用映射，您可以有效地将“switch 语句”从*代码*移动到 C++ 标准库中。McCabe 的复杂性在于测量您的代码。换句话说，您的逻辑现在更简单了，复杂性分数将显示这一点。

为什么要测量您的代码？因为度量的原因是评估代码的可维护性，而您不会维护 C++ 标准库。

这是一个非常简单的例子：

```
#include <iostream> 
#include <map> 
#include <functional>

typedef std::map<int,std::function<void()>> ProcessMessageMap;   

void print_hi() {   std::cout<<"hi"<<std::endl; }   
void print_bye() {   std::cout<<"bye"<<std::endl; }     

enum Message {   SAY_HI = 0,   SAY_BYE,   DONT_DO_ANYTHING } messages;   

void process_message( const ProcessMessageMap &m, Message msg )
{
    auto i = m.find(msg);     
    if(i != m.end())
    {
        (i->second)();
    }
}   

void setup_map( ProcessMessageMap &m )
{
    m[SAY_HI] = std::bind(print_hi);
    m[SAY_BYE] = std::bind(print_bye);
}   

int main() 
{
    ProcessMessageMap msg_map;     
    setup_map( msg_map );     
    process_message( msg_map, SAY_HI );     
    process_message( msg_map, SAY_BYE );     
    return 0; 
} 
```

你可以在这里看到输出：http: [//ideone.com/bq7HgT](http://ideone.com/bq7HgT)

# java - 当前堆在java中得到更新

> ID：15144330
> 
> 赞同：2
> 
> 时间：2013-02-28T19:47:31.860
> 
> 标签：java

我正在为java中的堆编写一个类。

类堆有

```
 class Heap{
     int maxsize=1000;
     int[] heap= new int[maxsize];
     int size=0;
     //.... some methods basically, print, insert and remove

     int[] sortHeap (){
         int[] sorted= new int[size];
         Heap copy= new Heap();
         copy.heap=heap;
         copy.size=size;
         int i=0;
         while (copy.size>0){
             sorted[i]=copy.remove();
             i++;
         }
         return sorted;
     }
 } 
```

我尝试创建的一种方法是返回已排序的堆。我不想破坏原来的堆。但是，当我调用此方法时，我调用它的原始堆会被破坏。有人可以向我解释为什么会这样吗？

例如。说堆是 -17,
-1, -7,
1, 0, 2, -5,
17, 57, 27, 3, 127, 9, // 正确打印

现在我调用 test.heapSort(); 然后打印结果数组。

然后在此之后打印堆给出结果

127、127、127、57、57、127、27、27、57、27、3、127、9
、
_
_

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:02:46.150

该声明

```
copy.heap=heap; 
```

不复制数组。它只是将数组的引用分配`heap`给`copy.heap`. 所以这两个字段：`heap`并`copy.heap`指向同一个数组。

复制数组内容的正确方法是：

```
System.arraycopy(heap, 0, copy.heap, 0, heap.length); 
```

# c - 返回值在屏幕上显示时的功能错误

> ID：15144332
> 
> 赞同：-1
> 
> 时间：2013-02-28T19:47:36.247
> 
> 标签：c, arrays, string, pointers

我被这个非常简单的例子打倒了，这个例子起初看起来很简单，但最近让我很头疼。有人能告诉我这些功能有什么问题吗？

注意：我正在使用 C。这是一项要求。

```
#include "stdafx.h"
#include <string.h>
#include <stdio.h>

char* telegram_input()
{
    char message[100];

    printf("Write down the telegram: ");
    gets(message);

    return message;
}

int _tmain(int argc, _TCHAR* argv[])
}

        printf("Write your message:\n\n");
    char * myMessage; 

    myMessage = telegram_input();

        //HERE's the problem!!!!! -->
        printf("The written message is: %s.", myMessage);

    return 0;
} 
```

问题是当我将数组的值返回给 char* 指针时，它只保存数组的第一个值，它是一个不正确的值。当我用'printf'打印它时，它会显示一个笑脸字符。那个怎么样？为什么会这样？如果我没有使用上述功能，我就不会遇到这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:51:11.987

您正在返回在堆栈上分配的变量的本地实例。如果你想正确地做到这一点，有几种方法。您可以在堆上分配一个 char 数组，并且在打印后必须释放它。另一种方法是返回 a`static const char*`然后打印它。这种方法不是线程安全的，如果任何其他线程调用这个函数，那么数组中的数据当然会改变，给你一个意想不到的打印输出。甚至另一种方法是将您想要将消息写入的目的地传递给可能为您提供最多控制权的函数。我敢肯定还有其他人，但这应该给你一些想法。

```
#include "stdafx.h"
#include <string.h>
#include <stdio.h>

static const char* telegram_input_static()
{
    static char message[100];

    printf("Write down the telegram: ");
    gets(message);

    return message;
}

char* telegram_input_heap()
{
    char* message = malloc(sizeof(char) * 100);

    printf("Write down the telegram: ");
    gets(message);

    return message;
}

void telegram_input_dest( char* dest )
{
    printf("Write down the telegram: ");
    gets(dest);
}    

int _tmain(int argc, _TCHAR* argv[])
{

    printf("Write your message:\n\n");
    char * myMessage; 

    myMessage = telegram_input_heap();
    printf("The written message is: %s.", myMessage);
    free(myMessage);

    myMessage = (const char*)telegram_input_static();
    printf("The written message is: %s.", myMessage);

    char destination[100];
    telegram_input_dest(destination);
    printf("The written message is: %s.", destination);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:54:27.707

Message 是一个局部变量，您将返回它，它将被取消分配。您必须创建指针并发送它。然后在主目录中删除它。

```
char* telegram_input()
{
    char *message = malloc( sizeof(char) * (100) );

    printf("Write down the telegram: ");
    gets(message);

    return message;
}

int _tmain(int argc, _TCHAR* argv[])
{

    printf("Write your message:\n\n");
    char * myMessage; 

    myMessage = telegram_input();

        //HERE's the problem!!!!! -->
        printf("The written message is: %s.", myMessage);

    free(myMessage);
    return 0;
} 
```

# java - 拍照并直接上传以响应 WebView 中的“选择文件”按钮

> ID：15144334
> 
> 赞同：0
> 
> 时间：2013-02-28T19:47:43.673
> 
> 标签：java, android, android-intent, android-webview, android-camera

我将 WebView 用于一个简单的应用程序，让用户在网站上上传图片。当前，当用户单击我网站上表单的“选择文件”部分时，我会弹出一个“图像选择器”。

我宁愿要求用户选择一个动作（相机、画廊、文件管理器）。当用户使用浏览器而不是在 WebView 中时，这种情况已经发生。我该怎么做？

我现有的代码如下：

```
package com.example.test;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.webkit.ValueCallback;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;

public class MainActivity extends Activity {

private WebView mWebView;

private ValueCallback<Uri> mUploadMessage;
private final static int FILECHOOSER_RESULTCODE = 1;

@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == mUploadMessage)
            return;
        Uri result = intent == null || resultCode != RESULT_OK ? null
                : intent.getData();
        mUploadMessage.onReceiveValue(result);
        mUploadMessage = null;

    }
}

protected class MyWebChromeClient extends WebChromeClient {
    public void openFileChooser(ValueCallback<Uri> uploadMsg) {  

        mUploadMessage = uploadMsg;  
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
        i.addCategory(Intent.CATEGORY_OPENABLE);  
        i.setType("image/*");  
        MainActivity.this.startActivityForResult(Intent.createChooser(i,"Image Chooser"), FILECHOOSER_RESULTCODE);  
       }

       public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) {
           openFileChooser(uploadMsg);
       }                   

       public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) {
           openFileChooser(uploadMsg);
       }      
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://test.com");
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.setWebChromeClient(new MyWebChromeClient());
    Button newButton = (Button)findViewById(R.id.button1);
    newButton.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
            MainActivity.this.mWebView.loadUrl("http://test.com");
           }});
}

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webview, String url){
        webview.loadUrl(url);
        return true;
    }
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK)&& mWebView.canGoBack()){
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:20:30.817

试试[Joe S 的代码](https://stackoverflow.com/q/14175564/1331135)，它对我有用，现在我可以在文件选择器对话框中将相机放在画廊旁边。但是，您从相机拍摄的照片不会上传。我会处理它并相应地更新它。

# java - 在java中比较两个字符串，如何打印等于单词

> ID：15144338
> 
> 赞同：1
> 
> 时间：2013-02-28T19:48:06.693
> 
> 标签：java, string, startswith, ends-with

在java中我有2个字符串（每个包含一个单词列表，例如ab，ac，ad，bb，bc，bd和第二个包含用户输入的字符串（例如单词“a”）我想比较这两个字符串并得到第一个字符串包含的文本（比如如果startswith返回true我想打印出匹配的单词，例如在我的情况下ab，ac，ad）有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:52:20.640

使用`split`和迭代

```
String input = "a";
String str = "ab,ac,ad,bb,bc,bd";
for (String s: str.split(",")) {
    if (s.startsWith(input)) {
        System.out.println("String " + s + " starts with " + input);
    }
} 
```

# java - 设置为false后while循环不重复

> ID：15144339
> 
> 赞同：0
> 
> 时间：2013-02-28T19:48:11.207
> 
> 标签：java, while-loop

```
 boolean gotGoodGenInput = false;
  while (!gotGoodGenInput)
  {

    gotGoodGenInput = true;

    String inputGen = JOptionPane.showInputDialog
    (
      "Enter your Generation \n" +
      "It must be a number from 0 to 25"
    ); 

    if(inputGen != null)
    {  

      if (inputGen.isEmpty() || !inputGen.matches("[0-9]*")) 
      {
        JOptionPane.showMessageDialog
        (
          null,
          "Please input a number from 0 to 25",
          "Error",
          JOptionPane.ERROR_MESSAGE
        );
        gotGoodGenInput = false;
      }

      int GenNumber = Integer.parseInt(inputGen);

      if (GenNumber < 0 || GenNumber > 25)
      {
        JOptionPane.showMessageDialog
        (
          null,
          "Your number can't be less than 0 or greater than 25",
          "Error",
          JOptionPane.ERROR_MESSAGE
        );
        gotGoodGenInput = false;
      }

    }
    else
    {
      System.exit(0);
    }
  } 
```

您好，我遇到的问题是，如果用户输入“a”（例如），那么他们将收到错误“请输入从 0 到 25 的数字”

```
 if (inputGen.isEmpty() || !inputGen.matches("[0-9]*")) 
```

并且它应该在遇到 gotGoodGenInput = false 时重新启动循环；

但它继续进入下一部分，它将尝试解析 int 但当然它会出错，因为“a”不是 int

所以我的问题是为什么当它到达 gotGoodGenInput = false 时它没有重新开始；在第一个 if 语句中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:52:56.907

线后

```
gotGoodGenInput = false; 
```

添加行

```
continue; 
```

这将从`while`循环的开头重新开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:58:29.000

仅设置`gotGoodGenInput=false`不足以重新启动循环。您已经更改了变量的值，但您没有告诉程序不要继续循环。

您可能希望`continue;`在每次设置后添加一个语句`gotGoodGenInput`以`false`获得您描述的行为。

您可能还想探索 Swing 的 InputVerifiers。查看此线程：[Java Swing：实现输入值的有效性检查](https://stackoverflow.com/questions/12997742/java-swing-implementing-a-validy-check-of-input-values)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:56:47.207

看起来在**if**语句之后缺少**else**，您可以在其中检查字符串是否为空或与整数不同。像这样，它将进入**if**语句，然后继续尝试解析 int 的下一个语句。

# image-processing - 使用 imageio.read 在设置像素后得到错误的像素值

> ID：15144340
> 
> 赞同：0
> 
> 时间：2013-02-28T19:48:12.080
> 
> 标签：image-processing

我的问题是我拍摄了一张图像，然后我更改了一些像素值，然后将它们设置到所需的位置，然后我写入图像，然后我使用 ImageIO.read() 通过使用图像对象读取图像我没有得到以前的值.. .那么我怎样才能得到以前的值

```
import java.awt.*;

import java.awt.event.*;

import java.awt.image.*;

import java.io.*;

import javax.imageio.*;

import javax.swing.*;

public class LoadImageApp extends JFrame implements ActionListener

{

      BufferedImage img=null;
  BufferedImage img1=null;
  BufferedImage mask=null;
  BufferedImage rao=null;
      JButton b1;
  int pixel[][];
  int w,h;
  JFileChooser chooser;
  File file;
      public void paint(Graphics g)
      {
         g.drawImage(img,50,50,150,200,this);
     g.drawImage(mask,600,100,150,200,this);

      }

  public LoadImageApp()
      {  
         super("Image...");
     setSize(800,800);
     setLayout(new FlowLayout());
     b1=new JButton("Select Image");
     b1.setSize(250,20);
     add(b1);
     b1.addActionListener(this);
     setVisible(true);
      }
  public void actionPerformed(ActionEvent ae)
  {
     try
     {  

                    chooser = new JFileChooser("C:/Users/Ravi/Desktop");
            chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
                int returnVal = chooser.showOpenDialog(this);
                if(returnVal == JFileChooser.APPROVE_OPTION) 
            {
             file=chooser.getSelectedFile();
             img=ImageIO.read(file);
             mask=new BufferedImage(img.getWidth(),img.getHeight(),img.getType());
             repaint();
             img1=img.getSubimage(0,0,100,150);
                }
            repaint();
            pixel=getPixels(img);
            int i=80,j=50;
            int temp[]={1,1,1,1};
            int temp1=setPixel(temp);
            for(j=0;j<w;j++)
             pixel[i][j]=temp1;
            System.out.println("pixels before.."+pixel[80][3]);
            this.setPixels();//setting pixels....
            ImageIO.write(mask,"jpeg",new File("aft-con.jpeg"));//write the image

           BufferedImage next=ImageIO.read(new File("aft-con.jpeg"));
           ord=getPixels(next);//getting the previous values...
           org=getARGB(ord[80][3]);
           System.out.println("pixels before.."+pixel[80][3]);//but it is not same...

         }
         catch(Exception e)
         {
            System.out.println("error in action");
         }
   }
   public int setPixel(int rgb[])
   {
        int pixel = (((rgb[0] & 0x0ff)<<24)|((rgb[1] & 0x0ff)<<16)|((rgb[2] & 0x0ff)<<8)|(rgb[3] & 0x0ff));
        return pixel;
   }
   public int[] getARGB(int pixel)
   {
          int rgb[]=new int[4];
          rgb[0] =((pixel >> 24) & 0xff);
          rgb[1] = ((pixel >> 16) & 0xff);
          rgb[2] =((pixel >> 8) & 0xff);
          rgb[3] =((pixel ) & 0xff);

           return rgb;
    }

    public int[][] getPixels(BufferedImage img)
   { 
      w=img.getWidth();
      h=img.getHeight();
      int pixels[][]=new int[h][w];

     int i=0,j=0;
     try
     {
       for(i=0;i<h;i++)
        for(j=0;j<w;j++)
            pixels[i][j]=img.getRGB(j,i);

     }
     catch(Exception e)
     {
         System.out.println("i:"+i+" j:"+j);
     }

     return pixels;
 }
 public void setPixels()
 {
      w=img.getWidth();
      h=img.getHeight();

          int i=0,j=0;
      try
      {
       for(i=0;i<h;i++)
         for(j=0;j<w;j++)
         mask.setRGB(j,i,pixel[i][j]);
      }
      catch(Exception e)
      {
                System.out.println("error at setting pixel");
      }
 }

     public static void main(String[] args) 
     {

        LoadImageApp f = new LoadImageApp();
            f.addWindowListener(new WindowAdapter(){
            public void windowClosing(WindowEvent e) {
            System.exit(0);
             }
           });
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:00:32.570

当图像保存为 JPEG 时，它会被压缩。这会导致像素值发生变化。如果您不希望发生任何更改，则需要以无损格式保存，例如 PNG。

# jquery - jQuery自动完成类别位置

> ID：15144351
> 
> 赞同：0
> 
> 时间：2013-02-28T19:48:39.133
> 
> 标签：jquery, jquery-ui, autocomplete

我曾经有这个：

```
$( "#glavnotursene" ).autocomplete({
    delay: 0,
    source: 'extrastuff.php?glavnotursene',
    select: function( event, ui ) {
        window.location = 'maps.php?id. ' + ui.item.nomer;
    }
}); 
```

而且效果很好。当项目弹出并单击它们时，我被重定向到 maps.php 我决定也使用类别，所以我这样做了：

```
 $.widget( "custom.catcomplete", $.ui.autocomplete, {
            _renderMenu: function( ul, items ) {
                var self = this,
                    currentCategory = "";
                $.each( items, function( index, item ) {
                    if ( item.category != currentCategory ) {
                        ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                        currentCategory = item.category;
                    }
                    self._renderItem( ul, item );
                });
            }
        });

$( "#glavnotursene" ).catcomplete({
        delay: 0,
        source: 'extrastuff.php?glavnotursene',
        select: function( event, ui ) {
            window.location = 'maps.php?id. ' + ui.item.nomer;
        }
    }); 
```

并且选择不再起作用，因此人们不会被重定向。

我在用着：

*   jQuery UI - v1.10.0

*   jQuery v1.9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:37:27.657

尝试以这种方式进行：

```
$( "#glavnotursene" ).autocomplete({
   delay: 0,
   source: 'extrastuff.php?glavnotursene',
   select: function( event, ui ) {
       window.location = 'maps.php?id. ' + ui.item.nomer;
   }
}).data("autocomplete")._renderMenu = function(ul, items) {
  var self = this, currentCategory = "";
  $.each( items, function( index, item ) {
     if ( item.category != currentCategory ) {
        ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
        currentCategory = item.category;
     }
     self._renderItem( ul, item );
  });
}; 
```

如果有效，则仅适用于`$('#glavnotursene')`. 使其通用的某种方法是将其分配给外部函数：

```
function my_autocomplete(ul, items, self){
  var currentCategory = "";
  $.each( items, function( index, item ) {
     if ( item.category != currentCategory ) {
        ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
        currentCategory = item.category;
     }
     self._renderItem( ul, item );
  });
}

$( "#glavnotursene" ).catcomplete({
   delay: 0,
   source: 'extrastuff.php?glavnotursene',
   select: function( event, ui ) {
       window.location = 'maps.php?id. ' + ui.item.nomer;
   }
}).data("autocomplete")._renderMenu = function(ul, items) {
  my_autocomplete(ul, items, this);
}; 
```

我没有检查这是否有效，但我希望它会。

# python - NumPy genfromtxt：正确使用filling_missing

> ID：15144352
> 
> 赞同：8
> 
> 时间：2013-02-28T19:48:44.553
> 
> 标签：python, csv, numpy, genfromtxt

我正在尝试处理保存到 CSV 的数据，这些数据可能在未知数量的列（最多约 30 个）中缺少值。我正在尝试使用`genfromtxt`'`filling_missing`参数将这些缺失值设置为 '0'。这是在 Win 7 上的 ActiveState ActivePython 2.7 32 位中运行的 numpy 1.6.2 的最小工作示例。

```
import numpy

text = "a,b,c,d\n1,2,3,4\n5,,7,8"
a = numpy.genfromtxt('test.txt',delimiter=',',names=True)
b = open('test.txt','w')
b.write(text)
b.close()
a = numpy.genfromtxt('test.txt',delimiter=',',names=True)
print "plain",a

a = numpy.genfromtxt('test.txt',delimiter=',',names=True,filling_values=0)
print "filling_values=0",a

a = numpy.genfromtxt('test.txt',delimiter=',',names=True,filling_values={1:0})
print "filling_values={1:0}",a

a = numpy.genfromtxt('test.txt',delimiter=',',names=True,filling_values={0:0})
print "filling_values={0:0}",a

a = numpy.genfromtxt('test.txt',delimiter=',',names=True,filling_values={None:0})
print "filling_values={None:0}",a 
```

结果：

```
plain [(1.0, 2.0, 3.0, 4.0) (5.0, nan, 7.0, 8.0)]
filling_values=0 [(1.0, 2.0, 3.0, 4.0) (5.0, nan, 7.0, 8.0)]
filling_values={1:0} [(1.0, 2.0, 3.0, 4.0) (5.0, 0.0, 7.0, 8.0)]
filling_values={0:0} [(1.0, 2.0, 3.0, 4.0) (5.0, nan, 7.0, 8.0)]

Traceback (most recent call last):
  File "C:\Users\tolivo.EE\Documents\active\eng\python\sizer\testGenfromtxt.py", line 20, in <module>
    a = numpy.genfromtxt('test.txt',delimiter=',',names=True,filling_values={None:0})
  File "C:\Users\tolivo.EE\AppData\Roaming\Python\Python27\site-packages\numpy\lib\npyio.py", line 1451, in genfromtxt
    filling_values[key] = val
TypeError: list indices must be integers, not NoneType 
```

从 NumPy 用户指南中，我希望`filling_values=0`并且`filling_values={None:0}`可以工作，但他们没有，并且分别抛出错误。当您指定正确的列 ( `filling_values={1:0}`) 时，它将起作用，但由于在用户选择之前我有大量未知数的列，我正在寻找自动设置填充值的方法，就像用户指南提示的那样。

I imagine I can probably count the columns in advance and create a dict to pass as the value to filling_values in the meantime, but is there a better way?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:31:07.030

It's not obvious from the documentation, but `filling_values="0"` works.

```
In [19]: !cat test.txt
a,b,c,d
1,2,3,4
5,,7,8
9,10,,12

In [20]: a = numpy.genfromtxt('test.txt', delimiter=',', names=True, filling_values="0")

In [21]: print a
[(1.0, 2.0, 3.0, 4.0) (5.0, 0.0, 7.0, 8.0) (9.0, 10.0, 0.0, 12.0)] 
```

# ruby-on-rails - 这个 Rails 模块到底做了什么，它是如何工作的？

> ID：15144357
> 
> 赞同：1
> 
> 时间：2013-02-28T19:48:55.897
> 
> 标签：ruby-on-rails, ruby

我对 Ruby 还很陌生，我看不到所有这些类和方法之间的联系。您能否解释一下每种方法的具体作用：

```
module Naming
# Returns an ActiveModel::Name object for module. It can be
# used to retrieve all kinds of naming-related information.
def model_name
  @_model_name ||= begin
    namespace = self.parents.detect do |n|
      n.respond_to?(:use_relative_model_naming?) && n.use_relativve_model_naming?
    end
    ActiveModel::Name.new(self, namespace)
  end
end

# Returns the plural class name of a record or class. Examples:
#
#   ActiveModel::Naming.plural(post)             # => "posts"
#   ActiveModel::Naming.plural(Highrise::Person) # => "highrise_people"
def self.plural(record_or_class)
  model_name_from_record_or_class(record_or_class).plural
end

# Returns the singular class name of a record or class. Examples:
#
#   ActiveModel::Naming.singular(post)             # => "post"
#   ActiveModel::Naming.singular(Highrise::Person) # => "highrise_person"
def self.singular(record_or_class)
  model_name_from_record_or_class(record_or_class).singular
end

# Identifies whether the class name of a record or class is uncountable. Examples:
#
#   ActiveModel::Naming.uncountable?(Sheep) # => true
#   ActiveModel::Naming.uncountable?(Post) => false
def self.uncountable?(record_or_class)
  plural(record_or_class) == singular(record_or_class)
end

# Returns string to use while generating route names. It differs for
# namespaced models regarding whether it's inside isolated engine.
#
# For isolated engine:
# ActiveModel::Naming.route_key(Blog::Post) #=> post
#
# For shared engine:
# ActiveModel::Naming.route_key(Blog::Post) #=> blog_post
def self.singular_route_key(record_or_class)
  model_name_from_record_or_class(record_or_class).singular_route_key
end

# Returns string to use while generating route names. It differs for
# namespaced models regarding whether it's inside isolated engine.
#
# For isolated engine:
# ActiveModel::Naming.route_key(Blog::Post) #=> posts
#
# For shared engine:
# ActiveModel::Naming.route_key(Blog::Post) #=> blog_posts
#
# The route key also considers if the noun is uncountable and, in
# such cases, automatically appends _index.
def self.route_key(record_or_class)
  model_name_from_record_or_class(record_or_class).route_key
end

# Returns string to use for params names. It differs for
# namespaced models regarding whether it's inside isolated engine.
#
# For isolated engine:
# ActiveModel::Naming.param_key(Blog::Post) #=> post
#
# For shared engine:
# ActiveModel::Naming.param_key(Blog::Post) #=> blog_post
def self.param_key(record_or_class)
  model_name_from_record_or_class(record_or_class).param_key
end

private
  def self.model_name_from_record_or_class(record_or_class)
    (record_or_class.is_a?(Class) ? record_or_class :     convert_to_model(record_or_class).class).model_name
  end

  def self.convert_to_model(object)
    object.respond_to?(:to_model) ? object.to_model : object
  end
end

end 
```

我知道每种方法都有评论，但我仍然无法理解基本的元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:08:52.140

该模块是 ActiveModel 的一部分，它有助于**确保命名约定**。

所有这一切的目标是提供一个标准接口，帮助从单个对象进行推断：

*   文件属于应用程序结构的位置（这是控制器背后的魔力`render`，例如从控制器名称推断出视图应该在哪里）
*   哪些标准 REST 路由应指向此资源
*   `form_for`params 散列中的什么键将为特定对象生成帮助器
*   等等...

很难再解释这个模块，因为它被依赖命名约定的独立逻辑位普遍使用。

# javascript - window.name 在 Google Chrome 中不持久

> ID：15144359
> 
> 赞同：5
> 
> 时间：2013-02-28T19:48:57.167
> 
> 标签：javascript, google-chrome

我在使用该`window.name`属性的 Google Chrome 中看到了一种奇怪的行为。

例如：

1.  打开一个标签并转到[http://google.com](http://google.com)。

2.  打开控制台，输入`window.name="hello"`.

3.  现在在*同一个*选项卡中，转到[http://chase.com](http://chase.com)。

4.  在控制台中，键入`window.name`。

我希望看到`"hello"`返回，但我看到的是`""`.

这是 Google Chrome 的已知问题吗？它在 FireFox 中对我有用。

有人对这种行为有任何见解吗？

谢谢！

* * *

更新：

如果我没有输入新的 URL，而是输入`window.location="http://chase.com"`，那么`window.name`仍然存在！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:55:37.737

`window`是每个文档的全局对象，而不是浏览器窗口。例如，在带有 iframe 的页面中，每个 iframe 都会有一个`window`。每次加载文档时，都会为上下文创建并填充一个新的全局对象。卸载文档时，全局对象及其所有数据都将被销毁。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-28T19:50:53.000

Chrome 可能会根据站点启动新进程。

我认为 Chrome 的功能完全可以接受。

你真的不应该依赖任何全局变量来持久化。我会考虑使用会话或本地存储。

# c - 等待信号

> ID：15144369
> 
> 赞同：1
> 
> 时间：2013-02-28T19:49:41.423
> 
> 标签：c, signals

我希望我的程序等待将是 SIGUSR1 的信号，但目前不起作用。

将捕获信号的类：

```
#include<signal.h>
#include<unistd.h>

int main(int argc, char *argv[]){

    int pid;
    pid=getpid();
    printf("PID: %d\n", pid);

    pause();

    void my_handler(int signum)
    {
        if (signum == SIGUSR1)
        {
            printf("Received SIGUSR1!\n");
        }
    }

    signal(SIGUSR1, my_handler);
} 
```

发出信号的程序：

```
#include<stdlib.h>
#include<signal.h>
#include<unistd.h>
#include<time.h>

int main(int argc, char *argv[]){

    int i;

    printf("Filename: %s, Receiver PID: %s\n", argv[1], argv[2]);

    FILE *fp;
    fp=fopen(argv[1], "w");

    kill(atol(argv[1]),SIGUSR1);

} 
```

`./receiver 1` 在找到要运行的接收器的 PID（例如 3375）之后，您将首先运行接收器`./signaler 1 3375`

暂停是我用来等待但它不起作用的功能，sigwaitinfo 或 sigsuspend 会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:10:33.710

我同意格式使检查变得困难，但看起来你在pause( )**之后调用了 signal()。**您需要将信号调用移动到 main 的顶部，或者至少在暂停之前。

# jpanel - jPanel中chartpanel中的Jfreechart不显示

> ID：15144370
> 
> 赞同：3
> 
> 时间：2013-02-28T19:49:48.103
> 
> 标签：jpanel, jfreechart, visible

我创建了 JFreeChart 并将其放入图表面板（如建议的那样）。我还将它添加到 jPanel。我正在使用 jFrame。但是运行程序后我的图表不可见。任何人都可以帮助我吗？

```
final JFreeChart chart = ChartFactory.createXYLineChart(
        "XY Series Demo",
        "iterácie", 
        "%", 
        data,
        PlotOrientation.VERTICAL,
        true,
        true,
        false
    );

    final ChartPanel chartPanel = new ChartPanel(chart);
    //chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
    chartPanel.setDomainZoomable(true);
    chartPanel.setVisible(true);
    jPanel1.add(chartPanel, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:58:49.567

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> [已解决] 我错过了这两个：
> 
> ```
> jPanel1.setLayout(new java.awt.BorderLayout());
> jPanel1.validate(); 
> ```

# jqgrid - jqGrid 问题：saveRow - 解释

> ID：15144378
> 
> 赞同：0
> 
> 时间：2013-02-28T19:50:20.700
> 
> 标签：jqgrid, save, row

拜托，有人可以解释一下 saveRow 如何将数据保存在数据库中吗？这怎么可能？我是否必须在 ajax 或类似的东西中做一些代码？

我已经阅读了文档，但我真的没有得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:04:40.817

jqGrid 将允许您执行 CRUD 操作。如果所有这些操作要针对数据库进行操作，那么它们会将信息发送回服务器，其中包含有关正在创建、更新、删除的记录的信息。然后，您的服务器端必须将其转换为将其转换为数据库的操作。

jqGrid 不会为你做所有这些，它只是一个前端。几乎可以肯定会有关于如何在您选择使用的任何技术堆栈上执行其中一些基本操作的教程。

# html - 过渡不适用于 FF

> ID：15144379
> 
> 赞同：0
> 
> 时间：2013-02-28T19:50:23.797
> 
> 标签：html, css, css-transitions, transition

我有以下简单的 HTML 和 CSS。它在 Chrome 中运行良好。但不是FF。我的意思是`transition`在FF上不起作用。我正在使用 FF 18。我在 Google 和 SO 上搜索了这个问题并找到了一些黑客。但它们都不适合我的问题。请问有什么想法吗？

HTML：

```
<div class="image-list cf">    
    <figure>
        <a href="javascript:return false;">
            <img src="image-src-1"/>
        </a>
        <span>
            <a href="javascript:return false;">File Name 1</a>
        </span>
        <span>
            10 Images
        </span>
    </figure>    
    <figure>
        <a href="javascript:return false;">
            <img src="image-src-1"/>
        </a>
        <span>
            <a href="javascript:return false;">File Name 1</a>
        </span>
        <span>
            10 Images
        </span>
    </figure>
    <-- and more -->
</div> 
```

CSS：

```
/* images list
**********************************************************/
.image-list {}
.image-list figure {
    float: right;
    width: 180px;
    border: 1px solid;
    border-color: #aaa;
    border-radius: 0;
    box-shadow: 
        1px 0 0 #fff, 
        0 1px 0 #fff, 
        -1px 0 0 #fff, 
        0 -1px 0 #fff,
        0 0 2px #000;
    margin-right: 29px;
    text-align: center;
    padding: 10px 0;
    background-color: #fff;
    -webkit-transition: all .3s ease 0s;
    -moz-transition: all .3s ease 0s;
    -o-transition: all .3s ease 0s;
    transition: all .3s ease 0s;
}
.image-list figure:hover{
    border-color: #666;
    box-shadow: 
        1px 0 0 #fff, 
        0 1px 0 #fff, 
        -1px 0 0 #fff, 
        0 -1px 0 #fff,
        0 0 10px #000;
}
[class="image-list"] figure:hover {
    border-color: #666;
    box-shadow: 
        1px 0 0 #fff, 
        0 1px 0 #fff, 
        -1px 0 0 #fff, 
        0 -1px 0 #fff,
        0 0 10px #000;
}
.image-list figure a {}
.image-list figure a img {}
.image-list figure span {
    display: block;
    padding: 5px 0;
    width: 160px;
    margin: 0 auto;
    overflow: hidden;
    height: 1em;
}
.image-list figure span a {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:36:41.870

可能是您使用的是不支持转换功能的旧版浏览器。请参阅下面的链接以获取页面末尾的过渡支持图表

[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

这是一些支持注释的代码

```
-webkit-transition: all .3s linear;    //  webkit browsers like chrome, safari support code
-moz-transition: all .3s linear;       //  mozilla support code
-o-transition: all .3s linear;         //  opera support code
transition: all .3s linear;            //  css3 code 
```

# xslt - 如何在 XSLT 1.0 中连接参数？

> ID：15144380
> 
> 赞同：0
> 
> 时间：2013-02-28T19:50:26.280
> 
> 标签：xslt

我正在使用作为变量传递的图像 src，代码如下：

```
 <xsl:param name="a" />

<img width="300" height="270" src="{a}" /> 
```

这没问题，但是我不能将图像放在根文件夹中，我需要将它们放在图像文件夹中，现在我花了很长时间尝试了很多事情，但是我该怎么做：

```
<img width="300" height="270" src="images/{a}" /> 
```

我尝试将“images/”存储为参数字符串，然后尝试在 {a} 前面连接它，但无论我尝试什么，我都无法让它工作。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:02:21.610

使用美元符号来引用您的变量。

**例子**

输入：

```
<a href="testImg.png"/> 
```

转换：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="a">
       <xsl:call-template name="renderImg">
            <xsl:with-param name="a" select="@href"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="renderImg"> 
       <xsl:param name="a" />
       <img width="300" height="270" src="images/{$a}" />
    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<img width="300" height="270" src="images/testImg.png" /> 
```

# javascript - Jquery next 没有正确迭代

> ID：15144383
> 
> 赞同：1
> 
> 时间：2013-02-28T19:50:42.650
> 
> 标签：javascript, jquery

我目前正在制作自己的幻灯片，一开始我已经在苦苦挣扎。目前我的对象中有两个函数：

```
init: function() {
    var self = this;
    if (this.element.find(".slide_item").size() == 1) {
        this.options.on = false;
    } else {
        setInterval(function() { self.next(); }, 5000);
    }
},

next: function() {
    var items = this.element.find(".slide_item");
    var current = this.element.find(".slide_item:visible");
    var next = current.next();

    current.slideUp("slow");
    if (next.is(":last-child")) {
        items.first().slideDown("slow");
    } else {
        next.slideDown("slow");
    }
} 
```

我的幻灯片容器 ( *.slideshow* ) 中有三个项目，但我的代码实际上只在第一个和第二个项目之间切换。第三，最后一项总是被通过。我不知道为什么，当我使用*console.log()*检查所有输出时，一切似乎都很好。我的错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T19:54:16.147

你的问题在这里：

```
if (next.is(":last-child")) {
    items.first().slideDown("slow"); 
```

这说明如果下一项是最后一项，则向下滑动第一项，有效地跳过最后一项。

相反，您想要做的是，如果下一个项目不存在，请向下滑动第一个项目。

```
if (next.length == 0) {
    items.first().slideDown("slow"); 
```

我更喜欢`next`用第一个更新 var。

```
var next = current.next();
if (next.length == 0) {
    next = items.first();
}

current.slideUp("slow");
next.slideDown("slow"); 
```

# jquery - 删除多个类以“重置”Div

> ID：15144386
> 
> 赞同：0
> 
> 时间：2013-02-28T19:50:50.207
> 
> 标签：jquery, css

**在下面我自己的答案中得到解决：**

> ***解释****：* `.removeClass()`不接受逗号来列出多个类。

* * *

我正在构建一个充满单元格的智能数据网格，这些单元格将识别（模糊）它们是否被更改，以及值是上升还是下降。

这是它的样子。当用户悬停已更改的框并告诉他们页面首次加载时的值是什么时，会出现灰色工具提示。

* * *

![在此处输入图像描述](../Images/4a114c883f4cd97b56ab42a561aec68f.png)

* * *

**问题：**当我降低单元格中的值，模糊，然后将其更改回原来的值时，单元格正确地删除了所有已更改的指示（没有红色/绿色边框，没有箭头，没有工具提示）。

但是，当我*提高*单元格中的值，模糊，然后将其更改回原来的值时，它并没有摆脱绿色边框。我检查了我的代码，但我不明白为什么它没有删除“up”类。

> **示例：**将左上角的单元格从 12,000 更改为 11,000。单击单元格。注意红色边框。现在将其改回 12,000。它现在应该重置为灰色。
> 
> 现在将值更改为 13,000。单击单元格。注意绿色边框。现在将其改回 12,000。当它应该重置为灰色时，它仍然是绿色的。

你们能给我一些第二双眼睛来找出我的问题所在吗？也许建议一种方法来浓缩我的“细胞重置”？

**相关 HTML（[此处提供完整代码](http://jsfiddle.net/JonMoore/Fgdec/8/)）：**

```
<tr>
    <td><input type="text" value="12000" /></td>
    <td><input type="text" value="1000" /></td>
    <td><input type="text" value="100000" /></td>
</tr> 
```

**相关 CSS（[此处提供完整代码](http://jsfiddle.net/JonMoore/Fgdec/8/)）：**

```
.up { border:1px solid #0F0 !important; }
.down { border:1px solid #F00 !important; }

.down-indicator {
    // some styles to create a downward triangle
}

.up-indicator {
    // some styles to create an upward triangle
} 
```

**相关的 jQuery ([完整的代码可用 这里](http://jsfiddle.net/JonMoore/Fgdec/8/)):**

```
$(function() {
    var initialValues = [];

    $('input').each(function(index) {
        initialValues[index] = $(this).val();
        $(this).data('id', index);
    });

    $("input").blur(function() {
        var $t = parseInt($(this).val(), 10);
        var $s = parseInt(initialValues[$(this).data('id')], 10);

        // value has changed
        if($t != $s) {
            $(this).parent().append("<div class='tooltip'>" + $s + "</div>");
        }

        // value is the same as initial value
        if($t == $s) {
            $(this).removeClass("up, down");
            $(this).parent().children(".tooltip").remove();
            $(this).parent().children(".up-indicator, .down-indicator").remove();
        }

        // value went up
        else if($t > $s) {
            $(this).removeClass("up, down");
            $(this).parent().children(".up-indicator, .down-indicator").remove();
            $(this).addClass("up");
            $(this).parent().append("<div class='up-indicator'></div>");
        }

        // value went down
        else if($t < $s) {
            $(this).removeClass("up, down");
            $(this).parent().children(".up-indicator, .down-indicator").remove();
            $(this).addClass("down");
            $(this).parent().append("<div class='down-indicator'></div>");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:56:43.460

我发现了我的问题。似乎`.removeClass()`不使用逗号来分隔多个类。

**旧代码：**

```
$(this).removeClass("up, down"); 
```

**固定代码：**

```
$(this).removeClass("up down"); 
```

[**工作小提琴**](http://jsfiddle.net/JonMoore/Fgdec/9/)

# bash - 如何解压缩文件夹中的所有 .gz 文件并将它们组合成一个新文件，而不为每个 .gz 文件生成未压缩文件

> ID：15144388
> 
> 赞同：2
> 
> 时间：2013-02-28T19:50:51.743
> 
> 标签：bash, shell, gzip

我想解压缩文件夹中的所有 .gz 文件并将它们组合成一个新文件。我可以在不为每个 .gz 文件生成未压缩文件的情况下执行此操作吗？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T20:00:46.697

你可以这样做 ：

```
zcat *.gz > newfile 
```

如果你想删除 *.gz 之后：

```
zcat *.gz > newfile && rm -f *.gz 
```

# playframework-2.0 - 如何在 Play2 中实现自定义资产处理？

> ID：15144390
> 
> 赞同：1
> 
> 时间：2013-02-28T19:50:53.477
> 
> 标签：playframework-2.0, authorization, assets

我在当前项目中使用 Play2 Java，并希望实现自定义资产处理。主要思想是从控制器动作中调用 Assets.at() 动作，但我不知道如何处理这些事情。我不能只调用（）它。所以我想实现某种资产授权，在用户角色之间分配资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:25:26.703

我认为您不需要为此特别考虑。只需编写一个控制器来实现您的安全方案（例如使用[动作组合](https://github.com/playframework/Play20/wiki/JavaActionsComposition)）并像调用普通资产控制器一样调用它。

# android - 如何实现带有搜索框的对话框？

> ID：15144392
> 
> 赞同：5
> 
> 时间：2013-02-28T19:51:11.473
> 
> 标签：android, search, android-alertdialog

我有一个带有列表的主要活动和一个接收关键字以在数据库中进行搜索的方法。

我想实现`AlertDialog`一个搜索框，当我通过此表单中的动作侦听器单击按钮时，该搜索框应出现在主活动上

```
OnClickListener searchListener = new OnClickListener() {

    public void onClick(View v) {
        // ...
    }
}; 
```

这个对话框应该有一个简单的`EditText`框和两个按钮（`Search`和`Cancel`），并且必须将所`String`选择的传递`EditText`给表单中的搜索方法：

```
public void searchWord(String keyword){
    // ....search in DB
    // ...updateListGUIWithNewValues()
} 
```

此方法在主活动中获取新的列表值，以便活动可以更新 GUI 列表。

我已经实现了搜索方法和主要活动，但我不知道实现这种对话框的正确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:03:23.633

这是我的警报对话框代码，其中包含编辑文本。我在按钮单击侦听器中调用它，因此它不是一个单独的方法。我上周在这个网站的某个地方找到了它，但我似乎找不到它，所以我可以引用它。

```
AlertDialog.Builder alert = new AlertDialog.Builder(context);
alert.setTitle("Manual Item Search");
alert.setMessage("Input Search Query");
// Set an EditText view to get user input 
final EditText input = new EditText(context);
alert.setView(input);
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int whichButton) {
    String result = input.getText().toString();
        //do what you want with your result
        }
    });
alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
         // Canceled.
        }
    });
alert.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:10:26.650

嗨，试试本教程以使用警报对话框创建搜索对话框**[单击此处](http://www.mkyong.com/android/android-prompt-user-input-dialog-example/)**

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);

  alert.setTitle("Search Box");
  alert.setMessage("Message");

 // Set an EditText view to get user input 
 final EditText input = new EditText(this);
 alert.setView(input);

 alert.setPositiveButton("Search", new DialogInterface.OnClickListener() {
 public void onClick(DialogInterface dialog, int whichButton) {
  String value = input.getText();
 // Do something with value!
   }
  });
  alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int whichButton) {
  // Canceled.
  }
 });

  alert.show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T20:17:46.353

### 对话框 XML

`layout`在您的文件夹中构建此 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="text" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <Button
            android:id="@+id/search"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Search" />

        <Button
            android:id="@+id/cancel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>

</LinearLayout> 
```

### 对话类

这个类来处理对话框

```
class dialog extends Dialog {

    private StackQuestionActivity activity;
    private Button search, cancel;
    private EditText text;
    private dialog thisDialog;

    public dialog(StackQuestionActivity context) {
        super(context);
        // TODO Auto-generated constructor stub
        this.activity = context;
        this.thisDialog = this;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialoge);
        getWindow().setLayout(android.view.ViewGroup.LayoutParams.FILL_PARENT,
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
        initalize();
    }

    private void initalize() {
        // TODO Auto-generated method stub
        text = (EditText) findViewById(R.id.text);
        search = (Button) findViewById(R.id.search);
        cancel = (Button) findViewById(R.id.cancel);
        cancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                thisDialog.cancel();
            }
        });
        search.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String textString = text.getText().toString();
                activity.searchWord(textString);
            }
        });
    }

} 
```

### 你的活动

这是您的主要活动，按下按钮时调用对话框类：

```
package com.example.question;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class StackQuestionActivity extends Activity {
    /** Called when the activity is first created. */
    private Button press;
    private StackQuestionActivity activity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.activity = this;
        setContentView(R.layout.main);
        press = (Button) findViewById(R.id.button);
        press.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog yourDialog = new dialog(activity);
                yourDialog.show();
            }
        });
    }

    public void searchWord(String textString) {
        // TODO Auto-generated method stub

    }
} 
```

这是结果 ![查看](../Images/835eb397d9cbe46db5a70fad76de74c5.png)

# mysql - 使用 SQL 比较两个表中的标识符计数

> ID：15144393
> 
> 赞同：9
> 
> 时间：2013-02-28T19:51:11.520
> 
> 标签：mysql, sql, subquery, correlated-subquery

我正在尝试构建一个比较具有相同结构的两个表的查询

```
Table 1:
ID | Data 

Table 2:
ID | Data 
```

ID 是一个非唯一键（数据是可重复的，但 ID|数据组合是唯一的）。我需要一个 ID 列表，其中这些 ID 的 COUNT 在表 2 中大于在表 1 中。

例如，如果

```
Table 1
a | data
a | data1    
b | data2

Table 2
a | data
a | data1
b | data2
b | data3 
```

将生成输出“b”

这感觉应该很容易，但我现在的头很乱。如果这会影响选项，我会在 mysql 中执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T19:55:45.870

要获取每个键的计数，

```
select count(*) as count, ID from Table1 group by ID 
```

因此，将其用作 from 子句中的子查询，并连接表。

```
select tt1.ID
from (select count(*) as count, ID from Table1 group by ID) tt1
  inner join (select count(*) as count, ID from Table2 group by ID) tt2
     on tt1.ID = tt2.ID
where tt1.count < tt2.count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:33:36.753

在 MySQL 中测试。

```
select case when count(d1.id) > count(d2.id) then d1.id end as 'id'  from 
(select id from t1) d1,
(select id from t2) d2
group by d1.id 
```

# ios - 在调用 transitionWithView 之前设置上一个图像

> ID：15144395
> 
> 赞同：1
> 
> 时间：2013-02-28T19:51:14.417
> 
> 标签：ios, animation, uiview

我有一个占位符`UIImageView`（从 .xib 加载），我想加载一张卡片背面的图片，然后翻转到正面图片。

```
[cardView setImage:backCardImage];
[UIView transitionWithView:cardView 
                  duration:1        
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{         
                    [cardView setImage:frontCardImage];
                }
                completion:NULL]; 
```

问题是它以 not 开头的初始图像`backCardImage`，而是使用我的 .xib 文件中的无图像（即空白图像）。如果我在 .xib 中加载了 backCardImage 并且只调用了`transitionWithView`，我相信它会正常工作，但我真的很想在同一个方法中进行两个调用（`setImage`和）。`transitionWithView`有没有办法做到这一点？我需要在两者之间打电话吗？

我尝试使用`UIViewAnimationOptionBeginFromCurrentState`，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:15:00.077

cardView 不会绘制，即使你放入 setNeedsDisplay，直到下一个绘制周期，所以你需要先在另一个方法中设置该图像，或者将动画移动到另一个方法，并使用 performSelector:withObject:afterDelay 调用它： . 即使延迟为 0 也可以。我不认为动画看起来很好，因为在翻转之前你只能看到后面的图像（我认为 0.1 或 0.2 秒的延迟看起来更好）。为什么不早点设置背面图像？在这种情况下，占位符图像的目的是什么？

# c++ - 在函数 C ++ 之间传递结构

> ID：15144396
> 
> 赞同：1
> 
> 时间：2013-02-28T19:51:20.047
> 
> 标签：c++, function, struct

我已经搜索过，但无法得到我想要的东西......

我在做一个小游戏。我得到了这个`struct`包含播放器详细信息的信息。

```
struct Player
{
    string name;
    int level;
    int exp;
    int hp; // life
    int mp; // mana
    int shield;
}; 
```

当在菜单中，用户选择开始一个新游戏时，它会进入这个功能：

```
 int StartNewPlayer(string name)
    {
        Player player;

        player.name = name;
        player.level = 1;
        player.exp = 0;
        player.hp = 20;
        player.mp = 5;
        player.shield = 0;

        *pass/return the struct here*
    } 
```

然后我有一个打印游戏板的函数，以及我应该在哪里使用新玩家结构中的数据，例如：

```
void game_board ()
{
    cout << "Hello!" << player.name;

    (...)
} 
```

最后，在`main`我的某个地方：

```
int main ()
{
    StartNewPlayer(new_game());
    game_board();
} 
```

调用上面的所有函数。

但我想不通...我尝试了引用，没有运气的指针..我需要一些帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:53:03.767

这个怎么样？

```
Player StartNewPlayer(string name)
{
    Player player;

    player.name = name;
    player.level = 1;
    player.exp = 0;
    player.hp = 20;
    player.mp = 5;
    player.shield = 0;

    return player;
}

void game_board(Player player)
{
    cout << "Hello!" << player.name;

    (...)
}

int main ()
{
    Player player = StartNewPlayer(new_game());
    game_board(player);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:56:23.557

**不要使用传递值创建具有复杂数据类型的数据的额外副本**

改用指针来传递可以在函数中修改的变量的地址。更改也将反映在调用者的函数中。

```
void StartNewPlayer(string name, Player *player)
{
    player->name = name;
    player->level = 1;
    player->exp = 0;
    player->hp = 20;
    player->mp = 5;
    player->shield = 0;
}

void game_board(Player* player)
{
    cout << "Hello!" << player->name;

    (...)
}

int main ()
{
    Player player;
    StartNewPlayer(new_game(), &player);
    game_board(&player);
} 
```

**使用传递引用的替代方法：**

如果您是引用的粉丝，（这只是一个巧妙的编译器技巧，它再次在内部使用指针）：

```
void StartNewPlayer(string name, Player& player)
{
    player.name = name;
    player.level = 1;
    player.exp = 0;
    player.hp = 20;
    player.mp = 5;
    player.shield = 0;
}

void game_board(Player& player)
{
    cout << "Hello!" << player.name;

    (...)
}

int main ()
{
    Player player;
    StartNewPlayer(new_game(), player);
    game_board(player);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T20:05:13.793

我建议返回一个指向 Player 结构的指针。如果您像现在一样返回“引用”，它将调用 Player 的复制构造函数，这可能会导致进一步的复杂化。

通常，在 StartNewPlayer(...) 结束时，您在其中声明的 Player 将不复存在，因为对象范围将结束，因此当您返回它时，c++ 编译器会知道您想要保持对象处于活动状态并将创建一份给你的，隐形的。如果你返回一个指向它的指针，你实际上是在返回你在函数中分配的对象。

假设您的 Player 结构中有指针，例如

```
struct Player
{
  int level;
  char* name; //lets assume you did it like that
} 
```

当您返回播放器时，将复制 int，但不会复制 char*。int 很容易处理，而 char* 需要各种棘手的函数，比如`strlen`and `strncpy`。您的 Player 结构越复杂，使用默认复制构造函数将面临的问题就越多。

另一种解决方案是自己为 Player 结构声明一个复制构造函数（实际上，您可以使用类，因为它们在 c++ 中大部分是可互换的）。

```
Player(const Player& p)
{
    name = p.name;
    level = p.level;
    // and so forth
} 
```

所以我会用

```
Player* StartNewPlayer(std::string name)
{
    Player* player = new Player();
    player->name = name;
    player->level = 1;
    // snip 
    return player;
} 
```

在你的程序结束时，一定要`delete player`否则你会有内存泄漏

# bash - 如何触发远程bash脚本

> ID：15144401
> 
> 赞同：0
> 
> 时间：2013-02-28T19:51:29.227
> 
> 标签：bash, ssh, scp

不确定这个问题的最佳标题...我在服务器 A 上有一个 bash 脚本。

**工作 Ubuntu 桌面：**

```
ssh -l USER host

*password*

coolscript var1 var2 var3 
```

**服务器 A（酷脚本）：**

```
command1 $1

command2 $2 
```

* * *

现在，我需要`coolscript2`在传递了第三个参数的情况下在服务器 b 上触发。就像是

```
run_remote_command_on_server_b coolscript2 $3 
```

**服务器 B (coolscript2)**

```
command3 $3 
```

* * *

但是，我需要在不必为第二台服务器输入用户/密码的情况下发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:55:34.803

如果我正确理解您的问题，您需要设置 SSH 密钥。

Arch Linux Wiki 有一篇关于使用 SSH 密钥的[精彩文章。](https://wiki.archlinux.org/index.php/SSH_Keys)你也可以[在这里阅读更短的 HOWTO](http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/)。

基本上，当您通过 SSH 从主机 A 登录到主机 B 时，您可以通过生成私钥-公钥对来省略密码验证。私钥存储在主机 A 上，公钥复制到主机 B。

请注意，可以选择使用密码保护 SSH 私钥 - 在您的情况下，您不会这样做。

因此，只需在桌面上生成密钥：

```
$ ssh-keygen 
```

然后将它们复制到服务器 A 和服务器 B：

```
$ ssh-copy-id -i ~/.ssh/id_rsa.pub HOST_A
$ ssh-copy-id -i ~/.ssh/id_rsa.pub HOST_B 
```

# java - 如何使用正则表达式找到一组单词（单词的边界）

> ID：15144402
> 
> 赞同：-2
> 
> 时间：2013-02-28T19:51:32.687
> 
> 标签：java, regex

我已将文本文件的内容存储在一个名为的字符串`Str`中，如下所示：

```
Str = "Cat is an animal\n" +
      "Cat is small\n" +
      "Cat is a pet\n"; 
```

我写了这段代码来搜索这个词`Cat`：

```
Pattern pattern = Pattern.compile("(\\bCat\\b)");
Matcher match = pattern.matcher(Str);

while (match.find()) {
    String tempStr = "I found " + match.group() + "\n";
} 
```

以上产生了这个输出：

```
I found Cat
I found Cat 
I found Cat 
```

这是我的问题。如何使用关键字 Cat 找到整个句子，以便输出为：

```
I found Cat is an animal
I found Cat is small
I found Cat is a pet 
```

什么是正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:03:50.400

你在这里并不需要单词边界，你可以让它变得简单：

```
"(Cat.*?)/n" 
```

然后从`match.group(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:54:31.643

假设“句子”（这是一个非常广泛的术语，可以用不同的方式定义）意味着直到下一个句号（`.`），您可以尝试使用

```
Pattern pattern = Pattern.compile("(\\bCat\\b.*\\.)"); 
```

`.*` 0个或多个任意字符

`\\.`期间字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:09:21.530

你想使用单词边界来避免匹配单词`Catwoman`吗？如果是这样，你几乎已经在那里了。

```
Pattern pattern = Pattern.compile(".*\\bCat\\b[^.]*\\."); 
Matcher match = pattern.matcher("a super Cat too cute to be true.\n" + 
                                "and an other Cat.\n" +
                                "but not thatCat nor Catwoman no no no."); 
```

会找到前两行，但不会找到第三行。

# node.js - Windows Azure 网站覆盖了我的 node.js 应用程序中的 404 和 500 错误页面

> ID：15144405
> 
> 赞同：33
> 
> 时间：2013-02-28T19:51:48.910
> 
> 标签：node.js, azure, web-config, iisnode

我正在使用 Windows Azure 网站来托管 node.js 应用程序。到目前为止，除了我的自定义错误之外，一切都很好。在我的节点应用程序中，我有一个错误处理程序，可以在我的本地机器上呈现自定义 404 和自定义 500 错误页面。但是，一旦我发布到 azure，当我将 statusCode 设置为 200 以外的任何值时，它都会覆盖响应。

如果我没有将 500 或 404 statusCode 传递给响应，则不会发生这种情况，但我确实希望将状态代码发送到浏览器。在本地我得到我的自定义错误页面就好了：

![](../Images/e826785e9b405cdfe123e7ebee37d0c9.png)

但是，在 azure 网站上，它只返回一行文本：

> 由于发生内部服务器错误，无法显示该页面。

我尝试创建自己的 web.config 以覆盖禁用自定义错误的默认配置，但这似乎没有任何效果。这是我的 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <customErrors mode="off" />
    </system.web>
    <system.webServer>
        <handlers>
            <add name="iisnode" path="app.js" verb="*" modules="iisnode"/>
        </handlers>
        <rewrite>
            <rules>
                <rule name="StaticContent">
                    <action type="Rewrite" url="public{REQUEST_URI}"/>
                </rule>
                <rule name="DynamicContent">
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="True"/>
                    </conditions>
                    <action type="Rewrite" url="app.js"/>
                </rule>
            </rules>
        </rewrite>
        <iisnode
            debuggingEnabled="true"
            devErrorsEnabled="true"
            debuggerPathSegment="debug"
            nodeProcessCommandLine="&quot;%programfiles(x86)%\nodejs\node.exe&quot;"
            logDirectory="..\..\LogFiles\nodejs"
            watchedFiles="*.js;iisnode.yml;node_modules\*;views\*.jade;views\*.ejb;routes\*.js" />
    </system.webServer>
</configuration> 
```

我不确定`iisnode`（将请求路由到 node.js 的 iis 扩展）是否负责覆盖我的错误页面，或者 iis 本身是否负责。有什么建议么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-28T20:56:22.907

好吧，没关系，我发现了问题。`<system.webServer>`如果其他人遇到同样的问题，只需在 web.config下添加以下内容：

```
<httpErrors existingResponse="PassThrough" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T14:12:58.427

在 Windows azure 中托管的 MVC 项目也有类似的问题。在 IIS 下托管的本地计算机上工作正常，但在实时计算机上我收到以下错误“您要查找的资源已被删除、更改名称或暂时不可用。”

将此添加到 system.webServer 下的 Web 配置中节省了我的时间

我的 web.config 看起来像这样

```
<system.web>
   ***
    <customErrors mode="RemoteOnly" defaultRedirect="~/Error/PageNotFound">
      <error statusCode="404" redirect="~/Error/PageNotFound" />
      <error statusCode="500" redirect="~/Error/ServerError"/>
    </customErrors>
  </system.web>
***
<system.webServer>
    <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

# c# - 带有 EF 函数导入的数据集返回类型

> ID：15144406
> 
> 赞同：0
> 
> 时间：2013-02-28T19:51:53.963
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-5

我正在更新旧代码（不是我编写的）以使用实体框架和 LINQ。目前它使用 Codesmith。但是，有几个函数调用实际上只是存储过程的包装器。

我尝试使用函数导入，但问题是存储过程根据它接收的参数从不同的表返回不同的数据集。由于我不能指望来自特定表或视图的返回值，我希望我可以让它返回一个通用数据集。这就是目前 Codesmith 实现的工作方式，但我们正试图完全摆脱项目中的任何 Codesmith。当你不确定你会得到什么时，有没有办法有一个更通用的返回类型？

# java - Java不接受文件作为输入

> ID：15144408
> 
> 赞同：0
> 
> 时间：2013-02-28T19:52:01.720
> 
> 标签：java, arrays, input, file-io

我正在尝试读入一个整数文件，该文件将被排序然后输出到另一个文件中。它可以做任何事情，除了在终端中获取输入文件。我不知道为什么，我已经包含了整个代码，而注释部分是似乎不起作用的部分（因为当我将数组硬编码到代码中时它工作正常）。提前致谢。

```
class Quicksort {
    public void qSort(int[] a, int p, int r) {
        if (p < r) {
            int q = Partition(a, p, r);
            qSort(a, p, q - 1);
            qSort(a, q + 1, r);
        }
    }

    private static int Partition(int[] A, int p, int r) {
        int x = A[p];
        System.out.println(x + " ");
        int i = p;
        int j = r;
        int temp = 0;

        while (true) {
            while (A[j] > x) {
                j--;
            }

            while (A[i] < x) {
                i++;
            }

            if (i < j) {
                temp = A[j];
                A[j] = A[i];
                A[i] = temp;
            } else {
                return j;
            }
        }

    }
}

public class QuickSortTest {
    public static void main(String[] args) throws IOException {
        long time1 = System.nanoTime();
        Quicksort qsort = new Quicksort();

        //          ArrayList<Integer> dataReadIn = new ArrayList();
        //          FileReader fileToBeRead = new FileReader("test.txt");
        //          Scanner src = new Scanner(fileToBeRead);
        //          src.useDelimiter("[,\\s*]");
        //          int p = 0;
        //               while (src.hasNext()) 
        //               {
        //                   if (src.hasNext()) 
        //                   {
        //                       dataReadIn.add(src.nextInt());
        //                       System.out.println(p);
        //                       p++;
        //                     } 
        //                     else {
        //                         break;
        //                     }
        //                 }
        //           
        //      int[] array = new int[dataReadIn.size()];
        //     for(int a = 0; a < array.length; a++)
        //     {
        //     array[a] = dataReadIn.get(a);
        //     }

        int[] array = { 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,
                79, 80, 81, 82, 83, 26, 28 };
        int length = array.length;
        System.out.println(length);
        System.out.println("Pivot Element: ");
        qsort.qSort(array, 0, length - 1);

        PrintWriter out = new PrintWriter(new FileWriter("OutputArray"));
        for (int i = 0; i < array.length; i++) {
            out.println(array[i] + " ");
        }

        out.close();
        long time2 = System.nanoTime();
        long time = (time2 - time1) / 1000;
        System.out.println("Total time: " + time + "ms");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:01:43.337

根本原因是代码找不到您的文件。

您的问题有两种解决方案：

1.  实例化 FileReader 时传入文件的绝对路径
2.  确保文件在类路径中并使用 getClass().getResourceAsStream 并将其传递给实例化 Scanner（您不需要 FileReader 类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:03:50.370

我很确定在正则表达式中**`*`不起作用`[]`**（“不起作用”是指它被视为实际字符，而不是 1 个或多个）（假设您的意思是 1 个或多个空白字符）。你可以放在`*`外面：（匹配一个或多个空格字符或逗号）

```
src.useDelimiter("[,\\s]+"); 
```

或执行以下操作：（匹配逗号或一个或多个空格字符）

```
src.useDelimiter("(,|\\s+)"); 
```

我不完全确定上述任何一种方法是否真的有效，使用起来可能更简单：（一个或多个非数字字符）

```
src.useDelimiter("[^0-9]+"); 
```

请注意，我将 更改`*`为 a `+`，否则扫描仪将匹配长度为 0 的字符串，并且可能会逐位返回而不是整数。

**此外，您的 while 循环有些过于复杂。这会更简单：**

```
int p = 0;
while (src.hasNext()) 
{
  dataReadIn.add(src.nextInt());
  System.out.println(p++);
} 
```

# .htaccess - 为什么我的 mod 重写规则不起作用？

> ID：15144417
> 
> 赞同：2
> 
> 时间：2013-02-28T19:52:23.030
> 
> 标签：.htaccess, mod-rewrite

我正在尝试美化一个 url 以摆脱丑陋的东西，例如：

```
www.domain.com/lookup.php?firstname=jack&middlename=ron&lastname=paul 
```

到

```
www.domain.com/n/jack/ron/paul 
```

我在服务器上进行了一些其他的重写，但是这个似乎不喜欢我，因为我得到了 404。这是我正在尝试的：

```
RewriteRule ^/n/(.*)/(.*)/(.*)$ lookup.php?firstname=$1&middlename=$2&lastname=$3 
```

我错过了什么？为什么那行不通？

像这样更简单的东西可以正常工作：

```
RewriteRule ^article/(.*)$ articles.php?article_id=$1 
```

还需要做些什么来做更复杂的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:07:21.603

这不起作用，因为您在 htaccess 文件中有规则。当 URI 被 htaccess 文件中的重写规则处理时，前导斜杠（或“前缀”）总是被剥离。这意味着：

```
# here-------v
RewriteRule ^/n/(.*)/(.*)/(.*)$ lookup.php?firstname=$1&middlename=$2&lastname=$3 
```

模式中的前导斜杠导致它永远不会匹配，因为 htaccess 文件中的所有 URI 都已将其剥离。htaccess 文件中的重写规则本质上类似于`<Directory>`容器中的规则。尝试摆脱那个斜线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:02:01.870

我必须查看更多您的 httpd 配置，但这里有一些注意事项：

1.  您的规则末尾似乎没有 [L,R] 或 [L,R=301] 或 [L,R=302] （如果这是我怀疑的片段中的最后一条规则，则为 L是）。
2.  您的 .* 正则表达式可能过于贪婪——不确定它们是否会像您希望的那样匹配。

# javascript - 获取链接以保持活跃

> ID：15144425
> 
> 赞同：0
> 
> 时间：2013-02-28T19:52:44.463
> 
> 标签：javascript, jquery, css, hyperlink, highlight

我有 4 个选项，当单击时，单击的选项变为焦点并且其背景颜色/文本颜色发生变化，而所有其他选项都恢复为正常状态。我有一些代码可以更改字体颜色，但我不知道如何更改 div 颜色。我还试图用 CSS 和这段代码弄清楚如何在页面加载时默认突出显示其中一个选项。

Jquery-最后一行“（$（“a”）”是更改字体颜色的代码行；它上面的代码与我在页面上的过滤系统有关。

```
$(function () {
         var $panels = $( '#image-wrapper .panel' );

        $( '#category > div > a' ).on( 'click', function (event) {
            event.preventDefault();

            var categoryToShow = $( this ).data( 'filter' );
            $panels.addClass( 'active' ).filter( '.' + categoryToShow ).removeClass( 'active' );
            $("a").addClass("active-color").not(this).removeClass("active-color");
            /*$("#category .current-div").addClass("active-bg").not(this).removeClass("active-bg");*/
        } );
    }); 
```

HTML

```
<div id="category">
            <div class="all-div current-div">
                <a href="#" data-filter="all"><h2>ALL</h2></a>
            </div>
            <div class="ed-div current-div">
                <a href="#" data-filter="ed"><h2>EDITORIAL</h2></a>
            </div>
            <div class="pr-div current-div">
                <a href="#" data-filter="pr"><h2>PR</h2></a>
            </div>
            <div class="cr-div current-div">
                <a href="#" data-filter="cr"><h2>CREATIVE</h2></a>
            </div>
        </div> 
```

CSS

```
#content, 
#category {
    overflow: hidden;
}

#category div {
    float: left;
    margin: 40px 0 0 0;
    height: 100px;
    width: 240px;
    background-color: #F5F5F5;
}

#category .all-div {
    background-color: #000000;
}
#category .all-div a {
    color: #ffffff;   
}

.active-color {
    color: #000000;
    background-color: green;
}
.active-bg {
    background-color: green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:08:21.450

好吧，.on 在您的选择器上不起作用，所以我将其更改为 .live 并将您的背景选择器更改为 .current-div ，因为您的 a 标签需要 display: block 以具有可见的背景。

检查这个：

[http://jsfiddle.net/A3n7S/15/](http://jsfiddle.net/A3n7S/15/)

```
$(function () {

     var $panels = $( '#image-wrapper .panel' );

     $(".current-div").not('.all-div').first().addClass("active-color")
     $( '#category > div > a' ).live( 'click', function (event) {
        event.preventDefault();  
        var categoryToShow = $( this ).data( 'filter' );
        $panels.addClass( 'active' ).filter( '.' + categoryToShow ).removeClass( 'active' );
        $(".current-div").not('.all-div').removeClass("active-color");
        $(this).parent().addClass("active-color");

      /*$("#category .current-div").addClass("active-bg").not(this).removeClass("active-bg");*/
    } );
}); 
```

替换：

```
.active-color {
   color: #000000;
   background-color: green;
} 
```

和：

```
 #category .active-color {
   color: #000000;
   background-color: green;
 } 
```

# r - R 编程我需要帮助查找包含 2 列的列表的总和

> ID：15144436
> 
> 赞同：6
> 
> 时间：2013-02-28T19:53:19.573
> 
> 标签：r, sum

我需要你帮忙：

我有一个清单：

```
list(c(0,1), c(1,1), c(3,2)) 
```

我怎样才能得到总和：

```
(0-1)+(1-1)+(3-2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:20:14.727

不是 的忠实粉丝`Reduce`，`do.call`通常更快。在这种情况下，`unlist`解决方案似乎有一点优势：

***编辑：*** @ds440 获胜！

```
 expr    min      lq median      uq     max
1     do.call(sum, lapply(List, function(z) -diff(z))) 63.132 67.7520 70.061 72.7560 291.406
2                                             ds(List)  6.930 10.5875 11.935 12.7040  51.584
3 Reduce("+", lapply(List, function(x) -sum(diff(x)))) 78.530 81.6100 83.727 87.1915 855.355
4                             sum(-sapply(List, diff)) 88.155 91.4260 94.121 97.2005 955.442
5                     sum(-unlist(lapply(List, diff))) 57.358 60.4375 61.785 63.5170 145.126 
```

`ds`@ds440 的方法在哪里包装在一个函数中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T22:25:24.703

这可能不是计算它的最快方法，而且它肯定会使用更多资源，但这里有一个完全不同的看法：

```
> mylist = list(c(0,1), c(1,1), c(3,2))

> a = matrix(unlist(mylist), ncol=2, byrow=T)
> sum(a[,1]-a[,2]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T19:55:22.923

试试这个

```
# Sum of the first differences of your list
> (Sumlist <- lapply(List, function(x) -sum(diff(x))))
[[1]]
[1] -1    # this is (0-1)

[[2]]
[1] 0    # this is (1-1)

[[3]]
[1] 1   # this is (3-2)

# Total sum of your list
> Reduce('+', Sumlist)   # this is (0-1)+(1-1)+(3-2)
[1] 0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T20:01:51.233

`sapply`如果该模式（取第一个减去第二个元素的差异）是一致的，那么只需在对or的调用中编写一个匿名函数`lapply`。

```
mylist <- list(c(0,1), c(1,1), c(3,2))
sapply(mylist, FUN = function(x) {x[1] - x[2]}) ## takes differences
sum(sapply(mylist, FUN = function(x) {x[1] - x[2]})) ## put it all together 
```

这也可以通过该`diff`功能实现（如@AnandaMahto 和@Jilber 使用的那样）。`diff(0, 1)`给出 2nd 减去 1st，所以我们需要使用`-diff`1st 减去 2nd。

```
sum(-sapply(mylist, FUN = diff)) 
```

# c - 对列表的原子操作

> ID：15144440
> 
> 赞同：3
> 
> 时间：2013-02-28T19:53:34.913
> 
> 标签：c, concurrency, atomic, test-and-set

假设我有一个列表，我想使用一个`test_and_set`操作，其参数是计算某个指针地址`l->a.next->next`。我认为，这不会是原子的，而且`test_and_set`将毫无用处。有没有办法以原子方式计算该指针值，以便 TAS 以原子方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:26:27.843

您可能是指**[CAS](https://en.wikipedia.org/wiki/Compare-and-swap)**（更有用）。

一般来说：是的，它通常用于实现事务性或无等待数据结构，

Buf 首先要做的事情：让我们将**地址计算**与地址上的原子操作分开，您首先获得应该交换某些东西的特定地址，CAS 不在乎您是如何到达那里的。

具体来说，您应该首先让每个线程在列表中导航，直到找到要替换下一个指针的位置，然后他们可以使用 CAS 尝试重复此操作。线程是否必须重新遍历列表以重试取决于您的场景。

**棘手**的部分实际上在代码中的不同位置：*释放*（或重用）列表节点的位置。一般来说，您必须假设您无法重复使用或释放​​与您的列表断开连接的节点*链*。在实践中，您可以使用一些启发式方法，但这取决于您的用例。

# opencv - OpenCV imshow() 窗口何时被销毁？(C++)

> ID：15144442
> 
> 赞同：6
> 
> 时间：2013-02-28T19:53:37.160
> 
> 标签：opencv

有人可以帮助我处理使用 imshow() 函数创建的窗口的行为吗？我正在替换对旧 cvNamedWindow() 的调用，这需要在您完成后显式销毁和清理一个窗口。另一方面，imshow 似乎不需要清理并在用户按键后关闭窗口。我对此有任何控制权吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:48:29.677

您可以在 Opencv 2.x 中使用 namedWindow

请参阅此链接：[namedWindow](http://opencv.willowgarage.com/documentation/cpp/highgui_user_interface.html?highlight=namedwindow#namedWindow)

要销毁窗口，您可以使用`destroyWindow("windowname");`

# java - 如何将参数发送到启动的应用程序java

> ID：15144443
> 
> 赞同：-1
> 
> 时间：2013-02-28T19:53:37.313
> 
> 标签：java, jakarta-ee

我正在尝试开发简单的独立 java 应用程序。我正在使用码头。

启动嵌入式服务器：

```
String WEBAPPDIR = "web/";
Server server = new Server(8080);
String CONTEXTPATH = "/";
Server.setHandler(new WebAppContext(WEBAPPDIR, CONTEXTPATH));
server.start(); 
```

**我如何从外部环境（例如，bash）向此时启动的这个应用程序放置/发送参数**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:56:13.583

```
public class Echo {
  public static void main (String[] args) {
    for (String s: args) {
        System.out.println(s);
    }
  }
} 
```

您可以将参数传递给您的主函数。如果您从自己的应用程序启动码头，您将在启动服务器之前访问 args。

```
public class SimplestServer
{
  public static void main(String[] args) throws Exception
  {
    Server server = new Server(8080);
    server.start();
    server.join();
  }
} 
```

# windows-phone - 我应该选择哪些代码来合法退出 Windows Phone 应用程序？

> ID：15144446
> 
> 赞同：1
> 
> 时间：2013-02-28T19:54:01.913
> 
> 标签：windows-phone

我在 Windows Phone Marketplace 中有 7 个应用程序，但我遇到了问题。我的仪表板向我显示了有关退出应用程序的 QuitException（我从 stackoverflow 中找到）的崩溃报告。哪一项是申请的合法退出？请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:57:56.923

覆盖 OnBackKeyPress

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    base.OnBackKeyPress(e);
    e.Cancel = true;
} 
```

# php - 在 MySQL 中选择多个表会阻止我使用 <= 表达式

> ID：15144457
> 
> 赞同：0
> 
> 时间：2013-02-28T19:54:32.527
> 
> 标签：php, mysql, pdo

我正在使用这样的`SELECT`查询：

```
SELECT knowledge.*, 
       sortflagitems.* 
FROM   knowledge, 
       sortflagitems 
WHERE  sortflagitems.flagid = :FlagID 
       AND knowledge.id = sortflagitems.kid 
       AND sortflagitems.cid = :CID 
       AND knowledge.archived = :Nothing 
       AND sortflagitems.flagdate <= :Now 
ORDER  BY sortflagitems.sortorder 
```

这会产生这个错误：

```
 Invalid parameter number: number of bound variables does not match number of tokens 
```

但是，如果我将`SELECT`查询更改为：

```
SELECT knowledge.*, 
       sortflagitems.* 
FROM   knowledge, 
       sortflagitems 
WHERE  sortflagitems.flagid = :FlagID 
       AND knowledge.id = sortflagitems.kid 
       AND sortflagitems.cid = :CID 
       AND knowledge.archived = :Nothing 
       AND sortflagitems.flagdate = :Now 
ORDER  BY sortflagitems.sortorder 
```

这不会产生任何错误

请注意，此行`SortFlagItems.FlagDate=:Now`已从`SortFlagItems.FlagDate<=:Now`

我唯一的理论是，由于某种原因，当您选择多个表时，您不能使用`<=`运算符（请注意，使用`<`运算符会产生相同的错误）？想不出别的了。。

* * *

这是完整的 PHP 代码：

```
$DBParams = array('FlagID'=>$_GET['flag'], 'CID'=>$row['CatID'], 'Nothing'=>0, 'Now'=>strtotime('now'));
$results = $Db->rquery('
                    SELECT Knowledge.*, SortFlagItems.*
            FROM Knowledge, SortFlagItems
            WHERE SortFlagItems.FlagID=:FlagID
            AND Knowledge.id = SortFlagItems.KID
            AND SortFlagItems.CID=:CID
            AND Knowledge.Archived=:Nothing
            AND SortFlagItems.FlagDate<=:Now
            ORDER BY SortFlagItems.SortOrder', $DBParams); 
```

这是`rquery`功能：

```
function rquery($query, $params = NULL) {
    $this->_query = filter_var($query, FILTER_SANITIZE_STRING);
    $stmt = $this->_prepareQuery();
    $stmt->execute($params);

    $results = $this->_dynamicBindResults($stmt);

    return $results;
} 
```

和构造函数：

```
public function __construct($host, $username, $password, $db) {
    $this->_mysql = new PDO("mysql:host=$host;dbname=$db", $username, $password);
    $this->_mysql->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:32:58.240

我的解决方案是从您的方法中删除 filter_var ：

```
function rquery($query, $params = NULL) {
    $this->_query = $query;
    $stmt = $this->_prepareQuery();
    $stmt->execute($params);

    $results = $this->_dynamicBindResults($stmt);

    return $results;
} 
```

绑定将为您阻止 sql 注入。
如果需要，您可以`filter_var()`在内部参数上使用`_dynamicBindResults`。

或者您可以在传递查询之前在每个参数上使用它：

```
$DBParams = array('FlagID'=>filter_var($_GET['flag'], FILTER_SANITIZE_STRING),...); 
```

这里的连接是一个显式连接：

```
SELECT Knowledge.*, SortFlagItems.*
FROM Knowledge
INNER JOIN SortFlagItems ON Knowledge.id = SortFlagItems.KID
WHERE SortFlagItems.FlagID=:FlagID
AND SortFlagItems.CID=:CID
AND Knowledge.Archived=:Nothing
AND SortFlagItems.FlagDate<=:Now
ORDER BY SortFlagItems.SortOrder 
```

# css - 两个div自适应宽度

> ID：15144458
> 
> 赞同：0
> 
> 时间：2013-02-28T19:54:32.040
> 
> 标签：css

我正在尝试这样做

```
<div>
    <div style="width:50%;"> first div </div>
    <div style="width:50%;"> second div </div>
</div> 
```

有时不会动态显示第一个或第二个 div。当第一个 div 不显示时，我需要第二个假设宽度为 100%，反之亦然。我可以只用css做到这一点吗？最小重量或最大宽度或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:04:59.413

您可以使用`:only-child`伪类

```
.childDiv
{
    width:50%;
}
.childDiv:only-child
{
    width:100%;
} 
```

HTML

```
<div>
    <div class="childDiv'> first div </div>
    <div class="childDiv'> second div </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:02:18.540

尝试使用自动边距 CSS 属性：

```
.myClass
{
    margin:0px auto;
    width:50 //You can set this to whatever or take it out
} 
```

并添加到 HTML

```
<div>
    <div class="myClass'> first div </div>
    <div class="myClass'> second div </div>
</div> 
```

# python - 递归后订单树导航

> ID：15144459
> 
> 赞同：1
> 
> 时间：2013-02-28T19:54:38.063
> 
> 标签：python

我正在尝试实现以下算法：

> Fitch 的算法（对于一个字符序列）：
> 
> 步骤 1：对于每个叶节点 n，创建一个包含叶分配字母的集合 Sn。
> 
> 第 2 步：对于每个具有子 u 和 v 的内部节点 n，创建一个集合 Sn 等于： • 如果 Su ∩ Sv 不为空，则 Su ∩ Sv。• 如果Su ∩ Sv 为空，则Su U Sv。
> 
> 第 3 步：对于每个具有父 p 的内部节点 n，分配 n.seq 一个字符等于： • p.seq 如果 p.seq ∈ Sn • 否则 Sn 的任何字符（或者如果 n 是根）。

我得到一个二叉树作为输入。

我已经完成了第一步，现在需要通过二叉树递归地进行后序导航，以将集合分配给每个节点。我想知道如何开始这个？

使用前序递归在树中导航是这样完成的（这只是一个计算树长度的示例，该长度取决于树中有多少叶子。叶子 = 没有孩子）：

```
def __len__(self):

     if self.isLeaf():
        print('base case - reached leaf!')
        return 1

    for t,w in self.children:  
        print('not leaf so sent through loop')
        numLeaves += len(t)

    return numLeaves 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:30:47.950

这很简单，您只需在节点不再有左右子节点后将其标记为已访问。根节点被访问后，算法结束。如果使用递归完成，该算法会容易得多。

要为您的算法获取正确的集合，请让您的后序遍历返回它的分配字符串（如果它是叶子，它将是单个字符）或空白字符（如果没有孩子，无论是右边还是左边）。

在 post order 函数中，追加返回的字符串，然后返回追加的字符串。

[http://en.wikipedia.org/wiki/Tree_traversal#Post-order](http://en.wikipedia.org/wiki/Tree_traversal#Post-order)

# c++ - 错误 C3493：residual' 无法隐式捕获，因为未指定默认捕获模式

> ID：15144460
> 
> 赞同：0
> 
> 时间：2013-02-28T19:54:39.380
> 
> 标签：c++

作为我的数值方法研究的一部分，我正在编写一个函数来解决流值问题。这是程序的“肉”，但它会出现许多奇怪的错误，这很奇怪，因为我在其他程序中使用了相同的代码而没有任何错误。

```
 void solve_stream(void)
    {
          double residual, residual_total;
        int resid_count, count=0;

        do
        {
            residual_total=0.0;
            resid_count=0;

            for(int i=0;i<maxi;i++)
                for(int j=0;j<maxj;j++)
                    if((i+j)%2==count%2)
                    {
                        residual= P[i][j]*e[i][j]-f[i][j];
                        if(i<maxi-1) residual+= P*[i+1][j]*a[i][j];
                        if(i>0) residual+= P[i-1][j]*b[i][j];
                        if(j<maxj-1) residual+= P[i][j+1]*c[i][j];
                        if(j>0) residual+= P[i][j-1]*d[i][j];

                        residual_total+= fabs(residual);
                        resid_count++;
                    }

            residual_total = residual_total/resid_count; //average residual
            count++;

            if(count%100==0) cout<<"-";
        }
        while(residual_total>1.0);
    } 
```

1.  在第 155 行，即 if(i'less than' maxi-1) 的开头，编译器在 '+' ' 之前返回 'error C2143: syntax error : missing ']' 即使残差被定义为双精度！

2.  对于定义的所有变量，它返回'error C3493：'residual'不能被隐式捕获，因为没有指定默认捕获模式'；即使是 i 和 j！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:59:00.937

```
P*[i+1][j] 
```

什么是P？它似乎是一个数组，但在这里你将它相乘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:59:14.377

这看起来很可疑：

```
P*[i+1][j] 
```

你大概是说

```
P[i+1][j] 
```

# php - 如何在 Javascript 中实现 __get __set 对象方法？

> ID：15144462
> 
> 赞同：3
> 
> 时间：2013-02-28T19:54:46.940
> 
> 标签：php, javascript

如何在 Javascript 中实现 __get __set PHP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:56:21.837

[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)带有适当的参数。

# javascript - 如何在 D3.js 中扩展对角线对象？

> ID：15144468
> 
> 赞同：1
> 
> 时间：2013-02-28T19:55:04.880
> 
> 标签：javascript, oop, d3.js

我一直在研究 d3.js 中的渲染树布局，但我想知道扩展已经存在的代码的最佳实践是什么？

例如，如果我想在 svg.diagonal.js 文件中使用直线而不是三次贝塞尔曲线。扩展该代码的最有效方法是什么？

编辑：有人指出，这个问题已经得到解答。我想补充一点，由于此处处理的“非法字符错误”，我无法立即编辑 d3.js：

[https://github.com/mbostock/d3/issues/1006](https://github.com/mbostock/d3/issues/1006)

# c# - 跨 UNC 复制文件

> ID：15144469
> 
> 赞同：2
> 
> 时间：2013-02-28T19:55:13.437
> 
> 标签：c#, copy, unc

我有一个服务器 A，它托管一个应用程序来将文件写入它的硬盘驱动器。我有另外 2 台服务器 B 和 C。A 上的 UNC 共享可以访问 B 和 C。

我希望将任何写入 A 上的硬盘驱动器的文件复制到与服务器 B 和 C 类似的目录结构下。我尝试使用 File.Copy ，但这每次都会给我一个拒绝访问。我将如何设置安全性以使其正常工作？或者有没有办法冒充用户？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T21:29:15.580

如果您只是尝试访问需要凭据的网络共享，您可以执行以下操作：

1.  调用 WinAPI LogonUser 以获取网络凭据令牌。
2.  将令牌包装在 WindowsIdentity 对象中。
3.  在 WindowsIdentity 上调用 Impersonate。
4.  访问网络资源。
5.  处置 WindowsImpersonationContext 和 WindowsIdentity。
6.  调用 WinAPI CloseHandle。

I created a disposable class that implements this behavior.

```
...

    using (new NetworkImpersonationContext("domain", "username", "password"))
    {
        // access network here
    }

...

public class NetworkImpersonationContext : IDisposable
{
    private readonly WindowsIdentity _identity;
    private readonly WindowsImpersonationContext _impersonationContext;
    private readonly IntPtr _token;
    private bool _disposed;

    public NetworkImpersonationContext(string domain, string userName, string password)
    {
        if (!LogonUser(userName, domain, password, 9, 0, out _token))
            throw new Win32Exception();
        _identity = new WindowsIdentity(_token);
        try
        {
            _impersonationContext = _identity.Impersonate();
        }
        catch
        {
            _identity.Dispose();
            throw;
        }
    }

    #region IDisposable Members

    public void Dispose()
    {
        GC.SuppressFinalize(this);
        Dispose(true);
    }

    #endregion

    [DllImport("advapi32.dll", SetLastError = true)]
    private static extern bool LogonUser(
        string lpszUsername,
        string lpszDomain,
        string lpszPassword,
        int dwLogonType,
        int dwLogonProvider,
        out IntPtr phToken
        );

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool CloseHandle(IntPtr hHandle);

    protected virtual void Dispose(bool disposing)
    {
        if (_disposed)
            return;
        _disposed = true;

        if (disposing)
        {
            _impersonationContext.Dispose();
            _identity.Dispose();
        }

        if (!CloseHandle(_token))
            throw new Win32Exception();
    }

    ~NetworkImpersonationContext()
    {
        Dispose(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:58:42.910

我不会尝试在 C# 中解决这个问题。已经有许多文件复制产品，包括为 Windows Server 2003 及更高版本内置的[DFS 复制。](http://technet.microsoft.com/en-us/library/cc771058.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:59:25.830

我不会尝试对安全性进行编程来支持这一点。您最好的选择是使用 Windows 进行配置（假设您使用的是 Windows 服务器）。您必须确保服务器 B 和 C 已分配权限以允许服务器 A 写入 UNC 共享。

此时，假设这是 Windows，您可以将权限分配给服务器 B 和 C 的机器名称，或者您可以将服务器 B 和 C 放入一个组，并在服务器 A 上为该组分配权限。

# java - 需要帮助在 java 方法中创建多个返回语句

> ID：15144472
> 
> 赞同：2
> 
> 时间：2013-02-28T19:55:20.877
> 
> 标签：java, variables, return

我是一名大学新生，我开始学习我的第一门 Java 编程课程。教授给我们发了一个作业，目的是制作一个模拟 USPS 数据库的应用程序。

无论如何，我已经到了我希望我的程序逐行询问收件人信息（地址、姓名、城市等）的地步，我设法使用简单的 JOptionPane 做到了这一点。问题是，现在，我正在使用 Java 方法，但我终其一生都无法弄清楚如何制作 return 语句，因此我的程序将使用我的收件人信息继续执行下一个方法。

```
private static String getString(String string) {
    // TODO Auto-generated method stub

    String nameString = JOptionPane.showInputDialog(null,
            "Recipients name:", "Certified Mail Receipt", 3);

    String streetAddressString = JOptionPane.showInputDialog(null,
            "Street, Apt. No. or P.O. Box No.:", "Certified Mail Receipt",
            3);

    String cityString = JOptionPane.showInputDialog(null,
            "City, State, Zip Code", "Certified Mail Receipt", 3);
    // return ?????????`
} 
```

编译器只会让我插入一个返回语句，并且 3 个问题中只有一个会被发送到下一个方法。我认为我需要一种方法来在退货声明中获取这三件事，这样程序就不会一遍又一遍地询问相同的收件人信息问题。

如果有帮助，我正在使用 Eclipse Java 编译器。谢谢！

======================编辑=========================== ===== @TerryLi 通过在我的课堂上发现一个错误来帮助我

```
private static String getString(String type) {
String result = JOptionPane.showInputDialog(null, 
        type, 
        "Certified Mail Receipt", 
        3);
return result; 
```

}

这就是我设法让它工作的方法。再次感谢@terryli 和所有帮助回复的人！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T19:58:49.730

编写一个保存数据的包装类：

```
public class SomeWrapper
{
    private String name;
    private String address;
    private String city;

    public SomeWrapper(String n, String a, String c)
    {
        name = n;
        address = a;
        city = c;
    }

    public String getAddress(){return address;}
    public String getName(){return name;}
    public String getCity(){return city;}
} 
```

然后像这样使用它：

```
private static String getData()
{
   // ...

   SomeWrapper w = new SomeWrapper(nameString, streetAddressString, cityString);

   return w;
} 
```

并像这样提取它：

```
SomeWrapper w = getData();
String nameString = w.getName();
String streetAddressString = w.getAddress();
String cityString = w.getCity(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:00:53.333

您可以在此方法之外使用数组或静态变量。一个方法可以轻松地返回包含提示您的所有三个字符串的字符串数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:10:56.070

在我看来，你有两个明显的选择，这取决于你以后想如何使用这些字符串。在我看来，您可以返回一个连接字符串，该字符串返回所有变量中的所有信息，在您的情况下，这将是这样的：

```
/* The \n just puts each peace of info on a new line you could just do a 
" " instead or something. */
return nameString+"\n"+streetAddressString+"\n"+cityString; 
```

或者您可以返回一个字符串数组，其中每个字符串位于某个位置（索引）：

```
String[] stringList = new String[3]; 
```

并将它们读入数组并返回数组（如果这样做，请不要忘记更改返回类型）。

```
/* index in arrays start at 0 so its always 1 less than the size you make it 
(if you didnt know) */
stringList[0] = nameString;
stringList.... etc. 
```

您还应该知道 getter 通常是公共类，您只需将字段值设为私有并使用 getter 获取它们。（作为标准做法，据我所知）。希望能帮助到你。

编辑：在我看来，甚至没有必要使用静态变量是一个非常糟糕的主意。如果您可以在没有它的情况下解决问题，请改为这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:17:09.270

Java 不允许您返回多个值，除非您使用数组或包装类或某种结构。由于已经涵盖了这两种方法，因此我建议将其拆分为几种不同的方法以使其更具可读性。

```
private static String promptForString(String message, String title)
{
    return JOptionPane.showInputDialog(null,message,title,3);
}

private static String promptForName()
{
    return promptForString("Recipients name:","Certified Mail Receipt");
}

private static String promptForStreetAddress()
{
    return promptForString("Street, Apt. No. or P.O. Box No.:","Certified Mail Receipt");
}

private static String promptForCity()
{
    return promptForString("City, State, Zip Code","Certified Mail Receipt");
} 
```

然后在你的调用者方法中你可以简单地使用

```
String name = promptForName();
String streetAddress = promptForStreetAddress();
String city = promptForCity(); 
```

这还有一个额外的好处，即允许您相当容易地添加更多字段，或者完全使用 promptForString 方法来完成其他事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T20:05:49.477

让我提供一个替代方案：

```
String splitter = "-.-";
return nameString+splitter+streetAddressString+splitter+cityString; 
```

我们可以按如下方式检索返回值：

```
String returns = getString(...);
String nameString = returns.split(splitter)[0];
String streetAddressString = returns.split(splitter)[1];
String cityString = returns.split(splitter)[2]; 
```

如果您想保持方法签名相同，这将是唯一的解决方法。

**编辑**：

鉴于您是 Java 新手，请尝试以下代码：

```
return nameString+"-.-"+streetAddressString+"-.-"+cityString; 
```

基本上，我只是删除了全局变量`splitter`以方便您。

```
String nameString = returns.split("-.-")[0];
String streetAddressString = returns.split("-.-")[1];
String cityString = returns.split("-.-")[2]; 
```

**更新**：

您只需要修改`getString`方法如下：

```
private static String getString(String type) {
    String result = JOptionPane.showInputDialog(null, 
            type, 
            "Certified Mail Receipt", 
            3);
    return result;   
} 
```

这应该可以解决您的问题。让我知道。

`Update2`：

```
private static void showReceipt(double postage, double certifiedFee,
        double restrictedFee, double returnReceiptFee, String nameString,
        String addressString, String cityString) {
    // TODO Auto-generated method stub
    DecimalFormat fmt = new DecimalFormat(" $0.00");
    double certifiedMailFee = 0;
    double restrictedDelivery = 0;
    String outputString = "U.S. POSTAL SERVICE\nCERTIFIED MAIL RECEIPT\n---------------------\nPostage" + 
            fmt.format(postage) + 
            "\nCertified Mail Fee" + fmt.format(certifiedMailFee) + 
            "\nRestricted Delivery Fee" + fmt.format(restrictedDelivery) + 
            "\nReturn Receipt Fee" + fmt.format(returnReceiptFee) + 
            "\nTotal Postage & Fees" + fmt.format(postage + certifiedMailFee + restrictedDelivery + returnReceiptFee) + 
            "\n----------------------------" + 
            "\nSend to:" + 
            "\n" + nameString + 
            "\n----------------------------" + 
            "\nStreet, Apt No., or PO Box No." + 
            "\n" + addressString + 
            "\n----------------------------" + 
            "\nCity, State, ZIP+4®" + 
            "\n" + cityString;

    JOptionPane.showMessageDialog(null, 
            outputString, 
            "Certified Mail Receipt", 
            1, 
            null);

} 
```

希望您会注意到我刚刚对上面的代码所做的更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T20:07:19.237

两种方式。

1.  使用全局变量

    **

    **

**

```
private static String nameString, streetAddressString, cityString;
        private static String getString(String string) {
            // TODO Auto-generated method stub

            nameString = JOptionPane.showInputDialog(null,
                    "Recipients name:", "Certified Mail Receipt", 3);

            streetAddressString = JOptionPane.showInputDialog(null,
                    "Street, Apt. No. or P.O. Box No.:", "Certified Mail Receipt",
                    3);

            cityString = JOptionPane.showInputDialog(null,
                    "City, State, Zip Code", "Certified Mail Receipt", 3);
            //No need to return, they are available globally 
        } 
```

**

**

**

或者，将它们作为方法参数传递

**

```
private static String getString(String string) {
    // TODO Auto-generated method stub
    String nameString = JOptionPane.showInputDialog(null,
            "Recipients name:", "Certified Mail Receipt", 3);
    String streetAddressString = JOptionPane.showInputDialog(null,
            "Street, Apt. No. or P.O. Box No.:", "Certified Mail Receipt",
            3);
    String cityString = JOptionPane.showInputDialog(null,
            "City, State, Zip Code", "Certified Mail Receipt", 3);

stringMethod(nameString,streetAddressString,cityString);
} 
```

**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T20:07:33.330

Java 编程语言不允许返回多个变量。但是您可以返回对象，最准确地说，您可以返回对对象的引用。所以，如果你想返回多个东西，只需创建一个满足你所有要求的数据结构（类），并返回它的一个实例。

例如：

```
public class DataStruct{

    public DataStruct(String nameString, String streetAddressString, String cityString){
         this.nameString = nameString;
         this.streetAddressString = streetAddressString;
         this.cityString = cityString;
    }

    public String nameString;
    public String streetAddressString;
    public String cityString;
}

private static String getString(String string) {
// TODO Auto-generated method stub

String nameString = JOptionPane.showInputDialog(null,
        "Recipients name:", "Certified Mail Receipt", 3);

String streetAddressString = JOptionPane.showInputDialog(null,
        "Street, Apt. No. or P.O. Box No.:", "Certified Mail Receipt",
        3);

String cityString = JOptionPane.showInputDialog(null,
        "City, State, Zip Code", "Certified Mail Receipt", 3);
return new DataStruct(nameString,streetAddressString,cityString);
} 
```

# ruby-on-rails-3 - 未经授权获取Facebook用户基本信息

> ID：15144474
> 
> 赞同：0
> 
> 时间：2013-02-28T19:55:22.947
> 
> 标签：ruby-on-rails-3, facebook, facebook-graph-api, facebook-javascript-sdk

只要他们在当前浏览器中登录 Facebook，我希望能够在用户访问该网站后，在他们获得授权之前，向用户显示他们的哪些朋友已经注册了该应用程序。

这个要求可以吗？我肯定见过这种东西，但我不确定这是否普遍可用。我记得在 Stackoverflow 上看到过有关此主题的一些信息，但目前找不到。

这是一个 Ruby on Rails 应用程序，我一直在使用 Koala 发出授权请求。

谢谢。

# c++ - 键入特征以识别主要基类

> ID：15144481
> 
> 赞同：8
> 
> 时间：2013-02-28T19:55:58.807
> 
> 标签：c++, typetraits, memory-layout, vptr, itanium-abi

如果我有一个类 Base，至少有一个虚函数，以及一个从该类单独继承的 Derived 类，那么`(uintptr_t)derived - (uintptr_t)static_cast<Base*>(derived)`即使 Derived 不是标准布局，也可以保证（由 Itanium ABI）为零。然而，在一般情况下，这不一定是真的（例如多重继承）。

是否可以编写一个特征来检测一个类是否是另一个类的主要基类？

Itanium ABI 中的有用部分：

[http://refspecs.linux-foundation.org/cxxabi-1.83.html](http://refspecs.linux-foundation.org/cxxabi-1.83.html)

主要基类

> 对于动态类，唯一的基类（如果有），它在偏移量 0 处共享虚拟指针。它是第一个（按直接基类顺序）非虚拟动态基类（如果存在）。

动态类

> 需要虚拟表指针的类（因为它或其基类具有一个或多个虚拟成员函数或虚拟基类）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T20:48:18.230

~~这将成为下一个标准~~`std::bases`的一部分 这是通过和`std::direct_bases`特征中止的 TR2 的一部分。如果您碰巧正在使用包含 Draft-TR2 的编译器，您可能会支持这一点。例如在 GCC 4.7.2 中：

```
#include <demangle.hpp>
#include <iostream>
#include <tr2/type_traits>

struct T1 { };
struct T2 { };
struct Foo : T1, T2 { };

int main()
{
    std::cout << demangle<std::tr2::direct_bases<Foo>::type>() << std::endl;
} 
```

这打印：

```
std::tr2::__reflection_typelist<T1, T2> 
```

（拆线器是我自己的；你可能在别处见过。）

我相信你可以自己建立一个合适的“是多态的并且精确地具有零个或一个碱基”的特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:12:37.453

*下面是一个狂野的、未经彻底测试的尝试，仅对 C++11 有帮助（实际上*，它并不需要任何 C++11 功能，但这样编写更容易）。

然而，这个特性只检查“是主要基类”属性的*传递闭包*：我无法找到一种非侵入式的方式来验证一个类是否是另一个类的*直接*基类。

```
#include <type_traits>

template<typename B, typename D, D* p = nullptr, typename = void>
struct is_primary_base_of : std::false_type { };

template<typename B, typename D, D* p>
struct is_primary_base_of<B, D, p,
    typename std::enable_if<
        ((int)(p + 1024) - (int)static_cast<B*>(p + 1024)) == 0
        >::type
    >
    :
    std::true_type { }; 
```

这是一个例子：

```
struct A { virtual ~A() { } };

struct B : A { };

struct C { virtual ~C() { } };

struct D : B, C { };

struct E : virtual A, C { };

int main()
{
    // Does not fire (A is PBC of B, which is PBC of D)
    static_assert(is_primary_base_of<A, D>::value, "Error!");

    // Does not fire (B is PBC of C)
    static_assert(is_primary_base_of<B, D>::value, "Error!");

    // Fires (C is not PBC of D)
    static_assert(is_primary_base_of<C, D>::value, "Error!");

    // Fires (A is inherited virtually by E, so it is not PBC of E)
    static_assert(is_primary_base_of<A, E>::value, "Error!");

    // Does not fire (C is the first non-virtual base class of E)
    static_assert(is_primary_base_of<C, E>::value, "Error!");
} 
```

# iphone - 未设置自定义 UIView iboutlet

> ID：15144482
> 
> 赞同：2
> 
> 时间：2013-02-28T19:56:04.173
> 
> 标签：iphone, ios

我创建了一个名为“abc”的自定义 UIView 类和一个 nib。在那个笔尖的 IB 中创建了一个 UIButton。现在，当我尝试通过将箭头扩展到 File's Owner 来创建该 UIButton 的出口时，它不允许我这样做。请告诉我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:59:58.760

您需要将nib文件的视图更改为`customView`类名，在Identity Inspector中，`UIView`将图片中的Class更改为您的自定义类

![身份检查员](../Images/9390205733b18a18a0240604ad2ae936.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:53:24.613

问题可能是您没有在 xib 文件中为“abc”设置自定义类名称。每当您创建 UIView 的子类时，请不要这样做。您必须将其视图与该类绑定。当您要进行 IBOutlet 连接而不是将其连接到文件所有者时，您必须将其连接到放置在对象中的视图（对象列表位于界面构建器的左侧）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T19:58:05.250

*) 转到视图 xib

*) 单击文件的所有者身份检查器

*) 并将类名更改为所需的视图名称。

# python - 用 python wand 合成两个图像

> ID：15144483
> 
> 赞同：10
> 
> 时间：2013-02-28T19:56:12.633
> 
> 标签：python, imagemagick, composition, magickwand, wand

我需要使用 python wand（python 的图像魔术绑定）来创建合成图像，但是除了简单地将前景图像复制粘贴到背景图像中之外，我在弄清楚如何做任何事情时遇到了一些麻烦。我想要的是，鉴于我有两个图像：

![前景](../Images/2acd3888bd71d4966a70a8402826699f.png)

和

![在此处输入图像描述](../Images/14193e31db1ff76d015d0e6844b0d926.png)

两个 jpeg，我想删除猫的白色背景，然后将其粘贴到房间上。其他 python 图像模块的答案，比如 PIL，也很好，我只需要一些东西来自动化合成过程。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T11:26:38.893

您可以使用以下方法实现此目的[`Image.composite()`](http://docs.wand-py.org/en/0.2-maintenance/wand/image.html#wand.image.Image.composite)：

```
import urllib2

from wand.image import Image
from wand.display import display

fg_url = 'http://i.stack.imgur.com/Mz9y0.jpg'
bg_url = 'http://i.stack.imgur.com/TAcBA.jpg'

bg = urllib2.urlopen(bg_url)
with Image(file=bg) as bg_img:
    fg = urllib2.urlopen(fg_url)
    with Image(file=fg) as fg_img:
        bg_img.composite(fg_img, left=100, top=100)
    fg.close()
    display(bg_img)
bg.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T03:28:58.287

对于那些将来偶然发现这一点的人，您可能想要做的是在进行构图之前将猫图像中的“白色”颜色更改为透明。这应该可以使用 Image 的 'transparent_color()' 方法来实现。'fg_img.transparent_color(wand.color.Color('#FFF')) 之类的东西，可能还带有模糊参数。

见： [http ://www.imagemagick.org/Usage/compose/](http://www.imagemagick.org/Usage/compose/) [http://docs.wand-py.org/en/latest/wand/image.html](http://docs.wand-py.org/en/latest/wand/image.html)

# c++ - 寻找局部最大值灰度图像opencv

> ID：15144497
> 
> 赞同：1
> 
> 时间：2013-02-28T19:57:04.953
> 
> 标签：c++, visual-c++, opencv

我正在尝试创建我的个人 Blob 检测算法 据我所知，我首先必须创建具有不同 sigma 的不同高斯内核（我正在使用`Mat kernel= getGaussianKernel(x,y);`）然后获取该内核的拉普拉斯算子，然后用它过滤图像，这样我就创建了我的尺度空间。现在我需要在尺度空间的每个结果图像中找到局部最大值。但我似乎找不到合适的方法来做到这一点......到目前为止我的代码是

```
vector <Point> GetLocalMaxima(const cv::Mat Src,int MatchingSize, int Threshold)
{  
    vector <Point> vMaxLoc(0); 

    if ((MatchingSize % 2 == 0) ) // MatchingSize has to be "odd" and > 0
    {
        return vMaxLoc;
    }

    vMaxLoc.reserve(100); // Reserve place for fast access 
    Mat ProcessImg = Src.clone();
    int W = Src.cols;
    int H = Src.rows;
    int SearchWidth  = W - MatchingSize;
    int SearchHeight = H - MatchingSize;
    int MatchingSquareCenter = MatchingSize/2;

    uchar* pProcess = (uchar *) ProcessImg.data; // The pointer to image Data 

    int Shift = MatchingSquareCenter * ( W + 1);
    int k = 0;

    for(int y=0; y < SearchHeight; ++y)
    { 
        int m = k + Shift;
        for(int x=0;x < SearchWidth ; ++x)
        {
            if (pProcess[m++] >= Threshold)
            {
                Point LocMax;
                Mat mROI(ProcessImg, Rect(x,y,MatchingSize,MatchingSize));
                minMaxLoc(mROI,NULL,NULL,NULL,&LocMax);
                if (LocMax.x == MatchingSquareCenter && LocMax.y == MatchingSquareCenter)
                { 
                    vMaxLoc.push_back(Point( x+LocMax.x,y + LocMax.y )); 
                    // imshow("W1",mROI);cvWaitKey(0); //For gebug              
                }
            }
        }
        k += W;
    }
    return vMaxLoc; 
} 
```

我在这里的[这个](https://stackoverflow.com/questions/5550290/find-local-maxima-in-grayscale-image-using-opencv)线程中找到了它，它应该返回一个最大值所在的点向量。它确实返回了一个点向量，但每个点的所有 x 和 y 坐标始终为 -17891602 ......怎么办？？？如果您要带领我做一些其他事情而不是更正我的代码，请提供信息，因为我对 opencv 一无所知。我只是在学习

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:46:57.163

这里的问题是您的 LocMax 点是在内部循环中声明的并且从未初始化，因此它每次都返回垃圾数据。如果您回顾[您链接的 StackOverflow 问题](https://stackoverflow.com/questions/5550290/find-local-maxima-in-grayscale-image-using-opencv)，您会看到它们的相似变量`Point maxLoc(0,0)`在顶部声明并构造为指向搜索窗口的中间。它只需要初始化一次。`minMaxLoc`随后的循环迭代将用函数结果替换该值。

总之，在你的内部循环中删除这一行：

```
Point LocMax; // delete this 
```

并在顶部附近添加一个稍有改动的版本：

```
vector <Point> vMaxLoc(0); // This was your original first line 
Point LocMax(0,0);  // your new second line 
```

无论如何，这应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:45:38.363

我找到了伙计们。问题是我的门槛太高了。我不明白为什么它给了我负分而不是零分但降低门槛有效

# 64-bit - Powerbuilder 11.5 Win7 64位运行命令

> ID：15144509
> 
> 赞同：1
> 
> 时间：2013-02-28T19:58:03.590
> 
> 标签：64-bit, powerbuilder

我一直在开发一个使用热敏打印机打印收据的应用程序。

到目前为止，以下代码（PB 11.5）一直很有吸引力：

```
Environment env
GetEnvironment(env)
ls_port= 'LPT1'

ls_command = 'COPY ' + ls_tempfile + ' ' + ls_port

Choose Case env.OSType
    Case windows!
        ls_command = 'command.com /c ' + ls_command
    Case windowsnt!
        ls_command = 'cmd.exe /c "' + ls_command + '"'
    Case else
        ls_command = 'cmd.exe /c "' + ls_command + '"'
End Choose

li_cmd = Run(ls_command,Minimized!) 
```

我刚刚将我的应用程序部署到一个使用 **Win7 64 位 PC**的大客户，但命令没有触发！我根本无法打印！我处于尴尬（至少可以说）的境地。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:26:44.827

好吧，问题不在于 PB Run 语句，而在于我所做的**Net Use 。**LPTx 中的网络使用，Win7 64 位中的 COMx 存在大量有关权限、用户权限等问题。即使是打印机属性中的直接打印到打印机选项也会导致权限问题！天啊...

# excel - Vlookup并获取最小值（日期）

> ID：15144512
> 
> 赞同：5
> 
> 时间：2013-02-28T19:58:08.513
> 
> 标签：excel, excel-formula, excel-2010

顶部表格是输入，底部表格是所需输出的预览。

对于每个 ID，我需要找到最早的日期时间。我还需要其他专栏的其他信息（请参见下图）。

我目前的解决方案是：在单元格 E2`=A2`
单元格 E3 中向下拖动`=IF(E2<>A3,IF(E1=A3,"",A3),"")`

在单元格 F2 中向下拖动`=IF(E2<>"",MIN(IF($A$2:$A$14=E2,$C$2:$C$14)),"")` Ctrl+Shift+Enter

![在此处输入图像描述](../Images/bf3d6e385147d895488d6c31b3989a7a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T18:06:32.343

无需任何中间计算的另一种选择：

1.  选择从 ID 所在的最后一行**开始到最后一行的整个范围** `E2`- 对于第 14 行的示例，因此选择 range `E2:E14`:`=IFERROR(INDEX($A$2:$A$14,SMALL(IF(MATCH($A$2:$A$14,$A$2:$A$14,0)=ROW(INDIRECT("1:"&ROWS($A$2:$A$14))),MATCH($A$2:$A$14,$A$2:$A$14,0),""),ROW(INDIRECT("1:"&ROWS($A$2:$A$14))))),"")`并按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个**Multicell ARRAY**公式并`{}`在其周围产生大括号（但不要**手动**输入它们！）。
2.  `F2`(ID2): `=IF(E2="","",SUMPRODUCT(--(E2=$A$2:$A$14),--(G2=$C$2:$C$14),$B$2:$B$14))`- 正常公式。
3.  `G2`（最小日期）：`=IF(E2="","",MIN(IF(E2=$A$2:$A$14,$C$2:$C$14,2^100)))`然后按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个**ARRAY**公式，并`{}`在它周围产生花括号（但不要**手动**输入它们！）。
4.  `H2`(InCh): `=IF(E2="","",INDEX($D$2:$D$14,SUMPRODUCT(--(E2=$A$2:$A$14),--(F2=$B$2:$B$14),--(G2=$C$2:$C$14),ROW(INDIRECT("1:"&ROWS($D$2:$D$14))))))`- 正常公式。

评论：

*   为了使解决方案更加紧凑和易于阅读，为`ID`列定义命名范围，然后使用`OFFSET`.
*   ID2 值可能不是唯一的 - 因为它们在 ID 样本中`1...3`。
*   结果集的`Min Date`格式应与源`Date`行相同。
*   解决方案的关键公式 - 是多单元怪物，它返回没有空行的唯一 ID - 根据 OP 的要求）

示例文件：[https ://www.dropbox.com/s/d2098updfh8djnf/MinDateIDs.xlsx](https://www.dropbox.com/s/d2098updfh8djnf/MinDateIDs.xlsx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:31:57.207

这是一个相当大的挑战……我想我找到了一种可行的方法。为了清楚起见，我使用了一些辅助列。此外，我没有使用任何命名范围，而是坚持使用列行指示。你可能想改变它。

它看起来像这样：

![带有辅助列的 XLS 的屏幕截图](../Images/a7bd13521787a4c6599a0a38760df89c.png)

并放大到相关列：

![新插入的列的屏幕截图](../Images/70df5ebb81e3f64972700bac0ce44530.png)

列`F`包含一个数组公式以过滤掉重复项。[这里](http://www.get-digital-help.com/2009/04/14/create-a-unique-alphabetically-sorted-list-extracted-from-a-column/)解释了一种方法。我使用的公式`F2`是

```
=INDEX($A$2:$A$14, MATCH(MIN(IF(COUNTIF($F$1:F1,$A$2:$A$14)=0, 1, MAX((COUNTIF($A$2:$A$14, "<"&$A$2:$A$14)+1)*2))*(COUNTIF($A$2:$A$14, "<"&$A$2:$A$14)+1)), COUNTIF($A$2:$A$14, "<"&$A$2:$A$14)+1, 0)) 
```

使用`Ctrl`- `Shift`-`Enter`确认为数组公式。将其向下拖动或复制到列`F`中。然后是列`G`并`H`包含重复`ID`值的开始和结束索引。[这个答案](https://stackoverflow.com/a/10879544/1380680)有帮助，请投赞成票:-)。使用的两个公式是：

```
=MATCH(2,1/FREQUENCY($F2,$A$2:$A$14)) 
```

在`G2`, 和

```
=FREQUENCY($A$2:$A$14,$F2) 
```

在`H2`. 再次，将它们向下拖动以填充整列。接下来，列`I`仅用于澄清 - 并用于完整性检查。它包含每个子数组中所需的最小日期。Column`J`将该公式替换为 a`MATCH`以查找所需日期的实际索引。

```
=MIN(OFFSET($C$2:$C$14,$G2-1,0,1+$H2-$G2,1)) 
```

在`I2`和

```
=$G2-1+MATCH(2,1/FREQUENCY(MIN(OFFSET($C$2:$C$14,$G2-1,0,1+$H2-$G2,1)), OFFSET($C$2:$C$14,$G2-1,0,1+$H2-$G2,1)) 
```

在`J2`. `L`最后，columns`M`和`N`index 通过

```
=INDEX(B$2:B$14,$J2) 
```

in `L2`，您可以水平拖动，然后垂直拖动。

完成后，您可以隐藏帮助列，或将所有内容折叠成大公式。祝你好运......可能有一种更简单的方法可以实现这一点，但我没有找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:24:18.203

如果您想要 G 中 D 列的值，那么假设 C 列的值是唯一的，您可以只使用 VLOOKUP，即在 G2 中复制下来

`=VLOOKUP(F2,C$2:D$14,2,0)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:53:26.660

根据你的照片，它们都在同一张纸上。只需按`ID`，然后`Date`（升序）排序。当您沿着`ID`列向下移动时，每次`ID`更改时，您都知道您已经找到了`Date`该特定`ID`. 创建一个额外的列来表示`ID`更改发生的位置，并过滤这些行（如果您愿意，可以隐藏该列）。

还有……瞧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T19:48:48.007

知道这个链接是旧的，但是有一个更短更简单的方法！如何使用使用“最小值”作为字段设置的数据透视表，然后执行 a`=GETPIVOTDATA()`以获取信息！这些公式似乎要简单得多！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T23:03:41.197

Actually, I just realized I've been overthinking this...Excel keeps the top item and removes all that follow when removing duplicates. So if you are going to create an extra working table anyway, why not just copy the range/columns you want to keep, then use the basic sort. Sort first by ID, then by the column you want as the second filter. Be sure the sorts are in the order you want (e.g. newest to oldest, oldest to newest, A to Z, Largest to smallest, etc). Once the data is sorted, remove duplicates based on ID. You are left with all of your columns of data, filtered by newest/oldest/largest/smallest per individual. This worked for my table with 30,000+ records, filtered down to 1500 unique individuals with most recent (plus associated amount), and with a second filter, the largest (plus associated date) for each person.

# asp.net - TFS OData 缺少对 BasicAuthToken 和 BasicAuthCredential 的引用

> ID：15144515
> 
> 赞同：2
> 
> 时间：2013-02-28T19:58:22.247
> 
> 标签：asp.net, c#-4.0, tfs, visual-studio-2012, odata

我正在尝试为公司 Team Foundation 服务器设置 OData 服务。我使用了几个版本，但这个版本似乎缺少我无法在任何地方找到的参考。我似乎缺少定义的 2 个类是 -`BasicAuthToken`两者`BasicAuthCredential`都抛出错误 -

`The type or namespace name 'BasicAuthToken' could not be found (are you missing a using directive or an assembly reference?)`

`The type or namespace name 'BasicAuthCredential' could not be found (are you missing a using directive or an assembly reference?)`

有谁知道这些在哪里可以参考？Odata服务可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=36230)下载！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T02:23:26.733

我有同样的问题。我的解决方案：

在 ODataTFS.Model 上：

1.  将目标框架切换到 4.5
2.  将所有 teamfoundation* 引用替换为版本 12。Microsoft.TeamFoundation 版本 12 不存在，将其删除。
3.  添加 Microsoft.TeamFoundation.VersionControl.Common.Integration（版本 12）
4.  添加 Microsoft.VisualStudio.Services.Common（版本 12）

在 ODataTFS.Web 上：

1.  将目标框架切换到 4.5
2.  替换所有对版本 12 的 teamfoundation* 引用。

之后，您只能使用 ctrl+'.' 解决构建错误。

# android - 如何从 FragmentActivity 上方的 Activity 替换 Fragment

> ID：15144519
> 
> 赞同：1
> 
> 时间：2013-02-28T19:58:35.020
> 
> 标签：android, android-fragments, listactivity, searchview

我需要帮助解决问题。不一定要寻找代码，尽管这不会被拒绝！

我有一个中央`FragmentActivity`外壳，当用户在应用程序的核心周围导航时`FrameLayout`，我用它来交换它。`Fragments`

在我`ActionBar`的是一个搜索小部件。键入搜索查询会打开`ListActivity`与查询匹配的列表选项。所以这本质上是`Activity` *在*我的`FragmentActivity`. 我喜欢这个想法，因为这是导航中的“侧弯”。

**我需要解决的问题是：** 当用户在搜索后选择 List Item 时，我想以某种方式关闭`Activity`，并将 Fragment Activity “下方”的 FrameLayout 替换为他们搜索的信息。

我试图制作`ListActivity`a`ListFragment`但无法解决。除非把它变成`FragmentActivity`一个封闭`Fragment`的答案。- 还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:49:26.940

尝试启动`ListActivity`with`startActivityForResult()`方法，并在您的`FragmentActivity`覆盖`onActivityResult()`方法中，并在那里发挥所有魔力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:12:26.367

您能否在 Activity 中实现回调方法，以便 FragmentActivity 可以响应 Activity 希望传达的任何内容？

# jquery - 网页背景颜色闪烁

> ID：15144522
> 
> 赞同：0
> 
> 时间：2013-02-28T19:58:46.237
> 
> 标签：jquery, html, css, background-color

有人可以告诉我为什么这段代码*不会*在两种颜色之间闪烁我网页的背景颜色。

```
<script type="text/javascript">
function blinkit() {
    intrvl = 0;
    for (nTimes = 0; nTimes < 3; nTimes++) {
        intrvl += 1000;
        setTimeout("document.bgColor='#0000FF';", intrvl);
        intrvl += 1000;
        setTimeout("document.bgColor='#FFFFFF';", intrvl);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:23:38.017

尝试这个：

```
function blinkit() {
    intrvl = 0;
    window.setInterval(function(){
        intrvl += 1000;
        setTimeout("document.bgColor='#0000FF';", intrvl);
        intrvl += 1000;
        setTimeout("document.bgColor='#FFFFFF';", intrvl);
    }, intrvl);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:31:56.320

永远不要将字符串传递给`setTimeout`，因为它和 . 一样糟糕`eval`。

相反，尝试这样的事情：

```
function blinkit(times, thenwhat) {
    var toggle = times*2, timer = setInterval(function() {
            document.body.style.backgroundColor = toggle%2 ? "#0000FF" : "#FFFFFF";
            toggle--;
            if( !toggle) {
                clearInterval(timer);
                thenwhat && thenwhat();
            }
        },1000);
    return timer;
}
var flashy = blinkit(3);
// The background will flash three times.
// You can also cancel it with `clearInterval(flashy);` 
```

使用上面的代码，您还可以告诉它在完成后做一些事情：

```
var flashy = blinkit(3,function() {alert("Hello!");}); 
```

# c# - 特定控制器的验证过滤器

> ID：15144526
> 
> 赞同：0
> 
> 时间：2013-02-28T19:58:51.850
> 
> 标签：c#, asp.net-mvc, validation, controller, asp.net-web-api

在 Web API 或 ASP.NET MVC 应用程序中，我可以通过以下方式添加全局验证过滤器 -

```
 GlobalConfiguration.Configuration.Filters.Add(new ModelValidationFilterAttribute()); 
```

和

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ModelState.IsValid == false)
        {
            actionContext.Response = actionContext.Request.CreateErrorResponse(HttpStatusCode.BadRequest, actionContext.ModelState);
        }
    } 
} 
```

但我想要有许多适用于我选择的控制器的验证过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:07:26.380

过滤器是可以应用于控制器或控制器中特定方法/操作的属性。

要根据具体情况使用过滤器，您可以执行以下任一操作：

```
[MyFilter]
public class HomeController : Controller
{
    //Filter will be applied to all methods in this controller
} 
```

或者：

```
public class HomeController : Controller
{
    [MyFilter]
    public ViewResult Index()
    {
         //Filter will be applied to this specific action method
    }
} 
```

[本教程](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)详细描述了过滤器并提供了两种方案的示例。

# java - GWT Servlet - ClassNotFoundException

> ID：15144527
> 
> 赞同：0
> 
> 时间：2013-02-28T19:58:54.960
> 
> 标签：java, gwt, servlets

我正在按照他们的[StockWatcher 教程](https://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/stockwatcher)学习 GWT 。在我自己尝试了一些事情之后，我在一个 servlet 上得到了这个异常：

```
Feb 28, 2013 7:55:00 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: jetty-6.1.x
Feb 28, 2013 7:55:00 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: EXCEPTION 
java.lang.ClassNotFoundException: com.google.gwt.sc2.server.GreetingServiceImpl
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

这是我配置 servlet 的 web.xml 文件：

```
<servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>com.google.gwt.sc2.server.GreetingServiceImpl</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/bikeapp/greet</url-pattern>
</servlet-mapping> 
```

我想我错过了一些非常基本的东西，但我不知道是什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:03:22.450

我假设您使用的是 eclipse，所以请检查默认输出文件夹的设置。编译项目时它应该在 WEB-INF/classes 中。

![在此处输入图像描述](../Images/19b04c1c4843356f5f225713dad554a6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T10:37:19.873

我遇到了同样的问题。原因是我使用 GPE（Google Plugin for Eclipse）创建了项目，并试图在行动书中遵循 GWT。但是我的 GPE 版本创建了很多员工，只需要基本的项目基础设施。因此，如果您将 web.xml 更改为

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
</web-app> 
```

一切都应该正常。

# android - 在 DialogFragment 内的按钮上设置 onclicklistener

> ID：15144531
> 
> 赞同：4
> 
> 时间：2013-02-28T19:59:07.083
> 
> 标签：android, nullpointerexception, android-dialogfragment

我有这部分代码用于对话片段

```
public class DialogOne extends DialogFragment  {
private Button b;

public DialogOne() {}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.dialog_one, container);
    getDialog().setTitle("Titolo del dialog");
    b = (Button)getDialog().findViewById(R.button.ok);
    b.setOnclickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    getDialog().dismiss();
                }
            });

    return view;
} 
```

所以当我按下按钮时，dialogfragment 必须关闭。当我运行应用程序时，我在行上有一个 NullPoinerException，包含新的 OnClickListener。我该如何解决？

```
> 02-28 21:05:44.623: E/AndroidRuntime(8487): FATAL EXCEPTION: main
02-28 21:05:44.623: E/AndroidRuntime(8487): java.lang.NullPointerException
02-28 21:05:44.623: E/AndroidRuntime(8487):     at com.example.dialogs.DialogOne.onActivityCreated(DialogOne.java:37)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.os.Handler.handleCallback(Handler.java:725)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.os.Looper.loop(Looper.java:137)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at android.app.ActivityThread.main(ActivityThread.java:5041)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at java.lang.reflect.Method.invokeNative(Native Method)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at java.lang.reflect.Method.invoke(Method.java:511)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-28 21:05:44.623: E/AndroidRuntime(8487):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T20:03:20.970

我想你想换

`b = (Button)getDialog().findViewById(R.button.ok);`

和

`b = (Button) view.findViewById(R.button.ok);`

# android - 使用单独的类而不是一个 MainActivity 时出现 NullPointer 异常

> ID：15144535
> 
> 赞同：0
> 
> 时间：2013-02-28T19:59:16.110
> 
> 标签：android, android-view, android-fragmentactivity, android-context, android-maps-v2

我正在尝试开发一个带有谷歌地图 v2、位置服务和一些控制按钮的 android 应用程序。

我不想把所有这些东西放在一个 MainActivity 类中，所以我想我可以将所有代码分成更多的类。MainActivity 应控制所有 GUI 事物并对地图或位置事件作出反应。

现在我有以下问题。在我的 onCreate 中，我实例化了其他类：

```
// Preferences as singleton
pref = Prefs.getInstance(this.getApplicationContext());
pref.loadSettings();

// Set up the location
loc  = new Locations(pref);
loc.setCallback(this);

map = new MyMap(pref); 
```

它似乎工作正常。但是每次我启动应用程序时，都会在 MyMap 类中引发空指针异常。我不知道为什么以及如何防止它。调用 MyMap() 时将执行以下代码：

```
[...]
private Prefs pref;
private GoogleMap mMap;
[...]

public MyMap(Prefs prefs) {
    pref = (Prefs) prefs;
    if (mMap == null) {
      FragmentManager fmanager = getSupportFragmentManager(); 
      mMap = ((SupportMapFragment) fmanager.findFragmentById(R.id.map)).getMap();
[...]
} 
```

带有 findFragmentById 的行是导致异常的行。我认为这是因为片段管理器无法访问我的 MainActivity 中加载的布局。但是如何访问我的 MainActivity 中定义的片段和视图元素？

每个类都有以下头部：

```
public class XYZ extends android.support.v4.app.FragmentActivity implements XXX, YYY 
```

我试图将应用程序上下文保存在我的 Prefs() 类中。但我不知道如何在我的附加课程中使用它。:(

有人能帮助我吗？

非常感谢！！！

托尔斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:27:47.763

尝试在 MyMap 的构造函数方法中将 mainActivity.getContext() （而不是 getApplicationContext() ）作为参数传递，并在构造函数内部将该值设置为 type 属性。然后使用该上下文，例如： context.findViewById(...) 或 context.getText(...)

祝你好运！

# php - 正则表达式否定字符类和点星号

> ID：15144537
> 
> 赞同：1
> 
> 时间：2013-02-28T19:59:28.790
> 
> 标签：php, regex, pcre

我需要让以下正则表达式工作但有问题。是的，它正在解析 HTML。不，没有更好的选择。

这是正则表达式：

```
test(.*)\/[^s].*(=|\/|Z) 
```

我正在使用“U”修饰符（所以它是不贪婪的），“\”是我的转义符号。

插入此模式：

```
test.com/sch/anythingwhateverZhello 
```

结果是一场比赛，当我认为它不应该的时候。捕获是“.com/sch”和“Z”，尽管我（认为）我特别告诉它应该 A）只捕获第一个“/”，所以它应该是“.com”，并且 B）如果“/”后的第一个字母是“s”，则不匹配。有趣的是——我的问题的可能根源——是当我删除 [^s] 时，捕获现在可以正常工作。有了它，星号会吞噬第二个“/”，这是没有意义的。我尝试在星号后加一个问号，作为对正则表达式的双重暗示，它不应该是贪婪的，但这没有任何区别。

好的，所以不是一个否定的字符类（我真的不想只排除“s”；我真的想特别排除“sch”），接下来我尝试了一个否定的前瞻：

```
test(.*)\/(?!sch).*(=|\/|Z) 
```

同样的问题！匹配，第一个捕获是“.com/sch”。

知道我的错误是什么吗？（我一直在[http://www.rexv.org/](http://www.rexv.org/)使用 RexV2 正则表达式验证器，所以我想到该引擎中可能存在错误，但我可以在我的实时环境中复制此问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:21:06.147

`test(.*)`那是你的问题。也许应该是 test([^/]*)？

它的方式是 match `test.com/sch`，因为`.`表示任何字符，然后`/`没有`s`in `anythingwhateverZhello`，所以它继续。

# java - 在没有源的情况下更改 .jar 文件？

> ID：15144539
> 
> 赞同：2
> 
> 时间：2013-02-28T19:59:37.317
> 
> 标签：java, tcp, decompiling

我有一个基于 Java 的 TCP 客户端，它与我们正在重写的生产服务器通信。客户端对服务器的 IP 和端口进行了硬编码。我想要做的只是将客户端中的 IP 地址更改为 127.0.0.1 并且我可以在我的开发盒上使用相同的端口号。问题就在这里，我没有所有的源代码，所以我不能重新编译它。写它的人已经有四年没在这里工作了，虽然我有他的硬盘，但我一直无法找到已编译的环回客户端（即使我找到了它的部分源代码），甚至所有的生产客户端的源代码。我怀疑他在网络驱动器上编写了他的代码，并且在这些年中它已经丢失了。

我有什么方法可以反编译客户端并使用该更改重新编译吗？十六进制或二进制编辑（我也没有技能，我刚刚看到它完成了）？也许 WinRAR 因为我的理解是 .jar 文件只是压缩文件？或者，有什么方法可以捕获来自客户端的传出 TCP 流量并将其重新路由到我的开发盒？我无法关闭生产服务器进行测试，并且如果没有修改过的客户端，将很难确保我正在模拟生产服务器对客户端的响应。

我找到了这篇 SO 文章：[Decompile & recompile single file from jar](https://stackoverflow.com/questions/9583370/decompile-recompile-single-file-from-jar)，但是我不明白反汇编和反编译之间的区别，但我找到了那里提到的实用程序 JD。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:02:49.177

您找到的 java 反编译器 ( [http://java.decompiler.free.fr/](http://java.decompiler.free.fr/) ) 将获取您拥有的已编译 jar 文件并创建 java 源文件。然后，您必须编辑源文件以进行所需的更改并重新编译。

我建议通过命令行使主机和端口可配置，以避免再次出现此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:08:08.190

将 jar 复制到系统到您的工作站并解压缩。然后使用 jad 之类的工具来反编译您要查找的类并进行更改。您应该能够编译它，因为编译所需的 jar 与运行客户端所需的 jar 相同

# azure - 服务总线通知中心：推送通知的有效负载大小限制是多少？

> ID：15144541
> 
> 赞同：2
> 
> 时间：2013-02-28T19:59:39.563
> 
> 标签：azure, notifications

据我所知，Apple 将推送通知有效负载限制为 256 个字节，Windows Phone 将其限制为 3KB。
Azure 通知中心是否为此限制提供了一些解决方法？
如果通知发送到 Apple 设备并且其有效负载长于 256 字节，通知中心的预期行为是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:21:15.183

我是通知中心功能的项目经理。通知中心没有针对各种平台通知系统的大小限制提供任何解决方法。

向模板注册发送通知时，当应用模板导致通知过大时，您将看到它被 PNS 拒绝，并且通知中心将在门户仪表板中将错误报告为“有效负载错误”。

发送本机消息时，发送请求将失败，您将收到状态码“请求实体太大”。

# c# - 如何将文件从“资源”复制到磁盘上的文件夹

> ID：15144548
> 
> 赞同：1
> 
> 时间：2013-02-28T19:59:54.493
> 
> 标签：c#, file-io

我在我的应用程序的资源属性中放置了一个 dll 文件（来自 myappProperties>>Resources>>添加现有文件）。

现在我希望我的应用程序将此文件复制到硬盘驱动器上的目标位置。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:20:35.073

我通常以二进制格式（字节数组）存储资源文件（dll、png 等）。
在运行时我这样做：

```
path = ...
File.WriteAllBytes(path, Resources.binaryStuff); 
```

其中 Resources 是应用程序的资源实例。

# python - python 正则表达式给出空字符串

> ID：15144553
> 
> 赞同：3
> 
> 时间：2013-02-28T20:00:14.507
> 
> 标签：python, regex, return

首先，我是正则表达式的新手。但到目前为止，我爱上了他们。我正在使用正则表达式从我从渲染引擎获得的图像文件名中提取信息。到目前为止，这个正则表达式工作得很好......

```
_([a-z]{2,8})_?(\d{1,2})?(\.|_)(\d{3,10})\.([a-z]{2,6})$ 
```

如果我对文件名使用 split() 方法，例如...

image_file_name_ao.0001.exr

我回来了我可以使用的漂亮小清单....

```
['image_file_name', 'gi', None, '.', '0001', 'exr', ''] 
```

我唯一担心的是它总是最后返回一个空字符串。无论我如何更改或操作正则表达式，它总是在列表末尾给我一个空字符串。我完全可以忽略它并继续前进，但我的问题是我的正则表达式做错了什么，或者我能做些什么让它不通过最后的空字符串？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:16:03.993

难怪。该`split`方法在出现正则表达式时拆分您的字符串（加上返回组范围）。并且由于您的正则表达式仅匹配到达行尾的子字符串（`$`由其末尾`''`的

鉴于您已经`(...)`在表达式中使用了组“”，您也可以使用`re.match(regex, string)`. 这将为您提供一个[`MatchObject`](http://docs.python.org/2/library/re.html#match-objects)实例，您可以从中检索包含您的组的元组[`groups()`](http://docs.python.org/2/library/re.html#re.MatchObject.groups)：

```
# additional group up front
reg='(\S*)_([a-z]{2,8})_?(\d{1,2})?(\.|_)(\d{3,10})\.([a-z]{2,6})$' 
print re.match(reg, filename).groups() # request tuple of group matches 
```

**编辑：我真的很抱歉，但我没有意识到**您的模式从第一个字符开始与文件名字符串不匹配。我在我的回答中扩展了它。如果您想坚持使用`split()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:48:15.200

有趣的问题。

我改变了一点正则表达式的模式：

```
import re

reg = re.compile('_([a-z]{2,8})'

                 '_?(\d\d?)?'

                 '([._])'
                 '(\d{3,10})'
                 '\.'
                 '(?=[a-z]{2,6}$)')

for ss in ('image_file_name_ao.0001.exr',
           'image_file_name_45_ao.0001.exr',
           'image_file_name_ao_78.0001.exr',
           'image_file_name_ao78.0001.exr'):
    print '%s\n%r\n' % ( ss, reg.split(ss) ) 
```

结果

```
image_file_name_ao.0001.exr
['image_file_name', 'ao', None, '.', '0001', 'exr']

image_file_name_45_ao.0001.exr
['image_file_name_45', 'ao', None, '.', '0001', 'exr']

image_file_name_ao_78.0001.exr
['image_file_name', 'ao', '78', '.', '0001', 'exr']

image_file_name_ao78.0001.exr
['image_file_name', 'ao', '78', '.', '0001', 'exr'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T16:09:18.327

您可以使用[过滤器（）](https://docs.python.org/2/tutorial/datastructures.html#functional-programming-tools)

鉴于你的例子，这将像，

```
def f(x):
    return x != '' 

filter
(
    f,
    re.split('_([a-z]{2,8})_?(\d{1,2})?(\.|_)(\d{3,10})\.([a-z]{2,6})$',
    'image_file_name_ao.0001.exr')
) 
```

# list - 添加到序言中的列表

> ID：15144555
> 
> 赞同：0
> 
> 时间：2013-02-28T20:00:17.633
> 
> 标签：list, prolog, add

在练习中，我需要做的第一件事是将一些事实，说明每个地方的存在，放入一个列表中。请有人帮助我。

```
example.
exists(place).
exists(place2). 
```

到目前为止的代码：

```
listarB([]).
listarB([B|T]):- exists(B),listarB(T). 
```

现在我试图获取列表列表。我需要的每个列表都作为我试图获得的每个地方的参数。
现在我有了地点列表，我试图获取每个地点的列表作为参数并将它们存储在另一个列表中（[HL|TL]）

到目前为止的代码：

```
listListBus([],[]).
listListBus([HB|TB],[HL|TL]) :-
   HB = base(_,[_|_],HL),
   listListBus(TB,TL). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:17:05.367

您应该使用`findall/3`来收集所有“存在”的地方：

```
listarB(L):-
  findall(B, exists(B), L). 
```

# symfony - FOSRestBundle：在浏览器上呈现 XML

> ID：15144558
> 
> 赞同：4
> 
> 时间：2013-02-28T20:00:34.447
> 
> 标签：symfony, fosrestbundle

假设我有一个 REST API 调用：

```
/api/message/list 
```

我想根据 HTTP Accept Header 有不同的响应格式。

当我从 curl 命令请求 JSON 或 XML 时，它可以完美运行。但是当我从浏览器加载它时，它会尝试渲染树枝模板，我不希望这样。我希望它返回 XML 内容而不是 HTML。使用这种方法，我不需要为浏览器输出创建一个 twig 文件。

我想这样做是因为在浏览器上拥有 API 输出而不需要为其创建树枝是很实用的。

我在配置文件中遗漏了什么吗？或者，默认情况下当前不支持此功能？

我尝试使用它但不起作用。

```
fos_rest:
    body_listener:
        decoders:
            html: fos_rest.decoder.xml
            ... 
```

我在 config.yml 上的完整 FOSRest 配置：

```
fos_rest:
    param_fetcher_listener: true
    body_listener:
      decoders:
        json: fos_rest.decoder.json
        xml: fos_rest.decoder.xml
        html: fos_rest.decoder.xml
    format_listener:
      default_priorities: [html, xml, json]
      fallback_format: xml
    view:
        view_response_listener: force
        formats:
            json: true
            xml: true
        force_redirects:
            html: true
        failed_validation: HTTP_BAD_REQUEST
        default_engine: php

sensio_framework_extra:
    view:    { annotations: false }
    router:  { annotations: true } 
```

我对控制器的列表操作仅返回消息数组：

```
<?php

use FOS\RestBundle\Controller\Annotations as Rest;

class MessageController extends Controller {

    /**
     * @Rest\View()
     */
    public function listAction() {
        $messages = //get the messages
        return $messages;
    }

    ...
}
?> 
```

谢谢！

# android - android在x中制作位图可绘制图块但在y中不可分层

> ID：15144559
> 
> 赞同：1
> 
> 时间：2013-02-28T20:00:35.590
> 
> 标签：android, drawable

我正在尝试**在 x 中制作位图可绘制重复平铺**，对齐此可绘制视图**底部**（按颜色填充可用空间），因此我的可绘制对象不应在 y 中分层。
我必须达到一个目标。

源背景图片：
![在此处输入图像描述](../Images/d0d1d44a170ac0039cef27830179248e.png)

在大屏幕中填充此图片上方可用空间的颜色：*#FF5cc8f2*

这是**第一个变体**：

```
BitmapDrawable tile = (BitmapDrawable) res
                .getDrawable(R.drawable.background);
        tile.setTileModeX(Shader.TileMode.REPEAT);

        view.setBackgroundColor(res.getColor(R.color.background));
        view.setBackgroundDrawable(tile); 
```

结果：
![第一个变体](../Images/03523c78e393dbea932a1afe2a1fe2d3.png)

**如您所见，我在云层下方有不需要的空白。**

**第二种变体：**

```
BitmapDrawable bd = (BitmapDrawable) res.getDrawable(R.drawable.background);

            WindowManager wm = (WindowManager) AvApplication.getInstance().getSystemService(Context.WINDOW_SERVICE);
            Display display = wm.getDefaultDisplay();
            int width;
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR2) {
                width = display.getWidth();  
            } else {
                Point size = new Point();
                display.getSize(size);
                width = size.x;
            }

            int intrinsicHeight = bd.getIntrinsicHeight();
            Rect bounds = new Rect(0,0,width,intrinsicHeight);
            bd.setTileModeX(TileMode.REPEAT);
            bd.setBounds(bounds);
            Bitmap bitmap = Bitmap.createBitmap(bounds.width(), bounds.height(), bd.getBitmap().getConfig());
            Canvas canvas = new Canvas(bitmap);
            bd.draw(canvas);
            BitmapDrawable bitmapDrawable = new BitmapDrawable(res, bitmap);
            view.setBackgroundDrawable(bitmapDrawable); 
```

结果：
![在此处输入图像描述](../Images/7eaadbe86ae7d651cee961ba3c43064d.png)

**现在图像在底部，但它被拉伸了**

不要在意一个屏幕截图是横向的，第二个是纵向的——结果会在两个方向上进行检查。

我需要你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:34:55.273

我会尝试 ：

```
BitmapDrawable tile = (BitmapDrawable) res.getDrawable(R.drawable.background);
tile.setTileModeX(Shader.TileMode.REPEAT);

tile.setGravity(Gravity.bottom)
tile.setTileModeY(Shader.TileMode.CLAMP); 
// it replicates the edge color if the shader draws outside of its original bounds
//thus you don't even need to set a background color.

view.setBackgroundDrawable(tile); 
```

# php - php preg_replace 有异常

> ID：15144564
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:01:08.070
> 
> 标签：php

我有一个带有一些 tekst 丰富性的字符串，zo 字符串中还有`<b>`一些`<em>`其他的 html 标记。当然，用户也可以将`<script>`或其他内容放入字符串中，但这不是您想要的。我想用 and 替换and ，`<`而不是and 。`>``&lt;``&gt;``<b>``<em>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:03:43.070

看起来你想要一个负面的前瞻：

```
$escaped = preg_replace("(</?(?!(?:b|em)\b))","&lt;",$raw); 
```

请注意，您不需要转义`>`，`&gt;`因为它本身没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:08:49.217

测试这个

```
 $notecomments=" <b> <em> <sf> <script>";
  $output=preg_replace_callback(array("#<(.*?)>#"),function($matches){
switch($matches[1]){
    case 'b':
    case 'em':
      return $matches[0];
    break;
    default:
      return "&lt;".$matches[1]."&gt;";

}
},' '.$notecomments.' ');
  print_r($output); 
```

输出：

```
 <b> <em> &lt;sf&gt; &lt;script&gt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:10:34.350

也许[strip_tags](http://php.net/manual/en/function.strip-tags.php)更适合这个：

```
echo strip_tags($text, '<b><em>'); 
```

# django - 将 Wordpress 提要拉入 Django 模板

> ID：15144565
> 
> 赞同：2
> 
> 时间：2013-02-28T20:01:10.627
> 
> 标签：django, wordpress

我想做的是从我的 wordpress 博客的提要数据中提取标题和 URL，并将其显示为我的 Django 模板中的链接。

我找到[了这个例子](http://codex.wordpress.org/WordPress_Feeds#Categories_and_Tags)

但它在 Django 中并没有被证明是有用的。（我是n00b）。所以我想知道是否有人对我如何获取feeb并将其放入Django应用程序有任何建议？

```
<a href="link-to-feed">Title of blog post</a> 
```

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:42:32.270

基本上，您需要在 Django 视图中解析您的 wordpress 提要，然后将呈现的数据发送到您的模板。

[好的资源](https://stackoverflow.com/questions/9761198/is-there-a-tool-for-parsing-feeds-in-django) 还提要解析器规范：[http://pythonhosted.org/feedparser/](http://pythonhosted.org/feedparser/)

在 Django 视图中使用 Python 解析 XML 进行一些研究

```
1\. Hit the Wordpress Feed URL in view.py
2\. Parse the resulting XML nodes (or feedparser I think)
3\. Extract needed data
4\. Send data to your django template from the view 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T18:51:46.523

我知道这个线程很旧，但我发现这也很有帮助： http: [//geekscrap.com/2010/02/integrate-wordpress-and-django/](http://geekscrap.com/2010/02/integrate-wordpress-and-django/)

我正在使用选项 2，xmlrpc。这是示例的 github 页面

[https://github.com/maxcutler/python-wordpress-xmlrpc/blob/master/docs/examples/posts.rst](https://github.com/maxcutler/python-wordpress-xmlrpc/blob/master/docs/examples/posts.rst)

就像另一个答案一样，这直接来自 rss 提要。我不知道这个解决方案与另一个解决方案相比的性能如何，抱歉。

# c# - 如何在 Visual Studio 启动时显示一个对话框。- VS 扩展

> ID：15144566
> 
> 赞同：5
> 
> 时间：2013-02-28T20:01:12.677
> 
> 标签：c#, visual-studio-2010, visual-studio-addins, visual-studio-extensions

我正在构建一个 Visual Studio 扩展，但我对在启动 Visual Studio 时如何显示对话框感到困惑。

它的主要用途是当 Visual Studio 启动时，我的扩展程序将检查更新，如果发现更新，则会出现一个对话框。

关于扩展的信息非常稀缺，所以我不知道如何做到这一点。我正在使用 C#。

编辑：我已经尝试将包含所有命令代码/回调的包文件中的代码添加到它的初始化事件中，它会在 Visual Studio 似乎已经加载之前显示对话框，并且在我关闭它之前不会继续加载。虽然我觉得我越来越近了。

它们是我可以在 VSCT 文件中创建的扩展启动命令吗，有点像菜单项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T17:35:43.980

我能够弄清楚我的问题。由于缺乏信息，它需要大量的试验和错误。我最初尝试了 OnStartupcomplete() 事件，但它对我不起作用，因此我来到了这里。它不工作的原因是因为 DTE 对象当时没有初始化。所以我能够创建对象并添加处理程序。

```
[ProvideAutoLoad(Microsoft.VisualStudio.Shell.Interop.UIContextGuids.NoSolution)]
[ProvideAutoLoad(VSConstants.UICONTEXT.SolutionExists_string)]

 protected override void Initialize()
    {
       //DTE gets called
        var dte = (EnvDTE.DTE)GetService(typeof(EnvDTE.DTE));
        _EventsObj = dte.Events.DTEEvents;
        _EventsObj.OnStartupComplete += OnStartupComplete;

    }

        public void OnStartupComplete()
    {
        //This is the code to launch the dialog.

        EvaluationDialog EvalForm = new EvaluationDialog();
        EvalForm.ShowDialog();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:33:42.300

我假设您正在使用 Visual Studio 加载项项目。如果您只需要一个消息框，请在*Connect.cs*文件中添加对的引用`System.Windows.Forms`和`using`语句：

```
using System.Windows.Forms; 
```

在`OnConnection`方法中：

```
public void OnConnection(object application, 
    ext_ConnectMode connectMode, 
    object addInInst, ref Array custom)
{
    MessageBox.Show("message box");

    // or you could use your on dialog class
    var myDialog=new MyDialog();
    myDialog.Show();

    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:59:56.000

我们正在使用 OnAfterOpenProject。您可以检查更新并在找到时弹出对话框。

# android - ListFragment 不会刷新

> ID：15144568
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:29.760
> 
> 标签：android, contextmenu, fragment

这是我的 ListFragment 中的代码（我使用的是上下文菜单）：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
            .getMenuInfo();
    Log.d(TAG, "onContextItemSelected clicked");
    long id = info.id;
    Log.d(TAG, "list id " + id);

    int menuItemIndex = item.getItemId();
    Log.d(TAG, "menuItemIndex " + menuItemIndex);
    if (menuItemIndex == 0) {
        try {
            plantManager.deletePlantRelation(id);
            CharSequence text = getActivity().getString(
                    R.string.info_could_delete_plant);
            Toast toast = Toast.makeText(getActivity(), text,
                    Toast.LENGTH_LONG);
            toast.show();
            loader = getLoaderManager().restartLoader(0, null, this);
            myAdapter.notifyDataSetChanged();
        } catch (Exception ex) {
            ex.printStackTrace();
            CharSequence text = getActivity().getString(
                    R.string.info_could_not_delete_plant);
            Toast toast = Toast.makeText(getActivity(), text,
                    Toast.LENGTH_LONG);
            toast.show();
        }
    }
    return true;
} 
```

该方法被执行，我得到了 Toast-Message - 但列表不会刷新。

期待您的帮助。

提前致谢！

更新：

```
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

        return new CursorLoader(getActivity()) {
            @Override
            public Cursor loadInBackground() {
                myCursor = plantManager.fetchPlantRelations();
                return myCursor;
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:14:10.510

您不仅不需要对 LoaderManager 进行重置，也不需要*在适配器上进行 notifyDataSetChanged，您实际上**也不*应该这样做。执行此操作的正确方法是确保 fetchPlantRelations() 返回的游标已注册用于特定 URI 上的通知。如果您随后使对基础数据集的更改（例如由 deletePlantRelation 引起的更改）通知该 URI，则其余的将完全自动发生。在此处查看代码：

[https://github.com/marakana/yamba/blob/yambaII/YambaService/src/com/marakana/android/yamba/svc/data/YambaProvider.java](https://github.com/marakana/yamba/blob/yambaII/YambaService/src/com/marakana/android/yamba/svc/data/YambaProvider.java)

尤其是第 182 行和第 242 行。这就是它的全部内容。

# c# - 库只是新的命令集吗

> ID：15144569
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:30.987
> 
> 标签：c#, libraries

我是编程新手，我有一些关于库的问题。（如果有些问题看起来很愚蠢，请原谅。） - 首先，当我搜索什么库时，我被告知它们是可重用的代码。但是当我用谷歌搜索时，例如如何开发一个带有 C# 的网站我发现我需要一个库。这个库只是我可以使用的一组命令吗？或者它可以让你直观地创建一个网站吗？- 此外，在一个游戏设计软件中，我看到它需要 C# 代码来实现角色移动速度。这意味着该软件有自己的库，需要我学习新命令？任何额外的信息都会很好。

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:12:02.527

让我们回到冰箱里电脑之前的日子，把每个图书馆想象成一种秘书或文员，拥有非常特定的技能。所以你有了：

*   速记员图书馆
*   一个打字员图书馆
*   外发传真员
*   一位接待员
*   A/P 文员等

您作为办公室（项目）的经理，不想担心每项任务的细节，因此您将每一项委派给适当的文员或秘书类型，而只担心业务的更高功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:05:40.173

库或多或少只是一段编译的代码；或者，一个`.dll`。为了在您的项目中使用它，您将添加对程序集（或`.dll`）的引用，然后使用您（或您使用它的任何地方）中的`using`语句访问它。`class`像这样的东西：

```
using System.Data.SqlClient; 
```

您可以通过多种方式在 .NET 堆栈中构建网站，例如[ASP.NET](http://www.asp.net/) / [MVC](http://www.asp.net/mvc)。

至于您关于游戏领域的问题，[XNA](http://msdn.microsoft.com/en-us/library/bb203940.aspx)框架几乎拥有您开始制作游戏所需的一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T20:06:19.240

库包含您要添加到应用程序的某些功能。在一个非常简化的示例中：如果您希望您的应用程序能够在您的计算机上读取和写入文本文件，您需要导入一个用于**帮助**您读取和写入文件的库。

当然，你不必使用这个库，你可以自己编写。但这会浪费时间，因为有人已经创建了一个易于使用的函数，例如“嘿，去获取这个文件”或“嘿，把这个写到一个名为 FooBar.txt 的文件中”

它是预编译的，**通常**可以按预期工作，因为在您之前有成千上万的人使用过它并对其进行了测试。

# python - 将乘数应用于随机结果数

> ID：15144570
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:33.317
> 
> 标签：python

新手在这里。

好吧，长话短说，我制作了一个 var，它将输出 70 到 155 之间的随机数：

```
T_dmg = random.randrange(70,155) 
```

这是我的“乘数”：

```
def crit(cr):
    return cr * 2 
```

Crit 代表关键，但我不确定如何使用“return”语句。所以我在数字相加之前将此函数添加到该行：

```
if Toni > 0:
        crit(T_dmg)
        Xoni = Xoni - T_dmg 
```

问题是输出永远不会成倍增加，因为不知何故，“暴击”功能似乎不适用于它。Xoni 是一个值为 7000 的变量。如果这没有意义，我正在使用游戏概念中的 HP。我希望你们中的任何人都可以有所启发。

谢谢！

编辑：机会码：

```
def critchance():
    random.randrange(1,10)
    if critchance() == "3"
    crit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:05:16.383

该函数返回一个值 - 它不会更改输入变量。您仍然必须分配`T_dmg`给函数的输出。

```
T_dmg = crit(T_dmg) 
```

否则`T_dmg`将保持不变，给你“奇怪”的结果。

你的`critchance`函数也关闭了——它是无限递归的。我们需要解决这个问题。此外，您似乎正在调用`crit`没有参数的函数。您可能应该将`T_dmg`其作为参数传递给此函数。

```
def critchance(cr):
    if random.randrange(1, 10) == 3:
        return crit(cr)
    return cr 
```

然后调用它，执行此操作。

```
T_dmg = critchance(T_dmg) 
```

# java - 两个运算符之间的 AND 是如何工作的？

> ID：15144571
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:34.220
> 
> 标签：java, php, eclipse, netbeans, logic

我有这个代码，它的结果是'2'。我用谷歌搜索和搜索书籍，但没有找到对我有帮助的好答案。

```
int i = 2;
int j = 3;
int x = i & j;
System.out.println (x); 
```

谁能解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:04:06.817

在这里，'&' 是[按位和运算符](http://www.leepoint.net/notes-java/data/expressions/bitops.html)。只有在两个操作数中都设置了位时，才会在结果中设置位：

这是操作：

```
 2: 00000010
& 3: 00000011
-----------
  2: 00000010 
```

当然，这里的整数是 32 位的，我只显示了最后 8 位，但无论如何，前 24 位对于这些数字都是零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:05:29.987

它是一个位运算符。

二进制中的 2 是“10”。二进制中的 3 是“11”。按位 & 运算符比较它们，如下所示：

```
 10
&11
 --
 10 
```

对于两个数字都为 1 的每一列，它将返回 1。在这种情况下，结果为 '10'，作为 int 等于 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:04:05.957

& 是按位与
&& 是逻辑与。

2 & 3 正确交付 2。

以二进制表示：

```
10
 11
 --
 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T20:04:11.613

`&`是一个按位运算符，其工作方式如下：

```
0 & 0 = 0
1 & 0 = 0
0 & 1 = 0
1 & 1 = 1 
```

因此`2 & 3 = 2`：

```
2 ==> 00000000000000000000000000000010
      &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
3 ==> 00000000000000000000000000000011
---------
2 ==> 00000000000000000000000000000010 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T20:07:27.990

举这些例子：

```
System.out.println(2 & 3);
System.out.println(3 & 4);
System.out.println(8 & 4);
System.out.println(9 & 5);
System.out.println(11 & 7);
// binary representation of above operations
System.out.println(0b10 & 0b11);
System.out.println(0b11 & 0b100);
System.out.println(0b1000 & 0b100);
System.out.println(0b1001 & 0b101);
System.out.println(0b1011 & 0b111); 
```

它们导致输出：

```
2
0
0
1
3
2
0
0
1
3 
```

然后返回并查看二进制表示并注意结果答案如何是数字的按位与（而不是逻辑与 &&）

# c++ - 无法访问朋友班的私人成员

> ID：15144573
> 
> 赞同：1
> 
> 时间：2013-02-28T20:01:41.870
> 
> 标签：c++, header, private, friend

有人介意帮助我解决 C++ 链接/编码难题吗？

我有一个类形状。Shape 需要使用类 Center 的私有数据成员，x 和 y 坐标。我声明朋友类Shape；然后 #include "center.h" 在 Shape.h 中。在 Shape.cpp 中，我定义了我的 ostream& operator<< (ostream& ostr, const Center& c) 函数，它使用 c.xCord; c.yCord 访问中心的私人数据成员。

当我尝试编译 Shape.cpp 时，我会遇到这些数据变量的访问错误，例如我没有将 Shape 声明为友元类。我感觉这与编译时的链接顺序有关。我怎样才能解决这个问题？

```
#ifndef CENTER_H
#define CENTER_H

class Center
{
    public:
        Center(double x, double y) { xCord = x; yCord = y; }
            // constructor
        friend class Shape;
            // allow Shape to use Center's x and y values

    private:
        double xCord;
            // X-coordinate
        double yCord;
            // Y-coordinate
};

#endif

#ifndef SHAPE_H
#define SHAPE_H

#include "center.h"
#include <iostream>
using namespace std;

class Shape
{
    public:
        Shape(double x, double y) : s_center(x, y) {}
            // constructor
        void moveCenter();
            // moves the center of the shape
        friend ostream& operator<< (ostream& ostr, const Center& c);
            // allows the printing of the Center object

        virtual void printCenter();
            // returns the center of the shape
        virtual double printArea();
            // returns the area of the shape

        virtual bool checkSurface(Shape& s) = 0;
            // checks if the shape can fit into
            // a given surface
        virtual double findArea() = 0;
            // calculates the area of the shape

    private:
        Center s_center;
            // center of the shape
};

#endif

// in shape.cpp
ostream& operator<< (ostream& ostr, const Center& c)
{
    ostr << "(" << c.xCord << ", " << c.yCord << ")";
    return ostr;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:03:53.790

根据 C++11 标准的第 11.3/10 段：

> 友谊既不是遗传的**，也不是传递**的。[...]

如果 class`A`是 class 的 a `friend`，`B`而 function`f()`是`friend`class的 a `A`，这也不会成为class`f()`的 a 。`friend``B`

如果您希望它访问以下私有成员变量，则应声明您的`operator <<`as `friend`of 类：`Center``Center`

```
#ifndef CENTER_H
#define CENTER_H

#include <ostream>

class Center
{
public:
    Center(double x, double y) { xCord = x; yCord = y; }

    friend class Shape;
    friend std::ostream& operator<< (std::ostream& ostr, const Center& c);
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

private:
    double xCord;
    double yCord;
};

#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:08:16.337

您的运算符 << 与 Shape 类无关。友谊不会延伸到运营商。您需要将该特定运算符声明为朋友。

# javascript - 在 Javascript 中调用函数时，对象和参数列表之间是否有任何自动映射？

> ID：15144575
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:47.680
> 
> 标签：javascript

我的问题是在看到方法 Jquery.clone() 之后出现的

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

此方法有 3 个可选参数，但不需要全部提供。您可以使用您感兴趣的属性简单地创建一个 JSON。

似乎对象字段和函数参数之间存在自动映射。这是由函数作者自动完成还是手动完成？

例如，我只能通过以下方式使用第二个参数调用它：

```
$('aSelector').clone({withDataAndEvents: true}); 
```

或者

```
$('aSelector').clone(null true); 
```

我想编写这样的函数而不测试提供的参数是否实际上是一个对象或一个普通参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:07:49.157

我想，这就是来源

```
clone: function( dataAndEvents, deepDataAndEvents ) {
    dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
    deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

    return this.map( function () {
        return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
    });
}, 
```

可以看到作者检查了参数是否设置。答案是“手动”

# hadoop - Hadoop map-reduce：分组时的记录顺序

> ID：15144578
> 
> 赞同：0
> 
> 时间：2013-02-28T20:01:53.893
> 
> 标签：hadoop, mapreduce

我在每行输入中都有一条记录，每条记录大约有 10 个字段。首先，我将记录按三个字段分组，`(field1, field2, field3)`因此一个映射器/还原器负责一个唯一组（基于三个字段）。在每个组中，我根据另一个整数字段对记录进行排序，并通过添加另一个字段`timestamp`将组中的每个记录标记为相同的标签。`aTag`

假设在 mapper#1 中，我将一个排序组标记为`aTag`，在 mapper#2 中，我用相同的 tag 标记另一个组（一个不同的组，因为我最初根据三个字段对记录进行分组）`aTag`。

现在，如果我根据标签字段对记录进行分组（即，在不同的映射器中对组进行分组），我注意到每个组内的顺序不再保留。我期待由于每个映射器都有一个所有记录都具有相同标签的组，因此按标签名称进行分组应该只涉及从其他映射器获取相关组并将它们连接起来而无需重新排序每个单独的组。

是因为我试图以 gzip 格式存储记录，因此它试图重新排序记录以获得更好的压缩吗？另外我想知道如何在按标签名称分组后保留订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:49:39.997

似乎您正在尝试自己在本地内存中实现 MapReduce 的排序步骤，但随后它完全忽略了您所做的并重新排序每个组中的项目。解决此问题的正确方法是在键上指定一个比较器，以便在每个分区内，以便归约器的合并输入根据该比较函数。这意味着

1.  您不必自己进行排序
2.  您不会在一台机器上尝试对一个非常大的组进行排序时内存不足。

在您的情况下，您似乎想要添加`timestamp`到键集中，告诉它对前三个键进行分区，并告诉它对时间戳进行排序。

更多信息见下图，[MapReduce阶段Sort在哪里使用，为什么？](https://stackoverflow.com/questions/11746311/where-is-sort-used-in-mapreduce-phase-and-why)

![在此处输入图像描述](../Images/035f1aa75679c5059cb3e53e045346f6.png)

# javascript - 这个函数有闭包吗？

> ID：15144580
> 
> 赞同：2
> 
> 时间：2013-02-28T20:01:58.553
> 
> 标签：javascript, scope, closures

我从这里 ( [http://ejohn.org/apps/learn/#19](http://ejohn.org/apps/learn/#19) ) 获得的这个函数，即使它没有任何内部函数在外部函数之后传递的值的“记录”持续存在结束，具有某种类型的数据缓存。事实上，缓存属性中的值在调用该函数后仍然存在。我想知道这是否是一种闭包：

```
function getElements( name ) { 
  var results; 

  if ( getElements.cache[name] ) { 
    results = getElements.cache[name]; 
  } else { 
    results = document.getElementsByTagName(name); 
    getElements.cache[name] = results; 
  } 

  return results; 
} 
getElements.cache = {}; 
```

我不确定它是否适用于函数属性或仅适用于引用的函数。我仍然对闭包感到困惑，所以也许我在胡说八道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:03:39.913

不，没有闭包，但是一个函数，就像任何其他 javascript 对象一样，可以接收属性，这就是这里发生的事情。

`getElements`是一个对象，因此您可以为`getElements.cache`.

这是不使全局命名空间混乱的另一种方式，可能比使用闭包要轻一些，但由于属性不是私有的（它可以很容易地访问）并且（理论上）可能导致名称冲突，所以不太干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:04:38.400

Javascript 中的任何函数都是对象。存储在函数上的`cache`属性对于`getElements`函数的所有调用都是相同的。

这里不涉及关闭。

# html - 在 Gmail 中将 HTML 电子邮件的正文居中

> ID：15144586
> 
> 赞同：0
> 
> 时间：2013-02-28T20:02:17.963
> 
> 标签：html, css, email

我正在重温基于表格的布局的辉煌岁月，因为我正在编写 HTML 电子邮件。不幸的是，我无法让正文在页面上居中（它当然可以在浏览器中使用，但在通过[HTML Mails](http://ctrlq.org/html-mail/)在 Gmail 中进行测试时却不行。我希望嵌套在第一个中的表格`<td>`在外部表。内部表设置为固定宽度，所以我希望它可以工作。有什么想法吗？

这是完整的代码（[小提琴](http://jsfiddle.net/W4AKA/3)）：

```
<table width="100%">
<tr>
    <td width="100%" align="center">
        <table width="600" height="100%">
            <tr>
                <td width="100%">
                    <table cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td style="border-top: 1px solid #DFC6B2; border-bottom: 1px solid #DFC6B2;">
                                            <table cellpadding="0" cellspacing="0">
                                                <tr>
                                                    <td width="250" height="40" style="border-top: 1px solid #E30023; border-bottom: 1px solid #E30023;"></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td width="100" height="100">
                                            <img src="" width="100" height="100">
                                            </a>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td style="border-top: 1px solid #DFC6B2; border-bottom: 1px solid #DFC6B2;">
                                            <table cellpadding="0" cellspacing="0">
                                                <tr>
                                                    <td width="250" height="40" style="border-top: 1px solid #E30023; border-bottom: 1px solid #E30023;"></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table cellpadding="20">
                        <tr>
                            <td width="100%" style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:13px;">
                                 <h1 align="left" style="font-weight:100;margin-top:20px;">Header</h1>

                                <p style="font-family: Georgia, serif;">Body</p>
                            </td>
                        </tr>
                    </table>
                    <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td width="275" height="1" style="border-top: 1px solid #DFC6B2;"></td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td width="50" height="50">
                                            <img src="" width="50" height="50" />
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td width="275" height="1" style="border-top: 1px solid #DFC6B2;"></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-09T16:21:26.720

就我个人而言，我喜欢将我的整个正文内容（甚至是响应式电子邮件上的移动版本）包装在一个 100% 宽度的表格中（gmail 可能会剥离它，但无论如何它都会假设 100%）。诀窍是 td 的对齐中心。前任-

```
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse; padding:0; margin:0px;">
    <tr valign="top">
        <td align="center">
            <table with whatever width you want your max width to be>
        </td>
    </tr>
</table> 
```

您也可以`bgcolor`为您的包装表分配一个，即使在通常会去除背景颜色的网络邮件客户端中，它也会为您的电子邮件提供背景颜色`body`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:35:44.290

当我检查 Litmus 时，您的代码运行良好。我唯一担心的是您可能需要在以下内容中添加“text-align:left”以使副本在 Gmail/IE 上与左侧对齐。

```
<p style="font-family: Georgia, serif; text-align: left;">Body</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:15:11.673

您是否尝试将 text-align css 样式添加到 body 的 p 元素？

```
<p style="font-family: Georgia, serif;text-align:center;">Body</p> 
```

您将 p 居中在单元格内，但不是其内容。或者删除 p 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:27:42.320

感谢您的建议，但经过进一步调查，我发现 Gmail 实际上是`width="100%"`从外部表中剥离属性。目前，我认为没有任何方法可以让 Gmail 窗口中的内容居中。

# javascript - Rally javascript 什么也不显示，查询有问题

> ID：15144589
> 
> 赞同：1
> 
> 时间：2013-02-28T20:02:22.530
> 
> 标签：javascript, rally

我正在尝试基于选定的迭代进行查询，并根据该迭代的故事显示一些结果。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html>
<head>
   <meta name="Name" content="SubField Query" />
   <title>SubField Query Example</title>
   <script src="/apps/1.26/sdk.js"></script>
   <script type="text/javascript">
   function onLoad() {
    rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                '__PROJECT_OID__',
                                '__PROJECT_SCOPING_UP__',
                                '__PROJECT_SCOPING_DOWN__');

    var iterConfig = {};
        iterDropdown = new rally.sdk.ui.IterationDropdown(iterConfig, rallyDataSource);
        iterDropdown.display(document.getElementById("test"), onSelected);
        rallyDataSource.findAll(queryConfig, showStories);

}

function showStories(results) {
        var info = document.getElementById("info");
        info.innerHTML = "<b>Iteration Story Information</b><br>";
        var story;
        for (var i = 0; i < results.stories.length; i++){
             story = results.stories[i];
             info.innerHTML += story.Name + ' - ' + story.Owner + ' - ' + story.Project + ' - ' + story.State + ' - ' + story.PlanEst + '<br>';
        }
    };

function onSelected() {
    var queryConfig = {
    type: 'hierarchicalrequirement',
    key: 'stories'
    query: '(Iteration.Name =' + iterDropdown.getSelectedName() + ')'
    fetch: 'Name, Owner, Project, State, PlanEst'
    }
   }
  rally.addOnLoad(onLoad);
</script>
</head>
<body>
<h1>Test Report Page</h1>
<div id = "test"></div>
<div id = "info"></div>
</body>
</html> 
```

我在理解程序流程时遇到了一些麻烦。我看到它的方式，onLoad 运行，并且在 onLoad 中它调用 onSelected 函数来创建一个查询，然后在 findAll 命令中使用该查询来运行所述查询。我曾尝试在各个地方移动 showStories，看看是否会改变结果，但它什么也没做。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:40:37.630

javascript 和回调的异步特性一开始可能有点吓人。你真的很亲近。这是一些固定的代码：

```
function onLoad() {
    //code snipped above
    //display the iteration dropdown and call onSelected when it's ready
    iterDropdown.display(document.getElementById("test"), onSelected);
}

function onSelected() {
    var queryConfig = {
        type: 'hierarchicalrequirement',
        key: 'stories',
        query: '(Iteration.Name = "' + iterDropdown.getSelectedName() + '")', //include quotes around name
        fetch: 'Name,Owner,Project,State,PlanEst' //no spaces in fetch
    };

    //call rallyDataSource.findAll here, and showStories will be called with the data
    rallyDataSource.findAll(queryConfig, showStories);
}

function showStories(results) {
    //show stories here
}

//program execution starts here
rally.addOnLoad(onLoad); 
```

所以基本流程是onLoad、onSelected、showStories。

# datagrid - IE8 未检测到 Kendo-ui datagrid mousedown

> ID：15144590
> 
> 赞同：2
> 
> 时间：2013-02-28T20:02:22.857
> 
> 标签：datagrid, kendo-ui, mousedown

这与 Chrome 完美配合，但 IE8 没有触发此操作。我尝试了下面的代码。我在 chrome 中看到该消息，但 IE8 没有显示它，这让我认为它无法识别此方法：

```
$('#datasheetGrid').data('kendoGrid').tbody.on('mousedown',function(e){
     if(e.altKey || event.button == 2){
         alert('');
     }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:51:22.327

而是将事件附加到基础元素。

```
$('#datasheetGrid').data('kendoGrid').element.on('mousedown',function(e) {
     if (e.altKey || e.button == 2){
         alert('Clicked!');
     }
}); 
```

# java - StAX 找到相应的结束标签？

> ID：15144592
> 
> 赞同：0
> 
> 时间：2013-02-28T20:02:27.963
> 
> 标签：java, xml, stax

是否有可能/是否有一种简单的方法可以找到与 START_ELEMENT 对应的结束标记 (END_ELEMENT)，如下所示？

```
while(reader.hasNext()){
        XMLEvent event = reader.nextEvent();

        if(event.getEventType() == XMLEvent.START_ELEMENT){
            StartElement startElement = event.asStartElement();
            System.out.println(startElement.getName().getLocalPart());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:31:25.413

如果您通过简单的方法调用返回结束元素，那么答案是否定的。SAX 解析器是基于事件的解析器，因此它会读取您的 XML 文件并创建事件。处理这些事件并在这些事件发生时建立您的记忆结构取决于您。

也许您应该使用一个 DOM 解析器，它在内存中构建 XML 结构并且您可以在其中导航。或者使用一些将 XML 转换为 java 对象的 xml bindig（例如 JAXB），反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:03:02.800

我能想到的最简单的方法是：

*   创建一个`StreamFilter`具有内部*深度*计数器；它的`accept`方法将：
    *   每次有事件递增，每次有事件`START_ELEMENT`递减`END_ELEMENT`
    *   `true`当且仅当深度为零时返回
*   当您遇到特定的开始标签时，从`FilterReader`基于此过滤器的原始流中读取：

然后

```
 if(event.getEventType() == XMLEvent.START_ELEMENT){
        StartElement startElement = event.asStartElement();
        System.out.println(startElement.getName().getLocalPart());
        if (/* you want the end of this start tag */) {
          Reader forwardToMatchingEndReader = xmlInputFactory.createFilterReader(reader, filter)
          XMLEvent matchingEndEvent = forwardToMatchingEndReader.next();
        }
    } 
```

# ios - 在非主线程上添加子视图不显示

> ID：15144593
> 
> 赞同：0
> 
> 时间：2013-02-28T20:02:29.727
> 
> 标签：ios, objective-c, multithreading, nsthread

我创建一个 UIView contentView 并显示它。然后我从服务器获取数据并创建一堆显示数据的子视图。我在等待数据时使用 MBProgressHUD 显示。

```
if (datasetSubBar.panels == nil) {
    MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:datasetSubBar.filterListView animated:YES];

    HUD.labelText = @"Creating Panels";

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        [datasetSubBar createPanels];

        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:datasetSubBar.filterListView animated:YES];
        });
    });
} 
```

在`createPanels`方法中，我获取数据然后创建面板。面板被创建，添加到 filterListView（内容视图），然后添加约束：

```
for (int i = 0; i < panels.count; i++) {
    NSLog(@"thread: %@", [NSThread currentThread]);

    NSDate *startDate = [NSDate date];

    DatasetFilterListPanelView *panel = [panels objectAtIndex:i];

    [contentView addSubview:panel];

    // add constraints to position each panel
} 
```

这些是在一个单独的线程上运行的，这就是我认为的问题所在。UI 只能在主线程上更新。

我尝试添加：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [contentView addSubview:panel];
}); 
```

但这会引发约束错误（约束没有引用它，因为它在不同的线程中）。

如果我`createPanels`在主线程上运行，面板将显示，但它也会锁定 UI 直到完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:34:41.963

我不确定违反了哪些约束，但您也可以尝试：

```
[contentView performSelctorOnMainThread:@selector(addSubview) withObject:panel waitUntilDone:YES]; 
```

代替

```
dispatch_async(dispatch_get_main_queue(), ^{
    [contentView addSubview:panel];
}); 
```

不确定这是否会有所帮助。

# objective-c - 使用媒体键跳过曲目

> ID：15144600
> 
> 赞同：1
> 
> 时间：2013-02-28T20:02:52.180
> 
> 标签：objective-c, core-audio

我只是使用以下代码（来源：[https](https://stackoverflow.com/a/10520629/1213411) ://stackoverflow.com/a/10520629/1213411 ）来播放/暂停音乐。现在我想跳过当前曲目并跳下一个。所以我用代码`HIDPostAuxKey(NX_KEYTYPE_NEXT);`来做到这一点。但这似乎不起作用？有谁知道为什么这不起作用？

提前致谢！

```
// Save as sound_up.m
// Compile: gcc -o sound_up sound_up.m -framework IOKit -framework Cocoa

#import <Cocoa/Cocoa.h>
#import <IOKit/hidsystem/IOHIDLib.h>
#import <IOKit/hidsystem/ev_keymap.h>

static io_connect_t get_event_driver(void)
{
    static  mach_port_t sEventDrvrRef = 0;
    mach_port_t masterPort, service, iter;
    kern_return_t    kr;

    if (!sEventDrvrRef)
    {
        // Get master device port
        kr = IOMasterPort( bootstrap_port, &masterPort );
        check( KERN_SUCCESS == kr);

        kr = IOServiceGetMatchingServices( masterPort, IOServiceMatching( kIOHIDSystemClass ), &iter );
        check( KERN_SUCCESS == kr);

        service = IOIteratorNext( iter );
        check( service );

        kr = IOServiceOpen( service, mach_task_self(),
                            kIOHIDParamConnectType, &sEventDrvrRef );
        check( KERN_SUCCESS == kr );

        IOObjectRelease( service );
        IOObjectRelease( iter );
    }
    return sEventDrvrRef;
}

static void HIDPostAuxKey( const UInt8 auxKeyCode )
{
  NXEventData   event;
  kern_return_t kr;
  IOGPoint      loc = { 0, 0 };

  // Key press event
  UInt32      evtInfo = auxKeyCode << 16 | NX_KEYDOWN << 8;
  bzero(&event, sizeof(NXEventData));
  event.compound.subType = NX_SUBTYPE_AUX_CONTROL_BUTTONS;
  event.compound.misc.L[0] = evtInfo;
  kr = IOHIDPostEvent( get_event_driver(), NX_SYSDEFINED, loc, &event, kNXEventDataVersion, 0, FALSE );
  check( KERN_SUCCESS == kr );

  // Key release event
  evtInfo = auxKeyCode << 16 | NX_KEYUP << 8;
  bzero(&event, sizeof(NXEventData));
  event.compound.subType = NX_SUBTYPE_AUX_CONTROL_BUTTONS;
  event.compound.misc.L[0] = evtInfo;
  kr = IOHIDPostEvent( get_event_driver(), NX_SYSDEFINED, loc, &event, kNXEventDataVersion, 0, FALSE );
  check( KERN_SUCCESS == kr );

}

int main(int argc, char *argv[]) {
  HIDPostAuxKey(NX_KEYTYPE_SOUND_UP);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T00:49:34.923

您可能已经找到了这个，但如果您使用`NX_KEYTYPE_FAST`而不是`NX_KEYTYPE_NEXT`.

# java - 使用 ClassLoader 递归加载类时出现 NoClassDefFoundError

> ID：15144601
> 
> 赞同：0
> 
> 时间：2013-02-28T20:02:56.593
> 
> 标签：java, classloader, directory-walk

我正在使用`FileWalker`从指定文件夹中走动并查找`.class`文件夹中的所有文件以及任何后续子文件夹，以便我可以使用`ClassLoader`然后使用反射来加载它们以获取类中声明的字段和方法。

这对于大多数文件来说都很好，`.class`但我有时会`NoClassDefFoundError`在尝试加载一个类时得到一个，我认为这与文件的位置有关。我将用一个例子来说明我的问题。

如果我有以下目录结构：

```
D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader
│
├───+bin
│       ReadFile.class
│
└───+src
        ReadFile.java 
```

我给出了`FileWalker`的起始目录，`D:\Users\Ste\.....\Project Tests\File Reader`它很高兴地找到了`.class`文件并使用`ClassLoader`.

但是，如果我将子文件夹添加到我的`src`和`bin`文件夹中，如下所示：

```
D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader
    │
    ├───+bin
    │   │   ReadFile.class
    │   │
    │   └───+Test
    │           TestClass.class
    │
    └───+src
        │   ReadFile.java
        │
        └───+Test
                TestClass.java 
```

当程序尝试加载`TestClass.class`它给我这个错误

```
!SESSION 2013-02-28 19:54:14.495 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_13
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_GB
Framework arguments:  -product ste.wootten.honoursproject.product -clearPersistedState
Command-line arguments:  -product ste.wootten.honoursproject.product -data D:\Users\Ste\Documents\Uni Year 3\Project\Implementation/../runtime-honoursproject.product -dev file:D:/Users/Ste/Documents/Uni Year 3/Project/Implementation/.metadata/.plugins/org.eclipse.pde.core/honoursproject.product/dev.properties -os win32 -ws win32 -arch x86_64 -consoleLog -clearPersistedState

!ENTRY org.eclipse.e4.ui.workbench 4 0 2013-02-28 19:54:27.243
!MESSAGE Unable to create class 'ste.wootten.honoursproject.mainpart.CreateMainUI' from bundle '65'
!STACK 0
org.eclipse.e4.core.di.InjectionException: java.lang.NoClassDefFoundError: TestClass (wrong name: Test/TestClass)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1114)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:103)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.advanced.impl.PerspectiveStackImpl.setSelectedElement(PerspectiveStackImpl.java:135)
    at org.eclipse.e4.ui.model.application.ui.advanced.impl.PerspectiveStackImpl.setSelectedElement(PerspectiveStackImpl.java:1)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:103)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:639)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:964)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.start(E4Application.java:150)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NoClassDefFoundError: TestClass (wrong name: Test/TestClass)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.visitFile(ReflectOnClasses.java:136)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.visitFile(ReflectOnClasses.java:1)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:135)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:69)
    at java.nio.file.Files.walkFileTree(Files.java:2591)
    at java.nio.file.Files.walkFileTree(Files.java:2624)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.startFileWalk(ReflectOnClasses.java:39)
    at ste.wootten.honoursproject.mainpart.CreateMainUI.selectDirectoryAndBeginFileWalk(CreateMainUI.java:258)
    at ste.wootten.honoursproject.mainpart.CreateMainUI.createInterface(CreateMainUI.java:159)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    ... 104 more 
```

我已经在很多其他目录上对此进行了测试，并且出现了同样的问题。这似乎是由`.class`子文件夹中的文件引起的，但我不知道为什么。

这是我遍历文件系统并加载`.class`找到的文件的代码：

```
package ste.wootten.honoursproject.mainpart.reflection;

import ste.wootten.honoursproject.mainpart.CreateMainUI;

public class ReflectOnClasses extends SimpleFileVisitor<Path> {

    //Starts the file walk from a starting directory
    public static void startFileWalk(String directory){

        //The startingDir is the directory the user selects on the MainUI Part
        Path startingDir = FileSystems.getDefault().getPath(directory, "");

        //Create an instance of my FileVisitor
        ReflectOnClasses reflectOnClasses = new ReflectOnClasses();

        try {
            //Walk the files from my startingDir using reflectOnClasses
            Files.walkFileTree(startingDir, reflectOnClasses);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("An Error Occured");
            e.printStackTrace();
        }
    }

    //Visit files and do something with them
    @Override
    public FileVisitResult visitFile(Path file, BasicFileAttributes attr) {

        //If we find a .class file get it and reflect upon it
        if(file.toString().endsWith(".class")){

            //String holding the files parents directory
            String filesParentDir = file.getParent().toString();

            //Create a File object on the root of the directory containing the class file (it's parent directory)
            File parentDir = new File(filesParentDir);

            try{

                //Convert parentDir to URL
                URL url = parentDir.toURL();
                URL[] urls = new URL[]{url};

                //Create a new class loader with the directory
                ClassLoader cl = new URLClassLoader(urls);

                //Get the name of the file with .class removed from the end so we can load it
                String classToLoad = file.getFileName().toString().replace(".class", "");

                //Load in the class
                Class cls = cl.loadClass(classToLoad);

                //Pass the name of the class to addClassToVariableTree in CreatUI so it can be added as a TreeItem
                CreateMainUI.addClassToVariableTree(classToLoad);
                //Do the same for addClassToMethodTree
                CreateMainUI.addClassToMethodTree(classToLoad);

                //Array of the declared fields in the class
                Field[] fieldsInClass = cls.getDeclaredFields();

                //For each field in fieldsInClass we add it as a TreeItem using addVariableToClassTreeItem
                for( Field field: fieldsInClass){
                    CreateMainUI.addVariableToClassNameTreeItem(field.getGenericType().toString(), field.getName());
                }

                //Array of all methods in the class
                Method[] methodsInClass = cls.getDeclaredMethods();

                //For each method we pass through the string representation of it, the class it belongs too and it's name. It will be formatted in CreateUI
                for (Method method : methodsInClass) {
                    CreateMainUI.addMethodToClassNameTreeItem(method.toString(), classToLoad, method.getName());
                }

            } catch (MalformedURLException e) {
                System.out.println("URL BAD");
            } catch (ClassNotFoundException e){
                System.out.println("Class couldnt be found");
            }

        }

        return CONTINUE;

    }

    //Print out each directory visited
    @Override
    public FileVisitResult postVisitDirectory(Path dir, IOException exc) {
        //System.out.format("Directory: %s%n", dir);
        return CONTINUE;
    }

    //If there is some error accessing the file, let the user know.
    //If you don't override this method an error occurs, an IOException is thrown
    @Override
    public FileVisitResult visitFileFailed(Path file, IOException exc) {
        System.err.println(exc);
        return CONTINUE;
    }

} 
```

# ios - 链接器错误，但仅限于测试文件

> ID：15144602
> 
> 赞同：1
> 
> 时间：2013-02-28T20:02:59.150
> 
> 标签：ios, core-graphics, linker-errors, libraries, target

这是我的应用程序的屏幕截图。我正在使用 UIKit 从一些应用数据创建 PDF。我的应用程序本身没有错误，但在测试部分我得到了一堆看起来应用程序找不到一些 CoreGraphics 引用的错误。但是 CG 正在导入 Tests.h... 我可以在模拟器和设备上毫无问题地运行该应用程序。知道是什么原因造成的吗？

再补充一点：我将制作 PDF 的类导入到另一个应用程序中，但没有出现错误，这很好。那么有什么想法会发生什么吗？（是的，这些库在我的应用程序中）

![在此处输入图像描述](../Images/e9ccba78fbb4b79fc2163dd4f64eb937.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:34:35.207

它正在导入但未链接。您需要链接 CoreGraphics 框架：

将类头 A 导入到 B 类中可以让 B 类知道 A 类中的哪些公共 API（变量、属性和方法）可以被其他类使用，这就是为什么在编译之前不会出现任何错误的原因。

编译时，您需要实际代码（如果愿意，可以使用 .m 文件）来执行 B 类对 A 类变量、属性和方法所做的调用。该代码位于您链接到项目的库/框架中。您的代码与链接库一起成为最终编译的代码。

这是您需要做的：

1.  单击您的项目（导航器的左上角）
2.  选择您的目标项目
3.  单击“构建阶段”选项卡
4.  单击“将二进制文件与库链接”
5.  添加 CoreGraphics.framework

那应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:05:23.997

我解决了。我删除了库，重新安装它们并进行了清理，这似乎解决了问题。

# c++ - 使这个函数线程安全，同时保持递归性

> ID：15144603
> 
> 赞同：1
> 
> 时间：2013-02-28T20:03:12.670
> 
> 标签：c++, c, recursion

如何在保持代码的递归性质的同时使这个函数线程安全？

```
int foo(char *p)
 {
  static int i = 0;
   if (*p == '\0') return i;
   i++;
 return foo(p+1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:08:36.460

```
#include <iostream>

using namespace std;

int foo(char* p, int start)
{
    if (*p == 0) return start;
    return foo(p+1, start+1);
}

int main()
{
    char test[] = "HI THERE";

    cout << foo(test, 0);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:09:23.860

在 C++11 中，您可以使用[`thread_local`](http://en.cppreference.com/w/cpp/keyword/thread_local)：

```
int foo(char *p)
{
  thread_local int i = 0;
  if (*p == '\0') return i;
  i++;
  return foo(p+1);
} 
```

我希望该函数只是一个示例，在我的示例中`i=0`仅执行一次（在您的示例中）并且*每个线程*执行一次。

较旧的编译器有时支持`static __thread`作为 C++11 之前的替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:16:51.380

```
int foo(char *p, int i = 0)
{
    if(*p == '\0')
        return i;
    return foo(p+1, i+1);
} 
```

递归很好，但如果创建堆栈帧，它的效率可能低于循环。这是导致堆栈溢出的最简单方法。我建议摆脱它。以下更简单并且可能更快：

```
int foo(char *p)
{
    return strlen(p);
} 
```

或者更好的是，直接调用[`strlen`](http://en.cppreference.com/w/cpp/string/byte/strlen)并摆脱`foo`.

请注意，这是非常不安全的。`'\0'`不来怎么办？你只会读到谁知道什么...

# javascript - 循环结构中的多个数组

> ID：15144606
> 
> 赞同：0
> 
> 时间：2013-02-28T20:03:17.473
> 
> 标签：javascript, arrays, for-loop

我想不出一种同时遍历两个数组的方法。此代码用于将函数的数据输出到页面上的不同 div。`array1`定义输入并`array2`定义输出。

如何循环遍历两个数组，以便`item1`始终与`'#div1'`、`item2`with`'#div2'`等配对。

```
var array1=[item1 , item2, item3, item4];
var array2=['#div1', '#div2', '#div3', '#div4'];

for (var i = 0; i < array1.length; i++) {

    //code for to populate data goes here

    item.appendTo($(array2[i]));
}; 
```

我至少在 for 循环中包装我的函数是正确的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:05:41.923

```
var array1=[item1 , item2, item3, item4];
var array2=['#div1', '#div2', '#div3', '#div4'];

for (var i = 0; i < array1.length; i++) {

    //code for to populate data goes here

    $(array1[i]).appendTo(array2[i]);

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:11:32.623

您可以一次迭代两个数组。为了安全起见，只需检查您的索引变量（'i'）是否不超过两个数组长度中的任何一个。

这是一个例子：

```
var array1=[item1 , item2, item3, item4];
var array2=['#div1', '#div2', '#div3', '#div4'];

var array3 = [];
for ( var i = 0; i < array1.length && i < array2.length; i++ ) {
    array3.push({
        el1: array1[i],
        el2: array2[i]
    });
}

for ( var i = 0; i < array3.length; i++ ) {
  // array3[i].el1; -- element from array1
  // array3[i].el2; -- element from array2
} 
```

当然，您可以在一个循环中完成此操作。为了清楚起见，我在这里使用了两个（第二个仅用于记录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:11:38.037

使用 $() 创建一个 jQuery 对象。您可能希望从 array2 值创建 jQuery 对象。当使用 for 循环时， i 变量将递增，您可以使用它来访问数组成员。由于您希望使用此 for 循环的两个数组的相同索引应该可以正常工作

```
var array1=[item1 , item2, item3, item4];
var array2=['#div1', '#div2', '#div3', '#div4'];

for (var i = 0; i < array1.length; i++) {
    $(array2[i]).append(array1[i]); 
}; 
```

# java - Java Collections Framework 中的泛型类型和方法声明

> ID：15144611
> 
> 赞同：1
> 
> 时间：2013-02-28T20:03:27.037
> 
> 标签：java, generics, collections, parameters, set

我有一个关于在 Java Collections 框架中使用泛型类型的问题。

`Set`这是取自 Oracle 的 Java 集合线程（在[此处](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)找到）的接口片段：

```
public interface Set<E> extends Collection<E> {
    // Basic operations
    int size();
    boolean isEmpty();
    boolean contains(Object element);
    // optional
    boolean add(E element);
    // optional
    boolean remove(Object element);
    ... 
```

我的问题是：鉴于它`Set<E>`是具有泛型类型参数的泛型`E`，为什么`contains`and`remove`方法声明为采用类型参数`Object`？该`add`方法接受 type 的参数`E`，为什么不这样`contains`做`remove`呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T20:07:36.713

这仅仅是因为在将泛型添加到 java 之前的时间向后兼容。

这样旧代码仍然有效。

# python - 为什么添加 1 个打印会杀死我的代码（Python）？

> ID：15144612
> 
> 赞同：2
> 
> 时间：2013-02-28T20:03:33.587
> 
> 标签：python, sudoku

我正在玩我发现的这个数独求解器。

就像这里引用的一样，它工作得很好，但是如果我取消注释那个我注释掉的 single `print a`（第 13 行），那么它会在找到完整的解决方案之前停止......？

```
import sys
from datetime import datetime # for datetime.now()

def same_row(i,j): return (i/9 == j/9)
def same_col(i,j): return (i-j) % 9 == 0
def same_block(i,j): return (i/27 == j/27 and i%9/3 == j%9/3)

def r(a):
    i = a.find('.')
    if i == -1: # All solved !
        print a
    else:
        #print a
        excluded_numbers = set()
        for j in range(81):
            if same_row(i,j) or same_col(i,j) or same_block(i,j):
                excluded_numbers.add(a[j])        
        for m in '123456789':
            if m not in excluded_numbers:
                # At this point, m is not excluded by any row, column, or block, so let's place it and recurse
                r(a[:i]+m+a[i+1:])

if __name__ == '__main__':
    if len(sys.argv) == 2:
        filI = open(sys.argv[1])
        for pusI in filI:
            pusI.strip()
            print "pussle:\n",pusI
            timStart = datetime.now()
            r(pusI) # <- Calling the recursive solver ...
            timEnd = datetime.now()
            print "Duration (h:mm:ss.dddddd): "+str(timEnd-timStart)
    else:
        print str(len(sys.argv)) 
        print 'Usage: python sudoku.py puzzle' 
```

程序需要用文件调用。该文件每行应包含 1 个数独。

对于测试，我使用了这个：

```
25...1........8.6...3...4.1..48.6.9...9.4.8...1..29.4.9.53.7....6..5...7......... 
```

**问题：**

在完成之前，我无法理解那个单一的“打印 a”是如何打破递归循环的。谁能给个解释？

信用：我最初在这里找到了上面的数独求解器代码： [http](http://www.scottkirkwood.com/2006/07/shortest-sudoku-solver-in-python.html) ://www.scottkirkwood.com/2006/07/shortest-sudoku-solver-in-python.html 它也显示在 StackOverflow 上： [Shortest Sudoku Solver in Python -它是如何工作的？](https://stackoverflow.com/questions/201461/shortest-sudoku-solver-in-python-how-does-it-work)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:13:47.013

它确实找到了解决方案。我运行了程序并得到了解决方案

```
256491738471238569893765421534876192629143875718529643945387216162954387387612954 
```

如果您按照建议运行取消注释并将其输出到文件：

```
python solver.py file.txt > output.txt 
```

并搜索解决方案字符串，它就在那里。这不是最后一行，对我来说它在文件中显示了 67%。

这样做的原因是求解器基本上会经历大量组合并找到解决方案，但只要有任何可能的路径可以找到可能的解决方案，它就会继续。

# java - 在java中旋转

> ID：15144613
> 
> 赞同：2
> 
> 时间：2013-02-28T20:03:34.653
> 
> 标签：java, acm-java-libraries

我有一个简单的问题，我找不到答案。在 Eclipse 中，我有一个简单的`GRect`and `GOval`。我怎样才能将它们顺时针旋转 90 度？我试过了`move`，`movePolar`但没有任何效果。这是代码：

```
import acm.graphics.*;
import acm.program.*;
import java.awt.*;

public class asd extends GraphicsProgram {

    public void run() {
        double x = (getWidth() - FIGURE_WIDTH) / 2;
        double y = (getHeight() - FIGURE_HEIGHT) / 2;
        GRect rect = new GRect(x, y, FIGURE_WIDTH, FIGURE_HEIGHT);
        rect.setFilled(true);
        rect.setColor(Color.RED);
        add(rect);
        GOval oval = new GOval(x, y, FIGURE_WIDTH, FIGURE_HEIGHT);
        oval.setFilled(true);
        oval.setFillColor(Color.GREEN);
        add(oval);
} 
```

我想顺时针旋转这个 90 度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T16:24:55.423

您不能旋转 acm.graphics 中除 GPolygon 之外的任何对象。当然，您可以轻松地将 GRect 建模为 GPolygon，但我认为 GOval 必须由多边形近似才能使用此方案。

如果您的轮换有限，我想作为下一个最佳课程，您可以在 GOval 的情况下创建多个对象。例如，如果您创建椭圆H 和椭圆V，则您有0、90、180 和270 度的旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T12:01:09.920

您实际上可以使用 rotate() 方法在 ACM 库中旋转 GObject 形状。例如：

```
GRect rect1 = new GRect(100, 100, 50, 50);
rect1.setFilled(true);
add(rect1);
rect1.rotate(90); 
```

但是，它的轴心点是左上角。

# scala - Sbt 插件二进制不兼容

> ID：15144618
> 
> 赞同：1
> 
> 时间：2013-02-28T20:03:51.117
> 
> 标签：scala, sbt

我正在使用 sbtantlr 插件并将其调整为使用 antlr v3.5。它曾经在 scala 2.9.2 上运行良好。

今天我将我的 scala 升级到 2.10.0。

我在 2.10.0 中编译了插件，并将插件 'sbtantlr.jar' 放在我的主要 scala 项目的 'lib' 目录中。

SBT 停止处理此错误消息：

检测到插件中的二进制不兼容。

我将编译器版本恢复为 2.9.2，它工作正常。

是因为 SBT（官方二进制版本）是用 2.9 构建的吗？我在哪里可以找到信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:04:52.223

是的，sbt 0.12.x 是用 2.9x 构建的，所有插件都需要匹配二进制 Scala 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:05:59.923

为了向 Yann 所说的添加更多信息，Scala 仅保证次要版本之间的兼容性。也就是说，任何 2.8.x 版本编译的代码都与任何其他 2.8.x 版本编译的代码兼容，但 2.8.x 编译的代码不能与 2.9.x 版本编译的代码兼容。

现在，SBT 是一个 Scala 应用程序，插件和构建配置都是它的库。SBT 0.12.x 是使用 Scala 2.9.x 编译的，因此所有插件和项目构建配置也必须使用 Scala 2.9.x 编译。

项目*本身*可以用任何版本编译，因为 SBT 不需要与之交互。

# ruby-on-rails - Model.delete_all 并使 id 从 1 开始？

> ID：15144621
> 
> 赞同：13
> 
> 时间：2013-02-28T20:03:55.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 控制台中使用 Model.delete_all 删除表，但我注意到 ID 号不会重置，它们只是从它停止的地方开始。如何删除表并使 id 从 1 开始？

这实际上没什么大不了的，我只是好奇，认为这样会更干净。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-31T08:55:24.967

要仅删除一个表（带有回调）并从 1 开始获取 ID，rails 中没有直接的方法可以做到这一点。

你可以做

1)`Model.destroy_all`

2)`ActiveRecord::Base.connection.execute("TRUNCATE table_name")`

如果你需要的话，它将处理你想要的所有东西，对于一个表

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T20:09:15.057

大多数数据库都有一个序列的概念，它在使用时会自动递增。ActiveRecord 使用底层数据库序列来创建主键。这个 gem ( [https://github.com/splendeo/activerecord-reset-pk-sequence](https://github.com/splendeo/activerecord-reset-pk-sequence) ) 可能会根据您的数据库帮助您重置它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-24T07:25:46.920

如果您使用 postgresql，则可以执行此代码

```
ActiveRecord::Base.connection.reset_pk_sequence!(Model.table_name) 
```

后`Model.destroy_all`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-18T11:47:47.053

最好和最简单的方法：

```
ActiveRecord::Base.connection.reset_pk_sequence!('table_name') 
```

Ps：不要忘记table_name后面的's'

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-05T10:27:15.430

如果您只需要重置 id：

```
ActiveRecord::Base.connection.execute('ALTER TABLE table_name AUTO_INCREMENT = 1') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T20:09:38.067

这取决于数据库。在您的应用程序中，您不应依赖 ID 以 1 开头并按顺序排列的事实，甚至不应该总是增加新记录。如果你想要一个新的数据库，你总是可以做`rake db:drop`, then `rake db:create`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T20:12:22.170

一个班轮

```
rake db:drop && rake db:create && rake db:migrate 
```

回到工作

# python - pserve 抱怨 __init.py__ “没有‘主’属性”

> ID：15144622
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:04:03.363
> 
> 标签：python, pyramid

我试图让一个金字塔项目在一台新机器上运行，我们已经看到了这个奇怪的错误：

```
 pserve pubmanage/production.ini

ImportError: <module 'pubmanage' from '/home/frodeo/pubbery/webapp/pubmanage/__init__.pyc'> has no 'main' attribute 
```

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:14:05.273

pserve 正在寻找应用程序入口点，但没有找到它。

按照惯例（可配置），`__init__`您项目的模块包含一个`main`函数，该函数从您的 .ini 文件中获取设置并返回一个 WSGI 应用程序。您的 init 似乎缺少此入口点。

阅读[Pyramid 启动文档以](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/startup.html)获取更多详细信息。对您来说失败的步骤是第 4 步。

# jquery - 结合验证使用 jQuery .one() 函数

> ID：15144628
> 
> 赞同：0
> 
> 时间：2013-02-28T20:04:11.083
> 
> 标签：jquery

我正在使用 twitter 引导程序在模态中使用忘记的用户名功能。单击提交按钮时，我需要运行一些验证，如果验证通过，请确保脚本的其余部分只执行一次。

我熟悉该`.one()`功能，并尝试`$(this).one('click', function()`在该`if(isValid)`部分中使用，但没有成功。我也在`.addClass("disabled");`验证检查后添加了没有运气。

这是 javascript 块的简化版本：

```
$('#btnForgotUsername').live('click', function (e) {

    // Clear the error div of any previous errors    
    $('#vsForgotUsername').hide().empty();

    var isValid = true;

    // Must Enter Email Address
    var emailEntered = $('#txtEmailAddress').val();
    if (!$.trim(emailEntered).length) {
        $('#vsForgotUsername').append('Email address required');
        isValid = false;
    }
    else {
        // If Email Entered verify that it is a valid email address
        if (!validateEmail(emailEntered)) {
            $('#vsForgotUsername').append('Enter valid email address.');
            isValid = false;
        }
    }

    if (isValid) {
        $('#btnForgotUsername').addClass("disabled");

        var proxy = new serviceProxy('/Login.aspx/', { async: true });
        proxy.invoke
        (
            'forgotUser',
            {
                emailAddress: $('#txtEmailAddress').val()
            },
            function (result) {
                if (result.d == true) {
                    $('#pnlForgotUsername, #btnForgotUsername').hide();
                    $('#pnlForgotUsernameSuccess').fadeIn();
                    return;
                }
                else {
                    $('#btnForgotUsername').removeClass("disabled");
                    $('#vsForgotUsername').fadeIn().append("We do not have a record with that email address.");
                }
            },
            function (jqXHR, textStatus, errorThrown) {
            },
            null
        );
    }
    else {
        $('#vsForgotUsername').fadeIn();
    }
}); 
```

有人可以帮我找到一种方法来完成验证，并且如果验证 = true，则只执行一次 ajax？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:18:09.340

唔。老实说，我并不完全清楚您需要什么，但请尝试明确设置按钮的道具（我假设它是一个按钮）。

```
 $('#btnForgotUsername').prop('disabled', true); 
```

此外，我会添加一个 .data 来成功，然后针对它进行测试。

```
$("body").data("ajaxSuccess", "true"); 
```

# sql - SQL 多行作为列而不使用 PL/SQL

> ID：15144629
> 
> 赞同：1
> 
> 时间：2013-02-28T20:04:11.267
> 
> 标签：sql, pivot

我有 3 张桌子

*   `questions (q_id, q_text)`
*   `answers (a_id, a_text, q_id)`
*   `correct_answers (q_id, a_id)`

对于每个问题，答案表可以有最少 1 个和最多 4 个值

我需要一个纯 SQL 查询（连接或子查询）来获得下表作为结果

```
result (q_id, q_text, option1, option2, option3, option4, correct) 
```

`option1`, `option2`, `option3`,`option4`都属于答案表并且可以是`null`,`correct`属于`correct_answers`表

问题：

```
q_id  q_text
2     Capital of Pakistan is
3     Karachi is in africa
5     New dehli is _____ of india 
```

答案：

```
a_id  a_text     q_id
1     Lahore     2
2     Islamabad  2
3     Karachi    2
4     Quetta     2
5     True       3
6     False      3
7     Capital    5 
```

正确答案：

```
q_id  a_id
2     2
3     6
5     7 
```

查询结果：

```
q_id  q_text                       option_1   option_2   option_3  option_4 correct
2     Capital of Pakistan is       Lahore     Islamabad  Karachi   Quetta   Islamabad
3     Karachi is in africa         True       False      null      null     False
5     New dehli is _____ of india  Capital    Null       Null      Null     Capital 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:16:32.753

您没有指定什么 RDBMS，但既然您说 PL/SQL，我猜是 Oracle。

根据您的版本，您应该能够使用以下内容来对大多数数据库产品中的数据进行*透视：*

```
select q_id,
  q_text,
  max(case when rn = 1 then answer end) Option1,
  max(case when rn = 2 then answer end) Option2,
  max(case when rn = 3 then answer end) Option3,
  max(case when rn = 4 then answer end) Option4,
  CorrectAnswer
from
(
  select q.q_id,
    q.q_text,
    a1.a_text Answer,
    a2.a_text CorrectAnswer,
    row_number() over(partition by q.q_id order by a1.a_id) rn
  from questions q
  left join answers a1
    on q.q_id = a1.q_id
  left join Correct_answer ca
    on q.q_id = ca.q_id
  left join answers a2
    on ca.a_id = a2.a_id
)
group by q_id, q_text, CorrectAnswer
order by q_id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/d104d/13)。

如果您使用的是 Oracle 11g+，那么您可以使用以下`PIVOT`功能：

```
select q_id,
  q_text,
  Option1, Option2, Option3, Option4,
  CorrectAnswer
from
(
  select q.q_id,
    q.q_text,
    a1.a_text Answer,
    a2.a_text CorrectAnswer,
    row_number() over(partition by q.q_id order by a1.a_id) rn
  from questions q
  left join answers a1
    on q.q_id = a1.q_id
  left join Correct_answer ca
    on q.q_id = ca.q_id
  left join answers a2
    on ca.a_id = a2.a_id
)
pivot
(
  max(answer)
  for rn in ('1' as Option1, '2' as Option2, 
             '3' as Option3, '4' as Option4)
) piv
order by q_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/d104d/18)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:51:04.227

这个适用于 ORACLE、MySQL、MS SQL Server 和 PostgreSQL

```
SELECT q_id, 
       q_text,
       (SELECT a_text
          FROM answers a1
         WHERE a1.q_id = q1.q_id
           AND (SELECT count(*) FROM answers a2 WHERE a1.q_id = a2.q_id AND a2.a_id < a1.a_id) = 0) as option1,
       (SELECT a_text
          FROM answers a1
         WHERE a1.q_id = q1.q_id
           AND (SELECT count(*) FROM answers a2 WHERE a1.q_id = a2.q_id AND a2.a_id < a1.a_id) = 1) as option2,
       (SELECT a_text
          FROM answers a1
         WHERE a1.q_id = q1.q_id
           AND (SELECT count(*) FROM answers a2 WHERE a1.q_id = a2.q_id AND a2.a_id < a1.a_id) = 2) as option3,
       (SELECT a_text 
          FROM answers a1
         WHERE a1.q_id = q1.q_id
           AND (SELECT count(*) FROM answers a2 WHERE a1.q_id = a2.q_id AND a2.a_id < a1.a_id) = 3) as option4,
       (SELECT a_text
          FROM answers a1
         WHERE a1.a_id = (select a_id from correct_answers c1 where c1.q_id = q1.q_id)) as correct
  FROM questions q1; 
```

干杯!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T20:18:05.390

我将首先向表中添加一个`Position`列`Answers`，其中包含一个唯一约束`(q_id, Position)`和一个域约束`Position > 0 AND Position <= 4`。无论如何，您可能想要一个`Position`专栏；通常最好在行具有自然顺序时对其进行显式排序，而不是尝试通过它们的代理键对它们进行排序或完全丢弃排序信息。

这使您可以更少地像这样查询数据库：

```
SELECT
        q.qid, q.q_text,
        a1.a_text AS option1, a2.a_text AS option2,
        a3.a_text AS option3, a4.a_text AS option4,
        ca.a_text AS correct
    FROM
        Questions q
        LEFT JOIN Answers a1 ON a1.q_id = q.q_id AND a1.Position = 1
        LEFT JOIN Answers a2 ON a2.q_id = q.q_id AND a2.Position = 2
        LEFT JOIN Answers a3 ON a3.q_id = q.q_id AND a3.Position = 3
        LEFT JOIN Answers a4 ON a4.q_id = q.q_id AND a4.Position = 4
        JOIN Correct_answer qca ON ca.q_id = q.q_id
        JOIN Anwsers ca ON ca.a_id = qca.a_id 
```

你可以侥幸逃脱，因为你有固定数量的可能答案；更通用的解决方案可能需要动态 SQL 或应用层代码来透视结果集。

# c# - 查找反编译变量的值

> ID：15144632
> 
> 赞同：1
> 
> 时间：2013-02-28T20:04:25.687
> 
> 标签：c#, vb.net, virus

我是一名具有相当基本能力的程序员，我在朋友的计算机上找到了一个看起来可疑的文件。我将它通过电子邮件发送给自己，并用 .NET 反射器打开它，只是为了好玩，如果它工作的话。确实如此，而且代码看起来最初是用 C#/VB 编写的。该程序在我未经训练的眼睛看来就像一个非常基本的窃取者，从其标准目录中获取各种密码。我也终于找到了我要找的东西；所有这些数据都通过电子邮件发送到。我想到我可以禁用此电子邮件地址并通过联系其他丢失重要数据的人来帮助他们。但是，电子邮件地址及其密码存储为变量；我的信息。我真正需要的是找到那个变量，Me.Information。程序本身就是巨大的，充满了我在上下文中几乎看不懂的代码。就我所见，它完全没有乱码。没有混淆。我已经在空闲时间寻找了很长一段时间，任何可以伸出援助之手的专业人士将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:23:11.223

如果您找到了发送电子邮件的代码部分，您可以将其替换为显示地址的消息框，而不是向其发送内容。不过要小心，不要犯错误并泄露您的密码。

此外，您可以在记事本中打开一些 .net 文件并查看字符串。很多时候它们很容易阅读......比如：

```
address = "me@somewhere.net" 
```

（在代码中）

可能在记事本中可见，尽管它可能看起来像这样：

```
m e @ s o m e w h e r e . n e t 
```

（我不确定它们是否真的是“空格”，但它们确实倾向于显示看起来像空格）

不过，搜索“@”的所有实例可能需要一段时间，除非他们像我的示例那样以简单的方式分配它，否则它不会起作用......他们可能已经构建它以使其不那么明显

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:19:07.873

将其导出到项目中，并在某个 IDE（如 Visual Studio）中打开它。为了解决您对意外运行程序的担忧，您实际上可以在项目设置中禁用这些运行配置，这样您就没有机会运行/构建它。

希望这可以帮助！

# objective-c - NSTextField 没有边距？

> ID：15144637
> 
> 赞同：0
> 
> 时间：2013-02-28T20:04:43.797
> 
> 标签：objective-c, cocoa, nsstring, nstextfield

有没有办法让 NSTextField 没有任何边距？我正在尝试将我的文本字段设置为与文本本身一样宽，但我必须添加一些随机 nr (10px) 以使其全部显示。

```
NSSize size = [title sizeWithAttributes:[NSDictionary dictionaryWithObject:[NSFont fontWithName:@"LucidaGrande" size:fontSize] forKey:NSFontAttributeName]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:42:37.737

您是否尝试过仅使用[`sizeToFit`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/sizeToFit)该`NSTextField`继承自`NSControl`？我在这里的一个测试项目中尝试过它，它似乎工作正常。

例如：

```
[textField sizeToFit]; 
```

[更新]：也许我不明白。您是否以编程方式创建显示文本或其他内容的文本字段？如果是这样，您仍然可以`sizeToFit`在将文本字段添加到视图层次结构之前让其正确调整大小。例如，下面的代码：

```
// this code sample assumes ARC
NSTextField *labelField = [[NSTextField alloc] initWithFrame:
                                  NSMakeRect(0.0, 0.0, 10.0, 10.0)];
[[labelField cell] setFont:[NSFont systemFontOfSize:[NSFont systemFontSize]]];
[labelField setBezeled:NO];
[labelField setDrawsBackground:NO];
[labelField setEditable:NO];
[labelField setSelectable:YES];

[labelField setStringValue:@"Sphinx of black quartz, judge my vow. Sphinx of black quartz, judge my vow."];

NSLog(@"labelField.frame (BEFORE) == %@", NSStringFromRect(labelField.frame));
NSLog(@"calling [labelField sizeToFit]");

[labelField sizeToFit];

NSLog(@"labelField.frame (AFTER) == %@", NSStringFromRect(labelField.frame));

labelField.frame = NSOffsetRect(labelField.frame, 50.0, 100.0);

[self.window.contentView addSubview:labelField]; 
```

运行此代码将产生以下记录输出：

```
2013-02-28 17:23:21 SizeToFit[] labelField.frame (BEFORE) == {{0, 0}, {10, 10}}
2013-02-28 17:23:21 SizeToFit[] calling [labelField sizeToFit]
2013-02-28 17:23:21 SizeToFit[] labelField.frame (AFTER) == {{0, 0}, {493, 17}} 
```

在这段代码中，我创建了`NSTextField`一个任意初始帧大小，只有 10 x 10 像素。在设置字段的几个属性使其相当于标准的 13pt 标签后，我将字符串值设置为一个很长的字符串，这显然不适合仅 10 px 的空间。设置字符串值后，日志调用显示文本字段的框架仍然是相同的 10 x 10 尺寸。然后我调用`[labelField sizeToFit]`，如您所见，第二个日志调用显示文本字段已将自身调整为理想大小。您应该能够在计算放置文本字段的位置时使用此大小。

# php - 为什么我的 php 脚本在 debian 上被杀死

> ID：15144638
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:04:44.733
> 
> 标签：php, process, debian, vps

我在 debian 上运行一个大的 php 脚本

```
php myscript.php 
```

5分钟后，我收到这条消息：“Killed”

我有一个虚拟专用服务器（debian 512MB RAM 和 1Ghz CPU）

使用此命令： `cat /proc/meminfo`

我明白了：

```
MemTotal:         524288 kB
MemFree:          447928 kB
Cached:            12128 kB
Active:            48760 kB
Inactive:          12760 kB
Active(anon):      45332 kB
Inactive(anon):     4060 kB
Active(file):       3428 kB
Inactive(file):     8700 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:        131072 kB
SwapFree:          60012 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:         49392 kB
Shmem:             20552 kB
Slab:              14820 kB
SReclaimable:       5616 kB
SUnreclaim:         9204 kB 
```

我试图将 php.ini 中的 memory_limit 减少到 32MB，但没有成功

当我尝试在本地机器上的 WAMP 中执行相同的脚本时，没有错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:06:35.917

您的服务器有一个任务监视器，可以终止长时间运行的进程，以防止锁定。

如果您拥有服务器，您应该能够禁用它。如果主机拥有它，您可以向他们寻求帮助。通常任务监视器只适用于 Web 请求，因此例如 Cron 任务可以根据需要运行。

# ios - 在 Objective-C 中发送分块的 HTTP 1.1 请求

> ID：15144640
> 
> 赞同：7
> 
> 时间：2013-02-28T20:04:46.823
> 
> 标签：ios, objective-c, soap, nsurlconnection, http-chunked

我有以下问题：我正在创建一个非常大的 SOAP 请求（数据是编码为 Base64 字符串的视频），因此我无法将其作为原始 SOAP 请求发送，而是需要以 HTTP 1.1 块的形式发送。我似乎无法弄清楚该怎么做。我在这里使用了代码： [What are alternatives to NSURLConnection for chunked transfer encoding](https://stackoverflow.com/questions/9296221/what-are-alternatives-to-nsurlconnection-for-chunked-transfer-encoding) 但它似乎没有做我认为应该做的事情 - 我可以看到请求作为*单个*请求而不是多个块到达服务器（我在服务器上使用 WireShark 来查看传入的流量。）

我知道 Android 上的类似功能使用 Java 的 Apache Foundations HTTP 库工作 - 有了这些，任何未预先指定长度的 HTTP 请求都作为 HTTP 1.1 块请求传输 - 我确实可以看到这些请求到达服务器作为单独的块......我想效仿。

（更新：在我看来 AFNetworking 可能具有该功能，但我找不到任何关于如何使用它的示例。）

这是我的代码，或多或少：

```
NSString *soapBody = ....; //some correctly formed SOAP request XML here 

NSURL *url = [NSURL URLWithString:...];
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url];
[request addValue: ... forHTTPHeaderField:@"SOAPAction"];
[request setHTTPMethod:@"POST"];
[request addValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:[soapBody dataUsingEncoding:NSUTF8StringEncoding]];
ChunkedTransferConnection* connection = [ChunkedTransferConnection alloc];
[connection establishConnectionWithRequest:request]; 
```

其中 ChunkedTransferConnection 实现如下

```
@implementation ChunkedTransferConnection

    @synthesize p_connection;
    @synthesize p_responseData;

    - (void)establishConnectionWithRequest:(NSMutableURLRequest *)request
    {
        self.p_responseData = [[NSMutableData alloc] initWithLength:0] ;
        self.p_connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    }
...
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:51:31.103

弄清楚了：

```
 NSInputStream *dataStream = [NSInputStream inputStreamWithData:[soapBody dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBodyStream:dataStream]; 
```

这会导致请求自动位于 HTP 1.1 块中！

# java - java中的Class clazz和Class clazz有什么区别？

> ID：15144641
> 
> 赞同：11
> 
> 时间：2013-02-28T20:04:48.743
> 
> 标签：java, reflection, ternary-operator

我需要在java中使用反射。我知道这`Class clazz`会创建一个表示`Class`对象的变量。但是，我正在尝试使用该方法`Class`从 a 中引用一个对象。我的 IDE (Eclipse)，似乎更喜欢声明变量的符号。我在其他地方多次看到这个符号。这是什么意思？`String``forName("aClassName")``Class<?> clazz`

编辑：删除了对三元运算符的引用，因为它与这个问题无关。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T20:06:55.260

`Class`是*原始类型*- 它基本上是一种泛型类型，您将其视为根本不了解泛型。

`Class<?>`是使用*未绑定通配符*的泛型类型- 它基本上意味着“`Class<Foo>`对于某些类型`Foo`，但我不知道是什么”。

同样，您可以使用带边界的通配符：

*   `Class<? extends InputStream>`意思是“`Class<Foo>`对于某种类型`Foo`，但我不知道它是什么`InputStream`或一个子类”

*   `Class<? super InputStream>`意思是“`Class<Foo>`对于某种类型`Foo`，但我不知道它是什么`InputStream`或超类”

另请参阅[Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)以获取*更多*信息：

*   [原始类型](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Raw%20Types)
*   [通配符](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#Wildcards)

和 Java 语言规范：

*   [原始类型（第 4.8 节）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)
*   [类型参数和通配符（第 4.5.1 节）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)

特别是，从原始类型部分：

> 原始类型与通配符密切相关。两者都基于存在类型。原始类型可以被认为是通配符，其类型规则故意不合理，以适应与遗留代码的交互。从历史上看，原始类型在通配符之前；它们首先在 GJ 中被介绍，并在 Gilad Bracha、Martin Odersky、David Stoutamire 和 Philip Wadler 的论文让未来安全：为 Java 编程语言添加通用性，在 ACM 对象会议论文集中进行了描述-面向编程、系统、语言和应用程序 (OOPSLA 98)，1998 年 10 月。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:15:38.537

首先要意识到的是，在这种情况下，“？” 不是三元运算符，而是 Java 泛型实现的一部分，并指示 Class 的类型未指定，正如其他一些答案已经解释的那样。

把关于三元运算符的问题说清楚，其实很简单。

假设您有以下 if 语句：

```
boolean correct = true;
String message;

if (correct) {
  message = "You are correct.";
} else {
  message = "You are wrong.";
} 
```

您可以使用三元运算符重写它（将其视为 if-else-shortcut 运算符）：

```
message = (correct) ? "You are correct." : "You are wrong."; 
```

但是，除了最简单的语句之外，最好避免使用三元运算符，以提高代码的可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:08:57.587

在泛型类型中，通配符`?`表示“任何类”（因此与正确参数化的原始类型`Class<?>`相同）。`Class`

# javascript - 在javascript中更改mousemove上的图片

> ID：15144649
> 
> 赞同：0
> 
> 时间：2013-02-28T20:05:05.717
> 
> 标签：javascript, html, css, web, mousemove

我遇到了[这个](http://w00tmedia.net/)网站，并想在鼠标移动到我自己的网站时实现类似于他们的图片更改徽标的东西。我不确定它是否使用 jQuery 作为页面源有点令人困惑，无论如何我可以在 javascript 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:10:46.193

实际上，该站点正在使用背景精灵，并显示更改精灵位置的每个徽标。

这是徽标的精灵图像： [http ://w00tmedia.net/wp-content/themes/w00t/images/citrus-logos.png](http://w00tmedia.net/wp-content/themes/w00t/images/citrus-logos.png)

您应该根据精灵布局以及您想要更改图像的“快速”程度进行一些数学运算。

看到这个， [http://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

然后改变元素的背景位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:09:31.667

如果您有 div 或其他块元素而不是图像标签，您也可以使用 css 完成相同的效果。

```
#logo {
background: url('logo.png');
width: 200px;
height: 45px;
}

#logo:hover {
background: url('logo_hover.png');
} 
```

# bash - 使用 GNU 并行拆分

> ID：15144655
> 
> 赞同：14
> 
> 时间：2013-02-28T20:05:31.110
> 
> 标签：bash, split, gnu-parallel

我正在将一个非常巨大的文件加载到 postgresql 数据库中。为此，我首先`split`在文件中使用以获取较小的文件（每个 30Gb），然后使用 and 将每个较小的文件加载到数据库`GNU Parallel`中`psql copy`。

问题是拆分文件大约需要 7 个小时，然后它开始为每个核心加载一个文件。我需要一种方法来告诉`split`每次它完成写入文件时将文件名打印到std输出，这样我就可以将它通过管道传输到`Parallel`它并在完成写入时开始加载文件`split`。像这样的东西：

```
split -l 50000000 2011.psv carga/2011_ | parallel ./carga_postgres.sh {} 
```

我已阅读`split`手册页，但找不到任何内容。有没有办法用`split`或任何其他工具做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-28T20:48:51.947

您可以让并行进行拆分：

```
<2011.psv parallel --pipe -N 50000000 ./carga_postgres.sh 
```

请注意，手册页建议使用`--block`over ，默认情况下，`-N`这仍会在记录分隔符处拆分输入，例如：`\n`

```
<2011.psv parallel --pipe --block 250M ./carga_postgres.sh 
```

### 测试`--pipe`和`-N`

这是一个将 100 个数字序列拆分为 5 个文件的测试：

```
seq 100 | parallel --pipe -N23 'cat > /tmp/parallel_test_{#}' 
```

检查结果：

```
wc -l /tmp/parallel_test_[1-5] 
```

输出：

```
 23 /tmp/parallel_test_1
 23 /tmp/parallel_test_2
 23 /tmp/parallel_test_3
 23 /tmp/parallel_test_4
  8 /tmp/parallel_test_5
100 total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:49:20.390

如果您使用[`GNU split`](http://www.gnu.org/software/coreutils/manual/html_node/split-invocation.html)，您可以使用该`--filter`选项执行此操作

> '--filter=command'<br> 使用此选项，不是简单地写入每个输出文件，而是通过管道写入每个输出文件的指定 shell 命令。命令应使用 $FILE 环境变量，该变量为命令的每次调用设置为不同的输出文件名。

您可以创建一个shell脚本，该脚本创建一个文件并在后台启动carga_postgres.sh

```
#! /bin/sh

cat >$FILE
./carga_postgres.sh $FILE & 
```

并使用该脚本作为过滤器

```
split -l 50000000 --filter=./filter.sh 2011.psv 
```

# c# - 覆盖特定数据项的样式

> ID：15144660
> 
> 赞同：0
> 
> 时间：2013-02-28T20:05:43.327
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我正在开发我的第一个 Windows 8 RT 应用程序，并从示例网格应用程序开始。我的目标是更改这些网格项目之一的样式。

我已经能够通过使用这个“找到”这个项目：

```
if (dataItem.UniqueId.StartsWith("Group-1-Item-1")) 
```

然后我在 C# 中创建了这种样式（仅作为示例）；

```
Style style = new Style (typeof(SampleDataItem));
Thickness thick = new Thickness(4,4,4,4);
style.Setters.Add(new Setter(Border.BorderThicknessProperty, new Thickness(100))); 
```

但是，现在我必须将这种样式应用于特定的数据项——我已经尝试了很多东西，但现在我不认为它们有多大意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:27:31.237

Grid App 项目模板的 dataItems 的数据模板可在 StandardStyles.xaml 中找到，并由键“Standard250x250ItemTemplate”引用。

如果想法是根据项目的内容改变样式，一种方法可能是使用 Binding.Converter，[如此处所示](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.binding.converter.aspx)，将相关内容的值转换为所需的样式或样式属性。

例如，如果我想让默认 Grid App 模板中的任何项目在项目编号小于或等于 3 时具有绿色背景，如果高于 3 则具有红色背景，我将创建以下转换器类（在在我的情况下，我刚刚将该类添加到 GroupedItemsPage.xaml.cs，就在 GroupedItemsPage 部分类之前）：

```
// Custom class implements the IValueConverter interface.
public class StyleConverter : IValueConverter
{
    #region IValueConverter Members

    // Define the Convert method to change a title ending with > 3 
    // to a red background, otherwise, green.
    public object Convert(object value, Type targetType,
        object parameter, string language)
    {
        // The value parameter is the data from the source object.
        string title = (string)value;
        int lastNum = (int.Parse(title.Substring(title.Length - 1)));
        if (lastNum > 3)
        {
            return "Red";
        }
        else
        {
            return "Green";
        }
    }

    // ConvertBack is not implemented for a OneWay binding.
    public object ConvertBack(object value, Type targetType,
        object parameter, string language)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

定义类后，连同所需的 Convert 方法，我在 App.xaml 文件中向它添加一个实例，因此它可用于 StandardStyles.xaml 中的项目模板：

```
<!-- Application-specific resources -->
<local:StyleConverter x:Key="StyleConverter"/> 
```

在 StandardStyles.xaml 中，我制作了 Standard250x250ItemTemplate 的副本，它从项目的 Title 属性绑定到我的转换器类，如下所示：

```
<DataTemplate x:Key="Standard250x250ItemTemplate_Convert">
    <Grid HorizontalAlignment="Left" Width="250" Height="250">
        <Border Background="{Binding Title, 
             Converter={StaticResource StyleConverter}}">
        </Border>
        <StackPanel VerticalAlignment="Bottom" 
            Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
            <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="60" Margin="15,0,15,0"/>
            <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

关键部分是将 Border 元素的 Background 属性绑定到 Title，使用 Converter={StaticResource StyleConverter}，它将项目模板连接到我的转换器。请注意，除了绑定 Background 属性之外，我还从项目模板的原始版本中删除了嵌套的 Image 元素。

最后，在 GroupedItemsPage.xaml 中，我将项目模板更改为我的自定义版本：

```
<!-- Horizontal scrolling grid used in most view states -->
<GridView
    x:Name="itemGridView"
    ...
    Padding="116,137,40,46"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    ItemTemplate="{StaticResource Standard250x250ItemTemplate_Convert}"
    ...
    ItemClick="ItemView_ItemClick"> 
```

完成后，我可以运行该项目，这就是我所看到的：

![带有转换器的网格应用程序](../Images/526a2e04406e1f48e5a2e4c093197a5d.png)

希望有帮助！

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# javascript - Json 迭代 Javascript

> ID：15144663
> 
> 赞同：0
> 
> 时间：2013-02-28T20:06:00.203
> 
> 标签：javascript, json

我有一个 json 字符串 {"email" : "Hello", "username" : "Not take"}

我如何遍历这个json来显示文本（比如你好）

我想显示以下文字

电子邮件：您好
用户名：未使用

我尝试了以下方法：

```
 arr = json
    $.each(arr, function(k, v) {
      message += k + ':' + v + '<br />';  
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:12:52.633

您需要将 JSON 字符串更改为 Javascript 对象。使用`JSON.parse()`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/m3Hm2/)]]]

### 输出：

![输出](../Images/95f279048d0147a3e223f2eefc3df6fb.png)

### 脚本：

```
var json = '{"email" : "Hello", "username" : "Not taken"}',
    arr = window.JSON.parse( json ),
    message = '';

$.each(arr, function(k, v) {
    message += k + ': ' + v + '<br />';  
});

document.getElementById( 'message' ).innerHTML = message; 
```

### HTML：

```
<div id="message"></div> 
```

# php - 正则表达式检索所有不包含特定字符串的 URL

> ID：15144664
> 
> 赞同：0
> 
> 时间：2013-02-28T20:06:04.710
> 
> 标签：php, regex, url, google-analytics

我正在使用 Google Analytics PHP API，并尝试使用它来检索我网站上最受欢迎的链接。

它可以工作，但由于它检索包含查询字符串的 URL，它会检索一些重复项。所以基本上，我想检索其中不包含字符串 "?start=" 的所有链接。我认为这可以通过正则表达式完成（谷歌分析接受正则表达式过滤器），但不知道如何。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:07:19.420

您可以使用否定前瞻正则表达式断言。

请参阅[http://www.perlmonks.org/?node_id=518444](http://www.perlmonks.org/?node_id=518444)和[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

```
your_string(?!\?start=) 
```

# java - xuggler 视频剪辑

> ID：15144666
> 
> 赞同：1
> 
> 时间：2013-02-28T20:06:13.530
> 
> 标签：java, video, video-processing, xuggler

我有两次（long time1，time2;），输入文件和输出目录。我想将视频从 time1 剪切到 time2 并将其保存在 outdir 中，有人可以提供一个简单的工作代码示例吗？

```
public class CutAndSaveVideoTest {

    public static void main(String[] args) {

        long timeStart=0, timeEnd=0;

        String filename = "C:\\Documents and Settings\\...\\File.avi"; 
        String outDir = "C:\\Documents and Settings\\...";
        String outFileName = "Test.mp4";
        String outDirFileName = (outDir +"\\" +outFileName );

        IContainer container = IContainer.make(); 

        if (container.open(filename, IContainer.Type.READ, null) < 0){
            throw new IllegalArgumentException("could not open file: " + filename);
        }

    }

} 
```

# c++ - BOOST_QUATERNION_ACCESSOR_GENERATOR 有什么用处？

> ID：15144667
> 
> 赞同：0
> 
> 时间：2013-02-28T20:06:14.987
> 
> 标签：c++, boost, quaternions

我正在尝试阅读一些增强标题，看看这可能有多大用处。特别是，我开始在这里阅读 quaternion.hpp 文件：

[http://www.boost.org/doc/libs/1_53_0/boost/math/quaternion.hpp](http://www.boost.org/doc/libs/1_53_0/boost/math/quaternion.hpp)

宏 BOOST_QUATERNION_ACCESSOR_GENERATOR 有什么用处？那是什么编程技术（如果是的话）？

# python - 为什么python在windows和linux中以不同的方式将脚本目录附加到pythonpath？

> ID：15144668
> 
> 赞同：0
> 
> 时间：2013-02-28T20:06:17.027
> 
> 标签：python, linux, windows, pythonpath

我有这个结构：

测试目录：

```
.
├── __init__.py
└── nested
    ├── __init__.py
    └── test.py 
```

然后我像这样运行脚本（python2.7）：

```
~/tmp/test$./nested/test.py 
```

测试.py：

```
import sys
print sys.path 
```

并在linux上得到了这个：

```
['/home/xliivdeb/tmp/test/nested', '/home/xliivdeb/tmp/test', ..] 
```

这在 Windows XP 上：

```
['E:\\tmp\\test\\nested', 'c:\\Python27\\lib\\site-packages\\distribute-0.6.28-py2.7.egg', ..] 
```

区别是这样的：

在linux上附加的是：

*   脚本目录（'/home/xliivdeb/tmp/test/nested'）和
*   当前目录（'/home/xliivdeb/tmp/test'）

在 Windows 上附加的只是：

*   脚本目录（'E:\tmp\test\nested'）

为什么？如何处理？如果是windows，我必须手动附加它吗？

# spring - 如何强制石英调度程序中的bean在启动时初始化？

> ID：15144669
> 
> 赞同：2
> 
> 时间：2013-02-28T20:06:18.393
> 
> 标签：spring, javabeans, quartz-scheduler

```
<bean name="MyJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="com.package.scheduler.MyJob"/>
        <property name="jobDataAsMap">
            <map>
                <entry key="numArr" value="10,20,30"/>
            </map>
        </property>
</bean> 
```

我定义了一个在凌晨 1:30 运行的石英作业。问题是这个数组定义不起作用

```
<entry key="numArr" value="10,20,30"/> 
```

我们不得不改用列表。由于在石英作业开始之前 bean 不会被初始化，而且我们不太可能在凌晨 1:30 进行编码，因此我们无法在本地捕获此错误。现在唯一的方法是改变石英作业的运行时间来强制它发生。当我们在本地 dev 上运行时，我们希望强制这些 bean 在启动时初始化。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:35:37.487

如果可能的话，我会将您的 bean 与 Quartz 工作分离。然后你可以在你的 spring 配置中单独初始化你的 bean，它不需要知道 Quartz。然后我会使用弹簧`MethodInvokingJobDetailFactoryBean`在你的解耦对象上调用一个方法。

例如与此类似的内容：

```
<bean id="myBean class="...">
    <property name="numArr" value="10,20,30"/>
</bean>

<bean id="myJob"
      class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
     <property name="targetObject" ref="myBean" />
     <property name="targetMethod" value="doSomething" />
</bean>

<bean id="staleTraderRatesTrigger"
      class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="myJob" />
    <property name="cronExpression" value="0 30 1 * * ?" />
</bean> 
```

# css - 使用 INTERNET EXPLORER 8 时使 Wordpress 下拉菜单可见

> ID：15144671
> 
> 赞同：1
> 
> 时间：2013-02-28T20:06:20.893
> 
> 标签：css, drop-down-menu, internet-explorer-8

[目标：使此处](http://bit.ly/Y8bNKX)的下拉菜单在 INTERNET EXPLORER 8 上可见且可用。

您可以看到它并单击链接，但几乎看不到，在 Safari、Chrome、Firefox、IE 9 及更高版本等上运行良好。

分配图像背景，使用 IE 的不透明度技术，使用 Z-index 排序 DIV，到目前为止还没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:29:44.173

您在 IE 不透明度过滤器值上犯了一个错误..

在`.menu-header ul ul a`你的`styles.css`文件中

您声明它`filter: alpha(opacity=9.0);`实际上应该是：

`filter: alpha(opacity=90);`该值超出 100，而不是 10 .. 这可以解释几乎透明的菜单。

# python-2.7 - 与欧拉 12 斗争，慢代码 - Python

> ID：15144673
> 
> 赞同：3
> 
> 时间：2013-02-28T20:06:34.780
> 
> 标签：python-2.7

我正在努力解决[欧拉问题 12](http://projecteuler.net/problem=12)。我不想要让我到达那里的答案或确切的代码更改。我只是想指出正确的方向。我运行了这个代码大约 10 分钟，得到了一个不正确的答案。这让我相信我的假设是，一个具有 > 500 个除数的三角形数不会有任何 > 10000 的因子是不正确的。我在想我需要使用更快的素数生成器并让程序停止对列表进行如此多的迭代。我不确定如何做后者。

```
def eratosthenes_sieve(limit):
    primes = {}
    listofprimes = []
    for i in range(2, limit + 1):
        primes[i] = True

    for i in primes:
        factors = range(i, limit + 1, i)
        for f in factors[1:limit + 1]:
            primes[f] = False

    for i in primes:
        if primes[i] == True:
            listofprimes.append(i)
    return listofprimes

def prime_factorization(n):
    global primal
    prime_factors = {}
    for i in primal:
        if n < i:
            i = primal[0]
        if n % i == 0:
            if i not in prime_factors.keys():
                prime_factors[i] = 1
            else:
                prime_factors[i] += 1
            n = n / i
        if n in primal:
            if n not in prime_factors.keys():
                prime_factors[n] = 1
            else:
                prime_factors[n] += 1
            return prime_factors
    return prime_factors    

def divisor_function(input):
    x = 1
    for exp in input.values():
        x *= exp + 1
    return x

def triangle(th):
    terms = []
    for each in range(1, th+1):
        terms.append(each)
    return sum(terms)

z = 1
primal = eratosthenes_sieve(10000)
found = False
while found == False:
triz = triangle(z)
number_of_divisors = divisor_function(prime_factorization(triz))

if number_of_divisors > 300:
    print "GETTING CLOSE!! ********************************"
if number_of_divisors > 400:
    print "SUPER DUPER CLOSE!!! *********************************************************"
if number_of_divisors < 501:
    print "Nope. Not %s...Only has %s divisors." % (triz, number_of_divisors)

    z += 1
else:
    found = True
    print "We found it!"
    print "The first triangle number with over 500 divisors is %s!" % triangle(z) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:01:56.963

当然，我在发布后几分钟就知道了。

在我的 prime_factorization 函数中。

如果 n % i == 0：应该在 n % i == 0 时出现。

这导致程序错过因子并遍历整个素数列表。

# matlab - MATLAB 矩阵变换

> ID：15144675
> 
> 赞同：1
> 
> 时间：2013-02-28T20:06:38.460
> 
> 标签：matlab, matrix

我需要转换一个矩阵：

```
X = [1 2; 3 4]
X = 1 2
    3 4 
```

到

```
X = [1 2; 1 2; 1 2; 3 4; 3 4; 3 4]
X = 1 2
    1 2
    1 2
    3 4
    3 4
    3 4 
```

并对具有任意行数的矩阵执行此操作。如何在 MATLAB 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:13:14.433

这是使用 kron 执行此操作的好方法

```
kron(X,[1 1 1]') 
```

这会产生

```
 1     2
     1     2
     1     2
     3     4
     3     4
     3     4 
```

# javascript - 如何防止钛合金视图中的事件冒泡？

> ID：15144680
> 
> 赞同：6
> 
> 时间：2013-02-28T20:07:06.790
> 
> 标签：javascript, ios, titanium, titanium-alloy

在文档中，您似乎可以通过将参数传递给文本字段上的单击事件来防止冒泡：

[http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.TextField-event-click](http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.TextField-event-click)

使用他们的新合金框架，我有一个这样声明的文本字段：

```
<TextField id='name' onClick='doStuff' /> 
```

在我的控制器中我有这个功能：

```
function doStuff(e) {
  alert('hello');
} 
```

但是，这个元素被包装在一个容器元素中，该元素也有一个 onClick 事件，我想防止在我单击文本字段时触发该事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T15:34:02.550

尝试：

```
function doStuff(e){
    e.cancelBubble = true;
    alert('hello');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-05T11:42:24.473

假设您在 xml 文件中编写了此代码：

```
<View id = “parent” onClick = “parentClicked”&gt;
        <ImageView id=“sampleImage”  onClick= “childImageClicked”&gt;
        </ImageView> 

</View> 
```

然后

在 TSS 中试试这个：

```
“#sampleImage” : {

 bubbleParent : false,

} 
```

或者如果你想用 Javascript 来做：

```
function function_name(e){

    e.cancelBubble = true;
} 
```

[http://docs.appcelerator.com/platform/latest/#!/api/Titanium.Event-property-cancelBubble](http://docs.appcelerator.com/platform/latest/#!/api/Titanium.Event-property-cancelBubble)

我希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-01T00:21:25.173

也许更好的方法是检查源属性。

例如，假设您有以下观点：

```
<View id="parent" onClick="onParentClicked">
    <View id="child1" onClick="onChild1Clicked"/>
    <View id="child2" onClick="onChild2Clicked"/>
</View> 
```

# 解决方案 1：使用气泡父属性 (Long)

您可以像其他答案一样做，并在 tss 文件中写入：

```
'#child1': {
    bubbleParent : false,
}
'#child2': {
    bubbleParent : false,
} 
```

但这对于许多子元素可能会变得乏味。

# 解决方案 2：使用 Javascript e.cancelBubble（甚至更长）

在javascript中做：

```
function onChild1Clicked(e) {
    e.cancelBubble = true;
}
function onChild2Clicked(e) {
    e.cancelBubble = true;
} 
```

这又是乏味的。

# 解决方案 3：使用 Javascript e.source（最佳）

只需检查父事件处理程序上的源是什么：

```
function onParentClicked(e) {
    if (e.source.id !== 'parent') {
        return;
    }
    alert("Parent clicked!");
} 
```

这要快得多。尤其是当您有许多子元素时。

# constructor - 为什么 Rebol 中的“上下文”和“对象”函数不同，但本质上是相同的？

> ID：15144683
> 
> 赞同：4
> 
> 时间：2013-02-28T20:07:15.307
> 
> 标签：constructor, rebol, rebol3

一方面，我们有：

```
>> source object
object: make function! [[
    "Defines a unique object."
    blk [block!] "Object words and values."
][
    make object! append blk none
]] 
```

对于上下文，我们看到：

```
>> source context
context: make function! [[
    "Defines a unique object."
    blk [block!] "Object words and values."
][
    make object! blk
]] 
```

因此，因为对象是从已附加`object`到的块中构造的。`none`这不会改变长度，或者，据我所知，添加任何东西。`context`另一方面，使用传入的块构造对象，原样。

为什么差异以及为什么，例如，不能`context`只是`object`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:06:48.143

*向后兼容*。我们`context`在 Rebol 中已经有一个以特定方式工作的函数（不是初始化变量），但我们需要一个将变量初始化为 none 的函数，作为将对象创建为数据结构而不是代码容器时的便利函数。

调用它是有道理的，`object`因为这是类型名称，并且因为“上下文”实际上对于具有上下文敏感语义的语言中的对象来说是一种不好的名称（对于“上下文”这个词的更合适的含义）。这确实会导致一些令人困惑的对话。由于 R3 现在有了模块，因此以前对该`context`功能的大部分使用都被模块更好地覆盖了。完全保留`context`主要是为了向后兼容。

当前`object`函数几乎是我们尚未想到的更好的类型构造包装器的占位符。我们需要类似的东西，但它的行为可能需要一些细微的变化，我们会在更多使用时发现这些变化。一方面，它修改了其规范块这一事实使其对于递归或并发来说不是很安全。如果这样可以改进它，它可能最终会成为本地人，或者`construct`如果事实证明这是一种更好的方法，它可能会成为一种选择。

确实成功的一件事是使用不带感叹号的类型名称作为类型构造函数的名称的做法。我们也改成`map`这样，我们最终可能会为其他类型添加类似的构造函数，尽管大多数需要它们的人已经有了它们。

# javascript - 谷歌地图 - 来自外部 json 的多个标记

> ID：15144691
> 
> 赞同：10
> 
> 时间：2013-02-28T20:07:48.383
> 
> 标签：javascript, jquery, ajax, json

我必须向谷歌地图添加多个标记，但数据位于外部 json 文件中。

目前我像这样运行它

```
var json = [
  {
    "title": "Stockholm",
    "lat": 59.3,
    "lng": 18.1,
    "description": "Stockholm is the capital and the largest city of Sweden and constitutes the most populated urban area in Scandinavia with a population of 2.1 million in the metropolitan area (2010)"
  },
  {
    "title": "Oslo",
    "lat": 59.9,
    "lng": 10.8,
    "description": "Oslo is a municipality, and the capital and most populous city of Norway with a metropolitan population of 1,442,318 (as of 2010)."
  },
  {
    "title": "Copenhagen",
    "lat": 55.7,
    "lng": 12.6,
    "description": "Copenhagen is the capital of Denmark and its most populous city, with a metropolitan population of 1,931,467 (as of 1 January 2012)."
  }
];

for (var i = 0, length = json.length; i < length; i++) {
  var data = json[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 

  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title
  });
} 
```

现在我试图将 Json 文件排除到另一个文件中，但是我无法让它工作；（

代码

```
$.getJSON("foo.txt", function(json1) {

});

for (var i = 0, length = json.length; i < length; i++) {
  var data = json[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 

  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title
  });
} 
```

foo.txt

```
{
    "title": "Stockholm",
    "lat": 59.3,
    "lng": 18.1,
    "description": "Stockholm is the capital and the largest city of Sweden and constitutes the most populated urban area in Scandinavia with a population of 2.1 million in the metropolitan area (2010)"
  },
  {
    "title": "Oslo",
    "lat": 59.9,
    "lng": 10.8,
    "description": "Oslo is a municipality, and the capital and most populous city of Norway with a metropolitan population of 1,442,318 (as of 2010)."
  },
  {
    "title": "Copenhagen",
    "lat": 55.7,
    "lng": 12.6,
    "description": "Copenhagen is the capital of Denmark and its most populous city, with a metropolitan population of 1,931,467 (as of 1 January 2012)."
  } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-28T20:26:25.053

您的代码中有两个问题。您的 json 文件`[`在开头和`]`结尾都缺少 。你的 javascript 也错了，你想对 .json 回调中的 json 做一些事情`getJSON`。您的问题的代码是：

```
$.getJSON("foo.txt", function(json1) {
    $.each(json1, function(key, data) {
        var latLng = new google.maps.LatLng(data.lat, data.lng); 
        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: data.title
        });
    });
}); 
```

* * *

编辑：

这是一个基于[谷歌地图教程](https://developers.google.com/maps/documentation/javascript/tutorial)的工作示例。您需要正确的文件`foo.txt`：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=true">
    </script>
    <script type="text/javascript">
      var map;
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(58, 16),
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>    
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
    <script type="text/javascript">
      $(document).ready(function() {
        $.getJSON("foo.txt", function(json1) {
          $.each(json1, function(key, data) {
            var latLng = new google.maps.LatLng(data.lat, data.lng); 
            // Creating a marker and putting it on the map
            var marker = new google.maps.Marker({
                position: latLng,
                title: data.title
            });
            marker.setMap(map);
          });
        });
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-03T14:43:18.580

提供的示例 halex 对我不起作用。我通过添加方括号将`foo.txt`其声明为数组并运行 Web 服务器来访问 html 文件，而不是仅仅在浏览器中打开它来对其进行排序。

我还需要添加延迟：

```
setTimeout(function (){marker.setMap(map);}, 1000); 
```

现在它工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T14:13:11.950

在 Google 地图文档中，您可以找到一个示例： [https ://developers.google.com/maps/documentation/javascript/importing_data](https://developers.google.com/maps/documentation/javascript/importing_data)

不需要 jQuery

```
<div id="map"></div>
<script>
  var map;
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 2,
      center: new google.maps.LatLng(2.8,-187.3),
      mapTypeId: 'terrain'
    });

    // Create a <script> tag and set the USGS URL as the source.
    var script = document.createElement('script');
    // This example uses a local copy of the GeoJSON stored at
    // http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
    script.src = 'https://developers.google.com/maps/documentation/javascript/examples/json/earthquake_GeoJSONP.js';
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  // Loop through the results array and place a marker for each
  // set of coordinates.
  window.eqfeed_callback = function(results) {
    for (var i = 0; i < results.features.length; i++) {
      var coords = results.features[i].geometry.coordinates;
      var latLng = new google.maps.LatLng(coords[1],coords[0]);
      var marker = new google.maps.Marker({
        position: latLng,
        map: map
      });
    }
  }
</script> 
```

# mysql - 触发：在“ON DUPLICATE KEY UPDATE”期间读取 NEW.values 和 OLD.values

> ID：15144693
> 
> 赞同：0
> 
> 时间：2013-02-28T20:08:05.027
> 
> 标签：mysql, triggers, insert, on-duplicate-key

我正在尝试为 MySQL 中的单个表编写一个小型审计系统。

`INSERT`我在使用基本的//命令时很幸运`UPDATE`，`DELETE`但是现在我对审计使用的表很感兴趣`INSERT ... ON DUPLICATE KEY UPDATE`。

通过使用触发器`ON BEFORE INSERT`，我可以知道这个事件正在发生，但是我只能获得我感兴趣的一半数据。 `NEW.values`很容易获得，但我不知道如何获得`OLD.values`之前的数据。我想我可以使用`NEW.ID`现有表进行查询，但我不确定性能和可靠性。

我需要，`OLD.values`因为我为每个更改事件存储了旧值和新值，因为我在某个地方读到了折叠数据等的好主意......

MySQL 5.0（或更新的 GA 版本）有没有办法像我在`UPDATE`触发器中一样可靠地检索这些值？

编辑：另一个皱纹：

看起来`NEW.values`更新后的数据不匹配。它们匹配`INSERT`声明而不是`ON DUPLICATE KEY UPDATE`实际进入记录的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:25:31.303

看起来触发事件`ON AFTER UPDATE` *也*捕捉到了`ON DUPLICATE KEY UPDATE`变化。从这里，我能够获取 OLD/NEW 值并执行我需要执行的日志记录。

# android - 相对布局中心不适用于分割线视图

> ID：15144700
> 
> 赞同：0
> 
> 时间：2013-02-28T20:08:35.443
> 
> 标签：android

当我将它的 layout_width 设置为 match_parent 时，我似乎无法弄清楚为什么我不能将 datepicker 和 timepicker 水平居中在分界线下方。

当我将分界线的 layout_width 设置为 wrap_content 时，选择器水平居中。但这条线并没有填满相对视图。

我只是困惑，我不明白发生了什么。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal" >

    <!-- Dividing Line -->
    <TextView
        android:id="@+id/BlueLine"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:background="@color/holo_blue_light" />

    <DatePicker
        android:id="@+id/DatePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/BlueLine"
        android:layout_marginRight="40dp" />

    <TimePicker
        android:id="@+id/TimePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/BlueLine"
        android:layout_toRightOf="@+id/DatePicker" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:06:05.097

使用相对布局的任何具体原因？我认为您可以使用线性布局更轻松地完成所需的布局 - 蓝线是垂直的，另一个可以包含日期选择器和时间选择器的线性布局父元素。然后在其父布局元素中水平放置日期选择器和时间选择器。

# google-app-engine - 在 Google AppEngine 上部署 Dropwizard

> ID：15144703
> 
> 赞同：12
> 
> 时间：2013-02-28T20:08:40.293
> 
> 标签：google-app-engine, dropwizard

我一直在尝试找到一种在 Google AppEngine 上部署[Dropwizard](http://dropwizard.codahale.com/)应用程序的方法，但到目前为止我还没有找到任何东西。

从这个[问题](https://stackoverflow.com/questions/12355751/dropwizard-in-tomcat-container)（和[答案](https://stackoverflow.com/a/12813523/1296709)）来看，我认为这可能是不可能的。我想确定这一点，如果它*确实*有效，我想学习如何。

有一个名为[warwizard](https://github.com/plausiblelabs/warwizard)的 dropwizard 分支，它显然可以让您从 dropwizard 代码创建 war 文件，但它已经有 6 个多月没有被触及，这可能会使使用 dropwizard 文档变得困难。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T01:42:53.923

Dropwizard 只是将 Jersey+Jackson+Jetty 很好地捆绑在一起。Jetty 和 App Engine 无法相处（也就是说，[App Engine 已经在运行 Jetty](http://www.infoq.com/news/2009/08/google-chose-jetty)，因此它不希望应用程序提供自己的）。

您最好使用 Jersey 和 Jackson，而不需要 Dropwizard 将它们捆绑在一起：[http](http://blog.iparissa.com/googles-app-engine-java/google-app-engine-jax-rs-jersey/) ://blog.iparissa.com/googles-app-engine-java/google-app-engine-jax-rs-jersey/和[http:/ /www.cowtowncoder.com/blog/archives/2009/11/entry_338.html](http://www.cowtowncoder.com/blog/archives/2009/11/entry_338.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-15T04:44:42.017

但是，您可以在 Google Compute Engine 上运行 Dropwizard。这基本上只是 Google 提供的 linux VM，如果需要可以访问它们的 API。

通过在 GCE 上执行以下操作，我设法让我的 Dropwizard 实例工作：

安装 Java

```
sudo apt-get install java7-runtime-headless 
```

打开防火墙端口：

```
gcutil addfirewall rest --description="http" --allowed="tcp:8080
gcutil addfirewall admin --description="admin" --allowed="tcp:8081" 
```

将文件复制到 GCE

```
gcutil --project={project-id} push {instance-name} {local-file} {remote-target-path} 
```

运行你的应用

```
java -jar your-app.jar server your-config.yml 
```

编辑：还有另一种称为 wiztowar [https://github.com/twilio/wiztowar](https://github.com/twilio/wiztowar)的替代方案，它仅支持 DW 0.6.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T19:46:45.213

在过去的两个月里，我一直在努力解决这个问题。以下是我的发现：

1-**是的，您可以将 Dropwizard 部署为 WAR 文件。**您需要使用一些[技巧](https://github.com/twilio/wiztowar)，例如[Wizard in a box](https://github.com/rvs-fluid-it/wizard-in-a-box)或*WizToWar*

2-**不！您不能在 AppEngine 标准环境中部署该 WAR 文件。**

为什么？主要问题是 AppEngine 正在使用 servlet-api v2.5（已经有 10 多年的历史了！）并且没有升级到 servlet-api v3 或更高版本的计划。另一方面，Dropwizard 需要 servlet-api v3 或更高版本。

**可是等等！还有另一种选择**

[您可以在App Engine 柔性环境](https://cloud.google.com/appengine/docs/flexible/)中部署 Dropwizard

App Engine Flex 仍处于测试阶段，但我听说它将在 2017 年第一季度公开使用。如果您想现在使用它，您必须要求为您启用它。

您如何在 App Engine Flex 上进行部署？

-> 我已经将所有步骤都放在了博客文章中： [在 App Engine Flex 上部署 Dropwizard](http://www.aytech.ca/blog/dropwizard-app-engine-flexible-env/)

# java - Java 属性驱动集合

> ID：15144710
> 
> 赞同：1
> 
> 时间：2013-02-28T20:08:55.273
> 
> 标签：java, collections, attributes, membership

我需要实现一些特定的功能，我想知道您是否知道执行此操作的 java 库或类似的库。在构建自己的之前，我宁愿使用现有的。

基本上我想要一个包含*FooBar*实例的集合类型类。在构建容器时，我指定了使 FooBar 成为成员资格的属性值或范围，因此当插入 FooBar 实例时，如果不符合条件，它将被拒绝。此外，如果容器中任何 FooBar 的属性被修改为不再满足成员资格条件，它们将被弹出（最好对已注册的侦听器进行某种回调）。

我可以详细说明，但我认为这个概念相当简单。

见过这样的事吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:29:06.610

您可以将一组侦听器添加到执行添加/保留的类中，并允许该类“选择”是否将候选添加为侦听器 - 以及稍后根据您发生的有趣事件 - 是否“保留”它们或驱逐他们：

```
public interface AddableEvictable {
  public boolean isAddable();
  public boolean evict();
} 
```

然后将一个 Set 添加到您感兴趣的服务器类中，并且要添加/（/later evict）的候选类需要（a）实现这个简单的接口，并且（b）将自己提供给服务器类以决定是否添加/不添加（以及稍后何时/如果驱逐）

# java - 未报告的异常 SQLException；必须被捕获或声明为抛出错误

> ID：15144715
> 
> 赞同：1
> 
> 时间：2013-02-28T20:09:18.550
> 
> 标签：java, jtable, sqlexception, defaulttablemodel

这允许我从我的数据库中获取数据，将其存储为 DefaultTableModel 并将该模型传递到我的 GUI - 用数据库数据填充我的 jTable。

这是我的 Account 类中的方法：

```
public static DefaultTableModel buildTableModel() throws SQLException {
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    Vector columns = new Vector();
    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        String stmt = "SELECT * FROM APP.DATAVAULT";
        ps = Main.getPreparedStatement(stmt);
        rs = ps.executeQuery();
        ResultSetMetaData metaData = rs.getMetaData();

        // names of columns
        Vector<String> columnNames = new Vector<String>();
        int columnCount = metaData.getColumnCount();
        for (int column = 1; column <= columnCount; column++) {
            columnNames.add(metaData.getColumnName(column));
        }
        // data of the table
        while (rs.next()) {
            Vector<Object> vector = new Vector<Object>();
            for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
                vector.add(rs.getObject(columnIndex));
            }
            data.add(vector);
        }

    } finally {
        try {
            ps.close();
        } catch (Exception e) {
        }
        try {
            rs.close();
        } catch (Exception e) {
        }
    }

    DefaultTableModel tableModel = new DefaultTableModel(data, columns);
    return tableModel;
} 
```

然后，在我的 GUI 中，我将以下代码作为字段

```
Account acc = new Account();
DefaultTableModel dTableModel = acc.buildTableModel(); 
```

最后，在我的 GUI 构造函数中，我将我的 datavault jTable 模型设置为我从数据库中获得的模型

```
public SPPMainGUI() {
    initComponents();
    datavaultjTable.setModel(dTableModel);
} 
```

我试过在这条线上放一个 try-catch 块

DefaultTableModel dTableModel = acc.buildTableModel();

但是错误仍然存​​在。我在这里有什么选择？我知道我被调用的方法会引发 SQLException，但是为什么当我捕获 SQLException 时它不想打球？

编辑：错误： ![在此处输入图像描述](../Images/a9481fe5c22993462c5ca01beae8e6d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:02:21.850

我似乎通过执行以下操作解决了它：

在我的 GUI 中，我的字段如下：

```
Account acc = new Account();
DefaultTableModel dTableModel; 
```

构造函数现在显示为：

```
public SPPMainGUI() throws SQLException {
    this.dTableModel = Account.buildTableModel();
    initComponents();
    datavaultjTable.setModel(dTableModel);
} 
```

我的 GUI 中的 Main 方法现在如下所示：

```
public static void main(String args[]) {
/* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                new SPPMainGUI().setVisible(true);
            } catch (SQLException ex) {
                Logger.getLogger(SPPMainGUI.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    });
} 
```

我不确定这是否正确，但没有更多错误。我的 jTable 还没有显示数据。我不知道为什么，但我想这个问题已经解决了，我正在进入下一个问题。感谢所有帮助。

# grails - 保存 grails 对象的第二个版本

> ID：15144718
> 
> 赞同：0
> 
> 时间：2013-02-28T20:09:28.113
> 
> 标签：grails, grails-orm

我想做的一件事是对我们数据库中的条目进行版本控制。在我的更新方法中，我想保存一个对象的更新的第二个版本。例如

```
def update = {
    def VariantInstance = Variant.get(params.id)
    def NewVariantInstance = VariantInstance
    NewVariantInstance.properties = params
    if (VariantInstance) {
        if (!VariantInstance.hasErrors()) {
            VariantInstance.save()
            NewVariantInstance.save()

            flash.message = "${message(code: 'default.updated.message', args: [message(code: 'Variant.uniqueIdentifyingName', default: 'Variant'), VariantInstance.id])}"
            redirect(action: "list")
        }
        else {
            render(view: "edit", model: [VariantInstance: VariantInstance])
        }
    }
    else {
        flash.message = "${message(code: 'default.not.found.message', args: [message(code: 'Variant.uniqueIdentifyingName', default: 'Variant'), params.id])}"
        redirect(action: "list")
    }
} 
```

虽然这会保存当前的，但不会创建新的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:14:51.413

有两个问题；NewVariantInstance 很可能只是对 VariantInstance 的引用，因此它取消了对同一个对象的引用。此外，当您进行参数分配时，您还将 id 字段从 VariantInstance 分配给 NewVariantInstance，因此 GORM 在保存时会看到相同的对象。

# mysql - mysql：非常简单的 SELECT id ORDER BY LIMIT 不会按预期使用 INDEX (?!)

> ID：15144723
> 
> 赞同：2
> 
> 时间：2013-02-28T20:09:32.293
> 
> 标签：mysql, sql-order-by, indexing

我有一个包含大约 300 万条记录的简单表。我做了必要的索引，我也强制索引 PRIMARY 但仍然不起作用。**它搜索几乎所有 300 万行，而不是使用索引**来执行这一行（record_id 是 INT 自动增量）：

```
EXPLAIN SELECT record_id
FROM myrecords
FORCE INDEX (
PRIMARY )
ORDER BY record_id ASC
LIMIT 2955900 , 300

id  select_type     table     type  possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE          myrecords index NULL            PRIMARY 4           NULL    2956200 Using index 
```

指数是

```
Keyname Type    Unique  Packed  Column      Cardinality Collation   Null
PRIMARY BTREE   Yes     No      record_id   2956742     A           No 
```

我想知道为什么这个 FORCED 索引没有被正确使用。

如果 ASC 和 DESC 都尝试不强制索引“主要”，结果是相同的。表已修复-优化-分析。没运气。

查询需要超过一分钟才能执行！

我所期望的：查询应该只处理 300 行，因为该列已被索引。正如您在第一个代码格式化块中看到的那样，几乎不是全部 300 万个（向右滚动一点）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:23:27.270

索引查找是按*值*，而不是按*位置*。索引可以搜索值 2955900，但您并不要求这样做。您要求查询从表中第 2955900 行的偏移量开始。

优化器不能假设所有主键值都是连续的。因此，第 2955900 行的值很可能远高于此值。

即使主键值是连续的，您也可能有一个仅匹配 45% 行的 WHERE 条件。在这种情况下，第 2955900 行的 id 值将*远远*超过 id 值 2955900。

换句话说，对 id 值 2955900 的索引查找将不会传递第 2955900 行。

所以 MySQL 不能使用索引作为限制的偏移量。它*必须*扫描行以计算它们，直到达到偏移+限制行。

MySQL 确实有[与 LIMIT 相关的优化](http://dev.mysql.com/doc/refman/5.5/en/limit-optimization.html)，但它更多的是在达到要返回的行数时停止表扫描。优化器可能仍会在 EXPLAIN 计划中报告它*可能*需要扫描整个表。

[关于FORCE INDEX](http://dev.mysql.com/doc/refman/5.5/en/index-hints.html)的一个常见误解是它强制使用索引。:-) 事实上，如果查询*不能*使用索引（或者如果可用索引对此查询没有任何好处），FORCE INDEX 没有任何作用。

* * *

回复您的评论：

分页是数据驱动的 Web 应用程序的常见祸根。尽管此功能很常见，但优化并不容易。这里有一些提示：

*   为什么要使用偏移量 2955900 进行查询？您真的希望用户筛选那么多页面吗？大多数用户在几页后放弃（具体多少取决于应用程序的类型和数据）。

*   减少查询次数。您的分页功能可以获取前 5-10 页，即使它只向用户显示第一页。缓存其他页面，假设用户将前进几页。只有当它们通过缓存的页面集时，您的应用程序才必须执行另一个查询。您甚至可以在客户端浏览器上以 Javascript 缓存所有 10 个页面，因此单击“下一步”对他们来说是*即时*的（至少对于前几页而言）。

*   不要在任何用户界面上放置“最后一个”按钮，因为人们会出于好奇而点击它。请注意，Google 有一个“下一步”按钮，但没有“最后一个”按钮。所以 UI 本身不鼓励人们运行高偏移量的低效查询。

*   如果用户一次前进一页，则在下一页查询的 WHERE 子句中使用上一页返回的最高 id 值。即以下*确实*使用索引，即使没有 FORCE INDEX 提示：

    ```
    SELECT * FROM thistable WHERE id > 544 LIMIT 20 
    ```

# c# - 无法根据下拉列表更改字段信息

> ID：15144724
> 
> 赞同：0
> 
> 时间：2013-02-28T20:09:33.823
> 
> 标签：c#, drop-down-menu, selectedindexchanged

我认为这个问题有一个简单的解决方案，但几天来我一直在努力解决这个问题。我有一个 Web 应用程序，其中从存储过程中动态获取学生列表。我想查看每个学生的详细信息和后续班级信息。On the Student's Details page, there is a dropdown list that contains all the classes that the student is in and when one is selected, the Community Partner field should be updated.

我正在使用 SelectedIndexChanged 方法，但为了使其工作，我需要将 AutoPostBack 设置为 True，这会导致页面重新加载，因此下拉列表和选定的值也会重新加载。我尝试了此代码的几种不同配置，但没有结果。

这是我的 ascx 文件

```
<asp:DropDownList ID="StudentCourses" runat="server"></asp:DropDownList> 
```

这是我的 ascx.cs 文件

```
protected void Page_PreRender(object sender, EventArgs e)
    {
        if (Session["StudentID"] != null)
        {

            int studentId = Convert.ToInt32(Session["StudentID"]);

            Student student = studentRepository.GetStudent(studentId);
            StudentCourses_SelectedIndexChanged(sender, e);
            StudentCommunityPartner.Text = StudentCourses.SelectedItem.Value;
                ... 
```

这是我的 SelectedIndexChanged 方法

```
protected void StudentCourses_SelectedIndexChanged(object sender, EventArgs e)
    {
        IList<KeyValuePair<Course, CommunityPartner>> courseList = studentRepository.GetStudentCourses(Convert.ToInt32(Session["StudentID"]));
        StudentCourses.DataSource = courseList;
        StudentCourses.DataBind();

        int ctr = 0;
        foreach (KeyValuePair<Course, CommunityPartner> kvp in courseList)
        {
            if (ctr < StudentCourses.Items.Count)
            {
                StudentCourses.Items[ctr].Text = kvp.Key.CourseCode;
                StudentCourses.Items[ctr].Value = kvp.Value.PartnerName;
                ctr++;
            }
            else ctr = 0;
        }
        StudentCommunityPartner.Text = StudentCourses.SelectedItem.Value;
    } 
```

我已经尝试了几种组合，但我不知道如何正确更改页面上的内容，而不会每次都刷新下拉列表。感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:42:22.213

要从下拉更改中设置文本框，请查看此处：

[在jQuery中将下拉列表值设置为文本框](https://stackoverflow.com/questions/13451545/set-dropdownlist-value-to-textbox-in-jquery)

如果您还有更多事情要做，下拉列表中的选定值应在回发时保持在视图状态。您可以尝试保存该值

var Selected = StudentCourses.SelectedValue;

填充下拉列表，然后使用保存的值设置选定的值

StudentCourses.SelectedValue = 已选择；

# jquery - 带有 maskedinput 的 jQuery mobile

> ID：15144726
> 
> 赞同：0
> 
> 时间：2013-02-28T20:09:43.667
> 
> 标签：jquery, jquery-mobile, input, mask

我正在使用插件来屏蔽我的输入电话（jquery.maskedinput.js - [http://plugins.jquery.com/maskedinput/](http://plugins.jquery.com/maskedinput/)）。但我需要实现 .mask() 以在运行时更改它，所以掩码：

```
$("#inputPhone").onkeypress(function(){
    if($(this).val() === "119999"){
       $(this).mask("(99) 99999-9999");
    } else {
       $(this).mask("(99) 9999-9999");
    }
}); 
```

在执行期间更改 .mask() temp 来实现设置的值时，正在发生的问题正在丢失。先感谢您！

# javascript - 自动完成无法正常工作

> ID：15144728
> 
> 赞同：0
> 
> 时间：2013-02-28T20:09:55.947
> 
> 标签：javascript, jquery

我已经下载了这个[jQuery-Autocomplete Plugin](http://www.devbridge.com/projects/autocomplete/jquery/)。该请求工作正常，但我的代码或响应中有问题。

> 未捕获的类型错误：无法读取未定义的属性“长度”
> 
> *if (suggestions.length && typeof 建议[0] === 'string') { ...*

我的 JS：

```
$('#myInput').autocomplete({
    serviceUrl: 'php/airports.php?get',
    onSelect: function (suggestion) {
        //Do something         
    }
}); 
```

我的 HTML：

```
<input type="text" name="myInput" id="myInput" /> 
```

我的请求：

```
http://xxx/xxx/xxx/airports.php?get&query=hann 
```

我的回复：

```
[
  {"name":"Hannover","iata":"HAJ"},
  {"name":"Shannon","iata":"SNN"}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:11:58.003

我认为您实际上不需要`?get`在您的 url 中包含 - 自动完成应该为您服务。你可能没有点击你认为的 url，因此返回`undefined`到自动完成，它试图根据响应的长度来计算东西。

# c - 纯C的OS X锁屏？

> ID：15144729
> 
> 赞同：0
> 
> 时间：2013-02-28T20:09:58.677
> 
> 标签：c, macos, osx-mountain-lion

我知道这是可能的，因为我有一个我几年前写的二进制文件可以做到这一点。不幸的是，我没有保存源代码。

我知道它是用纯 C 编写的，我调用了 OS X API 并能够锁定屏幕。在谷歌上搜索“纯 C OS X 锁屏”和类似的字符串并没有让我感到太多。我在 Objective C 中看到了如何做到这一点的文档，但这不是我想要的。

任何人都知道我以前是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:17:08.767

一种方法是调用`system()`：

```
#include <stdlib.h>
int main(void) {
  system("/System/Library/CoreServices/Menu\\ Extras/User.menu/Contents/Resources/CGSession -suspend");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T18:31:15.647

您可能正在考虑`CGSCreateLoginSession()`- 这是一个私有功能，Apple 没有记录。有关其使用示例，请参阅[此问题。](https://stackoverflow.com/questions/1065759/is-it-possible-to-replace-the-mac-login-screen)

# java - 两个文本字段之间的乘法 - Android Java

> ID：15144735
> 
> 赞同：1
> 
> 时间：2013-02-28T20:10:13.353
> 
> 标签：java, android, eclipse

我是 Android 和编程新手，我的代码有点困难。我试图对此进行研究，但无法找出问题所在，不胜感激。我基本上是在尝试将两个值相乘，但是每次运行模拟器并单击按钮（计算）时，它都会崩溃：

**Java 代码：**

```
 package com.example.cantcook;

 import java.math.BigDecimal;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;

public class Calculator extends Activity {
    EditText costofmeal, amountofpeople;
    TextView costperperson;
    Button Calculate;
    BigDecimal costNum, percentNum;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calculator);

        costofmeal = (EditText) findViewById(R.id.editText1); 
        amountofpeople = (EditText) findViewById(R.id.editText2);

        Calculate = (Button) findViewById(R.id.button1);

        costperperson = (TextView) findViewById(R.id.textView2);
        //costperperson.setText("£0.00");

        Calculate.setOnClickListener(new View.OnClickListener()
        {

        public void onClick (View v)
        {
            costNum = new BigDecimal(costofmeal.getText().toString());
            percentNum = new BigDecimal(amountofpeople.getText().toString());
            costperperson.setText(costNum.multiply(percentNum).toString());
        }
        });
    } 
```

**XML 代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    tools:context=".Calculator" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="25dp"
        android:text="£"
        android:textAlignment="center"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="112dp"
        android:text="  Total spent on Shopping"
        android:textAlignment="center"
        android:textSize="18dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="  Amount of People"
        android:textAlignment="center"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="18dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="25dp"
        android:onClick="Btncalculate"
        android:text="Calculate" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView3"
        android:layout_marginTop="22dp"
        android:ems="10"
        android:inputType="numberSigned" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="17dp"
        android:ems="10"
        android:inputType="numberDecimal"
        android:text="£" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:29:16.817

在您的 xml 布局中，您`android:onClick="Btncalculate"`在 button1 中。当点击发生时，Android 会尝试在您的活动中查找 Btncalculate 方法。而且我假设您没有它，因为您正在为 button1 使用 OnClickListener（在我看来，这比使用 android:onClick 更好）。

Remove `android:onClick="Btncalculate"` from the xml file and it should work(unless there are other errors, in which case it would be great to see the stack trace).

**Update**

From your stacktrace:

> java.lang.NumberFormatException: £5

Looks like you're code is trying to put "£5" into BigDecimal, which is not allowed, since it is not a number. To fix this you can either set `android:inputType` to a number in your `editText1` and remove `android:text="£"`, or use a separate method to filter out the `£` sign from input.

# java - 参数调用中的花括号。>> 这是什么意思？| Spring 3 和 GWT

> ID：15144741
> 
> 赞同：4
> 
> 时间：2013-02-28T20:10:31.200
> 
> 标签：java, spring, gwt

## 问题

当代码段"new TextColumn(){...}, "MyObjectId");" 执行那么大括号最外面的代码代表什么？它是否代表 TextColumn 对象的匿名内部类实例？它是否代表 TextColumn 对象的定义？

## 代码

```
table.addColumn(new TextColumn<MyObjectProxy>() {
    Renderer<Integer> renderer = new AbstractRenderer<Integer>() {
        public String render(Integer obj) {
            return obj == null ? "" : String.valueOf(obj);
        }
    };
    @Override
    public String getValue(MyObjectProxy object) {
        return renderer.render(object.getMyObjectId());
    }
}, "MyObjectId"); 
```

如果您想知道 TextColumn 来自 com.google.gwt.user.cellview.client.TextColumn 包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:13:36.177

那是一个匿名的内部类，它扩展了`TextColumn<MyObjectProxy>`. 在其中，它有一个名为`renderer`type的字段，该字段`Renderer<Integer>`使用扩展的匿名内部类的实例进行初始化`AbstractRenderer<Integer>`。下面还有一个方法的覆盖`getValue`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:13:47.177

它只是定义一个匿名类并创建它的一个实例。此实例作为参数传递给方法`table.addColumn`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:14:44.473

是的，它是一个匿名类，对应于 TextColumn 对象。

getValue() 方法被覆盖。

# html - JSF 1.2 表单，在点击提交时没有呈现任何内容

> ID：15144745
> 
> 赞同：1
> 
> 时间：2013-02-28T20:10:39.223
> 
> 标签：html, jsf

在点击提交时，不会呈现任何内容。我想是因为`<div>`我拥有的所有标签。我错过了一些`<h:form>`标签吗？我是否必须为我拥有`<h:form>`的每个 div 标签提供标签？

```
<f:view>

    <body>

    <h:form id="mainform" onkeypress="enterForm()">

            <div id="header">
            <center>
                <h1><span id="lblPageTitle" class="PrimaryTitle">Question</span><span class="gray">Administration</span></h1>
                <hr id="titlehr"></hr>
            </center>

            </div> 

        <div  id="menu">
            <ul>
                <li id="current"><a href="index.html">Home</a></li>
                <li><a href="index.html">Archives</a></li>
                <li><a href="index.html">Downloads</a></li>
                <li><a href="index.html">Services</a></li>
                <li><a href="index.html">Support</a></li>
                <li><a href="index.html">About</a></li>     
            </ul>
        </div>  

        <div id="content-wrap">

            <div id="sidebar" align="left">

                <h1>Sidebar Menu</h1>
                <div class="left-box">
                    <ul class="sidemenu">               
                        <li><a href="AddQuestion.jsp">Add Question</a></li>
                        <li><a href="ModiftQuestion.jsp">Modify Question</a></li>
                        <li><a href="RemoveQuestion.jsp">Remove Question</a></li>

                    </ul>   
                </div>
        </div>

            <table border="0" width="100%" cellpadding="0" cellspacing="0">

                <tr>
                    <td colspan="2">
                        <table>
                            <tr>
                                <td align="right" valign="baseline" width="200"><h:outputLabel
                                        for="name" value="First Name:" /></td>
                                <td align="left" valign="baseline"><h:inputText id="name"
                                        value="#{addQuestionBean.fname }" >

                                        </h:inputText>
                                </td>

                            </tr>
                            <tr>    
                                <td align="right" valign="baseline" width="200"><h:outputLabel
                                        for="lname" value="Last Name:" /></td>
                                <td align="left" valign="baseline"><h:inputText id="lname"
                                        value="#{addQuestionBean.lname }" >

                                        </h:inputText>
                                </td>

                            </tr>

                            <tr>    
                                <td align="right" valign="baseline" width="200"><h:outputLabel
                                        for="ssn" value="Social Security:" /></td>
                                <td align="left" valign="baseline"><h:inputText id="ssn"
                                        value="#{addQuestionBean.ssn }" >

                                        </h:inputText>
                                </td>

                            </tr>

                            <tr>    
                                <td align="right" valign="baseline" width="200"><h:outputLabel
                                        for="mail" value="Email:" /></td>
                                <td align="left" valign="baseline">
                                <h:inputText id="mail" value="#{addQuestionBean.email}" required="true">
                                <f:validator validatorId="emailValidator" />
                                </h:inputText>
                                </td>

                            </tr>

                        </table>
                        <br>
                        </td>
                </tr>
                </table>
            </div>  

            <br>    
                <TABLE width="100%">

                <tbody>
                    <tr>

                        <td align="center"><center><h:commandButton type="submit" id="SUBMIT"
                                value="SUBMIT" styleClass="commandButton"
                                action="#{addQuestionBean.doSubmit }">

                            </h:commandButton> <h:commandButton id="CANCEL" value="CANCEL"
                                action="#{addQuestionBean.doCancel }" type="submit">

                            </h:commandButton></center></td>
                        </tr>
                </tbody>

                </TABLE>

        </h:form>

        <center><b><jsp:include page="footer.jsp" flush="true"></jsp:include></b></center>

    </body>

</f:view> 
```

# php - 使用 PHP 和 HTML 使用进度条上传多个文件

> ID：15144748
> 
> 赞同：1
> 
> 时间：2013-02-28T20:10:46.463
> 
> 标签：php, html, file-upload, cross-browser

我最近创建了一个脚本，允许人们使用 PHP 后端和 HTML 表单上传多个文件。我想实现一个进度条，以便用户在上传多个文件时不会两次单击上传按钮。如果可能，我想避免使用 javascript 或 ajax，但同时我希望跨浏览器兼容。

这是我的 html 表单数据：

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
Choose Course Code:
<select name="subject_list">
<option value="ACC 100">ACC 100</option>
<option value="ACC 406">ACC 406</option>
<option value="ECN 104">ECN 104</option>
<option value="ECN 204">ECN 204</option>
<option value="FIN 300">FIN 300</option>
<option value="GMS 200">GMS 200</option>
<option value="ITM 100">ITM 100</option>
<option value="ITM 301">ITM 301</option>
<option value="ITM 305">ITM 305</option>
<option value="ITM 330">ITM 330</option>
<option value="ITM 350">ITM 350</option>
<option value="ITM 407">ITM 407</option>
<option value="ITM 500">ITM 500</option>
<option value="ITM 501">ITM 501</option>
<option value="ITM 505">ITM 505</option>
<option value="ITM 600">ITM 600</option>
<option value="LAW 122">LAW 122</option>
<option value="SSH 105">SSH 105</option>
<option value="Other">Other</option>
</select><br>
Choose a file to upload (Max 500MB): <input name="rye_file[]" type="file" id="file_style" multiple />
<input type="submit" name="submit" value="Upload" />
</form> 
<form action="/logout.php">
<input type="submit" value="Logout">
</form> 
```

这是我的后端：

```
<?php
$subject_list = $_POST['subject_list'];
$uploaddir = "/var/www/fixnode_website/content/Secure Login/Rye High/uploads/$subject_list";
$files=array();
$fdata=$_FILES['rye_file'];
if(is_array($fdata['name'])){
 for($i=0;$i<count($fdata['name']);++$i){
  $files[]=array(
   'name'     => $fdata['name'][$i],
   'tmp_name' => $fdata['tmp_name'][$i],
  );
 }
}
else $files[]=$fdata;

foreach ($files as $file) {
  // uploaded location of file is $file['tmp_name']
  // original filename of file is $file['name']
  $move_file = move_uploaded_file($file['tmp_name'], "$uploaddir/".$file['name']);
}
if($move_file){
   echo "File is valid, and was successfully uploaded to: $subject_list folder. Please wait, your browser will refresh in 5-10 seconds!";
   header('Refresh: 10; URL=/index.php');
  } 
  else {
     echo "Upload failed";
 }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:56:40.003

这可能不是你想要的，但我建议你尝试

1.  uploadify [http://www.uploadify.com](http://www.uploadify.com) [免费] ，还有一个html5版本。有时，我尽量不重新发明轮子。
2.  如果您担心上传费用，blueimp 怎么样 [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)
3.  非常喜欢 HTML5，请尝试 [http://www.igloolab.com/jquery-html5-uploader/](http://www.igloolab.com/jquery-html5-uploader/) *（您可以通过 Tweet 或 Facebook 帖子支付此费用。这有多棒？）*
4.  其他一些选项： [http ://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)
5.  价值：[https](https://github.com/valums/file-uploader) ://github.com/valums/file-uploader （fine_uploader 一次性支付 15 美元）- 很有意义。

请注意，如果您同意的话，您必须使用 Jquery。

# ajax - AngularJs 2 在手表中承诺第二个永远不会工作

> ID：15144749
> 
> 赞同：0
> 
> 时间：2013-02-28T20:10:48.583
> 
> 标签：ajax, angularjs, promise

我的应用程序中有 2 个列表，用户应该将项目从一个列表拖放到另一个列表。
当用户从一个列表中删除一个元素到另一个列表时，必须向服务器端代码发出请求以更新数据库中的字段 (SelectedForDiscussion)。
这是我的控制器中的代码：

```
$scope.$watch("questionsDiscuss", function (value) {
    var question = $.Enumerable.From($scope.questionsDiscuss).Where(function (item) { return !item.SelectedForDiscussion }).FirstOrDefault()
    if (question != undefined) {

        questionSelectionService.UpdateQuestionSelectionStatus(question.Id, true)
        .then(function (output) {

            var question = $.Enumerable.From($scope.questionsDiscuss)
                                .Where(function (item) { return item.Id == output.data.questionId })
                                .FirstOrDefault();
            var index = $.Enumerable.From($scope.questionsDiscuss).IndexOf(question);

            if (question != undefined)
                if (output.data.result != "success") {
                    $scope.questionsDiscuss.splice(index, 1);
                    $scope.questionsReceived.splice(0, 0, question);
                }
                else {
                    question.SelectedForDiscussion = true;
                    $scope.questionsDiscuss[index] = question;
                }
        });
    }
    else {
        var question = $.Enumerable.From($scope.questionsReceived).Where(function (item) { return item.SelectedForDiscussion }).FirstOrDefault();
        if (question != undefined) {
            questionSelectionService.UpdateQuestionSelectionStatus(question.Id, false)
            .then(function (output) {
                var question = $.Enumerable.From($scope.questionsReceived)
                                .Where(function (item) { return item.Id == output.data.questionId })
                                .FirstOrDefault();
                var index = $.Enumerable.From($scope.questionsReceived).IndexOf(question);

                if (question != undefined)
                    if (output.data.result != "success") {
                        $scope.questionsReceived.splice(index, 1);
                        $scope.questionsDiscuss.splice(0, 0, question);
                    }
                    else {
                        question.SelectedForDiscussion = false;
                        $scope.questionsReceived[index] = question;
                    }
            });
        }

    }

}, true); 
```

我在 Firebug 中的以下行放置了 4 个 javascript 断点：
其中 2 个位于以下行：

```
if (question != undefined) { 
```

一个在：

```
var question = $.Enumerable.From($scope.questionsDiscuss)
    .Where(function (item) { 
        return item.Id == output.data.questionId 
     }) 
    .FirstOrDefault(); 
```

另一个在：

```
var question = $.Enumerable.From($scope.questionsReceived)
    .Where(function (item) { 
         return item.Id == output.data.questionId 
     })
    .FirstOrDefault(); 
```

会发生以下情况：

断点在：

```
if (question != undefined) { 
```

总能达到。

断点在

```
var question = $.Enumerable.From($scope.questionsDiscuss) 
    .Where(function (item) { 
         return item.Id == output.data.questionId 
    })
    .FirstOrDefault(); 
```

也达到了。
另一个永远达不到。
两个响应都正常（响应代码 200）。
一切都应该完美运行，但永远不会达到第二个承诺中的 then 子句。
谁能告诉我我做错了什么？
服务器端应用程序是一个用 C# 编写的 ASP.NET MVC 应用程序。

编辑 1：我知道为什么会发生这种情况，并且我有一个解决方法。我仍然对实际的解决方案感兴趣。
问题是 angularjs 抛出一个错误，然后在第二次调用 $http 时将其吞下。错误是：

> 已经在消化

我认为这是因为在我的指令中我有以下代码：

```
dndfunc = function (scope, element, attrs) {

    // contains the args for this component
    var args = attrs.dndBetweenList.split(',');
    // contains the args for the target
    var targetArgs = $('#' + args[1]).attr('dnd-between-list').split(',');

    // variables used for dnd
    var toUpdate;
    var target;
    var startIndex = -1;

    // watch the model, so we always know what element
    // is at a specific position
    scope.$watch(args[0], function (value) {
        toUpdate = value;
    }, true);

    // also watch for changes in the target list
    scope.$watch(targetArgs[0], function (value) {
        target = value;
    }, true);

    // use jquery to make the element sortable (dnd). This is called
    // when the element is rendered
    $(element[0]).sortable({
        items: 'div',
        start: function (event, ui) {
            // on start we define where the item is dragged from
            startIndex = ($(ui.item).index());
        },
        stop: function (event, ui) {
            var newParent = ui.item[0].parentNode.id;

            // on stop we determine the new index of the
            // item and store it there
            var newIndex = ($(ui.item).index());
            var toMove = toUpdate[startIndex];

            // we need to remove him from the configured model
            toUpdate.splice(startIndex, 1);

            if (newParent == args[1]) {
                // and add it to the linked list
                target.splice(newIndex, 0, toMove);
            } else {
                toUpdate.splice(newIndex, 0, toMove);
            }

            // we move items in the array, if we want
            // to trigger an update in angular use $apply()
            // since we're outside angulars lifecycle
            scope.$apply(targetArgs[0]);
            scope.$apply(args[0]);
        },
        connectWith: '#' + args[1]
    })
} 
```

我认为最后有 2 个调用会触发一个新的摘要周期。
无论如何，我通过在应用调用之前添加此调用来修复它：

```
 if (scope.updateLists != undefined)
                scope.updateLists(); 
```

并将所有代码从手表移到 updateLists 函数中。

另外因为人们提到该服务与它有关，所以我将相关代码粘贴在其中：

```
GetQuestionsReceived: function (eid, criteria, page, rows) {

    var promise = this.GetQuestionsReceivedInternal(eid,criteria, page, rows).then(function (response) {
        // The return value gets picked up by the then in the controller.
        return response;
    });
    // Return the promise to the controller
    return promise;
},

GetQuestionsReceivedInternal: function (eid, criteria, page, rows) {

    return $http({ method: 'GET',
        url: '../QuestionManagement/GetQuestions?eventId='+eid+'&page=1&rows=5&'+serialize(criteria)
    }).
      success(function (data, status, headers, config) {
          // this callback will be called asynchronously
          // when the response is available
          results = data;
      }).
      error(function (data, status, headers, config) {
          // called asynchronously if an error occurs
          // or server returns response with an error status.
          if (window.console && console.log) {
              console.log("Could not obtain questions received. Error:" + data + "Status:" + status + "Headers:" + headers + "Config:" + config);
          }
      });
},

  GetQuestionsDiscuss: function (eid,criteria, page, rows) {

    var promise = this.GetQuestionsDiscussInternal(eid,criteria, page, rows).then(function (response) {
        // The return value gets picked up by the then in the controller.
        return response;
    });
    // Return the promise to the controller
    return promise;
},

GetQuestionsDiscussInternal: function (eid,criteria, page, rows) {

    return $http({ method: 'GET',
        url: '../QuestionManagement/GetQuestions?eventId=' + eid + '&page=1&rows=5&' + serialize(criteria)
    }).
      success(function (data, status, headers, config) {
          // this callback will be called asynchronously
          // when the response is available
          response = data;
      }).
      error(function (data, status, headers, config) {
          // called asynchronously if an error occurs
          // or server returns response with an error status.
          if (window.console && console.log) {
              console.log("Could not obtain questions received. Error:" + data + "Status:" + status + "Headers:" + headers + "Config:" + config);
          }
      });

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:18:33.890

你有两个非常相似的代码块，它们可以被概括并放在一个函数包装器中，留下一个非常简单的调用函数。

如果你能把所有东西都变成那种形式，那么我认为你会发现它更容易调试。

这是一个尝试这样做：

```
function updateSelectionStatus(qA, qB, bool) {
    var en = $.Enumerable.From(qA);
    var question = en.Where(function (item) {
        return bool ? !item.SelectedForDiscussion : item.SelectedForDiscussion;
    }).FirstOrDefault();
    if(question) {
        questionSelectionService.UpdateQuestionSelectionStatus(question.Id, bool).then(function (output) {
            if (output.data.result == "success") {
                question.SelectedForDiscussion = bool;
            }
            else {
                qA.splice(en.IndexOf(question), 1);
                qB.unshift(question);
            }
        });
    }
    return question;
}

$scope.$watch("questionsDiscuss", function (value) {
    if (!updateSelectionStatus($scope.questionsDiscuss, $scope.questionsReceived, true) {
        updateSelectionStatus($scope.questionsReceived, $scope.questionsDiscuss, false);
    }
}, true); 
```

我可能做了一些错误的假设并且过于简化（例如清除内部`$.Enumerable.From`，这似乎重新选择了与外部相同的问题），因此您可能需要重新编写我的代码。

我在这里提倡一个原则，而不是提供一个解决方案。

# php - Firefox live http headers, Cache-Control: no-cache 之后的花括号

> ID：15144753
> 
> 赞同：0
> 
> 时间：2013-02-28T20:11:12.747
> 
> 标签：php, javascript

我正在设置一个 php cURL 脚本来复制我在实时标题中看到的内容。这是一个例子。

```
Cache-Control: no-cache
{"username":"me@mydomain.com","password":"mypass","namespaceId":"50000003"} 
```

他们使用 javaScript 来登录用户，而我以前从未见过这种情况。通常，如果传输了 cookie 或表单数据，则会在标题中注明。

我将如何用 cURL 发送它？

如果您打开实时 http 标头并访问[此 URL](https://merchantcenter.intuit.com/msc/portal/login)，请输入无效的用户名并通过您将看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:19:16.430

我写的这门课可以帮助你

```
 function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          print_r($response);
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

 class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_replace_callback("~(.*?)=(.*?);~si",function($m){$this->Cookie[trim($m[1])]=trim($m[2]);},' '.$Cookie.'; ');
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

样本：

```
 $cc = new cURL(); 
  print_r( $cc->POST('http://www.domain.com','username=me@mydomain.com;password=mypass;namespaceId=50000003"')); 
```

对于旧的 php

```
function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_match("~(.*?)=(.*?);~si",' '.$Cookie.'; ',$M);
       $this->Cookie[trim($M[1])]=trim($M[2]);
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
            if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

样本：

```
 $cc = new cURL(); 
  print_r( $cc->POST('http://www.domain.com','username=me@mydomain.com;password=mypass;namespaceId=50000003"')); 
```

# java - 将 arrayList 与自身进行比较

> ID：15144757
> 
> 赞同：3
> 
> 时间：2013-02-28T20:11:20.790
> 
> 标签：java, arrays, arraylist

如果我有一个`arrayList`（为简单起见）包含`A,B,C`

我想将这些值与自己进行比较，而不将任何内容与自身进行比较，也不将相同的两个值进行两次比较......

我该怎么做？

现在我有以下

```
for(Double db : arrayList)
{
    for(Double db2 : arrayList)
    {
        if(db2 != db)
        {
            //compare
        }
    }
} 
```

但这并不能消除首先将 A 与 B 进行比较，然后将 B 与 A 进行比较的情况......

有任何想法吗？

提前致谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:13:24.023

听起来您可能只想按*索引*进行：

```
for (int i = 0; i < arrayList.size() - 1; i++) {
    Double db = arrayList.get(i);
    for (int j = i + 1; j < arrayList.size(); j++) {
        Double db2 = arrayList.get(j);

        // Don't use == unless you *really* want reference identity
        if (!db2.equals(db)) {
            ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:14:53.120

使用[`subList(int fromIndex, int toIndex)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#subList%28int,%20int%29)：

```
List<Double> arrayList = ...;
int length = arrayList.size();

for(int i = 0; i < length - 1; i++)
{
    Double db1 = arrayList.get(i);
    for(Double db2 : arrayList.subList(i + 1, length))
    {
        // ...
    }
} 
```

# python - python - 打破嵌套条件到原始循环的顶部

> ID：15144758
> 
> 赞同：0
> 
> 时间：2013-02-28T20:11:22.417
> 
> 标签：python, loops

我的这部分代码有问题：

```
if(input not in status_list):
    print("Invalid Entry, try again.")
    break 
```

break 退出整个程序，我只想回到程序的开头（到*while(1):)*
我试过 pass，continue，return 想不出别的了。。谁能帮忙？？谢谢:)
**它还**在将这个变量收入作为字符串读取..：`income = int(input("Enter taxable income: "))`我收到的错误消息是“TypeError：'str' object is not callable”

```
import subprocess
status_list = ["s","mj","ms","h"]

while(1):
    print ("\nCompute income tax: \n")
    print ("Status' are formatted as: ")
    print ("s = single \n mj = married and filing jointly \n ms = married and filing seperately \n h = head of household \n q = quit\n")
    input = input("Enter status: ")
    if(input == 'q'):
        print("Quitting program.")
        break
    if(input not in status_list):
        print("Invalid Entry, try again.")
        break 

    income = int(input("Enter taxable income: "))
    income.replace("$","")
    income.replace(",","")

    #passing input to perl files
    if(input == 's'):
        subprocess.call("single.pl")
    elif(input == 'mj'):
        subprocess.call("mj.pl", income)
    elif(input == 'ms'):
        subprocess.call("ms.pl", income)
    else:
        subprocess.call("head.pl", income) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:17:25.943

```
input = input("Enter status: ") 
```

`input`您将函数的名称重新绑定`input`到它的结果，它是一个字符串。所以下次你调用它时，在`continue`它工作之后，`input`不再命名一个函数，它只是一个字符串，你不能调用一个字符串，因此

```
TypeError: 'str' object is not callable 
```

使用`continue`, 并更改您的变量名称，以免破坏函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:23:51.580

您的问题没有继续，而是您的代码中有一个未解决的错误。继续正在做它应该做的事情（即你想要`continue`在那个条件下）。

您将重命名`input`为字符串，因此名称不再指向`input`代码中的内置函数。这就是为什么不使用保留关键字作为变量名的原因。将您的变量称为“输入”以外的其他名称，您的代码应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:32:22.193

继续正常工作。您的脚本的问题是您试图在 int 上调用 replace()：

```
income = int(input("Enter taxable income: "))
# income is an int, not a string, so the following fails
income.replace("$","") 
```

你可以这样做：

```
income = int(input("Enter taxable income: ").replace("$", "").replace(",", "")) 
```

# jquery - jquery mobile 1.3远程自动完成无法在动态创建的列表中选择元素

> ID：15144761
> 
> 赞同：2
> 
> 时间：2013-02-28T20:11:30.440
> 
> 标签：jquery, jquery-mobile

当我单击“upperUlProductSearch”类时设置了一个警报，但是当我单击 ajax 创建列表中的 li 时，我没有得到响应。我还有一个 a 标签和另一个静态 ul li，它们具有相同的类，单击时确实会给我警报。我希望有人能帮我弄清楚为什么我不能定位 ajax li 或正确的方法。提前致谢！！！

jQuery：

```
$( document ).on( "pageinit", "#template", function() {
$( "#upperApplianceSearch" ).on( "listviewbeforefilter", function ( e, data ) {
    var $ul = $( this ),
        $input = $( data.input ),
        value = $input.val(),
        html = "";
    $ul.html( "" );
    if ( value && value.length > 1 ) {
        $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
        $ul.listview( "refresh" );
        $.ajax({
            url: "productautocomplete.php",
            type: "POST",
            dataType: "json",
            data: {
                q: $input.val()
            }
        })
        .then( function (data) {
            $.each( data, function ( i, val ) {
                /*html += "<li><a href='#' data-role='none' value=" + val.productId + ">" + val.productName + "</a></li>";*/
                html += '<li class="upperUlProductSearch" id=' + val.productId + '>' + val.productName + '</li>';
            });
            $ul.html( html );
            $ul.listview( "refresh" );
            $ul.trigger( "updatelayout");
        });
    }
});
})

$(".upperUlProductSearch").click(function() {
alert ("helleo");
}); 
```

html:

```
<ul id="upperApplianceSearch" class="ui-listview ui-listview-inset ui-
corner-all ui-shadow" data-filter-theme="d" data-filter-placeholder="Find an  
appliance..." data-filter="true" data-icon="false" data-inset="true" data- 
role="listview">

<li id="41" class="upperUlProductSearch ui-li ui-li-static ui-btn-up-f ui- 
first-child ui-last-child">Hawley</li>
</ul>

<a class="upperUlProductSearch ui-link">Hello</a>

<ul class="ui-listview" data-role="listview">
  <li class="upperUlProductSearch ui-li ui-li-static ui-btn-up-f ui-first- child ui-last-child">Li Test</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:46:10.220

代替：

```
$(".upperUlProductSearch").click(function() {
    alert("helleo");
}); 
```

和：

```
$('#upperApplianceSearch').on('click', 'li', function () {
    alert("helleo");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:29:31.187

这应该有效：

1.  制作一个列表容器，例如`<div id="product-list-container">...</div>`.
2.  像这样重新创建列表：

    ```
    $('#product-list-container')
        .empty()
        .html('<ul id="product-list" data-role="listview"...>'+listItems+'</ul>')
    ;

    $('#product-list').listview(); 
    ```

您可能还需要触发整个页面的重新渲染，所以最后一行是：

```
 $('#page-containing-list').page();
    $('#product-list').listview(); 
```

我在我的一个项目中做到了这一点，并且效果很好。

还可以查看 Opera Dragonfly 或 Firebug 等调试器中的列表会发生什么。JQM 不仅添加了额外的属性，还添加了额外的元素，甚至可能使原始元素（您监听点击的地方）隐藏或可访问。

# ios - Facebook FQL：在 iOS 下获取具有纬度和经度的用户事件

> ID：15144763
> 
> 赞同：0
> 
> 时间：2013-02-28T20:11:34.493
> 
> 标签：ios, facebook-graph-api, facebook-fql

我正在拼命地尝试获取具有纬度和经度的用户事件。我现在正在使用这个查询，但它返回一个空的结果集，我不知道为什么。

```
NSString *eventInfo = @"SELECT name, eid, venue.id, location, start_time, end_time from event WHERE eid IN (SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='attending' OR rsvp_status='maybe'))";

NSString *placeInfo = @"SELECT page_id, name, latitude, longitude FROM place WHERE page_id IN (SELECT venue.id FROM #event)";

NSDictionary *multiQuery = [[NSDictionary alloc] initWithObjectsAndKeys: eventInfo, @"event", placeInfo, @"place", nil];

NSDictionary *queryParams = [NSDictionary dictionaryWithObjectsAndKeys: multiQuery, @"q", accessToken, @"access_token", nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T21:28:51.237

如果您只希望查询执行此操作：

```
{
    "events" : "SELECT privacy, name, description, start_time, venue.id, pic_cover FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = me())",
    "venues" : "SELECT latitude, longitude, name, page_id FROM place WHERE page_id IN (SELECT  venue.id FROM #events)"
} 
```

请注意，您需要使用 Objective-c 手动进行连接。facebook 能给我们的只是一个事件列表，以及与事件相关的场地列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:31:35.900

首先，您不需要第二次查询：您需要的关于在第一次查询中可以收到的地点的所有信息，`venue`都是一个具有名称和坐标的复杂对象。

因此，当您运行查询时

```
SELECT name, eid, venue, location, start_time, end_time from event WHERE eid IN (SELECT eid FROM event_member WHERE uid = me() and  rsvp_status='attending' OR rsvp_status='maybe') 
```

你应该得到`venue`数组中的所有场地信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T12:24:07.340

试试这个查询，它将返回关于即将发生的事件的几乎所有内容

```
SELECT eid,name,description,venue,creator,location,ticket_uri,start_time, eid,host,not_replied_count,pic_square,pic_big,unsure_count,attending_count,declined_count,all_members_count FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = me()) AND start_time > now( 
```

# cakephp - 如何使用 cakeDC searchplugin 解决 cakePHP 中的分页错误

> ID：15144764
> 
> 赞同：0
> 
> 时间：2013-02-28T20:11:38.040
> 
> 标签：cakephp, search, plugins, cakephp-2.3, cakedc

我正在使用来自 cakeDC ( [https://github.com/CakeDC/search](https://github.com/CakeDC/search) ) 的 searchplugin 和 cakePHP 2.3.0。该插件工作正常。我在这样的索引操作中有一点错误。感谢那。

```
Indirect modification of overloaded property AtlasController::$paginate has no effect [APP\Controller\AtlasController.php, line 47] 
```

我的索引操作

```
public function index() {
    $this->Prg->commonProcess();
    $this->paginate['conditions'] = $this->Atla->parseCriteria($this->passedArgs);
    $this->Atla->recursive = 0;
    $this->set('atlas', $this->paginate());
    $this->set('_serialize',array('atlas'));
} 
```

问题是，我该如何解决？所以我发现了一种简单易行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:11:38.040

所以这就是解决方案，它在我的实现上运行。

我更改了 paginate() 调用。

```
$this->set('atlas', $this->paginate()); 
```

到新的 paginate() 调用。

```
this->set('atlas', $this->paginate($this->Atla->parseCriteria($this->passedArgs))); 
```

这里是新的索引操作。

```
public function index() {
    $this->Prg->commonProcess();
    $this->Atla->recursive = 0;
    $this->set('atlas', $this->paginate($this->Atla->parseCriteria($this->passedArgs)));
    $this->set('_serialize',array('atlas'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T08:41:46.967

我相信代码不能开箱即用的原因是`['options']`关键。从中删除键`$this->paginate['options']`并将模型添加为分页的参数，
`$this->set()`并且分页应该按预期工作。请参阅下面的修改后的代码示例。

```
public function index() {
    $this->Prg->commonProcess();
    $this->paginate = $this->Atla->parseCriteria($this->passedArgs);
    $this->Atla->recursive = 0;
    $this->set('atlas', $this->paginate('Atla'));
    $this->set('_serialize',array('atlas'));
} 
```

# sql - 列出在另一组记录的 x 小时内出现的所有 SQL 记录

> ID：15144776
> 
> 赞同：2
> 
> 时间：2013-02-28T20:12:15.757
> 
> 标签：sql, sql-server, select, nested-sets, self-join

我什至接近这个？
我正在尝试列出所有包含“Ape”的记录......以及在任何“Ape”记录之前 x 天出现的所有记录。我想我需要一个自连接表？

```
-- Doesn't work:
SELECT tblA.MyDate, tblA.MyPet  FROM TestTable As tblA                      WHERE tblA.MyPet='Ape'
UNION
SELECT tblA.MyDate, tblA.MyPet  FROM TestTable AS tblA, TestTable AS tblB   WHERE tblA.MyPet='Ape' AND tblA.MyDate>tblB.MyDate-0.5 AND tblA.MyDate<tblB.MyDate
ORDER BY tblA.MyDate ASC

-- Doesn't work:
SELECT * FROM TestTable As tblA     INNER JOIN TestTable As tblB ON tblA.MyPet =         'Ape'     AND tblA.MyDate>tblB.MyDate-1  AND tblA.MyKey>tblB.MyKey

-- Doesn't work:
SELECT * FROM TestTable WHERE MyDate IN (SELECT MyDate-1 FROM TestTable WHERE MyPet='Ape')

-- Doesn't work
SELECT id, uid, date FROM orders current
WHERE EXISTS 
(
   SELECT * from orders future 
   WHERE future.date < DateAdd(DAYS, 1, current.date)
   AND future.date > getdate()
   AND future.uid = current.uid
)

-- Doesn't work
SELECT * FROM TestTable AS tblA
WHERE EXISTS
( 
   SELECT * FROM TestTable AS tblB
   WHERE tblB < DateAdd(DAYS, 1, tblA.MyDate)
   AND tblB.MYDate > GetDate()
   AND tblA.MyKey = tblB.MyKey
) 
```

============================ 以下是表格：

```
CREATE TABLE TestTable   
(
MyKey       Int             IDENTITY(1,1)   PRIMARY KEY,     

MyDate      DateTime        NOT NULL    DEFAULT GetDate(),
MyPet       VarChar(22)     NOT NULL    DEFAULT ''
)

INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 06:12:10', 'Cat'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 10:11:10', 'Dog'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 14:13:10', 'Fish'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 16:14:10', 'Duck'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 17:15:10', 'Bird'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('01-Dec-2012 20:16:10', 'Kitten')
INSERT INTO TestTable(MyDate, MyPet)   VALUES('02-Dec-2012 01:17:10', 'Dog'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('02-Dec-2012 12:19:10', 'Fish'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('02-Dec-2012 13:20:10', 'Duck'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('02-Dec-2012 14:21:10', 'Bird'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('02-Dec-2012 16:18:10', 'Cat'   )     -- These are within 1 day before any "Ape" record

INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 05:26:10', 'Dog'   )     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 11:22:10', 'Kitten')     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 12:23:10', 'Duck'  )     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 13:24:10', 'Bird'  )     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 14:25:10', 'Ape'   )     -- An "Ape" record
INSERT INTO TestTable(MyDate, MyPet)   VALUES('03-Dec-2012 16:27:10', 'Cat'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('04-Dec-2012 01:32:10', 'Dog'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('04-Dec-2012 04:28:10', 'Fish'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('04-Dec-2012 07:30:10', 'Bird'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('04-Dec-2012 10:31:10', 'Kitten')
INSERT INTO TestTable(MyDate, MyPet)   VALUES('04-Dec-2012 16:29:10', 'Duck'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('05-Dec-2012 11:35:10', 'Kitten')
INSERT INTO TestTable(MyDate, MyPet)   VALUES('05-Dec-2012 12:36:10', 'Duck'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('05-Dec-2012 13:33:10', 'Duck'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('05-Dec-2012 13:37:10', 'Bird'  )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('05-Dec-2012 14:34:10', 'Dog'   )
INSERT INTO TestTable(MyDate, MyPet)   VALUES('06-Dec-2012 04:41:10', 'Fish'  )     -- These are within 1 day before any "Ape" record
INSERT INTO TestTable(MyDate, MyPet)   VALUES('06-Dec-2012 05:39:10', 'Dog'   )     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('06-Dec-2012 14:38:10', 'Kitten')     --
INSERT INTO TestTable(MyDate, MyPet)   VALUES('06-Dec-2012 16:40:10', 'Ape'   )     -- An "Ape" record
INSERT INTO TestTable(MyDate, MyPet)   VALUES('06-Dec-2012 16:42:10', 'Duck'  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:35:06.500

这就是你想要的：

```
SELECT DISTINCT
    tblA.*
FROM TestTable AS tblA
    INNER JOIN TestTable AS tblB
        ON (tblA.MyDate >= DATEADD(day, -1, tblB.MyDate)) AND (tblA.MyDate <= tblB.Mydate) AND (tblB.MyPet = 'Ape'); 
```

这是有效的[SQLFiddle](http://www.sqlfiddle.com/#!6/c91a0/4/0)。

**更新**

`DISTINCT`根据 Gordon 在下面的评论添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:13:41.163

我认为您正在寻找的配方是：

```
SELECT *
FROM TestTable tblA
WHERE EXISTS (SELECT *
              FROM TestTable tblB
              WHERE tblB.mydate between tblA.MyDate - X and tblA.MyDate and
                    tblB.MyPet = 'Ape'
             ) 
```

两个笔记。首先，这使用语法“date - x”，当 date 是 a`datetime`但不是 a时有效`date`。它相当于`dateadd(day, -x, tbla.MyDate)`。

其次，这将返回所有带有 'Ape' 的记录，因为它`between`处理相等性。

Jesse 的查询使用外连接和 distinct 基本上做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:27:14.940

1.  过程：分别编写查询的每一半，并测试它是否有效。然后将它们与 UNION 放在一起。
2.  如果要删除重复项，请使用 UNION ALL 而不是 UNION。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:40:14.230

[SQL小提琴](http://sqlfiddle.com/#!3/7594c/3)

**查询 1**：

```
-- Doesn't work:
SELECT tblA.MyDate, tblA.MyPet  
FROM TestTable As tblA
WHERE tblA.MyPet='Ape'
UNION all
SELECT tblA.MyDate, tblA.MyPet  
FROM TestTable AS tblA
WHERE dateadd(day, 1, tblA.MyDate) < (select min(MyDate) from TestTable where MyPet = 'Ape')
ORDER BY tblA.MyDate ASC 
```

**[结果](http://sqlfiddle.com/#!3/7594c/3/0)**：

```
|                          MYDATE |  MYPET |
--------------------------------------------
| December, 01 2012 06:12:10+0000 |    Cat |
| December, 01 2012 10:11:10+0000 |    Dog |
| December, 01 2012 14:13:10+0000 |   Fish |
| December, 01 2012 16:14:10+0000 |   Duck |
| December, 01 2012 17:15:10+0000 |   Bird |
| December, 01 2012 20:16:10+0000 | Kitten |
| December, 02 2012 01:17:10+0000 |    Dog |
| December, 02 2012 12:19:10+0000 |   Fish |
| December, 02 2012 13:20:10+0000 |   Duck |
| December, 02 2012 14:21:10+0000 |   Bird |
| December, 03 2012 14:25:10+0000 |    Ape |
| December, 06 2012 16:40:10+0000 |    Ape | 
```

**编辑**

如果您需要在第一个 Ape 记录之前的 x 天内发生**的**记录，则查询应该是（例如 x = 1）

```
SELECT tblA.MyDate, tblA.MyPet  
FROM TestTable As tblA
WHERE tblA.MyPet='Ape'
UNION
SELECT tblA.MyDate, tblA.MyPet  
FROM TestTable AS tblA
WHERE (select min(MyDate) from TestTable where MyPet = 'Ape') between tblA.MyDate and dateadd(day, 1, tblA.MyDate)
ORDER BY tblA.MyDate ASC 
```

# windows-store-apps - 如何确定我运行的是侧载应用程序还是商店安装的应用程序？

> ID：15144778
> 
> 赞同：1
> 
> 时间：2013-02-28T20:12:21.247
> 
> 标签：windows-store-apps

为了测试，知道我是从 Visual Studio 运行的会很好。我可以查看是否附加了调试器，但如果我使用 CTRL+F5 运行，这还不够。

以下是查看调试器是否已附加的方法：

```
if (Debugger.IsAttached) Foo(); 
```

但我的问题是，我想知道是否有办法询问当前应用程序是否来自商店。所以，我想到了安装文件夹，但它们是相同的。然后我想到了这个：

```
Windows.ApplicationModel.Package.Current.Id; 
```

但这似乎已完全实现，即使对于正在调试的应用程序也是如此。所以，我很难过。有谁知道我们是否可以确定该应用程序是否来自商店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:41:30.043

虽然肯定不是最优雅的解决方案，而且可能有更好的解决方案，但您可以查看

```
Package.Current.InstalledLocation.Path
```

如果您正在运行在本地计算机上开发的调试版本并且没有侧面加载，那么您的文件夹路径中将包含 /debug/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T15:32:38.863

在 Windows 10 应用程序中（这也应该在 8.1 中可用），您可以检查`IsDevelopmentMode`当前包的属性。

`Package.Current.IsDevelopmentMode`

这应该告诉您该软件包是否以开发模式安装（我认为这是“侧面加载”的同义词）。

有关详细信息，请参阅[https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.isdevelopmentmode.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.isdevelopmentmode.aspx) 。

# less - LESS Mixin Bug on :after Pseudo Selector

> ID：15144784
> 
> 赞同：4
> 
> 时间：2013-02-28T20:12:40.577
> 
> 标签：less

我刚刚发现了一个奇怪的情况。:after 伪选择器似乎有一个错误

请检查以下代码，并查看内联注释

```
.nav-prev a{
    left:20px;
    &:before {
        top: 75%;
        .chevron-line;
        .rotate ();
    }
    // this mixin is causing an error and it wouldn't compile
    &:after {
        top: 25%;
        .chevron-line;
        .rotate (-45deg);
    }​
}

// // this is the fix applied for the previous error
// .nav-prev a:after {
//  top: 25%;
//  .chevron-line;
//  .rotate (-45deg);
// }​

.nav-next a{
    right:20px;
    &:before{
        top: 25%;
        .chevron-line;
        .rotate ();
    }
    // strangely this one works and compile correctly
    &:after{
        top: 75%;
        .chevron-line;
        .rotate (-45deg);
    }
} 
```

注意：我使用 LiveReload 进行编译。

**问题**

我的语法有什么问题？或者它是一个更少的错误？或者它是一个编译器错误？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:37:47.720

当我将您的问题代码复制并粘贴[到此编译器](http://less2css.org/)中时，会出现一个隐藏字符，导致我出错。这个字符在上面给出的工作代码中*不存在*`.nav-next a`，所以它很可能是罪魁祸首。

```
.nav-prev a{
    left:20px;
    &:before {
        top: 75%;
        .chevron-line;
        .rotate ();
    }
    // this mixin is causing an error and it wouldn't compile
    &:after {
        top: 25%;
        .chevron-line;
        .rotate (-45deg);
    }​&lt;--HIDDEN "DOT" CHARACTER SHOWING UP RIGHT HERE
} 
```

# sql - 带参数的 SP_ExecuteSQL 不喜欢包含子句

> ID：15144786
> 
> 赞同：2
> 
> 时间：2013-02-28T20:12:45.693
> 
> 标签：sql, sql-server, sp-executesql

我的任务是修改存储过程，使其看起来像这样：

```
DECLARE @ID nvarchar(10)
SET @ID = '0000000001'

DECLARE @SQL nvarchar(200)
SET @SQL = 'SELECT AppN FROM Apps WHERE CONTAINS(ID, ''"*'' + @ID + ''*"'')'

EXECUTE SP_EXECUTESQL @SQL 
```

使用 SP_EXECUTESQL 的参数列表而不是字符串连接。问题是以下似乎不起作用：

```
DECLARE @CID nvarchar(10)
SET @CID = '0000000001'

DECLARE @ID2 nvarchar(14)
SET @ID2 = '"*' + @ID + '*"'

DECLARE @SQL nvarchar(200)
SET @SQL = 'SELECT AppN FROM Apps WHERE CONTAINS(ID, ID2)'

DECLARE @ParamDefinition NCHAR(300)
SET @ParamDefinition = '@ID2        nvarchar(10)'

EXECUTE SP_EXECUTESQL @SQL, @ParamDefinition, @ID2 
```

无论出于何种原因，第一组语句都可以正常工作。第二个没有。我收到以下错误消息：`Syntax error near '"' in the full-text search condition '"*00000000'.`

`@ID`如果我从第二组语句中删除 4 个字符也可以。显然，它与任何一个`@ID`或列的长度有关，`ID`但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:02:38.907

您在动态 SQL 的参数中定义`@ID2`as `nvarchar(10)`。

它实际上是**14 个字符**，所以你要切断它的结尾。

这为我输出了正确的变量：

```
DECLARE @CID nvarchar(10)
SET @CID = '0000000001'

DECLARE @ID2 nvarchar(14)
SET @ID2 = '"*' + @CID + '*"'

DECLARE @SQL nvarchar(200)
SET @SQL = 'SELECT @ID2'

DECLARE @ParamDefinition NCHAR(300)
SET @ParamDefinition = '@ID2        nvarchar(14)'

EXECUTE SP_EXECUTESQL @SQL, @ParamDefinition, @ID2 
```

# dynamics-crm-2011 - MS Dynamics：如何删除实体的所有关联

> ID：15144788
> 
> 赞同：0
> 
> 时间：2013-02-28T20:12:53.187
> 
> 标签：dynamics-crm-2011, dynamics-crm, entityreference

我有一个约会实体，它与联系实体有关联。我试图在没有明确提供contact_id 的情况下从此约会实体中删除所有关联。这是我的代码片段，其中包含创建约会实体，然后与现有联系人关联。

```
Entity activity = new Entity("appointment");
activity["scheduledstart"] = DateTime.Now;
activity["scheduledend"] = DateTime.Now.AddMinutes(30);
activity["subject"] = "Test Meeting";
activity["description"] = "Test Description";
activity["owneridname"] = "test_user";
activity["location"] = "Dallas";

EntityCollection attendees = new EntityCollection();
Entity attendee1 = new Entity("activityparty");
attendee1["addressused"] = "test.test@acmegroup.com";
attendees.Entities.Add(attendee1);
activity["requiredattendees"] = attendees;

Guid id = _service.Create(activity);
Console.WriteLine("id: " + id);

AssociateRequest associateRequest = new AssociateRequest();
associateRequest.Relationship = new Relationship("new_appointment_contact");
associateRequest.Target = new Microsoft.Xrm.Sdk.EntityReference("appointment", id);

EntityReferenceCollection referenceCollection = new EntityReferenceCollection();
Microsoft.Xrm.Sdk.EntityReference entityReference = new Microsoft.Xrm.Sdk.EntityReference("contact", new Guid("e6e71e53-b44b-e211-a81e-0050568b36bf"));
referenceCollection.Add(entityReference);
associateRequest.RelatedEntities = referenceCollection;

// Execute the request.
_service.Execute(associateRequest); 
```

我知道使用 DisassociateRequest 删除此关联，但我不想明确提供contact_id。我只需要像**.Clear()**这样可以删除所有联系人关联的东西。

```
DisassociateRequest disassociateRequest = new DisassociateRequest();
disassociateRequest.Relationship = new Relationship("new_appointment_contact");
disassociateRequest.Target = new Microsoft.Xrm.Sdk.EntityReference("appointment", id);

EntityReferenceCollection referenceCollection2 = new EntityReferenceCollection();
Microsoft.Xrm.Sdk.EntityReference entityReference2 = new Microsoft.Xrm.Sdk.EntityReference("contact", new Guid("e6e71e53-b44b-e211-a81e-0050568b36bf"));
referenceCollection2.Add(entityReference2);
disassociateRequest.RelatedEntities = referenceCollection2;

// Execute the request.
_service.Execute(disassociateRequest); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:23:16.740

我使用 GetRelatedEntities 方法将所有相关实体拉入集合，然后使用此集合解除所有相关实体的关联：

```
DisassociateRequest disassociateRequest = new DisassociateRequest();
disassociateRequest.Relationship = new Relationship("new_appointment_contact");
disassociateRequest.Target = new Microsoft.Xrm.Sdk.EntityReference("appointment", id);

EntityReferenceCollection referenceCollection2 = new EntityReferenceCollection();
Entity existingAppointment = _service.Retrieve("appointment", id, new ColumnSet(true));
foreach (Entity item in existingAppointment.GetRelatedEntities(orgContext, "new_appointment_contact"))
{
    Guid contactId = new Guid(item["contactid"].ToString());
    Microsoft.Xrm.Sdk.EntityReference entityReference2 = new Microsoft.Xrm.Sdk.EntityReference("contact", contactId);
    referenceCollection2.Add(entityReference2);
}
disassociateRequest.RelatedEntities = referenceCollection2;

_service.Execute(disassociateRequest); 
```

# batch-file - 将注册表树导出到 XML

> ID：15144789
> 
> 赞同：0
> 
> 时间：2013-02-28T20:12:56.240
> 
> 标签：batch-file, vbscript, registry

我想将注册表项及其子项导出为 XML 友好格式，而不是 .REG。这将仅用于报告目的，不用于以后导入。

执行以下代码时，它给了我想要的数据，只是不兼容 XML。关于如何创建可以满足我需要的批处理文件/vbs 的任何建议？

```
REG QUERY hklm\software\microsoft\windows\currentversion\uninstall /s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:06:30.607

我最终自己解决了这个问题。我使用 for 循环枚举每个注册表项，然后使用 echo 命令将信息输出到 CSV 文件和 XML 文档中。对于那些可能想要尝试做同样的事情的人来说，这是一个示例。（不是我的确切代码）

```
Echo ^<?xml version="1.0" encoding="ISO-8859-1"?^> >>myxml.xml
Echo ^<document^> >>myxml.xml
Echo ^<Computer Name="%Computername%"^> >>myxml.xml
Echo ^<Applications^> >>myxml.xml

for /f "tokens=7 delims=\" %%a in ('reg query HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall ^|findstr /v "KB1 KB2 KB3 KB4 KB5 KB6 KB7 KB8 KB9"') do ( 

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".displayVersion">version.txt
for /f "tokens=3*" %%c in (version.txt) do echo %%c %%d>version1.txt
if EXIST version1.txt set /p version=<version1.txt

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".displayName">Name.txt
for /f "tokens=3*" %%e in (Name.txt) do echo %%e %%f>Name1.txt
if EXIST name1.txt Set /p name=<name1.txt

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".InstallDate">InstallDate.txt
for /f "tokens=3*" %%j in (Installdate.txt) do echo %%j %%k>InstallDate1.txt
IF EXIST Installdate1.txt set /p installdate=<Installdate1.txt

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".UninstallString">UString.txt
for /f "tokens=3*" %%l in (Ustring.txt) do echo %%l %%m>Ustring2.txt
if exist Ustring2.txt type Ustring2.txt|findstr /v "&">Ustring1.txt
IF EXIST  Ustring1.txt set /p Ustring=<Ustring1.txt

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".Publisher">Publisher.txt
for /f "tokens=3*" %%n in (Publisher.txt) do echo %%n %%o>Publisher1.txt
IF EXIST Publisher1.txt set /p Publisher=<Publisher1.txt

reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%%a" |Findstr /i ".InstallLocation">Installloc.txt
for /f "tokens=3*" %%v in (Installloc.txt) do echo %%v %%w>Installloc1.txt
IF EXIST Installloc1.txt set /p Installloc=<Installloc1.txt

if NOT defined installdate set installdate=N/A
if NOT defined name set name=%%a
if NOT defined version set version=N/A
if NOT defined Ustring set Ustring=N/A
if NOT defined Publisher set Publisher=N/A
if NOT defined Installloc set Installloc=N/A
echo !name:^&=!'!version!'!Publisher:^&=!'!Installdate!'!Installloc:^&=!'!UString! >>programlist.csv
)

::Now Creating XML from CSV

for /f "tokens=1-6 delims='" %%p in (programlist.csv) DO (

echo ^<Product Name="%%p"^> >>myxml.xml
echo        ^<Version^>%%q^</Version^> >>myxml.xml
echo        ^<Publisher^>%%r^</Publisher^> >>myxml.xml
echo        ^<Installdate^>%%s^</Installdate^> >>myxml.xml
echo        ^<installLocation^>%%t^</installLocation^> >>myxml.xml
echo        ^<UninstallString^>%%u^</UninstallString^> >>myxml.xml

echo ^</Product^> >>myxml.xml
)

Echo ^</Applications^>  >>myxml.xml
echo ^</Computer^> >>myxml.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:23:02.097

一个计划：

1.  开始编写模式文件（xsd），让你思考节点/元素、属性和数据类型
2.  使用递归目录遍历器设计递归注册表遍历器（可能使用WMI）；查看 Scriptomatic2 用于将 WMI 信息导出到 XML 的方法
3.  （重新）阅读 XML 文档，重点是 Create/Clone 函数，以提出将注册表信息放入 XML 树的策略

（如果您发布了一个不错的计划，我愿意帮助您实施。）

# android - 如何在 onCreate 中指定要运行一次的活动

> ID：15144793
> 
> 赞同：1
> 
> 时间：2013-02-28T20:13:07.840
> 
> 标签：android, android-intent, manifest

我希望我的活动在安装后运行一次 onCreate 方法。这意味着如果我退出应用程序并返回 onresume 运行而不是 oncreate。我知道你可以设置一个 FLAGS_ACTIVITY... 有意图，但我想在清单中设置它。

谢谢马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:22:15.150

如果应用程序已被 android 操作系统关闭或用户杀死它，则您无法绕过 onCreate() 方法。也许您应该重新考虑编写程序以解决此问题的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:39:44.060

怎么样`android:launchMode="singleTask"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:27:14.937

就像我在评论中所说的那样，`onCreate()`如果您的活动被杀死，您将无法绕过。

为了解决您的问题，您可能应该将缓存代码`onCreate()`完全移出。`onResume()`是一个更好的地方。但是，除非您找到某种方法来检查操作是否已经发生，否则这不会解决您的问题。

# zend-framework2 - 具有动态内容的 ZF2 面包屑

> ID：15144797
> 
> 赞同：1
> 
> 时间：2013-02-28T20:13:29.587
> 
> 标签：zend-framework2, zend-navigation

如何使用 Zend Navigation 和 Breadcrumbs 视图助手在 ZF2 中创建具有动态内容的面包屑？例如：

主页 -> 人物 -> John Doe

在这种情况下，“John Doe”是您当前正在查看的个人资料页面，该页面加载了类似 /people/23424 的 uri，其中最后一个参数是人员的 id（可能有数千个）。

鉴于所有导航页面都是在服务配置中创建的，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:01:57.837

将导航添加到您的服务配置：

```
'navigation' => function($sm) {
    $navigation = new \Zend\Navigation\Service\DefaultNavigationFactory;
    $navigation = $navigation->createService($sm);
    /**
     * Do extra work here with the nav at instantiate time..
     */ 
 }, 
```

或更简单地说：

```
'navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory' 
```

现在您可以像这样获取要更改的项目：

```
$nav = $this->getServiceLocator()->get('navigation');
$page = $nav->findByLabel('My Label');
$page->setLabel('New Label'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:11:44.170

您可以使用会话并将面包屑存储在那里。不过，您可能希望将自己限制为 10 页。

# c# - C# TcpClient ReadAsync 读取大消息

> ID：15144800
> 
> 赞同：1
> 
> 时间：2013-02-28T20:13:33.810
> 
> 标签：c#, asynchronous, tcpclient

我有一个 C# TcpClient 来异步读取数据。简化代码如下：

```
public async Task StartReading(CancellationToken token)
{
    // To fit the largest package
    const int BufferSize = 524288;

    while(true)
    {
         var buffer = new byte[BufferSize];
         int bytesRead = await this.networkStream.ReadAsync(buffer, 0, BufferSize);
                                          .WithWaitCancellation(token);            

            if (bytesRead > 0)
            {
                 Console.Read(string.Fromat("{0} bytes received."));

                 // Run processing at background process
                 Task.Run(() => ProcessData(buffer, bytesRead));
            }
            else
            {
                // If received 0 bytes then a tcp connection is terminated
                break;
            }
    }
} 
```

收到的包可能包含一条或多条以 STX 开头并以 ETX 结尾的消息，不发送包长度。此 Feed 由第 3 方提供，不会更改。

在测试过程中，服务器似乎以 8192 个块发送数据，因此一条消息可能被分成两个后续块并且无法处理。
这是一个日志：
收到 8192 字节
消息 89 已处理 / 1 失败
8192 字节已接收
消息 89 已处理 / 2 失败
8192 字节已接收
消息 89 已处理 / 2 失败
2349 字节已接收
消息 34 已处理 / 1 失败

同步读取也无济于事。我该如何管理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:16:33.100

从根本上说，TCP 是一种*基于流的*协议。您试图将其视为基于*数据包的*协议。不要那样做。

数据提供了自己的分隔符 - 所以使用它。如果一条消息没有完全收到，记住这些字节，然后在收到消息的其余部分时处理它们。（请记住，在下一次读取调用中也可能不会完全接收到该消息......）

# sql - 运算符 AND 不是函数属性

> ID：15144802
> 
> 赞同：-8
> 
> 时间：2013-02-28T20:13:36.553
> 
> 标签：sql, sql-server, sql-server-2008

我正在 SQL Server 中创建一个过程，如下所示：

```
select 
  column1, 
  column2... 
from 
  table 
where 
  column1 = abc 
  and column2 = 245  
  and condition3 
  and condition4 
```

但是`SELECT`选择失败条件的值，我需要限制选择。例如：

```
column1 column2
 abc    123
 cdf    245
 ghi    678 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:48:03.710

尽管您的帖子中信息不完整，但我仍将对此进行尝试。

仅运算符链`AND`将要求每个表达式对返回的每一行都评估为真。这与重力一样基本。

简而言之，`AND`有效，但它并没有像您期望的那样工作。

这里可能发生的情况是您的查询中有其他您认为与问题无关的表达式。

例如

```
SELECT Column1,
       Column2,
       Column3
FROM myTable
WHERE Column1 = 'abc'
   AND Column2 = 123
   AND column3 = 'zyx'
   OR Column3 = 'xyz' 
```

在逻辑上完全不同于：

```
SELECT Column1,
       Column2,
       Column3
FROM myTable
WHERE Column1 = 'abc'
   AND Column2 = 123
   AND (column3 = 'zyx'
   OR Column3 = 'xyz') 
```

在第一个示例中，普遍接受的操作顺序会将您的查询评估为

```
 (Column1 = 'ABC AND Column2 = 123 AND column3 = 'zyx') 
```

意味着以上所有内容都必须是真实的

```
 OR Column3 = 'xyz' 
```

在情况 1 中，无论`AND`操作评估是否为真，都将返回 column3 等于 'xyz' 的任何行。如果 and 操作或 OR 操作为真，你说给我一行。

如果您希望 SQL 以不同方式评估您的表达式，则需要使用括号指定优先级，如案例 2 所示。

有关更多信息，请查看[msdn 运算符优先级](http://msdn.microsoft.com/en-us/library/ms190276.aspx)，您会看到 AND 的计算早于 OR。

此外，如果您发布您的*实际*查询，我们可以在我们的帮助中更具体地了解问题的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:47:54.577

可能是您的语法不正确，导致将“AND”应用于每个谓词的谓词的一侧 - 例如，('123' AND column2) 将返回 true，除非 column2 为 0(false) 或 Null。您可以尝试将谓词括在括号中 - 至少这可能会导致 SQL Server 抛出错误，将您指向正确的方向。

# c++ - 相对于初始姿势的姿势估计

> ID：15144803
> 
> 赞同：0
> 
> 时间：2013-02-28T20:13:41.330
> 
> 标签：c++, opencv, computer-vision

我有一组图像点和相应的 3d 对象点，我使用单个校准相机来查找姿势。`SolvePnP()`使用我可以使用公式计算 R 和 T 以及相机位置`Position = -R.t()*t`。现在我的问题：
我想计算一个初始姿势，然后我计算的任何姿势都应该与我计算的初始姿势相关。我该怎么做？任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T07:02:07.287

它确实有帮助。您可能想要使用 RPP：

[http://www.emt.tugraz.at/publications/EMT_TR/TR-EMT-2005-01.pdf](http://www.emt.tugraz.at/publications/EMT_TR/TR-EMT-2005-01.pdf)

这对姿势施加了一定的平滑度，主要用于跟踪目的。

代码在这里：[http ://nghiaho.com/?page_id=576](http://nghiaho.com/?page_id=576)

# python - 如何异步使用 Tornado 和 Redis？

> ID：15144809
> 
> 赞同：14
> 
> 时间：2013-02-28T20:13:47.630
> 
> 标签：python, asynchronous, redis, tornado

我试图找出如何异步使用 Redis 和 Tornado。我找到了[tornado-redis](https://github.com/leporo/tornado-redis)但我需要的不仅仅是`yield`在代码中添加一个。

我有以下代码：

```
import redis
import tornado.web

class WaiterHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    def get(self):
        client = redis.StrictRedis(port=6279)
        pubsub = client.pubsub()
        pubsub.subscribe('test_channel')

        for item in pubsub.listen():
            if item['type'] == 'message':
                print item['channel']
                print item['data']

        self.write(item['data'])
        self.finish()

class GetHandler(tornado.web.RequestHandler):

    def get(self):
        self.write("Hello world")

application = tornado.web.Application([
    (r"/", GetHandler),
    (r"/wait", WaiterHandler),
])

if __name__ == '__main__':
    application.listen(8888)
    print 'running'
    tornado.ioloop.IOLoop.instance().start() 
```

我需要访问`/`url 并获取“Hello World”，而`/wait`. 我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:55:23.183

你不应该在 Tornado 主线程中使用 Redis pub/sub，因为它会阻塞 IO 循环。您可以在主线程中处理来自 Web 客户端的长轮询，但您应该创建一个单独的线程来监听 Redis。然后，您可以在收到消息时使用`ioloop.add_callback()`和/或 a`threading.Queue`与主线程进行通信。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T15:58:00.240

您需要使用 Tornado IOLoop 兼容的 redis 客户端。

其中很少有可用的，[toredis](https://github.com/mrjoes/toredis)，[brukva](https://github.com/evilkost/brukva)等。

这是 toredis 中的 pubsub 示例：[https ://github.com/mrjoes/toredis/blob/master/tests/test_handler.py](https://github.com/mrjoes/toredis/blob/master/tests/test_handler.py)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-23T14:41:30.943

对于 Python >= 3.3，我建议您使用[aioredis](https://aioredis.readthedocs.io/en/v0.3.0/ "艾奥雷迪斯")。我没有测试下面的代码，但它应该是这样的：

```
import redis
import tornado.web
from tornado.web import RequestHandler

import aioredis
import asyncio
from aioredis.pubsub import Receiver

class WaiterHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    def get(self):
        client = await aioredis.create_redis((host, 6279), encoding="utf-8", loop=IOLoop.instance().asyncio_loop)

        ch = redis.channels['test_channel']
        result = None
        while await ch.wait_message():
            item = await ch.get()
            if item['type'] == 'message':
                print item['channel']
                print item['data']
                result = item['data']

        self.write(result)
        self.finish()

class GetHandler(tornado.web.RequestHandler):

    def get(self):
        self.write("Hello world")

application = tornado.web.Application([
    (r"/", GetHandler),
    (r"/wait", WaiterHandler),
])

if __name__ == '__main__':
    print 'running'
    tornado.ioloop.IOLoop.configure('tornado.platform.asyncio.AsyncIOLoop')
    server = tornado.httpserver.HTTPServer(application)
    server.bind(8888)
    # zero means creating as many processes as there are cores.
    server.start(0)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T19:02:21.417

好的，这是我如何处理获取请求的示例。

我添加了两个主要组件：

第一个是一个简单的线程发布订阅侦听器，它将新消息附加到本地列表对象中。我还在该类中添加了列表访问器，因此您可以像从常规列表中读取一样从侦听器线程中读取。就您`WebRequest`而言，您只是从本地列表对象中读取数据。这会立即返回，并且不会阻止当前请求完成或将来的请求被接受和处理。

```
class OpenChannel(threading.Thread):
    def __init__(self, channel, host = None, port = None):
        threading.Thread.__init__(self)
        self.lock = threading.Lock()
        self.redis = redis.StrictRedis(host = host or 'localhost', port = port or 6379)
        self.pubsub = self.redis.pubsub()
        self.pubsub.subscribe(channel)

        self.output = []

    # lets implement basic getter methods on self.output, so you can access it like a regular list
    def __getitem__(self, item):
        with self.lock:
            return self.output[item]

    def __getslice__(self, start, stop = None, step = None):
        with self.lock:
            return self.output[start:stop:step]

    def __str__(self):
        with self.lock:
            return self.output.__str__()

    # thread loop
    def run(self):
        for message in self.pubsub.listen():
            with self.lock:
                self.output.append(message['data'])

    def stop(self):
        self._Thread__stop() 
```

第二个是ApplicationMixin 类。这是您让 Web 请求类继承以添加功能和属性的辅助对象。在这种情况下，它检查请求的通道是否已经存在一个通道侦听器，如果没有找到，则创建一个，并将侦听器句柄返回给 WebRequest。

```
# add a method to the application that will return existing channels
# or create non-existing ones and then return them
class ApplicationMixin(object):
    def GetChannel(self, channel, host = None, port = None):
        if channel not in self.application.channels:
            self.application.channels[channel] = OpenChannel(channel, host, port)
            self.application.channels[channel].start()
        return self.application.channels[channel] 
```

WebRequest 类现在将侦听器视为静态列表（请记住，您需要提供`self.write`一个字符串）

```
class ReadChannel(tornado.web.RequestHandler, ApplicationMixin):
    @tornado.web.asynchronous
    def get(self, channel):
        # get the channel
        channel = self.GetChannel(channel)
        # write out its entire contents as a list
        self.write('{}'.format(channel[:]))
        self.finish() # not necessary? 
```

最后，在创建应用程序后，我添加了一个空字典作为属性

```
# add a dictionary containing channels to your application
application.channels = {} 
```

以及一些正在运行的线程的清理，一旦你退出应用程序

```
# clean up the subscribed channels
for channel in application.channels:
    application.channels[channel].stop()
    application.channels[channel].join() 
```

**完整代码：**

```
import threading
import redis
import tornado.web

class OpenChannel(threading.Thread):
    def __init__(self, channel, host = None, port = None):
        threading.Thread.__init__(self)
        self.lock = threading.Lock()
        self.redis = redis.StrictRedis(host = host or 'localhost', port = port or 6379)
        self.pubsub = self.redis.pubsub()
        self.pubsub.subscribe(channel)

        self.output = []

    # lets implement basic getter methods on self.output, so you can access it like a regular list
    def __getitem__(self, item):
        with self.lock:
            return self.output[item]

    def __getslice__(self, start, stop = None, step = None):
        with self.lock:
            return self.output[start:stop:step]

    def __str__(self):
        with self.lock:
            return self.output.__str__()

    # thread loop
    def run(self):
        for message in self.pubsub.listen():
            with self.lock:
                self.output.append(message['data'])

    def stop(self):
        self._Thread__stop()

# add a method to the application that will return existing channels
# or create non-existing ones and then return them
class ApplicationMixin(object):
    def GetChannel(self, channel, host = None, port = None):
        if channel not in self.application.channels:
            self.application.channels[channel] = OpenChannel(channel, host, port)
            self.application.channels[channel].start()
        return self.application.channels[channel]

class ReadChannel(tornado.web.RequestHandler, ApplicationMixin):
    @tornado.web.asynchronous
    def get(self, channel):
        # get the channel
        channel = self.GetChannel(channel)
        # write out its entire contents as a list
        self.write('{}'.format(channel[:]))
        self.finish() # not necessary?

class GetHandler(tornado.web.RequestHandler):

    def get(self):
        self.write("Hello world")

application = tornado.web.Application([
    (r"/", GetHandler),
    (r"/channel/(?P<channel>\S+)", ReadChannel),
])

# add a dictionary containing channels to your application
application.channels = {}

if __name__ == '__main__':
    application.listen(8888)
    print 'running'
    try:
        tornado.ioloop.IOLoop.instance().start()
    except KeyboardInterrupt:
        pass

    # clean up the subscribed channels
    for channel in application.channels:
        application.channels[channel].stop()
        application.channels[channel].join() 
```

# angularjs - 在自定义指令之后运行 $watch

> ID：15144810
> 
> 赞同：0
> 
> 时间：2013-02-28T20:13:49.817
> 
> 标签：angularjs

我正在编写一个自定义指令来验证范围内的某些值。它应该像 required 属性一样工作，但不是验证输入文本，而是验证范围内的值。我的问题是这个值是在 $scope.$watch 函数中设置的，这个函数在我的指令之后运行。因此，当我的指令尝试验证尚未设置的值时。是否可以在运行我的自定义指令之前运行 $watch 代码？

这是代码：

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope) {
  var keys = {
    a: {},
    b: {}
  };
  $scope.data = {};

  // I need to execute this before the directive below
  $scope.$watch('data.objectId', function(newValue) {
    $scope.data.object = keys[newValue];
  });
});

app.directive('requiredAttribute', function (){ 
   return {
      require: 'ngModel',
      link: function(scope, elem, attr, ngModel) {
          var requiredAttribute = attr.requiredAttribute;
          ngModel.$parsers.unshift(function (value) {
             ngModel.$setValidity('requiredAttribute', scope[attr.requiredAttribute] != null);
             return value;
          });
      }
   };
});

<input type="text" name="objectId" ng-model="data.objectId" required-attribute="object" />
<span class="invalid" ng-show="myForm.objectId.$error.requiredAttribute">Key "{{data.objectId}}" not found</span> 
```

这是一个笨蛋：http://plnkr.co/edit/S2NrYj2AbxPqDrl5C8kQ?p= [preview](http://plnkr.co/edit/S2NrYj2AbxPqDrl5C8kQ?p=preview)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T13:54:35.437

您可以直接安排`$watch`在指令链接功能之前发生。你需要改变你的`link`功能。

```
link: function(scope, elem, attr, ngModel) {
    var unwatch = scope.$watch(attr.requiredAttribute, function(requiredAttrValue) {
        if (requiredAttribute=== undefined) return;

        unwatch();

        ngModel.$parsers.unshift(function (value) {
            ngModel.$setValidity('requiredAttribute', requiredAttrValue != null);
            return value;
        });
    });
} 
```

这种方法将只激活指令内的 $watch 函数一次，并在第一次设置所需的范围变量时删除观察者。

还有另一种方法可以解析值并以这种方式检查：

```
link: function(scope, elem, attr, ngModel) {
    var parsedAttr = $parse(attr.requiredAttribute);

    ngModel.$parsers.unshift(function (value) {
        ngModel.$setValidity('requiredAttribute', parsedAttr(scope) != null);
        return value;
    });
} 
```

在这里，您将需要使用[$parse](http://docs.angularjs.org/api/ng.%24parse) AngularJS 服务。这里的区别在于，这会将输入字段标记为无效，而无需等待在所需范围变量上设置的第一个值。

这两种变体都允许您传递表达式而不是简单的变量名。这使得写一些东西成为可能`required-attribute="object.var1.var2"`。

这真的取决于你需要什么。

# php - 可能的词组

> ID：15144811
> 
> 赞同：3
> 
> 时间：2013-02-28T20:13:52.420
> 
> 标签：php, arrays, algorithm, multidimensional-array, explode

这不是家庭作业：在处理 [PHP 字符串差异和动态限制时遇到这种情况](https://stackoverflow.com/questions/15141928/php-string-differences-and-dynamic-restrictions)

给定一串`n`单词，如何在`m`不改变单词序列的情况下将它们分成组？

```
Example 1:
String: "My name is SparKot"
Groups: 2 (string is split in to two strings)

Possible groups will be:
('My', 'name is SparKot'), 
('My name', 'is SparKot'),
('My name is', 'SparKot') 
```

用相同的字符串

```
Example 2:
String: "My name is SparKot"
Groups: 3 (string will be split in to three strings)

Possible groups will be:
('My', 'name', 'is SparKot'),
('My', 'name is', 'SparKot'),
('My name', 'is', 'SparKot') 
```

我的 PHP 函数（）没有方向（假设返回多维组）：

```
function get_possible_groups ($orgWords, $groupCount, &$status) {

    $words = explode (' ', $orgWords);
    $wordCount = count($words);

    if ($wordCount < $groupCount) {
        $status = -1;
        return;
    } else if ($wordCount === $groupCount) {
        $status = 0;
        return (array_chunk($words, 1));
    }

    for ($idx =0; $idx < $wordCount; $idx) {
        for ($jdx =0; $jdx < $groupCount; $jdx++) {

        }
    }
//  append all arrays to form multidimension array
//  return groupings[][] array
}
$status =0;

$groupings = get_possible_groups('My name is SparKot', 4, $status);

var_dump($groupings); 
```

对于上面的 example-2 函数应该返回：

```
$groupings = array (
        array ('My', 'name', 'is SparKot'),
        array ('My', 'name is', 'SparKot'),
        array ('My name', 'is', 'SparKot')); 
```

任何解决此问题的提示将不胜感激。

进步：

*   案例：当`wordCount = groupCount`[解决]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:02:59.637

好的，所以，我花了很长时间，但我想我设法做到了这一点。老实说，我真的很自豪，因为我通常不擅长算法。无论如何，我们开始：

```
function getPossibleGroups($string, $groups) {
    $words = explode(' ', $string);
    $wordCount = count($words);

    if ($groups === 1) {
        return array(array($string));
    } elseif ($groups > $wordCount) {
        return null;
    } elseif ($groups === $wordCount) {
        return array($words);
    }

    $results = array();
    // We get every possible result for the first group
    for ($i = 1; $i <= $wordCount - $groups + 1; $i++) {
        $firstGroup = implode(' ', array_slice($words, 0, $i));

        // Recursively get all posible results for the other groups
        $otherGroups = getPossibleGroups(implode(' ', array_slice($words, $i)), $groups - 1);

        // Merge both things
        $allGroups = array_map(function($v) use ($firstGroup) {
            return array_merge(array($firstGroup), $v);
        }, $otherGroups);

        // Add that to the results variable
        $results = array_merge($results, $allGroups);
    }

    return $results;
} 
```

# ruby-on-rails - 如何设置服务器进行部署并使用 Capistrano 进行冷部署？

> ID：15144815
> 
> 赞同：3
> 
> 时间：2013-02-28T20:14:17.353
> 
> 标签：ruby-on-rails, ruby, deployment, capistrano

`deploy:setup`使用 Capistrano 进行冷部署的正确方法是什么？

使用

*   [这个`deploy.rb`](https://gist.github.com/mariusbutuc/5059868)
*   Capistrano v2.14.2
*   Vagrant 虚拟化我的服务器，

这是我的场景：

1.  运行时`deploy:setup`，Capistrano 使用 root 权限来准备目录结构以进行部署：

    ```
    $ cap deploy:setup
      * 2013-02-28 14:50:21 executing `deploy:setup'
      * executing "sudo -p 'sudo password: ' mkdir -p /home/vagrant/example /home/vagrant/example/releases /home/vagrant/example/shared /home/vagrant/example/shared/system /home/vagrant/example/shared/log /home/vagrant/example/shared/pids"
        servers: ["example.com"]
        [example.com] executing command
        command finished in 29ms
      * executing "sudo -p 'sudo password: ' chmod g+w /home/vagrant/example /home/vagrant/example/releases /home/vagrant/example/shared /home/vagrant/example/shared/system /home/vagrant/example/shared/log /home/vagrant/example/shared/pids"
        servers: ["example.com"]
        [example.com] executing command
        command finished in 11ms 
    ```

2.  然而，在`deploy:cold`Capistrano 尝试结帐（在这种情况下从 git ）并以`vagrant`用户身份写入时 - 用户在`deploy.rb`：

    ```
    $ cap deploy:cold
      * 2013-02-28 14:50:47 executing `deploy:cold'
      * 2013-02-28 14:50:47 executing `deploy:update'
     ** transaction: start
      * 2013-02-28 14:50:47 executing `deploy:update_code'
        updating the cached checkout on all servers
        executing locally: "git ls-remote git@github.com:mariusbutuc/realtime-faye.git master"
        command finished in 2360ms
      * executing "if [ -d /home/vagrant/example/shared/cached-copy ]; then cd /home/vagrant/example/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard a7c05516bc31c2c18f89057c02f84bfad83a6b59 && git clean -q -d -x -f; else git clone -q git@github.com:mariusbutuc/realtime-faye.git /home/vagrant/example/shared/cached-copy && cd /home/vagrant/example/shared/cached-copy && git checkout -q -b deploy a7c05516bc31c2c18f89057c02f84bfad83a6b59; fi"
        servers: ["example.com"]
        [example.com] executing command
     ** [example.com :: out] fatal: could not create work tree dir '/home/vagrant/example/shared/cached-copy'.: Permission denied
        command finished in 26ms
    *** [deploy:update_code] rolling back
      * executing "rm -rf /home/vagrant/example/releases/20130228195049; true"
        servers: ["example.com"]
        [example.com] executing command
        command finished in 7ms
    failed: "sh -c 'if [ -d /home/vagrant/example/shared/cached-copy ]; then cd /home/vagrant/example/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard a7c05516bc31c2c18f89057c02f84bfad83a6b59 && git clean -q -d -x -f; else git clone -q git@github.com:mariusbutuc/realtime-faye.git /home/vagrant/example/shared/cached-copy && cd /home/vagrant/example/shared/cached-copy && git checkout -q -b deploy a7c05516bc31c2c18f89057c02f84bfad83a6b59; fi'" on example.com 
    ```

3.  当然，`deploy:check`报告并不令人意外：由于两个用户属于不同的组，因此`vagrant`用户无法在创建的目录中写入-与：`deploy:setup``root:root``vagrant:vagrant`

    ```
    $ cap deploy:check
      [...]
    The following dependencies failed. Please check them and try again:
    --> You do not have permissions to write to `/home/vagrant/example'. (example.com)
    --> You do not have permissions to write to `/home/vagrant/example/releases'. (example.com)
    --> `/home/vagrant/example/shared' is not writable (example.com) 
    ```

这背后的原因是什么，什么先决条件尚未满足，所以部署通过了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:12:40.400

该`deploy:setup`任务可能不应该`sudo`用于创建 app 目录，因为这可能会导致它归`root`.

`deploy.rb`你可以在你的文件中关闭它：

```
set :use_sudo, false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:44:57.560

由于[Capistrano 中没有组设置，](https://stackoverflow.com/a/12231528/341929)我的解决方法是扩展这样的设置，例如：

```
set :user,  'vagrant'
set :group, 'vagrant' 
```

然后在运行后创建一个任务来“修复”所有权`deploy:setup`：

```
after "deploy:setup", :setup_ownership
task :setup_ownership do
  run "#{sudo} chown -R #{user}:#{group} #{deploy_to} && chmod -R g+s #{deploy_to}"
end 
```

但唯一比解决问题更好的事情是一开始就没有，所以[斯图尔特的回答](https://stackoverflow.com/a/15196358/341929)既明智又优雅。

# excel - Excel中的批处理字符串连接

> ID：15144816
> 
> 赞同：29
> 
> 时间：2013-02-28T20:14:21.587
> 
> 标签：excel, excel-formula, concatenation, string-concatenation

我在 Excel 中有几百个单元格，我想连接成一个字符串。有没有比手动逐个检查它们以便将它们输入更简单的方法`CONCATENATE(A1, A2, ....)`？

`CONCATENATE(A1:A255)`不起作用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-28T20:25:18.843

*在新选项卡中，在单元格 A1 中键​​入 A1，

*在单元格 A2 中键入 A2

*使用填充系列完成A列中的值

*在单元格 B1 中键入 A1

*   在单元格 B2 中使用此论坛

    =B1&","&A2

*   把公式抄下来。

复制并粘贴值以获取您创建的值字符串。

```
A1  A1
A2  A1,A2
A3  A1,A2,A3
A4  A1,A2,A3,A4
A5  A1,A2,A3,A4,A5
A6  A1,A2,A3,A4,A5,A6
A7  A1,A2,A3,A4,A5,A6,A7
A8  A1,A2,A3,A4,A5,A6,A7,A8
A9  A1,A2,A3,A4,A5,A6,A7,A8,A9
A10 A1,A2,A3,A4,A5,A6,A7,A8,A9,A10 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-10T11:29:43.530

按`Alt-F11`，插入新模块，在下面粘贴代码。

```
Public Function concatRange(data As Range, Optional sep As String = "") As String
    Dim ret As String
    Dim sep2 As String
    ret = ""
    sep2 = ""

    For Each cell In data
        ret = ret & sep2 & cell.Value
        sep2 = sep
    Next cell

    concatRange = ret
End Function 
```

用法：

```
=concatRange(A8:D11;", ")    'OS with ; list separator
=concatRange(A8:D11,", ")    'OS with , list separator or in a macro code 
```

或者

```
=concatRange(A8:D11) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-28T20:43:16.877

在此处查看此博客文章：[http ://www.dullsharpness.com/2011/11/14/excel-vba-range-to-csv-range2csv-function/](http://www.dullsharpness.com/2011/11/14/excel-vba-range-to-csv-range2csv-function/)

您可以像这样使用它，例如使用管道分隔符：

```
=Range2Csv(A1:A255,"|") 
```

使用访问您的 VBA 编辑器`Alt+F11`并将其放入模块中。

代码摘录在这里：

```
Option Explicit
'**********************************************
'* PURPOSE: Concatenates range contents into a
'*          delimited text string
'*
'* FUNCTION SIGNATURE: Range2Csv(Range, String)
'*
'* PARAMETERS:
'*    Range  - the range of cells whose contents
'*             will be included in the CSV result
'*    String - delimiter used to separate values
'*             (Optional, defaults to a comma)
'*
'* AUTHOR: www.dullsharpness.com
'*
'* NOTES: [add'l notes removed for brevity]
'*
'**********************************************
Public Function Range2Csv(inputRange As Range, Optional delimiter As String)
  Dim concattedList As String 'holder for the concatted CSVs
  Dim rangeCell As Range      'holder cell used in For-Each loop
  Dim rangeText As String     'holder for rangeCell's text

  'default to a comma delimiter if none is provided
  If delimiter = "" Then delimiter = ","

  concattedList = ""          'start with an empty string

  'Loop through each cell in the range to append valid contents
  For Each rangeCell In inputRange.Cells

    rangeText = rangeCell.Value 'capture the working value

    'Only operate on non-blank cells (i.e. Length > 0)
    If Len(rangeText) > 0 Then
      'Strip any delimiters contained w/in the value itself
      rangeText = WorksheetFunction.Substitute(rangeText, delimiter, "")

      If (Len(concattedList) > 0) Then
        'prepend a delimiter to the new value if we
        'already have some list items
        concattedList = concattedList + delimiter + rangeText
      Else
        'else if the list is blank so far,
        'just set the first value
        concattedList = rangeText
      End If
    End If

  Next rangeCell

  'Set the return value
  Range2Csv = concattedList

End Function 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-28T20:26:53.030

> 连接（a1，a2，a3，a4，a5，a6，a7，a8，a9，a10，a11，a12，a13，a14，a15，a16，a17，a18，a19，a20，a21，a22，a23，a24， a25，a26，a27，a28，a29，a30，a31，a32，a33，a34，a35，a36，a37，a38，a39，a40，a41，a42，a43，a44，a45，a46，a47，a48，a49， a50，a51，a52，a53，a54，a55，a56，a57，a58，a59，a60，a61，a62，a63，a64，a65，a66，a67，a68，a69，a70，a71，a72，a73，a74， a75，a76，a77，a78，a79，a80，a81，a82，a83，a84，a85，a86，a87，a88，a89，a90，a91，a92，a93，a94，a95，a96，a97，a98，a99， a100，a101，a102，a103，a104，a105，a106，a107，a108，a109，a110，a111，a112，a113，a114，a115，a116，a117，a118，a119，a120，a121，a122，a123，a124， a125，a126，a127，a128，a129，a130，a131，a132，a133，a134，a135，a136，a137，a138，a139，a140，a141，a142，a143，a144，a145，a146，a147，a148，a149， a150，a151，a152，a153，a154，a155，a156，a157，a158，a159，a160，a161，a162，a163，a164，a165，a166，a167，a168，a169，a170，a171，a172，a173，a174，a175，a176，a177，a178，a179，a180，a181，a182，a183，a184， a185，a186，a187，a188，a189，a190，a191，a192，a193，a194，a195，a196，a197，a198，a199，a200，a201，a202，a203，a204，a205，a206，a207，a208，a209， a210，a211，a212，a213，a214，a215，a216，a217，a218，a219，a220，a221，a222，a223，a224，a225，a226，a227，a228，a229，a230，a231，a232，a233，a234， a235，a236，a237，a238，a239，a240，a241，a242，a243，a244，a245，a246，a247，a248，a249，a250，a251，a252，a253，a254，a255）a207，a208，a209，a210，a211，a212，a213，a214，a215，a216，a217，a218，a219，a220，a221，a222，a223，a224，a225，a226，a227，a228，a229，a230，a231， a232，a233，a234，a235，a236，a237，a238，a239，a240，a241，a242，a243，a244，a245，a246，a247，a248，a249，a250，a251，a252，a253，a254，a255）a207，a208，a209，a210，a211，a212，a213，a214，a215，a216，a217，a218，a219，a220，a221，a222，a223，a224，a225，a226，a227，a228，a229，a230，a231， a232，a233，a234，a235，a236，a237，a238，a239，a240，a241，a242，a243，a244，a245，a246，a247，a248，a249，a250，a251，a252，a253，a254，a255）

PowerShell吧！

```
"concatenate(a$((1..255) -join ', a'))" | clip 
```

打开文本文件复制粘贴

[“要快速选择单元格，您可以按 CTRL 并单击要包含在连接函数中的单元格。例如，选择一个单元格类型 =concatenate( 在公式栏中按住 CTRL 按钮并单击要包含的单元格。释放 CTRL 按钮在公式栏中键入 )，然后按 Enter"](http://www.get-digital-help.com/2011/02/09/concatenate-a-cell-range-without-vba-in-excel/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T20:19:10.877

如果需要，此 VBA 函数将使用可选的分隔符连接单元格的内容。将其复制到标准模块中：

```
 Option Explicit

  Function Concat(CellRange As Range, Optional Delimiter As String) As String 
 ' this function will concatenate a range of cells and return the result as a single string
 ' useful when you have a large range of cells that you need to concatenate
 ' source: http://chandoo.org/wp/2008/05/28/how-to-add-a-range-of-cells-in-excel-concat/

  Dim retVal As String, dlm As String, cell As Range
  retVal = ""
  If Delimiter = Null Then
      dlm = ""
  Else
    dlm = Delimiter
  End If
  For Each cell In CellRange
      If CStr(cell.Value) <> "" And CStr(cell.Value) <> " " Then
          retVal = retVal & CStr(cell.Value) & dlm
      End If
  Next
  If dlm <> "" Then
      retVal = Left(retVal, Len(retVal) - Len(dlm))
  End If
  Concat = retVal
End Function 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-28T17:07:34.907

如果您正在寻找纯 Excel 方法（即没有 VBA），那么 James Jenkins 提出的方法是最好的。如果您对使用 VBA 感到满意，请打开 VBA 编辑器，添加一个新模块，然后添加以下代码：

```
Option Explicit

Public Function JoinText(cells As Variant,Optional delim_str As String) As String
    If cells.Columns.count < cells.Rows.count Then
       JoinText = Join(WorksheetFunction.Transpose(cells), delim_str)
    Else
       JoinText = Join(WorksheetFunction.Transpose(WorksheetFunction.Transpose(cells)), delim_str)
    End If
End Function 
```

要轻松打开 VBA 编辑器，请按 Alt-F11。要插入模块，请右键单击“项目”窗口中列出的工作簿。

该函数从excel调用如下：

```
=JoinText(A1:C1) 
```

如果要添加分隔符（例如逗号）：

```
=JoinText(A1:C1,",") 
```

使用转置函数的目的是将二维数组“单元格”转换为一维数组。原因是 VBA 函数 Join 只接受一维数组。使用其中两个的原因是，如果 JoinText 正在查看一行单元格（仍然只是一个二维数组），那么第一次调用转置，将这个二维行数组转置为一个二维列数组，第二次调用将它变成一维数组。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-02T20:11:03.050

我首选的方法是将值剪切并粘贴到允许正则表达式的编辑器中，然后我只需在当前选择中使用查找和替换删除选项卡（或空格）。

您也可以使用它来插入逗号、空格或任何您想要的内容。

这比打字快一**吨**`=concatenate(A1,",","A2",",",......)`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-12T17:26:59.623

它不是纯粹的 Excel，但有一种使用 Word 的简单方法可以做到这一点。

1.  选择要连接的单元格并将它们复制/粘贴到 Word 中。这将创建一个表。
2.  选择整个表格。
3.  将表格转换为文本。使用段落标记（或文本中未出现的其他内容）作为分隔符。
4.  选择所有文本。
5.  使用替换删除段落标记。（在“查找内容”框中，输入 ^p。将“替换为”框留空。）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-29T14:38:42.400

如果您有 Excel 2016，则可以使用数组公式：

进入

> =连接（a1：a255）

进入单元格，然后按

> [ctrl]+[shift]+[回车]

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-19T19:02:25.767

您要连接的值从工作表的第 2 行第 3 列开始

```
Sub GOWN()
roww = 2
Do While cells(roww, 2) <> ""
    aa = cells(roww, 3)
    dd = dd & aa & ","
    roww = roww + 1
Loop
cells(roww + 1, 3) = dd
End Sub 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-22T10:23:50.320

[从这个网站](https://trumpexcel.com/concatenate-excel-ranges/)无耻地复制：

> 1.  选择需要结果的单元格。
> 2.  转到公式栏并输入...“=A1：A5”
> 3.  选择整个公式并按 F9（这会将公式转换为值）。
> 4.  从两端取下花括号。
> 5.  将 =CONCATENATE( 添加到文本的开头并以圆括号结束)。
> 6.  按 Enter。

这里特别具有启发性的是，在编辑公式时，按 F9 会将公式替换为该公式的结果。如果这是一个范围，它将用该范围的内容列表替换它。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-26T15:06:19.693

只需在一个串联中添加您的分隔符：

```
=concatenate(A1, ",") 
```

然后复制所有连接，将它们粘贴为值。然后复制这些值，将它们粘贴到转置中。然后复制转置值并将它们粘贴到文字编辑器中。查找分隔符和值前面的空格，并替换只是分隔符。这应该给你一个带有分隔符的所有值的串联字符串。这比其他选项容易得多。

# android - 根据主题从文件中加载颜色

> ID：15144819
> 
> 赞同：1
> 
> 时间：2013-02-28T20:14:28.933
> 
> 标签：android, colors, android-theme

我的应用程序显示来自服务器的大量消息，消息的类型决定了应用的颜色范围。我的应用程序已经有了一个深色主题，现在我想添加一个浅色主题，但由于消息在白色背景下变得不可读，因此无法重复使用深色主题的颜色。

目前，我将颜色以以下 RGB 格式存储在 /values 下的 xml 文件中：

```
<integer-array name="xyz_message_type">
    <item>001</item> <!--Red-->
    <item>002</item> <!--Green-->
    <item>003</item> <!-Blue-->
</integer-array> 
```

并通过将 R.array.xyz_message_type 值传递给检索和解析颜色的专用类来选择适当的颜色。

更改主题时更改我的应用程序以加载“浅色”颜色集的最简单方法是什么？如果我的方法可以改进，有什么更好的方法来处理这个问题？

# google-apps-script - 实用程序中的 JSON 序列化

> ID：15144821
> 
> 赞同：0
> 
> 时间：2013-02-28T20:14:43.383
> 
> 标签：google-apps-script

需要澄清以下代码。

我记得，有时 Utilities.jsonStringify() 没有将函数保存在 JSON 对象中。但现在他们将其保存为字符串 ("resultFn":"\nfunction (pageNum, pageSize, filter) {\n return [{a:\"abc1\", b:\"bcd1\"}, {a: \"abc2\", b:\"bcd2\"}, {a:\"abc3\", b:\"bcd3\"}, {a:\"abc4\", b:\"bcd4\"} ];\n})。

并且使用 eval()，可以恢复该函数（请参阅我在 myFunction 中的代码）。它对我来说很好，至少对于琐碎的例子。

问：AFAIK，函数序列化超出标准。而且由于这没有记录，我们可以依靠谷歌作为 API 合同吗？

我还可以添加吗 - 这将为我节省很多代码行:)

```
var fnResults = function(pageNum, pageSize, filter) {
    return [
        { a: "abc1", b: "bcd1" },
        { a: "abc2", b: "bcd2" },
        { a: "abc3", b: "bcd3" },
        { a: "abc4", b: "bcd4" },  
    ];
};

var TestConfig = {
    pagerId: "TestId",
    pageSize: 10,
    widgetWidth: "15cm",
    filterOptions: [],
    resultFn: fnResults,
};

function myFunction() {
    Logger.log(TestConfig.resultFn(1,2,3));
    var s = Utilities.jsonStringify(TestConfig);
    Logger.log(s);
    var o = Utilities.jsonParse(s);
    Logger.log(eval(o.resultFn)(1,2,3));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:52:16.783

这是一个错误，你不应该依赖它。

# jquery - 动态改变一个img元素的src并多次获取宽度

> ID：15144828
> 
> 赞同：0
> 
> 时间：2013-02-28T20:15:00.500
> 
> 标签：jquery, dynamic, attributes

我的名字是 Ezequiel，我是 JQuery 的新手

我想动态更改 an 的 src 并获取它显示的图像的宽度。

我有一个带有 ID（“idImg”）的 img 标签。

问题是我的代码仅适用于第一个 src 更改，并且我必须多次更改（迭代），但我只会向您展示 2 个硬编码更改。

```
 $("#idImg").attr("src", scrString); //src field changes ok
      alert($("#idImg").width()) // ok, this is the real width.
      $("#idImg").attr("src", scrStringANOTHER); //src field changes ok
      alert($("#idImg").width()) // nope, it keeps the same width than the last one. 
```

我不知道，只是无法找出问题所在

**编辑：我知道我必须等到它加载，但如果我多次更改 src，那将不起作用。我需要多次更改 src，并检查每个图像的结果宽度。**

有什么帮助吗？

很Ty

以西结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:20:59.337

```
$("#idImg").load(function()
{
  alert($(this).width());
}); 
```

绑定到图像的加载事件，此时宽度将准备就绪。

另一种解决方法是将图像加载到不同的 img 中，然后在加载后将其换出。在预加载图像上查看这个 SO 线程：[Preloading images with jQuery](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:25:20.027

```
$(document).ready(function(){ 
    $('#idImg').on('click', function() {
      $(this).attr('src', 'newimage.png');  
    }).load(function() { alert(this.width); });
}); 
```

查看完整示例：http: [//jsfiddle.net/k9rn7/](http://jsfiddle.net/k9rn7/)

# php - 如果一列结果相同，则Mysql重新组合结果

> ID：15144831
> 
> 赞同：0
> 
> 时间：2013-02-28T20:15:21.337
> 
> 标签：php, mysql, join

我目前在 MySQL 中使用 1-inf 请求，我现在有一个小问题。

是否可以加入、连接、重新组合具有相同列结果的一些结果？

这是我的输出

![在此处输入图像描述](../Images/42fadb16e2fb6e008a04e26f497a736f.png)

您有可以由老师（第二列）和班级（第三列）教授的课程（第一列）。

有没有办法加入他们并有类似的结果

课程 | 教授1 教授2 教授3 | 类

这是我的查询：

```
SELECT cours.cours, professeurs.nom, classe.classe
FROM cours
JOIN classe
    ON cours.id_classe = classe.id
JOIN cours_professeurs
    ON cours_professeurs.id_cours = cours.id
JOIN professeurs
    ON cours_professeurs.id_prof = professeurs.id 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:18:36.617

你可以使用 GROUP_CONCAT，你也必须使用 group by 。

```
SELECT 
    cours.cours, 
    GROUP_CONCAT(professeurs.nom) AS teachers, 
    classe.classe
FROM cours
JOIN classe
    ON cours.id_classe = classe.id
JOIN cours_professeurs
    ON cours_professeurs.id_cours = cours.id
JOIN professeurs
    ON cours_professeurs.id_prof = professeurs.id
GROUP BY cours.cours,classe.classe 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-28T20:18:10.673

是的，您可以使用 GROUP BY() MySQL 语句执行此操作。

# python - 使用正确的 Python 编码从 Oracle 导入

> ID：15144833
> 
> 赞同：2
> 
> 时间：2013-02-28T20:15:27.267
> 
> 标签：python, oracle, postgresql, utf-8, cx-oracle

我很抱歉提出一个字符编码问题，因为我知道你们每天都会遇到很多问题，但我无法弄清楚我的问题，所以我还是问了。

这是我们正在做的事情：

1.  使用 Python 和`cx_Oracle`.
2.  使用 Python 将数据写入文件。
3.  使用 Python 和`psycopg2`.

以下是重要的 Oracle 设置：

```
SQL> select * from NLS_DATABASE_PARAMETERS;

PARAMETER                      VALUE
------------------------------ ----------------------------------------
NLS_LANGUAGE                   AMERICAN
NLS_TERRITORY                  AMERICA
NLS_CURRENCY                   $
NLS_ISO_CURRENCY               AMERICA
NLS_NUMERIC_CHARACTERS         .,
NLS_CHARACTERSET               US7ASCII 
```

根据此`NLS_LANG` [常见问题解答](http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html#_Toc110410550)，您应根据客户端操作系统使用的内容设置 NLS_LANG。

运行`locale`给了我们：（`LANG=en_US.UTF-8`所有其他字段也是 en_US.UTF-8）。

因此，在我们的 Python 脚本中，我们将其设置为：

`os.environ["NLS_LANG"] = "AMERICAN_AMERICA.AL32UTF8"`

然后我们导入数据并将其写入文件。

```
row = cur.fetchall()
fil.write(row[0][0]) #For this test, I am only writing one row and one field. 
```

我们将该文件摄取到我们的 UTF-8 Postgres DB 中。

不幸的是，由于某种原因，我们得到了这个符号：在我们的文件和随后的 PG 表中。如果我的理解是正确的，这就是[Replace Character](http://www.fileformat.info/info/unicode/char/fffd/index.htm)。我相信如果 Unicode 无法识别符号，则该字符会显示出来。

（在某些文本编辑器中，符号显示为`ï¿½`）。

我不明白为什么会这样？我认为 UTF-8 向后兼容 7 位 ASCII？

即使我们使用的是区域页面，它是否仍然可以工作，因为客户端使用的是 US 而 Oracle 服务器使用的是 AMERICAN？

如何检查数据是否正确导入，如果不正确，如何修复它以便将来导入？

注意：Oracle 字段是`CHAR`字段而不是`NCHAR`字段。

注意 2：我们使用的是 Python 2.4，所以我们在 Python 3.X 中没有原生的 Unicode 内容。因此，尽管我认为 cx_Oracle 处理了这一切，但 Python 可能在某个地方搞砸了。

谢谢你的时间，我希望你有一个美好的一天。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-02T01:03:09.200

> 不幸的是，由于某种原因，我们得到了这个符号：在我们的文件和随后的 PG 表中。如果我的理解是正确的，这就是替换字符。我相信如果 Unicode 无法识别符号，则该字符会显示出来。

大部分正确但不完全正确。PostgreSQL 将在使用该编码时拒绝插入非 UTF8 文本字符（在 StackOverflow 上搜索“Invalid UTF8 postgresql”）。您看到的字符很可能是您的*字体*无法识别的有效 UTF8 字符，因此正在显示替换字符。如果符号在您的 Oracle 数据库中并且实际上是那里的替换符号，那么您想用什么替换它？如果是这种情况，则信息已经丢失。

> 我不明白为什么会这样？我认为 UTF-8 向后兼容 7 位 ASCII？

这是。

> 如何检查数据是否正确导入，如果不正确，如何修复它以便将来导入？

您的问题很可能出在 Oracle 数据库的上游。我会找出实际将问题数据插入 Oracle 数据库并在那里修复它。如果您可以根据 Oracle 中的数据检查 Pg 中的数据，您应该能够确定数据是否字符与字符相同（并标记任何差异）。这就是如何检查您当前的导入。

> 注意 2：我们使用的是 Python 2.4，所以我们在 Python 3.X 中没有原生的 Unicode 内容。因此，尽管我认为 cx_Oracle 处理了这一切，但 Python 可能在某个地方搞砸了。

那是另一种可能。对于文件转换，我个人更喜欢 Perl，因为它集成了正则表达式和绝对一流的 PostgreSQL 支持。但是，我认识到此时您的导入例程可能不容易转换。我对在 Perl 中解决 UTF8 转换问题比在 Python 中更熟悉一些。但是，我确实想知道您是否可以检查以二进制格式输出的数据以查找此类符号。

# git - 如何成功地保持主分支和开发分支同步？胃肠道

> ID：15144834
> 
> 赞同：9
> 
> 时间：2013-02-28T20:15:29.437
> 
> 标签：git, merge, branch

我喜欢在我的开发分支上进行开发，然后在我准备好投入生产时合并到 master 中。只要我不向主分支提交任何内容，一切都会顺利进行。

但是，我遇到过一些情况，我向主分支提交了一些与开发分支上更改的内容相冲突的内容。当我将开发分支合并到主分支时，我必须解决冲突。没什么大不了的，但是为了确保开发分支拥有主分支中的所有内容（确保开发是最新的），我将主分支合并并最终不得不再次解决冲突。

我听说变基通常很糟糕，尤其是对于你公开推出的东西。

有没有更好的方法来管理这种类型的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:22:57.317

定期从主分支合并到您的开发分支，然后解决任何冲突。（如果你经常这样做，冲突通常会很小。）

当合并回到主服务器时，开发根本不应该发生冲突。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T20:24:42.120

我认为您可能只是在这里有一些误解，这些误解对您的影响比任何技术上的错误都要大。

首先，您通常不应该直接提交到 master 分支。从你描述你的情况的方式来看，我不确定是否发生了这种情况，但如果是的话，尽量不要这样做。

如果你发现某些东西不能干净地合并到 master 中，你不应该尝试修复 master 本身的问题。相反，您应该在功能分支上解决问题。一旦你在那里解决了问题，你就可以干净地合并到 master 中。

就 rebase 而言，在推送到远程存储库之前使用 rebase 是完全可以的。一旦你将某些东西推送到远程仓库，你就不想变基，因为那样你就会为别人弄乱历史，而 git 并不能真正为你解决这个问题。所以不要害怕rebase，只要知道什么时候用，什么时候不用。

您可以在这里使用变基（再次假设您没有远程推送有问题的分支）来帮助解决问题的一种方法是采用无法干净地合并到 master 的功能分支并将其变基到 master。这将迫使您解决该分支上的问题。解决后，合并到 master 应该是微不足道的（除非 master 在此期间再次被更改）并且您可以干净地合并到 master。

那里有很多 git 教程，它们也会有一些很好的代码示例来提供帮助。这是更“经典”的一个，我相信这里描述的工作流程运作良好。[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

请注意，我不认可名为“git flow”的 bash 脚本集，它试图半自动化那里的工作流程（当我们尝试这些脚本时，这些脚本对我们来说效果不佳），但那里描述的工作流程本身运行良好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T20:22:51.170

我会这样做的方式是相反的：

1.  合并master到dev
2.  之后将 dev 合并到 master

在合并时解决所有冲突。

尽管 git 在合并和处理分支方面非常出色，但我认为除了使用 3-way diff/merge 工具进行手动繁琐的工作之外，没有其他快速解决冲突的方法。

此外，执行@cHao 在下面的回答中所说的也很有帮助 - 经常合并，合并小，并且您几乎不会遇到大的冲突合并情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:21:58.843

据我所知，发展是所有新事物发生的地方。所以，如果是这样的话，分支开发（功能分支）。在那个分支上工作。完成后，只需将开发合并到您的功能分支中以确保它是最新的。然后，签出开发分支并将您的功能分支合并到其中。随着您团队中的人们继续向开发分支添加功能，在某些时候经理会像`okay, we're releasing`，所以那时您会将 master 合并到开发中（以防有人在 master 上进行了恶意提交）然后结帐掌握并合并发展到它。

希望没有人直接致力于开发或掌握。这两个应该只合并到。另外，我希望您在开发功能时和合并后进行测试。

就目前`rebase`而言，是的，他们说在您共享分支后不要这样做。所以在这种情况下，你不会在开发分支上这样做，因为它是共享的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T21:03:10.500

我愿意

```
git checkout master
git reset --hard dev 
```

所以master变成了dev。如果您想在 master 上提交修补程序，请不要忘记 rebase dev。

# javascript - Jquery孩子的奇怪行为

> ID：15144838
> 
> 赞同：0
> 
> 时间：2013-02-28T20:15:44.300
> 
> 标签：javascript, jquery

第一个孩子调用提醒表单的直接孩子的 id，即 ul 的 id：“mainId”。据我了解，这是子项的预期行为，但第二次调用订阅了两个不是表单直接子项的复选框的更改事件。怎么来的？

```
<!DOCTYPE html>
<html>

<head>

<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>
<script>
$(function() 
{

    $('.triggers').children().each(function(){
        alert($(this).attr("id"));
    });

    $(".triggers").children().change(function(e){
        alert(e.target.name)
    });
})
</script>

</head>

<body>

<form class="triggers" action="/askOrtal">
<ul id="mainId"> 
 <li><input type="checkbox" name="theCheckbox1"></li> 
 <li><input type="checkbox" name="theCheckbox2"></li> 
 <li><input type="submit" value="ClickMe"></li>
 <ul>
 </form>

</body>
</html> 
```

# drupal-6 - 在 drupal 6 中使用内容类型的模板

> ID：15144842
> 
> 赞同：1
> 
> 时间：2013-02-28T20:15:52.103
> 
> 标签：drupal-6

我正在尝试开发基于内容类型的模板。场景是我需要从 mysql 获取数据并在我的网站上以特定格式显示。我做的事情是：

*   创建了一个名为**faculty**的内容类型并在该类型中创建了一个页面
*   添加了一个名为`render faculty`in的函数`template.php`，我从数据库中获取了所有必要的值并编写了模板格式
*   在中添加了必要的样式`styles.css`
*   创建了一个名为 的文件`node-faculty.tpl.php`，将内容复制`node.tpl.php`到文件中
*   添加以下代码`node-faculty.tpl.php`以调用该函数`template.php`

    ```
    <div class="content">
        <!-- <?php print "arg(0)=".arg(0); ?> -->
        <!-- <?php print "arg(1)=".arg(1); ?> -->
        <!-- <?php $id=$_GET['id']; print "id="; print $id; ?> -->
        <?php global $language;
        $content = render_faculty($id); print $content; ?>
    </div> 
    ```

*   清除了我的缓存。

根据我的函数，如果我调用 URL: `mywebsite/contents/faculty&id=36`，页面应该会显示从 db 获取的所有信息，但这并没有发生。

请让我知道是否有人遇到过这个问题。在过去的 4 天里，我一直在这样做，但没有成功。

提前致谢

# android - 在子活动中按下后退按钮 - >应用程序中的主要活动？

> ID：15144845
> 
> 赞同：0
> 
> 时间：2013-02-28T20:16:07.680
> 
> 标签：android, android-intent, android-activity

我正在使用 SlidingMenu 并且 3/4 导航是由它完成的。如果我想回去，我必须经历我之前打开的所有这些活动。我想将其更改为关闭任何子活动（不是主要活动）将我发送到应用程序主要活动，如果然后我按下它退出应用程序。就那么简单。

我以这种方式打开新活动：

```
Intent LinieActivity = new Intent(Oznaczenia.this, Linie.class);
            startActivity(LinieActivity); 
```

我已经尝试在我的清单中放入这样的东西：

```
<activity
        android:name=".childActivity"
        android:label="some name">
        <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.MainActivity" />
    </activity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:20:35.417

完成活动后，您可以调用命令`finish();`关闭该页面。所以我会调用我想使用意图打开的下一页，然后在调用之后`finish();`页面将关闭。

```
ItemPage ItemPage = new ItemPage();
Intent i = new Intent(context, ItemPage.class);
startActivity(i);
finish(); 
```

当您点击后退按钮时，您调用完成的页面都不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:21:38.860

嘿，这是按下后退按钮的代码，如果你想退出，你可以管理，否则你可以去你的主要活动

```
 @Override
    public void onBackPressed() {
    new AlertDialog.Builder(this)
    .setTitle("Exit App?")
    .setMessage("Are you sure you want to exit?")
    .setNegativeButton(android.R.string.no, null)
    .setPositiveButton(android.R.string.yes, new OnClickListener() {

        public void onClick(DialogInterface arg0, int arg1) {
            WelcomeActivity.super.onBackPressed();
        }
    }).create().show();
    } 
```

# python - Errno 10055 无法在 Windows 上的 Python 网络相关代码中连接

> ID：15144846
> 
> 赞同：0
> 
> 时间：2013-02-28T20:16:10.940
> 
> 标签：python, windows, networking

我是创建网络的新手，对 python 来说相对较新。我最近购买了第二台计算机来运行一些 python 程序。第二台计算机将数据输入到我的主计算机上的 mysql 数据库中。

我收到很多 10055 错误。有时来自 selenium/urllib，有时来自尝试连接到 mysql 数据库。这些错误要么提供：

Selenium - Errno 10055。无法对套接字执行操作，因为系统缺少足够的缓冲区空间或队列已满

MySQL - 无法连接到 IP 上的 MySQL 服务器 (10055)

我已经搜索了几个小时来解决这个问题，但找不到一个有效的方法。有任何想法吗？

我正在一台功能强大的计算机上运行 Windows 7。我真的怀疑这是一个内存问题。

导致问题的代码片段之一如下（我无法连接到 mysql 服务器） - 它有时只会出现问题：

```
 def connect_to_database(schema_name):
             import MySQLdb
             import socket
             counter = 0
    #try 100 times until a connection is made
             while counter <= 100:
                    try:
    #gets ip of host comp
                            ip = socket.gethostbyname('PC NAME')
                            conn = MySQLdb.connect(ip, "username", "pw", schema_name)
                            c = conn.cursor()
                            conn.set_character_set('utf8')
                            c.execute('SET NAMES utf8;')
                            c.execute('SET CHARACTER SET utf8;')
                            c.execute('SET character_set_connection=utf8;')
                            break
                    except Exception, err:
                            print traceback.format_exc()
                            try:
   #if failure, use different ip, so far i have only seen 2 ip's for the network.
                                    if socket.gethostbyname(socket.gethostname()) == '10.0.0.13':
                                            ip = '10.0.0.14'
                                    else:
                                            ip = '10.0.0.13'
                                    conn = MySQLdb.connect(ip, "username", "pw", schema_name)
                                    c = conn.cursor()
                                    conn.set_character_set('utf8')
                                    c.execute('SET NAMES utf8;')
                                    c.execute('SET CHARACTER SET utf8;')
                                    c.execute('SET character_set_connection=utf8;')
                                    break
                            except Exception, err:
                                    print traceback.format_exc()
                                    counter = counter + 1
            return c, conn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:27:16.330

我想我有一个解决办法。更多的测试将证实。我将 windows7 机器上的临时端口数量增加到 65,000 个。有关说明，请参见下文。

[如何在 Windows 机器中更改/查看临时端口范围](https://stackoverflow.com/questions/7006939/how-to-change-view-ephemeral-port-range-in-windows-machines)

# c# - WPF 中的正则表达式数据注释

> ID：15144848
> 
> 赞同：0
> 
> 时间：2013-02-28T20:16:17.360
> 
> 标签：c#, wpf, regex, data-annotations

我不明白为什么这个正则表达式不能按我想要的方式工作。我希望它允许这样的事情：“Test123#%&*- Test”

```
[RegularExpression("[^a-zA-Z0-9/#%&*\\- ]")] 
```

MSDN 文档仅给出了一个示例...

```
[RegularExpression(@"^[a-zA-Z''-'\s]{1,40}$")] 
```

我不想将输入限制为任何特定的字符长度，MSDN 示例确实这样做了。我已经将此正则表达式模式与`Regex`.net 中的对象一起使用，它工作得很好。为什么会有不同的`DataAnnotations`工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:47:00.533

我认为您使用否定类查找不允许字符的方式是错误的。我找不到文档来证明这一点，但对我来说这似乎是合乎逻辑的。

我认为您需要提供与允许的输入匹配的模式。

尝试

```
[RegularExpression("^[a-zA-Z0-9/#%&*\\- ]*$")] 
```

`*`量词使它重复字符类 0 次或更多次。这也允许空字符串！如果您不希望空字符串使用量词`+`，那将是一个或多个。

`*`是`{0,}`. 如果省略第二个数字，则表示没有最大匹配

`+`是`{1,}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:21:46.150

Regex DataAnnotations 的编写方式是查找有效内容，而不是查找无效内容。您想要匹配有效值。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx)

我会放弃你的胡萝卜（^）。这将允许验证您提供的每个单独的字符。如果有任何失败，您将生成错误消息。

# asp.net - 如何修改 web.config 以不重写某个 url？

> ID：15144853
> 
> 赞同：1
> 
> 时间：2013-02-28T20:16:40.570
> 
> 标签：asp.net, iis, azure, web-config, iisnode

我在 iisnode 下运行 node.js 应用程序（IIS 的扩展，允许 node.js 通过 IIS 管理请求）。默认情况下，iisnode 提供对调试工具的访问权限`http://myapp.com/debug`。然而，Windows Azure 网站使用 web.config 中的 urlrewrite 覆盖了这一点（可能是偶然的）。

```
<system.webServer>
    <handlers>
        <add name="iisnode" path="app.js" verb="*" modules="iisnode"/>
    </handlers>
    <rewrite>
        <rules>
            <rule name="StaticContent">
                <action type="Rewrite" url="public{REQUEST_URI}"/>
            </rule>
            <rule name="DynamicContent">
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="True"/>
                </conditions>
                <action type="Rewrite" url="app.js"/>
            </rule>
        </rules>
    </rewrite>
    <iisnode
        debuggingEnabled="true"
        devErrorsEnabled="true"
        debuggerPathSegment="debug"
        nodeProcessCommandLine="&quot;%programfiles(x86)%\nodejs\node.exe&quot;"
        logDirectory="..\..\LogFiles\nodejs"
        watchedFiles="*.js;iisnode.yml;node_modules\*;views\*.jade;views\*.ejb;routes\*.js" />
</system.webServer> 
```

我对 web.config 重写知之甚少，但在我看来`<action type="Rewrite" url="app.js"/>`，只要请求与服务器上的实际静态文件不匹配，它就会将所有请求路由到 app.js（我的主应用程序文件）。这很好，除了我不想`/debug`被路由到 app.js，我想让 iisnode 默认处理该请求，就像它应该做的那样。如果我删除`<action />`重写`/debug`确实会启动 iisnode 调试器，但是当然没有其他工作：P

如何修改此 url 重写以避免`/debug`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T23:36:24.880

事实证明，由于技术原因，iisnode 调试器在 Windows Azure 网站上不可用，并且任何 web.config 修改都不会使其正常工作。

[https://github.com/tjanczuk/iisnode/issues/262](https://github.com/tjanczuk/iisnode/issues/262)

# javascript - 是否可以为带有动作的表单中的按钮添加 onclick？

> ID：15144854
> 
> 赞同：0
> 
> 时间：2013-02-28T20:16:48.980
> 
> 标签：javascript, jquery

我正在尝试添加`onclick`到`button`带有动作的表单中。这是一个用于订阅的 mailchimp 操作，因此在他单击按钮后将转到新选项卡中 mailchimp 的成功页面，但还希望在页面中显示带有消息的弹出警报/div，是否可以同时拥有? 同一个提交按钮的action和onclick？

任何想法如何做到这一点？

* * *

**更新**

我的表格如下所示：

```
<form action="/" method="post" name="form" target="_blank">
    <h3><span>Subscribe to Newsletter</span></h3>
    <p class="email_first">
        <label for="email">Your Email</label>
        <input id="EMAIL" class="email" type="email" name="EMAIL" value="Your Email Address:" size="30" />
    </p>
    <p class="submit"><button type="submit">Send</button></p>
</form> 
```

JavaScript

```
function popUp(){
    var popup = document.createElement('div');
    popup.className = 'popup';
    popup.id = 'test';
    var cancel = document.createElement('div');
    cancel.className = 'cancel';
    cancel.innerHTML = 'close';
    cancel.onclick = function (e) { popup.parentNode.removeChild(popup) };
    var message = document.createElement('span');
    message.innerHTML = "This is a test message";
    popup.appendChild(message);                                    
    popup.appendChild(cancel);
    document.body.appendChild(popup);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:55:40.960

您应该更好地使用正确的事件绑定而不是内联 JavaScript。我将从[正确绑定 JavaScript 事件](https://stackoverflow.com/a/1796175/417685)中借用 JavaScript 中的事件绑定函数。

为简单起见，我为元素添加了一个`id`属性。`form`

```
<form id="form" action="/" method="post" name="form" target="_blank">
  ...
</form> 
```

`onsubmit`将事件绑定到`#form`元素。

```
window.onload = function() {
    var popUp = function() {
        ...
    };
    var bindEvent = function(element, type, handler) {
        if (element.addEventListener) {
            element.addEventListener(type, handler, false);
        } else {
            element.attachEvent('on' + type, handler);
        }
    };
    bindEvent(document.getElementById("form"), "submit", popUp);
} 
```

[在这里你可以看到它。](http://jsfiddle.net/7G6tc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:22:22.080

您所要做的就是捕捉`onSubmit()`事件并停止传播。这样你就可以调用你自己的函数，在你的逻辑/验证之后，可以提交表单。

```
<html>
  <head>
  <script type="text/javascript">
    function handleFormSubmit(form) {
      popUp();
      form.submit();
    }

    function popUp() {
      alert("This is a test message");
    }
  </script>
  </head>
  <body>
    <form action="/" method="post" name="form" target="_blank"
          onSubmit="handleFormSubmit(this); return false;">
      <h3><span>Subscribe to Newsletter</span></h3>
      <p class="email_first">
        <label for="email">Your Email</label>
        <input id="EMAIL" class="email" type="email"
               name="EMAIL" value="Your Email Address:" size="30" />
      </p>
      <p class="submit"> <input type="submit" value="Send"/> </p>
    </form>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:23:20.177

如果我误解了你的问题，请原谅。

```
<form id="whatever" name="someform" action="/something" autocomplete="off" onsubmit="return doSomethingFunc(this);"> 
```

在那个函数中：

```
function doSomethingFunc(){
     // add whatever behavior you want here
     // if something fails, add return false; to cancel submission

} 
```

这样，您不必在提交按钮上添加 eventHandler。该功能将运行，您可以在那里施展魔法或完全取消提交。它还可以防止一些竞争条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:59:10.963

关于按钮的事情`<input type="submit">`是，它们总是会在任何“onclick”代码完成运行后**立即**提交表单，除非你不这样做。例子：

```
 onclick='someFunction(); return false' 
```

在您的情况下，您的“onclick”代码正在构建一个弹出窗口并显示它，但是**一旦它显示**，表单就会提交并且页面移动到 mailchimp 页面。

PolyWhirl 先生的建议是使用`<input type="button">`元素。在您告诉它们之前，这些按钮实际上不会做任何事情。这允许您构建一些 JS 功能，包括`form.submit();`您希望提交发生的任何地方。

根据您的代码，我认为您想要这样的东西：

**HTML**

```
<form action="/" method="post" name="form" target="_blank">
   <h3><span>Subscribe to Newsletter</span></h3>
   <p class="email_first">
      <label for="email">Your Email</label>
      <input id="EMAIL" class="email" type="email" name="EMAIL" value="Your Email Address:" size="30" />
   </p>
   <input type="button" value="Send" onclick="popup();/>
</form> 
```

**JavaScript**

```
function popUp() {
   var popup = document.createElement('div');
   popup.className = 'popup';
   popup.id = 'test';

   var cancel = document.createElement('div');
   cancel.className = 'cancel';
   cancel.innerHTML = 'close';
   cancel.onclick = function (e) {
      popup.parentNode.removeChild(popup);
      form.submit();
   };

   var message = document.createElement('span');
   message.innerHTML = "This is a test message";

   popup.appendChild(message);                                    
   popup.appendChild(cancel);
   document.body.appendChild(popup);
} 
```

**编辑：**是的，正确的绑定在这里很重要，但真正的问题是您试图停止提交足够长的时间以显示弹出窗口并让用户确认他们的操作。做到这一点的最好方法实际上是，在你准备好之前不要采取行动。在这种情况下，即在用户在弹出窗口中确认之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-03T18:06:25.913

对我有用的是使用 div 和 onclick 来代替使用按钮，如下所示：-

```
<div onclick="popUp();">Send</div> 
```

# ruby-on-rails - 渲染 has_many 与限制属性的关联时的 Rabl 问题

> ID：15144860
> 
> 赞同：0
> 
> 时间：2013-02-28T20:17:09.637
> 
> 标签：ruby-on-rails, rabl

我有一个模型，它有两个关系。

模型.rb

```
has_many :items
has_many :top_items, :class_name => "Item", :limit => 3 
```

所以在像索引这样的页面中渲染json时，我只想获取top_items。但 Rabl 似乎并不知道这一点。它只是弹出我所有的项目而不是 3。下面是我的 rabl 代码

```
child :top_items do |top_item|
    attributes :id, :name
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:44:31.070

```
If you eager load an association with a specified :limit option, it will be 
ignored, returning all the associated objects 
```

所以不可能从 has_many 关联中限制子大小。

# ruby-on-rails - 从多个表加载数据

> ID：15144863
> 
> 赞同：1
> 
> 时间：2013-02-28T20:17:20.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

所以我有一个这样的架构层次结构：

```
Organization > Program >RegistryPatientCount 
```

因此 RegistryPatientCount 保留`program_id`字段以访问`Program`表。（假设它还有一个**名称**列，例如程序名称等。）

`Program`表保留`organization_id`字段以访问`Organization`表。

然后在我的`controller#show`方法中，我有这样的东西：

```
 respond_to :json

  def show
    #TODO: Pagination.
    @blah =  Program.includes([:registry_patient_counts]).where(organization_id: params[:id])

    respond_with(@blah)
  end 
```

*注意：ID 参数是 organization_id 。*

当我运行它时，它从`Program`表中返回数据，但我希望它从`RegistryPatientCount`表中返回数据，下一步是能够钻入程序表，而不是 program_id 将能够从程序表中显示名称.

但是没有任何效果，就像我说的那样，它只是返回给定组织的 Program 表的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:26:01.813

您必须告诉`respond_with`它应该包含子元素。

```
respond_with(@blah, include: :registry_patient_counts) 
```

* * *

只是告诉 ActiveRecord用`Program.includes(...)`一个查询来获取所有数据。然后，您可以在控制器内部使用它，而无需进行额外的数据库查询。

但是`respond with`and`render`方法与此无关。它们通常只返回层次结构的第一级。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T20:30:59.370

在 irb 或 Rails 控制台（rails c）中，您能否查看是否从“RegistryPatientCount”获取数据。然后，如果可行，请将代码插入控制器或执行此操作的位置。假设你有模型和名为“organization_id”的字段，我会试试这个：

@blah = RegistryPatientCount.where(:organization_id => params[:id])

# java - 为什么我的 Java BufferedReader 在文件开始和结束时读取空值？

> ID：15144872
> 
> 赞同：3
> 
> 时间：2013-02-28T20:17:59.867
> 
> 标签：java, bufferedreader

我无法看到下面的代码有什么问题。它在没有空值时输出空值。

输出：`null This is one. This is two. This is three. This is four five six. seven? null`

文件内容：

```
This is one.
This is two.
This is three.
This is four
five
six.
seven? 
```

对此的任何帮助将不胜感激！

```
try (BufferedReader br = new BufferedReader(new FileReader(filename))) {

    String cLine="";
    while ((cLine = br.readLine()) != null) {
        content+= cLine;

    }
} catch (IOException e) {
    e.printStackTrace();
}

System.out.println(content); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:19:44.440

我怀疑`content`以 null 开头（而不是空），这解释了第一个`null`. 诚然，它没有解释最后一个...我的猜测是，自从您`null`在最后看到输出后，您实际上已经修复了一个错误。无论是那个还是你的文件*实际上*都`null`在最后。（我已经用`content`初始化为“”对其进行了测试，这很好。）

您是否知道您正在删除所有换行符，而不是用任何类型的分隔符替换它们？因此，具有“x”、“y”和“z”行的文件将变为“xyz”。

此外，考虑使用`StringBuilder`而不是字符串连接 - 它会更有效，因为它不需要一直复制字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:30:59.257

只是一个评论...

我不知道 try 的这种语法。最初我认为这是一个错字，但我发现它确实有效（我编译并运行了代码）。

我以为总是这样：try { .... .... .... } catch() {}

进一步阅读，发现这是 Java 7 的一个新特性，“try with resource”（来自[Java try catch 块的特殊语法](https://stackoverflow.com/questions/9582053/special-syntax-of-java-try-catch-block)）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T20:22:07.150

如果您从 Java 开始，我建议您使用更简单的方法……例如在文件上使用 Scanner。思考以下问题：

```
Scanner fileRead = new Scanner(fileName);

while ( fileRead.hasNextLine() ) {
    System.out.println( fileRead.nextLine() );
} 
```

反正我的建议。

# ruby - 我应该如何在模型中定义用户的电子邮件？

> ID：15144875
> 
> 赞同：0
> 
> 时间：2013-02-28T20:18:07.290
> 
> 标签：ruby, camping

我有一个玩具网络应用程序，其中我的用户的用户名也是他们的电子邮件地址（采用典型的“ `<username>@<host>`”格式）。我正在尝试创建一种方法来将模型中的用户电子邮件地址计算为`User#email`，但我需要访问`URL()`辅助方法来执行此操作，这在模型模块中不可用。

**有没有办法从内部模型访问 webapp 绑定到的根路径？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:52:10.670

`URL()`使用请求来确定主机，但您的模型也应该在请求之外可用（例如在控制台中）。在这种情况下，我建议将其全局存储在某处：

```
module App
  EMAIL_HOST = "hello.com"
end

module App::Models
  class User
    def email
      "#{username}@#{App::EMAIL_HOST}"
    end
  end
end 
```

# linux - mod security 2 的某些规则会导致 apache 在重新启动时挂起

> ID：15144880
> 
> 赞同：0
> 
> 时间：2013-02-28T20:18:15.950
> 
> 标签：linux, apache, security, lamp, mod-security2

因此，几天来我一直在尝试在我们的开发服务器上设置 mod 安全性，并且根据某些规则，它会导致 apache 在重新启动时挂起。

导致它挂起的规则示例：

```
SecRule REQUEST_HEADERS:Content-Type "text/xml" \
     "id:'200000',phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML" 
```

（顺便说一句，这条规则来自 modsecurity.conf-recommended

一个规则示例，如果不存在其他使其挂起的规则，则有效：

```
SecRule ARGS "\.\./" "t:normalisePathWin,id:99999,severity:2,msg:'Drive Access',phase:1,deny,status:400" 
```

我们的服务器设置是这样的：

```
Debian 6 "Squeeze"
Apache 2.2.22 (Binary install located in /usr/local/apache2)
Mod security 2.7.2 (located in /usr/local/modsecurity) 
```

我已确保所有依赖项均已安装且版本正确（libxml2、mod_unique_id 等...）

日志中没有显示任何内容，屏幕上也没有任何错误，它只是挂起并且实际上并没有重新启动

修改 modsecurity.c 和 mod_security2.c 以打印出信息我可以看到它到达 c 应用程序中的 pfn_register，但似乎在那里搞砸了（仍在尝试查明位置）

我真的不知道还有什么要检查或做什么，我能够相当快地在我的笔记本电脑上设置它并且没有问题。它只是在我们的实际服务器上搞砸了。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:14:14.250

所以像疯子一样谷歌（我并不是说在我提交问题之前我不是，但你知道我的意思）我找到了答案。或者至少到目前为止它似乎正在工作，我可以重新启动 apache 而不会挂起

配置 mod 安全性时，请使用以下命令：

./configure --enable-pcre-study=no

我真诚地希望这可以帮助其他人，因为过去几天这一直让我发疯。

# scala - 创建期货列表

> ID：15144881
> 
> 赞同：0
> 
> 时间：2013-02-28T20:18:19.860
> 
> 标签：scala, concurrency

我正在尝试以下列方式使用输入参数创建期货列表

```
def main( args:Array[String] ){
    val threads = args foreach yield future {
        // Do stuff here
    }
} 
```

但每次我尝试运行它时，我都会收到以下错误

```
error: ';' expected but 'yield' found.
val threads = args foreach yield future { str => 
```

我需要对我的函数做些什么才能使其编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:00:55.283

```
def main( args:Array[String] ){
    val threads = args map future {
        // Do stuff here
    }
} 
```

`foreach`不返回东西。`map`返回东西。它们都是在*可迭代集合*上定义的方法。

相反，`yield`关键字与`for`构造一起使用（称为*理解*），如下所示

```
for (arg <- args) yield future {...whatever}
//in general: for(generator) yield (result for each generated element) 
```

*（由[pagoda_5b](https://stackoverflow.com/users/1237450/pagoda-5b)编辑，被拒绝但我觉得值得）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:34:11.043

这个怎么样：

```
def main( args:Array[String] ){
  val threads = for(arg <- args ) yield future{1 + 1} 
} 
```

# java - 解析 HTML - 仅获取表格行的子集

> ID：15144886
> 
> 赞同：0
> 
> 时间：2013-02-28T20:18:33.407
> 
> 标签：java, html, parsing, jsoup

我有一个问题 - 我需要从网页上的 HTML 表中获取几行。我有一个方法可以将随机网站的内容作为字符串检索，但现在我需要解析它。我试图用这样的东西来做到这一点：

示例 HTML：

```
<table>
 <tr class="test">
        <td>1</td>
        <td>2</td>  
        <td>3</td>
        <td>4</td>
 </tr>
 <tr class="test2>
        <td>5</td>
        <td>6</td>  
        <td>7</td>
        <td>8</td>
   </tr>
 <tr class="test3>
        <td>9</td>
        <td>10</td>  
        <td>11</td>
        <td>12</td>
   </tr> 
```

对于这个 HTML 示例，我只需要值，例如：5、6、7、8。所以我有这个方法，使用 JSoup 定义：

```
String url = "a.html";
Document doc = Jsoup.connect(url).get();
Elements div = doc.select("table.domains-market-table.tbody.tr");

Element masthead = doc.select("table.domains-market-table").last(); 
```

但这会获取整个 div 的内容，而我想获取每个元素。谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:40:34.033

如何使用`nth-of-type(n)`选择器？

可能是这样的：

```
Elements div = doc.select("table.domains-market-table tbody tr:nth-of-type(2)"); 
```

[http://www.w3schools.com/cssref/sel_nth-of-type.asp](http://www.w3schools.com/cssref/sel_nth-of-type.asp)

[http://jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:44:51.737

我认为您的选择器应该是：`Elements div = doc.select("table.domains-market-table tr td");`，而`domains-market-table`必须是`<table>`标签中定义的类。除非您提供 HTML 文件，否则我无法为您提供正确的选择器。

# c# - oAuth 2.0 Google API asp.net 请求令牌

> ID：15144887
> 
> 赞同：1
> 
> 时间：2013-02-28T20:18:34.297
> 
> 标签：c#, asp.net, oauth, google-api, token

我从 google api 获取令牌时遇到问题，首先我提出此请求以从 google 获取代码

```
accounts.google.com/o/oauth2/auth?scope=www.googleapis.com/auth/userinfo.profile        www.googleapis.com/auth/userinfo.email&state=profile&redirect_uri={http://pedidostogo.com/Login.aspx}&response_type=code&client_id=519970867780.apps.googleusercontent.com&access_type=offline 
```

这似乎工作正常（我从谷歌获取代码）之后我再次请求使用该代码获取令牌，为此我做了：

accounts.google.com/o/oauth2/token?client_secret={我的客户密码}&grant_type=authorization_code&redirect_uri={ [http://pedidostogo.com/Login.aspx](http://pedidostogo.com/Login.aspx) }&client_id={我的客户 id}&code={我得到的代码谷歌}

但是当我做那个 POST 请求时，我得到：

状态：400 错误请求

```
Headers: Pragma: no-cache
Date: Thu, 28 Feb 2013 20:00:00 GMT
Content-Encoding: gzip
X-Content-Type-Options: nosniff
Server: GSE
X-Frame-Options: SAMEORIGIN
Transfer-Encoding: chunked
Content-Type: application/json
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
X-XSS-Protection: 1; mode=block
Expires: Fri, 01 Jan 1990 00:00:00 GMT

Data: {
  "error" : "invalid_request"
} 
```

谁能告诉我我做错了什么？谢谢。

# css - CSS、phpBB 和背景色

> ID：15144891
> 
> 赞同：0
> 
> 时间：2013-02-28T20:18:36.860
> 
> 标签：css, background-color, phpbb

我正在实现一个 phpBB 论坛，我发现字体调色板应该是不可见的。我关注了这篇文章[https://www.phpbb.com/community/viewtopic.php?f=46&t=2096426](https://www.phpbb.com/community/viewtopic.php?f=46&t=2096426)但没有帮助。

这里有一些背景：

我的 main.css 页面包含以下内容：

```
tr, th, td {
background: none repeat scroll 0 0 transparent;} 
```

phpBB 绘制的调色板如下：

```
<div id="colour_palette" style="display: block;">
<table cellspacing="1" cellpadding="0" border="0">
<tbody>
<tr>
<td bgcolor="#808000" style="width: 15px; height: 10px;">
<a onclick="bbfontstyle('[color=#808000]', '[/color]'); return false;" href="#">
<img width="15" height="10" title="#808000" alt="#808000" src="images/spacer.gif">
</a>
</td> 
```

为了覆盖 main.css 中设置的透明度，我在 main.css 文档中添加了以下内容：

```
#colour_palette td {
background-color: #FFFFFF;
} 
```

我编辑了 phpBB javascript，现在调色板的写法如下：

```
<td style="width: 15px; height: 10px; background-color=#BF8040;">
<a onclick="bbfontstyle('[color=#BF8040]', '[/color]'); return false;" href="#">
</td> 
```

但调色板仍然不可见。

我将不胜感激任何和所有的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T22:28:22.960

我在重新阅读我的帖子时找到了答案：

从上面一行中的 background-color= 更改为 background-color: 就是答案。代码工作如下：

# objective-c - 如何向 lldb 控制台中的对象发送消息？

> ID：15144892
> 
> 赞同：2
> 
> 时间：2013-02-28T20:18:41.607
> 
> 标签：objective-c, xcode, cocoa, lldb

假设我有指向对象' `0x20c28010`'的指针。如何在调试器控制台 (lldb) 中向该对象发送消息？如：`[0x20c28010 doSomething];`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T20:22:20.537

如果消息没有返回任何内容，或者返回您不关心的指针、整数或浮点类型，您可以这样做：

```
p (void)[0x20c28010 doSomething] 
```

如果您关心返回类型，或者返回类型是 a `struct`，则需要强制转换为正确的返回类型。例子：

```
p (int)[0x20c28010 length]
p (float)[0x20c28010 scale]
p (CGPoint)[0x20c28010 origin] 
```

如果消息返回一个指向 Objective-C 对象或 Core Foundation 类型的指针，您可以使用`po`打印返回的对象的描述：

```
po [0x20c28010 doSomething] 
```

# jdbc - 在 jvm 或 db 中预编译的预处理语句在哪里？

> ID：15144893
> 
> 赞同：4
> 
> 时间：2013-02-28T20:18:49.210
> 
> 标签：jdbc, prepared-statement, precompiled

当阅读不同的帖子时，脑海中浮现出一个问题，准备好的语句在哪里预编译，在 jvm 中还是在 db 中？该过程何时实际发生在 java 类中。下面的例子:=

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class PreparedStmtDemo {

public static void main(String args[]) throws SQLException,Exception {

    Class.forName("oracle.jdbc.driver.OracleDriver");
    Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:ORCL","scott","tiger");
    PreparedStatement preStatement = conn.prepareStatement("select RollNo from student where Stream =?");
    preStatement.setString(1, "Commerce");

    ResultSet result = preStatement.executeQuery();

    while(result.next()){
        System.out.println("Roll No: " + result.getString("RollNo"));
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:59:48.437

JDBC 驱动程序将 PreparedStatement 预编译为 SQL 语句，该语句涉及将参数从 Java 数据类型映射到 SQL 数据类型。

然后将预编译语句汇集到 Oracle 数据库中。

PreparedStatement 与普通 Statement 相比具有以下优点：

*   防止 SQL 注入攻击
*   如果您在 java 中使用其他参数重用 PreparedStatement 实例，则 JDBC 驱动程序不需要再次预编译它
*   Oracle 数据库可以重用池化的 SQL 语句

但是，如果您不使用查询参数，则 Statement 和 PreparedStatement 的行为方式相同。

# javascript - 使用 JQuery/Javascript 数组形成两侧渐变布局

> ID：15144896
> 
> 赞同：0
> 
> 时间：2013-02-28T20:19:01.067
> 
> 标签：javascript, jquery

当我为客户做网站时，我经常收到要求有一个双面布局的请求，左侧的按钮会导致右侧的 div 适当地淡入和淡出。很长一段时间以来，我一直在写每个案例。（这有点愚蠢和耗时）。我想系统化它，但我一直很难，因为我不明白 javascript/jquery 如何与 .click() 和数组一起工作。

```
$(document).ready(function(){
    var left = new Array($('#a'),$('#b'), $('#c'),$('#d'), $('#e'));
    var right = new Array($('#1'),$('#2'),$('#3'),$('#4'),$('#5'));
   // left[0].click(function(){right[0].fadeIn('fast');})
    var numbers = new Array(1,2,3,4,5);

    function fadey(x){
        left[x].click(function(){
          right[x].fadeIn('fast');
         })

    }
    for (var i = 0; i < left.length; i++) {
      fadey(i);
    };
}) 
```

此代码获取它，以便左侧按钮导致相应的右侧 div 出现。问题是我似乎无法在不导致所有 div 消失的情况下让其他 div 消失。

理想情况下，如果我有一行代码可以简单地检查左侧 jquery 对象数组何时被单击，获取其索引值，并导致相应的右侧 jquery 对象数组出现，同时隐藏另一个那些。

这样我就可以将元素插入每个数组，然后不必担心一个一个地编写这些案例。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:23:26.030

您可以使用类而不是 ID 创建一个通用事件处理程序：

```
$('.left button').click(function() {
    var index = $(this).index();

    $('.right section').eq(index).fadeIn('fast');
}); 
```

我假设您的 HTML 看起来像这样：

```
<aside class="left">
    <button>One</button>
    <button>Two</button>
    <button>Three</button>
</aside>

<aside class="right">
    <section>One</section>
    <section>Two</section>
    <section>Three</section>
</aside> 
```

# javascript - 我可以在没有弹出窗口的情况下停止 JS location.href 吗？

> ID：15144899
> 
> 赞同：6
> 
> 时间：2013-02-28T20:19:15.543
> 
> 标签：javascript, jquery, location, href

我想构建一个 JS 外部脚本（标签），它可以在不使用弹出窗口的情况下阻止诸如 location.href 之类的代码（通常不是我的）发生。我试过这样的事情：

```
$(window).bind('beforeunload', function() {
 window.stop();
 event.stopImmediatePropagation();
 event.preventDefault();
 location.href = '#';  
 }); 
```

但似乎没有任何帮助。再次，我需要它而不使用：返回“你确定吗？” 也许是不同的回调？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:29:13.647

用于确认导航离开的正确方法`onbeforeunload`是只返回您想要显示的消息的字符串。[MDN 有这个说法](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)。

> 该函数应为 Event 对象的 returnValue 属性分配一个字符串值并返回相同的字符串

因此，您`onbeforeunload`要求的行为的功能就是（与将其与 jquery 绑定相同，特别是因为 onbeforeunload 不像其他事件那样支持多个事件侦听器）

```
window.onbeforeunload = function() {
    return "Are you sure?";
}; 
```

但具有讽刺意味的是，出于安全考虑，Firefox 不支持此功能。

> 请注意，在 Firefox 4 及更高版本中，返回的字符串不会显示给用户。请参阅[错误 588292](https://bugzilla.mozilla.org/show_bug.cgi?id=588292)。

**编辑：**我阅读了更多的错误报告。他们做出此决定的主要原因是：“1\. 删除站点提供的文本，因为这是一个安全问题（浏览器对话框中的不可信文本）”。我想知道他们对 a 的感觉如何`alert`？

大多数现代浏览器（Chome、IE 9+ 或更早版本，以及 Opera，我肯定知道）会忽略您在`onbeforeunload`函数中尝试执行的任何操作，而不是返回一个字符串进行显示。这是为了防止劫持用户的浏览器、打开弹出窗口、通过将用户指向另一个可能是恶意的域来覆盖导航尝试等。

**编辑2：**我显然是不正确的。只有*一些*事情是不允许的`onbeforeunload`，它们只是碰巧主要是您在示例代码中尝试的事情类型，与事件传播和页面导航有关。从该 FF 错误报告[的评论](https://bugzilla.mozilla.org/show_bug.cgi?id=588292#c97)中，用户 oyasumi 发布了一个指向此 jsFiddle 的链接，其中包含向 FF 4+ 用户显示自定义文本的解决方法：http: [//jsfiddle.net/ecmanaut/hQ3AQ/](http://jsfiddle.net/ecmanaut/hQ3AQ/)所以显然调用`alert()`仍在允许，甚至在 中`onbeforeunload`，这很有趣，这正是“错误”“修复”的原始原因：在浏览器/应用程序/操作系统/官方外观对话框中显示自定义文本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T20:30:08.793

您是否尝试使用“return false”？此外，您应该将事件发送到您的函数。这是一个示例，您可以在其中防止按钮单击和超链接

```
<input type="button" value="click me" />
<a href="www.google.com"> google </a>

$(document).ready(function(){
    $('input[type="button"]').click(function(e){
             e.preventDefault();
    });
    $('a').click(function(e){
        e.preventDefault();

    });
}); 
```

这是链接[http://jsfiddle.net/juTtG/143/](http://jsfiddle.net/juTtG/143/)

# javascript - 将表单元素从输入更改为 Select 会中断 JavaScript 函数

> ID：15144903
> 
> 赞同：0
> 
> 时间：2013-02-28T20:19:38.553
> 
> 标签：javascript, google-maps

我在这里有很好的表单元素：

```
<input id="addreessinput1" style="width:20%" value="Enter Address"/>
<input id="showaddress1" type="button" value="Show Tech Home" style="width:10%"/> 
```

这成功地启动了下面的 javascript 代码。当我将 adreessinput1 从

```
 <select name="addreessinput1" style="width:20%">
      <option value="my address">my address</option>
    </select> 
```

我尝试将`$("#showaddress1").click(geoCode1);`from click 更改为无效。我究竟做错了什么？

```
function geoCode1(){
    var address = $("#addreessinput1").val();
    geocoder = new google.maps.Geocoder();
    if(geocoder){
        geocoder.geocode( { 'address': address }, function(results, status) { // status is empty
        if (status == google.maps.GeocoderStatus.OK) {
            $("#lnf").css("display","none");
            var mposition = new google.maps.LatLng(results[0].geometry.location.lat(),results[0].geometry.location.lng());
            var image = new google.maps.MarkerImage('beachflag.png',
            new google.maps.Size(20, 32),
            new google.maps.Point(0,0),
            new google.maps.Point(0, 32));
            var shadow = new google.maps.MarkerImage('beachflag_shadow.png',
            new google.maps.Size(37, 32),
            new google.maps.Point(0,0),
            new google.maps.Point(0, 32));
            var shape = {
                coord: [1, 1, 1, 20, 18, 20, 18 , 1],
                type: 'poly'
            };
            if(mapa.addressmarker){
                mapa.addressmarker.setMap(null);
                mapa.bounds = new google.maps.LatLngBounds();
                mapa.map.fitBounds(mapa.bounds);
            }
            mapa.addressmarker = new google.maps.Marker({
                                position: mposition,
                                map:mapa.map,
                                title:address,
                                icon:image,
                                shadow:shadow,
                                shape:shape
                            });
            mapa.bounds.extend(mposition);
            mapa.map.fitBounds(mapa.bounds);
        }
        else if(status == google.maps.GeocoderStatus.ZERO_RESULTS){
            mapa.addressmarker.setMap(null);
            $("#lnf").css("display","block");
        }
    });
    }
}
$(document).ready(function(){
    $("#date1" ).datetimepicker({
        inline: true,
        dateFormat: "yy-mm-dd",
        timeFormat: "HH:mm",
        pickerTimeFormat: "HH:mm"
    });
    $("#date2" ).datetimepicker({
        inline: true,
        dateFormat: "yy-mm-dd",
        timeFormat: "HH:mm",
        pickerTimeFormat: "HH:mm",
        hour: 23,
        minute: 59
    });
    var mapOptions = {center: new google.maps.LatLng(26.549473, -81.847920),
        zoom: mapa.zoom,
        mapTypeId: google.maps.MapTypeId.HYBRID
    };
    mapa.map = new google.maps.Map(document.getElementById("map_canvas"),
    mapOptions);

    $("#user_id").change(getUserMarkers);
    $("#markerslist").change(upMarker);
    $("#getmarkers").click(getUserMarkers);
    $("#showaddress").click(geoCode);
    $("#showaddress1").click(geoCode1); 
}); 
```

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:12:51.660

在`<input id="addreessinput1" ... />`您使用 id 时，在`<select name="addreessinput1" ... />`您使用 name 属性时。

`$("#addreessinput1")`很可能找不到选择并因此返回`null`值。

# grails - 如何在 Grails 应用程序中防范 XSS 攻击

> ID：15144905
> 
> 赞同：2
> 
> 时间：2013-02-28T20:19:42.890
> 
> 标签：grails, xss, grails-orm

在我的 grails 应用程序中，我从中提取文本`params`并将其用作域查询中的参数：

例子：

```
def color = Colors.findByName(params.colorname) 
```

我想有人可以摆弄`params.colorname`参数来对我的`mysql`数据库运行错误的查询。

有哪些好的做法可以防止此类事情发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:39:15.843

当您在视图中呈现可能包含 XSS 攻击的字段时，您需要将其编码为 HTML。您应该对包含用户输入的所有字段进行编码。所有标准 Grails 标记都编码为 HTML。但是，如果您`${}`在视图中使用，那您可能会遇到麻烦。您需要手动对其进行编码，`${colorname.encodeAsHTML()}`或者使用标签，`fieldValue`如果它是一个 bean 属性。

您还可以使用 in 设置全局默认编解码`grails.views.default.codec = "html"`器`Config.groovy`。

注意双重编码，并确保在自定义标签中编码为 HTML。

您还参考了与 XSS 攻击不同的 SQL 注入攻击。只有在编写自己的 SQL 或 HQL 并将用户输入直接插入 SQL/HQL 时，才会面临 SQL 注入的风险。这意味着 do`Colors.executeQuery("from Colors where name like ?", params.colorname)`而不是`Colors.executeQuery("from Colors where name like $params.colorname")`.

# jquery - 将 Jquery 流沙与分页相结合

> ID：15144908
> 
> 赞同：2
> 
> 时间：2013-02-28T20:19:49.430
> 
> 标签：jquery, pagination, portfolio, quicksand

我正在尝试将可过滤的流沙组合与 Wordpress 网站中的分页结合起来。我已经搜索了很多，并且有一些带有标准 Wordpress 分页的示例，但是这些示例为分页加载了另一个 url，并对投资组合项目进行了新的查询。流沙过滤器仅适用于该特定页面上的查询项目。我想让流沙过滤器适用于所有投资组合项目，以及其他页面上的项目，所以我需要某种 ajax 分页。

[我已经在http://www.cofoto.tk/portfolio](http://www.cofoto.tk/portfolio)上设置了一些东西，jPage 分页工作，但是当点击过滤器时，投资组合的内容会动态变化并且分页不再起作用。我希望过滤器以某种方式告诉分页内容已更改，并且应根据当前显示的内容重新启动分页。我缺乏针对这个特定问题的技术技能，并希望有人可以帮助我解决这个问题。

提前谢谢，如果需要更多信息，请告诉我。

阿恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:20:44.150

我目前尝试解决相同的问题，并找到了一个（相当多的 javascript）解决方案，可以完全满足您的需求。它使用上述“jpages”和来自同一作者的插件[“Filtrify” ，而不是 Quicksand。](http://luis-almeida.github.io/filtrify/)每当调用新过滤器时，此实现基本上都会更新分页。

可以在这里看到一个演示：http: [//luis-almeida.github.io/filtrify/jpages.html](http://luis-almeida.github.io/filtrify/jpages.html)

代码在这里： [https ://github.com/luis-almeida/filtrify/blob/master/jpages.html](https://github.com/luis-almeida/filtrify/blob/master/jpages.html)

这是一个相当依赖于 javascript 的解决方案，所以 def/ 测试性能。作者建议对图像使用延迟加载，我也会这样做。希望它有所帮助！

# mysql - 将表中两列的连接值插入到另一表的单列中

> ID：15144912
> 
> 赞同：0
> 
> 时间：2013-02-28T20:19:57.920
> 
> 标签：mysql, sql, concatenation, mysql-error-1292

我有一个包含三列的表。它们是 VarChar 类型。我正在寻找连接第一列和第二列的值并将其插入到另一个表的第一列中。

我用了这段代码

```
insert into table2(cloumn1)
select city+''+Coalesce(zipcode) from table1 
```

我收到一个错误

```
Error Code: 1292\. Truncated incorrect DOUBLE value: 'london' 
```

"London" 是第一行的值，第二行的值类似于 "123.2.4.4" 两列都声明为 VarChar。

我应该在查询中更改什么以获得 table2 中看起来像“london 123.2.4.4”的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:35:50.267

您应该使用该`CONCAT()`函数来连接字符串：

```
insert into table2(cloumn1)
select CONCAT(city, Coalesce(zipcode, '')) 
from table1 
```

并确保您要插入的列的数据类型是 varchar。如果数据类型是双精度，那么您将收到此错误。

# database - 访问、编译错误和运行时

> ID：15144916
> 
> 赞同：0
> 
> 时间：2013-02-28T20:20:10.377
> 
> 标签：database, ms-access, runtime

我有一个需要使用的数据库，但它有一些我必须修复的错误。由于我不是 MS-Access 方面的专家，所以我无法弄清楚错误在哪里。

第一个错误

```
Run-time. Could not find field '| 1' to which reference is made in the expression. 
```

按下打印按钮时抛出。

![在此处输入图像描述](../Images/e92063470299c87c073051f90da9b74a.png)

打开调试，我发现了这段代码：

```
Private Sub Pulsante40_Click()

    If Me!Campo51 = False Then
        Select Case [schede]![S_Stampa_Ordini].[ordinamento]
            Case 1
                DoCmd.OpenReport "Stampa Ordini BY DATA", , , " (DATA_AGG Between #" & Format$(Me.[Dal], "mm/dd/yyyy") & "# And #" & Format$(Me.[Al], "mm/dd/yyyy") & " 23:59#) AND Tipo = """ & Me.TipoL & """"
            Case 2
                DoCmd.OpenReport "Stampa Ordini BY CLIENTE", , , " (DATA_AGG Between #" & Format$(Me.[Dal], "mm/dd/yyyy") & "# And #" & Format$(Me.[Al], "mm/dd/yyyy") & " 23:59#) AND Tipo = """ & Me.TipoL & """"
            Case 3
                DoCmd.OpenReport "Stampa Ordini BY LAVORAZION", , , " (DATA_AGG Between #" & Format$(Me.[Dal], "mm/dd/yyyy") & "# And #" & Format$(Me.[Al], "mm/dd/yyyy") & " 23:59#) AND Tipo = """ & Me.TipoL & """"
            Case 4
                DoCmd.OpenReport "Stampa Ordini BY DATA_CONS", , , " (DATA_AGG Between #" & Format$(Me.[Dal], "mm/dd/yyyy") & "# And #" & Format$(Me.[Al], "mm/dd/yyyy") & " 23:59#) AND Tipo = """ & Me.TipoL & """"
        End Select
        FDipendente = 0
    Else
        DoCmd.OpenForm "FiltroStampa", , , , , A_DIALOG
    End If

End Sub 
```

它给了我在线错误：

```
Select Case [schede]![S_Stampa_Ordini].[ordinamento] 
```

第二个错误

```
Compile Error, could not find the method or data member 
```

当我打开面具分钟并选择时抛出

```
 Legno, or Lavorazione Ext 
```

![在此处输入图像描述](../Images/c8e67b991a6e3e5793245c02d19fb47a.png)

代码：

```
Private Sub Tipo_AfterUpdate()
    Select Case Me.Tipo
        Case "C"
            Me.[SSMin-In].scheda.testo0.Caption = "Lavorazione:"
        Case "L"
            Me.[SSMin-In].scheda.testo0.Caption = "Cod.Prev.:"
        Case "E"
            Me.[SSMin-In].scheda.testo0.Caption = "Cod.Prev.:"
    End Select
End Sub 
```

它给了我在线错误：

> 私有子 Tipo_AfterUpdate()

这几天我一直在尝试解决数据库问题，或者至少开始学习视觉基础来理解一些东西。不幸的是我只知道java，我的同事帮不了我。提前感谢您的回答，如果我不清楚或没有提供足够的信息，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:19:50.073

您可能想尝试将您的 SQL 复制到一个（或两个）查询中。确保它们确实产生了您想要的结果。然后，您可以调用`DoCmd.OpenQuery "qappYourNewQueryName"`. 它更容易阅读。

```
INSERT INTO [MIN-OUT] 
    ( LAVORAZION, TIPO, MINUTI ) 
SELECT DISTINCTROW 
    [MIN-IN].LAVORAZION, 
    [MIN-IN].TIPO, 
    0 FROM [MIN-IN] 
GROUP BY 
    [MIN-IN].LAVORAZION, 
    [MIN-IN].TIPO;

' What is this?
, ID_Dipendente ) 

SELECT DISTINCTROW 
    [MIN-IN].LAVORAZION, 
    [MIN-IN].TIPO, 
    [Forms]![Minuti].[dipendente] AS Espr1 
FROM [MIN-IN] 
GROUP BY 
    [MIN-IN].LAVORAZION, 
    [MIN-IN].TIPO, 
    [Forms]![Minuti].[dipendente];") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:08:01.337

在我看来，您的代码正试图引用表单上的控件，但是以一种无效的方式（我不太明白代码试图做什么，因为我不阅读语言，而且我不知道您在表单上有哪些控件）。

例如，要获取表单上组合框的值，您通常会键入类似`Me.cboMyCombo.Value`. 要获取绑定到此表单的字段的值，您可以键入类似`Me!MyField`or的内容`Me![My Field].Value`。

`[schede]![S_Stampa_Ordini].[ordinamento]`你的电话`Me.[SSMin-In].scheda.testo0.Caption`看起来他们最后有太多的方法。

找出可接受的方法的一种方法是开始输入并让弹出菜单指导您。例如，键入`Me.`并查看弹出的内容。在我的示例中，`cboMyCombo`将是菜单中的项目之一。选择它，您将看到一个新菜单`Value`作为选择。

您还可以使用[“表达式生成器”](http://office.microsoft.com/en-us/access-help/using-the-expression-builder-HP005186638.aspx)。

# jquery - click(function() button - 如何切换样式？

> ID：15144917
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:20:12.347
> 
> 标签：jquery

我从评论中听说切换不适合这里，所以我删除了它。下面的代码有效......但是有没有更好的方法来做到这一点......我的 Jquery 是有限的。谢谢你。

```
$(document).ready(function(){
$('div.botColorBoxBtn1').click(function() {
        $("div.botColorBox").css({ 'height':'90px'});
        $('div.botColorBoxBtn1').hide();
        $('div.botColorBoxBtn2').show();return false;
});
});

$(document).ready(function(){
$('div.botColorBoxBtn2').click(function() {
        $("div.botColorBox").css({ 'height':'11px'});
        $('div.botColorBoxBtn2').hide();
        $('div.botColorBoxBtn1').show();return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:21:54.230

这是预期的结果，[`.toggle()`](http://api.jquery.com/toggle/)将显示/隐藏匹配的元素。

# javascript - 在 CouchApp 文件夹结构中将自定义验证功能放在哪里？

> ID：15144919
> 
> 赞同：0
> 
> 时间：2013-02-28T20:20:12.817
> 
> 标签：javascript, couchdb, couchapp

我应该在 CouchApp 文件夹结构中的哪个位置放置[验证功能](http://guide.couchdb.org/draft/validation.html)，以便使用命令正确推送它`couchapp push`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:12:38.720

查看[CouchApp 文档](https://github.com/couchapp/couchapp/wiki/Complete-Filesystem-to-Design-Doc-Mapping-Example)。

正确的文件是`./validate_doc_update.js`

# asp.net - 分配 ASP.NET 用户/表单身份验证数据库

> ID：15144924
> 
> 赞同：0
> 
> 时间：2013-02-28T20:20:31.723
> 
> 标签：asp.net, sql-server, visual-studio-2010, visual-studio, webforms

ASP.NET 新手。

在 Visual Studio 2010 Ultimate 中，我创建了一个新的 ASP.Net 3.5 网站，然后使用拖放到页面上的工具箱控件添加表单身份验证。在我的测试环境中使用这些控件创建新用户后，在项目的 App_Data 文件夹中创建了一个名为 ASPNETDB.MDF 的数据库。

我还通过向它添加表来修改这个数据库，我使用连接字符串从网站上的 Web 表单中以代码访问这些表：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=C|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;Connect Timeout=30;User Instance=True 
```

现在我准备将网站放在我的虚拟主机 1and1.com 上。我在 1and1 控制面板中创建了一个数据库。1and1 帮助页面说使用如下连接字符串连接到 1and1 托管的 SQL Server 数据库：

```
server=mydbHostName.db.1and1.com; initial catalog=mydbName;uid=mydbUser;pwd=mydbPassword 
```

我已经测试了这个连接并且可以使用这个连接字符串创建和访问表。

我的问题是如何告诉表单身份验证在 1and1 服务器上使用这个新数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:38:20.817

这一切都在您的 web.config 文件中。您应该会看到如下所示的内容：

```
<membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" <snip> applicationName="/" />
      </providers>
    </membership> 
```

connectionStringName 指向 ConnectionStrings 部分中定义的连接字符串 - 只需确保更改 Membership Provider 中的属性以匹配您用于连接字符串的名称（反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:53:12.427

好吧，这确实是一个不同的问题，但无论如何 - 您可以通过 SSMS 使用 BACKUP 命令创建数据库备份，或者通过右键单击 SSMS 中的数据库并从任务菜单中选择备份 - 这将创建您的 .bak 文件您可以使用 FTP 上传到 1and1。然后进入他们的 SQL 管理器，或使用 SSMS 连接到您的 SQL Server 实例（我不是 1and1 用户，但大多数主机允许您使用托管帐户中的 SQL Server 凭据进行连接），并从 .bak 恢复数据库文件。如果不检查您的脚本和 1and1 SQL Server 配置，我无法告诉您为什么您有排序规则错误 - 可能是 SQLExpress（这是 ASP.Net 配置文件管理的默认设置）和正在运行的任何版本的 SQL Server 1and1 之间的差异. 在任何情况下，如果不通过其基于 Web 的工具，您可能没有在 1and1 服务器上创建数据库的权限。将数据库连接到 1and1 服务器后，您的应用程序应使用它们提供的连接字符串进行连接 - 只需确保服务器位置和数据库名称正确。

# xml - 在 MSXML 中使用 nbsp 解析 HTML 块

> ID：15144927
> 
> 赞同：0
> 
> 时间：2013-02-28T20:20:38.397
> 
> 标签：xml, dom, xml-parsing, msxml, ixmldomdocument

我正在尝试将一大块 HTML 加载到 MSXML 的 DOMDocument 中。所述块是有效的 XML，但有一个例外 - 它具有`&nbsp;`实体。MSXML 扼杀了他们，声称“对未定义实体 'nbsp' 的引用。”。

我可以让 MSXML 以某种方式将其识别为有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:27:52.937

简单的解决方案：只需运行“ ”的文本替换 在解析文档之前到“”。哪个应该有效，因为不能逐字逐句   在文本中，不应替换。

更标准的解决方案：声明一个nbsp；xml中的实体，通过插入

```
<!DOCTYPE foobar [
   <!ENTITY nbsp " " >
]> 
```

在 xml 根节点之前。

您也可以使用 "0xA0" 和   如果你真的想要一个不间断的空间，而不是一个普通的空间

# c++ - C++ priority_queue 没有推送？

> ID：15144928
> 
> 赞同：0
> 
> 时间：2013-02-28T20:20:40.280
> 
> 标签：c++, xcode, stl, priority-queue

我的文件顶部有这些：

```
#include <queue>

typedef struct cell_s {
    unsigned int x;
    unsigned int y;
    unsigned int ambiguity = 9;
} cell_t;

// so the priority_queue can sort the structs:
bool operator<(const cell_t &a, const cell_t &b) {
    return a.ambiguity < b.ambiguity;
} 
```

在同一个文件中，我将 priority_queue 声明为类的私有成员，如下所示：

```
priority_queue<cell_t> blankCellQueue; 
```

然后我有一个包含这些行的同一类的成员函数：

```
cell_t cell;
cell.x = x;
cell.y = y;
blankCellQueue.push(cell); 
```

但是 Xcode 在我分享的最后一行显示了这个警告：

“没有匹配的成员函数调用‘push’”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:24:11.730

`priority_queue`是命名空间的一部分，`std`. 你需要使用`std::priority_queue`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:48:37.697

很抱歉浪费了你所有的时间。我发现了这个问题。priority_queue 是我班的成员。我试图从中编辑priority_queue 的函数是我标记为const 的成员函数，因为当我最初在没有任何队列的情况下编写它时，我没有预料到需要修改任何类变量。从 const 成员函数调用成员对象的 push 显然是禁忌。我只是希望 Xcode 给出了一个稍微有用的错误消息......类似于“从 const 函数调用的非 const 函数”的内容将是一个非常有用的消息。

由于我没有提供成员函数声明，因此任何人都很难在这里向我指出这一点。

感谢您提供帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:25:58.383

C++11[`std::priority_queue`](http://en.cppreference.com/w/cpp/container/priority_queue)是标准容器适配器，它*确实*具有成员函数`push()`- 请参阅链接参考。

但是，您的 C++ 标准库的实现可能不兼容。您应该升级到最新版本。

[您可以在此处](http://liveworkspace.org/code/3SpAkW%2437)查看您的代码正在编译。它需要在`std::`之前添加命名空间限定符`priority_queue`，但我认为这不是问题的根本原因。如果是这样，您的编译器错误应该不同（或者您之前应该收到其他错误）。

# system.reactive - Rx：WindowWithTime、WindowWithCount 运算符在哪里？

> ID：15144932
> 
> 赞同：1
> 
> 时间：2013-02-28T20:21:01.737
> 
> 标签：system.reactive

我看到这些在网上都提到了；但是，当我通过 NuGet 导入最新的 Rx 时，它们似乎不存在。这些方法被重命名了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:25:59.540

它们现在都是重载`Window`：

```
var maxWindowCount = 5;

.Window(maxWindowCount)
.Window(TimeSpan.FromSeconds(5)) 
```

Lee Campbell 有一篇很好的文章`Window`： http : [//leecampbell.blogspot.com/2011/03/rx-part-9join-window-buffer-and-group.html](http://leecampbell.blogspot.com/2011/03/rx-part-9join-window-buffer-and-group.html)`GroupJoin``Buffer`

# jquery - jQuery - 在悬停孙子或曾孙时，递归控制父母的样式

> ID：15144933
> 
> 赞同：0
> 
> 时间：2013-02-28T20:21:03.843
> 
> 标签：jquery

我正在尝试构建至少 4 级菜单（无限制）。我的愿望是使用 jQuery 在菜单上创建一个通用的递归操作。当我悬停子元素时，父元素的高度会增加，当悬停任何孙子或曾孙子时，我也希望得到相同的结果，相同的父元素保持高度增加，而不是孙子或曾孙子女。

我试过这个：http: [//jsfiddle.net/dTqX3/](http://jsfiddle.net/dTqX3/)

看起来我需要别的东西而不是

`$(this).parent().parent().parent().find("a:first")`

这工作不正确。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:52:10.280

根据您的 DOM 结构，您需要爬上树到`<ul>`祖先（被悬停的项目的容器）并找到作为其兄弟的锚点（导致该容器显示的更高级别的菜单项），转换为：

```
$(this).closest("ul").siblings("a") 
```

有了这个改变[，它似乎工作得很好](http://jsfiddle.net/5uSQD/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:16:43.243

在从@Jon 那里得到了一些很好的指导之后（非常感谢！）我尝试了像[.parentsUntil()](http://api.jquery.com/parentsUntil/)和[.parents()](http://api.jquery.com/parents/)这样的函数。仍然没有找到预期的结果，但我有可能知道这个递归父计数是如何工作的。我保持原样`.parents()`并补充道`.last()`。下一个代码成功了：

```
$(this).parents('ul > li').last().find("a:first").attr('style', 'height:55px;line-height:55px;'); 
```

这是重要的部分：

```
$(this).parents('ul > li').last().find("a:first") 
```

[**演示**](http://jsfiddle.net/upk7X/)

# android - android facebook sdk 将提要发布到用户的时间轴

> ID：15144936
> 
> 赞同：9
> 
> 时间：2013-02-28T20:21:10.047
> 
> 标签：android, facebook, facebook-android-sdk, android-facebook

在我的应用程序中，我需要在用户的时间轴上发布某些内容。我遵循了[https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)上给出的官方教程。但在本教程中，他们提到首先设置**登录**流程。他们给出了一个很好的指南来做到这一点。没关系。

但我想要的方式是，用户只会看到**分享故事**按钮。如果用户已登录，则应直接发布故事。如果没有，则应遵循正常的登录流程，询问所需的权限，并发布登录回调故事。我不想明确显示**登录**按钮。

我坚持这一点，因为在文档中，他们提到的任何地方都 `<com.facebook.widget.LoginButton .... />`用于登录目的。我根本不想使用它，因为这需要用户交互两次。第一次点击**登录**按钮，第二次发布故事，他/她必须点击**分享故事**按钮。

我找不到检查用户是否未登录并强制他/她首先从我的代码块登录的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T01:31:02.323

可能有点晚了，但这似乎回答了你的问题：

[Android - Facebook SDK 3 - 如何在没有 LoginButton 的情况下以编程方式登录](https://stackoverflow.com/questions/13746124/android-facebook-sdk-3-how-to-login-programatically-without-loginbutton)

# linux - 在 Linux 中显示所有用户的文件/目录权限

> ID：15144937
> 
> 赞同：0
> 
> 时间：2013-02-28T20:21:11.063
> 
> 标签：linux, permissions

在 Linux 中，很容易从控制台显示当前登录用户的目录和文件的文件权限。

但是我可以显示另一个用户、任何用户和任何组的权限吗？类似于 Windows 中文件或目录的属性窗口的“安全”选项卡中显示的内容，即它列出了对该文件具有任何权限的每个用户以及他拥有或不拥有的权限：

可能需要的输出示例：

/etc/multifile -rwx------- admin1 -rwx------- admin2 -r--------- john

我一直在徒劳地在 Linux 中寻找类似的东西。您甚至可以将权限分配给多个用户吗？

或者这是否超出了“Unix 权限”的能力，是时候进入 ACL 之类的东西了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-24T12:38:26.110

显示文件及其权限

```
stat -c '%a - %n' directory/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:38:18.153

您看到的权限对所有用户都可见。

并且文件的权限也依赖于父目录的权限。

只有当父目录对您的用户或组具有读取和执行权限位时，您才能列出文件。仅当父目录对您的用户或组具有写入权限位时，您才能查看该文件。

是的，其他人的权限位适用于所有用户。

如果您可以正确地重新组织您的用户和组，您应该能够实现您正在寻找的大部分文件权限和访问控制。

在此处阅读有关每个权限位的更多信息：[http ://www.tuxfiles.org/linuxhelp/filepermissions.html](http://www.tuxfiles.org/linuxhelp/filepermissions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:38:58.210

通常，除了您使用的权限之外，没有其他权限可以查看 `ls -l .`

但是，在某些特殊情况下，ls 命令可能不会显示一些额外的信息。

如果 ls -l 在这样的属性之后显示一个加号：

```
-rw-r--r--+ 1 獠牙 獠牙 202 2012-03-04 19:31 sfc.txt
```

然后尝试`getfacl <file>`查看权限的其余部分。

# javascript - 如何设置sqlite选择的样式

> ID：15144939
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:21:19.260
> 
> 标签：javascript, sqlite, select, styles

我有以下账单表

```
building      flatname   flatdescription   amount      pastpayments     receiptno
1234          name a     a                 123         0                0
1234          name a     a                 12          10               39
1234          name a     a                 125         125              40
1235          name a     a                 133         10               41
1235          name b     b                 125         125              50
1234          name c     c                 100         90               0 
```

我想使用建筑代码 1234 选择金额减去付款大于零的行，如果同名中的收据编号 > 0，则以样式 b 显示它们，如果同名中没有收据编号 > 0，则不显示样式

所以我的代码的结果必须如下

```
 name a     39    with style B
         name c     0 
```

我怎样才能做到这一点？

我使用以下代码，但我收到所有没有样式的选择

```
 t.executeSql('SELECT receiptno AS mr, flatdescription, flatname, buildingcode FROM bill WHERE amount - pastpayments> 0 AND buildingcode = ? GROUP BY buildingcode, flatname ORDER BY flatdescription DESC',[buildingcode], function(t, resultflat) {

            var i,
                len = resultflat.rows.length,
                row;

            if (len > 0 ) {
                items.push('<br>');
                for (i = 0; i < len; i += 1) {
                    row = resultflat.rows.item(i);

                    if (row.mr > 0) {

                        items.push('<li data-theme="b" data-icon="false" style="height:40px; padding: 7px 0 0 0; font-size: 1.2em"><a href="#displayflat" data-flat="' + row.flatname + '" data-description="' + row.flatdescription + '">' + row.flatdescription + '...' + row.flatname + '</a></li>');

                        } else {
                        items.push('<li data-icon="false" style="height:40px; padding: 7px 0 0 0; font-size: 1.2em"><a href="#displayflat" data-flat="' + row.flatname + '" data-description="' + row.flatdescription + '">' + row.flatdescription + '...' + row.flatname + '</a></li>');

                        }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:41:06.630

有`building=1234`和的组中有多条记录`flatname='name a'`。只是说`receiptno`会给你一些*随机*的这些记录的价值。

你可能想用它`MAX(receiptno)`来获得组中的最大值；`receiptno`如果组中有一个，这可以确保您得到一个非零值。

# javascript - Chai.js：对象包含/包含

> ID：15144952
> 
> 赞同：23
> 
> 时间：2013-02-28T20:21:57.863
> 
> 标签：javascript, arrays, object, tdd, chai

[柴](http://chaijs.com/api/bdd/)有`include`办法。我想测试一个对象是否包含另一个对象。例如：

```
var origin = {
  name: "John",
  otherObj: {
    title: "Example"
  }
} 
```

我想用 Chai 来测试这个对象是否包含以下内容（确实如此）

```
var match = {
  otherObj: {
    title: "Example"
  }
} 
```

这样做似乎不起作用：

```
origin.should.include(match) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-07-15T11:59:47.243

嘿，刚刚发布了 chai-subset。看看这个：[https](https://www.npmjs.org/package/chai-subset) ://www.npmjs.org/package/chai-subset 这应该适合你）

```
 var chai = require('chai');
 var chaiSubset = require('chai-subset');
 chai.use(chaiSubset);

 var obj = {
     a: 'b',
     c: 'd',
     e: {
         foo: 'bar',
         baz: {
             qux: 'quux'
         }
     }
 };

 expect(obj).to.containSubset({
     e: {
         foo: 'bar',
         baz: {
             qux: 'quux'
         }
     }
 }); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-28T20:42:54.887

> **include 和 contains 断言可以**用作基于属性的语言链，也可以用作断言在**数组**中包含对象**或**在字符串中包含子**字符串**的方法。当用作语言链时，它们会切换键断言的包含标志。[强调我的]

 ****因此，如果您在对象（不是数组或字符串）上调用包含，那么它仅用于切换键断言的包含标志。从您的示例看来，测试深度相等会更有意义，可能首先检查密钥。

```
origins.should.include.keys("otherObj");
origins.otherObj.should.deep.equal(match.otherObj); 
```

实际上，现在我浏览其他示例，您可能对此最满意：

```
origins.should.have.deep.property("otherObj", match.otherObj) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-01-11T21:04:54.073

例如，在 chai 4.2.0 中，您可以使用 deep include

chaijs 文档示例：

```
// Target array deeply (but not strictly) includes `{a: 1}`
expect([{a: 1}]).to.deep.include({a: 1});
expect([{a: 1}]).to.not.include({a: 1});

// Target object deeply (but not strictly) includes `x: {a: 1}`
expect({x: {a: 1}}).to.deep.include({x: {a: 1}});
expect({x: {a: 1}}).to.not.include({x: {a: 1}}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-13T03:54:49.777

如果您知道子对象的级别，您可以简单地使用：

```
expect(origin.otherObj).to.include(match.otherObj); 
```

[https://www.chaijs.com/api/bdd/](https://www.chaijs.com/api/bdd/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-04-20T10:39:42.953

在 Chai 1.5.0 你会发现方便的方法

```
includeDeepMembers 
```

[http://chaijs.com/releases/](http://chaijs.com/releases/)****

# apache - 未为包含查询词的文档返回 Solr 文档片段

> ID：15144954
> 
> 赞同：0
> 
> 时间：2013-02-28T20:22:00.907
> 
> 标签：apache, solr, code-snippets, highlighting

我正在使用 Solr 3.6.2 为我确定包含特定字符串的文档提取片段。（首先，这种用法正确吗？）不幸的是，**我得到的片段不包含我的查询字符串**（简单、单一、非停用词）。

例如，对于我知道包含“funmitflags”的文档 123456，我有一个类型的查询：

```
id:123456 and content_en:funmitflags 
```

和

```
fl=id&hl=true&hl.fl=content_en&hl.snippets=2&hl.alternateField=content_en&hl.maxAlternateFieldLength=400&hl.maxAnalyzedCharacters=2147483647&hl.fragsize=400&rows=100 
```

（我将“content_en”作为备用字段，以便从文档中获取任何片段。我通常在该字段中有大量文本。）但是，现在我通常会返回前 400 个字符，而不是那些包含我的“ funmitflags”一词。

无论如何，我可以从管理页面检索文档，只是不是一个适当的亮点。这很尴尬，因为我在大约 75% 的查询中遇到了这个问题。

在我的 schema.xml 中，我将“content_en”定义为“text_en”。

`<field name="content_en" type="text_en" indexed="true" stored="true" />`

我将“text_en”从原始定义更改为以下内容：

```
 <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" 
            generateWordParts="1" 
            generateNumberParts="1" 
            catenateWords="0" 
            catenateNumbers="0" 
            catenateAll="0" 
            splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.EnglishPossessiveFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.WordDelimiterFilterFactory" 
            generateWordParts="1" 
            generateNumberParts="1" 
            catenateWords="0" 
            catenateNumbers="0" 
            catenateAll="0" 
            splitOnCaseChange="1"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.EnglishPossessiveFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
</fieldType> 
```

重新索引后，在这两种情况下我都没有得到正确的片段。有人可以给我一个方向吗？我应该总是得到一个包含我的搜索**词**的片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:10:05.930

刚刚尝试突出显示使用您的分析器链`largetext_en`的类型字段。`text_en`突出显示效果很好，4 个片段包含搜索的单词`Polyana`，如下所示。（很难阅读下面字段的内容，所以复制粘贴到文本编辑器中查看。）

`http://localhost:8983/solr/collection1/select?q=id:mateva_highlight%20AND%20largetext_en:polyana&wt=json&fl=id,largetext_en&hl=true&hl.fl=largetext_en&hl.snippets=10&hl.alternateField=largetext_en&hl.maxAlternateFieldLength=400&hl.maxAnalyzedCharacters=2147483647&hl.fragsize=400&rows=100`

这是输出：

```
responseHeader: {
status: 0
QTime: 5
-params: {
hl.fragsize: "400"
fl: "id,largetext_en"
hl.snippets: "10"
hl.maxAlternateFieldLength: "400"
q: "id:mateva_highlight AND largetext_en:polyana"
hl.alternateField: "description"
hl.fl: "largetext_en"
wt: "json"
hl: "true"
-rows: [
"41"
"100"
]
hl.maxAnalyzedCharacters: "2147483647"
}
}
-response: {
numFound: 1
start: 0
-docs: [
-{
id: "mateva_highlight"
-largetext_en: [
"COUNT LEO NIKOLAYEVICH TOLSTOY was born August 28, 1828, at the family estate of Yasna- ya Polyana, in the province of Tula. His moth- er died when he was three and his father six years later. Placed in the care of his aunts, he passed many of his early years at Kazan, where, in 1844, after a preliminary training by French tutors, he entered the university. He cared lit- tle for the university and in 1847 withdrew be- cause of "ill-health and domestic circum- stances." He had, however, done a great deal of reading, of French, English, and Russian novels, the New Testament, Voltaire, and Hegel. The author exercising the greatest in- fluence upon him at this time was Rousseau; he read his complete works and for sometime wore about his neck a medallion of Rousseau. Immediately upon leaving the university, Tolstoy returned to his estate and, perhaps inr spired by his enthusiasm for Rousseau, pre- pared to devote himself to agriculture and to improving the condition of his serfs. His first attempt at social reform proved disappointing, and after six months he withdrew to Moscow and St. Petersburg, where he gave himself over to the irregular life characteristic of his class and time. In 1851, determined to "escape my debts and, more than anything else, my hab- its," he enlisted in the Army as a gentleman- volunteer, and went to the Caucasus. While at Tiflis, preparing for his examinations as a cadet, he wrote the first portion of the trilogy, Childhood, Boyhood, and Youth, in which he celebrated the happiness of "being with Na- ture, seeing her, communing with her." He al- so began The Cossacks with the intention of showing that culture is the enemy of happi- ness. Although continuing his army life, he gradually came to realize that "a military ca- reer is not for me, and the sooner I get out of it and devote myself entirely to literature the better." His Sevastopol Sketches (1855) were so successful that Czar Nicholas issued special orders that he should be removed from a post of danger. Returning to St. Petersburg, Tolstoy was re- ceived with great favor in both the official and literary circles of the capital. He soon became interested in the popular progressive move- ment of the time, and in 1857 he decided to go abroad and study the educational and munici- pal systems of other countries. That year, and again in 1860, he traveled in Europe. At Yas- naya Polyana in 1861 he liberated his serfs and opened a school, established on the principle that "everything which savours of compulsion is harmful." He started a magazine to promote his notions on education and at the same time served as an official arbitrator for grievances between the nobles and the recently emanci- pated serfs. By the end of 1863 he was so ex- hausted that he discontinued his activities and retired to the steppes to drink koumis for his health. Tolstoy had been contemplating marriage for some time, and in 1862 he married Sophie Behrs, sixteen years his junior, and the daugh- ter of a fashionable Moscow doctor. Their early married life at Yasnaya Polyana was tranquil. Family cares occupied the Countess, and in the course of her life she bore thirteen children, nine of whom survived infancy. Yet she also acted as a copyist for her husband, who after their marriage turned again to writ- ing. He was soon at work upon "a novel of the i8io's and *2o's" which absorbed all his time and effort. He went frequently to Mos- cow, "studying letters, diaries, and traditions" and "accumulated a whole library" of histori- cal material on the period. He interviewed survivors of the battles of that time and trav- eled to Borodino to draw up a map of the battleground. Finally, in 1869, after his work had undergone several changes in conception and he had "spent five years of uninterrupted andjgxceptionally strenuous labor Tnnierthe IbesfcondUtions of life/' he published War and Peace. Its appearance immediately established Tolstoy's reputation, and in the judgment of Turgenev, the acknowledged dean of Russian letters, gave him "first place among all our contemporary writers." The years immediately following the com- pletion of War and Peace were pa**efl in a great variety of occupations, none of which Tohtoy found satisfying. He tried busying VI BIOGRAPHICAL NOTE himself with the affairs of his estate, under- took the learning of Greek to read the ancient classics, turned again to education, wrote a series of elementary school books, and served as school inspector. With much urging from his wife and friends, he completed Anna Kare- nina, which appeared serially between 1875 and 1877\. Disturbed by what he considered his unreflective and prosperous existence, Tolstoy became increasingly interested in religion. At first he turned to the orthodox faith of the people. Unable to find rest there, he began a detailed examination of religions, and out of his reading, particularly of the Gospels, gradu- ally evolved his own personal doctrine. Following his conversion, Tolstoy adopted a new mode of life. He dressed like a peasant, devoted much of his time to manual work, learned shoemaking, and followed a vegetari- an diet. With the exception of his youngest daughter, Alexandra, Tolstoy's family re- mained hostile to his teaching. The breach be- tween him and his wife grew steadily wider. In 1879 he wrote the Kreutzer Sonata in which he attacked the normal state of marriage and extolled a life of celibacy and chastity. In 1881 he divided his estate among his heirs and, a few years later, despite the opposition of his wife, announced that he would forego royal- ties on all the works published after his con- version. Tolstoy made no attempt at first to propa- gate his religious teaching, although it attracted many followers. After a visit to the Moscow slums iri 1881, he became concerned with social conditions, and he subsequently aided the suf- ferers of the famine by sponsoring two hun- dred and fifty relief kitchens. After his meet- ing and intimacy with Chertkov, "Tolstoyism" began to develop as an organized sect. Tol- stoy's writings became almost exclusively pre- occupied with religious problems. In addition to numerous pamphlets and plays, he wrote IV hat is Art? (1896), in which he explained his new aesthetic theories, and Hadji-Murad, (1904), which became the favorite work of his old age. Although his activities were looked upon with increasing suspicion by the official authorities, Tolstoy escaped official censure until 1901, when he was excommunicated by the Orthodox Church. His followers were f re- quently subjected to persecution, and many were either banished or imprisoned. Tolstoy's last years were embittered by mounting hostility within his own household. Although his personal life was ascetic, he felt the ambiguity of his position as a preacher of poverty living on his great estate. Finally, at the age of eighty-two, with the aid of his daugh- ter, Alexandra, he fled from home. His health broke down a few days later, and he was re- moved from the train to the station-master's hut at Astopovo, where he died, November 7, 1910\. He was buried at Yasnaya Polyana, in the first public funeral to be held in Russia without religious rites. "
]
}
]
}
-highlighting: {
-mateva_highlight: {
-largetext_en: [
"COUNT LEO NIKOLAYEVICH TOLSTOY was born August 28, 1828, at the family estate of Yasna- ya <em>Polyana</em>, in the province of Tula. His moth- er died when he was three and his father six years later. Placed in the care of his aunts, he passed many of his early years at Kazan, where, in 1844, after a preliminary training by French tutors, he entered the university. He cared lit"
" and study the educational and munici- pal systems of other countries. That year, and again in 1860, he traveled in Europe. At Yas- naya <em>Polyana</em> in 1861 he liberated his serfs and opened a school, established on the principle that "everything which savours of compulsion is harmful." He started a magazine to promote his notions on education and at the same time served as an official"
" doctor. Their early married life at Yasnaya <em>Polyana</em> was tranquil. Family cares occupied the Countess, and in the course of her life she bore thirteen children, nine of whom survived infancy. Yet she also acted as a copyist for her husband, who after their marriage turned again to writ- ing. He was soon at work upon "a novel of the i8io's and *2o's" which absorbed all his time"
" position as a preacher of poverty living on his great estate. Finally, at the age of eighty-two, with the aid of his daugh- ter, Alexandra, he fled from home. His health broke down a few days later, and he was re- moved from the train to the station-master's hut at Astopovo, where he died, November 7, 1910\. He was buried at Yasnaya <em>Polyana</em>, in the first public funeral to be held"
]
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:15:39.020

感谢@arun 的实验截断了一半的可能性，我找到了解决方案。

*   由于我的文本很大，我在 solrconfig.xml 中设置

    `<maxFieldLength>1000000</maxFieldLength>`

*   为了提高我开始使用 fastVectorHighlighter 的速度：

    `solrQuery.set("hl.useFastVectorHighlighter", true);` 我的查询。似乎它禁用了我的 highligherSimplePre 和 highligherSimplePost，但谁在乎。

另外，我必须在我的内容字段中添加 term* 选项：

```
` <field name="content_en" type="text_en" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true" />` 
```

*   当然，执行了重新索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T20:30:51.953

Note that the query has `hl.maxAnalyzedCharacters=2147483647`, but this is the wrong parameter name -- what's wanted instead is `hl.maxAnalyzedChars`

# sql - 如何使用sql获取上个月的第一天和最后一天

> ID：15144964
> 
> 赞同：11
> 
> 时间：2013-02-28T20:22:43.207
> 
> 标签：sql, sql-server, tsql

我想得到上个月的第一天，比如 2013 年 1 月 1 日，我也想得到上个月的最后一天，比如 2013 年 1 月 31 日。如果我们在三月，那么我想做同样的事情，比如 02/01/2013 和 02/28/2013 等等......谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-28T20:29:53.053

这应该这样做：

```
--First day of last month
SELECT DATEADD(m,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE()), 0))
--Last day of last month
SELECT DATEADD(d,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE()),0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:47:15.967

这是我的解决方案

```
DECLARE @Today DATETIME
SELECT @Today = GETDATE()

  update  Test.dbo.DateTable
  set StartDate = (
SELECT convert (varchar, DATEADD(dd,-(DAY(DATEADD(mm,1,@Today))-1),DATEADD(mm,-1,@Today)),101))

update Test.dbo.DateTable
set EndDate = (
SELECT convert(varchar, DATEADD(dd, -DAY(DATEADD(m,1,@Today)), DATEADD(m,0,@Today)),101)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T10:08:28.377

**上个月的第一天**

```
convert (date,DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())-1, 0)) 
```

**上个月的最后一天**

```
convert (date,DATEADD(MONTH, DATEDIFF(MONTH, -1, GETDATE())-1, -1))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-01T19:08:23.013

以下代码适用于 SQL Server

```
SELECT CONVERT(VARCHAR(8), (DATEADD(mm, DATEDIFF(mm, 0, GETDATE()) - 1, 0)), 1) [First day] /*First date of previous month*/
    ,CONVERT(VARCHAR(8), (DATEADD(s, - 1, DATEADD(mm, DATEDIFF(m, 0, GETDATE()), 0))), 1) [Last day] /*Last date of previous month*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-29T02:16:56.917

1.  上个月的第一天和最后一天：

    ```
    DATEADD ( DAY , 1 , EOMONTH ( GETDATE ( ) , - 2 ) ) 
    EOMONTH ( GETDATE ( ) , - 1 ) 
    ```

2.  当月的第一天和最后一天：

    ```
    DATEADD ( DAY , 1 , EOMONTH ( GETDATE ( ) , - 1 ) )
    EOMONTH ( GETDATE ( ) , 0 ) 
    ```

3.  下个月的第一天和最后一天：

    ```
    DATEADD ( DAY , 1 , EOMONTH ( GETDATE ( ) , 0 ) )
    EOMONTH ( GETDATE ( ) , 1 ) 
    ```

4.  第 N 个月的第一天和最后一天：

    ```
    DATEADD ( DAY , 1 , EOMONTH ( GETDATE ( ) , N-1 ) )
    EOMONTH ( GETDATE ( ) , N ) 
    ```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-02T23:47:51.087

以下查询用于在我的旧 MySQL 中查找上个月的最后一天：

```
SELECT DATE_SUB(CURDATE(),INTERVAL Extract(DAY from now()) DAY); 
```

# maven - Maven 站点/项目信息报告插件生成空依赖报告

> ID：15144966
> 
> 赞同：1
> 
> 时间：2013-02-28T20:22:46.427
> 
> 标签：maven, maven-site-plugin

使用 maven-project-info-reports-plugin 生成的依赖项报告错误地报告了仅一个项目和零传递依赖项。但是，依赖性收敛报告会生成完整的依赖性列表。从命令行运行 project-info-reports:dependencies 目标时，未生成任何输出或 outputDirectory 参数未正常工作（在指定的 outputDirectory 中未生成报告文件）。有默认目录吗？我只能使用 mvn 站点插件生成报告。

我得到的唯一明显错误是一系列“工件：XXXX 没有文件”错误，如[MPIR-251](http://jira.codehaus.org/browse/MPIR-251)中所述，但我想知道这是否是一个红鲱鱼而不是问题的原因。想法？

配置：maven：3.0.3 maven-site-plugin：3.1 maven-project-info-reports-plugin：2.6 操作系统：Mac OS-X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:15:44.600

[正如使用](http://maven.apache.org/plugins/maven-project-info-reports-plugin/usage.html)页面中提到的那样

Maven 已配置为默认创建项目信息报告。无需在 pom.xml 中配置任何内容即可生成项目信息报告。

简单地运行

```
mvn site 
```

如果您不想执行该*站点，请将**maven-project-info-reports-plugin*复制到[build](http://maven.apache.org/pom.html#Build)中。请在[此处](https://stackoverflow.com/questions/15133822/cant-use-custom-ruleset-in-maven-pmd-plugin-5-0-2/15153145#15153145)查看我的答案中的详细信息。你可以执行

```
mvn project-info-reports:dependencies 
```

您可能会看到预期的结果。

我希望这可能会有所帮助。

问候，

查理·Ch。

# asp.net - 在报表服务器上使用 ADO.Net 数据集

> ID：15144967
> 
> 赞同：0
> 
> 时间：2013-02-28T20:22:50.147
> 
> 标签：asp.net, visual-studio, reporting-services

我有一个在本地模式下使用 SSRS 的 asp.net 应用程序。换句话说，它从数据库中检索数据并填充 ado.net 数据集，并在呈现之前将它们解析为报告 - 这是非常标准的做法。

由于报表查看器需要很长时间才能呈现我正在使用远程模式和报表服务器查看的报表。问题是我使用的数据需要在 C# 中进行额外处理，不能直接从数据库中检索。

有没有什么建议...

有没有办法检索数据，在 C# 中处理数据，然后将数据（在数据表中）发送到报表服务器以在报表中进行处理。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:17:30.907

我认为您不能将数据传递到远程报表服务器。（[这个微软官员同意我的看法](http://www.developmentnow.com/g/115_2007_2_0_0_938469/Pass-in-a-DataTable.htm)）。

我曾经遇到过类似的问题，并按照文章中的建议做了。（将处理后的数据传回数据库，可能使用 id，然后将这些数据加载到报告中。）

# unit-testing - 如何通过控制台对 UI 进行单元测试

> ID：15144975
> 
> 赞同：0
> 
> 时间：2013-02-28T20:23:17.230
> 
> 标签：unit-testing, browser, user-interface, web

我知道这已经被问过很多次了，但我想具体一点。我曾经使用硒。谷歌搜索后，我可以通过控制台运行它，它给了我一堆文本输出，但我宁愿不解析它，我想要一个通过/失败类型的东西

每隔一段时间，我喜欢在 UI 而不是代码上运行我的所有单元测试。我不想提交具有某些值的表单，我想看看我是否单击此 img 是否会弹出它旁边的下拉框，如果我选择一个名称，它将是我将在运行后提交的表单其他几件事。

我喜欢这个的原因是某些功能必须始终工作，所以我可以在每次修改这些功能的 UI 时调整单元测试。剩下的，检查业务逻辑的代码中的单元测试就足够了，因为这些 UI 总是在变化或者不是很重要。

如果某些东西可以启动 firefox 和 chrome（或 webkit），那就太好了，但这不是必需的。

就像我说的我想要通过/失败，某种易于解析的文本。复杂测试没问题，因为我知道正则表达式，但我不想弄清楚一个单元测试何时结束或开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:37:39.543

如果您使用的是 java/maven - 我为 selenium 编写了一个 maven 插件，它应该可以满足您的需求：

[https://github.com/willwarren/selenium-maven-plugin](https://github.com/willwarren/selenium-maven-plugin)。您在 firefox + selenium 中生成测试，然后将文件保存到 maven 项目的目录中。

如果您不使用 maven，则可以使用我构建的项目：

[http://code.google.com/p/selenium4j](http://code.google.com/p/selenium4j)

从自述文件：

我们使用 selenium IDE 来记录我们的测试。然后我们以下列方式将测试用例保存到我们的项目中：（注意：目前来自 selenium4j 的代码只支持一个级别，所以不要嵌套你的文件夹）

```
./src/test/selenium
    |-signin
        |-LoginGoodPassword.html
        |-LoginBadPassword.html
        |-selenium4j.properties 
```

我们没有保存测试套件，因为 maven 会负责查找您的测试。

selenium4j.properties 包含以下设置信息：

```
# the web site being tested
webSite=http://yourwebapp:8080

# A comma separated values of the WebDrivers being used. Accepted drivers: 
# HtmlUnitDriver, FirefoxDriver, ChromeDriver, InternetExplorerDriver
driver=FirefoxDriver

# How many times we want to iterate and test
loopCount=1 
```

绑定到 process-test-resources 阶段的 selenium maven 插件然后将这些 html 文件转换为 src/test/java 文件夹中的 junit 4 测试。

所以你最终得到：

```
./src/test/java
    |-signin
        |-firefox
            |-LoginGoodPasswordTest.java
            |-LoginBadPasswordTest.java 
```

# mysql - MySQL删除同一张表中的重复项

> ID：15144981
> 
> 赞同：0
> 
> 时间：2013-02-28T20:23:34.770
> 
> 标签：mysql, duplicates

我一直在努力解决这个问题，并在堆栈交换中查看了一些类似的情况，我读的越多，我就越困惑！我有一个包含以下内容的表：

```
id | zipcode | provider | channel
---------------------------------
1  | 91773   | 342      | 0
2  | 91773   | 2261     | 177
3  | 91773   | 5590     | 0
4  | 91773   | 5590     | 0
5  | 91773   | 5590     | 135
6  | 91773   | 5590     | 0
7  | 91773   | 6010     | 0
8  | 91773   | 6010     | 0 
```

我只想保留一条记录，如果频道除了 0 以外的任何内容，我们都会保留它。所以它应该返回这个：

```
id | zipcode | provider | channel
---------------------------------
1  | 91773   | 342      | 0
2  | 91773   | 2261     | 177
5  | 91773   | 5590     | 135
8  | 91773   | 6010     | 0 
```

我尝试了很多查询，但没有一个有效。提前致谢。

***编辑：*** 我已经尝试了一些给出的例子，但似乎没有一个给出正确的信息，一个更好的例子是使用这些，你可以看到为什么：插入独角兽值

```
(1, 91773, 342, 0),
(2, 91773, 2261, 177),
(3, 91773, 5590, 0),
(4, 91773, 5590, 0),
(5, 91773, 5590, 135),
(6, 91773, 5590, 0),
(7, 91773, 6010, 0),
(8, 91773, 6010, 0),
(9, 91776, 5590, 135),
(10, 91776, 5590, 0),
(11, 91776, 6010, 0),
(12, 91776, 6010, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:26:03.797

像这样的东西应该工作......

```
DELETE unicorns 
FROM   unicorns 
WHERE  id NOT IN (SELECT id 
                  FROM   (SELECT unicorns.provider, 
                                 Max(id) AS id 
                          FROM   unicorns 
                                 LEFT JOIN (SELECT provider, 
                                                   Max(channel) AS channel 
                                            FROM   unicorns 
                                            GROUP  BY provider) p 
                                        ON p.provider = unicorns.provider 
                                           AND p.channel = unicorns.channel 
                          WHERE  p.provider IS NOT NULL 
                          GROUP  BY unicorns.provider) p2) 
```

[查看演示](http://sqlfiddle.com/#!2/dbf4e/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:59:34.640

您可以使用自联接来执行此操作。如果您只是进行删除：

```
DELETE a
FROM foo a 
  JOIN foo b on (a.zipcode = b.zipcode AND a.provider = b.provider)
WHERE 
  a.channel < b.channel; 
```

如果您想在删除之前查看数据（将留下什么）：

```
SELECT * 
FROM foo
WHERE ID NOT IN (
 SELECT a.id
 FROM foo a 
   JOIN foo b on (a.zipcode = b.zipcode AND a.provider = b.provider)
 WHERE 
   a.channel < b.channel); 
```

[SQL Fiddle 演示](http://sqlfiddle.com/#!2/3b6a4/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:03:20.100

我认为你可以使用这样的东西：

```
delete from unicorns
where id not in (
  SELECT * FROM (
    SELECT MAX(id)
    FROM unicorns
    WHERE (provider, zipcode, channel) IN (
      SELECT provider, zipcode, max(channel) mx_channel
      FROM unicorns
      GROUP BY provider, zipcode
    )
    GROUP BY provider, zipcode) s) 
```

请[在此处](http://sqlfiddle.com/#!2/23d8e8/1)查看小提琴。

# python - 稀疏数据的 3D 数组与稀疏矩阵

> ID：15144982
> 
> 赞同：3
> 
> 时间：2013-02-28T20:23:37.660
> 
> 标签：python, arrays, data-structures, sparse-matrix

我正在构建一个简单的银河系模型，我需要存储的东西之一是质量密度的 3D 网格。

问题是如果我在星系周围放置一个矩形框，大部分网格单元都是空的。这让我节省了很多无用的零。所以朴素的数组似乎很浪费：

```
galaxy = [[[0 for k in xrange(1601)] for j in xrange(1601)] for i in xrange(253)]
# then fill in i,j,k values that are non-zero 
```

我尝试使用字典构建稀疏数组：

```
for x in range(1601):
    for y in range(1601):
        for z in range (253):
            galaxy[str(x) + "," + str(y) + "," + str(z)] = # whatever 
```

但是，（除了丑陋之外）我用于键的字符串占用的内存比我节省的要多。我得到`OutOfMemoryError`s 是因为（我计算出）键本身就占用了几场内存。

在某个时候，我会想要提高模型的分辨率，这意味着更大的网格。**有没有比使用 3D 浮点数组更有效的方法来存储我的值？**

我还担心遍历所有单元格（或仅是网格中的非零单元格）所花费的时间。这将非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:27:29.543

尝试使用字典方法，但只为值非零的键存储键：值对。更好的键可能是 (x,y,z) 的元组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:16:40.860

快速数学：`1601 * 1601 * 253 => 648489853 items`。测试表明字典在 32 位机器上每个条目大约需要 24 个字节，在 64 位机器上需要 49 个字节，因此是 15,563,756,472 字节（或 64 位上的 30GB）。其中 10% 是 1.5GB（或 64 位 3.0GB）。如果您有一个带有大量内存的 64 位系统，我认为您可以使用稀疏表示。

我建议：

1.  使用元组作为键，而不是字符串，并且
2.  使用不存储零值的稀疏存储系统。

这是一种可能性：

```
class SparseDict(dict):
  def __init__(self, default_value):
    dict.__init__(self)
    self._value = default_value
  def __getitem__(self, key):
    try:
      return dict.__getitem__(self, key)
    except KeyError:
      return self._value
  def __setitem__(self, key, val):
    # I'm sure this can go faster if I were smarter
    if val == self._value:
      if  key in self:
        del self[key]
    else:
      dict.__setitem__(self, key, val)

def test(galaxy):
  import sys
  print len(galaxy), sys.getsizeof(galaxy)

  # test is 1/10th size in each dimension,
  # so 1/1000th of the volume
  for x in range(160):
    for y in range(160):
      for z in range (25):
        import random
        # 90% of space is essentially a vacuum
        if random.random() < .1:
          galaxy[x,y,z] = 1502100
        else:
          galaxy[x,y,z] = 0

  print len(galaxy), sys.getsizeof(galaxy)

test(SparseDict(0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:36:36.403

也许尝试将您的数据保存在 sql 表中，并根据您的需要仅加载多维数据集的一个子集。这将花费您加载零件的时间，但会节省您的内存。至于内存表示，请使用其他答案中建议的方法，例如字典等...

# c# - 以编程方式在 IIS 上为自定义 Web 应用程序项目模板 vs2010 创建虚拟目录

> ID：15144985
> 
> 赞同：3
> 
> 时间：2013-02-28T20:23:53.750
> 
> 标签：c#, visual-studio-2010, templates, wizard, vs-extensibility

我正在研究 VS2010 中的多项目自定义解决方案结构。其中一个项目是 Web 应用程序。我有一个`Wizard`继承自 interface 的类`IWizard`。在 UI 表单中，用户将在解决方案模板中输入每个项目的名称。

当我加载多项目模板时，是否可以在 IIS 上为创建的 Web 应用程序创建一个虚拟目录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:35:32.297

这是一个很好的示例，说明如何将 Microsoft.Web.Administration 用于这些目的。

[http://blogs.msdn.com/b/carlosag/archive/2006/04/17/microsoftwebadministration.aspx](http://blogs.msdn.com/b/carlosag/archive/2006/04/17/microsoftwebadministration.aspx)

# java - 尺度不变模板匹配

> ID：15144986
> 
> 赞同：1
> 
> 时间：2013-02-28T20:23:54.983
> 
> 标签：java, image-processing, pattern-matching, computer-vision, image-recognition

我正在尝试解决模板匹配的问题，其中我们得到了一个模式图像，我必须找出该图像是否作为图像内部的子图像存在，即源/搜索图像。

我已经实现了[SAD](http://en.wikipedia.org/wiki/Sum_of_absolute_differences) [使用 JAVA 在维基百科中使用 JAVA 给出的绝对差异解决方案总和]。现在，我想为给定的问题实现一个尺度不变的[模板匹配](http://en.wikipedia.org/wiki/Template_matching)解决方案。

在我不在乎为图案图像提供哪个比例的地方，如果在某个比例上有匹配，那么它应该报告它。

到目前为止我尝试过的事情： 1\. 我见过 SIFT，但实现起来太复杂了。

1.  此外，[TinEye](http://www.tineye.com/faq#how)使用的图像指纹识别并不那么有效，因为它在查找相似图像时很有用，而不是子图像。

2.  我不能使用我之前使用的详尽方法，因为可能有很多比例可以匹配。

3.  自定义方法：将图像分类为几个颜色组，例如 255 种颜色，但我不确定这会有助于解决规模变化问题。我看到了一些问题，但它们是旋转和尺度不变的，我只需要尺度变化。

这是我目前正在研究的学期项目之一。有人可以指导我了解我可以采取的可能的解决方案和方法吗？

# sql-server - sspi 用户的最佳实践

> ID：15144987
> 
> 赞同：2
> 
> 时间：2013-02-28T20:23:57.167
> 
> 标签：sql-server, iis-7, asp.net-mvc-4, windows-server-2008-r2, sspi

我目前正在为 3 个 mvc web 应用程序设置 web 和 sql windows 服务器。我已经设置了一个 sspi 域用户，但不熟悉正确和最优化的设置。

是否所有应用程序池都与该用户一起设置？sql server 上的所有数据库是否都获得该用户的读/写权限？

我正在寻找与 sspi 用户合作时的最佳实践。

# mysql - 根据一个字段从表中选择数据的语句

> ID：15144995
> 
> 赞同：3
> 
> 时间：2013-02-28T20:24:31.080
> 
> 标签：mysql, sql, join, if-statement

有一个 sql 语句从这个[sqlfiddle返回有价值的信息](http://sqlfiddle.com/#!2/de457/3)

```
CREATE TABLE `civil`(
      civil_id      INTEGER  NOT NULL PRIMARY KEY,
      name          VARCHAR(25)  ,
      address_civil VARCHAR(40)  NOT NULL ,
      telephone     VARCHAR(20 ) NOT NULL ,
      email         VARCHAR(30)  NOT NULL ,
      comment       VARCHAR(35 )  NOT NULL ,
      CONSTRAINT `uc_Info_civil` UNIQUE (`civil_id`)           
);

CREATE TABLE `worker`(
      worker_id      INTEGER  NOT NULL PRIMARY KEY,
      name           VARCHAR(25)  ,
      address_worker VARCHAR(40)  NOT NULL ,
      departament    VARCHAR(40)  NOT NULL ,
      age            INTEGER  NOT NULL ,      
      CONSTRAINT `uc_Info_civil` UNIQUE (`worker_id`)           
);

CREATE TABLE `event`(
      id_event      INTEGER  NOT NULL PRIMARY KEY,
      type_event    VARCHAR(25)  ,
      personID        INT  NOT NULL ,
      date          DATE NOT NULL ,   
      isWorker INT NOT NULL,
      CONSTRAINT `uc_Info_event` UNIQUE (`id_event`)           
);

ALTER TABLE `event` ADD INDEX (personID);

INSERT INTO `civil` VALUES (  1, 'JOE','SOME ADDRESS', '5646464','joe@gms.com','no comment' );
INSERT INTO `civil` VALUES (  2, 'MOE','SOME ADDRESS', '6776543','froe@ges.com','no comment' );

INSERT INTO `worker` VALUES (  1, 'MARGE','STATES W54', 'finances',34);
INSERT INTO `worker` VALUES (  2, 'SASHA','LIVER S 34', 'sells',23 );

INSERT INTO `event` VALUES (1,"type1", 1, '12-12-12',1); 
```

正在做

```
SELECT  a.*,
        IF(a.Isworker = 1,c.name, b.name) AS personname
FROM    event a
        LEFT JOIN civil b
            ON a.personid = b.civil_id
        LEFT JOIN worker c
            ON a.personid = c.worker_ID 
```

返回

```
ID_EVENT TYPE_EVENT PERSONID DATE                   ISWORKER PERSONNAME
-----------------------------------------------------------------------------
1   type1   1   December, 12 2012 00:00:00+0000        1    MARGE 
```

如何根据字段 isworker 获取 Civil 和 worker 表的所有数据（不仅仅是名称）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:40:31.777

我可能会建议重新构建/更好地规范您的表......但只要使用您所拥有的，一种选择是将您的 isworker 检查添加到 join 语句中。除此之外，您必须在平民和工人之间找到可比较的字段，以便在`IF()`您用于 personname 的语句中相互抵消。

```
SELECT  *
FROM    event a
        LEFT JOIN civil b
            ON a.personid = b.civil_id
            AND a.Isworker != 1
        LEFT JOIN worker c
            ON a.personid = c.worker_ID
            AND a.Isworker = 1 
```

# vsto - 是否可以为 Publisher 2010 和 Access 2010 编写 VSTO 插件？

> ID：15144996
> 
> 赞同：0
> 
> 时间：2013-02-28T20:24:31.037
> 
> 标签：vsto, publisher

我已经为 Word 2010 和 Excel 2010 编写了几个 VSTO 插件。我希望能够为 Publisher 和 Access 做同样的事情，但 Visual Studio 2010 中没有用于这些的项目模板。我试过谷歌并没有找到任何相关的东西。可能吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:42:25.723

发布者或访问没有丰富的对象模型，但只需在链接下方添加功能区可能会有所帮助

[http://blogs.msdn.com/b/andreww/archive/2008/02/19/vsto-add-ins-for-access.aspx](http://blogs.msdn.com/b/andreww/archive/2008/02/19/vsto-add-ins-for-access.aspx)

# r - 在 R 中使用对数刻度上的 stat_function 绘图

> ID：15144998
> 
> 赞同：3
> 
> 时间：2013-02-28T20:24:42.043
> 
> 标签：r, ggplot2

我在尝试使用`stat_function`R's时遇到了严重的问题`ggplot2`。我从这个简单的例子开始：

```
ggplot(data.frame(x = c(1, 1e4)), aes(x)) + stat_function(fun = function(x) x) 
```

按预期工作。不幸的是，当我为 x 和 y 轴添加对数刻度时：

```
ggplot(data.frame(x = 1:1e4), aes(x)) +
  scale_x_log10() + 
  scale_y_log10() +
  stat_function(fun = function(x) x) 
```

我得到以下结果，这是对身份函数的严重违反。 ![在此处输入图像描述](../Images/fe2c657e24b5da836675b5628528b11e.png)

我缺少一些非常基本的东西吗？那么在对数刻度上绘制函数的正确且最简单的方法是什么？

**编辑：** 受答案的启发，我继续尝试了尺度和`aesthetics`参数。我更加困惑地发现我使用下面的代码得到了我所期望的：

```
ggplot(data.frame(x = 1:1e4, y = 1:1e4), aes(x, y)) +
  scale_x_log10() + 
  scale_y_log10() +
  stat_function(fun = function(x) x) 
```

具有明显未使用的 y 值向量（`stat_function`即未使用）。轴转换是否取决于数据的可用性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:46:36.490

在 ggplot2 中，规则是比例变换先于统计变换，而统计变换又先于坐标变换。在这种情况下，函数（通过 stat_function()）是统计转换。

如果您在 ggplot2 调用中使用 scale_x/y_*() 函数，它将在计算函数之前先应用比例变换。

案例 0：以 x 和 y 的原始比例绘制。

```
ggplot(data.frame(x = 1:1e4, y = 1:1e4), aes(x, y)) +
    stat_function(fun = function(x) x) 
```

案例 1a：由于 scale_x/y_log10() 的存在，x 和 y 在计算函数之前都进行了对数转换。您可以从它们各自刻度上的值中看到这一点（与案例 0 相比）。

```
ggplot(data.frame(x = 1:1e4, y = 1:1e4), aes(x, y)) +
    stat_function(fun = function(x) x) +
    scale_x_log10() +
    scale_y_log10() 
```

情况 1b：x 在原始数据帧中进行了对数转换。因此，该函数实际上在 log10(x) 值上运行，因此仍将是一条直线，但在 x 和 y 的 log10 尺度上。

```
ggplot(data.frame(x = log10(seq(1e4)), y = seq(1e4)), aes(x, y)) +
    stat_function(fun = function(x) x) 
```

案例 1c：同 1b，除了一个例外：x 尺度是原始单位，而 y 尺度是 log10(x) 单位，因为 x 上的尺度变换发生在统计变换 f(y) =计算 y，其中 y = log10(x)。

```
ggplot(data.frame(x = seq(1e4), y = seq(1e4)), aes(x, y)) +
    stat_function(fun = function(x) x) +
    scale_x_log10() 
```

案例2：相比之下，坐标变换发生*在*统计变换之后；即，首先以原始单位计算函数，然后在 x 上进行坐标变换，这会扭曲函数：

```
ggplot(data.frame(x = seq(1e4), y = seq(1e4)), aes(x, y)) +
    stat_function(fun = function(x) x) +
    coord_trans(xtrans = "log10") 
```

...当然，除非您对 x 和 y 应用相同的转换：

```
ggplot(data.frame(x = seq(1e4), y = seq(1e4)), aes(x, y)) +
    stat_function(fun = function(x) x) +
    coord_trans(xtrans = "log10", ytrans = "log10") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T20:41:42.183

当您使用`scale_x_log10()`then时，值`x`会被对数转换，然后才用于计算. 然后将值反向转换为原始值以进行缩放。值保持为从 log 转换计算。您可以通过绘制不带. 在情节中有直线。`y``stat_function()``x``y``x``scale_y_log10()`

```
ggplot(data.frame(x=1:1e4), aes(x)) +
    stat_function(fun = function(x) x) +
    scale_x_log10() 
```

如果应用`scale_y_log10()`对数变换已经计算`y`的值，则绘制曲线。