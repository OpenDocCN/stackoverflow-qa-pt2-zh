# StackOverflow 问答 13520000-13520999

# c++ - 是否为类的每个实例实例化了私有类变量？

> ID：13520002
> 
> 赞同：0
> 
> 时间：2012-11-22T21:08:16.517
> 
> 标签：c++

当我在一个类中定义一个变量时，每次我声明这个类的一个实例时，它都会在内存中为特定实例创建该变量的一个新副本。我理解这一点，但这是否适用于所有成员变量都是私有的？例如：

```
class A {
    int a, b, c;
};

A a; 
```

`a`当我创建一个新实例时，即使它们不能在类外使用，这些私有变量是否仍然被分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:11:38.280

不，内存分配是一个实现细节。考虑代码：

```
class A {
    int a, b, c;
};

int main()
{
   A a;
} 
```

可能不会有任何内存分配，因为 C++ 在模拟模型上运行。意思是，如果输出与预期的相同，编译器可以自由地做任何事情。包括优化死代码。

但是，通常情况下，是的，您可以假设为对象的所有成员分配了空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:24:20.027

您认为私有变量“不能在类外使用”的假设是不正确的。声明一个成员`private`只是意味着它不能*直接从类外部通过名称引用*（当然，除了类朋友之外）。“不能使用”是一个更强有力的断言，这恰好是不真实的。

如果“外部世界”以某种方式获得了访问该私有成员的替代方式，它可以不受任何限制地做到这一点。例如，您的类可能实现一个公共访问成员函数，该函数返回绑定到私有成员的引用（或指针）。这将使该特定成员可以从外部间接访问。

实际上，除了在*成员名称*级别起作用的纯概念编译时访问限制之外，类的公共成员和私有成员之间绝对没有区别。它是在编译器级别实现的非常薄的保护层。它背后没有任何物理上的东西，即类的数据成员之间没有物理差异，无论它们的保护级别如何。

# asp.net-mvc - 如何在复杂的向导中为下一步/上一步构建代码？

> ID：13520006
> 
> 赞同：4
> 
> 时间：2012-11-22T21:08:21.017
> 
> 标签：asp.net-mvc, wizard

我有一个 45 步向导 UI（复杂域 - 保险）。它是在 ASP.NET MVC 3 中实现的。问题是我的操作方法有很多代码来确定下一步是什么，这取决于用户、已经收集的数据、天气预报......更糟糕的是，类似的代码被重复后退按钮功能。有没有我可以用来抽象这个逻辑的模式？我希望有一种方法来定义前进步骤并自动获得后退步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:50:03.003

我的建议是创建一个接口类，如：

```
public interface IStepDecisionMaker
{
     StepInfo DefineNextPreviousStep(object data);
}

public class StepInfo {
    public int NextStepId {get;set;}
    public int PreviousStepId {get;set;}
    public object Values {get;set;}
} 
```

您现在可以在 DB 或 XML 中添加一个表，在其中设置所有可用的步骤，并为每个步骤分配一个具体的类来实现接口 IStepDecisionMaker

在您的操作中，您可以收集步骤的数据，并使用 IoC 系统或反射 CreateInstance，您可以创建具体类的实例，调用 DefineNextPreviousStep 传递您需要检查的数据，该方法可以返回一个会告诉您的类你接下来或之前的步骤是什么

通过这种方式，您可以实现几件事

1.  您的操作将只有几行代码
2.  逻辑不是大量的 if then 而是在每个类中
3.  您可以直接在特定步骤的具体类中更改某些条件，而无需触及代码的其他部分

恕我直言

# matlab - 如何在矩阵/excel电子表格中添加任意行的零？(Matlab)

> ID：13520007
> 
> 赞同：1
> 
> 时间：2012-11-22T21:08:27.880
> 
> 标签：matlab, add, rows

我有一个包含 3 列和 212 行数据的 XLS 文件。有没有办法在中间插入 3 列零，中间有 x 行，所以总共有 365 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:11:27.663

您可以执行此操作的另一种方法是通过 excel activex 控件。

以下假设您有一个 excel 传播 c:\temp\zeros.xlsx。

它从第 3 行开始插入 5 行，每行有 3 列零。

显然，您可以调整分配给 insertRow 和 insertRowCount 的值以满足您的特定要求。

或者，您可以改用复制/插入，但这应该足够好了。

```
% Create Excel ActiveX control (and therefore application) and make it visible
excel = actxserver('Excel.Application');
excel.visible = 1;

% Open the the spreadsheet
workbook = excel.Workbooks.Open('c:\temp\zeros.xlsx');
sheet = workbook.ActiveSheet;

% Insert rows

insertRow = 3;    
insertRowCount = 5;
range = get(sheet,'Range', sprintf('A%d:C%d', insertRow, insertRow ) );
for r=1:insertRowCount
    range.Insert()
end

% Set cell values on inserted rows
cellValue = 0;

for r=1:insertRowCount
    for c=1:3
        set(get(sheet,'Cells',r+insertRow-1,c),'Value',cellValue);     
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:37:25.650

好的，是的，所以一个简单的方法是转到需要 0 出现的第一行。

在每个单元格中键入“0”。然后选择*所有*三个单元格，右键单击并按住它，同时向下移动鼠标以获得 152 行。

我来张图

![在此处输入图像描述](../Images/62f1077d5bab68c25e330549a6db6b73.png)

[全图](https://i.imgur.com/wMCH9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:41:45.260

如果可能的话，我是一个 Linux 人，所以我的 Microsoft 技能有点欠缺，也就是说，可能有比这更好的方法来解决问题，但以下应该可行：

```
%# Set parameters
FN = 'YourExcelWorkbookPath.xlsx';
r = 3; %#Row to start inserting zeros
n = 2; %#Number of rows of zeros to insert

%# Import the excel data
[~, ~, Raw] = xlsread(FN);

%# Insert the zeros
RawOut = [Raw(1:r-1, :); num2cell(zeros(n, 3)); Raw(r:end, :)];

%# Write the output back to excel workbook
xlswrite(FN, RawOut); 
```

对不起，我在上班，所以没时间做长篇大论。本质上，我将工作簿读入matlab中的单元格数组，在中间插入一个零单元格数组，然后将整个内容写回工作簿。不优雅，但它在测试工作簿上对我有用。

**编辑：**当然，如果您的工作簿包含除 3 列数据之外的许多其他信息，则您需要使用这种方法来破解以使插入发生在正确的位置。因此，我会采用@grantnz (+1) 建议的 ActiveX 方法。更多的微软-y。

# javascript - Contentflow 自动调整大小问题

> ID：13520008
> 
> 赞同：0
> 
> 时间：2012-11-22T21:08:28.550
> 
> 标签：javascript, contentflow

我正在使用这个 javascript 插件：http: [//jacksasylum.eu/ContentFlow/](http://jacksasylum.eu/ContentFlow/)

好吧，我是js编程的初学者，我遇到了这个问题：

当我调整浏览器窗口的大小时，图像也会缩小。但我不知道如何关闭调整大小功能。我试图评论许多具有 .resize 或其他内容的代码行，但它不起作用。我在谷歌上搜索但没有成功，我希望有人可以在这里帮助我：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:35:22.863

您是否尝试使用固定宽度设置类项目的样式，因为我认为这是问题所在。

正如我所看到的，每个 div 都使用了类项，并且所有内容都设置为 % 宽度。

```
.item{
 width:200px;
} 
```

请注意，我放了 200px 但选择你想要的大小。

# android - Android CalendarView 在单元格上显示图标或文本

> ID：13520014
> 
> 赞同：4
> 
> 时间：2012-11-22T21:08:44.240
> 
> 标签：android, calendar, calendarview

我一直在尝试使用 Android CalendarView 并在其可视单元格图标甚至文本上显示代表我的应用程序想要向用户显示的事件，但没有成功，即使在网络上进行谷歌搜索也是如此。

所以，我的问题是：有没有人能够使用 Android SDK 上的 Android CalendarView 做到这一点？

# dns - 多个站点核心实例托管在一个域上

> ID：13520017
> 
> 赞同：2
> 
> 时间：2012-11-22T21:09:11.063
> 
> 标签：dns, sitecore, instance

我想安装多个 Sitecore 实例以托管在一个域下。所以第一个实例的根 url 将是[http://example.com/instance-1](http://example.com/instance-1)等等。我想要多个实例的原因是，我想为每个站点拆分环境。我知道我可以使用绑定并将每个实例发布到同一域内的其他端口上。我也知道我可以在一个实例下安装多个站点。但是我没有找到如何在 IIS 站点子目录中安装实例的解决方案。
如果有人成功将多个实例安装为子应用程序或虚拟目录，请分享知识。

我正在使用 Sitecore 6.5 和 IIS 7.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:25:45.083

Sitecore 不支持在虚拟目录中运行。它必须在自己的网站上运行。

但是，我确实想出了一个技巧，但它非常先进，我没有明确的例子：

*   设置一个站点，该站点将成为您的主域，并带有子文件夹（例如 `www.mydomain.com/site-a`，`www.mydomain.com/site-b`
*   将单独的 Sitecore 实例设置为单独的 IIS 网站
*   为每个站点提供自己的主机名并将其添加到您的主机文件中（这样您就可以得到`http://site-a`,`http://site-b`等）
*   安装 IIS URL 重写功能，确保允许重写 HTTP_HOST 服务器变量
*   在您的主站点上配置重写，以便将`http://www.mydomain.com/site-a/*`其重写为`http://site-a/*`
*   创建一个自定义链接提供程序，确保使用正确的域和文件夹编写 Sitecore 链接（所以`http://site-a/item`写为`http://www.mydomain.com/site-a/item`）

我确信这是可能的，因为如果站点为“虚拟”文件夹，我已经为托管克隆的站点实施了类似的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:35:11.213

我想知道为什么您需要在同一个域上托管多个 Sitecore 实例。Sitecore 为同一实例中的多站点设置提供了良好的解决方案。如果 Ruud 提供的解决方案不适合您，请查看 Tim Ward 的多站点解决方案 ( [https://github.com/jerrong/Sitecore-Multisite-Manager](https://github.com/jerrong/Sitecore-Multisite-Manager) ) 或 Sitecore Marketplace 上的共享源模块 ( [http:// market.sitecore.net/en/Modules/Multiple_Sites_Manager.aspx](http://marketplace.sitecore.net/en/Modules/Multiple_Sites_Manager.aspx)）

# extjs4.1 - ExtJS 4：使用代理加载的数据存储显示 0 长度

> ID：13520021
> 
> 赞同：0
> 
> 时间：2012-11-22T21:09:29.567
> 
> 标签：extjs4.1

我有 2 家商店，使用数据加载的“选定商店”和使用代理加载的其他“所有商店”。我想从“所有商店”中删除“选定商店”中已经存在的内容。我正在使用 store.remove 方法来实现这一点。当我在“所有商店”中使用内联数据进行测试时，它工作正常，但当我切换到 Ajax 代理时，它不再工作了。但是，数据将继续正确显示在此存储所附加到的网格中。我使用console.log 来查看'selected store'.data 和'all store'.data。我注意到“所有商店”有项目，键和长度设置为零。当我在 Chrome 控制台中展开节点时，我确实看到了填充的详细信息。见附件（第二个条目；第一个是“选定商店” - 使用数据加载）。

![截屏](../Images/34aa0130f815a484a1307d03a2329b90.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:50:16.043

在网上做了一些研究后发现了问题和解决方案。在加载商店之前，代码正在运行。必须将 remove() 的代码放在“加载”事件的回调中。找到解决方案@http [://www.sencha.com/forum/showthread.php?167381](http://www.sencha.com/forum/showthread.php?167381)

# python - 根据python中的值从字典中检索键

> ID：13520025
> 
> 赞同：0
> 
> 时间：2012-11-22T21:09:46.277
> 
> 标签：python, list, dictionary

我试图在python中找到最有效的方法来创建'guids'字典（犀牛中的点id）并根据我分配的值检索它们，更改该值并将它们恢复回来在字典里。一个问题是，对于 Rhinoceros3d 程序，这些点有一个随机生成的 ID 号，我不知道，所以我只能根据我给它们的值来调用它们。

字典是正确的方法吗？指南应该是值而不是键吗？

一个非常基本的例子：

```
arrPts=[]
arrPts = rs.GetPoints()  # ---> creates a list of point-ids

ptsDict = {}
for ind, pt in enumerate(arrPts):
    ptsDict[pt] = ('A'+str(ind))

for i in ptsDict.values():
    if '1' in i :
        print ptsDict.keys() 
```

如何使上面的代码打印具有值 '1' 的键，而不是所有键？然后将键的值从 1 更改为例如 2 ？

如果知道我的方向正确，我们将不胜感激有关一般问题的任何帮助。

谢谢

帕夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:12:48.723

您可以使用`dict.items()`.

一个例子：

```
In [1]: dic={'a':1,'b':5,'c':1,'d':3,'e':1}

In [2]: for x,y in dic.items():
   ...:     if y==1:
   ...:         print x
   ...:         dic[x]=2
   ...:         
a
c
e

In [3]: dic
Out[3]: {'a': 2, 'b': 5, 'c': 2, 'd': 3, 'e': 2} 
```

`dict.items()`在 python 2.x 中返回包含键和值对的元组列表：

```
In [4]: dic.items()
Out[4]: [('a', 2), ('c', 2), ('b', 5), ('e', 2), ('d', 3)] 
```

在 python 3.x 中，它返回一个可迭代的视图而不是列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:33:33.707

我*认为*您希望 GUID 是值，而不是键，因为看起来您想通过分配的内容来查找它们。...但这实际上取决于您的用例。

```
# list of GUID's / Rhinoceros3d point ids
arrPts = ['D20EA4E1-3957-11d2-A40B-0C5020524153', 
          '1D2680C9-0E2A-469d-B787-065558BC7D43', 
          'ED7BA470-8E54-465E-825C-99712043E01C']

# reference each of these by a unique key
ptsDict = dict((i, value) for i, value in enumerate(arrPts))
# now `ptsDict` looks like: {0:'D20EA4E1-3957-11d2-A40B-0C5020524153', ...}

print(ptsDict[1]) # easy to "find" the one you want to print 

# basically make both keys: `2`, and `1` point to the same guid 
# Note: we've just "lost" the previous guid that the `2` key was pointing to
ptsDict[2] = ptsDict[1] 
```

**编辑：**

如果您要使用元组作为 dict 的键，它看起来像：

```
ptsDict = {(loc, dist, attr3, attr4): 'D20EA4E1-3957-11d2-A40B-0C5020524153',
           (loc2, dist2, attr3, attr4): '1D2680C9-0E2A-469d-B787-065558BC7D43',
           ...
          } 
```

如您所知，元组是不可变的，因此您不能`change`指定 dict 的键，但您可以删除一个键并插入另一个键：

```
oldval = ptsDict.pop((loc2, dist2, attr3, attr4))  # remove old key and get value
ptsDict[(locx, disty, attr3, attr4)] = oldval  # insert it back in with a new key 
```

为了使一个关键点指向多个值，您必须使用列表或集合来包含 guid：

```
{(loc, dist, attr3, attr4): ['D20E...', '1D2680...']} 
```

# c - 指针相关查询

> ID：13520026
> 
> 赞同：0
> 
> 时间：2012-11-22T21:09:51.343
> 
> 标签：c, pointers

伙计们，我对指针的查询很少。请帮助解决它们

```
char a[]="this is an array of characters"; // declaration type 1 
char *b="this is an array of characters";//  declaration type 2 
```

question.1：这两种声明有什么区别？

```
 printf("%s",*b); // gives a segmentation fault
    printf("%s",b); // displays the string 
```

question.2：我不明白它是如何工作的

```
 char *d=malloc(sizeof(char)); // 1)
    scanf("%s",d); // 2)
    printf("%s",d);// 3) 
```

question.3 有多少字节被分配给指针c？当我尝试输入一个字符串时，它只需要一个单词而不是整个字符串。为什么这样 ？

```
 char c=malloc(sizeof(char)); // 4)
    scanf("%c",c); // 5)
    printf("%c",c);// 6) 
```

question.4 当我尝试输入一个字符时，为什么会引发分段错误？

在此先感谢..等待您的回复。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:19:49.683

```
printf("%s",*b); // gives a segmentation fault
printf("%s",b); // displays the string 
```

%s 需要一个指向字符数组的指针。

```
char *c=malloc(sizeof(char)); // you are allocating only 1 byte aka char, not array of char!
scanf("%s",c); // you need pass a pointer to array, not a pointer to char
printf("%s",c);// you are printing a array of chars, but you are sending a char 
```

你需要这样做：

```
int sizeofstring = 200; // max size of buffer
char *c = malloc(sizeof(char))*sizeofstring; //almost equals to declare char c[200]
scanf("%s",c);
printf("%s",c); 
```

> question.3 有多少字节被分配给指针c？当我尝试输入一个字符串时，它只需要一个单词而不是整个字符串。为什么这样 ？

在您的代码中，您只分配 1 个字节，因为 sizeof(char) = 1byte = 8bit，您需要分配 sizeof(char)*N，N 是您的“字符串”大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:18:51.433

我在您的代码中看到了几个问题。

问题1：区别在于：

*   `a`被分配到可写内存中，即所谓的`data`段。在这里，您可以随心所欲地阅读和写作。`sizeof a`是字符串的长度加1，即所谓的字符串终止符（只是一个空字节）。
*   `b`然而，它只是一个指向位于`rodata`. 这意味着，在只读的数据区域中。`sizeof b`是您系统上的指针大小，在 PC 上可能是 4 或 8，在许多嵌入式系统上可能是 2。

问题2：`printf()`格式需要一个指向字符串的指针。使用`*b`，您取消引用您拥有的指针并为其提供第一个数据字节，即 a `t`（ASCII 84 或类似的东西）。然而，被调用者将其视为指针，取消引用它和 BAM。

但是，使用`b`，一切都很好，因为这正是正确的选择。

问题3：`malloc(sizeof(char))`正好分配一个字节。`sizeof(char)`是`1`根据定义，所以调用是有效的`malloc(1)`。输入只需要一个词，因为`%s`是这样定义的。

问题4：

```
char c=malloc(sizeof(char)); // 4) 
```

shound 给你一个警告：`malloc()`返回一个你试图放入`char`. 伊蒂姆`char *`...

随着您的继续，您将指针指向`scanf()`，它接收例如而不是`0x80043214`仅仅接收`0x14`，将其解释为指针并再次 BAM。

正确的方法是

```
char * c=malloc(1024);
scanf("%1024s", c);
printf("%s", c); 
```

为什么？好吧，你想读取一个字符串。1 字节太小，最好多分配。

在`scanf()`你应该注意你不允许读取超过你的缓冲区可以容纳的 - 因此格式说明符的限制。

在打印时，您应该使用`%s`，因为您希望打印整个字符串而不仅仅是第一个字符。（至少，我想是的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T22:26:46.170

```
char a[]="this is an array of characters"; // declaration type 1 
char *b="this is an array of characters";//  declaration type 2 
```

在这里，您要声明两个变量，`a`和`b`，并初始化它们。`"this is an array of characters"`是一个字符串文字，在 C 中它的类型为 char 数组。`a`具有 char 类型数组。在这种特定情况下，数组不会转换为指针，而是`a`使用数组进行初始化`"this is an array of characters"`。`b`具有指向 char 的类型指针，数组被转换为指针，并`b`使用指向数组的指针进行初始化`"this is an array of characters"`。

```
printf("%s",*b); // gives a segmentation fault
printf("%s",b); // displays the string 
```

在表达式中，`*b`取消引用指针`b`，因此它计算为 所指向的字符`b`，即：`T`。这不是一个地址（这是“%s”所期望的），所以你会得到未定义的行为，很可能是崩溃（但不要尝试在嵌入式系统上这样做，你可能会得到神秘的行为和损坏的数据，这比崩溃更糟糕）。在第二种情况下，`%s`需要一个指向 char 的指针，得到它，然后可以继续做它的事情。

```
char *d=malloc(sizeof(char)); // 1)
scanf("%s",d); // 2)
printf("%s",d);// 3) 
```

在 C 中，`sizeof`以字节为单位返回对象的大小（= 存储区域）。在 C 中，一个 char 被定义为与一个字节相同，它至少有 8 位，但可以有更多（但一些标准提出了额外的限制，例如：POSIX 需要 8 位字节，即：八位字节）。因此，您分配了 1 个字节。当你调用 时`scanf()`，它会毫无顾忌地写入 指向的内存`d`，覆盖所有视线。`scanf()`允许最大字段宽度，因此：

*   分配更多内存，至少足以满足您的需求 + 1 终止 ASCII NUL。
*   告诉`scanf()`停止，例如：`scanf("%19s")`最多 19 个字符（您需要 20 个字节来存储它，计算终止的 ASCII NUL）。

最后（如果*降价*让我）：

```
char c=malloc(sizeof(char)); // 4)
scanf("%c",c); // 5)
printf("%c",c);// 6) 
```

`c`不是指针，因此您试图将地址存储在不应该的位置。In `scanf`,`"%c"`需要一个指向 char 的指针，它应该指向一个对象（=存储区域），该对象具有足够的空间用于指定的字段宽度，默认情况下为 1。由于`c`不是指针，因此上述内容可能会在某些平台上崩溃（并在其他平台上导致更糟糕的事情）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:29:59.763

广告 Q1：第一个是一个字符数组，带有一个指向它 的*固定指针 a。*`sizeof(a)`将返回类似 20 ( `strlen(a)+1`) 的内容。尝试将某些东西分配给 a (like `a = b`) 将失败，因为 a 是固定的。

第二个是指向 char 数组的指针，因此 sizeof(b) 通常在 32 位上为 4 或在 64 位上为 8。将某些东西分配给 b 将起作用，因为指针可以采用新值。

当然，*a 或 *b 都适用。

广告 Q2：`printf()`使用 %s 参数获取*指向*char 的指针（这些是 C 中的“字符串”）。因此，`printf("%s", *b)`将崩溃，因为 printf() 使用的“指针”将包含 *b 的字节值。

你*可以*做的是`printf("%c", *b)`，但这只会打印第一个字符。

广告 Q3：`sizeof(char)`是 1（根据定义），因此您分配 1 个字节。scanf 很可能会读取超过一个字节（请记住，每个字符串都将由占用一个字符的空字符终止）。因此 scanf 会破坏内存，可能会在以后的某个时候导致内存。

广告 4：也许这就是被丢弃的记忆。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-22T21:16:31.697

两个声明都是一样的。b 指向第一个字节，所以当你说 *b 它是第一个字符。printf("%s", *b) 将失败，因为 %s 接受指向字符串的指针。char 是一个字节。

# iphone - 根据用户选择使用 CorePlot 进行实时绘图

> ID：13520027
> 
> 赞同：0
> 
> 时间：2012-11-22T21:09:51.207
> 
> 标签：iphone, xcode, multithreading, core-plot

我有一个视图控制器，顶部有一个 tableView，下面有一个 scrollView，允许用户滚动图形。（我试图提交它的照片，但由于我的声誉而被拒绝）。

我将如何设置它，以便用户可以选择不同的 tableCells 组合，并且图形将根据用户从 tableview 中实时选择的日期来绘制。

我知道您不应该在主线程以外的任何东西上运行 UI，并且您不应该在单独的线程上运行核心绘图。由于数据可能需要一些时间来加载并且图表需要一些时间来绘制（尤其是随着选择数量的增加），我需要在图表中使用一个旋转轮并在用户可以继续滚动 tableView 的同时生成它。

也许当数据模型发生变化时调用[graph reloadData]，但是我仍然不知道如何集成它！：/

我希望开发一个与 iPhone 上预装的“股票”应用程序具有相似优雅和功能的 UI。

如果有人能指出我如何做到这一点的正确方向，我将不胜感激！

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:27:38.933

该`-reloadData`方法（对于单个图或整个图）是要走的路。确保从主线程调用它，并且在数据源准备好提供新数据之前不要调用它。

Core Plot 附带的*StockPlot*示例应用程序用于`NSURLConnection`从 Web 加载数据。*该示例和绘图库*示例应用程序中的“实时绘图”显示了随时间更新绘图数据的不同方式。

# iphone - 频闪 iPhone 背景 - NSTimer？

> ID：13520030
> 
> 赞同：0
> 
> 时间：2012-11-22T21:10:08.970
> 
> 标签：iphone, objective-c, nstimer

我想设置一个简单的背景频闪。我想要一个频率变量。NSTimer 是最好的方法吗？如果是这样，怎么做？

考虑可能做这样的事情：

```
LOOP OF SOME KIND() {
self.window.backgroundColor = [UIColor redColor];
//DELAY - the amount is the frequency
self.window.backgroundColor = [UIColor blackColor];
} 
```

仅供参考，我有一个 UISlider 输出值 0 到 255 的频率。所以，0 是没有频闪。255是非常快的频闪。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:13:33.527

而不是`NSTimer`你可以使用 a `CADisplayLink`。

[http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)

只需保存上次更改颜色时的时间戳，如果经过足够的时间，请在 displaylink 函数中再次更改它。

# javascript - DOMContentLoaded 事件似乎不起作用/我需要帮助了解它是如何工作的

> ID：13520031
> 
> 赞同：0
> 
> 时间：2012-11-22T21:10:09.360
> 
> 标签：javascript, google-chrome-extension

我正在开发一个简单的 chrome 扩展程序，当用户打开一个新选项卡时，它会显示一串文本。代码是：

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="showText.js"></script>
    </head>
    <body>
        <div id="textDiv">
            <h1 id="actualText"></h1>
        </div>
        <div id="footer">
            <img src="settings.png"/>
        </div>
    </body>
</html> 
```

和js文件

```
document.addEventListener("DOMContentLoaded", function () {
    var text = "sample text";
    $('#actualText').append(text);
}); 
```

当我打开一个新选项卡时，这似乎不起作用，但是当我单击选项卡上的刷新时，会显示文本。所以我猜想在这段代码运行之前第一次 DOMContentLoaded 事件已经被触发了？如果我将它加载到头部，那不应该是这样，对吧？我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:11:49.797

如果您使用的是 jquery，请执行以下操作：

```
$(function () {
    var text = "sample text";
    $('#actualText').append(text);
}); 
```

这将在文档准备好时调用该函数。[显然这相当于`DOMContentLoaded`](https://stackoverflow.com/questions/11523359/is-domcontentloaded-event-exactly-the-same-as-jquerys-ready-function)

# javascript - Jasmine 测试已通过 Knockout 订阅调用子类对象

> ID：13520033
> 
> 赞同：1
> 
> 时间：2012-11-22T21:10:24.460
> 
> 标签：javascript, unit-testing, knockout.js, jasmine

我在这里有一些交互的东西，它们交互得不好。

我有一个基类：

```
 var ObjOne = (function() {
        return function() {
            var self = this;
            self.propertyOne = ko.observable(1);
            self.observable = ko.observable(1);

            self.observable.subscribe(function(newValue) {
                self.propertyOne(newValue);
            });
        };
    } ()); 
```

它有两个 Knockout observables，并在其中一个上定义了一个更新另一个的订阅。

我有一个“子类”，用 jQuery.extend 扩展：

```
 var ObjTwo = (function() {
        return function() {
            this.base = new ObjOne();
            $.extend(this, this.base);
        };
    } ()); 
```

我有一个 Jasmine 测试，它试图问一个问题“当我更新 observable 时，是否调用了 propertyOne？”

```
it('Test fails to call the correct propertyOne', function() {
    var obj = new ObjTwo();
    spyOn(obj, 'propertyOne').andCallThrough();

    obj.observable(2);

    expect(obj.propertyOne).toHaveBeenCalled();
    expect(obj.propertyOne()).toBe(2);
}); 
```

这失败了“预期的间谍 propertyOne 已被调用。”。当我调试时，observable 会正确更新。在实际系统中，它工作正常（同样，甚至测试“propertyOne 是否等于 2？”通过。当我调试订阅函数时，self.propertyOne 不是间谍，但在测试中，它是。

我有一个解决方案，但不是很好：

```
 it('Test calls the base propertyOne', function() {
    var obj = new ObjTwo();
    spyOn(obj.base, 'propertyOne').andCallThrough();

    obj.observable(2);

    expect(obj.base.propertyOne).toHaveBeenCalled();
    expect(obj.propertyOne()).toBe(2);
}); 
```

请注意添加到这两行的**.base 。**我不喜欢我必须公开基类，或者必须触摸它的属性才能使测试运行。

这是一个 jsfiddle：http: [//jsfiddle.net/4DrrW/23/](http://jsfiddle.net/4DrrW/23/)。问题是 - 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:57:11.697

调用`$.extend(this, this.base);`您的对象后，基本上如下所示：

```
{
    base: {
        propertyOne: ko.observable(1),
        observable: ko.observable(1)
    },
    propertyOne: base.propertyOne,
    observable: base.observable
} 
```

当您执行 a `spyOn`for`propertyOne`时，它会用包装器替换它。但是，订阅是在实际的 observables 之间设置的，并且无法调用包装器。

如果您不想访问`base`，那么我将删除调用 observable 的测试。检查该值是否正确似乎就足够了。

否则，您最好`ObjOne`通过使用新对象调用其构造函数来混合，`this`如下所示：

```
var ObjTwo = (function() {
    return function() {
        ObjOne.call(this);
    };
} ()); 
```

然后，测试就可以了：http: [//jsfiddle.net/rniemeyer/z2GU3/](http://jsfiddle.net/rniemeyer/z2GU3/)

# linux - bash 中的错误 - 存在 -e 预期的一元运算符

> ID：13520035
> 
> 赞同：4
> 
> 时间：2012-11-22T21:10:43.437
> 
> 标签：linux, bash

在我使用“读取”创建它之后，我想测试两个变量是否存在。如果用户只输入我想要的两个变量之一，则会显示错误。

有我的代码：

```
while true;
do
  echo "Saisissez deux variables x et y sous la forme [x y]"
  read x y

  if [ !-e $x ] || [ !-e $y ] <<<<<< problem ligne
  then
    echo "Vous devez renseigner deux nombres x et y"
  elif [ $x = "." ]
  then
    exit 0
  else
    calcul $x $y
  fi
done 
```

当我输入一个参数时出现错误：

```
[: !-e: unary operator expected 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T21:14:31.987

将其更改为：

```
if [ -z "$x" ] || [ -z "$y" ] 
```

**解释**

*   `[`实际上是一个内置的外壳（尝试`which [`或`help [`在您的提示下）；它是 的同义词`test`。
*   `-z`是 的论据`[`。它的意思是“测试下一个字符串的长度是否为0；如果是则返回true；否则返回false。
*   始终用双引号将您正在测试的变量括起来！

这是一个有用的选项列表，`[`因为我认为您会感兴趣：

```
-b file = True if the file exists and is block special file. 
-c file = True if the file exists and is character special file. 
-d file = True if the file exists and is a directory. 
-e file = True if the file exists. 
-f file = True if the file exists and is a regular file 
-g file = True if the file exists and the set-group-id bit is set. 
-k file = True if the files "sticky" bit is set. 
-L file = True if the file exists and is a symbolic link. 
-p file = True if the file exists and is a named pipe. 
-r file = True if the file exists and is readable. 
-s file = True if the file exists and its size is greater than zero. 
-s file = True if the file exists and is a socket. 
-t fd = True if the file descriptor is opened on a terminal. 
-u file = True if the file exists and its set-user-id bit is set. 
-w file = True if the file exists and is writable. 
-x file = True if the file exists and is executable. 
-O file = True if the file exists and is owned by the effective user id. 
-G file = True if the file exists and is owned by the effective group id. 
file1 –nt file2 = True if file1 is newer, by modification date, than file2\. 
file1 ot file2 = True if file1 is older than file2\. 
file1 ef file2 = True if file1 and file2 have the same device and inode numbers. 
-z string = True if the length of the string is 0\. 
-n string = True if the length of the string is non-zero. 
string1 = string2 = True if the strings are equal. 
string1 != string2 = True if the strings are not equal. 
!expr = True if the expr evaluates to false. 
expr1 –a expr2 = True if both expr1 and expr2 are true. 
expr1 –o expr2 = True is either expr1 or expr2 is true. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:16:20.540

运算符`-e`不是在这种情况下使用的正确运算符。操作员`-z`是正确的操作员。这将检查字符串是否为空；在你的情况下`x`和`y`。

所以改变这个：

```
if [ !-e $x ] || [ !-e $y ] 
```

对此：

```
if [ ! -z $x ] || [ ! -z $y ] 
```

运算符 -e 用于检查文件是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:47:08.883

在 bash 中，您可以使用：

```
if [[ -z $x || -z $y ]]; then 
```

`[[``test`有许多比/更容易使用的特性`[`，包括将`||`and`&&`直接放入表达式的能力，以及您不需要引用参数扩展这一事实，因为`[[`它会自动执行。

```
help [[ 
```

将为您提供更多信息，尽管它遗漏了这个有用的段落，您可以在以下位置找到`man bash`：

```
 Word splitting and pathname expansion are not performed on the
  words between the [[ and ]]; tilde expansion, parameter and
  variable expansion, arithmetic expansion, command substitution,
  process substitution, and quote removal are performed. Conditional
  operators such as -f must be unquoted to be recognized as primaries. 
```

# android - 如何在单个活动中使用无线电组和复选框？

> ID：13520036
> 
> 赞同：2
> 
> 时间：2012-11-22T21:10:50.117
> 
> 标签：android, android-layout

如何在单个活动中使用 radiogroup.setonCheckedchangelistener 和 checkbox.setonCheckedchangelistener？我正面临一个问题？请任何人帮助我....提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:41:00.027

在这里，您不需要`CheckedChangeListener`为无线电组和复选框实现两个不同的。

`OnCheckedChangeListener`用于无线电组，`android.widget.CompoundButton.OnCheckedChangeListener`用于复选框。

你需要实现两个不同的`CheckedChangeListener`

请参阅下面的无线电组和复选框的代码。

```
public class abcd extends Activity implements OnCheckedChangeListener,android.widget.CompoundButton.OnCheckedChangeListener{

    RadioGroup rd;
    CheckBox cx;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.abcd);

        rd  =  (RadioGroup) findViewById(R.id.radioGroup1);
        cx = (CheckBox) findViewById(R.id.checkBox1);

        rd.setOnCheckedChangeListener(this);
        cx.setOnCheckedChangeListener(this);

    }
    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {

        // Here you can get your Radio button checked id
        System.out.println("radiogroup checked");

    }
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        System.out.println("checkbox checked");

    }

} 
```

更多详情[请参考此链接](http://glorious-arvind.blogspot.in/2012/11/use-of-radiogroup-and-checkbox-in.html)

# javascript - 仅使用页面滚动条滚动 div 的左侧

> ID：13520041
> 
> 赞同：0
> 
> 时间：2012-11-22T21:11:05.103
> 
> 标签：javascript, jquery, css

今天我在[foursquare.com](http://foursquare.com)网站上看了一下，当我在我所在的城市搜索一些东西时，它会返回我的结果页面，而在结果页面中，当我使用页面滚动条向下滚动页面时，只有左栏包含向下滚动的地方详细信息的列表视图，而不是页面的右侧，我只想知道如何使用 jquery 或 javascript 来完成。假设我有以下 html div：

```
 <html><body>
       <div id="wrapper" style="width:900px;height:1200px;margin: 0 auto;">

        <div id="left_column" style="width:300px;height:1200px; float:left;border:1px solid #000000;">
         <ul><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li><li>list 1</li></ul>
            </div>

      <div id="middle_column" style="width:300px;height:1200px; float:left;border:1px solid #000000;"></div>

        <div id="right_colunm" style="width:300px;height:1200px; float:left;border:1px solid #000000;"></div>
      </div>

      </body></html> 
```

当我使用页面滚动条时，只有left_column中的内容被滚动，而不是中间的和右边的，任何人都可以告诉我如何在jquery中做到这一点。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:15:34.030

它实际上只是 CSS。背景和标题中的地图设置为`position: fixed`使它们在页面的其余部分滚动时停留在一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:09:08.103

试试这个，没有 jquery

```
<!DOCTYPE html>
<html>

<style type="text/css">
#left {
  overflow: auto;
  left: 0;
  width: 149px;
  border-right: 1px solid #000;
  position: relative;
}
#right {
  position: fixed;
  top:0;
  margin-left: 200px;
  height: 100%;
  float:left;
}
</style>
</head>

<body>

<div id="left"> 
  <ul>
    <li>Start</li>

    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>
    <li>menu</li>

    <li>End</li>
  </ul>
</div>

<div id="right"> 
  <div style="float:left">
    <p>Content start</p>
    <p>Content</p>
    <p>Content</p>  
    <p>Content</p>
    <p>Content</p>
    <p>Content end</p>
  </div>
  <div style="margin-left:10px;float:left">
    <p>right start</p>
    <p>right</p>
    <p>right</p>
    <p>right end</p>
  </div>
</div>   
</body>
</html> 
```

# mysql - 带有非识别键的表

> ID：13520042
> 
> 赞同：1
> 
> 时间：2012-11-22T21:11:20.133
> 
> 标签：mysql, database-design, database-schema

我的公司正在使用这个模型来管理库存

[模型 1 http://img534.imageshack.us/img534/6024/modeltest2.jpg](http://img534.imageshack.us/img534/6024/modeltest2.jpg)

但是我遇到了问题，因为在这个月我们在同一个仓库购买了一些不同价格、有效期的塑料袋。

所以现在我把模型改成了这个。

[模型 1 http://img16.imageshack.us/img16/8416/modeltest.jpg](http://img16.imageshack.us/img16/8416/modeltest.jpg)

我的问题是这是否可以.. 它正在工作，但这是我第一次创建一个没有主键的表。

数据示例：

```
PRODUCT        WAREHOUSE   Quantity   Price  Expiration_Date
PLASTIC BAG    NEW YORK    20         1.20$  12-10-2013
PLASTIC BAG    NEW YORK    130        1.50$  21-12-2015 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:34:33.030

一个问题，特定于 MySQL 和 InnoDB 存储，是 InnoDB 将在内部静默创建一个额外的 6 字节整数作为代理主键。此外，如果您可以通过主键执行查询，则对任何 InnoDB 表的查询效率会更高。因此，如果可能，定义主键（或唯一键）对您有利。

如果 Product_ID、Warehouse_ID 列的组合不足以唯一标识每一行，那么您可以添加第三列来区分重复项。例如，Stock_ID 什么的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:53:03.663

基本上没问题。在销售、仓库系统中，您不能在产品表中保存所有具有不同到期日期的产品，因为每个产品都会有很多记录。但通常您需要将它们保存在“Item_Ledger_Entry”表中，该表将是所有销售或采购交易。

您使用相同的产品，只是具有不同的到期日期。我认为您根本不需要 Priamrey Key in`Product has warehouseKey`

# javascript - Backbone.js 视图渲染错误

> ID：13520047
> 
> 赞同：2
> 
> 时间：2012-11-22T21:12:08.857
> 
> 标签：javascript, backbone.js, viewrendering

如果我这样做 - 一切都很好 -

```
var UserList = Backbone.View.extend({
        el: '.page',
        render: function(){

            var users = new Users();
            users.fetch({
                success: function() {
                    console.log('success');

                }
            })
                this.$el.html('test');

        }
    }); 
```

但是当我将 插入`this.$el.html('test');`到成功回调中时，我收到了一个错误：

> TypeError：“未定义”不是对象（评估“this.$el.html”）

```
var UserList = Backbone.View.extend({
        el: '.page',
        render: function(){

            var users = new Users();
            users.fetch({
                success: function() {
                    console.log('success');
                    this.$el.html('test');
                }
            })
        }
    }); 
```

控制台日志正确触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:14:32.237

里面`success`的上下文已经改变，所以`this`不再指代视图对象（我相信它实际上指的是 JQuery Ajax 对象）。要解决此问题，您可以使用以下方法保存对视图的引用`var self = this`：

```
var users = new Users();
var self = this;
users.fetch({
    success: function() {
        console.log('success');
        self.$el.html('test');
    }
}) 
```

# java - 在生成的 pdf 文档中插入文本

> ID：13520049
> 
> 赞同：0
> 
> 时间：2012-11-22T21:12:27.993
> 
> 标签：java, pdf

我有一个库，可以生成带有图像的 pdf 文档。我希望能够在每张图片之后添加文字。它的语法是什么？如何在pdf文档中插入文本？

我必须使用我拥有的库，而不是另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:47:44.803

首先，mkl 是正确的，请查看规范以了解所有详细信息。PDF 是一种精确的语言，如果你犯了错误，一旦你在查看器中打开 PDF，他们通常会受到严厉的惩罚。

其次，当您考虑在页面上放置文本时，不要忘记除了在页面上绘制文本的文本运算符之外，您还必须指定用于绘制该文本的字体。如果您的库不能自动为您处理所有这些，这将包括确保 PDF 文件中包含字体资源。

如果你想偷工减料（我在写这篇文章时发抖）并且可能没有仔细阅读规范，试试这个。

1) 创建一个看起来或多或少像您想要的 PDF 文件。

2) 使用 callas (http://www.callassoftware.com/callas/doku.php/en:download) 的 pdfToolbox 或 Enfocus (http://www.enfocus.com/en/products/) 的 Browser 等工具浏览器）。这两种工具都允许您调查 PDF 文件的低级结构，包括查看实际的页面描述代码。这将向您展示如何嵌入字体（如果您必须自己做这可能非常方便）以及如何在页面上呈现文本（以及您如何设置字体、大小、颜色等...使用）。

# c - 在 C 中使用 strtok 解析文件

> ID：13520055
> 
> 赞同：1
> 
> 时间：2012-11-22T21:12:54.900
> 
> 标签：c, strtok

我正在编写一个简短的函数来通过检查字符串标记来解析文件。当它点击“visgroups”时它应该停止，这是我用来测试的文件的第 9 行（位于名为 *source 的缓冲区中）。“版本信息”是第一行。当我运行此代码时，它只是重复打印出“versioninfo”，直到我手动取消该程序。为什么 strtok 函数没有继续运行？

当我达到这一点时，我将对源进行一些不同的操作，这就是循环控制变量被称为“活动”的原因。这与 strtok 不是线程安全的事实有关吗？我没有在任何其他线程中使用源代码。

```
int countVisgroups(int *visgroups, char *source) {
    const char delims[] = {'\t', '\n', ' '};
    int active = 0;
    char *temp;
    while (!active){
        temp = strtok(source, delims);
        if (temp == NULL) {
            printf("%s\n", "Reached end of file while parsing.");   
            return(0);  
        }
        if (strncmp(temp, "visgroups", 9) == 0) {
            active = 1; 
            return(0);  
        }
        printf("%s\n", temp);       
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:15:53.383

您的`delims`数组需要以 nul 终止。不然怎么`strtok`知道你传入了多少个分隔符？通常你只是使用`const char *delims = "\t\n "`，但你可以简单地添加`..., 0`到你的初始化程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:15:09.910

在第一次调用`strtok`要标记的字符串后，所有后续调用都必须在第一个参数设置为 NULL 的情况下完成。

```
temp = strtok(NULL, delims); 
```

不，它可能不需要对线程安全做任何事情。

尝试像这样重写它：

```
int countVisgroups(int *visgroups, char *source) {
   const char delims[] = {'\t', '\n', ' ', '\0'};
   int active = 0;
   char *temp;
   temp = strtok(source, delims);
   while (!active){
       if (temp == NULL) {
           printf("%s\n", "Reached end of file while parsing.");   
           return(0);  
       }
       if (strncmp(temp, "visgroups", 9) == 0) {
           active = 1; 
           return(0);  
       }
       printf("%s\n", temp);    
       temp = strtok(NULL, delims);   
   }
   return(0);
} 
```

# c# - 在多个项目之间共享通用代码

> ID：13520063
> 
> 赞同：4
> 
> 时间：2012-11-22T21:13:44.183
> 
> 标签：c#, svn, version-control

我有一个类库项目，其中包含在我的项目中使用的通用代码，并且我使用 subversion 作为源代码控制。
我对管理解决方案、项目和代码的可用性有一些疑问。
我想在项目之间共享这个类库，当我更新它时，更新很容易应用于所有项目。我在哪里可以找到这个类库在项目之间共享并提高源代码控制、可用性和......？

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:20:51.093

您可以使用 NuGet 包作为分发 DLL 的一种方式 - 构建您的通用程序集，`pack`将结果构建到特定目录中，并将该目录用作 NuGet 包管理器的存储库。NuGet 选项的一部分是自动下载最新的包版本，因此每当您打开解决方案时，包管理器都会扫描存储库以查找较新版本并下载它（如果有的话）。

这是一个非常简单的教程：http: [//juristr.com/blog/2012/04/using-nuget-to-distribute-our-company/](http://juristr.com/blog/2012/04/using-nuget-to-distribute-our-company/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:20:33.247

您可以使用几种方法：

1.  您可以从一个地方将此项目作为现有项目添加到所有解决方案中。这是最简单的方法，但是当它在一个解决方案中更改时，所有其他解决方案都可能被破坏。

2.  您可以将公共库项目分支到所有解决方案作为不同的早午餐。在这种情况下，当您在一个解决方案中更改它时，所有其他解决方案都不会停止，但您应该花费大量时间来合并来自公共库的所有早午餐的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:20:47.697

一个解决方案可以包含许多项目，因此您可以有效地将类库项目放在任何地方，并根据需要从每个新解决方案中引用它。这意味着您的机器上只有一份源代码副本。

当你构建每个项目时，它会在必要时编译类库，所以你需要做的就是有一些过程来保持源代码是最新的。

# sql - 为到达结果行调用 SQL 函数，并联合返回

> ID：13520064
> 
> 赞同：1
> 
> 时间：2012-11-22T21:13:56.073
> 
> 标签：sql, function, union

嗨，我有一个返回表（记录集）的 sql 函数

```
SELECT * FROM myFunction('213123'); 
```

现在我有一个查询，它给了我所有的 id

```
SELECT "runnerId" FROM log GROUP BY "runnerId" 
```

我如何进行一个查询，该查询为每个“runnerId”调用该函数并将所有结果联合起来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:29:40.407

使用`cross apply`/ `outer apply`as **ta.speot.is**说：

```
create function test_funct (@id int)
returns @retval table(id int not null primary key, data varchar(10)) 
as 
begin

 insert into @retval(id,data) values (@id,'test');
 return ;
end;

select  b.* from 

(
 select 1 as f1
 union
 select 2
)a
cross apply test_funct(a.f1) b -- or outer apply 
```

# iphone - Core Data 从其 objectID 中取回子类 NSManagedObject

> ID：13520066
> 
> 赞同：1
> 
> 时间：2012-11-22T21:14:02.300
> 
> 标签：iphone, objective-c, ios, core-data

我有 3 个使用 MOGenerator 生成的实体，我希望能够从他们的`objectID`

我试过这个：

```
- (void)aMethod: (SpecialEntity1ID *)entityID
{
    //This is a method from MagicalRecord but it doesn't matter(I think...).
    NSManagedObjectContext *context = [NSManagedObjectContext MR_contextWithParent:[NSManagedObjectContext MR_defaultContext]];

    SpecialEntity1 *entity1 = [context objectRegisteredForID:entityID]
    //But this returns an NSManagedObject so it doesn't work...
} 
```

有人可以帮我用它的 ID 取回这个对象吗？

由于我不知道如何使用 ID 来解决它，我目前正在通过创建一个以 an`NSString`作为参数的方法来解决它，而不是`SecialEntity1ID`定义该对象的一个​​属性（并且是唯一的）并获取该对象。

我认为找回他的身份证更好，所以有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:30:22.433

`existingObjectWithID:error:`如果您 100% 确定返回类型是什么，您想使用NSManagedObjectContext 的方法和类型转换。我会保持它的通用性，即让它返回一个 NSManagedObject，然后在其他地方测试它的类，如果你想确定它是否属于一个特定的类。

```
- (Object*)retrieveObjectWithID:(ObjectID*)theID
{
    NSError *error = nil;
    Object *theObject = (Object*)[[NSManagedObjectContext contextForCurrentThread] existingObjectWithID:theID error:&error];
    if (error)
        NSLog (@"Error retrieving object with ID %@: %@", theID, error);
    return theObject;
} 
```

# c - 关于Rot13-实现

> ID：13520067
> 
> 赞同：3
> 
> 时间：2012-11-22T21:14:05.680
> 
> 标签：c, rot13

我正在尝试在 C 中实现 rot13 算法。但由于我对该语言不是很熟悉，所以我的代码在这里遇到了一些问题。

基本上，我想将 args[] 中的每个字母向上旋转 13 个位置。但是这段代码似乎很慢：

```
#include <stdio.h>

char[] rotate(char c[]) {
  char single;
  int i;
  int alen = sizeof(c)/sizeof(c[0]);
  char out[alen];

  for(i=0;i<=alen;i+=1) {
    if(c[i]>='a' && (c[i]+13)<='z'){
      out[i] = c[i]+13;
    }
  }

  return out;
}

int main(int argc, char *argv[]) {
  printf("The given args will be rotated\n");
  int i;
  char rotated[sizeof(argv)/sizeof(argv[0])];

  rotated = rotate(argv);

  /* printing rotated[] later on */
  return 0;

} 
```

我知道这里有很多漏洞 - 你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T11:44:34.360

非常感谢大家，我用这段代码解决了问题

```
#include <stdio.h>

int rot13(int c){
  if('a' <= c && c <= 'z'){
    return rot13b(c,'a');
  } else if ('A' <= c && c <= 'Z') {
    return rot13b(c, 'A');
  } else {
    return c;
  }
}

int rot13b(int c, int basis){
  c = (((c-basis)+13)%26)+basis;
  return c;
}

int main() {
  printf("The given args will be rotated");
  int c;
  while((c = getchar()) != EOF){
    c = rot13(c);
    putchar(c);
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:50:30.593

@Michael 如何说`char out[alen]`编译器不接受这一点，因为您不能声明具有非恒定值的数组大小。您的代码的另一个问题是`for( i = 0; i < = alen; i+=1 )`数组从 0 开始的 for 循环，所以如果您执行 for 直到`lenght's`您将离开数组的位置。

关于代码：

1.  您必须使用指向字符串开头的指针作为函数的参数，因为您不能在 C 中返回数组（但您可以返回指针）。
2.  你`if( str[i] >= 'a' && (str[i]+13) <='z')`是不正确的，因为你将一些字母转换成符号看看。

________ ![在此处输入图像描述](../Images/e8f085e698abc3cbbfe98acf0c0db6de.png) -------------- ![ASCII码](../Images/d86115d820614c1b69daa92027336176.png)！

```
 void rotate( char * str ) 
    {
        int i = 0;

        /* You do this until you find a '\0' */
        for( i = 0; str[ i ] != '\0' ; i++ ){

            /* Use the pointer notation if you passed a pointer. */
            /* If the letter is between a and m you can simply  sum it. */
            if( *( str + i ) >= 'a' && *( str + i ) < 'n')
                *( str + i ) += 13;       

            /* If the letter is between the n and z you have to do the opposite.*/
            else if( *( str + i ) >= 'n' && *( str + i ) <= 'z')
                *( str + i ) -= 13;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:40:52.730

C 中的数组大小必须在编译时设置，因此不能使用非常量表达式来表示数组大小。

考虑以下实现：

```
// in place rotate
void rotate(char *str) 
// str must be a zero-terminated string
{
  int i =0;
  // loop until str itself is not NULL and str[i] is not zero 
  for(i=0;str && str[i]; ++i) // ++i is a pre-increment
  {
    if(str[i] >= 'a' && (str[i]+13) <='z')
    {
      str[i] = str[i]+13;       // modifying str in place
    }
  }
} 
```

然后你`main()`可以看起来像这样：

```
int main(int argc, char *argv[]) 
{  
  printf("The given args will be rotated: %s\n", argv[1]);

  rotate(argv[1]);

  printf("Rotated: %s\n", argv[1]);
  return 0;
} 
```

**更新**更高级的转换版本，可以处理以下情况`str[i] + 13 > 'z'`

```
 for(i=0;str && str[i]; ++i) // ++i is a pre-increment
  {
      // ignore out of range chars
      if (str[i] < 'a' || str[i] > 'z') continue;
      // rotate 
      for (off = 13; off > ('z' - str[i]); ) 
      {
          off-= (1 + 'z' - str[i]);
          str[i] = 'a';
      }
      str[i]+=off;       
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T22:24:52.063

此函数可以对 rot13 字符串进行编码/解码。它与 VIM 的 `g?`rot13 编码器兼容。

```
void rot13 (char *s) {
    if (s == NULL)
        return;

    int i;
    for (i = 0; s[i]; i++) {
        if (s[i] >= 'a' && s[i] <= 'm') { s[i] += 13; continue; }
        if (s[i] >= 'A' && s[i] <= 'M') { s[i] += 13; continue; }
        if (s[i] >= 'n' && s[i] <= 'z') { s[i] -= 13; continue; }
        if (s[i] >= 'N' && s[i] <= 'Z') { s[i] -= 13; continue; }
    }
} 
```

# php - Zend Service Amazon - 内部服务器错误 - 在本地主机上工作？

> ID：13520079
> 
> 赞同：0
> 
> 时间：2012-11-22T21:15:29.117
> 
> 标签：php, codeigniter, zend-framework, amazon, internal-server-error

我的 Zend Service Amazon 包集成到我的 codeigniter 框架中时遇到了一个非常令人沮丧的问题。该库在我的本地主机中运行良好，但是当我从实时站点尝试它时它不起作用，它给了我一个内部服务器错误。为什么会这样？

PHP日志中的错误是：

> [2012 年 11 月 22 日 21:29:02] PHP 警告：输入中的意外字符：'\' (ASCII=92) state=1 in /home5/tradejun/public_html/application/controllers/dev.php 在第 30 行 [ 2012 年 11 月 22 日 21:29:02] PHP 解析错误：语法错误，第 30 行 /home5/tradejun/public_html/application/controllers/dev.php 中的意外 T_STRING

第 30 行：

```
$autoloader = new Zend\Loader\StandardAutoloader(array( 
```

这是我的控制器功能：

```
public function amazon2($isbn)    {
    set_include_path(get_include_path() . PATH_SEPARATOR . 'application/libraries/Amazon');
    require_once 'Zend/Loader/StandardAutoloader.php';

    $autoloader = new Zend\Loader\StandardAutoloader(array(
        'namespaces' => array(
            'Zend'        => dirname(__FILE__) . '/Zend',
            'ZendRest'    => dirname(__FILE__) . '/ZendRest',
            'ZendService' => dirname(__FILE__) . '/ZendService',
        ),
        'fallback_autoloader' => true));

    $autoloader->register();

    $tag       = 'colleg-21'; // replace with your Amazon app ID
    $appId     = '[appid]'; // replace w/ your access key from https://portal.aws.amazon.com/gp/aws/securityCredentials
    $secretKey = '[secretkey]';
    $query  = new ZendService\Amazon\Query($appId, 'UK', $secretKey);
    $item   = $query->itemLookup($isbn,
        array('SearchIndex'   => 'Books',
            'AssociateTag'  => $tag,
            'IdType'        => 'ISBN',
            'ResponseGroup' => 'Large',));
    $item->smallImageAddress = $item->SmallImage->Url->getImageAddress();
    $item->mediumImageAddress = $item->MediumImage->Url->getImageAddress();
    $item->largeImageAddress = $item->LargeImage->Url->getImageAddress();
    $data['item'] = $item;
    $this->load->view('development/amazon',$data);
} 
```

任何人都可以提供任何建议或可能的解决方案吗？

积分

*   在本地主机上工作得很好，但在实时主机服务器上却不行
*   我正在使用 ZendService_Amazon-2.0.2.zip
*   CodeIgniter 版本为 2.02

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:35:05.060

它必须是旧版本的 php - 不支持命名空间。命名空间需要 php 5.3。你需要升级。

编辑：命名空间所需的更正版本号；只需要5.3，不需要5.4。谢谢， E_p

# git - 裸存储库问题中的新 git 挂钩设置（无输出/执行）

> ID：13520081
> 
> 赞同：0
> 
> 时间：2012-11-22T21:15:52.047
> 
> 标签：git, permissions, githooks

我似乎无法在我的设置上使用任何 git 挂钩。

```
sjakubowski@sjakubowski:~/Work/git$ mkdir hookstest
sjakubowski@sjakubowski:~/Work/git$ cd hookstest/
hookstest$ git init

Initialized empty Git repository in /home/sjakubowski/Work/git/hookstest/.git/

hookstest$ git commit -m "initial commit"

[master (root-commit) 82b95e0] initial commit
 0 files changed
 create mode 100644 testfile

hookstest$ touch .git/hooks/commit-msg
hookstest$ nano .git/hooks/commit-msg
hookstest$ cat .git/hooks/commit-msg

#!/usr/bin/env ruby
message_file = ARGV[0]
message = File.read(message_file)

#starts with # then number, space, and at least 5 words no more than 200
$regex = /(^#[0-9]+ \W*(\w+(\W+|$)){5,200})/

if !$regex.match(message)
puts "Your message is not formatted correctly (example: #XXX at least 5 words)"
exit 1
end

hookstest$ touch testfile2
hookstest$ git add testfile2
hookstest$ git commit -m "this message won't be blocked"
[master adea486] this message won't be blocked
 0 files changed
 create mode 100644 testfile2 
```

我错过了什么？这是我的配置。

```
hookstest$ git --version
git version 1.7.9.5
hookstest$ ruby --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
hookstest$ git config --list
user.name=Sylvester Jakubowski
user.email=XXXX@gmail.com
github.user=sjakubowski
github.token=XXXX
color.ui=true
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:26:13.440

钩子文件必须设置了可执行位（chmod +x），否则它们不能被 Git 执行。

# c - 使用 gdb 调试 C 程序

> ID：13520085
> 
> 赞同：0
> 
> 时间：2012-11-22T21:16:19.160
> 
> 标签：c, gdb

我正在尝试测试我编写的调度程序。我安排了两个进程 - 都是无限的 while 循环（只是 while(1) 语句）。当我运行程序时，有时它会在十秒后出现段错误（有时是 5 秒，有时是 15 秒或更长时间）。有时它根本没有段错误并按预期运行。我有一个日志文件，显示两个进程在段错误发生之前按预期安排。我正在尝试使用 gdb 调试错误，但这并不是很有帮助。这是我通过回溯得到的：

```
#0  0x00007ffff7ff1000 in ?? ()
#1  0x000000000000002b in ?? ()
#2  0x00007ffff78b984a in new_do_write () from /lib64/libc.so.6
#3  0x000000000061e3d0 in ?? ()
#4  0x0000000000000000 in ?? () 
```

我真的不明白＃2。

我认为这可能是与堆栈溢出相关的错误。但是，我在整个过程中只 malloc 两次 - 两次设置两个进程时，我都在我写的 pcb 表中 malloc 一个 pcb 块。有没有人遇到过类似的问题？这可能与我在调度程序中设置/交换上下文的方式有关吗？为什么有时会出现段错误，有时不会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:03:02.837

您没有告诉您*如何*获得问题中显示的堆栈跟踪。

堆栈跟踪很可能是伪造*的*，不是因为堆栈损坏，而是因为您错误地调用了 GDB，例如在附加进程或检查核心转储时指定了错误的可执行文件。

`-O2`一个常见的错误是用（我们称之为可执行文件）构建可执行文件，然后用（我们称之为这个）`E1`重建它，并尝试分析正在运行的实时进程，将GDB作为符号文件。`-g``E2``core``E1``E2`

不要那样做，它不起作用，也不应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:34:57.777

由于您的堆栈似乎已损坏，因此您可能在某处发生堆栈缓冲区溢出是正确的。没有代码，这有点难以分辨。

`malloc`但这与您的通话无关。溢出动态分配的缓冲区会破坏*堆，*而不是堆栈。

您可能需要查看的是对于您尝试复制到其中的数据来说不够大的局部变量，例如：

```
char xyzzy[5];
strcpy (xyzzy, "this is a bad idea"; 
```

或者将缓冲区（同样，很可能在堆栈上）传递给系统调用，该系统调用向其写入比您提供的更多数据。

它们是最*可能*的原因，当然，理论上，您的*任何*未定义行为都可能导致这种情况。如果基于此答案的解决方案不明显，您可能需要发布导致它的代码。当你这样做时，尽量确保你尽可能地减少它，以便它是最短的完整程序，显示错误。

通常你会发现这样做，问题变得很明显:-)

# java - 从 Java 中的变量中获取类

> ID：13520098
> 
> 赞同：0
> 
> 时间：2012-11-22T21:18:08.657
> 
> 标签：java

我正在制作一个小型（为了好玩）游戏，其中虚拟机器人互相战斗。我有一系列这些机器人的类名称，但我不知道如何加载它们。代码中可能更清楚：

```
String[] classes={"Bot1","Bot2","Bot123"};
Object[] bots=new Object[classes.length];

for(int i=0;i<classes.length;i++){
  bots[i]=UnknownFunction(classes[i]);
} 
```

额外细节：

```
package Arena;

public class Bot {
    public void main(String args[]){

    }

    public void init(){
        System.out.print("Loaded");
    }
} 
```

在主文件中：

```
bot=Class.forName("Arena.Bot").newInstance();
bot.init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:19:21.860

你需要`Class.forName()`方法来加载你的类，然后`newInstance()`方法来实例化它们。假设你有一个`0-arg constructor`： -

```
bots[i] = Class.forName(classes[i]).newInstance(); 
```

另请注意，这些类名必须是`fully qualified`名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:21:27.930

```
String[] classes = {"Bot1", "Bot2", "Bot123"};
Object[] bots = new Object[classes.length];

for(int i = 0; i < classes.length; i++)
{
    bots[i] = Class.forName(classes[i]).newInstance();
} 
```

# git - Git 快速存储库设置

> ID：13520103
> 
> 赞同：0
> 
> 时间：2012-11-22T21:18:32.353
> 
> 标签：git, repository

我是 git 的新手。我有一个 linux 服务器，我在其中存储代码并托管我的网站。还有 1 个人和我一起工作。我们使用 cygwin 在 Windows 机器上工作。我想知道，如何在服务器上快速设置一个 git repo，然后能够从我们的计算机上推送和拉取。这就是我所做的：

在 Linux 服务器上：在文件夹 /home/user1/ 我做了

```
 1\. "git init"    (this created a .git folder in the current folder)
     2\. created "HelloGit.c" file and commited it to the repo 
```

现在在使用 cygwin 的 Windows 机器上，我试图通过尝试这些来提取这个 repo，但这些都不起作用

1.  “git clone user1@hostname:/home/user1/.git”（这不起作用）然后
2.  我试图创建一个裸仓库并使用它，所以“git init --bare”和“git clone user1@hostname:/home/user1/.git”仍然无法正常工作。

任何帮助都会很棒。

谢谢

然后我也尝试： git init --bare 创建 repo 和 git clone ssh://user1@hostname:/home/user1/ 克隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:48:50.903

服务器上的两个命令

```
cd /home/user1; git init --bare 
```

并在客户端

```
git clone ssh://user1@server/home/user1 
```

应该管用。如果没有，请尝试运行`--verbose`以查看问题所在。`GIT_TRACE=1`在运行 git 命令之前进行设置可能会显示其他信息。

一个问题可能是缺少`sshd`. 另一个问题可能是您的存储库上的权限问题。尝试登录服务器并在那里克隆存储库

```
client> ssh server
server> cd /tmp
server> git clone /home/user1 
```

`git init --bare`但是，您的第二次尝试 `git clone ssh://user1@hostname:/home/user1`是错误的，因为第二次`:`. 试试`git clone ssh://user1@hostname/home/user1`吧。

# java - Java GUI 不会显示 JLabel

> ID：13520105
> 
> 赞同：1
> 
> 时间：2012-11-22T21:18:39.963
> 
> 标签：java, swing, user-interface, jpanel, frame

我想用 Java 创建一个简单的 GUI。我知道创建`JLabel`等的基础知识。但是，我找不到为什么我`JLabel`没有显示在屏幕上。这是我的代码：

```
package test;

import java.awt.Color;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.*;
import javax.swing.*;

public class A1Panel extends JPanel implements ActionListener { 
    JLabel firstInt;

    public void init() {
        makeComponents();
        makeLayout();
    }

    private void makeComponents() {
        firstInt = new JLabel("First argument");
        firstInt.setFont(new Font("Helvetica", Font.BOLD, 16));
        firstInt.setBackground(Color.lightGray);
        firstInt.setVisible(true);
        firstInt.setHorizontalAlignment(SwingConstants.CENTER);
    }

    private void makeLayout() {
        add(firstInt);
    }

    public void actionPerformed(ActionEvent e) {    
    }
} 
```

然后`JPanel`，我`JFrame`使用另一个名为 GUI 的类将我的添加到我的：

```
import test.A1Panel;

public class GUI {
public static void main(String[] args) {       
    JFrame frame = new JFrame("Testing GUI"); 
    frame.setLayout( new GridLayout(1,3));

    JPanel panel = new A1Panel();
    panel.setBorder( BorderFactory.createRaisedBevelBorder() );
    frame.add( panel);

    frame.setSize(800,600);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.pack();
    }
} 
```

当我点击编译时，我得到的是一个带有三个*空*面板的简单框架。我不明白为什么我`JLabel`的不在第一个面板中，因为我已将它添加到我的框架中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:21:45.283

实例化 A1Panel 后，您还没有调用`A1Panel.init()`

我建议删除`init()`所有代码并将其添加到`A1Panel`. 但是，如果您想保留该`init()`函数，则需要在之后调用它`JPanel panel = new A1Panel()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:26:46.500

框架不是空的，面板是。在您的代码中，我没有看到对方法`init()`或`makeComponents()`. 实际上，我会将您的`init()`方法变成构造函数，如下所示：

```
public A1Panel() {
    makeComponents();
    makeLayout();
} 
```

另一种选择是`panel.init()`在声明后调用`JPanel panel = new A1Panel()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:21:02.653

添加标签的代码实际上并没有在 main 中调用，是吗？所以仔细看，init 是什么时候真正调用的？

看着那（这

```
private void makeLayout() 
```

方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T21:26:20.087

如果我替换`public void init()`为`A1Panel()`，它就可以完成工作。谢谢您的帮助。

# set - 检查字符串切片是否包含 Go 中的某个值

> ID：13520111
> 
> 赞同：30
> 
> 时间：2012-11-22T21:18:56.057
> 
> 标签：set, go, slice

检查某个值是否在字符串切片中的最佳方法是什么？我会在其他语言中使用 Set，但 Go 没有。

到目前为止，我最好的尝试是：

```
package main

import "fmt"

func main() {
    list := []string{"a", "b", "x"}
    fmt.Println(isValueInList("b", list))
    fmt.Println(isValueInList("z", list))
}

func isValueInList(value string, list []string) bool {
    for _, v := range list {
        if v == value {
            return true
        }
    }
    return false
} 
```

[http://play.golang.org/p/gkwMz5j09n](http://play.golang.org/p/gkwMz5j09n)

这个解决方案对于小切片应该没问题，但是对于有很多元素的切片怎么办？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-22T21:26:20.153

如果您有一个任意顺序的字符串切片，则查找切片中是否存在值需要 O(n) 时间。这适用于所有语言。

如果您打算一遍又一遍地进行搜索，您可以使用其他数据结构来加快查找速度。但是，构建这些结构至少需要 O(n) 时间。因此，如果您多次使用数据结构进行查找，您只会获得好处。

例如，您可以将字符串加载到地图中。然后查找将花费 O(1) 时间。插入也需要 O(1) 时间，使得初始构建需要 O(n) 时间：

```
set := make(map[string]bool)
for _, v := range list {
    set[v] = true
}

fmt.Println(set["b"]) 
```

您还可以对字符串切片进行排序，然后进行二进制搜索。二进制搜索发生在 O(log(n)) 时间内。构建可能需要 O(n*log(n)) 时间。

```
sort.Strings(list)
i := sort.SearchStrings(list, "b")
fmt.Println(i < len(list) && list[i] == "b") 
```

尽管理论上给定无限数量的值，映射更快，但实际上搜索排序列表很可能会更快。您需要自己对其进行基准测试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-22T21:23:47.593

要替换集合，您应该使用`map[string]struct{}`. 这是有效的并且被认为是惯用的，“价值观”绝对没有空间。

初始化集合：

```
set := make(map[string]struct{}) 
```

放一个项目：

```
set["item"]=struct{}{} 
```

检查项目是否存在：

```
_, isPresent := set["item"] 
```

删除一个项目：

```
delete(set, "item") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T21:24:08.090

您可以使用地图，并具有值，例如 bool

```
m := map[string] bool {"a":true, "b":true, "x":true}
if m["a"] { // will be false if "a" is not in the map
    //it was in the map
} 
```

还有[sort](http://golang.org/pkg/sort/)包，因此您可以对切片进行排序和二进制搜索

# java - 您将全球应用程序数据放在 Linux 上的什么位置（特别是 Mint 13）？

> ID：13520112
> 
> 赞同：0
> 
> 时间：2012-11-22T21:18:56.357
> 
> 标签：java, linux, macos, data-storage

我见过有人建议 /var/lib 但这在我的系统上不起作用。/var 的每个子目录都是只读的，除了 /var/lock 和 /var/log。

我是否只需要编写一个 Linux shell 脚本来授予超级用户访问权限？还是有基于 Java 的解决方案？

/bin 和 /usr 都是系统文件目录，所以我不想（也不能）将文件存储在那里。

只要应用程序只需要在用户内部操作我就可以使用：

```
System.getProperty("user.home") + File.separator + ".appname"' 
```

为数据目录。

但是持久*的系统范围的*数据呢？那要去哪里？

额外说明：我的 MacOS 也有这个问题。我可以将 /user/Library/Application Support 用于特定于用户的数据，但我无法访问全局目录。

第二个注意事项：我知道并使用了 Preferences API。我正在寻找一种方法来存储除此之外的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:27:32.740

通常所做的是使用系统的打包工具安装应用程序。但是您也可以编写自己的安装程序脚本。在安装过程中，以root身份运行，可能会创建一个新组，并在/var/lib下创建一个属于该组的新目录。例如，*locate*命令执行以下操作：

```
$ ls -l /usr/bin/locate
-rwx--s--x 1 root locate 42032 Nov 17 19:33 /usr/bin/locate 
```

它是数据目录：

```
drwxr-x--- 2 root locate 4096 Nov 15  2010 /var/lib/slocate 
```

locate 命令使用 setgid 功能将自己的进程组 ID 设置为*locate*，这赋予它读取 /var/lib/slocate 子目录的权限。

在您的情况下，您（您的安装程序）也将设置写入权限，以便应用程序可以代表用户在那里写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:37:19.183

从我收集到的 /var/lib/ 目录是放置东西的正确位置。访问这些目录时，您需要是 root 用户。

您可以尝试使用[http://www.freedesktop.org/wiki/Software/polkit](http://www.freedesktop.org/wiki/Software/polkit)工具包来提升 linux 中的权限。（它是免费软件。）

像[http://www.amug.org/~glguerin/sw/#authkit](http://www.amug.org/~glguerin/sw/#authkit)这样的东西可能对 Mac 有帮助。

在 Linux 上，您还可以使用 gksudo 运行安装部分的例程。或者使用这里提到的命令。[https://stackoverflow.com/a/690491/1790338](https://stackoverflow.com/a/690491/1790338)

希望这会有所帮助。

# ios - 未使用本地化英文启动图像

> ID：13520113
> 
> 赞同：0
> 
> 时间：2012-11-22T21:18:57.977
> 
> 标签：ios, image, localization, splash-screen, launch

不知何故，我似乎无法让我的本地化启动图像工作。在我的项目文件夹的根目录中，我有一个本地化的 Default@2x.png，其中包含英语和荷兰语版本。

不知何故，荷兰语版本在所有情况下都会显示。

使用英语时，我还有其他可以正常工作的本地化文件（Root.strings、Localizable.strings、InfoPlist.strings）。

我查了几个相关的问题，但没有找到答案。尝试将文件全部删除，然后再次添加它们。本地化文件后，我使用英文版的“在 Finder 中显示”将正确的图片添加到正确的文件夹中。

其他答案表明在某个地方还有另一个 Default@2x.png 副本，但我似乎找不到。当我在 Finder 中查看我的项目文件夹时，有些文件夹似乎是递归的（重复自己）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-22T21:42:17.130

启动图像无法本地化。请参阅[应用程序编程指南](http://developer.apple.com/library/ios/ipad/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)：

> 所有启动图像 (...) 必须位于应用程序包目录的顶层。

# css - 奇怪的 div 定位

> ID：13520114
> 
> 赞同：0
> 
> 时间：2012-11-22T21:19:04.857
> 
> 标签：css

我创建了三个我想从左到右出现的 DIV。

```
<div id="middle">
     <div id="middleleft"></div>
     <div id="middleleftopenclose"></div>
     <div id="middleright"></div>
</div> 
```

但是，DIV *middleleftopenclose 一直*出现在左侧，而不是在*middleleft*之后。这是为什么？

```
#middle {
    position: relative;
    height: 100%;
}
#middleleft {
    width: 445px;
    float: left;
}
#middleleftopenclose {
    background-color:#2a2729;
    position: absolute;
    height: 100%;
    width: 15px;
    float: left;
}
#middleright {
    height: 100%;
    margin-left: 460px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:30:24.847

Float doesn't work with `position: absolute.` Try changing it to `position: relative;`

```
#middleleft {
    width: 445px;
    float: left;
    position: relative;
}
#middleleftopenclose {
    background-color:#2a2729;
    position: relative;
    height: 100%;
    width: 15px;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:30:16.477

As mentioned in a comment, you can't use `position: absolute` together with `float`. Changing it to `position: relative` should fix most of it. I created a [fiddle](http://jsfiddle.net/XJ68G/) to visualize it. I added some colours to make it more obvious, and I also set the `#middleleft` to `height: 100%`, otherwise they wouldn't float correctly. I don't know if this applies to your site out of the box.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:20:49.973

删除浮动并使用 display: inline-block;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T21:21:16.180

发生这种情况是因为浏览器无法水平容纳所有 div，即 div 的宽度之和大于页面宽度。尝试更改 div 宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T21:37:11.490

尝试这个

```
#middle { width: 100% }
#middle div { display: inline-block; width: 33%; } 
```

您不需要浮动或相对位置或绝对位置:)

# php - 从 Wordpress 的仪表板屏幕编辑模板内容

> ID：13520119
> 
> 赞同：0
> 
> 时间：2012-11-22T21:19:37.363
> 
> 标签：php, wordpress, wordpress-theming, admin

我想设置一种方法来编辑模板中的内容，形成 wordpress 仪表板或新的管理页面。

诸如在仪表板上或在新的管理页面上创建输入框之类的东西会更新我在模板中硬编码的特定内容。

我正在使用单页网站（长滚动），并希望允许人们从管理页面编辑单独的内容区域。

（执行此操作的现有插件也可以）

谢谢！

# matlab - 在 MATLAB 中预分配后内存使用量增加

> ID：13520124
> 
> 赞同：0
> 
> 时间：2012-11-22T21:19:58.470
> 
> 标签：matlab, memory

这是我正在处理的 MATLAB 脚本的一部分：

```
gens=zeros(28,28,7,3,5,13);
windows=1:13;
for i=windows
    ...
    for iRes=1:5;
        for type=1:10
            for iter=1:3
                gensNew=RENworkedBronzeGenerate(model,type-1,6,rand(28),iterRes(iRes),0.03);
                for k=1:7
                   gens(:,:,k,iter,iRes,i)=gensNew(:,:,k);
                end
            end
        end
    end
end 
```

当然，未包含声明的所有内容都位于其他地方。预分配成功，但是运行一段时间后，我执行第 10 行时内存不足。为什么即使在我预分配之后，我也会在那里耗尽内存？

此外， 的输出`RENworkedBronzeGenerate(...)`是一个 28x28x7 矩阵。

# php - eval() 错误与 eval()'d 错误

> ID：13520126
> 
> 赞同：1
> 
> 时间：2012-11-22T21:20:03.947
> 
> 标签：php

是的。我在谷歌搜索任何答案。

我正在学习php。我正在尝试使用一些具有此 eval 行的 php 代码发送电子邮件。

```
eval("job();"); 
```

但出现错误：

> eval()'d 代码在第 1 行

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:21:44.850

不要使用`eval()`. [这是邪恶的](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)。

假设`job`是一个[函数](http://php.net/manual/en/functions.user-defined.php)，可以`job()`直接调用。

```
job(); 
```

如果`job()`返回一个值，您可以根据需要将其分配给以后使用。

```
$variable = job(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:25:35.657

直接调用函数（如果您知道名称 - 根据您的代码片段判断，您知道）*或者*，如果您不知道需要调用哪个函数（它取决于变量值或其他内容，请尝试使用[call_user_func](http://www.php.net/call_user_func)或类似函数.
还要确保函数与 function_exists 存在[，](http://www.php.net/function_exists)例如

有一大堆函数，内置在 PHP 中，允许您*不*使用 eval ......只需花一些时间浏览文档

# html - 在自己的页面上提交 HTML 表单

> ID：13520127
> 
> 赞同：126
> 
> 时间：2012-11-22T21:20:05.340
> 
> 标签：html, forms, http, url

我想要一个 HTML 表单提交给自己。如何使用该`action`属性？

1.  `<form action="">`
2.  `<form action="#">`
3.  `<form action="some/address">`
4.  `<form>`

哪个更可取？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-05-28T19:39:23.497

在 2013 年，有了所有 HTML5 的东西，你可以省略 'action' 属性来自行提交表单

```
<form> 
```

实际上，[当前 HTML5 草案的表单提交子部分](http://dev.w3.org/html5/spec/Overview.html#attr-fs-action)不允许 action=""（空属性）。这是违反规范的。

从[这个其他堆栈溢出答案](https://stackoverflow.com/questions/1131781/is-it-a-good-practice-to-use-an-empty-url-for-a-html-forms-action-attribute-a)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-04-17T20:02:11.480

使用`?`：

```
<form action="?" method="post"> 
```

它会将用户发送回同一页面。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-22T21:27:04.893

您可以将操作属性留空。表单将自动在同一页面中提交。

```
<form action=""> 
```

根据[w3c 规范](http://w3c.github.io/html/sec-forms.html#element-attrdef-form-action)，action 属性通常必须是非空的有效 url。对于某些可能将操作属性留空的情况，也有解释。

> 元素的动作是元素的formaction 属性的值，如果该元素是一个提交按钮并且具有这样的属性，或者它的表单所有者的action 属性的值，如果它有一个，或者是空字符串。

**所以它们仍然有效并且有效：**

```
<form action="">
<form action="FULL_URL_STRING_OF_CURRENT_PAGE"> 
```

如果您确定您的受众正在使用 html5 浏览器，您甚至可以省略 action 属性：

```
<form> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-09-05T11:59:44.833

如果您使用 php 提交表单，请务必使用：

```
action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" 
```

[为了安全。](http://www.w3schools.com/php/php_form_validation.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T21:23:56.887

您可以在 action 属性上使用同一页面：`action='<yourpage>'`

# jquery - jquery ui Dialog：无法在初始化之前调用对话框上的方法

> ID：13520139
> 
> 赞同：111
> 
> 时间：2012-11-22T21:21:27.837
> 
> 标签：jquery, dialog, jquery-ui-dialog

我在 jquery 1.5 上有一个应用程序，对话框运行良好。虽然我有很多 .live 处理程序，但我将其更改为 .on。为此，我必须更新 jquery（现在是 1.8.3 和 jquerui 1.9.1）。

现在，我得到了：`Error: cannot call methods on dialog prior to initialization; attempted to call method 'close'`

以下是代码：

Javascript

```
var opt = {
        autoOpen: false,
        modal: true,
        width: 550,
        height:650,
        title: 'Details'
};

$(document).ready(function() {
$("#divDialog").dialog(opt);
    $("#divDialog").dialog("open");
... 
```

html代码

```
<div id="divDialog">
<div id="divInDialog"></div>
</div> 
```

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-11-22T21:36:30.130

试试这个

```
$(document).ready(function() {
  $("#divDialog").dialog(opt).dialog("open");
}); 
```

你也可以这样做：

```
var theDialog = $("#divDialog").dialog(opt);
theDialog.dialog("open"); 
```

这是因为对话框没有存储在 中`$('#divDialog')`，而是存储在一个动态创建并由`.dialog(opt)`函数返回的新 div 中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-19T22:44:20.020

如果你不能升级 jQuery 并且你得到：

```
Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'close' 
```

您可以像这样解决它：

```
$(selector).closest('.ui-dialog-content').dialog('close'); 
```

或者，如果您控制视图并且知道整个页面上根本不应该使用其他对话框，您可以这样做：

```
$('.ui-dialog-content').dialog('close'); 
```

`closest`如果使用会导致性能问题，我只会建议这样做。可能有其他方法可以解决它，而无需对所有对话框进行全局关闭。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-12T20:51:22.130

当我只更新 jquery 库而不并行更新 jqueryui 库时出现此错误。我使用 jquery 1.8.3 和 jqueryui 1.9.0。但是，当我将 jquery 1.8.3 更新到 1.9.1 时，我得到了上述错误。当我注释掉有问题的`.close`方法行时，它会抛出一个关于找不到的错误`.browser`在 jquery 1.8.3 中已弃用并从 jquery 1.9.1 中删除的 jquery 库中。所以基本上，jquery 1.9.1 库与 jquery ui 1.9.0 库不兼容，尽管 jquery ui 下载页面说它适用于 jquery 1.6+。本质上，在尝试使用两者的不同版本时存在未报告的错误。如果您使用与 jqueryui 下载捆绑在一起的 jquery 版本，我相信您会没事的，但是当您开始使用不同的版本时，您就会偏离常规并得到这样的错误。所以，总而言之，这个错误来自不匹配的版本（无论如何在我的情况下）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-07T11:44:53.580

所以你用这个：

```
var theDialog = $("#divDialog").dialog(opt);
theDialog.dialog("open"); 
```

如果在对话框中打开 MVC 部分视图，则可以在索引中创建隐藏按钮和 JQUERY 点击事件：

```
$("#YourButton").click(function()
{
   theDialog.dialog("open");
   OR
   theDialog.dialog("close");
}); 
```

然后在局部视图 html 中调用按钮触发单击，例如：

```
$("#YouButton").trigger("click") 
```

拜拜。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-07-04T05:20:14.207

新的 jQuery UI 版本将不允许您在未初始化的对话框上调用 UI 方法。作为一种解决方法，您可以使用以下检查来查看对话框是否处于活动状态。

```
if (modalDialogObj.hasClass('ui-dialog-content')) {
    // call UI methods like modalDialogObj.dialog('isOpen')
} else {
    // it is not initialized yet
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-11T13:40:16.453

如果想在Dialog初始化或者页面准备好后立即打开Dialog，也可以在dialog的options对象中设置参数`autoOpen`为：`true`

```
var opt = {
        autoOpen: true,
        modal: true,
        width: 550,
        height:650,
        title: 'Details'
}; 
```

因此，您不必调用 `$("#divDialog").dialog("open");

初始化对话框对象时，对话框会自动打开。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-01T00:44:46.713

我的情况不同，由于“ **this** ”的范围而失败：

```
//this fails:
$("#My-Dialog").dialog({
  ...
  close: ()=>{
    $(this).dialog("close");
  }
});

//this works:
$("#My-Dialog").dialog({
  ...
  close: function(){
    $(this).dialog("close");
  }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-15T17:03:29.673

这也是一些解决方法：

```
$("div[aria-describedby='divDialog'] .ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-icon-only.ui-dialog-titlebar-close").click(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-31T15:28:29.520

我收到此错误消息是因为我在部分视图而不是父视图上有 div 标签

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-14T17:36:49.933

我只需将 ScriptManager 添加到页面中。问题解决了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-12T15:31:26.557

就我而言，问题是我`$("#divDialog").removeData();`在对话框中重置表单数据时调用了它。

这导致我清除了一个名为的数据结构`uiDialog`，这意味着对话框必须重新初始化。

我`.removeData()`用更具体的删除替换，一切又开始工作了。

# assembly - 汇编中的异或加密，传输问题

> ID：13520140
> 
> 赞同：1
> 
> 时间：2012-11-22T21:21:41.213
> 
> 标签：assembly, ascii, xor

所以我在两台不同的计算机之间传输 XOR 加密但是我遇到了一个大问题，当它传输一个 ASCII 低于 30 的字符时，它无法传输，因为下面的这些字符与流控制混淆。我尝试将字符加 30 以尝试避免这种情况，但仍然失败。

基本上，当发送低于 ASCII 30 的字符时，传输将完全停止。

代码非常简单，如下 -

```
 mov al, character
    xor al, password
    mov character, al 
```

基本上，变量字符和密码的特定组合会导致此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:36:14.640

32以下的字符通常用作控制码，不透明传输。我猜你不使用8位透明通道。

我建议使用像 TCP 这样的 8 位透明通道进行传输。只是打字是行不通的。如果这不是一个选项，请使用 base-64 编码之类的东西，它将 3 个字节映射为 4 个可打印且小于 128 的字符。当然，任何其他编码也可以。

顺便说一句：您的“加密”非常弱到不存在的程度。考虑使用易于理解的算法，如 AES 或任何其他算法。有很好的和快速的库可用。

# ruby-on-rails - ["Yes", true]:Array 的未定义方法“名称”

> ID：13520144
> 
> 赞同：4
> 
> 时间：2012-11-22T21:21:47.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我实际不知道 Array ["Yes",true] 来自哪里。我有两个这样的模型：

```
GeneralExam has_many topic_questions

TopicQuestion belongs to general_exam, belongs_to topic 
```

在 TopicQuestion 中，我有列：general_exam_id、topic_id、number_question，用于存储普通考试中每个主题的数字问题。

我构建了一个嵌套表单来创建新的普通考试，在表单上我构建了一个动态选择，当用户从下拉列表中选择一门课程时，我还有其他下拉列表来显示用户选择的课程主题。

这是我用于动态选择的 javascript 代码：

```
<% content_for :head do %>
  <script type="text/javascript">
    $(document).ready(function() {
      $('#general_exam_course_id').change(function () {
        $.ajax({
          type: "POST",
          url: "<%= update_topics_general_exams_path %>",
          data: { course_id: $('#general_exam_course_id').val() },
          dataType: "script"
        });
      });
    </script>
<% end %> 
```

`#general_exam_course_id`是选择课程的下拉列表的**ID 。**是我在一般考试控制器中采取行动的`update_topics_general_exams_path`路线，这是我的行动：`update``update`

```
 def update_topics
    @course = Course.find(params[:course_id])
    @topics = @course.topics
  end 
```

我还有一个`update_topics.js.erb`：

```
$('div#topic_questions select').html("<%= j options_from_collection_for_select(@topics, 'id', 'name') %>"); 
```

中的下拉列表将从操作中`div#topic_questions` 获得`@topics`价值`update_topics`（我认为是这样）并显示它。当我创建新的普通考试时，没关系。但是当我按下`Edit`链接时，它向我显示了一个错误，我不知道它为什么以及它来自哪里：

```
NoMethodError in General_exams#edit
undefined method `name' for ["Yes", true]:Array

Extracted source (around line #3):

1: <div class="row">
2:  <div class="span6"><%= remove_child_link "Remove below topic", f %></div><br><br>
3:  <div class="span3"><%= f.association :topic, collection: @topics, label_method: :name, value_method: :id, prompt: "Choose a topic", label: false %></div>
4:  <%= f.input :number_question, placeholder: 'Number of questions', label: false, style: 'display: inline' %>
5: </div> 
```

我的`edit`动作只有：`@general_exam = GeneralExam.find(params[:id])`。我不知道为什么`topic`普通考试的关联字段显示一个数组[“是”，真]。我没有，在任何地方都没有定义它，为什么我编辑普通考试时会出现？

**更新**

如果我删除`label_method: :name, value_method: :id`：

```
<%= f.association :topic, collection: @topics, label_method: :name, value_method: :id, prompt: "Choose a topic", label: false %> 
```

该页面没有错误，但下拉列表`Yes, No`在选择中具有价值，而不是我为考试创建的主题名称。表单可以获取每个主题的编号问题，但不能获取主题名称。

当我创建：

[![图片](../Images/1a5660f6fa11d153d99887016fb6c979.png)](https://i.stack.imgur.com/t9SQ9.png)

当我编辑时：

[![图片](../Images/003d8cf32f821ef1a016edd23ad4d970.png)](https://i.stack.imgur.com/lCd0q.png)

我发现这个`config/locales/simple_form.en.yml`：

```
en:
  simple_form:
    "yes": 'Yes'
    "no": 'No' 
```

这是一个问题吗？

**更新：不要在新操作中传递@topics，但它仍然在新页面上当课程甚至尚未选择时**

我的新动作：

```
 def new
    @general_exam = GeneralExam.new
    5.times { @general_exam.topic_questions.build }
    #@topics = Topic.all
  end 
```

与上面的提取源一样，我在新的代码中有以下代码，也可以编辑（使用相同的形式）：

```
<%= f.association :topic, collection: @topics, label_method: :name, value_method: :id, prompt: "Choose a topic", label: false %> 
```

所以我不通过@topics，但是当我转到新页面时，主题的下拉列表仍然显示`Yes, No`值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:22:55.590

好的，我们的评论时间结束了:)（系统建议移动到聊天室）。解决方案似乎是在 simple_form 的关联中内联传递集合：

```
<%= f.association :topic, collection: @topics, label_method: :name, value_method: :id, prompt: "Choose a topic", label: false %> 
```

变成：

```
<%= f.association :topic, collection: Topic.limit(1), prompt: "Choose a topic", label: false %> 
```

我认为它现在可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T16:21:35.557

通过将查询分配给您的视图并将其传递给您的视图，您得到了正确的想法`@topics`......但是，您将其置于错误的操作中，而不是将它们传递给正确的视图：

```
def update_topics
  @course = Course.find(params[:course_id])
  @topics = @course.topics
end 
```

-

## 你应该做什么：

您的更新操作没有 NO `update view`，因此，您必须放置以下 2 行：

```
@course = Course.find(params[:course_id])
@topics = @course.topics 
```

在你的`new`行动和你的`edit`行动中

然后你可以继续使用你原来的 simple_form 代码，它是/原来是正确的：

```
<%= f.association :topic, collection: @topics, 
                  label_method: :name, value_method: :id, 
                  prompt: "Choose a topic", label: false 
%> 
```

或者，您可以*跳过*控制器中的@topics，只需将以下内容放入您的视图中：

**新**观点

```
<%= f.association :topic, collection: Topics.all, 
                  label_method: :name, value_method: :id, 
                  prompt: "Choose a topic", label: false 
%> 
```

**编辑**视图

```
<%= f.association :topic, collection: Course.find(params[:course_id]).topics, 
                  label_method: :name, value_method: :id, 
                  prompt: "Choose a topic", label: false 
%> 
```

*注意*区别：

*   我认为在您`new`看来，您希望用户看到所有可能的主题。
*   在您`edit`看来，您只是希望他们看到本课程的主题，对吗？

-

## 为什么会这样：

1.  由于您之前没有传递任何集合，因此没有“名称”方法/列供 simple_form 用作下拉列表中的标签/显示值，因此您收到有关的错误消息`Array ["Yes",true]`

2.  如果/当您删除`label_method: :name, value_method: :id,`选项时，您可能会在下拉列表中看到与预期行一样多的选项，但您会看到主题对象列表而不是课程主题名称列表（类似这样）：

    > ```
    > #<Topic::xxxx>
    > #<Topic::xxxx>
    > ...
    > #<Topic::xxxx> 
    > ```

3.  而且，当您不提供集合时，您只会获得 2 个是/否值，这是您找到的配置文件 ( `config/locales/simple_form.en.yml`) 中的 simple_form 默认值。

4.  所以，正如您现在可能已经猜到的那样，这就是您最终使用的原因...

    > ```
    > <%= f.association :topic, collection: 
    >                   Topic.limit(1), 
    >                   prompt: "Choose a topic", 
    >                   label: false 
    > %> 
    > ```

    ...有点“工作”作为一种解决方法——因为它***确实***执行了一个正确的查询并将其提供给 simple_form，但它将结果限制为表中的**第一个*主题（没有任何排序/排序)

至少，这是我学到/经历的。！

# php - 以秒为单位的 PHP 日期时间差缺少一小时

> ID：13520146
> 
> 赞同：2
> 
> 时间：2012-11-22T21:22:03.233
> 
> 标签：php, datediff

> **可能重复：**
> [一小时的差异，但仅限于某些日期](https://stackoverflow.com/questions/2233666/one-hour-difference-but-only-for-some-dates)

为什么：

```
strtotime('2012-11-01 00:00:00') - strtotime('2012-10-01 00:00:00') 
```

正在返回：

```
2674800 
```

当正确的值为：

```
2678400 
```

少了一小时。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T21:23:23.507

因为您的语言环境（由`date.timezone`php.ini 中定义）可能在 10 月的某个时间经历了时间更改，原因是夏令时。

# symfony - Silex：带有可选参数的路由不起作用

> ID：13520151
> 
> 赞同：3
> 
> 时间：2012-11-22T21:22:38.757
> 
> 标签：symfony, routing, silex

我的路由有三个参数，userid 始终是必需的，a 和 b 是可选参数。可以给出 a 或 (a 和 b) 或 (既不是 a 也不是 b)：

```
$app->get('/show/{userid}/{a}/{b}/', function($userid, $a,$b) use($app) {
       ...
})->value('a', 'defaultValueA')->value('b', 'defaultValueB'); 
```

所以我想匹配以下网址：

```
show/12345
show/12345/paramA
show/12345/paramA/paramB 
```

我的代码仅适用于给出所有参数的最后一个版本。怎么了？

**更新：**

我开始了一个全新的项目并再次测试了我的方法。工作。我将我的 .htaccess 复制到了全新的项目中。仍然有效。所以我的（非常笼统的）问题是：还有什么会影响 Silex 项目中的路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:32:39.327

我在 Silex 中使用翻译服务，并且意外地从[http://silex.sensiolabs.org/doc/providers/translation.html](http://silex.sensiolabs.org/doc/providers/translation.html)的使用示例中复制了太多内容到我的代码中。所以我上面的路由定义被设置中前面定义的这个定义捕获了。

```
$app->get('/{_locale}/{message}/{name}', function ($message, $name) use ($app) {
    return $app['translator']->trans($message, array('%name%' => $name)); }); 
```

# c++ - 如何访问 SFML 中的形状位置？

> ID：13520152
> 
> 赞同：3
> 
> 时间：2012-11-22T21:22:50.217
> 
> 标签：c++, drawing, sfml, shapes

我正在使用 SFML 在 C++ 中绘图。在我尝试访问我在屏幕上绘制的圆圈的位置之前，一切都很顺利。代码：

```
sf::Shape RootCircle = sf::Shape::Circle(300, 30, 30, sf::Color::Blue);
App.Draw(RootCircle);
cout << "X: " <<  RootCircle.GetPosition().x << endl;
cout << "Y: " <<  RootCircle.GetPosition().y << endl; 
```

它包括告诉我 x 和 y 位置设置为 0。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:34:15.537

通过调用 sf::Shape::Circle() 构造函数，只有相对于位置的偏移量设置为 300,30。要实际设置圆的位置，您需要调用：

```
rootCircle.SetPosition(300.0f, 30.0f); 
```

请注意，通过将位置设置为 300,30，Circle() 构造函数中指定的任何偏移量都将相对于指定的实际位置。

# c# - 如何创建文本文件，并用文本框或变量命名

> ID：13520157
> 
> 赞同：3
> 
> 时间：2012-11-22T21:23:36.063
> 
> 标签：c#, file, creation

嗨，我对 c# 很陌生，所以对此表示歉意。

我试图创建一个文本文件来保存客户的详细信息。但我想用姓氏命名文本文件。即 myfile.txt。

我确定我很接近，但是在将 surname.text 更改为变量然后使其成为我创建的新文件的名称时缺少一些东西。

我在问题区域周围放置了 2 **。

```
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        if ((tb_firstname.Text == "") || (tb_surname.Text == "") || (tb_postcode.Text == ""))
        {
            MessageBox.Show("Missing values from textboxes!");
        }
        else if (
               ****string myfile.txt = (tb_surname.Text);
               File.Exists("myfile.txt"));****
        {
                if (MessageBox.Show("Warning: file already exists. " + 
                                    "Contents will be replaced - " + 
                                     "do you want to continue?", "File Demo",
                                     MessageBoxButtons.YesNo, MessageBoxIcon.Question,
                                     MessageBoxDefaultButton.Button1,
                                     MessageBoxOptions.DefaultDesktopOnly) == 
                    DialogResult.Yes)
                {
                    //write lines of text to file
                    StreamWriter outputStream = File.CreateText(myfile.txt);
                    outputStream.WriteLine(tb_firstname.Text);
                    outputStream.WriteLine(tb_surname.Text);
                    outputStream.WriteLine(tb_surname.Text);
                    outputStream.Close();
                    MessageBox.Show("Text written to file successfully!");
                    this.Close();
                }
                else
                {
                    MessageBox.Show("Action cancelled existing file contents not replaced!");
                    this.Close();
                }
            }
            else
            {
                //write lines of text to file
                StreamWriter outputStream = File.CreateText("myFile.txt");
                outputStream.WriteLine(tb_firstname.Text);
                outputStream.WriteLine(tb_surname.Text);
                outputStream.WriteLine(tb_postcode.Text);
                outputStream.Close();
                MessageBox.Show("Text written to file successfully!");
                this.Close();
            }
        }
        catch (Exception problem)
        {
            MessageBox.Show("Program has caused an error - " + problem.ToString());
        }
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:30:49.287

I believe you are trying to save the surname as part of the file name. You can generate the filename and check if it exists with the code below:

First generate the filename:

```
string fileName = string.Format("{0}File.txt", tb_surname.Text); 
```

And then check it using the variable:

```
 File.Exists(fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:27:27.870

您正在创建一个`myfile.txt`每次调用的文件

```
StreamWriter outputStream = File.CreateText("myFile.txt"); 
```

那是您正在使用的字符串文字。

你有这行：

```
string myfile.txt = (tb_surname.Text) 
```

它将文本框的内容读入一个名为`myfile.txt`. 然后，您需要在文件创建代码中使用*它：*

```
StreamWriter outputStream = File.CreateText(myFile.txt); 
```

请注意，没有引号。

如果文件已经存在，这将覆盖文件 - 如果要追加，则需要使用以下方法：

```
StreamWriter outputStream = File.AppendText(myFile.txt); 
```

# ruby - Ruby 将每个单词的首字母大写

> ID：13520162
> 
> 赞同：175
> 
> 时间：2012-11-22T21:23:59.107
> 
> 标签：ruby, string

我需要将每个单词的第一个字符变成大写，其余的变成小写......

```
manufacturer.MFA_BRAND.first.upcase 
```

只是设置第一个字母大写，但我需要这个：

```
ALFA ROMEO => Alfa Romeo
AUDI => Audi
BMW => Bmw
ONETWO THREE FOUR => Onetwo Three Four 
```

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2013-02-21T15:11:51.043

在 Rails 中：

```
"kirk douglas".titleize => "Kirk Douglas"
#this also works for 'kirk_douglas' 
```

不带导轨：

```
"kirk douglas".split(/ |\_/).map(&:capitalize).join(" ")

#OBJECT IT OUT
def titleize(str)
  str.split(/ |\_/).map(&:capitalize).join(" ")
end

#OR MONKEY PATCH IT
class String  
  def titleize
    self.split(/ |\_/).map(&:capitalize).join(" ")
  end
end 
```

w/o Rails（加载 rails 的 ActiveSupport 以将 #titleize 方法修补到`String`）

```
require 'active_support/core_ext'
"kirk douglas".titleize #=> "Kirk Douglas" 
```

## （一些）由#titleize 处理的字符串用例

*   “柯克道格拉斯”
*   “柯克道格拉斯”
*   “柯克道格拉斯”
*   “柯克道格拉斯”
*   “柯克道格拉斯”

## #titleize 陷阱

Rails`titleize`会将破折号和下划线之类的内容转换为空格，并可能产生其他意想不到的结果，尤其是在@JamesMcMahon 指出的区分大小写的情况下：

```
"hEy lOok".titleize #=> "H Ey Lo Ok" 
```

因为它旨在处理驼峰式代码，例如：

```
"kirkDouglas".titleize #=> "Kirk Douglas" 
```

要处理这种边缘情况，您可以`#downcase`在运行#titleize 之前先清理字符串。当然，如果您这样做，您将消除任何驼峰式分词：

```
"kirkDouglas".downcase.titleize #=> "Kirkdouglas" 
```

* * *

## 回答 #2

> 赞同：226
> 
> 时间：2012-11-22T21:29:03.520

尝试这个：

```
puts 'one TWO three foUR'.split.map(&:capitalize).join(' ')

#=> One Two Three Four 
```

或者

```
puts 'one TWO three foUR'.split.map(&:capitalize)*' ' 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-05-11T06:15:33.723

`"hello world".titleize`应该输出“Hello World”。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-12-16T12:40:06.177

另一种选择是使用正则表达式和 gsub，它需要一个块：

```
'one TWO three foUR'.gsub(/\w+/, &:capitalize) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-23T03:21:25.990

```
"hello world".split.each{|i| i.capitalize!}.join(' ') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-22T21:25:50.543

查看 String#capitalize 方法。

[http://www.ruby-doc.org/core-1.9.3/String.html#method-i-capitalize](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-capitalize)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-19T10:57:13.707

如果您尝试将数组中每个单词的第一个字母大写，您可以简单地输入：

array_name.map(&:大写)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-08T22:43:13.867

我用它来解决类似的问题：

```
'catherine mc-nulty joséphina'.capitalize.gsub(/(\s+\w)/) { |stuff| stuff.upcase } 
```

这可以处理我在尝试之前的答案时看到的以下奇怪情况：

*   非单词字符，例如 -
*   é 等名称中常见的重音字符
*   字符串中间的大写字符

# c++ - QMenu 无模式/异步

> ID：13520163
> 
> 赞同：4
> 
> 时间：2012-11-22T21:24:01.367
> 
> 标签：c++, qt

可以使用 popup() 或 exec() 创建 QMenu。前者异步创建它，而后者阻塞。但这在您使用 QMenuBar (AFAIK) 时没有用。

我的问题是，是否可以告诉 QMenuBar 只弹出异步/无模式 QMenus？我不确定这些条款是否正确，但我想要的只是一个菜单，当用户单击它时不会阻止应用程序的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T20:43:52.050

您正在寻找的解决方法是将无法忍受这种“滥用”的对象移动到单独的 QThread。如果你有一个使用信号和槽的干净接口，这很简单。只需使用`moveToThread()`，你就完成了。您无需担心其他任何事情。

# iphone - 如何保存图像上的点击次数？

> ID：13520166
> 
> 赞同：1
> 
> 时间：2012-11-22T21:24:08.920
> 
> 标签：iphone, touchesbegan

我正在尝试为儿童制作一个关于如何省钱的应用程序。作为一个视觉效果，一开始，我有一个空罐子 (UIIMage)，当点击它时，图像会变成一个装满硬币的罐子（模拟存款/储蓄），罐子下面的标签会说一些东西——比如祝贺，进行另一笔存款。当用户点击罐子最多 5 次时，会添加更多硬币，直到在第 5 次点击时罐子被装满，并且罐子下方的标签上写着，看你的钱增长。

请注意，点击 1 可能在今天发生，点击 2 可能在其他时间发生，点击三，一周后，等等。

我使用 touchesBegan 作为 tapCount（带开关）来说明这一点。UIImageView 中图像的点击和更改效果很好（现在以 0.5 秒的间隔进行演示）。

(1) 我想知道我这样做是否正确 - 动画效果很好 - 但是当用户离开应用程序并再次返回点击时，它会重置为点击 1at。是否可以保存最后一个操作，以便当孩子退出并返回应用程序时，他/她到达与他/她离开时相同的状态。我尝试了 NSUserdefault 但这似乎不起作用。我什至想知道是否可以从 touchesBegan （带开关）保存数据。

任何想法都非常感谢。谢谢。

这是动画的代码（为简洁起见缩短为三个水龙头）：

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    NSUInteger tapCount = [touch tapCount];

    switch (tapCount) {
    case 1:
        [self performSelector:@selector(tappedOnce) withObject:nil afterDelay:0.5];
        break;

    case 2:
        [NSObject cancelPreviousPerformRequestsWithTarget:self          selector:@selector(tappedOnce) object:nil];
        [self performSelector:@selector(tappedTwice) withObject:nil afterDelay:0.5];
        break;

    case 3:
        [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(tappedTwice) object:nil];
        [self performSelector:@selector(tappedThreeTimes) withObject:nil afterDelay:0.5];
        break;

    default:
        break;

} 
```

}

```
 - (void)tappedOnce {

  UIImageView *imageView = [[UIImageView alloc] initWithFrame:
                          CGRectMake(95, 93, 142, 205)];
  imageView.contentMode = UIViewContentModeBottom;
imageView.image = [UIImage imageNamed:@"bucketb.png"];
[self.view addSubview:imageView];
  instructionLabel.text=@"Congratulations, you have deposited money.  Deposit some more.";
 }

 - (void)tappedTwice {

 UIImageView *imageView = [[UIImageView alloc] initWithFrame:
                           CGRectMake(95, 93, 142, 205)];
 imageView.contentMode = UIViewContentModeBottom;
imageView.image = [UIImage imageNamed:@"bucketc.png"];
[self.view addSubview:imageView];
    instructionLabel.text=@"Congratulations, you have added more money to your  account.";
  }

 - (void)tappedThreeTimes {

 UIImageView *imageView = [[UIImageView alloc] initWithFrame:
                         CGRectMake(95, 93, 142, 205)];
imageView.contentMode = UIViewContentModeBottom;
 imageView.image = [UIImage imageNamed:@"bucketd.png"];
[self.view addSubview:imageView];
 instructionLabel.text=@"Watch your money grow.";
} 
```

NSUserdefault（在 appdelegate 中）：

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
{

NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

[userDefaults setInteger:5 forKey:@"lastTouch"];

[userDefaults synchronize];

 }

 - (void)applicationWillEnterForeground:(UIApplication *)application
 {

NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

int temp = [userDefaults integerForKey:@"lastTouch"];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:44:36.360

使用触摸事件的点击计数是计算此类问题的点击次数的错误方法：

*   大概您希望每次点击计数都增加，而不管点击之间的暂停

*   应用退出/重新启动后，您会丢失点击计数的状态

相反，只需担心检测到单击，而是将当前的点击计数存储为类属性。每次点击时增加此值。您可以使用`NSUserDefaults`在应用程序后台/前台存储和恢复此类属性。

# javascript - 如何将我自己创建的 jQuery 函数用于多个项目？

> ID：13520169
> 
> 赞同：0
> 
> 时间：2012-11-22T21:24:22.583
> 
> 标签：javascript, jquery

请帮我将我的功能添加到所有 div 中。我想使用“每个”，但不知道如何使用。

我需要 2 条警报消息，但是当尝试使用 $('div').test() 函数时，我只成为第一个 div。有了它仍然有效。

```
<html>
    <head>

        <style type="text/css">
            div {
                width:100px;
                height:100px;
                background: yellow;
                float: left;
                margin: 20px;
            }
        </style>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    </head>

    <body>

        <div id="a"></div>
        <div id="b"></div>

        <script type="text/javascript">

            (function( $ ){

                $.fn.test = function() {

                    alert(this.attr('id'));

                };

            })( jQuery );

            //work
            $('#a').test();

            // not work
            //$('div').test();

        </script>
    </body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:30:22.000

Change your alert line to:

```
return this.each(function(){ alert(this.id); }); 
```

See the docs for jQuery [each](http://api.jquery.com/jQuery.each/).

Here is a [JSFiddle](http://jsfiddle.net/pa95N/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:31:14.223

[http://jsfiddle.net/bu952/1/](http://jsfiddle.net/bu952/1/)

```
(function( $ ){

  $.fn.test = function() {

    return this.each(function() {
      alert(this.id);
    });

  };
})( jQuery );

$('div').test(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:30:44.860

Your first example...

```
$('#a').test(); 
```

... works because there is only one element with the id of "a". However, your second example...

```
$("div").test(); 
```

... doesn't because it is selecting *all* of the divs on the page.

You will need something like this to support both possibilities:

```
(function($){
    $.fn.test = function() {
        // this is now all selected elements.
        // Loop through each selected element.
        $(this).each(function() {
            // this is now the element being looped.
            alert($(this).attr('id'));
        });
    };
})(jQuery); 
```

jsFiddle: [http://jsfiddle.net/2Ejux/](http://jsfiddle.net/2Ejux/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:47:29.007

你得到的答案对你的案子有用。如果您打算编写插件，我建议您阅读这些。使用任何插件模式都会阻止您发布问题。

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring) - 它有一些提示和插件的基本结构

[http://stefangabos.ro/jquery/jquery-plugin-boilerplate-oop/](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-oop/) - 全能插件结构

[http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/) - 上面的旧版本

# actionscript-3 - 如何在 as3 中加载本地目录

> ID：13520171
> 
> 赞同：0
> 
> 时间：2012-11-22T21:24:47.157
> 
> 标签：actionscript-3, apache-flex, air

我想在 actionscript 中加载一个目录。为此，我使用 File 类，但遗憾的是它不起作用。

这就是我所做的。首先，我使用以下代码在 applicationStorageDirectory 中创建了目录：

```
var root:File = File.applicationStorageDirectory.resolvePath(UIDUtil.createUID());
root.createDirectory(); 
```

之后，我调度一个事件，以便应用程序将一些文件复制到该文件夹​​中。为此，我使用 File.copyToAsync 方法（有效，所以这不是问题）。当所有文件都复制到该目录时，我尝试再次使用 File 调用加载该目录。我想这样做的原因是，我需要将内容/数据作为字节数组。File 类的 data 属性只有在之前调用 load 方法成功时才会设置。

由于该目录位于应用程序存储目录中（文件对象的 url 属性具有以下内容：app-storage:/FF011DBC-2E92-46A8-D5F8-29FE1DD8FA7A）我认为只需调用加载方法即可。我错了......虽然该方法的文档说我可以在应用程序在 AIR 中运行并且要加载的文件在应用程序沙箱内时调用该方法，但我收到以下错误：

```
Error #2044: Unhandled IOErrorEvent:. text=Error #2038: File I/O Error.
at flash.filesystem::File/resolveComponents()
at flash.filesystem::File/resolvePath()
    ... 
```

你有什么想法可能是错的吗？甚至可以使用 File 类加载目录吗？还是因为文件对象中的 isDirectory 标志设置为 true 而发生该错误？

亲切的问候马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:00:21.243

我相信 a `File`，当指向一个目录时，不包含其中包含的文件的数据。您必须使用`File.getDirectoryListing()`循环遍历文件夹中的所有文件，并将它们的字节分别附加到 ZIP 存档中。不要忘记检查您是否遇到子目录...

您可以查看此[链接](http://pradeek.blogspot.ca/2009/05/creating-zip-files-with-adobe-air-with.html)以获取有关如何执行此操作的示例。

# python - 在 Heroku 上运行 Python CGI 应用程序

> ID：13520175
> 
> 赞同：11
> 
> 时间：2012-11-22T21:25:24.080
> 
> 标签：python, heroku, cgi

我制作了一个使用 Python CGI 脚本的简单应用程序。我有一个可用的本地版本（适用于 lighttpd），但现在我想将它上传到 Heroku。该应用程序由 2 或 3 个脚本组成，它们对文件进行操作并将信息打印回浏览器，因此我认为除了 CGI 之外我不需要任何模块。

但是[Heroku 文档](https://devcenter.heroku.com/articles/python)只解释了如何使用精美的 Web 框架上传 Python 应用程序，而我没有使用其中任何一个。

我想知道是否可以在 Heroku 上运行 CGI 脚本，如果可以，该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T22:56:12.820

Heroku Cedar 以自托管 Web 应用程序为中心，因此您需要能够将应用程序捆绑在一起并将其作为单个命令运行。

我认为最简单的方法是将您的应用程序移植到 Flask。它不是很复杂，特别是如果它只有 2 或 3 个脚本。

另一种选择（取决于您的性能要求）是使用Python 标准库和[Python buildpack中的简单](https://github.com/heroku/heroku-buildpack-python)[CGI 服务器](http://docs.python.org/3/library/http.server#http.server.CGIHTTPRequestHandler)。我认为您需要将脚本捆绑在 ./cgi-bin 目录中并使用以下命令启动服务器（在 procfile 中）：

```
 web: bin/python -m CGIHTTPServer $PORT 
```

最复杂的方法是将 lighttpd 和你的脚本捆绑在一起，然后编写一个 shell 脚本来启动它。您必须确保您编译的二进制文件与 Heroku 兼容。我会以[PHP buildpack](https://github.com/heroku/heroku-buildpack-php)为起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T02:26:19.867

我向 Heroku 支持人员询问了我尝试在 Heroku 平台上提供的 cgi 应用程序，以下是回复：

你好，

不幸的是，我们不支持 CGI 风格的应用程序，只支持纯 Python 的应用程序。您可能会更幸运地使用 Python CGIHTTPServer 模块，但如果它不适合您的需求，您可能会不走运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-31T05:02:19.550

要添加到最佳答案，对于 Python 3，中的命令`Procfile`应该是这个。

```
web: python -m http.server --cgi $PORT 
```

# erlang - 为什么在 couchdb 中创建文档时会导致这个错误的 utf8 字符错误？

> ID：13520178
> 
> 赞同：1
> 
> 时间：2012-11-22T21:25:43.803
> 
> 标签：erlang, couchdb

在 couchdb 中创建文档会产生以下错误，

```
12> ADoc.
[{<<"Adress">>,<<"Hjalmar Brantingsgatan 7 C">>},
 {<<"District">>,<<"Brämaregården">>},
 {<<"Rent">>,3964},
 {<<"Rooms">>,2},
 {<<"Area">>,0}]
13> IDoc.
[{<<"Adress">>,<<"Segeparksgatan 2A">>},
 {<<"District">>,<<"Kirseberg">>},
 {<<"Rent">>,9701},
 {<<"Rooms">>,3},
 {<<"Area">>,83}]
14> erlang_couchdb:create_document({"127.0.0.1", 5984}, "proto_v1", IDoc).
{json,{struct,[{<<"ok">>,true},
           {<<"id">>,<<"c6d96b5f923f50bfb9263638d4167b1e">>},
           {<<"rev">>,<<"1-0d17a3416d50129328f632fd5cfa1d90">>}]}}
15> erlang_couchdb:create_document({"127.0.0.1", 5984}, "proto_v1", ADoc).
** exception exit: {ucs,{bad_utf8_character_code}}
     in function  xmerl_ucs:from_utf8/1 (xmerl_ucs.erl, line 185)
     in call from mochijson2:json_encode_string/2 (/Users/admin/AlphaGroup/src/mochijson2.erl, line 200)
 in call from mochijson2:'-json_encode_proplist/2-fun-0-'/3 (/Users/admin/AlphaGroup/src/mochijson2.erl, line 181)
 in call from lists:foldl/3 (lists.erl, line 1197)
 in call from mochijson2:json_encode_proplist/2 (/Users/admin/AlphaGroup/src/mochijson2.erl, line 184)
 in call from erlang_couchdb:create_document/3 (/Users/admin/AlphaGroup/src/erlang_couchdb.erl, line 256) 
```

以上两个文档中的一个可以在 couchdb 中毫无问题地创建（IDoc）。

任何人都可以帮助我找出造成它的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:07:51.570

我认为问题在于<<"Brämaregården">>。需要先将 unicode 转换为二进制。示例在以下链接中。

[unicode 讨论](https://stackoverflow.com/questions/10596193/erlang-and-binary-with-cyrillic%20unicode)。核心功能是[unicode](http://www.erlang.org/doc/man/unicode.html "erlang unicode 模块")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:37:13.630

在 Erlang 代码中输入非 ASCII 字符很麻烦，尤其是因为它在 shell 中的工作方式与在已编译的 Erlang 代码中的工作方式不同。

尝试将二进制显式输入为 UTF-8：

```
<<"Br", 16#c3, 16#a4, "mareg", 16#c3, 16#a5, "rden">> 
```

也就是说，“ä”由 UTF-8 中的字节 C3 A4 表示，“å”由 C3 A5 表示。有很多方法可以找到这些代码；快速搜索出现了[这张表](http://www.utf8-chartable.de/)。

通常你会从你的代码之外的某个地方得到输入，例如从一个文件中读取，输入一个网络表单等，然后你就不会遇到这个问题了。

# entity-framework-4 - 实体框架 4.1 自引用

> ID：13520180
> 
> 赞同：0
> 
> 时间：2012-11-22T21:25:45.297
> 
> 标签：entity-framework-4

给定一个 POCO 产品类：

```
public class Product {

    public int ProductId {get;set;}
    public string Name {get;set;}

} 
```

如何使用 EF 启用相关产品？

基本上，我需要允许产品所有者添加用户可能也感兴趣的产品。

我已尝试在[此问题](https://stackoverflow.com/questions/6383576/entity-framework-4-1-code-first-self-referencing-one-to-many-and-many-to-many-as)中调整答案，但无法使其正常工作。

我想我需要一个链接表，因为一个产品可以有很多用户可能感兴趣的产品。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:01:26.873

Well, i must have been doing something wrong earlier. I've re-visited option 1 from [this answer](https://stackoverflow.com/questions/6383576/entity-framework-4-1-code-first-self-referencing-one-to-many-and-many-to-many-as) and its done exactly what i needed.

# java - android中实现内部列表的最佳实践

> ID：13520183
> 
> 赞同：1
> 
> 时间：2012-11-22T21:26:17.360
> 
> 标签：java, android

我是android开发的新手，所以我想就解决下一个问题征求意见。

我有 2 个 SQlite 表：`cards`和`meanings`. 每张卡片都有一个或几个含义。我的 android 应用程序应该显示具有实际含义的卡片列表。我应该实现下一个操作：

*   添加具有含义的新卡片
*   为现有卡片添加含义
*   读卡的含义，更新，删除

据我了解，最好的实现方式是为卡片和含义制作 2 个内容提供者。然后我想构建一个类来封装卡片的功能并将卡片放入某种适配器中。然后将适配器绑定到某种列表视图。

我不确定这种方式是最佳的，这就是为什么任何关于更好的方法的建议都会受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:13:06.073

既然一张卡片可以有多个含义，那么您应该使用第三个表，我们称之为 CardMeanings，它有两列。卡片的唯一 ID，以及含义的唯一 ID。此表的每一行代表一张卡片和一种含义的独特组合。

```
Card      Meaning
  1          1
  1          3
  1          4
  2          7
  3          3
  3          4 
```

然后使用单个适配器通过关系的逻辑视图和仅对适配器可用的低级方法来管理此表，以保持完整性。例如，如果您删除了一张卡片，会发生什么？通常，您会删除 CardMeanings 表中具有给定卡 ID 的卡和所有行，但让单个适配器执行此操作并管理所有三个表。

关键是适配器的全部意义在于将物理视图（3 个表）转换为逻辑视图（卡片及其含义）。您的活动代码应该只处理逻辑视图，而您的适配器应该是唯一处理物理视图的东西。

# r - 如何从R中的x + 0.0i等数字中删除虚部

> ID：13520188
> 
> 赞同：4
> 
> 时间：2012-11-22T21:26:21.853
> 
> 标签：r

我想这已经在某个地方得到了回答，所以提前道歉，但我试图搜索没有运气，所以......

....在 R 中处理 x + 0.0i 形式的数字的聪明方法是什么？

例如假设我们有

```
y <- 1 + 0.0i 
```

所以当然：

```
y == 1 
```

是真的。那么强制 y 为 1 的最佳方法是什么。

**编辑：**

我不想丢弃虚构的部分，除非`round(Im(y)) == 0`但我希望有一种方法可以避免对此进行明确测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:45:57.900

想不出比这更好的了（是的，令人惊讶的是没有内置的虚构挤压功能......或者也许有人会想出一个）

```
f <- function(x) {
   if (all(Im(z <- zapsmall(x))==0)) as.numeric(z) else x
} 
```

# matlab - 使用 Matlab 和 urlread 从 https 读取数据？

> ID：13520189
> 
> 赞同：1
> 
> 时间：2012-11-22T21:26:22.910
> 
> 标签：matlab, https, urlread

我正在尝试使用读取的 url 下载 https 页面：

str=urlread('https://funds.barclaysstockbrokers.co.uk/clients/bsl/search_factsheet_summary.aspx?code=B0XWN14')

不幸的是，我收到一个错误：

```
Error downloading URL. Your network connection may be down or your proxy settings improperly configured. 
```

我尝试使用 urlread2 (http://www.mathworks.co.uk/matlabcentral/fileexchange/35693-urlread2/content/urlread2.m)

但这给了我这个错误：

```
Response stream is undefined
 below is a Java Error dump (truncated):
??? Error using ==> urlread2 at 217
Java exception occurred:
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T01:52:28.910

这是我所做的：

[http://www.mathworks.com/matlabcentral/answers/39563-managing-public-key-certificates-in-matlab](http://www.mathworks.com/matlabcentral/answers/39563-managing-public-key-certificates-in-matlab)

简要总结：它涉及使用 Chrome 导出证书，然后使用[http://portecle.sourceforge.net/](http://portecle.sourceforge.net/)将证书添加到 Matlab 的 Java 的 cacerts 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:42:04.417

这是一个证书安全信任问题。

我在 Mathematica 中尝试了相同的命令，并得到了这个漂亮的弹出窗口，询问我是否要接受证书

```
str="https://funds.barclaysstockbrokers.co.uk/clients/bsl/search_factsheet_summary.aspx"
Import[str] 
```

![在此处输入图像描述](../Images/d908fd9e5341a0214abf3ec2486dedc4.png)

当我只为这个会话点击接受时，我得到了数据

我不使用 urlread()。但至少现在你知道为什么了。我在 urlread 中看不到执行上述操作的选项。可能你需要 Matlab 中的另一个 API 来做你想做的事。可能是 matlab 文件交换中的某些东西可能会处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T01:47:19.887

在 matlab 2014b 之后，您可以使用：

```
DATA = webread(URL) 
```

这个新的 API 没有 urlread 命令的所有问题。

# java - 参数通过引用而不是值传递

> ID：13520190
> 
> 赞同：0
> 
> 时间：2012-11-22T21:26:31.137
> 
> 标签：java, android, parameters

我正在使用 AsyncTask 从网站获取我正在做的一个小型学习项目的信息。我已经尝试了我的代码，它“尝试”做我打算做的事情，尽管我有一个小问题。

我将一个字符串作为参数传递给在 AsyncTask 中执行，但该参数是由地址而不是值引用的。为什么会这样，如何在 UI 线程和后台线程之间正确传递参数？

这是我传递参数的代码：

```
ibSearch.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Editable artnrInput = input.getText();
            String artnr = artnrInput.toString();
            new Connection().execute(artnr);
        }
    }); 
```

到目前为止我已经调试过了，参数“artnr”是这里的一个值。

这是发生错误的 AsyncTask 的一部分：

```
public class Connection extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... artnr)  {
        String url = "http://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr="+ artnr + "&lan=01"; 
```

我希望我的字符串 url 看起来像这样： [http ://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr=221101&lan=01](http://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr=221101&lan=01)

当我调试它时它会做什么，使它不起作用是这样的：

```
 http://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr=[Ljava.lang.String;@43e4c9f8&lan=01 
```

我尝试了一个简单的 toString()，但这更像是一个猜测。为什么它不是作为值传递，而是作为引用传递？

谢谢你，Z

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:29:26.643

You should use `artnr[0]` (which is the only parameter you are passing) instead of `artnr` (since `String... artnr` is an array of String objects not a single String object):

```
String url = "http://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr="+ artnr[0] + "&lan=01"; 
```

* * *

Aside to that, see [How Java passes objects as arguments by value](https://stackoverflow.com/questions/9404625/java-pass-by-reference/9404727#9404727)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:29:58.610

`String... artnr` is a `var-args`, and is actually an array only. When you print `artnr`, you are printing value of your array reference.

You need to change your `url` string to print `artnr[0]` instead of `artnr` to print the string: -

```
String url = "http://mobil.systembolaget.se/SokDryck/SokDryck.aspx?artnr=" + 
             artnr[0] + "&lan=01"; 
```

# android - Android Linkify 如何设置自定义链接颜色？

> ID：13520193
> 
> 赞同：17
> 
> 时间：2012-11-22T21:26:42.363
> 
> 标签：android, linkify, textcolor

我想将我的 android linkify 文本颜色设置为自定义颜色但是`mText.setLinkTextColor("#2f6699");`不起作用，我一直在寻找一种可以编译十六进制值的内置方法，但我还没有找到，任何帮助都会有很大帮助，谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-22T21:35:48.087

您应该将其转换为颜色。尝试：

```
mText.setLinkTextColor(Color.parseColor("#2f6699")); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-22T22:47:01.977

您也可以`android:textColorLink="#2f6699"`在 xml 中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T21:36:15.683

尝试这样的事情：

`noteView.setLinkTextColor(Color.green);`

如果要设置十六进制颜色：

`noteView.setLinkTextColor(Color.argb(int alpha, int red, int green, int blue));`

用所需的值替换 alpha/red/green/blue。可以在[此处找到有关 Color 类的文档](http://developer.android.com/reference/android/graphics/Color.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-12T13:41:27.713

由于不推荐使用 resources.getColor() 函数，我们可以尝试这种替代方式。

textView.setLinkTextColor(ContextCompat.getColor(this,R.color.colorBlue))

谢谢。

# html - Android webview 单选按钮和复选框样式

> ID：13520208
> 
> 赞同：6
> 
> 时间：2012-11-22T21:29:10.323
> 
> 标签：html, css, uiwebview, webview, android-webview

使用 android webviews 的单选按钮和复选框，我尝试了很多使用标准 html 标记的样式，但显示不正确。它的 HDPI、XHDPI 和 Tab 总是很小。

用于复选框的样式

```
input[type="checkbox"] {
width: 18px;
padding: 2% 1%;
height: 18px;
margin: 2px 0;
} 
```

用于单选按钮的样式

```
 input[type="radio"] {
        width: 1em;
        height: 1em;
        -webkit-border-radius: 1em;
        border-radius: 1em;
      } 
```

用于单选按钮的 Html 标记

```
<input type="radio" name="select_ship_address" id="shippingInfo"/> 
```

用于复选框的 Html 标记

```
<input class="floatLeft AddressTxt" tabindex="10" type="checkbox" id="optionOne" name="customer" rel="optional" value="yes" checked=""> 
```

任何人都有任何想法。请帮我。

*例如：从选项卡截取的屏幕截图*

![在此处输入图像描述](../Images/a11d3b3b04f6bf48bffa9580e9b359ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T19:34:26.987

只需添加`-webkit-appearance:none`到您的 CSS。然后你可以完全设计这种元素。

所以你的代码会是这样的：

```
input[type="checkbox"] {
    -webkit-appearance:none;
    width: 18px;
    padding: 2% 1%;
    height: 18px;
    margin: 2px 0;
} 
```

和

```
 input[type="radio"] {
    -webkit-appearance:none
    width: 1em;
    height: 1em;
    -webkit-border-radius: 1em;
    border-radius: 1em;
  } 
```

**注意：**请记住，此属性会从元素中删除任何类型的样式，因此您必须完全重新设置样式。

[`In this blog post`](http://css-tricks.com/almanac/properties/a/appearance/)您可以从 CSS Tricks 中阅读更多关于`appearance`及其跨浏览器兼容性的信息。

# java - 为什么在 Linux 中，JButton、JLabel 鼠标点击丢失或被忽略？它没有按照程序应该做的那样做

> ID：13520209
> 
> 赞同：3
> 
> 时间：2012-11-22T21:29:15.237
> 
> 标签：java, linux, swing, ubuntu, jbutton

我有这个**SSCCE**，其中 Jbutton 被按下它没有做任何事情，如果我点击 JLabel 它也会失败，它不可靠，很多点击都被错过了。但是其他一些发行版我检查了相同的代码，它可以工作。仅在 Dell Inspiron 触摸屏 PC 中无法正常工作。

*   我点击了 JButton 100 次，但它显示了 2 次
*   我点击了 JLabel 100 次，但它显示 0 次
*   我也点击了 JFrame 100 次，但它显示 0 次被按下

跑：

```
$ uname -a
Linux sun-Inspiron-One-2320 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.1 LTS
Release:    12.04
Codename:   precise

$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

$ export DISPLAY=:0.0 && java -cp YumYumYum.jar UnitTest.MouseMethods
The JButton was clicked...
The JButton was clicked... 
```

复制粘贴：

```
package UnitTest;

import java.awt.FlowLayout;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class MouseMethods implements MouseListener {

  private JLabel label = new JLabel("This is a JLabel");
  private JButton button = new JButton("This is a JButton");

  public MouseMethods() {
    JFrame frame = new JFrame("MouseMethods");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new FlowLayout());

    label.addMouseListener(this);
    button.addMouseListener(this);

    frame.add(label);
    frame.add(button);
    frame.setVisible(true);
    frame.pack();
  }

  public void mouseClicked(MouseEvent e) {
    if (e.getSource().equals(button)) {
      System.out.println("The JButton was clicked...");
    } else if (e.getSource().equals(label)) {
      System.out.println("The JLabel was clicked...");
    } else {
      System.out.println("Something else was clicked...");
    }
  }

  public void mouseEntered(MouseEvent e) {
  }

  public void mouseExited(MouseEvent e) {
  }

  public void mousePressed(MouseEvent e) {
  }

  public void mouseReleased(MouseEvent e) {
  }

  public static void main(String args[]) {
    new MouseMethods();
  }
} 
```

**跟进：**

```
$ uname -a
Linux sun-Inspiron-One-2320 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ apt-cache search linux-image
alsa-base - ALSA driver configuration files
linux-image - Generic Linux kernel image.
linux-image-3.2.0-23-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-23-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-23-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-virtual - Linux kernel extra modules for virtual machines
linux-image-generic - Generic Linux kernel image
linux-image-server - Linux kernel image on Server Equipment.
linux-image-virtual - Linux kernel image for virtual machines
linux-virtual - Complete Linux kernel for virtual machines
linux-image-3.2.0-23-generic-pae - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-generic-pae - Generic Linux kernel image
linux-image-3.2.0-23-lowlatency - Linux kernel image for version 3.2.0 on x86/x86_64
linux-image-lowlatency - lowlatency Linux kernel image
linux-image-3.2.0-23-lowlatency-pae - Linux kernel image for version 3.2.0 on x86
linux-image-lowlatency-pae - lowlatency Linux kernel image
linux-image-3.2.0-24-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-24-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-25-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-25-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-26-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-26-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-27-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-27-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-29-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-29-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-30-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-30-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-31-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-31-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-32-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-32-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.2.0-33-generic - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-33-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-3.5.0-18-generic - Linux kernel image for version 3.5.0 on 64 bit x86 SMP
linux-image-current-generic - Depends on the most recently released generic kernel image and headers.
linux-image-extra-3.2.0-24-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-25-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-26-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-27-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-29-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-30-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-31-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-32-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-extra-3.2.0-33-virtual - Linux kernel image for version 3.2.0 on 64 bit x86 Virtual Guests
linux-image-generic-lts-quantal - Generic Linux kernel image
linux-image-hwe-generic - Depends on the generic hardware enablement kernel image and headers.
linux-image-3.2.0-24-generic-pae - Linux kernel image for version 3.2.0 on 64 bit x86 SMP
linux-image-3.2.0-25-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-26-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-27-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-29-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-30-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-31-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-32-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-33-generic-pae - Linux kernel image for version 3.2.0 on 32 bit x86 SMP
linux-image-3.2.0-33-lowlatency - Linux kernel image for version 3.2.0 on x86/x86_64
linux-image-3.2.0-33-lowlatency-pae - Linux kernel image for version 3.2.0 on x86

$ apt-get install linux-image-3.2.0-33-generic
$ init 6
$ uname -a
Linux sun-Inspiron-One-2320 3.2.0-33-generic #52-Ubuntu SMP Thu Oct 18 16:29:15 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T21:46:55.097

在 Ubuntu 12.04/OpenJDK 上按预期工作。

笔记：

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

*   考虑`extends MouseAdapter`过`implements MouseListener`。

*   使用`ActionListener`, 例如`Action`, over`MouseListener`作为按钮。

*   框架内容窗格上的侦听器触发最终`else`子句。

附录：请注意，覆盖`mouseClicked()`可能需要某些依赖于平台的驱动程序和控制面板设置，例如双击时间和鼠标按钮去弹跳。覆盖`mousePressed()`或`mouseReleased()`代替。

```
$ unname -a
Linux vm 3.2.0-33-generic-pae #52-Ubuntu SMP
    2012 年 10 月 18 日星期四 16:39:21 UTC i686 i686 i386 GNU/Linux
$ lsb_release -a
没有可用的 LSB 模块。
经销商编号：Ubuntu
说明：Ubuntu 12.04.1 LTS
发布时间：12.04
代号：精确
$ java -版本
java版本“1.6.0_24”
OpenJDK 运行时环境 (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK Client VM（build 20.0-b12，混合模式，共享）
```

代码：

```
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class MouseMethods extends MouseAdapter {

    private JLabel label = new JLabel("This is a JLabel");
    private JButton button = new JButton("This is a JButton");

    public MouseMethods() {
        JFrame frame = new JFrame("MouseMethods");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        label.addMouseListener(this);
        button.addMouseListener(this);
        frame.getContentPane().addMouseListener(this);

        frame.add(label);
        frame.add(button);
        frame.pack();
        frame.setVisible(true);
    }

    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getSource().equals(button)) {
            System.out.println("The JButton was clicked...");
        } else if (e.getSource().equals(label)) {
            System.out.println("The JLabel was clicked...");
        } else {
            System.out.println("Something else was clicked...");
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new MouseMethods();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T21:31:33.500

我建议你不要在类本身中实现监听器。我认为每个组件都应该有自己的监听器（按源分支可能不是最好的主意）......

如果您不需要实现所有方法，最好扩展[MouseAdapter](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)

# asp.net-mvc - Set a global parameters in Asp.Net MVC 3/4

> ID：13520210
> 
> 赞同：0
> 
> 时间：2012-11-22T21:29:21.390
> 
> 标签：asp.net-mvc, pagination

I'm creating a MVC application with a CRUD. In the list view I have the PagedList helper. I set the pageSize variable in the code: pageSize= 5, so the list only show 5 files and allow go to the previous and next pages. In the other side, I want to create an option called "Parameters" where the user can define yourself the "pageSize" value. I'm confused about how to do it. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:59:06.727

您可以在会话变量中写入用户选择的页面大小，并在需要时从中读取：

要写入会话，您应该调用：

```
Session["pagesize"]=pagesize; 
```

要从会话中读取，您可以使用：

```
var pagesize = (int)Session["pagesize"]; 
```

您应该在强制转换之前检查此值是否在会话中，以避免空引用异常。

会话变量可以在您希望仅在用户工作期间保留时使用。如果你想长期保存它，你应该把它保存到数据库或文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:52:53.697

考虑使用个人资料提供者

[http://wiki.asp.net/page.aspx/1327/profile-provider-in-aspnet-mvc/](http://wiki.asp.net/page.aspx/1327/profile-provider-in-aspnet-mvc/)

或者创建一个定制的 UserSettings 表来自己存储设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:02:16.740

如果你正在使用`Sql Sever`，那么做一个简单的表

```
Create Table UserProfile (
  UserId Int Not null, 
  ProfileName Varchar(50) Not null
  Value Varchar(50) Not Null
  foreign key (UserId) references [UsersTable] (UserId)
) 
```

`PageSize or any other profile`您可以从该表中保存和检索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T22:32:13.557

现代 Web 应用程序中常见的是*页面大小* `<select />`列表：

![在此处输入图像描述](../Images/ca2ea6d95b919b9c9d87310d06750737.png)

您接下来要做的是**记住用户在 cookie 中的选择**。*用户体验 (UX) 比配置文件方法*好得多，原因有两个：

1.  注册用户和**匿名用户**都可以选择页面大小
2.  无需导航到设置或个人资料页面来选择页面大小

有些场景需要个人资料页面，但绝对不是这个。

# wcf - namespace reservations

> ID：13520212
> 
> 赞同：0
> 
> 时间：2012-11-22T21:29:30.517
> 
> 标签：wcf, http, installshield

I have created a stand-alone wcf JSON service (port 4326). On Windows 7, I find that either I have to run as admin, or use the netsh as a command line (just once) to unblock the port:

```
e.g. C:> netsh http add urlacl url=http://+:4326/ user=CSDL-SERVICES\ysg4206 
```

See: [http://msdn.microsoft.com/en-us/library/ms733768.aspx](http://msdn.microsoft.com/en-us/library/ms733768.aspx)

Is there a way that I could do this from within the .NET application (so that the user does not have to do it after installing the program? Can I discover the user account, and do this permanently like the netsh program?

Alternatively, is there some way in InstallShield to find out the domain/username of the user and then run this as a script during install?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:23:27.120

您使用的是什么 InstallShield 版本和项目类型？

如果是 MSI，您可以使用 EXE 自定义操作来运行该命令。另一种选择是调用 LaunchAppAndWait 来调用 EXE 的 InstallScript 自定义操作。（没有闪烁的 DOS 提示符。）

此外，如果是 MSI，您可以创建一个使用安静执行自定义操作模式或可能使用防火墙扩展的 WiX 合并模块。

[FirewallException 元素（防火墙扩展）](http://wix.sourceforge.net/manual-wix3/firewall_xsd_firewallexception.htm)

[安静执行自定义操作](http://wix.sourceforge.net/manual-wix3/qtexec.htm)

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

[启动应用程序并等待](http://kb.flexerasoftware.com/doc/Helpnet/installshield15langref/LangrefLaunchAppAndWait.htm)

[Q102426：如何：启动自定义可执行文件](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalID=Q102426)

# sql-server-2005 - 创建无法在 SQL Server 2005 中禁用的触发器

> ID：13520225
> 
> 赞同：1
> 
> 时间：2012-11-22T21:30:21.383
> 
> 标签：sql-server-2005, triggers

是否可以在无法禁用的表上创建触发器（使用 DBO）（即使是由 DBO 或 sa 用户）？

我需要此触发器来对部署在客户端 SQL Server 上的软件进行许可/许可。当客户尝试使用我的旧版本软件并禁用我创建的触发器时，就会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:18:55.583

不可能，如果发生这种情况，就会出现死锁情况，所以所有软件都不希望这样。

而且它会使系统容易受到黑客攻击，所以你需要了解这是不可能的，sa用户或管理员可以随时更新权限。

您需要考虑其他一些方法，例如以加密形式保存许可，或者使用一些代码来解决此类问题

# mef - How to parametrize my exports?

> ID：13520227
> 
> 赞同：1
> 
> 时间：2012-11-22T21:30:23.400
> 
> 标签：mef

I'd like to be able to parametrize my exports not only with types (as in, *generic exports*), but also with values.

Something like:

```
 class Greeter
    {
        readonly string _format;
        public Greeter( string format ) { _format = format; }

        public string Greet( string name ) { return string.Format( _format, name ); }
    }

    // ...

    var e = new ExportProvider();
    e.ExportParametrized<Greeter>( args: new[] { "Hi, {0}!" } );
    e.ExportParametrized<Greeter>( args: new[] { "¡Hola, {0}!" } );

    // And then:
    [ImportMany] IEnumerable<Greeter> Greeters { get; set; }

    foreach( var g in Greeters ) Console.WriteLine( g.Greet( "John" ) );

    // Should print out:
    //   Hello, John!
    //   ¡Hola, John! 
```

One might ask: why don't I simply export the value `new Greeter( "Hello, {0}!" )` using `ComposablePartExportProvider` and `CompositionBatch`?
While this approach would work in this particular case, it has an important flaw: if the `Greeter` class had any imports of its own, they would not be satisfied.

The usual way I would go about this is to declare two classes - `EnglishGreeter` and `SpanishGreeter`, inherit them both from `Greeter`, and then provide the appropriate arguments in the call to base constructor.

But this doesn't work for two reasons:

1.  This is a lot of noise to write. Not only do I have to type the whole shebang, I also have to come up with **names** for those classes, and it doesn't always make sense to have names. Not to mention the DRY principle. But even besides the noise...
2.  Sometimes I don't know the parameters upfront. Say, for example, my greeting formats were coming from some kind of config file.

**Here is another thought**, to somewhat clarify what I'm looking for.
This problem is *almost* solved in the `TypeCatalog`. See, the `TypeCatalog` knows about the type and it calls the type's constructor to create the part on demand.
One can think of this process from another standpoint: the catalog has a factory function; using that function, it creates the part, then satisfies its non-prerequisite imports, and then returns the part back to the requestor.
Now, in the particular case of `TypeCatalog`, the factory function just happens to be the type's own constructor. If only I could hook in and replace the factory function with my own, but still leverage the rest of the machinery, that would be exactly what I'm looking for.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:12:48.763

您可以通过使用属性导出来实现此目的。您可以专门为这些类型的导出定义一个类，它看起来像这样：

```
class MyParameterizedExports
{
    [Export(typeof(Greeter))]
    private Greeter EnglishGreeter
    {
        get
        {
            Greeter g = new Greeter("Hi, {0}!");
            container.SatisfyImportsOnce(g);
            return g;
        }
    }

    [Export(typeof(Greeter))]
    private Greeter SpanishGreeter
    {
        get
        {
            Greeter g = new Greeter("¡Hola, {0}!");
            container.SatisfyImportsOnce(g);
            return g;
        }
    }
} 
```

在这里，您可以导出两个单独`Greeter`的实例，而无需为每种类型定义一个新类`Greeter`。

# java - Arraylist vs Array 与 java 中的自定义对象

> ID：13520231
> 
> 赞同：2
> 
> 时间：2012-11-22T21:30:40.623
> 
> 标签：java, arrays, arraylist

我正在尝试将一段代码从使用自定义对象的 ArrayList 转换为常规数组。

以前我的定义是

```
ArrayList<Room> rooms = new ArrayList<Room>(); 
```

我现在改为

```
Room[] rooms; 
```

以前我使用以下行将项目添加到数组列表

```
rooms.add(new Room(1,1,30,false,true,true,false)); 
```

但是我现在正在努力寻找应该在整个代码中简单地将单个项目添加到数组中的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:49:58.520

我认为您最好在这里坚持使用 arrayList，但只是为了让您更清楚地了解它。

为了做你想做的事情，你必须保留一个索引整数，它只指向数组中的当前位置，然后当你添加时，你可以增加它并将新对象添加到下一个位置。当您达到数组的最大大小时，您需要扩展它。你会发现已经有一些关于扩展数组的问题已经被问过了，你可以在这里找到答案： [扩展数组？](https://stackoverflow.com/questions/8438879/expanding-an-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:37:01.347

如果您可以使用固定大小的数组，那您至少有一点成功的机会。如果没有，你就无法击败`ArrayList`，如果你的任务是在不重新实施的情况下取得成功，那么这是一个不可能完成的任务。

你真的应该更深入地了解重写你的代码的确切理由，它会给我们一些机会来适当地帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:48:29.543

我可以推荐：
只要你需要插入元素就使用 Arraylist。一旦数组最终转换为数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:32:27.750

如果在添加另一个元素时需要增加数组的大小，则必须构造另一个数组，其大小为旧数组+1。之后，您会将旧数组的内容复制到新数组（更大的数组）。

# javascript - How to position the camera to look at an object

> ID：13520232
> 
> 赞同：0
> 
> 时间：2012-11-22T21:30:42.770
> 
> 标签：javascript, three.js

I have a scene with a THREE.Object3D object in it. The object consists of several child objects, so it does not have geometry directly.

How can I position and focus the camera to look at the object?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:09:37.153

```
camera.position.copy( object.position );
camera.position.z += object.geometry.boundingSphere.radius;
camera.lookAt( object ); 
```

# math - 棘手的二进制减法

> ID：13520233
> 
> 赞同：1
> 
> 时间：2012-11-22T21:30:44.040
> 
> 标签：math, binary

所以我在练习我的二进制减法。自从我第一次考试以来已经有很长一段时间了，我决定创建自己的棘手二进制减法，我想出了这个：

```
 1100
-1101 
```

当然，“借用技巧”对这个问题不起作用，至少我无法让它发挥作用。我唯一的选择是翻转第二个二进制数（底部一个）的位，然后添加一个基本上做 2 的补码的位，因此 1101 变为 0011。然后将主二进制数（1100）与 2 的补码表示（0011）相加意味着它看起来像这样：

```
 1100 (-4) assume 2's complement
+   0011 (3)  assume 2's complement

sum:1111 (-1) assume 2's complement 
```

我只需要确认这个问题，因为我已经很长时间没有进行二进制减法了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:56:30.210

```
 1100
-1101 
```

`0 - 1 = 1`（借用 1）

```
 1100
-1101
   1
=====
    1 
```

`0 - 0 - 1 = 1`（借用 1）

```
 1100
-1101
  11
=====
   11 
```

`1 - 1 - 1 = 1`（借用 1）

```
 1100
-1101
 111
=====
  111 
```

`1 - 1 - 1 = 1`（借用 1）

```
 1100
-1101
1111
=====
 1111 
```

结果是`1111`借了 1 个。就无符号算术而言，这意味着要么结果下溢，要么您需要从下一个有效数字借位。（就有符号算术而言，没有溢出，因为您还借用了第二位，并且计算对应于`-4 - -3 = -1`。）

# haskell - 如何从 yesod settings.yml 文件中获取值

> ID：13520237
> 
> 赞同：3
> 
> 时间：2012-11-22T21:31:29.960
> 
> 标签：haskell, yesod

我正在使用 yesod 脚手架。我正在为如何从 settings.yml 文件中获取值而苦苦挣扎，

settings.yml 文件的相关部分如下所示，

```
Default: &defaults
  host: "*4" # any IPv4 host
  port: 3000
  approot: "http://localhost:3000"
  admins: ["someEmail@gmail.com", "someOtherEmail@gmail.com"] 
```

然后在我的 Foundation.hs 文件中，我有一种方法可以检查用户电子邮件（使用 googleauth）是否与预先指定的电子邮件匹配，

```
admins = ["someEmail@gmail.com", "someOtherEmail@gmail.com"]

isAdmin (Just (Entity _ user)) | elem (userIdent user) admins = Authorized
                               | otherwise                    = AuthenticationRequired
isAdmin Nothing = AuthenticationRequired 
```

我的目标是用 settings.yml 文件中的那个替换 admins 函数，因为它看起来更合适。

对此的任何帮助将不胜感激！

编辑：

好的，我已经通过以下方法获取新制作的“额外”，

```
admins = do
    madmins <- extraAdmins getExtra
    case madmins of
        Nothing -> return Nothing
        Just admins -> return admins 
```

但是GHC把这个扔给我，

```
Foundation.hs:161:28:
    Couldn't match expected type `Extra'
                with actual type `Handler Extra'
    In the first argument of `extraAdmins', namely `getExtra'
    In a stmt of a 'do' block: madmins <- extraAdmins getExtra
    In the expression:
      do { madmins <- extraAdmins getExtra;
           case madmins of {
             Nothing -> return Nothing
             Just admins -> return admins } } 
```

有没有办法将它从 Handler Extra 转换为 Extra，或者我只是做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T07:27:00.697

在脚手架的 Settings.hs 文件的末尾，有它的定义`Extra`和如何解析它：

```
data Extra = Extra
    { extraCopyright :: Text
    , extraAnalytics :: Maybe Text -- ^ Google Analytics
    } deriving Show

parseExtra :: DefaultEnv -> Object -> Parser Extra
parseExtra _ o = Extra
    <$> o .:  "copyright"
    <*> o .:? "analytics" 
```

您可以将所需的额外数据添加到此结构并在那里解析。从应用程序的其余部分，您可以使用`getExtra`（在 Foundation.hs 中定义）访问此值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:44:26.310

您对`getExtra`和的类型有点困惑`extraAdmins`。

我猜他们是这样的：

```
getExtra :: Handler Extra

extraAdmins :: Extra -> [Text] -- maybe? 
```

如果是这样，这样的事情应该可以工作：

```
isAdmin :: User -> Handler Bool
isAdmin u = do
  extra <- getExtra

  return $ userIdent u `elem` extraAdmins extra 
```

# css - 出现的div，一段时间后消失，悬停时出现...

> ID：13520245
> 
> 赞同：0
> 
> 时间：2012-11-22T21:32:26.773
> 
> 标签：css, html, sliding

我正在尝试编写一个出现的 div 代码，它会在一段时间后消失并在悬停时出现..您可以在 www.aedas.com 上看到实时示例 - 左窗格滑入，然后消失，当您将鼠标悬停在该区域时它会重新出现。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:15:09.433

你可以尝试一些简单的事情：

我正在使用 setInterval 和 clearInterval 来设置隐藏栏的间隔。

**重要的提示**

setInterval 返回的 id 应该由 clearInterval 使用，否则循环不会中断！！

工作jsfiddle：http: [//jsfiddle.net/frictionless/QmLAv/](http://jsfiddle.net/frictionless/QmLAv/)

```
$(function() {

   var showTime = 5000;
   var transition = 'slow';
   var target = $('.headerbar');
   var flag = false;

    target.slideDown(transition);
    var id = setInterval(function(){hide(target);}, showTime);

    var hide = function(item) {
        debugger;
        if(flag){
            return;
        }
        clearInterval(id);
        item.slideUp(transition);
    };

    target.hover(function() {
        flag = true;
        clearInterval(id);
        $(this).show();
    }, function() {
        flag = false;
        id = setInterval(function(){hide(target);}, showTime);
    });

});​ 
```

# java - Weblogic 8 的 Servlet 映射，如何？

> ID：13520247
> 
> 赞同：0
> 
> 时间：2012-11-22T21:32:27.223
> 
> 标签：java, servlets, weblogic, web.xml

我有一个 WAR 文件，其中包含已部署到 weblogic 流的 web 应用程序。

JSP 部分工作正常，但找不到 servlet。可能是由于我的 web.xml 文件中缺少映射。

我在 Tomcat 6 上工作得很好，但似乎找不到使用 weblogic。

我使用了注释 @WebServlet("/actionOne") 但这似乎不起作用。

我对如何通过 web.xml 文件正确映射这些感到有点困惑。

servlet 是 .java 文件，位于 WEB-INF/classes/com/foo/bar/

到目前为止，我已经添加了以下 web.xml 文件，但是 servlet-mapping 部分让我感到困惑。

```
 <servlet>
            <servlet-name>actionOne</servlet-name>
            <servlet-class>com.foo.bar.actionOne</servlet-class>
    </servlet>
    <servlet>
            <servlet-name>actionTwo</servlet-name>
            <servlet-class>com.foo.bar</servlet-class>
    </servlet> 
```

希望以上是正确的，下一节我不确定如何使用，并希望得到一些帮助。

```
 <servlet-mapping>
             <servlet-name>actionOne</servlet-name>
             <url-pattern>/actionOne</url-pattern>
   </servlet-mapping> 
```

通过 Form action="actionOne" 从 jsp 调用 servlet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:32:27.917

我的映射是正确的，似乎问题与 weblogic 模块文件夹中不同版本的 servlet.api 有关。2.5 而不是 3.0。这解决了这个问题。

# ajax - Symfony2 中的 XmlHttpRequest

> ID：13520248
> 
> 赞同：2
> 
> 时间：2012-11-22T21:32:29.197
> 
> 标签：ajax, symfony, xmlhttprequest, request, symfony-2.1

下面是我的问题。在*Symfony2.1*控制器中，我收到一个*Ajax*调用。如果我使用该`Request`对象，我将无法获得发送的参数。如果我使用 PHP`_REQUEST`对象，则会找到参数！如果重要的话，我可以确认请求是*XHR 。*这是我的代码：

```
public function savedataAction(Request $request){  
  if($request->isXmlHttpRequest())
  echo 'Ajax Call';

  $param1 = $request->request->get('myParam'); // Nothing is returned, but $request is obviosly not null
  $param2 = $_REQUEST['myParam']; // The value is given

  ....
} 
```

任何的想法？

PS：如果有帮助，请注意 AJAX 调用是由[Valums](https://github.com/valums/file-uploader)提供的文件上传器 jQuery 插件发送的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:36:56.167

**通常它的：**

```
// retrieve GET and POST variables respectively
$request->query->get('foo');
$request->request->get('bar', 'default value if bar does not exist'); 
```

看看这里是基本原理。

[http://symfony.com/doc/current/book/http_fundamentals.html](http://symfony.com/doc/current/book/http_fundamentals.html)

**编辑：**

`$request`在您的情况下，仅当您从 Symfony2 站点发送表单时才会填写。CSRF 保护可能会阻止该请求。

在您的控制器中尝试此操作以获取 Request 对象：

```
$request = $this->get('request'); 
```

[http://symfony2forum.org/threads/5-Using-Symfony2-jQuery-and-Ajax](http://symfony2forum.org/threads/5-Using-Symfony2-jQuery-and-Ajax)

# objective-c - 如何在 NSArray 中调用 UIButton 上的方法？

> ID：13520260
> 
> 赞同：0
> 
> 时间：2012-11-22T21:32:58.360
> 
> 标签：objective-c, nsarray

我正在尝试启用一个按钮，但我将在此功能中启用的按钮发生了变化。我有一个按钮数组，但是当我在数组索引上使用 .enabled 时，我希望它说这对 ID 不起作用。

在使用之前，我已使用此数组设置每个按钮的文本：

```
[[ButtonArray objectAtIndex: Index] setTitle:(@"blahblahblah") forState: UIControlStateNormal]; 
```

有没有办法使用类似的函数调用来启用和禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:32:24.503

如果您确定该数组中的所有内容都是 a `UIButton`，则可以强制转换它以使编译器满意：

```
[(UIButton *)[ButtonArray objectAtIndex: Index] setTitle:(@"blahblahblah") forState: UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:57:21.240

可以将代码分成多行。它使阅读、调试和维护变得更容易。

```
UIButton *button = ButtonArray[Index]; // new, modern array syntax
button.enabled = YES;
[button setTitle:@"blah" forState:UIControlStateNormal]; 
```

# c - 使用#pragma omp 进行硬并行化以找到第 N 个素数

> ID：13520262
> 
> 赞同：1
> 
> 时间：2012-11-22T21:33:18.777
> 
> 标签：c, multithreading, parallel-processing, openmp, primes

这个问题的目标是能够获得第 2.000.000 个素数，并能够分辨出第 2.000.000 个素数是哪个。

我们从这段代码开始：

```
#include <stdlib.h>
#include <stdio.h>

#define N 2000000

int p[N];

main(int na,char* arg[])
{
int i;
int pp,num;

printf("Number of primes to find: %d\n",N);

p[0] = 2;
p[1] = 3;
pp = 2;
num = 5;

while (pp < N)
{
  for (i=1; p[i]*p[i] <= num ;i++)
    if (num % p[i] == 0) break;
  if (p[i]*p[i] > num) p[pp++]=num;
  num += 2;
}

printf("The %d prime is: %d\n",N,p[N-1]);
exit(0);
} 
```

现在我们被要求通过 pragma omp 使这个进程线程化。这是我到目前为止所做的：

```
#include <stdlib.h>
#include <stdio.h>

#define N 2000000
#define D 1415

int p[N];
main(int na,char* arg[])
{
int i,j;
int pp,num;

printf("Number of primes to find: %d\n",N);

p[0] = 2;
p[1] = 3;

pp = 2;
num = 5;

while (pp < D)
{
    for (i=1; p[i]*p[i] <= num ;i++)
        if (num % p[i] == 0) break;
    if (p[i]*p[i] > num) p[pp++]=num;
    num += 2;
}

int success = 0;
int t_num;
int temp_num = num;
int total = pp;

#pragma omp parallel num_threads(4) private(j, t_num, num, success)
{
    t_num = omp_get_thread_num();
    num = temp_num + t_num*2;

    #pragma omp for ordered schedule(static,4)
    for(pp=D; pp<N; pp++) {
        success = 0;
        while(success==0) {
            for (i=1; p[i]*p[i] <= num;i++) {
                if (num % p[i] == 0) break;
            }
            if (p[i]*p[i] > num) {
                p[pp] = num;
                success=1;
            }
            num+=8;
        }

    }
}

//sort(p, 0, N);

printf("El %d primer es: %d\n",N,p[N-1]);

exit(0);
} 
```

现在让我解释我的“部分”解决方案，因此，我的问题。

第一个 D 素数是用序列码获得的，所以现在我可以检查大量数字的可分性。

每个线程都运行一个素数对角线，因此线程之间没有依赖关系，也不需要同步。但是，这种方法的问题如下：

1.  一个线程可能比另一个线程产生更多的素数
2.  作为问题 1\. 的直接结果，它将生成 N 个素数，但它们不会被排序，所以当素数计数器 'pp' 达到 'N' 时，最后一个素数不是第 2.000.000 个素数，它是更高级的主要。
3.  也可能是当它生成 2.000.000 个素数时，可以到达真正的第 2.000.000 个素数的线程可能没有足够的时间将其放在素数数组“p”上。

问题/困境是：

我怎么能知道第 2.000.000 个素数何时生成？

提示：有人告诉我，我应该分批（比方说）10.000 个素数候选。然后当我不知道的事情发生时，我会知道最后一批 10.000 个候选人包含第 2.000.000 个素数，我可以使用快速排序对其进行排序。

我希望我说清楚了，这真的很艰难，我只是不停地尝试了几天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:16:39.173

如果您只需要 2000000 个素数，您可以维护一个 ~4.1MB 大小的位数组，并为每个找到的素数翻转位。不需要排序。通过实施仅赔率表示方案将您的位数组大小减半。

使用[Eratosthenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)，分段，大小成比例`sqrt(top_value_of_range)`（或类似的东西 - 目标是在每个段上执行大致相同的工作量）。因此，对于`n=2000000`、`n*(log n + log(log n)) == 34366806`和`prime[771]^2 == 34421689`(0-based)，*预先计算*前 771 个奇数素数。

每个工人也可以计数，因为它会翻转位，所以当它们全部完成时，您将知道每个范围的计数，并且只需要扫描包含第 2 百万个素数的一个范围，最后，找到那个素数。或者让每个工作人员根据其范围维护自己的位数组 - 您只需保留一个，并且可以丢弃其他的。

计算埃拉托色尼筛的伪代码是：

```
Input: an integer n > 1

Let A be an array of bool values, indexed by integers 3, 5, ... upto n,
initially all set to true.

count := floor( (n-1)/2 )
for i = 3, 5, 7, ..., while i^2 ≤ n:
  if A[i] is true:
    for j = i^2, i^2 + 2i, i^2 + 4i, ..., while j ≤ n:
      if A[j] is true:
        A[j]  := false
        count := count - 1

Now all 'i's such that A[i] is true are prime,
and 'count' is the total count of odd primes found. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:48:38.770

我可以想到两种方法。

1.  一旦你找到了第 2 百万个素数的候选者，你的线程会继续计算低于你的候选者的素数，直到你没有丢失任何素数。然后你可以对素数列表进行排序并从中取出百万分之一。

2.  如果您的线程正在生成连续素数块，它们应该单独维护这些块，然后可以随后将素数块重新组合成一个主列表。一旦找到第 2 百万个素数，执行重组的线程就可以终止程序。

# java - 输出未按预期打印

> ID：13520263
> 
> 赞同：0
> 
> 时间：2012-11-22T21:33:22.763
> 
> 标签：java, loops, for-loop, nested-loops

我已经完成了这项任务的代码，只是无法弄清楚是什么导致输出不正确。当使用 3 和 A 作为值时，所需的输出应该返回：

> > 一个
> 
> AA

AAA

目前，我得到：

AAA

AAA

AAA

代码：

```
import static java.lang.System.*;

public class TriangleThree
{
private int size;
private String letter;

public TriangleThree()
{
}

public TriangleThree(int count, String let)
{
    size = count;
    letter = let;
}

public void setTriangle( String let, int sz )
{
    size = sz;
    letter = let;
}

public String getLetter()
{
    return letter;
}

public String toString()
{
    String output="";
    for(int i = 1; i<=size; i++)
    {
        for(int j = 0; j > i;j++ )
        {
            output = output + " ";
        }

        for(int k = size; k>0; k--)
        {
            output = output + letter;
        }
        output= output + "\n";
    }

    return output+"\n";
}
} 
```

并与我的跑步者类交叉引用它：

```
import static java.lang.System.*;

import java.util.Scanner;

public class Lab11c
{
public static void main( String args[] )
{
   Scanner keyboard = new Scanner(System.in);
    String choice="";
        do{
            out.print("Enter the size of the triangle : ");
            int big = keyboard.nextInt();
            out.print("Enter a letter : ");
            String value = keyboard.next();

                //instantiate a TriangleThree object
         TriangleThree tt = new TriangleThree( big, value );
            //call the toString method to print the triangle
            System.out.println( tt );

            System.out.print("Do you want to enter more data? ");
            choice=keyboard.next();
        }while(choice.equals("Y")||choice.equals("y"));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:36:10.740

您正在运行您的第二个 for 循环 3 次（全部从`size`到`0`）。将其更改为： -

```
 for(int k = i; k>0; k--)
    {
        output = output + letter;
    } 
```

这将运行, `1 time`for , ...`i = 1``2 times``i = 2`

此外，您的第一个循环存在问题：-

```
for(int j = 0; j > i;j++ ) 
```

这应该是：-

```
for(int j = 0; j < i;j++ ) 
```

* * *

**更新 ： -**

实际上你不需要你的第一个循环，因为它只是打印空间。`output`而是仅在第二个循环中为您添加空格：-

```
 for(int k = i; k>0; k--)
    {
        output = output + letter + " ";
    } 
```

# android - 在 Android 服务中发出异步请求

> ID：13520264
> 
> 赞同：0
> 
> 时间：2012-11-22T21:33:26.707
> 
> 标签：android, android-service

在我的服务中，我在服务 的 doInBackground() 方法中使用[http://loopj.com/android-async-http/ 。](http://loopj.com/android-async-http/)因为它是异步的，所以该方法在调用回调之前完成，因此正在调用 onPostExecute 并关闭服务......我该如何避免这种情况？

```
public class LoginService extends AsyncTask<String, Void, LoginService.LoginStatus> {

    private static String TAG = "x-LoginService";
    private ProgressDialog progressDialog;
    private AlertDialog dialog = null;

    private final Context context;

    public LoginService(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(context, "", context.getString(R.string.waitingLogin), true);
    }

    @Override
    protected void onPostExecute(LoginStatus loginStatus) {
        progressDialog.dismiss();
        Log.d(TAG, "--STARTONPOSTEXECUTE");
        String message;
        LocalSettingsService settings = new LocalSettingsService(context);

        if (loginStatus == LoginStatus.LOGGED_IN) {
            settings.put("loggedIn", "true");

            Intent intent = new Intent(context, FragmentTabs.class);
            context.startActivity(intent);

            //Intent intent = new Intent(context, SummaryPage.class);
            //Intent intent = new Intent(context, FeedbackPage.class);
            //Intent intent = new Intent(context, NavTab.class);
            //context.startActivity(intent);

            return;

        } else if (loginStatus == LoginStatus.INVALID_CREDENTIALS) {
            settings.put("loggedIn", "false");

            message = context.getString(R.string.invalidCredentials);
        } else {
            settings.put("loggedIn", "false");
            message = context.getString(R.string.serverError);
        }

        dialog = new AlertDialog.Builder(context)
                .setIcon(android.R.drawable.ic_dialog_alert)
                .setTitle(context.getString(R.string.errorTitle))
                .setMessage(message)
                .setPositiveButton(context.getString(R.string.ok), new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        dialogInterface.dismiss();
                    }
                }).create();

        dialog.show();
    }

    @Override
    protected LoginStatus doInBackground(String... strings) {
        String username = strings[0];
        String password = strings[1];

        doLogin();

        return LoginStatus.LOGGED_IN;
    }

    private void doLogin() {
    {
        Log.d(TAG, "--STARTDOLOGIN");
        RequestParams params = new RequestParams();
        params.put("username", "un");
        params.put("password", "pw");
        ServicesRestClient.post("ajax/login", params, new JsonHttpResponseHandler() {
            @Override
            public void onSuccess(String s) {
                Log.d(TAG, "--ONSUCCESS");

            }
            @Override
            public void onFailure(Throwable throwable, String s) {
                Log.d(TAG, "--ONFAILURE");
            }
        });
    }

    }

    public void onPause() {
        if (dialog != null) {
            dialog.dismiss();
        }
    }

    public static enum LoginStatus {
        LOGGED_IN, INVALID_CREDENTIALS, SERVER_SIDE_ERROR
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:41:28.070

我觉得你这段代码太复杂了。一般来说，`doInBackground()`除非您服务结束，否则您应该以某种方式留在里面，但不知道您使用的内部结构，我可以告诉您如何做到最好。但是由于您使用的这个库宣布要进行异步网络，所以我首先不会使用另一个异步任务

# perl - 返回布尔值的 Perl 函数实际上返回什么

> ID：13520266
> 
> 赞同：12
> 
> 时间：2012-11-22T21:33:37.450
> 
> 标签：perl, boolean, return

Perl[定义](http://perldoc.perl.org/functions/defined.html)的函数（和许多其他函数）返回“布尔值”。

鉴于 Perl 实际上没有 Boolean 类型（并且使用*1*表示*true*，使用*0*或*undef*表示*false*），Perl 语言是否准确指定了布尔值返回的内容？例如，将`defined(undef)`返回*0*或*undef*，是否会发生变化？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T22:00:47.063

在几乎所有情况下（即除非有理由不这样做），Perl 返回两个静态分配的标量之一：（`&PL_sv_yes`对于真）和`&PL_sv_no`（对于假）。这是它们的详细信息：

```
>perl -MDevel::Peek -e"Dump 1==1"
SV = PVNV(0x749be4) at 0x3180b8
  REFCNT = 2147483644
  FLAGS = (PADTMP,IOK,NOK,POK,READONLY,pIOK,pNOK,pPOK)
  IV = 1
  NV = 1
  PV = 0x742dfc "1"\0
  CUR = 1
  LEN = 12

>perl -MDevel::Peek -e"Dump 1==0"
SV = PVNV(0x7e9bcc) at 0x4980a8
  REFCNT = 2147483647
  FLAGS = (PADTMP,IOK,NOK,POK,READONLY,pIOK,pNOK,pPOK)
  IV = 0
  NV = 0
  PV = 0x7e3f0c ""\0
  CUR = 0
  LEN = 12 
```

`yes`是一个三元组（IOK、NOK 和 POK）。它包含一个等于 1 的有符号整数 (IV)、一个等于 1 的浮点数 (NV) 和一个等于 1 的字符串 (PV)。

`no`也是一个三元组（IOK、NOK 和 POK）。它包含一个等于 0 的有符号整数 (IV)、一个等于 0 的浮点数 (NV) 和一个空字符串 (PV)。这意味着它字符串化为空字符串，并且它被数字化为 0。它既不等同于空字符串

```
>perl -wE"say 0+(1==0);"
0

>perl -wE"say 0+'';"
Argument "" isn't numeric in addition (+) at -e line 1.
0 
```

也不`0`

```
>perl -wE"say ''.(1==0);"

>perl -wE"say ''.0;"
0 
```

不能保证这种情况会一直存在。而且没有理由依赖这一点。如果您需要特定的值，您可以使用类似

```
my $formatted = $result ? '1' : '0'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T21:48:15.790

它们返回一个特殊的 false 值，在字符串上下文中为 ""，但在数字上下文中为 0（没有非数字警告）。真正的价值不是那么特别，因为它在任何一种情况下都是 1。defined() 不*返回*undef。

（您可以自己创建类似的值，例如`Scalar::Util::dualvar(0,"")`。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T21:55:35.703

它可能永远不会改变，但是 perl 没有指定`defined(...)`返回的确切布尔值。

使用布尔值时，好的代码不应依赖于用于 true 和 false 的实际值。

例子：

```
# not so great code:
my $bool = 0;   #
...
if (some condition) {
  $bool = 1;
}

if ($bool == 1) { ... }

# better code:
my $bool;       # default value is undef which is false

$bool = some condition;

if ($bool) { ... } 
```

99.9% 的时间没有理由关心用于布尔值的值。也就是说，在某些情况下，最好使用显式 0 或 1 而不是值的布尔值。例子：

```
sub foo {
    my $object = shift;
    ...
    my $bool = $object;
    ...
    return $bool;
} 
```

使用引用调用的意图`foo()`或如果未定义`undef`则应返回 false 。`$object`问题是 if`$object`被定义`foo()`将返回对象本身并因此创建对该对象的另一个引用，这可能会干扰其垃圾收集。所以在这里最好使用一个明确的布尔值，即：

```
 my $bool = $object ? 1 : 0; 
```

所以要小心使用引用本身来表示它的真实性（即它的定义性），因为可能会创建对引用的不需要的引用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T21:48:30.373

由于那是官方手册页，我会说没有指定它的确切返回值。如果 Perl 文档谈论一个布尔值，那么它几乎总是谈论在布尔上下文中评估所述值：`if (defined ...)`等等`print while <>`。在这种情况下，几个值评估为 false: `0`, `undef`, `""`（空字符串），甚至字符串等于`"0"`。

所有其他值在布尔上下文中评估为真，包括臭名昭著的例子`"0 but true"`。

由于文档很模糊，我永远不会依赖`defined()`为未定义的情况返回任何特定值。`defined()`但是，如果您只是在布尔上下文中使用而不将其与特定值进行比较，那么您总是可以的。

好的：`print "yes\n" if defined($var)`

不可移植/面向未来： `print "yes\n" if defined($var) eq ''`或类似的东西

# c++ - 在 MIPS 上对 C++ 和汇编代码进行微架构分析

> ID：13520268
> 
> 赞同：4
> 
> 时间：2012-11-22T08:04:28.100
> 
> 标签：c++, optimization, profiling, mips

作为课程项目的一部分，我需要分析一段 C++ 代码的性能，并找出计算机体系结构（MIPS 或 x86）的哪些部分在运行代码时最常被使用，并且可能是性能的瓶颈。我正在查看各种 Profiler 来分析性能，并遇到了[SimpleScalar](http://www.simplescalar.com/)，它是一个很棒的工具，但遗憾的是只适用于 C 代码。

由于我更熟悉[MIPS 架构](http://en.wikipedia.org/wiki/MIPS_architecture)，如果有像 SimpleScalar 这样的工具来模拟和分析 MIPS 的 C++ 代码，那就太好了。我正在研究性能关键部分，如分支、缓存、指令集、寻址模式等。如果没有，提及任何可以对 x86 架构进行类似分析的工具也很好。

（澄清一下，我不是在寻找任何旧的分析器，而是寻找一个了解 CPU 微架构并知道 CPU 的哪些部分被利用或未充分利用的分析器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:52:09.507

[CACTI](http://www.hpl.hp.com/research/cacti/)有详细的缓存低级模拟。

[SESC](http://sesc.sourceforge.net/)是支持 MIPS的周期精确[计算机架构模拟器。](http://en.wikipedia.org/wiki/Computer_architecture_simulator)SESC 包括 CACTI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:53:01.910

我的理解是 SimpleScalar 可以模拟和分析 MIPS 机器代码，无论它是用什么原始语言编译的。（SimpleScalar 附带的源代码级调试器“DLite！”可能只支持几种语言，但听起来您不需要“调试”代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:45:50.473

我怀疑你想要什么是可能的。C++ 是语言，但仍需要编译成目标架构。优化（或缺少优化）将决定您的许多性能标准，例如缓存使用等。所以我想您需要寻找机器级分析器（希望它们支持编译器的调试格式，所以您可以查看源代码语境）。

# c - UART ISR Tx Rx 架构

> ID：13520272
> 
> 赞同：6
> 
> 时间：2012-11-22T21:34:05.720
> 
> 标签：c, architecture, serial-port, serial-communication, uart

我把事情复杂化了吗？

我正在构建我的代码以通过 UART 从 8051 微型设备与外围设备通信。外设响应来自主机的命令，并且一次只能响应一个命令。这是一个简单的发送和接收协议。(tx1, rx1, tx2, rx2, tx3, rx3) 每个 TX 消息以 CR 结束，每个响应以 > 结束。在收到对最后一条消息的回复之前，我无法发送新消息。如果我启用该选项，响应也可以在开头回显原始 TX 消息（但这会导致更多流量）

一个示例消息是：

*   TX：你好
*   RX：世界！>

或使用回声选项...

*   TX：你好
*   RX：你好\r世界！>

**选项 A** 诸如 getHello 之类的函数将包含发送和接收。并行 ISR 例程将收集传入字节并在接收到“>”字符时抛出一个标志。

```
char* getHello(char * buf){
    sendMsg("Hello\r");
    delay(10ms); //wait a little bit

    //wait for receive to come in or timeout to occur
    while(!receiveFlag || !timeoutFlag);  //thrown by ISR
    receiveMsg(buf);
    //parse the message and do some other stuff
    return buf;
} 
```

*优点：*

*   一切都包含在一个功能中。
*   更容易调试

*缺点：*

*   这个函数是阻塞的，如果外设从不响应，可能会挂起，因此必须实现超时。
*   消息不能乱序接收，必须串联（即tx1、rx1、tx2、rx2、tx3、rx3）

**选项 B** 采用并行方法。将创建两个单独的函数。一种用于发送消息，另一种用于在收到 ISR 的响应时进行顶点处理。

```
void sendHello(){
    sendMsg("Hello\r");
    //do some other stuff if needed
}

char* receiveMsg(char * buf){
    //figure out from echo print what the tx message was
    //use a switch statement to decide which response parser to call
    switch(txMessage){ //pseudo code
    case "Hello":
        receiveMsg(buf);
        //parse the message and do some other stuff
        break;
    }
    return buf;
} 
```

*优点：*

*   可以处理乱序返回的并行消息，因为它依赖于 tx 消息的回显打印来确定如何解析它。（即，tx1、tx2、tx3、rx1、rx2、rx3）

*缺点：*

*   调试相当困难
*   产生多个线程
*   很多额外的代码
*   不值得，因为消息肯定会按顺序返回

* * *

现在，我正在做选项 B，但随着我继续这个项目，我开始觉得这变得过于复杂了。我很好奇你们是怎么想的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:31:35.097

不过，我倾向于做这种事情，我倾向于有一个单独的串行端口“类”（ struct + functions ）和一个位于串行端口顶部的协议类。我一直在我的嵌入式系统中使用这些。这为您提供了两全其美，阻塞同步调用和异步调用，因此您可以伪多任务。

```
typedef struct serial_port_s serial_port;
typedef void (*serial_on_recived_proc)(serial_port* p);
typedef struct serial_port_s{
    bool timeoutFlag;
    bool receiveFlag;
    void* context;
    serial_on_recived_proc response_handler;
};

void send_serial(serial_port* p, char* message)
{
    //SendMsg?
}
void receive_serial(serial_port* p, char* response)
{
    //receiveMsg?
}

bool has_data(serial_port* p)
{
    return p->receiveFlag;
}

bool has_timed_out(serial_port* p)
{
    return p->timeoutFlag;
}
bool is_serial_finished(serial_port* p)
{
    return has_data(p) || has_timed_out(p); 
}

bool serial_check(serial_port* p)
{
    if(is_serial_finished(p) && p->response_handler != NULL)
    {
       p->response_handler(p)
       p-> response_handler = NULL;
       return true;
    }
    return false;
}

void send(serial_port* p, char* message, char* response)
{
    p->response_handler=NULL;
    send_serial(p, message);
    while(!is_serial_finished(p));
    receive_serial(p, response);
}

void sendAsync(serial_port* p, char* message, serial_on_recived_proc handler, void* context)
{
    p->response_handler = handler;
    p->context = context;
    send_serial(p, message);
}

void pow_response(serial_port* p)
{
    // could pass a pointer to a struct, or anything depending on what you want to do
    char* r = (char*)p->context;  
    receive_serial(p, r);
    // do stuff with the pow response
}

typedef struct
{
   char text[100];       
   int x;
   bool has_result;
} bang_t;

void bang_parse(bang_t* bang)
{
   bang->x = atoi(bang->text);
}

void bang_response(serial_port* p)
{
    bang_t* bang = (bang_t*)p->context;  
    receive_serial(p, bang->text);
    bang_parse(bang);
    bang->has_result=true;
}

void myFunc();
{
    char response[100];
    char pow[100];
    bang_t bang1;
    bang_t bang2;
    serial_port p; //
    int state = 1;
    // whatever you need to do to set the serial port

    // sends and blocks till a response/timeout
    send(&p, "Hello", response);
    // do what you like with the response

    // alternately, lets do an async send...
    sendAsync(&p, "Pow", pow_response, pow);       

    while(true)
    {
        // non block check, will process the response when it arrives               
        if(serial_check(p))
            {
              // it has responded to something, we can send something else...

              // using a very simple state machine, work out what to send next.
              // in practice I'd use enum for states, and functions for managing state
              // transitions, but for this example I'm just using an int which
              // I just increment to move to the next state
              switch(state)
              {
              case 1: 
                 // bang1 is the context, and will receive the data
                 sendAsync(&p, "Bang1", bang_response, &bang1);
                 state++; 
                 break;
              case 2:
                 // now bang2 is the context and will get the data...
                 sendAsync(&p, "Bang2", bang_response, &bang2);
                 state++; 
                 break;
              default:
                 //nothing more to send....
                 break;
              }
            }
        // do other stuff you want to do in parallel
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:46:04.697

把事情简单化。ISR 例程必须非常快，所以对我来说最好的方法是拥有一个像这样的全局 RXBuffer：

```
#include <cstdint>
#include <deque>
#include <algorithm>

class RXBuffer {
public:
    friend class ISR;

    typedef std::deque<uint8_t>::const_iterator const_iterator;

    RXBuffer();
    size_t size() const { m_buffer.size(); }

    // read from the buffer in a container in the range [first, last)
    template <typename Iterator>
    void read(Iterator first, Iterator last, Iterator to)
    {
        // how many bytes do you want to read?
        size_t bytes_to_read = std::distance(first, last);

        if (bytes_to_read >= size())
        {
            // read the whole buffer
            std::copy(begin(), end(), first);

            // empty the buffer
            m_buffer.clear();

            return size();
        }
        else
        {
            // copy the data
            copy(begin(), begin() + bytes_to_read, firt);

            // now enque the element
            m_buffer.erase(begin(), begon() + bytes_to_read);

            return bytes_to_read;
        }
    }

private:
    void put(uint8_t data)
    {
        // check buffer overflow
        m_buffer.push_back(data);
    }

    const_iterator begin() const { return m_buffer.begin(); }
    const_iterator end() const { return m_buffer.end(); }

private:
    std::deque<uint8_t> m_buffer;           // buffer where store data
    size_t m_size;                          // effective size of the container
};

class ISR {
public:
    ISR(RXBuffer& buffer) : m_buffer(buffer) {}

    // ISR Routine
    void operator () (uint8_t data)
    {
        m_buffer.put(data);
    } 

private:
    RXBuffer& m_buffer;
};
RXBuffer g_uart1_rx_buffer; 
```

现在你有了 ISR 和一个 RXBuffer 来搜索数据，所以你需要一些东西来包装 UART 函数。您可以按如下方式实现：

```
class UART {
public:
    UART(unsigned int uart_device, RXBuffer& rx_buffer) :
        m_uart(uart_device), m_buffer(rx_buffer)
    {
    }

    unsigned int uart_device() const { return m_uart; }

    // set the timeout during a read operation
    void timeout(unsigned ms) { m_timer.countdown(ms); }

    template <typename InputIterator>
    void read(InputIterator first, InputIterator last)
    {
        // start the timer
        m_timer.start();

        size_t size = std::distance(first, last);
        size_t read_bytes = 0;

        while (read_bytes != size && !m_timer.is_expired())
        {
            read_bytes += m_buffer.read(first + read_bytes, last);
        }

        if (read_bytes != size) throw std::exception("timeout");
    }

    template <typename OutputIterator>
    void send(OutputIterator first, OutputIterator last)
    {
        size_t size = std::distance(first, last);
        uart_send(m_uart, &(*first), size);
    }

private:
    unsigned int m_uart;
    RXBuffer& m_buffer;
    timer m_timer;
}; 
```

# javascript - 异步调用的变量引用问题

> ID：13520275
> 
> 赞同：0
> 
> 时间：2012-11-22T21:34:09.913
> 
> 标签：javascript

我一直在玩 JavaScript，有些东西我不太明白。我在这里有这段代码：

```
$.getJSON('data.json', function(obj) {

    for( var p in obj.List )
    {               
        datas['id'] = obj.List[p].ListingId;
        datas['area'] = area;

        //console.log(datas);

        var geocoder = new google.maps.Geocoder();              
        geocoder.geocode( { 'address': datas['area'] }, function(results,status)
        {

            if(status == google.maps.GeocoderStatus.OK)
            {
                var latlng = new google.maps.LatLng(results[0].geometry.location.Ya, results[0].geometry.location.Za);

                datas['latlng'] = latlng;

                //console.log(datas);                       

            }                               
        });
     }      
}); 
```

好的，现在假设 for 循环运行 3 次。如果我们取消注释第一行“console.log(datas)”并运行页面，在控制台中我们会看到 3 个“datas”对象，它们有自己的“id”和“area”。如果我在地理编码回调中注释第一个“console.log(datas)”并取消注释第二个“console.log(datas)”，当我运行代码时，所有 3 个“datas”对象在“ id”、“区域”和“latlng”。而我预计这 3 个“数据”对象会因它们自己的 latlngs 而不同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:39:24.323

我认为这是一个范围问题。到最后一次`console.log`运行时，`p`变量已经引用了最后一个 obj。您需要`p`在新范围内捕获。

```
for( var p in obj.List ) { 

  (function(p) {

    datas['id'] = obj.List[p].ListingId;
    datas['area'] = area;

    geocoder.geocode( { 'address': datas['area'] }, function(results,status) {
      ...
    });

  }(p));

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:51:40.593

您传递给函数的函数何时`geocoder.geocode`运行？如果它没有立即运行，则 for 循环将在运行地理编码功能之前运行所有三遍。这意味着`datas['id']`并且`datas['area']`将被设置为循环的最后一次迭代......在这种情况下，您需要在地理编码函数的闭包内捕获数据数组。

在这种情况下，您需要类似：

```
$.getJSON('data.json', function(obj) {

    for( var p in obj.List )
    {               
        datas['id'] = obj.List[p].ListingId;
        datas['area'] = area;

        //console.log(datas);

        var geocoder = new google.maps.Geocoder();              
        geocoder.geocode( { 'address': datas['area'] }, function(datas){ return function(results,status)
        {

            if(status == google.maps.GeocoderStatus.OK)
            {
                var latlng = new google.maps.LatLng(results[0].geometry.location.Ya, results[0].geometry.location.Za);

                datas['latlng'] = latlng;

                //console.log(datas);                       

            }                               
        }}(datas));
     }      
}); 
```

这可以防止 for 循环更新匿名函数使用的 datas 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:38:31.800

我认为必须将数据声明为全局数组？有吗？

# python - 对打开文件的脚本进行单元测试

> ID：13520279
> 
> 赞同：7
> 
> 时间：2012-11-22T21:34:22.487
> 
> 标签：python, unit-testing

我编写了一个脚本，它可以打开一个文件、读取内容并进行一些操作和计算，并将它们存储在集合和字典中。

我将如何为这样的事情编写单元测试？我的问题具体是：

1.  我会测试文件是否打开？
2.  该文件很大（它是 unix 字典文件）。我将如何对计算进行单元测试？我真的必须手动计算所有内容并测试结果是否正确吗？我有一种感觉，这违背了单元测试的全部目的。我没有通过标准输入接受任何输入。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T21:48:07.240

这不是单元测试的意义所在！

1.  您的文件不代表一个单位，所以不，您不测试文件或使用文件！
2.  您的单元测试应该测试处理 a) 文件处理 b) 计算的函数/方法的每一个方法
3.  您的单元测试超出被测单元的代码行的情况并不罕见。

单元测试意味着（不完整，也不是书本定义）：

*   简约/原子 - 您将单位拆分为可能的最基本/最简单的单位；单元通常是可调用的（方法、函数、可调用对象）
*   关注点分离——你在每一个测试中只测试一件事；如果要测试单个单元的不同条件，则编写不同的测试
*   确定性 - 你给单位一些东西来处理，事先知道它的结果应该是什么
*   如果您的被测单元需要特定的环境，您可以创建一个fixture/test-setup/mock-up
*   单元测试（根据经验）非常快！如果速度很慢，请检查您是否从上方违反了另一点
*   如果您需要测试某些违反上述某些内容的内容，您可能已经在集成测试的测试中迈出了下一步
*   您可以使用单元测试框架而不是单元测试，但不要仅仅因为使用单元测试框架而将其称为单元测试

这个人（Gary Bernhardt）有一些有趣的[实际例子](https://www.youtube.com/watch?v=RAxiiRPHS9k)来说明测试和单元测试的含义。

**更新**一些澄清：

“1\. 我会测试文件是否打开了吗？”

好吧，您可以这样做，但是“单位”是什么？请记住，测试只有两种解决方案：通过和失败。如果您的测试失败，它应该（理想情况下必须）只有一个原因：您的单元（=函数）很烂！但是在这种情况下，您的测试可能会失败，因为： * 文件不存在 * 已锁定 * 已损坏 * 没有文件句柄 * 内存不足（大文件） * 月相等等。

那么失败（或通过）“单元”测试对您的单元有何影响？您不会单独测试您的单元，而是测试整个周围的环境。这更像是一个系统测试！如果您想测试是否成功打开文件，您至少应该模拟一个文件。

“2 ...我将如何对计算进行单元测试？我真的必须手动计算所有内容并测试结果是否正确吗？”

不。您将为极端情况和常规情况编写测试，并根据已处理的情况检查预期结果。所需测试的数量取决于计算的复杂性和规则的例外情况。

例如：

```
def test_negative_factor(self):
   assert result 

def test_discontinuity(self):
   assert raise exception if x == undefined_value 
```

我希望我让自己更清楚！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T16:07:30.213

您应该将代码重构为可单元测试。那，在我的头顶上，会说：

1.  将文件打开的功能放到一个单独的单元中。使该新单元接收文件名，并返回内容流。
2.  让您的单元接收流并读取它，而不是打开文件并读取它。
3.  为您的主要（计算）单元编写单元测试。您需要模拟一个流，例如来自字典。编写几个测试用例，每次为您的单元提供不同的流，并确保您的单元为每个输入计算正确的数据。
4.  尽可能让您的代码覆盖率接近 100%。使用鼻子测试进行覆盖。
5.  最后，为您的“流提供者”编写一个测试。向它提供几个文件（将它们存储在您的测试文件夹中），并确保您的流提供者正确读取它们。
6.  让第二个单元测试的覆盖率尽可能接近 100%。
7.  现在，也只有现在，提交您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:39:12.937

您还没有解释计算是什么，但我想您的程序也应该能够处理大文件的一个子集。如果是这种情况，请进行单元测试，打开一个小文件，进行计算并产生一些结果，您可以验证它是正确的。

# .net - 如何防止线程内的无限循环消耗所有 CPU 资源？

> ID：13520283
> 
> 赞同：1
> 
> 时间：2012-11-22T21:35:00.497
> 
> 标签：.net, multithreading, cpu, cpu-usage

我编写了一个 .NET 应用程序，该应用程序生成一个线程，该线程在检查以确保某些条件为真时无休止地循环。任务管理器显示，在生成此线程的那一刻，应用程序使用几乎所有可用的 CPU 资源，只要线程运行，这是应用程序的生命周期。

如何防止这个线程使用这么多的 CPU 资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:39:14.107

防止消耗 CPU 的最佳方法是等到所需条件为真。使用某种同步原语来协调您的线程。一个活动将是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:36:50.257

**如果您必须等待来自其他线程的数据，请使用监视器：http:** [//msdn.microsoft.com/de-de/library/system.threading.monitor%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/system.threading.monitor%28v=vs.80%29.aspx)

如果这不可能，您可以考虑在 while 循环中添加一个睡眠时间，例如 10 毫秒。这应该会有所帮助。

```
while(true) {
     //Do something here
     Thread.Sleep(10); //Don't consume whole CPU
} 
```

另请参阅以下相关帖子：[Thread.Sleep 或 Thread.Yield](https://stackoverflow.com/questions/11480912/thread-sleep-or-thread-yield)

# html - 在 Ruby 中输出 HTML 不使用 html_safe

> ID：13520284
> 
> 赞同：0
> 
> 时间：2012-11-22T21:35:02.067
> 
> 标签：html, ruby-on-rails, ruby, escaping

我有一个循环输出我从网站上获取的一些信息。为了使信息以可读的方式显示，我`<br>`在字符串中添加了一个。但是，当它运行时，它会显示`<br>`，转义 html。我使用了 html_safe 和 raw 但都不起作用。代码有什么问题？代码在视图主页中调用（别担心，一旦代码工作，我会移动它）。

```
<%= 

 require 'rubygems'
 require 'nokogiri'
 require 'open-uri'

time = Time.new
month = I18n.t("date.abbr_month_names")[time.month]
day = time.day
"#{month} #{day}"

#United States
cities = [
   "sfbay", "losangeles", "athensga", "phoenix", "santabarbara", "denver",
   "panamacity", "miami", "austin", "bakersfield", "keys", "newyork"
]

cities.map do |city|

#Search Terms
search_terms = ["mechanic", "car", "tech"]

search_terms.map do |term|

  escaped_term = CGI.escape(term)

  url = "http://#{city}.craigslist.org/search/jjj?query=#{escaped_term}&catAbb=jjj&
  srchType=A"

  doc = Nokogiri::HTML(open(url))

  doc.css(".row").map do |row|

      date = row.css(".itemdate").text

      a_tag = row.css("a")[0]

      text = a_tag.text

      link = a_tag[:href]

      if date = "#{month} #{day}"
        @strings << "#{date} #{text} #{link}"
      end

  end

 end

end

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:48:16.377

```
doc.css(".row").map do |row|
  date = row.css(".itemdate").text
  a_tag = row.css("a")[0]
  text = a_tag.text
  link = a_tag[:href]
  if date = "#{month} #{day}"
    "<br/>".html_safe + "#{date} #{text} #{link}"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:49:43.883

嗯，完全不确定，但请尝试以下方法：

```
doc.css(".row").map do |row|

  date = row.css(".itemdate").text
  a_tag = row.css("a")[0]
  text = a_tag.text
  link = a_tag[:href]

  if date = "#{month} #{day}"
    @string = "#{date} #{text} #{link}<br />"
  end

end.html_safe 
```

另一种方法，不是解决你的问题，而是在每行显示 br ：

```
# in controller or whatever
@strings = []
if date = "#{month} #{day}"
  @strings << "#{date} #{text} #{link}"
end

# in the view:
<%= raw(@strings.join('<br />')) %> 
```

# python - python距离旅行列表

> ID：13520287
> 
> 赞同：0
> 
> 时间：2012-11-22T21:35:12.580
> 
> 标签：python, list

我正在尝试创建一个程序，我可以在其中跟踪一个角色在 1D 跑步游戏中行进的距离。我显示正在运行的世界的代码如下：

```
def display (track):
    r = 0
    c = 0

    print("\nTRACK")
    for r in range (0, (4), 1):
        for c in range (0, (41), 1):
            sys.stdout.write(track[r][c])
        print()
    print()

def initialize ():
    r = 0
    c = 0
    track = []
    #Creates each row and column. A "for" loop initiates which creates and appends an empty list to the list "track". Then, taking the current row into consideration, the respective number of columns are created via the inner "for loop and a space is appended to the end of the current row. The loop re-initiates and the process is repeated for all 4 required rows. This results in 4 rows and 41 coloumns.
    for r in range (0, (4), 1):
    #appends an empty list to track
        track.append([])
        for c in range (0, (41), 1):
    #appends a space to the current row
            track[r].append(" ")
    # the actual rows and columns are created below.
    #               0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O   P   Q   R   S   T   U   V   W   X   Y
    track  [0] =   [" ","0"," ","1"," ","2"," ","3"," ","4"," ","5"," ","6"," ","7"," ","8"," ","9"," ","A"," ","B"," ","C"," ","D"," ","E"," ","F"," ","G"," ","H"," ","I"," ","J"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "]
    track  [1] =   [" ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," "]
    track  [2] =   ["|","@","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"]
    track  [3] =   [" ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," "]
    return track 
```

现在正在运行的字符由 track[2][1] 中的“@”符号表示。用户将输入一个数字，根据该数字，跑步者将向右移动许多地方，并且将再次显示赛道并再次询问用户，直到跑步者完成。

我的问题在于创建一个将跑步者向前移动到空白空间“”的功能，同时将跑步者所在的旧空间变成空白空间“”，并将新空间变成跑步者“@”。这是我尝试过的一种格式：

```
def displayDistance(distanceTravelled,track):
    location= track[2].index("@")
    currentDistance= track[2][location]
    nextDistance= track[2][location+distanceTravelled]
    currentDistance= " "
    nextDistance="@" 
```

我对列表相当陌生，因此我遇到了这个问题。最后一点，如果字符“@”移动到“|” （边界空间）然后他应该自动移动到下一个可用的空白空间“”。同样，如果跑步者到达终点，无论是否输入更多输入，他都不应该进一步移动。如果有任何不清楚的地方，请告诉我，我会尽快解决。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:49:06.543

您遇到的这个问题与这些行有关：

```
currentDistance= track[2][location]
nextDistance= track[2][location+distanceTravelled]
currentDistance= " "
nextDistance="@" 
```

他们不会做你想做的事，因为你只是将值分配给局部变量，而不是`track`列表的内容。如果你跳过局部变量，你应该有更好的结果：

```
track[2][location] = " "
track[2]location+distanceTravelled] = "@" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:50:59.140

要将跑步者的旧位置设置为空白，您应该在 track[2] 中提供一个新值。给 currentDistance 一个新值是没有意义的。下一个距离也一样。所以：

```
track[2][location]=" "
if track[2][location+distanceTravelled]=="|":
   track[2][location+distanceTravelled+1]="@"
else:
   track[2][location+distanceTravelled]="@" 
```

现在在 Track[2] 中都有新的值。但是，当距离旅行 + 其旧位置长于轨道 [2] 的实际长度时，您应该采取预防措施。然后它会给出错误。祝你好运

# jquery - 加/减切换而不是文本

> ID：13520289
> 
> 赞同：0
> 
> 时间：2012-11-22T21:35:23.983
> 
> 标签：jquery, html, css

过去几天我一直在开发菜单。它将用作可扩展/可折叠（甚至是一个词吗？）菜单。现在我默认菜单垂直变大，然后当你点击“+/-”按钮时，尺寸垂直减小。您再次单击它，然后它会垂直变大..等等。

这是 JQuery 部分：

```
$(window).load(function() {
    $('.gh-gallink').toggle(function() {
        $('.gallery_container').animate({
            marginTop: "-60px",
            paddingTop: "75px",
            paddingBottom: "0px",
            height: "36px"
        }, 1000)
    }, function() {
        $('.gallery_container').animate({
            marginTop: "0px",
            paddingTop: "40px",
            paddingBottom: "0px",
            height: "100px"
        }, 1000);
    });
}); 
```

这是切换按钮的 html：

```
< p class = "gallerylink" >
< a href="#" class="gh-gallink" title="Expand / Collapse Menu" >
    + / -
< /a >
< /p > 
```

所以现在，一切都很好。菜单功能正常，当您单击“+/-”时，它要么垂直变小，要么垂直变大。但是，我希望菜单默认显示“-”（因为默认情况下菜单很大）。然后当您单击 - 符号并且它变小时，我希望有一个“+”。淡入/淡出过渡也很棒。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:40:17.330

假设您通过`animate()`简单地将`text()`方法链接到`animate()`并明确定义来直接更改大小：

```
/* ...the animate stuff to make smaller...*/});
$(this).text('+');

/* ...the animate stuff to make larger...*/});
$(this).text('-'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RC9fU/1/)。

# python - 在 HTCondor 中导入本地 python 模块

> ID：13520290
> 
> 赞同：3
> 
> 时间：2012-11-22T21:35:27.720
> 
> 标签：python, import, module, submit, condor

这涉及在 HTCondor 作业中导入我自己的 python 模块。

假设“mymodule.py”是我要导入的模块，并保存在名为 XDIR 的目录中。在另一个名为 YDIR 的目录中，我编写了一个名为 xImport.py 的文件：

```
#!/usr/bin/env python
import os
import sys
print sys.path
import numpy
import mymodule 
```

和一个秃鹰提交文件：

```
executable = xImport.py
getenv = True
universe = Vanilla
output = xImport.out
error = xImport.error
log = xImport.log
queue 1 
```

提交的结果是，在 xImport.out 中，打印出 sys.path，显示 XDIR。但是在 xImport.error 中，有一个 ImporError 说“没有名为 mymodule 的模块”。所以看起来mymodule的路径在sys.path中，但是python没有找到。我还想提一下，错误消息说 ImportError 来自文件

```
/mnt/novowhatsit/YDIR/xImport.py 
```

而不是`YDIR/xImport.py`。

如何编辑上述文件以导入 mymodule.py？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T17:05:22.737

当 condor 运行你的进程时，它会在该机器上创建一个目录（通常在本地硬盘上）。它将其设置为工作目录。这可能就是您看到的问题。如果 XDIR 在您运行 condor_submit 的机器上是本地的，那么它的内容在运行 xImport.py 的远程机器上不存在。

尝试使用 .submit 功能 transfer_input_files 机制（参见[http://research.cs.wisc.edu/htcondor/manual/v7.6/2_5Submitting_Job.html](http://research.cs.wisc.edu/htcondor/manual/v7.6/2_5Submitting_Job.html)）将 mymodule.py 复制到远程机器。

# sql - 将循环数据插入sql

> ID：13520294
> 
> 赞同：2
> 
> 时间：2012-11-22T21:35:54.780
> 
> 标签：sql, xpath

我正在尝试用 xpath 抓取一些数据，然后插入到 SQL 中。

Echo 工作正常，但插入 sql 时，它只得到第一行。

例子：

```
 <?php 
    $res=mysql_query("SELECT table.title, table.link FROM table WHERE table.link LIKE 'http://www.%' AND streams.title = ''");
    while($row=mysql_fetch_array($res))
    {
      $html = new DOMDocument();
      @$html->loadHtmlFile($row["link"]);
      $xpath = new DOMXPath($html);

      foreach ($xpath->query("//table[@style='margin-left: 5px;']//td[@width='150']//a") as $files)
      {
        $html = new DOMDocument();
        @$html->loadHtmlFile($files->getAttribute('href'));
        $xpath = new DOMXPath($html);

        $hl = $xpath->query("//div[@style='width:742px']/a[preceding-sibling::div[@id='help1']]/@href")->item(0)->nodeValue;
        $link=serialize(array('link' => $hl));
        $link=sqlesc($link); 
        echo $link; // all lines gets printed, thats okay?
        mysql_query("UPDATE streams SET streams.hl=$link") or die(mysql_error()); // Only first line gets inserted, why?
      }

    }  
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:27:57.047

您正在更新所有行，并且所有行都包含相同的数据，因为上次更新更新了所有行，您是要更新现有行还是只插入新行？

如果你想插入试试这个

```
INSERT INTO streams (hl) VALUES ($link) 
```

如果表中还有其他非可选列，也插入这些值

# c# - LINQ 行索引检索强制转换要求

> ID：13520295
> 
> 赞同：1
> 
> 时间：2012-11-22T21:36:01.020
> 
> 标签：c#, .net, winforms, linq

`DataGridView`所有，我在（DGV）中有行。为了测试添加到此 DGV 的项目是否已经存在，我编写了一个方法，该方法使用以下 LINQ 查询返回匹配行的行索引（而不是`for/foeach`循环）：

```
IEnumerable<int> rowCol = this.dataGridViewAttachList.Rows.Cast<DataGridViewRow>()
    .Where(row => row.Cells[(int)DgvColumns.DatabaseName].Value.ToString()
        .Equals(databaseName, StringComparison.OrdinalIgnoreCase))
    .Select(row => row.Index); 
```

我的问题是：**为什么我必须使用 投射`Cast<DataGridViewRow>()`？**我第一次尝试不使用它，但我花了一段时间才解决这个问题。但我不清楚为什么有必要？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T21:39:38.920

这是因为`DataGridViewRowCollection`implements`IEnumerable`而不是`IEnumerable<DataGridViewRow>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:39:59.897

`DataGridView`.Rows 是类型`DataGridViewRowCollection`，它实现了`IEnumerable`. LINQ 扩展方法需要`IEnumerable<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:43:24.643

这是因为`DataGridViewRowCollection`（ Rows 属性的类型）是 nongeneric `IEnumerable`。`IEnumerable<DataGridViewRow>`因此，要获得linq 可以使用的通用版本，您应该调用 .`Cast<DataGridViewRow>()`

# objective-c - 无法在 uicollectionview、UICollectionView 的特定 indexPath.row 处为单元格设置标题

> ID：13520297
> 
> 赞同：2
> 
> 时间：2012-11-22T21:36:02.840
> 
> 标签：objective-c, ios, uicollectionview, uicollectionviewcell

在 UICollectionView 上工作时，我正在从 nib 加载一个单元格，如下所示

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    /* Uncomment this block to use nib-based cells */
    UINib *cellNib = [UINib nibWithNibName:@"NibCell" bundle:nil];
    [self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"cvCell"];

    // Configure layout
    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
    self.collectionView.contentInset    =   UIEdgeInsetsMake(10.0f, 0.0f, 10.0f, 0.0f);

    [flowLayout setItemSize:CGSizeMake(300, 200)];
    [flowLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
    [self.collectionView setCollectionViewLayout:flowLayout];
} 
```

我的笔尖文件如下所示

![在此处输入图像描述](../Images/2879fc39c36ba000a7d9651092bb5e87.png)

顶部标签用于显示单元格的数量，中间标签用于显示某个文本

在方法**cellForItemAtIndexPath**中，我只想将文本设置为特定行的单元格（在此示例中，我在第 1 行执行此操作）：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

     // Setup cell identifier
     static NSString *cellIdentifier = @"cvCell";

     UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
     UILabel *titleLabel    = (UILabel *)[cell viewWithTag:100];
     UILabel *cellLablel    = (UILabel *)[cell viewWithTag:200];
     cellLablel.text         =   self.dataArray[0][indexPath.row];
     if ( indexPath.row == 1)
         [titleLabel setText:@"this is row 1"];

    return cell;

} 
```

运行应用程序时，出现问题。不仅**row1**单元格的**titleLabel** 设置为， row5 和 row9 和 row10 的 titleLabel 也设置为： **`This is row 1`![在此处输入图像描述](../Images/9bd0c4bf1009221ae7ef1aee455a6511.png)**

 **![在此处输入图像描述](../Images/75626fdbff93029f72f24cceda6aad0b.png)

如果有人知道我在中间做错了什么。请帮忙。

我的收藏本节包含 1 节和 15 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:53:05.117

细胞被重复使用。一旦您向下滚动并且单元格 1 变得不可见，集合视图就会使其再次可用。只需为所有单元格设置文本，例如

```
titleLabel.text = [NSString stringWithFormat:@"this is row %d", indexPath.row]; 
```**

# algorithm - MPI: Confusion with algorithm realization

> ID：13520304
> 
> 赞同：0
> 
> 时间：2012-11-22T21:36:34.763
> 
> 标签：algorithm, matrix, mpi

I have a plain code:

```
double eps;
A[N][N][N]; 

    ...

        for(i=1; i<=N-2; i++)
            for(j=1; j<=N-2; j++)
                for(k=1; k<=N-2; k++)
                {
                    A[i][j][k] = (A[i-1][j][k]+A[i+1][j][k])/2.;
                }
        for(i=1; i<=N-2; i++)
            for(j=1; j<=N-2; j++)
                for(k=1; k<=N-2; k++)
                {
                    A[i][j][k] = (A[i][j-1][k]+A[i][j+1][k])/2.;
                }
        for(i=1; i<=N-2; i++)
            for(j=1; j<=N-2; j++)
                for(k=1; k<=N-2; k++)
                {
                    double e;
                    e=A[i][j][k];
                    A[i][j][k] = (A[i][j][k-1]+A[i][j][k+1])/2.;
                    eps=Max(eps,fabs(e-A[i][j][k]));
                } 
```

And i need to make a parallel code with usage MPI.

Ok, i understand, what to do with `eps` - it is global variable, that i need to compute everywhere. so, i create local variable, compute it and return result from each node. Or make reduce.

But what to do with matrix `A`? It must be shared by every node. How to synchronize every triple `for` construction? (if use see, that current `A[i][j][k]`-element is calculated with usage his neighbors - left and right `A[i-1][][] A[i+1][][]` or top and bottom `A[][j+1][] A[][j-1][]` or front and back `A[][][k-1] A[][][k+1]`)

Thank you!

First Edition:

My first solution is to replace `for` constructions to minimize dependency from indexes such this:

```
 for(j=1; j<=N-2; j++)
            for(k=1; k<=N-2; k++)
//MPI here, Send processor (j,k) - coordinates of vector to compute next statement
                for(i=1; i<=N-2; i++)
                {
                    A[i][j][k] = (A[i-1][j][k]+A[i+1][j][k])/2.;
                } 
```

and so on:

```
 for(i=1; i<=N-2; i++)
            for(k=1; k<=N-2; k++)
                for(j=1; j<=N-2; j++)
//here (i,k) is free dimensions, dependency only from j. send vector(i,k) to every processor
                {
                    A[i][j][k] = (A[i][j-1][k]+A[i][j+1][k])/2.;
                }

        for(i=1; i<=N-2; i++)
            for(j=1; j<=N-2; j++)
                for(k=1; k<=N-2; k++)
//dependency only from k, (i,j) are free. send it to processor
                {
                    double e;
                    e=A[i][j][k];
                    A[i][j][k] = (A[i][j][k-1]+A[i][j][k+1])/2.;
                    eps=Max(eps,fabs(e-A[i][j][k]));
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:34:23.703

Your algorithm exhibits data dependence, very similar to that of 3D FFT algorithms. No matter how you choose to distribute the data, it would not be the optimal distribution for one of the loops. E.g. if you distribute along the `k` axis, then the first and the second loop could be run in parallel, but not the last loop.

The solution is to transpose the matrix before the last loop. Global transposition of a distributed matrix is usually done using an all-to-all operation, either `MPI_ALLTOALL` or `MPI_ALLTOALLV`, depending if the matrix was divided in equally sized chinks or not (which generally depends on if the matrix size is divisible by the number of MPI processes or not). Take a look at [this excellent answer](https://stackoverflow.com/a/5655487/1374437) by Jonathan Dursi. It is for the 2D case but can easily be extended to 3D too.

# magento - 如何在magento中指定分层导航过滤器顺序？

> ID：13520309
> 
> 赞同：3
> 
> 时间：2012-11-22T21:37:05.967
> 
> 标签：magento, mage

我在 magento 中使用 Amasty shopby 扩展。有没有办法重新排序过滤器？例如，如果我想在价格之前放置滤色器。我该怎么做？

有没有办法在管理面板中做到这一点？或者也许通过数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T22:00:45.720

IIRC，您有权在 amasty 扩展中设置价格过滤器的位置。确保价格的位置小于您可以在`Manage attributes`部分中设置的颜色位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T16:27:48.857

是的，请使用`admin > catalog > attributes > manage attributes > color`并设置位置值。唯一的例外是类别，因为它们不是属性。`admin > system > settings > amasty > improved navigation`您可以在该部分设置类别位置。

# python - Python中的峰值检测

> ID：13520319
> 
> 赞同：3
> 
> 时间：2012-11-22T21:37:52.920
> 
> 标签：python, r, time-series

在时间序列中，我们可以找到峰值（最小值和最大值）。有一些算法可以找到峰值。我的问题是：

在 python 中是否有用于时间序列数据中峰值检测的库？或者在 R 中使用 RPy 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:02:15.570

计算样本点的推导，例如每 5 个点（阈值！）使用最小二乘法计算五个点的斜率（如果您不知道它是什么，请在 wiki 上搜索。任何线性回归函数都使用它）。当这个斜率几乎（阈值！）为零时，就会出现一个峰值。

# iphone - 连接到 Internet 时禁用警报视图

> ID：13520322
> 
> 赞同：-2
> 
> 时间：2012-11-22T21:38:06.273
> 
> 标签：iphone, ios, xcode, ipad, alert

我有一个警报视图，当没有互联网连接时会弹出。我有办法在有互联网连接时禁用它…… **工作代码：**

```
-(void)reachabilityChanged:(NSNotification*)note

    {
        Reachability * reach = [note object];

        if([reach isReachable])
        {
            notificationLabel.text = @"Notification Says Reachable";
            NSLog(@"Internet is Up");

        }
        else
        {
            notificationLabel.text = @"Notification Says Unreachable";
            NSLog(@"Internet is Down");
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please connect to Internet"
                                                            message:nil
                                                           delegate:self
                                                  cancelButtonTitle:nil
                                                  otherButtonTitle:nil
            [alert show];
        }
    }

-(void)dismissAlert:(UIAlertView *)alertView{
          [alertView dismissWithClickedButtonIndex:0 animated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:06:21.433

您可以将 alertView 保留为实例变量，然后在您的 iVar 上调用 didDismissWithButtonIndex。因此，您可以在 viewDidLoad 中分配警报并在以下情况下使用它：

```
-(void)reachabilityChanged:(NSNotification*)note{
        Reachability * reach = [note object];
        if([reach isReachable])
        {
            notificationLabel.text = @"Notification Says Reachable";
            NSLog(@"Internet is Up");
            [self performSelector:@selector(dismissAlert:) withObject:alert afterDelay:0];
        }
        else
        {
            notificationLabel.text = @"Notification Says Unreachable";
            NSLog(@"Internet is Down");
            //or you can realloc here your alert
            UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
            progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
            [alert addSubview:progress];
            [progress startAnimating];
            [alert show];
        }
    }

    -(void)dismissAlert:(UIAlertView *)alertView{
              [alertView dismissWithClickedButtonIndex:0 animated:YES];
    } 
```

并确保`UIAlertViewDelegate`在您的头文件中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:44:48.090

> *   (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex

使用 buttonIndex 0 将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:57:29.210

`UIAlertView`您可以使用以下实例方法关闭s：

```
- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated 
```

IE

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

当然，您首先需要找到对该警报视图的引用。

[UIAlertView 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instm/UIAlertView/dismissWithClickedButtonIndex%3aanimated%3a)

# c - 将特定数据分配给文本文件中的变量

> ID：13520323
> 
> 赞同：0
> 
> 时间：2012-11-22T21:38:07.150
> 
> 标签：c, text-files, variable-assignment

似乎在互联网上的任何地方都找不到有关如何使用文本文件中的数字分配变量的示例。假设我们有一个像这样的文本行

222 333 3242 33231 34123 32321

如果我想分配一个变量让我们说 34123，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:37:37.903

您可以使用[fscanf](http://encyclopedia.thefreedictionary.com/scanf)

例如/

```
int main()
{
  int i1, i2, i3, i4, i5, i6;

  FILE *my_stream;
  char my_filename[] = "exciting_numbers.txt";
  my_stream = fopen (my_filename, "r");

  fscanf (my_stream, "%i %i %i %i %i %i", &i1, &i2, &i3, &i4, &i5, &i6);

  fclose (my_stream);
} 
```

如果您不知道要读取多少个整数，那么您可以对循环中的一个整数执行类似的操作，该循环会在找到 EOF 时中断？

# java - 多条消息 udp

> ID：13520329
> 
> 赞同：0
> 
> 时间：2012-11-22T21:38:45.930
> 
> 标签：java, android, udp

我正在尝试将多个数据包从 android 服务器发送到客户端，但问题是代码仅在 2 次迭代后停止，然后它以未捕获的异常退出，所以我做错了什么。你能帮我吗？

```
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.net.UnknownHostException;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainTalker extends Activity 
{
private static DatagramSocket socket;
private static DatagramPacket packet;
private static Thread send;
private Button cl1;
private static EditText ed1;
private static String msg = "Message";
private static byte[] data = new byte[15];
//private static byte[] pktcount = new byte[10];
private static String TAG = "Sender UDP";
static int count=0;
static String[] output = new String[100] ;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_talker);

    ed1 = (EditText) findViewById(R.id.msg);
    cl1 = (Button) findViewById(R.id.send);

    try {
        socket = new DatagramSocket(11001);
        Toast toast = Toast.makeText(getApplicationContext(),"Port Opened",Toast.LENGTH_SHORT);
        toast.show();
        System.out.println("Port Opened ");
        socket.setBroadcast(true);
    } catch (Exception e) {
        System.out.println("Exception: Port not opened");
        e.printStackTrace();
        Log.e(TAG, e.getMessage());
    }

    cl1.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            System.out.println("Button Clicked ");

            send = new sendthr();
            send.start();
        }
    });
}

private static class sendthr extends Thread {
    public void run()
    {
            System.out.println("Thread Started");

            String messg = ed1.getText().toString();
            System.out.println(messg);
            for (int i=0; i<=messg.length(); i+=10)
            {
                if(messg.length()>i+10)
                    output[i] = messg.substring(i,i+10);
                else
                    output[i]=messg.substring(i);
                count++;
                output[i+1] =count + ": " + output[i];
                System.out.println(output[i+1]);
            }
            output[0] = Integer.toString(count);
            System.out.println(count);
            if (messg == null)
                messg = msg;
            int i =0;
            while(i !=count)
            {
            data = output[i].getBytes();
            try
            { //Create packet with target host and target port
                packet = new DatagramPacket(data,data.length,InetAddress.getByName("192.168.8.17"), 11001);
                System.out.println("Packet Created");

            } catch (UnknownHostException e) {
                System.out.println("Exception: Packet Created");

                e.printStackTrace();
                Log.e(TAG, e.getMessage());
            }

            try
            {
                System.out.println("Sending the packet  "+ msg);
                socket.send(packet);
                System.out.println("Packet sent");
            } catch (IOException e) {
                System.out.println("Exception: Packet Send");
                e.printStackTrace();
                Log.e(TAG, e.getMessage());
            }
            i++;
        }     
} 
```

} }

*这是我遇到的错误消息：

```
11-22 15:58:59.381: W/dalvikvm(1223): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
11-22 15:59:00.251: E/AndroidRuntime(1223): FATAL EXCEPTION: Thread-114
11-22 15:59:00.251: E/AndroidRuntime(1223): java.lang.NullPointerException
11-22 15:59:00.251: E/AndroidRuntime(1223):     at com.example.a_talker.MainTalker$sendthr.run(MainTalker.java:89)
11-22 15:59:00.701: W/IInputConnectionWrapper(1223): showStatusIcon on inactive InputConnection* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:09:17.360

你在第 89 行得到了 NPE。根据我的计算，它是：

```
packet = new DatagramPacket(data,data.length,InetAddress.getByName("192.168.8.17"), 11001); 
```

如果是这样，那么很可能`data`是`null`。（如果第 89 行在别处，请指出是哪一行）。

也不叫

```
System.out.println(count); 
```

在安卓上。做

```
Log.i( TAG, "count: " + count ); 
```

你在多个地方得到了这个（第 54、80、93、101、103、105 行......），所以把它们都修好

# c# - 反序列化不会重建属于类成员的字典

> ID：13520330
> 
> 赞同：1
> 
> 时间：2012-11-22T21:39:10.550
> 
> 标签：c#, .net, serialization

我有一些序列化代码设置如下：

```
 static void SerialiseObject(Object o, String path)
    {
        IFormatter formatter = new BinaryFormatter();
        Stream stream = new FileStream(path, FileMode.Create);
        formatter.Serialize(stream, o);
        stream.Close();
    }
    static Object DeserialiseObject(String path)
    {
        IFormatter formatter = new BinaryFormatter();
        Stream stream = new FileStream(path, FileMode.Open, FileAccess.Read);
        Object o = (Object)formatter.Deserialize(stream);
        stream.Close();
        return o;
    } 
```

并且定义了以下成员的类：

```
[Serializable]
public class CircuitModel
{
    public Dictionary<String, Bus> Buses { protected set; get; }
    ...
} 
```

我填充字典，然后以下代码成功序列化和反序列化字典，所有`Bus`对象都完好无损：

```
SerialiseObject(CircuitModel.Buses, "temp.bin");
Object o = DeserialiseObject("temp.bin"); 
```

但是当我尝试对以下内容做同样的事情时`CircuitModel`：

```
SerialiseObject(CircuitModel, "temp.bin");
Object o = DeserialiseObject("temp.bin"); 
```

`CircuitModel.Buses`已初始化，但为空。

我也尝试过使用`ISerializable`（对于`Bus`和`CircuitModel`类）实现序列化并且遇到了完全相同的问题

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:05:57.793

我认为您的子集合有更险恶的事情发生，因为类中字典的二进制序列化确实工作得很好。

```
 [TestFixture]
public class SerializeTest
{

    [Test]
    public void TestSer()
    {
        var parent = new Parent
                        {
                            Name = "Test"
                        };
        parent.Children.Add("Child1", new Child {Name = "Child1"});
        parent.Children.Add( "Child2", new Child { Name = "Child2" } );

        SerialiseObject(parent, "test.bin");
        var copy = DeserialiseObject("test.bin") as Parent;

        Assert.IsNotNull(copy);
        Assert.AreEqual(2, copy.Children.Count);
        Assert.IsTrue(copy.Children.ContainsKey("Child1"));
        Assert.AreEqual("Child1", copy.Children["Child1"].Name);
    }

    static void SerialiseObject( Object o, String path )
    {
        IFormatter formatter = new BinaryFormatter();
        Stream stream = new FileStream( path, FileMode.Create );
        formatter.Serialize( stream, o );
        stream.Close();
    }
    static Object DeserialiseObject( String path )
    {
        IFormatter formatter = new BinaryFormatter();
        Stream stream = new FileStream( path, FileMode.Open, FileAccess.Read );
        Object o = (Object) formatter.Deserialize( stream );
        stream.Close();
        return o;
    }

    [Serializable]
    private class Parent
    {
        public string Name { get; set; }
        public Dictionary<string, Child> Children { get; protected set; }

        public Parent()
        {
            Children = new Dictionary<string, Child>();
        }
    }

    [Serializable]
    private class Child
    {
        public string Name { get; set; }
    }
} 
```

The children deserialize with the parent and contain the details they were initialized with. I would check any code that is setting your `Buses` collection. My example just did it in the constructor of the parent class, but it may be possible that you have rogue code setting it after it's been deserialized?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:44:49.657

字典不可序列化。如果您需要序列化该数据，请删除字典，并将其替换为包含字典中数据的自定义类的列表：

```
[Serializable]
public class BusItem
{
    public string Name {get;set;}
    public Bus Bus {get;set;}
} 
```

编辑：我刚刚发现您实际上可以使用 the`DataContractSerializer`来序列化字典。

[http://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/](http://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T21:49:45.007

如果您正在谈论 XML 序列化，可能是因为 Dictionary 不能序列化为 XML。看看[为什么 .NET 中没有可序列化 XML 的字典](https://stackoverflow.com/questions/1124597/why-isnt-there-an-xml-serializable-dictionary-in-net/5941122#5941122)。

# c# - html敏捷包对象引用未设置为对象的实例

> ID：13520346
> 
> 赞同：1
> 
> 时间：2012-11-22T21:41:03.023
> 
> 标签：c#, asp.net-web-api, html-agility-pack

我用于解析 html 使用 Html Agility Pack 等 Grate 的东西，但我遇到了一些不好的事情：| 这是我的背景代码

```
public static HtmlDocument GetXHtmlFromUri2(string uri)
    {
        HttpClient client = HttpClientFactory.Create(new CustomeHeaderHandler());

        var htmlDoc = new HtmlDocument()
                                   {
                                       OptionCheckSyntax = true,
                                       OptionFixNestedTags = true,
                                       OptionAutoCloseOnEnd = true,
                                       OptionReadEncoding = true,
                                       OptionDefaultStreamEncoding = Encoding.UTF8,
                                   };

        htmlDoc.LoadHtml(client.GetStringAsync(uri).Result);

        return htmlDoc;

    } 
```

我对 WebApi (Mvc4) 使用 html 敏捷性，这是 Get Method Logic

```
//GET api/values
    public string GetHtmlFlights()
    {

        var result = ClientFlightTabale.GetXHtmlFromUri2("http://ikiafids.ir/departureFA.html");
        HtmlNode node = result.DocumentNode.SelectSingleNode("//table[1]/tbody/tr[1]");

        string temp = node.FirstChild.InnerHtml.Trim();

        return temp;

    } 
```

但是当我调用这个方法（从浏览器和提琴手）遇到异常时，这个主题：

对象引用未设置到对象的实例，并且这个异常 关注这一行

```
string temp = node.FirstChild.InnerHtml.Trim(); 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:28:04.993

我想你正在寻找这样的东西：

```
var result = ClientFlightTabale.GetXHtmlFromUri2("http://ikiafids.ir/departureFA.html");
var tableNode = result.DocumentNode.SelectSingleNode("//table[1]");

var titles = tableNode.Descendants("th")
                    .Select(th => th.InnerText)
                    .ToList();

var table = tableNode.Descendants("tr").Skip(1)
                    .Select(tr => tr.Descendants("td")
                                    .Select(td => td.InnerText)
                                    .ToList())
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:54:54.697

我认为您的选择器是错误的。试试这个？

```
result.DocumentNode.SelectSingleNode("//table/tr[1]") 
```

# c# - 从dataGrid中的选定行获取值

> ID：13520347
> 
> 赞同：0
> 
> 时间：2012-11-22T21:41:26.120
> 
> 标签：c#, wpf, datagrid, row

我正在将学生加载到我的数据网格中，然后想将他们分配给一个班级。我真的不在乎到底如何，但是我无法使任何方法起作用。

我尝试使用上下文菜单，但没有设法获取事件（以前从未使用过它）然后我在每一行中添加了一个按钮，但后来我不知道如何获取按钮所在的行是。我最后一次尝试是在组合框上获取 selectedItem 并使用 ToString() ，但这也不起作用。

看一下这个：

```
 private void dataGrid4_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        DataGrid dg = new DataGrid();
        dg = (sender as DataGrid);
        MessageBox.Show(dataGrid4.Items.GetItemAt(1).ToString());
        MessageBox.Show(dataGrid4.CurrentItem.ToString() + "\n" + dataGrid4.CurrentCell.Column.ToString() + "\n" + dataGrid4.CurrentCell.Item.ToString() + "\n" + dataGrid4.SelectedItem.ToString() + "\n" + dataGrid4.SelectedValue.ToString() + "\n" + dataGrid4.SelectedIndex.ToString());
        MessageBox.Show(dg.CurrentItem.ToString() + "\n" + dg.CurrentCell.Column.ToString() + "\n" + dg.CurrentCell.Item.ToString() + "\n" + dg.SelectedItem.ToString() + "\n" + dg.SelectedValue.ToString() + "\n" + dg.SelectedIndex.ToString());
    } 
```

请帮帮我，我快吓坏了..）：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:09:01.453

您可以像这样从网格中获取选定的项目：

```
<DataGrid Name="dgStudents" 
                  AutoGenerateColumns="False"
                  SelectionChanged="dgStudents_SelectionChanged">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
                <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" />
            </DataGrid.Columns>
        </DataGrid> 
```

事件处理程序：

```
private void dgStudents_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (e.AddedItems != null && e.AddedItems.Count != 0)
            {
                foreach (Student item in e.AddedItems)
                {
                    Console.WriteLine(item.ID);
                }
            }
        } 
```

简单的学生班：

```
class Student
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Surname { get; set; }
    } 
```

如果你想使用上下文菜单试试这个：

```
<DataGrid Name="dgStudents" 
                  AutoGenerateColumns="False">
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="ClassA" Click="ClassA_Click" />
                    <MenuItem Header="ClassB" Click="ClassB_Click" />
                </ContextMenu>
            </DataGrid.ContextMenu>

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
                <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" />
                <DataGridTextColumn Header="Class" Binding="{Binding ClassName}" />
            </DataGrid.Columns>
        </DataGrid> 
```

`MenuItem`在代码隐藏中添加两个事件处理程序：

```
private void ClassA_Click(object sender, RoutedEventArgs e)
        {
            if (dgStudents.SelectedItems != null && dgStudents.SelectedItems.Count != 0)
            {
                foreach (Student item in dgStudents.SelectedItems)
                {
                    item.ClassName = "ClassA";
                }
                dgStudents.Items.Refresh();
            }
        }

        private void ClassB_Click(object sender, RoutedEventArgs e)
        {
            if (dgStudents.SelectedItems != null && dgStudents.SelectedItems.Count != 0)
            {
                foreach (Student item in dgStudents.SelectedItems)
                {
                    item.ClassName = "ClassB";
                }
                dgStudents.Items.Refresh();
            }
        } 
```

将学生班级更改为：

```
 class Student
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Surname { get; set; }
        public string ClassName { get; set; }
    } 
```

# javascript - Jquery - 上传到文本区域后添加图像名称（使用 html5Uploader）

> ID：13520349
> 
> 赞同：0
> 
> 时间：2012-11-22T21:41:29.780
> 
> 标签：javascript, jquery

我正在尝试发明热水：D。我正在使用[html5Uploader](http://www.igloolab.com/jquery-html5-uploader/)并且一切正常（正在上传图像而没有任何错误）。问题来得有点晚，在这部分：

```
onServerLoad: function(e, file) {
    $('.img_upload').on('click', function() {
        $('#text').val($('#text').val() + $(this).attr('title'));
    });
} 
```

值被添加到**textarea**但它被添加次数，因为有上传的图像（例如，我有 5 个名称为**first.png**的图像，它将向 textarea 添加 **五次 first.png**）。我怎样才能避免这种情况？

```
$(function() {
    var fileTemplate = "<div id=\"{{id}}\">";
    fileTemplate += "<div class=\"preview\"></div>";
    fileTemplate += "<div class=\"filename\">{{filename}}</div>";
    fileTemplate += "</div>";

    function slugify(text) {
        text = text.replace(/[^-a-zA-Z0-9,&\s]+/ig, '');
        text = text.replace(/-/gi, "_");
        text = text.replace(/\s/gi, "-");
        return text;
    }
    $("#dropbox").html5Uploader({
        onClientLoadStart: function(e, file) {
            var upload = $("#upload");
            if (upload.is(":hidden")) {
                upload.show();
            }
            upload.append(fileTemplate.replace(/{{id}}/g, slugify(file.name)).replace(/{{filename}}/g, file.name));
        },
        onClientLoad: function(e, file) {
            $("#" + slugify(file.name)).find(".preview").append("<img class=img_upload title=\"" + file.name + "\" src=\"" + e.target.result + "\" alt=\"\">");
        },
        onServerLoad: function(e, file) {
            $('.img_upload').on('click', function() {
                $('#text').val($('#text').val() + $(this).attr('title'));
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:53:53.010

一种方法是检查它是否已经存在，如下所示：

```
var _val = $('#text').val(), title = $(this).attr('title');
if ( _val.indexOf( title ) === -1 ) {
    // here you add the code
    $('#text').val( _val + title );
} 
```

但我认为问题可能出在您获取名称的方式上，请尝试使用 e.target.result 或 file.name

```
var _val = $('#text').val(), name = file.name || e.target.result;
if ( _val.indexOf( name ) === -1 ) {
    // here you add the code
    $('#text').val( _val + name );
} 
```

如果您想多次添加同一个，有几种方法可以做到这一点。

通过 for 循环：

```
// this is if you want to add the duplicates immediately
var
    // the amount of times you want to create the duplicatation
    NUMBER_OF_TIMES = 10,
    // the current value
    _val = $('#text').val(),
    // the title
    title = $(this).attr('title');
if ( _val.indexOf( title ) === -1 ) {
    for ( var i = 0; i < NUMBER_OF_TIMES; i ++ )
        $('#text').val( _val + name );
} 
```

否则，您可以检查出现次数，然后在必要时追加：

```
// this is if you want to add the duplicates a certain number of times dynamically
var
    // the amount of times you want to create the duplicatation
    NUMBER_OF_TIMES = 10,
    // the current value
    _val = $('#text').val(),
    // the title
    title = $(this).attr('title')
    // Returns the number of occurences
    howMany = function(str, substr) {
        var intRet = 0;

        // continuously run until the substring isn't found anymore
        while ( str.indexOf(substr) !== -1 ) {
            // get rid of first substring
            str = str.replace(substr, '');
            // add one to the amount of substrings
            intRet++;
        }

        // check to see if there are any occurrences, if not, return -1
        return (intRet > 0 ? intRet : -1);
    };
if ( _val.indexOf( title ) === -1 && howMany(_val, title) <= NUMBER_OF_TIMES ) {
    $('#text').val( _val + name );
} 
```

我已尝试使评论尽可能提供信息，但如果您不理解其中的一部分，请在下方评论。试试看，告诉我它是怎么回事！XD

# html - min-height 不适用于多个子 div

> ID：13520350
> 
> 赞同：1
> 
> 时间：2012-11-22T21:41:33.700
> 
> 标签：html, position, absolute, css

我有一个网站，我使用高度自动设置内容 div 的高度和最小高度 100% 以确保内容 div 始终拉伸页面的高度。

我的 HTML 看起来像这样

```
<html>
<body>
 <div id="holder">
  <div id="outercontent">
   <div id="innercontent">
    content goes here
   </div>
  </div>
 </div>
</body>
</html> 
```

我的CSS规则如下

```
html,body {
    height:100%;
    color:white;
}

#holder {
    background-color:transparent;
    width:100%;
    min-height:100%;
    height:auto;
    position:absolute;
    z-index:1;
}
#outercontent {
    min-height:100%;
    height:auto;
    width:940px;
    margin-left:auto;
    margin-right:auto;
    background-color:transparent;
    background-image:url(../images/bowsides.png);
    background-repeat:no-repeat;
    overflow:hidden;
}
#innercontent {
    width:900px;
    height:auto;
    min-height:100%;
    margin-left:auto;
    margin-right:auto;
    background-color:#ffefce;
    overflow:hidden;
} 
```

持有人 div 是一个绝对定位的 DIV，我需要这个，因为我有一个旋转的背景，它将每个背景图像放在一个单独的绝对定位的 div 上。所以这个 div 使用 z-index 放置在它们之上。

外部内容比我的内部内容宽一点，这用于给我空间放置边框图像（因为尚未广泛支持 css3 边框图像）

内部内容是我的主要内容区域

min-height 100% 适用于 holder div（即组的最外层 div），但不适用于任何浏览器中的外层内容或内层内容

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:59:41.840

Can you try opening the source in IE by using deleveloper tools , I guess something is overriding the height , you will get the exact picture then

# iphone - 在点击时扩展 UITableViewCell？

> ID：13520351
> 
> 赞同：1
> 
> 时间：2012-11-22T21:41:34.773
> 
> 标签：iphone, objective-c, ipad, uitableview

当我点击它时，我需要扩展一个`UITableView`单元格（也为它设置动画）。但是我不知道被点击的单元格，我在这里看到了答案：[你可以在 UITableViewCell 上设置高度变化的动画吗？](https://stackoverflow.com/questions/460014/can-you-animate-a-height-change-on-a-uitableviewcell-when-selected)

这似乎是一个非常受欢迎的答案，而不仅仅是在问题中。但是，我需要获取单元格，那么如何在`heightForRowAtIndexPath`方法中获取单元格？

因为我试过这个：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

然而，在`heightForRowAtIndexPath`方法中使用它会使应用程序在第一次运行时（当视图加载时）崩溃，我认为它会陷入无限循环。

无论如何，如果我采用这种方法，你会建议我如何解决这个问题？我需要访问该单元格。或者您将如何扩展您的表格视图单元格（动画）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:00:16.093

继续调整高度。

我建议尽量从自动调整蒙版中获得尽可能多的信息，因为它们过去对我很有效。

如果您需要更细粒度的控制，您可以创建一个子类并覆盖该`setFrame:`方法以找出框架何时改变大小，然后在那里适当地设置动画。

# java - Java 中的正则表达式，如果找到“N”、“E”、“W”、“S”以外的任何字符，则返回 false

> ID：13520355
> 
> 赞同：0
> 
> 时间：2012-11-22T21:42:03.477
> 
> 标签：java, regex

我为正则表达式编写了一个 Java 程序。我正在寻找正则表达式，如果在文本中找到除这些“N”、“E”、“W”、“S”之外的任何字符，它实际上会返回错误。我在我的程序中使用了这个 Pattern.matches("[^NWES]", str) 它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:43:31.203

您需要在正则表达式中使用量词：-

```
return Pattern.matches("[NWES]+", str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:49:22.110

看来您正在寻找匹配指南针的有效点。如果是这样，这并不像您的问题建议的那样简单。

一个有效的罗盘点是`NSEW`肯定的，但是：

*   最多有两个不同的字母
*   `N`并且`S`永远不会同时出现
*   `E`并且`W`永远不会同时出现
*   如果`E`or`W`出现两次，它们是第一个和最后一个，中间有一个`N`和`S`
*   对于两个字母的点，N `and`S `appear before`E `and`W`
*   ETC

现在*可以*将其表示为正则表达式，但此时将罗盘点放入`enum`并用于[`valueOf()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Enum.html#valueOf%28java.lang.Class,%20java.lang.String%29)验证输入会更简单、更容易且更有用（如果输入无效，则会引发 IllegalArgumentException）

# winapi - 读取进程内存 Win32

> ID：13520357
> 
> 赞同：0
> 
> 时间：2012-11-22T21:42:42.423
> 
> 标签：winapi, readprocessmemory

```
ReadProcessMemory(hProc,(LPCVOID)(7845CDDC),&PHP,4,NULL); 
```

当我输入时，我在 Dev-C++ Win32 中收到此错误：

> C:\Dev-Cpp\main.cpp 整数常量上的无效后缀“CDDC”

知道为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T11:40:07.460

您可能需要一个十六进制常量，也就是说`0x7845CDDC`.

> ReadProcessMemory(hProc,(LPCVOID)(0x7845CDDC),&PHP,4,NULL);

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-13T04:25:27.913

**[ReadProcessMemory](https://docs.microsoft.com/en-us/windows/desktop/api/memoryapi/nf-memoryapi-readprocessmemory)**应该有**lpBaseAddress**参数作为指向要从中读取的指定进程中的基地址的指针。“7845CDDC”的问题在于它是一个十六进制值（应该是 0x7845CDDC），但您也可以输入十进制值（将是 2017840604）。

所以你可以打电话：

```
ReadProcessMemory(hProc,(LPCVOID)(2017840604),&PHP,4,NULL); 
```

# php - 外部 Javascript 文件无法从头中的 javascript 块接收变量

> ID：13520359
> 
> 赞同：0
> 
> 时间：2012-11-22T21:42:54.333
> 
> 标签：php, javascript

我已经在网上搜索了几个小时，在整个“外部 js 文件”-jungle 中找不到答案。我希望你们能帮忙！

简而言之：我的外部 javascript 文件似乎没有得到我在 main.php 文件中定义的变量。

1.  在**main.php**我定义 php 变量并将它们“转换”为 javascript 变量

    ```
    <head>...
    <script type="text/javascript">
    var phpmain_img = <?php echo json_encode($main_img); ?>;
    var phpvar1_large = <?php echo json_encode($var1_large); ?>;
    var phpvar2_large = <?php echo json_encode($var2_large); ?>;
    var phpvar3_large = <?php echo json_encode($var3_large); ?>;
    var phpvar4_large = <?php echo json_encode($var4_large); ?>;
    </script>
    ...
    <script language="javascript" type="text/javascript" src="/wshop/ext.js"></script>
    </head> 
    ```

2.  在我的**ext.js**文件中，我想处理这些变量。在 ext.js 文件中，我定义了一个将在主 PHP 中使用的函数 swapImage()：

    ```
     var imgArray = new Array(
            phpmain_img,
            phpvar1_large,
            phpvar2_large,
            phpvar3_large
            );

        function swapImage(imgID) {
            var theImage = document.getElementById('theImage');
            var newImg;
            newImg = imgArray[imgID];
            theImage.src = newImg;
        }

        function preloadImages() {      
            for(var i = 0; i < imgArray.length; i++) {
                var tmpImg = new Image;
                tmpImg.src = imgArray[i];
            }
        } 
    ```

3.  结果：**main.php**中的 swapImage() ... 不起作用

    ```
    <div id="image">
        <img id="theImage" src="<?=$main_img; ?>" alt="" />
    </div>

    <div id="thumbs">
    <?php

            echo "<img src=\"<$main_img_small\" alt=\"\" onmouseover=\"swapImage(0);\">";
            echo "<img src=\"$var1_small\" alt=\"\" onmouseover=\"swapImage(1);\">";
            echo "<img src=\"$var2_small\" alt=\"\" onmouseover=\"swapImage(2);\">";
            echo "<img src=\"$var3_small\" alt=\"\" onmouseover=\"swapImage(3);\">";

            ?>

        <br />
    </div> 
    ```

任何帮助是极大的赞赏！

**更新：**

我没有收到特定错误，swapImage 函数在鼠标悬停时不起作用。但是，我尝试使用 eg 输出变量，`document.write(phpimg_main)`但没有出现任何内容，这让我相信移交变量有问题...

这是源代码浏览器输出

```
<html>
    <head>
        <link href="../demo.css" rel="stylesheet" type="text/css" />
        <style type="text/css">
            ....
</style>

        <script type="text/javascript">
        var phpmain_img = {"0":"http:\/\/path\/to\/main\/image.jpg"};
        var phpvar1_large = {"0":"http:\/\/path\/to\/image1.jpg"};
        var phpvar2_large = {"0":"http:\/\/path\/to\/image2.jpg"};
        var phpvar3_large = null;
        var phpvar4_large = null;
        </script>   

        <script language="javascript" type="text/javascript" src="/wshop/ext.js"></script>
</head>

<body onload="preloadImages()">

    <div id="image">
        <img id="theImage" src="http://path-to-main-image.jpg" alt="" />
    </div>

    <div id="thumbs">
    <img src="http://path-to-main-image.jpg" alt="" onmouseover="swapImage(0);"><img src="http://path-to-image1.jpg" alt="" onmouseover="swapImage(1);"><img src="http://path-to-image2.jpg" alt="" onmouseover="swapImage(2);">

        <br />
    </div>

</body> 
```

`

**更新 2：**

感谢您的输入和回答！当然，你是对的，我需要一个字符串而不是一个对象，所以编码是一个很好的提示。

然而，问题仍然没有用 [0] 解决。即使我像下面这样对其进行硬编码，第二个 javascript 块（我之前尝试将其外包为外部 js 文件）也不会获得第一个 javascript 块中定义的变量。

```
<script type="text/javascript">
        var phpmain_img = "http://www.abc.de/path-img_main.jpg";
        var phpvar1_large = "http://www.abc.de/path-img1.jpg";
        var phpvar2_large = "http://www.abc.de/path-img2.jpg";
        var phpvar3_large = "http://www.abc.de/path-img3.jpg";
        var phpvar4_large = "http://www.abc.de/path-img4.jpg";
        </script>

<script language="javascript" type="text/javascript">

                   var imgArray = new Array(
                phpmain_img,
                phpvar1_large,
                phpvar2_large,
                phpvar3_large,
                phpvar4_large
            );

            function swapImage(imgID) {
                var theImage = document.getElementById('theImage');
                var newImg;
                newImg = imgArray[imgID];
                theImage.src = newImg;
            }

            function preloadImages() {      
                for(var i = 0; i < imgArray.length; i++) {
                    var tmpImg = new Image;
                    tmpImg.src = imgArray[i];
                }
            }

            </script> 
```

**浏览器源视图输出：**

```
<script type="text/javascript">
        var phpmain_img = "http://www.abc.de/path-img_main.jpg";
        var phpvar1_large = "http://www.abc.de/path-img1.jpg";
        var phpvar2_large = "http://www.abc.de/path-img2.jpg";
        var phpvar3_large = "http://www.abc.de/path-img3.jpg";
        var phpvar4_large = "http://www.abc.de/path-img4.jpg";
        </script>

        <script language="javascript" type="text/javascript"> //this i actually wanted to outsource into an external js-file

        var imgArray = new Array(
            phpmain_img,
            phpvar1_large,
            phpvar2_large,
            phpvar3_large,
            phpvar4_large
        );

        function swapImage(imgID) {
            var theImage = document.getElementById('theImage');
            var newImg;
            newImg = imgArray[imgID];
            theImage.src = newImg;
        }

        function preloadImages() {      
            for(var i = 0; i < imgArray.length; i++) {
                var tmpImg = new Image;
                tmpImg.src = imgArray[i];
            }
        }

        </script> 
```

对不起，这里的话题很长。我希望你能跟随！我正在努力学习！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:56:41.290

虽然我不是 PHP 专家，但你可能是说

```
var phpmain_img = "<?php echo urlencode($main_img); ?>"; 
```

代替

```
var phpmain_img = <?php echo json_encode($main_img); ?>; 
```

如果您查看呈现的标记，很明显图像变量不包含您的预期：

```
var phpmain_img = {"0":"http:\/\/path\/to\/main\/image.jpg"}; 
```

它不是一个字符串，而是一个对象。

# c - 使用 execvp 在 Ubuntu 上用 C 语言构建 shell

> ID：13520360
> 
> 赞同：0
> 
> 时间：2012-11-22T21:42:56.280
> 
> 标签：c, linux

1.  我即将在 Ubuntu 上用 C 语言编写一个简单的 shell。我考虑过使用该`exevcp()`功能。我只能运行“ls”命令，其他命令似乎都不起作用。有人能告诉我为什么会这样，或者给我一个更好的方法来构建外壳的想法吗？

2.  我的目的是构建这个外壳；我不明白为什么我不能直接使用命令行并将其按原样放入`execvp()`函数中。

    ```
    #include <stdio.h>
    #include <unistd.h>
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <fcntl.h>

    #include <string.h>
    #include <errno.h>

    int main(int argc,char **argv,char **envp)
    {
        char* args[] = {"history" , NULL};

        execvp(args[0],args);
    } 
    ```

请给我解释一下好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:47:01.380

`exec(3)`只能用于运行外部程序。`history`在大多数 shell 中是内置的，不能以这种方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:11:24.850

系统`execvp()`调用有两个参数：要执行的程序的名称，以及指向作为命令参数的以空字符结尾的字符串列表的指针。

例如：

```
char *args[] = { "ls", "-l", "-t", "-r", ".", 0 };
execvp(args[0], args);
...report error... 
```

您不能简单地将整个字符串传递给`execvp()`并期望它将其拆分；调用代码必须这样做。请注意，如果第一个参数指向的字符串`execvp()`包含斜杠，`$PATH`则不使用该机制来查找命令。使用 搜索普通名称（如图所示，`"ls"`）`$PATH`。

您还必须记住，一些命令，例如`history`和`cd`，是 shell 内置的；没有可以运行以获得相同效果的外部可执行文件您将无法运行它们。其他命令，例如`test`(aka `[`) 通常作为内置命令实现，但通常也有一个二进制文件，`/bin`或者`/usr/bin`执行（或多或少）相同的工作，因此您可以调用它。

# mysql - MySQL 过程在表中创建或更新行

> ID：13520361
> 
> 赞同：1
> 
> 时间：2012-11-22T21:43:02.093
> 
> 标签：mysql, stored-procedures

我想编写一个 MySQL proc，它根据行是否存在而对`userId`表`userName`进行插入或更新`users``users.userId = userId`

我在这里看到了一个类似的问题：[MySql create or update row with ip?](https://stackoverflow.com/questions/10253379/mysql-create-or-update-row-with-ip)

但是我想在存储过程中执行此操作，并想知道这是否提供了任何其他工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:52:08.783

您不需要存储过程，您可以使用[`INSERT ... ON DUPLICATE KEY UPDATE ...`](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html). 假设 userid 是`PRIMARY`or`UNIQUE`键，这将起作用：

```
INSERT INTO user
SET 
userid = ?,
userName = ?
ON DUPLICATE KEY UPDATE
userName = VALUES(userName) 
```

当然，如果需要，您可以将此查询包装在存储过程中：

```
DROP PROCEDURE IF EXISTS set_user;

DELIMITER //

CREATE PROCEDURE set_user(
    IN i_userid INT UNSIGNED,
    IN v_userName VARCHAR(50)
)
DETERMINISTIC
MODIFIES SQL DATA
SQL SECURITY INVOKER
BEGIN
    INSERT INTO user
    SET 
    userid = i_userid,
    userName = v_userName
    ON DUPLICATE KEY UPDATE
    userName = VALUES(userName);
END;
//

DELIMITER ; 
```

# java - Java 结构 - 是否需要嵌套 try 语句？

> ID：13520362
> 
> 赞同：4
> 
> 时间：2012-11-22T21:43:05.720
> 
> 标签：java, exception, try-catch

我一直在考虑这个问题，因为这是可能的，但我想知道它是否被认为是“不好的做法”。我相信是的，但我想征求意见以检查我的意见。

做这样的事情是不是很糟糕：

```
try{
    something();
    somethingelse();
        try{
            foo();
            bar();
        }catch(Exception e){
            e.printStackTrace();
        }
    somethingelseagain();
}catch(Exception e){
     e.printStackTrace();
} 
```

我认为永远不需要这样做，因为任何引发异常的东西都会触发第一次捕获。

意见不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:49:02.390

在您的示例中，如所写，内部捕获有点多余。

但是，嵌套的 catch 在以下情况下会有更多用处：

*   捕捉不同的异常

*   在处理程序块中为两个捕获做不同的事情

*   内部 catch 可能会捕获异常，执行某些操作，然后重新抛出 out catch 块可以捕获的相同异常

此外，不要忘记该`finally`块的潜在用途，即使捕获到异常，它也可以执行清理代码。

您通常应该尽可能地捕获最显式类型（即特定）的异常。

例外的主题是一个有趣的主题，而且并非没有[争议](https://stackoverflow.com/questions/27578/when-to-choose-checked-and-unchecked-exceptions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:46:50.053

我认为您可能想要嵌套 try 语句的一种情况是，如果您在 catch 中请求用户输入并且该输入可能无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:11:27.337

当情况需要时，嵌套`try-catch`是完全合理的。`try`例如，如果某个方法抛出某个异常，您不想跳过任何步骤并跳出主程序。如果它抛出任何其他异常，那么你想要正常的行为。

# c# - 如何在 C# 中实现通用缓存管理器

> ID：13520364
> 
> 赞同：12
> 
> 时间：2012-11-22T21:43:14.513
> 
> 标签：c#, generics, locking

我正在尝试实现一个通用缓存管理器，但是我不确定如何进行锁定。

到目前为止，我有以下内容，但是如果我有两个具有相同返回类型的缓存条目，那么我猜测将使用相同的锁对象！

```
public class CacheManager : ICacheManager
{
    static class TypeLock<T>
    {
        public static readonly object SyncLock = new object();
    }
    private readonly ICache _cache;
    public CacheManager(ICache cache)
    {
        if (cache == null)
            throw new ArgumentNullException("cache");

        _cache = cache;
    }

    public TResult AddCache<TResult>(string cacheKey, Func<TResult> acquire, int cacheDurationInMinutes) where TResult : class
    {
        return AddCache(cacheKey, null, acquire, cacheDurationInMinutes);
    }

    public TResult AddCache<TResult>(string cacheKey, CacheDependency dependency, Func<TResult> acquire, int cacheDurationInMinutes) where TResult : class
    {
        var entry = acquire.Invoke();
        if (entry != null)
        {
            if (dependency != null)
                _cache.InsertWithDependency(cacheKey, entry, dependency, DateTime.Now.AddMinutes(cacheDurationInMinutes));
            else
                _cache.Insert(cacheKey, entry, DateTime.Now.AddMinutes(cacheDurationInMinutes));
        }
        return entry;
    }

    public TResult GetOrAddCache<TResult>(string cacheKey, Func<TResult> acquire, int cacheDurationInMinutes) where TResult : class
    {
        return GetOrAddCache(cacheKey, null, acquire, cacheDurationInMinutes);
    }

    public TResult GetOrAddCache<TResult>(string cacheKey, CacheDependency dependency, Func<TResult> acquire, int cacheDurationInMinutes) where TResult : class
    {
        var entry = _cache.GetItem(cacheKey) as TResult;

        if (entry == null)
        {
            lock (TypeLock<TResult>.SyncLock)
            {
                entry = _cache.GetItem(cacheKey) as TResult;
                if (entry == null)
                {
                    entry = acquire.Invoke();
                    if (entry != null)
                    {
                        if (dependency != null)
                            _cache.InsertWithDependency(cacheKey, entry, dependency,
                                                        DateTime.Now.AddMinutes(cacheDurationInMinutes));
                        else
                            _cache.Insert(cacheKey, entry, DateTime.Now.AddMinutes(cacheDurationInMinutes));
                    }
                }
            }
        }

        return entry;
    }
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:01:20.980

你是对的，这将对相同类型的所有缓存条目使用相同的锁。为了使您的实际缓存方法（内存、文件、数据库...）独立于此缓存管理器，我建议为每个缓存条目存储一个额外的同步对象，因此您的缓存条目将看起来像`Tuple<object, TResult>`而不是 just `TResult`，其中`object`将是`new object()`每个条目的 a 并将用于锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T22:41:47.490

除非确实需要，否则永远不要锁定缓存代码。如果您不想使用任何众所周知的缓存，请使用并发字典。

我还要说你可能应该`System.Runtime.MemorCache`改用。

或者你使用一个为你抽象的解决方案，比如我的 CacheManager [https://github.com/MichaCo/CacheManager](https://github.com/MichaCo/CacheManager) ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T19:44:40.857

我不确定你应该使用锁，alos，为什么不使用 MemoryCache 而不是 ICache 接口？内存缓存还不够通用吗？你为什么强制缓存时间以分钟为单位，你应该将时间跨度传递给你的缓存方法，我会更通用。

几个月前我实现[了一个缓存管理器版本，但它是面向 Web 的。](http://www.sharefunction.com/Code/232)

# c++ - 在 C++ 中使用循环创建顺序变量名

> ID：13520365
> 
> 赞同：2
> 
> 时间：2012-11-22T21:43:17.793
> 
> 标签：c++, arrays, loops, variables, structure

我正在尝试使用循环创建变量名。

具体来说，我正在使用这种结构：

```
struct card{
    string rank;
    string suit;
}; 
```

这是我的代码的其余部分，它说“card + i”是我需要它说“card1”或“card2”等的地方。

```
string aSuit[4] = {" Hearts"," Clubs"," Diamonds"," Spades"};
string aRank[13] = {"A","2","3","4","5","6","7","8","9","10","J","Q","K"};
string aDeck[52];

int main(int argc, char *argv[])
{
    int i = 0;
    for (int s=0; s<4; s++) {
        for (int r=0; r<13; r++) {
            card card+i;
            card+i.rank = aRank[r];
            card+i.suit = aSuit[s];
            cout << card + i.rank << card + i.suit << endl;
            i++;
        }
    }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:47:58.290

改用数组：

```
card cards[52];

int main(int argc, char *argv[])
{
    int i = 0;
    for (int s = 0; s<4; s++) {
        for (int r = 0; r<13; r++) {
            cards[i].rank = aRank[r];
            cards[i].suit = aSuit[s];
            cout << cards[i].rank << cards[i].suit << endl;
            i++;
        }
    }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:48:14.123

你*认为*这是最好的解决方案，但我可以向你保证，事实并非如此。从逻辑和维护的角度来看，将您的逻辑与变量名称联系起来是一个坏主意。您真正想要的是一个可以将一个数据（在本例中为字符串）与另一个数据相关联的集合。

查看像[地图这样的数据结构](http://en.cppreference.com/w/cpp/container/map)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:47:45.683

您需要为此使用数组，它们允许单个变量包含一组项目。

然后，您只需将变量名称与索引一起使用，例如：

```
int xyzzy[5];
for (int i = 0; i < 5; i++)
    xyzzy[i] = i * 7;
// gives 0, 7, 14, 21, 28 
```

事实上，你的代码已经*有*代表花色和牌面值的数组，与你在这里需要的并没有太大的不同，所以我不确定你为什么不进行逻辑飞跃，将它们也用于牌. 但这基本上就是你的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:50:31.637

这是不可能的。当你编译一个 C++ 程序时，任何变量名的概念都完全消失了。它不能在运行时生成变量名，因为它们根本不存在。

但是，当然，有一种方法可以做到这一点。这正是数组的用途。它们为您提供了一整套可以按数字索引的对象（`i`在您的情况下为 ）。您已经有一个名为的变量`aDeck`，但我认为您的定义不正确。您是否想要：

```
card aDeck[52]; 
```

现在您将拥有一副 52 张牌。这副牌中的每张牌都有`suit`和`rank`成员。您可以使用 访问数组的每个成员`aDeck[i]`。因此，将循环内部更改为：

```
aDeck[i].rank = aRank[r];
aDeck[i].suit = aSuit[s]; 
```

# sql - 高性能PostgreSQL：计算两组key-value表的差值并存储结果

> ID：13520377
> 
> 赞同：0
> 
> 时间：2012-11-22T21:45:11.233
> 
> 标签：sql, postgresql

你可能认为我是 PostgreSQL 初学者，这个问题的目的是深入了解如何从 PostgreSQL 中获得最佳性能来解决这个问题。我有两张表，它们的结构相同，但内容不同。

```
|Table A|
key - value
1     dave
2     paul
3     michael

|Table B|
key - value
1     dave
2     chris 
```

问题很简单，用表 B 替换表 A，但要知道操作中哪些条目被插入到表 A 中或从表 A 中删除。

我的第一个（天真的）解决方案涉及分两个阶段使用表连接来生成中间列表，首先是删除操作，然后是插入操作。这些查询的结果存储在客户端上，并且是正确的应用程序功能所必需的。

```
SELECT * FROM A LEFT JOIN B ON A.value = B.value WHERE B.value IS NULL;
DELETE FROM A WHERE value IN ("paul", "michael");

SELECT * FROM B LEFT JOIN A ON A.value = B.value WHERE A.value IS NULL;
INSERT INTO A (value) VALUES "chris"; 
```

这种简单的方法在技术上确实有效，到事务表 A 的末尾将包含与表 B 相同的内容，但是这种策略很快变得相当慢。为了说明表的大小，它在数百万行的范围内，因此规模性能是一个关键因素，找到更优化的方法会很好。

为了满足性能要求，我计划调查以下内容：

1.  使用 HStore 后端实现最佳键值存储性能。
2.  使用视图预先计算中间删除/插入查询。
3.  使用准备好的查询来减少 SQL 处理开销。

我向专家提出的问题是，您能否提出*您*认为是最佳策略的建议。稍微超出我的问题范围，您可以提出任何硬性规定吗？

非常感谢您的参与。非常欢迎所有反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:25:12.637

这并不完美，但它确实有效。这三个案例（删除、更新、插入）可能会组合成一个完整的外连接。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE table_a (
        zkey INTEGER NOT NULL PRIMARY KEY
        , zvalue varchar NOT NULL
        , CONSTRAINT a_zvalue_alt UNIQUE (zvalue)
        );
INSERT INTO table_a(zkey, zvalue) VALUES
 (1, 'dave' )
,(2, 'paul' )
,(3, 'michael' )
        ;

CREATE TABLE table_b (
        zkey INTEGER NOT NULL PRIMARY KEY
        , zvalue varchar NOT NULL
        , CONSTRAINT b_zvalue_alt UNIQUE (zvalue)
        );
INSERT INTO table_b(zkey, zvalue) VALUES
(1, 'dave' )
,(2, 'chris' )
,(5, 'Arnold' )
        ;

CREATE TABLE table_diff (
        zkey INTEGER NOT NULL
        , zvalue varchar NOT NULL
        , opcode INTEGER NOT NULL DEFAULT 0
        );

WITH xx AS (
        DELETE FROM table_a aa
        WHERE NOT EXISTS (
                SELECT * FROM table_b bb
                WHERE bb.zkey = aa.zkey
                )
        RETURNING aa.zkey, aa.zvalue
        )
INSERT INTO table_diff(zkey,zvalue,opcode)
SELECT xx.zkey, xx.zvalue, -1
FROM xx
        ;

SELECT * FROM table_diff;

WITH xx AS (
        UPDATE table_a aa
        SET zvalue= bb.zvalue
        FROM table_b bb
        WHERE bb.zkey = aa.zkey
        AND bb.zvalue <> aa.zvalue
        RETURNING aa.zkey, aa.zvalue
        )
INSERT INTO table_diff(zkey,zvalue,opcode)
SELECT xx.zkey, xx.zvalue, 0
FROM xx
        ;
SELECT * FROM table_diff;

WITH xx AS (
        INSERT INTO table_a (zkey, zvalue)
        SELECT bb.zkey, bb.zvalue
        FROM table_b bb
        WHERE NOT EXISTS (
                SELECT * FROM table_a aa
                WHERE bb.zkey = aa.zkey
                AND bb.zvalue = aa.zvalue
                )
        RETURNING zkey, zvalue
        )
INSERT INTO table_diff(zkey,zvalue,opcode)
SELECT xx.zkey, xx.zvalue, 1
FROM xx
        ;
SELECT * FROM table_a;
SELECT * FROM table_b;
SELECT * FROM table_diff; 
```

结果：

```
INSERT 0 3
CREATE TABLE
INSERT 0 1
 zkey | zvalue  | opcode 
------+---------+--------
    3 | michael |     -1
(1 row)

INSERT 0 1
 zkey | zvalue  | opcode 
------+---------+--------
    3 | michael |     -1
    2 | chris   |      0
(2 rows)

INSERT 0 1
 zkey | zvalue 
------+--------
    1 | dave
    2 | chris
    5 | Arnold
(3 rows)

 zkey | zvalue 
------+--------
    1 | dave
    2 | chris
    5 | Arnold
(3 rows)

 zkey | zvalue  | opcode 
------+---------+--------
    3 | michael |     -1
    2 | chris   |      0
    5 | Arnold  |      1
(3 rows) 
```

顺便说一句：OQ 对要求非常模糊。如果 table_diff 是一个实际的历史表，则至少应该添加一个时间戳列，并且 zkey 和 ztimestamp 将是键的自然选择。此外，整个过程可以包含在一组规则或触发器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:53:29.173

尝试使用此查询：

```
DELETE FROM A 
WHERE A.value NOT IN (SELECT B.value FROM B);

INSERT INTO A(value)
SELECT B.value
FROM B
WHERE B.value NOT IN (SELECT A.value FROM A) 
```

使用索引`A.value`，`B.value`此查询将非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:22:43.157

如果您`value`在两个表中都建立了索引，并且`value`在每个表中都是唯一的，则这是完全外连接的情况，它应该能够通过遍历索引来合并两者：

```
SELECT CASE WHEN B.value IS NULL THEN
       'DELETE FROM A WHERE A.value = ' || quote_literal(A.value)
            ELSE
       'INSERT INTO A(value) VALUES(' || quote_literal(B.value) || ')'
       END
FROM A FULL OUTER JOIN B ON A.value = B.value
WHERE A.value IS DISTINCT FROM B.value 
```

这里的 SQL 生成实际上只是为了演示查询的输出是什么。

# asp.net - Asp.NET WebAPI 自定义授权

> ID：13520378
> 
> 赞同：1
> 
> 时间：2012-11-22T21:45:11.907
> 
> 标签：asp.net, rest, authentication, authorization

我想为基于 WebAPI 和 AngularJs 的应用程序创建一个授权机制。

我看过一些使用 BasicHttpAuthentication 的文章，但我真的不喜欢在每个请求上发送用户名和密码的整个想法。它越不适合我是因为我想使用 OpenId 身份验证，而你没有用户名/密码对。

我正在考虑一个解决方案，但我真的不知道如何实现它。这个概念是用户在通常的 Web 应用程序中进行身份验证 - 发布带有用户/密码的表单或选择 OpenId 提供程序。如果用户成功通过身份验证，则将其放置在一个静态对象中，该对象将用户对象存储一定时间。接下来生成一个用户令牌并将其传递给客户端应用程序。客户端将每个请求的令牌传递给服务器，如果用户存在于上述静态对象中并具有适当的身份验证令牌，则它被授权获取数据。

首先-您认为这是解决问题的好方法吗？其次 - 我应该如何在不使用 cookie 的情况下传递身份验证令牌？我想它应该位于请求标头中，就像在 BasicHttpAuthentication 中一样，但是，我真的不知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:19:04.747

**基本HttpAuthentication**

我和你一样对在客户端缓存用户名和密码并在每次请求中永远传输它感到肮脏。可能对您不利的基本身份验证的另一个方面是缺少签核。除了更改密码之外，您不能“使”基本身份验证会话“无效”。另一方面，令牌通常会提供到期日期，如果您希望服务器端失效，您可以检查发行日期并说“任何早于发行日期 xyz 的令牌都是无效的”。

**服务器状态**

您提到“如果用户成功通过身份验证，则将其放置在静态对象中”。但这与令牌无关？这听起来像是您想要实现身份验证会话的服务器状态管理，但这并不是绝对必要的。令牌本身应该足以用于用户身份验证，管理服务器状态是另一个潜在障碍。当您考虑应用程序池回收或网络农场环境时，服务器状态可能变得难以管理（如果您希望两个服务共享相同的身份验证令牌，但不需要与中央“身份验证服务器”通信以存储状态/会话?)

**传递身份验证令牌**

Headers 绝对是它的好地方。真的，还有什么地方？Cookie、标题、消息。除了浏览器客户端之外，cookie 没有多大意义，并且将其包含在消息中可能会使您的消息格式有些混乱，因此在我看来，标题是唯一剩下的有意义的选项。

**客户端实施**

您没有具体说明，但我怀疑您有兴趣从 .NET 调用该服务吗？在这种情况下[System.Net.Http.HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)可能是你的朋友。特别是[DefaultRequestHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.defaultrequestheaders.aspx)集合。您可以使用它来添加自定义标头来存储您的身份验证令牌。

**服务器实现**

[最近在研究 ASP.NET 身份验证时，通过查看混合身份验证配置 ASP.NET 模块](http://msdn.microsoft.com/en-us/library/aa479391.aspx)(MADAM) ，我学到了很多关于自定义的知识。我对按原样使用 MADAM 不感兴趣，但是从那篇文章中了解它并检查[源代码](http://www.raboof.com/projects/madam/)给了我很多关于如何将自己的身份验证模块插入 Web 堆栈的想法。

# c++ - 将 int 和 string 参数传递给线程 C++

> ID：13520379
> 
> 赞同：2
> 
> 时间：2012-11-22T21:45:13.683
> 
> 标签：c++, c, string, multithreading, parameters

我正在使用 _beginthead() 来启动我的线程。我需要将 3 个参数传递给线程：一个字符串和两个整数。这就是我所拥有的，这绝不是整个程序，我已经删除了一些与问题无关的东西（忽略 main 的错误，因为在我的实际程序中 main 实际上并不是 main 和这只是一个常规功能）：

```
typedef struct ST
{
    char *ip;
    int port;
    int dur;
}thestruct;  

void main(char **arg_p, int arg_count)
{
    char *ip;
    int port, duration;
    ip = (char *)malloc(sizeof(char));
    ip = arg_p[0];
    port = atoi(arg_p[1]);
    duration = atoi(arg_p[2]);

    thestruct *st;
    st = (thestruct *)malloc(sizeof(thestruct));
    st->dur = duration;
    st->ip = (char *)malloc(sizeof(char));
    st->ip = ip;
    printf("ip: %s\n", st->ip);
    st->port = port;

    _beginthread((void(*)(void*))connect, 0, (void*)st);
}

void connect(thestruct *s)
{
    Sleep(100);
    char *ip = static_cast<char*>(s->ip);
    int port = s->port;
    int dur = s->dur;
    printf("ip: %s\nport: %i\ndur: %i", ip, port, dur);
    _endthread();
} 
```

一切都很好，除了字符串 ip 没有正确传递给线程。第一个 printf 调用完美地打印出 ip，然后在线程内部，它打印“ip:”，然后它是空白的。然后它转到一个新行并完美地打印出端口和持续时间。

我一直在研究这个问题主题一段时间无济于事，因为大多数人只需要传递一个字符串或类似的东西。所以我可以从谷歌搜索中找到的只是人们传递一个字符串，当然这是有效的。

例如，我通过“127.0.0.1 1234 25”。另外，我的结构似乎没有任何问题，因为就像我说的那样，这两个整数工作得很好，而且我在字符串上没有任何错误，只是没有被传递。

所以无论如何，如果有人能对这个话题有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:58:43.140

我想说主要问题是在完成打印和冲洗打印的内容`main()`之前退出。`connect()`

* * *

除此之外：

```
int main(int, char **) 
```

不是相反。

* * *

另一个问题是线程函数被定义为：

```
void * (*)(void *) 
```

所以应该是：

```
void * connect(void * pv)  
{
  thestruct * s = pv;
  ... 
```

* * *

还

```
st->ip = ip; 
```

将覆盖之前分配返回的地址。

你最好想复制字符：

```
strcpy(st->ip, ip); 
```

* * *

这条线

```
ip = (char *)malloc(sizeof(char)); 
```

是多余的，因为`ip`在下一行被覆盖：

```
ip = arg_p[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:00:17.187

我的假设是您的`main`定义导致了问题：

```
void main(char **arg_p, int arg_count) 
```

`void`除了应该是的事实之外`int`，第一个参数应该是参数计数，而其余的是参数。尝试切换它们：

```
void main(int arg_count, char **arg_p) 
```

# core-data - 我可以跳过嵌套上下文中的操作吗？

> ID：13520382
> 
> 赞同：1
> 
> 时间：2012-11-22T21:45:33.777
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

在嵌套上下文之前，我的生活很容易从 NSManagedObjects 声明一些常用函数，例如：

*   awakeFromFetch
*   从插入唤醒
*   验证X
*   didChangeValueForKey

通过尝试和失败，称之为人生课程。在对我的实体使用继承时，我学会了对这些功能更加小心。

现在跳转到 Core Data 的嵌套上下文部分，我已经习惯了在多个上下文中看到相同的 NSManagedObject。我试图抓住其中的一个关键部分：上面提到的函数可能会在不同的上下文中被多次调用，但是验证、值观察和初始化等事情只相关一次。因此，我通常会检查 self.managedObjectContext 是否对应于我使用的主要上下文。如果它们相同，则运行整个函数，否则，我只需调用 [super] 并返回。

这是我应该处理嵌套上下文的方式吗？

这样做已经救了我好几次。我很惊讶看到 awakeFromInsert 为同一个对象调用了不止一次，但即使我在除主要上下文之外的所有上下文中中止该函数的初始化部分，信息也会持久化回存储区。我想确认一下我正在以正确的方式处理这个话题。

**更新：**

为了阐明我的想法，我在我的博客中写了一篇关于这个主题的文章。我在那里写的内容使我多次避免无效的实体布局和其他错误。但是我不确定是否有比我更好的方法。

[http://www.digital-lumberjack.com/blog/2012/11/surviving-core-data/](http://www.digital-lumberjack.com/blog/2012/11/surviving-core-data/)

# objective-c - 在 Cocoa 中绘制面板

> ID：13520383
> 
> 赞同：0
> 
> 时间：2012-11-22T21:45:34.363
> 
> 标签：objective-c, xcode, macos, cocoa, nsbezierpath

我有一个 NSBezierPath，它是一个菜单栏面板的形状。

![在此处输入图像描述](../Images/a985f4e12cb15e077d7768c4511a0011.png)

我现在想做一个标题。比如[这个](http://dribbble.com/shots/255396-mite-Client-for-Mac)。但距离顶部只有 30 个像素。

我无法弄清楚我应该如何只获得 NSBezierPath 的顶部。这是我的第一个问题。我怎样才能切断 NSBezierPath 的一部分，或者我怎样才能使 NSBezierPath 的并集。

然后我想像示例中一样添加渐变。渐变很清晰，但是如何在它的顶部添加发光？当时我在另一个应用程序中添加了阴影，但它似乎有点脏。

![在此处输入图像描述](../Images/1647faaae1776b8eea58e109c106b847.png)

那么如何在 NSBezierPath 的顶部制作阴影，就像在提供的示例中一样。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:15:03.190

我最终使用了[PaintCode](http://www.paintcodeapp.com)，这对我来说做得很好。

这是结果：

![在此处输入图像描述](../Images/a7a55883fe41bda21a6230d9b0e7f500.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:36:31.033

要在元素顶部获得“浅色”边缘，您只需绘制（即[`:fill`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBezierPath/fill)）`NSBezierPath`垂直偏移量为 -1 点且颜色更亮的 。然后在其上绘制形状（在 y=+1 点处）。

不知道你的意思是制作标题和切割位..

# c++ - c++编译错误架构x86_64的未定义符号

> ID：13520389
> 
> 赞同：1
> 
> 时间：2012-11-22T21:46:15.807
> 
> 标签：c++

**我写了一个名为 UserScore 的类：**

```
//header
using namespace std;
class UserScore{
public:
    UserScore(const int &user_id, const int &rating);

private:
    int _user_id;
    int _rating;
};

//cpp
#include "UserScore.h"
UserScore::UserScore (const int &user_id, const int &rating):
    _user_id(user_id),
    _rating(rating)
{

} 
```

**编译命令为：**

```
g++ src/UserScore.cpp -o obj/UserScore.o 
```

**但是为什么这个简单的东西不会编译呢？**

错误是：

```
Undefined symbols for architecture x86_64:
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:14:22.140

如果要生成目标文件，则需要在编译行中包含 -c 选项，否则编译器会假定您正在尝试构建可执行文件，并且如果您没有`main()`方法（此处发生）会抱怨。

要创建一个目标文件，稍后您将链接到其中包含“main()”方法的代码文件，您需要使用

`g++ -c src/UserScore.cpp -o obj/UserScore.o`

这就是我认为你正在尝试做的事情。

或者，您只需要在代码中添加一个主函数，然后您就可以制作一个可执行文件。

```
//header
using namespace std;
class UserScore{
public:
    UserScore(const int &user_id, const int &rating);

private:
    int _user_id;
    int _rating;
};

//cpp
#include "UserScore.h"
UserScore::UserScore (const int &user_id, const int &rating):
_user_id(user_id),
_rating(rating)
{

}

int main()
{
    return 0;
} 
```

# javascript - 用于截取网页截图的 Javascript 库

> ID：13520390
> 
> 赞同：2
> 
> 时间：2012-11-22T21:46:16.093
> 
> 标签：javascript, html, screenshot

这个[类似的问题](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)是很久以前（4年前）提出的。我想知道图书馆生态系统是否有任何新的进步。

我的用例非常简单，我有一个样式化的 DIV 和其中的一些元素 - 我想创建该 DIV 的屏幕截图。

```
Takes this:                                            Into this:
----------------------------                           ------------------------
<div class="potrait">
    <img src="sergio.jpg" />   --> Turns it into -->   sergio.png
    <h1>Sergio tapia</h1>
</div> 
```

有什么可以帮助我实现这一目标的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:54:11.720

你有两种可能：

1.  [使用html2canvas](http://html2canvas.hertzen.com/)之类的库重新渲染 div
2.  在服务器上渲染

无法从 js 中截取真实的屏幕截图。

# webview - 类似于 Tweetro 中的 WebView

> ID：13520391
> 
> 赞同：0
> 
> 时间：2012-11-22T21:46:20.297
> 
> 标签：webview, windows-8, windows-runtime

我想创建一种类似于 Tweetro 中可用的效果。在这个程序中，当我显示时间线并选择包含 URL 的推文时，右侧会出现 WebView 的一部分。当我单击它时，WebView 会在左侧扩展并变得可导航。然后，如果我在 WebView 区域外单击，它会在右侧返回。

如何在使用 C# 的 Windows Store App 中实现这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:52:00.673

您不能在网格内托管 webview 和所有其他控件，然后根据需要更改网格列/web-view 的宽度吗？您可以使用动画来平滑更改以提供幻灯片效果。

# javascript - 如何判断 CSS 属性是否由页面作者手动设置？

> ID：13520398
> 
> 赞同：3
> 
> 时间：2012-11-22T21:47:16.963
> 
> 标签：javascript, jquery, css, dom

我希望能够判断`(width, height, margin, padding, font-size, …)`页面作者是否为 DOM 元素设置了特定的 CSS 属性。我的目标是不更改已明确设置尺寸的元素，而是更改未明确设置的元素。

`function isPropertySet(elem, "width")`如果页面作者将宽度 CSS 属性设置为内联或通过样式表，则应返回**true 。**`(style="width: 100px;")`

这并不简单，因为布局引擎会推断出这些值，但似乎我尝试访问它们时浏览器已经提供了值。

例如，我试过`getComputedStyle(elem).getPropertyValue("width")`，但这会返回计算出的宽度（给定名称并不奇怪）。

样式属性，例如`elem.style.width`，是不够的，因为它不包括样式表中设置的属性。

在我去搜索样式表的巨大痛苦之前，有没有人有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:52:06.770

如果您想为未自定义的元素提供默认样式集，最简单的方法是**创建自己的样式表并将其放在顶部，在任何其他 CSS 文件之前**。这样，在别处自定义的每个元素都会覆盖您的默认样式。注意[级联顺序](http://www.w3.org/TR/CSS2/cascade.html#cascading-order)：不仅你的样式应该在其他样式之前，而且选择器也应该足够通用。

另一方面，如果出于某种原因您想通过 JavaScript 知道元素是否是自定义的，那么这是不可能的，除非您想将特定样式与默认样式进行比较，因为默认样式可能因浏览器而异. 例如，在 Firefox 中，默认样式为`<h1/>`：

```
h1 {
  display: block;
  font-size: 2em;
  font-weight: bold;
  margin: .67em 0;
} 
```

而 Chrome 的风格略有不同：

```
h1 {
  display: block;
  font-size: 2em;
  -webkit-margin-before: 0.67em;
  -webkit-margin-after: 0.67em;
  -webkit-margin-start: 0px;
  -webkit-margin-end: 0px;
  font-weight: bold;
} 
```

这会产生一个有问题的边缘情况。想象一下，我想要全部`<h1/>`是`font-weight:normal; font-size: 200%;`，但是在一个特定页面上有一个特定的标题，我希望它正好是 2em 并以粗体显示。您会认为标题没有自定义，并覆盖其样式，而实际上它*是*自定义的，大小和重量是故意设置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:59:11.897

The best way I have found to answer this question from JavaScript is to create a temporary element, that is not attached to the dom, and read my default values from that. I then test the default values against the values read from the element I'm testing *(using jQuery or getComputedStyle)* - if they compare then it's a best guess they haven't been set. Obviously this has a downside in the fact that if the element has had it's property set to the exact same value as the default you can't tell the difference.

*Something like this*

```
function hasDefaultStyle(elm, prop) {
  var def = $('<'+$(elm).attr('tagName')+' />').css(prop);
  return $(elm).css('prop') == def;
} 
```

When dealing with different dimension metrics i.e. percent, cm, em and so on - these have to be dealt with in a different way—on browsers other than FireFox at least—due to the computed problem you mention.

FireFox does the right thing in my opinion and that when you request styles from an element that hasn't been placed in the dom it returns the original values i.e. like 50%.

For more information on how to solve at least the percent problem you can see my answer here:

[Determine whether element has fixed or percentage width using JavaScript](https://stackoverflow.com/questions/1782566/determine-whether-element-has-fixed-or-percentage-width-using-javascript/12883360#12883360)

It is rather ridiculous that such methods are necessary however :/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:00:13.380

如果您不担心继承样式而只担心特定的 DOM 元素，那么也许您可以动态创建特定的元素和类名（因此它只有 CSS 样式），然后使用上述方法检查它的宽度并进行比较？

# apache - jk_mod 和 apache 重写

> ID：13520406
> 
> 赞同：0
> 
> 时间：2012-11-22T21:47:53.933
> 
> 标签：apache, mod-rewrite, glassfish, mod-jk

是否可以将重写规则与 jk_mod 与服务器端转发结合起来？

我有一个简单的配置

```
RewriteEngine On
RewriteRule ^/$ /myapp [R]

JkMount /* worker_1 
```

这在使用重定向标志时效果很好，但没有它就无法运行。我想要实现的是服务器端转发，因此用户的浏览器栏不会注意到重写。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:33:53.057

试试mod_proxy_http，需要开启mod_proxy和mod_proxy_http：

```
LoadModule proxy_module /usr/lib/apache2/modules/mod_proxy.so
LoadModule proxy_http_module /usr/lib/apache2/modules/mod_proxy_http.so 
```

然后在您的 VirtualHost 部分：

```
ProxyRequests Off
ProxyPreserveHost On
ProxyPass /css !
ProxyPass /img !
ProxyPass /js !
ProxyPass / http://localhost:8080/myapp/
ProxyPassReverse / http://localhost:8080/myapp/ 
```

注意：`ProxyPass /xxx !`您的问题不需要。我只是想展示如何将某些 URI 排除在“翻译”之外

# objective-c - 如何在输入 UITextfield 时和之后放置货币符号？

> ID：13520407
> 
> 赞同：8
> 
> 时间：2012-11-22T21:47:54.917
> 
> 标签：objective-c, ios, ios5, uitextfield, currency

我有这个正在研究的股票市场计算器，我在 StackOverFlow 上搜索了 Apple 文档、互联网，但没有成功找到答案。

我有一个`UITextfield`用户将在其中输入货币值。我想要实现的是当用户键入时或至少在他完成键入值之后，文本字段还将显示与他所在的语言环境相对应的货币符号。

它就像一个占位符，但不是我们在 xcode 中的占位符，因为 xcode 在我们输入之前就在那里，而我想要的那个在输入时和之后应该在那里。我可以使用包含货币的背景图像，但我无法本地化应用程序。

因此，如果有人可以提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:58:51.313

你必须使用`NSNumberFormatter`来实现这一点。

试试下面的代码，通过这个，一旦你输入了值并且当你结束编辑时，这些值将被格式化为当前货币。

```
-(void)textFieldDidEndEditing:(UITextField *)textField {

    NSNumberFormatter *currencyFormatter = [[[NSNumberFormatter alloc] init] autorelease];
    [currencyFormatter setLocale:[NSLocale currentLocale]];
    [currencyFormatter setMaximumFractionDigits:2];
    [currencyFormatter setMinimumFractionDigits:2];
    [currencyFormatter setAlwaysShowsDecimalSeparator:YES];
    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];

    NSNumber *someAmount = [NSNumber numberWithDouble:[textField.text doubleValue]];
    NSString *string = [currencyFormatter stringFromNumber:someAmount];

    textField.text = string;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T15:31:49.237

最简单的方法是将带有右对齐文本的标签放在您的文本字段上，该文本字段将具有左对齐文本。

当用户开始编辑文本字段时，设置货币符号：

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField {
        self.currencyLabel.text = [[NSLocale currentLocale] objectForKey:NSLocaleCurrencySymbol];
    } 
```

如果您想将其保留为 textField 中文本的一部分，则它会变得有点复杂，因为一旦您将符号放在那里，您就需要防止它们删除：

```
// Set the currency symbol if the text field is blank when we start to edit.
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    if (textField.text.length  == 0)
    {
        textField.text = [[NSLocale currentLocale] objectForKey:NSLocaleCurrencySymbol];
    }
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *newText = [textField.text stringByReplacingCharactersInRange:range withString:string];

    // Make sure that the currency symbol is always at the beginning of the string:
    if (![newText hasPrefix:[[NSLocale currentLocale] objectForKey:NSLocaleCurrencySymbol]])
    {
        return NO;
    }

    // Default:
    return YES;
} 
```

正如@Aadhira 指出的那样，您还应该使用数字格式化程序来格式化货币，因为您正在向用户显示它。

# nginx - 清漆缓存 - 连接被拒绝

> ID：13520410
> 
> 赞同：0
> 
> 时间：2012-11-22T21:47:59.520
> 
> 标签：nginx, varnish

我在 8080 上运行 Nginx，而 Varnish 在 80 端口上运行。我可以

```
wget localhost:8080 
```

在 shell 中并得到响应，但如果我运行

```
wget localhost 
```

我得到连接被拒绝。作为参考，我正在尝试从外部访问它，但遇到了同样的问题。希望我能先解决从 localhost 的访问！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:21:29.513

`netstat -tulnp`向您展示正在运行的每个端口和服务

`iptables -L`显示端口是否打开或阻塞

干杯

# node.js - Node.js，表达可变权重

> ID：13520417
> 
> 赞同：1
> 
> 时间：2012-11-22T21:48:17.150
> 
> 标签：node.js, variables, express

我想知道在 express 中声明变量的最佳方法。

只是我的应用程序的一个变量

```
var app = express();

app.fs = require('fs');

app.WebSocketServer = require('ws').Server
app.wss = new app.WebSocketServer({
    port: 8080
})

app.mongoose = require('mongoose');

app.async = require('async'); 
```

或者每次我需要一个新变量时初始化一个

```
var app = express();

var fs = require('fs');

var WebSocketServer = require('ws').Server
var wss = new WebSocketServer({
    port: 8080
})

var mongoose = require('mongoose');

var async = require('async'); 
```

我认为第一种方法对服务器更好，但我害怕覆盖 express 方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:59:36.747

您始终可以使用`app.get`and `app.set`：

```
var app = express();

var WebSocketServer = require('ws').Server
var wss = new WebSocketServer({
    port: 8080
})
app.set('wss', wss);
// later you can call `app.get('wss')` 
```

# python - 递归点字典

> ID：13520421
> 
> 赞同：8
> 
> 时间：2012-11-22T21:48:34.077
> 
> 标签：python, recursion, dictionary

我有一个实用程序类，它使 Python 字典在获取和设置属性方面表现得有点像 JavaScript 对象。

```
class DotDict(dict):
    """
    a dictionary that supports dot notation 
    as well as dictionary access notation 
    usage: d = DotDict() or d = DotDict({'val1':'first'})
    set attributes: d.val2 = 'second' or d['val2'] = 'second'
    get attributes: d.val2 or d['val2']
    """
    __getattr__ = dict.__getitem__
    __setattr__ = dict.__setitem__
    __delattr__ = dict.__delitem__ 
```

我想做它，以便它还将嵌套字典转换为 DotDict() 实例。我希望能够用`__init__`or做这样的事情`__new__`，但我还没有想出任何可行的方法：

```
def __init__(self, dct):
    for key in dct.keys():
        if hasattr(dct[key], 'keys'):
            dct[key] = DotDict(dct[key]) 
```

如何递归地将嵌套字典转换为 DotDict() 实例？

```
>>> dct = {'scalar_value':1, 'nested_dict':{'value':2}}
>>> dct = DotDict(dct)

>>> print dct
{'scalar_value': 1, 'nested_dict': {'value': 2}}

>>> print type(dct)
<class '__main__.DotDict'>

>>> print type(dct['nested_dict'])
<type 'dict'> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T21:58:19.460

我看不到您在哪里复制构造函数中的值。因此，这里 DotDict 总是空的。当我添加键分配时，它起作用了：

```
class DotDict(dict):
    """
    a dictionary that supports dot notation 
    as well as dictionary access notation 
    usage: d = DotDict() or d = DotDict({'val1':'first'})
    set attributes: d.val2 = 'second' or d['val2'] = 'second'
    get attributes: d.val2 or d['val2']
    """
    __getattr__ = dict.__getitem__
    __setattr__ = dict.__setitem__
    __delattr__ = dict.__delitem__

    def __init__(self, dct):
        for key, value in dct.items():
            if hasattr(value, 'keys'):
                value = DotDict(value)
            self[key] = value

dct = {'scalar_value':1, 'nested_dict':{'value':2, 'nested_nested': {'x': 21}}}
dct = DotDict(dct)

print dct.nested_dict.nested_nested.x 
```

它看起来有点危险且容易出错，更不用说给其他开发人员带来无数惊喜的来源，但它似乎正在发挥作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-23T01:48:52.673

接受的答案有一些问题，例如在`hasattr()`. 使用键来模拟属性意味着您需要做的不仅仅是 assign `__getattr__ = dict.__getitem__`。这是一个更强大的测试实现：

```
from collections import OrderedDict, Mapping

class DotDict(OrderedDict):
    '''
    Quick and dirty implementation of a dot-able dict, which allows access and
    assignment via object properties rather than dict indexing.
    '''

    def __init__(self, *args, **kwargs):
        # we could just call super(DotDict, self).__init__(*args, **kwargs)
        # but that won't get us nested dotdict objects
        od = OrderedDict(*args, **kwargs)
        for key, val in od.items():
            if isinstance(val, Mapping):
                value = DotDict(val)
            else:
                value = val
            self[key] = value

    def __delattr__(self, name):
        try:
            del self[name]
        except KeyError as ex:
            raise AttributeError(f"No attribute called: {name}") from ex

    def __getattr__(self, k):
        try:
            return self[k]
        except KeyError as ex:
            raise AttributeError(f"No attribute called: {k}") from ex

    __setattr__ = OrderedDict.__setitem__ 
```

和测试：

```
class DotDictTest(unittest.TestCase):
    def test_add(self):
        exp = DotDict()

        # test that it's not there
        self.assertFalse(hasattr(exp, 'abc'))
        with self.assertRaises(AttributeError):
            _ = exp.abc
        with self.assertRaises(KeyError):
            _ = exp['abc']

        # assign and test that it is there
        exp.abc = 123
        self.assertTrue(hasattr(exp, 'abc'))
        self.assertTrue('abc' in exp)
        self.assertEqual(exp.abc, 123)

    def test_delete_attribute(self):
        exp = DotDict()

        # not there
        self.assertFalse(hasattr(exp, 'abc'))
        with self.assertRaises(AttributeError):
            _ = exp.abc

        # set value
        exp.abc = 123
        self.assertTrue(hasattr(exp, 'abc'))
        self.assertTrue('abc' in exp)
        self.assertEqual(exp.abc, 123)

        # delete attribute
        delattr(exp, 'abc')

        # not there
        self.assertFalse(hasattr(exp, 'abc'))
        with self.assertRaises(AttributeError):
            delattr(exp, 'abc')

    def test_delete_key(self):
        exp = DotDict()

        # not there
        self.assertFalse('abc' in exp)
        with self.assertRaises(KeyError):
            _ = exp['abc']

        # set value
        exp['abc'] = 123
        self.assertTrue(hasattr(exp, 'abc'))
        self.assertTrue('abc' in exp)
        self.assertEqual(exp.abc, 123)

        # delete key
        del exp['abc']

        # not there
        with self.assertRaises(KeyError):
            del exp['abc']

    def test_change_value(self):
        exp = DotDict()
        exp.abc = 123
        self.assertEqual(exp.abc, 123)
        self.assertEqual(exp.abc, exp['abc'])

        # change attribute
        exp.abc = 456
        self.assertEqual(exp.abc, 456)
        self.assertEqual(exp.abc, exp['abc'])

        # change key
        exp['abc'] = 789
        self.assertEqual(exp.abc, 789)
        self.assertEqual(exp.abc, exp['abc'])

    def test_DotDict_dict_init(self):
        exp = DotDict({'abc': 123, 'xyz': 456})
        self.assertEqual(exp.abc, 123)
        self.assertEqual(exp.xyz, 456)

    def test_DotDict_named_arg_init(self):
        exp = DotDict(abc=123, xyz=456)
        self.assertEqual(exp.abc, 123)
        self.assertEqual(exp.xyz, 456)

    def test_DotDict_datatypes(self):
        exp = DotDict({'intval': 1, 'listval': [1, 2, 3], 'dictval': {'a': 1}})
        self.assertEqual(exp.intval, 1)
        self.assertEqual(exp.listval, [1, 2, 3])
        self.assertEqual(exp.listval[0], 1)
        self.assertEqual(exp.dictval, {'a': 1})
        self.assertEqual(exp.dictval['a'], 1)
        self.assertEqual(exp.dictval.a, 1)  # nested dotdict works 
```

只是为了好玩，你可以用这个把一个对象变成一个 DotDict：

```
def to_dotdict(obj):
    ''' Converts an object to a DotDict '''
    if isinstance(obj, DotDict):
        return obj
    elif isinstance(obj, Mapping):
        return DotDict(obj)
    else:
        result = DotDict()
        for name in dir(obj):
            value = getattr(obj, name)
            if not name.startswith('__') and not inspect.ismethod(value):
                result[name] = value
        return result 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-27T14:59:59.850

我对这个问题找到的所有不同答案有点不满意。我在实现中的目标是： 1) 不要创建不必要的新对象属性。2) 不允许覆盖对内置属性的访问。3) 类转换添加的项目以保持一致性。

```
class attrdict(dict):
    """
    Attribute Dictionary.

    Enables getting/setting/deleting dictionary keys via attributes.
    Getting/deleting a non-existent key via attribute raises `AttributeError`.
    Objects are passed to `__convert` before `dict.__setitem__` is called.

    This class rebinds `__setattr__` to call `dict.__setitem__`. Attributes
    will not be set on the object, but will be added as keys to the dictionary.
    This prevents overwriting access to built-in attributes. Since we defined
    `__getattr__` but left `__getattribute__` alone, built-in attributes will
    be returned before `__getattr__` is called. Be careful::

        >>> a = attrdict()
        >>> a['key'] = 'value'
        >>> a.key
        'value'
        >>> a['keys'] = 'oops'
        >>> a.keys
        <built-in method keys of attrdict object at 0xabcdef123456>

    Use `'key' in a`, not `hasattr(a, 'key')`, as a consequence of the above.
    """
    def __init__(self, *args, **kwargs):
        # We trust the dict to init itself better than we can.
        dict.__init__(self, *args, **kwargs)
        # Because of that, we do duplicate work, but it's worth it.
        for k, v in self.iteritems():
            self.__setitem__(k, v)

    def __getattr__(self, k):
        try:
            return dict.__getitem__(self, k)
        except KeyError:
            # Maintain consistent syntactical behaviour.
            raise AttributeError(
                "'attrdict' object has no attribute '" + str(k) + "'"
            )

    def __setitem__(self, k, v):
        dict.__setitem__(self, k, attrdict.__convert(v))

    __setattr__ = __setitem__

    def __delattr__(self, k):
        try:
            dict.__delitem__(self, k)
        except KeyError:
            raise AttributeError(
                "'attrdict' object has no attribute '" + str(k) + "'"
            )

    @staticmethod
    def __convert(o):
        """
        Recursively convert `dict` objects in `dict`, `list`, `set`, and
        `tuple` objects to `attrdict` objects.
        """
        if isinstance(o, dict):
            o = attrdict(o)
        elif isinstance(o, list):
            o = list(attrdict.__convert(v) for v in o)
        elif isinstance(o, set):
            o = set(attrdict.__convert(v) for v in o)
        elif isinstance(o, tuple):
            o = tuple(attrdict.__convert(v) for v in o)
        return o 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T09:12:28.153

*无耻地插入我自己的包裹*

有一个包可以做你想要的，还有更多的东西，它叫做[Prodict](https://github.com/ramazanpolat/prodict)。

```
from prodict import Prodict

life_dict = {'bigBang':
                {'stars':
                    {'planets': []}
                }
            }

life = Prodict.from_dict(life_dict)

print(life.bigBang.stars.planets)
# prints []

# you can even add new properties dynamically
life.bigBang.galaxies = [] 
```

PS 1：我是 Prodict 的作者。

PS 2：这是另一个问题答案的直接复制粘贴。

# php - PHP 选择下拉选项，通过 mysql 将特定选项放在顶部

> ID：13520424
> 
> 赞同：2
> 
> 时间：2012-11-22T21:48:39.477
> 
> 标签：php, mysql, sql-order-by, selection

我的国家表有这些列：rank_id 和 country_name。

现在它是按名称排序的，但我试图将一些特定国家按其排名顺序放在列表的顶部，然后其余的按名称排序。

这是我的查询：

```
foreach ($db->query("SELECT * FROM " . config_item('cart', 'table_countries') . "") as $row)
$countries[] = $row; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:57:26.950

您可以通过添加以下内容来调整“ORDER BY”子句：

```
ORDER BY country_name='USA' DESC, country_name='Canada' DESC, country_name ASC 
```

由于“country_name='USA'”仅对美国返回“true”（或 1），对所有其他国家/地区返回“false”（或 0），并且按降序排列，因此 USA 将是第一个，然后是加拿大，然后所有其他人都会来！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:05:19.650

如果您添加一个`rank_order`默认值为 的列`0`，然后将其更改为您希望在列表顶部的几个特定国家/地区的更高数字。

然后，您可以使用此查询来获取您的数据：

```
SELECT * FROM table_countries ORDER BY rank_order DESC, country_name 
```

按等级排序的行将始终排在第一位（按降序排列），因为它们`rank_order`高于`0`. 其余的将按字母顺序排列`country_name`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:56:31.277

实现此目的的一种简单方法是在其中包含一个数字`display_order`列`country_name`，允许您通过使用名称进行排序来覆盖优先级设置。

这将允许您根据需要任意将国家/地区移至列表顶部，而无需在以后更改查询。

然后，您可以执行以下操作：

```
 SELECT *
  FROM country_name
  ORDER BY display_order ASC, name ASC; 
```

# android - 覆盖片段对点击事件做出意外反应

> ID：13520425
> 
> 赞同：0
> 
> 时间：2012-11-22T21:48:44.117
> 
> 标签：android, fragment, drawer

我想创建一个抽屉功能，类似于 Facebook 应用程序，有两个重叠的片段。

主要布局如下所示：

```
<merge 
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <fragment
        android:id="@+id/menu" 
        android:name="ch.simon.drawertest.MenuFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginRight="80dp" />
    <fragment
        android:id="@+id/home" 
        android:name="ch.simon.drawertest.HomeScreenFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</merge> 
```

主页 Fragment 在左上角包含一个打开抽屉的按钮。打开发生在`HomeScreenFragment`.

```
public void open(){
    translateTo(canScrollXBy());
}

public void close(){
    translateTo(0);
}

private void translateTo(int x){
    Log.e(TAG, "Translate from " +mTranslated +" to " +x);
    TranslateAnimation anim = new TranslateAnimation(mTranslated, x, 0, 0);
    anim.setDuration(500);
    anim.setFillAfter(true);
    mRootView.startAnimation(anim);
    mTranslated = x;
} 
```

打开和关闭工作正常，但我观察到 2 个意外行为：

1.  即使抽屉关闭并且`HomeScreenFragment`完全覆盖`MenuFragment`，`MenuFragment`仍然会收到点击事件。

2.  当抽屉打开并且来自的 Button`HomeScreenFragment`位于屏幕的右上角时，它仍然接收点击事件，就好像它仍然在左侧一样。这意味着即使按钮在右侧，要点击它，我也需要点击屏幕的左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:55:31.517

为此，您可以使用库[SlidindMenu](https://github.com/jfeinstein10/SlidingMenu)来执行此操作。它就像一个魅力。或者你可以从这个库的代码中激发你的灵感。

# android - 在android中我的布局头部定义一个空白区域？

> ID：13520433
> 
> 赞同：0
> 
> 时间：2012-11-22T21:49:06.163
> 
> 标签：android, android-layout

我正在为我的 android 应用程序创建我的屏幕，为此我创建了一个背景图像。在后台是我的应用程序不应覆盖的标题区域。实际上这是我的问题，我的线性布局直接从 0/0 位置开始。如何定义我的屏幕顶部有 30 px 的空白空间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:53:19.080

将属性添加`android:paddingTop="30px"`到具有背景的容器中。
顺便说一句，您应该避免使用像素，而应该使用 dp 。

# python - QuickDraw中的python3递归动画

> ID：13520435
> 
> 赞同：4
> 
> 时间：2012-11-22T21:49:22.917
> 
> 标签：python, animation, recursion, python-3.x, quickdraw

我有一个文本文件，其中包含行星及其相应的卫星/卫星以及它们的轨道半径和周期，我想用它来创建`quickdraw`类似于下面的动画：

![太阳系动画](../Images/f7447db79ca0ed2c447c3f68564ac541.png)

文本文件如下：

```
RootObject: Sun

Object: Sun
Satellites: Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris
Radius: 20890260
Orbital Radius: 0

Object: Miranda
Orbital Radius: 5822550
Radius: 23500
Period: 1.413

Object: Ariel
Orbital Radius: 8595000
Radius: 60000
Period: 2.520379

Object: Umbriel
Orbital Radius: 11983500
Radius: 60000
Period: 4.144177

Object: Titania
Orbital Radius: 19575000
Radius: 75000
Period: 8.7058

Object: Oberon
Orbital Radius: 26235000
Radius: 75000
Period: 13.463

Object: Uranus
Orbital Radius: 453572956
Radius: 2555900
Period: 30799
Satellites: Puck,Miranda,Ariel,Umbriel,Titania,Oberon

Object: Neptune
Orbital Radius: 550000000
Radius: 2476400
Period: 60190
Satellites: Triton

Object: Triton
Orbital Radius: 40000000
Radius: 135300
Period: -5.8

Object: Mercury
Orbital Radius: 38001200
Period: 87.9691
Radius: 243900.7

Object: Venus
Orbital Radius: 57477000
Period: 224.698
Radius: 605100.8

Object: Earth
Orbital Radius: 77098290
Period: 365.256363004
Radius: 637100.0
Satellites: Moon

Object: Moon
Orbital Radius: 18128500
Radius: 173700.10
Period: 27.321582

Object: Mars
Orbital Radius: 106669000
Period: 686.971
Radius: 339600.2
Satellites: Phobos,Deimos

Object: Phobos
Orbital Radius: 3623500.6
Radius: 200000
Period: 0.31891023

Object: Deimos
Orbital Radius: 8346000
Period: 1.26244
Radius: 200000.2

Object: Jupiter
Orbital Radius: 210573600
Period: 4332.59
Radius: 7149200
Satellites: Io,Europa,Ganymede,Callisto

Object: Ceres
Orbital Radius: 130995855
Period: 1679.67
Radius: 48700

Object: Io
Orbital Radius: 22000000
Period: 1.7691377186
Radius: 182100.3

Object: Europa
Orbital Radius: 36486200
Period: 3.551181
Radius: 156000.8

Object: Ganymede
Orbital Radius: 47160000
Period: 7.15455296
Radius: 263400

Object: Callisto
Orbital Radius: 69700000
Period: 16.6890184
Radius: 241000

Object: Saturn
Orbital Radius: 353572956
Period: 10759.22
Radius: 6026800
Satellites: Mimas,Enceladus,Tethys,Dione,Rhea,Titan,Iapetus

Object: Mimas
Orbital Radius: 8433396
Radius: 20600
Period: 0.9

Object: Enceladus
Orbital Radius: 10706000
Radius: 25000
Period: 1.4

Object: Tethys
Orbital Radius: 13706000
Radius: 50000
Period: 1.9

Object: Dione
Orbital Radius: 17106000
Radius: 56000
Period: 2.7

Object: Rhea
Orbital Radius: 24000000
Radius: 75000
Period: 4.5

Object: Titan
Orbital Radius: 50706000
Radius: 257600
Period: 15.945

Object: Iapetus
Radius: 75000
Orbital Radius: 72285891
Period: 79 
```

我已将我的原始代码（更长的可笑）更改为更短的代码：（感谢 sudo_O 提供的所有出色[帮助](https://stackoverflow.com/questions/13519350/inputing-data-into-dictionary-python/13519883#13519883)）

```
file = open("data1.txt","r")

def data(file):
    d = {}
    for line in file:
        if line.strip() != '':
            key,value = line.split(":")
            if key == 'RootObject':
                continue
            if key == 'Object':                
                obj = value.strip()
                d[obj]={}
            else:
                d[obj][key] = value.strip()
    return d

planets = data(file)

print(planets) 
```

我最大的问题是我不知道如何编写从文件中导入数据并利用它`recursion`来创建类似于所示动画的代码。我一直被告知解决方案非常简单，代码实际上非常短，但我不知道该怎么做，这实际上非常令人沮丧。

这是我绕着一个圆运行的圆的代码，但它似乎太复杂了......

```
import math

print("circle",400,300,50)

print("flush false")

centreX=400
centreY=300
radius=100
angle=math.pi/2

while True:
    print("color 0 0 0")
    print("clear")
    print("color 255 0 255")
    print("circle",centreX,centreY,radius)
    childX=math.sin(angle)*radius*1.5+centreX
    childY=math.cos(angle)*radius*1.5+centreY
    print("circle",childX,childY,radius/2)
    print("refresh")
    angle+=0.01 
```

规模代码：

```
scale=250/max([dict[planets]["Orbital Radius"] for x in dict if "Orbital Radius" in dict[planets]]) 
```

环绕行星的代码：

```
print("flush false")
scale=250/max([dict[planets]["Orbital Radius"] for x in dict if "Orbital Radius" in dict[planets]])
t=0
x=400
y=300
while True:
    print("refresh")
    print("colour 0 0 0")
    print("clear")
    print("colour 255 255 255")
    print("fillcircle",x,y,dict['Sun']['Radius']*scale)
    print("text ", "\"Sun\"",x+dict['Sun']['Radius']*scale,y)
    r_earth=dict['Earth']['Orbital Radius']*scale;
    print("circle",x,y,r_earth)
    r_X=x+math.sin(t*2*math.pi/dict['Earth']['Period'])*r_earth
    r_Y=y+math.cos(t*2*math.pi/dict['Earth']['Period'])*r_earth
    print("fillcircle",r_X,r_Y,dict['Earth']['Radius']*scale)
    print("text ", "\"Earth\"",r_X+dict['Earth']['Radius']*scale,r_Y)
    t+=0.02 
```

这段代码不能很好地工作，但是作为一个初学者，我在这个问题上处于我的极限......

最后的努力！！这行得通吗？

```
print("flush false")
scale = 250/max([dict[planets]["Orbital Radius"] for x in dict if "Orbital Radius" in dict[planets]])
t = 0
x = 400
y = 300
print("fillcircle",400,300,dict['Sun']['Radius']*scale)
print("text ", "\"Sun\"",x+dict['Sun']['Radius']*scale,y)

while True:
    r_new = dict['Object']['Orbital Radius']*scale
    print("circle",x,y,r_new)
    r_X = x + math.sin(t*2*math.pi/dict['Object']['Period'])*r_new
    r_Y = y + math.cos(t*2*math.pi/dict['Object']['Period'])*r_new
    print("fillcircle",r_X,r_Y,dict['Object']['Radius']*scale)
    print("text ",Object,r_X+dict['Object']['Radius']*scale,r_Y)
    t += 0.02
    if planets['Object']['Satellites'] = 0
        return
    else:
        r_sat = dict['Object']['Satellites']['Orbital Radius']*scale
        print("circle",x,y,r_sat)
        r_satX = x + math.sin(t*2*math.pi/dict['Object']['Satellites']['Period'])*r_sat
        r_satY = y + math.cos(t*2*math.pi/dict['Object']['Satellites']['Period'])*r_sat
        print("fillcircle",r_satX,r_satY,dict['Object']['Satellites']['Radius']*scale)
        print("text ",['Object']['Satellites'],r_satX+dict['Object']['Satellites']['Radius']*scale,r_satY)
        t += 0.02 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:39:44.980

**第一个问题递归**- 递归函数是一个调用自身的函数！一个简单的例子是倒计时功能，例如：

```
def countdown(n):
    # counting down the recursive way! 
    if n > 0:
        print n
        countdown(n-1)
    else:
        return 
```

调用`countdown(10)`将打印`10, 9, 8,.., 2, 1`。

您可以看到它`countdown`传递了一个数字`n`，它所做的只是打印该数字，然后调用它自己，但传递`n-1`了这个时间。只有`n=0`通过一次，它就没有任何事情要做，因此每个递归调用都会返回。对于您的词典案例*（我们称其为词典库以避免混淆）*，`recursive`打印方法是：

1.  将整个库传递给打印例程。
2.  打印第一本词典。
3.  递归调用自身并传递库减去第一个字典。
4.  当图书馆没有更多要打印的词典时返回。

像这样的东西：

```
def recursive_print(dic):

    if len(dic) > 0:                  # If dictionaries in library > 0 
        print dic.keys()[0]           # Print the key i.e Earth
        print dic[dic.keys()[0]]      # Print the dictionary value for i.e Earth
        dic.popitem()                 # Remove the Earth dictionary from library
        recursive_print(dic)          # Recursive call 
    else:
        return                        # Printed all, return up the stack.

planets = data(file)
recursive_print(planets) 
```

下一步将不是以当前格式打印字典，而是进行一些计算/转换，以便输出是有效`quickdraw`输入，就像您已经使用`quickdraw`.

您将需要担心比例，以确保所有物体都适合绘图表面，找到最大的天体`Orbital Radius`并使用它来计算比例。

使用类似于您的代码的列表理解，我们可以找到最大值：

```
max([planet[key]['Orbital Radius'] for key in planet])

>>> 8595000

scale = gridsize/max([planet[key]['Orbital Radius'] for key in planet]) 
```

# c - 在 C 中从数组 [0] 到数组 [n] 而不用全部输入

> ID：13520438
> 
> 赞同：-1
> 
> 时间：2012-11-22T21:49:47.427
> 
> 标签：c, arrays

有没有办法在 C 中从数组 [0] 到数组 [n] 而不用全部输入出来。就像：

```
 if(array[0] to array[n] == '_') 
```

感谢各位的建议，但我只希望在数组中的所有元素都是 ==95 的情况下执行代码，而不是如果其中只有一个是。我最终只是将它们全部输入并在它们之间使用 &&。无论如何谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:54:19.123

它被称为`for`循环，您可以创建一个函数来封装您想要能够检查数组内部`if`条件的行为：

```
int arrayIsJustUnderscores(char *array, int n)
{
    for (int i = 0; i < n; i++)
    {
        if (array[i] != '_')
            return 0;
    }

    return 1;
}

// somewhere else in your code:

if (arrayIsJustUnderscores(array, n))
{
    puts("Array is just underscores...");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:52:08.160

简短的回答：没有。

如果要测试整个数组，则必须经过一个 for 循环：

```
for (i = 0; i < n; ++i)
    if (array[i] == '_')
        do_something(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:51:40.743

也许

```
for (int i = 0; i < n; i++) {
   if (array[i] == '_') {
       // do something
   }
} 
```

# php - PHP + GridFS：自己的 id

> ID：13520440
> 
> 赞同：0
> 
> 时间：2012-11-22T21:49:59.900
> 
> 标签：php, mongodb, gridfs

我想使用 MongoDB 的 GridFS 保存许多文件，但使用我自己的 id 遇到了一些麻烦。我的简化代码如下：

```
<?php
$mongo = new Mongo();
$db = $mongo->myFiles;
$grid = $db->getGridFS();

var_dump($grid->storeBytes("ForTestingPurposes", array("_id" => new MongoID("mySampleId"), array("safe" => true))));
?> 
```

我假设 storeBytes() 返回我自己的 id（在本例中为“mySampleId”），但我得到的是这样的：

```
object(MongoId)#5 (1) { ["$id"]=> string(24) "50ae7542a34156852300003d" } 
```

.. 从 Mongo 自动生成的 ID。我上面的代码有什么问题吗？感谢您的任何建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:12:50.473

PHP [MongoId 类](http://php.net/manual/en/class.mongoid.php)仅用于使用具有特定 12 字节格式的[MongoDB ObjectID 。](http://www.mongodb.org/display/DOCS/Object+IDs)

如果您想使用自定义值`_id`，只需直接传递字符串，例如：

```
$grid->storeBytes("ForTestingPurposes", array("_id" => 'mySampleId', array("safe" => true)))); 
```

# c++ - 重新定位向量的一部分

> ID：13520441
> 
> 赞同：2
> 
> 时间：2012-11-22T21:50:09.737
> 
> 标签：c++, vector, std

我想从 a 中取出一个范围`vector`（删除项目）并将它们以相同的顺序插入到同一个向量中，但在另一个位置。

**例子：**

```
 0 1 2 3 4 5
Original vector:  A B C D E F 
```

取范围`1-3`并在 (after) 处插入`4`。

```
 0 1 2 3 4 5
Resulting vector: A E B C D F 
```

我可能可以使用`for`循环或使用[`remove_copy`](http://www.cplusplus.com/reference/algorithm/remove_copy/)and来做到这一点[`insert`](http://www.cplusplus.com/reference/stl/vector/insert/)。有没有更好/更快的方法？我不喜欢的`remove_copy`是我必须指定一个*不*`value`应该被删除的。我想移动所有这些，但我不确定我是否可以指定一个永远不会出现在.*`value``vector`*

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T21:56:37.617

你想要[`std::rotate`](http://en.cppreference.com/w/cpp/algorithm/rotate)：

```
#include <vector>
#include <algorithm>

//                           |<---------->|<->|          <-- rotate this range
std::vector<char> v = { 'A', 'B', 'C', 'D', 'E', 'F' };

std::rotate(v.begin() + 1, v.begin() + 4, v.begin() + 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:04:28.383

您可以`std::copy_backward`用于复制对象（复制，不移动），然后用于`std::vector::erase`删除原始对象。

对于您的示例：

```
std::copy_backward(v.begin()+1, v.begin()+3, v.begin()+4);
v.erase(v.begin()+1, v.begin()+3); 
```*

# c# - SDL Tridion EventSubscription 取消订阅问题

> ID：13520442
> 
> 赞同：5
> 
> 时间：2012-11-22T21:50:10.273
> 
> 标签：c#, .net, tridion, unsubscribe

我们正在尝试取消订阅事件代码中的 eventSubscripton。我们正在使用以下代码

```
[TcmExtension("EventHandlerExtension")]
public class EventHandler : TcmExtension, IDisposable
{
    private EventSubscription componentSaveSubscription = null;
    private EventSubscription componentPublishSubscription = null;

    #region Public Methods
    /// <summary>
    /// Handle for Eventing System
    /// </summary>
    public EventHandler()
    {
        Subscribe();
    }
    /// <summary>
    /// Subscribe Events
    /// </summary>
    public void Subscribe()
    {
        //News Article Page created when component Save
        componentSaveSubscription = EventSystem.Subscribe<Component, SaveEventArgs>(OnComponentSavePost, EventPhases.TransactionCommitted);

        //EventSystem.Subscribe<Component, SaveEventArgs>(OnComponentSavePost, EventPhases.TransactionCommitted);
        componentPublishSubscription = EventSystem.Subscribe<Component, PublishOrUnPublishEventArgs>(OnComponentPublishOrUnPublishPost, EventPhases.TransactionCommitted);
        //EventSystem.Subscribe<StructureGroup, PublishOrUnPublishEventArgs>(OnStructureGroupPublishInitiated, EventPhases.TransactionCommitted);

    }
    /// <summary>
    /// IDisposable Implementation
    /// </summary>
    public void Dispose()
    {

        if (componentSaveSubscription != null) componentSaveSubscription.Unsubscribe();
        if (componentPublishSubscription != null) componentPublishSubscription.Unsubscribe();
    }} 
```

我们观察到的是，一旦调用了“{EventSubsciption}.Unsubscribe”，事件就停止了它应该工作的后续事件。一旦事件系统相关服务重新启动，事件代码仅在第一次按预期工作，并且永远不会被调用后续事件（它应该工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:23:53.220

尝试删除 Dispose 方法，看看是否有区别。Tridion 可能会在事件的第一个实例被触发时实例化事件处理程序，然后在系统重新启动之前不再执行此操作。因此，如果您取消订阅并处置，那么您的类将不会再次实例化。您的环境中的其他东西也可能在干扰。很难说，但请先删除 Dispose。

我的样板处理程序如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;
using Tridion.ContentManager;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.ContentManagement.Fields;
using Tridion.ContentManager.Extensibility;
using Tridion.ContentManager.Extensibility.Events;

namespace NicksEventSystem
{
    [TcmExtension("NicksEventSystemExtension")]
    public class NicksEventHandler : TcmExtension
    {
        public NicksEventHandler()
        {
            Subscribe();
        }

        private void Subscribe()
        {
            EventSystem.Subscribe<Component, FinishActivityEventArgs>(MyEvent, EventPhases.TransactionCommitted);
        }

        private void MyEvent(Component wfComponent)
        {
            //... Do stuff!
        }

    }
} 
```

# android - 使用图像的流体蛇动画

> ID：13520443
> 
> 赞同：0
> 
> 时间：2012-11-22T21:50:11.637
> 
> 标签：android, algorithm, andengine

我想使用 AndEngine 在 Android 中创建一个蛇游戏。但在我的游戏中，蛇不会被玩家控制。它只会向随机方向移动。

我有一条可以随意移动的蛇。我的问题是我想要**实时动画**（即蛇不应该只是在延迟后移动）。

我尝试使用寄存器修饰符来移动蛇，这很有效。但问题是**我有每条蛇的尾巴元素的图像**。

如果我只有矩形，我会知道如何做到这一点，但我使用的是更高级的图像。

当蛇改变方向时，我应该有一个连接不同方向的元素（例如：右和下）。

![在此处输入图像描述](../Images/d7aeef542ccbae816f65c67c762b2d53.png)

**有什么算法可以解决这个问题吗？或者，我在哪里可以找到解释这一点的开源项目？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:05:25.753

长方形也是一样。理想情况下，您不会在动画期间删除图像。

# ruby-on-rails - 会话变量未在来自 OmniAuth OpenID 的回调中初始化

> ID：13520450
> 
> 赞同：2
> 
> 时间：2012-11-22T21:50:48.580
> 
> 标签：ruby-on-rails, session, omniauth

我需要允许我的应用程序的用户在他们已经登录后将 OpenID 与他们的帐户相关联。

在我遵循 OmniAuth 之前访问的最后一个控制器中，我将用户 ID 设置为会话。相关代码为：

```
class UsersController < ApplicationController
  def confirm
    session[:user_id] = @user.id
  end
end 
```

然后用户链接到`/auth/openid`. 这按预期工作。这是 OmniAuth 初始化程序：

```
require 'openid/store/filesystem'
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :open_id, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'openid'
end 
```

当用户从 OpenID 返回时，我将它们路由到会话控制器，如下所示（在 routes.rb 中）：

```
match 'auth/:provider/callback', to: 'sessions#process_omniauth' 
```

以下是 sessions_controller.rb 中的相关代码：

```
class SessionsController < ApplicationController
  def process_omniauth
    auth_hash = request.env['omniauth.auth']
    puts "SESSION: #{session}"
    # ...
  end
end 
```

奇怪的是，该`session`变量似乎没有使用前一个控制器的 user_id 进行初始化。

如果我转到我的应用程序中的其他页面，user_id 会按预期在会话中。

但是，如果我尝试将 OmniAuth 哈希分配给会话变量，它会删除之前存在的任何会话。例如，如果我`session[:omniauth] = auth_hash`在上面的`process_omniauth`块中运行，则此信息在会话中可用于我的应用程序的其他部分，但`user_id`如果我这样做，似乎已经忘记了！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T18:19:29.713

我有同样的问题。发现的是，当 OmniAuth 给我回电时，`session`两者`request.env['rack.session']`都是空`request.env['action_dispatch.request.unsigned_session_cookie']`的，但拥有所有会话密钥。

我还没有弄清楚为什么会出现差异。

最终我在这里找到了答案：

[OmniAuth - 当前会话未在 OpenID 回调上加载](https://stackoverflow.com/a/5271761/468618)。

# ajax - LoadRunner ajax 字段

> ID：13520456
> 
> 赞同：0
> 
> 时间：2012-11-22T21:52:04.133
> 
> 标签：ajax, loadrunner

我在一个网页上记录了一个脚本，其中包含一个我通常输入邮政编码的文本字段，另一个字段根据我输入的邮政编码进行更新。重播 svript 时出现错误。我认为我的问题与生成的脚本包含一个 web_submit_data 我作为邮政编码的一部分输入的每个数字有关。

这是我在第一个 web_submit_data 之后得到的错误消息：

错误 -26612：“和一些 url”的 HTTP 状态代码 = 500（内部服务器错误）[MsgId：MER-26612]]

有人知道这个问题和可能的解决方案吗？此处描述为：

[http://www.myloadtest.com/scripting-exercise-a-basic-ajax-application/](http://www.myloadtest.com/scripting-exercise-a-basic-ajax-application/)

谢谢！

* * *

我的代码如下。它是使用 web/http 协议的记录器，当我输入一个自动填充字段/自动完成字段时它正在记录，所以当我在邮政编码字段中输入 7000 时，LR 会为我输入的每个数字生成一个 web_submit_data。我不知道是不是这样是问题面团。

行动（） {

```
web_url("nav_security_check", 
    "URL=http://someurl.local:8080/brukerprofil/nav_security_check?id=12345678910", 
    "Resource=0", 
    "RecContentType=text/html", 
    "Referer=", 
    "Snapshot=t1.inf", 
    "Mode=HTML", 
    EXTRARES, 
    "Url=img/nav_logo.gif", "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", ENDITEM, 
    LAST);

lr_think_time(4);

web_submit_data("brukerprofil", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.0-brukerprofil~skjema-valgtAdresseType", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t2.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType", "Value=radio11", ENDITEM, 
    LAST);

lr_think_time(4);

web_submit_data("brukerprofil_2", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t3.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=7", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_3", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t4.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=70", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_4", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t5.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=700", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_5", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t6.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=7000", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_6", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t7.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=7000", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_7", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.2-brukerprofil~skjema-valgtAdresseType-alternativAdressePanel-norskAlternativPostnummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t8.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=7000", ENDITEM, 
    LAST);

lr_think_time(6);

web_submit_data("brukerprofil_8", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IBehaviorListener.1-brukerprofil~skjema-kontonummer", 
    "Method=POST", 
    "RecContentType=text/xml", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t9.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=kontonummer", "Value=62281154546", ENDITEM, 
    LAST);

web_submit_data("brukerprofil_9", 
    "Action=http://someurl.local:8080/brukerprofil/brukerprofil?0-1.IFormSubmitListener-brukerprofil~skjema", 
    "Method=POST", 
    "RecContentType=text/html", 
    "Referer=http://someurl.local:8080/brukerprofil/brukerprofil?0", 
    "Snapshot=t10.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=brukerprofil-skjema_hf_0", "Value=", ENDITEM, 
    "Name=valgtAdresseType", "Value=radio11", ENDITEM, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostAdresse1", "Value=Nedgata 2", ENDITEM, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostAdresse2", "Value=Postboks 2", ENDITEM, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostAdresse3", "Value=Sentrum 123", ENDITEM, 
    "Name=valgtAdresseType:alternativAdressePanel:norskAlternativPostnummer", "Value=7000", ENDITEM, 
    "Name=kontonummer", "Value=62281154546", ENDITEM, 
    "Name=mobilpanel:landkode", "Value=47", ENDITEM, 
    "Name=mobilpanel:nummer", "Value=98765432", ENDITEM, 
    "Name=telefonnummerpanel:landkode", "Value=47", ENDITEM, 
    "Name=telefonnummerpanel:nummer", "Value=22225555", ENDITEM, 
    "Name=ekstra-telefonnummerpanel:landkode", "Value=46", ENDITEM, 
    "Name=ekstra-telefonnummerpanel:nummer", "Value=11223344", ENDITEM, 
    "Name=epost", "Value=per.hansen@hjemme.no", ENDITEM, 
    LAST);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:46:47.180

My bet is that you have unhandled dynamic data. This is very much related to your other [post](https://stackoverflow.com/questions/13512243/msgid-merr-26612/13531209#13531209). Looking at the requests you have noted there are several items that stick out as likely unhandled elements of Dynamic data and one security ID that seems completely faked.

Record your busines process 2-3 times. Use WinDiff (Included with LoadRunner) or another file DIFF tool that you like to identify the differences between the recordings. The dynamic elements should literally jump off the page as differences between the recordings. You will need to handle these dynamic elements appropriately if you wish your script to continue.

Also, Testing 101 housekeeping items, for each step there is an expected result. Conspicuously absent in your code is any sort of check for a correct expected result. In such a case it's quite easy for an HTTP 200 status page to be returned which is completely out of context for your business process, but when allows your script to continue. In such a condition where you have "come off the tracks" and do not know if due to the lack of checking for expected results it is a 100% certainty that you will hit an HTTP 500 within 1-2 request sets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:59:03.067

当服务器出现内部错误（例如 PHP 脚本出错）时，会生成 HTTP 错误 500。如果您可以发布发出 ajax 请求的代码和它正在获取的文件（只是内容很好），我可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:55:09.590

Magnus，我可以建议您停止使用记录按钮并查看 HTTP 级别发生的情况，而不是依赖工具来获取请求。

我建议你花一些时间在[Firebug](http://getfirebug.com/)、[HTTP Watch](http://www.httpwatch.com/)或[Fiddler](http://www.fiddler2.com/fiddler2/)上，先看看应用程序实际上在做什么。

如果您不知道手动操作时会发生什么，您就无法实现自动化。

# php - 捕获 PHP 中的所有错误

> ID：13520467
> 
> 赞同：-1
> 
> 时间：2012-11-22T21:52:47.470
> 
> 标签：php

我想捕获所有错误，并根据其类型进行某种操作。我想处理以下类型的错误：

*   通知
*   警告
*   错误
*   严重错误
*   警报
*   紧急情况

我可以用 set_error_handler() 函数来做这些吗？

E_USER_WARNING 和 E_WARNING 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:23:57.197

这是一个源自[PHP 手册](http://php.net/manual/en/errorfunc.examples.php)的简单示例：

```
<?php
error_reporting(0);
set_error_handler('handle_error', E_ALL);
function handle_error($errno, $errmsg, $filename, $linenum, $vars) {
    $errors = array(
        E_ERROR              => 'Error',
        E_WARNING            => 'Warning',
        E_PARSE              => 'Parsing Error',
        E_NOTICE             => 'Notice',
        E_CORE_ERROR         => 'Core Error',
        E_CORE_WARNING       => 'Core Warning',
        E_COMPILE_ERROR      => 'Compile Error',
        E_COMPILE_WARNING    => 'Compile Warning',
        E_USER_ERROR         => 'User Error',
        E_USER_WARNING       => 'User Warning',
        E_USER_NOTICE        => 'User Notice',
        E_STRICT             => 'Runtime Notice',
        E_RECOVERABLE_ERROR  => 'Catchable Fatal Error'
    );
    if(in_array($errno, array_keys($errors))) {
        echo $errors[$errno];
    }
}
$foo = NOT_DEFINED; 
```

它将输出错误类型。

# c# - 如何将文件读入保留 CR/LF 的字符串？

> ID：13520472
> 
> 赞同：8
> 
> 时间：2012-11-22T21:53:10.873
> 
> 标签：c#, string, file, newline, carriage-return

如果我问“如何将文件读入字符串”这个问题，答案将是显而易见的。但是 - 这是**保留 CR/LF 的**问题。

问题是，`File.ReadAllText`去掉这些字符。`StreamReader.ReadToEnd`刚刚为我将 LF 转换为 CR，这导致我在很明显的代码中有错误的地方进行了长时间的调查；-)

所以，简而言之，如果我有包含`foo\n\r\nbar`我想要获取的文件`foo\n\r\nbar`（即完全相同的内容），则不是`foo bar`,`foobar`或`foo\n\n\nbar`. .Net 空间中是否有一些现成的使用方式？

*结果应该始终是单个字符串，包含整个文件。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T22:19:01.747

你确定这些方法是剥夺你角色的罪魁祸首吗？

我试图写一个快速测试；`StreamReader.ReadToEnd`保留所有换行符。

```
string str = "foo\n\r\nbar";
using (Stream ms = new MemoryStream(Encoding.ASCII.GetBytes(str)))
using (StreamReader sr = new StreamReader(ms, Encoding.UTF8))
{
    string str2 = sr.ReadToEnd();
    Console.WriteLine(string.Join(",", str2.Select(c => ((int)c))));
}

// Output: 102,111,111,10,13,10,98,97,114
//           f   o   o \n \r \n  b  a   r 
```

写入和读取临时文件时会获得相同的结果：

```
string str = "foo\n\r\nbar";
string temp = Path.GetTempFileName();
File.WriteAllText(temp, str);
string str2 = File.ReadAllText(temp);
Console.WriteLine(string.Join(",", str2.Select(c => ((int)c)))); 
```

看来您的换行符在其他地方迷路了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-11T13:28:56.840

这段代码将保留 LR 和 CR

```
string r = File.ReadAllText(@".\TestData\TR120119.TRX", Encoding.ASCII); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T22:14:04.577

> 结果应该始终是单个字符串，包含整个文件。

需要两跳。第一个是 File.ReadAllBytes() 来获取文件中的所有**字节**。它不会尝试翻译任何内容，您会在文件中获得原始数据，因此怪异的行尾会按原样保留。

但那是字节，你要求一个字符串。所以第二跳是应用 Encoding.GetString() 将字节转换为字符串。您要做的一件事是选择正确的 Encoding 类，该类与编写文件的程序使用的编码相匹配。鉴于如果文件包含`\n\r\n`序列，文件就会非常混乱，并且您没有记录有关该文件的任何其他内容，最好的选择是使用 Encoding.Default。根据需要进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T22:21:04.703

您可以使用 读取文件的内容`File.ReadAllLines`，这将返回一个行数组。然后使用`String.Join`分隔符将行合并在一起。

```
string[] lines = File.ReadAllLines(@"C:\Users\User\file.txt");
string allLines = String.Join("\r\n", lines); 
```

请注意，这将失去实际行终止符的精度。例如，如果行仅以`\n`or结尾`\r`，则生成的字符串`allLines`将用`\r\n`行终止符替换它们。

当然还有其他方法可以在不丢失真正的 EOL 终止符的情况下实现这一点，但是`ReadAllLines`它很方便，因为它可以自行检测多种类型的文本编码，而且它占用的代码行数也很少。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-29T07:36:17.233

ReadAllText 不返回回车符。

> 此方法打开一个文件，读取文件的每一行，然后将每一行添加为字符串的一个元素。然后它关闭文件。行定义为字符序列后跟回车符 ('\r')、换行符 ('\n') 或回车符后紧跟换行符。**结果字符串不包含终止的回车和/或换行**。

来自 MSDN - [https://msdn.microsoft.com/en-us/library/ms143368(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms143368(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-23T23:53:24.407

这类似于接受的答案，但希望更重要。`sr.ReadToEnd()`将读取所需的字节：

```
string myFilePath = @"C:\temp\somefile.txt";
string myEvents = String.Empty;

FileStream fs = new FileStream(myFilePath, FileMode.Open);
StreamReader sr = new StreamReader(fs);
myEvents = sr.ReadToEnd();
sr.Close();
fs.Close(); 
```

您甚至可以在级联`using`语句中执行这些操作。但我想首先描述您写入该文件的方式将如何决定如何从`myEvents`字符串中读取内容，并且可能真的是问题所在。我这样写到我的文件中：

```
using System.Reflection;
using System.IO;

private static void RecordEvents(string someEvent)
{
    string folderLoc = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
    if (!folderLoc.EndsWith(@"\")) folderLoc += @"\";
    folderLoc = folderLoc.Replace(@"\\", @"\"); // replace double-slashes with single slashes
    string myFilePath = folderLoc + "myEventFile.txt";

    if (!File.Exists(myFilePath))
        File.Create(myFilePath).Close(); // must .Close() since will conflict with opening FileStream, below

    FileStream fs = new FileStream(myFilePath, FileMode.Append);
    StreamWriter sr = new StreamWriter(fs);
    sr.Write(someEvent + Environment.NewLine);
    sr.Close();
    fs.Close();
} 
```

然后我可以使用上面的代码来获取内容的字符串。因为我走得更远并寻找单个字符串，所以我把这段代码放在那个代码之后，在那里：

```
if (myEvents != String.Empty) // we have something
{
    // (char)2660 is ♠  -- I could have chosen any delimiter I did not
    // expect to find in my text
    myEvents = myEvents.Replace(Environment.NewLine, ((char)2660).ToString());
    string[] eventArray = myEvents.Split((char)2660);
    foreach (string s in eventArray)
    {
        if (!String.IsNullOrEmpty(s))
            // do whatever with the individual strings from your file
    }
} 
```

这很好用。所以我知道`myEvents`必须`Environment.NewLine`保留字符，因为我能够用该字符替换它`(char)2660`并在该字符串上执行一个`.Split()`操作，以将其划分为各个段。

# html - 让水平导航栏保持在一条线上

> ID：13520477
> 
> 赞同：-1
> 
> 时间：2012-11-22T21:53:33.357
> 
> 标签：html, css, navbar

目前，当正确查看时，我的导航栏没有任何问题。但是，我是强迫症患者，我想确保我也解决了不正确或异常的观看问题。

现在，我的导航栏由一条水平线组成，链接由 | 分隔。和一些 CSS 翻转突出显示。在我看来，简单的设置可以很好地完成工作。但是，如果我放大，最终我会到达最后一个链接没有更多空间的阶段，然后进入下一行。显然不好看。我尝试在其上放置一个 max-width:100% ，但没有任何区别。

相关代码如下：

```
<div class="navbarwrapper">
    <div class="navbar">
        | <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
        <a href="" class="navbar"></a> |
    </div>
</div>

.navbarwrapper {
    margin-bottom: 10px;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    min-width: 800px;
}
.navbar {
    padding: 10px;
} 
```

就像我说的，它在正常情况下工作正常，但是如果你放大（或者我假设分辨率很低），最后一个链接会流到第二行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:01:40.117

锚标签是内联元素。这就是他们在空间不足时应该做的事情。如果您希望它们表现不同，您需要为`overflow`您想要的行为设置包装元素的 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T08:14:14.867

溢出：隐藏；在必须具有固定宽度的父 div 上；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T00:00:33.000

尝试`<li>`在您的菜单 中使用[DEMO](http://jsfiddle.net/yaSWM/28/)

# docpad - 在 Docpad 中使用 Builder

> ID：13520478
> 
> 赞同：2
> 
> 时间：2012-11-22T21:53:34.990
> 
> 标签：docpad

我正在使用[DocPad](https://github.com/bevry/docpad)来构建我的网站，并且在文档中说我们可以使用一个名为`buildr`来捆绑、压缩文件的帮助程序。

是否可以在命令中集成`buildr`执行？`docpad generate``docpad run`

它还需要它自己的配置文件还是可以在插件部分`buildr.coffee`中编写配置？`docpad.config`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T04:22:01.800

我想它或多或少与grunt 的[要点](https://gist.github.com/3898915)相同，除了 grunt 的东西改为 buildr。

# jquery - jQuery手机

> ID：13520479
> 
> 赞同：2
> 
> 时间：2012-11-22T21:53:49.083
> 
> 标签：jquery, mobile

为什么这个 DIV 看起来不同？
**第一的：**

```
<div data-role="fieldcontain">
   <fieldset data-role="controlgroup">
      <legend>City</legend>
      <input type="text" id="select_team_city" value="" placeholder="Type Team City"/>
   </fieldset>
</div> 
```

**第二：**

```
<div data-role="fieldcontain">
   <label for="select_team_name">Name</label>
   <input type="text" id="select_team_name" value="" placeholder="Type Team Name"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T12:18:45.240

嗯，我不确定我是否理解正确。它们看起来不同，因为**Legend**做的不是**标签**

根据 w3c，legend 将相关元素分组到一个表单中（例如，多个字段）

[http://www.w3schools.com/tags/tag_legend.asp](http://www.w3schools.com/tags/tag_legend.asp)

而 label 为输入元素定义了一个标签

[http://www.w3schools.com/tags/tag_label.asp](http://www.w3schools.com/tags/tag_label.asp)

请参阅那里的示例，或考虑以下内容。我不确定您要达到什么目的，但以下是我如何理解这些标签的用法：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <legend>Team Information</legend>
        <label for="select_team_city">City</label>
        <input type="text" id="select_team_city" value="" placeholder="Type Team City"/>
        <label for="select_team_name">Name</label>
        <input type="text" id="select_team_name" value="" placeholder="Type Team Name"/>
    </fieldset>
</div> 
```

请参阅此处的工作示例：http: [//jsfiddle.net/C3CR2/2/](http://jsfiddle.net/C3CR2/2/)

# jquery - jQuery CORS GET 成功，但萤火虫仍以红色显示

> ID：13520483
> 
> 赞同：0
> 
> 时间：2012-11-22T21:54:25.277
> 
> 标签：jquery, ajax, cors

我想使用 jQuery v1.8.3 进行跨域 GET ajax 请求。

这是我的设置：

1.  我有一个服务器，它为*每个*请求`domain1.dev`发出这些 CORS 标头：

     **   `Access-Control-Allow-Origin: *`
    *   `Access-Control-Allow-Credentials: true`
    *   `Access-Control-Allow-Methods: *`
    *   `Access-Control-Allow-Headers: *`* 
**   我有一个 Web 应用程序，它从被调用`domain2.dev`加载 javascript 。`domain1.dev``domain1.js`

    在这个`domain1.js`文件中，我发出这个 AJAX 请求：

    ```
    jQuery.ajax('http://domain1.dev/path', {
        headers: {'Accept': 'application/json'},
        xhrFields: {
            withCredentials: true
        },
        statusCode: {
            200: function(data, textStatus, jqXHR) {
                // some logic
            },
            401: function(data, textStatus, jqXHR) {
                // some other logic
            }
        }
    }) 
    ```

    *   我从加载页面`domain2.dev`。发出 AJAX 请求（没有预检）并且成功（状态代码 200）但 firebug 仍然以红色显示它（chrome 显示“已取消”），我不明白为什么。* 

 *任何的想法？

编辑：

由 发送的响应标头`domain1.dev`：

```
Access-Control-Allow-Cred...    true
Access-Control-Allow-Head...    Accept, Accept-Encoding, Accept-Language,    Connection, Cookie, Host, Origin, Referer, User-Agent
Access-Control-Allow-Meth...    GET
Access-Control-Allow-Orig...    *
Cache-Control   private
Connection  keep-alive
Content-Type    application/json
Date    Thu, 22 Nov 2012 22:24:44 GMT
Server  nginx/1.2.3
Transfer-Encoding   chunked
X-Powered-By    PHP/5.4.6
x-debug-token   50aea62c91ee6 
```

而请求标头是：

```
Accept  application/json
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection  keep-alive
Cookie  obfuscated=uk40mmmqbffues5cpn6omj6mf0; __utma=126865951.1486960365.1353615466.1353615466.1353619027.2; __utmz=126865951.1353615466.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=126865951
Host    domain1.dev:8080
Origin  http://domain2.dev:8080
Referer http://domain2.dev:8080/app_dev.php
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/17.0 Firefox/17.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:02:06.753

在后端，您必须明确说明要允许的标头和方法。和响应标`Access-Control-Allow-Methods`头`Access-Control-Allow-Headers`不支持通配符。

如果您想允许任何方法/标头，只需在（预检）请求中查找`Access-Control-Request-Methods`和标头，并返回文字值。`Access-Control-Request-Headers`

`Access-Control-Allow-Origin`而且，当`withCredentials`为真时，您不能使用通配符。要么使用与前面描述的相同的机制来模拟通配符，要么不使用`withCredentials`.*

# javascript - jQuery“悬停”功能在 FireFox 中不起作用 标签

> ID：13520485
> 
> 赞同：0
> 
> 时间：2012-11-22T21:54:34.080
> 
> 标签：javascript, jquery, html, firefox, area

我的代码解释：

我有 3 张图像不断向左滚动。当图像向左太远时，它会再次一直放置到右侧，从而创建一个不错的过渡效果。

图像使用标签进行映射，当您将鼠标悬停在图像上时，滚动停止，并且在图像的特定区域上会出现一个弹出框。

在 Chrome 和 Safari 中这有效，但在 FireFox 中，悬停功能不会注册标签。我应该怎么办？

这是我的代码：

```
var custom_style = 'night'; // set this to day or night, and then set_style to "true" to activate it
var set_style = true; // When this is false, it uses your computer's time
var speed = 2; // number of pixels moved left every 50 milliseconds

paused = false;
area = null; 
$(document).ready(function() {
    var date = new Date();
    var style = "day"
    if (date.getHours() >= 17 || date.getHours() <= 5 || (set_style && custom_style == 'night')){
        style="night";
        $('#day_sign2').hide();
        $('#night_sign').show();
        $('.customarea').addClass('customareaNight');
    }else{
        $('#container').css( 'backgroundImage', '0 !important' );
        $('#container').addClass('night_container');
    }
    setInterval(wells_fancy_slider, 50);
    $('area').css('z-index', '5000');
    t = null;

    $('area').hover(function() { // this is not registering in FF
        $('.customarea').hide();
        paused = true;
        area = $(this).attr('id');
        $('.custom' + area).show();
        alert(area);
        console.log('.custom' + area);
        t = setTimeout(custom_mouseover, 5000);
    }, function() {
        setTimeout(function() {
            $('.customarea').hide();
            paused = false;
        }, 2500)
    });

    if (style == 'day'){
        $('#container').css('background-color', 'white');
        $('.night').hide();
    }else{
        $('.day').hide();
    }

})

function custom_mouseover() {
    clearInterval(t)
}

function wells_fancy_slider() {
    if (!paused) {
        if (parseInt($('.pic1').css('left')) < -2770) {
            $('.pic1').css('left', '5586');
        }
        if (parseInt($('.pic2').css('left')) < -2770) {
            $('.pic2').css('left', '5586');
        }
        if (parseInt($('.pic3').css('left')) < -2770) {
            $('.pic3').css('left', '5586');
        }
        $('.pic1, .pic2, .pic3').css('left', '-=' + speed);
    }
} 
```

和 HTML：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <link rel="stylesheet" type="text/css" href="wells_slider.css">
        <script type="text/javascript" src="wells_slider.js"></script>
    </head>
    <body>
        <div style="position:absolute; width: 15%; z-index: 2000; float: left; height: 100%; left:0px; background-color:black;"></div>
        <div style="position:absolute; width: 15%; z-index: 2000; float: right; height: 100%; right:0px; background-color:black;"></div>

        <div id="container">
            <div style="width: 100%;margin-left: auto;margin-right: auto;position: relative;height: 50px;">
                <img id="day_sign" src="img/day_sign.png" />
                <img id="day_sign2" src="img/day_sign2.png" />
                <img id="night_sign" src="img/night_sign.png" style="display:none;" />
            </div>
            <div id="pic_container">
                <img class="pic1 day" src="img/LMday.png" usemap="img_map" border="0" width="2798" height="450" alt="" />
                <img class="pic2 day" src="img/LMday.png" usemap="img_map" border="0" width="2798" height="450" alt="" />
                <img class="pic3 day" src="img/LMday.png" usemap="img_map" border="0" width="2798" height="450" alt="" />

                <img class="pic1 night" src="img/LMnight.png" usemap="img_map" border="0" width="2798" height="450" alt="" />
                <img class="pic2 night" src="img/LMnight.png" usemap="img_map" border="0" width="2798" height="450" alt="" />
                <img class="pic3 night" src="img/LMnight.png" usemap="img_map" border="0" width="2798" height="450" alt="" />

                <map id="img_map" name="img_map">
                    <area id="area1" shape="rect" coords="3,69,413,445"  alt="1" title="1"    />
                    <area id="area2" shape="rect" coords="413,73,692,443"  alt="2" title="2"    />
                    <area id="area3" shape="rect" coords="692,91,919,440" alt="3" title="3"    />
                    <area id="area4" shape="rect" coords="917,102,1135,440"  alt="4" title="4"    />
                    <area id="area5" shape="rect" coords="1134,103,1363,441" alt="5" title="5"    />
                    <area id="area6" shape="rect" coords="1360,107,1591,438"  alt="6" title="6"    />
                    <area id="area7" shape="rect" coords="1589,96,1872,438"  alt="7" title="7"    />
                    <area id="area8" shape="rect" coords="1871,100,2072,439" alt="8" title="8"    />
                    <area id="area9" shape="rect" coords="2072,116,2272,436" alt="9" title="9"    />
                    <area id="area10" shape="rect" coords="2270,70,2597,433" alt="10" title="10"    />
                    <area id="area11" shape="rect" coords="2595,78,2784,430" alt="11" title="11"    />
                </map>
                <div class="p_container popup_container1 pic1">
                    <a href="http://www.wellsjohnston.com"><div class="customarea customarea1" >
                            Some Text
                        </div></a>
                    <div class="customarea customarea2" style="left:400px;">
                        Some Text
                    </div>
                    <div class="customarea customarea3" style="left:690px;">
                        Some Text
                    </div>
                    <div class="customarea customarea4" style="left:912px;">
                        Some Text
                    </div>
                    <div class="customarea customarea5" style="left:1132px;">
                        Some Text
                    </div>
                    <div class="customarea customarea6" style="left:1357px;">
                        Some Text
                    </div>
                    <div class="customarea customarea7" style="left:1585px;">
                        Some Text
                    </div>
                    <div class="customarea customarea8" style="left:1870px;">
                        Some Text
                    </div>
                    <div class="customarea customarea9" style="left:2070px;">
                        Some Text
                    </div>
                    <div class="customarea customarea10" style="left:2265px;">
                        Some Text
                    </div>
                    <div class="customarea customarea11" style="left:2595px;">
                        Some Text
                    </div>
                </div>
                <div class="p_container popup_container2 pic2">
                    <div class="customarea customarea1" >
                        Some Text
                    </div>
                    <div class="customarea customarea2" style="left:400px;">
                        Some Text
                    </div>
                    <div class="customarea customarea3" style="left:690px;">
                        Some Text
                    </div>
                    <div class="customarea customarea4" style="left:917px;">
                        Some Text
                    </div>
                    <div class="customarea customarea5" style="left:1132px;">
                        Some Text
                    </div>
                    <div class="customarea customarea6" style="left:1357px;">
                        Some Text
                    </div>
                    <div class="customarea customarea7" style="left:1585px;">
                        Some Text
                    </div>
                    <div class="customarea customarea8" style="left:1870px;">
                        Some Text
                    </div>
                    <div class="customarea customarea9" style="left:2070px;">
                        Some Text
                    </div>
                    <div class="customarea customarea10" style="left:2265px;">
                        Some Text
                    </div>
                    <div class="customarea customarea11" style="left:2595px;">
                        Some Text
                    </div>
                </div>
                <div class="p_container popup_container3 pic3">
                    <div class="customarea customarea1" >
                        Some Text
                    </div>
                    <div class="customarea customarea2" style="left:400px;">
                        Some Text
                    </div>
                    <div class="customarea customarea3" style="left:690px;">
                        Some Text
                    </div>
                    <div class="customarea customarea4" style="left:917px;">
                        Some Text
                    </div>
                    <div class="customarea customarea5" style="left:1132px;">
                        Some Text
                    </div>
                    <div class="customarea customarea6" style="left:1357px;">
                        Some Text
                    </div>
                    <div class="customarea customarea7" style="left:1585px;">
                        Some Text
                    </div>
                    <div class="customarea customarea8" style="left:1870px;">
                        Some Text
                    </div>
                    <div class="customarea customarea9" style="left:2070px;">
                        Some Text
                    </div>
                    <div class="customarea customarea10" style="left:2265px;">
                        Some Text
                    </div>
                    <div class="customarea customarea11" style="left:2595px;">
                        Some Text
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:23:19.980

我想我已经想通了。

在您的图像标签上，您需要在地图名称之前放置一个井号标签。

```
<img class="pic1 day" src="img/LMday.png" usemap="#img_map" border="0" width="2798" height="450" alt="" /> 
```

# javascript - 我怎么知道生成 CKEditor 所见即所得编辑器的 javascripts 何时完成执行？

> ID：13520488
> 
> 赞同：1
> 
> 时间：2012-11-22T21:55:28.817
> 
> 标签：javascript, drupal-7, ckeditor

我在 Drupal 7 上使用 CKEditor 3.6.5.7647 将所有过滤的 HTML 文本字段转换为所见即所得的编辑器。Drupal 会自动执行此操作，但会打乱表单验证。实际上，drupal 仍然正确地将`error`类应用到 textarea，但是 textarea 现在被隐藏并被 WYSIWYG 编辑器替换，从而阻止用户看到该类的效果（红色边框）。我认为这可以通过添加一个查看所有所见即所得的脚本来轻松解决，如果相关的文本区域设置了`error`类，则将它们的边框设置为红色，但我发现我的脚本是在所见即所得构建之前执行的，打破它。我设法完成这项工作的唯一方法是这样的：

```
jQuery.noConflict();
(function ($) {
    "use strict";

    function fixWYSIWYGHighlights() {
        $('span.cke_skin_kama').each(function() {
            if ($(this).prev().hasClass('error')) {
                $(this).css({ border: '1px solid #f00'});
            }
        });
    }

    $('document').ready(function () {
        var timeout = window.setTimeout(fixWYSIWYGHighlights, 1000);    // TODO Find a better way to launch the script only once the WYSIWYGs are constructed
    });
}(jQuery)); 
```

如您所见，我使用超时来确保我的脚本仅在构建所见即所得的脚本终止后才被执行，但我想知道是否有更好的方法来执行此操作。

**解决了**

感谢oleq的回答，我用以下代码解决了我的问题：

```
jQuery.noConflict();
(function ($) {
    "use strict";

    $(document).ready(function () {
        CKEDITOR.on('instanceReady', function (event) {
            var textarea = $(event.editor.element.$)[0],
                element = $(event.editor.container.$)[0];
            if($(textarea).hasClass('error')) {
                $(element).css({ border: '1px solid #f00' });
            }
        });
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:21:36.413

我想您应该观察[instanceReady](http://docs.ckeditor.com/#!/api/CKEDITOR-event-instanceReady)事件并在其回调中执行您的代码：

```
CKEDITOR.on( 'instanceReady', function( event ) {
    console.log( 'Me ready!', event, event.editor );
}); 
```

# java - 如何在一个对象中合并两种不同的对象类型？

> ID：13520491
> 
> 赞同：-1
> 
> 时间：2012-11-22T21:55:32.610
> 
> 标签：java, arrays, object, casting

```
callingmethod(){
File f=new File();  
//...
String s= new String();
//...

method( f + s);    // here is problem (most put f+s in object to send it to method)
} 
```

无法更改方法参数

```
method(Object o){
//...
//how to split it to file and String here 
} 
```

对于任何不清楚的事情请询问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:00:05.563

最干净和最惯用的方法是创建一个简单的类来表示您的配对：

```
static class FileString {
  public final File f;
  public final String s;
  FileString(File f, String s) { 
    this.f = f; this.s = s;
  }
} 
```

然后写

```
method(new FileString(file, string)); 
```

内部方法：

```
FileString fs = (FileString)o;
// use fs.f and fs.s 
```

根据更多细节，使用我的示例中的嵌套类，或将其放入自己的文件中。如果你把它放在你实例化它的地方附近，那么你可以像我一样将构造函数设为私有或包私有。但这些只是更精细的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:57:46.187

例如，您可以将其放入数组中：

```
method (new Object[] {f, s});

void method (Object o) {
    final Object[] arr = (Object[]) o;
    File f = (File) arr[0];
    String s = (String) arr[1];
} 
```

# ruby - 如何编译 Ruby 扩展

> ID：13520495
> 
> 赞同：0
> 
> 时间：2012-11-22T21:55:59.580
> 
> 标签：ruby, gem, rake, rakefile

我在 ext/Q/flagvalue.c 中有一个简单的扩展

我的 ext/Q/extconfig.rb 看起来像这样：

```
require 'mkmf'
create_makefile('Q/flagvalue') 
```

Rakefile 中的任务是这样设置的：

```
Rake::ExtensionTask.new("Q") do |extension|
  extension.lib_dir = 'lib/Q'
end 
```

当我`rake build`，我得到以下输出：

```
mkdir -p tmp/x86_64-linux/Q/1.9.3
cd tmp/x86_64-linux/Q/1.9.3
/usr/local/rvm/rubies/ruby-1.9.3-p286/bin/ruby -I。../../../../ext/Q/extconf.rb
创建 Makefile
光盘 -
cd tmp/x86_64-linux/Q/1.9.3
制作
编译../../../../ext/Q/flagvalue.c
链接共享对象 Q/flagvalue.so
光盘 -
安装 -c tmp/x86_64-linux/Q/1.9.3/Q.so lib/Q/Q.so
耙中止！
没有这样的文件或目录 - tmp/x86_64-linux/Q/1.9.3/Q.so

```

所以看起来编译器编译并链接**flagvalue.so**并且安装程序尝试安装不存在的**Q.so** ......这个错误来自哪里，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:55:43.757

在你的试试这个`Rakefile`：

```
Rake::ExtensionTask.new 'flagvalue' do |extension|
  extension.ext_dir = 'ext/Q'
  extension.lib_dir = 'lib/Q'
end 
```

这确实需要一些重复，因为 Rake 任务不知道您指定的目标是什么`extconf`（即它不知道`Q`目录），因此您必须再次指定。`Q`这也意味着任务在项目的目录下创建的结构中不会有目录`tmp`，但这可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:23:42.467

好的，经过一番挖掘（和一些模糊的猜测：-Δ）我找到了解决方案：

我刚刚为我的 gemspec 获得了一些代码（来自[Writehack.com](http://writehack.com/2011/1/30/Packaging%20a%20Ruby%20C%20Extension%20as%20a%20Gem)），就是这样：

```
s.executables   = `git ls-files -- bin/*`.split("\n").map{ |f| File.basename(f) } 
```

这种方法的问题是你必须在你的存储库中已经有了刚刚编译的二进制文件。正确的方法是从 ext-directory 获取 *.c 文件并将它们重命名为 *.so，如下所示：

```
s.executables   = s.files.grep(%r{^ext/.*c$}).map{ |f| File.basename(f, '.c') + '.so'}
s.bindir        = 'bin' 
```

并在`Rakefile`ExtensionTask 中添加一个 bindir 并使其从规范中获取文件：

```
spec = Gem::Specification.load('Q.gemspec')
spec.executables.each do |f|
  Rake::ExtensionTask.new('Q', spec) do |ext|
    ext.name    = f.gsub(/\.so$/,'')
    ext.tmp_dir = 'tmp'
    ext.lib_dir = 'bin'
  end
end 
```

:-Δ

# php - 如果变量为空，则为其赋值

> ID：13520496
> 
> 赞同：0
> 
> 时间：2012-11-22T21:56:03.313
> 
> 标签：php, if-statement, get

我有以下从 url 获取的变量：

```
$getdeparture = $_GET["departure"]; 
```

如果发布为空 &departure=，我想分配一个值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:57:28.023

类似的东西？

```
$getdeparture = isset($_GET["departure"]) ? $_GET["departure"] : $your_value; 
```

或者

```
$getdeparture = !empty($_GET["departure"]) ? $_GET["departure"] : $your_value; 
```

或者

```
$getdeparture = isset($_GET["departure"]) && !empty($_GET["departure"])  ? $_GET["departure"] : $your_value; 
```

第一次错过`!`前面的空。

# php - 填充缺少值的php数组

> ID：13520499
> 
> 赞同：1
> 
> 时间：2012-11-22T21:56:32.220
> 
> 标签：php, arrays

我有一系列值从 1 到 5 的数组。几乎每个数组都有缺失值，有些甚至没有任何值。我的目标是用 0 填充缺失值。所有这些数组都存储到一个多维数组中。

我的数组看起来像：

```
Array
(
    [1] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [2] => Array
        (
            [0] => 1
            [1] => 5
        )

    [3] => Array
        (
            [0] =>  (this array has no values)
        )

    [4] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
            [3] => 4
            [4] => 5
        )

    etc...

) 
```

应该如何：

```
Array
(
    [1] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
            [3] => 0
            [4] => 0
        )

    [2] => Array
        (
            [0] => 1
            [1] => 0
            [2] => 0
            [3] => 0
            [4] => 5
        )

    [3] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 0
            [3] => 0
            [4] => 0
        )

    [4] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
            [3] => 4
            [4] => 5
        )

    etc...

) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:03:49.040

对于每个子数组，循环遍历数字 1 到 5，如果该值存在，则将其键设置为比其值小一：

```
$newarray = array();

foreach($arr as $key => $subarr) {
    for ($i = 1; $i <= 5; $i++) {
        if (in_array($i, $subarr)) $newarray[$key][$i - 1] = $i;
        else $newarray[$key][$i - 1] = 0;
    }
} 
```

`$newarray`你的输出在哪里，`$arr`你的输入数组在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:02:43.623

像这样`array_pad()`的东西（不会成功）。`$myArray`是你的源数组。完成的数组返回`$result`：

```
$result = array();
foreach( $myArray as $subKey=>$subArray ) {
  for( $i=0; $i<5; $i++ ) {
    if( isset( $subArray[$i] )) {
       $result[$subKey][$i] = $subArray[$i];
    } else {
      $result[$subKey][$i] = 0;
    }
  }
} 
```

请注意，我们会复制数组。您不能就地填充数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T19:53:40.533

您可能要注意 PHP 并没有真正做多维数组。它只允许您将 2 个平面数组关联在一起，这不是真正的多维性。

这不起作用，将产生上述结果。

$menu[1] = "我的训练"; //不是 $menu[1][0]

```
$menu[1][1] = "To Do List";
$menu[1][2] = "Catalog";
$menu[1][3] = "Self-Report";
$menu[1][4] = "Completions"; 
```

$menu[2] = "经理";

```
$menu[2][1] = "Direct Reports";
$menu[2][2] = "Incompletes";
$menu[2][3] = "Completions"; 
```

$menu[3] = "教练";

```
$menu[3][1] = "My Classes";
$menu[3][2] = "Printables";
$menu[3][3] = "Qualifications"; 
```

这确实有效。

$menu[1] = "我的训练"; //不是 $menu[1][0]

```
$submenu[1][1] = "To Do List";
$submenu[1][2] = "Catalog";
$submenu[1][3] = "Self-Report";
$submenu[1][4] = "Completions"; 
```

$menu[2] = "经理";

```
$submenu[2][1] = "Direct Reports";
$submenu[2][2] = "Incompletes";
$submenu[2][3] = "Completions"; 
```

$menu[3] = "教练";

```
$submenu[3][1] = "My Classes";
$submenu[3][2] = "Printables";
$submenu[3][3] = "Qualifications"; 
```

$submenu 仅通过第一个键号与 $menu 相关，因为 $submenu 没有第一维值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T22:01:46.583

自从我编写任何 PHP 以来已经有很多年了，但是我猜这样的东西可能会起作用吗？

```
for($i = 0; $i < 5; $i++)
{
  if(empty($myArray[$i])
  {
    $myArray[$i] = 0;
  }
} 
```

# mysql - GROUP BY 相似值并保留最新行的最短方法？

> ID：13520501
> 
> 赞同：0
> 
> 时间：2012-11-22T21:56:59.147
> 
> 标签：mysql, sql

有时我只想获得每个相似值的一行，我通常会这样做：

```
SELECT * GROUP BY Text ORDER BY Date DESC 
```

我使用 GROUP 选择相似行的问题是我没有从行中的最新行中获取值（我不太确定选择保留行的标准是什么）。我只想保留组中的最新行。

我知道如何使用自连接来做到这一点，但是当语句已经很长时，它似乎有点复杂。有没有更短的方法？也许使用 DISTINCT 而不是 GROUP BY？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:57:41.027

假设您有一个包含多列的表，其中两列是`GroupID`和`DATE`。如果你想为每个选择最新的记录`GroupID`，你需要有一个子查询来获取`Date`每个的最新记录`GroupID`，例如

```
SELECT  a.*             -- this just selects all records from original table
FROM    tableName a
        INNER JOIN
        (
            -- this subquery gets the latest DATE entry for each GROUPID
            SELECT GroupID, MAX(DATE) maxDate   
            FROM tableName
            GROUP BY GroupID
        ) b ON a.GroupID = b.GroupID AND
                a.Date = b.maxDate 
```

*如果这个答案不清楚，请询问：D*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:21:40.757

您是否尝试使用 max 功能：

```
SELECT A,B,max(Date) GROUP BY Text 
```

# javascript - jQuery触发类的变化？

> ID：13520502
> 
> 赞同：2
> 
> 时间：2012-11-22T21:57:09.787
> 
> 标签：javascript, javascript-events, jquery

我有一个复选框列表。每个复选框都有`.change(function(){alert('xyz')})`. 每个复选框都有一个类`abc`。
我还有一个名为“ALL”的附加复选框。当“ALL”复选框被更改时，它会更改所有其他复选框的状态。

我希望更改“全部”复选框以触发`.change(...)`所有其他复选框的更改 ( )。但由于其他复选框的状态是以编程方式完成的，因此它本身不起作用。
我尝试用它`$('.abc').change()`来触发所有复选框的更改事件，但没有成功。
我做错了什么，如何完成手头的任务？
顺便说一句，如果我这样做`$('#id_of_a_specific_checkbox').change()`，效果很好。

谢谢你。

**更新**
我所拥有的示例：http: [//jsfiddle.net/ZqJvc/](http://jsfiddle.net/ZqJvc/)

这几乎是我在大型项目中所拥有的......在简短的例子中它可以工作：/
但在实际项目中它不起作用。唯一的区别是在实际项目中我有很多复选框。奇怪......我猜它又回到了调试器。谢谢。

**更新**
Chrome 完全崩溃后......我重新启动了浏览器，它就像上面的例子一样工作。抱歉浪费了我们的时间。再次感谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:12:38.057

要在 ALL 复选框更改时将所有具有 .abc 类的复选框设置为 true，请使用

```
$("input[name=ALL]").change( function( ) {

    $(".abc").prop("checked", $(this).prop("checked") );
    $(".abc").trigger("change");
}); 
```

[在这里](http://jsfiddle.net/Xa7QK/)提琴

# sql - 连接表中的列并合并具有相同 ID 的行

> ID：13520504
> 
> 赞同：0
> 
> 时间：2012-11-22T21:57:17.370
> 
> 标签：sql, oracle

我正在处理一个 SQL 查询，我完全迷失在连接中。希望您能提供帮助:)

我的问题是来自单独表的行没有合并到它们都具有相同 ID 的单行中。很长一段时间以来，加入一直让我感到困惑，因此我们将不胜感激。

我有以下表格：

```
Students
id

StudentCredits
sum_credits

StudentMandatoryCredits
branch_credits
program_credits 
```

我正在尝试创建一个查询，它将给我这样的行：

```
id         - sum_credits - branch_credits - program_credits
another_id - sum_credits - branch_credits - program_credits
a_third_id - sum_credits - branch_credits - program_credits 
```

这是我能想到的最好的：

```
id - sum_credits - branch_credits -     [empty]
id - sum_credits -     [empty]    - program_credits 
```

这是我的 SQL 语句：

```
SELECT S.id, SC.sum_credits, SMC.branch_credits, SMC.program_credits
FROM Students S
LEFT JOIN StudentCredits SC ON S.id = SC.id
LEFT JOIN StudentMandatoryCredits SMC ON S.id = SMC.id
ORDER BY id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:00:30.590

尝试使用：

```
SELECT S.id, SUM(SC.sum_credits), SUM(SMC.branch_credits), SUM(SMC.program_credits)
FROM Students S
LEFT JOIN StudentCredits SC ON S.id = SC.id
LEFT JOIN StudentMandatoryCredits SMC ON S.id = SMC.id
GROUP BY S.id
ORDER BY S.id 
```

# objective-c - 我的选择器实际上并没有选择值？

> ID：13520512
> 
> 赞同：2
> 
> 时间：2012-11-22T21:57:51.527
> 
> 标签：objective-c, ios6, xcode4.5, picker

所以我有一个弹出的选择器而不是键盘，但是当您滚动到选择器上的不同点时它不会改变值。我通过让警报显示选择了哪个年龄来测试这一点，并且它永远不会从第一个选项改变。我认为警报已损坏，但选择器中当前选定选项的蓝色选择器轮廓也没有显示。这是选择器和警报的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *array = [[NSArray alloc]        initWithObjects:@"18-29",@"30-39",@"40-49",@"50-59",@"60+",nil];
    self.pickerData = array;
}

-(IBAction)UITextFieldEditingDidBegin
{

    UIPickerView *picker = [[UIPickerView alloc] 
                            initWithFrame:CGRectMake(0, 244, 320, 270)];
    picker.delegate = self;
    picker.dataSource = self;
    [self.view addSubview:picker];
    [picker release];

}

-(IBAction)donePressed
{

NSInteger row = [agePicker selectedRowInComponent:0];
NSString *selected = [pickerData objectAtIndex:row];
NSString *title = [[NSString alloc] initWithFormat:
                   @"You selected %@!", selected];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                                               message : @"Thank you for choosing."
                                               delegate:nil
                                     cancelButtonTitle :@"Okay!"             
                                     otherButtonTitles :nil];
[alert show];
[agePicker resignFirstResponder];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    return [pickerData count];
}

-(NSString *)pickerView:(UIPickerView *)pickerView
        titleForRow:(NSInteger)row
       forComponent:(NSInteger)component 
{
    return[pickerData objectAtIndex:row];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:27:43.523

编辑，以帮助关闭您的选择器，使其成为实例变量，在界面中声明您的选择器，

我的类.h

```
@interface MyClass:UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>{
UIPickerView *picker
} 
```

我的班级.m

```
@interface MyClass()
property (nonatomic, retain) *selectedVal; //make it a NSString
@end

-(IBAction)UITextFieldEditingDidBegin
{

    picker = [[UIPickerView alloc] 
                            initWithFrame:CGRectMake(0, 244, 320, 270)];
    picker.delegate = self;
    picker.dataSource = self;
    [self.view addSubview:picker];
    //[picker release]; //Place your picker release in the dealloc method

} 
```

您必须为选择器实现委托，

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
 self.selectedVal = [pickerData objectAtIndex:row]
NSLog(@"Selected option: %@. ", self.selectedVal );
} 
```

然后在您的完成按钮上，您在属性中选择了 val 以供使用

```
-(IBAction)donePressed
{

NSString *title = [[NSString alloc] initWithFormat:
                   @"You selected %@!", self.selectedVal];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                                               message : @"Thank you for choosing."
                                               delegate:nil
                                     cancelButtonTitle :@"Okay!"             
                                     otherButtonTitles :nil];
[alert show];
[alert release]; //I noticed you release the picker, so not using ARC, so release             alert!!
[picker resignFirstResponder];

 //after done, remove the picker from the view
 [picker removeFromSuperview];

} 
```

# html - 为什么 W3 验证器失败？

> ID：13520513
> 
> 赞同：0
> 
> 时间：2012-11-22T21:57:53.250
> 
> 标签：html, validation, android-browser

当我使用 Chrome、Firefox 或 Opera 时，我在桌面计算机下的网站没有问题，但是当我使用默认的 Android 浏览器（也在 Google 搜索预览中）时，右侧菜单不显示。我检查了 W3 验证器网站，但对于索引页面，它说它无法检查：

[http://volkangezer.scienceontheweb.net/index.php](http://volkangezer.scienceontheweb.net/index.php)

对于另一个页面：

[http://volkangezer.scienceontheweb.net/iletisim.php?dil=en](http://volkangezer.scienceontheweb.net/iletisim.php?dil=en)

它显示了一些错误，但可能它们不是导致此问题的原因。

我的第一个问题是为什么无法检查我的 index.php 页面？两个页面具有完全相同的编码和包含文件。

第二个问题是，为什么右菜单不显示？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:00:36.923

验证器告诉你为什么它不能检查它：

> 抱歉，我无法验证此文档，因为在第 350 行它包含一个或多个我无法解释为 utf-8 的字节（换句话说，找到的字节不是指定字符编码中的有效值）。请检查文件内容和字符编码指示。
> 
> 错误是：utf8 "\xC4" 不映射到 Unicode

换句话说，要么你的文件被搞砸了，要么它使用的字符编码与它声称使用的字符编码不匹配。

有关该主题的更多信息，请参阅[面向初学者的字符编码](http://www.w3.org/International/questions/qa-what-is-encoding.en)及其链接的文档。

# python - 让 Django 服务器在 EC2 实例上运行的正确方法是什么？

> ID：13520514
> 
> 赞同：1
> 
> 时间：2012-11-22T21:57:57.530
> 
> 标签：python, django, amazon-ec2, webserver

我目前正在使用屏幕并做

```
sudo python manage.py runserver 0.0.0.0:80 
```

然后关闭终端。似乎有点像黑客。正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:00:37.277

runserver 是一个开发服务器。您不应该在生产中使用它，如[https://docs.djangoproject.com/en/1.4/ref/django-admin/#runserver-port-or-address-port](https://docs.djangoproject.com/en/1.4/ref/django-admin/#runserver-port-or-address-port)中所述：

> 请勿在生产环境中使用此服务器。它没有经过安全审计或性能测试。（这就是它会一直存在的方式。我们的业务是制作 Web 框架，而不是 Web 服务器，因此改进此服务器以使其能够处理生产环境超出了 Django 的范围。）

您应该使用[https://docs.djangoproject.com/en/1.4/howto/deployment/](https://docs.djangoproject.com/en/1.4/howto/deployment/)中给出的方法之一在生产中部署 Django 项目。我已经将 mod_wsgi 与 Apache 一起使用，gunicorn 与 nginx 一起使用 - 精确的解决方案取决于您和您的项目的要求，但 Django 手册的部署部分包含各种选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:00:56.937

这真的不是一个好主意。不应在本地开发机器之外使用内置的开发服务器。[查看文档：](https://docs.djangoproject.com/en/dev/ref/django-admin/#runserver-port-or-address-port)

> 请勿在生产环境中使用此服务器。它没有经过安全审计或性能测试。（这就是它会一直存在的方式。我们的业务是制作 Web 框架，而不是 Web 服务器，因此改进此服务器以使其能够处理生产环境超出了 Django 的范围。）

相反，您应该设置 nginx+gunicorn/uwsgi 或只是 apache+mod_wsgi。

如果您的 ec2 实例完全无法与外界进行所有可能的通信（这不太可能），您可以使用该`screen`命令

# r - 从数据框中删除行的命令

> ID：13520515
> 
> 赞同：1
> 
> 时间：2012-11-22T21:58:06.337
> 
> 标签：r, dataframe

> **可能重复：**
> [如何删除 R 中的一行](https://stackoverflow.com/questions/7541610/how-to-delete-a-row-in-r)

我无法弄清楚如何从 R 的数据框中简单地删除行 (n)。R 的文档和介绍手册写得非常糟糕，它们对这个非常简单的问题几乎没有帮助。此外，我在这里/在 google 上找到的每一个解释都是为了删除包含字符串或重复项等的行，这些行对我的问题来说过于先进，并导致我引入更多错误而无处可去。我只想删除一行。

在此先感谢您的帮助。

仅供参考，列表位于变量 eld 中，它有 5 列和 33 行。我想删除第 14 行。我使用以下命令初始化 eld

```
eld <- read.table("election2012.txt") 
```

所以我想要的结果是

```
eldNew <- eld(minus row 14) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-22T22:01:09.187

```
eldNew <- eld[-14,] 
```

开始看`?"["`...

> 对于 '['-indexing only: 'i', 'j', '...' 可以是逻辑向量，指示要选择的元素/切片。如有必要，这些向量将被回收以匹配相应的范围。'i', 'j', '...'**也可以是负整数，表示要排除在选择之外的元素/切片**。

（重点补充）

**编辑**：环顾四周，我注意到 [如何删除 R 中数据框的第一行？](https://stackoverflow.com/questions/7541610/how-to-delete-a-row-in-r)，其中有答案...如果您正在寻找关于 SO 的答案，似乎标题应该引起您的注意？

**编辑 2**：我还发现[如何删除数据框中的行？](https://stackoverflow.com/questions/12328056/how-do-i-delete-rows-in-a-data-frame)，搜索`delete row data frame`...

还有[http://rwiki.sciviews.org/doku.php?id=tips:data-frames:remove_rows_data_frame](http://rwiki.sciviews.org/doku.php?id=tips:data-frames:remove_rows_data_frame)

# mysql - 计算块嵌套循环连接的成本

> ID：13520516
> 
> 赞同：7
> 
> 时间：2012-11-22T21:58:13.327
> 
> 标签：mysql, sql, database

我正在尝试根据 NDPR（磁盘页面读取次数）计算（最有效的）块嵌套循环连接的成本。假设您有以下形式的查询：

```
SELECT COUNT(*)
FROM county JOIN mcd
ON count.state_code = mcd.state_code
AND county.fips_code = mcd.fips_code
WHERE county.state_code = @NO 
```

其中@NO 被替换为每次执行查询时的状态代码。

我知道我可以使用以下方法得出 NPDR：`NPDR(R x S) = |Pages(R)| + Pages(R) / B - 2 . |P ages(S)|`

（其中较小的表用作外部以产生更少的页面读取。Ergo：R = 县，S = mcd）。

我也知道页面大小 = 2048 字节

```
Pointer = 8 byte
Num. rows in mcd table = 35298
Num. rows in county table = 3141
Free memory buffer pages B = 100
Pages(X) = (rowsize)(numrows) / pagesize 
```

**我想弄清楚的是“ `WHERE county.state_code = @NO`”如何影响我的成本？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T12:38:12.853

首先对您编写的公式进行一些观察：

*   我不知道你为什么写“B - 2”而不是“B - 1”。从理论的角度来看，您需要一个缓冲区页面来读取关系 S（您可以通过一次读取一页来实现）。

*   确保使用所有括号。我会把公式写成：
    `NPDR(R x S) = |Pages(R)| + |Pages(R)| / (B-2) * |Pages(S)|`

*   公式中的所有数字都需要四舍五入（但这是吹毛求疵）。

*   通用 BNLJ 公式的解释：

    *   您可以从较小的关系 (R) 中读取尽可能多的元组（相当于 B-1 或 B-2 页的元组）。

    *   对于每组 B-2 个页面的元组，您必须读取整个 S 关系 (|Pages(S)|) 以针对关系 R 的特定范围执行连接。

    *   在连接结束时，关系 R 被读取一次，而关系 S 被读取的次数与我们填充内存缓冲区的次数一样多，即`|Pages(R)| / (B-2)`次。

**现在答案：**

*   在您的示例中，选择标准应用于关系 R（在这种情况下为表 Country）。这是`WHERE county.state_code = @NO`查询的一部分。因此，通用公式并不直接适用。

*   从关系 R （即您的示例中的表 Country）读取时，我们可以丢弃所有与选择标准不匹配的非限定元组。假设美国有 50 个州，并且所有州的县数相同，则表 Country 中平均只有 2% 的元组符合条件，需要存储在内存中。这减少了join的内循环的迭代次数（即我们需要扫描relation S/table mcs的次数）。2% 的数字显然只是预期的平均值，并且会根据实际给定的状态而变化。

*   因此，您的问题的公式变为：
    `NPDR(R x S) = |Pages(County)| + |Pages(County)| / (B - 2) * |Counties in state @NO| / |Rows in table County| * |Pages(Mcd)|`

# c# - .Net 上 Web 服务的引用

> ID：13520523
> 
> 赞同：0
> 
> 时间：2012-11-22T21:58:49.380
> 
> 标签：c#, asp.net, wcf, web-services

我想将 WCF 服务引用添加到我的项目中。它给了我错误`"there was an error downloading metadata from the address. Please verify that you entered a valid address"`。

我可以设置`includeExceptionDetailInFaults`为真。在我的服务中`web.config`：

```
<serviceDebug includeExceptionDetailInFaults="true"/> 
```

但这并不能解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:29:51.223

添加到项目的 URL 错误。只需运行 WebService 并从 WebBrowser 复制 url 并添加到参考中。

此错误仅是因为 URL 不匹配，WebService 的 URL 已停止或不存在。

# java - Math.min() 中的后增量运算符有趣的行为

> ID：13520525
> 
> 赞同：0
> 
> 时间：2012-11-22T21:59:00.837
> 
> 标签：java, post-increment

我有一个问题，
In `Java`，`Math.min`绑定是否比`++`?
让我用一个例子来说明，也许有人可以向我解释为什么我会得到我得到的结果。

这是我运行的方法：

```
private static void testIncrement() {
    int x=10;
    System.out.println(x++);
    System.out.println(x);

    x=10;
    System.out.println("-----------");
    System.out.println(++x);
    System.out.println(x);

    x=10;
    System.out.println("-----------\n"+x); //10
    x=Math.min(255, x++); 
    System.out.println(x); **//x=10 WHY NOT x=11?**

    x=10;
    System.out.println("-----------\n"+x);
    x=Math.min(255, ++x);
    System.out.println(x);
} 
```

结果是：

```
10
11
-----------
11
11
-----------
10
10
-----------
10
11 
```

在我放的那一行，我`//x=10 WHY NOT x=11?`
想知道为什么`x`是 10 而不是 11。也许有人可以向我解释一下。

看起来好像`Math.min`创建了`x`它用来做`Math.min`. 然后原件`x`从 10 增加到 11，但仍然是 10 的副本会出来`Math.min`并覆盖增加的 1。

这有意义吗？有没有人解释为什么在这种情况下 x 是 10 而不是 11？

谢谢

PS - 我完全理解[后自增 (i++) 和预自增 (++i) 运算符如何在 Java 中工作？](https://stackoverflow.com/questions/2371118/explain-working-of-post-and-pre-increment-operator-in-java)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:01:11.823

让我们解构这一行：

```
x = Math.min(255, x++); 
```

意思是“记住的`x++`原始值`x`；然后递增`x`；然后表达式的值就是原始值”。所有这些都发生*在*分配之前。所以它相当于：

```
int tmp = x;               // x = 10, tmp = 10
x = x + 1;                 // x = 11, tmp = 10
x = Math.min(255, tmp);    // x = 10 
```

希望这应该说清楚。特别是，这与它本身无关`Math.min`——它只是表现得像一个正常的方法调用。有关详细信息，请参阅[JLS 的第 15.14.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)。

# c++ - 通过交换指针对字符数组进行排序，C++

> ID：13520530
> 
> 赞同：0
> 
> 时间：2012-11-22T21:59:18.410
> 
> 标签：c++, c, arrays, sorting

我正在尝试通过交换指针对 char 指针数组（char * _string）进行排序。

我有这个方法，我想做的是使用我从 _string 获得的值并通过不操作 _string 对它们进行排序，但我也将其交给该方法的空辅助数组（char * _output）。

谁能帮助我并告诉我我做错了什么？

```
void sortAsc(char* _string, char* _output) 
{

    int length = strlen(_string);

        // output and string now point to the same area in the memory
    _output = _string; 

    for( int i = 0; i < length; i++) {
          for( int j = 0; j < length; j++) {
                if( *(_output) > (_output[j] ) ) {

                    // save the pointer
                    char* tmp = _output;

                    // now output points to the smaller value   
                    _output = _output+j; 

                    // move up the pointer to the smaller value
                    _output + j; 

                    // now the pointer of the smaller value points to the higher value
                    _output = tmp; 

                    // move down to where we were + 1
                    _output - j + 1; 

            }
        }
    }

    //_output[length]='\0';

    //delete chars;
 } 
```

在我的主要方法中，我做了这样的事情：

```
char * string = {"bcdae"};
char * output = new char[5];
sortAsc(string, output); 
```

在该代码之后，我希望输出数组包含排序值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:03:30.540

这会将字符串排序到已分配的缓冲区中，如果缓冲区不够大，则会告诉您它必须有多大：

```
std::size_t sortAsc(char const* string, char* dest, std::size_t dest_length) {
  std::size_t str_length = strlen(string);
  char const* str_end = string + str_length;
  if (dest_length < str_length+1)
    return str_length+1;
  std::copy( string, str_end, output );
  output[str_length] = '\0';
  std::sort( output, output+strlen(output) );
  return str_length+1;
} 
```

使用上面的实现，这是糟糕的“分配一个新字符串”模式：

```
char* allocate_and_sortAsc(char const* string) {
  std::size_t str_length = strlen(string);
  char* retval = new char[str_length+1];
  std::size_t count = sortAsc( string, retval, str_length+1);
  ASSERT( count <= str_length );
  return retval;
} 
```

并且不要使用以 开头的变量名`_`，这是一种不好的做法，因为它确实在编译器保留名称附近徘徊。 `_Capital`在任何地方、`_lower`在全球范围内、在任何地方都保留`foo__bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:20:00.993

让我们使用指针表示法对 10 大小的 int 数组进行选择排序，您可以简单地将其更改为数组列表。

```
 *---*---*---*---*---* ........
a[] = | 1 | 2 | 4 | 0 | 3 | ........
      *---*---*---*---*---* ........
        ^--------We start here looking for the smaller numbers and sort the array.

for( i = 0; i < 10; i++ ){
    k = i;
    bypass = *( a + i );
    for( j = i + 1; j < 10; j++ ){

        /* To get Increasing order. */
        if( bypass > *( a + j ) ){
           bypass = *( a + j );
           k = j;
        }
    }
    if ( k != i ){
         *( a + k ) = *( a + i );
         *( a + i ) = bypass;
    }
} 
```

# iphone - 标签位置未正确返回

> ID：13520531
> 
> 赞同：0
> 
> 时间：2012-11-22T21:59:24.840
> 
> 标签：iphone, objective-c, ios, ios5

我正在尝试确定标签的位置，以便在下面放置其他标签。

当我尝试在特定标签上输出数据时，我会`0.000`在日志中得到输出。

知道为什么会这样吗？

```
 ...
    postTextLabel.text  = postText;
    postTextLabel.frame = CGRectMake(postTextLabel.frame.origin.x,
                                     postThumbView.frame.origin.y + postThumbView.frame.size.height,
                                     postTextLabel.frame.size.width,
                                     postTextLabel.frame.size.height);
    [postTextLabel resizeToFit];

    postAuthorNameLabel.text = postAuthorName;
    postTimestampLabel.text  = postTimestamp;

    NSLog(@"%f", postTimestampLabel.frame.origin.y); 
```

# scala - 在 IntelliJ IDEA 中为 scala 项目附加源

> ID：13520532
> 
> 赞同：13
> 
> 时间：2012-11-22T21:59:26.347
> 
> 标签：scala, intellij-idea, playframework-2.0

我有 Scala 的 Playframework 2 项目（非常小的一个）。它使用[Scala Anorm](https://github.com/playframework/Play20/wiki/ScalaAnorm)库。

我有这样的代码：

```
package models
..
import anorm.SqlParser._
...

val rowParser = scalar[Long] 
```

所以，我想看看**标量**方法的来源。试图附加我在我的 plaframework 源文件夹中的源，但 IDEA 只是吞下了我的请求并且什么都不做。

我使用最新版本的 IDEA 和 Scala 插件。大概是bug吧？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-09T08:40:14.320

**首先下载源代码：**

1.) 点击此链接：[http ://www.scala-lang.org/download/all.html](http://www.scala-lang.org/download/all.html)

2.) 选择任何 scala 版本。

3.) 现在在最后一部分“其他资源”中，您可以看到“来源”链接。点击它进行下载。就我而言（[https://codeload.github.com/scala/scala/tar.gz/v2.11.7](https://codeload.github.com/scala/scala/tar.gz/v2.11.7)）

![在此处输入图像描述](../Images/2e84d6d02d9cdd919b61de6523a841be.png)

**现在从 IntelliJ 指向这个源代码。**

1.) 在 IntelliJ 中打开项目结构。快捷方式（Cmd + 向下箭头）

2.) 从左侧选择全局库。

3.) 然后在右侧，在“Scala 库”部分下。单击“+”并指向源目录。请参阅屏幕截图。

![在此处输入图像描述](../Images/0d7eb75051e774fdf1522e68f371da68.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-22T22:30:34.787

啊哈。。修好了。

所以：我曾经在窗口编辑器顶部使用“附加源” - 它不起作用（我猜这是一个错误 - 可能与 scala 插件有关，因为通常它可以工作）。

但是，如果尝试将源附加到特定库 - 在“项目结构 -> 库 -> +附加文件或目录 -> 源”中，那么它可以工作。

谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T09:52:31.027

要修复它，我们需要对 IntelliJ IDEA 平台进行一些更改。很可能它将在 IntelliJ IDEA 13.1 中修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T08:06:12.027

我也有同样的问题。我安装了“Scala Imports Organizer”，问题就解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-07T16:02:40.153

对于使用 Bloop 和 BSP 时的“自动附加源 jars”，您可以添加一行：

```
bloopExportJarClassifiers in Global := Some(Set("sources")) 
```

到你的`build.sbt`，也`sbt updateClassifiers`，也`Reload all BSP Projects`刷新，也`Invalidate Caches/Restart`触发索引（如果没有自动完成）

[参考](https://scalacenter.github.io/bloop/docs/build-tools/sbt#download-dependencies-sources)

# css - css选择xml值并打印

> ID：13520543
> 
> 赞同：0
> 
> 时间：2012-11-22T22:00:33.427
> 
> 标签：css, xml

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/css" href="tibu.css"?>

<THREADS>
<thread address="0011">
<sms msgBox="inbox" date="2012-10-30T06:49:36.529Z" locked="false" seen="true" read="true" serviceCenter="121212" address="0011" encoding="plain">aaaa</sms>
</thread>
<thread address="0123">
<sms msgBox="inbox" date="2012-10-30T06:49:36.529Z" locked="false" seen="true" read="true" serviceCenter="121212" address="0123" encoding="plain">Bugbug</sms>
</thread>
</THREADS> 
```

是否可以选择`date`值然后打印？
如果“是”我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:11:54.890

我不认为 CSS 可以做到这一点，或者如果可以，它也不是完成这项工作的最佳工具

看看 XSL 转换

XSLT 用于将 XML 文档转换为另一个 XML 文档，或浏览器可识别的另一种类型的文档，如 HTML 和 XHTML。通常，XSLT 通过将每个 XML 元素转换为 (X)HTML 元素来做到这一点。

非常好的资源和教程

[http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

# android - Android ICS HTTP POST

> ID：13520549
> 
> 赞同：2
> 
> 时间：2012-11-22T22:00:52.580
> 
> 标签：android, http-post, android-3.0-honeycomb, ice

我知道这个问题已经被问过很多次了。我也搜索了论坛，但无法找到我正在寻找的答案。

该代码适用于许多 android 版本，但不适用于 3.0 或更高版本。字符串 response_from_server = null;

```
 // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(file_n_folder.URL_POST);

    //Log.d("URL",file_n_folder.URL_POST);

    try {

        JSONArray postjson = new JSONArray();
        postjson.put(obj);

        // Post the data:
        httppost.setHeader("json",obj.toString());
        httppost.getParams().setParameter("jsonpost",postjson);

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        // for JSON:
        if(response != null){

            InputStream is = response.getEntity().getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            response_from_server = sb.toString();

            //Log.d("RESPONSE FROM SERVER",response_from_server);

            return response_from_server;
        }

    }catch (ClientProtocolException e){
        Log.d("EXCEPTION line 94",e.getMessage());
    }catch (IOException e){
        Log.d("EXCEPTION line 96",e.getMessage());
    }
    return response_from_server; 
```

它总是在 httpclient.execute(httppost) 上使应用程序崩溃；

你们能建议我，什么或如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:17:41.753

这是因为自从 Honeycomb 以来，您有义务在 UI 线程之外进行网络连接。将您的网络移动到 IntentService 或 AsyncTask

见这篇文章：[http ://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# sql-server-2005 - 如何在 Windows 8 中安装 SQL Server 2005 Express

> ID：13520551
> 
> 赞同：13
> 
> 时间：2012-11-22T22:00:55.430
> 
> 标签：sql-server-2005, sql-server-2005-express

我试图在 Windows 8 上安装 SQL Server 2005 Express SP3 x64，但安装程序给了我一个错误：

> 找不到产品 Microsoft SQL Server Native Client 的安装包。使用安装包“sqlncli_x64.msi”的有效副本再次尝试安装

![在此处输入图像描述](../Images/0d871c4910988b9b85382e7846acaf4e.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T21:01:43.710

我有同样的问题。但我还必须执行额外的步骤。这就是我所做的。

执行以下步骤（仅 64 位版本的 SQL Server 2005 Developer Edition 在 Windows 8 Pro 64 位上测试）

1.  从 SP3 或 SP4 中提取 sqlncli.msi / sqlncli_x64.msi。我是从 SP4 开始的
2.  安装 sqlncli
3.  启动 SQL Server 2005 安装程序
4.  在安装过程中，我收到一个错误 SQL Server 服务无法启动。有关详细信息，请参阅 SQL Server 联机丛书主题“如何：查看 SQL Server 2005 安装日志文件”和“手动启动 SQL Server”。
5.  暂时不要点击取消。从 SQL Server 2005 SP3 或 SP4 的安装中复制 SQLSERVR.EXE 和 SQLOS.DLL 文件并将它们放在 SQL 安装文件夹中。
6.  点击重试

对于上面的第 5 步：虽然我没有尝试查看 SQLSERVR.EXE 和 SQLOS.DLL 的 SP4/SP3 设置，但如果您没有现有的 SQL Server 2005 SP3/SP4 安装，那么可以尝试查看 SP3/ SP4 EXE（压缩文件）。我不确定这是否有帮助。在任何情况下，您都可以创建一个 VM 并安装带有 SP3/Sp4 的 SQL Server 2005 以复制适用于 Windows 8 的文件

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-15T06:08:38.307

我在 Windows 8 上加载 SQL Server 2005 Express 时有不同的体验。我使用的是已经应用了 SP4 的安装程序，所以也许这可以解释差异。我收到的第一个错误是安装程序尝试启动 SQL VSS 编写器时。我只是告诉它忽略它并继续。然后，我遇到了与 Sohail 相同的错误，即 SQL Server 服务无法启动。由于我已经在使用 SQLServr.exe 和 SQLOS.dll 的 SP4 版本，因此遵循 Sohail 的其余方法毫无意义。相反，我只是取消安装重新启动机器并再次运行安装。第二次一切正常。

我发现 Sohail 的技术非常宝贵的地方是当我需要在 Windows Server 2012 上安装 SQL Server 2005 Standard 时。我们有一些新的服务器希望与 Windows 2012 一起推出，但我们认为不需要升级 SQL Server因为 2005 版本具有我们需要的所有功能，并且在这些机器上许可 SQL 2012 的成本将是 5 位数。

最后，我通过添加步骤来恢复 SQLServr.exe 和 SQLOS.dll 文件，稍微调整了 Sohail 的技术，这样我就可以完全应用 SP4。以下是我从零开始安装 Windows Server 2012 Standard 所采取的所有步骤。我希望这可以帮助其他希望在此操作系统上完全更新安装 SQL Server 2005 x64 的人。

1.  使用 Server Manger 添加角色和功能向导来满足 SQL 的所有先决条件：
    *   选择 Web 服务器 (IIS) 角色
    *   添加以下额外的 Web 服务器角色服务（请注意，其中一些会自动拉入其他的，只需接受并继续）：
        *   HTTP 重定向
        *   Windows 身份验证
        *   ASP.NET 3.5（请注意，您需要告诉向导查看 Windows 2012 安装介质的 \Sources\SxS 文件夹才能正确安装；只需单击“指定备用源路径”链接，然后单击安装）
        *   IIS 6 元数据库兼容性
        *   IIS 6 WMI 兼容性
2.  启动 SQL Server 2005 安装，忽略任何兼容性警告
    *   如果 SQL Server 服务在安装过程中无法启动，请保持对话框并执行以下操作：
        *   从 C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Binn 备份 SQLServr.exe 和 SQLOS.dll
        *   从已应用 SP4 的 SQL Server 2005 工作副本中替换这两个文件
        *   返回设置，点击重试，设置现在将运行完成。
        *   停止 SQL 服务并恢复 SQLServr.exe 和 SQLOS.dll 的原始版本（否则 SP4 认为下一步不需要它）
3.  安装 SQL Server 2005 SP4
4.  安装[SQL Server 2005 SP4 Cumulative Hotfix 5069](http://www.microsoft.com/en-us/download/details.aspx?id=34848)（Windows Update 出于某种原因没有提供此功能，因此我必须手动下载和安装）
5.  如果您想要最新的文档，请安装[最新版本的 SQL Server 2005 联机丛书](http://www.microsoft.com/en-us/download/details.aspx?id=4152)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-22T22:00:55.430

微软说 SQL Server 2005 它与 Windows 8 不兼容，但我运行它没有问题（仅使用 SP3），除了安装。

运行安装文件后，`SQLExpr.exe`查找最近在 C 驱动器中创建的隐藏文件夹。将内容复制到另一个文件夹并取消安装程序（或使用 WinRar 打开文件并将内容提取到临时文件夹）

之后，`sqlncli_x64.msi`在 setup 文件夹中找到该文件，然后运行它。

现在您已准备好运行`setup.exe`文件并安装 SQL Server 2005 而不会出现错误

![在此处输入图像描述](../Images/a33cfcbb882a5c6c9a68388e80b94b93.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T01:08:04.380

我发现在已安装 SQL 2014 实例的 Windows 8.1 上，如果我运行 SQLEXPR.EXE 然后关闭 Windows“警告这可能不兼容”对话框，则安装程序成功完成。

我怀疑已经安装了 2014 位可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-12T15:15:42.463

**“直接”安装“SQL Express 2005 service pack 4”版本。**

它**里面包含 sql Express 2005**。不要让名字欺骗你

运行成功。根据我的经验

[![在此处输入图像描述](../Images/8069c9865147b11ceea85d79a00b06ce.png)](https://i.stack.imgur.com/8NipT.jpg)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-13T15:53:31.900

****Windows Server 2012 R2**上的**Microsoft SQL Server 2005 Express Edition Service Pack 4****

 ****这些步骤基于[https://stackoverflow.com/users/2385/eduardo-molteni中的先前方法](https://stackoverflow.com/users/2385/eduardo-molteni)

1.  下载 SQLEXPR.EXE
2.  运行 SQLEXPR.EXE
3.  将 c:\generated_installation_dir 复制到 inst.bak
4.  退出安装
5.  运行 inst.bak/setuip/sqlncli_x64.msi
6.  运行 SQLEXPR.EXE
7.  请享用！

这适用于 Microsoft SQL Server 2005 Express Edition Service Pack 4 [http://www.microsoft.com/en-us/download/details.aspx?id=184](http://www.microsoft.com/en-us/download/details.aspx?id=184)****

# php - 我怎么写这个正则表达式？贪心相关

> ID：13520561
> 
> 赞同：3
> 
> 时间：2012-11-22T22:01:41.523
> 
> 标签：php, regex, pcre

我很抱歉标题不好，但这是一个非常笼统的问题

我必须匹配这个模式

```
;AAAAAAA(BBBBBB,CCCCC,DDDDDD) 
```

*   AAAAA = 所有以“;”开头的字符 到“（”（两者;（不包括在内）
*   BBBBB = 从 "(" 到 "," 开始的所有字符（都 (, 不包括在内)
*   CCCCC = 从“，”到“，”的所有字符（都，，不包括在内）
*   DDDDD = 从 "," 到 ")" 开始的所有字符（不包括 ,)）

“x 和 y 之间的所有字符”是一个每次都让我丧命的问题

:(

我正在使用 PHP，我必须匹配所有出现的这种模式（preg_match_all），遗憾的是，它也可以在多行上

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:05:26.533

我建议您不要使用不贪婪的量词，而是使所有重复与其分隔符互斥。这是什么意思？例如，这意味着`A`可以是除 之外的任何字符`(`。给出这个正则表达式：

```
;([^(]*)[(]([^,]*),([^,]*),([^)]*)[)] 
```

最后一个`[)]`甚至没有必要。

PHP 代码将如下所示：

```
preg_match_all('/;([^(]*)[(]([^,]*),([^,]*),([^)]*)[)]/', $input, $matches);
$fullMatches = $matches[0];
$arrayOfAs = $matches[1];
$arrayOfBs = $matches[2];
$arrayOfCs = $matches[3];
$arrayOfDs = $matches[4]; 
```

正如评论所显示的，我的逃跑技巧是一个品味问题。这个正则表达式当然等于：

```
;([^(]*)\(([^,]*),([^,]*),([^)]*)\) 
```

但我认为这看起来比其他变体更不匹配/不平衡。任你挑！

最后，对于为什么这种方法比使用不贪婪（惰性）量词更好的问题。[这是一些很好的一般性阅读。](http://www.regular-expressions.info/repeat.html)基本上，当您使用不贪婪的量词时，引擎仍然必须回溯。它首先尝试一次重复，然后注意到`(`之后不匹配。所以它必须回到重复并消耗另一个角色。但是`(`仍然不匹配，所以再次回到重复。但是，使用这种方法，引擎将在第一次进入重复时尽可能多地消耗。并且当所有非`(`字符都被消耗掉时，引擎将能够立即匹配以下内容`(`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:12:56.707

你可以使用类似这样的代码：

```
preg_match_all('/;(.*?)\((.*?),(.*?),(.*?)\)/s',$text,$matches); 
```

在[ideone.com](http://ideone.com/XCQN0D)上查看。

基本上，您可以使用`.*?`（问号不贪心），确保转义括号，并且您可能需要`s`修饰符使其在多行上工作。

变量将在一个数组中：`$matches`

# visual-studio-2005 - SCons - 'rc' 不是内部或外部命令、可运行程序或批处理文件

> ID：13520563
> 
> 赞同：0
> 
> 时间：2012-11-22T22:01:59.663
> 
> 标签：visual-studio-2005, scons, visual-studio-express, rc, tidesdk

我已根据[https://github.com/TideSDK/TideSDK/wiki/Windows7-x86-2005上的说明设置了所有内容](https://github.com/TideSDK/TideSDK/wiki/Windows7-x86-2005)

但是，scons 不会从 PATH 中获取“rc”：

```
> scons -s debug=1 sdkinstaller run=1
...
runs fine for a while, until:
...
cl : Command line warning D9035 : option 'Wp64' has been deprecated and will be
removed in a future release
cl : Command line warning D9035 : option 'Wp64' has been deprecated and will be
removed in a future release
boot_win32.cpp
'rc' is not recognized as an internal or external command,
operable program or batch file.
scons: *** [build\win32\objs\boot\support\winboot.res] Error 1

> rc
fatal error RC1107: invalid usage; use RC /? for Help

> echo %path%
C:\Program Files\Microsoft Visual Studio 8\Common7\IDE;C:\Program Files\Microsof
t Visual Studio 8\VC\BIN;C:\Program Files\Microsoft Visual Studio 8\Common7\Tool
s;C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\bin;C:\WINXP\Microsoft.NET
\Framework\v2.0.50727;C:\Program Files\Microsoft Visual Studio 8\VC\VCPackages;C
:\Program Files\ImageMagick-6.8.0-Q16;C:\WINXP\system32;C:\WINXP;C:\WINXP\System
32\Wbem;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\Git\cmd;C:\Program
 Files\Git\bin;C:\Python25\Scripts;C:\Python25 
```

谷歌搜索这个问题提出了将 VC bin 目录添加到 PATH 的解决方案，但正如您所看到的，这已经到位。

注意：我也安装并使用了 scons 2.2.0，但它甚至无法识别“cl”。至少对于 scons 1.2.0 它可以识别“cl”，但不幸的是不是“rc”

第一次在 Windows 上构建，任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:52:54.710

虚拟机便宜且易于访问。我会推荐一个没有被多个 SDK 版本污染的干净的构建环境。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-10T08:08:36.377

可能对其他人有帮助，但 Visual Studio 有它自己的 CMD，它将设置这些路径。只需打开相应的 Visual Studio CMD 并从那里编译。

# vb.net - Linq DataContext 仍然检索“已删除”对象

> ID：13520568
> 
> 赞同：0
> 
> 时间：2012-11-22T22:02:30.820
> 
> 标签：vb.net, linq, linq-to-sql, datacontext

我正在使用绑定到 Linq 数据“对象列表”的网格。

网格以“断开连接的方式”运行，这意味着当我编辑或取消一行时，更改不会立即提交到数据库。在进行所有更改后单击一个单独的“保存”按钮以调用 DataContext.SubmitChanges 方法。

问题是当我删除网格中的一条线时，deleteonsubmit 方法很好调用，但是当我重新绑定网格后，这条线仍然在这里！

我需要像 Datatables 这样的行为，当数据表绑定到网格时，不显示处于 Deleted 状态的行。这可能吗 ？

## 附录

代码不多，因为 GridView 使用它的自动行为（AutoGenerateColumns、AutoGenerateEditButton 等）

这是我用来删除对象的代码

```
<DataObjectMethod(DataObjectMethodType.Delete)> _
Public Sub Supprimer(ByVal code As Integer)
    Dim ctx = getDataContext()

    Dim leGerant = (From g In ctx.Gerant Where g.CODE = code).FirstOrDefault
    ctx.Gerant.DeleteOnSubmit(leGerant)

    End Sub 
```

这是我用来选择对象的代码

```
 <DataObjectMethod(DataObjectMethodType.Select)> _
    Public Function Selectionner()
        Dim ctx = getDataContext()

        Return From g In ctx.Gerant
    End Function 
```

@马格纳斯

你没有理解我的问题。单击保存按钮时，我确实调用了 SubmitChanges，并且更改效果很好。问题不在这里。

问题是当我删除网格中的一条线时，deleteonsubmit 方法很好调用，但是当我重新绑定网格后，这条线仍然在这里！通常，即使我尚未将更改提交到数据库，已删除的对象也不应该在 GridView 中显示为一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:47:27.993

`DeleteOnSubmit`不会“删除”该项目。它会将其标记为在下次提交时将其删除。

您需要添加提交行，使其变为：

```
Dim ctx = getDataContext()
Dim leGerant = (From g In ctx.Gerant Where g.CODE = code).FirstOrDefault    
ctx.Gerant.DeleteOnSubmit(leGerant)
ctx.SubmitChanges() 
```

**编辑：**假设 ctx 在您的两个通话中是相同的实例，您可以尝试

```
<DataObjectMethod(DataObjectMethodType.Select)> _
Public Function Selectionner()
    Dim ctx = getDataContext()

    Dim deleted = ctx.ObjectStateManager
        .GetObjectStateEntries(System.Data.EntityState.Deleted).OfType<Gerant>();

    Return (From g In ctx.Gerant).Except(deleted);
End Function 
```

这是未经测试的，所以我不确定它是否会工作，但它似乎可以编译。

# java - java中的foreach循环用于自定义对象列表

> ID：13520571
> 
> 赞同：8
> 
> 时间：2012-11-22T22:02:48.547
> 
> 标签：java, foreach, arraylist

我有一个 Room 类型的 ArrayList（我的自定义对象）定义如下

```
ArrayList<Room> rooms = new ArrayList<Room>(); 
```

然后将一系列对象添加到 ArrayList 之后，我想遍历它们并检查各种内容。我不是 java 的热心用户，但我知道在许多其他编程语言中，foreach 循环将是最简单的方法。

经过一番研究，我发现了以下链接，它建议了下面的代码。 [Java 'for each' 循环是如何工作的？](https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work)

```
for(Iterator<String> i = someList.iterator(); i.hasNext(); ) {
  String item = i.next();
  System.out.println(item);
} 
```

但据我所知，这不能用于自定义对象的 Arraylist。

可以，如果可以，如何为自定义对象的 ArrayList 实现 foreach 循环？或者我该如何处理每个项目？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-22T22:04:28.070

实际上[增强的 for 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)应该是这样的

```
for (final Room room : rooms) {
          // Here your room is available
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-01T19:51:57.677

使用也可以使用 Java 8 流 API 并在一行中执行相同的操作。

如果要打印任何特定属性，请使用以下语法：

```
ArrayList<Room> rooms = new ArrayList<>();
rooms.forEach(room -> System.out.println(room.getName())); 
```

或者

```
ArrayList<Room> rooms = new ArrayList<>();
rooms.forEach(room -> {
    // here room is available
}); 
```

如果要打印 Java 对象的所有属性，请使用：

```
ArrayList<Room> rooms = new ArrayList<>();
rooms.forEach(System.out::println); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T22:07:41.757

```
for(Room room : rooms) {
  //room contains an element of rooms
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T22:06:35.690

您可以通过更改类的参数化来使用迭代器模式修复您的示例：

```
List<Room> rooms = new ArrayList<Room>();
rooms.add(room1);
rooms.add(room2);
for(Iterator<Room> i = rooms.iterator(); i.hasNext(); ) {
  String item = i.next();
  System.out.println(item);
} 
```

或更简单的方法：

```
List<Room> rooms = new ArrayList<Room>();
rooms.add(room1);
rooms.add(room2);
for(Room room : rooms) {
  System.out.println(room);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-06T11:15:42.163

如果这段代码没有对列表中的每一项进行操作，那一定是因为在你完成列表之前有什么东西抛出了异常；最可能的候选方法是称为“insertOrThrow”的方法。您可以将该调用包装在一个 try-catch 结构中，以处理任何失败的项目的异常，而不会过早退出循环和方法。

# latex - 乳胶翻转人物

> ID：13520572
> 
> 赞同：2
> 
> 时间：2012-11-22T22:02:57.550
> 
> 标签：latex, subfigure

如何围绕水平轴翻转 LaTeX 文件中的图形？这些数字位于子图中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T22:46:00.683

这是解决方案：

添加到序言

```
\usepackage{graphics} 
```

然后下面的伎俩。

```
\scalebox{1}[-1]{ \includegraphics[width=0.50\columnwidth] {test.eps} } 
```

# python - SSH 隧道中的 SCP 文件，使用 Fabric

> ID：13520573
> 
> 赞同：1
> 
> 时间：2012-11-22T22:03:09.743
> 
> 标签：python, ssh, fabric

我已经用 Fabric 编写了一些发布脚本，但现在任务超出了我的能力范围。

我需要使用经过 B 的 ssh 隧道将 tar 球从 A 转移到 C。

我可以通过 SSH 手动测试连接，看看 A 是否看到 B，B 是否看到 C，一切都很好。

我已经尝试过这个 2 链接上的东西：

[https://gist.github.com/856179](https://gist.github.com/856179)

[https://gist.github.com/2760477](https://gist.github.com/2760477)

但在一种情况下，我从来没有被提示输入密码，所以它超时了，另一个提示输入密码，但是当我尝试像“uname”这样的基本命令时超时。

有没有人已经面临过这样的事情？或者有线索/提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:50:31.177

一种方法可能是将文件临时推送到 B，然后将脚本发送到 B，将其推送到 C？

# android - Android 4.0+ 与嵌入式设备的蓝牙连接错误：“权限被拒绝”

> ID：13520575
> 
> 赞同：1
> 
> 时间：2012-11-22T22:03:14.760
> 
> 标签：android, bluetooth, embedded

我有以下设置：

Android 设备使用“客户端”套接字连接到远程嵌入式设备，Android 应用程序使用以下代码片段连接到嵌入式设备。

在嵌入式设备上使用MindTree BT堆栈，其中服务器串行套接字是根据Android应用程序熟悉的设备中的一些属性准备的，嵌入式设备上定义的连接是不安全的！

两种应用程序的组合适用于：

*   **2 款 LG 手机**不同型号（版本代码 < 10**使用“普通方法”**）
*   **2 HTC 的**不同型号（版本代码<10**使用“解决方法”**）
*   Pantech 平板电脑（版本代码 < 13**使用“解决方法”**）

今天，我在三星 S3、摩托罗拉 MB886 和 Nexus 7 上尝试了该应用程序...调用**socket.connect()**时都导致“权限被拒绝” ...（我在清单中有适当的权限，否则它将无法在其他设备上运行。）

我测试过的所有新设备都是版本代码> 4.0，所以我想知道：

有人知道 API 的任何变化吗？也许 Android 4.0+ 会强制安全？

似乎错误发生在绑定状态，因为我可以在嵌入式程序日志中看到......

有什么见解吗？

编码：

```
public final synchronized int connectToDevice(int connectingMethod)
        throws BluetoohConnectionException {
    if (socket != null)
        throw new BadImplementationException("Error socket is not null!!");
    connecting = true;
    logInfo("+---+ Connecting to device...");

    try {
        lastException = null;
        lastPacket = null;
        if (connectingMethod == BluetoothModule.BT_StandardConnection
                || connectingMethod == BluetoothModule.BT_ConnectionTBD)
            try {

                socket = fetchBT_Socket_Normal();
                connectToSocket(socket);
                listenForIncomingSPP_Packets();
                onConnetionEstablished();
                return BluetoothModule.BT_StandardConnection;
            } catch (BluetoohConnectionException e) {
                socket = null;
                if (connectingMethod == BluetoothModule.BT_StandardConnection) {
                    throw e;
                }
                logWarning("Error creating socket!", e);
            }
        if (connectingMethod == BluetoothModule.BT_ReflectiveConnection
                || connectingMethod == BluetoothModule.BT_ConnectionTBD)
            try {
                socket = fetchBT_Socket_Reflection(1);
                connectToSocket(socket);
                listenForIncomingSPP_Packets();
                onConnetionEstablished();
                return BluetoothModule.BT_ReflectiveConnection;
            } catch (BluetoohConnectionException e) {
                socket = null;
                if (connectingMethod == BluetoothModule.BT_ReflectiveConnection) {
                    throw e;
                }
                logWarning("Error creating socket!", e);
            }
        throw new BluetoohConnectionException("Error creating RFcomm socket for BT Device:" + this
                + "\n BAD connectingMethod==" + connectingMethod);
    } finally {
        connecting = false;
    }
}

protected void onConnetionEstablished() {
    logInfo("+---+ Connection established");
}

private synchronized void listenForIncomingSPP_Packets() {
    if (socketListeningThread != null)
        throw new BadImplementationException("Already lisening on Socket for BT Device" + this);
    logInfo("+---+ Listening for incoming packets");
    socketListeningThread = new Thread(socketListener, "Packet Listener - " + bluetoothDevice.getName());
    socketListeningThread.start();
}

private BluetoothSocket fetchBT_Socket_Normal()
        throws BluetoohConnectionException {
    try {
        logInfo("+---+ Fetching BT RFcomm Socket standard for UUID: " + uuid + "...");
        return bluetoothDevice.createRfcommSocketToServiceRecord(UUID.fromString(uuid));
    } catch (Exception e) {
        throw new BluetoohConnectionException("Error Fetching BT RFcomm Socket!", e);
    }
}

private BluetoothSocket fetchBT_Socket_Reflection(int connectionIndex)
        throws BluetoohConnectionException {
    Method m;
    try {
        logInfo("+---+ Fetching BT RFcomm Socket workaround index " + connectionIndex + "...");
        m = bluetoothDevice.getClass().getMethod("createRfcommSocket", new Class[]{int.class});
        return (BluetoothSocket) m.invoke(bluetoothDevice, connectionIndex);
    } catch (Exception e) {
        throw new BluetoohConnectionException("Error Fetching BT RFcomm Socket!", e);
    }
}

private void connectToSocket(BluetoothSocket socket)
        throws BluetoohConnectionException {
    try {
        logInfo("+---+ Connecting to socket...");
        socket.connect();
        logInfo("+---+ Connected to socket");
    } catch (IOException e) {
        try {
            socket.close();
        } catch (IOException e1) {
            logError("Error while closing socket", e1);
        } finally {
            socket = null;
        }
        throw new BluetoohConnectionException("Error connecting to socket with Device" + this, e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:37:51.063

经过很长一段时间的调查，我发现了错误的一个原因......在某些 Android 设备上，自动蓝牙对等连接未被启用/允许。

所以，显然除了两种连接方法外，还有两种蓝牙适配器启用方法，一种是抛出一个意图要求系统打开适配器，另一种是调用 BluetoothAdapter.enable() 方法，以静默方式启用蓝牙。

第一种方法，弹出确认对话框，需要用户交互，另一种则不需要，在没有显示蓝牙启用确认对话框的同时，也没有显示对等确认，导致连接错误。

使用第一个适配器启用方法可以解决大多数设备上的问题，例如 Nexus 7、Samsung S3 和其他一些设备，但在某些设备上仍然存在问题，我不太确定为什么，但这是好多了，因为许多设备现在都在使用新的实现。

# java - 如果输入为“y”，则重复循环

> ID：13520582
> 
> 赞同：0
> 
> 时间：2012-11-22T22:03:42.107
> 
> 标签：java, loops

```
import java.util.Scanner;
import java.util.Random;
public class DrawTriangle
{
public static void main(String[] args)
{
    Scanner scan = new Scanner(System.in);
    System.out.println ("Do you want to see a triangle? Insert y to continue");
    String input = scan.next();
    boolean cont = false;

    if ((input.equals("y")))
    {
        cont = true;
        double a = (40);
        double b = (30);
        double height = (Math.random() * (b - a + 1) + a);
        for (int x = 1; x <= height; x++)
        {
            for (int y = 0; y < height - x; y++) 
            {
                System.out.print(" ");
            }
            for (int y = 0; y < x; y++) 
            {
                System.out.print("x ");
            }
            System.out.println();

        }

    }
    else 
    {
        cont = false;
        System.out.println();
        System.out.println ("Program ended");
    }

}
} 
```

当用户输入“y”时，我需要程序绘制一个三角形。这可行，但是如果用户之前按了“y”，我需要程序然后要求用户再次输入输入。另外我不确定我的随机数是否有效，因为每次三角形的大小都相同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:10:04.670

将if语句改为while，在循环中再次询问用户输入，去掉else

```
while ((input.equals("y")))
{
    cont = true;
    double a = (40);
    double b = (30);
    double height = (Math.random() * (b - a + 1) + a);
    for (int x = 1; x <= height; x++)
    {
        for (int y = 0; y < height - x; y++) 
        {
            System.out.print(" ");
        }
        for (int y = 0; y < x; y++) 
        {
            System.out.print("x ");
        }
        System.out.println();

    }
    System.out.println ("Do you want to see a triangle? Insert y to continue");
    input = scan.next();

}

    System.out.println();
    System.out.println ("Program ended"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:16:10.957

您只需要将 if 语句交换为循环，如下所示：

```
import java.util.Scanner;
import java.util.Random;
public class DrawTriangle
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        boolean cont = false;
        String input = "y";
        while (input.equals("y"))
            {
                System.out.println ("Do you want to see a triangle? Insert y to continue");
                input = scan.next();
                cont = true;
                double a = (40);
                double b = (30);
                double height = (Math.random() * (b - a + 1) + a);
                for (int x = 1; x <= height; x++)
                    {
                        for (int y = 0; y < height - x; y++) 
                            {
                                System.out.print(" ");
                            }
                        for (int y = 0; y < x; y++) 
                            {
                                System.out.print("x ");
                            }
                        System.out.println();

                    }

            }
                        cont = false;
                System.out.println();
                System.out.println ("Program ended");

    }
} 
```

# iphone - Json在objective-c中序列化数组

> ID：13520584
> 
> 赞同：0
> 
> 时间：2012-11-22T22:04:22.457
> 
> 标签：iphone, objective-c, xcode, json, cocoa

我想将数组序列化为 JSON。这是我的 JSON -

```
{
  "User":{"Id":"1222","Email":"asdad@adasd.com"},
  "Person":{"Name":"John","Surname":"Smith"}
} 
```

值 1222、asdad@adasd.com、John、Smith 是示例。此值将在控制器中定义。

我不知道如何在 JSON 中处理序列化这个数组。我需要将对象 - 用户和人员发送到具有不同值的服务器，具体取决于用户。这是我的模型。两者都是数组。

这是我的代码

标题

```
 #import <Foundation/Foundation.h>
 #import "BaseRequest.h"

 @interface SaveUserProfileRequest : BaseRequest {

NSMutableArray *_user;
NSMutableArray *_person;
NSMutableArray *_address;
NSString *_userId;
NSString *_userEmail;
NSString *_userName;
NSString *_userSurname;

}

- (id)initWithUser:(NSMutableArray*)user andPerson:(NSMutableArray*)person andAddress:(NSMutableArray*)address andUserId:(NSString*)userId andUserEmail:(NSString*)userEmail andUserName:(NSString*)userName andUserSurname:(NSString*)userSurname;

@property (nonatomic, strong) NSMutableArray* user;
@property (nonatomic, strong) NSMutableArray* person;
@property (nonatomic, strong) NSMutableArray* address;
@property (nonatomic, strong) NSString* userId;
@property (nonatomic, strong) NSString* userEmail;
@property (nonatomic, strong) NSString* userName;
@property (nonatomic, strong) NSString* userSurname;

@end 
```

执行

```
#import "SaveUserProfileRequest.h"
#import "SaveUserProfileResponse.h"
#import "OrderedDictionary.h"
#import "BaseData.h"

@implementation SaveUserProfileRequest

@synthesize user=_user, person=_person, address=_address, userId=_userId, userEmail=_userEmail, userName=_userName, userSurname=_userSurname;

- (id)initWithUser:(NSMutableArray*)user andPerson:(NSMutableArray*)person andAddress:(NSMutableArray*)address andUserId:(NSString*)userId andUserEmail:(NSString*)userEmail andUserName:(NSString*)userName andUserSurname:(NSString*)userSurname; {
self = [super init];
if(self){
    self.user = user;
    self.person = person;
    self.address = address;
    self.userId = userId;
    self.userEmail = userEmail;
    self.userName = userName;
    self.userSurname = userSurname;

}
return self;
}

 - (NSDictionary*) serialize{
OrderedDictionary *sup = [OrderedDictionary dictionaryWithCapacity:3];
[sup setValue:self.user forKey:@"User"];
[sup setValue:self.person forKey:@"Person"];

NSArray *users = [OrderedDictionary valueForKey:@"User"];
_user = [NSMutableArray arrayWithCapacity:[users count]];

for(NSDictionary *user in users){
    OrderedDictionary *userDict = [OrderedDictionary dictionaryWithCapacity:2];
    [userDict setValue:self.userId forKey:@"Id"];
    [userDict setValue:self.userEmail forKey:@"Mail"];
    return userDict;
}

NSArray *persons = [OrderedDictionary valueForKey:@"Person"];
_person = [NSMutableArray arrayWithCapacity:[persons count]];

for(NSDictionary *person in persons){
    OrderedDictionary *personsDict = [OrderedDictionary dictionaryWithCapacity:2];
    [personsDict setValue:self.userName forKey:@"Name"];
    [personsDict setValue:self.userSurname forKey:@"Surname"];
    return personsDict;
}
return sup;

} 
```

请帮帮我每一个小提示都会非常感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:09:50.980

如果你的应用是 iOS 5 或更高版本，你可以使用 NSJSONSerialization：

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

否则我推荐SBJson。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:08:59.750

为了在 Objective-C 中处理 JSON，我总是使用 JSONKit。你可以在这里分叉：[https ://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

有关如何使用它的一些示例：

```
NSArray *array = @[..];
NSString *arrayAsJsonString = [array JSONString];

NSString *string = @"..";
id objectFromJsonString = [string objectFromJSONString]; // i.e an NSArray or NSDictionary 
```

# javascript - 嵌入式浏览器中的JS与本机代码连接的方法是什么？

> ID：13520590
> 
> 赞同：1
> 
> 时间：2012-11-22T22:04:53.893
> 
> 标签：javascript, qt, webkit, rhino

假设我在 Qt 应用程序中使用了 WebKit。我可以访问 JS 上下文吗？例如，它可以用于为用户 JS 提供一些特定的 API，或者提供对 JS 代码的自定义约束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:34:56.423

如果我正确理解了这个问题，请使用[addToJavaScriptWindowObject](http://doc-snapshot.qt-project.org/4.8/qwebframe.html#addToJavaScriptWindowObject) () 方法。阅读有关[QtWebKit Bridge](http://doc-snapshot.qt-project.org/4.8/qtwebkit-bridge.html)的文档以获得更完整的解释。

# php - MySQL 查询来自 php 中的查询结果

> ID：13520596
> 
> 赞同：0
> 
> 时间：2012-11-22T22:05:24.953
> 
> 标签：php, mysql, entity-attribute-value

如果我想在php中查询一个查询结果应该怎么走？假设我有这个..

```
$result = mysql_query("SELECT * FROM tbl_x WHERE tbl_x.attribute = y"); 
```

现在我需要查询那个 $result 来过滤我从它的查询中得到的结果。请注意，我不想这样做...

```
$result2 = mysql_query("SELECT * FROM ( SELECT * FROM tbl_x WHERE tbl_x.attribute = y ) AS tbl_x1 WHERE tbl_x1... etc"); 
```

我想避免这种情况的原因是在执行这样的查询时出现“重复列”错误。

我正在寻找类似...

```
$result = mysql_query("SELECT * FROM tbl_x");
$result2 = mysql_query_result($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:10:04.263

您可以在搜索条件中应用多个词，用 分隔`AND`：

```
$result = mysql_query("SELECT * FROM tbl_x 
                       WHERE tbl_x.attribute = y 
                         AND tbl_x.attribute2 = z"); 
```

* * *

回复您上面的评论。听起来您正在使用[实体-属性-值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)设计。

为了匹配多个属性，你必须做一些技巧。通常，WHERE 子句一次只能应用于一行。但是由于您的每个属性都存储在单独的行中，因此您需要执行以下两种解决方案之一：

1.  将多行合并为一行，因此您可以在一个条件下对所有属性使用 WHERE。

    ```
    SELECT config_id
    FROM attributes AS s
    JOIN attributes AS c USING (config_id)
    JOIN attributes AS l USING (config_id)
    WHERE (s.attr, s.value) = ('size', 'M')
    AND (c.attr, c.value) = ('colour, 'green')
    AND (l.attr, l.value) = ('cloth', 'cotton); 
    ```

2.  搜索多个属性中的任何一个，然后如果匹配的行数等于您正在搜索的属性数，那么您已经找到了所有属性。

    ```
    SELECT config_id
    FROM attributes
    WHERE (attr, value) = ('size', 'M') 
    OR (attr, value) = ('colour', 'green') 
    OR (attr, value) = ('cloth', 'cotton')
    GROUP BY config_id
    HAVING COUNT(DISTINCT attr) = 3; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:15:45.687

您仍然可以查询查询而不会出现“重复列”错误。只需别名并命名列

```
 $result2 = mysql_query("SELECT tbl_x1.col1, tbl_x1.col2,...etc  FROM 
            (SELECT * FROM tbl_x WHERE tbl_x.attribute = y) AS tbl_x1 
             WHERE tbl_x1... etc"); 
```

# bash - 在 bash 脚本中，查看并使用完整的命令行

> ID：13520601
> 
> 赞同：7
> 
> 时间：2012-11-22T22:06:13.303
> 
> 标签：bash, command-line, parameters

有什么方法可以访问键入的确切命令行？

（变量展开后就OK了）

这是我能想到的实现以下目标的唯一方法：

```
myscript.sh file1 file2 file3 -m"A multi word comment" [other parameters/options] 
```

-- 在我们有效调用的脚本中 --

```
svn commit file1 file2 file3 -m"A multi word comment" [other parameters/options] 
```

-- 无需复制 svn 本身所做的所有解析，只是为了理解命令行

（我遇到的问题是，在示例中，$4 将是“-mA 多词注释”，这将是一团糟。我宁愿能够拍摄整个命令行、引号和所有，直接到 svn 正是 svn 想要看到它的方式。）

如果有人知道编写 svn“包装器”的更好方法，我也想听听。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T22:07:50.713

您是否在脚本中尝试过：

```
svn commit "$@" 
```

**解释：**

*   `$@`是一个特殊的变量，它包含 shell 的所有参数，从 $1 开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:07:45.070

在里面有效地调用你可以：

```
svn commit "$@" 
```

至于确切地看它是如何输入的——不。您无法分辨`a b`（`a b`注意参数之间的一两个空格 - 啊，我认为即使 SO 也隐藏了第二个空格；））。但你不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:21:02.167

如果脚本本身不需要参数，另一种方法是使用别名，像这样

```
alias commit='code_check && svn ci' 
```

（其中 code_check 是在 svn 提交之前执行的脚本或函数）

然后你可以打电话

```
commit file1 file2 file3 -m"A multi word comment" [other parameters/options] 
```

并且别名扩展将线变成

```
code_check && svn ci file1 file2 file3 -m"A multi word comment" [other parameters/options] 
```

# c - 在C中打印char指针数组时出现奇怪的输出

> ID：13520606
> 
> 赞同：0
> 
> 时间：2012-11-22T22:07:10.927
> 
> 标签：c, arrays, pointers, while-loop

目前，我正在 C 中尝试一些指针的东西。但是现在，我遇到了指针数组的问题。通过使用下面的代码，我得到了一个奇怪的输出。我认为代码中有一个很大的错误，但我找不到它。

我只想打印指针数组的字符串。

```
#include <stdio.h>

int main(void)
{
    char *words[] = {"word1", "word2", "word3"};
    char *ptr;
    int i = 0;

    ptr = words[0];

    while(*ptr != '\0')
    {
        printf("%s", *(words+i));
        ptr++;
        i++;
    }

    return 0;
} 
```

**输出：** word1word2word3Hã}¯HÉˇ

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:11:39.780

```
while(*ptr != '\0')
{
    printf("%s", *(words+i));
    ptr++;
    i++;
} 
```

最初，`ptr`指向`'w'`in `"word1"`。所以循环迭代五次，直到`*ptr == '\0'`. 但是数组`words`只包含三个元素，因此第四次和第五次迭代调用未定义的行为，并且当`words`数组后面的字节被解释为指向以 0 结尾的字符串的指针时会打印垃圾。它很容易崩溃，如果您在其他系统上尝试使用其他编译器或编译器设置，它有时会崩溃。

您可以将循环转换为

```
for(i = 0; i < strlen(words[0]); ++i) {
    printf("%s", words[i]);
} 
```

更容易看到它的作用。

如果要打印出`words`数组中的字符串，可以使用

```
// this only worls because words is an actual array, not a pointer
int numElems = sizeof words / sizeof words[0];
for(i = 0; i < numElems; ++i) {
    printf("%s", words[i]);
} 
```

作为`words`一个实际的数组，您可以使用`sizeof`. 然后你循环尽可能多的数组有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:27:23.320

我认为您打算`ptr`遍历`words`数组中的项目，但实际上它实际上是遍历“ `word1`”的字符。要遍历`words`数组，同时假装不知道要遍历的项数，然后将 while 条件更改如下：

```
int main(void)
{
    char *words[] = {"word1", "word2", "word3"};
    char numWords = sizeof(words) / sizeof( words[0]);
    int i = 0;

    while(i < numWords)
    {
        printf("%s", *(words+i));

        i++;
    }

    return 0;
} 
```

如果你真的想使用 ptr 来遍历 words 数组的项目，那么改变 words 数组和 while 条件如下：

```
int main(void)
{
    char *words[] = {"word1", "word2", "word3", NULL};
    char *ptr[] = words;
    int i = 0;

    while(ptr[i] != NULL)
    {
        printf("%s", *(words+i));

        i++;
    }

    return 0;
} 
```

# iscroll - iscroll dom 变化

> ID：13520607
> 
> 赞同：0
> 
> 时间：2012-11-22T22:07:35.533
> 
> 标签：iscroll

我的 iScroll 工作正常。我在 3 个包含文本的可滚动 div 中添加了一个 jQuery font sizer 插件。在使用“A+”来增加文本大小时，我得到了“橡皮筋”效果 [这是我所期望的]
我知道掌握[REFRESH() 方法](http://cubiq.org/)，但是我不知道如何正确实现这一点。

我的 iscroll 代码是

```
var scroll1, scroll2, scroll3,
scrollNav;

function loaded() {
 setTimeout(function () {
    scrollNav = new iScroll('transition1', { useTransition:true });
    scroll1 = new iScroll('scrollpage01', { useTransition:true });
    scroll2 = new iScroll('scrollpage02', { useTransition:true });
    scroll3 = new iScroll('scrollpage03', { useTransition:true });
   }, 250);
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false); 
```

其中一个带有文本的 div 的示例是

```
<article id="scrollpage01">
<div id="contentScroller">
    <div class="box">
         <a class="jfontsize-button" id="jfontsize-m" href="#">A-</a>
         <a class="jfontsize-button" id="jfontsize-d" href="#">A</a>
         <a class="jfontsize-button" id="jfontsize-p" href="#">A+</a>

        <p class="some-class-name">Lorem ipsum dolor sit amet, ....blah blah blah.... suspendisse potenti.
        </p>

        <script type="text/javascript" language="javascript">
            $('.some-class-name').jfontsize({
                btnMinusClasseId: '#jfontsize-m',
                btnDefaultClasseId: '#jfontsize-d',
                btnPlusClasseId: '#jfontsize-p'
            });
        </script>
    </div>
</div>
</article> 
```

现在我如何/在哪里可以添加

```
setTimeout(function() { scroll1.refresh(); }, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:07:35.533

哦，它可以多么简单......使用完整的 iscroll.js 而不是 lite 并添加 checkDOMChanges: true

```
<script type="text/javascript">
    var scroll1, scroll2, scroll3,
    scrollNav;

    function loaded() {
     setTimeout(function () {
       // scrollNav = new iScroll('navWrapper');
        scrollNav = new iScroll('transition1', { useTransition:true });
        scroll1 = new iScroll('scrollpage01', { useTransition:true, checkDOMChanges: true });
        scroll2 = new iScroll('scrollpage02', { useTransition:true, checkDOMChanges: true });
        scroll3 = new iScroll('scrollpage03', { useTransition:true, checkDOMChanges: true });
       }, 250);
    }

   document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
   document.addEventListener('DOMContentLoaded', loaded, false);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T13:25:00.960

当你的 Dom 改变或 Dom 的高度改变时，你也可以调用**refresh()函数。**

```
setTimeout(function() { scroll1.refresh(); }, 200); 
```

确保在 iScroll 加载到 Dom 之后调用 refresh() 函数。同样在 dom 完全更改后，只需使用 setTimeout 调用 refresh() 函数。

# css - 带填充的 100% 宽度输入

> ID：13520611
> 
> 赞同：4
> 
> 时间：2012-11-22T22:07:45.047
> 
> 标签：css

如何制作具有左/右填充 10px 并且将与其父级一样宽的 textarea/input。

```
textarea,input{
    padding:5px 10px 5px 10px; 
    width:100%;
} 
```

在这种情况下，输入范围更广。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T22:13:58.143

```
 textarea{
        box-sizing: border-box;
        width:100%;
        padding: 10px
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T22:11:01.470

啊，好的旧[盒子模型](http://www.w3schools.com/css/css_boxmodel.asp)。填充添加到宽度中，因此为了达到预期的效果，您还必须在填充中使用百分比。尝试这个：

```
textarea, input {
   padding: 1% 2% 1% 2%;
   width: 96%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T05:34:02.327

您可以在相关问题中查看我的**[答案](https://stackoverflow.com/a/11238699/1057730)**

[**jsFiddle 上的演示**](http://jsfiddle.net/matmuchrapna/VSMmH/4/)：
![在此处输入图像描述](../Images/95a157b47575536f5cb60defe2f6614a.png)

**HTML 标记：**

```
<div class="input_wrap">
    <input type="text" />
</div> 
```

**CSS：**

```
div {
    padding: 6px 10px; /* equal to negative input's margin for mimic normal `div` box-sizing */
}

input {
    width: 100%; /* force to expand to container's width */ 
    padding: 5px 10px;
    border: none;
    margin: 0 -10px; /* negative margin = border-width + horizontal padding */ 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T22:09:46.750

将边距属性添加到您的 CSS 代码。

# python - Django / Python：将 Markdown 转换为安全 HTML

> ID：13520618
> 
> 赞同：6
> 
> 时间：2012-11-22T22:08:59.180
> 
> 标签：python, django, django-templates, markdown

我接受 Markdown 并需要将其转换为 HTML 以在 Django 中安全呈现。现在我正在接受 form.cleaned_data 并将其转换为 HTML：

```
import markdown
html_body = markdown.markdown(body_markdown, safe_mode=True)
html_body = html_body.replace('[HTML_REMOVED]', '')
return html_body 
```

在模板中，我将其渲染为：

```
{{ object.content|safe|capfirst }} 
```

但是，如果您发布：

```
0;url=javascript:alert('hi');" http-equiv="refresh 
```

JS 将呈现，因此 XSS 是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:16:22.170

django 的内置[`safe`模板标记](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std:templatefilter-safe)意味着您将该变量标记为可以输出，即您知道它的内容是安全的：

> 安全：将字符串标记为在输出之前不需要进一步的 HTML 转义。

默认情况下，Django[会转义您的模板变量：](https://docs.djangoproject.com/en/1.4/topics/templates/#automatic-html-escaping)

> 默认情况下，在 Django 中，每个模板都会自动转义每个变量标签的输出。具体来说，这五个字符被转义...

但它不会为您剥离 javascript（它只会使其无法使用），您需要使用模板标签手动执行此操作：

[在 django 模板中渲染之前剥离 javascript 代码](https://stackoverflow.com/questions/6444893/strip-javascript-code-before-rendering-in-django-templates)

另一方面，如您所见， `safe_mode`on会`markdown`删除文本中的任何 HTML 。`[HTML REMOVED]`

所以移除`safe`应该足以让它安全，

# python - 显示进度的脚本？

> ID：13520622
> 
> 赞同：11
> 
> 时间：2012-11-22T22:09:12.980
> 
> 标签：python, progress-bar

当我的 python 脚本处理一个大文件时，我想向用户显示进度。

我已经`'\', "|', '/'`在 shell 中的相同光标位置看到脚本打印以显示进度。

我怎么能在python中做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T22:13:14.710

你应该使用[python-progressbar](http://code.google.com/p/python-progressbar/)

使用起来很简单：

```
import progressbar as pb

progress = pb.ProgressBar(widgets=_widgets, maxval = 500000).start()
progvar = 0

for i in range(500000):  
    # Your code here
    progress.update(progvar + 1)
    progvar += 1 
```

这将显示一个进度条，如：

```
Progress: |####################################################            |70% 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T22:32:44.373

一个简单的“无限微调器”实现：

```
import time
import itertools

for c in itertools.cycle('/-\|'):
    print(c, end = '\r')
    time.sleep(0.2) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-29T04:48:53.913

[对于这种情况， tqdm](https://github.com/tqdm/tqdm)是更强大的一种。它具有更好的特性和可比性。

它易于使用，代码可以简单为：

```
from tqdm import tqdm
for i in tqdm(range(10000)):
    pass  # or do something else 
```

[对于特殊情况](https://github.com/tqdm/tqdm#examples-and-advanced-usage)，定制也很容易。

这是来自回购的演示：

![](../Images/00d6d8201286146351e6cd935554604a.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T22:15:03.910

如果你想自己动手，你可以这样做：

```
import sys, time

for i in range(10):
  print ".", # <- no newline
  sys.stdout.flush() #<- makes python print it anyway
  time.sleep(1)

print "done!" 
```

这将每秒打印一个点，然后打印“完成！”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T22:21:20.923

或者通常的直升机（在 Python 3 中）：

```
import sys, time

for i in range(10):
   print("/-\|"[i % 4], end="\b")
   sys.stdout.flush()  #<- makes python print it anyway
   time.sleep(0.1)

print("\ndone!") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T18:53:18.373

做这个是为了好玩。它显示旋转条和文本加载。像这样：

```
|         
\ l       
- lo      
/ loa     
| load    
\ loadi   
- loadin  
/ loading 
```

该代码在 Windows 上进行了测试。

```
'''
Spinner and a text showing loading.
'''
import sys
import time

def looper(text):
    sys.stdout.write('\r')
    sys.stdout.write(text)
    sys.stdout.flush()

spinner = ["|", "\\" , "-", "/" ]
loading = ['l','o','a','d','i','n','g']

spin_1 = len(spinner)
spin_2 = len(loading) + 1

print("Starting program...")

for x in range(100):
    spin_2mod = x%spin_2
    looper(spinner[x%spin_1] + " " + "".join(loading[0: (spin_2mod) ]) + (" " * (spin_2 - spin_2mod)))
    time.sleep(0.5)

print("\nExiting program...")
time.sleep(2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-17T20:01:48.153

这段代码对我有用：

```
class ProgressBar(object):

  def __init__(self, maxval=100):
    self.currval = 0
    self.maxval = int(maxval)
    self.last_progress = 0
    sys.stdout.write("0")
    sys.stdout.flush()

  def next(self, val = None):
    if val:
        self.currval = val
    else:
        self.currval = self.currval + 1
    progress = round(20 * self.currval / self.maxval)

    while self.last_progress < progress:
        self.last_progress = self.last_progress + 1
        self._print_progress(self.last_progress)

  def finish(self):
    while self.last_progress < 20:
        self.last_progress = self.last_progress + 1
        self._print_progress(self.last_progress)
    sys.stdout.write("\n")
    sys.stdout.flush()

  def _print_progress(self, progress):
    if progress % 5 == 0:
        percent = int(progress * 5)
        sys.stdout.write(str(percent))
    else:
        sys.stdout.write(".")
    sys.stdout.flush() 
```

此代码适用于数亿次的大量迭代 - 它不会在每次迭代时重绘控制台。

使用示例：

```
progress = ProgressBar(band.YSize)
for y in xrange(0, band.YSize, 256):    
    array = band.ReadAsArray(x, y, 256, 256)
    map_array_values(array, values)
    progress.next(y)
    del array
progress.finish() 
```

它将以 GDAL 样式显示进度：

[![在此处输入图像描述](../Images/18350ffbc8091f80e6a7af22f1a77b0b.png)](https://i.stack.imgur.com/w78NU.png)

# sql-injection - SQL 注入新漏洞

> ID：13520624
> 
> 赞同：0
> 
> 时间：2012-11-22T22:09:24.477
> 
> 标签：sql-injection

参考 Blind SQL Injection 以及基于时间和错误消息的技术，攻击者还有其他可以利用的技巧吗？

我在 Blind SQL Injection 领域做了一些研究，但我还没有找到任何其他可以归类为 Blind SQL Injection 的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:15:32.460

这里对基于 UNION 的盲 SQL 注入技术有很好的解释：http: [//gnahackteam.wordpress.com/2012/06/08/union-based-basic-sql-injection/](http://gnahackteam.wordpress.com/2012/06/08/union-based-basic-sql-injection/)

据报道，这是几个月前用来[入侵雅虎的技术！声音](http://www.informationweek.com/security/attacks/yahoo-hack-leaks-453000-voice-passwords/240003587)。

查看Justin Clark 等人的[SQL 注入攻击和防御一书。](https://rads.stackoverflow.com/amzn/click/com/1597499633)人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T06:11:00.467

根据 DBMS，可以利用 Blind-SQLi 的某些变体。

这是 Blind-Boolean + Blacklist Bypass [DringenBlog的一个很好的例子](https://dringen.blogspot.com)

# c++ - 用纹理绘制多个对象不起作用

> ID：13520626
> 
> 赞同：2
> 
> 时间：2012-11-22T22:09:35.067
> 
> 标签：c++, opengl, glsl

我正在开发 3D 模型加载器。它可以加载我自己的格式。我为 Blender 编写了自己的导出器，它运行良好。模型格式可以在一个模型中处理多个网格（对象）。每个网格可以有不同的纹理。我已经编写了一个运行良好但不使用着色器的加载器。

我切换到着色器，但出了点问题，纹理显示不正确。这是我的绘图功能，我确定错误出在此处：

```
void CModel::draw(glm::mat4 &MVP)
{
    glActiveTexture(GL_TEXTURE0);
    glEnable(GL_TEXTURE_2D);

    for(unsigned int i=0; i<m_numObjects; i++)
    {
        glUseProgram(m_programID);
        glUniformMatrix4fv(m_matrixUniform, 1, GL_FALSE, &MVP[0][0]);

        glBindTexture(GL_TEXTURE_2D, m_textureIDs[i]);
        glUniform1i(m_textureUniform, 0);

        glBindBuffer(GL_ARRAY_BUFFER, m_bufferIDs[i]);

        // vertices
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(
                0,                  // must match the layout in the shader.
                3,                  // size
                GL_FLOAT,           // type
                GL_FALSE,           // normalized?
                sizeof(float)*8,    // stride
                (void*)0            // array buffer offset
        );

        // UVs
        glEnableVertexAttribArray(1);
        glVertexAttribPointer(
                1,
                2,
                GL_FLOAT,
                GL_FALSE,
                sizeof(float)*8,
                (void*)6
        );

        glDrawArrays(GL_TRIANGLES, 0, m_numElements[i]);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glUseProgram(0);
    }

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
    glDisable(GL_TEXTURE_2D);
} 
```

顶点和片段着色器也运行良好。

以前的版本（没有着色器）是这样的（效果很好）：

```
void CModel::draw()
{
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    glClientActiveTexture(GL_TEXTURE0);
    glActiveTexture(GL_TEXTURE0);
    glEnable(GL_TEXTURE_2D);

    for(unsigned int i=0; i<m_numObjects; i++)
    {
        glBindTexture(GL_TEXTURE_2D, m_textureIDs[i]);

        glBindBuffer(GL_ARRAY_BUFFER, m_bufferIDs[i]);

        glTexCoordPointer(2, GL_FLOAT, sizeof(float)*8, (float*)(sizeof(float)*6));
        glNormalPointer(     GL_FLOAT, sizeof(float)*8, (float*)(sizeof(float)*3));
        glVertexPointer(  3, GL_FLOAT, sizeof(float)*8, 0);

        glDrawArrays(GL_TRIANGLES, 0, m_numElements[i]);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
    }

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    glDisable(GL_TEXTURE_2D);
} 
```

**这是整个班级：**

```
#include "global.h"
#include "CModel.h"
#include "CModelLoader.h"
#include "CShaderLoader.h"

CModel::CModel(){}

CModel::~CModel()
{
    // TODO free memory
}

/** @brief Load mbm file
  *
  * @fileName: mdm model file name we want to load and draw
  */
void CModel::init(char *fileName)
{
    CModelLoader   loader;
    CShaderLoader  shaders;

    loader.loadData(fileName);

    loader.createDataArray( m_dataArray,
                            m_dataArraySizes,
                            m_numObjects,
                            m_numElements,
                            m_textureIDs );

    glGenVertexArrays(1, &m_vertexArrayID);
    glBindVertexArray(m_vertexArrayID);

    m_programID      = shaders.loadShaders("vertexshader.vert", "fragmentshader.frag");

    m_bufferIDs      = new unsigned int[m_numObjects];

    glGenBuffers(m_numObjects, m_bufferIDs);
    for(unsigned int i=0; i<m_numObjects; i++)
    {
        glBindBuffer(GL_ARRAY_BUFFER, m_bufferIDs[i]);
        glBufferData(GL_ARRAY_BUFFER, sizeof(float)*m_dataArraySizes[i], m_dataArray[i], GL_STATIC_DRAW);
    }

}

/** @brief Drawing the mdm model
  *
  */
void CModel::draw(glm::mat4 &MVP)
{

    glEnable(GL_TEXTURE_2D);
    glActiveTexture(GL_TEXTURE0);

    for(unsigned int i=0; i<m_numObjects; i++)
    {
        glUseProgram(m_programID);

        unsigned int matrixUniform  = glGetUniformLocation(m_programID, "MVP");
        unsigned int textureUniform = glGetUniformLocation(m_programID, "myTextureSampler");

        glUniformMatrix4fv(matrixUniform, 1, GL_FALSE, &MVP[0][0]);
        glUniform1i(textureUniform, 0);

        glBindTexture(GL_TEXTURE_2D, m_textureIDs[i]);
        glBindBuffer(GL_ARRAY_BUFFER, m_bufferIDs[i]);

        // vertices
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(
                0,                  // must match the layout in the shader.
                3,                  // size
                GL_FLOAT,           // type
                GL_FALSE,           // normalized?
                sizeof(float)*8,    // stride
                (void*)0            // array buffer offset
        );

        // UVs
        glEnableVertexAttribArray(1);
        glVertexAttribPointer(
                1,
                2,
                GL_FLOAT,
                GL_FALSE,
                sizeof(float)*8,
                (void*)6
        );

        glDrawArrays(GL_TRIANGLES, 0, m_numElements[i]);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glUseProgram(0);
    }

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);

    glDisable(GL_TEXTURE_2D);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:19:59.603

最后我解决了。问题是我对顶点、法线和纹理坐标使用了一个数组，而不是存储在单独的数组中并分别绑定它们。

# c - 使用 exec 运行 /usr/sbin 下的文件

> ID：13520627
> 
> 赞同：0
> 
> 时间：2012-11-22T22:09:39.013
> 
> 标签：c, exec, fork

我想在 C 中使用带有参数（另一个文件）的 execvp 在 /usr/sbin 下运行一个文件。

例如：/usr/sbin/abc /Desktop/abc.txt -> 这个命令是在终端中输入的。但是我想使用 C 运行命令。

我试过 execvp("/usr/sbin/abc", "/usr/sbin/abc" , "/Desktop/abc.txt"); 但这给了我分隔符错误。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:19:18.120

`exec`家族中所有带有 a 的函数都带有一个`v`参数数组。您在此处尝试使用的函数是`execl()`，最后需要一个`NULL`参数：

```
execl("/usr/sbin/abc", "/usr/sbin/abc" , "/Desktop/abc.txt", NULL); 
```

# symfony - Symfony 2 DIC 中的缓存是如何工作的，我该如何使用它？

> ID：13520628
> 
> 赞同：0
> 
> 时间：2012-11-22T22:09:39.893
> 
> 标签：symfony, symfony-2.1

我找不到任何关于缓存捆绑配置的教程或有用信息。

基本上，我的捆绑包加载了很多（20 多个）标记服务。我可以使用缓存来加速编译器通过吗？缓存应该如何工作？我能找到的唯一一点信息是[Dumping the Configuration for Performance](http://symfony.com/doc/2.0/components/dependency_injection/compilation.html#dumping-the-configuration-for-performance)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:29:11.927

确保您使用的是 APC 缓存，因此您可以进一步缓存在 memcached/redis 流行的查询结果中（如预先填充的列表、类别和内容）。

如需进一步优化，请查看此演示文稿：

[http://slides.seld.be/?file=2011-10-20+High+Performance+Websites+with+Symfony2.html#1](http://slides.seld.be/?file=2011-10-20+High+Performance+Websites+with+Symfony2.html#1)

它真的震撼了你的世界！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:46:39.880

每当您阅读组件部分时，请注意某些信息将针对在框架之外使用组件的人。

从您发布的链接：

```
In the full stack framework the compilation and caching
of the container is taken care of for you. 
```

# java - Eclipse：Scala 无法访问 Java 类成员 - 只是在进行了一些清理之后

> ID：13520630
> 
> 赞同：0
> 
> 时间：2012-11-22T22:09:46.087
> 
> 标签：java, eclipse, scala

我试图在一个项目中使用 Scala 和 Java。我正在使用 Scla IDE for Eclipse。我的 Scala 项目中有两个包：一个用于我的 scala 代码，一个用于我的 java 代码。

现在假设我用一个静态成员创建了新的 JavaClass。

```
package javastuff;

public class MyJavaClass {
    public static String MESSAGE = "Im Java";
} 
```

在那之后，我试图访问这个变量，但不知何故我不能。有趣的是，因为 scala 能够看到 Java 类“MyJavaClass”只是看不到***MESSAGE***。

```
import javastuff.MyJavaClass

object Main {
    def main(args: Array[String]) {
        println(MyJavaClass.MESSAGE)
    }
} 
```

*   值 MESSAGE 不是对象 javastuff.MyJavaClass 的成员

如果我使用**Project/Clean...** 1-2 倍 eclipse 可能开始意识到成员 MESSAGE 确实存在并且一切都很好。这是正常的吗？也许我做错了什么，我知道 eclipse 确实是一个糟糕的 IDE，我应该尝试 IntelliJ，但不知何故我喜欢 eclipse，我想稍后使用一些我最喜欢的插件，这就是为什么我不会仅仅因为这个问题。任何想法如何更好地处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:21:56.170

Scala 没有任何静态字段。这是一篇关于它的[博文](http://www.eishay.com/2009/05/scala-java-interoperability-statics.html)

顺便提一句。没有 final 的 public static 是非常糟糕的设计（没有封装 => 可能的内存泄漏）

# c - C：当我尝试将很多东西分组时，指针问题

> ID：13520631
> 
> 赞同：1
> 
> 时间：2012-11-22T22:09:47.613
> 
> 标签：c, list, pointers

我有一个函数可以将一个项目添加到我创建的列表中。如果是第一次并且列表指向`NULL`，它分配列表并完成它，返回地址。如果不是第一次，它会添加另一个项目并再次返回第一个项目（现在我可以忽略这个返回）。列表和函数工作正常，这是原型：

```
typedef struct structTAppConsoleList {
    char *text;
    void (*cbFunction)(int);
    int number; // This is the item number
    struct structTAppConsoleList *previous;
    struct structTAppConsoleList *next;
} TList;

TList *AppConsoleListAddItem(TList *p_list, const char *p_string, void (*p_funcPtr)(int)); 
```

因此，在我的代码中的某个地方，我必须创建很多它们，并且我正在尝试按照下面的代码所示进行制作。问题是，我无法让它工作......我想创建一些东西来对我想要创建的列表进行分组，然后在函数中使用它。下面的代码是我想要做的事情的一个想法。仅考虑我尝试分配 3 个列表的部分，其余部分对于此示例并不重要。

```
TList *list1;
TList *list2;
TList *list3;

int main(void)
{
    int i,j;
    TList **groupMyLists;
    TList *temp;

    groupMyLists=malloc(sizeof(TList)*3);

    *groupMyLists    =(TList*)&list1;
    *(groupMyLists+1)=(TList*)&list2;
    *(groupMyLists+2)=(TList*)&list3;

    for(j=0;j<3;j++) {
        temp=NULL;
        for(i=0;i<10;i++) {
            temp=AppConsoleListAddItem(temp,"some text",someFunc);
        }
        **groupMyLists=temp; // my make won't let me do this
        groupMyLists++;
    }
} 
```

我很确定这会做到这一点，但我无法编译它。

在我的脑海中，`(*groupMyLists)`将与`(&list1)`, `(&list2)`,`(&list3)`相同，与,和`(**groupMyLists)`相同。那为什么我不能呢？任何人？`(list1)``(list2)``(list3)``(**groupMyLists=temp)`

我希望我说清楚了！！我很难解释我正在尝试做的这种疯狂......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:14:15.830

更改此行，您使用了错误的间接方式。

```
*groupMyLists=temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:39:12.267

这将完成这项工作：

```
**groupMyLists = *temp; 
```

将引用的一个结构复制到引用的`temp`另一个结构`*groupMyLists`。

但只有在`*groupMyLists`引用任何有效内存的情况下才会这样做 - 至少不是来自您发布的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:48:58.270

除了上述关于不正确间接的两个答案之外，`**groupMyLists`您可能还想为指针分配`list1,list2,list3`正确的指针值，而不是将垃圾值写入分配的内存中，`groupMyLists`即

```
TList * groupMyList = malloc(sizeof(TList)*3);

list1 = &groupMyList[0];
list2 = &groupMyList[1];
list3 = &groupMyList[2]; 
```

但是，这与您的其余代码并不匹配，因为它似乎`AppConsoleAddListItem`分配了`temp`列表，因此在这种情况下，您`malloc`将是不正确的，因为它应该为指针分配空间而不是为列表分配空间，如下所示：

```
TList ** groupMyList = (TList **)malloc(sizeof(TList *)*3);
TList *  temp;

if (!groupMyList) {
   /* Print allocation error warning or handle in some proper fashion */
   exit(1);
}

for(j=0;j<3;j++) {
    temp=NULL;
    for(i=0;i<10;i++) {
        temp=AppConsoleListAddItem(temp,"some text",someFunc);
    }
    groupMyLists[j]=temp; // Here you now assign the pointer in temp to the memory for                           // pointers that you allocated above
}

list1 = groupMyList[0]; // Here we need to assign the list1,2,3 after the AppConsole calls
list2 = groupMyList[1]; // as these calls will changes the pointer addresses written into
list3 = groupMyList[2]; // groupMyList 
```

虽然我不能确定你到底想做什么，但你的原始代码中有几个指针和间接的不一致，上面两个例子希望能提供一些指导

# c# - 如何取消等待的任务？

> ID：13520632
> 
> 赞同：2
> 
> 时间：2012-11-22T22:09:58.477
> 
> 标签：c#, c#-4.0, task-parallel-library

我正在尝试使用 CancellationTokenSource 取消等待网络 IO 的任务，但我必须等到 TcpClient 连接：

```
try
{
    while (true)
    {
        token.Token.ThrowIfCancellationRequested();
        Thread.Sleep(int.MaxValue); //simulating a TcpListener waiting for request
    }
} 
```

有任何想法吗？

其次，是否可以在单独的任务中启动每个客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:24:45.113

当您启动任务时，您可以使用[StartNew](http://msdn.microsoft.com/en-us/library/dd988458.aspx)的重载来传递取消令牌，您的任务将检查取消。

或者，您可以只使用[AcceptAsync](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.acceptasync.aspx)并继续做其他工作。AcceptAsync 将调用通过您定义的 SocketAsyncEventArgs 参数附加的 OnCompleted 方法。

```
internal class Program
{
    private static EventWaitHandle _signalFromClient;
    private static readonly string NameThatClientKnows = Guid.NewGuid().ToString();
    private static readonly CancellationTokenSource CancellationTokenSource = new CancellationTokenSource();

    private const int PingSendTimeout = 30000;
    private static Socket _connectedClientSocket;
    private static Socket _tcpServer;

    private static void Main(string[] args)
    {
        _signalFromClient = new EventWaitHandle(false, EventResetMode.AutoReset, NameThatClientKnows);

        _tcpServer = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        _tcpServer.Bind(new IPEndPoint(IPAddress.Loopback, 0));
        _tcpServer.Listen(1);

        var asyncOpInfo = new SocketAsyncEventArgs();
        asyncOpInfo.Completed += CompletedConnectRequest;
        _tcpServer.AcceptAsync(asyncOpInfo);

        Console.WriteLine("Console stays open, connecting client will say something.");
        Console.ReadLine();
    }

    private static void CompletedConnectRequest(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("Client connected");

        _connectedClientSocket = e.AcceptSocket;

        Task.Factory.StartNew(SendSimpleMessage, CancellationTokenSource.Token);
    }

    private static void SendSimpleMessage()
    {
        while (!CancellationTokenSource.Token.IsCancellationRequested && _connectedClientSocket.Connected)
        {
            try
            {
                _connectedClientSocket.Send(Encoding.UTF8.GetBytes("PING"));
                _signalFromClient.WaitOne(PingSendTimeout);
            }
            catch (SocketException) { Dispose(); }
        }
    }

    private static void Dispose()
    {
        CancellationTokenSource.Cancel();

        _connectedClientSocket.Close();
        _tcpServer.Close();
    }
} 
```

当然，使用缓冲区和其他必要的项目/行为设置 SocketAsyncEventArgs。在 Dispose() 中，我取消任务并捕获可能通过在客户端和服务器 ø_Ø 上调用 Socket.Close 引发的任何 SocketException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:30:30.057

我使用了 CancellationToken 句柄而不是创建一个新句柄，它使代码更简单

```
var task = Listener.AcceptTcpClientAsync();
task.Wait(MainToken.Token);
MainToken.Token.ThrowIfCancellationRequested(); 
```

# android - 通过 GAE 进行客户端到客户端的通信

> ID：13520633
> 
> 赞同：0
> 
> 时间：2012-11-22T22:10:02.750
> 
> 标签：android, google-app-engine, jakarta-ee

我考虑使用 GAE 作为服务器来与瘦客户端通信 Android 手机。我的典型使用场景是：用户打开网页（GAE）并从远程设备请求一些信息设备获取消息，并通过网页将其发送回用户。

多亏了 GCM，向手机发送消息是小菜一碟。困难的部分是向用户返回响应。我唯一的想法是向数据存储插入响应，然后重复查询，但是有一些缺点：通信延迟和数据存储的过度使用及其配额。

我听说过并阅读过有关通道 API 的信息，但是当我使用 GAE 时，很有可能两个客户端都将连接到不同的机器。你有什么想法如何以正确的方式做到这一点？

为了让我的问题更清楚：让我们简化问题。我有一个 servlet 从 android 客户端获取消息。消息发送给使用 GWT 和另一个 servlet 登录并拥有自己的会话实例的用户。您知道如何将消息从一个 servlet 传递到另一个吗？据我所知，不可能通过一些自动的 sendMessage() 方法来完成。我只需要实现某种邮箱。此刻我看到 memcache 在这个角色中。完美的应该是亚马逊短信之类的服务，但是让我的应用程序在许多服务器之间分派让我有点不高兴。队列是另一个想法，但不是来自 GAE。我不希望在生产环境中标记为实验性的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:01:07.290

通道 API 是您的答案。每个浏览器实例都应该打开一个由令牌标识的通道。您可以跟踪所有令牌，可能在某种会话数据中。然后您可以将消息发送到相应的浏览器。

到目前为止，我注意到有时消息无法发送。不经常，但有时。如果您的消息内容不重要，那可能没问题。就我而言，我构建了一个备用轮询 HTTP 查询。频道的好处是备份轮询对我来说不需要非常频繁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:39:15.603

尝试 Channel API 良好且可靠，我们在其中一个应用程序[MobiTexter](https://play.google.com/store/apps/details?id=net.mobitexter&hl=en)中使用，到目前为止还没有遇到任何问题。

# php - 获取、检测 RSS 提要中的更改

> ID：13520634
> 
> 赞同：2
> 
> 时间：2012-11-22T22:10:03.720
> 
> 标签：php, codeigniter, rss, simplepie, google-feed-api

目前我在 PHP/Codeigniter 中制作的一个应用程序使用 SimplePie 库来解析提要。它获取一个主要的外部提要，每 5 分钟检查一次使用 cron 作业的新项目。对于一次性提要获取，只需运行一个巨大的提要转储并将 RSS 项目解析到数据库中即可。但是，我想知道是否有更好的方法来做到这一点。

我知道 google API，但是它有 100 个条目之类的限制，这并不是一件坏事，因为我会经常检查并且只有少数条目需要更新。但是，如果我要使用该服务每 5 分钟轮询一次 API 和 Feed，我以后可能会遇到问题。

**所以我的问题是**——有没有更好的方法来处理现代网络中的 RSS 之类的事情？从 SimplePie 转移到 google feed API 最初很有吸引力，因为它具有缓存、快速响应和 json 响应。在没有频繁的 cron 作业的情况下检测提要更新的方法会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:07:55.773

你可以使用[https://code.google.com/p/pubsubhubbub/](https://code.google.com/p/pubsubhubbub/)吗？

这里有一个 PHP 订阅者库[https://github.com/lxbarth/PuSHSubscriber](https://github.com/lxbarth/PuSHSubscriber)

# ruby-on-rails - 如何包括轮播

> ID：13520638
> 
> 赞同：1
> 
> 时间：2012-11-22T22:10:08.680
> 
> 标签：ruby-on-rails, twitter-bootstrap, carousel, twitter-bootstrap-rails

当我已经在我的rails应用程序中安装了twitter bootstrap时，如何包含carousel（twitter bootstrap的组件）。？我的样式表中的文件更少，资产管道中的 bootstrap.js.coffee 文件更少。我想在我的应用程序中使用轮播。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T11:57:16.607

正如 tdubs 的回答所表明的那样，Twitter Bootstrap 文档是最好的起点。我发现查看示例页面源代码确实很有帮助。

这就是我实现轮播的方式：

**home.js.coffee**

```
$('.carousel').carousel() 
```

**看法**

```
<!-- carousel -->
<div id="myCarousel" class="carousel slide">
  <div class="carousel-inner">
    <div class="item active">
      <img src="htpp://someimagepath.com" alt="foo">
      <div class="container">
        <div class="carousel-caption">
          <h1>CAPTION FOO BAR</h1>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="htpp://someimagepath.com" alt="foo">
    </div>
    <div class="item">
      <img src="htpp://someimagepath.com" alt="foo">
    </div>
    <div class="item">
      <img src="htpp://someimagepath.com" alt="foo">
    </div>
    <div class="item">
      <img src="htpp://someimagepath.com" alt="foo">
    </div>
    <div class="item">
      <img src="htpp://someimagepath.com" alt="foo">
    </div>
  </div>
</div><!-- /.carousel --> 
```

# r - ggplot逐年比较

> ID：13520639
> 
> 赞同：6
> 
> 时间：2012-11-22T22:10:15.193
> 
> 标签：r, ggplot2

我想制作**一个比较不同年份获得的数据的图**。目标是**在 x 轴上有 12 个月，**并用每年的值绘制**不同的线**。

我正在使用的数据框是下一个：

```
 Month             Marg            Fiscal.Year
1  2009-04-01        20904494        2009
2  2009-05-01        43301981        2009
3  2009-06-01        14004552        2009
...
38 2012-05-01        58343271        2012
39 2012-06-01        38723765        2012
40 2012-07-01        77246753        2012 
```

我的情节代码是：

```
g <- ggplot(data = data, stat="identity", aes(x = Month, y = Marg)) + 
  geom_line() +
  geom_point() +
  geom_smooth(method = "loess") +
  scale_x_date(breaks = "1 month", labels = date_format("%b")); 
```

但这在**x 轴上**绘制了从 2009 年到 2012 年的 48 个月，**其中一条线**显示了每个值（每个月的每一年没有不同的线）。

你能帮我解决这个问题吗？（我是 R 新手，任何帮助将不胜感激）。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T00:09:01.813

```
library(ggplot2)
# Sample data
data <- read.table(text = "Month             Marg            Fiscal.Year
                           2009-01-01        20904494        2009
                           2009-02-01        30904494        2009
                           2009-03-01        40904494        2009
                           2009-04-01        30904494        2009
                           2009-05-01        43301981        2009
                           2009-06-01        14004552        2009
                           2009-07-01        24004552        2009
                           2009-08-01        34004552        2009
                           2009-09-01        44004552        2009
                           2009-10-01        54004552        2009
                           2009-11-01        64004552        2009
                           2009-12-01        44004552        2009
                           2012-02-01        58343271        2012
                           2012-03-01        68343271        2012
                           2012-04-01        58343271        2012
                           2012-05-01        58343271        2012
                           2012-06-01        38723765        2012
                           2012-07-01        77246753        2012",
                   header=TRUE, sep="", nrows=18)
data$MonthN <- as.numeric(format(as.Date(data$Month),"%m")) # Month's number
data$Month  <- months(as.Date(data$Month), abbreviate=TRUE) # Month's abbr.

g <- ggplot(data = data, aes(x = MonthN, y = Marg, group = Fiscal.Year, colour=Fiscal.Year)) + 
     geom_line() +
     geom_point() +
     scale_x_discrete(breaks = data$MonthN, labels = data$Month)
g 
```

![在此处输入图像描述](../Images/a1eae3f2c520d2ad5e83e4a22b844c3a.png)

# java - Java-Server 停止正常工作

> ID：13520640
> 
> 赞同：1
> 
> 时间：2012-11-22T22:10:25.993
> 
> 标签：java, serversocket

我编写了一个带有多个线程的小服务器。很多小时后（据说目前我无法重现该问题）服务器停止工作。我的代码看起来像这样。

线程2：

```
while(true)
{

                System.out.println("Point 1");
                Socket abc = serverSocket.accept();
                System.out.println("Point 2");
                connection = true;
} 
```

Thread1 在 Thread.sleep(1000) 循环中等待并检查连接是否为真。如果是这样，它开始工作，否则它打印“等待”。如果连接中止，它将连接设置为假。

现在我的主程序连接到服务器。服务器打印等待等待（依此类推，直到建立连接）点 1 点 2 应该如此。

现在经过几个小时的运行，我的客户端仍然可以连接，它说连接已建立（通过 clientSocket = new Socket(inetAddress,Integer.parseInt(port)); 假设在此命令成功时无异常建立连接）。

在运行 Thread1 几个小时后，无论我与客户连接的频率如何，都只会打印“等待”、“等待”。我被它难住了，因为它只有在运行多个小时后才会发生。Java 版本是 java 版本 "1.7.0_07" Java(TM) SE Runtime Environment (build 1.7.0_07-b10) 此版本是否有任何已知问题或错误在哪里？任何线索如何重现错误？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:14:35.823

如果您不同步对`connection`字段的访问并且它不是`volatile`字段，则一个 Thread1 可能看不到`connection`Thread2 中的更改。这就是[Java 内存模型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:31:35.887

我终于解决了这个问题。拥有该代码就足够了

```
InetAddress inetAddress = InetAddress.getByName("0.0.0.0");
serverSocket = new ServerSocket(39999,0,inetAddress); 
```

我的客户说已连接。不需要像这样的代码

```
Socket neuSocket = serverSocket.accept(); 
```

由于 while 循环之外的 catch 块，整个线程被终止。Java 有时非常令人困惑。如果线程在声明 ServerSocket 时停止，则它不应再在该套接字上侦听。

# javascript - 使用 JavaScript 更新图像、捕获屏幕截图并保存到磁盘

> ID：13520641
> 
> 赞同：0
> 
> 时间：2012-11-22T22:10:50.870
> 
> 标签：javascript, jquery

**刷新图像 Src 内容并停止刷新**
嗨，我有一个每秒刷新“src”属性的功能。，现在我想当我点击按钮停止时，它会停止间隔，此外，制作一个按钮来拍照并将其保存到计算机，如快照。

```
<img src="http://someurl" id="image1" class="g" />
<button id="stop">STOP!</button>
<button id="capture">capture</button> 
```

[示例](http://jsfiddle.net/vmVTU/) 您可以在这里看到我写的内容并给我指示，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:16:20.707

**[Canvas2Image](http://www.nihilogic.dk/labs/canvas2image/)**插件可能会对您有所帮助。

使用 HTML5 画布元素，您可以使用 Javascript 即时创建各种酷炫的图形客户端。但是，画布图像（在所有浏览器中）不能像任何其他图像一样简单地保存到磁盘。

幸运的是，canvas 对象上有一个名为 toDataURL() 的简洁函数。此函数将图像数据编码为 base64 编码的 PNG 文件，并将其作为 data: URI 返回。

要在 IE 中工作，您需要一个画布支持库，例如[http://excanvas.sourceforge.net/](http://excanvas.sourceforge.net/)

也看看[这个问题。](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)

**编辑：**

刷新图像很简单：

```
 //Declare array of images
    var images = ['http://www.creativereview.co.uk/images/uploads/2012/10/1_press_image_l_for_the_lol_of_cats_l_maru_0.jpg',
                  'http://blog.naseeb.com/wp-content/uploads/2010/12/cute-cat.jpg',
                  'http://www.helpinghomelesscats.com/images/cat1.jpg'];

    var loop = 0;

    //This function will refresh image on specified interval 
    function refreshImages() {
        $('#myimage').attr('src', images[loop]);

        loop++;

        if (loop === images.length) {
            loop = 0;
        }
    }

    //Set Refresh time here
    var setInt = self.setInterval(function() {
        refreshImages();
    }, 1000);

    //This button stops the image refreshing
    $('#stop').click(function() {
        setInt = window.clearInterval(setInt);
    });​

    //Add image capture code here 
```

[工作演示](http://jsfiddle.net/hDRYX/5/)

# javascript - jquery语法提交表单

> ID：13520643
> 
> 赞同：0
> 
> 时间：2012-11-22T22:10:57.930
> 
> 标签：javascript, jquery

```
<html>
    <head>
        <script type="text/javascript" src="http://www.superpseudostocks.com/SPS/js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript">
            $("#form").submit(function () {
                alert("click");
            });
        </script>
    </head>
    <body>
        <div style="width:517px; margin-top:20px;height:260px;">
            <form id="form" action="javascript:void(0);" method="POST">
                <fieldset style="height:200px;" id="Withdraw">
                    <legend><b><font size="4" color=black>Deposit</font></b>
                    </legend> <font color="black" size=4>Deposit funds into system balance from registered bank account</font>
                    <br>
                    <br>
                    <div style="width:480px; height:20px; margin: auto;" id="ErrorBox"></div>
                    <br> <span class="tab2"></span>
                    <label for='amount'><font color="black"><b>Please enter an amount to withdraw from bank account</b></font> </label>
                    <br> <span class="tab3"></span>$
                    <input type='text' name='Amount' id='Amount' maxlength="50" size="40" />
                    <br>
                    <br>
                    <input style="width:100px; height:40px;" type='SUBMIT' name='Confirm' value='Confirm' />
                </fieldset>
            </form>
        </div>
    </body>
</html> 
```

我已经开始使用这段代码一段时间了，我看不出我做错了什么，我想也许我的 jQuery 没有链接，但它在同一个文件夹中......我不确定如果这是我的语法或不是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T22:12:14.633

您在表单存在之前绑定它，使用`$(document).ready`：

```
$(document).ready(function() {
    $("#form").submit(function() {
        alert("click");
    });
}); 
```

# c# - 谷歌驱动器。连接到不同的客户帐户，他们在哪里找到密钥和秘密？

> ID：13520644
> 
> 赞同：0
> 
> 时间：2012-11-22T22:10:58.870
> 
> 标签：c#, google-drive-api

我正在开发的程序的一部分是为我们的客户创建一些 PDF 文件，然后我想将其存储在客户自己的 Google 驱动器上。

为此，我需要他们的密钥和密码才能连接到驱动器，但是如何从 Google 驱动器界面找到 Google 驱动器帐户的密钥和密码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:13:41.037

这对我来说似乎是一个*非常*糟糕的主意。它被称为“秘密”是有原因的。

您应该做的是在*您的*云端硬盘帐户中创建文档，然后与您的客户共享它们。这样他们就可以访问文档（如果他们愿意，可以复制它们），但您无法访问他们的其余文档。

（注意：我在谷歌工作，但离云端硬盘很远。这个答案代表我的个人观点，而不是谷歌作为一家公司的观点。）

# sql - SQL Join 以选择具有一对多关系的查询

> ID：13520649
> 
> 赞同：-1
> 
> 时间：2012-11-22T22:11:27.970
> 
> 标签：sql, database, oracle

我正在尝试创建一个 sql 查询，我想从一个表中选择所有字段，并从另一个表中选择一个字段，它们通过 id 作为外键连接。

我几乎到了那里，但这会返回所有图像 ID。

```
select p1.pub_id,i1.image_id 
from pub p1, images i1
where p1.pub_id = i1.pub_id 
```

我只需要一张图像记录，最新的一张。任何想法都会很棒。我花了很长时间试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:20:52.017

因此，您花费数小时无法做到这一点，并且一旦将其发布在此处，您就可以解决。无论如何。

```
select p1.pub_id, i1.image_id 
  from pub p1, images i1
 where i1.image_id = (select max(image_id) from images where pub_id = p1.pub_id) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T05:56:50.893

```
select p1.pub_id,i1.image_id from pub p1, images i1where p1.pub_id = i1.pub_id(+) 
```

为甲骨文工作

# css - 仅在 CSS 两侧（左侧和底部）图像旁边居中文本的更好方法

> ID：13520652
> 
> 赞同：1
> 
> 时间：2012-11-22T22:11:51.370
> 
> 标签：css, image, text, center, dimensions

在图像的一侧或相对两侧（左/右或上/下）将文本居中非常容易，但我需要将一些文本文本沿图像左侧居中，并在底部居中一些文本。

我经历了几种解决方案，但每种解决方案都需要手动将一段文本或另一段文本居中。在下面的解决方案中，我选择在左侧手动应用垂直居中，因为在底部水平居中文本需要填充以随文本长度而变化。

Javascript会很容易。类似的东西

```
element.style.paddingTop = (Img_Height/2 - Txt_Height/2); 
```

但我很难相信没有纯 CSS 解决方案。

有没有更好的方法来完成下面这段代码的相同效果？在此处查看实际操作：http: [//jsfiddle.net/Gamil/yteBY/](http://jsfiddle.net/Gamil/yteBY/)

```
<div class="Preview">
    <p class="Preview" style="padding-top: 54px;">120 pixels high</p>
    <ul class="Preview">
        <li><img alt="big preview" src="http://placehold.it/160x120" /></li>
        <li>160 pixels wide</li>
    </ul>
</div>
<div class="Preview" style="padding-top: 30px;margin-left: 30px;">
    <p class="Preview" style="padding-top: 23px;">60 pixels high</p>
    <ul class="Preview">
        <li><img alt="big preview" src="http://placehold.it/80x60" /></li>
        <li>80 pixels wide</li>
    </ul>
</div> 
```

CSS：

```
.Preview {
    float: left;
}
ul.Preview > li {
    list-style: none;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:13:51.070

水平对齐确实很容易，垂直对齐有点棘手。[这是一篇关于垂直对齐的好文章](http://phrogz.net/css/vertical-align/index.html)

所以关于你的问题，这是第一个解决方案：[JSBIN](http://jsbin.com/aviruj/2/edit) 这个解决方案并不像我在 css 中那样完美：

```
.textC{
  position:absolute; 
  top:50%;
  left:50%;
} 
```

这意味着文本*从*左侧和顶部的 50% 开始。这不是您真正想要的（据我所知）。

使用一点 javascript，您可以获得文本的大小并将其准确地替换在图片的中心。[使用 javascript 查看 JSBIN 解决方案](http://jsbin.com/utavuy/1/edit)

编辑：这是一个新的解决方案，只使用 CSS：[fiddle](http://jsfiddle.net/5Pwbf/2/)

我只解释一段css代码

```
.block1{
  #position: absolute;
  display: table-cell;
  vertical-align: middle;
  top: 50%;
  left: 50%;
}

.block2{
  #position: relative;
  display: block;
  bottom: 50%;
  right: 50%;
  margin:auto;
} 
```

基本上添加`#`到位置会选择对象的中心而不是左上角。

感谢[这个网站](http://benalman.com/code/test/css-centering.html)，它真的暗示了我解决问题的正确方法！

# html - 带入 HTML5 样板的 960px 宽居中 div 在 iPhone 上延伸到屏幕外

> ID：13520659
> 
> 赞同：1
> 
> 时间：2012-11-22T22:12:34.263
> 
> 标签：html, ios, css, css-position, html5boilerplate

当我的 960px 宽居中站点的主要 widthfix div 被带入 HTML5 Boilerplate 时，它​​在 iPhone 上的行为异常。在 iPhone 上的 Safari 中，div 在 iPhone 上延伸到屏幕外。它在我的笔记本电脑屏幕浏览器和 HTML5 样板之外的任何地方都可以正常工作。

除了添加具有以下类的 widthfix div 之外，我还没有更改 HTML5 Boilerplate 中的任何内容：

```
#widthfix {
    position: relative; 
    width: 960px; 
    margin-left: auto; 
    margin-right: auto;
} 
```

...我刚刚解决了它可以通过删除来纠正：

元名称=“视口”内容=“宽度=设备宽度，初始比例=1.0”

从头。

我不知道这是否是最好的解决方案，所以如果有人有任何额外的意见，我会全力以赴。

但是，至少它似乎显示 OK。

# wpf - WPF 图像样式触发器 - 小问题

> ID：13520663
> 
> 赞同：1
> 
> 时间：2012-11-22T22:13:03.703
> 
> 标签：wpf, triggers

我对图像上的样式触发器有一个小问题。触发器确实改变了图像的来源，但是当它发生时，我失去了 streght="fill" 属性。我也尝试在触发器中设置它，但它似乎忽略了它。我在这里想念什么？

```
<Image x:Name="xBackground" 
        Height="99.5" 
        Width="271" 
        Stretch="Fill">
                <Image.Style>
                    <Style TargetType="{x:Type Image}">
                        <Setter Property="Source" Value="Green.png"  />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding HasAlarm}" Value="true">
                <Setter Property="Source" Value="Red.png" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image> 
```

# android - 如何定义LinearLayout组合

> ID：13520666
> 
> 赞同：0
> 
> 时间：2012-11-22T22:13:17.683
> 
> 标签：android, android-layout

我想为四个图像按钮创建一个布局。连续两个按钮，使其在布局中看起来像一个立方体。因为我想支持 API Level 8 我不能使用网格布局，所以我尝试了使用 LinearLayout 的组合。

一个水平方向的根 LinearLayout，它包含两个垂直方向的线性布局。这些包含我的按钮，但我没有按预期工作，只有一行有两个按钮可见。谁能帮帮我，谢谢

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/action_screen"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" 
        android:paddingTop="30px">

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

             <ImageButton
                 android:id="@+id/btn_start_cam"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:onClick="startCamAction"        
                 android:src="@drawable/photo_button" />

             <ImageButton
                 android:id="@+id/btn_photo_lib"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:onClick="startPhotoLibAction"
                 android:src="@drawable/library_blau" />

        </LinearLayout>
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

             <ImageButton
                 android:id="@+id/btn_start_barcode"
                 android:onClick="startBarcodeAction"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:src="@drawable/barcode_blau" />

             <ImageButton
                 android:id="@+id/btn_start_qr_barcode"
                 android:onClick="startQRcodeAction"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:src="@drawable/qr_code_blau" />

            </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:16:30.460

将两个子 LinearLayout 的高度设置为 wrap_content。否则，第一个 LinearLayout 将占据父布局的整个高度。

# video.js - Video.js 与 Flash 播放器的宽高比错误，直到切换全屏

> ID：13520667
> 
> 赞同：3
> 
> 时间：2012-11-22T22:13:32.770
> 
> 标签：video.js

在我切换全屏模式之前，我在 video.js swf 播放器中遇到了 video.js 的问题，其中视频的宽高比错误（两侧的信箱）。它以不正确的纵横比加载，当我进入全屏模式时，它仍然处于不正确的纵横比，但是当我退出全屏模式时，它进入正确的纵横比。如果我回到全屏模式，这是不正确的纵横比，但正确的纵横比仍然不在全屏模式。

有人有想法么？

谢谢！

# r - R sqldf 强制我的数字属性为字符

> ID：13520670
> 
> 赞同：2
> 
> 时间：2012-11-22T22:13:57.103
> 
> 标签：r, sqldf

我有以下 sqldf：

```
library(sqldf)
B <- sqldf(
  " select *
   , CASE
      WHEN Length = '1 day' THEN 1
      WHEN Length = '2 days' THEN 2
      WHEN Length = '4- 8 weeks' THEN 42
      WHEN Length = '26+ weeks' THEN 180
  END as lengthI
  from A
"
)
summary(B) 
```

我期待将 lengthI 作为数字，但不知何故我把它作为字符（“2”，“1”，）

我的问题是： 1\. 为什么 sqldf 没有按预期生成数字变量？2\. 有没有办法可以用 sqldf 强制输入长度类型？

非常感谢。

# c++ - 无法链接到共享库

> ID：13520672
> 
> 赞同：0
> 
> 时间：2012-11-22T22:14:00.037
> 
> 标签：c++, linux, hyperlink, g++, shared-libraries

我正在尝试编译一个最小的共享库并链接到它，现在已经失败了两个小时。这是所有代码：

```
// rect.h
class Rect{
  private:
    int width_, height_;
  public:
    Rect(int width, int height);
    int width();
    int height();
};

// rect.cpp
#include "rect.h"
Rect::Rect(int width, int height)
:width_(width), height_(height){}

int Rect::width() { return width_; }
int Rect::height() { return height_; }

// client.cpp
#include "rect.h"
#include <iostream>
int main() { 
  std::cout << Rect(1,2).width();
  return 0;
} 
```

这就是我尝试编译它的方式：

```
$ g++ -shared -o librect.so rect.cpp
$ g++ -L. -lrect -Wl,-rpath,'.' client.cpp -o client
/tmp/cc0Xe7ms.o: In function `main':
client.cpp:(.text+0x1a): undefined reference to `Rect::Rect(int, int)'
client.cpp:(.text+0x26): undefined reference to `Rect::width()'
collect2: error: ld returned 1 exit status 
```

该库编译得很好，并且 Rect 类从我所知道的正确导出：

```
$ nm -D librect.so 
0000000000201028 B __bss_start
                 w __cxa_finalize
0000000000201028 D _edata
0000000000201030 B _end
0000000000000738 T _fini
                 w __gmon_start__
00000000000005b8 T _init
                 w _ITM_deregisterTMCloneTable
                 w _ITM_registerTMCloneTable
                 w _Jv_RegisterClasses
0000000000000714 T _ZN4Rect5widthEv
0000000000000724 T _ZN4Rect6heightEv
00000000000006f0 T _ZN4RectC1Eii
00000000000006f0 T _ZN4RectC2Eii 
```

最奇怪的是，它编译得很好并且可以在我的工作计算机（Kubuntu 12.10 64bit）上正常工作，但无法在我尝试过的任何其他机器上正确链接（总共 4 个，所有 64 位 Ubuntu/Kubuntu 12.04 和 12.10）

我尝试了我能想到的一切。将详细选项传递给链接器表明确实成功找到了 librect.so。

有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:20:23.877

图书馆必须追随*本地*翻译单元：

```
g++ -L. -Wl,-rpath,'.' client.cpp -o client -lrect
#                                           ^^^^^^ 
```

它与链接器如何查找未解析的符号有关。如果您好奇，请在互联网上搜索大量相关信息。

# java - 提取句子中连续单词的正则表达式

> ID：13520676
> 
> 赞同：3
> 
> 时间：2012-11-22T22:14:26.507
> 
> 标签：java, regex

我试图在java中找到一个正则表达式，它将在句子中提取成对的连续单词，如下例所示。

**输入**：word1 word2 word3 word4 ....

**输出**：

*   单词1 单词2
*   字2字3
*   字3字4

ETC..

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:27:23.793

### Java代码：

```
Matcher m = Pattern.compile("(?:^|(?<=\\s))(?=(\\S+\\s+\\S+)(?=\\s|$))")
  .matcher("word1 word2 word3 word4");
while (m.find()) {
  System.out.println(m.group(1));
} 
```

### 输出：

```
word1 word2
word2 word3
word3 word4 
```

**[在此处](http://ideone.com/TIv5bT)**测试此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:57:50.480

这个给你：

```
public class Example {
    public static void main(String[] args) {
        String words = "word1 word2 word3 word4";
        String regex="\\w+\\s+\\w+";
        Pattern p = Pattern.compile(regex);
        Matcher matcher = p.matcher(words);
        while(matcher.find()){
            String found = matcher.group();
            System.out.println(found);
            String splitted = found.split("\\s+")[1];
            words = words.replace(found, splitted);
            matcher = p.matcher(words);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:35:41.383

也提供一个没有不合理复杂性的解决方案......

```
final String in = "word1 word2 word3 word4";
final String[] words = in.split("\\s+");
for (int i = 0; i < words.length - 1; i++)
  System.out.println(words[i] + " " + words[i+1]); 
```

印刷

```
word1 word2
word2 word3
word3 word4 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T22:15:33.850

你去：-

```
"\\w+\\s+\\w+" 
```

一个或多个单词，然后是一个或多个空格，然后是一个或多个单词。

* * *

**更新 ： -**

刚刚注意到上面的正则表达式错过了你的第二行输出。因此，您可以将字符串拆分为`space`，然后使用您的数组。

```
String[] words = str.split("\\s+"); 
```

然后为每对索引获取消息。

# php - 函数仅接受 6 个参数中的 2 个。Func_num_args 返回 2

> ID：13520678
> 
> 赞同：0
> 
> 时间：2012-11-22T22:14:41.867
> 
> 标签：php, function, arguments

我有一个奇怪的问题。基本上我有一个由 smarty 模板引擎调用的函数，它应该接受 6 个参数。实际上问题是，它只接受 2！

更奇怪的是，`func_num_args()`在那个函数内部调用也给了我......但是看看它

```
function smarty_modifier_truncate($string, $length = 80, $etc = '...', $break_words = false, $middle = false, $charset = 'UTF-8')
{
var_dump($break_words);
var_dump(func_num_args());

if (!$length)
    return '';

if (Tools::strlen($string) > $length)
{
    $length -= min($length, Tools::strlen($etc));
    if (!$break_words && !$middle)
        $string = preg_replace('/\s+?(\S+)?$/u', '', Tools::substr($string, 0, $length+1, $charset));
    return !$middle ? Tools::substr($string, 0, $length, $charset).$etc : Tools::substr($string, 0, $length/2, $charset).$etc.Tools::substr($string, -$length/2, $length, $charset);
}
else
    return $string;
} 
```

设置了其他参数，因为正在输出“中断词”，如果我更改它们，效果会很明显。真的很奇怪。有什么解决办法吗？

在本地 wamp 上运行的 PHP 版本 5.4.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:17:29.457

`func_num_args()`返回调用时*实际*传递给函数的参数的数量，而不是接受的参数的数量。那是不可能的，因为 PHP 总是接受任意数量的参数

```
function foo () {
  var_dump(func_num_args());
  var_dump(func_get_args());
}
foo(1, 'a', null, true); 
```

[http://codepad.org/nhqgb5kK](http://codepad.org/nhqgb5kK)

# android - 双状态按钮：显示当前状态还是下一个状态？

> ID：13520682
> 
> 赞同：2
> 
> 时间：2012-11-22T22:15:20.970
> 
> 标签：android, user-interface, android-actionbar

我有一个带有按钮的操作栏，可以在两个不同的视图（列表和树）之间切换。按钮应该显示 (a) 当前视图还是 (b) 如果用户单击按钮将显示的视图？

这是一个古老的 UI 问题，没有“正确答案”，只有 UI 标准，所以我试图了解 Android 中是否有任何标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:25:06.267

我同意“古老”的部分。我自己我仍然在质疑 - 当作为用户而不是开发人员时;-) - 当我点击它时，我面前的按钮会做什么：打开随机播放或关闭它。现在很高兴想出一个可行的答案。由于用户对当前演示文稿所处的状态（列表或树）有清晰的视觉线索，因此按钮将显示替代选项。然后用户知道有一个替代选项，并希望该按钮显示它将带用户到哪里。

对于更不清楚的情况，我仍然会采用这种方法。用户要么知道或者也许可以推断出应用程序的当前“状态”（“嘿，它现在播放一首完全不同的歌曲，所以它是随机播放的”）。所以这个按钮会让我进入另一种状态，即显示的状态。

为什么要显示应用程序已经在做什么，而不是显示按钮按下将把用户带到哪里？

# autoconf - Autoconf - 在 AC_INIT arg 列表中使用 m4/revision.m4 中的宏

> ID：13520683
> 
> 赞同：0
> 
> 时间：2012-11-22T22:15:24.230
> 
> 标签：autoconf

好的，我有一个定义了宏 REC_SVN_REV 的文件 m4/revision.m4。我想在 configure.ac 的 AC_INIT 的版本信息中使用它。但是在 AC_INIT 之前调用 AC_CONFIG_MACRO_DIR([m4]) 可以吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:56:24.657

```
m4_include([revision.m4])
AC_INIT([*******], [svn[]REC_SVN_REV], [i****@b*********.com], [*******-prealpha]) 
```

工作正常！

# jquery - 单击后更改按钮功能？

> ID：13520685
> 
> 赞同：0
> 
> 时间：2012-11-22T22:15:25.360
> 
> 标签：jquery

我点击了一个按钮，我想打开/关闭我的侧边菜单。我这样做了：

```
$("#middleleftopenclose").click(function() {
     $("#middleleft").css("width", 0);
     $("#middleleftopenclose").css("opacity", 1);
     $("#middleright").css("margin-left", 15);
}); 
```

我将如何使相同的按钮也单击打开菜单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:17:51.053

作为一个简单的解决方案，您可以使用一个布尔标志来存储侧边栏的当前状态，并在每次单击按钮时对其进行测试。

```
var sidebarVisible = false;

$("#middleleftopenclose").click(function() {
  if (sidebarVisible){
    // close sidebar
  }else{
    // open sidebar
  }
  // toggle boolean flag each time button is clicked
  sidebarVisible = !sidebarVisible;
}); 
```

我看到您实际上是在更改函数中元素的 css 属性...也许最好为每个状态创建具有适当属性的类，并在单击按钮时简单地交换类。[梅利伯恩](https://stackoverflow.com/questions/13520685/change-button-function-once-clicked#comment18509981_13520685)在评论中提到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:20:59.303

您可以使用 jQuery :visible 选择器来查看侧边菜单是否可见。如果可见则隐藏，如果不可见则显示。

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

```
$("#middleleftopenclose").click(function() {

     var visible = $("#SIDEMENU").is(":visible");

     if(!visible){

        // NOT VISIBLE - SO SHOW
        $("#middleleft").css("width", 0);
        $("#middleleftopenclose").css("opacity", 1);
        $("#middleright").css("margin-left", 15);

     }else{
        // VISIBLE - SO HIDE IT
        // WRITE YOUR CODE TO HIDE HERE
     }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T22:21:05.447

只需将您的 CSS 添加到类中，例如`.closedMenuLeft`, `.closedMenuLeftOpenClose`, `.closedMenuRight`，然后在单击时将其打开和关闭，如下所示：

```
$("#middleleftopenclose").click(function() {
    $("#middleleft").toggleClass("closedMenuLeft");
    $("#middleleftopenclose").toggleClass("closedMenuLeftOpenClose");
    $("#middleright").toggleClass("closedMenuRight");
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T22:36:55.060

尽管如此，`.toggleClass()`这将是完美的方式。它对更复杂的操作缺乏灵活性。

```
/* Aggregate in one CSS class, .active. */
.active #middleleft { width: 0; }
.active #middleleftopenclose { opacity: 1; }
.active #middleright { margin-left: 15; } 
```

```
$("#middleleftopenclose").click(function() {
  $("#middle").toggleClass("active");
}); 
```

考虑`#middle`作为这些元素的父节点。

或者，您可以利用该[`.toggle()`](http://api.jquery.com/toggle-event/)事件。（不要误以为[`.toggle()`](http://api.jquery.com/toggle/)动画。）

```
$("#middleleftopenclose").toggle(function() {
   // Show the element!
}, function(){
   // Hide the element!
}); 
```

这两个函数将在点击之间交替执行。这是一个内置的 jQuery 函数。

# javascript - 从 javafx 2.2 webengine 调用 firebug lite 方法

> ID：13520698
> 
> 赞同：4
> 
> 时间：2012-11-22T22:16:28.260
> 
> 标签：javascript, javafx-2, firebug-lite

我想在我的网络引擎中执行 Firebug lite，然后从脚本中调用一些方法。首先，我按照[此处](https://stackoverflow.com/questions/9398879/html-javascript-debugging-in-javafx-webview)所述执行脚本，并且工作正常。当我尝试从脚本调用并执行内部方法时，问题就开始了。首先，我在 webview 中有一个“退出”按钮，如果有按钮，我会调用方法 shutdown 来关闭脚本。下面是代码：

```
eng.executeScript("window.Firebug.shutdown();"); 
```

萤火虫立即从 web 视图中消失。然后我有另一个按钮“开始”，如果我想用下面的代码再次打开萤火虫，但没有任何反应。没有出现错误或异常，并且脚本似乎正确执行。

```
eng.executeScript("window.Firebug.startOpened=true;"); 
```

我也尝试了 initialize() 方法`eng.executeScript("window.Firebug.initialize();");`，然后我得到如下异常：

```
netscape.javascript.JSException: TypeError: 'undefined' is not an object
at com.sun.webpane.platform.WebPage.twkExecuteScript(Native Method)
at com.sun.webpane.platform.WebPage.executeScript(WebPage.java:1438)
at javafx.scene.web.WebEngine.executeScript(WebEngine.java:811)
at student.WebBrowser$2.handle(WebBrowser.java:126) 
```

我还想知道当用户单击 ShowInNewWindow 按钮并从 javafx 中的 JSObject 捕获事件并以新形式打开 firebug 时脚本中的哪个方法执行。

提前致谢。

# javascript - 在 Jquery/Ajax 导航 Wordpress 上更新应答器

> ID：13520701
> 
> 赞同：3
> 
> 时间：2012-11-22T22:16:42.477
> 
> 标签：javascript, jquery, ajax

我正在为 wordpress 网站做 ajax 导航。我`#content`用淡入淡出更新，这没关系，但我只想用我的新页面头更新我的头，我找不到！

```
$(document).ready(function () {

    //hash change
    $(window).hashchange(function () {

        //on retrouve le vrai lien
        var arg = window.location.hash.substring(3);
        var link = 'http://ladresse.graphsynergie.com/' + arg;

        $.ajax({
            url: link,
            processData: true,
            dataType: 'html',
            success: function (data) {
                data = innerShiv(data, false);
                var contenu = $(data).find("#contenu");

                //problem part
                var head = $(data).find('head').text();
                document.head = head;
                //problem part end

                $('#contenu').fadeOut('200', function () {
                    $(this).html(contenu.html()).fadeIn('200');
                });
            }
        });
    });
    //end

    //détection d'un hash onload
    if (window.location.hash.substring(3) != '') {
        $(window).trigger('hashchange');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:16:08.470

考虑到 .text() 只会检索包含在 html 标记中的“文本”，请查看[jQuery 文档。](http://api.jquery.com/text/)我认为您真正想要[的是使用 .html() 方法](http://api.jquery.com/html/)。

所以，我认为您可能想用以下代码替换这 2 行有问题的代码：

```
$("head").html($(data).find("head").html()); 
```

**更新**：

显然，所有浏览器在创建 DOM 对象时都会删除不在“正文”内的任何内容。问题是当你这样做时： "$(data)" jQuery 使用 "data" 变量的内容创建一个 DOM 对象，并且你的浏览器决定忽略所有不在 "body" 标记内的元素，因此在jQuery 处理“head”元素的内部 DOM 对象不再存在。所以你必须找到一个解决方法。

试试这个，将这些代码行放在“成功：函数（数据）{”行之后：

```
var headIni = data.toLowerCase().indexOf("<head");
var headEnd = data.toLowerCase().indexOf("</head>");
headIni = data.indexOf(">", headIni + 1) + 1;
var headHTML = data.substring(headIni, headEnd); 
```

然后，替换我最初为此建议的行：

> $("head").html(headHTML);

这应该可以完成这项工作。我确信必须有更优雅的方法来做到这一点，但希望这对你来说已经足够好了。

**更新 2：**

如果您点击[此链接](https://gist.github.com/742952)，您会找到更好的方法。只需添加您将在那里找到的库“jquery.ba-htmldoc.js”，然后执行以下操作：

```
$("head").html($.htmlDoc(data).find('head').html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:28:38.030

要覆盖“< head >”标签的内容，请使用

```
$("head").html('NEW STUFF IN HEAD'); 
```

# javascript - 无法让 setInterval 在给定的上下文中工作

> ID：13520702
> 
> 赞同：1
> 
> 时间：2012-11-22T22:16:49.960
> 
> 标签：javascript, object, setinterval

我已经尝试了无数不同的方法，并且花了太多时间试图解决可能过于简单的问题。出于某种原因，我无法使以下 setInterval 调用正常工作。它确实调用一次，但不是每 1000 毫秒调用一次。这将有助于一些关于为什么不是每 1 秒（1000 毫秒）调用一次警报的输入

```
<html>
<head>
<script>
function user(h){
this.userHunger = h;
this.userAction='Move';

this.start=function(){
    this.hungerClockStart();
};
this.hungerClockStart=function(){
    //setInterval(this.updateHungerScreen(),1000);
    this.hungerClock = (setInterval(alert(1),1000));
};

};
var user1=new user(100);
function displayUserHunger(u){
u.start();
}
</script>
</head>
<body>
<h1>Display a User's Hunger:<br></h1>
<div>
<h2 id = 'HungerBarVisual'> </h2>
<button onclick="user1.start()">Start</button>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:19:23.763

就像是：

```
setInterval(this.updateHungerScreen(),1000); 
```

表示您可能使用`setInterval`错误。

这里发生的是**返回值**将`this.updateHungerScreen()`作为函数调用。所以你可能想要这个：

```
setInterval(this.updateHungerScreen,1000); 
```

`this.updateHungerScreen`（没有括号！）是您要调用的函数。

* * *

同样`setInterval(alert(1),1000)`等价于`alert(1);setInterval(null,1000)`

你可能想要：

```
setInterval(function () {
    alert(1); // will get called every 1000ms
},1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:19:12.470

`setInterval`接受一个*函数对象*：

```
this.hungerClock = setInterval(func, 1000); 
```

如果要传递参数，则需要使用额外的匿名函数：

```
this.hungerClock = setInterval(function(){ alert(1) }, 1000); 
```

# javascript - Yii 注册核心脚本正在调用控制器名称

> ID：13520704
> 
> 赞同：1
> 
> 时间：2012-11-22T22:17:08.530
> 
> 标签：javascript, url-rewriting, yii, tinymce

我最近为 Yii 开启了 UrlManager 的路径版本。我正在运行 TinyMCE，这已经可以预见地中断了。我可以看到问题，但不知道如何解决。它正在使用控制器调用脚本-

```
http://localhost:8888/content_management/content/assets/js/jquery.js 
```

控制器称为内容，脚本包含在根目录的资产文件夹中。

脚本的正确路径是 -

```
http://localhost:8888/content_management/assets/js/jquery.js 
```

有谁知道如何阻止 Yii 通过控制器 ID 调用脚本？抱歉，如果这是显而易见的事情，我对 Yii 还是很陌生。

提前致谢，

缺口

我可能应该添加这个。这是我调用脚本的方式-

```
 Yii::app()->clientScript->registerCoreScript('jquery');
        Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl . '/assets/js/tinymce/jscripts/tiny_mce/tiny_mce.js', CClientScript::POS_HEAD); 
```

这些有什么明显的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:03:04.677

我不确定这是 UrlManager 问题吗？可能是不使用基本 URL 函数的情况：

```
Yii::app()->request->baseUrl 
```

这指向根目录，因此您可以像这样使用它：

```
<script src="<?php echo Yii::app()->request->baseUrl; ?>/js/my_javascript_file.js"></script> 
```

否则我认为这可能是一个 jQuery 问题。你自己加载 jQuery 吗？我建议强制 Yii 在主布局（或您用于此视图的任何布局）中加载 jQuery，如下所示：

```
<?php Yii::app()->clientScript()->registerCoreScript('jquery'); ?> 
```

我发现这解决了 Yii 的大多数 jQuery 问题。删除您可能手动放入 jQuery 的任何引用。此外，在加载 js 文件时，建议您使用**registerScriptFile**：

```
<?php Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl.'/js/my_javascript_file.js', CClientScript::POS_HEAD); ?>
<?php Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl.'/js/my_javascript_file.js', CClientScript::POS_READY); ?> 
```

根据您希望将其加载到就绪块还是头部，使用**POS_READY**或**POS_HEAD**

希望这可以解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:43:25.490

我找到了哪里出错了，或者至少找到了解决方法。

我换了——

```
Yii::app()->clientScript->registerCoreScript('jquery'); 
```

和-

```
 Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl . '/assets/js/jquery.js', CClientScript::POS_HEAD); 
```

# c# - 将鼠标移动到位置并左键单击

> ID：13520705
> 
> 赞同：14
> 
> 时间：2012-11-22T22:17:08.743
> 
> 标签：c#, mousemove, mouseclick-event, sendinput

我正在使用 C#、Framework 4（32 位）开发 Windows 窗体应用程序。

我有一个包含鼠标坐标的列表，我可以捕获它们。到目前为止，一切都很好。

但在某些时候，我想去那些坐标并左键单击它。

这就是它现在的样子：

```
for (int i = 0; i < coordsX.Count; i++)
{
    Cursor.Position = new Point(coordsX[i], coordsY[i]);
    Application.DoEvents();
    Clicking.SendClick();
} 
```

和 Clicking 类：

```
class Clicking
    {
        private const UInt32 MOUSEEVENTF_LEFTDOWN = 0x0002;
        private const UInt32 MOUSEEVENTF_LEFTUP = 0x0004;
        private static extern void mouse_event(
               UInt32 dwFlags, // motion and click options
               UInt32 dx, // horizontal position or change
               UInt32 dy, // vertical position or change
               UInt32 dwData, // wheel movement
               IntPtr dwExtraInfo // application-defined information
        );

        // public static void SendClick(Point location)
        public static void SendClick()
        {
            // Cursor.Position = location;
            mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, new System.IntPtr());
            mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, new System.IntPtr());
        }
    } 
```

但我收到了这个错误：

```
Could not load type 'program.Clicking' from assembly 'program, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' because the method 'mouse_event' has no implementation (no RVA). 
```

我真的不明白问题是什么......你们知道问题是什么吗？或者你知道更好的方法来做我想做的事吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T22:22:50.687

您是否包含以下行？

```
[DllImport("user32.dll")]
static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint dwData,
   UIntPtr dwExtraInfo); 
```

`mouse_event`这将从dll导入函数`user32`，这是您尝试在程序中使用的函数。目前，您的程序不知道 DLL 中的此方法，直到您指定它来自何处。

[PInvoke.net user32 Mouse Event](http://www.pinvoke.net/default.aspx/user32.mouse_event)网站对于这类事情的基础知识非常方便。

[Directing mouse events [DllImport(“user32.dll”)] click, double click](https://stackoverflow.com/questions/8739523/directing-mouse-events-dllimportuser32-dll-click-double-click)的答案对你的理解也有很大帮助。

这些`flags`是您要发送到`mouse_input`函数中的命令，在该示例中，您可以看到他在同一行中同时发送了这两个命令，这很好，因为该`mouse down`函数会将这些标志拆分并连续执行它们。`mouse up``mouse_event`

* * *

另请注意，此方法已被`SendInput`命令取代，这是一个很好的示例，`SendInput`可以`SetMousePos`在[此博客中找到](http://alala666888.wordpress.com/2010/09/17/simulate-mouse-event-using-sendinput-and-setcursorpos/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:22:49.570

我猜你错过了以下行

```
[DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)] 
```

# ios - XCode：如何在不删除所有文档的情况下删除 iPhone 上的调试应用程序？

> ID：13520707
> 
> 赞同：0
> 
> 时间：2012-11-22T22:17:20.723
> 
> 标签：ios, xcode, debugging

我发现 XCode 在复制新编译的应用程序时不会删除您从项目中删除的文件。

我有一个uiviewcontroller。它使用了一个 .xib 文件。然后决定不使用 .xib 文件，并将其从我的计算机中删除。但是当我运行应用程序时（即使在按下“清理”后），MyUIviecontroller.nib 文件仍在应用程序包中并导致问题。再加上一个人可以想到各种各样的其他问题。

理想的做法是仅完全删除应用程序，留下文档和首选项文件夹。您可以在 Organizer 中删除 XCode 中的文档文件夹，在模拟器上我可以在我想要的任何位置删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:18:34.573

在 Xcode Organizer 中找到您设备上的应用程序。`xcappdata`Xcode 将允许您以捆绑包的形式下载应用程序的数据，包括文档和首选项。然后从设备上完全删除您的应用程序并安装新版本。最后，使用 Organizer 将`xcappdata`包上传回设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:41:14.023

不确定首选项文件夹是否可写（我认为不是，只有文档和缓存目录）。

但是对于文档文件夹，您可以使用 NSFileManager contentsAtPath 方法来获取 NSData 对象。然后将此数据转换为字符串并将其发送到服务器，稍后您可以从中获取它。（如本文所述：[Upload Data To Server iPhone](https://stackoverflow.com/questions/9520970/upload-data-to-server-iphone)）

当您重新安装应用程序时，您可以获取字符串，转换为 nsdata 并写回 Documents。

有点痛苦，但如果你真的需要它可能会起作用。

# cuda - atomicCAS：块内的行为

> ID：13520709
> 
> 赞同：0
> 
> 时间：2012-11-22T22:17:39.897
> 
> 标签：cuda

我正在 CUDA 中做一些原子实验。我的大问号是，当在同一个块中运行的两个线程以原子方式访问同一个地址时，它们的行为如何。我用 atomicAdd 进行了一些测试，它以原子方式工作，但是当我使用 atomicCAS 尝试下面的代码时，结果不是我所期望的。有人有解释吗？

```
#include <cuda_runtime.h>
#include <iostream>
#include <cuComplex.h>
using namespace std;
__global__ void kernel(int * pointer)
{
    *pointer=0;
    *(pointer+threadIdx.x+1)=0;
    __syncthreads();
    *(pointer+threadIdx.x+1)=atomicCAS(pointer,0,100);
}
int main(int argc,char ** argv)
{
    int numThreads=40;
    dim3 threadsPerBlock;
    dim3 blocks;
    int o[numThreads+1];
    int * pointer;
    cudaMalloc(&pointer,sizeof(int)*(numThreads+1));
    cudaMemset(pointer,0,sizeof(int)*(numThreads+1));
    threadsPerBlock.x=numThreads;
    threadsPerBlock.y=1;
    threadsPerBlock.z=1;
    blocks.x=1;
    blocks.y=1;
    blocks.z=1;
    kernel <<<threadsPerBlock,blocks>>> (pointer);
    cudaMemcpy(o,pointer,sizeof(int)*(numThreads+1),cudaMemcpyDeviceToHost);

    for (int i=0;i<numThreads+1;i++)
            cout << o[i] << " ";

    cout << endl;

} 
```

在上面的代码 atomicCAS 在同一块内运行访问相同的地址以进行比较和交换......我的期望是只有一个 atomicCAS 会找到与 0 比较的值，而所有其他人会发现它 100，但奇怪的是输出我的程序是：

```
 100 100 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

即所有线程都找到要比较的值设置为0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T23:21:35.117

您已经颠倒了执行配置参数的顺序。是`<<<gridDim, blockDim>>>`，反之亦然。所以你要启动 40 个块，每个块有 1 个线程，而不是相反。

这就是为什么你会得到你看到的结果——因为每个块中只有一个线程在运行，`numThreads-1`所以数组中的最后一个值总是为零。

如果我交换订单，我会得到这个输出：

```
100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 0 100 100 100 100 100 100 100 
```

您可以看到除一个线程外的所有线程都按预期写入`100`，并且一个线程已写入。`0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:34:20.567

你有你的线程块并在你的内核调用中向后阻塞变量。

而不是这个：

```
 kernel <<<threadsPerBlock,blocks>>> (pointer); 
```

做这个：

```
 kernel <<<blocks, threadsPerBlock>>> (pointer); 
```

然后你会得到正确的输出。

# linux - 需要性能计数器信息

> ID：13520711
> 
> 赞同：2
> 
> 时间：2012-11-22T22:17:41.520
> 
> 标签：linux, performance, linux-kernel, performancecounter, perfmon

我需要了解性能计数器如何为我的研究项目工作。我已经了解硬件如何支持事件监控。英特尔手册描述了芯片上的性能监控单元如何帮助获取计数器。我还了解了 MSR 模块如何获取各种事件的 msr 寄存器信息。

我需要学习以下内容。

1) 性能监控工具如何同时用于多个流程。我认为所有寄存器将在上下文切换期间保存，并在进程再次启动时加载。浏览互联网我得到了类似“pfm_context_load”和“pfm_context_unload”的东西，但它没有太多信息......-> **“我需要有关其工作原理的更详细信息，因此请提供一些链接、文档以帮助我理解”**

2）性能计数器在虚拟环境中如何工作？在这种环境下测量计数器有什么问题？我浏览了几篇论文并获得了一些信息，但需要更多详细信息。

因此，如果有人可以指导我提供有关这些主题的一些文档，或者至少指导我应该在哪里搜索所有这些信息，这将是一个很大的帮助！...

如果这不是正确的论坛，那么请引导我到正确的地方..

谢谢

阿努普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:03:36.093

这两个问题更多的是关于软件支持（操作系统）而不是性能计数器本身。我建议您深入研究 linux 内核中的 perf_event api，因为 linux 世界中的大多数其他性能监控工具（如 PAPI）都将它用作子系统并且它是开源的。

介绍自己的一些步骤是：

1.  [您可以从本教程](https://perf.wiki.kernel.org/index.php/Main_Page)中了解一些有关该工具的信息。
2.  了解[API](http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html)。
3.  然后你应该进入[实际的实现](http://lxr.free-electrons.com/source/include/uapi/linux/perf_event.h?v=3.7#L463)。
4.  请查阅 linux 邮件列表。

性能计数器是一个非常有趣的话题，祝你好运！

# c - 在 C 中读取 dat 文件

> ID：13520719
> 
> 赞同：-2
> 
> 时间：2012-11-22T22:18:38.900
> 
> 标签：c, fread

我想知道是否可以读取我没有创建的 dat 文件。据我所知，该`fread`函数需要一个结构记录，但由于我没有创建这个 dat 文件，所以我不知道该记录有哪些字段。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:22:38.730

这是完全可能的。[阅读手册](http://linux.die.net/man/3/fread)会发现，`fread`它只需要一个指向它尝试读取数据的内存的指针，并返回它成功读取的字节数。

确保以二进制模式打开文件。

例如：

```
FILE * fp = fopen("somefile.dat", "rb");

char buf[10];

size_t n = fread(buf, 10, 1, fp);

if (n > 0)
{
    /* we succeeded at reading n bytes,
     * which are now in buf[i] for i in [0, n)
     */
} 
```

在实际代码中，您通常会根据序列化格式读取单个片段，或者如果您想读取整个文件内容，您将有一个循环：

```
char buf[4096];

for (size_t n; (n = fread(buf, sizeof buf, 1, fp)) != 0; )
{
    /* process buf[i] for i in [0, n). For example: */

    for (size_t i = 0; i != n; ++i)
        printf("0x02X ", (unsigned char)(buf[i]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:20:46.723

.dat 文件是什么？是的，您可以读取二进制文件，并且看起来您理解它。

但是由于您的目标不仅仅是读取文件，而是“解析”它，因此您需要熟悉它的结构才能知道在哪里查找数据，显然您不熟悉文件的结构。

# f# - Unchecked.defaultof 在列表中

> ID：13520720
> 
> 赞同：25
> 
> 时间：2012-11-22T22:18:41.593
> 
> 标签：f#

考虑：

```
> Unchecked.defaultof<list<int>>;;
val it : int list = null
> 2 :: 1 :: Unchecked.defaultof<list<int>>;;
val it : int list = [2] 
```

这种行为背后的原因是什么？我希望最终列表是 [2;1] 或引发异常。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-23T01:01:26.787

这是一个非常了不起的问题。我查看了 F# 列表的编译方式并解释了行为。我不会认为这是错误（这就是为什么`defaultof`在`Unchecked`模块中，它可能会烧毁您的计算机！）

首先，空列表`[]`不像`null`F# 2.0 中那样表示，因为那样您将无法在空列表上调用方法 - 这会破坏很多事情（例如将空列表传递给任何`Seq`函数）。顺便说一句，该`None`值*表示*为`null`效率，这意味着即使它有意义`option<'a>`也无法实现接口。`seq<'a>`

因此，F# 使用特殊值`list.Empty`来表示空列表。现在该值是与表示非空列表的值相同类型的实例（类型为`FSharpList<'T>`）。唯一的区别是实例的`head`和`tail`字段都是`null`.

现在，您也许可以看到这是怎么回事 - 一个空列表本质上被编译为该字段所在的对象`this.tail`（`null`并且该`this.head`字段也是`null`如此，但这并不重要）。

当字段为时，该`list.Tail`属性将引发异常（因为这意味着您`this.tail`正在`null`获得一个空列表的尾部 - 这是一个错误），但还有一个内部属性`list.TailOrNull`无需检查即可返回值并用于编译模式匹配。

例如，这是一个简单的`iter`函数：

```
let rec iter (xs:int list) = 
  match list with
  | x::xs -> Console.WriteLine(x); iter xs
  | [] -> () 
```

这被编译为以下 C# 代码：

```
if (list.TailOrNull != null) {
  Console.WriteLine(list.HeadOrDefault);
  iter(list.TailOrNull);
} 
```

这通过检查其是否为来检查是否为`list`空列表。如果是，则它知道当前值是表示空列表的值（并且它不打印它，因为它假设这也是）。`list.TailOrNull``null``list``list.Empty``HeadOrDefault``null`

如果您使用显式`defaultof`创建`null`值，则为`42::null`您提供一个对象 where `TailOrNull`is `null`but `HeadOrDefault`is `42`。这就是为什么不打印值的原因。

**TL;DR** - 不要`Unchecked.defaultof`与 F# 类型一起使用。你永远不知道会发生什么。

# asp.net - 如何在aspx中将服务器代码与sql查询结合起来

> ID：13520722
> 
> 赞同：0
> 
> 时间：2012-11-22T22:19:10.863
> 
> 标签：asp.net

我不知道如何插入对 GetConstraints 的调用 - 它设置了 where ... 下面的代码在`<%=selec...`

```
 <asp:SqlDataSource ID="OrdersSqlDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ApplicationServices %>"

  <%="SelectCommand=\"SELECT Id , IsResolved, Feedback, IsCanceled, RatingFromUser, SubmitionTime, IsPendingResponse, IsReceived, AllowAutomaticDIspatching FROM OrderSet"+GetConstraints() %>+"\"" >
  </asp:SqlDataSource> 
```

谢谢

# erlang - 如何在 Erlang/OTP 中将主管的孩子 pid 共享给另一个孩子

> ID：13520727
> 
> 赞同：7
> 
> 时间：2012-11-22T22:19:22.870
> 
> 标签：erlang, erlang-otp

在我的 Erlang/OTP 应用程序中，我有一个`one_for_all`主管 ( **sup** ) 和几个孩子。其中一个孩子（有行为的**child1**`gen_server`）应该能够向另一个孩子（有行为的**child2**`supervisor` ）发送消息。当然，我可以注册它，但用多余的名称堵塞全局范围似乎不是一个好主意。

因此，使这种交互成为可能的唯一方法是为 child1 提供**child2**的**pid**。说到做到。有`supervisor:wich_children/1`适当功能的调用。只需将**sup**的 pid 作为参数传递给**chidl1**，调用`which_children`,`child1:init`并... 陷入僵局。**sup**正在等待**child1**开始，**child1**正在等待**sup**子描述：

```
init(SupPid) ->
    Descriptions = supervisor:which_children(SupPid),
    ... . 
```

这可以通过以下方法解决：

```
init(SupPid) ->
    gen_server:cast(self(), initialize),
    ... .

handle_cast(initialize, State) ->
    Descriptions = supervisor:which_children(SupPid),
    ...  % Generating new state containing desired pid
    {noreply, NewState}. 
```

但是，我对这个解决方案并不满意。

问题是：根据 OTP 设计原则，监督树成员之间最常规的交互方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T23:41:56.277

当然，您不能在主管尚未启动所有子项时向主管询问其子项：)

实际上，注册（在本地，使用 erlang:register()）并不是一个坏主意。此外，如果在 child1 中处理原始 pid，您应该手动设置对 child2 pid 的监控，以便能够对可能的崩溃等做出反应，但是注册后您只需直接按名称询问即可。

如果没有注册，你可以推迟通知孩子，直到 supervisor:start_link 被调用：

```
start_link() ->
    R=supervisor:start_link({local, ?SERVER}, ?MODULE, []),

    %% Here supervisor is started so you can notify its children
    R. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:45:00.913

这在很大程度上取决于您的业务逻辑，但如果担心阻塞全局范围对您来说是有意义的，我的建议是您考虑您正在使用的监督策略。

当两个对等进程需要以这种方式关联时，我在这种情况下看到的是，创建了一个额外的控制器进程来管理这种关联，并使用 simple_one_for_one sup 来生成两个对等进程之一（gen_server最有可能的）。当使用进程注册是一个问题时，可以再次使用这种技术，例如当您将有许多运行相同代码的 gen_servers 实例时。

该技术基本上包括使用 simple_one_for_one 主管来生成您的 gen_server。基本上发生的情况是，当启动时（simple_one_for_one sup）不会立即产生任何子进程，但只有在您明确调用`supervisor:start_child(Sup, List)`.

然后，您的 child2 初始化逻辑（甚至在某些时候您的业务逻辑）可以通过 生成 gen_server`supervisor:start_child(Sup, List)`并提供 child2 Pid，以便他们可以轻松地进行通信。

额外的控制器进程保留了您的 gen_server 之间的关系的字典，由一些唯一性标识，但避免了全局空间阻塞，因为这只是控制器的本地。然后，您可以要求您的控制器在您的逻辑上的任何时候分配或取消分配此关系。

因此，监督树看起来像：

![监督树](../Images/eb85641937c24aebcc0949c7e256fd05.png)

您可以在 github上的[tinymq](https://github.com/evanmiller/tinymq)项目中使用此实现来阅读代码

如果您以前从未使用过 simple_one_for_one 主管，则子规范可能有点棘手，请记住，您将通过`supervisor:start_child(Sup, List)`附加到 Args 的列表将 child2 的 pid 传递给您的 gen_server，您在儿童规格

[simple_one_for_one 主管](http://www.erlang.org/doc/design_principles/sup_princ.html#id72282)

我的两分钱！

# java - 适用于 Applet 或 Android 的 Java 中的 Red5 客户端

> ID：13520729
> 
> 赞同：1
> 
> 时间：2012-11-22T22:19:47.213
> 
> 标签：java, android, applet, video-streaming, red5

有没有人有为red5开发java客户端的经验？它在 flash/flex 中是如此简单，但在 java 中它似乎真的很复杂。

我使用用于 debian 的 red5-server 软件包的最新稳定版本 0.9.1。所有演示内容都运行良好，我也能够创建一个用于实时发布和订阅的 flex 客户端。

我很惊讶订阅者也可以在网络浏览器中使用我的 htc（Android 2.2.1）。广播公司没有 :-(。我认为 cam 存在一些问题或限制。

但是，由于 android 不再支持 flash（真可惜），我需要找到其他解决方案。我担心 HTML5 和 Javascript 在这个时候不是一个好的选择，所以我认为 java 是实现客户端广播和订阅的最佳方式，将来应该可以工作。你怎么看？

我找到了[http://red5.googlecode.com/svn/java/client/trunk/](http://red5.googlecode.com/svn/java/client/trunk/)并在 eclipse 中编译了它。但它似乎不适用于 red5-server 0.9.1。我在调试器中遇到奇怪的错误，red5 日志说：

```
[Red5_Scheduler_Worker-1] WARN  o.r.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 192.168.1.101 : 60869 to null (in: 3073 out 3073 ), with id 10340902 due to long handshake 
```

也许握手细节发生了变化，客户端是 SVN 的最新版本，我认为是为版本 Red5 1.0 设计的。

然而，我在 Java 上挣扎了很多时间，现在是时候向社区提问了。我寻找为安卓手机和网络浏览器创建解决方案的最佳方式。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:09:12.223

我想你可以参考 Paul Gregoire 的博客。他是 Red5 项目的开发人员，他已经实现了一些（至少是概念验证）客户将相机流式传输到 Red5。 [http://gregoire.org/2012/01/17/android-market/](http://gregoire.org/2012/01/17/android-market/)

你也可以简单地搜索“RTMP Android”，你会发现很多东西。我猜我不需要在这里复制那些链接。

塞巴斯蒂安

# c# - 如何将对象数组序列化为 JSON 字典？

> ID：13520731
> 
> 赞同：0
> 
> 时间：2012-11-22T22:20:17.413
> 
> 标签：c#, json, json.net

我需要将一组对象序列化为 JSON 字典。

像这样的数组项：

```
class Entry {
    public string Id{get;set;}
    public string Value{get;set;}
} 
```

所以像数组一样

```
var arr = new[]
    {
        new Entry{Id = "one", Value = "First"},
        new Entry{Id = "two", Value = "Second"},
        new Entry{Id = "tri", Value = "Third"},
    }; 
```

我希望被序列化如下：

```
{
    one: {Title: "First"},
    two: {Title: "Second"},
    tri: {Title: "Third"}
} 
```

可能吗？ContractResolver附近的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:27:00.297

使用[Json.Net](http://json.codeplex.com/)

```
string json = JsonConvert.SerializeObject(
                       arr.ToDictionary(x => x.Id, x => new { Title = x.Value })); 
```

或 [JavaScriptSerializer](http://msdn.microsoft.com/library/system.web.script.serialization.javascriptserializer.aspx)

```
string json2 = new JavaScriptSerializer()
             .Serialize(arr.ToDictionary(x => x.Id, x => new { Title = x.Value })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:25:16.683

使用`JavaScriptSerializer`：

```
var keyValues = new Dictionary<string, string>
           {
               { "one", "First" },
               { "two", "Second" },
               { "three", "Third" }
           };

JavaScriptSerializer js = new JavaScriptSerializer();
string json = js.Serialize(keyValues); 
```

# javascript - 具有动态高度的动态 iframe

> ID：13520732
> 
> 赞同：1
> 
> 时间：2012-11-22T22:20:20.003
> 
> 标签：javascript, html, iframe, dynamic, height

我的问题如下：我在大学的一群人中，正在编写网页，我们希望将其组织为：我们有一个标题，一个菜单，左侧有另一个菜单，右侧有显示内容。

我们将从几个 .html 文件中获取此内容，因此我们将尝试使用 iframe。问题是，我们已经解决了如何让它加载我们想要的任何东西，但我们希望它能够加载一个小页面或一个更大的页面，并调整自身的高度。（iframe 应该能够在不刷新整个页面的情况下更改源和高度）

所以，我的问题是，如何让它在 Y 轴上自动调整大小？（宽度是固定的并且可以）。我们对 JavaScript 了解不多（绝对不是 PHP），所以无论哪种方式，如果可能的话，我都在寻找一种复制和粘贴解决方案，它适用于所有主要浏览器。

我会说我在互联网上尝试了一些例子，但它们似乎都不起作用。

（这都在同一个域中，假设 /index.html 是整个页面，/content.html 是 iframe 内部的 wen）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:33:20.297

您可以像这样在父级中调用标准函数

```
parent.func( newHeight); 
```

然后在iFrame的父级中定义函数

```
function func( newHeight ) {
    // resize iFrame
} 
```

因为您在同一个域上，所以这应该可以工作。

# ruby-on-rails - 使用 Squeel gem 查找多个时间段

> ID：13520733
> 
> 赞同：1
> 
> 时间：2012-11-22T22:20:22.457
> 
> 标签：ruby-on-rails, ruby, squeel

我有一个`Planning`带有`start_time`属性的模型。假设我想获取上午 9 点到 12 点之间或下午 6 点到 11 点之间的所有计划。

基本上我会这样做：

```
Planning.where do 
     (start_time >= @start_time[0]) & (start_time <= @end_time[0]) 
     | 
     (start_time >= @start_time[1]) & (start_time <= @end_time[1])
end 
```

问题是时隙的数量各不相同......有什么想法吗？

如果有帮助，我会使用 Squeel gem。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:30:52.807

你可以在街区内做任何你想做的事`where`；但是您必须在最后返回实际查询，因为这将用作 where 子句。

所以，给定一个这样的时间数组：

```
times = [ [ '09:00:00', '12:00:00' ], [ '18:00:00', '23:00:00' ] ] 
```

这是一个详细的解决方案：

```
Planning.where do
  query = nil

  times.each do |a,b|
    q = (start_time >= a) & (end_time <= b)

    if query
      query |= q
    else
      query = q
    end
  end

  query
end 
```

这是一个更聪明的解决方案：

```
Planning.where do
  times.map { |a,b| (start_time >= a) & (end_time <= b) }.reduce(&:|)
end 
```

两者都生成以下 SQL：

```
SELECT "plannings".* FROM "plannings"
WHERE ((
  ("plannings"."start_time" >= '09:00:00' AND "plannings"."end_time" <= '12:00:00')
  OR
  ("plannings"."start_time" >= '18:00:00' AND "plannings"."end_time" <= '23:00:00')
)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:50:07.413

你能复制并粘贴你的 ruby​​ 代码生成的 SQL 吗？

编辑

好的，现在我了解您的问题，并且不清楚。如果你想保持代码的可读性，你应该在这种情况下使用 ARel 而不是 squeel（至少不是为此而设计的 DSL）。您应该能够应用地图功能，然后使用 OR 连接所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:31:25.547

Squeel where() 方法返回一个 AR:Relation，不是吗？

然后，您应该能够链接 where() 调用：

```
finder = Planing.scoped 
time_slots.each do |start_time, end_time|
    finder = finder.where{(start_time >= my{start_time}) & (start_time <= my{end_time}) }
end 
```

我没有尝试过这段代码，但我看不出它为什么不起作用

编辑：正如您所说，这会将条件与 AND 联系起来，而不是 OR

你可以试试以下吗？

```
Planning.where do 
    time_slots.inject(false) do |memo, time_slot| 
        memo | (start_time >= time_slot.first) & (start_time <= time_slot.last)
    end
end 
```

使用 squeel 的 instance_eval 可能有点太神奇了，但试一试:)

# java - 我们如何为后缀树中的父子关系使用链表？

> ID：13520743
> 
> 赞同：0
> 
> 时间：2012-11-22T22:21:09.960
> 
> 标签：java, data-structures, suffix-tree

根据[维基百科](http://en.wikipedia.org/wiki/Suffix_tree)，实现后缀树时的一个重要选择是节点之间的父子关系。最常见的一种是使用称为兄弟列表的链表。

这在 Java 中是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:57:38.690

在同级列表中，每个节点恰好有两个引用：`first-child`和`next-sibling`。这使您可以通过从 开始遍历节点的所有子节点`first-child`，然后跟随`next-sibling`直到您到达 is 的子`next-sibling`节点`null`。我不明白为什么 Java 会与任何其他编程语言有任何不同。

有趣的是，这种表示实际上与二叉树的标准表示相同，其中`left`is spelled`first-child`和`right`is spelled `next-sibling`。这说明了`1-1`具有相同节点数的二叉树和一般树之间的关系。（一开始可能看起来矛盾，但请注意，二叉树可能只有一个`left`孩子，或者只有一个`right`孩子，而这些被认为是不同的。相比之下，在一般树中，节点只有一种方式拥有一个孩子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T22:28:01.887

父节点有一个子节点列表（作为数组、双链表等）每个子节点都有一个到其父节点的链接。遍历非常简单，因为您不需要堆栈。

# java - 如何在 Mac OS X Mountain Lion 上重新安装 Java 6

> ID：13520745
> 
> 赞同：3
> 
> 时间：2012-11-22T22:21:14.027
> 
> 标签：java, android, macos, java-7, java-6

我最近在我的 Mac 计算机上安装了 Oracle 的 Java 7 for OS X Mountain Lion（版本 10.8.2）。在我开始做 Android 开发之前我对此很满意，这给我使用 Java 7 带来了错误。现在我想安装 Java 6，这样我就可以将它用于 Android 开发，但我到处都在寻找一种方法来做这并且我无法找到任何解决方案。甚至可能吗？我能做些什么？

我尝试下载[此 Java for OS X update](http://support.apple.com/kb/dl1421)，但是当我尝试安装它时，我只收到以下消息：

```
A newer version of this package is already installed. 
```

然后安装程序关闭，就是这样。

# java - 在单独的 for 循环中重复使用该值作为 int 是不好的做法吗？

> ID：13520747
> 
> 赞同：0
> 
> 时间：2012-11-22T22:21:21.170
> 
> 标签：java, for-loop

非常简单的问题，但我无法在任何地方找到答案。常见的编码实践有一个以 i 为 int 的 for 循环，如下所示：

```
for (int i = 0; i < something; i++) 
```

如果您嵌套了 for 循环，您显然需要您的内部循环具有不同的变量名称，以区分它们。

但是，如果您在一个方法中有多个未嵌套的 for 循环，那么将它们中的每一个都声明为 int i 是不好的做法吗？我知道他们在该特定声明之外没有任何范围，所以我知道它不会导致任何错误，但这是一种好的做法吗？

****编辑：*** *大家好。感谢您出色（而且非常迅速！）的答案。我希望我可以选择所有作为答案。我不认为这是不好的做法，只是想确定一下。感谢你的帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:23:34.880

如果它们没有嵌套，那么就不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:24:42.480

不，这不是坏习惯。`i`是循环索引的传统变量名。但是，您应该问问自己，一个包含多个循环的方法是否不会做太多事情，并且不应该将其拆分为多个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:25:01.527

只要它的范围是循环（即在 for 语句中定义），那么这不是坏习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T22:25:06.270

这不是一个不好的做法，您可以将变量命名为相同（不会出现编译器错误），因为这些变量仅被限制在该块内。事实上，广泛使用的循环变量被命名为`i`, `j`, `k`, `a`,`b`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T22:25:08.810

这非常适合在 sequentiell for Loops 中使用 int i。只要它们是在循环内定义的。
如果您以其他方式使用它，则更容易出现错误。

# optimization - I/O 后 OpenCL 空闲 GPU

> ID：13520756
> 
> 赞同：1
> 
> 时间：2012-11-22T22:22:24.143
> 
> 标签：optimization, opencl, python-idle

我有一个运行良好的应用程序有一个奇怪的问题，但有一些不合理的性能损失。该应用程序和代码是私有的，但我可以在这里给出它的一些详细工作模式（简化了很多）。

我的应用程序使用 4 个内核：

```
 1\. Preprocesses

  Reads "I" buffer; Writes to "T" buffer

 2\. Process

  Reads + Writes "T" buffer

 3\. Parse & Preprocess

 Reads + Writes "T" buffer,  & writes "O" buffer

 4\. Check

  Reads "O" buffer; Writes to "C" buffer (result of Check) 
```

所有缓冲区都保存到设备中。“I”和“O”缓冲区各为 200kB 缓冲区。“T”缓冲区大约 20MB，从未在 GPU 之外使用。“C”缓冲区只是给出结果的 4 字节 int。

该系统以 3 种不同的形式运行：

```
 - Pure iterative: Write,1,2,3,2,3,2,3,.....,2,3,Read
 - Iterative + Reading intermediate: Write,1,2,3,Read,2,3,Read,2,3,.....,2,3,Read
 - Iterative + Check: Write,1,2,3,4,Read(C),2,3,4,Read(C),2,3,.....,2,3,Read 
```

在第一种模式下，所有内核都立即排队，我对该模式没有任何问题，只是以最大 GPU 利用率（和 CPU）运行。其他 2 种模式使用内核的渐进式排队，如果读取的值不正确，则将一组新的内核排队。

然而，在第二种和第三种模式中，每次从设备读取后，设备都会保持空闲一段时间。我已经对程序进行了概要分析，每次读取后都存在没有 GPU 使用时间的小间隙（100us）。在写入部分之后不会发生这种情况。我为 I/O 和执行创建了 2 个单独的队列以启用并行化，但没有运气。

差距是这样的（我明天可以发布视觉分析器的屏幕）：

> *   写,1,2,3,读,2, **GAP** ,3,Read,2, **GAP** ,3,.....,2,3,读

据我测试，此问题出现在 HD5770、HD5570、GTX570、C2050、C2070 上。在windows和linux中。**但是在 Quadro 2000M 中运行得非常好，甚至可以进行并行内核执行和 I/O！**

有什么我想念的吗？固定内存是否比手动 clCreate + clWrite/Read 更快？它能解决这个问题吗？我意识到我可以在该间隙中多次运行内核 2，但无法运行内核 3，内存“O”是否以某种方式受到保护并阻止内核 3 运行？

PD：我在模式中有一些 clWaitForEvents 有差距。我测试了删除它们，差距缩小了大约 50%，但 CPU 使用率从 20% 增加到 100%。这可能与 CPU 或调度程序/驱动程序有关吗？

# c - 我的 else..if 声明中有错误

> ID：13520760
> 
> 赞同：-2
> 
> 时间：2012-11-22T22:22:45.050
> 
> 标签：c, syntax, if-statement

我在我的程序中使用了 else..if 语句来检查验证中是否满足某些条件，但我认为我的 else..if 语句的布局有一个错误，我似乎无法确定。有人可以吗指出我正确的更正或给我一些有用的提示，告诉我在这种情况下我应该做什么？谢谢。

```
void validatePass()
{
    FILE *fptr;
    char password[MAX+1];
    int iChar,iUpper,iLower,iSymbol,iNumber,iTotal,iResult,iCount;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf("\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
    printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
    printf("\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf("\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
    printf("\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");

    //gets user password input

    printf("\n\n\t\tEnter your password following password rules: ");
    scanf("%s", &password);

    iChar = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);

    if(iUpper < 2)
    {
        printf("Not enough uppercase letters!!!\n");

    }

    else if(iLower < 2)
    {
        printf("Not enough lowercase letters!!!\n");

    }
    else if(iSymbol < 1)
    {
        printf("Not enough symbols!!!\n");

    }
    else if(iNumber < 2)
    {
        printf("Not enough numbers!!!\n");

    }
    else if(iTotal < 9 && iTotal > 15)
    {
        printf("Not enough characters!!!\n");

    }

    iResult = checkWordInFile("dictionary.txt",password);

    if( iResult == gC_FOUND )
    {
        printf("\nFound your word in the dictionary");
    }

    else if
    {
        printf("\nCould not find your word in the dictionary");
    }

    iResult = checkWordInFile("passHistory.txt",password);

    if( iResult == gC_FOUND )
    {
        printf("\nPassword used");

    }

    else if
    {
        printf("\nOk to use!");
    }

    printf("\n\n\n Your new password is verified ");
    printf(password);

    //writing password to passHistroy file.

    fptr = fopen("passHistory.txt", "w");   // create or open the file
    for( iCount = 0; iCount < 8; iCount++)
    {
        fprintf(fptr, "%s\n", password[iCount]);
    }

    fclose(fptr);

    printf("\n\n\n");
    system("pause");

}//end validatePass method 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T22:26:20.867

没有`else if`，只有`else if () ...`。好吧，说得好听一点，`if`事后你不能没有条件。否则，您只是让编译器想知道“如果是什么？”。

### 错误的

```
if (...)
{
}
else if
{
    printf("\nCould not find your word in the dictionary");
} 
```

### 好的

```
if (...)
{
}
else 
{
    printf("\nCould not find your word in the dictionary");
} 
```

### 还可以

```
if (...)
{
}
else if(condition)
{
    printf("\nCould not find your word in the dictionary");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:27:06.053

它的：

```
if (exp1)
  action1;

else if (exp2)
  action2;

else
  actionelse; 
```

# mysql - mysql php关键字搜索

> ID：13520764
> 
> 赞同：1
> 
> 时间：2012-11-22T22:23:12.720
> 
> 标签：mysql

我正在尝试在标题、作者和文本三个字段上创建关键字搜索。我希望它们按相关性排序，所以我给任何领域的匹配一分。我还有一个名为标签的表，它在每一行中存储一个故事的特定标签。如果标签匹配，我会添加标签使用次数的相关性。当用户输入搜索时，他可以输入一系列关键字。我正在考虑分解字符串并使用 for 循环为每个关键字添加下面 select 语句中的代码。这似乎相当复杂，所以我想知道是否有更好的方法来做到这一点？

```
select text, ((case when S.sid in (select sid from tags where tahname like 'db') 
           then (select uses from tags T where S.sid = T.sid and tagname like 'db') +
              (case when title like '%db%' then 1 else 0 end) +
              (case when author like '%db%' then 1 else 0 end) +
              (case when text like '%db%' then 1 else 0 end)) as relevance

from stories S
order by relevance desc 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:30:22.260

是的，有更好的方法来进行关键字搜索。

您使用的方法将强制进行*表扫描*，这意味着它必须读取表中的每一行。根据您最终将在表中拥有多少数据，这可能比使用专门的全文索引方法慢数百或数千倍。

查看我的演示文稿[全文搜索Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql)，其中包含不同解决方案的比较。包括：

*   [MySQL 5.6 中 MyISAM 表或 InnoDB 的全文索引](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)
*   [阿帕奇索尔](http://lucene.apache.org/solr/)
*   [狮身人面像搜索](http://sphinxsearch.com/)
*   [八卦](http://en.wikipedia.org/wiki/Trigram)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:26:39.900

可以使用mysql的全文搜索功能

[http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)

甚至更好地使用为搜索而开发的东西

[http://sphinxsearch.com/](http://sphinxsearch.com/)

# java - 如何将超链接插入到 BufferedImage (java) 的指定区域？

> ID：13520766
> 
> 赞同：0
> 
> 时间：2012-11-22T22:23:16.230
> 
> 标签：java, jbutton, bufferedimage

我在绘图面板上显示了一个 java BufferedImage。可以说，我如何“激活”该图像的特定区域，使其成为带有特定超链接的可点击区域？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:28:16.210

你有很多选择...

1.  使用地图图像来定义图像的可点击位置。这将需要第二个图像与第一个图像大小相同，并且您可以在运行时识别这些区域以确定它们是否可点击。
2.  定义一系列代表可点击位置的“形状”。这些可以被命名并保存到文件中，从而能够独立于代码定义这些区域。

以下示例同时使用两者；

“大师”形象

![在此处输入图像描述](../Images/e998b1111df4f6a3b24d75344be590a8.png)

“地图”形象

![在此处输入图像描述](../Images/edbb33df73171797200bb4c9485e5d8d.png)

```
public class TestImageMap {

    private BufferedImage master;
    private BufferedImage masterMap;

    public static void main(String[] args) {
        new TestImageMap();
    }

    public TestImageMap() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                try {

                    master = ImageIO.read(getClass().getResource("/Master.png"));
                    masterMap = ImageIO.read(getClass().getResource("/MasterMap.png"));

                    JFrame frame = new JFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new GridLayout(2, 1));
                    frame.add(new MapPane());
                    frame.add(new CoordPane());
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);

                } catch (Exception exp) {
                    exp.printStackTrace();
                    System.exit(0);
                }
            }
        });
    }

    public void sendMoney() {
        JOptionPane.showMessageDialog(null, "Sending money :D");
    }

    public void sendMoreMoney() {
        JOptionPane.showMessageDialog(null, "Sending ALL your money 8D");
    }

    public abstract class AbstractImagePane extends JPanel {

        public AbstractImagePane() {

            MouseAdapter handler = new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    doMouseClicked(e);
                }

                @Override
                public void mouseMoved(MouseEvent e) {
                    doMouseMoved(e);
                }
            };

            addMouseMotionListener(handler);
            addMouseListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return master == null ? super.getPreferredSize() : new Dimension(master.getWidth(), master.getHeight());
        }

        protected void doMouseClicked(MouseEvent evt) {
            if (evt.getButton() == MouseEvent.BUTTON1) {
                if (evt.getClickCount() == 1) {
                    Point p = evt.getPoint();
                    if (containsMoney(p)) {
                        sendMoney();
                    } else if (containsMoreMoney(p)) {
                        sendMoreMoney();
                    }
                }
            }
        }

        protected void doMouseMoved(MouseEvent evt) {
            Cursor cursor = Cursor.getDefaultCursor();
            Point p = evt.getPoint();
            if (containsMoney(p) || containsMoreMoney(p)) {
                cursor = Cursor.getPredefinedCursor(Cursor.HAND_CURSOR);
            }
            setCursor(cursor);
        }

        protected abstract boolean containsMoney(Point p);
        protected abstract boolean containsMoreMoney(Point p);

        protected Point normalize(Point p) {
            Point offset = getImageOffset();
            Point norm = new Point();
            norm.x = p.x - offset.x;
            norm.y = p.y - offset.y;
            return norm;
        }

        protected Point getImageOffset() {
            int width = getWidth() - 1;
            int height = getHeight() - 1;
            int x = (width - master.getWidth()) / 2;
            int y = (height - master.getHeight()) / 2;

            return new Point(x, y);

        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            if (master != null) {
                Point offset = getImageOffset();
                g.drawImage(master, offset.x, offset.y, this);
            }
        }
    }

    public class MapPane extends AbstractImagePane {

        private Rectangle moneyBounds = new Rectangle(16, 24, 139, 36);
        private Rectangle moreMoneyBounds = new Rectangle(16, 70, 139, 34);

        @Override
        protected boolean containsMoney(Point p) {
            return moneyBounds.contains(normalize(p));
        }

        @Override
        protected boolean containsMoreMoney(Point p) {
            return moreMoneyBounds.contains(normalize(p));
        }
    }

    public class CoordPane extends AbstractImagePane {

        protected boolean contains(Point p, int rgb) {
            Point norm = normalize(p);
            return masterMap.getRGB(norm.x, norm.y) == rgb;
        }

        @Override
        protected boolean containsMoney(Point p) {
            int white = new Color(255, 255, 255).getRGB();
            return contains(p, white);
        }

        @Override
        protected boolean containsMoreMoney(Point p) {
            int red = new Color(255, 0, 0).getRGB();
            return contains(p, red);
        }
    }
} 
```

# html - html5 dragover 在 IE 5.5 到 IE 8 中不起作用

> ID：13520788
> 
> 赞同：1
> 
> 时间：2012-11-22T22:25:23.203
> 
> 标签：html

我知道除了 IE 9 之外，IE 不支持 html5 dragover。我正在复制粘贴我的 js 文件代码，它可以与 Chrome / Mozilla 一起使用图像拖放功能，但不能在 IE 中使用。我需要一个适用于所有浏览器的解决方案。例如从 js 中删除 dragover 功能，让我知道如何提供图像路径（硬编码）或使用简单的文件上传。感谢并等待回复。

```
 jQuery(function($) {
    var sourceImg = $('<img>')[0],
    description = $('#description'),
    sourceCanvas = $('#source')[0],
    sourceCtx = sourceCanvas.getContext('2d'),
    compressedCanvas = $('#compressed')[0],
    compressedCtx = compressedCanvas.getContext('2d'),
    compressedOverlayCanvas = $('#compressedOverlay')[0],
    compressedOverlayCtx = compressedOverlayCanvas.getContext('2d'),
    all = $('canvas'),
    quality = 88,
    scale = 10;

function analyzeImage(image){
    all.attr('width', image.width);
    all.attr('height', image.height);
    sourceCtx.drawImage(image, 0, 0);
    var sourceData = sourceCtx.getImageData(0, 0, image.width, image.height),
        compressed = $('<img>');
    $('<img>')
        .on('load', function() {
            compressedCtx.drawImage(this, 0, 0);
            var compressedData = compressedCtx.getImageData(0, 0, image.width, image.height),
                data0 = sourceData.data,
                data1 = compressedData.data;

            for(var i = 0, l = data0.length; i < l; i+=4) {
                for(var j = 0; j < 3; j++) {
                    var error = Math.abs(data0[i+j]-data1[i+j]);
                    data0[i+j] = error*scale;
                }
            }
            compressedCtx.putImageData(sourceData, 0, 0);
            compressedOverlayCtx.drawImage(compressedCanvas, 0, 0);
            $('#description').fadeOut('slow');
            $('#results').show();
        }).attr('src', sourceCanvas.toDataURL('image/jpeg', quality*0.01)); 
}

$('html')
    .on('dragover', function(e) {e.preventDefault(); return false;})
    .on('drop', function(e) {
        var files = e.originalEvent.dataTransfer.files;
        if (files.length > 0) {
            var file = files[0];
            if (typeof FileReader !== "undefined" && file.type.indexOf("image") != -1) {
                var reader = new FileReader();
                // Note: addEventListener doesn't work in Google Chrome for this event
                reader.onload = function (evt) {
                    sourceImg.src = evt.target.result;
                };
                reader.readAsDataURL(file);
            }
        }
        return false;
    });

$('input').on('change', function() {
        $(this).next('.value').text($(this).val());
        quality = document.forms[0].quality.value * 1;
        scale = document.forms[0].scale.value * 1;
        if(sourceImg.src) analyzeImage(sourceImg);
    }).change();

$(sourceImg)
    .on('error', function () { alert('something went wrong when loading the image'); })
    .on('load', function () {
        _gaq.push(['_trackEvent', 'iela', 'imageAnalyzed']);
        analyzeImage(sourceImg);
    }); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:40:38.350

实际上，Internet Explorer 从 5.5 或 6 版开始就支持 Native Drag and Drop。它是由 Microsoft 在 1999 年指定的。HTML5 照原样接管了 API（不幸的是）。以下两个链接将为您提供有关如何使用 Native 拖放的可靠解释：

*   背景信息：http: [//msdn.microsoft.com/en-us/library/ms537658%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537658%28VS.85%29.aspx)
*   对于跨浏览器解决方案：[http ://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/](http://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/)

1.5 年前，我为一家德国网络杂志写了一篇关于 HTML5 拖放的德语文章。我创建了一个跨浏览器演示。源代码在 github 上，但用德语评论：[https ://raw.github.com/tjunghans/DnD-Webstandards/master/public/article-beispiel.html](https://raw.github.com/tjunghans/DnD-Webstandards/master/public/article-beispiel.html)

[我的建议是使用诸如http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)之类的拖放库。它更容易，并且会给您带来更少的头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T20:04:18.713

您可以使 IE 8 及更低版本模仿 HTML5 拖放。完成后，您可以使用 HTML5 拖放事件查看此帖子的答案（页面打开时忽略问题的标题）：

[https://stackoverflow.com/a/15867951/178550](https://stackoverflow.com/questions/5500615/internet-explorer-9-drag-and-drop-dnds)

本质上，您需要监听“selectStart”事件并调用 dragDrop() 函数来开始。我推荐你使用 Modernizr，这样支持 HTML 5 拖放的 IE 9 及更高版本、Opera、Chrome 和 FireFox 不需要这个解决方法，不要尝试使用它。这里有一个关于拖放 Modernizr 的问题/答案帖子：

[在 javascript 中检测 HTML5 拖放支持](https://stackoverflow.com/questions/2856262/detecting-html5-drag-and-drop-support-in-javascript)

# php - 使用 php 的 IIS 7.5 性能问题

> ID：13520792
> 
> 赞同：4
> 
> 时间：2012-11-22T22:26:04.157
> 
> 标签：php, performance, iis

出于测试目的，我在 PHP 5.4 中有以下脚本：

```
define(START_TIME_CUSTOM, microtime(true));
function onEndTimeCompute() {
    $timeTaken = microtime(true) - START_TIME_CUSTOM;
    echo "Completed In: ".number_format($timeTaken, 4)." Seconds\n";
}
register_shutdown_function('onEndTimeCompute');

echo "Just before exit";
exit;
echo "Just after exit"; 
```

（脚本取自此处：[https](https://serverfault.com/questions/192211/iis-logging-write-to-log-file-more-often) ://serverfault.com/questions/192211/iis-logging-write-to-log-file-more-often）执行时间为：0.00002 秒。

我在本地网络服务器 IIS7.5 上运行。
我也在使用 Chrome。

加载页面需要 1 秒。关于为什么需要整整一秒钟的任何想法？我希望它能够立即响应。

问候，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:15:12.333

除非您将 PHP 作为 fastCGI 模块运行，否则延迟时间就像是因为 IIS 必须从头开始启动 PHP 进程，即：加载可执行文件、解析配置、加载扩展等。另一方面，fCGI 保留 X 进程并准备好在收到请求后立即处理请求。

[这里有关于 fCGI 设置的文档](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to-host-php-applications-on-iis)。

# jqgrid - jqGrid TreeGrid 带复选框，签入父级，标记所有子级复选框

> ID：13520797
> 
> 赞同：2
> 
> 时间：2012-11-22T22:26:33.253
> 
> 标签：jqgrid, treegrid

我在父节点和子节点中有一个带有复选框的 TreeGrid。选中父节点中的复选框应标记子节点中的所有复选框。我的 TreeGrid 工作正常，我尝试将事件仅绑定到自定义格式化程序中的父节点。它也奏效了。后来我尝试标记子节点但没有效果。子节点的复选框保持不变。请帮忙！

```
 $(document).ready(function () {

    jQuery("#list2").jqGrid({
        url: '@Url.Action(some action it is ok)
        mtype: 'GET',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        datatype: "json",
        colNames: ['id', 'Data', 'Typ', 'Liczba dni', 'Liczba    godzin', 'Zatwierdzalny', 'Anulowalny', 'Zatwierdz', 'Anuluj'],
        colModel: [
                       { name: 'id', index: 'id', hidden: true },
                       { name: 'data', index: 'data' },
                       { name: 'typ', index: 'typ' },
                       { name: 'ileDni', index: 'ileDni' },
                       { name: 'ileGodzin', index: 'ileGodzin' },
                       { name: 'zatwierdzalny', index: 'zatwierdzalny'},
                       { name: 'anulowalny', index: 'anulowalny', hidden: true },
    //                           { name: 'zatwierdz', index: 'zatwierdz',
    //                               editable: true, edittype: 'checkbox',editoptions: { value: "True:False" },
    //                               formatter: "checkbox", formatoptions: { disabled: false }
    //                           },
                       { name: 'zatwierdz', index: 'zatwierdz', edittype: 'checkbox', editoptions: { value: "True:False" },
                         editable: true, formatter: cboxFormatter, unformat: cboxUnFormatter
                       },
                       { name: 'anuluj', index: 'anuluj',
                           editable: true, edittype: 'checkbox', editoptions: { value: "True:False" },
                           formatter: "checkbox", formatoptions: { disabled: false }
                       }
                  ],
        rowNum: 50,
        height: 'auto',
        records: 50,
        width: 1050,

        sortable: true,
        viewrecords: true,
        postData: {
            rok: function () {
                return $("#lata option:selected").val();
            }
        },

        treeGrid: true,
        treeGridModel: "adjacency",
        ExpandColumn: 'data',
        treeIcons: { leaf: 'ui-icon-document' },

    //            editurl: 'edit url',

    });
}); 
```

格式化程序和取消格式化：

```
 function cboxFormatter(cellvalue, options, rowObject) {
        if (rowObject[11] == "true") { //isChild - how else can I check this?
            return '<input type="checkbox"' + (cellvalue ? ' checked="checked"' : '') + '/>';
        }
        else {
            return '<input type="checkbox"' + (cellvalue ? ' checked="checked"' : '') +
               'onclick="zaznacz(' + options.rowId + ')" />';
        }
    }

    function cboxUnFormatter(cellvalue, options, cell) {
        return $('input', cell).attr("checked") ? 'True' : 'False';
    } 
```

和线索：首先加载所有复选框都被选中，没关系，我尝试通过单击父级来“取消选中”子级

```
 function zaznacz(e) {
        var localRow = $('#list2').jqGrid('getLocalRow', e),
        children = $('#list2').jqGrid('getNodeChildren', localRow);

        var Row = $('#list2').jqGrid('getRowData', e);

        for (i = 0; i < children.length; i++) {
            //alert(children[i].id); OK

            //$('#list2').jqGrid('setCell', children[i].id, 'zatwierdz', "False");
            $('#list2').jqGrid('getLocalRow', children[i].id).zatwierdz = "False";
            //localRow.zatwierdz = 'False';
            alert($('#list2').jqGrid('getLocalRow', children[i].id).zatwierdz);

    NO EFFECT AT ALL! even if I do:
    alert($('#list2').jqGrid('getLocalRow',children[i].id).zatwierdz);
    alert is OK, "False" is printed, but checkbox reamins checked (unchanged)

        }
    } 
```

我来自 MVC 控制器的 JSON：

```
 var data = new
{
        rows = (
                from du in dni
                    select new
                        {
                            cell = new string[] {
                            du.id, 
                            du.data,
                            du.typ,
                            du.ileDni,
                            du.ileGodzin,
                            du.zatwierdzalny,
                            du.anulowalny,
                            du.zatwierdz,
                            du.anuluj,
                            du.level,
                            du.parent,
                            du.isLeaf ? "true":"false",
                            du.expanded ? "true":"false",
                            du.loaded ? "true":"false"
                        }
                        }).ToArray()

}; 
```

返回 Json（数据，JsonRequestBehavior.AllowGet）；

# css - LESS 编译错误

> ID：13520803
> 
> 赞同：4
> 
> 时间：2012-11-22T22:26:49.453
> 
> 标签：css, compiler-errors, less, media-queries, skeleton-css-boilerplate

我正在使用 Incident57 的 CodeKit 预处理器来编译一系列较少的文件，这些文件被导入并缩小到一个名为 template.css 的 CSS 文件中。

但是，在进行了一些编辑之后（我不知道是什么编辑导致了这个）我开始得到 non_object_property_callError

```
non_object_property_callError: Cannot call method 'charAt' of null in /Volumes/Clients/htdocs/ergonomiq/domains/clients/polaris5/less/mediaqueries.less:14:2
13  h1 {
14      font-size: 100px;
15      margin-bottom: 60px; 
```

template.less 导入 12 个文件：

```
@import "cssindex.less";
@import "fonts.less";
@import "colors.less";
@import "variables.less";
@import "mixins.less";
@import "base.less";
@import "skeleton.less";
@import "flexslider.less";
@import "prettyPhoto.less";
@import "layout.less";
@import "scrollbars.less";
@import "mediaqueries.less"; 
```

此外，fonts.less 本身导入了 5 个文件

```
@import "font-awesome.less";
@import "font-awesome-ie7.less";
@import "font.bebas.less";
@import "font.leaguegothic.less";
@import "font.sourcesanspro.less"; 
```

该错误似乎与 media queries.less 文件有关/关联

```
/* Media Queries CSS File
================================================== */

/* Smaller than 1024 (devices and browsers) */
@media only screen and (max-width: 1024px) {
     .title { 
        position: relative;
        padding-top: 110px;
    }
    #intro {
        height: 600px;
    }
    h1 {
        font-size: 100px;
        margin-bottom: 60px;
        &.small {
            font-size: 60px;
            margin-bottom: 20px;
        }
    }
}

/* Smaller than 960 (devices and browsers) */
@media only screen and (max-width: 960px) {
    nav {
        ul {
            display: none;
        }
    }
    .title {
        position: relative;
        padding-top: 50px;
    }
    .mobnav {
        position: absolute;
        z-index: 9999;
        top: 0.1em;
        right: 0.1em;
        width: 100px;
        height: 49px;
    }
    .mobico {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: @black;
        color: @white;
        z-index: 9990;
        overflow: hidden;
        a {
            display: block;
            width: 100%;
            text-align: center;
            padding: 20px 0;
            font-family: @baseFontFamily
            font-size: 1.5em;
            color: @gray85;
            font-weight: 300;
            text-decoration: none;
            text-transform: uppercase;
            border-bottom: solid 1px @gray50;
        }
    }
    .menusel {
        position: absolute;
        z-index: 9999;
        top: 0.7em;
        right: 0.1em;
        width: 40px;
        height: 49px;
    }
    nav.is-sticky .mobnav, .mobnav {
        display: inline;
    }
    #about {
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
    }
}

/* Tablet Portrait size to standard 960 (devices and browsers) */
@media only screen and (min-width: 768px) and (max-width: 959px) {
    nav, nav.is-sticky {
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        height: 52px;
    }
    .title {
        padding-top: 55px;
    }
    .logo1, .menusel, .mobnav, nav .mobnav {
        display: inline;
        z-index: 9999;
        position: fixed;
    }
    #intro {
        margin-top: 55px !important;
    }
    .logo {
        display: none;
    }
    #about {
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
    }
}

/* All Mobile Sizes (devices and browser) */
@media only screen and (max-width: 767px) {
        .logo {
        display: none;
    }
}

/* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
@media only screen and (min-width: 480px) and (max-width: 767px) {
    #separator1, #separator2, #separator3 {
        width: 100%;
        height: 300px;
    }
    h1 {
        font-size: 70px;
        margin-bottom: 20px;
        &.small {
            font-size: 40px;
            margin-bottom: 20px;
        }
    }
    .title {
        p {
            font-size: 20px;
            line-height: 28px;
        }
    }
    nav {
        ul {
            li {
                padding-left: 10px;
                padding-right: 10px;
            }
        }
    }
    nav, nav.is-sticky {
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        height: 52px;
    }
    .mobnav, .menusel {
        display: inline;
        z-index: 9999;
        position: absolute;
        top: 0.7em;
        right: 0.1em;
        height: 49px;
    }
    .logo1, .menusel, .mobnav, nav .mobnav {
        display: inline;
        z-index: 9999;
        position: fixed;
    }
    .intro-line {
        width: 400px;
    }
    h2 {
        font-size: 3.5em;
        margin-top: 1em;
        margin-bottom: 1em;
    }
    #about {
        p {
            margin-top: 1em;
            margin-bottom: 1em;
            word-spacing: 0.4em;
        }
    }
    .serv-list, .markets-list {
        margin-top: 3em;
        h4 {
            margin-bottom: 2em;
            line-height: 1.15em;
        }
    }
}

/* Mobile Portrait Size to Mobile Landscape Size (devices and browsers) */
@media only screen and (max-width: 479px) {
    #separator1, #separator2, #separator3 {
        width: 100%;
        height: 300px;
    }
    #intro {
        height: 430px;
    }
    .title {
        position: relative;
        padding-top: 120px;
        p {
            font-size: 18px;
            line-height: 28px;
        }
    }
    .intro-line {
        display: none;
    }
    h1 {
        font-size: 60px;
        margin-bottom: 20px;
        &.small {
            font-size: 30px;
            margin-bottom: 20px;
        }
    }
    h2 {
        font-size: 3em;
        margin-top: .5em;
        margin-bottom: .5em;
    }
    nav {
        ul {
            li {
                padding-left: 5px;
                padding-right: 5px;
            }
        }
    }
    #about {
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
    }
    #about, #contact, #markets {
        p {
            font-size: 1.25em;
            margin-top: .5em;
            margin-bottom: .5em;
            word-spacing: 0.4em;
        }
        .copyright {
            p {
                font-size: .85em;
            }
        }
    }
    nav, nav.is-sticky {
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        height: 52px;
    }
    .logo {
        display: none;
    }
    .logo1, .menusel, .mobnav, nav .mobnav {
        display: inline;
        z-index: 9999;
        position: fixed;
    }
    .serv-list, .markets-list {
        margin-top: 3em;
        h4 {
            font-size: 2em;
            margin-bottom: 2em;
            line-height: 1.15em;
        }
        .roundness-red, .roundness-blue {
            padding: 1em 0;
            span, i {
                font-size: 2em;
                padding: 1.2em 1.3em;
            }
        }
        .roundness-purple, .roundness-yellow, .roundness-green {
            padding: 1em 0;
            span, i {
                font-size: 2em;
                padding: 1.2em 1.2em 1.1em 1.2em;
            }
        }
        p {
            font-size: 1.25em;
            margin-top: 2em;
            margin-bottom: .5em;
        }
    }
    .contact-info {
        font-size: 1em;
        margin-top: 1em;
    }
} 
```

除此之外，我完全迷失了。

non_object_property_callError **: Cannot call method 'charAt' of null**错误是什么意思，我该如何解决？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:18:30.460

LESS 最令人沮丧的事情是它的调试信息不​​太有用。

这是第 57 行的一个简单的缺少分号

```
 a {
        display: block;
        width: 100%;
        text-align: center;
        padding: 20px 0;
        font-family: @baseFontFamily    //missing semicolon
        font-size: 1.5em;
        color: @gray85;
        font-weight: 300;
        text-decoration: none;
        text-transform: uppercase;
        border-bottom: solid 1px @gray50;
    }
} 
```

更正后的代码运行良好

```
 a {
        display: block;
        width: 100%;
        text-align: center;
        padding: 20px 0;
        font-family: @baseFontFamily;
        font-size: 1.5em;
        color: @gray85;
        font-weight: 300;
        text-decoration: none;
        text-transform: uppercase;
        border-bottom: solid 1px @gray50;
    }
} 
```

# java - 抛光我的 Pig 拉丁语翻译器（代码）（Java）

> ID：13520805
> 
> 赞同：3
> 
> 时间：2012-11-22T22:27:04.803
> 
> 标签：java

我在这里的任务是使用递归创建一个猪拉丁语翻译器，它可以翻译句子。规则如下：

1.  如果englishWord 中没有元音，那么pigLatinWord 就是englishWord + "ay"。（有十个元音：'a'、'e'、'i'、'o' 和 'u'，以及它们的大写对应物。就本作业而言，'y' 不被视为元音，即my 变成 myay，why 变成 whyay 等）
2.  否则，如果englishWord 以元音开头，那么pigLatinWord 就是englishWord + "yay"。
3.  否则（如果englishWord 中有元音但不以元音开头），则pigLatinWord 为end + start + "ay"，其中end 和start 定义如下：-

让 start 是所有englishWord 直到（但不包括）它的第一个元音。让 end 成为从第一个元音开始的所有英语单词。但是，如果englishWord 大写，则结束大写并“取消大写”开始。

到目前为止，这是我的代码（对不起，奇怪的格式，我的评论搞砸了）：

```
 /*Recursively Translate a String (without punctuation or numerical characters) to Pig Latin*/

//prep the string for translation and submit it to be translated
public static String translate(String finished) {
    finished.trim();        //Trim the String of whitespace at the front and end
    finished += " ";        //Because of the recursive method I use, the string must have a
                            //space at the end
    finished = translateSentence(finished); //recursively translate the string
    finished.trim();    //trim the whitespace added earlier
    return finished;    //Return the string
}

//recursively submits each word in the string to the translator, then 
//returns the translated sentence
private static String translateSentence(String finished) {

if (finished.length() == 0) {   //the base condition is met when each word in the string
   return finished; //has been sent to the translator (string is empty)
    }
    else {
    return (translateWord(finished.substring(0, finished.indexOf(' ') )) + " "
        + translateSentence(finished.substring(finished.indexOf(' ') + 1)));        
    }
}
/*If the base condition is not met, the method returns the first word of the string
 * (translated) and a space, then submits the rest of the 
 * string back to the method.  The first word is defined as the beginning 
 * of the string up until the first space. The rest of the string
 * starts one character after the space.   */

//Checks the submitted word for vowels and vowel placement, and translates accordingly

    private static String translateWord(String stringA) {
    if (stringA.indexOf('a') == -1
    && stringA.indexOf('e') == -1           //Checks for presence of any vowels
    && stringA.indexOf('i') == -1       //if no vowels are found
    && stringA.indexOf('o') == -1       //the word + ay is returned
    && stringA.indexOf('u') == -1
    && stringA.indexOf('A') == -1
    && stringA.indexOf('E') == -1
    && stringA.indexOf('I') == -1
    && stringA.indexOf('O') == -1
    && stringA.indexOf('U') == -1) {
        return stringA + "ay";
    }       
    if (stringA.charAt(0) == 'a'
    ||  stringA.charAt(0) == 'e' //checks if there is a vowel at the start
    ||  stringA.charAt(0) == 'i'//of the string. if there is a vowel
    ||  stringA.charAt(0) == 'o'    //it returns the word + yay
    ||  stringA.charAt(0) == 'u'
    ||  stringA.charAt(0) == 'A'
    ||  stringA.charAt(0) == 'E'
    ||  stringA.charAt(0) == 'I'
    ||  stringA.charAt(0) == 'O'
    ||  stringA.charAt(0) == 'U') {
        return stringA + "yay";
    }       
/* if the word has a vowel that isn't at the start, the part of the string

* before the first vowel is moved to the end of the vowel, and "ay" is added.

* However, if the first character in the word is capitalized, the first vowel becomes

* uppercase and the former first character in the word becomes lowercase */
    else {
        if (Character.isUpperCase(stringA.charAt(0))) {
            return Character.toUpperCase(stringA.charAt(firstVowel(stringA, 0))) 
            + stringA.substring(firstVowel(stringA, 0) + 1, stringA.length())
            + Character.toLowerCase(stringA.charAt(0))
            + stringA.substring(1, firstVowel(stringA, 0)) + "ay";
        }
        else {
        return stringA.substring(firstVowel(stringA, 0), stringA.length()) 
        + stringA.substring(0, firstVowel(stringA, 0)) + "ay";
        }
    }
}

//Recursively determines the index number of the first vowel in a given word
//0 must always be submitted as int x
public static int firstVowel(String stringA, int x) {
    if (x > stringA.length() - 1) {     //if the index number becomes greater than the length
        return -1;      //of the string, -1 (no vowels) is returned
    }
    if (stringA.charAt(x) == 'a' 
        || stringA.charAt(x) == 'e'     //the base condition is met when the character
        || stringA.charAt(x) == 'i'     //at the current index number is a vowel
        || stringA.charAt(x) == 'o'     //and the index number is returned
        || stringA.charAt(x) == 'u' 
        || stringA.charAt(x) == 'A' 
        || stringA.charAt(x) == 'E' 
        || stringA.charAt(x) == 'I' 
        || stringA.charAt(x) == 'O' 
        || stringA.charAt(x) == 'U') {
        return x;
    }
    else {
        return firstVowel(stringA, x + 1);  //otherwise, the string and the index number
    }                                       // + 1 are submitted back to the method
} 
```

这给了我想要的输出（“Why hello there”变成了“Whyay ellohay erethay”），但现在它不能处理标点符号。基本上我正在寻找的是任何提示或帮助让我的代码处理标点符号，或任何改进我的代码的方法（仍然使用递归）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:19:08.500

@Cedric 给出了一个很好的建议，可以在执行处理时使用正则表达式。

在这里，我给出了一些其他的方向。

首先，我相信您可以更好地重用您的`firstVowel`方法。

您`translateWord`可以大大简化为（我跳过您的大写处理以使其更易于理解）：

```
private static String translateWord(String s) {
    int firstVowelIndex = firstVowel(s);
    if (firstVowel < 0) { // no Vowel
        return s + "ay";
    } else if (firstVowel == 0) {  // start with Vowel
        return s + "yay";
    } else {
        return s.substring(firstVowelIndex) + s.substring(0, firstVowelIndex) + "ay";
    }
} 
```

你也有一些东西需要简化`firstVowel()`。

首先可以简化元音的比较。一种方法是使用正则表达式。另一种方法是使用 Set：

假设你有这样的东西：

```
static Set<Character> vowels = new HashSet<Character>(
        Arrays.asList('a','e','i','o','u','A','E','I','O','U')); 
```

然后你的元音检查可以从一个长的 if 语句更改为：

```
if (vowels.contains(c)) {...} 
```

其次，您可能故意以递归方式编写 firstVowel() 以进行练习。但是，在我看来，如果以循环的形式编写该方法，则更容易阅读：

```
private static int firstVowel(String s) {
    int index = -1;
    for (int i = 0; i < s.length; ++i ) {
        if (isVowel(s.charAt(i)) {
            index = i;
            break;
        }
    }
    return index;
} 
```

我相信这两个更改几乎可以以更具可读性的方式将您的代码减半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:29:02.747

尝试使用正则表达式来匹配您的单词。正则表达式 [a-zA-Z]+ 将匹配任何同时出现的字母序列。关于如何在 java 中使用正则表达式，我将把它作为练习留给你，但这并不难。

基本上拿你的字符串，找到下一个匹配项。存储单词的最后一个字符在原始字符串中的位置。处理该单词，然后找到下一个匹配项。现在取上一个匹配的最后一个字符和当前匹配的第一个字符之间的子串，直接输出，不做任何处理。

示例：假设我有字符串“Hello, world!”

*   第一个匹配是“Hello”，从位置 0 开始，到位置 4（含）结束。
*   处理并输出“Ellohay”
*   找到下一个匹配“世界”，从位置 7 开始，到位置 11 结束
*   输出上一个匹配的最后一个字符和当前匹配的第一个字符之间的子字符串。这意味着从位置 5 到位置 6，这给出了字符串 ", "
*   处理当前匹配并输出它。这将输出“orldway”
*   尝试找到下一个匹配项。现在找不到匹配项
*   输出字符串的其余部分而不进行任何处理。这意味着从位置 12 到字符串的末尾。这给出了子字符串“！”

这样，该过程将转换“Hello, world!”。到“Ellohay，orldway！”

希望这可以帮助

# hadoop - Hadoop 异常 - 清理暂存区 /staging/test/.staging/job_201211221353_0010

> ID：13520814
> 
> 赞同：1
> 
> 时间：2012-11-22T22:28:11.840
> 
> 标签：hadoop, mapreduce

我的工作配置如下，我正在尝试对我的 hadoop 工作进行简单的两步链接，

```
public int run(String[] args) throws Exception {
        Configuration conf = getConf();
        if (args.length != 2) {
            System.err.println("Usage: moviecount3 <in> <out>");
            System.exit(2);
        }

        ConfigurationUtil.dumpConfigurations(conf, System.out);

        LOG.info("input: " + args[0] + " output: " + args[1]);

        Job job = new Job(conf, "movie count2");
        job.setJarByClass(MovieCount3.class);
        job.setMapperClass(MovieTokenizerMapper3.class);
        job.setReducerClass(MovieActorReducer3.class);

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(IntWritable.class);

        job.setOutputKeyClass(IntWritable.class);
        job.setOutputValueClass(Text.class);

        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));

        boolean result = job.waitForCompletion(true);

        //Job 2
        Job job2 = new Job(conf, "movie count22");
        if(job.isSuccessful()){
            job2.setJarByClass(MovieCount3.class);
            job2.setMapperClass(MovieActorCombiner3.class);
            //job2.setReducerClass(MovieActorReducer3.class);

            job2.setMapOutputKeyClass(Text.class);
            job2.setMapOutputValueClass(IntWritable.class);

            job2.setOutputKeyClass(IntWritable.class);
            job2.setOutputValueClass(Text.class);

            FileInputFormat.addInputPath(job, new Path("/user/test/output/part-r-00000"));
            FileOutputFormat.setOutputPath(job, new Path("/user/test/output2"));
        }
        boolean result2 = job2.waitForCompletion(true);
        return (result2) ? 0 : 1;
    } 
```

运行此配置时出现以下异常，

```
12/11/22 14:21:30 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:9000/media/LinuxDrive/hdfs-test/mapred/staging/test/.staging/job_201211221353_0010
12/11/22 14:21:30 ERROR security.UserGroupInformation: PriviledgedActionException as:test
cause:org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set.
org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set.
    at org.apache.hadoop.mapreduce.lib.output.FileOutputFormat.checkOutputSpecs(FileOutputFormat.java:128)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:887)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    at ucsc.hadoop.mapreduce.movie.MovieCount3.run(MovieCount3.java:77)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at ucsc.hadoop.mapreduce.movie.MovieCount3.main(MovieCount3.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at ucsc.hadoop.mapreduce.ExampleDriver.main(ExampleDriver.java:101)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:56:52.713

那么问题是，您没有为第二个作业设置输出目录。您再次为第一个作业设置输出：

错误的：

```
FileInputFormat.addInputPath(job, new Path("/user/test/output/part-r-00000"));
FileOutputFormat.setOutputPath(job, new Path("/user/test/output2")); 
```

对：

```
FileInputFormat.addInputPath(job2, new Path("/user/test/output/part-r-00000"));
FileOutputFormat.setOutputPath(job2, new Path("/user/test/output2")); 
```

那应该可以解决您的问题。

# ios - 应用程序中的 Siri

> ID：13520820
> 
> 赞同：0
> 
> 时间：2012-11-22T22:29:07.703
> 
> 标签：ios, macos, siri, sirikit

> **可能重复：**
> [Apple 是否为 SIRI 提供 API？](https://stackoverflow.com/questions/7857353/does-apple-provide-an-api-for-siri)

有没有办法将 Siri 添加到您的 OSX 和 iOS 应用程序中？

如果是这样，你如何让 Siri 将你自己的话作为命令处理

如果您说“客户端”，那么因为这是一个注册词/声音/键，它然后执行操作 A 或调用函数 A ？

有人知道可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:37:36.907

虽然这是重复的，但我会给你一个答案。不，Apple 还没有为 Siri 提供 API。我们期待他们的未来，所以要做好准备。但是，目前，他们对您绝对没有选择。

此外，由于 OS X 本身没有 Siri，显然它也没有 Siri API。干杯! :)

# java - 在 Spring 应用程序中使用 CXF 自动发现 JAX-RS 资源

> ID：13520821
> 
> 赞同：14
> 
> 时间：2012-11-22T22:29:12.540
> 
> 标签：java, spring, cxf, jax-rs

Apache CXF (2.7.0) 是否可以**自动发现类路径中的 JAX-RS 资源**？也就是说，用 注释的类`@Path`。

我在 Spring 应用程序中使用 CXF，我必须使用以下 XML 手动声明资源，即使 Spring 成功发现了资源`<context:component-scan ...>`。

```
<jaxrs:server id="myService" address="/myService">
    <jaxrs:serviceBeans>
        <ref bean="myResource1" />
        <ref bean="myResource2" />
        <ref bean="myResource3" />
    </jaxrs:serviceBeans>
</jaxrs:server> 
```

我想避免它（因为我可以使用其他 JAX-RS 实现，例如 resteasy），因为在我的情况下，它更难维护，并且它迫使我在 Spring XML 配置文件中声明我的 bean 依赖项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-17T02:55:34.697

在 cxf 3.0.4 中测试和工作。

```
<jaxrs:server address="/" basePackages="a.b.c"/> 
```

不要忘记在 web.xml 中提及 cxf-servlet

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-19T18:49:38.977

这段代码可以解决问题：

```
@Configuration
@ComponentScan
@ImportResource({"classpath:META-INF/cxf/cxf.xml"})
public class Context {
    @Autowired
    private ApplicationContext ctx;

    @Bean
    public Server jaxRsServer() {
        LinkedList<ResourceProvider> resourceProviders = new LinkedList<>();
        for (String beanName : ctx.getBeanDefinitionNames()) {
            if (ctx.findAnnotationOnBean(beanName, Path.class) != null) {
                SpringResourceFactory factory = new SpringResourceFactory(beanName);
                factory.setApplicationContext(ctx);
                resourceProviders.add(factory);
            }
        }

        JAXRSServerFactoryBean factory = new JAXRSServerFactoryBean();
        factory.setBus(ctx.getBean(SpringBus.class));
        factory.setProviders(Arrays.asList(new JacksonJsonProvider()));
        factory.setResourceProviders(resourceProviders);
        return factory.create();
    }
} 
```

只需记住将 CXFServlet 放入您的 web.xml 中即可。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T22:21:02.480

目前在 CXF 2.7 中似乎没有办法使用 Spring 配置来执行此操作。如果您查看resteasy，他们已经实现了一个查找@Path 和@Provider 的BeanFactoryPostProcessor SpringBeanProcessor.java。在 CXF 中可能会做类似的事情，但似乎还没有实现。看起来你不是唯一一个对[CXF-3725感兴趣的人](https://issues.apache.org/jira/browse/CXF-3725)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-11T13:25:03.373

除了建议的内容之外：它确实在 3.0.0-milestone2 中工作，只需执行顶级 jaxrs 服务器声明并设置 basePackages 属性，该属性可能具有一个或多个空格分隔的包名称。

# django - Django：管理员 save_model() 忽略 save()

> ID：13520823
> 
> 赞同：0
> 
> 时间：2012-11-22T22:29:39.047
> 
> 标签：django, django-models, django-admin

我正在使用 django-mptt，并且正在使用查询集来过滤查询集。

然后我想将电影添加到父类别

*   媒体----------------- **（保存后在此处添加）**
    *   电影 ------------- **（保存后在此处添加）**
        *   行动-----（在此处添加影片）
        *   恐怖-----（或在这里，也许）
        *   ...
    *   ...

.

```
class FilmAdmin(BlunneAdmin):

    # FILTER RESULTS TO SHOW IN ADMIN
    def formfield_for_manytomany(self, db_field, request, **kwargs):
    if db_field.name == "categories":
        kwargs["queryset"] = Categ.objects.filter(parent__slug='films')
    return super(FilmAdmin, self).formfield_for_manytomany(db_field, request, **kwargs)

    # ADD FILM TO PARENT'S CATEGORIES
    def save_model(self, request, obj, form, change):
        obj.save()
        obj.categs.add(Categ.objects.get(slug='media'))
        obj.categs.add(Categ.objects.get(slug='films'))
        obj.save() 
```

我该怎么做？

如果我不放第一个 save() 我得到这个错误：

**'Film' 实例需要有一个主键值才能使用多对多关系。**

# javascript - 自动填充表作为用户类型

> ID：13520824
> 
> 赞同：0
> 
> 时间：2012-11-22T22:29:47.523
> 
> 标签：javascript, jquery

要在用户在文本框中键入条目时添加自动填充表格，我一直在阅读关于 jQuery 自动完成功能：

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

这可以定制为自动完成具有多行的表吗？

也许有一个插件已经这样做了？我只是在寻找从哪里开始这项任务的方向。非常欢迎所有建议。

更多详情 ：

当用户在文本框中键入时，会根据键入的内容填充 html 表格。这些建议是从数据存储中检索的数据值。类似于“谷歌建议”的东西，但不是在文本框中建议选项，而是在 html 表格中显示选项。我使用表格的原因是建议包含多列数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:41:31.737

您可以覆盖 jQuery 自动完成中的“renderItem”方法来实现这一点。有关详细信息，请参见示例：http: [//jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

# sql-server - t-sql比较两个变量看对方是否持有第一个

> ID：13520826
> 
> 赞同：2
> 
> 时间：2012-11-22T22:29:58.300
> 
> 标签：sql-server, tsql

我看过这个问题，但没有这样问，如果有类似的问题，请链接它。

我正在使用 T-SQL 并且正在编写一个存储过程。

所以我有一个`@masterstring`让我们说

```
'www.apple.com' 
```

和一个`@slavestring`

```
'www.apple.com/subdirectory' 
```

我使用下面的代码来查看是否应该向数据库添加行。

如果它通过了这个子句，我想要做的是向数据库添加行。

```
IF NOT EXISTS (SELECT ranking_date, ranking_keyword, ranking_id_doman
                FROM [dbo].[t_ranking] 
                WHERE ranking_id_doman = @domanID
                AND ranking_keyword = @keyword
                AND ranking_searchesincluded = @searchesincluded) 
                AND @masterstring like @slavestring +'%' 
```

`@masterstring`在整个过程中保持不变，但`@slavestring`每次插入都会改变。

问题
我如何编写 AND 语句，以使每个`@slavestring`包含`@masterstring`将是真的？

我试过了

尝试#1：

```
AND @masterstring like '%' + @slavestring + '%' 
```

尝试#2：

```
@masterstring like @slavestring + '%' 
```

他们都没有工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:41:38.233

您可以使用`SUBSTRING`和`LEN`函数来执行此操作：

```
IF NOT EXISTS (SELECT ranking_date, ranking_keyword, ranking_id_doman
               FROM [dbo].[t_ranking] 
               WHERE ranking_id_doman = @domanID
               AND ranking_keyword = @keyword
               AND ranking_searchesincluded = @searchesincluded) 
               AND SUBSTRING(@slavestring, 1, LEN(@masterstring)) = @masterstring 
```

# android - 使用 ActionBarSherlock 启动活动

> ID：13520828
> 
> 赞同：0
> 
> 时间：2012-11-22T22:30:05.633
> 
> 标签：android, actionbarsherlock

所以我使用 Sherlock 库来显示 ActionBar（在 4.2 及更早版本中需要它）和一个导航选项卡栏。我想在 tab1 中显示一些 Activity 内容，并在按下它时在 tab2 中显示其他活动。夏洛克图书馆有可能吗？如果没有，请给我一些其他的解决方案。

```
public class TabNavigation extends SherlockActivity implements ActionBar.TabListener {
    private TextView mSelected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);
        mSelected = (TextView)findViewById(R.id.text);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 3; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);
            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {
        //LAUNCH ACTIVITIES HERE! POSSIBLE?
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:48:29.770

> 夏洛克图书馆有可能吗？

不。

> 如果没有，请给我一些其他的解决方案。

为您的标签使用片段。或者，以其他方式修改现有活动的 UI。选项卡中的活动已被弃用近两年。

# c++ - 尝试在 C++ 中将文本文件拆分为多个文本文件

> ID：13520830
> 
> 赞同：0
> 
> 时间：2012-11-22T22:30:27.640
> 
> 标签：c++

我正在尝试让此代码将输入文件拆分为两个文件。我希望将代码拆分，以便一个新文件包含所有奇数字符，另一个文件包含所有偶数字符。我的代码没有给我任何错误，它产生了两个新文件，但是这两个新文件中没有任何内容。我想知道我的代码有什么问题（我确信它有很多问题）。我对编程还是很陌生。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

void split(char sourceFile[], char destFile1[], char destFile2[]) {
    int chars = 0;
    ifstream sFile;
    sFile.open(sourceFile);
    ofstream file1;
    file1.open(destFile1);
    ofstream file2;
    file2.open(destFile2);

    while (!sFile.eof()) {
        sFile.read(sourceFile + chars, 1);

        cout << sourceFile[chars];
        if (chars % 2 == 0) {
            file1 << sourceFile[chars];
        } else {
            file2 << sourceFile[chars];
        }
        chars++;

    }
}

int main() {
    split("text.txt", "one.txt", "two.txt");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:43:28.777

一些非常严重的问题：

*   你的循环控制是没有意义的。当 'istream::eof()' 变为真时，它的定义并不明确，但是当你正在逐字节读取时，它可能会导致你进入循环的次数比你想要的多一次。

*   一个相关的问题是您*没有*验证读取是否成功。读取的成功应该是你的循环控制。

*   您正在阅读字符文字，这是未定义的行为（并且会在很多系统上崩溃）；经过足够的阅读后，您正在阅读文字末尾之外的内容，进入未定义的内存。您确实应该使用本地缓冲区进行读取。

*   你不做任何错误检查。至少，您应该验证您是否已成功打开文件，并且您应该关闭输出文件，并在关闭后检查它们的状态，以确保写入工作正常。

我可能会使用类似的东西：

```
void
split( std::string const& source, 
       std::string const& dest1,
       std::string const& dest2 )
{
    std::istream in( source.c_str() );
    if ( ! in.is_open() ) {
        //  Cannot open source...
    }
    std::ostream out1( source.c_str() );
    if ( ! out1.is_open() ) {
        //  Cannot create dest1
    }
    std::ostream out2( source.c_str() );
    if ( ! out2.is_open() ) {
        //  Cannot create dest2
    }
    std::ostream* currentOut = &out1;
    std::ostream* otherOut = &out2;
    char ch;
    while ( in.get( ch ) ) {
        currentOut->put( ch );
        std::swap( currentOut, otherOut );
    }
    out1.close();
    if ( !out1 ) {
        //  Write error on dest1...
    }
    out2.close();
    if ( !out2 ) {
        //  Write error on dest2...
    }
} 
```

（如您所见，执行复制的实际循环非常简单。大部分代码都涉及错误处理。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:41:13.063

它有很多问题（如你所说）

1）`ifstream`如果要输出到文件，请使用所有文件`ofstream`。

2) 您不应尝试将文件名用作代码的变量。只需声明一个新的 char 变量。

3) 使用 get not read 读取单个字符。

4) 正确测试文件结尾。

5）不要关闭循环内的文件，实际上根本不要关闭文件*，*当你退出函数时它会自动发生。

6) 到底是`chars%2 == 5`关于什么的？这永远不会是真的。

把它放在一起

```
char ch;
while (sFile.get(ch))
{
    if (chars % 2 == 0)
        file1 << ch;
    else
        file2 << ch;
    chars++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:36:44.170

您的缩进具有误导性！文件 close() 调用*在*循环内。

并且：`i % 2 == 5`从来都不是真的。怎么样`if (i % 2 == 0) { ... } else { ... }`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T23:11:28.040

不是问题的答案，而是实现预期目标的程序的紧凑版本：

```
#include <algorithm>
#include <iterator>
#include <fstream>
#include <functional>

int main()
{
    typedef std::ostreambuf_iterator<char> oit;
    unsigned int chars(0);
    std::for_each(std::istreambuf_iterator<char>(
                      std::ifstream("text.txt") >> std::noskipws),
                  std::istreambuf_iterator<char>(),
                  std::bind([=](oit _1, oit _2, char c) mutable {
                          *(chars++ % 2? _1: _2)++ = c; },
                      oit(std::ofstream("one.txt") << std::dec),
                      oit(std::ofstream("two.txt") << std::dec),
                      std::placeholders::_1));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T22:39:49.447

你忘了一个';' 并且拼写错误的“源文件”

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

void split(char sourceFile[], char destFile1[], char destFile2[])
{
int chars = 0;

ifstream sFile;
sFile.open (sourceFile);

ofstream file1;
file1.open (destFile1);

ofstream file2;
file2.open (destFile2);

while (!sFile.eof())
{
    sFile.read(sourceFile+chars,1); // forgot ';'

    cout << sourceFile[chars];
    if (chars % 2 == 0)
    {
        file1<< sourceFile[chars];
    }
    else if(chars % 2 == 5)
    {
        file2 << sourceFile[chars]; // misspelled 'sourcFile'
    }
    chars++;

sFile.close();
file1.close();
file2.close();
}

}

int main()
{
split("text.txt", "one.txt", "two.txt");
return 0;
} 
```

虽然没有测试输出。如果它不起作用，你能给我们输入文件让我们自己尝试吗？

# sql - 如何在 sql 中编写此 SUM 查询

> ID：13520835
> 
> 赞同：1
> 
> 时间：2012-11-22T22:30:36.990
> 
> 标签：sql, database

我有两张桌子

运算符表

```
proportion, name, routeid 
```

（比例保持百分比值，例如 100 = 100% 或 50 = 50%，这显示了此运营商运行的服务的百分比）

路由表

```
routeid, frequency 
```

（频率保持每小时的列车数量）

我现在需要做的是编写一个查询，该查询将汇总某个运营商名称为 Arriva 的运营商每小时的列车数量。因此，如果 arriva 运行特定服务 1 的 100% 和服务 2 的 50%，它也应该解决这个问题。

我在想它看起来像这个伪代码

```
All arriva trains per hour = Frequency * (proportion/100)
Where Operators.name = Arriva 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:35:44.840

尝试这个

```
 select SUM((ot.frequency * rt.proportion)/100.0 )
  from operators_table ot 
    join route_table rt on ot.route_id = rt.route_id
  WHERE ot.name = 'Arriva'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:35:53.503

```
SELECT SUM(frequency * proportion/100) total
FROM Operators JOIN Route USING (routeid)
WHERE Operators.name = 'Arriva' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:39:00.420

```
declare @operator table 
(
operatorid int not null identity(1,1) primary key clustered
, name nvarchar(64)
, proportion int--(proportion hold % value e.g 100 = 100% or 50 = 50% this shows the % of services ran by this operator)
, routeid int
)

declare @route table
(
    routeid int not null identity(1,1) primary key clustered
    , frequency int --(frequency holds number of trains per hour)
)

--put your insert statements here

select o.operatorid, o.name, sum(r.frequency * (o.proportion/100)) AllTrainsPerHour
from @operator o
left outer join @route r
on o.routeid = r.routeid
where o.name = 'Arriva'
group by o.operatorid, o.name 
```

# java - 解释这个 Spring MVC 控制器行为

> ID：13520837
> 
> 赞同：1
> 
> 时间：2012-11-22T22:30:39.090
> 
> 标签：java, spring, spring-mvc, dependency-injection

我有这堂课：

```
@Component
@Scope("session")
@Entity
@Table(name = "users")
public class User {

    @Id
    @GeneratedValue
    @GenericGenerator(name = "incremental", strategy = "increment")
    private Long userID;

    @Column(nullable = false)
    private String username;

    @Column(nullable = false)
    private String email;

    @Column(nullable = false)
    private String password;
    // getters and setters
} 
```

而这个控制器：

```
@Controller
@SessionAttributes("user")
@Scope("request")
public class UserCreationWizard {
    @Autowired
    private User user;

    @ModelAttribute("user")
    private User createUser() {
        return user;
    }

    @RequestMapping(value = "/new/users/page/", method = RequestMethod.GET)
    public String begin(HttpServletRequest request) {
        return "wizard"; 
    }

    @RequestMapping(value = "/new/users/page/{page}", method = RequestMethod.POST) 
    public String step(@ModelAttribute("user") User user,
                       @RequestParam("username") String username,
                       @RequestParam("email") String password,
                       @PathVariable() Integer page) {

        return "wizard" + page;
    }

    @RequestMapping(value = "/new/users/page/end", params = "submit", method = RequestMethod.POST) 
    public String end(@RequestParam("password") String password) {

        user.setPassword(password);
        user.setActive(true);
        user.setLastLoggedIn(Calendar.getInstance());

        Session s = HibernateUtils.getSessionFactory().openSession();
        Transaction t = s.beginTransaction();
        try {
            s.persist(user);
            s.flush();
            t.commit();

            s.close();
        } catch (HibernateException e) {
            t.rollback();
        }
        return "wizard";
    }
} 
```

`begin()`只需在用户创建向导中加载第一个视图（jsp）。`username`它具有和的输入字段`email`。在视图中，您提交了一个 POST 表单提交，它会触发`step()`. 在第二个视图（wizard+page.jsp）中，您有一个`password`字段和一个触发的提交输入`end()`。

1.  在调试模式下，我注意到在`step()`将 User 作为 ModelAttribute 传递的地方，我不需要为用户名和密码设置其字段。它们是从 RequestParams 属性中自动获取的。但是，在`end()`我没有 ModelAttribute 的情况下，我必须手动设置密码。Spring如何管理这个？
2.  此外，如果我在控制器中取出该`createUser()`方法，应用程序会失败，说它找不到“用户”的会话属性。此方法如何作为方法参数链接到 MethodAttribute？
3.  最后，如果我取出@SessionAttributes，应用程序不会失败，但我觉得出了点问题。User 用户现在对所有 httprequests 都是全局的吗？

我的一般问题是：spring beans 是否映射到它们的名称？例如。在这里，我将“用户”作为用户，将“用户”作为会话中的用户，将“密码”作为请求参数，将“密码”作为用户成员变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:23:06.777

好的，很多问题。让我们看看，所有引用都是针对当前 Spring MVC 版本的文档。

`user`1) 您在属性中看到的行为在“[在方法参数上使用 @ModelAttribute](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args) ”部分进行了解释

> 方法参数上的 @ModelAttribute 指示应从模型中检索该参数。如果模型中不存在，则应首先实例化参数，然后将其添加到模型中。一旦出现在模型中，参数的字段应该从具有匹配名称的所有请求参数中填充。这在 Spring MVC 中称为数据绑定，这是一种非常有用的机制，可以让您不必单独解析每个表单字段。

Spring 是如何做到这一点的？好吧，源代码是最终的答案，但不难猜测：Spring 知道参数是一个实例，`User`并且通过反射它可以读取类的方法，尤其是它的*setters*。在这种情况下，它找到`setUsername()`and`setEmail()`并且这些方法的参数是 a`String`所以它与请求中的参数兼容。

（顺便说一句：`@RequestParam("email") String password`可能是一个错误。至少令人困惑）

2) 方法`createUser()`前面有注解`@ModelAttribute("user")`。这在“[在方法上使用@ModelAttribute”一](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-methods)节中介绍过

> 方法上的 @ModelAttribute 表示该方法的目的是添加一个或多个模型属性。

因此，此方法将与名称关联的对象`"user"`放在模型上，然后可用作其他方法的参数，例如`step()`. 请注意，注释控制模型中对象使用的标识符。如果您将代码更改为

```
@ModelAttribute("strangeWeirdIdentifier")
private User createUser() { return user; } 
```

该应用程序将中断。`step()`但是，如果您将签名更改为，它将再次起作用

```
public String step(@ModelAttribute("strangeWeirdIdentifier") User user,
                   @RequestParam("username") String username,
                   @RequestParam("email") String password,
                   @PathVariable() Integer page) { 
```

3) 1) 和 2) 中描述的过程在请求期间将对象存储在模型中。使用类注释`@SessionAttributes("user")`，您可以延长对象的寿命，将其添加到当前对象`Session`或等效对象中。例如，您可以在其他`Controller`s 中使用与方法相同的对象`step()`。

最后只是为了清楚

*   在问题 2 中看到的注释发生在问题 1 中看到的用法之前。
*   您的问题 3 中的注释可能不需要
*   Spring 不会将 bean 映射到它们在 Java 代码中的名称，而是映射到注解中使用的名称。为了清楚起见，重复与您的示例相同的名称并不少见。

希望这比官方文档更清楚，通常太简短，我会给你。

# mysql - 如何在 mysql 工作台中查看 OUT 参数

> ID：13520841
> 
> 赞同：2
> 
> 时间：2012-11-22T22:30:55.253
> 
> 标签：mysql, mysql-workbench

我可以`CALL`从 MySQL Workbench 存储过程，但我没有看到任何返回的输出参数是什么。

假设我有一个程序`PROCEDURE test(IN id int, OUT name tinytext)`- 我如何从查询窗口调用它来检查它是否返回正确的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:06:54.040

你需要参数`SELECT`。`OUT`

```
CALL test(1, @v); SELECT @v; 
```

请注意：您必须同时执行这两个查询（在行尾点击控制+输入光标）。此外，当前版本的工作台似乎有一个错误，它不适用于任意参数名称。我无法摆脱这种模式，当它起作用时，当它现在不起作用时。

# java - 如何强制 dateFormat 将指定数量的字符视为有效字符？

> ID：13520846
> 
> 赞同：2
> 
> 时间：2012-11-22T22:31:08.513
> 
> 标签：java, date, formatting, simpledateformat

以下代码...

```
SimpleDateFormat df = new SimpleDateFormat("yyyyMMdd");
df.setLenient(false);
Date date = df.parse("2012115"); 
```

...将字符串解析为`"2012115"`相当于 2012 年 11 月 5 日的日期。我希望它无法解析，因为它缺少一天字符。换句话说，我只希望字符串`"20121105"`计算到那个日期。除了评估字符串的长度之外，有没有办法强制执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:45:31.070

> ...将字符串“2012115”解析为相当于 2012 年 11 月 5 日的日期。我希望它无法解析，因为它缺少一天字符。换句话说，我只希望字符串“20121105”计算到那个日期。

**我怀疑你只能使用格式化程序来做到这一点。**作为一种解决方法，您可能需要在解析之前检查日期字符串长度，如下所示：

```
 String dateString = "2012115";
      String formatString = "yyyyMMdd";
      if(dateString == null || dateString.length() != formatString.length()){
         throw new ParseException("Invalid Date Input", 0);
      }
      SimpleDateFormat formatter= new SimpleDateFormat(formatString);
      formatter.setLenient(false);
      Date date = df.parse(dateString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:47:24.570

您实际上可以再次格式化并检查它们是否相同

```
SimpleDateFormat df = new SimpleDateFormat("yyyyMMdd");
df.setLenient(false);
String dstr = "2012115";
Date date = df.parse(dstr);
String newdstr = df.format (date);
if (!newdstr.equals(dstr)) {
   throw new ParseException ("bla bla");
} 
```

# android - setCompoundDrawablesWithIntrinsicBounds 方法中的空指针异常

> ID：13520850
> 
> 赞同：0
> 
> 时间：2012-11-22T22:31:41.323
> 
> 标签：android, nullpointerexception, android-alertdialog

我正在尝试使 AlertDialog Positive & Negative Buttons 成为 ImageButtons 但是日志猫给了我一个 NullPointerException 指向该方法&这里是我的代码

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                Main.this);
        AlertDialog d = builder.create();

        builder.setTitle("Notification");
        builder.setMessage("You have a running session NOW .. Check to Enter").setPositiveButton("YES",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                         .....
                    }
                }).setNegativeButton("NO", null);
        builder.create().show();

        Button yes = d.getButton(AlertDialog.BUTTON_POSITIVE);
        yes.setCompoundDrawablesWithIntrinsicBounds(R.drawable.navigationaccept, 0, 0, 0);

        Button no = d.getButton(AlertDialog.BUTTON_NEGATIVE);
        no.setCompoundDrawablesWithIntrinsicBounds(R.drawable.navigation_cancel, 0, 0, 0);
    }
}); 
```

这是我的原木猫

```
11-22 21:22:55.227: E/AndroidRuntime(1125): FATAL EXCEPTION: main
11-22 21:22:55.227: E/AndroidRuntime(1125): java.lang.NullPointerException
11-22 21:22:55.227: E/AndroidRuntime(1125):     at     guc.edu.iremote.Main$3.run(Main.java:294)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at     android.os.Handler.handleCallback(Handler.java:615)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at android.os.Looper.loop(Looper.java:137)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at     android.app.ActivityThread.main(ActivityThread.java:4745)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at     java.lang.reflect.Method.invokeNative(Native Method)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at java.lang.reflect.Method.invoke(Method.java:511)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-22 21:22:55.227: E/AndroidRuntime(1125):     at     dalvik.system.NativeStart.main(Native Method) 
```

# java - Android 日历 - 查看显示错误日期/时间的事件

> ID：13520851
> 
> 赞同：2
> 
> 时间：2012-11-22T22:31:55.570
> 
> 标签：java, android, google-calendar-api

我正在运行以下代码来查看我从 ListActivity 中选择的特定事件：

```
Uri viewUri = Uri.parse("content://com.android.calendar/events/"+events.get(position).id);
Intent l_intent = new Intent(Intent.ACTION_VIEW);
l_intent.setData(viewUri);
startIntent(l_intent); 
```

我知道 Android 不直接支持上述代码 - 我在 Android 2.2 上运行它。但是，无论我点击什么事件，日期/时间都显示为 1969 年 12 月 31 日晚上 7:00 当我查看我的实际日历时，该事件在其应有的位置。另外，如果我运行以下行：

```
System.out.println("start time is"+getDateTimeStr(events.get(position).startTime)); 
```

（其中 getDateTimeStr 格式化字符串），我得到正确的日期/时间。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:02:07.203

`December 31, 1969 at 7:00 p.m` is the start value in `EST` timezone of `Date` object initialized with no time i.e. `January 01, 1970 at 0:00 a.m` in UTC timezone.

This way I am sure that your date is just getting initialized without any time. Please review your code and set the time appropriately.

# javascript - 如何让 Windows Phone 中的 WebBrowser 导航到网页的特定部分？

> ID：13520853
> 
> 赞同：1
> 
> 时间：2012-11-22T22:32:10.393
> 
> 标签：javascript, windows-phone-7, webbrowser-control

Windows Phone 7.5 中的 Web 浏览器似乎无法识别网页中的名称或 ID 锚点，因此例如导航到Glossary.html 页面的顶部，但无论我是否将其指定为`glossary.html#myterm`都不会跳转到标签`myterm`一个 id 或一个名字。在使用`#myterm`作品的页面内。

我尝试使用 javascript 来解决这个问题，例如，

```
if (document.loaded) {
    init();
} else {
    if (window.addEventListener) {  
        window.addEventListener('load', init, false);
    } else {
        window.attachEvent('onload', init);
    }
}

function init() {
    var els = document.URL.split("#");
    if (els.length == 1) {
        return;
    }
    var newurl = '#' + els[els.length - 1];
    window.location.replace(newurl);
} 
```

这也不起作用。奇怪的是，如果我附加`init()`到另一个元素上的单击事件，它*确实*有效。

有没有其他人解决了这个问题？

# javascript - 对象使用原型函数名称而不是其属性的名称

> ID：13520854
> 
> 赞同：4
> 
> 时间：2012-11-22T22:32:12.277
> 
> 标签：javascript

我创建了两个函数 A 和 B。将 A 作为[B.jsfiddle的原型](http://jsfiddle.net/WbZfz/)

```
function A(){

}

function  B(){
    this.name ="Class B";
}

B.prototype = A;
var b = new B();
alert(b.name); // expected Class B got A 
```

我知道我应该使用`B.prototype = new A();`

上述行为是预期的吗？在上述情况下是否有可能获得“B 类”而不是“A”？

**注意：**我在上面使用是因为 A 有一些与之关联的属性，`A.text = "Text"` `A.text1 = "Text2"`并且我希望这些属性对 B 可用。所以`B.prototype == A.prototype.`不能使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:37:40.133

看看可能的重复[What is the reason to use the 'new' keyword at Derived.prototype = new Base](https://stackoverflow.com/q/12592913/1048572)以及这个关于为什么 javascript 中没有“类”的[答案。](https://stackoverflow.com/a/13418980/1048572)

是的，这种行为是预期的。`B.prototype`，您的`b`实例继承的对象，是函数对象`A`。所以，它确实继承了它的[`name`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)，即 string `"A"`。

而且，这个属性是不可变的（它的属性描述符是`{configurable: false, enumerable: false, value: "B", writable: false}`），所以当你尝试为 分配一个新值时`b.name`，[这将检查](http://es5.github.com/#x8.7.2)[`[[CanPut]]`](http://es5.github.com/#x8.12.4)哪个返回`false`- 并且没有任何反应。在严格模式下，`Invalid assignment in strict mode`会抛出 TypeError ( [demo](http://jsfiddle.net/WbZfz/2/) )。

您只能使用[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty).

* * *

@Edit：我不确定您为什么希望这些属性由`B`. 它们是`A`构造函数的“静态属性”，它们应该留在那里。目前没有办法让 Function 继承自 之外的任何东西`Function.prototype`，所以要么复制它们，要么不使用它们。告诉我们您需要什么，我们可以找到解决方案。

更改`prototype`函数（以及一般对象）的属性不会使它们碰巧继承自其他任何东西。函数的`prototype`属性指向新创建（构造）实例将继承的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:36:38.873

如果你想`B`从 中“继承” `A`，请写：

```
B.prototype = Object.create( A.prototype ); 
```

# dynamics-crm - 替换“https://live.azure.com/”？

> ID：13520856
> 
> 赞同：2
> 
> 时间：2012-11-22T22:32:16.127
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

我正在尝试为 CRM 2011 设置客户和合作伙伴门户，并且遇到了非常困难的时间。我遵循了门户的文档（来自 pinpoint 的门户，Contoso 域附带的默认门户），但是当我到达要求我注册我的应用程序的部分时，我只是不知道该怎么做......

在文档中，它说转到[https://live.azure.com/](https://live.azure.com/)并注册应用程序，但该站点不再存在，或者至少我似乎无法访问它（尝试用谷歌搜索，但我不能遇到任何允许 m 注册应用程序的情况）。是否有您注册应用程序的新网站？有人请帮助我，因为这真的让我很烦，而且微软根本不更新其文档是非常愚蠢的。

谢谢你的帮助！:)

关于我的设置的详细信息：我们（网络管理员和我）在办公室的测试环境中设置了 CRM 2011，并将 Exchange 和 CRM 2011 放在两个环境中。我可以通过 Exchange 和来自 CRM 的电子邮件进行交流，但我不知道如何允许用户访问此客户门户和合作伙伴门户。这都是使用 Contoso 域和示例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:31:15.560

I met the same issue and [answer to this thread](http://www.datazx.cn/Fv7p5a/q7-HR/975ys8a/2q7xs6/i9rc8rgd-9rsi-fjxm-sfds-x6bbjj8ijidm23rsdfd.html) helps me. Moreover, check next article - [Getting Your Client ID for Web Authentication](http://go.microsoft.com/fwlink/?LinkID=144070), for some extra info.

You can go to the Windows Live application management site via [this link](http://go.microsoft.com/fwlink/?LinkID=144070).

# ruby-on-rails - 如何从 WSDL 生成 Ruby Wash_Out WebService Stub

> ID：13520858
> 
> 赞同：0
> 
> 时间：2012-11-22T22:32:31.873
> 
> 标签：ruby-on-rails, web-services

在 ruby​​ on rails 中使用wash_out 时，有什么方法可以从现有的 WSDL 文件生成 API 和控制器代码存根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:01:57.487

这在wash_out 的[Github 问题页面](https://github.com/inossidabile/wash_out/issues/57)中进行了讨论。

回应是，它不会发挥它有用的程度。

# sql - 如何在 PostgreSQL 中仅列出表的属性名称

> ID：13520859
> 
> 赞同：4
> 
> 时间：2012-11-22T22:32:39.560
> 
> 标签：sql, database, postgresql, metadata

我知道我可以使用 \d 列出架构。但是，我需要制作一个前端应用程序来显示表的属性名称。如何在 PostgreSQL 中获取唯一的属性名称？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T22:51:40.257

您需要在`pg_catalog`或`information_schema`模式下查询适当的表。运行`psql -E ...`，然后 psql 显示在内部命令中使用的元数据查询，例如`\d, \dt, \dv, ...`

`information_schema`与portalbe相同`pg_catalog`但更多（在SQL标准中定义）。如果您的应用程序仅使用 postgres，那么我将使用 pg_catalog 而不是`information_schema`

例如，此查询显示的列`attribute`

```
SELECT a.attname,
  pg_catalog.format_type(a.atttypid, a.atttypmod),
  (SELECT substring(pg_catalog.pg_get_expr(d.adbin, d.adrelid) for 128)
   FROM pg_catalog.pg_attrdef d
   WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef),
  a.attnotnull, a.attnum
FROM pg_catalog.pg_attribute a
WHERE a.attrelid = 'attribute'::regclass AND a.attnum > 0 AND NOT a.attisdropped
ORDER BY a.attnum 
```

更新：您可以使用这样的简单查询：

```
SELECT attname 
FROM pg_catalog.pg_attribute 
WHERE attrelid = 'attribute'::regclass AND attnum > 0 AND NOT attisdropped 
```

或使用等效查询：

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name = 'attribute' 
ORDER BY ordinal_position 
```

如果您在多个模式中具有相同名称的同一张表，则您还需要用户模式名称并且查询会稍微复杂一些。

# xcode - UISwipeGestureRecognizer：如何强制 touchesMoved 停止并进入 touchesEnded

> ID：13520864
> 
> 赞同：1
> 
> 时间：2012-11-22T22:33:03.817
> 
> 标签：xcode, ios5, rotation, uigesturerecognizer, touchesmoved

我正在使用 UISwipeGestureRecognizer。我有以下问题。当我触摸一个正方形时，它开始旋转。当我停止触摸它时，它停止旋转。我想做一个计时器，当它通过 10 秒的触摸时，正方形自动停止旋转。我找到了一个解决方案，但我认为它不干净。您是否有任何想法从方法中自动传递：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

到方法：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

我正在使用这段代码：

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
if ([self state] == UIGestureRecognizerStatePossible) {
      [self setState:UIGestureRecognizerStateBegan];
       NSLog(@"Algo Began");

   } 

    if ([[event touchesForGestureRecognizer:self] count] > 1)
    {
        [self setState:UIGestureRecognizerStateCancelled ];
        NSLog(@"Algo Fail");

    }

    if (chowMuch==50) {
        //[self setState:UIGestureRecognizerStateFailed  ]; 
        [self setState:UIGestureRecognizerStateRecognized  ]; 

        NSLog(@"Algo falla que pasara");
    }

   else {
      [self setState:UIGestureRecognizerStateChanged];
       NSLog(@"Algo changed");

}
} 
```

该方法一直在执行`NSLog(@"Algo changed")`，这意味着当我触摸正方形时，状态为 UIGestureRecognizerStateChanged，但当`chowMuch`为 50 时，此完成。你有什么想法可以传递给`touchesEnded`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T20:52:40.150

尝试删除并重新添加接收（或响应）触摸的子视图。

由于有人对答案投了反对票：即使用户从未抬起手指，上面也会取消手势。我已经寻找了一段时间，但找不到另一种解决方案。

当然，这不适合更复杂的任务。另请参阅[UIScrollView 并取消缩放捏合手势](https://stackoverflow.com/questions/6234945/uiscrollview-and-cancel-a-zooming-pinch-gesture/15603777#15603777)

# jquery - github.com/jquery/jquery 作为 git 子模块

> ID：13520870
> 
> 赞同：2
> 
> 时间：2012-11-22T22:33:53.060
> 
> 标签：jquery, git, git-submodules

我想为我的 github 项目使用 jQuery 1.8.3 的本地副本。我想以正确的方式进行操作，即将其添加为子模块：

```
git submodule add git://github.com/jquery/jquery.git js/lib/jquery 
```

完毕！问题是 jQuery 存储库没有预构建的 jQuery 版本，而我使用的其他 javascript 库也没有。我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:50:35.163

您可以在本地自己构建它。GitHub 项目页面上有一些[说明。](https://github.com/jquery/jquery#how-to-build-your-own-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:53:31.703

以正确的方式进行操作并不意味着添加子模块。

您可以完美地使用轻量级 .js 文件，或者简单地使用更适合您的服务器的 CDN。

# sql - 使用 will_paginate 查找条目存在于哪个页面

> ID：13520874
> 
> 赞同：2
> 
> 时间：2012-11-22T22:34:51.923
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, will-paginate

我正在尝试找到一种方法来告诉 will_paginate 在给定对象的情况下从哪个页面开始，但我无法在其上找到任何文档（也许 will_paginate 中没有方法？？）。

这是我的场景：

我显示该项目的页面有 2 列，左侧使用 will_paginate 一次显示 25 个项目。

当用户单击电子邮件按钮时，我会生成包含指向该特定项目的重新进入链接的出站电子邮件。链接路由到我的索引页面并传递我想要的对象的 id 但我需要告诉 will_paginate 要呈现哪个页面，因为该项目可以存在于第 1、2、3 页等...

我知道我可以找到所有项目，然后找到我当前项目的排名并做一些数学运算，但我想知道是否有更好的方法，即 will_paginate 有什么有趣的方法来做这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-13T06:54:27.380

是的，我得到了这个问题。向我提出类似的问题，就我而言：-

**和我一起工作**

```
@posts = Post.all.order_by(:created_at)

@post = @posts.find_by(id: params[:id])

total_posts_count = @posts.where("posts.created_at <= ?", @post.created_at).count

@page = (total_posts_count/per_page.to_f).ceil

@posts = @posts.paginate(per_page: per_page, page: @page) 
```

这里的逻辑...

```
total_posts = 50
per_page = 25

50/25 = 2 
```

# python - 如何在 python 中创建多个空列表？

> ID：13520876
> 
> 赞同：41
> 
> 时间：2012-11-22T22:35:01.250
> 
> 标签：python, list, empty-list

如何在不手动输入的情况下制作许多空列表

```
list1=[] , list2=[], list3=[] 
```

是否有一个 for 循环可以让我有“n”个这样的空列表？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-11-22T22:36:50.947

列表理解在这里最简单：

```
>>> n = 5
>>> lists = [[] for _ in range(n)]
>>> lists
[[], [], [], [], []] 
```

小心不要落入以下陷阱：

```
>>> lists = [[]] * 5
>>> lists
[[], [], [], [], []]
>>> lists[0].append(1)
>>> lists
[[1], [1], [1], [1], [1]] 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-11-22T22:40:44.920

如果您想创建没有“列表列表”的不同列表，请尝试以下操作：

```
list1, list2, list3, list4 = ([] for i in range(4)) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-22T22:36:50.510

查找[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
listOfLists = [[] for i in range(N)] 
```

现在，`listOfLists`里面有 N 个空列表

有关列表推导的更多链接：

[1](https://stackoverflow.com/questions/9418389/list-comprehension) [2](https://stackoverflow.com/questions/3766711/python-advanced-nested-list-comprehension-syntax) [3](https://stackoverflow.com/questions/4260280/python-if-else-in-list-comprehension?rq=1)

希望这可以帮助

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-06T14:29:59.170

我看到这里的许多答案会为您提供许多未指定名称的列表（作为较大列表的元素）。这可能并不总是需要的。可以使用元组创建多个空列表，每个列表具有不同的名称/值：

```
a,b,c = ([],[],[]) 
```

改变这个结构应该得到你想要的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-22T22:42:30.020

这个怎么样。

```
def mklist(n):
    for _ in range(n):
        yield [] 
```

用法：

```
list(mklist(10))
[[], [], [], [], [], [], [], [], [], []]

a, b, c = mklist(3) # a=[]; b=[]; c=[] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-09T16:32:49.873

对不起，我迟到了两年，但也许我仍然可以帮助其他人。

下面的代码将动态地“创建”自身。对于每次迭代，将发出以下命令：

> 列表**编号**= []

其中**number**是循环中 i 的值。

```
x = 3 # amount of lists you want to create
for i in range(1, x+1):
    command = "" # this line is here to clear out the previous command
    command = "list" + str(i) + " = []"
    exec(command) 
```

这段特定代码的结果是创建了三个变量：list1、list2 和 list3，每个变量都分配了一个空列表。

您可以将其概括为几乎任何您想要的东西。请注意，据我所知，您不能将其放入函数中，因为变量和全局变量是如何工作的。

```
name = "my_var" # This has to be a string, variables like my_var1, my_var2 will be created.
value = "[]" # This also has to be a string, even when you want to assign integers! When you want to assign a string "3", you'd do this: value = "'3'"
amount = 5 # This must be an integer. This many variables will be created (my_var1, my_var2 ... my_var5).

for i in range(1, amount+1):
    command_variable = ""
    command_variable = name + str(i) + " = " + value
    exec(command_variable) 
```

我希望我有所帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-03T16:02:23.103

您还可以添加列表列表列表列表......也像这样。它不会返回任何错误。但我不知道它是做什么用的。

```
n = 5 
>>> lists = [[[]]] for _ in range(n)]
>>> lists
   [[[[]]], [[[]]], [[[]]], [[[]]], [[[]]]] 
```

# php - 用ajax获取元素

> ID：13520877
> 
> 赞同：-1
> 
> 时间：2012-11-22T22:35:06.183
> 
> 标签：php, javascript, ajax

我向 php 页面发送请求，输出是这样的

```
 <?php
   echo "<div id=\"someid\">
         innerHTML
        </div>"
   ?> 
```

我试图捕捉元素，但它不起作用

```
 var a=document.getElementById('someid');
     alert(a.innerHTML);//alert nothing 
```

如何使用纯 JavaScript 修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:59:07.730

如果您使用 AJAX 获取 PHP 页面的内容（而不是`include`ing），则必须将其附加到 DOM 某处。

您是否将其附加到代码中的 DOM 中？

* * *

如果您使用`include`,`require`等，那么这不是 AJAX。

您必须等到页面加载完毕，因此代码将如下所示：

```
window.onload = function() {
    var elem = document.getElementById('foo');
    alert(elem.innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:04:32.243

您需要将代码放入适当的 ajax 结构中。它应该看起来像[这些示例](https://stackoverflow.com/questions/13499559/make-div-text-change-on-click-based-on-php-data-using-ajax/13501242#13501242)。

# javascript - d3 choropleth：更改数据而不重新加载地图

> ID：13520879
> 
> 赞同：1
> 
> 时间：2012-11-22T22:35:16.400
> 
> 标签：javascript, d3.js

我正在使用 d3（更像是学习使用）来创建等值线图。我已经管理加载我的数据和 geojson 对象并获得要显示的地图，但我想添加一些转换和用户选择数据的能力。

这是我到目前为止所拥有的一个示例（感谢 github 和 Mike Bostock 的不错的 gist 查看器）：

[http://bl.ocks.org/4131166](http://bl.ocks.org/4131166)；和 [http://gist.github.com/4131166](http://gist.github.com/4131166)

我设法通过将关联的类更改为组来更改颜色，但是我将其交换为 Cynthia Brewer 的颜色的 js 版本，因为我想在它们之间进行转换。我还希望在选择不同的“乐队”时改变颜色。

我认为我的问题在于 updateValues 函数 - 它做得太多了。它一次性加载数据、绘制多边形和填充颜色。

是否可以绘制多边形，然后在单独的函数中关联颜色？

我曾考虑添加一个：

.attr("id", function(d) { return d.id; })

行到绘制路径的语句，然后以某种方式使用它在单独的语句中链接到数据，但我不太确定如何实现这一点 - 我猜想以某种方式检索每个路径的 id 并链接到数据。 ..？

任何帮助将不胜感激。即使这是关于如何改进我的代码的建议。我总是很高兴在相关的地方观察最佳实践。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:20:32.230

d3 的核心是解决方案。任何时候你做`d3.selectAll( ... ).data( ... )`你得到的都是一个**选择**。

要影响**选择**中的每个节点，您可以链接各种 d3 函数。

还有另外两个特殊功能可以链接子选择：`enter()`新节点和`exit()`不再存在的节点。

如果更新底层数据，则调用顶层`d3.selectAll( ... ).data( ... )`，DOM 节点将根据这三个链进行更新：选择（所有节点）、输入（添加节点）和退出（删除节点）。

所以，在**选择**链上设置你的颜色，而不是输入，它们会在没有重新创建的情况下更新。

# .net-4.5 - 将触发事件的异步函数转换为可等待函数 WP8

> ID：13520881
> 
> 赞同：0
> 
> 时间：2012-11-22T22:35:50.703
> 
> 标签：.net-4.5, windows-phone-8

在 windows phone 8 中从手机中读取联系人只有以下代码：

```
Dim WithEvents objContacts As New Microsoft.Phone.UserData.Contacts

Private Sub ReadContacts
objContacts.SearchAsync("", Microsoft.Phone.UserData.FilterKind.None, Nothing)
'Result will be read from the event
End Sub

'Event 

Private Sub A_SearchCompleted(sender As Object, e As Microsoft.Phone.UserData.ContactsSearchEventArgs) Handles A.SearchCompleted
Dim B = e.Results.ToList
End Sub 
```

我的问题是：如何将该功能转换为类中的可等待函数？

例子：

```
Public Class Contacto

Public Async Function GetContacts() As System.Threading.Tasks.Task(Of List(Of Microsoft.Phone.UserData.Contact))

'Do some work: here's my question

End Function

End Class 

'So I can call my function

Dim o as new Contacto

dim Contacts = Await o.GetContacts() 
```

非常感谢，感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:55:55.587

如果要在函数中调用 await ，则需要添加 async 关键字

```
public async void functionname () //c# syntax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:33:46.090

我通过使用 System.Threading.Tasks.TaskCompletionSource 类找到了我的问题的解决方案

```
Public Class CustomContacts
        Dim WithEvents objContacts As New Microsoft.Phone.UserData.Contacts
        Dim tcs As New System.Threading.Tasks.TaskCompletionSource(Of List(Of Microsoft.Phone.UserData.Contact))

        Public Async Function GetContacts() As System.Threading.Tasks.Task(Of List(Of Microsoft.Phone.UserData.Contact))
            objContacts.SearchAsync("", Microsoft.Phone.UserData.FilterKind.None, Nothing)
            Dim ListContacts = Await tcs.Task

           Return ListContacts
        End Function

        Private Sub objContacts_SearchCompleted(sender As Object, e As Microsoft.Phone.UserData.ContactsSearchEventArgs) Handles objContacts.SearchCompleted
            tcs.SetResult(e.Results.ToList)
        End Sub
    End Class

'So now I can call the function as follow:

dim objContacts as new CustomContacts
Dim myContacts = Await objContacts.GetContacts 'returns List(Of Microsoft.Phone.UserData.Contact) 
```

# ruby - 未定义的方法 `output_data' 用于# （无方法错误）

> ID：13520890
> 
> 赞同：2
> 
> 时间：2012-11-22T22:36:51.503
> 
> 标签：ruby, class, methods, nomethoderror

我不断收到此错误：

> `event_manager.rb:83:in`': 未定义的方法`output_data' for #<EventManager:0x007fc5018320c0> (NoMethodError)`

我正在关注[这个网站上](http://tutorials.jumpstartlab.com/projects/eventmanager.html#iteration-3%3a-outputting-cleaned-data)的练习：

这是我的代码（我的错误以`DEF OUTPUT_DATA`...结尾）：

```
# Dependencies

require "csv"

# Class Definition

class EventManager

INVALID_PHONE_NUMBER = "0000000000"
INVALID_ZIPCODE = "00000"

def initialize
puts "EventManager Initialized."
filename = "event_attendees.csv"
@file = CSV.open(filename, {:headers => true, :header_converters => :symbol})
end

def print_names
@file.each do |line|
  puts line.inspect
  puts line[2] + " " + line[3]
 end
end

#printing home phone number method
def print_numbers
 @file.each do |line|
  number = clean_number(line[:homephone])
  puts number
end
end
 #cleaning numbers method
def clean_number(number)
  cleaner= number.delete('.' + ')' + '(' + '-')
  if cleaner.length == 10
    # Do Nothing
  elsif cleaner.length == 11
   if cleaner.start_with?("1")
    cleaner = cleaner[1..-1]
  else
    cleaner = INVALID_PHONE_NUMBER
  end
else
  cleaner = INVALID_PHONE_NUMBER
end
  return cleaner
end

def clean_zipcode(original)
    if original.nil?
    zipcode = INVALID_ZIPCODE
  elsif original.length < 5
    while original.length < 5
      original = original.insert(0, "0")
    end  
  else
  return original
end
return zipcode
end

def print_zipcodes
  @file.each do |line|
    zipcode = clean_zipcode(line[:zipcode])
    puts zipcode
end

def output_data
output = CSV.open("event_attendees_clean.csv", "w")
@file.each do |line|
  output << line
end
end
end
end

# Script
manager = EventManager.new
#manager.print_numbers
#manager.print_zipcodes
manager.output_data 
```

我已经尝试了几件事，通过互联网检查了所有内容，但我自己无法弄清楚。

我将非常感谢*任何*帮助。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:44:04.797

您有`output_data`嵌入方法的定义`print_zipcodes`（迭代块未关闭）。尝试缩进你的代码——这样就很容易发现错误。

# python - 循环遍历标签和编写 XML 时出现 Unicode 错误

> ID：13520892
> 
> 赞同：0
> 
> 时间：2012-11-22T22:36:55.860
> 
> 标签：python, xml, iteration, elementtree

我正在尝试写出一些确实有一些特殊字符的 XML。我遇到麻烦的地方是当我遍历标签列表以创建几个称为标签的元素时。

```
# -*- coding: utf-8 -*-
import xml.etree.ElementTree as xml

reload(sys)
sys.setdefaultencoding('utf-8') 
```

代码片段：

```
 check = (video['tags'].split(', '))
    x=len(check)
    y=x-1
    for i in xrange(0,y):
        tagger = xml.SubElement(doc, 'field', name="tag")
        s=check[i]
        tagger.text = s.encode('utf-8') 
```

问题是当我尝试写：

```
output = open(file_name,'w+')
tree = xml.ElementTree(add)
tree.write(output)
output.close() 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "xml_breakup3.py", line 108, in <module>
    tagger.text = s.encode('utf-8')
UnicodeDecodeError: 'utf8' codec can't decode byte 0x81 in position 0: invalid start byte 
```

当我在没有这个片段的情况下运行我的代码时，它会毫无问题地写入 xml。如果我让 tagger.text = 任何类型的字符串（即'99'）它写得很好。如果我让循环从 0 变为 3，它就可以工作。只有当我尝试遍历整个列表时，我才会收到 UnicodeDecode 错误

当我尝试时：

```
 check = (video['tags'].split(', '))
    for ta in check:
        tagger = xml.SubElement(doc, 'field', name="tag")
        tagger.text = ta 
```

我明白了：

```
 Traceback (most recent call last):
       File "xml_breakup3.py", line 172, in <module>
         tree.write(output)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 821, in write
    serialize(write, self._root, encoding, qnames, namespaces)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 940, in _serialize_xml
     _serialize_xml(write, e, encoding, qnames, None)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 940, in _serialize_xml
    _serialize_xml(write, e, encoding, qnames, None)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 938, in _serialize_xml
    write(_escape_cdata(text, encoding))
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1074, in _escape_cdata
    return text.encode(encoding, "xmlcharrefreplace") 
```

UnicodeDecodeError：“utf8”编解码器无法解码位置 0 的字节 0xba：无效的起始字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:46:53.827

您可能想尝试`str`从您正在编码的片段前面删除 。当您使用 时`str`，您正在将我假设的 Unicode 转换为字符串，然后您正在尝试对其进行编码。如果您将其保留为 Unicode 并直接解码，它应该可以工作：

```
>>> s = u'\xba'
>>> print s
º
>>> s.encode('utf8')
'\xc2\xba'
>>> str(s).encode('utf8')

Traceback (most recent call last):
  File "<pyshell#30>", line 1, in <module>
    str(s).encode('utf8')
UnicodeEncodeError: 'ascii' codec can't encode character u'\xba' in position 0: ordinal not in range(128) 
```

# javascript - 使用 JavaScript 获取 SVG 地图以在 IE8 中工作

> ID：13520904
> 
> 赞同：0
> 
> 时间：2012-11-22T22:38:16.150
> 
> 标签：javascript, internet-explorer-8, svg

我有一个 SVG 文件，它使用 JavaScript 添加一些样式。这在 IE8 中不起作用。我也不知道它是否适用于 IE9，但假设它可以。在这里能找到它：

*移除*

有人告诉我，名为 SVGWeb 的项目将允许 IE8 呈现 SVG 并解析 JavaScript 以修改 SVG。但是，我已经下载了 SVGWeb，并且这些演示在 IE8 中不起作用。

我听说过其他一些允许 SVG 在 IE8 中工作的解决方案。

有谁知道是否有办法让 SVG 在 IE8 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:34:56.727

试试这里的例子是否适合你：

[http://www.svgopen.org/2010/papers/15-SVG_in_Internet_Explorer/](http://www.svgopen.org/2010/papers/15-SVG_in_Internet_Explorer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:23:21.990

经过一番研究，这个 SVG 不适用于 IE8。

我想我需要弄清楚如何将其转换为 Flash。对于网络标准来说太多了。

# javascript - 没有命名空间污染的模块化客户端 Javascript 的方法

> ID：13520906
> 
> 赞同：11
> 
> 时间：2012-11-22T22:38:58.917
> 
> 标签：javascript, node.js

我正在编写客户端代码，并想编写多个模块化的 JS 文件，这些文件可以在防止全局命名空间污染的同时进行交互。

索引.html

```
<script src="util.js"></script>
<script src="index.js"></script> 
```

实用程序.js

```
(function() {
    var helper() {
        // Performs some useful utility operation
    }
}); 
```

index.js

```
(function () {
    console.log("Loaded index.js script");
    helper();
    console.log("Done with execution.");
}) 
```

这段代码很好地将实用程序函数保存在一个单独的文件中，并且不会污染全局命名空间。但是，助手实用程序函数将不会被执行，因为“助手”存在于单独的匿名函数命名空间中。

另一种方法是将所有 JS 代码放在一个文件中，或者在全局命名空间中使用单个变量，如下所示：

```
var util_ns = {
    helper: function() {
        // Performs some useful utility operation.        
    },
    etc.
} 
```

这两种方法在模块化和干净的命名空间方面都有缺点。

我习惯于在 Node.js 领域工作（服务器端），我可以在另一个 Javascript 文件中“要求”一个 Javascript 文件，从而有效地将 util.js 绑定注入 index.js 命名空间。

我想在这里（但在客户端）做一些类似的事情，这将允许将代码编写在单独的模块化文件中，而不是在全局命名空间中创建任何变量，同时允许访问其他模块（例如实用程序模块）。

这是否以简单的方式可行（没有库等）？

如果不是，在使客户端 JS 表现得更像 Node 和 npm 的领域中，我知道存在 requireJS、browserify、AMD 和 commonJS 标准化尝试。但是，我不确定每种方法的优缺点和实际用法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T22:42:44.467

我强烈建议您继续使用[RequireJS](http://requirejs.org/)。

* * *

模块支持方法（没有需求/依赖项）：

```
// moduleA.js

var MyApplication = (function(app) {

    app.util = app.util || {};

    app.util.hypotenuse = function(a, b) {
        return Math.sqrt(a * a + b * b);
    };

    return app;
})(MyApplication || {});

// ----------

// moduleB.js

var MyApplication = (function(app) {

    app.util = app.util || {};

    app.util.area = function(a, b) {
        return a * b / 2;
    };

    return app;
})(MyApplication || {});

// ----------

// index.js - here you have to include both moduleA and moduleB manually
// or write some loader

var a = 3,
    b = 4;
console.log('Hypotenuse: ', MyApplication.util.hypotenuse(a, b));
console.log('Area: ', MyApplication.util.area(a, b)); 
```

在这里，您只创建了一个全局变量（命名空间）`MyApplication`，所有其他内容都“嵌套”在其中。

小提琴 - [http://jsfiddle.net/f0t0n/hmbb7/](http://jsfiddle.net/f0t0n/hmbb7/)

* * *

**我之前在项目中使用的另一种方法 - [https://gist.github.com/4133310](https://gist.github.com/4133310) 但无论如何，当我开始使用 RequireJS 时，我扔掉了所有这些东西。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T22:43:01.083

您应该查看[browserify](https://github.com/substack/node-browserify)，它将模块化 JavaScript 项目处理为单个文件。您可以`require`像在节点中一样使用它。

它甚至提供了一堆 node.js 库，比如`url`,`http`和`crypto`.

**补充**：在我看来，browserify 的优点在于它易于使用，不需要自己的代码——你甚至可以使用你已经编写好的 node.js 代码。根本不需要样板代码或代码更改，它与 node.js 一样符合 CommonJS。它也输出一个`.js`允许您`require`在您的网站代码中使用的单曲。

恕我直言，这有两个缺点：首先，如果它们包含在同一网站代码中，则由 browserify 编译的两个文件可以覆盖它们的`require`功能，因此您必须小心。另一个当然是您每次都必须运行 browserify 才能更改代码。当然，模块系统代码始终是编译文件的一部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-22T23:05:25.070

所谓的“全局命名空间污染”被严重高估为一个问题。我不知道 node.js，但是在一个典型的 DOM 中，默认情况下有数百个全局变量。名称重复很少是明智选择名称的问题。添加一些使用脚本不会有丝毫不同。使用如下模式：

```
var mySpecialIdentifier = mySpecialIdentifier || {}; 
```

意味着添加一个变量，它可以作为所有代码的根。然后，您可以将模块添加到您心中的内容中，例如

```
mySpecialIdentifier.dom = {
    /* add dom methods */
}
(function(global, undefined) {
    if (!global.mySpecialIdentifier) global.mySpecialIdentifier = {};
    /* add methods that require feature testing */
}(this)); 
```

等等。

您还可以使用“扩展”功能来测试和添加基础对象，这样您就不会复制该代码，并且可以从不同的文件轻松地将方法添加到基础库对象。您的库文档应该在成为问题之前告诉您是否正在复制名称或功能（测试也应该告诉您）。

您的整个库可以使用单个全局变量，并且可以根据需要轻松扩展或修剪。最后，您不依赖任何第三方代码来解决相当琐碎的问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-02T00:05:21.530

我强烈建议您尝试构建工具。

构建工具将允许您在开发时拥有不同的文件（甚至在不同的文件夹中），并在最后将它们连接起来以进行调试、测试或生产。更好的是，您不需要在项目中添加库，构建工具位于不同的文件中，并且不包含在您的发布版本中。

我使用[GruntJS](http://gruntjs.com)，基本上它是这样工作的。假设你有你的*util.js*和*index.js*（需要定义帮助对象），都在一个*js*目录中。您可以分别开发两者，然后将两者连接到*dist目录中的**app.js*文件，该文件将由您的 html 加载。在 Grunt 中，您可以指定如下内容：

 *```
concat: {
    app: {
        src: ['js/util.js', 'js/index.js'],
        dest: 'dist/app.js'
    }
} 
```

这将自动创建文件的串联。此外，您还可以缩小它们、对它们进行 lint 处理，并对它们进行任何您想要的处理。您也可以将它们放在完全不同的目录中，但最终仍会以正确的顺序与您的代码一起打包一个文件。您甚至可以在每次保存文件时触发该过程以节省时间。

最后，从 HTML 中，您只需引用一个文件：

```
<script src="dist/app.js"></script> 
```

添加驻留在不同目录中的文件非常容易：

```
concat: {
    app: {
        src: ['js/util.js', 'js/index.js', 'js/helpers/date/whatever.js'],
        dest: 'dist/app.js'
    }
} 
```

而且您的 html 仍将仅引用一个文件。

其他一些执行相同操作的可用工具是[Brunch](http://brunch.io)和[Yeoman](http://yeoman.io)。

- - - - 编辑 - - - - - -

Require JS（以及一些替代方案，例如 Head JS）是一种非常流行的 AMD（异步模块定义），它允许简单地指定依赖项。另一方面，构建工具（例如，Grunt）允许在不依赖外部库的情况下管理文件和添加更多功能。在某些情况下，您甚至可以同时使用两者。

我认为将*文件依赖项/目录问题/构建过程*与您的代码分开是可行的方法。使用构建工具，您可以清楚地查看代码，并在一个完全独立的地方指定如何处理文件。它还提供了一个非常可扩展的架构，因为它可以通过结构更改或未来需求（例如包括 LESS 或 CoffeeScript 文件）来工作。

最后一点，在生产中拥有一个文件也意味着更少的 HTTP 开销。请记住，尽量减少对服务器的调用次数很重要。拥有多个文件是非常低效的。

最后，[这是一篇关于 AMD 工具的构建工具的好文章](http://tomdale.net/2012/01/amd-is-not-the-answer/)，值得一读。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-22T22:50:03.953

你可以这样做：

```
-- main.js --

var my_ns = {};

-- util.js --

my_ns.util = {
    map: function () {}
    // .. etc
}

-- index.js --

my_ns.index = {
    // ..
} 
```

这样你只占用*一个*变量。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-27T00:50:15.087

解决此问题的一种方法是让您的组件使用“消息总线”相互通信。消息（或事件）由类别和有效负载组成。组件可以订阅某个类别的消息，也可以发布消息。这很容易实现，但也有一些开箱即用的解决方案。虽然这是一个简洁的解决方案，但它对应用程序的架构也有很大的影响。

这是一个示例实现： http: [//pastebin.com/2KE25Par](http://pastebin.com/2KE25Par)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T01:41:38.223

如果您想在浏览器中编写类似节点的模块化代码而不需要异步 AMD 地狱，那么[http://brunch.io/应该是最简单的方法之一。](http://brunch.io/)有了它，您还可以使用`require()`模板等，而不仅仅是 JS 文件。

有很多骨架（基础应用程序）可供您使用，而且非常成熟。

检查示例应用程序[https://github.com/paulmillr/ostio](https://github.com/paulmillr/ostio)以查看一些结构。正如您可能注意到的，它是用coffeescript 编写的，但是如果您想用js 编写，您可以——brunch 不关心语言。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-23T22:04:44.877

我认为您想要的是[https://github.com/component/component](https://github.com/component/component)。

它和 Node.js 一样是同步的 CommonJS，它的开销要少得多，而且它是由编写 connect 和 express 的 visionmedia 编写的。*

# javascript - 合并javascript文件

> ID：13520915
> 
> 赞同：1
> 
> 时间：2012-11-22T22:40:09.947
> 
> 标签：javascript

我已经重新设计了我们的网站，而且我第一次使用了相当多的 Javascript。

我了解到我应该将我所有的 javascript 和 css 合并到一个文件中（显然每个文件），但是虽然我知道我可以毫无问题地合并 css，但我不确定 javascript。

我必须加载：

jquery.min.js <--我从 ajax.googleapis.com 加载前两个，这是个好主意

jquery-ui.min.js

用于 Facebook 的 JavaScript

一些用于谷歌加号按钮

推特也一样

一些用于谷歌分析

然后是一些内联的东西来隐藏 javascript 用户不应该看到的 div 和那种类型的东西。

你可以在这里看到它：traditionirishgifts.c​​om

那么我可以将所有这些文件的内容复制并粘贴到一个大文件中吗？找到一些方法来缩小它（还没有完全研究）它。在我的页面底部加载这个文件然后宾果游戏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:41:24.153

我会使用这个工具：http: [//jscompress.com/](http://jscompress.com/)

> JSCompress.com 是一个在线 javascript 压缩器，可让您压缩和缩小您的 javascript 文件。压缩的 javascript 文件非常适合生产环境，因为它们通常会将文件大小减少 30-90%。大多数文件大小的减少是通过删除 Web 浏览器或访问者不需要的注释和额外的空白字符来实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:46:40.323

您应该始终能够将所有外部 JavaScript 合并到一个文件中。您可以使用服务器端压缩器对其进行缓存并将其作为一个文件提供。它确实对文件施加了一些限制，例如应该首先加载哪个文件等。此外，如果任何地方出现语法错误，它将完全崩溃。

请记住，不能混入第三方代码（例如来自 google 的代码）。通常会进行某种身份验证（或 URL 中的 API 密钥）。如果您尝试缓存该代码，它会在一段时间后停止工作。因此，您确实需要将它们分开。

# ios - ios读取二进制文件很慢

> ID：13520916
> 
> 赞同：1
> 
> 时间：2012-11-22T22:40:22.270
> 
> 标签：ios, json, parsing

我正在开发一个需要读/写一些数据的应用程序。所以我的第一个解决方案是将数据存储在 sqlite 数据库中的 json 编码字符串中。由于 json 字符串的反序列化速度很慢（大约 5 秒）并且我无法预先缓冲任何数据，因此我决定将数据存储在二进制文件中（在磁盘上）。为此，我实现了一个读取二进制文件的阅读器。现在我比较了速度结果，发现时间或多或少相同（但文件大小更好）。

我正在使用 NSFileHandle 读取文件，并且我正在逐行读取它。我在 0.5 MB 数据的 iPhone 3GS 上对此进行了测试。这是正常的吗？我应该切换到使用 C/C++ 函数读取文件吗？会更好吗？有人对这个有经验么？我的代码或多或少基于这个问题[How to read data from NSFileHandle line by line?](https://stackoverflow.com/questions/3707427/how-to-read-data-from-nsfilehandle-line-by-line) .

谢谢！

# css - 弹出窗口出现css错误

> ID：13520917
> 
> 赞同：-1
> 
> 时间：2012-11-22T22:40:23.470
> 
> 标签：css, popup, margin, padding

我有一个画廊插件。如果我单击另一个图像或箭头，将出现一个弹出窗口。问题是当弹出窗口打开时，插件库在页面上向下移动。什么是css问题？我该如何解决？

这是我的插件：

```
http://judopassion.com/wordpress/?p=274 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:58:19.467

这里有很多事情要做，所以我将尝试简化您需要采取的步骤。

```
<div id="box">... 
```

必须是*孩子*

```
<div id="gallery-1">.... 
```

所以你会有：

```
<div id="gallery-1">
    <div id="box"></div>
</div> 
```

添加`position:relative;`到`gallery-1`.

你的`#box`风格真的，真的很乱。您需要从 CSS 中删除`left:`和`top:`说明`#box`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:16:27.370

我在弹出窗口出现时添加了 top 属性，并在关闭时将其删除：

```
$("gallery-1").css("top","-xxem"); 
```

我不能使用 GeorgeBuckingham 解决方案，因为插件不允许。不管怎么说，还是要谢谢你。

# android - 如何在没有灰色默认背景的情况下设置图像按钮的样式？

> ID：13520919
> 
> 赞同：0
> 
> 时间：2012-11-22T22:40:37.140
> 
> 标签：android, android-layout

我用这段代码定义了一个按钮

```
<ImageButton
         android:id="@+id/btn_photo_lib"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:onClick="startPhotoLibAction"
         android:src="@drawable/library_blau" /> 
```

结果是

![在此处输入图像描述](../Images/44f47e34a69de1013cf2a9b36dec188f.png)

有人知道如何删除图像后面的这个灰色区域吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:43:40.750

改成或改成。`ImageButton`_`ImageView``android:src``android:background`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:04:30.827

设置 ImageButton 的背景属性而不是 src。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T00:12:38.553

您添加`android:background = "@android:color/transparent"`为图像按钮的背景

```
 <ImageButton
     android:id="@+id/btn_photo_lib"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:onClick="startPhotoLibAction"
     android:background="@android:color/transparent"
     android:src="@drawable/library_blau" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T23:04:20.887

有2种方式：

```
<ImageView
     android:id="@+id/btn_photo_lib"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:onClick="startPhotoLibAction"
     android:src="@drawable/library_blau"
     android:clickable="true" /> 
```

或者：

```
<ImageButton
     android:id="@+id/btn_photo_lib"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:onClick="startPhotoLibAction"
     android:background="@drawable/library_blau" /> 
```

# php - Drupal 五星级模块，根据变量值动态改变star.gif图像

> ID：13520926
> 
> 赞同：1
> 
> 时间：2012-11-22T22:41:44.640
> 
> 标签：php, css, drupal

我们希望在我们的冲浪报告中包含为冲浪条件提供 5 星评级的能力（使用[http://drupal.org/project/fivestar](http://drupal.org/project/fivestar)模块）。我们遇到的问题是风况可能不利，因此尽管报告给出了 5 星，但如果风的方式错误，我们需要能够说明这一点。我们想添加名为“Wind Rating”的节点字段，其值为 A 或 B。如果风是有利的，我们将值设置为 A 并坚持使用当前的 star.gif 文件。如果不是有利的风力条件，我们会将值设置为 B 并希望将 star.gif 切换为 starb.gif（这将是一个褪色的版本）。

使用 Drupal 7 和五星级模块实现这一目标的最佳方法是什么？

![5 星冲浪报告](../Images/1292a2accd9c26992831de57a3afd253.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:30:11.540

嗯，这是一个艰难的。让我尝试。

首先：要创建自己的小部件，您可以按照[http://www.drupalace.com/drupal_tutorial_make_custom_fivestar_graphics](http://www.drupalace.com/drupal_tutorial_make_custom_fivestar_graphics)中的步骤操作。从标题开始阅读`Make me a star!`

现在您知道如何创建自定义小部件，让我们专注于如何使其动态化。使用哪个星图由 widgets 文件夹中的 css 文件中的样式规则决定。因此，为了获得动态图像，我们需要根据我们的条件在输出中添加一个额外的类。

当我检查代码以查看添加类的位置时，我看到`line 582`在文件中添加了特定于小部件的类`fivestar.module` `fivestar_expand`

```
$class[] = 'fivestar-' . $element['#widget']['name']; 
```

在此行之后，您可以添加

```
if (my_condition_is_met) {
  $class[] = 'fivestar-' . $element['#widget']['name'] . 'special-case';
} 
```

现在，您可以编辑 css 文件，为这种特殊情况添加您想要显示的图像的规则（不要忘记添加您的自定义图像），您就完成了。

持有：在 Drupal 中破解模块是对它的亵渎，所以正确的步骤是

1.  将函数 Fivestar_element_info 复制到您的自定义模块并适当命名。
2.  将行更改`'#process' => array('fivestar_expand')`为`'#process' => array('fivestar_expand_custom'),`
3.  将 Fivestar_expand_custom 复制到您的自定义模块并进行前面提到的更改。

在 Drupal 中以正确的方式做这件事有时会非常困难。但是我没有找到更好的解决方案。我希望有一个。

# c++ - 读取时出现内存访问异常，“0xFEEFEE{value=???}”

> ID：13520927
> 
> 赞同：1
> 
> 时间：2012-11-22T22:41:47.577
> 
> 标签：c++, tree

> **可能重复：**
> [在 Visual Studio C++ 中，内存分配表示形式是什么？](https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations)

对不起标题，但我真的不知道我如何处理这个“价值=？？？”

得到一个带有 treeIterator 的简单二叉树。迭代器可以使用 ++ 或 -- 上下移动

它包含一个值和一个键以及根节点、左节点、右节点。

如果我在树上启动迭代器

```
for (Map::TreeIterator i=tree.begin(); i != tree.end(); i++) {
    std::cout << i.key() << ": " << i.value() << std::endl;
} 
```

迭代器调用 begin()

```
TreeIterator Tree::begin() {
    return TreeIterator(m_root->findFirst());
} 
```

调用 findFirst()

```
TreeNode* TreeNode::findFirst() {
    if (m_left != NULL) {
        return m_left->findFirst();
    } else {
        return this;
    }
} 
```

好吧，如果树包含很多值。现在我清除树，打印出计数并尝试启动一个迭代器来查看是否有项目显示它们，无论如何......

尝试调试显示迭代器进入可能为空的树并查找元素。他从树中得到根节点，这是一个零节点，取左边的节点（也是一个零节点）并在左边的节点上运行 findFirst。

到这里，根（零节点）的左节点（零节点）没有左节点。

```
m_left=??? m_right=??? m_up=??? 
```

所以我有默认构造函数，它将所有节点设置为零节点（我需要这个吗？它总是默认构造函数，对吗？）

最后，我的问题是我该如何处理这个问题？也许抓住一个例外？整个事情在内存 xxx 处引发了一个未处理的异常

感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:35:30.113

> 谷歌查询没有结果

在查询中键入“0xfeeefeee”。第一和第三击非常好。我将复制[第三次命中](http://www.nobugs.org/developer/win32/debug_crt_heap.html)中显示的表，它显示了调试分配器写入堆的神奇值：

![在此处输入图像描述](../Images/f58b1b6428bc3a33ce9f36ce167a862f.png)

请注意 0xFEEEFEEE 值如何出现在“HeapFree() 之后”列中。它告诉您代码有什么问题，它是在 free() 或 delete 运算符释放后访问内存。非常经典的指针错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:33:53.290

`m_root`在以下代码中是否可以为空？

```
TreeIterator Tree::begin() {
    return TreeIterator(m_root->findFirst());
} 
```

如果是这样试试

```
TreeIterator Tree::begin() {
    if (m_root != NULL)
        return TreeIterator(m_root->findFirst());
    else
        return TreeIterator::end;
} 
```

但是，如果“Hans Passant”是对的（下）

> 您缺少几个 E，它是 0xFEEEFEEE。feefee 是一个出色的调试诊断工具，只需在谷歌查询中输入即可。——汉斯·帕桑特

那么错误可能在其他地方......

# python - 如何删除元组中的特定元素？

> ID：13520928
> 
> 赞同：0
> 
> 时间：2012-11-22T22:41:49.823
> 
> 标签：python

如何删除元组中的特定元素？

例如：

```
 L={('a','b','c','d'):1,('a','b','c','e'):2}

      remove='b' 
```

我想得到以下结果：

```
 {('a','c','d'):1,('a','c','e'):2} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:45:17.030

```
In [20]: L={('a','b','c','d'):1,('a','b','c','e'):2}

In [21]: {tuple(y for y in x if y != "b"):L[x] for x in L}
Out[21]: {('a', 'c', 'd'): 1, ('a', 'c', 'e'): 2} 
```

或使用`filter()`：

```
In [24]: { tuple(filter(lambda y:y!="b",x)) : L[x] for x in L}
Out[24]: {('a', 'c', 'd'): 1, ('a', 'c', 'e'): 2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:16:11.363

您可以使用字典理解表达式创建字典的更新版本：

```
L = {('a', 'b', 'c', 'd'): 1, ('a', 'b', 'c', 'e'): 2, ('f', 'g', 'h'): 3}

remove='b'
L = {tuple(i for i in k if i != remove) if remove in k else k:v for (k,v) in L.items()}

print L 
```

输出：

```
{('a', 'c', 'e'): 2, ('a', 'c', 'd'): 1, ('f', 'g', 'h'): 3} 
```

如您所见，它只在元组键中留下没有元素的项目。

# r - R 连接到 EC2 实例以进行并行处理

> ID：13520932
> 
> 赞同：14
> 
> 时间：2012-11-22T22:42:05.197
> 
> 标签：r, foreach, parallel-processing, amazon-ec2, snowfall

我在初始化从 R 到 AWS EC2 实例的连接时遇到问题，因为我似乎不断收到错误消息：`Permission denied (publickey)`我目前正在使用 Mac OS X 10.6.8 作为我的操作系统

我尝试在终端 ($) 然后 R (>) 中运行的代码如下：

```
$ R --vanilla
> require(snowfall)
> sfInit(parallel=TRUE,socketHosts =list("ec2-xx-xxx-xx-xx.zone.compute.amazonaws.com"))
Permission denied (publickey) 
```

但奇怪的是，当我尝试 ssh 进入实例时，我不需要密码，因为我已经在初始化时将公钥导入到实例中，（我认为）

所以从我的普通终端......运行时

```
$ ssh ubuntu@ec2-xx-xxx-xx-xx.zone.compute.amazonaws.com 
```

它会自动连接...（所以我不能 100% 确定它是否是无密码问题，例如[Using snow (and snowfall) with AWS for parallel processing in R](https://stackoverflow.com/questions/7333801/using-snow-and-snowfall-with-aws-for-parallel-processing-in-r)）

我已经尝试过查看大量关于钥匙等的材料，但似乎没有一个有太大的不同。由于某种原因，我`~/.ssh/authorized_keys`的也是一个文件夹而不是文件，即使在尝试时我也无法访问它`sudo cd .ssh/authorized_keys`......就它拥有的权限而言`drw-------`

最终目标是连接到许多 ec2 实例并用于`foreach`执行一些并行处理......但现在连接到一个会很好......我也想使用我自己的 ami 所以星团不是真的是我在寻找的东西......（除非我能够使用私人 amis 并私下运行所有​​命令......）

另外，如果 doRedis 比有人可以向我展示如何从本地机器连接到 ec2 实例更好，那也很好......

**编辑**

我已经设法使用[R 和 makePSOCKcluter EC2 socketConnection](https://stackoverflow.com/questions/13564038/r-and-makepsockcluter-ec2-socketconnection)中所示的`parallel`包处理 ssh 无密码登录...但现在遇到问题，如链接中的问题所示...`makePSOCKcluster``socketConnection`

任何想法如何连接到它？

还证明一切正常，我想这意味着以下命令/函数可以获取所有不同的 IP 地址

```
d <- parLapply(cl1, 1:length(cl1),function(x)system("ifconfig",intern=T)[2]) 
```

函数`cl1`的输出在哪里`make*cluster`

**注意**，因为赏金实际上是针对链接中的问题....我不介意您发布答案的问题...但是只要在这个问题上写了一些将其链接到正确答案的内容在链接的问题上，然后我将相应地奖励积分...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:16:43.910

在尝试将主节点保持在本地时，我在并行 EC2 设置方面也遇到了很多问题。使用[StarCluster](http://star.mit.edu/cluster/)设置池有很大帮助，但真正的改进来自于使用 StarCluster*并*在 EC2 私有 IP 池中拥有主节点。

StarCluster 为所有节点以及使用的任何挂载设置所有密钥处理。动态节点分配是不可行的，但除非将长期使用 Spot 实例并且您的出价策略不会“保留”您的实例，否则动态分配应该是一个问题。

其他一些经验教训：

*   创建一个包含私有 IP 的变量以传递给 createCluster 并导出它，因此当您需要使用相同的节点重新启动时，它会更容易。
*   让主节点运行 byobu 并将其设置为 R 会话日志记录。
*   在主节点上运行 RStudio 服务器有时会很有帮助，但应该是与从节点不同的 AMI。:)
*   让控制脚本将数据 rda 文件卸载到远程监控新文件的路径并自动下载它们。
*   使用 htop 监控从属服务器，以便您可以轻松查看实例并确定脚本要求（内存/cpu/可扩展性）。
*   利用处理器超线程启用/禁用脚本。

我在从属连接和序列化/反序列化方面遇到了很多问题，发现其中一件事是连接限制，并且连接限制需要减少节点数量；当控制脚本停止时，最简单的清理方法是重新启动主 R 会话，并使用脚本杀死从属进程而不是等待超时。

设置确实需要一些工作，但希望这些想法对您有所帮助......

* * *

虽然是 8 个月前 StarCluster 和 R 都发生了变化，但这里有一些设置方式……您可以在 StarCluster 文档中找到 90% 的内容。

*   根据来自 AWS 控制台的安全信息设置 .starcluster/config AWS 和密钥对部分。
*   定义 [smallcluster]
    *   键名
    *   可用区
*   定义一个扩展 [smallcluster] 的集群模板。使用基于 StarCluster 64 位 HVM AMI 的 AMI。我没有创建新的公共 AMI 实例，而是保存了一个已配置的实例（以及我需要的所有工具）并将其用作 AMI。

这是一个例子......

```
[cluster Rnodes2]
EXTENDS=smallcluster
MASTER_INSTANCE_TYPE = cc1.4xlarge
MASTER_IMAGE_ID= ami-7621f91f
NODE_INSTANCE_TYPE = cc2.8xlarge
NODE_IMAGE_ID= ami-7621f91f
CLUSTER_SIZE= 8
VOLUMES= rdata
PLUGINS= pkginstaller
SPOT_BID= 1.00 
```

*   设置共享卷，这是 screen/byoubu 日志、主要 .R 脚本检查点输出、共享 R 数据以及生产包的源。它在名为 export 的子路径中监视新文件，因此如果集群或控制脚本死亡/异常，则最大数量的记录将全部丢失并需要重新计算。

创建共享卷后，定义很简单：

```
[volume rdata]
VOLUME_ID = vol-1145497c
MOUNT_PATH = /rdata 
```

确保所有节点上的最新（和相同）R 版本的包安装程序。

```
[plugin pkginstaller]
setup_class = starcluster.plugins.pkginstaller.PackageInstaller
packages = r-base, r-base-dev, r-recommended 
```

最后，访问 ssh 和 RStudio 服务器的权限。通过代理的 Https 会更安全，但由于 RStudio 仅用于控制脚本设置......

```
[permission ssh]
# protocol can be: tcp, udp, or icmp
protocol = tcp
from_port = 22
to_port = 22

# [permission http]
protocol = tcp
from_port = 8787
to_port = 8787 
```

然后使用 StarCluster 界面启动集群。它处理所有的访问控制、系统名称、共享等......一旦集群运行，我从本地系统运行一个 ssh 会话，并运行一个脚本来停止超线程：

```
#!/bin/sh

# disable hyperthreading
for cpunum in $(
    cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | 
    cut -s -d, -f2- | tr ',' '\n' | sort -un); do
        echo 0 > /sys/devices/system/cpu/cpu$cpunum/online
done 
```

然后在每个上启动一个 htop 会话，以针对导出的检查点日志监控可扩展性。

然后，登录到主服务器，启动一个屏幕会话（我从那时起就更喜欢 byobu）并从 StarCluster 安装的卷中启动 R。这样，当集群由于某种原因停止时，我可以通过启动 R 轻松地重新设置。一旦进入 R，第一件事就是`workers.list`使用名称创建一个变量`nodeXXX`，这很简单：

```
cluster.nodes <- c("localhost", paste("node00", 1:7, sep='' ) )
workers.list <- rep( cluster.nodes, 8 ) 
```

然后我加载了控制脚本，退出并保存了工作区。控制脚本处理所有用于导出和检查点的表输出以及对生产包的包装调用。脚本的主要功能还接受了一个`cpus`参数，该参数是放置工作人员列表的位置，然后将其传递`cores`给集群初始化程序。

```
initialize.cluster <- function( cores )
{
  if( exists( 'cl' ) ) stopCluster( cl )

  print("Creating Cluster")
  cl <- makePSOCKcluster( cores )    
  print("Cluster created.")
  assign( 'cl', cl, envir=.GlobalEnv )
  print( cl )

  # All workers need to have the bounds generator functions...
  clusterEvalQ( cl, require('scoreTarget') )
  # All workers need to have the production script and package.
  clusterExport( cl, varlist=list('RScoreTarget', 'scoreTarget'))
  return ( cl )
} 
```

一旦 R 会话重新启动（在最初创建 worker.list 之后），就会获取控制脚本，并调用 main 函数。就是这样。有了这个设置，如果集群停止了，我就退出主主机上的 rsession；通过每个从站上的 htop 停止从站进程并再次启动。

这是它的一个例子：

```
R

R version 2.15.0 (2012-03-30)
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> source('/rdata/buildSatisfactionRangeTable.R')
Loading required package: data.table
data.table 1.7.7  For help type: help("data.table")
Loading required package: parallel
Loading required package: scoreTarget
Loading required package: Rcpp
> ls()
 [1] "build.satisfaction.range.table" "initialize.cluster"            
 [3] "initialize.table"               "parallel.choices.threshold"    
 [5] "rolled.lower"                   "rolled.upper"                  
 [7] "RScoreTarget"                   "satisfaction.range.table"      
 [9] "satisfaction.search.targets"    "search.range.bound.offsets"    
[11] "search.range.bounds"            "search.range.center"           
[13] "Search.Satisfaction.Range"      "update.bound.offset"           
[15] "workers.list"                  
> workers.list
  [1] "localhost" "localhost" "localhost" "localhost" "localhost" "localhost"
  [7] "localhost" "localhost" "node001"   "node002"   "node003"   "node004"  
 [13] "node005"   "node006"   "node007"   "node001"   "node002"   "node003"  
 [19] "node004"   "node005"   "node006"   "node007"   "node001"   "node002"  
 [25] "node003"   "node004"   "node005"   "node006"   "node007"   "node001"  
 [31] "node002"   "node003"   "node004"   "node005"   "node006"   "node007"  
 [37] "node001"   "node002"   "node003"   "node004"   "node005"   "node006"  
 [43] "node007"   "node001"   "node002"   "node003"   "node004"   "node005"  
 [49] "node006"   "node007"   "node001"   "node002"   "node003"   "node004"  
 [55] "node005"   "node006"   "node007"   "node001"   "node002"   "node003"  
 [61] "node004"   "node005"   "node006"   "node007"   "node001"   "node002"  
 [67] "node003"   "node004"   "node005"   "node006"   "node007"   "node001"  
 [73] "node002"   "node003"   "node004"   "node005"   "node006"   "node007"  
 [79] "node001"   "node002"   "node003"   "node004"   "node005"   "node006"  
 [85] "node007"   "node001"   "node002"   "node003"   "node004"   "node005"  
 [91] "node006"   "node007"   "node001"   "node002"   "node003"   "node004"  
 [97] "node005"   "node006"   "node007"   "node001"   "node002"   "node003"  
[103] "node004"   "node005"   "node006"   "node007"   "node001"   "node002"  
[109] "node003"   "node004"   "node005"   "node006"   "node007"   "node001"  
[115] "node002"   "node003"   "node004"   "node005"   "node006"   "node007"  
> build.satisfaction.range.table(500000, FALSE, workers.list )
[1] "Creating Cluster"
[1] "Cluster created."
socket cluster with 120 nodes on hosts ‘localhost’, ‘node001’, ‘node002’, ‘node003’, ‘node004’, ‘node005’, ‘node006’, ‘node007’
Parallel threshold set to: 11000 
Starting at: 2 running to: 5e+05 :: Sat Apr 14 22:21:05 2012 
```

* * *

如果您已经阅读到这里，那么您可能有兴趣知道我测试了我可以测试的每个集群设置（包括 openMPI）并发现没有速度差异，这可能是因为我的计算受 CPU 限制，可能不是.

此外，即使开始使用 HPC 会很痛苦，也不要放弃。这完全值得。如果我在商品工作站上坚持使用 base-R 中的幼稚实现，我仍然会等待完成我正在运行的计算的前 100,000 次迭代（好吧，不是真的，因为我永远不会坚持使用 R :D ）。借助集群，一周内完成了 384,000 次迭代。完全值得花时间（而且花了很多时间）来设置。

# javascript - 为什么我不能处理 $.ajax 返回的 HTTP 状态码？

> ID：13520933
> 
> 赞同：2
> 
> 时间：2012-11-22T22:42:07.460
> 
> 标签：javascript, jquery, ajax, google-app-engine

我有下一个适用于 Google App Engine 的 JSP 页面：

```
<%@ page contentType="text/html; charset=windows-1251" language="java" %>
<%@ page import="com.wedding.Register" %>

<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <script src="js/jquery.min.js" type="text/javascript"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        function submitMyForm(button) {
            var myForm = $(button).closest('form');
            $.ajax({
                url: $(myForm).attr('action'),
                type: "post",
                contentType:attr("enctype", "multipart/form-data"),
                data: $(myForm).serialize(),
                statusCode: {
                    400: function () {
                        $('.form-inline').after("<h1>400!</h1>");
                    },
                    200: function () {
                        $('.form-inline').after("<h1>200!</h1>");
                    }
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">

    <% 
        String companyName = Register.getLoggedInCompanyName(request);
        if (companyName == null) {
    %>

        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="#">Menu</a>
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li class="active"><a href="/reg.jsp">Register</a></li>
            </ul>
          </div>
        </div>

        <div class="hero-unit">
            <h1>Login</h1>
            <p>Enter login credentials</p>
            <p>
                  <form action="/reg?action=login" class="form-inline" method="post" enctype="multipart/form-data">
                      <input type="text" name="email" class="input-xlarge" placeholder="">
                      <input type="password" name="password" class="input-xlarge" placeholder="">
                      <button type="submit" class="btn" onClick="submitMyForm(this)">Login</button>
                  </form>
            </p>
        </div>

    <% 
        } else {
    %>

        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="#">Menu</a>
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li class="active"><a href="/reg?action=logout">Logout</a></li>
            </ul>
          </div>
        </div>

        <div class="hero-unit">
            <h1>Error</h1>
            <p>Error.</p>
        </div>

    <% 
        }
    %>

    </div>

    <div id="footer">
        <div class="container">
            <p class="muted credit"></p>
        </div>
    </div>  
</body> 
```

问题是，当单击按钮时，表单被发送到服务器，但如果服务器返回 400 HTTP 状态代码

```
$('.form-inline').after("<h1>400!</h1>"); 
```

不被调用。

我也尝试过成功/错误函数和其他 HTTP 代码，但没有成功。有趣的是，它工作了一次，然后总是失败。浏览器不会向 HTML 添加新元素，而是重定向到生成的错误页面。

使用返回状态码

```
HttpServletResponse.sendError(400); 
```

我已检查是否发送了正确的请求和响应。我还检查了最新的 jquery 是否已链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:30:00.123

`<button/>`默认情况下，包含在 a 中的A`<form/>`会提交它。因此，您需要停止表单提交。

在下面的示例中，我将坚持使用 jQuery 而不是 JavaScript 和 jQuery 的混合。

```
/* Bind the submit event */
$("form").submit(function() {
  /* Request an HTTP 400 */
  $.ajax({
    url: "http://httpstat.us/400",
    statusCode: {
      400: function() {
        console.log("HTTP 400 received");
      }
    }
  });
  /* stop the form submission */
  return false;
});​ 
```

```
<form action="/reg?action=login" class="form-inline" method="post" enctype="multipart/form-data">
  ...
  <button type="submit" class="btn">Login</button>
  ...
</form> 
```

由于`$.ajax`是异步执行的，如果您不停止表单提交，浏览器仍将提交它，从而重定向页面。

[随意测试一下](http://jsfiddle.net/Tpspn/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:26:36.303

您是否尝试过围绕 jquery 文档准备好函数 submitMyForm(button) ？

```
$(document).ready(function(){

function submitMyForm(button) {
            var myForm = $(button).closest('form');
            $.ajax({
                url: $(myForm).attr('action'),
                type: "post",
                contentType:attr("enctype", "multipart/form-data"),
                data: $(myForm).serialize(),
                statusCode: {
                    400: function () {
                        $('.form-inline').after("<h1>400!</h1>");
                    },
                    200: function () {
                        $('.form-inline').after("<h1>200!</h1>");
                    }
                }
            });
        }

}); 
```

# java - 使用 java GUI 绘制函数

> ID：13520934
> 
> 赞同：0
> 
> 时间：2012-11-22T22:42:09.553
> 
> 标签：java, user-interface

我需要绘制一个给定起点和终点的多项式。我已经研究过使用 paincomponent 来做到这一点，但我很困惑，因为原点位于左上角，我需要我的网格线是动态的。

如何制作它以便我可以创建动态比例以及最适合绘制函数的 java 类？

例如，如果用户要输入 -2 2 x^2，绘图仪将需要创建一个从 -2 开始的网格，中间有 0，右边有 2 作为 x 坐标。但是，如果用户输入 x^3，我们在 y 平面上有负坐标，我需要将包含 x 坐标的线向上滑动以适应。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:36:23.943

如果您知道要绘制的区域的大小，那么转换 y 坐标应该不会太难。但老实说，您为什么不使用 JFreeChart 之类的绘图库之一，...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:13:22.723

我认为你可以这样做（我可能错了）的方法是绘制图形的 y 线和 x 线，并在正确的位置使用 drawString 标记 x 和 y 的值。为了说明这一点，我为你做了这个例子：

```
public void paintComponent(Graphics g)
{
    Graphics2D g2 = (Graphics2D) g;

    Point2D.Double from = new Point2D.Double(300, 100);
    Point2D.Double to = new Point2D.Double(300, 300);

    Line2D.Double line = new Line2D.Double(from, to);
    g2.draw(line);

    Point2D.Double from2 = new Point2D.Double(150, 200);
    Point2D.Double to2 = new Point2D.Double(450, 200);
    Line2D.Double line2 = new Line2D.Double(from2, to2);
    g2.draw(line2);

    g2.drawString("-1", 290, 215);
} 
```

drawString 方法将在 0 以下绘制“-1”。因此您可以使用相同的方法在 -1 以下绘制 -2，等等。

我知道这听起来效率低下，但这是我能想到的唯一方法。

希望其他人能为您提供更好的解决方案。

# algorithm - 是否有众所周知的算法来计算后缀树中的子字符串？

> ID：13520935
> 
> 赞同：1
> 
> 时间：2012-11-22T22:42:12.783
> 
> 标签：algorithm, suffix-tree

我已经实现了一个算法来构造一个后缀树。现在，我正在尝试实现一个方法计数，该方法返回查询发生的次数作为参考序列的子列表/子间隔。最好的方法是什么？

例子：

序列的后缀树

```
1,2,50,100,25,25,25,50,100,25,25 
```

询问

```
25,25 
```

结果

```
3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:56:39.087

一种方法是：

1.  将唯一的终止符号添加到列表中（例如 -1）。

2.  构造后缀树。

3.  现在根据查询中的数字走下后缀树。

4.  如果这是不可能的，则查询出现 0 次。

5.  否则，根据您当前的位置计算子树中的叶节点。

查询在字符串中出现的次数等于子树中叶子节点的数量。

如果您希望进行多个查询，则可以使用深度优先搜索来计算 O(n) 中的叶节点数并将答案存储在每个节点中。这将让您在 O(k) 时间内执行查询，其中 k 是查询字符串的长度。

这是有效的，因为您的后缀树将具有每个后缀的叶节点：

```
1,2,50,100,25,25,25,50,100,25,25
2,50,100,25,25,25,50,100,25,25
50,100,25,25,25,50,100,25,25
100,25,25,25,50,100,25,25
25,25,25,50,100,25,25
25,25,50,100,25,25
25,50,100,25,25
50,100,25,25
100,25,25
25,25
25 
```

其中，在您沿着树向下查询 25,25 之后，子树中剩余的叶节点对应于：

```
25,25,25,50,100,25,25
25,25,50,100,25,25
25,25 
```

这为字符串中的查询提供了 3 次计数。

# r - 如何使用 R 更改文件的标题？

> ID：13520936
> 
> 赞同：0
> 
> 时间：2012-11-22T22:42:20.490
> 
> 标签：r, lookup, names

假设我有这个文件（主要）

```
Name samp1 samp2 samp3 samp4
pg1 0.43 0.32 0.21 0.54
pg2 0.43 0.22 1.00 0.44
pg3 0.11 0.99 0.78 0.54
pg4 0.65 0.32 0.12 0.23 
```

我下面也有这个头文件（MAPPERS）

```
SampName ID
samp1 TYC
samp4 GDD
samp6 DER
samp2 JKK
samp3 WER
samp9 AXC 
```

我希望使用“MAPPERS”文件更改我的“主”文件的所有标题，这样如果与 sampleName 匹配，则应将其替换为示例 ID。所以我希望有以下内容：

```
Name TYC JKK WER GDD
pg1 0.43 0.32 0.21 0.54
pg2 0.43 0.22 1.00 0.44
pg3 0.11 0.99 0.78 0.54
pg4 0.65 0.32 0.12 0.23 
```

我有一个大文件，所以任何人都可以帮助我如何获得上述文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:10:19.940

`?match`是我认为你正在追逐的工具：

```
main <- read.table(textConnection("Name samp1 samp2 samp3 samp4
pg1 0.43 0.32 0.21 0.54
pg2 0.43 0.22 1.00 0.44
pg3 0.11 0.99 0.78 0.54
pg4 0.65 0.32 0.12 0.23"),header=TRUE,stringsAsFactors=FALSE)

mapper <- read.table(textConnection("SampName ID
samp1 TYC
samp4 GDD
samp6 DER
samp2 JKK
samp3 WER
samp9 AXC"),header=TRUE,stringsAsFactors=FALSE)

names(main)[2:5] <- mapper$ID[match(names(main)[2:5],mapper$SampName)]
main

  Name  TYC  JKK  WER  GDD
1  pg1 0.43 0.32 0.21 0.54
2  pg2 0.43 0.22 1.00 0.44
3  pg3 0.11 0.99 0.78 0.54
4  pg4 0.65 0.32 0.12 0.23 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:10:35.610

这是一个未经测试的示例。当你发布数据时，我会测试它。

```
curnames <- data.frame(SampName=colnames(main))
colnames(main) <- merge(curnames,MAPPERS,all.x=TRUE)$ID 
```

如果您不确定每个 SampName 是否都与 MAPPERS 中的 ID 匹配，则需要更多代码。

# javascript - 我无法在 FireFox 中触发 jQuery 悬停事件 标签

> ID：13520944
> 
> 赞同：0
> 
> 时间：2012-11-22T22:43:28.657
> 
> 标签：javascript, jquery, html, firefox, area

我认为这可能与区域标签无关，但我猜可能是这样。

这是下载我的源代码的链接，因为很难解释 [http://temp-share.com/show/YgFHjkPEy](http://temp-share.com/show/YgFHjkPEy)

你知道如何在 FF 中获得与 chrome/safari 相同的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:37:20.743

在您的图像标签上，您需要在地图名称之前放置一个井号标签。

```
<img class="pic1 day" src="img/LMday.png" usemap="#img_map" border="0" width="2798" height="450" alt="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:06:42.527

问题不在 Firefox 中，悬停事件正在工作。请参阅此示例 jsFiddle。 [http://jsfiddle.net/JWvNC/3](http://jsfiddle.net/JWvNC/3)

```
$(function(){
    $('map area').mouseover(function(){ $('#log').append('<p>'+this.getAttribute('href') +'</p>'); });
}); 
```

# node.js - 更改语言环境 i18n Node.js

> ID：13520948
> 
> 赞同：5
> 
> 时间：2012-11-22T22:43:49.093
> 
> 标签：node.js, express, translation

我找不到如何在 i18n 中更改语言环境

[https://github.com/mashpie/i18n-node](https://github.com/mashpie/i18n-node)

我这样配置

```
i18n.configure({
    // setup some locales - other locales default to en silently
    locales:['en', 'de'],

    // where to register __() and __n() to, might be "global" if you know what you are doing
    register: global
}); 
```

但我总是将 en 作为语言环境，我找不到如何设置 de

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T08:21:41.060

我回答解决帖子

解决方案是`.setLocale`

# c# - C# BackgroundWorker 跳过 DoWork 直接进入 RunWorkerCompleted

> ID：13520949
> 
> 赞同：3
> 
> 时间：2012-11-22T22:43:59.367
> 
> 标签：c#, .net, backgroundworker

我是 C# 新手，所以放轻松！

到目前为止 - 我有一个控制台应用程序，它监听客户端连接并相应地回复客户端。

我还有一个带有按钮和文本框的 WPF 表单。该按钮启动一些代码以作为 BackgroundWorker 连接到服务器，然后等待响应，然后将其附加到文本框的末尾。

这很好用，一次。有时两次。但后来它一直崩溃——原来 DoWork 块根本没有被调用，它直接进入 RunWorkerCompleted。当然， .result 是空白的，因此尝试将其转换为字符串会失败。

这是菜鸟的错误吗？我曾尝试在互联网上搜索各种说法，但没有遇到任何有用的...

这是到目前为止的代码：http: [//pastebin.com/ZQvCFqxN](http://pastebin.com/ZQvCFqxN) - 我有很多调试输出试图弄清楚到底出了什么问题。

这是调试输出的结果：http: [//pastebin.com/V412mppX](http://pastebin.com/V412mppX)

非常感谢任何帮助。谢谢！

编辑：相关代码*后修复*（感谢下面的 Patrick Quirk）是：

```
public void dorequest(string query)
{
    request = new BackgroundWorker();
    request.WorkerSupportsCancellation = true;
    request.WorkerReportsProgress = true;
    request.ProgressChanged += request_ProgressChanged;
    request.DoWork += request_DoWork;
    request.RunWorkerCompleted += request_RunWorkerCompleted; 
    request.RunWorkerAsync(query);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T22:49:32.313

您`DoWork`在调用`RunWorkerAsync`. 翻转那些，应该可以解决它。

*此外，将来请在您的问题中粘贴代码，而不是使用外部站点。并尽可能提供最少量的代码来说明问题。让我们和可能有同样问题的人更容易。*

# c# - 我用 List 打了 OutOfMemoryException - 这是限制还是我错过了什么？

> ID：13520956
> 
> 赞同：16
> 
> 时间：2012-11-22T22:45:14.470
> 
> 标签：c#, list, memory, out-of-memory

如果有机会重写，我会，但无论如何，代码是这样的：

```
List<string> foobar; 
```

然后我们在 foobar 中添加一堆字符串。

在 count=16777216 时，我们达到了内存不足的限制。

我的理解是每个字符串的大小都不同。确实看数据（不是我的数据），大多数是 2 或 3 个字符。

[c# 中列表中数据的最大限制是多少？](https://stackoverflow.com/q/3906891/175051)表示最大限制为：

> 理论上，当前 List 实现中可以存储的最大元素数是 Int32.MaxValue - 刚刚超过 20 亿。

然而：

> 在当前 Microsoft 的 CLR 实现中，最大对象大小限制为 2GB。（其他实现，例如 Mono，可能没有这个限制。）

在我的示例中，我有 1600 万个结果 * 几个字节？任务管理器显示正在使用的演出，但我有 8 演出的 RAM。

16777216 (2^24) 似乎是一个相当具体的值 - 可疑地像一个限制，但我在任何地方都找不到任何文档来 a) 备份它或 b) 找到解决方法？

任何帮助，将不胜感激。

* * *

一些代码：

```
List<string> returnList = new List<string>();
SqlDataReader dr; //  executes a read on a database, have removed that part as that bit works fine

  if (dr.HasRows)
  {
      while (dr.Read())
      {
          returnList.Add(dr.GetString(0).Trim());
      }
  } 
```

这是简化的形式，我现在对 OOM 异常进行了一些尝试/捕获，但这是让我感到悲伤的实际代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T23:24:37.507

如果您尝试在 64 位环境中使用非常大的列表，则需要在应用程序配置中启用大对象。

[http://msdn.microsoft.com/en-us/library/hh285054.aspx](http://msdn.microsoft.com/en-us/library/hh285054.aspx)

OOM 可能是由于 Lists/ArrayLists 分配内存的方式，我相信每次达到它们的边界时，它们都会尝试将大小加倍。该列表不能从 2^24 翻倍。理论上，您可以通过预先指定大小来最大化列表大小。（即 2GB）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:30:49.593

我已经发布了我在这里所做的事情，值得一试。同样的步骤是：

1.  在使用存储过程的数据的每个迭代查询部分
2.  转移它们
3.  移动到下一部分

    ```
    List<string> returnList;
    int index = 0;
    SqlCommand cmd = new SqlCommand("ExampleStoredProc", conn);
    cmd.CommandType = CommandType.StoredProcedure;
    while (true)
    {
        cmd.Parameters.Add(
            new SqlParameter("@index", index));
        SqlDataReader dr = cmd.ExecuteReader();
        if (dr.HasRows)
        {
            returnList = new List<string>();
            returnList.Add(dr.GetString(0).Trim());
            //transfer data here
        }
        else
        {
            break;
        }
        index++;
    } 
    ```

并且存储的过程应该是这样的：

```
CREATE PROCEDURE ExampleStoredProc
    @index INT
AS
BEGIN
    SELECT * 
    FROM  veryBigTable
    WHERE Id >= (@index *1000) AND Id < ((@index + 1) * 1000)
END
GO 
```

不管你有多少记录，我肯定会工作，只是你拥有的数据越多，完成的时间就越长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T00:16:58.307

如果当您手动设置正确的列表大小时它甚至小于 2^24，那么这可能是在正确的轨道上。与其达到 1600 万，然后尝试将列表的大小翻倍，不如让列表变得非常大，并且更早地耗尽内存。

这就解释了为什么你得到一个整数 - 它达到了 2^24 然后试图增加大小，这导致它使用了太多的内存。

在我看来，这是某种“自然”对象大小限制，而不是列表实现中的限制。

# php - 使用 JQuery 获取 PHP 变量并将其传递到另一个 PHP 页面

> ID：13520962
> 
> 赞同：0
> 
> 时间：2012-11-22T22:46:09.293
> 
> 标签：php, jquery, mysql

我有一个动态表，其中列出了我的 MySQL 表中的一些项目，就像这样：

```
 <?php
   $output='';
   $sql1=mysql_query("SELECT * FROM table1 ORDER BY item")or die(mysql_error());
   $sql1n=mysql_num_rows($sql1);
   if($sql1n>=1){
      while($row=mysql_fetch_array($sql1)){
          $item_num=$row['item_num'];
          $item_category=$row['item_category'];
          $item_name=$row['item_name'];

          output .='<tr>';
          output .='<td>'.$item_num.'</td>';
          output .='<td>'.$item_category.'</td>';
          output .='<td>'.$item_name.'</td>';
          output .='<td><a href="#">Delete</a></td>';
          output .='</tr>';
    }else{
          output .='Items not found!";
    }
    ?> 
```

现在我有了我的 HTML 页面

```
 <body>
          <table width="100%"  id="panel" border="0" cellspacing="0" cellpadding="3" class="table2">
         <tr>
            <td>Item #</td>
            <td>Category</td>
            <td>Name</td>
         </tr>
         <?php echo $output; ?>
         </table>
    </body> 
```

如果数据库中有一些数据，我将拥有项目、类别和名称的列表以及带有删除选项的额外列，否则，它将返回未找到项目！我想单击删除链接并将变量 $item_num 和 $item_category 引用到实际行传递给一个 jquery 函数，该函数将发送到以下 PHP 文件，而不刷新实际文件，并返回一条消息，说明该项目已成功删除！

删除-Item.php

```
<?php
    include ('dataconfig.php');

    if((isset($_POST['item_num']))and(isset($_POST['item_category']))){
      $item_num=$_POST['item_num'];
      $item_category=$_POST['item_category'];
      $sql_delete=mysql_query("DELETE FROM table1 WHERE item_num='$item_num' AND item_category='$item_category'")or die(mysql_error());
    }
?> 
```

我不知道构建将要做到这一点的 jQuery 函数的最佳方法，我将非常感谢任何可以引导我完成这项任务的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:17:47.703

您应该将 $item_num 和 $item_category 添加到 tr 元素的属性中。

例如：

```
output .='<tr id="'.$item_num.'" category="'.$item_category.'">';
output .='<td>'.$item_num.'</td>';
output .='<td>'.$item_category.'</td>';
output .='<td>'.$item_name.'</td>';
output .='<td><a href="#">Delete</a></td>';
output .='</tr>'; 
```

在 jQuery make 事件中点击行：

```
$('table tr[id]').click(function(){
    var obj = $(this);
    $.ajax({
      type: "POST",
      url: 'url/to/Delete-item.php',
      data: { item_num: obj.attr("id"), item_category: obj.attr("category") },
      dataType: "json",
      success: function(data) {
          if (data.success == "true") {
              alert('Item was deleted');
          } else {
              alert('error');
          }
      }
  });
}) 
```

并修改 Delete-item.php

```
if((isset($_POST['item_num']))and(isset($_POST['item_category']))){
    $item_num=$_POST['item_num'];
    $item_category=$_POST['item_category'];
    $sql_delete=mysql_query("DELETE FROM table1 WHERE item_num='$item_num' AND item_category='$item_category'")or die(mysql_error());
    $success = ($sql_delete) ? "true" : "false";
    $successArray = array("success" => $success);
    echo json_encode($successArray);
} 
```

我没有测试它。

并且不要忘记 $item_num 使用 intval 和 $item_category mysql_real_escape_string 以防止 sql 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:12:24.640

提供您的 tr 或 td 的 id（或类名，如果这样会更好）。

```
$output .= "<tr id='row_{$item_num}'>";
$output .= "<td class='item_category'>{$item_category}</td>";
...
$output .= "<td><a href='#' class='delete' rel='{$item_num}'>Delete</a></td>";
... 
```

像这样获取该值：（注意，您也可以使用 .siblings() 或 .parent() 来获取行和 item_cat td。无论哪种方式......

```
$('a.delete').live('click', function(e) {
  e.preventDefault();
  var item_num = $(this).attr('rel');
  var this_row = $('tr#row_'+item_num);
  //Now you have the parent row. You can do anything you want with it. If you just want to get the value of the corresponding item_cat, you could then do
  var item_cat = $(this_row).children('td.item-category').text();
  $.post('/your_url', { item_number: item_num, item_category: item_cat }, function(data) {
      //deal with the return result of 'data'
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:19:24.583

我会将 ID 添加到您的表中，例如：

```
output .='<tr id="'.$item_num.'">'; 
```

在您进行删除的后端（delete_item.php）中，我将添加一些输出以验证是否成功删除：

```
$sql_delete=mysql_query("DELETE FROM table1 WHERE item_num='$item_num' AND item_category='$item_category'")or die("0");
if ($sql_delete) {
   print $item_num;
} 
```

并在调用删除时使用 jQuery 库：

```
function delete_item(item_id, cat_id) {
  $.post('delete-item.php', { 
    // POST parameters
    item_num: item_id, 
    item_category: cat_id 
  }, function(data) {
     // if returned data is the deleted item id then.. 
     if (data==item_id) {
        // .. remove the row from the table.
        $("#" + item_id).remove();
     }
  });
} 
```

# assembly - 文档中的状态寄存器描述

> ID：13520963
> 
> 赞同：0
> 
> 时间：2012-11-22T22:46:12.563
> 
> 标签：assembly, avr, atmel

阅读 AVR 汇编器指令集文档。

![在此处输入图像描述](../Images/54f53b4b04e5cd3bfee706c66099808e.png)

那些红色突出显示的寄存器是什么意思？在某些情况下，它们是倒置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:30:18.323

# php - 需要使用 mysql 获取所有具有特定功能的产品

> ID：13520964
> 
> 赞同：1
> 
> 时间：2012-11-22T22:46:32.030
> 
> 标签：php, mysql, sql

您好，我在某些 cms（产品）中有一个包含 3 列的表格：

```
product_id feature_id value
1          1          blue
1          8          cotton
2          5          t-shirt
2          1          red
3          8          wool
1          9          large 
```

每个产品都有自己的 id，每个产品都有一个功能列表（大约 10 个），每个 feature_id 代表一个功能。根据 feature_id，“value”列具有该类型功能的值。

例如想象衣服，1 个独特的 product_id -> 1 个布料 -> 许多特性/属性，如颜色类型、材料价格大小等。

问题是否可以获取 3 行之类的

```
product_id value1 value2
1          blue   large
2          red    medium
3          green  xsmall
4          purple xlarge 
```

其中 value1 是产品 1 feature_id = 1 时 value 列上的字符串，value2 是 products 1 feature_id = 9 时 value 列上的字符串（feature_id 表示大小）

我无法在一个语句中弄清楚如何做到这一点，而不必在 php 中合并数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:49:23.453

加入将起作用： [http ://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
SELECT * FROM tbl_Products 
JOIN tbl_Features ON tbl_Products.product_id = tbl_Features.product_id
WHERE tbl_Features.feature_id = ? 
```

或者

```
SELECT * FROM tbl_Products 
JOIN tbl_Features ON tbl_Products.product_id = tbl_Features.product_id
WHERE tbl_Features.feature_id in (1, 2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:54:38.033

```
SELECT DISTINCT product_id AS book_id, (

SELECT value
FROM cscart_product_features_values
WHERE product_id = book_id
AND feature_id =  '1'
) AS publisher, (

SELECT value
FROM cscart_product_features_values
WHERE product_id = book_id
AND feature_id =  '8'
) AS author
FROM  `cscart_product_features_values` 
ORDER BY product_id 
```

好吧，经过一些测试，效果很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:41:17.127

你可以这样做：

```
select p.product_id
       (select value
          from product_features pf
         where pf.product_id = p.product_id
           and pf.feature_id = 1) as feature_1
       (select value
          from product_features pf
         where pf.product_id = p.product_id
           and pf.feature_id = 9) as feature_9
  from p.products 
```

该查询是标准 SQL，因此任何兼容的数据库都应该接受它。

我假设您有一个带有 products 和 product_features 表的正常设计

# html - 嵌入式 Google 地图 - Chrome 可以工作，但 IE 不能

> ID：13520966
> 
> 赞同：0
> 
> 时间：2012-11-22T22:46:54.030
> 
> 标签：html, google-maps, modx

[我已经通过链接http://index.wikidot.com/how-to-embed-a-google-map](http://index.wikidot.com/how-to-embed-a-google-map)在我的网站中嵌入了一个谷歌地图
它适用于 chrome。
但是，当我按下缩放按钮时，使用 IE，它会将我从我的网站重定向到谷歌地图网站。
我什至尝试在上面的链接中不使用 [[embed]]。
我是否需要在 src="" 或其他东西中插入任何额外的索引才能使其正常工作？

# ubuntu - 如何在 ubuntu 中静态链接 netcdf 程序

> ID：13520967
> 
> 赞同：6
> 
> 时间：2012-11-22T22:46:54.980
> 
> 标签：ubuntu, build, static, g++, netcdf

我正在尝试使用 netcdf 库和 g++ 静态链接一个非常简单的程序。该程序如下所示：

```
#include "netcdf.h"
int main(void)
{
  int ncid, ok;
  ok=nc_create("testing.nc", NC_NOCLOBBER, &ncid);
  ok=nc_close(ncid);
  return(0);
} 
```

如果我像这样编译它，效果很好：

```
> g++ test.cpp -lnetcdf 
```

但是，如果我尝试静态编译它，那么一切都会中断：

```
> g++ -static test.cpp -lnetcdf
/usr/lib64/libnetcdf.a(nc4file.o): In function `sync_netcdf4_file':
(.text+0x5a): undefined reference to `H5Fflush'
/usr/lib64/libnetcdf.a(nc4file.o): In function `close_netcdf4_file':
(.text+0x11b): undefined reference to `H5Fclose'
/usr/lib64/libnetcdf.a(nc4file.o): In function `get_netcdf_type':
(.text+0x18b): undefined reference to `H5Tget_class'
/usr/lib64/libnetcdf.a(nc4file.o): In function `get_netcdf_type':
(.text+0x1e9): undefined reference to `H5Tis_variable_str'
(...) 
```

许多抱怨，但第一个是针对 hdf5 的。在寻找答案时，我[在](https://www.unidata.ucar.edu/software/netcdf/docs/netcdf-install.html)unidata 上找到了这个页面，它解释了应该与 hdf5 和其他库链接。所以我尝试了：

```
> g++ -static test.cpp -lnetcdf -lhdf5_hl -lhdf5 -lz -lm 
/usr/lib64/libnetcdf.a(liboc_la-ocinternal.o): In function `ocinitialize':
(.text+0x17e): undefined reference to `curl_version_info'
/usr/lib64/libnetcdf.a(liboc_la-http.o): In function `ocsetcurlproperties':
(.text+0xc8): undefined reference to `curl_easy_strerror'
(...)
/usr/lib64/libhdf5.a(H5.o): In function `H5_term_library':
(.text+0x383): undefined reference to `pthread_once'
/usr/lib64/libhdf5.a(H5.o): In function `H5dont_atexit':
(.text+0x11ac): undefined reference to `pthread_once'
(...) 
```

更少的抱怨和第一个来自 libcurl?? 然后hdf5吹嘘pthread。所以我用 package_config 试图找出所有的依赖关系：

```
> pkg-config netcdf --libs --static
-lnetcdf
> pkg-config libcurl --libs --static
-lcurl -lidn -llber -lldap -lrt -lgssapi_krb5 -lssl -lcrypto -lz 
```

最后尝试了：

```
> g++ -pthread -static testing.cpp -lnetcdf -lhdf5_hl -lhdf5 -lz  -lm \
-lcurl -lidn -llber -lldap -lrt -lgssapi_krb5 -lssl -lcrypto -lz
/usr/bin/ld: cannot find -lgssapi_krb5
/usr/lib64/libldap.a(os-ip.o): In function `ldap_pvt_is_socket_ready':
(...) 
```

仍然抱怨找不到 gssapi_krb5 ......现在我被卡住了，因为在安装 libgssapi-krb5-2 之后，我唯一得到的是共享库！

有谁知道如何静态链接 netcdf 程序？

它必须比这更简单！这是一个有 3 行代码的程序，我确实有静态 netcdf 库……如果它们已经是静态的，我怎么还需要其他东西？

顺便说一句，我在 64 位 Intel 机器上使用 Ubuntu Natty 11.04，netcdf 和 hdf5 是从 Ubuntu 存储库安装的：

```
> dpkg --get-selections | grep netcdf
libnetcdf-dev                   install
libnetcdf6                  install
netcdf-bin                  install
netcdf-dbg                  install

> dpkg --get-selections | grep hdf
hdf4-tools                  install
hdf5-tools                  install
hdfview                     install
libhdf4-0                   install
libhdf5-serial-1.8.4                install
libhdf5-serial-dev              install
libjhdf4-java                   install
libjhdf4-jni                    install
libjhdf5-java                   install
libjhdf5-jni                    install 
```

# javascript - 动态设置下拉jquery

> ID：13520968
> 
> 赞同：2
> 
> 时间：2012-11-22T22:46:59.647
> 
> 标签：javascript, jquery

我正在尝试这样做。

```
 $("#slot_+num  option[value='8']").remove(); 
```

如果我这样做

```
 $("#slot_0 option[value='8']").remove(); 
```

它可以工作，但是如果我尝试使用变量 num 动态设置选择器，它不会做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:48:31.193

您需要连接字符串，如下所示：

```
$("#slot_"+num+"  option[value='8']").remove(); 
```

# ios - 在 iOS 中，我什么时候必须在主线程上运行某些东西？

> ID：13520970
> 
> 赞同：0
> 
> 时间：2012-11-22T22:47:05.993
> 
> 标签：ios, thread-safety

我有一个游戏，我正准备提交。我已经对其进行了很多测试，它似乎很可靠——没有崩溃，也没有意外行为。我不会强迫任何东西在主线程上运行（除了我在书中遵循示例的地方），现在我担心在某些情况下，在其他人的设备上，游戏将无法正常运行或崩溃，因为我没有在主线程上做一些应该在主线程上的事情。但我不明白需要在主线程上运行什么。我在谷歌上搜索了需要在主线程上运行哪些方法的清单或摘要，但没有发现任何有用的东西。这是我需要担心的事情吗？该应用程序适用于 iOS 5.1 及更高版本，它使用应用内购买和游戏中心。我使用 cocos2d 框架和很多 UIKit 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:53:32.967

在主线程上运行的大多数方法都很好，尤其是 UI，

您希望将后台线程用于可能需要很长时间的进程，例如 http 请求、数据库或数据排序，或任何其他可以在处理时暂停用户体验的进程。

如果您加载大量对象，您可能会产生可能导致崩溃的内存警告，

因此，当您获得内存释放时，您可以释放不需要的对象。

祝你好运

# objective-c - Objective-C NSString 在循环后变为空

> ID：13520975
> 
> 赞同：0
> 
> 时间：2012-11-22T22:47:43.497
> 
> 标签：objective-c, pointers

C伙计们，我是一个刚刚跳入Obj-C几天的新手。我有这个问题，我知道这可能很简单，但我确实花了很多时间在网上搜索但找不到相关答案，请在此处提供帮助。

我正在尝试编写一个简单的 n 元树数据结构以供练习。我创建了一个名为 ICNode 的类，其中它为它的子级、父级和深度保存了一个 NSMutableArray。

```
#import <Foundation/Foundation.h>

@interface ICNode : NSObject
{

}
@property (nonatomic, weak) id content;
@property (nonatomic, weak) ICNode *parent;
@property (nonatomic, strong) NSMutableArray *children;     // should store ICNode
@property (nonatomic) int depth;    // root is 0, not set is -1 
```

然后我写了一个简单的测试代码来测试它。

```
for (int i = 1; i <= 2; i++) {
    NSString *string = [[NSString alloc] initWithFormat:@"Test %d", i];
    ICNode *child = [[ICNode alloc] init];
    [child setContent:string];
    [root addChild:child];
    STAssertEqualObjects([child parent], root, @"child's parent is root");
    STAssertEquals([child depth], 1, @"children's depth is 1");
}
STAssertEquals([root numberOfChildren], 2, @"root's number of children is testRun");
NSLog(@"%@", root); 
```

我的问题是，在最后一行代码 NSLog 中，我希望看到这样的内容：

```
"Content: Test 1(depth=1) -> Parent: I am Root -> Children: (null)",
"Content: Test 2(depth=1) -> Parent: I am Root -> Children: (null)" 
```

但相反，它总是

```
"Content: (null)(depth=1) -> Parent: I am Root -> Children: (null)",
"Content: (null)(depth=1) -> Parent: I am Root -> Children: (null)" 
```

然后我在那里放了一个断点，发现addChild方法之后就是find，但是循环结束后，child的内容会变为null。我对指针的东西不太熟悉，所以我怀疑这与指针有关。

另一个观察是如果我做这样的事情，

```
NSString *string = [[NSString alloc] initWithFormat:@"Test %d", 1];
ICNode *child = [[ICNode alloc] initWithContent:string parent:root];
NSString *string1 = [[NSString alloc] initWithFormat:@"Test %d", 2];
ICNode *child1 = [[ICNode alloc] initWithContent:string1 parent:root];
NSLog(@"%@", [root description]); 
```

然后输出就好了。但我确实希望能够使用循环创建节点。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:30:09.370

因为 ICNode 的`parent`和`content`属性是**weak**，所以一旦最后一个强引用消失，它们就会变成 nil 。

在您拥有的代码片段中，`content`是从局部变量设置的`string`，并且该变量是 for 循环的局部变量。如果将它移到 for 循环之外，进入函数主体，ICNode 的`content`属性将不会变为 nil。

但是很可能你想`content`成为一个**强大的，**而不是**弱**的。

# function - Scala：尾递归幂函数

> ID：13520976
> 
> 赞同：1
> 
> 时间：2012-11-22T22:48:00.027
> 
> 标签：function, scala, tail-recursion, pow

结果我总是得到“1”。:(
这个功能有什么问题？

```
 def power(base: Int, exp: Int): BigInt = {
        def _power(result: BigInt, exp: Int): BigInt = exp match {
            case 0 => 1
            case _ => _power(result*base, exp-1)
        }
        _power(1, exp)
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T22:51:02.560

你必须这样替换：`case 0 => result`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-31T19:56:56.963

可能与 OP 无关，但我将此答案用作示例，并且此版本有效：

```
def power(base: Int, exp: Int): BigInt = {
    def _power(result: BigInt, exp: Int): BigInt = exp match {
        case 0 => 1
        case 1 => result
        case _ => _power(result*base, exp-1)
    }
    _power(base, exp)
} 
```

# android - VideoView 回调结束视频

> ID：13520977
> 
> 赞同：3
> 
> 时间：2012-11-22T22:48:07.953
> 
> 标签：android, xamarin.android

我正在使用这段代码来播放视频：

```
string videoUriString = "android.resource://" +  this.PackageName + "/" + Resource.Raw.video;
Android.Net.Uri videoURI = Android.Net.Uri.Parse(videoUriString);
video.SetVideoURI(videoURI);
video.Start(); 
```

但我真的很沮丧，因为我不明白如何附加回调来处理视频的结尾，我必须使用 Monodroid，然后是 C#

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-24T08:26:39.920

```
 myVideoView.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub

           //write your code after complete video play  
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:59:14.250

Attach the callback by

```
video.setOnCompletionListener(new OnCompletionListener() { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-02T21:35:00.323

在 Xamarin.Android 中：

```
video.Completion += delegate {
    Finish();
}; 
```

# javascript - 为应该在 DOM 就绪上运行的函数以及在整个浏览会话中运行的函数更正 jQuery 结构

> ID：13520981
> 
> 赞同：0
> 
> 时间：2012-11-22T22:48:32.967
> 
> 标签：javascript, jquery, function

我的网站包含单选按钮和复选框。

当用户在表单中选择一个并提交时，该状态会被存储，这样当用户返回页面时，它会按照用户之前的选择加载到该状态。

其中一些复选框具有子元素，当它们的父元素被选中时，它们会更改其禁​​用属性，以便可以与之交互。

我使用 jQuery 函数来实现这一点。

如果用户之前选择了禁用子元素的父元素，那么当他们返回页面时，我需要启用子元素运行的函数。

每次用户在浏览会话期间选择一个时，我还需要运行此功能。

我目前可以通过复制我的 jQuery 函数来实现这一点，一次是在 When DOM Ready 封装中，一次是没有这个。

我怀疑这是不好的做法，我是否正确，如果是，我应该怎么做？

为了说明我的观点，举个例子：

```
//First the code for DOM ready:
//You can see it disables and unchecks boxes if they are not checked etc.

$(function() {
    if ($('#parent').is(':checked')) {
            $('#child1').removeAttr('disabled');
            $('#child2').removeAttr('disabled');
    } else {
            $('#child1').attr('disabled', true);
            $('#child1').removeAttr('checked');
            $('#child2').attr('disabled', true);
            $('#child2').removeAttr('checked');
    }  

 });

//Now, the exact same function just without the DOM ready encapsulation.

if ($('#parent').is(':checked')) {
            $('#child1').removeAttr('disabled');
            $('#child2').removeAttr('disabled');
    } else {
            $('#child1').attr('disabled', true);
            $('#child1').removeAttr('checked');
            $('#child2').attr('disabled', true);
            $('#child2').removeAttr('checked');
    } 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T10:38:26.800

是的，这样的重复代码是不好的做法。所以如果你的代码做了它应该做的，你可以像下面这样写。

我相信您使用的是在 Ajax 框架中执行一些表单 Ajax 任务的 CMS，对吗？（例如Drupal？）否则我无法想象为什么这段代码会像你描述的那样做。

```
(function($) { 
    var init = function() {
            if ($('#parent').is(':checked')) {
                $('#child1').removeAttr('disabled');
                $('#child2').removeAttr('disabled');
            } else {
                $('#child1').attr('disabled', true);
                $('#child1').removeAttr('checked');
                $('#child2').attr('disabled', true);
                $('#child2').removeAttr('checked');
            }  
        }

    //first call
    init();

    //second call
    $(function() {
        init();
    });

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:55:18.890

所以基本上你希望你的页面状态保持不变？

您可以将状态存储在几个地方：

1.  客户端存储
2.  饼干
3.  网址哈希

饼干可能是最简单的。

要正确地使状态保持不变，您必须跟踪实际状态。因此，只要 DOM 的状态发生变化，就存储该变化。然后当用户打开页面时，查看 cookie 并恢复状态（这是 DOM 就绪部分）。

这并不总是一件容易的事，因为状态可能非常复杂。想象一下，您有一个可折叠的树，您需要跟踪哪些节点被展开。

如果您只想跟踪一些复选框，那应该不会太难。

# php - PDF 链接重新加载页面而不是下载 PDF

> ID：13520983
> 
> 赞同：0
> 
> 时间：2012-11-22T22:48:58.770
> 
> 标签：php, html, wordpress, pdf, download

我正在将 WordPress 用于网站，并且正在手动编辑主题。我想要一个链接，点击时会提示下载 pdf 文档。

当前发生的情况是，当我单击链接时，它只会重新加载主页。

我在用着

```
< a href="/WordPress/wp-content/uploads/files/application-spring-2013.pdf">Application Form< /a> 
```

在我的footer.php 中获取超链接。

您可以在以下位置查看其行为

www.pepperdine-graphic.com

点击页脚中的“申请表”链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:53:56.007

看起来文件不存在：

```
WEB_ROOT/WordPress/wp-content/uploads/files/application-spring-2013.pdf 
```

如果文件不存在，服务器会重定向到 index.php。只需将文件添加到正确的文件夹或更改链接以指向正确的文件。

# python - 列表的类型测试元素

> ID：13520988
> 
> 赞同：0
> 
> 时间：2012-11-22T22:49:21.423
> 
> 标签：python, list, testing, types

有人可以就以下结果提供一些评论。当我写时，我对自己实际在做什么感到特别困惑： alist = [None]*5 in #1 以及为什么 'is' 语句是 False ，但 isinstance 在 #3 中是 True 非常感谢。

```
#1
>>> alist = [None]*5

>>> alist

[None, None, None, None, None]

>>> type(alist[0])

<type 'NoneType'>

>>> type(alist[0]) is None
False

#2
>>> alist = [int]*5
>>> alist

[<type 'int'>, <type 'int'>, <type 'int'>, <type 'int'>, <type 'int'>]

>>> type(alist[0]) is int

False

>>> isinstance(alist[0],int)

False

#3
>>> alist = [0.0]*5

>>>type(alist[0])

<type 'float'>

>>> alist[0] is float

False

>>> isinstance(alist[0],float)

True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:05:43.367

> 我写的时候实际上在做什么：alist = [None]*5 in

您正在调用列表中的 * 运算符。见这里：[http ://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)

> 为什么“是”陈述是假的

因为`<type 'NoneType'>`is not `None`，它是 的类型`None`。

> isinstance 在 #3 中为 True

因为`alist[0]`是 type 的一个实例`float`。那不是很难，是吗？

# android - 导出的 apk 在安装时显示活动

> ID：13520996
> 
> 赞同：0
> 
> 时间：2012-11-22T22:50:07.523
> 
> 标签：android

我已将具有 3 个活动（主要、启动和另一个名为“关于”的活动）的应用程序导出到 apk 文件。在模拟器上测试时效果很好。上传到 Play 商店然后下载到我自己的手机后，它可以在我的手机上正常安装。目前很好。但是，apk 没有打包显示 - 它显示了单独的活动，而不是像在模拟器中那样从启动屏幕开始。可能是什么问题呢？它导出没有错误。导出时，我为 apk 指定了一个与清单中的包名称不同的名称。这会导致问题吗？这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.spinner"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity
        android:name=".SplashActivity"
        android:label="@string/title_activity_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".AboutActivity"
        android:label="@string/title_activity_about" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

谢谢你的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:06:11.980

这个意图过滤器

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

告诉 Android 启动器应用程序在其启动器屏幕上显示与此过滤器附加到的 Activity 关联的图标。当用户点击相应的图标时，启动器应用程序会启动该活动并执行您的代码。您**通常**希望在您的应用程序中有一个入口点，因此请编辑您的清单文件并确保只有一个 Activity 元素使用它。在你的情况下，我想把它留给`SplashActivity`别人并从其他人那里删除。它应该如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.spinner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name=".SplashActivity"
            android:label="@string/title_activity_splash" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name=".AboutActivity"
            android:label="@string/title_activity_about" >
        </activity>
    </application>
</manifest> 
```

我也会摆脱元素（只是`android:label`离开）`<activity>``<application>`