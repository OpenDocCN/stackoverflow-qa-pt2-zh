# StackOverflow 问答 14150000-14150999

# shell - ubuntu 中的 echo -e 选项不起作用

> ID：14150003
> 
> 赞同：5
> 
> 时间：2013-01-04T01:49:51.370
> 
> 标签：shell, ubuntu, makefile

我的同事用的是 Ubuntu，我用的是 openSUSE，我们用同样的 makefile 编译了同样的源代码，我的环境运行良好，但是我的同事不行，总是输出无法识别的`-e`选项。我们检查makefile，只找到`echo`命令使用`-e`选项。

Dose Ubuntu 的 echo 功能和其他的有什么不同？

+++++在makefile中更新，回显定义为：

`TOOLSDIR =`

`ECHO = $(TOOLSDIR)echo -e`

$(TOOLSDIR) 是工具的目录，这个 make 文件可以检测编译环境，如果 linux 或有 CYGWIN：

`$(TOOLSDIR)`为空，如果是windows，则进入WIN32版本回显工具目录，如：

`TOOLSDIR = $(subst /,\,$(MAKEDIR)/tools/WIN32/)`

我们执行make后，ubuntu会输出：

致命错误：L3900U：无法识别的选项“-e”。

但是，openSUSE 没有这个错误

+++++更新回声-e

我在ubuntu中写了一个测试makefile

```
all:
    echo -e hello 
```

它输出：

回声 -e 你好

你好

+++++更新 openSUE ( **12.1** ) 和 ubuntu ( **12.04** )中的 makefile 测试

```
all:
    echo -e "hello 1"
    echo -e hello 2
    echo -e he\nllo3
    echo -e "he\nllo4" 
```

1.  打开使用，输出为：

回声-e“你好1”

你好 1

回声 -e 你好 2

你好 2

echo -e he\nllo3

henllo3

echo -e "他\nllo4"

他

llo4

1.  在 ubuntu 中，输出为：

回声-e“你好1”

-e 你好 1

回声 -e 你好 2

你好 2

echo -e he\nllo3

henllo3

echo -e "他\nllo4"

-e他

llo4

同时，我在ubuntu中测试，echo without `-e`，结果和openSUSE一样，echo with`-e`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T02:05:59.567

它可能取决于你们正在使用的外壳（回声通常在外壳内实现）

这就是 OS X (Mountain Lion) 中发生的事情：

```
$ bash
bash-4.2$ echo -e foo
foo
bash-4.2$ sh
sh-3.2$ echo -e foo
-e foo 
```

OpenSUSE 和 Ubuntu 也是如此。

`-e`选项不符合 POSIX（我不确定，但它应该是默认行为），顺便说一句，打印格式化文本`printf`是更合适的命令。

根据您提供的信息，在我看来您的 makefile 存在错误（可移植性问题）。

顺便说一句，在 OSX`man echo`上也没有列出该`-e`选项。在 Ubuntu 12.10`-e`上，我的计算机上存在，在我的路由器 BusyBox v1.13.4 上也接受`-e`（它是busybox的内部命令）

但可能只是`/bin/sh`使用内部命令并忽略它。

==== 更新：

在你的 makefile 中删除 echo 前面的 $(TOOLSDIR) ：

```
ECHO = echo -e 
```

实际上，如果您指定 echo 的路径（即`/bin/echo`），您会强制 shell 从文件系统执行程序，而不是 shell 内部实现的程序：

```
$ echo -e foo
foo
$ /bin/echo -e foo
-e foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T19:36:27.900

Luigi R. Viggiano 和 How Chen 都对问题和解决方案提供了很好的解释。事实上，他们的答案是相辅相成的。

在*dash*中，*echo*命令不接受*-e*标志。但是，在*bash*中，确实如此。

在 Ubuntu 中，可以考虑使用*update-alternatives*来选择*bash*而不是*dash*作为默认 shell。以下命令可以解决问题（警告，这些命令将在系统范围内应用）：

```
sudo update-alternatives --install /bin/sh sh /bin/bash 0
sudo update-alternatives --install /bin/sh sh /bin/dash 0
sudo update-alternatives --set sh /bin/bash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T05:08:44.383

我还发现它可能是由 ubuntu 链接`/bin/sh`到`dash`but NOT引起的`bash`。使用后`bash`，问题解决了，还有一个与此相关的问题，我问： [相同的 shell 脚本在不同的 Linux 发行版上有不同的行为](https://stackoverflow.com/questions/18093506/same-shell-script-has-different-behaviou-on-different-linux-distribution)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-06T18:03:02.573

The`\`是 shell 中的转义字符，所以`\n`就是一个“n”，所以转义 escape `\\\n`。

```
[sg@Study ~]$ echo -e \\nfoo\\nfoo

foo
foo
[sg@Study ~]$ 
```

或使用引号

```
[sg@Study ~]$ echo -e "\\nfoo\\nfoo"

foo
foo
[sg@Study ~]$ 
```

# android - 为多种屏幕尺寸构建的最佳方式是什么？

> ID：14150007
> 
> 赞同：0
> 
> 时间：2013-01-04T01:50:21.367
> 
> 标签：android

我现在正在构建一个应用程序，我希望它能够在多种屏幕尺寸（手机、7 英寸平板电脑和 10 英寸平板电脑）上正常工作。我已经查看了有关支持多个屏幕的文档，但我仍然有一些问题。

现在我有 5 个不同的布局文件夹，layout-：normal、large、xlarge、sw600dp 和 sw720dp。这是为所有屏幕尺寸构建的最佳方式吗？

当我尝试优化每个布局时，说覆盖一些 3 英寸和 4 英寸屏幕的正常尺寸时，我遇到的问题是我无法让我的布局在所有这些屏幕上看起来都正确。我做对了什么，我可以改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:01:09.467

我不相信有任何最好的方法，这只是你的方法。如果您打算使图像、按钮、文本视图更小或更大，您可以使用您使用的方法或 style.xml。

Style.xml 示例：

您将拥有一些文件夹，例如：

*   价值观
*   值-大
*   正常值
*   值-小
*   值-xlarge

在文件夹中，您有一个具有不同值的 styles.xml：

```
<style name="BigTextStyle">
    <item name="android:textSize">60dp</item>
</style>

<style name="SmallTextStyle">
    <item name="android:textSize">48dp</item>
</style>

<style name="ImageSize">
    <item name="android:layout_width">100dp</item>
    <item name="android:layout_height">100dp</item>
</style> 
```

只需根据您正在使用的屏幕更改大小，然后在 layout.xml 中添加：

```
<ImageView
    android:id="@+id/imageSD"
            style="@style/ImageSize" />

        <TextView
    android:id="@+id/imageNameSD"
            style="@style/BigTextStyle" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:03:35.173

我相信您可以使用此资源别名先生。

假设您有两个不同的图像用于 sw320dp 和 sw600dp。

*   image1_sw320dp.png
*   image1_sw600dp.png

将所有图像资源放入文件夹`drawable`。

在文件夹 values-sw320dp 中，创建一个 xml 资源。（也可能你需要 values-small，只需从 values-320dp 复制 xml）

```
<resources>
    <item type="drawable" name="image1">@drawable/image1_sw320dp</item>
</resources> 
```

在文件夹 values-sw600dp 中，创建一个 xml 资源。

```
<resources>
    <item type="drawable" name="image1">@drawable/image1_sw600dp</item>
</resources> 
```

然后在活动上使用`R.drawable.image1`. 这可以防止创建重复资源，例如 sw320dp、small 和 normal。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:23:39.580

Rotary 先生有一个很好的方法来处理多种屏幕尺寸。此外，您可以在应用程序中使用 Fragment。您可以在这里学习如何使用片段：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# kendo-ui - Kendo UI DataSourceRequest 性能影响

> ID：14150010
> 
> 赞同：3
> 
> 时间：2013-01-04T01:50:32.403
> 
> 标签：kendo-ui

我正在使用 KendoUI 网格并使用它的 ToDataSourceResult 来过滤我的数据（如文档所建议的那样），但我担心性能影响。

根据我的理解，以下建议的代码将所有记录从数据库中获取到内存中，并执行 ToDataSourceResult 扩展方法来过滤内存中的记录（LINQ fluent api 概念）。如果我有很多记录，这会对性能产生很大影响吗？

我想预先使用“where”子句查询数据库会有更好的性能......请告知。

这是文档中建议的内容

```
var countries = _database.Countries.GetAll();
return Json(countries.ToDataSourceResult(request, record => new
{
     record.Id,
     record.Name,
     record.Currency,
     record.TimeZone
})); 
```

这是不使用 ToDataSource 过滤器的其他选项

```
var selectedCountries = _database.Countries.GetCountryStartWith("m") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T08:16:40.173

这取决于您的`GetAll`方法返回什么。如果它`IQueryable`从[启用 LINQ 的提供程序](http://en.wikipedia.org/wiki/Language_Integrated_Query#Other_providers)（实体框架、Linq to SQL 或其他任何东西）返回，所有操作都将在数据库级别（不在内存中）执行。如果它返回所有记录 - 那么即使在使用 ToDataSourceResult 之前你也会遇到问题。

# haskell - 为什么 Haskell 不支持相互递归的模块？

> ID：14150011
> 
> 赞同：17
> 
> 时间：2013-01-04T01:50:42.527
> 
> 标签：haskell, compiler-construction, module, mutual-recursion

Haskell 支持相互递归的 let 绑定，这很棒。Haskell 不支持相互递归的模块，这有时很糟糕。我知道 GHC 有[它的`.hs-boot`机制](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/separate-compilation.html#mutual-recursion)，但我认为这有点小题大做。

据我所知，对相互递归模块的透明支持应该相对“简单”，并且可以*完全*像相互递归的 let-bindings 一样完成：我不会将每个单独的模块作为编译单元，而是将每个强连接组件将模块依赖图作为编译单元。

我在这里错过了什么吗？Haskell 不以这种方式支持相互递归模块是否有任何重要的原因？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T02:16:12.187

这张已有[6 年历史的功能请求票](http://hackage.haskell.org/trac/ghc/ticket/1409)包含大量讨论，您可能已经看过了。它的要点是，就 GHC 而言，它并不完全是一个简单的改变。提出了几个具体问题：

*   GHC 目前有很多关于在编译期间如何处理模块的假设，并且显着改变这些假设将大大超过透明支持相互递归模块的好处。

*   将模块组集中在一起意味着它们必须一起编译，这意味着更多的重新编译和生成单独`.hi`的`.o`文件的尴尬。

*   向后兼容使用`hs-boot`文件的现有构建。

*   您有可能在相互递归的模块组中跨越模块边界的相互递归绑定，这会引发任何涉及隐式、模块级范围的问题（例如默认值和可能的类型类实例）。

*   当然，还有可能出现未知的、未预料到的错误，就像任何改变 GHC 中长期假设的东西一样。即使没有对编译过程进行大量更改，目前也假定许多内容是基于每个模块进行编译的。

很多人希望看到这一点得到支持，但到目前为止，还没有人提出可能的实现或制定出一个详细的、指定良好的设计来处理上述所有棘手的极端情况。

# node.js - 在node.js express中，如何在一个get方法中合并多个路由器

> ID：14150014
> 
> 赞同：0
> 
> 时间：2013-01-04T01:50:52.320
> 
> 标签：node.js, merge, express, router

假设我有两个路由器：

```
app.get('blog/show', function () {
  todo();
})

app.get('/admin', function () {
  todo();
}) 
```

我可以将两个路由器合并到相同的`app.get`方法吗？ Mybe 之类的`app.get('blog/show', '/admin')`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:34:05.253

正如 bryanmac 提到的，您可以通过将路由路径指定为匹配任一情况的正则表达式来做到这一点：

```
app.get(/blog\/show|\/admin/, function () {
  todo();
}); 
```

当然，您也可以让两条路由使用相同的命名函数：

```
function handler() {
  todo();
}
app.get('blog/show', handler);
app.get('/admin', handler); 
```

# java - 处理文件的小程序在本地工作，但在网站上失败

> ID：14150015
> 
> 赞同：2
> 
> 时间：2013-01-04T01:51:05.127
> 
> 标签：java, swing, applet, swingworker, indexoutofboundsexception

几天来，我一直在努力解决这个问题。我已经完成了谷歌搜索，我希望我能在这里找到比我更有经验的人（不难找到哈哈）来破解我的问题。

**场景**：我开发了一个实现 Swing GUI 的 Java Applet。背景工作：Applet 从大型“电话簿”excel 文件 (.csv) 中收集记录，并将它们存储在 Map 数据结构中。电话簿包含大约 106,000 条记录，在第 34,586 条记录中，我得到了一个我无法理解的 ArrayIndexOutOfBoundsException。**仅当我在我的个人网站上运行小程序时才会出现异常**。在我的 IDE (NetBeans) 中进行测试并在我的本地计算机上运行 .html 文件（包含该小程序的文件）时，小程序运行得非常好，没有错误。在我的网站上运行时抛出的输出和异常如下（我剪掉了大部分记录以节省空间）：

*Java 控制台*

```
Kary,Webber,2826 East 12th Ave.,Memphis,TN,38168,901-749-1834
Erinn,Rocha,2132 East Main Ave.,Memphis,TN,38168,865-414-5105
Gina,Lane,71 South First St. Apt. 11,Memphis,TN,38168,731-485-1129
Patsy,Hart,661 East 11th St.
java.lang.ArrayIndexOutOfBoundsException: 3
at Implementation.PersonnelDatabase.addRecordFromFields(PersonnelDatabase.java:192)
at Implementation.PersonnelDatabase.initDBFromFile(PersonnelDatabase.java:215)
at Implementation.PersonnelDatabase.processData(PersonnelDatabase.java:239)
at Implementation.PersonnelDatabaseApplet$2.doInBackground(PersonnelDatabaseApplet.java:78)
at Implementation.PersonnelDatabaseApplet$2.doInBackground(PersonnelDatabaseApplet.java:69)
at javax.swing.SwingWorker$1.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at javax.swing.SwingWorker.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

如您所见，在第 34,586 条记录中（从 Patsy、Hart 开始），它在她的地址中途输出。完整记录如下：Patsy,Hart,661 East 11th St. Apt. 195，孟菲斯，田纳西州，38168,555-555-5555。

以下是逻辑上受异常影响最大的代码部分。

**HTML 文件中的对象标记**

```
<object type="application/x-java-applet" height="400" width="300">
  <param name="codebase" value="classes" />
  <param name="code" value="Implementation/PersonnelDatabaseApplet.class" />
  <param name="archive" value="PersonnelDatabase.jar" />
  Applet failed to run. No Java plug-in was found.
</object> 
```

**PersonnelDatabase 类（处理后台数据）：**

```
/*
 * Create a new record using an appropriately ordered set of fields and add it to the data base
 */
public void addRecordFromFields(String[] fields)
{
    // Read record attributes in, one at a time
    Record thisRecord = new Record();
    thisRecord.setFirstName(fields[0]);
    thisRecord.setLastName(fields[1]);
    thisRecord.setAddress(fields[2]);
    thisRecord.setCity(fields[3]);
    thisRecord.setState(fields[4]);
    thisRecord.setZipCode(fields[5]);
    thisRecord.setPhoneNo(fields[6]);
    addRecord(thisRecord);
}

// O( n )
/**
 * Destroy the current data base and load new data from a file.
 * @param filename the file to use as a source
 * @throws IOException: Either file not found or IO error
 */
public void initDBFromFile(URL url) throws IOException
{
    // Open and read the file
    InputStream in = url.openStream();
    BufferedReader filein = new BufferedReader(new InputStreamReader(in));
    // Read record file, parse lines, and add records to data base
    String line = filein.readLine();
    while(line != null) {
        System.err.println(line);
        String[] fields = line.split(",");
        addRecordFromFields(fields);
        line = filein.readLine();
    }
    filein.close();
}

/**
 * Loads the default library and provides for interaction with the data
 * via the JPanel GUI inputs.
 * @param args
 * @throws IOException 
 */
public String processData(String input, int selection, URL url)
{
    //Create the main library object
    PersonnelDatabase dbiLib = new PersonnelDatabase();
    System.err.println(url);
    // Try to read the default library
    try
    {
        dbiLib.initDBFromFile(url);
    }
    catch (IOException e)
    {
        System.err.println("File IO Error");
        e.printStackTrace();
        System.exit(1);
    }
    // Queries can be simulated by typing into the console in Eclipse, and using Ctrl-d (Ctrl-z in Windows) when finished.
    // For example: "searchLastName,Smith" would print a list of all people with the last name of Smith.
    Iterable<Record> result = null;
    String[] fields = new String[2];
    if (input.contains(",")) {
        fields = input.split(",");
    }

    switch(selection) {
        case 0: result = dbiLib.searchByFirstName(input); break;
        case 1: result = dbiLib.searchByLastName(input); break;
        case 2: result = dbiLib.searchByFullName(fields[0].trim(), fields[1].trim()); break;
        case 3: result = dbiLib.searchByCity(input); break;
        case 4: result = dbiLib.searchByState(input); break;
        case 5: result = dbiLib.searchByCityState(fields[0].trim(), fields[1].trim()); break;
        case 6: result = dbiLib.searchByZip(input); break;
        case 7: result = dbiLib.searchByPhoneNumber(input); break;
        case 8: String[] newFields = new String[fields.length-1];
                System.arraycopy(fields, 1, newFields, 0, fields.length-1);
                dbiLib.addRecordFromFields(newFields);
                return "Record added successfully!\nEnter a query or add another record.";
        default: return "Invalid query.\nEnter another query or add a record.";
    } 
```

**PersonnelDatabaseApplet 类（初始化 GUI、收集输入并显示输出）：**

```
public void init() {
    /* Create and display the applet */
    try {
        java.awt.EventQueue.invokeAndWait(new Runnable() {

            @Override
            public void run() {
                initComponents();
            }
        });
    } catch (Exception e) {
        System.err.println("Creation of GUI did not successfully complete.");
    }
}

// Process inputs in the background.
SwingWorker worker = new SwingWorker<String, Void>() {
    @Override
    public String doInBackground() {
        URL url = null;
        try {
            url = new URL(getCodeBase(), fileToRead);
        }
        catch(MalformedURLException e){}
        personnelDatabase = new PersonnelDatabase();
        final String output = personnelDatabase.processData(input, selection, url);
        return output;
    }

    @Override
    public void done() {
        processingLabel.setVisible(true);
        try {
            textToDisplay = get(15, TimeUnit.SECONDS);
        } catch (InterruptedException ignore) {
            ignore.printStackTrace();
        } catch (TimeoutException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            String why = null;
            Throwable cause = e.getCause();
            if(cause != null) {
                why = cause.getMessage();
                cause.printStackTrace();
            } else {
                why = e.getMessage();
                e.printStackTrace();
            }
            System.err.println("Error retrieving request: " + why);
            }
        if(worker.isDone() && textToDisplay != null) {
            processingLabel.setVisible(false);
            outputTextArea.setText(textToDisplay);
        }
    }
};

private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
selection = searchComboBox.getSelectedIndex();
input = valueTextField.getText();
processingLabel.setVisible(true);

worker.execute(); 
```

}

**链接到我个人网站上的 Applet：** [http ://www.ryan-taylor.me/Applied%20Maps/build/PersonnelDatabaseApplet.html](http://www.ryan-taylor.me/Applied%20Maps/build/PersonnelDatabaseApplet.html)

我相当确定该错误与 excel 数据本身无关，因为该程序在 NetBeans 中运行良好，并且在我的本地计算机上运行 html 时。我猜它与 Swing（线程）有关，但我不确定。我通过使用 SwingWorker 进行了更改以帮助在 Swing 线程之间传输数据，但我没有运气。我想在实施它时总是有可能我错过了一些东西。

我还考虑过对 jar 进行签名，但我正在处理的文件是在线存储的——不是本地机器——所以我没有看到真正的需要。

如果有人有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:08:10.417

看起来超出范围的数组索引是`3`，因为输入行仅包含三个字段，并且您尝试访问第四个字段（索引 3）而不检查它是否确实存在。错误在

```
thisRecord.setCity(fields[3]); 
```

因为数组`fields`只有三个元素。在

```
 String[] fields = line.split(",");
    addRecordFromFields(fields); 
```

当你到达

```
Patsy,Hart,661 East 11th St. 
```

`fields`将仅使用 3 个条目创建数组。

如果字段的数量预计保持不变，那么您应该拒绝没有正确数量的字段的输入行。如果字段的数量可以变化，那么您必须检查返回的实际数量并仅提取那些实际存在的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T02:22:48.523

当您在浏览器中运行小程序时，似乎有些东西导致文件被截断。我的猜测是您正在从 Web 服务器获取文件，并且服务器或浏览器都在默默地执行一些下载限制。（或者可能是文件在您上传时被截断......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T03:07:23.547

`worker`我怀疑您和另一个因网络延迟而暴露的线程之间存在数据竞争。有两件事可能需要更仔细的审查：

1.  使用`invokeAndWait()`初始化 GUI 是合理的，只要在[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上没有做进一步的处理。

2.  您`worker`在不调用 时是不寻常的，作为在事件调度线程上记录的`publish()`一种方式，[例如](https://stackoverflow.com/a/4637725/230513).`process()`

# scala - Scala - 编写一个非泛型树。类型参数问题

> ID：14150016
> 
> 赞同：0
> 
> 时间：2013-01-04T01:51:10.567
> 
> 标签：scala, generics, tree, variance

我对 Scala 泛型和方差一无所知，我无法理解某些事情。

这是我到目前为止所拥有的：

```
sealed abstract class Tree[+T]
case class Node[+T](value: T, left: Tree[T], right: Tree[T]) extends Tree[T] {
  override def toString = "T(" + value.toString + " " + left.toString + " " + right.toString + ")"
}
case object End extends Tree[Nothing] {
  override def toString = "."
}
object Node {
  def apply[T](value: T): Node[T] = Node(value, End, End)
} 
```

一个基本的泛型二叉树。我想要做的是专门化它，所以它`T`是某个类的子类型 say `Rectangle`。我想这样做的原因是创建一个`addValue`使用某些方法的方法`Rectangle`（即它是一个使用某些东西的树`Rectangle`）：

```
sealed abstract class Tree[+T] {
  def addValue
} 
```

我知道我可以`Ordering`在矩形上定义并这样做：

```
sealed abstract class Tree[+T] {
  def addValue[U >: T <% Ordered[U]](x: U): Tree[U]
} 
```

但我觉得有一种更简单的方法可以限制`T`为`Rectangle`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:41:05.573

要将泛型类型限制`T`为 的子类型`Rectangle`，请使用`<:`运算符：

```
class Rectangle
class GenericThing[T <: Rectangle](x: T)

new GenericThing(new Rectangle) // fine
new GenericThing(5) // inferred type arguments [Int] do not conform to class GenericThing's type parameter bounds [T <: Rectangle] 
```

# iphone - 横向应用程序在启动时以纵向运行 - 侧面的按钮无法访问

> ID：14150022
> 
> 赞同：1
> 
> 时间：2013-01-04T01:51:37.313
> 
> 标签：iphone, ipad, touch, landscape, portrait

我遇到过很多次这个问题，只是无法找到解决方案......

我们的大多数应用程序仅在横向模式下运行，而我现在正在开发的应用程序（以及我过去开发过的许多应用程序）显示以下行为 - 首次启动时，应用程序在横向模式下正确显示，但是屏幕右侧的任何按钮都无法按下。该应用程序的行为就好像它只识别在应用程序处于纵向模式时可见的屏幕部分上的触摸，而忽略屏幕右侧的任何触摸。如果我单击另一个 viewController，然后返回有问题的 viewController，它会对屏幕上的所有触摸做出正确反应。仅在首次启动时，应用程序才会认为它在纵向运行并且无法识别 768x1024 区域（或 1536x2048 或 320x480 或 640x960）右侧的触摸

所以我看到的可视区域为 1024x768，但只能点击屏幕前 768 像素中的按钮（最右边的 256 像素无法访问）

我尝试过的一种解决方法（成功有限 - 它以前曾有效，但并不总是有效，现在也无效）已将这些行包含在多个位置，例如 AppDelegate.m、rootViewController.m 和在具有上述问题的特定 viewController.m 中：

```
self.view.frame = CGRectMake(0.0, 0.0, 1024.0, 768.0);

//I've also tried:

CGRect landFrame = self.view.frame;
landFrame.size.width = self.view.frame.size.height;
landFrame.size.height = self.view.frame.size.width;
self.view.frame = landFrame; 
```

有任何想法吗？

* * *

.plist 值包括：

初始界面方向 - 横向（右主页按钮）

支持的接口方向：

*   项目 0 - 横向（右主页按钮）
*   第 1 项 - 横向（左主页按钮）

* * *

我在 rootViewController 和特定的 viewController 中有这段代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (UIInterfaceOrientationIsLandscape(interfaceOrientation));

    //I've also tried:
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T05:51:08.333

这是我发现的最有用的东西：

在应用程序委托 didFinishLaunchingWithOptions 中：

更改 [window addSubview:navigationController.view];

到 [window setRootViewController:navigationController];

并在 Root ViewController 中，更改

– (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

到：

*   (BOOL) 应该自动旋转 {

返回是；

}

并在 .plist 文件中设置支持的接口方向

# javascript - 试图连接一个 jQuery .click() 事件..但它被解雇了（而不是仅仅连接起来）

> ID：14150025
> 
> 赞同：1
> 
> 时间：2013-01-04T01:52:03.663
> 
> 标签：javascript, jquery, onclick, click

所以我有以下jQuery：

```
<script type="text/javascript">

    // Init.
    $(function () {

        // Wire up the search box.
        $('#searchButton').click(
            search($('#query').val(),
                $('aaa').val(),
                $('bbb').val()
            ));
    });

</script> 
```

但是当我第一次点击页面时，该`search`函数被触发（因为我在那里放了一个断点）。

我以为我的代码（上面）只是说：*连接点击事件，当有人点击该按钮时，下面的代码被称为 => 搜索函数，带有以下 3 个参数）*。

谁能告诉我我做错了什么，好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T01:54:34.723

因为它需要一个函数引用。您正在做的是执行 search() 并将该结果作为参考传递。

```
<script type="text/javascript">

    // Init.
    $(function () {

        // Wire up the search box.
        $('#searchButton').click(function() {
                search($('#query').val(),
                    $('aaa').val(),
                    $('bbb').val()
                ));
            }
    });

</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T01:54:07.733

您应该将处理程序代码包装在匿名函数中。

否则*search()*将被评估，结果将应用于点击处理程序。

试试这个：

```
$(function () {
    $('#searchButton').click(function () {
        search( $('#query').val(),
                $('aaa').val(),
                $('bbb').val() 
        );
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T01:56:58.567

因为您正在使用一个参数调用函数“click”，所以“search(); 的返回；它不是函数回调。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T01:57:46.333

这个怎么样？

```
<script type="text/javascript">

    // Init.
    $(function () {

        // Wire up the search box.
        $('#searchButton').click(function() {
            search($('#query').val(),
                $('aaa').val(),
                $('bbb').val()); }
            );
    });

</script> 
```

在点击事件上附加匿名函数，并调用`search($('#query').val(),$('aaa').val(),$('bbb').val());`函数。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-04T01:56:37.787

```
 $('#searchButton').live('click',function() {
        whatever...
    }); 
```

# ruby-on-rails - Rails：保存后验证关联？

> ID：14150027
> 
> 赞同：11
> 
> 时间：2013-01-04T01:52:15.987
> 
> 标签：ruby-on-rails, validation

我有一个`User`模型，其中有很多`roles`. 角色包含一个`user_id`字段，我想`validate_presence_of`

问题是：如果我在创建时为用户分配角色，则验证失败，因为没有设置 user_id。现在，我*确实*想验证 user_id 是否存在，但我需要在检查之前保存用户。

目前的代码如下所示：

```
@user = User.new(params[:user])
@user.roles << Role.new(:name => 'Peon') unless @user.has_roles?
if @user.save
  # ... 
```

我能想到的解决问题的唯一方法是禁用验证，我不想这样做，或者双重保存到数据库，这不是很有效。

处理这个问题的标准方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T02:33:25.823

经过一番研究，这个解决方案似乎是最简单的。首先，在您的`Role`模型中，而不是`user_id`validate ， validate `user`：

```
validates :user, :presence => true 
```

然后，在您的`User`模型中，添加`:inverse_of => :user`到您的`has_many`调用中：

```
has_many :roles, :inverse_of => :user 
```

然后它按预期工作：

```
irb(main):001:0> @user = User.new
=> #<User id: nil, created_at: nil, updated_at: nil>
irb(main):002:0> @user.roles << Role.new(:name => "blah")
=> [#<Role id: nil, user_id: nil, name: "blah", created_at: nil, updated_at: nil>]
irb(main):003:0> @user.roles[0].user
=> #<User id: nil, created_at: nil, updated_at: nil>
irb(main):004:0> @user.save
  (0.1ms)  begin transaction
 SQL (3.3ms)  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Jan 2013 02:29:33 UTC +00:00], ["updated_at", Fri, 04 Jan 2013 02:29:33 UTC +00:00]]
 User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
 SQL (0.2ms)  INSERT INTO "roles" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 04 Jan 2013 02:29:34 UTC +00:00], ["name", "blah"], ["updated_at", Fri, 04 Jan 2013 02:29:34 UTC +00:00], ["user_id", 3]]
  (1.9ms)  commit transaction
=> true
irb(main):005:0> @user.roles.first
=> #<Role id: 4, user_id: 3, name: "blah", created_at: "2013-01-04 02:29:34", updated_at: "2013-01-04 02:29:34"> 
```

但是请注意，这仍然会产生两个 SQL 事务，一个用于保存用户，一个用于保存角色。我不明白你怎么能避免这种情况。

另请参阅：[如何验证是否存在与 Rails 的关联？](https://stackoverflow.com/questions/1025292/how-can-you-validate-the-presence-of-a-belongs-to-association-with-rails)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T02:03:28.743

如果您将代码更改为如下所示，我认为您可以解决验证问题：

```
@user = User.new(params[:user])
@user.roles.new(:name => 'Peon') unless @user.has_roles?
if @user.save
  # ... 
```

如果这不起作用，您可以尝试将验证更改为：

```
class Role < ActiveRecord::Base
  belongs_to :user
  validates :user_id, :presence => true, :unless => Proc.new() {|r| r.user}
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T02:06:58.683

您必须查看[ActiveRecord 的 Callbacks](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。可能您会使用`before_validation`来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-05T19:32:26.020

对于任何在谷歌上搜索该问题的解决方案的人`has_many :through`，截至 2013 年 12 月 5 日，该`:inverse_of`选项不能与`:through`( [source](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many) ) 一起使用。相反，您可以使用@waldyr.ar 建议的方法。例如，如果我们的模型设置如下：

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :tasks, through: roles
end

class Role < ActiveRecord::Base  
  belongs_to :user  
  belongs_to :task  
end

class Task < ActiveRecord::Base
  has_many :roles
  has_many :users, through: roles
end 
```

我们可以如下修改我们的类，以在保存之前验证两者的`Role`存在`task``user`

```
class Role < ActiveRecord::Base  
  belongs_to :user  
  belongs_to :task  
  before_save { validates_presence_of :user, :task }
end 
```

现在，如果我们创建一个新的`User`并添加一对`tasks`这样的：

```
>> u = User.new  
>> 2.times { u.tasks << Task.new } 
```

运行`u.save`将保存`User`和`Task`，以及透明地构建和保存一个新`Role`的，其外键`user_id`和`task_id`已正确设置。验证将对所有模型进行，我们可以继续我们的快乐方式！

# cordova - 停止在不符合条件的国家/地区使用 PhoneGap 应用请求 iAd

> ID：14150036
> 
> 赞同：1
> 
> 时间：2013-01-04T01:53:04.333
> 
> 标签：cordova, phonegap-plugins, iad

我们使用这个插件在 PhoneGap 应用程序中提供 iAd：[https ://github.com/shazron/iAdPlugin](https://github.com/shazron/iAdPlugin)

iAd 仅适用于美国和英国等特定国家/地区。我们如何停止不符合条件的国家/地区的请求？

谢谢！

# javascript - Grunt (node) - 如何显示可用任务？

> ID：14150039
> 
> 赞同：22
> 
> 时间：2013-01-04T01:53:27.737
> 
> 标签：javascript, node.js, command-line-interface, gruntjs, jake

虽然习惯使用 Rakefile、Cakefile 和 Jakefile，但它们都有一些方便的方法来列出可用任务。

喜欢

```
jake -T 

jake db:dump      # Dump the database  
jake db:load      # Populate the database 
```

..ETC。

甚至过滤“jake -T dum”，只显示“jake db:dump”任务。

那么，有没有办法使用 grunt 来做同样的事情？我正在考虑创建一个默认任务来迭代整个 grunt 配置对象并通过 console.log 将其写入标准输出，但是有人知道更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-23T10:55:55.057

grunt --help 根据以下[答案](https://stackoverflow.com/questions/15004624/list-grunt-js-tasks)列出可用任务。

示例输出

```
.....

Available tasks
             clean  Clean files and folders. *                                
              jade  Compile jade templates. *                                 
        web_server  A Web Server similar to Python's SimpleHTTPServer, with   
                 Cross-Origin Resource Sharing and No-Cache options. * 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T17:14:20.063

据我所知，显示可用任务的唯一方法（显然没有黑客）是使用`-h`or`--help`选项。

正如您在[grunt-cli 源代码](https://github.com/gruntjs/grunt-cli/blob/master/lib/cli.js)中看到的那样，它们显然只关心`-h`(help)、`-V`(version) 和`-v`(verbose) 选项。

因此，我认为目前您必须创建自己的自定义任务才能实现目标。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-26T22:41:04.413

有一个更好的方法！我目前正在开发一个单独的插件[grunt-available-tasks](https://github.com/ben-eb/grunt-available-tasks)来实现此功能。将其添加到您的项目中：

```
npm install grunt-available-tasks --save-dev 
```

然后运行`grunt availabletasks`以获取您的任务列表。您可能希望使用别名`tasks`来节省一些输入：

```
grunt.registerTask('tasks', ['availabletasks']); 
```

然后，通过一些配置，您可以获得如下列表：

```
$ grunt tasks
Running "availabletasks" task

Deployment Tasks
doc                => Build the documentation.
production         => Build a complete distribution for production; stricter linting and a full browser test.

Development Tasks
default            => Build a development distribution.
watch               > Run predefined tasks whenever watched files change.

Done, without errors. 
```

您可以使用 Gruntfile 中的配置对象过滤、分组和排序任务。自述文件中提供了完整[的选项列表。](https://github.com/ben-eb/grunt-available-tasks#options)

# task - TBB 需要 condition_variable 用于任务同步

> ID：14150050
> 
> 赞同：1
> 
> 时间：2013-01-04T01:54:34.983
> 
> 标签：task, tbb, condition-variable

我正在将 tbb 用于某些项目，并且我被迫使用 tbb 任务。

我的程序有 N 个任务，它们是交互的。

伪代码如下：

```
class Task;

Task* t[N];

class Task {
    startTask(Task &t) {
        t.notify();
    }
    execute() {
        while(!end){
            if(some condition 1)
                wait();

            for(i = 0; i < N; ++i)
                if(some condition 2)
                    startTask(*t[i]);

            if(some condition 3)
                end = true;
        }
    }
}; 
```

**N >> 核心**

如果我为此作业使用 condition_variable，则线程停止并且线程停止所有任务。有什么方法可以用来完成我的工作吗？

我试图使用回收，但只有 CORE_NUMBER 任务在工作，其他 N-CORE_NUMBER 任务永远不会开始执行。

此致，

戈兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T23:12:07.650

（免责声明：我为英特尔工作并使用英特尔® 线程构建模块）

是的，TBB 任务是非抢占式的，它们被安排到固定数量的工作线程上。因此，如果您在所有工作线程上都有任务并且所有这些任务都在等待，那么您将死锁。由于所有工作线程都忙于执行（阻塞）任务，因此无法安排其他任务来唤醒其他任务。

我能想到的几点：

1.  您能否重新构建您的应用程序，以便仅在满足其等待条件时才生成任务？您的伪代码似乎表明您生成了任务，然后它检查它是否可以继续。您可以仅在任务能够完成时安排任务，而不是阻塞任务吗？
2.  如果您知道允许执行任务的顺序，您可以创建任务图（[​​http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/hh_goto.htm#tbb_userguide/ General_Acyclic_Graphs_of_Tasks.htm](http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/hh_goto.htm#tbb_userguide/General_Acyclic_Graphs_of_Tasks.htm)）。
3.  您可以使用流程图在 TBB 中实现流式处理和反应式应用程序。是否可以将其实现为流程图？（[http://www.drdobbs.com/tools/the-intel-threading-building-blocks-flow/231900177](http://www.drdobbs.com/tools/the-intel-threading-building-blocks-flow/231900177)）

您能否提供有关条件的更多详细信息？你的伪代码很抽象，所以我的建议可能有点离题……</p>

# asp.net - LINQ to Entities 不支持 LINQ 表达式节点类型“ArrayIndex”。

> ID：14150053
> 
> 赞同：-1
> 
> 时间：2013-01-04T01:55:01.300
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我的 asp.net mvc 应用程序中有以下代码：-

```
 var result = from userContactInfo in entities.AaaUserContactInfoes
                 join contactInfo in entities.AaaContactInfoes on userContactInfo.CONTACTINFO_ID equals contactInfo.CONTACTINFO_ID

                                          where organizationNames.Any(orgName => contactInfo.EMAILID.Split('@')[1].Split('.')[0].Contains(orgName))
                 select userContactInfo; 
```

但我收到以下错误：-

```
The LINQ expression node type 'ArrayIndex' is not supported in LINQ to Entities. 
```

那么可能导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:22:36.647

如评论中所述，构造 EF 查询时不能使用数组。为了解决这个问题，我建议在你的 where 子句中尝试以下技巧：

```
where organizationNames.Any(orgName => contactInfo.EMAILID.Contains("@" + orgName + ".")) 
```

# uitableview - 计算分组的表格视图单元格的宽度

> ID：14150059
> 
> 赞同：1
> 
> 时间：2013-01-04T01:55:38.570
> 
> 标签：uitableview, uilabel

**当单元格是分组**表格单元格时，我试图将两个`UILabel`放在 a 内的同一垂直轴上`UITableViewCell`，并让它们占据单元格宽度的 50% 。

 **我试过`self.frame.size.width / 2`了，但是`self.frame.size.width`看起来像整个单元格的宽度的宽度就好像它不是一个分组的单元格一样。换句话说，它似乎是整个屏幕的宽度，在一个全屏表格中。

我也比较`self.frame.size.width`了`self.contentView.frame.size.width`，两者看起来都是一样的，并不是分组单元格的实际宽度，我不相信。

当我`UILabel`用指定的框架初始化 ，并将**x 轴**指定为 as`0`时，标签确实将自己放置在分组单元格的左边缘，这很棒！这就是我想要的。

但是，对于`UILabel`我希望位于第一个标签右侧的第二个，在同一水平轴上，我不知道如何计算标签框架的 x 轴从哪里开始。

同样，我不知道如何计算这两个标签的宽度，因为我似乎无法获得分组单元格的宽度。

我觉得必须有一种方法来获得确切的宽度，因为对于第一个标签，给标签的框架一个 0 的 x 轴将它放在单元格的边缘，这正是我需要的。所以我需要像内部一样，这个代码也知道那个单元格的宽度，在某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:57:38.900

好的，我想出了一个很好的方法来实现这一点。如果您正在子类`UITableViewCell`化并想要调整单元格的子视图，那么您需要在`layoutSubviews:`方法内部执行这些计算和框架调整。在此方法中，单元格的`contentView`宽度将是预期的宽度，即使在使用分组单元格时也是如此。下面是我的`layoutSubviews`功能的样子......

```
- (void)layoutSubviews {

    [super layoutSubviews];

    // half of the cell's content view width
    CGFloat halfCellWidth = self.contentView.frame.size.width / 2;

    // the dimensions of the message label, primarily for the height
    CGSize mesageLabelDimensions = [_message.text sizeWithFont:[UIFont systemFontOfSize:12]
                                             constrainedToSize:CGSizeMake(self.contentView.frame.size.width - (LEFT_RIGHT_MARGIN * 2), 500.0)];

    // adjust the frames of the cell labels
    _source.frame = CGRectMake(LEFT_RIGHT_MARGIN, TOP_BOTTOM_MARGIN, halfCellWidth - LEFT_RIGHT_MARGIN, LABEL_LINE_HEIGHT);
    _timestamp.frame = CGRectMake(halfCellWidth, TOP_BOTTOM_MARGIN, halfCellWidth - LEFT_RIGHT_MARGIN, LABEL_LINE_HEIGHT);
    _message.frame = CGRectMake(LEFT_RIGHT_MARGIN, LABEL_LINE_HEIGHT + (TOP_BOTTOM_MARGIN * 2), mesageLabelDimensions.width, mesageLabelDimensions.height);

} 
```**

# c# - 使按钮元素提交

> ID：14150060
> 
> 赞同：0
> 
> 时间：2013-01-04T01:55:41.650
> 
> 标签：c#, jquery, asp.net

使用 ASP.NET，我如何让这个按钮标签在点击时提交我的 ASP.NET 表单：

```
<button>Submit</button> 
```

我希望它能够像普通的 asp.net 服务器控制按钮一样进行回发。如果可能的话，我更喜欢 jquery 的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T01:58:51.473

```
$('button').on('click', function(){
    $(this).closest('form').submit(); 
}); 
```

单击按钮时，它将找到最接近的表单（将是父表单）并通过将表单传递到`action`您可以通过定义的方法访问值的位置来提交它；要么`get`要么`post`。

我想这就是你要问的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T01:59:22.540

您可以使用：

```
<input type="Submit" /> 
```

或者使用 jQuery，您可以使用：

```
$(function() {
    $('button').on('click', function() {
        $('form').submit();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:05:52.087

当您有链接、div 或其他无法回发的元素时，您会使用 javascript。

在您的情况下，`<button>Submit</button>`在 html5 中呈现一个提交按钮，如果您单击它，您只需提交表单以及您需要的所有内容。

额外的 asp.net 控件具有更多功能并与后面的代码进行通信，但是对于表单的提交，任何提交按钮都可以，经典`<input type="submit" value="Submit">`可以按您的要求执行。

# c++ - cin.getline 不适用于二维数组

> ID：14150061
> 
> 赞同：2
> 
> 时间：2013-01-04T01:55:42.310
> 
> 标签：c++

我正在尝试从文本文件中读取一个句子并将其存储在二维数组中。我正在使用函数 cin.getline。我正在尝试将文本文件的每个句子存储到二维数组的一行。读取是我的 ifstream 对象。下面是我的代码示例

```
for (int i = 0; i < 7; i++)
{
    int k=0;
    read.getline(people.wishlist[i][k], MAX); // store in row 0 when i is 0
}

// what my text file looks like: 

// Hey how is your day
// whats up 
```

我收到的错误消息：

> `error C2664: 'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::getline(_Elem *,std::streamsize)':`
> `cannot convert parameter 1 from 'char' to 'char *'`

有人可以为我提出一个解决这个问题的好方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:01:33.507

问题是在 2D char 数组`people.wishlist[i][k]`上代表单个`char`（`i`第行和`k`第列），但`getline`需要它们的字符串`char*`。

您需要一个指向一维 char 数组的指针，您可以只索引一个其他维度。(with `i`) 你可以这样尝试：

```
read.getline(people.wishlist[i], MAX); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:01:57.073

正如错误所说，您正在传递 a`char`它期望 a 的地方`char*`。具体来说，当您想要将指针传递给数组的开头时，您正在传递数组的第一个元素。

正如@Nick 建议的那样，试试这个

```
read.getline(people.wishlist[i], MAX); 
```

# c - 通过引用发送指向指针的指针

> ID：14150063
> 
> 赞同：3
> 
> 时间：2013-01-04T01:56:02.780
> 
> 标签：c

我一直在尝试通过引用将指向指针的指针（我们可以将其称为字符串数组或字符数组的数组）发送给函数，因为我需要更新它。我不想让函数将指针返回到指针（我正在工作的那个），因为我希望返回是数组的大小。

这是我为测试目的创建的一个工作函数，它返回指向指针的指针，以及调用方法：

```
#include <stdio.h>

char **populate_items() {
        char **items;
        int i;
        items = (char **) malloc(sizeof(char*) * 3);
        for (i=0; i<3; i++)
                *(items+i) = (char *) malloc(sizeof(char) * 10);
        items[0] = "1234567890";
        items[1] = "2345678901";
        items[2] = "3456789012";
        return items;
}

int main(int argv, char *argc) {
        char **items;
        int i;
        items = populate_items();
        for(i=0; i<3; i++)
                printf("%s\n", items[i]);
        return 0;
} 
```

这就是我认为函数和获取指向指针作为引用的函数的调用应该看起来像，但是在尝试打印 items[1] 或 items[2] 时出现分段错误

```
#include <stdio.h>

populate_items(char ***items) {
        int i;
        *items = (char **) malloc(sizeof(char*) * 3);
        for (i=0; i<3; i++)
                *(items+i) = (char *) malloc(sizeof(char) * 10);
        *items[0] = "1234567890";
        *items[1] = "2345678901";
        *items[2] = "3456789012";
}

int main(int argv, char *argc) {
        char **items;
        int i;
        populate_items(&items);
        for(i=0; i<3; i++)
                printf("%s\n", items[i]);
        return 0;
} 
```

在我脑海中创建的抽象中，该函数应该没问题，但当然不是因为我遇到了分段错误。我已经设法理解指向指针的指针如何工作得很好，但我认为我很难理解指向指针概念指针的指针如何转换为代码。

那么我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:59:04.190

您忘记了取消引用并获得了`*`vs.`[]`错误的优先级：

```
populate_items(char ***items) {
        int i;
        *items = (char **) malloc(sizeof(char*) * 3);
        for (i=0; i<3; i++)
                *(*items+i) = (char *) malloc(sizeof(char) * 10);
        (*items)[0] = "1234567890";
        (*items)[1] = "2345678901";
        (*items)[2] = "3456789012";
} 
```

但请注意，作业

```
(*items)[0] = "1234567890"; 
```

等失去刚刚分配的内存的唯一句柄。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T09:23:26.983

你可以使用如下

```
 #include "stdafx.h"
 #include <stdlib.h>
 #include <stdio.h>

 char*** populate_items(char ***items) 
 {
      int i;
      items = (char ***) malloc(sizeof(char*) * 3);
      for (i=0; i<3; i++)
            *(items + i) = (char **) malloc(sizeof(char) * 10);
      **(items + 0) = "1234567890";
      **(items + 1) = "2345678901";
      **(items + 2) = "3456789012";
      return items;
 }

 int main(int argv, char *argc) 
 {
      char **items;
      int i;
      char *** res = populate_items(&items);
      for(i=0; i<3; i++)
            printf("%s\n", **(res + i));
      return 0;
 } 
```

# asp.net-mvc - MVCScaffolding，实体框架模型优先，多对多脚手架

> ID：14150065
> 
> 赞同：1
> 
> 时间：2013-01-04T01:56:08.500
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-scaffolding

我首先使用实体​​框架模型。我的模型中有 2 个实体..

1.  用户
2.  角色

我想为这种关系使用 MVC 脚手架（使用 VS 2012 或 2010）。

从 20111 的一些帖子中，不支持多对多。它仍然不支持吗？如果支持 nto，是否有任何解决方法？

我无法更改模型（因为将从它生成数据库）但是我主要期待创建用户、创建角色和为用户分配角色。如果一些使用一对多的解决方法可以给我上面的脚手架视图和控制器，我会同意的。

谢谢那智

# objective-c - 如何在Objective C中用另一个子字符串替换一个子字符串？

> ID：14150066
> 
> 赞同：1
> 
> 时间：2013-01-04T01:56:09.670
> 
> 标签：objective-c, nsstring, substring

我想`NSString`用 Objective C 中的另一个子字符串 替换一个子字符串。

我知道如何找到要替换的子字符串：

```
 NSRange range = [string rangeOfString:substringIWantToReplace];
        NSString *substring = [string substringFromIndex:NSMaxRange(range)]; 
```

但是当谈到实际删除/更换它时，我有点困惑。我是否遵循[Replace substring with another substring C++](https://stackoverflow.com/questions/4643512/replace-substring-with-another-substring-c)中的 C++ 方法？或者[如何替换 c 中的子字符串的 C 方法？](https://stackoverflow.com/questions/3659694/how-to-replace-substring-in-c)? Objective-C有一个相关问题[： Substring and replace](https://stackoverflow.com/questions/8214193/objective-c-substring-and-replace)，但有问题的字符串是一个 URL，所以我认为我不能使用答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T01:59:18.420

我认为您的答案在这里[替换出现的 NSString - iPhone](https://stackoverflow.com/questions/2492236/replace-occurences-of-nsstring-iphone)： `[response stringByReplacingOccurrencesOfString:@"aaa" withString:@"bbb"];`也适用于任何字符串和 URL。

如果您担心 url 的百分比符号并且您想确保它会被正确替换，您可以首先解码字符串，替换，然后编码：

```
// decode
NSString *path = [[@"path+with+spaces"
    stringByReplacingOccurrencesOfString:@"+" withString:@" "]
    stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
// replace
path = [path stringByReplacingOccurrencesOfString:@"aaa" withString:@"bbb"]
// encode
path = CFURLCreateStringByAddingPercentEscapes(
                                               NULL,
                                               (CFStringRef)path,
                                               NULL,
                                               (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
                                               kCFStringEncodingUTF8 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T02:03:35.660

这就是我检查子字符串并从 NSString 中替换/删除子字符串的方式：

```
if([titleName rangeOfString:@"&quot;"].location != NSNotFound) {
     titleName = [titleName stringByReplacingOccurrencesOfString:@"&quot;" withString:@"\""];
} 
```

# postgresql - CakePHP 分页器区分大小写

> ID：14150067
> 
> 赞同：4
> 
> 时间：2013-01-04T01:56:13.903
> 
> 标签：postgresql, cakephp, pagination

当尝试使用 CakePHP Paginator 对数据进行排序时，它会返回区分大小写的排序结果。我尝试在订单查询中指定的字段周围添加 UPPER，但这似乎不起作用。我正在使用带有 PostgreSQL 数据库的 CakePHP 2.0.3。我的 $paginate 变量和调用它的代码是：

```
var $paginate = array(
    'limit' => 25,
    'order' => array(
        'User.first_name' => 'asc'
    )
);
..

(In my view function)
    $users = $this->paginate('User'); 
```

如何强制 CakePHP 返回不区分大小写的排序结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:07:03.070

很遗憾你不能使用这样的东西：

```
 'UPPER(User.first_name)' => 'ASC' 
```

这将是相当基本的。

我在一个项目中遇到了这个问题，我用这样的东西替换了“订单”数组：

```
'order' = "UPPER(first_name) ASC" 
```

这成功地给了我正确的输出。

然而不幸的是，单击列标题字段对我的分页表进行排序然后复制了这个问题，我的名字再次区分大小写。

我想出的解决方案是修改 cakephp 本身的 PaginatorComponent，这样我的排序顺序总是正确的。

在 PaginatorComponent (/lib/Cake/Controller/Component/PaginatorComponent.php) 中，我修改了 validateSort 函数，替换了以下行：

```
$options['order'] = $order; 
```

使用以下四行：

```
foreach($order as $order_field=>$order_direction){
    $neworder['UPPER('.$order_field.')'] = $order_direction;
}
$options['order'] = $neworder; 
```

这并不优雅，本质上只是在字段名称周围强制使用 'UPPER()'。

这适用于我的特殊情况，即我需要始终进行不区分大小写的查询。

# python - 使用 pymongo 插入嵌套字段时清理用户输入

> ID：14150077
> 
> 赞同：1
> 
> 时间：2013-01-04T01:57:41.940
> 
> 标签：python, mongodb, pymongo

我有一个充满了结构的集合，如下所示：

```
{
  "_id": {
      "$oid": "xxxxxxxxxxxxxxxxxx"
   },
  "sections": {
      "Some Cool Section" : {
        "sources" : ["source1", "source2", "source3"]
      }
      "An Awesome Section" : {
        "sources" : ["source1", "source2", "source3"]
      }
   },
  "username": "boatzart"
} 
```

我需要允许用户任意添加新的“部分”，所以使用 pymongo 我可以添加如下部分：

```
userid = bson.ObjectId('xxxxxxxxxxxxxxxxxx')
sectionname = getUnsafeUserInput()
mongo.db.userprofiles.update({'_id' : userid},
  { '$set' : { 'sections.'+sectionname: { 'sources': []} } }
    ) 
```

因为 sectionname 来自不安全的用户输入，一些恶意用户可以通过在他们的 section name 中添加句点之类的东西来真正搞砸数据库。我可以轻松地清除非字母数字字符，但我觉得应该有更好的方法来做到这一点。

有没有更好的方法将嵌套字段插入到不需要我清理内容的现有文档中？

如果不是，那么我应该认为哪些字符不安全？所有非字母数字？只有时期？句号和美元符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:56:06.033

如果您可以重新设计架构，那么将这些用户定义的部分名称视为值而不是键应该更干净：

```
{
  "_id": {
      "$oid": "xxxxxxxxxxxxxxxxxx"
  },
  "sections": [{
        "name": "Some Cool Section",
        "sources" : ["source1", "source2", "source3"]
      }, {
        "name": "An Awesome Section",
        "sources" : ["source1", "source2", "source3"]
      }
  ],
  "username": "boatzart"
} 
```

使用动态键名很少是一个好主意，因为它会使查询和更新变得混乱。

# javascript - 强制jQuery在fadeIn()之前识别某些属性

> ID：14150079
> 
> 赞同：1
> 
> 时间：2013-01-04T01:57:47.957
> 
> 标签：javascript, jquery, css, fadein

我有一堆`<div class="circle">...</div>`我计划在它们淡入时将它们动画化到它们的最终位置，就好像它们是粒子效果一样。

在我的 javascript 中，我有以下内容：

```
$(document).ready(function(){

allCircles = $(".circle");

for (var i = 0; i < allCircles.length; i++) {
    console.log('hello: ' + allCircles[i].offsetTop + ' , ' + allCircles[i].offsetLeft);
}

allThings = $("*");
allThings.fadeIn(2500);

for (var i = 0; i < allCircles.length; i++) {
    console.log('hello: ' + allCircles[i].offsetTop + ' , ' + allCircles[i].offsetLeft); 
```

offsetTop 和 offsetLeft（在 css 文件中定义）是它们的最终位置。在 for 循环中，我注意到在 fadeIn 之前，offsetTop 和 offsetLeft 属性都为零。只有在fadeIn 事件被触发后，css 偏移属性才会生效。为什么 jQuery 会在动画淡入之前将所有内容归零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:00:48.063

如果您的圈子`display: none`在它们淡入之前就在您的 CSS 中，那么您将不会获得任何位置偏移。我会建议做`opacity: 0`和使用`.animate({opacity: 1})`。

# java - 受保护和包访问

> ID：14150097
> 
> 赞同：0
> 
> 时间：2013-01-04T02:00:35.557
> 
> 标签：java, package

我试图理解受保护和打包访问的想法，我已经在编译器上尝试过它们，但它一直告诉我有问题

```
public class example{

    int s = example2.v;

    public static void main(String args[]){

    }
} 

public class example2 {

    int v = 0 ;

} 
```

谁能帮我这个？为什么它说：

> 不能从静态上下文引用非静态变量 v。

变量's'不是静态的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T02:04:11.647

您试图以静态方式引用 v ，这就是问题所在。每当您这样做时`ClassName.fieldName`，就意味着您正在以静态方式访问资源。你首先必须实例化类然后做`myReferenceVariable.fieldName`

```
public class example{
    example2 myExample = new example2();
    int s = myExample.v; 
```

这应该有效。

还要记住 Java 命名约定的类名以大写字母开头。不是编译的问题，而是可读性的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:06:46.483

不，`s`绝对不是静态的。但两者都不是`v`。这就是你的编译器告诉你的。

由于变量确实是包作用域，所以可以实例化一个新`example2`类，直接调用。

```
new example2().v; 
```

通常，您将来会希望使用 getter 和 setter。这允许封装和信息隐藏，因为该变量`v`是完全开放的，可以被该包中的任何其他类修改。

# wcf - Azure：在 webrole 和 Web 服务之间共享对象实例

> ID：14150103
> 
> 赞同：0
> 
> 时间：2013-01-04T02:01:20.667
> 
> 标签：wcf, azure, azure-web-roles

我有一个 Azure Webrole，它有一个 MVC 应用程序和一个 WCF 服务。在 webrole 的“OnStart”方法中，我实例化了一个表示 IOC Container 的静态变量。

之后，当我进行外部服务调用并尝试获取容器时，变量为空......

我是否遗漏了某些内容，或者为什么该服务无法使用静态？

如果重要的话，我正在运行 Azure SDK 1.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:48:34.490

我想我知道你的意思。在 WebRole.cs 类中初始化 IOC 容器，然后尝试在 WCF 服务或托管在**同一**Web 角色**实例**中的 MVC 应用程序中使用它。

好吧，那是不可能的。您必须知道，在 WebRole.cs 中运行的代码与您的实际 Web 应用程序（w3wp.exe 中的 MVC 网站/WCF 服务）在不同的进程（WaIISHost.exe）中运行：

![在此处输入图像描述](../Images/3b2a15510327ff1e1e597ffa6aadb945.png)

这在[这里](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)详细解释。

如果您想为您的 Web 应用程序初始化 IOC 容器，您应该在 Global.asax 文件中执行此操作。如果您还想在 WebRole.cs 中使用 IOC 容器（在 Web 应用程序启动之前做一些工作），您还需要在 WebRole.cs 文件中对其进行初始化（因为这是 2 个不同的进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:14:38.710

如果您的 WebRole 有两个站点/角色，一个用于 MVC 应用程序，一个用于 WCF 服务（检查您的配置），那么您正在同一个 WebRole（云服务 VM）中运行两个独立的应用程序，每个应用程序具有不同的端点。您不能跨应用程序共享静态资源。您还需要在 WCF 服务中实例化一个实例。

# android - Android 蓝牙快速设备发现

> ID：14150112
> 
> 赞同：2
> 
> 时间：2013-01-04T02:03:07.850
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在开发一个蓝牙 4.0 低功耗应用程序来快速扫描周围的仅广告设备（每秒 10 次或更多）并通过 RSSI 获取他们的地址。根据[Android 蓝牙 API](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#startDiscovery%28%29)，发现是异步的，大约需要 12 秒。有没有办法设置这个时间？或者是否可以使用 HCI 或蓝牙堆栈直接与设备通信？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:17:36.830

您说的是蓝牙经典 API，而不是低能耗 API。之所以这么慢，是因为经典的蓝牙堆栈没有快速的广告间隔，并且没有这么快的扫描时间。

由于低功耗蓝牙并未正式包含在 Android SDK 中，因此无法设置时间或扫描低功耗蓝牙设备。您可以尝试使用 Boardcom BLE API，但据我所知，它处于 alpha 阶段，目前只有少数手机可以使用它。

# objective-c - 将简单视图从 xib 转移到情节提要

> ID：14150115
> 
> 赞同：1
> 
> 时间：2013-01-04T02:03:13.417
> 
> 标签：objective-c, ios, ios6, storyboard, core-plot

我正在使用此链接[http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/](http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/)中的代码，它有一个带有 2 个视图的 xib 文件： View 和 Graphview 。

我试图让它在故事板上工作，但它崩溃了。我不知道如何解决它。
我创建了一个故事板文件并添加了一个视图控制器并将尝试更改类更改为 viewController/UIviewController 。
我已经尝试了这两个选项都不起作用，因为 Graphview 我尝试将类更改为 graphview 并从 appDelegate 中删除所有数据，不包括**return YES**。

我将目标中的主故事板更改为我创建的故事板仍然无法正常工作。

我想在这个特定示例中添加导航栏，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T05:25:36.080

你的错误信息...

```
Terminating app due to uncaught exception'NSInvalidUnarchiveOperationException', 
reason: 'Could not instantiate class named NSLayoutConstraint' 
```

...建议您启用了自动布局。它用约束代替了“弹簧和支柱”。这是一个新的 ios6 功能，在较低版本上不存在，但在您创建新项目时会自动启用。您需要禁用它，否则您将在低于 ios6 的任何设备上遇到这些崩溃。转到有问题的情节提要，选择文件检查器（右侧面板之一），您将看到一个“自动布局”复选框。取消勾选。

# .htaccess - 如果用户在浏览器上输入 .php，则删除 URL 中的 .php

> ID：14150121
> 
> 赞同：1
> 
> 时间：2013-01-04T02:04:03.007
> 
> 标签：.htaccess, mod-rewrite

我已经通过配置我的 .htaccess 文件成功删除了 .php 文件扩展名，我的问题是当用户在 URL 上键入 .php 时，我希望用户被重定向，以防他们在 URL 上键入 .php。例如，我的原始网址是

```
http://mysite.com/home 
```

有时，用户会这样输入 `http://mysite.com/home.php`，所以在这种情况下，我想将它们重定向到没有 .php 的 url，所以应该是`http://mysite.com/home`

另一个例子是如果一个 URL 有一个参数，例如：

```
http://mysite.com/home.php?id=1&uid=100 
```

我希望将用户重定向到`http://mysite.com/home?id=1&uid=100`

任何想法如何做到这一点？您的帮助将不胜感激和奖励！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:08:17.180

您需要匹配实际请求而不是 URI，因为您的其他规则正在重写 URI。所以是这样的：

```
RewriteCond %{THE_REQUEST} \ /(.+)\.php(\?|\ |$)
RewriteRule ^ /%1 [L,R=301] 
```

因此，如果有人键入：`http://mysite.com/some/path/home.php`，浏览器将被重定向（从而更改地址栏中的 URL）为`http://mysite.com/some/path/home`.

如果您只想对文档根目录中的 php 文件执行此操作（例如`/home.php`，而**不是** `/some/path/to/home.php`），请调整正则表达式：

```
RewriteCond %{THE_REQUEST} \ /([^/]+)\.php(\?|\ |$)
RewriteRule ^ /%1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:06:39.520

使用`.htaccess`. 这是我目前在我的网站上使用的一些代码，它们替换`/page.php`为`/page/`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]
RewriteRule ^(.*)\/$ $1.php [NC] 
```

把它放在一个名为的文件中`.htaccess`- 没有名称，在这种情况下，“扩展名”就是文件本身。保存并上传到您的`public_html`文件夹中的服务器。或者无论您的基本/公共目录是什么。

此代码中的最后一行对您有帮助，它会将任何以 file 结尾的`.php`文件替换为以 a结尾的文件`/`，如上所述。第 2 行和第 3 行转发`http://domain.com`到`http://www.domain.com`. 我不了解你，但我认为这样看起来更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:12:08.143

在文件顶部尝试这样的操作：

```
if (strpos($_SERVER['REQUEST_URI'],'.php')!==false){
$good_path = str_replace($_SERVER['REQUEST_URI'],'.php','');
header('Location: '.$good_path);
} 
```

最好使用正则表达式来检查扩展名，但这是一个快速示例，仅用于帮助您入门。

# openssl - 如何在 OpenSSL 中获取 HMAC 密钥

> ID：14150124
> 
> 赞同：3
> 
> 时间：2013-01-04T02:04:41.467
> 
> 标签：openssl, aes, sha1, hmac

我正在使用 OpenSSL，我想从会话中提取我的 HMAC 密钥和 AES 密钥，以便我可以在应用程序中使用 GPU 加速 HMAC 和 AES 加密。

之后在哪里可以拿到钥匙`SSL_accept`？AES 密钥是否存储在`SSLHandle->enc_write_ctx->cipher_data`? HMAC 密钥存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T09:05:34.693

If you have the `SSL*` called `ssl`, then look at `ssl->session` for the master key and `ssl->s3` for the current hamc key.

`ssl.h` has a `struct ssl_session_st`, and that's the `ssl->session` above. The master key is stored in `struct ssl_session_st`.

```
struct ssl_session_st
{
  int ssl_version;   /* what ssl version session info is
                      * being kept in here? */

  /* only really used in SSLv2 */
  unsigned int key_arg_length;
  unsigned char key_arg[SSL_MAX_KEY_ARG_LENGTH];
  int master_key_length;
  unsigned char master_key[SSL_MAX_MASTER_KEY_LENGTH];
  ...
} 
```

Some derivation goes on, and you can see it in, for example, `s3_clnt.c`. SSL2 uses two session keys - one in each direction (client to server; and server to client). The key is used for both privacy and integrity protection. SSLv3 and above uses 6 keys - three in each direction (client to server; and server to client). One key is used for privacy, the second is used for integrity, and the third is used as a nonce or iv.

To see what the HMAC key is, take a look at, for example, `n_ssl3_mac` in `s3_enc.c` around line 700\. You will see something like:

```
int n_ssl3_mac(SSL *ssl, unsigned char *md, int send)
{
  SSL3_RECORD *rec;
  unsigned char *mac_sec,*seq;
  EVP_MD_CTX md_ctx;
  ...

  if (send)
  {
    rec= &(ssl->s3->wrec);
    mac_sec= &(ssl->s3->write_mac_secret[0]);
    seq= &(ssl->s3->write_sequence[0]);
    hash=ssl->write_hash;
  }
  else
  {
    rec= &(ssl->s3->rrec);
    mac_sec= &(ssl->s3->read_mac_secret[0]);
    seq= &(ssl->s3->read_sequence[0]);
    hash=ssl->read_hash;
  }
  ... 
```

TLS also uses the `ssl->s3` member. For example, from `t1_enc.c` around line 445:

```
mac_secret= &(s->s3->write_mac_secret[0]);
mac_secret_size = &(s->s3->write_mac_secret_size); 
```

You might also be able to get a good look at the data in the `SSL*` object with `SSL_SESSION_print` using a `BIO` or `SSL_SESSION_print_fp`.

# jquery - 嵌套 div 的 Mouseenter/mouseleave 导致 Ffox 行为不端

> ID：14150131
> 
> 赞同：1
> 
> 时间：2013-01-04T02:06:27.817
> 
> 标签：jquery, html, nested, mouseenter, mouseleave

> **可能重复：**
> [嵌套 div 奇怪的 mouseenter/mouseleave 行为](https://stackoverflow.com/questions/14148820/nested-div-weird-mouseenter-mouseleave-behavior)

对于[这个JSfiddle](http://jsfiddle.net/XrKbk/12/)，我们希望当鼠标从粉红色的innerDiv下方进入并且没有进入绿色的outerDiv而离开时，不触发绿色的outerDiv的mouseenter事件。

Chrome 和 Opera 会出现预期的行为，但 Ffox 不会。

下面遵循每个浏览器的 jsfiddle 代码的控制台输出。

Chrome/Opera 输出（正确）：

```
pink innerDiv mouseenter

pink innerDiv mouseleave 
```

福克斯输出：

```
pink innerDiv mouseenter

pink innerDiv mouseleave

left pink innerDiv but through green outerDiv

green outerDiv mouseenter 
```

知道 Ffox 行为不端的原因以及如何对其进行编码以使 Ffox 正确处理吗？

JSFiddle 代码：

HTML：

```
<div class="outerDiv">
    Outer div text
    <div class="innerDiv">
        Inner div text
    </div>
</div> 
```

​ CSS：

```
div.outerDiv {
       position: relative;
       height: 110px;
       cursor: auto;
       padding-top: 0;
       background-color: #00A300 !important;
       box-shadow: 0 0 1px #FFFFCC inset;
       color: #FFFFFF;
       display: block;
       float: left;
       font-family: 'Segoe UI Semilight','Open Sans',Verdana,Arial,Helvetica,sans-serif;
       font-size: 11pt;
       font-weight: 300;
       letter-spacing: 0.02em;
       line-height: 20px;
       margin: 0 10px 10px 0;
       overflow: hidden;
       text-decoration: none;
       width: 150px;
   }

   div.innerDiv{ position:absolute; 
       width: 100%; 
       bottom: 0;
    background-color: magenta;
   }​ 
```

Javascript：

```
$('div.outerDiv').on('mouseenter', function(){ console.log('green outerDiv mouseenter'); });

$('div.outerDiv').on('mouseleave', function(){ console.log('green outerDiv mouseeleave');     });

$('div.innerDiv').on('mouseenter', function(){ console.log('pink innerDiv mouseenter');     return false; });

$('div.innerDiv').on('mouseleave', function(){ 
    console.log('pink innerDiv mouseleave'); 
    if($('div.outerDiv').is(':hover')){
         console.log('left pink innerDiv but through green outerDiv');
        $('div.outerDiv').trigger('mouseenter');
    }
    return false;
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:37:23.703

Based on your HTML element structure, the pink div is actually covering the bottom part of the green div. Hence when the mouse enter pink div from the bottom, you cannot pretend it did not enter the green div. It did!

从 DOM 的角度来看，您不能仅仅假设绿色 div 的大小仅与您的肉眼可见的一样大，它还涵盖了粉红色 div 所覆盖的区域。

在堆叠元素的情况下，HTML 规范将事件处理程序分为两个阶段：事件捕获和冒泡。首先触发哪个元素的处理程序的顺序取决于事件注册的阶段。我建议您重新组织您的 HTML 元素，使它们不会重叠，和/或花一些时间来学习 javascript 事件冒泡：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# c++ - 为什么编译器不能为这个函数引用找出正确的重载？

> ID：14150134
> 
> 赞同：2
> 
> 时间：2013-01-04T02:06:52.827
> 
> 标签：c++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:12:10.720

According to the C++ standard, 13.2.1

> Two function declarations of the same name refer to the same function if they are in the same scope and have equivalent parameter declarations.

This means that only the name and parameter types are considered; return type is not.

This makes sense, because you can invoke a function with a return value, and disregard its return value. If language designers allowed overloads on the return type, compilers would not be able to resolve these overloads in some legitimate contexts.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T02:10:48.210

You can't overload by return type because:

```
int main() {
   f();  // call to void f
   f();  // call to int returning one
   f();  // call to void
   return 0;
} 
```

Are all ambiguous.

```
float f() { return 0.0f; }
char  f() { return 'a';  }
int   i = f(); 
```

is also ambiguous.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:08:04.887

You can't overload by return type; only by parameters.

# c++ - 将双精度值舍入到（有点）较低精度的好方法是什么？

> ID：14150136
> 
> 赞同：7
> 
> 时间：2013-01-04T02:07:01.887
> 
> 标签：c++, rounding, floating-point-precision

我的问题是我必须使用第三方函数/算法，它需要一个**双**精度值数组作为输入，但显然对输入数据中非常小的变化很敏感。但是对于我的应用程序，我必须为（几乎）相同的输入获得*相同*的结果！特别是我有两个测试输入数组，它们在小数点后的第 5 位是相同的，但我仍然得到不同的结果。那么导致“问题”的原因肯定是在小数点*后第5位之后。*

现在我的想法是将输入四舍五入到稍低的精度，以便从非常相似但*不是*100% 相同的输入中获得相同的结果。因此，我正在寻找一种很好/有效的方法来将**双**精度值舍入到*略低*的精度。到目前为止，我正在使用此代码四舍五入到小数点后的第 9 位：

```
double x = original_input();
x = double(qRound(x * 1000000000.0)) / 1000000000.0; 
```

这里 qRound() 是来自 Qt 的普通双整数舍入函数。这段代码有效，它确实解决了我对两个“有问题的”测试集的问题。但是：有没有更有效的方法呢？

还有什么困扰我：对于在 -100.0 到 100.0 范围内的输入数据（与我当前的输入数据一样），四舍五入到小数点后的第 9 位可能是合理的。但是，例如，对于 -0.001 到 0.001 范围内的输入数据，它可能太多（即，精度损失太大）。不幸的是，我不知道在其他情况下我的输入值在什么范围内......

毕竟，我认为我需要的是类似于执行以下操作的函数：*通过适当的舍入，将给定的**双**精度值 X 截断到小数点后最多 LN 位置，其中 L 是位置数在**双**精度可以存储（表示）给定值的小数点之后；并且 N 是固定的，例如 3*。这意味着对于“小”值，我们将允许小数点后的位置比“大”值更多。换句话说，我想将 64 位浮点值舍入到（稍微）更小的精度，如 60 位或 56 位，然后将其存储回 64 位双精度值。

你能理解这个吗？如果是这样，你能建议一种在 C++ 中（有效地）做到这一点的方法吗？？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:42:15.860

感谢您到目前为止的输入。

然而，经过一番搜索，我发现了 frexp() 和 ldexp() 函数！这些函数让我可以访问给定**double**值的“尾数”和“指数”，还可以从*尾数*+*指数*转换回**double**。现在我只需要舍入尾数。

```
double value = original_input();
static const double FACTOR = 32.0;
int exponent;
double temp = double(round(frexp(value, &exponent) * FACTOR));
value = ldexp(temp / FACTOR, exponent); 
```

我不知道这是否有效，但它给出了合理的结果：

```
0.000010000000000   0.000009765625000
0.000010100000000   0.000010375976563
0.000010200000000   0.000010375976563
0.000010300000000   0.000010375976563
0.000010400000000   0.000010375976563
0.000010500000000   0.000010375976563
0.000010600000000   0.000010375976563
0.000010700000000   0.000010986328125
0.000010800000000   0.000010986328125
0.000010900000000   0.000010986328125
0.000011000000000   0.000010986328125
0.000011100000000   0.000010986328125
0.000011200000000   0.000010986328125
0.000011300000000   0.000011596679688
0.000011400000000   0.000011596679688
0.000011500000000   0.000011596679688
0.000011600000000   0.000011596679688
0.000011700000000   0.000011596679688
0.000011800000000   0.000011596679688
0.000011900000000   0.000011596679688
0.000012000000000   0.000012207031250
0.000012100000000   0.000012207031250
0.000012200000000   0.000012207031250
0.000012300000000   0.000012207031250
0.000012400000000   0.000012207031250
0.000012500000000   0.000012207031250
0.000012600000000   0.000012817382813
0.000012700000000   0.000012817382813
0.000012800000000   0.000012817382813
0.000012900000000   0.000012817382813
0.000013000000000   0.000012817382813
0.000013100000000   0.000012817382813
0.000013200000000   0.000013427734375
0.000013300000000   0.000013427734375
0.000013400000000   0.000013427734375
0.000013500000000   0.000013427734375
0.000013600000000   0.000013427734375
0.000013700000000   0.000013427734375
0.000013800000000   0.000014038085938
0.000013900000000   0.000014038085938
0.000014000000000   0.000014038085938
0.000014100000000   0.000014038085938
0.000014200000000   0.000014038085938
0.000014300000000   0.000014038085938
0.000014400000000   0.000014648437500
0.000014500000000   0.000014648437500
0.000014600000000   0.000014648437500
0.000014700000000   0.000014648437500
0.000014800000000   0.000014648437500
0.000014900000000   0.000014648437500
0.000015000000000   0.000015258789063
0.000015100000000   0.000015258789063
0.000015200000000   0.000015258789063
0.000015300000000   0.000015869140625
0.000015400000000   0.000015869140625
0.000015500000000   0.000015869140625
0.000015600000000   0.000015869140625
0.000015700000000   0.000015869140625
0.000015800000000   0.000015869140625
0.000015900000000   0.000015869140625
0.000016000000000   0.000015869140625
0.000016100000000   0.000015869140625
0.000016200000000   0.000015869140625
0.000016300000000   0.000015869140625
0.000016400000000   0.000015869140625
0.000016500000000   0.000017089843750
0.000016600000000   0.000017089843750
0.000016700000000   0.000017089843750
0.000016800000000   0.000017089843750
0.000016900000000   0.000017089843750
0.000017000000000   0.000017089843750
0.000017100000000   0.000017089843750
0.000017200000000   0.000017089843750
0.000017300000000   0.000017089843750
0.000017400000000   0.000017089843750
0.000017500000000   0.000017089843750
0.000017600000000   0.000017089843750
0.000017700000000   0.000017089843750
0.000017800000000   0.000018310546875
0.000017900000000   0.000018310546875
0.000018000000000   0.000018310546875
0.000018100000000   0.000018310546875
0.000018200000000   0.000018310546875
0.000018300000000   0.000018310546875
0.000018400000000   0.000018310546875
0.000018500000000   0.000018310546875
0.000018600000000   0.000018310546875
0.000018700000000   0.000018310546875
0.000018800000000   0.000018310546875
0.000018900000000   0.000018310546875
0.000019000000000   0.000019531250000
0.000019100000000   0.000019531250000
0.000019200000000   0.000019531250000
0.000019300000000   0.000019531250000
0.000019400000000   0.000019531250000
0.000019500000000   0.000019531250000
0.000019600000000   0.000019531250000
0.000019700000000   0.000019531250000
0.000019800000000   0.000019531250000
0.000019900000000   0.000019531250000
0.000020000000000   0.000019531250000
0.000020100000000   0.000019531250000 
```

毕竟似乎喜欢我一直在寻找的东西：

[http://img833.imageshack.us/img833/9055/clipboard09.png](http://img833.imageshack.us/img833/9055/clipboard09.png)

现在我只需要为我的功能找到好的 FACTOR 值....

有什么意见或建议吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T10:32:43.897

从问题中看不出业务场景；我仍然觉得您正在尝试查看这些值是否在可接受的范围内。而不是 ==，您可以检查第二个值是否在某个百分比范围内（例如 +/- 0.001%）

如果范围百分比不能固定（平均值，根据精度长度而变化；例如，对于小数点后 2 位，0.001% 很好，但对于小数点后 4 位，需要 0.000001%），那么您可以通过 1/尾数得出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:36:29.327

如果你看一下[双位布局](https://en.wikipedia.org/wiki/Double_precision_floating-point_format)，你会看到如何将它与一些位魔法结合起来以实现快速（二进制）舍入到任意精度。您有以下位布局：

```
SEEEEEEEEEEEFFFFFFFFFFF.......FFFFFFFFFF 
```

其中`S`是符号位，`E`s 是指数位，`F`s 是小数位。你可以像这样制作一个位掩码：

```
11111111111111111111111.......1111000000 
```

并按位和 ( `&`) 将两者结合在一起。结果是原始输入的四舍五入版本：

```
SEEEEEEEEEEEFFFFFFFFFFF.......FFFF000000 
```

您可以通过更改尾随零的数量来控制截断多少数据。更多的零 = 更多的舍入；更少=更少。您还可以获得您想要的其他效果：小输入值的影响比例小于大输入值，因为每个位对应的“位置”由指数决定。

希望有帮助！

*警告：* 这在技术上是*截断*而不是真正的舍入（所有值都将变得更接近于零，无论它们与其他可能的结果有多接近），但希望它对您的情况同样有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-15T11:16:13.617

我知道这个问题已经很老了，但我也搜索了一种将`double`值舍入到较低精度的方法。也许，这个答案可以帮助那里的人。

想象一个二进制表示的浮点数。例如`1101.101`. 这些位`1101`表示数字的整数部分，并用`2^3`, `2^2`, `2^1`,`2^0`从左到右加权。小数部分的位`101`用`2^-1`, `2^-2`,加权`2^-3`，等于`1/2`, `1/4`, `1/8`。

那么，当您将小数点后的两位数截去时，您会产生什么小数错误？在`0.125`此示例中，由于已设置该位。如果未设置该位，则错误为`0`。所以，错误是`<= 0.125`。

现在以更一般的方式思考：如果您有一个无限长的尾数，则小数部分会收敛到 1（[请参见此处](https://www.wolframalpha.com/input/?i=sum%20i%3D1%20to%20inf%201%2F2%5Ei)）。事实上，你只有 52 位（[见这里](https://www.wolframalpha.com/input/?i=sum%20i%3D1%20to%2052%201%2F2%5Ei)），所以总和是“几乎”1。所以切断所有小数位会导致错误，`<= 1`这并不奇怪！（请记住，您的整数部分也占用尾数空间！但如果您假设一个像二进制表示的数字`1.5`，`1.1`您的尾数只存储小数点后的部分。）

由于截断所有小数位会导致 的错误`<= 1`，因此截断除小数点右边的第一位以外的所有位都会导致错误，`<= 1/2`因为该位是用 加权的`2^-1`。再保留一点会将您的错误减少到`<= 1/4`.

这可以通过一个函数来描述，`f(x) = 1/2^(52-x)`其中`x`是从右侧计算的截止位数，并且`y = f(x)`是结果错误的上限。

小数点后两位四舍五入意味着按常见的百分之一“分组”数字。这可以通过上面的函数来完成：`1/100 >= 1/2^(52-x)`. 这意味着在切断 x 位时，您产生的错误以百分之一为界。用 x 求解这个不等式得到：`52-log2(100) >= x`其中`52-log2(100)`是`45.36`。这意味着切断不超过`45`位可确保浮点后两个小数（！）位置的“精度”。

通常，您的尾数由整数部分和小数部分组成。让我们称它们的长度`i`和`f`。正指数描述`i`。而且`52=f+i`持有。上述不等式的解变为：`52-i-log2(10^n) >= x`因为你的小数部分结束后，你必须停止截断尾数！（`n`这里是小数精度。）

应用对数规则，您可以计算允许截断的最大位数，如下所示：

`x = f - (uint16_t) ceil(n / 0.3010299956639812);`其中常数表示`log10(2)`。然后可以使用以下方法进行截断：

`mantissa >>= x; mantissa <<= x;`

如果`x`大于`f`，请记住仅移位`f`。否则，您将影响尾数的组成部分。

# c# - 使用存储的访问令牌自动登录

> ID：14150139
> 
> 赞同：2
> 
> 时间：2013-01-04T02:07:18.003
> 
> 标签：c#, facebook, windows-8, facebook-c#-sdk, facebook-authentication

在我为 Windows 8 编写的应用程序中，我通过 Facebook 进行身份验证。我想这样做，您不必每次都输入您的凭据。我能够写入文件用户的访问令牌，但我无法检查它是否仍然处于活动状态。我需要这样的东西-`if (_fb.TryLoginWithStoredToken (storedToken)) {.... }.`

如果它返回 false 则抛出正常的 Facebook 登录窗口，即：

```
loginUrl var = _fb.GetLoginUrl (new
                 {
                     client_id = _facebookAppId,
                     redirect_uri = redirectUrl,
                     scope = _permissions,
                     display = "popup"
                     response_type = "token"
                 });
                 endUri var = new Uri (redirectUrl);
                 WebAuthenticationResult await WebAuthenticationBroker.AuthenticateAsync WebAuthenticationResult = (
                                                         WebAuthenticationOptions.None,
                                                         loginUrl,
                                                         endUri);
                 if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
                 {
                     callbackUri var = new Uri (WebAuthenticationResult.ResponseData.ToString ());
                     _fb.ParseOAuthCallbackUrl facebookOAuthResult = var (callbackUri);
                     accessToken var = facebookOAuthResult.AccessToken; 
```

我希望这是可能的，如果没有，也许您对如何获得这种效果有更好的了解；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:44:42.610

不幸的是，目前 Facebook 不支持允许这种情况发生所需的单点登录 redirect_uri。因此，这是不可能的。

# java - drawImage 不绘图

> ID：14150140
> 
> 赞同：0
> 
> 时间：2013-01-04T02:07:21.813
> 
> 标签：java, user-interface, drawimage

所以这基本上就是我的代码的工作方式

```
class Main extends JFrame implements Runnable {

   public Main() {
      //init everything
   }

   public void start() {
      running = true;
      Thread thread = new Thread(this);
      thread.start();
   }

   public void run() {
      while(running) {
         render();
      }
   }

   public void render() {
      Image dbImage  = createImage(width, height);
      Graphics dbg = dbImage.getGraphics();
      draw(dbg);
      Graphics g = getGraphics();
      g.drawImage(dbImage, 0, 0, this);
      g.dispose();
   }

   public void draw(Graphics g) {
      for(int y=0; y < map.length; y++) {
         for(int x=0; x < map.length; x++) {
            g.drawImage(map.map[x + y* map.MAP_DIM], x*MAP_DIM, y*MAP_DIM, this);
         }
      }
   }

   public static void main(String... args) {
      Main main = new Main();
      main.start();
   }
} 
```

但什么都没有画出来，我看到的都是灰色的。有谁知道可能是什么问题？我尝试在 draw() 方法结束时执行 repaint()，但仍然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:14:34.583

您不应该使用 Java 中的 Swing 自己管理绘图。

您必须让[EDT](http://en.wikipedia.org/wiki/Event_dispatching_thread)线程通过其自己的线程调用适当的重绘方法。这是通过调用`JComponent`'s来完成的`paint(Graphics g)`。现在你不应该重写那个方法，`paintComponent(Graphics g)`而是。

所以你应该把你的draw方法从线程移到适当的draw方法：

```
public void run() {
  while (running)
    repaint();
}

public void paintComponent(Graphics g) {
  draw(g);
} 
```

请注意，您应该以固定的帧速率调用重绘并使用双缓冲来避免闪烁。

一个更简单的解决方案是嵌入一些已经为这种工作准备好的东西，比如一个运行良好的[处理](http://processing.org)框架。

# sql - 需要启蒙以消除对 datetime 与 smalldatetime 的疑虑

> ID：14150143
> 
> 赞同：1
> 
> 时间：2013-01-04T02:07:54.630
> 
> 标签：sql, sql-server, sql-server-2005, date, datetime-format

我已经阅读了这一点，但仍然无法理解。希望这里有人可以向我解释。我有一个查询，它为我的列分配了一个仅当前日期的值。但是我想知道我是否应该创建新列，`DATETIME`或者`SMALLDATETIME`我的查询是否像：

```
 Insert into table(col A)
  Select DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0) As ColA  
  from table B 
```

我想我的选择语句已经给了我没有时间的日期值。我怀疑`Col A`在我的数据库表中创建。我正在使用 Sql 2005。

更新：
所以我的 qns 是如何在我的 db 表中创建我的 A 列？我需要添加约束吗？首选哪种数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:02:33.407

SQL Server 2005 不支持该`date`数据类型。那将是您真正想要的数据类型。

`smalldatetime`和`datetime`都存储带有时间组件的日期。这些在[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms187819%28v=sql.90%29.aspx)中进行了解释。 `Smalldatetime`存储在四个字节`datetime`中，存储在 8 个字节中。

出于您的目的，它们可能同样有用。区别在于可以表示的范围和准确性。在这两种情况下，准确度都远低于一天，因此任何一种都适用于大多数用途的存储日期。

# php - 在 Propel ORM 中使用 SQL 连接

> ID：14150146
> 
> 赞同：0
> 
> 时间：2013-01-04T02:08:11.407
> 
> 标签：php, orm, symfony-1.4, propel

我正在使用类似于以下情况的 Propel 查询。有人可以解释 joinSubTopic() 是什么吗？我猜这是一个自动生成的 Propel 方法，但我不太确定如何理解它，因为我在文档中找不到任何使用这种方法的东西。

**询问：**

```
LectureQuery::create()->joinSubTopic()->find() 
```

**关系：** 讲座可以有多个子主题。

SubTopic.lecture_id 是 Lecture.id*的外键*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:08:18.073

这只是构建类时自动创建的基本连接函数。您可以[在文档中](http://propelorm.org/reference/model-criteria.html#joining_tables)找到它。

这两个调用是相同的：

```
LectureQuery::create()->joinSubTopic()->find();
LectureQuery::create()->join('SubTopic')->find(); 
```

# python - 如何在解析函数中停止爬虫

> ID：14150148
> 
> 赞同：1
> 
> 时间：2013-01-04T02:08:17.087
> 
> 标签：python, scrapy

我正在使用scrapy来抓取搜索结果。我有一个变量`search_page`，它告诉我们在哪个页码。

我在`parse`函数中有那个变量。

现在我想要如果`search_page > 500`then 爬虫应该停止爬行

我怎样才能做到这一点

```
def parse(self, response):

    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//div[@class="headline_area"]')
    items = []

    for site in sites[:5]:
        item = StackItem()
        log.msg(' LOOP' +str(ivar)+ '', level=log.ERROR)
        item['title'] ="yoo ma"
        request =  Request("blabla",  callback=self.test1)
        request.meta['item'] = item
        page_number = nextlink.split("&")[-3].split("=")[-1]
        if page_number > 500:
                 STOP
        ivar = ivar + 1
        yield request 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:40:49.000

[https://scrapy.readthedocs.org/en/latest/topics/exceptions.html?highlight=closeSpider](https://scrapy.readthedocs.org/en/latest/topics/exceptions.html?highlight=closeSpider)

从 scrapy.exceptions 导入 CloseSpider

```
 if int(page_number) > 500:
       raise CloseSpider('Search Exceeded 500') 
```

# flex4 - mx：设置为自动时，列表水平滚动始终可见

> ID：14150150
> 
> 赞同：0
> 
> 时间：2013-01-04T02:09:06.167
> 
> 标签：flex4, horizontal-scrolling

即使策略设置为自动，我的 mx:list 总是显示滚动条。我怎样才能让它真正成为自动并在不需要时消失？这是代码：

```
<fx:Script>
  <![CDATA[
    private function initFoo():void 
    {
      foo.maxHorizontalScrollPosition=foo.columnWidth;
    }
  ]]>
</fx:Script>

<s:VGroup width="100%">
  <mx:List id="foo" width="100%" horizontalScrollPolicy="{ScrollPolicy.AUTO}" creationComplete="initFoo()" >
    <mx:dataProvider>
      <fx:String>text</fx:String>               
    </mx:dataProvider>
  </mx:List>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:34:44.877

您的问题似乎是因为您正在设置`maxHorizontalScrollPosition`. 如果您不这样做，则列表的行为与您预期的一样（没有滚动条，除非确实需要它们）。

您还使用了列表的`columnWidth`属性，但[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/listClasses/ListBase.html#columnWidth)说它只使用了 old`<mx:TileList />`和`<mx:HorizontalList />`components - 将它与`<mx:List />`. *默认值为`columnWidth`50，这就是您看到滚动条的原因。*

如果您将`columnWidth`列表中的 设置为 500，滚动条就会消失。但同样，我建议不要使用`maxHorizontalScrollPosition`or `columnWidth`。

坦率地说，我不确定设置的目的`maxHorizontalScrollPosition`是什么。如果有滚动条，你不想让用户滚动到任何一端吗？我以前从来没有使用过这个属性，我越想越觉得Flex SDK开发者甚至创建了这样一个属性似乎有点多余——再次，为什么有滚动条但不允许用户滚动到结尾？我敢肯定有一些原因:)

最后，您最好使用 a`<s:List />`而不是`<mx:List />`-- 您正在使用 中的 Spark 组件`<s:VGroup />`，因此没有理由使用 MX 作为列表。如果您使用 Spark 列表，您的代码会稍有更改（其中一些属性不再相关），但您应该能够获得您所追求的相同结果。

# c++ - 从基本矩阵中提取平移和旋转

> ID：14150152
> 
> 赞同：16
> 
> 时间：2013-01-04T02:09:25.700
> 
> 标签：c++, opencv, matrix, rotation, translation

我正在尝试从计算的基本矩阵中检索平移和旋转向量。我确实使用 OpenCV，一般方法来自维基百科。我的代码是这样的：

```
//Compute Essential Matrix
Mat A = cameraMatrix(); //Computed using chessboard
Mat F = fundamentalMatrix(); //Computed using matching keypoints
Mat E = A.t() * F * A;

//Perfrom SVD on E
SVD decomp = SVD(E);

//U
Mat U = decomp.u;

//S
Mat S(3, 3, CV_64F, Scalar(0));
S.at<double>(0, 0) = decomp.w.at<double>(0, 0);
S.at<double>(1, 1) = decomp.w.at<double>(0, 1);
S.at<double>(2, 2) = decomp.w.at<double>(0, 2);

//V
Mat V = decomp.vt; //Needs to be decomp.vt.t(); (transpose once more)

//W
Mat W(3, 3, CV_64F, Scalar(0));
W.at<double>(0, 1) = -1;
W.at<double>(1, 0) = 1;
W.at<double>(2, 2) = 1;

cout << "computed rotation: " << endl;
cout << U * W.t() * V.t() << endl;
cout << "real rotation:" << endl;
Mat rot;
Rodrigues(images[1].rvec - images[0].rvec, rot); //Difference between known rotations
cout << rot << endl; 
```

最后，我尝试将估计的旋转与我使用每个图像中的棋盘计算的旋转进行比较（我计划在没有棋盘的情况下获取外部参数）。例如我得到这个：

```
computed rotation:
[0.8543027125286542, -0.382437675069228, 0.352006107978011;
  0.3969758209413922, 0.9172325022900715, 0.03308676972148356;
  0.3355250705298953, -0.1114717965690797, -0.9354127247453767]

real rotation:
[0.9998572365450219, 0.01122579241510944, 0.01262886032882241;
  -0.0114034800333517, 0.9998357441946927, 0.01408706050863871;
  -0.01246864754818991, -0.01422906234781374, 0.9998210172891051] 
```

很明显，似乎存在问题，我只是无法弄清楚它可能是什么。

编辑：这是我使用未转置 vt 得到的结果（显然来自另一个场景）：

```
computed rotation: 
[0.8720599858028177, -0.1867080200550876, 0.4523842353671251;
 0.141182538980452, 0.9810442195058469, 0.1327393312518831;
-0.4685924368239661, -0.05188790438313154, 0.8818893204535954]
real rotation
[0.8670861432556456, -0.427294988334106, 0.2560871201732064;
 0.4024551137989086, 0.9038194629873437, 0.1453969040329854;
-0.2935838918455123, -0.02300806966752995, 0.9556563855167906] 
```

这是我计算出的相机矩阵，误差非常低（大约 0.17 ...）。

```
[1699.001342509651, 0, 834.2587265398068;
  0, 1696.645251354618, 607.1292618175946;
  0, 0, 1] 
```

这是我在尝试重新投影立方体时得到的结果... 摄像机 0，立方体是轴对齐的，旋转和平移是 (0, 0, 0)。 [图片 http://imageshack.us/a/img802/5292/bildschirmfoto20130110u.png](http://imageshack.us/a/img802/5292/bildschirmfoto20130110u.png)

另一个是第一张图像中点的外延线。 [图片 http://imageshack.us/a/img546/189/bildschirmfoto20130110uy.png](http://imageshack.us/a/img546/189/bildschirmfoto20130110uy.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T19:44:56.657

请看一下这个链接：

[http://isit.u-clermont1.fr/~ab/Classes/DIKU-3DCV2/Handouts/Lecture16.pdf](http://isit.u-clermont1.fr/~ab/Classes/DIKU-3DCV2/Handouts/Lecture16.pdf)。

请参阅第 2 页。R 有两种可能。第一种是 U *W* VT，第二种是 U *WT* VT。你用的是第二个。尝试第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T14:19:20.973

8 点算法是计算基本矩阵的最简单方法，但如果小心，您可以很好地执行它。获得良好结果的关键是在构造要求解的方程之前对输入数据进行适当的仔细归一化。许多算法都可以做到。像素点坐标必须更改为相机坐标，您在此行中执行此操作：

`Mat E = A.t() * F * A;`

然而这个假设并不准确。如果相机标定矩阵 K 已知，则可以对点 x 求逆以获得以归一化坐标表示的点。

`X_{norm}= K.inv()*X_{pix}`其中`X_{pix}(2)`，z 等于 1。

在 8PA 的情况下，点的简单变换提高了结果的稳定性。建议的归一化是每个图像的平移和缩放，以便参考点的质心位于坐标原点，并且点到原点的 RMS 距离等于`\sqrt{2}`。请注意，建议在非规范化之前强制执行奇异性条件。

参考：如果 [您仍然感兴趣，请检查它](http://www.cs.cmu.edu/afs/andrew/scs/cs/15-463/f07/proj_final/www/amichals/fundamental.pdf)

# javascript - document.write 不起作用，但 console.log 可以

> ID：14150154
> 
> 赞同：0
> 
> 时间：2013-01-04T02:09:29.860
> 
> 标签：javascript, facebook-javascript-sdk, facebook-fql, document.write

因此，我从 facebook 上的某个用户创建的事件中创建了一个数组，我让所有 API 的东西都能正常工作，但由于某种原因我不能 document.write 它。

这是我的代码：

```
for( var i = 0 ; i < response.length ; i++ ) 
{
    if (response[i]['eid'] > 0)
    {
        document.write([response[i]['name']] + '</br>' + response[i]['description']),
        console.log([response[i]['name']] + '</br>' + response[i]['description']);
    }
} 
```

当我记录它时，它很好，但我实际上无法在页面上显示它。alert()'ing 它也有效。

有什么想法可以吐出这些变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T02:16:01.643

当您在页面加载后调用 document.write 时，它​​会重写不包含返回数据的当前页面或循环迭代该数据。由于您使用的是 FB API，我猜这是在页面加载后运行的。尝试使用客户端模板解决方案来呈现所有这些数据。这样，您就不必进行一堆字符串连接来为您的数据创建 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:34:56.920

如果页面的唯一目的是显示 FB api 调用的结果，那么只要您的页面设置为有效的 HTML 并且您的所有 javascript 都包含在文档的头部，document.write 应该可以工作。document.write 通常只在页面加载之前和正文中使用。页面加载后，文档的整个正文部分将被覆盖和替换。因此，如果您的任何脚本在正文中，它也会被替换。

在我看来，一个更好的选择是有一个 div 并用结果填充 div。

HTML：

```
<div id="results">
</div> 
```

Javascript：

```
var results = "";

for( var i = 0 ; i < response.length ; i++ ) 
{
    if (response[i]['eid'] > 0)
    {
        results += response[i]['name'] + '</br>' + response[i]['description'];
        console.log(response[i]['name'] + '</br>' + response[i]['description']);
    }
}

document.getElementById("results").innerHTML = results; 
```

编辑：我上面的解释是错误的，如果在页面加载后使用 document.write 会重写整个文档。我上面的解决方案仍然 100% 有效。

上面接受的答案不是 100% 正确......下面的代码清楚地表明，即使文档被覆盖，至少，已经在全局对象（窗口）中设置的函数和变量不会丢失，它们仍然跑。因此，如果您遍历已设置的数据，它仍将运行并显示结果，因此问题不仅仅是 javascript 被覆盖。

试试这个：

```
<!DOCTYPE html>
<html>
<head>
<title>hi</title>
<script type="text/javascript">
    window.onload = function () {
        setTimeout(function () {
            for (i = 0; i < 10; i++)
                // this runs 3 seconds after the page loads, so after the first iteration
                // the entire document is erased and overwritten with 'hi',
                // however this loop continues to run, and write() continues to execute,
                // showing that the javascript still exists and operates normally.
                write();
        }, 3000);
    };

    // this variable will still exist after the page is overwritten
    window.someVar = "foo";

    // this function still exists and executes after the page is overwritten
    function write() {
        document.write("hi");
    }
</script>
</head>
<body>
<div>
    <b>hello</b>
</div>
</body>
</html> 
```

# c - 为什么在可以离开编译器集时显式设置枚举值？

> ID：14150156
> 
> 赞同：2
> 
> 时间：2013-01-04T02:09:30.963
> 
> 标签：c, enums

通常我看到`enum { A = 1, B = 2, C = 3, ... }`是否有一些特殊的原因只设置`A`值并将编译器设置下一个值设置为前一个成员值 + 1 或者这个程序员正在尝试编写更具可读性的代码或类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T02:27:45.053

这是一个风格问题。指定这些值表明您的应用程序关心每个枚举所采用的特定值，可能是因为它用于实现已发布的标准，或者用于与接口指定特定整数的其他应用程序的互操作性。

即使规范中的值碰巧是连续的，最好明确地输入它们。如果您以错误的顺序输入成员，或者稍后有人在列表中间插入成员，则将它们排除在外会更容易出错。

另一方面，如果您不关心具体的值是什么，而只需要编译器为每个枚举成员分配任意唯一值，您可以将这些值排除在外，让编译器自动完成。这适用于仅在应用程序内部使用的枚举。

# ember.js - 如何使用新的 Ember.js 路由器设置控制器之间的绑定

> ID：14150162
> 
> 赞同：5
> 
> 时间：2013-01-04T02:11:05.090
> 
> 标签：ember.js

## 解释：

新的 Ember.js 路由器改变了许多事情。我已经迁移了大多数东西，但是有一个用例我似乎无法适应 Ember.js 的做事方式。

假设我有一个带有一些控制器的应用程序。其中一些控制器属于 my 中的路由，`App.Router`而其中一些不属于，即 my `I18nController`. 这是一个**非路由器控制器**，它确保通过 Handlebars 助手在整个应用程序中翻译内容。

我也有`App.UserController`一个`App.User`记录作为它的`content`。

## 问题：

以前，我能够在相当丑陋的`App.I18nController`之间设置绑定，允许我在本地化时随时读取用户的语言环境。`App.UserController``localeBinding: 'App.router.userController.content.locale'`

但是，使用新路由器，这不再可能。

## 问题：

我的问题是：我应该如何使用新路由器设置此绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T06:18:52.600

对于新的路由器，有几种不同的策略来设置控制器之间的绑定（依赖关系）。一种选择是`this.controllerFor`在你的路由定义中设置你的 setupControllers 回调。另一种是在创建应用程序之前为注入注册依赖项。[在这个 github issue](https://github.com/emberjs/ember.js/issues/1646)中讨论了这些和其他几个选项。如果您关注该线程，您将找到这些不同策略的代码示例。似乎还没有建立真正的约定，但我喜欢 call like`App.container.injection("controller", "settings", "controller:settingsController")`方法，因为它非常具有声明性和清晰性。

# visual-studio-2010 - 双倍和双倍Visual C++之间的区别

> ID：14150163
> 
> 赞同：0
> 
> 时间：2013-01-04T02:11:14.227
> 
> 标签：visual-studio-2010, visual-c++, types, double, type-conversion

托管 C++ 中的***double***类型和***Double***类型有什么区别？它是与价值（即大小范围）相关的还是只是一种适合网络框架的现代化类型？

据我了解，Double 来自 System::Double，它本身就是一个值类，如果需要，它可以作为一个对象，而不仅仅是一个不同于 ISO/IEC 前身的值。但是例如，如果我将浮点数解析为双精度，我为什么要使用它：

```
Console::Write(L"Enter a value: ");
float value = Double::Parse(Console::ReadLine());                        
Console::WriteLine(L"You entered {0}", value); 
```

代替：

```
Console::Write(L"Enter a value: ");
float value = double::Parse(Console::ReadLine());                        
Console::WriteLine(L"You entered {0}", value); 
```

我知道我在解析时会同时提出两个问题，但这会帮助我从 Double 中理解 double。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:18:06.917

它们不是同义词，与`int`/ `Int32`，`string`/相同`String`。在使用方面，我倾向于在访问静态方法（如 Parse）时使用 Pascal 大小写，而在声明变量时使用小写字母——不过这只是我的偏好。

仅供参考-在您的示例中，您没有将 a 解析`float`为 a`double`您将 a 解析`string`为 a`double`并将其分配给`float`变量。这样做可能会遇到精度问题，如果你解析 a`double`那么你的变量应该是 type `double`。如果您确实需要解析浮点数，请改用[Single::Parse](http://msdn.microsoft.com/en-us/library/2thct5cb.aspx)。

# c++ - 将一个无符号短裤数组转换为一个无符号字符数组

> ID：14150166
> 
> 赞同：0
> 
> 时间：2013-01-04T02:11:39.677
> 
> 标签：c++, c, arrays, casting

我似乎无法弄清楚这里发生了什么。我有以下警报图标；

```
K_USHORT usaAlertIcon[16] = { 0x0000, 0x0000, 0x0180, 0x03C0, 0x03C0, 0x0660, 0x0660, 0x0E70, 0x0E70, 0x1E78, 0x3E7C, 0x3FFC, 0x7E7E, 0x7E7E, 0xFFFF, 0x0000 }; 
```

现在，我想在我的代码中使用它，它认为数组是 8 位数据（无符号字符）；

```
//---------------------------------------------------------------------------
void GraphicsDriver::Stamp(DrawStamp_t *pstStamp_)
{
    K_USHORT usRow;
    K_USHORT usCol;
    K_USHORT usShift;
    K_USHORT usIndex;
    DrawPoint_t stPoint;

    usIndex = 0;
    for (usRow = pstStamp_->usY; usRow < (pstStamp_->usY + pstStamp_->usHeight); usRow++)
    {
        usShift = 0x80;
        for (usCol = pstStamp_->usX; usCol < (pstStamp_->usX + pstStamp_->usWidth); usCol++)
        {
            // If the packed bit in the bitmap is a "1", draw the color.
            if (pstStamp_->pucData[usIndex] & usShift)
            {
                stPoint.usX = usCol;
                stPoint.usY = usRow;
                stPoint.uColor = pstStamp_->uColor;
                DrawPixel(&stPoint);
            }
            // Stamps are opaque, don't fill in the BG

            // Shift to the next bit in the field
            usShift >>= 1;

            // Rollover - next bit in the bitmap.
            // This obviously works best for stamps that are multiples of 8x8
            if (usShift == 0)
            {
                usShift = 0x80;
                usIndex++;
            }
        }
    }
} 
```

在将数组分配给要发送给此函数的数据结构时，我将其转换为；

```
stStamp.pucData = (K_UCHAR*)usaAlertIcon; 
```

但是，当我这样做时，它似乎翻转了字节。它先画左半边，然后画右半边；所以它把图像从中间切了下来，把左边的部分换成了右边的部分。

作为健全性检查，如果我自己明确拆分数组；

```
K_UCHAR ucaAlertIcon[32] = { 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x03, 0xC0, 0x03, 0xC0, 0x06, 0x60, 0x06, 0x60, 0x0E, 0x70, 0x0E, 0x70, 0x1E, 0x78, 0x3E, 0x7C, 0x3F, 0xFC, 0x7E, 0x7E, 0x7E, 0x7E, 0xFF, 0xFF, 0x00, 0x00 }; 
```

一切都按预期工作。

有人可以解释为什么当我进行类型转换时这些字节似乎在翻转吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:16:06.167

> 有人可以解释为什么当我进行类型转换时这些字节似乎在翻转吗？

字节序。你显然在一个小端机器上，这意味着最低地址的字节是最低有效字节。您需要将`unsigned short`值转换为大端格式，`htons`例如这样做。

```
#include <arpa/inet.h>

uint16_t htons(uint16_t hostshort); 
```

当然你也可以自己做

```
array[i] = (array[i] << 8) | (array[i] >> 8); 
```

# php - SQL 正确读取 Facebook ID 但 PHP 无法正确读取？

> ID：14150168
> 
> 赞同：1
> 
> 时间：2013-01-04T02:12:06.803
> 
> 标签：php, sql, facebook, encryption

在我网站的登录部分，我试图让用户写一些关于他们自己的信息。我有一个功能性但不安全的登录/注册页面，我试图用一个简单的“使用 facebook 登录”按钮替换它。

问题是，一旦用户使用 facebook 登录，他们可以更新信息，但他们无法访问它。$uid 变量包含他们唯一的 facebook 用户 ID，SQL 函数正确读取它并将其插入数据库，但所有其他 PHP 函数将其读取为完全不同的数字。SQL 是否在解码 $uid 而 PHP 回显加密版本？

以下将一条新信息放入正确的 facebook ID 下，然后回显不正确的 facebook ID：

```
 $sql="INSERT INTO Users (ID, Date, Category, Info)
VALUES
($uid, '$myTime', '$category','$info')";

if (!mysql_query($sql, $con))
  {
  die('Error: ' . mysql_error());
  }
echo "Info Saved<br>";

echo " session: " . $_SESSION['uid'] . " PHP uid: " . $uid . " cookie: " . $_COOKIE['uid']; 
```

我可以告诉 SQL 函数工作正常，因为真实 ID 存储在数据库中的信息旁边，并且当用户使用非安全表单登录时显示数据。

输出：

```
 Info Saved
 session: 100005003165914 PHP uid: 100005003165914 cookie: 100005003165914 
```

当我使用不安全的表单登录时会发生这种情况：

```
 Info Saved
 session: 2147483647 PHP uid: 2147483647 cookie: 2147483647 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:27:04.690

从您的代码中不清楚安全和非安全形式之间的区别是什么，但我怀疑在某些时候`$_SESSION['uid']`从数据库中读回并且该`ID`列只是 am INT，它不能存储 100005003165914 但最多 2147483647 - 这恰好是您获得的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:23:41.103

非安全形式和不安全形式有什么区别？两者听起来都与我相似。也试试这个答案：[Get User Id from Facebook in PHP](https://stackoverflow.com/questions/6948668/get-user-id-from-facebook-in-php)

# java - Android 初学者 - 在 DragEvent 中放置图像

> ID：14150170
> 
> 赞同：11
> 
> 时间：2013-01-04T02:12:10.810
> 
> 标签：java, android

我意识到已经发布了类似的问题，并且我查看了它们以及许多其他主题等以找到解决方案 - 我显然错过了明显的 - 因为我仍在学习基础知识！

目标：简单的拖放。用户在屏幕上移动图像，或者放在另一个图像的顶部或屏幕上的任何位置。

API：>11

完全的：

*   可以拖动图像并将其放置在另一个图像之上并获得响应（使用 Toast 确认）。
*   可以将图像拖动到屏幕上的任意位置并获得响应（使用 Toast 确认）。

不工作：

*   无法在屏幕上的任何位置拖动图像并将图像存放在手指抬起的位置

我尝试了很多不同的方法，但总是编译错误。查看我的代码，任何人都可以推荐一种干净简单的方法将图像放置在 ACTION_DRAG_ENDED （请记住，我是初学者）

这是我的java代码：

```
public class MainActivity extends Activity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

boolean okToDrop;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    findViewById(R.id.oval).setOnTouchListener(new theTouchListener());
    findViewById(R.id.square).setOnTouchListener(new theTouchListener());
    findViewById(R.id.robot).setOnTouchListener(new theTouchListener());
    findViewById(R.id.oval).setOnDragListener(new theDragListener());
    findViewById(R.id.square).setOnDragListener(new theDragListener());
    findViewById(R.id.robot).setOnDragListener(new theDragListener());
}

private final class theTouchListener implements OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(
                    view);
            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.VISIBLE);
            return true;
        } else {
            return false;
        }
    }
}

class theDragListener implements OnDragListener {
    @Override
    public boolean onDrag(View view, DragEvent dragEvent) {
        int dragAction = dragEvent.getAction();
        View dragView = (View) dragEvent.getLocalState();
        if (dragAction == DragEvent.ACTION_DRAG_EXITED) {
            okToDrop = false;
        } else if (dragAction == DragEvent.ACTION_DRAG_ENTERED) {
            okToDrop = true;
        } else if (dragAction == DragEvent.ACTION_DRAG_ENDED) {
            if (dropEventNotHandled(dragEvent) == true) {

                // Code to generate image goes here ***********************

                Context context = getApplicationContext();
                CharSequence text = "Action Dropped Not In Box!";
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(context, text, duration);
                toast.show();

                dragView.setVisibility(View.VISIBLE);
            }
        } else if (dragAction == DragEvent.ACTION_DROP && okToDrop) {
            ImageView i = (ImageView) findViewById(R.id.square);
            i.setImageResource(R.drawable.oval);

            dragView.setVisibility(View.INVISIBLE);

            Context context = getApplicationContext();
            CharSequence text = "Action Resulted In It Being Dropped In The Box";
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

        }
        return true;
    }

    private boolean dropEventNotHandled(DragEvent dragEvent) {
        return !dragEvent.getResult();
    }

} 
```

我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/square"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/square_box" />

    <ImageView
        android:id="@+id/oval"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="58dp"
        android:layout_marginTop="58dp"
        android:src="@drawable/oval" />

    <ImageView
        android:id="@+id/robot"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/oval"
        android:layout_below="@+id/square"
        android:layout_marginTop="70dp"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:20:02.957

虽然我不确定我的实现是否是最好的方法，但它确实有效。

在您的 MainActivity 中添加这些成员：

```
View root; // references root activity view
float dropX, dropY; // records position of where finger was lifted on the root 
```

在您的 onCreate() 中：

```
root = findViewById(android.R.id.content); // get reference to root
// add a Draglistener to your root view
root.setOnDragListener(new OnDragListener() {
    @Override
    public boolean onDrag(View v, DragEvent event) {
        int action = event.getAction();
        if(action == DragEvent.ACTION_DROP) {
            // record position of finger lift
            dropX = event.getX();
            dropY = event.getY();
        }
        return false;
    }
}); 
```

最后，将这些行放在`// Code to generate image goes here`：

```
dragView.setX(dropX - dragView.getWidth() / 2);
dragView.setY(dropY - dragView.getHeight() / 2); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T11:36:06.910

好的！所以你的问题是没有使用相同的拖动监听器。

```
findViewById(R.id.oval).setOnDragListener(new theDragListener()); 
```

应该

```
theDragListener draglistener = new theDragListener();
findViewById(R.id.oval).setOnDragListener(draglistener); 
```

# ruby-on-rails - 如何使用 Jquery Ajax 设置约束选择？

> ID：14150171
> 
> 赞同：1
> 
> 时间：2013-01-04T02:12:30.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我想根据用户选择的国家/地区实现县的自动约束选择。
当用户在国家/地区字段中选择美国时，它应该仅在地区选择字段中显示美国的州，如加利福尼亚或纽约等。

**国家**模式有

*   ID
*   姓名

**县**模式有

*   ID
*   country_id
*   州

现在我像这样展示这些字段

```
<% resource.build_user_profile if resource.user_profile.nil? %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => 'form-horizontal' }) do |f| %>
  <%= devise_error_messages! %>

<%= f.fields_for :user_profile do |profile_form| %>

 <label class="control-label"><%= profile_form.label :country_id %></label>
 <%= profile_form_select :country, options_for_select(Countryy.all.map{ |g| [g.name, g.id] }) %>

 <label class="control-label"><%= profile_form.label :prefecture_id %></label>
 <%= profile_form_select :prefecture, options_for_select(Prefecture.all.map{ |g| [g.name, g.id] }) %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:28:59.473

如果您修改 HTML 以编写自定义选择选项生成器，则可以使用如下所示的一些 JS。

JavaScript：

```
$(".country_select").change(function() {
  var country_id = $(this).val();
  if(country_id) {
    $(".prefecture_select option[country_id="+country_id+"]").hide();
  } else {
    $(".prefecture_select option").show();
  }
} 
```

如果您不想编写自定义选择助手，那么下一个最简单的方法是创建多个选择并使用 JS 仅显示与所选国家/地区匹配的选择。

# c# - 如何使用 GE Winforms API 更改 KMLTreeView 中地标条目的图标

> ID：14150173
> 
> 赞同：3
> 
> 时间：2013-01-04T02:12:37.603
> 
> 标签：c#, google-earth-plugin

我希望能够将 KMLTreeView 中地标条目的图标从标志更改为其他一些自定义位图。对我来说这不是很明显可以做到，但如果有人知道你怎么能提供几行代码？

这是我想更改的“旗帜”的图片。

![在此处输入图像描述](../Images/8277208dd706514218429347e6a6af89.png)

这是设置此图标的代码。我找不到将字符串“flag”转换为图像的位置。此代码来自 2012 年 11 月 20 日 API 的 KmlTreeViewNode.cs 文件：

```
 internal void SetStyle()
    {
        switch (this.ApiType)
        {
            // other lines of code //

            case ApiType.KmlPlacemark:
                {
                    this.ImageKey = "flag";
                    this.SelectedImageKey = "flag";
                }
            // more lines of code // 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:24:41.880

您需要将标志图像文件替换为所需文件，然后重新编译库。

图像本身是一个 16x16 像素的位图并存储在控件`ImageList`内。`KmlTreeView`只需将标志图像替换为您想要的图像（删除标志图像，然后在索引 2 处添加新图像），然后重新编译库。

![KmlTreeView 图片列表合集编辑器](../Images/91af95b021f5c39a81762de030f9b19c.png)

或者，您可以简单地将新的 ImageList 添加到 KmlTreeView。如果你这样做，你应该确保图像具有相同的名称和索引。

```
kmlTreeView1.ImageList = this.myImageList; 
```

# php - 如果我单击浏览器按钮，如何在服务器端显示消息

> ID：14150174
> 
> 赞同：3
> 
> 时间：2013-01-04T02:12:46.310
> 
> 标签：php, javascript, jquery, ajax

我希望以下问题适用于所有主要浏览器 Opera、Internet Explorer、Chrome、Safari 和 Firefox

我想创建一个应用程序，用户必须遵循页面`Text1.php, Text2.php, Text3.php`顺序才能完全创建考试。

问题是用户可以随时单击`back`或`forward`浏览器按钮或通过输入页面 url 访问另一个页面。

所以我的问题是：

1.  如果用户单击`back`或`forward`浏览器按钮，它将显示一个提示框或小窗口，说明：

    > 创建评估时您不应该离开此页面，如果您想离开该页面，那么您将返回“菜单”页面并丢失此考试的所有详细信息。点击下面的这个链接：
    > 
    > 休假评估
    > 
    > 如果您想继续创建当前评估，请单击以下链接：
    > 
    > 继续评估

2.  如果用户在任何一个评估创建页面上`Text1.php, Text2.php OR Text3.php`，并且用户尝试更改 url 中的网址以访问另一个页面，则将显示相同的窗口或提示框或更高版本。

`Continue Assessment`我的问题是，如果在使用 url 或浏览器按钮时显示该框，然后如果用户单击或导航到`menu.php`如果用户单击`Leave Assessment`链接，则能够停留在当前页面上。有人可以提供如何实现这一目标的样本吗？我需要它在所有主要浏览器中工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:40:07.447

您可以在会话中设置服务器端 cookie（PHP 可以很好地处理它），例如，一个包含仍然可以使用的页面的数组和一个包含已经看到的页面的数组。

然后，每次加载页面时（您可以将其放在包含文件中），您的脚本会验证（服务器端）用户在评估中的最后一个页面，如果用户尝试返回，那么您的脚本会通知：'你不能回去评估”。

使用 JavaScript，您可以在 onclick 事件之后继续处理之前向用户发出您需要的警告。

交易是： - 在会话中存储用户标识 - 附加一个带有页面状态的数组或一个指示唯一可能的下一页的“ponter”。所以：当第 1 页加载时，指针存储“page2”字符串，以及初始验证永远不会让用户再次加载第 1 页或第 3 页等等。- 就这样。

对不起英语。不是美国人。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:14:28.597

您可以使用这个弹出一个带有确定和取消按钮的对话框 -

```
window.onbeforeunload= 'Your text here'; 
```

您不能放置按钮（离开分配等），因为出于安全原因，浏览器不允许这样做。

w3 标准中未指定 onbeforeunload 事件，因此某些标准严格的浏览器不支持它。众所周知的例子是 Opera。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T01:02:24.173

为什么不设置会话变量

```
$_SESSION['on-page']="page1.php";
if($_SERVER['PHP_SELF']!="page1.php"){ die('Please go back and finish the previous page.'); ?> 
```

类似的东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T21:31:23.223

最方便的浏览器端解决方案似乎是`window.beforeunload`一个，除了我将要描述的内容之外，我建议使用它。

作为 PHP 页面的正常逻辑的一部分，在用户会话中设置他们已经看到当前页面的标志。所以 in `Page1.php`you may set `seen1`， in `Page2.php`you would set`seen2`等等。

现在是重要的部分。在每个脚本的顶部，在设置标志或将任何内容发送回用户之前，检查会话中的标志是否与应有的匹配。因此，例如，在`Page1.php`您期望未设置任何标志时，`Page2.php`您期望`seen1`已设置但未设置`seen2`or `seen3`。

如果标志不匹配，您可以使用标志来确定它们应该在哪个页面上并将它们重定向到那里而不是显示页面。如果你愿意，你可以设置一个会话变量来提醒他们这已经发生（在显示警报后清除它）。

请注意，为了使其正常工作，您必须发送必要的标头等，以防止浏览器或其他任何东西缓存页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T02:15:12.913

你最好的选择是使用 javascripts`onbeforeunload`事件。

```
window.onbeforeunload = function() {

} 
```

# asp.net-mvc - 从asp.net mvc的控制器的视图中显示ViewData

> ID：14150178
> 
> 赞同：0
> 
> 时间：2013-01-04T02:13:10.897
> 
> 标签：asp.net-mvc

我的控制器中有一个动作：

```
public ActionResult ProductSpec()
{
  var pvc = new CMS()
  {
    //blah blah blah
  };
  var count_item = DataContext.GetItemReferences();
  ViewData["ttttt"] = count_item; //8
  return View(pvc);
} 
```

然后我`ViewData["ttttt"]`在我的视图中显示，但结果是`System.Collections.Generic.List1[EWeb.Models.Pro]`.

谁能告诉我如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:15:30.197

尝试：

```
var count_item = DataContext.GetItemReferences().Count; 
```

# vb.net - VB.NET 如何使 1 个子项适用于多个项目？

> ID：14150180
> 
> 赞同：2
> 
> 时间：2013-01-04T02:13:18.517
> 
> 标签：vb.net, vb6, contextmenu

我有一个冗长的上下文菜单，我想为项目添加一些视觉效果（不，我不想制作新的渲染器），所以我只是为其中一个列表项制作了 MouseEnter 和 MouseLeave 事件。现在我想将其扩展到所有上下文菜单项，而不为每个项目创建两个单独的事件......

这是我目前拥有的一个简短示例：

```
Private Sub NewMenuItems_MouseEnter(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles NewMenuItem1.MouseEnter, NewMenuItem2.MouseEnter, etc.
    MenuItem.ForeColor = Color.Red
End Sub

Private Sub NewMenuItems_MouseLeave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles NewMenuItem1.MouseLeave, NewMenuItem2.MouseLeave
    MenuItem.ForeColor = Color.Cyan
End Sub 
```

每个项目唯一不同的是“.Forecolor”之前的内容。我如何使这项工作同时适用于所有项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T02:18:28.207

如果所有实例`MenuItem`都使用相同的事件处理程序，那么您可以使用`sender`参数区分哪个实例实际调用了它，该参数应该引用调用事件的实例。因此，只需`sender`转换为 a `MenuItem`，这就是您要寻找的那个。

请注意，当然，您应该始终小心投射。在这种情况下，您需要确保它只是`MenuItem`调用此处理程序的一个，否则您需要在另一个对象调用它的情况下对强制转换进行一些错误检查/处理。

# jquery - 拖放后更改可拖动元素内容

> ID：14150181
> 
> 赞同：1
> 
> 时间：2013-01-04T02:13:44.280
> 
> 标签：jquery, jquery-ui, drag-and-drop, append

我有 9 个可拖动元素，我想让每个元素中的文本在放置后作为唯一的超链接激活。这需要为每个元素完成，因为它们中的大多数都有不同的文本。

使用 append 并向被删除的元素添加超链接可能更容易，而不是在删除后更改文本。但是附加的超链接对于每个元素都必须是唯一的。有什么想法可以使用以下代码执行此操作吗？

```
<!doctype html>
<html lang="en">
<head>
<title>Assay - Overview</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript">

$(init);

function init() {

    $('#element_1').data( 'number', 1 ).attr( 'id', 'card'+1 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_3').data( 'number', 3 ).attr( 'id', 'card'+3 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_5').data( 'number', 5 ).attr( 'id', 'card'+5 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_7').data( 'number', 7 ).attr( 'id', 'card'+7 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_2').data( 'number', 2 ).attr( 'id', 'card'+2 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

        $('#element_9').data( 'number', 9 ).attr( 'id', 'card'+9 ).draggable( {
      containment: '#content',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );

  // Create the element slots

    $('#slot_1').data( 'number', 1 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_3').data( 'number', 3 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_5').data( 'number', 5 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_7').data( 'number', 7 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_2').data( 'number', 2 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );

        $('#slot_9').data( 'number', 9 ).droppable( {
      accept: '#cardPile div',
      hoverClass: 'hovered',
      drop: handleCardDrop
    } );
}

function handleCardDrop( event, ui ) {
  var slotNumber = $(this).data( 'number' );
  var cardNumber = ui.draggable.data( 'number' );

  if ( slotNumber == cardNumber ) {
    ui.draggable.addClass( 'correct' );
    ui.draggable.draggable( 'disable' );
    $(this).droppable( 'disable' );
    ui.draggable.position( { of: $(this), my: 'left top', at: 'left top' } );
    ui.draggable.draggable( 'option', 'revert', false );
  } 
}
</script>
</head>
<body>
<div id="content">
  <div id="cardPile"> 
  <div id="element_3">Harvest Cells for Virus stock generation</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_9">Freeze Cell Line for long term storage</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_5">Harvest Cells for TCID50</div>
  <div id="element_2">Maintain Cell Line</div>
  <div id="element_7">Harvest Cells for Microneut</div>
  <div id="element_1">Establish Cell Line</div>
  <div id="element_2">Maintain Cell Line</div> 
  </div>
  <div id="cardSlots"> 
  <div id="slot_1" style="position: absolute; left: 797px; top: 223px;"></div>
  <div id="slot_2" style="position: absolute; left: 958px; top: 281px;"></div>
  <div id="slot_3" style="position: absolute; left: 1044px; top: 428px;"></div>
  <div id="slot_2" style="position: absolute; left: 1015px; top: 597px;"></div>
  <div id="slot_5" style="position: absolute; left: 884px; top: 709px;"></div>
  <div id="slot_2" style="position: absolute; left: 712px; top: 708px;"></div>
  <div id="slot_7" style="position: absolute; left: 580px; top: 600px;"></div>
  <div id="slot_2" style="position: absolute; left: 550px; top: 430px;"></div>
  <div id="slot_9" style="position: absolute; left: 637px; top: 281px;"></div> 
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:53:25.277

在 div 上使用：

```
 <div id="element_3" data-link="element_3.html">Harvest Cells for Virus stock generation</div> 
```

接着：

```
ui.draggable.click(function(e) {  
        window.open(ui.draggable.attr('data-link'));
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:36:47.250

如果我理解正确，如果您知道 URL 应该是什么，您可以将其包含在数据属性中，然后使用带有该 HREF 的锚标记包装您的文本。

# java - 我正在尝试通过 jdbc 连接 MySQL db，但代码抛出错误“java.lang.ClassNotFoundException：com.mysql.jdbc.Driver”

> ID：14150182
> 
> 赞同：1
> 
> 时间：2013-01-04T02:14:14.817
> 
> 标签：java, mysql, exception, jdbc

我的代码：

```
public class database_connection {

public static void main(String[] args) throws SQLException {

     Connection conn = null;
      String url = "jdbc:mysql://localhost:3306/";
      String dbName = "mycooldatab";
      String driver = "com.mysql.jdbc.Driver";
      String userName = "root"; 
      String password = "root";  

      try{
          Class.forName(driver).newInstance();// create object of Driver
          conn = DriverManager.getConnection(url+dbName,userName,password);
          // connection will be established

          // *******************Statement******************
          Statement stmt = conn.createStatement();
          ResultSet rs = stmt.executeQuery("select * from student");

        //  rs.next(); // 1st row
        //  System.out.println(rs.getString("name"));

                }  catch(Exception e){
            e.printStackTrace();
      }finally{
          conn.close();
      } 
```

* * *

错误：java.lang.ClassNotFoundException：com.mysql.jdbc.Driver

* * *

我曾尝试将以下行从系统环境变量添加到类路径。

“C:\Program Files (x86)\MySQL\Connector J 5.1.20.0\mysql-connector-java-5.1.20-bin.jar”

但还是不行。我遇到了同样的错误，有人可以找出并提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:22:48.550

我怀疑您的类路径设置正确。

要验证这一点，请将此行添加到您的开头`main()`：

```
 System.out.println("CLASSPATH IS=" + System.getProperty("java.class.path")); 
```

并验证该行中`mysql-connector-java-5.1.20-bin.jar`是否正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:21:47.670

对不起，这是我的错误。

我忘记在我正在使用的 Eclipse 中添加 mysql jar 文件。它工作正常。

# php - 如何在测试开始时避免额外的 HTTP 请求？

> ID：14150192
> 
> 赞同：4
> 
> 时间：2013-01-04T02:15:13.210
> 
> 标签：php, testing, selenium, phpunit, selenium-webdriver

假设我有一个这样的测试：

```
class SortTest extends PHPUnit_Extensions_Selenium2TestCase
{
    public function setUp()
    {
        $this->setHost('192.168.1.1');
        $this->setBrowserUrl('http://some.url/');
        $this->setBrowser('chrome');
    }

    public function testFoo()
    {
        $this->url('/foo');
    }

    public function testBar()
    {
        $this->url('/bar');
    }
} 
```

如果我运行这个测试，我会看到每次加载根页面，然后打开所需的`/foo`or `/bar`。

如果我注释掉或将`setBrowserUrl()`调用移至测试方法 - 我得到`Undefined index: browserUrl`

那么有没有办法避免在测试方法设置上出现多余的 HTTP 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:28:59.887

> 那么有没有办法避免在测试方法设置上出现多余的 HTTP 请求

通过将浏览器 url 设置为空字符串`$this->setBrowserUrl('');`，但它要求所有其他 url 都是绝对的`$this->url('http://some.url/foo');`这不会阻止 selenium 尝试访问空 url，但会使其更快，尤其是在起始页很重的情况下

# c - C中的指针转换和“免费”

> ID：14150202
> 
> 赞同：0
> 
> 时间：2013-01-04T02:16:23.503
> 
> 标签：c, pointers, free

给定以下代码：

```
RTIME *rtCreate(void)
{
    RTIME *rtime;

    rtime = malloc(sizeof(*rtime));

    if (rtime != NULL)
    {
        /* Initialization stuff */
    }

    return rtime;
}

void rtDestroy(RTIME **rtime)
{
    if (*rtime != NULL)
    {
        free(*rtime);
        *rtime = NULL;
    }
} 
```

什么会导致 GCC 抱怨“传递 'free' 的参数 1 会丢弃指针目标类型的限定符”？我知道没有必要强制转换 malloc 的结果（如此处所讨论[的](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)），因为指向 void 的指针会自动转换为正确的类型。那么为什么编译器似乎暗示我必须`*rtime`在它被释放之前强制转换？

编辑：- RTIME 定义如下。

```
typedef struct RTIME
{
    uint8 Sec;
    uint8 Min;
    uint8 Hour;
    uint8 DayOfWeek;
    uint8 DayOfMonth;
    uint16 DayOfYear;
    uint8 Month;
    uint16 Year;
} volatile RTIME; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:45:30.950

获取您的代码并从中制作[SSCCE](http://sscce.org/)，如下所示：

```
#include <stdlib.h>

struct RTIME { int a; int b; };
typedef const struct RTIME RTIME;

RTIME *rtCreate(void)
{
    RTIME *rtime;

    rtime = malloc(sizeof(*rtime));

    if (rtime != NULL)
    {
        /* Initialization stuff */
    }

    return rtime;
}

void rtDestroy(RTIME **rtime)
{
    if (*rtime != NULL)
    {
        free(*rtime);
        *rtime = NULL;
    }
} 
```

使用 GCC 4.7.1 和命令行编译：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -c mf.c
mf.c:6:8: warning: no previous prototype for ‘rtCreate’ [-Wmissing-prototypes]
mf.c:20:6: warning: no previous prototype for ‘rtDestroy’ [-Wmissing-prototypes]
mf.c: In function ‘rtDestroy’:
mf.c:24:9: warning: passing argument 1 of ‘free’ discards ‘const’ qualifier from pointer target type [enabled by default]
In file included from mf.c:1:0:
/usr/include/stdlib.h:160:7: note: expected ‘void *’ but argument is of type ‘const struct RTIME *’
$ 
```

省略`const`并且您只会收到有关缺少原型的（有效）警告。

我猜你正在使用旧版本的 GCC（因为旧版本不包含该`note:`行中的额外信息），并且不知何故你的`typedef`for`RTIME`包含一个`const`.

作为一般规则，您不需要`const`a `typedef`，但该规则肯定会有例外。

* * *

从编辑过的问题中可以看出，限定词是`volatile`而不是`const`. 当`typedef`我的示例代码更改时，GCC 4.7.1 说：

```
mf.c:6:8: warning: no previous prototype for ‘rtCreate’ [-Wmissing-prototypes]
mf.c:20:6: warning: no previous prototype for ‘rtDestroy’ [-Wmissing-prototypes]
mf.c: In function ‘rtDestroy’:
mf.c:24:9: warning: passing argument 1 of ‘free’ discards ‘volatile’ qualifier from pointer target type [enabled by default]
In file included from mf.c:1:0:
/usr/include/stdlib.h:160:7: note: expected ‘void *’ but argument is of type ‘volatile struct RTIME *’ 
```

当我使用系统 GCC 编译时，我得到一个更简单、不太精确的错误消息：

```
mf.c:7: warning: no previous prototype for ‘rtCreate’
mf.c:21: warning: no previous prototype for ‘rtDestroy’
mf.c: In function ‘rtDestroy’:
mf.c:24: warning: passing argument 1 of ‘free’ discards qualifiers from pointer target type 
```

这是来自 Apple 的 GCC：

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

因此，限定词是`volatile`而不是`const`.

* * *

尝试升级到 GCC 4.7.x 的一个很好的理由是错误消息比早期版本有了很大改进。改进的消息也在 4.6.0 中；4.5.2 中的消息是较旧的样式，信息量较少的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:51:44.377

问题在于`volatile`属性 - `free`gets `void *`，它不是易失性的，因此您不能将`RTIME`（易失性）传递给它。

您应该问自己为什么要使用`volatile`。这个限定词经常被误解。
在我见过的许多情况下，`volatile`它要么用于解决不存在的问题，要么用于解决即使您使用它仍然存在的问题（最常见的是竞争条件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:45:01.827

我建议你重写你的`rtDestroy()`函数如下。似乎 GCC 看到了指向指针的指针的取消引用，并将其视为可能的错误来源。

您似乎想要释放分配的内存，然后将指针设置为 NULL，以便轻松检测指针不再有效。但是，通过执行您正在执行的操作，该`free()`函数将通过编译器无法检查的重定向获得要释放的内存地址。

因此，如果您将 *rtime 指向的地址分配给局部变量，然后将其传递给 free() 函数，编译器检查应该通过。对于某些类型的源构造，这似乎是一个相当常见的警告。当变量需要 const 修饰符并且未指定时，这似乎是最常见的。请参阅此示例[Initialization 从指针目标类型中丢弃限定符](https://stackoverflow.com/questions/2316387/initialization-discards-qualifiers-from-pointer-target-type)。

```
void rtDestroy(RTIME **rtime)
{
    RTIME *pTemp = *rtime;

    if (*rtime != NULL)
    {
        free(pTemp);
        *rtime = NULL;
    }
} 
```

**编辑：** 似乎 RTIME 是一种变量类型，包含以纳秒为单位的硬件时间滴答或类似的东西。除非使用的函数提供指向只读操作系统内存区域的指针，否则不确定为什么它会是 const。

我建议没有真正需要分配内存，而是使用堆栈上的变量并使用适当的函数来检索无论如何都会改变的当前值。

`RTIME *pTemp = *rtime;`但是，如果 RTIME 涉及 const，那么您可以尝试使用而不是使用，`void *pTemp = (void *) (*rtime);`那么我希望这只会将警告放在该行上。Jonathan Leffler（见下面的评论）报告说，他发现我上面建议的更改存在相同的错误。

请参阅这篇[文章实时 Linux II](http://www.linuxfocus.org/English/July1998/article56.html)。

# requirejs - 是否可以将requirejs模块转换为commonjs？

> ID：14150203
> 
> 赞同：9
> 
> 时间：2013-01-04T02:16:24.753
> 
> 标签：requirejs, commonjs

已经[可以将 commonjs 模块转换为 requirejs](http://requirejs.org/docs/commonjs.html#autoconversion)，但我仍然想知道是否可以反过来。有什么方法可以将 requireJS 模块转换为 commonJS，而不是反之亦然？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T13:16:12.403

手动应该可以的。

一个**require.js**模块看起来像：

```
define('module', ['dep1', 'dep2'], function(dep1, dep2) {
   return myFunction = function() {
   };

}); 
```

导出到**CommonJs 模块**应该不会太难：

```
var dep1 = require('dep1');
var dep2 = require('dep1');

exports.myFunction = function() {
}; 
```

您不必返回一个函数，它也可以是一个对象：

```
define('module', ['dep1', 'dep2'], function(dep1, dep2) {
   return {
     myFunction1: function() {
     },
     myFunction2: function() {
     }
   };

}); 
```

...

```
var dep1 = require('dep1');
var dep2 = require('dep1');

exports.myObject = {
     myFunction1: function() {
     },
     myFunction2: function() {
     }
}; 
```

**编辑：** [转换](https://stackoverflow.com/a/14158029/1916258)也是可能的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-30T21:46:50.793

是的，如果您使用[uRequire](http://github.com/anodynos/urequire)是可能的，这是我专门为 javascript 模块格式转换编写的工具 - *AMD/Requirejs* --> *commonjs/nodejs*并返回（加上更多）。

这似乎是一个微不足道的 AST 操作和依赖关系解析@start，但除了语法之外，模块格式在许多方面都不**兼容：**

*   **依赖/路径解析**：commonjs 使用 fileRelative（例如 '../PersonModel'），而 AMD 也可以使用 package-relative（例如 'Models/PersonModel'）

*   **执行环境**：commonJs 模块是同步加载的，而 AMD 是异步加载的（AMD 也有异步`require`版本`require(['dep1', dep2'], function(dep1, dep2){})`，主要针对浏览器）。

这些也是其他差异（例如 AMD 加载程序插件），但一般来说，每个人都以这种格式“锁定”你。.

uRequire 使您能够在 AMD 或 commonJS 中编写并轻松转换为其他（或转换为 UMD），因此无需样板即可享受模块化 Javascript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T13:23:33.050

是的，有可能。包括 Sound Cloud 在内的许多网站都开发了自己的转换工具。

Mozilla 开发了一个不错的小模块，称为 SweetJS。基本上允许您在 JavaScript 中定义宏。要在 Node.js 中使用，您需要使用它的二进制文件来实际使用宏，因为它在运行时不可用。

[http://sweetjs.org/](http://sweetjs.org/)

**编辑：**

Ember.js 的开发者之一 Yehuda[发布了一个转译器模块。](https://github.com/wycats/js_module_transpiler)

它是用 Ruby 编写的，而不是 JavaScript，但也许有人会将它转换过来。尽管如此，您可以通过 fork 一个 ruby​​ 进程在 Node.js 中使用它。

# javascript - JQuery Cascade函数在更改事件后没有立即触发

> ID：14150205
> 
> 赞同：1
> 
> 时间：2013-01-04T02:16:44.797
> 
> 标签：javascript, jquery, model-view-controller, asp.net-mvc-4

Ajax.BeginForm 提交后，下拉列表级联更改（）不会立即触发。

生成新 DropDownList 的视图：

```
@model Heelp.ViewModels.CreateAdCategoryTypeViewModel
@using (Ajax.BeginForm(MVC.Ad.CreateAd(), new AjaxOptions { UpdateTargetId = "ad", InsertionMode = InsertionMode.Replace }, new { @id = "categoryTypeForm" }))
{
    @Html.HiddenFor(m => m.Category_Id)

    @Html.DisplayNameFor(m => m.CategoryType_Id)
    @Html.DropDownListFor(m => m.CategoryType_Id, Model.CategoryList, HeelpResources.DropdownlistCategoryFirstRecord)
    @Html.ValidationMessageFor(m => m.CategoryType_Id)
} 
```

sumbit 后，生成的 View 为：

```
@model Heelp.ViewModels.CreateAdCarViewModel

@using (Html.BeginForm()) {

<fieldset>
    <legend>Car</legend>

   <div id="makes">
        @Html.DisplayNameFor(m => m.Make_Id)
        @Html.DropDownListFor(m => m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)
        @Html.ValidationMessageFor(m => m.Make_Id)
    </div>
    <div id="models">
        @Html.DisplayNameFor(m => m.Model_Id)
        @Html.DropDownListFor(m => m.Model_Id, Model.ModelList)
        @Html.ValidationMessageFor(m => m.Model_Id)
    </div>        
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

此时我有一个级联函数在进行更改以填充模型列表时触发：

```
$(document).ready(function () {
    $(document).on("change", "#Make_Id", function () {
        $('#Make_Id').cascade({
            source: "/Ad/ListModelByMake",
            cascaded: "Model_Id"
        });
    });
}); 
```

级联功能：

```
// Cascade function
(function ($) {
$.fn.cascade = function (options) {
    var defaults = {};
    var opts = $.extend(defaults, options);

    return this.each(function () {
        $(this).change(function () {
            var selectedValue = $(this).val();
            var params = {};
            params[opts.paramName] = selectedValue;
            $.post(opts.url, params, function (items) {
                //$.getJSON(opts.url, params, function (items) {
                opts.childSelect.empty();
                if (opts.firstOption != "")
                    opts.childSelect.append(
                        $('<option/>')
                            .attr('value', '-1')
                            .text(opts.firstOption));
                $.each(items, function (index, item) {
                    // alert(opts.firstOption);
                    opts.childSelect.append(
                        $('<option/>')
                            .attr('value', item.Id)
                            .text(item.Name)
                    );
                });
            });
        });
    });
};
})(jQuery); 
```

不幸的是，它仅在 Makes Dropdownlist 上的第二次更改后才有效，知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:25:47.083

不要使用更改处理程序来启动插件。插件代码将更改处理程序绑定到元素。

由于您在更改处理程序中调用插件，因此插件的更改处理程序将在下一次更改选择之前不会触发，因为初始更改事件已经发生。

将代码更改为：

```
$(document).ready(function () {   
        $('#Make_Id').cascade({
            source: "/Ad/ListModelByMake",
            cascaded: "Model_Id"
        });   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:55:59.807

感谢 Charlietfi，我能够解决这个问题，这里是解决方案：

在 Ajax.Form 中，我们需要添加一个 OnSucess 调用来定义级联函数：

```
@using (Ajax.BeginForm(MVC.Ad.CreateAd(), new AjaxOptions { UpdateTargetId = "ad", InsertionMode = InsertionMode.Replace, OnSuccess = "createAdCategoryTypeOnSucess" }, new { @id = "categoryTypeForm" })) 
```

然后在一个外部的JS文件中，我们可以定义级联定义：

```
function createAdCategoryTypeOnSucess() 
{
    $("#Make_Id").cascade({
        url: "/Ad/ListModelByMake",
        paramName: "makeId",
        firstOption: '',
        childSelect: $("#Model_Id")
    });
} 
```

像这样，该事件在下拉更改后立即触发。

再次感谢 charlietfl ;)

# java - Java/MySQL 循环...卡住了？

> ID：14150208
> 
> 赞同：0
> 
> 时间：2013-01-04T02:17:34.333
> 
> 标签：java, mysql, loops

我真的不知道发生了什么，所以我将发布部分代码

```
 int index2 = 0;

    while(rs.next()){
        System.out.println(rs.getInt("ItemID") + ", " + rs.getString("SocSecNum") + ", " + rs.getInt("Score"));

        if(rs.getInt("ItemID") == ID && rs.getString("SocSecNum").equals(socSecNum)){
            alreadySet = true;
            System.out.println("Flag 1");
            caq.executeUpdate("UPDATE ProjectScore SET Score = " + userScoreField.getText() +
                    " WHERE (ItemID = " + ID + ") AND (SocSecNum = '" + socSecNum + "')");
        }

        index2++;
        System.out.println(index2);
    }

    System.out.println("Flag 2"); 
```

看起来它会工作是吗？这是输出：

1, 640730-7419, 3

标志 1

1

这意味着 while 循环以某种方式被卡住但没有额外的输出（索引 2）。此外，数据库完全按照应有的方式更新，但程序没有从这里开始，并且“标志 2”永远不会写出。有任何想法吗？

编辑：

```
catch (SQLException e1) {
                    System.out.println(e1.getMessage());
                    System.out.println(e1.getCause());
                } 
```

给

ResultSet 关闭后不允许操作

无效的

编辑2：

这是用于使其工作的代码

```
 PreparedStatement statement = caq.getConnection().prepareStatement("SELECT * FROM ProjectScore WHERE SocSecNum = '"
    + socSecNum + "'", ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
    rs  = statement.executeQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:37:38.720

您可以尝试而不是`caq.executeUpdate` `connection.prepareStatement().executeUpdate()` 我假设`caq.executeUpdate`会导致先前返回的 ResultSet 对象关闭。

似乎还有一种方法可以在 Statement `ResultSet.CONCUR_UPDATABLE`
[http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement(java.lang.String,int,int](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement(java.lang.String,int,int)中设置并发级别)

# c++ - 使用 DirectShow 捕捉数字电视时遇到问题

> ID：14150210
> 
> 赞同：1
> 
> 时间：2013-01-04T02:17:41.967
> 
> 标签：c++, directshow, capture, bda

我有一个 YUAN MC570QA ATSC/Analog Hybrid Tuner 设备，我可以打开设备来捕获模拟，但我找不到任何参考或源代码来显示如何打开数字调谐器。如果我使用 CLSID_VideoInputDeviceCategory 枚举设备，我只会看到 DibCom BDA 数字调谐器（Dev1 Path2），但是设备随附的软件列表：

DibCom BDA 模拟调谐器（Dev1 Path2） DibCom BDA 数字调谐器（Dev1 Path0） DibCom BDA 数字调谐器（Dev1 Path1）

我将不胜感激让 DirectShow 在数字调谐器上捕获频道的任何指示。

我会列出我的 c++ 代码，但我不确定我是否应该将数字调谐器作为设备打开，或者我是否应该通过另一个接口以某种方式访问​​调谐器 - 不确定在此处列出哪个代码部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:41:08.133

对于 DVB，您必须[在 Directshow 中使用 BDA](https://msdn.microsoft.com/en-us/library/windows/desktop/dd695354(v=vs.85).aspx)。这不像模拟捕捉那么简单。例如，您必须在连接整个图之前提交调整请求。sdk 中的某处应该有一个 DTVViewer 示例。我真的认为你需要看看这个例子。也许我之前发布的[这段代码也可能有所帮助。](https://stackoverflow.com/a/4280973/33499)

我发现[这个](https://i.stack.imgur.com/0kmdF.png)例子 BDA 图应该是什么样子（[来源](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/a5dd55de-e475-46ed-88b2-876823ba77f2/)）。

# objective-c - 构建 xcode 项目时出错，此标头仅支持 __MWER

> ID：14150214
> 
> 赞同：0
> 
> 时间：2013-01-04T02:18:41.467
> 
> 标签：objective-c, ios, compiler-errors, header-files

> **可能重复：**
> [stdarg.h 在哪里？](https://stackoverflow.com/questions/6712493/where-is-stdarg-h)

构建我的 xcode 项目时出现以下错误：

![在此处输入图像描述](../Images/9895ad3c92764cbbda5c84106d5f3ee3.png)

知道为什么以及如何解决它吗？

# clojure - ClojureScript 中的模板

> ID：14150215
> 
> 赞同：6
> 
> 时间：2013-01-04T02:18:50.530
> 
> 标签：clojure, clojurescript, client-side-templating

我想使用 ClojureScript 制作“单页”风格的网络应用程序。为此，我需要一个客户端模板系统。有人对我应该研究哪些 ClojureScript 模板系统有任何经验和/或建议吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:32:47.157

你可以看看[dommy](https://github.com/prismatic/dommy)，一个由 Prismatic 编写/使用的模板系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:58:39.543

我发现[crate](https://github.com/ibdknox/crate)很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-16T16:59:34.957

在使用过 Crate 和 Dommy 之后，我可以说它们都非常好。Crate 只是从 Clojure 转换为 Clojurescript 用于模板的 Hiccup 的实现，因此您仍然需要使用 Domina 来选择元素。如果您想要一个同时处理 DOM 选择和模板的框架，请使用 Dommy

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-12T20:51:43.493

我知道 Clojurescript 的三种模板风格：

1.  Dommy：直接从 cljs 代码创建和操作 DOM 节点。
2.  Crate：声明和操作 cljs 数据（向量、地图等），然后将其转换为 DOM 节点。
3.  [Enfocus](https://github.com/ckirkendall/enfocus)：在 HTML 文件中编写 HTML，处理它们并从 cljs 转换它们。它是一种不同的模板思维方式，它基于 clj 库 Enlive。

有一些库可以生成 React DOM 节点而不是普通的 DOM 节点，但它们的工作方式与上面提到的相同：

1.  任何 Cljs React 包装器，例如 Om 或 Reagent
2.  萨布洛诺
3.  基欧

我知道你只是要求模板，而 React 提供的不止这些，但如果你需要除了最基本的操作之外的任何东西，我会推荐任何基于 React 的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-19T08:41:41.360

因为到目前为止还没有提到：我真的很喜欢[Hoplon](http://hoplon.io/)。它结合了以下工具集：

> *   自定义 HTML 元素是常规函数，可以使用[HLisp](https://github.com/hoplon/hoplon/wiki/HLisp)创建和组合功能。
> *   带有[Javelin](https://github.com/hoplon/javelin) ClojureScript 库的类似电子表格的数据流。使用单元格和公式直观地模拟反应行为。
> *   [使用Castra](https://github.com/hoplon/castra) Clojure 和 ClojureScript 库与服务器交互。在服务器上定义函数，从客户端调用它们。

您可以将其用作全栈解决方案，也可以仅在客户端使用它。给你一个印象（取自[GitHub](https://github.com/hoplon/hoplon#example)）：

```
(page "index.html")

(defn my-list [& items]
  (div
    :class "my-list"
    (apply ul (map #(li (div :class "my-list-item" %)) items))))

(def clicks (cell 0))

(html
  (head
    (title "example page"))
  (body
    (h1 "Hello, Hoplon")

    (my-list
      (span "first thing")
      (span "second thing"))

    (p (text "You've clicked ~{clicks} times, so far."))
    (button :click #(swap! clicks inc) "click me"))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-13T11:39:08.583

除了您已经收到的答案之外，我建议您查看基于[React](http://facebook.github.io/react/)的系统，例如[Om](https://github.com/swannodette/om)、[Reagent](http://reagent-project.github.io)或[Quiescent](https://github.com/levand/quiescent)。在这三个中，我个人最喜欢的是 Reagent，但其中任何一个都是对传统 DOM 操作恕我直言的改进。

# javascript - 在 Bootstrap 的 Typeahead 中添加标签、值和图片

> ID：14150216
> 
> 赞同：10
> 
> 时间：2013-01-04T02:19:02.113
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在玩[Typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)，我想弄清楚是否有办法在搜索查询中显示图片和标签？就像我们尝试在推文上提及用户时 Twitter 的做法一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T12:48:55.143

在做了一些研究并把我几乎所有的头发都拉出来之后，我终于想出了如何将全名、图像和用户名添加到像 twitter 这样的预输入中。

可以说这是您的源的每个对象的以下结构，

```
{{ friend.id }}#{{ friend.username }}#{{ friend.imgurl }}#{{ friend.fullname }} 
```

然后你所要做的就是写一个漂亮的荧光笔，像这样

```
highlighter: function(item) {
              var parts = item.split('#'),
              html = '<div class="typeahead">';
              html += '<div class="media"><a class="pull-left" href="#"><img src='+parts[2]+' /></a>'
              html += '<div class="media-body">';
              html += '<p class="media-heading">'+parts[3]+' (@'+parts[1]+')'+'</p>';
              html += '</div>';
              html += '</div>';
              return html;
            }, 
```

这将在 Typeahead 中轻松添加图片、全名和用户名。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-11T19:25:13.917

荧光笔不再工作了。

使用**模板**，例如：

```
var my_friends = [
     {name: "John", picture: "http://..."}
    ,{name: "Mel", picture: "http://..."}
];

var friends = new Bloodhound({
  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
  queryTokenizer: Bloodhound.tokenizers.whitespace,
  local: my_friends
});
friends.initialize();
$('#friend_name').typeahead(
    {
        hint: true,
        highlight: true,
        minLength: 1,
    },
    {
        name: 'friends',
        displayKey: 'name',
        source: friends.ttAdapter(),
        templates: {
            empty: 'not found', //optional
            suggestion: function(el){return '<img src="'+el.picture+'" />'+el.name}
        }
    }
); 
```

来源：[https ://gist.github.com/jharding/9458780#file-custom-templates-js](https://gist.github.com/jharding/9458780#file-custom-templates-js)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-04T17:11:04.323

[您可能会发现使用http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)而不是尝试自定义默认的垃圾引导程序更容易/更好！

如果您在该页面上搜索模板，您会找到它 - 它看起来像这样：

![在此处输入图像描述](../Images/245d76ab63338515b5f096c5390f5b0f.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-25T11:50:20.307

您可以尝试使用以下自定义代码来呈现包含 JSON 模式的图像。

请按照[此处的小提琴链接](http://jsfiddle.net/Shobhit_Sharma/vC4rd/)进行实施和测试。

预输入看起来像：

```
 $(".typeahead").typeahead({
    source: function (query, process) {

        //here we pass the query (search) and process callback arguments to the throttled function
        throttledRequest(query, process);

    },
    highlighter: function (item) {
        var test = testObjs[item];

        return '<div class="test">' + '<img src="' + test.photo + '" />' + '<br/><strong>' + test.name + '</strong>' + '</div>';
    },
    updater: function (selectedName) {

        //note that the "selectedName" has nothing to do with the markup provided
        //by the highlighter function. It corresponds to the array of names
        //that we sent from the source function.

        //save the id value into the hidden field
        $("#testId").val(testObjs[selectedName].id);

        //return the string you want to go into the textbox (the name)
        return selectedName;
    }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-25T10:43:14.083

```
typeahead.initialize();
var typeahead = {

    typeaheadInit: function() {
        var jsonData = [{
            'id': 1,
            'name': 'Parajanov Museum',
            'image': 'img/1.png'
        }, {
            'id': 2,
            'name': 'Parajanov’s Movie',
            'image': 'img/2.png'
        }, {
            'id': 3,
            'name': 'S Parajanov’s about his series of Giocondas',
            'image': 'img/3.png'
        }, {
            'id': 4,
            'name': 'S Parajanov’s about the colore of pomegranate',
            'image': 'img/4.png'
        }, {
            'id': 5,
            'name': 'George Michael',
            'image': 'img/5.png'
        }];

        var productNames = [];
        $.each(jsonData, function(index, product) {
            productNames.push(product.name + "#" + product.image + "#" + product.id);
        });
        $('#typeahead').typeahead({
            source: productNames,
            highlighter: function(item) {
                var parts = item.split('#'),
                    html = '<div><div class="typeahead-inner" id="' + parts[2] + '">';
                html += '<div class="item-img" style="background-image: url(' + parts[1] + ')"></div>';
                html += '<div class="item-body">';
                html += '<p class="item-heading">' + parts[0] + '</p>';
                html += '</div>';
                html += '</div></div>';

                var query = this.query;
                var reEscQuery = query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
                var reQuery = new RegExp('(' + reEscQuery + ')', "gi");
                var jElem = $(html);
                var textNodes = $(jElem.find('*')).add(jElem).contents().filter(function() {
                    return this.nodeType === 3;
                });
                textNodes.replaceWith(function() {
                    return $(this).text().replace(reQuery, '<strong>$1</strong>');
                });

                return jElem.html();
            },
            updater: function(selectedName) {
                var name = selectedName.split('#')[0];
                return name;
            }
        });
    },

    initialize: function() {
        var _this = this;
        _this.typeaheadInit();
    }
}; 
```

来源：[https ://jsfiddle.net/geghamk/59eranrc/3/](https://jsfiddle.net/geghamk/59eranrc/3/)

# php - 通过 mamp 在本地安装 wordpress 时出现奇怪的编辑器行为

> ID：14150218
> 
> 赞同：-1
> 
> 时间：2013-01-04T02:19:56.680
> 
> 标签：php, mysql, macos, wordpress, mamp

我最近在我的 Mac (10.7.5) 上安装了一个正在进行的 wordpress.org 博客的本地版本，虽然我按照[这里](http://codex.wordpress.org/Installing_WordPress_Locally_on_Your_Mac_With_MAMP)的教程进行操作，但我无法正确显示帖子或页面编辑视图。我曾尝试在我的机器上重新安装 wordpress 几次，然后将博客的实时版本拉起以将编辑器样式表（我目前对问题的猜测）与本地版本进行比较，并没有发现任何差异。然后我花了下午的大部分时间试图看看是否有其他人遇到过这个问题，并且在 wordpress.org 论坛或 MAMP 中没有看到提及它。我使用的是最新版本的 wordpress，并且全新安装了 MAMP。有什么我忽略的想法吗？无论我做什么，它看起来都是这样的：

![在此处输入图像描述](../Images/a61ef8689096d947830c231da521aa6d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:59:36.280

如果您已正确安装了 wordpress，请参考 [此](http://codex.wordpress.org/Installing_WordPress_Locally_on_Your_Mac_With_MAMP)链接。试试这些解决方案[链接](http://wordpress.org/search/dash+board+not+displayed+properly?forums=1)

# java - JTidy doctype 错误块解析

> ID：14150220
> 
> 赞同：0
> 
> 时间：2013-01-04T02:20:32.287
> 
> 标签：java, jtidy

我一直在尝试使用 JTidy 抓取一些在线内容，但我遇到了这个烦人的错误，我不知道如何修复它或让 JTidy 忽略它：

```
InputStream: Doctype given is "-//W3C//DTD XHTML 1.0 Transitional//EN"
InputStream: Document content looks like XHTML 1.0 Transitional
630 warnings, 1 error were found!
This document has errors that must be fixed before
using HTML Tidy to generate a tidied up version. 
```

这似乎是一个愚蠢的错误 - 并且没有其他错误，所以这似乎是阻止 JTidy 解析文档的错误。我直接从 HttpURLConnection 的 InputStream 解析它，并且我使用 Tidy.parseDom 方法。

# java - 如何向 JApplet 添加一个点？

> ID：14150221
> 
> 赞同：-5
> 
> 时间：2013-01-04T02:20:55.220
> 
> 标签：java, eclipse, swing, japplet

我正在尝试在我的 JApplet 中添加一个点，并且一直在搜索 google 和 yahoo 以寻求无济于事的答案。每当我这样做

```
public class Chaos
{
  Point p = new Point(75, 25);
  public void frame()
  {
    JApplet applet = new JApplet
    applet.add(p); //error on this line
  }
} 
```

Eclipse 说“容器类型中的方法 add(Component) 不适用于参数 (Point) 这对某些人来说似乎是一个明显的问题，我对 Java 比较陌生/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:35:37.387

一些基本规则：

*   您可以合法调用变量的唯一方法是变量可用的方法。
*   对于核心 Java 类，例如 JApplets，这些方法在 Java API 中得到了很好的定义。
*   如果您在 API 中查找 JApplet 及其所有父类，您会发现没有 add 方法，`add(Point p)`它接受一个 Point 参数，因此编译器抱怨是正确的。
*   您对这个问题的主要问题是您告诉我们问题，但您没有告诉我们您要解决的问题。正如我在上面的评论中所说，“向 JApplet 添加一个点”没有逻辑意义。你希望小程序用这​​个点做什么？改变是位置？在它的窗口上画一个点？这些细节将改变您可用的可能解决方案，在我们知道之前，我们只能告诉您一般规则，例如我在这篇文章中列出的规则。
*   如果您的目标是在 JApplet 上绘图，则改为在 JPanel 的`paintComponent(...)`方法中进行绘图，然后将该 JPanel 设为 JApplet 的 contentPane。有几个不错的教程将向您展示如何做到这一点。
*   不要使用 Applet 或直接使用`paint(...)`另一张海报所建议的绘图，因为您会失去 Swing 图形的所有好处，包括当您想要制作动画时的自动双缓冲。
*   根据 Andrew Thompson 的说法，Swing Graphics 还为您提供：键绑定、表格、树和格式化文本组件、PLAF、一些布局、访问千年以来使用它的人。
*   这是一个使用 JApplet 绘图的示例：[示例](https://stackoverflow.com/a/9504941/522444)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:39:48.260

那是因为您只能将[`Component`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html)派生类实例添加到 a `JApplet`（尽管[`JComponent`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)如果您使用的是添加派生实例更可取 a `JApplet`）。Eclipse 在您的代码中指出了一个语义错误，因为数据类型（`add`方法的预期类型和您作为参数传递的变量类型）不匹配。

如果你想在小程序中**画**一个点，你必须在你的代码中重写小程序的`paint`方法并画一条一像素长的线（或一像素大小的矩形）。像这样的东西：

```
import java.awt.*;
import javax.swing.JApplet;

public class test extends JApplet {
    @Override
    public void paint(Graphics g) {
        int x = 75;
        int y = 75;
        g.fillRect(x, y, 1, 1);
    }   
} 
```

如果您打算在画布上添加几个点，请将 then 存储在一个列表中，然后在`paint`上面的方法中迭代和绘制：

```
public class test extends JApplet {
    private List<Point2D> points;

    @Override
    public void init() {
        points = new ArrayList<Point2D>();
        points.add(new Point2D.Double(75.0, 75.0));
    };

    @Override
    public void paint(Graphics g) {
        g.setColor(Color.BLUE);
        for (Point2D p : points) {
            int x = (int) p.getX();
            int y = (int) p.getY();
            g.fillRect(x, y, 1, 1);
        }
    } 
} 
```

如果您真的想将您的点视为[`Component`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html)s，那么您可以创建自己的自定义 Point 类，该类派生自[`JComponent`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)现有类之一（如[`JPanel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)），但这更复杂。

# jquery - IE 上的 Fancybox 和 Jcrop

> ID：14150226
> 
> 赞同：0
> 
> 时间：2013-01-04T02:21:39.790
> 
> 标签：jquery, internet-explorer, fancybox, jcrop

除了 Internet Explorer (IE) 之外，Jcrop 在所有 Web 浏览器上都可以与 fancybox 配合使用。裁剪工具似乎不可移动。有什么解决办法吗？谢谢。

花式盒代码：

```
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="source/jquery.fancybox.js?v=2.1.3"></script>
<link rel="stylesheet" type="text/css" href="source/jquery.fancybox.css?v=2.1.2" media="screen" />

<script type="text/javascript">
    $(document).ready(function() {
        $(".various").fancybox({
            maxWidth    : 800,
            maxHeight   : 600,
            fitToView   : false,
            width       : '90%',
            height      : '90%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            afterClose : function() {
                location.reload();
                return;
            }
        });
    });
</script>
<style type="text/css">
    .fancybox-custom .fancybox-skin {
        box-shadow: 0 0 50px #222;
    }
</style>
<!-- --> 
```

HTML/PHP 代码：

```
"<td align='center'><a class='various' data-fancybox-type='iframe' href='see-instalaciones.php?id=$record[id]'>[Actualizar]</a></td>". 
```

完整的crop.php代码：

```
 <?php
$pageis = $_GET['pageis'];
$first = $_GET['first'];
$second = $_GET['second'];
$third = $_GET['third'];

// db class stuff
require("../../db/config.inc.php");
require("../../db/Database.class.php");

    $folder = '../../images/instalaciones/';
    $filename = $_GET['filename'];
    //$orig_w = 500;
    //$orig_h = $_GET['height'];
    $orig_w = 600;
    $orig_h = $_GET['height'];

    $targ_w = 241;
    $targ_h = 320;

    $ratio = $targ_w / $targ_h;

    if( isset($_POST['submit']))
    {   
        $src = imagecreatefromjpeg($folder.$filename);

        $tmp = imagecreatetruecolor($targ_w, $targ_h);
        imagecopyresampled($tmp, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);
        imagejpeg($tmp, $folder.'lg_'.$filename,100);

        imagedestroy($tmp);
        //imagedestroy($src);

        //echo "<p><a href='index.php'>Back</a></p>";
        //echo "<h1>Saved Lg image</h1><img src=\"$folder/lg_$filename\"/>";

        // get thumb image
        /*
        $targ_w = 115;
        $targ_h = 83;

        $tmp1=imagecreatetruecolor($targ_w,$targ_h);
        imagecopyresampled($tmp1, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);

        imagejpeg($tmp1,$folder.'th_'.$filename,100);

        imagedestroy($tmp);*/
        imagedestroy($src);

        $iddb = $_GET["iddb"];
        $filenamedb = $_GET["filenamedb"];

        if ($filenamedb != $filename) {
          $db = new Database(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);

          // connect to the server
          $db->connect();

          $data['filename'] = $filename;
          $db->query_update(TABLE_INSTA_GAL, $data, "id=$iddb");

          $db->close();

          // delete images
          $filenamedb_lg = "../../images/instalaciones/lg_$filenamedb";
          $filenamedb_th = "../../images/instalaciones/th_$filenamedb";
          $filenamedb = "../../images/instalaciones/$filenamedb";

          //imagedestroy($filenamedb);
          unlink($filenamedb_lg);
          unlink($filenamedb_th);
          unlink($filenamedb);

          //echo $filenamedb;

        }
        else {
          //echo ">>>>>>>> filename SAMA";
        }
        header("Location: crop-thumb.php?filename=$filename&height=$orig_h");
        //echo "<p><h3>Image is updated! <a href='javascript:parent.jQuery.fancybox.close();'>[x] close this window</a></h3></p>";
        //exit();
    }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Using the JQuery JCrop Plugin, and PHP for Image Uploads</title>
        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="js/jquery.pack.js"></script>
    <script type="text/javascript" src="js/jquery.Jcrop.pack.js"></script>
    <link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />
    <script type="text/javascript">
        $(function(){
            $('#cropbox').Jcrop({
                boxWidth: 500, boxHeight: 500,
                aspectRatio: <?php echo $ratio?>,
                setSelect: [0,0,<?php echo $orig_w.','.$orig_h;?>],
                onSelect: updateCoords,
                onChange: showCoords, 
                onRelease:  clearCoords,
                onChange: updateCoords
            });
        });

            function showCoords(c)
            {
                /*
                $('#x1').val(c.x);
                $('#y1').val(c.y);
                $('#x2').val(c.x2);
                $('#y2').val(c.y2);
                */
                $('#w').val(c.w);
                $('#h').val(c.h);
            };

            function clearCoords()
            {
                $('#coords input').val('');
            }; 

            function checkCoords()
            {
                if (parseInt($('#w').val())) return true;
                alert('Please select a crop region then press submit.');
                return false;
            };

        function updateCoords(c)
        {
            //showPreview(c);
            $("#x").val(c.x);
            $("#y").val(c.y);
            $("#w").val(c.w);
            $("#h").val(c.h);
        }

        function showPreview(coords)
        {
            var rx = <?php echo $targ_w;?> / coords.w;
            var ry = <?php echo $targ_h;?> / coords.h;

            $("#preview img").css({
                width: Math.round(rx*<?php echo $orig_w;?>)+'px',
                height: Math.round(ry*<?php echo $orig_h;?>)+'px',
                marginLeft:'-'+  Math.round(rx*coords.x)+'px',
                marginTop: '-'+ Math.round(ry*coords.y)+'px'
            });
        }
    </script>
    </head>

    <body>
        <h1>Move the selection on image and crop!</h1>
        <table>
            <tr>
                <td>
                    <img src="<?php echo $folder.$filename?>" id="cropbox" alt="cropbox" />

                </td>
                <!--<td>
                    Large img Preview:
                    <div id="preview">
                        <img src="<?php echo $folder.$filename?>" alt="thumb" />
                    </div>
                </td>-->
            </tr>
        </table>

        <form action="<?php echo $_SERVER['REQUEST_URI']?>" method="post" onsubmit="return checkCoords();">
            <p>
                <input type="hidden" id="x" name="x" />
            <input type="hidden" id="y" name="y" />
            <!--<input type="hidden" id="w" name="w" />
            <input type="hidden" id="h" name="h" />-->
            <label>W <input type="text" size="4" id="w" name="w" /></label>
            <label>H <input type="text" size="4" id="h" name="h" /></label>
                <input type="submit" id="submit" name="submit" value="Crop Image!" />
            </p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-07T10:51:20.060

使用构造函数语法：

```
jcrop_api = $.Jcrop($('#preview, #source'), {}); 
```

而不是回调语法：

```
$('#source').Jcrop({ 
```

然后使用`jcrop_api`.

**参考**

*   [TinyMCE - jQuery 插件](http://archive.tinymce.com/wiki.php/TinyMCE3x:jQuery_Plugin)

*   [我应该使用哪种 jQuery 插件设计模式？](https://stackoverflow.com/questions/7127600/which-jquery-plugin-design-pattern-should-i-use)

# php - CodeIgniter Ajax 响应包含数据但输出未定义

> ID：14150228
> 
> 赞同：1
> 
> 时间：2013-01-04T02:22:16.970
> 
> 标签：php, jquery, ajax, codeigniter

我一直在从事 CodeIgniter 项目，并且遇到了使用 ajax 从控制器返回数据的问题。

**控制器：**

```
function outputAjax()
    {
        $this->load->model('my_model');
        $data['results'] = $this->site_model->getInfo();
        $this->output->set_output(json_encode($data));
    } 
```

**模型：**

```
function getInfo()
{
    $this->db->order_by('PubDate','DESC');
    $query = $this->db->get('Articles', 50);

        return $query->result();
} 
```

**View 中的 Ajax 功能：**

```
<div id="article-area">
    <p>Hey this is where the ajax call should output!</p>

</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" language="Javascript">
 jQuery(document).ready(function(){     
      $.ajax({
url: 'http://localhost/project/index.php/my_controller/outputAjax',
dataType:'json',
success: function(data) {
    $.each(data, function(index,item){
        $("#article-area").append('<div><b>' + item.id + '</b></div><hr />');

    });
}
      });

}); 
```

我可以使用 PHP foreach 循环很好地输出数据，但现在我正在尝试将其转换为使用 ajax。如果我是正确的，输出的数据是一个**对象数组**。每个“对象”包含 6 个左右的数据字段，例如：*id、title、url、PubDate、Source。*

我对将 ajax 用于任何事情都很陌生，但在尝试调试问题时，使用 Chrome 检查并检查“网络”我可以看到 ajax 调用并在响应选项卡中：我需要的所有数据都以这种方式显示在这里：

```
{"results":[{"id":"1","Source":"My Source","Title":"My Title". . . . 
```

由于数据显示在响应中，但页面上没有显示任何内容，或者如果我更改 ajax 调用，我可以让它输出 UNDEFINED。

我希望实现的最终结果是页面上大约有 10 个左右的 div，其中包含来自 ajax 调用的数据。这也提出了我的附带问题......

我的模型从数据库返回 50 行数据。我目前正在将所有这些都以 json 格式传递给 ajax 函数。我最初只会使用 10 行该数据，然后在该页面上的确定时间内使用其余行。最好是继续将所有 50 行最初输出到 ajax 调用，然后根据需要使用它，还是将数据限制为仅最初从模型中使用的数据？

我已经使用 CI 浏览了一些 ajax 教程，但是它们都使用 POST，我还没有找到一个在 document.ready 上运行且没有用户交互的教程。我还注意到必须有几种不同的方式来输出数据。我已经看到以这种方式使用 .append() .after() 和 .value() ，但似乎没有一个适用于我的特殊情况......

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:32:18.293

如果您的数据只是一个数组，那么您的代码就可以工作。但是，您的数据数组包含在`results`对象的属性中。

更改`each`为：

```
$.each(data.results, function(index,item){... 
```

或者只是发送数组而不将其放入 php`results`数组中

```
$data = $this->site_model->getInfo(); 
```

# c - 检测到 glibc：realloc()：下一个大小无效

> ID：14150230
> 
> 赞同：1
> 
> 时间：2013-01-04T02:22:46.933
> 
> 标签：c, glibc, realloc

我正在尝试创建一个动态数组，该数组使用双指针将给定句子的单词存储在动态二维数组中，但是每当我给出三个以上的单词时，都会出现以下错误：

`*** glibc detected *** ./a.out: realloc(): invalid next size: 0x000000000255a030 ***`

相关代码如下：

```
#include <stdio.h>
#include <stdlib.h>  
int main()  
{
    char **ptr=NULL;  
    char letter;    
    int ptrsize=1, wordsize=1;  
    ptr=malloc(ptrsize*sizeof(char *));
    ptr[ptrsize]=(char *)malloc(wordsize*sizeof(char));
    do
    {
            letter=getchar();
            while ((letter!=' ')&&(letter!='\n'))
            {
                    ptr[ptrsize][wordsize]=letter;
                    *ptr= realloc(*ptr,wordsize+1);
                    wordsize++;
                    letter=getchar();
            }
            ptrsize++;
            ptr = realloc(ptr,ptrsize*sizeof(char));
            wordsize=1;
            ptr[ptrsize]=malloc(wordsize*sizeof(char));
    }
    while (letter!='\n');
    return 0;
} 
```

我已经设法通过更改双指针的 malloc 和 realloc 来增加句子的大小，但仍然没有找到任何可靠的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:35:43.433

这段代码

```
 ptr=malloc(ptrsize*sizeof(char *));
 ptr[ptrsize]=(char *)malloc(wordsize*sizeof(char)); 
```

并且稍后在循环体中重复的类似行是不正确的。

像这样的数组

```
Type* ptr = malloc(N * sizeof(Type)); 
```

`0`具有从到的有效索引`N - 1`。`ptr[N]`总是会超过数组的末尾。写入此内存和/或重新分配它可能最终会破坏堆数据结构。

# google-visualization - 谷歌折线图api用于日期的haxis

> ID：14150233
> 
> 赞同：2
> 
> 时间：2013-01-04T02:22:54.240
> 
> 标签：google-visualization, linechart

我每天都有一份数据更新列表。

```
data.addColumn('date', 'Date');
    data.addColumn('number', 'Calorie');
    data.addRows([
      [new Date(2012,7,1),  400],
      [new Date(2012,7,2),  460], 
```

日期将增加 3 个月有什么办法让我只在 haxis 中显示该月的第一天。

```
 hAxis: {
                        gridlines:{count:3, color: 'white'},
                        minValue: new Date(2012, 1, 31),
                        maxValue: new Date(2012, 9, 30),
                        showTextEvery:30,
            format:'d-MMM',
                    }, 
```

那是我当前的 haxis api 代码。它以某种方式仅显示8月1日。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T06:05:07.373

要获得您希望的结果，请评论选项对象中的 showTextEvery 属性。

```
hAxis: {
    gridlines:{count:3, color: 'white'},
    minValue: new Date(2012, 1, 31),
    maxValue: new Date(2012, 9, 30),
    // showTextEvery:30,
    format:'d-MMM'
} 
```

看看这个[jqfaq.com](http://jqfaq.com/category/google-charts/)网站，它有谷歌图表相关的常见问题解答。它可能对您有帮助。

# facebook - 如何使用 PHP 正确发送自动 Facebook 通知

> ID：14150235
> 
> 赞同：-1
> 
> 时间：2013-01-04T02:23:06.640
> 
> 标签：facebook, facebook-graph-api, notifications

我想自动通知我的用户在我的应用程序中执行的操作（而不选择已知的收件人）。

我使用这个调用，如下所示：[https](https://developers.facebook.com/docs/appsonfacebook/tutorial/#requests) ://developers.facebook.com/docs/appsonfacebook/tutorial/#requests using php code

```
https://graph.facebook.com/<fb user id to notify>/apprequests?message='<message>'&data='<data>'&access_token=<access token>&method=post 
```

我得到的是：

```
{
   "request": "22755723071160",
   "to": [
      "<fb user id to notify>"
   ]
} 
```

但用户看不到任何东西。所以没有错误或任何东西。通知在哪里？是否有任何权限可以正常查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:20:13.140

总结一下，

无法向已授权应用程序的用户的朋友发送通知。只有发送到应用中心>请求[https://www.facebook.com/appcenter/requests](https://www.facebook.com/appcenter/requests)的应用请求。

只有当用户从对话框中选择朋友（javascript）才能发送实际通知！

# wordpress - 在 Wordpress 中包含未缩小的 Backbone 和 Underscore

> ID：14150236
> 
> 赞同：0
> 
> 时间：2013-01-04T02:23:16.027
> 
> 标签：wordpress, backbone.js, underscore.js, minify, wordpress-3.5

我一直在尝试调试 Wordpress-3.5 上传器中的间歇性问题，似乎 Backbone.js 模型在某处搞砸了。我下载了未缩小的 Backbone.js 和 Underscore 文件，将它们粘贴到 Wordpress 的内置 wp-includes`.min.js`文件上，但随后它给出了与平常不同的错误。

这是由于使用了来自 Backbone 和 Underscore 站点的稍新的 .js 文件造成的吗？（我在那里找不到 Wordpress 使用的确切版本），还是`.min.js`用完整文件替换文件有问题？该脚本已发送到浏览器，但不会像内置的那样运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:26:40.820

尝试调试时，您应该始终使用**相同版本的 Backbone/Underscore 文件。**

只需用普通的 js 替换一个缩小的 js 应该不是问题。

您可以从以下网址下载 Backbone 0.9.2 和 Underscore 1.4.1：

1.  [https://raw.github.com/documentcloud/backbone/0.9.2/backbone.js](https://raw.github.com/documentcloud/backbone/0.9.2/backbone.js)
2.  [https://raw.github.com/documentcloud/underscore/1.4.1/underscore.js](https://raw.github.com/documentcloud/underscore/1.4.1/underscore.js)

# c++ - SFML 通过类初始化窗口时出现不可复制错误

> ID：14150237
> 
> 赞同：3
> 
> 时间：2013-01-04T02:23:28.437
> 
> 标签：c++, sfml

我正在制作一个带有制作窗口的功能的游戏类。当我尝试执行该函数时，VS 2012 给了我这个错误：

```
Error   1   error C2248: 'sf::NonCopyable::operator =' : cannot access private member declared in class 'sf::NonCopyable'   C:\SFML-2.0-rc\include\SFML\Window\Window.hpp   476 1   Faceman 
```

这是我的 Game.h（未完成）：

```
#ifndef FP_MENU
#define FP_MENU

#include <SFML/Graphics.hpp>

class GAME {
    public:

        sf::RenderWindow GameWindow;

        void createWindow();
            unsigned int getWindowWidth();
            unsigned int getWindowHeight();

            void setWindowWidth(unsigned int w);
            void setWindowHeight(unsigned int h);

        void loadMMenu();

        void startGame( bool isTurboMode );
            void pause();

        void options();
            void changeWindowSize( unsigned int x, unsigned int y );
            void changeVolume( int i );

        void Quit();

    private:
        unsigned int WINDOW_WIDTH;
        unsigned int WINDOW_HEIGHT;
};

static GAME Game;

#endif 
```

Game.cpp（未完成，具有测试所需的所有功能）：

```
#include "Game.h"

void GAME::setWindowWidth(unsigned int w) {

    w = WINDOW_WIDTH;
}

void GAME::setWindowHeight(unsigned int h) {

    h = WINDOW_HEIGHT;
}

unsigned int GAME::getWindowHeight() {

    return WINDOW_HEIGHT;
}

unsigned int GAME::getWindowWidth() {

    return WINDOW_WIDTH;
}

void GAME::createWindow() {

    if(getWindowHeight() != 0 && getWindowWidth() != 0)
    {
        GameWindow = sf::RenderWindow(sf::VideoMode( getWindowWidth(), getWindowHeight() ), "Title Goes Here");
        GameWindow.setPosition(sf::Vector2i(50, 50));
    }

    else 
    {
        setWindowWidth(1024);
        setWindowHeight(768);
        GameWindow = sf::RenderWindow(sf::VideoMode( getWindowWidth(), getWindowHeight() ), "Title Goes Here");
        GameWindow.setPosition(sf::Vector2i(50, 50));
    }
} 
```

主要.cpp：

```
#include <SFML/Graphics.hpp>
#include "Game.h"

int main()
{
    Game.createWindow(Game.getWindowWidth(), Game.getWindowHeight());

    while (Game.GameWindow.isOpen())
    {
        sf::Event event;
        while (Game.GameWindow.pollEvent(event))
        {
            if (event.type == sf::Event::Closed)
                Game.GameWindow.close();
        }

        Game.GameWindow.clear();
        Game.GameWindow.display();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:31:17.910

这是一个复制操作，即使您可能打算将其初始化：

```
GameWindow = sf::RenderWindow(sf::VideoMode( getWindowWidth(), getWindowHeight() ), "Title Goes Here"); 
```

并且（如果不是很明显）`sf::RenderWindow`是不可复制的。

您可以`GAME`改为在类的构造函数中通过其构造函数初始化 RenderWindow，也可以将其设为动态对象：

```
std::unique_ptr<sf::RenderWindow> GameWindow; //you are using VS2012 so C++11 smart pointers are the best way to do this

//...skipped some code
GameWindow = std::unique_ptr<sf::RenderWindow>(new sf::RenderWindow(sf::VideoMode( getWindowWidth(), getWindowHeight() ), "Title Goes Here")); 
```

然后通过`GameWindow->`而不是使用它`GameWindow.`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T17:25:53.383

在接下来的比赛中“未初始化的局部变量'事件' vs 2013”​​怎么样

```
while (window.isOpen()){
            sf::Event event;
            while (event.type)
            {
                if (event.type == sf::Event::Closed)
                    window.close();
                //case haddle all other case
                switch (event.type) 
```

# knockout.js - 淘汰赛映射：对象未填充

> ID：14150239
> 
> 赞同：1
> 
> 时间：2013-01-04T02:23:34.180
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在学习 Knockout，无法让 Knockout.mapping.fromJS 工作。这是我的代码：

```
$.getJSON("data/status.json", function(data) {
        var members = ko.mapping.fromJS(data);
});
ko.applyBindings(members); 
```

我正在使用模板。这是模板：

```
<script type="text/html" id="membersTemplate">
    <li data-bind="text: members.dname"></li>
</script> 
```

并且标记...

```
<div id="members">
<h2>Members</h2>
<ul data-bind="template: {name: 'membersTemplate', foreach: members}"></ul>
</div> 
```

JSON 数据正确加载，但“成员”对象是“未定义的”。（Members.dname 是众多对象属性之一。）

谁能告诉我我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:59:44.930

非常高兴：**您的`members`变量超出范围，因此在我们的 AJAX 调用完成后它会丢失**。你想要这样的东西。

```
$.ajax({url:"/echo/json/", data:json, type:"POST", success:function(data) {
  var viewModel = ko.mapping.fromJS(data);
  ko.applyBindings(viewModel)
}}); 
```

因此，您在 AJAX 调用或类似的范围内应用绑定。

```
var self = this
self.members = ko.observableArray([]);
$.ajax({url:"/echo/json/", data:json, type:"POST", success:function(data) {
  var members = ko.mapping.fromJS(data);
  self.members(members);
}});
// do the binding elsewhere 
```

它将您的响应绑定在一个闭包中。请记住，AJAX 调用是一种承诺模式，因此您真的不知道响应何时完成。这是一个带有工作示例的[代码。](http://jsfiddle.net/jjperezaguinaga/4UaSP/)

# vb.net - VB.NET 如何重命名 MemoryStream 中的图像？

> ID：14150240
> 
> 赞同：1
> 
> 时间：2013-01-04T02:23:34.423
> 
> 标签：vb.net, file, renaming

好吧，标题几乎说明了一切。如果我在文件流中有这样的图像：

```
Dim imgStream As MemoryStream = New MemoryStream()
sd.Save(imgStream, System.Drawing.Imaging.ImageFormat.Jpeg) 
```

我如何将此文件重命名为我制作的 GUID。现在这是我正在尝试的方法，但是“sd”被突出显示并说“'System.Drawing.Bitmap'类型的值不能转换为'String'”

这是制作 GUID 的代码：

```
Dim newName As String
newName = System.Guid.NewGuid.ToString() 
```

这是重命名的代码...

```
Rename(sd, newName) 
```

我敢肯定这是愚蠢的，但任何帮助将不胜感激！另外，我是个十足的菜鸟！因此，如果它完全错误，请不要讨厌哈哈。提前致谢！

此外，如果需要，这里是如何生成图像的代码（它正在拍摄桌面图像）：

```
sd = New Bitmap(My.Computer.Screen.WorkingArea.Width, _
My.Computer.Screen.WorkingArea.Height, _
Imaging.PixelFormat.Format32bppArgb)
Dim g As Graphics = Graphics.FromImage(sd)
g.CopyFromScreen(New Point(0, 0), New Point(0, 0), _
New Size(My.Computer.Screen.WorkingArea.Width, _
My.Computer.Screen.WorkingArea.Height)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:38:50.537

它不是一个文件。没有文件。只有具有某种令人愉悦的排列的字节集合仅存在于内存中，并且在您的程序终止时将不复存在。在您将 MemoryStream 写入某个磁盘之前，没有文件之类的东西，因此您无需更改名称。

当您获取 MemoryStream 并将其写入磁盘上的文件时，您可以在创建一个空文件并打开它进行写入时为其指定所需的任何名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:37:36.550

```
Dim sd As New Bitmap(My.Computer.Screen.WorkingArea.Width, My.Computer.Screen.WorkingArea.Height, Imaging.PixelFormat.Format32bppArgb)
Dim g As Graphics = Graphics.FromImage(sd)
g.CopyFromScreen(New Point(0, 0), New Point(0, 0), New Size(My.Computer.Screen.WorkingArea.Width, My.Computer.Screen.WorkingArea.Height))
Dim newName As String
newName = "C:\Junk\" & System.Guid.NewGuid.ToString() & ".JPG"
sd.Save(newName, System.Drawing.Imaging.ImageFormat.Jpeg)
MsgBox("Done") 
```

# html - 如何使用 CSS 使页脚粘在页面底部？

> ID：14150244
> 
> 赞同：-1
> 
> 时间：2013-01-04T02:23:52.540
> 
> 标签：html, css, footer

> **可能重复：**
> [如何让页脚留在网页底部？](https://stackoverflow.com/questions/42294/how-do-you-get-the-footer-to-stay-at-the-bottom-of-a-web-page)

我有一个有页脚的网页，但它不会粘在底部，即使我的内容已满。我在用着

```
footer {
   position:absolute;
   bottom:0px;
} 
```

页脚位于 SCREEN 的底部，而不是 PAGE 的底部。[您可以在http://thomaswd.com/2013prototype/index.html](http://thomaswd.com/2013prototype/index.html)看到一个示例。调整浏览器窗口的大小，使内容可滚动。CSS 位于[http://thomaswd.com/2013prototype/style.css](http://thomaswd.com/2013prototype/style.css)。您还可以在[http://thomaswd.com/2013prototype/pricing.html](http://thomaswd.com/2013prototype/pricing.html)找到另一个示例。CSS 位于[http://thomaswd.com/2013prototype/style2.css](http://thomaswd.com/2013prototype/style2.css)。我将其用于第二个示例：[http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

提前致谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:26:09.713

当您分配页脚时：绝对；底部：0；这意味着，它在您的容器之外。要解决此问题，请将您的页脚放在任何容器 div 或 section 标记中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T02:27:49.947

更改`position:absolute`为`position:fixed` Position absolute 会使元素脱离正常的内容流，而 fixed 会这样做并将其粘贴到页面上

# mysql - 2013 年按 WEEK() 故障分组

> ID：14150245
> 
> 赞同：2
> 
> 时间：2013-01-04T02:24:03.677
> 
> 标签：mysql, sql

我不确定到底发生了什么。

我有一个查询，它会在一周内获得所有销售，但在一周内出现轻微故障，将一周分为 2，这是查询...

```
SELECT 
    ROUND(SUM(sell_price), 2) AS sell_price, 
    ROUND(SUM(buy_price/100*20), 2) AS fees, 
    ROUND(SUM(buy_price), 2) AS buy_price, 
    ROUND(SUM(sell_price/100*80 - buy_price), 2) AS margin, 
    time 
    FROM order_items 
    GROUP BY WEEK(FROM_UNIXTIME(time), 1) 
    ORDER BY WEEK(FROM_UNIXTIME(time), 1) DESC 
```

这将输出以下内容

```
Sell Price      Fees    Buy Price   Margin  Date
44.01           4.46    22.30       12.91   31-12-2012
464.00          46.58   232.90      138.36  27-12-2012
313.82          31.80   159.01      92.06   10-12-2012
669.91          62.13   310.67      225.26  03-12-2012
265.88          25.57   127.84      84.87   02-12-2012
208.58          15.78   78.88       87.98   24-11-2012
176.90          16.32   81.59       59.93   01-01-2013 
```

从表格中可以看出，从 2013 年 12 月 31 日开始的那一周与 2013 年的销售量相比，销售量也没有按降序返回，因为 2013 年的销售量应该显示在顶部桌子。

返回的表应该类似于...

```
Sell Price      Fees    Buy Price   Margin  Date
220.2           20.78   103.90      72.84   31-12-2012
464.00          46.58   232.90      138.36  27-12-2012
313.82          31.80   159.01      92.06   10-12-2012
669.91          62.13   310.67      225.26  03-12-2012
265.88          25.57   127.84      84.87   02-12-2012
208.58          15.78   78.88       87.98   24-11-2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:30:31.290

值的拆分是正确的。该[`Week()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)函数返回周数而不是周一至周日的值。

`12/31/2012`2012 年的最后一周和2013 年的第 1 周也是如此`1/1/2013`。

请参阅[带有](http://sqlfiddle.com/#!2/dcaf7/1)`Week()`函数演示的SQL Fiddle。

您可能想查看该[`WeekOfYear()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekofyear)功能，看看它是否适合您（[参见演示](http://sqlfiddle.com/#!2/dcaf7/4)）：

```
select weekofyear(yourcol)
from yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:35:28.120

也许这对你有用：

```
SELECT 
    ROUND(SUM(sell_price), 2) AS sell_price, 
    ROUND(SUM(buy_price/100*20), 2) AS fees, 
    ROUND(SUM(buy_price), 2) AS buy_price, 
    ROUND(SUM(sell_price/100*80 - buy_price), 2) AS margin, 
    DATE_SUB(FROM_UNIXTIME(time), INTERVAL (DAYOFWEEK(FROM_UNIXTIME(time)) - 1) DAY) AS fdow 
    FROM order_items 
    GROUP BY fdow
    ORDER BY fdow DESC 
```

# c# - C# 异步任务无限期等待

> ID：14150247
> 
> 赞同：12
> 
> 时间：2013-01-04T02:24:34.147
> 
> 标签：c#, asp.net, async-await, dotnet-httpclient

我正在尝试使用“async”和“await”提供的功能来异步下载网页内容，但我遇到了任务永远等待完成的问题。您能否让我知道以下代码片段有什么问题？

```
protected void Page_Load(object sender, EventArgs e)
{
    var websites = new string[] {"http://www.cnn.com","http://www.foxnews.com"};
    var tasks = websites.Select(GenerateSomeContent).ToList();

    //I don't want to use 'await Tasks.WhenAll(tasks)' as I need to block the
    //page load until the all the webpage contents are downloaded
    Task.WhenAll(tasks).Wait();

    //This line is never hit on debugging
    var somevalue = "Complete";
}

static async Task<Results> GenerateSomeContent(string url)
{
    var client = new HttpClient();
    var response = await client.GetAsync(url); //Await for response
    var content = await response.Content.ReadAsStringAsync();
    var output = new Results {Content = content};
    return output;
}

//Sample class to hold results
public class Results
{
    public string Content;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T18:59:49.260

首先，确保您运行的是 .NET 4.5，而不是 .NET 4.0。ASP.NET 是`async`在 .NET 4.5 中实现的。

然后，正确的解决方案`await`是`Task.WhenAll`：

```
var tasks = websites.Select(GenerateSomeContent);
await Task.WhenAll(tasks); 
```

ASP.NET 管道（仅在 .NET 4.5 中）将检测到您的代码正在运行`await`，并将停止该请求，直到`Page_Load`运行完成。

[正如我在博客中解释](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)的那样，在这种情况下同步阻塞任务`Wait`会导致死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T07:20:49.503

+1斯蒂芬·克利里。刚刚知道您需要在使用 Page_Load 的 void 类型之前进行异步，如下所示：

```
protected async void Page_Load(object sender, EventArgs e)
{
   var tasks = websites.Select(GenerateSomeContent);
   await Task.WhenAll(tasks);
} 
```

然后在您的代码隐藏文件中（如果 asp.net Web 表单应用程序）也应该具有 Async="true" 属性。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="default.aspx.cs" Async="true" Inherits="EmptyWebForm._default" %> 
```

希望这对游客有所帮助。

# c++ - 动态规划：TSP中子集的迭代顺序

> ID：14150248
> 
> 赞同：1
> 
> 时间：2013-01-04T02:24:51.427
> 
> 标签：c++, algorithm, bit-manipulation, subset, traveling-salesman

**问题：如何在旅行商问题中对所有城市子集 {1,2,...,n} 进行正确的迭代顺序？**

在我的解决方案中，子集由位掩码（现在只是一个整数）表示。所有结果都存储在二维数组 C 中，其中第一维 S 类似于城市子集（即位掩码）。*第 2 个维度 j，包含 S 中所有*城市之间的旅行成本，其中 j 是结束城市。

每个子集都包含城市 0（起始城市），算法从设置最短路线开始：

```
C[{0}][0] = 0; 
```

但是，要使该算法起作用，所有子集都应按子集大小的顺序进行迭代。

这是一个简单的代码片段，它以递增的值打印所有子集：

```
#include <cstdio>

const int n = 5; // number of cities
const int s = 1 << n; // number of subsets

void printb(int x)
{
    for (int i = n-1; i >= 0; i--) {
        printf("%d", (x >> i) & 1);
    }
}

int main()
{
    for (int i = 0; i < s; i++) {
        printb(i); printf("\n");
    }

    return 0;
} 
```

我的目标是按子集大小（位数）的顺序枚举子集。

*我正在使用的算法描述：算法、S. Dasgupta、CH Papadimitriou 和 UV Vazirani (p188)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:19:09.680

为了正确求解 TSP，您实际上不需要在遍历大小为 2 的子集之前遍历所有大小为 1 的子集。在遍历集合 X 之前，您只需要遍历给定集合 X 的所有子集。使用集合的标准编码按数字顺序进行迭代可以满足此属性。

# javascript - 如何在 javascript 中生成 CMAC-AES

> ID：14150250
> 
> 赞同：4
> 
> 时间：2013-01-04T02:25:25.380
> 
> 标签：javascript, oauth, dojo, cryptography, cmac

我正在尝试使用[斯坦福 Javascript 加密库](http://crypto.stanford.edu/sjcl/)为 OAuth 2.0 断言生成 CMAC-AES 令牌，但我远非密码学专家。有人可以举一个使用 sjcl 或任何开放许可 js 库的例子吗？我什至不确定是否可以使用 sjcl 的现有功能。

[我尝试使用我在这个问题](https://stackoverflow.com/questions/13705850/is-sjcl-encrypt-using-aes-or-sha256)中看到的选项对象，但我不了解模式或其他选项，也找不到任何文档。我认为 salt 和 iv （要成为可复制的 MAC）必须是静态的，但我不知道它们应该是什么值。

```
// is there a way that works?
var token = sjcl.encrypt(secret,assertion,{salt:foo,iv:bar}); 
```

一点背景知识......这是为了将原生移动应用程序（iOS 和 android）重写为单个混合应用程序（Cordova、HTML、CSS 和 JavaScript），我希望尽可能多地在 JavaScript 中共享代码. 这不会在“不安全”的浏览器环境中运行，而是在本机 WebViews 中运行。如果您知道其他安全问题，我想听听。

否则我想我将不得不编写一个插件来从本机实现传递 CMAC。

忘了提，我也在使用 Dojo，我知道 dojox.encoding.crypto 但问题对我来说是一样的。不确定它是否可以执行 CMAC 或需要进行多少修改才能使其工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:21:14.743

这个周末花了太多时间想出这个解决方案，但我终于让它工作了。令人惊讶的是有多少地方会出错。这是一个 dojo AMD 模块，因此可以使用“require”轻松加载它。使用由随后的测试向量演示（忽略正常使用中的子键测试）。一个怪癖：确保您将密钥和消息作为十六进制编码字符串传递。我打算让它更友好一点，并接受 utf8String 编码的字符串，但是使用 sjcl.codec 很容易自己完成。

我很感激任何反馈，特别是对于填充函数和我对 bitArray 方法的使用。

```
// in crypto/AesCmac.js
define([
    "dojo/_base/declare"
], function(declare) {
return declare(null, {

    /**
     * This mostly follows the AES-128 CMAC algorithm found here.
     * 
     * @see http://tools.ietf.org/html/rfc4493
     * 
     * 
     * This module has a dependency on The Stanford Javascript Crypto Library. If using the
     * minified build, be sure to add sjcl.mode.cbc object into the namespace since I guess it's
     * too "dangerous" to include.
     * 
     * @see http://crypto.stanford.edu/sjcl/
     * 
     * 
     * In JavaScript, all numbers are 64 bit floating point. The bitwise operators treat numbers
     * as 32bit integers. But we're not guaranteed all 32 bits. ~0=-1 instead of 4,294,967,295.
     * So for most of these bit operations we're using sjcl.bitArray to do the dirty work.
     * 
     * @see http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference
     * 
     * 
     * The padding function is described here.
     * @see http://www.cardwerk.com/smartcards/smartcard_standard_ISO7816-4_5_basic_organizations.aspx#chap5_6_3_1
     */

    const_Bsize : 128, // in bits! not octets (16)
    const_Zero : sjcl.codec.hex.toBits("0x00000000000000000000000000000000"),
    const_Rb : sjcl.codec.hex.toBits("0x00000000000000000000000000000087"),
    aesCipher : {},

    init : function(key) {
        var keyBits = sjcl.codec.hex.toBits(key);
        this.aesCipher = new sjcl.cipher.aes(keyBits);
    },

    xor4Words : function(x, y) {
        return [
                x[0] ^ y[0], x[1] ^ y[1], x[2] ^ y[2], x[3] ^ y[3]
        ];
    },

    simpleShiftLeft : function(a, shift) {
        return sjcl.bitArray.bitSlice(sjcl.bitArray.concat(a, [
            0
        ]), shift, this.const_Bsize + shift);
    },

    iso7816d4Padding : function(m) {
        var bitLength = sjcl.bitArray.bitLength(m);
        m = this.xor4Words(m, this.const_Zero);
        var gap = this.const_Bsize - bitLength;
        if (gap < 8)
            return m;
        var startWord = Math.floor(bitLength / 32);
        var startByte = Math.ceil((bitLength % 32) / 8); // 0,1,2,3,4
        if (startByte == 4) {
            console.log("rolled over into next word");
            startWord++;
            startByte = 0;
            if (startWord == 4) {
                // this should have been caught above on gap check
                console.warn("this shouldn't ever happen");
                return m;
            }
        }
        var last32 = m[startWord];
        // startByte: 0->2^31, 1->2^23, 2->2^15, 3->2^7
        var bitmask = Math.pow(2, (4 - startByte) * 8 - 1)
        last32 |= bitmask;
        m[startWord] = last32;
        return m;
    },

    _encrypt : function(m) {
        return sjcl.bitArray.clamp(sjcl.mode.cbc.encrypt(this.aesCipher, m, this.const_Zero),
                this.const_Bsize);
    },

    generateSubkeys : function() {
        // Step 1
        var L = this._encrypt(this.const_Zero);

        // Step 2
        var msbNeg = L[0] & 0x80000000;
        var K1 = this.simpleShiftLeft(L, 1, 0);
        if (msbNeg) {
            K1 = this.xor4Words(K1, this.const_Rb);
        }

        // Step 3
        msbNeg = K1[0] & 0x80000000;
        var K2 = this.simpleShiftLeft(K1, 1, 0);
        if (msbNeg) {
            K2 = this.xor4Words(K2, this.const_Rb);
        }

        // Step 4
        return {
            "K1" : K1,
            "K2" : K2
        };
    },

    generateCmac : function(plainText) {
        // Step 1
        var subkeys = this.generateSubkeys();

        // Step 2
        var M = sjcl.codec.hex.toBits(plainText);
        var len = sjcl.bitArray.bitLength(M); // in bits! not octets
        var n = Math.ceil(len / this.const_Bsize);

        // Step 3
        var lastBlockComplete;
        if (n == 0) {
            n = 1;
            lastBlockComplete = false;
        } else {
            if (len % this.const_Bsize == 0)
                lastBlockComplete = true;
            else
                lastBlockComplete = false;
        }

        // Step 4
        var lastStart = (n - 1) * this.const_Bsize;
        var M_last = sjcl.bitArray.bitSlice(M, lastStart);
        if (lastBlockComplete) {
            M_last = this.xor4Words(M_last, subkeys["K1"]);
        } else {
            M_last = this.iso7816d4Padding(M_last);
            M_last = this.xor4Words(M_last, subkeys["K2"]);
        }

        // Step 5
        var X = this.const_Zero;
        var Y;

        // Step 6
        for ( var i = 1; i <= n - 1; i++) {
            var start = (i - 1) * this.const_Bsize;
            var end = i * this.const_Bsize;
            var M_i = sjcl.bitArray.bitSlice(M, start, end);
            Y = this.xor4Words(X, M_i);
            X = this._encrypt(Y);
        }
        Y = this.xor4Words(M_last, X);
        // Step 7
        return this._encrypt(Y);
    }
});
}); 
```

这是测试向量

```
function testAesCmac() {
/**
 * <pre>
 * Subkey Generation 
 * K                2b7e1516 28aed2a6 abf71588 09cf4f3c 
 * AES-128(key,0)   7df76b0c 1ab899b3 3e42f047 b91b546f 
 * K1               fbeed618 35713366 7c85e08f 7236a8de
 * K2               f7ddac30 6ae266cc f90bc11e e46d513b
 * </pre>
 */
var AesCmac = require("crypto/AesCmac");
var cmac = new AesCmac();
cmac.init("0x2b7e151628aed2a6abf7158809cf4f3c");

// Test AES-128 on zero initialization vector
var t_0 = cmac._encrypt(cmac.const_Zero);
var aes_0 = sjcl.codec.hex.toBits("0x7df76b0c1ab899b33e42f047b91b546f");
sjcl.bitArray.equal(t_0, aes_0) ? console.log("AES test passed!") : console
        .error("AES test failed!");

// Test subkey equality
var subkeys = cmac.generateSubkeys();
var K1 = sjcl.codec.hex.toBits("0xfbeed618357133667c85e08f7236a8de");
sjcl.bitArray.equal(subkeys["K1"], K1) ? console.log("K1 test passed!") : console
        .error("K1 test failed!");
var K2 = sjcl.codec.hex.toBits("0xf7ddac306ae266ccf90bc11ee46d513b");
sjcl.bitArray.equal(subkeys["K2"], K2) ? console.log("K2 test passed!") : console
        .error("K2 test failed!");

/**
 * <pre>
 * Example 1: len = 0
 * M              &lt;empty string&gt;
 * AES-CMAC       bb1d6929 e9593728 7fa37d12 9b756746
 * </pre>
 */
var m1 = "";
var cmac1 = cmac.generateCmac(m1);
var ex1 = sjcl.codec.hex.toBits("0xbb1d6929e95937287fa37d129b756746")
sjcl.bitArray.equal(ex1, cmac1) ? console.log("cmac1 test passed!") : console
        .error("cmac1 test failed!");
if (sjcl.codec.hex.fromBits(cmac1) !== "bb1d6929e95937287fa37d129b756746")
    console.error(sjcl.codec.hex.fromBits(cmac1) + " !== bb1d6929e95937287fa37d129b756746");

/**
 * <pre>
 * Example 2: len = 16
 * M              6bc1bee2 2e409f96 e93d7e11 7393172a
 * AES-CMAC       070a16b4 6b4d4144 f79bdd9d d04a287c
 * </pre>
 */
var m2 = "0x6bc1bee22e409f96e93d7e117393172a";
var cmac2 = cmac.generateCmac(m2);
var ex2 = sjcl.codec.hex.toBits("0x070a16b46b4d4144f79bdd9dd04a287c")
sjcl.bitArray.equal(ex2, cmac2) ? console.log("cmac2 test passed!") : console
        .error("cmac2 test failed!");

/**
 * <pre>
 * Example 3: len = 40
 * M              6bc1bee2 2e409f96 e93d7e11 7393172a
 *                ae2d8a57 1e03ac9c 9eb76fac 45af8e51
 *                30c81c46 a35ce411
 * AES-CMAC       dfa66747 de9ae630 30ca3261 1497c827
 * </pre>
 */
var m3 = "0x6bc1bee22e409f96e93d7e117393172aae2d8a571e03ac9c9eb76fac45af8e5130c81c46a35ce411";
var cmac3 = cmac.generateCmac(m3);
var ex3 = sjcl.codec.hex.toBits("0xdfa66747de9ae63030ca32611497c827")
sjcl.bitArray.equal(ex3, cmac3) ? console.log("cmac3 test passed!") : console
        .error("cmac3 test failed!");

/**
 * <pre>
 * Example 4: len = 64
 * M              6bc1bee2 2e409f96 e93d7e11 7393172a
 *                ae2d8a57 1e03ac9c 9eb76fac 45af8e51
 *                30c81c46 a35ce411 e5fbc119 1a0a52ef
 *                f69f2445 df4f9b17 ad2b417b e66c3710
 * AES-CMAC       51f0bebf 7e3b9d92 fc497417 79363cfe
 * </pre>
 */
var m4 = "0x6bc1bee22e409f96e93d7e117393172aae2d8a571e03ac9c9eb76fac45af8e51"
        + "30c81c46a35ce411e5fbc1191a0a52eff69f2445df4f9b17ad2b417be66c3710";
var cmac4 = cmac.generateCmac(m4);
var ex4 = sjcl.codec.hex.toBits("0x51f0bebf7e3b9d92fc49741779363cfe")
sjcl.bitArray.equal(ex4, cmac4) ? console.log("cmac4 test passed!") : console
        .error("cmac4 test failed!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T02:43:14.117

你可以看看它并自己实现它。如果您有一个 AES 原始块加密工作，那么实施 CMAC 应该是可行的。最棘手的部分可能是确保您使用真正的字节而不是 JavaScript 中的任何其他类型。

AES CMAC 已获得 NIST 批准，因此您可以针对[测试因素](http://csrc.nist.gov/groups/STM/cavp/documents/mac/cmactestvectors.zip)进行测试。

# node.js - grunt-init 模板条件提示

> ID：14150251
> 
> 赞同：1
> 
> 时间：2013-01-04T02:25:29.227
> 
> 标签：node.js, prompt, gruntjs

我正在为我的项目创建一个新的[grunt-init](https://github.com/gruntjs/grunt-init)模板，并且想知道是否有一种方法可以根据对先前提示的答案进行条件提示。

我的主要目标是在我的项目中创建新模块时能够使用 Github API 创建问题。在询问模块信息后，我会询问是否应该创建 Github 问题。如果是，则询问受让人、里程碑、标签等信息。如果不是，我不关心这些功能中的任何一个。

现在，我可以将它们默认为空白，但我想完全跳过这些提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:05:25.903

该`init`属性公开了一个`init.prompts()`对象，您可以根据答案对其进行修改。

像这样的东西：

```
exports.template = function(grunt, init, done) {
    init.process([
        init.prompt('create_github_issue', function(value, props, done) {
            init.prompts['milestone'] = init.prompt('milestone');
            done();
        })
    ], function(err, props) {
        // handle all the props
        done();
    });
}; 
```

请参阅[gruntplugin 模板](https://github.com/gruntjs/grunt-init-gruntplugin/blob/master/template.js)了解如何实现一个 init 任务。

# java - 合作流消费者的设计理念？

> ID：14150256
> 
> 赞同：4
> 
> 时间：2013-01-04T02:26:12.477
> 
> 标签：java, design-patterns, stream

假设以下场景：

我们有一个来自某个库的 Java 类，它消耗字节流，比如某个`XmlParser1`公开方法的XML 解析器`xmlParser1.parse(inputStream)`；该方法通常会在一次调用中吃掉所有字节，最终阻塞。我们还有另一个类，来自其他一些库，它做类似的事情，但实现不同：`XmlParser2`with `xmlParser2.parse(inputStream)`。现在，我们想用两个解析器**解析一个流。**

我的第一个答案是：我们搞砸了。由于我们无法控制每个类如何使用流，我们所能做的就是缓冲内存中的所有字节或临时文件（或打开/重新打开它，如果可能的话）。这些消费者的 API 本质上是不合作的。

现在，假设我们可以控制`XmlParser1`（实现和签名）并且我们希望以更灵活和协作的方式对其进行编码，以便调用者可以以某种合理和有效的方式实现上述行为......你有什么建议？

我正在考虑的一些替代方案：

1) make `XmlParser1`implement `FilterInputStream`，这样当某个类 ( `XmlParser1`) 尝试从中读取一些字节时，它会在内部解析它必须的内容（迭代地，也许有一些合理的缓冲）并返回原始字节。（这并不完全符合这个`FilterInputStream`概念，我会说）。通过这种方式，客户端代码可以简单地链接解析器：

```
 public class XmlParser1 extends FilterInputStream {
       public XmlParser1(InputStream rawInputStream) { ... } 
       public int read(byte[] b, int off, int l) throws IOException {
           // this would invoke the underlying stream read, parse internall the read bytes,
           // and leave them in the buffer
       }
   }

   XmlParser1 parser1 = new XmlParser1(inputstream);
   XmlParser2 parser2 = new XmlParser2(parse); 
   parser2.parse(); // parser2 consumes all the input stream, which causes parser1 to read an parse it too 
```

2）与其将 at`XmlParser1`视为字节的**消费者**，不如将其视为一个接收**器**：我们不会让它吃掉自己的字节，我们会用勺子喂它。所以，不是`xmlParser1.parse(inputStream)`我们可以有 `xmlParser1.write(byte[])`... 也就是说，不是传递它 an`InputStream`我们将使它成为一个`OutputStream`. 这将允许客户端创建一个 TeeInputStream 将字节透明地传递给`XmlParser2`类，同时调用`XmlParser1.write()`

请注意，在任何情况下我们都不需要单独的线程。

我不确定哪一个（如果有的话）在概念上更可取，是否有更好的选择。在我看来，这是一个应该已经讨论过的设计问题，但我没有找到太多 - 不一定仅限于 Java。欢迎提出意见和参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:03:18.287

假设两个解析器在两个单独的线程中运行，它可能是这样的（不是工作代码）

```
public class Test extends FilterInputStream {
    byte[] buf = new byte[8192];
    int len;
    Thread thread = null;

    @Override
    public synchronized int read(byte[] b, int off, int l) throws IOException {
        while (thread == Thread.currentThread() && len > 0) {
            thread.wait();
        }
        if (len > 0) {
            System.arraycopy(buf, 0, b, off, l);
            len = 0;
            return l;
        }
        len = super.read(b, off, l);
        System.arraycopy(b, off, buf, 0, len);
        thread = Thread.currentThread();
        notify();
        return len;
    } 
```

也就是说，#1 读取字节并将它们保存在 buf 中，#1 的下一次尝试被阻止，直到 #2 从缓冲区中读取所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:35:55.573

如果您的线程在同一台服务器上，那么您拆分 InputStreams 的想法将没有任何意义。因为您仍将只使用一个 InputStream 和一个 BufferedInputStream 来获取数据，从 InputStreams 中创建对象，然后在两个不同的运行线程中使用这些对象。结论：*在 Java 中，任何时候都没有必要阻塞任何 InputStream。*我什至认为它是有害的，因为如果你阻塞，如果你的缓冲区或管道溢出会发生什么？队列溢出！

（**编辑：**如果你想停止一个流，你需要告诉发件人不要再发送任何数据。或者你像 youtube 那样做，他们将视频分成几部分（即 1 分钟的 1 部分）并且只预加载那些部分，所以停止视频根本不会影响预加载，因为它只有在你到达时间轴中的某个位置时才会预加载（比如在 45 秒、1 分 45 秒、2 分 45 秒等）。 ，这实际上只是一种预加载技术，并没有真正的流媒体，这就是为什么 Youtube 不需要搞砸丢包的原因。）

但是，我仍然有几行伪代码给你，客户端：

```
BufferedOutputStream bos = new BufferedOutputStream(/*yourBasicInputStream*/);
ObjectOutputStream oos = new ObjectOutputStream(bos);  //Or use another wrapper
oos.writeObject(yourObjectToSend);      //Or use another parser: Look into the API: ObjectInputStream 
```

主线程控制器（又名服务器）中的类变量：

```
Thread thread1;  //e.g. a GUI controller
Thread thread2;  //e.g. a DB controller 
```

服务器（或由服务器启动的另一个服务器线程，两个线程都作为参数）：

```
BufferedInputStream bis = new BufferedInputStream(/*yourBasicInputStream*/);
ObjectInputStream ois = new ObjectInputStream(bis);   //Or use another wrapper
//now we use an interface MyNetObject implementing the method getTarget(), but
//also an abstract class would be possible (with a more complex getTarget-method):
MyNetObject netObject = (MyNetObject) ois.readObject();   //Or use another parser...
if(netObject.getTarget()=="Thread1ClassANDThread2Class"){
    thread1.activateSync(netObject);        //notify...  
    thread2.activateSync(netObject);        //...both threads!
}
else if(netObject.getTarget()=="Thread1Class"){
    thread1.activate(netObject);        //give thread1 a notification
}
else if(netObject.getTarget()=="Thread2Class"){
    thread2.activate(netObject);        //give thread2 a notification
}
else {//do something else...} 
```

不要忘记同步“activateSync(netObject)”-方法，但前提是您想对对象进行任何更改（您不需要同步读数，只需同步写作）：

```
public void activateSync(MyNetObject netObject){
    synchronize(netObject){
        //do whatever you wanna do with the object...the other thread will always get the actual object!
    }
} 
```

这很容易、快速、一致……并且完全面向对象。希望你能明白这一点。;)

**更新：**

重要的是要了解流或阅读器实际上也是“解析器”。有一个重要区别：流（通常）是网络驱动的类，用于写入和读取任何类型的数据 - 除了字符。虽然阅读器用于阅读任何类型的文本/字符。所以你正确的实现是这样的：用一些流读取传入的数据包，然后将数据存储到适当的对象中。然后你就有了一个通用对象，你可以在任何类型的阅读器中使用它。如果您只有一张图片要阅读，您可以尝试`readUTF()`类中的解析器`ObjectInputStream`（[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html)），它会产生一个字符串：

```
BufferedInputStream bis = new BufferedInputStream(/*yourBasicInputStream*/);
ObjectInputStream ois = new ObjectInputStream(bis);
String string = ois.readUTF();   //Or another usable parser/method
XmlParser1.read(string);      //for reads there is...
XmlParser2.read(string);      //...no synchronisation needed! 
```

现在，唯一剩下的就是教解析器如何读取该字符串。而对象字符串本身可以被视为“接收器”。如果这对您不起作用，只需找到另一个解析器/方法来创建“接收器”对象。

请注意，这里讨论的解决方案 - 使用类 ObjectInputStream 和适当的解析器 - 在许多情况下也适用，也适用于大数据（然后你只需在通过网络发送之前将一个 1GB 的文件分割成几个字符串/对象“数据包”，就像种子一样）。但它不适用于视频/音频流，您可能会丢包并且需要完全不同的解决方案（这本身就是一门科学：[http ://www.google.ch/search?q=video+stream+数据包+丢弃](http://www.google.ch/search?q=video+stream+packet+drop)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:26:21.923

我尝试将原始输入流拉入 Apache Commons TeeInputStream 以创建输出流。 [http://commons.apache.org/io/api-release/org/apache/commons/io/input/TeeInputStream.html](http://commons.apache.org/io/api-release/org/apache/commons/io/input/TeeInputStream.html)

作为 IeeInputStream 要写入的 OutputStream，我使用了 java PipedOutputStream。

我将此 PipedOutputStream 连接到 java PipedInputStream。

这让我能够阅读 TeeInputStream 和 PipedInputStream。不确定它是否适合您，或者它是否至少会提供下一步。

我创建了一个 ReaderThread 类来检查我是否可以并行读取它们：

```
 private static class ReaderThread extends Thread
  {
    InputStream inStream;
    int threadId;
    public ReaderThread(int threadId, InputStream inStream)
    {
      this.inStream = inStream;
      this.threadId = threadId;
    }

    @Override
    public void run()
    {
      try
      {
        int c = inStream.read();
        while (c != -1)
        {
          System.out.println("From ("+threadId+ ") "+c);
          c = inStream.read();
        }
      }
      catch (Exception e)
      {
        e.printStackTrace();
      }
    }
  } 
```

然后由以下代码驱动：

```
InputStream inStream = new FileInputStream(fileName);
PipedInputStream pipedInStream = new PipedInputStream();
OutputStream pipedOutStream = new PipedOutputStream(pipedInStream);
TeeInputStream tin = new TeeInputStream(inStream,
  pipedOutStream);

ReaderThread firstThread = new ReaderThread(1,tin);
ReaderThread secondThread = new ReaderThread(2,pipedInStream);

firstThread.start();
secondThread.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:12:19.937

你说过“那些消费者的 API 本质上是不合作的。” 所以不要试图制造它们，保持隔离并给他们想要的东西。分离输入流。

让一个线程读取真实的输入流并写入两个输出流。

然后从这些输出流中创建输入流，您可以使用 Piped Streams 执行此操作

> pipedInputStream1 = new PipedInputStream(pipedOutputStream1);

和

> ByteArrayInputStream(((ByteArrayOutputStream) byteOutputStream1).toByteArray());

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T19:08:54.933

有点不清楚 XmlParse1 和 XmlParser2 内部发生了什么，但假设他们真正关心最终的 XML 数据而不是 InputStream 字节，我会切换到 StAX XMLEvent api。您可以使两个解析器都实现[XMLEventConsumer](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/util/XMLEventConsumer.html)。然后，您只有一个外部循环，它解析实际流并将事件传递给消费者：

```
public void parseXml(InputStream stream) {
  XMLEventReader reader = ...; // convert stream into XMLEventReader

  XMLConsumer[] consumers = new XMLConsumer[]{new XmlParser1(), new XmlParser2()};

  while(reader.hasNext()) {
    XMLEvent event = reader.nextEvent();
    for(XMLConsumer consumer : consumers) {
      consumer.add(event));
  }
} 
```

# wcf - 使用 MakeCert 创建有效的生产客户端证书以验证 WCF

> ID：14150258
> 
> 赞同：2
> 
> 时间：2013-01-04T02:26:14.923
> 
> 标签：wcf, certificate, ssl-certificate, makecert

我购买了一个真正的 SSL 证书来验证我的计算机和托管一些 WCF 服务的域。

如何使用 MakeCert 创建由该真实证书签名的客户端证书，以在客户端计算机上使用以验证它们是否连接到正确的（我的）服务器？

客户端证书将用于对我的服务器上 WCF 服务的使用进行身份验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:04:07.167

1.  一般来说你不能。每个证书都是为特定目的（密钥使用）而颁发的。在您的情况下，它很可能是 SSL 身份验证。此类证书不能用于签署其他证书（从技术上讲，它们可以，但在验证期间不会接受此类签名）。具有 CA 能力的证书要花一大笔钱，而且您需要满足某些组织要求。

2.  您不需要创建客户端证书来验证服务器 - 服务器的证书用于此目的。客户端证书用于告诉服务器客户端是谁，即服务器上的客户端身份验证。对于此类证书，您无需使用服务器的证书对其进行签名 - 您可以创建自签名客户端证书或创建一个自签名证书，该证书将充当 CA 并使其在服务器上受信任。然后使用此自签名证书颁发客户端证书。

完成上述所有操作需要了解 PKI 和 X.509 证书的工作原理（顺便说一句，它们不是“SSL 证书”，与 SSL 无关）。

# internet-explorer - 访问 IWebBrowser2 Document 属性返回空

> ID：14150260
> 
> 赞同：2
> 
> 时间：2013-01-04T02:26:29.807
> 
> 标签：internet-explorer, vba, browser-automation

我正在尝试使用 VBA 从本地访问数据库自动输入 Web 数据。

导航到网站后，登录页面将重定向到主菜单。但是 IE 对象的文档属性不返回任何内容。

```
Dim htmlDoc As MSHTML.HTMLDocument

Set IE = CreateObject("InternetExplorer.Application")
IE.navigate "http://some.website.com.au/"
IE.Visible = True
With IE
    Do Until .ReadyState = 4
    Loop
End with  
htmlDoc = IE.Document 
' At this point VBA fails as the IE.Document property is empty
.... 
```

我怀疑问题在于导航到网站后，登录页面是一个检查 cookie 并重定向的登录页面。如果我禁用 cookie 并使用代码登录它可以工作，但在登录页面之后问题是一样的。

我发现的唯一可靠信息是，在 HTML 组件的情况下，DHTML 页面不会附加文档。这似乎有点奇怪，因为 IE 实例中显然有一个文档。

我无法找到记录此问题的其他任何地方，因此如果您遇到这种情况或者如果您对 MSHTML 类有更好的了解以了解为什么会出现这种情况，我们将不胜感激任何帮助或指导。

干杯，

将要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T13:14:11.827

正如@Larry 建议的那样，尝试使用[WinHttpRequest 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384106%28v=vs.85%29.aspx)

[这是一个改编自 Larry博客](http://tkang.blogspot.sg/2010/09/sending-http-post-request-with-vba.html)的基本 GET 请求（以防万一链接失效）。

```
Dim result As String
Dim myURL As String
Dim winHttpReq As Object
Set winHttpReq = CreateObject("WinHttp.WinHttpRequest.5.1")

myURL = "http://www.example.com/"

winHttpReq.Open "GET", myURL, False
winHttpReq.Send

result = winHttpReq.responseText 
```

# deployment - 无法将 Activiti 部署到 Glassfish 3.1

> ID：14150264
> 
> 赞同：1
> 
> 时间：2013-01-04T02:27:27.200
> 
> 标签：deployment, glassfish, activiti

我正在尝试在 Glassfish 中部署 activiti-explorer.war，但遇到了 ff。问题：

```
Error occurred during deployment: Exception while deploying the app [activiti-explorer] : There is no web component by the name of default here.. Please see server.log for more details. 
```

我检查了日志，它给了我 ff.:

```
[#|2013-01-04T09:57:53.438+0800|SEVERE|glassfish3.1|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=93;_ThreadName=Thread-1;|There is no web component by the name of default here.
java.lang.RuntimeException: There is no web component by the name of default here.
    at com.sun.enterprise.deployment.node.web.WebCommonNode.endElement(WebCommonNode.java:228)
    at com.sun.enterprise.deployment.node.SaxParserHandler.endElement(SaxParserHandler.java:481)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:858)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at com.sun.enterprise.deployment.io.DeploymentDescriptorFile.read(DeploymentDescriptorFile.java:309)
    at com.sun.enterprise.deployment.io.DeploymentDescriptorFile.read(DeploymentDescriptorFile.java:236)
    at com.sun.enterprise.deployment.archivist.Archivist.readStandardDeploymentDescriptor(Archivist.java:639)
    at com.sun.enterprise.deployment.archivist.Archivist.readDeploymentDescriptors(Archivist.java:376)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:246)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:255)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:216)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:165)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:180)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:93)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:826)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:768)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
    at org.glassfish.admingui.common.util.LocalDeploymentFacility$LocalDFCommandRunner.run(LocalDeploymentFacility.java:143)
    at org.glassfish.deployment.client.AbstractDeploymentFacility.deploy(AbstractDeploymentFacility.java:406)
    at org.glassfish.admingui.common.util.DeployUtil.invokeDeploymentFacility(DeployUtil.java:100)
    at org.glassfish.admingui.common.util.DeployUtil.deploy(DeployUtil.java:76)
    at org.glassfish.admingui.common.handlers.DeploymentHandler.deploy(DeploymentHandler.java:191)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jsftemplating.layout.descriptors.handler.Handler.invoke(Handler.java:442)
    at com.sun.jsftemplating.layout.descriptors.LayoutElementBase.dispatchHandlers(LayoutElementBase.java:420)
    at com.sun.jsftemplating.layout.descriptors.LayoutElementBase.dispatchHandlers(LayoutElementBase.java:394)
    at com.sun.jsftemplating.layout.event.CommandActionListener.invokeCommandHandlers(CommandActionListener.java:150)
    at com.sun.jsftemplating.layout.event.CommandActionListener.processAction(CommandActionListener.java:98)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at com.sun.webui.jsf.component.WebuiCommand.broadcast(WebuiCommand.java:166)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at com.sun.webui.jsf.util.UploadFilter.doFilter(UploadFilter.java:223)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.doChainInvoke(StandardPipeline.java:600)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:96)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:228)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2013-01-04T09:57:53.448+0800|SEVERE|glassfish3.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=93;_ThreadName=Thread-1;|Exception while deploying the app [activiti-explorer] : There is no web component by the name of default here.|#] 
```

我能得到的最接近的参考是： [http ://www.java.net/forum/topic/glassfish/glassfish/deployment-problem-glassfish-v301](http://www.java.net/forum/topic/glassfish/glassfish/deployment-problem-glassfish-v301)

你有没有找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:48:03.567

我仍然没有查看您的 web.xml 文件，但可能您可以定义默认服务器（这是使用 glassfish 部署的常见问题）

尝试将此片段添加到您的 web.xml 文件中：

```
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
</servlet> 
```

# c# - 为什么最小化和恢复窗口会对 WPF 中已绘制的图形产生影响？

> ID：14150266
> 
> 赞同：7
> 
> 时间：2013-01-04T02:27:43.210
> 
> 标签：c#, .net, wpf, windows-7

我有一个非常基本的测试应用程序，仅由 a`Window`和 a组成`CustomControl`。该窗口包含自定义控件并具有以下附加属性：

```
TextOptions.TextFormattingMode="Display"
SnapsToDevicePixels="True" 
UseLayoutRounding="True"
RenderOptions.EdgeMode="Aliased" 
```

自定义控件将以下 5 行添加到代码隐藏文件中：

```
protected override void OnRender(DrawingContext drawingContext)
{
    var pen = new Pen(Brushes.Black, 1);
    drawingContext.DrawLine(pen, new Point(0, 0), new Point(ActualWidth, ActualHeight)); 
} 
```

一切都很好。从左上角到右下角对角绘制一条黑色的 1px 线。完美的。诚然像素化，但正是我需要的。但是，当我最小化窗口并再次恢复它时，线条变得“模糊”。`OnRender`在窗口恢复后，不会再次调用该方法，就会发生这种情况。那么为什么在窗口最小化后绘制的图形会发生根本性的变化（失去焦点似乎不是问题）？为什么在简单地调整窗口大小后一切都恢复正常，我该如何处理这种不需要的行为？每次`WindowState`更改似乎有点过分时，强制完全调整大小/无效，不是吗？

**更新1：**

正如@Backlash 建议的那样，我将自定义控件放在画布中

```
<Canvas Name="CanvasControl" SizeChanged="FrameworkElement_OnSizeChanged">
  <wpfTest:CustomControl x:Name="ChildControl" />
</Canvas> 
```

并像这样处理`SizeChanged`事件

```
private void FrameworkElement_OnSizeChanged(object sender, SizeChangedEventArgs e)
{
    ChildControl.Width = CanvasControl.ActualWidth;
    ChildControl.Height = CanvasControl.ActualHeight;
} 
```

因为画布内的元素不会自动布局。然而，结果并没有改变。

**更新 2：**

我想到的一个想法是监听窗口状态的变化并通过稍微改变窗口的`Width`or`Height`属性来强制调整窗口及其所有控件的大小 - 因此完全重绘 -

```
protected override void OnStateChanged(EventArgs e)
{
        if (WindowState != WindowState.Minimized)
        {               
            Width += 1;
        }
} 
```

这在某些情况下有效（尽管`Window`例如在最大化时不起作用），但一般来说，由于多种原因，这是一种非常糟糕的方法。我试图了解在更改大小时导致（正确）重绘的原因，并且它可能与`CoreFlags.AreTransformsClean`.

**更新 3：**

鉴于 WPF 似乎无法直接在屏幕上绘制直线，因此我尝试先在内存中绘制位图，然后再将位图绘制到屏幕上。它有效。这是方法：

```
protected override void OnRender(DrawingContext drawingContext)
{
    var rtb = new RenderTargetBitmap((int)ActualWidth, (int)ActualHeight, 96, 96, PixelFormats.Pbgra32);
    var line = new Line();
    RenderOptions.SetEdgeMode(line, EdgeMode.Aliased);

    line.Stroke = Brushes.Black;
    line.StrokeThickness = 1;
    line.X1 = 0;
    line.X2 = ActualWidth;
    line.Y1 = 0;
    line.Y2 = ActualHeight;
    line.Arrange(new Rect(new Size((int)ActualWidth, (int)ActualHeight)));
    rtb.Render(line);

    drawingContext.DrawImage(rtb, new Rect(0, 0, (int)ActualWidth, (int)ActualHeight));
} 
```

至少可以说，“解决方案”很老套。这真的很糟糕，但与我迄今为止从 WPF 看到的其他方法相比，这可能是一种合法的方法。但是，将保留线程以获取更多答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T14:57:25.023

我认为这是因为您正在使用

```
SnapsToDevicePixels="True" 
```

根据[Microsoft msdn ，像素捕捉并不总是完全准确](http://msdn.microsoft.com/en-us/library/aa970908%28v=vs.85%29.aspx)

> 不幸的是，简单地调整容器对象的大小并不能保证设备像素对齐。应用程序的整个布局可能会影响图像的对齐方式。每英寸显示点数 (dpi) 也会影响图像对齐。在上面的示例中，仅当显示设置为每英寸 96 点 (dpi) 时，图像对齐才会起作用。在任何其他设置下，需要调整布局以适应显示设置。在 Windows Presentation Foundation (WPF) 应用程序中应尽可能避免使用高频图像。

所以尝试将该标志更改为 false 并查看它的作用

# google-apps-script - 在谷歌电子表格上：有没有办法在某人提交表单后立即更改特定单元格的内容？

> ID：14150272
> 
> 赞同：1
> 
> 时间：2013-01-04T02:27:56.773
> 
> 标签：google-apps-script

在 Google 电子表格上：有没有办法在某人提交表单后立即更改特定单元格的内容？

每次有人提交表单时，都会在电子表格中添加一行，其中包含不同列上电子表格的信息。我想让电子表格自动在表格输入的其余信息之后的列中的空单元格中添加信息。

示例：有人提交请求技术帮助的表单。表格包含 3 列信息。然后，表格应通过在单元格中输入“打开的案例”，在第 4 列中将案例标记为已打开的案例。

也许有一个 onEdit() 解决方案......

编写此脚本的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:32:52.737

是的，您可以使用`onFormSubmit`触发器。更多信息可以在[这里](https://developers.google.com/apps-script/understanding_events)找到。您将需要使用该`e.range`参数来确定将附加信息放在何处。

# php - 如何使用 PHP 获取 veoh 视频缩略图

> ID：14150276
> 
> 赞同：1
> 
> 时间：2013-01-04T02:28:26.607
> 
> 标签：php, wordpress, video-thumbnails

我正在开发一个 wordpress 插件视频列表管理器：[http ://wordpress.org/extend/plugins/video-list-manager/](http://wordpress.org/extend/plugins/video-list-manager/)

不知道 veoh 是否支持我们获取 veoh 视频缩略图。我想将 VEOH 添加到我的插件中，我需要的是： 1\. 嵌入链接（是） 2\. 缩略图（否）

请帮我！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:06:34.113

如果您有视频的链接，例如`http://www.veoh.com/watch/abcdef123456`您首先需要使用 API 方法[veoh.video.findByPermalink](http://www.veoh.com/rest/v2/doc.html?method=veoh.video.findByPermalink)来获取视频 ID：

```
http://www.veoh.com/rest/v2/execute.xml?method=veoh.video.findByPermalink
                                       &permalink=abcdef123456
                                       &apiKey=12345678-1234-... 
```

您将获得这种结构的 XML：

```
<rsp>
  <videoList offset="0" items="1" numItems="1">
    <video videoId="12345" ... >
    ... 
```

使用该视频 ID，您可以使用 API 方法[veoh.video.getVideoThumbnails](http://www.veoh.com/rest/v2/doc.html?method=veoh.video.getVideoThumbnails)获取该视频的缩略图：

```
http://www.veoh.com/rest/v2/execute.xml?method=veoh.video.getVideoThumbnails
                                       &videoId=12345
                                       &apiKey=12345678-1234-... 
```

您将获得这种结构的 XML：

```
<rsp>
  <thumbList offset="0" items="33" numItems="10">
    <thumbnail lowResImage="http://....jpg" highResImage="http://....jpg">
    </thumbnail>
    <thumbnail lowResImage="http://....jpg" highResImage="http://....jpg">
    </thumbnail>
    ... 
```

该 API 非常易于使用，有关方法的完整列表，请参阅[文档](http://www.veoh.com/rest/v2/doc.html)。

# php - PHP数组按一个字段分组并总结两个字段

> ID：14150290
> 
> 赞同：2
> 
> 时间：2013-01-04T02:30:50.863
> 
> 标签：php, arrays, multidimensional-array

这是我的数组：

```
Array ( 
[0] => Array ( [date] => 28-10-2012 [total] => 100 [earn] => 10 ) 
[1] => Array ( [date] => 28-12-2012 [total] => 100 [earn] => 10 ) 
[2] => Array ( [date] => 28-12-2012 [total] => 90 [earn] => 9 ) 
[3] => Array ( [date] => 28-12-2012 [total] => 315.35 [earn] => 31.535 ) 
[4] => Array ( [date] => 02-01-2013 [total] => 1500 [earn] => 150 ) 
[5] => Array ( [date] => 02-01-2013 [total] => 1000 [earn] => 100 ) 
) 
```

愿望输出：

```
Array ( 
 [0] => Array ( [date] => 28-10-2012 [total] => 100 [earn] => 10 ) 
 [1] => Array ( [date] => 28-12-2012 [total] => 505.35 [earn] => 505.535 ) 
 [2] => Array ( [date] => 02-01-2013 [total] => 2500 [earn] => 250 )  
) 
```

到目前为止，我尝试的方法设法按日期分组，并且只用两个不同的数组总结一个字段。

```
Array ( [28-10-2012] => 100 [28-12-2012] => 505.535 [02-01-2013] => 2500)

Array ( [28-10-2012] => 10 [28-12-2012] => 50.535 [02-01-2013] => 250 ) 
```

这与我正在寻找的非常不同，仍然让我头疼。有什么可能的方法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:34:43.837

我认为没有内置函数，您必须自己编写算法。像这样的东西：

```
$result = array();
foreach ($array as $row)
{
  $result[$row['date']]['date'] = $row['date'];
  $result[$row['date']]['total'] += $row['total'];
  $result[$row['date']]['earn'] += $row['earn'];
}
$result = array_values($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:46:29.440

这是总结数组中字段的一种方法。

这与之前的答案基本相同，但您应该检查密钥的存在，因为您将在每个唯一日期的第一次访问时获得“未定义索引”。希望这可以帮助。

```
 // your example input array
        $arr = array(
            array( 'date'=>'28-10-2012', 'total'=>100, 'earn'=>10 ),
            array( 'date'=>'28-10-2012', 'total'=>100, 'earn'=>12 ),
            array( 'date'=>'28-11-2012', 'total'=>120, 'earn'=>12 ),

        );

        $newData = array();
        foreach($arr as $row) {
            if(array_key_exists( $row['date'], $newData)) {
                $newData[$row['date']]['total'] += $row['total'];
                $newData[$row['date']]['earn'] += $row['earn'];         
            } else {
                $newData[$row['date']] = $row;
            }
        } 
```

# android - android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 添加到应用的清单文件时不起作用

> ID：14150291
> 
> 赞同：2
> 
> 时间：2013-01-04T02:31:05.897
> 
> 标签：android, statusbar

我添加了代码

```
 android:theme=“@android:style/Theme.NoTitleBar.Fullscreen” 
```

到清单，状态栏仍然存在。我怎样才能解决这个问题。

我真正想要的是删除状态栏而不是全屏，因为应用程序已经全屏但状态栏覆盖了应用程序的一小部分。

```
 <?xml version="1.0" encoding="utf-8"?>
    <!-- ****
     **** Generated by AppToMaret on Fri Jan 04 02:15:02 EST 2013
     **** If you wish, you can update this file to your needs.
     **** If updating, it has to be done prior to clicking 'Create New .apk' button        
     AppToMarket
     **** However, please make sure that your updates WILL NOT break the functionality.
     **** For example, removing permissions, could cause runtime exceptions
     ****
-->
<manifest android:versionCode="1"
android:installLocation="auto" android:versionName="1.0" package="com.appbuilder.u28941p382992"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <supports-screens android:resizeable="true" android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="false" />
<application android:label="@string/app_name" android:icon="@drawable/icon">
        <activity android:label="@string/app_name" android:name=".AppBuilder" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SplashScreen" android:screenOrientation="portrait" />
        <activity android:name=".PushNotification.AppPushNotification" android:screenOrientation="portrait" />
        <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity android:name=".GPSNotification.GPSLocationMap" android:screenOrientation="portrait">
            <uses-library android:name="com.google.android.maps" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>
        <activity android:name=".GPSNotification.GPSLocationText" android:screenOrientation="portrait" />
        <activity android:name="com.ibuildapp.romanblack.CalculatorPlugin.CalculatorPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/calculator" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.CallPlugin.CallPlugin" android:screenOrientation="portrait" />
        <activity android:name="com.ibuildapp.romanblack.ImagesPlugin.ImagesPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/images" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.ImagesPlugin.ImagesDetails" android:configChanges="orientation" />
        <activity android:theme="@*android:style/Theme.Dialog" android:name="com.ibuildapp.romanblack.ImagesPlugin.ImagesBottomPanel" />
        <activity android:name="com.ibuildapp.romanblack.ContactPlugin.ContactPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/contacts" />
            </intent-filter>
        </activity>
        <service android:name=".PushNotification.AppPushNotificationReceiver" />
        <service android:name=".GPSNotification.GPSService">
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </service>
        <activity android:name="com.ibuildapp.romanblack.WebPlugin.WebPlugin" android:configChanges="keyboard|keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/web" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.CustomFormPlugin.CustomFormPlugin" android:configChanges="orientation">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/customform" />
            </intent-filter>
        </activity>
        <activity android:label="Email" android:name="com.ibuildapp.romanblack.EmailPlugin.EmailPlugin">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/email" />
            </intent-filter>
        </activity>
        <activity android:theme="@*android:style/Theme.Dialog" android:name="com.ibuildapp.romanblack.EmailPlugin.addfile" />
        <activity android:theme="@*android:style/Theme.Dialog" android:name="com.ibuildapp.romanblack.EmailPlugin.dellfile" />
        <activity android:theme="@*android:style/Theme.Dialog" android:name="com.ibuildapp.romanblack.EmailPlugin.filelist" />
        <activity android:name="com.ibuildapp.romanblack.ECommercePlugin.ECommercePlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/ecom" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.ECommercePlugin.ECommerceBuy" android:screenOrientation="portrait" />
        <activity android:name="com.ibuildapp.romanblack.ECommercePlugin.ECommerceDetails" android:screenOrientation="portrait" android:configChanges="keyboardHidden" />
        <activity android:theme="@*android:style/Theme.Translucent.NoTitleBar" android:name="com.paypal.android.MEP.PayPalActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.ibuildapp.romanblack.MapPlugin.MapPlugin">
            <uses-library android:name="com.google.android.maps" />
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/map" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.MapPlugin.MapBottomPanel" />
        <activity android:name="com.ibuildapp.romanblack.MapPlugin.WebViewer" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.MediaPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/media" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.MusicPlayer" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.VideoPlayer" android:configChanges="orientation" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.AudioPlayer" android:configChanges="orientation" />
        <service android:name="com.ibuildapp.romanblack.MediaPlugin.BackGroundMusicService" />
        <activity android:name="com.ibuildapp.romanblack.TablePlugin.TablePlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/table" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.TablePlugin.TableDetails" />
        <activity android:name="com.ibuildapp.romanblack.CouponPlugin.CouponPlugin">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/coupon" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.CouponPlugin.CouponDetails" />
        <activity android:name="com.ibuildapp.romanblack.CameraPlugin.CameraPlugin" android:configChanges="orientation">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/camera" />
            </intent-filter>
        </activity>
        <activity android:label="Facebook" android:name="com.ibuildapp.romanblack.CameraPlugin.CameraFacebookSharing" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp/picture" />
            </intent-filter>
        </activity>
        <activity android:label="Twitter" android:name="com.ibuildapp.romanblack.CameraPlugin.CameraTwitterSharing" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp/picture" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.NewsPlugin.NewsPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/rss" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.NewsPlugin.FeedDetails" />
        <activity android:name="com.ibuildapp.romanblack.NewsPlugin.EventsNotification" />
        <activity android:name="com.ibuildapp.romanblack.NewsPlugin.EventsNotificationView" />
        <activity android:name="com.ibuildapp.romanblack.TwitterPlugin.TwitterPlugin" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="ibuildapp.romanblack/twit" />
            </intent-filter>
        </activity>
        <activity android:name="com.ibuildapp.romanblack.TwitterPlugin.Description" android:screenOrientation="portrait" />
        <activity android:label="TicTacToe" android:name="com.ibuildapp.username.TicTacToe.MainActivity" />
        <receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="com.appbuilder.u28941p382992" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.appbuilder.u28941p382992" />
            </intent-filter>
        </receiver>
        <uses-library android:name="com.google.android.maps" />
        <activity android:name="com.ibuildapp.romanblack.WebPlugin.WebPlugin" android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.MediaPlugin" android:screenOrientation="portrait" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.MusicPlayer" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.VideoPlayer" android:configChanges="orientation" />
        <activity android:name="com.ibuildapp.romanblack.MediaPlugin.AudioPlayer" android:configChanges="orientation" />
        <service android:name="com.ibuildapp.romanblack.MediaPlugin.BackGroundMusicService" />
    </application>
    <permission android:name="com.appbuilder.u28941p382992.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.appbuilder.u28941p382992.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <supports-screens android:anyDensity="true" android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:resizeable="true" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:47:05.697

**如果要删除状态栏，请使用以下命令：**

```
android:theme="@android:style/Theme.Light.NoTitleBar" 
```

**代替：**

```
android:theme=“@android:style/Theme.NoTitleBar.Fullscreen 
```

这对我有用。

**编辑：**

*您必须在此处添加它：*

*把它写在你的清单文件中。*

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

<application
            android:icon="@drawable/logo"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Light.NoTitleBar" > 
```

# html - 如何让我的最后一个水平导航项不换行到下一行？

> ID：14150294
> 
> 赞同：1
> 
> 时间：2013-01-04T02:31:25.987
> 
> 标签：html, css, navigation

[http://www.ashlandmediagroup.com/menu-test/menu.html](http://www.ashlandmediagroup.com/menu-test/menu.html) 最后一个菜单项的悬停状态需要延伸到菜单的末尾，但这会导致菜单在放大和缩小时中断。

我对其他菜单也有同样的问题，想知道是否有解决方案。

这是我的代码：

```
/* main navbar */

ul#main-menu {
  float: left;
  font-size: 14px;
  font-family: "arial";
  text-transform: uppercase;
  margin: 0;
  width: 100%;
}

ul#main-menu {
  height: 33px;
  list-style: none outside;
  border-radius: 5px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  behavior: url(http://www.ashlandmediagroup.com/menu-test/border-radius.htc);
}

ul#main-menu {
  background: url(nav-back.jpg) repeat-x;
}

ul#main-menu li {
  float: left;
  height: 33px;
}

ul#main-menu li a {
  text-decoration: none;
  color: #fff;
  display: block;
  padding: 8px 20px 9px 20px;
  background: url('../images/nav-divider.jpg') no-repeat;
  height: 16px;
}

ul#main-menu li:first-child a {
  padding: 8px 10px 9px 26px;
  background: none;
}

ul#main-menu li:first-child.active {
  border-radius: 5px 0 0 5px;
}

li.wwd span,
li.wwd:hover span {
  display: block;
  background: url('../images/what-we-do-hover.png') no-repeat 135px 0;
  width: 165px;
}

ul#main-menu>li:hover,
ul#main-menu li.active {
  background: url(nav-hover.jpg) repeat-x;
}

ul#main-menu {}

li.wwd:hover {}

ul#main-menu li:last-child {
  /*
        border-radius : 0px 5px 5px 0px;
    	margin-right: 0px;
    */
}

ul#main-menu li:last-child a {}

ul#main-menu li:last-child a:hover {}

/* sub-menu: main categories */

#sub-menu {
  z-index: 100;
}

ul#main-menu ul {
  position: relative;
  left: -9999px;
  background: rgba(255, 255, 255, 0);
}

ul#main-menu ul li {
  /* Introducing a padding between the li and the a give the illusion spaced items */
  float: left;
}

ul#main-menu ul li a {
  height: auto;
}

ul#main-menu ul#sub-menu a {
  white-space: nowrap;
  /* Stop text wrapping and creating multi-line dropdown items */
}

ul#main-menu li:hover ul,
ul#main-menu li.active ul {
  /* Display the dropdown on hover */
  left: 0px;
  /* Bring back on-screen when needed */
}

ul#main-menu li:hover a {
  /* These create persistent hover states, meaning the top-most link stays 'hovered' even when your cursor has moved down the list. */
  text-decoration: none;
}

ul#main-menu li:hover ul a {
  /* The persistent hover state does however create a global style for links even before they're hovered. Here we undo these effects. */
  text-decoration: none;
}

ul#main-menu li:hover ul li a:hover {
  /* Here we define the most explicit hover states--what happens when you hover each individual link. */
}

ul#main-menu ul#sub-menu {
  height: 51px;
  background: #e7eff2;
  border-radius: 0 0 5px 5px;
  width: 700px;
}

ul#main-menu ul#sub-menu li {
  background: none;
  font-size: 12px;
  height: 51px;
  color
}

ul#main-menu ul#sub-menu li:hover {
  background-color: d8e0e8;
}

ul#main-menu ul#sub-menu li a {
  color: #3a6f8f;
  text-transform: none;
  padding: 0 30px 0 30px;
  font-size: 13px;
  line-height: 51px;
  font-weight: bold;
  border-right: 1px solid #d8e0e8;
}

ul#main-menu ul#sub-menu li:last-child a {
  border-right: none;
}

ul#main-menu ul#sub-menu li a.active,
nav#main-nav ul#main-menu ul#sub-menu li a:hover {
  color: #000033;
}
```

```
<div style="width: 940px;margin: 30px auto;">
  <nav class="sixteen columns" id="main-nav">
    <div class="" id="nav-container">
      <ul id="main-menu">
        <li class="wwd active"><span><a href="/what-we-do">What We Do</a>
    <ul id="sub-menu">
    <li><a href="/citizen_health_and_safety">Citizen Health &amp; Safety</a></li>
    <li><a href="/revenue_and_spending">Revenue &amp; Spending</a></li>
    <li><a href="/open_accountable_government">Open, Accountable Government</a></li>
    </ul>
    </span></li>
        <li><a href="/resources">Resources</a></li>
        <li><a href="/government_matters">Recent Analysis</a></li>
        <li><a href="/the_fine_print">Blog</a></li>
        <li><a href="/press_room">Press Room</a></li>
        <li><a href="/about-us">About Us</a></li>
        <li><a href="/get_involved">Take Action</a></li>
      </ul>
    </div>
  </nav>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:06:13.573

您当前的布局目标并不完全清楚，但这是一种解决方案。

1.  从; `id="main-menu"` `width`_ `100%`到`auto;`

2.  `id="sub-menu"` `width`从更改`700px;`为`665px;`

[**jsFiddle 演示**](http://jsfiddle.net/n9dXq/)

* * *

**编辑：**这种替代方法保留了您必须说明的当前宽度，您可以将最后一个导航按钮***悬停区域***“扩展”到可用的最大宽度。

请注意，在这个 jsFiddle 中，您会看到需要进行调整以“填补空白”，即当前实时 CSS 在使用时使用`100%`的，但您可以将其更改为您需要的确切***像素值***。

[**jsFiddle DEMO v2 100% 宽度**](http://jsfiddle.net/n9dXq/1/)

[**jsFiddle DEMO v3 像素宽度**](http://jsfiddle.net/n9dXq/2/)

提醒：v2 和 v3 中使用的边框增加了面包屑的大小。

# ios - RestKit 将 null 值返回为 " "来自 JSON 响应

> ID：14150298
> 
> 赞同：0
> 
> 时间：2013-01-04T02:32:38.623
> 
> 标签：ios, xcode, json, restkit, nsuserdefaults

我从 restkit 得到的 JSON 响应中有一个奇怪的错误。

我向服务器发出一个 post 请求，它响应`"someVal" = "<null>"`而不是`"someVal" = null`. 这导致 xcode 以一种非常奇怪的方式处理它，因此我似乎无法将其保存到 NSUserDefaults ......而且我不能像正常的空值一样删除它......它会被检测为什么？我想也许是一个字符串？但是不……由于某种原因，它不能将其保存为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:44:44.440

我不认为这个问题仅限于 RestKit。更多来自为您提供 JSON 的服务器。我在使用 AFNetworking 时遇到了同样的问题。

我找到了这个 Dictionary 类别，您可以使用它来删除空值并替换为空字符串。您可以使用它或只是将逻辑撕掉以对您的空值进行排序。

```
@implementation NSDictionary (JRAdditions)

- (NSDictionary *) dictionaryByReplacingNullsWithStrings {

    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:self];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for(NSString *key in self) {
        const id object = [self objectForKey:key];
        if(object == nul) {
            //pointer comparison is way faster than -isKindOfClass:
            //since [NSNull null] is a singleton, they'll all point to the same
            //location in memory.
            [replaced setObject:blank forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:replaced];
}

+ (NSDictionary *)dictionaryByReplacingNullsWithStrings:(NSDictionary *)dict {
    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:dict];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for(NSString *key in dict) {
        const id object = [dict objectForKey:key];
        if(object == nul) {
            //pointer comparison is way faster than -isKindOfClass:
            //since [NSNull null] is a singleton, they'll all point to the same
            //location in memory.
            [replaced setObject:blank forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:replaced];
}

@end

// you can use this category on your dictionaries.
NSDictionary *jsonDict = JSON;
jsondict = [jsonDict dictionaryByReplacingNullsWithStrings]; 
```

# php - 学习如何在我的 PHP 设计的网站上实现信用卡处理的一些好的资源是什么？

> ID：14150301
> 
> 赞同：-1
> 
> 时间：2013-01-04T02:33:15.227
> 
> 标签：php, shopping-cart, credit-card

> **可能重复：**
> [什么是学习使用 PHP 处理信用卡的好教程或书籍？](https://stackoverflow.com/questions/1938714/what-is-a-good-tutorial-or-book-to-learn-credit-card-processing-using-php)

我在我的网站上使用 PHP、MySQL、Javascript 和 HTML5，我想设置一个购物车并接受信用卡付款。我想开发自己的系统，而不是购买预制的购物车应用程序。我以前从来没有这样做过，我不知道从哪里开始。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:29:12.120

每个信用卡处理器都实现了自己的 API。您需要阅读他们的文档并编写代码以使用他们的 API。其中许多都带有客户端库，您可以使用它们来帮助您入门。

我建议不要尝试存储信用卡号码，那么您需要符合 PCI 标准，这是一项很大的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:36:17.537

如果您刚刚开始集成支付网关，我建议您尝试使用直接支付[https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside的](https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside)**PayPal**信用卡 。他们提供了自己的沙盒帐户、几个支持 API 和库以及许多文档来帮助您完成。

# c# - C# ASP.NET 母版页和 ChildPage - 将字符串从子页分配到母版页

> ID：14150307
> 
> 赞同：1
> 
> 时间：2013-01-04T02:34:02.553
> 
> 标签：c#, asp.net, inheritance, master-pages, radgrid

这是我的子页面文件和我的母版页文件的部分。我要将 strName 从子页面传递到母版页。我想在子页面中访问此母版页变量，并将子页变量分配给页面加载上或之前的母版页。我经常得到最后选择的值但不是当前值

例如，鉴于记录显示 Mary、John、Peter、

如果我单击 Mary ，则显示 none 如果我单击 Peter，则显示 Mary 如果我舔 John，则显示 Peter

您能否建议并展示如何解决此问题？

以下是我的代码

```
 protected void grdNameSelection_ItemCommand(object sender, GridCommandEventArgs e) 
    {
        RadGrid CurrentGrid = (RadGrid)sender;
        GridData GridSource = PageSource.GrdSrcNameSelection;
        String a = GridSource.state.ToString();

        if (e.CommandName == "SelectCurrent")
        {
            foreach (GridDataItem item in CurrentGrid.SelectedItems)
            {

                RowData row = (RowData)GridSource.Current[item.DataSetIndex];
                string Name = row.Name;
            }
        }
    }
 protected void grdCompanySelection_PreRender(object sender, EventArgs e)
    {
        UserSession.Instance.CurrentName= Name ;

        RadGrid CurrentGrid = (RadGrid)sender;
        GridData GridSource = PageSource.GrdSrcCompanySelection;
        CommandButtonDisplay(GridSource, CurrentGrid);

    } 
```

母版页

```
 protected void Page_init(object sender, EventArgs e)
    {

    }
    protected void Page_Load(object sender, EventArgs e)
    {
        lblHeader.Text = UserSession.Instance.CurrentName;

        if (!Page.IsPostBack)
        {  ,,,, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:41:42.823

不幸的是，MS 没有提供一个很好的方法来做到这一点。你基本上有两个选择。

1.  从子页面访问控件，然后设置您需要的任何值（`this`示例中为子页面）：

    ```
    Label label1 = this.Master.FindControl("Label1") as Label;
    label1.Text = "Hello"; 
    ```

2.  **首选**在母版页上提供某种设置器。这是“更安全”的，因为子页面不直接操作主控的控件。

    ```
     MyType master = this.Master as MyType;
     if(master == null)
        return;

     master.MyProperty = "something";

     // In master page
     public string MyProperty
     {
        get { return label.Text; }
        set { label.Text = value; }
     } 
    ```

# asp.net - ORA-01000: 在 asp.net 中超过了最大打开游标

> ID：14150311
> 
> 赞同：0
> 
> 时间：2013-01-04T02:34:21.543
> 
> 标签：asp.net, oracle, visual-studio-2008, oracle10g

我面对

> ORA-01000: 超出最大打开游标

在 IIS 上托管 ASP 网页后。当我用 Visual Studio 测试网页时。最大打开游标超出问题不会发生。

1.  问题的原因是什么以及我该如何解决
2.  当我关闭并释放 Oracle 连接时，打开的游标会自动关闭吗？如果没有，我该如何关闭它们？

我用来关闭和释放连接的代码

```
rdr.Close()
rdr.Dispose()
cmd.Connection.Close()
cmd.Connection.Dispose()
For Each para As OracleParameter In cmd.Parameters
    para.Dispose()
Next
cmd.Dispose()
con.Close()
con.Dispose() 
```

我的用法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:17:08.457

根据您对其他答案的回复，您的问题很可能是 IIS Web 服务器正在使用连接池进行数据库连接。连接池将创建许多连接，并且从数据库的角度来看，它们会长时间保持打开状态。这样做是因为假设打开数据库连接相对于显示页面的持续时间而言是耗时的。

您需要检查 IIS 的配置并禁用连接池（不推荐），或者使池大小更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:50:47.450

我无法告诉您您是否正确使用了 asp，因为您发布的代码不完整。但是 open_cursors init.ora 参数决定了一个数据库会话一次可以打开多少个游标。要确定您是否正在泄漏游标或参数是否设置得太低，第一步是确定 init.ora 参数 open_cursors 的当前值。

确定哪些游标是打开的（可能忘记关闭）。您可以使用视图 v$open_cursor。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:15:34.260

如果没有更多代码，很难说这里会发生什么，但我可以做出一个很好的猜测： **你没有正确关闭你的连接！**

任何你看到手动调用 .Close() 或 .Dispose() 关于数据库连接的地方，这些调用**必须**位于一个`finally`块中（优先考虑，为`using`语句创建的隐式 finally 块）。否则，如果您的数据库代码引发任何异常，您可能会跳过 .Close() 调用，从而使连接保持打开状态，因此容易受到诸如最大打开游标问题之类的影响。

它应该看起来更像这样：

```
using (var con = new OracleConnection(...))
using (var cmd = new OracleCommand(" sql here ", con))
{
    cmd.Parameters.Add( ... ).Value = ...

    using (var rdr = cmd.ExecuteReader())
    {
        while (rdr.Read())
        {
            //...
        }
    }
} 
```

我知道我跳过了那里的一些东西（...），但这就是要点。我没有跳过对 .Close() 或 .Dispose() 的任何调用。`using`块会自动为我们处理这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T14:00:05.120

我有一批使用相同的 oracle 连接对 bd 进行许多请求。为了解决这个问题，我在 rdr.read() 之后关闭了我的 ref_cursor。这对我有用。只需 rdr.close()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T17:28:48.527

处理 OracleCommand：

```
OracleCommand cmd = new OracleCommand();
cmd.Dispose(); 
```

但是，您还需要处理和关闭 OracleDataReader：

```
OracleDataReader DataReader = Util.ExecuteDataForQuery(); // this returns the OracleDataReader object
// use it for your purpose
DataReader.Close();
DataReader.Dispose(); 
```

# spring - 在 web.xml 中移动 Spring/Hibernate XML 引用会破坏它——为什么？

> ID：14150312
> 
> 赞同：1
> 
> 时间：2013-01-04T02:34:23.473
> 
> 标签：spring, hibernate, web.xml

我正在编写一个 Spring/Hibernate 程序并从一个 Internet 示例开始。我复制了这个例子，解决了很多配置问题，并让首页正常工作。

我不喜欢我设置 web.xml 页面的方式。我想将 hibernate-context.xml 从 servlet 部分移动到较早的 context-param 部分。收集 XML 引用是我在其他网站上看到的一种模式。

这种改变对我不起作用。有人能告诉我为什么吗？我在下面包含了我的 XML 设置。

对于设置“B”，这里是启动日志：

```
[snip]
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Thu Jan 03 20:10:41 CST 2013]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/hibernate-context.xml]
INFO : org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/spring/appServlet/spring.properties]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1b071c0: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,sessionFactory,dataSource,transactionManager]; root of factory hierarchy
[snip]

INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'appServlet-servlet': startup date [Thu Jan 03 20:10:44 CST 2013]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[snip] 
```

在“好”和“坏”设置中，Hibernate XML 都被加载。当然，“好”的设置会更快。

```
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/hibernate-context.xml]
INFO : org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/spring/appServlet/spring.properties] 
```

当我尝试使用“错误”设置的网页时，我得到了这个异常：

```
Jan 3, 2013 8:12:46 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/ticketexchange] threw exception [Request processing failed; nested exception is org.hibernate.HibernateException: No Session found for current thread] with root cause
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:941)
    at org.krams.tutorial.service.PersonService.getAll(PersonService.java:40)
    at org.krams.tutorial.controller.MainController.getRecords(MainController.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[snip] 
```

有人可以解释一下吗？

这是我的配置文件：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>    <!-- This setup "A" works -->
        <!-- <param-value>/WEB-INF/spring/root-context.xml /WEB-INF/spring/appServlet/hibernate-context.xml</param-value> -->       <!-- Once the commented sections are shifted, this setup "B" fails -->
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/spring/appServlet/servlet-context.xml  /WEB-INF/spring/appServlet/hibernate-context.xml</param-value>    <!-- This setup "A" works -->
            <!-- <param-value>WEB-INF/spring/appServlet/servlet-context.xml</param-value> -->        <!-- Once the commented sections are shifted, this setup "B" fails -->
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

休眠上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/tx
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
      ">

 <context:property-placeholder location="/WEB-INF/spring/appServlet/spring.properties" />

    <!-- Enable annotation style of managing transactions -->
 <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
    <!-- See http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate4/annotation/AnnotationSessionFactoryBean.html -->       
 <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/SessionFactory.html -->
 <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/Session.html -->
 <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
     p:dataSource-ref="dataSource"
     p:configLocation="${hibernate.config}"
     p:packagesToScan="org.krams.tutorial"/>

 <!-- Declare a datasource that has pooling capabilities--> 
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close"
    p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}"
    p:user="${app.jdbc.username}"
    p:password="${app.jdbc.password}"
    p:acquireIncrement="5"
    p:idleConnectionTestPeriod="60"
    p:maxPoolSize="100"
    p:maxStatements="50"
    p:minPoolSize="10" />

 <!-- Declare a transaction manager-->
 <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory" />

</beans> 
```

弹簧属性：

```
# database properties
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc:mysql://localhost/my_database
app.jdbc.username=my_username
app.jdbc.password=my_password

#hibernate properties
hibernate.config=/WEB-INF/spring/appServlet/hibernate.cfg.xml 
```

hibernate.cfg.xml，在 spring.properties 中声明：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>
   <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">true</property>
    <!-- This will drop our existing database and re-create a new one.
      Existing data will be deleted! -->
    <!--<property name="hbm2ddl.auto">create</property>-->
  </session-factory>
</hibernate-configuration> 
```

servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

     <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="org.krams.tutorial" />

</beans:beans> 
```

根上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:56:37.823

这可能不是您问题的答案，但将其移至“context-param”部分的正确方法是将您的 hibernate-context.xml 加载到 root-context.xml 文件中。只需添加这一行

```
<import resource="hibernate-context.xml" /> //Assuming both are in the same folder 
```

新 web.xml 的 servlet 部分将如下所示

```
 <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/appServlet/servlet-context.xml <param-value>    
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

你的 root-context.xml 将是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->
<import resource="hibernate-context.xml" /> //Assuming both are in the same folder

</beans> 
```

**解决您的问题**

分离你的组件扫描事务类和控制器。即在你的 servlet-context.xml

```
<context:component-scan base-package="org.krams.tutorial.yourControllerpackage" /> 
```

在你的 hibernate-context.xml

```
<context:component-scan base-package="org.krams.tutorial.yourDaoServicePackage" /> 
```

原因[在这里解释](http://java.dzone.com/articles/how-i-resolved)

# html - 如何在我的剃刀视图中显示辅助方法的值

> ID：14150313
> 
> 赞同：-2
> 
> 时间：2013-01-04T02:34:31.710
> 
> 标签：html, asp.net-mvc, razor

我在我的 asp.net mvc 应用程序的模型类中定义了以下辅助方法：-

```
 public string compnayname(string emailid)
        {
            string name = emailid.Split('@')[1].Split('.')[0];
            name = name.Substring(0, 1).ToUpper() + name.Substring(1);
            return name;
        } 
```

然后在我看来，我写了以下内容：-

```
<td>
                    @{string v = item.compnayname(item.AaaContactInfo.EMAILID);

                @Html.Display(v.ToString() )}
                </td> 
```

但是视图上没有显示任何内容？那么可能是什么问题？BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:50:15.593

您不需要代码块（即`@{}`）。尝试使用：

`<td> @item.companyname(item.AaaContactInfo.EMAILID) </td>`

# php - 变量总是返回单词“Null”

> ID：14150320
> 
> 赞同：0
> 
> 时间：2013-01-04T02:35:21.093
> 
> 标签：php, null, echo

如果选中“小于 16”复选框，则以下代码执行 query1；如果选中“16 或更多”复选框，则执行 query2。这完美地工作。

```
<?php
//error_reporting (E_ALL ^ E_NOTICE);
$conn = mysql_connect('localhost','student','student') or die(mysql_error());
mysql_select_db('vgs',$conn);

//Get Question 1
if (isset($_GET['q1option'])) 
{
    $q1option = $_GET['q1option'];
} 
else 
{
    $q1option = "Null";
}

echo("".$_GET['q1option']);
echo("".$q1option);

//Process Question 1
if ($q1option == "Less than 16") 
{
    $query1 = "UPDATE free_hours SET times_selected=times_selected+1 WHERE q1option='Less than 16'";
    $result1 = mysql_query($query1,$conn) or die(mysql_error());
}
if ($q1option == "16 or more") 
{
    $query2 = "UPDATE free_hours SET times_selected=times_selected+1 WHERE q1option='16 or more'";
    $result2 = mysql_query($query2,$conn) or die(mysql_error());
} 
```

但是，当我回显 $_GET['q1option'] 时出现以下错误。

“注意：未定义的索引：第 16 行 C:\wamp\www\Student\vgs\process_answers.php 中的 q1option”

第 16 行是这样的：

```
echo("".$_GET['q1option']); 
```

此外，当我回显 $q1option 时，它总是回显单词“Null”，即使选中了小于 16 并且“times_selected”值正在增加。

这里有什么问题？

谢谢你的帮助。

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:22:42.107

第一：包裹

```
echo("".$_GET['q1option']); 
```

进入

```
 if(isset($_GET['q1option'])){
      echo("".$_GET['q1option']);
    } 
```

为了摆脱通知，那么如果您的 $_GET 没有任何东西，请确保您使用或提交您的表单，并且您不会不小心尝试放置两个表单并提交另一个;)。整个代码（表单文件 + process_answers.php）在这里会有所帮助，这是肯定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:37:39.633

问题是您没有收到`GET`名为`q1option`. 使用调试器检查您的客户端代码并确保它正在发送。

您可以通过执行以下操作来查看服务器端接收到的内容：

```
error_log('$_GET: '.print_r($_GET, true)); 
```

（或者，如果您在安全的环境中，您可以将其回显）。

# c# - Generic Base Class with Constructor

> ID：14150327
> 
> 赞同：5
> 
> 时间：2013-01-04T02:36:10.820
> 
> 标签：c#, generics

I have a generic class that looks like this:

```
public class DataServiceBase<T> : Screen where  T : EntityManager, new (){

    private T _entityManager;

    public T EntityManager {
        get {
            if (_entityManager == null)
            {
                _entityManager = new T();
            }
            return _entityManager;
        }
    } 
```

Basically all I am trying to do is create an EntityManager of if it doesn't exist. This actually works fine. However, I need to modify this as T no longer has a parameterizerless constructor. And so I can't use this methodology at all.

But I do need the EntityManager strongly typed at the derived level of the DataService as different entity managers handled different entities.

I am not sure how to resolve this. One alternative I have tried is:

```
public DataServiceBase(EntityManager entityManager) {
        this._entityManager = entityManager;

    } 
```

In other words, I pass it into the constructor, but now I no longer have the property strong typed.

Greg

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T02:38:24.813

Just make the constructor argument take the generic type also

```
public DataServiceBase(T entityManager) {
    this._entityManager = entityManager;

} 
```

# mongodb - Mongo Query Builder Skip 被完全忽略。漏洞？

> ID：14150328
> 
> 赞同：1
> 
> 时间：2013-01-04T02:36:14.267
> 
> 标签：mongodb, mongodb-php, doctrine-mongodb

按照以下示例：[http ://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html)

我有：

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$query = $dm->createQueryBuilder('MainClassifiedBundle:Listing')->field('residentialOrCommercial')->equals($residentialOrCommercial);
        if ($propertyType != 'All Property Types')
            {
            $query->field('propertyType')->equals($propertyType);
            }

        $query->field('askingPrice')->range($minPrice, $maxPrice)->field('coordinates')->geoNear((float)$longitude, (float)$latitude)->spherical(true);

                if($radius!=0)
                {
                      $query->maxDistance($radius);
                }
        $classifieds = $query->limit(5)->skip(2)->getQuery()->execute(); 
```

一切正常，但是跳过字段没有任何区别。无论我输入 1 还是 1000，我都会得到相同的结果集。

我错过了什么？

**更新：我还在另一个文档集合上对此进行了测试，发现它有效。关于 geoNear 的一些东西是让我搞砸的东西。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:14:47.667

geoNear 是一个数据库命令，而不是一个查询运算符。因此，limit() 和 skip() 修饰符不适用于它。有关详细信息，请参阅[SERVER-3925](https://jira.mongodb.org/browse/SERVER-3925)。

如果您想在 MongoDB 中看到此功能，请关注并投票给 Jira 票。

# jquery - Jquery UI Spinner'不是函数'

> ID：14150329
> 
> 赞同：0
> 
> 时间：2013-01-04T02:36:20.747
> 
> 标签：jquery, jquery-ui

我希望有人可以帮助我，因为我读过的所有帖子似乎都表明微调器直到我正在使用的 1.9 才发布。我收到一个错误，即 .spinner 不是函数。这是我的代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
    $(document).ready(function () {
        $( "#ingAmount" ).spinner();
    });
</script> 
```

这是我的输入：

```
<input id="ingAmount" /> 
```

我已经为滑块使用了 jquery UI 库，它工作得很好，所以我不确定为什么它不能访问微调器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:35:15.673

我想通了。我在 Visual Studio 中使用 NuGet 来安装 AJAX 工具包......当我这样做时，它安装了一个没有微调器的旧版本的 Jquery UI。即使我在我的页面上使用了正确的脚本，它仍然可以访问旧的脚本。我使用 NuGet 更新 jquery 和 jquery 库，这些库又更新了与 AJAX 关联的库。

（我觉得好傻……）

# ios - 如何将 UIImage 视图和其中的文本保存到磁盘

> ID：14150331
> 
> 赞同：3
> 
> 时间：2013-01-04T02:36:27.457
> 
> 标签：ios, uiview, nsstring, uiimage, png

我有一个 iOS 应用程序，它使用 UIImage 子类视图和 UIBezierPath 在屏幕上绘制形状来绘制形状的线条。

这是绘制文本的代码：

```
// This is inside a loop
const unsigned int row       = i; 
const unsigned int column    = j;

NSString* rowColumnId = [[NSString alloc] initWithFormat:@"%d, %d", column, row ];
CGPoint textCoord = shapeCoord[0];
textCoord.x += 5;
textCoord.y += 5;

[rowColumnId drawAtPoint:textCoord withFont:[UIFont fontWithName:@"Helvetica" size:9.0]]; 
```

在屏幕上，一切看起来都很好；形状和文本在 iOS 模拟器和我的 iOS 设备中都可见

我需要将视图保存为 PNG 图像，因此我使用以下代码来执行此操作：

```
// set up the rendering context
CGSize  boardViewSize = [self bounds].size;
UIGraphicsBeginImageContext(boardViewSize);
[[self layer] renderInContext:UIGraphicsGetCurrentContext()];

// draw the view
UIImage*    viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// convert to PNG
NSData*     pngData  = UIImagePNGRepresentation(viewImage);
UIImage*    pngImage = [UIImage imageWithData:pngData];
return pngImage; 
```

当我保存 PNG 时，我看到的只是形状。

为了保存 NSString 绘制的文本还需要什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:50:38.600

好吧，我发现问题是黑色文本没有出现在透明的 PNG 上，尽管它在那里。

所以，上面列出的问题可以忽略。

# node.js - 在 node.js express 中，默认路由总是跳转到 index.html 静态文件

> ID：14150332
> 
> 赞同：2
> 
> 时间：2013-01-04T02:36:28.247
> 
> 标签：node.js, express, default, router

我的默认路由器是：

```
app.get('/', function (req, res) {
    console.log("default");
    res.send("ok");
}); 
```

`index.html`如果我的静态目录中没有 a ，则`log`and`send`将按原样输出，

但是当我添加时`index.html`，路由器会直接跳转到页面，然后我将名称更改`index`为另一个名称，它不会再次跳转。

为什么会这样？如何更改此设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T04:18:31.463

导致此行为的是您的中间件顺序和配置。您可能正在使用`static`中间件，并且默认情况下发生在`app.router`中间件之前。解决方案是：

*   将您的静态中间件配置为仅提供精确的文件匹配，而不提供任何自动`index.html`行为
*   放在`app.user(app.router);`你的静态中间件之前

# rspec - RSpec 控制器规范：确保控制器实例变量不会在多个“获取”之间交叉的任何方法

> ID：14150337
> 
> 赞同：6
> 
> 时间：2013-01-04T02:36:51.043
> 
> 标签：rspec

如果我们必须在同一个规范上下文中进行多次获取，控制器规范中是否有任何方法可以在每次获取之前“重置”实例变量空间？

我理解每个测试一个断言的指导方针。但是，对于我们的一组测试，如果我们在每次获取之前不进行单独的（冗长的） before(:each) 设置并且如果我们在单个上下文中一起运行一系列获取/断言，它的运行速度大约会快 3 倍.

但是，似乎（与通过浏览器调用控制器方法不同）如果您使用 rspec 执行两次连续获取，则每次获取都不会清除实例变量，因此数据交叉是可能的。

这是一个失败的测试，表明当另一个控制器方法 'vartest2' 运行时，在 'vartest1' 中设置的变量仍然存在：

控制器方法：

```
 def vartest1
    @this_var = "foo" 
    render :text => @this_var
  end

  def vartest2
    render :text => @this_var # should be EMPTY!
  end 
```

Rspec 控制器规格：

```
 describe "instance variable crossover example", :focus => true do
    describe "THIS PASSES put each get in separate contexts" do
      it "vartest1 outputs foo" do
        get "vartest1"
        response.body.should include("foo")
      end
      it "vartest2 does NOT output foo" do
        get "vartest2"
        response.body.should_not include("foo")
      end
    end
    describe "THIS FAILS put both gets in SAME context" do
      it "should not crossover controller instance varables" do
        get "vartest1"
        response.body.should include("foo")
        get "vartest2"
        response.body.should_not include("foo") # THIS FAILS
      end
    end
  end 
```

Rspec 结果：

```
 instance variable crossover example
    THIS PASSES put each get in separate contexts
      vartest1 outputs foo
      vartest2 does NOT output foo
    THIS FAILS put both gets in SAME context
      should not crossover controller instance varables (FAILED - 1) 
```

失败测试中发生的情况是，当 rspec`get 'vartest1'`控制器方法将实例变量设置为“foo”时，当 rspec 执行时`get 'vartest2'`，实例变量（应该为 nil）仍然设置，因此测试失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:12:54.027

控制器规格是单元测试。像所有单元测试一样，它们应该单独测试方法。对于控制器，这意味着每个操作都需要自己的规范。在控制器规范中执行多个请求不太可能让您获得任何帮助。

您可以考虑使用请求规范或 Cucumber。根据您的环境，这可能会为您带来更好的结果，因为每个示例只需要进行一次设置。然后你可以做多个`gets`（或`visits`）。

另一种可能性是为您的控制器规格使用模拟/存根。这可以显着提高性能，但代价是进行额外的设置。控制器规范的 RSpec 脚手架示例是这种方法的一个很好的起点。

# django - django 和“TemplateDoesNotExist”错误

> ID：14150341
> 
> 赞同：17
> 
> 时间：2013-01-04T02:37:37.363
> 
> 标签：django, django-templates

我有一个看起来很常见的初学者问题。

我正在处理我的第一个 django 项目，当我设置视图时，出现“TemplateDoesNotExist”错误。我现在花了很多时间在这上面 - 我知道有很多关于它的主题，但到目前为止没有任何帮助。

我希望我可以提供所有需要的信息，以便高级 django 用户可以直接看到我做错了什么。

我正在使用开发服务器。和 windows 7 & sqlite3。

这是我得到的错误：

```
TemplateDoesNotExist at /skates/
allsk8s.html
Request Method: GET
Request URL:    http://127.0.0.1:8000/skates/
Django Version: 1.4.3
Exception Type: TemplateDoesNotExist 
```

在 settings.py 我这样设置 TEMPLATE_DIRS ：

```
TEMPLATE_DIRS = (
    r'H:/netz2/skateprojekt/templates/',
) 
```

模板加载器如下所示：

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
) 
```

这是我的观点：

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from sk8.models import Sk8

def AllSk8s(request):
    skates      = Sk8.objects.all().order_by('name')
    context     = {'skates':skates}
    return render_to_response('allsk8s.html', context, context_instance=RequestContext(request)) 
```

它应该链接到 allsk8s.html - 看起来确实如此，但找不到该文件，尽管它肯定位于正确的文件夹中。但如您所见：

```
Template-loader postmortem
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
H:\netz2\skateprojekt\templates\allsk8s.html (File does not exist) 
```

这是我的 urls.py 的一部分

```
 urlpatterns = patterns('',
         url(r'^admin/', include(admin.site.urls)),
         (r'^skates/$', 'sk8.views.AllSk8s'),
 ) 
```

这是系统路径：

```
H:\netz2\skateproject\templates 
```

并且在模板文件夹中有一个名为 allsk8s.html 的文件，据我所知 - 这应该可以。我真的希望有人能帮助我，因为这是我第二次遇到这样的问题，我无法弄清楚问题所在。

在此先感谢丹尼尔

* * *

编辑：

我尝试将此添加到我的 settings.py 中：

```
import os
DIRNAME = os.path.abspath(os.path.dirname(__file__)) 
```

并将我的 TEMPLATE_DIRS 更改为：

```
TEMPLATE_DIRS = (
    os.path.join(DIRNAME, r'H:/netz2/skateprojekt/templates/'),
) 
```

因为我读过它会有所帮助 - 但它仍然返回相同的错误 - 所以我再次将它改回来。;(

* * *

编辑：

另外，我检查过，当我输入错误的网址时，它会引发此错误：

```
Using the URLconf defined in skateproject.urls, Django tried these URL patterns, in this order:
^admin/
^skates/$ 
```

所以溜冰鞋的网址应该在那里-但不能“解决”-我不明白:(

* * *

编辑：

我今天发现了一些新东西，Template-loader postmortem 说它还会检查这些目录：

```
Using loader django.template.loaders.app_directories.Loader:
C:\Python27\lib\site-packages\django\contrib\auth\templates\allsk8s.html (File does not exist)
C:\Python27\lib\site-packages\django\contrib\admin\templates\allsk8s.html (File does not exist) 
```

所以我将我的模板文件移到那里并收到一个新错误 - 通过将我的 html 文件从 ansi 转换为 utf8 和 tada 解决了这个问题 - 它有效。不幸的是，我不能让这个文件夹中的模板文件导致它不是项目的一部分。当我将文件移回原始位置时，我又回到了旧错误:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-04-01T07:33:08.227

此问题的解决方案之一是您应该在 settings.py 中添加应用程序。我假设您有一个名为发票的应用程序，那么解决方案是

```
INSTALLED_APPS = [
'invoice.apps.InoviceConfig',
'django.contrib.admin',
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-04T16:49:46.897

神的圣洁母亲！我解决了！

我不知道为什么 - 但这是“TemplateDoesNotExist”错误的解决方案（在我的情况下）。

我的文件夹结构是这样的：

netz2 > 滑板项目

到目前为止，我在skateproject 和settings.py 中有templates 文件夹，我指向了这个目录。当我尝试在 Firefox 中打开页面时，这引发了模板不存在错误。

因为skateproject 是那里的项目文件夹，所以我有一个文件夹sk8 - 这是我目前正在处理的应用程序，我正在尝试执行。解决方案非常简单。

我不得不在应用程序的子目录中移动模板。看起来像这样

netz2 > 滑板项目 > sk8 > 模板

现在它可以工作了！

因此，如果您有同样的问题，请确保您的模板文件夹不在项目的根目录中，而是您正在处理的应用程序的子目录 - 并将此路径添加到 settings.py Template_dirs

在我的示例中看起来像这样：

```
TEMPLATE_DIRS = (
    r'H:/netz2/skateprojekt/sk8/templates/',
) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-29T02:27:30.750

如果有人用 Django 1.7 和 Python 3 或更高版本尝试这个，我这样做了：

`TEMPLATE_DIRS = [os.path.join(BASE_DIR, 'mysite_dir/templates')]`

其中 myfile_dir 可以是 mysite 下的任何目录。文件结构将是这样的：

```
manage.py
mysite/  
  mysite/  
  mysite_dir/  
  templates/  
    ____init__.py  
    models.py  
    #...
  another_app/ 
```

这个答案可能看起来很重复，但我知道我总是喜欢从最近的日期看到事情......所以希望这会有所帮助

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T03:51:44.213

我为类似的问题苦苦挣扎了好几个小时，发现如果我使用模板将模板放在应用程序内的 /templates 子目录中，我可以加载模板。您甚至不需要在 settings.py 中设置 TEMPLATE_DIRS，该文件会自动找到。不幸的是，TemplateDoesNotExist 异常不是很具有描述性，在某些情况下确实是错误的。如果您在 Template-loader postmortem 中看到类似于以下内容的内容：

```
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/Users/me/mysite/myapp/index.html 
```

并且文件路径对于您尝试加载的模板看起来是正确的，文件可能存在但无法访问。尝试将其移动到应用程序的 /templates 子目录。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-23T16:21:59.167

如果您遵循 Django 的文档，他们建议对模板进行命名空间，在模板下，您在模板之前有 / **yourapp** /。见[这里](https://docs.djangoproject.com/en/1.11/intro/tutorial03/)。

所以你的结构可能看起来像：

```
Project Folder
--Project
--yourapp
  --templates
    --yourapp
      --layout.html 
```

但他们不清楚的是，对这些模板的任何硬编码引用（例如，**渲染**函数）也需要在这些模板前面加上您的应用程序名称！我以为 Django 正在为我们进行递归搜索，但我给了它太多的信任。您需要指向确切的链接。

**例如**

```
return render(request, "login.html") 
```

去

```
return render(request, "orders/login.html") 
```

在任何**扩展**语句或使用**静态**链接到文件的地方，您可能也需要这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-22T14:56:51.527

只需将源根目录中模板目录的路径粘贴到项目设置 dirs 变量中即可。它应该看起来像这样

```
 'DIRS': [
        'templates'
    ], 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-17T16:29:00.833

对我来说`{% include 'some.html' %}`是抛出这个错误。确保包括前导`./`，例如： `{% include './some.html' %}`

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2016-02-29T17:37:14.573

只需在 Django 设置文件中将 DEBUG 设置为 false

# google-maps - 谷歌地图路线规划器新增模式的历史？

> ID：14150349
> 
> 赞同：0
> 
> 时间：2013-01-04T02:38:57.093
> 
> 标签：google-maps

有谁知道添加到谷歌地图路线规划器的不同模式的时间表？我知道他们是从行车路线开始的——那是哪一年？他们什么时候增加了骑自行车、步行和公交的选项？

我之所以问，是因为我正在写一个我写的小应用程序，它可以让你并排比较四种模式：请参阅[比较驾驶、步行、骑自行车和过境](http://www.mvjantzen.com/blog/?p=2684)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:29:36.610

*   2007：[驾驶](http://googlemapsapi.blogspot.de/2007/05/driving-directions-support-added-to.html)
*   2008 年：[步行](http://googlegeodevelopers.blogspot.de/2008/09/walking-directions-avoid-highways-my.html)
*   2010：[骑自行车](http://googlegeodevelopers.blogspot.de/2010/03/good-day-for-salesmen-that-travel-on.html)
*   2012：[过境](http://googlegeodevelopers.blogspot.com.au/2012/06/public-transit-routing-and-layer-now.html)

# ios - 带有自定义 UITextView 单元格的 TableView 将导航栏滚动到屏幕外

> ID：14150350
> 
> 赞同：1
> 
> 时间：2013-01-04T02:39:24.053
> 
> 标签：ios, uitableview, uitextview

我正在编写一个具有分组 tableView 的应用程序，该应用程序具有包含 UITextViews 在模态 segue 中的自定义单元格。我希望能够编辑每个单元格/文本视图中的文本。我的问题是滚动视图底部的单元格/文本视图，以便它们出现时出现在键盘上方。

编辑：prepareForSegue 按照评论中的要求：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"update info"]) {
        UpdatesTableViewController *uvc = (UpdatesTableViewController *)segue.destinationViewController;
        uvc.dumpInfo = self.dumpInfo;
    }
} 
```

如果我使用 UITableView 控制器，一切都会很好 - 当 textview 成为 firstResponder 时，每个单元格/文本视图都会向上滚动到视图顶部，因此可以在编辑时看到它。但是当 tableView 滚动时，我添加到 tableView 顶部的导航栏会滚动。

如果我使用 UIViewController 并添加导航栏和表格视图，我可以使用 UITableView scrollToRowAtIndexPath:atScrollPosition:animated: 方法让它向上滚动单元格。导航栏保持固定。但是底部的单元格不能向上滚动到足以显示的高度。

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    CGPoint location = [textView.superview convertPoint:textView.center toView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition: UITableViewScrollPositionTop animated:YES];
} 
```

UITableView 控制器正在做一些很酷的魔法来完成这项工作——我想做的就是将导航栏固定在视图顶部的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:59:22.390

您可以按照我的评论中所述使用`UITableViewController`Wrapped in 。`UINavigationController`这将在屏幕上显示默认导航栏，并且不会与 tableview 一起滚动。`UITableViewController`需要设置为`UINavigationController`.

由于您面临崩溃`[UINavigationController setDumpInfo:]: unrecognized selector sent to instance`，您需要将您的 prepareForSegue 方法更改为，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"update info"]) {
        UINavigationController *nav = (UINavigationController *)segue.destinationViewController;
        UpdatesTableViewController *uvc = (UpdatesTableViewController *)nav.topViewController;
        uvc.dumpInfo = self.dumpInfo;
    }
} 
```

在这种情况下，基本上dumpInfo 被调用`navigationController`而不是你的。`tableviewcontroller`

# code-analysis - 多项目分析中的声纳安全性

> ID：14150351
> 
> 赞同：0
> 
> 时间：2013-01-04T02:39:25.643
> 
> 标签：code-analysis, sonarqube, static-code-analysis, windows-security, sonar-runner

我有一个**Sonar**实例来分析不同客户拥有的不同项目的代码库。我需要确保没有项目团队可以操纵声纳/机器安全来访问其他项目的代码库（例如通过恶意单元测试，或通过脚本创建后门）。

我可以使用 Windows 安全性来创建只能访问项目特定文件夹的受限用户帐户。然后，我可以使用该 Windows 帐户安排任务以从 SCM 执行代码下载并触发 Sonar Runner 以触发分析。

现在我的问题是这个。当我在特定 Windows 用户帐户下运行 Sonar Runner 时，真正的声纳分析/单元测试执行是否会在该特定用户帐户的沙箱中运行？

如果没有，是否有一种方法可以对不同的项目进行沙箱化以实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:35:12.480

我不知道 Windows 安全性是如何工作的，但一般来说，创建一个具有受限权限的用户（或多个用户，如果你愿意的话）确实应该可以保护你的 Sonar 服务器免受大多数问题的影响。

# javascript - 流星中的 SQL 外键类似行为 - MongoDB

> ID：14150353
> 
> 赞同：3
> 
> 时间：2013-01-04T02:39:33.960
> 
> 标签：javascript, mongodb, meteor

有谁知道如何在 Meteor（javascript Web 框架）中实现类似外键的行为？

我认为 MongoDB 的工作方式与 sqlite3 或 MySQL 不同。我还在某处读到，除了使用外键之外，还有一种方法可以实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:18:44.897

MongoDB 是文档存储，而不是关系数据库。因此，没有具有级联更新等功能的外键概念。但是，您仍然可以通过 _id（类似于主键）从另一个文档中引用一个文档。因此，您可以拥有一个包含以下文档的 User 集合：

```
{
  _id: "myId",
  name: "Rahul",
  locationId: "some_location_id"
} 
```

如果您想了解有关位置的更多信息，可以在 Location 集合中搜索一个文档，其 _id 等于您存储在用户文档中的 locationId。

有关如何处理此问题的更多信息，请参阅[mongo 中的外键。](https://stackoverflow.com/questions/6334048/foreign-keys-in-mongo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:26:41.273

[作为非关系型数据库](http://www.mongodb.org/display/DOCS/Introduction)，Mongo 不像传统的关系型数据库那样支持连接。然而，作为一个文档数据库，Mongo[允许文档嵌套](http://seanhess.github.com/2012/02/01/mongodb_relational.html)，这可以很好地实现您想要的，而无需传统的连接。

也就是说，Meteor 核心小组确实[有计划](https://trello.com/c/BGvIwkEa)轻松地允许加入订阅，以及[支持传统的关系数据库](https://trello.com/c/Gf6YxFp2)。

# javascript - 周期性计时器不适用于.load

> ID：14150356
> 
> 赞同：-1
> 
> 时间：2013-01-04T02:39:48.620
> 
> 标签：javascript, jquery

**问题：**

我相信 .load 是阻塞的，但它是异步的。

**代码：**

```
$(window).load(function(){
    $('#content').load('/ajax/databaseworking.php');
    setTimeout(function(){ $('#content').load('/ajax/databaseperform.php');}, 5000);
});
</script> 
```

**更多详细信息：**

代码基本上调用databaseworking.php 来做一些数据库维护。每 5 秒进行一次 ajax 调用以获取其进度。

我检查了我的日志。正在调用 databaseworking.php 和 databaseperform.php。但是，不会定期调用 databaseperform.php。换句话说，它只被调用一次。

作为测试，我注释掉了 databaseworking 调用。这导致按预期按间隔调用进度函数。这让我相信负载有问题。注意我已经检查并测试了 databaseworking.php 并且那里不应该有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:42:06.223

`setTimeout`只会运行一次。我相信您想使用`setInterval`哪个是循环计时器

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:47:40.890

您需要在函数中设置新的超时。

```
$(window).load(function(){
    var loadContent = function() {
      $('#content').load('/ajax/databaseperform.php');
      setTimeout(loadContent, 5000);
    };
    loadContent();
}); 
```

您可以看到为什么这可能比在`setInterval`这里使用更可取：[https ://stackoverflow.com/a/731625/330013](https://stackoverflow.com/a/731625/330013)

# linux - 带有 SSL 的 tomcat APR - 端口 98 已在使用/服务器 SSL 协议无效

> ID：14150360
> 
> 赞同：0
> 
> 时间：2013-01-04T02:40:33.847
> 
> 标签：linux, tomcat, ssl, apr

尝试在 tomcat 6.x 服务器上运行启用 SSL 的应用程序时出现错误。启用 APR。

我像这样创建了证书：

```
openssl genrsa -des3 -out key.pem 2048
passphrase

openssl req -new -x509 -key key.pem -out cert.pem -days 1095
passphrase 
```

我的 ssl 配置如下所示：

```
<Connector protocol="org.apache.coyote.http11.Http11AprProtocol"
           port="8444" minSpareThreads="5" maxSpareThreads="75"
           enableLookups="true" disableUploadTimeout="true"
           acceptCount="100"  maxThreads="200"
     scheme="https" secure="true" SSLEnabled="true"
           clientAuth="false" sslProtocol="TLS"
                   SSLCertificateFile="/usr/local/tomcat/conf/ssl/cert.pem"
           SSLCertificateKeyFile="/usr/local/tomcat/conf/ssl/key.pem"
                  SSLPassword="passphrase"/>
           /> 
```

您可能会注意到这些端口是非标准的。这是因为我在这个系统上有两个独立的 tomcat 应用程序，它们都使用 SSL。我认为这不是问题，因为即使我关闭了另一个 tomcat 并且只运行有问题的 tomcat 实例，我也会得到同样的错误。

因此，一个实例使用 8080/8443，而问题一个使用 8081/8444。
好的 tomcat 实例总是可以完美运行。没有ssl，问题安装工作正常。我试过只运行问题实例，但我仍然遇到同样的问题，所以我认为问题与此无关，但我认为我应该披露。我还尝试在坏的那个上使用功能正常的 tomcat 的 ssl 密钥和证书，但仍然遇到相同的错误，所以我认为也不是这样。

因此，我很困惑。

以下是我不断收到的错误：

```
SEVERE: Error initializing endpoint java.lang.Exception: Invalid Server SSL Protocol
        at org.apache.tomcat.jni.SSLContext.make(Native Method)
        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:680)
        at org.apache.coyote.http11.Http11AprProtocol.init(Http11AprProtocol.java:107)

LifecycleException:  Protocol handler initialization failed: java.lang.Exception: Invalid Server SSL Protocol
        at org.apache.catalina.connector.Connector.initialize(Connector.java:1060)
        at org.apache.catalina.core.StandardService.initialize(StandardService.java:677)
        at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:795)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:530)

SEVERE: Error starting endpoint
java.lang.Exception: Socket bind failed: [98] Address already in use
        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:612)
        at org.apache.tomcat.util.net.AprEndpoint.start(AprEndpoint.java:717)
        at org.apache.coyote.http11.Http11AprProtocol.start(Http11AprProtocol.java:137)
        at org.apache.catalina.connector.Connector.start(Connector.java:1131)
        at org.apache.catalina.core.StandardService.start(StandardService.java:531)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)

LifecycleException:  service.getName(): "Catalina";  Protocol handler start failed: java.lang.Exception: Socket bind failed: [98] Address already in use
        at org.apache.catalina.connector.Connector.start(Connector.java:1138)
        at org.apache.catalina.core.StandardService.start(StandardService.java:531)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288) 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-06T06:55:56.160

将标签中的协议从“org.apache.coyote.http11.Http11AprProtocol”更改为“org.apache.coyote.http11.Http11NioProtocol”并尝试一次

# c++ - 如何发送/接收 RTP 音频流（C++）？

> ID：14150365
> 
> 赞同：1
> 
> 时间：2013-01-04T02:41:19.717
> 
> 标签：c++, qt, mingw, rtp

对不起，我英语说得不好。

我做了两个项目（QT、c++、mingw32）。

它使用 RTP(ortp-0.20.0) 发送/接收音频流。

但是，接收到的声音是失真的。（输出声音失真。）

任何人都可以帮忙吗？

RTPSend.cpp

```
#include <ortp/ortp.h>  // ortp-0.20.0

RtpSession *session;
unsigned char buffer[160];

#include <windows.h>
#include <stdio.h>
#include <iostream>
using namespace std;

#define BS 8000
int sampleRate = 8000; // 8000, 11025, 16000, 22050, 24000, 32000, 44100
int NUMPTS = sampleRate * 10;  // 10 seconds
short int waveIn[BS];
HWAVEIN hWaveIn;
WAVEHDR WaveInHdr;
MMRESULT result;
WAVEFORMATEX pFormat;

uint32_t user_ts = 0;

void CALLBACK waveInProc(HWAVEIN hwi, UINT uMsg, DWORD dwInstance, DWORD dwParam1, DWORD dwParam2)
{
    WAVEHDR *pHdr=NULL;
    WAVEHDR pHdr2;
    switch(uMsg)
    {
        case WIM_CLOSE:
            cout << "waveInProc()... WIM_CLOSE" << endl;
            break;

        case WIM_DATA:
            {
                pHdr = (WAVEHDR *)dwParam1;
                pHdr2.lpData = (LPSTR)pHdr->lpData;
                pHdr2.dwBufferLength = pHdr->dwBufferLength;
                pHdr2.dwBytesRecorded = pHdr->dwBytesRecorded;
                pHdr2.dwUser = 0;
                pHdr2.dwFlags = 0;
                pHdr2.dwLoops = 0;

                cout << "waveInProc()... WIM_DATA : " << "pHdr->dwBufferLength:" << pHdr->dwBufferLength << "  pHdr->dwBytesRecorded:" << pHdr->dwBytesRecorded<< endl;

                int len = pHdr->dwBytesRecorded;
                for(int i=0; i<len;) {
                    int length = 160;
                    if(len-i < 160) length=len-i;
                    memcpy(buffer, pHdr->lpData+i, length);
                    rtp_session_send_with_ts(session, buffer, length, user_ts);
                    user_ts+=160;
                    i+=length;
                }

                waveInPrepareHeader(hwi, pHdr, sizeof(WAVEHDR));
                waveInAddBuffer(hwi, pHdr, sizeof(WAVEHDR));

            }
            break;

        case WIM_OPEN:
            cout << "waveInProc()... WIM_OPEN" << endl;
            break;

        default:
            break;
    }
}

int main(int argv, char **args)
{
    ortp_init();
    ortp_scheduler_init();
    ortp_set_log_level_mask(ORTP_MESSAGE|ORTP_WARNING|ORTP_ERROR);
    session=rtp_session_new(RTP_SESSION_SENDONLY);

    rtp_session_set_scheduling_mode(session,1);
    rtp_session_set_blocking_mode(session,1);
    rtp_session_set_connected_mode(session,TRUE);
    rtp_session_set_remote_addr(session,"192.168.0.181",61610);
    rtp_session_set_payload_type(session,0);

    pFormat.wFormatTag = WAVE_FORMAT_PCM;
    pFormat.nChannels = 1;
    pFormat.nSamplesPerSec = sampleRate;
    pFormat.nAvgBytesPerSec = 2 * sampleRate;
    pFormat.nBlockAlign = 2;
    pFormat.wBitsPerSample = 16;
    pFormat.cbSize = 0;

    result = waveInOpen(&hWaveIn, WAVE_MAPPER, &pFormat, (DWORD_PTR)waveInProc, NULL, CALLBACK_FUNCTION);

    if(result) {
        cout << "Failed to open waveform input device." << endl;
        return -1;
    }

    WaveInHdr.lpData = (LPSTR)waveIn;
    WaveInHdr.dwBufferLength = BS;
    WaveInHdr.dwBytesRecorded = 0;
    WaveInHdr.dwUser = 0;
    WaveInHdr.dwFlags = 0;
    WaveInHdr.dwLoops = 0;
    waveInPrepareHeader(hWaveIn, &WaveInHdr, sizeof(WAVEHDR));

    result = waveInAddBuffer(hWaveIn, &WaveInHdr, sizeof(WAVEHDR));
    if(result) {
        cout << "Failed to read block from device" << endl;
        return -1;
    }

    result = waveInStart(hWaveIn);
    if(result) {
        cout << "Failed to start recording" << endl;
        return -1;
    }

    cout << "Recording..." << endl;

    Sleep((NUMPTS/sampleRate) * 1000);

    waveInUnprepareHeader(hWaveIn, &WaveInHdr, sizeof(WAVEHDR));
//  waveInClose(hWaveIn);

    rtp_session_destroy(session);
    ortp_exit();
    ortp_global_stats_display();

    return 0;
} 
```

RTPRecv.cpp

```
#include <ortp/ortp.h> // ortp-0.20.0

#include <windows.h>
#include <stdio.h>
#include <iostream>
using namespace std;

int sampleRate = 8000; // 8000, 11025, 16000, 22050, 24000, 32000, 44100
WAVEHDR WaveOutHdr;
MMRESULT result;
HWAVEOUT hWaveOut;
WAVEFORMATEX pFormat;

int main(int argv, char **args)
{
    pFormat.wFormatTag = WAVE_FORMAT_PCM;
    pFormat.nChannels = 1;
    pFormat.nSamplesPerSec = sampleRate;
    pFormat.nAvgBytesPerSec = 2 * sampleRate;
    pFormat.nBlockAlign = 2;
    pFormat.wBitsPerSample = 16;
    pFormat.cbSize = 0;

    if(waveOutOpen(&hWaveOut, WAVE_MAPPER, &pFormat, 0, 0, WAVE_FORMAT_DIRECT))
    {
        MessageBoxA(NULL, "Failed to replay", NULL, MB_OK | MB_ICONEXCLAMATION );
    }

    RtpSession *session;

    int jittcomp=40;
    bool_t adapt=TRUE;

    ortp_init();
    ortp_scheduler_init();
    ortp_set_log_level_mask(ORTP_DEBUG|ORTP_MESSAGE|ORTP_WARNING|ORTP_ERROR);
    session=rtp_session_new(RTP_SESSION_RECVONLY);
    rtp_session_set_scheduling_mode(session,1);
    rtp_session_set_blocking_mode(session,1);
    rtp_session_set_local_addr(session,"0.0.0.0",61610);
    rtp_session_set_connected_mode(session,TRUE);
    rtp_session_set_symmetric_rtp(session,TRUE);
    rtp_session_enable_adaptive_jitter_compensation(session,adapt);
    rtp_session_set_jitter_compensation(session,jittcomp);

    rtp_session_set_payload_type(session,0);

    rtp_session_signal_connect(session,"ssrc_changed",(RtpCallback)rtp_session_reset,0);

    unsigned char buffer[160];
    int have_more;
    int err;
    uint32_t ts=0;
    int stream_received=0;

    while(1) {
        have_more=1;
        while (have_more){
            err=rtp_session_recv_with_ts(session, buffer, 160, ts, &have_more);
            if (err>0) stream_received=1;
            if ((stream_received) && (err>0)) {
                WaveOutHdr.lpData = (LPSTR)buffer;
                WaveOutHdr.dwBufferLength = 160;
                WaveOutHdr.dwBytesRecorded = 160;
                WaveOutHdr.dwUser = 0;
                WaveOutHdr.dwFlags = 0;
                WaveOutHdr.dwLoops = 0;
                waveOutPrepareHeader(hWaveOut, &WaveOutHdr, sizeof(WAVEHDR));
                waveOutWrite(hWaveOut, &WaveOutHdr, sizeof(WAVEHDR));
            }
        }
        ts+=160;
    }

    waveOutUnprepareHeader(hWaveOut, &WaveOutHdr, sizeof(WAVEHDR));
    waveOutClose(hWaveOut);

    rtp_session_destroy(session);
    ortp_exit();
    ortp_global_stats_display();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:18:53.703

您可以在客户端制作一个大缓冲区。例如：一个缓冲区持有 10 秒。尝试接收小缓冲区并将其添加到大`waveOutGetPosition()`缓冲区，并不断释放主缓冲区，然后`waveOutWrite()`在`WOM_DONE`消息之后。

# c# - 在 MVC 中更新实体属性

> ID：14150369
> 
> 赞同：2
> 
> 时间：2013-01-04T02:42:01.090
> 
> 标签：c#, asp.net-mvc, nhibernate

我正在使用 MVC 3 Razor (c#)，在我看来，我正在显示一个用户只能更新 Name 属性的实体。

```
public class Product{
    public Guid Id {get; set; }
    public string Name {get; set;}
    public string Type {get; set;}
  } 
```

为了防止在再次保存之前从数据库中加载整个对象，我使用了如下方法：

```
public void UpdateProduct(Guid id, Hashtable propertiesToUpdate) {} 
```

在业务对象中，允许通过 AJAX 请求或表单 Post 更新实体的一组属性。（数据恒定性是使用时间戳完成的）。

我查看了其他方法，例如在检测到更改时使用 INotifyPropertyChanged 更新属性，但这似乎只有在您能够在请求之间保留实例或在进行更改之前加载整个实体时才有用（这似乎很重） .

我看到 NHibernate 在类似的想法中使用动态更新。这是否会导致 NHibernate 从数据库加载数据并在生成更新语句之前进行比较？

是否有最好的方法在请求之间保持正在编辑的对象（Session []？），或者更新单个属性的不太笨拙的方法（不移动到实体属性值模型）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:57:12.453

除了处理路由和控制器实例化的应用程序本身之外，MVC 中没有状态。您不想尝试将某种状态硬塞到应用程序中，因为没有好的方法可以保证它不会像 AppDomain 回收中那样被随机破坏。在加载页面时从数据库中检索记录一次并在使用 POST 数据更新它时再次检索记录是否有问题？我相信这就是通常的做法。NHibernate 唯一可能需要很长时间的事情是创建 SessionFactory，其他一切都非常快。

编辑：根据您的评论扩展，NHibernate 在那里，因此您不必担心模型（数据库）和控制器之间的接口的实现细节。它是一个为您处理所有管道的框架。以模块化方式构建您的应用程序，以便以后可以轻松地将重要功能交换为其他功能，而不会在整个应用程序中产生连锁反应。使用存储库模式包装 NHiberante 逻辑。然后，您将来可以使用不同的 ORM，而无需更改控制器与数据层通信的方式。您可能想研究控制反转/依赖注入来帮助解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:21:27.513

**简而言之：**做到这一点的干净方法是获取您想要更新的实体标识参数和一组属性值，并将它们传递给服务层。

在服务层中，您可以使用实体标识符调用您的存储库并检索单个实体并更新您想要执行的特定属性。

但是，常见的方法是使用[**DTO 对象**](http://en.wikipedia.org/wiki/Data_transfer_object) 原则来干净地简化您的 CRUD 操作。有关[DTO 及其有用处的更多信息。](https://stackoverflow.com/q/1051182/1437962)

# c++ - 如何获取原始命令行参数

> ID：14150374
> 
> 赞同：10
> 
> 时间：2013-01-04T02:42:59.517
> 
> 标签：c++, c, windows

我需要将命令行参数从 A.exe 传递给 B.exe。如果 A.exe 具有多参数，例如

`A.exe -a="a" -b="b"'`

我可以使用

`BeginProcess("B.exe", **args!**)`

启动 B.exe。如何获取原始命令行参数，例如

`'-a="a" -b="b"'`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T02:53:27.553

如果您在 Windows 上，则使用[GetCommandLine](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)获取原始命令行。

请注意，GetCommandLine 还包括 argv[0]。因此，在将 GetCommandLine 的输出传递给 B 之前，您必须超越 argv[0]。

这是一些非错误检查代码来做到这一点

```
#include <string.h>
#include <windows.h>
#include <iostream>
#include <ctype.h>

int main(int argc, char **argv)
{
    LPTSTR cmd  = GetCommandLine();

    int l = strlen(argv[0]);

    if(cmd == strstr(cmd, argv[0]))
    {
        cmd = cmd + l;
        while(*cmd && isspace(*cmd))
            ++cmd;
    }

    std::cout<<"Command Line is : "<<cmd;

} 
```

当我运行上述程序时`A.exe -a="a" -b="b"`，我得到以下输出

```
A.exe -a="a" -b="b"
Command Line is : -a="a" -b="b" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-26T21:24:53.400

这是跳过可执行文件名称的唯一正确方法，基于[Wine 的 CommandLineToArgvW 实现](https://github.com/wine-mirror/wine/blob/7ec5f555b05152dda53b149d5994152115e2c623/dlls/shell32/shell32_main.c#L58)：

```
char *s = lpCmdline;
if (*s == '"') {
    ++s;
    while (*s)
        if (*s++ == '"')
            break;
} else {
    while (*s && *s != ' ' && *s != '\t')
        ++s;
}
/* (optionally) skip spaces preceding the first argument */
while (*s == ' ' || *s == '\t')
    s++; 
```

**注意**！当前的 Wine 实现，截至 2 月 19 日 2'20 - git commit ，`a10267172`现在从[`dlls/shell32/shell32_main.c`](https://github.com/wine-mirror/wine/blob/a10267172046fc16aaa1cd1237701f6867b92fc0/dlls/shell32/shell32_main.c).[`dlls/shcore/main.c`](https://github.com/wine-mirror/wine/blob/a10267172046fc16aaa1cd1237701f6867b92fc0/dlls/shcore/main.c#L259)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:46:43.550

的标准定义`main`是

```
int main(int argc, char* argv[]) 
```

该`argv`变量包含命令行参数。该`argc`变量指示使用了`argv`数组中的条目数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T03:01:52.690

`argv`在您的程序开始运行之前，输入到 shell 中的原始字符串由 shell 转换为。除了`argv`.

如果用户使用引号将空格字符传递到您的参数中怎么办？如果他们使用反斜杠来转义引号内的引号怎么办？不同的 shell 甚至可能有不同的引用规则。

如果您有一个类似的列表`argv`，您应该尝试找到一个接受它的 API，而不是尝试实现仅辅助实际目标的字符串处理。Microsoft 非常重视安全性，他们当然提供了一些不需要为您的应用程序添加安全漏洞的东西。

我找不到有关任何 C/C++ API 的文档`BeginProcess`；我有点假设这是 Windows，但无论如何您都应该仔细检查平台的参考手册以获取替代系统调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-03T17:58:48.993

这就是我将命令行转回 shell args 的方式。有时这很好地回显到输出文件中，以将“使用的参数”与输出一起保存。转义是基本的，对于大多数情况来说已经足够了。

我在命令 (i=0) 处开始输出。如果您只需要参数等，您可以更改为 (i=1)。

```
//you have to free() the result!, returns null if no args
char *arg2cmd(int argc, char** argv) {
    char *buf=NULL;
    int n = 0;
    int k, i;
    for (i=0; i <argc;++i) {
        int k=strlen(argv[i]);
        buf=( char *)realloc(buf,n+k+4);
        char *p=buf+n;
        char endq=0;
        // this is a poor mans quoting, which is good enough for anything that's not rediculous
        if (strchr(argv[i], ' ')) {
            if (!strchr(argv[i], '\'')) {
                *p++='\'';
                endq='\'';
            } else {
                *p++='\"';
                endq='\"';
            }
        }
        memcpy(p, argv[i], k);
        p+=k;
        if (i < (argc-1)) *p++=' ';
        if (endq) *p++=endq;
        *p='\0';
        n = p-buf;
    }
    return buf;
} 
```

还有一个简单的 cpp 包装器：

```
std::string arg2string(int argc, char **argv) {
    char *tmp=arg2cmd(argc, argv);
    std::string ret=tmp;
    free(tmp);
    return ret;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T00:13:39.897

在 C++/CLI 中有这样的：

```
String^ cmdarg = Environment::CommandLine; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-02T12:22:04.507

如果您使用的是 Windows，我相信正确的解决方案是调用 GetCommandLine() 以获取完整的命令行，然后[调用 PathGetArgs(CommandLine) 从头](https://docs.microsoft.com/en-gb/windows/win32/api/shlwapi/nf-shlwapi-pathgetargsw)开始​​删除 arg0（您的 exe 路径）。

# delphi - Delphi - 将 Treeview 项目（节点）加载到列表框中

> ID：14150379
> 
> 赞同：0
> 
> 时间：2013-01-04T02:43:23.963
> 
> 标签：delphi, delphi-2010

如何将树视图项加载到 Delphi 中的列表框中？

```
listbox.items:=treeview.items 
```

给

```
Incompatible types String and TNodes 
```

我不知道。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:19:38.180

`Items`的属性`TListBox`被声明为`TStrings`，并且is`Items`的属性- 一个不能分配给另一个。`TTreeView``TTreeNodes`

你将不得不做这样的事情：

```
procedure AddNode(aStrings: TStrings; aNode: TTreeNode);
var
  iChild: integer;
begin
  aStrings.Add(aNode.Text);
  for iChild := 0 to aNode.Count - 1 do
    AddNode(aStrings, aNode.Item[iChild]);
end;

var 
  iNode: integer;
begin
  listbox.Items.Clear;
  for iNode := 0 to treeView.Items.Count - 1 do
    AddNode(listbox.Items, treeView.Items.Item[iNode]); 
```

# ruby-on-rails - 如何在 ruby on rails 中呈现 url

> ID：14150386
> 
> 赞同：0
> 
> 时间：2013-01-04T02:44:43.480
> 
> 标签：ruby-on-rails

我的控制器中有这个但不起作用（当我设置 redirect_to page1_url 效果很好时）：

```
render page1_url 
```

在我的 routes.rb 我有一个 url 路径：

```
get "main/page1"
post "main/page1"
match "page1" => 'main#page1' 
```

当我在控制器中更改渲染时

```
render 'main/page1' 
```

效果很好，但视图中的图像没有出现，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:05:56.497

您需要使用 ":as" 为路由助手指定一个名称。这将为您提供 page1_url 帮助程序。

```
 match "page1" => 'main#page1', :as=>"page1" 
```

请参阅：[在文档中命名路由](http://guides.rubyonrails.org/routing.html#naming-routes)

# python - 递归查找正确的读取顺序

> ID：14150390
> 
> 赞同：1
> 
> 时间：2013-01-04T02:45:12.433
> 
> 标签：python

我在这个任务上遇到了几个小时的麻烦，我只是被困在做什么。

首先，我需要一个接受字典参数的函数，然后返回与最大值关联的键。这是我尝试过的：

```
def findKeyForLargestValue(d):
    maxKey = ''
    maxValue = 0

    for name in d:
        for subName in d[name]:
            d = d[name][subName]

    if d > maxValue:
        maxKey = subName

    return maxKey 
```

然后我需要创建一个函数，它接受一个字符串“名称”和一个字典“重叠”作为参数，它必须按照它们表示基因组序列的顺序返回一个读取名称列表：

`def findOrder（名称，重叠）：

读取顺序 = []`

我需要在另一个函数中使用函数 findKeyForLargestValue(d) 。我需要使用应该返回 [name] 的基本情况和应该返回 [name] + findOrder(nextName) 的递归情况，其中 nextName 是与当前读取的右端有最大重叠的读取的名称（名称） .

任何帮助表示赞赏，因为我真的迷路了。甚至不确定 findKeyForLargestValue 的代码是否正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:55:29.947

“简单”的答案是使用内置[`max`](http://docs.python.org/2/library/functions.html#max)函数：

```
from operator import itemgetter
def findKeyForLargestValue(d):
    key,value = max(d.items(),key=itemgetter(1))
    return key 
```

如评论中所述，如果内存*确实*是一个问题并且您使用的是 python2.x，那么您可以使用`d.iteritems()`而不是`d.items()`. 我通常使用`d.items()`它，因为它可以在没有修改的情况下在 python2.x 和 python3.x 上工作（在这种情况下），并且与之相关的额外内存几乎总是`d.items()`与`d.iteritems()`我所做的任何工作无关。

* * *

如果您对此感到困惑`itemgetter`，请参阅以下内容：

```
def func(seq):
    return seq[1]

#`func(x)` will return the same thing that `itemgetter(1)(x)` returns
# for any indexible object `x` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:51:35.047

首先，您的缩进不正确。

```
def findKeyForLargestValue(d):
    for name in d:
        for subName in d[name]:
            d = d[name][subName]

            if d > maxValue: #Look at the indentation here
                 maxKey = subName #And here

    return maxKey 
```

# css - 用新的样式类覆盖 CSS 标题

> ID：14150391
> 
> 赞同：1
> 
> 时间：2013-01-04T02:36:57.700
> 
> 标签：css, html-heading

我正在使用其中一种免费的网页设计模板来创建自己的网站。该模板使用 css 样式表并定义了许多具有相似名称的不同样式。我定义了一些新样式，但问题是新样式对我的页面没有影响。例如，这是其中一个块中标题 2 的样式：

```
 #body .article h2 {
color: #ffaf04;
font-family: Georgia, serif;
font-size: 36px;
font-weight: normal;
letter-spacing: 2px;
line-height: 48px;
margin: 0;
padding: 0 48px;
text-align: center;
    } 
```

我尝试添加和使用这种风格

```
 .eventTitle { font-size:28px; color:black  } 
```

但是当我使用

```
 <h2 class="eventTitle">something</h2> 
```

#body .article 中的样式适用于不是 eventTitle。

我想知道 CSS 中是否存在一些父样式或某些父样式的保护，或者某些 div 项必须使用某些特定的类样式或其他东西。

我提前感谢所有评论和想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:16:33.500

您的第二个选择器没有第一个选择器那么**具体**，因此即使在您的 CSS 文件中第二个选择器位于第一个选择器之后，也会应用第一个选择器。

[在此处（Chris Coyier 撰写的博客文章）](http://css-tricks.com/specifics-on-css-specificity/)和[此处（W3C 规范）](http://www.w3.org/TR/selectors/#specificity)阅读更多关于**特异性** 的信息。

[这是一个非常有趣的漫画](http://www.standardista.com/css3/css-specificity/)，它几乎总结了特异性的概念。

我的建议：尝试`#body`在第一个选择器中取出（除非有一个很好的理由首先它就在那里）。然后尝试将您的第二个选择器更改为

```
.article .eventTitle { font-size:28px; color:black  } 
```

我*不*建议将`!important`修饰符添加到您的 css 命令中。它应该谨慎使用（如@Cody Guldner 所述）。真的，你的 CSS 应该简洁明了。大量使用`!important`只会让自己为将来的更多工作做好准备。就个人而言，我只将它用于错误修复和实验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:52:00.473

`eventTitle`将不会应用，因为`#body .article h2`它比类更具体，您可以尝试将您的类样式更改为

> .eventTitle { 字体大小：28px !important; 颜色：黑色！重要；}

使其优先于更具体的`#body .article h2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:52:31.130

更改`.eventTitle` 为`#eventTitle`. ID 总是覆盖一个类。除非一个元素有 256 个具有相同样式的类；） [http://codepen.io/chriscoyier/pen/lzjqh](http://codepen.io/chriscoyier/pen/lzjqh)

您可以使用 !important，但我不推荐它。

你也可以做这样的事情

```
#body h2, .eventTitle {
font-family: Georgia, serif;
font-weight: normal;
letter-spacing: 2px;
line-height: 48px;
margin: 0;
padding: 0 48px;
text-align: center;
}
.article h2{
color: #ffaf04;
font-size:36px;
}
.eventTitle { font-size:28px; color:black  } 
```

希望这可以帮助

# knockout.js - Sammy.js 路由未传播到 Knockout.js

> ID：14150395
> 
> 赞同：0
> 
> 时间：2013-01-04T02:46:09.097
> 
> 标签：knockout.js, sammy.js

我正在尝试获得一个与 Knockout 和 Sammy 一起使用的简单路由机制。虽然我可以让它与 JQuery 一起使用，但我无法让它与 Sammy 和 Knockout 一起使用。这是代码：

```
$(function() {
    var myViewModel = {
        viewDiv: ko.observable("home") };

    var app = $.sammy(function() {
        this.get("#/", function() { myViewModel.viewDiv = "home";});
        this.get("#/div1", function() { myViewModel.viewDiv = "div1";});
        this.get("#/div2", function() { myViewModel.viewDiv = "div2";});
        this.get("#/div3", function() { myViewModel.viewDiv = "div3";});
    });
    $(function() { app.run("#/") });

    ko.applyBindings(myViewModel);
}); 
```

这是标记：

```
<div id="main">
    <ul id="link">
        <li><a href="#/div1">Div1</a></li>
        <li><a href="#/div2">Div2</a></li>
        <li><a href="#/div3">Div3</a></li>
        <li><a href="#/">Home</a></li>
    </ul>
    <p>viewDiv:<span data-bind="text: this.viewDiv"></span></p>
</div>
<div id="content">
    <div id="home"  data-bind="visible: this.viewDiv=='home'">
        <h2>Home</h2>
    </div>
    <div id="div1"  data-bind="visible: this.viewDiv=='div1'">
        <h2>First Div</h2>
    </div>
    <div id="div2"  data-bind="visible: this.viewDiv=='div2'">
        <h2>Second Div</h2>
    </div>
    <div id="div3"  data-bind="visible: this.viewDiv=='div3'">
        <h2>Third Div</h2>
    </div>
</div> 
```

URL 按预期更改，但我想显示或隐藏的所有 div 都保持隐藏状态，并且显示当前 div 的单个数据绑定什么也不显示。我在 Sammy 路由中也有控制台日志语句。这些按预期记录了div。我可能缺少一些简单的东西。任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:02:06.860

在 KnockoutJS 中，我们以这种方式更新 observables：

```
myViewModel.viewDiv("home") 
```

而不是这样

```
myViewModel.viewDiv = "home" 
```

# java - 如何将@UiHandler 与自定义处理程序一起使用（传递构造函数参数）

> ID：14150402
> 
> 赞同：1
> 
> 时间：2013-01-04T02:46:57.800
> 
> 标签：java, gwt, uibinder

通常，我们这样做：

```
@UiHandler("aLink")
void onClickALink(ClickEvent e) {
    // do something
} 
```

但是，如果我想使用自己的 Handler 实现怎么办？

```
class MyClickHandler implements ClickHandler {
    int i;

    MyClickHandler(int i) {
        this.i = i;
    }

    @Override
    public void onClick(ClickEvent event) {
        // do something
    }
} 
```

那么，如何将 MyClickHandler 与 @UiHandler 一起使用？即传递`i`给构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:25:44.410

您还需要创建一个特定的点击事件：

```
class MyClickHandler implements ClickHandler {
    int i;

    MyClickHandler(int i) {
        this.i = i;
    }

    @Override
    public void onClick(MyClickEvent event) {  // MyClickEvent!
        // do something
    }
} 
```

然后你可以这样做：

```
@UiHandler("aLink")
void onClickALink(MyClickEvent e) {
    // do something
} 
```

确保您实现了所有需要的方法，`MyClickEvent`以便 GWT 可以理解它关联到`MyClickHandler`：请参阅[ClickEvent dispatch()、getAssociatedType() 和 getType()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/event/dom/client/ClickEvent.html)

有关示例，请参阅如何[`CustomEvent`](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/uibinder/test/client/CustomEvent.java)在[`HandlerDemo.java`](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/uibinder/test/client/HandlerDemo.java).

> 那么，如何将 MyClickHandler 与 @UiHandler 一起使用？即将 i 传递给构造函数？

你没有。

# java - 在哪里放置用户上传的文件？

> ID：14150409
> 
> 赞同：1
> 
> 时间：2013-01-04T02:47:57.190
> 
> 标签：java, file, file-upload, struts2, upload

我正在创建一个允许用户上传音频的网络应用程序，我的问题是我应该将它们放在哪里？我应该把它们放在里面`Web-Content`吗？还是在里面`WEB-INF`？（我不考虑为这些文件使用数据库，因为大多数音频文件都很大）上传和存储文件的最佳做法是什么？尽可能地，当我将我的应用程序部署在一个war文件中时，这些文件仍然存在，因为我会将这些文件的相对文件路径存储在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:02:50.793

将上传的文件放在任何级别的 Web 应用程序下绝对不是一个好主意。我的偏好是有一个配置路径的配置文件。重要的是，该路径完全无法从 Web 根目录访问，这样上传的文件就不能在服务器上执行。

```
 create a text file called <webapp>.properties 
```

包含

```
 StorePath=C:/temp/Storage/ 
```

然后，该文本文件应包含在可从 ResourceLoader.getResource() 访问的路径下，例如类路径、WEB-INF

然后可以使用 java 加载该属性。

```
java.util.Properties props = new java.util.Properties();
java.net.URL urlx = ResourceLoader.getResource("<webapp>.properties");
props.load(urlx.openStream());
String buildVersion =props.get("StorePath").toString(); 
```

然后将文件保存到该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:05:10.613

这取决于您面临的场景，这些音频将用于什么？但是，将资源文件放在 webapp 文件夹中总是一个坏主意。您可以将它们存储在您的应用程序有权访问的单独文件夹中，或者将它们存储在安装在您的计算机或其他一些分布式文件系统（如 HDFS）或什至云存储产品（如 Amazon S3）上的一些远程存储中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T09:52:55.777

在服务器存储位置上传文件的最佳方法（服务器文件系统中的硬盘驱动器）在服务器中创建一个文件夹并将该文件上传到上面。上传后将上传的文件路径放入数据库中。

当用户想要显示文件时，从数据库中获取文件路径并显示在您的 html/jsp 页面上，并使用适当的 html 标签显示路径来处理它。

喜欢显示图像，您将图像保存在服务器上的目录中，将其路径存储在 db 中，假设其路径是`www.xrv.com/images/Sunset.jpg (`绝对`or`相对的`)。

在jsp中使用`<img src="www.xrv.com/images/Sunset.jpg"/>`

# java - 在 Java 框架中，为什么接受字节数组的 BufferedWriter 类中没有 .write 重载？

> ID：14150411
> 
> 赞同：0
> 
> 时间：2013-01-04T02:48:12.953
> 
> 标签：java, bufferedwriter

我有兴趣使用[BufferedWriter.write()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html#write%28char%5B%5D,%20int,%20int%29)将字节数组写入磁盘。但是该方法需要一个字符数组。我必须将 byte[] 转换为 char[]。容易吧？好吧，我在 Clojure 中的第一次尝试未能将字节转换为字符。因此，我开始想知道为什么 BufferedWriter.write() 方法对想要 char[] 如此挑剔。
注意：OuputStream 有一个使用byte[] 的[write](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStream.html#write%28byte%5B%5D,%20int,%20int%29)方法。所以我的问题是关于在 BufferedWrite.write() 中需要 char[] 的框架设计选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:51:39.800

[`BufferedWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)是 , 的一种[`Writer`](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html)，`Writer`用于书写字符。要输出原始字节，您需要使用某种类型的[`OutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html)- 在本例中为[`BufferedOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedOutputStream.html).

`OutputStream`（和之间的桥梁`Writer`是[`OutputStreamWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html)类。它`Writer`接受字符，使用诸如 UTF-8 之类的方案将它们编码为字节，并将生成的字节提供给`OutputStream`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:50:29.160

它就在 Javadoc 类的第一行：

> 将文本写入字符输出流，缓冲字符，以便高效写入单个字符、数组和字符串。

实现的类`Writer`是为文本输出设计的，而不是任意二进制数据。查看其他缓冲流，例如[BufferedOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedOutputStream.html)

# zend-framework2 - Zend Framework 2 层次语义？

> ID：14150413
> 
> 赞同：1
> 
> 时间：2013-01-04T02:48:45.457
> 
> 标签：zend-framework2

我一直在寻找并尝试学习多年，但它并没有坚持下去。Zend 2 上似乎只有 1 个教程，而且不是很聪明。这里我们有一个示例结构（本教程继续使用此应用程序）[http://framework.zend.com/manual/2.0/en/user-guide/modules.html](http://framework.zend.com/manual/2.0/en/user-guide/modules.html)：

```
zf2-tutorial/
    /module
        /Album
            /config
            /src
                /Album
                    /Controller
                    /Form
                    /Model
            /view
                /album
                    /album 
```

这并不酷 - 我怎么知道哪张专辑是哪张？在 Zend 1 中，它很有意义——你有模块，然后你有控制器，而这些控制器有动作。

现在我有一个名为专辑的模块。是`src/Album/...`“单一控制器”吗？将：

`zend1application/modules/album/albumcontroller.php`映射到`zend2application/modules/album/src/album/controller/albumcontroller.php`? 那么，为什么现在有3张专辑呢？如果我将 albumcontroller.php 更改为 indexcontroller.php 会发生什么情况？（我一直在测试，但有太多的变化它永远不会坚持 - 我终于想我应该问问某人，如果我知道**为什么**我会记得。

如果我以不同的方式看待它，它似乎在专辑中`module/Album`并且`module/Album/src/Album`应该是相同的——那我们为什么要拥有它两次？这不是为错误腾出空间吗？比如为什么要有`src/album`文件夹？为什么不把 Controller、Form 和 Model 放在下面`module/Album`呢？

为什么会有一个名为Controller的文件夹？以前在一个模块中曾经有一个名为**controllers**的文件夹（复数，为什么现在是单数？），这是有道理的。但是为什么控制器`src/Album`现在在文件夹中？

感谢您的时间。我曾尝试进行研究，但我认为当（在我看来）它似乎很少记录时，它的吸收太大了。或者，如果有人可以向我指出像[http://survivethedeepend.com/](http://survivethedeepend.com/)这样的书，但对于 ZF2，它会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:12:53.153

Zend Framework 2 遵循[PHPfigs PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。这意味着目录结构与类名直接相关。但在我接近那个之前，让我解释一下基本架构。

首先你有`ModuleNAME`. 由于模块名称需要是唯一的，因此只有将模块名称映射到`Namespace`模型的名称才有意义。

在 modules 文件夹中，您有三个子文件夹。用于配置项目的一个文件夹，名为`config`. 一个用于命名源代码文件的文件`src`夹和一个用于视图文件的附加文件夹`view`

这种分离只是为了概述。您将配置、视图和源代码彼此分开。将它们捆绑在一起是没有意义的，我想你会同意的。ZF1 也是如此。

有趣的部分是 source-folder `src`。前面我提到了`PSR-0`标准。这就是它生效的地方。默认情况下，将从 source-folder 中查看每个模块的源文件`src`。因此，只要您有课程，它将使用基于源文件夹的 PSR-0 标准。Mewning：`My\Funky\Class`会在里面找到`src\My\Funky\Class.php`

这基本上就是它的全部内容。控制器通常有一个 FQCN，`Mymodule\Controller\SomeController`所以你会在里面找到这个类`src\Mymodule\Controller\SomeController.php`

出现的主要问题可能是：为什么文件夹有时是 all`lowercase`有时是`ucfirst`. 答案再次是`PSR-Standards`。类名和/或命名空间应该以`upperchar`字符开头。由于路径名是`case-sensitive`，因此文件夹需要与类名完全匹配！

**编辑**我刚刚偶然发现的另一篇不错的读物是 Rob Allens 的最新博文：[关于模块目录结构](http://akrabat.com/zend-framework-2/thoughts-on-module-directory-structure/)的思考。他解释了如何根据自己的喜好轻松更改默认设置。

# mysql - 在带有 LIKE 的 CASE 语句中使用 GROUP_CONCAT 列别名

> ID：14150420
> 
> 赞同：4
> 
> 时间：2013-01-04T02:50:43.497
> 
> 标签：mysql, view, case, group-concat

这里的想法是 GROUP_CONCAT 从连接到 option_stock 和选项表的股票表中编译选项代码列表，并按股票 ID 分组。一个示例行是这样的：

```
Name                Options             Transmission
'Holden Commodore' '111, 145, 166, 188' 'Auto' 
```

这个视图按原样工作，但我不禁觉得有一个更优雅的解决方案？

```
CREATE VIEW stock_view AS
    (select s.description AS Name,
    group_concat(o.option_code order by o.option_code ASC separator ', ') 
    AS Options, 
    (case
        WHEN group_concat(o.option_code) LIKE '%111%' then 'Auto'
        WHEN group_concat(o.option_code) LIKE '%112%' then 'Manual'
        else 'Other'
    end) as Transmission
    from stock s
    join option_stock ost ON s.id = ost.stock_id
    join options o ON o.id = ost.option_id
    group by s.id) 
```

我试图避免在 CASE 困境中使用这个丑陋的 GROUP_CONCAT，但是`Options`如果我在这样的 case 语句中使用它，我会收到一个错误，指出该字段不存在：

```
WHEN `Options` LIKE '%111%' then 'Auto' 
```

我知道为什么会抛出错误 - 这是因为您不能以这种方式使用另一列的别名。但是有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:03:39.123

这些位对我来说似乎不够可靠：

```
WHEN group_concat(o.option_code) LIKE '%111%' ...
WHEN group_concat(o.option_code) LIKE '%112%' ... 
```

`LIKE '%111%'`将匹配例如`'111222, 145, 166, 188'`，以及`'111, 145, 166, 188'`. 当然，除非只有 3 个字符的代码，而且您不希望它很快改变。

不过，无论如何，我可能会使用不同的技术，很可能是条件 COUNT 或 SUM。例如：

```
(CASE
    WHEN SUM(o.option_code = '111') > 0 THEN 'Auto'
    WHEN SUM(o.option_code = '112') > 0 THEN 'Manual'
    ELSE 'Other'
END) AS Transmission 
```

另请注意，在您的特定情况下，以下解决方案虽然相当具体，但也应该起作用：

```
IFNULL(
    MIN(CASE o.option_code WHEN '111' THEN 'Auto' WHEN '112' THEN 'Manual' END),
   'Other'
) AS Transmission 
```

即，如果`'111'`或出于某种原因，在同一组行中的代码中同时找到 和 ，则`'111'`将返回，如果bot 不是，则计算结果为。否则它将为 NULL，在这种情况下，函数将评估为。`'112'``MIN()``'Auto'``'112'``'111'``'Manual'``IFNULL()``'Other'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:38:28.247

您必须创建两个单独的**VIEWS**因为**MySQL**不支持**VIEW**中的子查询。

尝试这个：

```
CREATE VIEW stock_view AS
  SELECT s.description AS sname, 
         GROUP_CONCAT(o.option_code ORDER BY o.option_code SEPARATOR ', ')  AS soptions 
  FROM stock s
  INNER JOIN option_stock ost ON s.id = ost.stock_id
  INNER JOIN OPTIONS o ON o.id = ost.option_id
  GROUP BY s.id;

CREATE VIEW stock_view1 AS 
  SELECT sname, soptions, 
         (CASE WHEN FIND_IN_SET('111', soptions) THEN 'Auto'
               WHEN FIND_IN_SET('112', soptions) THEN 'Manual'
               ELSE 'Other'
         END) AS Transmission
  FROM stock_view; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:12:50.883

进行单独的连接以确定传输类型：

```
CREATE VIEW stock_view AS
select
    s.description AS Name,
    group_concat(o.option_code order by o.option_code separator ', ') AS Options,
    if(t.option_code = '111', 'Auto', 'Manual') as Transmission
from stock s
join option_stock ost ON s.id = ost.stock_id
join options o ON o.id = ost.option_id
left join options t on t.id = ost.option_id 
     and option_code in ('111', '112')
group by s.id 
```

只有一行将从传输连接中连接（汽车不能同时是自动和手动的），这种方法避免了所有这些子查询。

将连接设为*左*连接意味着缺少的传输选项将显示为手册。您可以通过添加对 null 的测试来调整它以具有默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T02:58:10.877

没有实际的表很难测试（不能实际执行语句）但是像这样的东西呢：

```
CREATE VIEW stock_view AS
(SELECT
    gc.Name,
    gc.Options,
    (case
        WHEN gc.Options LIKE '%111%' then 'Auto'
        WHEN gc.Options LIKE '%112%' then 'Manual'
        else 'Other'
    end) as Transmission
FROM
    (select 
        s.description AS Name,
        group_concat(o.option_code order by o.option_code ASC separator ', ') AS Options
    from 
        stock s
        join option_stock ost ON s.id = ost.stock_id
        join options o ON o.id = ost.option_id
    group by 
        s.id) gc); 
```

# ios - UILabel 有模糊的边框

> ID：14150422
> 
> 赞同：2
> 
> 时间：2013-01-04T02:51:34.680
> 
> 标签：ios, uilabel, border, calayer

我认为默认值是 0.0 的边框宽度。所以我很惊讶我在我的 UILabel 周围看到寄宿生。我什至尝试使用 CALayer 将边框设置为 0.0 并将其设置为白色，但我仍然看到模糊的轮廓。这是我的代码。

```
-(UIView *)calendarDay:(int)d date:(NSDate *)date width:(float)w height:(float)h
{
//d is the day number in the month of the 28/293 calendar. It should display in bold in the upper, left.
//date is the date of that day. It should display in the upper, right.
//w is the width of the UIView in which to insert the labels.
//h is the height of the UIView in which to insert the labels.
//First create an outer view with a red background color.
UIView *frameView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, w, h)];
[frameView setBackgroundColor:[UIColor redColor]];
//Next decrease the width and height slightly to make a smaller view that fits inside the larger one.
w = w*0.98;
h = h*0.98;
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MM-dd "];
UILabel *dayNumber = [[UILabel alloc] init];
dayNumber.text = [NSString stringWithFormat:@"%2d",d];
dayNumber.font = [UIFont boldSystemFontOfSize:16];
dayNumber.frame = CGRectMake(0,0,w/2,h/5);
dayNumber.backgroundColor = [UIColor whiteColor];
UILabel *gregDate = [[UILabel alloc] init];
gregDate.text = [dateFormat stringFromDate:date];
gregDate.textAlignment = NSTextAlignmentRight;
gregDate.frame = CGRectMake(w/2,0,w/2,h/5);
gregDate.backgroundColor = [UIColor whiteColor]; 
```

以下三行是试图使边界消失。它没有任何区别。

```
CALayer *gregDateLayer = [gregDate layer];
[gregDateLayer setBorderColor:[[UIColor whiteColor] CGColor]];
[gregDateLayer setBorderWidth:0.0];

[gregDate setTextColor:[UIColor blackColor]];
CGRect dayRect = CGRectMake(0, 0, w, h);
UIView *dayToReturn = [[UIView alloc] initWithFrame:dayRect];
[dayToReturn setBackgroundColor:[UIColor whiteColor]];
dayNumber.center = CGPointMake(w/4 ,h/4);
gregDate.center = CGPointMake(w*3/4,h/4);
[dayToReturn addSubview:dayNumber];
[dayToReturn addSubview:gregDate];
[frameView addSubview:dayToReturn];
dayToReturn.center = frameView.center;
return frameView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:56:21.597

我认为您所想的是边框实际上是 UILabel 的背景颜色。

将 UILabel 的背景颜色设置为`[UIColor clearColor]`.

# asp.net - 嵌套文字

> ID：14150429
> 
> 赞同：0
> 
> 时间：2013-01-04T02:52:34.810
> 
> 标签：asp.net

我有一个未通过 W3C XHTML 验证的 ASP.NET 网站。

它没有通过验证，因为我将`<div>`内容放入 a`<asp:Label>`中，因此生成的标记如下所示：

```
<span><div>stackoverflow</div></span> <!-- INVALID; DIV INSIDE SPAN --> 
```

但是，在将所有 my 替换`<asp:Label>`为之后`<asp:Literal>`，我得到了`<asp:Literal>`无法嵌套在另一个`<asp:Literal>`.

我真的不明白我应该如何解决这个问题，因为`<asp:Literal>`听起来它本来就是我想要的。

使用正确的解决方案`<asp:PlaceHolder>`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:59:34.677

试试这个解决方案

```
<div id="div" runat="server">
</div> 
```

在后面的代码中

```
div.InnerHtml = "<div>Example HTML</div>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T03:00:02.923

重复，答案在：[使用 Panel 或 PlaceHolder](https://stackoverflow.com/questions/483352/asp-net-panel-vs-placeholder)

简短的回答， an`<asp:Panel>`变成 a `<div>`，所以你想要类似的东西

```
<asp:Panel>
  <asp:Label .../>
</asp:Panel> 
```

# c - 使用 fwrite 在 C 中复制文件

> ID：14150431
> 
> 赞同：1
> 
> 时间：2013-01-04T02:52:51.947
> 
> 标签：c, file-io, copy, fwrite

我是 C 新手，正在尝试编写一个程序来复制文件，以便我可以学习文件的基础知识。我的代码将一个文件作为输入，通过使用 fseek 和 ftell 减去它的开头来计算它的长度。然后，它使用 fwrite 写入，基于我可以从它的手册页中获得的内容，一个数据元素，（END - START）元素长，到 OUT 指向的流，从 FI 给出的位置获取它们。问题是，虽然它确实产生“复制输出”，但该文件与原始文件不同。我究竟做错了什么？我尝试将输入文件读入一个变量，然后从那里写入，但这也无济于事。我究竟做错了什么？谢谢

```
int main(int argc, char* argv[])
{ 
    FILE* fi = fopen(argv[1], "r"); //create the input file for reading

    if (fi == NULL)
        return 1; // check file exists

    int start = ftell(fi); // get file start address

    fseek(fi, 0, SEEK_END); // go to end of file

    int end = ftell(fi); // get file end address

    rewind(fi); // go back to file beginning

    FILE* out = fopen("copy output", "w"); // create the output file for writing

    fwrite(fi,end-start,1,out); // write the input file to the output file
} 
```

这应该工作吗？

```
{
    FILE* out = fopen("copy output", "w");
    int* buf = malloc(end-start);  fread(buf,end-start,1,fi);
    fwrite(buf,end-start,1,out);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T02:57:58.417

这不是[`fwrite`](http://en.cppreference.com/w/c/io/fwrite)工作方式。

要复制文件，您通常会分配一个缓冲区，然后用于`fread`读取一个数据缓冲区，然后`fwrite`将该数据写回。重复直到你复制了整个文件。典型的代码是这样的一般顺序：

```
#define SIZE (1024*1024)

char buffer[SIZE];
size_t bytes;

while (0 < (bytes = fread(buffer, 1, sizeof(buffer), infile)))
    fwrite(buffer, 1, bytes, outfile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:57:49.067

fwrite 的第一个参数是指向要写入文件的数据的指针，而不是要读取的 FILE*。您必须将第一个文件中的数据读入缓冲区，然后将该缓冲区写入输出文件。[http://www.cplusplus.com/reference/cstdio/fwrite/](http://www.cplusplus.com/reference/cstdio/fwrite/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T02:59:56.593

也许通过[C 中的开源复制工具](http://svnweb.freebsd.org/base/stable/9/bin/cp/)查看会为您指明正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T19:31:00.920

## 这是如何做到的：

**选项 1：动态“数组”**

*嵌套级别：* 0

```
// Variable Definition
char *cpArr;
FILE *fpSourceFile = fopen(<Your_Source_Path>, "rb");
FILE *fpTargetFile = fopen(<Your_Target_Path>, "wb");

// Code Section

// Get The Size Of bits Of The Source File
fseek(fpSourceFile, 0, SEEK_END); // Go To The End Of The File 
cpArr = (char *)malloc(sizeof(*cpArr) * ftell(fpSourceFile)); // Create An Array At That Size
fseek(fpSourceFile, 0, SEEK_SET); // Return The Cursor To The Start

// Read From The Source File - "Copy"
fread(&cpArr, sizeof(cpArr), 1, fpSourceFile);

// Write To The Target File - "Paste"
fwrite(&cpArr, sizeof(cpArr), 1, fpTargetFile);

// Close The Files
fclose(fpSourceFile);
fclose(fpTargetFile);

// Free The Used Memory
free(cpArr); 
```

**选项 2：逐个字符**

*嵌套级别：* 1

```
// Variable Definition
char cTemp;
FILE *fpSourceFile = fopen(<Your_Source_Path>, "rb");
FILE *fpTargetFile = fopen(<Your_Target_Path>, "wb");

// Code Section

// Read From The Source File - "Copy"
while(fread(&cTemp, 1, 1, fpSourceFile) == 1)
{
    // Write To The Target File - "Paste"
    fwrite(&cTemp, 1, 1, fpTargetFile);
}

// Close The Files
fclose(fpSourceFile);
fclose(fpTargetFile); 
```

# php - 无法将 Backbone JS 模型保存到 MySQL 数据库

> ID：14150432
> 
> 赞同：0
> 
> 时间：2013-01-04T02:52:53.663
> 
> 标签：php, mysql, backbone.js

我是学习 Backbone JS 的初学者，我无法将我的第一个测试模型保存到 MySQL 数据库。虽然 AJAX 请求是从 Backbone 发送的带有正确的 POST 有效负载（根据浏览器检查器），但我在后端的 PHP 脚本似乎正在接收一个空数组。

这是模型的代码：

```
var UserModel = Backbone.Model.extend({
    urlRoot: 'backboneUserBackend.php',
    defaults: {
        name: '',
        email: ''
    }
});

 var user = new UserModel(),
 userDetails = {name: 'Jim Smith', email: 'jimsmith@example.com'};

 user.save(userDetails, {success: function(user){
    console.log(user);
 }
}); 
```

这是我的 PHP 脚本：

```
if (!empty($_POST)) {
// @todo: replace deprecated mysql method w/ PDO connection
mysql_connect("localhost", "user", "password");
mysql_select_db("mydatabase");

if (mysql_errno()) {
    exit('DB connect error: '.mysql_error());
}

$name = mysql_real_escape_string($_POST['name']);
$email = mysql_real_escape_string($_POST['email']);
$query = sprintf("INSERT INTO users VALUES (NULL, '%s', '%s')", $name, $email);

if (mysql_query($query)) {
    echo mysql_insert_id();
} else {
    exit('Error inserting record: '.mysql_error());
}
} 
```

为了测试我的 PHP 脚本是否实际上是通过 AJAX 请求执行的，我将此测试添加到顶部：

```
$fh = fopen("mytest_".time().".txt", "w");
ob_start();
print_r($_POST);
$payload = ob_get_clean();
fwrite($fh, $payload);
fclose($fh); 
```

每当保存我的 Backbone 模型时，都会创建一个新文件，但该文件包含一个空数组。有什么想法吗？

注意：我使用的是 Chrome。另外，我知道我应该在我的 Backbone 模型中使用简单的根 URL，例如“/user”……我只是暂时使用“backboneUserBackend.php”脚本，用于测试目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:36:52.297

Backbone 发布您的模型更新 JSON 编码，而不是正常的形式 编码，所以如果数组有效`application/x-www-form-urlencoded`，我会感到惊讶。`$_POST`（PHP 不是我常用的服务器端语言，所以自从我上次使用 PHP 以来，它们可能已经改变了一些东西。）

看起来您的问题的答案可能在这个问题/答案中找到：[Insert Backbone.js model into MySQL database](https://stackoverflow.com/questions/10930789/insert-backbone-js-model-into-mysql-database)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:31:44.417

其他两个答案确实概述了您的代码中出了什么问题。我可以建议您考虑使用 php 微框架，例如[Slim](http://www.slimframework.com/)来帮助您的 REST api。我最近才开始学习骨干网，使用 slim 让服务器端的东西变得轻而易举。

一旦你配置了 slim，设置你的路由就很简单了：

```
<?php
  require '../lib/Slim/Slim.php';
  \Slim\Slim::registerAutoloader();

  $api = new \Slim\Slim();

  $api->get('/users', function(){ //sql function });
  $api->get('/users/:id', function($id){ sql function });
  $api->post('/users', 'addUser');

  $api->run();
  //functions below
?> 
```

我自己做这一切，然后意识到 Slim 解决了这个过程中的大部分麻烦。

例如获取帖子数据：

```
$user = json_decode($request->getBody()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:07:46.877

正如@JayC 提到的，Backbone 发送的 POST 数据是请求正文中的 JSON，而不是作为参数。你要做的是：

```
$data = json_decode(http_get_request_body());
$name = $data->name;
$email = $data->email;

// DB stuff goes here 
```

# nuget - nupkg 中的 nuspec 文件

> ID：14150436
> 
> 赞同：1
> 
> 时间：2013-01-04T02:53:55.140
> 
> 标签：nuget, nuget-package

我在将 .nuspec 文件添加到包本身时创建的自定义 .nupkg 文件出现问题。.nu​​spec 文件直接保存在 \src 目录下，我使用以下命令创建包：

```
nuget pack .\src\package.nuspec -Version 1.0.0.0 -OutputDirectory C:\Packages\ 
```

我直接打包 .nuspec 文件，因为我的解决方案包含多个项目，每个项目都针对不同的 .Net 版本。

在包文件中，根目录下的两个文件是“[Content Types].xml”和 .nuspec 文件（除了“_relS”、“lib”和“package”目录）。

作为参考，我还没有发布包，只有一个本地存储库目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:23:35.040

您需要将文件放在文件夹`nuspec`之外`src`

```
baseFolder
|- src 
   |- [contents]
   |- [contents]
|- package.nuspec 
```

现在，运行命令`baseFolder`

```
nuget pack package.nuspec -Version 1.0.0.0 -OutputDirectory C:\Packages\ 
```

# mysql - 复杂数据结构的sql表或mongo文档结构设计

> ID：14150438
> 
> 赞同：2
> 
> 时间：2013-01-04T02:54:04.260
> 
> 标签：mysql, sql, mongodb, nosql

我有一个要求是建立一个问题调查系统。简单地说，它需要问题，预定义答案和用户的答案记录。

*   问题需要一个问题ID，问题文本
*   答案需要一个答案ID，答案文本
*   用户的回答记录需要记录id，用户id，问题id，回答id，日期，操作系统，ip，浏览器信息，是live

对于用户记录，我需要保留所有历史记录，这就是为什么我需要一个“实时”列。因此，只有每个用户的最新答案是正确的。当用户再次回答同一个问题时，该用户所有存在的回答记录将是历史记录（is live = false）。

看似简单的结构。但是当我得到超过 100,000 个问题，超过 100 万用户，并且每个用户对每个问题有超过 20 个答案记录时，那么记录是超过 100,000 * 1,000,000 * 20 = 2,000,000,000,000 条记录。然后就成了一个大问题。

我还需要描述我需要如何使用这些数据。我需要提供另一个系统，它可以使用用户记录通过定义问题回答标准来定位一组用户。例如：

1.  `(Q1=A1 && Q2=A3 && Q3=A5 && (Q4=A8 || Q5=A9))` 标准 1
2.  `(Q1!=A1 && Q2=A3)` 标准 2
3.  `(Q4=A8 || Q5!=A9)` 标准 3

在我定义标准之后：

1.  我需要提供一个 api 来获取所有符合条件的用户 id (api1)
2.  我需要提供一个 api 来获取用户的所有标准 (api2)

api需要快速和实时。而且api会被频繁调用。

所以想象一下，当一张表中有 200,000,000,000 条记录时。api 调用会很慢，甚至会杀死 db。

所以，我有一些不好的解决方案，我只是在这里列出，以便我们讨论：

1.  每个问题都有一个表来保存该问题的所有用户记录。
2.  每个用户都有一个表来保存该用户的所有问题记录。
3.  1 和 2

但我可以看到那里的解决方案不是很好和有效。所以想在这里讨论一下。不管是哪种技术（sql、nosql、hadoop 等...）

请把你的想法放在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:43:23.160

我会尝试使用 mongoDB，只使用一个“用户”集合将答案存储在数组中：

```
{userId: 1, 
 name: "nick",
 ...,
 "answers": [
    { questionId:1,
      answerId: 1,
      date: Date(...),
      ...,
      isLive: 1},
    { questionId:1
      answerId: 2,
      date: Date(...),
      ...,
      isLive: 0}
 ]
} 
```

然后我会在属性“answers.isLive”上使用多键[索引](http://docs.mongodb.org/manual/core/indexes/#multikey-indexes)来确保高速访问“实时”答案。

“answers.questionId”和“answers.answerId”上的另一个多键索引应确保按照您的标准检索数据的高性能。

对于像你这样的数字，我会考虑从一开始就对你的收藏进行[分片。](http://docs.mongodb.org/manual/sharding/)

# android - 将 API 级别升级到 14 (ICS) 后 UI 元素没有焕然一新

> ID：14150439
> 
> 赞同：0
> 
> 时间：2013-01-04T02:54:07.790
> 
> 标签：android, api, version

我有一个 android 项目，最初将其目标 API 设置为 2.3.3。最近，我想将目标 API 更新为 ICS（API 版本 14）。

我做了以下事情：

*   将 android:minSdkVersion 更新到版本 14。
*   更改项目 Android 属性（右键单击项目->属性->选择 Google API 14）。

经过清理和重建后，ui 元素（按钮、编辑文本）仍然具有旧的 2.3.3 外观，而不是 4.0 外观。

关于我在这里缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:58:13.113

您必须在活动标签中将 Holo 主题添加到您的 Android 清单中。

```
android:theme="@android:style/Theme.Holo" 
```

# jquery - 带有选择元素的jQuery事件委托？

> ID：14150440
> 
> 赞同：0
> 
> 时间：2013-01-04T02:54:11.477
> 
> 标签：jquery, debugging, html-select, onchange, event-delegation

在进行一些健全性测试时，我注意到以下`change`事件绑定有效：

```
$("body").on("change","input", function(){console.log(1)}) 
```

虽然`on`事件绑定不：

```
$("body").on("change","select", function(){console.log(1)}) 
```

这种不一致是否有任何解决方法或解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:19:58.423

使用 Developer Toolbar 的 Elements 选项卡中的 Event Listeners 面板，我发现了根本原因。有两个委托的更改事件都绑定到同一个`select`元素，该元素被包装在一个`div`容器中以进行样式设置。绑定到内部容器的事件返回 false，这停止传播到绑定到外部容器的事件。我意识到内部绑定是多余的，所以我将其删除以解决问题。

**参考**

*   [查看元素事件监听器](https://developer.chrome.com/devtools/docs/dom-and-styles#viewing-element-event-listeners)

*   [Chromium 开发工具博客](http://blog.chromium.org/search/label/devtools)

*   [选择菜单小部件 | jQuery UI API 文档](http://api.jqueryui.com/selectmenu/)

# accelerometer - 加速度计和陀螺仪无与伦比的采样频率

> ID：14150444
> 
> 赞同：1
> 
> 时间：2013-01-04T02:54:32.733
> 
> 标签：accelerometer, gyroscope

我正在研究手机的IMU。我需要同时从加速度计和陀螺仪读取数据。

但我发现他们的阅读频率不一样。我怎样才能以相同的时间间隔从它们那里检索读数？

其实这个[帖子](https://stackoverflow.com/questions/10223565/accelerometer-gyro-accuracy-in-different-mobile-device)的第一个答案也找到了问题，但是那个家伙没有给出解决方案。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:12:04.873

你不能把加速度计的频率乘以陀螺仪的频率吗？

想象一下，f1 每四个时间单位采样一次，f2 每三个时间单位采样一次。如果抽样是有规律的并且他们同时开始抽样，他们将每十二个时间单位见面。

![在此处输入图像描述](../Images/6ab349859ea329b336fab8491fa46dd9.png)

例如

如果加速度计每 5 秒有 40 个样本，而陀螺仪在相同时间内有 1332 个样本。

计算频率：加速度计每秒有 40/5 = 8 个样本，陀螺仪每秒有 1332/5 = 266.4 个样本

计算周期（以毫秒为单位）：加速度计每 1000/8 = 125 毫秒采样一次 陀螺仪每 1000/266.4 = 3.75 毫秒采样一次

因此他们将每 125 * 3.75 = 469 毫秒相遇一次

# c# - 在 RPG 中使用 Protobuf-Net

> ID：14150446
> 
> 赞同：1
> 
> 时间：2013-01-04T02:54:50.597
> 
> 标签：c#, wpf, protobuf-net

长话短说，我目前正在使用 WPF 和 C# 编写一个 RPG。我最近决定实现（或至少尝试）Protobuf-Net，因为 BinaryFormatter 类只是没有提供 Protobuf 的性能。

基本上，由于严重缺乏文档，我一直试图将谷歌展示给我的零碎拼凑在一起。我目前的问题是我无法使用泛型函数让任何继承的类进行序列化。我需要这个，因为我的大部分工作是一个 API，因此可以序列化任何创建的新类型。

我需要的一个例子，

```
 public sealed class SomeClass
{

    private RuntimeTypeModel protobuf = RuntimeTypeModel.Create();

    public T DeepCopy<T>(T template) where T : IsSomeBaseClass
    {
        Type templateType = template.GetType();
        this.protobuf.Add(templateType, true);

        // Get inherited classes.
        //
        //

        return (T)this.protobuf.DeepClone(template);
    }
} 
```

这甚至可以用 Protobuf-Net 实现吗？如果有人可以推动我朝着正确的方向前进，那将不胜感激。

# .net - 调用其他线程调用的函数时线程没有盯着看

> ID：14150447
> 
> 赞同：1
> 
> 时间：2013-01-04T02:54:51.127
> 
> 标签：.net, vb.net, multithreading

我在执行耗时操作（for循环）时使用线程来显示进度窗口。在该操作之后我想停止线程。但是方法“ **ShowProgressDialog** ”没有被调用。我使用相同的方法其他工作正常的事件。下面是代码。

```
Private Sub TSBRSToLoc_Click(sender As System.Object, e As System.EventArgs) Handles TSBRSToLoc.Click
    Try

        If Not BWRRStoLoc.IsBusy Then
            Dim backgroundThred As New Thread(AddressOf ShowProgressDialog)
            backgroundThred.IsBackground = True
            'Dim formProgree As New ProgressForm
            backgroundThred.Start()
            DisableBtns(sender)
            ProgressBarCompare.Value = 0
            lblProgStatus.Text = ""

            Dim filesSize As Long = 0
            For index As Integer = 0 To ObjlsViewCompare.Items.Count - 1
                Dim file As File = ObjlsViewCompare.GetModelObject(index)
                If Not file.Status = MatchStatus.MisingOnRackSpace Then
                    filesSize = filesSize + file.SizeOnRackSpace
                End If
            Next
            ProgressBarCompare.Maximum = filesSize
            ' formProgree.Close()
            backgroundThred.Abort()
            backgroundThred.Join()
            BWRRStoLoc.RunWorkerAsync()
        End If
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:28:42.857

您的代码有几个问题：

1：您几乎不想调用`Thread.Abort`- 这样做可能会产生不可预知的影响，尤其是当一个线程终止另一个线程时。[有关详细信息，请参阅 MSDN。](http://msdn.microsoft.com/en-us/library/5b50fdsz%28v=vs.100%29.aspx)

关闭线程的正确方法是使用某种消息来告诉线程自行退出 - 设置静态变量（线程定期检查），使用同步对象等`Thread.Abort()`是一个很大的禁忌。

2：您的逻辑倒退：您在主线程上进行了耗时的操作（按钮单击事件处理程序显示这是您的主 UI 线程）并且您试图从后台线程显示您的进度对话框。

应该是相反的：您应该在点击处理程序中设置所有后台处理数据，显示进度对话框（假设它是无模式的），然后启动将执行处理的后台线程。

在处理过程中，后台线程应该不断地通知进度窗口它的进度，一旦完成，它也应该通知进度窗口这个事实。

每当您需要通知您的 UI 线程时，您必须正确地将您的调用编组到正确的线程。这是因为任何 UI 元素只能从创建它的线程访问 - 例如，如果不封送调用，就无法从工作线程设置标签控件的文本。

您需要使用[`InvokeRequired`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)/[`BeginInvoke()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)进行编组。打电话时`BeginInvoke()`你会通过一个代表；像这样的东西（对不起 C# 语法，我对 VB.NET 不太熟悉 - 应该很容易移植）：

```
private void SomeEventHandler ( object oSender, EventArgs oE )
{
    if ( InvokeRequired )
    {
        MethodInvoker oDelegate = (MethodInvoker) delegate
        {
            SomeEventHandler ( oSender, oE );
        };

        BeginInvoke ( oDelegate );
        return;
    }
    else
    {
        // already on the correct thread; access UI controls here
    }
} 
```

这一切都是因为控件通过消息处理其许多属性更新，并且这些消息必须以正确的顺序同步传递。确保这一点的唯一方法（无需一些非常复杂的编码）是在线程运行消息泵的同一线程上创建所有控件。

有关在主 UI 线程以外的线程上创建 UI 的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/2073076/c-sharp-winforms-possible-to-construct-form-on-background-thread-then-display)*（这是可能的，但如果你真的非常*需要，你只想这样做。这相当罕见。）

# c# - TaskCreationOptions.AttachedToParent 不等待子任务

> ID：14150448
> 
> 赞同：6
> 
> 时间：2013-01-04T02:55:02.003
> 
> 标签：c#, async-await

根据 MSDN：

> 您可以使用 AttachedToParent 选项来表达结构化任务并行性，因为父任务隐式等待所有子任务完成。

所以我有这个代码：

```
public async Task<int> GetIntAsync()
{
    var childTask = Task.Factory.StartNew(async () =>
    {
        await Task.Delay(1000);
    },TaskCreationOptions.AttachedToParent);

    return 1;
}

public async Task<ActionResult> Index()
{
    var watch = Stopwatch.StartNew();
    var task = GetIntAsync();
    var result = await task;
    var time = watch.ElapsedMilliseconds;

    return View();  
} 
```

我想知道为什么时间是 0 而不是 1000。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T19:06:16.103

使用基于任务的异步模式 (TAP) 的代码通常不使用`AttachedToParent`. `AttachedToParent`是任务并行库 (TPL) 设计的一部分。TPL 和 TAP 共享相同的`Task`类型，但在 TAP 代码中应避免使用许多 TPL 成员。

`await`在 TAP 中，您可以通过将“父”异步方法作为“子”异步方法返回的任务来支持“父”和“子”异步方法的概念：

```
public async Task<int> GetIntAsync()
{
  var childTask = Task.Run(() =>
  {
    ...
    await Task.Delay(1000);
    ...
  });
  ...

  await childTask;
  return 1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T03:03:07.450

AttachedToParent 仅附加到计划的任务。您的 async 方法返回的 Task 不是计划的，而是（隐式）来自 TaskCompletionSource

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-01T23:32:39.147

这是一个适用于动态数量的子任务的解决方案。

一般来说，使用列表是幼稚的。

```
public async Task<int> GetIntAsync()
{
    var childTasks = new List<Task>();

    while (...)
    {
        ...
        childTasks.Add(Task.Run(...));
        ...
    }

    await Task.WhenAll(childTasks);

    return 1;
} 
```

例如，如果子任务是短暂的，并且新的任务被快速且无限制地创建，那么列表就会溢出。

相反，我们可以只使用一项任务。

```
public async Task<int> GetIntAsync()
{
    var childrenTask = Task.WhenAll();

    while (...)
    {
        ...
        childrenTask = Task.WhenAll(Task.Run(...), childrenTask);
        ...
    }

    await childrenTask;

    return 1;
} 
```

请注意，这是一个任务链接列表，一旦任务完成，它就会缩小。

# javascript - 尝试制作基本标签

> ID：14150449
> 
> 赞同：1
> 
> 时间：2013-01-04T02:55:04.887
> 
> 标签：javascript, user-interface, tabs

好的，所以我有两个按钮。我的目标是制作页面，以便当单击一个按钮时，它将显示一个段落，当单击另一个按钮时，它将关闭另一个选项卡并显示另一个段落。我认为这将非常简单，但是事实证明，在单击另一个选项卡时关闭一个选项卡是很困难的。

```
function btn1Event(){
    var text1 = document.getElementById("btn1Text");
    var text2 = document.getElementById("btn2Text");

    if(text2.style.display == "inline" || text1.style.display == "none"){
        text1.style.display = "inline";
    }
}

function btn2Event(){
    var text1 = document.getElementById("btn1Text");
    var text2 = document.getElementById("btn2Text");

    if(text1.style.display == "inline" || text2.style.display == "none"){
        text2.style.display = "inline";
    }
} 
```

不完全确定为什么这不起作用。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:14:48.097

如果可以的话，这是使用 jQuery 的解决方案：

```
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js" type="text/javascript"></script>

<input type=button id="btn1" value="Show Div1">
<input type=button id="btn2" value="Show Div2">

<div style="display: none;" id="btn1Text">Test Div</div>
<div style="display: none;" id="btn2Text">Test Div2</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#btn1").click(function() {
            $("#btn1Text").show();
            $("#btn2Text").hide();
        });
        $("#btn2").click(function() {
            $("#btn1Text").hide();
            $("#btn2Text").show();
        });
    });
</script> 
```

而非 jQuery 方法：

```
<input type=button id="btn1" value="Show Div1" onclick="btn1Event();">
<input type=button id="btn2" value="Show Div2" onclick="btn2Event();">

<div style="display: none;" id="btn1Text">Test Div</div>
<div style="display: none;" id="btn2Text">Test Div2</div>

<script type="text/javascript">

function btn1Event(){
    document.getElementById("btn1Text").style.display = "inline";
    document.getElementById("btn2Text").style.display = "none";
}

function btn2Event(){
    document.getElementById("btn1Text").style.display = "none";
    document.getElementById("btn2Text").style.display = "inline";
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:04:45.493

您所做的只是将文本框显示设置为内联。如果您从未在任何时候将显示设置为无，您如何期望隐藏任何选项卡。

```
function btn1Event(){
    document.getElementById("btn1Text").style.display = "inline";
    document.getElementById("btn2Text").style.display = "none";
}

function btn2Event(){
    document.getElementById("btn1Text").style.display = "none";
    document.getElementById("btn2Text").style.display = "inline";
} 
```

# linux - 如何在 vi 中获得超级用户权限？

> ID：14150450
> 
> 赞同：0
> 
> 时间：2013-01-04T02:55:11.410
> 
> 标签：linux, vim, vi

> **可能重复：**
> [vim“用 sudo 编写”技巧如何工作？](https://stackoverflow.com/questions/2600783/how-does-the-vim-write-with-sudo-trick-work)

这种情况总是会出现：我尝试`vi`一个配置文件但我忘记`sudo`在它之前添加，当我尝试保存它时，`vi`提示我这个文件是只读的。

如何在不退出`vi`并重新编辑该文件的情况下更改为超级用户权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:01:42.160

这在 vi 和 vim 中对我有用：

```
:w !sudo tee % 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:03:59.103

```
cmap w!! %!sudo tee > /dev/null % 
```

在 ~/. Vimrc 并做：w!! 与 sudo 保持一致

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-04T03:25:26.963

**通常我使用:w /tmp/foo.txt**将它保存在 temp 中，然后使用 sudo cp。

# linux - 如何通过 SFTP 将远程服务器上 LS 的输出通过管道传输到本地文件系统？

> ID：14150451
> 
> 赞同：4
> 
> 时间：2013-01-04T02:55:14.323
> 
> 标签：linux, pipe, sftp, remote-server

我在命令行通过 SFTP 登录到远程服务器。我所在的文件夹包含数十万个文件。我需要在文本文件中获取这些文件的列表，以便以编程方式访问它们，因为没有一个 PHP SFTP 客户端能够返回如此大的文件列表。

当我`ls`在目录上运行时（在 SFTP 会话中），最终显示文件列表大约需要 20 分钟。

我在这台服务器上没有写访问权限，所以我无法将输出通过管道传输到远程服务器上的文件。

如何将输出通过管道传输到本地机器上的文本文件……或者以其他方式将文件列表发送到本地机器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-01T14:59:28.077

如果您远程执行，吴的答案很好。如果您登录到远程服务器并希望将文件发送回自己的家，这是另一种选择：

正确的答案在这里：[http ://scratching.psybermonkey.net/2011/02/ssh-how-to-pipe-output-from-local-to.html](http://scratching.psybermonkey.net/2011/02/ssh-how-to-pipe-output-from-local-to.html)

```
your_command | ssh username@server "cat > filename.txt" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T03:18:03.597

如果您愿意等待 20 分钟让数据在屏幕上滚动，您可以使用“脚本”捕获所有输出。

在启动 ssh 或 sftp 会话之前调用“脚本”，它会将所有终端输出捕获到本地磁盘。键入“退出”以完成捕获。

```
NAME
     script -- make typescript of terminal session

SYNOPSIS
     script [-akq] [-t time] [file [command ...]]

DESCRIPTION
     The script utility makes a typescript of everything printed on your ter-
     minal.  It is useful for students who need a hardcopy record of an inter-
     active session as proof of an assignment, as the typescript file can be
     printed out later with lpr(1).

     If the argument file is given, script saves all dialogue in file.  If no
     file name is given, the typescript is saved in the file typescript.

     If the argument command is given, script will run the specified command
     with an optional argument vector instead of an interactive shell.

     The following options are available:

     -a      Append the output to file or typescript, retaining the prior con-
             tents.

     -k      Log keys sent to program as well as output.

     -q      Run in quiet mode, omit the start and stop status messages.

     -t time
             Specify time interval between flushing script output file.  A
             value of 0 causes script to flush for every character I/O event.
             The default interval is 30 seconds.

     The script ends when the forked shell (or command) exits (a control-D to
     exit the Bourne shell (sh(1)), and exit, logout or control-D (if
     ignoreeof is not set) for the C-shell, csh(1)).

     Certain interactive commands, such as vi(1), create garbage in the type-
     script file.  The script utility works best with commands that do not
     manipulate the screen.  The results are meant to emulate a hardcopy ter-
     minal, not an addressable one.

ENVIRONMENT
     The following environment variable is utilized by script:

     SHELL  If the variable SHELL exists, the shell forked by script will be
            that shell.  If SHELL is not set, the Bourne shell is assumed.
            (Most shells set this variable automatically).

SEE ALSO
     csh(1) (for the history mechanism).

HISTORY
     The script command appeared in 3.0BSD.

BUGS
     The script utility places everything in the log file, including linefeeds
     and backspaces.  This is not what the naive user expects.

     It is not possible to specify a command without also naming the script
     file because of argument parsing compatibility issues.

     When running in -k mode, echo cancelling is far from ideal.  The slave
     terminal mode is checked for ECHO mode to check when to avoid manual echo
     logging.  This does not work when in a raw mode where the program being
     run is doing manual echo. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T03:22:56.227

如果您有 ssh 访问权限，那将非常容易：

```
ssh user@server ls > foo.txt 
```

否则，您可以将 sftp 的 STDOUT 和 STDERR 重定向到一个文件。你必须盲目地输入密码和命令。

# javascript - 为什么只显示一个 GET 值

> ID：14150453
> 
> 赞同：0
> 
> 时间：2013-01-04T02:55:35.497
> 
> 标签：javascript, html

我正在尝试检索在下面的表单中输入的值以传递到 PHP 文件中，以便我可以将值添加到数据库中。问题是我只将其中一个值传递到 PHP 页面，URL 栏只显示一个值，这是`equipmentList`我对 JavaScript 和 PHP 不熟悉，但我猜解决方案相对简单。我知道问题不在于我的 PHP 文件，因为现在出于测试/学习目的，我仅`echo`用于打印`$_GET`出现在 URL 栏中的变量的值。我的代码如下：

```
 <form id="updateForm" action="formPage.php">
       <input type="text" id="jobDescription" style="display: none"/>

        <label id="equipRan" style="display: none">Equipment ran</label>
        <div id="drops">
       <div id="equipType">
        <select size="1" name="equipmentList" title="" id="equipmentList" style="display: none">
            <option value="">Select Machine</option>
            <option value="EX">Excavator</option>
            <option value="DZ">Dozer</option>
            <option value="SC">Scraper</option>
        </select>
    </div>

   <div class="unitDropDowns">
      <div class="EX">
        <select class="exUnitNumbers">
            <option value="">Unit number</option>
            <option value="01E">01E</option>
            <option value="2E">2E</option>
            <option value="4E">4E</option>
        </select>           
    </div>

        <div class="DZ">
            <select class="dzUnitNumbers">
                <option value="">Unit number</option>
                <option value="01D">01D</option>
                <option value="2D">2D</option>
                <option value="1D">1D</option>
            </select>
        </div>

        <div class="SC">
            <select class="scUnitNumbers">
                <option value="">Unit number</option>
                <option value="54C">54C</option>
                <option value="53C">53C</option>
                <option value="52C">52C</option>
            </select>
        </div>
    </div>
   </div>
   <button type="submit" id="updateButton" onclick="dbQuery()" style="display: none">Submit</button>
   </form> 
```

JavaScript 函数：

```
var dbQuery = function(){
    var description = document.getElementById("jobDescription").value;
    var selectedEquip = document.getElementById("equipmentList");
    var selectedEquip1 = selectedEquip.options[selectedEquip.selectedIndex].text;
    var selectedVisibleValue = $(".unitDropDowns select:visible").val();
    document.getElementById("descriptionSummary").innerHTML = "<h3>Description</h3>" + "<p>" + description + "</p>";
    document.getElementById("equipmentRan").innerHTML = "<h3>Equipment Ran </h3>" + "<p>" + selectedEquip1 + "</p>" + "<h3>Unit Number</h3>" + "<p>" + selectedVisibleValue + "</p>";
    document.getElementById("equipmentRan").style.display = "block";
    document.getElementById("descriptionSummary").style.display = "block";
    document.forms["updateForm"].submit();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:58:09.697

只有您的设备列表选择具有名称和 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:03:23.657

为了使 html 元素的值（例如`input`or`select`包含在表单提交的请求中），这些元素必须`name`定义属性。

您的`dbQuery`功能的目的尚不清楚。您在那里构建的 Html 充其量只会在用户面前快速闪现，然后将被服务器返回的新页面替换。

# xml - XSLT 计数子节点

> ID：14150454
> 
> 赞同：10
> 
> 时间：2013-01-04T02:55:43.450
> 
> 标签：xml, xslt, xpath

当我尝试计算父节点中的子节点时，我很少使用 XLST 并得到令人困惑的结果。

**编辑：**

XML 的结构如下：

```
<?xml version="1.0"?>
<Response>
  <result>
    <name>Someone</name>
    **<rating>4.5</rating>**
    <review>
      <text>Some review.</text>
    </review>
    <review>
      <text>Another review.</text>
    </review>
  </result>
  <result>
    <name>Another one</name>
    **<rating>2</rating>**
    <review>
      <text>Blah, grieve, blah.</text>
    </review>
    <review>
      <text>Blah, grrrrr, blah.</text>
    </review>
    <review>
      <text>Blah, good grrrrr, blah.</text>
    </review>
  </result>
  ...
  ...
</Response> 
```

模板（简化）如下：

```
**<body>
      <xsl:apply-templates/>
</body>**

<xsl:template match="Response/result">
  <div class="item">
    <div class="name">
      <xsl:value-of select="name"/>
    </div>
    <xsl:if test="rating">
        <span class="review-count">
          **(<xsl:value-of select="count(review)"/>)**
        </span>
    </xsl:if>
  </div>
</xsl:template> 
```

我没有从这种方法中获得正确的子节点数。除了`count(review)`，我还尝试`count(descendant::review)`了几个 xPath 变体。我知道我错过了一些简单的东西——但是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T03:16:49.423

> ```
> <xsl:if test="rating">
>     <span class="review-count">
>       **(<xsl:value-of select="count(review)"/>)**
>     </span>
> </xsl:if> 
> ```

这将永远不会生成一个字符，因为`rating`在提供的 XML 文档中没有元素。如果您删除上述条件指令，则结果包含所需的计数值。

如果您确实有`rating`至少某些`review`元素的子元素（但未能向我们展示），那么您可能也没有展示 XML 文档的其他重要部分——例如默认名称空间。

**更新**：

OP 提供了更精确的 XML 文档，其中包含`rating`元素。

**我无法重现这个问题**。

**这个 XSLT 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="Response/result">
      <div class="item">
        <div class="name">
          <xsl:value-of select="name"/>
        </div>
        <xsl:if test="rating">
            <span class="review-count">
              **(<xsl:value-of select="count(review)"/>)**
            </span>
        </xsl:if>
      </div>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Response>
  <result>
    <name>Someone</name>
      <rating>4.5</rating>
    <review>
      <text>Some review.</text>
    </review>
    <review>
      <text>Another review.</text>
    </review>
  </result>
  <result>
    <name>Another one</name>
      <rating>2</rating>
    <review>
      <text>Blah, grieve, blah.</text>
    </review>
    <review>
      <text>Blah, grrrrr, blah.</text>
    </review>
    <review>
      <text>Blah, good grrrrr, blah.</text>
    </review>
  </result>
  ...
  ...
</Response> 
```

**产生想要的正确结果：**

```
 <div class="item">
   <div class="name">Someone</div>
   <span class="review-count">
              **(2)**
            </span>
</div>

<div class="item">
   <div class="name">Another one</div>
   <span class="review-count">
              **(3)**
            </span>
</div>
  ...
  ... 
```

# php - 将一行从一个mysql表复制到另一个表，并修改字段值

> ID：14150456
> 
> 赞同：1
> 
> 时间：2013-01-04T02:56:33.873
> 
> 标签：php, mysql

我有一张桌子`daily`和一张桌子`food`。在其中`food`，我存储了一个我吃的食物的数据库`food`。在`daily`中，我只存储我当天吃的食物（必须从 中选择`food`、修改并存储在 中`daily`），并且在一天结束时，`daily`表格被清除（所有行都用 删除`DELETE FROM daily`）。

我想弄清楚的是如何从表中复制一行`food`并将其复制到表中`daily`，同时修改它的值。

两者`food`都`daily`具有相同的结构。

**食物**（此表中没有任何变化）

```
name    calories   grams  fat   protein
---------------------------------------
apple   50         80     1.2   2
potato  90         45     3.4   5
carrot  10         70     6.2   6 
```

**每天**（例如我吃了一个93克的苹果后的桌子）

```
name    calories   grams  fat   protein
---------------------------------------
apple   58.125     93     1.395 2.325 
```

**例子**

我称出仅存在于我的食物数据库中的食物，如果没有，我将不得不添加它。

然后我从下拉列表中选择一种食物并输入它的重量（以克为单位）。

我从列表中选择一个`apple`. 我称重`apple`，它是`93g`。

我`93g`除以`80g`哪个产量`1.1625`。（脂肪和蛋白质）的所有统计数据`apple`都必须乘以`1.1625`然后插入到我的`daily`表中。

如何从 中检索一行`food`，通过我的修饰符 ( ) 修改其中的每个值`1.1625`，然后将其插入到我的`daily`表中？

* * *

我刚刚意识到我可以将我选择的任何食物加载到一个数组中并修改每个单元格的值，然后将该数组泵入`daily`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:15:53.657

在 PHP 中，您只需加载行、修改值并构建查询以将其插入`daily`. 那里没什么特别的，所以我猜你是在问如何在 SQL 中做到这一点：

```
INSERT INTO daily (name,
                   calories,
                   grams,
                   fat,
                   protein)
SELECT name,
       calories * 1.1625,
       grams * 1.1625,
       fat * 1.1625,
       protein * 1.1625
FROM food
WHERE name = "apple" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:16:40.370

我可以建议对您的架构稍作修改，以使您的生活更简单吗？使用您拥有的数据，您的数据未标准化。

将您的每日表更改为仅包含两列，一列用于名称，一列用于克，这是您需要插入的唯一信息，无需修改食物表中的任何值。

现在，要检索您想要每天显示的值，请执行以下操作：

```
SELECT d.name, d.grams, f.fat*(d.grams/f.grams), f.protein*(d.grams/f.grams) 
FROM daily d, food f
WHERE f.name=d.name; 
```

希望能帮助到你

# c++ - 结构原型

> ID：14150457
> 
> 赞同：1
> 
> 时间：2013-01-04T02:56:35.417
> 
> 标签：c++, visual-studio-2010, header-files, code-organization

我有一个标题，它包含一个结构的原型：

```
struct UserDataStruct; 
```

标头的源文件包含并包含标头，并且：

```
struct UserDataStruct
{
    int instance;
}; 
```

在我的主要源文件中，我有：

```
int main ()
{
    UserDataStruct lol;

    return 0;
} 
```

我似乎无法编译我的程序，因为 Visual Studio 2010 给了我一个错误：

```
error C2079: 'lol' uses undefined struct 'UserDataStruct' 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:59:11.703

`UserDataStruct`在创建它的实例之前，需要对需求进行完整的定义。在这种情况下，前向声明是不够的。

只需将您的结构定义从 .cpp 文件移动到标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:01:55.800

这行不通；结构需要在 main() 中完全了解；您必须将结构的完整声明放在头文件中，然后将其包含在主 .c 文件中。

如果您在其他头文件中使用指针，则只能转发声明结构/联合/类（因为这是您正在做的事情）。但最终您必须在 .c 文件中提供完整的声明。您不能“隐藏”结构的内部结构。

# git - 如何在钩子中读取 git push 参数？

> ID：14150459
> 
> 赞同：1
> 
> 时间：2013-01-04T02:56:41.763
> 
> 标签：git, bash, shell, hook

我有一个有多个用户的 Git 存储库。当他们推送时，我是否可以从客户端命令行读取参数？例如，用户名和密码？

我在我的 bash 脚本中尝试过`read`，但它不起作用。我无法访问`STDIN`。

如何在 Git 挂钩（更新）中从客户端命令行读取内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:09:48.357

不，Git 不进行任何身份验证。（请参阅“[分布式版本控制系统和企业 - 一个好的组合？](https://stackoverflow.com/a/5685757/6309) ”）

您可以从 https 会话或 ssh 会话中获取用户 ID（如果`~git/.ssh/authorized_keys`文件包含该信息）：这就是[gitolite](https://github.com/sitaramc/gitolite)所做的：请参阅“ [gitolite 之类的程序如何工作？](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work) ”。

你肯定不会得到密码。曾经。（这与 git 或 gitolite 无关）。

gitolite 将依次调用 git 本身（如果它授权 clone/push/pull 命令），但 git 将再次幸福地不知道请求所述克隆/pull/push 的用户 ID：它会简单地执行它。

# php - Yii - 从自定义控制器类继承 - 未找到

> ID：14150461
> 
> 赞同：6
> 
> 时间：2013-01-04T02:56:54.187
> 
> 标签：php, yii, gii

```
class SomeController extends Controller
{

        public function actionIndex() {
                echo 'This is some controller';
        }
}

class AnotherController extends SomeController
{

        public function actionIndex() {
                echo 'This is another controller';
        }
} 
```

这有效：

```
index.php?r=some 
```

但 ...

```
index.php?r=another 
```

说：

> PHP 警告
> 
> 包括（SomeController.php）：无法打开流：没有这样的文件或目录

两个文件都在

```
test\protected\controllers\ 
```

顺便说一句，过去我也尝试使用带有“SomeController”作为基类的 Gii 控制器生成器......

它说：

```
The controller has been generated successfully. You may try it now.

Generating code using template 
"C:\xampp\htdocs\yii\framework\gii\generators\controller\templates\default"...
generated controllers\YetAnotherController.php
generated views\yetAnother\index.php
done! 
```

当我点击“立即尝试”时，它还说：

> PHP 警告
> 
> 包括（SomeController.php）：无法打开流：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T03:08:41.587

**编辑：**

*protected/controllers*中的类不会自动加载，因此您必须在从父类文件扩展之前导入父类文件：

在*另一个控制器.php 中*：

```
Yii::import('application.controllers.SomeController');
public class AnotherController extends SomeController {
    // ...
} 
```

如果您还需要从 url 访问基类，则可以使用上述方法。否则，您可以将您的基类放在*protected/components*中，正如您已经知道的那样。

* * *

Yii 自动加载只有在你的文件名与文件包含的类名相同时才有效。含义`class SomeController`应该在*SomeController.php*文件中。

进行这些更改，它应该可以工作。

一个有用的 wiki：[了解自动加载助手类和助手函数](http://www.yiiframework.com/wiki/165/understanding-autoloading-helper-classes-and-helper-functions/)。

[指南链接](http://www.yiiframework.com/doc/guide/1.1/en/basics.convention#file)：

> 类文件应该以它们包含的公共类命名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:58:51.623

要扩展任何类，只需转到配置文件并在导入部分添加类

`'import' => array('application.controllers.SomeController')`

这将使其在整个应用程序中可用，而无需显式导入。

# entity-framework - 在线程池线程上执行时未使用数据库 DefaultConnectionFactory

> ID：14150463
> 
> 赞同：1
> 
> 时间：2013-01-04T02:56:58.413
> 
> 标签：entity-framework

我有一个使用 Entity Framework 5.0 的 Asp.Net MVC 4 项目。

由于某种原因，当我从 Threadpool 线程执行 EF 代码时，没有调用我的 DefaultConnectionFactory。

我在我的 Asp.Net MVC 项目的 Application_Start 事件中设置了我的连接工厂：

```
Database.DefaultConnectionFactory = new WebConnectionFactory(); 
```

到目前为止，这在所有数据访问代码上都成功运行。

我有一个 Parallel.ForEach 循环调用一些 EF 代码。出于某种原因，DefaultConnectionFactory 在调用时永远不会被命中。该工厂对我的代码执行至关重要，因此调用失败（它使用其默认连接字符串）。

任何想法为什么在新线程上运行时不会调用此 DefaultConnectionFactory ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:50:22.643

您需要获得为要使用的每个呼叫建立的连接。例如使用以下代码。

```
private static void UsingCustomConnection()
{
    using (var conn = Database.DefaultConnectionFactory.CreateConnection("YourDbName"))
    {
        using (var context = new YourContext(conn))
        {
            context.Destinations.Add(new Destination {Name = "Colorado"});
            context.SaveChanges();
        }
    }
} 
```

您需要在 YourContext 中进行设置

```
public YourContext(DbConnection connection)
    : base(connection, contextOwnsConnection: false)
{
} 
```

# grails - grails为mysql视图创建域类

> ID：14150467
> 
> 赞同：0
> 
> 时间：2013-01-04T02:58:06.983
> 
> 标签：grails

我有结合多个表列的 mysql 视图。我只想从此视图中选择数据以在 html 页面中显示 web。无需使用 GORM 创建/更新/删除。如何为这个视图定义域类？

我的看法是这样的。

```
view name: testview
col1 int,
col2 varchat(50),
col3 date 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:21:15.607

假设 col1 是主键：

```
class View {
    Integer col1
    String col2
    Date col3

    static mapping = {
        table name: "testview"
        version false
        id name: "col1", generator: "assigned"

        // These are unnecessary unless you change the name of the fields
        col1 column: "col1"
        col2 column: "col2"
        col3 column: "col3"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:32:56.967

Grails gorm 不提供对视图的直接访问，但是你可以试试HQL，或者参考[Elegant methods to handle database views on hibernate entity?](https://stackoverflow.com/questions/901537/elegant-ways-to-handle-database-views-on-hibernate-entities) .

# javascript - 如何删除模板头中的 JavaScript 代码 (Joomla! 3.0.x)？

> ID：14150475
> 
> 赞同：1
> 
> 时间：2013-01-04T02:58:26.890
> 
> 标签：javascript, jquery, css, joomla, mootools

我在 Joomla 中创建了一个模板！3x，但我想删除页眉中的默认 JavaScript 代码和样式表。

我的代码是：

```
$doc = JFactory::getDocument();

//Remove default configuration
$doc->setGenerator("");
$headData = $doc -> getHeadData();
unset($headData['metaTags']['http-equiv']);
$doc -> setHeadData($headData);   //Is OK
$doc -> _styleSheets = array();   //Is OK
$doc -> _scripts = array();       //Is OK
$doc -> _script =  array();  **// Not OK**

//Add foundation
$doc->addStyleSheet('templates/'.$this->template.'/css/foundation.css');
$doc->addScript('templates/'.$this->template.'/js/jquery.js');
$doc->addScript('templates/'.$this->template.'/js/modernizr.foundation.js'); 
```

模板标题 HTML 现在是：

```
function keepAlive() { var myAjax = new Request({method: "get", url: "index.php"}).send();} window.addEvent("domready", function(){ keepAlive.periodical(840000); });
jQuery(document).ready(function() {
    jQuery('.hasTooltip').tooltip({});
});
// The block is not removed 
```

**如何删除此 JavaScript 代码？**

参考文件：

*   /libraries/joomla/html/behavior.php
*   /libraries/cms/html/bootstrap.php

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-15T14:33:48.137

[我在这里](http://www.acuit.com.au/Blogs/removing-jcaption-in-joomla2.5.html)和[这里](https://coderwall.com/p/plp6qg)找到了一个简单的解决方案：

```
unset($this->_scripts[JURI::root(true).'/media/system/js/caption.js']); 
```

或者

```
unset ( $this -> _metaTags[ 'http-equiv' ] ) ;
$this -> _scripts    = array ( ) ;
$this -> _script     = array ( ) ; 
```

得到全部。:)

**不使用：**

```
$doc -> setHeadData($headData); 
```

它会做一些奇怪而神秘的事情。

您（和我）遇到的问题是重置`$doc`变量 through`$doc->setHeadData($headData)`而不是取消设置`_scripts`and `_script`through `$this`。[Coderwall.com](https://coderwall.com/p/plp6qg)提供了一个详尽的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T07:14:23.613

用于`JHtml::_('behavior.disable','behavior');`删除特定行为

我们在网络和论坛上有很多帖子，用户要求删除这种或那种行为。而不是他们通过我们可以拥有的视图和核心来破解他们的方式：

JHtml::_('behavior.disable','特定行为'); 删除我们不想要的

### 示例场景

无论您的 HTML 覆盖是否未加载它，都会加载工具提示。

`JHtml::_('behavior.disable','tooltips');`放置在模板中`index.php`可以为您执行此操作，这样可以帮助您从不需要的脚本中清除 head 标签。

在 3.0 中，如果您只想从注册中删除工具提示，则必须将视图复制到 HTML 覆盖。删除 JHtml::_('behavior.tooltip'); 从文件中，然后它就消失了。我认为这应该在没有 HTML 覆盖的情况下完成。

在 2.5.x 中，即使使用 HTML 覆盖也无济于事。工具提示保留。

如果您安装的任何其他扩展正在加载您不想要的行为，您将需要更长的时间才能弄清楚它在哪里。

# objective-c - UIPickerView prepareForSegue

> ID：14150478
> 
> 赞同：1
> 
> 时间：2013-01-04T02:58:43.110
> 
> 标签：objective-c, ios, ios6, uistoryboardsegue, social-framework

我正在创建一个客户。选择一个帐户并且该帐户通过（通过segue）。想知道它是如何做到的。obs ** 数据传递是用户选择的选择器的数组（帐户）。

这将返回选择器视图：

```
-(NSString*)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component { 
  ACAccount *acct = [arrayOfAccounts objectAtIndex:row]; 
  return [acct username];
} 
```

必须将用户选择的选项（数组）传递给另一个视图以用作帐户（Twitter）

我设法用 TableView 做了一次（但我认为界面很糟糕）并决定制作pickerview。问题仅在于传递此数据（如下），不等于 tableview

# database - SimpleDB Select VS DynamoDB 扫描

> ID：14150479
> 
> 赞同：6
> 
> 时间：2013-01-04T02:58:51.833
> 
> 标签：database, amazon-web-services, amazon-s3, amazon-simpledb, amazon-dynamodb

我正在制作一个移动 iOS 应用程序。用户可以创建帐户并上传字符串。就像 twitter，你可以关注人，有头像等。我无法估计用户群，但如果应用程序起飞，总数据集可能会相当大。

我将实际对象存储在 Amazon S3 上，并将密钥存储在数据库上，列出 Amazon S3 密钥很**慢**。那么存储密钥哪个更好？

这是我对 SimpleDB 和 DynamoDB 的了解：

简单数据库：

*   便宜的
*   表现良好
*   专为中小型数据集设计
*   可以使用选择表达式进行查询

动态数据库：

*   昂贵
*   可扩展性极强
*   表现出色；毫秒响应
*   无法查询

这些点在我的理解中是正确的，DynamoDB 更多的是关于杀手的。速度和可扩展性，SimpleDB 更多的是关于查询和价格（仍然提供良好的性能）。但是，如果您这样看，从 DynamoDB 下载所有键，或者使用 SimpleDB 进行选择查询……这会更快，对吧？一种是使用超快的数据库下载**大量**（然后我们必须匹配它们），另一种是使用性能相当好的数据库来查询和下载少数正确的对象。所以，哪个更快：

DynamoDB 下载所有内容并匹配或 SimpleDB 查询并下载

（注意：匹配只是意味着使用`-rangeOfString`和字符串比较，没有任何功耗或非时间效率或任何服务器端）

我的 S3 密钥将为每种类型的对象使用这种格式

> accountUsername:typeOfObject:randomGeneratedKey

例如，如果您正在引用一个帐户对象

> 罗汉：账号：shd83SHD93028rF

或个人资料图片：

> 罗汉：简介图片：Nck83S348DD93028rF37849SNDh

我有随机生成的唯一性密钥，它不引用任何东西，它只是在那里，因此密钥不会重复，因此会重叠两个对象。

在我的应用程序中，我可以选择 SimpleDB 或 DynamoDB，所以这里有两个选项：

*   使用 SimpleDB，使用格式存储键，但不使用格式进行任何引用，而是使用 SimpleDB 存储的属性。因此，我将密钥与用户名、类型等属性一起存储，也许我还必须将其他属性包含在密钥格式中。因此，如果我想从用户“Rohan”获取帐户对象。我只是使用 SimpleDB Select 来查询属性“用户名”和属性“类型”。（我匹配“帐户”的地方）

*   DynamoDB、存储键和每个键将具有图示格式。我扫描整个数据库，返回每一个键。然后获取密钥并利用密钥格式，我可以`-rangeOfString`用来匹配我想要的，然后从 S3 下载。

此外，SimpleDB 显然是地理分布的，但我该如何启用它呢？

那么哪个**更快**更可靠呢？使用 SimpleDB 查询带有属性的键。或者使用 DynamoDB 存储所有密钥，扫描（下载所有密钥）并使用例如匹配`-rangeOfString`？请注意，这些只是指向 S3 对象的短键。

这是我的最后一个问题，数据库中的对象数量将根据决定的答案而有所不同，我应该：

*   为用户拥有的每个对象创建一个单独的键/对象
*   创建一个帐户密钥/对象并将所有信息存储在其中

显然，这两种选择之间会有不同的优点和缺点。例如，如果它们都是独立的，则检索起来会更快，但它也更有条理，并且用于将其存储在一个用户帐户中的数据集较小。

所以你怎么看？

谢谢您的帮助！我已经为此付出了赏金，真的需要尽快回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T20:10:06.780

哇！这是什么问题 ：）

好的，让我们讨论一些方面：

# S3

S3 性能很可能很低，因为您没有为列表键添加前缀。

如果你通过存储像这样的对象进行分片`type/owner/id`，列出给定所有者的所有 id（前缀为 type/owner/）将很快。或者至少，比一次列出所有内容要快。

# Dynamo 与 SimpleDB

总的来说，这就是我的建议：

*   在以下情况下使用 SimpleDB：

    *   您的实体存储不会超过 10GB
    *   您需要应用涉及多个字段的复杂查询
    *   您的查询定义不明确
    *   您可以利用多值数据类型
*   在以下情况下使用 DynamoDB：

    *   您的实体存储将超过 10GB
    *   您想随时扩展需求/吞吐量
    *   您的查询和模型定义明确，不太可能更改。
    *   您的模型是动态的，涉及松散的模式
    *   您可以在客户端缓存查询（因此您可以通过在 Dynamo 之前查询缓存来节省吞吐量）
    *   您想通过使用原子更新来进行聚合/汇总摘要

鉴于您当前的描述，SimpleDB 似乎实际上更好，因为：-您的模型未完全定义-您可以推迟一些决策方面，因为达到 (10GiB) 限制需要一段时间

# 地理 SimpleDB

它不支持。它仅适用于 us-east-1 afaik。

# 键名

这最适用于 Dynamo：只要有可能，就使用 Hash + Range Key。但您也可以使用哈希创建键，并应用一些查询，例如：

*   列出我在表 T 上的所有记录，表 T 以`accountid:`
*   列出我在表 T 上的所有记录，表 T 以`accountid:image`

但是，这些根本就是扫描。请记住这一点。

（有关概述，请参见：http: [//docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html)）

# 奖金轨道

如果您使用的是 Java，Maven Central 上的 cloudy-data 包括 SimpleJPA 以及一些将 Blob 字段映射到 S3 的扩展。所以看一下：

[http://bitbucket.org/ingenieux/cloudy](http://bitbucket.org/ingenieux/cloudy)

谢谢

# jquery-mobile - Web2py：“脚本头过早结束：wsgihandler.py”：apache 吃 cpu 99%

> ID：14150481
> 
> 赞同：2
> 
> 时间：2013-01-04T02:59:12.817
> 
> 标签：jquery-mobile, apache2, mod-wsgi, web2py

我突然开始在日志中看到这一点，并且我看到 RAM 使用率飙升，而 apache 正在消耗所有这些。

此外，在谷歌搜索后，我在我的**站点中添加了以下内容 - 可**在 apache 中使用：

`WSGIApplicationGroup %{GLOBAL}`

虽然似乎没有帮助..

更多信息。如果有帮助：
**操作系统**：Ubuntu 12.04 LTS
**内存**：512 MB RAM
**Web2py 版本**：版本 1.99.7 (2012-03-04 22:12:08) 稳定的
**psycopg2**版本：2.4.5

**IMP：**我刚刚注意到，只有在启用其中一个页面 jquery_mobile 后，我开始从 iphone 访问该站点后，它才开始发生！

# python - Python：你可以使用 raw_input 和模板字符串吗？(%s)

> ID：14150483
> 
> 赞同：0
> 
> 时间：2013-01-04T02:59:22.330
> 
> 标签：python

我有这行代码..

```
raw_input("Hello, %s, this is a question: ") % name 
```

但我得到并错误地说：

> “并非所有参数都在字符串格式化期间转换”

使用`%s`时可以使用`input()`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T03:01:07.463

`name`在错误的位置；改成：

```
raw_input("Hello, %s, this is a question: " % name) 
```

例如：

```
>>> name = 'Mary'
>>> raw_input('Hello, %s, this is a question:' % name)
Hello, Mary, this is a question: 
```

# c++ - C++ 基本类型包装器

> ID：14150492
> 
> 赞同：0
> 
> 时间：2013-01-04T03:00:29.163
> 
> 标签：c++

我想围绕 C++ 中的简单类型创建一些基本的包装类。因为你不能像你应该能够的那样从基类型继承，所以我只是使用一个包装类。问题是，我希望能够直接转换为该类型，因为该转换是完全有效的。编译器只是不允许你，我找不到一种方法来告诉它没有运行会降低性能的强制转换方法就可以了。有没有办法做到这一点？

这是我对转换构造函数的内容：

```
class Integer32
{ 
    public: 
    Integer32(int value) { this->Value = value; } 
    int Value; 
}; 
```

编译器是否知道跳过它并直接从 int 分配它？我如何测试它以确保它相当重要......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:04:10.397

提供非`explicit`构造函数以允许从基类型转换和强制转换为包装器。提供非`explicit`转换运算符以允许从包装器转换为基类。

```
class my_wrapper {
    my_wrapper(int); // casting from int
    operator int();  // casting to int
}; 
```

（使它们`explicit`允许显式转换但不允许隐式转换）

# nsis - 在 NSIS 中检查注册表

> ID：14150493
> 
> 赞同：3
> 
> 时间：2013-01-04T03:00:32.070
> 
> 标签：nsis

我正在使用 NSIS 为我在 Visual C++ 2012 Express 中执行的项目制作可执行文件。因为我是初学者，所以我从 HM NIS Edit 中的设置向导开始。

我正在尝试将 Visual C++ 2012 Redistributable 与我的程序捆绑在一起，但是每次重新运行安装程序时，Redistributable 都会弹出一个“修复”和“删除”选项，这看起来很烦人。

所以我决定写一点 NSIS 脚本，到目前为止，这是脚本的开始：

```
Var STR
Section CheckForReg

ClearErrors
ReadRegDWORD $0 HKLM "SOFTWARE\Classes\Installer\Dependencies\{8e70e4e1-06d7-470b-9f74-a51bef21088e}" "Version"

ifErrors 0 Blank
StrCpy $STR "$INSTDIR\vcredist_x86.exe"
GoTo End

Blank:
    StrCpy $STR ""
End:

SectionEnd 
```

这部分在脚本的最开始调用，全局变量 STR 应用于：

```
!define MUI_FINISHPAGE_RUN $STR 
```

不久之后。

显然，这是一种非常愚蠢的方法，但我不需要太多。

问题是 CheckForReg 始终认为注册表不存在，并且不会移动到标签空白处。作为说明，我每次都手动检查注册表，注册表项如下所示：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Installer\Dependencies\{8e70e4e1-06d7-470b-9f74-a51bef21088e}]
"Version"="11.0.51106.1"
"DisplayName"="Microsoft Visual C++ 2012 Redistributable (x86) - 11.0.51106" 
```

所以问题是：我在哪里做错了？它看起来很简单，但显然我有一些倒退。

-- 删除了代码转储

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:21:43.327

您只能使用 ReadRegDWORD 读取 DWORD！

```
!include LogicLib.nsh ; So we don't have to use all these labels
StrCpy $STR ""
ReadRegStr $0 HKLM "SOFTWARE\Classes\Installer\Dependencies\{8e70e4e1-06d7-470b-9f74-a51bef21088e}" "Version"
${If} $0 == ""
  StrCpy $STR "$INSTDIR\vcredist_x86.exe"
${EndIf} 
```

# c# - 如何获取 null 而不是 KeyNotFoundException 按键访问 Dictionary 值？

> ID：14150508
> 
> 赞同：96
> 
> 时间：2013-01-04T03:02:15.950
> 
> 标签：c#, dictionary

`null`在某些特定情况下，当字典中没有这样的键时，使用一种简短易读的方式来获取而不是`KeyNotFoundException`通过键访问字典值时对我来说似乎很有用。

我首先想到的是一个扩展方法：

```
public static U GetValueByKeyOrNull<T, U>(this Dictionary<T, U> dict, T key)
        where U : class //it's acceptable for me to have this constraint
{
    if (dict.ContainsKey(key))
        return dict[key];
    else 
        //it could be default(U) to use without U class constraint
        //however, I didn't need this.
        return null; 
} 
```

但实际上并不是很简短，当你写这样的东西时：

```
string.Format("{0}:{1};{2}:{3}",                                                 
              dict.GetValueByKeyOrNull("key1"),
              dict.GetValueByKeyOrNull("key2"),
              dict.GetValueByKeyOrNull("key3"),
              dict.GetValueByKeyOrNull("key4")); 
```

我会说，最好有一些接近基本语法的东西：`dict["key4"]`.

然后我想出了一个想法，创建一个带有`private`字典字段的类，它暴露了我需要的功能：

```
public class MyDictionary<T, U> //here I may add any of interfaces, implemented
                                //by dictionary itself to get an opportunity to,
                                //say, use foreach, etc. and implement them
                                // using the dictionary field.
        where U : class
{
    private Dictionary<T, U> dict;

    public MyDictionary()
    {
        dict = new Dictionary<T, U>();
    }

    public U this[T key]
    {
        get
        {
            if (dict.ContainsKey(key))
                return dict[key];
            else
                return null;
        }
        set
        {
            dict[key] = value;
        }
    }
} 
```

但是，基本行为的细微变化似乎有点开销。

另一种解决方法可能是`Func`在当前上下文中定义 a ，如下所示：

```
Func<string, string> GetDictValueByKeyOrNull = (key) =>
{
    if (dict.ContainsKey(key))
        return dict[key];
    else
        return null;
}; 
```

所以它可以像`GetDictValueByKeyOrNull("key1")`.

请你给我更多的建议或帮助我选择一个更好的吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2015-10-19T20:18:32.047

这是我个人库中的解决方案，作为扩展方法实现。我只是发布它，因为它是从字典*接口*实现的，并且允许传入可选的默认值。

**执行**

```
public static TV GetValue<TK, TV>(this IDictionary<TK, TV> dict, TK key, TV defaultValue = default(TV))
{
    TV value;
    return dict.TryGetValue(key, out value) ? value : defaultValue;
} 
```

**用法**

```
 MyDictionary.GetValue("key1");
 MyDictionary.GetValue("key2", -1);
 MyDictionary.GetValue("key3")?.SomeMethod(); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-04T16:24:36.643

您无法使用扩展方法获得所需的语法，并且正如其他人所说，重写方法/运算符以更改其行为通常不是一个好主意。我认为你能做的最好的就是缩短你使用的名字。

那就是如果您需要保留 IDictionary 界面。如果您没有与任何需要 IDictionary 的代码交互，那么您可以自由定义自己的接口，并且让 [] 运算符以不同的方式工作不是问题。

无论您最终调用该函数，您都希望像这样实现它：

```
public static U Get<T, U>(this Dictionary<T, U> dict, T key)
    where U : class
{
    U val;
    dict.TryGetValue(key, out val);
    return val;
} 
```

它只进行一次查找，而您的实现则需要 2 次。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-01-04T04:54:48.010

最后，我想出了一个变体，使用从字典类派生的具有显式接口实现的变体：

```
public interface INullValueDictionary<T, U>
    where U : class
{
    U this[T key] { get; }
}

public class NullValueDictionary<T, U> : Dictionary<T, U>, INullValueDictionary<T, U>
    where U : class
{
    U INullValueDictionary<T, U>.this[T key]
    {
        get
        {
            U val;
            this.TryGetValue(key, out val);
            return val;
        }
    }
} 
```

因此，它通过以下方式公开了我需要的功能：

```
//create some dictionary
NullValueDictionary<int, string> dict = new NullValueDictionary<int, string>
{
    {1,"one"}
};
//have a reference to the interface
INullValueDictionary<int, string> idict = dict;

try
{
    //this throws an exception, as the base class implementation is utilized
    Console.WriteLine(dict[2] ?? "null");
}
catch { }
//this prints null, as the explicit interface implementation 
//in the derived class is used
Console.WriteLine(idict[2] ?? "null"); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-31T05:41:47.550

添加`DictionaryExtension`班级

```
public static class DictionaryExtension
{
    public static TValue GetValueOrDefault<TKey, TValue>
        (   this IDictionary<TKey, TValue> dictionary,TKey key)
    {
        TValue value;
        return dictionary.TryGetValue(key, out value) ? value : default(TValue);
    }
} 
```

如果在字典中找不到键，它可以返回**默认值。**

默认是`null`如果这是引用类型。

```
_dic.GetValueOrDefault(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-17T11:48:32.140

值得指出的是[HybridDictionary](https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.hybriddictionary)默认执行此操作。您失去了通用类型，但获得了 null-if-not-found 功能。

而且（至少在理论上）我认为，您可以在较少的值下获得性能优势。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-04T03:26:25.703

我的前提是我**不会**使用它。该`new`关键字虽然在这种情况下很有用，但会产生很难找到的错误。除此之外，你可以试试这门课。

```
class MyDictionary<TKey, TValue> : Dictionary<TKey, TValue>
{
    public new TValue this[TKey key]
    {
        get
        {
            TValue value;
            return TryGetValue(key, out value) ? value : default(TValue);
        }
        set { base[key] = value; }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-16T00:30:10.613

我以前做过这个，它很好地继承了常规的 Dictionary 类并隐藏了索引器。这样做真的很干净，因此您会自动获得常规字典类的所有可靠性和熟悉度。

```
public class NullSafeDict<TKey, TValue> : Dictionary<TKey, TValue> where TValue : class
{
    public new TValue this[TKey key]
    {
        get
        {
            if (!ContainsKey(key))
                return null;
            else
                return base[key];
        }
        set
        {
            if (!ContainsKey(key))
                Add(key, value);
            else
                base[key] = value;
        }
    }
} 
```

# java - 如何将 Stack 保存到 SharedPreferences？

> ID：14150509
> 
> 赞同：0
> 
> 时间：2013-01-04T03:02:25.557
> 
> 标签：java, android, stack

在我的 Android 应用程序中，我有一个扩展[Stack](http://developer.android.com/reference/java/util/Stack.html)的 Strings 自定义堆栈。我想将堆栈保存到 Sharedpreferences 并从 SharedPreferences 中检索它。

我知道如何将堆栈转换为 ArrayList，但我读过 SharedPreferences 只支持集合而不支持列表。那么如何在保留堆栈顺序的同时将堆栈保存到 SP 呢？以及如何从 SharedPreferences 中检索它并重建堆栈？

我真的不知道如何处理这个问题。任何指向正确方向的指针都非常感谢 - 我不是在要求代码转储答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:35:25.627

这是一种可能的解决方案，

您可以通过序列化将堆栈转换为字符串并将字符串保存到共享首选项

```
ByteArrayOutputStream bos = new ByteArrayOutputStream()
ObjectOutputStream oos = new ObjectOutputStream(bos);
oos.writeObject(stack);
oos.flush();
String base64str = Base64.encode(bos.toByteArray(), Base64.DEFAULT);
... 
```

从首选项加载字符串时，将 base64 字符串解码为字节并使用 ObjectInputStream 反序列化堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:20:55.547

根据之前的评论：

您可能必须将您的序列化/反序列化为`Stack`字符串表示形式，然后可以将其存储在`SharedPreferences`.

可能可以（ab）为此使用 json 格式，但它不能保证结果中各个元素的顺序。不过，包含每个元素的“位置”也应该很容易，然后您可以在反序列化后使用它对元素进行排序。

或者，您可以提出自己的结构。

# jquery - 为什么 .removeClass 不起作用？

> ID：14150513
> 
> 赞同：2
> 
> 时间：2013-01-04T03:03:01.080
> 
> 标签：jquery

这是[jsfiddle代码](http://jsfiddle.net/yannisdran/v6FRU/)

我在 CodeAcademy 课程中发现了这个问题。

.addClass、.toggleClass 也是如此

```
 $(document).ready(function() {
    $('#title').click(function() {
        $(this).removeClass('.highlighted');
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:03:27.030

试试这个

```
$(this).removeClass('highlighted'); 
```

**文档：**

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:08:16.907

试试这个

```
$(document).ready(function() {
    $('#title').click(function() {
        $(this).removeClass('highlighted');
    });
}); 
```

[http://jsfiddle.net/v6FRU/1/](http://jsfiddle.net/v6FRU/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T03:14:34.613

不要放点 -----> **[ 。]**在类名删除之前，它会正常工作:) 使用这个

```
 $(document).ready(function() {
    $('#title').click(function() {
        $(this).removeClass('highlighted');
    });
}); 
```

# ios - MPMOVIEPLAYER 在横向播放视频多次时导致视频下移并且导航栏消失

> ID：14150515
> 
> 赞同：2
> 
> 时间：2013-01-04T03:03:19.713
> 
> 标签：ios, mpmovieplayer

我正在编写一个嵌入视频的应用程序。如果我先以横向模式启动应用程序，然后再启动视频，它看起来不错。然后我点击完成，然后再次播放视频。第二次视频现在向下和向左移动。当我点击视频时，完成按钮不显示。我必须将模拟器切换到纵向模式，然后再切换回横向模式，然后我可以单击完成来停止视频。如果我总是以纵向模式启动视频，然后将模拟器转为横向模式，它将起作用。我可以多次这样做，并且视频将始终正确排列。但是，如果我始终以横向模式播放应用程序，则在第一次播放后，视频将始终向下和向左移动。我经历了许多其他 mpmovieplayer 问题，并将我的代码与其他代码进行了比较。我正在使用 IOS6 和 Storyboard。我在下面复制了我的基本 MPMOVIEPLAYER 代码。我真的被困在这里

MoviePlayerViewController.m

```
- (void) readyPlayer
 mp =  [[MPMoviePlayerController alloc] initWithContentURL:movieURL];

// For 3.2 devices and above
if ([mp respondsToSelector:@selector(loadState)]) 
{
    // Set movie player layout
    [mp setControlStyle:MPMovieControlStyleFullscreen];
    [mp setFullscreen:YES];

    // May help to reduce latency
    [mp prepareToPlay];

    // Register that the load state changed (movie is ready)
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayerLoadStateChanged:) 
                                                 name:MPMoviePlayerLoadStateDidChangeNotification 
                                               object:nil];
}  

// Register to receive a notification when the movie has finished playing. 
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:nil];
// Register to receive a notification when the movie has exit fullscreen mode.
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerDidExitFullscreenNotification
                                           object:nil];
}

/*---------------------------------------------------------------------------
 * For 3.2 and 4.x devices
 *  
*--------------------------------------------------------------------------*/
- (void) moviePlayerLoadStateChanged:(NSNotification*)notification 
{
// Unless state is unknown, start playback
if ([mp loadState] != MPMovieLoadStateUnknown)
{
    // Remove observer
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self
     name:MPMoviePlayerLoadStateDidChangeNotification 
     object:nil];

    // When tapping movie, status bar will appear, it shows up
    // in portrait mode by default. Set orientation to   `landscape`                                                                                                                    

    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        // Rotate the view for landscape playback
        [[self view] setBounds:CGRectMake(0, 0, 480, 320)];
        [[self view] setCenter:CGPointMake(160, 240)];
        [[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 

        // Set frame of movie player
        [[mp view] setFrame:CGRectMake(0, 0, 480, 320)];
    } else {
            // Rotate the view for landscape playback
            [[self view] setBounds:CGRectMake(0, 0, 1024, 748)];
            [[self view] setCenter:CGPointMake(374, 512)];
            [[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 

            // Set frame of movie player
            [[mp view] setFrame:CGRectMake(0.0, 0.0, 1024.0, 748.0)];
        }

        // Add movie player as subview
        [[self view] addSubview:[mp view]];   

        // Play the movie
        [mp play];
    }
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    // Remove observer
    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:nil];

    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:MPMoviePlayerDidExitFullscreenNotification
     object:nil];

    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

# javascript - 用于命名 eval 的 javascript 的令牌

> ID：14150516
> 
> 赞同：1
> 
> 时间：2013-01-04T03:03:23.110
> 
> 标签：javascript, eval, google-chrome-devtools

我记得在 Paul Irish 的视频中看到过这个——我什至用过几次，虽然还不够经常记住。

有一些类似于`//@ someName`您可以附加到评估脚本的令牌，让 chrome 在 devtools 中为其分配一个名称（以便可以对其进行调试）。

那个令牌到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:09:21.137

```
//@ sourceURL=dynamicScript.js 
```

[https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints?hl=de-DE](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints?hl=de-DE)

使用“chrome dev tools eval name”请求谷歌搜索

# jquery - 缓存 AJAX 响应不起作用

> ID：14150522
> 
> 赞同：0
> 
> 时间：2013-01-04T03:04:06.543
> 
> 标签：jquery, caching

嗨，我有以下代码，其中包含 AJAX 结果的缓存机制：

```
jQuery( document ).ready( function( $ ) {
var _doing_ajaxx = false;
$('.toolbar').remove();
$('#mydiv #frontend').click(function() {    
if (_doing_ajaxx) {
    return false;
}

var title_shortcode = $(this).text();

var insert_namex=  $(this).attr('class');

var titlejsselector=title_shortcode.replace(/ /g,'');

var buttonval=$('#'+titlejsselector+' input').val();

if (buttonval=='Minimize')  {
//stop ajax request if button is set

    $('#'+titlejsselector+' div').remove();
    $('#'+titlejsselector+' input').remove();

} else {
//initialize ajax variables
var cacheObj = {};
var data = {
        action: 'test_ajax_response',
        test_ajax_response_nonce: the_ajax_script.test_ajax_response_nonce, 
        postID_from_ajax : the_ajax_script.postid_to_ajax,
        insert_name_ajax: insert_namex,
        title_ajax: title_shortcode
    }; 
if (cacheObj.postID_from_ajax){

display(cacheObj.postID);

}else{

  // Do your ajax call
$.post(the_ajax_script.ajaxurl, data, function(response) {

    _doing_ajaxx = false;
    cacheObj.postID_from_ajax = response;
    display(response);

});

 }

 function display(response){

  $('#mydiv #frontend').next().slideToggle();   
  $('#mydiv #'+titlejsselector).append(response+"<input type='hidden' id='minimizebutton' value='Minimize'>");
  SyntaxHighlighter.highlight();

  $('.toolbar').remove();

  }   

}); 

}); 
```

但是，我检查了 Firebug，它仍在向服务器发布请求，而不是使用缓存的结果。

上面的代码是这样工作的。用户将首先单击链接，然后将结果（来自 AJAX 响应）显示给服务器。用户可以通过再次单击链接来最小化结果。这是第二次点击。最小化按钮将删除结果。如果用户再次单击该链接以再次查看结果，我不想再次向服务器请求，而是使用第一次单击的缓存结果。

上面的代码需要改什么？感谢您的任何提示。

更新：当用户最小化结果时，我还注意到缓存变量 cacheObj.postID_from_ajax 在第二次单击时被破坏（或变为空）。所以在第三次点击时，这个缓存变量不能再使用了，因为它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:21:12.327

`cacheObj`您每次都在单击处理程序中创建一个空。然后在您创建它之后，您正在寻找它的一个不存在的属性，因为您刚刚将它声明为空对象

```
var cacheObj = {};

if (cacheObj.postID_from_ajax)/* object has no properties...will always be false*/ 
```

您需要`var cacheObj = {};`在点击处理程序之外声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:26:26.667

是点击处理程序的`cacheObj`本地，这里`cacheObj`所有点击处理程序都可用，因为它位于相同的共享上下文（闭包）中。

试试这个

```
jQuery(document).ready(function($) {
    // initialize ajax variables
    var _doing_ajaxx = false;
    //cache object is created in the covering closure since it must be available across all click handlers
    var cacheObj = {};

    $('.toolbar').remove();
    $('#mydiv #frontend').click(function() {
        if (_doing_ajaxx) {
            return false;
        }

        var title_shortcode = $(this).text();

        var insert_namex = $(this).attr('class');

        var titlejsselector = title_shortcode.replace(/ /g, '');

        var buttonval = $('#' + titlejsselector + ' input').val();

        if (buttonval == 'Minimize') {
            // stop ajax request if button is set

            $('#' + titlejsselector + ' div').remove();
            $('#' + titlejsselector + ' input').remove();

        } else {
            var data = {
                action : 'test_ajax_response',
                test_ajax_response_nonce : the_ajax_script.test_ajax_response_nonce,
                postID_from_ajax : the_ajax_script.postid_to_ajax,
                insert_name_ajax : insert_namex,
                title_ajax : title_shortcode
            };
            if (cacheObj.postID_from_ajax) {

                display(cacheObj.postID);

            } else {

                // Do your ajax call
                $.post(the_ajax_script.ajaxurl, data, function(response) {

                            _doing_ajaxx = false;
                            cacheObj.postID_from_ajax = response;
                            display(response);

                        });

            }

            function display(response) {

                $('#mydiv #frontend').next().slideToggle();
                $('#mydiv #' + titlejsselector)
                        .append(response
                                + "<input type='hidden' id='minimizebutton' value='Minimize'>");
                SyntaxHighlighter.highlight();

                $('.toolbar').remove();

            }
        }
    });

}); 
```

# iptables - iptable 规则未按预期运行

> ID：14150524
> 
> 赞同：1
> 
> 时间：2013-01-04T03:04:20.897
> 
> 标签：iptables

对于新系统，我有以下 iptable 规则。

基本上我试图允许传入 www、ssl 和 ssh 并允许传出 ftp、ssh、smtp、dns、www 和 ssl 连接。加上一个特殊规则，用于与特定 mysql 服务器的传出 mysql 连接、DoS 攻击助手和一些丢弃的数据包日志记录。我想删除的所有其他连接。

我的麻烦是，每次我为这些规则运行 shell 脚本时，我都会被锁得比鼓还紧。它会丢弃已建立的 ssh 会话，并且不允许我开始新的会话。我必须通过控制台重新启动，因为即使在控制台会话中刷新规则也无济于事。

后备规则（刷新后的前三个）是在开头还是结尾都没有关系。我尝试了很多方法，我希望有一双新的眼睛可以看到我所缺少的：

```
iptables -F

iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT DROP

iptables -A INPUT -i eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT

iptables -A INPUT -i eth0 -p tcp -m multiport --dports 80,443 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp -m multiport --sports 80,443 -m state --state ESTABLISHED -j ACCEPT

iptables -A OUTPUT -o eth0 -p tcp -m multiport --dport 21,22,25,53,80,443 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A INPUT -i eth0 -p tcp -m multiport --sport 21,22,25,53,80,443 -m state --state ESTABLISHED -j ACCEPT

iptables -A OUTPUT -p icmp --icmp-type echo-request -j ACCEPT
iptables -A INPUT -p icmp --icmp-type echo-reply -j ACCEPT

iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT

iptables -A OUTPUT -p tcp -s 172.xxx.xxx.xxx --sport 1024:65535 -d 172.xxx.xxx.xxx --dport 3306 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A INPUT -p tcp -s 172.xxx.xxx.xxx --sport 3306 -d 172.xxx.xxx.xxx --dport 1024:65535 -m state --state ESTABLISHED -j ACCEPT

iptables -A INPUT -p tcp -m multiport --dport 80,443 -m limit --limit 25/minute --limit-burst 100 -j ACCEPT

iptables -N LOGGING
iptables -A INPUT -j LOGGING
iptables -A LOGGING -m limit --limit 2/min -j LOG --log-prefix "IPTables Packet Dropped: " --log-level 7
iptables -A LOGGING -j DROP 
```

任何帮助，将不胜感激。注意：我混淆了内部 IP 以进行发布。

# php - PHP 服务器没有从 jquery 获得 $.ajax 请求

> ID：14150526
> 
> 赞同：0
> 
> 时间：2013-01-04T03:04:40.787
> 
> 标签：php, javascript, jquery, json

您好我正在调用以下 javascript 函数将一些数据发送到 php 服务器。但是服务器没有收到数据：

```
function sendData()
{
   var obj = new Object();
   obj.id = "001";
   obj.len = "7";

   $.ajax({
      type: "POST",
      url: "php.php",
      data: JSON.stringify(obj)
      }).done(function( msg ) {
              alert( "Data Saved: " + msg );
      });
} 
```

这是我的 php 代码：

```
<?php   
   if (!empty($_POST))
   {
      echo $_POST['id'];
   }
   else
      echo "no data"  
?> 
```

有人可以让我知道我在哪里犯了错误。我就是想不通！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:14:56.587

这导致了问题

```
data: JSON.stringify(obj) 
```

并将其更改为

```
 data: obj 
```

**来自 JQuery 文档：**

> **数据**
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。**对象必须是键/值对**。如果 value 是一个 Array，jQuery 会根据传统设置的 value 序列化多个具有相同 key 的值

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 将mysql查询转换为codeigniter活动记录

> ID：14150528
> 
> 赞同：1
> 
> 时间：2013-01-04T03:04:58.237
> 
> 标签：php, mysql, codeigniter

我有这样的mysql查询：

```
SELECT * FROM ms_project_log 
INNER JOIN ms_project ON ms_project_log.iwo_no = ms_project.iwo_no
WHERE  ms_project_log.iwo_no = '0007/NMS/BOTM/01/12'
ORDER BY ms_project_log.log_date DESC 
```

如何转换为codeigniter活动记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:13:58.580

这是给你的代码

```
$this->db->select('*');
$this->db->from('ms_project_log');
$this->db->join('ms_project','ms_project_log.iwo_no=ms_project_iwo_no', 'inner');
$this->db->where(ms_project_log.iwo_no, '0007/NMS/BOTM/01/12');
$this->db->order_by("ms_project_log.log_date", "desc"); 
$this->db->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:41:43.490

```
$this->db->join('ms_project','ms_project_log.iwo_no = ms_project.iwo_no','inner')
         ->order_by('ms_project_log.log_date','desc')
         ->get_where('ms_project_log', array('ms_project_log.iwo_no'=>'0007/NMS/BOTM/01/12'))
         ->result_array(); 
```

您可以使用 select 方法过滤选定的列，默认情况下，如果不使用 select 方法，您的查询将使用“select *”

# java - Java charAt 用于具有两个代码单元的字符

> ID：14150530
> 
> 赞同：17
> 
> 时间：2013-01-04T03:05:11.280
> 
> 标签：java, unicode, utf-16, surrogate-pairs, astral-plane

来自*核心 Java*，第一卷。1，第 9 版，第 69：

> 字符 ℤ 在 UTF-16 编码中需要两个代码单元。打电话
> 
> ```
> String sentence = "ℤ is the set of integers"; // for clarity; not in book
> char ch = sentence.charAt(1) 
> ```
> 
> 不返回空格，而是返回 ℤ 的第二个代码单元。

但似乎`sentence.charAt(1)` *确实*返回了一个空格。例如，`if`以下代码中的语句计算结果为`true`。

```
String sentence = "ℤ is the set of integers";
if (sentence.charAt(1) == ' ')
    System.out.println("sentence.charAt(1) returns a space"); 
```

为什么？

如果相关，我在 Ubuntu 12.10 上使用 JDK SE 1.7.0_09。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T04:46:20.917

听起来这本书在说 'ℤ' 不是[基本多语言平面](http://www.sttmedia.com/unicode-basiclingualplane)中的 UTF-16 字符，但实际上它是。

对于不在基本多语言平面中的字符，Java 使用 UTF-16 和代理对。由于 'ℤ' (0x2124) 在基本的多语言平面中，它由单个代码单元表示。在您的示例`sentence.charAt(0)`中将返回“ℤ”，`sentence.charAt(1)`并将返回“”。

由代理对表示的字符有两个代码单元组成该字符。`sentence.charAt(0)`将返回第一个代码单元，`sentence.charAt(1)`并将返回第二个代码单元。

请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)：

> String 表示 UTF-16 格式的字符串，其中补充字符由代理对表示（有关更多信息，请参见 Character 类中的 Unicode Character Representations 部分）。索引值指的是字符代码单元，因此补充字符使用字符串中的两个位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T03:12:51.177

根据文档，[字符串](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)在内部表示为 utf-16，因此`charAt()`给您两个代码点。如果您有兴趣查看各个代码点，可以使用此代码（来自此[答案](https://stackoverflow.com/a/1527891/16959)）：

```
final int length = sentence.length();
for (int offset = 0; offset < length; ) {
   final int codepoint = sentence.codePointAt(offset);

   // do something with the codepoint

   offset += Character.charCount(codepoint);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-26T21:40:26.463

Horstmann 正在谈论需要两个 UTF-16 代码单元的“Z”。看看这段代码：

```
public class Main {
    public static void main(String[] args)
    {
        String a = "\uD83D\uDE02 is String";
        System.out.println("Length: " + a.length());
        System.out.println(a.charAt(0));
        System.out.println(a.charAt(1));
        System.out.println(a.charAt(2));
        System.out.println(a.charAt(3));
    }
} 
```

在 IntelliJ Idea 中，我什至无法将 4 字节字符粘贴为一个字符，因为在粘贴此表情符号时：IDE 会自动将其转换为：“\uD83D\uDE02”。请注意，此表情符号计为 2 个字符。

如果要计算“实际长度”，则应使用： `System.out.println("Real length: " + a.codePointCount(0, a.length()));`

看看：[实际使用中最常见的非BMP Unicode字符有哪些？](https://stackoverflow.com/questions/5567249/what-are-the-most-common-non-bmp-unicode-characters-in-actual-use)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T03:12:30.517

[Javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)对此进行了解释：

> String 表示 UTF-16 格式的字符串，其中补充字符由代理对表示（有关更多信息，请参见 Character 类中的 Unicode Character Representations 部分）。索引值指的是字符代码单元，因此补充字符使用字符串中的两个位置。

~~简而言之，这本书是错误的。~~

**编辑从下面的评论中添加：**昨晚我没有想到的是，您在问题中使用的角色实际上并不是他们正在谈论的角色，而他们真正想要的是当您拥有有一个需要四个字节而不是两个字节的字符。Javadoc 中的上述段落链接到另一个 javadoc；[Unicode Character Representations](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#unicode)讨论了这一点的后果。

# php - 无法在 codeigniter 控制器中访问 $_SESSION 变量

> ID：14150531
> 
> 赞同：1
> 
> 时间：2013-01-04T03:05:27.590
> 
> 标签：php, codeigniter, session

我有一个用于验证用户的控制器，如下所示：

```
function index()
{
    if($this->input->post('username'))
    {
        $username=$this->input->post('username');
        $password=$this->input->post('password');
        $this->mstudents->verifyUser($username,$password);
        if(@$_SESSION['sutdentUsername']!=""){
        echo "success";
        }
        else
        {
            echo "error";
        }
    }
    else
    {
        echo "error";
    }

} 
```

该函数由ajax在视图中调用，如下所示：

```
$.post('<?PHP echo base_url();?>account/login/',{username:$("#username").val(),password:$("#password").val()},function(data){

        $("#loginButton").button('reset');
        if(data=="success")
        {
            window.location="<?PHP echo base_url();?>account/dashboard";
        }
        }); 
```

现在的问题是，当我尝试访问仪表板中的会话变量进行验证时，它会得到一个空白的 $_SESSION 数组。可能是什么问题呢？

这是我的 verifUser 模式代码：

```
function verifyUser($username,$password)
{
    $data=array();
    $this->db->where('email',$username);
    $this->db->where('password',$password);
    $this->db->where('status','active');
    $Q=$this->db->get('students');
    if($Q->num_rows()>0)
    {
        $row=$Q->row_array();       
        $_SESSION['sutdentUsername']=$row['email'];

    }
    else
    {
        $_SESSION['sutdentUsername']="";
    }
} 
```

我在所有控制器的构造函数中都有这段代码：

```
function __construct()
{
    parent::__construct();
    session_start();
    print_r($_SESSION); 
```

控制器的目录结构如下：

控制器：帐户-仪表板-登录其他控制器在这里...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T05:50:05.180

根据我的理解，你应该试试这个：

根据您是否自动加载会话库，我们需要包括：

```
$this->load->library('session'); 
```

然后你应该能够使用：

```
$this->session->set_userdata('some_name', 'some_value');

$session_id = $this->session->userdata('some_name'); 
```

我希望这与您所需要的相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:27:55.427

因为您使用的是本机 php 会话，所以您需要首先使用`session_start();`将其放置在里面来启动会话，`index.php`或者您可以将它放在您的`__construct()`

# c# - 如何根据条件将 var 分配为两种不同类型之一？

> ID：14150533
> 
> 赞同：5
> 
> 时间：2013-01-04T03:05:52.870
> 
> 标签：c#, ternary-operator, var

我有两个字典，一个用于我作为主机的文件传输，一个用于我作为客户端的文件传输。

我为我的程序的一个领域所做的代码是完全相似的，除了引用这些项目中的一个或另一个。出于这个原因，如果可以的话，我会尽量防止重复代码。

```
public void UpdateFileTransferItems(FileTransferItem.FileTransferRole role)
{
    // If the role is Sender then the variable is fileTransferSessionsAsHost, otherwise it is fileTransferSessionsAsClient.
    var fileTransferSessions = role == FileTransferItem.FileTransferRole.Sender ? fileTransferSessionsAsHost : fileTransferSessionsAsClient;

    foreach (var hostSession in fileTransferSessions)
    {
         Do Work in here.
    }
} 
```

显然三元运算符不起作用，但是我怎样才能创建代码来做我想做的事情呢？如果角色是发件人，我希望变量是对 的引用`fileTransferSessionsAsHost`，否则我希望它是`fileTransferSessionsAsClient`。

我会以一种迟钝的方式来解决这个问题吗？我应该只复制代码并有两个 if 语句吗？

**编辑：**

如果我找不到更好的方法，这就是我现在必须做的。如果您看一下，除了名称和字典项引用之外，每个代码都是相同的。

```
 public void UpdateFileTransferItems(FileTransferItem.FileTransferRole role)
    {
        if (role == FileTransferItem.FileTransferRole.Sender)
        {
            foreach (var hostSession in fileTransferSessionsAsHost)
            {
                var fileTransferItem = activeFileTransfers.FirstOrDefault(fti => fti.SessionId == hostSession.Key.SessionId);
                if (fileTransferItem == null)
                {
                    activeFileTransfers.Add(new FileTransferItem(hostSession.Key.FileName,
                                                                 hostSession.Key.FileExtension,
                                                                 hostSession.Key.FileLength,
                                                                 FileTransferItem.FileTransferRole.Sender,
                                                                 hostSession.Key.SessionId));
                }
                else
                {
                    fileTransferItem.Update(hostSession.Value.TotalBytesSent,
                                            hostSession.Value.TransferSpeed,
                                            hostSession.Value.TotalBytesSent == hostSession.Key.FileLength);
                }
            }
        }
        else
        {
            foreach (var clientSession in fileTransferSessionsAsClient)
            {
                var fileTransferItem = activeFileTransfers.FirstOrDefault(fti => fti.SessionId == clientSession.Key.SessionId);
                if (fileTransferItem == null)
                {
                    activeFileTransfers.Add(new FileTransferItem(clientSession.Key.FileName,
                                                                 clientSession.Key.FileExtension,
                                                                 clientSession.Key.FileLength,
                                                                 FileTransferItem.FileTransferRole.Sender,
                                                                 clientSession.Key.SessionId));
                }
                else
                {
                    fileTransferItem.Update(clientSession.Value.TotalBytesSent,
                                            clientSession.Value.TransferSpeed,
                                            clientSession.Value.TotalBytesSent == clientSession.Key.FileLength);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:29:09.487

为了满足您的需求，两个类都需要从相同的基类或接口派生。例如，如果您有一个名为 的通用接口`IFileTransferSessions`，那么下面的代码应该可以工作：

```
IFileTransferSessions fileTransferSessions = role == FileTransferItem.FileTransferRole.Sender ? fileTransferSessionsAsHost : fileTransferSessionsAsClient; 
```

或者如果你真的想保留`var`语法：

```
var fileTransferSessions = role == FileTransferItem.FileTransferRole.Sender ? fileTransferSessionsAsHost as IFileTransferSessions : fileTransferSessionsAsClient; 
```

请注意，您只需要将第一个三次结果转换为接口，或者您可以两者都做。

`var`关键字不像VB 中的那样`Variant`，它不关心编译时的类型。（这在 C# 中更接近`dynamic`）它所做的只是从以下用法中派生类型。对于要派生的两个不同的类，它们必须共享一个公共基类或接口，即使这样，也`var`需要知道该基定义才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:36:59.160

有几种不同的方法可以解决这个问题。使用接口将是最安全和最合理的方法（或使用基类）。它们实现了相同的属性，因此它们都可以具有公开这些属性的接口，然后您可以将它们强制转换为接口。

如果您不能（或不会）修改类定义以使用接口，那么您也可以使用反射或动态。这些都容易受到运行时错误的影响，这比使用接口获得的编译时更糟糕。使用动态的语法更简洁，并且比反射更容易编写。只需将这两个项目都转换为动态并将它们存储在动态引用中。然后你可以调用它们的必要属性。

```
dynamic fileTransferSessions = role == FileTransferItem.FileTransferRole.Sender ? 
    (dynamic)fileTransferSessionsAsHost :
    (dynamic)fileTransferSessionsAsClient; 
```

关于动态类型的信息：http: [//msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:09:08.850

考虑这段代码。

```
Dictionary<int, string> d1 = new Dictionary<int, string>();
Dictionary<int, string> d2 = new Dictionary<int, string>();

bool flag = true;

var d = flag ? d1 : d2; 
```

它可以工作，因为类型`d1`和`d2`匹配（或者有一个从一个到另一个的转换）。这是关键。如果三元运算符返回的值的类型不同，则无法推断出运算符的返回类型，这就是问题所在。

* * *

实际上，您可以将一个或两个操作数显式转换为一个公共接口（如果有的话）以使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T06:20:50.160

如果您至少可以从同一个基类或接口派生 hostSession 和 clientSession ，那么您可以通过分解其中的一些来大大减少代码：

```
public void UpdateFileTransferItems(FileTransferItem.FileTransferRole role)
{
    if (role == FileTransferItem.FileTransferRole.Sender)
    {
        foreach (var hostSession in fileTransferSessionsAsHost)
        {
              UpdateTransfers(hostSession);
        }
    }
    else
    {
        foreach (var clientSession in fileTransferSessionsAsClient)
        {
              UpdateTransfers(clientSession);
        }
    }
}

private void UpdateTransfers(SessionBaseType session)
{
            var fileTransferItem = activeFileTransfers.FirstOrDefault(fti => fti.SessionId == session.Key.SessionId);
            if (fileTransferItem == null)
            {
                activeFileTransfers.Add(new FileTransferItem(session.Key.FileName,
                                                             session.Key.FileExtension,
                                                             session.Key.FileLength,
                                                             FileTransferItem.FileTransferRole.Sender,
                                                             session.Key.SessionId));
            }
            else
            {
                fileTransferItem.Update(session.Value.TotalBytesSent,
                                        session.Value.TransferSpeed,
                                        session.Value.TotalBytesSent == session.Key.FileLength);
            }
} 
```

如果您不能修改会话类以拥有一个共同的祖先，那么另一种方法是制作一个公开必要属性的包装类，并且您仍然可以基本上使用上面的代码，除了`UpdateTransfers(clientSession);`您将拥有`UpdateTransfers(new SessionWrapper(clientSession));`.

# c - MongoDB 将截断的浮点值返回到小数点后 6 位

> ID：14150536
> 
> 赞同：0
> 
> 时间：2013-01-04T03:06:10.247
> 
> 标签：c, linux, api, mongodb

我使用最新的 C-Driver 连接到 MongoDB。当我插入一个浮点值时，比如 1.0043820142745972，然后再查询它，我似乎只得到 1.004382！由于某种原因，所有浮点值都被截断为小数点后 6 位。

这是我用来查询它的代码

```
bson_init(query);
bson_append_double(query, "column", value);
bson_finish(query); 
```

当我使用 遍历结果时，`mongo_cursor_next()`我使用`bson_iterator_double`.

如何获取存储在数据库中的确切值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:13:46.527

您确实可以收回您的价值，这只是打印格式的问题。

以完全精度打印出有问题的值，我们看到两种表示形式的值相同：

```
Prelude Text.FShow.RealFloat> FF 1.0043820142745972
1.00438201427459716796875
Prelude Text.FShow.RealFloat> FF 1.004382
1.00438201427459716796875 
```

默认情况下，浮点值在 C 中以小数点后六位打印，因此当您查看该值时会对其进行四舍五入。

# c++ - 为什么 const A & 不绑定到模板参数中的 A()？

> ID：14150537
> 
> 赞同：2
> 
> 时间：2013-01-04T03:06:11.357
> 
> 标签：c++

我正在尝试执行此模板实例化，但它不起作用。我收到错误：

> `prog.cpp:7:15: error: template-id 'f<const A&, A()>' for 'void f()' does not match any template declaration`

```
template <class T, T> void f() {}

struct A {};

template void f<const A &, A()>();

int main() {} 
```

这很奇怪，因为当我在 main 中执行此操作时，它可以工作：

```
int main() {
    const A &a = A(); // no error
} 
```

那么为什么它在模板行中不起作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:08:40.393

模板参数不能是临时对象。只有可以合理地比较精确相等的原始类型才可以是模板非类型参数。这包括

*   整数，
*   枚举器，和
*   指向具有`extern`链接的对象的指针。

但

*   不允许使用浮点数，因为它们可能非常接近但不相等
*   `static`对象可能具有相同的名称但在不同文件中的位置不同，这会使模板 ID 混淆地解析为不同文件中具有相同名称的不同实例
*   字符串文字也是如此
*   临时对象没有一致的地址，所以你不能将指针传递给一个
*   您传递的临时对象的值，甚至无法测试是否相等，永远不会让语言将一个模板实例化与另一个模板实例化匹配！

（正如 Pubby 所指出的，`A()`它实际上被解释为没有返回参数的函数的类型`A`。所以编译器只是找不到采用两个类型参数的模板声明。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:11:13.120

[非类型模板参数](https://stackoverflow.com/questions/5687540/non-type-template-parameters)可能重复

这些是模板非类型参数的规则

> 非类型模板参数应具有以下类型之一（可选 cv 限定）：
> 
> *   整数或枚举类型，
> *   指向对象的指针或指向函数的指针，
> *   对对象的左值引用或对函数的左值引用，
> *   指向成员的指针，
> *   `std::nullptr_t`.

您传递的是一个 RValue （临时对象等，不能分配给），它不属于任何这些可能性。

## 编辑：

看来它实际上被解释为函数类型，但您的模板签名需要类型的非类型参数`A`（确切地说是 a `const A&`）

# c# - Product.cs 中的 data.ToList() 指的是 AdventureWorks 项目的哪些数据？

> ID：14150542
> 
> 赞同：0
> 
> 时间：2013-01-04T03:06:57.007
> 
> 标签：c#, asp.net, visual-studio-2010

II 有一个项目 - AdventureWorks 和一个文件 - Product.cs，其中包含以下代码：

```
 public static List<ProductCategory>  GetCategories()
    {
        var db = new AdventureWorksEntities();
        var data = from o in db.ProductCategories orderby o.Name select o;
        return data.ToList();

     } 
```

`EntityException was unhandled by user code`遇到以下代码行时抛出异常

```
 return data.ToList(); 
```

所以，我使用`try`and`catch`来捕获异常并使用`Console.WriteLine`来查看异常是什么，它会给我

```
A first chance exception of type 'System.Data.EntityException' occurred in System.Data.Entity.dll 
```

并且列表框将为空。

在 Default.aspx.cs 文件中，它包含：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            List<ProductCategory> data = DataAccessLayer.Products.GetCategories();

            lbCategories.DataSource = data;
            lbCategories.DataBind();
        }
        else
        {
            if (lbCategories.SelectedIndex != -1)
            {
                string category = lbCategories.SelectedValue;
                Response.Redirect("/Products.aspx?id=" + category);
            }

        }
    } 
```

它似乎会从 DataAccessLayer 中检索某种形式的数据/信息。

以下是 Web.config 文件的摘录：

```
<connectionStrings>
  <add name="AdventureWorksEntities" connectionString="metadata=res://*/mdlAdventureWorks.csdl|res://*/mdlAdventureWorks.ssdl|res://*/mdlAdventureWorks.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\sqlexpress;Initial Catalog=AdventureWorksLT2008R2;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

下面展示了部分项目结构：

```
+ 数据访问层
  - 产品.cs
+ 风格
  - 网站.css
+ 默认.aspx
  - 默认.aspx.cs
  - Default.aspx.designer.cs
+ mdlAdventureWorks.edmx
  - mdlAdventureWorks.Designer.cs

```

我怀疑它可能与 mdlAdventureWorks.edmx 文件有关，但我不知道如何进一步解决和诊断问题，因为该项目不是我编写的。

感谢提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:20:23.640

试试这个看看你是否真的从你的数据库中得到任何东西：

```
 public static List<ProductCategory> GetCategories()
    {
        var db = new AdventureWorksEntities();
        try
        {
            if (!db.ProductCategories.Any())
            {
                Console.WriteLine("Nothing in DB for ProductCategories");
            }
        }
        catch (Exception ex)
        {
           Console.WriteLine(ex.ToString());
        }

        var data = from o in db.ProductCategories orderby o.Name select o;
        return data.ToList();
    } 
```

# node.js - 有没有办法用 Jasmine NodeJS 发送 JPG？

> ID：14150543
> 
> 赞同：4
> 
> 时间：2013-01-04T03:06:59.280
> 
> 标签：node.js, jasmine, frisby.js

我正在尝试使用 FrisbyJS（位于 Jasmine for Node 之上）测试我的 API。我想知道是否有人知道如何使用 Jasmine 提交/发送图像？

[http://frisbyjs.com/](http://frisbyjs.com/)

我目前的代码是...

```
var frisby = require('frisby');

var URL = 'http://localhost/api';

frisby.globalSetup({
  request: {
  headers: {
   'Content-Type': 'application/x-www-form-urlencoded',
   'Accept': 'application/json',
   'api': 'key'
  }
 },
 timeout: (30 * 1000)
});

frisby.create('submit an image')
  .post(URL + 'image', {images: '@test.jpg'}, {method: 'POST'})
  .expectStatus(200)
  .afterJSON(function(cart){
    console.log('made it!');
  })
}).toss(); 
```

我收到以下错误：

```
 1) Frisby Test: submit an image
[ POST http://localhost/api ]
  Message:
   timeout: timed out after 30000 msec waiting for HTTP Request timed out before completing
   Stacktrace:
    undefined

    Finished in 31.458 seconds 
```

是的，图像 test.jpg 确实存在于与规范文件相同的文件夹中：）以及我正在执行规范本身的位置（茉莉节点。）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-08T14:04:29.363

我根据[https://github.com/vlucas/frisby/blob/master/examples/httpbin_multipart_spec.js给出的示例找到了一个解决方案](https://github.com/vlucas/frisby/blob/master/examples/httpbin_multipart_spec.js)

```
var frisby = require('frisby');
var fs = require('fs');
var path = require('path');
var FormData = require('form-data');

var contentPath = path.resolve(__dirname, './path/to/image.jpg');    
var form = new FormData();

form.append('file', fs.createReadStream(contentPath), {
  knownLength: fs.statSync(contentPath).size
});

frisby.create('Create content asset')
  .post(apiPath + '/assets', form, {
     json: false,
     headers: {
       'content-type': 'multipart/form-data; boundary=' + form.getBoundary(),
       'content-length': form.getLengthSync(),
     }
})
.expectStatus(201)
.toss() 
```

# primefaces - 使用 commandlink 的 primefaces 全局过滤器

> ID：14150547
> 
> 赞同：1
> 
> 时间：2013-01-04T03:08:06.930
> 
> 标签：primefaces

好的。所以我正在尝试使用commandLinks 实现一个全局过滤器。这个想法是有一个commandLinks的字母表，然后用户可以使用它而不是输入字母。

到目前为止，我已经对列进行了过滤（一旦 commandLinks 工作，将添加 filterStyle none）。

使用 chromes 调试工具 (ctrl-shift+i)，然后单击命令链接，我可以看到数据表刷新列表。但是，它不会过滤任何内容。

我一直在使用 primefaces 展示，这个[堆栈溢出帖子](https://stackoverflow.com/questions/10883040/how-to-apply-datatable-filter-programatically)作为我的代码的基础，如下所示：

```
 <p:dataTable id="availableSpecies" var="species" value="#{bbWizardBean.speciesPaletteList}"
                                    emptyMessage="Add First Species" dynamic="true"
                                    width="120"
                                    widgetVar="speciesPaletteVar"
                                    scrollHeight="250" scrollRows="20" scrollable="true"
                                    styleClass="width-fix-spcPal-ie" style="width:150px; margin-left: auto; margin-right: auto;"
                                    filteredValue="bbWizardBean.speciesPaletteListFilter">

        <f:facet name="header">
                            <h:outputText value="Species Palette" />
                            <p:commandLink id="globalFilter" value="A" onclick="$('speciesColumn_filter').val('A'),speciesPaletteVar.filter()"/>
        </f:facet>
        <p:column filterBy="#{species.speciesName}"
                                    headerText="Species" style="font-size:13px;" id="speciesColumn">
            <h:outputText id="dragIcon" value="#{species.speciesNameSmall}" style="font-size:11px; background-color:silver; cursor:move;"/>
            <h:outputText id="dragIconTooltip" value="..." title="Full Name: #{species.speciesName}" rendered="#{species.speciesNameLength > 10}"/>
            <p:tooltip for="dragIconTooltip" />

                            <p:draggable for="dragIcon" revert="true" />
        </p:column> 
```

我删除了表格的其余部分以使代码库更小。我想我搞砸了我应该设置的值，但我不太确定如何设置。任何帮助，将不胜感激！第一篇文章，所以任何清理问题的建议都值得赞赏；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:39:43.137

好的，所以出于某种原因（就像我想的那样），过滤器的 val 设置无法正常工作。出于某种原因，您需要在 : 之前添加两个 \。如果有人知道，那就太棒了，但正确的代码是：

```
<p:commandLink id="globalFilter" value="A" onclick="$('#positiveRegulationForm\\:availableSpecies\\:speciesColumn_filter').val('A'),speciesPaletteVar.filter()"/> 
```

其中 positiveRegulationForm 是顶层表单 availableSpecies 是数据表名称 speciesColumn_filter 是列 speciesColumn 的过滤器

真的很好奇为什么你需要两个正斜杠

# objective-c - 在 iOS UIWebView 中显示本地 html

> ID：14150555
> 
> 赞同：-2
> 
> 时间：2013-01-04T03:09:03.000
> 
> 标签：objective-c, ios

好的，我浏览了网络，无法理解其他人发布的内容。我是 Objective-C 的新手。我要做的就是使用 WebView 显示本地 html5 应用程序。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *fullURL = @"http://fc-pc.com/AMG/index.html";
    //NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"www"]];
    [_viewWeb loadRequest:[NSURLRequest requestWithURL:url]];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [_viewWeb loadRequest:requestObj];
} 
```

这就是我目前所拥有的。它将显示来自托管站点但不在本地的 html。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:14:23.687

从网站加载：

```
NSURL *url = [NSURL URLWithString:@"http://fc-pc.com/AMG/index.html"];
[_viewWeb loadRequest:[NSURLRequest requestWithURL:url]]; 
```

`requestWithURL`需要 a`NSURL`并且您使用过`NSString`([文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLRequestUseProtocolCachePolicy))

从您的捆绑包中加载：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"index" ofType:@"html"]isDirectory:NO];
[_viewWeb loadRequest:[NSURLRequest requestWithURL:url]]; 
```

加载`index.html`存储在您的主包中。哦，请确保您已将 html 文件添加到项目的资源包中。如果您将文件拖到 Xcode 中，它可能没有正确添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:47:09.697

试试这个 ：

```
 String* htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
    [webView loadHTMLString:htmlString baseURL:nil]; 
```

# facebook - spring-security-facebook 插件 grails - 注销

> ID：14150558
> 
> 赞同：0
> 
> 时间：2013-01-04T03:09:55.783
> 
> 标签：facebook, grails

我正在玩 grails spring security facebook 插件，它可以很容易地使用 facebook 登录连接到应用程序。我对登录时的注销和重定向有一些疑问。

1.  当我从示例应用程序中注销时，它显示已注销（重定向到 j_spring_security_logout）。但是，当我再次单击登录时，它会重新登录而不会弹出登录页面。注销应该如何工作？

2.  我按照这个例子并集成到一个现有的带有 spring security 的 grails 应用程序中，并带有服务器端身份验证。如果我没有在 config.groovy 中定义 grails.serverURL，则重定向不起作用，因为 j_sprint_secutity_facebook_check 之前缺少“/”。（http://j_spring_security_facebook_check...）。如果我添加 grails.serverURL，它会在其他页面 url 中添加一个额外的“/”并破坏代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:43:43.227

1.  由于您已经获得访问权限，因此 Facebook 只会重定向回应用程序（使用新的 access_token）。

2.  尝试版本 0.10.3

# post - 可以将子数组作为带有复选框的数组传递到另一个页面吗？

> ID：14150559
> 
> 赞同：1
> 
> 时间：2013-01-04T03:09:58.640
> 
> 标签：post, multidimensional-array, checkbox

我是 php 新手，所以如果我要问一些基本的东西，请原谅我以前问过的东西。我已经用谷歌搜索了几天了，尤其是。这个论坛我找到了我以前的大部分答案，但我找不到任何关于这个问题的东西，所以我必须问。这是我的第一个问题。

```
// this array is coming from MySQL db as a result. It's a list of user's friends and it could contain dozens or hundreds of friends. Now he wants to put them in different groups.

$array = array(
       array("John", "Doe", "1"),
       array("Peter", "Citizen", "2")
       ...
      );

// a page is created with the result. Each record has a checkbox that the user can select.

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">

<?php

foreach($array as $item){
$nItem = $item;

?>

<input type="text" name="fname" value="<?php if(isset($nItem)){echo $nItem[0];} ?>" readonly="readonly" />
<input type="text" name="lname" value="<?php if(isset($nItem)){echo $nItem[1];} ?>" readonly="readonly" />
<input type="text" name="uid" value="<?php if(isset($nItem)){echo $nItem[2];} ?>" readonly="readonly" />
<input type="checkbox" name="val[]" value="<?php if(isset($nItem)){echo $nItem;} ?>" /> // I want to send this $nItem array as it is to the action page and read its keys and values there.
<br>

<?php
}
?>

<input type="submit" name="submit" value="Submit">
</form>

<br />

<?php

// if I tick both checkboxes and submit I get the following:

if(isset($_POST['val'])){

$val = $_POST['val'];

echo var_dump($val), '<br />'; // array(2) { [0]=> string(5) "Array" [1]=> string(5) "Array" }

echo count($val), '<br />';    // 2

print_r($val);                 // Array ( [0] => Array [1] => Array )

echo("val is {$val[0]}");      // val is Array

foreach($val as $key => $value){
    echo "Key and Value are: ".$key." ".$value, '<br />'; // Key and Value are: 0 Array
}                                                         // Key and Value are: 1 Array

}

?> 
```

它只返回一个字符串“Array”，而不是我可以从中读取 velues 的实际数组。如果我将单个值放入复选框值中，例如 -

```
if(isset($nItem)){echo "".$nItem[0]." ".$nItem[1]." ".$nItem[2]."";} 
```

——然后我得到——

```
0 John Doe 1 
```

——但这不是我想要的。我想要我可以遍历的操作页面上的实际数组。我认为既然它已经是一个数组，那并不难，但我错了。

谁能告诉我怎么做？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:04:22.087

```
<?php foreach($array as $item): ?>
    <input type="text" name="fname" value="<?php echo $item[0]; ?>" readonly="readonly" />
    <input type="text" name="lname" value="<?php echo $item[1]; ?>" readonly="readonly" />
    <input type="text" name="uid" value="<?php echo $item[2]; ?>" readonly="readonly" />
    <input type="checkbox" name="val" value="<?php echo htmlentities(serialize($item)); ?>" />
    <br>
<?php endforeach; ?> 
```

提交后，反序列化数组 $_POST['val']。根据您对这个数组所做的事情，这种方法在使用注射时并不是很省钱。

与其使用包含所有信息的数组，不如为每条记录使用 id。名为“val”的复选框具有相应的 id 值。

```
<input type="checkbox" name="val" value="<?php echo $item['id']; ?>" /> 
```

提交后，查询属于id的记录，使用返回的数组进行处理。

# android - 如何在每个片段中添加 optionMenu。( android + actionsherlock + jfensteinSlidingMenu

> ID：14150560
> 
> 赞同：0
> 
> 时间：2013-01-04T03:10:19.733
> 
> 标签：android, menu, actionbarsherlock, android-sliding

1.  我正在使用 actionsherlockbar 库 + [JfenisteinSlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

问题：如何在每个片段的操作栏中添加动态选项菜单？

我在下面尝试过，但是每个页面中的选项菜单都是相同的。我该怎么做？

```
public class FragmentChangeActivity extends BaseActivity  {

private Fragment mContent;
private String json = null;

public FragmentChangeActivity() {
    super(R.string.changing_fragments);
}

@SuppressWarnings("unused")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // set the Above View
    if (savedInstanceState != null)
        mContent = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
    if (mContent == null)
        mContent = new ColorFragment(android.R.color.white);    

    // set the Above View
    setContentView(R.layout.content_frame);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, mContent)
    .commit();

    // set the Behind View
    ColorMenuFragment colorMenuFragment = new ColorMenuFragment();
    LeftMenuFragment leftMenu = new LeftMenuFragment();
    setBehindContentView(R.layout.menu_frame);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.menu_frame, colorMenuFragment)
    .commit();

    // customize the SlidingMenu
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    getSupportFragmentManager().putFragment(outState, "mContent", mContent);
}

public void switchContent(Fragment fragment) {
    mContent = fragment;
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, fragment)
    .commit();
    getSlidingMenu().showAbove();
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        toggle();
        return true;
    case R.id.github:
        Utils.goToGitHub(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:15:53.767

您不会在 Fragments 中添加选项菜单，但在 Fragment Activity 和 Fragment Activity 中将充当包含片段的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T03:45:52.700

在你的每个片段膨胀选项菜单中也有？我不了解 lib，但希望这可以帮助你很好地为我工作。只是在你的 onOptionsItemSelected 中返回 false 看这个例子

在我的活动中

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()){
        case R.id.action:
    //Do something
            break;

        default:break;
    }
    return false;
} 
```

在我的片段中

```
 @Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_mine,menu);
    super.onCreateOptionsMenu(menu, inflater);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
  switch (item.getItemId()){
      case R.id.fragment_action:
         //Do something
          break;
  }
    return true;
} 
```

# python - 随机选择一个函数

> ID：14150561
> 
> 赞同：8
> 
> 时间：2013-01-04T03:10:43.010
> 
> 标签：python, random

有没有办法随机选择一个函数？

例子：

```
from random import choice

def foo():
    ...
def foobar():
    ...
def fudge():
    ...

random_function_selector = [foo(), foobar(), fudge()]

print(choice(random_function_selector)) 
```

上面的代码似乎执行了所有 3 个函数，而不仅仅是随机选择的一个。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T03:12:57.210

```
from random import choice
random_function_selector = [foo, foobar, fudge]

print choice(random_function_selector)() 
```

Python 函数是一等对象：您可以通过名称引用它们而不调用它们，然后再调用它们。

在您的原始代码中，您调用了所有三个，然后在结果中随机选择。这里我们随机选择一个函数，然后调用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T03:13:09.520

```
from random import choice

#Step 1: define some functions
def foo(): 
    pass

def bar():
    pass

def baz():
    pass

#Step 2: pack your functions into a list.  
# **DO NOT CALL THEM HERE**, if you call them here, 
#(as you have in your example) you'll be randomly 
#selecting from the *return values* of the functions
funcs = [foo,bar,baz]

#Step 3: choose one at random (and call it)
random_func = choice(funcs)
random_func()  #<-- call your random function

#Step 4: ... The hypothetical function name should be clear enough ;-)
smile(reason=your_task_is_completed) 
```

* * *

只是为了好玩：

请注意，如果您真的想在实际定义函数**之前**定义函数选择列表，您可以通过额外的间接层来做到这一点（尽管我**不**推荐它 - 这样做没有任何优势我可以看到...）：

```
def my_picker():
    return choice([foo,bar,baz])

def foo():
    pass

def bar():
    pass

def baz():
    pass

random_function = my_picker()
result_of_random_function = random_function() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T03:13:49.207

几乎 - 试试这个：

```
from random import choice
random_function_selector = [foo, foobar, fudge]

print(choice(random_function_selector)()) 
```

这会将函数本身分配到`random_function_selector`列表中，而不是调用这些函数的结果。然后你得到一个随机函数`choice`，并调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T03:12:13.540

1.  生成一个随机整数，最多可以有多少个元素
2.  根据这个数字调用一个函数

随机导入

```
choice = random.randomint(0,3)
if choice == 0:
  foo()
elif choice == 1:
  foobar()
else:
  fudge() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-04T03:14:39.130

一种直截了当的方法：

```
# generate a random int between 0 and your number of functions - 1
x = random.choice(range(num_functions))
if (x < 1):
    function1()
elif (x < 2):
    function2()
# etc
elif (x < number of functions):
    function_num_of_functions() 
```

# javascript - 具有可变百分比的 CSS3 饼图

> ID：14150563
> 
> 赞同：4
> 
> 时间：2013-01-04T03:11:12.523
> 
> 标签：javascript, css

在 HTML 中，我想做这样的事情：

```
<div class="thermometer">
  <div class="circle purple">
    <div class="pie-piece percent=75%">
    </div>
  </div>
</div> 
```

结果将是一个 75% 填充的紫色圆圈。（和披萨一样，切成4块，缺一块）（75来自数据库，不能在CSS中）

我的圆形 CSS 是这样的：

```
.thermometer .circle {
    position: absolute;
    width:26px;
    height:26px;
    -moz-border-radius:13px;
    -webkit-border-radius:13px;
    border-radius:13px;
    border: 1px solid #000000;
}
.thermometer .green { background-color: green; }
(other colors) 
```

我查看了使用“hold”和“clip”属性的示例，但不明白如何使用变量来完成。如何为“pie-piece”编写 CSS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:50:12.267

如果您指的是**[本](http://www.kylejlarson.com/blog/2011/how-to-create-pie-charts-with-css3/)**教程，“Hold”和“pieSlice1”只是类和 ID 的名称。

您可以预定义一个学位，然后使用 jQuery 并根据您从数据库中获得的内容更改 CSS。查看**[这篇](https://stackoverflow.com/questions/7936396/jquery-rotate-transform)**文章了解更多信息。

```
.css({ WebkitTransform: 'rotate(' + degree + 'deg)'}); 
```

[http://jsfiddle.net/t7zLP/1/](http://jsfiddle.net/t7zLP/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T05:31:31.953

认真对待，所以回答有点延迟。

首先，使用画布绘图可能会更好地完成这样的事情（需要检查一下），但只是为了好玩，将 LESS+HTML+CSS3 和位 JavaScript 疯狂混合，这似乎仍然有效。

这是工作示例[https://c9.io/dmi3y/css3pie/workspace/index.html](https://c9.io/dmi3y/css3pie/workspace/index.html) 应该适用于所有现代浏览器和 IE9 +，可能您可以添加对低于 9 的 IE 版本的支持。为此需要对边框的支持半径和变换。后一种可以使用矩阵过滤器完成，这里有一些要阅读的内容以及 .htc 文件[http://samuli.hakoniemi.net/cross-browser-rotation-transformation-with-css/](http://samuli.hakoniemi.net/cross-browser-rotation-transformation-with-css/)中的工作解决方案，但我没有测试它和个人不会太在意旧版浏览器。如果您想查看升级浏览器的内容，我只想添加通知。在 FireFox 中也有一些人工制品，可能是因为我正在使用伪类`::before`，`::after`并且可能正在使用真实元素会改善这一点。

技术信息。这是 9cloud 代码[https://c9.io/dmi3y/css3pie](https://c9.io/dmi3y/css3pie)。核心思想是使用客户端 LESS 动态生成的 CSS。因此，使用为方便起见而采用的位 jQuery 代码可以轻松转换为任何其他库/核心 js。

里程碑：

在您的标记中，您定义应该以度数填充多少区域

```
<div class="circle" id="pieOne" data-fill="30deg"></div> 
```

基本上要让它工作，这就是你需要的一切。

这是发生了什么的简要说明：

取这个值，我会覆盖嵌入样式中的 LESS 变量并使用`less.refreshStyles()`

```
<style type="text/less" id="lessPie">
    @import 'styles/pie';
    @fillDegree: #dataDegree#; // from 0deg to 180deg
    @baseRotate: 40deg;
</style>
<script type="text/javascript">
    !function(){
        var lessPieText = $('#lessPie').text();
        $(function(){
            var pieOneDataFill = $('#pieOne').attr('data-fill');
            while (parseInt(pieOneDataFill) > 180) {
                pieOneDataFill = (parseInt(pieOneDataFill) - 180) + 'deg';
            }
            while (parseInt(pieOneDataFill) < 0) {
                pieOneDataFill = (parseInt(pieOneDataFill) + 180) + 'deg';
            }
            $('#lessPie').text(lessPieText.replace('#dataDegree#', pieOneDataFill));
            less.refreshStyles();

            // update % value
            // 180deg         = 100%
            // pieOneDataFill = x%

            var percentValue = (parseInt(pieOneDataFill) * 100) / 180;
            $('#pieOneLegend').find('span').text(Math.floor(percentValue) + '%').end().show();

        });
    }()
</script> 
```

作为额外的奖励，您可以`@baseRotate: 40deg;`使用价值旋转馅饼。还显示了带有 % 值的图例。

这几乎就是一切。有一段时间它只支持每页一个饼图（或者更确切地说是一种饼图）和一个值。稍后我会将其推送到 github 上，并且可能会在项目上工作，因为这听起来很有趣。

# asp-classic - 经典的asp循环函数

> ID：14150565
> 
> 赞同：0
> 
> 时间：2013-01-04T03:11:52.123
> 
> 标签：asp-classic, vbscript

下面的代码是给每个字符加上字体标签，但是不起作用

```
Function AddFontTag (counter)
    Do While Len (counter) < 7
        newStr = newStr & "<font>" & Left (counter, i) & "</font>"
        i = i + 1
    Loop
    AddFontTag = newStr
End Function 
```

因为我不擅长经典的asp，比如变量范围、语法。有谁知道上面代码的问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:45:59.467

你的`do..while`循环是一个无限循环 - 假设`counter`是一个字符串变量，它的长度永远不会改变，所以如果在进入函数时`Len(counter)`小于`7`，它会一直保持小于`7`所以你的函数永远不会退出。

你的`newStr`变量是未定义的——这在 VBScript 中有效，但它是非常糟糕的做法，它是无数错误的来源。它是全局变量还是应该是局部变量？（看起来像本地人。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:17:27.237

我不确定您的 7 个字符限制是如何应用的，但是对于一般方法，以下将满足您对任何长度字符串的需求：

```
function AddFontTag(byval str)
    AddFontTag = Empty
    do while len(str) <> 0
        ' get next character
        dim c: c = left(str, 1)
        ' reduce original string
        str = right(str, len(str) - 1)
        ' build up output string
        AddFontTag = AddFontTag & "<font>" & c & "</font>"
    loop
end function 
```

这个例子

```
dim test: test = AddFontTag("a test")
Response.Write test 
```

会给你

> <font>a</font><font> </font><font>t</font><font>e</font><font>s</font><font>t</font>

如果您只想将此应用于长度小于 7 的字符串，则可以添加

```
if len(str) > 6 then
    exit function
end if 
```

在while循环之前或

```
str = left(str, 6) 
```

如果您只想将其应用于任何长度字符串的前 6 个字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T18:17:26.060

您的代码在没有条件退出循环的情况下循环。试试这个......希望它有帮助。

```
Function AddFontTag (counter)
dim i,newStr,max
max=7
    Do While Len (counter) < max
        newStr = newStr & "<font>" & Left (counter, i) & "-" & "</font>"
        i = i + 1
        if i = max-1 then exit Do
    Loop
    AddFontTag = newStr
End Function
'to check the results
response.write AddFontTag ("params") 
```

你会得到 `<font>-</font><font>p-</font><font>pa-</font><font>par-</font><font>para-</font><font>param-</font>`

# c++ - VirtualQueryEx 和 ReadProcessMemory 的关系

> ID：14150566
> 
> 赞同：3
> 
> 时间：2013-01-04T03:12:00.517
> 
> 标签：c++, windows, memory-management, paging

我知道 Windows 进程通过加载 PE 标头和以下部分（.text .data 等）映射到 ram 中，并且我可以使用 ReadProcessMemory 读取它们，但是 VirtualQueryEx 有什么意义呢？我认为它应该一次读取一页（分页系统使用的内存页），但我看不到内存页与 PE 部分的关系。如果我只想扫描 .text 部分怎么办，我也应该使用 VirtualQueryEx 还是页面与其内容无关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T04:14:33.387

VirtualQueryEx 为您提供有关如何分配页面的信息，它包含的一般信息类型等。我在[之前的答案](https://stackoverflow.com/a/3313700/179910)中发布了一些演示代码。这将遍历一个进程并转储有关从操作系统为目标进程分配的每个内存块的一些信息。

ReadProcessMemory 将让您在指定进程中读取内存块的实际内容。要使用它，您需要在目标进程中指定一个地址 - 就其本身而言，它不知道该进程中的位置。

如果您想在某个进程中读取映射的可执行文件的一部分，您通常会使用 VirtualQueryEx 来查找您关心的部分在内存中的加载位置，然后使用 ReadProcessMemory 来读取您关心的部分。例如，在[另一个先前的答案](https://stackoverflow.com/a/10373209/179910)中，我发布了一些代码，用于在进程的所有页面中搜索指定的模式，这些页面要么是私有的，要么是映射的。

根据您要查找的内容（特别是如果您想查看目标进程中的代码等内容），您可能希望使用符号处理程序 API 之类的东西来查找您关心的部分。VirtualQueryEx 以相当粗略的粒度查看事物——例如，它会告诉你整个可执行文件已映射到的整个内存块的基地址和大小，但不会告诉你里面有什么（通常很大）块。

符号处理程序 API 可以告诉您（例如）来自该可执行文件的特定函数的地址（前提是信息可用，例如包含调试信息的可执行文件，或您关心的从 exe/dll 导出的函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:24:29.793

要确定哪个内存页面属于加载到内存中的 PE 的哪个部分，您必须读取它的 PE 标头，对其进行解析并找到 .text、.code、.bss 等部分。

VirtualQueryEx 返回 PMEMORY_BASIC_INFORMATION ，其中包括有关该内存页的信息，例如读取、写入、执行标志。

# php - PHP：重用来自 mysql_connect() PDO 的打开 MySQL 连接？

> ID：14150567
> 
> 赞同：0
> 
> 时间：2013-01-04T03:12:02.770
> 
> 标签：php, mysql, pdo

我只是想看看是否有办法转移或重用`mysql_connect()`PDO 打开的连接。我知道这是不正确的（希望能得到这样的想法），但我希望得到类似的东西

```
$pdo = new PDO($mysql_connect_link); // yes this is wrong, i know! 
```

例如。

原因是我想`PDO`在我的类中使用来管理查询等，但是，类本身并没有打开到数据库的连接。它需要事先建立连接（我现在一直在通过标准`mysql_*`() 函数集进行检查。嗯​​，我知道。）

`mysql_*` *无论用户通过或* ...打开与数据库的连接，我都希望班级的查询能够正常工作`PDO`……有人对此事有任何想法和/或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:20:20.607

您应该将 mysql_ 函数移植到 PDO。

```
$pdo = new PDO($mysql_connect_link); 
```

是错误的，因为它需要的参数（见： http: [//php.net/manual/fr/pdo.construct.php](http://php.net/manual/fr/pdo.construct.php)），但从技术上讲，你可以让两个连接并排运行。虽然，不，您显然不能通过运行 mysql_connect 来运行 PDO 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:50:53.550

> 我只是好奇是否有办法将 mysql_connect() 打开的连接传输到 PDO。

**不**

> 无论用户通过 mysql_* 或 PDO 打开与数据库的连接，我都希望该类的查询能够正常工作...

很难理解你的理由。

如果要保留两个驱动程序，则还必须保留 2 组功能。并彻底改变班级结构。您必须有一个具有通用方法和 2 个实现的抽象类。没有传递给类的连接，但类本身必须管理连接。不过，我怀疑这样的劳动是否值得。

如果您只想允许使用您的类以及一些遗留的 mysql_* 代码 - 只需从 PDO 打开另一个连接。不惜一切代价避免这不是一件邪恶的事情。这只是一种联系。是的，它会给你的服务器带来轻微的负担，但对于使用这种夹心意大利面的应用程序来说，这将是最少的问题。

# macos - 将 NSViews 添加到 NSScrollview - Mac OSX

> ID：14150569
> 
> 赞同：0
> 
> 时间：2013-01-04T03:12:08.150
> 
> 标签：macos, nsview, nsscrollview, nsimageview

我正在尝试将 NSImageView 的多个图像添加到 NSScrollView。当我将它添加为子视图时，滚动视图似乎没有滚动，当我将它添加为文档视图时，我只能看到一个图像。关于如何使其工作的任何想法或示例代码？建议请。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:33:09.390

我最好的猜测是你的框架做错了，或者你忘了设置文档视图的框架。下面是向滚动视图添加内容的示例。

```
float allHeight = 0.f; // Consider starting from the top
float xOffset = 0.f; // Offset addjustments
float yOffset = 20.f;
float spacing = 5.f; // Spacing
float attachementCellHeight = 40.f; 
// Values above are random :)

for (MyObject *obj in SetOfObjects) {
    NSView *attachementView = [[[NSView alloc] initWithFrame:NSMakeRect(xOffset, allHeigth, self.bounds.size.width - xOffset, attachementCellHeight)] autorelease];
    [self.documentView addSubview:attachementView];
    allHeigth += attachementCellHeight;
    allHeigth += spacing;
}
allHeigth+=yOffset;
self.documentView.frame = NSMakeRect(1, 1, self.bounds.size.width - 2, allHeigth); 
```

# android-layout - Kindle Fire第一代inputType“numberSigned”和“numberDecimal”相互抵消

> ID：14150580
> 
> 赞同：1
> 
> 时间：2013-01-04T03:13:14.810
> 
> 标签：android-layout, input, numbers, kindle-fire

我在商店里有一个计算器类型的应用程序，它有一些只允许数字、小数和负数的编辑文本框。

我放入了 XML `android:inputType="numberDecimal|numberSigned"`。

这对我测试过的每台设备都非常有效，除了我刚刚收到一封来自使用第一代 Kindle Fire 的人的电子邮件，说他们无法输入小数或负数，因为 `.`它们`-`是灰色的。

我在 Eclipse 中设置了一个 Kindle Fire 第一代模拟器并开始玩，果然我发现了以下内容：

```
android:inputType="numberDecimal|numberSigned"
android:inputType="number|numberDecimal|numberSigned" 
```

这导致两者都`.`变灰`-`。

`numberDecimal``numberSigned`当它们只与“数字”配对而不是彼此配对时，两者都可以正常工作。

有谁知道如何在`numberDecimal|numberSigned`第一代 Kindle Fire 上一起工作，或者使 editText 只允许数字、小数和前两者的负数版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:30:34.117

```
android:inputType="number|numberSigned|numberDecimal" 
```

# objective-c - Youtube API - 如何检索 json 而不是 xml？

> ID：14150581
> 
> 赞同：0
> 
> 时间：2013-01-04T03:13:25.517
> 
> 标签：objective-c, youtube-api

我想使用 JSON 格式而不是 XML 从 youtube api 加载数据。这是我的消息来源：

```
- (void) getFavoriteList{

    NSString* rawUrl = CONNECTION_GET_FAVORITE_LIST;
    NSURL *url = [NSURL URLWithString:rawUrl];
    ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:url];

   //create request header
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [request addRequestHeader:@"Authorization" value:[@" Bearer "  stringByAppendingString:[appDelegate userInfo].accessTokenYoutube ]];
    [request addRequestHeader:@"X-GData-Key" value:[NSString stringWithFormat:@"key=%@",YOUTUBE_DEVELOPER_KEY]];
    [request addRequestHeader:@"alt" value:@"json"];
    [request addRequestHeader:@"v" value:@"2"];
    [request setRequestMethod:@"GET"];
    [request startAsynchronous];

    //register callback blocks.
    [request setCompletionBlock:^{
        NSString* respondMessage = [request responseString];
        ParseData *parseData = [[ParseData alloc] init];
        NSMutableArray *arrPlaylistVideos = [parseData allocVideo:respondMessage];
        [[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_GET_FAVORITE_VIDEOS_SUCCESS object:arrPlaylistVideos];
    }];
    [request setFailedBlock:^{
        NSString* respondMessage = [[request error] localizedDescription];
        [[NSNotificationCenter defaultCenter]postNotificationName:NOTIFICATION_GET_FAVORITE_VIDEOS_FAILED object:respondMessage];
    }];

    [request release];
} 
```

我设置了 alt = json 但 Youtube 总是返回 xml 数据。我在这里犯了什么错误吗？

注意：请不要告诉我应该使用 Gdata-ObjectiveC-Client。它非常非常复杂，我讨厌使用它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:11:13.393

我相信您必须在请求 URL 中添加 alt=json 作为查询字符串，而不是在请求标头中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T03:35:52.630

您可以通过 NSXMLParser 解析 xml。或者你可以很容易地找到一个 xml 到 JSON 库。我认为[这篇文章](https://stackoverflow.com/questions/6408758/parsing-xml-to-json-in-iphone)会有所帮助。

# android - 隐藏/显示操作栏选项卡

> ID：14150582
> 
> 赞同：0
> 
> 时间：2013-01-04T03:13:39.520
> 
> 标签：android, tabs, android-actionbar

安装后，我的应用程序将只显示 1 个选项卡，因此我想隐藏选项卡行。

当用户登录/注册时，会显示其他选项卡。

我在 onCreate() 中创建标签（片段）。

```
 @Override
    public void onResume() {
        super.onResume();
        this.supportInvalidateOptionsMenu();

        if(logged_in()){
            m_actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            m_actionBar.setSelectedNavigationItem(this.m_previousTabIndex);
        }
        else
            m_actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);

        return;
    } 
```

我没有看到标签.. 这很好。
但我也没有看到第一个选项卡的内容。我在屏幕上除了 actionBar 什么都看不到。
如何解决此问题以显示第一个选项卡的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:17:11.120

我会查看[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples)示例以了解它们是如何工作的。

# plot - 如何用曲线绘制稀疏数据流

> ID：14150587
> 
> 赞同：0
> 
> 时间：2013-01-04T03:14:20.520
> 
> 标签：plot, gnuplot, octave

编辑：我想根据以下代码制作一个情节：

```
function one(varargin)
    thresh = 200;
    setenv GNUTERM 'x11';
    x = [0.05:0.05:10];
    x = transpose(x);
    y = rand(200, 1); 
    y(y <= 0.9) = 0.9;
    plot(x, y); 
    xlabel('time');
    ylabel('values above thresh');
end 
```

...问题是，我不希望它只是跳跃点。很高兴看到值从一个到下一个平滑波动（如贝塞尔曲线）。这可能吗？我不知道我是否需要一个外部库，但如果有必要我愿意走那条路。以任何数据分辨率导出结果（平滑）图会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:12:52.783

如果我没看错，你只想对这些信息进行下采样，这是一项非常简单、高效的工作。

给定 xi,yi 作为您的原始数据集，您希望进行大约 10 倍的下采样：

生成一个新的 x 向量 xp（假设 xi 是单调递增的）：

```
xp = linspace(xi(1),xi(end),round(length(xi)/10)); 
```

然后使用带有样条方法的插值：

```
yp = interp1(xi,yi,xp,'spline'); 
```

但是，这只会平滑插值数据。

我并没有真正遵循您问题的某些部分-您如何定义基本部分？

另一种方法是在下采样之前过滤数据，例如，使用 Savitsky-Golay 过滤器。有趣的是，您可以使用一些参数。对于默认值：

```
yp = sgolayfilt (yi); 
```

此过滤器使用 p 阶和长度 n 的平滑多项式来处理您的数据。如果您指定 p 和 n，则可以尝试最有效的方法：

```
yp = sgolayfilt (yi, p, n); 
```

# c++ - C++中的递归结构

> ID：14150589
> 
> 赞同：3
> 
> 时间：2013-01-04T03:14:24.620
> 
> 标签：c++

我找到了以下代码，它似乎可以工作，但我根本无法理解。
它看起来像一个*递归结构*，但我以前从未见过。

```
template<int B, int N>
struct Pow {
    enum{ value = B*Pow<B, N-1>::value };
};

template< int B >
struct Pow<B, 0> {
    enum{ value = 1 };
};
int quartic_of_three = Pow<3, 4>::value; 
```

知道这是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:17:09.653

这是一种在编译时计算积分幂的方法，依赖于支持必要数量的模板特化的编译器（即，它不是完全可移植的代码）

阅读您最喜欢的 C++ 教科书中的模板

如果您还没有 C++ 教科书：您需要它，请查看 SO FAQ **[C++ 书籍列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)**

* * *

在 C++11 中，一种更好且（几年后）可能更便携的方法是使用一个`constexpr`函数：

```
#include <iostream>
using namespace std;

constexpr int constpow( int base, int n )
{
    return (n == 0? 1 : base*constpow( base, n - 1 ));
}

int main()
{
    int const quarticOfThree = constpow( 3, 4 );
    wcout << quarticOfThree << endl;
} 
```

但是，Visual C++ 11.0 不支持这一点，我写这篇文章时是 Visual C++ 的最新版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:02:31.260

此模板定义中需要注意的重要事项是：

*   模板参数是*values*，而不是人们通常在模板中期望的类型；
*   struct 模板的字段`value`是根据这些参数计算的；
*   `N`当使用 设置时，模板对第二个参数有部分特化`0`。

正如您所注意到的，模板在`value`字段计算上递归。如果未定义部分特化，则该递归将是无限的。当第二个参数“到达”`0`时，即。当通过遵循模板实例化的嵌套以尝试获取计算最外层所需的连续值字段时，编译器最终需要实例化具有参数 N 等于 的模板`0`，并选择包含常量的偏特化版本字段的值`1`。然后编译器可以计算每个嵌套值字段，最终返回到最外层。

使用这种技术，可以让编译器离线计算某些值（即在编译时）。这让程序员可以通过参数和公式定义常量值，而不必对它们进行硬编码，或者让编译后的程序在每次运行时计算它们。

但是这种方法的问题，它看起来多么聪明，是它的可读性，因此易于维护。这很可能是新标准提供`constexpr`概念的原因，这是定义所谓的[纯计算](http://en.m.wikipedia.org/wiki/Pure_function)的一种非常合适的方法。

* * *

应该注意的是，模板的两个字段都已签名，并且计算不会尝试以任何方式处理负值。如果 N 最初设置为`-1`，结果可能很有趣。

# gnustep - GNUStep 设置错误

> ID：14150592
> 
> 赞同：0
> 
> 时间：2013-01-04T03:14:35.017
> 
> 标签：gnustep

我是 Objective-C 的初学者，并试图在 Windows 7 中设置 GNUStep。我已按照本网站的指示： [http](http://www.gnustep.org/experience/Windows.html) : //www.gnustep.org/experience/Windows.html 下载 GNUstep MSYS System 0.30.0， GNUstep Core 0.30.0 、GNUstep 开发和 GNUstep Cairo。但是，当我运行安装程序时，无法选择安装任何包，之后我找不到启动的shell。顺便说一句，我在膝盖上安装了 Cygwin。如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:11:34.223

这可能是一个糟糕的答案。但是如果没有足够的经验，我建议你远离 Windows 上的 GNUstep。为了您的学习目的，带有可移动驱动器的 GNU/Linux live CD 安装到 /home 和 /usr/local 可能是一个更友好的解决方案。虽然您可以弄清楚如何在 Windows 上正确安装系统。没有太多努力做到这一点，这就是为什么新系统没有经过良好测试的原因，像clang这样的新系统以及Objective-C 2.0所需的其他东西，因为我敢打赌你不会像其他人一样坚持使用旧方言.

# jquery - Slim PHP 返回 JSON

> ID：14150595
> 
> 赞同：7
> 
> 时间：2013-01-04T03:14:53.320
> 
> 标签：jquery, ajax, json, backbone.js, slim

所以基本上我有我的主干应用程序对我的苗条 php 应用程序进行 ajax GET 调用。它期望 JSON dataType 作为回报。

```
$.ajax({
        url: './myroute',
        type: 'GET',
        dataType: "json",
        data: { username: username, password: password },
        success: function(data) {},
        error: function(data) {}
}); 
```

在我的苗条文件中，我有：

```
$app->get('/myroute', function() use ($app) {

    // all the good stuff here (getting the data from the db and all that)

    $dataArray = array('id' => $id, 'somethingElse' => $somethingElse);

    $response = $app->response();
    $response['Content-Type'] = 'application/json';
    $response->body(json_encode($dataArray));

});

    // Tried with these in the above GET request as well:
    // $app->contentType('application/json');
    // echo json_encode($dataArray); 
```

虽然我的请求正确通过 (200)，并且我正确获取了 JSON 数据，但错误是因为它还返回了完整的 index.php 页面数据（我的 javascript dataType: "json" 不允许，这会触发错误）

我认为将内容类型设置为“application/json”可以解决这个问题，但它仍然会返回完整的页面内容以及 json 数据。

**编辑以供参考**

我曾经设置它，以便 Slim 将我的 html 呈现为：

```
$app->get('/', function () use ($app) {
    // would just have my main page files in home.php instead of index.php
    $app-render('home.php');
}); 
```

这样，没有从 index.php 返回的 html 页面数据。但是 pushState 的方式是，我必须让我的 javascript 脚本在 index.php 上运行，否则我的页面将无法正确加载，因为当它们被请求时，脚本不在那里代表路由应该去的地方。

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T03:35:14.713

不熟悉 slim 框架。看起来很有趣。听起来代码在显示 json 后继续运行。也许`exit;`在用你的 json 响应后尝试 php 应用程序？

```
$app->get('/myroute', function() use ($app) {
    // all the good stuff here (getting the data from the db and all that)

    $dataArray = array('id' => $id, 'somethingElse' => $somethingElse);

    $response = $app->response();
    $response['Content-Type'] = 'application/json';
    $response->body(json_encode($dataArray));
    exit();
});
$app->run(); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T08:45:13.293

尝试更改`body()`为`write()`.

我认为这会起作用：`$response->write(json_encode($dataArray));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-29T17:41:18.683

[关于返回 JSON 的 Slim 文档](https://www.slimframework.com/docs/objects/response.html#returning-json)提到了您正在寻找的内容。

再次从[文档](https://www.slimframework.com/docs/objects/router.html#route-callbacks)中，每个路由回调接受三个参数：

> **Reques**
> 第一个参数是一个 Psr\Http\Message\ServerRequestInterface 对象，它代表当前的 HTTP 请求。
> **响应**
> 第二个参数是一个 Psr\Http\Message\ResponseInterface 对象，它代表当前的 HTTP 响应。
> **参数**
> 第三个参数是一个关联数组，其中包含当前路由的命名占位符的值。

从同一页面引用：

> 如果使用 Closure 实例作为路由回调，则闭包的状态将绑定到 Container 实例。这意味着您将可以通过 $this 关键字访问闭包内的 DI 容器实例。

`uese ($app)`所以在定义路由回调时不需要。

也如[文档中所述](https://www.slimframework.com/docs/)

> 最终，每个 Slim 应用程序路由必须返回一个 PSR 7 响应对象

总而言之，这应该符合您的期望：

```
$app->get('/myroute', function($request, $response, $args) {

// all the good stuff here (getting the data from the db and all that)

$dataArray = array('id' => $id, 'somethingElse' => $somethingElse);

return $response->withJson($dataArray);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T14:15:32.990

对`exit();`我来说不再工作了，不知道为什么。这是我解决它的方法：

```
$response = $app->response();
$response['Content-Type'] = 'application/json';
$response->body(json_encode($body));
return $response; 
```

# android - 如何强制 Android 应用程序更新？

> ID：14150597
> 
> 赞同：1
> 
> 时间：2013-01-04T03:15:09.660
> 
> 标签：android, google-play, updates

有没有一种方法可以让我在应用程序启动时使用代码检查我在 Google Play 中的应用程序更新并强制应用程序更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:06:46.287

此代码每天在后台检查一次活动的更新。如果找到更新（高于当前版本），它会打开一个对话框并要求用户打开市场。

## 代码有点像这样：-->

`http://mycompany.com/update`指向您的服务器站点，您可以在其中放置文本文件或 waterever 以获取最新版本并将其与较新版本进行比较。在比较的基础上强制它们进行更新

```
public class Test extends Activity {
private Handler mHandler;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.front);
    mHandler = new Handler();

    /* Get Last Update Time from Preferences */
    SharedPreferences prefs = getPreferences(0);
    lastUpdateTime =  prefs.getLong("lastUpdateTime", 0);

    /* Should Activity Check for Updates Now? */
    if ((lastUpdateTime + (24 * 60 * 60 * 1000)) < System.currentTimeMillis()) {

        /* Save current timestamp for next Check*/
        lastUpdateTime = System.currentTimeMillis();            
        SharedPreferences.Editor editor = getPreferences(0).edit();
        editor.putLong("lastUpdateTime", lastUpdateTime);
        editor.commit();        

        /* Start Update */            
        checkUpdate.start();
    }
}

/* This Thread checks for Updates in the Background */
private Thread checkUpdate = new Thread() {
    public void run() {
        try {
            URL updateURL = new URL("http://my.company.com/update");                
            URLConnection conn = updateURL.openConnection(); 
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            ByteArrayBuffer baf = new ByteArrayBuffer(50);

            int current = 0;
            while((current = bis.read()) != -1){
                 baf.append((byte)current);
            }

            /* Convert the Bytes read to a String. */
            final String s = new String(baf.toByteArray());         

            /* Get current Version Number */
            int curVersion = getPackageManager().getPackageInfo("your.app.id", 0).versionCode;
            int newVersion = Integer.valueOf(s);

            /* Is a higher version than the current already out? */
            if (newVersion > curVersion) {
                /* Post a Handler for the UI to pick up and open the Dialog */
                mHandler.post(showUpdate);
            }                
        } catch (Exception e) {
        }
    }
};

/* This Runnable creates a Dialog and asks the user to open the Market */ 
private Runnable showUpdate = new Runnable(){
       public void run(){
        new AlertDialog.Builder(Test.this)
        .setIcon(R.drawable.icon)
        .setTitle("Update Available")
        .setMessage("An update for is available!\\n\\nOpen Android Market and see the details?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                        /* User clicked OK so do some stuff */
                        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=pname:your.app.id"));
                        startActivity(intent);
                }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                        /* User clicked Cancel */
                }
        })
        .show();
       }
}; 
```

}`

# iphone - 程序不会在 Xcode 中运行

> ID：14150601
> 
> 赞同：1
> 
> 时间：2013-01-04T03:15:19.177
> 
> 标签：iphone, objective-c, xcode

我正在 Xcode 中构建一个应用程序，但该应用程序无法运行（运行按钮显示为灰色）。我制作了初始程序的副本，并开始在复制的版本上添加一些功能。现在复制的程序将无法运行。另外，我无法选择是否希望程序在 iPhone 模拟器或 iPad 模拟器中运行。唯一的选择是 64 位 macbook。关于为什么的任何想法？也许是因为两个程序都有相同的可执行文件？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:20:57.753

转到目标并检查您是否选择了要运行的应用程序的正确名称，如下所示

图片：

![在此处输入图像描述](../Images/cf0bddd27b1a4cdbc559e7bae0dcd6fb.png)

并选择正确的应用程序名称，如下图所示：

![在此处输入图像描述](../Images/871e7d20ddc620c50fb57e63424001bb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:24:14.227

可能您的方案缺少可运行的配置。

看看[Xcode 能建项目但不能在模拟器上运行](https://stackoverflow.com/questions/7800229/xcode-4-can-build-a-project-but-cant-run-it-on-simulator)

# javascript - 如何将数据加载到ckeditor onload

> ID：14150604
> 
> 赞同：5
> 
> 时间：2013-01-04T03:15:51.167
> 
> 标签：javascript, jquery, ckeditor

是否可以在不使用 JQuery 的情况下将数据加载到 ckeditor 中？如果可能的话，我想为此使用内联脚本标记。我能找到的所有示例都处理 Jquery，这在我的情况下并不是最佳的。

到目前为止，我在 CKs 网站上找到的示例是：

```
CKEDITOR.instances.editor1.setData( '<p>Some other editor data.</p>', function()
    {
        this.checkDirty();  // true
    }); 
```

我尝试将它与内联脚本标签一起使用，但它会使编辑器崩溃。如果我在 JQuery 中使用它，它将按预期工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T05:36:51.610

这是一个使用 CKEDITOR API 而不使用 jQuery 的示例。请注意替换函数的调用，该函数使用 textarea 内容初始化 CKEDITOR 的“editor1”实例。我认为这将是填充 onload 内容的最简单方法，但如果这还不够，您可以看到我已使用您问题中的代码用“其他一些编辑器数据”填充 CKEDITOR。

HTML：

```
<textarea id="editor1">
    Hello, world!
</textarea>​ 
```

Javascript：

```
CKEDITOR.replace( 'editor1', {
    toolbar: 'Basic',
    uiColor: '#9AB8F3'
});
CKEDITOR.instances.editor1.setData( '<p>Some other editor data.</p>', function()
{
    this.checkDirty();  // true
}); 
```

​</p>

[http://jsfiddle.net/cDzqp/](http://jsfiddle.net/cDzqp/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-30T13:39:29.620

我知道这个问题很老，但我刚刚想出了我的解决方案，而且我认为它更干净，所以我在这里为将来可能遇到同样问题的人加两分钱。

CKEditor 使用原来在旧文本区域中的内容自动设置新文本区域的内容，替换一个。换句话说，改变textarea的内容然后调用replace命令就足够了。这将是代码：

```
document.getElementById("editor1").value = "<p>Some other editor data.</p>";
CKEDITOR.replace("editor1"); 
```

完毕 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-17T08:26:04.487

如果有人正在寻找将内容附加到 CKEditor 中现有内容的解决方案，这将有所帮助。- 我正在使用 CKEditor 4.15.0

```
CKEDITOR.replace( 'editor1', {
toolbar: 'Basic',
uiColor: '#9AB8F3'});

CKEDITOR.instances.editor1.setData( CKEDITOR.instances.editor1.getData + 'New Content Here', function()
{
    this.checkDirty();  // true
}); 
```

根据我的要求修改，基于 Patrick Jones 的回答

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-12T11:26:19.150

将输入数据转换为 HTML 以加载到编辑器中。虽然编辑器能够处理非 HTML 数据（如 BBCode），但它只能在运行时处理 HTML 数据。数据处理器的作用就是通过这个函数把输入的数据转换成HTML。

见源

```
// Tranforming BBCode data, with a custom BBCode data processor available.
var data = 'This is [b]an example[/b].';
var html = editor.dataProcessor.toHtml( data ); // '<p>This is <b>an example</b>.</p>' 
```

# ios - 如何在iOS中扫描同一网络中的IP？

> ID：14150614
> 
> 赞同：1
> 
> 时间：2013-01-04T03:17:09.717
> 
> 标签：ios, networking, ip

我想以有效的方式获取本地网络中的所有活动 IP。我试图 ping 255 广播地址。但有些操作系统如 Windows 和 Android 不响应广播数据包。从 1 到 255 ping 每个 IP 需要几分钟。它太慢了。请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T02:33:33.370

我使用多线程从 1 ping 到 255，它节省了很多时间。

# c# - 如何杀死我的进程？不杀死属于其他用户的进程

> ID：14150619
> 
> 赞同：1
> 
> 时间：2013-01-04T03:18:02.520
> 
> 标签：c#, com, process

我有一个无法关闭的 Excel 应用程序。这是我的代码

```
 xlApp = new Excel.Application();
    Workbooks = xlApp.Workbooks;
    xlWorkBook = Workbooks.Open(FileUpload1.PostedFile.FileName, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
--------------------------------------------------------
    xlWorkBook.Close(false);
    xlApp.Quit(); 
```

现在尝试像这样杀死 Excel 进程：

```
Process[] exProc = Process.GetProcessesByName("EXCEL");
foreach (Process proc in exProc)
{
   proc.Kill();
} 
```

但我不知道如何杀死我开始的进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:26:42.593

我认为您需要释放 Excel COM 对象才能正确关闭

```
Marshal.FinalReleaseComObject(xlWorkSheet);
xlWorkBook.Close(false);
Marshal.FinalReleaseComObject(xlWorkBook);
xlApp.Quit();
Marshal.FinalReleaseComObject(xlApp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:27:31.300

创建进程时，请尝试将其句柄保存在变量中，例如使用 CreateProcess API，它将 HANDLE 返回到您创建的进程，使用该 HANDLE，您始终可以使用 GetProcessID API 获取进程 ID。

# jquery - 使用 django 和 jquery 创建依赖下拉菜单时遇到问题

> ID：14150625
> 
> 赞同：2
> 
> 时间：2013-01-04T03:19:11.267
> 
> 标签：jquery, django, django-forms, django-templates, django-views

所以我发现[了这个](http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/)关于如何制作两个相关下拉菜单的信息。我按照示例进行操作，现在当我尝试使用下拉菜单加载页面时，出现此错误：

```
AttributeError at /brewkeep/beers/
'dict' object has no attribute 'status_code' 
```

这是回溯：

```
Environment:

Request Method: GET
Request URL: http://192.168.1.111:8080/brewkeep/beers/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'brewkeep',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/di/djangostack-1.4-1/apps/django/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  188\.                 response = middleware_method(request, response)
File "/home/di/djangostack-1.4-1/apps/django/lib/python2.7/site-packages/django/middleware/common.py" in process_response
  94\.         if response.status_code == 404:

Exception Type: AttributeError at /brewkeep/beers/
Exception Value: 'dict' object has no attribute 'status_code' 
```

这是我的代码：

**网址.py**

```
(r'^brewkeep/beers/$', 'brewkeep.templatetags.brewery_beer_select'),
(r'^brewkeep/beers/(?P<brewery_id>[-\w]+)/all_json_models/$', 'brewkeep.views.beer_views.show_beers'), 
```

**模型.py**

```
class Brewery(models.Model):
    idbrewery = models.AutoField(primary_key=True)
    name = models.CharField(max_length=765)
class Beer(models.Model):
    idbeer = models.AutoField(primary_key=True)
    brewery = models.ForeignKey(Brewery, null=True, on_delete=models.SET_NULL) 
```

**模板标签.py**

```
from brewkeep.models import Brewery
from django import template

register = template.Library()

@register.inclusion_tag("show_beers.html")
def brewery_beer_select(request):
    breweries = Brewery.objects.all().order_by('name')
    return {'breweries' : breweries} 
```

**show_beers.html**

```
<form action="" method="get" accept-charset="utf-8">
    <p>Brewery:</p>
    <select name="brewery" id="brewery">
        <option value="">Select a brewery</option>
        {% for brewery in breweries %}
            <option value="{{brewery.idbrewery}}">{{brewery.name}}</option>
        {% endfor %}    
    </select>
    <select name="beer" id="beer" disabled="true">
        <option>Select a beer</option>
    </select>
</form>
<script src="{{ STATIC_URL }}admin/js/jquery.min.js">
    $(document).ready(
        function() {
            $("select#brewery").change(function() {
                if ($(this).val() == '') {
                    $("select#beer").html("<option>Select a beer</option>");
                    $("select#beer").attr('disabled', true);
                }
                else {
                    var url = "/brewkeep/beers/" + $(this).val() + "/all_json_models";
                    var brewery = $(this).val();
                    $.getJSON(url, function(beers) {
                        var options = '<option value="">Select a beer</option>';
                        for (var i = 0; i < beers.length; i++) {
                            options += '<option value="' + beers[i].pk + '">' + beers[i].fields['description'] + '</option>';
                        }
                        $("select#beer").html(options);
                        $("select#beer option:first").attr('selected', 'selected');
                        $("select#beer").attr('disabled', false);
                    });
                }
            });

            $("select#beer").change(function(vent) {
                if ($(this).val() == '') {
                    return;
                }
            });
        }
    );

</script> 
```

**beer_views.py**

```
def show_beers(request, brewery_id):
    brewery_obj = Brewery.objects.get(idbrewery=brewery_id)
    beers = Beer.objects.all().filter(brewery=brewery_obj).order_by('name')
    json_models = serializers.serialize("json", beers)
    return HttpResponse(json_models, mimetype="application/javascript") 
```

知道我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T19:57:27.500

为了满足您的要求，我喜欢使用[django-smart-selects](https://github.com/digi604/django-smart-selects)。它包含 js 功能，可以使用名为 ChainedForeignKey 的模型字段链接您的模型。例如，如果您想要一个电话链接选择，用户可以在其中选择一种手机类型、品牌和型号（例如 Iphone 4 S 或三星 Galaxy 2），它看起来像这样：

模型.py：

```
from smart_selects.db_fields import ChainedForeignKey

class Series(models.Model):
    series = models.CharField(max_length=10)

class Model(models.Model):
    model = models.CharField(max_length=20)
    series = models.ForeignKey(Series)

class Make(models.Model):
    make = models.CharField(max_length=20)
    model = models.ForeignKey('Model')

class Phone(models.Model):
     make = models.ForeignKey(Make)
     model = ChainedForeignKey(Model, chained_field='make', chained_model_field='make',)
     series = ChainedForeignKey(Series, chained_field='model', chained_model_field='model',)

class PhoneForm(ModelForm):
    class Meta:
        model=Phone 
```

模板.html：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

{% block content %}
  <form action='' method='post' enctype='multipart/form-data'>
  {{ form.as_p }}
  {% csrf_token %}
  <input type='submit' value='submit' />
  </form>
{% endblock %} 
```

* * *

编辑：基于评论

从文档

> 链接字段是该字段也应该链接的同一模型上的字段。链式模型字段是链式模型的字段，对应于链式字段也链接的模型。

更改为`chained_model_field='name'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:32:08.403

`beers_select_options.html`为您的啤酒选择中的选项编写一个简单的模板-

```
<option>Select a beer</option>
    {% for beer in beers %}
        <option value="{{ beer.idbeer }}">{{ beer }}</option>
    {% enfor %} 
```

为它服务

```
def ajax_get_beers(request):
    idbrewery = int(request.POST['idbrewery'])
    brewery = Brewery.objects.get(idbrewery=idbrewery)
    beers = Beer.objects.filter(brewery=brewery)
    return render_to_response('beers_select.html', {'beers': beers}) 
```

然后将函数附加到啤酒厂选择框上的更改事件 -

```
$('#brewery').change(function() {
    var idbrewery = $(this).find(':selected').val();
    $.ajax({
        type: 'POST',
        url: '/your/ajax_get_beers/view',
        data: {'idbrewery': idbrewery}
        success: function(options_html) {
            $('#beer').html(options_html);
        }
    });
}); 
```

这样就可以了，除了您可能已经获得了 csrf 保护，因此您需要在您的 javascript 之前添加以下内容（请参阅[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#ajax)）-

```
function csrfSafeMethod(method) {
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}

var csrftoken = $.cookie('csrftoken');
$.ajaxSetup({
    crossDomain: false, 
    cache: false,
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type)) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
}); 
```

这需要[jquery cookie 插件（在](https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js)[django docs](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#ajax)中有另一种获取 cookie 的方法）。

我还没有测试我的代码，但我认为这就是你真正需要的（我想你需要在你的 url conf 中添加一个 ajax 视图）。

# cocoa - 了解mac os中的vm_stat，如何将这些数字转换为类似于活动监视器的东西？

> ID：14150626
> 
> 赞同：5
> 
> 时间：2013-01-04T03:19:31.100
> 
> 标签：cocoa, memory, virtual-memory, activity-monitor

我正在尝试编写一个 mac os 程序来监视系统（类似于活动监视器）。我查看了函数 vm_stat ，当我运行它时，我得到了这个：

```
Mach Virtual Memory Statistics: (page size of 4096 bytes)
Pages free:                         438386.
Pages active:                       236438.
Pages inactive:                     113750.
Pages speculative:                   34293.
Pages wired down:                   225027.
"Translation faults":             11132566.
Pages copy-on-write:                319385.
Pages zero filled:                 6618647.
Pages reactivated:                   23071.
Pageins:                            421804.
Pageouts:                           153240.
Object cache: 14 hits of 24183 lookups (0% hit rate) 
```

但是，当我运行活动监视器时，我得到了类似的东西：

```
Page Ins: 1.61gb (8.00kb/sec)
Page outs: 598.6 MB 
```

我对此有一个问题：vmstat 中的空闲页面怎么这么小（与活动监视器相比）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:35:05.763

1.  256 是以兆字节为单位的页面数（`256 pages * 4096 bytes per page = 1048576 bytes`又名 2 ^(20)字节又名 1 兆字节），假设页面为 4096 字节。vm_stat 中的数字以页为单位，它还告诉您页大小为 4096 字节，因此您不必硬编码 256。
2.  由于您没有显示活动监视器来比较我不能肯定地说，但我怀疑这又是由于`vm_stat`使用页面单元和使用“人类可读”单元的活动监视器，它们确实是相同的值（或关闭，因为活动监视器不断更新）。

# java - 字符串常量池

> ID：14150628
> 
> 赞同：28
> 
> 时间：2013-01-04T03:19:52.990
> 
> 标签：java, string

正如这些 Stackoverflow 问题中所解释的：[问题 1](https://stackoverflow.com/questions/2009228/strings-are-objects-in-java-so-why-dont-we-use-new-to-create-them)和[问题 2](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)我理解“*字符串文字*”在以下情况下[被实习](http://en.wikipedia.org/wiki/String_interning)：

```
String s = "abc"; 
```

并且 JVM 将在以下情况下创建一个新的 String 对象，而不是使用来自 String Pool 的现有对象：

```
String s = new String("abc"); 
```

但是，在阅读了以下两个类似的陈述后，我有一个疑问。

*   来自[SCJP 准备书](https://rads.stackoverflow.com/amzn/click/com/0071591060)：

> *当编译器遇到字符串字面量时，它会检查池以查看是否已经存在相同的字符串。如果找到匹配项，则对新文字的引用将定向到现有字符串，并且不会创建新的字符串文字对象。*

*   来自[JavaRanch：](http://www.javaranch.com/journal/200409/Journal200409.jsp#a1)

> *在这种情况下，由于关键字“new”，我们实际上最终会得到稍微不同的行为。在这种情况下，对 String 字面量的引用仍被放入常量表（String Literal Pool）中，但是，当您遇到关键字“new”时，JVM 必须在运行时创建一个新的 String 对象，而不是使用常量表中的那个。*

因此，如果我们在使用“new”并基于上述定义创建对象时，还将引用放入非池内存**和池内存中。****当我们这样做时，JVM 不应该也返回相同的引用吗？**：

```
String one = new String("test");
String two = "test";

System.out.println(one.equals(two)); // true
System.out.println(one == two);      // false 
```

因为在声明字符串字面`String three = "test";`量时它已经存在于池中？因此应该返回相同的引用并打印 true？或者前面的语句是否意味着它们将被放入池内存中，但在使用`new`运算符时只是跳过？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-04T03:23:46.620

也许这将有助于您的理解：

```
String literal = "test";
String one = new String(literal);
String two = "test";

System.out.println(literal == two); //true
System.out.println(one == two); //false 
```

在您发布的示例中：

```
String one = new String("test");
String two = "test"; 
```

由于实习，传递给构造函数的引用与引用`String(String)`具有相同的值。`two`但是，字符串本身（由这两个引用引用）用于构造分配给 reference 的*新*对象`one`。

在这个例子中，正好有两个`String`用值“test”创建：一个保存在常量池中，每当你`"test"`在表达式中使用文字时都会引用它，第二个是由“new”运算符创建并分配给参考`one`。

## 编辑

也许你对这个说法感到困惑：

> 当编译器遇到字符串字面量时，它会检查池以查看是否已经存在相同的字符串。

请注意，这可能更清楚地表述为：

> *当编译器遇到字符串字面量时，它会检查池中*是否已经存在相同的字符串。

字符串仅在显式实习或通过类使用文字时才放入池中。因此，例如，如果您有这种情况：

```
String te = "te";
String st = "st";

String test = new String(te) + new String(st); 
```

然后虽然 a`String`将与 value 一起**存在**`test`，但所述 String 将不会存在**于池中**，因为字面`"test"`量从未发生过。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-16T17:51:11.010

```
 //Creates a new object even if one exists in the pool
    String s1 = new String("Tendulkar");

    // makes a new object string and then the reference is available to the pool
    String s2 = s1.intern();

    //this object is not created but references the address present in the pool
    String s3 = "Tendulkar";

    System.out.print(s1==s2); // results in false
    System.out.print(s2==s3); //very very true !!! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:12:48.093

`"abc"`*在编译/类加载时*将一个对象放入常量池，并*在执行时*`new String()`创建一个新对象。两者也是如此，但处于不同的阶段。*`new String("abc")`*

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-10T07:06:53.683

你的问题 ：

**因此，如果我们在使用“new”并基于上述定义创建对象时，还将引用放入非池内存和池内存中。当我们这样做时，JVM不应该也返回相同的引用吗？：**

**Ans** : 当你使用 new 关键字创建一个新的字符串对象时，生成的地址将是一个堆地址，而不是一个字符串常量池地址。而且两个地址都不一样。

**问题**：

```
String one = new String("test");
String two = "test";

System.out.println(one.equals(two)); // true
System.out.println(one == two);      // false 
```

**前面的语句是否意味着它们将被放入池内存中，但在使用 new 运算符时只是被跳过？**

**答**：是的，你的假设是正确的。当程序员使用 new 关键字时，JVM 将简单地忽略字符串常量池，并在堆中创建一个新副本。因此，两个地址都不相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-05T03:12:01.457

**字符串文字的创建**

1.  每次创建字符串字面量时，JVM 首先检查字符串常量池

2.  如果字符串已经存在于池中，则返回对池中实例的引用

3.  如果池中不存在字符串，则创建一个新的字符串实例并将其放入池中

例子，

```
 String s1 = "Welcome";
    String s2 = "Welcome"; //will not create new instance 
```

**字符串文字和字符串对象**

```
 String str1 = "Hello World!!";
    String str2 = "Hello World!!";
    System.out.println(str1 == str2);// true 
```

创建字符串字面量 str2 时，不会再次创建字符串“Hello World”。相反，它是 str1 字符串被重用，因为它已经存在于字符串常量池中。

由于 str1 和 str2 都指的是同一个

```
 String str3 = new String("Hello World!!");
    String str4 = new String("Hello World!!");
    System.out.println(str3 == str4); // false 
```

在这种情况下，将创建新的 String 对象，并由 str3 和 str4 分别引用。因此， str3 == str4 为假。池中的字符串，str1 == str2 为真。*

# mysql - 两列索引 (A,B) 和索引 (B) 的 A 和 B 指南（当一个为常数时）

> ID：14150630
> 
> 赞同：0
> 
> 时间：2013-01-04T03:20:00.847
> 
> 标签：mysql, sql, performance, indexing

基于这个答案：[https ://stackoverflow.com/a/2349824/1382306](https://stackoverflow.com/a/2349824/1382306)

A 和 B 的用法是否有进一步的指导方针，或者它们是否同样重要？

我有一个`SELECT FROM table1, table2 WHERE table2.table1id = table1.id AND table2.constant = ?`.

就我而言，我知道吗？来自用户定义的变量。因为它永远不会改变，这有什么不同吗？

我能否碰碰运气并要求解释针对（A，B）和（B）使用的逻辑，例如“找到所有具有As的B，然后搜索所有B”。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:24:26.207

你没有在你的问题中写任何问题，但我假设你想知道你应该使用什么样的索引。

`table2`你应该有一个索引，无论如何`(constant, table1id)`你有`table1`你的主键。`id`如果您只从中选择几列，`table2`则也应将它们包含在索引中。这样 MySQL 可以直接从索引中回答您的查询，甚至无需加载`table2`. 它通过`constant`在索引中查找来做到这一点，它可以这样做，因为它`constant`是索引的最左边的列，然后`table1id`也从索引中加载。如果发生这种情况，您可以在输出中看到*Using index*`EXPLAIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:48:36.813

隐藏在另一个热门帖子[https://stackoverflow.com/a/4120191/1382306](https://stackoverflow.com/a/4120191/1382306)中，看起来像

“查询在处理覆盖索引（多列上的索引）时需要解决列的顺序，在索引列定义中从左到右。语句中的列顺序无关紧要，只有第1列的顺序, 2 和 3 - 一个语句需要引用第 1 列才能使用索引。如果只有第 2 列或第 3 列的引用，则无法使用 1/2/3 的覆盖索引。

在 MySQL 中，查询中的每个 SELECT/语句只能使用一个索引（子查询/等被视为单独的语句）。MySQL 允许的每个表的空间量是有限制的。此外，在索引列上运行函数会使索引无用”

该答案中也有一个很好的索引陷阱列表。

* * *

就我而言，因为“查询中的每个 /statement 只能使用一个索引`SELECT`”，我猜想只使用 (?, table2.table1id) 是要走的路。

# javascript - 使用 JavaScript 浏览 JSON

> ID：14150642
> 
> 赞同：5
> 
> 时间：2013-01-04T03:22:24.543
> 
> 标签：javascript, json

好的，我一直在通过这个网站搜索任何类似或有启发性的东西，但我完全被卡住了。我得到了一些有效的 JSON，需要对其进行解析以提取价格。我不会走得很远。

这是 JSON：

```
{
  "result": "success",
  "prices": {
    "vdc": {
      "monthly": "1.00"
    },
    "network": {
      "private": {
        "monthly": "2.00"
      },
      "public": {
        "\/22 (1,111 IP Addresses)": {
          "monthly": "3.00"
        },
        "\/21 (2,222 IP Addresses)": {
          "monthly": "4.00"
        },
        "\/20 (3,333 IP Addresses)": {
          "monthly": "5.00"
        },
        "\/19 (5,555 IP Addresses)": {
          "monthly": "6.00"
        },
        "\/18 (6,666 IP Addresses)": {
          "monthly": "7.00"
        },
        "\/17 (7,777 IP Addresses)": {
          "monthly": "8.00"
        },
        "\/16 (8,888 IP Addresses)": {
          "monthly": "9.00"
        },
        "\/25 (111 IP Addresses)": {
          "monthly": "10.00"
        },
        "\/26 (55 IP Addresses)": {
          "monthly": "11.00"
        },
        "\/27 (22 IP Addresses)": {
          "monthly": "12.00"
        },
        "\/28 (11 IP Addresses)": {
          "monthly": "13.00"
        },
        "\/29 (5 IP Addresses)": {
          "monthly": "14.00"
        },
        "\/23 (900 IP Addresses)": {
          "monthly": "15.00"
        },
        "\/24 (333 IP Addresses)": {
          "monthly": "16.00"
        }
      }
    },
    "blocks": {
      "22": {
        "monthly": "17.00"
      },
      "21": {
        "monthly": "18.00"
      },
      "20": {
        "monthly": "19.00"
      },
      "19": {
        "monthly": "20.00"
      },
      "18": {
        "monthly": "21.00"
      },
      "17": {
        "monthly": "22.00"
      },
      "16": {
        "monthly": "23.00"
      },
      "25": {
        "monthly": "24.00"
      },
      "26": {
        "monthly": "25.00"
      },
      "27": {
        "monthly": "28.00"
      },
      "28": {
        "monthly": "29.00"
      },
      "29": {
        "monthly": "30.00"
      },
      "23": {
        "monthly": "24.00"
      },
      "24": {
        "monthly": "25.00"
      }
    },
    "server": {
      "cpu": {
        "monthly": "26.00"
      },
      "ram": {
        "monthly": "27.00"
      }
    },
    "volume": {
      "gb": {
        "monthly": "28.00"
      }
    },
    "snapshot": {
      "gb": {
        "monthly": "29.00"
      }
    }
  }
} 
```

在 jsonlint [dot] com 测试和验证。

经过多次尝试、测试、尝试、敲击我的键盘、尝试......这就是我目前拥有的，但它没有产生预期的结果（我会在代码片段之后告诉你那些是什么）。

```
function gp(x){ 
    for(var i in x){ 
        console.log('700: ',  x[i] );

        if(x[i] != 'success'){
            console.log(733);
            console.log(x[i]);

            for(var j in x[i]){
                console.log(736);
                console.log(x[i][j]);
            }
        }
     }
} 
```

在控制台中，我看到如下内容：

![在此处输入图像描述](../Images/5962a7dab2d3f1840ca45b35a0438901.png)

例如，我真正想看到（或查找或解析到）的是“volume”元素中“gb”的每月价格（或者它是一个项目？）。

理想情况下，我想找到“volume”、“ram”和“cpu”——验证它是 volume、ram 和 cpu——然后得到每月的价格。我确实尝试了一些关于 JSON 解析的事情，但显然，我还没有完全掌握它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T03:42:15.967

如果你想找到对象“volume”、“ram”和“cpu”，这很简单：

```
var volume = x.prices.volume;
var ram = x.prices.server.ram;
var cpu = x.prices.server.cpu; 
```

或者您可以直接使用它们：

```
console.log(x.prices.volume); 
```

如果你想找到每月的价格，那么：

```
var prices = x.prices;
console.log('volume, monthly=', prices.volume.gb.monthly);
console.log('cpu, monthly=', prices.server.cpu.monthly);
console.log('ram, monthly=', prices.server.ram.monthly); 
```

* * *

Javascript 对象非常简单，访问它们只有两种语法：

```
// If the key you're accessing is a constant (hardcoded):
object.key = value;

// If the key you're accessing is stored in another variable:
var k = "key";
object[k] = value;

// Alternatively:
object["key"] = value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:40:47.357

我只是有点困惑，但这里有一个例子。将您的 json 保存到一个变量中，然后使用节点名称沿着树向下走（除非没有任何节点名称）。

***这应该每月获得音量***

```
 json.prices.volume.gb.monthly 
```

[http://jsfiddle.net/PKUBA/](http://jsfiddle.net/PKUBA/)

# jquery - 从 jQuery 创建 JSON 字符串

> ID：14150647
> 
> 赞同：1
> 
> 时间：2013-01-04T03:23:23.403
> 
> 标签：jquery, html, arrays, json

我正在创建一个通用的待办事项列表，并且试图以某种方式“保存”该列表。它现在的工作方式是：表的每个“列”都存储在其单独的数组中，我循环遍历多个数组以接收所有必要的数据。我对数据库了解很多，但我没有使用数据库，因为很简单，我不知道如何使用！

简而言之，我希望能够以某种方式将此列表存储到 JSON 字符串中（我听说它更易于使用，并且我可以解析它），并将其保存到我的计算机以便稍后加载，或者保存它作为一个cookie。我不确定您是否可以这样做，因为最大大小为 4KB。

任何建议都会很棒！

请找到我的代码。我已经排除了很多 CSS

HTML

```
<div id="form"><label>Task Number: </label><input value="1" readonly="readonly" id="taskNum" type="text"></div>
 <div id="form"><label>Description: </label><input id="taskDesc" type="text"></div>
<div id="form"><label>Task Name: </label><input id="taskName" type="text"></div>
<div id="form"><label>Date: </label><input id="taskDate" type="text"></div>
<div id="form"><label>Time: </label><input id="taskTime" type="text"></div>
<div id="form"><label>Notes: </label><input id="taskNotes" type="text"></div>
<input id="addTask" value="Add Task" onclick="startTask();" type="button"> 
```

JavaScript

```
var numA = [];
var descA = [];
var nameA = [];
var dateA = [];
var timeA = [];
var notesA = [];

var num = $('#taskNum');
var desc = $('#taskDesc');
var name = $('#taskName');
var date = $('#taskDate');
var time = $('#taskTime');
var notes = $('#taskNotes');

function startTask()
{

    i=numA.length
    alert(i + ' before adding to array');

    numA[i] = num.val();
    descA[i] = desc.val();
    nameA[i] = name.val();
    dateA[i] = date.val();
    timeA[i] = time.val();
    notesA[i] = notes.val();

    displayTable();
}

function displayTable(){

    var c = -0;
    var newTable = '';

    while ( c<= i)
    {
        var st = '<tr><td>';
        var mid = '</td><td>';
        var del = '<label onclick="deleteRecord('+c+')" style="Color:blue; text-decoration:underline;">Delete Record?</label>';
        var end = '</td></tr>';

        alert('numA value: ' + c + ' value = '+ numA[c] +
         '\n descA value: ' + c + ' value = '+ descA[c] +
         '\n nameA value: ' + c + ' value = '+ nameA[c] +
         '\n dateA value: ' + c + ' value = '+ dateA[c] +
         '\n timeA value: ' + c + ' value = '+ timeA[c] +
         '\n notesA value: ' + c + ' value = '+ notesA[c]);
        newTable = newTable + st + numA[c] + mid + descA[c] + mid + nameA[c] + mid + dateA[c] + mid + timeA[c]+mid+del+end;
        alert(newTable);
        $('#toDoTable').html(newTable);
        c++
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:51:28.863

如评论中所述...将 ID 更改为 class 以避免重复。

建议将每个包装`task`在外包装中：

```
<div class="task_wrap">
    <div class="form"><label>Task Number: </label><input value="1" readonly="readonly" class="taskNum" type="text"></div>
    <div class="form"><label>Description: </label><input class="taskDesc" type="text"></div>
    <!-- other inputs for task-->
</div> 
```

映射到数组：

```
var tasklistArray=$('.task_wrap').map( function(){
       var task={};
       $(this).find(':input').each(function(){
             task[ this.className]=$(this).val();
       });
        return task;
 }).get(); 
```

更改为 JSON：

```
var tasklistJSON= JSON.stringify( tasklistArray); 
```

如果仅在现代浏览器中使用它可以将其存储在`localStorage`：

```
localStorage.setItem("taskList", tasklistJSON); 
```

演示：http: [//jsfiddle.net/rDh4w/](http://jsfiddle.net/rDh4w/)

地图的 API 参考[http://api.jquery.com/map/](http://api.jquery.com/map/)

# ios - KVO 核心数据和原始访问器

> ID：14150654
> 
> 赞同：1
> 
> 时间：2013-01-04T03:25:19.597
> 
> 标签：ios, cocoa, core-data, key-value-observing, primitive

我的 iPhone 应用程序核心数据属性的自定义访问器方法存在问题。我想做的不仅仅是拉出原始类型并返回它。我有一个可能的活动类型的 NSSet，如果对象没有原始类型，那么我想查看该集合并返回与我的类中的另一个变量匹配的活动类型。

以下是我为此提出的代码。代码的问题是我的调用`[self willChangeValueForKey:@"type"]`导致了一个无限循环，程序不断吐出 NSLog“将类型设置为 ...” - 可能是因为我从访问器中调用 willChange？

如果我取出`[self willChangeValueForKey:@"type"]`我没有得到循环并且程序运行良好，并且下次我尝试访问对象上的类型时，原始类型会被正确调用。但是，当我告诉我的 ManagedObjectContext 是时候保存它时，它告诉我任何对象都没有更改 - 因此，由于我没有调用 willChangeValueForKey - 对原始类型的更改永远不会为对象保留。

```
- (ActivityType *)type {

[self willAccessValueForKey:@"type"];
ActivityType *myType = [self primitiveType];
[self didAccessValueForKey:@"type"];

if (myType != nil) {
    NSLog(@"Use primitive (%@)", [myType myDescription]);

} else {

    // 1) find type
    NSSet *types = self.myActivityTypes;

    NSSet *foundTypes = [types objectsPassingTest:^BOOL(id obj, BOOL *stop) {
        ActivityType *object = (ActivityType *) obj;

        return ([object.typeName isEqualToString:self.activityTypeName]);

    }];

    myType = [foundTypes allObjects][0];

    NSLog(@"Setting type to %@", [myType myDescription]);

    // in this case we should not alert anyone since we are inside the getter?
    [self willChangeValueForKey:@"type"];
    [self setPrimitiveType:myType];
    [self didChangeValueForKey:@"type"];

}

return myType;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:58:46.553

托管对象属性观察机制将使用访问器检查新旧值。由于您正在更改 getter 中的值，因此将再次调用 getter，因此您的无限循环开始。

这种延迟加载实际上不适用于托管对象。您可以在其他地方设置活动类型，例如 awakeFromFetch 或在设置 activityTypeName 时，或者如果不合适，则实现单独的访问器：

```
-(ActivityType*)calculatedActivityType
{
    ActivityType *myType = self.activityType;
    if (myType) return myType;

    NSSet *types = self.myActivityTypes;

    NSSet *foundTypes = [types objectsPassingTest:^BOOL(id obj, BOOL *stop) {
        ActivityType *object = (ActivityType *) obj;

        return ([object.typeName isEqualToString:self.activityTypeName]);

    }];

    myType = [foundTypes allObjects][0];
    self.activityType = myType;
    return myType;
} 
```

这不会导致任何循环，因为您不在任何访问器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:26:00.443

另一种解决方案可能是在不更改底层值类型的情况下由访问器返回新类型。并且...在当前队列上异步调度更改。

```
dispatch_async(dispatch_get_current_queue(), ^{
    [self willChangeValueForKey:@"type"];
    [self setPrimitiveType:myType];
    [self didChangeValueForKey:@"type"];
}); 
```

它并不完美，我可以想象这可能会导致您的“查找代码”被执行多次。

# c# - 在 MVC3 中无法绑定到列表

> ID：14150658
> 
> 赞同：2
> 
> 时间：2013-01-04T03:25:40.600
> 
> 标签：c#, asp.net-mvc, list, binding

我一直在尝试将视图绑定到对象列表，如此处所述[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

我的问题是当通过 POST 返回列表时，列表包含我最初发送的正确数量的元素，但是对象中的值又回来了，就好像它们从未设置过一样。不知道我错过了什么使模型绑定器正确解析。

这是我的测试代码：

我的模型是：

```
IList<Test> 
```

其中测试定义为：

```
public class Test
{
    public int x;
} 
```

在我的 TestController 中，我使用了一个具有回发的方法“Create”：

```
public ActionResult Create()
    {

        List<Models.Test> testList = new List<Models.Test>() {
            new Models.Test() { x = 5 }
        };

        return View(testList);
    }

    //
    // POST: /Test/Create

    [HttpPost]
    public ActionResult Create(IList<Models.Test> tests)//Models.TestContainer tc)
    {
        return View(tests);
    } 
```

和“创建”视图的代码：

```
@model IList<ksg.Models.Test>
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>TestContainer</legend>
       @Html.EditorFor(x => x[0])
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

最后，我的 Test 类的编辑器模板：

```
@model ksg.Models.Test
@using ksg.Helpers
<div>
@Html.TextBoxFor(x => x.x)
</div> 
```

如上所示，我发送了一个带有 1 项的列表`Test.x = 5`，但是当我在 上断点时 `Create(IList<Models.Test> tests)`，测试包含 1 个带有 的对象`x = 0`。

有什么我错过的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T04:31:16.283

试试这 2 个更改：

测试类：

```
 public class Test
      {
         public int x { get; set; }
      } 
```

创建.cshtml

```
 @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>TestContainer</legend>
               @Html.EditorFor(x => x[0].x)   @*<--*@
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:25:20.600

我试过你的代码，问题是`x`在`Test`类中是**字段**而**不是属性**，因此默认模型绑定器无法从发布的表单中设置值。`Test`类应如下所示：

```
public class Test
{
    public int X {get; set;}
} 
```

然后它工作。

# java - JSoup 从元素列表创建数组列表

> ID：14150662
> 
> 赞同：0
> 
> 时间：2013-01-04T03:25:56.250
> 
> 标签：java, jsoup

所以我正在使用 JSoup 从页面中获取一个大的元素列表。当我说大时，我的意思是几百个元素。我知道这些元素在那里，因为我将它们全部转换为一个巨大的字符串并且它们都被列出了。现在我需要做的是将它们放入一个数组中，这样我就可以一个一个地处理它们。这是我当前的代码：

```
 public static String [] grabWordList(String ending) throws IOException, InterruptedException{

Document doc = Jsoup.connect("http://site.com/").get();
Elements links = doc.getElementsByClass("defLink"); //Get words from site
String s[] = new String[links.size()]; //Create an array

int i = 0;
for(Element el : links){  //Attempt to put them into an array using this loop of blindly coppy and pasted code (I know, HORRIBLE Idea, I dont usually do that, but I am lost)
    s[i++] = el.attr("links");
}
 return s;
    } 
```

当我这样做时，我使用此代码尝试获取数组并打印它：

```
String words[] = Methods.grabWordList("in");

   for(int j=0; j < words.length; j++){
       System.out.println(words[j]);
   } 
```

运行此代码时，打印出来的只是`[Ljava.lang.String;@6201dbc` 我希望有人能提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:46:29.227

我个人认为，“String words[]”单词应该定义为“String[]”，就像在Java中创建一个数组一样。但是我对JSoup不太熟练。

# c++ - C++ - 线程导致奇怪的输出

> ID：14150663
> 
> 赞同：3
> 
> 时间：2013-01-04T03:26:03.487
> 
> 标签：c++, pthreads

我不明白为什么我的代码会给我疯狂的输出，有时还会出现段错误（代码是由我编写的 08218722 以防万一我的大学检查抄袭）。

该代码在[Linux Mint](http://en.wikipedia.org/wiki/Linux_Mint) 14 中用[C++编写，并使用](http://en.wikipedia.org/wiki/C++)

```
g++ -o code.exe code.cpp -lpthread 
```

然后运行`./code.exe`​​.

该代码应该生成一个随机字符向量（仅使用字符 a、b、c、d、e 和 f），最多 1000000，然后循环并计算每个字符的数量。这在我添加线程之前工作正常（测试非线程和线程之间的运行时间的分配的一部分）。所以我创建了 1000 个线程，它们被告知要添加 1000 个字符以添加到向量中。我在这里做错了什么？

更新 - 代码仍然输出一些疯狂的结果 - 现在它不显示字符而是某种方块

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <vector>
#include <algorithm>
#include <pthread.h>
#include <ctime>

using namespace std;

//Variable Declarations
const int length = 1000000; // length
const int packets = 1000; // packets length
const char chars[6] = {'a', 'b', 'c', 'd', 'e', 'f'}; // chars to choose
vector<char> charList(length); //vector of random charecter list
int charGroup[6] = {}; //stores char count
pthread_t threads[packets];

//Structure Declarations
struct dataStruct {
    int start;
    int end;
};

//Function Declarations
void *randomLetterGenerator(void * args); // Declaring function

// prints the vector
void outVector(char n)
{
    cout << n;
}

void GroupVector(char n)
{
   charGroup[n] = charGroup[n] + 1;
}

int main(){
        cout << "Creating a Random Char Array" << endl;
        cout << "using only letters ranging between a and f." << endl;
        //srand(time(NULL)); // sets the time seed
        clock_t start = clock();
        for(int i=0;i<length/packets;i++) {
            printf("\rPlease wait...%3d/%3d",i*packets,length);
            //Created in packets
            dataStruct ds;
            ds.start = i * (length/packets);
            ds.end = ds.start + (length/packets);
            pthread_create(&threads[i], NULL, randomLetterGenerator, (void *)&ds);
        }

        for(int i=0;i<length/packets;i++) {
            pthread_join(threads[i], NULL);
        }

        printf("\n"); //new line

        //prints out the new char list

        for_each(charList.begin(), charList.end(), outVector) ;

        printf("\n"); //new line

        //Counts and places in the correct array
        for_each(charList.begin(), charList.end(), GroupVector) ;

        int total = 0;

        for (int i = 0; i < 6; i++) {
            total += charGroup[chars[i]];
            cout << chars[i] << " = " << charGroup[chars[i]] << endl;
        }
        cout << "\nTotal: " << total << endl;
        clock_t ends = clock();
        cout << "Run Time :"
        << (double) (ends - start) / CLOCKS_PER_SEC << endl;
         pthread_exit(NULL);    
        return 0;   

}

void * randomLetterGenerator(void * datastruct){
    dataStruct ds = *((dataStruct *) datastruct);
    int start = ds.start;
    int end = ds.end;

     srand( time(NULL) );
    for(unsigned int c=start;c<end;c++){
        int i = (int) (rand() % 6);
        char rchar = chars[i];
        //--pthread_mutex_lock (&mutex);
        charList.at(c)= i;
        //--charList.push_back(rchar);  
        //--pthread_mutex_unlock (&mutex);  
    }
    pthread_exit(NULL);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:32:34.603

很可能是因为您没有锁定。多个线程不能同时写入向量之类的标准容器。`charList.push_back(rchar);`当您的函数中有多个线程在执行时`randomLetterGenerator`，这正是您正在执行的操作。您需要用 包围此代码`mutex`，例如：

```
pthread_mutex_t mutex;

void * randomLetterGenerator(void * datastruct)
{ 
    //Code as before
    //...
    //Lock the mutex
    charList.push_back(rchar);
    //Unlock the mutex
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T03:37:19.147

您在这里使用了错误的方法。您需要创建一个大小合适的向量，然后使用元素分配将元素填充到其中。

使用向量的`push_back`函数将不起作用，并且可能会使您的程序崩溃，因为它必须修改向量的内部状态，这不是线程安全的。如果你通过互斥锁将它包围起来，它会工作得很好，但是你会完全放弃并行性的任何好处。

因此，创建一个已经具有所需条目数的向量 ( `vector<char> lots_of_chars(length);`)，然后使用项目分配来分配给每个项目。每个线程都必须从向量的不同偏移量开始，这样它们就不会互相踩踏。

我会给你具体的代码来完成这项工作，但这听起来像是一项任务，所以我想我会让你自己解决。

还有另一个线程安全问题。它实际上可能不会在这里引起任何问题，但您应该意识到这一点。`rand`不是线程安全的。它依赖于共享全局状态来生成连续的“随机”数字。除非您使用 boost 或 C++11，否则我知道没有一个好的线程安全随机数生成选项。如果你有 C++11，你应该使用 C++11s 内置的线程支持而不是 pthreads。

In this particular case, it's not terribly important that the random number generation actually generate random numbers. So if threads stomp on each other through the random number generator and cause it to repeat states and generate the same sequences of random numbers or whatever, that should be OK. Of course, that's just the most likely outcome. Using `rand` in this non-thread-safe way is actually undefined behavior and anything at all might happen because of it.

# android - 将 # 尖锐字符传递给拨号意图

> ID：14150666
> 
> 赞同：0
> 
> 时间：2013-01-04T03:26:19.027
> 
> 标签：android

想要拨打的号码是`232323`，但我添加`#31#`是为了让用户有机会私下拨打电话。

如果我这样做：

```
 Intent sendIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("tel:" + "232323"));
    startActivity(sendIntent); 
```

但是，如果我这样做，它将起作用：

```
 Intent sendIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("tel:" + "#31#232323"));
    startActivity(sendIntent); 
```

它不会。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:34:54.283

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("tel:" + Uri.encode("#31#232323"))); 
```

# mysql - 如何从 MySQL 数据库表中快速导出一整列？

> ID：14150667
> 
> 赞同：0
> 
> 时间：2013-01-04T03:26:18.327
> 
> 标签：mysql, performance

我有一个`t`只有两列的 MySQL 数据库表，`id`即是. 有几百万行。如何快速导出一整列？索引是and ，即在列中不是唯一的。`INT(11)``val``VARCHAR(255)``id``id``val``id`

是

```
SELECT DISTINCT id FROM t; 
```

最好的？

### 编辑：

我想将结果保存到文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:18:06.337

要将唯一`id`的 s 导出到**服务器上**的文件中，您可以使用

```
SELECT DISTINCT id FROM t INTO OUTFILE 'all_the_unique_ids'; 
```

然后，您将`<mysql data dir>/<database name>/all_the_unique_ids`在服务器上找到该文件。

如果你想在客户端拥有文件，你需要使用 MySQL 客户端，例如 MySQL 自己的命令行客户端：

```
mysql -e "SELECT DISTINCT id FROM t" > all_the_unique_ids 
```

# ruby-on-rails - 嵌套 Form Rails 批量分配问题

> ID：14150673
> 
> 赞同：-1
> 
> 时间：2013-01-04T03:27:11.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-forms

我似乎无法使用嵌套表单，我要么看不到它，要么不理解它。这里的错误

```
Can't mass-assign protected attributes: location 
```

现在在这里我是如何写我的

模型/事件：

```
#Data
  attr_accessible :customer_id, :description, :location_attributes
#Relationship
  has_many :locations
  accepts_nested_attributes_for :locations, :allow_destroy => true 
```

型号/地点：

```
#Data
  attr_accessible :address, :customer_id, :event_id, :latitude, :longitude
#Relationship
  belongs_to :customer
  belongs_to :event 
```

控制器：

```
 def create
    @event = current_customer.events.build(params[:event])
    ... 
```

看法：

```
 <%= f.fields_for :location do |e| %>
    <%= e.hidden_field :longitude %>
    <%= e.hidden_field :latitude %>
  <% end %> 
```

参数

```
 "location"=>{"longitude"=>"-80.9449995",
 "latitude"=>"46.435371599999996"}, 
```

我在 Rails 3.2.9 上并托管在 vps 服务器上。现在我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:49:09.400

你的形式应该是，并注意复数：

```
<% f.fields_for :locations do |location_form| %> 
```

这是因为您正在为与表单对象关联的位置对象呈现字段。这将自动将这些字段的参数命名为`location_attributes`，然后将它们传递给您的控制器，然后您的模型将接受它们。

# c# - 使用 Controller 级别的异常记录 (IExceptionFilter.OnException) 时会漏掉哪些异常？

> ID：14150677
> 
> 赞同：2
> 
> 时间：2013-01-04T03:27:39.340
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, error-logging

我有 MVC3 应用程序，其中非常重要的是正确记录生产中可能发生的所有错误。

当前方法使用 IExceptionFilter.OnException。该功能应用在 BaseContorller 上，所有其他控制器都继承自 BaseContorller，看起来（略微简化）如下：

```
public class BaseController : Controller, IExceptionFilter
{        
    protected override void OnException(ExceptionContext exceptionContext)
    {
        Logger.Error(exceptionContext.Exception);
    }
} 
```

这种方法效果很好，适用于：

*   源自控制器操作方法中的代码的异常

*   源自控制器方法返回的视图的异常，包括编译错误

*   应用于控制器的过滤器中的异常

但是，使用这种方法不会捕获到一些异常：

*   控制器构造函数中抛出的异常
*   应用程序例程中抛出的异常，例如：RegisterGlobalFilters、RegisterRoutes、Application_Start
*   找不到页面 (404)

是否有任何其他类型的异常可以被控制器级异常处理遗漏？

我之所以问，是因为我可能会使用 Application_Error 或 ELMAH 实现额外的日志记录层，并且我想验证这些异常中没有一个会在未记录的情况下溜走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:33:03.150

任何不通过 MVC 管道的东西都不会被这个实现捕获。HttpHandlers、WebAPI 实现、ServiceStack 添加等。

额外的一层 Elmah 没有伤害，但我可能只会选择其中一个。如果您对错误处理进行分段，则在调试时可能会使您的工作加倍。

“是我的伐木工抓到还是 Elmah 抓到了？”

由于 Elmah 接近 ASP.NET 金属，我会坚持使用 Elmah 并将您的异常保存在一个地方。

```
 NuGet Install-Package Elmah.MVC 
```

作为旁注，您可能仍然希望记录器进行跟踪，但这在您的代码中比未处理的异常更明确地表达。

```
 Logger.Info("Just got another Sale, W00t!") 
```

# c# - 具有自引用实体的实体框架代码优先存储库模式

> ID：14150678
> 
> 赞同：1
> 
> 时间：2013-01-04T03:27:48.950
> 
> 标签：c#, asp.net-mvc-4, repository-pattern, entity-framework-5, self-referencing-table

我正在尝试在 .NET 4.5 上实现 EF5 的存储库/工作单元模式，如下所述：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc /implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。这一切都很好，直到我尝试使用此处描述的自引用实体：http: [//www.codeproject.com/Articles/206410/How-to-Configure-a-Self-Referencing-Entity-in-Code](http://www.codeproject.com/Articles/206410/How-to-Configure-a-Self-Referencing-Entity-in-Code). 当我尝试对包含自引用实体 (FieldType) 的存储库执行任何操作（获取指定实体、获取所有实体、添加实体等）时，我在 UnitOfWork 类中的 FieldTypeRepository 的 getter 上收到 stackoverflowexception。别担心，在 stackoverflow 上发布 stackoverflowexception 的讽刺意味对我来说并没有丢失。我已经阅读了很多关于 EF 存储库模式的 SO 文章，但没有看到任何将它们与自引用实体结合起来的东西。

我尝试过的事情：

*   使用 FluentAPI 而不是 FieldType 实体上的属性 - 没有变化
*   直接使用 Context 对象 - 这非常有效，实体被添加到数据库并正确地相互引用，不幸的是这违背了存储库模式的目的
*   将存储库用于非自引用实体 - 效果很好
*   将 EF5 用于 .NET 4.0 和 .NET 4.5 - 结果相同

我的代码：

字段类型.cs

```
public class FieldType
{
    [Key]
    [DatabaseGeneratedAttribute(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int FieldTypeId { get; private set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public int? ParentFieldTypeId { get; set; }

    [ForeignKey("ParentFieldTypeId")]
    public virtual FieldType ParentFieldType { get; set; }
} 
```

UnitOfWork.cs

```
public class UnitOfWork : IDisposable
{
    private Context context = new Context();

    private Repository<FieldType> fieldTypeRepository;

    public Repository<FieldType> FieldTypeRepository
    {
        // EXCEPTION OCCURS HERE
        get
        {
            if (this.fieldTypeRepository == null)
            {
                this.fieldTypeRepository = new Repository<FieldType>(this.context);
            }

            return this.FieldTypeRepository;
        }
    }

    public void Save()
    {
        this.context.SaveChanges();
    }
} 
```

上下文.cs

```
public class Context : DbContext
{
    public Context()
        : base("echo")
    {
    }

    public DbSet<FieldType> FieldTypes { get; set; }
} 
```

存储库.cs

```
public class Repository<TEntity> where TEntity : class
{
    private Context context;

    private DbSet<TEntity> dbSet;

    public Repository(Context context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    public virtual IEnumerable<TEntity> Get(
        Expression<Func<TEntity, bool>> filter = null,
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
        string includedProperties = "")
    {
        IQueryable<TEntity> query = this.dbSet;

        if (filter != null)
        {
            query = query.Where(filter);
        }

        foreach (var includeProperty in includedProperties.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }

        if (orderBy != null)
        {
            return orderBy(query).ToList();
        }
        else
        {
            return query.ToList();
        }
    }

    public virtual TEntity GetById(object id)
    {
        return this.dbSet.Find(id);
    }

    public virtual void Insert(TEntity entity)
    {
        this.dbSet.Add(entity);
    }

    public virtual void Delete(object id)
    {
        TEntity entityToDelete = this.dbSet.Find(id);
        this.Delete(entityToDelete);
    }

    public virtual void Delete(TEntity entityToDelete)
    {
        if (this.context.Entry(entityToDelete).State == EntityState.Detached)
        {
            this.dbSet.Attach(entityToDelete);
        }

        this.dbSet.Remove(entityToDelete);
    }

    public virtual void Update(TEntity entityToUpdate)
    {
        this.dbSet.Attach(entityToUpdate);
        this.context.Entry(entityToUpdate).State = EntityState.Modified;
    }
} 
```

SecurityController.cs（或任何类）

```
public class SecurityController : Controller
{
    public ActionResult Login()
    {
        using (UnitOfWork unitOfWork = new UnitOfWork())
        {
            var fieldType = unitOfWork.FieldTypeRepository.GetById(1);
            //THIS COULD BE ANY TYPE OPERATION
        }

        return this.View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:15:42.433

感谢 Gert，帮助我意识到这不是 EF 或自引用类型的问题，而是我从自身调用 FieldTypeRepository 的 get 方法... [http://www.youtube.com/watch?v= g6GuEswXOXo](http://www.youtube.com/watch?v=g6GuEswXOXo)

# php - 从 URL 字符串中删除 .com、.net 等

> ID：14150679
> 
> 赞同：5
> 
> 时间：2013-01-04T03:27:56.970
> 
> 标签：php

如果 $domain = apple.com 或 mit.org.edu.au，如何使用 PHP 删除“.com”以及从点开始的所有内容？例如，apple.com 变成了 apple，mit.org.edu.au 变成了 mit（忽略 www.）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T03:35:20.820

如果您已经拥有域，那么只需分解域并获取数组的第一个元素。

```
$domain = 'apple.com';
$domain_parts = explode('.', $domain);
echo $domain_parts[0]; // returns apple 
```

请注意，上述内容不考虑子域。即“www.apple.com”将返回“www”。但根据您上面的问题，explode 可能就足够了。

如果您还没有域，那么您可以使用 PHP 的[parse_url 函数](http://php.net/manual/en/function.parse-url.php)从 URL 中提取域（主机）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:34:35.123

```
<?php
$domain1 = 'apple.com';
$domain2 = 'mit.org.edu.au';
$exploded1 = explode('.',$domain1);
$exploded2 = explode('.',$domain2);
echo $exploded1[0];
echo $exploded2[0];
?> 
```

请参阅 PHP 的[explode](http://php.net/manual/en/function.explode.php)函数。这是一个**[键盘](http://codepad.org/SjOq6Io3)**示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T03:35:23.913

使用[爆炸](http://php.net/manual/en/function.explode.php)。

```
$tokens = explode(".", "apple.com");
echo $tokens[0]; // apple 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T03:59:38.213

这是一个简单的单行答案：

```
<?php echo explode('.', $url)[0]; ?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T06:53:07.007

就像其他人说的，使用爆炸。$raw = 'apple.com'; $url = explode('.',$raw); 回声 $url[0];

如果域中有“www”，则进行简单的检查，例如 if($url[0] == 'www'){ echo $url[1]; }else{ 回声 $url[0]; }

# nsuserdefaults - 使用 NSUserDefaults 隐藏子视图

> ID：14150681
> 
> 赞同：0
> 
> 时间：2013-01-04T03:27:59.573
> 
> 标签：nsuserdefaults

我是 NSUserDefaults 的新手，并且一直很难获得有关它的信息......问题是我试图有一个子视图，它会询问用户一些数据，但只是他们第一次打开那个子视图，我试图使“确定”按钮成为激活键的布尔值的那个……我所做的是

在 .h 文件

```
@property (nonatomic,retain) IBOutlet UIView* myView;
@property (nonatomic, retain) IBOutlet UIButton* OK;
-(IBACtion)OK:(UIButton *)sender; 
```

在 viewDidLoad 中的 .m 处：

```
if([[NSUserDefaults standardUserDefaults] boolForKey:@"OKButton"]){
self.myView.hidden=YES;
}
else{
self.myView.hidden=NO;
}
}; 
```

接着

```
-(IBAction)OK:(UIButton*)sender{
if(sender.tag==1){
self.myView.hidden=YES;
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"OKButton"];
[[NSUserDefaults standardDefaults]synchronize];
}
else{
self.myView.hidden=NO;
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"OKButton"];
[[NSUserDefaults standardDefaults]synchronize];
}; 
```

问题是每次单击“确定”按钮时，应用程序都会崩溃“终止称为抛出异常......有什么建议吗？？

提前致谢 ：）

# java - JAVA：在 Do While 中使用字符串进行决策

> ID：14150691
> 
> 赞同：3
> 
> 时间：2013-01-04T03:30:16.740
> 
> 标签：java, do-while

```
import java.util.Scanner;
import java.util.*;

public class MultipicationTable{

    public static void main(String[] args)
    {
        // Initialising selection variable to 0 
        int selection = 0;
        int MultiValue = 0;
        int UserValue = 0;

        // Initializing the count for loop
        int i;

        // Initializing Random1 and Random2 to get random values
        int Random1;
        int Random2;

        // Creating new Scanner
        Scanner input = new Scanner(System.in);

        do{

        // Menu to select type of multipication
        System.out.println("Please select your option");
        System.out.println("1: Random Multipication table");
        System.out.println("2: Give your own numbers");

        // Getting the input from the above menu
        selection = input.nextInt();

        switch (selection)
        {
            case 1:

                Random1 = (int)(Math.random() * 1000);
                Random2 = (int)(Math.random() * 1000);

                Random1 = Random1/10;

                System.out.println("You Random Value to pultiply is " + Random1);

                System.out.println("How long do you want? 2 - 100 ");

                MultiValue = input.nextInt();

                for (i = 1; i <= MultiValue; i++ )
                {
                    System.out.println("Multipication of " + Random1 + " * " + i + " is: " + Random1 * i);
                }

            case 2:

                System.out.println("What is your Number? ");
                UserValue = input.nextInt();

                System.out.println("How long do you want to multiply? ");
                MultiValue = input.nextInt();

                for (i = 1; i <= MultiValue; i++ )
                {
                    System.out.println("Multipication of " + UserValue + " * " + i + " is: " + UserValue * i);
                }

        }

        System.out.println("Would you like to exit? ");
        String Exit = input.nextLine();

        }while(Exit != 'y');    

    }

} 
```

我认为我的错误出在这部分代码上。

```
 System.out.println("Would you like to exit? ");
    String Exit = input.nextLine();

}while(Exit != 'y'); 
```

我收到类似“无法解决退出”的错误。我的目标是循环直到用户输入`y`该问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T03:40:05.843

首先，`while`or`do...while`循环中的条件在外部范围内。这意味着在`do...while`检查条件时，在块中声明的任何变量都不再在范围内。为了解决这个问题，你需要在循环`exit`外声明你的变量：`do...while`

```
String Exit = null;

do {
    // do something
    Exit = input.nextLine();
} while (Exit != 'y'); 
```

但是，此代码仍将无法编译，因为`Exit`它被声明为 a`String`但您正在将它与`'y'`which is a进行比较`char`。字符串文字总是用双引号括起来，`"y"`字符串也是如此。

现在将条件更改为`Exit != "y"`将编译，但它不会按预期运行。您需要使用该方法比较`String`s 。`equals()`这意味着条件应该是`!Exit.equals("y")`。将它放在`while`条件中应该可以解决循环的问题。

或者，如果您想检查单词“yes”或变体，您可以使用`while(Exit.charAt(0) != 'y');`. 这将检查第一个字符`Exit`是否是 'y' 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:32:00.480

`String Exit`必须在循环外声明

```
String Exit =null;
do {
//body
Exit= input.next(); // or input.nextLine();
} while(!Exit.equals("y")); 
```

如 Kartik 所述编辑：应该使用 equals 来比较字符串。和 == 检查两个变量是否引用同一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:34:56.200

您的第一个问题是`Exit`@Subin 涵盖的范围。您可能也想使用`}while(!Exit.equals("y");`。

您可以查看[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)由于这个原因。基本上你`!=`可能总是正确的，因为它比较对象，因此会决定它们是两个不同的对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T03:39:21.767

```
 System.out.println("Would you like to exit? ");
    String Exit = input.nextLine();

}while(!Exit.equals('y'); 
```

# iphone - UITextField 选择导致 UITableVIew 拉伸

> ID：14150692
> 
> 赞同：2
> 
> 时间：2013-01-04T03:30:18.863
> 
> 标签：iphone, objective-c, ios

我有一个`UITableView`以上的`UITextField`。当我反复选择拉伸`UITextField`时。`UITableView`这是我的 onViewLoad 代码：

```
- (void)viewDidLoad 
{
 [super viewDidLoad];
 self.title = @"Clock In Time";

     CALayer *layer= pickUpWeighCapacityList.layer;
 UIColor* uic = UIColorFromRGB(0x336600);
 CGColorRef* cgf = uic.CGColor;

  layer.borderWidth = 2;
  layer.borderColor = cgf;
  layer.cornerRadius = 10;
  layer.frame = CGRectMake(20.0f, 33.0f, 280.0f, 178.0f);

  pickUpWeighCapacityList.dataSource = self;
  pickUpWeighCapacityList.delegate = self;
  pickUpWeighCapacityList.tableHeaderView = nil;
  pickUpWeighCapacityList.tableFooterView = nil;

  pickUpWeighCapacityList.frame = CGRectMake(20.0f, 33.0f, 280.0f, 178.0f);

  i = 0;

  signOutTimeField.placeholder = @"Time to Clock Out of Work";
  picker = [[UIDatePicker alloc] init];
  signOutTimeField.inputView = picker;

  UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
        style:UIBarButtonSystemItemDone target:self action:@selector(doneEditing)];
  self.navigationItem.rightBarButtonItem = rightButton;
  [rightButton release];
  [picker release];
} 
```

这是我对视图功能的代码：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
  // Return the number of sections.
  return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
  // Return the number of rows in the section.
  return 3;
} 
```

我怎样才能得到`UITableView`不伸展？（iOS 4.3。XCode 3.2.6——不要评判我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:11:36.943

解决方案不明显。在您的`viewDidLoad`部分中放置以下行：

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(keyboardWillHide:) 
             name:UIKeyboardWillHideNotification object:nil]; 
```

然后在您的 中包含以下代码`viewController`：

```
 - (void)keyboardWillHide:(NSNotification *)note 
    {
     [pickUpWeighCapacityList setFrame:
          CGRectMake(original-x-coord,original-y-coord,
                     original-length,original-width)];
    } 
```

# c++ - 调用 SetWindowsHookEx() 的应用程序可以捕获自动完成 URL 和密码吗？

> ID：14150694
> 
> 赞同：0
> 
> 时间：2013-01-04T03:30:34.453
> 
> 标签：c++, windows, autocomplete, setwindowshookex

我有一个应用程序，它使用 SetWindowsHookEx() 为击键记录设置键盘挂钩。这很好用，但是在 Web 浏览器自动完成 URL 或密码的情况下，应用程序当然不会捕获用户实际没有输入的字符。

我的老板发现[一篇文章](http://www.symantec.com/connect/articles/introduction-spyware-keyloggers)说：“调用 SetWindowsHookEx() 的应用程序甚至能够捕获自动完成密码。” 我在任何地方都找不到这个记录。实际上是否可以通过钩子获取自动完成文本，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:51:04.047

我认为这篇文章是指钩子在目标的进程空间中运行的事实。它可以抓取屏幕或内存，可以注入代码，可以监控事件队列。

# tomcat7 - RESTful webservice部署在tomcat服务器错误

> ID：14150698
> 
> 赞同：-1
> 
> 时间：2013-01-04T03:31:10.507
> 
> 标签：tomcat7, restful-architecture

我已经创建了简单的 RESTful 服务，我已经编译它并使用 maven 创建了 jar 文件，然后我将 tomcat 7.0 服务器添加到项目中，并使用添加和删除添加了项目 RestfulService，当我尝试启动它抛出的 tomcat 时下面的错误，不知道是什么问题。当我尝试清理它时也会引发以下错误。

**整个错误日志**

```
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [314] milliseconds.
Jan 04, 2013 4:25:47 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\gopc\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\RestfulService\WEB-INF\lib\geronimo-j2ee_1.4_spec-1.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Jan 04, 2013 4:25:48 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RestfulService]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RestfulService]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: com/sun/jersey/core/util/FeaturesAndProperties
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.catalina.startup.ContextConfig.getServletContainerInitializer(ContextConfig.java:1658)
    at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1568)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1276)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: com.sun.jersey.core.util.FeaturesAndProperties
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 39 more

Jan 04, 2013 4:25:48 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Jan 04, 2013 4:25:48 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Jan 04, 2013 4:25:48 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3308 ms 
```

**Tomcat 服务器清洁**

*资源与文件系统不同步：'/RestfulService/target/classes/restfu/Hello.class'。*

**tomcat 服务器启动**

```
EVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RestfulService]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/RestfulService]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more 
```

**你好.java**

```
package restfu;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

// Plain old Java Object it does not extend as class or implements 
// an interface

// The class registers its methods for the HTTP GET request using the @GET annotation. 
// Using the @Produces annotation, it defines that it can deliver several MIME types,
// text, XML and HTML. 

// The browser requests per default the HTML MIME type.

//Sets the path to base URL + /hello
@Path("/hello")
public class Hello {

  // This method is called if TEXT_PLAIN is request
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String sayPlainTextHello() {
    return "Hello Jersey";
  }

  // This method is called if XML is request
  @GET
  //@Produces(MediaType.TEXT_XML)
  @Produces("application/xml")
  public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
  }

  // This method is called if HTML is request
  @GET
  @Produces(MediaType.TEXT_HTML)
  public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
        + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
  }

  // This method is called if JSON is request
  @GET
  //@Produces("appplication/json")
  @Produces(MediaType.APPLICATION_JSON)
  public String sayJsonHello() {
    return "{ \"HTML\": { \"title\": \"Hello Jersey\", \"body\": { \"h1\": \"Hello Jersey\" }}" ;
  }    
} 
```

**WEB.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>RestfulService</display-name>
  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>springapp</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>restfu</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <!-- <url-pattern>/jaxrs/*</url-pattern> -->
    <url-pattern>/webresources/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:23:02.427

问题解决了，实际上是ClassNotFoundException，我在projects/scr/main/lib中添加了lib文件夹并更改了maven以将依赖项复制到目标中，它工作正常。

# three.js - Three.js 对象大小恒定

> ID：14150703
> 
> 赞同：4
> 
> 时间：2013-01-04T03:32:12.417
> 
> 标签：three.js

我正在开发一个绘图程序，我需要的是一个具有恒定大小的 THREE.Object3D 元素 - 就像线条总是 1px 一样。换句话说，我试图将一个对象放在舞台上，该对象的大小对于观众来说总是相同的（**所以如果你靠近它，它的大小就不会改变**）。**与THREE.Line**类似的机制- 它总是 1px 宽。我需要创建一个**圆圈**（或者也可能是其他形状）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:35:49.570

听起来你需要使用正交相机——例如

```
var camOrtho = new THREE.OrthographicCamera(-width/2, width/2, height/2,-height/2, -100,100); 
```

如果“宽度”和“高度”是画布的大小。

只需使用它而不是典型的透视相机。

# php - 使用 bindParam() 允许字段为空

> ID：14150707
> 
> 赞同：1
> 
> 时间：2013-01-04T03:33:25.480
> 
> 标签：php, pdo

我有一个带有分页的搜索/过滤表单，所以我必须使用 $_GET 来获取 url 中的参数。现在我想使用还准备好的语句更安全。

问题是，如果我留下一个空白字段，我会收到错误消息。有没有办法绕过这个问题？我搜索了这个 wbsite，发现了研讨会问题，但它们都是关于将空字段插入数据库的。

```
$input = $_GET['input'];

$categories = $_GET['category'];
$state = $_GET['state'];
$zipcode = $_GET['zipcode'];
$targetpage = "send.php";
$limit = 3;

//This query checks for data
  $qq = " SELECT * FROM classified where confirm='0' ";
    if (!empty($input)) {
        $qq .= "AND title LIKE :input ";
    }
    if (!empty($categories) ){
        $qq .= "AND id_cat = :categories ";
    }

    if (!empty($state) ) {
        $qq .= "AND id_state = :state ";
    }

            if (!empty($zipcode) ) {
        $qq .= "AND zipcode = :zipcode ";
    }

    $qq .= "ORDER BY date DESC ";
    $qq = $db->prepare($qq);
   $input = "%".$input."%";
    // Bind the parameter
$qq->execute(array(':input'=> $input,
 ':categories'=> $categories,
 ':state'=> $state,
 ':zipcode'=> $zipcode  )); 
```

我得到的错误是

```
 PDOException: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined  
 in ....send.php on line 56 
```

这是 ':zipcode'=> $zipcode ));

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:41:14.937

构建查询时只需构建要绑定的数组

```
 $to_bind = array();
    if (!empty($input)) {
        $qq .= "AND title LIKE :input ";
        $to_bind[':input'] = $input;
    }
    if (!empty($categories) ){
        $qq .= "AND id_cat = :categories ";
        $to_bind[':categories'] = $categories ;
    }

    if (!empty($state) ) {
        $qq .= "AND id_state = :state ";
        $to_bind[':state'] = $state ;
    }

   if (!empty($zipcode) ) {
        $qq .= "AND zipcode = :zipcode ";
        $to_bind[':zipcode'] = $zipcode ;
   }
   ...
   $qq->execute($to_bind); 
```

我不确定传递一个空数组是否会导致问题，以防所有参数都为空。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T03:41:25.163

尽量不要重复自己。想象一下，如果您在搜索过滤器中有 50 个字段。

```
 $input = $_GET['input'];
  $categories = $_GET['category'];
  $state = $_GET['state'];
  $zipcode = $_GET['zipcode'];
  $targetpage = "send.php";
  $limit = 3;
  $Param = array();
 //This query checks for data
 $qq = " SELECT * FROM classified where confirm='0' ";
 if (!empty($input)) {
    $qq .= "AND title LIKE :input ";
    $Param[':input'] = $input;
}
if (!empty($categories) ){
    $qq .= "AND id_cat = :categories ";
    $Param[':categories'] = $categories ;
}

if (!empty($state) ) {
    $qq .= "AND id_state = :state ";
    $Param[':state'] = $state ;
}

        if (!empty($zipcode) ) {
    $qq .= "AND zipcode = :zipcode ";
    $Param[':zipcode'] = $zipcode ;
}

$qq .= "ORDER BY date DESC ";
$qq = $db->prepare($qq);
$qq->execute($Param); 
```

我希望这个能帮上忙

# python - 我可以为不同的规则使用不同的scrapy下载器吗？

> ID：14150710
> 
> 赞同：1
> 
> 时间：2013-01-04T03:33:58.217
> 
> 标签：python, scrapy

这是我的情况：我想抓取不同的页面使用不同的下载器：因为我们可以使用不同的 url-libs 来加载不同的网页，例如 urllib2/httplib。所以我想在下载器中间件文件中再创建两个下载函数。

```
def downloader1():
    use urllib2 to open url-type1

def downloader2():
    use scrapy default downloader to open url-type2 
```

我只是想是否有像下面这样的 url 解析规则的方法？对于不同的url，我们可以回调不同的downloader1或downloader2来下载页面。

另一个问题，我可以在同一个项目中为不同的蜘蛛使用不同的下载器吗？

# c# - 关闭记事本进程时出现异常，这是为什么？

> ID：14150717
> 
> 赞同：1
> 
> 时间：2013-01-04T03:34:42.017
> 
> 标签：c#

这是代码：

```
private void processNotePad_Exited(object sender, EventArgs e)
        {
            this.Invoke((MethodInvoker)delegate
            {
                View_Log_File.Enabled = true;
            });
        } 
```

在 Form1 中，我有一个菜单，我单击它并在那里打开一个新表单，我有一个按钮单击，使用 notepad.exe 打开一个日志文件（txt 文件）如果我先关闭记事本然后关闭菜单表单，一切正常。但是，如果我首先关闭菜单表单，然后在尝试关闭记事本后，我会遇到异常：

异常错误是：在创建窗口句柄之前，不能在控件上调用 Invoke 或 BeginInvoke

```
System.InvalidOperationException was unhandled
  HResult=-2146233079
  Message=Invoke or BeginInvoke cannot be called on a control until the window handle has been created.
  Source=System.Windows.Forms
  StackTrace:
       at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate method, Object[] args, Boolean synchronous)
       at System.Windows.Forms.Control.Invoke(Delegate method, Object[] args)
       at System.Windows.Forms.Control.Invoke(Delegate method)
       at mws.SettingsMenu.processNotePad_Exited(Object sender, EventArgs e) in D:\C-Sharp\Download File\Downloading-File-Project-Version-012\Downloading File\SettingsMenu.cs:line 148
       at System.Diagnostics.Process.OnExited()
       at System.Diagnostics.Process.RaiseOnExited()
       at System.Diagnostics.Process.CompletionCallback(Object context, Boolean wasSignaled)
       at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context(Object state, Boolean timedOut)
       at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context_f(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(Object state, Boolean timedOut)
  InnerException: 
```

在这种情况下我应该如何照顾？如果用户先关闭菜单表单，然后关闭记事本，则会抛出此异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:27:28.640

由于如果在记事本窗口之前关闭菜单窗体会出现错误，我建议您在菜单窗体关闭之前使用菜单窗体[FormClosing EventHandler](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing%28v=vs.100%29.aspx)关闭记事本窗口。

从上面的链接：

> FormClosing 事件在窗体被关闭时发生。当表单关闭时，它会被释放，释放与表单相关的所有资源。如果您取消此事件，表单将保持打开状态。要取消关闭窗体，请将传递给事件处理程序的 FormClosingEventArgs 的 Cancel 属性设置为 true。

# algorithm - 最大平方堆积的图算法

> ID：14150729
> 
> 赞同：3
> 
> 时间：2013-01-04T03:35:28.773
> 
> 标签：algorithm, graph, graph-algorithm

我有一个连接正方形的区域（左侧的 img），并且想要找到可以适合该区域的“双”正方形的最大数量（右侧的 img）。

我的方法是将原始区域表示为图形，其中每个正方形代表一个顶点，该顶点通过边连接到下方、上方、左侧和/或右侧的正方形。

我在想这可以通过使用 BFS 算法，检查每个顶点并应用颜色来完成。但我也觉得它可以通过动态编程来完成......我需要一些帮助！

![在此处输入图像描述](../Images/568dfcdce2cdeb03263ed0de5fa6bc03.png)![在此处输入图像描述](../Images/31569e40cd4a7c87ebd039f7bbe582b4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T05:30:26.733

## 引理 1：

如果我们将正方形视为图中的顶点，由于其特殊结构，该图是二分图。将每个顶点的边连接到其所有邻域顶点。

## 证明：

如果我们将每个正方形都涂成白色或黑色，我们可以形成没有两个黑色相邻，也没有两个白色相邻，所以图中的边只在一个黑色和一个白色之间。

## 算法：

构建二部图后，可以求***二部图***的最大匹配，最大匹配的值就是答案。您可以使用匈牙利算法或更快的 Hopcroft-Karp 算法来计算答案。

# ruby-on-rails - Rails 数据模型按日期对实体进行分组

> ID：14150739
> 
> 赞同：0
> 
> 时间：2013-01-04T03:36:53.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, data-modeling

开发一个类似于日报的 Web 应用程序。用户可以为给定日期维护几个不同的数据列表。为了便于讨论，假设我们有两个模型，Notes 和 Tasks。

我想向用户展示他们可以通过显示每个日期的数据进行导航的日期视图。也许在严格的列表视图中，例如：

```
Jan 1
======
Tasks: 1 - First task is here
       2 - Second task is here

Notes: 1 - First note is here

Jan 4
=====
Tasks:  No tasks

Notes:  1 - A note is here.
        2 - Another note...

<< Older Entries        Newer Entries >> 
```

或者可能呈现为具有日期的日历，该日期具有以某种方式标记或突出显示的相应数据。

我开始将我的模型构建为 Notes 和 Tasks，每个都有一个 journal_date。这在独立导航每个模型索引时工作正常。例如 myapp.com/notes/ 或 myapp.com/tasks/ 但我不确定将每个列表合并到一个按日期分组的视图中会有多困难。

我还考虑过有一个名为 JournalEntry 的模型，它有一个 journal_date、has_many notes 和 has_many 任务。那么笔记和任务将没有日期，但它们每个都属于具有日期的 journal_entry。我认为这会简化一些事情。但是我已经阅读了一些博客文章，其中说尽可能远离嵌套资源。所以像：myapp.com/nick/journal_entries/2012-dec-23/​​tasks/ 他们说要远离，因为代码变得复杂。

所以我想知道一些更有经验的 Rails 开发人员会如何解决这个问题？您会使用哪种方法，或者您会以完全不同的方式处理它？

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:22:21.733

在不更改模型设置的情况下执行此操作的一种方法是将每个模型范围分组到 journal_date 列上，然后遍历组哈希中的唯一键列表，如下所示：

```
# Controller
since_date = DateTime.now - 30.days
@tasks = Task.where("journal_date > ?", since_date).group_by(:journal_date)
@notes = Note.where("journal_date > ?", since_date).group_by(:journal_date)
@date_entries = (@tasks.keys + @notes.keys).uniq

# View
<% @date_entries.each do |date_entry| %>
  <h1><%= date_entry.to_s %></h1>
  <h2>Tasks</h2>
  <% if @tasks[date_entry].any? %>
    <% @tasks[date_entry].each do |task| %>
      <p><%= task.title %></p>
    <% end %>
  <% else %>
    <p>No Tasks</p>
  <% end %>

  <h2>Notes</h2>
  <% if @notes[date_entry].any? %>
    <% @notes[date_entry].each do |note| %>
      <p><%= note.title %></p>
    <% end %>
  <% else %>
    <p>No Notes</p>
  <% end %>
<% end %> 
```

该`since_date`部分当然只是为检索到的记录设置一些条件的示例。

并且`group_by(:journal_date)`仅当列的类型为 Date 而不是 DateTime 时才有效。如果它是 DateTime 那么你可以这样解决它：

```
group_by { |journal_date| journal_date.to_date } 
```

# ruby - axlsx 的 add_row 的替代品

> ID：14150744
> 
> 赞同：0
> 
> 时间：2013-01-04T03:37:35.293
> 
> 标签：ruby, axlsx

在以下代码中，`happy_path`有效，但无效`sad_path`：

```
require "axlsx"

def happy_path
  package = Axlsx::Package.new
  workbook = package.workbook
  worksheet = workbook.add_worksheet
  worksheet.add_row(["Hot", "Summer", "Night"])
  cell = worksheet.name_to_cell("A1")
  cell.value = "Cold"
  package.serialize("Happy_path_20130104.xlsx")
end

def sad_path
  package = Axlsx::Package.new
  workbook = package.workbook
  worksheet = workbook.add_worksheet
  worksheet.add_row(["Hot", "Summer", "Night"])
  cell = worksheet.name_to_cell("E1")
  begin
    cell.value = "Meatloaf"
  rescue NoMethodError
    STDERR.puts $!
  end
  package.serialize("Sad_path_20130104.xlsx")
end

happy_path
sad_path 
```

`sad_path`给出错误

```
undefined method `value=' for nil:NilClass 
```

因为`cell`是零。

[http://rubydoc.info/github/randym/axlsx/Axlsx/Cell](http://rubydoc.info/github/randym/axlsx/Axlsx/Cell)和文档的其他部分警告：

> 注意：生成单元格的推荐方法是通过 Worksheet#add_row

问题是我希望能够将数据添加到 A1、B1 和 C1，然后再将数据添加到 E1、F1 和 G1。

有没有办法做到这一点？或者我应该存储 A1、B1、C1 和 E1、F1 和 G1 的数据，并一次将其全部添加到工作表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:14:53.420

在将这样的方法添加到库之前，我希望看到更多讨论。Axlsx 有意稀疏以最小化序列化时间。如果您可以在 github 上提交拉取请求，那真的会对每个人都有帮助。同时，如果您发送 nil 值，则将根据您的要求创建单元格。

例如：

```
add_row ["foo", nil, nil] 
```

将创建 A1...C1 单元格，您可以直接访问这些单元格的方法。

# java - 调用 JNI_CreateJavaVM 会使程序崩溃

> ID：14150746
> 
> 赞同：6
> 
> 时间：2013-01-04T03:37:40.780
> 
> 标签：java, assembly, jvm, java-native-interface, jrockit

我有一个 C DLL，它使用 JNI 代理对执行实际举重的底层 java 程序的任何调用。我正在动态加载 jrockit jvm.dll 以进行函数调用。

供应商 A 有一个 C# DLL，它实际上调用了我的 C DLL，而另一个供应商 B 有一个 C# 程序，它调用了供应商 A 的 C# DLL。

使用供应商 A 的 C# DLL 进行测试时没有任何问题，但在与供应商 B 的 C# 程序集成后，我通过 JNI_CreateJavaVM 初始化 JVM 的调用会导致整个程序崩溃。

任何帮助，将不胜感激。

我收到的错误消息是：

```
[ERROR] Could not find allocated thread local data key in TIB
[ERROR] Could not create fast TLD
JRockit aborted: Unspecified Error(52)
Assertion failed: Could not create fast tld 
In vmDebug Before Abort() (src/jvm/runtime/debug/debug.c:103) 
```

编辑 1：好的，我已经反汇编了 jvm.dll，它调用 TlsAlloc，然后调用 TLSSet 并到达显示错误消息的代码，第二个图像中 je SHORT 04755D4B 之前的 cmp esi、edx 不能相等。

第一个图像中调用 04755DD0 的内容在第二个图像中。

有谁知道之前的计算（操作 esi 和 edx 的 1）是做什么的？

![拆卸 1](../Images/3243d00b9db850d72dbdaf853f5fc3c8.png) ![拆卸 2](../Images/e6be168d3dcf034a66cfe6966bc41333.png)

编辑 2：（响应 PT）我没有设置任何特定的线程系统，所以我想它使用的是默认的线程系统，根据这里：[http ://docs.oracle.com/cd/E13222_01/ wls/docs81b/jrockit/threads.html](http://docs.oracle.com/cd/E13222_01/wls/docs81b/jrockit/threads.html)

你的猜测很可能是正确的，在查看反汇编时，我发现代码逻辑是这样的，它首先调用 TlsAlloc 然后调用 TlsSetValue 将 TlsAlloc 返回的索引处的线程本地存储设置为常量幻数4711 之后它使用 eip 从线程信息块的开头循环查找值 4711，一旦找到它，代码然后再次调用 TlsSetValue 将值设置为 1147，此时它检查 eip 是否实际指向通过确保将 [eip] 设置为 1147 来获取线程本地存储。

供应商 B 在他们的程序中使用 C#，因此，他们将使用 CLR 虚拟机。一旦它到达供应商 B 调用我的 DLL 的点，他们将已经初始化 WPF prism 和 mef 框架，将所有接口模块加载到各自的位置，初始化所有单例（WPF prism 术语中的导出）模型并初始化 MS 工作流。但是，当我将初始化代码移至前几行时，jvm 初始化成功（这不是初始化 jvm 的正确位置，我们尚未测试其余代码是否有效）。

代码仅在 TlsSetValue 失败时分支到错误，是否有任何原因导致 TlsSetValue 失败？我应该在供应商 B 的代码中寻找可能导致问题的哪些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:52:45.640

我遇到了同样的错误，我设法弄清楚发生了什么，至少在我的情况下。它看起来像 JRockit 中的一个错误，您的问题对调查它非常有帮助。

对放置在槽中的“幻数”执行的搜索从 TEB 的开头开始延伸到两页数据。但是，TEB 本身只有 64 个存储槽。请参阅[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686708(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686708(v=vs.85).aspx)。

如果分配的存储槽的索引为 64 或更高，Windows 不会将数据放入嵌入式数组中，而是将其放入 TlsExpansionSlots 指针指向的块中。由于这在 TEB 之外，因此对幻数的搜索会失败，并且 JRockit 会产生此错误。

我的这种情况也发生在 .NET 程序中。我的猜测是 CLR 大量使用 TLS，从而更有可能分配高插槽号。

就我而言，JRockit 在尝试写入日志行时实际上崩溃了，可能是因为它发生得太早以至于尚未创建日志。不确定您使用的是哪个版本的 JRockit。我的是：

```
C:\>java -version
java version "1.6.0_14"
Java(TM) SE Runtime Environment (build 1.6.0_14-b08)
BEA JRockit(R) (build R27.6.5-32_o-121899-1.6.0_14-20091001-2107-windows-ia32, compiled mode) 
```

我不知道这是否在以后的修订中得到解决。如果不是，我们（即我的雇主）可能不得不向甲骨文提出。

# jquery - 关于jquery切换父元素增加

> ID：14150747
> 
> 赞同：-1
> 
> 时间：2013-01-04T03:37:48.750
> 
> 标签：jquery, this, parent

```
$(".user_img").click(function() {
if ($(".user-insert-image").css("display") == 'none') {
    $(".user-upload-image").hide();
    $(".user-insert-image").show();
} else {
    $(".user-insert-image").hide();
    $(".user-upload-image").show();
} }); 
```

只有第一个元素可用，添加元素不可用

[工作小提琴](http://jsfiddle.net/gWBNg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:42:10.383

那是因为您正在动态生成元素。您应该委托该事件：

```
$('.main').on('click', '.user_img', function() { 
```

您还需要使用`this`关键字，您当前的逻辑隐藏/显示所有元素。

```
$('.main').on('click', ".user_img", function() {
    var $this = $(this).parent();
    if ($this.hasClass('user-insert-image')) {
        $this.hide().prev().show()
    } else {
        $this.hide().next().show()
    }
}); 
```

[http://jsfiddle.net/dUQF6/](http://jsfiddle.net/dUQF6/)

# c++ - 删除 QComboBox“下拉”动画

> ID：14150748
> 
> 赞同：2
> 
> 时间：2013-01-04T03:37:59.480
> 
> 标签：c++, qt, windows-7

我正在使用 Qt 4.8，并希望在单击 QComboBox 时摆脱“下拉”动画。我也想稍微动一下。到目前为止，我一直在研究重新实现 showPopup 和 hidePopup，但不知道如何使其工作。

此外，每次我尝试使用 CSS 移动或设置样式时，总会有一个白色背景。（见图）。任何帮助，将不胜感激。

![在此处输入图像描述](../Images/45a9b08d291bffb560c3dca8e6114cdd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T05:18:10.670

使用[QApplication::setEffectEnabled](http://doc.qt.digia.com/qt/qapplication.html#setEffectEnabled)：

```
QApplication::setEffectEnabled(Qt::UI_AnimateCombo, false); 
```

# openerp - 在 OpenERP 6 中制作新的简单模块

> ID：14150749
> 
> 赞同：3
> 
> 时间：2013-01-04T03:38:11.297
> 
> 标签：openerp

我有制作新简单模块的教程`OpenERP 6`，我制作了 4 个文件：

```
1\. __init__.py
2\. __openerp__.py
3\. sim.py
4\. sim_view.xml 
```

完成所有操作后，我重新启动了我的服务`OpenERP`，然后创建了一个新数据库并刷新了我的`OpenERP`. 然后我以管理员身份登录，但我找到了我的模块“sim”，但是当我尝试安装它时，出现`"NameError: name 'osv' is not defined".`错误是怎么回事？

真的需要你们的帮助！

`__init__.py`：

```
import sim 
```

`sim.py`：

```
class student(osv.osv):
    _name = "sim.student"
    _description = "This table is for keeping personal data of student"
    _columns = {
        'name': fields.char('Registration Number',size=256,required=True),
        'student_name': fields.char('Student Name',size=256,required=True),
        'father_name': fields.char('Father Name',size=256),
        'gender':fields.selection([('male','Male'),('female','Female')],'Gender'),
        'contact_no':fields.char('Contact Number',size=256)
    }
student() 
```

`__openerp__.py`：

```
{
'name': 'Student Information Management',
'version': '0.1',
'category': 'Tools',
'description': """This module is for the Student Information Management.""",
'author': 'Mir Nauman&nbsp;Tahir',
'website': 'http://mirnauman.wordpress.com/',
'depends': ['base'],
'init_xml': [],
'update_xml': ['sim_view.xml'],
'demo_xml': [],
'installable': True,
} 
```

`sim_view.xml`：

```
<?xml version="1.0"?>
<openerp>
<data>
<!-- ============== student================= -->
<!-- 1st part of the sim_view start-->
<record model="ir.ui.view" id="student_form">
<field name="name">Student</field>
<field name="model">sim.student</field>
<field name="type">form</field>
<field name="arch" type="xml">
<form string="Student">
<field name="name"/>
<field name="student_name"/>
<field name="father_name"/>
<field name="gender"/>
<field name="contact_no"/>
</form>
</field>
</record>
<!-- 1st part of the sim_view end-->
<!--2nd part of the sim_view start-->
<record model="ir.ui.view" id="student_tree">
<field name="name">Student</field>
<field name="model">sim.student</field>
<field name="type">tree</field>
<field name="arch" type="xml">
<tree string="Student">
<field name="name"/>
<field name="student_name"/>
<field name="father_name"/>
<field name="gender"/>
<field name="contact_no"/>
</tree>
</field>
</record>
<!--2nd part of the sim_view end-->
<!-- 3rd part of the sim_view start-->
<record model="ir.actions.act_window" id="action_student">
<field name="name">Student</field>
<field name="res_model">sim.student</field>
<field name="view_type">form</field>
<field name="view_mode">tree,form</field>
</record>
<!--3rd part of the sim_view end-->
<!--4th part of the sim_view start-->
<menuitem&nbsp;name="SIM/Student/StudentInfo" id="menu_sim_student" action="action_student"/>
<!--4th part of the sim_view end-->
</data>
</openerp> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:40:40.413

从 6.1 开始，`osv`已[弃用](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/head:/openerp/osv/osv.py#L205)。您的`sim.py`文件应以：

```
from openerp.osv import fields, orm

class student(orm.Model):
    #model definitions go here... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T08:29:03.173

添加新字段还需要以下内容

```
from osv import osv,fields 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T07:48:20.063

你`from osv import osv`在`sim.py`文件中提到过吗？

请按照[创建模块](http://doc.openerp.com/v6.1/developer/03_modules_1.html)页面中的步骤进行操作。

注意：如果您在`sim.py`文件中导入 osv，则检查`PYTHONPATH`变量是否包含 openerp 的基本目录。

# android - 为什么我们不能在 Android 编程中调用目标活动的方法？

> ID：14150751
> 
> 赞同：-1
> 
> 时间：2013-01-04T03:38:36.413
> 
> 标签：android, ios, android-activity, viewcontroller

我正在研究 iOS 和 Android 编程，我发现它们之间存在差异。

在 iOS 编程中，我们可以向目标视图控制器发送消息来设置它，但在 Android 编程中，它们似乎甚至没有提供对活动的引用。虽然我们可以通过将一些额外的信息放入 Intent 中来将一些额外的信息传递给目标活动，但传递一个复杂的对象并不容易。

我想知道为什么在 Android 编程中我们不能调用目标活动的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:44:31.550

从 iOS 开发到 Android 开发时，我同样感到惊讶，这就是我的发现。

在 Android 中，每个活动都被视为一个独立的单元。由该活动从与给定的原始参数匹配的数据源中检索信息。事实上，大部分 Android 开发都是关于创建这些独立的工作单元，它们可以显示信息、处理事件、向第三方提供数据等。

Objective-C 遵循更传统的从一个视图移动到另一个视图的方法。从外部应用程序接收消息的开发人员知道要显示哪个控制器的视图。

# ms-access - 从 WIX 安装程序读取 Access 数据库

> ID：14150752
> 
> 赞同：4
> 
> 时间：2013-01-04T03:38:51.520
> 
> 标签：ms-access, wix

运行使用 WIX 构建的安装程序时是否可以读取访问数据库？我看到有 SqlExtension 和 UtilExtension 部分，但所有示例似乎都认为它是一个 SQL 数据库。我想在安装期间从表中读取记录，并为每条记录提示安装程序输入数据。我假设我可以执行文件搜索来定位 MDB 的位置，并且我会知道访问正在读取的表所需的密码。

我没有使用很多 WIX，所以任何帮助解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:38:53.117

由于 Wix SqlExtension 不允许您设置提供程序类型，我非常怀疑这是可能的。此外，您将无法在 Wix 安装程序中循环并提示用户输入数据，因为不支持 AFAIK（好吧，我从来没有弄清楚如何去做！）。

根据您对要提示的数据所做的操作，您有几个选择。

1.  如果您需要将数据保存回 Access Db，我会说您最好的选择是在您的应用程序首次运行时合并数据设置（或创建一次性运行设置应用程序）并使用 wix 自动在安装结束时运行它。
2.  第二种选择是使用 Burn 创建一个更加用户友好的基于 .net 的安装程序，该安装程序引导在您的应用程序中创建的 msi，同时还捕获您需要的数据并执行您需要执行的任何其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:26:04.917

您可以编写自定义操作来查询 MDB 并设置 MSI 属性。然后您可以在注册表元素中使用这些属性。

# iphone - UINavigation 过渡口吃

> ID：14150754
> 
> 赞同：0
> 
> 时间：2013-01-04T03:38:59.607
> 
> 标签：iphone, ios, cocoa-touch, uinavigationcontroller, uiimagepickercontroller

我有一个`UIImagePickerController`允许用户拍照，然后我将其存储在`UIImageView`如下：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissModalViewControllerAnimated:YES];
    self.photoImageView.image = nil;
    [self.activityIndicatorView startAnimating];

    dispatch_async(dispatch_get_global_queue(0, 0), ^
    {
        UIImage *image = [[info objectForKey:@"UIImagePickerControllerOriginalImage"] retain];
        dispatch_async(dispatch_get_main_queue(), ^
        {
            self.photoImageView.image = image;
            [self.activityIndicatorView stopAnimating];
            self.rightButton.enabled = YES;
            [image release];
        });

    });
} 
```

当我将此图像作为参数传递给下一个`UIViewController`被推送到导航堆栈上的图像时，`UINavigation`过渡会结结巴巴并且非常不稳定/丑陋。我已经完成了一个配置文件，我的代码中没有任何东西真正突出。

我知道用相机拍摄的照片可能很大，但如果我只是传递对它的引用，那为什么会对任何事情产生影响？我的照片库中有我拍摄的照片，当我从那里选择它们并将它们传递到下一个过渡时，一切都很顺利。

任何人都对可能导致这种情况的原因有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:52:52.657

可能是因为调整大小的过程发生在新 UIViewController 被推送到导航堆栈时。

假设从 iPhone 4 相机拍摄的照片具有 2592 x 1936 分辨率（http://stackoverflow.com/questions/3270202/what-is-resolution-of-photo-taken-by-iphone-4-camera）。您的 UIImageView 的大小为 400 x 300px，然后调整大小的过程将在 viewWillAppear 中进行，这可能会使您的过渡卡顿。

几个解决方法：

1.  在 viewDidAppear 中显示图像，只需保留对图像的引用并将其设置为 viewDidAppear 中的 imageView.image 即可。

2.  在显示之前先调整图片的大小，比如 640 x 960。

# java - Android从手机中完全删除状态栏？（所有应用全屏）

> ID：14150756
> 
> 赞同：2
> 
> 时间：2013-01-04T03:39:34.503
> 
> 标签：java, android

我正在为视力不好的人构建一个家庭替代应用程序。我想从手机中完全删除状态栏。

我知道如何删除启动器上的状态栏：

```
<style name="Theme" parent="android:Theme">
    <item name="android:windowFullscreen">true</item>
</style> 
```

但我不知道如何从所有应用程序中删除它。如何做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:45:11.247

> 但我不知道如何从所有应用程序中删除它。如何做呢？

第 1 步：将源代码下载到 Android。

步骤#2：修改操作系统以使用状态栏执行其他操作。

步骤#3：编译源代码并将其倒入您安装在设备上的 ROM 模块中。

您无权从 SDK 应用程序侵入其他开发人员编写的其他应用程序并对其进行更改。

# python - % 与 + 与 Python 中的字符串有关吗？

> ID：14150758
> 
> 赞同：1
> 
> 时间：2013-01-04T03:40:39.900
> 
> 标签：python, syntax

这个：

```
hilarious = False
joke_evaluation = "Isn't that joke so funny?! %r"

print joke_evaluation % hilarious 
```

和这个：

> w = "这是...的左边" e = "一个有右边的字符串。"
> 
> 打印 w + e

似乎在做同样的事情。为什么我不能将代码更改为：

```
print joke_evaluation + hilarious 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:45:40.520

`%r`调用`repr()`，将`False`(bool) 表示为`"False"`(string)。

`+`只能用于连接一个字符串和其他字符串（否则你会得到一个`TypeError: cannot concatenate 'str' and 'bool' objects`）

您可以`False`在连接之前将其转换为字符串：

```
>>> print "Isn't that joke so funny?!" + str(False) 
```

您还可以尝试新的字符串格式：

```
>>> print "Isn't that joke so funny?! {!r}".format(False)
Isn't that joke so funny?! False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T03:43:08.180

这是一个类型转换问题。在 Python 中尝试连接字符串时，只能连接其他字符串。您正在尝试将布尔值连接到字符串，这不是受支持的操作。

你可以做

```
print w + str(e) 
```

那将是功能性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:15:22.333

这让我感到困惑：

```
hilarious = False
joke_evaluation = "Isn't that joke so funny?! %r"

print joke_evaluation % hilarious 
```

我希望它看起来像这样：

```
hilarious = False
joke_evaluation = "Isn't that joke so funny?! %r" % hilarious

print joke_evaluation 
```

我想它在我眼里看起来很时髦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-10T03:51:44.353

这对我来说也很困惑，但似乎由于它是一个布尔值，你不能使用 +。

如果你这样做，你会收到这样的错误：

```
TypeError: cannot concatenate 'str' and 'bool' objects 
```

# php - SQL PHP：记录集导航未显示所有数据

> ID：14150759
> 
> 赞同：1
> 
> 时间：2013-01-04T03:40:40.580
> 
> 标签：php, sql, web, navigation, recordset

我正在使用 SQL 数据库在 Dreamweaver 中创建一个个人博客，并且我已经设置了记录集导航以“翻转”SQL 数据库中的所有博客文章。问题是我在 SQL 数据库中有大约 84 篇博客文章，但其中只有 15 篇可以通过记录集导航访问。我将如何使它能够“翻阅”SQL 数据库中的所有博客文章。

这是页面的代码；

```
<?php require_once('Connections/blog.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$currentPage = $_SERVER["PHP_SELF"];

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_blog, $blog);
$query_getArchives = "SELECT DISTINCT DATE_FORMAT(news.updated, '%M %Y') AS archive, DATE_FORMAT(news.updated, '%Y-%m') AS link FROM news ORDER BY news.updated DESC";
$getArchives = mysql_query($query_getArchives, $blog) or die(mysql_error());
$row_getArchives = mysql_fetch_assoc($getArchives);
$totalRows_getArchives = mysql_num_rows($getArchives);

mysql_select_db($database_blog, $blog);
$query_getRecent = "SELECT news.post_id, news.title FROM news ORDER BY news.updated DESC LIMIT 10";
$getRecent = mysql_query($query_getRecent, $blog) or die(mysql_error());
$row_getRecent = mysql_fetch_assoc($getRecent);
$totalRows_getRecent = mysql_num_rows($getRecent);

$maxRows_getDisplay = 10;
$pageNum_getDisplay = 0;
if (isset($_GET['pageNum_getDisplay'])) {
  $pageNum_getDisplay = $_GET['pageNum_getDisplay'];
}
$startRow_getDisplay = $pageNum_getDisplay * $maxRows_getDisplay;

mysql_select_db($database_blog, $blog);
$query_getDisplay = "SELECT news.title, news.pre,  DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC";
$query_limit_getDisplay = sprintf("%s LIMIT %d, %d", $query_getDisplay, $startRow_getDisplay, $maxRows_getDisplay);
$getDisplay = mysql_query($query_limit_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);

if (isset($_GET['totalRows_getDisplay'])) {
  $totalRows_getDisplay = $_GET['totalRows_getDisplay'];
} else {
  $all_getDisplay = mysql_query($query_getDisplay);
  $totalRows_getDisplay = mysql_num_rows($all_getDisplay);
}
$totalPages_getDisplay = ceil($totalRows_getDisplay/$maxRows_getDisplay)-1;

$queryString_getDisplay = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_getDisplay") == false && 
        stristr($param, "totalRows_getDisplay") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_getDisplay = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_getDisplay = sprintf("&totalRows_getDisplay=%d%s", $totalRows_getDisplay, $queryString_getDisplay);

$var1_getDisplay2 = "-1";
if (isset($_GET['archive'])) {
  $var1_getDisplay2 = $_GET['archive'];
  $query_getDisplay = sprintf("SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));
} elseif (isset($_GET['post_id'])) {
  $var2_getDisplay3 = $_GET['post_id'];
  $query_getDisplay = sprintf("SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.post_id = %s", GetSQLValueString($var2_getDisplay3, "int"));
} else {
  $query_getDisplay = "SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT ".$pageNum_getDisplay.", 5";
}
$getDisplay = mysql_query($query_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);
?>
<!doctype html>
<!--[if lt IE 7]> <html class="ie6 oldie"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 oldie"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 oldie"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Home - Robdogga55's Paradise</title>
<link href="styles/boilerplate.css" rel="stylesheet" type="text/css">
<link href="styles/blog.css" rel="stylesheet" type="text/css">
<style type="text/css">
body,td,th {
    font-size: 14px;
}
</style>
<!-- 
To learn more about the conditional comments around the html tags at the top of the file:
paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/

Do the following if you're using your customized build of modernizr (http://www.modernizr.com/):
* insert the link to your js here
* remove the link below to the html5shiv
* add the "no-js" class to the html tags at the top
* you can also remove the link to respond.min.js if you included the MQ Polyfill in your modernizr build 
-->
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="styles/respond.min.js"></script>
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_blog_entryloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_blog_entryloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>
</head>

<body onLoad="MM_blog_entryloadImages('/test/images/buttons/readmore2.gif')">
<div id="LayoutDiv3">
<?php include 'header.php'; ?>
<div id="about_box">
G'day,</p>
    <p style="text-align: left;">I'm Rob, now you might be asking who is this kid? Just some noob looking for attention? No I am a teen who lives in Australia.</p>
    <p style="text-align: left;">This is my personal blog, but I also use to to promote my videos on YouTube and to tell people about my public Minecraft server. <br /><div align="center"><a href="/blog_test/about.php"><img id="readmore" src="images/buttons/readmore.gif"></a></div></p>
</div>
<div id="recent">
  <h3>Recent Posts</h3>
  <ul>
    <?php do { ?>
      <li><a href="post.php?post_id=<?php echo $row_getRecent['post_id']; ?>"><?php echo $row_getRecent['title']; ?></a></li>
      <?php } while ($row_getRecent = mysql_fetch_assoc($getRecent)); ?>
  </ul>
  <h3>Archives</h3>
  <ul>
    <?php do { ?>
      <li><a href="archive.php?archive=<?php echo $row_getArchives['link']; ?>"><?php echo $row_getArchives['archive']; ?></a></li>
      <?php } while ($row_getArchives = mysql_fetch_assoc($getArchives)); ?>
  </ul>
  <br />
  </div>
<?php do { ?>
  <div id="blog_posts_container">
  <h3><?php echo $row_getDisplay['title']; ?></h3>
  <p class="update">Posted on <?php echo $row_getDisplay['formatted']; ?></p>
  <div class="blog_entry" id="blog_posts">
    <p><?php echo nl2br($row_getDisplay['blog_entry']); ?></p>
  </div></div>
  <?php } while ($row_getDisplay = mysql_fetch_assoc($getDisplay)); ?>
  <div id="blog_posts_container">
    <table border="0">
      <tr>
        <td><?php if ($pageNum_getDisplay > 0) { // Show if not first page ?>
            <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, 0, $queryString_getDisplay); ?>">First</a>
            <?php } // Show if not first page ?></td>
        <td><?php if ($pageNum_getDisplay > 0) { // Show if not first page ?>
            <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, max(0, $pageNum_getDisplay - 5), $queryString_getDisplay); ?>">Previous</a>
            <?php } // Show if not first page ?></td>
        <td><?php if ($pageNum_getDisplay < $totalPages_getDisplay) { // Show if not last page ?>
            <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, min($totalPages_getDisplay, $pageNum_getDisplay + 5), $queryString_getDisplay); ?>">Next</a>
            <?php } // Show if not last page ?></td>
        <td><?php if ($pageNum_getDisplay < $totalPages_getDisplay) { // Show if not last page ?>
            <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, $totalPages_getDisplay, $queryString_getDisplay); ?>">Last</a>
            <?php } // Show if not last page ?></td>
      </tr>
    </table>
  </div>
</div>
</div>
</div>
</body>
</div>
</html>

<?php
mysql_free_result($getArchives);

mysql_free_result($getRecent);

mysql_free_result($getDisplay);
?> 
```

谢谢，如果你能提供帮助，我已经为此烦恼了很久。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:19:49.070

我通过改变让它工作

```
$maxRows_getDisplay = 10; 
```

到

```
$maxRows_getDisplay = 1; 
```

# bash - 将 Bash 脚本中的变量设置为文件内容以及之后的一些文本

> ID：14150762
> 
> 赞同：3
> 
> 时间：2013-01-04T03:41:04.607
> 
> 标签：bash

如何在redhat Linux的shell脚本中将Bash变量设置为文件的内容，该文件只有一行，然后在其后添加一些文本。

例如：

```
echo "Version 1.2.3.4" > $TMPDIR/devver
env=dev
export ${env}_result="`cat $TMPDIR/${env}ver` (No response - version is from cache)"
echo $dev_result 
```

我希望输出为：

```
Version 1.2.3.4  (No response - version is from cache) 
```

相反，我在版本之后得到一个换行符，如下所示：

```
Version 1.2.3.4
(No response - version is from cache) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:43:54.187

您的问题不在文件创建中的变量设置中。echo 将换行符附加到文件内容。所以使用

```
echo -n "Version..." 
```

事情应该会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:09:02.077

Use a bash builtin:

```
export ${env}_result="$(< $TMPDIR/${env}ver) (No response - version is from cache)"
echo "$dev_result" 
```

Documented [here](http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution): "The command substitution `$(cat file)` can be replaced by the equivalent but faster `$(< file)`."

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T03:45:30.440

该实用程序`tr`可能会有所帮助：

```
echo "Version 1.2.3.4" | tr '\n' ' '> $TMPDIR/devver
env=dev
export ${env}_result="`cat $TMPDIR/${env}ver` (No response - version is from cache)"
echo $dev_result 
```

经过测试:)它有效。

# hadoop - 级联 Hadoop 文件加载 - 处理跨越换行符的记录的方法？

> ID：14150763
> 
> 赞同：0
> 
> 时间：2013-01-04T03:41:11.087
> 
> 标签：hadoop, split, newline, record, cascading

我正在使用 Hadoop 处理分布在 JVM 实例集群中的一些文件。

我正在使用 Cascading 库与 Hadoop 交互。

我想解析一个文本文件，其中记录跨越换行符并以句点终止：（。）

（我知道这太小了，没有意识到 Hadoop 的好处——我正在做一个演示）。

据我所知 - 我需要编写一个自定义[InputFormat](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/InputFormat.html)来处理这个问题。

我的问题是 - 这样做更好#：

(a) 对我的输入数据进行预处理以去除换行符，然后在每条记录的末尾插入换行符？

(b) 编写自定义 InputFormat？

# 通过“更好” - 我的意思是更少的工作和更多的惯用语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:03:18.797

实际上，您可以根据自己的要求权衡每种方法的利弊。但我个人建议编写自定义 InputFormat 和 RecordReader 来读取您的输入数据，如果您必须编写预处理应用程序只是为了转换一种类型的文本文件（记录跨换行符并以句点终止）。如果您期望将来会出现更多非正统的文本文件格式，那么预处理器将是理想的，以便预处理器可以在发送到 Map/Reduce 之前将所有不同的格式转换为中间格式。

阅读本[教程](http://developer.yahoo.com/hadoop/tutorial/module5.html#inputformat)以了解如何编写自定义 InputFormat 和 RecordReader。

# java - Maven 资源过滤是否支持条件？

> ID：14150767
> 
> 赞同：4
> 
> 时间：2013-01-04T03:41:40.493
> 
> 标签：java, maven, velocity

我想知道是否有办法`if`在 Maven 资源过滤中执行 -conditions 。例如，允许我做的事情：

一些文件.txt：

```
...
#if($some.project.property == true)
  some text to include here
#endif
... 
```

类似于速度的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:53:34.797

简单的回答没有。但是如果你真的需要条件，你可以看看[velocity-maven-plugin](http://code.google.com/p/velocity-maven-plugin/wiki/HowToUseThePlugin)，它可以解决你的问题，但它不是为了过滤资源，而是你的用例，它可能会起作用。

```
 <plugin>
    <groupId>com.googlecode.velocity-maven-plugin</groupId>
    <artifactId>velocity-maven-plugin</artifactId>
    <version>1.0.0</version>
    <configuration>
            <templateFiles>
                    <directory>/src/main/resources</directory>
                    <includes>
                            <include>*.vm</include>
                    </includes>
            </templateFiles>
            <templateValues>
                    <test>foo</test>
            </templateValues>
    </configuration>
 </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T14:21:30.117

在某些情况下，简单地设置一个属性（每个配置文件）可能很有用。

```
<yourProperty><![CDATA[
    <your>
        <block>of code</block>
    </your>
    ]]></yourProperty> 
```

如果您不想要代码块，请将属性设置为空字符串。

例如，我使用它来将一个注入`<data-source>`到我`web.xml`的开发版本中。

# c - 在 Ubuntu 和 OSX 上编译和链接 OpenSSL

> ID：14150772
> 
> 赞同：5
> 
> 时间：2013-01-04T03:42:14.377
> 
> 标签：c, linux, macos, gcc

**尝试 1，香草链接到图书馆**

我正在尝试使用 OpenSSL 的修补版本（因此 DTLS 更易于使用）。OpenSSL 在

```
/usr/local/openssl-1.0.1c 
```

./include/openssl 子文件夹有大量的头文件（我认为应该如此）：

```
lrwxrwxrwx 1 root root   22 Dec 25 05:49 aes.h -> ../../crypto/aes/aes.h
lrwxrwxrwx 1 root root   24 Dec 25 05:49 asn1.h -> ../../crypto/asn1/asn1.h
lrwxrwxrwx 1 root root   28 Dec 25 05:49 asn1_mac.h -> ../../crypto/asn1/asn1_mac.h
... 
```

GCC 链接到包含文件夹并给我一个错误 - 它找不到 SSL。我正在使用或多或少[与其他人相同的东西](https://stackoverflow.com/questions/1894013/how-to-use-openssl-in-gcc)。这适用于 OSX (10.6)，但不适用于 Ubuntu：

```
~$ gcc -L/usr/local/openssl-1.0.1c/include -lssl -lcrypto  -o server server.c
server.c:20:25: fatal error: openssl/ssl.h: No such file or directory
compilation terminated. 
```

**尝试 2，到 /usr/include 中库的符号链接**

所以，然后我尝试在我的 /usr/include 中创建一个到 OpenSSL 的符号链接：

```
sudo ln -s /usr/local/openssl-1.0.1c/include/openssl /usr/include/openssl 
```

并重新尝试编译：

```
~$ gcc -L/usr/local/openssl-1.0.1c/include -lssl -lcrypto  -o server server.c
/usr/bin/ld: cannot find -lssl
/usr/bin/ld: cannot find -lcrypto
collect2: ld returned 1 exit status
make: *** [server] Error 1 
```

**为什么第一种方法（即没有符号链接）不起作用？权限？为什么第二种方法不起作用？为什么这在 OSX 上有效？？？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T03:47:45.350

找不到头文件的问题似乎是您混淆了选项。`-L`添加链接器库搜索路径的路径，同时`-I`将目录添加到预处理器头文件搜索路径。更改`-L`为`-I`以解决该问题：

```
$ gcc -I/usr/local/openssl-1.0.1c/include server.c -o server.o 
```

现在链接器问题是因为您错误地使用该`-L`选项告诉链接器在包含路径中查找库。您需要将该路径更改为库所在的目录，通常是`lib`子目录。此外，链接器希望库与其依赖项的顺序相反，因此将要链接的库放在命令行的最后：

```
$ gcc -I/usr/local/openssl-1.0.1c/include server.c -o server.o \
    -L/usr/local/openssl-1.0.1c/lib -lssl -lcrypto 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T03:52:59.407

您的编译命令*似乎*可以在 OSX 上运行，但实际上是使用*系统提供的*OpenSSL 而不是您想要的版本进行编译和链接。它在 Ubuntu 上完全失败，因为您没有安装系统 OpenSSL 的标头和开发库链接。

这是因为您混淆了搜索路径选项，并且您需要其中两个。告诉 GCC 你在哪里使用`-I`. 告诉它您使用的目标代码库在哪里`-L`。在两个系统上，您需要的编译命令是这样的：

```
$ gcc -I /usr/local/openssl-1.0.1c/include -L /usr/local/openssl-1.0.1c/lib \
      -o server server.c -lssl -lcrypto 
```

# php - PHP/MYSQL - 付费会员到期解决方案

> ID：14150774
> 
> 赞同：1
> 
> 时间：2013-01-04T03:42:27.300
> 
> 标签：php, mysql

我正在为我的网站上的付费会员寻找一个简单的解决方案。

基本上我只需要一个 mysql 值来改变。（更改帐户类型。）我知道您可以使用 Paypal IPN 轻松完成此操作。

问题是在*x*个月后需要将帐户改回。做这个的最好方式是什么？我必须每天运行代码来检查到期时间吗？或者有什么更简单的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T03:47:00.113

这完全取决于您是否需要它在数据库中 100% 准确。

如果您关心过期帐户的唯一时间是该人尝试使用您的服务时，我会在适当的时间（例如登录时）执行检查。

如果您需要它准确（到当天），我会考虑使用`cron`或类似 cron 的系统在非高峰时间进行数据库更新。

# jquery - onclick 弹出 highchart 饼图

> ID：14150775
> 
> 赞同：3
> 
> 时间：2013-01-04T03:42:29.290
> 
> 标签：jquery, json, highcharts

我目前有一个使用 highcharts api 创建的饼图。但是现在我想在单击某个区域时创建一个弹出窗口，它将显示来自 json 文件的系列名称和人名。

所以例如它会像：

“这些是喜欢曼彻斯特的人：杰里卡”

这是我的代码：

```
 var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Facebook like'
            },
            tooltip:{
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 0
                }

            ,
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    point: {
                        events:{
                            click: function (event){

                                for (var i = 0; i < jsonFB.user1.length; i++) {
                                    for (var k = 0; k < json.data.length; k++) {
                                        for (var j = 0; j < json.data[k].audience.length; j++) {

                                       if (jsonFB.user1[i].id = json.data[k].audience[j].userid) {
                                            var name = jsonFB.user1[i].name;                                      
                                                    alert("Person who like"+ this.point.name+" "+ personname);
                                             }
                                             else {

                                                 console.log("false");
                                             }
                                            }
                                        }

                            }
                        }
                        }
                    },
                    showInLegend: true ,
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',

                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage) +'%';
                        }

                    }
                }
            },

            series: [{
                type: 'pie',
                name: 'Likes',
                data: pts

            }]
        });
    });

}); 
```

我试过了，但它不起作用。它说无法定义变量“名称”。

抱歉，这是我的 json 结构：

```
$(function () {
    var json = {
    "data": [
        {
        "topic": "Manchester United F.C.",
        "id": "/en/manchester_united_fc",
        "type": "/soccer/football_team",
        "audience": [
            {
            "userid": "100003921730958",
            "source": "Manchester United",
            "category": "Professional sports team"}
        ]},
    {
        "topic": "Chelsea F.C.",
        "id": "/en/chelsea_fc",
        "type": "/soccer/football_team",
        "audience": [
            {
            "userid": "100003921730958",
            "source": "Frank Lampard",
            "category": "Athlete"},
        {
            "userid": "100003914111287",
            "source": "Chelsea Football Club",
            "category": "Professional sports team"}
        ]}
    ]
};

    var jsonFB ={
            "user1":[
              {
              "id": "100003921730958", 
              "name": "Tan Jercia", 
              "favorite_teams": [
                {
                  "id": "19034719952", 
                  "name": "Real Madrid C.F."
                }, 
                {
                  "id": "7724542745", 
                  "name": "Manchester United"
                }
              ], 
              "interested_in": [
                "female", 
                "male"
              ], 
              "likes": {
                "data": [
                  {
                    "name": "Corrinne May", 
                    "category": "Musician/band", 
                    "id": "17393005071", 
                    "created_time": "2012-07-04T05:56:47+0000"
                  }, 
                  {
                    "name": "Men In Black", 
                    "category": "Movie", 
                    "id": "168169803229342", 
                    "created_time": "2012-06-06T21:21:19+0000"
                  }, 
                  {
                    "name": "Pubbing", 
                    "category": "Interest", 
                    "id": "106265502743004", 
                    "created_time": "2012-05-28T07:04:17+0000"
                  }, 
                  {
                    "name": "Sleeping", 
                    "category": "Public figure", 
                    "id": "102168219824412", 
                    "created_time": "2012-05-28T07:03:58+0000"
                  }, 
                  {
                    "name": "Lionel Messi", 
                    "category": "Interest", 
                    "id": "105543199478544", 
                    "created_time": "2012-05-28T07:03:37+0000"
                  }, 
                  {
                    "name": "David Villa Sánchez", 
                    "category": "Athlete", 
                    "id": "20714737025", 
                    "created_time": "2012-05-28T07:03:18+0000"
                  }, 
                  {
                    "name": "Frank Lampard", 
                    "category": "Athlete", 
                    "id": "115714874568", 
                    "created_time": "2012-05-28T10:15:04+0000"
                  },
                  {
                    "name": "Real Madrid C.F.", 
                    "category": "Professional sports team", 
                    "id": "19034719952", 
                    "created_time": "2012-05-28T07:02:57+0000"
                  }, 
                  {
                    "name": "Manchester United", 
                    "category": "Professional sports team", 
                    "id": "7724542745", 
                    "created_time": "2012-05-28T07:02:22+0000"
                  }, 
                  {
                    "name": "Badminton", 
                    "category": "Sport", 
                    "id": "112285278784684", 
                    "created_time": "2012-05-28T07:02:16+0000"
                  }, 
                  {
                    "name": "Swimming", 
                    "category": "Sport", 
                    "id": "109717462380351", 
                    "created_time": "2012-05-28T07:02:13+0000"
                  }, 
                  {
                    "name": "The Vampire Diaries - Tv Series/Books", 
                    "category": "Community", 
                    "id": "133372903419059", 
                    "created_time": "2012-05-28T06:37:38+0000"
                  }, 
                  {
                    "name": "Gossip Girl", 
                    "category": "Tv show", 
                    "id": "8811587900", 
                    "created_time": "2012-05-28T06:37:38+0000"
                  }, 
                  {
                    "name": "Dear John", 
                    "category": "Movie", 
                    "id": "154526009569", 
                    "created_time": "2012-05-28T06:37:37+0000"
                  }, 
                  {
                    "name": "The Vow", 
                    "category": "Movie", 
                    "id": "131563483577190", 
                    "created_time": "2012-05-28T06:37:37+0000"
                  }, 
                  {
                    "name": "Harry Potter", 
                    "category": "Movie", 
                    "id": "156794164312", 
                    "created_time": "2012-05-28T06:37:36+0000"
                  }, 
                  {
                    "name": "Avengers", 
                    "category": "Movie", 
                    "id": "126757470715601", 
                    "created_time": "2012-05-28T06:37:36+0000"
                  }, 
                  {
                    "name": "Batman: The Dark Knight", 
                    "category": "Movie", 
                    "id": "12887942787", 
                    "created_time": "2012-05-28T06:37:35+0000"
                  }, 
                  {
                    "name": "The Transporter", 
                    "category": "Movie", 
                    "id": "105485349484433", 
                    "created_time": "2012-05-28T06:37:34+0000"
                  }, 
                  {
                    "name": "Ip Man", 
                    "category": "Movie", 
                    "id": "104108312958644", 
                    "created_time": "2012-05-28T06:37:33+0000"
                  }, 
                  {
                    "name": "How to Train Your Dragon", 
                    "category": "Movie", 
                    "id": "96698020019", 
                    "created_time": "2012-05-28T06:37:33+0000"
                  }, 
                  {
                    "name": "Battleship", 
                    "category": "Movie", 
                    "id": "116119711759494", 
                    "created_time": "2012-05-28T06:37:32+0000"
                  }, 
                  {
                    "name": "Inception", 
                    "category": "Movie", 
                    "id": "91290503700", 
                    "created_time": "2012-05-28T06:37:32+0000"
                  }, 
                  {
                    "name": "John Carter", 
                    "category": "Movie", 
                    "id": "192790732230", 
                    "created_time": "2012-05-28T06:37:31+0000"
                  }, 
                  {
                    "name": "Transformers 3", 
                    "category": "Movie", 
                    "id": "118936754809410", 
                    "created_time": "2012-05-28T06:37:31+0000"
                  }, 
                  {
                    "name": "Snow White and the Huntsman", 
                    "category": "Movie", 
                    "id": "186450181387455", 
                    "created_time": "2012-05-28T06:37:30+0000"
                  }, 
                  {
                    "name": "This Means War", 
                    "category": "Movie", 
                    "id": "290847887611269", 
                    "created_time": "2012-05-28T06:37:29+0000"
                  }, 
                  {
                    "name": "Harry Potter", 
                    "category": "Book", 
                    "id": "107641979264998", 
                    "created_time": "2012-05-28T06:37:29+0000"
                  }, 
                  {
                    "name": "Love Story", 
                    "category": "Book", 
                    "id": "109789932381273", 
                    "created_time": "2012-05-28T06:37:28+0000"
                  }, 
                  {
                    "name": "Justin Bieber", 
                    "category": "Musician/band", 
                    "id": "67253243887", 
                    "created_time": "2012-05-28T06:37:28+0000"
                  }, 
                  {
                    "name": "Kelly Clarkson", 
                    "category": "Musician/band", 
                    "id": "18481194560", 
                    "created_time": "2012-05-28T06:37:26+0000"
                  }, 
                  {
                    "name": "Jessie J", 
                    "category": "Musician/band", 
                    "id": "145300805513355", 
                    "created_time": "2012-05-28T06:37:26+0000"
                  }, 
                  {
                    "name": "Katy Perry", 
                    "category": "Musician/band", 
                    "id": "7126051465", 
                    "created_time": "2012-05-28T06:37:25+0000"
                  }
                ], 
                "paging": {
                  "next": "https://graph.facebook.com/100003921730958/likes?limit=5000&offset=5000"
                }
              }
             }
              ],

              "user2":[
               {        
                "id": "100003944141075", 
                "name": "Kee Joshson", 
                "favorite_teams": [
                  {
                    "id": "159957123994", 
                    "name": "Oklahoma City Thunder"
                  }
                ], 
                "favorite_athletes": [
                  {
                    "id": "58643286604", 
                    "name": "Russell Westbrook"
                  }, 
                  {
                    "id": "81781281654", 
                    "name": "Kevin Durant"
                  }
                ], 
                "sports": [
                  {
                    "id": "108614982500363", 
                    "name": "Basketball"
                  }
                ], 
                "interested_in": [
                  "female"
                ], 
                "likes": {
                  "data": [
                    {
                      "name": "ilovebooks.com", 
                      "category": "Website", 
                      "id": "126036744165054", 
                      "created_time": "2012-09-20T07:42:55+0000"
                    }, 
                    {
                      "name": "Men In Black", 
                      "category": "Movie", 
                      "id": "168169803229342", 
                      "created_time": "2012-06-06T21:47:59+0000"
                    }, 
                    {
                      "name": "CSI: Miami", 
                      "category": "Tv show", 
                      "id": "31649251356", 
                      "created_time": "2012-05-28T09:46:16+0000"
                    }, 
                    {
                      "name": "Russell Westbrook", 
                      "category": "Athlete", 
                      "id": "58643286604", 
                      "created_time": "2012-05-28T09:35:55+0000"
                    }, 
                    {
                      "name": "Kevin Durant", 
                      "category": "Athlete", 
                      "id": "81781281654", 
                      "created_time": "2012-05-28T09:35:47+0000"
                    }, 
                    {
                      "name": "Oklahoma City Thunder", 
                      "category": "Professional sports team", 
                      "id": "159957123994", 
                      "created_time": "2012-05-28T09:35:40+0000"
                    }, 
                    {
                      "name": "Basketball", 
                      "category": "Sport", 
                      "id": "108614982500363", 
                      "created_time": "2012-05-28T09:35:11+0000"
                    }, 
                    {
                      "name": "Skyrim", 
                      "category": "Games/toys", 
                      "id": "154231771297586", 
                      "created_time": "2012-05-28T09:34:42+0000"
                    }, 
                    {
                      "name": "Diablo", 
                      "category": "Games/toys", 
                      "id": "157102206640", 
                      "created_time": "2012-05-28T09:34:42+0000"
                    }, 
                    {
                      "name": "Mass Effect 3", 
                      "category": "Games/toys", 
                      "id": "177295755667627", 
                      "created_time": "2012-05-28T09:34:42+0000"
                    }, 
                    {
                      "name": "House", 
                      "category": "Tv show", 
                      "id": "7608631709", 
                      "created_time": "2012-05-28T09:34:41+0000"
                    }, 
                    {
                      "name": "bands of brothers", 
                      "category": "Movie", 
                      "id": "198719453486594", 
                      "created_time": "2012-05-28T09:34:41+0000"
                    }, 
                    {
                      "name": "Green Lantern (Movie)", 
                      "category": "Movie", 
                      "id": "144959715764", 
                      "created_time": "2012-05-28T09:34:41+0000"
                    }, 
                    {
                      "name": "Journey to the Center of the Earth", 
                      "category": "Movie", 
                      "id": "203590956402328", 
                      "created_time": "2012-05-28T09:34:40+0000"
                    }, 
                    {
                      "name": "Thor", 
                      "category": "Movie", 
                      "id": "113589202010624", 
                      "created_time": "2012-05-28T09:34:40+0000"
                    }, 
                    {
                      "name": "Super 8", 
                      "category": "Movie", 
                      "id": "120684447949421", 
                      "created_time": "2012-05-28T09:34:40+0000"
                    }, 
                    {
                      "name": "Iron Man 2", 
                      "category": "Movie", 
                      "id": "305086229561341", 
                      "created_time": "2012-05-28T09:34:39+0000"
                    }, 
                    {
                      "name": "Avengers", 
                      "category": "Movie", 
                      "id": "126757470715601", 
                      "created_time": "2012-05-28T09:34:39+0000"
                    }, 
                    {
                      "name": "Journey 2: The Mysterious Island", 
                      "category": "Movie", 
                      "id": "165714120128389", 
                      "created_time": "2012-05-28T09:34:39+0000"
                    }, 
                    {
                      "name": "G.I.JOE", 
                      "category": "Movie", 
                      "id": "83425706502", 
                      "created_time": "2012-05-28T09:34:38+0000"
                    }, 
                    {
                      "name": "Snow White and the Huntsman", 
                      "category": "Movie", 
                      "id": "186450181387455", 
                      "created_time": "2012-05-28T09:34:38+0000"
                    }, 
                    {
                      "name": "The Lord of the Rings Trilogy (Official Page)", 
                      "category": "Movie", 
                      "id": "212216417436", 
                      "created_time": "2012-05-28T09:34:37+0000"
                    }, 
                    {
                      "name": "Resident Evil: Extinction", 
                      "category": "Movie", 
                      "id": "103127326394260", 
                      "created_time": "2012-05-28T09:34:37+0000"
                    }, 
                    {
                      "name": "Saving Private Ryan", 
                      "category": "Movie", 
                      "id": "131804703563360", 
                      "created_time": "2012-05-28T09:34:37+0000"
                    }, 
                    {
                      "name": "The Incredible Hulk", 
                      "category": "Movie", 
                      "id": "21700332856", 
                      "created_time": "2012-05-28T09:34:36+0000"
                    }, 
                    {
                      "name": "\"Saving Cinnamon\" (True Puppy Rescue Story)", 
                      "category": "Book", 
                      "id": "145262539912", 
                      "created_time": "2012-05-28T09:34:36+0000"
                    }, 
                    {
                      "name": "Lord Of The Rings", 
                      "category": "Book", 
                      "id": "115112848502927", 
                      "created_time": "2012-05-28T09:34:36+0000"
                    }, 
                    {
                      "name": "HOOT SNSD", 
                      "category": "Musician/band", 
                      "id": "123110274416073", 
                      "created_time": "2012-05-28T09:34:31+0000"
                    }, 
                    {
                      "name": "(SNSD) Jessica", 
                      "category": "Musician/band", 
                      "id": "152026991512413"
                    }
                  ], 
                  "paging": {
                    "next": "https://graph.facebook.com/100003944141075/likes?limit=5000&offset=5000"
                  }
                }
               }

              ]
            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T04:01:28.570

我不知道您的结构如何，但一个好的解决方案是将数据与相应的点一起存储，这样您每次单击时`json`都不必循环。`json`

您可以通过以下方式进行操作：

```
series: [{
    type: 'pie',
    name: 'Likes',
    data: [
        {
        name: 'Person1',
        y: 45,
        personName: 'someName1'},
    {
        name: 'Person2',
        y: 26.8,
        personName: 'someName2'},
    {
        name: 'Person3',
        y: 12.8,
        sliced: true,
        selected: true,
        personName: 'someName3'},
    {
        name: 'Person4',
        y: 8.5,
        personName: 'someName4'},
    {
        name: 'Person5',
        y: 6.2,
        personName: 'someName5'},
    {
        name: 'Person6',
        y: 0.7,
        personName: 'someName6'}
    ]

}] 
```

然后你只需要明白这一点`options`。`click`

```
plotOptions: {
    pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        point: {
            events: {
                click: function(event) {
                    // store point options, `this` reffers the clicked point
                    var options = this.options;
                    alert('Person who like' + options.name + ' '
                          + options.personName);
                }
            }
        }
    }
} 
```

[**演示**](http://jsfiddle.net/xXwax/)

# python - 在 Django 中从数据库中呈现自定义模板标签

> ID：14150778
> 
> 赞同：1
> 
> 时间：2013-01-04T03:43:06.920
> 
> 标签：python, django, django-templates

我对 Django 很陌生，正在尝试为我的网站构建一个博客应用程序。我创建了一个模型来存储博客文章，其中包括文章正文的文本字段，使用 TinyMCE（通过 Grappelli）创建并转换为 HTML。我想在这个帖子正文中嵌入自定义模板标签，这些标签作为模板标签保存在数据库中，然后在我的网站上请求时呈现为 HTML。到目前为止，我没有任何运气让标签正确呈现。如何让 Django 正确解释和呈现我的帖子中的模板标签？当直接在模板中加载和实现时，自定义标签可以正常工作，只是这种间接加载给我带来了麻烦。我在这里尝试[了这个片段](http://djangosnippets.org/snippets/1373/)（**编辑：**它有效，我只是做错了！），但它不能正常工作。

这是我的看法：

```
from django.shortcuts import render_to_response
from myproject.apps.blog.models import Post

def blog_detail_view(request, year, month, day, slug):
    selected_post = Post.objects.get(status=1, pub_date__year = year, pub_date__month = time.strptime(month, "%b")[1], pub_date__day = day, slug = slug)
    return render_to_response('blog/detail.html', locals()) 
```

以及我模板的相关部分：

```
...
{% load my_custom_tag %}

<div class="entry">
    {{ selected_post.body|safe }}
</div>
... 
```

这是保存到的文本示例`Post.body`：

```
My first paragraph.
{% my_custom_tag var1 var2 %}
My second paragraph. 
```

目前，这将呈现为：

```
<p>My first paragraph.</p>
<p>{% my_custom_tag var1 var2 %}</p>
<p>My second paragraph.</p> 
```

当我想要这样的东西时：

```
<p>My first paragraph.</p>
<p><a href="var1"><img src="var2"></a></p>
<p>My second paragraph.</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:59:30.657

事实证明，在[这里](http://djangosnippets.org/snippets/1373/)`render_as_template`找到的标签确实有效，我只是误解了它。初学者的错误。有两件事没有在文档中指定我未能自行获取的代码段。

因此，您将`render_as_template`标签放在模板中，如下所示：

```
{% load render_as_template %}
{% render_as_template myobject.attribute %} 
```

`myobject.attribute`因此允许呈现其中的任何模板标签。这是我遇到麻烦的地方：

首先，我将我的帖子正文传递给`render_as_template`as`selected_post.body|truncatewords_html:"100"|safe`或 as `selected_post.body|safe`。模板标签无法处理属性上的过滤器，并且似乎将它们解释为对象名称的一部分。由于此对象不存在，因此不会渲染任何内容。我在模板中需要的是：

```
{% autoescape off %}
{% filter truncatewords_html:"100" %}
{% render_as_template selected_post.body %}
{% endfilter %}
{% endautoescape %} 
```

其次，如果我的帖子内容是：

```
My first paragraph.
{% my_custom_tag var1 var2 %}
My second paragraph. 
```

然后为了`my_custom_tag`被解释，我需要在我的帖子中添加：

```
{% load my_custom_tag %} 
```

现在它完美地工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:24:35.723

要在 Django 中创建自定义标签，您需要编写一个标签函数然后注册它。[链接到有关该主题的官方 Django 文档。](https://docs.djangoproject.com/en/1.2/howto/custom-template-tags/#writing-custom-template-tags)

# android - Android：为所有屏幕尺寸对齐 LinearLayout 中心

> ID：14150780
> 
> 赞同：7
> 
> 时间：2013-01-04T03:43:27.210
> 
> 标签：android, android-layout, android-widget

我想为我的登录屏幕设计一个布局，我尝试了以下代码。使用一些硬编码的值，我得到了一些屏幕尺寸的中心绿色布局中心。我知道使用硬编码值不适用于不同的屏幕尺寸。我在 SO 上尝试了很多东西。请给我最好的方法 ![在此处输入图像描述](../Images/1ffb30f998c7ffabd58e43ce9f485935.png)

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/register_header"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/title_image"
            android:layout_width="wrap_content"
            android:layout_height="40dp"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:src="@drawable/logo_blue" />

    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
         android:layout_marginLeft="150dp"
        android:layout_marginRight="150dp"
        android:layout_marginTop="50dp"
        android:layout_marginBottom="50dp"
        android:orientation="vertical" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/UserInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/WelcomeInfo"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/user"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="User Name"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/username"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enter username"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/PassInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/UserInfo"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/pwd"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Password"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/password"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enterpassword"
                android:singleLine="true"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/StoreNumInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/WelcomeInfo"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/num"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Store Number"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/store_num"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enter the Store number"
                android:imeOptions="actionDone"
                  android:password="true"

                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/Options"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/PassInfo"
            android:orientation="horizontal" >

            <CheckBox
                android:id="@+id/signed_in"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Stay Signed-in"
                android:textColor="#000000" />

            <Button
                android:id="@+id/login"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Login"
                android:textSize="28dp"
                android:textStyle="bold" />
        </LinearLayout>

    </LinearLayout>
</LinearLayout> </ScrollView> 
```

* * *

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T03:57:21.620

将绿色布局的封面用作RelativeLayout。然后像这样定义你的greenLayout。 `android:layout_centerHorizontal="true"` `android:layout_centerVertical="true"`

看看我的 xml 它可以使所有屏幕居中

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/lin_all"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:orientation="vertical" >
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T04:16:11.097

**尝试这个：**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical" >

// put all your xml code here

    </LinearLayout> 
```

*尝试编辑后的代码：*

**新编辑：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical" 
    android:weightSum="1">

   <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/register_header"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.1"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/title_image"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:src="@drawable/logo_blue"  />

    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_weight="0.9"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/UserInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/WelcomeInfo"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/user"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="User Name"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/username"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enter username"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/PassInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/UserInfo"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/pwd"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Password"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/password"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enterpassword"
                android:singleLine="true"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/StoreNumInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/WelcomeInfo"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/num"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Store Number"
                android:textColor="#000000"
                android:textSize="10pt"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/store_num"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:hint="Enter the Store number"
                android:imeOptions="actionDone"
                  android:password="true"

                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/Options"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/PassInfo"
            android:orientation="horizontal" >

            <CheckBox
                android:id="@+id/signed_in"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Stay Signed-in"
                android:textColor="#000000" />

            <Button
                android:id="@+id/login"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Login"
                android:textSize="28dp"
                android:textStyle="bold" />
        </LinearLayout>

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T05:26:22.283

试试这个 XML 代码，它会解决你的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:orientation="vertical" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/register_header"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/title_image"
                android:layout_width="wrap_content"
                android:layout_height="40dp"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:layout_marginBottom="5dp"
                android:layout_marginTop="5dp"
                android:gravity="center"
                android:src="@drawable/ic_launcher" />
        </RelativeLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/UserInfo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/user"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="User Name"
                    android:textColor="#000000"
                    android:textSize="10pt"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/username"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:hint="Enter username"
                    android:singleLine="true"
                    android:textColor="#000000" >
                </EditText>
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/PassInfo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/UserInfo"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/pwd"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Password"
                    android:textColor="#000000"
                    android:textSize="10pt"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/password"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:hint="Enterpassword"
                    android:singleLine="true"
                    android:textColor="#000000" />
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/StoreNumInfo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/WelcomeInfo"
                android:gravity="center_vertical"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/num"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Store Number"
                    android:textColor="#000000"
                    android:textSize="10pt"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/store_num"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:hint="Enter the Store number"
                    android:imeOptions="actionDone"
                    android:password="true"
                    android:textColor="#000000" >
                </EditText>
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/Options"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/PassInfo"
                android:orientation="horizontal" >

                <CheckBox
                    android:id="@+id/signed_in"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Stay Signed-in"
                    android:textColor="#000000" />

                <Button
                    android:id="@+id/login"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Login"
                    android:textSize="28dp"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T05:10:57.253

要在不同的屏幕尺寸下工作，我建议您根据屏幕尺寸创建不同的 xml 文件........您可以在这里查看 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。 ..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-22T12:22:44.430

我的解决方案

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:gravity="center_vertical"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

   <Button
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:layout_gravity="center"
       android:text="Sample Button"
       />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-30T06:07:10.453

在父 LinearLayout 中，添加这个

```
android:orientation="vertical"
android:gravity="center" 
```

.

# iphone - iOS UICollectionView reloadData 错误地将模型映射到 ViewCell

> ID：14150782
> 
> 赞同：0
> 
> 时间：2013-01-04T03:43:51.043
> 
> 标签：iphone, ios, uicollectionview, reloaddata, uicollectionviewcell

如果 an 中的模型数据`NSArray`没有改变，并且您调用`reloadData`，`UICollectionView`单元格是否出现在不同的位置？

我发现如果我`NSArray`持有 Obj1、Obj2、Obj3，那么首先，`UICollectionView`正确地将 Obj1 映射到第一个`collectionViewCell`，Obj2 到第二个等等。这就是它在 中的设置方式`cellForRowAtIndexPath`，因为它用于`indexPath.row`获取正确的 Obj从数组。

但是，当我调用时`reloadData`，所有对象都映射到错误的 UICollectionViewCell （Obj1 最终出现在其他地方，例如第二个`collectionViewCell`，而 Obj2 最终成为第三个`collectionViewCell`等）

为什么会这样？我没有在文档中找到原因。

* * *

此外，当我的模型数组发生变化时，我遇到了同样的问题。例如，如果我`NSArray`的是 Obj1、Obj2、Obj3，然后创建了新的 Objs 实例并且现在以不同的顺序，例如`NSArray`is Obj2、Obj3、Obj1... 然后我调用`reloadData`，我面临同样的情况问题。

Obj2 没有`UICollectionViewCell`按应有的方式映射到第一个，而是映射到不同的`UICollectionViewCell`

任何人都知道为什么会发生这种情况`UICollectionViews`？

谢谢！

编辑：代码`cellForRowAtIndexPath`

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
MIAppCell* cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"MIAppCell" forIndexPath:indexPath];
// set model data
[cell setAppTitle:[(MIAppDO*)[self.apps objectAtIndex:indexPath.row] getAppTitle]];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:35:45.510

我解决了这个问题。

早些时候，我是`dequeuing`一个单元格并设置它的新模型数据，但模型数据没有正确反映在子类中`UICollectionViewCell`。

我需要覆盖代表我的子类模型数据的属性的 setter 方法`UICollectionViewCell`。在那些被覆盖的方法中，我能够更新单元格的适当视图。

# jquery - jQuery 选择菜单和文本输入搜索

> ID：14150783
> 
> 赞同：0
> 
> 时间：2013-01-04T03:43:50.677
> 
> 标签：jquery, search, select, textinput

我正在创建一个图像搜索功能，将在网站主页上使用，链接到网站摄影库。

我创建了一个选择菜单，其中包含所有图像库相册（这些是显示子图像列表的页面）作为选项，并具有文本输入和搜索按钮。

```
<select name="photographySearch" id="photographySearch">
    <option value="">Select category</option>
    <option value="football.aspx">Football</option>
    <option value="basketball.aspx">Basketball</option>
    <option value="hockey.aspx">Hockey</option>
</select>

<input type="text" id="photographySearchKeyword"
  onfocus="if(this.value==this.defaultValue) this.value='';"
  onblur="if(this.value=='') this.value='Enter keyword';"
  value="Enter keyword" />

<input type="button" 
  id="photographySearchButton" 
  name="searchbutton" 
  value="Search" />​ 
```

我需要一个脚本来执行以下操作：

1.  如果用户在没有从选择菜单中选择任何选项或在文本输入中输入任何关键字的情况下单击搜索按钮，则位置将更改为“/photography-search.aspx”页面（默认显示摄影中的所有图像）库）并且不显示默认的“输入关键字”作为搜索结果

2.  如果用户在没有从选择菜单中选择任何选项的情况下单击搜索按钮并在文本输入中输入关键字，则位置将更改为“/photography-search.aspx?search=' + $('#photographySearchKeyword' ).attr('值');" 包括输入到文本输入中的值

3.  如果用户在没有从选择菜单中选择任何选项或在文本输入中输入任何关键字的情况下单击搜索按钮，则位置将更改为“/photography-search.aspx”页面（默认显示摄影中的所有图像）图书馆）

4.  如果用户单击搜索按钮并从选择菜单中选择了任何选项，并且没有在文本输入中输入任何关键字，则位置将更改为所选选项的值，例如“/football.aspx”页面并且不显示默认“输入关键字”作为搜索结果

5.  如果用户单击搜索按钮并从选择菜单中选择任何选项并在文本输入中输入任何关键字，则位置将更改为所选选项的值，例如“/football.aspx?search=' + $( '#photographySearchKeyword').attr('value');" 包括在文本输入页面中输入的值

到目前为止，我只设法创建了选项 2：

```
$('#photographySearchButton').click(function() {
    location.href = '/photography-search.aspx?search=' +
                    $('#photographySearchKeyword').attr('value');
}); 
```

[http://jsfiddle.net/zjs8n/](http://jsfiddle.net/zjs8n/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:45:53.947

[在此处](http://jsfiddle.net/KEAHj/2/)测试示例

```
$(document).ready(function() {
  $('#photographySearchButton').click(function() {
    var category = $('#photographySearch :selected').val();
    var keyword = $('#photographySearchKeyword').val();

    var page = '/photography-search.aspx';
    var query = '';

    if (category.length > 0)
      page = category;
    if (keyword.length > 0 && keyword != 'Enter keyword')
      query = '?search=' + keyword;

    alert(page+query);
  });
}); 
```

# c# - 处理 asp.net C#/SQL Server 应用程序的并发问题

> ID：14150791
> 
> 赞同：2
> 
> 时间：2013-01-04T03:44:36.663
> 
> 标签：c#, sql-server-2008, asp.net-4.5

如何处理 asp.net 4.5 Web 应用程序（VS2012 和 C#、SQL Server）的并发问题

例如：
我的场景是用户可能有机会永远无法处理队列项目。请参阅以下内容：

1.  用户 A 打开队列项 (a)，仔细查看
2.  用户 B 打开队列项目 (a)，处理它而不查看
3.  用户 A 决定处理 (a)，但它被锁定，所以跳转到项目 (b)
4.  用户 C 打开队列项 (b)，立即处理它
5.  用户 A 决定处理 (b)，但它再次被锁定
6.  同样的事情永远发生在用户 A 身上

这对于用户 A 来说并不理想，即使这种可能性的百分比可能非常小

我在 C# 代码级别以及 SQL Server 存储过程级别使用事务。我还利用 ADO.net 与数据库进行通信

我的问题是：

*   您认为创建事务会解决并发问题吗？
*   我猜 ADO.net 已经内置了并发预防？我对么 ？
*   除了创建事务和使用 ADO.net 之外，我还需要做任何其他事情来防止并发问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:56:49.467

**简而言之：您可以使用称为****时间戳**列的传统方法来解决并发问题。

> 表的时间戳列可用于确定自上次读取表以来表行中的任何值是否已更改。本文介绍了一种在 Microsoft SQL Server 2005 中使用表的时间戳列进行乐观并发控制的方法。

要获得有关此方法的更详细说明，请参阅本文

*   [如何在 SQL Server 2005 中使用表的时间戳列进行乐观并发控制](http://support.microsoft.com/kb/917040)。

**此外，您还可以查看**[使用 SQL 时间戳实现乐观并发](http://www.primedigit.com/implementing-optimistic-concurrency-with-sql-timestamps/)的分步实现指南。

# eclipse - PyDev 中的 Jython 解释器配置失败

> ID：14150795
> 
> 赞同：1
> 
> 时间：2013-01-04T03:45:20.530
> 
> 标签：eclipse, pydev, jython

我试了一个小时没有任何进展。

我正在使用 Eclipse Juno 和最新的 PyDev。Win 7\. 我在`E`磁盘上安装了 Jython。当我尝试在 PyDev 中配置 Jython 解释器路由时（Preference -> PyDev -> Interpreter-Jython -> Add），我收到以下错误（在一个巨大的弹出窗口中）：

> 错误：找不到 Python 标准库或找到没有 .py 文件的标准库。在安装过程中似乎没有找到/选择 Python /lib 文件夹（其中包含标准库），或者 stdlib 不包含所需的 .py 文件（即：只有 .pyc 文件）。PyDev 需要此文件夹（其中包含 threading.py 和 traceback.py 等文件）才能正常运行，并且它必须包含实际的源文件，而不仅仅是 .pyc 文件。如果您的安装中没有 .py 文件，请使用来自 python.org 的安装或从那里获取用于安装的标准库。如果这是一个 virtualenv 安装，则需要选择基本安装中的 /Lib 文件夹（与可选的 site-packages 不同）。你想让我做什么？注意：如果您选择继续，则 /Lib 与标准库 .

它们是三个可用的选项：

1.  **重新选择文件夹**：它只是重试并再次给出错误。

2.  **取消**：没有太大帮助

3.  **无论如何都要继续**：这个选项特别奇怪。我点击了它，没有任何反应。Jython 解释器无法链接到 PyDev

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-15T13:33:08.097

官方安装说明对我不太适用：[http ://www.jython.org/jythonbook/en/1.0/JythonIDE.html](http://www.jython.org/jythonbook/en/1.0/JythonIDE.html)

以下是我如何让 Jython 在 Eclipse 中运行的发现（我使用的是 Kepler *4.3.1.M20130911-1000*，*PyDev 2.7.5.2013052819*）：

*   下载 jython**独立 jar**（例如*2.5.3*或*2.7-b1*版本）

    *   **[http://jython.org/downloads.html](http://jython.org/downloads.html)**

    *   提示：Eclipse PyDev 分发*的 pydev-jython.jar*似乎不是有效的 jython 发行版（例如`eclipse/plugins/org.python.pydev.jython_2.7.5.2013052819/pydev-jython.jar`）

        *   它会抛出一些：（`NoClassDefFoundError: org/python/pydev/core/ObjectsPool$ObjectsPoolMap`实际上包含在 eg 中`eclipse/plugins/org.python.pydev_2.7.5.2013052819/core.jar`）

...

*   *Window->Preferences->PyDev->Interpreter Jython->New->*选择**`jython-standalone-xxx.jar`**

    *   取消选择所有建议的文件夹（如果需要，您可以稍后添加它们）

    *   **忽略警告（上面提到的问题）**并选择***继续***

        *   `/Lib`找不到该文件夹​​，因为它打包在独立 jar ( `jython-standalone-xxx.jar!/Lib`) 中，稍后可能会正常

...

*   调整您新创建或现有的项目以使用此解释器：

    *   ***->属性->PyDev - 解释器/语法->Jython***

        *   ***语法：（***例如2.5）
        *   ***解释器：（***例如*jython-standalone-2.5.3.jar*）（通常应该 >= 语法版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T19:42:11.477

在为 jython 配置解释器之前，请确保在新项目文件夹中选择语言类型为“python/jython”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:58:19.197

我不知道 Jython 在 Windows 上的行为，所以这只是一个疯狂的猜测：

第一次运行 Jython 时，它通常会进行一些基本的库配置。在将 Jython.jar 添加到 PyDev 之前，请尝试单独运行一次 Jython.jar。

# python - 在 Python 中将两个列表转换为字典列表

> ID：14150797
> 
> 赞同：2
> 
> 时间：2013-01-04T03:45:28.143
> 
> 标签：python, list, dictionary, python-2.7

我有两个列表，例如：

```
L = [1, 2]
S = ['B', 'C'] 
```

我怎样才能将它们组合成这样的字典：

```
X = {'B': 1, 'C': 2} 
```

列表将始终具有相同的长度，但可以包含任意数量的项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T03:47:59.633

这是一个单行：

```
dict(zip(S, L)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:48:02.880

这边走：

```
>>> key_list = ['a', 'b']
>>> value_list = [1, 2]
>>> result = dict(zip(key_list, value_list))
>>> print result
{'a': 1, 'b': 2}
>>> _ 
```

# javascript - setTimeout 似乎在 Chrome 中不起作用

> ID：14150802
> 
> 赞同：11
> 
> 时间：2013-01-04T03:45:42.483
> 
> 标签：javascript, google-chrome, settimeout

这个 setTimeout 在 Firefox 中完美运行，但在 Chrome 中，函数 timeoutTrigger 没有任何事情发生，包括警报。有任何想法吗？

```
var $this = $('.active-more');

function timeoutTrigger() {
    $this.closest(".container").nextAll(".container:first").find(".description:first").removeClass('hide');
    $this.closest(".container").nextAll(".container:first").find(".back:first").find("img.portfolio").remove();
    alert("is this thing on?");
}

setTimeout(function(){timeoutTrigger()},400) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T03:47:49.793

将您的`setTimeout`语句转换为以下内容：`setTimeout(timeoutTrigger,400);` 您编写的语句是针对您调用的函数具有参数的情况。另外，您缺少分号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-14T17:24:32.413

Google 已更改影响在某些浏览器中使用 setTimeout() 的内容安全政策。请阅读：[https ://developer.chrome.com/extensions/contentSecurityPolicy](https://developer.chrome.com/extensions/contentSecurityPolicy)

# android - 使用 Spring Android 的 Http PATCH

> ID：14150804
> 
> 赞同：2
> 
> 时间：2013-01-04T03:45:57.753
> 
> 标签：android, spring, http

我正在使用 Spring-Android 处理 API，但是当我尝试执行 PATCH 时，我注意到[RestTemplate](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html)中没有相应的方法。文档建议我使用交换或执行，但我很难理解如何。此外，Spring-Android 1.0.1 HttpMethod 中似乎也没有包含 PATCH。

关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:37:13.193

有时代码解释得最好：

如果您了解该方法的`RestTemplage.postForEntity(String url, Object request, Class<T> responseType, Object... uriVariables)`作用，请查看它的实现方式。

```
public <T> ResponseEntity<T> postForEntity(String url, Object request,
                    Class<T> responseType, Object... uriVariables)
                    throws RestClientException {

    HttpEntityRequestCallback requestCallback = 
                                  new HttpEntityRequestCallback(request, responseType);
    ResponseEntityResponseExtractor<T> responseExtractor =
                                  new ResponseEntityResponseExtractor<T>(responseType);
    return execute(url, HttpMethod.POST, requestCallback, responseExtractor, uriVariables);
} 
```

我希望您了解如何将此示例映射到其他 Http 方法。

*如果您尚未将 spring 代码添加到您的 IDE，您可以查看此[url 以获取 RestTemplate 代码](http://www.jarvana.com/jarvana/view/org/springframework/spring-web/3.0.2.RELEASE/spring-web-3.0.2.RELEASE-sources.jar!/org/springframework/web/client/RestTemplate.java?format=ok)*

# android - 如何检测android中的用户触摸交互？

> ID：14150805
> 
> 赞同：2
> 
> 时间：2013-01-04T03:46:00.547
> 
> 标签：android, android-activity

在我的活动中有`ActionBar,ListView,ContextMenu,Menu`.

我想捕捉用户与我的活动的交互（意味着当用户触摸我的活动时，我想展示一个祝酒词）。我用这个

```
@Override
    public void onUserInteraction() 
    {

            Toast.makeText(this, "Hello",Toast.LENGTH_LONG).show();
    } 
```

此方法可在屏幕中使用，但此方法的问题无法使用

`Menus,ContextMenu(ListView)`.

**工作场景**：- 1-这是我第一次触摸屏幕活动中的每个位置（ActionBar，ListView）。

2-单击`Menus`第一次调用此方法后，如果`Menu`它与活动相关（如果我想继续下一个活动）它工作正常但有一个`Menu` `REFRESH`在同一活动中，我不知道为什么这个方法没有调用点击`REFRESH`。

3-同样的问题`ContextMenu`（长按后出现`ListView`）

我也试过`GestureDetecter`。

**android中有任何特定的方法或任何东西，可以检测用户每次在菜单、上下文菜单、列表、屏幕或任何地方的触摸。**

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:03:53.083

我认为您可以在 Activity 中覆盖 dispatchTouchEvent() 以获得所需的结果

像这样的东西：

```
@Override
public boolean dispatchTouchEvent(MotionEvent me){
  //do something
  return super.dispatchTouchEvent(me);
} 
```

有关更多[信息，请参阅活动文档](https://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)

另外，我认为值得注意的是，如果您的用户在他们触摸屏幕上的任何内容时显示吐司，他们可能会觉得很烦人。

# xpath - 匹配 XPath 中的不间断空格值

> ID：14150806
> 
> 赞同：3
> 
> 时间：2013-01-04T03:46:04.790
> 
> 标签：xpath

假设我有这样的 XML 结构：

```
<table>
    <tr>
        <td>&nbsp;</td>
    </tr>
</table> 
```

如何在谓词中指定与节点值的比较：

```
//tr/td[.="???"] 
```

应该指定什么而不是`???`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:59:54.857

解决方案是

```
//tr/td[.="\u0160"] 
```

实际的 unicode 演示将取决于您使用的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:14:15.800

在 XPath 2 中，您可以使用

```
//tr/td[. = codepoints-to-string((160))] 
```

独立于您使用的工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:56:05.613

使用 的字面值`&nbsp;`：

```
/table/tr/td[.=' '] 
```

# mysql - SQL 语法问题

> ID：14150808
> 
> 赞同：2
> 
> 时间：2013-01-04T03:46:30.673
> 
> 标签：mysql, sql

所以，我得到了一个`users`带有字段名`country`和字段名的表名`id`

我还有一个`Players`带有字段名的表名`gameID` （它也有一个`user_id`for id the user id on `users`）

我想对表中的字段进行`UPDATE`更改`gameID``Players``STEAMID_0xxxx``STEAMID_1xxxxx``country``users is = uk`

我尝试这样的事情：

```
UPDATE Players 
set steamid=steam_1 
WHERE steamid=steamid_0 AND country = ( SELECT country 
                                        from users 
                                        where country=pt ) 
```

所以我的第一个疑问是，如何只更改单词的一部分（例如：）`steam_0:1:2345 to steam_1:1:2345`它`Steam_0* ?`也是，我如何选择国家？我的理论看起来很愚蠢：|

我知道那是错误的，也许你可以指出我正确的方向

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:53:40.293

你需要`JOIN`反对`users`才能获得国家：

要交换`steam_0`，`steam_1`您可以使用`REPLACE()`字符串函数：

```
UPDATE 
  Players
  JOIN users ON Players.user_id = users.id
SET
  /* REPLACE() the beginnging steamid_0 with steamid_1 */
  steamid = REPLACE(steamid, 'steamid_0:', 'steamid_1:')
WHERE
  /* The whole subquery can then be replaced with this: */
  users.country = 'pt'
  /* Not strictly necessary... */
  AND LEFT(steamid, 10) = 'steamid_0:' 
```

# objective-c - 在 OSX 命令行和已安装的应用程序之间进行通信

> ID：14150815
> 
> 赞同：0
> 
> 时间：2013-01-04T03:47:53.317
> 
> 标签：objective-c, macos

作为一名主要的 iOS 开发人员，我很好奇如何处理我正在处理的当前 OS X 项目。我将创建一个应用程序，该应用程序在启动后将继续运行，并在触发其主要功能之前等待一个动作。简而言之，我需要能够从命令行触发此操作。

我很好奇处理命令行应用程序和应用程序本身之间通信的最佳方式是什么。我只是将一些字符串值从命令行传递给正在运行的应用程序。我知道我可以使用套接字或控制文件，但我对 OSX 开发的经验并不丰富，我很好奇这些是否是首选选项，是否有更好的方法。

作为旁注 - 这不是将提交到 Mac App Store 的应用程序 - 所以我不太关心随之而来的一些限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:58:27.833

[`open`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html)您可以使用以下命令启动带有参数的应用程序：

要直接通知，一般推荐分布式通知： [`NSDistributedNotificationCenter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistributedNotificationCenter_Class/Reference/Reference.html). 它并不比普通的 NSNotification 难。

# cuda - CUDA 中的 JPEG 库

> ID：14150821
> 
> 赞同：5
> 
> 时间：2013-01-04T03:48:33.177
> 
> 标签：cuda, jpeg, compression

我正在尝试在 CUDA 中压缩和解压缩图像。到目前为止，我已经找到了这个库： http: [//sourceforge.net/projects/cuj2k/ ?source=navbar](http://sourceforge.net/projects/cuj2k/?source=navbar)

但是没有太多可用的文档。

有谁知道在 CUDA 中使用的任何有据可查（带有示例代码）的 JPEG 压缩和解压缩库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T16:35:28.793

NPP 库包括用于实现 JPEG 编解码器的构建块例程。它包含在 CUDA 发行版中。查看 SDK 中的 JpegNPP 示例：http: [//docs.nvidia.com/cuda/cuda-samples/](http://docs.nvidia.com/cuda/cuda-samples/)

# python - Python JSON解码ValueError：额外数据：

> ID：14150823
> 
> 赞同：5
> 
> 时间：2013-01-04T03:48:35.923
> 
> 标签：python, python-3.x

我在尝试解码和打印从套接字连接接收的 JSON 时遇到问题。

完整的追溯：

```
C:\Users\Jeremy>python F:\Files\Python\test.py
2013-01-04 21:15:35 [INFO] [AutoSaveWorld] World save Complete!
2013-01-04 21:15:50 [INFO] [←[34;1mMain←[37;1m]←[32;22mRexOZ←[37;1m: you cahaned
 your house it looks awesome←[m
Traceback (most recent call last):
  File "F:\Files\Its safer indoors\Python\test.py", line 14, in <module>
    data = json.loads(dreceve)
  File "C:\Python33\lib\json\__init__.py", line 309, in loads
    return _default_decoder.decode(s)
  File "C:\Python33\lib\json\decoder.py", line 355, in decode
    raise ValueError(errmsg("Extra data", s, end, len(s)))
ValueError: Extra data: line 2 column 1 - line 3 column 1 (char 151 - 344) 
```

如您所见，前两行打印正常，然后崩溃。

完整代码：

```
import socket
import json
import re

HOST = 'host.host.net'
PORT = 8082
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
dsend = "/api/subscribe?source=console&key=SUPERSEXYSECRETEY&show_previous=true\n"
s.sendall(dsend.encode())

while 1:
    dreceve = s.recv(1024).decode()
    data = json.loads(dreceve)
    succses = data['success']
    line = succses['line']
    print(line)

s.close() 
```

我已经四处寻找这个错误，我发现的页面没有解决我的问题，任何帮助工作不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T04:00:19.050

无论你收到什么，它似乎都没有在它应该结束的地方结束；例子：

```
>>> import json
>>> json.loads(""" {"Hello" : "World"} \ """)
....
ValueError: Extra data: line 1 column 21 - line 1 column 23 (char 21 - 23) 
```

我建议在解析输出之前检查您的输出以解决问题。

PS。有更简单的方法可以从服务器获取 JSON 数据（假设您的服务器返回可解析的 JSON，但它可能不会）。这是一个使用[请求](https://github.com/kennethreitz/requests)库的示例：

```
>>> import json, requests
>>> u = "http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?alt=json"
>>> json.loads(requests.get(u).text) # <-- request + parse
{u'feed': {u'category': [{u'term': u'http://gdata.youtube.com/... 
```

......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-06T06:48:40.790

在 json lib ->decoder.py->decode 函数中

```
if end != len(s):
       raise ValueError(errmsg("Extra data" , s , end , len(s))) 
```

这意味着如果您的字符串的 len != end 会引发此异常，并且结尾是字符串中的最后一个“}”位置。所以你我可以使用：

```
string = "".join([string.rsplit("}" , 1)[0] , "}"]) 
```

剪切最后一个“}”之后的额外数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T22:38:22.703

有时可能会有';' 在 JSON 字符串的尾部。只需将其删除：

```
json.loads(string.strip(';')) 
```

# asp.net - 在asp.net mvc 2中上传Http文件

> ID：14150825
> 
> 赞同：0
> 
> 时间：2013-01-04T03:48:51.410
> 
> 标签：asp.net, asp.net-mvc, http, asp.net-mvc-2, file-upload

我有简单的 http 表单来使用 http 输入标签上传文件，如下所示：

```
<% using (Html.BeginForm("Add", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
   {%>
     <label for="file"> Select File :</label>
     <input type="file" name="uploadedFile" value="" accept="text/plain" class="fileUpload" />
     <input id="btnAdd" type="submit" class="button" name="Add" value=" Add "/>
<% } %> 
```

回到控制器我有一个相应的动作：

```
[HttpPost]
public ActionResult Add(HttpPostedFileBase uploadedFile)
{
    Logger.Debug("Inside Add");

    ProductModel model = new ProductModel();

    if (uploadedFile.ContentLength > 0)
    {
        string filePath = Path.Combine(HttpContext.Server.MapPath("~/Uploads"),
                                       Path.GetFileName(uploadedFile.FileName));
        Logger.Debug("File saved at - " + filePath);
        uploadedFile.SaveAs(filePath);
        model.FileName = uploadedFile.FileName;
        model.Add(filePath);
        return View("Result", model);
    }
    return RedirectToAction("Index");
} 
```

在我的开发机器和实验室服务器上，这非常有效。但在生产中，它甚至不会发送任何提交按钮的请求。我通过提琴手检查了请求，它没有显示请求甚至来自此表单的任何痕迹，来自 win 2008 r2 生产服务器上的 IE 8。

我在这里一无所知。可能是什么问题？您认为 IE 安全权限、UAC、组策略可能是个问题吗？或者你还有其他话要说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:35:04.057

`uploadFile`尝试`UploadedFile`在视图中将文件输入的名称从更改为

```
<% using (Html.BeginForm("Add", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
   {%>
     <label for="file"> Select File :</label>
     <input type="file" name="UploadedFile" value="" accept="text/plain" class="fileUpload" />
     <input id="btnAdd" type="submit" class="button" name="Add" value=" Add "/>
<% } %> 
```

# php - 将 PHP 数组内爆到 HTML 文本区域中

> ID：14150826
> 
> 赞同：1
> 
> 时间：2013-01-04T03:48:58.373
> 
> 标签：php, html

我正在尝试将一个内爆的 PHP 数组回显到一个文本框中。该数组是通过 file() 函数读取文件来创建的，如下所示：

```
$bad_phrases=file('bad_phrases.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

然后在脚本中使用该数组，我需要在 HTML 中再次输出它：

```
<textarea>
    <?php
    echo implode("\n", $bad_phrases);
    ?>
</textarea> 
```

但是，当我尝试这样做时，我在 textarea 中得到了一些奇怪的格式。结果如下：

```
"       adsfsf
asdfsd
sddsds  " 
```

但是，当在浏览器上查看 bad_phrases.txt 时，它显示得很好：

```
adsfsf
asdfsd
sddsds 
```

并`var_dump`显示数组很好：

```
var_dump($bad_phrases);
array(3) { [0]=> string(6) "adsfsf" [1]=> string(6) "asdfsd" [2]=> string(6) "sddsds" } 
```

那么我在 Implode 上做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T03:51:50.887

去掉里面的空格：

```
<textarea><?php echo implode("\n", $bad_phrases);?></textarea> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T03:52:24.643

您的输出中有一些额外的空白，这是它的来源：

![在此处输入图像描述](../Images/49af1269ed1d89eb7f1ba7ef18e8e034.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:56:04.020

由于`<textarea>`代码不会忽略空格，因此您拥有的新行和制表符会将其弄乱。基本上，只需将标签移动到这样的位置：

```
<textarea><?php
    echo implode("\n", $bad_phrases);
?></textarea> 
```

# php - 如何从 web 服务获取文件并使用 php 将它们保存在我们的磁盘上？

> ID：14150829
> 
> 赞同：2
> 
> 时间：2013-01-04T03:49:16.923
> 
> 标签：php, web-services, file

我可以成功连接到 Web 服务，它提供了我需要将它们保存在磁盘上的文件列表，我想知道如何下载并将它们保存在磁盘上？

简单响应如下（响应缩短）

```
 <files>
   <file>
       <name>1.jpeg</name>
       <address>c:\photos\1.jpeg</address>
       <url>www.xxx.com\photos\1.jpeg</url>
   </file>
   <file>
       <name>my.pdf</name>
       <address>c:\pdfs\my.pdf</address>
       <url>www.xxx.com\pdfs\my.pdf</url>
  </file>
</files> 
```

我发现了以下内容，但不确定如何保存 $output

```
 function url_get_contents ($Url) {
     if (!function_exists('curl_init')){ 
          die('CURL is not installed!');
     }
     $ch = curl_init();
     curl_setopt($ch, CURLOPT_URL, $Url);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
     $output = curl_exec($ch);
     curl_close($ch);
     return $output;
 } 
```

我使用了以下内容但出了点问题，它创建了文件但它是空的

```
$fp = fopen("lib\1",'x');
fwrite($f, $output);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:06:06.873

您的 Web 服务提供的文件是否公开可用且无需身份验证？如果是这样，有很多方法可以获取文件，前提是您知道它们的完整位置......

您可以使用[PHP 的 file_get_contents](http://php.net/manual/en/function.file-get-contents.php)来获取文件的内容，然后将其保存在某处......

```
$page = file_get_contents('NETWORK_ADDRESS\pdfs\my.pdf'); 
```

或者您可以使用 CURL，看看[这个问题的答案](https://stackoverflow.com/questions/3979802/alternative-to-file-get-contents)，有一个完整的代码示例向您展示如何使用 CURL 和 PHP 下载文件。

或者，如果您的文件是 PHP 安装的本地文件（不太可能），您可以使用 PHP 的 Copy 功能将文件移动到您想要的位置。[在此处阅读有关副本的信息。](http://php.net/manual/en/function.copy.php)

一旦你有了文件，让我们假设按照我上面的例子在 $page 变量中，使用 file_put_contents 来保存该文件的内容......

```
$file = 'filename.ext';
file_put_contents($file, $page); 
```

有关 file_put 内容的更多信息，请[点击此处](http://php.net/manual/en/function.file-put-contents.php)。

有很多方法可以做到这一点，只要文件是可访问的。给我们更多信息，我们可以提出合适的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:11:29.260

您需要知道公共 URL 才能下载文件。换句话说，除了服务器之外的任何人如何访问这些文件？这是什么类型的网络服务？你使用什么协议？如果它可以公开访问，您可以使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)来保存文件。否则，[curl](http://us3.php.net/manual/en/curl.examples-basic.php)和一些身份验证可能会满足您的需求。

# c# - 将 C# 项目从 VS2010 升级到 VS2012

> ID：14150831
> 
> 赞同：3
> 
> 时间：2013-01-04T03:49:59.010
> 
> 标签：c#, visual-studio-2010, configuration, visual-studio-2012

我在 VS2010 中有一个使用 Winform 的产品，它由多个多项目解决方案组成。我需要将它移植到 VS2012。为什么你可能会问？因为我们需要用到WF4.5的特性。

有人对这个有经验么？

是不是像安装VS2012，在vs2012中打开解决方案，编译链接一样简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:31:37.940

**简而言之：**您可以将 VS2010 项目升级到 VS2012，但是 Windows 窗体应用程序不会显式升级。

**选项 #1：**如果您仍想保留 WinForm 项目而不是将其转换为 WPF 应用程序，那么您必须通过服务使用 WF4.5 功能。

**选项 #2：**尽管 Microsoft 删除了创建 C++/CLI Windows 窗体应用程序的选项，但仍会安装模板文件。唯一缺少的似乎是 .vsz 文件和 vcNET.vcdir 文件中的注册。我已经重新创建了这些文件并将它们放在[此处](http://www.t-hart.org/vs2012/)以供下载。

安装文件，您应该能够再次在 C++/CLI 中创建 WinForm 应用程序。

**选项 #3：**您仍然可以根据这篇文章单独升级您的项目 -[免费：Visual Studio Express 2012 for Windows Desktop](http://www.hanselman.com/blog/FREEVisualStudioExpress2012ForWindowsDesktop.aspx)。

**在升级到 .NET4.5 之前**，我的建议是检查所有第三方组件，并确保它们具有升级版框架的更新。

# objective-c - 如何在 Objective-C 中检索资源的原始文件路径？

> ID：14150837
> 
> 赞同：0
> 
> 时间：2013-01-04T03:50:54.823
> 
> 标签：objective-c, xcode

您可以使用以下内容获取作为已编译应用程序包一部分的文件的路径：

```
[[NSBundle mainBundle] pathForResource:@"MyFile" ofType:@"txt"];
// .../iPhone Simulator/6.0/Applications/52AD3E56-41DC-4A0E-A435-DACBF9475540/MyApp/MyFile.txt 
```

但是有没有办法在 Xcode 项目的目录中获取原始文件的路径？

对于上面的示例，它将类似于`~/projects/xcode/MyApp/MyFile.txt`.

这是上下文：我正在处理一个项目（[NUI](https://github.com/tombenner/nui)）并且希望能够运行应用程序，在应用程序运行时在 Xcode 中修改资源文件，然后在应用程序运行时重新读取应用程序中新修改的文​​件仍在运行。

这只会在开发期间使用。这不是明确可能的吗，有人对这个问题的其他方法有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:01:31.853

资源文件（在您的情况下为 MyFiles.txt）在应用程序内被沙盒化。正如您已经提到的，您可以使用 mainBundle pathForResource 在运行时从应用程序内部访问它们。但是一旦创建了应用程序包，就没有从 Xcode 访问该文件的问题，因为应用程序使用的是包内的 MyFile.txt，而不是您在 Xcode 项目中添加的那个。所以简单来说，当你的应用程序运行时，它不会访问 Xcode 中的 txt 文件。此 txt 文件是应用程序本身的一部分，位于应用程序包中。

现在的问题是-**您可以从应用程序访问此文件**吗-AFAIK，不，您不能这样做。

# scheduled-tasks - AutoSys Job 多重依赖问题：s(1) & s(2) & s(3)

> ID：14150845
> 
> 赞同：0
> 
> 时间：2013-01-04T03:51:45.093
> 
> 标签：scheduled-tasks, scheduling, scheduler, job-scheduling, autosys

我有 4 个工作：1、2、3、4。

2的条件：s(1)；3的条件：s(2)；4的条件：s(1) & s(2) & s(3)

所有这些工作都是**日常工作**

第一天没问题。第二天，第四份工作触发**了多次**：

我认为当 1 成功时，并且 2 和 3 的状态仍然是“成功”（最后几天的状态），所以触发了作业 4，

然后2成功，再次触发...

那么有什么解决方案吗？因为我只希望这些条件基于当天的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-25T14:01:19.883

是的，如果您正在运行最新版本的 Autosys，您可以根据时间设置成功条件。在您的情况下，您可以设置为：4 的条件：s(1, 23.00) & s(2, 23.00) & s(3, 23.00)

此条件检查作业 1、2、3 在过去 23 小时内是否成功。

格式为：*S* ( *jobname* , *hh.mm* )

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:27:05.177

这已在 stackoverflow.com 上得到解答。解决方案取决于您使用的 Autosys 版本。如果是最新版本的 R11，您可以将 job_a 的回溯依赖项设置为仅当 job_c 在 X 小时内运行到 S 时才运行。

完整答案在这里： [Autosys 对大型机作业的依赖](https://stackoverflow.com/questions/1780761/autosys-dependency-on-mainframe-job)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T17:43:27.057

一种解决方案是将所有 4 个作业包含在一个 Box 作业中，并且每当 Box 作业启动时，所有作业都将变为活动状态，并且仅在完成所有依赖项时才会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T05:46:38.410

将所有 4 个工作放在一个盒子里。然后，您可以将job4的运行条件更改为job3的成功。*

# c# - 从代码隐藏中获取多个用户控件中的 GridView

> ID：14150848
> 
> 赞同：0
> 
> 时间：2013-01-04T03:52:04.057
> 
> 标签：c#, asp.net, html, code-behind

**IpInterfaceUC 用户控件：**

```
<div id="dvChannel" runat="server" style="height: 205px; width: 550px; overflow: auto;
        margin-left: 5px;">
        <asp:GridView ID="gvChannelUC">
</div> 
```

**初始化的代码隐藏**

```
int indexInterface=0;
foreach (DataRow row in dtDevicesListByRole.Rows)
{
                    ctrIpInterfaceUC = (Test2.SetupGroup.Ipservice.IpInterfaceUC)LoadControl("IpInterfaceUC.ascx");
                    Control ctr = (Control)ctrIpInterfaceUC;
                    ctr.ID = "device_"+ip+"_"+port+"$"+indexInterface;
                    phDevices.Controls.Add(ctr);//PlaceHolder for add many UserControl
} 
```

**显示**

```
<div id="dvChannel">
<div id="device_192.168.2.19_3331_0_pnlChannelUC">
  <div id="device_192.168.2.19_3331_0_dvChannel">
    <table id="device_192.168.2.19_3331_0_gvChannelUC">
    </table>
  </div>
</div>
<div id="dvChannel">
<div id="device_192.168.2.19_3331_1_pnlChannelUC">
  <div id="device_192.168.2.19_3331_1_dvChannel">
    <table id="device_192.168.2.19_3331_1_gvChannelUC">
    </table>
  </div>
</div> 
```

**问题** 如何从多个 UserControl 中获取 gridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:08:25.587

通过 UserControl 上的公共属性公开 gridview：

```
public GridView Grid
{
  get { return gvChannelUC; }
} 
```

然后

```
List<string, string> Grids = new List<string, string>(); // <UCId, GridId>
...
ctrIpInterfaceUC = (Test2.SetupGroup.Ipservice.IpInterfaceUC)LoadControl("IpInterfaceUC.ascx");
string Id = "device_"+ip+"_"+port+"$"+indexInterface;

GridView ctrGridView = ctrIpInterfaceUC.Grid;
Grids.Add(Id, ctrGridView.ClientID);

Control ctr = (Control)ctrIpInterfaceUC;
ctr.ID = Id
phDevices.Controls.Add(ctr);//PlaceHolder for add many UserControl
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:00:17.943

虽然您可以递归地使用 FindControl 来查找它，但更好的方法是让 UserControl`IpInterfaceUC`决定如何将数据绑定到其中的控件。

您可以向 UserControl 添加一个公共方法`ShowData`并将要显示的数据传递给它。然后它可以将其分配给`gvChannelUC`.

```
int indexInterface=0;
foreach (DataRow row in dtDevicesListByRole.Rows)
{
    var ctrIpInterfaceUC = (Test2.SetupGroup.Ipservice.IpInterfaceUC)LoadControl("IpInterfaceUC.ascx");
    ctrIpInterfaceUC.ShowData(myRows);
    ctrIpInterfaceUC.ID = "device_"+ip+"_"+port+"$"+indexInterface;
    phDevices.Controls.Add(ctrIpInterfaceUC);//PlaceHolder for add many UserControl
} 
```

# android - 加密文本的解密

> ID：14150849
> 
> 赞同：0
> 
> 时间：2013-01-04T03:52:09.883
> 
> 标签：android

是否可以在android中加密和解密文本但我发现了一个错误但我不知道如何修复它，

代码是...

```
 Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());        
    byte[] input = " www.java2s.com ".getBytes();
    byte[] keyBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,
        0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17 };

    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding", "BC");
    System.out.println("input text : " + new String(input));

    // encryption pass

    byte[] cipherText = new byte[input.length];
    cipher.init(Cipher.ENCRYPT_MODE, key);
    int ctLength = cipher.update(input, 0, input.length, cipherText, 0);
    ctLength += cipher.doFinal(cipherText, ctLength);
    System.out.println("cipher text: " + new String(cipherText) + " bytes: " + ctLength);

    // decryption pass

    byte[] plainText = new byte[ctLength];
    cipher.init(Cipher.DECRYPT_MODE, key);
    int ptLength = cipher.update(cipherText, 0, ctLength, plainText, 0);
    ptLength += cipher.doFinal(plainText, ptLength);
    System.out.println("plain text : " + new String(plainText) + " bytes: " + ptLength); 
```

显示错误的第一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:26:02.003

由于错误来自第一行，您可能忘记[添加 bouncycastle provider](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:55:59.537

您首先应该知道，当您修复密钥或生成不安全的密钥时，加密会变得非常脆弱！

[在这里查看我的答案，](https://stackoverflow.com/questions/14022934/android-cipher-encrypt-decrypt/14023167#14023167)您会发现一个易于使用的通用 SecurityUtil 类，它可以执行基于密码的 AES 加密/解密，这可能对您有用。

# ruby-on-rails - 设计不会在生产中发送邮件

> ID：14150851
> 
> 赞同：2
> 
> 时间：2013-01-04T03:52:42.083
> 
> 标签：ruby-on-rails, devise, actionmailer

我似乎无法设计在生产中发送确认邮件。日志中没有错误，并且 sendmail 工作正常。这是我的生产配置：

```
config.action_mailer.delivery_method = :sendmail
config.action_mailer.smtp_settings = {  
  :enable_starttls_auto => true,  #this is the important stuff!
  :address => "localhost",
  :port    => 25,
  :domain  => 'beautifulidiot.com',
  :openssl_verify_mode  => 'none',
  :perform_deliveries => true
} 
```

我尝试将交付方式更改为：smtp，也没有运气。这是 Rails 3.2.5。

感谢您的帮助，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T07:31:58.363

问题是您将 delivery_method设置为，`:sendmail`但您将设置设置为`smtp`. 要解决您的问题，请执行以下任一操作：

**选项 1**：

```
config.action_mailer.delivery_method = :sendmail
config.action_mailer.send_mail_settings = { ... } 
```

**选项 2**：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = { ... } 
```

看起来您的设置是针对的`:sendmail`，所以最好先尝试选项 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T07:02:34.727

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
      :address              => "smtp.gmail.com",
      :port                 => 587,
      :domain               => 'mail.google.com',
      :user_name            => 'lisabrown472@gmail.com',
      :password             => 'XXXX',
      :authentication       => 'plain',
      :enable_starttls_auto => true  
  } 
```

并根据您的凭据替换凭据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:59:54.290

尝试这个：

```
config.action_mailer.perform_deliveries = true 
```

并且不要忘记重新启动服务器

# amazon-web-services - AWS S3 内联显示文件而不是强制下载

> ID：14150854
> 
> 赞同：104
> 
> 时间：2013-01-04T03:53:22.930
> 
> 标签：amazon-web-services, amazon-s3

出于某种原因，我的 S3 存储桶中的文件被强制作为下载而不是内联显示，因此如果我复制图像链接并将其粘贴到地址栏中然后导航到它，它将促使我的浏览器下载它。相反，我实际上必须单击打开的图像才能转到 url。

更改从 S3 提供文件的方式的任何方法

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-09-24T04:38:16.640

```
$client->putObject(array(
        'Bucket'     => 'buckname',
        'Key'        => $destination,
        'SourceFile' => $source,
        'ContentType' =>'image/jpeg', //<-- this is what you need!
        'ACL'          => 'public-read'//<-- this makes it public so people can see it
    )); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-04T05:32:36.447

您需要更改内容类型。在 S3 控制台中，右键单击对象并选择属性，然后它位于元数据下。您也可以以编程方式进行：http: [//docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/change_content_type](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/change_content_type)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-04-05T09:52:07.340

您还需要为 inline 而不是 attachment 指定 Content Disposition 。

```
$client->putObject(array(
    'Bucket'     => 'buckname',
    'Key'        => $destination,
    'SourceFile' => $source,
    'ContentType' =>'image/jpeg', //<-- this is what you need!
    'ContentDisposition' => 'inline; filename=filename.jpg', //<-- and this !
    'ACL'          => 'public-read'//<-- this makes it public so people can see it
)); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-05-04T20:15:21.757

如果你使用 python，你可以设置[ContentType 如下](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.upload_file)

```
s3 = boto3.client('s3')

mimetype = 'image/jpeg' # you can programmatically get mimetype using the `mimetypes` module
s3.upload_file(
    Filename=local_path,
    Bucket=bucket,
    Key=remote_path,
    ExtraArgs={
        "ContentType": mimetype
    }
) 
```

您也可以在 aws cli 中实现相同的目的。注意`*.jpeg`检查[s3](https://docs.aws.amazon.com/cli/latest/reference/s3/index.html)文档

```
aws s3 cp \
      --exclude "*" \
      --include "*.jpeg" \
      --content-type="image/jpeg"  \
      --metadata-directive="REPLACE" \
      --recursive \
      --dryrun \
       s3://<bucket>/<path>/ \
       s3://<bucket>/<path>/ 
```

或者，如果您想一次修改一个对象，您可能需要使用[s3api copy-object](https://docs.aws.amazon.com/cli/latest/reference/s3api/copy-object.html)

```
aws s3api copy-object \
    --content-type="image/jpeg" \
    --metadata-directive="REPLACE" \
    --copy-source "<bucket>/<key>" \
    --bucket "<bucket>" \
    --key "<key>" \
    --acl public-read 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-28T12:08:59.977

您也可以从 AWS S3 控制台更改内容类型。

[![在此处输入图像描述](../Images/c785512c6f0a7a9440a4c80b92b78df6.png)](https://i.stack.imgur.com/BPYnT.png)

然后你会看到侧面弹出，用它来手动更改它。

[![在此处输入图像描述](../Images/df3c9a7b1deefb404d620df87dd00bc0.png)](https://i.stack.imgur.com/NxQ8Q.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-13T12:20:45.940

你可以试试这个，这对我有用。

```
const params = {
          Bucket: 'bucket-name',
          Body: file,
          ACL: 'public-read',
          ContentType: contentType,
          ContentEncoding: 'base64',
          ContentDisposition: 'attachment',
        }; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-17T11:13:58.713

你可以试试这个，如果你已经在浏览器上打开了任何 URL，那么 ContentType 是必须在浏览器中打开的，然后在隐身模式下尝试。

```
var params = {
            Bucket: config.BUCKET_NAME,
            Key: fileName,
            ContentEncoding: 'base64',
            ContentDisposition: 'inline',
            ContentType: 'image/jpeg',
            Body: buf
        }; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-24T13:56:00.817

我发现如果我们向它传递一个空值，`ContentType`它将打开文件而不是下载。

上传各种扩展名的文件时，这实际上很好。

```
$s3->putObject(
[
    'Bucket' => ..,
    'Key' => ..,
    'Body' => ..,
    'ContentType' => '', <---
    'ACL' => 'public-read',
]); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-29T00:32:27.707

我今天遇到了同样的问题。问题出在`Content-type`属性上，当我将文件保存在 s3 中时。例如，我正在使用 Spring Boot，s3 中的内容数据保存 `application/octet-stream`在 value 属性中`image/jpeg`，而不是 . 因此，当我打开文件链接时，浏览器下载了文件。

这个问题的解决方案是`Content-type`在s3中保存文件之前更改！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-18T19:13:30.870

使用这两个属性强制浏览器从 s3 内联文件：

“响应内容类型”和“响应内容处置”

您可以在生成签名 URL 时在 getCommand 中使用它们

```
$cmd = $s3Client->getCommand('GetObject', [
        'Bucket' => $bucket_name,
        'Key' => $filename,
        'ResponseContentType' =>  get_mime_type($filename),
        'ResponseContentDisposition' => 'inline; filename='.$user_filename
    ]); 
```

get_mime_type 只是我使用文件名返回 mime 类型的自定义函数

这是我遇到同样问题时使用的，我的 s3 存储桶中有数百万个文件，我无法在控制台中单独更改 mime 类型

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-28T12:21:56.403

如果您以隐身方式打开它，它会起作用，但由于某种原因它不会起作用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-04T05:29:14.633

如果使用 Java SDK 的人正在为此寻找解决方案，您需要将内容类型设置为 ObjectMetaData。

```
ObjectMetadata objectMetadata = new ObjectMetadata();
objectMetadata.setContentType("image/png");

s3client.putObject(new PutObjectRequest
    (bucketName, fileName + ".png", inputStream, 
     objectMetadata).withCannedAcl(CannedAccessControlList.PublicRead)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-10T22:58:58.347

真正对我有用的是 在保存 S3 文件之前将`ContentType`参数设置为。`image/png`

# android - 在其他设备上强制关闭，但在我的设备上有效

> ID：14150856
> 
> 赞同：0
> 
> 时间：2013-01-04T03:53:40.093
> 
> 标签：android, forceclose

我正在开发一个应用程序，它读取 sd 卡上的音频文件并在按下开始按钮时播放它们。奇怪的是，该应用程序在我的 Droid RAZR 上运行良好，但在其他设备上时崩溃。我已经在我父亲的 Droid RAZR 以及我的朋友三星 Galaxy S2 和我的旧 Droid Incredible 上尝试过它并且崩溃了。我将手机中的 SD 卡放入了我的 Incredible 中，它曾经工作过一次，但是当我将它放入我父亲的时，我并没有得到相同的结果。

这是带有光标的方法的代码：

```
private void init_phone_music_grid() {
    System.gc();
    String[] proj = { MediaStore.Audio.Media.DURATION,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.ARTIST }; // was originally set to MediaStore.Video.Media.ARTIST

    musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            proj, MediaStore.Audio.Media.DURATION + ">= 65000", null, null );
    count = musiccursor.getCount(); //causes force close, when plugged in sometimes; not an issue with StateCheck class
    musiclist = (ListView) findViewById(R.id.lvTrackList);
    musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

    musiclist.setOnItemClickListener(musicgridlistener);
    mMediaPlayer = new MediaPlayer();
} 
```

这是 OnCreate 方法的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initializeVars();

    init_phone_music_grid();
    //countDown();
    trackList.setCacheColorHint(Color.GRAY);

    start.setEnabled(false);
    pause.setEnabled(false);
    reset.setEnabled(false);
    trackList.setVisibility(View.INVISIBLE);
    instructions.setVisibility(View.VISIBLE);

    //*** USED FOR TESTING!!! ***//
    Calendar date = Calendar.getInstance();
    if(date.get(Calendar.DAY_OF_YEAR) >= 6) {
        AlertDialog.Builder builder1 = new AlertDialog.Builder(this);
        builder1.setCancelable(false);
        builder1.setMessage("This test version of Musercise has ended! Buy the real one if you want to use it!");
        builder1.setPositiveButton("Close",
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
                finish();
            }
        });

        AlertDialog alert11 = builder1.create();
        alert11.show();
    }
    // END TESTING

    start.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            chrono.setBase(SystemClock.elapsedRealtime() + timeWhenStopped);
            chrono.start();

            for(int i = 0; i <= trackList.getCount() - 1; i++) {
                randomArray[i] = i;
            }
            shuffleArray(randomArray);

            if(!isPaused) {
                MyTimerTask myTask = new MyTimerTask();
                timer = new Timer();
                timer.schedule(myTask, (totalTimeLong)*60000);                  
            }else if(resumeNeeded){
                MyTimerTask myTask = new MyTimerTask();
                timer = new Timer();
                timer.schedule(myTask, timeRemainingAfterPause);
                resumeNeeded = false;
                pause.setEnabled(true);
            }

            if(!mMediaPlayer.isPlaying()) {
                music_column_index = musiccursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
                musiccursor.moveToPosition(randomArray[0]);
                String filename = musiccursor.getString(music_column_index);

                    try {
                        mMediaPlayer.setDataSource(filename);
                    } catch (IllegalArgumentException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        mMediaPlayer.prepare();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    mMediaPlayer.start();

            }

            if(mMediaPlayer.isPlaying()) {
                includeWarmUp.setEnabled(false);
                includeCoolDown.setEnabled(false);
                test.setEnabled(false);
                start.setEnabled(false);
                trackList.setVisibility(View.VISIBLE);
                instructions.setText("Track List:");
            }

            isPaused = false;
            drawer.setBackgroundResource(R.drawable.run);
        }
    });

    pause.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            isPaused = true;
            resumeNeeded = true;
            timeWhenStopped = chrono.getBase() - SystemClock.elapsedRealtime();
            chrono.stop();
            mMediaPlayer.pause();

            long elapsedMillis = SystemClock.elapsedRealtime() - chrono.getBase();
            timer.cancel();
            timeRemainingAfterPause = totalTimeLong*60000 - elapsedMillis;

            start.setEnabled(true);
            pause.setEnabled(false);

            drawer.setBackgroundResource(R.drawable.pause);
        }
    });

    reset.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            chrono.stop();
            timeWhenStopped = 0;
            chrono.setBase(SystemClock.elapsedRealtime());
            mMediaPlayer.reset();

            start.setTextColor(Color.BLACK);
            pause.setTextColor(Color.BLACK);

            includeWarmUp.setEnabled(true);
            includeCoolDown.setEnabled(true);
            test.setEnabled(true);
            start.setEnabled(true);
            pause.setEnabled(true);
            trackList.setEnabled(true);

            drawer.setBackgroundResource(R.drawable.ic_launcher);
        }
    });

    test.setOnSeekBarChangeListener(this);
} 
```

Logcat 崩溃时：

```
01-03 19:41:01.678: E/AndroidRuntime(499):  android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.database.CursorWrapper.getString(CursorWrapper.java:135)
01-03 19:41:01.678: E/AndroidRuntime(499):  at com.flannigan.musercise.MuserciseActivity$3.onClick(MuserciseActivity.java:133)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.view.View.performClick(View.java:2408)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.view.View$PerformClick.run(View.java:8816)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.os.Handler.handleCallback(Handler.java:587)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.os.Looper.loop(Looper.java:123)
01-03 19:41:01.678: E/AndroidRuntime(499):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-03 19:41:01.678: E/AndroidRuntime(499):  at java.lang.reflect.Method.invokeNative(Native Method)
01-03 19:41:01.678: E/AndroidRuntime(499):  at java.lang.reflect.Method.invoke(Method.java:521)
01-03 19:41:01.678: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-03 19:41:01.678: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-03 19:41:01.678: E/AndroidRuntime(499):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:12:25.500

你得到这个`error`：

```
android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

这意味着您`cursor size`是 0 并且您正在尝试从中获取数据`index 0`，这会变成`force close`.

**这条线，**

```
String filename = musiccursor.getString(music_column_index); 
```

**尝试用这种方式覆盖**，

```
if(music_column_index > 0)
   String filename = musiccursor.getString(music_column_index);
else
   // Toast some error message 
```

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:20:04.720

不要简单地`moveToPosition()`在 cursor 上，确保 cursor*可以*到那个位置。

对游标使用附加检查，即游标不为空，`moveToFirst()`为真，并且行数位于您提供给的任何索引之间`moveToPosition()`。

```
if( cur != null && cur.getCount() > 0){
  int rnd = //--some random number--

  //--clamp rnd to cursor size--
  rand = Math.max(0,Math.min(cur.getCount() - 1,rnd)); 

  if(cur.moveToPosition(rnd)){
    //--do stuff--
  }

} 
```

除此之外，不要通过列索引获取值，而是重用定义的列名：

```
musiccursor.getString(musiccursor.getColumnIndex(MediaStore.Audio.Media.DATA)); 
```

如果它在投影中，那么它将*在*带有数据的结果游标中。

# reporting-services - SSRS 2012 PDF 电子邮件订阅呈现出与本地运行不同的价值。怎么会这样？

> ID：14150858
> 
> 赞同：1
> 
> 时间：2013-01-04T03:54:02.733
> 
> 标签：reporting-services, subscription

如果我让 SSRS 2012 订阅通过电子邮件发送我的报告，则在报告中找到 AVG 值的单元格将显示为“NaN”。如果我自己运行报告，它看起来很好，如果我从该报告创建 PDF，它看起来也很好。仅当从订阅运行报告时，该值才会更改为“NaN”。我在哪里寻找这样的问题？订阅运行报表和我在本地运行报表有什么不同？

# gdi - Win32/GDI 为三角形着色

> ID：14150859
> 
> 赞同：2
> 
> 时间：2013-01-04T03:54:05.750
> 
> 标签：gdi, win32gui

我正在使用顶点以及 LineTo() 和 MoveTo() 函数制作一系列三角形来表示 3D 形状。

为这些三角形着色/填充的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:40:54.677

[MSDN 有一个绘制阴影三角形的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162486%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T12:25:01.430

只需使用多边形（）。

[http://www.functionx.com/win32/Lesson12.htm](http://www.functionx.com/win32/Lesson12.htm)

[https://msdn.microsoft.com/en-us/library/windows/desktop/dd162814(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/dd162814(v=vs.85).aspx)

使用 CreateSolidBrush() 创建画笔，然后使用 SelectObject() 将画笔安装到 HDC 中。然后你有了实心画笔，调用超过 3 个顶点的 Polygon() 将让它为你绘制一个实心三角形。

# c++ - 提升元组部分迭代？

> ID：14150861
> 
> 赞同：1
> 
> 时间：2013-01-04T03:54:57.157
> 
> 标签：c++, boost, metaprogramming, tuples, template-meta-programming

我正在尝试使用 boost 元组来避免一些虚函数开销，但我不能让它工作。我有一个试图处理输入的“处理程序”向量，一旦其中一个返回 true，我不想调用其余的。

C++11 不可用。

首先，当前的虚拟实现如下所示：

```
std::vector<Handler*> handlers;

//initialization code...
handlers.push_back(new Handler1);
handlers.push_back(new Handler2);
handlers.push_back(new Handler3);

//runtime code
for(std::vector<Handler*>::iterator iter = handlers.begin();
    iter != handlers.end() && !(*iter)->handle(x); ++iter) {} 
```

由于我在编译时拥有所有类型，因此我希望能够将其表示为一个元组，如下所示：

```
boost::tuple<Handler1,Handler2,Handler3> handlers;

//runtime code
???
// should compile to something equivalent to:
// if(!handlers.get<0>().handle(x))
//   if(!handlers.get<1>().handle(x))
//     handlers.get<2>().handle(x); 
```

理想情况下，不会有虚函数调用，并且任何空函数体都会内联。似乎这几乎是可能的`boost::fusion for_each`，但我需要短路行为，一旦其中一个处理程序返回 true，其余的就不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:07:47.663

你可以尝试这样的事情：

```
void my_eval() {}
template<typename T, typename... Ts>
void my_eval(T& t, Ts&... ts) {
  if(!t.handle(/* x */))
    my_eval(ts...); 
}

template<int... Indices>
struct indices {
  using next_increment = indices<Indices..., sizeof...(Indices)>;
};

template<int N>
struct build_indices {
  using type = typename build_indices<N - 1>::type::next_increment;
};
template<>
struct build_indices<0> {
  using type = indices<>;
};

template<typename Tuple, int... Indices>
void my_call(Tuple& tuple, indices<Indices...>) {
    my_eval(std::get<Indices>(tuple)...);
}
template<typename Tuple>
void my_call(Tuple& tuple) {
    my_call(tuple, typename build_indices<std::tuple_size<Tuple>::value>::type());
} 
```

要使用只需将您的元组传递给`my_call`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:11:36.377

简单的模板递归应该生成一个合适的尾调用函数链。

```
template< typename head, typename ... rest >
void apply_handler_step( thing const &arg, std::tuple< head, rest ... > * ) {
    if ( ! handler< head >( arg ) ) {
        return apply_handler_step( arg, (std::tuple< rest ... >*)nullptr );
    } // if handler returns true, then short circuit.
}

void apply_handler_step( thing const &arg, std::tuple<> * ) {
    throw no_handler_error();
} 
```

如果要将函数指针放入元组中的处理程序，则需要使用索引值进行递归并使用`get< n >( handler_tuple )`，但原理是相同的。

# google-app-engine - 批量更新队列

> ID：14150862
> 
> 赞同：1
> 
> 时间：2013-01-04T03:54:59.293
> 
> 标签：google-app-engine

我看到一个非常常见的要求是更新特定实体类型的所有行的字段或值，它通常超过 10 分钟的队列限制。

那么，使用可以完成所有行更新的任务队列来运行 cron 作业的最佳方法是什么？

我尝试的一种方法是在 cron 作业中触发查询，然后创建多个大小相同的 id 列表，例如每个列表包含 100 个 id。然后通过传递 id 列表为每个列表生成一个任务。然后在任务代码中使用获取实体行

pm.getObjectId 然后处理它。

我仍然觉得这种方法有点手动而不是智能。有没有更好的处理方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:33:45.947

如果您有现金可烧，请使用后端；它们没有限制（尽管使用后端来处理单个大请求是浪费的......只有在您有其他工作可以卸载时才考虑这一点）。

更有可能的是，您真正想做的是分片。也就是说，将一个大的线性任务分解成一堆更小的、可并行化的任务。

我经常使用的常见模式是让一个请求只进行调度......也就是说，查询您需要做的工作，收集要操作的键列表，然后启动批量工作，例如，一次 100 个任务（发送尽可能多的数据，以避免在不需要时重新查询）。

这样，只有 dispatcher 需要导航完整的数据集，而不需要执行任何耗时的更新，而且只要不到 10 分钟，你应该是黄金。

现在，根据您的实体祖先设置，您可能会在尝试并行更新数千个实体时遇到争用（如果您的调度程序太快，可能会发生这种情况）。简单的解决方案是设置 .withCountDownMillis((latency+=1000)) 为每个请求提供大约一秒钟的喘息空间（可能更多，具体取决于实体的大小和每个实体的索引数量）。使用 appstats 对您的应用程序进行基准测试，以查看每个实际需要多长时间，并给它们额外的 500 毫秒左右来覆盖标准偏差。

现在...我还想知道您正在处理多少个实体，那 10 分钟还不够长...您使用的是异步 api 吗？批处理请求怎么样？如果您一次对一个实体进行操作，并阻止每个实体的 get/put，您将很容易达到限制。

相反，请查看异步请求。使用异步，我可以启动一个 put，存储 Future，再启动一堆，然后当我最终确定 Future 时，操作已经完成，我基本上支付 0milli 墙时间阻塞请求。

即使你不能使用低级异步（仍然强烈推荐），至少考虑使用批处理。也就是说，不是一次放一个，而是使用一个列表并每隔 50 个左右的实体执行一次 put + clear（如果它们很小，则更多）。这允许 appengine 内部后端并行化所有 50 个，因此您为每个实体序列化开销支付 1+ 的时间。

将异步和批处理与非争议实体结合起来，我通常能够每分钟处理大约 4000 个实体。如果您必须处理 40,000 多个实体，那么您需要研究适当的分片。为此，每（任意选择）1000 个实体获取一个键，并启动一个从前一个键（或空值）查询到下一个键的任务。这使您可以通过完成一项大工作并将其转变为更小的工作，从而在短时间内运行尽可能多的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:49:01.127

我用它来更新任务队列 10 分钟限制内的数百万条记录：

1.  创建一个循环，在每次迭代中[使用光标运行查询](https://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors)（不要使用`offset()`）。在每次迭代中使用下一个光标。这样，您将有效地遍历整个目标实体范围。用于`limit(1000)`每次获取一批 1000 个实体。还将[预取大小设置](https://stackoverflow.com/questions/6914069/google-app-engine-chunksize-prefetchsize-where-can-i-read-details-on-it)为 1000 以最小化网络往返。

2.  对于每个批次，更新属性，然后执行[async put](https://developers.google.com/appengine/docs/java/datastore/async)。

# java - 从我的 android 应用程序发送邮件

> ID：14150865
> 
> 赞同：1
> 
> 时间：2013-01-04T03:55:41.183
> 
> 标签：java, android, android-listview, sendmail

我必须开发一个 android 应用程序。在这里，我必须从我的 android 应用程序发送邮件。

我必须从我的 android 应用程序发送邮件 listview vlaues。

这是我的安卓代码：

```
public class InvoiceOrder extends Activity {

String mGrandTotal,mTitle,total,mCost;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    ListView mLstView1 = (ListView) findViewById(R.id.listView1);

    CustomerAdapter mViewCartAdpt = new CustomerAdapter(
            InvoiceOrder.this);
    mLstView1.setAdapter(mViewCartAdpt);

            Button login = (Button) findViewById(R.id.mBtnSubmit);
            login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"demo@mercuryminds.com"});
            i.putExtra(Intent.EXTRA_SUBJECT, "Testing");
            i.putExtra(Intent.EXTRA_TEXT   , "mLstView1");
            try {
                startActivity(Intent.createChooser(i, "Send mail..."));
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(InvoiceOrder.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            }
         }
      });
        } 
```

列表视图显示在这些活动中。我如何将该列表视图值发送到电子邮件。请给我解决方案。

**编辑：**

嗨，我已经**自动发送邮件**了。所以我使用了 javamailapi。

现在我改变了我的代码，如：

```
public class InvoiceOrder extends Activity {

String mGrandTotal,mTitle,total,mCost;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    ListView mLstView1 = (ListView) findViewById(R.id.listView1);

    CustomerAdapter mViewCartAdpt = new CustomerAdapter(
            InvoiceOrder.this);
    mLstView1.setAdapter(mViewCartAdpt);

            Button login = (Button) findViewById(R.id.mBtnSubmit);
            login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
             Properties props = new Properties();
                props.put("mail.smtp.host", "smtp.gmail.com");
                props.put("mail.smtp.socketFactory.port", "465");
                props.put("mail.smtp.socketFactory.class",
                        "javax.net.ssl.SSLSocketFactory");
                props.put("mail.smtp.auth", "true");
                props.put("mail.smtp.port", "465");

                Session session = Session.getDefaultInstance(props,
                    new javax.mail.Authenticator() {
                        protected PasswordAuthentication getPasswordAuthentication() {
                            return new PasswordAuthentication("mroslinmhary@gmail.com","fg565jhjjh");
                        }
                    });

                try {

                    Message message = new MimeMessage(session);
                    message.setFrom(new InternetAddress("krishnaveni.veeman@mercuryminds.com"));
                    message.setRecipients(Message.RecipientType.TO,
                            InternetAddress.parse("demo@mercuryminds.com"));
                    message.setSubject("Testing Subject");
                    message.setContent("This is your product name : "+
                            "Hi Krishna" +"<br></br>This is your price : "+ "Hi veni", "text/html; charset=utf-8");
                    Transport.send(message);

                    System.out.println("Done");

                } catch (MessagingException e) {
                    throw new RuntimeException(e);
                }
               }

      }); 
```

现在我必须自动将列表视图发送到电子邮件。我如何在此处设置内容。请给我想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:57:19.320

您需要有一个可以接收 Web 命令（可能是 REST）的 Web 应用程序，该命令将从您的应用程序接收请求并发送电子邮件。

例如，如果您的服务器位于 example.com，那么您可以拥有一个通过如下 URL 发送邮件的服务：

example.com/sendmail/ 并且您的 POST 变量将包含以下变量：主题、fromAddress、toAddress、内容等。

如果您可以使用 PHP、Ruby、Python 甚至 Java 等基于 Web 的语言进行编程，那么您可以编写此程序，然后只需从您的应用程序发送请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:00:10.810

要从 android 向用户发送电子邮件，用户可以通过两种方式进行操作。
方法一：
使用Intent。代码如下：

```
send = (Button) findViewById(R.id.emailsendbutton);

address = (EditText) findViewById(R.id.emailaddress);

subject = (EditText) findViewById(R.id.emailsubject);

emailtext = (EditText) findViewById(R.id.emailtext);

send.setOnClickListener(new OnClickListener() {

public void onClick(View v) {

// TODO Auto-generated method stub
    try {
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.setType("image/png");

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] { address.getText().toString() });

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());
//emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailtext.getText());

emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));

Sendingmail2.this.startActivity(Intent.createChooser(emailIntent,"Send mail..."));
    }
    catch (Exception e) {
        Log.e("", "sendPlainTextEmail() failed to start activity.", e);
        //Toast.makeText(this, "No handler", Toast.LENGTH_LONG).show();
        Toast.makeText(getApplicationContext(),"No handler", Toast.LENGTH_LONG).show();
    }
}
}); 
```

方法 2：通过输入静态 gmail id 和密码直接发送电子邮件到某个电子邮件 id 遵循以下 URL：
[http ://davanum.wordpress.com/2007/12/22/android-send-email-via-gmail-actually- via-smtp/](http://davanum.wordpress.com/2007/12/22/android-send-email-via-gmail-actually-via-smtp/)
或者可以通过在此处提供您的电子邮件 ID 来索取代码，并将向您发送我为直接发送电子邮件所做的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T06:32:34.610

尝试在 'message.setContent(' 函数中设置要作为电子邮件发送的数据。这将被添加到电子邮件正文中。（迭代列表视图并将数据放入字符串变量中，然后再添加到电子邮件中消息）那是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T04:07:05.027

使用以下代码发送电子邮件

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("plain/text");  
       emailIntent.putExtra(Intent.EXTRA_EMAIL  , new String[]{"demo@mercuryminds.com"});
       emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
       emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "body text"); 
       startActivity(emailIntent); 
```

# google-chrome - Google Chrome - 如何更改书签文件位置？

> ID：14150870
> 
> 赞同：-1
> 
> 时间：2013-01-04T03:56:14.770
> 
> 标签：google-chrome

我想将我的 google chrome 书签文件更改为我的保管箱，以便我可以在多台计算机上使用它。有什么办法>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:58:03.267

您只需在 Chrome 设置中登录 Google 帐户即可。

然后，您的书签（和扩展程序以及所有其他设置）将自动在所有计算机和移动设备之间共享。

# php - php执行命令tcpdump

> ID：14150872
> 
> 赞同：1
> 
> 时间：2013-01-04T03:56:55.540
> 
> 标签：php, shellexecute, tcpdump

我知道执行命令应该是 root，我发现 php 中的 popen() 可能会帮助我做到这一点。但是我的代码不起作用，我不知道原因......

我的代码是：

```
 $sucommand = "su --login root -c tcpdump -c 20000 -s 0 -w $filename &";
    $rootpasswd = "password";
    $fp = @popen($sucommand,"w");
    @fputs($fp,$rootpasswd);
    @pclose($fp); 
```

我打错了什么吗？

我的 php 文件在 Linux 服务器中，我将目录中的所有文件所有者更改为 apache（和模式 0777）。

补充：如果我应该使用sudo，我应该关注什么？我使用php编码。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:20:33.807

您可以使用`sudo`with`-S`选项从命令行本身传递密码。

```
[suku@suku-ld ~]$ echo 'YOURSUDOPASSWORD' | sudo -S tcpdump -c 20000 -i eth1 -s 0 -w tmp
tcpdump: listening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes 
```

**[添加]**：如何将用户添加到 sudores 列表？

```
suku@ubuntu-vm:~$ which tcpdump 
/usr/sbin/tcpdump 
```

执行命令`visudo`并输入以下任一：

```
apache  ALL=/usr/sbin/tcpdump
apache  ALL=NOPASSWD:/usr/sbin/tcpdump 
```

如果您使用第一个，那么当您使用 sudo 命令执行脚本时，它会提示输入 apache 用户的密码。但是对于第二个，它甚至不会提示输入 sudo 密码。

注意：我推荐第一个使用。

注意：我假设您正在使用用户 apache 运行 Web 服务器。如果不是，请相应地更改用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T10:18:16.047

我最近发布了一个项目，它允许 PHP 获取并与真正的 Bash shell 交互（如果需要，作为 root 用户），它解决了 exec() 和 shell_exec() 的限制。在这里获取：[https ://github.com/merlinthemagic/MTS](https://github.com/merlinthemagic/MTS)

下载后，您只需使用以下代码：

```
$shell    = \MTS\Factories::getDevices()->getLocalHost()->getShell('bash', true);
$timeout = 3600000; // how many miliseconds will it take to capture 20000 packets?
$return1  = $shell->exeCmd('tcpdump -c 20000 -i eth1 -s 0 -w /tmp/tmp.pcap', false, $timeout);
//the return will be a string containing the return of the command
echo $return1; 
```

然后拿起 /tmp/tmp.pcap 进行处理。

# ruby-on-rails - 在生产中更新了 Ruby，现在 Rails 无法启动，因为仍然引用旧的 ruby

> ID：14150875
> 
> 赞同：0
> 
> 时间：2013-01-04T03:57:43.197
> 
> 标签：ruby-on-rails, rvm, capistrano, passenger

刚刚通过 RVM 在登台服务器上更新了 Ruby：

```
$ rvm upgrade 1.9.3-p327 1.9.3-p362 
```

我对所有迁移和别名问题说“是”，包括删除旧的 Ruby。

现在每当我尝试访问 Rails 应用程序时都会从**乘客那里收到错误：**

```
Error message: 
dlopen(/Library/WebServer/rails/myapp/shared/bundle/ruby/1.9.1/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle, 9): 
Library not loaded: /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.1.9.1.dylib 
Referenced from: /Library/WebServer/rails/myapp/shared/bundle/ruby/1.9.1/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle 
Reason: image not found - /Library/WebServer/rails/myapp/shared/bundle/ruby/1.9.1/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle 
```

我已经重新安装了Passenger ...并且还运行`cap deploy`了稍微更新`Gemfile`的 . 但似乎仍然有一些对旧 Ruby 的引用。**这里发生了什么以及如何更新或重新编译，以便 gem 等引用新的 Ruby？**我可以在 Capistrano 中指定一些标志来强制重新编译 gem（假设这是问题所在）？

编辑（添加一些 RVM 信息）：

我在此服务器上使用**RVM**的“多用户”安装，因此 gem 安装在：`/Library/WebServer/rails/popup/shared/bundle/ruby/1.9.1/gems`而不是我可能期望它们的位置：`/usr/local/rvm/rubies/ruby-1.9.3-p362/lib/ruby/gems/1.9.1/gems`. 从来没有真正理解 RVM 在多用户安装中做了什么，但它确实有效。

所以，我真的不能这样做`$ rvm gemset use myapp`，`bundle install`因为我认为它不会安装在正确的目录中。

这是**Capistrano**`bundle install`在任务期间的输出：

```
 * 2013-01-03 19:23:22 executing `bundle:install'
  * executing "cd /Library/WebServer/rails/myapp/releases/20130104032317 && bundle install --gemfile /Library/WebServer/rails/myapp/releases/20130104032317/Gemfile --path /Library/WebServer/rails/myapp/shared/bundle --deployment --quiet --without development test" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:09:54.973

该错误与`/Library/WebServer/rails/myapp/shared/bundle/ruby/1.9.1/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle`引用不存在的文件有关`/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/libruby.1.9.1.dylib`，这不应该发生，因为在大多数情况下`libruby.1.9.1.dylib`应该可以在运行时从 ruby​​ 加载。所以要么你只使用静态编译安装了 ruby​​，要么它可能被破坏了。

你确定`1.9.3-p362`用红宝石吗？RVM 为`1.9.3-p327`静态编译的 OSX 10.8 提供（OSX 上没有包管理器问题）。也许你用那个版本（`p327`）代替？

至于重新安装 gems - 目前还没有一个命令可以强制在 bundler 中重新安装已安装的 gems，但是您可以删除 gems 并强制重新安装：

```
cd /Library/WebServer/rails/myapp/
rm -rf shared/bundle
bundle install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:51:40.997

尝试`rvm list`列出所有 ruby​​ 版本

然后使用`rvm use <ruby version>`该版本

前任：

```
[sameera@sameera ~]$ rvm list

rvm rubies

     ruby-1.9.2-p290 [ x86_64 ]
=>   ruby-1.8.7-p357 [ x86_64 ]

rvm use rvm use ruby-1.9.2-p290 
```

高温高压

# sass - 从 cpanel 运行 sass

> ID：14150877
> 
> 赞同：0
> 
> 时间：2013-01-04T03:58:19.477
> 
> 标签：sass, cpanel

我已经为 sass 安装了 ruby​​ gem，但不知道如何运行该`sass --watch stylesheets/sass:stylesheets/compiled`命令。由于我无法访问命令行，甚至可以使用 cpanel 吗？

# c# - 通过套接字发送 PictureBox

> ID：14150880
> 
> 赞同：0
> 
> 时间：2013-01-04T03:58:44.890
> 
> 标签：c#, sockets, picturebox

在我的项目中，我在用户之间使用套接字进行通信，并且我必须将一个图片框发送给另一个。

这是我如何使用图片框：

```
 PictureBox pictureBox1 = new PictureBox();
        ScreenCapture sc = new ScreenCapture();
        // capture entire screen, and save it to a file
        Image img = sc.CaptureScreen();
        // display image in a Picture control named pictureBox1
        pictureBox1.Image = img; 
```

我使用我的套接字发送这样的：

```
byte[] buffer = Encoding.ASCII.GetBytes(textBox1.Text);
            s.Send(buffer); 
```

但我不知道如何发送图片框1。希望您能提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:03:22.260

您可以使用内存流将图片框图像转换为字节数组：

```
MemoryStream ms = new MemoryStream();
pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
s.Send(ms.ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:04:02.727

```
`public byte[] PictureBoxImageToBytes(PictureBox picBox) 
{
     if ((picBox != null) && (picBox.Image != null))
    {
         Bitmap bmp = new Bitmap(picBox.Image);
         System.IO.MemoryStream ms = new System.IO.MemoryStream();

         bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);

           byte[] buff = ms.ToArray();

         ms.Close();
         ms.Dispose();
         return buff;
    }
     else
    {
         return null;
    }
}` 
```

来自[http://www.codyx.org/snippet_transformer-image-picturebox-tableau-bytes_496.aspx](http://www.codyx.org/snippet_transformer-image-picturebox-tableau-bytes_496.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:16:32.997

由[ToArray()](https://stackoverflow.com/a/14150913/1080742)发送并接收然后转换为`image`

```
 public static Image ByteArrayToImage(byte[] byteArrayIn)
    {
        var ms = new MemoryStream(byteArrayIn);
        var returnImage = Image.FromStream(ms);
        return returnImage;
    } 
```

# oracle - Oracle 中的嵌套分析函数

> ID：14150882
> 
> 赞同：1
> 
> 时间：2013-01-04T03:59:16.797
> 
> 标签：oracle, analytic-functions

我们可以在解析函数中使用嵌套解析函数吗？我们可以在表达式中使用另一个分析函数吗？

请给我一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:28:11.853

不，您不能嵌套分析函数。从[手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#SQLRF51196)：

> 您不能通过在 analytic_clause 的任何部分中指定任何分析函数来嵌套分析函数。但是，您可以在子查询中指定一个分析函数并在其上计算另一个分析函数。

例如：

```
SQL> select sum(count(*) over ()) over () from dual;
select sum(count(*) over ()) over () from dual
           *
ERROR at line 1:
ORA-30483: window  functions are not allowed here 
```

# mysql - 无法添加外键 MySQL

> ID：14150884
> 
> 赞同：0
> 
> 时间：2013-01-04T03:59:36.887
> 
> 标签：mysql, sql, foreign-keys, constraints, foreign-key-relationship

我正在使用 PHP MySQL 并尝试将外键添加到名为 agent 的表中，该表具有名为 AreaID 的列，该列应该是区域表 AreaID PK 的外键。我使用了这个查询，虽然它在添加链接到其他表的外键时有效，但它不能链接到区域表。

```
ALTER TABLE properties
ADD FOREIGN KEY (AreaID)
REFERENCES area(AreaID) 
```

我复活的错误是：

```
ALTER TABLE properties ADD FOREIGN KEY ( AreaID ) REFERENCES AREA( AreaID ) 
```

MySQL 说：

```
1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'area(AreaID)' at line 3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T05:13:15.270

**AreaId**列在两个表中必须具有相同的**数据类型**、**长度**和有**符号/无符号**属性。例如，在**Area**表中， **AreaId**列是**INT(10) UNSIGNED**，那么属性表中的列必须具有相同的**INT(10) UNSIGNED**列。您可以**更改列名**，但**datatype**、**length**和**signed**属性**必须**相同。

试试这个**ALTER**语句并检查这个链接[**MySQL Foreign Key Constraints**](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)：

```
ALTER TABLE properties 
    ADD CONSTRAINT FK_Area 
    FOREIGN KEY (AreaID) 
    REFERENCES AREA(AreaID) 
    ON UPDATE NO ACTION 
    ON DELETE NO ACTION; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:19:49.593

检查数据库.. **InnoDB**仅支持外键约束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:01:46.117

请检查两个字段的所有特征是否相同。

# synchronization - 同步框架冲突解决

> ID：14150886
> 
> 赞同：0
> 
> 时间：2013-01-04T03:59:39.573
> 
> 标签：synchronization, microsoft-sync-framework

我正在使用以下代码示例 (http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208) 开发 N 层同步应用程序并致力于解决冲突。

为了解决冲突，我对本地同步提供程序和远程同步提供程序都使用了 syncProvider.ApplyChangeFailed 事件。

syncProvider.ApplyChangeFailed 事件不会在本地同步提供程序上触发。有趣的是，这甚至会触发远程代理提供程序。

我也试过

```
localProvider.Configuration.CollisionConflictResolutionPolicy = CollisionConflictResolutionPolicy.RenameDestination ;
           localProvider.Configuration.ConflictResolutionPolicy = ConflictResolutionPolicy.ApplicationDefined   ;

         remoteProvider.Configuration.CollisionConflictResolutionPolicy = CollisionConflictResolutionPolicy.RenameSource ;
         remoteProvider.Configuration.ConflictResolutionPolicy = ConflictResolutionPolicy.DestinationWins  ; 
```

但到目前为止还没有运气。

我非常感谢有人可以在这个问题上指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:12:27.647

当本地提供商上应用冲突时，本地提供商上的 ApplyChangeFailed 事件会触发

当远程提供程序发生冲突时，将触发远程提供程序上的 ApplyChangeFailed 事件。

意思是，他们将被分开解雇。远程端的冲突不会导致本地提供者 ApplyChangeFailed 事件触发，反之亦然。

SqlSyncProvider 不允许您通过 Configuration 属性设置冲突解决策略。如果您查看文档，它清楚地指出 Configuration 属性不是由 SqlSyncProvider 继承自的 RelationalSyncProvider 实现的。

要设置冲突解决方案，您必须在 ApplyChangeFailed 事件中进行。对于每个冲突，您可以将 Action 属性设置为所需的相应冲突解决方案。

请参阅：[如何：处理数据库同步的数据冲突和错误 (SQL Server)](http://msdn.microsoft.com/en-us/library/cc761628.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:22:40.080

感谢您的回答和所有帮助。我发现了这个问题。我的本地提供商数据库是运行不同同步范围的污染数据库。我已经使用了新的数据库并运行了同步并测试了冲突解决方案。都好。ApplyChangeFailed 事件触发没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:35:38.883

这是我的 SqlSync 提供程序 init 的源代码。你能指导我启动有什么问题吗

```
public      SqlSyncProvider ConfigureSqlSyncProvider(SqlDatabase database , IList<string> tableNames )
       {
           SqlSyncProvider syncProvider = new SqlSyncProvider();

                   syncProvider.ObjectSchema = Constant.ObjectScehamPrefix;
           syncProvider.ScopeName = (Constant.ScopeName );
             //syncProvider.Configuration.ConflictResolutionPolicy = ConflictResolutionPolicy.SourceWins  ;
           syncProvider.Connection = new SqlConnection( database.ConnectionString );
           DbSyncScopeDescription dbSyncScopeDes = new DbSyncScopeDescription(Constant.ScopeName );
           SqlSyncScopeProvisioning serverConfig = new SqlSyncScopeProvisioning((SqlConnection)syncProvider.Connection);
           serverConfig.ObjectSchema = Constant.ObjectScehamPrefix;

           if(!serverConfig.ScopeExists(Constant.ScopeName ))
           {

              // DbSyncTableDescription newTableDescription = new DbSyncTableDescription("Profile.Address");
               DbSyncTableDescription geoTable = SqlSyncDescriptionBuilder.GetDescriptionForTable(  tableNames[0],
                                                                                            (SqlConnection)
                                                                                            syncProvider.Connection);

               dbSyncScopeDes.Tables.Add(geoTable);
               serverConfig.PopulateFromScopeDescription(dbSyncScopeDes );
               serverConfig.SetCreateTableDefault(DbSyncCreationOption.Skip );
               serverConfig.Apply();
           }

                syncProvider.ApplyChangeFailed += provider_ApplyChangeFailed; 

           return syncProvider;
       } 
```

# c++ - hash_set::upper_bound() 是如何工作的？

> ID：14150894
> 
> 赞同：2
> 
> 时间：2013-01-04T04:01:06.473
> 
> 标签：c++, visual-c++, hashset

Visual C++ 是如何[`stdext::hash_set<T>::upper_bound()`](http://msdn.microsoft.com/en-us/library/7b0yfz55.aspx)工作的？
哈希表如何还能保持元素排序？！

我试图阅读源代码，但很难破译 STL 代码......甚至在概念上，我也无法理解：哈希表如何比较元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:25:01.027

各种`unordered_xxx`模板使用哈希函数将对象分类到桶中。进入同一桶的对象被分组，以便比较相等的对象是相邻的（其中“比较相等”意味着“`a < b`是假的并且`b < a`是假的，或者，对于谓词版本，`pr(a,b)`是假的并且`pr(b,a)`是假的”）。`lower_bound()`返回一个迭代器，该迭代器指向与传递的值匹配的第一个对象；`upper_bound()`返回一个迭代器，该迭代器超过与传递的值匹配的最后一个对象。不涉及全局排序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T04:52:37.587

哈希表不需要保持元素排序；它只需要将任何新插入的元素与当前最高值进行比较并相应地更新。无需排序。

至于它如何比较元素：这就是运算符的用途。只要类型 <T> 实现了 '>' 操作符，它就可以被排序。您可以为您的类编写自己的 > 运算符，但它必须支持严格的排序（例如，在比较“abc”和“abcdef”时，您必须确定在这种情况下哪个“更大”）。

# java - 什么比我的首选尺寸更重要？(JPanel)

> ID：14150897
> 
> 赞同：3
> 
> 时间：2013-01-04T04:01:20.263
> 
> 标签：java, swing, jpanel, layout-manager, jcomponent

所以我对 GUI 很陌生，遇到了一个问题，即无论我将首选大小设置为 ( via `setPreferredSize(new Dimension(width, height))`)，它都会增加`10`宽度和高度。我想知道，为什么会发生这种情况？是的，我知道这是“首选尺寸”，但肯定有办法防止这种情况发生。`10`在将它传递给方法之前，我可以通过简单地减去宽度和高度来修复它，但我想知道发生了什么。

我的（相关）代码：

主要方法：

```
 public static void main(String[] args)
 {
    final App app = new App(500, 500);

    JFrame frame = new JFrame("Block Stacker 3000");
    frame.getContentPane().add(app);
    frame.pack();
    frame.setResizable(false);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    System.out.println(app.getSize());
    app.start();
 } 
```

应用构造函数（扩展 JPanel）：

```
 public App(int width, int height)
  { 
     this.width = width;
     this.height = height;

     System.out.println(width + " " + height);

     setPreferredSize(new Dimension(width , height));

     setBackground(Color.CYAN);
  } 
```

运行时，它会输出以下内容：

```
500 500
java.awt.Dimension[width=510,height=510] 
```

另外，我尝试过使用`setMinimumSize()`，`setMaximumSize()`但都没有真正影响任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:22:15.863

您的大小`JPanel`将由处理其容器中组件的布局管理器确定。 `JFrame`有一个默认的布局管理器，所以即使你没有设置它也有一个。一些布局管理器关注首选尺寸，有些不关注，有些人比其他人更关注最小/最大尺寸。

您可以设置“空布局管理器”，也称为“绝对定位”，并自己控制所有尺寸，但我认为您不会尝试这样做（因为您正在设置“首选”尺寸）。设计 UI 所需要做的就是弄清楚你希望事物具有的相对大小和位置，以及当窗口大小发生变化时你希望它们发生什么；这决定了哪些布局管理器进入和进入哪些容器面板以及包含它们的容器面板等。

而且我不会消除`frame.pack();`它本质上告诉布局管理器做它的事情，一旦你按照你想要的方式设置它们，你通常希望布局管理器处理事情......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:28:59.463

我复制/粘贴了您的代码并得到以下输出：

```
500 500
java.awt.Dimension[width=510,height=530] 
```

但随后，我截取了框架的屏幕截图：

![在此处输入图像描述](../Images/a0bd6421b21cf87c41d3e985d3c69626.png)

如果你下载图片并检查文件属性，你会看到它是 502 像素宽（由于窗口 1 像素细边框）和 531 像素高（由于窗口标题栏 31 像素高），检查图像gimp，我发现青色区域实际上是**500x500**像素宽。

**更新：**将`setResizable(false)`句子移到后面的行 `frame.setVisible(true);`：

```
 JFrame frame = new JFrame("Block Stacker 3000");
    frame.getContentPane().add(app);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.setResizable(false); 
```

之后，它将打印：

```
500 500
java.awt.Dimension[width=500,height=500] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T20:12:47.913

您必须在调用`pack()` **后**调用`setResizable(false)`，因为当窗口可调整大小时，布局管理器将为（潜在的）滚动条留出 10px 的边距。

```
public static void main(String[] args) {
    final App app = new App(500, 500);

    JFrame frame = new JFrame("Block Stacker 3000");
    frame.getContentPane().add(app);
    frame.setResizable(false);
    frame.pack();

    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    System.out.println(app.getSize());
    app.start();
 } 
```

# php - Javascript字符串文字错误

> ID：14150898
> 
> 赞同：-1
> 
> 时间：2013-01-04T04:01:26.783
> 
> 标签：php

我将如何维护此代码以使其不会在新行上中断。由于这个字符串被破坏，我收到一个 javascript 字符串文字错误。

我需要在 PHP 端执行此操作。

我试过 str_replace 但这并没有。我不明白为什么这条线首先被打破。

```
CKEDITOR.instances.article.setData('<p>Test</p>
'); 
```

PHP：

```
$text = '<p>Test</p>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:02:33.447

Javascript 字符串文字不能有未转义的换行符。

您需要`json_encode()`在打印字符串之前调用以转义换行符和其他特殊字符。

# java - 将外部数据导入 Web 应用程序

> ID：14150902
> 
> 赞同：0
> 
> 时间：2013-01-04T04:01:49.547
> 
> 标签：java, jsf, web-applications

我是一位经验丰富的应用程序开发人员，现在必须开发一个我没有太多经验的 Web 应用程序。

我正在开发一个具有许多分布式服务器组件的项目。它目前有一个客户端应用程序来监控这些组件、查看警报和日志等。每台服务器机器的状态都是通过 tcp/ip 上的专有协议传递的。

当前基于 UI 的应用程序有一个线程持续监视套接字连接的消息，一旦收到消息，就会将所有内容的当前状态存储在内存中，然后将其显示给用户。

我的问题是如何在 Web 应用程序环境中实现类似的功能。我的第一个想法是在服务器启动时创建一个类似的通信线程，然后当用户请求数据时，响应是从内存中的数据构建的，但是阅读有关启动您自己线程的 Web 应用程序的信息是不好的做法。

我已经阅读了一些关于使用 Quartz 或 TimerTask 在 Web 应用程序中运行定期计划任务的信息，但这个任务更加连续。它仍然是要走的路吗？

我正在使用在 Linux 上运行 Tomcat 的 JSF 在 Java 中开发 Web 应用程序。哦，应用程序的并发用户数量会很少。（最多 25 个，但更可能是 2 或 3 个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:57:44.720

为什么要让这成为服务器问题？在您的客户端（浏览器）中，您可以轮询当前状态并据此调整显示。这样做可以消除很多复杂性。

至于您的客户将如何更新，这取决于您的应用程序。如果您只能允许现代浏览器，您可以查看 HTML5 WebSockets。其他选项是使用 AJAX 进行屏幕的部分更新或完整的屏幕刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:17:05.403

方法一

使用[Quartz](http://quartz-scheduler.org/)很好。建议不要使用 TimerTask。

方法二

我假设 Web 应用程序有某种数据库。由于您需要根据用户请求显示状态，因此您可以做的是编写一个独立的守护程序应用程序（不是 Web 应用程序）来读取服务器状态并更新对 Web 应用程序可见的表，而不是实时显示。当用户提出请求时，可以参考该表以产生输出。

# android - 输入流时出现 IOException

> ID：14150906
> 
> 赞同：0
> 
> 时间：2013-01-04T04:02:31.143
> 
> 标签：android, download, ioexception

从服务器下载图像时出现此 IOException 错误，它使我的应用程序崩溃。这只会偶尔发生一次，通常在下载时不会发生错误。我不确定是什么原因造成的，以及为什么会发生这种情况。如果有人可以解释这个问题，那将是一个很大的帮助。先感谢您！

**日志猫**

```
01-03 17:23:13.136: E/AndroidRuntime(12597): java.lang.RuntimeException: An error occured while executing doInBackground()
01-03 17:23:13.136: E/AndroidRuntime(12597):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.lang.Thread.run(Thread.java:1019)
01-03 17:23:13.136: E/AndroidRuntime(12597): Caused by: java.lang.NullPointerException
01-03 17:23:13.136: E/AndroidRuntime(12597):    at     com.f.bb.GalleryScreen$DownloadFile.doInBackground(GalleryScreen.java:242)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at com.f.bb.GalleryScreen$DownloadFile.doInBackground(GalleryScreen.java:1)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-03 17:23:13.136: E/AndroidRuntime(12597):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-03 17:23:13.136: E/AndroidRuntime(12597):    ... 4 more
01-03 17:23:20.792: E/WindowManager(12597): Activity com.f.bb.GalleryScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405b3e78 that was originally added here
01-03 17:23:20.792: E/WindowManager(12597): android.view.WindowLeaked: Activity com.f.bb.GalleryScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405b3e78 that was originally added here
01-03 17:23:20.792: E/WindowManager(12597):     at android.view.ViewRoot.<init>(ViewRoot.java:263)
01-03 17:23:20.792: E/WindowManager(12597):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:171)
01-03 17:23:20.792: E/WindowManager(12597):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:114)
01-03 17:23:20.792: E/WindowManager(12597):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
01-03 17:23:20.792: E/WindowManager(12597):     at android.app.Dialog.show(Dialog.java:241)
01-03 17:23:20.792: E/WindowManager(12597):     at com.f.bb.GalleryScreen$DownloadFile.onPreExecute(GalleryScreen.java:272)
01-03 17:23:20.792: E/WindowManager(12597):     at android.os.AsyncTask.execute(AsyncTask.java:391)
01-03 17:23:20.792: E/WindowManager(12597):     at com.f.bb.GalleryScreen$1$1.run(GalleryScreen.java:121)
01-03 17:23:20.792: E/WindowManager(12597):     at android.app.Activity.runOnUiThread(Activity.java:3717)
01-03 17:23:20.792: E/WindowManager(12597):     at com.f.bb.GalleryScreen$1.onClick(GalleryScreen.java:85)
01-03 17:23:20.792: E/WindowManager(12597):     at android.view.View.performClick(View.java:2538)
01-03 17:23:20.792: E/WindowManager(12597):     at         android.view.View$PerformClick.run(View.java:9152)
01-03 17:23:20.792: E/WindowManager(12597):     at android.os.Handler.handleCallback(Handler.java:587)
01-03 17:23:20.792: E/WindowManager(12597):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 17:23:20.792: E/WindowManager(12597):     at     android.os.Looper.loop(Looper.java:130)
01-03 17:23:20.792: E/WindowManager(12597):     at android.app.ActivityThread.main(ActivityThread.java:3687)
01-03 17:23:20.792: E/WindowManager(12597):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 17:23:20.792: E/WindowManager(12597):     at java.lang.reflect.Method.invoke(Method.java:507)
01-03 17:23:20.792: E/WindowManager(12597):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-03 17:23:20.792: E/WindowManager(12597):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-03 17:23:20.792: E/WindowManager(12597):     at dalvik.system.NativeStart.main(Native Method)
01-03 17:27:16.148: I/Process(12597): Sending signal. PID: 12597 SIG: 9 
```

**代码（异步任务）**

```
 private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sUrl){

        Bitmap bm;
        InputStream in;
        if(downloadFailed == false){
            if (contentId != null && contentId.length>0){
                Log.i(TAG, "contentid.length:" +contentId.length);
                for (int i=0;i<contentId.length;i++){
                    if(helper.databaseChecking(useremail, contentId[i])){
                        Constant.CONTENT_ID = contentId[i]; 
                        Log.i(TAG, "contentId:" +contentId[i]);

                        Log.i(TAG, "Email:" +useremail);
                        Log.i(TAG, "Section ID:" +ssID);

                        downloadList = new String[contentId.length];

                        try{
                            in = new java.net.URL(downloadList[i]).openStream();
                            bm = BitmapFactory.decodeStream(new PatchInputStream(in));
                            File storage = new File(Environment.getExternalStorageDirectory() + File.separator + "/testing/");
                            Log.i(TAG,"storage:" +storage);
                            Log.i(TAG,"storage:" +storage.getAbsolutePath());
                            if(!storage.exists()){
                                storage.mkdirs();
                                }
                            String FileName = "/"+Constant.CONTENT_ID+".jpg"; 
                            FileOutputStream fos = new FileOutputStream(storage + FileName);
                            bm.compress(Bitmap.CompressFormat.JPEG, 85, fos);
                            String filepath = storage + FileName;
                            File filecheck = new File (filepath);
                            long fileSize = filecheck.length();
                            fos.flush();
                            fos.close();

                            Constant.IMAGE_EXIST = 1;
                            }
                        catch(IOException e1){
                        e1.printStackTrace();
                        downloadFailed = true;
                        }

                    }

                }
            }
        }
        return null;
    }
    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        pDialog.setMessage("Downloading file. Please wait...");
        pDialog.show();
    }

    protected void onPostExecute(String result){
        super.onPostExecute(result);
        pDialog.dismiss();

        alertTitle = "Information";
        alertMessage = "Sync Completed. Click 'OK' to refresh page";
        dialogBox_intent();
        Constant.SYNC_COMPLETE = true;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:40:43.987

`BitmapFactory.decodeStream()`可以返回`null`。请参阅[文档](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeStream%28java.io.InputStream%29)，但一种情况是下载的图像已损坏。您应该`bm != null`在使用任何方法之前进行测试，例如`bm.compress(...)`

# windows-runtime - 与 Windows 应用商店应用程序的本地网络 p2p 连接

> ID：14150909
> 
> 赞同：3
> 
> 时间：2013-01-04T04:02:53.260
> 
> 标签：windows-runtime, winjs, multiplayer

我正在使用 HTML/JS 作为我的编程语言为 Windows 商店构建一个小型纸牌游戏。我想添加的功能之一是多​​人游戏功能。我的游戏基于 1 对 1 玩家（不像 Hearts 需要 4 名玩家），因此临时点对点连接就足够了。另外，请记住，我只考虑本地网络多人游戏，没有互联网支持（这意味着该应用程序清单需要“privateNetworkClientServer”功能）。

所以我在想，当一个玩家想要开始一个多人游戏时，应用程序会定期广播一条消息来寻找任何候选人。同时，他还必须收听这些相同的消息（以防其他玩家也在广播它们）。当他们找到其他人时，我们来回传输游戏状态以执行所需的游戏更改。

我的问题是，WinRT 是否提供任何开箱即用的功能来执行此类操作？如果没有，您对我的问题有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:12:17.433

msdn 上的[邻近示例应用程序应该可以帮助您解决这个问题。](http://code.msdn.microsoft.com/windowsapps/Proximity-Sample-88129731)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:08:55.687

查看[PeerFinder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.peerfinder.aspx)类的文档。Proximity 可以使用 NFC 或通过在同一子网上浏览。请注意，在 WiFi 的情况下，并非所有 WiFi 卡都支持浏览模式，因此某些较旧的 PC 可能无法使用此解决方案。

# ruby-on-rails - 更换新电脑

> ID：14150910
> 
> 赞同：0
> 
> 时间：2013-01-04T04:03:09.467
> 
> 标签：ruby-on-rails

好的，所以我一直在研究 Hartl 的 ruby​​ on rails 教程。我已经开始了 demo_app。我想换电脑。我将 ruby​​ 和 ruby​​ on rails 下载到我的新 Windows 8 机器上。然后，我将包含所有 ruby​​ on rails 应用程序的文件夹从旧计算机复制到新计算机。我以为一切都会奏效。但不是！在我什至可以从 sample_app 中启动 rails 服务器之前，我必须运行 bundle install。在那之后，事情似乎奏效了。但我不知道为什么我必须这样做。谁能解释一下？

现在，我不确定如果我在新机器上安装 github 和 heroku 会发生什么。我想我已经有了一个新的 ssh 密钥。所以我不知道如果我继续开发 demo_app 或者一切都会搞砸的话，我是否真的下载了这两个。任何意见，将不胜感激。是的，我会阅读 git 书，但我希望如果有一些简单的方法可以过渡到新机器，我可以同时使用我的 rails 东西。还是我应该坚持使用旧机器，直到我了解更多关于 git 的知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:07:50.313

Gems 安装在 gems 的默认系统位置，而不是项目中。您已经复制了项目文件夹，但没有复制 gem，这就是您必须`bundle install`再次复制的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:12:31.140

bundle install 的作用是将您的应用程序所需的 gem 安装到您的计算机上。因此，如果您更换机器，安装到您以前计算机的 gems 很自然地不会出现在您的新机器中。这就是为什么您必须再次运行 bundle install 的原因。

如果你想在项目目录中安装你的 gem（这样如果你改变机器它不会影响你），请执行以下操作

捆绑安装

[看看这个了解更多信息](http://madebynathan.com/2011/09/02/dont-use-bundle-install-gem/)

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:44:10.637

安装 Rails 后，您就成功了一半。就像其他答案说你需要一个`bundle install`. 下一步（我建议）是数据库服务器。但是您说您的应用程序已经在运行（？）。此时，您应该能够使用 Webrick 之类的服务器启动您的网络。

我认为设置 Git 的简单方法是安装 git，设置它（如电子邮件和姓名等），然后将存储库克隆到您的新电脑（使用`git clone ...`）。当然，您可以将新的 Ssh-key 添加到 Github，以便更轻松地访问 GitHub。

关于heroku，我不能告诉你太多，因为我从未使用过它。但是，如果您已经设置了部署，它应该像以前一样工作，因为（我猜）它也从 github 获取代码。

# ruby-on-rails - 如何重构这些常见的控制器方法？

> ID：14150921
> 
> 赞同：0
> 
> 时间：2013-01-04T04:04:33.127
> 
> 标签：ruby-on-rails, ruby, refactoring

我有一些非常相似的控制器方法，我想知道重构它们的最佳方法是什么。首先想到的是以某种方式将两个块传递给辅助方法，但我也不知道该怎么做。

```
def action_a
  if @last_updated.nil?
    @variable_a = @stuff_a
  else
    @variable_a = (@stuff_a.select{ |item| item.updated_at > @last_updated }
  end
end

def action_b
  if @last_updated.nil?
    @variable_b = @stuff_b.some_method
  else
    @variable_b = @stuff_b.some_method.select{ |stuff| item.updated_at > @last_updated }
  end
end 
```

似乎我一直在检查是否`@last_updated`为 nil （我将`@last_updated`实例变量设置在 a 中`before_filter`。如果我能以某种方式将其中的东西`if`作为一个块传递，而将其中的东西`else`作为另一个块传递，那么我可以删除`if @last_updated.nil?`重复项吗？

对于许多方法来说，实现这一目标的最佳方法是什么？

**更新**

在我指定`@stuff_a`and的地方`@stuff_b`，它们总是返回一个数组（因为我使用了`.select`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:10:18.077

看看这个。它是 DRYer，应该产生相同的结果。

```
def action_a
  do_the_processing :"@variable_a", @stuff_a
end

def action_b
  do_the_processing :"@variable_b", @stuff_b.some_method
end

private
def do_the_processing var_name, collection
  if @last_updated.nil?
    instance_variable_set var_name, collection
  else
    instance_variable_set var_name, collection.select{ |item| item.updated_at > @last_updated }
  end
end 
```

## 更新

这是两个块的方法（只是为了好玩）（使用 1.9 的 stabby lambda 语法）

```
def action_a
  check_last_updated is_nil: -> { @variable_a = @stuff_a },
                     is_not_nil: -> { @variable_a = (@stuff_a.select{ |item| item.updated_at > @last_updated } }
end

def action_b
  check_last_updated is_nil: -> { @variable_b = @stuff_b.some_method },
                     is_not_nil: -> { @variable_b = @stuff_b.some_method.select{ |stuff| item.updated_at > @last_updated } }
end

private
def check_last_updated blocks = {}
  if @last_updated.nil?
    blocks[:is_nil].try(:call)
  else
    blocks[:is_not_nil].try(:call)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:17:19.723

您需要在单独的`def`块中提取您的条件并稍后使用它：

```
def select_updates a
  @last_updated.nil? ? a : a.select{ |item| item.updated_at > @last_updated }
end
def action_a; @variable_a = select_updates(@stuff_a) end
def action_b; @variable_b = select_updates(@stuff_b.some_method) end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:42:53.057

如我所见，您可以执行以下操作

每个有两个范围

前任：

```
class Stuff < ActiveRecord::Base
  scope :updated_at, lambda {|updated_date|
    {:conditions => "updated_at > #{updated_date}"}
  }
end

class Item < ActiveRecord::Base
  scope :updated_at, lambda {|updated_date|
    {:conditions => "updated_at > #{updated_date}"}
  }
end 
```

在您的控制器中执行此操作

```
def action_a
  @variable_a = update_method(@stuff_a)
end

def action_b
  @variable_b = update_method(@stuff_b)
end

private
def update_method(obj)
  result = nil
  if @last_updated.nil?
    result = obj.some_method 
  else    
    result = obj.some_method.updated_at(@last_updated) 
  end  
  result 
end 
```

高温高压

# directx - DirectX 11 着色器错误。像素着色器只接收 NaN

> ID：14150922
> 
> 赞同：1
> 
> 时间：2013-01-04T04:04:42.497
> 
> 标签：directx, shader, nan, directx-11

大家好。我开始重新编码我的引擎以将其转换为 Directx 11。我现在正试图让基础工作正常，但这个错误真的阻止了我。我创建了一个基本着色器，一个法线和视图的简单点积。我让它编译没有错误，但它不工作。它只是使输入网格完全变形。我开始在 vs2012 中调试，发现像素着色器将所有 NaN 作为输入。我附上了两个屏幕和着色器代码，如果有人可以提供任何想法，那将是非常宝贵的。

[![VS2012 调试信息 1](../Images/125dbb0dddf0f06146304bf4b142579b.png)](https://i.stack.imgur.com/5oFMI.png) [![VS2012 调试信息 2](../Images/1adf293cc59ce63c334f4fb92fc92bb8.png)](https://i.stack.imgur.com/GdfvU.png)

顶点着色器

```
//----------------------------------------------------------------------------   
// Constant Buffer Variables
//----------------------------------------------------------------------------
cbuffer ConstantBuffer : register( b0 )
{
matrix World;
matrix View;
matrix Projection;
//float3 CameraPos;
float Power;
}

//--------------------------------------------------------------------------- 
struct VS_INPUT
{
   float4 Pos : POSITION;
   float3 Normal : NORMAL;
};
struct VS_OUTPUT
{
    float4 Pos : SV_POSITION;
float3 Normal : TEXCOORD0;
};

//--------------------------------------------------------------------------
// Vertex Shader
//-------------------------------------------------------------------------------
VS_OUTPUT VS( VS_INPUT input)
{
   VS_OUTPUT output = (VS_OUTPUT)0;

   output.Pos = mul( input.Pos, World );
   output.Pos = mul( output.Pos, View );
   output.Pos = mul( output.Pos, Projection );
   output.Normal = mul( float4( input.Normal, 1 ), World ).xyz;
   //output.wNormal = input.Normal;
   return output;
 } 
```

这里是像素着色器

```
//------------------------------------------------------------------------------
// Constant Buffer Variables
//------------------------------------------------------------------------------
cbuffer ConstantBuffer : register( b0 )
{
matrix World;
matrix View;
matrix Projection;
float Power;
}

//------------------------------------------------------------------------------
struct VS_OUTPUT
{
    float4 Pos : SV_POSITION;
float3 wNormal : TEXCOORD0;
};

//-----------------------------------------------------------------------------
// Pixel Shader
//-----------------------------------------------------------------------------
float4 PS( VS_OUTPUT input) : SV_Target
{
    //return pow(dot(input.wNormal,float3(0,0,0)),Power); // fixed camera, just for now
return float4(0.1,0.6,0.1,1);
} 
```

最后，我为我的着色器创建了一个 xml 文件结构，然后我解析它，不知道它是否相关，但是

```
<?xml version="1.0" encoding="utf-8"?>
<vs path = "D:\\Documentos\\Visual Studio 2012\\Projects\\Fusion Engine\\Tests\\ConstantLighting_VS.hlsl" name ="VS" target = "vs_4_0">
</vs>
<ps path = "D:\\Documentos\\Visual Studio 2012\\Projects\\Fusion Engine\\Tests\\ConstantLighting_PS.hlsl" name ="PS" target = "ps_4_0">
  <val1 type = "scalar" value = "0.456645" name = "Power"/>
</ps> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T16:24:58.367

您可以在着色器中使用 #pragma pack_matrix(row_major) 而不是在 cpu 端转置矩阵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:13:16.750

只有在 DirectX 11 中，您必须在将矩阵发送到着色器之前对其进行转置。它们改变了您在着色器中保存和使用结构的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:49:14.660

好的，我解决了。将任何矩阵传递给着色器时，**必须**使用*DirectX::XMMatrixTranspose()*。棘手的 DirectX ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T04:32:05.633

在调用顶点函数之前，尝试简单地将 WorldViewProjection 矩阵连接成一个矩阵。希望所有这些组件都正常，而不是，比如说，全为零？您可能还想在 HLSL 代码中将矩阵类型显式设置为“matrix <float, 4, 4>”，或者将变换声明为“float4x4”。

# jquery - 添加或删除项目到 基于复选框选择

> ID：14150925
> 
> 赞同：2
> 
> 时间：2013-01-04T04:05:09.707
> 
> 标签：jquery, jquery-selectors

我在一个 div 中有四个复选框。

```
<div id="tab1" class="tab-pane">
    <input type="checkbox" id="chkbox" value="101">  This is 101
    <input type="checkbox" id="chkbox" value="102">  This is 102
    <input type="checkbox" id="chkbox" value="103">  This is 103
    <input type="checkbox" id="chkbox" value="104">  This is 104
</div> 
```

现在，在每次单击时，我想在`<li>`选中/取消选中复选框时在右侧的另一个 div 上插入/删除一个项目。另一个div：

```
<div id="items">
    <ul id="itemList">
    </ul> 
```

我正在做这样的事情：

```
$("#chkbox").click(function() {
            // If checked
            if ($(this).is(":checked")) {
                //add to the right
                $a = $(this).val();
                $("#itemList").append('<li>'+$a+'</li>');
            }
            else {
                //hide to the right
                $("#itemList").slideUp("fast", function () {
                        $("#itemList").child.remove();
                    });
            }
        }); 
```

这似乎不起作用:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T04:18:38.733

修复以下问题：

*   将多个相同的元素更改`id`为一个`class`
*   使用`change`事件而不是`click`
*   确定哪个复选框引用您的项目。为此，我使用`data`attr。

```
$(".chkbox").change(function() {
    // If checked
    var value = $(this).val(),
        $list = $("#itemList");
    if (this.checked) {
        //add to the right
        $list.append("<li data-value='" + value + "'>" + value + "</li>");
    }
    else {
        //hide to the right
        $list.find('li[data-value="' + value + '"]').slideUp("fast", function() {
            $(this).remove();
        });
    }
}); 
```

[**演示**](http://jsfiddle.net/CL2tA/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:06:53.657

ID必须是唯一的，你应该使用类来代替，还要注意jQuery对象没有`child`属性，你应该使用`children`方法来代替，但是你似乎只想删除一个元素，你可以使用`contains`选择器。

```
<input type="checkbox" class="chkbox" value="101">  This is 101 
```

```
$(document).ready(function() {
    var $list = $("#itemList");

    $(".chkbox").change(function() {
        var a = this.value;
        if (this.checked) {
            $list.append('<li>' + a + '</li>');
        }
        else {
            $("#itemList li:contains('"+a+"')").slideUp(function(){
               $(this).remove();
            })
        }

    })
}) 
```

[http://jsfiddle.net/hhqh5/](http://jsfiddle.net/hhqh5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T04:19:15.143

undefined 是正确的，您需要将您的更改`id chkbox`为`class chkbox`. 我已经修改了你的 javascript 以达到你想要的效果。这是一个[小提琴](http://jsfiddle.net/4wwgc/)。

```
$(".chkbox").click(function() { 
    var a = $(this).val();  //store the value of clicked .chkbox
    // If checked           
    if ($(this).is(":checked")) {  
        //add to the right                
        $("#itemList").append('<li>'+a+'</li>'); //append li to list           
    }            
    else {                
    //hide to the right                
        $("#itemList > li").each(function(){// go through all of the li elements
            if($(this).text() == a){ //check if text is equal to a
                $(this).slideUp('fast', function(){ //slide up the li and then remove it
                    $(this).remove();
                 });
            }                   
        });             
    }        
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T04:17:17.693

根据我对您问题的理解，您的意思是`<li>`在某个复选框上删除或添加相应的基础。

您必须使用一个类，以便您可以为复选框使用单一样式规则，以防万一

```
<div id="tab1" class="tab-pane">
    <input type="checkbox" class="chkbox" value="101">  This is 101
    <input type="checkbox" class="chkbox" value="102">  This is 102
    <input type="checkbox" class="chkbox" value="103">  This is 103
    <input type="checkbox" class="chkbox" value="104">  This is 104
</div>
<div>
    <ul id="itemList"></ul>
</div> 
```

这将是根据我对您的问题的理解工作的 JS

```
 $(".chkbox").click(function() {
            // If checked
            $a = $(this).val();
            if ($(this).is(":checked")) {
                //add to the right
                $("#itemList").append('<li id="'+$a+'">'+$a+'</li>');
            }
            else {
                //hide to the right

                        $("#" + $a).remove();

            }
        }); 
```

**演示**：http: [//jsfiddle.net/laupkram/5PMkA/](http://jsfiddle.net/laupkram/5PMkA/)

# file-io - 在 Java 中写入偏移量？

> ID：14150927
> 
> 赞同：0
> 
> 时间：2013-01-04T04:05:19.790
> 
> 标签：file-io, bufferedreader, offset, filereader

嗯，所以我已经知道如何在 Java 中读取偏移量。我的问题是，你怎么给一个人写信？

基本上，我有一个像“test.dat”这样的 dat 文件

在其中，我找到了一个我能够“得到”的偏移值。我现在必须能够“设置”它，但不确定如何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:09:13.520

要写入文件的随机位置或偏移量，您可以使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)，它在内部使用 FileChannel，但提供了更易于使用的接口。

[创建 RandomAccessFile 实例后，您可以使用seek](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)方法定位文件指针（写入/读取位置的偏移量） 。之后，对对象方法的所有调用都将使用该偏移量作为起点，并相应地更新文件指针。

# javascript - CSS水平条形图 - 管理宽度

> ID：14150929
> 
> 赞同：0
> 
> 时间：2013-01-04T04:05:44.313
> 
> 标签：javascript, jquery, css, graph, bar-chart

我有一个网站，它显示具有不同左右百分比的各种水平条形图。

这是我的意思的屏幕截图：

![在此处输入图像描述](../Images/bdfc6a76dc69826273cf61d4af4cbec8.png)

一切都很好，直到我遇到不成比例的条形宽度：

![在此处输入图像描述](../Images/0faf2e695db9702bcd3d3dbccf1ea1f2.png)

所以在这里寻求一点建议。在这种情况下，您建议如何处理宽度，以便在两个条形之间保持一定程度的相对比例时，可以完全显示非常低的百分比（例如 1%）？我试过用像素宽度填充，添加/减去缓冲区宽度%，但还没有让我满意。

这是我当前的 HTML/CSS：

HTML：

```
<div class="graph-outer">
    <div class="inner-left-cap"></div>
    <div class="inner-left-bar">1%</div>
    <div class="inner-right-bar">99%</div>
    <div class="inner-right-cap"></div>
</div> 
```

​ CSS：

```
.graph-outer {
    background: black;
    height: 20px;
    width: 150px;   
    border: 1px solid black;
    border-radius: 10px;
    overflow: hidden;
}

.inner-left-cap {
    background: orange;
    width: 1%;
    height: 100%;
    float: left;
}

.inner-left-bar {
    background: orange;
    width: 1%;
    height: 100%;
    text-align: center;
    float: left;
}

.inner-right-cap {
    background: red;
    width: 1%;
    height: 100%;
    float: left;
}

.inner-right-bar {
    background: red;
    width: 98%;
    height: 100%;
    text-align: center;
    float: left;
} 
```

​<a href="http://jsfiddle.net/2ZkDz/126/" rel="nofollow noreferrer">http://jsfiddle.net/2ZkDz/126/

# php - 将产品缩略图添加到 magento 发票 PDF

> ID：14150930
> 
> 赞同：0
> 
> 时间：2013-01-04T04:05:56.333
> 
> 标签：php, zend-framework, magento

如何将产品拇指添加到 PDF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T12:11:39.627

您可以使用 Easy PDF Invoice 扩展程序非常轻松地添加产品缩略图图像 [http://www.easypdfinvoice.com/blog/add-thumbnail-image-to-pdf/](http://www.easypdfinvoice.com/blog/add-thumbnail-image-to-pdf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:11:15.570

这是一个示例[http://inchoo.net/ecommerce/magento/magento-pdf-invoice-with-product-images-extension/](http://inchoo.net/ecommerce/magento/magento-pdf-invoice-with-product-images-extension/)

您也可以从该页面[下载](http://inchoo.net/wp-content/uploads/2011/02/PDF_Product_Images.zip)源代码

# javascript - 如何使用切片盒

> ID：14150931
> 
> 赞同：0
> 
> 时间：2013-01-04T04:06:04.167
> 
> 标签：javascript, jquery, html

我正在尝试让 slicebox 在测试页面中工作。从文档来看，我似乎需要使用 slicebox css 文件并将 jquery 脚本与 slicebox.js 链接起来。从那里开始，我认为它就像在脚本中调用函数一样简单，就像在 "$('#sb-slider').slicebox(); 但图片甚至没有出现。

```
 <!DOCTYPE html>
 <html lang="en">
 <head>
    <title>Slicebox Test</title>
    <link rel="stylesheet" type="text/css" href="css/slicebox.css" />
</head>
<body>
    <ul id="sb-slider" class="sb-slider">
        <li>
            <a href="http://www.flickr.com/photos/strupler/2969141180" target="_blank"><img src="images/1.jpg" alt="image1"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2968268187" target="_blank"><img src="images/2.jpg" alt="image2"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2968114825" target="_blank"><img src="images/3.jpg" alt="image1"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2968122059" target="_blank"><img src="images/4.jpg" alt="image1"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2969119944" target="_blank"><img src="images/5.jpg" alt="image1"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2968126177" target="_blank"><img src="images/6.jpg" alt="image1"/></a>
        </li>
        <li>
            <a href="http://www.flickr.com/photos/strupler/2968945158" target="_blank"><img src="images/7.jpg" alt="image1"/></a>
        </li>
    </ul>

    <div>
        <a href="#">Next</a>
        <a href="#">Previous</a>
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.slicebox.js"></script>
    <script type="text/javascript">
     $("#sb-slider").slicebox();
    </script>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T14:52:24.410

你有这个文件夹中的css和js吗？css/slicebox.css js/jquery.slicebox.js 也许这就是问题所在。您必须下载并将其放在该文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:16:03.290

您确实需要添加一个就绪功能。

```
$(document).ready(function() {
    $("#sb-slider").slicebox();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:22:16.243

我认为您还需要在其中链接包含的现代化脚本。

```
<script type="text/javascript" src="/scripts/modernizr.custom.46884.js"></script> 
```

我让它工作但不是在所有浏览器/平台上。

# sql - 数据库日期时间值冲突

> ID：14150935
> 
> 赞同：1
> 
> 时间：2013-01-04T04:06:42.300
> 
> 标签：sql, ruby, ruby-on-rails-3, postgresql

我有 10 年的每小时价格数据。意思是，每天有 24 个价格。

问题是，价格来自前一小时的交易。因此，我的数据源列出了每天的第 24 小时，并且没有 0 小时。

```
 Example (for further clarity):   
  The records for a day start at: 07/20/2010 01:00:00 
  The records for a day end at: 07/20/2010 24:00:00 
```

这与我的 Rails Apps PostgreSQL DB 想要保存 DateTime 值的方式相冲突。当我将此数据从 CSV 导入我的数据库并将日期保存到 DateTime 列时，它将所有 24:00:00 更改为第二天的 00:00:00。这会影响我的各种最终用途的准确性。

无论如何我可以修改我的 Postgres DB 的行为以不这样做吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:23:58.967

您总是可以在执行导入后减去一个小时。

我不知道您的数据库架构，因此要以一般方式执行此操作，您必须在每个具有日期的列上执行此 SQL。

```
UPDATE table SET date_field = date_field - INTERVAL '1 hour' 
```

# php - MySql 查询的动态 while 循环

> ID：14150936
> 
> 赞同：0
> 
> 时间：2013-01-04T04:06:46.557
> 
> 标签：php, mysql, loops, dynamic

我将如何缩短这个 mysql 查询以便在 php 中使用？

```
 <?php  
    $sql = "SELECT * FROM $this->usernameid where
    name LIKE '%$term%' OR
    manufacture1 LIKE '%$term%' OR
    manufacture2 LIKE '%$term%' OR
    manufacture3 LIKE '%$term%' OR
    manufacture4 LIKE '%$term%' OR
    manufacture5 LIKE '%$term%' OR
    manufacture6 LIKE '%$term%' OR
    manufacture7 LIKE '%$term%' OR
    manufacture8 LIKE '%$term%' OR
    manufacture9 LIKE '%$term%' OR
    manufacture10 LIKE '%$term%'
        ORDER BY $order1";
    ?> 
```

想做一个 while 循环，作为一个例子，我的 $_POST 是程序的另一部分。

```
 <?php

    $i = 1;
    while ($i < 10) {
        $manufacture[$i] = strtoupper(filterinput($_POST['manufacture' . $i]));
        $i++;
    };
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:22:09.210

```
// Base query
$baseQuery = "SELECT * FROM $this->usernameid WHERE name LIKE '%$term%' ";

// Get all columns from the table with manufacturers
$manufacturers = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA "
               . "WHERE TABLE_NAME = '{YOUR_TABLE}' "
               . "AND COLUMN_NAME LIKE 'manufacturer%';"
// Execute query
$getManufacturers = mysql_query( $manufacturers );
$addWhereClause = ''; // Additional WHERE clauses
// Loop over all the columns 'LIKE manufacturer%'
while ($manu = mysql_fetch_rows( $getManufacturers )) {
  // Add an additional clause for every manufacturer
  $addWhereClause .= "OR $manu LIKE '%$term% ";
}

// Append everything together and you have your dynamic query.
$query = $baseQuery.$addWhereClause."ORDER BY $order1;"; 
```

# opengl-es - webgl glsl 模拟texture3d

> ID：14150941
> 
> 赞同：3
> 
> 时间：2013-01-04T04:07:27.137
> 
> 标签：opengl-es, glsl, textures, webgl, voxel

我正在将一块opengl 移植到webgl，并且我正在尝试模拟texture3d。不知何故出了点问题。

不需要插值，因为它仅用于计算。我不确定原始代码的几何部分，现在通过纹理获取每层属性。

**更新**：好的，我重写了纹理 3d 函数，我仍然遇到一些问题：

```
const vec3 volumeTextureSize = vec3( 256.0, 128.0, 32.0 );
const vec2 imageSize = vec2( 1024.0, 1024.0 );

vec2 uvFromUvw( vec3 uvw ) {
    const vec3 size = volumeTextureSize;
    const vec2 layersPerDim = size.xy / imageSize.xy;
    const vec2 pixelsPerLayer = imageSize / layersPerDim;

    // normalized in
    float layer = floor(uvw.z * size.z);

    float layerX = mod(layer, layersPerDim.x);
    float layerY = floor(layer / layersPerDim.x);

    vec2 layerUv = vec2(layerX, layerY) * pixelsPerLayer;
    vec2 layerSpaceUv = (uvw.xy * size.xy) / layersPerDim;

    vec2 uv = layerSpaceUv + layerUv;

    uv /= imageSize;

    return uv;
}

vec4 texture3D( sampler2D tex, vec3 uvw ) {
    vec2 uv = uvFromUvw( uvw );
    return texture2D(tex, uv);
}

vec3 uvwFromUv( vec2 uv ) {
    const vec3 size = volumeTextureSize;
    const vec2 layersPerDim =  imageSize.xy / size.xy;
    const vec2 pixelsPerLayer = imageSize / layersPerDim;

    vec2 normUv = uv / imageSize;

    vec2 layerUv = floor(vec2(normUv * layersPerDim.xy));

    vec3 uvw = vec3(0.0);

    uvw.z = floor(layerUv.x + floor( layerUv.y * layersPerDim.x));
    uvw.xy = uv - (layerUv * pixelsPerLayer.xy);

    // normalized coords
    // uvw.xy /= size.xy;
    uvw.z /= layersPerDim.x * layersPerDim.y;

    return uvw;
} 
```

这是我要移植的原始代码：

```
glActiveTexture(GL_TEXTURE0 + deltaJUnit);
glGenTextures(1, &deltaJTexture);
glBindTexture(GL_TEXTURE_3D, deltaJTexture);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
glTexImage3D(GL_TEXTURE_3D, 0, GL_RGB16F_ARB, RES_MU_S * RES_NU, RES_MU, RES_R, 0, GL_RGB, GL_FLOAT, NULL);

    glFramebufferTextureEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, deltaJTexture, 0);

    for (int layer = 0; layer < RES_R; ++layer) {
        setLayer(jProg, layer);
        .. also set uniforms
        drawQuad();
    } 
```

和 glsl

```
#ifdef _VERTEX_

void main() {
    gl_Position = gl_Vertex;
}

#endif

#ifdef _GEOMETRY_
#extension GL_EXT_geometry_shader4 : enable

void main() {
    gl_Position = gl_PositionIn[0];
    gl_Layer = layer;
    EmitVertex();
    gl_Position = gl_PositionIn[1];
    gl_Layer = layer;
    EmitVertex();
    gl_Position = gl_PositionIn[2];
    gl_Layer = layer;
    EmitVertex();
    EndPrimitive();
}

#endif 
```

# javascript - 如何为特定元素排除 Jquery mouseup

> ID：14150943
> 
> 赞同：2
> 
> 时间：2013-01-04T04:07:41.577
> 
> 标签：javascript, jquery, mouseover

我的页面中有这段代码

```
<body onmouseup="fun()">
.......
.......
<button id="ele">Exclude</button>

</body> 
```

我怎样才能实现这样的目标

```
function fun()
{
    if(MOUSE RELEASE IS ON TOP OF BUTTON #ele)
    {
        console.log('Mouse released on top of the button');
    }
    else
    {
        console.log('Mouse released');
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:13:51.313

如果您使用的是 jQuery，我建议您使用`.on()`来绑定事件。您可以使用该`event.target`元素来查看它是否是按钮。

```
$(document).ready(function(){
    $('body').on('mouseup', fun);
    function fun(event){
        if($(event.target).is('#ele')){
             console.log('Mouse released on top of the button');
        }else{
            console.log('Mouse released');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:27:05.297

使用`event.stopPropagation`，像这样：

html

```
<button id="ele">Exclude</button>
<br>
<br>
<div>fun</div> 
```

js

```
document.body.onmouseup = function(){ fun(); };
function fun(){
 console.log("fun");   
}
var el = document.getElementById("ele");
el.onmouseup = function(e){ e.stopPropagation(); }; 
```

演示：http: [//jsfiddle.net/GgKsQ/](http://jsfiddle.net/GgKsQ/)

这是一个使用 jQuery 的演示：http `mouseup`: [//jsfiddle.net/GgKsQ/1/](http://jsfiddle.net/GgKsQ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T04:28:15.610

这是一个正统的代码，它为您提供所需的内容。请复制到您的编辑器中并检查。

```
<!DOCTYPE html>
<html>
<body onmouseup="fun()">
The content of the body element is displayed in your browser.
<br/><br/><br/><br/><br/><br/><br/><br/>
<div id="Exclude" onmousedown="fun2()"> Exclude Me Please </div>
</body>
<script>
var idPressed = 0;
function fun() {
if (idPressed == 0)
console.log('Mouse released');
idPressed = 0;
//alert("Whatever "+this.id);
}

function fun2() {
idPressed = 1;
console.log('Mouse released 2');
//alert("Whatever 2"+this.id);
}

</script>
</html> 
```

# iphone - IOSurfaces 和 IOMobileFramebuffer 信息的链接

> ID：14150949
> 
> 赞同：3
> 
> 时间：2013-01-04T04:08:19.343
> 
> 标签：iphone, objective-c, ios, ios4, iphone-privateapi

我一直在 iOS 上尝试使用私有/公共 API 创建屏幕录像机。我遇到过 IOSurfaces 和 IOMobileFramebuffer 并使用过它们。Apple 没有记录这些框架，因为它们是私有的（Apple 在 Mac 的 IOSurfaces 上有部分文档）。我有兴趣阅读有关这些主题的更多信息并详细了解它们。因此，如果有人可以提供有关这些主题和相关方法/功能的任何文档的良好链接，那将非常有帮助。

谢谢。

# java - 当我使用 MAVEN 构建 WAR 文件时，为什么一些 geronimo-xxx.jar 包含在 war 文件中？

> ID：14150950
> 
> 赞同：2
> 
> 时间：2013-01-04T04:08:23.403
> 
> 标签：java, maven, maven-2, maven-3, geronimo

以下是构建 maven 时包含在我的战争文件中的 geronimo jar 文件

但是，我从不将它们包含在`pom.xml`

```
 geronimo-activation_1.1_spec-1.0.1.jar
  geronimo-j2ee-management_1.1_spec-1.0.1.jar
  geronimo-javamail_1.4_spec-1.2.jar
  geronimo-jms_1.1_spec-1.1.1.jar
  geronimo-jta_1.1_spec-1.1.jar
  geronimo-stax-api_1.0_spec-1.0.1.jar
  geronimo-ws-metadata_2.0_spec-1.1.2.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:04:45.213

好吧，您在使用的某些插件/依赖项`pom.xml`具有交叉依赖项`geronimo`，这就是为什么在构建时，maven 正在下载并打包此依赖项战争文件。

您可以使用以下命令获取整个依赖关系树并进行检查。

```
$ mvn dependency:tree 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T05:08:56.020

您的 pom 中的某些依赖项会在错误的范围内引入这些依赖项。只需将它们添加到依赖管理并将范围更改为提供。

# android - simpledateformat 解析的偏移量答案

> ID：14150952
> 
> 赞同：0
> 
> 时间：2013-01-04T04:08:50.907
> 
> 标签：android, simpledateformat

我有以下代码

```
SimpleDateFormat sdfHour = new SimpleDateFormat("hh:mm a",Locale.US);
String timeStr = "10:00 PM";
Date timeDat;
try{
    timeDat = sdfHour.parse(timeStr);
} catch (java.text.ParseException e) {
    return;
}
int hour = timeDat.getHours();
int minute = timeDat.getMinutes(); 
```

结果值为

小时=>22 分钟=>30

无论我使用什么时间，它总是增加 30 分钟。我阅读了几篇文章，但我仍然可以得到明确的答案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:28:12.213

**我在我的系统中执行了您的代码并提供了完美的输出：**

```
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

public class DateTime {

    public static void main(String[] args)
    {
        SimpleDateFormat sdfHour = new SimpleDateFormat("hh:mm a",Locale.US);
        String timeStr = "10:00 PM";
        Date timeDat;
        try{
            timeDat = sdfHour.parse(timeStr);
        } catch (java.text.ParseException e) {
            return;
        }
        int hour = timeDat.getHours();
        int minute = timeDat.getMinutes();
        System.out.println("hour :"+hour+":: Min  "+minute);
    }
} 
```

我在这里看不到任何问题，伙计

**输出：**

```
hour :22:: Min  0 
```

# oop - 领域模型和对象模型

> ID：14150953
> 
> 赞同：10
> 
> 时间：2013-01-04T04:08:59.487
> 
> 标签：oop, domain-model, object-model

*   什么是**领域模型**？
*   什么是**对象模型**？

领域模型和对象模型是一回事吗？这两者有什么区别？请用简单的例子解释。我是这个概念的新手。我在谷歌搜索了很多。但我无法得到任何简单的解释和例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T05:15:34.613

系统的对象模型是类和对象的集合，根据面向对象的原则：抽象、封装、继承和多态，描述它们之间的关系以及其中包含的属性和方法。

域模型是描述问题域的对象模型。它们包括问题域中的域对象，并描述它们之间的属性、行为和关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-17T14:08:39.693

如果您根据 DDD（域驱动设计）谈论这些概念，我不同意前面的答案。[正如作者在他的书中](https://www.goodreads.com/book/show/179133.Domain_Driven_Design)指出的那样，

> 域模型不必是对象模型。例如，在 Prolog 中实现了模型驱动设计，模型由逻辑规则和事实组成。

因此，域模型是基于任何范式的域规则的表示，不一定是对象，它可以是任何其他范式，但最重要的是，它必须使域概念和规则清晰并与其他技术方面。

总之，我们可以说对象模型是领域模型的一种表示形式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:43:59.647

根据我的理解，对象模型只是关于数据传输对象，只是数据库记录的镜像，没有行为。

领域模型中的实体具有模仿业务规则的数据和行为。领域模型不仅包括类，还包括在对象模型中没有意义的接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T18:25:17.413

域模型 => 对我来说，域模型是与任何特定代码或软件分开的东西。如果我想出一个与餐馆有关的领域模型，我可以在一张纸上表达我的领域模型（或者只是在我的脑海中）。我的领域模型是一个独立的概念实体，无论我是否最终基于它编写任何软件。对象模型 => 我的领域模型变成实际代码的地方在对象模型中。如果我的领域概念包括餐厅、订单和客户，那么我的对象模型可能会包括餐厅、订单和客户等对象。

[https://www.codewithjason.com/difference-domains-domain-models-object-models-domain-objects/](https://www.codewithjason.com/difference-domains-domain-models-object-models-domain-objects/)

# android-edittext - 如何键入其他内容而不是在 Android 中的 EditText 中键入的内容

> ID：14150954
> 
> 赞同：0
> 
> 时间：2013-01-04T04:09:01.730
> 
> 标签：android-edittext

我想在用户输入 EditText 的 android 中创建一个应用程序。但是用户看不到实际输入的内容，而是在该 EditText 中看到不同的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:54:02.547

如果您能详细说明实时使用情况，那就太好了。但是，如果要屏蔽输入，可以`android:inputType="textPassword"`在 EditText 中使用。

或者，您可以使用捕获输入`setOnKeyListener`并相应地设置值。

# python - 我怎样才能让scrapy按顺序处理url

> ID：14150955
> 
> 赞同：0
> 
> 时间：2013-01-04T04:09:22.920
> 
> 标签：python, scrapy

我有这个代码

```
def parse(self, response):

    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//div[@class="headline_area"]')
    items = []

    for site in sites[:5]:
        item = StackItem()
        log.msg(' LOOP' +str(ivar)+ '', level=log.ERROR)
        item['title'] ="yoo ma"
        request =  Request("blabla",  callback=self.test1)
        request.meta['item'] = item
        page_number = nextlink.split("&")[-1].split("=")[-1]
        if int(page_number) > 500:
           raise CloseSpider('Search Exceeded 500')
        ivar = ivar + 1
        yield request

        mylinks= soup.find_all('a')

        if mylinks:
            nextlink = mylinks[0].get('href')
            page_number = nextlink.split("&")[-3].split("=")[-1]
            request =  Request(urljoin(response.url, nextlink), callback=self.parse)
            request.meta['page'] = page_number
            yield request 
```

现在我的问题是假设我想停在`page_number = 5`

现在，scrapy 在第 1 页、第 2 页等的所有项目下载之前进入该页面，并在它第一次到达那里时停止。

如何摆脱它在去之前处理所有链接的问题`page = 5`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:49:43.430

链接在不同页面上是否有规律？例如，如果第 5 页的链接是`www.xxxx.net/nForum/#!article/Bet/447540?p=5`. 您可以直接使用scrapy链接`p=5`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-19T01:25:22.933

您可以使用[inline_requests](https://github.com/darkrho/scrapy-inline-requests)装饰器。

# jquery - jquery 类更改显示即时切换的动画

> ID：14150957
> 
> 赞同：0
> 
> 时间：2013-01-04T04:09:52.137
> 
> 标签：jquery, css, jquery-ui

我的应用程序中有 2 个 div，每个都有 2 个不同的图像尺寸，单击时我需要在它们之间切换类。一切正常，但是。

将 big_div 类切换到 small_div 效果很好。没有问题，没有图像动画

但是切换到 small_div 到 big_div 会显示一些从当前尺寸到建议的大尺寸的图像动画。

如何在没有动画的情况下改变类的实例宽度？代码看起来像

CSS

```
.big_div {
width:600px;
height:400px;
float:left;
border:1px solid #cacaca;
}

.big_div img {
width:150px;
height:100px;
float:left;
margin:10px;
}

.small_div {
width:600px;
height:400px;
float:left;
border:1px solid #cacaca;
}

.small_div img {
width:300px;
height:200px;
float:left;
margin:10px;
} 
```

HTML

```
<body>
<div id="big" class="big_div"></div>
<div id="small" class="small_div"></div>
<a id="switch">Click</a>
</body> 
```

JS

```
$(document).ready(function(){

$('#switch').click(function(){
        $('#big').switchClass( "big_div", "small_div",1 );
        $('#small').switchClass( "small_div", "big_div",1 );

});

}); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:13:38.623

我猜 toggleClass 是你想要的。但是 switchClass 也应该可以工作。

可能是因为您使用的 jQuery 和 jQueryUI 的版本。我用 jQuery 1.8.2 和 jQuery UI 1.8.9 测试了它们。他们都工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:30:20.227

`toggleClass`改为使用

```
$('#switch').click(function(){
    $('#big, #small').toggleClass("big_div small_div");
}); 
```

[参考](http://api.jquery.com/toggleClass/)

# c++ - MFC中FormView和Dialog有什么区别？

> ID：14150958
> 
> 赞同：3
> 
> 时间：2013-01-04T04:09:56.663
> 
> 标签：c++, mfc

MFC中FormView和Dialog有什么区别？任何人都可以建议何时使用 FormView 以及何时使用 Dialog？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:12:14.777

我不得不恭敬地不同意上面的帖子。CFormView 和对话框之间**没有区别**。

**CFormView 是一个对话框**创建为无模式并由框架作为客户端托管，调整大小作为框架调整大小。它是从您必须提供的对话框资源创建的，就像任何独立对话框一样。对话框控件的所有消息处理程序都是相同的。

CFormView Create 成员调用 CreateDlg，传递由构造函数加载的对话框模板。CWnd CreateDialog，调用 CreateDlgIndirect 成员，该成员又调用 CreateDialogIndirect API 创建无模式对话框。

您还可以在另一个对话框中嵌入无模式对话框，它仍然是一个对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:31:44.147

对话框应用程序*只*显示一个对话框（以及您在对话框中放置的任何控件，以及您从中弹出的任何其他控件等）

FormView 为您提供了一个带有主菜单等的相当普通的应用程序——但视图部分也可以包含控件。

如果你只想要一个对话框，你会使用一个对话框，如果你想要（可能是多个）可以保存控件的视图，你会使用一个表单视图。最大的区别在于，将其设置为对话框会改变*整个*应用程序的基本性质，其中表单视图仅更改一个视图——如果您愿意，（例如）您还可以拥有其他（非表单）视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T13:19:34.900

**某人笑脸**

回答有关对话框与 CFormView 的问题。

我很少使用基于对话框的应用程序；仅在需要简单任务而无需更复杂 UI 开销的情况下。

大多数程序员从基于对话框的应用程序开始，在实现一些功能之后，通常会发现应用程序需要菜单和工具栏和状态栏、数据存储/处理对象、命令路由处理等。

我建议使用不可调整大小的框架创建 SDI 应用程序。

您将免费获得 MFC 应用程序的对话框外观和所有功能。如果您不需要文档支持，则不必使用文档支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T04:45:40.930

从编码人员的角度来看，FormView 支持以所见即所得的方式使用对话框资源布局 UI 控件。因此，当使用大量控件创建视图时，FormView 可能会有所帮助。

对话框不是视图。这是完全不同的。对话框是单独的窗口，通常在模式事件循环中呈现（或在特殊情况下无模式）。

# php - 用户允许访问后如何将 Box 的“代码”转换为“令牌”

> ID：14150962
> 
> 赞同：3
> 
> 时间：2013-01-04T04:11:04.783
> 
> 标签：php, authentication, oauth-2.0, access-token, box-api

我是新手，试图连接 Box 的 API v2。我成功地设置了一个 PHP 客户端库，感谢 developer.box.com/auth 上第一段中的链接。我已经完整阅读了 Box 的演练两次以上，以及关于此事的大约 100,000 个问题和回复。我的问题发生在用户重定向到 Box 的授权页面、输入他的凭据并单击“允许”后。结果根据我的 redirect_uri 和我放置 client_id 和 client_secret 的登录页面的 url 而有所不同： 1) 如果我的 redirect_uri 与我的[https://mysite.com/login_with_box](https://mysite.com/login_with_box)匹配，则用户显然会重定向到同一个 url ，然后将用户返回到 Box 的授权页面；和 2) 如果我的 redirect_uri 与[https://mysite 不同。](https://mysite.com/login_with_box)页面，然后用户成功返回到我的redirect_uri，其url包含30秒代码。我知道我已经接近解决这个问题，但不知道如何在 30 秒或更短的时间内将代码转换为令牌，并使用它来显示用户的文件夹、文件、信息或其他任何内容。非常感谢您的考虑。这是我的立场：

```
// mysite.com/client.php:

// ...

case 'Box':
    $this->oauth_version = '2.0';
    $this->request_token_url = '';
    $this->dialog_url = 'https://api.box.com/oauth2/authorize?client_id={CLIENT_ID}&response_type=code&redirect_uri={REDIRECT_URI}&state={STATE}';

    $this->append_state_to_redirect_uri = '';
    $this->access_token_url = 'https://api.box.com/oauth2/token';
    $this->authorization_header = true;
    $this->url_parameters = false;
break;

// ... 
```

* * *

```
// mysite.com/login_with_box.php:

// ...

$client->client_id = '[my_client_id]';
$client->client_secret = '[my_client_secret]';

if(($success = $client->Initialize())) {
    if(($success = $client->Process())) {
        if(strlen($client->access_token)) {
            $success = $client->CallAPI(
                'https://api.box.com/2.0/users/me', 
                'GET', array(), array('FailOnAccessError'=>true), $user);
        }
    }
    $success = $client->Finalize($success);
}

// ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:13:15.760

看起来您需要重定向 URL 与最初通过 OAuth 流程向用户发送的 URL 不同。

例如，您可以`https://mysite.com/login_with_box`通过 OAuth 流程发送用户，并`https://mysite.com/receive_box_oauth_response`成为在 auth 流程之后重定向到的 URL，并处理来自 box 的 OAuth 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:31:43.443

我想到了。当然，问题完全是我的错。下面是我如何将 Box API v2 与 Box 推荐的 PHP OAuth 库连接起来：

1.  在developers.box.com 上创建一个应用程序并将所需的redirect_uri 设置为类似[https://mysite.com/oauth/login_with_box.php](https://mysite.com/oauth/login_with_box.php)的内容。

2.  在以下位置下载 PHP OAuth 库`www.phpclasses.org/package/7700-PHP-Authorize-and-access-APIs-using-OAuth.html`

3.  在 PHP OAuth 库的 oauth_client.php 中添加类似以下案例的内容。

    ```
    case 'Box':
        $this->oauth_version = '2.0';
        $this->request_token_url = '';
        $this->dialog_url = 'https://api.box.com/oauth2/authorize?response_type=code&client_id={CLIENT_ID}&state={STATE}';
        $this->append_state_to_redirect_uri = '';
        $this->access_token_url = 'https://api.box.com/oauth2/token';
        $this->authorization_header = true;
        $this->url_parameters = false;
    break; 
    ```

4.  创建类似 login_with_box.php 的内容并将其添加到 PHP OAuth 库。我的 login_with_box.php 内容如下。

    ```
    <?php  

    require('http.php');

    require('oauth_client.php');

    $client = new oauth_client_class;

    $client->server = 'Box';

    $client->redirect_uri = 'https://mysite.com/oauth/login_with_box.php';

    $client->client_id = 'xxxxxx_BOX_API_CLIENT_ID_xxxxxx';

    $client->client_secret = 'xxxxxx_BOX_API_CLIENT_SECRET_xxxxxx';

    if(strlen($client->client_id) == 0 || strlen($client->client_secret) == 0)
      die('You need an app to do that.');

    if(($success = $client->Initialize())) {

        if(($success = $client->Process())) {

            if(strlen($client->access_token)) {

            $success = $client->CallAPI(

                'https://api.box.com/2.0/folders/0',

                'GET', array('format'=>'json'), array('FailOnAccessError'=>true), $folder);

            }

        }

        $success = $client->Finalize($success);

    }

    if($client->exit)

        exit;

    if($success) { 

    ?>

    <!doctype html>
    <html>
    <head>
    <title>Box OAuth client results</title>
    </head>
    <body>
    <?php echo '<h1>You successfully logged in with Box</h1>'; echo '<pre>', HtmlSpecialChars(print_r($folder, 1)), '</pre>'; ?>

    </body>
    </html>

    <?php } else { ?>

    <!doctype html>
    <html>
    <head>
    <title>OAuth client error</title>
    </head>
    <body>
    <h1>OAuth client error</h1>
    <pre>Error: <?php echo HtmlSpecialChars($client->error); ?></pre>
    </body>
    </html>

    <?php } ?> 
    ```

我希望这对某人有所帮助。

# templates - 模板中的引用字符串

> ID：14150985
> 
> 赞同：2
> 
> 时间：2013-01-04T04:14:04.227
> 
> 标签：templates, go

我想在我的 html 模板（实际上是 JavaScript 部分）中放入 null 或带有电子邮件的字符串：

```
var email = null;
// or a string:
var email = "somebody@somewhere.com"; 
```

但是有模板

```
var email = {{.Email}}; 
```

我每次都得到引用的字符串：

```
var email = "null";
var email = "somebody@somewhere.com"; 
```

如何解决？

编辑：这是我的代码：[http ://play.golang.org/p/8k4s8dv2PE](http://play.golang.org/p/8k4s8dv2PE)

你可以看到 Go 用引号包围字符串并删除注释 - 有预处理或后处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T06:45:12.897

在没有看到您的代码的情况下，我能做的最好的就是提供[一个显示您所需功能的示例](http://play.golang.org/p/kXlahcaMOl)。

如果我不得不猜测，我会说你传入的数据是一个字符串，而不是一个字符串指针。字符串不能具有 nil/null 值，只有字符串指针可以。虽然这会产生一个“”，而不是一个“null”，（[如此处所示](http://play.golang.org/p/23t7tnxJZY)），所以我只能想象这是你在代码中所做的一些奇怪的事情。

为了防止链接腐烂，我复制了下面的代码示例，尽管值得点击链接查看它们的输出。

**所需功能**：

```
package main

import (
    "log"
    "os"
    "html/template"
)

type TemplateData struct {
    Email *string
}

func main() {

    const temp = "<script>var email = {{.Email}};</script>\n"

    t := template.Must(template.New("email_template").Parse(temp))
    email := "somebody@somewhere.com"
    err := t.Execute(os.Stdout, TemplateData{
        Email: &email,
    })
    if err != nil {
        log.Println("executing template:", err)
    }
    err = t.Execute(os.Stdout, TemplateData{
        Email: nil,
    })
    if err != nil {
        log.Println("executing template:", err)
    }

} 
```

**尝试使用“null”字符串**：

```
package main

import (
    "log"
    "os"
    "html/template"
)

type TemplateData struct {
    Email string
}

func main() {

    const temp = "<script>var email = {{.Email}};</script>\n"

    t := template.Must(template.New("email_template").Parse(temp))
    email := "somebody@somewhere.com"
    err := t.Execute(os.Stdout, TemplateData{
        Email: email,
    })
    if err != nil {
        log.Println("executing template:", err)
    }
    err = t.Execute(os.Stdout, TemplateData{
    })
    if err != nil {
        log.Println("executing template:", err)
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-09T17:28:46.420

对代码示例使用最少的编辑：

```
type TplCtx struct {
  UserEmail *string
} 
```

和

```
t.Execute(os.Stdout, &TplCtx{nil}) 
```

# c# - HRESULT、DWORD 和 HANDLE 在非托管代码中是什么意思？

> ID：14150987
> 
> 赞同：-1
> 
> 时间：2013-01-04T04:14:19.100
> 
> 标签：c#, clr, marshalling, unmanaged, language-interoperability

我正在阅读有关编组的内容。我很困惑，因为在非托管代码中这意味着什么。HRESULT、DWORD 和 HANDLE。原文是：

> 您已经知道托管和非托管环境之间没有这种兼容性。换句话说，.NET 不包含非托管代码领域中存在的 HRESULT、DWORD 和 HANDLE 类型。因此，如果需要，您需要找到一个 .NET 替代品或创建您自己的替代品。这就是所谓的编组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T05:10:21.173

### 简短的回答：

它只是告诉您必须将一种编程语言中使用的一种数据类型“映射”到另一种编程语言中使用的另一种数据类型，并且数据类型必须匹配。

### 快速回答：

*对于这个，细节可能不正确，但概念是正确的。*

这些是在 C/C++ 的 Windows 头文件中定义的一些数据类型。它们是“宏”，将 C/C++ 的原始数据类型“抽象”为 Windows 编程中使用的更有意义的数据类型。例如，`DWORD`在 C/C++ 中实际上是一个 32 位无符号整数，但在 64 位处理器上，它在头文件中被定义为一个 64 位无符号整数。这个想法是在处理器所需的数据类型和语言使用的数据类型之间提供一个抽象层。

在编组期间，此“dword”将转换为您在声明中指定的 CLR**数据**`DllImport`类型。*这是很重要的一点。*

假设您要调用一个带有`DWORD`参数的 Windows API 方法。在 C# 中使用 声明此调用时`DllImport`，必须将参数数据类型指定为`System.UInt32`。如果你不这样做，“坏事就会发生”。

例如，如果您错误地将参数数据类型指定为`System.UInt64`. 当进行实际调用时，堆栈将损坏，因为堆栈上的字节数比 API 调用预期的要多。这可能导致完全出乎意料的行为，例如应用程序崩溃、Windows 崩溃、返回值无效等等。

这就是为什么指定正确的数据类型很重要的原因。

### 有问题的数据类型：

*   DWORD 定义为 32 位无符号整数或 CLR 类型`System.UInt32`。
*   HANDLE 是 CLR 类型`IntPtr`, `UintPtr`, 或`HandleRef`
*   HRESULT 是`System.Int32`或`System.UInt32`

### 参考：

*   *使用 P/Invoke 从您的托管类调用非托管 API*在[http://msdn.microsoft.com/en-us/library/aa719104(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719104(v=vs.71).aspx)有一个表格列出了 Windows 数据类型及其对应的专门回答您的问题的 CLR 数据类型。

*   *Windows 数据类型 (Windows)*，位于[http://msdn.microsoft.com/en-us/library/aa383751(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa383751(v=VS.85).aspx)

*   *.NET 专栏：使用 P/Invoke在*C# 中调用 Win32 DLL，位于*[http://msdn.microsoft.com/en-us/magazine/cc164123.aspx](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T04:17:04.883

HRESULT：[http ://en.wikipedia.org/wiki/HRESULT](http://en.wikipedia.org/wiki/HRESULT)

> 在计算机编程领域，HRESULT 是 Windows 操作系统以及更早的 IBM/Microsoft OS/2 操作系统中使用的一种数据类型，用于表示错误条件和警告条件。HRESULT 的最初目的是正式列出供公众和 Microsoft 内部使用的错误代码范围，以防止 OS/2 操作系统的不同子系统中的错误代码发生冲突。HRESULT 是数字错误代码。HRESULT 中的各个位对有关错误代码性质及其来源的信息进行编码。HRESULT 错误代码在 COM 编程中最常见，它们构成了标准化 COM 错误处理约定的基础。

双字：[http ://en.wikipedia.org/wiki/DWORD#Size_families](http://en.wikipedia.org/wiki/DWORD#Size_families)

句柄：[http](http://en.wikipedia.org/wiki/Handle_(computing) ://en.wikipedia.org/wiki/Handle_(计算)

> 在计算机编程中，句柄是对资源的抽象引用。当应用程序软件引用由另一个系统（例如数据库或操作系统）管理的内存块或对象时，将使用句柄。虽然指针字面上包含它所引用的项目的地址，但句柄是外部管理的引用的抽象；它的不透明度允许系统将所指对象重新定位到内存中，而不会使句柄无效，这对于指针是不可能的。额外的间接层还增加了管理系统对在所指对象上执行的操作的控制。通常，句柄是指向全局墓碑数组的索引或指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:51:12.993

`HRESULT`, `DWORD`, 和`HANDLE`are `typedef`'s（即，它们代表纯数据类型）由 Microsoft 定义，供在 Windows 环境中编译 *un*managed 代码的程序员使用。它们在 Microsoft 提供的 C（或 C++）头文件中定义，通常自动包含在 Microsoft Visual Studio 中创建的非托管 Windows 项目中。*

# qt - qt 创建对话框

> ID：14150991
> 
> 赞同：3
> 
> 时间：2013-01-04T04:14:42.577
> 
> 标签：qt

我已经制作了我的第一个 qt 窗口。现在我想使用 qt 创建我的第一个对话框。我刚刚完成了对话框的创建，它基本上是由一个 QDialogBu​​ttonBox 组成的，现在我想将它连接到窗口。我有两个初学者的问题：

*   如何从 window.cpp 检索对话框是如何关闭（确定按下或取消按下）的，它创建一个新对话框，然后调用 dialog->show() ？
*   在哪里以及如何销毁对话框指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T06:38:42.117

如果您使用`dialog->show()`，那么我认为它是非模态对话框。

如果您已按照[文档所示](http://doc.qt.digia.com/4.7/qdialogbuttonbox.html)`QDialogButtonBox`创建并将其信号与对话框的插槽连接`accept()`，`reject()`那么您的对话框将发出另外的或信号，您可以通过这些信号确定它是如何关闭的。`finished(int)``accepted()``rejected()`

如果您需要更多自定义行为，则可以重新实现`closeEvent(QCloseEvent *event)`或创建自己的信号。

如果您需要删除您可以使用的对话框`setAttribute(Qt::WA_DeleteOnClose, true);`，它将在关闭时删除实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:38:47.600

您可以使用一个标志，以及信号和插槽。当放置 OK flag=1 时，当放置取消时 flag=-1; 然后使用信号。在 window.h 中编写代码如何使用 1 个简单插槽处理该标志。

要销毁指针，您可以在对话框中使用信号和插槽，并告诉用户何时按下 Ok、或 Cancel 或退出（向上（红色叉号））转到调用对话框的 Destructer 的插槽

还有你最好将对话框的父级设置为窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:25:48.643

*   第一个问题：

    当您想显示对话框时，只需构造它，使用`myDialog *d = new myDialog(this)`（*this*指针将确保您没有删除您创建的指针，因为如果您指定了对话框的父级，Qt 将处理此问题）。**如果**`d->exec()`您需要模态对话框，则**使用**d- >show() 使其成为非模态；

*   第二个问题：

    一旦你指定了对话框的父对象，你所需要的只是使用它而不管内存管理器，Qt 会为你做这件事。**您也**可以使用`d->setAttribute(Qt::WA_DeleteOnClose,true)`它使其在关闭时自行销毁。

**请记住**将 链接`QDialogButtonBox`到对话框的操作。

# python - 如何为 Python 中的整个（或部分）列表分配一个值？

> ID：14150993
> 
> 赞同：2
> 
> 时间：2013-01-04T04:15:29.910
> 
> 标签：python, list, variable-assignment

我有`List = [0, 1, 2, 3]`并且我想给他们所有人分配一个数字，比如 5: `List = [5, 5, 5, 5]`。我知道我可以`List = [5] * 4`轻松做到。但我也希望能够将 6 分配给最后 3 个元素。

```
List = [5, 5, 5, 5]

YourAnswer(List, 6, 1, 3)

>> [5, 6, 6, 6] 
```

`YourAnswer`函数在哪里。

任何类似的东西都会有所帮助。最好避免 for 循环。但如果没有已知的可能性，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T04:17:22.697

您实际上可以使用切片分配机制来分配给列表的一部分。

```
>>> some_list = [0, 1, 2, 3]
>>> some_list[:1] = [5]*1
>>> some_list[1:] = [6]*3
>>> some_list
[5, 6, 6, 6] 
```

如果您要更新同一个列表，这很有用，但如果您想创建一个新列表，您可以简单地根据您的条件通过连接创建一个新列表

```
>>> [5]*1 + [6]*3
[5, 6, 6, 6] 
```

你可以把它包装成一个函数

```
>>> def YourAnswer(lst, repl, index, size):
    lst[index:index + size] = [repl] * size

>>> some_list = [0, 1, 2, 3]
>>> YourAnswer(some_list, 6, 1, 3)
>>> some_list
[0, 6, 6, 6] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T04:20:31.270

```
In [138]: def func(lis,x,y,z):
   .....:     return lis[:y]+[x]*z
   .....: 

In [139]: lis=[5,5,5,5]

In [140]: func(lis,6,1,3)
Out[140]: [5, 6, 6, 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:28:33.063

你可以使用 + 来实现它

```
def createList(val1, n1, val2, n2):
    return [val1] * n1 + [val2]*n2 
```