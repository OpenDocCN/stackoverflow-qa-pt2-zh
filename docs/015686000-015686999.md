# StackOverflow 问答 15686000-15686999

# sql - SQL 第一组

> ID：15686001
> 
> 赞同：1
> 
> 时间：2013-03-28T15:35:46.347
> 
> 标签：sql, sql-server, sql-server-2005

我有一张桌子：

```
ID | value1 |value2
1  | 15     | A
2  | 15     | B
3  | 16     | D
4  | 16     | A
5  | 16     | C 
```

作为结果，我只想看到 value1 的第一条记录（分组依据？），如下所示：

```
ID | value1 |value2
1  | 15     | A
2  | 16     | D 
```

我可以这样做：

```
select * from vals
group by value1 
```

但是，在 SQL Server 中，我会始终确保他获取该组的第一条记录（ID 最低）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:39:06.237

你实际上不能这样做：

```
select * from vals
group by value1 
```

因为那甚至不会执行，并且会带回每一行，因为`ID`每一行都不同。因此，如果您尝试为每个获取第一行，`value1`那么您可以执行以下操作：

```
select * from vals
where id in (select min(id) from vals group by value1) 
```

**这将使您获得每组**的第一行`value1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:41:37.487

```
;WITH cte AS 
(
    SELECT MIN(id)AS id FROM vals
    GROUP BY value1 
)
SELECT vals.* FROM cte
INNER JOIN vals ON vals.id = cte.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:41:57.537

你当然可以：

```
 Select * From vals v
 Where id = (Select Min(id)
             From vals 
             Where value1 = v.value1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T15:42:16.930

由于您使用的是 SQL Server，因此可以使用窗口函数 ( `row_number()`) 来获取结果：

```
select id, value1, value2
from
(
  select id, value1, value2,
    row_number() over(partition by value1 order by id) rn
  from vals
) d
where rn = 1; 
```

或者您可以使用子查询：

```
select v1.id, v1.value1, v1.value2
from vals v1
inner join
(
  select min(id) id, value1
  from vals
  group by value1
) v2
  on v1.id = v2.id
  and v1.value1 = v2.value1 
```

请参阅带有两个查询[的演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/b80c5/4)

# c++ - 在c ++中将整数更改为wstring

> ID：15686005
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:04.537
> 
> 标签：c++, integer, wstring

我有以下代码，我正在尝试将整数更改为 wstring，然后我可以将其传递给文本文件。但问题是当它到达 _itow_s(vec, img_stamp, 10); 将其更改为负数。任何机构都知道是什么问题？

```
wchar_t img_stamp[64];
   while(c<_timeStamp.size()){      
        vec=_timeStamp.at(c);
        _itow_s(vec, img_stamp, 10);    
        _data +=std::wstring(img_stamp);
        _data +=std::wstring(L"\r\n");
        c++;
    }

    HANDLE hFile; 
    DWORD wmWritten;    
    hFile = CreateFile( "D:\\test\\testing.txt" ,GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ,NULL,OPEN_ALWAYS,FILE_ATTRIBUTE_NORMAL,NULL); 
    if(hFile!=NULL){

        DWORD len=sizeof(_data);
        WriteFile(hFile, _data.c_str(), _data.size() * 2, &wmWritten, NULL);
    }   
    CloseHandle(hFile); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:44:21.603

C++11 添加了一个名为“ [std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string) ()”的函数，它将数字、浮点数或 long long 转换为 std::string。wstrings还有一组相关的函数：[std::to_wstring](http://en.cppreference.com/w/cpp/string/basic_string/to_wstring) ()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:39:25.197

你为什么不使用一个`wstringstream`？

```
wstringstream ws;
for (...) { // some loop
  ws << myint << ", ";
}
//now, you can use ws.str() to extract a wstring from the stream 
```

# git - IntelliJ IDEA git集成和暂存区（索引）

> ID：15686010
> 
> 赞同：34
> 
> 时间：2013-03-28T15:36:12.257
> 
> 标签：git, intellij-idea

暂存区域（索引）可以在 IntelliJ IDEA 12 中基于 git 的项目中使用，还是在集成中抽象概念？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T03:30:32.507

更新：此功能在 IntelliJ IDEA 2020.3+ 版本中可用。

* * *

原答案：

尚不支持 Git 索引/暂存区，请随意[投票支持此功能请求](http://youtrack.jetbrains.com/issue/IDEA-63391)。

# java - Servlet 抛出异常“系统找不到指定的路径”

> ID：15686013
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:17.113
> 
> 标签：java, servlets

在我的 servlet 中，我编写了以下语句来加载本体文件

```
File fileBase = new File("src/java/ontology/ontology.owl");
SimpleIRIMapper iriMapper =  new SimpleIRIMapper(IRI.create("src/java/ontology/AOA.owl"),
            IRI.create(fileBase)); 
```

但是当我运行该项目时，出现以下异常

> org.semanticweb.owlapi.io.OWLOntologyInputSourceException: java.io.FileNotFoundException: src\java\ontology\ontology.owl（系统找不到指定的路径）

我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:40:37.027

提供绝对路径/将文件放在类路径中 `File fileBase = new File("ontology.owl");`

# safari - 在 bxSlider 项目上使用 CSS 转换会破坏 Safari 中的动画

> ID：15686014
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:17.620
> 
> 标签：safari, css-transforms, bxslider, translate3d

我在升级到最新版本的 bxSlider (v4.1) 时遇到了这个问题。新版本是响应式的，因此用于`transform`在幻灯片之间切换，而不是使用`left`属性的旧方式（在 v3.x 中使用）。

我在这里创建了一个演示：http: [//jsfiddle.net/SXZjV/](http://jsfiddle.net/SXZjV/)

在 Safari 5 中查看时，悬停在块上不会做任何事情。但是，当通过检查器禁用时`-webkit-transform: translate3d(0px, 0px, 0px);`，动画效果很好。

**有没有办法让这两种变换和谐地工作？**

非常感谢。

Ps 我还没有在 Safari 6 中测试这种行为，因为我目前正在运行 Snow Leopard。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T08:52:16.353

在 Safari 5.1.9 中对我来说也是如此。我管理 CSS 动画工作的唯一方法是**使用**包含的**“jQuery easing”**：

```
 $('#bxslider').bxSlider({
      useCSS: false,
      easing: 'easeInBack' //Or other animation http://gsgd.co.uk/sandbox/jquery/easing/ 
  }); 
```

PS顺便说一句，它适用于Safari 6（Mountain Lion）

# sh - 如何用斜杠替换子字符串

> ID：15686024
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:35.147
> 
> 标签：sh

如何删除带有斜杠的子字符串？

```
#!/bin/sh
dir="/a/directory/last/which/last part/needs to/be/removed/end"
dir2=${dir/"last part/needs to/be/removed"}
echo $dir2 
```

在这个例子中，输出应该变成

```
/a/directory/which/end 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:39:35.753

单程 ：

```
 dir2=${dir%last*} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:18:07.310

您正在`bash`使用`sh`.

您的选择是：

*   将您的 shebang 线更改为`#!/bin/bash`并更改`dir2=${dir/"last part/needs to/be/removed/"}`
*   保持 shebang 线`#!/bin/sh`不变并改变`dir2="$(echo ${dir} | sed -e 's/last part\/needs to\/be\/removed\///')"`你需要逃离你`/`的 s 的地方

# jquery - “页面级别”的 jQuery 验证器

> ID：15686027
> 
> 赞同：5
> 
> 时间：2013-03-28T15:36:38.983
> 
> 标签：jquery, asp.net, jquery-validate, validation

所以我已经编写了一个自定义的 jQuery 验证器方法。它与 1 个或多个**单独**的下拉列表相关联。（我在asp.net，顺便说一句）

```
jQuery.validator.addMethod("dropdownBoxHasItemSelected", function (value, select, arg) {
    var returnValue = false;
    var selectedIndex = $(select).prop("selectedIndex");
    if (selectedIndex != 0) {
        returnValue = true;
    }
    return returnValue;
}, "Please select a item."); 
```

所以这真的不是我的问题。

我有一些必须在“页面级别”进行的验证。或者也许在“GridView”级别是一种更好的表达方式。

这是场景：（我使用虚构的数据使解释更容易，也就是说，我真的没有玩具和食物）

我有一个网格视图。

```
Column A of the gridview is of no consequence of this, but it exists.
Column B of the gridview has a DropDownList for "FavoriteToy". 
Column C of the gridview has a DropDownList for "FavoriteFood". 
```

所以规则是这样的。

对于gridview中的每一行：

```
You must pick a FavoriteToy or a FavoriteFood for each row.
You can pick a FavoriteToy OR a FavoriteFood, but not both on the same row.
If you pick a FavoriteToy of "TeddyBear" in RowX, none of the other rows can have TeddyBear chosen. (Aka, each row must have a distinct FavoriteToy chosen)
If you pick a FavoriteFood of "AppleButter" in RowX, none of the other rows can have AppleButter chosen. (Aka, each row must have a distinct FavoriteFood chosen) 
```

如果需要，可以将新行添加到 gridview。还有一个“删除”按钮，以防万一用户用尽了所有的 FavoriteToy 和 FavoriteFood 组合。

现在，我已经编写了所有验证逻辑（使用 jQuery 语法检查值并循环遍历所有内容）。

我正在寻找有关如何使用 jQuery.validator.addMethod 连接“网格视图整体验证器”的建议。

我想我可以将它连接到一个 asp:Label （客户端上 type="text" 的“输入”），因此错误消息会在那里弹出。

或者，网格视图在客户端呈现为“表格”。

有什么一般性的建议吗？

==================================================== ===================

到目前为止我所做的：

asp:net 控制：

```
<asp:HiddenField ID="hidGridViewValidatorPlaceHolder" runat="server" /> 
```

和下面的方法

```
jQuery.validator.addMethod("gridViewValiatorMethod", function (value, select, arg) {
    var returnValue = true;
    var errorMsg = SuperValidationWrapper();
    if (errorMsg != "") {
        alert(errorMsg);
        returnValue = false;
    }
    return returnValue;
}, "Please address the issues in the gridview."); 
```

SuperValidationWrapper() 具有所有循环。我返回一个有任何问题的串联字符串。我不喜欢那样，但这就是我所做的。

警报框为您提供详细信息，以及“请解决网格视图中的问题”文本。如果有任何问题出现。

任何改进表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:57:42.247

Validator 确实是为验证字段而设计的，但是由于您不想验证字段，因此无法将表达式绑定到字段。

您确实需要将“页面验证”逻辑放在提交处理程序中

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

# tsql - 使用动态 sql 创建一个包含总和的表

> ID：15686031
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:48.403
> 
> 标签：tsql, sql-server-2008-r2, dynamic-sql

我需要动态选择的值是日期，因此会发生变化（即每周或每月）。我想知道如何使用 TSQL (SQL Server 2008) 中的“EXEC”函数来做到这一点

表 Regis 有 4 列，数据与此类似（有 90k 行）：

```
Holder     Period       State  Ttl
Dell       2011-12-31   CA     5
Dell       2012-01-31   PA     7
Sony       2011-11-30   TX     8
Sony       2013-02-28   FL     20 
```

总计是在该日期结束的月份中该州的总“销售额”。该销售数据跨越 14 个月。但是，它可能会增长到 20 个月。此外，日期会随着时间的推移而改变，因为它是滚动月份。我只想获得州总交易，以时期为列。

我知道删除 Holder 并将 Group by 与 SUM 一起使用，将横向执行此操作。我也知道，通过了解所有时期，我可以使用枢轴。但是，我希望将 Period 作为列，并希望通过动态 SQL 来做到这一点，因为我还需要学习其他的东西来学习动态 SQL。谢谢你的帮助。

最终结果应该像

```
state    2011-11-30  2011-12-31... 2013-02-28
CA       100         205           78
WA       90          159           62
CO       16          654           31
TX       87          321           205
NY       54          45            415 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:47:02.227

我认为您需要进行动态透视，因为您的列名是未知的，并且它们的数量也是未知的。我在下面的代码中做了类似的事情。COALESCE 是最神奇的，因为它构建了要基于的列表。在我的示例中，“SysCode”将等同于“Period”列。

```
--Pull the data set

DECLARE
    @Query NVARCHAR(4000)

INSERT INTO 
    #Rates

SELECT 
    CAST(mrc.StartDay AS DATE) [Start Date],
    CAST(mrc.EndDay AS DATE) [End Date],
    dpe.NCCDayPart [Daypart],
    dpe.NCCDayPartDescription [Description],
    mrc.Network,
    ru.SysCode,
    mrc.Rate

FROM 
    minimumratecards mrc
    LEFT JOIN DaypartExtension dpe
        ON mrc.DayPartSequence = dpe.Sequence
        AND dpe.Division = 'CAMC'
    LEFT JOIN #RetailUnit ru
        ON mrc.RetailUnitCode = ru.RetailUnit

WHERE
    mrc.MinimumRateCardID = @MinimumRateCardID

--Get a distinct list of syscodes that were returned    
SELECT DISTINCT
    Syscode

INTO
    #Syscodes

FROM
    #Rates

--Format the syscode list into a string to be used in the pivot table
SELECT 
    @Cols = COALESCE(@Cols + ',[' + SysCode + ']',
                         '[' + SysCode + ']')
FROM    
    #Syscodes

ORDER BY 
    SysCode

--Pivot the data
SET @Query = 
    N'SELECT 
        [Start Date],
        [End Date],
        [Daypart],
        [Description],
        [Network], '+
        @Cols +'
    FROM
    (SELECT 
        [Start Date],
        [End Date],
        [Daypart],
        [Description],
        [Network],
        [Rate],
        [SysCode]
    FROM    #Rates AS t1) p
    PIVOT
        (
        MAX([Rate])
        FOR [SysCode] IN
        ( '+
        @Cols +' )
        ) AS pvt
        ORDER BY [Network];'

EXECUTE(@Query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:49:53.367

Since you are using SQL Server you can use the PIVOT function to transform your rows into columns.

Before jumping into a dynamic version it is easier to see how the code is set up for limited or static values. For your data, you will use:

```
select *
from
(
  select period, state, ttl
  from regis
) d
pivot
(
  sum(ttl)
  for period in ([2011-11-30], [2011-12-31], [2013-02-28])
) piv; 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/f46b6/1).

You will need to create a list of the distinct `period` values that will be used in the pivot. The code to create this list will be similar to :

```
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Period) 
                    from regis
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

The code that you will use to create the dynamic SQL is:

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Period) 
                    from regis
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT state, ' + @cols + ' from 
             (
                select period, state, ttl
                from regis
            ) x
            pivot 
            (
                sum(ttl)
                for period in (' + @cols + ')
            ) p '

execute(@query) 
```

# json - Apache Camel - GSON formatter

> ID：15686032
> 
> 赞同：0
> 
> 时间：2013-03-28T15:36:48.820
> 
> 标签：json, spring, apache, gson, apache-camel

I would like to format my gson when the json object came via Apache-Camel context. In my application_context.xml related field is like this:

```
 <camel:camelContext>
        <camel:dataFormats>
            <camel:json  id="gson" library="Gson" unmarshalTypeName="com.pzt.blz.fraud.domain.Payment"  />
        </camel:dataFormats>
        <camel:route>
            <camel:from uri="rabbitmq::blz.service.component.fraud?autodelete=false&amp;durable=true"/>
            <camel:unmarshal ref="gson"></camel:unmarshal>
               <camel:process ref="fraudProccessor"></camel:process>
            <camel:marshal ref="gson"></camel:marshal>
            <camel:inOnly uri="rabbitmq::blz.service.component.fraud-reply?autodelete=false&amp;durable=true"/>
        </camel:route>
    </camel:camelContext> 
```

Camel:unmarshal and Camel:marshal parts are doing the json to object and vice versa thing.However I would like to add some properties on this file like:

```
public Gson createGson(){
    return new GsonBuilder().
            setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES).
            setPrettyPrinting().
            serializeNulls().
            create();

} 
```

How can I setFieldNamingPolicy to LOWER_CASE_WITH_UNDERSCORES or LOWER_CASE_WITH_DASHES etc...

Is there any chance to format this on Camel? and these changes should be done at my application_context.xml file.

Appreciate for all replies...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:55:01.857

我认为我们没有在 XML DSL 中公开这些选项，因此您可以在 gson 数据格式上进行配置。我已经记录了一张票以在未来的 Camel 版本中实现这一点：[https ://issues.apache.org/jira/browse/CAMEL-6227](https://issues.apache.org/jira/browse/CAMEL-6227)

# python - How do I run two different processes on Windows cmd from a python script?

> ID：15686039
> 
> 赞同：0
> 
> 时间：2013-03-28T15:37:11.147
> 
> 标签：python

I need to run two different processes that will be running on two different cmd windows concurrently. These process are started from a python script. I tried this but it never worked.

```
import os

# first process
os.chdir("path/to/firstDir")
os.system("start cmd")

# second process
os.chdir("path/to/secondDir")
os.system("start cmd") 
```

This script start the processes on different cmd windows but the second process start after the first has finished. I need both of them to run concurrently on two different cmd windows.

I'm on Windows 7 64 bit.

# automation - IE9, Automation server can't create object error while using CertEnroll.dll

> ID：15686040
> 
> 赞同：11
> 
> 时间：2013-03-28T15:37:13.180
> 
> 标签：automation, internet-explorer-9, x509certificate, activexobject

In my web page, a `JS` block like this:

```
var classFactory = new ActiveXObject("X509Enrollment.CX509EnrollmentWebClassFactory");

// Other initialize CertEnroll Objects 
```

It works fine in `windows7(32bit or 64bit)` with `IE8(32bit)`, as long as I change the IE8 secure setting, enable Initializing and Script ActiveX controls not marked as safe.

But when use IE9(32bit), I try anything I can find on web, it reports error "Automation server can't create object."

I even created a static html file, save it in my hard disk, and then open it with IE9(32bit), it worked fine. Then I put the html file on my web site, visit the html file with url, then it came up with the error message again.

I have worked on this problem for 4 days, any suggestion would be appreciated.

3Q. I hope you can read my words as I'm not an native English speaker.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-28T20:42:54.447

a) 转到工具-> Internet 选项

b) 选择安全选项卡

c) 单击受信任的站点（或本地 Intranet，具体取决于您的站点是否受信任）

d) 点击自定义级别

e) 确保启用“初始化和脚本活动 x 控件未标记为安全脚本” - 这位于滚动条 1/4 处的 Activex 控件和插件部分。

点击确定，确定。

完成后，清除浏览器 cookie 和缓存。关闭所有浏览器会话。重新打开 IE 以启动您的网站。

尝试禁用步骤 (e) 中的设置以查看问题是否再次出现 - 这应该可以更深入地了解问题。

# geocode - 用户搜索地址后从诺基亚地图获取地理坐标

> ID：15686050
> 
> 赞同：1
> 
> 时间：2013-03-28T15:37:29.360
> 
> 标签：geocode, here-api

我正在使用 HTML5 移动框架 ( [https://developer.here.com/mobile_html5](https://developer.here.com/mobile_html5) ) 来显示地图和文本框，以便用户可以搜索地址。这就是“Mobile HTML5 App Builder”（[https://developer.here.com/mobile_html5_appbuilder](https://developer.here.com/mobile_html5_appbuilder)）给我的：

```
var app = nokia.mh5.app.embed({
    domNode:"#app_location",
    appId:"_peU-uCkp-j8ovkzFGNU",
    appCode:"gBoUkAMoxoqIWfxWA5DuMQ",
    "configuration":{
        "map":{
            "infobubble":false
        }
    }
}); 
```

我想要做的是在用户搜索并选择地址后读取地理坐标（经度和纬度）并将其存储到一些变量中，或者在我的代码中读出地图上标记的地理坐标。

有没有类似的东西

```
$('#app_location').map.getCoordinates() // pseudo-code 
```

或者是否可以在 embed 方法的配置部分添加一个监听器？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:54:17.573

我在诺基亚开发者讨论板上得到了答案，所以积分归他们所有。以防有人路过，这是解决我问题的解决方案：

```
nokia.mh5.event.add(nokia.mh5.app.controller.current.page.header.search, "success", function(e) {
    console.log("results: ", e.data);
}); 
```

您将在其中`e.data`找到有关经度、经度、输入的地址等信息。

# svg - How to make several path elements inherit their stroke from one place?

> ID：15686052
> 
> 赞同：1
> 
> 时间：2013-03-28T15:37:35.500
> 
> 标签：svg, d3.js

I've got about 300 `path` elements in an SVG, all with different outlines. I am trying to work out if there's a way to make them inherit their `stroke` and `stroke-width` properties from one central place, so that I can change that stroke in one place (using JavaScript) and all the paths will automatically inherit the change (without having to iterate over them and change them one-by-one, which might be slow).

I tried doing this:

```
<svg>
  <defs>
    <path id="base-path" stroke="#f00" stroke-width="2px"></path>
  </defs>

  <g>
    <use xlink:href="#base-path" d="M655.4122777593284,559.3735699875456L654.1949190078633,555.3887773907059L658.1760111410327,552.9949065234823L662.5848239166088,564.7584631711534L654.5239348866377,566.2861923041205L652.878855492766,562.0062446004627L653.569788838192,559.4960802535879Z"/>
    <use xlink:href="#base-path" d="M668.9348303769535,569.1558517040312L664.0653953710934,566.6527113415123L663.3415604377898,569.6439835699075L661.4990715166535,568.1793081850988L663.7034779044416,561.2718180255733L665.5459668255778,563.7190849448948L668.5729129103017,563.229819290997Z"/>
    <!-- etc... -->
  </g>
</svg> 
```

I expected all the `use` elements to be rendered like `path` elements, each with their own unique outline (they all have unique `d` attributes), but all with the same `stroke` and `stroke-width` as the `#base-path`.

But this didn't work. The `use` elements don't appear at all. When I inspect them in Chrome dev tools, they seem to be technically 'rendered', but with zero width and height.

Am I misunderstanding how `use` works? Or is it just not possible to do what I'm trying to do?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:48:32.223

`<use>`没有广告属性，你不能像你一样将它用作伪路径。[这里](http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#use)有一些如何使用的例子`<use>`

不过，作为您的主要问题，这正是 CSS 的发明目的。只需将路径通常创建为`<path>`元素，但给它们一个类属性，然后适当地设置 stroke 和 stroke-width 属性，例如

```
<path class="whatever" d="M655.4122777593284,559.3735699875456L654.1949190078633,555.3887773907059L658.1760111410327,552.9949065234823L662.5848239166088,564.7584631711534L654.5239348866377,566.2861923041205L652.878855492766,562.0062446004627L653.569788838192,559.4960802535879Z"/>
<path class="whatever" d="M668.9348303769535,569.1558517040312L664.0653953710934,566.6527113415123L663.3415604377898,569.6439835699075L661.4990715166535,568.1793081850988L663.7034779044416,561.2718180255733L665.5459668255778,563.7190849448948L668.5729129103017,563.229819290997Z"/>

<style>
 .whatever {
    stroke: #f00;
    stroke-width: 2px;
 }
</style> 
```

当然，如果你的每一条路径都是相同的，那么你甚至不需要 class 属性，你可以这样做

```
<style>
 path {
    stroke: #f00;
    stroke-width: 2px;
 }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:24:43.413

Just to give a quick and dirty example in addition to Robert Longsons reply: Something like this will do the job:

```
<svg xmlns="http://www.w3.org/2000/svg" onclick="
    document.getElementById('dynamicStyle')
    .textContent='line{stroke:green;stroke-width:10}'">

  <style type="text/css" id="dynamicStyle">
    line{stroke:black;stroke-width:4}
  </style>

  <line x2="100" y2="100"/>
</svg> 
```

[Try on jsFiddle](http://jsfiddle.net/srRqS/) (click on SVG to change the CSS).

# c++ - 将 MinGW 与 Visual Studio 2010 集成（Makefile 项目）

> ID：15686059
> 
> 赞同：4
> 
> 时间：2013-03-28T15:37:59.450
> 
> 标签：c++, visual-studio-2010, c++11, mingw, makefile

我正在尝试让 MinGW（版本 4.7.2）与 Visual Studio 2010 一起使用以使用一些新的 C++11 功能（遗憾的是我仍在使用 WindowsXP 并且无法使用 Visual Studio 2012）。首先，我创建了一个项目：文件 -> 新项目 -> Visual C++ -> 常规 -> Makefile-Project

```
General:
Build Command Line: mingw32-make.exe
Rebuild All Command Line: mingw32-make.exe rebuild all
Clean Command Line: mingw32-make.exe clean all

IntelliSense:
Include Search Path: C:\MinGW\lib\gcc\mingw32\4.7.2\include\c++;C:\MinGW\include;
Assembly Search Path: C:\MinGW\lib\gcc\mingw32\4.7.2;C:\MinGW\lib;
Additional Arguments: -std=c++11 
```

我创建了一个包含内容的makefile：

```
all:
    g++ -std=c++11 -pthread -o Makefile_Test.exe main.cpp 
```

它编译得很好，但在 Visual Studios 编辑器中几乎所有内容都带有波浪红色下划线。IE

```
std::vector<std::thread> threads; 
```

`std::vector`-> '错误：命名空间 std 没有成员向量'

`std::thread`-> '错误：命名空间 std 没有成员线程'

甚至`std::cout << "";`

`std::cout`-> '错误：命名空间 std 没有成员 cout'

但是我当然包含了相应的标题：Visual Studio 甚至可以找到它们（将光标放在#include -> Ctrl+Shift+G 打开标题）。我的 MinGw 文件夹如下所示：

```
+ MinGW
|- bin
|- doc
|- include
|+ lib
 |- gettext
 |+ gcc
  |+ mingw32
   |+ 4.7.2
    |- debug
    |+ include
     |- c++
     |...
    |- include-fixed
    |- install-tools
|- libexec
|- mingw32
|- msys
|- share
|- var 
```

我也尝试过几次删除 sdf 文件并让 Visual Studio 从头开始​​重建它 - 但所有这些错误再次出现。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T16:03:18.327

恐怕您将不得不放弃使那些红色曲线消失的尝试，*除非您完全禁用它们*（这样，例如，甚至不会标记对不存在的函数的调用）。

原因是[Visual Studio 的 Intellisense 使用 EDG 的 C++ 编译器的单独前端](http://blogs.msdn.com/b/vcblog/archive/2009/05/27/rebuilding-intellisense.aspx)来解析您的程序，并可能在无效语句或表达式下放置一个红色波浪线，并且 Intellisense 在 VS2010 中使用的版本（显然）不完全符合 C ++11。

因此，切换到 GCC 4.7.2 作为编译器将有助于构建 C++11 程序，但不会影响 Intellisense 的行为。

如果要完全禁用红色曲线，可以通过选择工具 -> 选项 -> 文本编辑器 -> C/C++ -> 高级，然后将“禁用曲线”设置为“真”来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T22:42:05.583

使用像 OP 描述的 Makefile 项目模板。通过将正确的包含目录添加到项目属性中，我已经能够让 VC 2013 和 2015 社区版的智能感知工作。

1.  打开`Project menu`
2.  选择`{Project Name} Properties`
3.  打开`Configuration Properties`
4.  `VC++ Directories`在树形菜单中选择
5.  将目录添加到该`Includes Directories`部分

您必须将包含要读取的项目的目录添加到智能感知中。假设我正在开发一个 gtkmm 项目，我还会包含 glibmm 目录，这样 Glib::ustrings 就不会出现曲线。即使 glibmm.h 没有直接包含在我的源文件中。

# c# - 使用 Try Catch 转换价值

> ID：15686060
> 
> 赞同：1
> 
> 时间：2013-03-28T15:38:00.507
> 
> 标签：c#, sql

在下面的以下示例中，我从数据库返回一个值并将该值转换为双精度值，如果它由于为 NULL 而下降，则将 0 设置为默认值。

```
using (SqlCommand cmd = new SqlCommand(sql.ToString(), conn))
{
    try
    {
        this.value = Convert.ToDouble(cmd.ExecuteScalar());
    }
    catch (Exception)
    {
        this.value = 0;
    }
} 
```

在这种情况下使用 Try Catch 会被认为是不好的做法吗？处理这种情况的更好方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T15:40:52.113

> 在这种情况下使用 Try Catch 会被认为是不好的做法吗？

绝对地。*除了其他任何事情之外，如果任何事情*失败，您将返回 0 ，而不仅仅是在返回值为 null 的情况下。（如果事实证明整个表已被删除，您是否*真的*想继续，好像一切都很好？）

如果你想检测一个空返回值，你应该明确地这样做：

```
object result = cmd.ExecuteScalar();
return result == null ? 0d : (double) result; 
```

如果有一个*非*空返回值*不是*`double`. 你应该知道你的查询应该返回什么类型，如果你的类型错误，就会失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T15:39:09.567

你想要[Double.TryParse](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)，这会返回一个布尔值，然后你将一个未初始化的 double 变量传递给它，其中的 out 参数会被赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:40:35.463

这将被视为不好的做法。Try Catch 不适用于这样的程序流程。如果抛出另一个异常，那么您仍然会捕获它并将值设置为 0。

专门检查您的程序流程。显式处理 null 更有效，也更容易理解。

# python - python 中的链式 if...else 表达式是否比 if..elif..else 语句更快？

> ID：15686062
> 
> 赞同：-2
> 
> 时间：2013-03-28T15:38:14.683
> 
> 标签：python

我写了这个快速测试脚本来检查，但我现在只能访问 pythonanywhere 上的 bash 控制台，而且我没有得到一致的时间。

```
def a():
    x = 0
    for i in xrange(1000):
        if i%2==0 and i%3==0:
            x += 3
        elif i%2==0 or i%3==0:
            x += 2
        else:
            x += 1

def b():
    x = 0
    for i in xrange(1000):
        x += 3 if i%2==0 and i%3==0 else (2 if i%2==0 or i%3==0 else 1)

if __name__=="__main__":
    import cProfile
    cProfile.run("for i in xrange(1000): a()")
    cProfile.run("for i in xrange(1000): b()") 
```

我正在寻找加快一些代码的速度，我想知道这两种不同的执行方式之间是否存在很大的速度差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:53:36.200

就像@Pavel Anossov 所说， a 更快：

```
import timeit

def a():
    x = 0
    for i in xrange(1000):
        if i%2==0 and i%3==0:
            x += 3
        elif i%2==0 or i%3==0:
            x += 2
        else:
            x += 1

def b():
    x = 0
    for i in xrange(1000):
        x += 3 if i%2==0 and i%3==0 else (2 if i%2==0 or i%3==0 else 1)

test_a = timeit.Timer(a)
test_b = timeit.Timer(b)

print min(test_a.repeat(3, 1000))
print min(test_b.repeat(3, 1000)) 
```

输出

```
0.573258876801
0.591067075729 
```

当我们用**range替换****xrange**时（xrange 在 3.x 中消失了），几乎没有区别，就像其他人说的那样。我在 2.6 上测试过

 **充分：

```
0.597590923309
0.598859071732 
```**

# c - sha-1 implementation in windows c

> ID：15686064
> 
> 赞同：2
> 
> 时间：2013-03-28T15:38:22.427
> 
> 标签：c, licensing, sha1

I search for a quick way of calling a sha-1 function in WINDOWS c.
I tried openssl, but I found no current windows static lib file to download (libcrypto.lib), compiling from source is no quick option for me.

On the website [http://www.packetizer.com/security/sha1/](http://www.packetizer.com/security/sha1/) I found a c implementation of sha-1 (Paul E. Jones).

It is only one c file (sha1.c) with 370 lines of code and one header file, so it seems pretty easy to include into my source code.

Concerning this implementation I have the following question:

1) The source code is copyrighted under FPL (Freeware Public License). I have looked at [http://opensource.org/licenses/alphabetical](http://opensource.org/licenses/alphabetical) for Freeware Public License, but I did not find it.

The licence file in the source says:

```
This software is licensed as "freeware."  Permission to distribute
this software in source and binary forms, including incorporation 
into other products, is hereby granted without a fee.  THIS SOFTWARE 
IS PROVIDED 'AS IS' AND WITHOUT ANY EXPRESSED OR IMPLIED WARRANTIES, 
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
AND FITNESS FOR A PARTICULAR PURPOSE.  THE AUTHOR SHALL NOT BE HELD 
LIABLE FOR ANY DAMAGES RESULTING FROM THE USE OF THIS SOFTWARE, EITHER 
DIRECTLY OR INDIRECTLY, INCLUDING, BUT NOT LIMITED TO, LOSS OF DATA 
OR DATA BEING RENDERED INACCURATE. 
```

So it seems that this license is permissive like BSD, MIT or Apache license. Is this right? Or is the license similar to GPL or LGPL?

2) Does somebody know if this is a reliable implementation?

Thanks alot in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:43:48.577

1）看起来你可以将它包含在你的程序中是的。许可证没有说明任何关于修改代码的内容，因此您应该避免这样做（但鉴于这是一个密码学问题，无论如何这都是个好建议）。

2）不知道

# android - Android 的 Facebook 集成：自定义 facebook 应用程序提供的对话框？

> ID：15686065
> 
> 赞同：0
> 
> 时间：2013-03-28T15:38:27.097
> 
> 标签：android, facebook-android-sdk, android-facebook

我的应用需要从用户那里获得一些权限。为此，我使用了 Facebook SDK 中的 LoginButton，它触发了一个由官方 Facebook 应用程序处理的意图，它生成一个对话框（“你想给这个应用程序这些权限吗？确定/取消”），以及与它的交互返回到我的活动。

凉爽的。有没有一种方法或机制可以以某种方式最小化地改变 facebook 应用程序提供的对话框的样式？对话主题，也许吧？（确定的和有争议的否定答案也是一个答案！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:38:52.467

显示的对话框是一个 WebDialog。没有api来控制它。应用的主题是：DEFAULT_THEME = android.R.style.Theme_Translucent_NoTitleBar。除非您想更改核心 sdk，否则没有直接的 api 或更改主题的方法。这将使其难以管理。

# php - PDO bound parameters causing incorrect results with AES_ENCRYPT

> ID：15686068
> 
> 赞同：0
> 
> 时间：2013-03-28T15:38:33.713
> 
> 标签：php, mysql, pdo

I have a problem using the function AES_ENCRYPT with PDO, when I use the SQL statement below with :pass and :key as bound parameters, I get no match from the database. However if I take them out and put them directly in the SELECT statement I get a COUNT of 1 result which is correct.

Am I embedding these incorrectly into the statement, or is there another way to make my select function work properly with the AES_ENCRYPT function? The function works correctly with straight parameters, for example

SELECT * FROM users WHERE name=:name AND email=:email

```
$query[] = "SELECT COUNT(1) FROM users WHERE active=1 AND username=:username AND password=AES_ENCRYPT(:pass,:key);";
$query[] = array( 
            'username'    => $username,
            'pass'        => $pass,
            'key'         => $key );
list($exists) = select( $query, true );

function select( array &$query, $one=FALSE ) {

    try {

      $stmt = $this->PDO->prepare( $this->named_queries( $query[0] ) );
      foreach( $query[1] as $k=>$v ) {
        $stmt->bindParam( ":$k", $v );
      }
      $stmt->execute();
      $query = array(); # If the query is from a loop this prevents only the first loop's SELECT from being used.

      if( $one ) {
        $return = $stmt->fetch();
      }else{
        $return = $stmt->fetchAll();
      }
      return $return;

    }catch( PDOException $e ) {

      if( $this->test )
        self::print_error( __METHOD__, $e->getMessage() );

      return false;
    }
  } 
```

# excel - 如何在vba excel中打开具有可变扩展名的文件

> ID：15686071
> 
> 赞同：0
> 
> 时间：2013-03-28T15:38:41.080
> 
> 标签：excel, vba

我必须制作一个 vba 才能从 excel 打开 CSV 问题是文件具有以下格式：

**常量名文件。年年**

例如**_**

文件 1.124514（第 1 天）

文件 1.144521（第 2 天）

file1.152132（改天）

名称文件是常量，但 YYY 是可变的，但里面的文件是 CSV。那有可能打开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T15:58:52.417

在 Excel 2007 中打开 csv 文件时，我遇到了保持格式的问题。在 excel-forums 中四处寻找，只是为了找到一种可能的解决方案。将文件扩展名从 csv 更改为 txt。

## 试图使函数尽可能通用。这里是：

```
Option Explicit

Function ChangeFileExt(filnamn As String, extensionOld, extensionNew)         
Dim oldname, newname as string     

oldname = ThisWorkbook.Path & "\" & filnamn & "." & extensionOld

newname = ThisWorkbook.Path & "\" & filnamn & "." & extensionNew         
Name oldname As newname  

End Function

'...............................................................................

Sub change_extension()     

' Objective: Want to keep csv-format at workbook.open

' Rename file from filename.csv to filename.txt      
' Open txt-file            
' process data          
' Rename back to csv-file if neccesary        

Dim csv, txt As String           

csv = "csv"      
txt = "txt"         

Call ChangeFileExt("file_name_to_change", csv, txt)      '  omit extension in file_name_to_change         

...all kinds of code       

Call ChangeFileName("file_name_to_change", txt, csv)      '  change filename back to original name

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:43:14.397

为什么不强制将其作为 CSV 文件打开

```
Workbooks.Open Filename:=name, Format:=2 
```

这里的 2 指定文件用逗号分隔 [http://msdn.microsoft.com/en-us/library/office/ff194819.aspx](http://msdn.microsoft.com/en-us/library/office/ff194819.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:44:20.607

是的，试试下面的代码：

```
dim sFileName as string
dim sExtension as string

sExtension="YYY"
sfilename=constan_name_file & "." & sExtension

workbooks.open sfilename, Format:=2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:56:46.460

感谢通配符的使用，终于拿到代码了。

```
sub GetFiles(direc As String, fich As String) 

    Dim strFileName As Variant

    strFileName = dir(direc & "\" & fich & ".******")

       If Len(strFileName) > 0 Then
        'open
       end if

End sub 
```

# python - python try 语句上的语法无效

> ID：15686079
> 
> 赞同：4
> 
> 时间：2013-03-28T15:39:01.130
> 
> 标签：python

在我的脚本中，我有一个大的 While: try: loop。在此范围内，如果从我的相机成功下载图片并调整大小，我想增加一些指针，这是我的代码在较大的 python 脚本中的样子：

```
import os.path
try os.path.isfile('/home/pi/CompPictures' + picturenumber + '.JPG'):
    os.system('sudo rm /home/pi/Pictures/IMG_0001.JPG')
    os.system('sudo rm /home/pi/output.bin')
    picturenumber = int(picturenumber))+1
except:
    pass 
```

picturenumber 包含一个字符串 '1' 开始，然后会增加。

我只想让这个运行一个。所以基本上我在不断地运行我的更大的代码，然后每次扫描更大的循环，我想检查这个 try 语句一次，如果文件存在，删除一些文件并增加指针。

我收到以下错误。

```
 File "pijob.py", line 210
    try os.path.isfile('/home/pi/CompPictures' + picturenumber + '.JPG'):
         ^
SyntaxError: invalid syntax 
```

对python来说非常新……所以希望这不是一个简单的错误:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:40:09.567

您需要一个新行和一个`:`. 试试这个：

```
try:
    os.path.isfile('/home/pi/CompPictures' + picturenumber + '.JPG') #
    os.system('sudo rm /home/pi/Pictures/IMG_0001.JPG')
    os.system('sudo rm /home/pi/output.bin')
    picturenumber = int(picturenumber))+1
except:
    pass 
```

无论结果如何，您都可以包含`finally`执行代码的语句：

```
try:
    #code
except:
    pass
finally:
    #this code will execute whether an exception was thrown or not 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T15:39:52.590

试试这样

```
import os.path
try :
    os.path.isfile('/home/pi/CompPictures' + picturenumber + '.JPG') #
    os.system('sudo rm /home/pi/Pictures/IMG_0001.JPG')
    os.system('sudo rm /home/pi/output.bin')
    picturenumber = int(picturenumber))+1
except:
    pass 
```

python尝试语法，

```
try:
   some_code
except:
   pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:07:02.330

Python 中 try/except 的语法是

```
try:
    # code that might raise the exception
    pass
except <exceptions go here>:
    # code that should happen when the
    # specified exception is/exceptions are
    # raised
    pass
except <other exceptions go here>:
    # different code that should happen when
    # the specified exception is/exceptions
    # are raised
    pass
else:
    # code that follows the code that 
    # might raise the exception, but should
    # only execute when the exception isn't
    # raised
    pass
finally:
    # code that will happen whether or not
    # an exception was raised
    pass 
```

一些一般准则：

*   除非您真的希望您的代码静默处理所有异常，否则请捕获特定异常。这将使您能够更好地处理出现问题的任何事情。
*   当使用多个`except`块时，将具有更具体异常的块放在更高的位置（即，确保子类异常出现在它们的基础之前）。具有匹配异常的第一个块将获胜。
*   将尽可能少的代码放在`try`. 任何可以引发您期望的异常的代码都属于`try`; 只有在没有引发异常时才应该执行的任何代码都应该放在`else`. 这样，如果它引发了你没想到的异常，它不会被压扁。

此外，您可能想查看[`subprocess`模块](http://docs.python.org/2/library/subprocess.html)而不是使用`os.system()`.

# ios - UIView animateWithDuration 返回原始状态

> ID：15686080
> 
> 赞同：2
> 
> 时间：2013-03-28T15:39:01.860
> 
> 标签：ios, cgaffinetransform

所以我需要创建一个简单的动画，其中视图飞出屏幕，然后根据用户手势再次飞回。我的动画代码（如下）效果很好。实际上它工作得有点太好了。请注意在 enterStage 方法中我如何不重新定位视图。我只是将它的比例设置为 1。视图飞入并在它的原始位置结束就好了。如果我改为使用 CGAffineTransformMakeTranslation 并且不进行缩放，它也可以完美运行。我预计我需要自己跟踪原始大小和位置，但似乎这对我来说有点怪异。

这很神秘。

这些关于原始大小和位置的数据保存在哪里？如果我愿意，我将如何禁用此行为 - 就像我希望视图不记住其原始位置一样？

```
-(void) exitStage{

    [UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:(void (^)(void)) ^{
                         CGAffineTransform t = CGAffineTransformMakeTranslation(0, -1000);
                         self.transform = CGAffineTransformScale (t, 10.0, 10.0);
                     }
                     completion:^(BOOL finished){
                     }];
}

-(void) enterStage{

    [UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:(void (^)(void)) ^{
                         //self.transform = CGAffineTransformMakeTranslation(0, self.originalYcoord);
                         self.transform = CGAffineTransformMakeScale(1,1);
                     }
                     completion:^(BOOL finished){
                     }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:41:19.497

在您的输出转换中，您将其平移设置为 (10,10)，但在您的输入转换中，您将其转换设置为 1x1 比例转换，其中不包含任何平移，因此只需擦除它即可撤消您的平移

如果您想保持原始转换并对其进行修改，则需要执行类似的操作

```
self.transform = CGAffineTransformScale(self.transform, 1, 1);
//or
self.transform = CGAffineTransformTranslate(self.transform, 10, 10); 
```

# javascript - 使用 Nodejs 进行连接监控

> ID：15686087
> 
> 赞同：2
> 
> 时间：2013-03-28T15:39:15.037
> 
> 标签：javascript, node.js

我想监控连接到我的 node.js 服务器的活动连接。我已经看到 NodeFly 可以做到这一点，但我想在我的服务器（ubuntu）上本地安装一个工具。

是否有任何（可能是免费的）软件/应用程序可以实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:48:40.937

我不知道有什么开箱即用的方法，但是假设您有一个快速应用程序，您可以从以下开始：

```
var exec = require('child_process').exec;

...

app.get('/status', function (req, res) {
  exec('lsof +p `pgrep node` | grep TCP', function (err, stdout, stderr) {
    请求。发送（标准输出）；
  });
});

```

# eclipse - 查找 Eclipse 插件的 jar 文件

> ID：15686091
> 
> 赞同：0
> 
> 时间：2013-03-28T15:39:18.910
> 
> 标签：eclipse, eclipse-plugin

几年前，我为 Eclipse 编写了一个简单的插件，它扩展了`org.eclipse.core.runtime.AbstractPlugin`. 似乎每次我将 eclipse 更新到新版本的 ecplise 时，像这样的类都会迁移到一些新的 .jar 文件。

例如，我发现`AbstractPlugin`现在在`org.eclipse.ui.workbench_3.7....jar`. 但是后来我发现它的超类不在同一个jar中，所以我必须找出*它*在什么.jar中等等。

因此，有一项艰巨的任务是尝试找出我使用的所有库类（以及它们使用的等等）现在在哪些 .jar 文件中，并调整项目构建路径中的外部 jar 列表。

[http://www.jarfinder.com](http://www.jarfinder.com)等网站 很有用（但通常已过时）。[http://www.vogella.com/articles/EclipseCodeAccess/article.html#eclipsesourcecode](http://www.vogella.com/articles/EclipseCodeAccess/article.html#eclipsesourcecode)中所示的 Java 搜索可以提供帮助。但肯定有更好的方法。

当我们迁移到新版本的 eclipse 时，使插件的构建路径保持最新的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:19:09.880

为了回答我自己的问题，这就是我所做的：

*   首先在 plugin.xml 的依赖项选项卡上，我在“导入的包”下添加了我需要的所有包
*   然后我右键单击项目并选择 PDE Tools >> Update Classpath ... ，接受默认值并单击 Finish。

这要好得多，因为插件（大概）现在正确地表达了它需要运行的内容。

# jquery-mobile - jquerymobile 对话框不起作用，但弹出窗口是

> ID：15686097
> 
> 赞同：1
> 
> 时间：2013-03-28T15:39:39.567
> 
> 标签：jquery-mobile

我有一个我设置的 javascript 对象

```
this.popupWin = $('<div data-role="popup" id="dialog-1">Hello</div>').appendTo(this.container);

this.popupLink = $('<a  data-rel="popup" href="#dialog-1>mylink</a>').appendTo(this.container); 
```

这似乎工作正常。

但是，如果我设置`data-role`并没有出现对话框`data-rel`。`dialog`知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:47:32.593

将 div插入到`dialog`div 之外`data-role=page`。

# php - 在php中合并两个索引数组

> ID：15686098
> 
> 赞同：2
> 
> 时间：2013-03-28T15:39:51.017
> 
> 标签：php, arrays, loops

我有两个由 2 个循环创建的索引数组：

**$问题**

```
Array ( 
    [10] => Yes 
    [11] => No 
    [12] => Yes 
    [13] => No 
    [14] => Yes 
    [15] => No 
) 
```

**$评论**

```
Array ( 
    [10] => comment 
    [11] => comment 
    [12] => comment 
    [13] => comment 
    [14] => comment 
    [15] => comment 
) 
```

如何组合它们以便得到以下结果并保留索引：

```
Array ( 
    [10] => Yes, comment 
    [11] => No, comment 
    [12] => Yes, comment 
    [13] => No, comment 
    [14] => Yes, comment 
    [15] => No, comment 
 ) 
```

查看了array_merge，但如果密钥相同，则会附加。

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。

看了 array_combine 但是：

> 通过将 keys 数组中的值用作键并将 values 数组中的值用作相应值来创建一个数组。

我确定我需要第三个循环来“组合”它们，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:42:45.313

如果您知道您将拥有完全相同的密钥：

```
$new = array();
foreach($questions AS $key => $value) {
    $new[$key] = $value . ", " . $comments[$key];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T15:43:27.650

这应该为您提供几个选项。它假设 $questions 和 $comments 之间的键是同步的，并且如果有一些奇怪的键则进行处理。

```
<?php
$questions = array(
    '10' => 'Yes',
    '11' => 'No',
    '12' => 'Yes',
    '13' => 'No',
    '14' => 'Yes',
    '15' => 'No',
    '16' => 'No'
 );
$comments = array(
    '10' => 'comment 10',
    '11' => 'comment 11',
    '12' => 'comment 12',
    '13' => 'comment 13',
    '14' => 'comment 14',
    '15' => 'comment 15',
    '17' => 'comment 17'
 );

$combinedAsArray = array();
$combinedAsString = array();

foreach ($questions as $key => $value){

    if (array_key_exists($key, $comments)){
        $combinedAsArray[$key] = array($value, $comments[$key]);
        $combinedAsString[$key] = "$value, {$comments[$key]}";
    }else{
        $combinedAsArray[$key] = array($value, null);
        $combinedAsString[$key] = "$value, ";
    }
}

foreach ($comments as $key => $value){
    if (! array_key_exists($key, $questions)){
        $combinedAsArray[$key] = array(null, $value);
        $combinedAsString[$key] = " , $value";
    }
}

print_r($combinedAsArray);
print_r($combinedAsString); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T16:01:53.460

您可以像这样运行数组映射：

```
$merged_array = array_map(function($a, $b) {
    return $a . ', ' . $b;
}, $array1, $array2); 
```

或者，如果你不想要一个连接的字符串，而是类似

```
Array(
    0 => Array(
        0 => 'Yes',
        1 => 'comment 10',
    )
    ...
) 
```

您可以像这样传递`null`给数组映射：

```
$merged_array = array_map(null, $array1, $array2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T15:43:22.123

如果数组具有相同的索引，则解决方案可能是：

```
foreach($first_array as $index => $value){
    $output_array[$index] = $value . ", " . $second_array[$index];
} 
```

# android - 将记录插入sqlite db时出现强制关闭错误

> ID：15686100
> 
> 赞同：0
> 
> 时间：2013-03-28T15:39:54.277
> 
> 标签：android, sqlite

我正在开发我的第一个应用程序，用户必须在其中登录。我正在使用 SQLite 数据库存储用户名和密码。但是当我尝试向数据库添加新联系人时出现强制关闭错误。请帮助我我在哪里错了。以下是代码。

User.java 文件主要用于 getter 和 setter：

```
package com.example.first_db_app;

public class User 
{
    //private variables

int _userid;
String _uname;
String _upwd;

//empty constructor
public User()
{

}

//constructor
/*public User(int userid,String uname,String upwd)
{
    this._userid=userid;
    this._uname=uname;
    this._upwd=upwd;
}*/

//constructor
public User(String uname,String upwd)
{
    this._uname=uname;
    this._upwd=upwd;
}

//getting userid
public int getUserId()
{
    return this._userid;
}

//setting userid

public void setUserId(int userid )
{
    this._userid=userid;
}

//getting username

public String getUname()
{
    return this._uname;
}

//setting username
public void setUname(String uname)
{
    this._uname=uname;
}

//getting user password
public String getUpwd()
{
    return this._upwd;
}

//setting user password
public void setUpwd(String upwd)
{
    this._upwd=upwd;
} 
```

}

**我在其中创建了 DB 和 CRUD 操作的 DatabaseHandler.java**

```
package com.example.first_db_app;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

//creating database
public class DatabaseHandler extends SQLiteOpenHelper
{

//private static variables

private static final int DATABASE_VERSION=1;

//database name
private static final String DATABASE_NAME="UserDB";

//table name
private static final String TABLE_NAME="Users";

//table column names
private static final String USER_ID="id";
private static final String USER_NAME="u_name";
private static final String USER_PWD="u_pwd";

public DatabaseHandler(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

//creating tables
@Override
public void onCreate(SQLiteDatabase db)
{
    // TODO Auto-generated method stub
    String CREATE_USERS_TABLE= "CREATE TABLE"+ TABLE_NAME+ "("+  USER_NAME +      "TEXT,"+ USER_PWD + "TEXT" + ")";
    db.execSQL(CREATE_USERS_TABLE);
}

//upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    // TODO Auto-generated method stub

    //drop older table if existed

    db.execSQL("DROP TABLE IF EXISTS"+ TABLE_NAME);
    //creates table again
    onCreate(db);

}

//adding new users to the database
public void addUser(User user)
{

    SQLiteDatabase db=this.getWritableDatabase();

    ContentValues values=new ContentValues();
    //values.put(USER_ID, user.getUserId());
    values.put(USER_NAME, user.getUname());
    values.put(USER_PWD, user.getUpwd());

    //inserting row
    db.insert(TABLE_NAME, null, values);
    db.close();

}

//reading a single row.this is done by using cursor

public String getUser(String  Uname)
{
    SQLiteDatabase db=this.getReadableDatabase();
    Cursor cursor=db.query(TABLE_NAME,new String[] {USER_NAME,USER_PWD},USER_NAME + "=?",new String[]{String.valueOf(Uname)},null,null,null,null);

    if (cursor!=null)
        cursor.moveToFirst();

    //User user=new User(cursor.getString(0),cursor.getString(1));
    String password=cursor.getString(cursor.getColumnIndex(USER_PWD));  
    cursor.close();
    //return user
    return password;
}

//Updating a  single record in database

public int updateUser(User user)
{
    SQLiteDatabase db=this.getWritableDatabase();

    ContentValues values=new ContentValues();
    values.put(USER_NAME,user.getUname());
    values.put(USER_PWD, user.getUpwd());

    //updating row
    db.update(TABLE_NAME, values, USER_NAME + "=?" ,new String[]{String.valueOf(user.getUname())});
    return 0;

}

//Deleting a single record in database
public void deleteUser(User user)
{
    SQLiteDatabase db=this.getWritableDatabase();

    db.delete(TABLE_NAME, USER_NAME + "=?", new String[]{String.valueOf(user.getUname())});
    db.close();
} 
```

}

**我使用以下文件进行用户登录，其中包含用户名和密码的文本框以及一个按钮**

**TestDbActivity.java**

```
package com.example.first_db_app;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class TestDbActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_db);

    DatabaseHandler db=new DatabaseHandler(this);

    //CRUD operations

    //inserting the records
    Log.d("Insert: ", "Inserting ..");
    db.addUser(new User("Ashwin","11111"));
    db.addUser(new User("Ravi","22222"));
    db.addUser(new User("Gopal","33333"));
    db.addUser(new User("Satish","44444"));

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.test_db, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:05:35.733

我怀疑创建数据库时出错。中间没有空格

1.  "CREATE TABLE" 和`TABLE_NAME`'s 值
2.  `USER_NAME`的值和“TEXT”
3.  `USER_PWD`的值和“TEXT”

插入新记录似乎很好。

```
String CREATE_USERS_TABLE = String.format("CREATE TABLE %s (%s TEXT, %s TEXT)", TABLE_NAME, USER_NAME, USER_PWD);
db.execSQL(CREATE_USERS_TABLE); 
```

所以要小心你的陈述

# html - 如何在显示 html 内容的浏览器中打开 .sh 文件？

> ID：15686102
> 
> 赞同：1
> 
> 时间：2013-03-28T15:40:02.307
> 
> 标签：html, bash, browser, hybrid

我有一个 bash 脚本，用于无需安装即可下载软件

```
curl get.foo.com | bash 
```

但是`get.foo.com`在浏览器中打开不会显示漂亮的 html 内容。

是否可以创建一个在浏览器中呈现为几乎有效的 HTML 的混合 bash 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:40:02.307

您可以通过以下方式编写 bash 脚本

```
#!/bin/bash
#<html><head><!--

# Your Bash script goes here

<<HTML_CONTENT 
-->
<body style="background-color:white; margin-top:-1em">
    <!-- Your HTML code goes here -->
<!--
HTML_CONTENT
# --></body></html> 
```

这至少在 Chrome 26 和 Firefox 20 下有效，只留下浏览器用户可见的第一条 shebang 行。然而，通过一些 CSS 样式，可以隐藏它。

# authentication - ASP.Net MVC 4 的 SimpleMembership InitializeSimpleMembership 未被调用

> ID：15686108
> 
> 赞同：1
> 
> 时间：2013-03-28T15:40:23.680
> 
> 标签：authentication, asp.net-mvc-4, oauth-2.0, simplemembership

我正在尝试让 SimpleMembership 为我的 ASP.Net MVC 应用程序工作。我所有需要授权的控制器都扩展了一个名为 SecureController 的基类：

```
[Authorize]
[InitializeSimpleMembership]
[HandleException]
public class SecureController : Controller
{
    protected UserProfile CurrentUser;

    protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        var currentuserid = WebSecurity.CurrentUserId;
        var context = new UsersContext();
        CurrentUser = context.UserProfiles.SingleOrDefault(u => u.AuthenticationId == currentuserid);

        if (CurrentUser != null)
        {
            ViewBag.UserName = CurrentUser.Name;
            ViewBag.UserId = CurrentUser.Id;
        }               
    }
} 
```

我得到“在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放在站点根目录的 _AppStart.cshtml 文件中。尝试调用 WebSecurity.CurrentUserId 时出现错误消息。我在 InitializeSimpleMembershipAttribute 的 OnActionExecuting 中设置了断点，但断点从未命中。似乎 InitializeSimpleMembership 被忽略了。

我还在 FilterConfig 中添加了对 InitializeSimpleMembershipAttribute 的调用。FilterConfig.RegisterGlobalFilters 从 Global.asax 被调用，这也没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:45:48.770

`Application_Start()`我直接在 Global.asax.cx中拨打电话

```
protected void Application_Start()
{
    WebSecurity.InitializeDatabaseConnection("MembershipContext", 
        "WebUsers", "Id", "UserName", autoCreateTables: true);

    // Other stuff from the template like AreaRegistration.RegisterAllAreas()
    // etc.
} 
```

这很好用。

您在网上找到的示例倾向于将该调用放在`SimpleMembershipInitializer()`. 在我的整个应用程序的上下文中，这对我不起作用（尽管我不记得到底是什么问题）。

# capistrano - 未调用 capistrano 回调

> ID：15686109
> 
> 赞同：0
> 
> 时间：2013-03-28T15:40:27.497
> 
> 标签：capistrano

几天前刚开始将 capistrano 与 railsless-deploy 一起用于一个简单的 dev->production Wordpress 站点，我真的很喜欢它，但我遇到了一个问题，让回调工作。其他一切都很好，我什至可以直接调用回调引用的任务。我将之前或之后的调用放在哪里似乎都无关紧要—— deploy.rb 的开头、结尾、中间等等。cap 快乐地运行，只是从不在之前或之后调用。我究竟做错了什么？

我的 deploy.rb 在这里：[https](https://gist.github.com/jbfink/5263869) ://gist.github.com/jbfink/5263869 。我在 Vagrant VM 的 rvm 中运行它。我已经在 rvm 中使用 Ruby 2.0 和 1.9.3 进行了尝试，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:22:33.487

放心报告这不仅仅是我：使用任何依赖于 :symlink （或者，显然， :create_symlink ）的钩子似乎都会默默地失败 - [https://github.com/capistrano/capistrano/issues/164](https://github.com/capistrano/capistrano/issues/164)。真是一团糟。

# android - Android 通讯录提供商仅获取包含所有电子邮件的电话联系人

> ID：15686110
> 
> 赞同：22
> 
> 时间：2013-03-28T15:40:28.040
> 
> 标签：android, performance, android-contentprovider, android-contacts, android-contentresolver

我需要获取所有电话联系人及其电子邮件地址和照片 uri：

这就是正在做的事情：

```
private void getContacts() {

        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(Contacts.CONTENT_URI, null, null, null, Contacts.DISPLAY_NAME);

        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {

                // if
                // (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)))
                // > 0) {

                Contact contact = new Contact();

                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

                Uri uri = getContactPhotoUri(Long.parseLong(id));
                // set photoUri
                contact.setContactPhotoUri(uri);

                // set name
                contact.setContactName(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));

                // get the phone number
                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {

                    // set phone munber
                    contact.setContactNumber(pCur.getString(pCur
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                    contacts.add(contact);

                }
                pCur.close();

                // get email and type
                Cursor emailCur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[] { id }, null);
                while (emailCur.moveToNext()) {
                    // This would allow you get several email addresses
                    // if the email addresses were stored in an array

                    // set email
                    contact.setContactEmail(emailCur.getString(emailCur
                            .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)));

                    contacts.add(contact);

                }
                emailCur.close();

            }
        }

        cur.close();
        contactAdapter = new ContactAdapter(this, R.id.contactList, contacts);

        // }

    }

    public Uri getContactPhotoUri(long contactId) {
        Uri photoUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
        photoUri = Uri.withAppendedPath(photoUri, Contacts.Photo.CONTENT_DIRECTORY);
        return photoUri;
    } 
```

我的问题是获取所有联系人，包括 gmail 联系人，我不希望包含 gmail 联系人。而且耗时也很慢。我如何优化这个，我知道它需要时间，因为我使用了很多光标.. 但不知道如何制作一个可以给我姓名电子邮件号码照片 uri 的单个光标......谢谢！

更新的决赛：

```
private void getContacts() {

    ContentResolver cr = getContentResolver();

    Cursor cur = cr.query(Data.CONTENT_URI, new String[] { Data.CONTACT_ID, Data.MIMETYPE, Email.ADDRESS,
            Contacts.DISPLAY_NAME, Phone.NUMBER }, null, null, Contacts.DISPLAY_NAME);

    Contact contact;

    if (cur.getCount() > 0) {

        while (cur.moveToNext()) {

            String id = cur.getString(cur.getColumnIndex(Data.CONTACT_ID));

            String mimeType = cur.getString(cur.getColumnIndex(Data.MIMETYPE));

            if (allContacts.containsKey(id)) {
                // update contact
                contact = allContacts.get(id);
            } else {
                contact = new Contact();
                allContacts.put(id, contact);
                // set photoUri
                contact.setContactPhotoUri(getContactPhotoUri(Long.parseLong(id)));
            }

            if (mimeType.equals(StructuredName.CONTENT_ITEM_TYPE))
                // set name
                contact.setContactName(cur.getString(cur.getColumnIndex(Contacts.DISPLAY_NAME)));

            if (mimeType.equals(Phone.CONTENT_ITEM_TYPE))
                // set phone munber
                contact.setContactNumber(cur.getString(cur.getColumnIndex(Phone.NUMBER)));

            if (mimeType.equals(Email.CONTENT_ITEM_TYPE))
                // set email
                contact.setContactEmail(cur.getString(cur.getColumnIndex(Email.ADDRESS)));

        }
    }

    cur.close();
    // get contacts from hashmap
    contacts.clear();
    contacts.addAll(allContacts.values());

    // remove null contacts
    for (Contact _contact : contacts) {

        if (_contact.getContactName() == null && _contact.getContactNumber() == null
                && _contact.getContactEmail() == null) {
            contacts.remove(_contact);
            break;
        }

    }

    contactAdapter = new ContactAdapter(this, R.id.contactList, contacts);
    contactAdapter.notifyDataSetChanged();

}

public Uri getContactPhotoUri(long contactId) {
    Uri photoUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
    photoUri = Uri.withAppendedPath(photoUri, Contacts.Photo.CONTENT_DIRECTORY);
    return photoUri;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-31T12:57:55.787

您应该能够在 Data.CONTENT_URI 上的一次查询中获得所需的所有信息，查看“android.provider.ContactsContract.Data”表以及有关如何查询不同类型的数据电子邮件、电话、照片等的示例... [http://developer.android.com/reference/android/provider/ContactsContract.Data.html](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)

例如：

```
Cursor data = cntx.getContentResolver().query(Data.CONTENT_URI, new String[] {Data._ID,Data.MIMETYPE,Email.ADDRESS,Photo.PHOTO},Data.CONTACT_ID + "=?" + " AND " + "(" +  Data.MIMETYPE + "='" + Photo.CONTENT_ITEM_TYPE + "' OR " + Data.MIMETYPE + "='" + Email.CONTENT_ITEM_TYPE +"')",
                        new String[] {String.valueOf(contactId)}, null); 
```

应该为您提供有关某个特定联系人 ID 所需的所有信息，理论上您可以要求所有联系人并自己对信息进行排序。

至于过滤 gmail 联系人，这是一个更复杂的问题，请查看 ACCOUNT_NAME / TYPE [http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html](http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html) 参数和关于此问题的讨论： [什么是 Android 联系人应用程序上联系人的默认帐户类型/名称吗？](https://stackoverflow.com/questions/4863653/what-is-the-default-account-type-name-for-contacts-on-android-contact-applicat)

# shell - 如何仅显示几秒钟的图像并关闭它？

> ID：15686115
> 
> 赞同：0
> 
> 时间：2013-03-28T15:40:38.867
> 
> 标签：shell, imagemagick

是否有一行命令可以显示图像，然后将其在屏幕上保持几秒钟然后关闭它？我检查了显示手册，那里没有选项。

我想要类似的东西：

```
display -density 200 -hold 3 myvector.eps 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:06:38.987

这种肮脏的方法怎么样？：

```
display -density 200 -hold 3 myvector.eps &
pid=$!
sleep 10
kill -2 $pid 
```

# sencha-touch-2 - 如何为 Sencha Touch 应用程序创建生产构建/缩小脚本？

> ID：15686125
> 
> 赞同：2
> 
> 时间：2013-03-28T15:40:54.727
> 
> 标签：sencha-touch-2, sencha-cmd

似乎没有关于如何在任何地方的网站上使用 Sencha Cmd 实用程序为 ST2 构建生产模式应用程序的文档。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T16:05:27.477

在 SDK Tools 和 Sencha Cmd 之间构建应用程序的命令没有区别：

要构建您的应用程序进行测试：

```
sencha app build testing 
```

为生产部署构建您的应用程序：

```
sencha app build production 
```

打包您的应用程序以在 App Store 上分发：

```
sencha app build native 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T20:46:00.380

这是建筑文档，但似乎已经过时： [http ://docs.sencha.com/touch/2.2.0/#!/guide/building](http://docs.sencha.com/touch/2.2.0/#!/guide/building)

@Eli 是否仍然需要首先创建 JSB 文件来检查需要哪些类？在 Sencha Doc 中，它说需要并且应该这样做：

```
sencha create jsb -a index.html -p app.jsb3 
```

然后应用程序将从它构建：

```
sencha build -p app.jsb3 -d ./ 
```

有谁知道 JSB 步骤是否必要？我在 Sencha Touch 2.2.0

# arrays - 如何在处理中从 ArrayList 获取布尔值

> ID：15686135
> 
> 赞同：1
> 
> 时间：2013-03-28T15:41:28.327
> 
> 标签：arrays, arraylist, processing

我有一个`ArrayList`“列表”，它包含一个值，true。但是，当我写：

`if (list.get(0)==true)`

我收到错误“不兼容的操作数类型对象和布尔值”。`ArrayList.get()`方法总是返回吗`object`？如果是这样，我怎样才能获得`boolean`价值？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:48:07.540

如果您的列表始终包含布尔值，我建议您将数组列表键入为布尔值

```
List<Boolean> list = ArrayList<Boolean> (); 
```

现在你可以做你想做的事了：

```
if (list.get(0)) 
```

有关信息：

`if (list.get(0)==true)`并且`if (list.get(0))`是相同的。

如果您不能使用泛型，则可以强制转换

```
if((Boolean) list.get(0))
{
    System.out.println("OK");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:46:38.643

是的，ArrayList 存储对象并且它不知道类，除非您使用泛型。

所以你有两个选择：泛型或强制每个“get”。

带铸造：

```
if ( ((Boolean)list.get(0))==true ) { ... } 
```

使用泛型，将列表声明为：

```
List<Boolean> list= new ArrayList<>();
list.add(true);

if (list.get(0)) { // list.get(0)==true is unnecesary
...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T15:48:45.747

您可以尝试创建一个 var 来验证“if”语句是否为真，如下所示：

`for(int i = 0; i < aList.size();i++){ match = aList.get(i).equals("Red"); System.out.print(match); }`

匹配变量将接收此比较的布尔值。

问候，

奥塔康。

# php - 在具有多个对象的字符串上使用 eval

> ID：15686147
> 
> 赞同：1
> 
> 时间：2013-03-28T15:42:15.563
> 
> 标签：php, javascript, dynamic, eval

如何将以下字符串评估为多个对象？目前它只做第一个然后忽略其余部分，忽略 PHP，这是通过 PHP 生成的，这就是我需要评估它的原因，以便我可以将它用作 jQuery 插件的选项。

```
 {
                latLng:['.$result->lat.','.$result->lon.'], 
                options:
                {
                    shadow: 
                    {

                        url: "'.BASE_URL.'css/png/markerBg.png",
                        scaledSize: 
                        {
                            width:40,
                            height:43.5
                        }
                    },
                    icon: 
                    {
                        url: "'.$result->user->profileImage.'",
                        scaledSize: 
                        {
                            width:32,
                            height:32
                        },
                        anchor: 
                        {
                            x: 16,
                            y: 40
                        }

                    }

                }

              },
            {
                latLng:['.$result->lat.','.$result->lon.'], 
                options:
                {
                    shadow: 
                    {

                        url: "'.BASE_URL.'css/png/markerBg.png",
                        scaledSize: 
                        {
                            width:40,
                            height:43.5
                        }
                    },
                    icon: 
                    {
                        url: "'.$result->user->profileImage.'",
                        scaledSize: 
                        {
                            width:32,
                            height:32
                        },
                        anchor: 
                        {
                            x: 16,
                            y: 40
                        }

                    }

                }

              },
            {
                latLng:['.$result->lat.','.$result->lon.'], 
                options:
                {
                    shadow: 
                    {

                        url: "'.BASE_URL.'css/png/markerBg.png",
                        scaledSize: 
                        {
                            width:40,
                            height:43.5
                        }
                    },
                    icon: 
                    {
                        url: "'.$result->user->profileImage.'",
                        scaledSize: 
                        {
                            width:32,
                            height:32
                        },
                        anchor: 
                        {
                            x: 16,
                            y: 40
                        }

                    }

                }

              } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:46:07.783

我会避免做 eval -`JSON.parse()`更安全。由于看起来对象已经用逗号分隔，因此您应该能够将其转换为数组并对其进行解析。例如，

```
var objectArray = JSON.parse('[' + objectString + ']'); 
```

`objectString`您在上面粘贴的内容的价值在 哪里。`objectArray`现在将是一个包含每个对象的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:47:11.040

使用 JSON.parse 会不会更容易？

# opencv - 从图像中提取线条以馈送到 OCR - Tesseract

> ID：15686149
> 
> 赞同：5
> 
> 时间：2013-03-28T15:42:17.300
> 
> 标签：opencv, image-processing, tesseract

我在 15:33 左右观看了来自 pycon [http://youtu.be/B1d9dpqBDVA?t=15m34s](http://youtu.be/B1d9dpqBDVA?t=15m34s)的演讲，演讲者谈到从图像（收据）中提取线条，然后将其馈送到 OCR 引擎，以便文本可以以更好的方式提取。

我有类似的需求，我将图像传递给 OCR 引擎。但是，我不太明白他从图像中提取线条是什么意思。我可以使用哪些开源工具从图像中提取线条？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T04:24:08.220

看看用于检测文本[倾斜角度的技术。](http://felix.abecassis.me/2011/09/opencv-detect-skew-angle/)

![](../Images/13ce6b7ce22cbe91561bd2f6a96aef88.png)

**组是用于隔离图像上的文本的线条**（这是有趣的部分）。

![](../Images/00e4b85c0781968feab345bd2c005476.png)

从这个结果中，您可以轻松检测每行文本**的上限/下限。**文本本身将位于其中。我以前遇到过类似的问题，[代码](https://stackoverflow.com/a/13597206/176769)可能对你有用：

![](../Images/6c1df76c373ce3b3c55aeac2a5113662.png)

从这里您需要做的就是裁剪每对线并将其作为图像提供给 Tesseract。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:31:45.383

直接回答：您使用霍夫变换从图像中提取线条。[您可以在此处](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)找到分析指南。也可以检测到文本行。Karlphillip 的回答也是基于霍夫变换。

![在此处输入图像描述](../Images/750d9a9a689ce4148c9a9390534799da.png) ![在此处输入图像描述](../Images/8b9cf7af048660bd9ec71ad39517cb25.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:46:36.240

我可以告诉你一个简单的技术将图像提供给 OCR.. 只需执行一些操作来获取你图像的 ROI（感兴趣区域），并在二值化后定位图像所在的区域.. 然后你可能会找到轮廓，并且通过保持阈值并设置所需的轮廓区域，您可以将生成的图像提供给 OCR :) .. （抱歉，解释方式不好）

# json - json解组错误

> ID：15686151
> 
> 赞同：15
> 
> 时间：2013-03-28T15:42:22.040
> 
> 标签：json, go

我收到以下错误：

`json.Unmarshal undefined (type interface {} has no field or method Unmarshal)`

试图将 json 字节切片转换为通用 interface{} 类型。我正在阅读文档`encoding/json`，他们举了一个例子来证明这是有效的。是什么赋予了？

```
package main

import (
    "encoding/json"
    "fmt"
    "io/ioutil"
)

func main() {

    var json interface{}
    data, _ := ioutil.ReadFile("testMusic.json")
    json.Unmarshal(data, &json)
    m := json.(map[string]interface{})
    fmt.Printf("%+v", m)

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-28T15:45:05.343

您已经定义了一个局部变量来屏蔽引用 JSON 模块`json`的全局符号。`json`重命名您的局部变量应该允许您的代码工作。

# angularjs - Angular.js 中的条件部分

> ID：15686155
> 
> 赞同：1
> 
> 时间：2013-03-28T15:42:34.387
> 
> 标签：angularjs

角新手在这里。我试图用正确的方法来完成一个基本的模板问题。

我有一个标题，当用户未登录时应显示“单击此处登录”，当用户登录时应显示“Welcome, Dudefellah”（以及相关的设置链接等）。

我编写了一个服务，它能够返回一个 JSON 包，包括登录状态和用户名，但我不知道用什么“角度方式”来表达：“if(auth.loggedin), output partials/header.html ; 否则输出 partials/header_login.html”。

我不清楚这个逻辑是否属于控制器，或者某种“auth”模型，甚至是视图（这不可能是对的，对吧？）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:52:11.063

一旦获取登录状态，在控制器中创建一个范围变量`headerTemplate`并根据登录状态分配模板的名称

```
function MyCtrl($scope, loginService) {
    $scope.auth = loginService.getLoginState();
    $scope.headerTemplate = $scope.auth ? 'partials/header.html' : 'partials/header_login.html';
} 
```

在您的标记中

```
<div ng-include src="headerTemplate"></div> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T16:02:12.337

有一个名为[angular-app](https://github.com/angular-app/angular-app)的示例 Angular 应用程序做得很好。他们有一个安全服务，然后是一个工具栏部分和指令，根据状态显示事物。

[https://github.com/angular-app/angular-app/tree/master/client/src/common/security](https://github.com/angular-app/angular-app/tree/master/client/src/common/security)

从角度应用程序：

**src/common/security/login/toolbar.tpl.html：**

```
<ul class="nav pull-right">
  <li class="divider-vertical"></li>
  <li ng-show="isAuthenticated()">
      <a href="#">{{currentUser.firstName}} {{currentUser.lastName}}</a>
  </li>
  <li ng-show="isAuthenticated()" class="logout">
      <form class="navbar-form">
          <button class="btn logout" ng-click="logout()">Log out</button>
      </form>
  </li>
  <li ng-hide="isAuthenticated()" class="login">
      <form class="navbar-form">
          <button class="btn login" ng-click="login()">Log in</button>
      </form>
  </li>
</ul> 
```

**src/common/security/login/toolbar.js：**

```
angular.module('security.login.toolbar', [])

// The loginToolbar directive is a reusable widget that can show login or logout buttons
// and information the current authenticated user
.directive('loginToolbar', ['security', function(security) {
  var directive = {
    templateUrl: 'security/login/toolbar.tpl.html',
    restrict: 'E',
    replace: true,
    scope: true,
    link: function($scope, $element, $attrs, $controller) {
      $scope.isAuthenticated = security.isAuthenticated;
      $scope.login = security.showLogin;
      $scope.logout = security.logout;
      $scope.$watch(function() {
        return security.currentUser;
      }, function(currentUser) {
        $scope.currentUser = currentUser;
      });
    }
  };
  return directive;
}]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-19T15:17:14.170

您还可以使用[ui-router](https://github.com/angular-ui/ui-router)，它为条件路由和一般的良好基础设施创造了奇迹。您需要定义两种状态：

```
myapp.config(function($stateProvider, $urlRouterProvider){
  ...
  // Now set up the states
  $stateProvider
    .state('login', {
        parent: account,
        url: "/login",
        templateUrl: "partials/header_login.html"
    })

    .state('auth', {
        parent: account,
        url: "/authorized",
        templateUrl: "partials/header.html"
    })

}) 
```

当您从查询中返回时，通过 $state.transitionTo('login') 或 ('auth') 更改状态，路由器将为您加载正确的模板（以及 URL）。一般来说，最好使用一个好的路由器作为您的应用程序的基础，而不是针对每种情况提供临时解决方案。你也可以[在这里阅读一个页面（我写的）](http://lgorithms.blogspot.com/2013/07/angularui-router-as-infrastructure-of.html)

# r - 更改 R 中的调查数据

> ID：15686157
> 
> 赞同：1
> 
> 时间：2013-03-28T15:42:44.487
> 
> 标签：r

我有一组观察性健康调查数据。我想修改源标识符，以便我仍然可以识别多个源，但为了保密，原始 ID 不是跟踪 ID。我很难弄清楚。

这是数据框的基本布局

```
ID  
30

30
30
30
24
24
24 
```

我想创建一个 newID 以便数据如下所示

```
NewID   ID  
1       30   
1       30
1       30
1       30
2       24
2       24
2       24 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:52:18.797

if your data frame is df then this should do it.

```
 df$NewID <- as.numeric(factor(df$ID)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:58:56.233

`rle`在这里很有用：

```
> ID <- rep(c(30,24), c(4,3)) # your data
> ind <- rle(ID)$lengths
> data.frame(ID, newID=rep(c(1,length(ind)), ind ))
  ID newID
1 30     1
2 30     1
3 30     1
4 30     1
5 24     2
6 24     2
7 24     2 
```

`transform`也是另一种选择

```
> transform(ID, newID=rep(c(1,2),   rle(ID)$lengths)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:50:40.043

`cbind(match(ID,unique(ID)),ID)`

# jpa - Eclipselink JPA 乐观锁的一些特例

> ID：15686159
> 
> 赞同：1
> 
> 时间：2013-03-28T15:42:48.080
> 
> 标签：jpa, eclipselink, optimistic-locking

我从 JPA 乐观锁定开始。我需要实现以下场景。

用户提出一些*要求*以供考虑。此请求具有*状态*属性。虽然只是说它有一个状态*'new'*。然后几个服务可以观察这个请求并通过改变它的状态来服务它。（例如，状态可以是*'handling'*、 *'put_back'*、*'finished'*）。因此，我使用乐观锁定来确保当前只有一项服务正在处理该请求。因此，当其他一些服务尝试将请求的状态从“新”变为“处理”时，它会给我`OptimisticLockingException`我会通过类似“请求的当前状态已更改，请刷新您的请求列表”之类的信息通知服务。这听起来很正常。所以这就是两个服务试图同时处理同一个请求的情况。

但我的特殊要求是，在任何时候，用户都可以通过将其状态设置为*'canceled'*来取消请求。所以`OptimisticLockingException`在这种情况下我也可以得到例外。但我不需要它。因此，该请求不会被取消。在这里，我想将状态设置为“已取消”，无论它是否被其他人更改。我想我不应该要求用户再次取消他的请求。

**我的问题是**：如何使用我用于持久性的 EclipseLink 2.4.1 处理这种情况。

*注意：*我是 JPA 中乐观锁定的新手，所以我可能会遗漏一些东西，如果是，请纠正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:38:40.347

我会在你的申请中处理这个。如果您在 cancelRequest() 操作中遇到锁定异常，只需捕获异常并重试事务直到它提交。

您也可以使用 JPQL 更新查询，因为它不检查锁定版本。

# visual-studio-2010 - ADO.Net 实体数据模型设计器：禁用自动布局？

> ID：15686160
> 
> 赞同：5
> 
> 时间：2013-03-28T15:42:51.340
> 
> 标签：visual-studio-2010, ado.net, ado.net-entity-data-model

ADO.Net Entity Data Model Designer (VS2010) 让我发疯了——希望有人处理过这个问题并且知道如何让它停止。

最初将复杂的数据模型组合在一起时，Designer 可以自行确定描述关联的线的位置。然而，最终，为了便于阅读，我自己仔细地放置了这些行。

但是，如果我完成布局，然后决定向现有实体添加一个属性，Designer 会重做我的整个布局，或者至少是通往或来自该实体的每条关联线。

有什么方法可以禁用或绕过这个自动布局功能？

# lisp - 方案：条件“不等于”

> ID：15686162
> 
> 赞同：5
> 
> 时间：2013-03-28T15:43:09.443
> 
> 标签：lisp, scheme, conditional

我想在计划中这样做：

```
if ((car l) != (car (cdr (order l))) do something 
```

特别是我写了这个：

```
((eq? (car l) (car (cdr (order l))) ) 
 (cons (count (car (order l)) (order l)) 
       (count_inorder_occurrences (cdr (order l))))) 
```

但它`(car l)`与`(car (cdr (order l))`平等相比。我只想在错误的情况下做某事`eq?`。在我的示例中如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T15:58:17.590

你可以使用`not`它。

```
(cond
 ((not (eq? (car l) (cadr (order l))))
  (cons (count (car (order l)) (order l))
        (count-inorder-occurrences (cdr (order l))))
 ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:58:29.113

您可以使用`not`否定谓词的值。

例如在`if`声明中：`(if (not (eq? A B)) <EVAL-IF-NOT-EQ> <EVAL-IF-EQ>)`

或者`cond`你可以这样做：

```
(cond ((not (eq? A B))
       <EVAL-IF-NOT-EQ>)
      .
      .
      .
      (else <DEFAULT-VALUE>)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T17:46:48.320

`cond`如果`if`您没有 else 案例列表，您 实际上并不需要。`when`可能是您正在寻找的。这基本上只是一个真实的情况`if`。

```
(when (not (eq? (car l) (cadr (order l))))
   (cons 
      (count (car (order l)) (order l)) 
      (count-inorder-occurrences (cdr (order l)))
   )
) 
```

# vba - 存在通用列标题时如何合并多行数据？

> ID：15686166
> 
> 赞同：0
> 
> 时间：2013-03-28T15:43:15.197
> 
> 标签：vba, excel

我有一个相当大的数据集，需要从 Excel 导出为 CSV 以导入另一个应用程序。它不能有重复的列标题，但此时发生这种情况的实例很多。我需要将这些标题及其各自的数据合并到单个列中并删除重复项。

我正在尝试获取这样的数据：

```
MAKE | MAKE | MAKE | MODEL | MODEL | TRIM |
-------------------------------------------
FORD |      |      |       |       |      |
-------------------------------------------    
     | FIAT |      |       |       |      |
-------------------------------------------
     |      | MINI |       |       |      |
-------------------------------------------
     |      |      | PILOT |       |      |
-------------------------------------------
     |      |      |       | SC400 |      |
-------------------------------------------
     |      |      |       |       | EX   |
------------------------------------------- 
```

并将其变成这样：

```
MAKE | MODEL | TRIM |
---------------------
FORD |       |      |
---------------------    
FIAT |       |      |
---------------------
MINI |       |      |
---------------------
     | PILOT |      |
---------------------
     | SC400 |      |
---------------------
     |       | EX   |
--------------------- 
```

在此先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:48:12.823

您需要将问题分成更小的部分：

1.  读取唯一标题并将它们保存在 Dictionary 对象中（作为您可能希望保存在它们将被保存的列上的值）

2.  您遍历每个单元格获取值并读取列标题。

3.  您将该值写入当前正在迭代的列的新工作表中，但对于列位置，您在字典中查找当前列标题并获取其位置。

编辑：代码测试和调试。效果很好。

注意：此方法假定每行每个重复列只有 1 个值。如果重复列的值超过 1 个，则程序将始终保存最后一个（因为它会覆盖先前的值）。如果您想要一个每列处理多个值的方法，那么您需要为新工作表中的每一列保留一个行号，并在每次在该列中写入数据时将其递增 1。

```
Sub WriteValues()

    'Aassuming your column titles are in row 1
    Dim mainSheet As Worksheet
    Set mainSheet = ActiveSheet

    Dim maxCols As Integer
    Dim maxRows As Double
    maxRows = 0
    maxCols = Cells(1, Columns.Count).End(xlToLeft).Column

    Dim colPositions As Dictionary
    Set colPositions = New Dictionary

    'Iterate throgh row 1 to get all uniue values
    Dim iCol As Integer
    For iCol = 1 To maxCols
        On Error Resume Next
            colPositions.Add Cells(1, iCol).Value, colPositions.Count + 1
        On Error GoTo 0
        'Also record maxRows
        If Cells(rows.Count, iCol).rows.End(xlUp).row > maxRows Then
            maxRows = Cells(rows.Count, iCol).rows.End(xlUp).row
        End If
    Next i

    Dim newSheet As Worksheet
    Set newSheet = Sheets.Add

    Dim col As Integer
    Dim row As Double

    'Write column titles in new sheet
    Dim v As Variant
    iCol = 1
    For Each v In colPositions
        Cells(1, iCol).Value = v
        iCol = iCol + 1
    Next v

    'Main data iterator
             For row = 2 To maxRows
      For col = 1 To maxCols

        Dim cellValue As String
        Dim valueColumn As String

         With mainSheet
            cellValue = .Cells(row, col).Value
            valueColumn = .Cells(1, col).Value
         End With
         If cellValue <> "" Then
            newSheet.Cells(row, colPositions(valueColumn)).Value = cellValue
         End If
        Next col
    Next row
End Sub 
```

# php - 在控制器中使用时如何单独列出行而不是查看

> ID：15686167
> 
> 赞同：1
> 
> 时间：2013-03-28T15:43:15.397
> 
> 标签：php, codeigniter

在视图上，如果我这样发布它可以工作，但我希望每个列单独在这个控制器中。我可以在第一个 foreach 上执行此操作，但在第二个 foreach 上我想在使用时如何执行此操作`$field_name`- 我需要添加什么代码？

```
 <?php foreach($formates as $formate): ?>
    <tr>
        <?php foreach($fields as $field_name => $field_display): ?>
        <td>
            <?php echo $formate->$field_name(HERE i want individualy ?>
        </td>
        <?php endforeach; ?>
    </tr>
    <?php endforeach; ?> 
```

控制器

```
$data['fields'] = array(
    'FID' => 'ID',
    'title' => 'Title',
    'category' => 'Category',
    'dep_id' => 'Department',
    'bf_linkpdf' => 'pdf',
    'bf_linkxls' => 'xls',
    'bf_linkdoc' => 'doc'
); 
```

在视图上我想单独列出它们

```
 <?php foreach($formates as $formate): ?>
<tr>
    <?php foreach($fields as $field_name => $field_display): ?>
    <td>
        <?php echo $formate->$field_name->FID ?>
            <?php echo $formate->$field_name->title ?>
            <?php echo $formate->$field_name->category ?>
            <?php echo $formate->$field_name->dep_id ?>
    </td>
    <?php endforeach; ?>
</tr>
<?php endforeach; ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:55:43.883

在视图中，我添加了以下内容并开始工作。

```
 <?php foreach($formates as $formate): ?>
        <tr>
                <td><?php echo $formate->id; ?></td>
            <td><?php echo $formate->title; ?></td>
            <td><?php echo $formate->category; ?></td>
            <td><?php echo $formate->dep_id; ?></td>
        </tr>
       <?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:16:33.427

我不知道你为什么使用第一个循环`formats`，因为你的数组是字段..你可以这样做

```
<?php foreach($fields as $field): ?>
<td>
    <?php echo $field['FID'] ?>
        <?php echo $field['title'] ?>
        <?php echo $field['category'] ?>
        <?php echo $field['dep_id'] ?>
</td>
<?php endforeach; ?> 
```

或者

每个字段的名称和显示在每个`<tr>`

```
<?php foreach($fields as $field_name => $field_display): ?>
<tr>
 <td>
    <?php echo $field_name ?>
</td>
<td><?php echo $field_display ?></td>
</tr>
<?php endforeach; ?> 
```

# java - apache commons smtp 更改/删除 Message-Id 标头

> ID：15686173
> 
> 赞同：3
> 
> 时间：2013-03-28T15:43:28.087
> 
> 标签：java, smtp, apache-commons, apache-commons-net

我正在使用 apache commons smtp 库使用我的 gmail 帐户发送电子邮件。一切正常，但是 Message-Id 标头已发送，我希望将其删除（未发送）。挖网我在 oracle 文档上找到了一些东西：[http ://www.oracle.com/technetwork/java/faq-135477.html#msgid](http://www.oracle.com/technetwork/java/faq-135477.html#msgid)

```
class MyMessage extends MimeMessage {
    ...

    protected void updateMessageID() throws MessagingException {
    setHeader("Message-ID", "my-message-id");
    }
    ...
} 
```

但是我不知道如何在 apache commons 中实现这一点。

这是我的代码：

```
Email email = new SimpleEmail();
email.setHostName("smtp.googlemail.com");
email.setSmtpPort(465);
email.setAuthenticator(new DefaultAuthenticator("username", "password"));
email.setSSLOnConnect(true);
email.setFrom("user@gmail.com");
email.setSubject("TestMail");
email.setMsg("This is a test mail ... :-)");
email.addTo("foo@bar.com");
email.send(); 
```

基本上我需要类似的东西`email.setMimeMessage(...)`，但没有这样的方法，只有`email.getMimeMessage()`

**更新 - 找到解决方案**

```
public class MyEmail extends SimpleEmail{

    protected MimeMessage createMimeMessage(Session aSession)
    {
        return new MyMessage(aSession);
    }
} 
```

您只需覆盖`createMimeMessage`方法并确保它返回您自己的`MimeMessage`实现（在这种情况下`MyMessage`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-01T13:11:05.743

Email 类有一个Factory 方法来创建自定义的MimeMessage，它可以由派生类实现，例如设置消息ID。

您可以扩展此方法以设置您的消息 ID。下一个代码创建一个带有自定义消息 ID 的 htmlEmail 消息。

```
HtmlEmail email = new HtmlEmail()
                    {
                        protected MimeMessage createMimeMessage(Session aSession)
                        {
                            return new MimeMessage(aSession)
                                    {
                                        protected void updateHeaders () throws MessagingException
                                        {                     
                                            super.updateHeaders ();
                                            super.setHeader ("Message-ID", "my-message-id");
                                        }
                                    };
                        }
                    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:40:01.740

可能的问题是“电子邮件”调用[`saveChanges()`](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMessage.html#saveChanges%28%29)底层代码`MimeMessage`以提交标头，该标头调用该`updateHeaders()`方法，该方法又调用该方法，该方法`updateMessageID()`将插入一个 Message-ID 标头。

为什么不尝试仅使用 java.mail API 发送电子邮件，您可以在其中控制 MimeMessage ？该代码甚至[已经可用](https://stackoverflow.com/questions/3649014/send-email-using-java)

# java - Windows 8 64 位上的浏览器类型 SWT.MOZILLA 出现问题

> ID：15686175
> 
> 赞同：0
> 
> 时间：2013-03-28T15:43:29.773
> 
> 标签：java, swt, mozilla

在花了一天的时间在这里和那里阅读后，我决定寻求帮助，因为我找不到解决问题的方法。

我必须创建一个嵌入了完全支持 HTML5 的浏览器的 java/swt 应用程序。这可以在具有 SWT.NONE 浏览器类型（使用 webkit）的 linux 和 osx 上开箱即用。不幸的是，我在 Windows 上遇到了很多麻烦。

首先让我说我在 Windows 8 64 位上使用 SWT 4.2.x。

为了使 SWT 浏览器与 webkit 一起工作，我必须安装 32 位 JVM 并手动指向它（因为默认 64 位 JVM 上的 -d32 开关表示没有安装 32 位 JVM）。还安装了 Safari。而且我还必须使用 32 位 SWT 库。当我最终运行它时，我发现 Windows 版 Safari 不支持拖放，因为经验丰富并在此处说明：

[http://www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

所以我决定改用Mozilla。根据 Eclipse/SWT 文档，我已经下载并安装了 XULRunner 1.8.0.1。我已将其解压缩到 C:\Program Files (x86)\Mozilla\XULRunner\1.8.0.1\xulrunner 并运行 xulrunner --register-user （以及 --register-global）

最后在我的代码中我添加了

```
System.setProperty("org.eclipse.swt.browser.DefaultType", "mozilla"); 
```

我还设置了一个指向同一个 XULRunner 安装目录的全局环境变量“MOZILLA_FIVE_HOME”。

但是，当我运行我的 java 程序（32 位 JRE，32 位 SWT）时，我得到了

```
Exception in thread "main" org.eclipse.swt.SWTError: No more handles [MOZILLA_FIVE_HOME may not point at an embeddable GRE] 
```

我该如何解决？提前致谢！

**编辑：** 我不是以管理员身份运行命令提示符，并且 xulrunner 没有注册。作为管理员，工作。但是我仍然有麻烦：XULRunner 1.9.x 似乎不支持 HTML5。例如 element.children 不受支持。我设法安装了似乎具有所需支持的 XULRunner 10.0.2。然而，只要我点击我的嵌入式浏览器，应用程序就会崩溃，而不会在 java 输出控制台上打印任何错误......

我需要找到一个解决方案才能在 Windows 上使用 ecent 版本的 mozilla 或最新版本的 webkit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:07:00.570

好的，加载 XURLRunner 10.0.2 有效。崩溃的应用程序是由于我的 js 代码中的堆栈溢出错误造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:48:08.487

我也试图将 XULRunner 嵌入到我的 eclipse 插件中，但没有运气（目前）。我在这里遇到了你的答案。只是想评论说你执行是不合理的

```
xulrunner --register-user 
```

也不

```
xulrunner --register-global 
```

在 XULRunner 10.X 上，因为根据这篇文章 [https://stackoverflow.com/a/7567781/1743693](https://stackoverflow.com/a/7567781/1743693) 已删除对在系统范围内安装 XULRunner 的支持（恕我直言，这是一个很好的步骤）

尝试执行上述命令将导致

> “错误：无法解析 application.ini”

至于我的问题：我一直遇到运行时错误：

> 无法加载库：C:\Users\david\.swt\lib\win32\x86_64\swt-xulrunner-win32-4236.dll C:\Users\david\.swt\lib\win32\x86_64\swt-xulrunner -win32.dll：无法在 AMD 64 位平台上加载 IA 32 位 .dll

我不知道这是从哪里来的。

我正在使用 Windows 8 64 位运行 VirtualBox

如果你能详细说明是什么解决了你的问题 - 我真的很感激。

谢谢。

# java - 分发 Java 应用程序

> ID：15686176
> 
> 赞同：0
> 
> 时间：2013-03-28T15:43:31.743
> 
> 标签：java, software-distribution

我有一个 Java 应用程序，它是在 IDE (NetBeans) (JDK 1.6) 中创建的。该应用程序允许销售人员输入销售信息并让审批者进来批准条目。保存条目。应用程序连接到 Derby DB。

完成此应用程序后，我需要能够将此应用程序分发给用户，以便他们可以轻松访问该应用程序。

用户显然需要能够在不使用 IDE 的情况下运行此应用程序，并且如果可能的话，我想将它与 JRE 一起打包，这样用户就不必下载 JRE（尽管这不是世界末日，如果他们必须下载 JRE）。

随着我们的进行，此应用程序将具有不同的版本，因此它必须是一个可以由非技术专业人员自动更新或轻松更新的过程。

还有一个团队 SharePoint 页面，如果可能的话，我希望能够将其包装在某种类型的 .exe 文件中，然后将该文件加载到 SharePoint 页面中，这将允许团队从页面中获取该 .exe 并运行从那里开始。因此，一旦新版本出来，我们可以在 SharePoint 上用新版本替换旧版本。

有没有办法做到这一点，或者我最好的选择是使用 Java WebStart 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:45:55.330

尽管 Java WebStart 在这里听起来像是一个合理的解决方案（您将要求每个用户都拥有适当的 JRE），但该应用程序*是否*必须在本地分发？你不能在上面放一个网络界面吗？这意味着您将集中运行和管理服务器，并且您不必担心分发应用程序和/或 JRE。

如果您有一个无法嵌入到 Java EE 服务器中的独立应用程序，您可以*在*您的应用程序中嵌入一个 Web 服务器（例如 Jetty），并让该服务器启动必要的网页。

# linux - 使用 ssh 从远程 http 主机传输数百个文件

> ID：15686180
> 
> 赞同：-3
> 
> 时间：2013-03-28T15:43:43.023
> 
> 标签：linux, ssh, file-transfer

我想使用 ssh 从某个网站下载数百个文件到我自己的服务器，远程文件是串联的： 0001.jpg : 0900.jpg

这该怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:47:15.180

scp 接受通配符。

IE：

```
scp user@host:/path/* ./path/to/files/locally/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:51:29.857

如果您只有 HTTP 访问权限，那么我不明白您为什么说要使用 SSH ......

以下是通过 HTTP 执行此操作的方法：

```
curl -f -O http:www.example.com/folder/image[0001-0900].jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:49:04.017

您可以在远程服务器上使用带有您的用户名和密码的 scp。

# java - SwingWorker publish()/process() 的行为类似于 done()

> ID：15686181
> 
> 赞同：1
> 
> 时间：2013-03-28T15:43:43.323
> 
> 标签：java, multithreading, swing, publish, swingworker

实施细节：我正在做一个学校项目，我必须模拟一些队列。应随机生成客户端，客户端选择一个队列（我可以有多个队列）进入，并添加到该队列数据结构中。每个队列都有自己的操作符，可以从它所连接的队列中删除客户端。

问题：客户端生成器在单独的线程中运行。队列图形表示是 JButton 的 ArrayList，显示在 GridLayout 面板上，只有 1 列。当我尝试将客户端（一个 JButton）添加到面板时，我想使用 SwingWorker 的 publish() 发布一个新的 JButton，以添加到列表中。然而，经过一番头疼，以及 System.out.println 弄清楚发生了什么之后，我观察到 process() 方法中的 System.out.println() 仅在 doBackground() 方法完成后才被调用。

代码在这里：

```
 //run method of the ClientGenerator thread
  public void run()
  {

      System.out.println("Into thread Generator");
      SwingWorker<Void,JButton> worker=new SwingWorker<Void, JButton>()
      {
          int sleepTime;
          @Override
          protected Void doInBackground() throws Exception
          {

              while(checkTime())
              {
                  try
                  {
                      sleepTime=minInterval+r.nextInt(maxInterval - minInterval);
                      System.out.println("Sleeping - "+sleepTime+" milis");
                      Thread.sleep(sleepTime);
                      System.out.println("Woke up,"+sleepTime+" milis elapsed");

                  } catch (InterruptedException e)
                  {
                      e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                  }
                  System.out.println("Generating client...");
                  newClient=new Client(clientMinService,clientMaxService,log);
                  System.out.println("Locking lock...");
                  operationsOnTheQueueLock.lock();
                  selectedQueueOperator=selectQueueOperator();
                  System.out.println("Adding new client to queue...");
                  selectedQueueOperator.getQueue().enqueue(newClient);
                  System.out.println("Publishing new JButton...");
                  publish(new JButton("C"+selectedQueueOperator.getClientIndicator()));
                  //}
                  // else
                  //  {
                  //     queueHolder.add(selectedQueueOperator.getQueueClients().get(0);
                  // }

                  System.out.println("Unlocking lock...");
                  operationsOnTheQueueLock.unlock();
                  System.out.println("Lock unlocked! Should enter while again and sleep");

              }
          return null;
          }
          @Override
          public void process(List<JButton> chunks)
          {

                  newClientButton=chunks.get(chunks.size()-1);

                  System.out.println("Process runs.Jbutton index="+newClientButton.getText());
                  newClientButton.setFont(new Font("Arial", Font.PLAIN, 10));
                  newClientButton.setBackground(Color.lightGray);
                  newClientButton.setVisible(true);
                  newClientButton.setEnabled(false);
                  clients=selectedQueueOperator.getQueueClients();
                  clients.add(newClientButton);
                  selectedQueueOperator.setQueueClients(clients);
                  //       if(selectedQueueOperator.getQueueClients().size()>0)
              //   {

                  queueHolder=selectedQueueOperator.getQueueHolder();
                  queueHolder.add(clients.get(clients.size()-1));
                  selectedQueueOperator.setQueueHolder(queueHolder);
          }

           //   return null;  //To change body of implemented methods use File | Settings | File Templates.
      };
      worker.execute();
      try {
          worker.get();
      } catch (InterruptedException e) {
          e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
      } catch (ExecutionException e) {
          e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
      }
  } 
```

输出：

```
Sleeping - 1260 milis
Woke up,1260 milis elapsed
Generating client...
Locking lock...
Adding new client to queue...
Publishing new JButton... ///here I should see "Process runs.Jbutton index=C0"
Unlocking lock...
Lock unlocked! Should enter while again and sleep
Sleeping - 1901 milis
Woke up,1901 milis elapsed
Generating client...
Locking lock...
Adding new client to queue...
Publishing new JButton...///here I should see "Process runs.Jbutton index=C1
Unlocking lock...
Lock unlocked! Should enter while again and sleep
Process runs.Jbutton index=C0  //instead, Process runs only in the end. 
```

这只是一个基本示例，用于 2 次迭代。客户端应该只是不时生成，所以一开始我让线程休眠一段时间。然后我生成客户端对象，然后我想在 process() 方法中生成按钮并将其添加到我的 JPanel 组件中。

最后一部分，显然没有发生。任何想法为什么？关于 SwingWorker，我没有办法尝试...

提前致谢！

稍后编辑：“锁定”定义为：

```
Lock lock = new ReentrantLock(); 
```

并作为参数从管理我的 ClientsGenerator(this) 类的类和从队列中删除客户端的类传递。在对 ArrayList& 显示执行操作时，它用于同步两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:36:16.840

线程的全部意义在于事情不是按顺序执行的。doInBackground() 可以在调用 process() 之前完成（while 循环迭代）。doInBackground() 在摆动工作线程上运行 process() 在 EDT 上运行。

process() 将在 done() 之前运行（因为它也在 EDT 上运行）。

正如另一个答案所指出的：您应该只发布文本，然后在 process() 中创建 JButton。

请注意，通常您从 EDT 启动 SwingWorker，在这种情况下，您不应在 EDT 上调用 get() （这会阻止它）。

简单的例子：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.*;
import javax.swing.*;

public class SwingWorkerTest {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JPanel panel = new JPanel(new GridLayout(0, 1));
                new SwingWorker<Void, String>() {
                    @Override
                    protected Void doInBackground() throws Exception {
                        Random random = new Random();
                        int count = 1;
                        while (count < 100) {
                            publish("Button " + (count++));
                            Thread.sleep(random.nextInt(1000) + 500);
                        }
                        return null;
                    }

                    @Override
                    protected void process(List<String> chunks) {
                        for (String text : chunks) {
                            panel.add(new JButton(new AbstractAction(text) {
                                @Override
                                public void actionPerformed(ActionEvent e) {
                                    panel.remove((JButton) e.getSource());
                                    panel.revalidate();
                                    panel.repaint();
                                }
                            }));
                        }
                        panel.revalidate();
                        panel.repaint();
                    }
                }.execute();

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().add(new JScrollPane(panel));
                frame.setPreferredSize(new Dimension(400, 300));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:55:58.270

您不应在`doInBackground()`. 所有 UI 交互都应该在*Event Dispatch Thread*上。执行此操作`done()`或`process()`在 EDT 上执行。有关Swing 单线程特性的详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

此外，还有一个带有`operationsOnTheQueueLock`锁定的危险游戏。您可能正在锁定线程。请考虑将所有相关代码作为工作示例发布，即[SSCCE](http://sscce.org/)。

请参阅[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)文档，它有一个很好的示例如何使用`publish()`/`process()`方法。

# c# - Telerik Radcombox 自动回发根本没有触发

> ID：15686182
> 
> 赞同：1
> 
> 时间：2013-03-28T15:43:46.883
> 
> 标签：c#, asp.net, telerik, telerik-combobox

有人可以建议...我无法弄清楚为什么一旦我更改 ddl 的索引就不会发生自动回发。

请告诉我我错过了什么？这是标记：

```
<telerik:RadComboBox runat="server" ID="ddl" AutoPostBack="true" 
   DataTextField="name" Width="152" OnSelectedIndexChanged="Bindemail"
   DataValueField="name" DataSourceID="DataSource1" AllowCustomText ="true"
   EmptyMessage="Select user..." HighlightTemplatedItems="true" 
   Filter="Contains" MarkFirstMatch="true"/> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:52:45.540

`AutoPostBack`对我有用，但您可能想尝试的是设置`CausesValidation="false"`，因为默认情况下选择一个值可以触发验证。将其设置为 false 不会导致回发验证。

如果这不起作用，请尝试从标记中删除属性以查看是否存在冲突的设置，这可能会发生。尝试删除`AllowCustomText`并`MarkFirstMatch`查看它是否与此相关，然后过滤器等。只是看看这是否是问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:58:07.747

检查这个

```
protected void Bindemail(object o, Telerik.WebControls.RadComboBoxSelectedIndexChangedEventArgs e) 
```

试试这个示例代码

```
<telerik:RadComboBox ID="RadComboBox1" runat="server" AutoPostBack="false" AllowCustomText="True" OnSelectedIndexChanged="Bindemail"
OnClientSelectedIndexChanged="OnClientSelectedIndexChanged">
<Items>
<telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem1" Value="RadComboBoxItem1">
</telerik:RadComboBoxItem>
</Items>
</telerik:RadComboBox> 
```

Javascript

```
<script type="text/javascript">
function OnClientSelectedIndexChanged(sender, args)
{
__doPostBack('RadComboBox1','');
}
</script> 
```

检查这个样本

[http://www.telerik.com/community/forums/aspnet-ajax/combobox/unusual-postback-with-radcombobox.aspx](http://www.telerik.com/community/forums/aspnet-ajax/combobox/unusual-postback-with-radcombobox.aspx)

# python - Python：在由多列组成的文本文件中搜索特定字符串

> ID：15686185
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:43:49.430
> 
> 标签：python

我有一个以制表符分隔的文本文件（每一列都负责一个特定的组件。）：

```
 1 (who?)        2 (age)        3 (Does what?)        4 )(where lives?)
A    Dog             4                 Walks           Lives in a box
B   Parrot           2                 Eats            Lives in a cage
C   Cat              3                 Sleeps          Lives in a house 
```

用户必须在查找有关动物的所有信息的两个选项之间进行选择。用户可以在第一列或第四列中输入他的猜测：

```
1=Cat* 
```

或者

```
4=Live in a box** 
```

如果有匹配，它会打印整行。

*   在第一种情况下，如果用户决定使用第一列（谁？）来查找有关动物的信息，则会显示：

    ```
    Cat              3                 Sleeps          Lives in a house 
    ```

*   在第二种情况下，如果用户决定使用第四列（生活在哪里？）来查找有关动物的信息，则会显示：

    ```
    Dog             4                 Walks           Lives in a box 
    ```

我需要的是找到一个合适的函数来搜索动物。我尝试使用 search() 和 match() 但无济于事。

```
 **EDIT after codesparkle's advice** 
```

我似乎无法将建议功能集成到我的程序中。我对 line[column-1] 位特别困惑。我试图“玩”这个功能，但我想不出任何有用的东西。所以这是我需要完成的真正代码。

```
while True:
    try:
        OpenFile=raw_input(str("Please enter a file name: ")) 
        infile=open(OpenFile,"r")
        contents=infile.readlines()
        infile.close()

        user_input = raw_input(str("Enter A=<animal> for animal search or B=<where lives?> for place of living search: \n"))

        if user_input.startswith("A="):
            def find_animal(user_input,column):
                return next(("\t".join(line) for line in contents
                             if line[column-1]==user_input),None)
            find_animal(user_input[1:]) 
            print str((find_animal(user_input[1:], "WHO?"))) # I messed up the first time and gave numeric names to the columns. In reality they should have been words that indicate the proper name of the column. In this case it is WHO- the first column which signifies the animal.

        else:
            print "Unknown option!"

    except IOError:
        print "File with this name does not exist!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:33:00.330

假设您的输入看起来像这样（您发布的示例包含空格，而不是制表符）：

```
Dog 4   Walks   Lives in a box
Parrot  2   Eats    Lives in a cage
Cat 3   Sleeps  Lives in a house 
```

您可以采取以下方法：

1.  打开文件并读取行，按制表符拆分它们并删除换行符。

2.  创建一个函数，该函数返回其请求的列包含搜索词的第一行。在此示例中，`None`如果未找到任何内容，则返回。

* * *

```
with open('input.txt') as input_file:
    lines = [line.rstrip().split('\t')
             for line in input_file.readlines()]

def find_animal(search_term, column):
    return next(('\t'.join(line) for line in lines
                 if line[column-1] == search_term), None)

print(find_animal('Cat', 1))
print(find_animal('Lives in a box', 4)) 
```

# java - 如何在java中使用查询结果

> ID：15686186
> 
> 赞同：1
> 
> 时间：2013-03-28T15:43:49.560
> 
> 标签：java

我在 java 中编写了这个查询，它给了我表的列表并将它们保存在数据集合中：

```
sql = "select * FROM information_schema.tables WHERE table_type = 'BASE TABLE'";
ResultSet rs = stmt.executeQuery(sql);
int count_table = 0;
while (rs.next()) {
    table_list.add(rs.getString(3));
    count_table += 1;
}
Table_list = table_list.toString(); 
```

Table_list 是字符串。但是当我想以这种方式在另一个查询中使用这个列表时：

```
sql="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + Table_list[t] + "'"; 
```

给我这个错误：

```
array required, but java.lang.String found 
```

我在 c# 中使用了它并且运行良好：

```
"SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + tablelist[t].Trim() + "'"; 
```

java中的相同方式是什么？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:51:14.630

```
sql="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + Table_list[t] + "'"; 
```

应改为：

```
sql="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + table_list.get(t).trim() + "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:58:59.503

在 Java 中，方括号访问只允许用于普通数组。您使用方括号声明一个数组`String[] stringArray`。在内部，Java 处理`String`.

查看您的代码，您似乎在混淆 a`String`和 a `List<String`(或`ArrayList<String>)`.

为了访问`List`/`ArrayList`元素，您应该使用`get`方法（注意我使用的是`table_list`，而不是`Table_list`）：

```
//wrong
sql="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + table_list[t] + "'";

//right
sql="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + table_list.get(t).trim() + "'"; 
```

请注意，通过这样做，您的代码对 SQL 注入攻击很弱。相反，你应该使用`PreparedStatement`来处理这个：

```
sql = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = ?";
PreparedStatement stmt = con.prepareStatement(sql);
stmt.setString(1, table_list.get(t));
ResultSet rs = stmt.executeQuery(); 
```

另外，**请**更改变量的名称，因为代码阅读`table_list`器`Table_list`很容易混淆（甚至会让您感到困惑）。

# perl - 为什么 Template Toolkit 没有聚合我的计数器？

> ID：15686191
> 
> 赞同：1
> 
> 时间：2013-03-28T15:43:55.527
> 
> 标签：perl, template-toolkit, dancer

我正在开发一个简单的 Dancer 应用程序来记录一个人读过的书，但是在我的模板中显示一个人读过多少本书，我遇到了一个错误。我正在尝试遍历阅读实例表中的每一行，如果读者与列出的人相同，则将 1 添加到计数器。

这是模板的代码：

```
<ul class="people">
<% IF people.size %>
  <% FOREACH id IN people.keys.nsort %>
    <li><h2 style="display: inline;"><% people.$id.name %></h2><br />
    Born <% people.$id.birthday %><br />
    <% FOREACH reader IN readings.keys.nsort %>
      <% count = 0 %>
      <% IF readings.$reader.person_id == people.$id.id %>
        <% count = count + 1 %>
      <% END %>
    <% END %>
    <% count %>
  <% END %>
<% ELSE %>
  <li><em>Unbelievable.  No people here so far</em>
<% END %>
</ul> 
```

但是，当我显示它时，计数仅为 1。有人知道我做错了什么，还是需要更多代码？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:50:19.290

看起来您需要将`count`初始化拉出`FOREACH reader`循环：

```
<% FOREACH id IN people.keys.nsort %>
  <li><h2 style="display: inline;"><% people.$id.name %></h2><br />
  Born <% people.$id.birthday %><br />
  <% count = 0 %>
  <% FOREACH reader IN readings.keys.nsort %>
    <% IF readings.$reader.person_id == people.$id.id %>
      <% count = count + 1 %>
    <% END %>
  <% END %>
  <% count %>
<% END %> 
```

# ruby-on-rails - RSpec 测试抛出错误，ActiveRecord 连接

> ID：15686194
> 
> 赞同：0
> 
> 时间：2013-03-28T15:44:01.620
> 
> 标签：ruby-on-rails, database, activerecord, rspec

我在 Rails 应用程序中做了一件有趣的事情，连接到不同的数据库以读取信息，但不写入信息。为了便于建立这些连接，我编写了模型来处理表格。我有两个类似的课程，所以这里有一个可以说明问题：

```
# call.rb
class Call < ActiveRecord::Base
  # We don't want to change these values in the table, only read them
  attr_reader :uniqueid, :queue, :agent_id, :codes, :code_count

  def self.connect
    establish_connection "ihs"
    self.table_name = 'calls'
  end

  def self.disconnect
    self.connection.close
  end
end 
```

我不希望此连接覆盖到 Rails 应用程序数据库的主连接，这只是暂时的。所以现在，我想测试这些连接是否在我调用这些方法时实际建立和关闭。目前，这是我想到的：

```
# call_spec.rb
describe Call do

  [code omitted]

  describe "#connect" do
    # before { Call.disconnect }

    it "establishes a connection to IHS DB" do
      puts Call.count
      lambda { Call.count }.should raise_error(ActiveRecord::StatementInvalid)
      Call.connect
      lambda { Call.count }.should_not raise_error
    end
  end
end 
```

我已经使用 a 测试了这段代码`begin ... rescue Exception => e; puts e.class; end`来验证抛出的异常类型，它确实是一个 ActiveRecord::StatementInvalid 异常，但是这个测试没有通过。我被抛出的错误如下：

```
Failure/Error: puts Call.count
  ActiveRecord::StatementInvalid:
    PG::Error: ERROR:  relation "calls" does not exist
      [rest omitted] 
```

这是我期望得到的错误，我只是不知道如何调整测试才能通过。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:16:01.347

呼吁

```
puts Call.count 
```

在实际异常之前，在 rspec '捕获'它之前引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:17:26.357

我想知道为什么明确连接和断开连接很重要？在一个我想连接到辅助数据库进行读取的应用程序中，我让所有的 activerecord 类都继承自一个负责连接的基类，如下所示：

```
class IhsActiveRecord < ActiveRecord::Base
  self.abstract_class = true
  establish_connection "#{Rails.env}_ihs"
end 
```

这样您就不会不断地重新连接和断开连接，并且可以将连接逻辑保存在一个地方。实际的连接信息仍然可以放在您的 database.yml 文件中。上面，我每个环境都有一个单独的，你可以调整，只要它与你的 database.yml 匹配。

我还建议在您的规范中使用 expect {} 而不是 lambda。

# c# - WPF：从各种列表添加到数据网格

> ID：15686196
> 
> 赞同：1
> 
> 时间：2013-03-28T15:44:04.443
> 
> 标签：c#, .net, wpf, datagrid, wpfdatagrid

我有各种值列表，我正在通过数据记录应用程序的文本文件读取这些值。我的最终目标是有一个数据网格，每个值都有一个列。这是我正在尝试做的基本概述......

1.) 读入一个文本文件并创建一个新的 dataFile 类 - 该类解析文本文件中的各个列并为每个变量创建浮点列表。

2.) dataFile 类包含返回每个列表的方法

3.) 我想将这些列表添加到我的数据网格中，但我无法找到有关如何执行此操作的信息。

示例：我可以使用以下代码行填充一列...

```
dataGrid1.ItemsSource = runOne.getRPM(); 
```

其中 runOne 是一个 fataFile，getRPM() 返回一个浮点数列表。

当我尝试使用多个列表执行此操作时，例如

```
 dataGrid1.ItemsSource = runOne.getRPM();
 dataGrid1.ItemsSource = runOne.getPower(); 
```

仅填充了 dataGrid 的第一列。我已经为 dataGrid 创建了列，下面是 XAML 代码...

```
<DataGrid AutoGenerateColumns="False" Height="305" HorizontalAlignment="Left"   Margin="153,12,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="454">
        <DataGrid.Columns>
            <DataGridTextColumn Header="RPM" />
            <DataGridTextColumn Header="Flywheel Torque" />
            <DataGridTextColumn Header="TorqM" />
            <DataGridTextColumn Header="TorqS" />
            <DataGridTextColumn Header="Power (HP)" />
            <DataGridTextColumn Header="Flywheel Power" />
            <DataGridTextColumn Header="Temp" />
        </DataGrid.Columns>
    </DataGrid> 
```

有没有办法可以根据单个列表中的项目填充每一列？我写了一个方法来返回所有列表（列表列表），我试图让它工作，但它没有。

非常感谢任何建议/想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:04:10.190

尝试使用一个新类创建并填充一个可观察的集合，其中您将拥有 RPM 和 Power ( `ObservableCollection<RpmPower>`) 的两个属性。之后，您可以将网格绑定到新集合。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;

namespace Test
{
    public class RpmPowerModel : INotifyPropertyChanged
    {
        #region Properties

        public int Rpm
        {
            get { return _rpm; }
            set
            {
                if (_rpm != value)
                {
                    _rpm = value;
                    RaisePropertyChanged("Rpm");
                }
            }
        }

        private int _rpm;

        public int Power
        {
            get { return _power; }
            set
            {
                if (_power != value)
                {
                    _power = value;
                    RaisePropertyChanged("Power");
                }
            }
        }

        private int _power;

        #endregion

        #region Implementation of INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }

        #endregion

        public static List<RpmPowerModel> LoadItems(List<int> rpms, List<int> powers)
        {
            if (rpms == null)
            {
                throw new ArgumentNullException("rpms");
            }

            if (powers == null)
            {
                throw new ArgumentNullException("powers");
            }

            var result = new List<RpmPowerModel>(Math.Max(rpms.Count, powers.Count));

            for (int i = 0; i < Math.Max(rpms.Count, powers.Count); i++)
            {
                var model = new RpmPowerModel
                {
                    Rpm = i < rpms.Count ? rpms[i] : 0,
                    Power = i < powers.Count ? powers[i] : 0
                };

                result.Add(model);
            }

            return result;
        }
    }
} 
```

# xpath - Xpath - 通过匹配两个子节点获取父类

> ID：15686199
> 
> 赞同：8
> 
> 时间：2013-03-28T15:44:12.047
> 
> 标签：xpath

我想使用 xpath 来选择一个链接，其`class="watchListItem"`,`span="icon icon_checked"`和`h3="a test"`. 我可以使用 xpath 来获取匹配的链接和跨度，或者链接和 h3，但不能使用链接、跨度和 h3。

这是我尝试过的：

```
//*[@class = 'watchListItem']/span[@class = 'icon icon_checked']

//*[@class= 'watchListItem']/h3[text()='AA'] 
```

我正在寻找这样的东西：

`//*[@class = 'watchListItem']//*[span[@class = 'icon icon_checked'] and h3[text()='AA']]`

```
<li>
<a class="watchListItem" data-id="thisid1" href="javascript:void(0);">
<span class="icon icon_checked"/>
<h3 class="itemList_heading">a test</h3>
</a>
</li>

<li>
<a class="watchListItem" data-id="thisid2" href="javascript:void(0);">
<span class="icon icon_unchecked"/>
<h3 class="itemList_heading">another test</h3>
</a>
</li>

<li>
<a class="watchListItem" data-id="thisid3" href="javascript:void(0);">
<span class="icon icon_checked"/>
<h3 class="itemList_heading">yet another test</h3>
</a>
</li> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T15:53:52.133

您可以`child::`像这样使用位置路径：

```
//a[@class="watchListItem"
    and child::span[@class="icon icon_checked"]
    and child::h3[text()="another test"]] 
```

这将选择带有 的锚点`data-id="thisid3"`。

# scala - scala中的二维尾递归

> ID：15686200
> 
> 赞同：2
> 
> 时间：2013-03-28T15:44:13.320
> 
> 标签：scala, functional-programming, tail-recursion

我是**Scala**新手，开始学习**尾递归**。我了解到*函数式编程*中的尾递归是命令式编程中迭代（for循环）的对应部分*：*

对列表元素求和的简单 C++ 循环：

```
uint32_t sum = 0;
for (size_t i = 0; i < list.length(); ++i) {
    sum += list[i];
} 
```

Scala递归等价物：

```
def listSum(list: List[Int]): Int = {
  def listSumHelper(list: List[Int], sum: Int): Int = {
    if (list.isEmpty) sum
    else listSumHelper(list.tail, sum + list.head)
  }
  listSumHelper(list, 0)
} 
```

**问题：** 嵌套 for 循环的 scala 递归等价物是什么？

```
uint32_t sum = 0;
for (size_t i = 0; i < list.width(); ++i) {
    for (size_t j = j < list.height(); ++j) {
        sum += list[i][j];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:49:14.833

只需编写一个适用于嵌套列表 ( `List[List[Int]]`) 的相同列表递归方法：

```
def listSum2(list: List[List[Int]]): Int = {
  @tailrec def listSumHelper2(list: List[List[Int]], sum: Int): Int = {
    if (list.isEmpty) sum
    else listSumHelper2(list.tail, sum + listSum(list.head))
  }
  listSumHelper2(list, 0)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:45:46.417

如果您想要完全尾递归，您应该将所有循环移动到参数中。所以（这里没有帮助，只是为了简洁）：

```
def sumsum(xss: List[List[Int]], current: List[Int] = Nil, sum: Int = 0): Int = {
  current match {
    case x :: more => sumsum(xss, more, sum+x)
    case Nil => xss match {
      case xs :: more => sumsum(more, xs, sum)
      case Nil => sum
    }
  }
} 
```

但是你可能不需要它，除非你的循环真的很短；每次迭代只需一个尾递归函数调用另一个。

# cron - Cron 作业不正常时的通知

> ID：15686212
> 
> 赞同：1
> 
> 时间：2013-03-28T15:44:40.840
> 
> 标签：cron, outlook, cpanel

我有一些每天从我的 cPanel 运行的 cron 作业。这意味着 99% 的时间我每天都会收到电子邮件说一切正常 - 备份正常，xml 导入正常等。

但是我需要的是在 cron 的结果不正常时发出通知 - 即不正常。我曾尝试在 Outlook 中制定规则，但无法使其发挥作用。

例如，这是我的一个 crons：

```
30 2 * * * /usr/local/bin/php /home/xx/public_html/administrator/xx/xx/backup.php -profile=1  -description="Backup" 
```

我知道“Bash”有可能，但不知道如何实际使用它。

有人有好主意吗？

输入赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:46:02.933

您可以围绕作业编写包装器，并从 cron 调用包装器。

例子：

```
#!/usr/bin/env ksh

#
# 包装备份脚本。
#
# 将所有输出重定向到日志文件
# 在这种情况下到 /home/xx/public_html/administrator/xx/xx/backup_job.log

#
# 让我们在日志文件中记录作业的开始日期
#
echo "在`/bin/date`开始备份作业" >> /home/xx/public_html/administrator/xx/xx/backup_job.log

#
# 开始备份
#
/home/xx/public_html/administrator/xx/xx/backup.php >> /home/xx/public_html/administrator/xx/xx/backup_job.log

#
# 备份作业应该设置了一个返回值（0 或非零）。
#
# 如果它不为零，那么就有一个错误。让我们发送一封关于它的警告邮件
#
#
如果 [[ $? -ne 0 ]]; 然后
 /bin/邮件管理员 > /var/adm/backup_log

#
# 以 0 值退出。这应该表明这项工作（包装器）工作正常
# 通常这意味着 cron 不必发送邮件。（但是，我们已经小心了
# 如果有错误，我们赢了的警告邮件
#
出口 0

```

# google-apps-script - 通过自动更新将 Google 表单链接到主电子表格和子电子表格

> ID：15686215
> 
> 赞同：2
> 
> 时间：2013-03-28T15:45:00.077
> 
> 标签：google-apps-script, google-sheets, google-forms

我有一个关于工作簿中主/子关系的两部分问题。我有为 excel 和 google 电子表格编写代码的初学者经验，因此任何额外的细节都将不胜感激。

这是我想要实现的目标：

我想制作一个谷歌表格来收集一组数据（可能有 100 人）。提交后更改表单的选项将被启用，因此数据流将非常动态。我已经完成了设置并创建了可以查看所有回复的主电子表格。但是一个电子表格中的信息太多了，我想制作一些子工作簿来简化可查看的数据以满足各种需求。所以这是我的问题：

1）我将如何编写脚本以从具有这些条件的主工作表创建一个子工作表：在运行时创建一个名为“Child 1-Basic Info”的新工作表，删除所有列并左移除那些我明确希望保留（基于单元格值），即“姓名”、“年龄”和“兴趣”。请记住，我最终希望创建多个子工作簿，但基本上每次都做同样的工作。只是不同的列参数，即“Child 2-Education Info”。

2）除此之外，我想确保每次有人从我的表单提交新回复或更新他们已经提交的回复时，这些孩子都会自动更新。本质上，目标是让 master 的任何变化都影响到所有的孩子。还要记住，每次有人提交新表单时，行号都会改变。所以孩子们也需要认识到这种变化并相应地更新。

先谢谢大家了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T01:15:36.640

使用该`QUERY()`功能，您可以拥有将动态更新的辅助工作表，根本不需要使用脚本。[在这里](http://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)查看更多。

这是一个示例，一个包含表单提交数据行的电子表格：

![在此处输入图像描述](../Images/dd6c92d651003ed684d9d3436a5731d3.png)

在同一电子表格的第二张工作表上，单元格 A1 包含一个查询公式，该公式仅选择您要求的列“姓名、年龄和兴趣”。

![在此处输入图像描述](../Images/8ccd9069ad240c363e89eafa02124a1a.png)

每次新的表单提交或更新都会导致重新计算查询，因此它将保持最新状态而无需进一步干预。

# spring-mvc - 带有 Spring MVC 的 Tiles 2 无法解析

> ID：15686216
> 
> 赞同：0
> 
> 时间：2013-03-28T15:45:02.687
> 
> 标签：spring-mvc, tiles2

我正在尝试将 Tiles 2 与 Spring MVC 集成，但我得到的是一个特定的 jsp，而不是 Tiles View。例如，如果 request="about.htm" 那么我得到 about.jsp ，它保存在 /jsp/about.jsp 。就好像视图正在通过 UrlBasedViewResolver 解析一样。我的 Spring-servlet.xml 是

```
<mvc:annotation-driven />
    <context:component-scan base-package="com.spring.controller" />

    <mvc:resources mapping="/resources*" location="resources/"/>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
    </bean>

    <bean id="TilesViewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" />
    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" p:definitions="/WEB-INF/tiles-defs.xml" />

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
        <constructor-arg ref="dataSource"/>
    </bean>

    <bean id="loginDao" class="com.spring.dao.impl.LoginDaoImpl">
        <property name="jdbcTemplate" ref="jdbcTemplate"/>
    </bean> 
```

保存在类下的views.properties 是

```
welcome.(class)=org.springframework.web.servlet.view.tiles2.TilesView
welcome.url=welcome

friends.(class)=org.springframework.web.servlet.view.tiles2.TilesView
friends.url=friends

office.(class)=org.springframework.web.servlet.view.tiles2.TilesView
office.url=office

about.(class)=org.springframework.web.servlet.view.JstlView
about.url=/jsp/about.jsp 
```

瓷砖-defs.xml 是

```
<tiles-definitions>

<definition name="baseLayout" template="/WEB-INF/tiles/baseLayout.jsp">
  <put-attribute name="title"  value="Template"/>
  <put-attribute name="header" value="/WEB-INF/tiles/header.jsp"/>
  <put-attribute name="menu"   value="/WEB-INF/tiles/menu.jsp"/>
  <put-attribute name="body"   value="/WEB-INF/tiles/body.jsp"/>
  <put-attribute name="footer"   value="/WEB-INF/tiles/footer.jsp"/>
</definition>

<definition name="welcome" extends="baseLayout">
  <put-attribute name="title"  value="Welcome"/>
  <put-attribute name="body"   value="/jsp/welcome.jsp"/>      
</definition>

<definition name="friends" extends="baseLayout">
  <put-attribute name="title"  value="Friends"/>
  <put-attribute name="body"   value="/jsp/friends.jsp"/>      
</definition>

<definition name="office" extends="baseLayout">
  <put-attribute name="title"  value="Office"/>
  <put-attribute name="body"   value="/jsp/office.jsp"/>      
</definition>

</tiles-definitions> 
```

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:58:54.047

视图解析器顺序可能有问题，如果您想优先考虑平铺视图解析器，请为视图解析器添加 order 属性

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
    <property name="order" value="2"/>
</bean>
<bean id="TilesViewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" p:order="1"/> 
```

# android - 某些设备中的 Android 自定义相机问题

> ID：15686218
> 
> 赞同：7
> 
> 时间：2013-03-28T15:45:05.327
> 
> 标签：android, performance, android-camera

嗨，我有一个自定义相机，我有点击按钮，当点击它时，它会捕获图像......一切都很好，但在某些设备中，预览正在拉伸，而且预览覆盖了一半的屏幕并闪烁......一些奇怪的不需要影响。如何解决这个问题？

这是我的代码：

相机活动：

```
preview = new Preview(this, (SurfaceView) findViewById(R.id.surfaceView));

preview.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

((FrameLayout) findViewById(R.id.preview)).addView(preview);

preview.setKeepScreenOn(true);

buttonClick = (Button) findViewById(R.id.buttonClick);

buttonClick.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        // camera.setDisplayOrientation(90);
        }
}); 
```

预习班：

```
class Preview extends ViewGroup implements SurfaceHolder.Callback {
    private final String TAG = "Preview";

    SurfaceView mSurfaceView;
    SurfaceHolder mHolder;
    Size mPreviewSize;
    List<Size> mSupportedPreviewSizes;
    Camera mCamera;

    @SuppressWarnings("deprecation")
    Preview(Context context, SurfaceView sv) {
        super(context);

        mSurfaceView = sv;
        // addView(mSurfaceView);

        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void setCamera(Camera camera) {
        mCamera = camera;
        if (mCamera != null) {

            // get Camera parameters
            Camera.Parameters params = mCamera.getParameters();

            mSupportedPreviewSizes = params.getSupportedPreviewSizes();
            requestLayout();

            List<String> focusModes = params.getSupportedFocusModes();
            if (focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
                // set the focus mode
                params.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
                // set Camera parameters
                mCamera.setParameters(params);
            }
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // We purposely disregard child measurements because act as a
        // wrapper to a SurfaceView that centers the camera preview instead
        // of stretching it.
        final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
        final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
        setMeasuredDimension(width, height);

        if (mSupportedPreviewSizes != null) {
            mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed && getChildCount() > 0) {
            final View child = getChildAt(0);

            final int width = r - l;
            final int height = b - t;

            int previewWidth = width;
            int previewHeight = height;
            if (mPreviewSize != null) {
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
            }

            // Center the child SurfaceView within the parent.
            if (width * previewHeight > height * previewWidth) {
                final int scaledChildWidth = previewWidth * height / previewHeight;
                child.layout((width - scaledChildWidth) / 2, 0, (width + scaledChildWidth) / 2, height);
            } else {
                final int scaledChildHeight = previewHeight * width / previewWidth;
                child.layout(0, (height - scaledChildHeight) / 2, width, (height + scaledChildHeight) / 2);
            }
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        try {
            if (mCamera != null) {
                mCamera.setPreviewDisplay(holder);
            }
        } catch (IOException exception) {
            Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        if (mCamera != null) {
            mCamera.stopPreview();
        }
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio = (double) w / h;
        if (sizes == null)
            return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
                continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        if (mCamera != null) {
            Camera.Parameters parameters = mCamera.getParameters();
            parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
            requestLayout();

            mCamera.setParameters(parameters);
            mCamera.startPreview();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:00:01.490

对于此处描述的图像捕获，某些设备上发生了一个已知错误： [https ://code.google.com/p/android/issues/detail?id=1480](https://code.google.com/p/android/issues/detail?id=1480)

不确定您的问题是否相同，但您应该尝试从另一个问题的答案中解释的代码： [https ://stackoverflow.com/a/1932268/2206688](https://stackoverflow.com/a/1932268/2206688)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:58:13.610

McAfee Antivirus 可能是[本案](http://talk.sonymobile.com/thread/47893?start=0&tstart=0)的罪魁祸首。

在这种情况下，卸载它应该可以解决问题。

# perforce - 将 depot 中的文件夹映射到 depot 中的另一个文件夹

> ID：15686219
> 
> 赞同：0
> 
> 时间：2013-03-28T15:45:08.177
> 
> 标签：perforce

我有一个包含外部编译器的 bin 文件夹。这个 bin 文件夹对 3 个项目是通用的。有没有办法将 bin 文件夹指向仓库中的一般 bin 文件夹，这样我就不会复制该文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:44:20.460

我建议像这样的仓库布局：

```
//depot/common/...
//depot/project1/...
//depot/project2/...
//depot/project3/... 
```

在某处检查您的编译器，`//depot/common`并让您的客户映射所需的项目和公共目录。

# cakephp - 将CakePHP中Paginator的'limit'属性值放入配置文件的正确方法是什么

> ID：15686220
> 
> 赞同：1
> 
> 时间：2013-03-28T15:45:12.300
> 
> 标签：cakephp

使用 CakePHP 1.3 我创建了一个带有 FooController 的小应用程序。在这个 FooController 中，我使用 Paginator 将 Foo 的内容传递给它的视图。

在 FooController 类的头部，我自定义了来自 Foo 的数据的准备，如下所示：

```
var $paginate = array(
  'limit' => 100,
  'order' => array('Order.created' => 'desc')); 
```

现在我想将“limit”的值放入配置文件中。

所以我`$config['list_length'] = '500';`在 config 目录中创建了一个文件，我在 bootstrap.php 中加载该文件。效果很好，我可以回显 的值`list_length`，例如在`beforeFilter()`类中。

但我没有让 Paginator 使用该值。

首先我试过：

```
var $paginate = array(
  'limit' => Configure::read('list_length'),
  'order' => array('Order.created' => 'desc')); 
```

但这会因以下 PHP 错误而失败：

```
Parse error: syntax error, unexpected '(', expecting ')' in xyz/app/controllers/foo_controller.php on line 9 
```

然后我尝试了：

```
public function beforeFilter() {
  parent::beforeFilter();

  $paginate['limit'] = Configure::read('list_length');
} 
```

但它仍会使用值“100”而不是“500”。

我想这是一个相当微不足道的问题，实际上是因为我对基本的 PHP 概念不是很精通。在我目前的工作中，我没有太多机会进行一点编程，所以我真的没有练习了。

我非常感谢有关如何执行此操作的任何提示，甚至更多关于我在这里缺少什么概念的提示，因此我可以阅读一些有关它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:51:09.950

你*几乎*是对的；

PHP 在第一个示例中给您错误的原因是无法使用“动态”值设置类属性；从文档中：

*这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，**它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。***

[http://www.php.net/manual/en/language.oop5.properties.php](http://www.php.net/manual/en/language.oop5.properties.php)

如果您需要将属性设置为“动态”值（例如函数的结果），则需要从类“方法”中分配 if

您在第二个示例中尝试执行此操作，但是，应该使用来访问类/对象的属性`$this->nameOfTheProperty`以指示它不是“变量”，而是对象的**“属性”**；

```
public function beforeFilter() {
    parent::beforeFilter();

    $this->paginate['limit'] = Configure::read('list_length');
} 
```

希望这可以帮助

# android - 适用于所有屏幕尺寸的 Android 游戏

> ID：15686221
> 
> 赞同：1
> 
> 时间：2013-03-28T15:45:18.763
> 
> 标签：android, screen-size

我正在尝试为具有约 10 个屏幕的 Android 游戏指定艺术尺寸。我希望游戏能够在 API 8+ 以及除“小”之外的所有尺寸屏幕上运行。

由于我们使用 API 8，我使用旧的“4 个屏幕类别”功能 - 我计划支持

*   正常（480 x 320，最高 640 x 480）
*   大（640 x 480，最高 960 x 720）
*   xlarge（960 x 720，最高 1920 x 1200）

1920x1200 png 文件约为 4.1MB。所以其中 10 个是 41MB，我们几乎突破了 50MB 的应用程序大小限制（Play Store）。

所以三个问题： 1.人们如何支持游戏画面的细节艺术？我是否必须使用平淡无奇的 9 个补丁 pngs 文件作为背景？或者以 960x720 尺寸存储所有艺术作品，并允许 Android 为大屏幕和普通屏幕调整其大小是否可行？这种大小的 10 个背景文件总计约 15 MB，剩下 35 MB 用于其他所有内容。

如果我使用 jpg 而不是 png 会怎样？我会损失多少质量？因为我只会缩小规模，这应该没问题，对吧？10 张 960x720 的 jpg 文件只有 4.3MB。

1.  如果我允许 Android 调整它的大小，我如何支持宽高比与 960x720 的 4:3 不同的屏幕？有没有办法在布局 XML 中指定“使用大文件夹中的可绘制对象，但将其“信箱”到屏幕上，以便最长的尺寸刚好适合”？（对于大于 960x720 的超大屏幕，只需将可绘制对象放在屏幕中间 - 根本不要拉伸它）？

2.  屏幕的 DPI 分辨率根本不考虑这个因素吗？仅当您希望某些东西在不同分辨率屏幕上的大小大致相同时才需要考虑 DPI，例如图标或按钮。正确的？

似乎这**应该是**一个已解决的问题，需要遵循一个众所周知的模式或模板。其他人是如何做到的？每个人都在安装后使用大量下载（想避免）还是使用 9 个补丁背景？

提前感谢您的任何建议。我在这里搜索了几个术语，并查看了大约 25 个过去的答案，但没有找到我要找的东西。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T02:36:02.820

复活死者（线程）：一种做事方式可能是只提供一组位图并自己进行缩放。您可以提供大的位图并按比例缩小，或者提供中间位图并按比例放大（对于大屏幕）和缩小（对于较小的尺寸）。

前者的好处是你的艺术作品在大屏幕上看起来很棒，而且你有更多的未来证明（如果你在代码中提供了这一点）。不利的一面是，在低端设备上解码/加载这些位图时，您可能（并且实际上很可能会）遇到内存不足/超出 VM 错误，即使是在小心操作时也是如此。所以我通常选择第二种方法。

可以通过多种方式进行放大，但一种是以默认大小加载 bmp（使用 getResources().openRawResource(id) 或 BitmapFactory.decodeResource(etc) 或更好地使用 inputstreams 或 [根据一些最好的方法] 使用 FileDescriptor 方法加载/创建）然后通过使用 createScaledBitmap() 创建另一个 bmp 或者如果绘制到画布将其绘制到目标 Rectangle 来缩放它（更好的内存）。对于缩小，您可以使用像 .inScaled 这样的 BitmapOptions，或者再次在画布绘制调用中使用较小的目标 Rect。

这样做比让 Android 使用这些存储桶（hdpi 等）为您扩展并且如果做得好的话使用更少的内存更好并且（对于游戏）更快。

但要小心，因为某些位图加载方法有点错误，并会产生“bmp 对于 VM 来说太大”错误。还要学会正确处理你的 bmp；很多人和谷歌/谷歌人说 Android 会这样做，你不必将 bmps 设置为 null 并 recycle() 它们，但到目前为止我发现你这样做了。另一个警告是设置适当的选项（过滤/抗锯齿等）以防止 bmp 模糊。并注意 BitmapOptions/canvasses/Sur​​faceViews 甚至窗口上的非最佳颜色/格式/dpi 设置。

还有更多，但这应该可以帮助任何人入门。

# jquery - 通过单击带有 cakephp 2.0 的复选框来提交 Ajax 表单

> ID：15686222
> 
> 赞同：1
> 
> 时间：2013-03-28T15:45:19.953
> 
> 标签：jquery, ajax, cakephp

目标：一个表格，每行一个人，和复选框，单击复选框提交表单，现在每个复选框一个表单。

( [http://iufm-web.ujf-grenoble.fr/crip/images/extrait_tableau_dossiers.png](http://iufm-web.ujf-grenoble.fr/crip/images/extrait_tableau_dossiers.png) )

我已经用 cakephp 2.0 解决了这个问题，但是每次提交都会重新加载整个页面（多少行？也许几百行，最大值是另一个问题）

我希望它具有很强的反应性，所以我想使用 ajax 仅重新加载单击的行。

我尝试使用 Js->submit，但它与复选框不兼容。

我想知道每个表单的操作应该使用什么，因为控制器操作会导致页面重新加载或重定向。

编辑：我遵循了 Dave 的建议并在片段视图中（填充表格行）：

```
echo $this->Form->input('recu',array('type'=>'checkbox', 
                     'value'=>true, 
                     'id'=>'recu'.$ilignetot, 
                     'hiddenField'=>true, 
                     'div' =>false, 
                     'label' =>false, 
                      'checked'=>$user['User'['recu'], 
                 ))."\n";   

$this->Js->get('#recu'.$ilignetot)->event('change', 
    $this->Js->request(array(
        'controller'=>'users',
        'action'=>'admin_dossier_recu2'
        ), array(
        'update'=>'#'.$lineid,
        'async' => true,
        'method' => 'post',
        'dataExpression'=>true,
        'data'=> $this->Js->serializeForm(array(
            'isForm' => false,
            'inline' => true
            ))
        ))
    ); 
```

在控制器操作 admin_dossier_recu2 中，我保存表单并返回片段，指定：

```
 $this->layout = 'ajax'; 
```

感谢您的提示，我之前的尝试是错误的。不幸的是，我的解决方案不适用于 IE8，但它适用于 firefox 和 chrome。现在，我会有一个视觉效果，让用户知道数据实际上是保存的，但也许我应该问另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:04:40.527

使用[javascripts`onchange()`事件](http://www.w3schools.com/jsref/event_onchange.asp)并让它调用一个执行所有 ajax 的函数。

您还可以执行一些逻辑来确定在执行 ajax 等操作之前是否选中了所述更改的复选框。

# iphone - 在 iPhone 模拟器中打开 iOS 应用程序？

> ID：15686228
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:45:39.593
> 
> 标签：iphone, ios, simulator

我构建了一个基于 Web 的应用程序，通过 PhoneGap 运行它，它给了我一个 .ipa 文件。现在我想使用 iPhone 模拟器创建屏幕截图。但我想不出任何办法让应用程序进入模拟器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:47:17.683

您必须通过 XCode 将您的 PhoneGap 应用程序部署到模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:48:10.323

你不能。它将是无法读取的ARM代码。看：

[如何将 .ipa 文件安装到我的 iPhone 模拟器](https://stackoverflow.com/questions/517463/how-can-i-install-a-ipa-file-to-my-iphone-simulator)

PhoneGap必须有其他方式在模拟器中运行？

# javascript - 每次调用该变量时，如何在变量内增加一个整数？Javascript

> ID：15686231
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:45:47.813
> 
> 标签：javascript, integer, increment

每次调用该变量时，如何在变量内增加一个整数？Javascript。

```
var a=0;

var t=loadXMLDoc("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+x[a].getElementsByTagName("name")[0].childNodes[0].nodeValue+"&api_key=83e386b0ba08735e3dee9b118478e56d&lang=en").getElementsByTagName("bio");

for (i=0;i<20;i++)
{
document.write("<div><button type='button' onclick='document.getElementById("+i+").innerHTML=t[0].getElementsByTagName(\"summary\")[0].childNodes[1].nodeValue;'>Open Bio</button></div>");
} 
```

我不确定如何增加变量 a。每次在 for 循环中调用变量 t 时，我都需要它增加 1。

当我将所有代码放在 for 循环中时，我会返回 [object node list]，因此不需要此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:05:51.877

如果我正确理解了您的问题，您可以为该属性定义自己的 getter 和 setter。

```
var o = {}
o.__defineSetter__('property', function(value) { this._counter = 0; this._holder = value; })
o.__defineGetter__('property', function() { console.log(this._counter++); return this._holder; }) 
```

每次为 o.property 赋值时，计数器都会被重置

```
o.property = 'Some value' 
```

然后在每次访问该属性时增加。所以，

```
console.log(o.property) 
```

会打印

```
0
Some value 
```

到控制台。如果你再做一次，它会打印

```
1
Some value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:23:44.727

在你的编辑之后，我想我现在可以看到你的问题了。您需要将`loadXMLDoc`语句放入循环中（因为您要加载 20 个不同的 XML 文件），但您不能将每次调用的结果分配给同一个变量`t`- 因为一旦单击按钮，处理程序将评估`t`并只获取最后一个值。

相反，使用数组：

```
var bios = []; // empty array
for (var i=0; i<20; i++) {
    var artist = x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue,
        doc = loadXMLDoc("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+artist+"&api_key=83e386b0ba08735e3dee9b118478e56d&lang=en"),
        bio = doc.getElementsByTagName("bio")[0].getElementsByTagName("summary")[0].childNodes[1].nodeValue;

     bios[i] = bio; // store it in the array

     document.write("<div><button type='button' onclick='document.getElementById("+i+").innerHTML=bios["+i+"];'>Open Bio</button></div>");
} 
```

当然，虽然这会起作用，但它是一堆不好的做法，包括

*   对 DOM 节点/属性的不安全访问。如果 xml 更改其格式，您将在这里遇到很多异常。您现在可能确定这永远不会发生，但是包装`artist`并`bio`在 try-catch 中可能不是一个坏主意。
*   同步~~的 A~~ jax。一个人可以做得比这更好。
*   即使您不需要它们，也可以加载 20 个文档（并且按顺序加载！）。仅在单击相应按钮时才尝试加载它们中的每一个可能是值得的。
*   `document.write`
*   内联属性事件处理程序
*   …甚至通过 JS 创建它们。

# ios - 以编程方式打开 View Controller，而不是使用 Seque

> ID：15686233
> 
> 赞同：12
> 
> 时间：2013-03-28T15:45:49.110
> 
> 标签：ios, objective-c, ios6

我知道这是一个非常简单的问题，但我一无所获。

我有一个故事板，所有视图控制器都使用 segues 打开，这很好，但我想在按下按钮时使用代码打开其中一个。

按下按钮`ViewControllerMonitorMenu`时打开视图控制器的行是什么：`testSliders`

```
- (IBAction)testSliders:(id)sender
{

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T16:28:47.540

我终于明白了。感谢大家的帮助：

```
ViewControllerMonitorMenu *monitorMenuViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewControllerMonitorMenu"];
[self presentViewController:monitorMenuViewController animated:NO completion:nil]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T15:48:07.470

此代码以编程方式创建**对象**，`ViewControllerMonitorMenu`您也可以继续使用它。

```
- (IBAction)testSliders:(id)sender 
    {
       ViewControllerMonitorMenu * object = [[ViewControllerMonitorMenu alloc] init];
        [self presentViewController:object animated:YES completion:nil];

    } 
```

# php - 在 PHP 中使用 DOMDocument 从另一个站点获取 div

> ID：15686237
> 
> 赞同：0
> 
> 时间：2013-03-28T15:46:10.423
> 
> 标签：php, domdocument

我正在尝试从我的另一个站点获取 div。我试过这个，但它不起作用：

```
<?php
$page = file_get_contents('http://lemans.net.pl/wroclaw');

$doc = new DOMDocument();
$doc->loadHTML($page);
$div = $doc->getElementByID('part');
     echo $div->nodeValue;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:28:58.033

我对 DOMDocument 很好奇，所以我做了一些实验。我编写了以下演示程序来说明一些可能对您有所帮助的关键概念：

```
<?php
$page = file_get_contents('http://lemans.net.pl/wroclaw');

$doc = new DOMDocument();
$doc->loadHTML($page);

$doc->validateOnParse = true;

$div = $doc->getElementById('part');

echo "<br>------------------------------------------------------------<br>";
echo $tag = $div->hasChildNodes()?" hasChildNodes":" hasNoChildNodes";
echo "<br>------------------------------------------------------------<br>";
echo $div->tagName;
echo "<br>------------------------------------------------------------<br>";
$elements = $div->getElementsByTagName('*');
echo $elements->length;
echo "<br>------------------------------------------------------------<br>";
foreach ($elements as $node) {
  echo $node->tagName . " - href: " . $node->getAttribute('href') . "<br>";
}
echo "<br>------------------------------------------------------------<br>";
echo htmlspecialchars($doc->saveHTML($div));
echo "<br>------------------------------------------------------------<br>";
echo $doc->saveHTML($div);
echo "<br>------------------------------------------------------------<br>";
?> 
```

您可以在以下位置尝试 PHP Fiddle： http: [//phpfiddle.org/main/code/8hf-nrk](http://phpfiddle.org/main/code/8hf-nrk)（单击运行按钮...）

**一些解释和注释**

(1) 当您加载文档时，您可能会看到一个警告列表，其中一些与未正确编码的特殊字符或使解析器混淆的嵌套标签有关。

(2) 该`validateOnParse`选项似乎没有什么区别，但我把它放在以防万一。

(3) 一旦您从文档中获取节点，存储在 中`$div`，您现在就有了一个可以使用的 DOM 片段。你可以做一些事情，比如得到`tagName`，看看它`hasChildNodes`等等。顺便说一句，`nodeValue`是 NULL 或空，因为 div 中没有内容，只有子元素。

(4) 可以使用`getElementsByTagName`获取所有子节点的列表。请参阅`foreach`列出标记名称和属性之一的循环。

(5) 如果您试图回显`div`及其子内容，请使用`saveHTML`. 您可以通过传递原始代码来查看原始代码，`htmlspecialchars`也可以将 div 直接插入文档流并显示活动链接和徽标图像。

我认为这应该对您有所帮助。祝你好运！

# objective-c - NSMutableSet 输入与输出的顺序不同

> ID：15686243
> 
> 赞同：1
> 
> 时间：2013-03-28T15:46:26.697
> 
> 标签：objective-c, nsmutableset

我已使用以下代码将对象添加到 NSMutableSet 中：

```
_theQuestionsSet = [[NSMutableSet alloc]initWithObjects:@802, @229, @522, @712, @628, @84, @412, @726, @284, @699, @1765, @1754, @1528, @2230, @2005, @1494, @1348, @2132, @2040, @2183, nil];
NSLog(@"%@", _theQuestionsSet); 
```

为什么输出的顺序与插入的顺序不同？

```
2013-03-28 16:41:50.178 xxxxxxxx[4011:c07] {(
412,
1754,
628,
726,
1528,
284,
1348,
84,
2005,
699,
522,
712,
1494,
2132,
2230,
1765,
2040,
802,
2183,
229
)} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:48:24.140

因为没有订。`NSMutableOrderedSet`如果需要，请使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:50:40.077

因为 NSMutableSet 没有顺序。一个数组是有序的；一套不是。（一个有序的集合弥补了差距，但这不是你正在使用的。）

阅读精美的文档：

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)

第一句话是什么？

> NSSet、NSMutableSet 和 NSCountedSet 类声明了到无序对象集合的编程接口。

*无序*。故事结局。

另见我的书：

[http://www.aeth.com/iOSBook/ch10.html#_nsset_and_friends](http://www.apeth.com/iOSBook/ch10.html#_nsset_and_friends)

> 您可以使用该构造遍历（枚举）一个集合`for...in`，尽管顺序当然是未定义的。

*订单未定义*。

（从你原来的问题听起来好像你真正想要的是一个 NSMutableArray 然后你洗牌。我有代码！但这将是一个不同的问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:51:54.327

不维护 NSMutableSet 顺序。使用 NSMutableOrderedSet 或 NSMutableArray 维护顺序

# c++ - GCC 4.7/4.8 作为 Xcode 的 C/C++ 编译器

> ID：15686249
> 
> 赞同：5
> 
> 时间：2013-03-28T15:46:38.177
> 
> 标签：c++, xcode, macos, c++11, g++

我现在正在开发一个 C++ 项目，我希望使用 C++11 功能。在这个项目中，我使用了用于数论内容的库**NTL 。**由于 Xcode 具有自动完成功能，我使用 Xcode 编写代码，并且库 NTL 与标志“-lntl”静态链接。

现在，我希望使用一些 C++11 特性。Xcode 中默认的 Apple 的 LLVM 编译器包括此类支持，但与带有 Xcode 的 LLVM GCC 4.2 编译器不同，使用 NTL 和 iostream 进行编译无法正常工作。

因此，我使用 LLVM GCC 4.2 编译器，但它不包括对 C++11 的支持。因此，我酿造了 gcc48，现在我希望让 Xcode 用 gcc4.8 编译它的代码。

我怎样才能做到这一点？

**--EDIT--**
感谢所有建议从 libc++ 更改为 stdlibc++ (GNU libc++) 的评论，并解决了 NTL 不使用 Clang 编译的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T10:55:38.223

C++ 运行时库有 2 种不同的实现：gcc`libstdc++`和 clang `libc++`，它们彼此不兼容。

将用途从 更改`libc++`为`libstdc++`。

# wxpython - 如何在 wxpython 中按名称查找 boxsizer？

> ID：15686252
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:46:53.693
> 
> 标签：wxpython

我正在尝试将新的 sizer 动态添加到现有的嵌套 sizer 中。我能够使用 GetSizer() 函数获取指向主窗口大小调整器的指针，但我找不到任何可以按名称搜索大小调整器的函数。我还尝试了 GetChildren 函数，它给了我一个指针列表，但我不知道如何按名称识别列表中的嵌套大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:55:49.317

BoxSizer 类没有 name 参数，因此您无法按名称找到 sizer。您可以创建一个字典并将您的 BoxSizers 放在那里：

```
mydict = {"topSizer":topSizer, "othersizer":differentBoxSizer} 
```

或者你可以将 sizer 对象变成类属性：

```
self.mySizer 
```

然后你可以在课堂上的任何地方引用“self.mySizer”。

# c# - Visual Studios 项目中 XML 模式的相对文件路径

> ID：15686253
> 
> 赞同：0
> 
> 时间：2013-03-28T15:46:54.160
> 
> 标签：c#, filepath, relative-path, fileinfo

我在我的 Visual Studio 项目中添加了一个名为**“FaxTemplateXMLSchema.xsd”**的 Xml 架构， 现在我正在尝试引用该架构来进行验证。我有一个函数，它采用模式的文件路径来引用它并进行验证，唯一的问题是我无法确定相对文件路径。完整的文件路径是**“C:\Users\ccoleman\Documents\Visual Studio 2010\Projects\FaxTemplateConverter\FaxTemplateConverter\FaxTemplateXMLSchema.xsd”** 我试图不对其进行硬编码，并希望像这样引用它。 `String schemaFile = "..\\FaxTemplateXMLSchema.xsd";` 如果我使用`Directory.GetCurrentDirectory()`我得到网络驱动器**“N:\** ”并`Path.GetFullPath("FaxTemplateXMLSchema.xsd")`得到我**N:\FaxTemplateXMLSchema.xsd** 编辑：我最终只是在容易更改的资源中添加了字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:55:51.957

如果你想让它部署不可知，就像

Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)

将为您提供您的代码正在执行的文件夹，然后从那里确定您想要的位置。

# php - mysql php通过填充的下拉菜单更新多个条目

> ID：15686254
> 
> 赞同：0
> 
> 时间：2013-03-28T15:46:54.477
> 
> 标签：php, mysql

我在尝试通过 php 填充的下拉菜单更新数据库中的多个条目时遇到问题。这是我页面上的代码，它填充了表格，显示了我数据库中当前的所有条目：

```
$result = mysqli_query($con,"SELECT * FROM Submissions");

echo "<table border='1'>
<tr>
<th>First name</th>
<th>Last name</th>
<th>Email</th>
<th>Title</th>
<th>Text</th>
<th>Public Post OK?</th>
<th>Date/Time Submitted</th>
<th>Approved?</th>
<th>Test Approved</th>
</tr>";

while($row = mysqli_fetch_array($result))

  {

  echo "<tr>";

  echo "<td>" . $row['fname'] . "</td>";

  echo "<td>" . $row['lname'] . "</td>";

  echo "<td>" . $row['email'] . "</td>";

  echo "<td>" . $row['title'] . "</td>";

  echo "<td>" . nl2br($row['text']) . "</td>";

  echo "<td>" . $row['publicpost'] . "</td>";

  echo "<td>" . $row['time'] . "</td>";

  echo "<td><select name=\"approved\"><option value=\"" . $row['approved'] . "\">" .                      $row['approved'] . "</option><option value=\"yes\">Yes</option><option value=\"no\">No     Again</option></select></td>";

  echo "<td>" . $row['approved'] . "</td>";

  echo "</tr>";

  }

echo "</table>";

?>

<br><br>

<form action="update.php" method="post">

<input type="submit" name="SubmitButton" value="Update" class="submit"         style="cursor:pointer;">

    </form>

    <?php

    mysqli_close($con);

?> 
```

这是“update.php”的 php 代码：

```
$approved = $_POST['approved'];

mysqli_query($con,"UPDATE Submissions SET approved = $approved");

$update_query= "UPDATE Submissions SET approved = '$approved'";

if(mysqli_query($con,$update_query)){
echo "updated";}
else {
echo "fail";}
?>

<form action="approvesubmissions.php">

<input type="submit" value="Approve Submissions page">

</form> 
```

目标是能够使用下拉菜单将“已批准”字段从“否”更新为“是”，反之亦然。相反，此查询发生的情况是它正在擦除“已批准”字段中的数据，而不是更新它。我对php有点陌生，我对此进行了研究，但没有提出任何解决方案。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:44:34.847

首先，让我们假设“已批准”是 TINYINT(1) 或其他东西。

您选择的 html 应该更像这样。它将根据 DB 值自动填充。

```
$selected = 'selected="selected"'; // pre-selection attribute
$isApproved = !!$row['approved']; // is this active? (approved is 1 or 0)
echo '<select name="approved">
        <option value="1" ' . ($isApproved ? $selected : '') . '>Yes</option>
        <option value="0" ' . (!$isApproved ? $selected : ''). '>No</option>
      </select>'; 
```

其次，您的表单位于表格的底部，但您想要的输入在表格中。当您提交表单时，没有 $_POST['approved']，因为从技术上讲，它不在表单中。要解决此问题，您需要将开始表单标签放在表格前的顶部。然后，您需要将提交按钮和关闭表单标记放在最后，在您回显表格后。

第三，您的 post.php 页面不应该直接将用户输入带入查询。但是，只需这样做：

```
// Convert input to boolean answer, then int (for the query).
$approved = isset($_POST['approved']) ? (int)!!$_POST['approved'] : 0;
mysqli_query($con,"UPDATE Submissions SET approved = '$approved'"); 
```

当我们讨论这个话题时，这将是进入为您的项目准备好的陈述的好时机。听起来可能很吓人，但它可以使您免于 SQL 注入。

```
// Make the prepared statement
$query = mysqli_prepare("UPDATE Submissions SET approved = ?");
// Safely bind your params
mysqli_stmt_bind_param($query, "i", $approved);
// Run it
mysqli_stmt_execute($query);
// "close" the statement (hint: it's reusable for things like bulk updates, etc)
mysqli_stmt_close($query); 
```

# asp.net - 全页=真；CKEditor 被某些浏览器忽略

> ID：15686255
> 
> 赞同：1
> 
> 时间：2013-03-28T15:46:58.463
> 
> 标签：asp.net, iis-7.5, ckeditor, ckeditor.net

我们在我们的 Intranet 站点上使用[CKEditor](http://ckeditor.com/)（用于 ASP.NET 的 CKEditor 3.6.4），在 ASP.NET 中开发并托管在 IIS 7.5 上

编辑器必须支持完整的 HTML；包括`<html>`和`<body>`标签。

为此，我们已按照文档中的说明在文件中[设置](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.fullPage)`fullPage = true;`属性`config.js`

现在，这在我的开发版本中的所有浏览器（我们需要的 FireFox/Chrome/IE）上都可以正常工作；VS2010带开发服务器。

但是，在 IIS 上运行时，它仅适用于 IE。编辑器会去除 HTML 并包含在`<p>`FireFox 和 Chrome 的标签中。

我尝试禁用`.js`IIS 上文件的缓存，但这没有帮助。

我已经检查了 HTTP 返回，`config.js`它返回一个 HTTP 304；尽管响应内容都在那里，包括`fullPage = true;`设置。

有谁知道如何解决这个问题？澄清一下，FireFox 和 Chrome 下的编辑器似乎忽略了该`fullPage=true;`标志。

# php - SimpleXML 不读取 URL

> ID：15686260
> 
> 赞同：0
> 
> 时间：2013-03-28T15:47:01.100
> 
> 标签：php, url, simplexml

我试图让下面的代码工作。目前它什么都不输出，一个空白页。

```
if($vUrlDetails = simplexml_load_file($vUrl)) {
   // Do something
} 
```

如果我使用`file_get_contents()`并将其保存到文件然后使用`simplexml_load_file()`.

通过使用 URL 加载 XML 文件是否有限制`simplexml_load_file()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:54:24.347

我想你可以试试：

```
<?php
  // http://www.php.net/manual/en/simplexmlelement.construct.php
  $xml = new SimpleXMLElement('http://my.url.com/something.xml', 0, true);
?> 
```

# javascript - Javascript：对象构造函数中的字符串连接

> ID：15686272
> 
> 赞同：0
> 
> 时间：2013-03-28T15:47:17.560
> 
> 标签：javascript, string-concatenation

一直在尝试创建一个始终包含公共字符串的 JavaScript 对象成员。每当我创建一个新对象时，它不是连接字符串，而是用创建时传递的值覆盖它。如果重要（我认为不重要），则字符串包含数字。标准杆示例：

```
function myObj(strToConcat){
    this.combinedString = "Hello " + strToConcat, /* have used + and .concat() without success */
}

var newObj = new myObj("1.2.3");
console.log(newObj.combinedString); /* says "1.2.3", the leading "Hello " is absent */ 
```

似乎无法将其连接起来。

编辑：我很抱歉，错误超出了我认为负责的代码。请无视。我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:50:42.623

You have error in your reference

```
console.log(myObj.combinedString); 
```

should be

```
console.log(newObj.combinedString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:54:01.297

运行你的代码给了我`SyntaxError: Unexpected token }`. `,`将第二行末尾的 a 替换为 a ，`;`我得到“Hello 1.2.3”的预期结果。

# c# - 将 JSON curl 转换为 C#

> ID：15686275
> 
> 赞同：2
> 
> 时间：2013-03-28T15:47:19.427
> 
> 标签：c#, curl, solr, httpwebrequest

我有以下卷曲代码：

```
curl 'localhost:8983/solr/sessions/update?commit=true' -H 'Content-type:application/json' -d '[{"Session_SessionId":"da7007e9-fe7a-4bdf-b9e4-1a55034cf08f","Session_HasComments":{"set":true}}]' 
```

我正在尝试转换为 C#，但每次我都收到一个错误，所以不确定我的代码是否正确......

这是我到目前为止所拥有的：

```
 string path = "http://localhost:8983/solr/sessions/update?commit=true";
        var httpWebRequest = (HttpWebRequest)WebRequest.Create(path);
        httpWebRequest.ContentType = "application/json";
        httpWebRequest.Method = "POST";

        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            string json = "{\"Session_SessionId\":\"" + sessionId + "\"," +
                          "\"" + fieldName + "\":{\"set\":\"" + fieldValue + "\"}}";

            streamWriter.Write(json);
            streamWriter.Flush();
            streamWriter.Close();

            var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
            using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
            {
                var result = streamReader.ReadToEnd();
            }
        } 
```

在这一行似乎总是 error () ：

```
var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse(); 
```

我得到的错误是：

```
The remote server returned an error: (400) Bad Request.","StackTrace":"   at System.Net.HttpWebRequest.GetResponse() 
```

有任何想法吗？提前致谢！

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:54:51.240

也许是您删除了您正在流式传输到请求中的 JSON 内容中的方括号？尝试将 [ ] 添加回数据的开头/结尾。尽管“BadRequest”通常是非常严格的错误，它告诉您您的 HTTP 请求格式错误，但您的服务器实际上也可能在其他情况下返回该代码 - 例如缺少会话 ID - 这可能发生在此处。

注意差异：

```
-d '[{"Session_SessionId":"da70.....
    ^ bracket 
```

和

```
string json = "{\"Session_SessionId\":\"" + sessionId + "\"," + ....
               ^ no bracket 
```

和数据末尾相同。
但是，当然，这只是一个猜测。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:05:07.230

服务器无法理解您的请求。您是否检查了 json 变量的输出。我相信 JSON 字符串没有正确生成。

为什么不使用[JavaScriptSerializer.Serialize](http://msdn.microsoft.com/en-us/library/bb340417.aspx)创建 JSON 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:06:07.977

将更新处理程序与 JSON 对象一起使用需要遵循 [更新 JSON - 更新命令中概述的 JSON 格式](http://wiki.apache.org/solr/UpdateJSON#Update_Commands)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:35:49.120

正如另一位用户所建议的那样，您的 JSON 输出与 CURL 不匹配。尝试以下操作，而不是输入文本。

```
var data = new[]
{
    new
    {
        Session_SessionId = "da7007e9-fe7a-4bdf-b9e4-1a55034cf08f",
        Session_HasComments = new {set = true}
    }
};

var json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(data); 
```

此外，您正在使用`using`关键字写入数据，并尝试在块内处理响应 - 它可能确实有所作为，但可能值得将其移出此块。

最后，您可能需要将数据编码为字节数组。

这是实现上述建议的代码。

```
string path = "http://localhost:8983/solr/sessions/update?commit=true";
var httpWebRequest = (HttpWebRequest)WebRequest.Create(path);
httpWebRequest.ContentType = "application/json";
httpWebRequest.Method = "POST";

var data = new[]
{
    new
    {
        Session_SessionId = "da7007e9-fe7a-4bdf-b9e4-1a55034cf08f",
        Session_HasComments = new {set = true}
    }
};

string json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(data);
byte[] byteData = new System.Text.ASCIIEncoding().GetBytes(json);

httpWebRequest.ContentLength = byteData.Length;
using (Stream stream = httpWebRequest.GetRequestStream())
{
   stream.Write(byteData,0,byteData.Length);
}

HttpWebResponse resp = (HttpWebResponse)httpWebRequest.GetResponse();
string respStr = new StreamReader(resp.GetResponseStream()).ReadToEnd();

Console.WriteLine("Response : " + respStr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T01:49:37.667

只需使用[SolrNet](https://code.google.com/p/solrnet/)。如果您使用 Solr 4+ 执行此操作，则需要下载最新代码并自己构建，但这很容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-28T14:17:55.583

戴夫，它对我有用。

您缺少方括号。只需将相应的行替换为以下内容：

字符串 json = "[{\"Session_SessionId\":\"" + sessionId + "\"," + "\"" + fieldName + "\":{\"set\":\"" + fieldValue + "\ "}}]";

# c# - 无法使用 SSH.NET 库连接到 AIX(Unix) 框 - 错误：值不能为空

> ID：15686276
> 
> 赞同：8
> 
> 时间：2013-03-28T15:47:19.680
> 
> 标签：c#, .net, ssh, putty, aix

我正在尝试连接到**AIX****`SSH.NET`**机器并使用库执行一些命令。以下是代码片段

```
KeyboardInteractiveAuthenticationMethod kauth = new KeyboardInteractiveAuthenticationMethod(username);
PasswordAuthenticationMethod pauth = new PasswordAuthenticationMethod(username, password);

ConnectionInfo connectionInfo = new(ConnectionInfo(servername, 22, username, pauth,kauth);
SshClient sshClient = new SshClient(connectionInfo);
sshClient.Connect();
SshCommand sshCommand = sshClient.RunCommand("mpstat");
Console.WriteLine(sshCommand.Result);
Console.ReadKey(); 
```

当我尝试在线连接时收到以下**异常消息**`sshClient.Connect()`

> {"值不能为空。\r\n参数名称：数据"}

堆栈跟踪是

```
 at Renci.SshNet.KeyboardInteractiveAuthenticationMethod.Authenticate(Session session)
   at Renci.SshNet.ConnectionInfo.Authenticate(Session session)
   at Renci.SshNet.Session.Connect()
   at Renci.SshNet.BaseClient.Connect() 
```

我确信我传递的凭据是有效的，因为我**能够**使用**`PuTTY`**具有相同凭据的客户端登录。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T17:09:39.177

经过一番研究，我找到了解决方案。希望它可以帮助别人。

应使用键盘交互式身份验证，并应使用以下**函数****`AuthenticationPrompt`**覆盖事件

```
void HandleKeyEvent(Object sender, AuthenticationPromptEventArgs e)
{
    foreach (AuthenticationPrompt prompt in e.Prompts)
    {
        if (prompt.Request.IndexOf("Password:", StringComparison.InvariantCultureIgnoreCase) != -1)
        {
            prompt.Response = password;
        }
    }
} 
```

函数调用代码：

```
KeyboardInteractiveAuthenticationMethod kauth = new KeyboardInteractiveAuthenticationMethod(username);
PasswordAuthenticationMethod pauth = new PasswordAuthenticationMethod(username, password);

kauth.AuthenticationPrompt += new EventHandler<AuthenticationPromptEventArgs>(HandleKeyEvent);

ConnectionInfo connectionInfo = new ConnectionInfo(serverName, port, username, pauth, kauth);

sshClient = new SshClient(connectionInfo);
sshClient.Connect(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T11:28:38.803

我已经封装了整个东西，以便更容易使用。警告：尚未实施任何尝试/捕获！DLL 可在此处获得：[https:](https://sshnet.codeplex.com/releases/view/120504) //sshnet.codeplex.com/releases/view/120504 使用 SLES (11.1 64)、Debian (6)、AIX (5.3、6.1、7) 测试

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

using Renci.SshNet;
using Renci.SshNet.Common;

namespace SSH2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            SSH client = new SSH("servername", "username", "password");

            MessageBox.Show(client.command("ls -la /"));
        }

    }

    public class SSH
    {
        string servername;
        int port;
        string username;
        string password;

        SshClient Server = null;

        public SSH(string servername, int port, string username, string password)
        {
            this.servername = servername;
            this.port = port;
            this.username = username;
            this.password = password;

            this.init();
        }

        public SSH(string servername, string username, string password)
        {
            this.servername = servername;
            this.port = 22;
            this.username = username;
            this.password = password;

            this.init();
        }

        private void init()
        {
            KeyboardInteractiveAuthenticationMethod kauth = new KeyboardInteractiveAuthenticationMethod(this.username);
            PasswordAuthenticationMethod pauth = new PasswordAuthenticationMethod(this.username, this.password);

            kauth.AuthenticationPrompt += new EventHandler<AuthenticationPromptEventArgs>(HandleKeyEvent);

            this.Server = new SshClient(new ConnectionInfo(this.servername, this.port, this.username, pauth, kauth));
        }

        void HandleKeyEvent(Object sender, AuthenticationPromptEventArgs e)
        {
            foreach (AuthenticationPrompt prompt in e.Prompts)
            {
                if (prompt.Request.IndexOf("Password:", StringComparison.InvariantCultureIgnoreCase) != -1)
                {
                    prompt.Response = this.password;
                }
            }
        }

        public string command(string cmd)
        {
            this.Server.Connect();

            var output = this.Server.RunCommand(cmd);

            this.Server.Disconnect();

            return output.Result;
        }
    }
} 
```

# c - 在C中将RGB转换为灰度

> ID：15686277
> 
> 赞同：9
> 
> 时间：2013-03-28T15:47:23.353
> 
> 标签：c, equation, graphic

我使用了许多公式将 RGB 转换为灰度，但与 GIMP 相比没有得到好的结果。

我已经测试了以下公式：

```
gray = (int)(0.299 * r + 0.587 * g + 0.144 * b);

gray = (int)(0.299 * r + 0.587 * g + 0.114 * b);

gray = (int)(0.2126 * r + 0.7152 * g + 0.0722 * b);

gray = (int) (0.35*r + 0.50*g + 0.15*b);

gray = ((r * 61) + (g * 174) + (b * 21)) / 256;

gray = (int)((4897 * r + 9617 * g + 1868 * b) >> 14);

gray = r; if(g > gray) gray = g; if(b > gray) gray = b; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:53:11.557

为了正确地将 RGB 转换为灰度，您应该将经过 Gamma 校正的 R、G 和 B 值转换为线性色彩空间，在线性空间中应用转换，然后对结果应用 Gamma 校正。

[sRGB](http://en.wikipedia.org/wiki/SRGB)颜色空间具有仅近似伽马曲线的变换。有关详细信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/SRGB)文章。维基百科也有一个关于 sRGB 到灰度主题的特定[部分。](http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale)

基本上，要将 sRGB 组件转换为线性格式：

```
double sRGB_to_linear(double x) {
    if (x < 0.04045) return x/12.92;
    return pow((x+0.055)/1.055, 2.4);
} 
```

然后，将 sRGB 转换为线性灰度：

```
double R_linear = sRGB_to_linear(R/255.0);
double G_linear = sRGB_to_linear(G/255.0);
double B_linear = sRGB_to_linear(B/255.0);
double gray_linear = 0.2126 * R_linear + 0.7152 * G_linear + 0.0722 * B_linear; 
```

然后，再次应用 sRGB 伽玛校正：

```
double linear_to_sRGB(double y) {
    if (y <= 0.0031308) return 12.92 * y;
    return 1.055 * pow(y, 1/2.4) - 0.055;
} 
```

IE

```
double gray_color = round(linear_to_sRGB(gray_linear) * 255); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:56:32.387

有[一个 GIMP 教程](http://www.gimp.org/tutorials/Color2BW/#grayscale)描述了 GIMP 可以将彩色图像转换为灰度的几种不同方法。一种方法是加权去饱和，就像您已经尝试过的那样，本文提供了一些可用于近似 GIMP 转换的权重。

GIMP 的`gegl`库是其所有图像操作的基础，它有[一个相当精细的将颜色转换为灰度的机制](https://git.gnome.org/browse/gegl/diff/operations/workshop/c2g.c?id=7907ae9a13e3d1fb469b09713746028e27db3704)，它考虑了相邻像素的颜色，并使用了一种迭代方法，似乎模拟了黑色和白色照片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-08T16:40:41.880

[去饱和工具](https://docs.gimp.org/2.8/en/gimp-tool-desaturate.html)的gimp 帮助说明了三个可用公式，对应于名为“亮度”、“亮度”和“平均”的选项。那些将是：

亮度：`0.5 * (max(R,G,B) + min(R,G,B))`

亮度：`(0.21 * R) + (0.72 * G) + (0.07 * B)`

平均：`(R + G + B)/3`

# php - ZF2 从递归 PHP 函数中分离 HTML

> ID：15686279
> 
> 赞同：0
> 
> 时间：2013-03-28T15:47:26.137
> 
> 标签：php, model-view-controller, view, zend-framework2

我正在尝试将 HTML 元素与 Zend Framework 2 中的 PHP 代码分开，但我不知道如何解决这个问题/分开。我目前正在回显那些完成这项工作的 HTML 元素。但是必须有一种方法可以将 HTML 与 PHP 分开，而不是回显 HTML 元素。

目前我做了一个viewhelper，它可以帮助我为其他模块生成这个treeMap，因为这些模块也将使用这个特性，只要这个helper带有一个treeMap。categoryTreeMap 包含类别（Doctrine 2 ORM）对象的树形图。

这是我到目前为止所得到的：

```
namespace Application\View\Helper;

use Zend\View\Helper\AbstractHelper;

class CategoryTreeMapHelper extends AbstractHelper
{
    public function __invoke($categoryTreeMap)
    {
        echo "<ol class=\"sortable\">";
        foreach ($categoryTreeMap as $category) {
            $this->showCategories($category);
        }
        echo "</ol>";
    }

    public function showCategories($category)
    {
        echo "<li><div>" . $category->name . "</div>";
        if (isset($category->childs)) {
            echo "<ol>";
            foreach ($category->childs as $child_category) {
                $this->showCategories($child_category);
            }
            echo "</ol>";
        }
        echo "</li>";
    }
} 
```

通过将 HTML 与 PHP 回显分开来解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:19:56.710

如果您的助手仅由这两种方法组成，您可以通过使用部分助手来复制模板中的功能

为您的树形图容器创建一个部分

```
// view/partial-treemap.phtml
<ol class="sortable">
    <?php foreach ($this->categoryTreeMap as $category) :
        echo $this->partial('partial-category', array('category' => $category));
     endforeach; ?>
</ol> 
```

为递归部分创建一个部分（它为孩子递归地调用自己）

```
// view/partial-category.phtml
<li>
    <div><?php echo $category->name; ?></div>
    <?php if (isset($category->childs)) : ?>
    <ol>
        <?php foreach ($category->childs as $child_category) :
            echo $this->partial('partial-category', array('category' => $child_category));
        endforeach; ?>
    </ol>
    <?php endif; ?>
</li> 
```

然后在您的控制器操作视图中，您只需要一行

```
<?php echo $this->partial('partial-treemap', array('categoryTreeMap' => $categoryTreeMap)); ?> 
```

# jquery - KendoUI - 为 jQuery 使用 $ 以外的东西

> ID：15686280
> 
> 赞同：0
> 
> 时间：2013-03-28T15:47:29.233
> 
> 标签：jquery, kendo-ui

我希望将一些 kendoui 功能集成到现有界面中。问题是，该接口对 jquery 使用 $j 而不是 $。有没有一种简单的方法可以使用 $j 而不是 $ 使 kendoui 工作？

仅仅为此目的存储第二份 kendoui 是不现实的，所以这对我们来说是一个交易破坏者

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:52:10.497

Simply use this snippet of code :

```
window.$j = window.jQuery; 
```

That should do the trick.

**Edit:**

After re-reading your question, seems I was half-off-topic.

I guess what I wrote is what you already did. So just do this once you loaded all your js files :

```
window.kendo.jQuery = window.$j = window.jQuery; 
```

Don't hesitate to comment if something seems odd.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:59:42.303

我认为您应该能够设置`kendo.jQuery`为您选择的 jQuery。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:53:35.333

基本上从全局范围使用中删除 $

```
jQuery.noConflict(); 
```

然后将它分配给这样的新变量

```
$j = jQuery; 
```

更多信息[在这里](http://api.jquery.com/jQuery.noConflict/)。

# macos - 使用 gdb 调试 kext：死锁

> ID：15686287
> 
> 赞同：0
> 
> 时间：2013-03-28T15:47:54.173
> 
> 标签：macos, debugging, gdb, kernel, kernel-extension

我有 I/O Kit 驱动程序：虚拟以太网设备。经过一段时间的工作操作系统挂起，所以看起来我的驱动程序有一些死锁。

我已经完成了接下来的步骤：
- 通过 FireWire 连接两台 macbook
- 设置调试环境
- 初始化 NMI（通过电源按钮）
- 通过 gdb 连接到目标
- 获取我的 kext 的地址
- 创建和加载符号（这是最后一点在我读过的所有文档中）
到目前为止一切都很好。如果发生内核恐慌，这就足够了。**但**在我的情况下，没有内核恐慌，我驻留在处理 NMI 的线程中。

现在的问题是：如何切换到我的 kext 线程？
命令`showalltasks`给了我所有任务的列表，我的 kext 可能正在运行的唯一任务是 kernel_task，所以我试图通过检查这个任务`showtaskthreads`，`showtaskstacks`但找不到任何与我的代码类似的东西。我错过了什么吗？

如有任何建议或文档链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:08:00.020

我没有直接回答你的问题 - 但是否可以用断点击中你的 kext 代码？内核调试的一种常用方法是对机器进行 nmi，附加调试器，在感兴趣的代码中设置断点，恢复执行 ( `continue`)，然后执行所需的任何操作来命中断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T06:23:51.810

好吧，我正在回答我自己的问题。
要使用我的 kext 代码查看线程，我需要使用我的 kext 切换到进程。在我的情况下，它可能是一个浏览器（因为我的 kext 是 NKE）。

但实际上它对我没有多大帮助。但是旧的打印方法帮助我找到了死锁。所以我的建议是下一个：对于内核恐慌 - 使用调试器，对于死锁 - 使用打印，找到锁定的位置并分析代码。

# ios - 企业 iOS 应用云存储

> ID：15686292
> 
> 赞同：0
> 
> 时间：2013-03-28T15:48:03.777
> 
> 标签：ios, objective-c, authentication, cloud, storage

我正在努力思考如何在不要求用户登录的情况下从企业应用程序将文件存储在云中。

背景：我正在开发一个 iOS 应用程序，该应用程序将分发给我们公司的某些员工。到今天为止，我们已经有了一个使用 FTP 服务器上传用户创建文件的应用程序。在这个新应用程序中，我想跳过 FTP 服务器，而是使用某种云存储（DropBox、Google Drive 等）

用户会将一些文件（每天大约 1-2 次上传）上传到云服务，我们总部的人员将能够查看这些文件。

我不想让每个员工都创建一个与“主”帐户相关联的个人云驱动器帐户。相反，我希望这个特定的应用程序始终将其文件上传到云存储“主”帐户。这甚至可能吗？

由于只有我们的员工可以访问该应用程序，我认为安全因素没有限制。发送的信息对我们公司以外的任何人都没有用（没有高安全性的东西）。

是否可以“硬编码”与应用程序始终使用的某个帐户对应的 OAuth 令牌？是否还有其他我不知道的可能性（FTP 或云存储除外）？

任何帮助将不胜感激。

问候，延斯尼尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:55:18.703

使用一个保管箱帐户并将其硬编码到您的应用程序中怎么样？然后您的企业用户可以分别上传他们的文件。当然，您需要采取一些技巧来制作任何具有重复名称的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:20:21.363

我正在开发一个 iOs 应用程序，它使用解析云服务来上传用户生成的文件。

在该解析服务中，用户不需要单独创建帐户。每个用户都可以将文件上传到云，用户可以访问云中由其他用户创建的所有文件。

假设如果我们想限制某些用户文件的可访问性或上传文件的权限，我们也可以通过使用解析来实现。

我只记得 parse 不是开源的。

# javascript - 显示/隐藏变量中的多个 DIV

> ID：15686293
> 
> 赞同：1
> 
> 时间：2013-03-28T15:48:05.107
> 
> 标签：javascript, html, show-hide

我正在使用嵌套的 for 循环来生成包含项目详细信息的表的多个实例；我希望在它下面有一个显示/隐藏按钮，它将对每个项目进行简要描述。

我正在尝试操作在这里找到的代码：[https ://forums.digitalpoint.com/threads/javascript-to-show-hide-tables.1009918/](https://forums.digitalpoint.com/threads/javascript-to-show-hide-tables.1009918/)

以下代码会生成一个在我的页面上不起作用的“显示/隐藏”链接（请参见屏幕截图）。我错过了什么吗？

仅供参考 - 下面代码中的“分离”是一个包含唯一项目引用的数组，以促进每个项目的表的分离。因此，Separate 包含 4 个元素的地方，应该有 4 个项目、4 个表，等等。

非常感谢，卡尔

```
function showhide(id){ 
    if (document.getElementById){ 
            obj = document.getElementById(id); 
            if (obj.style.display == "none"){ 
            obj.style.display = ""; 
        } else { 
            obj.style.display = "none"; 
        } 
    } 
} 

for(i in Separate){
DescID[i] = "DescID"+i;}

var Table = "";

for(i in Separate){
Table += "<table  id='dashboard' summary='Project Dashboard'>";
Table += "<THEAD>";
Table += "<TR><TH scope='col' colspan=4><B>"+ Separate[i] +"</B></TH></TR>";
Table += "<TR><TH scope='col'>Task Names</TH><TH scope='col'>Task Summary</TH><TH scope='col'>RAG</TH><TH scope='col'>Timeline</TH></TR></THEAD>";
Table += "</THEAD>";
Table += "<TBODY>";

    for(j in Project){
    if(Project[j] == Separate[i]){
        Table += "<TR><TD title='" + Comments[j] + "'>"+ Task[j] +"</TD><TD>"+ Summary[j] +"</TD><TD><img src='/images/RAG/" + RAG[j] + "'></TD><TD>"+ DateType[j] +" "+ Status[j].substring(0,10) +"</TD></TR>";
            }
    }

Table += "</TBODY>";
Table += "</table>";
Table += "<a onclick ='javascript:ShowHide('" + DescID[i] + "')' href='javascript:;' >Show/Hide Project Description</a>";
Table += "<div class='mid' id='" + DescID[i] + "' style='DISPLAY: none' >Placeholder for Project Description</div>";
Table += "<BR>";
} 
```

![截屏](../Images/41e7c016d08d2b5f8ae35a02a9d75ee2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:13:04.780

您错过了 HTML 标记“id”（例如，对于您的项目表）应该是唯一的这一事实，否则“getElementById”将不起作用。现在它们都设置为“仪表板”。至少您可以添加索引，并将它们设为“dashboard1”、“dashboard2”等...

此外，IIRC，'display = "none";' 是'display = "inline";'，而不是'display = "";'。尽管这需要在不同的浏览器上进行更多测试才能选择最佳选项。

第三，您在 onclick 事件中的 JavaScript 调用对属性值定义（围绕 JS 调用）和字符串参数（要显示/隐藏的 id）使用单引号......这不是有效的语法，您需要其中之一这两个用例是双引号。

您的代码存在的另一个主要问题是 mikez302 已经发现：“Javascript 函数名称区分大小写。您的函数称为 showhide，但您正在尝试调用 ShowHide。” 更正这两个问题（引号和函数名称）将允许代码工作，我刚刚测试过。:)

# java - 'android/webkit/BrowserFrame' 的 RegisterNatives 失败

> ID：15686298
> 
> 赞同：2
> 
> 时间：2013-03-28T15:48:10.370
> 
> 标签：java, android, logcat, dalvik

从源代码构建 ROM，但停留在一个点上。我已经理解了这个错误，但不知道究竟应该修复什么。ROM卡在启动时，我看到了

```
E/dalvikvm(  353): ERROR: couldn't find native method

E/dalvikvm(  353): Requested: Landroid/webkit/BrowserFrame;.nativeAddJavascriptInterface:(ILjava/lang/Object;Ljava/lang/String;)V

E/dalvikvm(  353): Candidate: Landroid/webkit/BrowserFrame;.nativeAddJavascriptInterface:(ILjava/lang/Object;Ljava/lang/String;Z)V

E/JNIHelp (  353): RegisterNatives failed for 'android/webkit/BrowserFrame', aborting 
```

从错误中，该方法中要求的是，`(ILjava/lang/Object;Ljava/lang/String;)V`但提供的是`(ILjava/lang/Object;Ljava/lang/String;Z)V` 不同之处在于`Z`

谁能想到 BrowserFrame.java 中该方法的解决方案？或任何其他解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:53:07.430

去年年底添加了额外的论点，进行了一对更改：

[https://android.googlesource.com/platform/frameworks/base/+/94740e6c333a109be7516abbd17dd418f23b4f0c](https://android.googlesource.com/platform/frameworks/base/+/94740e6c333a109be7516abbd17dd418f23b4f0c)

[https://android.googlesource.com/platform/external/webkit/+/f2d8c5bed31609d7d6e3ae77f33e90ea7f888eb3](https://android.googlesource.com/platform/external/webkit/+/f2d8c5bed31609d7d6e3ae77f33e90ea7f888eb3)

听起来您从 frameworks/base 进行了更改，但没有从 external/webkit 进行相应的更改。

# testing - 使用沙盒 PayPal 测试多产品购买

> ID：15686302
> 
> 赞同：0
> 
> 时间：2013-03-28T15:48:20.187
> 
> 标签：testing, paypal, paypal-sandbox, eclipse-pdt

我有一个网上商店，我几乎就在那里，但我有许多可供购买的物品，它们是可下载的内容。我修复了，所以当用户付款时，他们会被重定向到我的 pdt.php，在那里他们会收到收据，现在我编写了代码，用于在 item-id 为 == 时也显示内容。现在我想做一个沙盒/测试购买所有可下载内容的产品，它们是 28。我可以创建 28 个按钮并拥有 1-28 的 ID，但这似乎很愚蠢。我怎样才能更容易做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:52:13.950

查看将交易数据发送到 PayPal 的[购物车上传命令](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)方法。它类似于标准按钮，不同之处在于您将在一个表单中包含所有项目。

或者，如果您熟悉 Web 服务 API，我建议您使用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这为您提供了更多结账的自由，并提供了更高级的功能。

# sqlite - 在 Windows Phone 8 中使用 SQLite 时无法使用商店测试工具包

> ID：15686311
> 
> 赞同：3
> 
> 时间：2013-03-28T15:48:44.107
> 
> 标签：sqlite, windows-8, windows-store-apps

我在 Windows phone 8 项目中使用 SQLite.WP80 version=3.7.16。
现在，当我尝试使用商店测试套件进行测试时，它说：

> “应用程序包（XAP）不是最新的，重新编译并重试。将解决方案配置更改为发布和平台到任何 cpu 并重建应用程序”

但是当我使用 sqllite 时，我无法更改为任何 cpu。

谁能告诉可能的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T07:52:08.067

在开发过程中，您应该只针对一个 CPU（取决于您将在哪台机器上进行测试/调试）。当需要发布您的应用程序时，您可以选择多个包，一个用于每个 CPU 架构。然后，Visual Studio 将创建几个包，您可以将它们上传到开发门户。

# postgresql - PostgreSQL：通过 ST_Contains() 将城市添加到点

> ID：15686313
> 
> 赞同：0
> 
> 时间：2013-03-28T15:48:46.937
> 
> 标签：postgresql, postgis

我有一个有 2 列的表：

```
-geom : (Lat/lang pairs in this from) ST_SetSRID(ST_MakePoint(longg,lat),4326)

-city : an empty column 
```

我有一个从一个国家/地区导入的形状文件（作为带有多边形的表格），我想将每个几何点添加到带有`ST_Contains()`.

对于每个几何点，检查每个城市多边形，如果它是内部点，则将城市名称添加到城市列。

**问：**如何制作这种结构（嵌套的 for 循环）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:29:54.653

一个正常的`UPDATE FROM`应该工作。假设表`shp`包含列 city_geom 和 city_name。

```
UPDATE tbl
SET city=s.city_name
FROM shp AS s
WHERE
ST_CONTAINS(s.city_geom,geom); 
```

# python - 为什么在 Python/Numpy 中将“非数字”值转换为布尔值时等于 True？

> ID：15686318
> 
> 赞同：48
> 
> 时间：2013-03-28T15:49:03.613
> 
> 标签：python, math, numpy

当将 NumPy Not-a-Number 值转换为布尔值时，它变为 True，例如如下所示。

```
>>> import numpy as np
>>> bool(np.nan)
True 
```

这与我的直觉预期完全相反。这种行为背后是否有合理的原则？

（我怀疑在 Octave 中可能会出现相同的行为。）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-28T15:55:52.897

这绝不是 NumPy 特有的，但与 Python 处理 NaN 的方式一致：

```
In [1]: bool(float('nan'))
Out[1]: True 
```

规则在[文档](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)中有详细说明。

我认为可以合理地认为 NaN 的真值应该是 False。但是，这不是该语言现在的工作方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T15:54:03.063

Python[真值测试](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)表明考虑了以下值`False`：

> *   任何数字类型的零，例如 0、0L、0.0、0j。

Numpy 可能选择坚持这种行为并阻止 NaN`False`在布尔上下文中评估 to。但是请注意，您可以使用它[`numpy.isnan`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.isnan.html)来测试 NaN。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T15:51:17.137

`0.0`是唯一虚假的浮点值，因为这是语言设计者认为最有用的值。Numpy 只是跟随。`bool(np.nan)`（如果是`False`when `bool(float('nan'))`is会很奇怪`True`）。

我认为这可能是因为这就是整数的工作方式。诚然，整数没有 NaN 或 inf 类型的值，但我认为特殊情况还不足以打破规则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T15:55:39.367

Numpy 在此处遵循[python 标准进行真值测试](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)，任何数字类型的计算结果为`False`当且仅当其数值为零时。

请注意，使用`NaN`值进行真值测试在其他方面也可能不直观（例如，`nan == nan`评估为`False`）。

# android - 通过 ACTION_MAIN 启动 Activity 时出现 ActivityNotFoundException

> ID：15686326
> 
> 赞同：1
> 
> 时间：2013-03-28T15:49:15.830
> 
> 标签：android, android-activity, activitynotfoundexception

我正在尝试使用 ACTION_MAIN 从另一个活动开始一个活动。我这样做是因为我想为其他应用程序提供启动此辅助活动的可能性。所以在我的清单中，我有两个主要活动：

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="main.package"
    android:versionCode="34"
    android:versionName="3.04"
     android:installLocation="preferExternal"
     >

....
    <activity
            android:name=".SplashActivity"
            android:label="@string/app_name" 
             android:icon="@drawable/myicon"
            >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

     <activity
            android:name="main.package.secondary.SecondaryActivity"
            android:label="@string/memorapp"
            android:theme="@style/Theme.Sherlock.Light"
               android:taskAffinity="main.package.secondary.SecondaryActivity"
             >
             <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity> 
```

在我的主要活动中，我运行以下代码：

```
Intent intent = new Intent(Intent.ACTION_MAIN);

   ComponentName cn = new ComponentName("main.package.secondary","main.package.secondary.SecondaryActivity");
   intent.setComponent(cn);                                         
   startActivity(intent); 
```

这是logcat：

```
03-28 16:35:41.987: E/AndroidRuntime(9921): FATAL EXCEPTION: main
03-28 16:35:41.987: E/AndroidRuntime(9921): android.content.ActivityNotFoundException: Unable to find explicit activity class {main.package.secondary/main.package.secondary.secondaryMainActivity}; have you declared this activity in your AndroidManifest.xml?
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.app.Activity.startActivityForResult(Activity.java:2827)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:674)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.app.Activity.startActivity(Activity.java:2933)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at main.package.MainActivity.onMenufrag(MainActivity.java:206)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at main.package.MenuFragment.sendBodyTextToActivity(MenuFragment.java:92)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at main.package.MenuFragment.access$0(MenuFragment.java:90)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at main.package.MenuFragment$1.onClick(MenuFragment.java:66)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.view.View.performClick(View.java:2501)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.view.View$PerformClick.run(View.java:9107)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.os.Handler.handleCallback(Handler.java:587)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.os.Looper.loop(Looper.java:130)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at android.app.ActivityThread.main(ActivityThread.java:3835)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at java.lang.reflect.Method.invoke(Method.java:507)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
03-28 16:35:41.987: E/AndroidRuntime(9921):     at dalvik.system.NativeStart.main(Native Method) 
```

你能告诉我为什么找不到我的 Activity 或者我应该怎么做才能启动我的 SecondaryActivity

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:56:24.290

你能试试这个吗？

```
Intent intent = new Intent(Intent.ACTION_MAIN);

ComponentName cn = new ComponentName("main.package","main.package.secondary.SecondaryActivity");
intent.setComponent(cn);
startActivity(intent); 
```

第一个参数采用“应用程序包名称”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:53:12.160

尝试将以下意图过滤器设置为您的第二个活动：

```
<intent-filter>
    <action android:name="main.package.secondary.SecondaryActivity" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:20:24.307

放入 manifest.xml：

```
<activity android:name="main.package.secondary.SecondaryActivity" android:label="@string/memorapp" android:theme="@style/Theme.Sherlock.Light" android:taskAffinity="main.package.secondary.SecondaryActivity">  </activity> 
```

没有意图过滤器属性。

# android - How to make notification like phone app

> ID：15686340
> 
> 赞同：2
> 
> 时间：2013-03-28T15:50:04.240
> 
> 标签：android

In samsung galaxy tab 2 when phone app goes to background, we can interact with phone app from notification. it has all the buttons and information that we need. ![enter image description here](../Images/ba5029fc2008d6b47a4da5afa52a34d4.png)

How can i implement notification like this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:01:00.520

首先，您可以`Notification`在正在运行`Honeycomb`或更高版本的设备上添加功能按钮。是的，一些前置`Honeycomb`设备具有这种类型`Notifications`，但只有设备制造商能够构建这种类型`Notifications`（`Dialer`或的示例`Music Player`）。

要使用这样的通知，您可以使用 a `customView`for your `Notification`(看看[`RemoteViews`](http://developer.android.com/reference/android/widget/RemoteViews.html))。

一种更简单的方法（和推荐的方法）是使用[`NotificationCompat.Builder`](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)和使用该`addAction`方法，当单击该按钮时，它将向您添加一个按钮`Notification`并执行`PendingIntent`您指定的按钮。这也适用于预装`Honeycomb`设备，这意味着在旧设备上不会显示该按钮。

**编辑：**您可以参考 Vogella 的这篇精彩教程：[Android 通知](http://www.vogella.com/articles/AndroidNotifications/article.html)。

# java - 将 Json 格式字符串与另一个字符串进行比较

> ID：15686344
> 
> 赞同：0
> 
> 时间：2013-03-28T15:50:08.417
> 
> 标签：java, string

我有两个字符串，一个是 JSON 字符串（即我创建了一个 json obj 并使用 obj.tostring() 将其转换为字符串并将其传递给另一个类）和一个普通字符串，其字符没有单词或含义，例如“abcdefg” .

下面是 json 格式字符串 s1：

```
{"email_prompted":"n","error":"o","pin":"c","antiphishing_prompted":"n","antiphishing":"n"} 
```

另一个字符串是 s2: "EoPnAn"

在字符串 s2 中，字符 E 代表错误 P 代表 pin，A 代表反钓鱼。

现在我想比较 s1 "o" 中的错误值是否等于 s2 中的第二个字符。也就是说，我想用 s2 的第二个、第四个和第六个字符检查错误、pin 和反钓鱼的值。

如果这三个都相等，我想打印“ok”。

我不是要求你给我写代码，而是给我一个关于如何去做的提示。但是，如果您提供代码或示例，我们将不胜感激。

以下是我想要的过度简化。抱歉我的代码过于简单，但这会起作用吗？

String s1="{"email_prompted":"n","error":"o","pin":"c","antiphishing_prompted":"n","antiphishing":"n"}" ;

字符串 s2="EoPnAn";

char[] p1 = s1.toCharArray();

char[] p2 = s2.toCharArray();

if(p1[31]==p2[1] && p1[41]==p2[3]&&p1[88]==p2[5]){

```
System.out.println("OK"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:14:53.890

在给出的示例中，结果不是“ok”（pin 是“c”，而不是“n”）：

```
 String s1 = "{\"email_prompted\":\"n\",\"error\":\"o\",\"pin\":\"c\",\"antiphishing_prompted\":\"n\",\"antiphishing\":\"n\"}";

    String s2 = "EoPnAn";

    String[] s1Parts = s1.replaceAll("[\\{}\"]", "").split("[,:]");
    boolean equal = s2.substring(1, 2).equals(s1Parts[3]) /* error */
            && s2.substring(3, 4).equals(s1Parts[5]) /* pin */
            && s2.substring(5, 6).equals(s1Parts[9]); /* antiphishing */
    if(equal) {
        System.out.println("ok");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:08:21.063

[您可以使用可用的 java 库（如Jackson](http://jackson.codehaus.org/)或[GS​​ON](https://code.google.com/p/google-gson/)）创建 json 字符串的键值映射，即 s1

解析 s2 并与上图中的值进行比较

# apache-pig - how to assign a sequentially increasing number to a relation

> ID：15686345
> 
> 赞同：0
> 
> 时间：2013-03-28T15:50:08.727
> 
> 标签：apache-pig

I am wondering if there is a way to create a new field in a relation and then assign some sequentially increasing number to it? Here is one example:

```
ordered_products = ORDER products BY price ASC;
ordered_products_with_sequential_id = FOREACH ordered_products GENERATE price, some_sequential_id; 
```

How can I create some_sequential_id? I am not sure whether that's doable in Pig though.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:25:41.903

我怀疑您必须编写自己的 UDF 才能运行。一种方法是在实现`AtomicInteger`中增加 UDF 中的静态变量 ( ) `exec`。

```
public class IncrEval extends EvalFunc<Long> {

    final static AtomicLong res = new AtomicLong(0);

    @Override
    public Long exec (Tuple tip) throws IOException {
        if (tip == null || tip.size() == 0) {
            return null;
        }

        res.incrementAndGet();
        return res.longValue();
    }
} 
```

猪脚本条目：
`b = FOREACH a GENERATE <something>, com.eval.IncrEval() AS ID:long;`

# haskell - Haskell 冒泡排序在三部分元组上

> ID：15686347
> 
> 赞同：1
> 
> 时间：2013-03-28T15:50:19.197
> 
> 标签：haskell, bubble-sort

我正在尝试实现冒泡排序来按优先级对列表进行排序。例如，列表具有以下格式，第 3 个元素为优先级：

```
 [("Ted", 100, 3), ("Boris", 100, 1), ("Sam", 100, 2)] 
```

我已经尝试了下面的标准冒泡排序方法，但是这不起作用。任何建议，将不胜感激。

```
bubbleSort :: (Ord t) => [t] -> [t]
bubbleSort a = loop (length a) bubble a

bubble :: (Ord t) => [t] -> [t] 
bubble (a:b:c) | a < b = a : bubble (b:c)
           | otherwise = b : bubble (a:c)
bubble (a:[]) = [a] 
bubble [] = []

loop :: (Num a, Ord a) => a -> (t -> t) -> t -> t
loop num f x | num > 0 =  loop (num-1) f x'
         | otherwise = x
         where x' = f x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:20:50.710

正如 luqui 所暗示的，通常不`Ord`直接实现排序算法的约束版本，而是使用自定义比较的更通用的版本：

```
bubbleSortBy :: (t->t->Ordering) -> [t] -> [t]
bubbleSortBy cmp a = loop (length a) bubble a
 where
       bubble :: (Ord t) => [t] -> [t] 
       bubble (a:b:c) = case cmp a b of
                          LT -> a : bubble (b:c)
                          _  -> b : bubble (a:c)
       bubble l = l

loop :: Integral a    -- (Num, Ord) is a bit /too/ general here, though it works.
   => a -> (t -> t) -> t -> t
loop num f x | num > 0    = loop (num-1) f x'
             | otherwise  = x
         where x' = f x 
```

版本从这里`Ord`微不足道：

```
bubbleSort :: (Ord t) -> [t] -> [t]
bubbleSort = bubbleSortBy compare 
```

但通常直接使用通用版本更实用，就像你的情况一样

```
import Data.Function(on)

sorted_priority3rd = bubbleSortBy ( compare `on` \(a,b,c) -> (c,a,b) ) 
```

它的作用是在每次比较之前更改参数的顺序。显然，这会使冒泡排序变得更慢；通常你宁愿做

```
import Data.List (sortBy)   -- this is a proper ( log ) sorting algorithm

sorted_by3rd = sortBy ( compare `on` \(a,b,c) -> c ) 
```

并在以后关心更精细的订单。

# java - 创建扩展 Stack 的 Deck 类

> ID：15686352
> 
> 赞同：1
> 
> 时间：2013-03-28T15:50:31.557
> 
> 标签：java, stack, extending

首先让我说，这与其说是如何让它发挥作用的问题，不如说是这是否是好的做法的问题。

我想使用自定义的 shuffle() 方法来实现一副纸牌（正如在很多游戏中看到的那样，例如 TCG 游戏）......目前它使用标准库方法，但将来可能会改变。

编码：

```
package model;

import java.util.Collections;
import java.util.Stack;

/**
 *
 * @author Frank
*/
public class Deck<T> extends Stack<T> {
    public void shuffle() {
        Collections.shuffle(this);
    }
} 
```

我使用它的当前代码：

```
private Deck<Card> deck; 
```

只是想知道这是否是一种好习惯，渴望听到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:53:05.597

不，这不是一个好习惯。你的`Deck`类应该**包含**一个`Stack`，它不应该**是**一个`Stack`。

我不确定你是否想要`Stack`。您更有可能想要`ArrayList<Card>`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:56:11.797

我最好在这里使用委托而不是继承。扩展堆栈会让你永远坚持下去，而委托会让你轻松地用其他东西替换堆栈。

此外，扩展集合通常不是最佳实践。Java 8 会为集合引入许多新事物，这些新事物可能会破坏您的实现或逻辑。

# javascript - 滚动时修复 HTML 表头

> ID：15686354
> 
> 赞同：1
> 
> 时间：2013-03-28T15:50:37.237
> 
> 标签：javascript, jquery, html, css

我有一个很长的 HTML 表格，我需要修复滚动的标题，我找到了很多插件和技巧来做到这一点，但没有一个对我有用。

我猜想对我不起作用的原因是：

1.  所有解决方案都将表头从表中分离出来
2.  他们为每一列使用固定宽度以适应将标题保持在内容之上
3.  我的桌子反应灵敏，可以伸展以获得可能的全宽（`width=100%`）

有人有建议吗？

### 编辑：感谢`ashley`我更新了我的 CSS 技术

> 我的 HMLT 表看起来完全像：http: [//jsfiddle.net/enPZP/4/](http://jsfiddle.net/enPZP/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:32:09.513

我想我为这个问题想出了一个相当不错的解决方案，它比我想要的要深一些，但我对结果感到非常满意。

![在此处输入图像描述](../Images/13774bcd94f43733eb9896075360b1ef.png)

它的工作方式是准备好文档，克隆表头，将克隆的大小设置为表头的大小，并将其放在另一个表头的顶部。在滚动时，如果窗口顶部低于表格顶部，我们将克隆设置`top`为位于窗口顶部。在调整大小时，我们会重新计算`<th>`大小。

请注意，我将`<th>`s`<thead>`与 .

[jsFiddle](http://jsfiddle.net/enPZP/6/)

```
var tableBaseTop;
var originalHeader;
var floatingHeader;

$(document).ready(function () {
    tableBaseTop = $('table th').offset().top;
    originalHeader = $('thead');
    floatingHeader = originalHeader.clone();
    floatingHeader
        .css('position', 'absolute')
        .css('top', 0);

    setFloatingHeaderSize();

    $('table').prepend(floatingHeader);

    $(window).scroll(function () {
        var windowTop = $(window).scrollTop();

        if (windowTop > tableBaseTop)
            floatingHeader.css('top', windowTop - tableBaseTop);
        else
            floatingHeader.css('top', 0);
    });

    $(window).resize(setFloatingHeaderSize);
});

function setFloatingHeaderSize() {
    var originalThs = originalHeader.find('th');
    var floatingThs = floatingHeader.find('th');
    for (var i = 0; i < originalThs.length; i++) {
        floatingThs.eq(i)
            .css('width', originalThs.eq(i).width())
            .css('height', originalThs.eq(i).height());
    }
} 
```

## Firefox 标头宽度问题

我设法解决了这个问题，但我不知道如何使用 jQuery 的助手来解决这个问题。问题是当实际宽度/高度是小数时，jQuery 给了我整数大小，我需要它们作为浮点数。这是我用工作小提琴更改的代码部分。

[jsFiddle](http://jsfiddle.net/enPZP/12/)

```
function setFloatingHeaderSize() {
    var originalThs = originalHeader.find('th');
    var floatingThs = floatingHeader.find('th');
    for (var i = 0; i < originalThs.length; i++) {
        var padding = 
            parseFloat(window.getComputedStyle(this.originalThs[i], null).getPropertyValue('padding-left').replace('px', ''), 10) +
            parseFloat(window.getComputedStyle(this.originalThs[i], null).getPropertyValue('padding-right').replace('px', ''), 10);

        floatingThs.eq(i)
            .css('width', this.originalThs[i].offsetWidth - padding)
            .css('height', this.originalThs[i].offsetHeight - padding);
    }
} 
```

更新：在提出解决方案后不久，我将其放入可重用库中，请[查看 GitHub](https://github.com/Tyriar/sticky-header.js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:09:37.473

我已经修改了你的小提琴，[它将](http://jsfiddle.net/Qpirate/hZZA5/)标题固定到网格的顶部。但它确实有将瓷砖固定在左上角的缺点。

希望这将帮助您获得完整的答案。

```
table {
    width: 100%;
    border-collapse: collapse;
    position: relative;
}
div.scoll {
    overflow: scroll;
    height: 300px;
}
.center {
    text-align: center;
}
thead {
    position: static;
    width: 100%;
}
thead tr {
    position: fixed;
} 
```

并将您的 html 更改为看起来像

```
<div class="scoll">
<table>
        <thead>
            <tr>
                <th>Code</th>
                <th>Rank</th>
                <th>Code</th>
                <th>Icon</th>
                <th>Message Text</th>
                <th>Progress</th>
                <th>Current</th>
                <th>X</th>
                <th>Y</th>
                <th>Z</th>
                <th>W</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="12">&nbsp;</td>
            </tr>
            <tr class="data-row" id="19">
                <td class="center">DDD</td>
                <!-- 4 alpha numeric -->
                <td class="center">111</td>
                <!-- 3 digits -->
                <td class="center">222</td>
                <!-- 3 digits -->
                <td class="center">
                    <img width="20" height="20" src="http://cdn1.iconfinder.com/data/icons/CrystalClear/128x128/apps/ark2.png">
                    <!-- icon -->
                </td>
                <td>Lorem ipsum</td>
                <!-- text may be long -->
                <td class="center">333</td>
                <!-- 3 alpha numeric -->
                <td class="center">444</td>
                <!-- 3 alpha numeric -->
                <td class="center">555</td>
                <!-- 3 alpha numeric -->
                <td class="center">666</td>
                <!-- 3 alpha numeric -->
                <td class="center">777</td>
                <!-- 3 alpha numeric -->
                <td class="center">888</td>
                <!-- 3 alpha numeric -->
                <td class="center">999</td>
                <!-- 3 alpha numeric -->
            </tr>
</tbody>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:15:10.293

将头行分隔到另一个表并添加一些 jquery 代码：

html:

```
<table class="headtable">
<tr>
    <td>name</td>
    <td>value</td>
    <td>action</td>
</tr>
</table>
<div class="scrolltable">
    <table class="valuetable">
        <tr>
            <td>hay 1</td>
            <td>1</td>
            <td>edit</td>
        </tr>
<tr>
            <td>hay 1</td>
            <td>1</td>
            <td>edit</td>
        </tr>
        <tr>
            <td>hay 1</td>
            <td>1</td>
            <td>edit</td>
        </tr>
        <tr>
            <td>hay 1</td>
            <td>1</td>
            <td>edit</td>
        </tr>
        </table>
</div> 
```

js代码：

```
$('.headtable tr').children().each(function(index)
    {      
      $(this).width($('.valuetable tr:first td').eq(index).width());
    }); 
```

如果需要，样式：

```
.scrolltable{height:500px; overflow:auto;} 
```

如果您希望它自动调整大小（响应式）：

```
$(window).resize(function(){
$('.headtable tr').children().each(function(index)
        {      
          $(this).width($('.valuetable tr:first td').eq(index).width());
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T14:36:11.057

如果固定*高度*的列标题是可以接受的，那么这个问题可以用纯 CSS 来解决。

这是一个配置了可变表宽度和自动列宽度的示例，就像 OP 的表一样：**[jsFiddle](http://jsfiddle.net/doctorDestructo/kn4xprgx/)**

请注意，在该示例中，垂直滚动条仅在必要时出现，因此您可能需要调整框架大小才能看到它。

下面的代码与小提琴相同，但具有固定的桌子高度。只要有足够的行数超过指定的高度，滚动条就会始终显示在该配置中：

**HTML**

```
<div class="scrollingtable">
  <div>
    <div>
      <table>
        <caption>Top Caption</caption>
        <thead>
          <tr>
            <th><div label="Column 1"/></th>
            <th><div label="Column 2"/></th>
            <th><div label="Column 3"/></th>
            <th>
              <!--more versatile way of doing column label; requires 2 identical copies of label-->
              <div><div>Column 4</div><div>Column 4</div></div>
            </th>
            <th class="scrollbarhead"/> <!--ALWAYS ADD THIS EXTRA CELL AT END OF HEADER ROW-->
          </tr>
        </thead>
        <tbody>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
        </tbody>
      </table>
    </div>
    Faux bottom caption
  </div>
</div> 
```

* * *

**CSS**

```
<!--[if lte IE 9]><style>.scrollingtable > div > div > table {margin-right: 17px;}</style><![endif]-->
<style>
/*the following html and body rule sets are required only if using a % width or height*/
html {
  width: 100%;
  height: 100%;
}
body {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0 20px 0 20px;
    text-align: center;
}
.scrollingtable {
  box-sizing: border-box;
  display: inline-block;
  vertical-align: middle;
  overflow: hidden;
  width: auto; /*if you want a fixed width, set it here, else set to auto*/
  min-width: /*0*/100%; /*if you want a % width, set it here, else set to 0*/
  height: /*188px*/100%; /*set table height here; can be fixed value or %*/
  min-height: /*0*/104px; /*if using % height, make this large enough to fit scrollbar arrows + caption + thead*/
  font-family: Verdana, Tahoma, sans-serif;
  font-size: 16px;
  line-height: 20px;
  padding: 20px 0 20px 0; /*need enough padding to make room for caption*/
  text-align: left;
}
.scrollingtable * {box-sizing: border-box;}
.scrollingtable > div {
  position: relative;
  border-top: 1px solid black;
  height: 100%;
  padding-top: 20px; /*this determines column header height*/
}
.scrollingtable > div:before {
  top: 0;
  background: cornflowerblue; /*header row background color*/
}
.scrollingtable > div:before,
.scrollingtable > div > div:after {
  content: "";
  position: absolute;
  z-index: -1;
  width: 100%;
  height: 100%;
  left: 0;
}
.scrollingtable > div > div {
  min-height: /*0*/43px; /*if using % height, make this large enough to fit scrollbar arrows*/
  max-height: 100%;
  overflow: /*scroll*/auto; /*set to auto if using fixed or % width; else scroll*/
  overflow-x: hidden;
  border: 1px solid black; /*border around table body*/
}
.scrollingtable > div > div:after {background: white;} /*match page background color*/
.scrollingtable > div > div > table {
  width: 100%;
  border-spacing: 0;
  margin-top: -20px; /*inverse of column header height*/
  margin-right: 17px; /*uncomment if using % width*/
}
.scrollingtable > div > div > table > caption {
  position: absolute;
  top: -20px; /*inverse of caption height*/
  margin-top: -1px; /*inverse of border-width*/
  width: 100%;
  font-weight: bold;
  text-align: center;
}
.scrollingtable > div > div > table > * > tr > * {padding: 0;}
.scrollingtable > div > div > table > thead {
  vertical-align: bottom;
  white-space: nowrap;
  text-align: center;
}
.scrollingtable > div > div > table > thead > tr > * > div {
  display: inline-block;
  padding: 0 6px 0 6px; /*header cell padding*/
}
.scrollingtable > div > div > table > thead > tr > :first-child:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  height: 20px; /*match column header height*/
  border-left: 1px solid black; /*leftmost header border*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div > div:first-child,
.scrollingtable > div > div > table > thead > tr > * + :before {
  position: absolute;
  top: 0;
  white-space: pre-wrap;
  color: white; /*header row font color*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div[label]:after {content: attr(label);}
.scrollingtable > div > div > table > thead > tr > * + :before {
  content: "";
  display: block;
  min-height: 20px; /*match column header height*/
  padding-top: 1px;
  border-left: 1px solid black; /*borders between header cells*/
}
.scrollingtable .scrollbarhead {float: right;}
.scrollingtable .scrollbarhead:before {
  position: absolute;
  width: 100px;
  top: -1px; /*inverse border-width*/
  background: white; /*match page background color*/
}
.scrollingtable > div > div > table > tbody > tr:after {
  content: "";
  display: table-cell;
  position: relative;
  padding: 0;
  border-top: 1px solid black;
  top: -1px; /*inverse of border width*/
}
.scrollingtable > div > div > table > tbody {vertical-align: top;}
.scrollingtable > div > div > table > tbody > tr {background: white;}
.scrollingtable > div > div > table > tbody > tr > * {
  border-bottom: 1px solid black;
  padding: 0 6px 0 6px;
  height: 20px; /*match column header height*/
}
.scrollingtable > div > div > table > tbody:last-of-type > tr:last-child > * {border-bottom: none;}
.scrollingtable > div > div > table > tbody > tr:nth-child(even) {background: gainsboro;} /*alternate row color*/
.scrollingtable > div > div > table > tbody > tr > * + * {border-left: 1px solid black;} /*borders between body cells*/
</style> 
```

* * *

必须更改背景颜色并移除边框，使其看起来与 OP 的表格*完全相同。*可以在 CSS 注释中找到进行这些类型更改的说明。

**[在此处](https://stackoverflow.com/questions/673153/html-table-with-fixed-headers/25818428#25818428)**查看我的答案以获取替代配置，并在同一篇文章中查看 d-Pixie 的答案以了解用于冻结标题行的基本技术的解释。

# mercurial - Mercurial / hgweb : How to get latest revision description for each file on browse page?

> ID：15686364
> 
> 赞同：1
> 
> 时间：2013-03-28T15:50:59.620
> 
> 标签：mercurial, hgweb

I have local repo, and I need to view latest changes description per-file basis via web interface.

Look on examples (folder in Netbeans sources) :

1 - [on Netbeans native server](http://hg.netbeans.org/main-silver/file/1f5585db41b2/ant.kit)

2 - [on Bitbucket server](https://bitbucket.org/netbeans/main-silver/src/b8edc134468f48261104242278373bdf248ede16/ant.kit?at=default)

I have "1", but I want "2" (where we can see latest revision desc for each file). So, I try to modify hgweb templates ([https://www.mercurial-scm.org/wiki/Theming](https://www.mercurial-scm.org/wiki/Theming)) to reach this functionality, but in file list page template (manifest) variables to get rev desc not accessible. Only file name / size / permissions etc. available.

What can I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:38:29.090

您不能仅通过修改模板来做到这一点。您必须遍历文件，查看清单引用的文件日志修订版的 linkrev 并从那里获取变更集消息。

# html - solid text on transparent div on image

> ID：15686365
> 
> 赞同：0
> 
> 时间：2013-03-28T15:51:00.080
> 
> 标签：html, css

I am trying to reproduce this image, with HTML and CSS, but I'm not sure how to place solid images on translucent divs on top of an image. There's one up top and on bottom. And I need a table of these.

[http://dl.dropbox.com/u/17949100/house.png](http://dl.dropbox.com/u/17949100/house.png)

**Response to comment**: `<table>` is my lazy way of forcing all the divs to be the same width (and the image). I guess I need to take the text **out** of the divs and place them, which I also had a hard time doing. Then I worried if use resizes the browser.

Here's what I got so far on [jsFiddle](http://jsfiddle.net/mrcactu5/32szC/). Here's the HTML code:

```
<table><tr><td>
     <img src="http://dl.dropbox.com/u/17949100/samplehouse.png">
     <div class="address"><p class="address">804 Rolfe</p></div>
     <div class='desc'>
         <span class='l'>2 Bedrooms</span>
         <span class='r'>$2100</span>
     </div>   
</td></tr></table> 
```

Here's the CSS file:

```
div.address { 
    width:100%; 
    height:20px;
    background-color:#000000; 
    opacity:0.5;
}

span.l{
    width:50%;
    font-family:Helvetica;
    color:#FFFFFF;
    text-align:center;
    font-size:75%;
    float:left;
    margin-top:0px;
}
span.r{
    width:50%;
    font-family:Helvetica;
    color:#FFFFFF;
    text-align:center;
    font-size:75%;
    float:right;
    margin-top:0px;
}

div.desc { 
    width:100%; 
    height:20px;
    background-color:#000000; 
    opacity:0.5;
}

p.address{
    font-family:Helvetica;
    height:20px;
    opacity:1;
    color:#FFFFFF;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:13:54.120

这是我的尝试，它包括图像周围的阴影边框：http: [//jsfiddle.net/katychuang/2R3hk/](http://jsfiddle.net/katychuang/2R3hk/)

删除表格以使用 div。外部类是“项目”

```
<div class="item">
  <div class="address">
      <span>804 Rolfe</span>
  </div>
    <img src="http://dl.dropbox.com/u/17949100/samplehouse.png">
   <div class='desc'><span class='l'>2 Bedrooms</span><span class='r'>$2100</span></div>
</div> 
```

和CSS。最好为 .item 和 .item img 指定单独的宽度，以使它们对齐而不是使用 100%

```
.address {  
    height:20px;
    width:inherit;
    background: rgba(0, 0, 0, 0.70);
    font-family:Helvetica;
    color:#FFFFFF;
    text-align:center;
    z-index:500;
    position:absolute;
    top:0px;
    left:0px;
    padding-top:5px;
}

span.l{
    width:50%;
    font-family:Helvetica;
    color:#FFFFFF;
    text-align:center;
    font-size:75%;
    float:left; 
}
span.r{
    width:50%;
    font-family:Helvetica;
    color:#FFFFFF;
    text-align:center;
    font-size:75%;
    float:right; 
}

.desc { 
    width: inherit;
    background: rgba(0, 0, 0, 0.70);              
    height: 20px;
    z-index: 500;
    position: absolute;
    bottom: 0px;
    left: 0px;
    padding-bottom: 5px;
}

.item img {width:250px}

.item {
  position:relative;
  width: 250px;
  margin: auto;
  padding: 0px;
  -moz-box-shadow: 0px 0px 1em rgba(0, 0, 0, 0.9); /* FF3.5+ */
  -webkit-box-shadow: 0px 0px 1em rgba(0, 0, 0, 0.9); /* Saf3.0+, Chrome */
        box-shadow: 0px 0px 1em rgba(0, 0, 0, 0.9); /* Opera 10.5, IE 9.0 */
      filter:  progid:DXImageTransform.Microsoft.dropshadow(OffX=10px, OffY=10px, Color='#888'); /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.dropshadow(OffX=10px, OffY=10px, Color='#888')"; /* IE8 */
}

body {background-color:#EEEEEE;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:16:06.427

这是我对您应该做的事情的解释：

[http://jsfiddle.net/32szC/8/](http://jsfiddle.net/32szC/8/)

HTML：

```
<div class="product">
    <img src="http://dl.dropbox.com/u/17949100/samplehouse.png">
    <span class="address">804 Rolfe</span>
    <div class='desc'>
        <span class='left'>2 Bedrooms</span>
        <span class='right'>$2100</span>
    </div>
</div> 
```

CSS：

```
.product {
    width: 272px;
    height: 220px;
    position: relative;
}

.product img {
    position: relative;
    z-index:1;
}

.address, .desc { 
    display: block;
    width: 252px; /* 272px */
    padding: 5px 10px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
    background-color: rgba( 0, 0, 0, 0.5);
    color: #fff;
}

.desc { 
    top: auto;
    bottom: 0;
    overflow: hidden;
}

.desc .left {
    float: left;
}

.desc .right {
    float: right;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:06:06.543

清理标记和重构 css 的小提琴：http: [//jsfiddle.net/32szC/4/](http://jsfiddle.net/32szC/4/)

无论如何要*认真*考虑不要将表格用于布局目的的建议：所以即使您选择`display: inline-block`在`.wrapper`元素上使用完全删除表格结构，我也让 css 正常工作（请参阅[http://jsfiddle.net/32szC/7/](http://jsfiddle.net/32szC/7/) )

**HTML**

```
 <table>
 <tr><td>
     <div class="wrapper">
         <img src="http://dl.dropbox.com/u/17949100/samplehouse.png" />
         <div class="address"><span class="address">804 Rolfe</span></div>
         <div class='desc'><span>2 Bedrooms</span><span>$2100</span></div>
    </div>
 </td></tr></table> 
```

**CSS**

```
.wrapper {
    position: relative;
    height: 100%;
}
.wrapper div {
    position: absolute;
    z-index: 1;
    left: 0;
    width: 100%;
    background: rgba(0,0,0, .75);
    height:20px;
}

div.address { top: 0; }
div.desc { bottom: 0; }

span {
    font-family: Helvetica;
    text-align:center;
    font-size:75%;
    color: #fff;
    height: 20px;
    line-height:20px;
}

.address span {
   display: block;
}

.desc span {
    width:50%;   
    float: left;
}
.desc span + span {
    float:right;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:09:39.573

看起来你只需要一些负边距。我会将地址放在图像上方，将描述放在图像下方。然后像`margin-bottom: -20px`将地址重叠在图像上一样简单的东西。

我在这里做了适当的改变[jsFiddle](http://jsfiddle.net/dfqJn/1/)

# sql-server - 如何使用 JPA/Hibernate 设置 XACT_ABORT？

> ID：15686367
> 
> 赞同：3
> 
> 时间：2013-03-28T15:51:09.890
> 
> 标签：sql-server, hibernate, jpa, groovy

我正在使用映射到 MS SQLServer 中的视图的休眠实体。该视图包含从链接服务器上的表中选择的数据。我能够使用 JPQL 成功查询此视图。但是，当我尝试使用 entityManager.merge(myEntity) 更新视图时，出现以下错误：

> com.microsoft.sqlserver.jdbc.SQLServerException：无法为链接服务器“DBNAME”的 OLE DB 提供程序“MSDAORA”启动嵌套事务。因为 XACT_ABORT 选项设置为 OFF，所以需要嵌套事务。在 com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216) 在 com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515) 在 com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement (SQLServerPreparedStatement.java:404) 在 com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350) 在 com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696) 在 com。 microsoft.sqlserver.jdbc.SQLServerConnection。

我需要将 XACT_ABORT 设置为 ON，以便 SQLServer 在发生错误时可以回滚整个事务。我能够使用本机查询来解决这个问题，但这并不是很理想。

```
 String queryString = """set xact_abort on; update table_name set column1 = :column1, column2 = :column2 where id = :id"""
    Query query = entityManager.createNativeQuery(queryString)
    query.setParameter("column1", column1)
    query.setParameter("column2", column2)
    query.setParameter("id", id)
    query.executeUpdate() 
```

**有什么方法可以配置休眠/JPA/JPAVendorAdaptor 为每个合并/持久执行“设置 xact_abort on”，这样我就不必使用本机查询？**

这是我的休眠配置：

```
@Resource
DataSource dataSource

@Bean
JpaVendorAdapter vendorAdapter(){
    return new HibernateJpaVendorAdapter(database:Database.SQL_SERVER)
}

@Bean
AbstractEntityManagerFactoryBean entityManagerFactory(){
    LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean(dataSource:dataSource, jpaVendorAdapter:vendorAdapter())
    em.setPackagesToScan("com.mycompany.entity")
    return em
}

@Bean
PlatformTransactionManager transactionManager() {
    return new JpaTransactionManager(entityManagerFactory:entityManagerFactory().getObject())
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:21:57.513

我最终使用休眠拦截器为每个插入和更新语句附加“set xact_abort on”。

这是我的拦截器：

```
class XactAbortInterceptor extends EmptyInterceptor{
   String onPrepareStatement(String sql) {
      if(sql.startsWith("insert") || sql.startsWith("update"))
         sql = "set xact_abort on; " + sql
      return sql
   }
} 
```

这是我注册拦截器的地方：

```
@Bean
AbstractEntityManagerFactoryBean entityManagerFactory(){
    LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean(dataSource:dataSource, jpaVendorAdapter:vendorAdapter())
    em.setPackagesToScan("com.mycompany.entity")
    em.setJpaPropertyMap(["hibernate.ejb.interceptor": XactAbortInterceptor.class.name])
    return em
} 
```

现在对 entityManager.merge(myObject) 或 entityManager.persist(myObject) 的所有调用都会将 xact_abort 设置为 on。

希望这可以帮助遇到同样问题的其他人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T21:54:45.483

我必须在 persitence.xml 文件中注册拦截器类 XactAbortInterceptor

# c - 串行通信 C/C++ Linux 线程安全吗？

> ID：15686368
> 
> 赞同：5
> 
> 时间：2013-03-28T15:51:10.220
> 
> 标签：c, linux, multithreading, thread-safety, serial-communication

我的问题很简单。在 Linux 线程下读写串口是否是线程安全的？我可以从不同的线程同时读写吗？甚至可以同时进行 2 次写入吗？我不打算这样做，但这对其他人来说可能很有趣。我只有一个线程可以读取，另一个线程可以写入。

关于这个话题几乎没有什么可找到的。

更多细节——我正在使用`write()`和`read()`获得的文件描述符`open()`；我正在同时这样做。

谢谢大家！

罗尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:36:53.827

这有两个方面：

1.  C 实现的作用。
2.  内核做什么。

关于内核，我很确定它要么支持这一点，要么引发相应的错误，否则这将太容易被利用。read() 的 C 实现只是一个系统调用包装器（看看[在 Linux 套接字调用 read 之后会发生什么](https://stackoverflow.com/questions/10226294/what-happens-after-read-is-called-for-a-linux-socket)），所以这不会改变任何东西。但是，我仍然没有看到那里记录的任何保证，所以这是不可靠的。

如果你真的想要两个线程，我建议你继续使用 stdio 函数（fopen/fread/fwrite/fclose），因为在这里你可以利用 glibc 在内部将这些调用与互斥锁同步的事实。

但是，如果您在一个线程中进行阻塞读取，则另一个线程可能会被阻塞以等待写入某些内容。这可能是一个僵局。一个解决方案是使用 select() 来检测何时有一些数据可供读取或缓冲空间可供写入。虽然这是在单个线程中完成的，但是虽然初始代码有点大，但最终这种方法更容易和更清晰，如果涉及多个流则更是如此。

# jquery - 使用 json 数据渲染每一天

> ID：15686372
> 
> 赞同：0
> 
> 时间：2013-03-28T15:51:25.493
> 
> 标签：jquery, fullcalendar

我有一个 Web 服务，它每天返回一种颜色，如下所示：

```
({"total_rows":"96","rows":[
  {"row":{"date":"2013-01-01","airqualityindex":"50","categorycolorinteger":"-16718848"}},
  {"row":{"date":"2013-01-02","airqualityindex":"45","categorycolorinteger":"-16718848"}},
  {"row":{"date":"2013-01-03","airqualityindex":"57","categorycolorinteger":"-256"}},
  {"row":{"date":"2013-01-04","airqualityindex":"36","categorycolorinteger":"-16718848"}},
  {"row":{"date":"2013-01-05","airqualityindex":"42","categorycolorinteger":"-16718848"}},
  {"row":{"date":"2013-01-06","airqualityindex":"51","categorycolorinteger":"-256"}}
...]}) 
```

我想使用从此 Web 服务返回的 categorycolorinteger 为每天单元格的背景颜色着色。我想我可以用 dayRender 做到这一点，但我还没有找到一个很好的例子来说明如何做到这一点。

谢谢，艾米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:07:48.960

您可以遍历上面的对象并适当地设置背景颜色。像这样的东西：

```
dayRender: function(date, cell) {
             // loop through your object here
             // here the date 2013-03-01 and the color red are passed from your loop
             if($.fullCalendar.formatDate(date, 'yyyy-MM-dd') === "2013-03-01")
                cell.css('background-color', 'red');
           } 
```

让我知道这是否有帮助！

# json - 如何根据 Mongoose 中的子文档值检索父文档？

> ID：15686374
> 
> 赞同：9
> 
> 时间：2013-03-28T15:51:31.497
> 
> 标签：json, node.js, mongodb, mongoose

我有以下架构：

```
var Child = new mongoose.Schema({
    'field': String,
    'value': String
  });

var Parent = new mongoose.Schema({
    'name': String,
    'children': [ Child ]
  }); 
```

我想返回对应于以下 JSON 对象`Parent`的 's 之一：`Child`

```
{ 'field': 'Family Name', 'value': 'Smith' } 
```

我试过这个：

```
Parent.findOne({ 'children': { 'field': 'Family Name', 'value': 'Smith' } }, fn ...) 
```

但它一直在检索`null`。

**编辑：**

通过 Mongo shell 扩展测试，我发现`Child`子文档都有自己`_id`的 . 如果我将其添加`_id`到查询中，它会获取`parent`文档。现在，我事先不知道那个孩子`id`会是什么。那么：如何从子文档查询中删除它？（换句话说，上面的查询从字面上寻找一个只有两个属性的 JSON 对象，而子文档有三个）

我的环境是：Node.js、Mongoose、MongoDB

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T16:37:19.597

似乎`$elemMatch`是查询运算符来解决这个问题。实际查询应该这样写：

```
Parent.findOne({ 'children': { $elemMatch: { 'field': 'Family Name', 'value': 'Smith' } } }, fn ...) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T16:30:47.517

您是否有理由在子文档上使用字段、值结构？简单地将键用作字段会更容易，例如`{"FamilyName": "Smith"}`. 这将允许类似：

```
Parent.findOne({'children.FamilyName': 'Smith'}, function(err, doc){...}); 
```

# c - 函数声明C的区别

> ID：15686377
> 
> 赞同：-3
> 
> 时间：2013-03-28T15:51:49.553
> 
> 标签：c, pointers, function-pointers

如果我声明这样的函数，C 是否有区别：

```
Type * AK_init_observer(); 
```

像这样：

```
Type* *AK_init_observer(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:53:11.290

是的，返回类型不同。第一个返回指向 的指针`Type`，而第二个返回指向 的指针`Type`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:52:37.437

是，有一点不同。

*   在第一种情况下，`AK_init_observer`返回一个指向`Type`( `Type *`) 的指针。
*   在第二种情况下，`AK_init_observer`返回一个指向`Type`( `Type **`) 的指针。

由于空格在这里无关紧要，因此这两个声明等效于：

```
Type *AK_init_observer(); 
```

和：

```
Type **AK_init_observer(); 
```

## 参考

> ### C11 (n1570), § 5.1.1.1 程序结构
> 
> 7) 分隔标记的空白字符不再重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:56:09.413

使用众所周知的类型（例如`int`，而不是）更容易理解`Type`：

```
int *f1(); 
```

返回一个指向 int 的指针。您可以按照指针找到int：

```
int *p = f1();
printf("%d\n", *p); 
```

然而：

```
int **f2(); 
```

返回一个指针，该指针指向另一个指向 int 的指针：

```
int **p1 = f2();
int *p2 = *p1;
printf("%d\n", *p2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:54:40.853

是的，在第二个中，您将返回指向指针的指针。例如：

```
char *function();             // Returns a pointer to a char - or a 'string'

char **function();            // Returns an array of strings 
```

# c# - WPF 遍历数据网格

> ID：15686381
> 
> 赞同：16
> 
> 时间：2013-03-28T15:52:03.783
> 
> 标签：c#, wpf, datagrid

使用 Visual Studio 2012 ulti 使用 WPF C#.NET4.5。

旧的winforms代码：

```
foreach (DataGridViewRow paretoRow in ParetoGrid.Rows)
{
       if ((Convert.ToInt32(paretoRow.Cells["CurrentPareto"].Value) < (Convert.ToInt32(paretoRow.Cells["NewPareto"].Value))))
       {
              paretoRow.Cells["pNew"].Value = downArrow
       }
} 
```

如您所见，我循环遍历的每一行都检查了一个特定的单元格，如果为真，则填充另一个单元格。这是我以前多次使用过的好旧的 winforms 代码......但是。切换到 WPF 比我之前假设的要大得多。

`DataGrid`不包含该`Row`属性。相反，我认为您需要使用：

```
DataGridRow paretoRow in paretogrid.Items 
```

但是我仍然不知道现在谁来获得细胞。

所以我的问题是，是否有语法更改要执行，如果有的话在哪里？或者我开始相信 WPF 中的数据网格比 Winforms 更多地使用对象操作，因此不需要使用称为“行”的属性，如果是这种情况，我应该知道在这个例子中使用什么逻辑/语法？

感谢你们的耐心，想想当我回家过节时，我会做一些 WPF 挖掘，看看它实际上有多么不同。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-28T16:19:13.033

我认为首先你想做的是得到你的所有行`DataGrid`：

```
public IEnumerable<Microsoft.Windows.Controls.DataGridRow> GetDataGridRows(Microsoft.Windows.Controls.DataGrid grid)
{
    var itemsSource = grid.ItemsSource as IEnumerable;
    if (null == itemsSource) yield return null;
    foreach (var item in itemsSource)
    {
        var row = grid.ItemContainerGenerator.ContainerFromItem(item) as Microsoft.Windows.Controls.DataGridRow;
        if (null != row) yield return row;
    }
} 
```

然后遍历您的网格：

```
var rows = GetDataGridRows(nameofyordatagrid); 

foreach (DataGridRow row in rows)  
{  
  DataRowView rowView = (DataRowView)row.Item;
  foreach (DataGridColumn column in nameofyordatagrid.Columns)
  {
      if (column.GetCellContent(row) is TextBlock)
      {
          TextBlock cellContent = column.GetCellContent(row) as TextBlock;
          MessageBox.Show(cellContent.Text);
      }
  } 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-01-13T23:42:44.623

人们似乎过于复杂了，这对我有用：

```
foreach (System.Data.DataRowView dr in yourDataGrid.ItemsSource)
{
     MessageBox.Show(dr[0].ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:35:53.190

是的你是对的。WPF`DataGrid`是围绕更好地支持对象的使用而构建的。

您可以使用类似于以下内容的 ViewModel。将它们全部构建到一个集合中，然后将该集合设置为您的`ItemsSource`. 如果要显示和图像而不是 pNew 为真/假的复选标记，则还需要使用 ValueConverter。

```
public class FooViewModel : INotifyPropertyChanged
{
    private int currentPareto;
    public int CurrentPareto 
    {
        get
        {
           return currentPareto;
        }
        set
        { 
            if (currentPareto == value)
                return;

            currentPareto = value;
            OnPropertyChanged("CurrentPareto");
            OnPropertyChanged("pNew");
        }
    }

    private int newPareto;
    public int NewPareto 
    {
        get
        {
           return newPareto;
        }
        set
        { 
            if (newPareto == value)
                return;

            newPareto = value;
            OnPropertyChanged("NewPareto");
            OnPropertyChanged("pNew");
        }
    }

    public bool pNew
    {
        get
        {
            return CurrentPareto < NewPareto;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

### 编辑

为了简化一点，您可以使用基本 ViewModel 类并使用`PropertyChanged`编织。代码将简化为：

```
public class FooViewModel : ViewModelBase
{
    public int CurrentPareto { get; set; }
    public int NewPareto { get; set; }
    public bool pNew { get { return CurrentPareto < NewPareto; } }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-27T13:25:14.110

我什至不明白为什么在数据网格中获取行及其值如此复杂。感觉就像地狱一样。该 api 甚至给出了有趣的事件名称，这也不是那么直接。为什么人们不能只专注于基线并给出确切需要的东西，而不是各种没有用处和意义的不同选项。我的意思是吃你只需要一把勺子和叉子就对了。自 10 万年前以来，甚至从未改变过。这是我的代码，这要感谢提到一些人只是试图使事情过于复杂并浪费你的时间的人。

```
 private void dtaResultGrid_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        ActivateTestDatagridAccess();
    }

    public async void ActivateTestDatagridAccess()
    {
        try
        {
            await Task.Delay(500);
            foreach (System.Data.DataRowView dr in dtaResultGrid.ItemsSource)
            {
                for (int j = 0; j < dtaResultGrid.Columns.Count; j++)
                {
                    Console.WriteLine(dr[j].ToString());
                }
                Console.Write(Environment.NewLine);
            }
        }
        catch (Exception exrr)
        {
            Console.WriteLine(exrr.ToString());
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:21:25.560

在 WPF 中，您会更加动态和面向对象。您可以将列“pNew”绑定到您放入的元素的属性上`DataGrid`，返回向下箭头。如果值发生变化，您可以引发事件`PropertyChanged`（接口`INotifyPropertyChanged`）并且绑定的属性将得到重新评估。

从 WPF 开始也很有趣的是`DataTemplate`, `ControlTemplate`, `Converter`. 当调用属性时，转换器将属性值更改为 WPF 的可用值（例如 BoolToVisibility）。 `DataTemplate`并可`ControlTemplate`用于更改控件的外观。

那里有几个很好的 WPF 教程。我还建议研究 MVVM-Pattern 以用作 Businessobject 和 WPF-Control 的中间层，尤其是处理您在此处尝试执行的操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-17T08:12:59.100

如果您使用类的实例（如 struct_class）填充 datagridview 行，这将是拥有 foreach 循环的最快方法

```
foreach (struct_class row in dgv.Items)
{
    MessageBox.Show(row.name);
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-12-28T08:42:09.480

为什么不能只使用此属性获取行数，然后使用 For 循环进行迭代？

```
dataGridView1.Rows.Count 
```

# android - 在 Android 中从 jar lib 声明命名空间

> ID：15686385
> 
> 赞同：3
> 
> 时间：2013-03-28T15:52:11.607
> 
> 标签：android, jar, android-view, android-xml

我正在创建一个 Android SDK 作为 jar。它包含一些带有自定义参数的自定义视图。我想创建一个插入式解决方案，开发人员除了将 jar 放到他们的 libs 文件夹中之外不需要做任何事情。我不能参加真正的图书馆项目，这是业务需求。

一切实际上都很好，这不是我第一个作为 jar 发布的 android 项目。但是在这一个中，我需要为自定义视图提供自定义属性。这意味着 Android 需要了解视图通过 xml 模式支持的属性集。

简单的解决方案是让用户在他们的资源文件夹中放置一个预定义的 attr.xml。但是我已经看到像 admob 这样的库在没有自定义 attr.xml 的情况下工作。例如通过 admob 你声明：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">
<TextView android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="@string/hello"/>
<com.google.ads.AdView android:id="@+id/ad"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       ads:adSize="BANNER"
                       ads:adUnitId="AD_UNIT_ID_GOES_HERE"
                       ads:testDevices="TEST_EMULATOR,TEST_DEVICE_ID_GOES_HERE"
                       ads:loadAdOnCreate="true"/>
</LinearLayout> 
```

但您不需要在应用程序中添加 attr.xml。如果我尝试像他们一样使用它（我在 jar 中有视图）并且具有与上面相同的布局以及我自己的自定义属性，那么 aapt 会抱怨：

*   错误：在包“com.XXX.XXX”中找不到属性“XXX”的资源标识符

我已经查看了 admobs jar 文件，但我在 com.google.ads 包中找不到任何特别的东西，它看起来像一个 xml 定义。知道他们是如何做到这一点的吗/aapt 如何知道 admob 的视图支持哪些属性？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T03:45:01.577

无需创建`attr.xml`即可使用自定义属性。`package`您可以使用以下方法通过其and获取 attr 值`name`：

*   [AttributeSet.getAttributeBooleanValue（字符串命名空间，字符串属性，布尔默认值）](http://developer.android.com/reference/android/util/AttributeSet.html#getAttributeBooleanValue%28java.lang.String,%20java.lang.String,%20boolean%29)
*   [AttributeSet.getAttributeFloatValue（字符串命名空间，字符串属性，浮点默认值）](http://developer.android.com/reference/android/util/AttributeSet.html#getAttributeFloatValue%28java.lang.String,%20java.lang.String,%20float%29)
*   [AttributeSet.getAttributeValue（字符串命名空间，字符串名称）](http://developer.android.com/reference/android/util/AttributeSet.html#getAttributeValue%28java.lang.String,%20java.lang.String%29)
*   等等

这是一个如何使用它们的简单示例：

**布局文件：**

```
<com.example.HelloAndroid.StubView
    xmlns:stub="http://schemas.android.com/apk/lib/com.example.HelloAndroid"
    android:id="@+id/stub"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    stub:title="title value"
    stub:subtitle="subtitle value" /> 
```

**StubView.java：**

```
public class StubView extends View {
    public StubView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public StubView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        final String packname = "http://schemas.android.com/apk/lib/com.example.HelloAndroid";

        if (attrs != null) {
            final String title = attrs.getAttributeValue(packname, "title");
            final String subtitle = attrs.getAttributeValue(packname, "subtitle");

            Log.d("Test", "Title " + title);
            Log.d("Test", "Subtitle " + subtitle);
        }
    }
} 
```

您可以反编译`AdMob`jar 并查看它们使用相同的方法。

**编辑：**

如果您遇到`No resource identifier found for attribute 'XXX' in package 'com.XXX.XXX'`错误，请确保您的命名空间看起来不像`http://schemas.android.com/apk/res/your.package.name`. `apk/res`是最重要的，因为在这种情况下`appt`将检查提到的属性是否真的在`attrs.xml`. 您可以只使用`http://schemas.android.com/apk/lib/your.package.name`namespcae 来避免这个问题。

# solr - Solr中的空间折叠标记器/过滤器

> ID：15686387
> 
> 赞同：0
> 
> 时间：2013-03-28T15:52:14.360
> 
> 标签：solr

我在 SOLR 模式中有一个多值字段。我想知道是否有一个现有的标记器/过滤器可以删除一个空格。例如，给定“solr,apache solr,inverted index”，我希望它们为“solr,apachesolr,invertedindex”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:57:49.880

您可以在该字段的索引时间内使用[PatternReplaceCharFilterFactory](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternReplaceCharFilterFactory)作为分析器链中的第一个条目。因此，在您的 schema.xml 中定义一个新的 fieldType，如下所示：

```
<fieldtype name="text_no_ws" class="solr.TextField">
  <analyzer>
    <charFilter class="solr.PatternReplaceCharFilterFactory" 
                pattern=" " replacement=""/>
    ... 
```

然后将其用作您的字段的类型，例如：

```
<field name="keywords" type="text_no_ws" multiValued="true" ... /> 
```

# python - Python 正则表达式匹配一个正则表达式的匹配元素

> ID：15686395
> 
> 赞同：2
> 
> 时间：2013-03-28T15:52:23.507
> 
> 标签：python, regex

假设我有这个 html 代码：

```
<table id="test_table">
    <td>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
    </td>
</table>
<table id="test_table2">
    <td>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
    </td>
</table> 
```

我只想在#test_table 中匹配href 并迭代它们？我试过这样的事情：

```
<table id="test_table">\s*<td>(\s*<a href="(?P<url>.*?)">(?P<anchor>.*?)</a>\n)* 
```

但这仅与第一个元素匹配，我在此问题上停留了几个小时，但我无法正确解决，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:57:47.653

对于 HTML，请使用正确的工具。请改用 HTML 解析器，例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html)

table = soup.find('table', id='test_table')
for anchor in table.find_all('a'):
    print anchor['href'], anchor.string 
```

不要使用正则表达式，用这样的表达式匹配 HTML 变得太复杂、太快。不要那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:04:21.160

不要使用正则表达式来解析 HTML，为此使用 LXML。

使用 iPython 的示例（测试是您的文件）

```
In [55]: import lxml.html

In [56]: x = lxml.html.fromstring(open("test").read())

In [57]: for i in x.iterlinks():
    print i # print ALL links 
   ....:     
(<Element a at 0x1bb7110>, 'href', '#', 0)
(<Element a at 0x1ba8c50>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1ba8c50>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1ba8c50>, 'href', '#', 0)
(<Element a at 0x1bb7110>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8c50>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8c50>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)

In [58]: path = x.xpath("./table[@id='test_table']")[0]

In [59]: for i in path.iterlinks():
   ....:     print i
   ....:     
(<Element a at 0x1bb7110>, 'href', '#', 0)
(<Element a at 0x1bb7050>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1bb7050>, 'href', '#', 0)
(<Element a at 0x1ba89b0>, 'href', '#', 0)
(<Element a at 0x1ba8e30>, 'href', '#', 0)
(<Element a at 0x1bb7050>, 'href', '#', 0) 
```

使用 Xpath 让事情变得更容易，更少的头痛和更少的咖啡；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:40:48.580

也看看[PyQuery](http://pythonhosted.org/pyquery/)，我喜欢它提供的 jQuery 熟悉度：

```
>>> from pyquery import PyQuery as pq
>>> html = '''<table id="test_table">
...     <td>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...         <a href="#">#</a>
...     </td>
... </table>
... <table id="test_table2">
...     <td>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...         <a href="#">#33</a>
...     </td>
... </table>'''
>>> d = pq(html)
>>> for a in d('#test_table').find('a'):
...     print a.attrib.items()
...
...
[('href', '#')]
[('href', '#')]
[('href', '#')]
[('href', '#')]
[('href', '#')]
[('href', '#')]
[('href', '#')]
[('href', '#')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:51:24.433

您的正则表达式**确实**捕获了 HTML 的正确部分。

问题是，当您有一个以 + 或 * 结尾的捕获组（例如`((?P<anchor>.*?)*`）时，该方法仅返回最终组`groups()`。

例如：

```
sss='''<table id="test_table">
    <td>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#">#</a>
        <a href="#last_url">#last_anch</a>
    </td>
</table>
<table id="test_table2">
    <td>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
        <a href="#">#33</a>
    </td>
</table>'''

import re

res='<table id="test_table">\s*<td>(\s*<a href="(?P<url>.*?)">(?P<anchor>.*?)</a>\n)*'
m=re.search(res,sss)
print m.groups() 
```

**输出：**

```
('        <a href="#last_url">#last_anch</a>\n', '#last_url', '#last_ach') 
```

我不同意其他发帖者的观点，即您应该*始终*使用像 BeautifulSoup 这样的专用 HTML 处理器。这些可能会产生很高的开销，并且对于简单的任务，编码可能需要更长的时间。

另一种方法是使用以下两个 re：

```
res='<table id="test_table">.*?</table>'
mm=re.search(res,sss,re.DOTALL)
results=[m.group('url','anchor') for m in re.finditer('<a href="(?P<url>.*?)">(?P<anchor>.*?)</a>',mm.group())] 
```

# javascript - 图片上方的半透明div

> ID：15686397
> 
> 赞同：3
> 
> 时间：2013-03-28T15:52:27.283
> 
> 标签：javascript, html, css, image

我有一个字符的 PNG 图像，我想要这样的东西： [http](http://www.swfcabin.com/open/1364482220) ://www.swfcabin.com/open/1364482220 。

如果有人点击角色身体的某个部位，它将被“选中”。问题是 - 我该怎么做。我不想使用更多图像（因为我有多个字符），我只想使用 CSS。

我试过这个： http: [//jsfiddle.net/eRVpL/](http://jsfiddle.net/eRVpL/)，但绿色背景出现在白色背景之上，我希望它只在角色之上。

编码：

```
<div class="character">
    <img src="http://img194.imageshack.us/img194/3854/goldgladiator.png" />
    <span></span>
</div>
<style>
.character { width: 210px;display: inline-block; vertical-align: middle; position: relative; }

.character > span {
    display: block;
    width: 200px;
    height: 30%;
    background: rgb(160, 255, 97);
    opacity: .3;
    position: absolute;
    top: 0;
}
img {
    max-width: 200px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:25:02.020

目前没有实现这一点的纯 CSS 方法。有一个用于合成和混合 CSS 的规范正在制定中，但目前它还没有得到足够的支持，无法在产品中使用。您可以在此处阅读规范：http: [//www.w3.org/TR/compositing/](http://www.w3.org/TR/compositing/)

使用此规范，我们可以将元素的混合模式设置为“屏幕”、“叠加”或“变亮”，这将使您的角色变为绿色，但背景将保持白色。不幸的是，这还不可能。

最好的方法是，正如 jcubic 在您的一条评论中所说，“您需要使用蒙版，图像将完全相同但角色透明”。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:37:43.333

您可以使用[CSS 掩码](http://thenittygritty.co/css-masking)来完成这项工作，尽管它们目前仅在 WebKit 浏览器中受支持：http: [//caniuse.com/#feat=css-masks](http://caniuse.com/#feat=css-masks)

[http://jsfiddle.net/eRVpL/3/](http://jsfiddle.net/eRVpL/3/)

HTML：

```
<div class="character">
  <img src="http://img194.imageshack.us/img194/3854/goldgladiator.png">
  <div class="green-mask"></div>
</div> 
```

CSS：

```
.green-mask {
  height: 200px;
  width: 508px;
  background: rgb(160, 255, 97);
  opacity: .3;
  position: absolute;
  top: 0;
  -webkit-mask-image: url(http://img194.imageshack.us/img194/3854/goldgladiator.png);
} 
```

如果要偏移链接的 GIF 中的元素，请将彩色背景放在蒙面 div 的子项上：

[http://jsfiddle.net/eRVpL/11/](http://jsfiddle.net/eRVpL/11/)

HTML：

```
<div class="character">
  <img src="http://img194.imageshack.us/img194/3854/goldgladiator.png">
  <div class="green-mask">
    <div class="filler"></div>
  </div>
</div> 
```

CSS：

```
.filler {
  background-color: rgba(160, 255, 97, 0.3);
  height: 200px;
  margin-top: 200px;
  width: 100%;
}

.green-mask {
  position: absolute;
  width: 508px;
  top: 0;
  -webkit-mask-image: url(http://img194.imageshack.us/img194/3854/goldgladiator.png);
} 
```

而这个只是为了好玩：http: [//jsfiddle.net/eRVpL/23/](http://jsfiddle.net/eRVpL/23/)尝试点击角色。它使用没有 JavaScript 的复选框和标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T17:10:53.443

尝试使用`z-index`以获得你想要的东西。您将能够使该对象在某个页面上看起来隐藏，直到您通过鼠标单击或悬停将其显示出来。你也可以制作一个基本上是剪影的绿色图像，并将它分成三个不同的部分，给它们一点精确的定位（每个都有自己的分区）并有一点 z-index，然后你就得到了. 您可能还想将实际角色分成三部分以使其更容易。

# c++ - 如何使用 dlib c++ 库编写基于套接字的应用程序？

> ID：15686400
> 
> 赞同：0
> 
> 时间：2013-03-28T15:52:42.680
> 
> 标签：c++, c, sockets, dlib

我想用 c++ 语言和 dlib c++ 库开始套接字编程。但是 dlib.net 网站上没有完整的指南。有没有人可以帮助我使用 dlib 库在 c++ 中进行套接字编程？我不想用 .net 框架制作我的软件，因为我想编写一个便携式应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:15:41.803

[dlib 网站](http://dlib.net/api.html#sockets)上有一堆套接字编程示例。这些是完整的示例程序，旨在介绍不同的编程概念。只需单击“示例程序：”右侧的任何链接。[在http://dlib.net/network.html](http://dlib.net/network.html)中还有一个用于 dlib 中更高级别网络工具的完整页面。

# ios - 向主从应用程序添加第三个视图

> ID：15686410
> 
> 赞同：0
> 
> 时间：2013-03-28T15:53:08.657
> 
> 标签：ios, uitableview, uiviewcontroller, uinavigationcontroller, master-detail

我想创建一个主从应用程序，它在主从层次结构中包含 3 个视图。

第一个视图=>第二个视图=>第三个视图

当我创建一个主从项目时，XCode 创建了两个 ViewController；一个主视图控制器和一个详细视图控制器...我想将第三个视图控制器添加到项目中，并从 DetailView 控制器中的表视图打开这个新视图。

我对此有点困惑，我在项目中添加了一个新的 UIViewController 类，但我不明白如何在新视图和 DetailView 控制器之间创建关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:30:25.837

如果你想使用 DetailController -> YOur next Controller 你可以像这样使用它

打开你的故事板并在那里添加一个视图控制器为这个视图控制器设置一个唯一的标题 - 你可以在右侧菜单中的类似盾牌图标下找到这个选项。随意设置标题（比如说 my_detailed_controller）

然后，如果您想从详细视图控制器转到更详细的控制器，您可以调用此代码段：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
YOURVIEWCONTROLLER *lvc = [storyboard instantiateViewControllerWithIdentifier:@"my_detailed_controller"];
[self.navigationController pushViewController:lvc animated:YES]; 
```

# connection - 如何控制已建立的最大连接数

> ID：15686416
> 
> 赞同：0
> 
> 时间：2013-03-28T15:53:34.697
> 
> 标签：connection, netty, max, backlog

使用netty编程时，出现一个问题：“控制已建立的最大连接数”有没有这样的方法可以实现这个功能？

就像：“serverBootstrap.option(ChannelOption.SO_BACKLOG,100);” 用于设置未接受队列连接的最大数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:51:48.837

您自己编写了这样的功能。例如，您可以计算处理程序中的活动连接数，并在活动连接数超过限制或停止接受任何内容时关闭任何额外的传入连接。

# php - 正确使用 echo json_encode(array('error' => false/true.

> ID：15686417
> 
> 赞同：2
> 
> 时间：2013-03-28T15:53:35.143
> 
> 标签：php, json

我正在构建一个假设回答 jquery ajax 调用的函数。我对 PHP 很陌生，并且新人学会了如何正确使用 echo `json_encode(array('error' => false/true;`。在这种特定情况下，想要对一个名为`$list`. 我的代码：

```
<?php
 if (!empty($_GET['id'])) {
   $id = $_GET['id'];

   try {
     $objDb = new PDO('mysql:host=localhost;dbname=blankett', 'root', 'root');
     $objDb->exec('SET CHARACTER SET utf8');

     $sql = "SELECT * FROM `forms2` where `master_id` = $id";
     $list = ($objDb->query($sql));

     foreach ($list as $row) {
        $out = array(
            '<tr>' . 
             '<td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td>'.
             '<td>'.$row['date_added'].'</td>' . 
            '</tr>');
     }
     echo json_encode(array('error' => false, 'list' => implode('', $out)));

    /*** close the database connection ***/
    $objDb = null;
   }
   catch(PDOException $e)
   {
     echo $e->getMessage();
   }
 } else {
     echo json_encode(array('error' => true));
 }
?> 
```

所以问题一般来说是你如何使用`json_encode(array('error' => false/true;`以及在这种特定情况下我将如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:59:24.733

第一个循环仅将从**$list**检索到的最后一行分配给**$out**。其次，内爆不给你一个数组，而是将一个数组作为参数并返回由你提供的分隔符分隔的字符串。

[php.net/内爆](http://php.net/implode)

这是您要执行的操作：

```
 $out = array();
     foreach ($list as $row) {
       $out[] = '<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'] .   
               '</a></td><td>'.$row['date_added'].'</td></tr>';
     }

     echo json_encode('error' => false, 'list' => $out); 
```

或者如果你试图传递一个字符串而不是一个数组，那么像你一样使用 implode`$out`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:01:46.407

你可以这样做：

```
 $result = true;

    echo json_encode(array("error"=>$result
                               )); 
```

进而：

```
 $.ajax({
    type: "POST",
    url: "yourfile.php",
    data : "data1="+yourdata1+"&data2="+yourdata2,
    dataType: "json",
    success: function (data) {
    var error = data['error'];
    if(error === false){
    //do something                                                  
    }
if(error === true) {
    //do something else     
}
   }
      });//end ajax 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:16:15.163

一般来说，您可以直接将 json_encode 与您的数据一起使用，而无需“内爆”它或类似的东西。

如果 $out 是一个数组数组，那么您的代码：

```
echo json_encode(array('error' => false, 'list' => implode('', $out))); 
```

会产生：

```
{ result: false, list: 'Array,Array,Array' } 
```

相反，您应该只允许 json_encode 完成它的工作：

```
echo json_encode(array('error' => false, 'list' => $out)); 
```

这会给你：

```
{ result: false,
  list:
   [ [ 1, 2, 3 ],
     [ 4, 5, 6 ],
     [ 7, 8, 9 ] ] } 
```

然而，前面关于你的循环的评论很重要。您的循环在每次迭代时重新分配 $out 变量。您肯定要添加 []= 而不是 =。这是 PHP 中的一个快捷方式，意思是“将它推送到我的数组上”。[它实际上是array_push()](http://php.net/manual/en/function.array-push.php)的快捷方式

```
foreach ($list as $row) {
  $out []= array('<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td>  <td>'.$row['date_added'].'</td></tr>');
} 
```

最后，您的表格行不必*是*一个数组，除非那是您想要的。

# javascript - 滚动定位时固定标题

> ID：15686423
> 
> 赞同：0
> 
> 时间：2013-03-28T15:53:46.027
> 
> 标签：javascript, css

我有一个问题，我在滚动时有一个固定的标题，但是当你向下滚动时，标题不是固定的，因为另一个区域的位置是绝对的。

我的 HTML：

```
<div class="titleBar">
 <div class="container">
 <h1 class="titleBar-title">Title 1</h1>
 <p class="titleBar-subTitle">Title 2</p>
</div>

<div id="subnav">
 <div class="subnav-inner">
   <ul class="subnav-list nav">
     <li><a href="#salt">Salt</a></li>
     <li><a href="#pepper">Pepper</a></li>
   </ul>
 </div>
</div>
</div> 
```

我的 CSS：

```
.subnav-fixed {
position: fixed;
bottom: auto;
top: 0;
padding-top: 10px;
z-index: 99;
-webkit-box-shadow: 0 0 40px 0 rgba(0,0,0,0.15);
box-shadow: 0 0 40px 0 rgba(0,0,0,0.15);
}

#subnav {
width:100%;
height:40px;
background:#FFF;
position: absolute;
bottom:0;
left:0;
z-index:99;
} 
```

这是我的 JavaScript：

```
var myHeader = $('#subnav');
myHeader.data( 'position', myHeader.position() );
$(window).scroll(function(){
    var hPos = myHeader.data('position'), scroll = getScroll();
    if ( hPos.top < scroll.top ){
        myHeader.addClass('subnav-fixed');
    }
    else {
        myHeader.removeClass('subnav-fixed');
    }
});

function getScroll () {
    var b = document.body;
    var e = document.documentElement;
    return {
        left: parseFloat( window.pageXOffset || b.scrollLeft || e.scrollLeft ),
        top: parseFloat( window.pageYOffset || b.scrollTop || e.scrollTop )
    };
} 
```

取自这篇文章[Fixed header while scroll](https://stackoverflow.com/questions/13795283/fixed-header-while-scroll)

我想保留 'subnav'`position:absolute`我该怎么做？我觉得 JavaScript 需要更改，但我不确定要输入什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:23:43.617

这就是我在我的网站[jsFiddle上所做的](http://jsfiddle.net/apaul34208/Tbj6B/)

```
$(window).scroll(function () {
    $('#sticky').toggleClass('scrolling', $(window).scrollTop() > $('#stickyX').offset().top);

});

 .scrolling {
    position: fixed;
    top: 0px;
    width: 98%;
    max-width: 940px;
    z-index:99999999999;
    transition:all 1s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:29:13.220

查看[`position: sticky;`](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)纯 CSS 解决方案（仅限 webkit，atm。）和必要的 JS 后备。

# javascript - 从输入字段中删除空格

> ID：15686428
> 
> 赞同：0
> 
> 时间：2013-03-28T15:53:58.363
> 
> 标签：javascript, jquery, input

我知道有很多关于这个的话题，我检查了很多都没有成功。

我的表单中有一个输入字段，当它包含空格时会产生问题。我已经将其设为必需，因此不可能将其留空或仅添加一些空格。

我注意到的是，我可以添加一个文本，然后在末尾或开头添加一个空格，我的工作就会失败。

实际上，根本不应该允许有任何空格，也不应该在文本中间，但那是 99% 不会发生。我知道你只能在开始和结束时用修剪功能去掉空格？

一些乐于助人的人可以帮助我添加到我的代码中它可以工作的东西......？

目标是当我按下提交时，我的五个输入字段中的值应该在开头或结尾没有空格。

这是我的整个代码。

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <title>Mathys Lieferungen</title>
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="jquery-ui.1.10.1.min.js"></script>
    <script type="text/javascript" src="jquery.ui.timepicker.js"></script>
    <script type="text/javascript" src="jquery.ui.progressbar.js"></script>
    <script type="text/javascript" src="validate.js"></script>
    <script type="text/javascript">
    function changeHiddenInput (objDropDown)
        {
            document.getElementById("hiddenInput").value = objDropDown.value; 

        }
    </script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.timepicker').timepicker(); 
            $('.datepicker').datepicker({dateFormat: 'dd.mm.yy'});
            $('.button').button();
            $('#myForm').submit(function() {
                $('#formBox').hide();
                var lnr = $("input[name=lnr]");
                var auto_refresh = setInterval(
                function()                                        
                {                                        
                $('#csv').load(lnr.val()+'_JobStatus.csv?'+new Date().getTime(),function(data){$(this).html(data).fadeIn("slow");});          });
                $('#working').show();
                $("#progressbar").progressbar();
                var value = 0;
                var timer = setInterval (function ()
                {
                  $("div#progressbar").progressbar ("value", value);
                  value++;
                  if (value > 100) value = 0;
                }, 60);

                $url = "/BT_Mathys_LNr_export_0.1/services/BT_Mathys_LNr_export?method=runJob";
                $i = 1
                $('#myForm :input').each(function() {
                    $inputName = $(this).attr('name');
                    if ($inputName != 'submit') {
                        $url = $url + "&arg"+$i+"=--context_param%20"+$inputName+"="+$(this).val();
                        $i++
                    };
                });
                $('#runArea').load($url, function(){
                    $('#csv').hide();
                    $('#working').hide();
                    $('#resultBox').show(); 
                    $html = $('#runArea').html();
                    $('#csv').text($html);
                });
                return false;
            });
        });
    </script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.1/themes/ui-lightness/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="style2.css">
    <style type="text/css">
        body { 
            background-color:#FFD8B2; 
            font-family: 'Century Schoolbook', Calibri,Arial;
            font-size: 1em;
            }
        #logo {
            position:absolute;
            top:10px;
            right:10px;
            }               
        h1 {
            margin-bottom:20px;
            font-size: 1.5em; 
            font-weight:bold; 
            text-align:center;
            }
        #formBox, #resultBox, #working{
            width:50%;
            margin:auto;
            margin-top:20%;
            }
        #resultBox, #working {
            display:none;
            }
        #runArea{
            border:none;
            height:0;
            width:0;
            }
        .button { font-family:Garamond; font-size: 15px; }
        .ui-timepicker { font-family:Garamond; font-size: 11px; margin-left:40px }
        .ui-datepicker { font-family:Garamond; font-size: 11px; margin-left:40px }
        .ui-timepicker-hour-cell, .ui-timepicker-minute-cell { cursor:pointer; }
    </style>
</head>
<body>
    <div id="logo">
        <img src="\\rzwsrv006\daten\Opacc_Betrieb\Marcel Mathys\Mathys\FLYER_LOGO.png" alt="Flyer" width="260" height="48">
    </div>
    <div id="formBox">
        <h1>Lieferungen Mathys</h1>
        <form method="get" id="myForm">
            <table width="290px" height="auto" style="margin:auto;">
                <tr>
                    <td><label for="lnr">Liefernummer:</label></td>
                    <td class="arg"><input type="text" name="lnr" class="required"></td>
                </tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <!--<tr>
                    <td><label for="vAbladezeit_spaet">Abladezeit spät:</label></td>
                    <td><input type="text" name="vAbladezeit_spaet" class="timepicker"></td>
                </tr>
                <tr>
                    <td><label for="vAbladezeit_frueh">Abladezeit früh:</label></td>
                    <td><input type="text" name="vAbladezeit_frueh" class="timepicker"></td>
                </tr>--> 
                <tr>
                    <td><label for="vAbladetermin">Abladetermin:</label></td>
                    <td><input type="text" name="vAbladetermin" class="datepicker"></td>
                </tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <tr><td></td></tr>                  
                <tr>
                    <td><label for="vLadezeit_spaet">Ladezeit spät:</label></td>
                    <td><input type="text" name="vLadezeit_spaet" class="timepicker"></td>
                </tr>
                <tr>
                    <td><label for="vLadezeit_frueh">Ladezeit früh:</label></td>
                    <td><input type="text" name="vLadezeit_frueh" class="timepicker"></td>
                </tr>
                <tr>
                    <td><label for="vLadedatum">Ladedatum:</label></td>
                    <td><input type="text" name="vLadedatum" class="datepicker"></td>
                </tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <tr><td></td></tr>  
                <tr>

                    <td>Mitarbeiter:</td>
                    <td><select id="dropdown" name="dropdown" onchange="changeHiddenInput(this)">
                    <option value="e.schaer@flyer.ch" name="email">Ester Schär</option>
                    <option value="i.gerber@flyer.ch" name="email">Irene Gerber</option>
                    <option value="m.maeder@flyer.ch" name="email">Marion Mäder</option>
                    <option value="apelsinrepubliken@hotmail.com" name="email">Jens Frejd</option>
                    <option value="marcel.lack@symbium.ch" name="email">Marcel Lack</option>
                    </select></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="hidden" name="hiddenInput" id="hiddenInput" /></td>
                </tr>
                <tr>
                    <td><p style="text-align:center;"><input type="submit" name="submit" id="submit" value=" Ausführen " class="button"></p></td>
                    <td></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="working" onkeydown ="my_onkeydown_handler();">Verarbeitung läuft, bitte warten und job nicht abbrechen. Job läuft im Hintergrund<div id="progressbar">
    </div>

    </div>
    <div id="resultBox">
        <h1 id="csv"></h1>
        <p style="text-align:center;"><input type="button" onClick="location.href='./'" value=" << Neue Lieferung ausführen " class="button"></p>
        <!--<p style="text-align:left;">Rückmeldung:<br>
        <textarea id="csv" style="width:100%;height:300px;"></textarea>  
        </p>-->
    </div>
    <iframe id="runArea" />
</body> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T16:01:46.343

如何仅使用正则表达式替换空格：

```
str.replace(/\s/g, ""); 
```

# blackberry - BlackBerry Packager for Android 错误 - 处理您的请求时出错

> ID：15686432
> 
> 赞同：1
> 
> 时间：2013-03-28T15:54:02.627
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

今天，我决定使用“BlackBerry Packager for Android”重新打包、签名并将我的 Android 应用程序发布到 Windows 平台。[https://bdsc.webapps.blackberry.com/android/bpaa/app-signing-bar-creation](https://bdsc.webapps.blackberry.com/android/bpaa/app-signing-bar-creation)

但是它似乎不起作用，我收到以下错误：

> 很抱歉，处理您的请求时出错。该信息已注册，我们正在努力尽快修复此问题。

我在网上搜索过，似乎没有答案。

有没有人遇到过这个问题或知道我该如何解决？

谢谢一百万，莎拉。

# gcc - 与 gcc 中的相对路径链接

> ID：15686437
> 
> 赞同：5
> 
> 时间：2013-03-28T15:54:11.847
> 
> 标签：gcc, linker

我将使用一个简化的例子来解释我的情况。

我有**两个**libme.so 文件，它们具有不同的实现，并且我已经验证它们可以同时在一个设计中工作。一个位于 ./root/v1/ 另一个位于 ./root/v2/

我的“主”.so 文件与这两个 libme.so 文件链接，位于 ./root/libtest.so

现在我需要使这些东西可重定位。也就是说，如果我将整个“根”目录复制到另一个位置甚至另一台机器（假设二进制兼容），事情应该仍然可以正常工作。

我的问题是，要完成这项工作，我应该使用什么 gcc 命令行来构建 libtest.so？

我试过以下两种：

（1）（假设我在“根”目录中）

```
>gcc -shared -o libtest.so ./v1/libme.so ./v2/libme.so 
```

这将使 libtest.so 具有绝对路径的这两个链接依赖项。这可以通过 ldd 进行验证：

```
>ldd libtest.so
/home/design/root/v1/libme.so
/home/design/root/v2/libme.so 
```

显然路径是固定的。因此，一旦我重新定位“根”目录，它就无法在运行时找到 libme.so。注意设置 LD_LIBRARY_PATH 在这种情况下不起作用，因为来自 ldd 的路径是绝对路径。运行时加载程序不会搜索 LD_LIBRARY_PATH 来查找 libme.so。

(2)

```
>gcc -shared -o libtest.so -lme -L./v1 -L./v2 
```

这只有在我们有一个版本的 libme.so 时才有效。在这种情况下，./v2 中的版本将不会被链接。-rpath 也存在同样的问题。

鉴于此，我还有什么其他选择？

注意有一些限制： (1) 不能将 libme.so 重命名为其他名称，例如 libme_v1.so (2) libtest.so 必须在两个版本的 libme.so 中链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:11:29.280

泰皮克是对的。事实证明，这只是我的一台机器上发生的问题。切换到另一台 RHEL5.8 机器，一切就绪。看起来原机安装了某人定制的链接器。

# javascript - Scrapy调用javascript函数

> ID：15686439
> 
> 赞同：0
> 
> 时间：2013-03-28T15:54:17.027
> 
> 标签：javascript, scrapy, web-crawler

我正在使用scrapy来抓取这个网站：[http ://egypuppy.com/e-store.php?fl=1](http://egypuppy.com/e-store.php?fl=1)

在右侧的下拉菜单中，我可以选择一个品种来查看狗，这是下拉菜单中 li 元素之一的示例：

> href="javascript:getDogForSale('0','1');setBreedName('Affenpinscher');" id="无图像"

有没有办法使用scrapy调用这个JS函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:41:21.163

Scrapy 本身不支持渲染 JavaScript，因此您需要推出自己的解决方案，但这项工作涉及多个[反应](https://www.google.com.mx/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&cad=rja&ved=0CEQQjBAwBA&url=http://en.wikipedia.org/wiki/Reactor_pattern&ei=YnJUUZv-AYabyQHW14CIBw&usg=AFQjCNGZAaoSclV4agIMribyMAOdYKFEuw&sig2=X9_fnnqQfr_qU_RRNwCaSA&bvm=bv.44442042,d.aWc)器，这些反应器不是胆小的人编写的。

以下是一些集成选项：

*   [硒](http://seleniumhq.org/docs/03_webdriver.html)
*   [蜘蛛猴](https://pypi.python.org/pypi/python-spidermonkey)
*   [网络套件](http://wiki.python.org/moin/WebKit)

# jquery - jQuery 性能：css 与动画方法

> ID：15686443
> 
> 赞同：0
> 
> 时间：2013-03-28T15:54:27.377
> 
> 标签：jquery, performance, css, jquery-animate

我试图避免使用`animation`，因为它比 CSS3 动画慢。

我只是想知道使用`css`方法是否仍然比`animation`使用`transform3d`.

```
$(this).animate({'opacity' : 'show', 'top' : topPosition+'px'}); 
```

对比

```
$(this).css('top', topPosition+'px'); 
```

如您所见，我不能直接使用css3 `transform3d`，因为我需要动态生成的位置参数。

**CSS**

```
#flashMessage{  
    position: relative;
    transition: all 1.4s ease-in-out;
    -webkit-transition: all 1.4s ease-in-out; /** Chrome & Safari **/
    -moz-transition: all 1.4s ease-in-out; /** Firefox **/
    -o-transition: all 1.4s ease-in-out; /** Opera **/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:05:01.227

jquery 动画与 jquery css 不同，第一个它在设定的时间内为 elm 设置动画，而另一个它只是立即应用 css 属性而不设置动​​画。

css 转换可能会更快，但并非所有浏览器都支持它，尤其是 <9。

您的动画代码中有语法错误，它应该是：

```
$(this).animate({'opacity' : 1, 'top' : topPosition+'px'}); //+'px' is not required it would work with/without it. 
```

如果你想让你的动画在所有浏览器上工作，我会使用 animate，否则如果你想让它在主要浏览器中工作，只有 css 转换会是一个更好的选择，尽管它没有给你 jquery 的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:29:47.860

我什么时候可以使用 CSS 动画，但倾向于使用 jquery 添加和删除动画类，以便动画在我想要的时候开始，在我想要的时候停止。

将它们一起使用会很有用。

当然，在使用 CSS 动画时，您需要考虑浏览器会处理它。

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

# java - 客户端或服务器上的 NoRouteToHostException？

> ID：15686445
> 
> 赞同：12
> 
> 时间：2013-03-28T15:54:39.480
> 
> 标签：java, networking, routing

我正进入（状态

```
Caused by: java.net.NoRouteToHostException: No route to host
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:564)
at sun.reflect.GeneratedMethodAccessor638.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.commons.httpclient.protocol.ReflectionSocketFactory.createSocket(ReflectionSocketFactory.java:140)
at org.apache.commons.httpclient.protocol.SSLProtocolSocketFactory.createSocket(SSLProtocolSocketFactory.java:130)
at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 
```

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/NoRouteToHostException.html)说

> 表示尝试将套接字连接到远程地址和端口时发生错误的信号。通常，由于中间防火墙或中间路由器已关闭，无法访问远程主机。

这个错误是在客户端还是远程端，或者它可以是其中任何一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T16:33:45.493

基本上它说您的客户端无法连接到服务器，因为客户端计算机无法访问该地址。

请通过命令提示符 (Windows) 或终端（基于 Unix）中的*ping*命令检查您要连接的地址是否可访问：

```
ping <address> 
```

或者如果它是一个网络服务器，你可以尝试在你的网络浏览器中检查它。
在大多数情况下，ping 命令对我很有帮助，因为我知道为什么我无法连接到该地址。它可能是一个错误的地址，或者像 javadoc 建议的那样，是防火墙的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T15:59:22.373

任何一个。它可能是客户端计算机上阻止传出呼叫或另一端某处的防火墙。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-26T14:42:51.927

ping 可能会提供响应，但应用程序仍可能无法连接。如果是这种情况，我建议使用 telnet 尝试使用所需端口连接到主机，`telnet host.address port`

如果连接被拒绝，则需要允许主机上的端口。它成功了，但应用程序仍然无法连接：

1.  验证应用程序中使用的地址：端口与 telnet 测试中使用的相同。
2.  它可能是客户端上的本地端口阻止连接，在这种情况下，您需要允许客户端上的端口

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-27T13:09:22.650

就我而言，它是这样解决的：

1 - 使用 'yarn cache clean' 或 'npm cache clean --force' 清除缓存

2 - 之后重新启动电脑。

如果您清除缓存但不重新启动，则数据仍将存储在网络上的“某处”，因此端口将无法连接，它仍然很忙。重启后就可以顺利连接了。

我希望我有帮助！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-03-26T14:21:42.493

我有同样的问题，并通过禁用双方的防火墙解决它：

systemctl 禁用防火墙

服务防火墙停止

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2018-07-05T22:04:49.533

我有同样的问题，我确实在主机服务器上运行了 iptables flush，这解决了这个问题。

```
# iptables --flush 
```

# css - element~element 和 element+element 有什么区别

> ID：15686447
> 
> 赞同：1
> 
> 时间：2013-03-28T15:54:45.243
> 
> 标签：css, css-selectors

这两个 CSS 选择器有什么区别。我从他们那里得到了相同的结果。

HTML：

```
<div>One</div>
<p>Two</p> 
```

[CSS 示例 #1](http://jsfiddle.net/Rpufr/)：

```
div+p {
background:red;
} 
```

这使`<p>`元素具有红色背景。

[CSS 示例 #2](http://jsfiddle.net/S2sM5/)：

```
div~p {
background:red;
} 
```

这也为`<p>`元素提供了红色背景。

那么......这两个选择器有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:55:55.093

来自[w3.org](http://www.w3.org/TR/selectors/)：

> **E + F**紧跟在 E 元素之前的 F 元素
> 
> **E ~ F**一个 F 元素，前面有一个 E 元素

重要的词是**“立即”**。

在您的 HTML 中，由于没有其他元素，因此您看不到差异，但在一般情况下这当然很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:10:31.497

**直系兄弟姐妹：**

> 直接跟在 div 元素之后的 div + pp 元素

p + * 任何直接跟在 p 元素之后的元素

**间接兄弟**

> div 元素之后的任何位置的 div ~ pp 元素

p ~ * p 元素之后的任何元素

**参考： http:** [//www.princexml.com/doc/6.0/selectors/](http://www.princexml.com/doc/6.0/selectors/)

# verilog - 在 always 块下并行执行模块

> ID：15686448
> 
> 赞同：1
> 
> 时间：2013-03-28T15:54:46.587
> 
> 标签：verilog

我在verilog中编写了一个实现D触发器的模块，如下所示：-

```
module d_flip_flop(q,d,clk,reset); 
```

现在，我想使用这个模块实现 4 位移位寄存器。所以我必须在 always @(negedge clk) 块内并行执行四个 d 触发器。我不知道如何始终并行执行四个用户定义的模块（或如何实例化）。我不想要 4 位移位寄存器的直接行为实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:10:14.097

一种方法是创建 4 个实例，将其中一个的 q 输出连接到下一个的 d 输入：

```
wire [3:0] q;
d_flip_flop i0 (q[0], din , clk,reset);
d_flip_flop i1 (q[1], q[0], clk,reset);
d_flip_flop i2 (q[2], q[1], clk,reset);
d_flip_flop i3 (q[3], q[2], clk,reset); 
```

无需使用`always`块。

# c++ - 按名称获取进程 ID

> ID：15686450
> 
> 赞同：5
> 
> 时间：2013-03-28T15:54:49.577
> 
> 标签：c++, linux, process

我想在 Linux 下获得一个进程 ID 的名称。

有没有一种简单的方法可以做到这一点？

我在 C++ 上没有找到任何可以轻松使用的东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:01:03.457

如果追求“易于使用”，

```
char buf[512];
FILE *cmd_pipe = popen("pidof -s process_name", "r");

fgets(buf, 512, cmd_pipe);
pid_t pid = strtoul(buf, NULL, 10);

pclose( cmd_pipe ); 
```

是要走的路。

是的，这很丑，我知道。去阅读 pidof 源代码要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T15:59:34.530

您可以使用 中的信息`/proc`。

[这](http://proswdev.blogspot.com/2012/02/get-process-id-by-name-in-linux-using-c.html)是一个例子。

# r - 从 Excel 到 R 的日期，平台依赖性

> ID：15686451
> 
> 赞同：13
> 
> 时间：2013-03-28T15:54:50.280
> 
> 标签：r, excel, date, gdata, xls

我正在`xls`使用`gdata`. 我正在转换日期列，`as.Date`用于转换日期

根据手册`as.Date`，日期来源取决于平台，因此我正在确定相应地使用哪个来源

```
.origin <- ifelse(Sys.info()[['sysname']] == "Windows", "1899-12-30", "1904-01-01")
as.Date(myData$Date, origin=.origin) 
```

**但是，我想知道是否应该考虑*读取*文件的平台或*写入*文件的平台？**

对于它的价值，我目前正在一个没有 excel 的 linux 机器上测试代码，并且正确的日期是通过使用`origin="1904-01-01"`

* * *

*引用'?as.Date'*

```
 ## date given as number of days since 1900-01-01 (a date in 1989)
  as.Date(32768, origin = "1900-01-01")
  ## Excel is said to use 1900-01-01 as day 1 (Windows default) or
  ## 1904-01-01 as day 0 (Mac default), but this is complicated by Excel
  ## treating 1900 as a leap year.
  ## So for dates (post-1901) from Windows Excel
  as.Date(35981, origin = "1899-12-30") # 1998-07-05
  ## and Mac Excel
  as.Date(34519, origin = "1904-01-01") # 1998-07-05
  ## (these values come from http://support.microsoft.com/kb/214330) 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-17T11:22:56.173

你可以试试（非常）新的 exell 包：[https](https://github.com/hadley/exell) ://github.com/hadley/exell 。它将 Excel 日期加载到 POSIXct 中，根据文件是由 Windows 还是 Mac Excel 编写的，正确选择原点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:47:39.237

是的，您应该考虑文件的*写入*位置。Excel-Windows 似乎能够区分 Mac 编写的日期和 Win 编写的日期，但您得到的证据表明这些是源自 Mac 的 .xls 文件。

最安全的方法是在输入数据的 Excel 版本中工作，并使用格式菜单打开一个对话框，从中选择 as-Date 和自定义格式 yyyy-mm-dd。然后另存为 csv 文件，您将能够在适当的列位置使用 colClasses 向量“Date”导入 R。但这听起来好像是一个不可用的选项。

我想它不适用于您在 linux 机器上，所以这只是一个 Mac-whine：gdata-package 给出弃用警告，然后无法在 R 3.0.0 上安装 XLSX 支持文件，而普通的 Perl 5.8 安装在'/opt/local/bin/perl'。尽管 'gdata::findPerl' 能够成功找到它。

在这一点上，我认为应该将问题重定向到询问您是否可以诱使 gdata 函数检查文件的属性。在[查看了 xls 阅读的代码库之后，](http://search.cpan.org/~tmtm/Spreadsheet-ParseExcel-Simple-1.04/lib/Spreadsheet/ParseExcel/Simple.pm)我相当怀疑它，因为没有看到任何提及检查不同 xls 版本的内容。

在使用 Mac 版本的 Excel 创建的空白 xls 文件的末尾附近，使用文本编辑器查看我看到：

```
Worksheets˛ˇˇˇˇˇ ¿F$Microsoft Excel 97 - 2004 Worksheet˛ˇˇˇ8FIBExcel.Sheet.8˛ˇ
‡ÖüÚ˘Oh´ë+'≥Ÿ0îHPhÄ§
∞ºƒ'David WinsemiusDavid WinsemiusMicrosoft Macintosh Excel@ê˚á!Ë+Œ@ê'å-Ë+ŒG»˛ˇˇˇPICT¿KÄˇ 
```

另一个不同之处在于，Windows 版本的检查方式与将“Excel 2003 工作表”作为工作表类型相同，而 Mac 版本的检查方式是“Excel 97 - 2004”。因此，也许您可​​以强制 R 绕过在扫描“Macintosh”期间读取或 grepping 时触发的所有错误。也许 Linux-R 更能抵抗这种事情？

```
Error: invalid multibyte string at '<ff>' 
```

我还收到了一堆来自 grep 的警告，表明我可能无法“看到”某些字符串：

```
Warning message:
In grep("Macintosh", lin) : input string 1 is invalid in this locale 
```

您可能能够从 xls2csv.pl 中的 Perl 代码中劫持一些更强大的代码，该代码是 gdata 包的一部分。

# paypal - Paypal 按钮的价格因国家/地区而异

> ID：15686453
> 
> 赞同：1
> 
> 时间：2013-03-28T15:54:54.533
> 
> 标签：paypal, currency, country-codes

我有一个网站，我想包含一个 PayPal 按钮，以便客户可以直接在网站上购买，唯一的问题是我需要相同的按钮在不同的国家/地区以不同的方式显示（具有不同的价格和货币）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:05:52.253

PayPal 将为您进行货币转换，但如果您需要在不同的国家（ala 移动应用商店）设置不同的价格，那么您必须自己创建不同的按钮 - 为您希望定位的每个国家/货币设置一个按钮。然后，根据区域设置或请求 URL，您将显示正确的按钮代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:04:51.477

我建议使用 Geolocation JavaScript 代码。但是，用户在加载页面时必须授予权限。你可以看看这里：[http ://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)

或查看示例代码：

```
<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
   }
function showPosition(position)       {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
  }
</script> 
```

然后，您可以将经纬度数据传递给 api 以找到他们居住的城市/国家。希望它有所帮助！

# wordpress - wordpress wp_redirect 不工作

> ID：15686456
> 
> 赞同：0
> 
> 时间：2013-03-28T15:55:02.147
> 
> 标签：wordpress, redirect

您好，我有一个带有文件上传的前端表单，在提交 wp_redirect 之后，header() 也没有工作。

```
<?php if( 'POST' == $_SERVER['REQUEST_METHOD'] ) { // if form has been submitted
update_field('field_2', $title, $postID);
update_field('field_3', $efternamn, $postID);
update_field('field_4', $epost, $postID);
update_field('field_6', $telefon, $postID);
update_field('field_7', $motiv, $postID);
if (!function_exists('wp_generate_attachment_metadata')){
require_once(ABSPATH . "wp-admin" . '/includes/image.php');
require_once(ABSPATH . "wp-admin" . '/includes/file.php');
require_once(ABSPATH . "wp-admin" . '/includes/media.php');
}
if ($_FILES) {
foreach ($_FILES as $file => $array) {
if ($_FILES[$file]['error'] !== UPLOAD_ERR_OK) {
return "upload error : " . $_FILES[$file]['error'];
}
$attach_id = media_handle_upload( $file, $postID );
}
}
//if ($attach_id > 0){
//and if you want to set that image as Post then use:
//update_post_meta($postID,'_thumbnail_id',$attach_id);
//}
update_field('field_5', $attach_id, $postID);
$dialog_url='http://tatchit.com';
wp_redirect(home_url());
}
?> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:22:14.593

解决了，在functions.php中添加了一个带有函数的add_action()，如下所示：

```
 add_action( 'wp_loaded', 'submitBlogForm', 10, 2);
 function submitBlogForm($postID,$attach_id){
if( isset( $_POST['submitBlogForm'] ) ):
    // process form, and then
    //$postID = $_POST['postID']; 
 $title = $_POST['title']; 
 $efternamn = $_POST['efternamn']; 
 $epost = $_POST['epost'];
 $motiv = $_POST['motiv'];
 $telefon = $_POST['telefon'];
    update_field('field_2', $title, $postID);
    update_field('field_3', $efternamn, $postID);
    update_field('field_4', $epost, $postID);
    update_field('field_6', $telefon, $postID);
    update_field('field_7', $motiv, $postID);

   update_field('field_5', $attach_id, $postID);

    wp_redirect( home_url() );
endif;
 } 
```

然后在我的模板文件中：

```
if (!function_exists('wp_generate_attachment_metadata')){
require_once(ABSPATH . "wp-admin" . '/includes/image.php');
require_once(ABSPATH . "wp-admin" . '/includes/file.php');
 require_once(ABSPATH . "wp-admin" . '/includes/media.php');
}
if ($_FILES) {
foreach ($_FILES as $file => $array) {
if ($_FILES[$file]['error'] !== UPLOAD_ERR_OK) {
return "upload error : " . $_FILES[$file]['error'];
}
$attach_id = media_handle_upload( $file, $postID );
}
 }

do_action( 'wp_loaded', $postID,$attach_id); 
```

# math - 具有自定义宽度的贝塞尔曲线 - 功能区

> ID：15686457
> 
> 赞同：1
> 
> 时间：2013-03-28T15:55:04.830
> 
> 标签：math, html5-canvas, bezier

如何绘制具有自定义宽度的 2D 贝塞尔曲线 - 类似于丝带？由于特定原因，仅设置 lineWidth 是不够的。

有我可以使用的图书馆吗？我用谷歌搜索了很多，但没有发现任何有用的东西。

[编辑：我的问题是三次贝塞尔曲线描边轮廓的](https://stackoverflow.com/questions/408457/outline-of-cubic-bezier-curve-stroke)副本以及可能[如何抵消三次贝塞尔曲线？](https://stackoverflow.com/questions/4148831/how-to-offset-a-cubic-bezier-curve)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:42:14.200

**这是用于形成单个贝塞尔形状的贝塞尔曲线组合。**

![在此处输入图像描述](../Images/9d5de6259c9f96452145cd5e5a071cbd.png)

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/rCMdX/](http://jsfiddle.net/m1erickson/rCMdX/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas1=document.getElementById("canvas1");
    var ctx1=canvas1.getContext("2d");
    var canvas2=document.getElementById("canvas2");
    var ctx2=canvas2.getContext("2d");

    drawUniformRibbon(50,50,100,35,175,175,350,100,8);
    drawVariableRibbon(50,50,75,25,175,175,350,100,8,18);

    function drawUniformRibbon(x1,y1,cx1,cy1,cx2,cy2,x2,y2,width){
      ctx1.fillStyle = "red";  
      ctx1.beginPath();  
      ctx1.moveTo(x1, y1-width);  
      ctx1.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2+width);
      ctx1.lineTo(x2, y2+width*2);  
      ctx1.bezierCurveTo(cx2, cy2+width, cx1, cy1+width, x1, y1);
      ctx1.lineTo(x1, y1);
      ctx1.closePath();  
      ctx1.fill();
      ctx1.stroke(); 
    }

    function drawVariableRibbon(x1,y1,cx1,cy1,cx2,cy2,x2,y2,startWidth,endWidth){
      ctx2.fillStyle = "yellow";  
      ctx2.beginPath();  
      ctx2.moveTo(x1, y1-startWidth);  
      ctx2.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);
      ctx2.lineTo(x2, y2+endWidth);  
      ctx2.bezierCurveTo(cx2, cy2, cx1, cy1, x1, y1+startWidth);
      ctx2.lineTo(x1, y1);
      ctx2.closePath();  
      ctx2.fill();
      ctx2.stroke(); 
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas1" width=400 height=200></canvas><br/>
    <canvas id="canvas2" width=400 height=200></canvas>
</body>
</html> 
```

# git - 保持 2 个远程存储库始终同步

> ID：15686463
> 
> 赞同：0
> 
> 时间：2013-03-28T15:55:16.440
> 
> 标签：git, github

我在 github 中有一个组织帐户，其中有一个名为 A 的存储库。由于 github 为用户提供的 ACL 很差，我希望有一个名为 B 的另一个存储库，它与存储库 A 同步。

存储库 B 还必须：

*   使所有分支与 A 同步。
*   拥有 A 的所有提交历史

基本上，存储库 B 必须是 A 的备份。

我需要这个，因为我需要在存储库 B 上设置不同的 ACL。

实现这一目标的最佳方法是什么？

更新：我试过这个：

```
git clone B
git remote add upstream A
git fetch upstream
git merge upstream/master
git push origin master 
```

这实际上有效：B 中的主服务器与 A 中的主服务器同步，但我不知道如何使用 A 中的分支来完成此操作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T23:59:06.207

既然您说“存储库 B 必须是 A 的备份”，我假设 B 是只读的。如果是这样，您可能需要为此使用“镜子”。即像这样设置你的B repo：

```
git clone --mirror A 
```

进而

```
git remote update 
```

每当您需要更新 B.

不过有几点注意事项：

*   执行更新时，对 B 的提交（如果有）将丢失。
*   正如 KDE 项目最近对我们所说，镜像[太完美了](http://jefferai.org/2013/03/24/too-perfect-a-mirror/)。因此，如果 A 以某种方式损坏，那么 B 也可能反映损坏...出于备份目的，您可能需要查看此问题的答案：[备份本地 git 存储库](https://stackoverflow.com/questions/2129214/backup-a-local-git-repository)。

# oop - 什么是方法重载？

> ID：15686466
> 
> 赞同：7
> 
> 时间：2013-03-28T15:55:18.920
> 
> 标签：oop, overloading

我发现资源说方法重载是一种语言根据上下文使用具有不同结果的相同方法的能力。不知何故，当我阅读其他定义时，我觉得这不是整个定义。还有更多方法重载吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T15:57:34.793

这只是一种非常笼统的描述方式。方法重载允许您使用单个方法名称，但“重载它”（提供多个版本）取决于“上下文”（通常是传入的参数的类型或数量）。由于每种方法都是独立的，因此它们可能会导致“不同的结果”。

例如，使用 C#，您可以编写：

```
void Foo()  // Version with no arguments
{
}

void Foo(int arg) // Version with a single int
{
}

void Foo(string arg1, double arg2) // Version with string and double parameters
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:02:19.500

首先，你应该知道什么是编程中的签名。函数的签名是它的表示；函数的名称及其参数决定了它的签名。

重载意味着更改函数的签名以满足我们的需求。

看看下面的例子：

```
int sum(int x, int y, int z) {
    return x + y + z;
}

int sum(int x, int y) {
    return x + y;
} 
```

现在，`sum()`可以通过两种不同的方式调用该函数：您可以使用两个参数调用它，也可以使用三个参数调用它。您已更改其签名以满足您的需求。不是为两个参数编写单独的函数，而是将负载放在同一个函数上，这就是为什么这被称为重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:57:56.740

在这里，您可以拥有许多具有不同参数的同名方法。

```
public void kittens(String paws) {

}

public void kittens(String paws, boolean tail) {

} 
```

两者都可以相互独立地调用

```
kittens("fat"); 
```

或者

```
kittens("thin", true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:57:40.867

是某些语言创建具有相同名称但`input`/`otput`参数不同的方法/函数的能力。

一个经典的例子是`constructor overloading`Java 中的类示例：

```
 //Constructor without parameters
  public User() {
  }

 //Constructor with only one parameter
 public User(String username)
 {
 this.username = username;
 }

 //Constructor with two parameters
 public User(String username, int age)
 {
   this.username=username;
   this.age=age;
 } 
```

您有一个具有不同构造函数的类，它们接受不同的参数，正如您所见，它们的`signature`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:59:00.430

这种情况下的上下文由方法的参数签名决定，即参数的数量和类型。

例如：

```
methodName(int x, int y, int w, int h)
methodName(Vector x) 
```

第一种方法实现可以替代：

```
methodName(new Vector(x, y, w, h)) 
```

# jquery - jqgrid 动态列 - 在页脚显示数据

> ID：15686467
> 
> 赞同：2
> 
> 时间：2013-03-28T15:55:22.860
> 
> 标签：jquery, grid, footer

我有个问题...

我有一个 jqgrid 显示一些数据，但列是动态的。电网运行良好。这是我的代码：

```
...
var colMode = [];
...
var columnas = data.d;
$.each(columnas, function (index, col) {
...
colMode.push({ name: col.ColumnName, index: col.ColumnName, width: '100%', align: 'right' });
...
$("#gridCalendario").jqGrid({
                datatype: function (pdata) { getData(pdata); },
                height: 'auto',
                colModel: colMode,
.... 
```

问题是我想在页脚上显示数据，但我不能这样做，因为我不知道如何动态指示列的名称。以下代码显示了我是如何尝试这样做的：

```
 function sumarValores() {

        var sumaHa = 0;

        var columnNames = jQuery("#gridCalendario").jqGrid('getGridParam', 'colNames');

        $('#gridCalendario').jqGrid('footerData', 'set', { Items: 'TOTAL:' });

        for (var z = 0; z < columnNames.length; z++) {
            var colN = columnNames[z];
            $('#gridCalendario').jqGrid('footerData', 'set', { colN: parseFloat(sumaHa).toFixed(2) });
        }
    } 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:13:19.817

我用以下功能解决了这个问题：

```
 function sumarValores() {

        var sumaHa = 0;

        var columnNames = jQuery("#gridCalendario").jqGrid('getGridParam', 'colNames');

        $('#gridCalendario').jqGrid('footerData', 'set', { Items: 'TOTAL CUENTA:' });

        for (var z = 0; z < columnNames.length; z++) {
            var colN = columnNames[z];

            var obj = '[{"' + colN + '": "' + parseFloat(sumaHa).toFixed(2) + '"}]';

            var colFoot = JSON.parse(obj);

            $('#gridCalendario').jqGrid('footerData', 'set', colFoot[0]);

        }

    } 
```

# php - LDAP 搜索以查找哪个组 x 用户属于 PHP

> ID：15686474
> 
> 赞同：1
> 
> 时间：2013-03-28T15:55:47.003
> 
> 标签：php, active-directory, ldap

我正在使用 Microsoft Active Directory 来允许人们访问我的网络。现在我正在尝试构建一个 PHP 页面，以便可以访问我的网络的相同用户可以访问我的 PHP 页面。但是，我想赋予人们权利，所以如果您在经理组中，那么您可以编辑页面，如果不是，那么您只能查看等等。

我一直在阅读和查看示例，但我不了解 Active Directory 的基础。这个例子很详细[http://www.php.net/manual/en/function.ldap-search.php#107545](http://www.php.net/manual/en/function.ldap-search.php#107545)但我不明白的是

```
 $dn = "DC=whatever,DC=whatever"; 
```

以及搜索数组中的字段名称

```
 $LDAPFieldsToFind = array("cn", "givenname", "samaccountname", "homedirectory", "telephonenumber", "mail"); 
```

这是我的活动目录的样子 -Domain.com +Administrators +Managers -Limited_users +Department_name1 +Department_name2 +IT Department

问题：绑定用户后如何搜索才能知道这个用户是在哪个目录下找到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:06:15.763

@本尼。感谢您的帮助，我终于想通了。我已经下载了这个文件，它有我的确切基础[http://technet.microsoft.com/en-us/sysinternals/bb963907.aspx](http://technet.microsoft.com/en-us/sysinternals/bb963907.aspx)

# jquery - 迭代jQuery中多个选择框的选项

> ID：15686481
> 
> 赞同：0
> 
> 时间：2013-03-28T15:56:03.023
> 
> 标签：jquery

我有几个选择框（确切的数字是动态的），每个都包含相同的值。当在一个框中选择一个选项时，我想`disable`在所有其他选择框中使用此值。

如此[jsFiddle](http://jsfiddle.net/dirtyd77/J6ZYu/2/)所示，当您在第一个选择框中选择一个值时，它会正确禁用第二个选择框中的该值。当您在第二个选择框中选择一个值时，代码会正确禁用第一个选择框中的该值；但是，它在第​​二个框中启用（即不禁用）第一个选择框中的原始选定值。

**复制：**选择`Value One`第一个选择框。`Value One`在第二个选择框中正确禁用。现在`Value Two`在第二个选择框中选择。它在第一个选择框中被禁用，但现在`Value One`在第二个选择框中被错误地启用。

经过数小时尝试诊断问题后，我的语句似乎`.each`只处理第一个选择框，并没有前进到第二个选择框来迭代它的值。**编辑：**实际上它并没有停止处理；如果从 jsFiddle 中删除第 22-24 行（启用不再选择的值的 else 语句），`Value One`然后`Value Three`在第一个选择框中选择，则代码正确处理第二个选择框并禁用`Value One`and `Value Three`。所以多次迭代结束有问题`selectedAreas`吗？

**如何使用我的`area_select`班级遍历页面上所有选择框中的所有选项？**

**我的 jQuery：**

```
$(function() {
    $(document).on('change', '.area_select', function (e) {
        generateSelectedAreas();            
    });
});

function generateSelectedAreas()
{
    var selectedAreas = new Array();

    //Get all the currently selected areas
    $('.area_select option:selected').each(function () {
            if ($(this).val() != '') {
                selectedAreas.push($(this).val());
            }
    });

    //The selectedAreas array contains all the correct values, as shown here
    console.log(selectedAreas);

    $('.area_select>option:not(:selected)').each(function () {
        for(var counter=0; counter < selectedAreas.length; counter++) {
            if (selectedAreas[counter] == $(this).val()) {
                $(this).attr("disabled", true);
            }
            else {
                $(this).attr("disabled", false);    
            }
        }       
    });

    return selectedAreas;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:18:34.600

好的，这有点复杂，但我会尽力解释这里发生了什么。

主要问题源于以下陈述：

```
$('.area_select>option:not(:selected)').each(function () {
    for(var counter=0; counter < selectedAreas.length; counter++) {
        if (selectedAreas[counter] == $(this).val()) {
            $(this).attr("disabled", true);
        }
        else {
            $(this).attr("disabled", false);    
        }
    }       
}); 
```

假设我有两个`select`元素：

```
Select 1
---------
Value 1 
Value 2
Value 3
Value 4

Select 2
---------
Value 1 
Value 2
Value 3
Value 4 
```

您遍历当前未选择的每个选项：

```
Select 1 (Selected Value 3)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 4 (Enabled)

Select 2 (Selected Value 4)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 3 (Enabled)

selectedAreas = ['Value 3', 'Value 4'] 
```

然后你检查每个单独的值`selectedAreas`并说

> 如果 selectedArea 值等于当前值，`option`则禁用它，否则启用它

现在看看当你遍历每个值时会发生什么：

**如果选项等于值 3**

```
Select 1 (Selected Value 3)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 4 (Enabled)

Select 2 (Selected Value 4)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 3 (Disabled) 
```

**如果选项等于值 4**

```
Select 1 (Selected Value 3)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 4 (Disabled)

Select 2 (Selected Value 4)
---------
Value 1 (Enabled)
Value 2 (Enabled)
Value 3 (Enabled) 
```

你看，它重叠了。

您想要做的是以下内容：

```
$(function() {
    $(document).on('change', '.area_select', function (e) {
        generateSelectedAreas();            
    });

    function generateSelectedAreas()
    {
        //enable all options, otherwise they overlap and cause probl
        $('.area_select option').each(function () {
            $(this).prop('disabled', false);
        });

        $('.area_select option:selected').each(function () {
           var select = $(this).parent(),
           optValue = $(this).val();

           if($(this).val()!=''){
               $('.area_select').not(select).children().filter(function(e){
                   //filters all children equal to option value
                   if($(this).val()==optValue)
                       return e
               }).prop('disabled', true);
           }
        });
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/J6ZYu/3/](http://jsfiddle.net/dirtyd77/J6ZYu/3/)

抱歉，解释太长了！希望这会有所帮助，如果您有任何问题，请告诉我！

# python - Python。文件操作

> ID：15686483
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:56:10.130
> 
> 标签：python

```
def copytree(src, dst, symlinks=False, ignore=None):
    for item in os.listdir(src):
        s = os.path.join(src, item)
        d = os.path.join(dst, item)
        if os.path.isdir(s):
            print "copying"
            shutil.copytree(s, d, symlinks, ignore=None)
        else:
            shutil.copy2(s, d)
def main ():
    #path to input
    src="/home/user/abcd"
    #here path to output
    dst="/home/user/dirtest"
    copytree(src,dst)

if __name__ == '__main__':
    main() 
```

如果目标文件夹中的文件已经存在，如何复制它？较新的文件应重命名为类似 filename.x.ext。

例如-如果我尝试复制`newfile.jpg`并且它已经存在于文件夹中，它应该被复制为`newfile.1.jpg`. 如果`newfile.1.jpg`也已经存在，则应命名新文件`newfile.2.jpg`，依此类推

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:02:00.710

```
def getUniqueName(destPath):
   d = destPath[:]
   count = 0
   while os.path.exists(d):
      count += 1 
      parts = os.path.splitext(d)
      d = "%s.%s%s"%(parts[0],count,parts[1])
   return d 
```

我认为那会奏效

然后将其称为

```
shutil.copy2(s, getUniqueName(d)) 
```

当你这样做时不会有帮助`shutil.copytree`

# ios - 框架、委托和视图控制器

> ID：15686487
> 
> 赞同：0
> 
> 时间：2013-03-28T15:56:12.197
> 
> 标签：ios, objective-c

我正在为第三方开发人员构建一个框架。我正在构建的方式是我创建了一个静态 iOS 项目并按照[此处](https://github.com/jverkoey/iOS-Framework "这里")列出的步骤进行操作。现在我在该框架示例中添加了以下内容：

在框架项目中添加了一个 ViewController

项目的主要公共类有一个委托，第三方开发者将实现

现在我需要实现的是，例如，第三方开发人员使用我的框架并将委托设置为他们的应用程序的类。我希望我的框架做的是在他们的视图之上显示一个视图控制器，以显示所需的内容。原来框架项目中的主类是一个NSObject类，不支持诸如此类的方法`presentModalViewController`。

那么您能否提出一种实现上述目的的方法，即我的框架应该在委托视图上方呈现一个视图控制器。另外，我正在使用框架项目中的界面构建器创建我的视图控制器。请建议这是否是正确的方法。如果不是，你认为我如何设计我需要在调用视图之上的视图布局 - 纯粹通过代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:07:18.780

我认为您应该遵循标准 SDK 中的[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)和其他几个模式。这意味着您的框架将提供作为 UIViewController 子类的公共*类*。

```
#import <MyFramework/MyFrameworkViewController.h>

@interface CustomerViewController : UIViewController <MyFrameworkViewControllerDelegate>
@end

- (IBAction)pressedShowFrameworkVC:(id)sender {

    MyFrameworkViewController *frameworkVC = [[MyFrameworkViewController alloc] init];
    // your framework init can init from your bundle's nib
    frameworkVC.delegate = self;
    [self presentViewController:frameworkVC animated:YES completion:^{}];
} 
```

当用户完成它时，您的框架 vc 会自行关闭。

```
// MyFrameworkViewController.m

[self dismissViewControllerAnimated:YES completion^{
    [self.delegate frameworkVC:self didFinishWithStuff:@"Done"];
}]; 
```

您的客户实施此...

```
- (void)frameworkVC:(MyFrameworkViewController *)frameworkVC didFinishWithStuff:(NSString *)objectDescribingCompletionState {

} 
```

**编辑**- 假设您的框架还需要为客户应用程序做一些与视图控制器无关的工作。它仍然可以提供 NSObject 的子类（或 NSURLConnection 或其他）作为另一个公共类。

```
// CustomerViewController.m
#import <MyFramework/MyFrameworkWorkerBee.h>

- (IBAction)pressedMakeMyFrameworkDoSomethingUseful:(id)sender {

    MyFrameworkWorkerBee *workerBee = [[MyFrameworkWorkerBee alloc] init];
    [workerBee fetchStuffFromTheWebWithCompletion:^(id result) {
        // now present results
        MyFrameworkViewController *frameworkVC = [[MyFrameworkViewController alloc] init];
        frameworkVC.delegate = self;
        frameworkVC.resultsToPresent = results;
        [self presentViewController:frameworkVC animated:YES completion:^{}];
    }];
} 
```

# ckeditor - 我可以从它转换的元素中获取 CKEditor 实例吗？

> ID：15686489
> 
> 赞同：3
> 
> 时间：2013-03-28T15:56:16.333
> 
> 标签：ckeditor

我有一种情况，我正在克隆一个包含 CKEditor 实例的元素。克隆后，我更改了所有 id 以确保在同一页面中没有两个具有相同 id 的元素。我无法访问 CKEditor 的克隆版本。事实上，如果我通过元素 id 访问它，我会得到原始的（而不是具有新 id 的克隆）。我可以毫无问题地访问被替换的文本区域，但不能访问随之而来的 CKEditor.editor 对象。是否可以通过使用被替换的元素（而不是它的 id）来访问这个对象？

注意请告诉我我可以在此处添加什么以使问题更清楚...

**跟进** 我发现我正在以错误的方式思考这个问题。当我克隆包含 CKEditor 的元素时，我有该元素的副本，但 CKEDITOR 对象不知道它。我最终做的只是删除与克隆编辑器关联的 html 并`CKEDITOR.replace`再次调用以替换克隆的 textarea。我希望这是可以理解的，我没有太多时间写。如果事情不清楚，请发表评论，我会尽快澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-28T09:58:16.060

如果您使用的是 jQuery 适配器，则可以使用以下命令获取 CKEDITOR 对象...

```
$(element).ckeditorGet(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:15:04.613

我不是 100% 知道问题是什么，但如果你有一个 id 为“content”的 textarea 并用编辑器替换它，那么你可以从 CKEDITOR.instances 访问该实例，如下所示：

```
CKEDITOR.instances.content        OR 
CKEDITOR.instances[content]       OR 
CKEDITOR.instances["content"] 
```

现在，当您将克隆文本区域的 id 更改为“content2”并且克隆编辑器实例不在 CKEDITOR.instances 中时，您需要在 id 更新后替换克隆。

```
CKEDITOR.replace('content2'); 
```

所以编辑器会有多个实例“content”和“content2”。您可以遍历实例并验证它们并使用您需要的实例。

```
for(x in CKEDITOR.instances){
var instance = CKEDITOR.instances[x];
// do something with the instance
} 
```

# virtualhost - 通过 ip 在另一台电脑上显示我的本地主机

> ID：15686497
> 
> 赞同：0
> 
> 时间：2013-03-28T15:56:56.393
> 
> 标签：virtualhost

我在我的本地有一个站点，它正在运行`xampp`。现在在另一个`Mac`我想访问本地站点。可以通过共享 ip 来完成吗？或在主机文件中写入的东西。源机器是windows，目标机器是mac。

我不知道如何将主机文件中的 ip 包含在`Mac`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:59:58.593

假设它在端口 80 或 443 上运行，并且您的防火墙设置为允许这些端口上的请求，您应该能够在浏览器中导航到该 IP 地址。如果您从子网外部请求本地站点，则可能需要在路由器上配置端口转发

# javascript - 替换所有匹配的文本，除了 alt 或 href 属性

> ID：15686500
> 
> 赞同：0
> 
> 时间：2013-03-28T15:57:05.157
> 
> 标签：javascript, jquery, regex

`alt`我想用另一个文本替换所有匹配的文本，但如果该文本在or`href`属性中，我不想替换。例子：

```
<p>Hello world!</p>
<p><img src="hello.jpg" alt="Hello"/></p>
Hello 
```

我的代码：

```
var replacepattern = new RegExp('Hello', 'gi');
newcontent = newcontent.replace(replacepattern, function(match, contents, offset, s) {
var link = 'demo.com'
    index++;
    if (link != '') {
        return '<a href="' + link + '">' + match + '</a>';
    } else {
        return match;
    }
}); 
```

它仅适用于文本。如何匹配除`img src`等之外的文本`alt`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:13:42.260

您可以使用 jQuery 本身来帮助您进行替换：

```
$(html)
    .contents()
    .filter(function() {
        return this.nodeType == 1 || this.nodeType == 3;
    }).each(function() {
        this.textContent = this.textContent.replace(replacepattern, 'whatever');
    }); 
```

请注意，最后一次出现 的`Hello`不会被替换，因为将文本节点作为 的子节点在技术上是无效的`<body>`。

此外，您必须修改它以在 IE < 9 或 10 中工作；基本上浏览器应该支持`node.textContent`:)

**更新**

问题稍微复杂一些；或者也许我的想法让它变得比现在更困难。用 jQuery 替换文本节点并不是最简单的，因此需要一些纯 JS：

```
$('<div><p>Hello world!</p><p><img src="hello.jpg" alt="Hello"/></p>Hello</div>')
  .find('*')
  .andSelf()
  .each(function() {
    for (var i = 0, nodes = this.childNodes, n = nodes.length; i < n; ++i) {
      if (nodes[i].nodeType == 3) {
        var txt = nodes[i].textContent || nodes[i].innerText,
            newtxt = txt.replace(/Hello/g, 'Bye');
        if (txt != newtxt) {
          var txtnode = document.createTextNode(newtxt);
          this.replaceChild(txtnode, nodes[i]);
        }
      }
    }
})
  .end()
  .end()
  .appendTo('body'); 
```

# c++ - Qt QTableWidget 列调整大小

> ID：15686501
> 
> 赞同：7
> 
> 时间：2013-03-28T15:57:07.880
> 
> 标签：c++, qt, qtablewidget

我有一个带有*QToolbar*、*QWidget*和*QTabWidget的**MainWindow*。布局是“网格”。但是，我的窗口是可调整大小的，因为我有一个布局，所以效果很好。但是有一个问题，在我的*QTabWidget*中，我有一个带有两列的*QTableWidget*（布局也是“网格”）。如果我调整整个窗口的大小， *QTableWidget*会调整大小而不是列。

 ***例如，每当我调整窗口大小时，我的*QTabWidget*和其中的*QTableWidget*也会调整大小。只有我的*QTableWidget*中的列不会。

*那么......如果我的QTableWidget*调整大小，我该如何调整它们的大小？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T16:18:52.240

1.  更改. `ResizeMode`_ `QHeaderView`例如，使用：

* * *

```
horizontalHeader()->setResizeMode( 0, QHeaderView::Stretch ); 
```

使第一列调整大小，以便`QTableWidget`总是满的。

* * *

2.  调整大小后，自己覆盖`resizeEvent`并设置每列的宽度`QTableWidget`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-04T12:40:57.493

1.  拉伸最后一列：

    ```
    ui->tableWidget->horizontalHeader()->setStretchLastSection(true); 
    ```

2.  拉伸列*#n*：

    ```
    ui->tableWidget->horizontalHeader()->setSectionResizeMode(n, QHeaderView::Stretch); 
    ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-29T13:31:04.633

最好的解决方案，在 Qt5 中你必须使用`setSectionResizeMode`而不是`setResizeMode`

```
tabv = QTableView()
tabv.horizontalHeader().setSectionResizeMode(QHeaderView::Stretch) 
```

您也可以`Stretch`在调整大小时指定模式

```
tabv.horizontalHeader().resizeSections(QHeaderView::Stretch) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-24T16:51:48.747

```
ui->mytable->horizontalHeader()->setSectionResizeMode(QHeaderView::Stretch); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-16T17:43:14.470

如果您只想调整最后一列的大小：

```
ui->tableWidget->horizontalHeader()->setStretchLastSection(1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T16:09:37.747

您可以使用 QHeaderView 和方法 QHeaderView::setResizeMode() 更改列或行的“调整大小模式”。

[http://qt-project.org/doc/qt-4.8/qheaderview.html#setResizeMode](http://qt-project.org/doc/qt-4.8/qheaderview.html#setResizeMode)

[http://qt-project.org/doc/qt-4.8/qtableview.html#verticalHeader](http://qt-project.org/doc/qt-4.8/qtableview.html#verticalHeader)

[http://qt-project.org/doc/qt-4.8/qtableview.html#horizo​​ntalHeader](http://qt-project.org/doc/qt-4.8/qtableview.html#horizontalHeader)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-14T09:01:02.823

在 Qt5 中，您必须使用`setSectionResizeMode`而不是`setResizeMode`

```
QTableWidget* myTable = new QTableWidet;
QHeaderView* header = myTable->horizontalHeader();
header->setSectionResizeMode(QHeaderView::Stretch); 
```***

# javascript - 类型错误：node.setAttribute 不是函数

> ID：15686504
> 
> 赞同：4
> 
> 时间：2013-03-28T15:57:21.470
> 
> 标签：javascript, html, error-handling, try-catch, setattribute

当我尝试在网页上调用以下函数时，出现错误：“TypeError: item.setAttribute is not a function”：

```
function list() {
    var colors = document.getElementById('colors');
    var colors = colors.childNodes.length;
    for (var i = 1; i < broj; i++) {
        var item = colors.childNodes.item(i);
        item.setAttribute("id", i);
        item.setAttribute("onmouseover", "moveover(src)");
        item.setAttribute("alt", "Color");
        item.hspace = "2";
        item.height = "23";
    }
}

function moveover(colorAddress) {
    var source = colorAddress;
    var image = source.slice(0, source.length - 4);
    var start = "url(";
    var extension = ".jpg)";
    var newImage = start.concat(image, extension);
    document.getElementById('image').style.backgroundImage = newImage;
}

window.onload = function() {
    try {
        list();
    } catch (err) {
        alert(err);
    }
} 
```

该函数是当事件属性添加到函数中的元素时应该触发`mouseover()`的函数的辅助函数。`list()``onmouseover``list()`

当我加载我的页面时，会弹出警告框并给我上述错误。

它实际上将所有属性添加到我的元素中，但我不明白为什么会出现这个错误。因为这个错误正在触发它阻止我在这个加载后立即运行另一个函数。

为什么会出现这个错误？

这是我要操作的 HTML 文档：

```
<div id="image" style="background-image: url(images/nova_brilliant/1.jpg)"></div>
<div id="tekst">
     <h1>Nova Brilliant</h1>

    <div id="contents">
        <p>Hover with your mouse over the desired color to see the kitchen in that color:</p>
        <div id="colors">
            <img src="images/nova_brilliant/1.gif">
            <img src="images/nova_brilliant/2.gif">
            <img src="images/nova_brilliant/3.gif">
        </div>
        <p>Other available colors:</p>
        <div id="others">
            <img src="images/nova_brilliant/4.gif">
            <img src="images/nova_brilliant/5.gif">
            <img src="images/nova_brilliant/6.gif">
        </div>
    </div>
</div> 
```

当用户将鼠标悬停在 div 中的 3 个图像中的一个上时，div 中`id="colors"`的背景图像`id="image"`应该发生变化并且它确实发生了变化，只是我得到了那个烦人的错误，它阻止我尽快运行另一个脚本这个加载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:59:08.213

您调用的节点很`setAttribute()`可能是文本节点而不是元素。`nodeType`最简单的解决方案是在调用之前检查属性`setAttribute()`：

```
var item = colors.childNodes[i];
if (item.nodeType == 1) {
    // Do element stuff here
} 
```

顺便说一句：设置事件处理程序属性（例如`onmouseover`via `setAttribute()`）通常是一个坏主意，因为它不像旧 IE 中指定的那样工作（以及更高版本 IE 中的兼容模式）。请改用等效属性：

```
item.onmouseover = function() {
    moveover(this.src);
}; 
```

# php - 在 PHP 中检查条件中的空值

> ID：15686507
> 
> 赞同：0
> 
> 时间：2013-03-28T15:57:26.887
> 
> 标签：php, variables

我发现有多种方法可以检查函数是否正确地将值返回给变量，例如：

### 例一

```
$somevariable = '';

$somevariable = get_somevariable();

if ($somevariable)
{
    // Do something because $somevariable is definitely not null or empty!
} 
```

### 例二

```
$somevariable = '';

$somevariable = get_somevariable();

if ($somevariable <> '')
{
    // Do something because $somevariable is definitely not null or empty!
} 
```

我的问题：检查变量是否正确的最佳做法是什么？不同类型的对象会有所不同吗？例如，如果您期望 $somevariable 是一个数字，是否会检查它是否是一个空字符串帮助/发布问题？你要设置什么 $somevariable = 0; 作为它的初始值？

我来自 C# 的强类型世界，所以我仍在努力解决所有这些问题。

威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:08:37.573

这取决于您的函数可能返回什么。这可以追溯到如何最好地构造函数。您应该学习一次 PHP 真值表并应用它们。以下所有事情都被认为是*虚假*的：

*   `''`（空字符串）
*   `0`
*   `0.0`
*   `'0'`
*   `null`
*   `false`
*   `array()`（空数组）

其他一切都是*真实*的。如果您的函数将上述之一作为“失败”返回代码返回，而其他任何内容作为成功返回，则最惯用的检查是：

```
if (!$value) 
```

如果函数可能同时返回`0`and `false`（例如`strpos`确实如此），则需要应用更严格的检查：

```
if (strpos('foo', 'bar') !== false) 
```

我总是选择最短、最易读且不易误报的版本，通常是`if ($var)`/ `if (!$var)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:01:08.587

这取决于你在寻找什么。

检查是否设置了变量：

```
if (isset($var))
{
 echo "Var is set";
} 
```

检查号码：

```
if (is_int($var))
{
 echo "Var is a number"; 
} 
```

检查字符串：

```
if (is_string($var))
{
 echo "var is a string";
} 
```

检查 var 是否包含小数位：

```
if (is_float($var))
{
 echo "Var is float";
} 
```

* * *

如果要检查变量是否**不是**特定类型，请添加：`!`感叹号。例子：

```
if (!isset($var)) // If variable is not set
{
  echo "Var Is Not Set"; 
} 
```

* * *

参考：

[http://www.php.net/manual/en/function.is-int.php](http://www.php.net/manual/en/function.is-int.php)

[http://www.php.net/manual/en/function.is-string.php](http://www.php.net/manual/en/function.is-string.php)

[http://www.php.net/manual/en/function.is-float.php](http://www.php.net/manual/en/function.is-float.php)

[http://www.php.net/manual/en/function.isset.php](http://www.php.net/manual/en/function.isset.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:03:56.397

没有明确的答案，因为它取决于函数应该返回的内容，如果有适当的记录。

例如，如果函数因返回 null 而失败，您可以使用`if (!is_null($retval))`.

如果函数因返回 FALSE 而失败，请使用`if ($retval !== FALSE)`.

如果函数因未返回整数值而失败，`if (is_int($retval))`.

如果函数因返回空字符串而失败，您可以使用`if (!empty($retval))`.

等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:00:07.403

如果要检查是否是数字，则应使用[过滤器功能](http://php.net/manual/en/filter.filters.validate.php)。

例如：

```
if (!filter_var($_GET['num'], FILTER_VALIDATE_INT)){
    //not a number
} 
```

# asp.net-mvc-3 - Html.DropDownList 选择的值不能使用 ViewBag

> ID：15686512
> 
> 赞同：5
> 
> 时间：2013-03-28T15:57:39.823
> 
> 标签：asp.net-mvc-3, razor, html-select, selectedvalue

好吧，在这里阅读了几个小时后，尝试了所有解决方案均未成功，还发现[了这篇文章](http://publicityson.blogspot.com/2010/07/aspnet-mvc-htmldropdownlist-not-showing.html)，我认为它可以挽救我的生命……什么也没有。

长话短说。

这是我的观点（所有组合）

```
@Html.DropDownList("yearDropDown",(IEnumerable<SelectListItem>)ViewBag.yearDropDown)
@Html.DropDownList("yearDropDownxxx",(IEnumerable<SelectListItem>)ViewBag.yearDropDown)
@Html.DropDownList("yearDropDown",(<SelectList>)ViewBag.yearDropDown)
@Html.DropDownList("yearDropDown") 
```

这是我的控制器

```
public ActionResult(int year)
{
var years = new int[] { 2007, 2008, 2009, 2010, 2011, 2012 }
                .Select(x => new SelectListItem { 
                    Text = x.ToString(), 
                    Value = x.ToString(), 
                    Selected=x==year }).Distinct().ToList();

            years.Insert(0, new SelectListItem { Value = null, Text = "ALL YEARS" });
            ViewBag.yearDropDown = new SelectList(years, "Value", "Text", years.Where(x => x.Selected).FirstOrDefault());
return View();
} 
```

这是我渲染的 HTML。无处可寻。

```
<select id="yearDropDown" name="yearDropDown"><option value="">ALL YEARS</option>
<option value="2007">2007</option>
<option value="2008">2008</option>
<option value="2009">2009</option>
<option value="2010">2010</option>
<option value="2011">2011</option>
<option value="2012">2012</option>
</select> 
```

不用说，但我会的，我签入了我的 Watch 和 SelectList 实际上填充了 SelectedValue 属性，其中填充了传递给控制器​​的选定年份。但是当我在视图中渲染时，它会转到第一个选项。

请，我需要解决方案`DropDownList`，而不是`DropDownListFor`。我之所以强调这一点，是因为我在这里看到其他人寻求同样的帮助，并且一群人给了他们指示，并且几乎命令他们使用 DropDownListFor。我需要使用 DropDownList 是有原因的。

解决方案：看看我自己的答案。但是，这是我所做的简单更改。

控制器：

```
ViewBag.yearDropDown = years; 
```

看法：

```
@Html.DropDownList("yearDropDown") 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-03T00:54:03.150

问题也可能是名称，请参见此处。

在控制器中

```
ViewBag.PersonList= new SelectList(db.Person, "Id", "Name", p.PersonId); 
```

在视图中

```
@Html.DropDownList("PersonList",(SelectList)ViewBag.PersonList ) 
```

这行不通，你得改名字，所以就不一样了。

```
@Html.DropDownList("PersonList123",(SelectList)ViewBag.PersonList ) 
```

所以改变 yearDropDown 它会为你工作。

最好的问候克里斯蒂安·莱克。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:28:33.683

```
ViewBag.yearDropDown = new SelectList(years, "Value", "Text", years.Where(x => x.Selected).FirstOrDefault()); 
```

这里的最后一个参数是`SelectListItem`，但必须选择它`value`（示例中的字符串）

[SelectList 构造函数（IEnumerable、字符串、字符串、对象）](http://msdn.microsoft.com/en-us/library/dd492553%28v=vs.108%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-18T05:26:22.527

我知道这是一个老问题，但我会分享另一个解决方案，因为有时你已经正确地做了任何事情，但是在请求和响应之后你看不到选择的值，因为你的剃须刀可能有错误。在这种情况下，我已经有了，您可以使用使用 viewbag 的选择选项：

在控制器中我有：

```
 ViewBag.MyData = GetAllData(strSelected);
... 
```

作为控制器中的私有函数，我有：

```
 private List<SelectListItem> GetAllData(List<string> selectedData)
    {

        return MyGetAll().Select(x =>
            new SelectListItem
            {
                Text = x.Point,
                Value = x.Amount.ToString(),
                Selected = selectedPrizes.Contains(x.Amount.ToString())
            })
            .ToList();
    } 
```

在 .cshtml 我有：

```
<select id="Amount" name="Amount" multiple="multiple">
  @foreach (var listItem in (List<SelectListItem>)ViewBag.MyData)
   {
     <option value="@listItem.Value" @(listItem.Selected ? "selected" : "")>
       @listItem .Text
     </option>
   }
</select> 
```

我希望它对类似的问题有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:05:55.457

将 ViewBag 属性的名称更改为与 DropDownList 的名称不匹配。使用`ViewBag.yearDropDownDD`而不是`ViewBag.yearDropDown`.

另外，您错误地创建了 SelectList。您需要传递选定的值而不是数组项：

```
ViewBag.yearDropDown = new
SelectList(years, "Value", "Text", years.Where(x => x.Selected).FirstOrDefault().Value); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-28T16:11:01.290

我应该去的第一个地方学习....而我没有。

[这是我的解决方案](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)

谢谢你的回答。真的很感激。我现在想自己开枪。两个小时阅读博客，我花了 2 分钟来复制这个例子并完美地工作......

# linux - 如何递归列出文件夹中的文件？

> ID：15686514
> 
> 赞同：0
> 
> 时间：2013-03-28T15:57:43.523
> 
> 标签：linux

'ls dir1/* */* .ext' 只列出所有只有一层嵌套的文件。递归列出所有具有任何嵌套级别的文件的命令是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:59:23.833

```
ls -R dir1 
```

或者：

```
find dir1 -name "*.ext" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:00:15.840

该`find`命令是执行此操作的一种方法：

```
find dir1 -name .ext 
```

`-name`运算符*可以*使用通配符进行匹配，但重要的是引用通配符表达式，以便在调用之前不会被您的 shell 扩展`find`：

```
find dir1 -name "*.ext" 
```

该`find`命令有许多运算符，可以对目录中的文件进行各种不同的测试，这`-name`只是一个示例。有关更多信息，请[参阅`find`手册页](http://linux.die.net/man/1/find)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:59:36.917

递归列出文件夹：

```
ls -R 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:00:21.647

你可以使用`find`：

```
find . 
```

该命令将列出当前文件夹下的所有内容

# asp-classic - 启动 MS Word 时设置窗口大小

> ID：15686515
> 
> 赞同：1
> 
> 时间：2013-03-28T15:57:45.953
> 
> 标签：asp-classic

我正在使用经典 ASP 将数据从我的 Web 服务器下载到 Word 文档中。我在我的 ASP 脚本中使用以下标头来完成此操作...

```
 Response.ContentType = "application/msword"
    Response.AddHeader "Content-Disposition", "attachment;filename=gbResults.doc"
    Response.write("<html " & _
    "xmlns:o='urn:schemas-microsoft-com:office:office' " & _
    "xmlns:w='urn:schemas-microsoft-com:office:word'" & _
    "xmlns='http://www.w3.org/TR/REC-html40'>")

    Response.write "<xml>" & _ 
        "<w:WordDocument>" & _
        "<w:View>Print</w:View>" & _
        "<w:Zoom>90</w:Zoom>" & _ 
        "<w:DoNotOptimizeForBrowser/>" & _
        "</w:WordDocument>" & _
        "</xml>" & _ 
```

我从我的数据库中检索的数据是由这个脚本按照上面的代码生成的，它成功地下载了数据并打开了一个 MS Word 实例，其中包含返回的数据......为用户完全格式化。这按预期工作。

我的问题...是否可以打开 word 实例以使窗口不最大化？我们希望保留主浏览器，因为一些用户认为他们已经让应用程序在浏览器中运行，因为他们在最大化 word 时看不到它。

当然，我们不知道最终用户将使用哪种浏览器，因此我们正在寻找一种跨浏览器兼容的解决方案。

到目前为止，在我的研究中，我无法通过 xml、java 或 asl 找到解决方案。任何帮助是极大的赞赏。

# sql - 将 nvarchar 值 '06/30/2012' 转换为数据类型 int 时转换失败

> ID：15686521
> 
> 赞同：0
> 
> 时间：2013-03-28T15:58:15.780
> 
> 标签：sql, sql-server, datetime, sql-server-2008-r2, dynamic-sql

我在尝试设置两个变量（从日期和截止日期）时遇到问题。一旦我解决了一个问题，另一个就很容易解决了。我收到错误：

> 将 nvarchar 值 '06/30/2012' 转换为数据类型 int 时转换失败。

值得注意的是，我使用视图将各种表放在一起，然后通过`sp_executesql`. 当我打印我的查询时，我可以看到它识别`@fromdate`为 0，也许这就是问题所在。

```
 declare @fromdate nvarchar
 declare @todate nvarchar
 select @fromdate = '03/01/1999'
 select @todate = ''

 IF @fromdate <> ''
BEGIN
    SELECT @sql = @sql + ' and convert (nvarchar,document_Date,101) > '+@fromdate+''
END

 if @todate <> ''
BEGIN
    SELECT @sql = @sql + ' and convert(nvarchar,document_date,101) >  '+@todate+''
END 
```

该列`document_date`是日期时间。有任何想法吗？如果是这样，您能否解释为什么会发生这种情况，以便我可以学习并避免将来发生这种情况？我在下面包含了打印 SQL。

```
 SELECT  [system_status]      
  ,[document_status_code]      
  ,[rpt_category]      
  ,[category]      
  ,[user_status_cd]      
  ,[user_status]      
  ,[assigned_to_id]      
  ,[assigned]      
  ,[assigned_to_date]      
  ,[owner_id]      
  ,[owner]      
  ,[rpt_acct_code]      
  ,[acct_name]      
  ,[rpt_title]      
  ,[job_name]      
  ,[logged_time]      
  ,[rpt_format_type]      
  ,[rpt_run_id]      
  ,[rpt_doc_id]      
  ,[rpt_id]      
  ,[rpt_filename]      
  ,[rpt_file_path]      
  ,[rpt_run_name]      
  ,[sla_start_date]      
  ,[sla_due_date]      
  ,[sla_completed_date]      
  ,[sla_status]      
  ,[SLA_Days]
  ,[Document_Date] 
  FROM VW_Document_Main
  WHERE 1=1 and convert (nvarchar,document_Date,101) > 0 
  order by document_status_code  ,owner_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:05:46.587

部分问题是您的声明没有长度`@fromdate`

它只返回第一个字符，因为您没有长度。声明应该说：

```
declare @fromdate nvarchar(10)
declare @todate nvarchar(10) 
```

由于您没有长度，因此它返回`0`的是第一个字符。

其次，您还在比较日期的字符串值，您应该比较日期值。

```
declare @fromdate datetime
declare @todate datetime 
```

那么你的代码可能是：

```
SELECT @sql = @sql + ' and document_Date > '''+convert(varchar(10), @fromdate, 101)+'''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:07:49.350

# 问题 #1

```
declare @fromdate nvarchar
select @fromdate = '03/01/1999' 
```

为什么将这些定义为*Unicode*字符串，更不用说[没有长度的字符串了](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)？你为什么对文字使用模棱两可、不可靠的格式？是3月1日还是1月3日？您确定您的 SQL Server 实例与您一致吗？

# 问题 #2

```
SELECT @sql = @sql + ' and convert (nvarchar,document_Date,101) > '+@fromdate+'' 
```

为什么要将列转换为*Unicode*字符串，更不用说[没有长度的字符串](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)？为什么将其作为字符串进行比较？你知道它`'05/05/2010'`大于`'02/21/2015`'，当作为一个字符串比较时，对吧？

# 解决方案

停止使用模棱两可的格式。不要再认为日期是字符串，应该这样比较。

怎么样：

```
DECLARE @fromdate DATETIME = '19990301'; -- guessing you meant March 1st. 
      -- See why ambiguous formats are bad and you should never use them?

...
SELECT @sql += ' AND document_Date > @fromdate;';

EXEC sp_executesql @sql, N'@fromdate DATETIME', @fromdate; 
```

现在您根本不需要进行任何转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:02:30.937

字面意思

```
'03/01/1999' 
```

是一个字符串文字。您正在转换`document_Date`为 varchar，然后进行不等式比较

```
and convert (nvarchar,document_Date,101) > '+@fromdate 
```

由于日期的格式不是 YYYYMMDD，因此比较不太可能产生您期望的比较。

例如，如果`@fromdate`是“04/01/1900”，它将*大于*“03/01/1999”，因为“04”大于“03”。

相反，将@fromdate 转换为与document_Date 相同的类型，例如

```
AND document_Date > convert(datetime, @fromdate) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:05:37.393

如果列 document_date 已经是日期时间，为什么不将 @fromdate 和 @todate 声明为日期时间，那么您的代码会更简单，您不必进行任何转换。在我看来，转换对于您正在尝试做的事情是不必要的。

# azure - 以 Web 角色接收服务总线队列消息

> ID：15686525
> 
> 赞同：1
> 
> 时间：2013-03-28T15:58:27.837
> 
> 标签：azure

我发现的所有关于服务总线队列的示例都在 Web 角色发送消息并且有一个专用工作角色接收消息的场景中。

宓情况不同。辅助角色是生成消息的角色，并且必须由 Web 角色接收。

我猜 webrole 的 RoleEntryPoint 应该有一个无限的时间来监听新消息，但是收到的消息必须由我的 webrole 中的组件处理，并且据我所知，RoleEntryPoint 不能从 web 应用程序访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:43:07.543

从 Web 角色或辅助角色发送或接收消息绝对没有区别，因为它们都是 Windows Server 2012 VM 实例。`Run()`您可以从该方法或您想要的任何其他地方启动线程。您甚至可以编写一个单独的控制台应用程序来处理服务总线消息，甚至可以从您自己桌面上运行的应用程序接收它们。

只需将 Service Bus 视为可从您的应用程序中使用的*服务*，无论它们位于何处（以及您使用的任何语言）。

# java - Android AES 问题

> ID：15686527
> 
> 赞同：1
> 
> 时间：2013-03-28T15:58:32.523
> 
> 标签：java, android, jaxb, aes

我需要用我的 Android 应用程序实现 AES 算法，我在下面创建了这段代码，它可以完美地作为 Java 应用程序工作，但似乎 Android 无法识别 JAXB。因为如您所见，我使用 import javax.xml.bind.DatatypeConverter，因为我使用 Datatype 转换器将字节 [] 转换为字符串...

我尝试导入 jaxb jar，但它再次失败并出现此错误：Conversion to Dalvik format failed with error 1。

我该如何解决这个问题？

这是代码：

```
public class AESCrypt {

private final Cipher cipher;
private final SecretKeySpec key;
private AlgorithmParameterSpec spec;
private String encryptedText, decryptedText;
ByteArrayOutputStream baos;

public AESCrypt(String password) throws Exception {
    // hash password with SHA-256 and crop the output to 128-bit for key
    MessageDigest digest = MessageDigest.getInstance("SHA-256");
    digest.update(password.getBytes("UTF-8"));
    byte[] keyBytes = new byte[16];
    System.arraycopy(digest.digest(), 0, keyBytes, 0, keyBytes.length);

    cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    key = new SecretKeySpec(keyBytes, "AES");
    spec = getIV();
    }

public AlgorithmParameterSpec getIV() {
    AlgorithmParameterSpec ivspec;
    byte[] iv = new byte[cipher.getBlockSize()];
    new SecureRandom().nextBytes(iv);
    ivspec = new IvParameterSpec(iv);
    return ivspec;
    }

public String encrypt(String plainText) throws Exception {      
    cipher.init(Cipher.ENCRYPT_MODE, key, spec);
    byte[] encrypted = cipher.doFinal(plainText.getBytes());
    encryptedText = DatatypeConverter.printBase64Binary(encrypted);
    return encryptedText;
}

public String decrypt(String cryptedText) throws Exception {
    cipher.init(Cipher.DECRYPT_MODE, key, spec);
    byte[] bytes = DatatypeConverter.parseBase64Binary(cryptedText);
    byte[] decrypted = cipher.doFinal(bytes);
    decryptedText = new String(decrypted, "UTF-8");
    return decryptedText;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:59:19.530

Android 库有[Base64类](http://developer.android.com/reference/android/util/Base64.html) *（android.util.Base64）*，可以非常方便地将 base64 字符串转换为数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T08:40:50.380

转换 `encryptedText`为`byte[]`：

```
byte[] encryptedTextByte = Base64.decode(encryptedText, 1); 
```

# c# - ASP.Net MVC 4 使用属性还是 BaseController？

> ID：15686528
> 
> 赞同：6
> 
> 时间：2013-03-28T15:58:41.667
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, attributes

我有一个有几个动作的控制器。**如果服务上的IsCat**字段为 false ，则应重定向 Action ：

所以是这样的：

```
 public ActionResult MyCatAction()
    {
        if (MyService.IsCat==false)
            return RedirectToAnotherControllerAction();
     ... 
```

这可以在一个**属性**中完成并应用于整个控制器的一组动作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:09:30.520

[在这种情况下，动作过滤器](http://msdn.microsoft.com/en-us/library/dd410209%28v=vs.100%29.aspx)是要走的路：

> 动作过滤器，它包装了动作方法的执行。此过滤器可以执行额外的处理，例如向操作方法提供额外的数据、检查返回值或取消操作方法的执行。

这是一个很好的 MSDN 方法：[如何：创建自定义操作过滤器](http://msdn.microsoft.com/en-us/library/dd410056%28v=vs.100%29.aspx)

在你的情况下，你会有这样的事情：

```
public class RedirectFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (MyService.IsCat==false)
            return RedirectToAnotherControllerAction();
    }
} 
```

然后，您将在控制器级别应用此过滤器（应用于所有控制器操作）

```
[RedirectFilterAttribute]
public class MyController : Controller
{
   // Will apply the filter to all actions inside this controller.

    public ActionResult MyCatAction()
    {

    }    
} 
```

或每个动作：

```
[RedirectFilterAttribute]
public ActionResult MyCatAction()
{
     // Action logic
     ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:08:00.350

是的。

[了解动作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

> 动作过滤器是一个属性。您可以将大多数操作过滤器应用于单个控制器操作或整个控制器

（而且您也可以使其对整个应用程序具有全局性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:06:50.243

这样做应该很简单，并且 MS 文档有一个非常好的演练：

[http://msdn.microsoft.com/en-us/library/dd381609(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd381609(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:11:18.843

是的。您可以使用操作过滤器并修改结果。这是一个简单的属性，它将执行类似的操作：

```
public class RedirectOnCat : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if(MyService.IsCat == false)
            filterContext.Result = new RedirectResult(/* whatever you need here */);
    }
} 
```

您也可以`OnActionExecuted`以非常相似的方式覆盖控制器。

# fancybox - 如何加快fancybox2 外部网址的加载时间？

> ID：15686531
> 
> 赞同：1
> 
> 时间：2013-03-28T15:58:46.493
> 
> 标签：fancybox, fancybox-2, load-time

我`fancybox2`用来在我的网站上将外部网址显示为 iframe。

有时页面显示时间太长。

**问：**有没有办法加快外部 url 加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:08:26.990

iFrame 只是一个正在加载的标准页面。如果您需要加快这些速度，您将需要应用与任何其他页面相同的技巧，即：

*   远程服务器上的 Gzip 压缩
*   在远程服务器上缓存
*   减小正在加载的页面的大小
*   减少发出的请求数

或者，您可以预加载页面，以便 iframe 与当前页面一起加载，而不是等待fancybox 准备好。

# java - 如何生成唯一的随机数？

> ID：15686549
> 
> 赞同：-3
> 
> 时间：2013-03-28T15:59:30.543
> 
> 标签：java, arrays, methods, random, bluej

当存储给学生时可能碰巧有相同的 id，所以我怎样才能避免重复，我尝试了 while 循环和 for each 循环，但它没有用

```
public void addStudent(Student student)

{

student.setId(ganerateNewRandom("aa", 2));

students.add(student);

}

  public String ganerateNewRandom(String prefix, int number)
 {

  Random random = new Random();

    StringBuffer ret = new StringBuffer(prefix);

    for(int i=0;i<number;i++) ret.append(random.nextInt(10));

    return ret.toString();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:01:22.803

我建议你只是模仿它在数据库中完成的方式：开始`id=1`并每次将其放大 1: `id++`。这样每个学生都将拥有唯一的 ID，而您不必生成随机数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:10:15.623

使用[java.util.UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)生成正确的唯一 ID。

例子：

```
UUID myID = UUID.randomUUID(); 
```

它使用[RFC 4122：通用唯一标识符 (UUID) URN 命名空间”](http://www.ietf.org/rfc/rfc4122.txt)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:11:06.193

告诉我所有这些都不是用来生成数据库ID的。如果是这种情况，您要走最坏的路，则必须将 id 生成委托给数据库

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:01:51.650

为确保您的随机数是唯一的，您必须存储所有以前的随机数。

您如何存储它们取决于您计划生成多少。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T16:02:10.977

我建议[在此处查看有关随机数生成的 Google 存储库](https://code.google.com/p/javarng/)

# decimal - IEEE 浮点转换 32 位

> ID：15686550
> 
> 赞同：0
> 
> 时间：2013-03-28T15:59:31.080
> 
> 标签：decimal, ieee-754

我第一次学习从十进制数字到 IEEE 32 浮点标准的转换，现在我很困惑，因为我看到了几张讲座幻灯片和大学的例子，他们以一种方式进行，然后其他人以另一种方式进行。特别是在获取小数点的 1 和 0 时。所以，如果你有一个像 1234.567 这样的数字

您将 1234 转换为二进制没问题，但是我对如何转换十进制感到非常困惑。原来我看到你走了

```
.567 * 2 = 1.134 = 1
.134 * 2 = .268 = 0
.268 *2 = .536 = 0 
```

请注意，这是小数位中有多少个数字。但是后来我看到其他示例继续使用小数点到某个永无止境的点（在哪里停止？）。如果我按照上面的方式进行操作，我会得到以下信息：

```
10011010010 for 1234
10011010010.100 
1.0011010010100 x 2 ^ (10).

127 +10 = 137\. 137 in binary is 10001001.

So 32 bits of binary is

0 for sign| 10001001 for exp| 0011010010100 0000000000 
```

总共 32 位。这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-25T03:03:55.657

第二种方法绝对好。但是，在计算 0.567 的二进制时，如果您没有到达终点（即**0.0**），那么至少要达到 23 位（**尾数长度**）。

对于你的小数 1234.567

```
1234 的二进制 = 100 1101 0010 

0.567 的二进制 = .1001 0001 0010 0110 1110 100（最多 23 位）

1234.567 的二进制 = 100 1101 0010.1001 0001 0010 0110 1110 100

                    = 1.00 1101 0010 1001 0001 0010 0110 1110 100 * 2^10
因此，
指数 = 10
归一化尾数（调整长度为 23 位）= 001 1010 0101 0010 0010 0100

符号位 = 0

因此 32 位浮点转换：

0 - 1000 1001 - 001 1010 0101 0010 0010 0100

```

# android - 在操作栏上显示返回按钮

> ID：15686555
> 
> 赞同：195
> 
> 时间：2013-03-28T15:59:34.440
> 
> 标签：android, android-actionbar, android-homebutton

我试图`Back button`在`Action bar`移动上一页/活动或主页（第一次打开）上显示一个。而我做不到。

我的代码。

```
ActionBar actionBar = getActionBar();
actionBar.setHomeButtonEnabled(true); 
```

代码在`onCreate`.

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-07-23T06:08:17.783

嗯，这是一个简单的显示后退按钮

```
actionBar.setDisplayHomeAsUpEnabled(true); 
```

然后您可以在 onOptionsItemSelected 自定义 back 事件

```
case android.R.id.home:
this.finish();
return true; 
```

* * *

## 回答 #2

> 赞同：210
> 
> 时间：2016-05-12T11:17:48.233

我认为这`onSupportNavigateUp()`是最好和最简单的方法，请检查以下步骤。第 1 步是必要的，第 2 步有替代方案。

**第 1 步显示返回按钮：**在方法中添加此行`onCreate()`以显示返回按钮。

```
assert getSupportActionBar() != null;   //null check
getSupportActionBar().setDisplayHomeAsUpEnabled(true);   //show back button 
```

**Step 2 后点击实现：**覆盖此方法

```
@Override
public boolean onSupportNavigateUp() {  
    finish();  
    return true;  
} 
```

就是这样，您已完成
**或第 2 步替代方案：**您可以将元添加到清单文件中的活动中

```
<meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="MainActivity" /> 
```

**编辑：**如果您不使用`AppCompat`活动，则不要使用`support`单词，您可以使用

```
getActionBar().setDisplayHomeAsUpEnabled(true); // In `OnCreate();`

// And override this method
@Override 
public boolean onNavigateUp() { 
     finish(); 
     return true; 
} 
```

感谢@atariguy 发表评论。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2013-03-28T21:06:06.257

魔术发生在`onOptionsItemSelected`.

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2014-04-11T17:20:54.103

官方解决方案

将这两个代码片段添加到您的 SubActivity

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    // Respond to the action bar's Up/Home button
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

将元数据和 parentActivity 添加到清单以支持较低的 sdk。

```
 <application ... >
    ...
    <!-- The main/home activity (it has no parent activity) -->
    <activity
        android:name="com.example.myfirstapp.MainActivity" ...>
        ...
    </activity>
    <!-- A child of the main activity -->
    <activity
        android:name="com.example.myfirstapp.SubActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <!-- Parent activity meta-data to support 4.0 and lower -->
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

参考这里：http: [//developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html)

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2015-10-21T06:12:14.940

将这些行添加到 onCreate()

```
android.support.v7.app.ActionBar actionBar = getSupportActionBar();
   actionBar.setHomeButtonEnabled(true);
   actionBar.setDisplayHomeAsUpEnabled(true); 
```

并在 onOptionItemSelected

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                //Write your logic here
                this.finish();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

希望对你有帮助..！

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2014-07-15T20:11:00.460

试试这个代码，只有当你需要后退按钮时才考虑它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //YOUR CODE
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    //YOUR CODE
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    onBackPressed();
    return true;
} 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-01-03T16:52:15.487

在您的`onCreate`方法上添加：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

在`AndroidManifest.xml`父活动中定义时（一旦按下操作栏中的后退按钮将调用的活动）：

在`<activity>`清单上的定义中，添加以下行：

```
android:parentActivityName="com.example.activities.MyParentActivity" 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-09-03T20:12:52.553

在你的`onCreate()`方法中添加这一行

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

并且，在同一个Activity中，添加这个方法来处理按钮点击

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
        this.finish();
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-02-09T20:37:48.723

我知道我有点晚了，但能够通过直接遵循[文档](https://developer.android.com/training/appbar/up-action.html)来解决这个问题。

将元数据标签添加到`AndroidManifest.xml`（让系统知道）

```
 <activity
        android:name=".Sub"
        android:label="Sub-Activity"
        android:parentActivityName=".MainChooser"
        android:theme="@style/AppTheme.NoActionBar">
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value=".MainChooser" />
    </activity> 
```

接下来，启用您的后退（向上）按钮`MainActivity`

```
 @Override 
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_child);

    // my_child_toolbar is defined in the layout file 
    Toolbar myChildToolbar =
        (Toolbar) findViewById(R.id.my_child_toolbar);
    setSupportActionBar(myChildToolbar);

    // Get a support ActionBar corresponding to this toolbar 
    ActionBar ab = getSupportActionBar();

    // Enable the Up button 
    ab.setDisplayHomeAsUpEnabled(true);
    } 
```

而且，你们都准备好了！

来源：[Android 开发者文档](https://developer.android.com/training/appbar/up-action.html)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-07-02T03:47:39.740

我知道上面有很多有用的解决方案，但是这次我阅读了这篇文章（当前的Android Studio 2.1.2 with sdk 23）上面的一些方法不起作用。

下面是我的子活动解决方案是 MapsActivity

首先，您需要在

> AndroidManifest.xml

像这样 ：

```
<application ... >
    ...
    <!-- Main activity (which has no parent activity) -->
    <activity
        android:name="com.example.myapp.MainActivity" ...>
        ...
    </activity>
    <!-- A child of the main activity -->
    <activity
        .....
        android:parentActivityName=".MainActivity" >
        <!-- Support Parent activity for Android 4.0 and lower -->
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myapp.MainActivity" />
    </activity>
</application> 
```

其次，确保您的子活动扩展`AppCompatActivity`，而不是 FragmentActivity。

三、覆盖`onOptionsItemSelected()`方法

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // app icon action bar is clicked; go to parent activity
                this.finish();
                return true;
            case R.id.action_settings:
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

希望这会有所帮助！

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-01-06T08:11:11.337

这很简单，对我很有效

在 onCreate() 方法中添加这个

```
getSupportActionBar().setHomeButtonEnabled(true);
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

在 oncreate() 方法之外添加这个

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    onBackPressed();
    return true;
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-10-24T06:47:14.620

要实现这一点，只需两个步骤，

第 1 步：转到`AndroidManifest.xml`并在`<activity>`标签中添加此参数 -`android:parentActivityName=".home.HomeActivity"`

例子：

```
<activity
    android:name=".home.ActivityDetail"
    android:parentActivityName=".home.HomeActivity"
    android:screenOrientation="portrait" /> 
```

第 2 步：`ActivityDetail`添加您`action`的上一页/活动

例子：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            onBackPressed();
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-08-18T15:38:14.513

试试这个，在你的 onCreate()

```
 getActionBar().setHomeButtonEnabled(true);
 getActionBar().setDisplayHomeAsUpEnabled(true); 
```

而对于点击事件，

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // app icon in action bar clicked; goto parent activity.
                this.finish();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-04-05T11:40:07.887

在 onCreate 方法中写入-

```
Toolbar toolbar = findViewById(R.id.tool);
    setSupportActionBar(toolbar);
    if (getSupportActionBar() != null) {
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setDisplayShowHomeEnabled(true);
    }
}
@Override
public boolean onSupportNavigateUp() {
    onBackPressed();
    return true;
}
@Override
public void onBackPressed() {
    super.onBackPressed();
    startActivity(new Intent(ActivityOne.this, ActivityTwo.class));
    finish();
} 
```

这是xml文件-

```
<android.support.v7.widget.Toolbar
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="?attr/actionBarSize"
android:background="@color/colorPrimary"
android:theme="@style/ThemeOverlay.AppCompat.Dark"
android:id="@+id/tool"> 
```

并在 styles.xml 中将其更改为

```
Theme.AppCompat.Light.NoActionBar 
```

这就是我们必须做的。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-11-26T02:00:54.487

就我而言；我只需要`android:parentActivityName`像这样将 attr 添加到我的活动中：

```
<activity
 android:name=".AboutActivity"
 android:label="@string/title_activity_about"
 android:parentActivityName=".MainActivity" /> 
```

并且后退按钮出现并按预期工作。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-03-11T04:41:30.700

清单.xml

```
<activity
            android:name=".Activity.SecondActivity"
            android:label="Second Activity"
            android:parentActivityName=".Activity.MainActivity"
            android:screenOrientation="portrait"></activity> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-11-29T06:19:45.867

> 在 oncreate(); 写下这一行->

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

> 然后在该类中实现以下方法

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {
    case android.R.id.home:
        // app icon in action bar clicked; go home
      onBackPressed();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-02-15T14:39:52.207

我是这样解决的

```
@Override
public boolean  onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()) {
        case android.R.id.home:
            onBackPressed();
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

@Override
public void onBackPressed(){
    Intent backMainTest = new Intent(this,MainTest.class);
    startActivity(backMainTest);
    finish();
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-05-12T02:42:58.610

**为了在 Kotlin 中显示操作栏后退按钮，** 有两种实现方式

**1.使用Android提供的默认Action** Bar——你的activity必须使用一个有Action Bar的主题——例如：Theme.AppCompat.Light.DarkActionBar

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    val actionBar = supportActionBar
    actionBar!!.title = "your title"
    actionBar.setDisplayHomeAsUpEnabled(true)
    //actionBar.setDisplayHomeAsUpEnabled(true)
}

override fun onSupportNavigateUp(): Boolean {
    onBackPressed()
    return true
} 
```

**2\. 设计你自己的Action Bar** - 禁用默认Action Bar - 例如：Theme.AppCompat.Light.NoActionBar - 将布局添加到你的activity.xml

```
 <androidx.appcompat.widget.Toolbar
     android:id="@+id/main_toolbar"
     android:layout_width="match_parent"
     app:layout_constraintEnd_toEndOf="parent"
     app:layout_constraintStart_toStartOf="parent"
     app:layout_constraintTop_toTopOf="parent">

     <androidx.constraintlayout.widget.ConstraintLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         tools:layout_editor_absoluteX="16dp">

         <TextView
             android:id="@+id/main_toolbar_title"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="Your Title"
             android:textSize="25sp"
             app:layout_constraintBottom_toBottomOf="parent"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintHorizontal_bias="0.5"
             app:layout_constraintStart_toStartOf="parent"
             app:layout_constraintTop_toTopOf="parent" />

     </androidx.constraintlayout.widget.ConstraintLayout>
 </androidx.appcompat.widget.Toolbar> 
```

*   创建

```
override fun onCreate(savedInstanceState: Bundle?) {
     super.onCreate(savedInstanceState)

     setSupportActionBar(findViewById(R.id.main_toolbar))
 } 
```

*   创建自己的按钮

```
<?xml version="1.0" encoding="utf-8"?>
<menu
 xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:app="http://schemas.android.com/apk/res-auto" >

 <item
     android:id="@+id/main_action_toolbar"
     android:icon="@drawable/ic_main_toolbar_item"
     android:title="find"
     android:layout_width="80dp"
     android:layout_height="35dp"
     app:actionLayout="@layout/toolbar_item"
     app:showAsAction="always"/>

</menu> 
```

*   在 YourActivity.kt

```
override fun onCreateOptionsMenu(menu: Menu?): Boolean {
     menuInflater.inflate(R.menu.main_toolbar_item, menu)

     leftToolbarItems = menu!!.findItem(R.id.main_action_toolbar)
     val actionView = leftToolbarItems.actionView
     val badgeTextView = actionView.findViewById<TextView>(R.id.main_action_toolbar_badge)
     badgeTextView.visibility = View.GONE

     actionView.setOnClickListener {
         println("click on tool bar")
     }
     return super.onCreateOptionsMenu(menu)
 } 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-10-14T06:57:00.507

我的工作代码返回屏幕。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case android.R.id.home:

        Toast.makeText(getApplicationContext(), "Home Clicked",
                Toast.LENGTH_LONG).show();

        // go to previous activity
        onBackPressed();

        return true;

    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-11-04T23:18:29.527

现在回答可能为时已晚，但我认为我有一个更短、更实用的解决方案。

```
// Inside your onCreate method, add these.
ActionBar actionBar = getSupportActionBar();
actionBar.setHomeButtonEnabled(true);
actionBar.setDisplayHomeAsUpEnabled(true);

// After the method's closing bracket, add the following method exactly as it is and voiulla, a fully functional back arrow appears at the action bar
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    onBackPressed();
    return true;
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-10-05T06:00:03.570

```
 public void initToolbar(){
       //this set back button 
       getSupportActionBar().setDisplayHomeAsUpEnabled(true);
       //this is set custom image to back button
       getSupportActionBar().setHomeAsUpIndicator(R.drawable.back_btn_image);
}

//this method call when you press back button
@Override
public boolean onSupportNavigateUp(){
    finish();
    return true;
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-04-05T11:29:10.937

```
ActionBar actionBar=getActionBar();

actionBar.setDisplayHomeAsUpEnabled(true);

@Override
public boolean onOptionsItemSelected(MenuItem item) { 
        switch (item.getItemId()) {
        case android.R.id.home: 
            onBackPressed();
            return true;
        }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-06-26T15:42:10.453

在 onCreate 函数中添加以下代码：

getSupportActionBar().setDisplayHomeAsUpEnabled(true);

然后覆盖：@Override public boolean onOptionsItemSelected(MenuItem item){ onBackPressed(); 返回真；}

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-09T09:17:21.920

在更新版本中 getActionBar() 不起作用！

相反，您可以通过这种方式执行此操作

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    } 
```

[在 android 标题栏中添加后退按钮，](https://geekstocode.com/add-back-button-in-android-title-bar/)这将在 2020 年帮助您

# java - 实例变量的作用隐藏在Java中

> ID：15686562
> 
> 赞同：0
> 
> 时间：2013-03-28T15:59:49.403
> 
> 标签：java, scope

我正在使用 GObject 类创建一个简单的面孔，该类将使用 GRect 和 GOval。我希望 GRect 和 GOval 锚定到我将 getWidth() 和 getHeight() 描述为实例变量的相同坐标。我这样做时没有显示任何错误，但画布上没有结果。只有当我将 getWidth() 和 getHeight() 描述为局部变量时，我才会得到结果。为什么实例变量的效果没有出现？

```
/*
 * This is section 2 problem 2 to draw a face using GRect amnd GOval. The face is     centred in the canvas.
 * PS: The face is scalable w.r.t. canvas.
*/
package Section_2;
import java.awt.Color;
import java.awt.Graphics;

import acm.graphics.GRect;
import acm.program.GraphicsProgram;

/*
 * creates a robot face which is centered in the canvas.
 */
public class RobotFace extends GraphicsProgram{

private static final long serialVersionUID = 7489531748053730220L;

//canvas dimensions for centering
int _canvasWidth = getWidth();
int _canvasHeight = getHeight();
public void run(){

    removeAll();    //to make sure multiple instances of graphic are not drawn during resize as an effect of overriding Java paint method
    //draw objects
    createFace();

}

//currently only createFace() is implemented
/*
 * creates a rect which is centred in the canvas
 */
private void createFace() {

    //canvas dimensions for centering
    //int _canvasWidth = getWidth();
    //int _canvasHeight = getHeight();

    //make the face scalable
    int _faceWidth = _canvasWidth  / 6;
    int _faceHeight = _canvasHeight / 4;
    //to center the face
    int _faceX = (_canvasWidth - _faceWidth)/2;
    int _faceY = (_canvasHeight - _faceHeight)/2;

    GRect _face = new GRect(_faceX , _faceY, _faceWidth, _faceHeight);
    _face.setFilled(true);
    _face.setColor(Color.BLUE);
    add(_face);
}

/*
 * (non-Javadoc)
 * @see java.awt.Container#paint(java.awt.Graphics)
 * to override Java inherited paint method to retain graphic after resizing  
 */
public void paint(Graphics g) {
    this.run();
    super.paint(g);
}    
} 
```

如果取消注释 getWidth() 和 getHeight() 的局部变量，则会得到 Rect ，否则对画布没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:03:21.413

不应在构造函数之外初始化实例变量。可能发生的情况是 getXXX 方法在超类完全初始化之前被调用，因此返回 0

编辑 ：

我的意思是您应该更好地在类构造函数中初始化实例变量，以确保在调用其方法之前正确设置父类：

```
 public class RobotFace extends GraphicsProgram{

 //canvas dimensions for centering
 int _canvasWidth =0;
 int _canvasHeight = 0;

 public RobotFace() {
   super();
   _canvasWidth = getWidth();
   _canvasHeight = getHeight();
 }
 [...] 
```

无论如何，这里不保证它会修复 0 值，因为图形对象由于显示机制通常具有特定的生命周期，因此在构造函数调用后高度和宽度可能仍未初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:46:51.260

好吧，我错误地在初始化 GObject 之前使用了 getWidth() 和 getHeight()，这使 getWidth() 返回 0。因此，确保在 GObject 获得的范围内调用 getWidth() 的唯一方法发起是为每个方法（如 createFace()、createMouth()）使用本地 getWidth()。该程序确实有效，但涉及大量复制粘贴。因此，在替代类 RobotFace2 中，我在 run() 中创建了 GObject，即没有为 createFace() 等创建新方法。这样 getWidth() 只需在 run() 中键入一次，并且眼睛和嘴巴 GRect 可以锚定到面对 GRect。RobotFace2 也可以。

[RobotFace](https://github.com/panchtatvam/Stanford_CS106A/blob/master/src/Section_2/RobotFace.java)和 [RobotFace2](https://github.com/panchtatvam/Stanford_CS106A/blob/master/src/Section_2/RobotFace2.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:20:37.027

问题是初始化时`getWidth()`and `getHeight()`= 0 。`RobotFace`从类级别的这些行中删除并在`createFace`方法中取消注释它们。

```
int _canvasWidth = getWidth();
int _canvasHeight = getHeight(); 
```

# php - PHP/MySQL - while 循环仅显示最新输入的记录

> ID：15686569
> 
> 赞同：0
> 
> 时间：2013-03-28T16:00:08.250
> 
> 标签：php, mysql

我试图让 while 循环显示从表中选择的所有记录，并迭代封装在 <div> 中的结果。我的查询正在工作，而 while 正在显示一些东西……但只有最新的记录。我不知道为什么会这样，而且我对 PHP 很陌生，所以任何帮助都会很棒。

代码：

```
<?php
//Connect to database and select table
$conn = mysql_connect("", "", "") or die(mysql_error());
mysql_select_db("substest", $conn) or die(mysql_error());
//Issue query
$get_features = "SELECT ID, Title, DateReceived, Synopsis FROM features ORDER BY ID";
$r_get_features = mysql_query($get_features) or die(mysql_error);

if(mysql_num_rows($r_get_features) < 1)  {
    $display_block = "<div class=\"inner\"><h2>Nothing to display</h2></div>";
}
else {
    while($feat_array = mysql_fetch_array($r_get_features)) {
    $feat_id = $feat_array["ID"];
    $feat_title = stripslashes($feat_array["Title"]);
    $feat_dater = stripslashes($feat_array["DateReceived"]);
    $feat_synopsis = stripslashes($feat_array["Synopsis"]);

    $display_block = "<div class=\"inner\">";
    $display_block .= "<h2>".$feat_title."</h2>";
    $display_block .= "<label for \"id\">ID:</label>";
    $display_block .= "<span class=\"formresult\" id=\"id\">".$feat_id."</span><br />";
    $display_block .= "<label for=\"title\">Title:</label>";
    $display_block .= "<span class=\"formresult\" id=\"title\">".$feat_title."</span><br />";
    $display_block .= "<label for=\"datereceived\">Date Received:</label>";
    $display_block .= "<span class=\"formresult\" id=\"datereceived\">".$feat_dater."</span><br />";
    $display_block .= "<label for=\"synopsis\">Synopsis:</label>";
    $display_block .= "<span class=\"formresult\" id=\"synopsis\">".$feat_synopsis."</span><br />";
    $display_block .= "</div>";
}
}
?>
<html>
<head>
<title>Galway Film Fleadh - View Submitted Feature Films</title>
<link href="css/submissions.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="wrapper">
    <div class="inner">
        <h1>Galway Film Fleadh - View Submitted Films</h1>
    </div>
    <?php
        print $display_block;
    ?>
</div>        
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:04:43.793

您正在`$display_block`为每个循环迭代覆盖：

```
$display_block = "<div class=\"inner\">"; 
```

在循环*之前*定义它，然后将上面的行更改为：

```
$display_block .= "<div class=\"inner\">"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:04:57.873

替换这一行

```
$display_block = "<div class=\"inner\">"; 
```

经过

```
$display_block .= "<div class=\"inner\">"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:10:35.203

自从

```
 $display_block = "<div class=\"inner\">"; 
```

在循环内，所以在while循环中的每次迭代后，div都会被实例化......

您需要保留旧值，因此必须将其连接起来...将其替换为

```
 $display_block .= "<div class=\"inner\">"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:05:24.027

```
$display_block = "<div class=\"inner\">"; 
```

位于 while 循环内，因此每次迭代时都会获得一个新值并且不保存前一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:04:23.957

尝试将您的 while 更改为：

```
while($feat_array = mysql_fetch_array($r_get_features, MYSQLI_ASSOC)) {
... 
```

# php - 两个同时的 AJAX 请求不会并行运行

> ID：15686572
> 
> 赞同：12
> 
> 时间：2013-03-28T16:00:10.187
> 
> 标签：php, ajax, progress-bar, simultaneous

我遇到了两个同时运行的 AJAX 请求的问题。我有一个将数据导出到 XSLX 的 PHP 脚本。这个操作需要很多时间，所以我试图向用户展示进度。我正在使用 AJAX 和数据库方法。实际上，我很确定它曾经可以工作，但我不知道为什么，它不再在任何浏览器中工作。新浏览器有什么变化吗？

```
$(document).ready(function() {

        $("#progressbar").progressbar();

        $.ajax({
            type: "POST",
            url: "{$BASE_URL}/export/project/ajaxExport",
            data: "type={$type}&progressUid={$progressUid}" // unique ID I'm using to track progress from database
        }).done(function(data) {
            $("#progressbar-box").hide();
            clearInterval(progressInterval);
        });

        progressInterval = setInterval(function() {
            $.ajax({
                type: "POST",
                url: "{$BASE_URL}/ajax/progressShow",
                data: "statusId={$progressUid}" // the same uinque ID
            }).done(function(data) {
                data = jQuery.parseJSON(data);
                $("#progressbar").progressbar({ value: parseInt(data.progress) });
                if (data.title) { $("#progressbar-title").text(data.title); }
            });
        }, 500);

    }); 
```

*   进度在数据库中正确更新
*   JS 计时器正在尝试获取进度，我可以在控制台中看到它，但是所有这些请求都在加载第一个脚本的整个持续时间，一旦脚本结束，这些 ajax 进度调用就会被加载

那么，为什么第二个 AJAX 调用要等待第一个完成呢？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-28T22:07:56.453

听起来像是会话阻塞问题

默认情况下，PHP 将其会话数据写入文件。当您使用 session_start() 启动会话时，它会打开文件进行写入并锁定它以防止并发编辑。这意味着对于使用会话通过 PHP 脚本的每个请求，都必须等待第一个会话完成该文件。

解决此问题的方法是将 PHP 会话更改为不使用文件或关闭会话写入，如下所示：

```
<?php
    session_start(); // starting the session

    $_SESSION['foo'] = 'bar'; // Write data to the session if you want to

    session_write_close(); // close the session file and release the lock

    echo $_SESSION['foo']; // You can still read from the session. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T22:00:45.100

经过一番拉扯，我发现了**另**一种方式可以发生这些非并行 AJAX 请求，完全独立于 PHP 会话处理......所以我在这里发布它只是为了任何通过谷歌到达这里的人都一样问题。

XDebug 可以导致这种情况，如果 Zend Debugger 也可以，我不会感到惊讶。

就我而言，我有：

*   XDebug 安装在我的本地 LAMP 堆栈上
*   `xdebug.remote_autostart`启用
*   我的 IDE 接受入站调试器连接，即使没有处于活动状态的断点

无论如何，这导致我所有的 AJAX 测试都按顺序运行。回想起来，强制顺序处理很有意义（从调试的角度来看），但我根本没有注意到我的 IDE 仍在幕后交互。

在告诉 IDE 完全停止监听后，并行运行恢复，我能够重现我一直在寻找的竞争条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T15:47:57.553

请注意，如果您启用了输出缓冲（PHP 7+ 中的默认设置），`session_write_close()`（ chrislondon 的[回答](https://stackoverflow.com/a/15693029/9933916)）可能无法解决问题。您必须`output_buffering = Off`在**php.ini**中进行设置，否则会话将无法正确关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T06:29:36.923

使用 API 时，您有时需要向不同的端点发出多个 AJAX 请求。您可以使用 jQuery 的 $.when() 函数并行请求数据，而不是等待一个请求完成后再发出下一个请求：

[并行运行多个 AJAX 请求](https://stackoverflow.com/questions/1060539/parallel-asynchronous-ajax-requests-using-jquery/22317997#22317997)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-23T02:45:14.990

**a.php**生成一个主 HTML 页面，其中包含对**b.php**和**c.php**的两个同时 AJAX 调用。为了让**b.php**和**c.php**共享会话变量，会话变量必须在第一次 AJAX 调用之前存在。如果这是真的，**a.php**和**b.php**可以更改会话变量的值并查看彼此的值。因此，在生成 HTML 页面时使用**a.php**创建会话变量。至少这就是它与 Rogers 共享网络托管的工作方式。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-02T17:21:00.483

你也可以设置

```
async: true, 
```

# google-maps - gmaps 从地图中删除 FusionTablesLayer

> ID：15686578
> 
> 赞同：0
> 
> 时间：2013-03-28T16:00:31.020
> 
> 标签：google-maps, google-fusion-tables, removeall

添加后，我在从地图中删除融合表图层时遇到了一些问题。我想修改我的 addRoute 函数（如下），以便在将新图层添加到地图之前删除任何现有的融合表图层。在此先感谢您的帮助！

```
function addRoute() {            
        var route = document.getElementById("route").value;
        var layer = new google.maps.FusionTablesLayer({
            query:
            {
                name: 'fusionLayer',
                select: 'name',
                from: '1I6lehOOrJJ-BkPznjdiIDnr0o9J8EqAnu73f6Ic',
                where: "name = '" + route + "'"
            }
        });            
        map.loadFromFusionTables(layer);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T16:49:53.553

看起来您可能正在使用 gmap3.js ("loadFromFusionTables")

如果您在“addRoute”函数之外保留对图层的引用，则可以将其“map”属性设置为 null 以将其从地图中删除：

```
layer.setMap(null); 
```

在谷歌地图 API v3 中。或者您可以在不破坏和重新创建图层的情况下更改路线：

```
var route = document.getElementById("route").value;
layer.setOptions({query:
        {
            name: 'fusionLayer',
            select: 'name',
            from: '1I6lehOOrJJ-BkPznjdiIDnr0o9J8EqAnu73f6Ic',
            where: "name = '" + route + "'"
        }}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:48:03.783

谢谢，这很有帮助。我最终改变了一点：

```
for (var i = 0; i < map.layers.length; i++) {
   map.layers[i].setMap(null);                    
} 
```

这将删除所有图层（包括我一直在努力的 FusionTablesLayer）

# jquery - 验证插件未在 add 方法中验证正则表达式

> ID：15686580
> 
> 赞同：0
> 
> 时间：2013-03-28T16:00:39.210
> 
> 标签：jquery, jquery-validate

我已经尝试使用 jquery 验证插件进行基本的正则表达式验证，但问题是它仅适用于“必需”规则，但不适用于添加方法 regexvalid。如何实现这一目标

提前致谢，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
     <script type="text/javascript" src="js/jquery-1.9.0.mini.js" > </script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js" ></script>
    <script type="text/javascript">
        $(document).ready(function () {
    jQuery.validator.addMethod("regexvalid",function(element,value){
            return this.optional(element)|| /[0-9]*/.test(value);

    });
            $('#logform').validate({
                rules: {
                    txtUsr: {
                        required: true,
                        regexvalid:true

                    },
                    txtPass: {
                        required: true

                    }

                },
                messages: {
                    txtUsr: {
                        required: 'Please enter username',
                        regexvalid:'valid numbers'
                    },
                    txtPass: {
                        required: 'Please enter password'
                    }
                }

            });

        });

    </script>
    <style type="text/css">

.error

{

border-color:Red;

border-style:solid;

border-width:1px;

}

#signupForm label.error {
    margin-left: 10px;
    width: auto;
    display: inline;
}

</style>
</head>
<body>
<div id='LoginDiv' style='width:400px;height:300px;background-color:green;'>
    <form id='logform'>
        User Name : <input type="text" id='txtUsr' name='txtUsr' style='margin-top:12px'/>
        <br/>
        <br/>
        Password : <input type="text" id='txtPass' name='txtPass' /> 
        <br/>
        <br/>
        <input type="submit" id='btnSubmit' value='Submit' />
    </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:22:06.240

这里有两个问题。

**1）** 您传递给自定义方法的变量是*向后*的：

```
jQuery.validator.addMethod("regexvalid",function(element,value){ 
```

[根据文档](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)，`value`首先...

```
jQuery.validator.addMethod("regexvalid",function(value, element){ 
```

**2）** 我不是正则表达式的专家，*你还没有解释它应该做什么*，但它似乎无效。如果您想测试该值是否为数字，请使用[默认`number`规则](http://docs.jquery.com/Plugins/Validation/Methods/number)。否则，该`regexvalid`方法本身是有效的，您只需要正确调整您的正则表达式。

这是使用默认`number`方法中的正则表达式函数作为演示。

```
jQuery.validator.addMethod("regexvalid", function (value, element) {
    return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
}); 
```

**演示：http: [//jsfiddle.net/ZFd4B/](http://jsfiddle.net/ZFd4B/)**

* * *

**编辑，关于您的 Regex**：

您的正则表达式`/[0-9]*/.test(value)`似乎什么都不做的原因是因为它实际上什么都不做。

*   `[0-9]`匹配任何数字。

*   `*`告诉它匹配前面表达式的“**零个或多个**”。

所以多亏了，不管怎样`*`，测试总会返回。`true``[0-9]`

你从来没有解释过这个自定义方法应该做什么，但`regex`你提供的实际上是没有实际意义的，因为它似乎总是满足每个条件。

来源： [http ://webcheatsheet.com/php/regular_expressions.php#basics](http://webcheatsheet.com/php/regular_expressions.php#basics)

# javascript - 提交按钮外 标签

> ID：15686585
> 
> 赞同：8
> 
> 时间：2013-03-28T16:01:00.483
> 
> 标签：javascript, jquery, forms

我已经搜索了两个小时，但找不到任何解决方案。

我想要两个提交按钮，一个在 <form> 标签内，一个在 <form> 标签外。

```
<form id="example" name="example" action="post">
    Input <input type="text" name="text" />
    <input type="submit" name="submit" value="submit" />
</form>

<div class="button">Submit</div> 
```

JS/jQuery

```
$(".button").click( function() {
    alert("Button clicked");
}); 
```

如何在表单外发送带有 ('.button') 类的表单？

JS 小提琴在这里：http: [//jsfiddle.net/ZQLXb/](http://jsfiddle.net/ZQLXb/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T16:02:20.620

使用`submit()`函数触发表单提交：

```
$(".button").click( function() {
    $('#example').submit();
}); 
```

您还可以使用以下`trigger()`功能：

```
$(".button").click( function() {
    $('#example').trigger('submit');
}); 
```

尽管他们做的事情完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:02:59.980

使用[`submit()`](http://api.jquery.com/submit/)函数提交表单

```
$(".button").click( function() {
   $('#example').submit();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T12:26:11.350

```
$(".button").bind("click",function() {
    $('#example').submit();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:02:30.720

您可以在表单上触发`submit`事件：

```
$('#example').trigger('submit') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T16:02:49.317

```
$(".button").click( function() {
    $('#example').submit();
}); 
```

# java - Java：解析 OData Atom 提要

> ID：15686586
> 
> 赞同：1
> 
> 时间：2013-03-28T16:01:01.037
> 
> 标签：java, parsing, odata, feed, atom-feed

如何解析 odata atom 提要？

注意：xml 数据已经在我的系统上。所以我需要一个带有字符串或本地文件路径的库。

例子：

```
<?xml version="1.0" encoding="utf-8"?><feed xml:base="http://10.0.2.2/dataservice/data.svc/" xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><id>http://10.0.2.2/dataservice/data.svc/Areas/</id><title type="text">Areas</title><updated>2013-03-28T14:45:13Z</updated><link rel="self" title="Areas" href="Areas" /><entry><id>http://10.0.2.2/dataservice/data.svc/Areas('filestore')</id><category term="Dms.Data.Services.Context.Entities.DmsArchiveArea" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /><link rel="edit" title="DmsArchiveArea" href="Areas('filestore')" /><title /><updated>2013-03-28T14:45:13Z</updated><author><name /></author><content type="application/xml"><m:properties><d:Id>filestore</d:Id><d:Name>filestore</d:Name><d:Reche m:type="Edm.Boolean">true</d:Reche><d:Scann m:type="Edm.Boolean">true</d:Scann><d:Indiz m:type="Edm.Boolean">true</d:Indiz><d:Datei m:type="Edm.Boolean">true</d:Datei><d:Revis m:type="Edm.Boolean">true</d:Revis><d:Speich m:type="Edm.Boolean">true</d:Speich><d:Druck m:type="Edm.Boolean">true</d:Druck><d:Mail m:type="Edm.Boolean">true</d:Mail><d:Archiv m:type="Edm.Boolean">true</d:Archiv><d:Attrae m:type="Edm.Boolean">true</d:Attrae><d:Annoarch m:type="Edm.Boolean">true</d:Annoarch><d:Annorech m:type="Edm.Boolean">true</d:Annorech><d:Annorevi m:type="Edm.Boolean">true</d:Annorevi><d:ReviView m:type="Edm.Boolean">true</d:ReviView><d:ReviAend m:type="Edm.Boolean">true</d:ReviAend><d:WeichAttribAend m:type="Edm.Boolean">true</d:WeichAttribAend><d:IntervallEinstellBar m:type="Edm.Boolean">true</d:IntervallEinstellBar><d:SeitenKopieren m:type="Edm.Boolean">true</d:SeitenKopieren><d:SeitenAend m:type="Edm.Boolean">true</d:SeitenAend><d:DokLoeschen m:type="Edm.Boolean">true</d:DokLoeschen></m:properties></content></entry

........ 
```

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:11:01.787

看看[odata4j](https://code.google.com/p/odata4j/)。它具有服务器/客户端支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:05:51.260

[您可以在此处](http://javarevisited.blogspot.com/2011/12/parse-xml-file-in-java-example-tutorial.html)参考 Java 中的通用 XML 解析示例

基本上：

```
File feed = new File("yourlocal/file/path/atom.xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(feed); 
```

阅读更多：http: [//javarevisited.blogspot.com/2011/12/parse-xml-file-in-java-example-tutorial.html#ixzz2OqpN0LFg](http://javarevisited.blogspot.com/2011/12/parse-xml-file-in-java-example-tutorial.html#ixzz2OqpN0LFg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:38:05.997

如果您使用的是 .NET Framework，请查看 ODataLib。你可以在这里下载它作为 NuGet 包： http: [//nuget.org/packages/Microsoft.Data.OData/5.3.0](http://nuget.org/packages/Microsoft.Data.OData/5.3.0)

或从 WCF 数据服务 5.3.0 RTM 工具安装程序 [http://www.microsoft.com/en-us/download/details.aspx?id=35840](http://www.microsoft.com/en-us/download/details.aspx?id=35840)

可以在这里找到一个小教程：http: [//blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx](http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx)

# jquery - jQuery UI 按钮背景颜色/图像通过圆角显示（有时）

> ID：15686591
> 
> 赞同：0
> 
> 时间：2013-03-28T16:01:13.287
> 
> 标签：jquery, jquery-ui, button, rounded-corners

我使用 jQuery UI 已经有一段时间了，最​​近开始在圆角按钮的角边缘看到一些伪影。

这是我正在谈论的图片和放大图。可以看到按钮的边框是黄色的，按钮的背景是紫色的。有时（并非一直）背​​景颜色会通过圆角边框“渗出”。给它一种模糊的不干净的外观。更多对比色甚至更糟。

[链接到坏角图像](http://www.masterkeyhost.com/bad_corner_test.jpg)

我在任何具有圆角的 jQuery UI 元素上都看到了这一点：对话框、选项卡、手风琴等......

没有应用特殊/自定义样式。这只是默认的主题滚轮输出。

我正在使用 jQuery 1.8.3 和 UI 1.9.2。

有没有其他人注意到这一点和/或是否有人知道修复？

谢谢！

# c# - 我如何使用用户定义的对象列表填充 Gridview 组合框

> ID：15686592
> 
> 赞同：0
> 
> 时间：2013-03-28T16:01:13.700
> 
> 标签：c#, entity-framework

在 EF 中，我有一个 Entity,Stuff，我想用以下代码填充一个 Gridview 组合框，其中包含 Stuffs 表中的所有 Stuff：

```
 var stuffs = from t in Database.Context.Stuffs
              select t;
 return stuffs.ToList<Stuff>();

 datagridview.datasource=stuffs; 
```

我覆盖 ToString 方法：

```
 public override string ToString()
 {
    return this.Name + "-" + this.CompanyName;
 } 
```

但得到这个错误：

datagridview 组合框单元格值无效错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:13:13.150

您是否尝试让组合框显示多列？

你能发送你的组合框的xaml代码吗？你如何绑定它？

如果是这样，您可能需要将每一列绑定到类的属性上，而不是重写 ToString() 以返回字符串中的每个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:15:10.263

我并不是说这是最好的方法，我不熟悉 WinForms。

但是有了这个样本，它似乎确实想要你想要的： ![在此处输入图像描述](../Images/36ef0f20294ec1277ab49ae53717e065.png)

```
class Stuff
    {
        public string Name { get; set; }
        public string CieName { get; set; }

        public override string ToString()
        {
            return string.Format("{0}-{1}", Name, CieName);
        }
    }

    public partial class Form1 : Form
    {
        private List<Stuff> _myList = new List<Stuff>()
                                          {
                                              new Stuff() {Name = "Anne", CieName = "Google"},
                                              new Stuff() {Name = "Creg", CieName = "Yahoo"}
                                          };

        public Form1()
        {
            InitializeComponent();

            BindComboBoxColumnDataSource();
        }

        private void BindComboBoxColumnDataSource()
        {
            var comboColumn = dataGridView1.Columns["ComboBoxColumn"] as DataGridViewComboBoxColumn;

            if (comboColumn != null)
                comboColumn.DataSource = _myList;
        }
    } 
```

# java - dalvik.system.BaseDexClassLoader.findClass 中的 java.lang.ClassNotFoundException

> ID：15686593
> 
> 赞同：9
> 
> 时间：2013-03-28T16:01:14.790
> 
> 标签：java, android, dalvik, crash-reports, google-play-services

这个错误让我发疯。从 Google Play 商店下载时，我的应用程序在启动时崩溃并出现以下错误：

```
java.lang.ClassNotFoundException
in dalvik.system.BaseDexClassLoader.findClass 
```

在我们的两台设备上从 eclipse 构建时，我的应用程序不会崩溃。然而一个月前，一位客户使用他的手机构建了我们的应用程序，然后它在启动时也崩溃了。我当时忽略了这个问题，因为它在我们的设备上运行，并认为它与谷歌地图密钥或密钥库有关。

现在事实证明，当从 Play 商店下载时，我们的应用程序在每台设备上都会崩溃。我知道没有一种简单的方法可以解决这个问题，但我们将不胜感激朝着正确的方向前进。

我也发现很难调试这个问题，因为在我们的设备上从 eclipse 构建应用程序时效果很好！

这是我报告的完整错误日志：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.denederlandsewateren.winkeloord/com.denederlandsewateren.views.StartScreenActivity}: java.lang.ClassNotFoundException: com.denederlandsewateren.views.StartScreenActivity
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2099)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
at android.app.ActivityThread.access$600(ActivityThread.java:142)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4931)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.denederlandsewateren.views.StartScreenActivity
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2090)
... 11 more 
```

再说一次，我除了直接回答这个问题之外，也许有人可以通过这个错误日志来解释这个问题。

**编辑**

如果有帮助，这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxxx.xxxxx"
    android:versionCode="1"
    android:versionName="1.0" >

    <permission
        android:name="com.xxxxx.xxxxx.MAPS_RECEIVE"
        android:protectionLevel="signature" />
    <permission
        android:name="com.xxxxx.xxxxx.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="my_app_package.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.xxxxxx.xxxxx.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/app_icon"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <service android:name="com.xxxxxx.xxxxx.GCMIntentService" />

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="xxxxxxxx" />

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.xxxxxx.xxxxxxx" />
            </intent-filter>
        </receiver>

        <activity
            android:name="com.xxxxx.xxxxx.MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait">
            <!--<intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> -->
        </activity>

        <meta-data
            android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/app_id" />

        <activity android:name="com.facebook.LoginActivity" >
        </activity>
        <activity
            android:name="com.xxxxxx.xxxxxx.StartScreenActivity"
            android:label="@string/app_name" 
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**编辑**

在设备上安装应用程序时添加了详细日志

```
03-30 17:56:28.554: D/dalvikvm(5150): GC_FOR_ALLOC freed 233K, 68% free 2639K/8195K, paused 13ms, total 13ms
03-30 17:56:28.574: I/dalvikvm-heap(5150): Grow heap (frag case) to 26.682MB for 16777232-byte allocation
03-30 17:56:28.594: D/dalvikvm(5150): GC_CONCURRENT freed <1K, 23% free 19022K/24647K, paused 2ms+9ms, total 21ms
03-30 17:56:29.114: D/dalvikvm(5150): GC_FOR_ALLOC freed 0K, 23% free 19022K/24647K, paused 15ms, total 15ms
03-30 17:56:29.129: I/dalvikvm-heap(5150): Grow heap (frag case) to 35.681MB for 9437200-byte allocation
03-30 17:56:29.169: D/dalvikvm(5150): GC_CONCURRENT freed 0K, 17% free 28238K/33927K, paused 2ms+2ms, total 38ms
03-30 17:56:29.254: D/libEGL(5150): loaded /system/lib/egl/libEGL_mali.so
03-30 17:56:29.259: D/libEGL(5150): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-30 17:56:29.259: D/libEGL(5150): loaded /system/lib/egl/libGLESv2_mali.so
03-30 17:56:29.284: D/OpenGLRenderer(5150): Enabling debug mode 0
03-30 17:56:32.154: D/KEY(5150): UUID
03-30 17:56:32.179: I/System.out(5150): UUID: xxxxxxxxxxxxxx
03-30 17:56:32.179: E/SerializeObject(5150): FileNot Found in ReadSettings filename = xxxxx.dat
03-30 17:56:32.184: D/GCMRegistrar(5150): resetting backoff for com.xxxxx.xxxxx
03-30 17:56:32.214: V/GCMRegistrar(5150): Registering app com.xxxxx.xxxxx of senders 752727514714
03-30 17:56:32.214: D/KEY(5150): pushEnabled
03-30 17:56:32.324: V/SlidingMenu(5150): setting padding!
03-30 17:56:32.394: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.394: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.394: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.409: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.414: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.414: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.424: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.424: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.429: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.434: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.434: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.434: W/AllCapsTransformationMethod(5150): Caller did not enable length changes; not transforming text
03-30 17:56:32.459: V/CustomViewBehind(5150): behind INVISIBLE
03-30 17:56:36.894: D/dalvikvm(5150): GC_CONCURRENT freed 20031K, 58% free 15574K/36551K, paused 4ms+7ms, total 49ms
03-30 17:56:36.894: D/dalvikvm(5150): WAIT_FOR_CONCURRENT_GC blocked 31ms
03-30 17:56:37.504: I/System.out(5150): VaarApp ID: 5
03-30 17:56:37.534: I/Choreographer(5150): Skipped 122 frames!  The application may be doing too much work on its main thread.
03-30 17:56:37.539: V/GCMBroadcastReceiver(5150): onReceive: com.google.android.c2dm.intent.REGISTRATION
03-30 17:56:37.544: V/GCMBroadcastReceiver(5150): GCM IntentService class: com.xxxxx.xxxxx.GCMIntentService
03-30 17:56:37.549: V/GCMBaseIntentService(5150): Acquiring wakelock
03-30 17:56:37.794: V/GCMBaseIntentService(5150): Intent service name: GCMIntentService-DynamicSenderIds-1
03-30 17:56:37.794: E/GCMRegistrar(5150): internal error: retry receiver class not set yet
03-30 17:56:37.794: V/GCMRegistrar(5150): Registering receiver
03-30 17:56:37.799: D/GCMBaseIntentService(5150): handleRegistration: registrationId = xxxxxxxxx-xxxxxxxx-xxxxxxxx-xxxxxx-xxxxx-xxxx, error = null, unregistered = null
03-30 17:56:37.799: D/GCMRegistrar(5150): resetting backoff for com.xxxxx.xxxxx
03-30 17:56:37.799: V/GCMRegistrar(5150): Saving regId on app version 1
03-30 17:56:37.829: V/GCMBaseIntentService(5150): Releasing wakelock
03-30 17:56:39.169: D/dalvikvm(5150): GC_CONCURRENT freed 2248K, 52% free 17830K/36551K, paused 6ms+12ms, total 95ms
03-30 17:56:39.169: D/dalvikvm(5150): WAIT_FOR_CONCURRENT_GC blocked 12ms
03-30 17:56:39.174: D/dalvikvm(5150): WAIT_FOR_CONCURRENT_GC blocked 48ms
03-30 17:56:41.164: I/dalvikvm(5150): Jit: resizing JitTable from 4096 to 8192
03-30 17:56:42.229: D/dalvikvm(5150): GC_CONCURRENT freed 4265K, 49% free 18778K/36551K, paused 3ms+6ms, total 58ms
03-30 17:56:42.229: D/dalvikvm(5150): WAIT_FOR_CONCURRENT_GC blocked 41ms
03-30 17:56:42.234: D/dalvikvm(5150): WAIT_FOR_CONCURRENT_GC blocked 46ms
03-30 17:57:51.759: D/dalvikvm(5150): GC_CONCURRENT freed 5476K, 49% free 18775K/36551K, paused 21ms+6ms, total 196ms 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T21:55:14.870

所以确实是 ProGuard 从我的项目中剥离了代码。我使用 ActionBarSherlock 和 facebook，这是我添加的，所以它可以工作：

```
# ActionBarSherlock 

-keep class android.support.** { *; } 

-keep interface android.support.** { *; } 

-keep class com.actionbarsherlock.** { *; } 

-keep interface com.actionbarsherlock.** { *; } 

# Keep line numbers to alleviate debugging stack traces 

-renamesourcefileattribute SourceFile 

-keepattributes SourceFile,LineNumberTable 
```

这是脸书：

```
-keepclassmembers class * implements java.io.Serializable
{
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:15:39.893

好吧，我建议您关注您从 eclipse 进行的构建与您提供给 Play 商店的构建之间的区别。

如果您可以重现您从 playstore 中看到的错误，同时使用 eclipse 构建并测试它，您肯定会找到答案。

我能想到的是应用程序获得签名的证书，但似乎并非如此。但是，您应该更多地考虑两个 .apk 之间的区别 - 开发人员构建和 Playstore 构建。

由于 .apk 基本上是档案，您可以将它们都解压缩，查看它们之间的差异。您应该使用 dedexer 尝试反编译 classes.dex 的两个实例（请参阅将[DEX 反编译为 Java 源代码](https://stackoverflow.com/questions/1249973/decompiling-dex-into-java-sourcecode)）。它可能是高度混淆的代码，但您应该寻找丢失的类或类似的东西。

希望你做对了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T14:10:07.120

右键单击您的项目文件夹 => 属性 => Java 构建路径 => 订购和导出 => 如果未选中，请选中“Android Private Libraries”框。它有效！

# javascript - 如何使 JSON.stringify 编码 UTF 字符

> ID：15686596
> 
> 赞同：3
> 
> 时间：2013-03-28T16:01:20.340
> 
> 标签：javascript, json, encode, utf, stringify

我正在编写一个使用 windows 运行的 JS `cscript.exe`。我的 JS 正在从文件加载 JSON 对象，添加一个参数并将其保存回文件（使用 json2.min.js 实现）。

我`JSON.parse(text)`用来将文本解析为 JSON 对象，然后`JSON.stringify(text, null, 3)`创建我正在写回的字符串。在我遇到 Unicode 编码之前，一切都很好。

在文件中有某些值，例如

```
"someKey": "\u003Ca href=\"http://www.something.com\"\u003E" 
```

在我读取并保存回文件 ( `stringify`) 后更改为：

```
"someKey": "< a href=\"http://www.something.com\"> 
```

还有一些其他的外来 Unicode 字符被转换。

**执行时如何保留原始编码`stringify`？**

**是否有任何转换功能可以在使用期间`stringify`或之后使用？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:30:39.057

JSON 不是二进制安全的，因此请避免使用它。

有一些二进制安全的类似 JSON 的实现：在[http://kaijaeger.com/articles/introducing-bison-binary-interchange-standard.html检查 BISON](http://kaijaeger.com/articles/introducing-bison-binary-interchange-standard.html)

# jquery - 淡出之前的jQuery延迟

> ID：15686598
> 
> 赞同：23
> 
> 时间：2013-03-28T16:01:27.467
> 
> 标签：jquery, delay

我编写了一个 jquery 脚本，允许我淡入淡出 div，然后重复。代码工作正常。但是，当我尝试添加延迟时（我希望 div 在淡出之前保持几秒钟），它无法正常工作。我尝试在代码中的几个地方添加延迟，但似乎都没有正常工作。我正在使用 Jquery 版本 1.9.1

**这是我写的脚本：**

```
$(document).ready(function(){
   ShowPostDiv(0);
});

function ShowPostDiv(divIndex)
{
    $(".home_entry_txt").hide();

    if(divIndex >= $(".rotate_hide").length)
    {
        divIndex = 0;
    }
    var divPostHtml = $(".rotate_hide:eq("+divIndex+")").html();
    $(".home_entry_txt").html(divPostHtml); 
    $(".home_entry_txt").fadeIn(3000, function(){
             $(".home_entry_txt").fadeOut("slow");
        });
    divIndex++;
    setTimeout("ShowPostDiv("+divIndex+")", 4000);
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-28T16:05:38.417

你可以写

```
$(".home_entry_txt").fadeIn(3000).delay(1000).fadeOut("slow"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T16:09:23.997

你试过.delay（）吗？就像是：

```
$(".home_entry_txt").fadeIn().delay(200).queue(function(next) {
$(".home_entry_txt").fadeOut("slow");
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T16:06:20.543

尝试这个

```
$(document).ready(function(){
   ShowPostDiv(0);
});

function ShowPostDiv(divIndex)
{
    $(".home_entry_txt").hide();

    if(divIndex >= $(".rotate_hide").length)
    {
        divIndex = 0;
    }
    var divPostHtml = $(".rotate_hide:eq("+divIndex+")").html();
    $(".home_entry_txt").html(divPostHtml); 
    $(".home_entry_txt").fadeIn(3000, function(){
        setTimeout(function(){
            $(".home_entry_txt").fadeOut("slow");
        },4000);
    });
    divIndex++;
} 
```

# eclipse - 上下文初始化失败：Spring & Hibernate Project

> ID：15686599
> 
> 赞同：0
> 
> 时间：2013-03-28T16:01:29.370
> 
> 标签：eclipse, spring, hibernate

一切正常，直到我在 spring 配置文件（SpringMVCProj-servlet.xml）中添加了 Hibernate SessionFactory 配置。

我是新手……所以无法真正解决这个问题。我猜我需要在我的 web.xml 文件中进行一些更改。我添加了**错误日志、web.xml 和我的 spring 配置。**

**错误**

```
 4  INFO ContextLoader:272 - Root WebApplicationContext: initialization started
12:11:36,178  INFO XmlWebApplicationContext:510 - Refreshing Root WebApplicationContext: startup date [Thu Mar 28 12:11:36 EDT 2013]; root of context hierarchy
[2013-03-28 12:11:36] JRebel-Spring: Monitoring Spring bean definitions in '/Users/ronyjohn007/JAR's Downloads/Databases/apache-tomcat-6.0.36/webapps/SpringMVCProj/WEB-INF/SpringMVCProj-servlet.xml'.
12:11:36,693  INFO XmlBeanDefinitionReader:315 - Loading XML bean definitions from ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]
12:11:37,962  INFO DefaultListableBeanFactory:577 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3394214b: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,homeController,userDAOImpl,userServiceImpl,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,viewResolver,dataSource,sessionFactory,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
12:11:38,121  INFO DefaultListableBeanFactory:444 - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3394214b: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,homeController,userDAOImpl,userServiceImpl,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,viewResolver,dataSource,sessionFactory,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
12:11:38,122 ERROR ContextLoader:307 - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Invocation of init method failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] for bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.HibernateTransactionManager] for bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.HibernateTransactionManager
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)

Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1332)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:337)

Caused by: java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 38 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)

Caused by: java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 43 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] for bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1332)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:337)

Caused by: java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 43 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.HibernateTransactionManager] for bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.HibernateTransactionManager
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)

Caused by: java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.HibernateTransactionManager
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 43 more
Mar 28, 2013 12:11:38 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Invocation of init method failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] for bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.HibernateTransactionManager] for bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.HibernateTransactionManager
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)

Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1332)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:337)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:316)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:303)
    at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1174)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:101)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:87)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:150)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 27 more
Caused by: java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 38 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.jdbc.datasource.DriverManagerDataSource] for bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1332)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:337)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:308)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:416)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1188)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.detectMappedInterceptors(AbstractHandlerMapping.java:220)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.initApplicationContext(AbstractHandlerMapping.java:195)

Caused by: java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:415)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1284)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1255)
    ... 43 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] for bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)

Caused by: java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)

Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.HibernateTransactionManager] for bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/SpringMVCProj-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.HibernateTransactionManager
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581) 
```

**SpringMVCProj-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <!-- Annotation Driven Autowiring capability -->
    <context:annotation-config></context:annotation-config>

    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

    <!-- Scans the classpath of this application for @Components to deploy as 
        beans -->
    <context:component-scan base-package="com.job" />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources/ directory -->
    <mvc:resources mapping="/**" location="/" />

    <!-- Resolves view names to protected .jsp resources within the /WEB-INF/views 
        directory -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <context:property-placeholder location="classpath:config.properties"></context:property-placeholder>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" destroy-method="close">
       <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/mydb" />
        <property name="username" value="root" />
        <property name="password" value="12345" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"></property>
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
        <property name="packagesToScan" value="com.job"></property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <tx:annotation-driven transaction-manager="transactionManager"></tx:annotation-driven> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring MVC Application</display-name>

<!--   <welcome-file-list>
    <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>

 <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
  </welcome-file-list> -->

   <servlet>
      <servlet-name>SpringMVCProj</servlet-name>
      <servlet-class>
         org.springframework.web.servlet.DispatcherServlet
      </servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
      <servlet-name>SpringMVCProj</servlet-name>
      <url-pattern>/</url-pattern>
   </servlet-mapping>

<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/SpringMVCProj-servlet.xml</param-value>
</context-param>

<listener>
   <listener-class>
      org.springframework.web.context.ContextLoaderListener
   </listener-class>
</listener>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:07:29.197

此错误意味着类加载器无法在类路径中找到该类。

```
java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) 
```

您缺少类路径上的 aopalliance jar。

如果您使用的是 Maven，则可以添加

```
<dependency>
    <groupId>aopalliance</groupId>
    <artifactId>aopalliance</artifactId>
    <version>1.0</version>
</dependency> 
```

到您的依赖项。

否则，请从[此处](http://mvnrepository.com/artifact/aopalliance/aopalliance)手动下载并将其添加到您的类路径中。

现在你得到了更多的 ClassNotFoundExceptions：

```
java.lang.ClassNotFoundException: org.springframework.jdbc.datasource.DriverManagerDataSource 
```

这个来自`spring jdbc`

```
<!-- use whichever version you have for your other spring packages -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>3.2.1.RELEASE</version> 
</dependency> 
```

如果你不断收到这样的错误，你应该尝试找到丢失的类在哪个库中并查找它以找到 maven 依赖项。

# android - Android 应用内计费 - 无法测试真实产品 ID 购买

> ID：15686604
> 
> 赞同：0
> 
> 时间：2013-03-28T16:01:46.923
> 
> 标签：android, billing

我正在我的应用程序中实施应用程序计费。我遵循了谷歌提供的示例，我相信一切都井井有条。我面临的问题是，当我尝试测试真实购买（使用我自己的产品 ID）时，我能够访问我的应用内产品的 Google 结帐，但我尝试在任何测试中使用的每张信用卡帐户，也不例外（灰色显示“此付款方式已被拒绝”）。看来我的开发者帐户只是不接受信用卡。我的结帐帐户处于活动状态，并且我的 adSense 银行帐户已通过验证。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:37:46.883

我的结帐商户帐户似乎有问题。谷歌让我创建一个新的开发者帐户，它现在正在工作。

# scala - 对无限参数应用函数

> ID：15686606
> 
> 赞同：2
> 
> 时间：2013-03-28T16:01:49.243
> 
> 标签：scala, functional-programming

我想用这种语法编写一个可以获取无限参数的函数

myfunc arg1 arg2 arg3 ....我尝试了一些使用curring但没有任何帮助我试图使其递归但随后scala编译器说：“scala递归方法需要结果类型”递归：

```
def func(x:Int) = {
  doSomething(x); myVal:Int=>func(myVal)
} 
```

感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:07:59.533

简单的：

```
scala> class FRP1 { def apply(args: Int*) = args.mkString("{", ", ", "}") }
defined class FRP1

scala> val frp11 = new FRP1
frp11: FRP1 = FRP1@147611bd

scala> frp11(1)
res0: String = {1}

scala> frp11(1, 2)
res1: String = {1, 2}

scala> frp11(1, 2, 3)
res2: String = {1, 2, 3} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T17:39:57.693

因此，您寻找的函数接受某种类型的参数，并且必须返回一个接受相同类型参数的函数，并返回一个接受相同类型参数的函数，以此类推，无穷无尽。

这里的问题是这个函数的类型是这样的：

```
T[X] = X => T[X] 
```

也就是说，它是一种递归的、自引用的类型。因为它是自引用的，所以我们必须将其命名为在其内部重用它的唯一目的（不幸的是，Scala 没有用于无限类型的定点组合器）。让我们称之为它`InfCurry`，它看起来像这样：

```
trait InfCurry[T] extends (T => InfCurry[T]) 
```

如您所见，它很好地模仿了上述定义（另一种选择是类型别名，但 Scala 不支持递归类型别名）。

让我们也定义一个构造方法来帮助定义我们的无限柯里化函数：

```
object InfCurry {
  def apply[T](f: T => InfCurry[T]): InfCurry[T] = new InfCurry[T] {
    def apply(x: T) = f(x)
  }
} 
```

使用这个小工具，您可以定义如下内容：

```
val f: InfCurry[Int] = InfCurry { x =>
  println(x)
  f
} 
```

你会像这样使用这个小东西：

```
val g = f(1)(2)(3)(4)(5)(6)(7)
g(8)(9)(10)(11)(12) 
```

在这种情况下，您可能希望使用具有可变数量参数的方法 - 请参阅其他答案 - 但这就是您所要求的。

# maven - Maven重命名模块名称

> ID：15686611
> 
> 赞同：1
> 
> 时间：2013-03-28T16:01:56.157
> 
> 标签：maven, module, maven-archetype

我有一个原型项目，看起来像这样（有两个模块，`__artifactId__-1`和`__artifactId__-2`）：

```
Parent
      pom.xml
      __artifactId__-1
            pom.xml
      __artifactId__-2
            pom.xml 
```

并且，当我使用此原型生成项目时，工件 ID 为“Infra”，它应该产生如下结构：

```
Parent
      pom.xml
      Infra-1
            pom.xml
      Infra-2
            pom.xml 
```

它确实如此。所以这确实有效。

不起作用的是在父 pom.xml 中，我已将此模块包含为：

```
<modules>
      <module>__artifactId__-1</module>
      <module>__artifactId__-2</module>
</modules> 
```

这些模块条目不会重命名为（生成时）：

```
<modules>
      <module>Infra-1</module>
      <module>Infra-2</module>
</modules> 
```

这就是我要的。

知道如何做到这一点，谢谢。

***更新*** 我按要求在此处添加元数据 xml 文件，但我不想修改 archetype-metadata.xml 文件。因为我想使用 create-from-project 命令创建原型，然后在没有任何人工干预或返工的情况下安装和生成。

```
<?xml version="1.0" encoding="UTF-8"?>
<archetype-descriptor xsi:schemaLocation="http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0 http://maven.apache.org/xsd/archetype-descriptor-1.0.0.xsd" name="archetype-1"
    xmlns="http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <fileSets>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>__artifactId__-1/src</directory>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>support</directory>
      <includes>
        <include>**/*.xml</include>
        <include>**/*.properties</include>
        <include>**/*.txt</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>properties/deploy</directory>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>__artifactId__-2/target</directory>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>__artifactId__-2/src</directory>
      <includes>
        <include>**/*.jsp</include>
        <include>**/*.java</include>
        <include>**/*.xml</include>
        <include>**/*.properties</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>properties</directory>
      <includes>
        <include>**/*.properties</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>__artifactId__-2</directory>
      <includes>
        <include>**/*.project</include>
        <include>**/*.xml</include>
        <include>**/*.classpath</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>__artifactId__-1</directory>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>support/lib</directory>
      <includes>
        <include>**/*.txt</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>__artifactId__-2/.settings</directory>
      <includes>
        <include>**/*.prefs</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>support</directory>
      <includes>
        <include>**/*.jar</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>__artifactId__-2/src</directory>
      <includes>
        <include>**/*.jpg</include>
        <include>**/*.MF</include>
        <include>**/*.md</include>
        <include>**/*.png</include>
        <include>**/*.jar</include>
        <include>**/*.js</include>
        <include>**/*.ftl</include>
        <include>**/*.xsd</include>
        <include>**/*.XML</include>
        <include>**/*.TXT</include>
        <include>**/*.gif</include>
        <include>**/*.css</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>__artifactId__-2</directory>
      <includes>
        <include>**/*.checkstyle</include>
        <include>**/*.pmd</include>
        <include>**/*.log</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>support/bin</directory>
      <includes>
        <include>**/*.bat</include>
        <include>**/*.log</include>
      </includes>
    </fileSet>
    <fileSet encoding="UTF-8">
      <directory>support/lib</directory>
      <includes>
        <include>**/*.jar</include>
      </includes>
    </fileSet>
  </fileSets>
</archetype-descriptor> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:58:43.467

现在修好了。

在父 pom.xml 中，模块声明在配置文件中。

# ruby-on-rails - rails - 无法使用上传的文件建立记录

> ID：15686612
> 
> 赞同：0
> 
> 时间：2013-03-28T16:01:57.497
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, paperclip

我正在尝试像这样构建一个配置文件对象：

```
@user.profiles.build(params[:profile]) 
```

调用 build 时，它会运行验证，`Profile`但是当上传图像并且包含在`params[:profile]`

当那里有图像并调用 build 时，将运行验证并且找不到用户，因为 user_id 未传递到 proc。但是如果传入user_id中没有图片`params[:profile]`就找到用户了。

我的模型：

```
class User < ActiveRecord::Base
  attr_accessor :require_profile_name
  has_may :profiles
end

class Profile < ActiveRecord::Base
  attr_accessor :name, :image
  belongs_to :user
  validates :name, if: Proc.new { |profile| profile.user.require_profile_name }
end 
```

我在谷歌周围没有发现有同样问题的人，所以我不知道从哪里开始。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:45:05.647

对于您的个人资料类，您需要确保在检查名称验证之前先设置用户

```
class Profile < ActiveRecord::Base
  attr_accessor :name, :image
  belongs_to :user
  validates :user, presence: true
  validates :name, presence: true, if: proc { |profile| profile.user.try(:require_profile_name) }
end 
```

这样，如果没有设置用户，记录将不会被保存。如果用户已设置并且需要配置文件名称，那么当名称为空时，它也将无法通过验证。

# excel - Excel - 在 2 个列表中搜索列表

> ID：15686626
> 
> 赞同：0
> 
> 时间：2013-03-28T16:02:45.357
> 
> 标签：excel, excel-2007, excel-formula, excel-2010, vba

我有 2 个列表，每个列表都在自己的工作表上。

我的目标是在第一张纸的每个单元格上搜索第二张纸的每个单元格，如果找到，则删除第一张纸的整行。

单元格的内容不一定相同，只能是字符串。

例如，工作表 2 中的一个单元格是“字符串”，但如果第一个工作表中的一个单元格是“子字符串”，它应该删除第一个工作表的整行。

我应该如何通过 VBA 处理它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:10:52.807

如果是“一次性”操作，请执行“VLOOKUP”并使用过滤器删除找到的字符串。

在 VBA 中，使用以下方法：

```
for i = 1 to 65535
    for j = 1 to 65535 
        if sheets("sheet1").range("A" & i).value = sheets("sheet2").range("A" & j).value then
              sheets("sheet1").range("A" & i).EntireRow.Delete
        end if
    next j
next i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:39:45.203

对于 Sheet2 列中的每个单元格，在工作表 1 的列中查找部分匹配项。如果存在匹配项，则删除整行，然后重复直到找不到匹配项。

这假设您的列表在每张纸上的 1 列中组织。

```
Sub InCellDeDupe()

Dim sh1 As Worksheet
Dim sh2 As Worksheet

Dim rng1 As Range
Dim rng2 As Range
Dim foundRow As Range

Dim r As Long
Dim cl As Range
Dim str As String

Set sh1 = Worksheets("Sheet 1") '<-- modify as needed
Set sh2 = Worksheets("Sheet 2") '<-- modify as needed

Set rng1 = sh1.UsedRange.Columns(1) '<-- modify as needed
Set rng2 = sh2.UsedRange.Columns(1) '<-- modify as needed

For Each cl In rng2
    str = cl.Value

    Do
        Set foundRow = rng1.Find(What:=str, After:=rng1.Cells(1, 1), LookIn:=xlValues, _
            LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)

            If Not foundRow Is Nothing Then
                foundRow.EntireRow.Delete
            Else:
                Exit Do
            End If
    Loop
Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:43:07.620

mansuetus 提出的方法会非常慢，因为它必须将所有 65k 行迭代 65k 次，并且找不到任何子字符串。

为了提高性能，您应该动态查找数据的长度并保存。至于查找子字符串的问题，您可以使用类似的东西：

```
 If FullCellString = LookupStr Then
        'Match found - delete row
    Else
        If InStr(1, FullCellString, LookupStr, vbTextCompare) > 0 Then
            'Match found in substring delete row
        End If
    End If 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:54:51.353

试试下面的代码：

```
Sub sample()
    Dim lastRowSheet1 As Long, lastRowSheet2 As Long, rng As Range, r As Range, i As Integer, j As Integer
    lastRowSheet2 = Sheets("Sheet2").Range("A65000").End(xlUp).Row    ' total row sheet 2
    lastRowSheet1 = Sheets("Sheet1").Range("A65000").End(xlUp).Row  ' total row sheet 1

    For j = 1 To lastRowSheet2        'loop thru every cell of sheet 2
        For i = 1 To lastRowSheet1    ' loop thru every cell of sheet 1
            If InStr(1, Sheets("Sheet1").Cells(i, 1).Value, Sheets("Sheet2").Cells(j, 1).Value) > 0 Then
                Sheets("Sheet1").Cells(i, 1).EntireRow.Delete
                Exit For
            End If
        Next
    Next
End Sub 
```

![在此处输入图像描述](../Images/e50a1014e04551b63443e3608c572222.png)

# wordpress - 我的主题不是响应式的

> ID：15686640
> 
> 赞同：-1
> 
> 时间：2013-03-28T16:03:33.130
> 
> 标签：wordpress, responsive-design

我在一个[网站](http://www.fit2workcorporatewellness.com)上工作。它基于[Fit WordPress 主题](http://themeforest.net/item/fit-fitnessgym-responsive-wordpress-theme/3407694)。

主题是响应式的，据我所知，他们放入了所有元标记等，但我无法让它工作。它正在拉伸图像和菜单丢失，我不断更改我的 CSS 但无济于事。它在手机上看起来不太好，即使我调整窗口大小时，事情也会发生变化（其他问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:16:36.727

您的主题是响应式的。我已经在所有屏幕分辨率、字体大小等下查看了您的网站。...

很可能，您的主题在样式表中使用[@media 查询](http://kyleschaeffer.com/development/responsive-layouts-using-css-media-queries/)来实现此效果，尽管还有其他方法。

**这就是响应**和**流畅**的区别；我觉得你把这两个想法混为一谈了。响应式设计将根据屏幕分辨率进行切换（可能会将侧边栏放在底部，将菜单放在其他位置等）......

主要区别在于 Fluid Layouts（也称为 Liquid Layouts）基于按比例布局您的网站，因此元素在不同屏幕尺寸上占用相同百分比的空间，而响应式设计使用 CSS 媒体查询根据屏幕尺寸呈现不同的布局/屏幕类型。有关这两种设计的一些示例，请参阅[灵感：流体和响应式设计](http://webdesignerwall.com/trends/inspiration-fluid-responsive-design)。

Fluid 的目的是为所有元素保持相同的空间权重，并且可以在相同类型的不同尺寸屏幕上正常工作。它们在 32 英寸高分辨率显示器和 12 英寸低分辨率笔记本电脑上看起来还不错。它们很容易实现。

响应式设计的目的是为专门为屏幕类型量身定制的不同设备布局提供服务。例如，您网站的布局通常会缩减为智能手机上的一列。

如需更深入地了解，请查看[固定布局与流体布局与弹性布局：哪种布局最适合您](http://coding.smashingmagazine.com/2009/06/02/fixed-vs-fluid-vs-elastic-layout-whats-the-right-one-for-you/)？由 Smashing Magazine 撰写，深入探讨了流体设计的主要变化。他们还有[响应式 Web 设计指南和教程](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)，用于概述响应式（如果您想深入了解响应式设计，请提供大量链接）。

得益于 Mobile，响应式设计目前非常“流行”，Smashing 实际上有一个[完整的响应式设计标签](http://mobile.smashingmagazine.com/tag/responsive-design/)。

就个人而言，我认为您的网站很好。我更喜欢响应式布局。

# jsf - 如何从公共目录加载 JSF/facelets 库？

> ID：15686641
> 
> 赞同：1
> 
> 时间：2013-03-28T16:03:38.420
> 
> 标签：jsf, jsf-2, jetty, facelets

我们有许多 webapps 都使用某个 JSF 库。我们希望将库放在一个公共位置或主类路径上。问题是系统希望库位于 WEB-INF/lib 中，因此 webapp 类加载器可以扫描并加载它。

我们是这个特定库的创建者，在开发过程中，将它放在主类路径上要容易得多。

这可能吗？谁能举例说明在 web.xml 中放置什么来实现这一点（如果这是正确的机制）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:09:45.627

> *我们是这个特定库的创建者，在开发过程中，将它放在主类路径上要容易得多。这可能吗？*

对于 Facelets 资源，这可以通过[`ResourceResolver`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/ResourceResolver.html)webapp 本身的自定义来实现。

```
public class FaceletsResourceResolver extends ResourceResolver {

    private ResourceResolver parent;
    private String basePath;

    public FaceletsResourceResolver(ResourceResolver parent) {
        this.parent = parent;
        this.basePath = "META-INF/resources"; // TODO: Make configureable?
    }

    @Override
    public URL resolveUrl(String path) {
        URL url = parent.resolveUrl(path); // Resolves from WAR which would also do META-INF/resources of JARs in WAR.

        if (url == null) {
            url = getClass().getResource("/" + basePath + path); // Resolves from JARs in WAR when base path is not META-INF/resources.
        }

        if (url == null) {
            url = Thread.currentThread().getContextClassLoader().getResource(basePath + path); // Resolves also from anywhere else in classpath.
        }

        return url;
    }

} 
```

要让它运行，请在 webapp 中进行如下配置`web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_RESOURCE_RESOLVER</param-name>
    <param-value>com.example.FaceletsResourceResolver</param-value>
</context-param> 
```

对于需要由 JSF 注释扫描器扫描的带注释的 JSF 工件（如托管 bean 等），这是不可能的。JAR 必须最终以`/WEB-INF/lib`. 另请参阅[如何引用 JAR 文件中提供的 JSF 托管 bean？](https://stackoverflow.com/questions/7663818/how-to-reference-jsf-managed-beans-which-are-provided-in-a-jar-file/7663898#7663898)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:10:15.507

您可以尝试使用 Web 服务器提供的共享文件夹机制。将您的 jar 文件放在该文件夹中。您可以在任何地方访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:13:13.320

由于您使用的是码头，也许您最好的选择是将您的库放在`$jetty.home/lib/ext`：

> [http://docs.codehaus.org/display/JETTY/Classloading](http://docs.codehaus.org/display/JETTY/Classloading)
> 
> 在启动时，jetty 运行时会自动加载顶层 $jetty.home/lib 中的所有 jar，以及某些子目录，例如 $jetty.home/lib/management/、$jetty.home/lib/naming/ 等，其中在 start.jar 中包含的 start.config 文件中明确命名。此外，它将递归地从 $jetty.home/lib/ext 加载所有 jar。因此，要向 jetty 添加额外的 jar，您可以简单地在 $jetty.home/lib/ext 中创建一个任意深度的文件层次结构来包含这些 jar。当然，您始终可以通过创建自己的 start.config 文件并改用它来更改此默认行为。

# twig - 在 Twig 中调用方法

> ID：15686655
> 
> 赞同：0
> 
> 时间：2013-03-28T16:04:39.880
> 
> 标签：twig, symfony-2.1

我有一门课叫做计划。我正在使用两种方法：indexAction() deletePlan($id)。indexAction() 使用以下内容呈现 index.html.twig：

**index.html.twig**

```
<tr>
  <td>{{ item.name }}</td>
  <td>{{ item.description}}</td>
  <td><a href="">Delete</td>
</tr> 
```

对于最后一个标签中的 Delete 链接，我需要实际执行 deletePlan($id) 方法。我不希望这是一个被重定向到的实际页面。我打算调用 deletePlan($id) 方法，捕获它是否返回 true 或 false，然后使用 AJAX 隐藏（行）。

所以问题是：我可以在我的 twig 文件中调用 deletePlan($id) 方法，而无需实际设置页面、设置路由并将方法重命名为 deletePlanAction($id) 吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:30:54.463

您不能简单地从模板调用方法。您需要创建一个处理请求的操作。您可以在 AJAX 调用中使用此操作的路由。另外你需要通过`id`。设置一个 JavaScript，在单击`<a>`-tag 时执行 AJAX 调用。

使用 jQuery，AJAX 部分可能如下所示：

```
$.post('{{ path('routeNameOfDeleteAction') }}', function(data) {
    $('someSelector').html(data);
}); 
```

如果您希望它仅使用 AJAX 工作，您可以在删除操作中添加它：

```
if ($this->getRequest()->isXmlHttpRequest()) {
    return $this->redirect($this->generateUrl('routeNameOfIndexAction'));
} 
```

最后，您的控制器可以返回 JSON 格式的响应，其中包含类似`true`or的结果`false`。

# python - 子类注册表中子类的属性

> ID：15686658
> 
> 赞同：1
> 
> 时间：2013-03-28T16:04:42.677
> 
> 标签：python, metaprogramming

只是按照我发现的一个示例中的某些内容与项目的一部分进行集成，在该项目中，我正在创建大量从下面的“某事”中子类化的类，并且我正在尝试采取步骤以更自动地创建这些项目而无需每次都写出来（因为项目的数量越来越大，我可以通过传入一个较小的属性列表来减少很多样板文件，至少这是要点）。

无论如何，给定：

```
class SomethingMeta(type):
    def __init__(cls, name, bases, dct):
        if not hasattr(cls, 'registry'):
            cls.registry = {}
        else:
            interface_id = name.lower()
            cls.registry[interface_id] = cls

        super(SomethingMeta, cls).__init__(name, bases, dct)

class Something(object):
    __metaclass__ = SomethingMeta

class SomethingA(Something):
    def __init__(self, x, y):
        self.x = x
        self.y = y

 class SomethingB(Something):
    def __init__(self, z=0):
        self.z = z 
```

所以我在Something.registry中有一个使用'Something'创建的类的注册表......但我真正想做的是在'SomethingMeta'中获取'Something'子类的属性列表。所以在Something.registry中需要捕获一个注册子类的属性，甚至是特定的，即我需要知道当SomethingB被注册时，它上面有一个SomethingB.z，所以我可以获得一个指纹在字典中键入的子类。只有我现在似乎无法正确地戳戳我需要的东西。

任何输入表示赞赏，可以提供澄清，如果我做错了，可能会告诉我到底想做什么，等等。

编辑：

求结果。总的来说，我想：

1）传入我需要子类实例具有的变量的字典，例如 {'x': 1, 'y': 2}

2) 从此字典中获取密钥，并创建一个唯一标识符/哈希，例如 34523sdfgsdg3423234234

3）如果该标识符存在，则从 Something.registry 获取该子类，并从中实例化一个实例或创建一个新子类，将其存储在注册表中并返回它的实例，例如 Something.registry 看起来像 {'34523sdfgsdg3423234234': }

许多子类项目的主要区别特征是它们携带的信息，并且它们都根据它们携带的其他信息以不同的方式使用它们携带的信息做不同的事情，但对于它们子类中的类中的方法都是通用的，所以我真的只是想根据信息有效负载创建一个密钥，这样我就可以开始进行更多的自动生成来删除冗余代码，我想我会想办法的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:07:17.600

中的代码在定义`SomethingMeta.__init__`类`Something`（或其任何子类）时运行。

实例的属性`Something`仅在实例被实例化时定义，这可能会在很久以后发生，甚至永远不会发生。

因此注册表无法检查实例以找出它可能具有的属性。

但是，如果您可以保证属性都列在 的调用签名中`cls.__init__`，那么您可以使用`inspect.getargspec`来查找属性名称：

```
import inspect
class SomethingMeta(type):
    def __init__(cls, name, bases, dct):
        if not hasattr(cls, 'registry'):
            cls.registry = {}
        else:
            interface_id = name.lower()
            attrs, varargs, varkw, defaults = inspect.getargspec(cls.__init__)
            cls.registry[interface_id] = [a for a in attrs 
                                          if a not in ('self', None)]

        super(SomethingMeta, cls).__init__(name, bases, dct)

class Something(object):
    __metaclass__ = SomethingMeta

class SomethingA(Something):
    def __init__(self, x, y, *args, **kw):
        self.x = x
        self.y = y

class SomethingB(Something):
    def __init__(self, z=0):
        self.z = z

print(Something.registry) 
```

产量

```
{'somethingb': ['z'], 'somethinga': ['x', 'y']} 
```

# forms - Symfony2 根据复选框将表单中的实体设置为可选

> ID：15686663
> 
> 赞同：0
> 
> 时间：2013-03-28T16:04:57.770
> 
> 标签：forms, symfony, symfony-2.2

我的表单类型看起来像

```
class ApplicationFormType extends AbstractType
{
        public function buildForm(FormBuilderInterface $builder, array $options)
    {
            $nurse = new Type\NurseType();
            $builder
                ->add('nurse', $nurse)
                ->add('nurse_type', 'entity', array(
                    'class' => 'Acme\MainBundle\Entity\NurseType',
                    'expanded' => true,
                    'multiple' => false,
                ))
                ->add('nursing_support', 'checkbox', array(
                    'required' => false,
                ))
                ->add('nursing', new Type\NursingType());
            $builder->addEventSubscriber(new ApplicationDynamicNursingSubscriber());
        }
} 
```

取决于`NursingType`看起来像

```
class NursingType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('street')
            ->add('zipcode')
            ->add('city')
            ->add('email')
            ->add('phone');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array('data_class' => 'Acme\MainBundle\Entity\Nursing'));
    } 
```

事件看起来像（和我想做的）

```
class ApplicationDynamicNursingSubscriber implements EventSubscriberInterface
{
    public static function getSubscribedEvents() {
        return array(
            FormEvents::POST_BIND => 'onPostBind',
        );
    }

    public function onPostBind(FormEvent $event) {
        $data = $event->getData();
        $form = $event->getForm();
        if (!$data->getNursingSupport()) {
            $data->setNursing(NULL);
            $form->get('nursing')->setRequired(false);
        }
    }
} 
```

没有`setRequired`字段方法，所以我的事件脚本在表单提交时失败。当未选中复选框时，如何让 Symfony2 使实体`nursing`不需要`nursing_support`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:18:07.580

与其挂钩表单事件进行验证，不如尝试使用 Callback 方法在实体上使用内置验证来确定是否需要某个字段。

[http://symfony.com/doc/current/reference/constraints/Callback.html](http://symfony.com/doc/current/reference/constraints/Callback.html)

# script# - 页面特定脚本的推荐策略是什么？

> ID：15686669
> 
> 赞同：1
> 
> 时间：2013-03-28T16:05:07.897
> 
> 标签：script#

我们正处于将 Script# 引入我们的项目的早期阶段，到目前为止，我们喜欢我们所看到的。但是，对于将脚本添加到单个页面/视图的最佳策略，我有点困惑。

总之，我们的 asp.net mvc 项目有很多控制器，也有很多视图。这些视图中的每一个都为我们的应用程序的一部分提供了不同的功能。

如果您以这种方式进行设置，似乎 Script# 确实提供了为不同文件夹输出许多不同脚本的能力，但我在 StackOverflow 上的其他地方看到了回应，表明这种方法不受欢迎。

我能看到的拥有每页脚本的唯一另一种方法是在`$(Document).Ready()`调用脚本中与视图名称或类似名称匹配的方法时触发每个视图的方法调用。这会起作用，但我不太喜欢这个想法。

其他人如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:27:07.660

我相信有两个动机（通常基于之前关于该主题的对话）

1.  每页都有ac#项目太痛苦了。
2.  您希望最小化每个页面中加载的脚本数量。

为了解决#1，曾经有一个解决方案可以将单个 c# 项目编译成位以生成多个脚本，但现在已经不存在了。它消失的原因是，由于 c# 编译器一次编译一个完整的项目，而 script# 一次编译项目的一部分，因此很容易拥有不同的语义。然而，一切都没有丢失 - 你有几个选择。

*   自定义 msbuild 过程 - 专门更改 csproj 以使用代码子集多次调用 ScriptCompilerTask。您负责确保每个代码子集都能成功编译，因为 c# 编译器提供的验证意义不大。

*   使用 Script# 编译器 API 编写自定义 msbuild 任务。您可以在 github [1] 的 script# 存储库中看到 msbuild 任务的实现，并以此为基础……您甚至可以回顾源代码的历史，了解 msbuild 任务是如何提供此功能的。

要解决 #2，最好根据您的应用场景考虑哪些有意义的脚本集并以这种方式加载它们，而不是每页严格地一个特定的脚本文件（一旦考虑到缓存、http 请求等）。 ）。

因此，假设您将多个页面的脚本组合成一个脚本。现在解决您在给定页面的情况下加载正确脚本的问题。这是我所做的：

在我的页面中，我这样注释 body 标签：

```
<body id="editPage"> 
```

在我的脚本#中，我有以下内容：

```
internal static class EditPage {

    static EditPage() {
        jQuery.OnDocumentReady(delegate() {
            if (Document.BodyElement.ID == "editPage") {
                // Code you want to run on editPage
            }
        });
    }
} 
```

有多种方法可以实现这一点，但您不必严格地在每个页面中编写一点代码来调用正确的 API。希望这可以让您了解脚本中所有逻辑自包含的替代方案。

script# 中的一个示例（请参阅[https://github.com/nikhilk/scriptsharp/blob/cc/samples/AroundMe/AroundMe/Page.cs#L38](https://github.com/nikhilk/scriptsharp/blob/cc/samples/AroundMe/AroundMe/Page.cs#L38)）执行类似于有条件运行代码的操作。

这样做的一个很好的副作用是您的大部分代码都可以转换为内部类，因为视图永远不会直接调用脚本。而是脚本以不显眼的方式向页面添加行为。好处当然是大大增加了脚本的最小化。

[1] [https://github.com/nikhilk/scriptsharp](https://github.com/nikhilk/scriptsharp)

# c++ - 点云三角剖分算法

> ID：15686670
> 
> 赞同：8
> 
> 时间：2013-03-28T16:05:13.137
> 
> 标签：c++, algorithm, graphics, triangulation

我想创建一个简单的 C++ 应用程序，给定 100 个随机点（带有凸包），它将对这些点的云进行三角测量。我已经搜索了这个主题，我可以看到 Delaunay 三角测量是一个选项，但我仍然无法理解如何实现它（例如在 c++ 中）。同样在下一个级别，我想将所有 Delaunay “非法”三角形绘制成不同的颜色，以更好地展示和理解 Delaunay 的算法。

谁能帮我理解如何对这些点进行三角测量？也许是一个小代码部分，或者通常是我需要实现的算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T16:52:18.137

我**强烈**建议**不要**从头开始编写任何 Delaunay 三角剖分算法。如果我这样做是为了直观地理解算法的输出是什么样的，我会采用[Johnathan Shewchuk 的三角形代码](http://www.cs.berkeley.edu/~jrs/)并对其进行修改以分配不同的颜色等。

但是，如果您有足够的动力从头开始实施，那么我的建议是在处理 3D 版本之前先实施 2D Delaunay 三角剖分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T18:19:50.887

如果你想同时了解三角剖分算法和 C++ 编码，那么 C++三角剖分**组合项目**可能看起来很诱人，但**对于初学者来说肯定太难了**。因此，我建议您在解决组合问题之前，**先分别了解三角****剖分**的*算法方面*和*C++ 的基础知识。*

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T13:42:55.910

我想您需要先进行一般三角测量，然后修复所有不符合德劳内法律的问题？

一个非常糟糕的三角测量算法（带有一个糟糕的角度向量）是这样的：

(i) 获取点云的凸包 (ii) 将 CH 的一个随机点（使用第一个很方便）与 CH 的每个其他点连接（当然除了下一个和上一个，它与它已经形成边缘）。

（iiiA）对于平面上的每个其他点，如果该点位于三角形中，则通过将该点与其所在三角形的三个顶点连接起来，将其制成三个三角形。（iiiB）如果它位于边上（ 100 分有点不太可能，我想你可以跳过它），将它与它所在的四边形的另外两个顶点连接起来。

我想你可以从这个开始。云将被完全三角剖分，但可能超过一半的边缘将是 Delaunay 非法的。然后你可以继续修复（翻转）必要的边缘。

如果您发现实现它的问题，我可以提供一些示例代码来帮助您入门。现在请记住，算法的返回值可以方便地作为三角形的集合/向量；这样您就可以操纵它们并单独更改它们的颜色。**

# javascript - Javascript DOMParser；带有特殊字符的 XML

> ID：15686672
> 
> 赞同：1
> 
> 时间：2013-03-28T16:05:15.497
> 
> 标签：javascript, xml, domparser

我正在尝试使用 DOMParser 解析 XML 字符串。

XML-string 有一个节点，其属性包含 string `&#xa;`。我想将此属性的值作为字符串读取，但它不起作用，因为 DOMParser 读取`&#xa;`为单个特殊字符而不是字符串。

换句话说，在我的 XML 字符串中，我有一个类似这样的节点：

`<nodename attributename="&#xa;"/>`

使用 DOMParser 我试图读取属性的值，如下所示：

`var attributevalue = xmlNode.attributes[0].nodeValue;`

并获取`attributevalue`包含字符串`&#xa;`而不是单个特殊字符。

关于如何做到这一点的任何提示？提前感谢您的帮助！

# php - 填充多个下拉列表

> ID：15686676
> 
> 赞同：0
> 
> 时间：2013-03-28T16:05:19.627
> 
> 标签：php, mysql, drop-down-menu

我在数据库中有 3 个表，必须使用 php 和 mysql 在 3 个下拉列表中显示，但这三个表就像这个用户从第一个中选择然后第二个下拉列表将根据第一个和第三个的选择显示数据关于第二个的选择......我的问题是什么更好

使用三个不同的表 Country District Village 或仅使用一个包含所有数据的表

谁能帮我 ？？我可以填充树表但彼此独立

# 这是 2 个查询

```
function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}
// function for select by village
function villageQuery(){

//$villageData = mysql_query("SELECT * FROM village");

  $villageData = mysql_query("SELECT village_name FROM village INNER JOIN districts ON village.district_id = districts.district_id") or die (mysql_error());

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:30:22.417

我建议您将表分成三个不同的表并将它们链接起来……这将使您对数据有更多的控制和灵活性，并允许您轻松编写查询。下面是一个例子。

```
//Country Table
id, country_name 

//District Table
id, country_id, name

//Village Table
id, country_id, district_id, name 
```

# json - 从命令行解析 JSON 数据

> ID：15686682
> 
> 赞同：1
> 
> 时间：2013-03-28T16:05:36.870
> 
> 标签：json, unix, awk

我有一个巨大的 JSON 字符串，我试图通过命令行解析它。

这是一个例子：

```
"Product_ID":"productID_1","Price":"$4.99","Cover_Image":"cover.jpg"},{"issue_id":"2","total_article":"36","issue_number":"4","issue_name":"","volume":"57","editors":"","date_of_release":"2013-04-01" 
```

列出了多个问题，所有问题都具有相同的字段。我需要从 JSON 中的每篇文章中提取产品 ID、价格和发布日期，然后从命令行将其写入文本文件。

我在想 awk 是要走的路，但是，因为它将它作为一行读入，我发现它很棘手。

有什么建议/代码示例可以将这些字段拉出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T06:55:32.787

查看 sql4json ( [http://github.com/bheni/sql4json](http://github.com/bheni/sql4json) )

如前所述，这不是有效的 json。如果您有一个名为 inputfile.json 的文件，其中包含以下内容：

```
[
   {"Product_ID":"productID_1","Price":"$1.99","Cover_Image":"cover1.jpg","issue_id":"4","total_article":"16","date_of_release":"2013-04-01"},
   {"Product_ID":"productID_2","Price":"$2.99","Cover_Image":"cover2.jpg","issue_id":"5","total_article":"26","date_of_release":"2013-04-02"},
   {"Product_ID":"productID_3","Price":"$3.99","Cover_Image":"cover3.jpg","issue_id":"6","total_article":"36","date_of_release":"2013-04-03"}
] 
```

这应该给你你正在寻找的东西：

```
sql4json --csv 'SELECT Price, Product_ID, date_of_release' <inputfile.json >outputfile.csv 
```

outputfile.csv 的内容为：

```
$1.99,productID_1,2013-04-01
$2.99,productID_2,2013-04-02
$3.99,productID_3,2013-04-03 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:32:25.360

你很可能已经安装了 python，如果没有，安装它不会有什么坏处。

**打印json.py**

```
import json;
import sys;
for obj in json.loads(sys.stdin.readline()):
    print obj['Product_ID']
    print obj['Price'] 
```

**用法**

```
$ echo '[{"Product_ID":"productID_1","Price":"$4.99","Cover_Image":"cover.jpg"}]' | python printjson.py > outfile

$ cat outfile 
productID_1
$4.99 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:17:39.033

作为一项规则......尽量抵制并避免自己解析事物的冲动。您的正则表达式可能会与您的示例 XML 或 JSON 或其他什么一起使用一次或两次，但它是如此冒险！

这是使用 Python 而不使用脚本来提取单个值的行：

```
davanbri@om: echo $J
{"a":"fish"}
davanbri@om: python -c "import json;print json.loads('$J')['a']"
fish 
```

可能会满足您的需求！或者编写一个实际的 python 脚本并获取您需要的所有值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-21T20:36:03.847

有一个很棒的工具可以与 jq 配合使用。通常需要过滤一个巨大的文件。所以我的工作流程是我用[https://github.com/ilyash/show-struct/](https://github.com/ilyash/show-struct/)解析这是一个小工具，可以将你巨大的 json 变成这样的东西：

`.Records -- (Array of 3 elements)` `.Records[]` `.Records[].awsRegion -- us-east-1` `.Records[].eventName -- DescribeInstances1` .Records[].eventSource -- ec2.amazonaws.com`

那么你可以使用jq，例如。

aws ec2 描述-* | jq .Records[].eventName

JQ 有很多选择，做更多的事情，但这对我有用。

# ant - ant 从 xml 文件中删除行

> ID：15686697
> 
> 赞同：0
> 
> 时间：2013-03-28T16:06:12.547
> 
> 标签：ant

```
<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" > 
```

...

我想使用 ant 脚本删除所有的文档类型

```
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" > 
```

我仅使用以下方法成功删除`<!DOCTYPE`：

<

```
replaceregexp >
      <regexp pattern="&lt;DOCTYPE hibernate-mapping PUBLIC
        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;
        &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;"/>
      <substitution expression=""/>
      <fileset  file="${subproject.build.pre-dist.dir}/WEB-INF/struts-config.xml">

      </fileset>
    </replaceregexp> 
```

我该怎么做才能全部删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:40:19.910

我试过这个解决方案：

```
<target name="test" depends ="init">
    <loadfile 
        srcfile="${subproject.build.pre-dist.dir}/WEB-INF/struts-config.xml" 
        property="src.file.head1">
    <filterchain>
        <headfilter lines="-1" skip="3"/>
    </filterchain>
    </loadfile>

    <echo  file ="${subproject.build.pre-dist.dir}/WEB-INF/struts-config.xml"
    message="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
        ${src.file.head1}"/>
</target> 
```

# reporting-services - SSRS 中的模糊图表和旋转文本

> ID：15686698
> 
> 赞同：2
> 
> 时间：2013-03-28T16:06:16.353
> 
> 标签：reporting-services, charts, report, builder, blurry

我有一段时间试图修复 SSRS 的输出以使其在 IE 中呈现所有内容时看起来不错。它在 FireFox 和 Report Builder 3 中看起来漂亮而清晰，但它在 IE 中被丢弃了（全部在 Win 7 上运行）。

我的大部分用户都用IE，而且IE的版本是由企业控制的，所以我没有推出新版本来尝试的选项。

我在我的研究中看到了可以调整分辨率的提示（尽管我从来没有完全理解*在哪里*这样做）但是现在我看到它在 FireFox 中很好（除了我失去了 270 度的文本旋转），我有认为 SSRS 正在做它的工作。

我应该补充一点，当导出到 Excel 时，旋转的文本看起来不错，但图表仍然模糊（至少我想解决这个问题，因为我怀疑这将是大多数人用来查看此报告的工具）。

有什么建议么？

感谢您的关注！

杰森

![在此处输入图像描述](../Images/26590a0cc2180d7c6077e8cb32d8c60a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:16:40.330

我可能会认为这可能是您在我脑海中使用的字体类型。很难让 SSRS 在不同浏览器版本的 IE、Chrome、Firefox 等上发挥完全相同的效果。请记住，据我所知，SSRS 在 RDL 文件的 XML 中呈现内容，并且在此之上，浏览器可以提供它自己对演示文稿转换的解释。我发现的最简单的事情是重新调整代码以使用不同的字体类型，而不是花时间在复杂的解决方案上。Tahoma 有时与其他浏览器配合得很好，但我不确定，因为每个人的情况都不同。

通过轮换，我怀疑 IE 正在通过 Active X 或类似方式使用某种类型的专有渲染。有一些复杂的工作，但老实说，如果您的公司政策允许，我会为 Chrome 和 Firefox 用户安装“IE Tab”，因为它模仿 IE 引擎的映像。

恕我直言，让所有浏览器上的内容看起来几乎相同是一项非常艰巨的任务，尤其是当您想要为一家公司的专有技术做到这一点时，该公司对一个浏览器的既得利益高于其他浏览器。我曾经遇到过人们会告诉我 Chrome 和 Firefox 过去由于其呈现方式而不适用于某些报告的案例。我告诉他们我只能解释 IE。

要考虑的另一件事是，您可以生成自己的 HTML 表单并直接通过调用服务来呈现 SSRS。您基本上创建了一个 HTML 页面，有一个表单，链接到 SSRS 服务器并调用它。

# c# - 我们如何使用 DotnetOpenAuth 获取 google auth 令牌？

> ID：15686701
> 
> 赞同：1
> 
> 时间：2013-03-28T16:06:28.327
> 
> 标签：c#, .net, asp.net-mvc-4, dotnetopenauth, google-reader

我正在.net 中编写一个应用程序，它将帮助用户获取他们的 Google Reader 订阅列表。

我正在考虑使用 DotnetOpenAuth 进行身份验证，然后获取谷歌身份验证令牌。用户将在 Google 网站上输入 google 凭据，最后他们将使用身份验证令牌重定向到我的应用程序。现在使用这个身份验证令牌，我计划向谷歌阅读器端点发出请求，它将订阅列表作为 opml 文件返回。

有人知道吗？请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:57:56.360

我为 Google 编写了一个使用 OAuth2 的 DotNetOpenAuth 客户端。您应该能够使用它来取回身份验证令牌。

[https://github.com/mj1856/DotNetOpenAuth.GoogleOAuth2](https://github.com/mj1856/DotNetOpenAuth.GoogleOAuth2)

如果您使用来自[Microsoft.AspNet.WebPages.OAuth](http://nuget.org/packages/Microsoft.AspNet.WebPages.OAuth/)`OAuthWebSecurity`的新类，那么您将在回调方法的结果中对返回给您的 Google 访问令牌进行罚款。`OauthWebSecurity.VerifyAuthentication`

**更新**- 上面的答案专门针对 MVC4 中的 DotNetOpenAuth。MVC5 不使用 DotNetOpenAuth，并且已经提供了 Google OAuth 解决方案。

# javascript - style.css 没有改变字体 - 看起来像超链接

> ID：15686705
> 
> 赞同：0
> 
> 时间：2013-03-28T16:06:36.543
> 
> 标签：javascript, html, css, styles

我的 CSS 有一个非常小的问题。我的文字看起来一点也不好看。我使用了与其他按钮几乎相同的样式（添加了更多的 css 和 java 效果）（其他按钮看起来很棒）。就文本而言，它似乎完全忽略了我的样式。

我的文本看起来像在顶部，并且没有添加任何阴影或样式下划线...这是我的 style.css：

```
 .ib-container{
        position: relative;
        margin: 30px auto;
    }
    .ib-container:before,
    .ib-container:after {
        content:"";
        display:table;
    }
    .ib-container:after {
        clear:both;
    }
    .ib-container article{
        -moz-box-shadow:inset 0px 1px 0px 0px #fce2c1;
        -webkit-box-shadow:inset 0px 1px 0px 0px #fce2c1;
        box-shadow:inset 0px 1px 0px 0px #fce2c1;
        background-color: #dd4814;
        -moz-border-radius:6px;
        -webkit-border-radius:6px;
        border-radius:12px;
        color:#ffffff;
        border:1px solid #dd4814;
        font-family:Ubuntu, sans-serif;
        font-weight:bold;
        height: 65px;
        width: 65px;
        padding:6px 6px;
        text-decoration:none;
        text-shadow:1px 1px 0px #dd4800;
        text-align: center;
        vertical-align:middle;
        z-index: 1;
        -webkit-backface-visibility: hidden;
        -webkit-transition: 
        opacity 0.5s linear, 
        -webkit-transform 0.5s ease-in-out, 
        box-shadow 0.5s ease-in-out;
        -moz-transition: 
        opacity 0.5s linear, 
        -moz-transform 0.5s ease-in-out, 
        box-shadow 0.5s ease-in-out;
        -o-transition: 
        opacity 0.5s linear, 
        -o-transform 0.5s ease-in-out, 
        box-shadow 0.5s ease-in-out;
        -ms-transition: 
        opacity 0.5s linear, 
        -ms-transform 0.5s ease-in-out, 
        box-shadow 0.5s ease-in-out;
        transition: 
        opacity 0.5s linear, 
        transform 0.5s ease-in-out, 
        box-shadow 0.5s ease-in-out;
        margin-left: 5px;
        margin-top: 5px;
        display:inline-block
    }

    .ib-container article p{
        -webkit-transition: 
        opacity 0.2s linear, 
        text-shadow 0.7s ease-in-out, 
        color 0.7s ease-in-out;
        -moz-transition: 
        opacity 0.2s linear, 
        text-shadow 0.7s ease-in-out, 
        color 0.7s ease-in-out;
        -o-transition: 
        opacity 0.2s linear, 
        text-shadow 0.7s ease-in-out, 
        color 0.7s ease-in-out;
        -ms-transition: 
        opacity 0.2s linear, 
        text-shadow 0.7s ease-in-out, 
        color 0.7s ease-in-out;
        transition: 
        opacity 0.2s linear, 
        text-shadow 0.7s ease-in-out, 
        color 0.7s ease-in-out;
        text-align: center;
        vertical-align:middle;
    }
    /* Hover Style for all the items: blur, scale down*/
    .ib-container article.blur{
        -webkit-transform: scale(0.9);
        -moz-transform: scale(0.9);
        -o-transform: scale(0.9);
        -ms-transform: scale(0.9);
        transform: scale(0.9);
        opacity: 0.7;
        text-align: center;
        vertical-align:middle;
    }

    /* Hover Style for single item: scale up */
    .ib-container article.active{
        box-shadow: 0px 0px 5px 2px rgba(255,255,255,1);
        -webkit-transform: scale(1.05);
        -moz-transform: scale(1.05);
        -o-transform: scale(1.05);
        -ms-transform: scale(1.05);
        transform: scale(1.05);
        z-index: 100;   
        opacity: 1;
        text-align: center;
        vertical-align:middle;
    } 
```

这是我的html...如果我对我的意思不够清楚-请告诉我...基本上它看起来没有样式。

```
 <!DOCTYPE html>
    <style type="text/css">
    body {
        font-family:verdana,arial,sans-serif;
        font-size:10pt;
        margin:10px;
        background-color:#000000;
        background-image:url('http://www.wallsave.com/wallpapers/2560x1600/fedora/377491/fedora-ubuntu-heavy-metal-distrotest-377491.jpg');
        background-repeat:no-repeat;
        background-attachment:fixed;
        background-position:-1750px; 
        }
    a {
        color:white;
        }

    </style>
    <style>
    body{font-family: Ubuntu, sans-serif; }</style><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin">

        <head>
            <meta charset="UTF-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
            <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
            <meta name="description" content="Item Blur Effect with CSS3 and jQuery - Using Box Shadows, Transform and Transitions" />
            <meta name="keywords" content="blur, css3, transition, jquery, box shadow, text shadow, articles, scale, transform, animation" />
            <link rel="stylesheet" type="text/css" href="css/style.css" />
            <script src="js/modernizr.custom.34978.js"></script>    
        </head>
        <body>
            <div class="container">
                <section class="ib-container" id="ib-container">
                    <article>

                            <a target="_blank" href="http://mail.xxx.com/~bcluff/knowledge/support/">home.</a>
                    </article>
                    <article>

                            <a target="_blank" href="http://gmail.com/">gmail.</a>
                    </article>
                    <article>

                            <a target="_blank" href="http://knowledge.xxx.com/">knowledge.</a>
                    </article>
                    <article>

                            <a target="_blank" href="https://utopia.xxxasp.com/login.php?redirect_location=https%3A%2F%2Futopia.xxxasp.com%2F">utopia.</a>
                    </article>
                    <article>

                            <a target="_blank" href="https://webmail.xxxasp.com/plugins/make_pass/makepass_prompt.php">password.</a>
                    </article>
                    <article>

                            <a target="content" href="http://mail.xxx.com/~bcluff/knowledge/support/extensionlist/">extensions.</a>
                    </article>
                    <article>

                            <a target="content" href="http://ip.xxx.com/read_sites.php">viewsites.</a>
                    </article>
                    <article>

                            <a target="_blank" href="http://mail.xxx.com/~bcluff/knowledge/support/oldsite">classic view.</a>
                    </article>
                </section>
            </div>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
            <script type="text/javascript">
                $(function() {

                    var $container  = $('#ib-container'),
                        $articles   = $container.children('article'),
                        timeout;

                    $articles.on( 'mouseenter', function( event ) {

                        var $article    = $(this);
                        clearTimeout( timeout );
                        timeout = setTimeout( function() {

                            if( $article.hasClass('active') ) return false;

                            $articles.not( $article.removeClass('blur').addClass('active') )
                                     .removeClass('active')
                                     .addClass('blur');

                        }, 65 );

                    });

                    $container.on( 'mouseleave', function( event ) {

                        clearTimeout( timeout );
                        $articles.removeClass('active blur');

                    });

                });
            </script>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:22:36.873

好吧，首先，您正在设置段落标签的样式，但没有：

```
.ib-container article p {}

<article>
  <a target="_blank" href="http://mail.sicom.com/~bcluff/knowledge/support/">home.</a>
</article> 
```

此外，锚点从浏览器获得特殊样式，因此您实际上需要指定您希望链接样式。这可以解决问题，但是如果页面上有其他内容，您可能需要稍微提高一下特异性。

```
a {
    text-decoration: none;
    color: #bada55;
    /* the next 3 lines make the link fill  
       the container, so it's all clickable */
    display: block;
    width: 100%;
    height: 100%
    /* set this to the desired height of the  
       button to center the text vertically,  
       vertical-align: middle doesn't work... */
    line-height: 20px;
}
a:hover {
    text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:22:02.737

您需要添加如下内容：

```
.ib-container article a {
    text-decoration: none;
} 
```

您需要一个比浏览器自己的链接样式更具体的 CSS 规则（文本装饰：链接）

# wpf - 带有文本框的 Datagrid 过滤列 caliburn.micro

> ID：15686706
> 
> 赞同：1
> 
> 时间：2013-03-28T16:06:38.370
> 
> 标签：wpf, datagrid, filter, filtering, caliburn.micro

我想对 Bar Codes 列进行过滤。在本专栏中，我有一个转换器来转换字符串中的 Eans 列表。课程是这样的：

```
public class EanListToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
                  object parameter, CultureInfo culture)
    {
        return String.Join("\r", ((List<Ean>)value).Select(ean => ean.Codice));
    }
    public object ConvertBack(object value, Type targetType,
                              object parameter, CultureInfo culture)
    {
        return NotSupportedException();
    }

    private object NotSupportedException()
    {
        throw new NotImplementedException();
    }
} 
```

所以我希望如果用户在**TEXTBOX**（或其他东西）中写一个条形码，它将过滤 DataGrid 列表。

```
<DataGrid HorizontalAlignment="Stretch" SelectedItem="{Binding SelectedArticle}"
            Margin="14,89,12,61" VerticalAlignment="Stretch" AutoGenerateColumns="False" x:Name="List">
   <DataGrid.Columns>
      <DataGridTextColumn Width="100" Binding="{Binding Code}" Header="Code" />
      <DataGridTextColumn Width="300" Binding="{Binding Description}" Header="Description" />
      <DataGridTextColumn Binding="{Binding Price}" Header="Price" />
      <DataGridTextColumn Binding="{Binding Ean, Converter={StaticResource EanListToString}}" Header="Bar Codes" />
   </DataGrid.Columns>
</DataGrid> 
```

这是视图模型

```
 [Export(typeof(IScreen))]
   public class BViewModel : Screen
   {
      public List<Articolo> List { get; private set; }
      public Article SelectedArticle { get; set; }

      [Import]
      WindowManager WindowManager = new WindowManager();

      public BolleViewModel()
      {
         List = recover.GetArticles();
         NotifyOfPropertyChange("List");
      }
   } 
```

我可以做什么？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:19:32.283

从视图开始，我建议您从使用**DataGridTemplateColumn**开始，特别是**CellTemplate**，这样您就可以在其中放置自己的自定义控件，例如 ComboBox。然后，您应该从那里自定义您需要的控件并将其绑定在您的班级中

下面的粗略示例

```
 <DataGrid.Columns>
    <DataGridTemplateColumn Header="Bar Codes">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <ComboBox ItemsSource="{Binding Ean, Converter={StaticResource EanListToString}}"></ComboBox>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:36:37.937

使用带有用于过滤的 TextBox 输入的 HeaderTemplate 的 DataGridTemplateColumn。

```
<DataGridTemplateColumn Width="80" SortMemberPath="Naam" Header="Naam">
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <Grid>
                <StackPanel Orientation="Vertical">
                    <TextBlock>Naam</TextBlock>
                    <TextBox Text="{Binding Delay=200, RelativeSource={RelativeSource AncestorType={x:Type UserControl }}, Path=DataContext.Filter.Naam, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </Grid>
        </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBox Text="{Binding}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>1 
```

模型

```
public class Filter:INotifyPropertyChanged//Todo implement interface
{
   private string name;
   public string Name 
   {
      get{return name;}
      set{name = value; OnPropertyChanged("Name");}
   }
} 
```

# jquery - 在跨度，jquery中动态拆分p

> ID：15686709
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:00.030
> 
> 标签：jquery, substring, html, paragraph

我正在为文本编写一些阅读更多/更少的功能，但我遇到了下一个问题。

我的步骤： 1）获取包含 div 的文本的内容，其中包含多个段落。

```
 var content =  $heroContent.html(); 
```

2）我制作了始终显示的部分的子字符串，以及全文的第二个子字符串 - 始终显示的部分，实际上是隐藏的部分。（该隐藏部分可以通过单击按钮显示或隐藏）

```
c = content.substr(0, 700)
h = content.substr(700, content.length - roundedLimit) 
```

3）我将第二部分放在一个包含更多内容的跨度中，这样我就可以隐藏该内容并显示它。

```
html = c + "<span class='morecontent'>" + h + "</span>"; 
```

4）我再次将上面的 html 变量添加到带有文本的 div 中，并隐藏“更多内容”。

将文本放在一个跨度中的原因是它可以在它分解之前与文本内联放置。如果不在 span 中，则文本仅出现在下面的行中，这是不想要的。

问题：第二个子字符串*h*可以由多个段落组成。因此，当 P 标签在变量*h*内关闭时，span 标签也会自动关闭，因此，*morecontent*类仅适用于 span 的开头直到内部第一段的结尾。

我试图通过将文本放入 DIV 来修复它，但是文本没有出现内联，这确实是一个重要的“功能”。

如果有人能给我解决这个问题，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:42:29.587

这是一个将内容包装在容器中的解决方案，并使用更多/更少按钮来扩展/收缩容器以显示内容：

```
var content = $('.content').wrapInner('<div class="moreless less">');

$('.moreless').after('<div class="showbutton"><span>More</span><span class="hidden">Less</span></div>');

$('.content').on('click', '.showbutton', function() {
   $(this).prev('.moreless').toggleClass('less');
   $(this).find('span').toggleClass('hidden');
}); 
```

CSS：

```
.content {
    line-height: 20px;
}

.less {
    max-height: 100px;
    overflow: hidden;
}

.hidden {
     display: none;   
} 
```

[http://jsfiddle.net/rrvtw/](http://jsfiddle.net/rrvtw/)

您需要进行一些检查以确保`more`在内容小于容器时不会添加按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:31:35.890

另一种快速的方法可能是保留一个短版本和长版本，而不是第一部分和第二部分，然后单击一个按钮，只需在两者之间切换：

```
var content =  $heroContent.html();
c = content.substr(0, 700)

html = "<div class='short'>" + c + "</div>" + 
       "<div class='all'>" + content + "</div>";

mybutton.toggle() -> $('.short').hide();
                     $('.all').show(); // and viceversa on second click. 
```

听起来怎么样？

# vb.net - 将它们加载到对话框 Visual Basic 2010 时，我的数组值不正确

> ID：15686712
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:07.937
> 
> 标签：vb.net, linq, random, numbers

我不确定我应该给这个主题起什么名字，但我会解释一下情况。

我有一个存储卡值的数组。现在我正在为我的游戏实现闪避和格挡卡，所以我决定制作一个新的对话框视觉基础。在打开对话框之前，我的程序会检查被攻击的玩家手中（在数组中）是否有闪避或格挡卡，如果是，则打开对话框。

对话框打开后，它将我的模块化玩家回合变量“T”重新分配给玩家攻击的值，将其更改为玩家回合。

然后我加载我的通用子

从那里我将所有被攻击玩家的卡片加载到复选框中。

**问题从这里开始** 加载卡片后，我查看我的摘要索引，即玩家卡片索引。玩家按照他的设想保留他的牌，但不知何故，索引也会随机减去一张牌并添加一张随机牌。

例如

正确的卡片：

> 道奇 1
> 
> 区块 1
> 
> 头对接 1
> 
> 拍打 1
> 
> 踢 1

'额外的

> 戳-1
> 
> 万岁玛丽 1

比较卡片的代码：

```
If LunchMoneyMainForm.T = 0 Then
    For roll = 0 To 4
        Dim temp As IEnumerable(Of LunchMoneyMainForm.Group) = _
            From r In LunchMoneyMainForm.Player1HandGroup _
            Where r.QuantityInteger > 0 _
            Select r
        If temp IsNot Nothing AndAlso temp.Count > 0 Then
            Dim rolls As Integer = roll Mod 5
            Number = (temp(LunchMoneyMainForm.Rnd.Next(0, temp.Count)).ID)
            LunchMoneyMainForm.Player1HandGroup(Number).QuantityInteger -= 1
            CheckBoxArray(rolls).Text = LunchMoneyMainForm.Player1HandGroup(Number).CardNameString
            LunchMoneyMainForm.NumberArray(roll) = Number
        End If
    Next roll
    For roll = 0 To 4
        Number = LunchMoneyMainForm.NumberArray(roll)
        LunchMoneyMainForm.Player1HandGroup(Number).QuantityInteger += 1
    Next
End If 
```

有一个更好的方法吗？

编辑：我注释掉了

```
'For roll = 0 To 4
'    Number = LunchMoneyMainForm.NumberArray(roll)
'    LunchMoneyMainForm.Player1HandGroup(Number).QuantityInteger += 1
'Next 
```

我也拿出了`LunchMoneyMainForm.Player1HandGroup(Number).QuantityInteger -= 1`，但我仍然得到一个项目的 +1 和一个项目的 -1。

所以我的 Linq 函数中的某些东西正在这样做。

编辑：我的球员卡摘要功能。

```
Private Sub PlayerHandToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PlayerHandToolStripMenuItem.Click
        For Me.intCount = 0 To 27

            CountHandCards += Player1HandGroup(intCount).QuantityInteger + Player1HandGroup(intCount).QuantityInteger2 + Player1HandGroup(intCount).QuantityInteger3 _
                + Player1HandGroup(intCount).QuantityInteger4 + Player1HandGroup(intCount).QuantityInteger5

            HandMsg = HandMsg & Player1HandGroup(intCount).CardNameString & ": " & Player1HandGroup(intCount).QuantityInteger & "            " & Player1HandGroup(intCount).QuantityInteger2 & _
              "            " & Player1HandGroup(intCount).QuantityInteger3 & "            " & Player1HandGroup(intCount).QuantityInteger4 & "            " & Player1HandGroup(intCount).QuantityInteger5 & Environment.NewLine
        Next intCount

        MessageBox.Show("Card Quantities in Hand:" & Environment.NewLine & HandMsg & Environment.NewLine & "Hand Total: " & CountHandCards.ToString)
        HandMsg = ""
        CountHandCards = 0
    End Sub 
```

我知道摘要过程应该可以正常工作，因为在我加载 DodgeBlockCard 对话框之前不会显示错误的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:51:08.547

要回答“如何在对话框关闭之前暂停我的应用程序？” 问题：

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)
...
'Sleep for 1000 milliseconds
Sleep 1000 
```

# javascript - 在 JVectorMap 上弹出标签

> ID：15686713
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:18.100
> 
> 标签：javascript, jquery, asp.net, vb.net, jvectormap

我是 jQuery 新手，一直在开发 JVectorMap。我已经创建了标记，但我想知道是否有人可以帮助我创建一个弹出窗口或在单击其中一个标记时出现的标签。此窗口/标签将显示有关单击的特定标记的信息。

这是我要实现的目标的屏幕截图，如果有人可以帮助我，将不胜感激！

![在此处输入图像描述](../Images/a9470fcfe0b66c179b007ce82bb68c23.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:01:13.273

您可以捕获标记的单击事件并获取单击标记的文本。

![在此处输入图像描述](../Images/9835c483362f6b6f75e8d2be4a6d0ea1.png)

```
<script>
    var markers = [
        { latLng: [48.921537, -66.829834], name: "One", text: "This is a text of one." },
        { latLng: [45.995944, -64.171143], name: "Two", text: "This is a text of two." }
    ];

    $(function () {
        $('#map').vectorMap({
            map: 'ca_lcc_en',
            markers: markers,
            onMarkerClick: function (e, index) {
                $('#text').text(markers[index].text);
            }
        });
    });
</script>

<div id="map" style="float: left; width: 400px; height: 400px;">
</div>
<div id="text" style="float: right; width: 200px; height: 200px; border: 1px solid red;">
</div> 
```

# c# - 对扩展方法的模糊调用

> ID：15686714
> 
> 赞同：3
> 
> 时间：2013-03-28T16:07:18.330
> 
> 标签：c#

我的项目有一个运行良好的扩展方法：

```
public static class Extensions
{
    public static bool IsBetween<T>(this T value, T low, T high) 
                                                         where T : IComparable<T>
    {
        return value.CompareTo(low) >= 0 && value.CompareTo(high) <= 0;
    }
} 
```

现在，当我尝试构建我的项目时，我收到了这个错误：

> 错误 1699 以下方法或属性之间的调用不明确：“BillingFormsApplication.Extensions.IsBetween(double, double, double)”和“BillingFormsApplication.Extensions.IsBetween(double, double, double)”

文件中只有一种`IsBetween`方法`Extensions`......`IsBetween`并且整个解决方案中只有一种方法。

我试图清理并重建解决方案。仍然收到错误。

我可以删除扩展并继续，但过去它非常方便。

**为弗雷德里克添加：**

```
 if (percentCash.IsBetween(0, 99))
                { 
```

我想知道我是否将这些数字转换为 Double 是否可以解决问题。我马上试试。像：

```
if (percentCash.IsBetween((double)0, (double)99)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:14:55.790

很可能，您引用的 DLL 定义了相同的扩展方法，或者您在代码中的其他地方定义了该扩展方法。尝试在文件搜索中进行查找`IsBetween`，看看它是否出现。如果没有，请查看您引用的 DLL，并查看其中一个中是否不存在此扩展。

# javascript - Prototype.js 测试元素是否有焦点

> ID：15686716
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:18.800
> 
> 标签：javascript, prototypejs

所以我多年前放弃了prototype.js for jquery LOL ...现在我发现自己不得不再次使用它并且无法退出弄清楚如何从prototype.js中获取这个jquery语句...任何人都可以帮助？

```
if(!$('#search').is(':focus')){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:32:59.490

Pointy 的评论解决了我的问题的答案......这是我为其他可能需要它的人提供的最终解决方案。

```
if($$('#search:focus') == ''){ 
```

# c# - 不使用动态关键字的动态双重调度

> ID：15686717
> 
> 赞同：2
> 
> 时间：2013-03-28T16:07:25.950
> 
> 标签：c#, dynamic, .net-3.5, double-dispatch

我正在尝试将[这个](https://stackoverflow.com/a/2770002/95573)动态双重调度示例移植到 C#。我已经完成了这个示例，但我觉得我已经通过使用反射来创建所需的处理程序并调用适当的方法来简化类`DynamicDispatch`中的方法。`MessageBase`任何人都可以就如何更改它提供一些建议吗？该示例使用 C++ dynamic_cast 运算符，我不确定 C# 的等价物是什么。我不确定我的解决方案是正确/最好的方法。

注意：我使用的是 3.5，所以我不能使用动态关键字

这是代码：

即时消息

```
public interface IMessage
{
   void Dispatch(IHandler handler);
} 
```

消息库

```
public abstract class MessageBase : IMessage
{
   public abstract void Dispatch(IHandler handler);

   // This is my concern, doesnt feel like the right way to do this
   protected void DynamicDispatch<MessageType>(IHandler handler, MessageType self)
   {
      // Get the messages derived type
      Type self_type = self.GetType();   
      // Create actual message specific handler
      Type message_handler = typeof(IMessageHandler<>).MakeGenericType(self_type);
      // Get the ProcessMessage method
      MethodInfo minfo = message_handler.GetMethod("ProcessMessage");
      try
      {
         // Invoke it with the message
         minfo.Invoke(handler, new object[] { self });
      }
      catch (TargetException ex)
      {
         // Ignore if method doesnt exist
      }
   }
} 
```

信息

```
public class Message : MessageBase
{
   public override void Dispatch(IHandler handler)
   {
      DynamicDispatch(handler, this);
   }
} 
```

处理程序

```
public interface IHandler
{
} 
```

消息处理程序

```
public interface IMessageHandler<MessageType> : IHandler
{
   void ProcessMessage(MessageType message);
} 
```

派生消息一

```
public class DerivedMessageOne : Message
{
   public int MessageOneField;
} 
```

派生消息二

```
public class DerivedMessageTwo : Message
{
   public int MessageTwoField;
} 
```

DerivedMessageHandlerOne

```
public class DerivedMessageHandlerOne : IMessageHandler<DerivedMessageOne>,
   IMessageHandler<DerivedMessageTwo>
{
   #region IMessageHandler<MessaegType> Members

   // ************ handle both messages *************** //
   public void ProcessMessage(DerivedMessageOne message)
   {
      // Received Message one, do soemthing with i
      int do_something_with_it = message.MessageOneField;
   } 

   public void ProcessMessage(DerivedMessageTwo message)
   {
      // Received Message two, do soemthing with i
   } 

   #endregion
} 
```

DerivedMessageHandlerTwo

```
public class DerivedMessageHandlerTwo : IMessageHandler<DerivedMessageOne>
{
   #region IMessageHandler<MessaegType> Members

   // ************ handle just MessageOne *************** //
   public void ProcessMessage(DerivedMessageOne message)
   {
      // Received Message one, do soemthing with i
   }

   #endregion
} 
```

测试用例

```
IMessage messageOne = new DerivedMessageOne();
IMessage messageTwo = new DerivedMessageTwo();
IHandler handlerOne = new DerivedMessageHandlerOne();
IHandler handlerTwo = new DerivedMessageHandlerTwo();

messageOne.Dispatch(handlerOne);
messageOne.Dispatch(handlerTwo);

messageTwo.Dispatch(handlerOne);
messageTwo.Dispatch(handlerTwo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:31:16.573

在 C# 中，您需要`as`运算符。 [http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)

它的行为与 C++ 完全相同`dynamic_cast`。

在这里它会被用来：

```
IMessageHandler<MessageType> handlerTarget = handler as IMessageHandler<MessageType>;
handlerTarget.ProcessMessage(message); 
```

正如您所指出的，您必须将消息类型传递到消息库中，例如：

```
class MessageBase
{
    protected void DoDispatch<T>(T m)
    {
        // ...
    }
}
class Message<T> : MessageBase where T : class
{
    public void Dispatch()
    {
        DoDispatch<T>(this as T);
    }
}
class MyMessage : Message<MyMessage>
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-02T10:57:00.680

我发现这个 DoubleDispatch 在没有动态的情况下可以正常工作：

```
namespace DoubleDispatch
{
public interface IMessage
{
    void Dispatch(HandlerBase handler);
}

public interface IHandler
{
    void HandleDefault(IMessage message);
}

public interface IHandler<in TMessage> : IHandler
    where TMessage : class, IMessage
{
    void HandleSpecific(TMessage message);
}

public interface IMessage<TMessage, THandler> : IMessage
    where TMessage : class, IMessage<TMessage, THandler>
    where THandler : class, IHandler<TMessage>
{
}

public abstract class HandlerBase : IHandler
{
    public void HandleDefault(IMessage message)
    {
        Console.WriteLine("HandlerBase process {0}", message.GetType().Name);
    }
}

public abstract class MessageBase<TMessage, THandler>
    : IMessage<TMessage, IHandler<TMessage>>
    where TMessage : class, IMessage, IMessage<TMessage, IHandler<TMessage>>
    where THandler : class, IHandler, IHandler<TMessage>
{
    public void Dispatch(HandlerBase handler)
    {
        var runtimeHandler = handler as THandler;
        if (runtimeHandler != null)
        {
            var runtimeMessage = this as TMessage;
            if (runtimeMessage != null)
            {
                runtimeHandler.HandleSpecific(runtimeMessage);
                return;
            }
        }
        handler.HandleDefault(this);
    }
}

public class FirstMessage : MessageBase<FirstMessage, IHandler<FirstMessage>>
{
}

public class SecondMessage : MessageBase<SecondMessage, IHandler<SecondMessage>>
{
}

public class FirstHandler : HandlerBase, IHandler<FirstMessage>
{
    public void HandleSpecific(FirstMessage message)
    {
        Console.WriteLine("FirstHandler process {0}", message.GetType().Name);
    }
}

public class SecondHandler : HandlerBase, IHandler<SecondMessage>
{
    public void HandleSpecific(SecondMessage message)
    {
        Console.WriteLine("SecondHandler process {0}", message.GetType().Name);
    }
}

public class ThirdHandler : HandlerBase, IHandler<FirstMessage>, IHandler<SecondMessage>
{
    public void HandleSpecific(FirstMessage message)
    {
        Console.WriteLine("ThirdHandler process {0}", message.GetType().Name);
    }

    public void HandleSpecific(SecondMessage message)
    {
        Console.WriteLine("ThirdHandler process {0}", message.GetType().Name);
    }
}

public class EmptyHandler : HandlerBase
{
}

public static class DoubleDispatch
{
    public static void Test()
    {
        var handlers = new HandlerBase[]
        {
            new FirstHandler(),
            new SecondHandler(),
            new ThirdHandler(), 
            new EmptyHandler(), 
        };

        var messages = new IMessage[]
        {
            new FirstMessage(),
            new SecondMessage(), 
        };

        Array.ForEach(messages, m =>
        {
            Array.ForEach(handlers, m.Dispatch);
            Console.WriteLine();
        });
    }
}
} 
```

# css - 使用 CSS 为选择下拉菜单设置样式

> ID：15686719
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:31.543
> 
> 标签：css, drop-down-menu

我希望为第一个选项（搜索俱乐部）设置样式，使其为粗体，其余为正常字体粗细。我可以将第一个选项设置为粗体，但仅在单击下拉菜单后才会显示为粗体，它将在所选视图中保持正常

```
<select name="" id="">
  <option value="">Search Clubs</option>
  <option value="">Bodyshots Kickboxing Gym</option>
  <option value="">Champions Kickboxing Club</option>
  <option value="">North East Mugendo: Forkhill</option>
  <option value="">North East Mugendo: Newry</option>
  <option value="">North East Mugendo: Lordship</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:15:21.533

这是不可能的，因为您正在尝试设置`<select>`标签的影子 DOM 的样式。

在此处了解 shadow DOM：

[http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)

某些浏览器允许您进行一定程度的样式设置，例如：

> 如果更改字体系列怎么办？

```
select {
  font-family: Cursive;
} 
```

> WebKit 浏览器（Safari、Chrome）会忽略你。Firefox、Opera 和 IE 将尊重您的更改。虽然字体系列不会级联到选择中，但您必须在它们上显式声明它。

阅读更多相关信息：

[http://css-tricks.com/dropdown-default-styling/](http://css-tricks.com/dropdown-default-styling/)

# matlab - Matlab分割图像

> ID：15686722
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:38.863
> 
> 标签：matlab, image-processing

我有一个图像，其中包含 3 个图像 1 在另一个下方。

有没有办法可以将图像分成三个相等的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:12:56.317

你可以使用imcrop。参考这篇文章：[如何在matlab中分割图像](http://www.mathworks.com/matlabcentral/answers/46699)

这在stackoverflow上：[如何在matlab中划分图像](https://stackoverflow.com/questions/1637000/how-to-divide-an-image-into-blocks-in-matlab)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:43:35.593

```
rgb = imread('ngc6543a.jpg');
r = rgb(:, :, 1);
g = rgb(:, :, 2);
b = rgb(:, :, 3); 
```

# facebook - 在用户的墙上自动发布一个“页面”

> ID：15686727
> 
> 赞同：0
> 
> 时间：2013-03-28T16:07:58.493
> 
> 标签：facebook, facebook-graph-api

我有一个客户有兴趣让用户在他的网站上选择加入，以允许他在 facebook 上的“页面”在用户的墙上发布博客文章。博客系统完全是从头开始构建的，我想知道这是否可以通过 facebook API 实现。这不是用户发帖，而是“页面”本身。如果用户授予“页面”这样做的权限，这显然可以做到。这可能吗？如果是这样，我需要调查 API 的哪一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:56:18.050

不幸的是，您不能从页面发布到用户的墙上。[您可以使用Facebook Explorer Tool 自行](http://developers.facebook.com/tools/explorer/)尝试，方法是使用您主页的访问令牌并发布到`/{your_profile_id}/feed`。

您将收到一条错误消息：`(#200) The target user has not authorized this action`，但用户无法选择授权此操作。

# perl - 无法找到应该存在的数组元素

> ID：15686731
> 
> 赞同：0
> 
> 时间：2013-03-28T16:08:07.127
> 
> 标签：perl

我正在接收来自某个进程的输出，我想使用 perl 从该进程的输出中搜索特定元素，我已经完成如下操作，但即使有元素，它仍然返回 FALSE。我认为我在解析时做错了帮助任何指针。谢谢

过程输出：

```
origin-server-pool-1
http_TestABC
https_TestABC 
```

脚本：

```
use strict;
use warnings;

my @result_listosp; #assigned from output process given above

my $osp="http_TestABC";
my $status_osp_check= check_if_entity_exists($osp,@result_listosp);
print $status_osp_check;

sub check_if_entity_exists() 
{
    my $entity = shift;
    my @entityarray = @_;

    my $status="FALSE";

    if ( grep { $_ eq $entity} @entityarray) {
        $status="TRUE";
        return $status;
    } 
    else {
        return $status;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:14:32.747

您很可能正在使用反引号 ( `qx()`)。

这就像分配：

```
@result_listosp = ( "origin-server-pool-1\n",    # Note the
                            "http_TestABC\n",    # trailing
                           "https_TestABC\n" );  # newlines 
```

失败的原因`grep`是因为`"http_TestABC" eq "http_TestABC\n"`是错误的。

解决此问题的两种方法：

*   `chomp @result_listosp;`消除换行符结尾

*   使用正则表达式匹配 ( `=~`) 而不是完全匹配 ( `eq`)

# clojure - 我怎样才能让 for 循环不以嵌套方式做事？

> ID：15686733
> 
> 赞同：3
> 
> 时间：2013-03-28T16:08:09.070
> 
> 标签：clojure

我想要类似的东西

```
(for [x [1 2 3]
      y [4 5 6]]
      (+ x y))
=>(5 7 9) 
```

代替

```
=>(5 6 7 6 7 8 7 8 9) 
```

我想我可以通过解构来做到这一点，但不确定如何。我试过

```
(for [[x y] [[1 2 3] [4 5 6]] (+ x y)) 
```

给出 (3 9)。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:12:36.803

`for`宏不是解决这个问题的最合适的选择。尝试使用`map`：

```
(map + [1 2 3] [4 5 6]) 
```

# jquery - 将图像上传到 jCrop

> ID：15686734
> 
> 赞同：0
> 
> 时间：2013-03-28T16:08:09.483
> 
> 标签：jquery, database, button, image-uploading, jcrop

我一直在使用来自[http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail](http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail)的演示来创建裁剪器，但它没有向其上传图片的功能。有谁知道该怎么做？

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Upload Your Own Kiss</title>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  <link type="text/css" rel="stylesheet" href="stylesheet.css"/>

<script src="../js/jquery.min.js"></script>
<script src="../js/jquery.Jcrop.js"></script>
<script type="text/javascript">
var previewW, previewH, previewL, previewT;
var imagefile;

  jQuery(function(){
      jGo(true);
  });

  function jGo(changing) {
      setMainImage();
    // Create variables (in this scope) to hold the API and image size
        var jcrop_api,
    boundx,
    boundy,

    // Grab some information about the preview pane
    $preview = $('#preview-pane'),
    $pcnt = $('#preview-pane .preview-container'),
    $pimg = $('#preview-pane .preview-container img'),

    xsize = $pcnt.width(),
    ysize = $pcnt.height();

console.log('init',[xsize,ysize]);

if (changing) {
    $('#target').Jcrop({
      onChange: updatePreview,
      onSelect: updatePreview,
      aspectRatio: xsize / ysize
    },function(){
      // Use the API to get the real image size
      //this.setImage(imagefile);
      var bounds = this.getBounds();
      console.log("Bounds",bounds);
      boundx = bounds[0];
      boundy = bounds[1];
      //boundx = xsize;
      //boundy = ysize;
      // Store the API in the jcrop_api variable
      jcrop_api = this;

      // Move the preview into the jcrop container for css positioning
      $preview.appendTo(jcrop_api.ui.holder);
    });
}
else {
    $pimg.css({
      width: previewW + 'px',
      height: previewH + 'px',
      marginLeft: '-' + previewL + 'px',
      marginTop: '-' + previewT + 'px',
    });     
}

function updatePreview(c)
{
  if (parseInt(c.w) > 0)
  {
    var rx = xsize / c.w;
    var ry = ysize / c.h;

    previewW = Math.round(rx * boundx);
    previewH = Math.round(ry * boundy);
    previewL = Math.round(rx * c.x);
    previewT = Math.round(ry * c.y);

    $pimg.css({
      width: previewW + 'px',
      height: previewH + 'px',
      marginLeft: '-' + previewL + 'px',
      marginTop: '-' + previewT + 'px',
    });
  }
};

  }

function showParams() {
alert ("Params are: " + ":" + previewW + ":" + previewH + ":" + previewL + ":" + previewT);
}

function sendParams() {
alert ("Params are: " + previewW + ":" + previewH + ":" + previewL + ":" + previewT);
 var request = $.ajax({
    type: 'POST',
    url: "save.php",
    success: function(response) {
        console.log((response=="ok")?"stored ok":"store error!");
    },
    failure: function() {
        console.log("ajax failure!");
    },
    data: "imgURL=" + escape(imagefile) + "&x=" + previewW + "&y=" + previewH + "&l=" + previewL + "&t=" + previewT
});
}

function setMainImage() {
var imgFolder = "demo_files/";
imagefile = imgFolder + parseQuery(querystring)["image"];
//$('#target-pane').innerHTML('<img src="'+imagefile+'" id="target" alt="[Jcrop Example]" />');
document.getElementById("target-pane").innerHTML='<img src="'+imagefile+'" id="target" alt="[Jcrop Example]" />';
document.getElementById("preview-pane").innerHTML='<div id="preview-div" class="preview-container"><img src="'+imagefile+'" class="jcrop-preview" alt="Preview" /></div>';
}

var querystring = window.location.search.substring(1);  // looks strange, but it works

function parseQuery(str) {  // from StackOverflow - parses query string
if(typeof str != "string" || str.length == 0) return {};
var s = str.split("&");
var s_length = s.length;
var bit, query = {}, first, second;
for(var i = 0; i < s_length; i++)
    {
    bit = s[i].split("=");
    first = decodeURIComponent(bit[0]);
    if(first.length == 0) continue;
    second = decodeURIComponent(bit[1]);
    if(typeof query[first] == "undefined") query[first] = second;
    else if(query[first] instanceof Array) query[first].push(second);
    else query[first] = [query[first], second]; 
    }
console.log("parseQuery: query is ", query);
return query;
}

</script>
</head>
<body>

<div class="container">
<div class="row">
<div class="span12">
<div class="jc-demo-box">

<div class="page-header">
<h1 style=color: whitel>Upload your own kiss</h1>
</div>
<div id="target-pane">
MAIN IMAGE
</div>

  <div id="preview-pane">
<div id="preview-div" class="preview-container">
  Preview img goes here
</div>
  </div>

  <div>
  <input type="button" value="Done!" onclick="sendParams();" />
  </div>
  <div>
  <input type="text" id=paramsId />
  <input type="button" value="GetParams" onclick="getParams(getElementById('paramsId').value);" />
  </div>

  <div class="description">
  <p>
    <ul style=color:white;><b>Instructions</b>
    <li>Upload your image</li>
   <li> Crop it as close to your lips as possible (watch out for your nose!) </li>
   <li> Hit done when done!</li>
    </ul>
  </p>
  </div>
<div class="clearfix"></div>
 </div>
 </div>
 </div>
 </div>
</body>
</html> 
```

裁剪后，我希望将其发送到另一个函数，以便人们可以在图像保存到数据库之前翻转图像。

到目前为止，我有这个：

```
<body onLoad="setUp();">

<div id="imbox">
<div id="left"><img id="leftimg" src="" /></div>
<div id="right"><img id="rightimg" src="" /></div>
<div id="checks">
    <span id=boxlspan><input type="checkbox" id="boxleft" onchange='flipIt("left")'> Flip?</span>
    <span id=boxrspan>Flip? <input type="checkbox" id="boxright"  onchange='flipIt("right")'></span>
</div>
</div>

</body> 
```

回顾一下： 1\. 上传到 Jcrop 的按钮。2.发送图片按钮翻转。3\. 发送图片按钮到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T22:38:32.407

好吧，回答可能为时已晚，但希望将来能帮助其他人提出同样的问题。因此，如果您想在 JCropper 中提供图像，那么您可以选择其中的 2 个选项。

1）让用户选择一个图像并将其上传到服务器并获取路径并作为 JCrop 目标中的源提供，如下所示

```
 $('#cropbox').attr('src','http://www.mysite.com/upload/abc.jpg');
$('#cropbox').Jcrop({
    aspectRatio: 1, //To keep aspect ratio
    boxWidth: 650, //To handle large images
    boxHeight: 400, //To handle large images
        onSelect: updateCoords 
},function()
{
    alert("Image has been added to JCrop.");
}); 
```

2）如果您希望用户选择图像然后裁剪然后上传，那么您可以使用此代码来执行此操作，但请记住，此代码使用**HTML5 File Reader API**，并非所有浏览器都完全支持，但根据 caniuse。 com 当今 87% 的浏览器都支持此功能，因此我建议使用此方法。

```
<input type="file" id="uplPic" />

$(document).on('change', '#uplPic', function()
{
   if(window.FileReader)
   {
      var reader = new FileReader();
      reader.onload = function(e) 
      {
          $('#cropbox').attr('src',reader.result);
      $('#cropbox').Jcrop({
       aspectRatio: 1,
       boxWidth: 650,
       boxHeight: 400,
           onSelect: updateCoords 
      },function()
      {
       alert("Image has been added to JCrop.");
      });
       }
       reader.readAsDataURL(this.files[0]);  
    }
 }); 
```

我使用 JQuery 作为速记。现在您可以获取尺寸并将图像上传到服务器并使用 PHP 或其他方法在服务器上进行裁剪。希望有帮助。

# c++ - 通过套接字发送文件太慢

> ID：15686738
> 
> 赞同：3
> 
> 时间：2013-03-28T16:08:19.570
> 
> 标签：c++, windows, visual-studio-2010, sockets, send

我是新来的（我的第一个问题），而且有点新手，我从来没有上过编程课，所以......对于一些混乱的代码感到抱歉。

我制作了这个程序，通过套接字发送（客户端）和接收（服务器）文件，客户端每个循环读取和发送 1024 个字节的文件，服务器接收它并将其写入文件。它工作正常，但问题是它非常慢。将文件从我的计算机发送到我的计算机所需的时间与发送到另一台计算机所需的时间一样多，但仍然比预期的要多，当我尝试传输时，例如通过 Skype，它要快得多。有什么线索吗？（下面是我正在使用的代码）。

服务器：

```
// servrecvfile.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#undef UNICODE

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>

// Need to link with Ws2_32.lib
#pragma comment (lib, "Ws2_32.lib")
// #pragma comment (lib, "Mswsock.lib")

#define DEFAULT_BUFLEN 65536
#define DEFAULT_PORT "8883"

typedef struct thread_args{
    SOCKET ClientSocket;
    int index;
} *MYDATA, PM;

MYDATA pDataArray[100];
DWORD WINAPI abc(void*);

int p=0;

int abz(){
    return p;
}

void broadcast(MYDATA *fp, char *b, int index){
    for(int i=0; i<=abz(); i++){
        if(index != i)
            send( fp[i]->ClientSocket, b, (int)strlen(b), 0 );
    }
}

DWORD WINAPI abc(void* pVoid)
{   
    struct thread_args *fp;
    fp = (struct thread_args *) pVoid;
    long iResult;
    int filesize;
    unsigned char recvbuf[ DEFAULT_BUFLEN];
    memset(recvbuf, 0, sizeof(recvbuf));
    recv(fp->ClientSocket, (char*)recvbuf,  DEFAULT_BUFLEN, 0);
    FILE *abc = fopen(strtok ((char*)recvbuf,":"), "wb");
    filesize = atoi(strtok (NULL,":"));
    memset(recvbuf, 0, sizeof(recvbuf));
    int perc=0;
    int perc2=0;
    int counter=0;
    char a = '%';
        do {
            iResult = recv(fp->ClientSocket, (char*)recvbuf,  DEFAULT_BUFLEN, 0);
            if (iResult > 0) {
                counter += fwrite (recvbuf , sizeof(char) , iResult , abc );
                memset(recvbuf, 0, sizeof(recvbuf));
                perc2 = ((counter*1.000)/filesize*1.000)*100;
                if(perc2 != perc){
                    printf("%d%c\n", perc2, a);
                    perc = perc2;
                } 
            }
            else if (iResult == 0)
              printf("Connection closing...\n");
            else  {
              printf("recv failed with error: %d\n", WSAGetLastError());
              closesocket(fp->ClientSocket);
              fclose(abc);
              WSACleanup();
              ExitThread(1);
            }
        } while (iResult > 0);

        fclose(abc);
       ExitThread(-1);
}

int __cdecl main(void) 
{
    WSADATA wsaData;
    int iResult;

    SOCKET ListenSocket = INVALID_SOCKET;
    SOCKET ClientSocket = INVALID_SOCKET;

    struct addrinfo *result = NULL;
    struct addrinfo hints;

    int iSendResult;
    char recvbuf[DEFAULT_BUFLEN];
    int recvbuflen = DEFAULT_BUFLEN;

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed with error: %d\n", iResult);
        return 1;
    }

    ZeroMemory(&hints, sizeof(hints));
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;
    hints.ai_flags = AI_PASSIVE;

    // Resolve the server address and port
    iResult = getaddrinfo(NULL, DEFAULT_PORT, &hints, &result);
    if ( iResult != 0 ) {
        printf("getaddrinfo failed with error: %d\n", iResult);
        WSACleanup();
        return 1;
    }

    // Create a SOCKET for connecting to server
    ListenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
    if (ListenSocket == INVALID_SOCKET) {
        printf("socket failed with error: %ld\n", WSAGetLastError());
        freeaddrinfo(result);
        WSACleanup();
        return 1;
    }

    // Setup the TCP listening socket
    iResult = bind( ListenSocket, result->ai_addr, (int)result->ai_addrlen);
    if (iResult == SOCKET_ERROR) {
        printf("bind failed with error: %d\n", WSAGetLastError());
        freeaddrinfo(result);
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    freeaddrinfo(result);

    iResult = listen(ListenSocket, SOMAXCONN);
    if (iResult == SOCKET_ERROR) {
        printf("listen failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    int i=0;
    while(1){

    // Accept a client socket
    ClientSocket = accept(ListenSocket, NULL, NULL);
    if (ClientSocket == INVALID_SOCKET) {
        printf("accept failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }
    pDataArray[i] = (MYDATA) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY,
                sizeof(PM));
    pDataArray[i]->ClientSocket = ClientSocket;
    pDataArray[i]->index = i;

        CreateThread( 
            NULL,                   // default security attributes
            0,                      // use default stack size  
            abc,       // thread function name
            pDataArray[i],          // argument to thread function 
            0,                      // use default creation flags 
            NULL);   // returns the thread identifier 
        p = i;
        i++;
    }

    // No longer need server socket
    closesocket(ListenSocket);

    // Receive until the peer shuts down the connection
    //char a[DEFAULT_BUFLEN];

    // shutdown the connection since we're done
    iResult = shutdown(ClientSocket, SD_SEND);
    if (iResult == SOCKET_ERROR) {
        printf("shutdown failed with error: %d\n", WSAGetLastError());
        closesocket(ClientSocket);
        WSACleanup();
        return 1;
    }

    // cleanup
    closesocket(ClientSocket);
    WSACleanup();

    return 0;
} 
```

客户：

```
// sendfile.cpp : Defines the entry point for the console application.
//
#include "StdAfx.h"

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib
#pragma comment (lib, "Ws2_32.lib")
#pragma comment (lib, "Mswsock.lib")
#pragma comment (lib, "AdvApi32.lib")

#define DEFAULT_BUFLEN 65536
#define DEFAULT_PORT "8882"

int __cdecl main(int argc, char **argv) 
{
    WSADATA wsaData;
    SOCKET ConnectSocket = INVALID_SOCKET;
    struct addrinfo *result = NULL,
                    *ptr = NULL,
                    hints;
    char *sendbuf = "this is a test";
    char recvbuf[DEFAULT_BUFLEN];
    int iResult;
    int recvbuflen = DEFAULT_BUFLEN;

    char linha[DEFAULT_BUFLEN];
    char IP[20], porta[10];

    FILE *fp1;
    fp1 = fopen("config.txt", "r");
    if(fp1 == NULL)
    {
        printf("Unable to find config.txt.\n");
        exit(-1);
    }
    while( fgets(linha,DEFAULT_BUFLEN,  fp1) !=NULL){
        if(strstr(linha, "port="))
            sscanf(linha, "port=%s", porta);
        if(strstr(linha, "ip="))
            sscanf(linha, "ip=%s", IP);
    }

    fclose(fp1);

    char filenam[DEFAULT_BUFLEN];
    printf("Insert file name: ");
    scanf ("%s", filenam);
    FILE *trans = fopen(filenam, "rb");

    if(trans == NULL)
    {
        printf("File not found\n");
        exit(-1);
    }

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed with error: %d\n", iResult);
        return 1;
    }

    ZeroMemory( &hints, sizeof(hints) );
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;

    // Resolve the server address and port
    iResult = getaddrinfo(IP, porta, &hints, &result);
    if ( iResult != 0 ) {
        printf("getaddrinfo failed with error: %d\n", iResult);
        WSACleanup();
        return 1;
    }

    // Attempt to connect to an address until one succeeds
    for(ptr=result; ptr != NULL ;ptr=ptr->ai_next) {

        // Create a SOCKET for connecting to server
        ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, 
            ptr->ai_protocol);
        if (ConnectSocket == INVALID_SOCKET) {
            printf("socket failed with error: %ld\n", WSAGetLastError());
            WSACleanup();
            return 1;
        }

        // Connect to server.
        iResult = connect( ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
        if (iResult == SOCKET_ERROR) {
            closesocket(ConnectSocket);
            ConnectSocket = INVALID_SOCKET;
            continue;
        }
        break;
    }

    freeaddrinfo(result);

    if (ConnectSocket == INVALID_SOCKET) {
        printf("Unable to connect to server!\n");
        WSACleanup();
        return 1;
    }

    long lSize;

      // obtain file size:
    fseek (trans , 0 , SEEK_END);
    lSize = ftell (trans);
    rewind (trans);
    char a = '%';
  // allocate memory to contain the whole file:
    memset(recvbuf, 0, sizeof(recvbuf));
    unsigned char *linha2 = (unsigned char*) malloc (sizeof(unsigned char)* DEFAULT_BUFLEN);
    //send(ConnectSocket, filenam, (int)strlen(filenam), 0 );
    sprintf(filenam, "%s:%d", filenam, lSize);
    printf("%d %d\n", send(ConnectSocket, filenam, (int)strlen(filenam), 0 ), lSize);
    long counter=0;
    long read;
    int perc=0;
    int perc2=0;
    while(counter < lSize){
        read = fread_s(linha2,  DEFAULT_BUFLEN, sizeof(char),  DEFAULT_BUFLEN, trans);
        counter += send(ConnectSocket, (char*)linha2, read, 0);
        perc2 = ((counter*1.000)/lSize*1.000)*100;
        if(perc2 != perc){

            printf("%d%c\n", perc2, a);
            perc = perc2;
        } 

    }

    fclose(trans);
    /*
    do {
        //memset(a, 0, sizeof(a));
        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
        if ( iResult > 0 )
        {
            printf("%s", recvbuf);
            memset(recvbuf, 0, sizeof(recvbuf));
        }
        else if ( iResult == 0 )
            printf("Connection closed\n");
        else
            printf("recv failed with error: %d\n", WSAGetLastError());

    } while( iResult > 0 ); */

    // cleanup
    closesocket(ConnectSocket);
    WSACleanup();

    return 0;
} 
```

我在 Windows 7 上使用 Visual Studio 2010。

感谢任何帮助，如果这个问题的结构有什么问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T17:12:56.230

Skype 可能会压缩文件，这将显着加快网络传输速度。您可以使用 zlib 内联压缩或从许多公开可用的（霍夫曼编码等）中实现自己的压缩。

顺便说一句，更改缓冲区大小不会对性能产生太大影响。底层 API（文件、套接字）已经过优化，可以自动处理缓冲，而与您读取/写入它们的方式无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:38:11.527

为了通过套接字有效地发送文件数据，Windows 提供了[TransmitFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740565.aspx)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T18:29:42.770

首先运行 Wireshark 并跟踪网络通信。我预计您会受到默认 TCP 窗口大小的影响，从而导致不必要的流量控制。

看看这些答案可能会有所帮助：

*   [有哪些好的 Wireshark 教程？](https://stackoverflow.com/questions/589185/what-are-some-good-wireshark-tutorials)
*   [什么是 SO_SNDBUF 和 SO_RECVBUF](https://stackoverflow.com/questions/4257410/what-are-so-sndbuf-and-so-recvbuf/4257961#4257961)
*   [设置 recv 缓冲区大小如何影响 TCP Windows 大小。](https://stackoverflow.com/questions/8579022/high-frequency-data-listener-tcp-overload-on-windows-7/8579250#8579250)
*   [为什么我对 TransmitFile 的调用与其他方法相比表现不佳？](https://stackoverflow.com/questions/2002947/why-is-my-call-to-transmitfile-performing-poorly-compared-to-other-methods/2004727#2004727)

# java - 我可以配置 myBatis 以使用 Builder 模式创建类的实例吗？

> ID：15686741
> 
> 赞同：9
> 
> 时间：2013-03-28T16:08:22.633
> 
> 标签：java, mybatis, builder-pattern, static-factory

我有一个（Java）类，其中包含许多实例字段（其中许多是可选的）。我希望所有字段（因此类）都是不可变的。所以，我想使用构建器模式来构建类的实例。

我可以配置 myBatis 以使用 Builder 模式创建类的实例吗？我知道我可以让 myBatis 返回一个地图并使用该地图在我的代码中构建实例。但是，我正在寻找一种配置此映射（或使用某种约定）的方法，类似于如何通过使用 Java Bean 和构造函数来创建实例。

**编辑（包括一个例子）**

这是一个例子：

```
package com.example.model;

// domain model class with builder
public final class CarFacts {

    private final double price;
    private final double numDoors;
    private final String make;
    private final String model;
    private final String previousOwner;
    private final String description;

    public static class Builder {
        // required params
        private final double price;
        private final String make;
        private final String model;

        // optional params
        private final String previousOwner;
        private final String description;
        private final double numDoors;

        public Builder(double price, String make, String model) {
            this.price = price;
            this.make = make;
            this.model = model;
        }

        public Builder previousOwner(String previousOwner) {
            this.previousOwner = previousOwner;
            return this;
        }
        // other methods for optional param

        public CarFacts build() {
            return new CarFacts(this);
        }
    }

    private CarFacts(Builder builder) {
        this.price = builder.price;
        //etc.
    }
} 
```

然后，我有一个映射器：

```
<!-- this doesn't work but I think h3adache suggest that I could have the resultType
be com.example.model.CarFacts.Builder and use the Builder constructor. But I'm not sure how
I would call the methods (such previousOwner(String)) to populate optional params -->

<mapper namespace="com.example.persistence.CarFactsMapper">
  <select id="selectCarFacts" resultType="com.example.model.CarFacts">
    select *
    from CarFacts
  </select>

</mapper> 
```

最后，我有映射器界面：

```
package com.example.persistence.CarFactsMapper;

public interface CarFactsMapper {
    List<CarFacts> selectCarFacts();
} 
```

我还希望能够通过 myBatis 使用静态工厂方法创建实例。例如：

```
public final class Person {

    private final String lastName;
    private final String firstName;

    private Person(String lastName, String firstName) {
        this.lastName = lastName;
        this.firstName = firstName;
    }

    public Person newInstance(String lastName, String firstName) {
        return new Person(lastName, firstName);
    }
} 
```

具体来说，如何让 myBatis 调用 newInstance(String, String)？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T07:17:31.663

您不需要使用构建器或静态工厂方法。是的，如果您试图保持不变性，这些模式肯定会*有所帮助*，因为可能会发生突变，我们是否应该说“在实例之间”，例如，因为构建器在调用 build() 之前被突变（以创建新的不可变实例）。

但是，不变性与给定实例的构造方式无关。它无法让我们为可变类编写构建器和静态工厂方法。在构建时，所有对象都还没有发生变异，所以真正重要的是接下来会发生什么（在建造者和工厂离开之后）。

您需要做的就是专注于类本身，并认为这个类是不可变的。常规的 myBatis 映射应该没问题 - 为自己节省编写构建器的时间。

所以 - 你的类是不可变的，是的，因为你的所有字段都是最终的，要么是原始类型，要么是字符串（在 Java 中是不可变的！）。如果您有其他非原始字段，那么您希望它们是最终的（从技术上讲，您不需要编写 final，但建议您，只要该字段实际上从未被重新分配）并且您希望他们的类一直遵循这些规则的递归。

我希望这会有所帮助，我想说明的一点是，构建器模式和工厂方法非常适合管理构造，但它们不会免费为您提供不变性，您总是需要编写构造器。

# xamarin.ios - MonoTouch 添加页脚

> ID：15686744
> 
> 赞同：0
> 
> 时间：2013-03-28T16:08:33.243
> 
> 标签：xamarin.ios, table-footer

我正在尝试在我的表格视图中添加一个带有按钮的页脚视图。我在网上找到了这段代码

```
public override UIView GetViewForFooter(UITableView tableView, int sectionIndex)
{
    // Write a method to get the proper Section via the sectionIndex
    var section = GetSection(sectionIndex);
if (section != null)
{
    if (section.FooterView == null && !string.IsNullOrEmpty(section.FooterText))
    {
             // Create your FooterView here 
        section.FooterView = CreateFooterView(tableView, section.FooterText);
    }

    return section.FooterView;
}

return null;
} 
```

我不知道**GetSection**方法是什么？我遇到错误“当前上下文中不存在名称 GetSection”。

我在 MonoTouch 网站上也找不到任何合适的文档。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:36:45.263

您拥有的示例代码可能是 MonoTouch.Dialog 示例。如果您不使用 MonoTouch.Dialog，只需从此方法返回适当的 UIView。就像是：

```
public override UIView GetViewForFooter(UITableView tableView, int sectionIndex) {
    var myFooter = new UIView(); // Or some other class extending UIView, depending on what you want to do
    // Add SubViews and style the view
    return myFooter;
} 
```

如果表格视图中有多个部分，则可以通过考虑`sectionIndex`参数为每个部分创建不同的页脚。有关更多信息，请查看[文档](http://docs.go-mono.com/?link=M%3aMonoTouch.UIKit.UITableViewDelegate.GetViewForFooter%28MonoTouch.UIKit.UITableView%2cSystem.Int32%29)

# asp.net-mvc - StructureMap、ASP.NET 和实体框架 DbContext 处置

> ID：15686749
> 
> 赞同：1
> 
> 时间：2013-03-28T16:08:56.850
> 
> 标签：asp.net-mvc, entity-framework, structuremap

我有一个使用 EF 处理 DB 的 ASP.NET MVC 应用程序。我使用 DDD 作为架构，并获得了存储库和服务模式。

我正在尝试将 StructureMap 用于 DI，但由于某种原因，我的数据库在第一次请求后被处理掉了。

编辑：我得到的错误是

> 操作无法完成，因为 DbContext 已被释放。

似乎我在存储库中得到它，例如：

```
public class AccountRepository : Repository<Account>, IAccountRepository
{
    public AccountRepository(MyDbContext context) : base(context) { }

    public Account FindAccountByEmailAddress(string emailAddress, bool loadRelatedRoles = false)
    {
        IQueryable<Account> query = (from a in Entity
                                     where a.LoweredEmailAddress == emailAddress.ToLower()
                                     select a);
        if (loadRelatedRoles)
        {
            return query.Include(a => a.Roles).FirstOrDefault();
        }

        return query.FirstOrDefault();
    }
} 
```

在 Application_BeginRequest 我正在使用注册数据库

```
 ObjectFactory.Configure(x =>
        {
            x.For(typeof(MyDbContext))
                .HttpContextScoped();
        }); 
```

为了将其保留为每个请求的一个实例。

在 Application_EndRequest 我使用以下方式发布请求：

```
 protected void Application_EndRequest(object sender, EventArgs e)
    {
        StructureMap.ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects();
    } 
```

我错过了什么吗？或者我的方法没问题，我的存储库实现可能存在问题，导致它发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:19:45.893

好的，我发现了问题——似乎我的 Application_Start 代码被调用了不止一次，并且在某些情况下我使用了 Lazy——这导致了对 DB 上下文的空引用的保存。

谢谢你的帮助！

# oracle - 如何检索光标的sql文本？

> ID：15686751
> 
> 赞同：6
> 
> 时间：2013-03-28T16:09:06.963
> 
> 标签：oracle, database-cursor

如果我有一个游标并且想在执行期间记录游标的文本，是否可以以某种方式使用游标名称并检索 SQL？

例如，

```
OPEN cursor_1 for 
    SELECT ... 
```

我想相信我可以做一些类似于`cursor_1%NAME`我可以使用游标的其他属性的事情。（[%ISOPEN、%FOUND](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems011.htm)等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:12:28.533

AFAIK，没有办法将游标*名称*链接到正在解析的 SQL 文本，但是`V$open_cursor`使用`v$sql`using连接`SQL_ID`，您应该能够提取并记录为打开的游标记录的 SQL 语句的详细信息。

```
SELECT sql_id,
       user_name,
       sid,
       saddrsql_fulltext
FROM   v$sql
       join v$open_cursor USING (sql_id) 
```

也许您可以将 SQL 文本与光标关联起来，但这必须是一个手动过程

# ruby-on-rails - 从 UTF-8 国际字符中删除重音的 Ruby 方法

> ID：15686752
> 
> 赞同：79
> 
> 时间：2013-03-28T16:09:20.233
> 
> 标签：ruby-on-rails, utf-8, internationalization

我正在尝试创建字符串的“规范化”副本，以帮助减少数据库中的重复名称。这些名称包含许多国际字符（即重音字母），我想创建一个删除重音的副本。

我确实遇到了以下方法，但无法使其正常工作。我似乎找不到 Unicode Hacks 插件是什么。

```
 # Utility method that retursn an ASCIIfied, downcased, and sanitized string.
  # It relies on the Unicode Hacks plugin by means of String#chars. We assume
  # $KCODE is 'u' in environment.rb. By now we support a wide range of latin
  # accented letters, based on the Unicode Character Palette bundled inMacs.
  def self.normalize(str)
     n = str.chars.downcase.strip.to_s
     n.gsub!(/[Ã Ã¡Ã¢Ã£Ã¤Ã¥ÄÄ?]/u,    'a')
     n.gsub!(/Ã¦/u,                  'ae')
     n.gsub!(/[ÄÄ?]/u,                'd')
     n.gsub!(/[Ã§Ä?ÄÄ?Ä?]/u,          'c')
     n.gsub!(/[Ã¨Ã©ÃªÃ«Ä?Ä?Ä?Ä?Ä?]/u, 'e')
     n.gsub!(/Æ?/u,                   'f')
     n.gsub!(/[ÄÄ?Ä¡Ä£]/u,            'g')
     n.gsub!(/[Ä¥Ä§]/,                'h')
     n.gsub!(/[Ã¬Ã¬Ã­Ã®Ã¯Ä«Ä©Ä­]/u,     'i')
     n.gsub!(/[Ä¯Ä±Ä³Äµ]/u,           'j')
     n.gsub!(/[Ä·Ä¸]/u,               'k')
     n.gsub!(/[Å?Ä¾ÄºÄ¼Å?]/u,         'l')
     n.gsub!(/[Ã±Å?Å?Å?Å?Å?]/u,       'n')
     n.gsub!(/[Ã²Ã³Ã´ÃµÃ¶Ã¸ÅÅ?ÅÅ]/u,  'o')
     n.gsub!(/Å?/u,                  'oe')
     n.gsub!(/Ä?/u,                   'q')
     n.gsub!(/[Å?Å?Å?]/u,             'r')
     n.gsub!(/[Å?Å¡Å?ÅÈ?]/u,          's')
     n.gsub!(/[Å¥Å£Å§È?]/u,           't')
     n.gsub!(/[Ã¹ÃºÃ»Ã¼Å«Å¯Å±Å­Å©Å³]/u,'u')
     n.gsub!(/Åµ/u,                   'w')
     n.gsub!(/[Ã½Ã¿Å·]/u,             'y')
     n.gsub!(/[Å¾Å¼Åº]/u,             'z')
     n.gsub!(/\s+/,                   ' ')
     n.gsub!(/[^\sa-z0-9_-]/,          '')
     n
  end 
```

我需要“要求”一个特定的图书馆/宝石吗？或者也许有人可以推荐另一种方法来解决这个问题。

我没有使用 Rails，也不打算这样做。

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2013-03-29T03:29:43.967

我通常使用 I18n 来处理这个问题：

```
1.9.3p392 :001 > require "i18n"
 => true
1.9.3p392 :002 > I18n.transliterate("Hé les mecs!")
 => "He les mecs!" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-08-06T17:19:09.647

[parameterize](https://apidock.com/rails/ActiveSupport/Inflector/parameterize)方法可能是删除特殊字符以将字符串用作人类可读标识符的一个很好且简单的解决方案：

```
> "Françoise Isaïe".parameterize
=> "francoise-isaie" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-29T03:21:21.993

到目前为止，以下是我能够完成我需要的唯一方法：

```
str.tr(
"ÀÁÂÃÄÅàáâãäåĀāĂăĄąÇçĆćĈĉĊċČčÐðĎďĐđÈÉÊËèéêëĒēĔĕĖėĘęĚěĜĝĞğĠġĢģĤĥĦħÌÍÎÏìíîïĨĩĪīĬĭĮįİıĴĵĶķĸĹĺĻļĽľĿŀŁłÑñŃńŅņŇňŉŊŋÒÓÔÕÖØòóôõöøŌōŎŏŐőŔŕŖŗŘřŚśŜŝŞşŠšſŢţŤťŦŧÙÚÛÜùúûüŨũŪūŬŭŮůŰűŲųŴŵÝýÿŶŷŸŹźŻżŽž",
"AAAAAAaaaaaaAaAaAaCcCcCcCcCcDdDdDdEEEEeeeeEeEeEeEeEeGgGgGgGgHhHhIIIIiiiiIiIiIiIiIiJjKkkLlLlLlLlLlNnNnNnNnnNnOOOOOOooooooOoOoOoRrRrRrSsSsSsSssTtTtTtUUUUuuuuUuUuUuUuUuUuWwYyyYyYZzZzZz") 
```

但是使用它感觉非常“hackish”，我很想找到更好的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-21T06:14:52.167

如果您使用的是导轨：

```
"L'Oréal".parameterize(separator: ' ') 
```

# c++ - 图博弈算法

> ID：15686753
> 
> 赞同：0
> 
> 时间：2013-03-28T16:09:22.167
> 
> 标签：c++, algorithm, matrix, graph-algorithm

我正在尝试模拟以下游戏：该游戏由 2 名玩家进行。想象一下，你有一个图，有顶点和边。每转一圈，您可以删除一条边，如果您隔离一个顶点，您会得到一个点，您可以删除另一条边。你一直玩到没有更多的边缘，此时得分最高的玩家赢得比赛。

我用一个数组表示图形，该数组是从另一个程序生成的单独文件中读取的，例如这个：

```
0 1 1 0
1 0 1 1
1 1 0 0
0 1 0 0 
```

玩家 1 可以以 4/0 获胜，但玩家 2 也可以。最好的结果是玩家 1 的 1/3。

编辑：“玩家如何以 4/0 获胜？” ：

```
A--B--D 
| /
c

A--B--D
|
C

A  B--D
|
C 
```

如您所见，如果中间边缘被移除，第一个玩家将获得 4 分，否则另一个玩家将获得 4 分。

我可以为每个玩家得到最好的结果，但是另一个玩家不会在每回合都选择他最好的回合。我花了很多时间尝试它，但我总是遇到同样的问题。

编辑：我想我现在非常接近解决这个问题（然后我一直在想），我只需要为每回合保存 2 个分数，然后我必须以某种方式做到这一点，以便只有最高当前玩家的分数被接受。这样我应该能够做到，这样玩家就会忽略 4/0 移动..

编辑：我试图实施这个建议，但不幸的是我又被卡住了。我要么得到一个太高的奇怪输出，要么函数只是给我 -2 作为答案，但它不适用于其他更大的图表。我已经尝试了很多方法来修复它，但它只是不起作用。下面的代码是我现在正在尝试的，不幸的是它也不起作用：

```
int Matrix::getTurn (bool** array) {
   if (edges == 0) 
      return 0;
    for (int i=0; i<edges; i++) {
        for (int j=0; j<edges; j++) {
            if (array[i][j] == true) {
                array[i][j] = false;
                array[j][i] = false;
                score = getScore (array, i, j);

                if (score > 0)
                   score += getTurn (array);
                else score -= getTurn (array);

                if (score > maxScore)
                   maxScore = score;

                array[i][j] = true;
                array[j][i] = true;
            }
        }
    }
   return maxScore;
} 
```

maxScore 和 score 是类的成员变量。有人可以指出它的哪一部分需要更正吗？

另一个编辑，仍然无法正常工作，现在我根本看不到错误。它一直输出 1，就好像它从未改变过 maxScore ... Takken 是剩下的边数，我尝试使用数组的边界，但它没有任何区别..

```
int Matrix::berekenZet (bool** array) {
   if (takken == 0)
      return 0;
   int maxScore = 0, score = 0;
    for (int i=0; i<takken; i++) {
        for (int j=0; j<takken; j++) {
            if (array[i][j] == true) {
                array[i][j] = false;
                array[j][i] = false;
                takken -= 1;
                score = berekenScore (array, i, j);

                if (score > 0)
                   score += berekenZet (array);
                 else score -= berekenZet (array);

                if (score > maxScore)
                   maxScore = score;

                array[i][j] = true;
                array[j][i] = true;
                takken += 1;
                score = 0;
            }
        }
    }
   return maxScore;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:59:08.037

您似乎正在尝试实现某种形式的[Minimax](http://en.wikipedia.org/wiki/Minimax)算法。假设两个玩家都为自己做出了最好的动作，这将为玩家找到可能的最佳分数。

但是你的代码中有一些奇怪的东西：太多的分数变量，`maxScore`在函数中间无条件地赋值（因此失去了它的旧值），我看不出分数怎么会收到一个非零值。

这是我用伪代码实现的。该函数`getScore(graph)`将为轮到的玩家返回可能的最佳分数（假设两个玩家都玩以最大化自己的分数），其中“分数”意味着玩家的分数减去其他玩家的分数。我正在使用 minimax 的[Negamax](http://en.wikipedia.org/wiki/Negamax)变体。这使用了这样一个事实，即一个玩家的 +x 分数与另一个玩家的 -x 分数相同，以避免必须写两次。甚至不需要跟踪轮到谁了，因为两个玩家都可以做出完全相同的动作。

```
int getScore(graph):
    if no possible moves:
        return 0
    maxScore = -infinity
    for each possible move:
        make the move
        score = the score directly obtained by this move
        if the player gets another turn:
            score += getScore(graph)
        else:  //opponent turn - subtract opponent's best score from player score
            score -= getScore(graph)
        maxScore = max(maxScore, score)
        undo the move
    return maxScore 
```

# c# - LINQ to XML：解析简单的 XML 条目

> ID：15686760
> 
> 赞同：1
> 
> 时间：2013-03-28T16:09:39.210
> 
> 标签：c#, xml, linq

第一次使用 LINQ to XML，攀登学习曲线...

我正在寻找如何从 XML 文件中检索和转换数据的最流畅的方法，使用尽可能少的 if-else 和，上帝保佑，try-catch 语句。我真的很讨厌所有冗长的代码，只是为了从文档中检索单个值。

话虽如此，我正在寻找一种故障安全解决方案，如果 XML 文档的结构发生意外更改，该解决方案不会中断。在这种情况下，我希望检索到空值，以便稍后在代码中检查它。

这是我的 XML 文档：

```
&lt;?xml version="1.0" encoding="utf-8"?>
<Entry>
  <IntField>11</IntField>
  <StringField>String data</StringField>
  <DateTimeField>28/03/2013 18:10:02</DateTimeField>
</Entry> 
```

我正在寻找每行代码检索一个值的代码，即：

```
myXMLdoc = XDocument.Load("sourceFile.xml");
int? myIntField = (smart linq query that retrieves&converts the value, with fallback of null);
string? myStringField = (smart linq query etc.);
DateTime? myDateTimeField = (smart linq query etc.);
if (myIntField == null)
{
    // Complain that structure of the XML doc is bad
} 
```

也许我对 LINQ 能够做到这一点的期望是幼稚的，但是，我已经为琐碎的漂亮 XML 处理编写了一大堆 XPath 表达式和 if-else 语句，对此我已经积累了一些苦涩。所以我确实怀着很大的希望转向 LINQ。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:37:56.350

尽管 LINQ2XML 本身缺乏必要的“魔法”，但它为您自己构建代码提供了足够的“基础”。这是一个示例，向您展示如何`int?`从任意深度的元素中读取一个（当然，假设路径是唯一的）：

```
public static class LinqExt {
    public static int? ReadInt(this XElement e, string path, int? fallback = null) {
        foreach (var name in path.Split('/')) {
            e = e.Element(name);
            if (e == null) {
                return fallback;
            }
        }
        int val;
        return int.TryParse(e.Value, out val) ? val : fallback;
    }
} 
```

您可以按如下方式使用此扩展方法：

```
var myXMLdoc = XDocument.Load("sourceFile.xml");
var intVal = myXMLdoc.Root.ReadInt("IntField"); 
```

即使有一些嵌套，该方法也可以工作，例如，如果您的文档看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<Entry>
  <Nested1>
      <Nested2>
          <IntField>11</IntField>
      </Nested2>
  </Nested1>
</Entry> 
```

你会得到这样的值：

```
var intVal = myXMLdoc.Root.ReadInt("Nested1/Nested2/IntField"); 
```

# ruby-on-rails - 在视图/控制器中显示路线

> ID：15686761
> 
> 赞同：4
> 
> 时间：2013-03-28T16:09:39.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Ruby on Rails 中编写了一个 API，我希望有一个页面列出所有可用的路由（我知道这可以通过命令行使用 来完成`rake routes`）。

我想自动生成它，而不是在更新代码时自己更新它。有没有办法获取控制器（或视图）中所有路由的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:01:36.320

我开始探索 jvnill 给出的解决方案，并在文档中发现它指出[不应使用](http://apidock.com/rails/Rails/Application/RouteInspector)RouteInspector 。出于什么原因我不知道，但我决定看一下代码，并尝试获得更有用的输出，而不仅仅是字符串。我使用 jvnill 的代码作为起点。

```
all_routes = Rails.application.routes.routes
routes = all_routes.routes.collect do | route |
  reqs = route.requirements

  controller = reqs[:controller] || ':controller'
  action = reqs[:action] || ':action'

  constraints = reqs.except(:controller, :action)

  verb = route.verb.source.gsub(/[$^]/, '')

  {name: route.name.to_s, verb: verb, path: route.path.spec.to_s, reqs: reqs}

end

routes.reject! { |r| r[:path].starts_with?("/rails/info/properties") || r[:path] == "#{Rails.application.config.assets.prefix}" } 
```

`routes`然后包含一个哈希，其中包含路由名称、路径以及控制器和操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:19:14.343

你可以看看 rake 路由的 rake 任务是如何实现的 :) 它位于 railties gem 里面`lib/rails/tasks/routes.rake`。但为了更容易，这里是

```
task :routes => :environment do
  Rails.application.reload_routes!
  all_routes = Rails.application.routes.routes

  require 'rails/application/route_inspector'
  inspector = Rails::Application::RouteInspector.new
  puts inspector.format(all_routes, ENV['CONTROLLER']).join "\n"
end 
```

# asp.net-mvc-3 - MVC 在每个页面上重构一个 [httpPost] 处理程序？

> ID：15686763
> 
> 赞同：0
> 
> 时间：2013-03-28T16:09:44.223
> 
> 标签：asp.net-mvc-3, forms, refactoring

我网站的每个页面上都有一个简单的表单，该表单返回并由页面控制器处理。

每个页面上的 ForController..

```
 [HttpPost]
 public ActionResult Index(Models.FindTutorFormModel formModel)
 {
   if (ModelState.IsValid)
   {
      return Redirect("/thanks/");
   }
   return View();
  } 
```

我真的不想为网站中的每个页面控制器复制代码有没有一种简单的方法来重构它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:18:54.303

我不确定这是否是您任务的最佳方法，但您可以使用继承

```
 using System.Web.Mvc;

    namespace MvcApplication2.Controllers
    {
        public class BaseController : Controller
        {
            public ActionResult Thanks()
            {
                return Content("Thanks!");
            }
        }

        public class HomeController : BaseController
        {
            public ActionResult Index()
            {
                ViewBag.Message = "Welcome to ASP.NET MVC!";
                return View();
            }
            public ActionResult About()
            {
                return View();
            }
        }

        public class InfoController : BaseController
        {
            public ActionResult Index()
            {
                ViewBag.Message = "Welcome to ASP.NET MVC!";
                return View();
            }
        }
    } 
```

所以在每个控制器中你都会有相同的方法。我希望它有帮助！

# android - 在内存中的何处存储持久（直到重新启动）数据？

> ID：15686766
> 
> 赞同：1
> 
> 时间：2013-03-28T16:09:47.833
> 
> 标签：android

目前，我将数据存储在`Application`班级的静态属性中。当应用程序关闭时，数据仍然存在，但是当应用程序从最近菜单中清除（或缓存的进程被终止）时，`Application`该类似乎也从内存中擦除。

我需要可以从活动/片段以及`BroadcastReceiver`. 启动时首先加载数据`MainActivity`。[你可以在我的 GitHub 项目](https://github.com/Gawdl3y/task-timer/tree/master/android)中看到我的代码。

**更新**

我正在使用 SQLite 存储数据，并且活动在启动时将数据加载到内存中。不过，我认为我不能从`BroadcastReceiver`. 主要问题是我需要`BroadcastReceiver`能够操作与活动相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:51:28.347

另一个有趣的可能性是将数据存储为 xml 文件。您可以使用它，例如简单的 XML 库：[http ://simple.sourceforge.net/](http://simple.sourceforge.net/)

首先，您应该在模型类中进行注释，

```
@Root
public class Example {

@Element
private String text;

@Attribute
private int index;

public Example() {
  super();
}  

public Example(String text, int index) {
  this.text = text;
  this.index = index;
}

public String getMessage() {
  return text;
}

public int getId() {
  return index;
}
} 
```

然后你可以保存这些对象：

```
 Serializer serializer = new Persister();
 Example example = new Example("Example message", 123);
 File result = new File("example.xml");

 serializer.write(example, result); 
```

要再次获取此文件，这应该可以完成工作：

```
Serializer serializer = new Persister();
File source = new File("example.xml");

Example example = serializer.read(Example.class, source); 
```

这是取自项目站点的最简单示例之一，但可以编写嵌套对象和列表。它也有很好的记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:11:19.220

更简单的方法是使用 android[首选项](http://developer.android.com/training/basics/data-storage/shared-preferences.html)。其他方法包括将文件保存到磁盘或 SQLite 数据库中，您可以从阅读以下内容开始：[将数据保存在 android 中](http://developer.android.com/training/basics/data-storage/index.html)。

来自 android 教程的示例：

```
//Saving the data
SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPref.edit();
editor.putInt(getString(R.string.saved_high_score), newHighScore);
editor.commit();

//Loading of the saved data
SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);
int defaultValue = getResources().getInteger(R.string.saved_high_score_default);
long highScore = sharedPref.getInt(getString(R.string.saved_high_score), defaultValue); 
```

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)进行 SQLlite 操作。

# java - 为什么调用 DetachCurrentThread() 会导致过多的垃圾收集？

> ID：15686767
> 
> 赞同：3
> 
> 时间：2013-03-28T16:09:55.590
> 
> 标签：java, garbage-collection, java-native-interface, detach

我正在从 C 代码中调用 Java 方法。每次调用时我调用 AttachCurrentThread，调用后我调用 DetachCurrentThread。

这很好用，但问题是我看到了由此引起的垃圾收集，即几乎每次通过 JNI 调用。次要集合上的VisualVM图基本上都是绿色的！从本机代码调用 Java 的速率是每秒数百次。在调用期间，我还可以看到创建过多的 Java 线程，例如 Thread-34543、Thread-34544、Thread-34545 等，这可能是 GC 的原因。看起来每个调用都是通过不同的线程完成的。

有人见过这个吗？

只是补充一点，当我不 DetachCurrentThread 时根本没有 GC，但 VisualVM 中的线程视图显示了数百个附加到 VM 的线程。有小费吗？

JVM 设置

-Xms2048m -Xmx2048m -XX:MaxDirectMemorySize=256M -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom. sun.management.jmxremote.port=3333

平台：Ubuntu 12.04 Linux 3.2.0-35-generic #55-Ubuntu SMP Wed Dec 5 17:42:16 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

爪哇：

OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1) OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

更新 2013-03-30

我认为我的问题出在其他地方。我打印出线程的 ID，看起来只有少数线程在调用我的 JNI 代码。上次运行显示 13 个线程。问题是，当运行

```
if ((*vm)->GetEnv(vm, (void**)&env, JNI_VERSION_1_4) == JNI_OK)
    return env;
else
    return NULL; 
```

为了让 JNIEnv* 与当前线程关联，我得到错误代码 -2 (JNI_EDETACHED)。为了清楚起见，我根本不调用 DetachCurrentThread，因为我希望这些线程回到我的本机库。在那种情况下，我再次附加本机线程，这可能会导致在 JVM 中创建过多的线程对象。上次运行节目

```
 29 [478e](get_env) Thread 2633996032 has env: (nil), err was: -2
 47 [478e](get_env) Thread 2642388736 has env: (nil), err was: -2
 32 [478e](get_env) Thread 2650781440 has env: (nil), err was: -2
 31 [478e](get_env) Thread 2659174144 has env: (nil), err was: -2
 37 [478e](get_env) Thread 2667566848 has env: (nil), err was: -2
 30 [478e](get_env) Thread 2675959552 has env: (nil), err was: -2
 32 [478e](get_env) Thread 2684352256 has env: (nil), err was: -2
 33 [478e](get_env) Thread 2760873728 has env: (nil), err was: -2
 33 [478e](get_env) Thread 2769266432 has env: (nil), err was: -2
 37 [478e](get_env) Thread 2777659136 has env: (nil), err was: -2
 36 [478e](get_env) Thread 2786051840 has env: (nil), err was: -2
 31 [478e](get_env) Thread 2794444544 has env: (nil), err was: -2
 52 [478e](get_env) Thread 3707176704 has env: (nil), err was: -2 
```

其中第一列是附加线程没有与之关联的有效环境的调用次数。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:17:44.570

该函数将您*当前*`AttachCurrentThread`的本机线程附加到 JVM对象。这是必需的，因为 JVM 中的所有操作都发生在线程的上下文中（在对象的 C 端引用）。*`Thread``JNIEnv`*

 *如果您的 C 代码不是多线程的，则无需调用附加/分离；只需使用`JNIEnv`您从中获得的`JNI_CreateJavaVM`. `JNIEnv`如果您的 C 线程数量有限，那么您可以在本机线程启动时调用 attach，并在线程的生命周期内继续使用相同的内容（但您必须附加*每个*C 线程）。如果您正在创建大量 C 线程，那么您别无选择：您必须附加每个线程。

我怀疑“过度”垃圾收集正在发生，因为 JVM 使用线程本地分配块：每个 Java 线程都被赋予了 Eden 内存的保留区域用于其分配（以防止与其他线程争用）。当本地线程被分离时，该 TLA 就有资格被收集（并且，根据 TLA 的大小，由于您的短期附件，您可能只是用它们填充 Eden）。您可以使用 禁用此行为`-XX:-UseTLAB`，但这可能会导致比它解决的问题更多的问题（因为 JVM 必须在每次分配时锁定其内部状态）。

**TLDR**：如果您不创建本机线程，则不需要不断地附加/分离。

* * *

*编辑以回应评论*

我建议缓存`JNIEnv`指针，并根据需要附加/分离。假设您正在使用 PThreads，您可以使用[pthread_setspecific](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_setspecific.html)将环境指针关联到当前本机线程。如果您的代码是从没有环境指针的线程调用的，请`AttachCurrentThread`使用该线程调用并存储结果。

执行此操作时，您还需要使用[线程清理处理程序](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_cleanup_push.html)`DetachCurrentThread`在本机线程即将终止时调用。假设您使用的库没有对清理堆栈做任何愚蠢的事情，这应该可以防止 Java`Thread`对象的泄漏。*

# javascript - 跟随鼠标的jQuery“滚动到顶部”按钮？

> ID：15686768
> 
> 赞同：0
> 
> 时间：2013-03-28T16:09:56.283
> 
> 标签：javascript, jquery, scroll, mouseevent

当它进入左侧的固定 div 时，我试图让我的滚动到顶部链接跟随用户的鼠标。我已经为我正在尝试做的事情制作了一个原型，但我的技能太低而无法真正让它发挥作用。请帮忙。

```
 var mouseX = 0, mouseY = 0;
$(".side").mousemove(function(e){
   mouseY = e.pageY-19; 
});

var follower = $("#follower");
yp = 0;
var loop = setInterval(function(){

    yp += (mouseY - yp) / 6;
    follower.css({top:yp});

}, 10); 
```

小提琴：http: [//jsfiddle.net/grammakov/tDGRc/1](http://jsfiddle.net/grammakov/tDGRc/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:16:39.427

我的网站上有这样的东西：

```
$("body").on( "mousemove" , "a.refreply",  function(e){ relocatePopup(e); }); 
```

当鼠标位于带有“refreply”类的某个链接的顶部时，它会显示一个 div#popup，如果鼠标移动，则弹出窗口会跟随光标。显示弹窗的部分这里没有显示，它基本上以 $('#popup').show(); 结尾

函数 relocatePopup 是：

```
function relocatePopup ( e, useglobal ) {

if ( useglobal == true ) {
    var e = new Object;
    e.pageX = global_x;
    e.pageY = global_y;
}

var popup_height = parseInt( $("div#popup").css("height") ) ;
var bottom_popup = e.pageY + popup_height + 20;
var bottom_page = window.pageYOffset + window.innerHeight;
if ( bottom_popup > bottom_page ) {
    $('div#popup').css("top", bottom_page - popup_height - 5 ).css("left",e.pageX+20);
}else{
    $("div#popup").css("top",e.pageY+20).css("left",e.pageX+20);
}
} 
```

基本上它获取鼠标事件的 x,y，剩下的就是计算弹出窗口的内容是否会出现在可见屏幕之外，重新计算将弹出窗口保持在页面内的位置，然后更改“顶部”和元素的“左侧”，必须绝对定位。

# python - Formset is_valid 返回 False 而不做任何更改

> ID：15686769
> 
> 赞同：3
> 
> 时间：2013-03-28T16:10:02.963
> 
> 标签：python, django, django-forms

我对此很陌生，所以请耐心等待。我创建了一个“编辑书籍”表单，`modelformset_factory`用于使用 Book 模型构建表单。当我使用模型中的数据加载表单并尝试保存它时，无论我是否以任何方式更改表单中的数据，`is_valid()`总是返回 False。

代码：

**模型.py**

```
class Book(models.Model):

    def __unicode__(self):
        return self.title

    user = models.ForeignKey(User)
    title = models.CharField(max_length=300)
    author = models.CharField(max_length=200)
    description = models.TextField(blank=True)
    pub_date = models.DateField(blank=True, null=True)
    link = models.URLField(blank=True, null=True)
    category = models.CharField(max_length=2, choices=CATEGORY_CHOICES)
    rating = models.IntegerField(blank=True, null=True, default=0)
    date_added = models.DateField(auto_now_add=True)
    date_reading = models.DateField(blank=True, null=True)
    date_read = models.DateField(blank=True, null=True)
    notes = models.TextField(blank=True, null=True)
    reading = models.BooleanField(default=False)
    book_read = models.BooleanField(default=False) 
```

**视图.py**

```
from django.forms.models import modelformset_factory
from models import Book

def edit_book(request, book_id):
    BookFormSet = modelformset_factory(Book, exclude=('user', 'date_reading', 'date_read', 'reading', 'book_read'), max_num=1)
    if request.method == 'POST':
        formset = BookFormSet(queryset=Book.objects.filter(pk=book_id))
        if formset.is_valid():
            formset.save()

            return redirect('/books/' + str(book_id))
        else:
            formset = BookFormSet(queryset=Book.objects.filter(pk=book_id))
            return render(request, 'books/edit.html', {'formset':formset}) 
```

**补充说明：**

formset.is_bound 返回 False
formset.errors 返回 []
formset.non_form_errors() 不返回任何内容
formset.has_changed() 返回 True

# php - 字符串是 PHP 中的对象吗？

> ID：15686779
> 
> 赞同：6
> 
> 时间：2013-03-28T16:10:31.097
> 
> 标签：php

看到其他语言如 Java 或 C++ String 是一个对象。
但是在 PHP 中是一样的吗？我应该写字符串还是字符串？
我知道这可能是一个奇怪的问题，但即使在 php.net 上我也找不到答案

非常感谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T16:23:50.737

[String](http://www.php.net/manual/en/language.types.string.php)不是 by 中的 Object`PHP`并且不需要`Default`强制[转换，但如果您想使用](http://www.php.net/manual/en/language.types.type-juggling.php)[scalar_objects](https://github.com/nikic/scalar_objects) 可以引入它

```
class StringHandler {

    public function length() {
        return strlen($this);
    }
}

register_primitive_type_handler('string', 'StringHandler'); 
```

这样你就可以轻松拥有

```
$str->length(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:11:07.720

字符串不是`Object`PHP 中的。您不必在 PHP 中强制转换变量的类型。见 [http://www.php.net/manual/language.types.string.php](http://www.php.net/manual/language.types.string.php) 和[http://php.net/manual/language.types.type-juggling.php](http://php.net/manual/language.types.type-juggling.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:12:22.620

String 不是 PHP 中的对象，它是一种原始类型。该信息位于[http://php.net/manual/en/language.types.php](http://php.net/manual/en/language.types.php)

小写字符串对于您可能有的少数用途是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T16:11:56.557

您可以在这里找到几乎所有与类型相关的内容：http: [//php.net/manual/en/language.types.php](http://php.net/manual/en/language.types.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T16:13:33.403

字符串不是对象..它是基本类型

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T16:13:51.990

字符串和对象是两个不同的东西。但是，如果您想运行自己的检查：

```
if (is_object($var))
{
 echo "Var is an object"; 
}
elseif (is_string($var))
{
 echo "var is a String"; 
}
else
{
  echo "var is neither an object or string"; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T16:13:27.613

Everyting 可以通过 PHP 的内置函数来实现，因此您可以使用 String 对象做所有您可以做的事情。

# macos - 如何修改 Mac OS X Cocoa 布局约束

> ID：15686780
> 
> 赞同：2
> 
> 时间：2013-03-28T16:10:31.687
> 
> 标签：macos, cocoa, autolayout

我在 Interface Builder 的 Mac OS X 项目中有一个约束设置，如下所示：

```
H:|-(61)-[webView] 
```

我想从我的代码中修改那个 IB 约束。我可以添加另一个约束，但是控制台会抱怨冲突，如下所示：

```
Unable to simultaneously satisfy constraints:
(
    "<NSLayoutConstraint:0x102112320 H:|-(61)-[WebView:0x10230a1c0]   (Names: '|':NSView:0x102362e90 )>",
    "<NSLayoutConstraint:0x10063bab0 H:|-(0)-[WebView:0x10230a1c0]   (Names: '|':NSView:0x102362e90 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x102112320 H:|-(61)-[WebView:0x10230a1c0]   (Names: '|':NSView:0x102362e90 )> 
```

[Apple - Mac OS X - Cocoa Auto Layout Guide](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/constraintFundamentals.html#//apple_ref/doc/uid/TP40010853-CH2-SW6)上的 Apple 文档指出“约束大多是不可变的......它在算法上很重要。更改常量比删除约束并添加新约束更有效...... "

如何从我的代码中修改前导空间约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:16:44.540

约束是与 IB 中的其他对象一样的对象，因此您可以在控制器（或任何其他合适的对象）中创建一个出口并将约束链接到它。

然后，在您的代码中，您可以更改约束的常量部分。

您还可以以编程方式删除约束并添加另一个约束，因为它不仅仅是您要修改的常量部分。

# c# - 在 mvc 3.0 中使用 parent.clear() 删除子项

> ID：15686784
> 
> 赞同：0
> 
> 时间：2013-03-28T16:10:41.823
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我试图通过首先从上下文中加载项目然后清除来删除类中的所有子项目。

模型：

```
public class Ticket
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    public virtual ICollection<TicketItem> TicketItems { get; set; }
    public Ticket()
    {
        TicketItems = new List<TicketItem>();
    }
}

public class TicketItem
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    [Required]
    [DataType(DataType.Currency)]
    [DisplayFormat(DataFormatString = "{0:C}")]
    public double Price { get; set; }

    public int TicketId { get; set; }
    public virtual Ticket Ticket { get; set; }
} 
```

控制器：

```
[HttpPost]
    public ActionResult Edit(TicketViewModel ticketViewModel)
    {
        if (ModelState.IsValid)
        {
            var ticket = ticketViewModel.Ticket;
            context.Entry(ticket).State = EntityState.Modified;
            context.Entry(ticket).Collection(i => i.TicketItems).Load();
            ticket.TicketItems.Clear();
            context.SaveChanges();
            AddOrUpdateItems(ticket, ticketViewModel.Items);
            return RedirectToAction("Index");
        }
        return View(ticketViewModel);
    }

private void AddOrUpdateItems(Ticket ticket, ICollection<AssignedItem> assignedItems)
    {
        foreach (var assignedItem in assignedItems)
        {
            if (assignedItem.Assigned)
            {
                var item = context.Items.Find(assignedItem.Id);
                var ticketItem = CreateTicketItem(item, ticket);
                ticket.TicketItems.Add(ticketItem);
            }
        }
    } 
```

我尝试将以下内容添加到模型构建器中：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
    ...
        modelBuilder.Entity<Ticket>()
            .HasMany(t => t.TicketItems)
            .WithRequired(i => i.Ticket)
            .WillCascadeOnDelete();
    ...
    } 
```

当我在控制器中使用编辑方法时，出现此错误：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新的关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

我知道这与数据库中的 FK 约束有关，我只是认为通过添加`WillCascadeOnDelete()`this 可以解决问题，因为`Clear()`它将删除所有子条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:26:17.863

您看到的问题是，当您清除实体上的导航属性时，您所做的只是删除两个项目之间的链接（清除外键）。您不是从上下文中删除实体。

请参阅 StackOverflow 问题[Entity Framework - Clear a Child Collection](https://stackoverflow.com/questions/2058697/entity-framework-clear-a-child-collection)

# git - 无法删除 git 中的目录

> ID：15686786
> 
> 赞同：0
> 
> 时间：2013-03-28T16:10:51.060
> 
> 标签：git

但是，我有一个空的 git 目录要删除

`"git rm -r NameOfDirectory"`正在回归`"operation not permitted"`。

另外，如果我将一个新文件移动到这个目录然后执行 git status，git 不会将它列为新的未跟踪文件，但如果我将文件移动到另一个目录，它就会这样做，所以它有一些奇怪的地方。

我怎样才能摆脱这个目录？

`git rm -r -f`没有解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:16:11.433

这是一个权限问题。

尝试

`sudo git rm -r NameOfDirectory`使用root密码

您可以尝试在不使用 git 命令但`rm`直接使用命令的情况下删除目录。

`rm -r NameOfDirectory`或者`sudo rm -r NameOfDirectory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:17:00.157

Git 不跟踪空目录。如果你的工作树中有一个空目录，你应该简单地用`rmdir`. 无需涉及 Git。

# sencha-touch - Sencha touch 2 用户登录示例

> ID：15686788
> 
> 赞同：0
> 
> 时间：2013-03-28T16:10:52.870
> 
> 标签：sencha-touch, sencha-touch-2

我是 sencha touch 的新手，正在尝试制作一个用户必须登录才能使用该应用程序的应用程序。此外，我还为用户身份验证创建了 restful api，如果身份验证正确，它会以 json 格式响应用户。用户认证的 api url 如下所示：`http://api-url/user/$username/$password.`

我的登录视图：

```
Ext.define('NCAPP.view.tablet.LoginForm', {
extend: 'Ext.form.Panel',
xtype:'loginForm',
id:'loginForm',

requires:[
    'Ext.form.Panel',
    'Ext.form.FieldSet',
    'Ext.field.Password',
    'Ext.Img',
    'Ext.field.Toggle'
],
config: {
    items: [
        {
            xtype: 'image',
            src:'resources/img/netcenter_logo.png',
            height: 100
        },
        {
            xtype: 'fieldset',
            title: 'NCAPP LOGIN:',
            items: [

                {
                    xtype: 'textfield',
                    id:'fldUsername',
                    name:'username',
                    placeHolder: 'Username'
                },
                {
                    xtype: 'passwordfield',
                    id:'fldPassword',
                    name:'passowrd',
                    placeHolder: 'Password'
                }
            ]
        },
        {
            xtype: 'button',
            id: 'btnLogin',
            text: 'Login'

        }
    ]
} 
```

});

我也有用户模型：

```
Ext.define('NCAPP.model.User', {
extend:'Ext.data.Model',

config:{
    fields:[
        { name:'id', type: 'int'},

        { name: 'username', type: 'string'},
        { name: 'netshop_id', type:'int'},
        { name: 'firstname', type: 'string'},
        { name: 'lastname', type: 'string'},
        { name: 'address', type: 'string'},
         { name:'password', type:'string'},
        ]

} 
```

});

我的登录控制器：

```
Ext.define('NCAPP.controller.tablet.LoginController', {
extend: 'Ext.app.Controller',    
config: {
    refs: {   
        loginForm:'loginForm'
    },
    control: {
        '#btnLogin':{
            tap:'onLoginButtonTap'
        }            
    }
},
onLoginButtonTap:function(){

},
init:function(application){

} 
```

});

正如我之前提到的，我的 api 是完全宁静的。我想我不能使用 ajax 代理，我必须使用 rest 代理。我的大问题是如何将用户名和密码传递给restful api？

任何机构都可以帮我解决这个问题（最好举个例子）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:33:56.480

只需几个精度，您的 RESTful API。当您尝试对用户进行身份验证时，登录名和密码，即使加密/散列也不应该**出现**在您的 URL 中。相反，更喜欢使用 url api-url/user/ 的 POST 请求和包含您的用户名和密码的 POST 消息（例如 json）。

对于 ajax 请求，在您的控制器中，您应该执行以下操作（假设一切正常）：

```
Ext.define('NCAPP.controller.tablet.LoginController', {
    extend: 'Ext.app.Controller',    
    config: {
        refs: {   
            loginForm:'loginForm'
        },
        control: {
            '#btnLogin':{
                tap:'onLoginButtonTap'
            }            
        }
    },
    onLoginButtonTap:function(){
        var values = this.getLoginForm().getValues();
        var jsonToPost = {};
        jsonToPost.user = values.username;
        jsonToPost.passwd = values.password;
        Ext.Ajax.request({
            url: 'your-url/user',
            method: 'POST',
            params: jsonToPost,
            success: function(response) {
                // Server send a 200 code response. it means it understood the request and was able to deal with it
                // you should check whether or not it is a success. Your answer JSON should contain this information
            },
            failure: function(response) {
                // any other response than a 200
            }
        });
    },
    init:function(application){

    }    
}); 
```

代码**已经过**测试。

# c# - 基于方法参数构建 IQueryable

> ID：15686793
> 
> 赞同：3
> 
> 时间：2013-03-28T16:11:03.133
> 
> 标签：c#, .net, entity-framework, generics, iqueryable

我有一个类似于下面的 API 方法。

是否可以附加 IQueryable 以便最终查询具有执行 where 语句的项目列表，或者我应该使用 SqlQuery 属性并构建原始 SQL 字符串。

```
 public IEnumerable<Message> GetMessagesFromApi(DateTime? dateFrom = null, DateTime? dateTo = null, int flag = -1, int messageType = 1, bool media =false)
    {
        if (dateFrom == null)
            dateFrom = DateTime.MinValue;

        if (dateTo == null)
            dateTo = DateTime.MaxValue;

        IQueryable<Message> query = null;

        query = db.Messages.Where(x => x.Created >= dateFrom && x.Created <= dateTo);

        if (flag >= 0)
        {
            //Append the where statement on dates to now include Flag
            query = query.Where(x => x.Flag == flag);
        }

       //Here it should execute against Where date >= and date <= and flag = 1
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:16:15.747

> 是否可以附加 IQueryable 以便最终查询具有执行 where 语句的项目列表。

是的。您的代码应该可以正常工作。如果你想为结果构建一个，你只需要执行这个`IEnumerable<Message>`。

```
//Here it should execute against Where date >= and date <= and flag = 1
return query.ToList(); 
```

请注意，您可以使用`AsEnumerable()`甚至直接返回`query`（因为`IQueryable<T>`implements `IEnumerable<T>`），但是如果用户多次枚举您的结果，这将导致问题，因为每个枚举都会命中数据库。

我个人会这样写：

```
public IEnumerable<Message> GetMessagesFromApi(DateTime? dateFrom = null, DateTime? dateTo = null, int flag = -1, int messageType = 1, bool media =false)
{
    IQueryable<Message> query = db.Messages;

    if(dateFrom.HasValue)
        query = query.Where(x => x.Created >= dateFrom);
    if(dateTo.HasValue)
        query = query.Where(x => x.Created <= dateTo);
    if(flag >= 0)
        query = query.Where(x => x.Flag == flag);
    // others as needed, such as media...

    return query.ToList();
} 
```

# c# - aspx 页面中的 asp.net cs 变量

> ID：15686797
> 
> 赞同：0
> 
> 时间：2013-03-28T16:11:09.663
> 
> 标签：c#, asp.net

需要一些帮助。我有一个带有 iframe 的 aspx 页面，我正在尝试将一个名为“pageId”的变量从我的代码中传递给它。我查看了 SO 和其他网站上的各种示例，大多数都向其他人建议这是一个数据绑定问题，我已经完成了一些示例。也许我不能像我尝试在 iframe 中那样使用变量？

我已经介绍了 get/set 和 public 属性，但只是有点失落。请有人帮我指出正确的用语吗？

页面

```
<iframe width="690" height="600" src="https://myserver.com/Index.php?pageId=<%=pageId%>" frameborder="0" scrolling="yes" style="border-width: 0px;"></iframe> 
```

aspx.cs 页面

```
protected String pageId { get; set; }

//private string pageId;
//public String pageId { get {return pageId; } }

protected void Page_Load(object sender, EventArgs e)
{
    string pageId = 'Y2840'; //this is generated from my db and I know the data is being stored in here as I have Response.Write(pageId)   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:19:05.473

您的私有变量和公共属性具有相同的名称。尝试在您的属性名称中使用大写字母 P。也不要在 Page_Load 中声明一个新的变量 pageId。PageId 为空白，因为您正在设置本地 Page_Load 方法变量，而不是类级别变量。

```
private string pageId;
public string PageId { get {return pageId; } }

protected void Page_Load(object sender, EventArgs e)
{
    pageId = 'Y2840';  
} 
```

在您的 aspx 页面中：

```
<%=PageId%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:21:34.967

方法1。

```
<iframe runat="server" id="myiframe" width="690" height="600"      
frameborder="0" scrolling="yes"     style="border-width: 0px;"></iframe> 
```

代码隐藏：

```
myiframe.src="https://myserver.com/Index.php?pageId=" + pageId; 
```

方法2。

将 iframe 放入 formview 并为其提供数据源。然后使用您现有的代码。

# c# - 获取月份中不带前导零的日期的字符串格式

> ID：15686798
> 
> 赞同：6
> 
> 时间：2013-03-28T16:11:11.983
> 
> 标签：c#, datetime, string-formatting

我正在尝试`DateTime`在 C# 中的对象上使用字符串格式来获取月份中没有前导零的日期。

经过一番搜索，我找到[了一些 DateTime 格式的文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，这表明我应该可以调用：

```
dateTime.ToString("d"); 
```

得到我想要的值，但是当我尝试它时，`28`输出不是像 ，而是：`3/28/2013`。

经过一番搜索，我找到了[Standard Date and Time String Formats](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)的文档。

两组格式都使用该`"d"`格式，但从结果中可以明显看出标准字符串格式优先于自定义字符串格式。

**有没有办法指定所需的格式？**

为了代码一致性，我更喜欢写：

```
a = dateTime.ToString(...some format...);
b = dateTime.ToString(...some format...); 
```

而不是

```
a = dateTime.ToString(...some format...);
b = dateTime.Day.ToString(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T16:14:22.710

单个字符被理解为[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)，在本例中为“短日期模式”。

您需要为单个字符的自定义格式字符串添加前缀，`%`以便将其解释为自定义格式字符串：

```
dateTime.ToString("%d"); 
```

这在您链接到的页面上的[使用单个自](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#UsingSingleSpecifiers)定义格式说明符（描述`%`自定义格式说明符）下进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:16:49.210

您可以通过`ToString`在格式中添加一个空文字来使该方法使用该格式作为自定义格式字符串而不是标准格式字符串：

```
dateTime.ToString("''d") 
```

# php - 为数据库中的每个“对话”使用新的 SQL 表

> ID：15686799
> 
> 赞同：0
> 
> 时间：2013-03-28T16:11:13.587
> 
> 标签：php, sql, database, web-applications

我有这个我正在为我的主要项目开发的 Web 应用程序，其中一个功能是注册用户之间的消息传递。整个消息系统的创建，每次发送消息时，都会在表会话中创建新记录，并在第二个数据库中创建新表，表名由用户ID和会话ID组成。在此表中存储了两个 ppl 之间的整个对话。

我的问题是，这种好方法或每天在我的数据库中创建表对于服务器来说是否需要处理太多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:16:02.103

根据请求创建新表绝不是一个好主意。您可以创建一个将 user_ids 连接到对话的表：

```
conversations:
id : 2348
started_at: 2013-03-28 17:13:00

user_conversations:
id        : 538
conversation_id: 2348
message   : "Hey Jakub, how are you?"
user_id   : 5831
posted_at : 2013-03-28 17:14:50

id        : 539
conversation_id: 2348
message   : "Hey Anyone, I'm fine, how are you?"
user_id   : 95234
posted_at : 2013-03-28 17:15:30 
```

等等

id：PK，user_id 上的键

您可能想玩弄按键，但这是一个很好的设置。您将消息连接到用户和覆盖。这样，对话也不限于 2 个用户。

# jquery - Ziptastic 在 Internet Explorer 中不起作用

> ID：15686803
> 
> 赞同：1
> 
> 时间：2013-03-28T16:11:19.487
> 
> 标签：jquery, internet-explorer-8

这里是相当新的用户，但我在获取 ziptastic 时遇到了问题，而且它是在 IE 中工作的 jquery。可以在所有其他浏览器中正常工作。这是 HTML 和 jquery：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <title>Zip Code Lookup Demo</title>
        <style>
            form label, form input {
                display: block;
            }
        </style>
    </head>
    <body>
        <form id="theform">
            <label for="zip">
                Zip:
                <input type="text" id="zip" />
            </label>

            <label for="city">
                City:
                <input type="text" id="city" />
            </label>

            <label for="state">
                State:
                <input type="text" id="state" />
            </label>

            <label for="country">
                Country:
                <input type="text" id="country" />
            </label>

            <input type="submit" />
        </form>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
        <script type="text/javascript" src="jquery.ziptastic.js"></script>
        <script type="text/javascript">
            (function($) {
                $(function() {
                    var duration = 500;

                    var elements = {
                        country: $('#country'),
                        state: $('#state'),
                        city: $('#city'),
                        zip: $('#zip')
                    }

                    // Initially hide the city/state/zip
                    elements.country.parent().hide();
                    elements.state.parent().hide();
                    elements.city.parent().hide();

                    // Initialize the ziptastic and bind to the change of zip code
                    elements.zip.ziptastic()
                        .on('zipChange', function(evt, country, state, city, zip) {
                            elements.country.val(country).parent().show(duration);
                            elements.state.val(state).parent().show(duration);
                            elements.city.val(city).parent().show(duration);
                        });
                });
            }(jQuery));
        </script>
    </body>
</html> 
```

**至于jquery：**

```
(function( $ ) {
    var requests = {};
    var zipValid = {
        us: /[0-9]{5}(-[0-9]{4})?/
    };

    $.ziptastic = function(zip, callback){
        // Only make unique requests
        if(!requests[zip]) {
            requests[zip] = $.getJSON('http://zip.elevenbasetwo.com/v2/US/' + zip);
        }

        // Bind to the finished request
        requests[zip].done(function(data) {
            callback(data.country, data.state, data.city, zip);
        });

        // Allow for binding to the deferred object
        return requests[zip];
    };

    $.fn.ziptastic = function( options ) {
        return this.each(function() {
            var ele = $(this);

            ele.on('keyup', function() {
                var zip = ele.val();

                // TODO Non-US zip codes?
                if(zipValid.us.test(zip)) {
                    $.ziptastic(zip, function(country, state, city) {
                        // Trigger the updated information
                        ele.trigger('zipChange', [country, state, city, zip]);
                    })
                }
            });
        });
    };
})( jQuery ); 
```

为什么 IE 无法处理这个问题？在 Safari、Chrome、Firefox 上运行良好？任何帮助是极大的赞赏..

# cloud - 哪个开源云管理平台支持 Amazon-RDS？

> ID：15686804
> 
> 赞同：3
> 
> 时间：2013-03-28T16:11:19.820
> 
> 标签：cloud, amazon-rds, eucalyptus, rightscale, opennebula

我一直在尝试使用 Amazon Web 服务，特别是 EC2 和[RDS](http://aws.amazon.com/rds/)。现在大多数 CMP（云管理平台），如[Eucalyptus](http://www.eucalyptus.com/aws-compatibility)、[OpenNebula](http://opennebula.org/documentation%3aarchives%3arel2.0%3aec2qec)、[OpenStack](http://docs.openstack.org/developer/nova/devref/api.html)、[Nimbus](http://www.nimbusproject.org/docs/2.10.1/elclients.html)和[CloudStack](http://cloudstack.apache.org/docs/api/index.html)都在一定程度上支持 Ec2，有些做得比其他更好。

但是当谈到亚马逊的 RDS 服务时，我似乎找不到任何信息。好像没有 CMP 支持它。[在我的研究中，我遇到了一个网站，该网站建议使用HybridFox](http://code.google.com/p/hybridfox/)、[RightScale](http://www.rightscale.com/) [enStratus](http://www.enstratius.com/)等第三方软件来获得类似 RDS 的支持，但我不明白。

谁能告诉我 Eucalyptus、OpenNebula、OpenStack、Nimbus 和 CloudStack 是否支持 RDS？

如果没有，那么我如何使用第三方软件使用前面提到的 CMP 访问 Amazon 的 RDS 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:31:49.130

RDS 是亚马逊的专有技术。OpenStack 中等效的数据库即服务是项目 Red Dwarf - [https://wiki.openstack.org/wiki/Reddwarf](https://wiki.openstack.org/wiki/Reddwarf) ，它在 Rackspace（用于 MySQL）中作为云数据库实现

# c# - 将函数的返回值赋给 mssql 查询的列

> ID：15686805
> 
> 赞同：0
> 
> 时间：2013-03-28T16:11:20.093
> 
> 标签：c#, asp.net, sql, sql-server-2008, sql-server-2012

如果有人知道我会非常感谢帮助我如何将函数的返回值分配为可以打印在屏幕上的字段，这是我的代码和更好的解释：

```
 SqlCommand myCommand = new SqlCommand("SELECT latitude,longitude,name FROM otherLocations WHERE dbo.DistanceInKm(" +myx + "," + myy + "," + "latitude" + "," + "longitude" + ") < 5", connection);
        SqlDataReader myReader = null;
        myReader = myCommand.ExecuteReader();
        while (myReader.Read())
        {
            Response.Write(myReader["latitude"].ToString() + "<br>");
            Response.Write(myReader["longitude"].ToString() + "<br>");
            Response.Write(myReader["name"].ToString() + "<br>");
        } 
```

我想将 dbo.DistanceInKm 返回值分配给某个字段，以便我可以通过调用在页面上显示它`Response.Write(myReader["thatfield"].ToString() + "<br>");` 所以我想做的是为表中的每一行添加使用 distanceinkm 函数定义的字段，以便我可以在页面上打印它或按它排序结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:14:39.060

`AS`使用子句将该函数添加到您的选择列表中：

```
string query = @"SELECT latitude, longitude, name, 
     dbo.DistanceInKm(" +myx + "," + myy + "," + "latitude" + "," + "longitude" + @") < 5 
     as distance"; 
```

然后，您可以像任何其他列一样从 reader 获取值：

```
string distance = myReader["distance"].ToString(); 
```

# gwt - GIN 将@Singleton 注入到小部件字段中

> ID：15686808
> 
> 赞同：0
> 
> 时间：2013-03-28T16:11:29.220
> 
> 标签：gwt, dependency-injection, gwt-gin

我已经阅读了大量的 stackoverflow 和其他资源试图找到答案，也许我只是不明白。

我正在尝试将 GIN @Singleton 注入到我的应用程序客户端代码中的几个小部件和类中。使用 Spring，我可以简单地使用正确的注释，并且几乎可以在任何地方注入任何东西。使用 GWT 和 GIN，除了构造函数之外，我似乎无法注入任何地方。我不想注入构造函数，因为我正在处理一个非常大的项目，这几乎是不可能的。

其中一些类是小部件，而另一些则不是。它们在整个应用程序中使用，有些是注入的，有些是由 new 实例化的，还有一些两者都有，这使得更改构造函数更加困难。

我希望代码像这样工作，但不明白它是如何与 GIN 一起工作的：

```
@Singleton
public class ApplicationData {

   public AppInfo getAppInfo() {
      return new AppInfo("My App Info");
   }
}

public class MyClass{
   @Inject protected ApplicationData applicationData;

   public void someMethod() {
      doSomething(applicationData.getAppInfo());
   }
} 
```

其他人对此进行了编码以在 Presenter 中工作，我有点理解它为什么起作用，但我并不完全掌握这些概念。他们不再四处询问。

这是我拥有的一个hack，它可以工作，但我只是不喜欢它：

```
@GinModules(GinModule.class)
public interface Injector extends Ginjector {
   final Injector INSTANCE = GWT.create(Injector.class);

   ApplicationData getApplicationData();
}

public class MyWidget extends Composite implements TakesValue<Integer>{

   public static interface MyWidgetUiBinder extends UiBinder<FormPanel, MyWidget>}

   private MyWidgetUiBinder uiBinder = GWT.create(MyWidgetUiBinder.class);
   private ApplicationData appData;

   public ArrivalTimeWidget() {
      appData = Injector.INSTANCE.getApplicationData();
      initWidget(uiBinder.createAndBindUi(this));
      someMethod(appData.getAppInfo());
   }
} 
```

请帮助我正确地做到这一点，而不是使用黑客。请把我当成傻子一样对待，并给出充分的解释，因为说到这一点，我很傻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T17:37:30.017

答案是，正如@Thomas Broyer 所说，我只能从自己被注入的对象中注入。我正在创建“新”对象而不是注入它们。

# mysql - 将 MySQL 字段重置为默认值

> ID：15686810
> 
> 赞同：16
> 
> 时间：2013-03-28T16:11:37.900
> 
> 标签：mysql, database

MySQL中是否有将字段重置为其默认值的命令？你知道，为了支持“不要重复自己”规则，我不想在代码中多次编写（相当长的）默认值，只在数据库中编写一次。

我在谷歌上看了很长时间，一无所获。我开始怀疑这样的命令不存在，但是，如果存在，sy here 会知道的。:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-28T16:23:12.507

MySQL 有一个`DEFAULT` [关键字](http://dev.mysql.com/doc/refman/5.1/en/update.html)（和[function](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_default)）可以完全满足您的要求。

```
UPDATE table SET col = DEFAULT WHERE id = 2 
```

或者

```
UPDATE table SET col = DEFAULT(col2) WHERE id = 3 
```

# python - 简单的 python curses-application 在运行时使用 100% CPU。这是正常的吗？

> ID：15686811
> 
> 赞同：1
> 
> 时间：2013-03-28T16:11:45.703
> 
> 标签：python, load, curses, python-curses

我正在构建这个简单的应用程序，我注意到当 curses 运行时，“top”中的 CPU 负载是 100% .. 这似乎很糟糕。谁能解释一下？

```
def Run(self, stdscr):

    self.screen = stdscr

    curs_set(0)
    self.screen.nodelay(1)
    self.y_max = self.screen.getmaxyx()[0]
    self.x_max = self.screen.getmaxyx()[1] 

    for e in self.Inv:
        self.Create_Win(self.Inv.index(e), e)

    self.test_win = self.screen.derwin(1, self.x_max, 10, 0)
    self.test_win.addstr(self.TargetDict["Target_1"]["Obj"].Name)

    running = True
    while running:
        self.screen.refresh()
        q = self.screen.getch()

        #Press q to exit program
        if q == ord("q"):
            running = False 
```

## ![在此处输入图像描述](../Images/af0cf83d7f495db35b916d593aac6067.png)

![在此处输入图像描述](../Images/91232bef8ae03e29e7137ea4e30f4cd6.png)

这是程序在运行时的样子。一旦我用“q”终止程序，它就会恢复正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:16:13.260

问题是调用`getch`没有阻塞，所以程序不断地循环`while`循环。从[`getch`文档](http://docs.python.org/2/library/curses.html)中：

> 得到一个字符。请注意，返回的整数不必在 ASCII 范围内：功能键、键盘键等返回大于 256 的数字。在无延迟模式下，如果没有输入，则返回 -1，否则 getch() 等待直到一个键被按下。

您的程序`nodelay`在循环之前设置：

```
self.screen.nodelay(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-03T09:40:05.363

在需要 nodelay(True) 的地方，使用内置的睡眠功能

```
curses.napms(10) 
```

在 while 循环结束时，以限制您的 FPS。数字以毫秒为单位，因此例如 10ms 应该以 100FPS 刷新循环。

在我的练习游戏中，这个解决方案将 CPU 使用率降低到几乎 0%，而对响应速度没有明显影响。

# c++ - C++ std::string 与缩写比较

> ID：15686812
> 
> 赞同：-2
> 
> 时间：2013-03-28T16:11:48.383
> 
> 标签：c++

假设我从*std::cin中读取了 C++ std::string,* *mystring* ，因此：

 *```
std::cin  >>  mystring; 
```

现在我想看看*mystring*是否是至少*len*个字符匹配的*std::masterStr*的任何子字符串。

 *在 Rexx 中说

```
abbrev( mystring, masterStr, len ). 
```

如何在 C++ 中对其进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:22:59.893

像下面这样的东西可以解决问题吗：

```
bool
isAbbrev( std::string const& toTest, std::string const& master, int minLength )
{
    return toTest.size() >= minLength
        && toTest.size() <= master.size()
        && std::equal( toTest.begin(), toTest.end(), master.begin() ) ;
} 
```

这会在开始时找到匹配项，就像 Rexx 中的函数一样。如果您想在任何地方找到匹配项：

```
bool
isAbbrev( std::string const& toTest, std::string const& master, int minLength )
{
    return toTest.size() >= minLength
        && std::search( master.begin(), master.end(),
                        toTest.begin(), toTest.end() )
                != master.end();
} 
```

应该做的伎俩。**

# java - 按钮大小（Java）

> ID：15686814
> 
> 赞同：6
> 
> 时间：2013-03-28T16:12:00.830
> 
> 标签：java, swing, jbutton, layout-manager, preferredsize

我在 Java 中创建了一个简单的菜单，但我不知道如何更改按钮的大小。我的菜单如下所示： ![当前外观](../Images/0336865fd252337e39095ead8ccf99b5.png)

我希望最后一个按钮与其他按钮具有相同的大小。

```
tlacTisk.setSize(10,10);
tlacTisk.setPreferredSize(10,10); 
```

不起作用。

代码，我在其中创建了按钮和框：

```
JButton tlacSVG = new JButton();
        tlacSVG.setText("Export do SVG");
        tlacSVG.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                exportujSVG();
            }
        });

        JButton tlacPNG = new JButton();
        tlacPNG.setText("Export do PNG");
        tlacPNG.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                exportujPNG();
            }
        });

        JButton tlacTisk = new JButton();
        tlacTisk.setText("Tisk...");
        tlacTisk.setPreferredSize(new Dimension(50, 25));
        tlacTisk.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                tiskni();
            }
        });

        Box boxTlacitek = Box.createVerticalBox();
        boxTlacitek.add(Box.createVerticalStrut(5));
        boxTlacitek.add(tlacSVG);
        boxTlacitek.add(Box.createVerticalStrut(10));
        boxTlacitek.add(tlacPNG);
        boxTlacitek.add(Box.createVerticalStrut(10));
        boxTlacitek.add(tlacTisk);
        boxTlacitek.setBorder(BorderFactory.createTitledBorder("Menu"));

        okno.add(boxTlacitek, BorderLayout.EAST); 
```

你能告诉我如何改变尺寸吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T16:20:56.367

不同的布局管理器以不同的方式对待首选尺寸。此外，设置大小`setSize()`不是一个好主意。让布局管理器为您做布局。有关更多详细信息和示例，请参阅[布局管理器视觉指南。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

例如，您可以创建一个单独的面板来保存按钮。将其布局设置为`GridLayout`. 在此布局中，组件占用了其单元格内的所有可用空间，并且每个单元格的大小完全相同。将此面板添加到容器中。有关示例，请参见[如何使用 GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)。

下面是一个简单的`GridLayout`and演示`GridBagLayout`：

![在此处输入图像描述](../Images/7aa577cc1dc604917ec55add03792a3e.png)

```
import java.awt.*;
import javax.swing.*;

public class DemoButtons {
    public DemoButtons() {
        final JFrame frame = new JFrame("Demo buttons");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel buttonPanel = new JPanel(new GridLayout(3, 1));
        buttonPanel.add(new JButton("Export do SVG"));
        buttonPanel.add(new JButton("Export do PNG"));
        buttonPanel.add(new JButton("Tisk..."));

        JPanel east = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.NORTH;
        gbc.weighty = 1;
        east.add(buttonPanel, gbc);

        JPanel center = new JPanel(){
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(200, 200);
            }
        };
        center.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        frame.add(east, BorderLayout.EAST);
        frame.add(center);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DemoButtons();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:24:40.367

您不应该尝试直接控制按钮（或组件）的大小，请使用容器的布局管理器配置（在您的情况下为菜单面板）来这样做。

为此，请查看不同的 Swing Layout Managers： [Swing Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

我个人更喜欢 JGoodies 表单 API，我发现它对用户来说更简单，并且随着时间的推移易于维护： [JGoodies Forms API](http://www.jgoodies.com/freeware/libraries/forms/)

问候

# visual-c++ - 监控剪贴板数据

> ID：15686815
> 
> 赞同：0
> 
> 时间：2013-03-28T16:12:07.283
> 
> 标签：visual-c++, service, visual-studio-2012, clipboard

我想编写基于中断的控制台应用程序或 Windows 服务来监视剪贴板中的更改数据。因此它会侦听剪贴板数据更改事件。我已经尝试过使用基于轮询的方法，但效率不高。那么有没有办法实现这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:02:59.543

我有几篇关于这方面的文章，包括要避免的常见陷阱。
[http://www.clipboardextender.com/developing-clipboard-aware-programs-for-windows](http://www.clipboardextender.com/developing-clipboard-aware-programs-for-windows)

# cryptography - 从 OpenSSL 命令行生成 EC 密钥对

> ID：15686821
> 
> 赞同：11
> 
> 时间：2013-03-28T16:12:32.247
> 
> 标签：cryptography, openssl

我希望能够在命令行中使用 openssl 生成密钥对私钥和公钥，但我不知道该怎么做。到目前为止我所做的是执行以下命令行，但这只会打印我不知道它到底是什么的这个：s

FROM OPENSSL PAGE：使用显式参数创建 EC 参数：

```
openssl ecparam -out ec_param.pem -name prime192v1 -param_enc explicit

-----BEGIN EC PARAMETERS-----
MIHHAgEBMCQGByqGSM49AQECGQD////////////////////+//////////8wSwQY
/////////////////////v/////////8BBhkIQUZ5ZyA5w+n6atyJDBJ/rje7MFG
ubEDFQAwRa5vyEIvZO1XlSjTgSDq4SGW1QQxBBiNqA6wMJD2fL8g60OhiAD0/wr9
gv8QEgcZK5X/yNp4YxAR7WskzdVz+XehHnlIEQIZAP///////////////5ne+DYU
a8mxtNIoMQIBAQ==
-----END EC PARAMETERS----- 
```

有人可以告诉我如何得到这样的东西：

```
//-----------------Generated Key Pair----------------------------------//
char privkey[]=
    "-----BEGIN EC PARAMETERS-----\n"
    "BgUrgQQACQ==\n"
    "-----END EC PARAMETERS-----\n"
    "-----BEGIN EC PRIVATE KEY-----\n"
    "MFACAQEEFI9sfpfTk0YlZx8JaCZnLsy4T6HYoAcGBSuBBAAJoSwDKgAEIlzYflxD\n"
    "0396M0i6dGfSY3khTU7kiNyEv/B1EoyGmqvH7tjhSmpP1A==\n"
    "-----END EC PRIVATE KEY-----\n";
char pubkey[] =
    "-----BEGIN PUBLIC KEY-----\n"
    "MD4wEAYHKoZIzj0CAQYFK4EEAAkDKgAEIlzYflxD0396M0i6dGfSY3khTU7kiNyE\n"
    "v/B1EoyGmqvH7tjhSmpP1A==\n"
    "-----END PUBLIC KEY-----\n";
//---------------------------------------------------------------------// 
```

我从我上网的代码中得到这个，它使用这个密钥对与 ECDSA 签署消息，但现在我希望能够生成我自己的密钥对（从 openssl 命令行）并在这样的代码中使用它，到为我的更改此密钥对。

就我而言，我想使用“prime256v1”的 NIST P225。

有人能帮我吗？

谢谢，最好的问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-07-04T18:16:42.577

**私钥**

假设一个 UX 平台，例如 OS X 或 Linux。测试时也省略 $。生成私有 ECDSA 密钥：

```
 $ openssl ecparam -name prime256v1 -genkey -noout -out private.ec.key 
```

使用密码短语转换和加密私钥：

```
 $ openssl pkcs8 -topk8 -in private.ec.key -out private.pem 
```

`private.ec.key`只要您记住密码短语，您现在就可以安全地删除。

**公钥**

生成公共 ECDSA 密钥：

```
 $ openssl ec -in private.pem -pubout -out public.pem 
```

**测试**

制作一个小文本文件进行测试：

```
 $ touch msg.txt | echo "hello world" > msg.txt 
```

做一个哈希摘要：

```
 $ openssl dgst -sha256 -out msg.digest.txt msg.txt 
```

从摘要中制作一个签名文件：

```
 $ openssl dgst -sha256 -sign private.pem -out msg.signature.txt msg.digest.txt 
```

验证签名：

```
 $ openssl dgst -sha256 -verify public.pem -signature msg.signature.txt msg.digest.txt 
```

此外，您可能希望在邮寄之前将签名编码为 base64，然后在收到签名之前将其解码到 bin 中。

这是你如何做到的：

编码：

```
 $ openssl base64 -in msg.signature.txt -out msg.base64.sig.txt 
```

解码：

```
 $ openssl base64 -d -in msg.base64.sig.txt -out msg.signature.txt 
```

# java - 通过 URL 导入图像并在面板上添加时出错

> ID：15686831
> 
> 赞同：0
> 
> 时间：2013-03-28T16:13:01.010
> 
> 标签：java, swing, url, jlabel, imageicon

```
public class Interface 
{ 

    private static JMenuItem mntmNewMenuItem;
final JPanel panel = new JPanel();
private JTable table;

 public Interface()
 {

   JFrame f= new JFrame("Content Provider Generator");
   f.setFont(new Font("Aharoni", Font.BOLD, 12));
   f.setForeground(Color.GRAY);
   f.getContentPane().setBackground(Color.WHITE);

   //JToolbar//

   JToolBar toolBar = new JToolBar();
      f.getContentPane().add(toolBar, BorderLayout.EAST);

  //MenuButton//

      JButton button = new JButton();
      button.setIcon(new ImageIcon
        (Interface.class.getResource("/javax/swing/plaf/metal/icons/ocean/menu.gif")));
      toolBar.add(button);   //added to JToolbar

      JPopupMenu popupMenu = new JPopupMenu();
      addPopup(button, popupMenu);

      //popupmenu
      mntmNewMenuItem = new JMenuItem("Table"); 
```

******** //当弹出菜单（表格）被点击// ***** ** *** ** *** ** *** ** *** ** *** ** *** *****

 **```
 mntmNewMenuItem.addActionListener(new ActionListener() {
            //This method will be called whenever you click the button.
            public void actionPerformed(ActionEvent e) {
              JLabel label = new JLabel();
            try {
label.setIcon(new ImageIcon(new URL
                     ("file:/C:/Users/Ashad/JunoWorkspace/FYP1/table.png")));
            } catch (MalformedURLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }   

                panel.add(label); 

            }
        }); 
```

****** *** ** *** ** *** ** *** ** *** ******//******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *********

 *****```
 popupMenu.add(mntmNewMenuItem);

       //Image Import on click to panel

       mntmNewMenuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, 
                                                              InputEvent.CTRL_MASK));
       mntmNewMenuItem.setIcon(newImageIcon(Interface.class.getResource
            ("/javax/swing/plaf/metal/icons/ocean/menu.gif")));

      //////////////////MenuBar/////////////////////////   
      JMenuBar menuBar = new JMenuBar();
      f.getContentPane().add(menuBar, BorderLayout.NORTH);

      //Menus added/initialized in MENUBAR//

      JMenu mnNewMenu = new JMenu("File");
      menuBar.add(mnNewMenu);

      JMenuItem mntmNew = new JMenuItem("New");  //mntmNew
      mntmNew.setIcon(new   ImageIcon(Interface.class.getResource
                              ("/javax/swing/plaf/metal/icons/ocean/file.gif")));
          mnNewMenu.add(mntmNew);

      JMenuItem mntmSaveAs = new JMenuItem("Save As...");
      mntmSaveAs.setIcon(new ImageIcon(Interface.class.getResource
                               ("/javax/swing/plaf/metal/icons/ocean/floppy.gif")));
      mnNewMenu.add(mntmSaveAs);

      JMenuItem mntmSave = new JMenuItem("Save");
      mntmSave.setIcon(new ImageIcon
      (Interface.class.getResource("/javax/swing/plaf/metal/icons/ocean/floppy.gif")));
      mnNewMenu.add(mntmSave);

      //M_Exit
      JMenuItem mntmExit = new JMenuItem("Exit");

      //When exit of the menuBar  is clicked//
      mntmExit.addActionListener(new ActionListener() 
      {
        public void actionPerformed(ActionEvent e) {System.exit(0);}
      });

      mnNewMenu.add(mntmExit);

      JMenu mnEdit = new JMenu("Edit");
      menuBar.add(mnEdit);

      JMenuItem mntmUndo = new JMenuItem("Undo");
      mnEdit.add(mntmUndo);

      JMenuItem mntmRedo = new JMenuItem("Redo");
      mnEdit.add(mntmRedo);

      JMenuItem mntmCut = new JMenuItem("Cut");
      mnEdit.add(mntmCut);

      JMenuItem mntmCopy = new JMenuItem("Copy");
      mnEdit.add(mntmCopy);

      JMenuItem mntmDelete = new JMenuItem("Delete");
      mnEdit.add(mntmDelete);

      JMenu mnSearch = new JMenu("Search");
      menuBar.add(mnSearch);

      JMenuItem mntmSearch = new JMenuItem("Search");
      mnSearch.add(mntmSearch);

      JMenuItem mntmFile = new JMenuItem("File");
      mnSearch.add(mntmFile);

      JMenuItem mntmJava = new JMenuItem("Java");
      mnSearch.add(mntmJava);

      JMenu mnHelp = new JMenu("Help");
      mnHelp.setFont(UIManager.getFont("OptionPane.messageFont"));
      menuBar.add(mnHelp);

      JMenuItem mntmWelcome = new JMenuItem("Welcome");
      mnHelp.add(mntmWelcome);

      JMenuItem mntmHelpContents = new JMenuItem("Help Contents");
      mnHelp.add(mntmHelpContents);

      //Panel (Drawing board)//  panel
      panel.setBackground(Color.WHITE);

      f.getContentPane().add(panel, BorderLayout.CENTER);

      Label label = new Label();
      label.setForeground(Color.WHITE);
      panel.add(label);

      table = new JTable();

      table.setFillsViewportHeight(true);
      table.setVisible(false);
      table.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
      table.setAutoscrolls(false);
      table.setAlignmentY(2.0f);
      panel.add(table);
      table.setModel(new DefaultTableModel(
        new Object[][] {
            {null},
            {null},
            {null},
            {null},
        },
        new String[] {
            "Table"
        }
      ));
      table.getColumnModel().getColumn(0).setResizable(false);
      table.getColumnModel().getColumn(0).setPreferredWidth(145);
      f.setVisible(true);   //set visible  
      f.setSize(600,400);    //set size
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
      f.setLocationRelativeTo(null);

 }

 public void addtoPanel(Component c)
 {
   panel.add(c);
 }

 public static void main(String[] args)

{
    new Interface();

}

private static void addPopup(Component component, final JPopupMenu popup) {
    component.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            if (e.isPopupTrigger()) {
                showMenu(e);
            }
        }
        public void mouseReleased(MouseEvent e) {
            if (e.isPopupTrigger()) {
                showMenu(e);
            }
        }
        private void showMenu(MouseEvent e) {
            popup.show(e.getComponent(), e.getX(), e.getY());
        }
    });
}

} 
```

看看星星之间的代码部分！那部分工作不正常。因为它没有在点击时将任何图像添加到面板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:41:48.603

如果我对问题的解释是正确的，您可以使用该`ImageIcon`接受的构造函数`URL`，即：

```
label.setIcon(new ImageIcon(new URL(
        "http://duke.kenai.com/iconSized/duke.gif"))); 
```

另请注意，在向容器添加控件后，需要重新验证容器，即调用`validate();`and `repaint();`。

***编辑：***

对于本地文件，有一个带有文件名的构造函数，即：

```
label.setIcon(new ImageIcon("C:/Users/User/Desktop/1.png")); 
```

如果需要，您还可以使用 URL：

```
File file = new File("C:/Users/User/Desktop/1.png");
label.setIcon(new ImageIcon(file.toURI().toURL())); 
```

您也可以使用反斜杠，只是将它们转义，即：`C:\\Users\\User\\Desktop\\1.png`。

另一种创建本地文件 URL 的方法：

```
label.setIcon(new ImageIcon(new URL("file:/C:/Users/User/Desktop/1.png"))); 
```

***编辑***

试试这个简单的例子来显示你的图像：

```
import java.awt.Image;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

public class DisplayImage {
    public static void main(String[] args) {
        Image image;
        try {
            image = ImageIO.read(new File("C:/Users/User/Desktop/1.png"));
            JOptionPane.showMessageDialog(null, new ImageIcon(image));
        } catch (IOException e) {
            JOptionPane.showMessageDialog(null, "Failed to load image");
        }
    }
} 
```*******

# bash - 带有文件输入的bash for循环不起作用

> ID：15686835
> 
> 赞同：2
> 
> 时间：2013-03-28T16:13:06.103
> 
> 标签：bash, file-io, for-loop

我正在制作一个从文件中获取输入的循环，以确定是否允许用户使用特定程序。

```
#!/bin/bash

boole=false

echo "Username: "
read username

echo "debug0"

for((line=1; $boole=false; line++)); do
    echo "debug.5"
    auth=`head -n $line users | tail -n $line`

    echo "debug1"

    if [ $username = $auth ]; then
        echo "debug2"
        echo "authentication success"
        read
        exit 0
    fi

    if [ $auth = "#end" ]; then
        echo "debug3"
        echo "authentication failed"
        read
        exit 0
    fi
done

echo "skip everything" 
```

输出是

```
Username:
admin
debug0
skip everything 
```

与用户的文件有

```
root
admin
...
#end 
```

`#end`并且`boole`应该告诉循环结束

这只是调试阶段，所以它实际上并没有执行任何程序，它只是应该告诉我是否允许用户使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T19:16:45.670

bash 中的循环与 C 循环不同。基本语法是：

```
for arg in [list]
do 
    [command(s)...]
done 
```

但是，有一种 C 风格的语法，就像您正在使用的那样：

```
for ((x=1; x<=3; x++))
{
    echo $x
} 
```

如评论中所述，当您在双括号内写入时，`$boole=false`在处理双括号的内容*之前*`$boole`被取消引用，因此变为. 此外，当您将某些内容括在双括号中时，您应该使用它进行比较。在任何情况下，无论是还是，它们都为真，因为第一个成功分配给，而第二个为真，因为 a为真。*`false=false``==``$boole=false``$boole==false``false``false``false==false`*

 *无论如何，在你的情况下，我可能会使用一个 while 循环。这是一个例子：

```
bool=true
int=1
while $bool; do
    echo $int
    (( int++ ))
    if [[ $int == 10 ]]; then
        bool=false
    fi
done
echo $int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T19:23:42.963

读取文件时使用 while 循环，而不是 for 循环。这记录在[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)

```
while read -r line; do
  something_with "$line"
done 
```

在这种情况下，您可以使用关联数组来存储授权用户列表：

```
declare -A authorized_users=()
while read -r username; do
  authorized_users[$username]=1
done <input_file 
```

...然后您可以检查用户是否在该列表中，如下所示：

```
if [[ ${authorized_users[$possible_username]} ]]; then
  echo "User is authorized!"
fi 
```

请注意，在 bash 4 中添加了关联数组语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T19:36:17.417

我已尝试为您清除它..您可能希望查看一些逻辑，因为如果它有任何其他用户，它只会返回最后一个跳过所有内容..无论如何..

有一些问题要问，因为如果您正在循环输入，那么在您正在退出的 for 循环中，它会结束输入，不确定您正在尝试实现什么，因为它代表 for 循环的唯一用途是用户输入用户作为空格分隔列表的第一个输出 - 它的设计目的不是继续向用户返回提示...

所以我更新了脚本以循环并询问用户输入是否匹配失败列表：

（很抱歉，如果现在与您想要的相差甚远 - 我认为它可能更像您想要的？）

```
#!/bin/bash

echo "debug0"
i=0;

#Maybe you want something to measure bad input
# right now only if user puts in #end 3 times will this pass
# so again look at the logics if needed add the attempts++ to skip everything..
max_attempts=3;

# current running attempts set as 0;
attempts=0;

#start function repeats for user input
function start() { 
     echo "Username: "
     read input
     # run process input function
     process_input
}

# The process input function works out what user has put in
function process_input()  { 
   # Go through for loop of users command
    loggedin=$(users);
   for auth in ${loggedin[@]}; do
       echo "debug.5"
       echo "debug1"
       # if current value from users output matches the user input
       if [[ $auth == $input ]]; then
        echo "debug2"
        echo "authentication success"
        #unsure what you are reading here since your not asking for a prompt
        read;
        exit 0;
        # either if input matches #end or anything after 3 attempts that 
        # does not match admin
        elif [[ $auth == "#end" ]] || [[ $attempts -gt $max_attempts ]]; then

        echo "debug3"
         echo "authentication failed - failed attempts $attempts "
        ((attempts++))

        start;
      fi
done

echo "skip everything"
# removed comment from start function below if you want to get user to re-enter 
start;

}

# begin your program by running the start function
start; 
```*

# libreoffice - Libreoffice：通过 FIND()、LOOKUP() 或 EXACT() 引用另一个工作表中的单元格？

> ID：15686836
> 
> 赞同：2
> 
> 时间：2013-03-28T16:13:08.447
> 
> 标签：libreoffice, calc, libreoffice-basic

我正在尝试学习 LibreOffice 的脚本功能，并且有一个我无法弄清楚的特定场景。

我要做的是通过在相邻单元格中搜索特定值来从另一个工作表中获取值。

例如，假设我有两个工作表：

工作表1

![工作表1](../Images/fa24487048219efa9ad7a4f2e68e8934.png)

和工作表2

![在此处输入图像描述](../Images/997c86029e4f33784b8beb9273ea4602.png)

我想要做的是用来自 Worksheet2 的 B 列的相关值填充 Worksheet1 的每个值，B 列。我尝试这样做的方法是编写一个语句，在 Worksheet1 中查找并使用月份作为针对 Worksheet2，C 列的搜索条件。

到目前为止，我的运气并不好，但这是我一直在尝试的：

```
='Worksheet2'.$C.FIND('Worksheet1'.$A1).$B1 
```

这很可能是错误的，但我试图表达逻辑，即“在 Worksheet2 中，从 Worksheet1 中找到值：$A1，然后给我来自 Worksheet2:$B1 的值”

本质上归结为我还不了解这种语言的语法和范式。

关于如何完成我上面想做的事情有什么想法吗？

另外，我会对有关该语言的在线教程的任何链接感兴趣（LibreOffice Basic？）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T14:43:08.150

您可能想尝试一个名为[VLOOKUP的函数。](https://help.libreoffice.org/Calc/Spreadsheet_Functions#VLOOKUP)

您的示例的语法是：

```
=VLOOKUP(A1,'Worksheet2'.B1:C12,1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T21:37:58.807

我只是根据你的问题调整我的例行程序。它应该可以工作......假设两张纸都没有空行：

```
Sub MergeSheets

Dim Ind as Integer
Dim oSheet1, oSheet2
Dim oDocument as Object

  oDocument = thisComponent

  ' Destination Sheet
  dSheet = oDocument.getSheets().getByName("Worksheet1")

  ' Origin Sheet
  oSheet = oDocument.getSheets().getByName("Worksheet2")

  oCount = 0
  oCell = oSheet.getCellByPosition(0,oCount)
  while oCell.Formula <> ""

    ' Search for the matching line
    dCount = 0 
    dCell = dSheet.getCellByPosition(2,0)
    while dCell.Formula <> "" and dCell.Formula <> oCell.Formula
       dCount = dCount + 1
       dCell = dSheet.getCellByPosition(2,dCount)
    wend

    ' Set Value to the destination cell
    ' If Key was not found, the last empty line will be used
    fCell = dSheet.getCellByPosition(1,dCount)
    if fCell.Formula = ""
       fCell.Formula = "="+oSheet.getCellByPosition(1,dCount).Formula
    else
       fCell.Formula = fCell.Formula+'+'+oSheet.getCellByPosition(1,dCount).Formula
    end if

    oCount = oCount + 1
    oCell = oSheet.getCellByPosition(0,oCount)

  wend

End Sub 
```

# android - 在 Android 上使用 Neo4j 的问题

> ID：15686843
> 
> 赞同：0
> 
> 时间：2013-03-28T16:13:15.883
> 
> 标签：android, eclipse, neo4j

在尝试将本地运行的 Neo4j 服务器连接到我的 android 设备时，我遇到了几个问题。我当前的设置包括将 neo4j .jars 添加到我的 android 项目构建路径中，但是当我在设备上调试时，我得到一个“找不到类 'org.neo4j.graphdb.factory.GraphDatabaseFactory”

我假设 neo4j .jars 文件没有通过设备传输。我还尝试将 Neo4j 作为 maven 依赖项添加，但出现 Dalvik 错误，可以帮助我创建一个使用 Neo4j 的 android 应用程序。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:16:34.827

我只会使用 Android 的[REST APi](http://docs.neo4j.org/chunked/milestone/rest-api.html)，最好是[cypher endpoint](http://docs.neo4j.org/chunked/milestone/rest-api-cypher.html)。

您可以为此使用任何类型的 REST 库，Restlet、RestEasy、Jersey 甚至是普通的 HttpConnection。

# java - jfreechart条形图输出

> ID：15686844
> 
> 赞同：0
> 
> 时间：2013-03-28T16:13:17.490
> 
> 标签：java, charts, jfreechart, series

我需要创建一个从数据库中列出访问记录的表中读取的条形图。

该表应显示访问它的供应商（X 轴）、代表谁访问它（每个条形图）以及访问次数（Y 轴）

每个供应商可以代表多个市政当局访问，但每个市政当局只有一个供应商。因此，每个供应商可能会显示多个条形图……但是，图表中的每个条形图都是唯一的，并且按供应商分组。

在 jfreechart 示例中，我看到 x 轴上的每个类别在哪里使用重复系列，但是在每个条形图都是唯一的地方，你如何做我需要的？

这是相关的servlet代码：

```
 //Municipality, Vendor                                                    //for month of January                           //Vendor  //Municipality                                                 
        if (stmt.execute("Select COUNT(accessFor), accessBy, accessFor FROM bps_bam.access WHERE DATE_FORMAT(accessTime, '%Y %M') = '2012 January' GROUP BY accessBy, accessFor;")) {
            rs = stmt.getResultSet();
        } else {
            System.err.println("select failed");
        }

        DefaultCategoryDataset dataset = new DefaultCategoryDataset(); //Set of values for Bar Graph

        while(rs.next())
        {                    //count           //municipality          //vendor
            dataset.addValue(rs.getDouble(1), rs.getString(3), (String)rs.getString(2));
        }

        counter++;

        JFreeChart chart = ChartFactory.createBarChart(
                "January Access Times", // chart title
                "Vendor", // domain axis label
                "Value", // range axis label
                dataset, // data
                PlotOrientation.VERTICAL, // orientation
                false, // include legend
                false, // tooltips
                false // URLs?
                );

        CategoryPlot plot = (CategoryPlot) chart.getPlot();
        CategoryItemRenderer renderer = plot.getRenderer();
        CategoryItemLabelGenerator generator
            = new StandardCategoryItemLabelGenerator("{0}",
                    NumberFormat.getInstance());
        renderer.setBaseItemLabelGenerator(generator);
        renderer.setBaseItemLabelFont(new Font("SansSerif", Font.PLAIN, 12));
        renderer.setBaseItemLabelsVisible(true);
        renderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
                ItemLabelAnchor.OUTSIDE12, TextAnchor.BASELINE_CENTER));

        response.setContentType("image/png");
        //response.addHeader("Refresh", "5");

        //Write numbers on range axis just as integrals, not decimals
        NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
        rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits()); 

        ChartUtilities.writeChartAsPNG(out, chart, 800, 500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:58:47.950

这是你想要做的吗？

![在此处输入图像描述](../Images/71ffd1ea51a457180156306ac3c56ee4.png)

```
private static CategoryDataset createDataset() {

    // row keys...
    String series1 = "Municipality 1";
    String series2 = "Municipality 2";
    String series3 = "Municipality 3";

    // column keys...
    String category1 = "Vendor 1";
    String category2 = "Vendor 2";
    String category3 = "Vendor 3";
    String category4 = "Vendor 4";
    String category5 = "Vendor 5";

    // create the dataset...
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    dataset.addValue(1.0, series1, category1);
    dataset.addValue(4.0, series1, category2);
    dataset.addValue(3.0, series1, category3);
    dataset.addValue(5.0, series1, category4);
    dataset.addValue(5.0, series1, category5);

    dataset.addValue(5.0, series2, category1);
    dataset.addValue(6.0, series2, category3);
    dataset.addValue(8.0, series2, category4);
    dataset.addValue(4.0, series2, category5);

    dataset.addValue(4.0, series3, category1);
    dataset.addValue(3.0, series3, category2);
    dataset.addValue(3.0, series3, category4);
    dataset.addValue(6.0, series3, category5);

    return dataset;

} 
```

# wordpress - 将画廊文件夹重定向到另一个域中的画廊

> ID：15686846
> 
> 赞同：1
> 
> 时间：2013-03-28T16:13:22.917
> 
> 标签：wordpress, .htaccess, mod-rewrite

我有一个安装了 Nextgen 画廊的 wordpress 博客，我想将所有画廊图像请求重定向到另一个域。我已将所有图像从 site1 复制到 site2 文件夹。

`http://site1.com/wp-content/uploads/gallery/folder/*.jpg` 到 `http://site2.com/gallery/folder/*.jpg`

请帮助我处理 .htaccess 重定向规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:46:47.690

> 我有一个安装了 Nextgen 画廊的 wordpress 博客，我想将所有画廊图像请求重定向到另一个域。我已将所有图像从 site1 复制到 site2 文件夹。

您必须确保自定义规则不会与 WP 自己的规则集发生冲突。

假设它是根目录下的标准一对一 .htaccess 文件，请将其替换为以下文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# Add this line
RewriteCond %{REQUEST_URI} !wp-content/uploads/gallery/folder  [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

# Add this line
RewriteRule ^wp-content/uploads/gallery/folder/([^.]+)\.jpg   http://site2.com/gallery/folder/$1.jpg [R=301,L,NC]

</IfModule>
# END WordPress 
```

### 选项：

对于任何文件类型，将最后一条规则替换为以下规则：

```
# Add this line
RewriteRule ^wp-content/uploads/gallery/folder/([^.]+)\.([^/]+)/?   http://site2.com/gallery/folder/$1.$2 [R=301,L,NC] 
```

# java - slf4j 双线输出

> ID：15686847
> 
> 赞同：0
> 
> 时间：2013-03-28T16:13:23.027
> 
> 标签：java, slf4j

我已经开始使用 slf4j 和 thrift。我设法做的是打印单行日志，就像这样：

```
[main] INFO FinanceServiceHandler - BEGIN getUserOutcomes
[main] INFO FinanceServiceHandler - found 690 records
[main] INFO FinanceServiceHandler - returned 690 results
[main] INFO FinanceServiceHandler - END getUserOutcomes 
```

对应代码：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

    this.logger = LoggerFactory.getLogger("FinanceServiceHandler");
    logger.info("BEGIN getUserOutcomes");
    logger.info("found {} records", outcomes.size());
    logger.info("returned {} results", result.size());
    logger.info("END getUserOutcomes"); 
```

我正在尝试找到打印双行日志的方法，就像[这里](http://www.srccodes.com/p/article/5/Hello-World-Example-of-Simple-Logging-Facade-for-Java-or-SLF4J)描述的那样（*6.控制台输出*）：

[![slf4j 多行日志](../Images/dd3beb478308ae4bc1f0d88b2695d250.png)](https://i.stack.imgur.com/hKb1b.png)
[（来源：[srccodes.com](http://cdn.srccodes.com/c/072012/5/3.png)）]

此外，当我启动我的应用程序时，Hibernate 会以类似的双行日志开始：

```
mar 28, 2013 3:12:01 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
mar 28, 2013 3:12:01 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.10.Final}
mar 28, 2013 3:12:01 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
mar 28, 2013 3:12:01 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
mar 28, 2013 3:12:01 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
mar 28, 2013 3:12:01 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
mar 28, 2013 3:12:02 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null 
```

我该怎么做才能使 slf4j 打印带有日期时间信息的双行？

# ios - 使用 @max 谓词获取唯一的核心数据实体

> ID：15686851
> 
> 赞同：1
> 
> 时间：2013-03-28T16:13:38.080
> 
> 标签：ios, objective-c, core-data, ios6, nsfetchedresultscontroller

我有一个如下的核心数据结构：

```
+-------+-----+---------+
| uid   | id  | category
+-------+-----+---------+
| 12345 |  1  | 1
| 23456 |  1  | 1
| 34567 |  2  | 1
| 45678 |  2  | 2
| 56789 |  2  | 2
+-------+-----+---------+ 
```

是否可以查询数据，以便返回具有唯一 ID/类别组合的 NSManagedObjects（不是字典）？使用上面的示例表，我想要一个包含具有以下 uid 的对象的数组：23456（id-1 category-1 的最大 uid）、34567（id-2 category-1 的最大 uid）、56789（ id-2 category-2 的最大 uid）

使用原始 SQL，我可以执行以下操作：

```
SELECT MAX(uid), id, category FROM TABLE GROUP BY id, category 
```

是否可以将上述 SQL 转换为 NSFetchRequest？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:43:13.603

根据其他答案（例如 Martin R 指出的答案），我将其分为两部分。首先，使用带有 NSDictionaryResultType 的 fetch 请求来获取所有最大 uid：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entity" inManagedObjectContext:context];
[request setEntity:entity];

NSExpression *expr = [NSExpression expressionForKeyPath:@"uid"];
NSExpression *maxExpr = [NSExpression expressionForFunction:@"max:" arguments:@[expr]];
NSExpressionDescription *exprDesc = [[NSExpressionDescription alloc] init];
[exprDesc setExpression:maxExpr];
[exprDesc setName:@"uid"];

NSPropertyDescription *id = [[entity propertiesByName] objectForKey:@"id"];
NSPropertyDescription *cat = [[entity propertiesByName] objectForKey:@"category"];

[request setPropertiesToGroupBy:[NSArray arrayWithObjects:id, cat, nil]];
[request setPropertiesToFetch:[NSArray arrayWithObjects:exprDesc, nil]];
[request setResultType:NSDictionaryResultType];

NSArray *result = [context executeFetchRequest:request error:nil];
NSArray *maxUids = [result valueForKeyPath:@"uid"]; 
```

其次，使用 maxUids 数组使用以下谓词获取相应的 NSManagedObjects：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(uid IN %@)", maxUids]; 
```

使用两个获取请求不太理想，但提供了使用 SUBQUERY 和/或更改底层数据模型的替代方法。

# google-app-engine - GAE 的 GCM 的 API 密钥

> ID：15686853
> 
> 赞同：4
> 
> 时间：2013-03-28T16:13:43.183
> 
> 标签：google-app-engine, python-2.7, google-cloud-messaging

我已经使用自己的服务器实现了 GCM。现在我正在尝试在 Google App Engine 中使用 Python 2.7 来做同样的事情。如何获取托管我的应用程序的服务器的 IP 地址？（我需要它作为 API 密钥）。IP-LookUp 是唯一的选择吗？如果我这样做，IP 地址会保持不变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T20:01:15.850

您可以通过从命令行对域名执行 ping 操作来轻松检查 IP，如“ping appspot.com”。这样，您将获得来自真实 IP 的响应。不幸的是，这个 IP 会随着时间的推移而改变，并且不会使您的 GCM 服务正常工作。

为了使其工作，您只需将允许的 IP 字段留空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:06:21.170

我用我自己的服务器来解决这个问题。但更好的解决方案是使用[GCM4Public](http://gcm4public.appspot.com/)

# c# - 带有 2 个下拉菜单的过滤器列表

> ID：15686857
> 
> 赞同：0
> 
> 时间：2013-03-28T16:13:58.660
> 
> 标签：c#, linq, listview, filtering

我有 2 个下拉列表和一个列表视图：

```
<option value="Please choose...">Please choose...</option>
<option value="Permanent">Permanent</option>
<option value="Part Time">Part Time</option>
<option value="Volunteer">Volunteer</option>
<option value="Temporary">Temporary</option>

<option value="Please choose...">Please choose...</option>
<option value="South West">South West</option>
<option value="South East">South East</option>
<option value="London">London</option>
<option value="East of England">East of England</option>
<option value="West Midlands">West Midlands</option>
<option value="East Midlands">East Midlands</option>
<option value="North West">North West</option>
<option value="North East">North East</option>
<option value="Yorkshire &amp; Humberside">Yorkshire &amp; Humberside</option>
<option value="UK">UK</option>
<option value="Midlands">Midlands</option> 
```

我想用这两个下拉值过滤一个项目列表。如果选择了索引 0（请选择），这应该返回该属性的所有内容。

这是我的代码，但是当您从第二个下拉列表中选择某些内容时，结果不正确。

```
protected void LoadCareerList(string jobType = "", string jobLocation = "")
    {
        var currentNode = Node.GetCurrent();
        var nodeList = new List<Node>();
        lblVacancyCount.Text = "Current vacancies: 0";

        foreach (Node node in currentNode.Children)
        {
            nodeList.Add(node);
        }

        if (nodeList.Count > 0)
        {
            List<Node> filteredList = nodeList.Where(
                    x => ((ddlFilterType.SelectedIndex == 0 || x.GetProperty("jobType").Value.Replace(" ", "").ToLower().Contains(jobType.Replace(" ", "").ToLower()))) && ((ddlFilterLocation.SelectedIndex == 0 || x.GetProperty("jobLocation").Value.Replace(" ", "").ToLower().Contains(jobLocation.Replace(" ", "").ToLower())))).OrderByDescending(x => x.GetProperty("jobDatePosted").Value).ToList();

            lvCareers.DataSource = filteredList;
            lvCareers.DataBind();
            lblVacancyCount.Text = "Current vacancies: " + filteredList.Count.ToString(CultureInfo.InvariantCulture);

        }
    } 
```

到目前为止，我在系统中有 3 条记录：Career 1 = Midlands & Permanent Career 2 = London & Permanent Career 3 = Midlands & Temporary 当我选择 Permanent 我得到 2 条记录，在第二个过滤器中选择 London 会返回 0 条记录。

# android - 如何在 Android 中使用 Service 类获取触摸事件（X 和 Y 坐标）？

> ID：15686858
> 
> 赞同：3
> 
> 时间：2013-03-28T16:14:01.827
> 
> 标签：android, class, events, service, touch

我将开发需要在 Android 服务类中使用 TouchEvents 的应用程序。我试图在互联网上搜索，但无法找到合适的解决方案。

基本上，服务类应该监听整个设备中发生的任何触摸事件，它应该显示设备正在使用的任何应用程序的 X 和 Y 坐标。

我不想使用 Activity 但应该只使用 Service 类并让所有事件发生在应用程序之外。

任何人都可以帮助我提供服务类使用的源代码以获取触摸事件并将其他应用程序触摸事件纳入服务类吗？

请分享有用的信息或任何链接以进一步实施。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T15:46:38.383

我想你已经发现这是不可能的。如果您能够执行此类操作，那将是非常严重的安全漏洞。获取所有触摸事件（包括来自密码输入的事件）坐标的应用程序是键盘记录器。作为一个安卓设备用户，我很高兴这是不可能的。

# signalr - SignalR 集线器重载

> ID：15686859
> 
> 赞同：11
> 
> 时间：2013-03-28T16:14:04.357
> 
> 标签：signalr, signalr-hub

我尝试使用两种 Receive 方法创建一个基本集线器，一个接受字符串，另一个接受 int。这会导致错误，指出无法解析该方法。注释掉其中一种方法可以消除错误，一切正常。

是否可以在我的集线器中重载方法？可以做类似重载的事情吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T17:20:25.937

SignalR 确实支持重载服务器端集线器方法，但重载必须具有不同的数量，即采用不同数量的参数。

如果重载具有相同的数量，SignalR 将无法解析正在调用哪个重载，即使重载的 Hub 方法接受不同的类型。

# perl - 在 pcap_loop 期间每秒生成统计信息

> ID：15686862
> 
> 赞同：0
> 
> 时间：2013-03-28T16:14:09.553
> 
> 标签：perl, nonblocking, libpcap, period

我正在编写一个 PERL 脚本，该脚本捕获数据包，然后每秒生成有关所有 TCP 流的统计信息，这些流在该秒内在线。我正在使用 NET::Pcap，我想以某种方式实现这一点，如果可以不使用线程。我尝试过使用 select() 和 pcap_breakloop()，但它似乎不起作用。

我在想：

```
...
$pcap = pcap_open_live($dev, 1024, 1, 0, \$err);

select($pcap, undef, undef, 1)
if 1 sec elapsed print a line with data maintained by the pcap_callback function, 
and go back to pcap_loop 
```

你知道如何解决这个问题吗？我不确定我应该使用 select，但我没有更好的主意，我是 PERL 的新手。我选择 select 的原因是，即使没有流量，我也需要生成统计信息。

例如，我想每秒打印传输的字节，然后我还需要生成总零行。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:33:52.890

我想我已经找到了答案，也许它对其他人有用。

```
my $dev = Net::Pcap::pcap_lookupdev(\$err);
print "Capturing on: $dev\n";

my $pcap = pcap_open_live($dev, 1024, 1, 0, \$err);

if ($pcap eq NULL) {
  print "Could not capture on $dev. Terminating...\n";
  return 0;
}

my $main_loop = Glib::MainLoop->new;

Glib::IO->add_watch (pcap_get_selectable_fd($pcap), [qw/in/], \&watch_callback, $pcap); 
Glib::Timeout->add (1000, \&stats_callback, undef, 1 );

$main_loop->run;

print "Closing pcap...\n";

pcap_close($pcap);

sub watch_callback {
  Net::Pcap::pcap_dispatch($pcap, -1, \&process_packet, "");
  return 1;
}

sub stats_callback{
  #generate statistic...
  return 1;
}

sub process_packet {
  my ($user_data, $header, $packet) = @_;
  my $ether_data = NetPacket::Ethernet::strip($packet);
  ...
} 
```

确保你的回调函数默认返回值为真，这样才能再次调用。

# xslt - 匹配第一次出现的子节点

> ID：15686863
> 
> 赞同：3
> 
> 时间：2013-03-28T16:14:10.317
> 
> 标签：xslt, xslt-2.0

我有一个 xml 文档

```
 <body>
      <heading>Main Heading</heading>
      <para>
       <text>para 1</text>
      </para>
      <para>
        <heading>heading 2</heading>
        <text> para 2</text>
      </para>
      <para>
         <heading>heading 3</heading>
         <text>para 3</text>
       </para>
    </body> 
```

我想匹配第一次出现的标题元素并向其添加一些文本。我只想第一次出现标题，标题应该是 para 元素的子节点。

所以输出应该如下所示

```
 <body>
      <heading>Main Heading</heading>
      <para>
       <text>para 1</text>
      </para>
     <para>
        <heading>**This is a first heading found** heading 2</heading>
        <text> para 2</text>
      </para>
     <para>
    <heading>heading 3</heading>
        <text>para 3</text>
      </para>
    </body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T16:37:28.523

这应该做你想要的：

```
para[heading][1]/heading[1] 
```

它将匹配第一个包含任何标题的段落中的第一个标题元素。

示例 XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <xsl:template match="para[heading][1]/heading[1]">
    <xsl:copy>**First heading** <xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

您的示例的输出：

```
<body>
      <heading>Main Heading</heading>
      <para>
       <text>para 1</text>
      </para>
      <para>
        <heading>**First heading** heading 2</heading>
        <text> para 2</text>
      </para>
      <para>
         <heading>heading 3</heading>
         <text>para 3</text>
       </para>
    </body> 
```

如果 XML 中的其他地方可能有`<para>`元素而不是直接嵌套在下面，`<body>`那么使用更具体的匹配表达式会更安全，即

```
/body/para[heading][1]/heading[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:27:02.430

您需要使用`position()`of ，`para`因为您的第`<heading>`一个是`<para>`. 并且 para 在它有一个孩子之前出现一次，`<heading>`所以你需要第二个`<para>`。

应用此 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:template match="node() | @*">
    <xsl:copy>
        <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="//para[position()=2]/heading">
    <xsl:element name="heading">
        <xsl:value-of select="concat('**This is a first heading found**',' ',.)"/>
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

到您的源 XML，您将获得以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
<heading>Main Heading</heading>
<para>
    <text>para 1</text>
</para>
<para>
    <heading>**This is a first heading found** heading 2</heading>
    <text> para 2</text>
</para>
<para>
    <heading>heading 3</heading>
    <text>para 3</text>
</para>
</body> 
```

PS：我刚刚注意到您想要 XSLT 2.0 - 我的解决方案是 XSLT 1.0。我不确定是否有区别。

# android - DatePicker.setMinDate(long minDate) throws IllegalArgumentException: Time not between

> ID：15686865
> 
> 赞同：17
> 
> 时间：2013-03-28T16:14:12.583
> 
> 标签：android, datepicker, datepickerdialog

我有一个由开始日期和结束日期组成的时间间隔。我有办法让用户通过 DatePickerDialogs 设置这些日期。以下是创建和显示对话框的方法的代码：

```
private void editInterval(boolean beginning) {
    DatePickerDialog dpd;
    Calendar cal = Calendar.getInstance();
    if (beginning) {
        dpd = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {             
            @Override
            public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                someTimeDuringYear1 = year;
                someTimeDuringMonth1 = monthOfYear + 1;
                someTimeDuringDay1 = dayOfMonth;
                Calendar cal1 = Calendar.getInstance();
                cal1.set(Calendar.YEAR, year);
                cal1.set(Calendar.MONTH, monthOfYear);
                cal1.set(Calendar.DAY_OF_MONTH, dayOfMonth);
                Calendar cal2 = Calendar.getInstance();
                cal2.set(Calendar.YEAR, someTimeDuringYear2);
                cal2.set(Calendar.MONTH, someTimeDuringMonth2);
                cal2.set(Calendar.DAY_OF_MONTH, someTimeDuringDay2);
                if (cal1.getTimeInMillis() > cal2.getTimeInMillis()) {
                    someTimeDuringYear2 = someTimeDuringYear1;
                    someTimeDuringMonth2 = someTimeDuringMonth1;
                    someTimeDuringDay2 = someTimeDuringDay1;
                }
                updateSomeTimeDuring();
                editDepartureInterval();
            }
        }, someTimeDuringYear1, someTimeDuringMonth1 - 1, someTimeDuringDay1);
        dpd.setTitle(getString(R.string.beginning_of_interval));
        cal.add(Calendar.MONTH, 6);
        dpd.getDatePicker().setMaxDate(cal.getTimeInMillis());
        cal.add(Calendar.MONTH, -6);
        cal.add(Calendar.DATE, 2);
        dpd.getDatePicker().setMinDate(cal.getTimeInMillis());
    } else {
        dpd = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {             
            @Override
            public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                someTimeDuringYear2 = year;
                someTimeDuringMonth2 = monthOfYear + 1;
                someTimeDuringDay2 = dayOfMonth;
                updateSomeTimeDuring();
                editDepartureInterval();
            }
        }, someTimeDuringYear2, someTimeDuringMonth2 - 1, someTimeDuringDay2);
        dpd.setTitle(getString(R.string.end_of_interval));
        cal.add(Calendar.MONTH, 6);
        dpd.getDatePicker().setMaxDate(cal.getTimeInMillis());
        cal.set(someTimeDuringYear1, someTimeDuringMonth1 - 1, someTimeDuringDay1);
        dpd.getDatePicker().setMinDate(cal.getTimeInMillis());
    }
    dpd.show();
    dpd.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
} 
```

该`beginning`变量的值决定了用户是否选择了编辑时间间隔的开始日期或结束日期。这些`someTimeDuringYear1`和类似的是与开始日期相关的成员变量，`someTimeDuringYear2`并且类似的是与间隔的结束日期相关的。所有这些都是在创建和显示此对话框之前预设的。

编辑开始和结束间隔时抛出异常。假设我选择编辑间隔的结束日期。一切正常，直到我将日期设置为我被允许的最后日期。如果我这样做并确认，一切似乎仍然很好，但是当我再次尝试编辑间隔的结束日期时，应用程序崩溃并引发异常。（如果我将间隔的开始日期设置为最后允许的日期，然后再次尝试编辑它，也会发生同样的事情。）

这是来自 LogCat 的日志：

```
03-28 17:18:16.901: E/AndroidRuntime(6112): FATAL EXCEPTION: main
03-28 17:18:16.901: E/AndroidRuntime(6112): java.lang.IllegalArgumentException: Time not between Sat Mar 30 17:18:16 CET 2013 and Sat Sep 28 17:18:16 CEST 2013
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.CalendarView.goTo(CalendarView.java:805)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.CalendarView.setMinDate(CalendarView.java:487)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.DatePicker.setMinDate(DatePicker.java:315)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.skypicker.android.MainActivity.editInterval(MainActivity.java:344)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.skypicker.android.MainActivity.access$10(MainActivity.java:296)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.skypicker.android.MainActivity$5.onClick(MainActivity.java:261)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.AbsListView.performItemClick(AbsListView.java:1063)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2519)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.widget.AbsListView$1.run(AbsListView.java:3173)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.os.Handler.handleCallback(Handler.java:605)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.os.Looper.loop(Looper.java:137)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at java.lang.reflect.Method.invoke(Method.java:511)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
03-28 17:18:16.901: E/AndroidRuntime(6112):     at dalvik.system.NativeStart.main(Native Method) 
```

我整个下午都在寻找答案并试图提出解决方案。任何帮助表示赞赏。

谢谢你。

PS：这是我在这里问的第一个问题，所以如果有什么问题我很抱歉。我很乐意提供有关正在发生的事情的任何缺失信息。

**编辑：**奇怪的是，即使当我尝试设置时问题就出现了`minDate`，但实际上似乎日期比`maxDate`. 我相信这一点的原因是，如果我传递`someTimeDuringDay2 - 1`而不是传递`someTimeDuringDay2`给`DatePickerDialog`' 的构造函数，问题就消失了。但是然后“天”字段`DatePicker`确实比我想要的小一。我需要将其设置为显示`someTimeDuringDay2`时`DatePickerDialog`，而不是`someTimeDuringDay2 - 1`. 但是当日期与它相同时，它似乎有问题`maxDate`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T06:54:36.863

问题是我用来设置`DatePicker`'s的日历的小时、分钟、秒和毫秒，`minDate`并设置为与调用`maxDate`时间相对应的值。`Calendar.getInstance()`当我将日、月和年传递给 的构造函数时`DatePickerDialog`，日期相同，但毫秒不同。因此， maxDate 中设置的毫秒数可能小于`DatePicker`当前时间中设置的毫秒数，因此`DatePicker`应该显示的日期被评估为大于`maxDate`（即使它仍然是同一天，只是还有更多毫秒）......同样适用于`minDate`.

我希望这是可以理解的。

因此，在使用日历进行设置时将日历设置为一天的最后一毫秒，以及在使用它们进行设置时设置为`maxDate`一天的第一毫秒`minDate`。像这样：

`else`（只是该子句中的一段代码。）

```
 dpd.setTitle(getString(R.string.end_of_interval));
        cal.add(Calendar.MONTH, 6);
        cal.set(Calendar.HOUR_OF_DAY, cal.getMaximum(Calendar.HOUR_OF_DAY));
        cal.set(Calendar.MINUTE, cal.getMaximum(Calendar.MINUTE));
        cal.set(Calendar.SECOND, cal.getMaximum(Calendar.SECOND));
        cal.set(Calendar.MILLISECOND, cal.getMaximum(Calendar.MILLISECOND));
        dpd.getDatePicker().setMaxDate(cal.getTimeInMillis());
        cal.set(someTimeDuringYear1, someTimeDuringMonth1 - 1, someTimeDuringDay1);
        cal.set(Calendar.HOUR_OF_DAY, cal.getMinimum(Calendar.HOUR_OF_DAY));
        cal.set(Calendar.MINUTE, cal.getMinimum(Calendar.MINUTE));
        cal.set(Calendar.SECOND, cal.getMinimum(Calendar.SECOND));
        cal.set(Calendar.MILLISECOND, cal.getMinimum(Calendar.MILLISECOND));
        dpd.getDatePicker().setMinDate(cal.getTimeInMillis()); 
```

希望它对某人有所帮助。

另外，如果有人提出更优雅的解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-27T10:00:48.837

当今天不在 [minDate, maxDate] 时，我得到了同样的例外。但是，如果我将代码更改为 call `setMinDate()`before `setMaxDate()`，它就起作用了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-16T17:39:48.793

为了增强上述答案，我决定发布此内容。

当多次调用 setMaxDate() 时，假设 onPrepareDialog() 发生动态变化，您必须确保新的最大年份不等于前一个最大年份或新的最大日期等于旧的最大日期。

听起来很奇怪，但这是来自[grep 代码的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/widget/DatePicker.java#DatePicker)

```
public void setMaxDate(long maxDate) {
    mTempDate.setTimeInMillis(maxDate);
        if (mTempDate.get(Calendar.YEAR) == mMaxDate.get(Calendar.YEAR)
                && mTempDate.get(Calendar.DAY_OF_YEAR) != mMaxDate.get(Calendar.DAY_OF_YEAR)) {
            return;
        }
        mMaxDate.setTimeInMillis(maxDate);
        mCalendarView.setMaxDate(maxDate);
        if (mCurrentDate.after(mMaxDate)) {
            mCurrentDate.setTimeInMillis(mMaxDate.getTimeInMillis());
            updateCalendarView();
        }
    updateSpinners();
} 
```

所以对我来说，我调用了两次 setMaxDate()。一次使用虚拟值，其中年份偏移 +100，第二次使用我想要的实际字段。

这是组合的结果：

```
maxDate.set(Calendar.HOUR_OF_DAY, maxDate.getMaximum(Calendar.HOUR_OF_DAY));      
maxDate.set(Calendar.MINUTE, maxDate.getMaximum(Calendar.MINUTE));                
maxDate.set(Calendar.SECOND, maxDate.getMaximum(Calendar.SECOND));                
maxDate.set(Calendar.MILLISECOND, maxDate.getMaximum(Calendar.MILLISECOND));      
maxDateDummy.set(Calendar.HOUR_OF_DAY, maxDate.getMaximum(Calendar.HOUR_OF_DAY)); 
maxDateDummy.set(Calendar.MINUTE, maxDate.getMaximum(Calendar.MINUTE));           
maxDateDummy.set(Calendar.SECOND, maxDate.getMaximum(Calendar.SECOND));           
maxDateDummy.set(Calendar.MILLISECOND, maxDate.getMaximum(Calendar.MILLISECOND)); 

//update the dummy date by 100 years to force android OS to change max time.      
maxDateDummy.set(Calendar.YEAR, maxDateDummy.get(Calendar.YEAR) + 100);           

datePicker.setMaxDate(maxDateDummy.getTimeInMillis());                            
datePicker.setMaxDate(maxDate.getTimeInMillis()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-09T10:49:05.767

我遇到了同样的错误，我通过设置修复它

```
dialog.getDatePicker().setCalendarViewShown(false); 
```

在应用程序中，不需要任何日历视图，这就是我所做的

```
Calendar tempDate =Calendar.getInstance(); 
dialog.getDatePicker().setMaxDate(Calendar.getInstance().getTimeInMillis();
dialog.getDatePicker().setCalendarViewShown(false);
tempDate.add(Calendar.YEAR, -120);
dialog.getDatePicker().setMinDate(tempDate.getTimeInMillis()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-07T22:21:32.643

与 setMinDate 有类似的问题，这解决了它：

```
int year=2017, month=1, day=1; // for min. date: 1\. feb. 2017
Calendar cal = Calendar.getInstance();
cal.set( year, month, day, 0, 0, 0 ); //hour=0 min=0 sec=0
datePickerDialog.getDatePicker().setMinDate(cal.getTimeInMillis()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-25T20:48:42.760

这就是我为在 DatePicker 上遇到的相同错误所做的。因此，当我在 DatePicker 上设置 MaxDate 和 MinDate 时，毫秒数正在发生变化。对于我的申请，日期是否相差一秒并不重要。我需要 mindates 和 maxdates 之间的差异为两天。

```
 final Calendar c = Calendar.getInstance();
        c.setTimeZone(TimeZone.getDefault());
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        DatePickerDialog datePickerDialog = new DatePickerDialog(getActivity(), this, year, month, day);
        long OFFSET = 1000 ; //milli seconds offset for your date.
        datePickerDialog.getDatePicker().setMaxDate(c.getTimeInMillis() + 1 * OFFSET);
        c.add(Calendar.DAY_OF_MONTH, -1);
        datePickerDialog.getDatePicker().setMinDate(c.getTimeInMillis() - 1 * OFFSET); 
```

希望这可以帮助某人。这将使日期设置在界限之间。您可能必须根据您的应用程序更改偏移量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T12:42:38.030

我通过将日历的限制设置为一年（从今天开始）解决了类似的问题

```
 long A_YEAR_MILLISECOND = 12 * 30 * 24 * 60 * 60 * 1000L;

    datePickerDialog.getDatePicker().setMaxDate(Calendar.getInstance().getTimeInMillis() + A_YEAR_MILLISECOND);
    datePickerDialog.getDatePicker().setMinDate(Calendar.getInstance().getTimeInMillis()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-18T03:38:47.563

就我而言，我在设置最大日期后设置了最小日期。它导致崩溃。

前 ：

```
if (!currentDateandTimeSampai.equalsIgnoreCase("")) {
    datePickerDialog.getDatePicker().setMaxDate(end.getTime());
} 
```

`datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis() - 1000);`

后 ：

`datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis() - 1000);`

```
if (!currentDateandTimeSampai.equalsIgnoreCase("")) {
     if (isSameDate(new Date(), end)){
          datePickerDialog.getDatePicker().setMaxDate(new Date().getTime());
     }else {
          datePickerDialog.getDatePicker().setMaxDate(end.getTime());
     }
 } 
```

您可以添加此功能来检查您的 maxDate 是否与当天是同一天：

```
public boolean isSameDate(Date date1, Date date2) {
    Calendar cal1 = Calendar.getInstance();
    Calendar cal2 = Calendar.getInstance();
    cal1.setTime(date1);
    cal2.setTime(date2);
    return cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
            cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR);
} 
```

# php - 使用 mod_rewrite 在 URL 中添加用户名？

> ID：15686869
> 
> 赞同：1
> 
> 时间：2013-03-28T16:14:30.297
> 
> 标签：php, .htaccess, url, mod-rewrite

我现在建立了一个网站，每个用户都有自己的页面。

```
Example: www.example.com/user 
```

但现在我想知道如何为每个用户设置不同的部分。

```
Example: www.example.com/user/photos 
```

我怎样才能做到这一点？

这是我的用户页面的htaccess；

```
RewriteEngine On

RewriteOptions MaxRedirects=1

RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
RewriteCond %{REQUEST_FILENAME} -d [NC] 

RewriteRule .* - [L]
RewriteRule ^(.*)$ userpage.php?user=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:31:37.463

理想情况下，请求被重写到的页面是主控制器/调度程序。我使用的方法是

```
RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

然后

```
$route = explode('/', $_GET['rt']); 
```

在你的情况下会产生：

```
array( 'user' , 'photos' ) 
```

通过这种方式，您可以使用单个脚本来确定要加载程序的哪一部分，然后简单地包含它。如果您决定在不必完全重新排列代码之后向您的站点添加不同的功能，只需将另一个部分添加到您的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:51:59.753

如果我理解您的问题您希望每个用户都有不同的网址，例如

```
 www.example.com/user1/photos
  www.example.com/user2/photos 
```

为此，您可以使用这样的东西

```
 RewriteCond %{REQUEST_URI} ^/([^/]+)/(.*)$ 
 RewriteRule ^ userpage.php?user=%1&url=%2 [S=1,L]

 RewriteCond %{REQUEST_URI} ^/(.*)$ [NC]
 RewriteRule ^ userpage.php?user=%1 [S=1,L] 
```

# c# - Mef2 在每个模块中配置注册

> ID：15686874
> 
> 赞同：3
> 
> 时间：2013-03-28T16:14:46.740
> 
> 标签：c#, .net, mef, mef2

好的，所以我在使用 .Net 4.5 的 C# WPF 应用程序中使用 Caliburn Micro 和 Mef2。我想知道是否有任何方法可以在单独的 dll 中配置 Mef2 的注册，然后在我的主 dll 中使用它们。基本上，dll 将配置自己的导入和导出。

就像是：

```
RegistrationBuilder builder = new RegistrationBuilder();

        builder.ForTypesDerivedFrom<IShell>().Export<IShell>().SetCreationPolicy(CreationPolicy.Shared);
        builder.ForTypesDerivedFrom<IFindProducts>().Export<IFindProducts>().SetCreationPolicy(CreationPolicy.Shared);
        builder.ForTypesMatching(t => t.Name.EndsWith("ViewModel")).Export().SetCreationPolicy(CreationPolicy.NonShared);

        return builder; 
```

在每个 dll 中，但我坚持将所有注册合并到一个 RegistrationBuilder 中，然后传递到每个目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:26:12.523

一种方法是将 RegistrationBuilder 传递给每个程序集以进行更新。这可以通过添加如下接口来完成：

```
public interface IRegistrationUpdater
{
    void Update(RegistrationBuilder registrationBuilder);
} 
```

在合同大会中。这将被所有需要注册 MEF2 约定的程序集引用。例如：

```
public class RegistrationUpdater: IRegistrationUpdater
{
    public void Update(RegistrationBuilder registrationBuilder)
    {
        if (registrationBuilder == null) throw new ArgumentNullException("registrationBuilder");

        registrationBuilder.ForType<SomeType>().ImportProperty<IAnotherType>(st => st.SomeProperty).Export<ISomeType>();
        registrationBuilder.ForType<AnotherType>().Export<IAnotherType>();
    }
} 
```

随着`SomeType`实施`ISomeType`和`AnotherType`实施`IAnotherType`。`IAnotherType`不需要零件。`ISomeType`需要`IAnotherType`一部分。

然后在您的主程序中，您需要使用以下内容找到可用的 IRegistrationUpdaters：

```
static IEnumerable<IRegistrationUpdater> GetUpdaters()
{            
    var registrationBuilder = new RegistrationBuilder();
    registrationBuilder.ForTypesDerivedFrom<IRegistrationUpdater>().Export<IRegistrationUpdater>();
    using (var catalog = new DirectoryCatalog(".", registrationBuilder))
    using (var container = new CompositionContainer(catalog))
    {
        return container.GetExportedValues<IRegistrationUpdater>();
    }  
} 
```

然后可以使用它来遍历每个更新程序并调用`IRegistrationUpdater.Update(RegistrationBuilder)`.

```
var mainRegistrationBuilder = new RegistrationBuilder();
foreach (var updater in GetUpdaters())
{
    updater.Update(mainRegistrationBuilder);
}

var mainCatalog = new DirectoryCatalog(".", mainRegistrationBuilder);
var mainContainer = new CompositionContainer(mainCatalog);

var s = mainContainer.GetExportedValue<ISomeType>(); 
```

# jquery - ajax数据变量问题

> ID：15686875
> 
> 赞同：-2
> 
> 时间：2013-03-28T16:14:46.897
> 
> 标签：jquery, ajax

我在尝试组合两个变量来填充我的 .ajax 请求的“数据：”字段时遇到了麻烦。

当我使用 alert() 写出变量时，一切看起来都很好。但不知何故，数据没有正确形成。

这是我的代码：

```
 var itemName = $(this).closest("tr").data("str");
            var itemValue = $(this).closest("tr").data("dataitem");

            var dataObj = {};
            dataObj[itemName] = itemValue;

            $.ajax({
                url: url,
                dataType: "json",
                data: dataObj,
             ... 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:19:30.973

尝试使用对象文字表示法。

```
var dataObj = {
    name: itemName,
    value: itemValue
} 
```

# arrays - 如何计算 BASH 数组中的项目出现次数？

> ID：15686881
> 
> 赞同：3
> 
> 时间：2013-03-28T16:15:08.287
> 
> 标签：arrays, bash

`${myarr[@]}`我有一个带字符串的数组。`${myarr[@]}`基本上由行组成，每行由单词组成。

```
world hello moon
weather dog tree
hello green plastic 
```

我需要计算`hello`这个数组中的出现次数。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T16:46:06.080

替代方案（无循环）：

```
grep -o hello <<< ${myarr[*]} | wc -l 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T16:48:36.803

无需外部程序：

```
count=0
for word in ${myarr[*]}; do
    if [[ $word =~ hello ]]; then
        (( count++ ))
    fi
done 

echo $count 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T16:29:22.343

试试这个：

```
for word in ${myarr[*]}; do
  echo $word
done | grep -c "hello" 
```

# matlab - 消除 Simulink 模型中的延迟

> ID：15686889
> 
> 赞同：1
> 
> 时间：2013-03-28T16:15:28.603
> 
> 标签：matlab, delay, simulink

我正在 Simulink 中开发建筑物、恒温器和空调的模型。由于 3 个时间步长的信号延迟，我的模型过度预测冷却和加热。

控制基于输入温度。当室内温度高于 27.2 C 时，恒温器信号切换到“ON”。该信号会打开空调，然后空调会带走房间的热量。在布局图中，恒温器模型和性能图模型都是“Masked”函数。

```
 1\. Time  Temp [C]  CoolOnTemp CoolOffTemp CoolSignal Qsensible
 2\. 8.43     27.11      26.2      27.2        0          0
 3\. 8.45     27.201     26.2      27.2        0          0
 4\. 8.47     27.29       26.2     27.2        1          0
 5\. 8.48      27.38      26.2      27.2       1         -47121
 6\. 8.50      26.59      26.2     27.2       1          -47160     
 7\. 8.52      25.87      26.2     27.2       1          -46499
 8\. 8.53      25.21      26.2     27.2       0           -45408
 9\. 8.55      24.63      26.2     27.2       0           0
 10\. 8.57     24.93      26.2     27.2       0           0
 11\. 8.58     25.22      26.2     27.2       0           0 
```

在时间 8.45，Core 1 温度大于 27.2（其实际值为 27.201），但是来自恒温器的冷却信号直到下一个时间步长才变为“1”。在制冷信号和提供制冷的空调（Qsensible 列）之间出现第二个延迟。在空调提供的冷却和房间内的温度响应之​​间出现第三个时间步长延迟。因此，在“超出范围”温度条件和所需响应之间发生了 3 个时间步长的总延迟。

从 8.52 时间开始，空调应该关闭时也会出现同样的延迟。

恒温器和空调之间没有使用有目的的延迟块。虽然这两个模块都是 Sfunction，但 Thermostat 模型具有状态变量（参考之前的时间步长值），但空调没有。

感谢您就如何消除其中两个延迟提供的任何建议。

# c - 如何在C中通过malloc为字符串分配指针数组？

> ID：15686890
> 
> 赞同：18
> 
> 时间：2013-03-28T16:15:32.767
> 
> 标签：c, arrays, malloc

我在 C 示例中有这个结构：

```
typedef struct 
{
    const char * array_pointers_of_strings [ 30 ];
    // etc.
} message; 
```

我需要将此 array_pointers_of_strings 复制到新数组以对字符串进行排序。我只需要复制地址。

```
while ( i < 30 )
{
   new_array [i] = new_message->array_pointers_of_strings [i]; 
   // I need only copy adress of strings
} 
```

我的问题是：如何通过 malloc() 分配 new_array [i] 仅用于字符串地址？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T16:20:16.100

正如我从您在while循环中的赋值语句中可以理解的那样，我认为您需要字符串数组：

```
char** new_array;
new_array = malloc(30 * sizeof(char*)); // ignore casting malloc 
```

注意：通过`=`在while循环中执行如下：

```
new_array [i] = new_message->array_pointers_of_strings [i]; 
```

你只是在分配字符串的地址（它不是深拷贝），但是因为你也在写“*只有字符串的地址*”所以我认为这就是你想要的。

**编辑：** 警告*“分配丢弃来自指针目标类型的限定符”*

您收到此警告是因为您分配的 a`const char*`将`char*` 违反 const 正确性规则。

你应该像这样声明你的 new_array：

```
const  char** new_array; 
```

*或*从消息严格中删除`const`“array_pointers_of_strings”的声明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T16:18:25.730

这个：

```
char** p = malloc(30 * sizeof(char*)); 
```

将分配一个足够大的缓冲区来容纳 30 个指向`char`（或字符串指针，如果你愿意的话）的指针并分配给`p`它的地址。

`p[0]`是指针 0，`p[1]`是指针 1，...，`p[29]`是指针 29。

* * *

老答案...

如果我正确理解了这个问题，您可以通过简单地声明类型的变量来创建固定数量的它们`message`：

```
message msg1, msg2, ...; 
```

或者您可以动态分配它们：

```
message *pmsg1 = malloc(sizeof(message)), *pmsg2 = malloc(sizeof(message)), ...; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T16:28:27.353

```
#include <stdio.h>
#include <stdlib.h>

#define ARRAY_LEN 2
typedef struct
{
    char * string_array [ ARRAY_LEN ];
} message;

int main() {
    int i;
    message message;
    message.string_array[0] = "hello";
    message.string_array[1] = "world";
    for (i=0; i < ARRAY_LEN; ++i ) {
        printf("%d %s\n",i, message.string_array[i]);
    }

    char ** new_message = (char **)malloc(sizeof(char*) * ARRAY_LEN);
    for (i=0; i < ARRAY_LEN; ++i ) {
        new_message[i] = message.string_array[i];
    }
    for (i=0; i < ARRAY_LEN; ++i ) {
        printf("%d %s\n",i, new_message[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-29T22:44:29.203

您是否必须使用 Malloc？因为 Calloc 是 C 标准库中的函数，它将完成这项工作：

> *“calloc() 函数为每个大小字节的 nmemb 元素数组分配内存，并返回一个指向已分配内存的指针”*。（来源：[这里](https://linux.die.net/man/3/calloc)）

我只是在创建一个哈希表，它有一个指向节点的指针数组，一个简单的方法是：

```
hash_table_t *hash_table_create(unsigned long int size){
hash_table_t *ptr = NULL;

ptr = malloc(sizeof(hash_table_t) * 1);
if (ptr == NULL)
    return (NULL);

ptr->array = calloc(size, sizeof(hash_node_t *)); #HERE
if (ptr->array == NULL)
    return (NULL);
ptr->size = size;
return (ptr);} 
```

希望它对你们有用！

[胼胝](/questions/tagged/calloc "显示标记为“calloc”的问题") [体](/questions/tagged/c "显示标记为“c”的问题")

# python - python请求ssl错误

> ID：15686891
> 
> 赞同：1
> 
> 时间：2013-03-28T16:15:36.997
> 
> 标签：python, ssl, python-requests

我正在尝试使用请求模块（[http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)）通过 ssl 连接到主机

但我的代码：

```
import requests
requests.get("myurl", cert="hosts_certificate_file.crt") 
```

抛出此错误：

```
_ssl.c:364: error:140B0002:SSL  routines:SSL_CTX_use_PrivateKey_file:system lib 
```

我试图传递`verify=False`给`requests.get()`，但它也不起作用。

# javascript - Jquery左右导航不起作用

> ID：15686893
> 
> 赞同：0
> 
> 时间：2013-03-28T16:15:44.050
> 
> 标签：javascript, jquery, html, function

我有以下简单的 html 页面：

```
<html>
<head>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).keydown(function(e){
    if (e.keyCode == 37) {  // left
       $('#prev').click();   
       return false;
    } else if (e.keyCode == 39) {  // right
       $('#next').click();
       return false;
    }
});
</script>
</head>

<body>
<a id="next" href="/next">next</a>
<a id="prev" href="/prev">prev</a>
</body>

</html> 
```

我想让用户使用左右键盘键浏览文章。因此，单击左箭头应该转到 /prev 链接，单击右箭头应该转到 /next 链接。由于某种我无法理解的原因，它在任何浏览器中都不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:17:59.207

像这样：

```
$(document).keydown(function(e){    
    if (e.keyCode == 37) {  // left
       window.location.href = $('#prev').attr('href');   
       return false;
    } else if (e.keyCode == 39) {  // right
       window.location.href =  $('#next').attr('href');  
       return false;
    }
}); 
```

您正在调用`.click()`一个元素，但这不会触发`click`事件，那`.trigger()`是为了：

```
$(document).keydown(function(e){
    if (e.keyCode == 37) {  // left
       $('#prev').trigger('click');   
       return false;
    } else if (e.keyCode == 39) {  // right
       $('#next').trigger('click');
       return false;
    }
}); 
```

# html - 悬停带有边框属性的元素会被移动

> ID：15686894
> 
> 赞同：0
> 
> 时间：2013-03-28T16:15:53.200
> 
> 标签：html, css

当悬停一个 li 元素时，我想在底部和顶部添加一个边框。代码如下所示：

```
#overview li:hover {
    background: rgb(31, 31, 31);
    border-top: 1px solid white;
    border-bottom: 1px solid white;
} 
```

[http://jsfiddle.net/rwDYR/](http://jsfiddle.net/rwDYR/)（将导航悬停在左侧）

问题是，它将 li 元素移动 1 或 2 个像素。我已经尝试`margin-top: -1px`为悬停状态添加一个，但这并不能解决问题。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:18:54.500

当您不悬停时添加透明边框`<li>`（并且仅更改边框的颜色`:hover`）

```
#overview li {
   padding: 5px;
   border-top: 1px solid transparent;
   border-bottom: 1px solid transparent;
}

#overview li:hover {
   border-color: #fff;
   /* other style ... */
} 
```

（在你的小提琴上进行了即时测试，看起来效果很好）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:18:45.783

那是因为您在`li`悬停时添加了边框。有多种解决方案。一种是将填充减少 1 个像素以补偿添加的边框。

[http://jsfiddle.net/rwDYR/1/](http://jsfiddle.net/rwDYR/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:18:48.037

我建议尝试从一开始就添加 1px 的上边距，并在悬停时将上边距设置为 0，以补偿 1px 的上边框。您也可以通过更改填充（而不是边距）来做到这一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:23:43.703

根据浏览器支持的级别，您可以使用 css`box-sizing`属性

[https://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

```
#overview li {
    box-sizing: border-box;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:42:21.477

更新 [http://jsfiddle.net/rwDYR/5/](http://jsfiddle.net/rwDYR/5/)

或使用相同的背景颜色作为边框

```
#overview li {

padding: 5px;     
border-top:solid 1px rgb(24, 53, 82);
border-bottom:solid 1px rgb(24, 53, 82); 

} 
```

# ios - 重新创建分发证书

> ID：15686895
> 
> 赞同：1
> 
> 时间：2013-03-28T16:15:57.637
> 
> 标签：ios, xcode, certificate, key, distribution

我正在紧急修复 iPhone 应用程序，但我有一个问题，以前的开发人员没有留下他的密钥，所以我无法安装分发证书。

除了从请求分发证书的原始机器导入密钥外，我找不到任何其他解决方案来解决“找不到有效的犯罪身份”。

所以我正在考虑删除分发证书并重新创建它，这可能是其他已发布应用程序的问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:19:04.083

如果您有权访问他的配置门户帐户，那么可以，您可以重新创建开发人员身份和签名证书，并重新发布应用程序而不会出现问题。

所有这些凭据都有到期日期，并且会定期到期，而不会影响应用程序的可用性。我有一个应用程序，我最后一次更新是在 2010 年，并且已经经历了 3 个证书周期，没有出现任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:21:01.980

从这里苹果[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG6](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG6)

重要提示：标准 iOS 开发者计划的成员可以放心，更换您的开发者证书或分发证书不会影响您在 iOS App Store 中发布的任何现有应用程序，也不会影响您更新这些应用程序的能力。

# git - Git 提交 - 一个错误

> ID：15686901
> 
> 赞同：2
> 
> 时间：2013-03-28T16:16:10.003
> 
> 标签：git

我正在尝试提交一些 git 更改，但是当我运行时：

```
git commit -a 
```

它返回

```
gvim -f: gvim: command not found
error: There was a problem with the editor 'gvim -f'.
Please supply the message using either -m or -F option. 
```

我是菜鸟，我不知道这意味着什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:25:09.873

您已将其配置`gvim`为默认编辑器，`git`但尚未将其安装在系统中。你有 3 个选择：

1) 在你的系统上安装 [gvim](http://www.vim.org) 编辑器

2）更改默认编辑器`git`：

```
git config --global core.editor "path_of_your_favourite_text_editor" 
```

3）不使用文本编辑器继续提交（不是一个很好的解决方案）

```
git commit -a -m 'commit message' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:22:49.533

对此不确定，但查看[默认编辑器的 Git 文档，](http://git-scm.com/book/en/Customizing-Git-Git-Configuration)当没有设置编辑器时，它会退回到 vi。正如错误提示的那样，您可以传递一个`-m`选项，这样您就不必使用编辑器。

```
git commit -a -m 'committing all files' 
```

# android - Android App Dev db.query throw error source not found

> ID：15686906
> 
> 赞同：0
> 
> 时间：2013-03-28T16:16:17.977
> 
> 标签：android, sqlite

我有这两行，在 Eclipse ADT 中调试时，第二行会导致错误：

```
String[] tableColumns = new String[] {"_id","name","fruitId","vegeId","totalHours"};
Cursor cursor = db.query("PickingPeriod", tableColumns,"isDeleted = 0", null, null, null, "name" ); 
```

当我从 tableColumns 中取出“totalHours”时，它工作正常。似乎与totalHours有关，但它与fruitId和vegeId属于同一类型：INTEGER。**查询**可以返回超过 4 列吗？

另外，当我更改为使用 rawquery 时，一切正常：

```
Cursor cursor = db.rawQuery("SELECT * FROM PickingPeriod WHERE isDeleted = 0",null); 
```

我阅读了一些建议，认为**query**优于**rawquery**，因此我想让**查询**正常工作。知道**查询**行有什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:31:35.173

问题出在第三个参数`"isDeleted = 0"`中，尝试如下更改您的代码：

`Cursor cursor = db.query("PickingPeriod", tableColumns,"isDeleted = ? " , new String[] { String.valueOf(0) }, null, null, "name" );`

[您可以在Android 开发者网站](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)上阅读有关查询方法的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:51:29.563

只是想在这里分享我的修复，这肯定是由于表中缺少列 totalHours 造成的。它一定是在同一数据库版本 1 下创建数据库后添加到表中的。我学会了通过将数据库版本更新为 2 来触发重新创建数据库。当我重新加载枚举器时，表是用列重新创建的totalHours，现在一切正常。感谢大家尝试提供帮助。希望我的解决方案对其他初学者有所帮助。

然而，剩下的问题是我不想每次我想重新创建数据库时都被迫增加数据库版本号，尤其是在修复错误时。是否可以在不增加db版本的情况下修改数据库？

# c# - 如何获取 SharePoint 2010 网站的默认/欢迎页面？

> ID：15686913
> 
> 赞同：0
> 
> 时间：2013-03-28T16:16:30.843
> 
> 标签：c#, sharepoint

我是 SharePoint 2010 编码 Web 部件的新手。我试图弄清楚如何在给定 URL 的情况下获取 SharePoint 网站的登录页面。

前任。我给函数[http://www.yahoo.com](http://www.yahoo.com)，我得到[http://www.yahoo.com/pages/default.aspx](http://www.yahoo.com/pages/default.aspx)。

这是到目前为止的功能：

```
private string GetSPSiteUrl(string u) {
    var siteurl = string.Empty;

    using (SPSite site = new SPSite(u)) {
        using (SPWeb web = site.OpenWeb()) {
            siteurl = web.Url;
        }
    }

    return siteurl;
} 
```

该函数只是返回我现在给它的东西，这是没有用的。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T14:01:19.307

一种更简单的方法，无需点击。

这为您提供了直接的“WelcomePage”网址：

```
web.RootFolder.WelcomePage 
```

如果您需要实际项目：

```
SPListItem welcomePage = web.GetFile(web.RootFolder.WelcomePage).Item; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-11T15:19:10.623

为确保匿名用户可以获得它，请使用：

```
public static string GetWelcomePageUrl(SPWeb web)
    {
        if (web.DoesUserHavePermissions(SPBasePermissions.BrowseDirectories))
        {
            return web.RootFolder.WelcomePage;
        }
        string welcomePage = string.Empty;
        SPSecurity.RunWithElevatedPrivileges(delegate
        {
            using (SPSite sPSite = new SPSite(web.Site.ID))
            using (SPWeb sPWeb = sPSite.OpenWeb(web.ID))
            {
                welcomePage = sPWeb.RootFolder.WelcomePage;
            }
        });
        return welcomePage;
    } 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-28T16:25:08.090

也许[这个](http://social.technet.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/2bf31aee-e513-42c1-8e57-b86c815d6e9e)线程中的指导会有所帮助。

# .net - 为 Windows 窗体创建单元测试。.Net C#

> ID：15686917
> 
> 赞同：0
> 
> 时间：2013-03-28T16:16:38.960
> 
> 标签：.net, winforms, unit-testing, c#-4.0

有一种形式，其中有控件（文本框，按钮）。

```
public partial class Form1 : Form
    {

        public MWLogin()
        {
            InitializeComponent();
        }

        private void btnOK_Click(object sender, EventArgs e)
        {
                this.DialogResult = System.Windows.Forms.DialogResult.OK;

          }

    //there is text box!

        private void txtbox_SelectedIndexChanged(object sender, EventArgs e)
            {
            if(!String.IsNullorEmpty(txtbox.Text))
            {
                btnOK.Enabled = true;   //for example
            }
        }
} 
```

并且在单元测试中应该从 txtBox 获取文本，例如：（不正确）

```
[TestMethod()]
            public void Form1Test()
            {
            try
            {

                MWLogin target = new MWLogin();
                if(MWLogin.ShowDialog() == DialogResult.OK)
                {
                      string a = MWLogin.txtBox.Text; //this is no correct
                }

                Assert.IsTrue(true);
            }
            catch (Exception)
            {
                Assert.Fail();
            }
        } 
```

请帮忙！如何从`txtBox`表单中获取文本（表单中没有静态或公共属性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T12:18:55.407

您无法访问私人成员（txtbox 是私人的）。尝试添加公共属性：

```
public String TextBoxText { get { return txtbox.Text; } } 
```

现在在单元测试中你可以使用：

```
string a = target .TextBoxText; 
```

# java - 使用 tomcat 的 Web 套接字和 Web 服务

> ID：15686922
> 
> 赞同：0
> 
> 时间：2013-03-28T16:16:52.007
> 
> 标签：java, web-services, tomcat, websocket, axis2

我正在android上开发一个与服务器通信以更新位置信息的应用程序。例如：当你找到一家不错的餐厅时，你可以在地图上标记并与其他人分享。每个人都会看到它并知道该餐厅提供什么特别折扣。我已经完成了标记这个位置的代码，并在android和服务器端共享。我已将其编写并部署为axis2 Web 应用程序。现在，我想实时更新某人共享的位置。我正在考虑网络套接字。但是经过几天的研究，我不知道该怎么做。我的问题是：

*   我不知道在这种情况下我应该使用哪个框架。我已经尝试过 jWebsocket，但由于大量的配置，它让我抓狂。我也尝试过 JavaWebsocket（由 TooTallNate 创建）和 Atmosphere，但它们需要独立运行。我只是想把它和axis2的现有代码或者我可以部署在tomcat服务器上的东西放在同一个war文件中。找到一个云来部署一个web应用程序很容易，但是运行一个依赖服务器就很难了作为JavaWebSocket，你知道的。我能做到吗？你能给我一些框架吗？

*   我还想在android客户端创建一个代码，有没有我可以使用的库或框架？

我是网络套接字的新手，所以我不知道该去哪里。谢谢你的每一个建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:27:24.443

我使用了基于 Jetty 并完全[嵌入](http://jwebsocket.org/howto/ht_webapp.htm)到 Tomcat 中的[JWebSocket 。](http://jwebsocket.org)它还有不同的客户端库（javaScript、[android](http://jwebsocket.org/downloads/dl_bundles.htm)）。

# c++ - 定时器的使用

> ID：15686925
> 
> 赞同：1
> 
> 时间：2013-03-28T16:17:05.157
> 
> 标签：c++, windows, api, timer

我有一个 c++ 应用程序，我想每 1 分钟调用一次函数。我从一位朋友那里得到了这段代码（感谢他）

```
void CALLBACK f(HWND hwnd, UINT uMsg, UINT timerId, DWORD dwTime)
{
  printf("Hello");
}

int main() 
{
  MSG msg;

  SetTimer(NULL, 0, 1000*60,(TIMERPROC) &f);
  while(GetMessage(&msg, NULL, 0, 0)) {
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }
//Here I have the rest of my appliation
  return 0;
} 
```

但我无法在一段时间后执行我的程序的其余部分。所以，我正在寻找一种解决方案来每分钟执行所有代码和函数 f。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:20:56.507

您正在使用 Windows 计时器消息。您的应用程序在发布到线程队列`GetMessage`之前停止。`WM_QUIT`

最简单的方法是使用一个线程并在那里调用 f ，然后休眠一分钟。

# c - 为什么这两个 char 数组返回不同的结果？

> ID：15686926
> 
> 赞同：0
> 
> 时间：2013-03-28T16:17:10.457
> 
> 标签：c

我刚刚将一个 ip 分配给一个 char 数组并打印它以确保它是正确的并得到以下结果：

```
int
main(void)
{
    char ip [11] = "65.55.57.27";
    printf(ip);
    return 0;
} 
```

我明白了

```
65.55.57.270 " 
```

但是如果我将数组大小增加到 12

```
int
main(void)
{
    char ip [12] = "65.55.57.27";
    printf(ip);
    return 0;
} 
```

我明白了

```
65.55.57.27 
```

谁能解释一下？为什么大小为 11 的数组返回 13 个字符的结果，而大小为 12 的数组返回一个 11 个字符的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:18:47.393

数组在

```
char ip [11] = "65.55.57.27"; 
```

[NUL 终止符](http://en.wikipedia.org/wiki/Null-terminated_string)没有空格，因为字符串文字长度正好是 11 个字符。

这导致

```
printf(ip); 
```

有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

以下任何一项都可以解决问题：

```
char ip [12] = "65.55.57.27";
char ip [] = "65.55.57.27"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:20:35.667

`\0`您为 11 个字节腾出了空间，但char 数组中也存在隐式空字节：

```
>> ip

   {'6', '5', '.', '5', '5', '.', '5', '7', '.', '2', '7', '\0'} 
```

因此，您的数组中有 12 个元素，其中 1 个元素太多。您应该在编译器上遇到错误。这就是我得到的：

> `error: initializer-string for char array is too long`

我不喜欢处理这些琐碎的问题；这就是我使用的原因[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)：

```
#include <string>
#include <iostream>

int main()
{
    std::string str = "65.55.57.27";

    std::cout << str;
} 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy%243062)

# c - Switch 语句，跳出 for 循环以返回到 switch

> ID：15686928
> 
> 赞同：-3
> 
> 时间：2013-03-28T16:17:14.400
> 
> 标签：c

我在运行我的游戏的主 while 循环中有一个开关。我正试图打破我的开关，以便处理不同的情况。下面的示例更好地解释了它：

```
int j = 0;
While(1){
switch(j){
case 0:  ....
        break;
case 1: 
      for( i =0; i > 100; i++){
       if(lives == 0)
        j = 2;
        break; //this is where I want to break out of my switch to go to case 2\. But it         
               //breaks out of my for loop. I do not know how to get around this. Thank 
               //you!
       }
 case 2: //some stuff I want to do
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:19:56.787

如果您想跳出 for 并直接进入案例 2，那么您的代码应该做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:38:17.407

我猜你只想打`case 2`时`lives == 0`。如果是这样，您需要将您的`break;`in`{ }`与`j = 2;`- 放在一起，这样只会在`lives == 0`. 然后，如果您`break;`在末尾放置 a ，`case 0`您将终止开关，然后由于 a 重新进入开关`while(1)`，然后您按`case 2:`。

你的 for 循环应该`for(i = 0; i < 100; i++)`不是`for(i = 0; i > 100; i++)`

```
int j = 0;
While(1){
  switch(j){
  case 0:  ....
    break;
  case 1: 
    for( i =0; i < 100; i++){
      if(lives == 0) {
        j = 2;
        break;
      }
    }
    break;
 case 2: //some stuff I want to do
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:37:16.407

好的，您实际上在正确的轨道上，但是如上所述，您的循环条件需要检查。

```
int j = 0;
While(1){
switch(j){
case 0:  ....
    break;
case 1: 
  for( i =0; i < 100; i++){
    if(lives == 0){
        j = 2;
        break; // Break for
    }
  }
if(j != 2) break; // If no break in the switch's case, then continue to the next case
case 2: //some stuff I want to do
    break;
} //End Switch
} //End While 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T13:32:26.023

像这样构建状态机：

C# bool OnceMore = true;

```
string ProcessState = "Start"
while(OnceMore)
{
   OnceMore = False;
   switch(ProcessState)
   {
      case "Start" :
      {
     // do something
     ProcessState = "Check";
         OnceMore = True;
     break;
      }
      case "Check" :
      {
         // do check
         if( Check == "Ok")
         {
            ProcessState = "Close";
         }
         else // try again
         {
            ProcessState = "Start";
         }
         OnceMore = True;
         break;
      }
      case "Close" :
      {
         // do what you need to return to the caller
         break;
      }
   }
}
return 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:21:54.637

您无法突破多个可破坏范围，您只能突破最高的范围。

对此草率的“解决方案”是使用 goto 跳转。

真正的解决方案是将你的函数分解成更小的逻辑小函数，然后你可以随意中断或返回。出于代码质量和简洁的目的，您的 for 循环几乎肯定应该在其自己的函数中。

```
bool doSomethingInALoopWithADescriptiveName(int &var)
{
    for(int i = 0; i < 100; i++)
    {
        if(lives_WhichShouldntBeGlobal == 0)
        {
            var = 2;
            return false;
        }
    }

    return true;
}

void myFuncWithADescriptiveName()
{
    int variableWithADescriptiveName = 0;
    while(true)
    {
        switch(j)
        {
            case 0:
            {
                //....
            } break;
            case 1:
            {
                bool continueLooping = doSomethingInALoopWithADescriptiveName(&variableWithADescriptiveName);
                if(!continueLooping)
                {
                    return;
                }
            } break;
            case 2:
            {
                //some stuff I want to do
            } break;
        }
    }
} 
```

**注意：**由于问题的标记问题，我不确定问题所问的语言是什么。我的回答适用于许多语言（可以概括为“*编写简单、紧凑、自描述和干净的代码*”），但我的代码示例是伪 C++，但可以轻松应用于其他语言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T16:23:11.300

```
switch(j){
case 0:  ....
    break test;
case 1: 
  for( i =0; i > 100; i++){
   if(lives == 0)
    j = 2;
    break; //this is where I want to break out of my switch to go to case 2\. But it         
           //breaks out of my for loop. I do not know how to get around this. Thank 
           //you!
   }
break test;
case 2: //some stuff I want to do
 break test;
}

test://After switch. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T16:24:41.677

将大括号放在触发下一个案例的条件周围

```
case 1: 
   for( i =0; i > 100; i++)
   {
       if(lives == 0)
       {
           j = 2;
           break; // This exits the for effectively jumping at the case break

       }
       // I suppose here you have other code to process 
       // that should not be executed if (lives == 0)
   }
   break; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T16:33:32.253

您的 break 正在脱离 for 循环。因此，您需要添加一些额外的逻辑来检查循环是否提前退出，然后再次调用 break。

其次，for(i = 0; i > 100; i++)**永远不会执行**，因为 i 永远不会 > 100。

```
for(int i = 0; i < 100; i++)
{
    if(lives == 0)
    {
        j = 2;
        quit = true;
        break; //Break out of the loop
    }
}
//Note, if this language is C, control will just fall through to case 2 anyway.
//If C#, you have to add a break at the end of this case regardless
if(quit == true)
{
    break; //Break out of switch
} 
```

# c++ - 我怎么能等待多件事

> ID：15686932
> 
> 赞同：3
> 
> 时间：2013-03-28T16:17:34.380
> 
> 标签：c++, multithreading, stl, c++11

我正在使用 C++11 和 stl 线程编写线程安全队列。WaitAndPop 方法当前如下所示。我希望能够向 WaitAndPop 传递一些东西，表明调用线程是否已被要求停止。如果等待并返回队列的元素，WaitAndPop 应该返回 true，如果调用线程正在停止，它应该返回 false。

```
 bool WaitAndPop(T& value, std::condition_variable callingThreadStopRequested)
    {
        std::unique_lock<std::mutex> lock(mutex);
        while( queuedTasks.empty() )
        {
            queuedTasksCondition.wait(lock);
        }

        value = queue.front();
        queue.pop_front();
        return true;
    } 
```

是否可以编写这样的代码？我习惯了 Win32 WaitForMultipleObjects，但找不到适用于这种情况的替代方案。

谢谢。

我已经看到了这个相关的问题，但它并没有真正回答这个问题。[linux上的学习线程](https://stackoverflow.com/questions/10818254/learning-threads-on-linux)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T18:07:52.817

如果我正确理解你的问题，我可能会做这样的事情：

```
 bool WaitAndPop(T& value)
 {
    std::unique_lock<std::mutex> lk(mutex);            

    // Wait until the queue won't be empty OR stop is signaled
    condition.wait(lk, [&] ()
    {
        return (stop || !(myQueue.empty()));
    });

    // Stop was signaled, let's return false
    if (stop) { return false; }

    // An item was pushed into the queue, let's pop it and return true
    value = myQueue.front();
    myQueue.pop_front();

    return true;
} 
```

这里，是一个像and`stop`这样的全局变量（我建议不要用作变量名，因为它也是一个标准容器适配器的名称）。控制线程可以设置为（同时持有对 的锁）并调用或on 。`condition``myQueue``queue``stop``true``mutex``notifyOne()``notifyAll()``condition`

这样，在将新项目推入队列时和*发出信号时**都会*`notify***()`调用条件变量，这意味着在等待该条件变量后唤醒的线程必须检查它被唤醒的原因并采取相应行动。**`stop`**

# mysql - MySQL 对主键区分大小写

> ID：15686944
> 
> 赞同：6
> 
> 时间：2013-03-28T16:18:13.170
> 
> 标签：mysql, collation, case-sensitive

MySQL主键值是否区分大小写？如果这是一个选项，我该如何设置？我希望该表能够将“www.Example.com”和“www.example.com”存储为不同的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:24:08.213

您可以在 MySQL 中设置每列排序规则：[https ://dev.mysql.com/doc/refman/5.5/en/charset-column.html](https://dev.mysql.com/doc/refman/5.5/en/charset-column.html)

例如，如果您的表格通常（比如说）不区分大小写，您可以按字段覆盖它以区分大小写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T16:23:41.697

`BINARY`关键字可以解决问题，但我不确定这是否是推荐的方法：

```
CREATE TABLE testpk (MyPK VARCHAR(20) BINARY PRIMARY KEY NOT NULL) 
```

# html - 网页设计：点击购买按钮后返回

> ID：15686945
> 
> 赞同：0
> 
> 时间：2013-03-28T16:18:16.653
> 
> 标签：html, .net

我想知道在其中一件商品上单击购买按钮时的最佳做法是什么。我希望它看起来唯一正在发生的事情是购物车正在闪烁另一件商品。我应该怎么做才能做到这一点。我应该通过 POST 操作发送大量信息，以便我可以重新创建相同的页面并滚动到相同的位置（这将非常不方便），还是有更智能和更好的解决方案。我正在使用 Visual Studio 和 MVC 3

正如你可能理解的那样，我对网页设计还是很陌生，尽管在过去的 15 年里我时不时地使用它。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:01:13.833

设计您的网站以使其在非 js 环境中正常工作是一种很好的做法。在这种情况下，您的按钮将提交带有整页刷新的表单。您的页面已重新加载，您的购物篮现在向用户指示其中有一个额外的项目。

为了给我们的用户提供更好的体验，我们可以使用 AJAX 调用来增强提交操作。

这可以通过在 jQuery 中编写一个触发按钮的单击事件（或表单的提交事件）的 AJAX 调用来完成。

**在表单提交上使用 jQuery 的示例**

```
$('form').submit(function(e){
    e.preventDefault(); //prevents full post-back

    $.ajax({
      type: "POST",
      url: "\\somesite\endpoint",
      data: $(this).serialize()
    }).done(function( bacon ) {
       alert( "Receive: " + bacon );
    });
}); 
```

**MVC 3 Ajax 扩展**

MVC3 也有一些 AJAX 扩展方法来帮助我们。尤其是`Ajax.BeginForm`

```
@using (Ajax.BeginForm())
{
    /* Your form elements here */

    <input type="submit" value="OK" />
} 
```

这是一个关于如何使用它的简单示例[How to use ajax beginform](http://shahvaibhav.com/how-to-use-ajax-beginform-in-mvc3-razor/)

# html - 笔记本电脑上的 Chrome；页脚不断移动

> ID：15686946
> 
> 赞同：0
> 
> 时间：2013-03-28T16:18:20.980
> 
> 标签：html, css, google-chrome, footer

我已经在每个浏览器、不同的分辨率和桌面设置等上测​​试了我的网站。

www.teetimelawncare.com

由于某些原因; 一个页脚 DIV 仅在笔记本电脑上的 Chrome 上移动（具有类似分辨率的桌面完美运行）。想要该网站的公司只使用笔记本电脑并且喜欢 chrome....谈论 PITA。他们正在使用最新版本的 chrome。

```
CSS:

@charset "utf-8";
body {
    background-color: #DAFFD1;
    margin: 0;
    padding: 0;
    background-image: url(background2.jpg);
    background-repeat: repeat-x;
    font-size: 16px;
    background-attachment: fixed;
    font-family: "Open Sans";
    -webkit-font-smoothing: subpixel-antialiased;
    z-index: 1;
}

.footer {
    background-color: #336600;
    clear: both;
    float: none;
    padding-top: 10px;
    padding-right: 0;
    padding-bottom: 0px;
    padding-left: 0px;
    height: 330px;
    color: #F7F7F7;
    min-width: 1400px;
    width: 100%;
    max-height: 350px;
    text-align: center;
    display: inline-block;
}

.....4 divs used in footer;

#third {
    width: 180px;
    float: left;
    text-align: left;
    margin-left: 10px;
    display: inline-block;
}

#first {
    width: 300px;
    float: right;
    overflow: visible;
    margin-right: 10px;
}
#second {
    float: right;
    margin-right: 10px;
    margin-left: 10px;
}
#fourth {
    height: 300px;
    width: 400px;
    float: left;
    clear: none;
    padding-left: 10px;
} 
```

相关HTML：

```
 <div class="footer">
 <div id=third>
   <h1>Site Map
   </h1>
     <p1>
     <a href="/index.html">Home page
</a>  <br>
<a href="/estimate.htm">Estimate Form
</a>  <br>  <p1>
<a href="/lawncare.htm">Lawn Care Process
</a> <br>
 <p1>
 <a href="/tree.htm">Tree And Shrub Control
</a> <br>
 <p1><a href="/pestcontrol.htm">Pest Control Services
</a> <br>
 <p1><a href="/landscape.htm">Organic Landscaping </a> <br>
 <p1><a href="/billpay.htm">Secure Online Bill Pay
</a>  <br>
 <p1>
 <a href="/careers.htm">Careers And Team
</a> 
 <p1>
<br>
 <p1>
 <a href="/testimony.htm">Customer Testimony And Lawn Gallery
</a> 
<br>

 </div>
  <div id=first>
    <h1>Tee Time Lawn Care</h1>
   <a href="http://goo.gl/maps/LoE3p"> <p1>23736 W 119th St
Plainfield, IL 60585</p1></a>
<br>
    <p1> (815) 609-6969</p1>
    <br>
    <br>
   <p2> A local lawn and landscaping company with an emphasis on safe,organic lawn care. Lawn care companies like us will treat your lawn and yard like a golf course so give us a call if your need the best lawn in your neighborhood. </p2>
  </div>
 <div id=second> 
  <h1>Lawn care company service in  Illinois (IL)<br>
  Chicago-land suburbs including:</h1>
      Naperville lawn care, Naperville landscaping<br>
      Plainfield lawn care, Plainfield landscaping<br>
      Aurora lawn care, Aurora landscaping<br>
     Channahon lawn care, Channahon landscaping<br>
      Oswego lawn care, Oswego landscaping<br>
      Shorewood lawn care, Shorewood landscaping<br>
      Bolingbrook lawn care, Bolingbrook landscaping<br>  Barrington lawn care, Barrington landscaping<br>
      And nearby  towns and cities for your yard service needs.
</p2>
  </div><div id=fourth>
  <h1> Our lawn care and landscaping services include:</h1>
 <p2>Organic and granular fertilization, aeration and seeding, pest control, tree and shrub maintenance service, soil conditioning, heat guard, summer recovery, root rejuvenation, winterizing, blanket barrier, mole removal, yard cleaning, lawn and yard mowing, commercial landscaping, weed removal, weed prevention, vole removal, and more!
 <br> Please contact us for additional services.</p2>
  </div>
  <!-- end .footer -->

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:22:48.637

在所有查看不同分辨率的浏览器上，“我们的草坪护理和美化服务包括：”部分移动了。

这对我有用：

# 第四 {

```
height: 300px;
clear: none;
padding-left: 10px; 
```

}

# sql - 如何复制表中的行并更新存储过程中后续行的 ID？

> ID：15686949
> 
> 赞同：0
> 
> 时间：2013-03-28T16:18:26.947
> 
> 标签：sql, tsql

我有下表： ![在此处输入图像描述](../Images/9d8b7f837bf346039cd9087b165cb9d3.png)

我正在处理一个程序，该程序接受行 ID eg.5 并将其复制到 ID 为 6 的新行中。通过这样做，我必须将项目 6 的进程 ID 更新为 7、7 到 8、8 到 9 , 9 到 10 和 10 到 11。

这样做的最好方法是什么？

我对 SQL 操作一无所知，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:24:22.323

假设您的 ID 始终是连续的，您需要`UPDATE`在执行 new 之前先查看您的表`INSERT`：

```
UPDATE YourTable
SET ID = ID + 1
WHERE ID >= 6 
```

然后你可以运行你的`INSERT`语句来复制第 5 行。

话虽如此，这样做的目的是什么？重新考虑您的餐桌设计可能更有意义。

*编辑 - 如果您还需要插入*

如果您还需要执行`INSERT`，那么这应该使用`INSERT INTO`：

```
INSERT INTO YourTable 
SELECT 6, NextCol, NextCol, ...
FROM YourTable
WHERE ID = 5 
```

基本上你必须提供每一列。不过，在运行`UPDATE`. 如果您在此字段上有一个身份，那么这不一定有效。取决于您的表结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:09:49.047

问题有点不清楚您是在寻找插入还是更新。对于插入，您可以使用以下方法执行以下操作`cross join`：

[Sql-Fiddle 演示](http://sqlfiddle.com/#!3/03176/7)

```
insert into YourTable (ID, SupplierId, Title,...)
select MyID, SupplierId, Title, ...
from YourTable cross join (values (6),(7),(8),(9),(10),(11)) 
          AS temp(MyId)
where YourTable.ID = 5 
```

如果 ID 是一个自动递增的字段，则从字段列表中删除 ID 和 MyID。

# javascript - JQuery：如何在默认值未更改时禁用表单提交

> ID：15686950
> 
> 赞同：0
> 
> 时间：2013-03-28T16:18:35.153
> 
> 标签：javascript, jquery, forms

如果默认用户名和密码值未更改或留空，我该如何禁用表单提交？如果没有任何更改或填写，我还想显示一条警报消息。这是我的代码：

```
<script>    
$(document).ready(function(){

        $('input[type=text], input[type=password]').focus(function() {

            if(this.value === this.defaultValue)
            {
                 $(this).val("");
            }
        }).blur(function(){
            if($(this).val().length == 0)
            {
                $(this).val(this.defaultValue);
            }
        });
    })
</script>

<form id=""form1" action="process.php" method="post">
<input type="text" name="un" value="Username"/>
<input type="password" name="pw" value="Password"/>
<input type="submit" value="Submit"/>
</form> 
```

请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:26:31.223

将html更改为：

```
 <input type="submit" value="Submit" onclick="return validateForm();"/> 
```

功能验证形式：

```
function validateForm(){
    var defaultValue ='blabla';
    var text = $('input[type=text]').val();
    var pass= $('input[type=password]').val();
    if(text.length==0||text===defaultValue||pass.length==0||pass===defaultValue){
       return false;
       //alert if you want
    }
    else{
       return true;
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:28:43.830

查看实现[jQuery Validate Plugin](http://docs.jquery.com/Plugins/Validation/validate)。

这是一个[工作小提琴](http://jsfiddle.net/adamdehaven/wXWnZ/)。

```
<body>

.... other content ....

<form id="form1" action="process.php" method="post">
    <input type="text" name="un" placeholder="Username" /><br />
    <input type="password" name="pw" placeholder="Password" /><br />
    <button type="submit">Submit</button>
</form>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
</body>

    <script type="text/javascript">
    $('#form1').validate({
        errorElement: 'label',
        rules: {
            un: {
                required: true,
                minlength: 1
            },
            pw: {
                required: true
            }
        },
        messages: {
            un: {
                required: 'Please enter your name.'
            },
            pw: {
                required: 'Please enter your password.',
            }
        },
        submitHandler: function (form) {
            form.submit();
        }
    });
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:39:40.213

这是工作..

```
<form id="form1" action="" method="post">
    <input type="text" name="un" default="Username" value="Username"/>
    <input type="password" name="pw" default="Password" value="Password"/>
    <input type="button" value="Submit" onclick="validateForm()"/>
</form>

<script>

function validateForm(){
            if($('input[type=text], input[type=password]').val()!=$('input[type=text], input[type=password]').attr("default")){
                $("#form1").submit();
            }else{
                return false;
            }
        }

$(document).ready(function(){

        $('input[type=text], input[type=password]').focus(function() {

            if($(this).val() === $(this).attr("default"))
            {
                 $(this).val("");
            }
        }).blur(function(){
            if($(this).val().length == 0)
            {
                $(this).val($(this).attr("default"));
            }
        });
    });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:40:59.767

你去（[工作小提琴](http://jsfiddle.net/9PMqF/)），注意输入上的 ids 用法：

```
<form id="form1" action="process.php" method="post">
    <input type="text" id="un" name="un" value="Username"/>
    <input type="password" id="pw" name="pw" value="Password"/>
    <input type="submit" value="Submit"/>
</form> 
```

使用纯 JS：

```
var form1 = document.getElementById("form1");
form1.onsubmit = function() {
    var un = document.getElementById("un");
    var pw = document.getElementById("pw");
    if (un.value == "" || pw.value == "") {
        return false;
    }
}; 
```

# jquery - 处理非统一jquery列表的函数

> ID：15686951
> 
> 赞同：1
> 
> 时间：2013-03-28T16:18:36.923
> 
> 标签：jquery, performance

我正在构建一个函数，对于具有给定类的每个项目，循环遍历它们中的每一个，寻找最高的，然后将其余的设置为相同的高度。

问题是我只使用了一个类名，并且我正在捕获不同的元素类型，每个元素类型都应该根据它们的元素类型进行唯一处理（即 LIs 与 DIVs）

```
var makeModulesSameHeight = function() {
    var maxHeight,
        $arrAllTargets = $(".makeEqualHeight");
    maxHeight = getMaxHeight($arrAllTargets);
    $arrAllTargets.css("height",maxHeight);
    console.log("max height for every friggin' thing is " + maxHeight);
};

var getMaxHeight = function($arrModules){
    var myHeight,maxHeight = 0;
    $arrModules.each(function(){
        myHeight = $(this).outerHeight();
        maxHeight = (myHeight > maxHeight) ? myHeight : maxHeight;
    });
    return maxHeight;
};

makeModulesSameHeight(); 
```

小提琴--> [http://jsfiddle.net/scott_in_ct/bpKxQ/](http://jsfiddle.net/scott_in_ct/bpKxQ/)

有没有人有根据元素类型进行这项工作的好方法？

我在想一些事情：

```
// initialize empty list to contain unique tag names
// select jquery master list of all items with same class
// for each item in jquery master list
//     - if this tagName is not in list above, add it

// then

// for each item in tagName list
//     - create new array specific to that tagName 
          (not sure how to do this, actually.  I think I'm getting confused 
           with PHP's associative array.)  
          I guess I can always just remember what ordinal number 
            goes with which item.

// for each item in jquery master list
//     - move this item into its appropriate tag array
// for each tag array
//     - set each item in array to max height using previous implementation 
```

这似乎是一种使用多个循环等的笨拙方法。我正在寻找是否有人有更有效的方法，也许使用记忆或一些很酷的方法。:^)

或者

```
// for each item in master array
//    -- look to a common parent and set height according to its descendents
//       (somehow)
// profit! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:47:16.457

我们将得到一个类名为 .makeEqualHeight 的所有元素的数组。该数组将有多种不同的元素类型（即 div、lis 等）。现在我们想找到性能最佳的方法来确定其类型中最高元素的高度。如果有 div 和 li，那么我们要检索两个不同的最大高度。

这里的诀窍是您获取元素数组，并通过该元素数组的过滤子集获取最大高度。

首先，我们必须确定数组中的元素类型。我们通过遍历数组并获取属性标记名来做到这一点。如果数组中不存在标记名，则将其添加到元素类型数组中。

```
$arrAllTargets.each(function () {
   var p = $(this).prop("tagName"); 
    if(arrElTypes.indexOf(p) < 0) {
         arrElTypes.push(p); 

    }
}); 
```

现在我们有了一个元素类型数组，让我们循环遍历该数组。在每次迭代中，我们将按元素类型过滤主元素数组。我们将使用过滤后的列表调用 getMaxHeight 函数。冲洗并重复。

```
for(i = 0; i < arrElTypes.length; i++) {
    maxHeight = getMaxHeight($arrAllTargets.filter(arrElTypes[i]));
    $arrAllTargets.filter(arrElTypes[i]).css("height",maxHeight);
} 
```

[http://jsfiddle.net/bpKxQ/2/](http://jsfiddle.net/bpKxQ/2/)

编辑：高度看起来非常相似，LI 元素为 140px，div 元素为 120px。它们是如此接近，因为您使用的是 outerHeight()。尝试改用 height()，因为您在编辑 css 属性时设置了高度（而不是 outerHeight）。

# c# - 在 ASP.Net MVC 4.0 中获取视图文件夹中的文件

> ID：15686952
> 
> 赞同：6
> 
> 时间：2013-03-28T16:18:37.093
> 
> 标签：c#, asp.net, directory, mappath

我需要在 MVC 4.0 中检索文件夹内的单个视图的名称`views\something`（来自请求），但我不确定如何最好地做到这一点。

我的代码有效，但它有一种“hacky”的感觉，我希望有人可以简化。

我的代码如下所示：

```
 private FileInfo GetNameOfViewToServe()
    {
        var LeftPartOfUri = Request.Url.GetLeftPart(UriPartial.Authority);
        var folder = Request.Url.AbsoluteUri.Replace(LeftPartOfFolderUri,string.Empty);
        var directory = new DirectoryInfo(Server.MapPath(@"~\Views\" + folder));
        return directory.GetFiles().First();
    } 
```

有没有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:45:55.037

[从问题ASP.NET-MVC](https://stackoverflow.com/questions/1592278/asp-net-mvc-how-to-get-the-controller-name-from-an-url)尝试这个解决方案。[如何从 url 获取控制器名称？](https://stackoverflow.com/questions/1592278/asp-net-mvc-how-to-get-the-controller-name-from-an-url)或[获取 ControllerName 和 ActionName 并在母版页中填充 ViewData？](https://stackoverflow.com/questions/1212429/get-controllername-and-actionname-and-populate-the-viewdata-in-master-page)

```
var controller = (string)RouteData.Values["controller"]; 
```

# c++ - 编译Boost时如何更改/检查b2使用的编译器？

> ID：15686972
> 
> 赞同：5
> 
> 时间：2013-03-28T16:19:13.110
> 
> 标签：c++, macos, boost

由于类似这样的问题：

[Mac OS X 和静态提升库 - > std::string 失败](https://stackoverflow.com/questions/4697859/mac-os-x-and-static-boost-libs-stdstring-fail)

即在调用 boost 文件系统目录迭代器构造函数时，我得到一个运行时错误“未分配被释放的指针 *** 在 malloc_error_break 中设置断点进行调试”。我的印象是，如果 boost 和程序是用不同的编译器编译的，就会发生这种情况。

所以我正在尝试使用与我的程序相同的编译器重新编译 boost 库，即 macports gcc (g++-mp-4.8)。根据一些在线说明，我的理解是我编辑 tools/build/v2/user-config.jam，以指定编译器，所以它现在说：

```
# Configure gcc (default version).
# using gcc ;

# Configure specific gcc version, giving alternative name to use.
# using gcc : 4.8 : g++-mp-4.8 ; 
```

我将 user-config.jam 复制到我的主目录，重新运行 bootstrap.sh 并重新运行 b2。但是，我仍然会出现错误（“未分配被释放的指针 *** 在 malloc_error_break 中设置断点以进行调试”）。这是指定用于编译的编译器的正确程序吗？当我运行 b2 时，如何检查以查看实际使用的是哪个编译器 boost？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T08:45:47.263

离开。`user-config.jam`_ `\boost\tools\build\v2`请注意，从 开始的行`#`是注释。您的配置应如下所示（假设 g++ 位于`full/Path/`并命名为`g++-mp4.8`）：

```
 using gcc : macports :
         full/Path/g++-mp4.8 :
  <compileflags>--sysroot=full/path/to/sysroot
  ; 
```

您可能还需要设置`<archiver>`和`<ranlib>`选项以允许 Boost.Build 定位`ar`和`ranlib`.

像这样在行中调用此配置`b2`：

`b2 toolset=gcc-macports`

# opengl - OpenGL中遮挡视场平面的有效渲染

> ID：15686975
> 
> 赞同：0
> 
> 时间：2013-03-28T16:19:18.503
> 
> 标签：opengl, 3d, game-engine

我有类似于 RTS 游戏的模拟器，其中我有一个具有自己视野的代理位置。我想将其可视化。类似于“突击队”之类的游戏。现在，创建像三角锥这样的文件很容易成形的 2d 平面。但我也希望它被障碍物遮挡。这样做的最佳策略是什么？我目前的想法是在渲染圆锥之前对所有几何图形使用 Stencil 测试，但这仍然意味着我必须以某种方式在测试之前标记遮挡区域。我应该做一些PVS吗？它在游戏中是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:26:23.970

这与从点光源投射阴影的问题相同。根据您的具体要求，任何点光阴影技术（例如模板阴影或某种形式的阴影映射）都可以使用。

# ios - 核心数据关系在具有共同属性的实体上具有标题实体

> ID：15686977
> 
> 赞同：1
> 
> 时间：2013-03-28T16:19:24.503
> 
> 标签：ios, xcode, macos, core-data

我有 3 种类型的实体（Job_A、Job_B 和 Job_C），它们中的每一种都有不同的属性。但是，我想创建一个实体（例如“Job”），它将充当链接到我所说的 3 种工作类型的标题表，其中包含三个工作的共同属性。标题实体 (Job) 将是我与其他实体（如工人或付款等）相关联的主要实体。而这个 (Job) 实体将是唯一与我所做的 3 种工作类型相关联的实体，为此 (Job ) 实体将持有/确定需要调用什么类型的工作（A、B、C）或其他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:37:49.683

我相信您正在寻找***Entity Inheritance***。有关该主题的更多信息，请查看[核心数据编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html)。

# javascript - 我可以使用 Javascript 更改超链接和 CSS 吗？

> ID：15686985
> 
> 赞同：-3
> 
> 时间：2013-03-28T16:19:46.880
> 
> 标签：javascript, html, css, web

因此，当用户单击选项卡时，我想将 CSS id 设置为不同的。

我将所有部门作为网站的布局）：

```
<a href="page.html"><div id="something"></div></a> <!-- this is one of my navigation tabs that I'll click on --> 
```

我想修改这个导航选项卡：

```
<a href="page2.html"><div id="something2"></div></a> 
```

我想将部门 id 更改为“something3”（并且“something3”已在我的 CSS 中定义）

另外，我想将链接更改为“page3.html”（已经存在于我的文件夹中）。

所以我的问题是，我如何使用 javascript 更改这两个东西？

我已经有了：

```
function changeTab () {
    if (document.getElementById('something').clicked)
    {
        // change the css and link
    }
} 
```

如果有人能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:23:16.757

你可以这样做：

```
var el = document.getElementById('something')
el.id = 'something3';
el.href = 'newpage.html'; 
```

但是更改`id`元素通常是糟糕设计的原因，最好使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:37:56.367

我建议为您的元素添加一个 id 并使用类来实现 div 的样式。然后您可以执行以下操作：

```
 //html
<a href="page.html" id="link"><div id="something">something</div></a> <!-- this is one 

    window.onload = (function(){
        var link = document.getElementById('link');
        link.onclick = (function(e){
          if(!link.href.indexOf('page2.html')){
         //continue as normal? 
}else{
           e.preventDefault();
           var childDiv = this.children[0];
           childDiv.id = 'something2';
          link.href= '/page3.html';
            //window.location = '/page3.html'; //uncomment this line to navigate to new page or use window.open to open a new page
}
        });
   }); 
```

（虽然我不是在这里更改课程，而是根据您的要求更改 ID）

小提琴[http://jsfiddle.net/nQr4p/](http://jsfiddle.net/nQr4p/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:27:45.157

```
 var targetLink = document.getElementById('yourLinkObjId') // both elements should be givn ids 
  var targetDiv = document.getElementById('yourDivObjId')
  targetLink.href ='page2.html
  targetDiv.id = 'something2' 
```

这些都应该放在您的更改功能中

# google-app-engine - Google App Engine 中的 JDO 唯一字段

> ID：15686986
> 
> 赞同：1
> 
> 时间：2013-03-28T16:19:49.100
> 
> 标签：google-app-engine, google-cloud-datastore, jdo, datanucleus

据此[**，**](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/ctkDe3MakHo) Google App Engine 的 JDO 实现不支持 JDO @Unique 注解。还是这样吗？

例如，我有这个类：

```
@PersistenceCapable
public class User {
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;
    @Persistent
    private String email;
    @Persistent
    private String sessionToken;
    ...
} 
```

显然`key`是独一无二的，但我也想拥有独一无二的`email`and `sessionToken`。如果不支持 @Unique，那么在简单性和性能方面“模拟”这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:41:50.390

与此相关的[问题](http://code.google.com/p/datanucleus-appengine/issues/detail?id=22&colspec=ID%20Stars%20Type%20Status%20Priority%20FoundIn%20TargetRelease%20Owner%20Summary)再清楚不过了。JDO 不是问题....问题是底层 GAE/Datastore 数据库不支持它（如果数据存储不支持它，那么 API 就无法神奇地在数据存储中强加某些东西）。该问题也提供了解决方法

# ios - 访问 CCMenuItemImage 块的“发件人”时崩溃

> ID：15686994
> 
> 赞同：0
> 
> 时间：2013-03-28T16:20:04.117
> 
> 标签：ios, cocos2d-iphone

我在我的代码中使用 CCMenuItemImage 并且我想在单击菜单项时访问它的位置，但访问块的发件人变量会导致崩溃。

以下是代码

```
CCMenuItemImage *menuItem = [CCMenuItemImage itemFromNormalSprite:image selectedSprite:selimage block:^(id sender) {
            NSLog(@"Description = %@",[(CCNode*)sender description]);
        }]; 
```

来自调试窗口的图像

![在此处输入图像描述](../Images/e50952ab282af56b1ee3f9171acdaea0.png)

![在此处输入图像描述](../Images/3f98bc98a14881f11149a7a570e30d31.png)

# json - 来自 REST API 的 JSON 响应中是否应该包含空值？

> ID：15686995
> 
> 赞同：64
> 
> 时间：2013-03-28T16:20:08.750
> 
> 标签：json, api, rest

我正在设计和开发 RESTful API。我对 API 采取了一种务实的、面向资源的方法（面向资源、统一接口、可寻址性，但没有真正的 HATEOAS）。我不确定的一点是如何处理对象中的空值。

**我应该在 API 响应中包含具有空值的字段吗？**

例子：

```
{
    "fieldA": "AAA",
    "fieldB": null
} 
```

**或者，如果系统没有这些字段的数据，我应该完全忽略这些字段吗？**

例子：

```
{
    "fieldA": "AAA"
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-28T16:27:34.367

[最近在API-Craft](https://groups.google.com/forum/?fromgroups=#!topic/api-craft/MrEixUwOCWA)上有一个关于这个的讨论。*普遍的共识是，省略*一个值与包含一个空值之间可能存在语义差异。

如果没有为您的特定用例获得语义价值，那么我会说看看您的 API 的目标消费者，并考虑省略该值是否会给他们带来问题。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-05-21T05:54:23.297

没有明确的赢家。因为没有，客户在技术上不应该依赖任何关于这个的约定，客户不应该期望任何一种形状。

*   **删除空值以减少带宽使用**通常是不合理的（除非空字段的数量很大并且带宽明显受到影响）。
*   **删除空值以使人类读者更容易看到实际值**通常是不合理的，API 不是人机界面
*   **保留空值以让人类读者更容易看到文档结构**通常是不合理的，API 不是人机界面，API 响应不是 API 文档
*   **保留 null 值以允许脏客户端以特定方式解析 json**通常是不合理的，客户端应该被干净地编写为宽容的读者
*   **仅在相应的创建方法（POST/PUT）需要显式传递 null 时才保留 null 值**是有意义的，但通常难以实现
*   **当每个文档都有自己的客户端时，在创建期间保持输出与请求相同**可能是有意义的，但通常很难实现
*   需要考虑的一个特殊情况是由类似`?fields=foo,bar`为所有其他字段返回空值的情况触发的部分响应似乎有点违反直觉