# StackOverflow 问答 14133000-14133999

# mysql - 是否有将多对多链接表连接到单个记录中的查询？

> ID：14133002
> 
> 赞同：2
> 
> 时间：2013-01-03T04:19:47.223
> 
> 标签：mysql, sql

我在两个表之间有一个标准的多对多关系，使用第三个链接表链接。有没有办法通过查询将链接的 ID 加入一条记录？

我意识到我可以处理一个典型的连接并用它构建一个新列表，只是想知道它是否可以通过查询来完成。例子：

```
EventID | EventName | EventTypeIDs

1 | Party | 1,2,3

Events
+-------------+-------------+
| Field       | Type        |
+-------------+-------------+
| EventID     | INT         |
| EventName   | varchar(45) |
+-------------+-------------+

EventTypes
+-------------+-------------+
| Field       | Type        |
+-------------+-------------+
| id          | INT         |
| value       | varchar(25) |
+-------------+-------------+

EventTypeLink
+-------------+-------------+
| Field       | Type        |
+-------------+-------------+
| id          | INT         |
| EventID     | INT         |
| EventTypeID | INT         |
+-------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T04:23:34.407

就在这里。[**`GROUP_CONCAT()`**](http://dev.mysql.com/doc/refman/5.0/en//group-by-functions.html#function_group-concat) 像这样使用：

```
SELECT
  e.EventId,
  e.EventName,
  GROUP_CONCAT(t.Id SEPARATOR ',') AS EventTypeIDs
FROM Events e
INNER JOIN EventTypeLink l ON e.EventId = l.EventId
INNER JOIN EventTypes    t ON l.EventTypeId = t.Id
GROUP BY   e.EventId,  
           e.EventName; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/01e36/3)

这会给你：

```
| EVENTID | EVENTNAME | EVENTTYPEIDS |
--------------------------------------
|       1 |     Party |        1,2,3 | 
```

**请注意：**如果您需要包含那些没有类型的事件，请改用 a `LEFT JOIN`，`IFNULL`如下所示：

```
SELECT
  e.EventId,
  e.EventName,
  GROUP_CONCAT(IFNULL(t.Id,0) SEPARATOR ',') AS EventTypeIDs
FROM Events e
LEFT JOIN EventTypeLink l ON e.EventId = l.EventId
LEFT JOIN EventTypes    t ON l.EventTypeId = t.Id
GROUP BY   e.EventId,  
           e.EventName; 
```

[没有类型的人的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/907d8/2)

这会给你类似的东西：

```
| EVENTID |        EVENTNAME | EVENTTYPEIDS |
---------------------------------------------
|       1 |            Party |        3,2,1 |
|       2 | EventWithNoTypes |            0 | 
```

# iphone - 根据 iPhone 屏幕尺寸均匀分布按钮间距

> ID：14133007
> 
> 赞同：0
> 
> 时间：2013-01-03T04:20:14.727
> 
> 标签：iphone, xcode, layout, screen, placement

当我在 iPhone 5 和 4 屏幕尺寸之间切换时，我的按钮布局（间距）出现问题。

在 5 上，它看起来正是我想要的样子

但是，在 4 上它会聚在一起。有谁知道我该如何解决这个问题？我一直在搞乱视图中的设置，我不知道如何解决它。！

编辑：对不起，我没有使用任何代码。我只是使用界面生成器将它们拖放到我想要的位置。我对同时使用 xcode 和应用程序开发还很陌生，所以我不确定最好的方法是什么。

**我启用了自动布局。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:29:01.703

您必须使用约束进行自动布局。您可以参考此链接以了解约束 [约束](http://www.techotopia.com/index.php/Implementing_iPad_iOS_6_Auto_Layout_Constraints_in_Code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:51:09.270

您可以在 Xib 中使用自动布局，或者如果手动执行此操作

```
float height = [UIScreen mainScreen].bounds.size.height;
if (height==568) {
    //give frames according to iPhone 5
}
else
{
    //give frames according to iPhone 4
} 
```

# cordova - 在 Phonegap 中集成 LinkedIn、Facebook 和 Google+

> ID：14133012
> 
> 赞同：1
> 
> 时间：2013-01-03T04:20:29.640
> 
> 标签：cordova

是他们在 phoneGap 中实现了 Facebook、LinkedIn 和 Google+ 的任何人。如果有人做过，任何人都可以分享它的代码或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:16:00.090

**您是否在iOS**上使用 Phonegap，您可以使用以下插件：

*   [Facebook Connect 插件](https://github.com/davejohnson/phonegap-plugin-facebook-connect/)（[视频教程](http://www.youtube.com/watch?v=nVxFGiIoPgk)）
*   [Twitter 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/Twitter)（适用于 iOS 5 及更高版本）
*   对于 Linkedin 以及 Twitter 和 Facebook，您可以使用[ShareKit 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ShareKitPlugin)
*   谷歌+？？？

如果您在**Android**上使用 Phonegap，您可以使用以下插件：

*   [Facebook Connect 插件](https://github.com/davejohnson/phonegap-plugin-facebook-connect/)（[视频教程](http://www.youtube.com/watch?v=mlpBgWiel2w)）
*   [推特插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Twitter)
*   领英？？？
*   谷歌+？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T07:42:57.193

谷歌+ [https://github.com/EddyVerbruggen/cordova-plugin-googleplus](https://github.com/EddyVerbruggen/cordova-plugin-googleplus)

在 Android 上登录时的示例屏幕截图： ![在此处输入图像描述](../Images/bf4ae5d0393faddd933109ee34f8d483.png)

# iphone - 有没有办法获取当前打开的应用程序的 Bundle ID

> ID：14133014
> 
> 赞同：2
> 
> 时间：2013-01-03T04:21:26.260
> 
> 标签：iphone, ios5, theos

我正在使用 Theos 开发越狱调整，我需要获取当前打开的应用程序的 Bundle ID。我正在修改`SBBannerView.h`哪个是 SpringBoard 标头。我试过使用：

```
[[NSBundle mainBundle] bundleIdentifier] 
```

并且：

```
[NSBundle mainBundle].bundleIdentifier 
```

这两者都应该给出应用程序的包标识符，但是因为我正在修改 iOS 横幅通知，我认为它总是返回`com.apple.springboard`，因为那是调用通知的对象

如何获取屏幕上显示的当前应用程序的应用程序包 ID？

例如，如果我打开 Settings.app，我会挂钩或调用什么来获取捆绑 ID`com.apple.Preferences`

对不起，如果我没有解释得很好

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:14:14.123

我想通了，对于其他试图实现这一点的人：

```
SBApplication *frontApp = [(SpringBoard*)[UIApplication sharedApplication] _accessibilityFrontMostApplication];
NSString *currentAppDisplayID = [frontApp displayIdentifier]; 
```

# liferay - Liferay 中管理站点的权限

> ID：14133021
> 
> 赞同：0
> 
> 时间：2013-01-03T04:22:27.393
> 
> 标签：liferay, liferay-6

场景：用户 X 创建组织的私有站点并将用户 Y 分配给该组织。我想让 User-X 无法更改分配给 User-Y 的站点的任何设置（即，只有 User-Y 应该能够更改站点的设置）

基本上，我必须禁用管理员（即 User-X）才能更改分配给另一个用户的站点的设置。

那么，在 Liferay 中有没有办法做到这一点？

# opengl - wxWidgets OpenGL 纹理

> ID：14133022
> 
> 赞同：0
> 
> 时间：2013-01-03T04:22:28.887
> 
> 标签：opengl, wxwidgets, textures

我最近一直在学习 wxWidgets（版本 2.9.4），并且在让纹理在 OpenGL 窗口中正常工作时遇到了麻烦（但是 glColor4f 工作正常）。

我尝试按照 wxWidget 的教程进行操作，包括从 wxImage 加载纹理。我还尝试使用 stbi_image 加载纹理，但无论我做什么，纹理始终保持白色。这是我正在使用的代码：

```
wxImage* img = new wxImage(wxT("grass.png"));

GLuint texture;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

GLubyte *bitmapData=img->GetData();
GLubyte *alphaData=img->GetAlpha();

int bytesPerPixel = img->HasAlpha() ?  4 : 3;
int imageWidth = img->GetWidth();
int imageHeight = img->GetHeight();

int imageSize = imageWidth * imageHeight * bytesPerPixel;
GLubyte *imageData=new GLubyte[imageSize];

int rev_val=imageHeight-1;

for(int y=0; y<imageHeight; y++)
{
    for(int x=0; x<imageWidth; x++)
    {
        imageData[(x+y*imageWidth)*bytesPerPixel+0]=
                bitmapData[( x+(rev_val-y)*imageWidth)*3];

        imageData[(x+y*imageWidth)*bytesPerPixel+1]=
                bitmapData[( x+(rev_val-y)*imageWidth)*3 + 1];

        imageData[(x+y*imageWidth)*bytesPerPixel+2]=
                bitmapData[( x+(rev_val-y)*imageWidth)*3 + 2];

        if(bytesPerPixel==4) imageData[(x+y*imageWidth)*bytesPerPixel+3]=
                alphaData[ x+(rev_val-y)*imageWidth ];
    }
}

glTexImage2D(GL_TEXTURE_2D,
                0,
                bytesPerPixel,
                imageWidth,
                imageHeight,
                0,
                img->HasAlpha() ?  GL_RGBA : GL_RGB,
                GL_UNSIGNED_BYTE,
                imageData);

delete[] imageData;
wxDELETE(img);

return texture; 
```

这是我在画布类中使用的参数：

```
int args[] = { WX_GL_RGBA, WX_GL_DOUBLEBUFFER, WX_GL_DEPTH_SIZE, 16, 0 }; 
```

我用谷歌搜索了这个问题并注意到其他人也有这个问题，但除了切换到 wxWidgets 2.8 之外，我似乎找不到任何真正的解决方案，它在 VS2010 中无法正确构建（我使用的） .

如果需要，我可以提供其他代码，我不确定这个问题的根源是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:13:15.797

我通常会按照以下方式做一些事情：

```
// define a specialisation of wxGLCanvas

class cMyCanvas: public wxGLCanvas
{
 ...

// in frame constructor, call canvas constructor

cMyCanvas * myCanvas = new cMyCanvas( this );

// show the frame

Show();

// set context current

myCanvas->SetCurrent( context );

// initialize canvas

myCanvas-> initGL(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:41:26.793

好吧，我设法找到了问题的根源，但是我真的找不到一个干净的解决方案。原来我不得不调用 wxGLCanvas::SetCurrent(*context); 在尝试加载任何纹理之前，但 wxGLCanvas::SetCurrent(*context); 只能在显示窗口时调用（即不在我加载纹理的构造函数中）。所以到目前为止我的解决方案是：

```
static bool initialInit = false;
if(!initialInit) {
    wxGLCanvas::SetCurrent(*context);
    initGL();
    initialInit = true;
} 
```

在我的渲染循环中调用，initGL() 完成所有 GL 设置并加载我需要的纹理。这可以正常工作，但似乎是一个可怕的解决方案。

# java - 如何使用驱动器 api java 从谷歌驱动器下载文件？

> ID：14133026
> 
> 赞同：8
> 
> 时间：2013-01-03T04:22:46.350
> 
> 标签：java, google-drive-api

我试过谷歌驱动器的一些功能，但我无法从驱动器下载文件。

这是我使用的代码

```
private static InputStream downloadFile(Drive service, File file) {
    if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0) {
      try {
        HttpResponse resp =
            service.getRequestFactory().buildGetRequest(new GenericUrl(file.getDownloadUrl()))
                .execute();
        return resp.getContent();
      } catch (IOException e) {
        // An error occurred.
        e.printStackTrace();
        return null;
      }
    } else {
      // The file doesn't have any content stored on Drive.
      return null;
    }
  } 
```

当我运行脚本时，它显示`file.getDownloadUrl()`为 NULL。

我在这里错过了什么？

现在它在我调用下载函数之前添加以下行后执行

```
File file1 = service.files().get(fileid).execute();
downloadFile(service,file1); 
```

现在的问题是如何在我从脚本中得到的“响应”的帮助下下载文件....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:11:33.893

Google Docs 原生格式的文档没有`downloadUrl`字段，您可以使用`exportLinks`集合导出它们：

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-04T18:17:02.923

这是我为从谷歌驱动器下载文件而创建的，希望对您有所帮助。

[请参考这个文档](https://developers.google.com/drive/v3/web/quickstart/java)

```
/** Application name. */
private static final String APPLICATION_NAME = "Drive API Java Quickstart";

/** Directory to store user credentials for this application. */
private static final java.io.File DATA_STORE_DIR = new java.io.File(
        System.getProperty("user.home"),
        ".credentials/n/drive-java-quickstart");

/** Global instance of the {@link FileDataStoreFactory}. */
private static FileDataStoreFactory DATA_STORE_FACTORY;

/** Global instance of the JSON factory. */
private static final JsonFactory JSON_FACTORY = JacksonFactory
        .getDefaultInstance();

/** Global instance of the HTTP transport. */
private static HttpTransport HTTP_TRANSPORT;

/**
 * Global instance of the scopes required by this quickstart.
 * 
 * If modifying these scopes, delete your previously saved credentials at
 * ~/.credentials/drive-java-quickstart
 */
private static final java.util.Collection<String> SCOPES = DriveScopes
        .all();

static {
    try {
        HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();
        DATA_STORE_FACTORY = new FileDataStoreFactory(DATA_STORE_DIR);
    } catch (Throwable t) {
        t.printStackTrace();
        System.exit(1);
    }
}

/**
 * Creates an authorized Credential object.
 * 
 * @return an authorized Credential object.
 * @throws IOException
 */
public static Credential authorize() throws IOException {
    // Load client secrets.
    InputStream in = Quickstart.class
            .getResourceAsStream("/client_secret.json");
    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(
            JSON_FACTORY, new InputStreamReader(in));

    // Build flow and trigger user authorization request.
    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)
            .setDataStoreFactory(DATA_STORE_FACTORY)
            .setAccessType("offline").build();
    Credential credential = new AuthorizationCodeInstalledApp(flow,
            new LocalServerReceiver()).authorize("user");
    System.out.println("Credentials saved to "
            + DATA_STORE_DIR.getAbsolutePath());
    return credential;
}

/**
 * Build and return an authorized Drive client service.
 * 
 * @return an authorized Drive client service
 * @throws IOException
 */
public static Drive getDriveService() throws IOException {
    Credential credential = authorize();
    return new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
            .setApplicationName(APPLICATION_NAME).build();
}

public static void main(String[] args) throws IOException {
    // Build a new authorized API client service.
    Drive service = getDriveService();
    // Print the names and IDs for up to 10 files.
    FileList result = service.files().list().execute();
    List<File> files = result.getFiles();
    if (files == null || files.size() == 0) {
        System.out.println("No files found.");
    } else {

        for (File file : files) {

            String fname = file.getName();
            String ex = fname.substring(fname.lastIndexOf(".") + 1);

            try {
                Files f = service.files();
                HttpResponse httpResponse = null;
                if (ex.equalsIgnoreCase("xlsx")) {
                    httpResponse = f
                            .export(file.getId(),
                                    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
                            .executeMedia();

                } else if (ex.equalsIgnoreCase("docx")) {
                    httpResponse = f
                            .export(file.getId(),
                                    "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
                            .executeMedia();
                } else if (ex.equalsIgnoreCase("pptx")) {
                    httpResponse = f
                            .export(file.getId(),
                                    "application/vnd.openxmlformats-officedocument.presentationml.presentation")
                            .executeMedia();

                } else if (ex.equalsIgnoreCase("pdf")
                        || ex.equalsIgnoreCase("jpg")
                        || ex.equalsIgnoreCase("png")) {

                    Get get = f.get(file.getId());
                    httpResponse = get.executeMedia();

                }
                if (null != httpResponse) {
                    InputStream instream = httpResponse.getContent();
                    FileOutputStream output = new FileOutputStream(
                            file.getName());
                    try {
                        int l;
                        byte[] tmp = new byte[2048];
                        while ((l = instream.read(tmp)) != -1) {
                            output.write(tmp, 0, l);
                        }
                    } finally {
                        output.close();
                        instream.close();
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

# android - 如何在 Listview 中获取上下文菜单以在 android 中删除和显示记录？

> ID：14133032
> 
> 赞同：1
> 
> 时间：2013-01-03T04:23:30.807
> 
> 标签：android, sqlite, contextmenu

我已经在“ListActivity.java”中使用了上下文菜单，但是上下文菜单没有打开并弹出。我首先在上下文菜单中添加两个选项用于显示记录，另一个用于删除记录。当我长按 ListView 记录时，上下文菜单打开，我选择“显示”，然后特定记录显示在其他活动上。在这个活动中，我创建了表单。记录在此表单域中进行调整。那我该怎么做？？？

```
**My ListActivity.java is here:**

public class ListActivity extends Activity {
    ListView lv;
    ArrayList<String> items = new ArrayList<String>();
    ArrayList<String> items_id = new ArrayList<String>();
    dbhelper dh;
    SQLiteDatabase db;
    int index_id;
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        Button btn;
        btn = (Button)findViewById(R.id.newProjectlist);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent intent= new Intent(ListActivity.this,NewProject.class);
                startActivity(intent);
            }
        });  
        lv = (ListView)findViewById(R.id.projectListView);
        setUpList();
        dh = new dbhelper(this);

        Cursor c = getAllData();
        showAllData(c);  
        registerForContextMenu(lv);      
    }

  @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        if(v.getId() == R.id.projectList){
            menu.setHeaderIcon(R.drawable.ic_launcher);
            menu.setHeaderTitle("Record List");
            menu.add(0,1,menu.NONE,"Delete Record");
            menu.add(0,2,menu.NONE,"Show Record");
        }
    }

    @Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            int poistion = menuinfo.position;
            String id_string = items_id.get(poistion);
            long id = Long.valueOf(id_string);

            //menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            //index_id = menuinfo.position;
            deleteUserData(index_id);
            items_id.remove(poistion);
        }
        if(itemId == 2){
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            editUserData(index_id);
        }
    return super.onContextItemSelected(item);
}

    private void editUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
        intEdit.putExtra("EditID", user_id);
        startActivityForResult(intEdit, 1);
    }

    private void deleteUserData(int indexid) {
        // TODO Auto-generated method stub
//      String user_id = items_id.get(indexid);
        //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
        db = dh.getWritableDatabase();
        db.delete("timer","_ID" + "=" + indexid, null);
        finish();
//      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
    }

    private void showAllData(Cursor c) {
        // TODO Auto-generated method stub
        while(c.moveToNext())
        {
            int id = c.getInt(0);
            String name = c.getString(1);
            String timerpoint1 = c.getString(2);
            String timerpoint2 = c.getString(3);
            String timerpoint3 = c.getString(4);
            String servicetime1 = c.getString(5);
            String servicetime2 = c.getString(6);
            items.add("" + name);
            items_id.add(""+id);
        }
        setUpList();
    }

    private Cursor getAllData() {
        // TODO Auto-generated method stub
        db = dh.getReadableDatabase();
        //String sortorder = dh.Name + "DESC";
    //  String query ="SELECT DISTINCT name FROM timer";
    //  Cursor c = db.rawQuery(query, null);
    //   if (c != null) {
    //            c.moveToFirst();
    //        }
//      String[] cols = new String[] {"name"};
        Cursor c = db.query(true, "timer",null,null,null,null,null,null,null);   
        //Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
        startManagingCursor(c);
    //  Cursor c=db.rawQuery("select distinct Name from timer;",null);
        return c;   
        }     
    private void setUpList() {
        // TODO Auto-generated method stub
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
    }   

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:33:27.803

您应该能够删除一行：

```
if(itemId == 1)
{
    AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
    deleteUserData(menuInfo.id);
    items_id.remove(menuInfo.position);
} 
```

如果您使用 CursorAdapter 将数据库信息绑定到您不需要调用的 ListView `remove()`，它将通过内置的 DataObserver 自动完成。

# javascript - Youtube API Android Webview 无法正常工作

> ID：14133035
> 
> 赞同：0
> 
> 时间：2013-01-03T04:24:33.803
> 
> 标签：javascript, android, youtube-api, android-webview, youtube-javascript-api

不幸的是，我在这个网站上找不到任何解决方案，在其他方面，我可能刚刚看到或使用过它，但没有正常工作。这个小伙子需要你们的帮助。似乎真的无法让它工作。

我有这个 Android 应用程序，它在大多数显示 youtube 频道播放列表的页面中使用 Youtube-Api。

像这样（**播放列表 Youtube-Api 查询**）

```
<script type="text/javascript">
$(function () {   
var playlist = "https://gdata.youtube.com/feeds/api/users/******/playlists?v=2&alt=jsonc";
    $.getJSON(playlist,  function(response) {
      $.each(response.data.items, function(index, item) {
        $('#r_playlist').append('<div id="pl_title" class="playlists topBdr btmBdr" onclick=navlist_video("'+ item.id +'");><div class="pl_lb">' + item.title + '</div></div>');
      }); 
        $('.playlists').first().removeClass('topBdr');
        $('.playlists').last().removeClass('btmBdr');
    }); 
});
</script> 
```

这是我的应用程序的布局（**主页**和**播放列表页面**）

主页显示使用 youtube 查询的精选视频，查询示例如下所示。至于播放列表查询，如上所示。

```
https://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&orderby=viewCount&max-results=5&q=xxxxxx 
```

![在此处输入图像描述](../Images/45f0ca12ba11cdc64879ba73b3307ce2.png)

所以我的问题是，导航到导航菜单**Home -> Playlist -> Home**后，它显示了我遇到的问题。所以就像，当我打开 Android 应用程序时，它从主页开始，然后我导航到播放列表页面，它也可以工作。但是**一旦我再次导航到主页**，它不再显示精选视频，我**导航到播放列表页面**，它不再显示播放列表。在我清除android应用程序中的数据并再次运行应用程序后，它重复错误。

![在此处输入图像描述](../Images/e7b6cd620b0ecea7e4a95a048d9a5217.png)

这是我的安卓代码。

```
package xxxxxx.xx;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView mWebView = null;
        mWebView = (WebView) findViewById(R.id.webtest);
        mWebView.getSettings().setPluginState(PluginState.ON);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.setWebViewClient(new CustomWebViewClient());
        try {
            mWebView.loadUrl("http://xxxxxxxx.com/android/index.html"); 
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public class CustomWebViewClient extends WebViewClient
    {
            @Override
            public void onPageFinished(WebView view, String url) {
                if(url.endsWith("request")){
                   String redirectUrl = "http://xxxxxx.com/xxxxx/index.html";
                   view.loadUrl(redirectUrl);
                   return;
               } else if (url.startsWith("https://m.facebook.com/dialog/permissions.request")) {
                   String redirectUrl = "http://xxxxxxx.com/android/index.html";
                   view.loadUrl(redirectUrl);
                   return;                 
               }
                super.onPageFinished(view, url);
            }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        WebView mWebView = null;
        mWebView = (WebView) findViewById(R.id.webtest);
        if(event.getAction() == KeyEvent.ACTION_DOWN){
            switch(keyCode)
            {
            case KeyEvent.KEYCODE_BACK:
                if(mWebView.canGoBack() == true){
                    finish();
                    //mWebView.goBack();
                }else{
                    finish();
                }
                return true;
            }

        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

然后我在播放列表中的 Javascript 代码：

```
<div id="r_playlist"></div>
<script type="text/javascript">
$(function () {   
var playlist = "https://gdata.youtube.com/feeds/api/users/xxxxxxx/playlists?v=2&alt=jsonc";
    $.getJSON(playlist,  function(response) {
      $.each(response.data.items, function(index, item) {
        $('#r_playlist').append('<div id="pl_title" class="playlists topBdr btmBdr" onclick=navlist_video("'+ item.id +'");><div class="pl_lb">' + item.title + '</div></div>');
      }); 
        $('.playlists').first().removeClass('topBdr');
        $('.playlists').last().removeClass('btmBdr');
    }); 
});
</script> 
```

关于如何解决这个问题的任何想法？如果有人帮助我会很高兴，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:14:49.013

终于做到了，经过一番试验，我意识到在返回并打开和卸载应用程序后，由于某种原因，当存储了缓存时，它就不起作用了。所以我所做的是`view.clearCache(true);`在页面加载之后放置的。

```
public class CustomWebViewClient extends WebViewClient
{
        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            view.clearCache(true);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:23:17.743

youtube 视频有不同的格式，andriod 只支持某些格式，如 3gp、mp4 等...，有一种解决方案，请从 google play 免费安装 MXPlayer 或 VPlayer，现在您可以直接使用 Intent 将视频播放到 MXPlayer选择者，希望这对你有帮助。

# c++ - 在 C++ (Win32) 中获取 Windows 应用程序屏幕截图的快速方法？

> ID：14133036
> 
> 赞同：4
> 
> 时间：2013-01-03T04:24:33.953
> 
> 标签：c++, windows, winapi, directx, gdi

当我的应用程序需要获取其他 Windows 应用程序的屏幕截图时，我遇到了问题。

我正在使用 win32api 'PrintWindow' 中的函数，但这并不好用。它很慢，并且其他应用程序窗口中的某些组件显示为黑色矩形。

Devrexster 有一个名为 DExpose2 的应用程序（Mac-OS 风格的任务切换器）。它可以非常快地获取其他应用程序的截图，该死的快，甚至可以连续获取这些截图。

我猜它是使用 Direct3D 来获取应用程序的屏幕截图，而不是像我使用的那样使用 GDI。是否可以为此目的使用 Direct3D？如果可能的话，这应该是最整洁的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:24:55.373

Vista+ 的答案在[另一个答案](https://stackoverflow.com/questions/1962142/take-screenshot-of-directx-full-screen-application)中：窥探 DirectX 的缓冲区。

DExpose2 可能不会“获取”屏幕截图。即它不会将它们从视频卡传输到 RAM。这是一个缓慢的操作，并且必须随后将另一个慢速复制回视频卡。我希望它只在显卡端应用一些缩放和移动变换，没有像素或纹素穿过 PCI-e 总线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T05:07:05.953

您可以使用 bitblt 获取屏幕截图。这是为整个桌面获取它的示例：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd183402(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183402(v=vs.85).aspx)

您可能需要调整 X、Y 和大小参数，以便获得一个子集，仅对应于您关心的窗口。

# p2p - 如何将短信浏览器发送到 webrtc 中的浏览器？

> ID：14133037
> 
> 赞同：7
> 
> 时间：2013-01-03T04:24:52.907
> 
> 标签：p2p, webrtc

我想直接向浏览器发送短信。到目前为止，我只看到网络上的音频/视频传输演示。这些是我的疑问：

*   我们不能仅通过使用 PeerConnection API 来解决这个问题吗？
*   或者是否需要新的 DataChannel API 来实现这一点？
*   如果是这样，在哪些浏览器/浏览器中实现了 dataChannel API？

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:18:12.807

您的问题的答案是：是的 - 您需要使用 dataChannel API

它不是跨浏览器，因为他们仍在实现它——我可能会将 socket.io 与 node atm 一起用于跨浏览器应用程序。

一旦数据通道完成，这将是惊人的！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T15:37:11.763

您需要使用 PeerConnection API 的 DataChannel 部分。这将在 Firefox 18 及更高版本中运行，并且很快就会出现在 Chrome 中。

了解如何执行此操作的一个很好的起点是[https://hacks.mozilla.org/2012/11/progress-update-on-webrtc-for-firefox-on-desktop/和](https://hacks.mozilla.org/2012/11/progress-update-on-webrtc-for-firefox-on-desktop/)[http](http://dev.w3.org/2011/webrtc/editor/webrtc.html)上的最新规范草案[://dev.w3.org/2011/webrtc/editor/webrtc.html](http://dev.w3.org/2011/webrtc/editor/webrtc.html)！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T21:10:42.970

有一些 JavaScript 库用于使用 WebRTC 数据通道 API 发送文本数据：[PeerJS](http://peerjs.com)、[webRTC.io](https://github.com/webRTC/webRTC.io)、[DataChannel.io](https://github.com/marcolanaro/DataChannel.IO)、[BoneValue](https://github.com/theninj4/bonevalue) ...（如果您知道，请添加更多）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T01:11:03.580

如果您只关心文本消息，为什么不使用支持范围更广的 WebSocket API 呢？

# java - 在 r 或其他软件中查找草图图像的坐标（例如扫描为照片格式）

> ID：14133040
> 
> 赞同：8
> 
> 时间：2013-01-03T04:25:43.007
> 
> 标签：java, r, matlab, image-processing, map

我想用多边形重绘 R 中的任何草图。但我需要一项艰苦的工作来找到坐标（每个点的 X 或 Y 值）。

![在此处输入图像描述](../Images/219cc3a10643f3a81149921d52446420.png)

是否有任何 R 包或其他软件可以从图像中找到坐标？因此，输出将是具有大量点 (x,y) 的数据，以便可以重新创建图形。

编辑：........

以下是示例：

(1) 地图轮廓举例：

![在此处输入图像描述](../Images/879021d0d33a27b2c1099c44783c2a99.png)

第二个例子：

(2) 物体形状示例：

![在此处输入图像描述](../Images/12403592651da10b2c3d40ca48b1b129.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T18:03:38.270

您可以使用[WebplotDigitizer](http://arohatgi.info/WebPlotDigitizer/app/)应用程序，也可以在线使用。这是您的示例的快照：

![在此处输入图像描述](../Images/7fccfba24938862652c75bd1a92155cd.png)

这是输出坐标：

```
2   202
4   205
5   200
6   206
8   199
8   207
10  197
10  208
12  210
13  195
14  211
16  193
16  212
19  191
18  213
20  215
21  189
22  216
24  218
24  187
26  219
27  185
27  222
30  184
29  223
30  225
32  227
32  182
33  230
35  234
35  181
36  237
38  179
38  240
37  237
40  178
40  241
41  244
43  176
43  244
45  246
46  174
48  248
48  250
49  172
49  253
49  257
50  261
51  263
51  169
53  266
54  167
55  268
56  164
57  270
57  416
57  420
58  422
58  453
59  161
59  273
59  432
59  435
59  438
59  441
59  443
59  446
59  449
59  451
59  457
59  459
59  276
60  279
60  413
60  462
60  428
60  423
61  425
61  158
61  282
62  401
61  405
60  441
60  445
62  285
62  395
62  398
62  409
62  412
62  464
63  155
62  428
63  466
63  391
64  287
65  152
63  394
65  389
65  467
66  308
67  149
67  286
67  303
67  306
67  311
68  300
68  387
68  468
69  146
69  314
69  297
70  285
71  143
70  385
71  469
71  295
72  314
73  140
72  286
73  383
73  469
74  294
74  137
74  313
75  286
76  135
76  383
76  469
77  293
77  311
78  132
78  286
79  129
79  382
79  469
79  292
80  308
80  322
80  326
81  126
81  285
81  319
80  129
82  382
82  469
82  291
82  316
83  123
82  306
82  325
83  283
84  120
84  313
84  382
84  469
85  290
85  303
85  325
86  117
86  299
86  281
85  120
86  311
87  114
87  296
87  383
87  469
87  289
88  324
88  336
89  111
89  279
89  310
89  114
90  294
90  332
89  383
90  468
90  287
91  107
91  323
91  326
91  329
90  337
90  110
92  277
92  104
92  306
92  310
92  294
92  312
92  332
92  383
93  468
93  285
93  297
93  300
93  302
92  328
94  338
94  100
94  275
95  97
94  103
94  305
95  384
95  467
96  94
96  282
96  338
97  91
97  274
98  88
98  384
98  466
99  85
98  280
99  338
99  82
100 273
101 79
101 384
101 465
101 277
102 338
102 75
102 272
104 72
103 384
103 463
104 275
104 338
105 69
106 384
106 462
107 65
107 338
106 68
108 62
109 384
109 461
110 59
110 338
110 62
112 56
112 384
112 460
113 338
114 52
113 55
114 384
115 459
115 49
115 337
116 46
117 43
117 384
117 458
118 40
118 337
119 36
120 384
120 457
120 33
121 337
122 30
123 384
123 457
124 27
123 337
125 384
125 457
126 25
126 337
128 384
128 457
128 23
129 337
131 384
131 457
131 21
132 337
134 384
133 458
134 20
134 337
136 384
136 459
137 19
137 337
139 384
139 460
139 18
140 337
142 384
142 461
142 18
143 337
144 384
145 462
145 19
145 337
147 384
147 462
147 20
148 338
150 22
150 384
150 463
151 338
152 23
153 384
153 463
154 25
154 338
155 384
155 463
156 25
156 338
158 384
158 463
159 26
159 338
161 384
161 463
162 26
162 338
164 384
164 463
164 367
164 25
165 338
165 372
166 375
165 378
165 381
166 384
167 463
167 366
166 368
167 25
167 338
169 462
170 365
170 25
170 338
172 462
172 365
173 25
173 338
175 461
175 365
176 26
175 338
177 461
178 365
178 27
178 338
180 28
180 460
181 366
181 339
183 29
183 458
183 367
184 339
185 369
186 29
185 457
186 339
187 369
188 28
188 456
189 338
190 367
191 26
191 455
192 338
193 365
193 25
194 454
195 337
195 27
196 364
196 452
197 335
198 27
198 364
199 332
199 451
200 26
201 329
201 363
202 449
203 326
203 23
204 324
204 363
205 448
205 21
206 321
207 364
207 446
208 20
208 319
209 364
210 445
211 20
211 318
212 364
213 443
214 21
214 318
214 364
216 442
217 22
217 319
218 363
219 441
219 22
219 320
220 362
221 440
222 22
222 321
223 360
224 439
225 22
225 321
226 357
227 439
227 20
228 320
228 353
229 349
229 345
229 439
230 18
230 318
231 342
232 438
233 315
233 17
233 340
235 438
235 313
235 18
236 339
238 20
237 438
238 312
239 339
240 20
240 439
241 312
241 341
242 344
243 20
243 347
243 439
244 14
243 312
244 350
246 19
246 439
246 12
246 16
246 313
247 353
247 315
248 18
249 439
249 12
249 354
250 316
251 318
251 440
252 12
252 355
253 319
254 440
254 13
254 356
255 320
257 15
256 440
257 356
257 320
259 14
259 440
260 357
260 320
262 12
262 440
263 357
263 320
265 10
265 440
265 358
266 321
268 7
268 440
268 323
268 359
270 4
270 326
270 440
271 329
271 360
272 332
273 3
273 440
274 361
274 334
275 5
276 363
276 440
277 335
278 6
278 364
279 366
279 441
279 8
280 335
281 368
281 441
281 9
282 11
283 335
283 369
284 441
285 13
285 335
286 14
286 370
287 441
288 334
288 15
288 369
289 441
291 16
291 334
291 368
292 441
294 15
294 333
294 369
295 442
296 16
296 334
296 371
298 442
299 15
299 336
299 372
300 374
301 338
300 442
302 15
302 375
303 377
303 339
303 442
304 341
304 14
306 343
305 378
306 442
307 380
307 14
308 346
309 442
309 380
310 14
310 349
311 443
312 381
312 352
313 13
314 443
315 381
315 354
315 13
316 355
317 443
318 382
318 14
319 356
320 443
320 382
321 14
321 356
322 443
323 382
323 16
324 356
325 444
326 382
326 18
327 20
327 356
328 444
328 381
329 21
329 356
330 23
331 444
331 381
332 355
333 24
333 444
334 26
334 381
335 352
336 444
336 26
337 381
337 28
338 350
339 444
339 380
339 29
340 348
341 31
342 444
342 378
344 347
344 32
344 445
345 35
345 376
346 346
347 37
347 445
347 374
348 40
349 347
350 44
350 445
350 373
351 47
352 347
353 50
352 445
353 373
354 347
355 51
355 445
356 373
356 53
357 348
358 445
358 373
359 54
360 349
360 56
361 445
361 373
362 350
363 57
363 59
363 445
364 373
364 352
365 62
365 355
366 445
367 373
367 65
368 356
369 445
369 67
369 372
370 358
372 445
372 68
372 372
373 359
373 360
374 445
375 69
375 370
375 363
376 366
377 445
377 68
376 368
377 366
380 445
380 68
383 445
383 67
385 445
386 68
388 70
388 445
390 70
391 446
393 70
393 446
396 69
396 446
398 68
399 446
401 69
402 446
404 71
404 446
406 72
407 446
408 73
410 75
410 446
412 75
413 447
414 77
415 447
416 78
418 80
418 447
420 81
421 447
422 84
424 446
424 84
424 87
425 90
426 93
426 96
426 446
427 100
429 446
430 102
432 105
432 446
434 107
435 446
436 109
436 127
436 124
438 121
437 446
438 111
438 114
438 118
438 128
440 447
440 114
440 117
441 128
443 448
444 127
444 450
446 461
446 454
446 458
447 128
446 451
447 465
447 461
449 129
450 465
450 132
452 134
452 137
452 466
455 138
455 466
458 139
458 466
460 139
460 461
460 466
463 140
463 460
466 140
466 460
467 143
468 461
469 146
469 150
469 153
470 156
469 143
471 158
471 462
473 464
474 159
475 160
475 465
476 167
477 467
477 161
477 163
478 169
479 469
479 163
480 172
482 470
482 174
484 469
485 177
487 180
487 468
490 181
490 470
491 183
491 472
493 184
493 473
494 475
495 186
497 478
497 187
499 479
500 187
502 186
502 479
504 184
505 478
507 185
508 477
508 188
509 191
510 477
511 193
511 197
512 200
513 478
514 203
515 480
516 205
518 481
519 207
519 483
521 209
521 484
523 211
523 485
525 212
526 485
526 213
529 485
529 214
531 216
531 484
533 217
534 219
534 483
536 220
537 481
538 222
539 480
540 250
540 254
540 256
540 223
541 247
541 259
542 225
542 243
542 481
543 240
543 260
544 226
544 228
544 237
545 230
545 234
545 481
545 240
546 261
547 231
547 233
547 481
549 263
550 480
551 265
552 267
553 479
554 268
555 336
555 270
555 333
555 340
556 342
556 478
556 330
557 271
558 327
558 345
559 274
559 477
560 277
560 289
560 293
560 296
560 299
560 348
560 301
561 280
561 284
561 286
561 325
562 477
562 304
562 289
562 349
562 301
563 307
563 322
564 352
564 477
565 311
565 319
565 307
566 315
566 353
567 477
568 355
567 312
570 477
570 356
571 358
572 477
573 360
574 365
575 368
575 371
575 478
575 361
576 374
578 478
579 375
579 377
581 478
582 378
583 479
585 378
586 479
587 376
589 479
589 373
591 479
592 372
594 478
594 372
597 478
597 373
599 375
600 477
601 376
603 378
602 477
605 379
605 477
606 381
608 477
609 381
611 383
611 477
613 384
613 476
614 400
614 404
615 386
615 397
615 407
616 390
616 393
616 476
617 409
617 454
617 395
618 412
618 449
618 458
619 447
619 461
619 476
620 416
619 453
620 443
619 412
621 418
621 439
620 446
621 463
622 475
622 422
622 436
623 465
623 425
623 428
623 431
623 433
622 443
623 419
624 473
624 435
625 466
626 468
626 471
628 468 
```

对于第二个数字坐标是：

```
123,268
127,277
132,257
136,281
141,253
144,283
149,251
153,286
158,249
162,287
167,248
167,114
166,127
166,136
167,148
169,162
169,176
169,185
169,194
169,202
169,211
169,220
169,229
169,237
169,261
171,288
173,269
175,104
171,242
176,119
179,156
178,54
179,289
180,67
182,43
182,272
184,101
184,38
185,121
186,73
188,153
188,290
189,48
190,273
193,101
193,37
194,122
194,87
194,165
194,78
197,290
197,29
199,109
199,274
201,17
203,100
203,122
203,166
203,78
205,290
208,274
207,27
212,39
211,101
211,122
211,160
212,74
212,150
215,41
214,290
216,272
219,31
220,102
220,120
219,68
221,156
221,42
223,289
222,51
222,59
225,269
229,106
229,119
230,156
231,288
231,174
231,187
231,196
231,204
231,213
231,222
231,230
231,239
232,248
231,256
231,264
230,269
234,133
233,144
235,111
235,120
235,151
240,287
241,249
249,285
250,251
258,283
258,253
266,279
267,256
275,274
276,262
280,270 
```

在 R 中绘图：

```
candlefig <- read.csv(file.choose(), sep = ",", head = TRUE)
plot(rev(candlefig$x), rev(candlefig$y), type = "p", pch = 19, col = "red") 
```

您可以增加软件中的点数。然而，在这样的复杂图中，按顺序连接线可能会有点问题。

![在此处输入图像描述](../Images/fc9651f69da63fb08d5abf2b63c25c18.png)

在线 youtube 教程视频在[这里](http://www.youtube.com/watch?v=iHuoSfmz91k)： [用于创建地图教程。](http://www.youtube.com/watch?v=7PRj0zqpw0E) [三元图](http://www.youtube.com/watch?NR=1&v=cSZHrlyZZU0&feature=endscreen) [极坐标图](http://www.youtube.com/watch?v=o6jWKa96c_I)

[帮助链接：](https://github.com/ankitrohatgi/WebPlotDigitizer/issues)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:27:52.043

在 R 中，您可能想查看 digitize 包，它具有用于读取 jpeg 图像并单击图像以获取多边形点的工具。我相信一些空间包对地图有一些类似的功能，但不记得是哪些包）。

您可以通过使用`image`or`rasterImage`函数（请参阅 EBImage 或其他用于在 jpeg 中读取的软件包）绘制图像，然后使用`locator`函数（请参阅`type`参数）单击绘图并获取坐标来执行类似的操作。如果要指定不同的坐标系，请查看`updateusr`TeachingDemos 包中的函数。

对于更自动化的方法，您可以查看[potrace](http://potrace.sourceforge.net/)程序。 [Inkscape](http://inkscape.org/)有一个对 potrace 的内置调用，具有更好的界面和更多用于预处理和后处理图像的选项。

# c - 带有空格的 c 样式字符串的 regcomp 表达式

> ID：14133042
> 
> 赞同：1
> 
> 时间：2013-01-03T04:26:05.037
> 
> 标签：c, regex

我正在尝试检测空字符串或仅包含空格的字符串，例如“”。它是 ac 应用程序和使用`regcomp`和`regexec`。

对于空字符串`"^$"`工作正常。

但是对于只有空格的字符串，我遇到了问题。到目前为止，我想出了

`"[\\s]*(?![A-za-z0-9])$"`

有没有更好的方法来使用 perl 风格的正则表达式来表达它？

更新：我实际上改变了它`"[\\s]*(?![\\w\\d\\t\\n\\r]*)$"`

当我给出诸如“m”之类的输入时，上面给出了一个错误。错误是

`"Invalid preceding regular expression"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:11:19.063

要仅测试空格的字符串，其 Reg-Ex 将是...

`^\s*$`

**参考：**有帮助

[如何测试字符串是否只是perl中的空格](https://stackoverflow.com/questions/6105815/how-to-test-to-see-if-a-string-is-only-whitespace-in-perl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:29:51.167

你应该使用`*`或`+`量词..

所以它应该是`^\s*$`或`^ *$`

`*`匹配 0 到多个字符

`+`匹配 1 到多个字符

# jqplot - Jqplot 到图像错误

> ID：14133044
> 
> 赞同：0
> 
> 时间：2013-01-03T04:26:24.263
> 
> 标签：jqplot

我正在使用默认`jqplotToImageStr()`函数以我的图表的 base64string 形式获取图像数据。

问题是图像上的刻度、点标签和图例文本向右移动了图像宽度的大约 50%。

这是一个例子：

![越野车图表](../Images/40e5f75c0021cdfecf7e2d6a6bb24d67.png)

# javascript - 在本地目录中列出文件的VBscript代码替换解决方案

> ID：14133046
> 
> 赞同：0
> 
> 时间：2013-01-03T04:27:17.010
> 
> 标签：javascript, jquery, vbscript

寻找一种非 vb 解决方案来收集本地目录中的文件名并放入 javascript 数组中。该应用程序不是网络绑定的。它只会在本地运行。vb解决方案如下。目前这工作正常，但我需要在文件名集合上走另一条路。在下面的脚本运行之后，我有一些 javascript 可以获取 vars-wood、metal、plastic- 并与它们一起运行。关于获取将在 Firefox 或 chrome 中运行的本地文件名目录的其他脚本解决方案的任何建议？我没有运行本地网络服务器，但考虑到 nodejs-对于我需要的东西似乎有点矫枉过正。这是一个使用 html、css、javascript 和 jquery 的本地网络浏览器应用程序。

```
 <script language="vbscript">
 'List Files in a particular Directory
 Dim fs2, f2, fs3, f3, fs4, f4, wood, metal, plastic, folderspec2, folderspec3, folderspec4, strFileName2

  folderspec2 = ".\wood"
folderspec3 = ".\metal"
folderspec4 = ".\plastic"

Set fs2 = CreateObject("Scripting.FileSystemObject")
 Set f2 = fs2.GetFolder(folderspec2)

For Each FileName In f2.files
 wood = wood & fileName.name
 wood = wood & ","
 Next
   set f2 = nothing
 set fs2 = nothing

Set fs3 = CreateObject("Scripting.FileSystemObject")
 Set f3 = fs3.GetFolder(folderspec2)

For Each FileName In f3.files
 metal = metal & fileName.name
 metal = metal & ","
 Next

  set f3 = nothing
 set fs3 = nothing

Set fs4 = CreateObject("Scripting.FileSystemObject")
 Set f4 = fs4.GetFolder(folderspec2)

For Each FileName In f4.files
 plastic = plastic & fileName.name
 plastic = plastic & ","
 Next

  set f4 = nothing
 set fs4 = nothing

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:33:48.217

您无法在浏览器中执行此操作。为沙箱提供保护以防止访问文件系统是 Web 浏览器的核心功能。如果没有该安全功能，网络将不是一个可行的平台。没有办法让用户在浏览器中安装插件。

由于这只会在一台机器上运行，我建议您编写一个后台服务，以您选择的通用语言在计算机上运行，​​按计划从您想要的文件夹中读取文件列表文件系统并将它们写入计算机上一个特殊文件中的 javascript 数组，您的 Web 浏览器/html 页面将能够读取和使用。

# javascript - get('order') 是如何工作的？

> ID：14133049
> 
> 赞同：0
> 
> 时间：2013-01-03T04:27:27.537
> 
> 标签：javascript, backbone.js

我正在学习 JavaScript 和 Backbone.js。现在我正在阅读Addy Osmani[在 Backbone.js 中的 Todo 应用程序示例](http://todomvc.com/architecture-examples/backbone/)，并与以下部分混淆：

```
// We keep the Todos in sequential order, despite being saved by unordered
// GUID in the database. This generates the next order number for new items.
nextOrder: function() {
    if ( !this.length ) {
        return 1;
    }
    return this.last().get('order') + 1;
},

// Todos are sorted by their original insertion order.
comparator: function( todo ) {
    return todo.get('order');
} 
```

事实上，我在其他任何`'order'`地方都没有找到任何属性，谁能指出它是如何`get('order')`工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:40:55.627

查看调用 nextOrder 的位置：

```
var Todo = Backbone.Model.extend({
  defaults: function() {
    return {
      title: "empty todo...",
      order: Todos.nextOrder(),
      done: false
    };
  }, 
```

我们在这里设置模型的顺序。如果没有任何现有订单，则将其设置为 1。如果有，则最后一个订单具有迄今为止的最高索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:59:44.680

快速浏览一下[来源`get`](http://backbonejs.org/docs/backbone.html#section-35)将是有益的：

```
get: function(attr) {
  return this.attributes[attr];
} 
```

所以当你说的时候`m.get('a')`，Backbone 会`'a'`往里面找`m.attributes`。这里的重要教训是 Backbone 模型属性和 JavaScript 对象属性不是一回事：你使用访问属性`a`，`m.get('a')`而属性`p`是通过`m.p`. 将属性和属性分开的原因有很多，其中几个主要的原因是：

1.  您不希望模型属性与属性和方法发生命名冲突。
2.  您想知道模型的哪些部分应该被持久化到服务器并发送到模板以进行渲染（参见[注释源](http://backbonejs.org/docs/backbone.html#section-33)[`toJSON`](http://backbonejs.org/#Model-toJSON)中的和）。

另一个教训是，一旦您具备 JavaScript 的基本知识，Backbone 源代码实际上是非常易读且相当容易理解的。当您不了解 Backbone 内部结构时，带[注释的源代码很方便。](http://backbonejs.org/docs/backbone.html)

# google-maps-api-3 - 如何检查谷歌地理编码器的结果是否准确？

> ID：14133050
> 
> 赞同：1
> 
> 时间：2013-01-03T04:27:44.480
> 
> 标签：google-maps-api-3, geolocation, google-geocoder, google-geocoding-api

目标：获取用户提供的住宅地址列表，并将其转换为 lat/lng 坐标。（假设用户将他的地址列表粘贴到 Web 表单中）

我正在使用谷歌地图地理编码器从地址获取纬度/经度。

我需要验证每个地址查找是否“准确”。我的意思是“精确”是纬度/经度坐标是您可以将披萨送到的东西，还是地理编码器无法以足够的准确度将地址解析为经度/经度。（例如，如果用户忘记将门牌号放在他的地址之一上。）

我在这里看到了文档： [https ://developers.google.com/maps/documentation/geocoding/#JSON](https://developers.google.com/maps/documentation/geocoding/#JSON)

我的假设（基于经验结果）是，如果地理编码器结果符合以下标准，则结果是准确的：

*   “结果”数组中只有一个元素
*   结果[0]["geometry"]["location_type"] == "ROOFTOP"
*   结果[0]["partial_match"] 不存在

假设如果这三个条件中的任何一个不满足，结果可能不准确，应该由用户验证，这是否正确？

有没有人做过类似的事情并找到了一种可靠的方法来检测结果是否准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:35:49.767

假设结果不准确。

`draggable: true`使用地理编码器放置标记（ ）。

如果没有正确定位，允许用户将标记拖到正确的位置

# c# - 如何在系统启动时运行控制台应用程序，而不出现在显示器上（后台进程）？

> ID：14133053
> 
> 赞同：4
> 
> 时间：2013-01-03T04:28:02.703
> 
> 标签：c#, .net, vb.net, c#-4.0

我想在系统启动时运行控制台应用程序而不出现在显示屏上意味着我想将应用程序作为后台进程运行。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T04:37:45.383

**简而言之：**最简单的方法可能是安排从您的操作系统启动的**任务。**这可能是最容易设置的方式。

您可以使用调度程序轻松地在后台运行它 -[如何在后台运行 .Net 控制台应用程序](https://stackoverflow.com/q/2686289/1437962)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:51:52.783

您可以将项目属性中的输出类型从控制台应用程序类型更改为Windows应用程序类型并编译它，然后它在启动时不会显示任何窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:03:49.020

试试这个隐藏控制台窗口并在后台运行

```
[DllImport("user32.dll")]
private static extern int ShowWindow(int Handle, int showState);

[DllImport("kernel32.dll")]
public static extern int GetConsoleWindow();

public static void HideWindow()
{
    int win = GetConsoleWindow();
    ShowWindow(win, 0);
} 
```

你为什么不试试windows服务？Windows 服务在后台运行该进程。

# javascript - insertBefore 将元素向下推

> ID：14133056
> 
> 赞同：0
> 
> 时间：2013-01-03T04:28:22.170
> 
> 标签：javascript, css

我正在尝试使用 insertBefore 在另一个 div 上方插入一个 div，到目前为止它的工作正常。但是，它会向下推我试图在上面插入的 div，如果可能的话，我想防止这种情况发生。这是我与 jsFiddle 示例一起使用的代码：

JS：

```
var innerDiv = document.getElementById('innerDiv');

function addButtons() {
    var buttons = document.createElement('div'),
        outerDiv = document.getElementById('outerDiv');

    buttons.innerHTML = '<input type="button" id="button" value="button" />';  

    outerDiv.insertBefore(buttons, outerDiv.childNodes[0]);        
}

innerDiv.onfocus = addButtons;​ 
```

HTML：

```
<div id="outerDiv" class="outerDiv">
     <div id="innerDiv" contenteditable="true">Testing</div>
</div> 
```

CSS：

```
.outerDiv {
    position: fixed;
    left: 100px;
    top: 100px;
}​ 
```

[jsFiddle 示例](http://jsfiddle.net/qGZeK/1/)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:36:49.277

这是正常的。由于`outerDiv`有固定的定位，它会保持它在屏幕上的当前位置，但它的内容会按照正常的布局算法流动。您要`button`在. `innerDiv`_ （您确实知道在您调用该方法的元素**内**，在您指定为第二个参数的子元素**之前**插入，对吗？）`outerDiv``outerDiv``insertBefore`

 ****如果您希望新元素不影响布局，则应为其添加一些样式。[例如](http://jsfiddle.net/qGZeK/2/)：

```
#button {
    position: absolute;
    top: -2em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:43:56.360

尝试使 innerDiv 绝对定位：**[Demo](http://jsfiddle.net/qGZeK/3/)**

```
.innerDiv{
    position: absolute;
    top: 0px;
}

.outerDiv {
    position: fixed;
    left: 100px;
    top: 100px;
    padding-top: 30px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:05:05.877

我想说这是保持页面响应以及在 id 上方添加元素的最佳方式之一。

检查[小提琴](http://jsfiddle.net/qGZeK/4/)

我对 CSS 做了一些更改

```
.outerDiv {
    position: fixed;
    top: 80px;
    left: 100px;
}    

#innerDiv {
    position: fixed;
    top: 100px;
} 
```

where`.outerdiv`被占用并`#innerdiv`放置在`.outerdiv`. 似乎我们在 ID 上方添加了一个元素，这是必需的。****

# jquery - 通过 ajax 加载媒体后运行同位素回调

> ID：14133058
> 
> 赞同：1
> 
> 时间：2013-01-03T04:28:29.407
> 
> 标签：jquery, ajax, jplayer

我正在循环浏览页面上的所有 .jplayer 类，然后对每个找到的类进行 ajax 调用，该调用返回与播放器关联的每首歌曲的 url。我想等到所有 ajax 调用完成并执行所有成功回调（即，所有 jplayer 实例都被实例化），然后在我的容器元素上运行 isotope。

我最初尝试运行 isotope 作为 loadTracks 方法的回调，但这不起作用，因为 ajax 调用在所有玩家实例化之前返回。当同位素试图确定页面的布局时，这会导致问题，因为每个玩家可以有不同的高度。

这是我当前检索播放器曲目的代码：

```
 function loadTracks(players, callback) {
            players.each(function(i,elem) {
                var playerId = $(this).attr('id'),
                    arr = playerId.split('_'),
                    postId = arr[2];

            $.ajax({
                    url: BaseHref + "api/v1/Post/" + postId + '/PostTracks',
                    dataType: "json",
                    success: function(data) {
                        var cssSelector = {
                            jPlayer: '#jquery_jplayer_' + postId,
                            cssSelectorAncestor: '#jp_container_' + postId
                        }
                        var playlist = [];
                        makePlaylist = (function() {
                            $.each(data.data, function(index,value) {
                                playlist.push({
                                    title: value['Title'],
                                    m4a: value['m4aURL'],
                                    ogg: value['oggURL']
                                });
                            });

                        })();

                        var options = {
                            swfPath: BaseHref + 'themes/simple/javascript/jplayer',
                            supplied: 'm4a, oga',
                            displayTime: 0,
                            addTime: 0,
                            removeTime: 0,
                            shuffleTime: 0,
                            enableRemoveControls: true
                        };
                        var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);

                    }
                });
            });
            callback();
        } 
```

然后我运行：

```
loadTracks($('.jp-jplayer'), function() {
            $container.imagesLoaded(function() {
                $container.isotope({
                    itemSelector : selector,
                    transformsEnabled: false,
                    visibleStyle: { opacity: 1 },
                    hiddenStyle: { opacity: 0 },
                    resizable: false,
                    masonry: {
                        columnWidth: setColumns($container),
                        gutterWidth: 10
                    },
                    getSortData: {
                        date: function ( $elem ) {
                        return $elem.data('date');  
                        }
                    },
                    sortBy: 'date',
                    sortAscending: false
                });
            });
            if ( $('#overlay').length ) setTimeout(function() { $('#overlay').fadeOut(); }, 1000);
        }) 
```

只有在我的 $.each 循环中的所有 ajax 调用都返回并且所有 jplayer 实例都已通过成功方法实例化之后，我如何才能在我的容器上执行同位素方法？

# visual-studio-2012 - 我可以使用 Visual Studio 2012 开发 Windows 8 Metro 应用程序吗？

> ID：14133060
> 
> 赞同：3
> 
> 时间：2013-01-03T04:28:40.110
> 
> 标签：visual-studio-2012, microsoft-metro, visual-studio-express

我有 Visual Studio 2012。但是，我看到微软正在推广 Visual Studio Express 2012 用于编写 Windows 8 Metro 应用程序：

“您有一个可以改变世界各地生活的应用程序的想法。适用于 Windows 8 的 Visual Studio Express 提供了将它带给数百万客户所需的一切。而我们正在谈论的那些改变的生活？其中之一可能是您的。 "

[http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-8](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-8)

我知道 Visual Studio 的快速版本是免费的。但是，我更喜欢使用我为 VS 2012 购买和支付的费用，而不是安装 express 版本。

“Visual Studio Express 2012 for Windows 8”中是否有“Visual Studio 2012”中没有的用于开发 Windows 8 Metro 应用程序的内容？我意识到这是一个简单的问题，但我在 Microsoft 网页上找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:34:06.437

您可以在 Visual Studio 2012 中创建**现代 UI**应用程序，以前称为**Metro UI**应用程序。因此，您使用 Express 创建的每个应用程序都应该在 Visual Studio 的完整版本（专业版、旗舰版等）中可用。

下面是一张对比图：

![在此处输入图像描述](../Images/dc23951eef0132dfae46db12e3f204d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:31:45.947

是的。Express 版本是完整 Visual Studio 的子集，您可以使用完整的 VS 2012 创建“Windows 应用商店”应用程序（以前称为 Metro）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:35:50.747

是的。

从[VS Express 下载链接](http://www.microsoft.com/visualstudio/eng/downloads#d-express-windows-8)

> Microsoft Visual Studio Express 2012 for Windows 8 提供了构建引人注目的创新 Windows 应用商店应用程序所需的核心工具。

# zodb - zodb 中的唯一键/属性/属性

> ID：14133067
> 
> 赞同：0
> 
> 时间：2013-01-03T04:29:09.583
> 
> 标签：zodb, object-oriented-database

非常简单的场景：

```
class User(Persistent):
  def __init__(self, username, email):
    self.username = username
    self.email = email 
```

我想通过用户名将用户实例存储在 zodb 中，同时保持电子邮件的唯一性。

```
u1 = User(username="u1",email="u1@example.com")
zodb_container[u1.username] = u1 
```

我使用用户名作为密钥来存储这个对象，所以它是唯一的。我的问题是如何保持电子邮件属性的唯一性？在对象数据库中是否有任何优雅的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:08:57.473

不。

ZODB 有点名不副实。它不是像 Postgres 或 MySQL 那样的“数据库”，而是一个具有约束和查询语言的数据库，以及人们认为数据库具有的所有东西。相反，它是一个持久对象存储。除了管理大于可用内存的工作集、处理事务并允许您在进程之间共享对象表示之外，ZODB 没有为您做任何 Python 的 pickle 模块不为您做的事情。它实际上是“超级泡菜”。

所以你的答案与你问同样的泡菜问题没有什么不同，真的。

# iphone - 在TextView +iphone sdk中检测“@”之后写的字符

> ID：14133068
> 
> 赞同：0
> 
> 时间：2013-01-03T04:29:09.727
> 
> 标签：iphone, uitextview

在文本视图中，我想检测写在“@”字符之后的字符

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
if([txt_comment.text isEqualToString:@"@"]){

     }      
    return YES;

} 
```

但是一旦我写了“@”字符，我就能捕捉到这个事件。如何检测事件和写在“@”后面的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:45:29.883

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    NSLog(@"%@",text);
    if (isCharacterBefore) {
        NSLog(@"the Character after @ is %@",text);
        isCharacterBefore = NO;
    }
    if([text isEqualToString:@"@"]){
        isCharacterBefore = YES;
    } 

    return YES;

} 
```

这`isCharacterBefore`是`BOOL`在 .h 文件中声明的变量。希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:35:51.900

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
if ([txt_comment.text rangeOfString:@"@"].location == NSNotFound) 
{
   NSLog(@"string does not contain @");
}
else 
{
   NSLog(@"string contains @!");
   /* What ever you want to do Write here */
   NSArray *tempArray = [txt_comment.text componentsSeparatedByString:@"@"];
   if([tempArray count] >= 2 && [tempArray objectAtIndex:1]! = NULL)
   {
      NSLog(@"%@",[tempArray objectAtIndex:1]);
   }
}
} 
```

尝试这个 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:37:10.060

`componentsSeparatedByString:`在你的字符串中使用

```
 - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
   NSArray *arr = [text componentsSeparatedByString:@"@"];
   if([arr count] == 2)
      NSLog(@"Your String After @ %@",[arr objectAtIndex:1]);
   else
       NSLog(@"@ string not found");

   return YES;
 } 
```

# sql - linq to entity 速度比使用like 表达式的直接SQL 语句太慢

> ID：14133074
> 
> 赞同：0
> 
> 时间：2013-01-03T04:29:51.900
> 
> 标签：sql, sql-server, entity-framework, tsql

我有一个非常简单的 LINQ to Entity Code 来查询 SQL Server 数据库中的数据。我有两个表“MES_WO_Master”“MES_WO_Tracking”，表“MES_WO_Master”在列“WoNo”和“MaterialNo”上有索引，表“MES_WO_Tracking”在“EndDate”列上有索引。LINQ to Entity 如下：

```
from w in MES_WO_Master
                        join r in MES_WO_Tracking
                        on w.WoNo equals r.WoNo
                        where r.EndDate >= DateTime.Parse("2013-01-02") && r.EndDate <= DateTime.Parse("2013-01-03") && r.QtyScrap > 0 && w.MaterialNo.EndsWith("-W")
                        select new
                        {
                            WoNo = w.WoNo,
                            MaterialNo = w.MaterialNo,
                            QtyComplete = r.QtyComplete.Value,
                            QtyScrap = r.QtyScrap.Value,
                            ScrapCode = r.ScrapCode,
                            EndDate = r.EndDate.Value
                        } 
```

而这个 LINQ To Entity 需要执行超过 30 秒才能获取数据。我使用 LINQPad 来获取此 LINQ 的实际 SQL 语句。声明如下：

```
 -- Region Parameters
DECLARE @p0 VARCHAR(20)
SET @p0 = '2013-01-02'
DECLARE @p1 VARCHAR(20)
SET @p1 = '2013-01-03'
DECLARE @p2 BIGINT
SET @p2 = 0
DECLARE @p3 VARCHAR(3)
SET @p3 = '%-W'
-- EndRegion
SELECT  [t0].[WoNo] ,
        [t0].[MaterialNo] ,
        [t1].[QtyComplete] AS [QtyComplete] ,
        [t1].[QtyScrap] AS [QtyScrap] ,
        [t1].[ScrapCode] ,
        [t1].[EndDate] AS [EndDate]
FROM    [MES_WO_Master] AS [t0]
        INNER JOIN [MES_WO_Tracking] AS [t1] ON [t0].[WoNo] = [t1].[WoNo]
WHERE   ( [t1].[EndDate] >= @p0 )
        AND ( [t1].[EndDate] <= @p1 )
        AND ( [t1].[QtyScrap] > @p2 )
        AND ( [t0].[MaterialNo] LIKE @p3 ) 
```

但是，如果我将@p3 替换为“%-W”并在 SQL Server 分析窗口中执行如下语句，则只需要不超过 1 秒。

```
-- Region Parameters
DECLARE @p0 VARCHAR(20)
SET @p0 = '2013-01-02'
DECLARE @p1 VARCHAR(20)
SET @p1 = '2013-01-03'
DECLARE @p2 BIGINT
SET @p2 = 0
DECLARE @p3 VARCHAR(3)
SET @p3 = '%-W'
-- EndRegion
SELECT  [t0].[WoNo] ,
        [t0].[MaterialNo] ,
        [t1].[QtyComplete] AS [QtyComplete] ,
        [t1].[QtyScrap] AS [QtyScrap] ,
        [t1].[ScrapCode] ,
        [t1].[EndDate] AS [EndDate]
FROM    [MES_WO_Master] AS [t0]
        INNER JOIN [MES_WO_Tracking] AS [t1] ON [t0].[WoNo] = [t1].[WoNo]
WHERE   ( [t1].[EndDate] >= @p0 )
        AND ( [t1].[EndDate] <= @p1 )
        AND ( [t1].[QtyScrap] > @p2 )
        AND ( [t0].[MaterialNo] LIKE ***'%-W'***) 
```

我知道'%-W'不会使用索引，但是为什么这两个语句会有这么大的差距呢？有人可以给我一些提示吗？非常感谢。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:25:12.030

第二个查询只需要 1 秒的原因是因为它在第一次运行后被缓存。如果您在之后立即运行相同的查询将花费更少的时间。看到[这个问题](https://stackoverflow.com/questions/1873025/how-can-i-clear-the-sql-server-query-cache)

如果您按照那里的说明进行操作，您将能够查看执行时间的差异是否是实体变慢与缓存是否存在差异。

您还可以查看 SQL 正在生成的查询计划，以了解为什么需要这么长时间，[这是另一个 SO question 告诉您如何](https://stackoverflow.com/questions/7359702/how-do-i-obtain-a-query-execution-plan)。

# android - Android ACTION_SHUTDOWN 广播不起作用

> ID：14133077
> 
> 赞同：6
> 
> 时间：2013-01-03T04:30:06.833
> 
> 标签：android, bootcompleted, powermanager

代码 -

```
public class ShutdownReceiver extends BroadcastReceiver {
    private static final String TAG = "ShutdownReceiver";

    @Override
    public void onReceive(final Context context, final Intent intent) {
        Logger.i(TAG, "Shutting Down..........................");
        if("android.intent.action.ACTION_SHUTDOWN".equals(intent.getAction())) {
            //Power Off
        }
    }
} 
```

**服务 -**

```
private BroadcastReceiver mReceiver = null;

    @Override
    public void onCreate() {
         super.onCreate();
         // INITIALIZE RECEIVER
         //It is used to register broadcast for ShutDown or Power Off
         IntentFilter filter = new IntentFilter(Intent.ACTION_SHUTDOWN);
         mReceiver = new ShutdownReceiver();
         registerReceiver(mReceiver, filter);
   }

   @Override
   public void onDestroy() {
       unregisterReceiver(mReceiver);
   } 
```

权限 -

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PRIVILEGED" />
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.DEVICE_POWER" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-23T14:36:02.097

我知道这很旧，但我有一个遵循上述材料的部分解决方案。至少调用了关机事件，并且我可以在关机时执行该独特的项目，但是有一个我不明白的副作用；内存泄漏。从某种意义上说，它是关闭的，所以内存泄漏没有严重的影响，但我不明白，这很麻烦。

无论如何，我在 manifest.xml 中没有添加关于此 BroadcastReceiver 的内容。它完全在代码中定义。

在我的主要活动中，如上所述定义一个类

```
private class ShutDownReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent)
    {
        if(Intent.ACTION_SHUTDOWN.equals(intent.getAction()))
        {
            Log.i(TAG, "System shutting down");
            context.stopService(new Intent(context, BluetoothPanService.class));
        }
    }

} 
```

在主要活动的 onResume() 方法中，我实例化并注册了接收器：

```
public void onResume()
{
    super.onResume();
    Log.i(TAG, "Measurement Log Activity has Resumed.");

    IntentFilter filter = new IntentFilter(Intent.ACTION_SHUTDOWN);
    mReceiver = new ShutDownReceiver();
    registerReceiver(mReceiver, filter);
} 
```

（'mReceiver' 被定义为主要活动的私有类变量）

最后在主要活动的 onPause() 中，我取消注册接收器

```
public void onPause()
{
    super.onPause();
    Log.i(TAG, "Measurement Log Activity has Paused.");
    this.unregisterReceiver(mReceiver);
} 
```

当手机关机时，确实会发出 ACTION_SHUTDOWN 事件并停止服务；它的 onDestroy() 方法发出信号，并且向远程 MQTT 代理服务发布一条消息，指示客户端不再连接。远程代理正在获取消息，所以我知道它正在工作。

然而，在那之后，一切都崩溃了，这主要是因为我无法阻止我的服务重新启动（即使我在 onStartCommand 方法中设置了 START_NOT_STICKY ）。但是此时除了在 logcat 中出现很多红色错误行之外，还注意到了 ACTION_SHUTDOWN 并且我需要调用的操作已经完成。

希望这对某人（可能不处理关闭服务的人）有所帮助。

# iphone - MKPinAnnotationView 红色图钉替换为图片

> ID：14133079
> 
> 赞同：1
> 
> 时间：2013-01-03T04:30:12.293
> 
> 标签：iphone, objective-c, mkmapview, mkannotation, mkannotationview

我已经用`MKPinAnnotationView`图片替换了红色别针

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation  
{
MKAnnotationView *annotationView=[mapView dequeueReusableAnnotationViewWithIdentifier:parkingAnnotationIdentifier];
//If one isn’t available, create a new one
if(!annotationView){
annotationView=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:parkingAnnotationIdentifier];
//Here’s where the magic happens
annotationView.image=[UIImage imageNamed:@"dot.png"];
}
return annotationView;
} 
```

现在，当我单击任何按钮时，我有一个详细信息披露，它将转到该注释的详细页面。

到这里为止还好。现在的问题是，当我再次从详细信息页面返回地图视图时，会出现默认的红色图钉而不是 dot.png，因为第一次加载视图时`-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation` 会调用此方法，但是当我们从详细信息返回时页面视图将出现没有被调用。如何解决这个问题？

```
if ([list_array count]>0) {
        location1.latitude = [[[list_array objectAtIndex:0]valueForKey:@"latitude"]floatValue];
        location1.longitude = [[[list_array objectAtIndex:0]valueForKey:@"longitude"]floatValue];
        region.center = location1;

        if ([[list_array objectAtIndex:0]valueForKey:@"company_id"]) {
            for (int i=0; i<[list_array count]; i++) 
            {
                CLLocationCoordinate2D location1;
                location1.latitude = [[[list_array objectAtIndex:i]valueForKey:@"latitude"]floatValue];
                location1.longitude = [[[list_array objectAtIndex:i]valueForKey:@"longitude"]floatValue];
                region.span = span;

                BasicMapAnnotation *addAnnotation1 = [[BasicMapAnnotation alloc] initWithLatitude:location1.latitude andLongitude:location1.longitude] ; 
                addAnnotation1.tag = i;
                [mapView addAnnotation:addAnnotation1];
            }
        }
    }

    [mapView setRegion:region animated:TRUE];
    [mapView regionThatFits:region];
    //[self.view addSubview:self.mapView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:03:48.567

`viewWillAppear:`只需在or`viewDidAppear:`方法中添加整个引脚或 setRegion

当我们进入`viewForAnnotation`时再次调用这里，所以只需调用它或使用.`addAnnotation``MKMapView``setRegion``MKMapView`

或者只是删除这些整个引脚并再次添加`viewDidAppear:`如下......

```
-(void)viewDidAppear:(BOOL)animated
{
    NSArray *existingpoints = mapView.annotations;
    if ([existingpoints count] > 0)
        [mapView removeAnnotations:existingpoints];

    if ([[list_array objectAtIndex:0]valueForKey:@"company_id"]) {
   for (int i=0; i<[list_array count]; i++) 
   {
    CLLocationCoordinate2D location1;
    location1.latitude = [[[list_array objectAtIndex:i]valueForKey:@"latitude"]floatValue];
    location1.longitude = [[[list_array objectAtIndex:i]valueForKey:@"longitude"]floatValue];
    region.span = span;

    BasicMapAnnotation *addAnnotation1 = [[BasicMapAnnotation alloc] initWithLatitude:location1.latitude andLongitude:location1.longitude] ; 
    addAnnotation1.tag = i;
    [mapView addAnnotation:addAnnotation1];
    }
}
   [mapView setRegion:region animated:TRUE];
   [mapView regionThatFits:region];
} 
```

我希望这对你有帮助......

# ruby - ? 在捕获组的末尾

> ID：14133081
> 
> 赞同：3
> 
> 时间：2013-01-03T04:30:32.777
> 
> 标签：ruby, regex

我了解捕获组开头的问号 (?:pattern) 表示此模式不应创建反向引用，但在以下示例中，问号位于捕获组末尾之后是什么意思通配符？

```
 self =~ /(.*?)_(\d+)$/ 
```

代码

```
class String
# used to instantiate a model based on a dom_id style
# identifier like "person_10"
  def to_model
    self =~ /(.*?)_(\d+)$/
    class_name, id = $1, $2
    class_name.classify.constantize.find(id)
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:32:10.257

这是非贪婪扩展。 [尾随`?`转换`*`并`+`从贪婪到非贪婪](http://doc.infosnel.nl/ruby_regular_expressions.html)。非贪婪通配符将选择最小的匹配字符集，而不是最大的可能。请参阅[此博客](http://robertpyke.blogspot.com/2009/02/ruby-regex-non-greedy-operator-using_05.html)以获取说明

# git - 无法通过 SCM Manager 推送到 git

> ID：14133082
> 
> 赞同：1
> 
> 时间：2013-01-03T04:30:48.923
> 
> 标签：git, smart-http, scmmanager

我在 Windows 服务器上运行了 Git，并希望从我的 OSX 笔记本电脑同步回它。对此似乎有两种可行的选择：

*   SSH（对于 Windows 来说，这似乎是最好的 hackish）
*   智能 HTTP

我选择了 Smart HTTP 选项并设置了[https://bitbucket.org/sdorra/scm-manager/wiki/Home](https://bitbucket.org/sdorra/scm-manager/wiki/Home)。除了实际工作之外，这似乎勾选了我需要的所有框。

我可以轻松地克隆和拉取存储库，但不能推送。我已经尝试过使用端口转发等，但为了尽可能多地消除变量，我目前正在通过 VPN 进行测试。

```
..$ git clone http://user@192.168.12.201:8080/scm/git/foo
Cloning into 'foo'...
Password: 
remote: Counting objects: 79, done
remote: Finding sources: 100% (79/79)
remote: Getting sizes: 100% (60/60)
remote: Compressing objects:  96% (58/60)
Unpacking objects: 100% (79/79), done.
remote: Total 79 (delta 0), reused 2 (delta 0)

..$ cd foo/

..$ touch blah

..$ git add blah

..$ git commit -m 'Testing this works'
[master 1c1637c] Testing this works
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 blah

..$ git push
Password: 
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 281 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: error: [SCM] 
remote:  ! [rejected] refs/heads/master (unspecified reason) 
```

并且该文件没有出现在远程存储库中。

有什么想法吗？有什么更好的方法可以用来远程同步？

编辑：

```
..$ git push -v
Pushing to http://user@192.168.12.201:8080/scm/git/foo
Password: 
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 281 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: error: [SCM] 
remote:  ! [rejected] refs/heads/master (unspecified reason) 
```

编辑 2 - 来自 SCM 的日志：

```
20:22:29.997 [Thread-0] INFO  sonia.scm.boot.BootstrapListener - start scm-manager 1.24 in stage: PRODUCTION
20:22:30.001 [Thread-0] WARN  sonia.scm.boot.BootstrapListener - fallback to default classloader
20:22:30.018 [Thread-0] INFO  sonia.scm.plugin.DefaultPluginLoader - load core plugin /C:/Windows/Temp/jetty-0.0.0.0-8080-scm-webapp.war-_scm-any-/webapp/WEB-INF/lib/scm-git-plugin-1.24.jar
20:22:30.257 [Thread-0] INFO  sonia.scm.plugin.DefaultPluginLoader - load core plugin /C:/Windows/Temp/jetty-0.0.0.0-8080-scm-webapp.war-_scm-any-/webapp/WEB-INF/lib/scm-hg-plugin-1.24.jar
20:22:30.261 [Thread-0] INFO  sonia.scm.plugin.DefaultPluginLoader - load core plugin /C:/Windows/Temp/jetty-0.0.0.0-8080-scm-webapp.war-_scm-any-/webapp/WEB-INF/lib/scm-svn-plugin-1.24.jar
20:22:30.407 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - add GuiceModule sonia.scm.web.SvnServletModule
20:22:30.408 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - add GuiceModule sonia.scm.web.HgServletModule
20:22:30.408 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - add GuiceModule sonia.scm.web.GitServletModule
20:22:30.620 [Thread-0] INFO  sonia.scm.util.ScmConfigurationUtil - load ScmConfiguration from file C:\.scm\config\config.xml
20:22:30.864 [Thread-0] INFO  sonia.scm.event.ScmEventBus - use sonia.scm.event.GuavaScmEventBus as event bus implementation
20:22:30.890 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryHandler sonia.scm.repository.HgRepositoryHandler
20:22:30.891 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryServiceResolver sonia.scm.repository.spi.GitRepositoryServiceResolver
20:22:30.891 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryServiceResolver sonia.scm.repository.spi.HgRepositoryServiceResolver
20:22:30.892 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryHandler sonia.scm.repository.SvnRepositoryHandler
20:22:30.892 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryHandler sonia.scm.repository.GitRepositoryHandler
20:22:30.892 [Thread-0] INFO  sonia.scm.BindingExtensionProcessor - bind RepositoryServiceResolver sonia.scm.repository.spi.SvnRepositoryServiceResolver
20:22:30.927 [Thread-0] INFO  sonia.scm.ScmServletModule - configure jersey with package path: sonia.scm
20:22:31.829 [Thread-0] INFO  sonia.scm.repository.DefaultRepositoryManager - added RepositoryHandler class sonia.scm.repository.HgRepositoryHandler for type Type{name=hg, displayName=Mercurial}
20:22:31.838 [Thread-0] INFO  sonia.scm.repository.DefaultRepositoryManager - added RepositoryHandler class sonia.scm.repository.SvnRepositoryHandler for type Type{name=svn, displayName=Subversion}
20:22:31.839 [Thread-0] INFO  sonia.scm.repository.DefaultRepositoryManager - added RepositoryHandler class sonia.scm.repository.GitRepositoryHandler for type Type{name=git, displayName=Git}
20:22:31.844 [Thread-0] WARN  sonia.scm.cache.EhCacheManager - could not find cache sonia.cache.authorizing, create new from defaults
20:22:31.893 [Thread-0] INFO  sonia.scm.boot.BootstrapFilter - fallback to default classloader for GuiceFilter
20:22:37.701 [qtp1749190291-19] ERROR sonia.scm.web.GitReceiveHook - could not handle receive commands
sonia.scm.repository.RepositoryNotFoundException: null
    at sonia.scm.repository.DefaultRepositoryManager.fireHookEvent(DefaultRepositoryManager.java:277) ~[classes/:na]
    at sonia.scm.web.GitReceiveHook.handleReceiveCommands(GitReceiveHook.java:282) [scm-git-plugin-1.24.jar:na]
    at sonia.scm.web.GitReceiveHook.onReceive(GitReceiveHook.java:338) [scm-git-plugin-1.24.jar:na]
    at sonia.scm.web.GitReceiveHook.onPreReceive(GitReceiveHook.java:137) [scm-git-plugin-1.24.jar:na]
    at org.eclipse.jgit.transport.ReceivePack.service(ReceivePack.java:203) [org.eclipse.jgit-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.transport.ReceivePack.receive(ReceivePack.java:160) [org.eclipse.jgit-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.ReceivePackServlet.doPost(ReceivePackServlet.java:187) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727) [javax.servlet-2.5.0.v201103041518.jar:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [javax.servlet-2.5.0.v201103041518.jar:na]
    at org.eclipse.jgit.http.server.glue.UrlPipeline$Chain.doFilter(UrlPipeline.java:237) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.ReceivePackServlet$Factory.doFilter(ReceivePackServlet.java:144) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.UrlPipeline$Chain.doFilter(UrlPipeline.java:235) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.RepositoryFilter.doFilter(RepositoryFilter.java:151) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.UrlPipeline$Chain.doFilter(UrlPipeline.java:235) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.NoCacheFilter.doFilter(NoCacheFilter.java:80) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.UrlPipeline$Chain.doFilter(UrlPipeline.java:235) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.UrlPipeline.service(UrlPipeline.java:215) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.SuffixPipeline.service(SuffixPipeline.java:101) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.MetaFilter.doFilter(MetaFilter.java:175) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at org.eclipse.jgit.http.server.glue.MetaServlet.service(MetaServlet.java:133) [org.eclipse.jgit.http.server-2.1.0.201209190230-r.jar:2.1.0.201209190230-r]
    at sonia.scm.web.ScmGitServlet.service(ScmGitServlet.java:134) [scm-git-plugin-1.24.jar:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [javax.servlet-2.5.0.v201103041518.jar:na]
    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:263) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:178) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:62) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at sonia.scm.web.filter.PermissionFilter.doFilter(PermissionFilter.java:170) [scm-core-1.24.jar:na]
    at sonia.scm.web.filter.HttpFilter.doFilter(HttpFilter.java:102) [scm-core-1.24.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at sonia.scm.web.filter.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:186) [scm-core-1.24.jar:na]
    at sonia.scm.web.filter.HttpFilter.doFilter(HttpFilter.java:102) [scm-core-1.24.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at sonia.scm.filter.BaseUrlFilter.doFilter(BaseUrlFilter.java:100) [classes/:na]
    at sonia.scm.web.filter.HttpFilter.doFilter(HttpFilter.java:102) [scm-core-1.24.jar:na]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449) [shiro-web-1.2.1.jar:1.2.1]
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365) [shiro-web-1.2.1.jar:1.2.1]
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90) [shiro-core-1.2.1.jar:1.2.1]
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83) [shiro-core-1.2.1.jar:1.2.1]
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383) [shiro-core-1.2.1.jar:1.2.1]
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362) [shiro-web-1.2.1.jar:1.2.1]
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125) [shiro-web-1.2.1.jar:1.2.1]
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0.jar:na]
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0.jar:na]
    at sonia.scm.boot.BootstrapFilter.doFilter(BootstrapFilter.java:104) [classes/:na]
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300) [jetty-servlet-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445) [jetty-servlet-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:556) [jetty-security-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1038) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:374) [jetty-servlet-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:189) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:972) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.Server.handle(Server.java:363) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:483) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:931) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:992) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856) [jetty-http-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240) [jetty-http-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82) [jetty-server-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628) [jetty-io-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52) [jetty-io-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) [jetty-util-7.6.8.v20121106.jar:7.6.8.v20121106]
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) [jetty-util-7.6.8.v20121106.jar:7.6.8.v20121106]
    at java.lang.Thread.run(Unknown Source) [na:1.7.0_10]
20:22:37.707 [qtp1749190291-19] WARN  sonia.scm.web.GitReceiveHook - abort git push request with msg: null 
```

我注意到这一点有一个错误：

```
20:22:37.701 [qtp1749190291-19] ERROR sonia.scm.web.GitReceiveHook - could not handle receive commands 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:54:36.367

[您应该使用来自https://bitbucket.org/sdorra/scm-manager/wiki/download](https://bitbucket.org/sdorra/scm-manager/wiki/download)的最新版本的 SCM-Manager 重试。在过去的几个月里，那里有很大的发展。检查您的配置并将日志记录级别增加到 TRACE。也许您的 windows 服务器和 mac 客户端之间存在编码问题。您还应该查阅[http://groups.google.com/group/scmmanager](http://groups.google.com/group/scmmanager)上的邮件列表，以直接从开发人员那里获得帮助。

# r - 启动时运行 R 脚本时找不到库

> ID：14133090
> 
> 赞同：0
> 
> 时间：2013-01-03T04:32:08.123
> 
> 标签：r, ubuntu, amazon-ec2, boot

我已经使用以下很长时间了，但似乎无法使其正常工作。

我要做的是在 R 脚本运行后自动关闭 Ubuntu EC2 实例。

为此，我正在使用`/etc/rc.local`我有如下一行的地方

```
Rscript /home/ubuntu/shutDown.r > /home/down.log 2>&1 
```

脚本被执行，但日志显示

```
Error in library(DBI) : there is no package called 'DBI'
Execution halted 
```

`DBI`是一个库，`shutDown.R`但我知道问题不在于没有`DBI`包，因为当我使用命令行运行脚本时

```
Rscript shutDown.r 
```

一切正常。即使我跑步

```
sudo sh /etc/init.d/rc.local start 
```

有用。

什么可以阻止脚本在启动时加载库？我尝试删除`DBI`，错误出现在下一个库中。因此，脚本在引导期间查找库的方式肯定会发生一些事情。我不知道如何解决这个问题，所以如果有人能提供任何提示，我将非常感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:35:21.540

将本地 R 包安装在`/usr/local/lib/R/site-library`--- 无论如何都是默认位置 --- 并且默认情况下会找到它们。在 DBI 的情况下，您还可以将`r-cran-dbi`其安装到另一个默认目录中。

这一直是我关注近十年的 Debian / Ubuntu 软件包的默认设置。它有效。否则，使用显式库位置参数来`library()`.

# python - 如何在 Python 中循环访问此列表中的用户名和密码？

> ID：14133098
> 
> 赞同：0
> 
> 时间：2013-01-03T04:33:44.230
> 
> 标签：python

我有这样的功能：

```
import csv 

def total():
    with open('test.csv', 'r') as csvfile:
        spamreader = csv.reader(csvfile)
        a = [row for row in spamreader]
        return a 
print total() 
```

的输出是：

```
[['admin@gmail.com', '1234'], ['ok@gmail.com', 'metal'], ['hithere@gmail.com', 'hello']] 
```

我想遍历每个用户名和密码，直到列表结束。目的是我想将用户名和密码一一传递。首先，我想使用 admin@gmail.com 和 1234，然后继续使用另一个。

我尝试使用：

```
 def pass_username():
        with open('test.csv', 'r') as csvfile:
            spamreader = csv.reader(csvfile, delimiter=',')
            a = [row[0] for row in spamreader]
            return a 

def pass_password():
    with open('test.csv', 'r') as csvfile:
        spamreader = csv.reader(csvfile, delimiter=',')
        a = [row[1] for row in spamreader]
        return a 
```

但这会立即返回用户名和密码，如下所示：

```
admin@gmail.com
ok@gmail.com
hihere@gmail.com
1234
metal
hello 
```

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:37:20.183

将其更改为单个函数：

```
def pass_uname_passwd :
    with open('test.csv', 'r') as csvfile:
                spamreader = csv.reader(csvfile, delimiter=',')
                a = [(row[0], row[1]) for row in spamreader] #Make it a list of 2d tuples
                return a 
```

这将返回一个包含用户名、密码的二维元组列表。

```
list = pass_uname_passwd()

for i in list :
#Use as desired, processing each (uname,passwd) at a time 
```

您也可以从第一个函数中简单地执行此操作，之后使用 for 循环。我建议的唯一更改是使用元组而不是列表，以使数据不可变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:47:46.603

我认为其他答案很好地涵盖了它。为了其他稍微不同的方式，您还可以使用生成器来生成`yield`CSV 中的行：

```
In [1]: import csv

In [2]: def unames_passwd():
   ...:     with open('test.csv', 'r') as f:
   ...:         reader = csv.reader(f)
   ...:         for row in reader:
   ...:             yield row
   ...:             
   ...:             

In [3]: for info in unames_passwd():
   ...:     uname, passwd = info
   ...:     print uname, passwd
   ...:     
   ...:     
admin@gmail.com 1234
ok@gmail.com metal
hithere@gmail.com hello 
```

此外，如果您的问题更多是“如何解析我返回的列表？”，您可以这样做：

```
In [8]: l = [['admin@gmail.com', '1234'], ['ok@gmail.com', 'metal'], ['hithere@gmail.com', 'hello']]

In [9]: for info in l:
   ...:     uname, passwrd = info
   ...:     print uname, passwrd
   ...:     
   ...:     
admin@gmail.com 1234
ok@gmail.com metal
hithere@gmail.com hello 
```

此外，根据您在下面的评论，您可以使用`next()`on忽略标题`csv_file`，这将推进迭代一步，这意味着您的`for row in csv_file`循环从 CSV 的第二行开始（注意：`DictReader`这里是另一个选项，每行都返回作为字典`{column_header: value_at_row}`：

```
In [2]: def unames_passwd():
   ...:     with open('test.csv', 'r') as f:
   ...:         reader = csv.reader(f)
   ...:         next(reader)
   ...:         for row in reader:
   ...:             yield row 
```

上面的输出将是相同的，减去第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:44:05.343

一种方法：

```
def total(f):
    with open('test.csv', 'r') as csvfile: 
        spamreader = csv.reader(csvfile) 
        a = [f(row) for row in spamreader]
        return a 
def func(username, password):
    print username, password
print total(func) 
```

或者更直接的方式：

```
def total():
    with open('test.csv', 'r') as csvfile: 
        spamreader = csv.reader(csvfile) 
        for username, password in spamreader:
            print username, password
        return a 
print total() 
```

# c# - 使用 SQL Server Express 和 SQL Server CE

> ID：14133102
> 
> 赞同：1
> 
> 时间：2013-01-03T04:34:15.783
> 
> 标签：c#, .net, sql-server-ce, sql-server-express

我正在编写一个应用程序，我希望用户选择 SQL Server CE 或 SQL Server Express 数据库作为背景。然而，这些使用单独的引用和单独的方法。

是否有适当的 .NET 方法来执行此操作，或者我是否存储用户首选项并在整个程序中使用 if then 语句检查数据库类型，例如：

```
if (Properties.Settings.Default.dbType == 1)
{ SqlConnection blah = new SqlConnection}
else if (Properties.Settings.Default.dbType == 2)
{ SqlCEConnection blah = new SqlCEConnection} 
```

这行得通，似乎应该有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:07:27.303

SqlConnection 和 SqlCEConnection 都扩展了 System.Data.Common.DbConnection，因此将“blah”声明为 DbConnection，您将能够使用相同的方法和属性。

要实际创建正确的连接类型，请使用 System.Data.Common.DbProviderFactories 和 System.Data.Common.DbProviderFactory 类。例如：

```
DbProviderFactory providerFactory = DbProviderFactories.GetFactory("The Provider Name");

using (DbConnection connection = providerFactory.CreateConnection())
{
    connection.ConnectionString = "The Connection String";

    connection.Open();

    // Use the "connection" object here
} 
```

对于“提供者名称”，您可以根据数据库类型输入“System.Data.SqlClient”或“System.Data.SqlServerCe”。然后对于“连接字符串”，您将为提供程序类型输入正确的连接字符串。

**编辑：**此技术适用于您的 App.config 文件和 System.Configuration.ConfigurationManager 类。例如，如果您的 App.config 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
    <connectionStrings>
        <add name="TheConnectionString" providerName="System.Data.SqlClient" connectionString="Blah Blah Blah" />
    </connectionStrings>
</configuration> 
```

然后您可以像这样访问这些配置设置：

```
DbProviderFactory providerFactory = DbProviderFactories.GetFactory(ConfigurationManager.ConnectionStrings["TheConnectionString"].ProviderName);

using (DbConnection connection = providerFactory.CreateConnection())
{
    connection.ConnectionString = ConfigurationManager.ConnectionStrings["TheConnectionString"].ConnectionString;

    connection.Open();

    // Use the "connection" object here
} 
```

# iphone - 使用 GameKit 在 iPhone 游戏应用程序中聊天

> ID：14133105
> 
> 赞同：0
> 
> 时间：2013-01-03T04:35:10.980
> 
> 标签：iphone, objective-c, ios, game-center, gamekit

我想在 iphone 游戏应用程序中使用 GameKit 框架实现 inGame 聊天功能，但是是否可以在没有蓝牙的情况下实现 inGame 聊天？如果是，那怎么办？假设我的游戏好友没有蓝牙响铃，那么我该如何与好友聊天？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:09:06.287

如果您正在谈论使用 GKPeerPicker 进行配对，那么是的，您可以使用`GKPeerPickerConnectionTypeOnline`. 但是，您将不得不自己管理连接。GKPeerPicker 只为蓝牙匹配设置一个 GKSession。

# c# - 我可以在 VS2010 上使用 Directsound 在 Window8 操作系统上使用 C# 吗？

> ID：14133107
> 
> 赞同：2
> 
> 时间：2013-01-03T04:35:18.817
> 
> 标签：c#, windows-8, directx, directsound

我试图安装 xna 4.0 但在 windows8 上出现了一些错误。

我可以将哪个版本的 Directx SDK 用于 C#？

我还尝试安装 DXSDK_Jun10，但是在 .net 文件夹中找不到任何参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:16:42.917

听上去，您对使用 C# 进行 DirectX 开发还是比较陌生。这是个好消息，因为您即将踏上一段伟大的旅程！

这也意味着你目前最好使用一个中间库来为你排序 API 东西，比如很棒的[SlimDX](http://slimdx.org/)。

# c++ - 邻接表图表示的实现

> ID：14133115
> 
> 赞同：9
> 
> 时间：2013-01-03T04:35:54.850
> 
> 标签：c++, data-structures, graph-theory

我刚刚开始使用图论。我不知道如何使用链表对邻接表进行编码。例如，如果我有这个图（无向）：

```
A--------B
|       /|\
|      / | \  
|     /  |  \
|    /   |   \
|   /    |    \
|  /     |     \
| /      |      \
C        E-------D 
```

我该如何编码？我知道如何使用邻接矩阵来做到这一点，但是如何使用邻接列表和链表（c++）对其进行编码？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T04:51:42.293

邻接列表只是列表的向量/数组。图中的每个元素都是数组中的一个元素，并且任何边都被添加到它的邻接列表中。因此它看起来像：

A -> {B, C}

B -> {A、C、D、E}

C -> {A, B}

D -> {B, E}

E -> {B, D}

所以我们从类似的东西开始`std::vector<std::list<vertex>>`。但是，我们可以做得更好，因为顶点是唯一的，因此我们可以利用`map`. 此外，一个顶点只能在一个边列表中出现一次，因此我们将其修改为`std::map<vertex, std::set<vertex>>`。

因此，首先，例如：

```
struct vertex
{
   //
};

class undirected_graph
{
private:
    std::map<vertex, std::set<vertex>> graph_container;
public:
    void add_vertex(const vertex& v) { //add a vertex to the map }
    void add_edge(const vertex& v, const vertex& u) { //look up vertex in map and add to the vertex adjacency list }
    //Other methods
    //...
 }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T04:44:14.233

邻接表只是表示图边缘的一组对象。

```
struct edge {
    node *nodes[2];

    edge( node *a, node *b ) {
        if ( a < b ) { // define canonical order of edges for undirected graph
            nodes[0] = a;
            nodes[1] = b;
        } else {
            nodes[0] = b;
            nodes[1] = a;
        }
    }
}; 
```

链表听起来不是特别实用。通常你会定义边的顺序并将它们放在 a`std::set`或`std::map`中。

```
bool operator< ( edge const &lhs, edge const &rhs ) {
    if ( lhs.nodes[0] < rhs.nodes[0] ) return true;
    if ( rhs.nodes[0] < lhs.nodes[0] ) return false;
    return lhs.nodes[1] < rhs.nodes[1];
}

typedef std::set< edge > graph; 
```

有很多方法可以做到这一点，如果不知道您打算对图表做什么，就很难提出更多建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-05T16:27:01.997

您可以从以下[repo (CXXGraph)](https://github.com/ZigRazor/CXXGraph)的源代码中获得灵感。

这个 repo 包含一个只有头文件的库和一个邻接矩阵的实现。

# javascript - 使用 phonegap 提高 sqlite 性能

> ID：14133118
> 
> 赞同：1
> 
> 时间：2013-01-03T04:36:07.563
> 
> 标签：javascript, android, html, cordova, jquery-mobile

我是 Phonegap 开发人员。我在数据库中创建了两个表。这两个表包含 150 个字段。当页面加载时，我显示来自数据库的数据（即：150 个字段）。但它消耗更多的时间。

有什么方法可以减少显示数据的时间吗？谢谢..

# haskell - 我可以约束一个类型族吗？

> ID：14133121
> 
> 赞同：47
> 
> 时间：2013-01-03T04:36:51.570
> 
> 标签：haskell

在我[最近的回答中](https://stackoverflow.com/a/14132830/828361)，我碰巧打开了这个旧栗子（一个如此古老的程序，其中一半是莱布尼茨在 17 世纪编写的，而我父亲在 70 年代在计算机上编写的）。我将省略现代部分以节省空间。

```
class Differentiable f where
  type D f :: * -> *

newtype K a     x  = K a
newtype I       x  = I x
data (f :+: g)  x  = L (f x)
                   | R (g x)
data (f :*: g)  x  = f x :&: g x

instance Differentiable (K a) where
  type D (K a) = K Void
instance Differentiable I where
  type D I = K ()
instance (Differentiable f, Differentiable g) => Differentiable (f :+: g) where
  type D (f :+: g) = D f :+: D g
instance (Differentiable f, Differentiable g) => Differentiable (f :*: g) where
  type D (f :*: g) = (D f :*: g) :+: (f :*: D g) 
```

现在，令人沮丧的事情来了。我不知道如何规定它*本身*`D f`必须是可微的。当然，这些实例尊重该属性，并且很可能您可以编写有趣的程序，这些程序利用不断区分函子的能力，在越来越多的地方射孔：泰勒展开式，诸如此类。

 *我希望能够说类似的话

```
class Differentiable f where
  type D f
  instance Differentiable (D f) 
```

并要求检查实例声明是否具有`type`存在必要实例的定义。

也许更平凡的东西，比如

```
class SortContainer c where
  type WhatsIn c
  instance Ord (WhatsIn c)
  ... 
```

也会很好。当然，这有 fundep 解决方法

```
class Ord w => SortContainer c w | c -> w where ... 
```

但尝试同样的把戏`Differentiable`似乎……嗯……内卷。

那么，是否有一个很好的解决方法可以让我获得可重复的微分性？（我想我可以构建一个表示 GADT 和 and and ......但是有没有一种方法可以与类一起使用？）

并且当我们声明它们时，我们应该能够要求对类型（以及，我想，数据）族进行约束，然后检查实例是否满足它们的建议，是否有任何明显的障碍？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-03T05:33:09.030

当然，显而易见的事情是直接编写所需的约束：

```
class (Differentiable (D f)) => Differentiable (f :: * -> *) where 
```

唉，GHC 对此很生气，拒绝配合：

```
ConstrainTF.hs:17:1:
    Cycle in class declaration (via superclasses):
      Differentiable -> Differentiable
    In the class declaration for `Differentiable' 
```

因此，在尝试描述类型约束以使 GHC 无法抗拒时，通常会出现这种情况，我们必须诉诸某种不为人知的诡计。

回顾 GHC 的一些相关特性，其中涉及类型黑客：

*   它对类型级别的非终止是偏执的，这与它给用户带来的实际不便程度相去甚远。
*   在考虑所有可用信息之前，它会愉快地做出关于类和实例的决定。
*   它会尽职尽责地尝试检查你欺骗它承诺的任何事情。

这些是熟悉的旧仿泛型实例背后的狡猾原则，其中类型是事后统一的`(~)`，以改进某些类型黑客构造的类型推断行为。

然而，在这种情况下，与其将*类型*信息偷偷溜过 GHC，我们需要以某种方式阻止 GHC 注意到一个*类约束*，这是一种*完全不同*的类型...... heeeey, waaaitaminute....

```
import GHC.Prim

type family DiffConstraint (f :: * -> *) :: Constraint
type instance DiffConstraint f = Differentiable f

class (DiffConstraint (D f)) => Differentiable (f :: * -> *) where
  type D f :: * -> * 
```

由它自己的petard提升！

这也是真正的交易。正如您所希望的那样，这些被接受：

```
instance Differentiable (K a) where
  type D (K a) = K Void
instance Differentiable I where
  type D I = K () 
```

但是，如果我们提供一些废话来代替：

```
instance Differentiable I where
  type D I = [] 
```

GHC 准确地向我们展示了我们希望看到的错误消息：

```
ConstrainTF.hs:29:10:
    No instance for (Differentiable [])
      arising from the superclasses of an instance declaration
    Possible fix: add an instance declaration for (Differentiable [])
    In the instance declaration for `Differentiable I' 
```

当然，有一个小障碍，即：

```
instance (Differentiable f, Differentiable g) => Differentiable (f :+: g) where
  type D (f :+: g) = D f :+: D g 
```

...事实证明，没有充分的根据，因为我们已经告诉 GHC 检查，无论何时`(f :+: g)`是`Differentiable`，所以是`(D f :+: D g)`，这不会很好地结束（或根本没有）。

避免这种情况的最简单方法通常是在一堆显式的基本案例上进行样板化，但在这里 GHC 似乎打算在任何时候`Differentiable`在实例上下文中出现约束时进行分歧。我会假设它以某种方式不必要地渴望检查实例约束，并且可能会被另一层诡计分散足够长的时间，但我不确定从哪里开始，并且已经用尽了我今晚午夜后类型黑客的能力。

* * *

关于#haskell 的一些 IRC 讨论设法让我稍微回忆起 GHC 如何处理类上下文约束，看来我们可以通过更挑剔的约束系列来修补一些东西。使用这个：

```
type family DiffConstraint (f :: * -> *) :: Constraint
type instance DiffConstraint (K a) = Differentiable (K a)
type instance DiffConstraint I = Differentiable I
type instance DiffConstraint (f :+: g) = (Differentiable f, Differentiable g) 
```

我们现在对 sum 有一个表现得更好的递归：

```
instance (Differentiable (D f), Differentiable (D g)) => Differentiable (f :+: g) where
  type D (f :+: g) = D f :+: D g 
```

然而，对于产品来说，递归情况不能那么容易地一分为二，并且仅在我收到上下文减少堆栈溢出而不是简单地挂在无限循环中的情况下，在那里应用相同的更改才能改善问题。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-04T00:37:28.963

你最好的选择可能是使用`constraints`包定义一些东西：

```
import Data.Constraint

class Differentiable (f :: * -> *) where
  type D f :: * -> *
  witness :: p f -> Dict (Differentiable (D f)) 
```

然后您可以在需要递归时手动打开字典。

这将让您在 Casey 的回答中采用解决方案的一般形式，但不会让编译器（或运行时）在归纳时永远旋转。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-23T17:12:56.673

随着`UndecidableSuperclasses`GHC 8 中的新功能

```
class Differentiable (D f) => Differentiable (f :: Type -> Type) where 
```

作品。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-08-30T00:20:56.713

这可以按照 Edward 建议的相同方式完成，即`Dict`. 首先，让我们把语言扩展和导入排除在外。

```
{-# LANGUAGE TypeOperators #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE RankNTypes #-}

import Data.Proxy 
```

`TypeOperators`仅适用于您的示例问题。

### 小字典

我们可以制作自己的小型实现`Dict`. `Dict`使用 GADT 并`ConstraintKinds`在 GADT 的构造函数中捕获任何约束。

```
data Dict c where
    Dict :: c => Dict c 
```

`withDict`并`withDict2`通过 GADT 上的模式匹配重新引入约束。我们只需要能够对具有一两个约束来源的术语进行推理。

```
withDict :: Dict c -> (c => x) -> x
withDict Dict x = x

withDict2 :: Dict a -> Dict b -> ((a, b) => x) -> x
withDict2 Dict Dict x = x 
```

### 无限可微类型

现在我们可以讨论无限可微类型，其导数也必须是可微的

```
class Differentiable f where
    type D f :: * -> *
    d2 :: p f -> Dict (Differentiable (D f))
    -- This is just something to recover from the dictionary
    make :: a -> f a 
```

`d2`获取类型的代理，并恢复字典以获取二阶导数。代理允许我们轻松指定`d2`我们正在谈论的类型。我们可以通过应用来获得更深层次的字典`d`：

```
d :: Dict (Differentiable t) -> Dict (Differentiable (D t))
d d1 = withDict d1 (d2 (pt (d1)))
    where
        pt :: Dict (Differentiable t) -> Proxy t
        pt = const Proxy 
```

### 捕获字典

多项式函子类型、乘积、和、常数和零，都是无限可微的。我们将为`d2`每种类型定义见证人

```
data    K       x  = K              deriving (Show)
newtype I       x  = I x            deriving (Show)
data (f :+: g)  x  = L (f x)
                   | R (g x)
                                    deriving (Show)
data (f :*: g)  x  = f x :&: g x    deriving (Show) 
```

零和常数不需要任何额外的知识来捕获它们的导数`Dict`

```
instance Differentiable K where
  type D K = K
  make = const K
  d2 = const Dict

instance Differentiable I where
  type D I = K
  make = I
  d2 = const Dict 
```

Sum 和 product 都需要来自其组件的两个导数的字典才能推断出字典的导数。

```
instance (Differentiable f, Differentiable g) => Differentiable (f :+: g) where
  type D (f :+: g) = D f :+: D g
  make = R . make
  d2 p = withDict2 df dg $ Dict
    where
        df = d2 . pf $ p
        dg = d2 . pg $ p
        pf :: p (f :+: g) -> Proxy f
        pf = const Proxy
        pg :: p (f :+: g) -> Proxy g
        pg = const Proxy

instance (Differentiable f, Differentiable g) => Differentiable (f :*: g) where
  type D (f :*: g) = (D f :*: g) :+: (f :*: D g)
  make x = make x :&: make x
  d2 p = withDict2 df dg $ Dict
    where
        df = d2 . pf $ p
        dg = d2 . pg $ p
        pf :: p (f :*: g) -> Proxy f
        pf = const Proxy
        pg :: p (f :*: g) -> Proxy g
        pg = const Proxy 
```

### 恢复字典

我们可以恢复字典中的约束，否则我们将没有足够的信息来推断。`Differentiable f`通常只会让使用 get to `make :: a -> f a`，而不是 to`make :: a -> D f a`或`make :: a -> D (D f) a`。

```
make1 :: Differentiable f => p f -> a -> D f a
make1 p = withDict (d2 p) make

make2 :: Differentiable f => p f -> a -> D (D f) a
make2 p = withDict (d (d2 p)) make 
```*

# aptana - Aptana 不保存更改

> ID：14133137
> 
> 赞同：2
> 
> 时间：2013-01-03T04:39:18.830
> 
> 标签：aptana

我已将 Aptana 安装到我的新笔记本电脑上，就像我在所有计算机上安装它一样。当我对项目中的文件进行更改时，这些更改不会写入本地文件本身（通过在记事本等其他程序中打开文件来确认这一点）。但是，如果我在 Aptana 中重新打开该文件（即使我重新启动计算机），我仍然可以看到我对该文件所做的更改。

我以前从未见过 Aptana 这样做。在我所有的其他计算机上，这不会发生。通常我只是在我的项目中打开文件，保存我的更改，并且更改会立即保存，以供我通过 FTP 文件访问。

起初我认为这是一个权限问题，因为即使在记事本中打开文件也无法保存文件。我更新了文件夹权限，但这仍然没有解决任何问题。

任何人都可以提出解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T13:09:41.623

我有两种经历。

1.  如果我使用现有的 .git 创建了一个新项目，那么不会将任何更改写入 git 在原始目录中管理的文件。

2.  如果我从一个文件夹（没有 git）创建了一个新项目，并且没有将任何更改写入该原始目录。

作为一般规则，Aptana 会将文件的内容复制到它正在使用的“项目目录”（我的机器上的默认值为 ~/Documents/Aptana.../ProjectName）。

因此，您要么必须将项目目录设置为保存文件的父目录，要么必须开始使用 project-dir/ProjectName 目录作为工作文件夹。

每当您想将文件复制到另一个本地目录时，您也可以执行“文件->导出->常规->文件系统”。

# android - 如何在android的地图上显示数据库中存储的位置？

> ID：14133138
> 
> 赞同：2
> 
> 时间：2013-01-03T04:39:22.013
> 
> 标签：android, phpmyadmin, android-maps

我想构建一个应用程序，它将在用户一定半径内的地图上显示存储在数据库中的餐厅（名称、纬度、经度等......）。然后，用户可以单击特定餐厅以查看更多信息或添加关于该餐厅的评论。我知道如何使用 JSON 和 PHP 从数据库中获取餐厅名称并将它们显示在列表视图中。但我希望能够在地图上显示它们。有人可以为我指出如何完成这项工作的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:01:36.647

假设您有一个 Restaurant 对象列表，您可以从数据库中的数据构建这些对象：

```
private void addMarkers(List<Restaurant> restaurants){
    for(Restaurant res : restaurants){
        MarkerOptions options = new MarkerOptions();
        options.position(new LatLng(res.getLatitude(), res.getLongitude()));
        options.title(res.getName());
        options.snippet(tagsnap.getAddress());
        getMap().addMarker(options);
    }
} 
```

用类似这样的方式调用它：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    ...
    ...
    List<Restaurant> restaurants = databaseHelper.fetchAllRecordsAsRestaurantList();
    addMarkers(restaurants);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:04:25.807

您需要获取要显示的餐厅的 GPS 坐标。您可以显示名称，但需要将坐标传递给 a`MapView`以便它可以将它们显示为地图上的叠加项目。

这些教程将帮助您：

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

# internet-explorer - 64 位 BHO 未在 IE 9 64 中加载

> ID：14133139
> 
> 赞同：4
> 
> 时间：2013-01-03T04:39:23.817
> 
> 标签：internet-explorer, 64-bit, bho, add-on

我创建了 BHO（C++ 代码）的 32 位和 64 位版本。32 位版本在 IE 9 32 位中可以正常加载，但在 Windows 7 上的 IE 9 64 中不能正常加载 64 位版本。

我已经仔细检查过：

*   64 位 DLL 确实是 64 位代码（`dumpbin /headers`在 DLL 上）
*   注册表项`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Explorer\Browser Helper Objects`并且`HKEY_CLASSES_ROOT\Wow6432Node\CLSID`是正确的
*   我的 64 位 IE 可以加载第 3 方扩展（实际加载了 2 个 BHO）

我现在不知道该怎么做才能调试问题。

注意：我知道[浏览器帮助对象没有在 IE8 中加载](https://stackoverflow.com/questions/2491030/browser-helper-object-doesnot-get-loaded-in-ie8)以及其他有关 64 位 BHO 的相关问题，但他们的问题和解决方案是不同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:32:41.153

问题是我对如何为 64 位注册 BHO 的误解。通过调用 regsvr32 的 32 位或 64 位版本，DLL 将被注册为 32 位 (Wow6432Node) 或 64 位。我不必担心在我的 DLL 中使用哪个注册表，只需调用正确的 regsvr32。

# android - Intent.ACTION_VIEW 视频：外部存储视频“抱歉，此视频无法播放”，但在普通安卓播放器中可以播放

> ID：14133140
> 
> 赞同：1
> 
> 时间：2013-01-03T04:39:46.070
> 
> 标签：android, android-intent, android-video-player

所以我正在从外部存储（sdcard）播放视频，播放视频时遇到问题，这是我的代码：

```
Uri uri = Uri.parse(url);
intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(uri, "video/*"); 
```

提示“抱歉，此视频无法播放”，但在普通安卓播放器中可以播放。我打印了网址，这就是我得到的：

```
VideoPlayer url: file:///mnt/sdcard/foldername/video-2012-12-26-21-26--44.mp4 
```

是不是uri的问题？如果没有，你能指出我正确的方向吗？另外，如果我尝试使用带有点（。）的文件夹名称，我会遇到问题吗？

```
url = file:///mnt/sdcard/Android/data/com.example.project/video-2012-12-26-21-26--44.mp4 
```

谢谢。

编辑：由于我的真正问题没有解决，而且没有人想再回答了，我提出了一个新问题： [Android：视频可从画廊播放，但当我使用 Intent.ACTION_VIEW 类型视频播放时，无法播放](https://stackoverflow.com/questions/14138130/android-video-is-playable-from-gallery-but-when-i-play-it-using-intent-action-v)

**我的问题的部分答案：**

由于命名约定，会出现此问题。我认为播放器不接受包含“--”的文件名。所以我通过更改文件名格式解决了这个问题。

//免责声明：我没有完整的解释和来源，但此信息只是从我的解决方法中推断出来的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T04:46:44.077

确保您使用 Intent 传递正确的 sdcard 路径。最好的方法是使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html)获取 SDCARD 路径而不是传递静态字符串：

```
intent = new Intent(Intent.ACTION_VIEW);

File sdCard = Environment.getExternalStorageDirectory();
File file = new File(sdCard, "/foldername/video-2012-12-26-21-26-44.mp4");

intent.setDataAndType(Uri.fromFile(file), "video/*");

startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-22T15:58:26.983

您首先需要将路径转换为真实路径。例如，如果您有类似 content://flod/123 的路径，则需要将其转换为类似 foldername/file.mp4 + Environment.getExternalStorageDirectory() 的路径

所以你的路径字符串将是： String path = Environment.getExternalStorageDirectory() + "foldername/file.mp4"; 然后您需要将其转换为文件：

文件文件 = 新文件（路径）；

最后在该行中使用它：

intent.setDataAndType(Uri.fromFile(file), "video/*");

# angularjs - angularjs 指令中 ngRepeat 的 $index

> ID：14133141
> 
> 赞同：37
> 
> 时间：2013-01-03T04:39:48.290
> 
> 标签：angularjs, ng-repeat

我正在尝试找到在与自定义指令一起使用的 ngRepeat 中获取索引位置的最佳方法。我要解决的问题是，对于 ngRepeat 的每次迭代，我想知道我在迭代中的位置，以便我可以根据该索引位置创建自定义模板。

除非有更好的方法可以做到这一点，否则我正在尝试根据指令中的此文档执行此功能：

> & 或 &attr - 提供一种在父作用域的上下文中执行表达式的方法。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的小部件定义：{ localFn:'&myAttr'}，则隔离范围属性 localFn 将指向 count = count + value 表达式的函数包装器。通常希望通过表达式将数据从隔离范围传递到父范围，这可以通过将局部变量名称和值的映射传递到表达式包装器 fn 来完成。例如，如果表达式是 increment(amount)，那么我们可以通过将 localFn 调用为 localFn({amount: 22}) 来指定数量值。

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

我很难理解这句话到底在告诉我什么。所以，我试图做的是......

首先，在“testTemplate”中将 ngRepeat 指令与我的指令一起使用：

```
<ul>
   <li my-attr="test()" my-directive ng-repeat="value in values" class="span2">
   </li>
</ul> 
```

接下来，我的指令定义：

```
angular.module('myModule', [])
       .directive('myDirective', function() {
            return {
                replace : true,
                transclude : true,
                scope : {
                    test: '&myAttr'
                },
                templateUrl: 'partials/myTemplate.html',
                link : function(scope, element, attrs) {
                    alert(scope.count);
                }
            }
        }); 
```

现在最后，我试图在控制器中为引用指令的父模板定义“测试”函数。

```
function TestTemplateCtrl($scope, testTemplate) {
    $scope.test = function() {
        alert('in test');
        $scope.count = "1";
    }
} 
```

所以第一个问题是我在父级中的“测试”函数根本没有被执行。也许我不明白应该如何调用父控制器中的测试函数。现在我实际上也没有增加，但是如果我可以触发测试功能，当我到达那个点时，我会增加计数的正确方法是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-03T16:02:24.497

而不是`scope.$parent.$index`您可能会考虑将 $index 作为指令属性传递：

```
<li my-directive index="{{$index}}" ng-repeat="value in values"> 
```

指示：

```
myApp.directive('myDirective', function() {
    return {
        replace: true,
        // transclude: true,
        scope: {
            index: '@'
        },
        template: '<div>testing {{index}}</div>',
        link: function(scope, element, attrs) {
            // ...
        }
    }
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/4qW7h/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:44:59.777

正如您所指出的，您可以使用 $index.html 获取索引。

为什么你的测试功能没有触发，你没有执行它。在指令的链接功能中，您需要以下内容：

```
scope.$eval(attrs.myAttr); 
```

# sql - 使用多行条件构建 SQL 查询

> ID：14133142
> 
> 赞同：3
> 
> 时间：2013-01-03T04:39:53.720
> 
> 标签：sql, sql-server, sql-server-2008

我需要在 SQL 中构建查询以获取具有类似文本的行`'TEXT1\r\nTEXT2'`。

例如这样的：

```
SELECT * 
from Table1 
where Name LIKE '%TEXT1\r\nTEXT2%' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:42:37.693

```
SELECT * FROM Table1 WHERE Name LIKE '%TEXT1' + CHAR(13) + CHAR(10) + 'TEXT2%'; 
```

[http://msdn.microsoft.com/en-us/library/ms187323.aspx](http://msdn.microsoft.com/en-us/library/ms187323.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:41:33.760

[`CHAR`您可以使用以下功能](http://msdn.microsoft.com/en-us/library/ms187323.aspx)将字符放入：

```
SELECT *
FROM Table1
WHERE Name LIKE '%TEXT1' + CHAR(13) + CHAR(10) + 'TEXT2%' 
```

* * *

在某些 RDBMS 中，您还可以在常量中添加文字换行符（尽管看起来 SQL Server 忽略了这一点，至少在 SQL Fiddle 上：

```
SELECT *
FROM Table1
WHERE Name LIKE '%TEXT1
TEXT2%' 
```

# passport.js - Passport.js 服务器自动登录

> ID：14133143
> 
> 赞同：2
> 
> 时间：2013-01-03T04:40:00.447
> 
> 标签：passport.js

Passport.js 提供了一个方法 req.login，req 是对服务器的请求。

是否可以在不向客户端发出请求的情况下在服务器端实现自动登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T11:50:31.503

我假设您的意思是如果用户之前已通过身份验证，则无需用户进行显式登录。鉴于您已在快速设置中添加了护照中间件：

```
app.use(passport.initialize());
app.use(passport.session()); 
```

它将检查客户端是否已经拥有`passport`cookie 并自动将他重定向到他通常会成功进行身份验证的任何地方。

# java - 并发修改异常的问题

> ID：14133145
> 
> 赞同：3
> 
> 时间：2013-01-03T04:40:28.960
> 
> 标签：java, multithreading, exception, concurrency

我有一个线程即时调用更新 XML 文件。

```
 public synchronized void updateVouchXML() {
        new Thread(new updateVouchXML((BotLinkedMap<String, IPlayer>)botList.getPlayerData().clone())).start();
    } 
```

在此线程运行方法中，我在克隆地图时收到并发修改错误。我之前处理过并发修改问题，通常的解决方案是关闭您迭代的对象。我从来没有遇到过克隆对象导致异常的问题。有什么建议吗？

```
/**
*
* @author Mark
*/
public class updateVouchXML implements Runnable {

    BotLinkedMap<String, IPlayer> players;
    DocumentBuilderFactory dbf;
    DocumentBuilder db;
    Document doc;
    Element vdata;

    public updateVouchXML(BotLinkedMap<String, IPlayer> players) {

        this.players = players;
        dbf = DocumentBuilderFactory.newInstance();
        try {
            db = dbf.newDocumentBuilder();
        } catch (ParserConfigurationException ex) {
            Logger.getLogger(updateVouchXML.class.getName()).log(Level.SEVERE, null, ex);
        }
        doc = db.newDocument();
    }

    @Override
    public void run() {
        try {

            vdata = doc.createElement("vouchdata");
            doc.appendChild(vdata);

            BotLinkedMap<String, IPlayer> clone = (BotLinkedMap<String, IPlayer>) players.clone();
            for (Entry<String, IPlayer> e : clone.entrySet()) {
                IPlayer p = e.getValue();
                vdata.appendChild(p.writeToXML(doc));
            }

            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer(); // An identity transformer
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File("vouchdata.xml"));

            transformer.transform(source, result);
        } catch (TransformerException ex) {
            Logger.getLogger(updateVouchXML.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

错误特别在这里

```
BotLinkedMap<String, IPlayer> clone = (BotLinkedMap<String, IPlayer>) players.clone();
        for (Entry<String, IPlayer> e : clone.entrySet()) {
            IPlayer p = e.getValue();
            vdata.appendChild(p.writeToXML(doc));
        } 
```

机器人链接地图

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package InHouseLeague.Connections;

import java.util.LinkedHashMap;

/**
*
* @author Mark
*/
public class BotLinkedMap<O1, O2> extends LinkedHashMap<O1, O2> {

    @Override
    public O2 get(Object key) {
        if (key instanceof String) {
            return super.get(((String) key).toLowerCase());
        }

        return super.get(key);
    }

    @Override
    public boolean containsKey(Object key) {
        if (key instanceof String) {
            return super.containsKey(((String) key).toLowerCase());
        }

        return super.containsKey(key);
    }

    @Override
    public O2 remove(Object key) {
        if (key instanceof String) {
            return super.remove(((String) key).toLowerCase());
        }

        return super.remove(key);
    }

    @Override
    public O2 put(O1 key, O2 value) {

        O1 modKey = key;
        O2 modVal = value;

        if (key instanceof String) {
            modKey = (O1) ((String) key).toLowerCase();
        }

        if (value instanceof String) {
            modVal = (O2) ((String) value).toLowerCase();
        }
        return super.put(modKey, modVal);

    }
} 
```

写到XML

```
@Override
public Element writeToXML(Document doc) {
    Element udata = doc.createElement("player");
    try {

        udata.setAttribute("ban", new Long(ban.getDurationMilliseconds()).toString());

        Attr name = doc.createAttribute("name");
        name.setValue(getUserNamePlain());
        udata.setAttributeNode(name);

        Attr qauth = doc.createAttribute("qauth");
        qauth.setValue(getQAUTH().toLowerCase());
        udata.setAttributeNode(qauth);

        Attr rankz = doc.createAttribute("rank");
        rankz.setValue(getRankString().toLowerCase());
        udata.setAttributeNode(rankz);

        Attr vouchedByz = doc.createAttribute("vouchedBy");
        vouchedByz.setValue(getVouchedBy().toLowerCase());
        udata.setAttributeNode(vouchedByz);

        Element eloz = doc.createElement("elo");
        eloz.appendChild(doc.createTextNode(getELO().toString()));
        udata.appendChild(eloz);

        Element matchez = doc.createElement("matches");
        matchez.appendChild(doc.createTextNode(getMatches().toString()));
        udata.appendChild(matchez);

        Element winz = doc.createElement("wins");
        winz.appendChild(doc.createTextNode(getWins().toString()));
        udata.appendChild(winz);

        Element mvpNode = doc.createElement("mvp");
        for (MVP m : getMVP()) {
            mvpNode.appendChild(m.writeToXML(doc));
        }
        udata.appendChild(mvpNode);

        Element truantNode = doc.createElement("truant");
        truantNode.setAttribute("level", new Integer(getTruantCount()).toString());
        for (Truant m : getTruantList()) {
            truantNode.appendChild(m.writeToXML(doc));
        }
        udata.appendChild(truantNode);

        Element history = doc.createElement("history");
        for (GameSummary game : getGameHistory()) {
            history.appendChild(game.writeToXML(doc));
        }

        udata.appendChild(history);
    } catch (Exception ex) {
         udata = doc.createElement("player"); 
    }

    return udata;

} 
```

堆栈跟踪

```
Exception in thread "Thread-13" java.util.ConcurrentModificationException
at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:390)
at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:409)
at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:408)
at java.util.HashMap.putAllForCreate(HashMap.java:451)
at java.util.HashMap.clone(HashMap.java:682)
at InHouseLeague.Workers.updateVouchXML.run(updateVouchXML.java:55)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:49:10.953

我怀疑您正在克隆僵尸列表两次。一旦你创建线程，

```
new updateVouchXML((BotLinkedMap<String, IPlayer>)botList.getPlayerData().clone())).start()) 
```

还有一次在 run() 中。

并且中间副本，即`this.players`字段，**不是 final**。所以这可能是那些不起眼的“过早发布”错误之一。- this.players 的第二个克隆正在发生，而 this.players 的第一个克隆仍在“进行中”。

1.  尝试制作玩家`final`。在任何奇怪的线程错误问题中，总是尽你所能`final`。
2.  只尝试克隆一次。

我有 99% 的把握其中一个会修复它。

如果一切都失败了，捕获 ConcurrentModificationException 并再次尝试克隆。

# iphone - 单击文本框上的滚动视图

> ID：14133147
> 
> 赞同：-1
> 
> 时间：2013-01-03T04:40:46.143
> 
> 标签：iphone, xcode4.5

我的滚动视图上有一些文本框。当用户单击文本框时，滚动视图应该自动滚动。所以我可以避免一些文本框隐藏在虚拟键盘后面。请有人帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T04:53:31.920

```
Try below code my friend....

- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
 scroll.contentOffset=CGPointMake(0,25);//you can set position of y(25 here) anything as per your confort and how much do you want to scroll.

} 
```

让我知道它是否有效！

编码快乐！！！！

# android - 如何突出显示图像中的区域？

> ID：14133152
> 
> 赞同：0
> 
> 时间：2013-01-03T04:41:10.587
> 
> 标签：android, image

我正在玩一个应用程序，它使用 facebook 风格的方法来帮助使用选择方形大小的个人资料图片。这是一个屏幕截图：![在此处输入图像描述](../Images/8cb53aecb965413f0e8e726df872f2fc.png)

现在我很想知道他们是如何实现这一点的。他们是否使用单个图像，然后在将正方形移到图像上时动态突出显示该区域？还是他们使用两张图像，一张在另一张上面，并在移动正方形时渲染正确的区域？如果前者是可能的，那怎么做？我猜底部图像中添加了一个 alpha 值，但如果是这样，你怎么能用顶视图取消它，从而突出显示该区域？

谢谢！

# iphone - 使用 Facebook SDK 和 Windows Azure SDK 时的 xcode 链接问题

> ID：14133153
> 
> 赞同：6
> 
> 时间：2013-01-03T04:41:22.377
> 
> 标签：iphone, xcode, azure, facebook-ios-sdk

我正在构建一个使用最新 Facebook SDK (v3.1) 和 Windows Azure iOS Toolkit SDK 的应用程序。

现在，Azure SDK 需要将 -all_load 和 -ObjC 标志添加到 Build Settings 中的“Other Linker Flags”参数中。这是在链接到包含类别的 Objective-C 静态库时修复已知错误所必需的（请参阅[http://developer.apple.com/library/mac/#qa/qa1490/_index.html](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)）。如果没有此设置，Azure SDK 在调用某些方法时会生成“无法识别选择器”的运行时异常。很好，问题解决了。

但是，Facebook SDK 不会在设置这些标志的情况下构建。构建时会产生以下错误：

```
Undefined symbols for architecture i386:
   "_OBJC_CLASS_$_SLComposeViewController", referenced from:
      objc-class-ref in FacebookSDK(FBNativeDialogs.o)
  "_SLServiceTypeFacebook", referenced from:
      +[FBNativeDialogs composeViewControllerWithSession:handler:] in 
FacebookSDK(FBNativeDialogs.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

关于如何让这两个库很好地结合在一起的任何想法？一个库想要这些标志，而另一个库不会在设置这些标志的情况下构建。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-03T04:49:44.877

您是否已将社交和帐户框架添加到您的项目中？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-06T08:32:10.960

在 Targets、General、Linked Frameworks 和 Libraries 下添加：

Social.framework 和 Accounts.framework

# node.js - Connect's Memory Store - 解决 Node Webservers 的生产限制

> ID：14133154
> 
> 赞同：3
> 
> 时间：2013-01-03T04:41:24.520
> 
> 标签：node.js, session, express, connect

我已经阅读了一些关于如何为会话（用于 Node/Express 设置）安装持久存储解决方案对于小型网站（redis、mongo 等）来说似乎有点矫枉过正的各种评论。

除了持久性之外，我只能发现旧会话的垃圾收集是不在生产网站中使用 Memory Store 的原因......（即我关闭浏览器，但会话仍存储在服务器上的 Memory Store 中）

我投入了类似这个简单的垃圾收集器来解决这个问题：

```
 var sessionGarbageCollector = function(req, res, next) {
       // Set a session lifetime (Renewed each time this is called)
       var now = new Date();
       var expirydate = now.getime();
       expirydate += 60000; // Some Session lifespan
       req.session.LifeTime = expirydate;
       req.session.sessionID = req.sessionID; // Make session ID accessible inside session

       // Loop through all sessions and check for expired sessions      
       for ( var x in req.sessionStore.sessions ) {           
           req.sessionStore.get(x, function(err,sessionObj) {
               if ( sessionObj.LifeTime ) {                   
                   if ( now.getTime() > sessionObj.LifeTime ) {
                       console.log("Removing Expired Sesson: " + sessionObj.sessionID);
                       req.sessionStore.destroy(sessionObj.sessionID, function(err,data) { } );
                   }
               }
           });
       }

       next();
} 
```

然后我包括以下内容，以便在每个请求上运行它——所以每次有人请求一个页面时，垃圾收集器都会检查是否应该删除任何会话：

```
app.use(sessionGarbageCollector); 
```

现在可能，我不想每次都调用它，但仅在 10 分钟后或某个间隔后的请求中调用......但这已经足够接近我想要的了。（对于“让我登录”会话，我会在客户端上覆盖会话密钥 cookie 的“仅会话”状态，并设置一个特定的到期日期——在与 req.session.LifeTime 的会话中具有匹配的到期日期，这样你就得到了保留会话...好吧，如果没有人重新启动服务器...）

**我想知道这种方法还有哪些我没有看到的其他问题？（即除了垃圾收集，内存存储还有什么其他限制）**

**其他人对此有何经验？也许其他人已经尝试过这种事情？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T10:13:12.093

我不明白使用外部内存存储是多么过分。它们非常适合处理会话。例如，Redis 是一个键/值存储，其中值具有生存时间，因此您不必担心内存管理等。TJ Holowaychuk 制作了一个使用 Redis 作为后端的简洁内存存储：[connect-redis](https://github.com/visionmedia/connect-redis)

所以你需要： 1) 安装 Redis (最多需要 5 分钟，如果你的服务器的防火墙已经启动，默认配置就可以了) 2) 安装 connect-redis 并将其用作带有 Connect 或 Express 会话的会话存储中间件 3) 利润。另一个好处是 Redis 还可以用作 Express 应用程序和系统其他组件之间的消息提供程序。很方便。

# php - 如何在php中基于值连接数组元素

> ID：14133163
> 
> 赞同：1
> 
> 时间：2013-01-03T04:42:19.253
> 
> 标签：php

我有这样的数组：

```
Array
(
    [attribute] => Array
        (
            [0] => sku
            [1] => sku
            [2] => attribute_set_id
        )

    [value] => Array
        (
            [0] => 1, 2, 3
            [1] => 3, 4
            [2] => 4
        )

) 
```

`sku`在上面的数组中，属性就像键，值是值。我想像这里需要的那样连接相同的键值`(1,2,3,4)`。我可以通过组合数组加入它们。结果数组会像

```
array('sku'=>'1,2,3,4',attribute_set_id=>'4'); 
```

上面的数组将是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:49:40.223

我认为没有内置函数可以完成这项工作，您必须自己编写算法，例如

```
$result = array();
foreach ($array['attribute'] as $i => $key)
{
    $value = str_replace(' ', '', $array['value'][$i]);
    if (isset($result[$key]))
        $result[$key] = implode(',', array_unique(array_merge(explode(',', $result[$key]), explode(',', $value))));
    else
        $result[$key] = $value;
} 
```

# javascript - 如何解析 Google Fusion Tables 中的几何字段以缩放到 Google Maps API V3 中的多边形坐标？

> ID：14133173
> 
> 赞同：0
> 
> 时间：2013-01-03T04:44:21.020
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables, google-visualization

我在这里有一张使用 Google 的 Fusion Tables and Maps API V3 的功能[地图](http://www3.telus.net/dana/sd8/catchment/catchmentSD8V2.html)。除了我的 3 个多边形外，一切都正常工作，当我想出下一步时，我将修复这些多边形。有人问我是否可以让每个复选框选择缩放到有问题的多边形。我已尝试使用该`geoXml.parseKmlString()`方法和 Google 的 Visualization API 来完成此请求，如许多其他帖子中所建议的那样，但没有运气。我对 JavaScript 还是比较陌生，对 Google 的 geoxml3 KML 处理器和可视化 API 还是完全陌生的。

我查看了各种示例来尝试解决这个问题，我能找到的最接近的是：

[装配图](http://www.geocodezip.com/geoxml3_test/www_advocacy_ucla_edu_Assembly_MapC.html)

我无法让它与我的代码一起使用。

有没有人对我如何将 Assembly Map 中的代码合并到我的代码中以使用我已有的功能代码有任何建议？

谢谢你的时间。

我目前的代码如下：

```
var map;
var catchSD8 = new google.maps.LatLng(50.0267110, -116.907234);
var tableId = '1yc4wo1kBGNJwpDm6e-eJY_KL1YhQWfftjhA38w8';
var varID = [
    "Adam Robertson Elementary",
    "Blewett Elementary",
    "Brent Kennedy",
    "Canyon-Lister Elementary",
    "Crawford Bay Elementary/Secondary",
    "Erickson Elementary",
    "Hume Elementary",
    "JV Humphries Elementary",
    "JV Humphries Secondary",
    "Jewett Elementary",
    "Kootenay Lake",
    "Lower Kootenay Band",
    "LV Rogers Secondary",
    "Mount Sentinel Middle",
    "Mount Sentinel Secondary",
    "Prince Charles Secondary",
    "Redfish Elementary",
    "Rosemont Elementary",
    "Salmo Elementary",
    "Salmo Secondary",
    "Trafalgar Middle School",
    "W.E. Graham Community Elementary",
    "W.E. Graham Community Secondary",
    "Winlaw Elementary",
    "Yahk Elementary"       
];

function initialize() {
    var myOptions = new google.maps.Map(document.getElementById('map_canvas'), {
      center: catchSD8,
      zoom: 8,
      zoomControl: true,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL
      },
      scaleControl: true,
      scaleControlOptions: {
        position: google.maps.ControlPosition.BOTTOM_LEFT
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
    var layer = new google.maps.FusionTablesLayer();
    filterMap(layer, tableId, map);

    var mySchool; 
    var limit = varID.length;
    for(var i=0; i < limit; i++){
        mySchool = document.getElementById(varID[i]);
        (function(schl,lyr,tbl,mp){
            google.maps.event.addDomListener(schl,'click', function() {
                filterMap(lyr,tbl,mp);                 
            });

        }(mySchool,layer,tableId,map));
    }
}

// Filter the map based on checkbox selection.
function filterMap(layer, tableId, map) {
    var where = generateWhere();

    if (where) {
      if (!layer.getMap()) {
        layer.setMap(map);
      }
      layer.setOptions({
        query: {
          select: 'Location',
          from: tableId,
          where: where
        }
      });
    } else {
      layer.setMap(null);
    }
}

// Generate a where clause from the checkboxes. If no boxes
// are checked, return an empty string.
function generateWhere() {
    var filter = [];
    var schools = document.getElementsByName('school');
    for (var i = 0, school; school = schools[i]; i++) {
      if (school.checked) {
        var schoolName = school.value.replace(/'/g, '\\\'');
        filter.push("'" + schoolName + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "School IN (" + filter.join(',') + ')';
    }
    return where;
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:28:25.287

您首先需要加载使用的库：

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>         
    <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js"></script>
    <script type="text/javascript">
    google.load('visualization', '1', {'packages':['corechart', 'table', 'geomap']});
    </script> 
```

还将功能复制`zoom2query()`到`zoomTo()`您的文档中。

在你的函数 filterMap() 调用 zoomToQuery() ，查询作为参数：

```
function filterMap(layer, tableId, map) {
    var where = generateWhere();

    if (where) {
        zoom2query('SELECT Location from '+tableId+ ' where '+where);
        //continue with your code 
```

# jsf - ExternalContext#getRequestParameterMap() 不提供 GET 请求参数

> ID：14133175
> 
> 赞同：1
> 
> 时间：2013-01-03T04:44:33.913
> 
> 标签：jsf, http-request-parameters

我想要做的是能够通过 URL 传递参数并在是否传递此参数时执行某些操作。我正在使用 JSF + Richfaces。

例如，如果我尝试访问 http://localhost/myapp/home.jsf

```
public class My Bean {

private boolean printHello = false;

public MyBean(){
  FacesContext fc = FacesContext.getCurrentInstance();
  String printHello = fc.getExternalContext().getRequestParameterMap().get("printHello");
  if (printHello != null && printHello.equals("true")
    printHello = true;
}

public void myFunction() {
  if (printHello)
    System.out.println("test");
    //other stuff
    //ask for some user input
}

//When user validate his input, this function is called
public void myFunction2() {
  //some stuff
} 
```

}

当我在 myFunction() 中要求用户输入时，我的页面上还有一个链接可以重新开始整个过程​​。如果单击该链接后，然后手动将 url 更改为 http://localhost/myapp/home.jsf?printHello=true

bean 不会被清除，我的 printHello 标志仍将设置为 false。

此外，当以下将再次执行时：

```
FacesContext fc = FacesContext.getCurrentInstance();
String printHello = fc.getExternalContext().getRequestParameterMap().get("printHello"); 
```

printHello 将为空，这就是我没有得到的。也许是因为不是所有页面都被重新渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:08:54.670

JSF2 可以使用`<h:link>`和处理 GET 参数`<h:button>`（[查看此页面](http://docs.oracle.com/cd/E19798-01/821-1841/giqzd/index.html)）如果您需要处理 GET 参数（将它们绑定到您的支持 bean），这里有两个相关的问题：

1.  [https://stackoverflow.com/a/7775203/141438](https://stackoverflow.com/a/7775203/141438)
2.  [https://stackoverflow.com/a/3355737/141438](https://stackoverflow.com/a/3355737/141438)

此外，为了让 fc.getExternalContext().getRequestParameterMap().get("printHello") 工作，将您的代码移动到带`@PostConstruct`注释的方法而不是构造函数，并确保您的支持 bean 具有适当的范围。

# android - Android AsyncTask 网络连接

> ID：14133180
> 
> 赞同：0
> 
> 时间：2013-01-03T04:45:17.823
> 
> 标签：android, android-asynctask

我正在尝试通过按下 android 上的按钮向互联网发送命令。

我知道网络部分不应该写在主线程上，所以我使用 AsyncTask 来做。

出乎意料的是，当我运行 Android Emulator 时，它总是在我按下按钮时关闭。

```
public class DroneMain extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_drone_main);
    droneNavaSocket=new DroneNavaSocket();
    droneNavaSocket.execute();
    ////////
    btnForward=(Button)findViewById(R.id.forwardBtn);        

}

public Button.OnClickListener btnForwardListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        action = "Go Forward (pitch+)";
        Log.e("///button","forward_enter1");
        // at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(speed) + ",0,0,0";
        at_cmd = "AT*PCMD=" + (seq++) + ",1,0," + intOfFloat(-speed) + ",0,0";
        Log.e("///button","forward_enter2");
         //     AT*PCMD=1,0,-1110651699,0,0 'forward
        Log.e("///button","outforward");
        try {
            send_at_cmd(at_cmd);
            Log.e("///button","forward");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

};

    @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_drone_main, menu);

    return true;
}
public void send_at_cmd(String at_cmd) throws Exception {
    String ip = "192.168.1.1";
    StringTokenizer st = new StringTokenizer(ip, ".");
    byte[] ip_bytes = new byte[4];
     if (st.countTokens() == 4){
          for (int i = 0; i < 4; i++){
              ip_bytes[i] = (byte)Integer.parseInt(st.nextToken());
          }
      }
      else {
          System.out.println("Incorrect IP address format: " + ip);
          System.exit(-1);
      }
      try {
        inet_addr = InetAddress.getByAddress(ip_bytes );
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("AT command: " + at_cmd);        
    byte[] buffer = (at_cmd + "\r").getBytes();
    DatagramPacket packet = new DatagramPacket(buffer, buffer.length, inet_addr, PORT);
    socket.send(packet);
    Log.e("///send at command","at command topic");
    //socket.receive(packet); //AR.Drone does not send back ack message (like "OK")
    //System.out.println(new String(packet.getData(),0,packet.getLength()));    
    }
public class DroneNavaSocket   extends AsyncTask<String, Integer, Boolean>{  

      protected void onPreExecute(){
        // TODO Auto-generated method stub      
        //handler =new Handler();
        //handler.postDelayed(runnable, 0);
           super.onPreExecute();

      try {
        socket = new DatagramSocket();
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }//Use UDP to transfer
      try {
        socket.setSoTimeout(3000);
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }/*Enable/disable SO_TIMEOUT with the specified timeout, in milliseconds. */        
      try {
        send_at_cmd("AT*CONFIG=1,\"control:altitude_max\",\"2000\"");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } //altitude max 2m

     } 
    @Override
    protected Boolean doInBackground(String... arg0)
     {

        btnForward.setOnClickListener(btnForwardListener);
        btnBackward.setOnClickListener(BackwardListener);
        btnLeft.setOnClickListener(btnLeftListener);
        btnRight.setOnClickListener(btnRightListener);
        btnUp.setOnClickListener(btnUpListener);
        btnDown.setOnClickListener(btnDownListener);
       // btnEmrgency.setOnClickListener(btnEmrgencyListener);
        btnTakeoff.setOnClickListener(btnTakeoffListener);
        btnLanding.setOnClickListener(btnLandingListener);
        Log.e("///","end of on create");
        return null;
    }

} 
```

}

```
01-04 10:35:56.522: I/dalvikvm(149): Jit: resizing JitTable from 4096 to 8192
01-04 10:35:58.291: W/InputMethodManagerService(149): Window already focused, ignoring                         focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41562da8 attribute=null
01-04 10:36:03.171: I/ActivityManager(149): START {act=android.intent.action.MAIN cat=  [android.intent.category.LAUNCHER] flg=0x10104000 cmp=com.example.dronedivideandroid/.DroneMain u=0} from pid 218
01-04 10:36:03.271: D/dalvikvm(149): GC_FOR_ALLOC freed 508K, 6% free 11505K/12167K, paused 86ms, total 105ms
01-04 10:36:03.321: W/WindowManager(149): Failure taking screenshot for (246x410) to layer 21005
01-04 10:36:03.371: D/dalvikvm(647): Not late-enabling CheckJNI (already on)
01-04 10:36:03.382: I/Choreographer(218): Skipped 72 frames!  The application may be doing too much work on its main thread.
01-04 10:36:03.391: D/dalvikvm(36): WAIT_FOR_CONCURRENT_GC blocked 0ms
01-04 10:36:03.411: I/ActivityManager(149): Start proc com.example.dronedivideandroid for activity com.example.dronedivideandroid/.DroneMain: pid=647 uid=10047 gids={3003, 1028}
01-04 10:36:03.522: D/dalvikvm(36): GC_EXPLICIT freed 38K, 4% free 7964K/8259K, paused 13ms+5ms, total 130ms
01-04 10:36:03.532: D/dalvikvm(36): WAIT_FOR_CONCURRENT_GC blocked 0ms
01-04 10:36:03.642: D/dalvikvm(36): GC_EXPLICIT freed <1K, 4% free 7964K/8259K, paused 4ms+14ms, total 115ms
01-04 10:36:03.652: D/dalvikvm(36): WAIT_FOR_CONCURRENT_GC blocked 0ms
01-04 10:36:03.761: D/dalvikvm(36): GC_EXPLICIT freed <1K, 4% free 7964K/8259K, paused 4ms+14ms, total 107ms
01-04 10:36:03.931: I/Choreographer(218): Skipped 124 frames!  The application may be doing too much work on its main thread.
01-04 10:36:04.071: I/Choreographer(218): Skipped 37 frames!  The application may be doing too much work on its main thread.
01-04 10:36:04.291: E/Trace(647): error opening trace file: No such file or directory (2)
01-04 10:36:04.391: I/ARMAssembler(35): generated scanline__00000077:03010104_00008001_00000000 [ 89 ipp] (110 ins) at [0x4124aa88:0x4124ac40] in 646000 ns
01-04 10:36:05.061: I/System.out(647): AT command: AT*CONFIG=1,"control:altitude_max","2000"
01-04 10:36:05.061: W/System.err(647): android.os.NetworkOnMainThreadException
01-04 10:36:05.071: W/System.err(647):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-04 10:36:05.071: W/System.err(647):  at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
01-04 10:36:05.071: W/System.err(647):  at libcore.io.IoBridge.sendto(IoBridge.java:473)
01-04 10:36:05.071: W/System.err(647):  at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
01-04 10:36:05.081: W/System.err(647):  at java.net.DatagramSocket.send(DatagramSocket.java:284)
01-04 10:36:05.081: W/System.err(647):  at com.example.dronedivideandroid.DroneMain.send_at_cmd(DroneMain.java:268)
01-04 10:36:05.081: W/System.err(647):  at com.example.dronedivideandroid.DroneMain$DroneNavaSocket.onPreExecute(DroneMain.java:311)
01-04 10:36:05.091: W/System.err(647):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
01-04 10:36:05.091: W/System.err(647):  at android.os.AsyncTask.execute(AsyncTask.java:534)
01-04 10:36:05.091: W/System.err(647):  at com.example.dronedivideandroid.DroneMain.onCreate(DroneMain.java:40)
01-04 10:36:05.091: W/System.err(647):  at android.app.Activity.performCreate(Activity.java:5008)
01-04 10:36:05.091: W/System.err(647):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-04 10:36:05.091: W/System.err(647):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-04 10:36:05.101: W/System.err(647):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-04 10:36:05.101: W/System.err(647):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-04 10:36:05.101: W/System.err(647):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-04 10:36:05.101: W/System.err(647):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 10:36:05.101: W/System.err(647):  at android.os.Looper.loop(Looper.java:137)
01-04 10:36:05.101: W/System.err(647):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-04 10:36:05.101: W/System.err(647):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 10:36:05.111: W/System.err(647):  at java.lang.reflect.Method.invoke(Method.java:511)
01-04 10:36:05.111: W/System.err(647):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-04 10:36:05.111: W/System.err(647):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-04 10:36:05.111: W/System.err(647):  at dalvik.system.NativeStart.main(Native Method)
01-04 10:36:05.131: E////(647): end of on create
01-04 10:36:05.311: D/gralloc_goldfish(647): Emulator without GPU emulation detected.
01-04 10:36:05.412: I/ActivityManager(149): Displayed com.example.dronedivideandroid/.DroneMain: +2s58ms
01-04 10:36:08.321: E////button(647): forward_enter1
01-04 10:36:08.321: D/AndroidRuntime(647): Shutting down VM
01-04 10:36:08.321: W/dalvikvm(647): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-04 10:36:08.352: E/AndroidRuntime(647): FATAL EXCEPTION: main
01-04 10:36:08.352: E/AndroidRuntime(647): java.lang.NullPointerException
01-04 10:36:08.352: E/AndroidRuntime(647):  at com.example.dronedivideandroid.DroneMain.intOfFloat(DroneMain.java:64)
01-04 10:36:08.352: E/AndroidRuntime(647):  at com.example.dronedivideandroid.DroneMain$1.onClick(DroneMain.java:75)
01-04 10:36:08.352: E/AndroidRuntime(647):  at android.view.View.performClick(View.java:4084) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:53:37.483

您可能应该在其内部设置按钮的单击侦听器`onCreate()`。现在您将它设置在 AsyncTask 的`doInBackground()`.

所以，只需删除该行并将其添加到里面`onCreate()`

```
btnForward=(Button)findViewById(R.id.forwardBtn);     
btnForward.setOnClickListener(btnForwardListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:54:16.020

这里

```
@Override
protected Boolean doInBackground(String... arg0) {

              btnForward.setOnClickListener(btnForwardListener);  //<<<<<here

         //......your code... 
```

您正在尝试从 AsyncTask 的 doInBackground 访问 Ui 元素。无法直接从 doInBackground 访问或更新 Ui 元素。

如果你想在 doInBackground 执行开始之前执行一些任务，那么把你的代码放在[onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)

如果您想在 doInBackground 完成后访问 UI 元素，请将您当前的 Ui 元素移动到 [onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)

设置`setOnClickListener`为内部按钮`onPreExecute()`而不是`doInBackground`

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
     btnForward.setOnClickListener(btnForwardListener);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:52:46.743

@BomberMan 的答案是正确的——你应该调用`setOnClickListener`Activity 的`onCreate`，**但是你还需要做一些其他的事情**。

单击按钮时会出现错误，因为 *`onClick`将（始终）在主线程中执行*，因此您无法`send_at_cmd`从那里调用。您应该创建另一个 AsyncTask 子类来完成这项工作，并且`execute`它从`onClick`.

我猜你试图通过`onClickListener`在后台线程中分配来防止这种情况，认为它的`onClick`方法可能也会在后台运行。但事实并非如此。

# php - 不包含空格的匹配图像链接

> ID：14133186
> 
> 赞同：0
> 
> 时间：2013-01-03T04:46:07.703
> 
> 标签：php, preg-match-all

> **可能重复：**
> [匹配包含空格的图像链接](https://stackoverflow.com/questions/10924318/matching-images-links-containing-spaces)

我的代码是：

```
preg_match_all('#(?:<\>]+href=\")?(?:http://)?(http(s?)://([^\s]*)\.(jpg|gif|png))#',$imagelinks, $group_imagelink);
echo $group_imagelink[1][0];
 echo $group_imagelink[1][1]; 
```

并且内容是（换行，最初在一行中）：

> `$imagelinks = "http://www.site.com/images/img.jpghttp://site.com/2011/06/img.jpghttp://site.org/en/thumb/e/ec/img.jpghttp://site.com/wp-content/uploads/2010/12/img.jpghttp://www.site.com/assets/resources/2006/09/Civilization-3-0001.jpghttp://www.site.com/fr/images/screenshots/img.jpghttp://site.com/wp-content/gallery/img.jpghttp://site.com/images/G/01/software/detail-page/img.jpg";`

有人可以帮助我进行正确的预匹配，以从带有图像且没有空格的文本中提取第一、第二等链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:15:38.023

此模式可以满足您的需求：

```
#(.+?(jpg|gif|png))# 
```

它会给你：

*0 => 数组 (
0 => 'http://www.site.com/images/img.jpg',
1 => 'http://site.com/2011/06/img.jpg',
2 => 'http://site.org/en/thumb/e/ec/img.jpg',
3 => 'http://site.com/wp-content/uploads/2010/12/img.jpg',
4 => 'http://www.site.com/assets/resources/2006/09/Civilization-3-0001.jpg',
5 => 'http://www.site.com/fr/images/screenshots/ img.jpg',
6 => 'http://site.com/wp-content/gallery/img.jpg',
7 => 'http://site.com/images/G/01/software/detail-页/img.jpg',*

您还可以在此站点上测试您的 preg_match，它可以节省大量时间：[Functions Online](http://www.functions-online.com/preg_match_all.html)

# ruby-on-rails - 在 sign_up/sign_in 之后，按用户类型重定向

> ID：14133188
> 
> 赞同：0
> 
> 时间：2013-01-03T04:46:18.323
> 
> 标签：ruby-on-rails, redirect

我有两种用户：Admin 和 Worker。

每个用户都有 role_ids：如果 user.role_ids = [1]，则用户是 Admin。如果 user.role_ids = [2]，则用户为 Worker。

在 sign_up/sign_in 之后，我想通过他的 role_ids 重定向他：

如果他的种类是管理员，请将他重定向到：`localhost:3000/tasksadmins`。

如果他的种类是工人，请将他重定向到：`localhost:3000/workers`。

这是我的`routes.rb`：

```
devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end

resources :tasksadmins

resources :workers

root to: "workers#index" 
```

我想我必须做类似的事情：

```
if current_user.role_ids == [2]
   root to: "workers#index"
else
   root to: "tasksadmins#index"
end 
```

但 current_user 未在路线中定义。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:08:57.033

您可以覆盖 Devise 的 RegistrationsController 并`after_sign_in_path_for`根据需要修改方法：

```
def after_sign_in_path_for(resource_or_scope)
  if resource_or_scope.is_a?(User)
    return admins_path if resource_or_scope.admin?
    workers_path
  else
    super
  end
end 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:10:59.067

试试这个：

在 routes.rb 和控制器中添加一个根，我们必须提到我们要去哪里..！

在**routes.rb 中**：

```
root to: "taskadmins#index" 
```

在 taskadmins 控制器中，您可以使用 current_user 检查

在**taskadmins Controller.rb 中**：

```
def index
   if current_user.role_ids == [2]
       redirect_to "/workers/index"
   else
       redirect_to "tasksadmins#index"
   end
end 
```

# android - 列表视图中的 Android 广告展示位置

> ID：14133189
> 
> 赞同：1
> 
> 时间：2013-01-03T04:46:21.650
> 
> 标签：android, ads, android-custom-view, flurry

我想在列表视图中放置 android 广告，我读了一篇关于用 admob 做的文章

相反，我选择尝试用 Flurry 的 appcircle 来做，但没有运气。

我仍在比较广告网络，但这是我想讨论的一个功能，因为这里不允许在广告网络之间进行主观比较。

哪些广告 SDK 允许我这样做？有没有人有关于自定义广告位置的资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:58:18.293

只需尝试`ListView`在您的布局中放置广告，如下所示：

> ```
> <?xml version="1.0" encoding="utf-8"?>
>  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>   android:orientation="vertical"
>   android:layout_width="fill_parent"
>   android:layout_height="fill_parent">
>   <com.google.ads.AdView android:id="@+id/adView"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         ads:adUnitId="AD_UNIT_ID"
>         ads:adSize="BANNER"
>         ads:loadAdOnCreate="true"/>
>   <ListView android:id="@id/android:list"
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"/>
>   <TextView android:id="@+id/android:empty"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:text="@string/no_hosts"/>
>  </LinearLayout> 
> ```

Checkout this [Example](http://googleadsdeveloper.blogspot.in/2012/03/embedding-admob-ads-within-listview-on.html), it will help you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:56:55.490

例如，Google admobs 只是给你一个扩展的自定义视图`View`。您可以将其放置在您希望的任何位置。

如果你想把你的广告放在 a`ListView`中，你只需要编写你自己的适配器并将广告添加到`getView()`.

# python - 找到最大的时间值

> ID：14133203
> 
> 赞同：0
> 
> 时间：2013-01-03T04:49:08.200
> 
> 标签：python, datetime, python-2.6

我正在寻找将从 mysql 返回的行中搜索最大时间值的脚本。Mysql返回的行如下：

```
(123, 'new', datetime.datetime(2013, 1, 2, 16, 6, 21))
(122, 'old', datetime.datetime(2012, 12, 3, 18, 08, 36))
(125, 'new', datetime.datetime(2012, 12, 13, 20, 18, 16)) 
```

我试过：

```
value = 0
for row in rows:
  if row[2] > value:
    value = row
print value 
```

如果我们打印将显示的 row[2] 值

```
for row in rows:
 print row[2]

output: 2013-01-02 16:06:21
        2012-12-03 18:08:36
        2013-12-13 20:18:16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:58:00.377

**Anders Johansson**巧妙地回答了您的问题。

但是，您也可以避免一开始就在 Python 中执行此操作，只需请求该行数据即可。像这样的 SQL 语句：

```
SELECT DateTime FROM MyTable
ORDER BY CASE WHEN Status IS 'new' THEN 1 ELSE 0 END DESC, DateTime DESC LIMIT 1; 
```

将实现您想要做的事情，并且只给您一个数据点。

### 更新：

```
SELECT mydate FROM MyTable
WHERE type=4
ORDER BY FIELD(status, 'new', 'waited', 'old'), mydate DESC
LIMIT 1; 
```

[SQLFiddle](http://sqlfiddle.com/#!9/a434c/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:53:29.670

您可以简单地使用：

```
print max(x[2] for x in rows) 
```

# php - JQUERY 从另一个选择输入自动填充一个选择输入

> ID：14133204
> 
> 赞同：0
> 
> 时间：2013-01-03T04:49:27.100
> 
> 标签：php, javascript, forms, jquery

编辑 1

我从这段代码中得到 courseID：

```
 $coursesOutput = '<option value=""></option>';

    while($row = mysql_fetch_array($result2)){
        $courseID = $row['courseID'];
        $courseName = $row['name'];

        $coursesOutput .= '<option value="' . $courseID . '">' . $courseName . '</option>'; 
    } 
```

我的php脚本如下（返回一个echo语句）

```
 <?php

    include ("includes/connect.php");

    $courseID = mysql_real_escape_string($_GET['courseID']);
    $sql = "SELECT tee1, tee2, tee3, tee4, tee5 FROM courses WHERE courseID='$courseID' LIMIT 1";
    $result = mysql_query($sql) or die(mysql_error());

    while($row = mysql_fetch_array($result)){
  $tee1 = $row['tee1'];
  $tee2 = $row['tee2'];
  $tee3 = $row['tee3'];
  $tee4 = $row['tee4'];
  $tee5 = $row['tee5'];
    }

    $teesOutput = '<option value="' . $tee1 . '">' . $tee1 . '</option>';

    if($tee2 != ""){
  $teesOutput .= '<option value="' . $tee2 . '">' . $tee2 . '</option>';
    }
    if($tee3 != ""){
   $teesOutput .= '<option value="' . $tee3 . '">' . $tee3 . '</option>';
    }
    if($tee4 != ""){
  $teesOutput .= '<option value="' . $tee4 . '">' . $tee4 . '</option>';
    }
    if($tee5 != ""){
  $teesOutput .= '<option value="' . $tee5 . '">' . $tee5 . '</option>';
    }

    echo '' . $teesOutput . '';
    die();
    ?> 
```

我没有收到任何 ajax 错误，但我的 tee 选择器中仍然没有任何内容。希望这会有所帮助，我再次对这里的支持感到不知所措，难以置信！

结束编辑 1

我已经有一段时间无法弄清楚这个 AJAX-JQUERY 功能了。对于优秀的 jQuery 程序员来说，这应该是一个轻松的地方。

我希望能够在用户选择他们的课程后自动填充我的 tee 选择输入。这是一个高尔夫应用程序，球场有几种不同的发球台配色方案，因此每个球场都是特定的。

到目前为止，我损坏的代码是：

HTML

```
<form id="formAddScore" action="addscore.php" enctype="multipart/form-data" method="post">
    <p class="profile_label">Select Date:</p>
    <input type="text" id="datepicker" name="datepicker" class="score_input" />

    <p class="profile_label">Select Course:</p>
    <select id="course" name="course" class="score_input" onchange="populateTee(this.value)">
        ' . $coursesOutput . '
    </select>

    <p class="profile_label">Select Tee:</p>
    <select id="tee" name="tee" class="score_input">

    </select>

    <p class="profile_label">Actual Score:</p>
    <input id="score" name="score" class="score_input" type="text" size="10" />

    <p class="profile_label">Score ESC (Equitable Stroke Control):</p>
    <input id="scoreESC" name="scoreESC" class="score_input" type="text" size="10" />
    <br/>

    <input id="btnAddScore" name="btnAddScore" class="btn_score" type="submit" value="Add Score" />

</form> 
```

查询

```
function populateTee(courseID)
{
    $.ajax(
    {
        url: 'includes/populate_tee.php?courseID=' + courseID,
        success: function(data) {
        $("#tee").html(data);
               }
    });
} 
```

PHP

populate_tee.php 脚本工作，所以我不会浪费你的时间包括它。

我相当肯定问题出在上面的 JQUERY-AJAX 脚本中。

任何帮助都会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:57:04.227

courseID 是从哪里来的？尝试将其登录到控制台。这有帮助吗？

```
function populateTee(courseID){
   $.ajax({
           url: 'includes/populate_tee.php?courseID=' + courseID,
           success: function(data) {
                    //Assuming you're returning the tees list as an indexed array
                    var ops = '';
                    for(var i=0; i<data.length; i++){
                        ops += '<option>'+data[i]+'</option>';
                    }
                    $("#tee").html(ops);
           }
   });
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:59:31.477

我建议使用 jquery .change() 方法，而不是在 select 上使用 onChange 事件。尝试以下代码应该可以解决问题。

```
 $('#course').on('change', function () {
          var courseID = $(this).val();

          $.ajax({
                type: "post",
                url: 'includes/populate_tee.php?courseID=' + courseID,
                success: function(data) {
                $("#tee").html(data);
               }
              });

      }); 
```

# javascript - Backbone 源代码导出的顶级命名空间和使用

> ID：14133206
> 
> 赞同：1
> 
> 时间：2013-01-03T04:49:42.693
> 
> 标签：javascript, backbone.js, namespaces

我正在尝试阅读 Backbone.js 的源代码。我对下面的代码感到很困惑，它应该声明 Backbone 的顶级命名空间。任何人都可以提供一些线索或解释吗？一些有用的链接来指教这个也很受欢迎！

```
// The top-level namespace. All public Backbone classes and modules will
  // be attached to this. Exported for both CommonJS and the browser.
  var Backbone;
  if (typeof exports !== 'undefined') {
    Backbone = exports;
  } else {
    Backbone = root.Backbone = {};
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:55:10.290

`exports`是用于模块化提供代码的 CommonJS 模式全局（想想 require.js 和 node.js）。最重要的检查是查看是否`exports`可用。如果是，则为 Backbone 全局提供导出引用，以便可以正确地模块化导出。

如果你不是通过 AMD 风格的加载器加载 Backbone，它是由标准对象字面量定义的。

关于此事的进一步阅读：

[http://dailyjs.com/2010/10/18/modules/](http://dailyjs.com/2010/10/18/modules/)

[Node.js module.exports 的用途是什么，你如何使用它？](https://stackoverflow.com/questions/5311334/what-is-the-purpose-of-nodejs-module-exports-and-how-do-you-use-it)

[Javascript 中的导出和原型是什么？](https://stackoverflow.com/questions/5380159/what-is-exports-and-prototype-in-javascript)

进一步说明：

`exports`除了普通的对象文字之外，它本身还带有一些额外的“健壮性”。CommonJS 模块化模式需要这种“健壮性”。请注意 Node.js 源代码中的此处：

```
function Module(id, parent) {
  this.id = id;
  this.exports = {};
  this.parent = parent;
  if (parent && parent.children) {
    parent.children.push(this);
  }

  this.filename = null;
  this.loaded = false;
  this.children = [];
}

module.exports = Module; 
```

`Backbone`全局可以访问模块化模式所需的所有第三级深度。否则，`Backbone`只会从一个无聊的旧空`object`定义开始。

# android - 曾经工作的 AdView 代码，1 天后不再工作

> ID：14133207
> 
> 赞同：0
> 
> 时间：2013-01-03T04:49:43.073
> 
> 标签：android, admob, adview

我不知道发生了什么，我的代码更改为零，并且 1 天后，我现在没有显示 Admob 广告（以前工作完美无瑕）并且我收到此错误：

```
E/Ads(775): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (http://media.admob.com/:1) 
```

我没有使用任何代码来启动广告，只是 XML 如下：

```
<com.google.ads.AdView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="<took my id out>"
    ads:loadAdOnCreate="true" /> 
```

请，如果有人知道或有预感可能出了什么问题，我真的很感激一些建议！

谢谢！

编辑：是的，原来是fricken AVD！我删除了我所有的 AVD，当我添加一个新的 AVD 时它工作正常，适用于从 2.3.3 到 4.2 的所有内容。去搞清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:10:10.183

您是否`Manifest`像这样在文件中定义了广告活动

> ```
> <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:58:31.323

在单独的线程中加载添加，然后我认为它将作为更新版本的 android 想要在另一个线程中实现网络操作。

您可以使用线程，然后加载添加

```
adView.loadAd(new AdRequest()); 
```

# embedded - 为什么嵌入式系统需要虚拟内存？

> ID：14133209
> 
> 赞同：9
> 
> 时间：2013-01-03T04:49:48.427
> 
> 标签：embedded

据我了解，虚拟内存如下：

程序/应用程序/可执行文件驻留在存储设备中。存储设备访问比 RAM 慢得多。因此，程序从存储存储器复制到主存储器以供执行。由于计算机的主内存 (RAM) 有限，​​当所有 RAM 都被使用时（例如，如果同时打开许多程序或正在使用一个非常大的程序），启用虚拟内存的计算机会将数据交换到HDD 并根据需要返回内存，因此实​​际上增加了总系统内存。

据我所知，大多数嵌入式设备没有磁盘内存（如智能手机或汽车信息娱乐系统）。代码直接从闪存执行。RAM 主要用作暂存区（局部变量、返回地址等）。

那么为什么我们在嵌入式系统中需要虚拟内存呢？（例如 WinCE 和 QNX 支持虚拟内存）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T04:56:29.693

你的理解是完全错误的。您将虚拟内存与交换文件或页面文件混淆了。有些系统有虚拟内存，没有交换或页面文件，有些系统交换没有虚拟内存。

虚拟内存只是意味着一个进程拥有不同于物理映射的内存视图。除其他外，它允许进程拥有自己的虚拟地址空间。

> 存储设备访问比 RAM 慢得多。因此，程序从存储存储器复制到主存储器以供执行。由于计算机的主内存 (RAM) 有限，​​当所有 RAM 都被使用时（例如，如果同时打开许多程序或正在使用一个非常大的程序），启用虚拟内存的计算机会将数据交换到HDD 并根据需要返回内存，因此实​​际上增加了总系统内存。

那是交换（或分页）。除了大多数现代操作系统使用虚拟内存实现交换之外，它与虚拟内存无关。交换实际上存在*于*虚拟内存之前。

我认为您可能对这些设备直接从闪存运行代码不正确。闪存的读取速度非常低，RAM 非常便宜。我敢打赌，您提到的大多数系统都不会直接从闪存运行代码，而是根据需要使用虚拟内存将代码错误地写入 RAM。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T04:18:47.253

嵌入式系统，该术语本身具有广泛的应用。您可以将闪存程序空间以 kbytes 或更少为单位的小型微控制器称为嵌入式系统，ram 以位或字节（不足以为 kbytes）为单位。同样，在一个非常成熟的计算机主板上运行一个成熟的操作系统的 tivo（另一个例子用 xbox 替换 tivo）作为嵌入式系统。所以你需要对你的问题不那么含糊。虚拟内存与它的应用程序跨越这些边界无关。

上面有很多答案，David S 当然最好的是，虚拟内存只是意味着虚拟内存边界一侧的内存地址与该边界另一侧使用的物理地址不同。边界在哪里、如何、为什么等是不同的。

虚拟内存的一种流行用途，我可能认为主要用例是操作系统。一个好处是，例如，所有应用程序都可以针对相同的地址空间进行编译，所有应用程序都可以编译为从程序的角度来看，它们都从地址 0x8000 开始，并且就该程序在运行和访问它访问的内存时而言基于该地址的东西。硬件和操作系统的组合将程序正在使用的虚拟地址更改为物理地址。如果操作系统允许多任务处理，那么每个任务可能会认为它们位于相同的地址空间中，但每个任务的物理地址不同。我不会进一步详细说明为什么使用假定的固定地址空间是一个好处。操作系统使用的另一个方面是内存管理。然而，许多 MMU 会让您对内存进行分段。如果用户想要分配 100 兆字节的内存，程序可以在其虚拟地址空间中访问 100 兆字节，就好像它是线性的，并且在该地址空间中它是线性的，但是这 100 兆字节可能会被分解为 4 KB 的块，这些块是分散在物理地址空间的所有地方，并不总是可能但在技术上肯定有可能该物理内存中没有两个块与该 100 兆的任何其他块相邻。您的内存管理不一定要尝试保持大量物理内存块可供应用程序分配。请注意，并非所有 MMU 都完全相同，4Kbytes 只是一个示例。虚拟地址空间对操作系统的第三个主要好处是保护。如果应用程序绑定到虚拟地址空间，通常很容易防止该应用程序接触任何其他应用程序或操作系统的内存。在这种情况下，应用程序将在保护级别操作/执行，以便所有访问都被视为虚拟访问，并且必须通过转换为物理访问，用于定义虚拟到物理的表可以包含保护标志。如果应用程序在其虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获该地址并让操作系统采取措施来处理它（虚拟化某些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供其交易的虚假数据等）。防止该应用程序接触任何其他应用程序或操作系统的内存通常很容易。在这种情况下，应用程序将在保护级别运行/执行，以便所有访问都被视为虚拟访问，并且必须通过转换为物理访问，用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。防止该应用程序接触任何其他应用程序或操作系统的内存通常很容易。在这种情况下，应用程序将在保护级别运行/执行，以便所有访问都被视为虚拟访问，并且必须通过转换为物理访问，用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。在这种情况下，应用程序将在保护级别运行/执行，以便所有访问都被视为虚拟访问，并且必须通过转换为物理访问，用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。在这种情况下，应用程序将在保护级别运行/执行，以便所有访问都被视为虚拟访问，并且必须通过转换为物理访问，用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。用于定义虚拟到物理的表可以包含保护标志。如果应用程序在它的虚拟空间中寻址到它没有业务访问的内存地址，硬件可以捕获它并让操作系统采取行动来处理它（虚拟化一些硬件，弹出错误并终止应用程序，弹出警告并且不杀死应用程序，但同时为应用程序提供虚假数据以进行交易等）。

有很多方法可以在嵌入式系统中使用它。首先很多嵌入式系统都运行操作系统，所以以上所有，对于地址空间的程序编译容易，内存管理相对容易，以及保护其他应用程序和操作系统等好处都没有提到。（虚拟化是一个，能够逐块启用/禁用指令/数据缓存是另一个）

底线是大卫 S 指出的。虚拟内存只是意味着虚拟地址不一定等于物理地址，它可以但不一定是，有一些边界，一些硬件，通常是表驱动的，将虚拟地址转换为物理地址。您想要这样做的原因有很多，因为某些嵌入式系统与非嵌入式系统无法区分，任何适用于非嵌入式系统的原因都可以适用于嵌入式系统。

尽管人们可能希望您相信系统具有平坦的地址空间，但这通常是一种错觉。例如，在微控制器中，您可能有多个闪存库和一个或多个内存库。这些银行中的每一个都有一个物理的、通常基于零的地址。即使没有 mmu 或其他类似的东西，在处理器上的地址总线和闪存或 RAM 存储器上的地址总线之间也有一个地方，它解码处理器上的地址并使用它来寻址到特定的内存组. 通常低位匹配，高位负责存储库的选择（这通常也是 mmu 的情况），因此从这个意义上说，处理器生活在虚拟地址空间中。（不限于微控制器，这通常是处理器地址总线的处理方式）对于取决于引脚被拉高或拉低或其他一些机制的微控制器，您可能具有允许一个闪存组用于启动处理器或另一个的芯片功能。您可以将输入引脚拉高，并且引导加载程序中内置的处理器允许您访问和调试系统，例如重新编程应用程序闪存。或者也许将那条线拉低并引导应用程序闪存而不是供应商的调试器/引导闪存。一些芯片变得更加复杂，让你启动一个闪存，然后程序在某处写入一个寄存器，立即改变内存架构移动事物，

现在，当您谈论虚拟内存以及交换磁盘和从磁盘交换时，这是操作系统经常使用的一种技巧，以产生拥有更多内存的错觉。我在上面的虚拟化类别下提到了这一点。虚拟内存实际上并不存在，我有 X 字节，但会让软件认为有 Y 字节（其中 Y 大于 X）可用。操作系统通过硬件使用的虚拟表，管理哪些内存块与物理内存绑定，并允许硬件按原样完成，或者以某种方式标记为不可用，从而导致操作系统异常，经过检查，操作系统确定这是此应用程序的有效地址，但此地址后面的数据已交换到磁盘。
与说明 vmware 或其他虚拟机的工作方式没有什么不同。您可以使用虚拟内存在硬件上本地执行指令，直到您导致异常，虚拟机可能认为您有一个 xyz 网络接口并且可能有一个驱动程序正在访问该 xyz 网络接口中的寄存器，但现实您是否没有 xyz 硬件和/或您不希望虚拟机应用程序访问该硬件，因此您对其进行虚拟化，捕获该寄存器访问权限，并使用模拟您伪造该访问权限的硬件的软件，并让程序在虚拟机继续。这显然不是做虚拟机的唯一方法，但如果硬件支持它，这是一种方法，可以让虚拟机运行得非常快，占它实际在硬件上运行指令的时间的百分比。虚拟化最慢的方法当然是虚拟化包括处理器在内的所有内容，在这种情况下，每条指令都将被模拟，这很慢但有其自身的特点（在 x86 上虚拟化 arm 系统或在 arm 上虚拟化 x86，xyz 在abc，填空）。如果这是您在嵌入式系统中谈论的虚拟内存类型，那么如果嵌入式系统在很大程度上与非嵌入式系统（例如 xbox 或 tivo）无法区分，那么出于同样的原因，您可以允许这样的事情。如果您使用的是微控制器，那么那里的用例通常意味着如果您需要更多内存，您会购买更大的微控制器，或者为系统添加更多内存，或者更改应用程序的需求，使其不需要那么多内存. 可能会有例外，但这主要取决于您的应用程序和要求，允许应用程序或其数据大于可用内存的通用或通用系统将需要某种解决方案。您的无钥匙进入密钥卡或电视遥控器或时钟收音机中的微控制器或任何通常不需要允许“应用程序”需要比物理上更多的资源的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T04:54:16.393

使用虚拟内存更重要的好处是每个进程都有自己的地址空间，该地址空间与其他进程的地址空间隔离。这样，虚拟内存有助于控制故障并提高安全性和稳定性。我应该注意，两个进程仍然可以共享一些内存，以促进通信（共享内存 IPC）。

您还可以做其他技巧，例如通过将共享部分映射到多个进程的地址空间（嵌入式使用时想到 libc）来节省内存，但在物理内存中只有一次。`fork/clone`这也提高了它的速度，您甚至可以通过仅复制内核描述符并将内存映像单独保留直到第一次写入访问以类似的想法完成的方式来进一步增强它，就像 linux降低成本一样。

最后一个好处是，在现代系统中，通常通过将文件映射到进程空间来执行文件 I/O（`mmap`例如参见）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T00:47:43.703

有趣的是，无需成熟的 MMU 即可获得“虚拟内存”的一些好处。硬件要求有时可能非常轻。PIC 16C505 有 5 位地址空间和 40 字节 RAM；地址 0x10 到 0x1F 可以映射到两组 16 字节 RAM 中的任何一组。在编写需要管理两个不同数据流的应用程序时，我安排使与一个数据流相关联的所有变量都位于第一组 16 个“可切换”内存位置，而与另一个数据流相关联的变量将位于相应的第二组地址。然后我可以使用相同的代码来管理两个数据流。只需以一种方式设置银行位，调用例程，以另一种方式设置，然后再次调用例程。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-03T04:56:49.387

存在虚拟内存的原因之一是您的设备可以进行多任务处理。它也可以像您的 RAM 一样，从而减轻物理 RAM 的负载并来回交换负载。

# java - 在 iReport 中使用 Java 类时出错

> ID：14133212
> 
> 赞同：1
> 
> 时间：2013-01-03T04:50:13.833
> 
> 标签：java, php, jasper-reports, php-java-bridge

我创建了一个*Java*方法，我想从报告中调用它，如下所示：

```
package javafunct;

public class Main {

    public String getTes(){
         return "it work";
    }   
} 
```

我想在我的*JR*报告中显示该结果，因此我将其放在带有表达式的*textField上：*

```
new javafunct.Main().getTes() 
```

我编译了它，然后将该 jar 文件设置为*iReport*类路径和我的*PHP*代码。

当我从*iReport*运行它时，它可以工作，但是当我从*PHP*运行以打开此报告时，它不起作用。错误是：

```
Error evaluating expression :

Source text : new javafunct.Main().getTes() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:04:51.123

好的，我解决了我的问题.. 我必须将 javaFunct.jar 放到我的 tomcat 中的 javaBridge/WEB-INF/lib 文件夹中，然后重新启动 tomcat。

# c# - .net 中是否有任何免费的指纹识别 SDK 可用？

> ID：14133215
> 
> 赞同：6
> 
> 时间：2013-01-03T04:50:29.163
> 
> 标签：c#, .net, fingerprint, biometrics

我正在做一个指纹识别系统项目，有没有免费的sdk可用于指纹识别系统？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T05:46:34.333

我可以在以下位置找到几个免费的 sdk：

1.  [http://www.winsite.com/Development/Components-Libraries/Free-Fingerprint-Verification-SDK/](http://www.winsite.com/Development/Components-Libraries/Free-Fingerprint-Verification-SDK/)
2.  [http://www.neurotechnology.com/free-fingerprint-verification-sdk.html](http://www.neurotechnology.com/free-fingerprint-verification-sdk.html)

它们都是基于 Verifinger 的，并且有只能存储 10 条记录的限制。

# openerp - OpenERP：每次用户从树中删除项目时如何调用函数

> ID：14133216
> 
> 赞同：3
> 
> 时间：2013-01-03T04:50:57.783
> 
> 标签：openerp

根据这个论坛[功能领域](http://forum.openerp.com/forum/topic30402.html)：

> “在调用创建、写入或任何其他 orm 方法时调用功能字段”

我已经测试了这个想法，我创建了一个函数字段，并且每次我（1）在列表/树上添加新项目或（2）编辑列表/树上的现有项目时都会调用它

但我想知道是否有办法在用户从树中删除项目时调用/调用功能字段？

```
class payment(osv.osv):

    def _get_total_check_info(self, cr, uid, ids, field, arg, context=None):
        """
        _get_total_check_info() :
        Function that automatically computes for the Total Check Info upon saving
        """
        result={}
        check_amount = 0
        for record in self.browse(cr, uid, ids, context=context):
            for n in record.check_info_ids:
                res = self.pool.get('cashier.check.information').browse(cr, uid, n.id)
                if res:
                    check_amount +=  res['check_amount']
                    print "check_amount", res['check_amount']
                    print "check_amount Total", check_amount

        result[record.id] = check_amount
        return result

        _name = 'payment'
        _description = __doc__

        _columns = {
       'check_info_ids': fields.one2many('check.information', 'pymt_id', 'Check Information'),
       'total_check_amount': fields.function(_get_total_check_info, method=True, type='float', string='Total Check Amount', store=True),
        }
payment()

class check_information(osv.osv):

    def unlink(self, cr, uid, ids, context=None):
        """
        unlink():
        Function used to override the unlink method
        """
        #Your code goes here.
        print "here at unlink function"
        return super(check_information, self).unlink(cr, uid, ids, context=context)

    _name = 'check.information'
    _description = __doc__

    _columns = {
        'pymt_id': fields.many2one('payment', 'Payment ID'),
        'check_date': fields.date('Check Date'),
        'check_number': fields.char('Check Number', size=50),
        'check_amount': fields.float('Check Amount', digits=(16, 2)),
        'payee': fields.char('Payee', size=100),
        'bank': fields.char('Bank', size=20),
        'bank_branch': fields.char('Bank Branch', size=20),
    }
check_information() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:15:58.113

通过对象，您可以通过创建对象来调用功能字段的方法

```
def unlink(self, cr, uid, ids, context=None):
    """
    unlink():
    Function used to override the unlink method
    """
    #Your code goes here.
    lst_ids = []
    for brw_rec in self.browse(cr, uid, ids, context=context):
        print "here at unlink function"
        lst_ids.append(brw_rec.pymt_id.id)
    self.pool.get('payment')._get_total_check_info(cr, uid, lst_ids, 'total_check_amount', None, context=context)
    return super(check_information, self).unlink(cr, uid, ids, context=context) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T04:58:13.383

是的，`fields.functions`只有当我们尝试更新或创建记录时才会调用。但是如果你想做你想做的事，那么形成覆盖`unlink`方法`然后形成self_。列找到您的字段并获取函数名称，然后调用方法。通过这样做，您将模拟 ORM 在 crate 或 write 上所做的确切行为。

```
class test(osv.osv):
    .
    .
    .
    def unlink(self, cr, uid, ids, context=None):
        #Your code goes here.
        return super(test, self).unlink(cr, uid, ids, context=context) 
```

谢谢

# java - java Long 四舍五入到 2 位小数的绝对值

> ID：14133218
> 
> 赞同：0
> 
> 时间：2013-01-03T04:51:16.083
> 
> 标签：java, rounding, long-integer, absolute, decimal

```
long value = Math.round(Math.abs(object.getSomeStuff()/1000)); 
```

My`object.getSomeStuff()`返回一个 3 位整数值。我想获得绝对值并四舍五入到 2 位。

```
Sample Input
123
-257

Sample Output
0.12
0.25 
```

我真的不想把它舍入，我想截断它，但这是一个小问题。

我究竟做错了什么？我认为这里的舍入不正确。

对不起，如果我不清楚。主要问题是没有发生的四舍五入。我想我只是看到一个整数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:53:58.103

我假设由于类型问题（整个操作发生在 0.12 中`Integer`），您得到的是 0 而不是 0.12。如果是这样，请尝试类似

```
long value = Math.abs((Float)(object.getSomeStuff()/10)/100); 
```

或者

```
long value = Math.abs((object.getSomeStuff()/10)/100.0); 
```

这应该除以 10`Integer`以消除一位数字，然后除以 100 作为 a`Float`以获得最终值。

# java - java中的Hibernate DetachedCriteria多个结果

> ID：14133222
> 
> 赞同：1
> 
> 时间：2013-01-03T04:52:09.783
> 
> 标签：java, hibernate, detachedcriteria

这是我拥有的 SQL 语句。

```
SELECT USER_PROFILE.FIRST_NAME, USER_PROFILE.LAST_NAME, USER_PROFILE.USER_TYPE
FROM USER_PROFILE
INNER JOIN USER_LOGIN_STATUS
ON USER_PROFILE.USER_ID=USER_LOGIN_STATUS.USER_ID
ORDER BY USER_PROFILE.FIRST_NAME 
```

而且我正在尝试执行下面的代码，我认为它相当于休眠 DetachedCriteria 并期望只有两个数据作为结果。

```
DetachedCriteria dc = getDetachedCriteria();
DetachedCriteria userLoginCriteria = DetachedCriteria.forClass(UserLoginStatus.class);
userLoginCriteria.setProjection(Projections.distinct(Projections.property("userId")));
dc.add(Subqueries.propertyIn(UserField.id.name(), userLoginCriteria));

DetachedCriteria profileCriteria = dc.createCriteria("profile");
profileCriteria.addOrder(Order.asc("firstName"));
return getAll(dc, pageSetting); 
```

但不幸的是，这是出乎意料的结果：我有多个数据结果。

## 姓名 | 类型 |

1.  本·琼斯 | 用户 |
2.  本·琼斯 | 用户 |
3.  汤姆荷马 | 嘉宾 |
4.  汤姆荷马 | 嘉宾 |

有没有人知道确切等效的 DetachedCriteria 或解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:32:47.440

首先，您的 SQL 看起来不正确。它返回多行的原因是因为您要加入的`USER_LOGIN_STATUS`表可能每个`USER_PROFILE`. 因为*您没有*从`USER_LOGIN_STATUS`表中选择任何字段，所以您看不到为什么会有多行。你为什么要加入这张桌子？

其次，您正在执行的分离条件不等同于您提供的 SQL，因为您正在执行不在 SQL 中的子查询。

你不需要这个子选择，因为我不明白你为什么要加入，我会假设一些要点给你下面的例子：

```
DetachedCriteria dc = getDetachedCriteria();
dc.createAlias("userLoginStatus", "uls");
dc.add(Projections.property("firstName")); 
dc.add(Projections.property("lastName"));
dc.add(Projections.property("userType")); 
dc.addOrder(Order.asc("firstName")); 
return getAll(dc, pageSetting); 
```

这现在大致等效，但我假设：

*   `UserField`对于和之间的关系，您有正确的映射`UserLoginStatus`。
*   这`getDetachedCriteria()`实际上是返回`DetachedCriteria.forClass(UserField.class)`。

您现在也可以`UserLoginStatus`这样引用字段：

```
dc.add(Projections.property("uls.my_user_login_field")); 
```

同样，如果您的查询得到整理并且您仍然返回多个实体，那么 dinukadev 的答案将发挥作用：

```
dc.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

我怀疑这对您不起作用的原因是您的子选择。

抱歉，我无法为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:55:17.283

请尝试在您的根分离标准上设置结果转换器，如下所示。这将消除重复。

```
dc.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

# android - Android 录音机：android.database.sqlite.SQLiteConstraintException：错误代码 19

> ID：14133223
> 
> 赞同：0
> 
> 时间：2013-01-03T04:52:10.793
> 
> 标签：android, android-sqlite, android-mediarecorder

我正在使用以下意图来录制声音

```
Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
startActivityForResult(intent, REQUEST_RECORD_SOUND); 
```

当代码返回到我的程序（在 onActivityResult 中）时，记录不会存储，并且 log cat 显示错误。这只发生在带有 android 2.3 版本的 Sony XPERIA 上。任何帮助将不胜感激。以下是 logcat 的输出：

```
01-02 21:43:17.837: E/Database(557): Error inserting album_id=8 title=2013-01-02 21:43:17 title_key=Q*?Q*?Q*?Q*?Q?Q*?Q*?Q?Q*?Q*?QQ*?Q*?QØQ*?Q*?QØQ*?Q*?Q mime_type=audio/3gpp _display_name=recording-379099974.3gpp date_modified=1357188193 date_added=1357188197 artist_id=8 is_music=0 _data=/mnt/sdcard/recording-379099974.3gpp
01-02 21:43:17.837: E/Database(557): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
01-02 21:43:17.837: E/Database(557):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
01-02 21:43:17.837: E/Database(557):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
01-02 21:43:17.837: E/Database(557):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1590)
01-02 21:43:17.837: E/Database(557):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1434)
01-02 21:43:17.837: E/Database(557):    at com.android.providers.media.MediaProvider.insertInternal(MediaProvider.java:1981)
01-02 21:43:17.837: E/Database(557):    at com.android.providers.media.MediaProvider.insert(MediaProvider.java:1800)
01-02 21:43:17.837: E/Database(557):    at android.content.ContentProvider$Transport.insert(ContentProvider.java:198)
01-02 21:43:17.837: E/Database(557):    at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:146)
01-02 21:43:17.837: E/Database(557):    at android.os.Binder.execTransact(Binder.java:324)
01-02 21:43:17.837: E/Database(557):    at dalvik.system.NativeStart.run(Native Method)
01-02 21:43:18.057: E/WindowManager(1524): Activity com.android.soundrecorder.SoundRecorder has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2afe6e80 that was originally added here
01-02 21:43:18.057: E/WindowManager(1524): android.view.WindowLeaked: Activity com.android.soundrecorder.SoundRecorder has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2afe6e80 that was originally added here
01-02 21:43:18.057: E/WindowManager(1524):  at android.view.ViewRoot.<init>(ViewRoot.java:267) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:11:21.760

我可以想到两个解决这个问题的方法。我确信还有其他人。

A. 通过捕获 SQLiteException 并对其执行某些操作（或不执行任何操作）来让插入失败。这涉及将上述步骤 2 中的 db.insert 方法调用替换为 try/catch 块内的 db.insertOrThrow。

```
 try {
    db.insertOrThrow(UpdateServiceDBHelper.TABLE_NAME, null, statusVals);
        } catch (SQLException ex) {
     // do something with ex or nothing
     } 
```

简单但不太令人满意。

* * *

B. 在支持 API 8 或更高版本的 IDE 或设备上，使用 insertWithOnConflict 并明确指定冲突解决方案，而不是 insertOrThrow。

此方法调用导致冲突的行被替换。

```
 db.insertWithOnConflict(DBHelper.TABLE_NAME, null, insertVals, SQLiteDatabase.CONFLICT_REPLACE); 
```

冲突也可以忽略：

```
 db.insertWithOnConflict(DBHelper.TABLE_NAME, null, insertVals, SQLiteDatabase.CONFLICT_IGNORE); 
```

# c# - ListView AutoResizeColumns 基于 Column 内容和标题

> ID：14133225
> 
> 赞同：23
> 
> 时间：2013-01-03T04:53:00.350
> 
> 标签：c#, winforms, visual-studio-2010

我们使用这两种方法根据列内容和标题分别调整列长度。

ListView.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent); ListView.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize);

但是如何根据两者进行调整呢？即调整到标题和列内容的最长长度。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T15:46:19.840

`lvw.Columns[0].Width = -2`

有关详细信息，请参阅 MSDN 中的备注：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.columnheader.width.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.columnheader.width.aspx)

另请注意，MSDN 说“要自动调整为列标题的宽度，请将 Width 属性设置为 -2。”，但实际上它适用于列标题和列内容。

下面是一段代码来证明：

```
 lvw.Columns.Add(new String('x', 25));   // short header
    lvw.Items.Add(new String('x', 100));    // long content

    lvw.Columns[0].Width = -2;
    // in result column width will be set to fit content 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-04T15:56:27.457

[正如这里](https://stackoverflow.com/questions/5558182/auto-widths-in-listview)回答的那样，调用两个调整大小选项都可以完成这项工作：

```
myListView.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent);
myListView.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-29T14:03:01.160

这是我用来将列宽调整为内容和标题的方法：

```
public static void autoResizeColumns(ListView lv)
{
    lv.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent);
    ListView.ColumnHeaderCollection cc = lv.Columns;
    for (int i = 0; i < cc.Count; i++)
    {
        int colWidth = TextRenderer.MeasureText(cc[i].Text, lv.Font).Width + 10;
        if (colWidth > cc[i].Width)
        {
            cc[i].Width = colWidth;
        }
    }
} 
```

示例使用：

```
autoResizeColumns(listView1); 
```

该方法没有经过很好的测试，但至少它在我使用它的上下文中有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-03T21:32:08.210

确实可以使用 MeasureText 然后计算剩余的空间并以某种方式在所有列之间分配。但这是我快速编码的快速而肮脏的方法：

```
 /// <summary>
    /// Enables autoresizing for specific listview.
    /// You can specify how much to scale in columnScaleNumbers array - length of that array
    /// should match column count which you have.
    /// </summary>
    /// <param name="listView">control for which to enable auto-resize</param>
    /// <param name="columnScaleNumbers">Percentage or numbers how much each column will be scaled.</param>
    private void EnableAutoresize(ListView listView, params int[] columnScaleNumbers)
    {
        listView.View = View.Details;
        for( int i = 0; i < columnScaleNumbers.Length; i++ )
        {
            if( i >= listView.Columns.Count )
                break;
            listView.Columns[i].Tag = columnScaleNumbers[i];
        }

        listView.SizeChanged += lvw_SizeChanged;
        DoResize(listView);
    }

    void lvw_SizeChanged(object sender, EventArgs e)
    {
        ListView listView = sender as ListView;
        DoResize(listView);
    }

    bool Resizing = false;
    void DoResize( ListView listView )
    {
        // Don't allow overlapping of SizeChanged calls
        if (!Resizing)
        {
            // Set the resizing flag
            Resizing = true;

            if (listView != null)
            {
                float totalColumnWidth = 0;

                // Get the sum of all column tags
                for (int i = 0; i < listView.Columns.Count; i++)
                    totalColumnWidth += Convert.ToInt32(listView.Columns[i].Tag);

                // Calculate the percentage of space each column should 
                // occupy in reference to the other columns and then set the 
                // width of the column to that percentage of the visible space.
                for (int i = 0; i < listView.Columns.Count; i++)
                {
                    float colPercentage = (Convert.ToInt32(listView.Columns[i].Tag) / totalColumnWidth);
                    listView.Columns[i].Width = (int)(colPercentage * listView.ClientRectangle.Width);
                }
            }
        }

        // Clear the resizing flag
        Resizing = false;            
    } 
```

取决于你有多少列 - 你指定每列“百分比”或简单的数字。例如对于 3 列 - 调用如下所示：

```
 EnableAutoresize(listView1, 6, 3, 1); 
```

这会将列大小分配为：6 * 100% / (6 + 3 + 1) = 60% 用于第一列，30% 用于下一列，10% 用于剩余。

这在某种程度上是穷人的快速实施。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T13:53:19.933

就我而言，我通过接下来的步骤（对于两列数据）执行此操作：

1.  为每一列创建一个 ColumnHeader 对象。
2.  根据 HeaderSize 通过 AutoResize 设置大小（在两列上）
3.  将该值存储在整数变量中
4.  根据 ColumnContent 通过 AutoResize 设置大小（在两列上）
5.  通过旧值和新值之间的 Max 标准（对于每一列）更新每个 Integer 变量的值。
6.  为每个 ColumnHeader 对象设置列宽大小。

在 VB.NET 中：

```
'Create two header objects as ColumnHeader Class
Dim header1, header2 As ColumnHeader

'Construcción de los objetos header
header1 = New ColumnHeader
header1.Text = "ID"
header1.TextAlign = HorizontalAlignment.Right
header1.Width = 10

header2 = New ColumnHeader
header2.Text = "Combinaciones a Procesar"
header2.TextAlign = HorizontalAlignment.Left
header2.Width = 10

'Add two columns using your news headers objects 
ListView.Columns.Add(header1)
ListView.Columns.Add(header2)

'Fill three rows of data, for each column
ListView.Items.Add(New ListViewItem({"A1", "B1"}))
ListView.Items.Add(New ListViewItem({"A2", "B2"}))
ListView.Items.Add(New ListViewItem({"A3", "B3"}))

'Change the size of each column
Dim headsz1, headsz2 As Integer
SelectionInTable.ListView.AutoResizeColumn(0,             ColumnHeaderAutoResizeStyle.HeaderSize)
SelectionInTable.ListView.AutoResizeColumn(1, ColumnHeaderAutoResizeStyle.HeaderSize)
headsz1 = header1.Width
headsz2 = header2.Width
SelectionInTable.ListView.AutoResizeColumn(0, ColumnHeaderAutoResizeStyle.ColumnContent)
SelectionInTable.ListView.AutoResizeColumn(1,     ColumnHeaderAutoResizeStyle.ColumnContent)
headsz1 = Math.Max(headsz1, header1.Width)
headsz2 = Math.Max(headsz2, header2.Width)
header1.Width = headsz1
header2.Width = headsz2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T18:40:22.257

这是可用于任何 ListView 的 C# 解决方案。它假定您的列数和标题对于任何给定的列表视图都不会改变。如果您想每次都重新计算标题宽度（如果标题更改或列数更改），请摆脱 listViewHeaderWidths 字典。

```
 private Dictionary<string, int[]> listViewHeaderWidths = new Dictionary<string, int[]>();    
    private void ResizeListViewColumns(ListView lv)
    {
        int[] headerWidths = listViewHeaderWidths.ContainsKey(lv.Name) ? listViewHeaderWidths[lv.Name] : null;

        lv.BeginUpdate();

        if (headerWidths == null)
        {
            lv.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize);

            headerWidths = new int[lv.Columns.Count];

            for (int i = 0; i < lv.Columns.Count; i++)
            {
                headerWidths[i] = lv.Columns[i].Width;
            }

            listViewHeaderWidths.Add(lv.Name, headerWidths);
        }

        lv.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent);

        for(int j = 0; j < lv.Columns.Count; j++)
        {
            lv.Columns[j].Width = Math.Max(lv.Columns[j].Width, headerWidths[j]);
        }

        lv.EndUpdate();
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-03T07:52:59.037

Anton Kedrov 的答案是最好的，但在我的情况下，我有一个超过 50 列的列表视图，我经常更新它的数据在这种情况下我注意到列表视图的 this.AutoResizeColumns 执行更快的工作，所以我也在编写这个解决方案

第一种方法，设置为 -2

```
public void AutoUpdateColumnWidth(ListView lv)
{
    for (int i = 0; i <= lv.Columns.Count - 1; i++) {
        lv.Columns(i).Width = -2;
    }
} 
```

我使用的第二种方法（多次通话时闪烁较少）

```
public void AutoUpdateColumnWidth(ListView lv)
{
    ListViewItem nLstItem = new ListViewItem(lv.Columns(0).Text);
    for (int i = 1; i <= lv.Columns.Count - 1; i++) {
        nLstItem.SubItems.Add(lv.Columns(i).Text);
    }
    v.Items.Add(nLstItem);
    lv.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent);
    lv.Items.RemoveAt(nLstItem.Index);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-28T04:29:39.460

这很简单（虽然我花了一段时间才弄清楚）......

我们知道宽度必须至少与列标题一样大，这样我们才能看到所有标题文本。除此之外，宽度可以**扩大更大**以容纳内容。因此，我们执行以下操作：

1.  将列自动调整为标题。
2.  遍历列并将每列的最小宽度属性设置为当前列宽（这样可以保证您的列永远不会太小而无法看到标题）。
3.  从现在开始，按内容自动调整列大小。

没有必要像其他海报建议的那样单独跟踪宽度并重新设置它们。设置列的最小宽度可以解决问题，直到标题文本被更改，在这种情况下，您将最小宽度设置为 0，仅自动调整修改后的列，然后再次将最小宽度设置为当前宽度。

**编辑：**抱歉，我忘记了我没有使用标准列表视图，而是使用了第 3 方产品 BetterListView（提供免费版本）。标准列表视图列似乎不支持最小宽度。我强烈推荐 BetterListView 作为一个很好的选择（更好的功能集和性能）。

# sql - 从表中检索数据

> ID：14133226
> 
> 赞同：0
> 
> 时间：2013-01-03T04:53:01.960
> 
> 标签：sql, sql-server

我有一张如下表，

```
Id             Form_Id     Form_Layout_Txt
-------------- ----------- -----------------
2              1           aa
3              1           bb
5              2           dddd
6              2           eeeee
7              3           fffff
8              3           gggg 
```

我需要检索具有相同 Form_id 的行，如下所示，

```
2              1           aa
3              1           bb 
```

如何编写对上述数据的查询？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:55:04.600

```
Select * 
from nameoftable 
where  Form_Id = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:55:13.663

这是您最基本的需要，除非有隐藏的免疫力来了解更多信息:)

```
SELECT * FROM YOUR TABLE 
WHERE FORM_ID = 1 
```

# php - PHP Recaptcha 表单仅适用于 IP 地址而不是 www.google.com

> ID：14133237
> 
> 赞同：1
> 
> 时间：2013-01-03T04:54:17.363
> 
> 标签：php, recaptcha

如标题中所述。我的recaptcha 表单仅在我更改此设置时才有效：

```
define("RECAPTCHA_VERIFY_SERVER", "www.google.com"); 
```

对此：

```
define("RECAPTCHA_VERIFY_SERVER", "74.125.236.178"); 
```

我正在使用[myhosting.com](http://myhosting.com) vps linux 服务器。知道为什么它不适用于[www.google.com](http://www.google.com)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:02:05.890

解决这个问题的是，

```
//line 40 in recpatchalib.php and replace:
define("RECAPTCHA_VERIFY_SERVER", "api-verify.recaptcha.net");

// With this:
define("RECAPTCHA_VERIFY_SERVER", gethostbyname('api-verify.recaptcha.net')); 
```

尝试一下。

从[问题](http://code.google.com/p/recaptcha/issues/detail?id=26)页面获得。

# asp.net - 无法在 ASP.NET 中显示 AjaxFileUpload 成功/失败的标签消息

> ID：14133238
> 
> 赞同：3
> 
> 时间：2013-01-03T04:54:46.160
> 
> 标签：asp.net, file-upload, ajaxuploader

我想使用`AjaxFileUpload`控件上传文件。这很好用。问题是我无法在`Label`上传的文件上显示成功/失败消息。

.aspx 代码..

```
<form id="form1" runat="server">
    <div>
    <div></div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server">
            <ContentTemplate>
                <asp:Label runat="server" ID="myThrobber" Style="display: none;"><img align="absmiddle" alt="" src="images/uploading.gif"/></asp:Label>
                <asp:AjaxFileUpload ID="AjaxFileUpload1" 
                    runat="server" 
                    OnUploadComplete="AjaxFileUpload1_UploadComplete" 
                    OnClientUploadError="uploadError" 
                    OnClientUploadComplete="uploadComplete"
                    ThrobberID="myThrobber"
                    MaximumNumberOfFiles="1"
                    AllowedFileTypes="" 
                    class="name_text1" 
                    Width="200px" />
                <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
                <asp:Button ID="BtnClose" runat="server" Text="Close" 
                   onclick="BtnClose_Click" OnClientClick="Closepopup()"/>

                <asp:Label ID="Label2" runat="server" Text=""></asp:Label>

                <br />
            </ContentTemplate>
        </asp:UpdatePanel>

    </div>
    </form> 
```

我想在 Label2 上显示该文件是否上传的文本。我的 .cs 代码：

```
protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
 string message = "Storege Space is Exceeding its Limit";
                    Label2.Text = message;
} 
```

如何在上面显示消息`Label`？有什么建议吗？帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:21:17.127

```
function ReBindMaterialsGrid() {
    if (rebindTimer == null) {
        SetRebindTimeout();
    } else {
        clearTimeout(rebindTimer);
        SetRebindTimeout();
    }
}
function SetRebindTimeout() {
    rebindTimer = setTimeout(
        'var btn = document.getElementById("MainContent_AdminTabs_TabContainerMain_TabPanelMaterials_Materials_btnReBindGrid");' +
        'btn.click();', 8888);
}

                                                       <asp:UpdatePanel ID="UpdatePanelUpload" runat="server">
                                                        <ContentTemplate>
                                                            <asp:Label runat="server" ID="lblThrobber" Style="display: none;">
                                                    <img src="../../Images/loading.gif" alt="Loading..." />
                                                            </asp:Label>
                                                            <asp:HiddenField ID="hdStitchAssetPathUpload" Value='<%# Eval("StitchAssetPath") %>'
                                                                runat="server" />
                                                            <asp:AjaxFileUpload ID="AjaxFileUploadPlank" ThrobberID="lblThrobber" runat="server"
                                                                OnUploadComplete="AjaxFileUploadPlank_UploadComplete" OnClientUploadComplete="ReBindMaterialsGrid" />
                                                        </ContentTemplate>
                                                    </asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:15:31.223

最新版本的ajax文件上传自带更新进度。所以如果你使用它，你不必贴标签来显示失败/成功文本。有关更多信息和演示，请参阅此页面：[http ://stephenwalther.com/archive/2012/05/01/ajax-control-toolkit-may-2012-release.aspx](http://stephenwalther.com/archive/2012/05/01/ajax-control-toolkit-may-2012-release.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:26:31.750

这可能是由于更新面板的问题，

您已将 AjaxFileUpload 放在更新面板中，因此当您的标签在 AjaxFileUpload1_UploadComplete 事件中填充文本时，更新面板控件不会更新所有控件。

所以请在删除更新面板或设置更新面板的属性 UpdateMode="Conditional" 后尝试。

希望这将有助于解决您的问题。

# objective-c - 使用 gdata-objectivec-client 进行授权

> ID：14133242
> 
> 赞同：1
> 
> 时间：2013-01-03T04:55:07.717
> 
> 标签：objective-c, youtube-api, gdata-objectivec-client

我正在使用 gdata Objectivec 客户端与 youtube v2.0 一起工作。我不想多次询问用户登录。我想登录一次并获取访问令牌以供以后使用。请给我一些示例代码来执行此操作。谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:52:38.667

最好的方法是使用 gtm-oauth2 库：

[https://code.google.com/p/gtm-oauth2/](https://code.google.com/p/gtm-oauth2/)

这是一个使用它的示例应用程序：

[https://github.com/stuffmc/YouTubeSample_iOS](https://github.com/stuffmc/YouTubeSample_iOS)

另请参考这个 SO 问题：

[如何刷新我从 iOS 中的 google oauth 2.0 获得的令牌](https://stackoverflow.com/questions/14014069/how-to-refresh-the-token-that-i-got-from-google-oauth-2-0-in-ios)

# java - 谷歌云 SQL 性能不佳

> ID：14133246
> 
> 赞同：6
> 
> 时间：2013-01-03T04:55:44.243
> 
> 标签：java, google-app-engine, jdbc, google-cloud-sql

我很难使用 Google Cloud SQL 获得不错的性能，我正在做一些非常基本的 CRUD 操作，例如：

```
public BaseUser getUser(String token) throws SQLException{
    Connection conn = DriverManager.getConnection(JDBC_CON_STRING);
    PreparedStatement ps = conn.prepareStatement(GET_USER_BY_TOKEN_QUERY);
    ps.setString(1, token);
    ResultSet rs = ps.executeQuery();
    List<BaseUser> users = inflateUser(rs);
    if(users.size() == 0){
        return null;
    }
    if(users.size() > 1){
        logger.info("DATABASE MAY BE CORRUPTED, THERE'S MORE THAN 1 USER WITH THE SAME TOKEN");
    }
    ps.close();
    rs.close();
    conn.close();
    return users.get(0);
} 
```

每个查询的平均响应时间为 450 毫秒。+= 150 表示打开连接，150 表示运行，150 表示关闭。看图。以下。

![在此处输入图像描述](../Images/64c03a2f06418a996bdc98d4160a7901.png)

我已经阅读了谷歌文档、论坛和多个博客，但仍然看不到我做错了什么（我一定是做错了什么，450 毫秒/查询太远了……）

**更新 1：**我绝对是 Google Cloud SQL 问题，我安装了自己的本地 MySQL 服务器，并且性能更好（“插入或更新”为 80 毫秒，然后选择最终提交。），希望我能得到一些来自谷歌开发者的提示。团队，我真的很喜欢整个谷歌云平台，但在这种延迟水平下工作简直是不可能的 =(

**更新 2：2014/05/06**延迟问题与 D0 或 D16 相同。由于延迟，尝试从 Google ComputeEngine VM 插入 10000 行（3 个 varchar 和一个 ~100 字节的 blob）需要 32 秒。10000 次插入和单个批量插入的持续时间相同。如果我使用 64 个线程，那么持续时间将降至 3 秒。我用本机 mysql jdbc 驱动程序进行了测试。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T16:26:10.130

尝试使用 AppEngine 中的 MySQL Connector/J 驱动程序，它可能会提供更好的性能。有关要使用的类名和 URL 格式，请参阅[https://developers.google.com/appengine/docs/java/cloud-sql/#Java_Connect_to_your_database](https://developers.google.com/appengine/docs/java/cloud-sql/#Java_Connect_to_your_database)。

抢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T15:14:01.847

我遇到了与 php 和套接字一起使用的 GAE + 云 SQL 的问题。

问题是我的查询实际上使用了 3 个查询并读取了数千行，即使是艰难的只有 outputtet 对。

我用 HeidiSQL 找到了它，并将 EXPLAIN 放在选择查询的前面。

必须在 php 端进行连接，以便该查询集的加载时间（在 chrome devtools 中检查，而不是 mysql 运行时间）从 600 ms 下降到 151 ms

# php - Javascript 验证 if 语句

> ID：14133267
> 
> 赞同：0
> 
> 时间：2013-01-03T04:57:07.853
> 
> 标签：php, javascript, jquery

我正在尝试对简单的登录表单使用 javascript 验证。现在我只关注用户名输入（如果用户名已经被使用，希望它显示为红色并在其下方显示错误“该用户名已被使用”）。但是，即使当我检查元素网络时，输入更改时也没有显示任何内容，我看到它正在进入 registerjs.php 文件

在我的 html 表单页面的头部

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
    function valusername() {
    var username = $('input#username').val();
    if ($.trim(username) != '') {
        $.post('../ajax/registerjs.php', {username: username}, function(data) {
        if (data == 'That username is already taken') {

        document.getElementById("username").style.border="3px solid red";
        $('div#username_error').text(data);
    }

    });
    }
}

</script> 
```

实际的文本输入是

```
<input class="input" type="text" tabindex="1" placeholder="Username*" 
style="height:20px;" name="username" id="username" onchange="valusername()">
<div id="username_error"></div> 
```

链接的php文件registerjs.php我确定有效

```
<?php
include('../init.php');
if (isset($_POST['username']) === true && empty($_POST['username']) === false) {
$username = $_POST['username'];
if (user_exists($username) === true) {
echo("
    That username is already taken
    ");
} else {
echo("Good");
}
}
?> 
```

有谁知道我为什么会遇到这个问题？它似乎是脚本中的 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:03:22.297

做这个 ：

```
function valusername() 
{
    var username = $('input#username').val();
    if ($.trim(username) != '') 
    {
        $.post('../ajax/registerjs.php', {username: username}, function(data) 
        {
            if ($.trim(data) == 'That username is already taken') 
            {
                document.getElementById("username").style.border="3px solid red";
                $('div#username_error').text(data);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:14:31.520

更好的方法：

```
<input class="input" type="text" tabindex="1" placeholder="Username*" 
style="height:20px;" name="username" id="username" >
<div id="username_error"></div> 
```

### JS

```
<script>
    $(function(){
    $(document).on('change paste','#username', function () {
        var username = $(this).val();
        if ($.trim(username) !== '') {
            $.post('../ajax/registerjs.php', {username: username},
                function(data){
                    if (data) {
                        $("#username").css({'border','3px solid red'});
                        $('div#username_error').text('Username already exist');
                        return false;
                    }
                }
            ); // end of $.post
        } // end of if
    })
})
</script> 
```

### registerjs.php

```
<?php
include('../init.php');
// here i assume user_exists return true or false
if ( !empty($_POST['username']) && user_exists($username)) {
 return TRUE;
} 
else{
  return FALSE;
}
?> 
```

# eclipse-plugin - 在“启动 Ruble 包管理器”期间发生内部错误

> ID：14133269
> 
> 赞同：15
> 
> 时间：2013-01-03T04:57:34.803
> 
> 标签：eclipse-plugin, aptana3

我已经安装了 Aptana3 Eclipse 插件，我正在使用 eclipse 版本：Juno Service Release 1 Build id：20121004-1855。

每次我启动 eclipse 我都会看到一个错误对话框，上面写着：

在“启动 Ruble 包管理器”期间发生内部错误。java.lang.NullPointerException

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-30T15:33:43.650

全新安装 Eclipse 和 Aptana 后，我遇到了同样的问题。

为我解决的问题与杰森在他的回答中提到的非常接近。我在 Eclipse --> Preferences --> Install/Update --> Available Software Sites 中检查了可用的软件站点。

在此窗口中，有一个 Aptana 选项已被选中。我之前给它起了一个名字“Aptana”，位置是“ [http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install) ”。

在“ [http://download.aptana.com/studio3/plugin/update/](http://download.aptana.com/studio3/plugin/update/) ”中列出了 Aptana 的第二个位置，但未选中此选项，也没有名称。我将其命名为“Aptana Update”，并在方框中打勾。然后我重新启动了 Eclipse，错误就消失了。

请注意，我正在使用：
Eclipse 标准/SDK
版本：Kepler Service Release 1
Build id：20130919-0819
和
Aptana Studio 3
版本：3.4.2.201308081736-7W7I57boG98RAi489ctbvKi7VXbq

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T23:46:27.123

尝试在 Eclipse --> 首选项中检查可用的软件站点。使用首选项中的搜索字段可以快速到达那里。我注意到有一个条目：

www.apanta.com

上面的地址不是包裹的位置。一旦我取消选中该框并选择了一个：

Apanta [http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install)

它开始时没有错误。不确定这是否是完整的解决方案，但它似乎有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:49:25.050

安装 Windows 的支持文件 [http://gnuwin32.sourceforge.net/downlinks/zlib.php](http://gnuwin32.sourceforge.net/downlinks/zlib.php)

这解决了我在 Windows 中的问题。与 Linux 一样，它是默认设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T08:20:17.860

查看您的 .log 以找出哪个包有问题。

然后在安装/更新可用软件站点中取消选中、删除或更改错误的 url：Eclipse -> 首选项 -> 安装/更新 -> 可用软件站点（要检查此 url，只需复制/粘贴并在浏览器中查看..）

Aptana 更新站点（当前...）：[http ://update.aptana.com/update/studio/3.2](http://update.aptana.com/update/studio/3.2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T23:06:27.870

我通过使用 rvm 安装 zlib 解决了这个问题。我查看了我的日志文件（Eclipse：Help > Aptana > View Log File）并在 NullPointerException 之前看到了一条 zlib 错误消息。如果 zlib 不在您的日志中，这可能无法解决您的问题 ;-)

我的系统（Ubuntu）已经安装了 zlib1g 和 zlib1g-dev。

```
rvm pkg install zlib
rvm reinstall 1.9.3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-13T15:31:30.590

有一个补丁： [https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=445122#c51) ://bugs.eclipse.org/bugs/show_bug.cgi?id=445122#c51 我确认它解决了问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-26T10:34:25.113

在您的安装中找到文件*夹包。*

```
<apptanaFolder>/configuration/org.eclipse.osgi/bundles 
```

执行 chmod 以允许用户读取和写入此文件夹：

```
chmod 775 <apptanaFolder>/configuration/org.eclipse.osgi/bundles -R 
```

快乐，因为你解决了你的问题！

这里是德语： [http ://wiki.xstable.de/doku.php/entwicklungsumgebung:eclipse:troubleshooting#ruble_manager](http://wiki.xstable.de/doku.php/entwicklungsumgebung:eclipse:troubleshooting#ruble_manager)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-14T16:15:59.750

我尝试了 Jonathan 的解决方案无济于事，尽管 Aptana 的其中一个地址确实未经检查且未标记。

对我有用的只是通过帮助->检查更新来更新插件。

# php - PHP 在没有完全可分辨名称的情况下连接到 OpenLDAP

> ID：14133270
> 
> 赞同：1
> 
> 时间：2013-01-03T04:57:35.390
> 
> 标签：php, ldap, openldap

我正在尝试在 Ubuntu 上使用 OpenLDAP 复制 Microsoft AD 环境，以便我可以为我的 Web 应用程序提供测试环境。我遇到的问题是 ldap_bind 命令返回错误“无效的 DN 语法”，除非我使用完全可区分的用户名在 OpenLDAP 中进行连接，但这不是微软方面的问题。有没有办法强制 OpenLDAP 搜索其目录以供该用户进行身份验证，而不必使用完全可分辨的名称？谢谢您的帮助。

*编辑* 这是行不通的，但将是目标：

```
$ad = ldap_connect('ldap://localhost') or die("Could not connect!");
// Set version number
ldap_set_option($ad, LDAP_OPT_PROTOCOL_VERSION, 3) or die("Could not set ldap protocol");
ldap_set_option($ad, LDAP_OPT_REFERRALS, 0) or die("Could not set ldap protocol");
// Binding to ldap server
$bd = ldap_bind($ad, 'admin', 'Password1') or die("Couldn't Connect"); 
```

这是有效的：

```
$ad = ldap_connect('ldap://localhost') or die("Could not connect!");
// Set version number
ldap_set_option($ad, LDAP_OPT_PROTOCOL_VERSION, 3) or die("Could not set ldap protocol");
ldap_set_option($ad, LDAP_OPT_REFERRALS, 0) or die("Could not set ldap protocol");
// Binding to ldap server
$bd = ldap_bind($ad, 'cn=admin,dc=example,dc=com', 'Password1') or die("Couldn't Connect"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:31:13.460

是的 AD，确实使用[巧妙的技巧](http://ldapwiki.willeke.com/wiki/Ambiguous%20Name%20Resolution)从某些属性中找到 FDN。我确实希望其他一些 LDAP 服务器供应商能够实现类似的东西。

您需要以具有足够权限的用户身份进行绑定，以定位和读取用户的属性并将 FDN 传递给该用户的绑定。

# objective-c - 插入/删除单元格后，单元格未在 UITableView 中呈现

> ID：14133273
> 
> 赞同：1
> 
> 时间：2013-01-03T04:57:42.510
> 
> 标签：objective-c, ios, uitableview

我有一个可以在 2 种模式下工作的表格视图：只读和读写。在只读模式下，表格仅包含 4 个单元格，在读写模式下 - 8 个单元格。要在这两种模式之间转换，我有按钮执行操作：

```
...
NSArray* cellIndexesInCurrentMode = [self cellIndexesInMode:Mode1];
NSArray* cellIndexInNewMode = [self cellIndexesInMode:Mode2];

[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths: cellIndexInNewMode withRowAnimation:UITableViewRowAnimationFade];
[self.tableView deleteRowsAtIndexPaths:cellIndexesInCurrentMode withRowAnimation:UITableViewRowAnimationFade];
[self.tableView endUpdates]; 
```

一切正常，直到我以读写（8 个单元格）向下滚动表格，所以它反弹了。之后，点击按钮转换到模式 2 会导致其中一个单元格未渲染的情况：

```
 before transition: 
```

![过渡前：](../Images/a156b870bb31c4d3090d5b97af7d9fcd.png)

```
 after transition: 
```

![过渡后：](../Images/1e50c931bc497a18b40722ae8af35c9f.png)

我的调查表明，由于某种原因，在 UITableView 上最后一次 layoutSubviews 调用之后，此单元格的 alpha = 0。

我被卡住了，我不知道发生了什么，所以任何帮助将不胜感激。

**更新：** 这是我的 cellForRowAtIndexPath 方法： - (UITableViewCell*) tableView :(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)cellForRowAtIndexPath { IDataSourceElement item = [[self collection] getDataSourceElementAtIndex:cellForRowAtIndexPath.row];

```
MyTableCell* cell = nil;

if ([item conformsToProtocol:@protocol(MyTableCellBuilder)]) {
    cell = [(MyTableCellBuilder)item tableView:tableView buildCellForIndexPath:cellForRowAtIndexPath];
} 

if (cell == nil) {
    Class cellClass = [self getCellClassForElement: item];

    NSString* reuseId = [cellClass description];

    cell = [tableView dequeueReusableCellWithIdentifier:reuseId];
    if (!cell) {
        cell = [[[cellClass alloc] initWithReuseIdentifier :reuseId] autorelease];
    }
}

[self fillCell:cell forTableView:tableView forIndexPath:cellForRowAtIndexPath];

return cell; 
```

}

和 MyTableCellBuilder buildCellForIndexPath: 方法实现

```
- (MyTableCell*) tableView :(UITableView*)tableView buildCellForIndexPath:(NSIndexPath*)buildCellForIndexPath {
    MyTableCell* cell = myTableCell;
    if ([cell isKindOfClass:[TextPropertyCell class]] == NO) {
        cell = (MyTableCell*)[tableView dequeueReusableCellWithIdentifier :[self cellReuseIdentifier]];
        if ([cell isKindOfClass:[MyTableCell class]] == NO) {
            cell = [[[MyTableCell alloc] initWithReuseIdentifier :[self cellReuseIdentifier]] autorelease];
        }
        [self prepareCell:cell];
    }

        //cell setup
        ...
    ...
    return cell;
} 
```

我的想法是缓存 UITableViewCell 实例的问题，我知道这不是最好的方法，但无论如何我有它。我试图删除缓存，所以我所做的一切都是将 myTableCell 设置为 nil，因此它永远不会从此方法返回。而且......它有帮助！我不知道为什么，真的很想知道答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:51:36.160

显示您的 cellForRowAtIndexPath 方法实现，我确定您应该在那里寻找错误。

# php - 修改 mod_mainmenu 以获取菜单项上的悬停文本

> ID：14133274
> 
> 赞同：0
> 
> 时间：2013-01-03T04:57:50.730
> 
> 标签：php, css, joomla

我的菜单栏使用了 mod_mainmenu。现在，当我将鼠标悬停在菜单项上时，我想要一个文本。任何机构都可以帮助我。

还请告诉文件以及我必须在哪里进行修改。

万分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:20:49.123

在 mod_mainmenu 中转到创建菜单的位置。为. `title`_`anchor<a>`

例如：

```
<a href="/index.php?title=Talk:Accessing_the_database_using_JDatabase/" title="Discussion about the content page">Discussion</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:48:26.103

您可以在标签中添加标题属性以在鼠标悬停中显示它。为了在标签中添加标题，您必须修改 mod_mainmenu 的 helper.php。这是路径 -`modules/mod_mainmenu/helper.php`

在上面的文件中搜索此代码 -

```
switch ($tmp->browserNav)
{
    default:
    case 0:
        // _top
        $data = '<a title="'.$tmp->name.'" href="'.$tmp->url.'">'.$image.$tmp->name.'</a>';
        break;
    case 1:
        // _blank
        $data = '<a title="'.$tmp->name.'" href="'.$tmp->url.'" target="_blank">'.$image.$tmp->name.'</a>';
        break;
    case 2:
        // window.open
        $attribs = 'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,'.$this->_params->get('window_open');

        // hrm...this is a bit dickey
        $link = str_replace('index.php', 'index2.php', $tmp->url);
        $data = '<a title="'.$tmp->name.'" href="'.$link.'" onclick="window.open(this.href,\'targetWindow\',\''.$attribs.'\');return false;">'.$image.$tmp->name.'</a>';
        break;
} 
```

并添加 title 属性和它的值。

您也可以尝试[模板覆盖](http://docs.joomla.org/Understanding_Output_Overrides)。

希望这会有所帮助。

# c# - 在我的 XNA 游戏中最小化窗口时某些对象消失了

> ID：14133279
> 
> 赞同：1
> 
> 时间：2013-01-03T04:58:06.637
> 
> 标签：c#, graphics, xna, 2d, minimize

我正在使用 XNA 4.0 和 C# 构建游戏，当我尝试让游戏全屏运行或最小化窗口并将其恢复时遇到问题。基本上，我游戏中的一个对象（门）总是消失并且不再回来。

有谁知道当窗口最小化时究竟会发生什么以及为什么门的行为可能与游戏中的其他元素不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:57:06.853

检查更新和绘制循环，并确保您的门正在更新和重绘。

当您更改窗口的大小并且对象消失时，通常在重新绘制框架时会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:53:53.823

我解决了这个问题，这非常棘手。发生的事情与窗口大小调整有关，因为当我的计算机显示器只有 1280 x 800 时，我使用 1366 x 768。当然，某些游戏总是被剪裁，但在最小化时，剪裁变化非常微妙。

最好的解决方法是开始将元素放在我自己的屏幕分辨率内。我现在正在编码假设分辨率为 1280 x 768。

# log4net - log4net WPF UserControl Appender 不会在 DoAppend 事件期间使用 BackgroundWorker 更新 RichTextBox

> ID：14133280
> 
> 赞同：1
> 
> 时间：2013-01-03T04:58:07.713
> 
> 标签：log4net, backgroundworker

我想知道是否有人遇到过这个问题。我试图在 WPF 应用程序的 RichTextBox 中显示所有日志记录事件，并认为我可以使用 UserControl 上的 IAppender 接口来添加全局 Appender。

我正在使用 BackgroundWorker 在后台运行“长时间运行”进程，并在 DoWork 事件期间创建 logger.Info("text") 事件。

我遇到的问题是 DoAppend 事件触发，并且似乎文本在 Dispatcher 事件期间得到更新，但 UI 没有反映这一点。

这是我的 LogAppender 类：

```
public partial class LogAppender : UserControl, IAppender
{
    public LogAppender()
    {
        InitializeComponent();
    }

    public void Close()
    {
    }

    public log4net.Layout.PatternLayout Layout
    {
        get;
        set;
    }

    public void DoAppend(log4net.Core.LoggingEvent loggingEvent)
    {
        this.LogTextBlock.Dispatcher.Invoke(
            DispatcherPriority.Normal,
            new Action(
                delegate
                {
                    StringWriter writer = new StringWriter();

                    this.Layout.Format(writer, loggingEvent);

                    this.LogTextBlock.AppendText(writer.ToString());
                }));
    }
}

<UserControl>
    <Grid>
        <RichTextBox x:Name="LogTextBlock"/>
    </Grid>
</UserControl> 
```

这是我的 MainWindow.xaml 按钮单击和 backgroundworker 代码：

```
public partial class MainWindow
{
    protected static readonly ILog logger = LogManager.GetLogger(typeof(MainWindow));

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += bw_DoWork;
        bw.RunWorkerCompleted += bw_RunWorkerCompleted;
        bw.RunWorkerAsync();
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        logger.Info("Complete");
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        logger.Info("Start");
        Thread.Sleep(5000);
        logger.Info("End");
    }
}

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Button Height="30" Click="Button_Click_1">Start</Button>
    <local:LogAppender Grid.Row="1" Grid.ColumnSpan="2"/>
</Grid> 
```

我尝试将 TextBlock 绑定到由 DoAppend 方法生成的文本以及设置 TextBlock 的 Text 属性，但无济于事。

我确定我遗漏了一些小而重要的观点，但是今天下午我挠了挠头大约 3 个小时，但无济于事。

任何帮助表示赞赏！

谢谢布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:20:38.807

[这里](http://peteohanlon.wordpress.com/2009/10/12/logging-display-and-wpf/)的 log4net Appender可能会对您有所帮助。本质上，Pete 实现了一个支持 INotifyPropertyChanged 的​​ lognet Appender，并公开了一个属性，该属性是迄今为止记录的所有消息的串联。通过我上面链接的页面中的链接提供的示例程序显示了如何使您的视图绑定到 Appender 的输出。我实际上并没有使用过它，所以我无法评论它有多么有用（或没用），但它似乎确实在试图解决你试图解决的同一个问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:49:56.543

不幸的是，我无法找到解决这个特定问题的快速方法。我为解决将 log4net 日志转换为 WPF 表单的问题所做的工作是创建了一些 hack（或者可能不是？？）。

我创建了一个单例，一次暴露一行 log4net“日志”文本（不想占用太多内存）。基本上，SingletonAppender 上有一个属性“Log”，它在自定义 IAppender 的 DoAppend 事件期间被更改或更新，如下所示。

```
public class SingletonAppender
{
    private static volatile SingletonAppender instance;

    private static object syncRoot = new Object();

    private string log = string.Empty;

    private SingletonAppender() 
    {

    }

    public static SingletonAppender Instance
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                    {
                        instance = new SingletonAppender();
                    }
                }
            }

            return instance;
        }
    }

    public string Log
    {
        get
        {
            string retValue = this.log;

            // whenever we "get" the Log property, reset the underlying value to empty
            this.log = string.Empty;

            return retValue;
        }

        set
        {
            this.log = value;
        }
    }
}

public class LogAppender : IAppender
{
    private string name = string.Empty;

    public LogAppender()
    {
    }

    #region IAppender Members

    public void Close()
    {
    }

    public void DoAppend(log4net.Core.LoggingEvent loggingEvent)
    {
        string retValue = string.Empty;

        if (this.Layout != null)
        {
            StringWriter writer = new StringWriter();
            this.Layout.Format(writer, loggingEvent);
            retValue = writer.ToString();
        }
        else
        {
            retValue = loggingEvent.MessageObject.ToString();
        }

        SingletonAppender.Instance.Log += retValue;
    }

    public log4net.Layout.PatternLayout Layout
    {
        get;
        set;
    }

    public string Name
    {
        get
        {
            return this.name;
        }
        set
        {
            this.name = value;
        }
    }

    #endregion
} 
```

我在后台工作人员中创建了一个“心跳”计时器，以获取在此过程中发生的日志事件：

```
public partial class MainWindow
{
    protected static readonly ILog logger = LogManager.GetLogger(typeof(MainWindow));

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += bw_DoWork;
        bw.ProgressChanged += bw_ProgressChanged;
        bw.RunWorkerCompleted += bw_RunWorkerCompleted;
        bw.RunWorkerAsync();
    }

    void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
         this.LogTextBox.AppendText(SingletonAppender.Instance.Log);
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        logger.Info("Complete");
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        logger.Info("Start");
        Timer timer = new Timer(new TimerCallback(TimerCallback), sender, 500, 2000);
        Thread.Sleep(5000);
        logger.Info("End");
    }

    public void TimerCallback(object state)
    {
        if (state != null)
        {
            BackgroundWorker worker = state as BackgroundWorker;

            if (worker != null && worker.IsBusy)
            {
                worker.ReportProgress(0, null);
            }
        }
    }
}

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Button Height="30" Click="Button_Click_1">Start</Button>
    <RichTextBox x:Name="LogTextBox"/>
</Grid> 
```

# asp.net-mvc-3 - 如何在 MVC3 中为特定视图禁用远程验证？

> ID：14133281
> 
> 赞同：0
> 
> 时间：2013-01-03T04:58:11.157
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在注册和登录中实现远程验证。我的模型属性是

```
[RegularExpression(@"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$", ErrorMessage = "* Invalid ")]
[Remote("ValidateUserId", "Registration")]
public String UserID { get; set; } 
```

控制器：

```
 public JsonResult ValidateUserId(string UserID)
    {
        var Count = ObjDbRegistration.Tbl_Login.Where(c => c.UserID == UserID);

        if (Count.Count() > 0)
        {
            return Json("* User Already Exists", JsonRequestBehavior.AllowGet);
        }
        return Json(true, JsonRequestBehavior.AllowGet);
    } 
```

这也是在登录页面同时验证注册页面的现有用户。我的要求是不在登录页面中进行验证。

谢谢

# ruby-on-rails - jquery ajax rails 3.2中的多个部分

> ID：14133283
> 
> 赞同：0
> 
> 时间：2013-01-03T04:58:14.803
> 
> 标签：ruby-on-rails, ruby, jquery

如何在rails 3.2中通过ajax更新多个部分在这里我做了我的ajax请求

```
$.ajax({
    url: "/home/create_entry",
    type: "POST",
    data: params,
    cache: false,
    success: function(data) {
        $('#'+did).html(data);
        //   $("#results").html('<%#=j render(:partial => 'explorer', :locals => {:entries => @entries, :entry_count=> @entry_count}) %>');
    }
}); 
```

在控制器中写入

```
def create_entry
 if request.xhr?  
  @entry = Entry.new
  @entry.title = params[:title]
   respond_to do |format|
            if @entry.save
              flash[:notice] = "Entry created successfully"
              @entry = Entry.last
              @entries = Entry.where(:user_id => current_user.id).order(sort_column + ' ' + sort_direction)
              @entry_count = @entries.count
              format.js
            end
          end
    end 
```

在 create_entry.js.erb

```
<%= render :partial =>  'edit_entry_form', :locals => {:entry => @entry}%>
<%= render :partial =>  'explorer', :locals => {:entries => @entries}%> 
```

现在我可以获取这两个数据，我如何在 ajax 请求成功后更新这两个部分？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:50:21.040

您应该考虑使用 jQuery 将这两个部分的内容动态插入到您要更新的页面区域中。就像是：

```
$("#divforedit_entry_form").html("<%= escape_javascript(render 'edit_entry_form' :locals => {:entry => @entry})%>");

$("#divforexplorer").html("<%= escape_javascript(render 'explorer' :locals => {:entries => @entries})%>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:02:04.243

首先，我们需要更正您的 AJAX 调用，因为我们不需要将服务器响应添加到仅评估的页面上（在 Rails 中默认情况下会发生这种情况）。

### Javascript

```
$.ajax({
  url: "/home/create_entry",
  type: "POST",
  data: params,
  cache: false
}); 
```

现在我们更新控制器以执行逻辑并获取正确渲染部分所需的任何数据。

### 控制器

```
def create_entry
  if request.xhr?  
    # Create entry
    respond_to do |format|
      if @entry.save
        # Collect any data needed for view
        format.js
      end
    end
  end
end 
```

现在在视图中，我们使用 jQuery 和 Rails javascript 帮助器将部分替换/插入到 HTML 文档中。

### 查看 (create_entry.js.erb)

```
$("#edit_entry_form").replaceWith("<%= j(render('edit_entry_form', :entry => @entry)) %>");
$("#explorer").replaceWith("<%= j(render('explorer', :entries => @entries)) %>"); 
```

以上假设 HTML ID`#edit_entry_form`和`#explorer`存在。

# java - Android ImageView - 填充宽度和调整大小以保持纵横比

> ID：14133286
> 
> 赞同：4
> 
> 时间：2013-01-03T04:58:29.203
> 
> 标签：java, android, resize, imageview, aspect-ratio

我有一排`View`正在使用的`ListView`.

这`RowView`由水平方向`ImageView`的左侧和`TextView`右侧组成，`LinearLayout`其中图像占 40% 的空间，文本占剩余的 60%。

我希望布局以`ImageView`以下方式处理图像的大小调整：

1.  水平拉伸图像，使其填充给定 40%`LinearLayout`
2.  垂直调整大小`ImageView`以保持原始纵横比

这是我的布局方法：

```
protected class RowView extends LinearLayout {
public ImageView iv = null;
public TextView tv = null;

private LinearLayout.LayoutParams ivlp = null;
private LinearLayout.LayoutParams tvlp = null;

public RowView(Context ct) {
    super(ct);

    setOrientation(LinearLayout.HORIZONTAL);

    // Create the views
    iv = new ImageView(ct);
    ivlp = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 0.4f);
    iv.setLayoutParams(ivlp);
    iv.setAdjustViewBounds(true);
    iv.setScaleType(ScaleType.FIT_XY);

    tv = new TextView(ct);
    tvlp = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 0.4f);
    tv.setLayoutParams(tvlp);
    tv.setGravity(Gravity.CENTER_VERTICAL | Gravity.RIGHT);

    // Add the views
    addView(iv);
    addView(tv);
} 
```

}

我得到的结果是这样的：

![在此处输入图像描述](../Images/e10eefc7aef6b5d3b175a422d1ebdc0a.png)

据我了解：

*   `MATCH_PARENT`正确地强制图像水平拉伸以填充 40% 的空间
*   `ImageView.setAdjustViewBounds(true)`应该允许任何必要的调整大小，这`ImageView`就是我想要的。问题是`ImageView.ScaleType`似乎没有一个人能做我想做的事
*   `ImageView.ScaleType(ScaleType.FIT_XY)`不是我想要的，因为它不保持纵横比。但是所有其他这样做的人似乎都没有拉伸高度`ImageView`（这`ImageView.setAdjustViewBounds(true)`几乎没用）。

我究竟做错了什么？这么简单的事情竟然这么难，这似乎是错误的？

还是我实际上必须努力扩展`ImageView`和覆盖`onMeasure`以强制调整大小和纵横比？

或者是否有一个聪明的技巧`Matrix`来完成工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-09T07:43:22.963

我相信这就是您正在寻找的：

```
<ImageView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/myImage"
    android:scaleType="fitCenter"
    android:adjustViewBounds="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:05:40.780

完全移除刻度类型。另外，我想你可能误解了什么`setAdjustViewBounds`。如果图像被缩放，则 中的位图`ImageView`被缩放，而不是`ImageView`. 设置`setAdjustViewBounds`为 true 将确保`ImageView`' 的边界将始终与绘制的位图的边界相匹配。

# iphone - NSMinuteCalenderUnit 与 kCFCalenderUnitMinute

> ID：14133289
> 
> 赞同：0
> 
> 时间：2013-01-03T04:58:35.943
> 
> 标签：iphone, ios, cocoa-touch

我们如何区分 NSMinuteCalenderUnit 和 kCFCalenderUnitMinute ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:16:54.860

它们完全相等且等价，但被单独定义，因为`CFCalendar`它们`NSCalendar`是同一子系统的独立接口（在此处插入有关免费桥接的评论。）

为了与 Apple 的 API 保持一致并确保代码的可读性，您应该将`kCF`常量用于 Core Foundation 函数，并将`NS`常量用于 Cocoa 方法/类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:12:54.580

他们是一样的。从 的定义`NSCalendarUnit`：

`NSMinuteCalendarUnit = kCFCalendarUnitMinute`

`NSMinuteCalendarUnit`每当输入参数或变量时使用`NSCalendarUnit`（通常在像 Foundation 和 Cocoa 这样的 Objective-C 框架中）。`kCFCalendarUnitMinute`每当输入变量或参数时使用`CFCalendarUnit`（通常在核心基础代码中）。

# ruby-on-rails - 表格中的嵌套 content_tag 未转义 html

> ID：14133291
> 
> 赞同：0
> 
> 时间：2013-01-03T04:59:24.617
> 
> 标签：ruby-on-rails, view

我在 Rails3 中创建了一个 Presenter 并且遇到了嵌套内容标签的问题。代码摘录如下：

```
def lesson_activity_row
  lesson.activities.collect do |lesson_activity|
    content_tag :tr do 
      concat(content_tag :td, lesson_activity.activity
      concat(content_tag :td, lesson_activity.duration
      concat(content_tag :td, lesson_activity.agent
     end
   end
end 
```

在我看来，我会得到以下信息：

```
["<tr><td>New Activity</td><td>5 Minutes</td><td>Teacher</td></tr>", "<tr><td>New Activity</td><td>5 Minutes</td><td>Teacher</td></tr>"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:59:24.617

当我在寻找时，我真的找不到任何好的答案来解释为什么这不起作用，并且看到了许多没有答案或对我不起作用的问题。因此，在查看了可用于 Arrays 和 ActiveSupport::SafeBuffer 的方法之后，我想出了以下方法，该方法有效：

```
def lesson_activity_row
  lesson.activities.collect do |lesson_activity|
    content_tag :tr do 
      concat(content_tag :td, lesson_activity.activity
      concat(content_tag :td, lesson_activity.duration
      concat(content_tag :td, lesson_activity.agent
     end.to_s #note the to_s
   end.join.html_safe #note join.html_safe
end 
```

我看到的许多解决方案都包括 using `"joins"`，但这里的 content_tag 没有返回数组。它返回一个实例`ActiveSupport::SafeBuffer`并且`#join`不是该对象的方法。`to_s`，然而，是。

当然，这`content_tag`是嵌套在 中的`lesson.activities.collect`，它是一个数组，当然`#join`也是一个可以在 Array 上调用的方法。并`#html_safe`转义html。

希望这对其他人有帮助！

# ios - 什么是适用于 iOS 应用程序的最佳移动分析服务，哪些更新下载量是实时的？

> ID：14133301
> 
> 赞同：2
> 
> 时间：2013-01-03T05:00:04.707
> 
> 标签：ios, analytics, flurry

可能是这个问题超出了开发环境。什么是 iOS 应用程序的最佳移动分析服务，更新下载量是实时的？目前我正在使用flurry，它每6小时提供一次下载计数。有没有更快捷的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:08:04.930

**最佳**一词需要更多解释，因为它取决于一个人的要求。您需要哪些功能？它应该是免费服务吗？等等

这里有一些选项。我只回答这部分 -*有更快的服务吗？*

1.  [Bango](http://bango.com/mobileanalytics/)有移动应用分析，而且是实时的（根据他们的网站）。
2.  **[Countly](http://count.ly/)**是另一种选择，它是开源和实时的。
3.  [mtiks](http://www.mtiks.com/)是实时的。
4.  [Appsflyer](http://www.appsflyer.com/)是另一个，但我认为它没有免费计划
5.  [appinsights](http://appinsights.co.uk/)是实时的，并提供免费试用期。
6.  [船长](http://www.capptain.com/)也是实时的
7.  [应用程序图](http://www.appfigures.com/)。
8.  [联系代理](http://www.kontagent.com/)

# css - 具有重复背景图像媒体查询的 100% Div

> ID：14133303
> 
> 赞同：1
> 
> 时间：2013-01-03T05:00:09.423
> 
> 标签：css, media-queries

我无法确定解决方案。

我有一个带有重复背景图像的 div，它在屏幕上是 100%。所以让我们说：

```
.services_wrap {
    width:100%;
    height:200px;
    background:url('../images/services_tile.png') repeat-x;
}

<div class="services_wrap">
    //Content
</div> 
```

如何指定一个媒体查询，在调整屏幕大小时将整个 div 缩小，就像普通 div 一样：

```
@media screen and (max-width: 650px) {

    /*Makes the logo shrink*/
    #header {
            height:auto;
    }
} 
```

但是如果我用 .services_wrap 尝试这个，什么都不会发生。

我试过 background-size: 没有运气的属性。

是否可以缩放重复图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:03:19.403

采用`background-size`

```
div {
    background: url("//www.placehold.it/50x50") repeat-x;
}

@media screen and (max-width: 900px) {
    div {
        background-size: 25px;
    }
} 
```

[演示](http://jsfiddle.net/dwSLu/)

# c++-cx - 任务遇到异常后错误处理继续不执行

> ID：14133305
> 
> 赞同：0
> 
> 时间：2013-01-03T05:00:40.423
> 
> 标签：c++-cx

我是 C++/CX 任务的新手，这让我抓狂。以下代码生成异常“无效参数已传递给认为无效参数致命的函数”。我知道它成功地创建了文件并进入了该任务的继续（或至少达到了在那里定义的断点），并且我 99% 确定（基于以前的工作）由于文件不是导致 XmlDocument::LoadFromFile 方法崩溃的有效 XML。我想尝试实际捕获该异常，因此我构建了几个 MSDN 文档中定义的错误处理延续。（第二个样本）

```
 TEST_METHOD(The_storage_file_must_reference_a_valid_xml_file)
    {
        auto folder = ApplicationData::Current->LocalFolder;

        auto createFileTask = 
            create_task(ApplicationData::Current->LocalFolder->CreateFileAsync("TestFile.txt", CreationCollisionOption::ReplaceExisting))
            .then([this] (StorageFile^ file)
            {
                XmlLoadSettings^ loadSettings = ref new XmlLoadSettings();
                loadSettings->ProhibitDtd = false;
                loadSettings->ResolveExternals = false;

                auto loadXmlDocumentTask = 
                    create_task(XmlDocument::LoadFromFileAsync(file, loadSettings))
                    .then([this] (XmlDocument^ doc)
                    {
                        int x = 99;
                    });
            });
    } 
```

这是带有错误继续的代码....

```
TEST_METHOD(The_storage_file_must_reference_a_valid_xml_file)
    {
        auto cut = ref new CategoryDataLoadBuilder();
        auto folder = ApplicationData::Current->LocalFolder;

        auto createFileTask = 
            create_task(ApplicationData::Current->LocalFolder->CreateFileAsync("TestFile.txt", CreationCollisionOption::ReplaceExisting))
            .then([this] (StorageFile^ file)
            {
                XmlLoadSettings^ loadSettings = ref new XmlLoadSettings();
                loadSettings->ProhibitDtd = false;
                loadSettings->ResolveExternals = false;

                auto loadXmlDocumentTask = 
                    create_task(XmlDocument::LoadFromFileAsync(file, loadSettings))
                    .then([this] (task<XmlDocument^> t)
                    {
                        try
                        {
                            t.get();
                        }
                        catch (COMException^ ex)
                        {
                            int x = 99;
                        }
                    });
            });
    } 
```

当我尝试调试这个测试时，我在测试引擎中遇到了访问冲突，而且通常情况下，调试器似乎只是陷入了困境。

我是否误解了错误延续的工作原理？它在 VS 测试引擎中不起作用吗？有没有更好的方法来检查当 XML 文件错误时生成的“真实”异常，我可以在我的测试中显式检查？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:26:35.113

经过一些额外的研究和理解，我发现了这篇博文：[http](http://w8md.wordpress.com/2012/09/26/async-unit-tests-in-ccx/) ://w8md.wordpress.com/2012/09/26/async-unit-tests-in-ccx/ 。按照 MSDN 论坛中的链接[如何通过 c++ 在 unittest 项目中使用异步功能？](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/e51e2fbd-f5e0-45b3-8ac1-e7514b4e37d4)我看到这在 MS Test 框架中不受支持。文章中提供的源代码工作正常。作为一个实验，我提取了代码来泵送事件，并且能够让测试运行。（当然，我会推荐使用/修改原作者的源代码。）

（顺便说一句，回答我自己的问题我非常不舒服，但我不确定还能做什么。）

# visual-studio-2012 - 如何在 Visual Studio 2012 中获得完整的设置项目支持？

> ID：14133306
> 
> 赞同：1
> 
> 时间：2013-01-03T05:00:44.493
> 
> 标签：visual-studio-2012, windows-installer, setup-project, setup-deployment

我可以使用 Visual Studio 2012 中的任何安装软件来创建安装项目吗？

因为安装屏蔽限量版设置项目中的许多选项被禁用。我不能自定义那些？

*   如何在 VS 2012 中获得完整的自定义支持？
*   我可以使用任何其他安装软件，那我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:12:39.907

看起来以下帖子确实解决了您的设置项目支持问题：

*   [Visual Studio 2012 安装项目模板在哪里？](http://social.msdn.microsoft.com/Forums/pl-PL/msbuild/thread/3570f0b3-53c1-4d2e-94fe-16ed7af70bbf)
*   [使用 Visual Studio 2012 创建 MSI 或设置项目](https://stackoverflow.com/q/12378125/1437962)

但是，如果您正在寻找以前的“基本设置和部署项目类型 Visual Studio 安装程序” - 那么它们[**不再受支持**](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3041773-bring-back-the-basic-setup-and-deployment-project-) :(。

# android - 没有这样的表：ogrenci：，编译时：INSERT INTO

> ID：14133307
> 
> 赞同：1
> 
> 时间：2013-01-03T05:01:02.660
> 
> 标签：android, sqlite, sqliteopenhelper

我正在尝试配置一个简单的`SQLiteOpenHelper`，并在执行时出错。

错误是：

> 表`ogrenci`没有名为的列`field__final`

编译时：

```
INSERT INTO ogrenci(field__final, field__numarasi, field_ad, field__vize, field__soyad) VALUES(?, ?, ?, ?, ?); 
```

我无法弄清楚是什么问题？

`dbSQLite.java`班级 ：

```
package com.example.sqllitevt;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class dbSQLite extends SQLiteOpenHelper {

    private static final String VERITABANI = "ogrenciler";
    private static final String TABLO_ADI = "ogrenci";
    private static final String KISI_ADI = "field_ad";
    private static final String KISI_SOYADI = "field__soyad";
    private static final String KISI_NUMARASI = "field__numarasi";
    private static final String KISI_VIZE = "field__vize";
    private static final String KISI_FINAL = "field__final";
    private static int SURUM = 1;

    public dbSQLite(Context context) {
        super(context, VERITABANI, null, SURUM);
        // TODO Auto-generated constructor stub
    }

    @Override 

    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

          String sql = "CREATE TABLE " + TABLO_ADI + " ("
                                  + "id INTEGER PRIMARY KEY AUTOINCREMENT," 
                                  + KISI_ADI + " TEXT NOT NULL,"
                                  + KISI_SOYADI + " TEXT NOT NULL," 
                                  + KISI_NUMARASI + " TEXT" 
                                  + KISI_VIZE + "TEXT" 
                                  + KISI_FINAL + "TEXT" + ");";

        db.execSQL(sql);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        if (oldVersion >= newVersion)
            return;

        String sql = null;
        if (oldVersion == 1)
            sql = "alter table " + TABLO_ADI + " add note text;";
        if (oldVersion == 2)
            sql = "";

        Log.d("EventsData", "onUpgrade  : " + sql);
        if (sql != null)
            db.execSQL(sql);

    }

    public void kaydet(String k_ad, String k_soyad, String k_numara,
            String k_vize, String k_finali) {
        try{
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues cv=new ContentValues();

        cv.put(this.KISI_ADI, k_ad);
        cv.put(this.KISI_SOYADI, k_soyad);
        cv.put(this.KISI_NUMARASI, k_numara);
        cv.put(this.KISI_VIZE, k_vize);
        cv.put(this.KISI_FINAL, k_finali);

        db.insertOrThrow(this.TABLO_ADI,null,cv);

        Log.d("DB->Basarili","Basarılı");
        db.close();
        }catch(SQLiteException ex){
            Log.e("DB->Kayit", "Basarisiz oldu:"+ex.getMessage() );
        }

    }

} 
```

`ekle.java`班级：

```
package com.example.sqllitevt;

import android.os.Bundle; import android.app.Activity; import android.text.Editable; import android.view.Menu; import android.view.View; import android.widget.Button; import android.widget.EditText; import android.widget.TabHost; import android.widget.TabHost.TabSpec; import android.widget.Toast;

public class ekle extends Activity {    dbSQLite db;    Button kaydet;  EditText ad,soyad,numara,vize,finali;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sekme_ekle);

        kaydet=(Button) findViewById(R.id.btnKaydet);
        ad=(EditText)findViewById(R.id.txtAd);
        soyad=(EditText)findViewById(R.id.txtSoyad);
        numara=(EditText)findViewById(R.id.txtNumara);
        vize=(EditText)findViewById(R.id.txtVize);
        finali=(EditText)findViewById(R.id.txtFinal);

        kaydet.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                db=new dbSQLite(getApplicationContext());

                String k_ad=ad.getText().toString();
                String k_soyad=soyad.getText().toString();
                String k_numara=numara.getText().toString();
                String k_vize= vize.getText().toString();
                String k_finali=finali.getText().toString();

                db.kaydet(k_ad, k_soyad, k_numara ,k_vize,k_finali);

                    Toast.makeText(getApplicationContext(), "Kayıt Edildi", Toast.LENGTH_LONG).show();  
                            }       });

    } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:05:24.590

将查询更改`CREATE TABLE`为：

```
 String sql = "CREATE TABLE " + TABLO_ADI + " ("
                              + "id INTEGER PRIMARY KEY AUTOINCREMENT, " 
                              + KISI_ADI + " TEXT NOT NULL, "
                              + KISI_SOYADI + " TEXT NOT NULL, " 
                              + KISI_NUMARASI + " TEXT, " 
                              + KISI_VIZE + "TEXT, " 
                              + KISI_FINAL + "TEXT );"; 
```

目前您没有在和列 之间添加**“、**`KISI_NUMARASI` ”`KISI_VIZE``KISI_FINAL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:35:04.163

检查您的表是否有一个名为`field_final`. 我建议你重新创建表。该错误表示该列`field_final`不**存在**。

考虑为您的列使用更简单的名称，例如，使用类似`finalNotu`或`final_notu`代替`field__final`. 使用复杂的列名通常是个**坏**主意。

我认为这个方法会给你这个想法......这个方法应该属于你的`dbSQLHelper`类。

```
public void reCreate() {
     SQLiteDatabase db = this.getWritableDatabase();
     db.execSQL("DROP TABLE IF EXISTS " + TABLO_ADI);
     String sql = "CREATE TABLE " + TABLO_ADI + " ("
                          + "id INTEGER PRIMARY KEY AUTOINCREMENT," 
                          + KISI_ADI + " TEXT NOT NULL, "
                          + KISI_SOYADI + " TEXT NOT NULL, " 
                          + KISI_NUMARASI + " TEXT, " 
                          + KISI_VIZE + "TEXT, " 
                          + KISI_FINAL + "TEXT" + ");"; 
     db.execSQL(sql);
     db.close();
} 
```

# internet-explorer-8 - IE8 不显示某些图像

> ID：14133308
> 
> 赞同：0
> 
> 时间：2013-01-03T05:01:08.987
> 
> 标签：internet-explorer-8

我正在尝试编辑一个 wordpress 主题，但我遇到了一些不想出现在 IE8 上的图像的问题。其他版本的 IE 以应有的方式呈现网站，但 IE8 让我感到头疼，我不知道如何解决。

请[看一看](http://pelerinaje.tapet-online.ro/)。

我真的不知道为什么会这样。

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:25:02.717

问题是由具有此 CSS 规则的图像引起的：

```
max-width: 100%; 
```

要修复它，如果您实际上不需要它，可以完全删除该规则，仅为 Internet Explorer 8 删除它（请参阅[此问题](https://stackoverflow.com/questions/660652/ie8-css-selector)），或将这两个 CSS 规则添加到父`a`标记：

```
display: block;
width: 300px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:16:45.123

你在 IE8 上的 CSS 有问题。尝试添加“宽度：30％；” 在保存图像的 div 上是这样的：

```
<div class="hentry post publish post-1 odd author-admin category-oferte-pelerinaje" id="post-32">
    <div style="float: left; width: 30%;">
<A title="Pelerinaj la Schitul Sfantului Ierarh Modest – Judetul Arges" href="http://pelerinaje.tapet-online.ro/pelerinaj-la-schitul-sfantului-ierarh-modest-judetul-arges/"><IMG class="archive-thumbnail featured" alt="Pelerinaj la Schitul Sfantului Ierarh Modest – Judetul Arges" src="http://pelerinaje.tapet-online.ro/wp-content/uploads/2012/12/117491_ierah-modest-220x150.jpg" width=300 height=225></A> 
```

# sql - 如何将一个表中的值分配给数据库中的另一个表

> ID：14133310
> 
> 赞同：1
> 
> 时间：2013-01-03T05:01:34.290
> 
> 标签：sql, sql-server-2008

在我的数据库中，我有两个表。在表 A 中，我使用 Update 来增加 exp: update number set lastnumber = lastnumber + 1 一旦输入了新的 rerods。

如何将表A的值分配给表B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:04:04.613

加入两个表来更新，假设你有两个表之间的关系......由于你的表 A 已经被 更新`SET A.lastnumber = A.lastnumber + 1`，你可以使用`A.lastnumber`（新值）来更新`B.lastnumber`

```
UPDATE B
SET B.lastnumber = A.lastnumber
FROM TABLE B
JOIN TABLE A
ON A.ID = B.ID
; 
```

`where`如果您有其他更不同的列和条件来验证连接和更新，您也可以添加子句...

# xml - 在 perl 中串行处理 XML 数据

> ID：14133312
> 
> 赞同：9
> 
> 时间：2013-01-03T05:01:57.323
> 
> 标签：xml, linux, perl, centos

我想知道在 Perl 的情况下，哪种 XML 解析器最适合我。我做了很多阅读并尝试了`XML::LibXML`and `XML::SAX`。第一个用了太多内存，第二个对我来说似乎没有那么快（即使在关闭纯 perl 解析器之后）。

我的需求相当具体。我通过`Net::SSH`库收到高达 50MB 的较大响应。我想在收到这些数据时将其传递给 XML 库，以便在内存中保持最少的数据量。然后我需要在某些标签中查找数据并对其执行任何操作，在某些情况下汇总一堆值，在其他情况下只需提取值并将它们写入文件或其他任何内容。所以我需要一个可以连续工作、工作速度快、使用最少内存的 XML 解析器。我得到的数据最多为 1024 字节，所以我希望能够做类似的事情`$myparser->sendData($mynewData)`，然后在打开或关闭新标签时调用函数，类似于所做的事情`XML::SAX`。

我不一定需要 XPath 或 XSLT。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T05:32:37.647

我建议使用[`XML::Twig`](http://search.cpan.org/perldoc?XML::Twig).

这个模块使用起来非常方便，而且它可以在不占用太多内存的情况下串行读取数据。

可能最显着的特点之一`XML::Twig`是它允许在所谓的混合模型中解析 XML：您可以解析整个文档（需要整个文档和大量内存），您可以使用回调来解析小块（允许流式传输，内存消耗小），或者您可以使用这些的任意组合。

事实证明，这种组合模型是最方便的功能 - 从流中加载小叶子，您可以免费有效地访问它的所有小分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T07:18:06.893

您也可以使用普通的 old [`XML::Parser`](http://search.cpan.org/perldoc?XML::Parser)，它几乎可以满足您的要求：

> “这个模块提供了解析 XML 文档的方法。它建立在 XML::Parser::Expat 之上，这是 James Clark 的 expat 库的一个较低级别的接口。每次调用其中一个解析方法都会创建一个新的 XML 实例::Parser::Expat 然后用于解析文档。可以在创建 XML::Parser 对象时提供 Expat 选项。然后在每次解析调用时将这些选项传递给 Expat 对象。也可以给出它们作为解析方法的额外参数，在这种情况下，它们会覆盖在 XML::Parser 创建时给出的选项。"
> 
> “Expat 是一个基于事件的解析器。当解析器识别文档的某些部分（比如 XML 元素的开始或结束标记）时，任何为该类型事件注册的处理程序都会使用合适的参数调用。”

我用它来解析[Wikipedia XML 转储](http://en.wikipedia.org/wiki/Wikipedia:Database_download)，即使在压缩后也有几 GB 的大小，并且发现它可以很好地解决这个问题。与此相比，一个 50 MB 的文件应该是小菜一碟。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T13:13:25.840

XML::LibXML 还带有两个流解析器，它们应该比纯 Perl 解决方案更快：

### XML::LibXML::SAX

与 XML::SAX 兼容的 SAX 解析器。

### XML::LibXML::Reader

libxml2 的拉解析器的接口。它提供了比 SAX 更简单的接口并且速度更快一些。据我所知，XML::LibXML::Reader 是解析 XML 文件而不将它们完全加载到内存中最快的 Perl 模块。

# javascript - 在视图中显示临时 div

> ID：14133313
> 
> 赞同：0
> 
> 时间：2013-01-03T05:02:01.090
> 
> 标签：javascript

我想根据我的点击显示一个临时 div。例如，当我单击第二行时，临时 div 将显示在第二行之后。

这是我的看法：

```
<div id="sidetree" align="center">
  <div id="sidetreecontrol">
    <a href="?#">Collapse All</a> | <a href="?#">Expand All</a>
  </div>
  <ul class="treeview" id="tree">
    <li class="expandable">
      <div class="hitarea expandable-hitarea"></div>
      <a href="?/index.cfm">These are the Sponsors Of <?=$sponsor_id;?></a>
      <ul style="display: none;">
      <?php
        foreach($Level1Details->result() as $row){
      ?>
        <li id="sponsor_id"><label alt="<?=$row->user_id?>"><?=$row->user_id;?></label></li>
        <ul><div id="levelTwo"></div></ul>
        <?php } ?> 
```

和 JS：

```
$(document).ready(function(){
  $('#sponsor_id label').live('click',function() {
    var sponsor_id=$(this).attr("alt");
    alert(sponsor_id);
    var js={"sponsor_id":sponsor_id};
    $.post(url+"loyalty/level2", js, function(data){
      $('#levelTwo').html(data.result);
      }, "json");
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:13:02.570

可能这是你想要的东西：

```
$(yourDiv).click(function(){
    $('.tempdiv').remove();
    var tempDiv = $("<div/>").attr('class', 'tempdiv').css({"width": "100px". "height":100px"}).appendTo($(this));
}); 
```

# php - mysql_query 中的更新通常可以正常工作。但有时不返回任何结果

> ID：14133316
> 
> 赞同：2
> 
> 时间：2013-01-03T05:02:40.690
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_query 中的更新有时会返回 null](https://stackoverflow.com/questions/14135120/update-in-mysql-query-sometime-return-null)

我`update`在`mysql_query`我的 PHP 代码中使用。在 localhost（在 xampp 中）我的代码可以正常工作，但在生产主机上，代码通常可以正常工作，但有时不会返回更新查询的结果。

如果更新失败，它必须返回 'error' 或 '0' 但它不返回任何结果。为什么？

这是我的代码：

```
<?php
.
.
.
$QUERY_TRANSACTION = mysql_query('START TRANSACTION');
if(!$QUERY_TRANSACTION){
    echo "error 101" ;
    exit;
}
$seed_query = "INSERT INTO seeds VALUES('','$username','$theTime','در انتظار')";
$seed_result = mysql_query($seed_query);
if(mysql_affected_rows()!=1){
    $QUERY_TROLLBACK = mysql_query('ROLLBACK');
    echo "error 102";       
    exit;       
}
$seed_id = mysql_insert_id();                           
$_SESSION['SEED_ID'] = $seed_id;

$query_values = "(NULL,'$list_number[0]',0,$seed_id)";                  
for($i=1;$i<count($list_number);$i++){
    $query_values .= ",(NULL,'$list_number[$i]',0,$seed_id)";
}               
$r_query = "INSERT INTO rc_members VALUES $query_values";
$r_result = mysql_query($r_query);
if(mysql_affected_rows()<=0){
    $QUERY_TROLLBACK = mysql_query('ROLLBACK'); 
    echo "error 103";       
    exit;       
}
$QUERY_COMMIT = mysql_query('COMMIT');
//--------------
$QUERY_TRANSACTION = mysql_query('START TRANSACTION');
if(!$QUERY_TRANSACTION){
    echo "error 104" ;
    exit;
}
$s_status = the_process($list_number,$m,$seed_id);                                          
if($s_status == 'successful_proc'){
    $s_query = "UPDATE seeds SET status='انجام شده' WHERE id=$seed_id";                                                     
    $s_result = mysql_query($s_query);
    //----------------logg file
    $filename = "debug.txt" ;
    $filepointer =fopen($filename ,"w") ;
    fwrite($filepointer , print_r($s_result,true)) ;
    fclose($filepointer) ;              
    //-----------------------
    if(!$s_result){
        echo "error 105".$s_result;                 
        exit;
    }
    $QUERY_COMMIT = mysql_query('COMMIT');
    echo 'successfuly process';
}else{
    $QUERY_TROLLBACK = mysql_query('ROLLBACK');
    echo 'error 106';
    exit;
}
$QUERY_COMMIT = mysql_query('COMMIT');  

?> 
```

总是“成功处理”打印。但有时打印“错误 105”，没有任何 $s_result 值；我尝试将 $s_result 保存在文件中，并看到没有结果保存在文件中。换句话说，$s_result 为空。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:31:43.043

MySql在没有记录影响或错误的情况下返回false的问题

您可以在查询后使用 mysql_affected_rows() 而不是

```
if(!$s_result){
        echo "error 105".$s_result;                 
        exit;
} 
```

您可以使用

```
if(mysql_affected_rows($s_result) == -1){
        echo "error 105".$s_result;                 
        exit;
} 
```

函数手册链接： [mysql_affected_rows](http://php.net/manual/en/function.mysql-affected-rows.php)

# mongodb - mongoosejs upsert 与保存挂钩

> ID：14133319
> 
> 赞同：1
> 
> 时间：2013-01-03T05:02:57.480
> 
> 标签：mongodb, mongoose

我正在尝试使用 mongoose 将数据添加到我的 mongo 数据库中，但是很可能大部分数据已经在数据库中，只有少数字段需要更新。需要保存记录的创建时间和上次更新时间。

我第一次尝试解决这个问题包括使用 Model.save 函数，因为我的模型被称为服务器，并且数据是来自外部 http 服务的对象，它指定了数据中唯一的 _id。

```
var instance = new Server(data);
instance.save(function(err){
  if(err)
    console.log(err);
}); 
```

也是我的预存挂钩：

```
ServerSchema.pre('save', function(next) {
  this.lastseen = Date.now();

  if (!this.isNew) 
    return next() //if the entry isn't new, lets not change the date registred
  this.registered = Date.now();
  next() //Don't forget this!
}) 
```

这里的问题是，在重复 _id 上，保存阻塞，出现错误`E11000 duplicate key error index...`

现在这很有意义，因为 save 仅在`instance`未使用 new 运算符创建文档时进行更新。

* * *

所以在我的下一次尝试中，我添加了代码来尝试查找文档，然后使用 underscore.js`_.extend`将新文档与在数据库中找到的文档合并，然后将其保存到数据库中。这种方法的问题在于，它需要为正在处理的每个数据块额外调用数据库。

* * *

我的第三次尝试使用`Model.findByIdAndUpdate`这个`{upsert:true}`作品，就在数据库中存储数据而言，但是架构默认值并且我的`pre-save`钩子没有被触发。

* * *

第四次尝试使用@aheckmann 在此要点中建议的代码：[https ://gist.github.com/2764948](https://gist.github.com/2764948)

```
var server = new Server();
server.init(ping);
server.save(function(err){
  if(err) {
    console.log("DB Error: ",err);
    return res.send('DB Error')
  }

  //if server approved, tell the inworld server to sync textures
  if(server.approved)
    res.send('success')
  else
    res.send('skip')

  user.servers.addToSet(ping._id); //add the server to the user's list
  user.save(function(err, usr){
    if(err)
      console.log("DB Error: ", err);
  })
}) 
```

再次，`pre-save`钩子没有被触发。我是否理解唯一使用钩子插入的方法是首先尝试使用 findById 查找文档？

* * *

### 问：

有没有一种方法可以根据主唯一键“更新”插入或更新，而不会对每个数据块进行多个数据库调用？有没有我忽略的方法或明显的事实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:38:11.000

我不认为你可以通过少于两次调用 DB 来做到这一点，除非你放弃 mongoose 部分并直接使用 mongo 驱动程序。但是您可以创建一个静态方法来为您完成所有工作：

```
ServerSchema.statics.findOrCreate(function(doc, next) {
  this.findById(doc._id, function(err, res) {
    res || (res = new this);
    _.extend(res, doc); // add new data to the document
    next(err, res); // if (err != null) then something went wrong
  });
}); 
```

`findByIdAndUpdate`不会触发 presave 钩子，因为它直接调用 mongo 驱动程序。

# android - Android：使用处理程序引入延迟不起作用

> ID：14133320
> 
> 赞同：1
> 
> 时间：2013-01-03T05:03:14.773
> 
> 标签：android, crash, handler, delay

我创建了一个名为 ButtonList 的按钮数组，如下所示。

```
LinearLayout player=(LinearLayout)findViewById(R.id.playerlayout);
        PlayerFirst=(Button)player.getChildAt(0);
        for(int i=0;i<player.getChildCount();i++)
        {
            ButtonList.add((Button)player.getChildAt(i));
        } 
```

我需要依次增加这些按钮的值。（每次更改之间都有延迟）我有以下代码：

```
for( k=0;k<ButtonList.size();k++)           
{
    Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
        public void run() {  
            ButtonList.get(getK()).setText(getK()+1+"");
        }
    }, 1000); 
} 
```

这里 getK() 是 k 的访问器，以便在匿名函数中访问 k。

```
public int k;
public int getK()
{
    return k;
} 
```

我的应用程序崩溃。我究竟做错了什么？

**LogCat 错误：**

```
01-03 05:21:04.396: I/Process(1469): Sending signal. PID: 1469 SIG: 9
01-03 05:21:06.276: E/Trace(1535): error opening trace file: No such file or directory (2)
01-03 05:21:08.826: W/dalvikvm(1535): threadid=1: thread exiting with uncaught exception (group=0x2bd39930)
01-03 05:21:08.846: E/AndroidRuntime(1535): FATAL EXCEPTION: main
01-03 05:21:08.846: E/AndroidRuntime(1535): java.lang.IndexOutOfBoundsException: Invalid index 12, size is 12
01-03 05:21:08.846: E/AndroidRuntime(1535):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at java.util.ArrayList.get(ArrayList.java:304)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at com.example.awari.MainActivity$1.run(MainActivity.java:129)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at android.os.Handler.handleCallback(Handler.java:725)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at android.os.Looper.loop(Looper.java:137)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-03 05:21:08.846: E/AndroidRuntime(1535):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:56:09.233

你的错误是因为**'get(getK())'**，当你找到下一个访问器时，我不知道你在做什么，只需将这个条件放在 FOR 循环中。

处理程序没有问题。

```
*if(getK() <= ButtonList.size()) {
     ButtonList.get(getK()).setText(" "+(getK()+1)); 
}* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:51:00.277

> 我有一个名为 ButtonList 的按钮数组。我需要依次增加这些按钮的值。（每次更改之间都有延迟）

你只需要一个 Handler 和 Runnable 来做你想做的事。让我们重新排列一下您的代码。

首先制作`handler`一个字段变量。然后在初始化`ButtonList`调用后：

```
handler.postDelayed(new Runnable() { 
    public void run() {  
        for(Button button : ButtonList) {
            int count = Integer.parseInt(button.getText());
            button.setText(String.valueOf(count));
        }
        handler.postDelayed(this, 1000); // Run this again in one second
    }
}, 1000); 
```

这将每秒增加每个 Button 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:11:48.333

它不会相隔 1000 毫秒，因为您告诉它以`ButtonList.size()`1000 毫秒的延迟运行时间。如果您从 0 毫秒开始，并假设每次循环迭代之间的计算时间为 1 毫秒，那么您的更新将发生在 1000 毫秒、1001 毫秒、1002 毫秒等。您最好使用`TimerTask`具有固定延迟的 a。

# c++ - 在使用 Builder 模式的构造函数中将指针类型的成员数据初始化为 NULL

> ID：14133329
> 
> 赞同：0
> 
> 时间：2013-01-03T05:04:07.417
> 
> 标签：c++, pointers, memory-management, null, builder

我有一个使用内部`Builder`对象实例化复杂对象的构造函数。数据结构中的五个成员是指针类型。但是，当对象被销毁时，使用这种模式我会遇到问题。以下是我的构造函数的样子，带有成员初始化列表：

```
Player::Player(const Builder& builder) 
    :m_name(builder._name)
    ,m_description(builder._description)
    ,m_primaryAttributes(builder._primaryAttributes)
    ,m_abilityAttributes(builder._abilityAttributes)
    ,m_armor(builder._armor)
    ,m_weapon(builder._weapon)
    ,m_inventory(new ComponentMap())
{} 
```

正如预期的那样，客户端代码运行良好：

```
Player* player = Player::Builder()
    .name("Dylan")
    .description("Super bad-ass hero of the game")
    .primaryAttributes(createPrimaryAttributes())
    .abilityAttributes(createAbilityAttributes())
    .weapon(createWeapon())
    .armor(createArmor())
    .build(); 
```

但是，如果我忽略消息链中的一个参数，然后销毁我的`Player`对象，就会发生不好的事情：

```
Player* player = Player::Builder()
    .name("Dylan")
    .description("Super bad-ass hero of the game")
    .primaryAttributes(createPrimaryAttributes())
    .abilityAttributes(createAbilityAttributes())
    .armor(createArmor())
    .build();

// ...

delete player;

// ...

// cleanMemory() gets called in Player::~Player()
void Player::cleanMemory()
{
    if(m_primaryAttributes != NULL )
        delete m_primaryAttributes;
    if(m_abilityAttributes != NULL )
        delete m_abilityAttributes;
    if(m_inventory != NULL )
        delete m_inventory;
    if(m_weapon != NULL)          // oops, bad stuff happens here
        delete m_weapon;
    if(m_armor != NULL)
        delete m_armor;
} 
```

显然，发生这种情况是因为武器的指针没有被初始化为任何一个对象`NULL`或对象的实例`Weapon`。如果从链中省略了一种方法，则构造函数似乎也不允许使用默认值`NULL`（至少从我所见） 。`Builder`现在，客户端必须要么给出`Weapon`一个指向对象的指针，要么给出`NULL`一个对象的实例。

有没有办法在不`Builder`完全修改这个构造函数的情况下解决这个问题？或者，是否应该使用另一种模式进行重构，例如`Factory`, 并返回到带有位置参数列表的常规构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:08:10.897

你提到的我的示例代码不是很好的代码库，我只是建议如下`build pattern`：

```
class Builder
{
   Weapon* BuildWeapon() { return new Weapon(); }
   Armor*  BuildArmor(); { return new Armor(); }    
};

class Player
{
public:
  Player(const Builder& builder) 
  : weapon_ptr(builder.BuildWeapon()),
    armer_ptr(builder.BuildArmor())

private:
  std::shared_ptr<Weapon> weapon_ptr;
  std::shared_ptr<Armor>  armor_ptr;
}; 
```

用法：

```
Builder builder;
std::shared_ptr<Player> player(new Player(builder)); 
```

或者你可以

```
class Player2
{
public:
  Player() {}
  void SetWeapon(Weapon* p) { weapon_ptr.reset(p); }
  void SetArmor(Armor* p) { armor_ptr.reset(p); }

private:
  std::shared_ptr<Weapon> weapon_ptr;
  std::shared_ptr<Armer>  armer_ptr;
}; 
```

用法：

```
 Builder builder;
   std::shared_ptr<Player> player;
   player->SetWeapon(builder.BuildWeaper());
   player->SetArmor(builder.BuildArmor()); 
```

由于 Weapon_ptr、armer_ptr 是智能指针，所以不需要再调用`delete`动态分配的内存，`cleanMemory()`可以去掉函数。

这只是一个简单的示例，您可以扩展 Player 的接口以提供在创建 player 对象后构建不同元素的能力。

# nhibernate - 具有父类的类有很多项目 - 不可能通过代码映射

> ID：14133330
> 
> 赞同：0
> 
> 时间：2013-01-03T05:04:08.797
> 
> 标签：nhibernate, inheritance, nhibernate-mapping, mapping-by-code

我遇到了 nHibernate 的问题：如果一个实体继承自一个基本实体，那么这个子实体不能被另一个实体引用。

* * *

我的数据库中有一个继承层次结构，如下所示：

*   `VideoFeed`是一个`VisualFeed`
*   `VideoFeed`有很多`PlaylistAssignment`

这是（转述的）SQL 定义

```
create table VisualFeed
(
    id BIGINT NOT NULL  -- Primary key
)

create table VideoFeed
(
   id BIGINT NOT NULL   -- Primary key, foriegn key references VisualFeed
)

create table PlaylistAssignment
(
   id BIGINT NOT NULL,   -- Primary key
   VideoFeed_Id BIGINT NOT NULL   -- Foreign key to VideoFeed
) 
```

和类定义

```
public class VisualFeed 
{
    public virtual long? Id { get; set; }
}

public class VideoFeed : VisualFeed
{
    public virtual ISet<PlaylistAssignment> PlaylistAssignments { get; set; }
}

public class PlaylistAssignment
{
    public virtual long? Id { get; set; }
    public virtual VideoFeed VideoFeed { get; set; }
} 
```

`VisualFeed`这是（父类）的映射代码：

```
public static void Map(ModelMapper mapper)
{
mapper.Class<DATMedia.CMS.EntityLibrary.Entities.VisualFeed>(
        classMapper =>
        {
            classMapper.Table("cms_VisualFeed");
            classMapper.Id(
                            visualFeed => visualFeed.Id,
                            idMapper =>
                            {
                                idMapper.Column("Id");
                                idMapper.Generator(Generators.HighLow,
                                                    generatorMapper =>
                                                    {
                                                        generatorMapper.Params(

                                                            new
                                                            {
                                                                max_lo = 256,
                                                                column = "NextHi",
                                                                where = "TableName='VisualFeed'"
                                                            }
                                                        );
                                                    }
                                );
                            }
            );
    });
} 
```

这是映射代码`VideoFeed`：

```
public static void Map(ModelMapper mapper)
{
    mapper.JoinedSubclass<DATMedia.CMS.EntityLibrary.Entities.VideoFeed>(
            joinedSubClassMapper =>
            {
                joinedSubClassMapper.Table("cms_VideoFeed");
                joinedSubClassMapper.Key(keyMapper =>
                    {
                        keyMapper.Column("Id");
                    }
                );

                joinedSubClassMapper.Set(
                    playerGroup => playerGroup.PlaylistAssignments,
                    setPropertiesMapper =>
                    {
                        setPropertiesMapper.Key(
                                keyMapper =>
                                {
                                    keyMapper.Column("VideoFeed_Id");
                                    keyMapper.PropertyRef(videoFeed => videoFeed.Id);
                                }
                            );
                        setPropertiesMapper.Cascade(Cascade.All | Cascade.DeleteOrphans);
                        setPropertiesMapper.Inverse(true);
                        setPropertiesMapper.OrderBy(playlistAssignment => playlistAssignment.AssignmentRank);
                    },
                    collectionElementRelation =>
                    {
                        collectionElementRelation.OneToMany();
                    }
                );    
            }
            );
} 
```

以及“PlaylistAssignment”的映射代码：

```
public static void Map(ModelMapper mapper)
{

    mapper.Class<DATMedia.CMS.EntityLibrary.Entities.PlaylistAssignment>(
            classMapper =>
            {
                classMapper.Table("cms_PlaylistAssignment");
                classMapper.Id(
                    playlistAssignment => playlistAssignment.Id,
                    idMapper =>
                    {
                        idMapper.Generator(Generators.Identity);
                    }

                    );

                classMapper.ManyToOne(
                        pa => pa.VideoFeed,
                        manyToOneMapper =>
                        {
                            manyToOneMapper.Column("VideoFeed_Id");
                            manyToOneMapper.Lazy(LazyRelation.Proxy);
                        }
                    );
           });
 }; 
```

调用时会抛出异常`ModelMapper.CompileMappingForAllExplicitlyAddedEntities`。

在文件[KeyMapper.cs](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Mapping/ByCode/Impl/KeyMapper.cs)中的 nHibernate 代码中引发异常：

```
public void PropertyRef(MemberInfo property)
{
   if (property == null)
   {
       mapping.propertyref = null;
       return;
   }
   if (!ownerEntityType.Equals(property.DeclaringType) && !ownerEntityType.Equals(property.ReflectedType))
   {
    throw new ArgumentOutOfRangeException("property", "Can't reference a property of another entity.");
   }
   mapping.propertyref = property.Name;
} 
```

`ownerEntityType`等于“VideoFeed”，并且两者都`ReflectedType`等于`DeclaringType`“VisualFeed”（父类名称）。即使这一切都是正确的，也会`ArgumentOutOfRangeException`被抛出。

* * *

谁能想到解决方法？

* * *

**稍后编辑**此问题是由对`setPropertiesMapper`. 它实际上是在我从问题中省略的另一个子类上（在简化问题的错误尝试中）。

真正的罪魁祸首是映射到下面的“cms_VisualFeedAssignment”：

```
 mapper.Class<DATMedia.CMS.EntityLibrary.Entities.VisualFeed>(
                classMapper =>
                {
                    classMapper.Table("cms_VisualFeed");
                    classMapper.Id(
                                    visualFeed => visualFeed.Id,
                                    idMapper =>
                                    {
                                        idMapper.Column("Id");
                                        idMapper.Generator(Generators.HighLow,
                                                            generatorMapper =>
                                                            {
                                                                generatorMapper.Params(

                                                                    new
                                                                    {
                                                                        max_lo = 256,
                                                                        column = "NextHi",
                                                                        where = "TableName='VisualFeed'"
                                                                    }
                                                                );
                                                            }
                                        );
                                    }
                    );
                 classMapper.Set<DATMedia.CMS.EntityLibrary.Entities.VisualFeedAssignment>(
                                    visualFeed => visualFeed.Assignments,
                                    bagPropertiesMapper =>
                                    {
                                        bagPropertiesMapper.Inverse(true);
                                        bagPropertiesMapper.Lazy(CollectionLazy.Lazy);
                                        bagPropertiesMapper.Key(
                                            keyMapper =>
                                            {
                                                keyMapper.Column("VisualFeed_Id");
                                                //keyMapper.PropertyRef<long?>(visualFeed => visualFeed.Id);
                                            }
                                        );
                                        bagPropertiesMapper.Table("cms_VisualFeedAssignment");
                                    },
                                    collectionElementRelation =>
                                    {
                                        collectionElementRelation.OneToMany();
                                    }
                                );
                        }
                    );
            } 
```

当我注释掉`PropertyRef`电话时，它起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:54:12.980

你不需要这一行：

```
keyMapper.PropertyRef(videoFeed => videoFeed.Id); 
```

将`VideoFeed.Id`自动被引用。尝试删除该行，它应该可以工作。

# database - 访问表的扩展属性

> ID：14133332
> 
> 赞同：0
> 
> 时间：2013-01-03T05:04:24.560
> 
> 标签：database, ms-access, extended-properties

我可以为 SQL 服务器表设置扩展属性。我可以为访问数据库表设置扩展属性吗？如果可能的话，我如何设置扩展属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:45:54.880

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms190243%28v=sql.105%29.aspx)，扩展属性可用于以下用途：

1.  为表、视图或列指定标题。然后，应用程序可以在显示来自该表、视图或列的信息的用户界面中使用相同的标题。
2.  为列指定输入掩码，以便应用程序可以在运行 Transact-SQL 语句之前验证数据。例如，可以在扩展属性中指定邮政编码或电话号码列所需的格式。
3.  指定用于在列中显示数据的格式规则。
4.  记录应用程序可以向用户显示的特定数据库对象的描述。例如，描述可以用在数据字典应用程序或报告中。指定应显示列的大小和窗口位置。

MS Access 并没有直接与 SQL Server 进行比较，因为它是一个快速的应用程序数据库开发工具，一般使用 Jet/ACE 数据库后端，而 SQL Server 是一个 RDBMS。在 MS Access 中，您有一系列工具，例如可用于提供上述大多数属性的表单和报告。

对于 (1)，您可以在表设计视图中为列指定标题，但您通常会发现最好使用表单来命名列、表和查询（视图）。

对于 (2)，您可以在表格设计视图以及您创建的任何表单中为每个字段（列）指定验证规则。

对于 (3)，您可以在表格设计视图和表单中指定格式。

对于 (4)，您可以为可以在数据库窗口中或通过代码显示的对象添加描述。

MS Access 还具有一系列附加属性，例如验证文本（在验证规则被破坏时显示）和自定义属性（您可以通过代码自己创建）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:18:36.237

[这是](http://msdn.microsoft.com/en-us/library/ff834455.aspx) Microsoft (MSDN) Library with Access 2013 文档的链接。

由于DAO中的表（TableDefs）在初始语句中没有例外，因此可以将用户属性添加到表的属性集合中。

我认为，有关属性的文档可能会对您有所帮助，因为有一些特殊性需要处理。

# php - 如何检查 MySql 字段是否等于 1？

> ID：14133334
> 
> 赞同：1
> 
> 时间：2013-01-03T05:04:59.360
> 
> 标签：php, mysql

我正在用 PHP 创建一个论坛并使用 MySql 作为数据库，并且想知道如何检查 MySql 字段 topic_locked 是否等于 1。如果不是，将显示回复代码。我如何检查这个，如果你能帮我找到如何检查这个，我怎么能通过论坛将它设置为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:15:11.257

我不知道你的代码。但我正在分享一个简单的程序来检查 mysql 字段的值。

```
<?php

// Database select and connect to host

$sql= mysql_query("SELECT topic_locked FROM table WHERE Id='your_id'");
$res= mysql_fetch_array($sql);

$value= $res['topic_locked'];

if($value=='1')
{
// reply code
}
?> 
```

更新问，

```
<?php
        if(isset($_POST['update']))
        {
        $id= $_POST['id'];
        //Database select and connect to host
        mysql_query("UPDATE table SET topic_locked='1' WHERE Id='$id'");
        }
   ?>
        <form action="" method="post">
        <input type="hidden" name="id" value="your_id" />
        <input type="submit" name="update" />
        </form> 
```

# javascript - 如何根据包含的文本行设置 Raphael JS 矩形的宽度和高度？

> ID：14133337
> 
> 赞同：0
> 
> 时间：2013-01-03T05:05:16.990
> 
> 标签：javascript, size, raphael

我正在创建一个矩形元素，稍后我想将其用作 SVG 圆形元素的工具提示。现在，我想一些逻辑来设置矩形元素的高度和宽度，这应该根据它包含的文本行而改变。我只是创建一个 Raphael 文本元素并在矩形上翻译它，这样它看起来好像矩形“真的”包含文本。（这是因为我不应该使用任何第三方工具提示插件，我也不能使用 jQuery 创建和修改它。我也不能使用 gRaphael。我应该只使用 Raphael 矩形元素作为工具提示。）

这就是我正在做的 -

```
var tipText = "Asoo ok m ml palksksk feesf k\nWeek:X-VAL\nRank:Y-VAL";
//splitting tipText for "\n"
var tipText_seperate = tipText.split("\n");
var tipText_seperate_len = tipText_seperate.length;

var line_len = [];
for(var i=0;i<tipText_seperate_len;i++){
 line_len[i] = tipText_seperate[i].length;  
}

var a = Math.max.apply(Math, line_len);//getting the length of largest line

//setting the width and height of the rectangle
var box = {};
box.width = (a*5)+5;
box.height = tipText_seperate_len*25;

var c = {};
c.x = 10;
c.y = 10;
c.r = paper.rect(c.x,c.y,box.width,box.height,5).attr({fill:'#000000', opacity:0.7});
c.t = paper.text(c.x,c.y,tipText).attr({fill:'#FFFFFF'});
c.t.transform("t"+box.width/2+","+box.height/2); 
```

现在矩形的大小已针对某些文本行进行了调整，而对于某些文本则没有。在这种情况下，我必须更改 box.width 的值，这似乎不正确。有没有有效且逻辑正确的方法来实现这一目标？请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:42:16.963

诀窍是创建文本元素并用于`getBBox`获取文本元素的边界框，它提供尺寸以及`x`值`y`。

这是一个示例和[演示](http://jsfiddle.net/FRtrP/2/)。

```
// Create Raphael and circle set
var Paper = new Raphael('canvas', 300, 300),
    circles = Paper.set();

// Add circles to canvas, setting the tooltip text as a
// data attribute
circles.push(
    Paper.circle(100, 150, 25).data('tooltip', 'Here is some text'),
    Paper.circle(200, 150, 25).data('tooltip', 'And here is \nsome longer text')
);

// Some base styles
circles.attr({
    fill: 'red',
    stroke: 0
});

// Positioning of the tooltip box
var margin = 10,
    padding = 5;

// Hover functions
circles.hover(
    // On hover, create and show tooltip
    function() {
        // If the tooltip already exists on the element, simply
        // show it. If it doesn't then we need to create it.
        if (this.tooltip && this.tooltip.box) {
            this.tooltip.show();
            this.tooltip.box.show();
        } else {
            // Get the x and y positions.
            // We get the 'true y' by deducting the radius
            var x = this.attr('cx'),
                y = this.attr('cy') - this.attr('r');

            // Create the tooltip text, attaching it to the
            // circle itself
            this.tooltip = Paper.text(x, y, this.data('tooltip'));

            // Calculate the bounding box of our text element
            var bounds = this.tooltip.getBBox();

            // Shift the text element in to correct position
            this.tooltip.attr({
                // At this point `y` is equal to the top of the
                // circle arc. When creating a text element, the
                // `x` and `y` values are center points by default,
                // so by deducting half the height we can fake
                // a bottom align. Finally deducting our `margin`
                // value creates the space between the circle and
                // the tooltip.
                y: y - (bounds.height / 2) - margin,
                fill: '#fff'
            });

            // Create the tooltip box, again attaching it to the
            // circle element.
            //
            // The `x`, `y` and dimensions are dynamically calculated
            // using the text element's bounding box and margin/padding
            // values.
            //
            // The `y` value again needs some special treatment,
            // creating the fake bottom align by deducting half the
            // text element's height. We then adjust the `y` further
            // by deducting the sum of the `padding` and `margin`.
            // The `margin` value is needed to create space between
            // the circle and the tooltip, and the `padding` value
            // shifts the box a little higher to create the illusion of
            // padding.
            //
            // Try adjusting the `margin` and `padding` values.
            this.tooltip.box = Paper.rect(bounds.x - padding, bounds.y - (bounds.height / 2) - (padding + margin), bounds.width + (padding * 2), bounds.height + (padding * 2));

            // Style the box and put it behind text element
            this.tooltip.box.attr({
                fill: '#000',
                stroke: 0
            }).toBack();
        }
    },
    // On hover out, hide previously created tooltip
    function() {
        // Hide the tooltip elements
        this.tooltip.box.hide();
        this.tooltip.hide();
    }
);​ 
```

# css - Mozilla vs Chrome Div 宽度问题。计算与不计算边界？

> ID：14133340
> 
> 赞同：0
> 
> 时间：2013-01-03T05:05:23.017
> 
> 标签：css, google-chrome, html, mozilla

嘿伙计们，我的作业有一个小问题。我必须创建这个页面，它在 Chrome 中看起来很棒，但每个 div 单元格在 Firefox 中呈现小一个像素，我相信它与边框宽度有关。有解决方法还是我做错了什么？

我正在使用 CSS 重置，并且我已经声明了我的文档类型。

我应该使用表格来构建这个页面吗？抱歉，没有发布代码的链接，当我将代码放在代码块中时，它仍然显示 HTML。

[https://docs.google.com/file/d/0B8uifJLGRXapcHF1VzRNNGo1b2M/edit?pli=1](https://docs.google.com/file/d/0B8uifJLGRXapcHF1VzRNNGo1b2M/edit?pli=1)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:43:04.020

Try using CSS outline that will also work. An outline is a line that is drawn around elements (outside the borders) to make the element "stand out".

However, the outline property is different from the border property.

The outline is not a part of an element's dimensions; the element's total width and height is not affected by the width of the outline.

ie.

```
.example {outline: 1px solid pink;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:26:34.283

尝试使用 CSS 中的 box-sizing 属性来解决这个问题。`box-sizing:border-box;`将在元素的实际宽度和高度内渲染边框和填充。如需更好的描述，请查看此[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# java - android:java.net.sockettimeout 异常

> ID：14133346
> 
> 赞同：0
> 
> 时间：2013-01-03T05:05:47.653
> 
> 标签：java, android, .net, web-services, android-ksoap2

实际上我正在开发一个android应用程序...我需要从.net webservice中获取超过100行..（使用kso​​ap2）..但是当我调用webservice时我得到套接字超时..异常..而不是获取100行我尝试获取 30 行..效果很好..所以我无法识别问题是与 .net webservice 还是在我的 android 中。我只想知道是否有任何替代方法可以同时获取大量数据。

我还添加了权限：

```
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

代码：

```
 package school.demo;
 import java.util.ArrayList;
 import java.util.HashMap;
 import org.ksoap2.SoapEnvelope;
 import org.ksoap2.serialization.SoapObject;
 import org.ksoap2.serialization.SoapSerializationEnvelope;
 import org.ksoap2.transport.HttpTransportSE;
 import android.os.Bundle;
 import android.app.Activity;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ArrayAdapter;
 import android.widget.Button;
 import android.widget.GridView;
 import android.widget.TextView;
 import android.widget.Toast;

 public class Code extends Activity {

Button b1;
TextView t1;
String s = "11-10-2012";
int c = 0, j = 0;
ArrayList<String> al = new ArrayList<String>();
HashMap<String, String> map;
private static final String NAMESPACE = "http://TestClass/";
private static final String URL = "http://***.**.**.**/TestClass/Service1.asmx";
private static final String HelloWorld_SOAP_ACTION1 = "http://TestClass/getdata";
private static final String METHOD_NAME2 = "getdata";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.accounts);
    GridView g1 = (GridView) findViewById(R.id.gridView1);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);
    request.addProperty("Uname", s);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    httpTransport.setTimeout(MODE_WORLD_READABLE);
    try {
        httpTransport.call(HelloWorld_SOAP_ACTION1, envelope);

        SoapObject res = (SoapObject) envelope.getResponse();
        SoapObject root = (SoapObject) res.getProperty(0);
        SoapObject s_deals = (SoapObject) root.getProperty("Table1");
        String s = s_deals.toString();
        httpTransport.requestDump="TRUE";
        // Toast.makeText(getApplicationContext(), s,
        //Toast.LENGTH_LONG).show();

        for (int i = 1; i < root.getPropertyCount(); i++) {
            Object o = root.getProperty(i);
            SoapObject main = (SoapObject) o;
            String f1 = main.getProperty(1).toString();
            String f2 = main.getProperty(2).toString();
            String f3 = main.getProperty(3).toString();
            String f4 = main.getProperty(4).toString();
            String f5 = main.getProperty(5).toString();
            //String f6 = main.getProperty(6).toString();
            al.add(f1);
            al.add(f2);
            al.add(f3);

        }
        @SuppressWarnings("unchecked")
        ArrayAdapter a1 = new ArrayAdapter(Code.this, R.layout.blows,
                R.id.textView1, al);
        g1.setAdapter(a1);
        g1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), " " + arg2,
                        Toast.LENGTH_LONG).show();
            }
        });
    } catch (Exception e) {
        Toast.makeText(getApplicationContext(), e.toString(),
                Toast.LENGTH_LONG).show();
    }
        }
     } 
```

# machine-learning - 选择特征后显示特征名称

> ID：14133348
> 
> 赞同：16
> 
> 时间：2013-01-03T05:05:58.647
> 
> 标签：machine-learning, scikit-learn

我需要为文本构建一个分类器，现在我使用 TfidfVectorizer 和 SelectKBest 来选择特征，如下所示：

```
vectorizer = TfidfVectorizer(sublinear_tf = True, max_df = 0.5, stop_words = 'english',charset_error='strict')

X_train_features = vectorizer.fit_transform(data_train.data)
y_train_labels = data_train.target;

ch2 = SelectKBest(chi2, k = 1000)
X_train_features = ch2.fit_transform(X_train_features, y_train_labels) 
```

我想在选择 k 个最佳功能后打印出选定的功能名称（文本），有什么办法吗？我只需要打印出选定的功能名称，也许我应该使用 CountVectorizer 代替？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T08:18:57.240

以下应该有效：

```
np.asarray(vectorizer.get_feature_names())[ch2.get_support()] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-25T05:07:29.967

为了扩展@ogrisel 的答案，返回的特征列表在矢量化后的顺序相同。下面的代码将为您提供一个排名靠前的特征列表，这些特征根据其 Chi-2 分数以降序排列（以及相应的 p 值）：

```
top_ranked_features = sorted(enumerate(ch2.scores_),key=lambda x:x[1], reverse=True)[:1000]
top_ranked_features_indices = map(list,zip(*top_ranked_features))[0]
for feature_pvalue in zip(np.asarray(train_vectorizer.get_feature_names())[top_ranked_features_indices],ch2.pvalues_[top_ranked_features_indices]):
        print feature_pvalue 
```

# ruby-on-rails - 如何正确指向管理员艺术家链接？

> ID：14133350
> 
> 赞同：0
> 
> 时间：2013-01-03T05:06:13.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我希望我的艺术家链接看起来像这样：

```
http://admin.foobar.com/artists/123
http://www.foobar.com/123 
```

我的`Routes`设置如下所示：

```
class AdminSubDomain
  def matches?(request)
    whitelists = IpPermission.whitelists

    if whitelists.map { |whitelist| whitelist.ip }.include? request.remote_ip
      request.subdomain == 'admin'
    else
      raise ActionController::RoutingError.new('Not Found')
    end
  end
end

Foobar::Application.routes.draw do
  constraints AdminSubDomain.new do
    ..
    resources :artists, :only => [:index, :show], :controller => 'admin/artists'
  end

  get ':id' => 'artists#show', :as => 'artist' do
    ..
  end
end 
```

`Rake routes`返回：

```
artist GET    /artists/:id(.:format)        admin/artists#show
artist GET    /:id(.:format)                artists#show 
```

此刻，`<%= link_to 'Show', artist_path(artist, :subdomain => :admin) %>`指向：`http://admin.foobar.dev:3000/123`。

它应该看起来像：`http://admin.foobar.dev:3000/artists/123`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:18:46.403

您为两条路线使用了相同的名称 ( `artist`)，因此当您调用 时`artist_path`，您将获得您定义的最后一个名称，即：`get ':id' = 'artists#show', :as => 'artist' do ...`。

为管理路由使用不同的名称来区分它：

```
constraints AdminSubDomain.new do
  ..
  resources :artists, :only => [:index, :show], :controller => 'admin/artists', :as => 'admin_artists'
end 
```

然后你可以用它来调用它：`<%= link_to 'Show', admin_artist_path(artist, :subdomain => :admin) %>`。

# javascript - 表单在 Colorbox 中显示时没有 Javascript 功能

> ID：14133352
> 
> 赞同：0
> 
> 时间：2013-01-03T05:06:37.667
> 
> 标签：javascript, jquery, colorbox

我有一个带有下拉分层字段的表单，其功能源自名为 mcDropdown jQuery Plug-in 的 JavaScript 插件。

实际表单位于辅助页面 (Test.php) 上，并设置为通过 Colorbox 弹出窗口显示在主页上，提交表单时结果也显示在 Colorbox 中。

当 JavaScript 被删除时（即仅使用普通的下拉框），表单会以其原生 HTML 格式正确提交并显示在颜色框中。

但是，当 Javascript 以允许字段的层次下拉结构的形式实现时，通过 Colorbox 呈现时没有 JS 功能。

由于表单所在的实际页面（Test.php）本身可以使用 Javascript 正常工作，因此通过 Colorbox 呈现 JS 似乎存在一些问题。

我的研究表明，这可能是由于在将元素加载到文档之前尝试访问它。

Colorbox 网站声明这可以通过将 JavaScript 移动到 ColorBox 的 onComplete 回调中来解决；然而，即使给出了这个例子，我也无法弄清楚如何正确地做到这一点，因为我是一个完全的 JS 新手。

这是二级页面上的下拉脚本，其中包含表单并与外部插件相关联（请注意，此表单中有三个字段使用此 JS 分层配置）：

```
<script type="text/javascript">             

         $(document).ready(function (){
            $("#category").mcDropdown("#categorymenu",
                {
                targetColumnSize: 3,
                }
            );
            $("#category1").mcDropdown("#categorymenu1",
                {
                targetColumnSize: 3,
                }
            );
        $("#category2").mcDropdown("#categorymenu2",
                {
                targetColumnSize: 3,
                }
            );

             });

</script> 
```

这是在 Colorbox 窗口中打开辅助页面的主页上的 Colorbox 脚本：

```
<script type="text/javascript"> <!--<Check-Out Colorbox Script>-->

  jQuery(function(){

   jQuery('#link_content').colorbox({opacity:0.3, height:"100%", scrolling: false, onComplete: function(){
    link_content_submit();
  }});
   });
function link_content_submit()
{
  jQuery("#pre-process").submit(function(){
    jQuery.post(
      jQuery(this).attr('action'),
      jQuery(this).serialize(),
      function(data){
        jQuery().colorbox({html: data, onComplete: function(){
          link_content_submit();
        }});
      }
    );
    return false;
  });

  }
</script> 
```

三个外部文件分别是：jquery.mcdropdown.js、jquery-1.2.6.min.js 和 jquery.bgiframe.js。

如何修改主页上的这个 Colorbox 脚本，以便在通过 Colorbox 显示时保留表单的 JS 功能？

提前感谢您为这个初学者提供任何详细的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:48:47.187

这是答案：

```
<script type="text/javascript"> <!--<Check-Out Colorbox Script>-->

  jQuery(function(){

   jQuery('#link_content').colorbox({opacity:0.3, height:"100%", scrolling: false, onComplete: function(){
    link_content_submit(), $('#category').mcDropdown('#categorymenu'),$('#category1').mcDropdown('#categorymenu1'),$('#category2').mcDropdown('#categorymenu2');
  }});
   });
function link_content_submit()
{
  jQuery("#pre-process").submit(function(){
    jQuery.post(
      jQuery(this).attr('action'),
      jQuery(this).serialize(),
      function(data){
        jQuery().colorbox({html: data, onComplete: function(){
          link_content_submit();
        }});
      }
    );
    return false;
  });

  }
</script> 
```

JS 表单中每个下拉框的相应 JavaScript 函数都集成到 Colorbox onComplete: function() 中，因此这些表单元素中的每一个在通过 Colorbox 访问之前都会被加载。

# javascript - 设置 .val() 后如何自动突出显示文本输入？

> ID：14133354
> 
> 赞同：0
> 
> 时间：2013-01-03T05:06:44.903
> 
> 标签：javascript, jquery, html, forms, input

我正在尝试在输入字段中动态设置一些文本，然后显示它，最后自动突出显示/自动选择它。

如果我不使用 .val() 而是在输入上使用硬编码的 value="something" ，它可以完美地工作。

如果我将 .val() 添加到方法链中，它只会将光标放在框中，但不会突出显示文本。

知道我该怎么做吗？

在下面的示例中，`$(this)`指的是他们单击“重命名”导致出现内联编辑框的链接。`.next()`指的是输入。

```
$(this).hide().next().val(oldName).show().focus(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:09:44.147

```
$(this).hide().next().val(oldName).show().focus().select(); 
```

如果那是你希望它发生的那一刻。它将应用于`.next()`元素，`$(this)`但由于您隐藏`$(this)`了它可能是您所追求的。

# scala - 更优雅的scala代码

> ID：14133365
> 
> 赞同：3
> 
> 时间：2013-01-03T05:08:36.727
> 
> 标签：scala

我开始学习scala。想知道是否有人有更好的方法以更实用的方式重写下面的代码。我知道一定有一个。

```
val buf = ((addr>>24)&0xff) + "." + ((addr>>16)&0xff) + "." + ((addr>>8)&0xff) + "." + ((addr)&0xff) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T05:30:03.620

这会生成`Range(24, 16, 8, 0)`with `(24 to 0 by -8)`，然后使用 将函数`addr >> _ & 0xff`应用于每个数字`map`。最后，数字的映射`Range`被“加入”`.`以创建一个字符串。

该映射比使用`+`运算符更实用，但其余的只是语法糖和对`mkString`.

```
val addr = 1024

val buf = (24 to 0 by -8).map(addr >> _ & 0xff).mkString(".")

buf: java.lang.String = 0.0.4.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T06:25:22.060

```
val buf = List(24,16,8,0).map(addr >> _).map(_ & 0xff).mkString(".") 
```

这是我的做法，类似于布赖恩的回答，但有一个简短的值列表和两个使用 Scala 著名的 '_' 运算符的简单 map() 方法。好问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T06:43:51.773

有些人会发现 for 理解更具可读性：

```
(for (pos <- 24 to 0 by -8) yield addr >> pos & 0xff) mkString "." 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-03T09:47:04.297

优点是输入 - 可以是任意数量的整数

```
// trick
implicit class When[F](fun: F) {  
  def when(cond: F => Boolean)(tail: F => F) = if (cond(fun)) tail(fun) else fun
}

// actual one-liner
12345678.toHexString.when(1 to 8 contains _.length % 8)
  (s => "0" * (8 - s.length % 8) + s ).reverse.grouped(2).map
  (Integer.parseInt(_, 16)).toList.reverse.mkString(".")

// 0.203.22.228

// a very big IPv7
BigInt("123456789012345678901").toString(16).when(1 to 8 contains _.length % 8)
  (s => "0" * (8 - s.length % 8) + s ).reverse.grouped(2).map
  (Integer.parseInt(_, 16)).toList.reverse.mkString(".")

// 0.0.0.96.27.228.249.24.242.99.198.83 
```

**编辑**

由于反对票的解释。`implicit class When`可以只是一个库类，它可以在`2.10`调用链中工作并允许有条件地执行一些函数。我没有衡量性能，也不在乎，因为一个例子本身就是为了说明什么是可能的，优雅与否。

# ios - 将 UIImage 转换为 NSData 并与核心数据一起保存

> ID：14133366
> 
> 赞同：18
> 
> 时间：2013-01-03T05:08:39.240
> 
> 标签：ios, objective-c, core-data, nsdata

我有一个`UIImageView`通过`UIImagePicker`

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    [picker dismissViewControllerAnimated:YES completion:nil];
    self.gImage.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

我“尝试”将此图像转换为`NSData`并与核心数据一起保存：

```
NSData *imageData = UIImagePNGRepresentation(self.gImage.image);
NSString *savedData = [[NSString alloc]initWithData:imageData encoding:NSUTF8StringEncoding];

//am is a pointer to my entities class. imageData is just a NSString attribute
am.imageData = savedData;

NSError *error;
if (![self.managedObjectContext save:&error]) {
    //Handle Error
} else {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

然后我尝试将图像加载到单独的文件中：

```
self.cell.gImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.myEntity.imageData]]]; 
```

我不明白为什么这不起作用。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-03T05:15:02.257

您可以像这样将 UIImage 转换为 NSData：

**如果是 PNG 图片**

```
UIImage *image = [UIImage imageNamed:@"imageName.png"];
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)]; 
```

**如果是 JPG 图像**

```
UIImage *image = [UIImage imageNamed:@"imageName.jpg"];
NSData *imageData = UIImageJPEGRepresentation(image, 1.0); 
```

您可以像这样将它存储在 CoreData 中（这是一种可能有用的解决方案）：

```
[newManagedObject setValue:imageData forKey:@"image"]; 
```

您可以像这样从 CoreData 加载数据：

```
NSManagedObject *selectedObject = [[self yourFetchCOntroller] objectAtIndexPath:indexPath];
UIImage *image = [UIImage imageWithData:[selectedObject valueForKey:@"image"]];

// Set the image to your image view  
yourimageView.image = image; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-16T01:01:58.813

为了迅速，它只是：

`UIImage`到`NSData`

```
imageData = UIImagePNGRepresentation(image) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T05:25:25.497

用于存储在数据库中:::

```
 NSInteger RandomIndex = arc4random() % 1000; 
        NSString *randomImageName =[NSString stringWithFormat:@"Image%i.png",RandomIndex]; 
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:randomImageName];
        if ([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]) {
            [[NSFileManager defaultManager] removeItemAtPath:savedImagePath error:nil];
            NSLog(@"file removed from path");
        }
        NSLog(@"Saved Image Path : %@",savedImagePath);
         NSData* imageData = UIImagePNGRepresentation (image1 ); 
        [imageData writeToFile:savedImagePath atomically:YES];

         //am is a pointer to my entities class. imageData is just a NSString attribute
        am.imageData = randomImageName; 
```

当您从数据库中获取该图像时，您可以编写以下代码...

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:randomImageName];
NSData *myData = [NSData dataWithContentsOfFile:savedImagePath];
        UIImage *selectedImage = [UIImage imageWithData:myData]; 
```

我觉得对你有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T05:39:27.570

在 Mac OS 上，您可以让 Core Data 为您处理这个问题，方法是在模型中的属性上勾选**Transformable**框，不选择特定的转换器，并将 UIImage 直接分配给属性。

我不确定它是否适用于 iOS，但可能值得一试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T05:10:21.140

要将图像转换为 NSData，请尝试以下代码...

```
UIImage *image = [UIImage imageNamed:@"imageName.png"];
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)]; 
```

让我知道它是否工作..!!!

快乐编码！！！！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T05:29:39.700

试试这个代码来保存图像数据

保存：

```
NSManagedObjectContext *context = [self managedObjectContext];

newsObj = [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:context];

NSData *imageData = UIImagePNGRepresentation(self.gImage.image);

[newsObj setValue:imageData forKey:@"imgPng"];

NSError *error;

@try{

    if (managedObjectContext != nil) {

        if (![managedObjectContext save:&error]) {

            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

        } 
    }

}@catch (NSException *exception) {

    NSLog(@"inside exception");
} 
```

要检索试试这个：

```
NSManagedObjectContext *context = [self managedObjectContext];

    NSFetchRequest * fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity1 = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:context];

    [fetchRequest setEntity:entity1];

    NSError *error;

    NSArray * array = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

    if (array == nil) {

        NSLog(@"Testing: No results found");

    }else {

        NSLog(@"Testing: %d Results found.", [array count]);
    }

    NSData * dataBytes = [[array objectAtIndex:0] imgPng];;

    image = [UIImage imageWithData:dataBytes];

    [fetchRequest release]; 

}

@catch (NSException *exception) {

    NSLog(@"inside exception");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T05:33:38.243

此代码将您的图像数据保存到文件数据中，您可以在任何地方使用它

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image1 editingInfo:(NSDictionary *)editingInfo
{

    {

        CGSize destinationSize = CGSizeMake(170,170);

        UIGraphicsBeginImageContext(destinationSize);

       [image1 drawInRect:CGRectMake(0,0,destinationSize.width,destinationSize.height)];

       UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

       UIGraphicsEndImageContext();

       NsData *filedata  = UIImagePNGRepresentation(newImage);

       [picker dismissModalViewControllerAnimated:YES];
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-21T21:17:14.480

这是我所做的及其用于存储到 nsdata 的工作。

```
[productTypeSub setValue:[[NSData alloc] initWithContentsOfURL:[NSURL  URLWithString:url]] forKey:@"imgSmall"]; 
```

并使用此代码加载到图像

```
ImgProductType.image= [[UIImage alloc] initWithData:productTypeSub.imgSmall]; 
```

# openssl - 尝试加密时 OpenSSL 挂起

> ID：14133367
> 
> 赞同：1
> 
> 时间：2013-01-03T05:08:45.907
> 
> 标签：openssl, rsa, public-key-encryption, private-key

我希望这里有人对 OpenSSL 有所了解。我对 OpenSSL 完全陌生，我正在尝试实现它来加密为网上商店动态生成的 PayPal 按钮。我有一个 PHP 脚本可以执行此操作，但是它不起作用，所以我决定尝试在命令提示符下运行该命令，并意识到当我尝试加密时它正在挂起。

我已经生成了一个公共证书和一个私钥，并且我已经下载了 PayPal 的公共证书。

这是我尝试过的命令：

```
(openssl smime -sign -signer C:\Users\MyName\Desktop\OpenSSLTest\my-pubcert.pem -inkey 
C:\Users\MyName\Desktop\OpenSSLTest\my-prvkey.pem -outform der -nodetach -binary 
C:\Users\MyName\Desktop\OpenSSLTest\DataToEncrypt.txt) | openssl smime -encrypt -des3 
-binary -outform pem C:\Users\MyName\Desktop\OpenSSLTest\paypal_cert.pem 
```

当我运行此命令时，我收到以下消息：

```
Loading 'screen' into random state -Loading 'screen' into random state -done done 
```

此时它挂起。有任何 OpenSSL 经验的人知道为什么这会发生在我身上吗？请记住，我以前从未使用过 OpenSSL，所以我可能会忽略一些简单的事情，这就是为什么我希望有人能指出我正确的方向。

我很感激任何建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:36:37.130

您在`-in`命令的前半部分缺少一个，该命令随后尝试从标准输入读取数据（因此挂起）。

正确的命令行应该是

```
openssl smime -sign -signer C:\Users\MyName\Desktop\OpenSSLTest\my-pubcert.pem -inkey 
C:\Users\MyName\Desktop\OpenSSLTest\my-prvkey.pem -outform der -nodetach -binary 
-in C:\Users\MyName\Desktop\OpenSSLTest\DataToEncrypt.txt | openssl smime -encrypt -des3 
-binary -outform pem C:\Users\MyName\Desktop\OpenSSLTest\paypal_cert.pem 
```

注意添加`-in`到第 3 行。

然后 DataToEncrypt.txt 将被正确读取为输入文件。

# python - Python方法调用中的括号

> ID：14133370
> 
> 赞同：0
> 
> 时间：2013-01-03T05:09:30.897
> 
> 标签：python, python-3.x

这是一个简单的Python代码

```
for item in sorted(frequency, key=frequency.get, reverse=True)[:20]:
  print(item, frequency[item]) 
```

但是，如果调用`frequency.get()`而不是`frequency.get`，它会给我的错误`"get expected at least 1 arguments, got 0"`

我来自红宝石。在 Ruby`get`中`get()`会完全一样。在 Python 中不一样吗？

例如，这里是[http://www.tutorialspoint.com/python/dictionary_get.htm](http://www.tutorialspoint.com/python/dictionary_get.htm)`get()`和 not的描述`get`。是什么`get`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T05:10:49.733

`frequency.get`描述了方法本身，而`frequency.get()`实际调用了该方法（并且错误地不给它任何参数）。你是对的，这与 Ruby 不同。

例如，考虑：

```
frequency = {"a": 1, "b": 2}
x = frequency.get("a") 
```

在这种情况下，`x`等于`1`。但是，如果我们这样做：

```
x = frequency.get 
```

`x`现在将是一个函数。例如：

```
print x("a")
# 1
print x("b")
# 2 
```

这个函数就是你传递给`sorted`.

# asp.net - 如何从另一个项目渲染局部视图

> ID：14133371
> 
> 赞同：3
> 
> 时间：2013-01-03T05:09:40.137
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, partial-views

我正在尝试从另一个项目渲染部分视图。

这很简单。我已经突出显示了应该替换 _View1 的字符串，因为另一个字符串。

我需要在字符串中添加什么来识别和访问剃刀局部视图？

![在此处输入图像描述](../Images/dc9704240144e9083c3a039a232cec46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:39:42.450

默认情况下，ASP.NET MVC 不支持它。

您必须创建一个`VirtualPathProvider`可以定位您的视图的自定义。您还必须使用`@inherit`而不是`@model`.

或者您可以使用我在这里描述的开源 MvcContrib 项目：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

（代码位于github + nuget：[https](https://github.com/jgauffin/griffin.mvccontrib) ://github.com/jgauffin/griffin.mvccontrib ）

# c# - 向/从 USB 传感器发送/接收数据

> ID：14133376
> 
> 赞同：1
> 
> 时间：2013-01-03T05:10:03.313
> 
> 标签：c#, .net, usb

我有一个项目，我必须以图形方式显示传感器信号的输出。为此，我想通过 USB 将传感器数据发送到 PC，然后使用 .NET 读取该数据。

USB 信号是传感器数据流。如何读取和写入传感器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:16:34.487

看看这可能会有所帮助： http: [//www.codeproject.com/KB/cs/USB_HID.aspx](http://www.codeproject.com/KB/cs/USB_HID.aspx)

# gwt - GwtQuery - fadeIn 一个接一个

> ID：14133377
> 
> 赞同：0
> 
> 时间：2013-01-03T05:10:07.513
> 
> 标签：gwt, gwtquery, gquery

我想一个接一个地为几个小部件添加淡入动画。我查看了文档，但它只首先淡入。

```
$(myWidget1).fadeIn(new Function(){
      public boolean f(Event e){
            //tried to add the second fade-in for myWidget2, but no result 
            return true;
      }
}); 
```

我如何以这种方式实现一个接一个的淡入，或者，还有另一种方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:21:14.513

在这里查看我的示例：http: [//gwtquery-plugins.googlecode.com/svn/branches/droppable_1_0/demo/DraughtsSample/DraughtsSample.html](http://gwtquery-plugins.googlecode.com/svn/branches/droppable_1_0/demo/DraughtsSample/DraughtsSample.html)

我使用fadeIn GQuery 方法方法淡入每块棋盘。您可以在那里找到代码：[http ://code.google.com/p/gwtquery-plugins/source/browse/trunk/droppable/sample/src/main/java/gwtquery/plugins/droppable/client/draughtssample/CheckerBoard .java#116](http://code.google.com/p/gwtquery-plugins/source/browse/trunk/droppable/sample/src/main/java/gwtquery/plugins/droppable/client/draughtssample/CheckerBoard.java#116)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:42:25.587

试试这个，使用 jQuery：

```
 $(document).ready(function(){
        var widgets = $('.widget');
        var fader = function(widget_n){
            if (widget_n < widgets.length) {
                $(widgets.get(widget_n)).fadeIn('slow', function(){
                    fader(widget_n +1);
                });    
            }
        };

        if (widgets.length > 0) {
            fader(0);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:18:31.107

你为什么不使用 .each() 函数来循环你的“小部件”。

```
var map = { 
  'mywidget1': '#mywidget1', 
  'mywidget2': '#mywidget2' 
}; 
$.each(map, function(key, value) {
  $(value).fadeIn(...);
}); 
```

或者，如果它们都有共同点（即标签组合类别等），这将更加容易。

请参阅[.each()](http://api.jquery.com/jQuery.each/) jQuery API

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:07:48.280

您正在覆盖不正确的方法：`f(Event)`用于事件，将其更改为`f()`：

```
$(myWidget1).fadeIn(new Function(){
  public void f() {
     $(myOtherWidget).fadeIn();
  }
}); 
```

# c# - 这是 KeyValuePair 中 foreach 的任何 Next 函数吗？

> ID：14133381
> 
> 赞同：0
> 
> 时间：2013-01-03T05:10:23.960
> 
> 标签：c#

这是 KeyValuePair 中 foreach 的任何 Next 函数吗？

```
foreach (KeyValuePair<string, List<class>> KPV in dic )
{  } 
```

或者唯一的解决方案是使用带有计数器的传统 for 循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:26:47.297

阅读[MSDN 字典类](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：

> 表示键和值的集合。

在遍历字典时，您使用[KeyValuePair Structure](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx)，它表示一对键（此处`string`）和值（此处`List<T>`）。因此，如果打算`List<T>`在每一对中循环，则需要访问[KeyValuePair.Value 属性](http://msdn.microsoft.com/en-us/library/ms224761.aspx)：

```
foreach (KeyValuePair<string, List<object>> KPV in dic)
{
    foreach (object v in KPV.Value)
    {

    }
} 
```

我也替换`List<class>`为`List<object>`, 因为绝对`class`不是类型的可能名称。

如果每个[KeyValuePair.Key 属性](http://msdn.microsoft.com/en-us/library/ms224760.aspx)值不重要，您可以遍历[Dictionary.Values 属性](http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx)：

```
foreach (List<object> values in dic.Values)
{
    foreach (object v in values)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:39:31.393

`KeyValuePair<TKey, TValue>`*如果*对象在对象内部，则可以枚举`Dictionary<TKey, TValue>`对象。

在 a`Dictionary`中，您可以使用[`Dictionary.Enumerator`](http://msdn.microsoft.com/en-us/library/k3z2hhax.aspx)公开[`Dictionary.Enumerator.MoveNext()`](http://msdn.microsoft.com/en-us/library/ab0k6d6s.aspx)方法的结构，这可能是您正在寻找的“下一步”功能。

如果您能告诉我们您打算在该`foreach`代码块中做什么，那就太好了。

# c++ - 在 Codelite(c++) 上构建项目会重新编译太多文件

> ID：14133384
> 
> 赞同：0
> 
> 时间：2013-01-03T05:10:54.850
> 
> 标签：c++, codelite

我有一个包含许多文件的 c++ 项目。当我构建项目时，即使对代码进行很小的更改，它也会重新编译大量文件。这增加了项目的编译时间。所以我需要关于如何改进项目结构或任何其他可能的优化的建议，这将有助于减少项目的编译时间。即使我没有对项目进行任何更改，也有几个文件正在重新编译。不知何故，make 没有检测到这些文件不需要重新编译，或者我可能遗漏了一些东西。

我在 linux(Ubuntu) 上为我的项目使用 Codelite。语言是 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:02:59.217

上面提供的链接将为您提供详细说明。只是为了把它放在一个更轻松的方式，我添加了更多的东西。

如果您更改 CPP 文件中的某些内容，则只会重新编译该文件。如果是头文件，那就另当别论了。如果您在多个模块中包含一个头文件，并且当您对该头文件进行更改时，所有关联的 CPP 文件都将被编译，这也是它应该的方式。因此，如果您真的关心这方面，则在编写代码时需要小心。在以后的阶段，将很难管理这些事情。

关于某些文件的编译，即使您不更改任何内容，也可能会发生

1]我们告诉编译器这样做。

2] 运行构建时会自动生成或修改一些 CPP 或头文件

3]文件时间戳有变化

4]文件夹名称/结构发生变化

最后但同样重要的是，还可以尝试更改代码精简版构建目标。

这些是我知道的可能性。会有更多[肯定:)]...

# iphone - 需要将 UITextView 完整内容呈现为 PDF

> ID：14133386
> 
> 赞同：3
> 
> 时间：2013-01-03T05:11:07.227
> 
> 标签：iphone, objective-c, ios, pdf, uitextview

我有以下方法在我的@implementation UIView (SaveToPdf) 类中运行良好

```
- (NSData *) toPdfData
{
// Creates a mutable data object for updating with binary data, like a byte array
NSMutableData *pdfData = [NSMutableData data];

// Points the pdf converter to the mutable data object and to the UIView to be converted
UIGraphicsBeginPDFContextToData(pdfData, self.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
[self.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext();

return pdfData;
} 
```

我使用这种方法将我的视图打印到 PDF 并且它工作正常，除了一个问题。我的视图包含一个 UITextView，而 pdf 仅打印该 UITextView 的可见区域。我需要 PDF 来呈现全部内容（即可滚动文本）

我是iOS开发的新手，如果有人能指出我正确的方向，我将不胜感激。

*需要注意的一点是，我在 UIView 中有其他子视图（标签、文本字段等）也需要打印到该 PDF。这目前工作正常，只需使用 [self.layer renderInContext:pdfContext]; 就可以将布局保留在我的 PDF 中。因为主视图将遍历它的所有子视图..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:19:57.550

我知道两种方法-

1.  我已经看到了一些`[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];`正在完成的代码。当我尝试时，我发现它导致我失去了文本清晰度。所以我不能使用这种方法。
2.  这是比较传统的方法。即你提取文本并绘制​​它。这段代码坚如磐石，已经看到了一些用法。因此，您需要做的就是从您那里获取所有文本`uitextview`并将其传递到此处...

希望这可以帮助。

```
#define kBorderInset 25.0
#define kMarginInset 15.0

- (void) drawText
{
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

NSString *textToDraw = @"YOUR TEXT FROM UITEXTVIEW HERE";
UIFont *font = [UIFont systemFontOfSize:16.0];

CGSize stringSize = [textToDraw sizeWithFont:font
                           constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) 
                               lineBreakMode:UILineBreakModeWordWrap];

CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 350.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

[textToDraw drawInRect:renderingRect 
              withFont:font
         lineBreakMode:UILineBreakModeWordWrap
             alignment:UITextAlignmentLeft];
return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-13T14:08:32.627

如果您可以在页面上绘制尽可能多的文本，并且您的 UITextView 中的文本在 PDF 中被截断，您希望禁用 UITextView 的滚动。在 Interface Builder 中或以编程方式：

```
textview.scrollEnabled = NO; 
```

当 scrollEnabled 设置为`YES`时，我的 PDF 中的文本被截断。不用滚动，我就能得到整个文本——至少一页能放得下。

如果您需要在多个页面上生成文本，我认为您必须将元素单独绘制到 PDF 绘图上下文中，如其他答案所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:48:41.653

我已经编写了这段代码来从 UIView 内容生成 pdf。愿这对你有所帮助。

```
#define kBorderInset            20.0
#define kBorderWidth            1.0
#define kMarginInset            10.0

//Line drawing
#define kLineWidth              1.0

    - (IBAction)generatePdfButtonPressed
{
 pageSize = CGSizeMake(612, 792);
 NSString *fileName = @"profileInfo.pdf";
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

 [self generatePdfWithFilePath:pdfFileName];
}

- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
 UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

 NSInteger currentPage = 0;
 BOOL done = NO;
 do
 {
  // Mark the beginning of a new page.
  UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

  // Draw a page number at the bottom of each page.
  currentPage++;
  [self drawPageNumber:currentPage];

  //Draw a border for each page.
  [self drawBorder];

  //Draw text fo our header.
  [self drawHeader];

  //Draw a line below the header.
  [self drawLine];

  //Draw some text for the page.
  if (profileInfo!=nil) 
  {
   NSString *stringwithInfo=[NSString stringWithFormat:@"Headline: %@\nFirstname: %@\nLastName : %@\nSiteStandardProfileRequest:\n%@",[profileInfo valueForKey:@"headline"],[profileInfo valueForKey:@"firstName"],[profileInfo valueForKey:@"lastName"],[[profileInfo valueForKey:@"siteStandardProfileRequest"]valueForKey:@"url"]];

   [self drawText:stringwithInfo];
  }

  //Draw an image
  [self drawImage];
  done = YES;
 }
 while (!done);

 // Close the PDF context and write the contents out.
 UIGraphicsEndPDFContext();
}

- (void) drawBorder
{
 CGContextRef    currentContext = UIGraphicsGetCurrentContext();
 UIColor *borderColor = [UIColor brownColor];
 CGRect rectFrame = CGRectMake(kBorderInset, kBorderInset, pageSize.width-kBorderInset*2, pageSize.height-kBorderInset*2);
 CGContextSetStrokeColorWithColor(currentContext, borderColor.CGColor);
 CGContextSetLineWidth(currentContext, kBorderWidth);
 CGContextStrokeRect(currentContext, rectFrame);
}

- (void) drawLine
{
 CGContextRef    currentContext = UIGraphicsGetCurrentContext();

 CGContextSetLineWidth(currentContext, kLineWidth);

 CGContextSetStrokeColorWithColor(currentContext, [UIColor blueColor].CGColor);

 CGPoint startPoint = CGPointMake(kMarginInset + kBorderInset, kMarginInset + kBorderInset + 40.0);
 CGPoint endPoint = CGPointMake(pageSize.width - 2*kMarginInset -2*kBorderInset, kMarginInset + kBorderInset + 40.0);

 CGContextBeginPath(currentContext);
 CGContextMoveToPoint(currentContext, startPoint.x, startPoint.y);
 CGContextAddLineToPoint(currentContext, endPoint.x, endPoint.y);

 CGContextClosePath(currentContext);
 CGContextDrawPath(currentContext, kCGPathFillStroke);
}

- (void) drawText:(NSString*)txtTodraw
{
 CGContextRef    currentContext = UIGraphicsGetCurrentContext();
 CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

 UIFont *font = [UIFont systemFontOfSize:14.0];

 CGSize stringSize = [txtTodraw sizeWithFont:font
                            constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset)
                                lineBreakMode:UILineBreakModeWordWrap];

 CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 50.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

 [txtTodraw drawInRect:renderingRect
               withFont:font
          lineBreakMode:UILineBreakModeWordWrap
              alignment:UITextAlignmentLeft];
}

- (void) drawImage
{
 UIImage * demoImage = [UIImage imageNamed:@"demo.png"];
 [demoImage drawInRect:CGRectMake( (pageSize.width - demoImage.size.width/2)/2, 350, demoImage.size.width/2, demoImage.size.height/2)];
}

- (void) drawHeader
{
 CGContextRef    currentContext = UIGraphicsGetCurrentContext();
 CGContextSetRGBFillColor(currentContext, 0.3, 0.7, 0.2, 1.0);

 NSString *textToDraw = @"LinkedIn Profile Info";

 UIFont *font = [UIFont systemFontOfSize:24.0];

 CGSize stringSize = [textToDraw sizeWithFont:font constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) lineBreakMode:UILineBreakModeWordWrap];

 CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

 [textToDraw drawInRect:renderingRect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];
}

- (void)drawPageNumber:(NSInteger)pageNumber
{
 NSString* pageNumberString = [NSString stringWithFormat:@"Page %d", pageNumber];
 UIFont* theFont = [UIFont systemFontOfSize:12];

 CGSize pageNumberStringSize = [pageNumberString sizeWithFont:theFont
                                            constrainedToSize:pageSize
                                                lineBreakMode:UILineBreakModeWordWrap];

 CGRect stringRenderingRect = CGRectMake(kBorderInset,
                                         pageSize.height - 40.0,
                                         pageSize.width - 2*kBorderInset,
                                         pageNumberStringSize.height);

 [pageNumberString drawInRect:stringRenderingRect withFont:theFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter];
}

-(void)fillInformationInform:(NSDictionary*)dics
{
 headLineLabel.text=[dics valueForKey:@"headline"];
 NSURL *picUrl=[NSURL URLWithString:[dics valueForKey:@"pictureUrl"]];
 profileImageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:picUrl]];

 phoneNoLabel.text=[[[[dics valueForKey:@"phoneNumbers"] valueForKey:@"values"] objectAtIndex:0] valueForKey:@"phoneNumber"];

 cityLabel.text=[[dics valueForKey:@"location"] valueForKey:@"name"];
 emailAddressLabel.text=[dics valueForKey:@"emailAddress"];
 nameLabel.text=[NSString stringWithFormat:@"%@ %@",[dics valueForKey:@"firstName"],[dics valueForKey:@"lastName"]];

 dateOfBirthLabel.text=[NSString stringWithFormat:@"%@-%@-%@",[[dics valueForKey:@"dateOfBirth"]valueForKey:@"day"],[[dics valueForKey:@"dateOfBirth"]valueForKey:@"month"],[[dics valueForKey:@"dateOfBirth"]valueForKey:@"year"]];

 NSDictionary *eduDic=[[NSDictionary alloc] initWithDictionary:[[[dics valueForKey:@"educations"]valueForKey:@"values"]objectAtIndex:0]];

// NSLog(@"education dic is %@",eduDic);

 degreeLabel.text=[eduDic valueForKey:@"degree"];
 durationLabel.text=[NSString stringWithFormat:@"From %@ To %@",[[eduDic valueForKey:@"startDate"]valueForKey:@"year"],[[eduDic valueForKey:@"endDate"]valueForKey:@"year"]];
 fieldOfStudyLabel.text=[eduDic valueForKey:@"fieldOfStudy"];
 collegeLabel.text=[eduDic valueForKey:@"schoolName"];

 destinationLabel.text=[[[[dics valueForKey:@"positions"] valueForKey:@"values"] objectAtIndex:0] valueForKey:@"title"];

 NSArray *skillsArray=[[NSArray alloc] initWithArray:[[dics valueForKey:@"skills"]valueForKey:@"values"]];

 NSString *skillStr=[[NSString alloc] initWithFormat:@""];

 for (NSDictionary *skillDic in skillsArray) 
 {
  if (![skillStr isEqualToString:@""]) {
   skillStr=[skillStr stringByAppendingFormat:@","];
  }
  skillStr=[skillStr stringByAppendingFormat:@"%@",[[skillDic valueForKey:@"skill"]valueForKey:@"name"]];
 }

 NSLog(@"skill string is %@",skillStr);

 skillsLable.text=[NSString stringWithFormat:@"%@",skillStr];

} 
```

# jquery - 输入电子邮件后在 div 中显示 gravatar

> ID：14133389
> 
> 赞同：-2
> 
> 时间：2013-01-03T05:11:23.263
> 
> 标签：jquery, gravatar

我想要做的是“用户完成输入他/​​她的电子邮件并移动到密码字段或刚刚完成输入电子邮件，让 jquery 根据插入的电子邮件加载用户 gravatar登录页面并将此图像加载到包含临时无图像图像的 div 中。”

我怎么能用 jQuery 做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:19:18.520

没有给出 HTML

```
<input id="email" ... /><img id="gravatar" style="display:none;"/> 
```

它不需要有人建议的 ajax，因为 gravatar 调用非常简单。

jQuery

```
$('#email').on('change', function(){
    var hash=md5($('#email').val()); // you will need to find a javascript md5 function
    $('#gravatar').attr('src', 'http://www.gravatar.com/avatar/' + hash).show();
}); 
```

我没有费心预加载图像。

*“或者刚刚输入完电子邮件”* - 如果你想这样做，你会抛出一个电子邮件地址验证功能并检查 keyup。

```
$('#email').on('keyup change', function(){
    if (is_email_address($(this).val()){
        var hash=md5($('#email').val()); // you will need to find a javascript md5 function
        $('#gravatar').attr('src', 'http://www.gravatar.com/avatar/' + hash).show();
    }
}); 
```

# oracle - Oracle 物化视图：更新远程数据库中的 MV？

> ID：14133398
> 
> 赞同：0
> 
> 时间：2013-01-03T05:12:09.067
> 
> 标签：oracle, materialized-views

我使用如下语法在远程数据库中创建了一个快速刷新 MV：

```
CREATE MATERIALIZED VIEW  MV_TAB1 
REFRESH FAST WITH PRIMARY KEY 
START WITH SYSDATE NEXT SYSDATE+(5/1440) /* 5 MINUTES */ 
FOR UPDATE AS 
SELECT * FROM TAB1@SOURCE_DB; 
```

现在在`MV_TAB1`创建的远程数据库中，是否可以更新`MV_TAB1`并在刷新后保持更新？我的测试表明，每次刷新后，我的更新`MV_TAB1`都消失了。有没有办法保持这个本地更新？如果是，如何？

谢谢，阿莫斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:52:14.083

MV_TAB1 是 TAB1@SOURCE_DB 的镜像，所以你不能像 TAB1 一样同时拥有它而与 TAB1 不同。

如果您更新目标表上的某些行，然后在源中更新它们，则刷新将覆盖它们。如果您不在源中更新它们，只有在您使用快速刷新时它们才会保持更新。刷新完成将删除/截断远程表并重新插入所有行。

**更新：**如果您希望远程表上的更新优先于刷新，您可以使用一些技巧：

1) 保持 MV 不变，并在具有相同 DDL的*姊妹*表上进行更新（和插入） 。查询而不是 MV，将使用这两个表，例如：

```
select nvl(a.key, b.key), decode(a.key, null, b.col, a.col)
from tab1_sister a 
full join mv_tab1 b on (a.key = b.key); 
```

2）将列添加到 MV_TAB1（复制它们，除了键）并对这些列进行更新（MV 可能必须与预建表一起使用）。如果附加列完成，则使用它们，否则使用刷新更新的原始列。

# java - 检索 xml 支付响应并使用 JSF/JQuery 提取数据

> ID：14133405
> 
> 赞同：0
> 
> 时间：2013-01-03T05:13:01.770
> 
> 标签：java, jquery, http, post, httpurlconnection

我正在配置一个支付网关，它通过 xml 向我的 Java Spring JSF facelets Web 应用程序运行。支付请求必须作为 xml 请求发送到网关，我已经设法将 xml 支付请求发送到支付网关。假设xml 响应返回到我发起付款请求的同一页面，

我想知道如何从支付网关检索响应 xml？

我使用以下方法将请求发送到支付网关并且成功，

```
$(document).ready(function() {
    $('#payForm').trigger('submit');
});

<form id="payForm" action="https://www.paymentGateway.com/gateway.php" method="post">
    <input type="hidden" name="request" value="#{paymentBean.request}"/>
</form> 
```

# matlab - MATLAB 数组迭代和字段名

> ID：14133407
> 
> 赞同：1
> 
> 时间：2013-01-03T05:13:02.867
> 
> 标签：matlab, random, iteration, cell

我真的很难用这个做我想做的事，所以任何帮助都将不胜感激。

我循环遍历数组 X 次，以随机方式显示图像数组。我想要做的是检索当前以随机顺序显示的每个图像的名称，以及它所属的数组，因为每个图像都显示在循环中，并将两者存储在单独的变量中。

```
images.blue = imread('blue.bmp');
images.red = imread('red.bmp');
images.green = imread('green.bmp');
images.yellow = imread('yellow.bmp');
colours = {images.blue, images.red, images.green, images.yellow}
cata = {images.blue, images.red}
catb = {images.green, images.yellow} 
```

因此，例如，如果`images.blue`在循环遍历数组时显示在屏幕上，我希望将名称`blue`保存在 variable 中`CurrentFieldname`。

```
for count = 1;
    names = (fieldnames(images));
while count <= 5
    for n = randperm(length(colours));     
   d =(colours{n}); 
   imshow(d);
   pause(1)           
   CurrentFieldName = (names {n});        
    end
    count = count+1;   
end
break
end 
```

上面代码发生的情况是，在显示所有图像之后，每次迭代直到满足条件，最后显示的图像的字段名称都存储在`CurrentFieldname`.

以上不是我想要的。每次在迭代循环中显示图像后，我希望该字段`CurrentFieldname`包含正在显示的图像的名称。然后，在循环的每次交互过程中，我想比较`CurrentFieldName`with`cata`和`catb`，看看`CurrentFieldName`属于哪个数组。然后，将其记录到一个单独的变量中，`CurrCat`. 例如

```
if CurrentFieldname == cata
    CurrCat = a; 
```

我只想拥有这两个变量，`CurrentFieldName`并且`CurrCat`在每次迭代结束时都包含相关信息。然后它们都将被与随机显示的下一个图像相对应的信息覆盖，依此类推。

我希望这一切都有意义。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:13:09.637

我们试试看：

```
colors = {'red', 'green', 'blue', 'yellow' }; % existing colors, assuming for each color there is a .bmp image
NC = numel( colors ); % number of colors
% read the images once
for ci=1:NC
    img.(colors{ci}) = imread( [colors{ci}, '.bmp' ] );
end
NumIters = 1; % number of iterations over all colors
% reapeat as many times 
for itr = 1:NumIters
     ord = randperm( NC ); % permutation for this iteration
     for ci = ord(:)', %'
         CurrentFieldName = colors{ci};
         imshow( img.(colors{ci}) ); % display the current color image
         title( colors{ci} );
         tic;
         % your code here processing img.(colors{ci})
         Response = myFun( img.(colors{ci}) );
         ResponseTime = toc; % record timing of processing
         save( sprintf('data_for_itr%03d_color%02d.mat', itr, ci ),...
              'CurrentFieldName', 'Response', 'ResponseTime' );
     end
end 
```

# codeigniter - Codeigniter 事件日历功能仅在本月的第一周不起作用 - 奇怪

> ID：14133410
> 
> 赞同：0
> 
> 时间：2013-01-03T05:13:14.457
> 
> 标签：codeigniter, calendar

[下面的代码是来自这里](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library/)的 Codeigniter 事件日历功能。

日历是可点击的，您可以通过“提示”框在日期字段中输入数据。然后数据将显示在日历日期字段中。

除了每个月的前 10 天左右，日历事件功能在所有日期都按预期工作。这些特定日期（即前 10 天的日期）的数据存储在数据库中，但数据不会显示在日历上。

我不确定为什么会发生这种情况，而本月的其余日期都运行良好。有人可以帮忙吗？

```
//CONTROLLER

    class Mycal extends CI_Controller {

    public function index() {
       $this->display();
    }

    function display($year = null, $month = null){

    if (!$year) {
        $year = date('Y');
    }
    if (!$month) {
        $month = date('m');
    }

    $this->load->model('Mycal_model');

    if($day = $this->input->post('day')){
        $this->Mycal_model->add_calendar_data(
            "$year-$month-$day",
            $this->input->post('data')
        );
    }

    $data['calendar'] = $this->Mycal_model->generate($year, $month);

    $this->load->view('mycal_view', $data); 
}

}

    //MODEL

    class Mycal_model extends CI_Model{

    var $conf;

    function __construct(){
        parent::__construct();

        $this->conf = array(
            'start_day' => 'monday',
            'show_next_prev' => true,
            'next_prev_url' => base_url() . 'index.php/mycal/display'
        );

        $this->conf['template'] = '
            {table_open}<table border="0" cellpadding="0" cellspacing="0" class="calendar">{/table_open}

            {heading_row_start}<tr>{/heading_row_start}

            {heading_previous_cell}<th><a href="{previous_url}">&lt;&lt;</a></th>{/heading_previous_cell}
            {heading_title_cell}<th colspan="{colspan}">{heading}</th>{/heading_title_cell}
            {heading_next_cell}<th><a href="{next_url}">&gt;&gt;</a></th>{/heading_next_cell}

            {heading_row_end}</tr>{/heading_row_end}

            {week_row_start}<tr>{/week_row_start}
            {week_day_cell}<td>{week_day}</td>{/week_day_cell}
            {week_row_end}</tr>{/week_row_end}

            {cal_row_start}<tr class="days">{/cal_row_start}
            {cal_cell_start}<td class="day">{/cal_cell_start}

            {cal_cell_content}
                <div class="day_num">{day}</div>
                <div class="content">{content}</div>
            {/cal_cell_content}
            {cal_cell_content_today}
                <div class="day_num highlight">{day}</div>
                <div class="content">{content}</div>
            {/cal_cell_content_today}

            {cal_cell_no_content}<div class="day_num">{day}</div>{/cal_cell_no_content}
            {cal_cell_no_content_today}<div class="day_num highlight">{day}</div>{/cal_cell_no_content_today}

            {cal_cell_blank}&nbsp;{/cal_cell_blank}

            {cal_cell_end}</td>{/cal_cell_end}
            {cal_row_end}</tr>{/cal_row_end}

            {table_close}</table>{/table_close}
        ';

    }

    function get_calendar_data($year, $month){

    $query = $this->db->select('date, data')->from('calendar')
        ->like('date', "$year-$month", 'after')->get();

    $cal_data = array();

    foreach ($query->result() as $row){
        $cal_data[substr($row->date,8,2)] = $row->data;
    }

    return $cal_data;
}

function add_calendar_data($date, $data){

    if($this->db->select('date')->from('calendar')
        ->where('date', $date)->count_all_results()) {

        $this->db->where('date', $date)->update('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));

    }else{

        $this->db->insert('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));
    }
}

function generate ($year, $month){

    $this->load->library('calendar', $this->conf);
    $cal_data = $this->get_calendar_data($year, $month);    
    return $this->calendar->generate($year, $month, $cal_data)      
}

//VIEW

<?php echo $calendar; ?>

<script type="text/javascript">
$(document).ready(function() {
    $('.calendar .day').click(function() {
        day_num = $(this).find('.day_num').html();
        day_data = prompt('Enter Stuff', $(this).find('.content').html());

        if(day_data !=null){

            $.ajax({
                url: window.location,
                type: 'POST',
                data: {
                    day: day_num,
                    data: day_data
                },
                success: function(msg){
                    location.reload();
                }
            });

        }

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-15T08:45:00.613

问题在于您在事件中传递的日期格式。请注意

```
$data= array('day'=>01,'day_data'=>'abcd'); 
```

不一样

```
$data= array('day'=>1,'day_data'=>'abcd'); 
```

因此所有日期低于 1​​0 的问题。更新您的代码以保持统一的日期格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T15:01:52.417

这是上述问题的确切解决方案。

if($this->uri->segment(3)){

   $year=$this->uri->segment(3);

} 别的{

 $年=日期（“Y”）；

}

if($this->uri->segment(4)){

   $month=$this->uri->segment(4);

} 别的{

 $月=日期("m");

}

$数据=数组（

    '年'=>$年，

    '月'=>$月

);

$prefs = 数组（

        'month_type' => 'long',

        'day_type' => '短',

        'show_next_prev' => 真，

        'next_prev_url' => base_url().'欢迎/新闻/'

);

$prefs['模板'] = '

   {table_open}table{border-collapse:collapse; 颜色：#f6f6f6;} td{ 宽度：40px; 高度：40px；文本对齐：居中；边框：1px 实心#e2e0e0；字体大小：18px；字体粗细：粗体；} th{ 高度：68px; 底部填充：12px；文本对齐：居中；字体大小：20px；} .prev_sign a, .next_sign a{ 颜色：白色；文字装饰：无；} tr.week_name{ 字体大小：16px; 字体粗细：400；红色; 宽度：10px；背景颜色：#efe8e8；} .highlight{背景颜色：#25BAE4; 颜色：#e6f0e9; 高度：39px；padding-top: 7px;}{/table_open}

        {heading_row_start}{/heading_row_start}

        {heading_previous_cell}<<{/heading_previous_cell}

        {heading_title_cell}{heading}{/heading_title_cell}

        {heading_next_cell}>>{/heading_next_cell}

        {heading_row_end}{/heading_row_end}

        {week_row_start}{/week_row_start}

        {week_day_cell}{week_day}{/week_day_cell}

        {week_row_end}{/week_row_end}

        {cal_row_start}{/cal_row_start}

        {cal_cell_start}{/cal_cell_start}

        {cal_cell_start_today}{/cal_cell_start_today}

        {cal_cell_start_other}{/cal_cell_start_other}

        {cal_cell_content}{day}{/cal_cell_content}

        {cal_cell_content_today}{day}{/cal_cell_content_today}

        {cal_cell_no_content}{day}{/cal_cell_no_content}

        {cal_cell_no_content_today}{day}{/cal_cell_no_content_today}

        {cal_cell_blank} {/cal_cell_blank}

        {cal_cell_other}{day}{/cal_cel_other}

        {cal_cell_end}{/cal_cell_end}

        {cal_cell_end_today}{/cal_cell_end_today}

        {cal_cell_end_other}{/cal_cell_end_other}

        {cal_row_end}{/cal_row_end}

        {table_close}{/table_close}

';

   $this->load->library('日历',$prefs);

 $data2=$data1=数组（）；

        foreach($event as $d) {

                $date=date_create($d['date']);

                $date_f= date_format($date,"Y/m/d");

                $y=date_format($date,"Y");

                $m=date_format($date,"m");

                $d1=strval(intval(date_format($date,"d")));

                if($y==$year && $m==$month){

                        $data1[$d1] = base_url().'welcome/alleventbydate/'.$date_f;

                }

        }

        //$data[]=$data1;

        echo $this->calendar->generate($year,$month,$data1);

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-04-11T14:48:05.767

这是上述问题的确切解决方案。按照此编码，您将获得解决方案。请根据您的要求修改代码。

```
if($this->uri->segment(3)){

   $year=$this->uri->segment(3);

} else{

 $year=date("Y");

}

if($this->uri->segment(4)){

   $month=$this->uri->segment(4);

} else{

 $month=date("m");

}

$data=array(

    'year'=>$year,

    'month'=>$month

);

$prefs = array(

        'month_type'   => 'long',

        'day_type'     => 'short',

        'show_next_prev'  => TRUE,

        'next_prev_url'   => base_url().'welcome/news/'

);

$prefs['template'] = '

   {table_open}<style>table{border-collapse:collapse; color: #f6f6f6;} td{ width: 40px; height: 40px; text-align: center; border: 1px solid #e2e0e0; font-size: 18px; font-weight: bold; } th{ height: 68px; padding-bottom: 12px; text-align: center; font-size: 20px; } .prev_sign a, .next_sign a{ color:white; text-decoration: none; } tr.week_name{ font-size: 16px; font-weight:400; color:red; width: 10px; background-color: #efe8e8; } .highlight{background-color: #25BAE4; color:#e6f0e9; height: 39px; padding-top: 7px;}</style><table class="col-lg-12 col-md-12 col-sm-12 col-xs-12" border="0" cellpadding="0" cellspacing="0">{/table_open}

        {heading_row_start}<tr>{/heading_row_start}

        {heading_previous_cell}<th><a href="{previous_url}">&lt;&lt;</a></th>{/heading_previous_cell}

        {heading_title_cell}<th colspan="{colspan}">{heading}</th>{/heading_title_cell}

        {heading_next_cell}<th><a href="{next_url}">&gt;&gt;</a></th>{/heading_next_cell}

        {heading_row_end}</tr>{/heading_row_end}

        {week_row_start}<tr>{/week_row_start}

        {week_day_cell}<td>{week_day}</td>{/week_day_cell}

        {week_row_end}</tr>{/week_row_end}

        {cal_row_start}<tr>{/cal_row_start}

        {cal_cell_start}<td>{/cal_cell_start}

        {cal_cell_start_today}<td>{/cal_cell_start_today}

        {cal_cell_start_other}<td class="other-month">{/cal_cell_start_other}

        {cal_cell_content}<a href="{content}">{day}</a>{/cal_cell_content}

        {cal_cell_content_today}<div class="highlight"><a href="{content}">{day}</a></div>{/cal_cell_content_today}

        {cal_cell_no_content}{day}{/cal_cell_no_content}

        {cal_cell_no_content_today}<div class="highlight">{day}</div>{/cal_cell_no_content_today}

        {cal_cell_blank}&nbsp;{/cal_cell_blank}

        {cal_cell_other}{day}{/cal_cel_other}

        {cal_cell_end}</td>{/cal_cell_end}

        {cal_cell_end_today}</td>{/cal_cell_end_today}

        {cal_cell_end_other}</td>{/cal_cell_end_other}

        {cal_row_end}</tr>{/cal_row_end}

        {table_close}</table>{/table_close}

';

   $this->load->library('calendar',$prefs);

 $data2=$data1=array();

        foreach($event as $d) {

                $date=date_create($d['date']);

                $date_f= date_format($date,"Y/m/d");

                $y=date_format($date,"Y");

                $m=date_format($date,"m");

                $d1= strval(intval(date_format($date,"d")));

                if($y==$year && $m==$month){

                        $data1[$d1]  = base_url().'welcome/alleventbydate/'.$date_f;

                }

        }

        //$data[]=$data1;

        echo $this->calendar->generate($year,$month,$data1); 
```

# javascript - 实时表单字段选择通知到 Firefox 插件

> ID：14133411
> 
> 赞同：1
> 
> 时间：2013-01-03T05:13:36.507
> 
> 标签：javascript, firefox, web-applications, firefox-addon

我正在尝试编写一个 Firefox 插件，我想知道选择了哪些表单字段，例如输入字段、复选框等。

例如：在 facebook.com 上，您会注意到有 2 个表单字段：1\. 注册和 2.登录。我希望我的插件在用户选择“用户名”输入字段并在输入密码时选择密码时识别出用户当前正在输入他的用户名。

我不知道从哪里开始，因为这必须适用于所有 Web 应用程序，而且我没有源代码。任何建议都会有帮助。

# jsf - 如何在第二次通话时清除 p:inputText

> ID：14133414
> 
> 赞同：0
> 
> 时间：2013-01-03T05:13:46.623
> 
> 标签：jsf, primefaces

我`<p:inputText>`在对话框中有一个标签。当我第一次输入值并提交它时，它会将值保存在支持 bean 中。但是当我第二次打开对话框时，之前的值`<p:inputText>`仍然成立。当我第二次或以后打开对话框时，如何清除输入文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:57:50.783

清除支持 bean 中的绑定值并`update="idOfDialog"`在您的`<p:commandButton/>`.

# android - 如何停止沿 y 轴滚动 AChartEngine 动态折线图？

> ID：14133417
> 
> 赞同：4
> 
> 时间：2013-01-03T05:14:24.263
> 
> 标签：android, graph, charts, plot, achartengine

我已经为 y 轴值设置了最小最大范围，但图形可以滚动超出那些妨碍图形外观的值。我希望控制/停止图形沿 y 轴的滚动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T06:34:31.797

您需要指定哪些轴平移可用于：`mRenderer.setPanEnabled(boolean enabledX, boolean enabledY)`

[点击这里了解更多](http://www.achartengine.org/content/javadoc/org/achartengine/renderer/XYMultipleSeriesRenderer.html#setPanEnabled%28boolean,%20boolean%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-19T10:41:12.250

使用以下锁定 x 和 y 轴滚动，根据我们的需要可以指定布尔值

```
render.setPanEnabled(false, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T14:39:54.190

使用 setPanLimits 方法。

mRenderer.setPanLimits(new double[]{0,10,0,5});

此代码将禁用在 X 轴上向左平移 0、向右平移 10 以及在 Y 轴上向下平移 0 和向上平移 5。

# c#-4.0 - 如何将数据保存在对象中

> ID：14133427
> 
> 赞同：0
> 
> 时间：2013-01-03T05:15:05.937
> 
> 标签：c#-4.0

我在 sqlServer 中有一个或多个表。我想从数据库中获取数据并将此表的数据保存到类之类的对象中，但我不想将这些数据保存到数据集中。

*   有哪些方法可以将数据保存到从数据库中获取数据的对象中？
*   如何将数据传递到对象而不是数据集或数据表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:21:04.397

[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)是您应该寻找的。

对于 .Net 框架，您可以查看

*   [实体框架](http://msdn.microsoft.com/en-us/library/bb399572.aspx)
*   [LINQ 到 SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)
*   [休眠](http://nhforge.org/)
*   [小巧玲珑](http://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:01:50.497

ORM就是上面提到的解决方案.....

更好地使用有利于此目的的实体框架......它将在数据库中创建包含所有表的实体类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:21:44.023

**简而言之：**正如评论中所建议的那样，某种[类型的**ORM**](http://en.wikipedia.org/wiki/Object-relational_mapping)（对象关系映射）将为您带来魔力。

**关于这个主题的好的参考资料**如下：

*   [对象关系映射 (ORM) 的 4 个好处](http://blogs.learnnowonline.com/blog/bid/210553/4-Benefits-of-Object-Relational-Mapping-ORM)
*   [ORM 将数据映射到对象](https://stackoverflow.com/q/12106802/1437962)
*   [DataObjects.Net - RAD 的 ORM 框架 - 简介](http://www.codeproject.com/Articles/85533/DataObjects-Net-ORM-Framework-for-RAD-Introduction)

**编辑：**要为您的问题选择**正确的 ORM**，请查看此 Wikipedia 文章

*   [**对象关系映射软件列表**](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#.NET)。

# objective-c - 尝试使用 NSSortDescriptor 对 NSMutableArray 进行排序时，我得到无法识别的选择器

> ID：14133428
> 
> 赞同：0
> 
> 时间：2013-01-03T05:15:07.917
> 
> 标签：objective-c, nsmutablearray, nssortdescriptor

我正在尝试做一些看似基本的事情，但我无法正常工作。

我正在跟踪`NSMutableArray`类似的对象。这些对象有一个称为“优先级”的`NSNumber`@ `property`，我正在初始化它：

```
[self setPriority:[[NSNumber alloc] initWithInt:2]]; 
```

但是，当我尝试排序时：

```
NSSortDescriptor * frequencyDescriptor = [[NSSortDescriptor alloc] initWithKey:@"priority" ascending:YES];
NSArray * descriptors = [NSArray arrayWithObjects:frequencyDescriptor, nil];
NSArray * sortedArray = [tasks sortedArrayUsingDescriptors:descriptors]; //This line throws the exception 
```

我收到此错误：

```
-[__NSCFNumber length]: unrecognized selector sent to instance 0x2c7 
```

`NSSortDescriptor`关于这个主题还有其他问题和答案，但是在我尝试使用对属性进行排序的每种情况下，我都会得到完全相同的错误`NSNumber`，并且排序不会发生。

这是任务类标题：

```
#import <Foundation/Foundation.h>

@interface Task : NSObject <NSCoding>

@property NSString *name;
@property NSNumber *priority;
@property NSString *note;
@property NSString *taskID;

@end 
```

## 以下是崩溃前 tasks 数组中 NSNumber 的内容：

```
2013-01-03 13:55:50.056 MyApp[9682:303] <Task: 0x10192c160>, 10
2013-01-03 13:55:50.057 MyApp[9682:303] <Task: 0x10192bc60>, 2
2013-01-03 13:55:50.057 MyApp[9682:303] <Task: 0x10190fda0>, 3
2013-01-03 13:55:50.057 MyApp[9682:303] <Task: 0x10192c6f0>, 2
2013-01-03 13:55:50.058 MyApp[9682:303] <Task: 0x10192c870>, 6
2013-01-03 13:55:50.058 MyApp[9682:303] <Task: 0x10192d1d0>, 2
2013-01-03 13:55:50.058 MyApp[9682:303] <Task: 0x10192d330>, 2
2013-01-03 13:55:50.058 MyApp[9682:303] <Task: 0x10192c530>, 5 
```

我正在寻找的只是让我的对象数组根据`NSNumber`名为“priority”的属性按降序排序。

为什么我会收到此错误？我知道这可能是非常明显的事情，但我已经坚持了 15 个小时。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:49:58.857

我的猜测是，其中的条目`tasks`具有优先级值，这些值混合了不同类型的对象，其中至少一个是数组，至少一个是 NSNumber。然后 compare 尝试比较两者，并将`-length`消息发送给无法处理的号码。

研究堆栈跟踪将有助于确认这是否正确，并且还应该让您了解引发异常的原因。

# android - Android：在模拟器中未触发 ACTION_BATTERY_LOW。接收器在代码中注册，而不是清单

> ID：14133435
> 
> 赞同：6
> 
> 时间：2013-01-03T05:16:04.467
> 
> 标签：android, android-intent, broadcastreceiver, batterylevel

我已经看过提到`registerReceiver`必须调用（未在清单中定义）才能接收`ACTION_BATTERY_LOW`意图的帖子。

```
public class MainActivity extends Activity
{

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       //....  
      registerReceiver(new BatteryLevelReceiver(), new IntentFilter(
                                              Intent.ACTION_BATTERY_LOW));
   }
   // .......
} 
```

**广播接收器**

```
public class BatteryLevelReceiver extends BroadcastReceiver
{
    private static final String TAG = BatteryLevelReceiver.class.getSimpleName();

    @Override
    public void onReceive(Context context, Intent intent)
    {
        Log.d(TAG, "onReceive");
    }
} 
```

我在 logcat 中没有看到“onReceive”日志语句。我正在使用模拟器来模拟电池电量不足的状态，使用`telnet 5554`和执行`power capacity 10`. 我确实看到模拟器中的电池状态发生了变化，但没有触发意图。

另外，如果我必须`registerReceiver()`在活动中调用并且我不调用`unregisterReceiver`or `onStop`，`onDestroy`可以吗？如果不行，即使我的应用不在前台，我将如何注册接收器以接收系统意图？（除了使用清单）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-06T13:26:51.097

确保：

1.  您正在将“充电器连接”设置为“无”
2.  电池状态为“正在放电”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T05:36:10.673

您可以在清单中添加以下代码。

```
<receiver android:name=".yourpackage.BroadCastNotifier" >
  <intent-filter>
    <action android:name="android.intent.action.BATTERY_LOW" />
  </intent-filter>
</receiver> 
```

在你的`BroadCastNotifier Class`

```
package yourpackage;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class BroadCastNotifier extends BroadcastReceiver {
    private final static String TAG = "BroadCastNotifier"; 
    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();

        if(Intent.ACTION_BATTERY_LOW.equalsIgnoreCase(intentAction)){
            Log.e(TAG, "GOT LOW BATTERY WARNING");          
        }
    }

} 
```

当您的电池电量不足时，您将收到日志消息`GOT LOW BATTERY WARNING`，也可以在您的设备中尝试此操作。

尽管上述代码可能工作的最佳方法是不使用 BroadCast 进行此类操作，但您可以按照[此处所述](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)监控电池电量。您可以使用下面的代码确定您的电池，这更容易。

```
int level = battery.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
int scale = battery.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

float batteryPct = level / (float)scale; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-29T12:02:12.783

关键是用telnet命令**禁用充电**

```
power ac off 
```

如果您随后将电池电量设置为低容量

```
power capacity 1 
```

意图将被触发

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-22T17:03:22.890

您可以在清单中注册- 请[在此处](https://stackoverflow.com/a/18946284/281545)`ACTION_BATTERY_LOW`查看我的详细答案- 您无法在清单中注册。`ACTION_BATTERY_CHANGED`

您没有收到它的原因可能是您忘记在清单中声明您的 RECEIVER

> 另外，如果我必须`registerReceiver()`在活动中调用并且我不调用`unregisterReceiver`or `onStop`，`onDestroy`可以吗？

不，您应该在ALWAYS上注册`onResume`和取消注册- 在被调用后，您的接收器将不会*收到*`onPause``onPause`

 *> 如果不行，即使我的应用不在前台，我将如何注册接收器以接收系统意图？（除了使用清单）。

仅在清单中*

# javascript - 如何在客户端要求套接字流

> ID：14133438
> 
> 赞同：0
> 
> 时间：2013-01-03T05:16:28.417
> 
> 标签：javascript, node.js, socketstream

我在调用服务器端函数时将node.js与socketstream一起使用。我得到'ss is not defined error'。我可以要求socketstream吗。我怎么能要求socketstream。

```
 ss.rpc('User.saveUserInfo',name,pwd,function(res){

      alert(res);

         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T22:36:27.473

此问题的解决方案是 html 标记未包含在 html 文件的 head 部分中。

# android - Android 模拟器上的 UDP

> ID：14133443
> 
> 赞同：0
> 
> 时间：2013-01-03T05:16:55.713
> 
> 标签：android, proxy, udp, client-server

我正在尝试在两个不同系统上的 android 模拟器上运行的客户端程序和服务器之间建立一个简单的 UDP 连接。服务器端很好，但客户端总是崩溃。是模拟器的问题吗？我应该重定向端口以使其工作吗？

客户端（在安卓模拟器上）：

```
package com.example.clientrecv;   
import java.io.IOException;  
import java.net.DatagramPacket;  
import java.net.DatagramSocket;  
import java.net.SocketException;  
import android.os.Bundle;  
import android.app.Activity;  
import android.util.Log;  
import android.widget.Button;  
import android.widget.Toast;  

public class MainActivity extends Activity  
{  
public String text;  
public int serverport=1234;  
public byte[] message=new byte[1000];  
public Button b;  
public DatagramPacket p;  
public DatagramSocket s;  
public Toast t;  

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b=(Button) findViewById(R.id.button1);

                try {
                    p = new DatagramPacket(message,message.length);
                    s = new DatagramSocket(serverport); 
                    try {
                        s.receive(p);
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    text= new String(message,0,p.getLength());
                    Log.d("hello","the message:"+text);
                    s.close();
                // TODO Auto-generated method stub

    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

}   
}
                public void showmsg()
                {
                    t=Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG);
                    t.show();
                }  
}  

SERVER SIDE: (on pc)  

import java.io.*;  
import java.net.*;  
class serversend  
{  
public static void main(String args[]) throws Exception  
  {
String strmsg="Server says hello";
int serverport=1234;
int len=strmsg.length();
System.out.println("starting");
byte[] message=strmsg.getBytes();
try{
InetAddress local=InetAddress.getByName("localhost");
DatagramSocket s=new DatagramSocket();
DatagramPacket p=new DatagramPacket(message,len,local,serverport); 
System.out.println("Running");
s.send(p);
System.out.println("Sent");
}catch(Exception e)
{
  System.out.println("caught");
} 
  }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:01:32.713

有许多示例可以帮助您使用 UDP 在服务器和客户端之间进行通信，在这两者之间进行通信应该在服务器端添加客户端端口

```
InetAddress local = InetAddress.getByName("192.168.1.102"); 
```

这是使用 UDP 的客户端服务器通信的以下链接 [LINK UDP1](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/) [链接 UDP2](http://www.cs.uic.edu/~troy/spring05/cs450/sockets/socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T23:23:58.500

Android 3.0 之后的版本不允许您在主 UI 线程中实现网络操作。你必须为此定义一个新的线程......这是你可以做到的：

```
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

          //here you Set up you parameters and launch the thread (e.g):

          this.newThread = new Thread(new mThread());
      this.newThread.start();

      /* Next you define your newThread's run method in wich all networking 
         operations must take place*/

   class mThread implements Runnable {
        public void run() {

      // Do all networking tasks you need                                               

           }
        } 
```

# r - 在R中扫描没有空格？

> ID：14133447
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:17:12.217
> 
> 标签：r

如何为 R 扫描 .txt 中的单个字符？据我了解，扫描使用空格作为分隔符，但如果我想使用空格作为在 R 中扫描的东西，我该怎么做？

即（我想扫描字符串“Hello World”）我如何得到 H,e,l,l,o, ,W,o,r,l,d ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:58:38.003

`strsplit`也将成为您的朋友：

```
test <- readLines(textConnection("Hello world
Line two"))
strsplit(test,"")

> strsplit(test,"")
[[1]]
 [1] "H" "e" "l" "l" "o" " " "w" "o" "r" "l" "d"

[[2]]
[1] "L" "i" "n" "e" " " "t" "w" "o" 
```

并且按照@Thilo 的建议未列出...

```
> unlist(strsplit(test,""))
 [1] "H" "e" "l" "l" "o" " " "w" "o" "r" "l" "d" "L" "i" "n" "e" " " "t" "w" "o" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:30:46.030

我将采用两步方法：首先将文件作为纯文本读取`readLines`，然后将单行拆分为字符向量：

```
lines <- readLines("test.txt")
characterlist <- lapply(a, function(x) substring(x, 1:nchar(x), 1:nchar(x))) 
```

请注意，这种方法不会返回格式良好的矩阵或 data.frame，而是返回一个列表。

根据您要执行的操作，可能会有一些不同的修改：

```
unlist(characterlist) 
```

为您提供一行中所有字符的向量。如果您的文本文件表现得非常好，以至于每行中的字符数完全相同，您可能只需添加并`simplify=T`希望`lapply`得到您的字符矩阵。

# c# - c#中如何打印表单

> ID：14133449
> 
> 赞同：0
> 
> 时间：2013-01-03T05:17:35.983
> 
> 标签：c#, xml, winforms, printing, teechart

我正在使用带有 C# 的 teecharts，我想将生成的图形打印为 pdf。有没有人有任何建议最好是免费的？这是一个使用表单的桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:14:21.270

是的，这是可能的，因为 TeeChart 包括 PDF 导出：

```
 tChart1.Export.Image.PDF.Save(fileName); 
```

有关更多导出选项，请查看教程 12。教程可以在 TeeChart 的程序组中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:37:50.253

您可以使用 devloper express 图表。它将数据从图表导出到不同类型的文件。

```
if (chartControl1.IsPrintingAvailable)
{
  // Exports to a PDF file.
  chartControl1.ExportToPdf("Output.pdf");
} 
```

**[参考：XtraCharts](http://documentation.devexpress.com/#XtraCharts/CustomDocument2506)**

**[使用向导创建图表](http://documentation.devexpress.com/#XtraCharts/CustomDocument5913)**

# networking - WebSocket 协议位于哪个 OSI 层？

> ID：14133452
> 
> 赞同：24
> 
> 时间：2013-01-03T05:17:52.093
> 
> 标签：networking, osi

我想知道它是否是 websocket 的第 7 层，因为应用程序实际上是浏览器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-24T14:50:45.697

Websocket 依赖于 TCP (OSI#4)，只有握手阶段由 HTTP (OSI#7) [1](https://www.rfc-editor.org/rfc/rfc6455#section-1.7)初始化。虽然它只使用 TCP 端口 80。

根据运行时的行为，不得不说WebSocket应该是一个特殊的OSI#7协议。然后我们可以将 SSL/TLS 放入 OSI#6（参见维基百科），并将浏览器内部的实现放入 OSI#5。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-02T03:02:02.053

It is better to understand the layer using TCP/IP model rather than OSI model. WebSocket layers on top of TCP, considered as transport layer in TCP/IP model, and one can layer application layer protocol on top of WebSocket.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T03:08:46.983

HTTP、SSL、HTTPS、WebSockets等都是应用层协议。

但是 OSI 协议栈不适用于 TCP/IP，它有自己的层模型：相同的名称，不同的功能。继续使用过时的 OSI 堆栈，就好像它实际上反映了任何现实一样，没有任何帮助。它没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-14T18:45:24.953

https 服务器仅通过升级请求解释握手。除此之外，Websocket 是独立的基于 TCP 的协议。所以我会说主机层#4 和#7。 [https://www.rfc-editor.org/rfc/rfc6455#page-11](https://www.rfc-editor.org/rfc/rfc6455#page-11)

# c++ - C++ 多个 c++ 文件 - ld：未找到架构 x86_64 的符号

> ID：14133459
> 
> 赞同：0
> 
> 时间：2013-01-03T05:18:58.257
> 
> 标签：c++, templates, linker, compiler-errors

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

当我将 Stack.cpp 放入 Stack.h 时，它工作得很好，但是当我分离 Stack.h,.cpp 文件时，它给出了这个错误。我还有一个 main.cpp 文件，它只包含 AlgebraicExpression.h 我使用此命令进行编译：“g++ -o main main.cpp AlgebraicExpression.cpp Stack.cpp”

```
Undefined symbols for architecture x86_64:   "Stack<char>::pop()", referenced from:
      infix2postfix(char*) in ccKgncmm.o   "Stack<char>::top()", referenced from:
      infix2postfix(char*) in ccKgncmm.o   "Stack<char>::push(char)", referenced from:
      infix2postfix(char*) in ccKgncmm.o   "Stack<char>::size()", referenced from:
      infix2postfix(char*) in ccKgncmm.o   "Stack<char>::Stack()", referenced from:
      infix2postfix(char*) in ccKgncmm.o   "Stack<double>::pop()", referenced from:
      evaluatePostfix(char*) in ccKgncmm.o   "Stack<double>::top()", referenced from:
      evaluatePostfix(char*) in ccKgncmm.o   "Stack<double>::push(double)", referenced from:
      evaluatePostfix(char*) in ccKgncmm.o   "Stack<double>::Stack()", referenced from:
      evaluatePostfix(char*) in ccKgncmm.o ld: symbol(s) not found for architecture x86_64 collect2: ld returned 1 exit status 
```

代数表达式.h

```
char* infix2postfix(char *infix);
double evaluatePostfix(char*); 
```

堆栈.h

```
#ifndef STACK_H
#define STACK_H

template <class T>
class Stack
{
public:
        Stack();
        void pop();
        T top();
        void push(T val);
        int size();

        T *values;
        int maxSize;
        int length;
};

#endif 
```

代数表达式.cpp

```
#include "AlgebraicExpression.h"
#include "Stack.h"
using namespace std;
bool isOperator(char c)
{
        if(c=='+' || c=='-' ||
                c=='*' || c=='/')
                return true;
        return false;
}

bool isDigit(char c)
{
        if(c=='0'||(c>='1'&&c<='9'))
                return true;
        return false;
}

int compareOperators(char c1,char c2)
{
        int v1,v2;
        if(!isOperator(c1) || !isOperator(c2))
                return -1;
        if(c1 == '*' || c1 =='/')v1 = 1;
        else v1 = 0;
        if(c2 == '*' || c2 == '/')v2 = 1;
        else v2 = 0;

        return v1-v2;
}

char *infix2postfix(char *infix)
{
        int lenIn,lenPost;
        for(lenIn=0,lenPost=0;infix[lenIn];++lenIn)
                if(infix[lenIn]!='('&&infix[lenIn]!=')')
                        ++lenPost;

        char *postfix = new char[lenPost+1];
        int i,j;
        Stack<char> operations;

        for(i=0,j=0;i<lenIn&&j<lenPost;++i)
                if(isDigit(infix[i]))
                        postfix[j++] = infix[i];
                else if(isOperator(infix[i]))
                {
                        while(operations.size()&&
                                compareOperators(operations.top(),infix[i])>-1)
                        {
                                postfix[j++] = operations.top();
                                operations.pop();
                        }
                        operations.push(infix[i]);
                }
                else
                {
                        if(infix[i] == '(')
                                operations.push(infix[i]);
                        else if(infix[i] ==')')
                        {
                                while(operations.size()&&operations.top()!='(')
                                {
                                        postfix[j++] = operations.top();
                                        operations.pop();

                                }
                                operations.pop();
                        }
                }
        while(operations.size())
        {
                postfix[j++] = operations.top();
                operations.pop();
        }
        postfix[j] = '\0';
        return postfix;
}

double evaluatePostfix(char *postfix)
{
        Stack<double> result;
        for(int i=0;postfix[i];++i)
                if(isDigit(postfix[i]))
                        result.push(postfix[i]-'0');
                else
                {
                        double n1,n2,r;
                        n1 = result.top();
                        result.pop();
                        n2 = result.top();
                        result.pop();
                        if(postfix[i] == '+')
                                r = n1+n2;
                        else if(postfix[i] == '-')
                                r = n2-n1;
                        else if(postfix[i] == '*')
                                r = n1*n2;
                        else if(postfix[i] == '/')
                                r = n1/n2;
                        result.push(r);
                }
        return result.top();
} 
```

堆栈.cpp

```
#include "Stack.h"
template <class T>
Stack<T>::Stack()
{
        maxSize = 100;
        length =0;
        values = new T[maxSize];
}

template <class T>
T Stack<T>::top()
{
        return values[length-1];
}

template <class T>
void Stack<T>::push(T val)
{
        if(maxSize==length)
        {
                T *temp = new T[length*2];
                for(int i=0;i<length;++i)
                        temp[i] = values[i];
                values = temp;
                maxSize = length*2;
        }
        values[length++] = val;
}

template <class T>
void Stack<T>::pop()
{
        if(length>0)
                length--;
}

template <class T>
int Stack<T>::size()
{
        return length;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T05:20:19.703

使用类**模板**，所有定义都需要在标题本身中。

[C++ FAQ](http://www.parashift.com/c++-faq/templates-defn-vs-decl.html)是一本很好的读物。

基本上，当一个模板类被实例化时，它需要能够看到类的整个定义而不仅仅是标题。

**如果您知道**您的类将使用的所有类型，则**可以使用所有这些类型实例化模板，**然后**将定义保留在 cpp**中，[如此 C++ FAQ 条目中所述](http://www.parashift.com/c++-faq/separate-template-fn-defn-from-decl.html)

如前所述，[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T05:37:33.210

如果你真的想分离模板头和实现文件，你可以包含`Stack.cpp`在底部`Stack.h`，它被称为`The Inclusion Model`

```
#include "Stack.cpp" 
```

查看参考： [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# python - 如何读取从 nginx 传递的 python/flask 中的 UWSGI 参数

> ID：14133460
> 
> 赞同：14
> 
> 时间：2013-01-03T05:19:00.170
> 
> 标签：python, nginx, flask, uwsgi

我设置了 python/flask/uwsgi+nginx 网络应用程序，它工作正常。我想用geoip，我在nginx端设置的：

```
 location / {
            include         uwsgi_params;
            uwsgi_pass      unix:/tmp/qbaka-visit.sock;
            ...
            uwsgi_param     GEOIP_COUNTRY_CODE $geoip_country_code;
    } 
```

但现在我不知道如何在 python 中读取这个属性。在 uwsgi 之前，我使用了简单的 flask builtin webserver + nginx proxy_pass，在这种情况下，我使用`proxy_set_header X-Geo-Country $geoip_country_code;` 并阅读了这个参数`request.headers`，但是对于 UWSGI 参数，我不知道如何阅读它们。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-03T05:27:29.683

`uwsgi_param`为应用程序设置一个给定名称的 wsgi`environ`键。您可以将其用于标头，它遵循使用`HTTP_`前缀的 CGI 约定。相当于你的`proxy_set_header`将是：

```
uwsgi_param HTTP_X_GEOIP_COUNTRY $geoip_country_code; 
```

请注意，标头名称必须为大写并用下划线替换破折号，才能被识别为 wsgi 中的有效标头。

或者，看起来环境可以在烧瓶中访问，因为`request.environ`，所以你可以保持你的 uwsgi_param 相同，但将它读为`request.environ['GEOIP_COUNTRY_CODE']`. 实际上，这可能更可取，因为您可以通过这种方式将它们与实际的请求标头区分开来。

# python - 如何指定 ANTLR AST 节点类型？

> ID：14133470
> 
> 赞同：0
> 
> 时间：2013-01-03T05:20:21.123
> 
> 标签：python, antlr

我想使用 ANTLR 生成一个可以手动行走的 AST（使用手写的访问者代码而不是 ANTLR 的树语法。）假设我有以下语法

```
expr    : term ( ( PLUS | MINUS )^  term )*;

term    : factor ( ( MULT | DIV )^ factor )* ;

factor  : NUMBER 
```

当且仅当有一个运算符（加号、减号、次或除号）被匹配时，我都希望`expr`生成`term`具有类型的 AST 节点，否则生成一个普通的节点。我知道我可以附加一个类似的动作，但这似乎是一个 hack。有更好的方法吗？使用 ANTLR 为手动遍历的树生成解析器是个坏主意吗？`BinaryExpression``NUMBER``$type = "BINARYEXPRESSION"`

**编辑：**

我试过了

```
expr    : term ( ( PLUS<BinaryExpression> | MINUS<BinaryExpression> )^  term )*; 
```

但是a）这似乎根本没有任何影响（产生的节点仍然是CommonTree和CommonToken的实例），并且b）为了节省重复，我希望这种类型应用于由给定构造的整个节点规则，而不是将类型应用于当前规则的子节点。即我不应该把`<Identifier>`所有有标识符的规则都作为孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:36:37.257

典型的语法是[`Terminal<ASTNodeType>`](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction#Treeconstruction-heterogeneous)（点击查看），但由于您使用的是 Python 目标，因此您必须验证这一点。

# c# - 按类别筛选 Outlook 约会

> ID：14133471
> 
> 赞同：6
> 
> 时间：2013-01-03T05:20:29.190
> 
> 标签：c#, internationalization, outlook, outlook-2010, mapi

我编写了这段代码来查找指定时间范围内指定类别的所有约会的总持续时间：

```
private readonly MAPIFolder _timing;

private int CalculateTotalDuration(DateTime start, DateTime end, string category)
{
    string filter = String.Format(
        "([Start] >= '{0:g}') AND ([End] <= '{1:g}') AND ([Categories] = '{2}')",
        start, end, category);
    return _timing.Items.Restrict(filter).Cast<AppointmentItem>().
        Sum(appt => appt.Duration);
} 
```

此代码在与俄文版 Outlook 一起使用时会导致以下异常（虽然我没有使用英文版对其进行测试）：

```
System.Runtime.InteropServices.COMException was unhandled
  Message=Условие неверно.
  Source=Microsoft Outlook
  ErrorCode=-2147352567
  StackTrace:
       at Microsoft.Office.Interop.Outlook._Items.Restrict(String Filter)
       ... 
```

当我替换`[Categories]`为`[Категории]`，即

```
string filter = String.Format(
    "([Start] >= '{0:g}') AND ([End] <= '{1:g}') AND ([Категории] = '{2}')",
    start, end, category); 
```

它适用于俄语版本的 Outlook。但显然它不适用于其他语言。

如何以多语言方式按类别筛选 Outlook 约会？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:02:38.040

尝试使用 SQL 查询（*在查询前加上“@SQL=”*）并为类别使用 DASL 名称 -`http://schemas.microsoft.com/mapi/string/{00020329-0000-0000-C000-000000000046}/Keywords/0x0000101F`或`urn:schemas:mailheader:keywords`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T07:21:55.000

我想出了以下适用于我的 DASL 过滤器：

```
var filter = String.Format(
    "@SQL=(\"urn:schemas:calendar:dtstart\" >= '{0:g}' " +
    "AND \"urn:schemas:calendar:dtend\" <= '{1:g}' " +
    "AND \"urn:schemas-microsoft-com:office:office#Keywords\" LIKE '%{2}%')",
    start, end, category); 
```

实际上我已经使用 DASL 查询生成器构建了它：

![查询生成器](../Images/1704ddb2527b8af0491ecafc93d35882.png)

为了显示查询生成器选项卡，我在**HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Outlook中创建了****QueryBuilder**键，如此[处](http://msdn.microsoft.com/en-us/library/office/cc513841%28v=office.12%29.aspx)所述。

 **感谢建议使用 DASL的[Dmitry 。](https://stackoverflow.com/users/332059/dmitry-streblechenko)**

# jquery - 当使用 https 而不是 http 时 JSONP 请求失败

> ID：14133484
> 
> 赞同：20
> 
> 时间：2013-01-03T05:22:10.387
> 
> 标签：jquery, api, google-app-engine, jsonp

我有一个 API 客户端，它使用 JQuery 发出 JSONP 请求。当这个 API 客户端不使用 SSL 时一切正常，但是在使用 SSL 时会失败。

例如，我有一个 URL **http://apiclient.com**，并且我正在从该域发出以下 JSONP 请求：

```
$.ajax({
    url: url,
    dataType: "jsonp",
    contentType: "application/json; charset=utf-8",
    success: function(data)
    {
        $.each(data.services, function(index, service) {
            processService(service);
        });
    }
}); 
```

我看到向 url 中指定的 API 主机发出了适当的请求，并且**成功**调用了回调函数，并将正确格式化的数据传递给它。

但是，当我将 API 客户端的上述 URL 更改为**https://apiclient.com**时，在 API 主机上没有观察到任何请求。我在日志的任何一侧都没有看到错误。

注意：唯一的区别是API 客户端上的**http**到**https 。**

使用 https 域时是否需要以不同方式处理 JSONP 请求？

谢谢。

编辑：此问题仅在 Chrome 中观察到。它适用于 Firefox 和 Safari。但是，我在 FireFox 上收到了一个快速警告，询问我即将从加密站点发出未加密的请求。我允许它，再也没有看到警告。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T17:29:02.850

找到了解决方案。问题是 JQuery 和其他资源是从非安全站点导入的。解决方案是从 https 引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:17:45.110

对于 http 和 https 的 JSONP 请求应该没有任何不同。

试试我们的 .getJSON：

```
$.getJSON(url, function(data) {
  $.each(data.services, function(index, service) {
        processService(service);
    });
}); 
```

使用 jQuery.ajax() 会导致跨浏览器问题，但 jQuery.getJSON() 不会出现这种情况。查看 jQuery 网站了解更多信息：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这个问题有类似的帖子：[JSONP To Acquire JSON From HTTPS Protocol with JQuery](https://stackoverflow.com/questions/3780702/jsonp-to-acquire-json-from-https-protocol-with-jquery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T06:58:29.173

更改协议与更改 URL 的任何其他部分的效果相同——它会触发违反同源策略并强制您进入跨域模式。如果您已经可以使用跨域访问，它将继续使用 https 以及使用 http。

例如，您可以使用 getJSON

```
$.getJSON('ajax/test.json', function(data) {
  $('.result').html('<p>' + data.foo + '</p>'
    + '<p>' + data.baz[1] + '</p>');
}); 
```

检查完整的 getJSON 文档[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

我错了吗...使用 Juqery.ajax 会导致跨浏览器问题，但不会导致 Jquery.getJSON

[http://docs.jquery.com/Release:jQuery_1.2/Ajax#Cross-Domain_getJSON_.28using_JSONP.29](http://docs.jquery.com/Release:jQuery_1.2/Ajax#Cross-Domain_getJSON_.28using_JSONP.29)

这里是一个跨域获取 JSON 的例子

firefox 的 HTTPS 有问题，我知道如果您像这样发送请求，它将被修复

```
$.getJSON('ajax/test.json',{}, function(data) {
  $('.result').html('<p>' + data.foo + '</p>'
    + '<p>' + data.baz[1] + '</p>');
}); 
```

使用jquery[的 AJAX https POST 请求在 Firefox 中失败](https://stackoverflow.com/questions/597073/ajax-https-post-requests-using-jquery-fail-in-firefox)

我希望这有帮助

# android - android中的XML编码

> ID：14133489
> 
> 赞同：0
> 
> 时间：2013-01-03T05:22:40.797
> 
> 标签：android, character-encoding

我用俄语单词阅读 XML：

```
xpp = factory.newPullParser();
            file = new File(getFilesDir()+"/shops.xml");
            fis = null;
            fis = new FileInputStream(file);
            xpp.setInput(new InputStreamReader(fis));
            eventType = 0;
            eventType = xpp.getEventType();
            do 
            {
                 if (eventType == XmlResourceParser.START_TAG) 
                 {
                     String strName = xpp.getName();
                     if (strName.equals("Shop")) 
                     {
                         String nameSh = xpp.getAttributeValue(null, "name");
                         Shops.add(nameSh);
                     }
                 }
                 eventType = xpp.next();
             }
            while (eventType != XmlResourceParser.END_DOCUMENT); 
```

UTF 格式的文件 - 但是当我在对话框中显示字符串数组时，我无法读取这些单词。

```
protected Dialog onCreateDialog(int id) {
        AlertDialog.Builder adb = new AlertDialog.Builder(MainActivity.this);
          adb.setTitle(R.string.items);
          String[] Shopsx=new String[Shops.size()];
          for(int k=0;k<Shops.size();k++)
          {
              Shopsx[k]=Shops.get(k);
          }
          adb.setSingleChoiceItems(Shopsx, -1, myClickListener);
          adb.setPositiveButton(R.string.ok, myClickListener);
          return adb .create();
      } 
```

我的 XML：

```
<?xml version='1.0' encoding='Utf-8' ?>
<Shops>
 <Shop name="Первый" ></Shop>
 <Shop name="Второй"></Shop>
 <Shop name="Третий"></Shop>
</Shops> 
```

我希望看到带有 3 个复选框（Первый、Второй、Третий）的列表，但看到带有黑色菱形的列表。如果在xml英文单词中使用，查看是可以的。能不能帮忙找一下，有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:27:03.123

我的操作系统是 Mac OS x，默认情况下我在 TextEdit 中编辑文件。我设置了 Sublime Text 2 并将 shop.xml 保存为 utf-8，然后将其推送到 DDMS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:08:57.997

我认为您的编码应该是`utf-8`而不是`Utf-8`. 试试看，看看你会怎么做。

# javascript - 如何设置 iframe src 属性

> ID：14133498
> 
> 赞同：0
> 
> 时间：2013-01-03T05:24:02.203
> 
> 标签：javascript, html, iframe

有人可以解释我如何通过 javascript 在 iframe 中更改/设置 src 属性吗？我用`document.getElementById().innerHTML`，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T05:26:19.737

做：

```
document.getElementById('your_iframe_id').src = "some_location"; 
```

innerHTML 为您提供内部 html 内容，而不是 iframe 的 src 属性

# php - 使用 onclick 发布变量？

> ID：14133502
> 
> 赞同：1
> 
> 时间：2013-01-03T05:24:47.277
> 
> 标签：php, html

如何通过单击链接从一个页面到另一个页面 $_POST 信息？没有表单或提交框，只要最终用户点击一个链接，它就会在打开的链接中发布相关信息。

伪代码，但是：

```
//On first page
<a href="./page.php" onclick="post" value="var">Click me!</a>
...
//On the page the above links to
$variable = $_POST["var"]; 
```

我考虑的是以下内容，虽然不那么漂亮，但有效。我想要它，所以它是一个帖子而不是一个获取。

```
//On first page
<a href="./page.php?var=<?php echo $variable; ?>">Click me!</a>
...
//On second page
$variable = $_GET["var"]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T05:53:43.153

**试试这个 ：**

```
<a href="link.php" class="post">submit content using link</a>

 <script type="text/javascript">
            jQuery(document).ready(function($){
                $(".post").on("click",function(){
                    $.ajax({
                        url: "http://www.yourwebsite.com/page.php",
                        type: "POST",
                        data: { name: "John", location: "Boston" },
                        success: function(response){
                              //do action  
                        },
                        error: function(){
                              // do action
                        }
                    });
                });
            });
        </script> 
```

**[参考链接](http://api.jquery.com/jQuery.ajax/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T05:26:29.737

不知道你为什么不这样做：

//在第一页

```
<a href="./page.php?var=value">Click me!</a> 
```

... //在上面链接的页面上

```
$variable = $_GET['var']; 
```

**更新：**

根据您的上述评论：

> GET 显示 URL 中的信息，而 POST 则不显示。我不希望最终用户只使用他们想要的任何值来编辑 URL。@popnoodles，当用户单击超链接时，它将指向一个新页面。– 里斯塔

*出于安全*原因，您尝试这样做，因为这**两种**方法都不是使用 GET 的好方法，或者 AJAX*都不*安全，因为*两者都*可以被篡改。您需要重新考虑要保护的内容以及如何检查提交的数据是否有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T05:36:26.270

在 GET 和 POST 之间进行选择很简单

*   POST 应该用于修改服务器的状态。
*   所有其他情况都适用于 GET

因此，您必须在您的情况下使用 GET，而不是 POST。
安全问题在这里无关紧要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T05:29:46.920

添加单击事件侦听器并将请求发送到另一个页面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-23T23:28:04.047

您将需要将您的“选择”包装在一个表单中并使用这样的按钮..

```
<style type="text/css">
/* just styling the overall menu */
#my-post-link ul{
  list-style-type:none;
  text-align:center;
  background-color:cadetblue;
  font-size:1.1em;
  font-weight:600;
  padding:0.45em;
  line-height: 1.75em;
}
/* following line would allow you to create a horizontal menu */
#my-post-link ul li{display:inline;white-space:nowrap;} 
#my-post-link button {
  background-color: transparent; /* <-- removes the gray button */
  border: none; /* <-- removes the border around the button */
  color: white;
  font-size: 1.15em;
  font-weight: 600;
}
#my-post-link button:hover {
  background-color: white;
  color: cadetblue;
  cursor: pointer; /* <-- makes the button text act like a link on hover */
}
</style>
<form id="myForm" name="myForm" method="post">
  <div id="my-post-link"><ul>
    <li><button name="select-me" type="submit" value="var" onclick=\"myForm.action='./page.php';return true;\">Click me!</li>
  </ul></div>
</form> 
```

这将使用键“select-me”将值“var”发布到 page.php，因此您可以使用...读取该变量

```
$variable = $_POST["select-me"]; 
```

您还可以使用伪类进一步设置按钮的样式，以使它们的行为更像常规文本链接，但我认为您明白了。

如果您想查看哪些变量正在 POST 回您的页面，您可以将此代码放在某处：

```
foreach ($_POST as $key => $value) {
  $i++;
  ${$key} = $value;
  echo "<!-- //[{$i}] {$key}:{$value} -->\n";
} 
```

您还可以使用 var_dump($_POST) 查看 POST 数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-09T07:02:57.380

你也可以

```
$.get('./page.php?param=true&data=1', function(data){$('#content').append(data);}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-18T01:10:02.933

假设您想单击一个链接以注销，并且您希望通过更安全的 post 方法进行注销。你可以这样做。

```
<a class="nav-link" href="logout.php" data-method="post">Logout (John)</a> 
```

只需将 data-method="post" 添加到链接属性即可。

# c++ - 对其资源使用源代码控制的 c++ 编译器

> ID：14133503
> 
> 赞同：0
> 
> 时间：2013-01-03T05:24:47.570
> 
> 标签：c++, compiler-construction

是否存在诸如源代码控制编译器之类的东西，它会根据您指定的第三方存储库将必要的文件拉入本地存储库并将其传递给链接器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:17:43.417

您正在寻找构建自动化系统。构建系统包含从源代码控制中提取代码、调用其他程序（如编译器和链接器）、执行测试等元素。您可以自己使用 shell 脚本编写一个基本的构建自动化系统。还可以看看 Maven、Ant、Hudson 等工具。

# mysql - 在保存到数据库之前将日期数据转换为正确的日期时间格式？

> ID：14133504
> 
> 赞同：1
> 
> 时间：2013-01-03T05:24:55.197
> 
> 标签：mysql, ruby-on-rails, ruby, screen-scraping

我经常从网站上抓取一些过时的数据并将其存储到 Rails 应用程序中，但网站上给出的日期采用以下格式：

```
11/25/2012 01 
```

这是日期和时间。

我需要编写一些代码将其转换为默认的 DateTime 格式：

```
YYYY-MM-DD HH:MM:SS 
```

但我是 Ruby 的新手。

这是我目前使用 Nokogiri 抓取包含日期的元素并提取文本的代码，也许你可以以此为基础：

```
datedata = tr.css('td')[0].text 
```

这会刮取日期表行并提取文本。例如，`datedata = "11/25/2012 01"`

有没有一种方法可以转换`datedata`为默认的 DateTime 格式以保存到数据库中？仅供参考 - 小时是唯一给出的时间，它们是我的用例的必要数据，没有分钟或秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:35:33.987

您可以使用[`DateTime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)'[`strptime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)功能

```
[1] pry(main)> DateTime.strptime("11/25/2012 01", "%m/%d/%Y %H")
=> Sun, 25 Nov 2012 01:00:00 +0000 
```

这应该足以传递给 ActiveRecord，但如果您想将其转换为您在问题中提到的 SQL 日期时间字符串，您可以使用[`to_formatted_s`](http://api.rubyonrails.org/classes/DateTime.html#method-i-to_formatted_s)带有`:db`选项的 Rails。

```
[2] pry(main)> DateTime.strptime("11/25/2012 01", "%m/%d/%Y %H").to_formatted_s(:db)
=> "2012-11-25 01:00:00" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:17:53.373

我会使用慢性：

```
require 'chronic'
datedata = "11/25/2012 01"
Chronic.parse datedata
#=> 2012-11-25 13:00:00 0800 
```

嗯，那个 13:00 好像不对，我们试试：

```
Chronic.parse "#{datedata}:00"
#=> 2012-11-25 01:00:00 0800 
```

这样更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T07:35:47.883

一点提示。当你的用户从不同的时区输入日期时，你会随着时间的推移得到一些令人作呕的错误。我使用的通用规则：在您的数据库中以 UTC 存储时间。很简单：时间对象有`.utc`方法。用户应该有他的时区设置，因此可以很容易地计算用户的本地偏移量。

# python - 在墨盒订单中从管理员发送电子邮件

> ID：14133505
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:25:02.207
> 
> 标签：python, django, django-models, django-templates, cartridge

我正在**为我的商店使用带有 django 的墨盒，**当我从管理员更改订单状态时，我**想**从**管理员**发送电子邮件！![发送电子邮件](../Images/743bbf9c2adfa4edc678622145c04e63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:22:25.693

是的，在**订单状态**上没有与**墨盒管理员****捆绑的电子邮件功能**

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:28:13.657

听起来您需要查看 Django 文档以[覆盖模型上的保存方法](https://docs.djangoproject.com/en/1.4/ref/models/instances/#saving-objects)。

然后检查 Django 文档以[发送电子邮件](https://docs.djangoproject.com/en/1.4/topics/email/)。

（这是假设 Cartridge 没有捆绑电子邮件功能 - 我不知道 Cartridge 并且不能立即告诉 - 显然你可以通过阅读[文档](http://cartridge.jupo.org/index.html)来确认这一点）****

# pan - windows phone 如何在页面上显示完整的一个全景项目，我不想要第二个项目的某些部分

> ID：14133508
> 
> 赞同：0
> 
> 时间：2013-01-03T05:25:02.997
> 
> 标签：pan

我正在创建 WP7 应用程序。带全景项目。我面临问题。我想在屏幕上显示完整的全景项目（页面）。默认情况下，它显示第二页的某些部分。我不想要第二个项目的某些部分。怎么可能。兄弟，西德赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T23:05:11.317

This is part of the Windows Phone design principle. I don't know if you can take it off or not, but don't. It's what makes Windows Phone different, and the Panorama control is all about showing off this design.

# java - 如何从 ArrayList 中删除不需要的元素？

> ID：14133513
> 
> 赞同：-2
> 
> 时间：2013-01-03T05:25:26.810
> 
> 标签：java, arraylist

我有一个带有值的数组列表

```
ArrayList<String> HexValues = new ArrayList<String>();

    HexValues.add("a");
    HexValues.add("b");
    HexValues.add("f");
    HexValues.add("1");
    HexValues.add("4");
    HexValues.add("0");
    HexValues.add("31");
    HexValues.add("32");
    HexValues.add("37");
    System.out.println("The content of HexValues is: " + HexValues);

    int start = HexValues.lastIndexOf("f");

    if (start != -1) {
        List<String> HexValuesEnd = HexValues.subList(start, HexValues.size());

        System.out.println("The content of HexValuesEnd before leaving is: " + HexValuesEnd);
        if (HexValuesEnd.size() > 0) {               

            HexValuesEnd.remove(1);
            HexValuesEnd.remove(2);
            HexValuesEnd.remove(3);
            System.out.println("The content of HexValuesEnd after removing values at indexes 1 ,2,3: " + HexValuesEnd);
        }
    } 
```

输出是

```
The content of HexValues is: [a, b, f, 1, 4, 0, 31, 32, 37]
The content of HexValuesEnd  before leaving is: [f, 1, 4, 0, 31, 32, 37]
The content of HexValuesEnd after removing values at indexes 1 ,2,3: [f, 4, 31, 37] 
```

但第二个数组列表中的预期值应该是

```
"The content of HexValuesEnd after removing values at indexes 1 ,2,3: " [f,31,32,37] 
```

我哪里错了才能得到预期的结果..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T05:32:59.427

当您删除其中一个值时，它后面的值将被移动以填补空白。

你的意思是

```
remove(1);
remove(1);
remove(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:36:18.807

是因为之后

```
HexValuesEnd.remove(1); 
```

数组列表是

[f, 4, 0, 31, 32, 37]

现在它执行

```
HexValuesEnd.remove(2); 
```

所以你得到

[f, 4, 31, 32, 37]

以此类推……

你需要做的是

```
HexValuesEnd.remove(1);
HexValuesEnd.remove(1);
HexValuesEnd.remove(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:33:47.930

你有过`[f, 1, 4, 0, 31, 32, 37]`

然后你在索引 1 处删除并得到`[f, 4, 0, 31, 32, 37]`

然后索引 2：（`[f, 4, 31, 32, 37]`索引 2`0`在第一次删除后在列表中）

等等。

请记住，删除会更改列表。

似乎您想删除索引`1`3 次：

```
HexValuesEnd.remove(1);
HexValuesEnd.remove(1);
HexValuesEnd.remove(1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:37:41.433

尝试

```
 if (HexValuesEnd.size() > 0) {               
                HexValuesEnd.remove(1);
                HexValuesEnd.remove(1);
                HexValuesEnd.remove(1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T05:41:29.190

最简单的方法是使用支持过滤器的高阶方法的函数式编程库。我知道 Apache-commons、Guava 和 lambdaJ 都支持过滤器。

下面是一些关于 synatx 的 sudo 代码：

```
Predicate predicate = new Predicate(){{
    public boolean evaluate(Object object){
     // If statement comparison goes here
    }
}};
filter(HexValuesEnd, predicate); 
```

由于这是本机 Java，因此您需要创建一个谓词对象来对集合中的每个元素进行检查，并且每个库都有自己的执行方式。

Apache-commons 和 Gauva 有自己的谓词对象，而 lambdaJ 构建在 hamcrest 之上并使用它的匹配器作为谓词对象。

除了小的、高度可读的代码之外，还有一个额外的好处是这些库应该具有内置的并发优化，因此如果您想提高性能，就不必处理线程。

还要小心.remove，如果你在一个循环中使用它，你会很糟糕。如果您想使用迭代方法从集合中删除元素，请尝试使用迭代器。

# web-services - AJAX 调用 POST 方法

> ID：14133517
> 
> 赞同：0
> 
> 时间：2013-01-03T05:25:40.487
> 
> 标签：web-services, jquery

我正在尝试使用 AJAX CALL 调用我的 Web 服务。但是我在我的萤火虫工具中遇到了不支持的媒体类型错误。

但它在 Rest-client Jar 中运行良好。下面是我的代码。

```
 $.ajax({
                type: "POST", //GET or POST or PUT or DELETE verb
                url: "http://localhost:8888/taxi/add/driver", // Location of the service
                data: {"firstName":"ttt","lastName":"gggg","gender":null}, //Data sent to server                            
               //contentType: "application/json", // content type sent to server
                //dataType: "json", //Expected data format from server
                //processdata: true, //True or False
                success: function (json) {//On Successfull service call
                    //shell.loaded();
                    alert("cross domain ajax success full.");

                   var result = json.firstName;

                    //alert("result===" + json.length);
                    //alert("result===" + json.data.length);
                    alert("result===" + result);
                    $("#dvAjax").html(result);
                },
                error: ServiceFailed// When Service call fails
            });

            return false;
        });

    });

    function ServiceFailed(xhr) {
        alert(xhr.responseText);
        //if (xhr.responseText) {
           // var err = xhr.responseText;
            //if (err)
               // error(err);
            //else
                error({ Message: "Unknown server error." })
        //}
        return;
    } 
```

请指出我犯的错误在哪里。提前致谢。

问候卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:35:42.820

你得到什么错误？响应来自哪里？它是成功还是错误
你应该指定`dataType:'json'`

# sql - 基于多联合中的一列的不同行

> ID：14133520
> 
> 赞同：1
> 
> 时间：2013-01-03T05:26:07.397
> 
> 标签：sql, sql-server, sql-server-2008, distinct, union

我正在努力构建一个基于 4 个表的分层菜单。在进行研究之后，我能想到的唯一解决方案是与 UNION 一起做，到目前为止我很接近，但我仍然没有得到想要的结果。

4 我正在使用的表是

1.  以 PageID 为 PK 的页表*（其中包含 cms 的实际页面）*
2.  PageID 为 FK 的文章表*（有文章）*
3.  PageID 为 FK 的文章分类表*（该表有文章分类）*
4.  以 PageID 为 FK 的*杂志表（杂志表保存杂志信息）*

[我必须根据对与此问题直接相关的上一个问题](https://stackoverflow.com/questions/14121623/how-to-create-hierarchical-menu-from-different-table-based-on-sample-database-st)提出的一些建议对我的数据库进行一些更改，上一个问题包含有关数据库的详细信息。

我需要这些列`PID, MENU, Handler,PageLangID, ParentID,IssueID, CatID,MenuPosition` 来创建我的分层菜单我在下面写了我需要的列，但我无法在菜单上运行 DISTINCT，因此我将只获得唯一行并基于该结果集我可以创建我的菜单。

当我尝试添加`DISTINCT (Menu)`它时会产生语法错误。

根据我在[上一个问题](https://stackoverflow.com/questions/14121623/how-to-create-hierarchical-menu-from-different-table-based-on-sample-database-st)中提到的要求，我不确定这种方法是否可行，或者我应该采取其他一些不模棱两可或更专业的方法

**询问**

```
 SELECT PID, MENU, Handler, PageLangID, ParentID,IssueID, CatID, MenuPosition 
FROM (
    --Pages Table 
    SELECT PageId AS PID,SUBSTRING(PageName,0,20) AS MENU,SUBSTRING(PageInternalLinkURL,0,24) AS Handler, PageLangID,PageInheritance AS ParentID, 1 AS IssueID, 1 AS CatID, 
            PageLinkPosition as MenuPosition  FROM pg_Pages  WHERE PageLangID = 1
    UNION
    --Article Table
    SELECT p.PageID as PID, SUBSTRING(c.ArticleCategoryName,0,20) AS MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler,LanguageID,p.PageID  AS ParentID,IssueID,c.ArticleCategoryID AS CatID,
           1 AS MenuPosition FROM art_Articles a JOIN art_Category  c ON a.ArticleCategoryID = c.ArticleCategoryID JOIN pg_pages p ON p.PageID = a.PageID    WHERE LanguageID =1  
    UNION
    --Article Category Table
    SELECT p.PageID AS PID, SUBSTRING(c.ArticleCategoryName,0,20) AS MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler, LangID,p.PageID,1, ArticleCategoryID,
          1 AS MenuPosition FROM art_Category c JOIN pg_Pages p ON c.PageID = p.PageID WHERE LangID =1  
    UNION
    --Magazine Table
    SELECT p.PageID AS PID, CAST(IssueCode AS varchar(10)),SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler,LangID,p.PageID AS ParentID, m.IssueID AS IssueID, 1, 
           1 AS MenuPosition FROM Magazine m   JOIN pg_pages p ON m.PageID = p.PageID   WHERE LangID =1   
    ) AS T  WHERE T.PageLangID = 1 ORDER BY MenuPosition 
```

**输出**

```
PID         MENU                 Handler                  PageLangID  ParentID    IssueID     CatID       MenuPosition
----------- -------------------- ------------------------ ----------- ----------- ----------- ----------- ------------
5           Book Review          Articles.aspx            1           5           5           18          1
5           Business             Articles.aspx            1           5           5           16          1
5           Group News           Articles.aspx            1           5           5           6           1
5           Infrastructure       Articles.aspx            1           5           5           17          1
5           Politics             Articles.aspx            1           5           1           1           1
5           Politics             Articles.aspx            1           5           3           1           1
5           Politics             Articles.aspx            1           5           4           1           1
5           Politics             Articles.aspx            1           5           5           1           1
6           Book Review          Article-Category.aspx    1           6           1           18          1
6           Business             Article-Category.aspx    1           6           1           16          1
6           Chairman's Message   Article-Category.aspx    1           6           1           9           1
6           Culture              Article-Category.aspx    1           6           1           3           1
6           Economy              Article-Category.aspx    1           6           1           2           1
6           Editorial Message    Article-Category.aspx    1           6           1           8           1
6           Finance              Article-Category.aspx    1           6           1           19          1
6           Group News           Article-Category.aspx    1           6           1           6           1
6           Habtoor Leighton Gr  Article-Category.aspx    1           6           1           5           1
6           Infrastructure       Article-Category.aspx    1           6           1           17          1
6           Lifestyle            Article-Category.aspx    1           6           1           20          1
6           People               Article-Category.aspx    1           6           1           7           1
6           Politics             Article-Category.aspx    1           6           1           1           1
6           Sports               Article-Category.aspx    1           6           1           4           1
12          102                  Default.aspx             1           12          3           1           1
12          103                  Default.aspx             1           12          4           1           1
12          106                  Default.aspx             1           12          1           1           1
12          109                  Default.aspx             1           12          5           1           1
1           Home                 Default.aspx             1           0           1           1           10
11          Video                Videos.aspx              1           10          1           1           10
2           About Us             Page.aspx                1           0           1           1           20
5           Articles             Articles.aspx            1           0           1           1           20
6           Categories           Article-Category.aspx    1           0           1           1           25
3           News                 News.aspx                1           0           1           1           30
12          Archive              Default.aspx             1           0           1           1           40
10          Multimedia           Multimedia.aspx          1           0           1           1           60 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:06:28.690

您在外部选择语句中使用了 order by。按照不使用 distinct 语句的顺序，

因此，在子选择中执行 DISTINCT，在外部选择中执行 ORDER BY。

希望这将有助于解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:33:12.437

所有 SELECT 语句都需要 DISTINCT

```
SELECT DISTINCT PID, MENU, Handler, PageLangID, ParentID,IssueID, CatID, MenuPosition
... 
```

# java - 如何创建固定大小的 XML 文件？

> ID：14133522
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:26:14.143
> 
> 标签：java, xml, file, performance-testing

我想在 java 中创建一个固定大小（5 MB）的 XML 文件。

如何制作这个文件并写入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:55:55.253

写出，`<a>`后跟 4,999,993 个空格，后跟`</a>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:29:18.330

最初用空格填充标签填充文件（足够等于 5MB）：

```
<placeholder></placeholder> 
```

当您向文件添加记录时，删除空格填充标签并替换为记录：

```
<rec><key>a</key><val>2</val></rec> 
```

# python - python-twitter 检索所有关注者

> ID：14133523
> 
> 赞同：1
> 
> 时间：2013-01-03T05:26:14.860
> 
> 标签：python, python-twitter

我正在使用[python-twitter](http://code.google.com/p/python-twitter/)库，虽然我可以获取代码来检索“一组”结果，显然是在第一个“页面”中......我一生都找不到正确的代码来获取一组特定帐户/句柄的所有关注者。

我正在用这个剪辑...

```
target = sys.argv[1]

#returns a twitter.User instance for each follower
users = api.GetFollowers(target) 
print [u.screen_name for u in users] 
```

如果有人已经弄清楚了，我将不胜感激任何指示？

提前致谢。/拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:28:21.303

根据这个[补丁](http://code.google.com/p/python-twitter/issues/detail?id=20#c3)，我猜它已经被修复了。检查此[示例代码](http://code.google.com/p/python-twitter/issues/detail?id=20#c3)。

# asp.net - JQGrid，下拉菜单未添加默认值

> ID：14133525
> 
> 赞同：0
> 
> 时间：2013-01-03T05:26:26.790
> 
> 标签：asp.net, c#-4.0, jqgrid

下拉菜单忽略将默认行添加到列表

。CS

```
private const string DropDownListValue = "[All]";
private const string DropDownListText = "[All]";

 private void LoadProduct()
    {
        try
        {
            FieldGoalEntities objEntity = new FieldGoalEntities();

            IQueryable<Product> objProduct = from p in objEntity.Product
                                             select p;

            ddlProduct.Items.Clear();

            if (objProduct != null)
            {

                ddlProduct.DataSource = objProduct;
                ddlProduct.DataValueField = "ProductCode";
                ddlProduct.DataTextField = "ProductCode";
                ddlProduct.DataBind();
            }

            ddlProduct.Items.Insert(0, new ListItem(DropDownListText, DropDownListValue));
        }
        catch (Exception ex)
        {
            Common.LogEvent(Common.LoggingType.Error, "LoadProduct", ex.Message);
            Common.ShowMessageBox(this.Master, "Error", "Load Product Status: " +     ex.Message);
        }
    } 
```

//ASPX

//下拉框

我需要为过滤添加所有内容，但由于某种原因，如果我在 .CS 文件中进行数据绑定，它会忽略 [ALL]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:48:42.573

我应该`ddlProduct.DataBind();`在您将所有添加到`Items`列表后致电

```
if (objProduct != null)
{

    ddlProduct.DataSource = objProduct;
    ddlProduct.DataValueField = "ProductCode";
    ddlProduct.DataTextField = "ProductCode";

}

ddlProduct.Items.Insert(0, new ListItem(DropDownListText, DropDownListValue));
ddlProduct.DataBind(); 
```

# shell - 命令 wc 的功能

> ID：14133534
> 
> 赞同：1
> 
> 时间：2013-01-03T05:27:34.373
> 
> 标签：shell

这些天来，我使用非常棒的命令遇到了许多 shell 脚本。`wc`例如：

1.  例如，在过去 20 小时左右，有 16 个新用户注册了 FAS：
    `$ cat messages | grep \
    'fedora-infrastructure:org.fedoraproject.prod.fas.user.create'|wc -l
    16 /*output*/`

2.  `.`计算目录 中的代码行数

    `find . -type f -exec cat '{}' \; | wc -l`

我是 Linux 的新手，所以我现在想知道什么样的神奇东西`wc`可以做（有其他命令支持）**，不仅基本用法来自手册页**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:32:35.160

（**编辑**：听起来你可能会从了解[管道是什么以及它们如何工作中](http://www.cse.ohio-state.edu/~mamrak/CIS762/pipes_lab_notes.html)受益最多）

在你的命令行上试试这个：

```
man wc 
```

它为您提供了 的手册页`wc`，您可以在其中找到使用该工具可以执行的所有操作。

当你开始学习 Linux 时，这里有一些基本的习惯用法/心智模型：

*   `wc`是一种工具。有许多工具可以直接与您`[shell][2]`的.`ls``pwd``date``awk``sed``grep``tr`
*   `|`语法（但不是`||`！）称为“管道[”](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)：
    *   默认情况下，命令可以从`stdin`（[标准输入](http://en.wikipedia.org/wiki/Standard_streams)）读取或从文件读取，或者根本不需要读取任何内容（`ls`例如，不需要输入）
    *   所以当你做类似`ls | wc -l`的事情时，它实际上是在说：
        *   跑`ls`
        *   获取 的输出`ls`，通常会写入`stdout`（标准输出），然后将其直接“通过管道”传输到`stdin`of 中`wc`，它与 to 的`-l`选项一起`wc`计算行数。
*   `wc`由于 shell 语言中的管道和过滤器范例，没有可以与之交互的其他命令的详尽列表。任何你看到的东西`... | wc`，它只是意味着在 之前程序的任何输出都被`|`作为`wc`输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:13:15.787

Unix 工具被设计得非常简单，诸如此类的东西`wc`就是很好的例子。

# wc = 字数

# wc -l = 行数

在 unix 中，您可以使用以下命令将输出从一个命令定向到另一个命令`|`

这个想法是你将这些小工具组合在一起，以实现超出其个人能力的结果。

# 寻找

是一个非常强大的命令，有很多选项，但本质上是查找与指定的谓词和选项匹配的文件的文件名。

# 男人

`man`是一个内置在 unix 中的帮助系统，只需键入`man wc`以获取有关`wc`您可以将其用于命令行中可用的大多数命令的信息，只有少数例外。

# Zsh、抗原和 Oh-My-Zsh

Unix 有一个好的 shell 和有用的工具会容易得多。我建议您使用 Zsh，获得此设置的简单方法是使用[Antigen](https://github.com/zsh-users/antigen)和[Oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)（Antigen 将帮助安装 Oh-My-Zsh 和一堆其他工具，所以请按照它的说明进行操作。）

设置完成后，您将拥有 Tab 自动完成功能，显示命令、命令选项（对于许多工具，例如`git`,`find`等等...等等...）

这将很快将外壳的阴暗黑暗转变为充满活力的工作环境。

# 如何学习很酷的命令组合？

好吧，要开始使用，请始终记住您在 unix shell 上有可用的基本循环和条件。

*   循环

    *   [尽管](http://www.tutorialspoint.com/unix/while-loop.htm)
    *   [为了](http://www.tutorialspoint.com/unix/for-loop.htm)
    *   [直到](http://www.tutorialspoint.com/unix/until-loop.htm)
    *   [选择](http://www.tutorialspoint.com/unix/select-loop.htm)
*   条件

    *   [如果](http://www.tutorialspoint.com/unix/if-fi-statement.htm)
    *   [案子](http://www.tutorialspoint.com/unix/case-esac-statement.htm)

这些命令通常适用于文件名模式，例如`*.txt`，也经常适用于管道`|`输入。

例如，如果您想执行复杂的操作，假设重命名一组文件以替换给定模式：

```
for f in *; mv $a ${a/bak/} 
```

`bak`将从当前文件夹中的所有文件名中删除该单词。\

# 隐藏的黄金

有两个命令[`sed`](http://en.wikipedia.org/wiki/Sed)，[`awk`](http://en.wikipedia.org/wiki/AWK)它们本身~~几乎就是~~语言。不必完全了解它们，它们所做的许多事情都可以通过更简单的命令来复制，例如[`tr`](http://en.wikipedia.org/wiki/Tr_%28Unix%29)和[`cut`](http://en.wikipedia.org/wiki/Cut_%28Unix%29)。但是，了解它们的基本工作原理是一件非常方便的事情。事实上，**Sed**和**Awk**是如此强大，他们甚至有一本 O'Reilly 专为他们而写的书。

# 在哪里可以找到 Unix 命令行令人敬畏的示例？

查找示例的好地方是[命令行 fu](http://commandlinefu.com)

祝你好运

# selenium-webdriver - 如何使用 Selenium webdriver 在弹出窗口中输入值

> ID：14133536
> 
> 赞同：1
> 
> 时间：2013-01-03T05:27:42.390
> 
> 标签：selenium-webdriver

我正在努力处理单击 img 图标时显示的弹出（查找）窗口

代码：

```
String parentHandle =  LoginPage2.driver.getWindowHandle();
LoginPage2.driver.findElement(By.id("opp4_lkwgt")).click();

//after you have pop ups

Set s =  LoginPage2.driver.getWindowHandles();
Iterator ite=s.iterator();

while(ite.hasNext())
{
    String popupHandle=ite.next().toString();
    if(!popupHandle.contains(parentHandle))
    {
        LoginPage2.driver.switchTo().window(popupHandle);

        //here you can perform operation in pop-up window**
        TimeUnit.SECONDS.sleep(8);
        LoginPage2.driver.findElement(By.id("lksrch")).sendKeys("sss");    

        //After finished your operation in pop-up just select the main window again
        LoginPage2.driver.switchTo().window(parentHandle);
        LoginPage2.driver.close();
    }

} 
```

我的代码没有集中到查找弹出窗口，我无法`sss`在搜索字段中输入。

查找窗口的 HTML：

```
<div class="pBody">

<div class="message infoM4" id="msgBox">

<table class="messageTable" border="0" cellpadding="0" cellspacing="0">

<tbody><tr>

<td>

<img src="/s.gif" alt="Information" class="msgIcon" title="Information">

</td>

<td class="messageCell"><div class="messageText">Opportunities cannot go against a Global Parent. Please select an Organisation that is lower in the hierarchy than a Global Parent.</div></td></tr>

</tbody></table></div><*script type="text/javascript">if (window.sfdcPage) sfdcPage.registerMessage('msgBox');</script>

<label for="lksrch">Search</label>

<input id="lksrch" maxlength="80" name="lksrch" size="20" type="text" value="">

<input value=" Go! " class="btn" name="go" title="Go!" type="submit">

<input value=" New " class="btn" name="new" onclick="javascript:top.resultsFrame.location='LookupResultsFrame?lktp=001&amp;lkfm=editPage&amp;lknm=opp4&amp;lksrch=&amp;lknew=1&amp;lkent=006&amp;lkfield=Account&amp;igdp=0'" title="New" type="button">

<div class="bDescription"></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:17:24.333

尝试先发送一个空白键，以便元素获得焦点，然后发送“sss”

```
element = LoginPage2.driver.findElement(By.id("lksrch"));
element.sendKeys(" ");
element.sendKeys("sss"); 
```

# hibernate - 如何在单个数据库中将 Hibernate 用于两个不同的模式

> ID：14133541
> 
> 赞同：8
> 
> 时间：2013-01-03T05:28:36.297
> 
> 标签：hibernate

我想在数据库中使用两个不同的模式，每个模式都有相同的表集，但数据不同。如何使用休眠并指向两个不同的模式。我是休眠的新手。请提供链接。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T06:16:46.437

您可以`schema`在为实体定义表时按元素指定它。

> @Table(name="TABLE_NAME", schema="SCHEMA_NAME")

否则，您可以使用单独`EntityManager`的指向各自的架构，然后使用相同的实体，因为它们的结构相似。

* * *

**编辑：**您可以为每个模式设置单独的配置文件，然后`SessionFactory`从中构建，下面是它的一些伪代码。

```
SessionFactory sf_1 = new  Configuration().configure("schema1config.cfg.xml").buildSessionFactory();
SessionFactory sf_2 = new Configuration().configure("schema2config.cfg.xml").buildSessionFactory();

session_1 = sf_1.openSession();  //-- Similarly for other 
```

您可以参考[此链接](https://stackoverflow.com/a/13854640/366964)以获取更多详细信息以映射多个模式，但它不是特定于休眠的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-17T10:23:46.650

在您的配置文件中：

```
<hibernate-configuration>
       <session-factory>
        <property name="hibernate.connection.driver_class">com.ibm.db2.jcc.DB2Driver</property>
        <property    name="hibernate.connection.url">jdbc:db2://localhost:50000/TEST</property>
        <property name="hibernate.connection.username">user</property>
        <property name="hibernate.connection.password">pwd</property>
        <property name="hibernate.dialect">org.hibernate.dialect.DB2Dialect</property>
        <property name="show_sql">true</property>
        <property name="format_sql">true</property>
        <property name="hbm2ddl.auto">auto </property>
        <mapping class="com.test.db2procedure.User"/>
        <mapping class="com.test.db2procedure.User1"/>
      </session-factory>
     </hibernate-configuration> 
```

在您的实体类中：

```
@Entity
@Table(name="SCHEMA.USER") ////Here you can specify your schema name. Here my     schema name is schema
public class User implements Serializable {

private String city;

private String firstname;
enter code here
@Id
@Column(name="ID")
private String id;

private String lastname;

public User() {
}

public String getCity() {
    return this.city;
}

public void setCity(String city) {
    this.city = city;
}
} 
```

对于第二堂课，你必须这样做：

```
@Entity
@Table(name="SCHEMA1.USER") //Here you can specify your schema name. Here my schema name is schema1
 public class User1 implements Serializable {
    private String city;

    private String firstname;

    @Id
    @Column(name="ID")
    private String id;

    private String lastname;

    public User1() {
    }

    public String getCity() {
        return this.city;
    }

    public void setCity(String city) {
        this.city = city;
    }
} 
```

要对此进行测试：

```
public class Test{
    public static void main(String args[]){
         SessionFactory factory ;
         Configuration cfg = new Configuration();
         cfg.configure("hibernate.cfg.xml");          
         List<User> user=new ArrayList<User>();
         factory = cfg.buildSessionFactory();
         Session session = factory.openSession();        
         String hql = "select u2.city from User u1,User1 u2 where u1.id=u2.id";
         Query query = session.createQuery(hql);

         List results = query.list();
         System.out.println("User City: "+results.get(0).toString());
    }
} 
```

在上面的 Test.class 中，执行来自 schema 和 schema1 的结果集

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-06T22:11:31.147

感谢您的所有回复，我想在调查结果中再补充一点

**场景：**两个模式中具有相同名称的表

1.  我们在@Column 注释的**表**属性中给出的*名称*应该与我们在@Table 和@SecondaryTable 注释中给出的名称相匹配。
***   因此，当我们在 @Table 中添加模式名称时，请确保我们在 @Column 中进行**

 *** * *

```
@Table(name="schema1.table")
@SecondaryTables({
    @SecondaryTable(name = "schema2.table")
}) 
```

* * *

```
@Column( name = "col1", table = "schema2.table") 
```

* * *

注意：您不必为主表列指定表属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T20:54:07.250

使用此示例（在 中`hibernate.reveng.xml`）：

```
<hibernate-reverse-ingineering>
<schema-selection math-catalog="DataBaseName" />
<table-filter match-schema="FirstSchema" match-name="table-name1" />
<table-filter match-schema="SecondSchema" match-name="table-name2" />
</hibernate-reverse-ingineering> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-24T13:18:06.873

从 Hibernate 5 开始，在创建实体类时使用**目录**而不是**模式来定义模式。**

```
@Table(name="TABLE_NAME", catalog="SCHEMA_NAME") 
```

通过这种情况，您可以处理多个模式。**

# android - 如何在微调器中按字母顺序对数据进行排序

> ID：14133542
> 
> 赞同：5
> 
> 时间：2013-01-03T05:29:10.467
> 
> 标签：android

我是 android 领域的新手，我想按字母顺序对我的微调器数据进行排序。请帮忙

**注意：- 我正在从 Web 服务接收数据。**

我的代码是：-

```
 <Spinner
            android:id="@+id/spinnerAtlasContactSignup"
            android:layout_width="200dip"
            android:layout_height="46dp"
            android:layout_below="@+id/editCompanySignup"
            android:layout_marginBottom="60dp"
            android:layout_marginTop="10dp"
            android:background="@drawable/slect_box1x"
            android:ems="10"
            android:padding="10dp"
            android:prompt="@string/atlas_contact" />

 private void initializeSpinner(ArrayList<AtlasContact> atlastContacts) {

    ArrayAdapter<AtlasContact> adapter = new ArrayAdapter<AtlasContact>(this,android.R.layout.simple_spinner_item, atlastContacts);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinnerAtlasContact.setAdapter(adapter); 
```

这`AtlasContact`是一个接受来自网络服务的数据的类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T05:32:45.223

如果您要从**SQLite DB**中获取值，那么它们会执行查询以按字母顺序对值进行**排序**并将它们排序在一个 ARRAY 中。

**或**尝试将数据添加到**ArrayList**并使用**Collections 类**为您排序::

```
Collections.sort(SourceArray); 
```

还，

**可比**接口并实现方法**compareTo()**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T05:33:07.520

您只需要对来源进行排序：

```
Collections.sort(atlastContacts, new Comparator<AtlasContact>(){
  public int compare(AtlasContact a1, AtlasContact a2) {
    return a1.getName().compareToIgnoreCase(a2.getName());
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:34:01.387

尝试`Collections.sort(atlastContacts);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:34:14.523

你检查过文档吗？中有排序方法`ArrayAdapter`。

你只需要实现你自己的`Comparator`. 我想这只是：

```
int compare(String s1, String s2) { return s1.compareTo(s2); } 
```

# javascript - 更新活动选项卡

> ID：14133544
> 
> 赞同：0
> 
> 时间：2013-01-03T05:29:12.127
> 
> 标签：javascript, ajax, jquery

我试图更新一个类以激活这些“假”标签

```
<!--[if !IE]>start section menu<![endif]-->
<ul class="section_menu">
    <li><a href="#" id="1" class="active"><span><span>stage one</span></span></a></li>
    <li><a href="#" id="2"  ><span><span>Stage two</span></span></a></li>
    <li><a href="#" id="3" ><span><span>Stage Three</span></span></a></li>
    <li><a href="#" id="4" ><span><span>Complete</span></span></a></li>
</ul>
<!--[if !IE]>end section menu<![endif]--> 
```

我使用了一个 jQuery 脚本，它制作了一个多步骤表单并拥有自己的导航系统，这些选项卡只是为了直观地显示表单的进度。

脚本：[http ://www.jankoatwarpspeed.com/turn-any-webform-into-a-powerful-wizard-with-jquery-formtowizard-plugin/](http://www.jankoatwarpspeed.com/turn-any-webform-into-a-powerful-wizard-with-jquery-formtowizard-plugin/)

```
 /* Created by jankoatwarpspeed.com */

(function($) {
    $.fn.formToWizard = function(options) {
        options = $.extend({  
            submitButton: "" 
        }, options); 

        var element = this;

        var steps = $(element).find("fieldset");
        var count = steps.size();
        var submmitButtonName = "#" + options.submitButton;
        $(submmitButtonName).hide();

        // 2
        $(element).before("<ul id='steps'></ul>");

        steps.each(function(i) {
            $(this).wrap("<div id='step" + i + "'></div>");
            $(this).append("<p id='step" + i + "commands'></p>");

            // 2
            var name = $(this).find("legend").html();
            $("#steps").append("<li id='stepDesc" + i + "'>Step " + (i + 1) + "<span>" + name + "</span></li>");

            if (i == 0) {
                createNextButton(i);
                selectStep(i);
            }
            else if (i == count - 1) {
                $("#step" + i).hide();
                createPrevButton(i);
            }
            else {
                $("#step" + i).hide();
                createPrevButton(i);
                createNextButton(i);
            }
        });

        function createPrevButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Prev' class='prev'>< Back</a>");

            $("#" + stepName + "Prev").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i - 1)).show();
                $(submmitButtonName).hide();
                selectStep(i - 1);
            });
        }

        function createNextButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next' class='next'>Next ></a>");

            $("#" + stepName + "Next").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i + 1)).show();
                if (i + 2 == count)
                    $(submmitButtonName).show();
                selectStep(i + 1);
            });
        }

        function selectStep(i) {
            $("#steps li").removeClass("current");
            $("#stepDesc" + i).addClass("current");
        }

    }
})(jQuery);

<script type="text/javascript" src="ajax.googleapis.com/ajax/libs/jquery/1.2.6/…; <script type="text/javascript" src="formToWizard.js"></script> <script type="text/javascript"> $(document).ready(function(){ $("#newproduct").formToWizard({ submitButton: 'SaveAccount' }) }); </script> 

<form id="newproduct" action="#" > 
```

任何解决此问题的帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:48:02.597

保罗。

最好只使用一般的 jQueryUI 选项卡[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)。您只需使用标准选项卡的 API 调用通过 java 脚本切换这些选项卡。

如果您当前的选项卡是可点击的 - 您可以简单地触发鼠标单击您需要的选项卡：

```
$("#tab1").trigger("click"); // or something like that, check jQuery docs... 
```

问候。

# jquery - 如何在ajax url中调用控制器动作

> ID：14133549
> 
> 赞同：2
> 
> 时间：2013-01-03T05:29:43.643
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我想在 ajax url 中调用控制器方法，以根据另一个下拉列表中的值动态填充下拉列表。我得到的值是字符串，当我使用 ajax url 调用此方法时，它总是指“显示”方法。我的ajax调用

```
$('#users').change(function() {
  url: '/users/update_groups',
  data: {name: $(this).val()},
  success: function (data) {
    alert(data);
  }
}); 
```

在我的 users_controller.rb

```
def update_groups user_name
  # returns list of groups
end 
```

如何使用 ajax url 调用此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:48:25.947

```
$("#users").change(function() {
  $.ajax({
      url: "users/update_groups",
      type: "POST",
      data: {name: $(this).val()},
      success: function (data) {
      alert(data);
      }
  });
}); 
```

尝试上面的代码，一旦它可以工作，让我知道.....如果它不起作用，将尝试以其他方式提供帮助......

# javascript - 实现功能来移动 jQuery 元素保存事件处理程序

> ID：14133554
> 
> 赞同：0
> 
> 时间：2013-01-03T05:30:16.087
> 
> 标签：javascript, jquery

我知道在使用 jQuery 操作元素时可以保存事件处理程序：

```
$element.clone(true) 
```

我将如何实现这样的功能：

```
$element.withHandlers().appendTo('#my-div') 
```

那会附加`$element`到`#my-div`复制其事件处理程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:33:14.620

```
.clone( [withDataAndEvents] [, deepWithDataAndEvents] ) 
```

```
$element.clone(true, true).appendTo('#my-div') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:52:07.327

只要你不调用 $element.remove(); 实际上，您可以随时调用 append、insertBefore 等；事件和数据每次都会随之而来。仅供参考，使用 $element.detach(); 如果你想断开它与 DOM 的连接并保留它的事件和数据，而不是删除。– 雅尼克·罗雄

# javascript - Chrome Experiments 100,000 stars 如何用three.js 制作星星

> ID：14133559
> 
> 赞同：14
> 
> 时间：2013-01-03T05:30:46.623
> 
> 标签：javascript, three.js, webgl

我希望这次是正确的地方，但我正在尝试弄清楚如何使用 three.js 来创建一个星星，就像[chrome 实验 100,000 个星星](https://stars.chromeexperiments.com/)所做的那样。我尝试查看源代码，但很难破译，它似乎有很多部分，我尝试过使用纹理，但我不知道如何获得太阳周围的光晕或光晕，我将不胜感激有相关知识的人提供帮助。

![](../Images/6dfa74e69f5318177b65fd49931bfda5.png) ![](../Images/656df992f03049e047fc86936096c946.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:13:27.690

你看到[这篇文章](http://www.html5rocks.com/en/tutorials/casestudies/100000stars/)了吗？

关于太阳的部分给出了如何实现这些效果的高级概述。您可能想要研究 GLSL 着色器，它本身就是一个完整的领域。现在最好在源代码中找到着色器并调整它们以查看您的更改有什么效果。

还可以考虑查看[本教程](http://devmaster.net/posts/3100/shader-effects-glow-and-bloom)以获取发光和绽放着色器的示例。

为了了解更多关于 OpenGL 的一般知识，[最新版的红皮书](https://rads.stackoverflow.com/amzn/click/com/0321773039)应该很好地解释了 OpenGL，同时避免了前一版的失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T15:53:29.377

下面是一个使用着色器的光环式发光效果示例：

[http://stemkoski.github.io/Three.js/Shader-Halo.html](http://stemkoski.github.io/Three.js/Shader-Halo.html)

它仍在进行中——平移或缩放将改变发光的外观，但也许它足以提供帮助。

希望能帮助到你！

# file-io - 在 Windows 8 RT 中替换或重新创建文件会保留旧的 DateCreated 值

> ID：14133560
> 
> 赞同：3
> 
> 时间：2013-01-03T05:30:47.673
> 
> 标签：file-io, windows-runtime, windows-store-apps

我正在尝试将数据缓存在 Windows 应用商店应用程序的文件中，并使用 DateCreated 值来确定它是否已过期。

我首先尝试这样做：

```
 var file = await rootFolder.CreateFileAsync(filename, Windows.Storage.CreationCollisionOption.ReplaceExisting);

    FileIO.WriteTextAsync(file, contents); 
```

但是当它保存文件时，仅更改 DateModified 值，即使 ReplaceExisting 选项的注释清楚地表明它会重新创建文件并替换现有文件。

所以我决定强制它删除文件并用这个重新创建它：

```
 var file = await rootFolder.CreateFileAsync(filename, Windows.Storage.CreationCollisionOption.ReplaceExisting);

// force delete because windows rt is not doing what it's supposed to in the line above!!
await file.DeleteAsync();
file = await rootFolder.CreateFileAsync(filename);

FileIO.WriteTextAsync(file, contents); 
```

但令人惊讶的是，我仍然得到相同的结果！该文件被删除并使用旧创建日期重新创建！

这是一个错误，还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:05:30.547

这是设计使然，称为“文件系统隧道”的功能。此[知识库文章](http://support.microsoft.com/kb/172190)解释了行为和基本原理。

它记录的解决方法需要注册表编辑，显然您不能在 Store 应用程序中依赖它。您需要找到一种解决方法，例如使用最后写入的时间戳或在两个文件之间交替或在单独的文件中跟踪年龄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:23:12.483

感谢大家的评论，事实证明修改日期可用，但您必须通过 GetBasicPropertiesAsync() 方法获取它，如下所示：http: [//msdn.microsoft.com/en-us/library/windows/apps/ windows.storage.fileproperties.basicproperties.datemodified.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.basicproperties.datemodified.aspx)

# apache-flex - 禁用数据网格时不显示 Flex 垂直滚动条

> ID：14133561
> 
> 赞同：0
> 
> 时间：2013-01-03T05:31:36.123
> 
> 标签：apache-flex, datagrid

我是动作脚本的新手。我已经以表格的形式创建了数据网格。

当垂直滚动条不起作用时，我已经禁用了包含大量记录的数据网格。

所以我只能查看数据网格中的有限行和我无法查看的其余行。

谢谢你。

# android - FileOutputStream 附加到 SD

> ID：14133563
> 
> 赞同：0
> 
> 时间：2013-01-03T05:32:15.500
> 
> 标签：android

我有一个问题，直到现在我无法理解。

`os = new FileOutputStream(file,doAppend);`

该文件位于 SD 上。如果 doAppend 为 false，则文件被正确保存。如果我将文件分割成块并使用 doAppend=false 的第一次写入并使用 true 连续写入，则文件未正确保存（因为它被截断）。相同的功能也保存到设备上的私人文件夹，但只使用`os = activity.openFileOutput(red.m_slika_ime, Context.MODE_PRIVATE+Context.MODE_APPEND);`

在保存到 SD 或私有之间，唯一的区别在于 OutputStream 实例化。

由于私有文件夹上的所有内容都按预期工作，因此它应该是 FileOutputStream 并在 Sd 上附加了无法正常工作的内容。

这是一个已知的问题？解决方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:25:38.163

这是我的愚蠢错误。我在其他地方，每次写入 SD 之前，都会擦除我自己的文件。发生了:) 无论如何感谢卢克

# javascript - jQuery – on('click') append 似乎不起作用

> ID：14133570
> 
> 赞同：0
> 
> 时间：2013-01-03T05:32:59.687
> 
> 标签：javascript, jquery

[http://jsfiddle.net/D6be5/](http://jsfiddle.net/D6be5/)

**HTML**

```
<table class="example" border="1">
    <tr>
        <td>
            <label>Enter text</label>
            <textarea>Enter text</textarea>
        </td>
    </tr>
    <tr class="clone"></tr>
</table>

<p><button id="add-row">Add Row</button></p>​ 
```

**jQuery**

```
$(document).ready(function() {
    $(this).on('click', function(event) {
        if ( ! $(event.target).closest('table').hasClass('example')) {
            $('table label').show();
            $('table textarea').hide();
        }
    });

    $('table td').on('click', function() {
        $('table label').show();
        $('table textarea').hide();
        $(this).find('label').hide();
        $(this).find('textarea').show();
    });

    $('#add-row').on('click', function() {
        _this = $('table tr.clone')
            .clone()
            .removeClass('clone')
            .insertBefore('.clone');

        _this.append('<td><label>Enter text</label><textarea>Enter text</textarea></td>');
    });                
});​ 
```

**CSS**

```
table textarea {
    display: none;
}

table .clone {
    display: none;
}​ 
```

上面的链接解释了我正在尝试做的事情。

基本上问题是这样的。我在**td中有一个****标签**和**textarea**，**textarea**是隐藏的，只有**标签**在开始时显示。当用户单击表格的单元格时，它会隐藏**标签**并显示**textarea**，它可以正常工作，直到您尝试添加行的克隆然后它什么也不做。

 ********编辑**：忘记提及为什么我要克隆行并在之后添加单元格。在我的实际代码中，我也允许创建列，并计算行数并在之后添加单元格。

非常感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T05:40:51.020

另一种方法。

```
$('table').on('click', "td", function() {

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:39:59.440

将点击处理程序更改为

```
$(document).on('click', 'table td', function() {
//Your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:36:05.377

您可能想尝试在您的活动中使用该`.on()`方法：`$('table td').click()`

```
$('table td').on('click', function() {
    $('table label').show();
    $('table textarea').hide();
    $(this).find('label').hide();
    $(this).find('textarea').show();
}); 
```

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:42:23.883

希望它可以帮助你

```
$('.example').delegate('td', "click", function() {

} 
```******

# javascript - Google Visualization TreeMap 在单击树形图的每个部分时获取颜色

> ID：14133571
> 
> 赞同：0
> 
> 时间：2013-01-03T05:33:03.310
> 
> 标签：javascript, jquery, google-visualization, treemap

是否可以获得在树形图上单击的段的颜色。单击时会触发一个选择事件，该事件只会告诉我们单击了哪一行。

[这是一个例子](https://code.google.com/apis/ajax/playground/?type=visualization#tree_map)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:11:35.503

我还没有找到使用 Google API 执行此操作的任何方法，但是通过向`click`文档添加事件侦听器并将其与`select`事件匹配，您可以检索实际`SVGRectElement`值：

```
var currElement;
document.addEventListener('click', function (k) {
    currElement = k.target;
});

google.visualization.events.addListener(treemap, 'select', function () {
  var sel = treemap.getSelection(),
      color;
  if (currElement) {
      color = currElement.attributes.getNamedItem('fill');
  }

  console.log('selected element color: ' + color.value);
}); 
```

这绝不是一个完整的解决方案，但它应该指向你的答案

# android - Android警报对话框视图到父视图

> ID：14133575
> 
> 赞同：0
> 
> 时间：2013-01-03T05:33:29.097
> 
> 标签：android, android-alertdialog

我有一个警报对话框构建器，其中显示了 EditText Box 和其他几个。现在我需要将其转换为 Normal View(Parent View) 。

添加代码：

公共同步无效showPopUp（最终字符串图片路径）{

```
 ScrollView scrollView = new ScrollView(this);
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    LinearLayout alertLayout = new LinearLayout(this);

    InputFilter[] inputFilter = new InputFilter[1];
    inputFilter[0] = new InputFilter.LengthFilter(50);

    alertLayout.setOrientation(1); // 1 is for vertical orientation
    final EditText nameInput = new EditText(this);
    nameInput.setHint("Receipt Name");
    nameInput.setFilters(inputFilter);
    ;
    nameInput.setSingleLine(true);

    final TextView dateText = new TextView(this);
    dateText.setText("Receipt Date");

    final EditText amtInput = new EditText(this);
    amtInput.setHint("Receipt Amount");
    amtInput.setSingleLine(true);

    DigitsKeyListener digitKeyListener = new DigitsKeyListener(false, true);
    amtInput.setKeyListener(digitKeyListener);

    InputFilter[] amtInputFilter = new InputFilter[2];
    amtInputFilter[0] = new InputFilter() {
        public CharSequence filter(CharSequence source, int start, int end,
                Spanned dest, int dstart, int dend) {
            if (end > start) {
                String destTxt = dest.toString();
                String resultingTxt = destTxt.substring(0, dstart)
                        + source.subSequence(start, end)
                        + destTxt.substring(dend);
                if (!resultingTxt
                        .matches("^\\$?\\-?([1-9]{1}[0-9]{0,2}(\\,\\d{3})*(\\.\\d{0,2})?|[1-9]{1}\\d{0,}(\\.\\d{0,2})?|0(\\.\\d{0,2})?|(\\.\\d{1,2}))$|^\\-?\\$?([1-9]{1}\\d{0,2}(\\,\\d{3})*(\\.\\d{0,2})?|[1-9]{1}\\d{0,}(\\.\\d{0,2})?|0(\\.\\d{0,2})?|(\\.\\d{1,2}))$|^\\(\\$?([1-9]{1}\\d{0,2}(\\,\\d{3})*(\\.\\d{0,2})?|[1-9]{1}\\d{0,}(\\.\\d{0,2})?|0(\\.\\d{0,2})?|(\\.\\d{1,2}))\\)$")) {
                    return "";
                }
            }
            return null;
        }
    };
    amtInputFilter[1] = new InputFilter.LengthFilter(13);
    amtInput.setFilters(amtInputFilter);

    amtInput.setOnEditorActionListener(new OnEditorActionListener() {

        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {
            if (event != null && event.getAction() != KeyEvent.ACTION_DOWN)
                return false;
            if (actionId == EditorInfo.IME_ACTION_NEXT
                || event == null
                || event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {                  

                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); imm.hideSoftInputFromWindow(amtInput.getWindowToken(), 0);

            }
            return false;
        }

});

final DatePicker datePicker = new DatePicker(this);

    datePicker.clearFocus();
    datePicker.bringToFront();

    alertLayout.addView(nameInput);
    alertLayout.addView(amtInput);
    alertLayout.addView(dateText);
    alertLayout.addView(datePicker);
    scrollView.addView(alertLayout);
    alert.setView(scrollView);

    alert.setTitle("Enter Expense Detail");

    alert.setPositiveButton("SAVE", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int whichButton) {

            rcptName = nameInput.getText().toString();
            rcptAmt = amtInput.getText().toString();

            int spinnerDate = datePicker.getDayOfMonth();
            int spinnerMonth = datePicker.getMonth() + 1;

            if (spinnerMonth < 10 && spinnerDate < 10) {
                rcptDate = (datePicker.getYear()) + "0" + (spinnerMonth)
                        + "0" + spinnerDate;
            } else if (spinnerMonth < 10) {
                rcptDate = (datePicker.getYear()) + "0" + (spinnerMonth)
                        + "" + spinnerDate;
            } else if (spinnerDate < 10) {
                rcptDate = (datePicker.getYear()) + "" + (spinnerMonth)
                        + "0" + spinnerDate;
            } else {
                rcptDate = (datePicker.getYear()) + "" + (spinnerMonth)
                        + "" + spinnerDate;
            }

            SavePreferences("RNAME", rcptName);
            SavePreferences("RAMOUNT", rcptAmt);
            SavePreferences("RDATE", rcptDate);

            SharedPreferences sharedPreferences = getSharedPreferences(
                    "LoginPref", 0);
            String username = sharedPreferences.getString("USERNAME", null);
            String guid = sharedPreferences.getString("GUID", null);
            String password = sharedPreferences.getString("PASSWORD", null);
            String rcptName = sharedPreferences.getString("RNAME", null);
            String rcptAmount = sharedPreferences
                    .getString("RAMOUNT", null);
            String rcptDate = sharedPreferences.getString("RDATE", null);
            String uploadLocation = sharedPreferences.getString("LOGINURL",
                    null);

            if (rcptAmount.isEmpty() || rcptName == null
                    || rcptName.isEmpty() || rcptName.trim().isEmpty()) {
                showPopUp(picturePath);

            } else {

                if (isInternetOn()) {

                    new UploadTask().execute(picturePath, username, guid,
                            rcptName, rcptAmount, rcptDate, uploadLocation,
                            password);

                } else {

                    finish();
                }

            }
        }
    });

    alert.setOnKeyListener(new DialogInterface.OnKeyListener() {

        public boolean onKey(DialogInterface dialog, int keyCode,
                KeyEvent event) {
            // whitelist allowed keys - allow navigation keys only
            if (keyCode == KeyEvent.KEYCODE_SEARCH) {
                return true;
            }
            return false;

        }
    });

    alert.setNegativeButton("CANCEL",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    finish();
                    startActivity(getIntent());
                }
            });

    alert.setCancelable(false);

    alert.show();

} 
```

请建议。

谢谢， 阿南德

# iphone - iPhone前置摄像头镜

> ID：14133578
> 
> 赞同：2
> 
> 时间：2013-01-03T05:33:43.867
> 
> 标签：iphone, ios, camera

我的应用程序正在使用 iPhone 的前置摄像头。当我尝试拍摄我的照片时，出现了问题。当我左转时，在相机中它显示为右转。就像一面镜子。我怎样才能避免这种情况？！

```
AVCaptureDeviceInput *newVideoInput;
AVCaptureDevicePosition currentCameraPosition = [[videoInput device] position];

if (currentCameraPosition == AVCaptureDevicePositionBack)
{
    currentCameraPosition = AVCaptureDevicePositionFront;
}
else
{
    currentCameraPosition = AVCaptureDevicePositionBack;
}

AVCaptureDevice *backFacingCamera = nil;
NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
for (AVCaptureDevice *device in devices) 
{
    if ([device position] == currentCameraPosition)
    {
        backFacingCamera = device;
    }
}
newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:backFacingCamera error:&error]; 
```

# asp.net - 在asp.net c#中将Excel数据导出到SQL Server表中

> ID：14133580
> 
> 赞同：0
> 
> 时间：2013-01-03T05:33:51.713
> 
> 标签：asp.net, sql-server, excel

> **可能重复：**
> [如何将数据从 Excel 工作表插入 SQL Server 2005](https://stackoverflow.com/questions/5141521/how-to-insert-data-from-excel-sheet-to-sql-server-2005)

我有一个如下的 Excel 表

国名 港口 01/01/05 02/01/05

geria Arw 25000 10000

该数据应该插入到这样的表中

```
CountryName     Port        date            cal
1    geria          Arw     01/01/05        25000
2    geria          Arw     02/01/05        10000 
```

如何将这种类型的数据插入数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:43:29.203

以通常的方式打开到数据库的 SQLConnection 对象。

使用 SQLCommand 对象（以通常的方式）执行以下 SQL 命令：

```
INSERT INTO myTable (CountryName, Port, date, cal)
VALUES ('geria', 'Arw', '2005-01-01 12:00:00 AM', 25000) 
```

# windows - 使用来自 tclsh 的有效负载 ping 服务器

> ID：14133581
> 
> 赞同：0
> 
> 时间：2013-01-03T05:33:52.267
> 
> 标签：windows, tcl, ping

我需要测试我的远程服务器如何处理 ping 请求。我需要使用 50 kb 的有效负载从我的窗口 ping 远程服务器。我需要我的 tcl 脚本生成 20 个这样的 ping 请求，并行 50 kb 有效负载，这样在给定实例的服务器上将产生 1 mb 的接收流量。这是 ping 测试的代码

```
proc ping-igp {} {
    foreach i {
        172.35.122.18
    } {
        if {[catch {exec ping $i -n 1 -l 10000} result]} {
            set result 0
        }
        if {[regexp "Reply from $i"  $result]} {
            puts "$i pinged"
        } else {
            puts "$i Failed"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:32:15.110

如果您想并行 ping，那么您可以使用`open`而不是 exec 并使用 fileevents 从 ping 进程中读取。

使用 open ping 具有两个并行进程的服务器的示例：

```
set server 172.35.122.18

proc pingResult {chan serv i} {
    set reply [read $chan]
    if {[eof $chan]} {
        close $chan
    }
    if {[regexp "Reply from $serv"  $result]} {
        puts "$serv number $i pinged"
    } else {
        puts "$serv number $i Failed"
    }
}

for {set x 0} {$x < 2} {incr $x} {
    set chan [open "|ping $server -n 1 -l 10000"]
    fileevent $chan readable "pingResult $chan {$server} $x"
} 
```

有关更多信息，请参阅此页面：[http ://www.tcl.tk/man/tcl/tutorial/Tcl26.html](http://www.tcl.tk/man/tcl/tutorial/Tcl26.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:50:28.550

这是一段非常简单的代码，通过打开管道在后台执行 ping 操作。为此，将“文件名”的第一个字符设置`open`为 a `|`，当“文件名”的其余部分被解释为命令行参数的 Tcl 列表时，就像在`exec`：

```
proc doPing {host} {
    # These are the right sort of arguments to ping for OSX.
    set f [open "|ping -c 1 -t 5 $host"]
    fconfigure $f -blocking 0
    fileevent $f readable "doRead $host $f"
}

proc doRead {host f} {
    global replies
    if {[gets $f line] >= 0} {
        if {[regexp "Reply from $host" $result]} {
            # Switch to drain mode so this pipe will get cleaned up
            fileevent $f readable "doDrain $f"
            lappend replies($host) 1
            incr replies(*)
        }
    } elseif {[eof $f]} {
        # Pipe closed, search term not present
        lappend replies($host) 0
        incr replies(*)
        close $f
    }
}

# Just reads and forgets lines until EOF
proc doDrain {f} {
    gets $f
    if {[eof $f]} {close $f}
} 
```

您还需要运行事件循环；这可能是微不足道的（您正在使用 Tk）或可能需要显式（`vwait`）但不能集成到上述内容中。但是您可以使用一个聪明的技巧来运行事件循环足够长的时间来收集所有结果：

```
set hosts 172.35.122.18
set replies(*)
foreach host $hosts {
    for {set i 0} {$i < 20} {incr i} {
        doPing $host
        incr expectedCount
    }
}
while {$replies(*) < $expectedCount} {
    vwait replies(*)
} 
```

然后，只需查看`replies`数组的内容即可获得所发生情况的摘要。

# android - 移动应用程序UI开发和集成流程

> ID：14133584
> 
> 赞同：0
> 
> 时间：2013-01-03T05:34:16.150
> 
> 标签：android, ios, mobile

我期待着为移动开发团队实施一个流程，为移动开发开发和集成用户界面。目前我们面临的问题是，开发人员向 UI 设计师传达用户界面要求（如屏幕尺寸等），当开发人员从 UI 设计师那里收到设计时，存在对齐问题、图像质量低、字体大小不同等等。设计师如何测试他们的设计是否适合各自的屏幕尺寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:56:15.383

首先，我强烈建议您仔细阅读[Designing for Multiple Screens](http://developer.android.com/training/multiscreen/index.html)文档，因为它描述了在为多个屏幕设计应用程序时非常重要的方面

其次，Android 开发工具最近添加了非常有用的功能，可以同时在多个屏幕上*预览您的应用程序。*请参阅所附图片，我在其中突出显示了您可以选择的按钮`Preview All Screens`

![在多个屏幕上预览应用程序](../Images/abb1bcecd375f99826189b678ba92611.png)

# c++ - C++ Vector2D 类操作

> ID：14133586
> 
> 赞同：1
> 
> 时间：2013-01-03T05:34:44.883
> 
> 标签：c++, math, vector, coordinates

我有一个名为 Vec2D 的类来处理 2d 矢量操作。

```
 Vec2D pos1 = Vec2D( 100, 100 );
   Vec2D pos2 = Vec2D( 100, 100 ); 
```

我有运算符重载，所以算术可以更简单。因此，我可以执行以下操作：

```
Vec2D difference = pos1-pos2;
float distance = difference .magnitude(); 
```

我想知道**我的班级可以做这样的算术吗？：**

```
float distance = (pos1-pos2).magnitude(); 
```

我尝试编译，但它给了我奇怪的错误，例如“Vec2D 类没有迭代器......” 我想出来的唯一原因是结果中不存在类这一事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:47:34.823

这里的问题可能是您实现`-`运算符的方式。原型应该是：

```
Vec2D operator- (const Vec2D &rhs) const 
```

或课外

```
Vec2D operator- ( const Vec2D& v1, const Vec2D& v2 ) 
```

您的运营商是如何声明的？特别是——操作返回类型是什么？

# javascript - 包装函数包围

> ID：14133587
> 
> 赞同：0
> 
> 时间：2013-01-03T05:35:10.407
> 
> 标签：javascript, function, wrapper

我对 javascript 很陌生，我在使用这个多功能调用时遇到了困难

这个位运行良好

```
$('.pages').live("swiperight", function () {  
    if (!menuStatus) {  
        $(".ui-page-active").animate({  
            marginLeft: "165px",  
        }, 300, function () {  
            menuStatus = true  
        });  
    }  
}); 
```

我想补充

```
(document).scrollTop(0); 
```

这样用户将在菜单打开时被带到长页面的顶部......任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:37:55.037

你应该能够使用这样的东西来执行你的滚动：

```
$("html, body").animate({ scrollTop: 0 }, "slow"); 
```

因此，如果您想将其添加到当前函数中，如图所示：（*您可以将其放置在您希望它发生的任何位置）*

```
$('.pages').on("swiperight", function () {
    if (!menuStatus) {
        $(".ui-page-active").animate({
            marginLeft: "165px",
        }, 300, function () {
            menuStatus = true
        });
        //Perform scroll-to-top action
        $("html, body").animate({ scrollTop: 0 }, "slow");
    }
}); 
```

此外，这也应该有效*（如 Jan 所述）*：

```
$('document').on("swiperight",".pages", function () {
    if (!menuStatus) {
        $(".ui-page-active").animate({
            marginLeft: "165px",
        }, 300, function () {
            menuStatus = true
        });
        //Perform scroll-to-top action
        $("html, body").animate({ scrollTop: 0 }, "slow");
    }
}); 
```

# android - 使用 sencha touch 2 开发的应用程序的推送通知

> ID：14133588
> 
> 赞同：3
> 
> 时间：2013-01-03T05:35:16.327
> 
> 标签：android, push-notification, sencha-touch-2, apple-push-notifications, phonegap-plugins

如何为 sencha touch 2 应用程序实现推送通知？作为第一步，我需要将设备 ID 发送到 php 服务器。我在这方面做得还不够远。我刚刚创建了一个用于启用/禁用推送通知的滑块

```
Ext.define('MyApp.view.SettingsPanel', {
    extend: 'Ext.Panel',
    xtype:'settingspanel',
    id:'settingspanel',
    backButton : {
        visible : true,
        ui : 'blue_back_button'
    },
    config: {

            items:[

                   {
                       xtype:'togglefield',
                       name: 'pushnotifications',
                       value: 1,
                       label: 'Enable Push Notifications?',
                       labelWidth: '40%',
                       height:'100%'
                   } 
                   ]
        },

}); 
```

因此，当我启用上述滑块时，我需要将设备 ID 发送到服务器。我需要有关 android 和 ios 设备的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:34:11.013

看一下这个：

[http://blog.pubnub.com/building-a-pubnub-powered-chat-app-with-sencha-touch-2/](http://blog.pubnub.com/building-a-pubnub-powered-chat-app-with-sencha-touch-2/)

我用它在我的应用程序中制作推送通知，它就像魅力一样。

# sqlite - 如何在我的 Windows Phone 8 应用程序中使用现有的 sqlite 数据库

> ID：14133589
> 
> 赞同：4
> 
> 时间：2013-01-03T05:35:18.613
> 
> 标签：sqlite, windows-phone, windows-phone-8, sqlite-net

我有一个来自现有 android 应用程序的数据库，我需要将其导入到我的 Windows Phone 8 应用程序中。这样做是为了创建一些在第一次加载应用程序时运行的庞大人口脚本的唯一方法吗？

我目前正在按照[这篇博文的](http://wp.qmatteoq.com/working-with-sqlite-in-windows-phone-8-a-sqlite-net-version-for-mobile/#comment-1522)指示使用 Peter Huene 的新 sqlite-net-wp8 。但是这些示例都是关于创建数据库的，而不是使用现有的。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:06:00.280

[此链接](http://wp.qmatteoq.com/import-an-already-existing-sqlite-database-in-a-windows-8-application/)显示如何在 Windows 8 中复制现有的 sqlite 数据库。在手机上执行此操作的能力是相同的。

1) 将 sqlite 数据库添加到您的项目中，并在其属性中将类型设置为内容。

2）当您的应用程序加载时，将文件加载到存储文件中。然后使用本地文件夹作为目标将其写回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:38:33.833

WP8 仅支持本地（在本地文件中）数据库。检查您的解决方案并搜索数据库文件。如果文件不存在，那么您只能通过脚本复制。

# node.js - Node.js HTTP 请求发送/接收的字节数

> ID：14133590
> 
> 赞同：21
> 
> 时间：2013-01-03T05:35:22.997
> 
> 标签：node.js

提供 HTTP 请求后，我想记录发送/接收的字节数。

此数据的一个简单来源是`req.connection.bytesRead`/ `.bytesWritten`。但是，这对于 HTTP 1.1 保持活动连接是有问题的，因为同一个套接字可以用于多个请求。 **我需要记录每个请求，而不是每个连接。**

解决方案必须位于 HTTP 方面，但我没有看到用于获取所需数据的方法。

为 Node.js 服务的 HTTP 请求计算读取/写入字节的正确方法是`http.Server`什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-08T05:20:30.263

不幸的是，我从来没有找到合适的方法来做到这一点。我已经采取了一些相当可怕的打鸭方法，但它适用于我的特定用例。如果其他人遇到此问题，您可以从这里开始并从那里进行改进。

## 模块 #1：“额外事件”

这个模块所做的就是让响应对象发出一个`finishBeforeSocketDestroy`事件。由于我在我的应用程序的几个地方需要这个事件，我有效地为这个鸭拳制作了一个单独的模块。 `app.use()`它在模块 #2 之前。

```
module.exports = function (req, res, next) {
    var end = res.end;

    res.end = function () {
        res.end = end;
        res.emit('finishBeforeSocketDestroy');
        res.end.apply(this, arguments);
    }

    next();
} 
```

## 模块#2：“统计”

该模块创建一个`req.stats`对象，其中包含各种有用的东西，用于在连接使用期间和连接完成后跟踪带宽使用情况。

```
var pollTime = 1000;
module.exports = function (req, res, next) {
    var pollInterval;

    function pollStats () {
        if (typeof req.stats._lastMeasuredTime === 'object') {
            var secondsSinceLastMeasurement = ((new Date() - req.stats._lastMeasuredTime) / 1000);
            req.stats.averageRate = {
                read: (req.socket.bytesRead - req.stats.bytesRead) / secondsSinceLastMeasurement,
                write: (req.socket.bytesWritten - req.stats.bytesWritten) / secondsSinceLastMeasurement
            };
        }
        req.stats._lastMeasuredTime = new Date();
        req.stats.bytesRead = req.socket.bytesRead;
        req.stats.bytesWritten = req.socket.bytesWritten;
    }

    req.stats = {
        startTime: new Date(),
        endTime: null,
        averageRate: {read: null, write: null},
        bytesRead: req.socket.bytesRead,
        bytesWritten: req.socket.bytesWritten,
        _lastMeasuredTime: new Date()
    };

    pollInterval = setInterval(pollStats, pollTime);

    res.on('finishBeforeSocketDestroy', function () {
        clearInterval(pollInterval);
        pollStats();
        req.stats.endTime = new Date();
    });

    next();
} 
```

就像我说的……乱七八糟。我只是发布它，因为打鸭可能是你唯一的选择。另请注意，`socket`可能会重复用于多个 HTTP 请求，如果您不小心，可能会导致您重复计算某些字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-03T08:06:13.963

只需在每次响应后存储流量值并计算“完成”或“结束”处理程序中的差异：

```
// server.onRequest:
  ...
  req._prevBytesWritten = 0;

// response.onFinish/onEnd:
  ...
  responseLen = req.socket.bytesWritten - req._prevBytesWritten;
  req._prevBytesWritten = req.socket.bytesWritten; 
```

# ruby-on-rails - 如何在 has_many、belongs_to 关系中向“fields_for”添加多个文本字段？

> ID：14133592
> 
> 赞同：2
> 
> 时间：2013-01-03T05:35:43.753
> 
> 标签：ruby-on-rails

我做了一个rails应用程序。我应该按如下方式实现`has_many`、和模型之间的`belong_to`关系，并写了如下内容：`Author``Location`

在模型中：

```
class Author < ActiveRecord::Base
  belongs_to :location
end

class Location < ActiveRecord::Base
  has_many :authors
  accepts_nested_attributes_for :authors
end 
```

在 location/new.html.erb 中：

```
<%= form_for(@location) do |f| %>
  <%= f.label :location_name %>
  <%= f.text_field :location_name %>
  <%= f.fields_for :authors do |a| %>      
    <%= a.label :name %>
    <%= a.text_field :name %>
  <% end %>
<% end %> 
```

我的问题是，即使该位置可以有很多作者，它只显示一个作者的文本字段`fields_for :authors`，**那么我怎样才能根据用户的意愿为作者附加尽可能多的文本字段呢？**

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T06:10:45.927

Ryan Bates 的精美教程：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# java - 如何使用 YAMLBeans 在另一个值中获取 YAML 值

> ID：14133593
> 
> 赞同：1
> 
> 时间：2013-01-03T05:35:51.780
> 
> 标签：java, yaml

对不起，我没有给出这么好的标题。这是我的 yml (databases.yml)

```
default: <br>
  #Default host - localhost <br>
  host: localhost <br>
  #Default username - root <br>
  username: root <br>
  #Default password - pass. Set to nopass for no password <br>
  password: pass <br>
  #Default database - BMod <br>
  database: bmod <br> 
```

这是我的java代码：

```
 YamlReader reader = new YamlReader(new FileReader(BMod.config+"/databases.yml")); <br>
    Object object = reader.read(); <br>
    System.out.println(object); <br>
    Map map = (Map)object; <br>
    System.out.println(map.get("default")); <br> 
```

正如您所看到的 System.out.println(map.get("default")); 我可以在主文件中很好地获取值。但是说我想获得“default.host”。如何使用 YAMLBeans 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T11:26:59.693

你为什么不试试：

```
 System.out.println(map.get("default").get("host")); 
```

# actionscript-3 - Flash 滑块上拇指图形的大小

> ID：14133594
> 
> 赞同：0
> 
> 时间：2013-01-03T05:35:54.440
> 
> 标签：actionscript-3, flash

我可以使用 为我的 Flash 滑块分配自定义设计`mySlider.setStyle("thumbUpSkin", myThumbUpSkinShape)`。但是，这不会将拇指的大小设置为我定义的形状。如何将拇指图形的大小设置为自定义设计形状的确切大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:47:52.173

我能够像这样改变拇指的大小：

```
mySlider.getChildAt(1).width = 100;
mySlider.getChildAt(1).height = 50; 
```

# jquery - 无法在 Rails 中使用 jquery 加载新表单

> ID：14133595
> 
> 赞同：0
> 
> 时间：2013-01-03T05:35:55.780
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我正在查看 Ryan Bates 截屏视频[http://railscasts.com/episodes/136-jquery-ajax-revised](http://railscasts.com/episodes/136-jquery-ajax-revised)，了解如何使用 jquery 在 index.html.erb 中加载新表单。

这是我的 index.html.erb

```
<%= link_to 'New Mail', new_mail_path, id: "new_mail", remote: true %> 
```

这是我的 new.js.erb

```
$("#new_mail").hide().after('<%= j render("form") %>') 
```

但这不起作用。尝试调试（在 chrome 中）时，在控制台下没有错误，但在网络中，我看到“304 Not Modified”响应而不是 302，有什么帮助吗？

谢谢

编辑-它起作用了，我最终不得不将“format.js”放入创建方法*中*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:41:20.413

代替

```
$("#new_mail").hide().after('<%= j render("form") %>') 
```

和

```
$("#new_mail").after('<%= j render("form") %>'); 
```

# java - 使用 TreeMap 时 Java“无法转换为 Comparable”

> ID：14133600
> 
> 赞同：9
> 
> 时间：2013-01-03T05:36:21.497
> 
> 标签：java, casting, treemap, comparable, sortedmap

> **可能重复：**
> [Java：SortedMap、TreeMap、Comparable？如何使用？](https://stackoverflow.com/questions/1440006/java-sortedmap-treemap-comparable-how-to-use)

我正在使用 Java [JungI](http://jung.sourceforge.net/doc/api/index.html)图形包和 Netbeans 7。我从 Java 收到以下错误：

```
 Exception in thread "main" java.lang.ClassCastException: graphvisualization.MyVertex cannot be cast to java.lang.Comparable
    at java.util.TreeMap.put(TreeMap.java:542) 
```

这是与错误相关的代码：

```
SortedMap<MyVertex, Double> vMap = new TreeMap<MyVertex, Double>();
       double curRank = 0;
       for(MyVertex v: g.getVertices())                 //g is a SparseGraph<MyVertex, MyEdge>
       {
           curRank = vertexRank.getVertexScore(v);
           vMap.put(v, curRank);                        //**Here is my Error**
       } 
```

MyVertex 类是我为图形制作的一个类。以下是 MyVertex 的代码

```
public class MyVertex 
{
    int vID;                    //id for this vertex
    double centrality;          //centrality measure for this vertex
    int degree;                 //the degree of this vertex

    public MyVertex(int id)
    {
        this.vID = id;
        this.centrality=0;
        this.degree=0;
    }

    public double getCentrality()
    {
        return this.centrality;
    }

    public void setCentrality(double centrality)
    {
        this.centrality = centrality;
    }

    public int getDegree()
    {
        return this.degree;
    }

    public void setDegree(int deg)
    {
        this.degree = deg;
    }

    public void incrementDegree()
    {
        this.degree++;
    }

    public void decrementDegree()
    {
        this.degree--;
    }

    @Override
    public String toString()
    {
        return "v"+vID;
    }

    int compareTo(MyVertex v) 
    {
        return (this.degree < v.degree) ? 1 : 0;          //this will do descendingly
    }
} 
```

1.  如何将 MyVertex 类型转换为 Comparables？
2.  为什么这是必要的？（我没有立即看到原因）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T05:39:00.680

> 如何将 MyVertex 类型转换为 Comparables？

实现 Comparable 接口。

```
public class MyVertex implements Comparable<MyVertex> {

  @Override
  public int compareTo(Object o) {
   // comparison logic goes here

  }
 } 
```

或者，您可以将 a 传递`comparator`给`TreeMap`.

```
 new TreeMap<MyVertex, Double>(new Comparator<MyVertex>()
        {
            public int compare(MyVertex o1, MyVertex o2)
            {
                //comparison logic goes here
            } 
    }); 
```

> 为什么这是必要的？

因为您存储在树图中，它是一个排序图（按键排序）。地图键需要具有可比性以确保地图中的排序顺序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T05:38:13.343

该行为符合[TreeMap 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#put%28K,%20V%29)：

> 如果指定的键无法与映射中当前的键进行比较，则抛出 ClassCastException

基本上有两种方法可以使它工作：

*   要么`MyVertex`实现`Comparable<MyVertex>`
*   或将 a 传递`Comparator<MyVertex>`给 TreeMap 的构造函数

请注意，在 Java 7 之前，只有在向地图添加第二项时才会引发异常，而在 Java 7 中，向地图中添加一项时会引发异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T05:38:38.727

`MyVertex`类应该实现`Comparable`为树映射使用 compareTo 方法根据键对映射进行排序。

```
public class MyVertex implements Comparable<MyVertex> {

  @Override
  public int compareTo(MyVertex o) {
   // do the comparison logic

  }
 } 
```

其他选项是将比较器对象传递给 TreeMap [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html#TreeMap(java.util.Comparator](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html#TreeMap(java.util.Comparator) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:38:52.350

您的课程尚未实现 Comparable 接口。

你有方法 compareTo(); 所以只需将**实现 Comparable**添加到您的类**MyVertex**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T06:33:27.640

**-**首先你应该让 MyVertex 类实现 Comparable。

**例如：**

```
public class MyVertex implements Comparable {

  @Override
  public int compareTo(MyVertex o) {

  }
 } 
```

**-**但是如果你想**根据对象的多个属性进行比较**，那么最好使用`java.util.Comparator<T>`接口。

```
new TreeMap<MyVertex, Double>(new Comparator<MyVertex>()
        {
            public int compare(MyVertex o1, MyVertex o2)
            {

            } 
    }); 
```

# c# - 何时在父站点中调用 Application_BeginRequest

> ID：14133602
> 
> 赞同：0
> 
> 时间：2013-01-03T05:36:31.667
> 
> 标签：c#, asp.net, webforms

我有这个场景，我的网站 www.skinb5.com 应该重定向到 www.skinb5.com/au/

和 www.skinb5.com/au 应该直接去 www.skinb5.com/au 和 www.skinb5.com/us

应该去 www.skinb5.com/us。

www.skinb5.com 是一个父站点，除了重定向之外几乎什么都不做。/au/ 和 /us/ 是位于它下面的子站点。

请在我的父站点中查看我的 Global.asax 文件，其中唯一的重定向发生。

问题是当我去 www.skinb5.com/us/ 它返回 200 这很好。但

www.skinb5.com/au/ 它返回 302 到 www.skinb5.com/au/。虽然它没有进入无限循环，但我担心它为什么返回 302。

你可能想在这里测试[http://www.internetofficer.com/seo-tool/redirect-check/](http://www.internetofficer.com/seo-tool/redirect-check/)

**我的问题是，当我直接调用 www.skinb5.com/au/ 时，会调用父站点中的 application_beginRequest 吗？不应该直接去子站点吗？如果是这样，302 重定向是如何发生的。**

```
protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var redirectSite = "au";
        HttpCookie languageCookie = HttpContext.Current.Request.Cookies.Get("Customer.SelectLanguageID");
        if (languageCookie != null)
        {
            redirectSite = languageCookie.Value.Split('-')[1];

        }

        string rawUrl = HttpContext.Current.Request.RawUrl;
        if (string.IsNullOrEmpty(rawUrl))
        {
            rawUrl = "/";
        }

        rawUrl = redirectSite + rawUrl;
        bool useSsl = IsCurrentConnectionSecured();
        var storeHost = GetStoreHost(useSsl);
        if (storeHost.EndsWith("/"))
            storeHost = storeHost.Substring(0, storeHost.Length - 1);
        string url = storeHost + '/' + rawUrl;
        url = url.ToLowerInvariant();
        HttpContext.Current.Response.Redirect(url, true);
        HttpContext.Current.Response.End();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:39:42.200

重定向告诉浏览器加载不同的 URL。浏览器执行此操作就像在地址栏中键入新 URL 一样。这是一个和其他任何请求一样的请求。

所以所有的请求和重定向都会导致`Application_BeginRequest()`触发。

如果您不希望它对重定向的请求执行任何操作，则需要测试目标 URL 并决定是否要采取任何操作。

# asp.net - 在已部署的 ASP.net 中在 DTS 中运行

> ID：14133605
> 
> 赞同：0
> 
> 时间：2013-01-03T05:37:10.290
> 
> 标签：asp.net, sql-server, vb.net-2010

我创建了一个从 sql server 2000 远程运行 DTS 的 Web 应用程序。我让它在 Visual Studio 环境中工作，但是当我部署它时，它不起作用并且错误消息显示： **DataPump_Task Failed。**

我不确定我的发现，但是...问题与我的 IIS 设置有关吗？

我在 Windows 7 上运行 IIS 7。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:03:23.680

当您从 ASP 页面执行 DTS 包时，该包会在网站访问者的安全上下文中执行，该访问者可能是 Windows 用户（如果网站配置为基本或 NT 身份验证）或匿名帐户的安全上下文.

包不会在提供用于从 SQL Server 加载包的用户 ID 的安全上下文中执行。因此，确保执行包的帐户对包可能使用的所有资源具有适当的 Windows 权限非常重要，例如磁盘文件、DLL 或其他驱动程序（用于导入/导出操作），尤其是当网站处于配置为匿名访问。

如果一个包在 DTS 设计器中工作并且在其他客户端应用程序中工作，但在 Web 应用程序中失败，则应从权限问题开始进行故障排除。

有关确定将使用哪个 Windows 帐户来执行 DTS 包的其他信息，请参阅这篇文章[http://support.microsoft.com/kb/269074/EN-US](http://support.microsoft.com/kb/269074/EN-US)

# windows-phone-7 - 如何在 WP7 中获取蓝牙设备的蓝牙 ID？

> ID：14133607
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:37:18.687
> 
> 标签：windows-phone-7, bluetooth, windows-phone-8

我想开发一个应用程序，我想在其中获取不同设备的蓝牙 ID。

我的概念是当我启动我的应用程序时，我想在第一种形式的加载事件中获取不同设备的蓝牙 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:26:29.267

WP7 不支持第三方开发者的蓝牙 API。WP8 可以。WP8 可以遍历所有**配对**的蓝牙设备。[您可以在此处](https://stackoverflow.com/questions/13490318/possible-keys-for-alternateidentities-in-peerfinder)详细了解 WP8 支持哪些类型的蓝牙开发人员方案。有关如何获取与 WP8 配对的所有设备的集合的示例，请参阅[此](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Bluetooth:_Phone_to_device)。

# facebook - 简单的 Facebook 登录脚本不起作用

> ID：14133620
> 
> 赞同：0
> 
> 时间：2013-01-03T05:39:11.000
> 
> 标签：facebook, login, facebook-javascript-sdk

我试图让用户登录到 facebook，然后在警报中显示他们的用户 ID。

然而，这段代码没有返回任何东西。我究竟做错了什么？

```
<html>                                                                                                                                                                      
   <head>                                                                                                                                                                    
     <title>Login to Facebook</title>                                                                                                                                                  
   </head>                                                                                                                                                                   
  <body>
      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : 'APP ID',
            channelUrl : 'http://www.mydomain.net/zoozTest/channel.html',
            status     : true, 
            cookie     : true,
            xfbml      : true,
            oauth      : true,
          });
        };
        (function(d){
           var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           d.getElementsByTagName('head')[0].appendChild(js);
         }(document));

       //LOGIN FUNCTION 
       function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                alert('Success!');
            }else{
                alert('Login Failed!');
            }
        }, {scope: 'email'});
     }
      </script>
      <div onclick="login();">Login with Facebook</div>
    </body>                                                                                                                                                                  
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:59:45.157

你的代码，逐字复制，对我来说很好。三件事：

1：愚蠢的问题，但是您已经将“APP ID”替换为您的实际应用程序ID，对吗？否则会报错

2：检查您的应用程序设置。您是否正确指定了您的应用程序域和“带有 facebook 登录的网站”URL？

3：从技术上讲，你有一个竞争条件。如果您单击“使用 Facebook 登录”div 并尝试在 FB JS SDK 初始化（它异步加载）之前运行您的 login() 函数，您将收到一个错误，因为不会定义全局 FB 对象。我会在 window.fbasyncinit 函数的底部添加一个 console.log 以确保正在定义 FB（对于测试，对于生产，您可能希望在 Facebook 启动之前阻止登录显示，或者构建一些一种队列，在尝试使用之前检查全局 FB 对象是否已定义，如果没有则添加到队列中）。

您在 javascript 控制台中是否有任何错误？

# qt - 在 qml 中使用加载器

> ID：14133622
> 
> 赞同：4
> 
> 时间：2013-01-03T05:39:11.477
> 
> 标签：qt, qml

我有多个 QML 文件。我只是想链接它们。然后我想从我导航到的每个页面返回我的主页。我在每个页面中都使用加载器这是我的代码。

```
import QtQuick 1.1
Rectangle{
    id:welcome
    width:480
    height:272
    Loader{
        id:loader
        focus:false
        anchors.fill: parent
    }
    gradient: Gradient {
        GradientStop { position: 0.0; color: "light blue" }
        GradientStop { position: 1.0; color: "blue" }
    }
    Text{
        text:"\n\t\tPRESS ENTER"
        font.bold:true
        font.pointSize: 17
    }
    Button {
    id: wel
        height:30;
        x:parent.width/2-30
        y:parent.height/2-30
        focus:true
        border.color:"black"
        opacity: activeFocus ? 1.0 : 0.5
        Text{   
            text:"WELCOME"
            anchors.horizontalCenter:wel.horizontalCenter;
            anchors.verticalCenter:wel.verticalCenter;
        }   
        Keys.onReturnPressed: {
            wel.focus=false
            loader.focus=true;
            anchors.fill=parent
           loader.source="Home.qml";
            //welcome.visible=false;
        }
    }
} 
```

我的问题是，每当我单击按钮时，它都会加载新文件。但是欢迎页面不会去。两个文件都将重叠。当我做 visible=false 时，完整的 UI 就会消失。我得到一个白屏。谁能帮我解决这个问题？如何加载其他文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:26:24.173

要加载多个页面，您需要使用[Connections](http://doc-snapshot.qt-project.org/4.8/qml-connections.html)元素来处理来自已加载页面的信号。

```
Loader {
    id: windowLoader
    source: "Welcome.qml"
    focus: true

    property bool valid: item !== null
}
Button {
    Keys.onReturnPressed: {
        windowLoader.source = "Page1.qml"
    }
}
Connections {
    ignoreUnknownSignals: true
    target: windowLoader.valid? windowLoader.item : null
    onChangeToPage2: { windowLoader.source = "Page2.qml" }
    onPageExit: { windowLoader.source = "Welcome.qml" }
} 
```

从您加载的页面中，您需要发出“changeToPage2”和“pageExit”[信号](http://doc.qt.digia.com/main-snapshot/qmlevents.html)。发出的信号将由 Connections 元素处理。

Page1.qml：

```
Rectangle {
    id: page1
    signal changeToPage2
    signal pageExit
    Button {
        id: exitButton
        Keys.onReturnPressed: { page1.pageExit() }
    }
} 
```

# objective-c - 使用 ARC 的自定义委托 iOS 6 不起作用

> ID：14133623
> 
> 赞同：2
> 
> 时间：2013-01-03T05:39:25.400
> 
> 标签：objective-c, ios, xcode, cocoa, delegates

我是 Objective-C 编程的初学者。我在这里和其他网站上搜索了解决问题的方法，但没有找到。我想在系统加载之前创建一个登录视图。然后，登录后我想关闭它。在我的项目中，我使用 ARC，而不使用 Storyboard。

当我调试并查看函数“efetuarLogin”时，属性委托的值为 0x000000。我认为它是空白的，不是吗？根据我在互联网上找到的教程和其他提示，这是代码委托的正确方法。你能帮我检查一下吗？这是代码：

登录.h

```
#import <UIKit/UIKit.h>
@class Login;

@protocol LoginDelegate <NSObject>
@required
    - (void)loginDidFinish: (Login *)login;
@end

@interface Login : UIViewController{
    __weak id<LoginDelegate> delegate;
}

@property (nonatomic, weak) id <LoginDelegate> delegate;

- (IBAction)efetuarLogin:(id)sender;

@end 
```

登录.M

```
#import "Login.h"

@implementation Login
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)efetuarLogin:(id)sender {
    [delegate loginDidFinish:self];
}
@end 
```

主控制器.h

```
#import <UIKit/UIKit.h>
#import "Login.h"

@interface MainController : UITabBarController <LoginDelegate>

@end 
```

主控制器.m

```
#import "MainController.h"
#import "Login.h"
#import "ModalViews.h"
#import "Alerts.h"
#import "ViewPadrao.h"
#import "TableView.h"

@implementation MainController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    ModalViews *modalViews = [[ModalViews alloc] initWithNibName:@"ModalViews" bundle:nil];
    Alerts *alerts = [[Alerts alloc] initWithNibName:@"Alerts" bundle:nil];
    ViewPadrao *viewPadrao = [[ViewPadrao alloc] initWithNibName:@"ViewPadrao" bundle:nil];
    TableView *tableView = [[TableView alloc] initWithNibName:@"TableView" bundle:nil];

    self.viewControllers = @[modalViews, alerts, viewPadrao, tableView];
}
- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    Login *login = [[Login alloc] initWithNibName:@"Login" bundle:nil];
    [login setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentViewController:login animated:NO completion:nil];
}
- (void)loginDidFinish: (Login *)login{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sua mensagem aqui" message:@"Mensagem" delegate:self cancelButtonTitle:@"Fechar" otherButtonTitles:nil];
    [alert show];
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

而AppDelegate.m的方法didFinishLaunchingOptions：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    mainController = [[MainController alloc] init];

    window.rootViewController = mainController;

    [window makeKeyAndVisible];

    return YES;
} 
```

抱歉，代码量很大。我已经很感激了！！

我正在使用 ViewDidAppear 方法向用户显示登录。但是当我关闭并出现 MainController 时，方法 viewdidapper 再次创建登录。我如何显示登录一次？当我尝试在 viewdidload 上执行此操作时，它不起作用。登录没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:42:22.620

在您`MainViewController.m`创建`login`对象时

```
- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    Login *login = [[Login alloc] initWithNibName:@"Login" bundle:nil];
    login.delegate = self;  //add this line
    [login setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentViewController:login animated:NO completion:nil];
} 
```

## 编辑：在问题中看到 OP 的编辑后（应该是不同的线程）

您的视图控制器层次结构错误。理想的流量应该是

1) 直接从 App 委托显示登录控制器。

2）成功登录后，从登录控制器显示MainViewController。

# ruby-on-rails - Rails 3.2.9 中声明式验证中的 :on 选项

> ID：14133627
> 
> 赞同：1
> 
> 时间：2013-01-03T05:39:41.093
> 
> 标签：ruby-on-rails, ruby, validation

**我需要在创建**和**更新**过程中使用方法**validates_confirmation_of**在表单中检查密码确认。所以我们有**:on**选项，我们可以在其中指定**:on => :save**。但是，它根本不起作用。仅当我在不遵循 Rails 的 DRY 方面的验证方法上分别指定**:on => :create, :on => :update时，它​​才能正常工作。**请帮忙。

 ******谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:48:45.627

如果你想同时验证**create**和**update**，那么你不应该指定**:on => :save** ，默认情况下验证是针对**create**和**update的。**

如果您只想在创建时验证或仅在更新时验证，那么只有您应该指定 :on => :create 或 :on => :update******

# javascript - js 为插件返回多种方法 .apply()

> ID：14133631
> 
> 赞同：1
> 
> 时间：2013-01-03T05:40:13.763
> 
> 标签：javascript, plugins, methods, return, return-value

我正在尝试为插件返回多方法。

结构如下图。如果我应用不止一种方法，例如：

```
return ob[a].apply(), ob[b].apply(); 
```

将返回错误。请指教！！非常感谢你！！

```
ob = {
 a: function(){ return{ A: function(){   } }},
 b: function(){ return{ B: function(){   } }},

}

$.fn.plugin = function(){
  return ob[a].apply();
}

$(el).plugin().A() 
```

我想要，返回 2 方法 a 和 b 然后我可以使用插件

```
 $(el).plugin().A()
  $(el).plugin().B() 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:18:09.503

在 javascript 中，您只能从函数返回一个对象。所以，`return ob[a].apply(), ob[b].apply();`行不通。

您可以返回包含这些值的对象。您可能对[如何动态合并两个 JavaScript 对象的属性感兴趣？](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically).

动态组合对象的替代方法是稍微调整代码的工作方式：

```
ob = {
    a: function(){ return function(){ return 'a';  } },
    b: function(){ return function(){ return 'b';  } },
}     
 function myPlugin() {
     var rv = new Object();
     rv['a'] = ob['a'].apply();
     rv['b'] = ob['b'].apply();
     return rv;
 }
var o = myPlugin();
alert(o.a());
alert(o.b()); 
```

# ios - 构建通用 iOS 应用程序的最有效方法

> ID：14133633
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:40:21.317
> 
> 标签：ios, user-interface

我是 Objective-C 的新手，正在构建我的第一个通用应用程序。到目前为止，我的设计已经针对 iPhone 5 进行了优化，但我还想针对 iPad 和原始 iPhone 进行优化。从高层次来看，为 iOS 应用程序构建“响应式”界面的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:00:16.663

这取决于您的应用程序的设计。通常，您可以制作在所有设备上看起来都正确的可调整大小的视图。但由于 iPad 的屏幕比 iPhone 大得多，所以这不是一个好主意。因此，最佳做法是为所有 iPhone 设备制作一个可调整大小的界面，并为 iPad 设备制作另一个设计完全不同的界面（不要忘记配备 Retina 屏幕的 iPad）。

# chef-infra - 厨师食谱等待 git clone 完成

> ID：14133636
> 
> 赞同：1
> 
> 时间：2013-01-03T05:41:02.980
> 
> 标签：chef-infra, chef-recipe

我已经尝试了几种不同的方法，包括创建一个新配方并通知该配方运行，但我一直遇到同样的问题，即**在资源运行之前克隆的 repo 目录不存在`file`，所以我收到了一个致命错误。**

***我的问题是，我可以在文件资源尝试执行之前让 git clone 完成，还是有更好的方法来做到这一点？***

SN：我正在尝试通过新的用户环境设置来完成交易 - 所以在创建新用户之后，我将从将为该用户部署的 git repo 中克隆一堆配置文件。

```
 git "/home/#{user_id}/.myconfigs" do
    repository "https://url/to/repo"
    reference "master"
    user user_id
    group user_id
    action :checkout
    not_if "test -d /home/#{user_id}/.myconfigs"
    #notifies :run, "recipe[zsh_workstation::zshrc]"
  end

  file "/home/#{user_id}/.zshrc" do
    content IO.read("/home/#{user_id}/.myconfigs/.zshrc")
    owner user_id
    group user_id
    mode "0600"
    action :create_if_missing
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:44:04.523

检查[厨师跑步的解剖](http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run)

在厨师编译你的文件资源的那一刻，git资源还没有运行（甚至没有启动），所以文件“/home/#{user_id}/.myconfigs/.zshrc”不存在。

可能的解决方法：

1.  这将在 git 使用[FileUtils](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-i-cp)创建文件后复制文件。

    ```
    ruby_block "create /home/#{user_id}/.zshrc" do
      block do
        ::FileUtils.copy("/home/#{user_id}/.myconfigs/.zshrc", "/home/#{user_id} /.zshrc") unless ::File.exists? "/home/#{user_id}/.zshrc" 
      end
    end 
    ```

2.  符号链接而不是复制。

    ```
    link "/home/#{user_id}/.zshrc" do
      to "/home/#{user_id}/.myconfigs/.zshrc"
    end 
    ```

3.  在编译阶段运行 git 资源。

    ```
    git "/home/#{user_id}/.myconfigs" do
      [...]
      action :nothing
    end.run_action :checkout 
    ```

# asp.net - 使用 FB、ASP.NET 和登录事件登录。如何？

> ID：14133642
> 
> 赞同：0
> 
> 时间：2013-01-03T05:41:37.770
> 
> 标签：asp.net, facebook, login

我是 5 年的开发人员，所以我对 asp.net 并不陌生，但我是 JQuery 和 JSON 的新手，所以也许这就是我没有得到它的原因。我按照这里关于如何成功登录 facebook 的教程进行操作，并且它有效！ [http://www.codeproject.com/Articles/450535/Using-Facebook-login-in-ASP-NET-application-withou](http://www.codeproject.com/Articles/450535/Using-Facebook-login-in-ASP-NET-application-withou)

但我的问题是我在我的网站上制作了一个“评论”系统，我想让用户输入他们的评论，然后在它的正下方单击“使用 facebook 登录”按钮，然后当它成功登录时，拥有它将评论附加到评论列表中。

我唯一的问题是我不知道如何让登录在服务器端触发 C# 代码。我是否在这里遗漏了一些东西以挂钩 facebook 的“登录成功”事件？

我怀疑它与这里的这些代码行有关：

```
enter codedd here

// This method will be called after the user login into facebook.
    function OnLogin(response) {
        if (response.authResponse) {
            FB.api('/me?fields=id,name,gender,email,birthday', LoadValues);                    
        }
    }

    //This method will load the values to the labels
    function LoadValues (me) {
        if (me.name) {
            document.getElementById('displayname').innerHTML = me.name;
            document.getElementById('FBId').innerHTML = me.id;
            document.getElementById('DisplayEmail').innerHTML = me.email;
            document.getElementById('Gender').innerHTML = me.gender;
            document.getElementById('DOB').innerHTML = me.birthday;
            document.getElementById('auth-loggedin').style.display = 'block';
                        }
    } 
```

或在这里：

```
<div id="fb-root"></div> <!-- This initializes the FB controls-->   
<div class="fb-login-button" autologoutlink="true" scope="user_birthday,email" >
  Login with Facebook
 </div> <!-- FB Login Button -->   
<!-- Details --> 
<div id="auth-status">    
<div id="auth-loggedin" style="display: none">
    Hi, <span id="displayname"></span><br/>
    Your Facebook ID : <span id="FBId"></span><br/>
    Your Email : <span id="DisplayEmail"></span><br/>
    Your Sex:, <span id="Gender"></span><br/>
    Your Date of Birth :, <span id="DOB"></span><br/>        
</div>
</div> 
```

任何线索或帮助将不胜感激。我是一个很长时间的潜伏者（也许 10 年？），第一次发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:38:52.820

这是我想到的第一件事，它不是一个完美的解决方案，但它可能适用于这种情况。简而言之，使用 Javascript 在正确的位置（而不是通过用户单击）**使用虚拟按钮触发 PostBack 。**

1) 在页面的某处放置一个 asp.net 按钮 (runat=server)。这将是一个虚拟按钮，仅用于触发回发，因此使其宽度 = 0 或类似的东西。让我们称之为**btnDummmy**。使**ClientIDMode=static**。

2) 将**服务器端事件附加到 btnDummy**。将您的服务器端评论保存逻辑放在那里。**注释应该在 asp.net 文本框中**( runat=server)。

3) 将 btnDummy 也放入**updatePanel**中。（这样您就不会丢失跨度值、显示名称、FBId、blabla）

4) 当您在 LoadValues(me) 结束时使用 Facebook 登录，然后返回调用**btnDummy.click()**；

这应该可以解决问题...

# macos - 预览 OSX 错误（？）将 .eps 文件中的贝塞尔曲线转换为 .pdf

> ID：14133647
> 
> 赞同：4
> 
> 时间：2013-01-03T05:42:16.867
> 
> 标签：macos, bezier, eps

我有一个小的 .eps 文件，它使用粗线宽的贝塞尔曲线来达到一定的效果。该文件在 gv 中显示为我期望的那样，但是当我将其转换为 .pdf （例如，使用 ps2pdf 或通过在运行 OSX 的 Mac 上使用 Preview 打开文件）时，它会错误地渲染一些曲线（或者至少，不是以我期待的方式）；在曲线的中间，曲线的法线似乎“翻转”，产生了奇怪的伪影。

这是有问题的 .eps 文件，作为代码：

```
%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 0 0 750 200
gsave 50 50 scale 1 3 translate

/edge{4 dict begin
/y2 exch def
/x2 exch def
/y1 exch def
/x1 exch def
gsave
1 setgray
1 8 div setlinewidth
newpath
x1 y1 moveto x2 y2 lineto
stroke
0 setgray
1 20 div setlinewidth
newpath
x1 y1 moveto x2 y2 lineto
stroke
x1 y1 0.07 0 360 arc fill stroke
x2 y2 0.07 0 360 arc fill stroke
grestore
end}def

/cur_edge{7 dict begin
/T exch def
/angle2 exch def
/y2 exch def
/x2 exch def
/angle1 exch def
/y1 exch def
/x1 exch def
gsave
1 setgray
1 8 div setlinewidth
newpath
x1 y1 moveto 
x1 angle1 cos T mul add y1 angle1 sin T mul add
x2 angle2 cos T mul add y2 angle2 sin T mul add
x2 y2 curveto
stroke
0 setgray
1 20 div setlinewidth
newpath
x1 y1 moveto 
x1 angle1 cos T mul add y1 angle1 sin T mul add
x2 angle2 cos T mul add y2 angle2 sin T mul add
x2 y2 curveto
stroke
x1 y1 0.07 0 360 arc fill stroke
x2 y2 0.07 0 360 arc fill stroke
grestore
end}def

/fat_edge{7 dict begin
/T exch def
/angle2 exch def
/y2 exch def
/x2 exch def
/angle1 exch def
/y1 exch def
/x1 exch def
gsave
0 setgray
1 4 div setlinewidth
newpath
x1 y1 moveto 
x1 angle1 cos T mul add y1 angle1 sin T mul add
x2 angle2 cos T mul add y2 angle2 sin T mul add
x2 y2 curveto
stroke
0.9 setgray
1 5 div setlinewidth
newpath
x1 y1 moveto 
x1 angle1 cos T mul add y1 angle1 sin T mul add
x2 angle2 cos T mul add y2 angle2 sin T mul add
x2 y2 curveto
stroke
grestore
end}def

/fat_vertex{4 dict begin
/angle exch def
/y exch def
/x exch def
/T 0.14 def
gsave
0.9 setgray
1 5.5 div setlinewidth
newpath
x y moveto
x angle cos T mul add y angle sin T mul add lineto
stroke
grestore
end}def

/extra_fat_vertex{5 dict begin
/y exch def
/x exch def
/w 0.16 def
gsave
1 setgray
newpath
x w sub y w sub moveto
x w add y w sub lineto
x w add y w add lineto
x w sub y w add lineto
closepath
fill
stroke
0 setgray
/v 0.12 def
newpath
x v sub y v sub moveto
x v add y v sub lineto
x v add y v add lineto
x v sub y v add lineto
closepath
fill    
0.9 setgray
/u 0.095 def
newpath
x u sub y u sub moveto
x u add y u sub lineto
x u add y u add lineto
x u sub y u add lineto
closepath
fill    
grestore
end}def

/extra_fat_triangle{5 dict begin
/y exch def
/x exch def
/w 0.16 def
gsave
1 setgray
newpath
x w sub y w sub moveto
x w 1.1 mul add y lineto
x w sub y w add lineto
closepath
fill
stroke
0 setgray
/v 0.12 def
newpath
x v sub y v sub moveto
x v add y lineto
x v sub y v add lineto
closepath
fill    
0.9 setgray
/u 0.095 def
newpath
x u sub y u sub moveto
x u 0.85 mul add y lineto
x u sub y u add lineto
closepath
fill    
grestore
end}def

/extra_fat_triangle_left{5 dict begin
/y exch def
/x exch def
/w 0.16 def
gsave
1 setgray
newpath
x w add y w sub moveto
x w 1.1 mul sub y lineto
x w add y w add lineto
closepath
fill
stroke
0 setgray
/v 0.12 def
newpath
x v add y v sub moveto
x v sub y lineto
x v add y v add lineto
closepath
fill    
0.9 setgray
/u 0.095 def
newpath
x u add y u sub moveto
x u 0.85 mul sub y lineto
x u add y u add lineto
closepath
fill    
grestore
end}def

0 0 90 2 0 270 1 cur_edge
% 0 0 270 2 0 90 1 cur_edge
2 0 90 0 0 270  1 cur_edge
0 0 180 0.5 -2 180 1 cur_edge
0.5 -2 90 1.5 -1.3 180 0.5 cur_edge
1.5 -1.3 270 2.5 -2 270 0.7 cur_edge
2.5 -2 90 0.5 -2 270 1 cur_edge %
2.5 -2 0 3 -0.75 0 1 cur_edge
3 -0.75 270 1.5 -1.3 0 0.7 cur_edge
3 -0.75 180 1.5 -1.3 90 0.7 cur_edge
3 -0.75 90 2 0 0 0.5 cur_edge

5 0 translate
0 0 90 2 0 270 1 fat_edge
% 0 0 270 2 0 90 1 fat_edge
2 0 90 0 0 270  1 fat_edge
0 0 180 0.5 -2 180 1 fat_edge
0.5 -2 90 1.5 -1.3 180 0.5 fat_edge
1.5 -1.3 270 2.5 -2 270 0.7 fat_edge
2.5 -2 90 0.5 -2 270 1 fat_edge
2.5 -2 0 3 -0.75 0 1 fat_edge
3 -0.75 270 1.5 -1.3 0 0.7 fat_edge
3 -0.75 180 1.5 -1.3 90 0.7 fat_edge
3 -0.75 90 2 0 0 0.5 fat_edge

0 0 90 fat_vertex
0 0 180 fat_vertex
0 0 270 fat_vertex
2 0 0 fat_vertex
2 0 90 fat_vertex
2 0 270 fat_vertex
0.5 -2 180 fat_vertex
0.5 -2 90 fat_vertex
2.5 -2 90 fat_vertex
2.5 -2 270 fat_vertex
1.5 -1.3 0 fat_vertex
1.5 -1.3 90 fat_vertex
1.5 -1.3 180 fat_vertex
1.5 -1.3 270 fat_vertex
3 -0.75 0 fat_vertex
3 -0.75 90 fat_vertex
3 -0.75 180 fat_vertex
3 -0.75 270 fat_vertex

5 0 translate
0 0 90 2 0 270 1 fat_edge
% 0 0 270 2 0 90 1 fat_edge
2 0 90 0 0 270  1 fat_edge

0 0 180 0.5 -2 180 1 fat_edge
0.5 -2 90 1.5 -1.3 180 0.5 fat_edge
1.5 -1.3 270 2.5 -2 270 0.7 fat_edge
2.5 -2 90 0.5 -2 270 1 fat_edge
2.5 -2 0 3 -0.75 0 1 fat_edge
3 -0.75 270 1.5 -1.3 0 0.7 fat_edge
3 -0.75 180 1.5 -1.3 90 0.7 fat_edge
3 -0.75 90 2 0 0 0.5 fat_edge

0 0 90 fat_vertex
0 0 180 fat_vertex
0 0 270 fat_vertex
2 0 0 fat_vertex
2 0 90 fat_vertex
2 0 270 fat_vertex
0.5 -2 180 fat_vertex
0.5 -2 90 fat_vertex
2.5 -2 90 fat_vertex
2.5 -2 270 fat_vertex
1.5 -1.3 0 fat_vertex
1.5 -1.3 90 fat_vertex
1.5 -1.3 180 fat_vertex
1.5 -1.3 270 fat_vertex
3 -0.75 0 fat_vertex
3 -0.75 90 fat_vertex
3 -0.75 180 fat_vertex
3 -0.75 270 fat_vertex

0 0 extra_fat_triangle
2 0 extra_fat_triangle_left
0.5 -2 extra_fat_triangle
1.5 -1.3 extra_fat_vertex
2.5 -2 extra_fat_triangle_left
3 -0.75 extra_fat_vertex

grestore
%eof 
```

奇怪的是，.pdf 仅在调整为某些特定大小时才会显示不正确（或者：它以某些大小正确显示）。我似乎无法预测它何时会起作用。

以下是它正确显示（部分图像）的方式：

![正确的图像](../Images/3a8244d82c12b08173881a043923e675.png)

在这里它被调整大小并显示不正确：

[![不正确的图像](../Images/b5bf51d74be11cf3244755f9863b9a1d.png)](https://i.stack.imgur.com/lsvLn.jpg)
[（来源：[dannyc at math.uchicago.edu](https://math.uchicago.edu/%7Edannyc/pictures/incorrect_image.jpg)）]

请注意，这些图像是从 .pdf 获得的 .jpg。如果您将上面的代码保存为 .eps 文件并在 Mac 上使用 Preview 打开它，我认为它会表现出与我的计算机上相同的病理状况。

任何建议都会非常受欢迎。我对贝塞尔曲线在 .pdf 中的显示方式知之甚少（或：任何东西），不知道这里可能存在什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:47:32.557

这是一个显示相同渲染问题的简化案例：

```
%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 0 0 400 200
gsave 50 50 scale 1 3 translate

0 setgray
0.05 setlinewidth
newpath
0 0 moveto 
0 1 2 -1 2 0 curveto
stroke

grestore
%eof 
```

没有比这更简单的了：只有两个点的贝塞尔路径，所有点都具有整数值。

看起来 Apple 的渲染器在曲线中心附近有一些数值不稳定。如果您稍微调整其中一个曲线控制点，则不会发生错误：

```
0 1.00001 2 -1 2 0 curveto 
```

所以有一个解决方法：在您的原始文件中，在每条曲线的一个角度中添加一个小的软糖因子（几分之一度）。

我将每个更改`/angle1 exch def`为`0.01 add /angle1 exch def`，它对我有用。这是[EPS 文件](http://www.snoize.com/Code/curve.eps)和生成的[PDF 文件](http://www.snoize.com/Code/curve.pdf)。

（当然这不是必需的，但在您[提交错误](https://developer.apple.com/bugreporter/)并且 Apple 发布修复程序之前，这可能是最方便的解决方案。）

# c# - 找不到命名空间名称“Lastfm”

> ID：14133652
> 
> 赞同：0
> 
> 时间：2013-01-03T05:42:31.713
> 
> 标签：c#, namespaces, last.fm

我正在使用 Visual Studio 2010，这是我第一次使用 API。当我尝试使用 Last.FM API 时，我在第 10 行和第 48 行得到“找不到类型或命名空间名称‘Lastfm’...”。我查看了有关类似主题的其他一些 StackOverflow 问题，但是似乎没有一个直接适用。

[我从http://code.google.com/p/lastfm-sharp/downloads/list](http://code.google.com/p/lastfm-sharp/downloads/list)下载了 lastfm-sharp.dll并将其放在项目文件夹中。然后我将其添加为参考，不记得做过其他任何事情。[然后我使用http://code.google.com/p/lastfm-sharp/wiki/Examples](http://code.google.com/p/lastfm-sharp/wiki/Examples)中的示例来编写我的代码。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Lastfm.Services;

namespace MusicOrganize
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            DIRECTORY = this.FilePath.Text;
        }

        private void FilePath_TextChanged(object sender, EventArgs e)
        {
            DIRECTORY = this.FilePath.Text;
        }

        //Choose what Folder to work with
        private void BrowseBtn_Click(object sender, EventArgs e)
        {
            if (folderBrowserDialog1.ShowDialog() == DialogResult.OK)
            {
                this.FilePath.Text = folderBrowserDialog1.SelectedPath;
            }
        }

        //Organize Music in selected Directory
        private void OrganizeBtn_Click(object sender, EventArgs e)
        {
            //Put all tracks into one folder
            Music.Consolidate(DIRECTORY);

            string API_KEY = "****";
            string API_SECRET = "****";
            Session session = new Session(API_KEY, API_SECRET);

            Music.GetTrackTags();
        }

        public string DIRECTORY;
    }
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:48:11.140

获取 C# 文档。

您要么错过顶部的 USING 语句以及包含该类命名空间的所有其他语句，要么您忘记添加项目或 dll 作为参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:51:58.013

```
And placed it in the projects folder? 
```

你把你`lastfm-sharp.dll`的 .It 放在一个项目文件夹中是不够的。把你的 dll 放在`bin`文件夹中。

# python - 使用 Twython 从 twitter 获取最大推文

> ID：14133654
> 
> 赞同：0
> 
> 时间：2013-01-03T05:42:38.257
> 
> 标签：python, twitter, social-networking, twython

好吧，我是 Twython 的新手，通过这个库我正在检索推文，但只有 10-15 条推文被获取。

我用来检索推文的代码片段如下：

```
user_timeline=twitter.getUserTimeline(screen_name="dksbhj")
for tweet in user_timeline:
    print tweet['text'] 
```

什么可以用来增加 10-15 条推文的推文数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:31:32.617

您应该将`count`参数添加到您的请求中：

```
user_timeline=twitter.getUserTimeline(screen_name="dksbhj", count=50)
for tweet in user_timeline:
    print tweet['text'] + "\n" 
```

每个请求的NB`count`不能大于 200。
如果您也想检索转推，请将参数添加`include_rts=1`到您的请求中：

```
user_timeline=twitter.getUserTimeline(screen_name="dksbhj", count=50, include_rts=1) 
```

# java - Liferay：设置视图页面的标题名称

> ID：14133663
> 
> 赞同：1
> 
> 时间：2013-01-03T05:43:42.997
> 
> 标签：java, liferay

我有一个portlet，我想在加载不同页面时设置标题。我找到的解决方案是使用[这里](http://www.liferay.com/community/wiki/-/wiki/Main/Developing+portlets+with+improved+SEO+capabilities)`PortalUtil.addPageTitle (String myTitle, HttpServletRequest request)`提到的。但我不知道这里以及如何使用它。任何的想法？只要不是 javascript 方法，任何替代方法也可以使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:32:39.017

```
PortalUtil.addPageTitle (String myTitle, HttpServletRequest request) 
```

设置页面的标题 (htmlTitle)。不是 portlet 的标题。

有两种方法可以解决这个问题，

Liferay 提供了一个通过 portlet 首选项设置标题的选项。

```
PortletPreferences portletSetup = PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout, instanceId);
    Locale locale = new Locale("en", "US"); //straight to the point
    portletSetup.setValue("portlet-setup-title-" + LocaleUtil.toLanguageId(locale), title);
    portletSetup.setValue("portlet-setup-use-custom-title", "true");
    portletSetup.store(); 
```

在您的 portlet 类中，您将标题设置为响应。

```
response.setTitle("Dynamic Title"); 
```

如果要更改页面的标题，可以通过两种不同的方式进行设置。您可以使用控制面板为每页添加唯一标题

![添加标题](../Images/c6d96e88b2afc708d7fc5b2fcbd3b097.png)

另一种方法是通过编程（下面是伪代码）。

```
layout.setHtmlTitle("dynamic Title");
layoutLocalserviceUtil.updateLayout(layout); 
```

# java - java.util.concurrent.ExecutorService 是否应该作为 java.sql.Connection 关闭？

> ID：14133666
> 
> 赞同：0
> 
> 时间：2013-01-03T05:43:59.290
> 
> 标签：java, executorservice

我怀疑是否`java.util.concurrent.ExecutorService`应该在所有任务完成或取消后关闭？

我有这样的方法：

```
public void testProxies() {

    // 5 thread
    ExecutorService exec = Executors.newFixedThreadPool(5);

    try {
        while(condition){
            exec.execute(new Runnable() {
                @Override
                public void run() {
                    //some task
                }
            });
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        exec.shutdown();// should be shutdown here?
    }
} 
```

这是正确的使用方式`ExecutorService`吗？

我怎样才能重用`ExecutorService`?

`ExecutorService`应该关机还是放手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:44:46.670

是的。如果您不想再执行任何任务，应该关闭 ExecutorService。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:44:59.087

*   如果你关闭它，你就不能重复使用它。
*   如果您不将其关闭，您的程序将无法退出，因为会有实时的非守护线程。

所以你需要`shutdown`在某个阶段调用让你的程序退出，但前提是你知道你不需要向你的执行者提交额外的任务。

我一般做什么：

*   我使 ExecutorService 成为我班级的一个领域
*   我提供了一个`stop`or`shutdown`方法，我的类的用户需要调用它来调用执行器的关闭方法。请注意，在所有提交的任务完成（或已成功取消）之前，执行程序实际上不会关闭。

另一种方法是添加一个关闭钩子，它将在 JVM 退出时关闭您的执行程序。

# java - 互斥方法

> ID：14133667
> 
> 赞同：7
> 
> 时间：2013-01-03T05:44:18.547
> 
> 标签：java, multithreading

我正在学习 Java 多线程编程。我有以下逻辑：

假设我有一个 A 类

```
class A {
    ConcurrentMap<K, V> map;

    public void someMethod1 () {
        // operation 1 on map
        // operation 2 on map
    }

    public void someMethod2 () {
        // operation 3 on map
        // operation 4 on map
    }
} 
```

现在我不需要同步“someMethod1”或“someMethod2”中的操作。这意味着如果有两个线程同时调用“someMethod1”，我不需要序列化这些操作（因为 ConcurrentMap 会完成这项工作）。

但我希望“someMethod1”和“someMethod2”是互斥的，这意味着当某个线程正在执行“someMethod1”时，另一个线程应该等待进入“someMethod2”（但应该允许另一个线程进入“someMethod1”）。

所以，简而言之，有没有办法让“someMethod1”和“someMethod2”不是自己的互斥体，而是彼此的互斥体？

我希望我把我的问题说得足够清楚......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:20:51.890

我尝试了几次使用高级构造的尝试，但没有想到任何东西。我认为这可能是一个使用低级 API 的机会：

> **编辑：**我实际上认为您正在尝试设置一个本质上很棘手的问题（参见倒数第二段）并且可能不需要（参见最后一段）。但是话虽如此，这就是它的完成方式，我将在这个答案的结尾留下颜色评论。

```
private int someMethod1Invocations = 0;
private int someMethod2Invocations = 0;

public void someMethod1() {
    synchronized(this) {
        // Wait for there to be no someMethod2 invocations -- but
        // don't wait on any someMethod1 invocations.
        // Once all someMethod2s are done, increment someMethod1Invocations
        // to signify that we're running, and proceed
        while (someMethod2Invocations > 0)
            wait();
        someMethod1Invocations++;
    }

    // your code here

    synchronized (this) {
        // We're done with this method, so decrement someMethod1Invocations
        // and wake up any threads that were waiting for that to hit 0.
        someMethod1Invocations--;
        notifyAll();
    }
}

public void someMethod2() {
    // comments are all ditto the above
    synchronized(this) {
        while (someMethod1Invocations > 0)
            wait();
        someMethod2Invocations++;
    }

    // your code here
    synchronized(this) {
        someMethod2Invocations--;
        notifyAll();
    }
} 
```

上面的一个明显问题是它可能导致[线程饥饿](http://en.wikipedia.org/wiki/Resource_starvation)。例如，`someMethod1()`正在运行（并阻塞`someMethod2()`s），就在它即将完成时，另一个线程出现并调用`someMethod1()`. 这进行得很好，就像它完成*另一个*线程启动一样`someMethod1()`，依此类推。在这种情况下，`someMethod2()`将永远没有机会运行。这实际上不是上述代码中的直接错误；这是您的设计需求的问题，一个好的解决方案应该积极解决。我认为一个公平的[AbstractQueuedSynchronizer](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/AbstractQueuedSynchronizer.html)可以做到这一点，尽管这是留给读者的练习。:)

最后，我忍不住要插入一个意见：鉴于`ConcurrentHashMap`操作非常快，最好只在这两种方法周围放置一个互斥锁并完成它。所以是的，线程必须排队才能调用`someMethod1()`，但是每个线程都会非常快地完成它的轮次（从而让其他线程继续进行）。这不应该是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T05:47:58.600

**这可能行不通**（见评论） - 留作参考。

* * *

一种方法是使用[Semaphores](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)：

*   一个信号量`sem1`，一个许可证，链接到 method1
*   一个信号量`sem2`，一个许可证，链接到方法 2

进入method1时，尝试获取sem2的permit，如果有的话立即放行。

有关实现示例，请参见[这篇文章。](https://stackoverflow.com/questions/13320713/mutually-exclusive-method-execution-in-java)

注意：在您的代码中，即使 ConcurrentMap 是线程安全的，操作 1 和操作 2（例如）也不是原子的 - 因此在您的场景中可能有以下交错：

*   线程 1 运行操作 1
*   线程 2 运行操作 1
*   线程 2 运行操作 2
*   线程 1 运行操作 2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T07:23:47.643

我认为这应该有效

```
class A {
    Lock lock = new Lock();

    private static class Lock {
        int m1;
        int m2;
    }

    public void someMethod1() throws InterruptedException {
        synchronized (lock) {
            while (lock.m2 > 0) {
                lock.wait();
            }
            lock.m1++;
        }

        // someMethod1 and someMethod2 cannot be here simultaneously

        synchronized (lock) {
            lock.m1--;
            lock.notifyAll();
        }
    }

    public void someMethod2() throws InterruptedException {
        synchronized (lock) {
            while (lock.m1 > 0) {
                lock.wait();
            }
            lock.m2++;
        }

        // someMethod1 and someMethod2 cannot be here simultaneously

        synchronized (lock) {
            lock.m2--;
            lock.notifyAll();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:48:16.593

**首先** ：您的地图与其 ConcurrentMap 一样是线程安全的。这意味着此地图上的操作（如添加、包含等）是线程安全的。

**其次，这并不能保证即使您的方法（somemethod1 和 somemethod2）也是线程安全的**。**所以你的方法不是互斥的，两个线程可以同时访问它们。**

 ****现在您希望它们彼此互斥**：一种方法可以将所有操作（操作 1，..操作 4）放在一个方法中，并基于每个条件调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T17:15:31.520

我认为如果没有自定义同步器，您将无法做到这一点。我掀起了这个，我称之为它，`TrafficLight`因为它允许具有特定状态的线程在停止其他线程的同时通过，直到它改变状态：

```
public class TrafficLight<T> {

    private final int maxSequence;
    private final ReentrantLock lock = new ReentrantLock(true);
    private final Condition allClear = lock.newCondition();
    private int registered;
    private int leftInSequence;
    private T openState;

    public TrafficLight(int maxSequence) {
        this.maxSequence = maxSequence;
    }

    public void acquire(T state) throws InterruptedException {
        lock.lock();
        try {
            while ((this.openState != null && !this.openState.equals(state)) || leftInSequence == maxSequence) {
                allClear.await();
            }
            if (this.openState == null) {
                this.openState = state;
            }
            registered++;
            leftInSequence++;
        } finally {
            lock.unlock();
        }
    }

    public void release() {
        lock.lock();
        try {
            registered--;
            if (registered == 0) {
                openState = null;
                leftInSequence = 0;
                allClear.signalAll();
            }
        } finally {
            lock.unlock();
        }
    }
} 
```

`acquire()`如果另一个状态处于活动状态，将阻塞，直到它变为非活动状态。

那里有助于防止线程饥饿，只允许最大数量的`maxSequence`线程按顺序传递（然后它们必须像其他线程一样排队）。您可以创建一个使用时间窗口的变体。

对于您的问题`someMethod1()`，并会在开始和结束时`someMethod2()`分别以不同的状态调用 acquire() 。`release()`**

# asp.net-mvc - 更改 asp.net mvc 中的默认目录结构

> ID：14133675
> 
> 赞同：1
> 
> 时间：2013-01-03T05:45:57.433
> 
> 标签：asp.net-mvc, asp.net-mvc-3, directory-structure

我正在研究规模相当大的 asp.net mvc 项目。我是 MVC 的新手。

由于 Asp.Net MVC 具有默认文件夹结构 Controller、Views 或 Model，因此我们可以更改此结构。如果我有不同的文件夹而不是控制器怎么办？是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:30:07.200

尽管可以更改[`LocationFormats`视图引擎的](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)，但不建议这样做，因为它会与标准 MVC 约定混淆。

相反，您应该考虑为每个主要功能“模块”使用[区域。](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)

您的文件夹结构将类似于：

```
/(MVC Root)
/Areas
   /Sales
      /Controllers
      /Views
   /Financials
      /Controllers
      /Views 
```

等等

# android - 当我滚动自定义列表视图时，复选框未选中

> ID：14133680
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:46:30.510
> 
> 标签：android, checkbox, android-listview

当我在列表视图中有更多项目并且我选择了一些复选框并将其向下滚动以选择更多复选框然后上面选择的复选框被取消选择。

请帮忙。我可以在哪里保存检查的状态和位置以及何时刷新列表。下面给出的代码。

```
 protected void onCreate(Bundle savedInstanceState) {

     dladapter = new DifferenceListAdapter(this,
                prodCodeArr, prodDescArr, serialBatchArr, expDtArr, qtyArr, serialNo, 0);
        diffeneceLv.setAdapter(dladapter);}

     static class ViewHolder {
    TextView srNotv, prodCodetv, prodDesctv, serialBatchNotv, expDatetv, qtytv;
    CheckBox consCheckBox;
}

     public class DifferenceListAdapter extends BaseAdapter{        
    Context c;
    String[] prodCode, prodDesc, expDate, qty, serialNo, serialBatchNo;
    //TextView srNotv, prodCodetv, prodDesctv, serialBatchNotv, expDatetv, qtytv;
    EditText consumedEt, disputeEt, OTCEt, patientnameEt;
    //final ArrayList<String> chkList = new ArrayList<String>();
    ArrayList<Boolean> chkState;
    //CheckBox consCheckBox;
    private boolean checked = false;
    ViewHolder viewHolder;
    View row;
    int f=0;

public DifferenceListAdapter(Context c, String[] prodCode, String[] prodDesc, String[] serialBatchNo, String[] expDate, String[] qty, String[] serialNo, int f){

        this.c = c;
        this.prodCode= prodCode;
        this.prodDesc= prodDesc;
        this.serialBatchNo= serialBatchNo;
        this.expDate = expDate;
        this.qty=qty;
        this.serialNo= serialNo;
        this.f= f;

        chkState = new ArrayList<Boolean>();

    }

public String[] getChecked(){

    return chkList.toArray(new String[chkList.size()]);
}   

    public int getCount() {
        // TODO Auto-generated method stub
        return prodCode.length;
    }

    public Object getItem(int arg0) {
        // TODO Auto-generated method stub

        return serialBatchNo[arg0];
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }
    public CheckBox getCheckBox() {
        return viewHolder.consCheckBox;
    }

    public void toggleChecked() {
        checked = !checked;

    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        final int p= position;
        //if (convertView == null) {
        viewHolder=new ViewHolder();
        LayoutInflater inflater= (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row= inflater.inflate(R.layout.consumedstockitemrow, null);     
        viewHolder.consCheckBox = (CheckBox) row.findViewById(R.id.conschkbx);
        viewHolder.srNotv=(TextView) row.findViewById(R.id.rowcdiffSrNoTv);
        viewHolder.prodCodetv=(TextView) row.findViewById(R.id.rowcdiffProductCodeTv);
        viewHolder.prodDesctv=(TextView) row.findViewById(R.id.rowcdiffProdDescTv);
        viewHolder.serialBatchNotv=(TextView) row.findViewById(R.id.rowcdiffSerialBatchTv);
        viewHolder.expDatetv=(TextView) row.findViewById(R.id.rowcdiffExpDtTv);
        viewHolder.qtytv=(TextView) row.findViewById(R.id.rowcdiffQtyTv);

        viewHolder.consCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                 CheckBox cb = (CheckBox) buttonView;

                    if(cb.isChecked()== true)
                    {

                        if(chkList.contains(serialBatchNo[p]))
                        {

                        }
                        else
                        {
                        chkList.add(serialBatchNo[p]);
                        }

                    }
                    else
                    {

                        if(chkList.contains(serialBatchNo[p]))
                        {
                            chkList.remove(serialBatchNo[p]);
                        }

                    }

            }
        });

        viewHolder.srNotv.setText(String.valueOf(p+1));
        viewHolder.prodCodetv.setText(prodCode[p].toString());
        viewHolder.prodDesctv.setText(prodDesc[p].toString());
        viewHolder.serialBatchNotv.setText(serialBatchNo[p].toString());
        viewHolder.expDatetv.setText(expDate[p].toString());
        viewHolder.qtytv.setText(qty[p].toString());

        return row;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T14:35:17.500

我发现一些解决方法不是最好的解决方案，但是如果视图（CheckBox）不再可见，则在复选框侦听器上执行其工作提供选中复选框的位置列表以及在 getView 上设置复选框的状态

```
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    if(buttonView.isShown()) // chek if checkbox is visible 
    {
        int position = buttonView.getId();  // get position of check box 
        _selected[position] = buttonView.isChecked(); // set true or false  in list of seleted checkboxes 

    }

} 
```

getView 看起来像这样

```
 @Override
public View getView(int position, View convertView, ViewGroup parentView) {

    View view = convertView;
    if (view == null) {
        LayoutInflater inflater = activity.getLayoutInflater();
        view = inflater.inflate(R.layout.layout, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.tv = (TextView) rowView.findViewById(R.id.text);
        viewHolder.cb = (CheckBox) rowView.findViewById(R.id.check_box);
        viewHolder.cb.setOnCheckedChangeListener(this);
        view.setTag(viewHolder);
    }

    ViewHolder holder = (ViewHolder) view.getTag();
    holder.tv.setText("Text");
    holder.cb.setChecked(_selected[position]); //Geting state of check box from array
    holder.cb.setId(position); // set check box ID(position in adapter)

    return view;

} 
```

视图持有者

```
class ViewHolder
{
    TextView tv;
    CheckBox cb;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:54:56.837

下面是我使用的工作代码

## ***使用 Array-adapter 在列表视图中显示复选框***。

**MainActivity.java**

```
package com.rdc.activity;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {

    private ListView mainListView = null;
    private Planet[] planets = null;
    private ArrayAdapter<Planet> listAdapter = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of 
            //   CheckBox and Planet.

        mainListView.setOnItemClickListener(new
                         AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View item,
            int position, long id) {
        Planet planet = listAdapter.getItem(position);
        planet.toggleChecked();
        PlanetViewHolder viewHolder = 
                           (PlanetViewHolder) item
               .getTag();
                viewHolder.getCheckBox()
                     .setChecked(planet.isChecked());
                }
                });

        // Create and populate planets.
        planets = (Planet[]) getLastNonConfigurationInstance();
        if (planets == null) {
            planets = new Planet[] { new Planet("Mercury"),
                    new Planet("Venus"), new Planet("Earth"),
                    new Planet("Mars"), new Planet("Jupiter"),
                    new Planet("Saturn"), new Planet("Uranus"),
                    new Planet("Neptune"), new Planet("Ceres"),
                    new Planet("Pluto"), new Planet("Haumea"),
                    new Planet("Makemake"), new Planet("Eris") };
        }
        ArrayList<Planet> planetList = new ArrayList<Planet>();
        planetList.addAll(Arrays.asList(planets));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new PlanetArrayAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);
    }

    /** Holds planet data. */
    private static class Planet {
        private String name = "";
        private boolean checked = false;

        public Planet() {
        }

        public Planet(String name) {
            this.name = name;
        }

        public Planet(String name, boolean checked) {
            this.name = name;
            this.checked = checked;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public boolean isChecked() {
            return checked;
        }

        public void setChecked(boolean checked) {
            this.checked = checked;
        }

        public String toString() {
            return name;
        }

        public void toggleChecked() {
            checked = !checked;
        }
    }

    /** Holds child views for one row. */
    private static class PlanetViewHolder {
        private CheckBox checkBox;
        private TextView textView;

        public PlanetViewHolder() {
        }

        public PlanetViewHolder(TextView textView, CheckBox checkBox) {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox() {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox) {
            this.checkBox = checkBox;
        }

        public TextView getTextView() {
            return textView;
        }

        public void setTextView(TextView textView) {
            this.textView = textView;
        }
    }

    /** Custom adapter for displaying an array of Planet objects. */
    private static class PlanetArrayAdapter extends ArrayAdapter<Planet> {

        private LayoutInflater inflater;

        public PlanetArrayAdapter(Context context, List<Planet> planetList) {
            super(context, R.layout.simplerow, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            Planet planet = (Planet) this.getItem(position);
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.simplerow, null);

                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

                convertView.setTag(new PlanetViewHolder(textView, checkBox));

                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        CheckBox cb = (CheckBox) v;
                        Planet planet = (Planet) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Re-use existing row view
            else {

                PlanetViewHolder viewHolder = (PlanetViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);

            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());

            return convertView;
        }

    }

    public Object onRetainNonConfigurationInstance() {
        return planets;
    }
} 
```

**main.xml**（用于列表视图）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/mainListView">
    </ListView>

</LinearLayout> 
```

**simplerow.xml**（用于列表视图的行）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:id="@+id/rowTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:textSize="16sp">
    </TextView>

    <CheckBox
        android:id="@+id/CheckBox01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="6sp"
        android:focusable="false">
    </CheckBox>

</RelativeLayout> 
```

这是**结果屏幕**..

![在此处输入图像描述](../Images/2cbd44a83ad9bd5a07c2eab42eb65b87.png)

如果您对此仍有任何问题，请告诉我！

这里是[完整教程](http://rdcworld-android.blogspot.in/2013/01/listview-with-checkbox-using.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:03:41.760

只需覆盖适配器的 getView 方法：

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        if (convertView == null)
        {
            convertView = inflater.inflate(R.layout.row, parent, false);
            wrapper = new YourWrapper(convertView);
            convertView.setTag(wrapper);
        }
        else
        {
            wrapper = (YourWrapper) convertView.getTag();
        }

        wrapper.getChecker().setOnCheckedChangeListener(
                new OnCheckedChangeListener()
                {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        // Get the position that set for the checkbox using setTag.
                        int getPosition = (Integer) buttonView.getTag();
                        // Set the value of checkbox to maintain its state.
                        list.get(getPosition).setCheck(buttonView.isChecked());
                    }
                });
        wrapper.getChecker().setTag(position);
        wrapper.getTags().setText(list.get(position).getTitle());
        wrapper.getChecker().setChecked(list.get(position).getCheck());

        return convertView;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:57:37.773

无论您要返回到 BaseAdapter 中的 getItem 的任何对象，请确保您在每个项目上使用一个选中的布尔对象。并且对于每个检查的项目，您可以将选中的布尔值设置为 true ..并在 getView 中检查项目是否被检查而不是检查复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T05:59:46.923

对于你的问题，我有一个解决方案。在我的项目中，我使用自定义适配器扩展基本适配器，在 getview 方法中使用此代码：

```
public View getView(final int position, View convertView,
                ViewGroup parent) {

        if (convertView == null) {

            LayoutInflater li = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = li.inflate(R.layout.contact_row, null);

        }

        TextView tv_name = (TextView) convertView
                .findViewById(R.id.contactnameid);
        TextView tv_no = (TextView) convertView
                .findViewById(R.id.contactnoid);

        tv_name.setText(names[position]);
        tv_no.setText(numbers[position]);

        final CheckBox ch_bx = (CheckBox) convertView
                .findViewById(R.id.contactchkboxid);

        ch_bx.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                CheckBox ch = (CheckBox) v
                        .findViewById(R.id.contactchkboxid);

                if (ch.isChecked()) {
                    itemchecked.set(position, true);
                    Final_SMS_Nos.add(numbers[position]);
                    Log.v("SMS No adding", "" + Final_SMS_Nos);

                } else if (!ch.isChecked()) {
                    itemchecked.set(position, false);
                    Final_SMS_Nos.remove(numbers[position]);
                    Log.v("SMS No deleting", "" + Final_SMS_Nos);
                }

            }
        });

        ch_bx.setChecked(itemchecked.get(position));

        return convertView;

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-19T19:28:27.100

尝试`setChecked()`将`setOnCheckedChangeListener()`.

# ms-access - Microsoft Access 子表单写入冲突问题

> ID：14133682
> 
> 赞同：1
> 
> 时间：2013-01-03T05:46:35.330
> 
> 标签：ms-access, vba, ms-access-2010, conflict

我有一个表单，其中包含一个子表单，该表单显示链接到我的一个表的可编辑字段。对于我目前正在进行的项目，其中一个要求是我必须跟踪对记录进行最后一次更改的时间以及更改的人员。

所以我所做的是为表单和子表单中的每个可编辑文本框或组合框制作它，以便他们在他们的`BeforeUpdate`和事件上都有`AfterUpdate`事件。

例如我的 BeforeUpdate 文本框：

```
Private Sub textbox_BeforeUpdate(Cancel As Integer)
    If Not isValidUser Then
        Cancel = True
        Me.textbox.Undo
    End If
End Sub 
```

我的更新后是：

```
Private Sub textbox_AfterUpdate()
    updateRecord Me.textbox.Value, UserNameWindows
End Sub 
```

和 updateRecord 是：

```
Public Sub updateRecord(bucNumber As String, updater As String)

    Dim Dbs As Object
    Dim rst As Object
    Dim fldEnumerator As Object
    Dim fldColumns As Object

    sqlStatement = "SELECT fName " & _
                        "FROM t_Staff " & _
                        "WHERE uName='" & updater & "';"

    'Getting fullname of user via username
    Set rst = CurrentDb.OpenRecordset(sqlStatement)

    'Setting fullname to updater variable
    updater = rst(0)

    'Clean Up
    Set rst = Nothing

    'Opening Bucket Contents
    Set Dbs = CurrentDb
    Set rst = Dbs.OpenRecordset("Bucket Contents")
    Set fldColumns = rst.Fields

    'Scan the records from beginning to each
    While Not rst.EOF
        'Check the current column
    For Each fldEnumerator In rst.Fields
        'If the column is named Bucket No
        If fldEnumerator.Name = "Bucket No" Then
            'If the Bucket No of the current record is the same as bucketNumber
                If fldEnumerator.Value = bucNumber Then
                    'Then change the updated fields by updater and todays date
                    rst.Edit
                    rst("Last Updated By").Value = updater
                    rst("Last Updated On").Value = Date
                    rst.Update
                End If
            End If
        Next
        'Move to the next record and continue the same approach
        rst.MoveNext
    Wend

    'Clean Up
    Set rst = Nothing
    Set Dbs = Nothing
End Sub 
```

好的，现在是奇怪的事情，当我在主窗体中对控件进行修改时，这完全可以正常工作，但是一旦尝试更改子窗体中的某些内容，它就会引发写入冲突。

如果我选择保存记录，它会忽略我的代码来更新谁最后修改它以及何时以及如果我选择放弃更改，它会运行我的代码并更新它已更改！

任何人都知道有什么问题或更好的方法吗？

# python - 从 MediaWiki 的 API wikitext 中提取 Python 中的模板参数

> ID：14133684
> 
> 赞同：3
> 
> 时间：2013-01-03T05:46:54.060
> 
> 标签：python, xml, json, mediawiki

有没有办法从 MediaWikia 的 API 中提取部分文本？例如，此链接将所有内容转储为 XML 格式：

```
http://marvel.wikia.com/api.php?action=query&prop=revisions&titles=All-New%20X-Men%20Vol%201%201&rvprop=content&format=xml 
```

但是它没有太多的结构，即使是 json 格式。

我想获取 , 等的文本`Writer1_1`。`Penciler1_1`也许我的参数不正确，所以也许还有其他选项可以输出。

[您可以在此处](http://marvel.wikia.com/api.php?action=query&prop=revisions&titles=All-New%20X-Men%20Vol%201%201&rvprop=content)以更易于阅读的方式查看内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:09:31.713

我确信正则表达式和最终拆分可能会更有效，但这可以完成您所要求的工作。

```
import urllib2
import re
data = urllib2.urlopen('http://marvel.wikia.com/api.php?action=query&prop=revisions&titles=All-New%20X-Men%20Vol%201%201&rvprop=content')
regex = re.compile('(Writer1_1|Penciler1_1)')
for line in data.read().split('|'):
    if regex.search(line):
        #assume everything after = is the full name
        print ' '.join(line.split()[2:]) 
```

# html - css width 属性为不同的元素提供不同的输出

> ID：14133686
> 
> 赞同：1
> 
> 时间：2013-01-03T05:47:21.280
> 
> 标签：html, css

我为 2 个元素提供了相同的宽度，一个是表单的输入文本字段，另一个是 div。但是它们在显示时都呈现不同的宽度。输入字段似乎比 div 元素更宽。有人可以解释我如何解决它吗？输入字段显示更多宽度是否有一些固定比例？帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:55:45.120

利用 ：

```
input
{
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
} 
```

[工作小提琴](http://jsfiddle.net/sPN5N/)

# javascript - 为什么此 Ember 应用程序中未呈现模板？

> ID：14133689
> 
> 赞同：4
> 
> 时间：2013-01-03T05:47:38.100
> 
> 标签：javascript, ember.js, handlebars.js

我正在尝试使用此处的文档来学习 Ember：http: [//emberjs.com/guides/templates/handlebars-basics/](http://emberjs.com/guides/templates/handlebars-basics/)

我遵循该链接上给出的示例，因此具有以下两个文件和内容，仅此而已。但是，当我打开浏览器并打开 index.html 时，我看不到`Hello World`. 该`World`部分不显示。但是，根据该页面底部附近的说明，`World`应该显示在页面上。

任何有助于理解为什么这不起作用的帮助都会很棒。谢谢！

**索引.html**

```
<h2>First Ember Application</h2>

<script type="text/x-handlebars">
    Hello {{name}}.
</script>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.rc.1/handlebars.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.0.0-pre.2/ember-1.0.0-pre.2.min.js"></script>
  <script src="app.js"></script>
</body>

</html> 
```

**应用程序.js**

```
window.App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend({
    name: "World"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:34:02.410

您需要一个 Ember.View 将变量传递到模板并与模板连接。您可以设置控制器的 Context 并让视图将其用作其内容，但对于您的简单示例：

```
window.App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend({});

App.ApplicationView = Ember.View.extend({
  templateName : 'application',
  name: 'World'
}) 
```

值得注意的是，Ember 将寻找一组具有“应用程序”命名约定的视图、控制器和模板。这是完整小提琴的链接[http://jsfiddle.net/gNKJj/1/](http://jsfiddle.net/gNKJj/1/)

# android - 不同设备的网格数

> ID：14133693
> 
> 赞同：3
> 
> 时间：2013-01-03T05:47:52.527
> 
> 标签：android, gridview, view

我有一个问题，我应该知道`gridview`为不同设备显示的每行中的数量。就像`gridview`平板电脑、WVGA 手机的每行数量..因为它们的屏幕宽度不同..有代码可以检查吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T06:01:40.690

好的，您可以使用以编程方式设置列数

```
float scalefactor = getResources().getDisplayMetrics().density * 100;
int width = getWindowManager().getDefaultDisplay().getWidth();
int columns = (int) ((float)width / (float) scalefactor);
gridView.setNumColumns(columns); 
```

其中 100 是所有设备 m 的每列的固定宽度...我在平板电脑中获得 8 列，在三星 2.2 设备中获得 3 列，在三星 note 中获得 4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:52:14.493

试试这个方法，[getNumColumns();](http://developer.android.com/reference/android/widget/GridView.html#getNumColumns%28%29)

这将为您提供列数。

用法：

```
gridView.getNumColumns(); 
```

# delphi - 如何在 Fire Monkey HD 应用程序中导入 Macapi Core 基础和其他 Macapi 命名空间？

> ID：14133695
> 
> 赞同：1
> 
> 时间：2013-01-03T05:47:58.247
> 
> 标签：delphi, firemonkey

我想在 Fire Monkey HD 应用程序中使用 Macapi Core 基础和其他 Macapi 命名空间。如何导入它们。我试图将其包含在接口部分下的使用子句中，但它显示**无法解析单元名称 Macapi.CoreFoundation。**请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:12:29.387

我已经解决了我的问题。我必须首先在目标平台部分下添加 OSX 平台并选择 OSX 平台作为目标平台，然后它将解析 Macapi 命名空间。

# tridion - Tridion Experience Manager (XPM) 实施

> ID：14133696
> 
> 赞同：2
> 
> 时间：2013-01-03T05:48:01.123
> 
> 标签：tridion, tridion-content-delivery, experience-manager

我试图了解围绕实现 Tridion XPM 的不同工件。不幸的是，我没有找到任何可以回答我的问题的文章。

例如，内容交付服务器（在 WebSphere 上）可以有四种不同的应用程序，一种用于内容交付（处理发布），一种用于 Web 服务（oData 实现），一种用于 XPM（带有会话预览）和实际预览应用程序。我假设我们可以将这些应用程序中的一个或多个合并为一个以实现简单的实现（使用一个或两个消费网站）。

我的问题是：

1.  我们如何简化要制作的应用程序 (WAR) 的数量？虽然我总是喜欢将预览应用程序与 Tridion 的框架分开。将 Content Delivery 会话预览 Web 服务作为独立的 Java/JSP Web 应用程序与将其添加到现有应用程序相比有哪些好处？
2.  如何将 webservice(oData) 关联/集成到 XPM 或其他常见的基本功能，如组件链接？

例如，如果我在未启用 oData 的情况下发布页面，它将拆分`tridion:ComponentLink`标签，就像我启用它一样，它将拆分`tcdl:Link`标签。所以我需要想出自定义类来阅读这些标签？这最终需要在预览应用程序中添加 Tridion 框架。（假设我没有在我的预览中包含任何 Tridion 框架来获得干净的应用程序依赖项）

我查看了 Tridion 的实时站点以获取更多信息，但我找不到很多有用的信息来解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:39:56.213

那里有很多问题，让我们看看我能在这里做什么。

您将需要 3 个应用程序：

*   A Deployer（标准部署配置）
*   一个临时网站（带有 Tridion 堆栈 + XPM 过滤器 + 环境框架）
*   一个 WebService 应用程序（OData + Ambient Framework）

XPM 本身在 Content Manager Explorer 中运行，因此它*本身*不是一个单独的应用程序，它是 Tridion Content Manager 的扩展。

如果您想让您的 staging 与 Tridion 分开，那么您将无法使用“会话预览”，这反过来意味着您不需要 OData。然而，这将恢复到 SiteEdit 时代，您对页面所做的每一次更改都需要重新发布页面（使用会话预览，这是立即的）。

您不需要以任何方式为您的网站使用 OData（除非您真的想要）。WebService 仅支持会话预览。我在此处记录了 XPM/CME/Staging 站点之间的交互，并在[此处记录](https://stackoverflow.com/a/10802033/866454)[了](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_21A5264A1CA14110BCFE42750ACD5057)它们。

如果您将 tcdl:link 代码发布到 OData，则只需使用[TCDL/REL](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_9A7D830E22054310B6B76C5C96DDC134)，Tridion 将为您呈现它，您无需自定义解析任何内容。

希望这可以帮助...

# c# - 从 FxCop 代码分析中排除命名空间

> ID：14133699
> 
> 赞同：1
> 
> 时间：2013-01-03T05:48:22.387
> 
> 标签：c#, namespaces, code-analysis, fxcop, suppressmessage

> **可能重复：**
> [StyleCop/FxCop 10 - 如何仅在命名空间级别正确抑制消息？](https://stackoverflow.com/questions/6386902/stylecop-fxcop-10-how-do-you-properly-suppress-a-message-only-on-a-namespace-l)
> [如何使用 SupressMessage 抑制 FxCop 规则“DoNotCatchGeneralExceptionTypes”？](https://stackoverflow.com/q/3683729/102937)

我有一个命名空间 ABC.Schema，它有一些类。类名使用下划线。我正在检查 FxCop 分析。我想禁止命名空间级别的此规则。

命名空间 ABC.Schema { ... }

我想禁止 FxCop 消息 CA1707:IdentifiersShouldNotContainUnderscores。

有没有人对此有想法。请就此发表您的看法。

# debugging - Webstorm Chrome 扩展程序未安装

> ID：14133705
> 
> 赞同：0
> 
> 时间：2013-01-03T05:49:04.507
> 
> 标签：debugging, google-chrome, angularjs, webstorm

我关注了 Vojta 关于如何在 Webstorm 中调试 angularjs 的视频。

[http://www.youtube.com/watch?v=MVw8N3hTfCI&feature=plcp](http://www.youtube.com/watch?v=MVw8N3hTfCI&feature=plcp)

但是，每次我在 webstorm 中停止 testacular 服务器时。我必须重新安装 chrome 的 webstorm 调试扩展。难道我做错了什么？我需要将它安装到某个 Chrome 配置文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:30:13.927

今天早上似乎工作正常。我想我也在从命令行运行 testacular，它使用了默认端口 9876，并且给了我意想不到的结果，因为我的 webstorm testacular 服务器运行在 9877 上，但我已将 webstorm 调试配置为在 9876 上运行。

现在一切都好。

# liferay-6 - 如何在 liferay 中创建登录 portlet

> ID：14133715
> 
> 赞同：2
> 
> 时间：2013-01-03T05:50:03.057
> 
> 标签：liferay-6

我需要创建一个登录 portlet 并基于登录用户我需要更改结果页面。意味着如果登录用户是管理员，那么我需要显示所有 portlet，如果登录用户是用户，那么我只需要显示用户信息。任何人对此有想法。提供任何样品将不胜感激。谢谢。我需要的技术是：liferay6.1，spring，jsp，jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:13:45.130

您可以创建一个登录挂钩，并在成功登录后处理重定向。

你可以从一个[钩子教程开始](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/performing-a-custom-action)

但是，您无法通过这种方式管理哪些 portlet 可以访问或不可以访问。有一种权限机制可以做到这一点。您可以只使用重定向将它们提示到不同的页面，托管登录用户可访问的 portlet。

# php - 在 Magento 中渲染“部分视图”？

> ID：14133722
> 
> 赞同：2
> 
> 时间：2013-01-03T05:51:32.007
> 
> 标签：php, magento

在 ruby​​ 中，我们可以有多个 .rhtml 文件，我们可以将这些文件渲染为 html.erb 文件

[渲染部分 UI 元素](https://stackoverflow.com/questions/7343808/render-partial-ui-elements)

这将帮助我们停止跨页面创建多个 UI 元素，而不是在必要时渲染 UI 元素。我在 Php 中寻找类似的概念。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:30:53.630

在 Magento 中，方法有些不同。基本上，Magento 使用与视图中的模板关联的块，因此每个页面都包含一个块 PHP 类（它们都继承自 Mage_Core_Block_Abstract）和大部分（但也有例外）关联的模板（phtml 文件）。

为了渲染部分，块可以在其中包含具有给定子名称的子块。从父块中，您可以使用 getChildHtml($childName) 渲染子块。要在子块中设置变量，您可以使用神奇的 getter 和 setter，因为所有块 PHP 类最终都从 Varien_Object 扩展而来。

# objective-c - 如果我不施放会发生什么？

> ID：14133724
> 
> 赞同：1
> 
> 时间：2013-01-03T05:51:43.023
> 
> 标签：objective-c

我遇到了一个我很难始终如一地重新创建的错误。我认为这与我没有投射物体但我不是 100% 确定这一事实有关。

```
UINavigationController *navController = [self navigationController];
MainGameViewController *controller = [navController.viewControllers objectAtIndex:2];

controller.phase = @"READY"; 
```

我知道 objectAtIndex:2 将始终返回 MainGameViewController 类型的对象，但它没有被强制转换的事实可能是不一致错误的根源吗？错误发生在我提供的第三行。

这是跟踪：

```
0   CoreFoundation                  0x3a6703e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x394fc95e objc_exception_throw + 26
2   CoreFoundation                  0x3a673f2c -[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                  0x3a672648 ___forwarding___ + 388
4   CoreFoundation                  0x3a5ca204 _CF_forwarding_prep_0 + 20
5   AppName                     0x0003af56 -[ResultViewController BackToMainGameView] (ResultViewController.m:286) 
```

错误发生在类 ResultsViewController 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:59:10.760

不，铸造与问题无关。出现异常的原因是有时索引 2 处的对象类型错误。错误没有持续发生的事实是一个额外的线索：寻找游戏控制器*不在*第二个索引的情况来解决这个问题。

通常，强制转换有助于告诉编译器更多关于对象类型的信息。鉴于 Objective C 的动态特性，这比在 C++ 中的重要性要小得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:00:56.760

> 我认为这与我没有投射物体但我不是 100% 确定这一事实有关。

不，强制转换只是为了欺骗编译器（在这种特殊情况下），对象的实际类是在运行时确定的。发生异常是因为您的对象没有实现它发送的方法，因为它不是预期的类。

# jquery-ui - 如何在一个网页中使用谷歌地图放置多个地点

> ID：14133725
> 
> 赞同：1
> 
> 时间：2013-01-03T05:51:45.773
> 
> 标签：jquery-ui, google-maps

我想在一个网页中放置多个谷歌地图我正在使用 google map api v3 加载谷歌地图，我在网页中制作了单个地图，但我想在不同位置放置多个谷歌地图

这是代码：

```
<html> 
 <head> 
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
 <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
 <title>Google Maps JavaScript API v3 Example: Dynamic Loading</title> 
 <script type="text/javascript"> 
   function handleApiReady() { 
     var myLatlng = new google.maps.LatLng(23.038587, 72.478253); 
     var myOptions = { 
       zoom: 8, 
       center: myLatlng, 
       mapTypeId: google.maps.MapTypeId.ROADMAP 
     } 
     var map1 = new google.maps.Map(document.getElementById("map_canvas1"),
myOptions); 

     var map2 = new google.maps.Map(document.getElementById("map_canvas2"),
myOptions); 
   } 
 </script> 
 </head> 
 <body style="margin:0px; padding:0px;"> 
   <div id="map_canvas1" style="width:400px; height:400px"></div>
   <div id="map_canvas2" style="width:400px; height:400px"></div> 
   <script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false&callback=handleApiReady
"></script> 
 </body> 
 </html> 
```

[谷歌地图 1](https://maps.google.co.in/maps?f=q&source=embed&hl=en&geocode=&q=Star%20Bazar,iscon%20mall%20ahmedabad&aq=&sll=23.047624,72.542513&sspn=0.085772,0.168056&gl=in&ie=UTF8&hq=Star%20Bazar,iscon%20mall&hnear=Ahmedabad,%20Gujarat&t=m&cid=8957318216217861802&ll=23.027766,72.519035&spn=0.014929,0.053387&z=14&iwloc=A)

[谷歌地图 2](https://maps.google.co.in/maps?f=q&source=embed&hl=en&geocode=&q=Star%20Bazar,%20Koramangala,%20Bangalore,%20Karnataka&aq=0&oq=Star%20Bazar,%20ko&sll=19.883943,75.37282&sspn=0.043828,0.084028&gl=in&ie=UTF8&hq=Star%20Bazar,%20Koramangala,%20Bangalore,%20Karnataka&t=m&cid=1973246869586064139&hnear=&ll=12.936892,77.610683&spn=0.01581,0.053387&z=14&iwloc=A)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:14:27.487

是什么阻止你尝试。这是一个小提琴，演示了两张不同位置的地图-

[**演示**](http://jsfiddle.net/NhLss/)

JS-

```
var moptions1 = {
    center: new google.maps.LatLng(22.669, 77.709),
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var moptions2 = {
    center: new google.maps.LatLng(22.669, 77.709),
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}

map1 = new google.maps.Map(document.getElementById("map1"), moptions1);

map2 = new google.maps.Map(document.getElementById("map2"), moptions2); 
```

# android - 创建具有静态内容的 android 应用

> ID：14133727
> 
> 赞同：4
> 
> 时间：2013-01-03T05:51:55.377
> 
> 标签：android

这是一个非特定的问题，我需要一些指导。作为我们所做项目的一部分，我需要创建一个应用程序，其中包含有关城镇的信息 - 最好的参观地点及其历史等。内容都是静态的，带有图像。用户拥有的“交互”功能是根据历史、文化等过滤感兴趣的站点。大约有 50 个这样的站点。一个想法是使用母版页——比如我们在 ASP.NET 中使用的。但是作为android的新手，我不知道android中是否有母版页之类的东西。我读了一篇文章，其中他们从基本活动中派生出每个活动，但在我的情况下，拥有 50 个活动听起来很愚蠢。任何人都可以提出一种方法吗？将文本存储在字符串中？使用单独的文本文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:44:59.870

我将尝试为您提供您尝试创建的应用程序的概述。

首先，您将有一个活动，例如`CategoryListActivity`，列出所有类别（例如，历史遗址、文化遗址），使用`ListView`.

当用户点击历史站点时，它会启动另一个名为`PlaceListActivity`. 您使用 向此活动传递一个附加参数`Intent`，告诉它您只想显示历史遗址中的地点。它将显示符合您条件的所有可用位置，并`ListView`再次使用。

现在，当用户单击其中一个地点时，它会启动名为 的第三个活动`PlaceDetailsActivity`，该活动会显示与该地点相关的所有信息。由您决定如何显示这些信息。

所以你只需要分钟。总共 3 项活动（当然您还需要更多活动）。关于您的数据，将所有文本存储在 SQLite 数据库中将是一个不错的选择。您可以为每个地点和类别分配一个 id，这样您就可以动态地识别`CategoryListActivity`和`PlaceListActivity`加载数据。唯一的硬编码数据是当您尝试在首次启动时填充数据库时。但是，您始终可以先准备数据库，将其与您的应用程序一起打包，然后让您的应用程序立即加载并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:03:19.860

我会将所有文本存储在嵌入式 SQLite 数据库中，并将所有媒体存储在 assets 文件夹中。

# python - 在 pylot 的 testcases.xml 中编写正则表达式的问题

> ID：14133728
> 
> 赞同：0
> 
> 时间：2013-01-03T05:51:57.780
> 
> 标签：python, regex, pylot

我必须验证在响应肥皂请求时出现的字符串列表。我正在使用 pylot 测试工具。我知道如果我在`<verify>abcd</verify>`元素内使用字符串，它工作正常。虽然我必须使用正则表达式，但我似乎也面临同样的问题，因为我不擅长正则表达式。

我必须验证`<TestName>Abcd Hijk</TestName>`我对发送的请求的响应中是否存在。

以下是我尝试在 testcases.xml 中编写正则表达式

```
<verify>[.TestName.][\w][./TestName.]</verify> 
```

这是在 testcases.xml 文件中编写正则表达式的正确方法吗？我想准确验证上面提到的标记名及其值。

当我运行该工具时，它没有给我任何错误。但是，如果我将字符更改为`<verify>[.TesttttName.][\w][./TestttttName.]</verify>`并运行该工具，它仍然可以运行而不会出错。虽然这应该是一次失败的运行，因为响应中没有提到的标签！

有人可以告诉我我在这里的正则表达式做错了什么吗？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:57:20.613

使用的正则表达式应如下所示。

```
<verify>&amp;lt;TestName&amp;gt;[\w\s]+&amp;lt;/TestName&amp;gt;</verify> 
```

原因是，Pylot 具有文本形式的响应内容，即[响应中的上述部分如下所示]

```
.......&lt;TestName&gt;ABCd Hijk&lt;/TestName&gt;..... 
```

Pylot 所做的是，当它解析 Testcases.xml 中的元素时，它以 TEXT 格式获取元素的值。然后它在从请求中获得的响应中搜索“验证文本”。

因此，每当我们想使用正则表达式验证 Pylot 中的任何内容时，我们都需要将正则表达式置于上述格式中，以便它给出所需的结果。

注意：必须注意收到的响应格式。要查看从请求中获得的响应，请在工具上启用日志消息，或者如果您想在控制台上查看响应，请编辑工具 engine.py 模块并插入打印语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:08:20.363

原始正则表达式（无 XML 转义）。我假设您想接受英文字母`a-zA-Z`、数字`0-9`、下划线`_`和空格字符（空格、换行符、回车符和其他一些字符 - 请查看文档以获取详细信息）。

```
<TestName>[\w\s]+</TestName> 
```

您需要转义`<`and`>`以指定内部`<verify>`标记：

```
&lt;TestName&gt;[\w\s]+&lt;/TestName&gt; 
```

# objective-c - Objective-C Sudzc WSDL 生成器替代方案

> ID：14133734
> 
> 赞同：7
> 
> 时间：2013-01-03T05:52:33.710
> 
> 标签：objective-c, soap, wsdl, sudzc

Sudzc ( [www.sudcz.com](http://www.sudzc.com) ) 似乎不再是一个正在被贡献的项目！

在一年没有提交和一些严重的错误之后，尤其是返回对象列表，这个有用的工具似乎正在逐渐消失在互联网的黑洞中。

我想知道是否有人知道与此相同的替代工具？

还是肥皂请求不再是数据传输的首选方法？json 是使用休息客户端的更好方法吗？

奖励问题：有没有办法让 sudzc 处理返回的对象列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T06:54:52.693

一些替代方案是：

*   [简单的 WSDL](http://easywsdl.com/)
*   [Wsdl2代码](http://www.wsdl2code.com/)

这个[答案](https://stackoverflow.com/a/18376105/883413)提到了另一种选择，[wsdl2objc](https://code.google.com/p/wsdl2objc/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:41:22.437

在生成的 SoapRequest.m 文件中，您可以找到

```
- (void) connectionDidFinishLoading:(NSURLConnection *) connection 
```

寻找

```
if([deserializeTo respondsToSelector: @selector(initWithNode:)])
{
    element = [element childAtIndex:0];
    output = [deserializeTo initWithNode: element];
} 
```

并删除带有“element = [...]”的行。如果您这样做，请记住，由于此更改，您可能必须在生成的 .m 文件的其他部分进行修复。这在很大程度上取决于您的 WebService 布局。希望这可以帮助。

# c# - JsonConvert.DeserializeObject 双精度型值转换为整数

> ID：14133741
> 
> 赞同：0
> 
> 时间：2013-01-03T05:53:02.870
> 
> 标签：c#, android, json

Android 应用程序通过服务将数据从 android sqlite 数据库传输到 sql server db。这工作正常。问题是双精度类型值，它转换为整数（并非仅适用于 GPS 位置坐标）。

这是我的代码：

```
 JSONArray jaVisitDetail= new JSONArray();
  StringBuffer visitDetail = new StringBuffer();           
  visitDetail.append("{\"WMVisitDetail\":");
  for (int i = 0; i < stringList.size(); i++) {
      ArrayList<?> arrayList = (ArrayList<?>) stringList.get(i);
      ArrayList<?> list = arrayList;
       if(((String) list.get(20)) != null && !((String) list.get(20)).equals("")) {
               //DecimalFormat df = new DecimalFormat("#0.0000");
              visitDe.put("Latitude",Double.parseDouble((String)list.get(20)));
              //visitDe.put("Latitude",df.format(Double.parseDouble((String)list.get(20))));
              //visitDe.put("Latitude",(String)list.get(20));
       }else {
             visitDe.put("Latitude",0.0000);
       }

    if(((String) list.get(21)) != null && !((String) list.get(21)).equals("")) {
            //DecimalFormat df = new DecimalFormat("#0.0000");
            visitDe.put("Longitude",Double.parseDouble((String)list.get(21)));
            //visitDe.put("Longitude",df.format(Double.parseDouble((String)list.get(21))));
            //visitDe.put("Longitude",(String)list.get(21));
    }else {
         visitDe.put("Longitude",0.0000);
    }

jaVisitDetail.put(visitDe);

}
 visitDetail.append(jaVisitDetail.toString());
 visitDetail.append("}"); 
```

这是 C# 代码：

```
 public bool convertJSONToDataSet(string strBusinessUnit, string strExecutiveCode, string strTableName, string jsonContent)
    {
        bool status =false;
        try
        {
            DataSet ds = JsonConvert.DeserializeObject<DataSet>(jsonContent);
            DataTable dt = ds.Tables[0];
            status = UpdateUploadData(strBusinessUnit, strExecutiveCode, strTableName, dt);
        }
        catch (FaultException err)
        {
            status = false;
        }
        catch (Exception error)
        {
            string gg = error.Message;
            Console.WriteLine(gg);
            status = false;
        }
        return status;
    } 
```

如果我们发送`Longitude /latitude`作为双精度然后 DeserializeObject 将其作为整数

如果我们发送`Longitude /latitude`as 字符串，那么错误是：

```
 `Input string was not in a correct format.Couldn't store <6.9292> in Latitude Column.  Expected type is Int64.` 
```

这是一组 json 数据

```
 {
     "ExecutiveCode":"EXEC03",
     "ReasonCode":" ",
     "SurveyNumber":" ",
     "RetailerCode":"2975",
     "UploadedType":" ",
     "CallStartTime":"09:11:58",
     "ActualValue":"30600",
     "UploadedOn":" ",
     "Status":"1",
     "MTDAcheivedValue":0,
     "ActiveStatus":"1",
     "UploadFlag":"1",
     "VisitNumber":"83",
     "BusinessUnit":"MASS",
     "UploadedMethod":" ",
     "RetailerCodeSon":"",
     "Latitude":"6.9294",
     "VisitSequence":"58",
     "Longitude":"79.9038",
     "RetailerType":" ",
     "UploadedBy":" ",
     "CallEndTime":"09:14:41"
  } 
```

我们如何解决这个问题？

# c# - Sys.Webforms.PageRequestManagerServerErrorException 服务器错误 503

> ID：14133743
> 
> 赞同：1
> 
> 时间：2013-01-03T05:53:31.443
> 
> 标签：c#, asp.net, iis-6, windows-server-2003, runtime-error

我指的是这个[链接](http://blogs.msdn.com/b/friis/archive/2010/10/08/steps-for-setting-up-a-custom-identity-of-an-iis-6-application-pool.aspx)，因为我必须将文件从一台服务器写入另一台服务器我正在尝试在 Windows 服务器上创建自定义域帐户。

我已经按照链接中的说明完成了所有操作，但是当我浏览该站点时，出现以下错误：

![在此处输入图像描述](../Images/67b6a6e5523abbd22ff14337adbe43ff.png)

我正在为错误引用以下[链接](http://forums.asp.net/post/1555817.aspx)。

然而还没有成功

当我为应用程序池授权网络服务时出现此错误

```
Access to the path '\\servername\c$\fromvini\abc.text is denied.' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:40:44.403

为了能够读取远程计算机上的文件，您有两种方法。

### 第一种方式 - 两台计算机具有相同的帐户。

1.  两台计算机必须具有相同的用户名/和密码
2.  在运行站点的 IIS 服务器上，您放置该帐户来运行该站点的池，不要将此帐户设置为服务帐户，但您需要正确设置站点目录才能运行。
3.  在您让该帐户可以看到的远程服务器和共享连接上，您还可以更改目录和文件的凭据以对该帐户具有权限。

### 第二种方式 - 使用与池不同的登录名打开文件

1.  该站点在任何池使用下运行，也许是服务帐户，我们不在乎。
2.  在第二台服务器上设置您将在第一台服务器上使用的用户名/密码。
3.  您打开文件的共享，并更改该帐户的文件权限。
4.  您使用在`Impersonate`其他用户下运行文件访问权限。

例如：

```
using ( new Impersonator( "myUsername", "myDomainname", "myPassword" ) )
{
      //... read the file
} 
```

和一个完整的例子：[http ://forums.asp.net/t/1840443.aspx/1?How+to+copy+file+from+network+share+in+VB](http://forums.asp.net/t/1840443.aspx/1?How+to+copy+file+from+network+share+in+VB)

# scala - Scala 中的家族多态性

> ID：14133748
> 
> 赞同：9
> 
> 时间：2013-01-03T05:53:56.007
> 
> 标签：scala, polymorphism

Scala 中当前推荐的家族多态性模式是什么？

在尝试建模游戏的方法时，最近出现了这个解决方案：

```
trait Game[G <: Game[G]] {

  type PLAYER <: Player[G]
  type STATE <: State[G]

  def players(): Set[G#PLAYER]

  def startState(): G#STATE
}

trait Player[G <: Game[G]]

trait State[G <: Game[G]] {
  def player(): G#PLAYER
} 
```

一个特定的游戏（在这个例子中是扑克）可以用这些特征来表达，如下所示：

```
class Poker() extends Game[Poker] {

  type PLAYER = PokerPlayer
  type STATE = PokerState

  val p1 = new PokerPlayer()

  def players() = Set(p1)

  def startState(): PokerState = ...
}

class PokerPlayer() extends Player[Poker]

class PokerState() extends State[Poker] {
  def player(): PokerPlayer = ...
} 
```

我对此设置有几个问题：

1.  *英文*怎么`Game[G <: Game[G]]`发音？在这种情况下所扮演的角色的名称是什么？（特别是在这种“递归”关系中。）*`G``Game`*

**   这是“家庭多态性”的合理实现吗？在高层次上，我的理解是，这意味着 Game 及其 PLAYER 和 STATE 必须作为一个“家庭”而变化。我在其他地方看到的 Scala 中的家族多态性有很大不同，我不清楚不同的权衡：

    *   Scala 概述 (2006) [http://www.scala-lang.org/docu/files/ScalaOverview.pdf](http://www.scala-lang.org/docu/files/ScalaOverview.pdf)

    *   Martin Kneissl 博客 (2009) [http://www.familie-kneissl.org/Members/martin/blog/family-polymorphism-in-scala](http://www.familie-kneissl.org/Members/martin/blog/family-polymorphism-in-scala)

        *   欢迎讨论涉及类型类、宏、f 有界多态性或其他任何东西的族多态性方法。* 

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T16:58:23.783

我会质疑是否需要定义特征“外部”的类。类型`Player`和`State`已经依赖于游戏，因此您无需尝试进一步限制它。

```
trait Game {
  type Player
  type State <: StateLike

  trait StateLike {
    def player: Player
  }

  def startState: State
}

class Poker extends Game {
  class Player
  class State extends StateLike { ... }
  val startState = new State
} 
```

如果需要，您可以使用蛋糕模式将不同的部分分成不同的特征/文件。

```
trait PokerPlayer extends Game {
  class Player
}
trait PokerState extends Game with PokerPlayer {
  class State extends StateLike { ... }
}
class Poker extends Game with PokerPlayer with PokerState {
  val startState = ...
} 
```*

# php - 为什么包含一个空文件会使 PHP 脚本失败？

> ID：14133751
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:54:17.793
> 
> 标签：php

如果第 6 行 (.include ...) 未注释，则以下脚本将失败 - 无论文件“somefile.php”的内容是什么。即使是 0 字节（空）文件。我试图移动这些函数并创建一个“utils.php”库，这是 PHP 世界中的一个大禁忌吗？Error_log 为空。我在 Linux 2.6.32 上使用 PHP 5.2.17。谢谢你。

```
<?php // File: index.php
error_reporting (E_ALL);
ini_set ('display_errors', 1);

//Uncomment the following line and the script fails
//.include "somefile.php";

function imageToBrowser ($pseudonym, $filePath) {
        header("Pragma: public");
        header("Expires: 0");
        header('Cache-Control: no-store, no-cache, must-revalidate');
        header('Cache-Control: pre-check=0, post-check=0, max-age=0', false);
        header('Last-Modified: '.gmdate('D, d M Y H:i:s') . ' GMT');
        header("Content-Length: ".(string)(filesize($filePath)));
        header('Content-Type: application/x-download');
        header('Content-Disposition: attachment; filename="'.$pseudonym.'.png"');
        header('Content-Transfer-Encoding: binary');

        if ($file = fopen($filePath, 'rb')) {
                while(!feof($file) and (connection_status()==0)) {
                        print(fread($file, filesize($filePath)));
                        flush();
                }
                fclose($file);
}}

if (isset($_GET['showImage']) && ($imageMask = $_GET['showImage'])) {
        imageToBrowser ($imageMask, 'Clear64.png'); // Use any .png file in $cwd
} else {
        echo "<html><body><center>\n";
        echo "<img border='0' src=\"{$_SERVER['PHP_SELF']}?showImage=365\" alt=\"Missing Image\"/>\n";
        echo "</center></body></html>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:57:23.187

在包含之前应该没有`.`。点是 PHP 中的连接运算符，在这里无关紧要。

另请注意，`ini_set ('display_errors', 1);`由于显而易见的原因，您的语句无助于解析错误。`php.ini`最好在web-server config中设置您的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:01:46.960

首先删除包含语句之前的点

require() 函数与 include() 相同，只是它处理错误的方式不同。如果发生错误，include() 函数会生成警告，但脚本会继续执行。require() 生成一个致命错误，脚本将停止。

类似地，require_once() 语句与 require() 相同，只是 PHP 会检查文件是否已被包含，如果是，则不再包含 (require) 它。

所以请使用它会更好

```
require_once('somefile.php'); 
```

# haskell - ghci 和 runghc 中的不同并发行为

> ID：14133754
> 
> 赞同：0
> 
> 时间：2013-01-03T05:54:46.380
> 
> 标签：haskell, concurrency, ghc

我有一些简单的代码以固定的时间间隔打印到屏幕上，除非`IORef`设置为指示用户当前正在输入：

```
import Data.IORef
import Control.Concurrent

main = do
   amTyping <- newIORef False
   forkIO $ printALot amTyping
   aChar <- getChar
   writeIORef amTyping True
   aLine <- getLine
   writeIORef amTyping False
   putStrLn $ aChar : aLine
   main

printALot :: IORef Bool -> IO ()
printALot theRef = do
   putStrLn "1111111"
   threadDelay 1000000
   isTyping <- readIORef theRef
   if isTyping
      then return ()
      else printALot theRef 
```

这在 GHCi 中工作得很好，但是当我将它与 runghc 一起使用（或编译它）时，读取或写入`IORef`似乎不起作用——`printALot`只是继续循环，超出用户键入的任何内容。

ghci 和 runghc/compiled 之间有什么区别？我是不是用`IORef`错了，但没有注意到，因为 ghci 不是真正的多线程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T09:06:18.193

这与并发无关。

您的解释程序和编译程序在它们使用的终端模式上有所不同：[non-canonical 与 canonical](https://stackoverflow.com/questions/358342/canonical-vs-non-canonical-terminal-input)。

在规范模式下，您的程序在整行可用之前无法获取字符 - 因此您正在观察效果。

要解决此问题，只需将句柄置于非缓冲模式：

```
import System.IO

main = do
   hSetBuffering stdin NoBuffering
   ... 
```

# python - 使用python将数据写入csv或文本文件

> ID：14133755
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:54:53.097
> 
> 标签：python, csv, urllib2

我正在尝试通过检查以下某些条件将一些数据写入 csv 文件

我将在文本文件中有一个 url 列表，如下所示

**网址.txt**

```
www.example.com/3gusb_form.aspx?cid=mum
www.example_second.com/postpaid_mum.aspx?cid=mum
www.example_second.com/feedback.aspx?cid=mum 
```

现在我将遍历文本文件中的每个 url，并使用`urllib2`python 中的模块读取 url 的内容，并将在整个 html 页面中搜索一个字符串。如果找到所需的字符串，我会将该 url 写入 csv 文件。

但是当我试图将数据（url）写入csv文件时，它就像每个字符一样保存到一列中，而不是将整个url（数据）保存到一列中

```
h   t   t   p   s   :   /   /   w   w   w...... 
```

**代码.py**

```
import urllib2
import csv

search_string = 'Listen Capcha'

html_urls = open('/path/to/input/file/urls.txt','r').readlines()
outputcsv = csv.writer(open('output/path' + 'urls_contaning _%s.csv'%search_string, "wb"),delimiter=',', quoting=csv.QUOTE_MINIMAL)
outputcsv.writerow(['URL'])

for url in html_urls:
    url = url.replace('\n','').strip()
    if not len(url) == 0:
        req = urllib2.Request(url)
        response = urllib2.urlopen(req)
        if str(search_string) in response.read():
            outputcsv.writerow(url) 
```

那么上面的代码有什么问题，需要做什么才能将整个 url(string) 保存到 csv 文件的一列中？

另外，我们如何将数据写入上述文本文件？

## 已编辑

我也有一个 url 假设`http://www.vodafone.in/Pages/tuesdayoffers_che.aspx`，这个 url 实际上会被重定向到`http://www.vodafone.in/pages/home_che.aspx?cid=che`浏览器中，但是当我尝试通过下面的代码时，它与上面给出的 url 相同

```
import urllib2, httplib

httplib.HTTPConnection.debuglevel = 1  
request = urllib2.Request("http://www.vodafone.in/Pages/tuesdayoffers_che.aspx")
opener = urllib2.build_opener()
f = opener.open(request)
print f.geturl() 
```

## 结果

```
http://www.vodafone.in/pages/tuesdayoffers_che.aspx?cid=che 
```

那么最后如何使用 urllib2 捕获重定向的 url 并从中获取数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:56:23.307

将最后一行更改为：

```
 outputcsv.writerow([url]) 
```

# javascript - 在同一函数上调用多个事件

> ID：14133757
> 
> 赞同：-1
> 
> 时间：2013-01-03T05:54:56.513
> 
> 标签：javascript, javascript-events

我在页面上创建了一些项目，并正在使用 JavaScript 验证这些项目：

```
function formvalidation() {         
    var f1 = $x('P1_FIRST_NAME');

    if( f1.value == "" ) {
        //alert("Enter First Name"); 
        f1.style.backgroundColor = "red";
        f1.focus();
        return false;
    }
    else {
        f1.style.backgroundColor = "white";    
    )
} 
```

要调用上述函数，我使用的是 onclick 事件。现在，如果用户使用 tab 键进入项目，如何在同一个函数上提供两个事件调用？

我这样调用函数

```
onclick="formvalidation()";onkeyup="formvalidation()"; 
```

请建议我如何调用多个事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:24:53.367

尝试`onfocus`事件。因此，如果用户单击或通过按 Tab 键来此事件将被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:08:57.637

使用`onfocus`事件。`onfocus`只要控件获得焦点，无论是通过单击还是键盘，都会触发该事件。同样，您可能会发现该`onblur`事件很有用。

# vb.net - 等效于 vb.net 中的 vb6.Format 函数，而不使用 Microsoft.Visualbasic.Compatibility.dll

> ID：14133762
> 
> 赞同：3
> 
> 时间：2013-01-03T05:55:58.663
> 
> 标签：vb.net, vb6-migration

> **可能重复：**
> [有没有办法以编程方式将 VB6 格式化字符串转换为 .NET 格式化字符串？](https://stackoverflow.com/questions/4072490/is-there-a-way-to-programmatically-convert-vb6-formatting-strings-to-net-format)

在从 vb6 迁移到 vb.net 期间，Format$(1234567, "###,###,###,###") 函数转换为 vb6.Format(1234567,"###,### ,###,###") 函数，在 Microsoft.Visualbasic.Compatibility.dll 中定义。

我不想使用 Microsoft.Visualbasic.Compatibility.dll。在 .NET 中是否有任何等价物。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:11:42.690

您可以使用[.ToString(string) 方法](http://msdn.microsoft.com/en-us/library/8wch342y%28v=vs.110%29.aspx)

```
Dim value As Integer = 1234567
value.ToString("###,###,###,###") 
```

或使用[复合格式的](http://msdn.microsoft.com/en-us/library/txafckwd%28v=vs.100%29.aspx)[String.Format 方法](http://msdn.microsoft.com/en-us/library/fht0f5be%28v=vs.100%29.aspx)

```
String.Format("{0:###,###,###,###}", 1234567) 
```

# html - 如何修复 HTML 表格中的第一列以允许水平滚动？

> ID：14133763
> 
> 赞同：0
> 
> 时间：2013-01-03T05:56:07.260
> 
> 标签：html, css, html-table

我有一个四列三行的表。我想在表格上添加水平滚动，但第一列应该保持固定。

我的 HTML 结构如下：

```
<table>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

我可以使用什么 CSS 来实现这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:05:16.577

您可以在单独的 div 中创建两个表。查看此**[演示](http://jsfiddle.net/ZTs2j/1/)**以获取示例。

CSS

```
#col-one {
    float: left;
    background-color: red;
}
#col-two {
    float: left;
    background-color: green;
} 
```

HTML

```
<div id="col-one">
<table width="200px" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td>abc</td>
  </tr>
  <tr>
    <td>123</td>
  </tr>
  <tr>
    <td>abc</td>
  </tr>
</table>
</div>
<div id="col-two">
<table width="600px" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td>123</td>
    <td>abc</td>
    <td>123</td>
  </tr>
  <tr>
    <td>abc</td>
    <td>123</td>
    <td>abc</td>
  </tr>
  <tr>
    <td>123</td>
    <td>abc</td>
    <td>123</td>
  </tr>
</table>
</div>​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T06:06:19.017

使用`display:table`选项通过纯 CSS 和 div 完成它。

**HTML**

```
<div class="table">
    <div class="table_row">
        <div >xzv</div>
        <div>fjgj</div>
        <div>gj g</div>
        <div>gdj hk</div>
    </div>
    <div class="table_row">
        <div >8080</div>
        <div>7808</div>
        <div>870g</div>
        <div>80hk</div>
    </div>
</div>
​ 
```

**CSS**

```
 body{margin:20px}
  .table{
       display:table; 
       border-top:solid 1px red; 
       border-left:solid 1px red; 
       width:100%
     }
    .table_row{
        display:table-row
     }
    .table_row div{
        display:table-cell; 
        border-right:solid 1px red; 
        border-bottom:solid 1px red
     }​ 
```

**[演示](http://jsfiddle.net/zPKBF/)**

# oracle - oracle 和 shell 脚本

> ID：14133765
> 
> 赞同：0
> 
> 时间：2013-01-03T05:56:13.063
> 
> 标签：oracle, shell, unix

我正在使用 oracle 11g，并且正在使用通过 unix 脚本调用的 sql 加载程序将数据加载到数据库中。我想选择一些数据行并使用 shell 脚本将数据写入文件。是否可以为此编写一个shell脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:15:27.563

这是一个很好的教程，它清楚地解释了如何从 UNIX 执行查询

最终，他所做的是登录到 Oracle，即为 Oracle 设置会话并读取需要执行的查询并执行该查询并执行所需的任何操作。

我们可以从文件中读取它，甚至根据我们的需要在其中对其进行硬编码，而不是从用户那里读取查询。

[解释在 Shell 脚本中使用 Oracle 查询的博客](http://www.thegeekstuff.com/2010/07/unix-shell-script-to-execute-oracle-sql-query/)

# iphone - 从异步块向主线程发送参数时遇到问题

> ID：14133770
> 
> 赞同：0
> 
> 时间：2013-01-03T05:56:56.860
> 
> 标签：iphone, ios, cocoa-touch, grand-central-dispatch, alassetslibrary

我有以下方法，它在拍摄照片后`ALAsset`从中检索。`UIImagePicker`然后它尝试`ALAsset`通过主线程将其发送到我的另一个方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *imageURL = [[info valueForKey:UIImagePickerControllerReferenceURL] retain];
    __block ALAsset *result;

    [self.assetsLibrary assetForURL:imageURL resultBlock:^(ALAsset *asset)
    {
        result = [asset retain];

        dispatch_async(dispatch_get_main_queue(), ^
        {
            [self loadPhotoImageViewWithAsset:result];
            [self dismissModalViewControllerAnimated:YES];
            [imageURL release];
            [result release];
        });
    }
    failureBlock:^(NSError *error)
    {

    }];
} 
```

当我进入 时`dispatch_async(dispatch_get_main_queue(), ^ block`，`result`显示为`nil`。有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:06:25.307

参考[UIImagePickerController 用于 UIImageView](https://stackoverflow.com/a/4664686/1106035)结果显示为零。

像这样使用：

```
 [self.assetsLibrary assetForURL:imageURL resultBlock:^(ALAsset *asset)
{
    result = [asset retain];
    [self loadPhotoImageViewWithAsset:result];
    [self dismissModalViewControllerAnimated:YES];
    [imageURL release];
    [result release];   
}
failureBlock:^(NSError *error)
{

}]; 
```

改变你的`loadPhotoImageViewWithAsset`方法

```
-(void)loadPhotoImageViewWithAsset:(ALAsset *)asset
{
  //dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
   //dispatch_async(queue, ^{
    dispatch_async(dispatch_get_main_queue(), ^
    {
     //here code for loading image
    });
  // });
} 
```

# ssrs-2008 - SSRS 中的 Null、(Null) 和 Nothing 之间有区别吗？

> ID：14133774
> 
> 赞同：3
> 
> 时间：2013-01-03T05:57:15.117
> 
> 标签：ssrs-2008, reporting-services

如果这是一个非常简单的问题，我深表歉意。

因此，在 SSRS 中，您可以从下拉列表中选择 (Null) 或 Null，或者使用带有 VBs Nothing 关键字的表达式。

![在此处输入图像描述](../Images/6b6a109098b624797151b9f19960342b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:56:03.280

我创建了一个测试用例。使用三个可能的值创建一个名为“TestParam”的参数：

*   `(Null)`（预填充的可用值）
*   表达式设置为`=nothing`
*   在值框中键入“Null”（如屏幕截图所示。）

该参数必须设置为允许空值保存其中的第一个。

然后创建了一个数据集：

```
SELECT
   "Valid Row Returned"
WHERE
   @TestParam IS NULL 
```

如果参数设置为预填充`(Null)` **或** `=nothing`，则返回一行。如果参数设置为“Null”，如屏幕截图所示，它**不会返回一行。**

# php - 在不使用循环的情况下将字符串分解为关联数组？

> ID：14133780
> 
> 赞同：31
> 
> 时间：2013-01-03T05:57:46.130
> 
> 标签：php, arrays

我有一个类似的字符串`1-350,9-390.99,...`，我需要把它变成这样的关联数组：

```
 Array
    (
        [1] => 350
        [9] => 390.99
        ...........
    ) 
```

是否可以仅使用数组函数而不使用循环来执行此操作？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-09-24T18:03:33.763

PHP 5.5+ 两行解决方案，使用[`array_chunk`](http://php.net/manual/en/function.array-chunk.php)and [`array_column`](http://php.net/manual/en/function.array-column.php)：

```
$input  = '1-350,9-390.99';

$chunks = array_chunk(preg_split('/(-|,)/', $input), 2);
$result = array_combine(array_column($chunks, 0), array_column($chunks, 1));

print_r($result); 
```

产量：

```
Array
(
    [1] => 350
    [9] => 390.99
) 
```

[在 3v4l.org 上在线查看。](https://3v4l.org/DTXAF)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-03T06:45:39.537

这是一种无需 for 循环的方法，使用[array_walk](http://ca1.php.net/array_walk)：

```
$array = explode(',', $string);
$new_array = array();
array_walk($array,'walk', $new_array);

function walk($val, $key, &$new_array){
    $nums = explode('-',$val);
    $new_array[$nums[0]] = $nums[1];
} 
```

[Ideone.com](http://ideone.com/qcYWnP)上的示例。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-03T06:05:47.143

像这样的东西应该工作：

```
$string = '1-350,9-390.99';

$a = explode(',', $string);

foreach ($a as $result) {
    $b = explode('-', $result);
    $array[$b[0]] = $b[1];
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-03T06:44:04.623

这将[array_walk](http://php.net/manual/en/function.array-walk.php)与[闭包](http://php.net/manual/en/functions.anonymous.php)一起使用。

```
<?php
$string = "1-350,9-390.99";
$partial = explode(',', $string);
$final = array();
array_walk($partial, function($val,$key) use(&$final){
    list($key, $value) = explode('-', $val);
    $final[$key] = $value;
});
print_r($final);
?> 
```

[互动小提琴](http://www.phpfiddle.org/main/code/c36-ui5)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-03T06:03:32.387

```
$string = '1-350,9-390.99........';
$final_result = array();
foreach (explode(',', $string) as $piece) {
    $result = array();
    $result[] = explode('-', $piece);
    $final_result[$result[0]] = $result[1];
}

print_r($final_result); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-03T06:06:45.567

```
$x='1-350,9-390.99';
$arr1=explode(',',$x);
$res_arr=array();
foreach($arr1 as $val){
    $arr2=explode('-',$val);
    $res_arr[$arr2[0]]=$arr2[1];
    }

print_r($res_arr); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-03T06:29:49.887

从技术上讲，可以在不使用循环*的情况下执行此操作（* [codepad.org 上的演示](http://codepad.org/7oA8CeCB)）：

```
$string = '1-350,9-390.99';

// first, split the string into an array of pairs
$output = explode(',', $string);
function split_pairs ($str) {
    return explode('-', $str, 2);
}
$output = array_map(split_pairs, $output);

// then transpose it to get two arrays, one for keys and one for values
array_unshift($output, null);
$output = call_user_func_array(array_map, $output);

// and finally combine them into one
$output = array_combine($output[0], $output[1]);

var_export($output); 
```

然而，这*真的*不是你想要在真实代码中做的事情——它不仅非常复杂，而且几乎肯定比`foreach`其他人已经给出的基于简单的解决方案效率低（[codepad.org 上的演示](http://codepad.org/EHLgUAgS)）：

```
$output = array();
foreach ( explode( ',', $string ) as $pair ) {
    list( $key, $val ) = explode( '-', $pair, 2 );
    $output[$key] = $val;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-03T06:04:36.610

试试这个：

```
$string = '1-350,9-390.99';
$array = explode(',', $string);

$output = array();
foreach($array as $arr){
    $chunk = explode('-', $arr);
    $output[$chunk[0]] = $chunk[1];
}
echo '<pre>'; print_r($output); echo '</pre>'; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-03T06:18:43.853

这是你想要的吗？

```
<?php 
//the string to process
$str = "1-350,9-390.99";

//explode it
$str_exploded = explode(",",$str);

$final_arr;
foreach($str_exploded as $str_elem){
    //extract
    $str_elem_final = explode("-",$str_elem);
    //the first elem is the index and the last elem is the value
    $final_arr[(int)$str_elem_final[0]] = $str_elem_final[1];

}
print_r($final_arr);

?> 
```

[http://rextester.com/VEY59445](http://rextester.com/VEY59445)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-04T10:52:57.987

我个人使用：

```
/**
 * @desc String to associative array
 * 
 * @param string $string
 * @param string $element_delimiter
 * @param string $value_delimiter
 * 
 * @example
  $string = "1:9|class:fa fa-globe";
  $array = string_to_array($string);
 * 
 * @return array $results
 */
function string_to_array($string, $element_delimiter = '|', $value_delimiter = ':') {
    $results = array();
    $array = explode($element_delimiter, $string);
    foreach ($array as $result) {
        $element = explode($value_delimiter, $result);
        $results[$element[0]] = $element[1];
    }
    return $results;
}

/**
 * @desc Associative array to string
 * 
 * @param type $array
 * @param type $element_delimiter
 * @param type $value_delimiter
 * 
 * @example
  $array = array('class' => 'in-line', 'rel' => 'external');
  $string = array_to_string($array);
 * 
 * @return string
 */
function array_to_string($array, $element_delimiter = '|', $value_delimiter = ':') {
    array_walk($array, create_function('&$i,$k', 'if (strlen($k) > 0){$i="' . $element_delimiter . '$k' . $value_delimiter . '$i";}'));
    return substr(implode($array, ""), 1);
} 
```

# ruby-on-rails - 无法上传照片，无法操作 minimagick

> ID：14133781
> 
> 赞同：0
> 
> 时间：2013-01-03T05:57:48.033
> 
> 标签：ruby-on-rails, imagemagick, minimagick

使用 Ruby on Rails，我试图在我的本地主机上上传一张照片。但是，似乎我无法上传并收到错误消息：

```
"Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: Command ("identify -ping /var/folders/rc/zy5w8vkd3m341pndp2d546nm0000gn/T/mini_magick20130103-78039-1m8b1lt.png") failed: {:status_code=>nil, :output=>"dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib\n Referenced from: /usr/local/bin/identify\n Reason: Incompatible library version: identify requires version 14.0.0 or later, but libfreetype.6.dylib provides version 13.0.0\n"}" 
```

我正在使用自制软件。请在这件事上给予我帮助 ：（

软件：Mac OS 10.7.2 (Lion)、Xcode 4.1、ImageMagick-6.8.0-10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T04:26:25.670

我遇到了同样的错误，我使用下面的命令来修复这个错误：

```
jbao009-108: sudo find / -name "libfreetype.6.dylib" -print 

/Applications/Inkscape.app/Contents/Resources/lib/libfreetype.6.dylib
find: /dev/fd/3: Not a directory
find: /dev/fd/4: Not a directory
/Library/Frameworks/GStreamer.framework/Versions/0.10/lib/libfreetype.6.dylib
/opt/X11/lib/libfreetype.6.dylib
/usr/local/Cellar/freetype/2.4.10/lib/libfreetype.6.dylib
/usr/local/Cellar/freetype/2.4.11/lib/libfreetype.6.dylib
/usr/local/Cellar/freetype/2.5.3_1/lib/libfreetype.6.dylib
/usr/local/lib/libfreetype.6.dylib

jbao009-108: sudo cp /usr/local/Cellar/freetype/2.5.3_1/lib/libfreetype.6.dylib  /usr/local/lib/ 
```

这 2 个命令将找到最新的 freetype 并复制到系统库

# android - 将 Uri 通过 Intent 传递给 MusicService MediaPlayer，从 ListView 点击

> ID：14133787
> 
> 赞同：0
> 
> 时间：2013-01-03T05:58:08.990
> 
> 标签：android, android-listview, android-mediaplayer

当我传递一个 URL 时，它工作正常（用户单击一个按钮）：

```
final Intent i = new Intent(MusicService.ACTION_URL);
Uri uri = Uri.parse("http://stream-72.shoutcast.com:80/hot108_mp3_128kbps");
i.setData(uri);
startService(i); 
```

但是当用户单击 ListView 项目时，什么也没有发生：

```
public List<String> songs = new ArrayList<String>();

protected void onListItemClick(ListView l, View v, int position, long id) {
  playSong(MEDIA_PATH + songs.get(position));
}

private void playSong(String songPath) {
    final Intent i = new Intent(MusicService.ACTION_URL);
    Uri uri = Uri.parse(songPath);
    i.setData(uri);
    startService(i);
} 
```

我已经尝试在其中设置 Toasts `MusicService.ACTION_URL`，它永远不会仅在 ListView 场景中被调用，但它在第一个按钮单击场景中会被调用。

我什至尝试在 playSong 方法中创建一个本地 MediaPlayer（在服务之外）并且它工作正常，但我希望 MusicService 来处理播放列表项：

```
mp.setDataSource(songPath); 
```

请告诉我，我做错了什么？如果您需要更多信息，请告诉我。谢谢。

这是更新的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.Design.streaming"
android:versionCode="56"
android:versionName="1.8.0.2" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />
<supports-screens android:largeScreens="true"
android:normalScreens="true" android:smallScreens="true"
android:resizeable="true" android:anyDensity="true" />

<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<!-- <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/> -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-feature name="android.hardware.touchscreen" required="false" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar" android:debuggable="false">
    <activity
        android:name=".Main"
        android:launchMode="singleTask"
        android:configChanges="orientation"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>  

    <activity android:name="com.paypal.android.MEP.PayPalActivity"
android:theme="@android:style/Theme.Translucent.NoTitleBar"> 
</activity>

    <activity android:name=".Blog" android:launchMode="singleTask"     android:configChanges="keyboardHidden|orientation" />
    <activity android:name=".Favs" android:launchMode="singleTask"     android:configChanges="keyboardHidden|orientation" />
    <activity android:name=".Songs" android:launchMode="singleTask"     android:configChanges="keyboardHidden|orientation"/>
    <activity android:name=".IcyStreamMeta" />
    <activity android:name=".Favorites"> </activity>
    <activity android:name=".PizzaMain" />
    <activity android:label="@string/app_name" android:name="Info"/>
    <activity android:name=".SomafmActivity" android:launchMode="singleTask"
        >
        <intent-filter>
            <action android:name="com.LudwigAppDesign.streamingradioplayerproMain" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity android:name=".SongsActivity" android:launchMode="singleTask"
         />
    <activity android:name=".AncientfmActivity" android:launchMode="singleTask"
         />
    <activity android:name=".Pizza" 
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name">
        </activity>
    <activity android:name=".ResultDeligate" />
    <activity android:name=".AppPreferenceActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action 
                android:name="net.learn2develop.AppPreferenceActivity" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <service
        android:name=".MusicService"
        android:exported="false" >
        <intent-filter>
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.PLAY" />
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.PAUSE" />
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.SKIP" />
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.REWIND" />
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.STOP" />
        </intent-filter>
        <intent-filter> 
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.Main" />  
            <category android:name="android.intent.category.DEFAULT" />  
        </intent-filter> 
        <intent-filter>
            <action android:name="com.LudwigAppDesign.streamingradioplayerpro.action.URL" />

            <data android:scheme="http" />
            <data android:scheme="file" />
        </intent-filter>
    </service>

    <receiver android:name=".MusicIntentReceiver" >
        <intent-filter>
            <action android:name="android.media.AUDIO_BECOMING_NOISY" />
        </intent-filter>
    </receiver>

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:43:05.313

试试下面的代码：

```
private void playSong(String songPath) {
    final Intent i = new Intent(MusicService.ACTION_URL);
    File file = new File("file://"+songPath);
    Uri uri = Uri.fromFile(file);
    i.setData(uri);
    startService(i);
} 
```

# ios - HTTP 音频流框架？

> ID：14133789
> 
> 赞同：0
> 
> 时间：2013-01-03T05:58:16.957
> 
> 标签：ios, http, mpmovieplayercontroller, avfoundation

我正在创建广播应用程序（选项卡式应用程序）来播放[http://sample.com/listen.m3u](http://sample.com/listen.m3u)

到目前为止，我使用过 AVFoundation - AVAudioPlayer、AVPlayer 和 MPMoviePlayer 框架。

音量滑块 (MPVolumeView) 遇到困难/无法看到音量滑块。

我的问题是完成以下任务的最佳推荐框架是什么？

播放 m3u http 流，带有播放、暂停和音量滑块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:29:19.053

使用`AudioStreamer`by `mattgallagher`which 是`library`for `audio streaming`。根据您的要求，您应该使用它。

请参阅[AudioStreamer](https://github.com/mattgallagher/AudioStreamer)库。

# html - 我正在使用纯 JavaScript 日历来显示日期。我想实现一个滑动功能来加载上一个和下一个日期

> ID：14133790
> 
> 赞同：0
> 
> 时间：2013-01-03T05:58:18.400
> 
> 标签：html, javascript-events

我正在使用纯 javascript 函数在 HTML5 页面中显示日历。如何在不使用超链接的情况下实现滑动功能。一部分代码是：cal += 'previous year';

# python - 如何使用 Archetypes 将一种内容类型转换为另一种

> ID：14133794
> 
> 赞同：1
> 
> 时间：2013-01-03T05:58:27.813
> 
> 标签：python, plone, archetypes

我有一个非文件夹内容类型的内容类型，我想将此内容类型转换为文件夹。在我的内容类型中有一个多文件字段。我读了这个链接[http://developer.plone.org/content/archetypes/converting-content-types.html](http://developer.plone.org/content/archetypes/converting-content-types.html)关于将一种内容类型转换为另一种。但是，当我使用浏览器视图运行它时，创建了新的内容类型，除了由 multifilefield 处理的上传文件之外，旧内容的值也被复制，它们是空的。

这是我在浏览器视图中的代码：

更新：

```
def migrateaction(self):
    items=self.context.listFolderContents(contentFilter={"portal_type": 'myoldcontent'})
    for item in items:
        id = "%s-new" % item.getId()
        service = self.context.invokeFactory(
                    'mynewcontent',
                    id,
                    rp_category=item.getRp_category(),
                    familyname=item.getFamilyname(),
                    firstname=item.getFirstname(),
                    file=item.getField('file').getRaw(item))
    return 'Successfully migrated.' 
```

我对多文件字段的字段定义：

```
MultiFileField('file',
    primary=True,
    languageIndependent=True,
    widget = MultiFileWidget(
    label= "File Uploads",
    show_content_type = False,)), 
```

对于新旧内容类型，所有字段定义都是相同的。

我的代码中是否缺少导致文件无法复制的问题？

# sql-server - 月份和年份更改时如何重新插入所有旧行

> ID：14133795
> 
> 赞同：0
> 
> 时间：2013-01-03T05:58:28.737
> 
> 标签：sql-server

我的桌子喜欢......

```
 id  Sname  attendence    ADate  
  1   xyz        p          01/01/2013  mm/dd/yyyy
  2   zxc        A          01/01/2013
  3   asd        p          01/01/2013 
```

现在，如果月份发生变化，那么这些行会在页面加载事件中自动插入，例如

```
 id  Sname  attendence      ADate  
  1   xyz        p          01/01/2013   mm/dd/yyyy
  2   zxc        A          01/01/2013
  3   asd        p          01/01/2013
  1   xyz        p          02/01/2013
  2   zxc        A          02/01/2013   mm/dd/yyyy
  3   asd        p          02/01/2013 
```

以前我只使用了第 1 个月、第 2 个月、第 3,4 个月，但问题是当涉及到 12 个月时，我必须插入 1，所以它会影响旧行。请告诉我该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:06:03.990

利用`cron jobs`

为此，您可以创建一个在每月第一个日期自动运行的页面。

# mysql - MySQL：用于维护库存 EOD 数据的数据库计划

> ID：14133797
> 
> 赞同：0
> 
> 时间：2013-01-03T05:58:38.073
> 
> 标签：mysql, oltp

**更广泛的观点：**维护库存 EOD 数据的数据库计划。

手头的工具：我计划使用 MySQL 数据库 4.1+ 和 PHP。在 PHP 中实现了一个自定义 DBAL（基于 mysqli）以与 MySQL 一起使用。但是，我对任何其他数据库引擎持开放态度，只要它们可以免费使用并使用 SQL 语句：P

**问题域：**我需要为我的项目规划一个数据库来维护库存的 EOD 数据。由于数据库中维护的库存数量将非常庞大，因此相同的 EOD 数据的更新过程在一天结束时将是一个相当繁重的过程。不用说我在共享主机上，并且在初始启动期间必须避免 MySQL 性能瓶颈。但是以后可能会迁移到 VPS。

**问题：**

**1.**规范化模式能否在不产生性能问题的情况下进行繁重的更新过程？

**2.**必须对 EOD 数据进行基于 MACD 和 CMF 等流行算法的分析，以发现股票的特定趋势，分析数据必须再次存储以供进一步参考。当天的 EOD 数据更新后，将计算分析数据。那么在这里使用规范化模式很好，保持性能问题吗？我还需要经常获取 EOD 和分析数据！

**阐述：**

**1 个 INSERT 语句**（插入 EOD 数据）+ **1 个 INSERT 语句**（插入分析数据）

= **2 INSERT 语句*** **1500 个股票**（用于启动）

= **3000 INSERT 语句**完成了 2 回！

随着项目的发展，我进一步计划增加更多库存，因此我也在关注可扩展性。

虽然我不知道 DW 的概念（只听说过），但是如果从性能角度来看，它比 OLTP 更可行，我准备试一试。

# jquery - 手风琴不会在鼠标单击时关闭

> ID：14133802
> 
> 赞同：2
> 
> 时间：2013-01-03T05:59:43.733
> 
> 标签：jquery, jquery-plugins, accordion, jquery-ui-accordion, accordionpane

我已经使手风琴及其工作正常，但是当它向下滑动并且当我们单击它向上滑动时，它不会向上朝向关闭位置。下面是我的代码，请告诉我如何进行？

```
(function($) {

    var allPanels = $('.accordion > dd').hide();

    $('.accordion > dt > a').click(function() {
        allPanels.slideUp();
        $(this).parent().next().slideDown();
        return false;

    });

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:06:27.710

试试这个：http: [//jsfiddle.net/DDUQ5/1/](http://jsfiddle.net/DDUQ5/1/)

```
(function($) {

 var allPanels = $('.accordion > dd').hide();

 $('.accordion > dt > a').click(function() {
  $this = $(this);
  $target =  $this.parent().next();
  allPanels.removeClass('active').slideUp();
  if($target.is(':hidden')){
     allPanels.removeClass('active').slideUp();
     $target.addClass('active').slideDown();
  }

 return false;
 });

})(jQuery);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:06:21.917

我认为这是您向上滑动隐藏元素的问题

```
var allPanels = $('.accordion > dd').hide(); 
```

试试这个：

```
(function($) {
   var allPanels = $('.accordion > dd').hide();
   $('.accordion > dt > a').toggle(function() {
      allPanels.slideUp();
      $(this).parent().next().slideDown();
      return false;
   },function() {
      $(this).parent().next().slideUp();
      return false;
   });
})(jQuery); 
```

# pyqt4 - 如何在pyqt中仅列出QTableView中的可见项目

> ID：14133805
> 
> 赞同：0
> 
> 时间：2013-01-03T06:00:06.473
> 
> 标签：pyqt4, qtableview, qsortfilterproxymodel

我有下面的代码来获取 QTableView 的过滤器。但我无法一次过滤多个列。

即，如果过滤列 2`row 0 col 0`并尝试过滤列 2，它应该只显示可见的唯一值`column 2`（可能它应该只显示）但现在它显示( , , )`row 0 col 1`的所有元素`column 2``row 0 col 1``row 1 col 1``row 2 col 1`

```
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)
        self.centralwidget  = QtGui.QWidget(self)
        self.lineEdit       = QtGui.QLineEdit(self.centralwidget)
        self.view           = QtGui.QTableView(self.centralwidget)
        self.comboBox       = QtGui.QComboBox(self.centralwidget)
        self.label          = QtGui.QLabel(self.centralwidget)

        self.gridLayout = QtGui.QGridLayout(self.centralwidget)
        self.gridLayout.addWidget(self.lineEdit, 0, 1, 1, 1)
        self.gridLayout.addWidget(self.view, 1, 0, 1, 3)
        self.gridLayout.addWidget(self.comboBox, 0, 2, 1, 1)
        self.gridLayout.addWidget(self.label, 0, 0, 1, 1)

        self.setCentralWidget(self.centralwidget)
        self.label.setText("Regex Filter")

        self.model = QtGui.QStandardItemModel(self)

        for rowName in range(3) * 5:
            self.model.invisibleRootItem().appendRow(
                [   QtGui.QStandardItem("row {0} col {1}".format(rowName, column))    
                    for column in range(3)
                    ]
                )

        self.proxy = QtGui.QSortFilterProxyModel(self)
        self.proxy.setSourceModel(self.model)

        self.view.setModel(self.proxy)
        self.comboBox.addItems(["Column {0}".format(x) for x in     range(self.model.columnCount())])

        self.lineEdit.textChanged.connect(self.on_lineEdit_textChanged)
        self.comboBox.currentIndexChanged.connect(self.on_comboBox_currentIndexChanged)

        self.horizontalHeader = self.view.horizontalHeader()
        self.horizontalHeader.sectionClicked.connect(self.on_view_horizontalHeader_sectionClicked)

    @QtCore.pyqtSlot(int)
    def on_view_horizontalHeader_sectionClicked(self, logicalIndex):
        self.logicalIndex   = logicalIndex
        self.menuValues     = QtGui.QMenu(self)
        self.signalMapper   = QtCore.QSignalMapper(self)  

        self.comboBox.blockSignals(True)
        self.comboBox.setCurrentIndex(self.logicalIndex)
        self.comboBox.blockSignals(True)

        valuesUnique = [    self.model.item(row, self.logicalIndex).text()
                            for row in range(self.model.rowCount())
                            ]

        actionAll = QtGui.QAction("All", self)
        actionAll.triggered.connect(self.on_actionAll_triggered)
        self.menuValues.addAction(actionAll)
        self.menuValues.addSeparator()

        for actionNumber, actionName in enumerate(sorted(list(set(valuesUnique)))):              
            action = QtGui.QAction(actionName, self)
            self.signalMapper.setMapping(action, actionNumber)  
            action.triggered.connect(self.signalMapper.map)  
            self.menuValues.addAction(action)

        self.signalMapper.mapped.connect(self.on_signalMapper_mapped)  

        headerPos = self.view.mapToGlobal(self.horizontalHeader.pos())        

        posY = headerPos.y() + self.horizontalHeader.height()
        posX = headerPos.x() + self.horizontalHeader.sectionPosition(self.logicalIndex)

        self.menuValues.exec_(QtCore.QPoint(posX, posY))

    @QtCore.pyqtSlot()
    def on_actionAll_triggered(self):
        filterColumn = self.logicalIndex
        filterString = QtCore.QRegExp(  "",
                                    QtCore.Qt.CaseInsensitive,
                                    QtCore.QRegExp.RegExp
                                    )

        self.proxy.setFilterRegExp(filterString)
        self.proxy.setFilterKeyColumn(filterColumn)

    @QtCore.pyqtSlot(int)
    def on_signalMapper_mapped(self, i):
        stringAction = self.signalMapper.mapping(i).text()
        filterColumn = self.logicalIndex
        filterString = QtCore.QRegExp(  stringAction,
                                    QtCore.Qt.CaseSensitive,
                                    QtCore.QRegExp.FixedString
                                    )

        self.proxy.setFilterRegExp(filterString)
        self.proxy.setFilterKeyColumn(filterColumn)

    @QtCore.pyqtSlot(str)
    def on_lineEdit_textChanged(self, text):
        search = QtCore.QRegExp(    text,
                                QtCore.Qt.CaseInsensitive,
                                QtCore.QRegExp.RegExp
                                )

        self.proxy.setFilterRegExp(search)

    @QtCore.pyqtSlot(int)
    def on_comboBox_currentIndexChanged(self, index):
        self.proxy.setFilterKeyColumn(index)

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = myWindow()
    main.show()
    main.resize(400, 600)
    sys.exit(app.exec_()) 
```

当我运行上面的代码时，我得到以下输出

![在此处输入图像描述](../Images/8e67f7aaf92c8c491911356a171ba7fd.png)

当我单击第 2 列标题时，显示的过滤器列表如下所示，并且正确显示（该列中的唯一值）...

![在此处输入图像描述](../Images/de8b19f613a2071cc92e26a2143cbf6e.png)

当我`row 0 col 1`在显示的过滤器中选择时，我得到以下过滤列表

![在此处输入图像描述](../Images/1eb7055f3464c3eac868760a8d35bccb.png)

但是，当我再次单击第 2 列标题进行过滤时，它会显示与我的第一张图片相同的列表。第 2 列的所有唯一项（来自模型视图）而不是来自 proxyfilter。实际上它应该只显示`row 0 col 1`为第 2 列中的唯一项目`row 0 col 1`

![在此处输入图像描述](../Images/7a31cbbfb0a5869c72ee5443c54ded17.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:31:48.400

这是因为您仍在使用源模型来查找行。原始模型中的数据不会改变。只有过滤器代理模型会反映过滤后的更改。

所以你只需要在你的（真的很长的名字）`on_view_horizontalHeader_sectionClicked`槽中修改你的查找：

```
valuesUnique = [    
    self.proxy.index(row, self.logicalIndex).data().toString()
    for row in xrange(self.proxy.rowCount())
] 
```

您还可以删除一些独特集的转换：

```
valuesUnique = set(    
    self.proxy.index(row, self.logicalIndex).data().toString()
    for row in xrange(self.proxy.rowCount())
)
...
for actionNumber, actionName in enumerate(sorted(valuesUnique)): 
    ... 
```

还有一点我想指出的。您保留了几个永远不会被删除的临时对象。在同一个插槽中，您每次都创建一个新的`QMenu`，`QSignalMapper`但您永远不会清理旧的。随着时间的推移，你只会越来越多。

对于`QMenu`，只需将其设为局部变量，不要将其作为`self`. 这样它消失后就会被清理干净。而对于`QSignalMapper`，您可以`deleteLater`在创建一个新的之前使用一个调用：

```
# local variable, and no parent
menuValues = QtGui.QMenu()

# delete the previous one
try:
    self.signalMapper.deleteLater()
except:
    pass

self.signalMapper = QtCore.QSignalMapper(self) 
```

# python - 为什么 pow(a, d, n) 比 a**d % n 快这么多？

> ID：14133806
> 
> 赞同：118
> 
> 时间：2013-01-03T06:00:16.263
> 
> 标签：python, performance, pypy

我试图实施[Miller-Rabin primality test](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)，并且对为什么中型数字（约 7 位数）需要这么长时间（> 20 秒）感到困惑。我最终发现以下代码行是问题的根源：

```
x = a**d % n 
```

（其中`a`、`d`和`n`都是相似但不相等的中等大小的数字，`**`是幂运算符，并且`%`是模运算符）

然后我尝试用以下内容替换它：

```
x = pow(a, d, n) 
```

相比之下，它几乎是瞬时的。

对于上下文，这是原始函数：

```
from random import randint

def primalityTest(n, k):
    if n < 2:
        return False
    if n % 2 == 0:
        return False
    s = 0
    d = n - 1
    while d % 2 == 0:
        s += 1
        d >>= 1
    for i in range(k):
        rand = randint(2, n - 2)
        x = rand**d % n         # offending line
        if x == 1 or x == n - 1:
            continue
        for r in range(s):
            toReturn = True
            x = pow(x, 2, n)
            if x == 1:
                return False
            if x == n - 1:
                toReturn = False
                break
        if toReturn:
            return False
    return True

print(primalityTest(2700643,1)) 
```

定时计算示例：

```
from timeit import timeit

a = 2505626
d = 1520321
n = 2700643

def testA():
    print(a**d % n)

def testB():
    print(pow(a, d, n))

print("time: %(time)fs" % {"time":timeit("testA()", setup="from __main__ import testA", number=1)})
print("time: %(time)fs" % {"time":timeit("testB()", setup="from __main__ import testB", number=1)}) 
```

输出（使用 PyPy 1.9.0 运行）：

```
2642565
time: 23.785543s
2642565
time: 0.000030s 
```

输出（使用 Python 3.3.0 运行，2.7.2 返回非常相似的时间）：

```
2642565
time: 14.426975s
2642565
time: 0.000021s 
```

还有一个相关的问题，为什么这个计算在使用 Python 2 或 3 运行时几乎是使用 PyPy 的两倍，而通常 PyPy[更快](http://speed.pypy.org/)？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-01-03T06:03:13.917

请参阅有关[模幂运算](http://en.wikipedia.org/wiki/Modular_exponentiation)的 Wikipedia 文章。基本上，当你这样做时`a**d % n`，你实际上必须计算`a**d`，这可能非常大。但是有一些计算方法`a**d % n`不需要自己计算`a**d`，这就是`pow`它的作用。操作员不能这样做，`**`因为它无法“预见未来”知道您将立即取模。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-03T06:17:16.927

BrenBarn 回答了您的主要问题。在你身边：

> 为什么使用 Python 2 或 3 运行时它的速度几乎是 PyPy 的两倍，而通常 PyPy 的速度要快得多？

如果你阅读 PyPy 的[性能页面](http://pypy.org/performance.html)，这正是 PyPy 不擅长的事情——事实上，他们给出的第一个例子：

> 不好的例子包括使用大的 long 进行计算——这是由不可优化的支持代码执行的。

从理论上讲，将一个巨大的幂运算后跟一个 mod 转换为模幂运算（至少在第一遍之后）是 JIT 可能能够进行的转换……但 PyPy 的 JIT 不行。

附带说明一下，如果您需要使用大整数进行计算，您可能需要查看第三方模块，例如[`gmpy`](http://code.google.com/p/gmpy/)，在某些情况下，在主流用途之外，它有时可能比 CPython 的本机实现快得多，而且还有很多额外的功能，否则您必须自己编写，但代价是不那么方便。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-03T06:07:30.083

进行模幂运算有一些捷径：例如，您可以找到`a**(2i) mod n`每个`i`from `1`to并将所需的中间结果`log(d)`相乘 (mod )。`n`像 3-argument 这样的专用模幂函数`pow()`可以利用这些技巧，因为它知道您正在做模运算。Python 解析器无法识别这个给定的裸表达式`a**d % n`，因此它将执行完整的计算（这将花费更长的时间）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T06:08:17.120

计算的方法`x = a**d % n`是乘以幂，然后用`a`取模。首先，如果很大，这会创建一个巨大的数字，然后将其截断。但是，最有可能进行了优化，以便仅跟踪最后一位数字，这是计算模数乘法所需的全部内容。`d``n``a``x = pow(a, d, n)``n`

# ios - Playhaven SDK 不工作

> ID：14133809
> 
> 赞同：1
> 
> 时间：2013-01-03T06:00:30.173
> 
> 标签：ios

我在我的应用程序中集成了 Playhaven 全屏广告。全屏广告加载时有两个动作执行。一是关闭视图，二是去 App Store。我必须检查执行两个操作时调用了哪些函数。

我已经尝试过以下功能

```
-(void)request:(PHPublisherContentRequest *)request contentDidDismissWithType:(PHPublisherContentDismissType *)type{

    NSLog(@"Type %@",type);

} 
```

但它在这两种情况下都返回字符串 PHPublisherContentUnitTriggeredDismiss。

如何在单击的两个按钮上添加不同的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:20:38.280

目前 Playhaven SDK 在触发 contentDidDismissWithType 委托时不区分解雇类型。不过，我知道这是我们正在考虑在未来添加的内容。

# java - 我们在 spring3 中有页面范围吗？

> ID：14133815
> 
> 赞同：0
> 
> 时间：2013-01-03T06:01:01.360
> 
> 标签：java, spring, scope, spring-3

我们在spring3中有页面范围的概念吗？假设用户打开多个选项卡，那么如果数据存储在会话中，那么在某些情况下可能会出错。想象一下用户将在浏览器中打开两个选项卡。在这两个选项卡中，他都在同一页面上工作，以便他可以更快地完成工作。因此，如果某些数据是从会话中引用的，那么在这种情况下，应用程序可能会进入错误状态。

所以为了避免这种情况，我想将数据存储在页面范围内，这样每个页面数据就不会在会话中混合？它是在春季直接可用还是我需要编写自己的对话逻辑和页面范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:19:02.613

在 Spring 中，您有以下范围：

*   singleton - （默认）将单个 bean 定义限定为每个 Spring IoC 容器的单个对象实例。

*   原型 - 将单个 bean 定义限定为任意数量的对象实例。

*   request - 将单个 bean 定义限定为单个 HTTP 请求的生命周期；也就是说，每个 HTTP 请求都有自己的 bean 实例，该实例是在单个 bean 定义的后面创建的。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

*   session - 将单个 bean 定义限定为 HTTP 会话的生命周期。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

*   全局会话 - 将单个 bean 定义限定为全局 HTTP 会话的生命周期。通常仅在 Portlet 上下文中使用时才有效。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

> 我们在spring3中有页面范围的概念吗？

--> 在 Spring 中，您没有页面范围，但您可以配置您的特定 bean 以使用请求范围。

**参考**：[弹簧文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes)

# sql - 如何在 T-SQL 查询中以编程方式构建 ISO 周数表？

> ID：14133816
> 
> 赞同：0
> 
> 时间：2013-01-03T06:01:02.967
> 
> 标签：sql, tsql, sql-server-2012

任何人都知道如何使用 T-SQL 查询构建每周临时表？

我听说有很多类型的计算，公历等......我的需求是 ISO 周号，绑定到临时表取决于周号。

临时表有 2 列：`ISOWeekNo`和`WeekName`

```
ISOWeekNo   WeekName
1           01 Jan 2013 To 07 Jan 2013
2           08 Jan 2013 To 14 Jan 2013 
```

如何在基于 ISO Week No 的 T-SQL 查询中以编程方式构建？

更新：我只想传递参数 year 。例如：2013

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:50:02.267

编辑：添加 WHERE 子句以仅在寻求的年份终止。

这似乎与维基百科的描述相匹配，我相信还有优化的空间。Mikael，我复制了友好专栏的格式代码，谢谢。由于使用了 ISOWEEK 日期部分，此代码将在 SQL Server 2008 及更高版本上运行。

```
use tempdb
go

DECLARE  @Year          SMALLINT = 2013
        ,@FirstISOWKDay DATETIME

;WITH FindISOWEEKFirstDay AS
(
    SELECT DT   = DATEADD(DAY, -7, DATEFROMPARTS(@Year, 1, 1))
    UNION ALL
    SELECT DATEADD(DAY, 1, DT)
    FROM FindISOWEEKFirstDay
    WHERE DATEADD(DAY, 1, DT) < DATEADD(DAY, 14, DATEFROMPARTS(@Year, 1, 1))
)
SELECT TOP 1 @FirstISOWKDay = DT
FROM FindISOWEEKFirstDay
WHERE DATEPART(ISO_WEEK, DT) = 1
ORDER BY DT ASC -- Eliminate probability of arb sorting (Thanks Mikael)
;WITH Base10 (n) AS
(
    SELECT 1    UNION ALL   SELECT 1    UNION ALL   SELECT 1    UNION ALL
    SELECT 1    UNION ALL   SELECT 1    UNION ALL   SELECT 1    UNION ALL
    SELECT 1    UNION ALL   SELECT 1    UNION ALL   SELECT 1    UNION ALL
    SELECT 1    
)
,Base1000 (n) AS
(
    SELECT ROW_NUMBER() OVER (ORDER BY (SELECT NULL))-1
    FROM Base10 T1, Base10 T2, Base10 T3
)
SELECT   Start      = DATEADD(DAY, n*7, @FirstISOWKDay)
        ,[End]      = DATEADD(DAY, n*7 + 6, @FirstISOWKDay)
        ,Friendly   = CONVERT(VARCHAR(101), DATEADD(DAY, n*7, @FirstISOWKDay), 106)+' To '+CONVERT(VARCHAR(101), DATEADD(DAY, n*7 + 6, @FirstISOWKDay), 106)
        ,ISOWEEK    = DATEPART(ISO_WEEK, DATEADD(DAY, n*7, @FirstISOWKDay))
FROM Base1000
-- Filter to terminate, resulting only in sought year's calendar
WHERE DATEPART(YEAR, DATEADD(DAY, n*7 + 6, @FirstISOWKDay)) = @Year 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T06:33:34.680

```
declare @Year int;
set @Year = 2016;

with C as
(
  select datefromparts(@Year, 1, 1) as D
  union all
  select dateadd(day, 1, C.D)
  from C
  where C.D < datefromparts(@Year, 12, 31)
)
select datepart(iso_week, C.D) as ISOWeekNo,
       convert(varchar(101), min(C.D), 106)+' To '+convert(varchar(101), max(C.D), 106) as WeekName
from C
group by datepart(iso_week, C.D),
         case when datepart(month, C.D) = 12 and
                   datepart(iso_week, C.D) > 50
           then 1
           else 0 
         end
order by min(C.D)
option (maxrecursion 0); 
```

结果：

```
ISOWeekNo   WeekName
----------- --------------------------
53          01 Jan 2016 To 03 Jan 2016
1           04 Jan 2016 To 10 Jan 2016
2           11 Jan 2016 To 17 Jan 2016
3           18 Jan 2016 To 24 Jan 2016
4           25 Jan 2016 To 31 Jan 2016
5           01 Feb 2016 To 07 Feb 2016
6           08 Feb 2016 To 14 Feb 2016
7           15 Feb 2016 To 21 Feb 2016
.
.
.
47          21 Nov 2016 To 27 Nov 2016
48          28 Nov 2016 To 04 Dec 2016
49          05 Dec 2016 To 11 Dec 2016
50          12 Dec 2016 To 18 Dec 2016
51          19 Dec 2016 To 25 Dec 2016
52          26 Dec 2016 To 31 Dec 2016 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:09:50.290

这可能会有所帮助：

```
Select date '2012-12-31' + level*7                WK_STARTS_DT
 , to_char(date '2012-12-31' + level*7, 'IW') ISO_WEEK
 , to_char(date '2012-12-31' + level*7, 'WW') WEEK
From dual
Connect By Level <= 
(
 Select Round( (ADD_MONTHS(TRUNC(SYSDATE,'Y'),12)-TRUNC(SYSDATE,'Y') )/7, 0) From dual
) --365/7 
/

WK_STARTS_DT    ISO_WEEK    WEEK
------------------------------------
1/7/2013             02    01
1/14/2013            03    02
1/21/2013            04    03
......
2/4/2013             06    05
2/11/2013            07    06
......
3/4/2013             10    09 
```

要确认周数： [http ://www.epochconverter.com/date-and-time/weeknumbers-by-year.php?year=2013](http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php?year=2013)

# apache2 - ping 虚拟主机导致请求超时

> ID：14133817
> 
> 赞同：0
> 
> 时间：2013-01-03T06:01:06.057
> 
> 标签：apache2, timeout, virtualhost, ping, http-status-code-403

我有几个虚拟主机的 apache2 设置，但是我已经设置好了，所以如果你在浏览器中访问 IP 地址，你会收到错误 403。当我 ping 我的一个虚拟主机的域名时，它总是只响应请求对于超时，从不延迟，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:06:34.620

也许您的托管服务提供商（或您的 Linux 发行版）具有正常工作[`ICMP`](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)所必需的防火墙协议。`ping`

注意 Apache 只[`TCP`](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)需要正常工作，不需要`ICMP`，这是完全不同的协议。换句话说，`ping`可能是完全防火墙，但是，您的网站会正确响应。

一些网站主动防火墙`ICMP`，最显着的例子是`microsoft.com`。

# android - 在后台播放 MediaPlayer

> ID：14133821
> 
> 赞同：0
> 
> 时间：2013-01-03T06:01:35.263
> 
> 标签：android, android-mediaplayer

我正在构建媒体播放器应用程序，在第一个活动中我正在显示所有歌曲列表，在歌曲点击时我正在媒体播放器中播放歌曲。但是当我反击时，我一次又一次地来到歌曲列表，当我反击时，我退出了应用程序。我希望当我退出应用程序时该歌曲应该继续播放，当我恢复到我的应用程序时它会继续播放。

请给我一些解决方案。

我试过这段代码：

```
@Override
public void onBackPressed() {
    // do whatever you desire
    moveTaskToBack(true);
    return;
} 
```

但这不起作用。当我恢复到我的应用程序时，它会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:11:27.337

在歌曲播放列表活动中，在 startactivity(intent) 之后写入 finish()；它将完成（）活动，现在我们可以按后退按钮歌曲播放列表活动不会出现。

# android - 如何识别画布上绘制的字符

> ID：14133822
> 
> 赞同：6
> 
> 时间：2013-01-03T06:01:34.867
> 
> 标签：android, canvas, touch-event, text-recognition

我正在使用手指画线，到目前为止，我已经想出了以下代码：

```
 case MotionEvent.ACTION_MOVE:
    //return if touch is in this area of canvas
    if (x<=430 || y<=80 || y>=490) return true;
    //draw path using x and y co-ordinates
    mPath.quadTo(previousPoint.x, previousPoint.y, (x+previousPoint.x)/2,(y+previousPoint.y)/2);
    canvas.drawPath(mPath, paint);
    previousPoint.x = x;
    previousPoint.y = y;
    //invalidate canvas on move
    imageView.invalidate();
    break;
case MotionEvent.ACTION_UP:
    Xend=x;
    Yend=y;
    //validate that is it true?
    if((Xstart>=780 && Xstart<=830) && (Xend>=780 && Xend<=830) && (Ystart>=10 && Ystart<=200) && Yend<=800 && Yend>=300){
    //show toast if correct
    Toast.makeText(getBaseContext(), "Correct", Toast.LENGTH_SHORT).show();
    }else{
    //show toast with XY co-ordinates that your attempt is wrong 
    Toast.makeText(getBaseContext(), "Wrong attempt\n Xstart: "+Xstart+"\n Xend:"+Xend+"\n Ystart: "+Ystart+"\nYend:"+Yend, Toast.LENGTH_SHORT).show();
    }
    imageView.invalidate();
    break; 
```

但不幸的是，上面的代码不能满足我的要求。我想创建按字母顺序组织的工作表，用户通过触摸进行操作。我想知道他从哪里开始，他要去哪里，他在哪里结束以识别他在画布上绘制的内容，我知道从哪里获取接触点，但问题是如何识别画布上绘制的内容？想在 Playstore 上识别像这样[的 VisionObjects](https://play.google.com/store/apps/details?id=com.visionobjects.calculator&hl=en)应用程序。 ![在此处输入图像描述](../Images/e052640c985408447394cf1a88e7c75c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T08:14:25.160

要跟踪您必须使用的三个事件：

*   `MotionEvent.ACTION_DOWN`跟踪事件开始的位置。
*   `MotionEvent.ACTION_MOVE`跟踪运动（滑动）。
*   `MotionEvent.ACTION_UP`跟踪事件停止的位置。

请参阅[此示例](http://www.vogella.com/articles/AndroidTouch/article.html#singletouch)。In 展示了如何通过跟踪运动来绘制路径。

# sas - 阅读上一个和下一个观察结果

> ID：14133827
> 
> 赞同：5
> 
> 时间：2013-01-03T06:01:54.523
> 
> 标签：sas

我有一个这样的数据集（sp 是一个指标）：

```
datetime        sp
ddmmyy:10:30:00 N
ddmmyy:10:31:00 N
ddmmyy:10:32:00 Y
ddmmyy:10:33:00 N
ddmmyy:10:34:00 N 
```

我想用“Y”以及上一个和下一个提取观察结果：

```
ID              sp
ddmmyy:10:31:00 N
ddmmyy:10:32:00 Y
ddmmyy:10:33:00 N 
```

我厌倦了使用“滞后”并成功提取了“Y”和下一个观察结果，但仍然不知道如何提取前一个。

这是我的尝试：

```
data surprise_6_step3; set surprise_6_step2;
length lag_sp $1;
lag_sp=lag(sp);
if sp='N' and lag(sp)='N' then delete;
run; 
```

结果是：

```
ID              sp
ddmmyy:10:32:00 Y
ddmmyy:10:33:00 N 
```

还有什么方法可以提取先前的观察结果吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:01:35.317

尝试在数据步骤中使用语句中的`point`选项。`set`像这样：

```
data extract;
set surprise_6_step2 nobs=nobs;
if sp = 'Y' then do;
  current = _N_;
  prev = current - 1;
  next = current + 1;

  if prev > 0 then do;
    set x point = prev;
    output;
  end;

  set x point = current;
  output;

  if next <= nobs then do;
    set x point = next;
    output;
  end;
end;

run; 
```

`set`当您在语句中 使用它时，数据集有一个隐式循环。`_N_`是一个自动变量，包含有关隐含循环的观察的信息（从 1 开始）。当你找到你的值时，你将值存储`_N_`到变量中`current`，这样你就知道你在哪一行找到了它。`nobs`是数据集中的观察总数。

如果您的行在数据集中的第一个（然后没有上一行）并且如果您的行在数据集中的最后一个（那么没有下一行），检查是否`prev`大于 0 和如果`next`小于则避免错误。`nobs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:14:42.753

```
/* generate test data */
data test;
    do dt = 1 to 100;
        sp = ifc( rand("uniform") > 0.75, "Y", "N" );
        output;
    end;
run;

proc sql;
    create table test2 as
        select  *,
            monotonic() as _n
        from  test
    ;
    create table test3 ( drop= _n ) as
        select  a.*
        from    test2 as a
        full join   test2 as b
            on  a._n = b._n + 1
        full join   test2 as c
            on a._n = c._n - 1
        where   a.sp = "Y"
            or b.sp = "Y"
            or c.sp = "Y"
    ;
quit; 
```

# java - 我如何将警报对话框放入循环中，特别是在for循环Android中

> ID：14133830
> 
> 赞同：1
> 
> 时间：2013-01-03T06:02:31.137
> 
> 标签：java, android

我想为不同的联系人添加不同的对话框..!! 我想在下面的for循环中创建，这是我的代码..!!

```
public class CallActivity extends Activity{

    sqlAdapter adapter;
    Context mContext; 
    String Birthdate, CurrentDate, ctName = "Unknown", phNumber = "Unknown";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reminder);

        Calendar cal = Calendar.getInstance();
        int date = cal.get(Calendar.DAY_OF_MONTH);
        int month = cal.get(Calendar.MONTH)+1; 
```

/* 获取当前日期 */

```
 if(date<10 && month<10){
        CurrentDate = "0"+month+"-0"+date;
        Toast.makeText(getBaseContext(), "CurrentDate : " + CurrentDate, Toast.LENGTH_LONG).show(); 
        }else if(month<10 && date>10){
            CurrentDate = "0"+month+"-"+date;
            Toast.makeText(getBaseContext(), "CurrentDate : " + CurrentDate, Toast.LENGTH_LONG).show(); 
        }else if(month>9 && date<10){
            CurrentDate = month+"-0"+date;
            Toast.makeText(getBaseContext(), "CurrentDate : " + CurrentDate, Toast.LENGTH_LONG).show(); 
        }else {
            CurrentDate = month+"-"+date;
            Toast.makeText(getBaseContext(), "CurrentDate : " + CurrentDate, Toast.LENGTH_LONG).show(); 
        }

    adapter = new sqlAdapter(getBaseContext());
    adapter.openToRead();
    ArrayList<ContactDetails> cDetails = adapter.getContactDetails(CurrentDate);
    adapter.close(); 
```

/* 这是 for 循环，我想为不同的联系人生成警报对话框 */

```
 for (int i = 0; i < cDetails.size(); i++) {
        ctName = cDetails.get(i).Name;
        adapter.openToRead();
        phNumber = adapter.getcNumber(ctName);
        adapter.close();
        alertforcall(getBaseContext(),ctName,phNumber);
    }   
}

public void alertforcall(Context context, String Name, final String ctNumber){
    mContext = context;

    AlertDialog alert = new AlertDialog.Builder(CallActivity.this).create();
    alert.setIcon(R.drawable.ic_launcher);
    alert.setTitle("");
    alert.setMessage("Are you sure want to call " + Name +"? " );

    alert.setButton("No", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
            finish();

        }
    });

    alert.setButton2("Yes", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            String phoneNumber = "tel:" + ctNumber;
            Intent intent = new Intent(Intent.ACTION_CALL, Uri
                    .parse(phoneNumber));
            startActivity(intent);
            finish();           
        }
    });
    alert.show();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:07:53.000

**不好的做法，在****for 循环**中创建对话框不是一个好的编程习惯。

只需将**联系人的 ArrayList**传递给`alertforcall()`方法，当您想在条件基础上显示对话框时，请在该**AlertDialog**中设置名称和联系人。

**例如，**

现在，当您想显示特定联系人的警报对话框时，我假设您正在单击联系人列表，因此通过获取特定列表项的名称和编号并将其传递给`alertforcall()`方法，您可以显示特定的警报对话框。

# configuration - SSIS中脚本任务的动态配置

> ID：14133843
> 
> 赞同：1
> 
> 时间：2013-01-03T06:03:40.387
> 
> 标签：configuration, ssis, configure

我必须在数据流任务中对来自 CRM 数据库的一些数据执行 VB 脚本。我也想让它在其他系统上可配置。

我可以通过使用配置文件配置变量来动态分配连接管理器的连接字符串。有什么方法可以配置脚本组件编辑器的 ScriptLink 属性，以便我可以使脚本的地址动态化。

![在此处输入图像描述](../Images/8265e7574b0431984bec519dfba9a6f5.png)

我也尝试过 CozyRoc Script Task +，但仍然很困惑。我将非常感谢任何帮助。

# android - 在android中使用post在服务器上上传图像是给源文件不存在吗？

> ID：14133845
> 
> 赞同：3
> 
> 时间：2013-01-03T06:03:43.130
> 
> 标签：android, http-post, image-upload

我正在使用此代码上传图像，但平板电脑中没有 sd 卡我想从内部存储上传图像如何执行此操作我正在尝试此代码，但总是找不到源文件

这是我上传图片的代码

> 来自内部存储的默认图像
> 
> `int response= uploadFile("/mnt/sdcard/Eiffel.jpg");`

```
 public int uploadFile(String sourceFileUri) {

              String upLoadServerUri = "http://cssthemeclub.com/demo/vixxa_hotel/index.php/login/webchangeimage";
              String fileName = sourceFileUri;
              HttpURLConnection conn = null;
              DataOutputStream dos = null; 
              String lineEnd = "\r\n";
              String twoHyphens = "--";
              String boundary = "*****";
              int bytesRead, bytesAvailable, bufferSize;
              byte[] buffer;
              int maxBufferSize = 1 * 1024 * 1024;
              File sourceFile = new File(sourceFileUri);

              if (!sourceFile.isFile())
              {
               Log.e("uploadFile", "Source File Does not exist");
               return 0;
              }
                  try { // open a URL connection to the Servlet
                   FileInputStream fileInputStream = new FileInputStream(sourceFile);
                   URL url = new URL(upLoadServerUri);
                   conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
                   conn.setDoInput(true); // Allow Inputs
                   conn.setDoOutput(true); // Allow Outputs
                   conn.setUseCaches(false); // Don't use a Cached Copy
                   conn.setRequestMethod("POST");
                   conn.setRequestProperty("Connection", "Keep-Alive");
                   conn.setRequestProperty("ENCTYPE", "multipart/form-data");
                   conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
                   conn.setRequestProperty("uploaded_file", fileName);

                   dos = new DataOutputStream(conn.getOutputStream());
                   dos.writeBytes(twoHyphens + boundary + lineEnd);
                   dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
                   dos.writeBytes(lineEnd);
                   bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size
                   bufferSize = Math.min(bytesAvailable, maxBufferSize);
                   buffer = new byte[bufferSize];

                   // read file and write it into form...
                   bytesRead = fileInputStream.read(buffer, 0, bufferSize); 

                     while (bytesRead > 0) {
                     dos.write(buffer, 0, bufferSize);
                     bytesAvailable = fileInputStream.available();
                     bufferSize = Math.min(bytesAvailable, maxBufferSize);
                     bytesRead = fileInputStream.read(buffer, 0, bufferSize);              
                    }

                   // send multipart form data necesssary after file data...
                   dos.writeBytes(lineEnd);
                   dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

                   // Responses from the server (code and message)
                   serverResponseCode = conn.getResponseCode();
                   String serverResponseMessage = conn.getResponseMessage();
                   Log.e("server response codde",""+serverResponseCode);
                   Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
                   if(serverResponseCode == 200)
                   {

                       runOnUiThread(new Runnable() {
                            public void run() {

                                tv.setText("File Upload Completed.");
                                Toast.makeText(HomeActivity.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                            }
                        });               
                   }   

                   //close the streams //
                   fileInputStream.close();
                   dos.flush();
                   dos.close();

              } catch (MalformedURLException ex) { 
                  dialog.dismiss(); 
                  ex.printStackTrace();
                  Toast.makeText(HomeActivity.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
                  Log.e("Upload file to server", "error: " + ex.getMessage(), ex); 
              } catch (Exception e) {
                  dialog.dismiss(); 
                  e.printStackTrace();
                  Toast.makeText(HomeActivity.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
                  Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e); 
              }
              dialog.dismiss();      
              return serverResponseCode; 
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:32:47.087

试试这个：

```
String imageFilename =  Environment.getExternalStorageDirectory().getPath()+"Eiffel.jpg"; 
```

代替 ：

```
String imageFilename =  "/mnt/sdcard/Eiffel.jpg"; 
```

**编辑 ：**

**运行这个测试**

```
File myFile = new File(imageFilename);

if(myFile.exists()){

    Toast.makeText(SimpleTest.this, "<<<< this file exists, it is: "+imageFilename+" >>>>",
    Toast.LENGTH_LONG).show();

} else if(!myFile.exists()){

    Toast.makeText(SimpleTest.this, "<<<< this file does not exist >>>> ",
    Toast.LENGTH_LONG).show();
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T06:07:36.513

```
HttpPost httpPost = new HttpPost(URL);

httpPost.setHeader("Authorization", "headerstufs");

String path = PATH TO file;
HttpClient httpclient = new DefaultHttpClient();

FileEntity f = new FileEntity(new File(path), "image/jpeg");

try {
    httpPost.setEntity(f);
   HttpParams params =  new BasicHttpParams();
    httpPost.setParams(params);
    httpclient.execute(httpPost);
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

确保在你的清单中有这个。

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# c# - 使用 DataGridTemplateColumn 时 WPF 数据网格的性能

> ID：14133846
> 
> 赞同：1
> 
> 时间：2013-01-03T06:03:46.143
> 
> 标签：c#, wpf, datagrid, datagridtemplatecolumn

我`DataGrid`用来显示仓库占用情况（占用 - 显示带有盒子的图像，未占用 - 显示空图像）。
在我`DataGridTemplateColumn`用来覆盖图像的 DataGrid 中。我的主表单 XAML 代码：

```
<xctk:BusyIndicator Name="ctrlBusy" IsBusy="False" BusyContent="Generating Maps..." >
<Grid>
    <StackPanel>
        <Button Name="btnClick" Grid.Row="0" Click="Button_Click_1" Height="44" VerticalAlignment="Top" 
        HorizontalAlignment="Left" Width="114" Panel.ZIndex="4" Margin="6,3,0,0">Click</Button>

        <StackPanel Orientation="Vertical" Grid.Row="1">
            <TextBlock  Background="SkyBlue" Height="50">

            </TextBlock>
            <DataGrid GridLinesVisibility="None" Background="SkyBlue" 
          BorderBrush="Transparent" IsReadOnly="True" ItemsSource="{Binding}" 
          AutoGenerateColumns="True" AutoGeneratingColumn="dgvMap_AutoGeneratingColumn"   
          CanUserAddRows="False" CanUserSortColumns="true" CanUserDeleteRows="False"  
          HeadersVisibility="Row" Name="dgvMap" SelectionMode="Single" 
          Panel.ZIndex="0" Margin="0,0,0,0" VirtualizingStackPanel.VirtualizationMode="Standard">
                <!--for removing the blue color bkground default for row selection-->
                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" 
           Color="Transparent"/>
                </DataGrid.Resources>
            </DataGrid>
            <TextBlock  Background="SkyBlue" Height="50">

            </TextBlock>
        </StackPanel>
    </StackPanel>
</Grid> 
```

DataGrid 的数据模板：

```
<DataTemplate x:Key="MyDataTemplate" DataType="DataRowView">
    <Grid Background="Transparent">
        <Image Tag="{Binding}" Name="Layer0" Margin="0,0,0,0"  Panel.ZIndex="1"  
               Width="50" Height="50"   ToolTipService.HasDropShadow="True" ToolTipService.ShowDuration="20000" ToolTipService.InitialShowDelay="200" >
            <Image.ToolTip>
                <StackPanel>
                    <Label FontWeight="Bold" Background="Blue" Foreground="White" Content="{Binding}" />
                    <TextBlock Padding="10" TextWrapping="WrapWithOverflow" Width="200">
                        This coil is located in this location. Yard Name is FG. Zone is Dispatch Area.
                    </TextBlock>
                    <Line Stroke="Black" StrokeThickness="1" X2="200" />
                    <StackPanel Orientation="Horizontal">
                        <Label FontWeight="Bold">Report to admin in case of coil location mismatch</Label>
                    </StackPanel>
                </StackPanel>
            </Image.ToolTip>
            <Image.Resources>
                <Style TargetType="{x:Type Image}">
                    <Setter Property="Source" Value="{Binding Converter={StaticResource IntToImageConverter}, ConverterParameter = Layer0}" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <!-- Hover image -->
                            <Setter Property="Cursor" Value="Hand"/>
                            <Setter Property="Source" Value="C:\Users\Coil3.png"/>
                            <!--<Setter Property="Source" Value="{Binding  Converter={StaticResource HoverImage}}"/>-->
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Image.Resources>
        </Image>
    </Grid>
</DataTemplate> 
```

**主窗体代码隐藏：**

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        btnClick.Content = "Data Loaded";
        Stopwatch sw = new Stopwatch();
        DataTable dt = dbLayer.tblSaddleSelectAll();
        sw.Start();
        dgvMap.ItemsSource = dt.DefaultView;
        sw.Stop();
        btnClick.Content = sw.ElapsedMilliseconds.ToString();

    }

  private void dgvMap_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if (e.PropertyName == "row")
        {
            e.Column.Visibility = System.Windows.Visibility.Hidden;
        }
        var column = new DataRowColumn(e.PropertyName);
        column.Header = e.Column.Header;
        column.CellTemplate = (DataTemplate)Resources["MyDataTemplate"];

        e.Column = column;
    } 
```

**DataGrid 的值转换器：**

```
public class BoolToImageConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ImageSource result = null;
        var intValue = value.ToString();
        switch (parameter.ToString())
        {
            case "Layer1":
                if (intValue.ToUpper().Contains("EMPTY"))
                {
                    result = null;
                }
                else
                {
                    result = new BitmapImage(new Uri(@"C:\Users\Images\Box3.png"));
                }
                return result;
            default:
                if (intValue.ToUpper().Contains("EMPTY"))
                {
                    //result = null;
                    result = new BitmapImage(new Uri(@"C:\Users\Images\Box1.png"));
                }
                else
                {

                    result = new BitmapImage(new Uri(@"C:\Users\Images\Box2.png"));
                }
                return result;
        }

    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

**自定义 DatagridTemplateColumn：**

```
public class DataRowColumn : DataGridTemplateColumn
{
    public DataRowColumn(string column) { ColumnName = column; }
    public string ColumnName { get; private set; }
    protected override FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        var row = (DataRowView)dataItem;
        var item = row[ColumnName];
        cell.DataContext = item;
        var element = base.GenerateElement(cell, item);
        return element;
    }
} 
```

**数据库中的数据将如下所示：**
![在此处输入图像描述](../Images/ae8ee896bf8f93d6abbf0b1852dd89db.png)

我将从数据库中加载最多 250 列，20 行。
我的问题是：
1\. 我用来检查加载 DataGrid 所用时间的秒表。它显示的值小于 250 毫秒。但实际上它需要太多的展示，并且在 4-6 秒内 UI 被挂起。为什么挂了？如何克服它？
2\. 将 DataTable 的 DefaultView 附加到 DataGrid 是否是明智的提高性能的更好方法？
3\. datagrid 是显示给定范围数据的地图类型布局的最佳方式吗？我需要用一些工具提示描述来显示存在和不存在。
4\. 我在 DataGrid 中遗漏了什么（属性）来提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:39:50.293

是的，您还可以做一些其他的事情来提高性能。事实上，我之前已经回答过一个关于这个问题的问题。

请看这个问题和我的回答。

[提高 DataGrid 性能](https://stackoverflow.com/questions/13764579/improve-wpf-datagrid-performance/13765128#13765128)

# android - 底部的 ActionBar Sherlock 选项卡

> ID：14133850
> 
> 赞同：5
> 
> 时间：2013-01-03T06:03:58.470
> 
> 标签：android, tabs, actionbarsherlock

可能吗？

我可以使用片段，也可以将选项卡放在底部，但不能使用 ActionBar Sherlock。有人知道怎么做吗？

我正在使用这样的东西来使用标签（它们在底部）：

```
tHost = (TabHost) findViewById(R.id.tabhost2);

    tHost.setup();

    tM = new TabManager(this, tHost, android.R.id.tabcontent);

    tM.addTab(tHost.newTabSpec("tabCREATE").setIndicator("Criar"),
            Criar.CountingFragment.class, null);

    tM.addTab(tHost.newTabSpec("tabCREATE2").setIndicator("Criar2"),
            Criar.CountingFragment.class, null); 
```

如何将其更改为 ActionBar 选项卡？

我通常将它用于操作栏：

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    for (int i = 1; i <= 3; i++) {
        ActionBar.Tab tab = getSupportActionBar().newTab();
        if (i == 1) {
            tab.setText("a");
        }
        else if(i == 2)
            tab.setText("b");
        else if (i == 3)
            tab.setText("c");
        tab.setTabListener(this);
        getSupportActionBar().addTab(tab); 
```

这很好，但我真的需要把它放在底部。是否可以在第二种方法上设置 Tabhost？如何？我相信它会解决我所有的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:32:00.950

在您的清单中添加此代码`android:uiOptions="splitActionBarWhenNarrow"`

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          android:uiOptions="splitActionBarWhenNarrow"
          android:versionCode="431"
          android:versionName="4.3.1"
          package="com.actionbarsherlock.sample.demos"> 
```

并在您的活动中再次添加此代码

```
<activity android:label="@string/activity_name" 
          android:uiOptions="splitActionBarWhenNarrow"
          android:name=".SampleList" android:theme="@style/Theme.Sherlock"> 
```

我尝试过样品，它适用于它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T22:04:01.497

我认为你不能用 ActionBar 做到这一点。`android:uiOptions="splitActionBarWhenNarrow"`只是在屏幕底部为 ActionBar 添加了额外的空间，但它只用于 MenuItems 而不是选项卡。[ActionBar 设计指南](http://developer.android.com/design/patterns/actionbar.html)总是在顶部有标签。看看[http://www.androiduipatterns.com/2011/07/tabs-top-or-bottom.html](http://www.androiduipatterns.com/2011/07/tabs-top-or-bottom.html)哪里是一个很好的讨论标签应该放在哪里。

# math - 三次色的十六进制图表

> ID：14133852
> 
> 赞同：0
> 
> 时间：2013-01-03T06:04:21.043
> 
> 标签：math

任何人都知道我在哪里可以获得三次颜色的十六进制数字图表？

黄色，黄橙，橙，红橙，红，红紫，紫，蓝紫，蓝，蓝绿，绿，黄绿。

我需要黄橙色、红橙色、红紫色、蓝紫色、蓝绿色和黄绿色的确切值。ETC...

我正在制作一个以颜色为主题的游戏。

我似乎找不到列出我知道的名称中的中间颜色的图表。

或者有谁知道如何为 (anycolor * anycolor / 2) 做十六进制数学

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:09:40.440

以下 URL 列出了颜色及其组合的列表。[HTML 颜色代码](http://html-color-codes.com/)

对于数学定义，我建议您必须使用十进制值才能更轻松地找到颜色混合物。请参考，[数学参考](http://www.mathsisfun.com/hexadecimal-decimal-colors.html)

# opera - 使用 Dragonfly Opera 调试 JavaScript

> ID：14133853
> 
> 赞同：2
> 
> 时间：2013-01-03T06:04:24.503
> 
> 标签：opera, opera-dragonfly

![在此处输入图像描述](../Images/9826012bb809ba55fcb8576db581bfa0.png)

如前所述，我已使用[此链接并在本地安装了 Opera Dragonfly。](http://my.opera.com/community/forums/topic.dml?id=984572)但现在我无法加载 JavaScript 进行调试。附上错误截图。关于解决这个问题的任何想法？

我正在使用 Opera 12。

我的蜻蜓环境是： 协议版本：1 核心版本：2.10.289 操作系统：Win32 平台：Win32 用户代理：Opera/9.80 (Windows NT 5.1; U; en) Presto/2.10.289 版本/12.00 Opera Dragonfly 版本：$ dfversion$ 修订号：$revdate$

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:14:46.273

我从未在本地尝试过 Dragonfly。

我发现包含蜻蜓 zip 文件链接的帖子存在一个潜在问题。
这行在这里：`5\. May 2011, 10:52:51`
您确定您的 Opera 版本仍然与此版本的 Dragonfly 兼容吗？

[此存储库](https://github.com/operasoftware/dragonfly)包含可用的最新版本的 Dragonfly。查看有关如何构建蜻蜓的综合提示。（我认为如果您对一些性能损失没意见，甚至不需要构建）

### 以下有助于解决一般问题：

您是否选择了正确的调试上下文？

`Ctrl+Shift+I`通过按下或使用屏幕截图中缩放滑块下方最右侧的按钮从要调试的窗口启动 Dragonfly 。

# firefox - Firefox AwesomeBar的自定义黑名单？

> ID：14133855
> 
> 赞同：2
> 
> 时间：2013-01-03T06:04:44.603
> 
> 标签：firefox, search, filter, firefox-addon

原标题：firefox/greasemonkey 搜索建议的自定义过滤器？

对于工作，我有一些内部网站，如“foo.site.com”或“bar.site.com”，我有几十个书签和历史条目。Firefox 具有在书签、历史记录之间切换的设置，两者都没有，但这些都不适合我，因为它们要么完全禁用它，要么用这些不需要的网站向我发送垃圾邮件。

我正在寻找一个插件，或者如果不存在，关于如何开始编写插件的指针（特定方法、要修补的属性等？）例如，当我打开选项卡并键入“foo”时更改操作：“是站点在历史/书签中？显示它”到：“网站在历史/书签中吗？它在这个文件中被列入黑名单吗？显示它”

我想保留书签和历史记录，以及书签和历史记录的搜索建议。我想阻止 foo.site.com 出现在这些建议中，无论其是否已添加书签等。返回并手动标记数百个书签也不起作用。

# gwt - 无法加载图像，即使它已添加到 RootPanel？

> ID：14133857
> 
> 赞同：0
> 
> 时间：2013-01-03T06:04:56.267
> 
> 标签：gwt

我想将“img”元素显示为面板的子元素。我们应该为此使用 Image 小部件吗？我正在执行以下操作：

```
Image img = new Image();
img.getElement().getStyle().setWidth(80, Style.Unit.PX);
img.getElement().getStyle().setHeight(80, Style.Unit.PX);

// add it to a panel, which eventually gets added to the root panel.
somePanel.add(img);

// set the url
img.setUrl("stuff/test.png"); 
```

这在 FF 上运行良好。当我在移动 Safari 中运行相同的代码时，图像永远不会加载。我已经向 Image 实例添加了一个 LoadHandler。我可以看到在 FF 上触发了事件回调。但在移动 safari 上，它们永远不会被触发。

我记得必须将图像添加到 RootPanel 才能加载它，但我确实这样做了。还有什么可能导致这种情况？我确定 png 资源的位置正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:15:58.310

经验法则：始终使用绝对 URL，可能使用`GWT.getModuleBaseURL()`,`GWT.getHostPageBaseURL()`或`GWT.getModuleBaseForStaticFiles()`作为前缀：

```
img.setUrl(GWT.getHostPageBaseURL() + "stuff/test.png"); 
```

这是因为 GWT 代码在 iframe 中运行并从子文件夹中加载，并且浏览器在使用主机页面还是 iframe URL 来解析相对 URL 的行为上有所不同。

# android - Androidtablet 接受 .NET Framework

> ID：14133859
> 
> 赞同：-2
> 
> 时间：2013-01-03T06:05:05.460
> 
> 标签：android, .net

我必须使用 .net 框架创建 android 平板电脑应用程序。

我不知道这些。

请解释一下它是可能的发展。

如果可能，请说明使用这些框架的优缺点。

使用 .net 框架的恐惧因素是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:14:59.513

为什么要使用它？我不知道是否存在适用于 Android 的稳定 .NET 实现。如果是：它将非常庞大（再次包含 Android 操作系统中已经存在的所有功能）。因此，您的用户必须下载/安装数十兆字节的代码才能获得他们已经拥有的功能。他们不会因此而喜欢你 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:19:46.240

您可以使用 Mono for Android 来使用 Android 平台的 C# 进行开发。该项目目前相当成熟，并生成大小合理的二进制文件（它从最终二进制文件中删除了您不使用的框架中的类型）

# ios - iOS splitViewcontroller 的不同自定义视图控制器

> ID：14133860
> 
> 赞同：4
> 
> 时间：2013-01-03T06:05:07.343
> 
> 标签：ios, uisplitviewcontroller, ipad

我有一个包含 master 和 detailview 控制器的 splitview 控制器。但是现在我需要根据 masterviewcontroller（tableview）中的选择显示不同的自定义视图控制器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:47:11.587

在主视图控制器中编写以下代码。根据 indexpath 值决定创建自定义视图。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     UISplitViewController *splitController = self.splitViewController;
     NSMutableArray *arr = [splitController.viewControllers mutableCopy];

     CustomViewController *customVC = [[CustomViewController alloc]init];
     [arr replaceObjectAtIndex:1 withObject:customVC];
     [customVC release];

     splitController.viewControllers = arr;
} 
```

# vb.net - 日期到 vb.net 中的文本

> ID：14133861
> 
> 赞同：2
> 
> 时间：2013-01-03T06:05:11.203
> 
> 标签：vb.net, date-formatting

在 VB.NET 中，我想获取 Microsoft Excel 等文本中的日期

例如：在 MSExcel 中输入日期：01/01/2013 并将格式设置为文本，它会给出输出 41275

我怎样才能用 vb.net 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:31:34.157

您将需要[DateTime.ToOADate](http://msdn.microsoft.com/en-us/library/system.datetime.tooadate%28v=vs.100%29.aspx)方法。

```
Module Module1

    Sub Main()
        Dim dt As DateTime = DateTime.Parse("1/1/2013")
        Console.WriteLine(dt.ToOADate())
        Console.ReadLine()
    End Sub

End Module 
```

从上面的链接：

> OLE 自动化日期以浮点数形式实现，其整数部分是 1899 年 12 月 30 日午夜之前或之后的天数，其小数部分表示当天的时间除以 24。例如，12 月 31 日午夜1899用1.0表示；1900 年 1 月 1 日上午 6 点由 2.25 表示；1899 年 12 月 29 日午夜，用 -1.0 表示；1899 年 12 月 29 日上午 6 点用 -1.25 表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:10:55.310

做一个日期差异

```
DateDiff(DateInterval.Day, Cdate("01/01/2013"),Cdate("01/01/1900"))-2
OUTPUT:
  -41275

DateDiff(DateInterval.Day, Cdate("01/01/1900"),Cdate("01/01/2013"))+2
OUTPUT:
  41275 
```

参考**[现场演示](http://ideone.com/pyhOlk)**

# java - 在 JFrame 的一角插入 logo

> ID：14133868
> 
> 赞同：-3
> 
> 时间：2013-01-03T06:05:40.687
> 
> 标签：java, swing, icons, jframe, imageicon

> **可能重复：**
> [如何更改 JFrame 图标](https://stackoverflow.com/questions/1614772/how-to-change-jframe-icon)

我想在我的 Java 桌面应用程序的窗口一角放置 Logo 或一些图标。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:20:21.370

用于[`setIconImage(ImageIcon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setIconImage%28java.awt.Image%29)此。

# java - 字符数组中的空格

> ID：14133872
> 
> 赞同：1
> 
> 时间：2013-01-03T06:05:58.093
> 
> 标签：java

我只是想用字符数组做一些事情。当我反转它时，每个原始字符后面都会出现一个空格。为什么 ？我的代码片段是这样的

```
public class StringReverseChar {
//REVERSE A STRING CHARACTER BY CHARACTER
    static String mStr=".gnihtemos od ot gniyrT ma I";
    int len;
    int topOfS;
    char[] myReverse=new char[75];

    public StringReverseChar() {
         topOfS=-1;
         myReverse=new char[70];
    }
    public static void main(String ar[]){

        StringReverseChar mObj=new StringReverseChar();
        int len=mObj.calLen(mStr);
        for(int i=0;i<len;i++)
              mObj.pushChar(mStr.charAt(i));
//      System.out.println("The Reverse is:");
        while(mObj.topOfS !=-1)
        System.out.print(mObj.popChar());
    }

    private char popChar() {
        return myReverse[topOfS--];
    }
    private void pushChar(char c) {
        myReverse[++topOfS]=c;
        System.out.print(myReverse[topOfS++]);
    }

    private int calLen(String mStr2) {
        return mStr2.length();
    }
} 
```

我的输出是这样的： 反过来是： I amtryingtodosomething 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:07:57.467

罪魁祸首在这里：

```
private void pushChar(char c) {
    myReverse[++topOfS]=c;
    System.out.print(myReverse[topOfS++]);
} 
```

你增加`topOfS`了两次。

请注意，整个代码可以替换为：

```
public class StringReverseChar {
    static String mStr=".gnihtemos od ot gniyrT ma I";
    public static void main(String ar[]) {
        System.out.println(new StringBuilder(mStr).reverse());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:28:22.900

**-**首先，**除非有必要，否则您永远不应该重新发明轮子。**

**-**使用`StringBuilder` **（非线程安全）**或`StringBuffer` **（线程安全）**方法`reverse()`。

**例如：**

```
String mStr= ".gnihtemos od ot gniyrT ma I";

String reStr = new StringBuilder(mStr).reverse(); 
```

**您的代码中的问题：**

**-**你**增加了两次。**

```
private void pushChar(char c) {
    myReverse[++topOfS]=c;
    System.out.print(myReverse[topOfS++]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:09:43.580

```
 private void pushChar(char c) {
        myReverse[++topOfS]=c;
       System.out.print(myReverse[topOfS++]);
   } 
```

应该：

```
 private void pushChar(char c) {
        myReverse[++topOfS]=c;
       System.out.print(myReverse[topOfS]);
   } 
```

一个。如果你做出这样的改变，你还有问题吗？不知道那是调试代码，还是一直存在的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T06:09:34.207

```
myReverse[++topOfS]=c;
        System.out.print(myReverse[topOfS++]); 
```

你为什么要增加两次？

# windows-phone-7 - 读取已在 wp7 中打开的文件

> ID：14133882
> 
> 赞同：2
> 
> 时间：2013-01-03T06:07:16.340
> 
> 标签：windows-phone-7, isolatedstorage

在我的记录器应用程序中，我需要打开文件进行记录。我在应用程序关闭时关闭流。但是，我也需要支持读取日志文件的内容。所以当我尝试打开日志文件时，我遇到了 IsolatedStorageException-“Operation not在 Isolatestoragefilestream 上允许"

这是示例代码：

日志文件创建：

```
IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication();
    file.CreateDirectory("/log");                
    var stream = file.OpenFile("/log/sample.log", 
    System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.ReadWrite,
    System.IO.FileShare.ReadWrite); 
```

日志入口代码：

```
byte[] buffer = System.Text.Encoding.UTF8.GetBytes("Hello World");
    stream.Write(buffer,0,buffer.Length);
    stream.Flush(); 
```

我可能需要阅读内容：

```
IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication();
//here i encounter isolated storage exception
    var stream = file.OpenFile("/log/sample.log", System.IO.FileMode.Open, 
    System.IO.FileAccess.Read,System.IO.FileShare.Read); <br>
    byte [] buffer = new byte[1024];<br>
    stream.Read(buffer, 0, buffer.Length); 
```

我只是试图以读写模式打开一个示例文件，然后再次以读取模式单独打开它，但我仍然得到同样的错误。在 wp7 中，我们不能在文件打开时读取文件吗？（我的意思是......不关闭首次打开时流式传输>）。

请让我知道任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:08:42.413

您需要更改读取操作标志。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)文章：

> **读取** 允许随后打开文件进行读取。

在您的情况下，最好使用 ReadWrite 模式：

> **ReadWrite**允许随后打开文件以进行读取或写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:14:50.110

据我说：

在应用程序启动时打开文件读取和写入模式，并使用相同的文件实例来读取和写入文件内容。意味着不要单独打开文件进行读取和写入。

# ruby-on-rails - 表单提交后付款

> ID：14133886
> 
> 赞同：0
> 
> 时间：2013-01-03T06:07:42.543
> 
> 标签：ruby-on-rails, forms, paypal

我有一个创建新事件的表格。创建新事件后，我想将表单信息发布到 PayPal PayFlow 并将用户发送到 paypal 网站以完成付款。我没有经验的猜测是进行 after_create 回调以呈现单独的视图以发布贝宝支付流表单信息。但这似乎不是正确的解决方案。

你能建议一种更“Rails 方式”来做到这一点吗？

以下是有关 PayPal Payflow 流程的更多详细信息：我传递了一些参数

```
`curl https://pilot-payflowpro.paypal.com -kd "TRXTYPE=S&AMT=23.45&CURRENCY=USD&CREATESECURETOKEN=Y&SECURETOKENID=9a9ea8208de1413abc3d60c86cb1f4c5"` 
```

并收到一个安全令牌 `RESULT=0&RESPMSG=Approved&SECURETOKEN[25]=Fj+1AFUWft0+I0CUFOKh5WA==&SECURETOKENID=9a9ea8208de1413abc3d60c86cb1f4c5`

然后我可以像这样将值发布到贝宝：

```
<body>
  <form method="post" action="https://payflowlink.paypal.com">
    <input type=hidden value="Fj+1AFUWft0+I0CUFOKh5WA==" name=SECURETOKEN/>
    <input type=hidden value="9a9ea8208de1413abc3d60c86cb1f4c5" name=SECURETOKENID/>
  </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:34:40.780

我在这个链接中找到了答案：[Rails, How to submit PayPal requests from controller, instead of a form, URL encoding](https://stackoverflow.com/questions/5929716/rails-how-to-submit-paypal-requests-from-controller-instead-of-a-form-url-enc)

因为我使用的是 Payflow，所以我添加了更多代码来使用安全令牌。

`events_controller.rb`

```
def create
    @event = Event.new(params[:event])

    respond_to do |format|
        if @event.save!
            format.html { redirect_to @event.send_to_paypal }
            format.json { render json: @event, status: :created, location: @event }
        else
            format.html { render action: "new" }
            format.json { render json: @event.errors, status: :unprocessable_entity }
        end
    end
end 
```

`event.rb`

```
def send_to_paypal
    token = UUIDTools::UUID.random_create.to_s
    response = Rack::Utils.parse_nested_query(`curl https://pilot-payflowpro.paypal.com -kd "#{GATEWAY.to_param}&TRXTYPE=S&AMT=23.45&CURRENCY=USD&CREATESECURETOKEN=Y&SECURETOKENID=#{token}"`)

    if response['SECURETOKENID'] != token || response['RESULT'] != "0" || response['SECURETOKEN'].blank?
        raise StandardError, response['RESPMSG']
    else
        URI.encode("https://pilot-payflowlink.paypal.com?MODE=test&SECURETOKENID=#{token}&SECURETOKEN=#{response['SECURETOKEN']}")
    end
end 
```

GATEWAY 是一个配置常量，带有我的支付流网关参数 (.

我最初在 payflowlink.paypal.com 中提交测试数据时遇到了一些模糊的错误。与此链接类似，[PayPal's Payflow Gateway SDK Example not working](https://stackoverflow.com/questions/9171166/paypals-payflow-gateway-sdk-example-not-working)这是由于在`URI.encode(...)`. 在取出 PARMLIST 并添加`MODE=test`之后，一切都按预期工作。希望这可以帮助其他使用 Payflow 的人。

# java - RESTful Web服务中的xml输入验证

> ID：14133889
> 
> 赞同：0
> 
> 时间：2013-01-03T06:08:09.493
> 
> 标签：java, rest, jax-rs

我有一个要求，我需要将一个 xml 文件发送到其余资源。我需要对该 xml 文件进行一些验证。如果验证成功，则只会添加该 obj。任何人都可以就如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:25:36.727

只需以验证方法输入的方式进行验证，如果有问题[`WebApplicationException`](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/WebApplicationException.html)则抛出：

```
@POST
@Path("/upload")
public void upload(@FormParam("xml") String xml) {
  try {
    Document doc = this.parse(xml);
  } catch (SAXException ex) {
    throw new WebApplicationException(
      ex,
      Response.status(HttpURLConnection.HTTP_BAD_REQUEST).build()
    );
  }
} 
```

否则，您可以接受 XML 作为 HTTP POST 正文：

```
@POST
@Path("/upload")
public void upload(String xml) {
  // the same as above
} 
```

否则，您可以使用 JAXB 将传入的 XML 转换为带有 JAXB 注释的类（[阅读更多](http://docs.oracle.com/javaee/6/tutorial/doc/gkknj.html)）：

```
@POST
@Path("/upload")
@Consumes("application/xml")
public void upload(Product product) {
  assert product.price().equals("50 USD");
} 
```

# javascript - 单击子控件单击时如何停止父gridview事件？

> ID：14133894
> 
> 赞同：0
> 
> 时间：2013-01-03T06:08:29.550
> 
> 标签：javascript, asp.net

我在 GridView 中有链接按钮。GridView 有客户端事件-rowselect。当我单击 LinkBut​​ton 时，会触发客户端事件 (rowselect)。当我单击 LinkBut​​ton 时，我想停止触发 rowselect 客户端事件。

有什么解决办法吗？

例如。

GridView 有 3 行 2 列

```
Column 1 ---- Column 2 [LinkButton]
AAAAAA   ---- test.aspx?ID=001
BBBBBB   ---- test.aspx?ID=002
CCCCCC   ---- test.aspx?ID=003

Client Side JavaScript (fired on GridView row selection)
function DisplayData(gridview row)
{
  //get data from selected row.
} 
```

如果选择行的第一列，调用客户端事件，就可以了。但是当单击 LinkBut​​ton 时，重定向到 test.aspx .. 客户端事件没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:13:49.267

向您添加一个单击处理程序，以`LinkButton`防止事件冒泡。使用`event.stopPropagation()`. 对于较旧的 IE 浏览器，请使用`event.cancelBubble = true`：

```
<asp:LinkButton runat="server" OnClientClick="cancelClick(event)" ... /> 
```

```
function cancelClick(e) {
    if (e.stopPropagation) e.stopPropagation();
    e.cancelBubble = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:09:24.620

您可以使用 event.stopPropagation 来停止事件传播。对于不支持的旧浏览器，`e.stopPropagation()`您可以使用`e.cancelBubble = true`

```
document.getElementById("<%= yourRadDatePickerID.ClientID %>").onclick = function(e) {

    if(e && e.stopPropagation ) 
    {
        e.stopPropagation();
    } 
    else
    {
          e = window.event;
          e.cancelBubble = true;
    }
} 
```

# web - 网站介绍

> ID：14133904
> 
> 赞同：-1
> 
> 时间：2013-01-03T06:10:12.847
> 
> 标签：web

我想知道如何制作持续几秒钟的介绍页面，然后将您带到网站的主页。也就是说，当有人键入我的域名时，我需要一个页面来介绍我的网站主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:13:21.633

这将是您可以用来重定向站点的方法，将内容更改为您希望查看者停留在页面上的秒数。

```
<meta http-equiv="refresh" content="0; url=http://whatever.org/"> 
```

**[从这里](https://stackoverflow.com/questions/5411538/how-to-redirect-from-html-page)**引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:15:42.480

你可以通过两种方式做到这一点，

1.  创建一个弹出窗口并使用 javascript setTimeOut() 进行延迟
2.  将索引页面作为网站的主题并使用 setTimeOut() 进行延迟，然后重定向到您的主页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:16:31.793

您也可以使用 javascript 进行重定向。此示例在 2 秒后重定向页面：

```
<script type="text/javascript">
function foo()
{
    window.location = "http://www.google.com/";
}
setTimeout(foo, 2000);
</script> 
```

# java - 这里需要用到ThreadLocal吗？

> ID：14133905
> 
> 赞同：1
> 
> 时间：2013-01-03T06:10:37.643
> 
> 标签：java, multithreading, thread-local

我想知道我们什么时候需要使用 threadlocal 变量？，我有一个运行多个线程的代码，每个线程都读取 S3 上的一些文件，我希望跟踪总共从文件中读取了多少行，这是我的代码：

```
final AtomicInteger logLineCounter = new AtomicInteger(0); 
for(File f : files) {
   calls.add(_exec.submit(new Callable<Void>() {
    @Override
    public Void call() throws Exception {
       readNWrite(f, logLineCounter);
       return null;
    }
    }));
}
for (Future<Void> f : calls) {
   try {
      f.get();
   } catch (Exception e) {
      //
   }
}
LOGGER.info("Total number of lines: " + logLineCounter);
...

private void readNWrite(File f, AtomicInteger counter) {
    Iterator<Activity> it = _dataReader.read(file);

    int lineCnt = 0;
    if (it != null && it.hasNext()) {
       while(it.hasNext()) {
         lineCnt++;
         // write to temp file here

       }
       counter.getAndAdd(lineCnt);
    }
} 
```

我的问题是我是否需要将方法中的`lineCnt`in`readNWrite()`设为 threadlocal？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:13:11.850

`lineCnt`已经是“线程本地”，因为它在堆栈上。`ThreadLocal`仅在需要实例成员变量的线程本地副本时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:13:20.173

不，您不需要在这里使用 ThreadLocal - 您的代码看起来非常好：

*   `lineCnt`是一个局部变量，因此不跨线程共享 => 它是线程安全的
*   `counter.getAndAdd(lineCnt);`是原子和线程安全的操作

如果你有兴趣，SO上有几篇关于ThreadLocal使用的帖子，比如[这篇](https://stackoverflow.com/questions/817856/when-and-how-should-i-use-a-threadlocal-variable)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:18:20.997

您不需要明确地使 lineCnt a `ThreadLocal`。`lineCnt`是线程的局部变量。任何其他线程都无法访问它。

[您可以在此处](http://veerasundar.com/blog/2010/11/java-thread-local-how-to-use-and-code-sample/)获取有关 ThreadLocal 的更多信息

[来自javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)的 ThreadLocal

> 这些变量不同于它们的正常对应变量，因为每个访问一个（通过它的 get 或 set 方法）的线程都有它自己的、独立初始化的变量副本。ThreadLocal 实例通常是希望将状态与线程相关联的类中的私有静态字段

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T06:22:08.407

**-** A`Thread`有`Stack`, `Register`, 和`Program Counter`.

**-** `lineCnt`已经进入了`ThreadLocal`。

**-** `lineCnt`是**此线程**的实例变量 lineCnt的**个人副本**，它对任何其他线程**都不可见。**

# visual-studio-2010 - 将工具栏恢复到 Visual Studio 2010 Express

> ID：14133911
> 
> 赞同：-1
> 
> 时间：2013-01-03T06:10:58.703
> 
> 标签：visual-studio-2010, toolbar

我从回复中注意到我没有看到 VS 2010 Express 的任何解决方案。所以这里是：

查看工具箱，在工具箱窗口内右击，点击显示全部！

-----我重置了工具箱，所有选择都消失了。我在考虑刷新，但是它从 dll 中进行了刷新并删除了 Show All 选项。

如何恢复我的工具栏。

即使我没有 Studio 命令提示符。我在我的机器中搜索.*.tbd 文件，但没有找到任何要删除的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:41:28.813

经过长时间的研究，我发现以下步骤允许您完全重置工具箱并启用 Visual Studio 从头开始​​重建它。在大多数情况下，此过程可以解决与 Silverlight 工具箱项相关的所有问题。

最重要的是，从 Visual Studio 重置工具箱。为此，右键单击工具箱并单击“重置工具箱”项。重置过程完成后，请执行以下步骤：

1.  关闭 Visual Studio；

2.  打开 C:\Users\\AppData\Local\Microsoft\VCSExpress\10.0 C:\Users\\AppData\Local\Microsoft\VWDExpress\10.0

(Windows 7) 文件夹并删除所有 .TBD 文件；3\. 运行“regedit”工具。为此，单击“开始”菜单中的“运行”项，然后键入不带引号的“regedit”；

1.  找到“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\VCSExpress\ToolboxControlsInstaller_AssemblyFoldersExCache”和“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\VCSExpress\ToolboxControlsInstallerCache”键；

2.  从这些键中删除所有内容，使它们为空；

3.  再次运行 Visual Studio 并等待它重新创建工具箱中的所有项目。

# c# - 当代码从一台机器传输到另一台机器时，树视图控件出现错误

> ID：14133921
> 
> 赞同：0
> 
> 时间：2013-01-03T06:11:45.710
> 
> 标签：c#, asp.net, treeview, publishing

我在树视图控件上遇到错误。图像如下所示。

可能的原因是什么。我已将发布的代码从一台 PC 转移到另一台 PC。目标机器有windows 2008 server。

一切都很好，除了树视图控件：

![损坏的树视图](../Images/b218260aa2fb74d6fbfa1e1fcef4e537.png) 可能的原因是什么？

**更新**

这是我的摘录`web.config`

```
<system.webServer>
  <validation ntegratedModeConfiguration="false" />
  <handlers>
    <add name="ReportViewerWebControl" 
         path="Reserved.ReportViewerWebControl.axd" verb=""  
         type="Microsoft.Reporting.WebForms.HttpHandler" 
         resourceType="Unspecified" 
         requireAccess="Script" 
         preCondition="integratedMode" />
    <add name="ReportViewerWebControlHandler" 
         preCondition="integratedMode" 
         verb="" 
         path="Reserved.ReportViewerWebControl.axd" 
         type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </handlers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:43:35.470

当您将文件从一台服务器传输到另一台服务器但错过了 axd 文件的映射时，就会发生这种情况。

许多控件在 dll 中嵌入图像并使用 WebResource.axd 检索它们。

一个常见的原因是从一个版本的 IIS 迁移到另一个版本。

在 IIS6 中，您可以将其映射为：

```
 <httpHandlers>
  <add verb=”Get” path=”WebResource.axd”
   type=”System.Web.Handlers.AssemblyResourceLoader” />
 </httpHandlers> 
```

但是在 IIS7 中，您将需要

```
<system.webServer>
 <modules>
 </modules>
 <handlers>
  <add name=”webresources” verb=”Get” path=”WebResource.axd”
   type=”System.
   Web.Handlers.AssemblyResourceLoader” />
 </handlers>
</system.webServer> 
```

# perl - 从另一个脚本调用 perl 脚本

> ID：14133925
> 
> 赞同：-3
> 
> 时间：2013-01-03T06:12:29.300
> 
> 标签：perl

我需要从另一个脚本调用 perl 脚本。约束是，在 .pm 文件中定义的全局变量很少在两个脚本之间通用，但局部变量不共享。请让我知道如何做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:31:18.070

您是否有任何理由不能将第二个脚本中的代码作为第一个脚本中的函数调用？它应该作为单个程序工作，因此共享全局变量。

检查[如何在我的 Perl 脚本中包含来自另一个文件的函数？](https://stackoverflow.com/questions/1712016/how-do-i-include-functions-from-another-file-in-my-perl-script)了解将一个脚本包含到另一个脚本中的各种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:41:54.797

这取决于您希望它如何工作。

如果你想在进程之间*共享*全局变量，那么你就是一个“享受”。您将需要共享内存 ( `shmget`) 或其他一些 IPC（进程间通信）机制，请参阅`perldoc perlipc`。有趣的部分是同步这两个进程，这样它们就不会尝试同时更新相同的东西。如果可以避免的话，你真的不想去那里。

更简单的是，如果您只想将这些全局值传递给第二个进程，以便它可以获取自己的副本。如果这些值是简单的文本，那么您可以将它们作为命令行参数（从 中读取`@ARGV`）或作为环境变量 ( `%ENV`) 传递。但是，如果它们更奇特，例如引用或文件句柄，那么您需要找出不同的协议。假设您不使用 Windows，使用`fork`（您可能不需要）创建子进程可能是一种更简单的方法。`exec`

更好的是，考虑您是否真的需要复制或共享这些全局变量。

# asp.net-mvc-3 - ViewBag 和 Models 在尝试 Pluggable MVC 区域时不可用

> ID：14133926
> 
> 赞同：0
> 
> 时间：2013-01-03T06:12:34.767
> 
> 标签：asp.net-mvc-3, asp.net-mvc-areas, pluggable

我已经尝试过这篇文章中讨论的可插拔结构： [Pluggable MVC view return null](https://stackoverflow.com/questions/10032239/pluggable-mvc-view-return-null)

在这篇文章中也有解释：[http ://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/)

当我尝试在其中一个区域访问 ViewBag/Model 时，它给了我这个错误：

* * *

*   当前上下文中不存在名称“ViewBag”

*   当前上下文中不存在名称“模型”***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:25:36.057

由于您从未知位置提供视图，因此不再有适用于它的 ~/Views/web.config。如您所知，此文件中指定了 Razor 视图 ( `System.Web.Mvc.WebViewPage`) 的基本类型。因此，一种可能性是在`@inherits`视图顶部添加一个指令：

```
@inherits System.Web.Mvc.WebViewPage
@model MyViewModel

<div>@ViewBag.FooBar</div> 
```

旁注：既然你已经有了一个视图模型，为什么还要关心`ViewBag`？为什么不摆脱它？

# c# - 查询 System.DirectoryServices.ActiveDirectory

> ID：14133928
> 
> 赞同：0
> 
> 时间：2013-01-03T06:12:56.647
> 
> 标签：c#, dns, active-directory, domaincontroller

我`Domain`在命名空间中使用对象`System.DirectoryServices.ActiveDirectory`。每当我使用`Domain.GetCurrentDomain`or查询域详细信息`Domain.GetDomain`时，它都会与域控制器建立连接。可以通过`netstat -ano|findstr 389`命令查看此连接。

代码：

```
Domain dom = Domain.GetCurrentDomain(); 
```

我的问题是，如何关闭连接？我可以关闭连接的唯一方法是处置`Domain`对象。因为我已经在我的代码中缓存了`Domain`对象，所以我不想处理它。它提出的问题是，“ESTABLISHED”状态保持一段时间后它变为“CLOSE_WAIT”。

```
netstat -ano | findstr 389

  TCP    10.241.93.168:51291    154.1.124.156:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:51297    154.1.124.154:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:51302    154.1.124.158:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:51320    154.1.124.155:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:51323    154.1.124.153:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:51332    154.1.124.157:389      CLOSE_WAIT      8028
  TCP    10.241.93.168:53399    148.86.153.162:389     CLOSE_WAIT      8028
  TCP    10.241.93.168:53436    139.172.150.15:389     CLOSE_WAIT      8028 
```

出于安全原因，我需要消除这种陈旧的连接。如果您有任何建议，请告诉我。

谢谢，桑托什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:46:47.647

我敢打赌，该`Domain`对象保持连接打开，因为您可以对其执行操作。

如果您只需要获取一些域信息，您可能应该阅读它并将其存储在一个简单的类中，然后将`Domain`.

# matlab - MATLAB如何访问符号方程系统解中的特定系数？

> ID：14133935
> 
> 赞同：1
> 
> 时间：2013-01-03T06:13:42.677
> 
> 标签：matlab, montecarlo, symbolic-math

我需要在方程组上运行一个简单的蒙特卡洛变量系数。我每次都需要记录其中一个变量的求解系数。

以下是一次运行的结果：

```
syms alpha gamma Ps Pc beta lambda Pp Sp Ss Dp Ds;

eq1 = -Ss + alpha + 0.17*Ps - 1*Pc;
eq2 = -Sp + beta + 0.2*Pp;
eq3 = -Ds + gamma - 0.2*Ps + 1*Pp;
eq4 = -Dp + lambda - 0.17*Pp + 1*Ps;
eq5 = Ss - Ds;
eq6 = Sp - Dp;

ans1 = solve(eq1,eq2,eq3,eq4,eq5,eq6,'Ps','Pp','Ss','Ds','Sp','Dp');

disp('Ps')
vpa(ans1.Ps,3)
disp('Pp')
vpa(ans1.Pp,3)
disp('Ss')
vpa(ans1.Ss,3)
disp('Ds')
vpa(ans1.Ds,3)
disp('Sp')
vpa(ans1.Sp,3)
disp('Dp')
vpa(ans1.Dp,3) 
```

我将改变几个变量（在 Ps、Pp 和 Pc 上），并在每个简化形式方程中记录 Pc 上的系数（即，在之后出现的 Pc 上的系数`vpa(ans1.xx)`- 所以在上述情况下，它将是一个 1x6 向量`[-0.429,-1.16,-1.07,-1.07,-0.232,-0.429,-1.16]`）。

我对 MATLAB 很陌生，但我确信我可以弄清楚如何实现循环代码来进行模型迭代。我想不通的是如何在每次迭代后记录系数向量。是否有一些“访问器”每次只给我每个方程的一个系数？类似的东西`vpa(ans1.ps.coef(pc))`（这完全是在黑暗中拍摄，这是错误的，但希望你明白）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:23:50.650

可能有更好的方法来做到这一点，但这是我目前所能想到的。

步骤1：为了从 中获取`Pc`a`double`的系数`ans1.Ps`，可以使用[`subs`函数](http://www.mathworks.com/help/symbolic/subs.html)，如下：

```
 subs(ans1.Ps,{alpha,Pc,beta,gamma,lambda},{0,1,0,0,0}); 
```

步骤 2a：

要获得每个`ans1`表达式的所有系数的向量（例如`ans1.Ps`），您可以使用以下内容：

```
N=numel(symvar(ans1.Ps)); % obtain number of coefs
cp=num2cell(eye(N));      % create a cell array using unit matrix, so each iteration a different coef will be selected

for n=1:N;
   coefs(n)=subs(ans1.Ps,{alpha,Pc,beta,gamma,lambda},cp(n,:));
end 
```

步骤 2b：

或者，您只想`Pc`从所有 ans1 表达式中获取 , 。如果是这样，那么您可以执行以下操作：

```
SNames = fieldnames(ans1); % get names of ans1 expressions
for n = 1:numel(SNames) 
    expr = ans1.(SNames{n}); % get the expression itself
    pc(n)=subs(expr,{alpha,Pc,beta,gamma,lambda},{0,1,0,0,0}); % obtain just pc
end 
```

如果您想要有关系数的所有信息，您现在可以将两者结合起来。

**编辑：**

要存储每次迭代检索到的 Pc，您可以执行以下操作：

```
alpha=[3 1 4 6 7] % just a vector of values
beta = [6 7 8 5 2]
SNames = fieldnames(ans1); % get names of ans1 expressions

for n = 1:numel(SNames) 
    expr = ans1.(SNames{n}); % get the expression itself

    for n1=1:numel(alpha)
        for n2=1:numel(beta) 

            pc(n,n1,n2)=subs(expr,{alpha,Pc,beta,gamma,lambda},{alpha(n1),1,beta(n2),0,0})

         end
    end
end 
```

# actionscript-3 - 如何在 Flex 中的两个 Popup mxml 文件之间共享对象？

> ID：14133938
> 
> 赞同：0
> 
> 时间：2013-01-03T06:14:32.557
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

在我的 Flex 应用程序中`CreateEvent.mxml`，`AddEvent.mxml`文件是他们的。

在 CreateEvent.mxml 中：

```
[Bindable]public var timetabelVO:TimetableVO = new TimetableVO();//This is external object (java)
----------- 
```

现在我想`timetableVO`在 AddEvent.mxml 文件中使用对象，所以我这样做..

```
public var create:CreateEvent = new CreateEvent();
var timetable:TimetableVO = create.timetableVO; 
```

但听到`timetable variable have NULL`价值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:12:33.927

绝对它应该返回 null 因为您的代码说您正在创建一个新对象“public var create:CreateEvent = new CreateEvent();” 而不是尝试使用类的空实例初始化属性（var timetable:TimetableVO）。

您可以在以下链接中找到更多详细信息 -[如何将 Java 对象发送到 java 中的两个 mxml 文件之间？](https://stackoverflow.com/questions/14098540/how-to-send-java-object-into-between-two-mxml-files-in-java/14099066#14099066)

# php - Form_DropDown 的 onChange 方法

> ID：14133942
> 
> 赞同：0
> 
> 时间：2013-01-03T06:15:11.543
> 
> 标签：php, javascript, codeigniter

我正在使用 form_dropdown()。但它的 onchange() 函数不起作用。这是我的简单代码

```
$js ='onChange="message()"';
echo "<script type=\"text/javascript\" > function message(){ 
alert('hello');
</script>";
echo form_dropdown('name',$data,$js); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:17:48.320

看起来你想念`}`这里

```
echo "<script type=\"text/javascript\" > function message(){ 
alert('hello');
</script>"; 
```

应该

```
echo "<script type=\"text/javascript\" > function message(){ 
alert('hello');
}
</script>"; 
```

**更新**
我只是[在这里](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)检查，javascript应该是第四个参数。第三个应该是默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:28:53.017

如果您在服务器上加载文件并在浏览器中打开；使用查看源代码

```
<script type="text/javascript" > function message(){ 
alert('hello');
</script><br />
<b>Fatal error</b>:  Call to undefined function:  form_dropdown() in <b>/var/www/html/parag/synchro2/dddd.php</b> on line <b>6</b><br /> 
```

你会看到 } 在 alert('hello'); 之后丢失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:11:58.107

```
echo form_dropdown('name', $data, '', $js); 
```

你应该这样使用。第三个参数是默认值

# android - 如何在android中使用ViewFlipper显示来自sqlite的内容

> ID：14133943
> 
> 赞同：2
> 
> 时间：2013-01-03T06:15:23.453
> 
> 标签：android, sqlite, view

在我的场景中，我在 sqlite 中有 3 条记录，这些记录是从包含 id、名称、描述和图像的 websercive 中获取的，现在我想在翻转第一条记录后显示第一条记录和第二条记录。在第二条记录翻转后显示 3 条记录。

到目前为止我所做的是

```
 while (cursor.moveToNext())
    {

         String temp_bookid = cursor.getString(0);
         Log.i("temp_bookid",temp_bookid);
         String temp_desc=cursor.getString(1);
         byte[] temp_image1 = cursor.getBlob(2);
         byte[] temp_image2 = cursor.getBlob(3);
         String temp_id=cursor.getString(4);
         String temp_name = cursor.getString(5);
         String temp_bname=cursor.getString(6);
         mapId.add(temp_id);
         mapBname.add(temp_bname);
         mapBookId.add(temp_bookid);
         mapName.add(temp_name);
         mapDesc.add(temp_desc);
         map2.add(temp_image2);
         map1.add(temp_image1);
            Log.i("temp_id of the page in sqlite", temp_id);

            TextView txtDesc = (TextView) findViewById(R.id.tDescription);
            text = (TextView) findViewById(R.id.tTitle);
            text.setText(temp_name);

            txtDesc.setText(temp_desc);

            ImageView img = (ImageView)findViewById(R.id.smallImage);

            img.setImageBitmap(BitmapFactory.decodeByteArray(temp_image1, 0,temp_image1.length));
            txtName1 = (TextView) findViewById(R.id.tvName);
            txtName1.setText(temp_bname);

            break;
    }   

            mContext = this;
        vf = (ViewFlipper) this.findViewById(R.id.vfShow);
        vf.setOnTouchListener(new OnTouchListener() {
        @Override
            public boolean onTouch(final View view, final MotionEvent event) {
                detector.onTouchEvent(event);
                Log.i("ew","ae");

                return true;
            }
        }); 
```

当我设置休息时，我能够显示第一条记录数据；声明，否则它正在显示最后记录数据..如何继续这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:23:52.463

`List<YourDataClass> myList`首先从 onCreate 方法获取所有记录并存储在对象中。正如我刚刚给你的例子

现在，在获取数据并存储在列表对象中之后，您需要实现翻转器更改事件，以便当翻转器更改时获取当前位置并使用此位置从列表对象中获取数据作为对象。当您向右/向左移动时，它将为您提供当前位置，您只需要使用此位置从列表对象中获取记录

例如

您的 POJO 类将存储数据 MyData.java

```
public class MyData{
    public long id = -1;
    public String name = "";
    public String description = "";
    public String imagePath = ""; /// I don't know you want exactly, you need to implement image as per your requirement.
} 
```

在你的活动中

```
private List<MyData> myList = new ArrayList<MyData>();

oncreate(){

fetchData(); // you need to implement this in AsyncTask so UI was not block just implement AsyncTask and call this method in doInBackground().

// after this you can implment View flipper and add view and set the data by fetch the list object using current view flipper position.

}

private void fetchData(){

    while (cursor.moveToNext()){
         MyData myData = new MyData();
         myData.id = cursor.getLong(0);
         myData.desc=cursor.getString(1);
         myData.name = cursor.getString(5);
         list.add(myData);
         myData = null;
    }

} 
```

# bash - xdotool 录音机

> ID：14133947
> 
> 赞同：8
> 
> 时间：2013-01-03T06:15:45.767
> 
> 标签：bash, user-interface, automation, xdotool

有人知道自动 xdotool 脚本生成器吗？理想情况下，我想在我的桌面上记录一系列动作，并让它自动为我制作成 xdotool 脚本，而不是手动添加暂停和计算像素等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T09:19:36.727

如果不知道更多关于你想要做什么，我不能肯定地说，但我认为你可能想要使用它`xmacro`。这里有一个很好的教程：http: [//linuxpoison.blogspot.in/2012/03/record-play-keystrokes-and-mouse.html](http://linuxpoison.blogspot.in/2012/03/record-play-keystrokes-and-mouse.html)

这是一个摘要：

```
# Start recording macro.
xmacrorec2 > macro.txt
# Select a keystroke to end the macro.
# Do stuff.
# End the macro with the previously chosen keystroke. 
```

并运行宏：

```
xmacroplay $DISPLAY < macro.txt 
```

博客文章指出，没有记录时间信息。

# r - 序列识别、出现次数计数和检索部分序列

> ID：14133948
> 
> 赞同：3
> 
> 时间：2013-01-03T06:15:49.490
> 
> 标签：r

我不认为我想做的事情真的很难，但是我缺乏做这些事情的适当的 R 知识。所以帮助真的很感激！

我有一个包含蛋白质名称和序列的文件，所以是这样的：

```
Protein1 ABCDEFGHIJKLMNOPQRSTUWXYZ
Protein2 ABCDEFGHIJKUVMNOPQRSTUVWXYZ
Protein3 ABCUVDEFGHIJKLMNOPQRSTVVW 
```

我正在寻找包含模式`'UU'`或`'UV'`的蛋白质`'VV'`。我这样做是使用：

（**编辑：**这是一个简化的例子，目前我正在查看三元组（“[UV][UV][UV]”））

```
y <- x[grep("[UV][UV]", x[,2]),] 
```

所以现在我知道哪些确实有这种模式，但我想要更多。首先，我想知道这种模式在序列中出现的频率，但到目前为止我不知道如何做到这一点。这就是第 1 个问题。

问题2：我想提取前面的模式+部分序列。到目前为止，我使用过：

```
pattern <- "[A-Z]{5}[UV][UV]"
locs <- regexpr(pattern, y[,2])
z <- substr(y[,2], locs, locs+attr(locs,"match.length")-1) 
```

这确实有效，但仅针对一种模式，它不包括模式出现的所有情况。

我想最终得到的是包含这些信息的东西：

```
Protein name,
number of patterns found in the sequence,
pattern + part of the desired sequence in front 
```

在我的示例中，结果将是这样的：

```
Protein1
0

Protein2
2
GHIJKUV
PQRSTUV

Protein3 
2
ABCUV  #don't know about this one, since the sequence in front is shorter than 5\. For me it would be best if these would not appear.
PQRSTVV 
```

**编辑**：最后我想有一个数据矩阵保存到一个文本文件中，所以我可以与其他人分享。然后最好我想得到这样的结果：

```
ProteinName Count Sequence1 Sequence2 Sequence3 SequenceMax
Protein1    0 
Protein2    2     GHIJKUV   PQRSTUV 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:26:20.130

对于匹配数：

```
> sapply( strsplit(dat[[2]], "UU|UV"), length) -1
[1] 0 2 1 
```

要隔离序列，请检查哪些结果与输入的字符数不同：

```
> sub("(.+)(.{5}UU|.{5}UV)(.+)", "\\2", dat[[2]])
[1] "ABCDEFGHIJKLMNOPQRSTUWXYZ" "PQRSTUV"                   "ABCUVDEFGHIJKLMNOPQRSTVVW" 
```

将它们绑定在一起：

```
> apply(dat, 1, function(x) list(count=sapply( strsplit(x[2], "UU|UV"), length) -1 , matches= { mat <- gsub("(.+)(.{5}UU|.{5}UV)(.+)", "\\2", x[2]); if(!nchar(mat) ==nchar(x[2]) ) {mat}else{""} }))
[[1]]
[[1]]$count
V2 
 0 

[[1]]$matches
[1] ""

[[2]]
[[2]]$count
V2 
 2 

[[2]]$matches
       V2 
"PQRSTUV" 

[[3]]
[[3]]$count
V2 
 1 

[[3]]$matches
[1] "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:43:15.733

我假设您的序列在列表中

```
ll <- list('Protein1 ABCDEFGHIJKLMNOPQRSTUWXYZ',
'Protein2 ABCDEFGHIJKUVMNOPQRSTUVWXYZ',
'Protein3 ABCUVDEFGHIJKLMNOPQRSTVVW') 
```

这有效：

```
 sapply(ll, function(x) 
              regmatches(x,gregexpr('[A-Z]{5}UU|[A-Z]{5}UV|[A-Z]{5}VV', x)))

 [[1]]
 character(0)

[[2]]
[1] "GHIJKUV" "PQRSTUV"

[[3]]
[1] "PQRSTVV" 
```

编辑：匹配 U 和 V 任意组合的任意长度

```
pattern <- '[A-Z]{5}(U|V)(V|U)+'    ## match pattern begin with U or V
                                    ## followed by at least one U or V 
```

例如，我修改您的数据以插入更长的模式

```
ll <- list('Protein1 ABCDEFGHIJKLMNOPQRSTUVWXYZ',
           'Protein2 ABCDEFGHIJKUVMNOPQRSTUUVWXYZ',
           'Protein3 ABCUVDEFGHIJUVVKLMNOPQRSTVUUUW')

sapply(ll, function(x)  regmatches(x,gregexpr(pattern, x)))

[[1]]
[1] "PQRSTUV"

[[2]]
[1] "GHIJKUV"  "PQRSTUUV"

[[3]]
[1] "FGHIJUVV"  "PQRSTVUUU" 
```

# android - 联系人姓名和号码正确时无法获取正确的电子邮件

> ID：14133950
> 
> 赞同：1
> 
> 时间：2013-01-03T06:15:59.130
> 
> 标签：android

我是 android 新手，每次我使用以下代码时，我都想在我的联系人列表中获取现有联系人的电子邮件，但我无法获得确切的联系人电子邮件，而是任何随机电子邮件。请帮助我更正此代码，我将不胜感激。

```
 public void fetchingContacts(Context context) {

            Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
            ContentResolver cr = context.getContentResolver();
            Cursor crsr = cr.query(uri, null, null, null, null);

            crsr.moveToFirst();

            if (crsr.getCount() > 0) {
                while (crsr.moveToNext()) {
                    ID = crsr
                            .getString(crsr
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone._ID));
                    id = crsr.getString(crsr.getColumnIndex(BaseColumns._ID));
                    NAME = crsr
                            .getString(crsr
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    NUMBER = crsr
                            .getString(crsr
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    arylist_contact_id.add(ID);
                    arylist_all_number.add(NUMBER);
                    arylist_all_names.add(NAME);
                    // ////////////

                    Cursor emailCur = cr.query(
                            ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                            null, ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                    + " = " + id, null, null);

                    while (emailCur.moveToNext()) {
                        email = emailCur
                                .getString(emailCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

                        Log.v("fetchingEMAIL ---  ", email);

                    }
                    emailCur.close();

                    Log.v("IN do while :: name and number ", ID + " , id :" + id
                            + "  " + NAME + " : " + NUMBER + "  :  " + email);
                } 

            }
            crsr.close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:24:05.163

```
 Cursor emailCur = cr.query(
                    ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                    null,
                    ContactsContract.CommonDataKinds.Email.CONTACT_ID
                            + " = ?", new String[] { id }, null);
            while (emailCur.moveToNext()) {
            String  email = emailCur
                        .getString(emailCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Email.ADDRESS));

            }
            emailCur.close(); 
```

以上是帮助我的朋友正确获取电子邮件的查询，它对我有用...希望尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:29:30.850

试试这个

```
 Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor cur1 = cr.query( 
                    ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                    ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                            new String[]{id}, null); 
            while (cur1.moveToNext()) { 
                //to get the contact names
                String name=cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                Log.e("Name :", name);
                String email = cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                Log.e("Email", email);

                }
            } 
            cur1.close();
        } 
```

# python - 如何使用python在控制台中获取键盘事件

> ID：14133952
> 
> 赞同：6
> 
> 时间：2013-01-03T06:16:16.587
> 
> 标签：python

我想用python处理控制台中的键盘事件。正在运行的脚本有一些持久的输出流，当管理员触发按键事件时，脚本会改变其输出内容。

我用如下代码完成了它（按'q'将触发输出更改），但有两个问题

1.  我的输出空间增加了。调试后，我发现代码“tty.setraw(fd)”导致了这个问题，但我不知道如何解决它
2.  ctrl+c 不能再工作了（如果 # "tty.setraw(fd)", ctrl+c 会工作）

如果它太复杂，任何其他模块都可以做我想要的吗？我尝试了 curse 模块，似乎会冻结窗口输出并且无法在多线程中协调

```
#!/usr/bin/python
import sys
import select
import tty, termios
import threading
import time

def loop():

    while loop_bool:
        if switch:   
            output = 'aaaa'
        else:
            output = 'bbbb'
        print output
        time.sleep(0.2)

def change():
    global switch
    global loop_bool    
    fd = sys.stdin.fileno()
    old_settings = termios.tcgetattr(fd)

    try: 
        while loop_bool:
            tty.setraw(fd)
            i,o,e = select.select([sys.stdin],[],[],1)
            if len(i)!=0:
                if i[0] == sys.stdin:
                    input = sys.stdin.read(1)

                    if input =='q':
                        if switch:
                            switch = False                                         
                        else: 
                            switch =  True

        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
    except KeyboardInterrupt:

        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        loop_bool = False

try:   
    switch = True
    loop_bool = True    
    t1=threading.Thread(target=loop)
    t2=threading.Thread(target=change)        

    t1.start()
    t2.start()

    t1.join(1)
    t2.join(1)
except KeyboardInterrupt:

    loop_bool = False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:49:41.960

这可能取决于您使用的平台，甚至可能取决于您使用的终端模拟器，我不确定它是否能解决您的问题，但是……</p>

您应该能够在不调用 的情况下获得逐个字符的输入`tty.setraw`，只需将“规范模式”设置为关闭即可，您可以通过屏蔽`ICANON`.lflag 属性中的位来做到这一点`tcgetattr()`。您可能还需要设置 VMIN 或 VTIME 属性，但默认值应该已经正确。

有关详细信息，请参阅[linux 手册页中的“规范和非规范模式”部分、](http://linux.die.net/man/3/termios) [OS X 手册页](http://www.manpagez.com/man/4/termios/)中的“非规范模式输入处理”部分，或者如果您在不同的平台上，请参见同等内容。

将其编写为上下文管理器可能比进行显式清理更干净。特别是因为您现有的代码`setraw`每次都通过循环，并且只在最后恢复；理想情况下，它们应该成对匹配，并且使用`with`语句可以保证这一点。（另外，这样你就不需要在`except`子句和正常流程中重复自己。）所以：

```
@contextlib.contextmanager
def decanonize(fd):
    old_settings = termios.tcgetattr(fd)
    new_settings = old_settings[:]
    new_settings[3] &= ~termios.ICANON
    termios.tcsetattr(fd, termios.TCSAFLUSH, new_settings)
    yield
    termios.tcsetattr(fd, termios.TCSAFLUSH, old_settings) 
```

现在：

```
def change():
    global switch
    global loop_bool

    with decanonize(sys.stdin.fileno()):
        try:
            while loop_bool:
                i,o,e = select.select([sys.stdin],[],[],1)
                if i and i[0] == sys.stdin:
                    input = sys.stdin.read(1)                    
                    if input =='q':
                        switch = not switch
        except KeyboardInterrupt:
            loop_bool = False 
```

或者，也许您希望该`with`块位于较低级别（在 内部`while`，或至少在内部`try`）。

（PS，我将您的几行代码转换为等效但更简单的形式，以删除几层嵌套。）

YMMV，但这是我的 Mac 上的测试：

```
Retina:test abarnert$ python termtest.py 
aaaa
aaaa
aaaa
qbbbb
bbbb
bbbb
qaaaa
aaaa
aaaa
^CRetina:test abarnert$ 
```

这让我认为您可能想要关闭输入回显（您通过 执行`new_settings[3] &= ~termios.ECHO`），这意味着您可能想要`decanonize`用更通用的东西替换该函数，以临时设置或清除任意 termios 标志。（另外，如果`tcgetattr`返回 a`namedtuple`而不是 a会很好`list`，所以你可以做`new_settings.lflag`而不是`new_settings[3]`，或者至少为属性索引提供符号常量。）

同时，根据您的评论，听起来 ^C 仅在前一两秒有效，并且与 s.timeout 中的超时有关`join`。这是有道理的——主线程只是启动两个线程，进行两次`join(1)`调用，然后结束。因此，在启动后的 2.something 秒内，它完成了所有工作——并离开了`try:`块——因此不再有任何方法让 a`KeyboardInterrupt`触发`loop_bool = False`并指示工作线程退出。

我不确定为什么你首先会在`join`s 上超时，以及当它们超时时应该发生什么，但有三种可能性：

1.  您不想在 ^C 之前退出，并且超时不存在出于任何充分的理由。所以把它们拿出来。然后主线程将永远等待其他两个线程完成，并且它仍然在`try`块内，所以 ^C 应该能够设置`loop_bool = False`.

2.  该应用程序应该在 2 秒后正常退出。（我猜你会更喜欢这对线程上的单个 join-any 或 join-all ，超时时间为 2 秒，但是因为 Python 没有任何简单的方法可以做到这一点，所以你按顺序加入了线程.) 在这种情况下，您希望`loop_bool = False`在超时结束后立即设置。所以只需将 更改`except`为`finally`.

3.  超时总是应该足够大（大概这只是你真实应用程序的简化版本），如果你超过了超时，那是一个例外情况。以前的选项可能仍然有效，也可能无效。如果没有，设置`daemon = True`两个线程，当主线程完成时，它们将被杀死（不是很好地要求关闭）。（请注意，Windows 与 Unix 上的工作方式有点不同——尽管你可能不太关心这个应用程序的 Windows。更重要的是，所有文档都说“整个 Python 程序在没有活着的时候退出守护线程被留下，”所以你不应该指望任何守护线程能够进行任何清理，也不应该指望它们*不会*做任何清理工作。不要在守护线程中做任何可能留下临时文件、未写入关键日志消息等的事情。）

# visual-c++ - 如何递归删除以“xxxxx”开头的目录？

> ID：14133955
> 
> 赞同：1
> 
> 时间：2013-01-03T06:16:33.197
> 
> 标签：visual-c++, directory

我需要删除以特定字符串“用户”开头的目录，并且我还需要删除目录中的所有子文件夹。我使用了 removedirectory ，它仅在目录为空时才删除目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:14:00.357

```
 Normally I would open a command window then cd to the directory you want to delete,
    Enter the command: "del /S /F *.* *" to delete all files and subdirectories.
    Backup to the parent directory: cd ..
    Remove the directory: rmdir "user*"

    Use "del/?" to see all the options for del.

    If you have to do this in c++, you can use the "system()" call.

    BTW: I did not test this just now, so no guarantee. 
```

# jquery - jQuery克隆不复制选项值

> ID：14133960
> 
> 赞同：2
> 
> 时间：2013-01-03T06:16:48.237
> 
> 标签：jquery, clone

我想克隆一个 HTML 表格行并使用 jQuery 在表格末尾动态添加一个新行。此行有许多下拉控件。我正在尝试克隆该行。大多数控件都会被复制，但选项的值不会被复制。所以我试图明确设置选项值。那也没有用。

```
//original table row and its clone
var $tr = $("tr.RowToBeCopied").last();
var $clone = $tr.clone();

var originalSelects = $tr.find("select");
    $(originalSelects).each(function (i) {
        var select = this;
        var originalOptions = $(select).find("option");

        $(originalOptions).each(function (j) {
            var originalOption = this;
            $($clone.find("select").eq(i))
                .find("option").eq(j)
                    .val($(originalOption).val());
        });
    });

$tr.after($clone); 
```

我尝试通过以下代码将其设置为属性->

```
var originalSelects = $tr.find("select");
    $(originalSelects).each(function (i) {
        var select = this;
        var originalOptions = $(select).find("option");

        $(originalOptions).each(function (j) {
            var originalOption = this;
            $($clone.find("select").eq(i))
                .find("option").eq(j)
                    .attr("title", $(originalOption).val());
        });
    }); 
```

在这里，“title”属性设置正确。但是，如果我将“标题”更改为“值”，则不会设置值。

有人可以建议一种方法来让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:38:05.670

你只需要这样：

```
var $tr = $("tr.RowToBeCopied").last();
$tr.clone().insertAfter($tr); 
```

`clone`执行所有元素和文本节点的深层复制，您不必重置值。这是一个例子。[http://jsfiddle.net/8bhfR/](http://jsfiddle.net/8bhfR/)。

# codeigniter - 为codeigniter用户实现neo4j，gremlin的步骤是什么

> ID：14133965
> 
> 赞同：0
> 
> 时间：2013-01-03T06:17:15.397
> 
> 标签：codeigniter, neo4j, database-migration, gremlin

我需要从 RDBMS 迁移到 GRAPH 并决定使用 gremlin 实现 neo4j。但我只有 PHP 作为服务器端语言。在 codeigniter 环境中实现 neo4j（和 gremlin？）的步骤是什么。可能这个问题太笼统了，但我相信很多人都和我一样有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:57:15.540

通常，（不确定 PHP 框架），您需要执行以下过程。

1.  对于所有“对象表”，遍历行并创建相应的顶点。对于这些行的列（例如 id、name、age），将它们添加为顶点的属性。例如，如果您有一个 Person 表，则**SELECT * FROM Person**。每一行都是具有属性的顶点。
2.  对于您所有的“关系表”（或通过连接的关系表），循环遍历行并链接您的顶点。例如**SELECT personId, companyID FROM WorksFor**。每一行都是连接个人顶点和公司顶点的边。

通过 Gremlin 添加顶点/边很简单。您的过程的复杂方面是您创建映射所经历的工作流程。

[https://github.com/tinkerpop/gremlin/wiki/Updating-a-Graph](https://github.com/tinkerpop/gremlin/wiki/Updating-a-Graph)

最后，一定要聪明地处理事务，这样你就不会搞砸了。您将希望每隔一段时间提交一次事务以将数据持久保存到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:18:53.747

不确定，但由于 Cypher [http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)是原生 Neo4j 语言并且非常类似于 SQL，这可能是一个更简单的选择？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:34:48.360

实现这个库也应该在 codeigniter 中工作： [https ://github.com/jadell/Neo4jPHP/wiki](https://github.com/jadell/Neo4jPHP/wiki)

# java - 如何避免每五秒进行一次新连接？

> ID：14133967
> 
> 赞同：0
> 
> 时间：2013-01-03T06:17:15.757
> 
> 标签：java, jakarta-ee, servlets, httpconnection

每五秒一个功能：

```
private boolean ping() {
    try {
        URL pingServerUrl = new URL(serverResourceLocator);
        HttpURLConnection connection = (HttpURLConnection) pingServerUrl.openConnection();
        if(connection.getResponseCode() == 200) {
            lastPingSuccessful = true;
        }
        System.out.println("pinged");
    }catch(Exception exc) {
       exc.printStackTrace(); 
       return lastPingSuccessful;
    }

    return lastPingSuccessful;

} 
```

叫做。它是 ping 功能的类型。它尝试连接到服务器上的 servlet，并随 URL 一起发送一些凭据`serverResourceLocator`。困扰我的是每 5 秒打开一个新连接。

我怎样才能避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:22:56.317

您无法回收 HTTP 连接。HTTP 是一种无状态协议。您可以做的最好的事情是一旦打开连接就不要关闭它并使其保持活动状态并将心跳消息从服务器发送到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:22:47.330

如果函数的使用是我猜的，即测试servlet，最好把连接部分留在里面；您可以从测试脚本中获得更多覆盖。每 5 秒连接一次几乎没什么。服务器不会有任何感觉。

否则只需将连接存储为全局变量。并在您每次提出请求时重复使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:23:41.067

我认为没有其他选择。您必须进行 http 连接才能获取 URL 的状态。

以下2是**Java的轻量级替代品**

*   Unix curl 实用程序
*   来自您的 java 脚本的 Ajax 调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:43:35.297

工作完成后，您可以释放连接。无论如何，java webserver 被设计为接受多个请求。即使每 5 秒请求一次到达服务器，也不是问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T06:35:57.123

假设我们想在 EXPIRY_TIME 之后删除客户的数据。

我认为可以遵循以下两种方法之一：

1.  您可以在会话修改时间（建议上次访问时间）检查一些 cron 作业（调度程序）
2.  对于每个客户端请求，在平面文件系统中设置访问日志并在访问日志中检查 cron 作业

在任何情况下，如果上次访问时间 > EXPIRY_TIME 则删除客户端的数据。

这种方法将节省往返行程并有助于减少交通量。

# android - 在 AChartEngine 动态折线图上显示最近绘制的值

> ID：14133978
> 
> 赞同：2
> 
> 时间：2013-01-03T06:19:10.380
> 
> 标签：android, achartengine, linegraph

当我动态绘制值时，我希望在折线图上显示最近绘制的值（在 AChartEngine 库的帮助下绘制）。换句话说，我希望沿 x 轴向左滚动我的折线图以显示最新的绘制值并隐藏最旧的绘制值。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:56:20.557

每当您向数据集添加值时，如果您调用 chartView.repaint(); 图表使用新值更新。

为了让值向左滚动，您需要更改 X 轴上的可见区域：

```
renderer.setXAxisMin(theMinimumVisibleValue);
// this may be optional
// renderer.setXAxisMax(theMaximumVisibleValue); 
```

# android - 在获取两点之间的方向时在android地图中获取空指针异常

> ID：14133979
> 
> 赞同：0
> 
> 时间：2013-01-03T06:19:13.970
> 
> 标签：android, google-maps

我一直在关注[这个](http://about-android.blogspot.in/2010/03/sample-google-map-driving-direction.html)教程。

我在`doc = (Document) urlConnection.getInputStream();`.

这是我的代码：

```
public class DirectionActivity extends MapActivity {
    MapView myMapView = null;
    MapController myMC = null;
    GeoPoint geoPoint = null;
    DocumentBuilderFactory dbf;
    DocumentBuilder db;
    Document doc;
    HttpURLConnection urlConnection ;
    URL url ;
    String pathConent ;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myMapView = (MapView) findViewById(R.id.mapview1);
    geoPoint = null;
    myMapView.setSatellite(false);

    String pairs[] = getDirectionData("Ahmedabad", "Goa");
    String[] lngLat = pairs[0].split(",");

    // STARTING POINT
    GeoPoint startGP = new GeoPoint(
            (int) (Double.parseDouble(lngLat[1]) * 1E6), (int) (Double
                    .parseDouble(lngLat[0]) * 1E6));

    myMC = myMapView.getController();
    geoPoint = startGP;
    myMC.setCenter(geoPoint);
    myMC.setZoom(15);
    myMapView.getOverlays().add(new DirectionPathOverlay(startGP, startGP));

    // NAVIGATE THE PATH
    GeoPoint gp1;
    GeoPoint gp2 = startGP;

    for (int i = 1; i < pairs.length; i++) {
        lngLat = pairs[i].split(",");
        gp1 = gp2;
        // watch out! For GeoPoint, first:latitude, second:longitude
        gp2 = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6),
                (int) (Double.parseDouble(lngLat[0]) * 1E6));
        myMapView.getOverlays().add(new DirectionPathOverlay(gp1, gp2));
        Log.d("xxx", "pair:" + pairs[i]);
    }

    // END POINT
    myMapView.getOverlays().add(new DirectionPathOverlay(gp2, gp2));

    myMapView.getController().animateTo(startGP);
    myMapView.setBuiltInZoomControls(true);
    myMapView.displayZoomControls(true);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private String[] getDirectionData(String srcPlace, String destPlace) {

    String urlString = "http://maps.google.com/maps?f=d&hl=en&saddr="
            + srcPlace + "&daddr=" + destPlace
            + "&ie=UTF8&0&om=0&output=kml";
    Log.d("URL", urlString);

    try {

        url = new URL(urlString.toString());
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);
        urlConnection.connect();

        dbf = DocumentBuilderFactory.newInstance();
        try {
            db = dbf.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ***doc = (Document) urlConnection.getInputStream();***(getting doc=null)

    } catch (Exception e) {
    }

    NodeList nl = doc.getElementsByTagName("LineString");
    for (int s = 0; s < nl.getLength(); s++) {
        Node rootNode = nl.item(s);
        NodeList configItems = rootNode.getChildNodes();
        for (int x = 0; x < configItems.getLength(); x++) {
            Node lineStringNode = configItems.item(x);
            NodeList path = lineStringNode.getChildNodes();
            pathConent = path.item(0).getNodeValue();
        }
    }
    String[] tempContent = pathConent.split(" ");
    return tempContent;
}

public class DirectionPathOverlay extends Overlay {
    private GeoPoint gp1;
    private GeoPoint gp2;
    public DirectionPathOverlay(GeoPoint gp1, GeoPoint gp2) {
        this.gp1 = gp1;
        this.gp2 = gp2;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        // TODO Auto-generated method stub
        Projection projection = mapView.getProjection();
        if (shadow == false) {
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);
            paint.setColor(Color.BLUE);
            Point point2 = new Point();
            projection.toPixels(gp2, point2);
            paint.setStrokeWidth(2);
            canvas.drawLine((float) point.x, (float) point.y, (float) point2.x,
                    (float) point2.y, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        // TODO Auto-generated method stub

        super.draw(canvas, mapView, shadow);
    }

}
} 
```

这是Logcat：

```
01-03 10:56:33.447: E/AndroidRuntime(1018): FATAL EXCEPTION: main
01-03 10:56:33.447: E/AndroidRuntime(1018): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.itsmyway/com.example.itsmyway.DirectionActivity}: java.lang.NullPointerException
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.os.Looper.loop(Looper.java:137)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at dalvik.system.NativeStart.main(Native Method)
01-03 10:56:33.447: E/AndroidRuntime(1018): Caused by: java.lang.NullPointerException
01-03 10:56:33.447: E/AndroidRuntime(1018):     at com.example.itsmyway.DirectionActivity.getDirectionData(DirectionActivity.java:109)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at com.example.itsmyway.DirectionActivity.onCreate(DirectionActivity.java:41)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.Activity.performCreate(Activity.java:5008)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-03 10:56:33.447: E/AndroidRuntime(1018):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-03 10:56:33.447: E/AndroidRuntime(1018):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:58:37.160

我已经实现了相同的示例并且面临同样的问题。

您的应用程序所做的是从 google 服务器检索文档，然后在该文档中查找说明。尽管 kml 文档（您的代码想要检索的文档）过去可以工作几个月（就像编写该教程时一样），但自从 2012 年 12 月 google 更新了他们的 API 以来，它现在无法工作。

解决方案：您的 URL 似乎已被弃用。谷歌地图使用 JSON 和 XML，而不是 kml。查看此[页面](https://developers.google.com/maps/documentation/directions/)以使用 Web 服务。

现在，

1) 根据这些 Web 服务的指南创建一个 URL。

2) 现在向谷歌服务器发送一个 HTTP 连接请求，你必须得到一个 Inputstream。

* * *

您的问题已经结束，但是如果您在解决此问题后使用相同的代码，您将遇到解析接收到的文档的另一个问题。

第二个问题的解决方案：

1）将文档保存在手机sdcard中，手动查看。存储文档的指南在[这里](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)。

2) 根据[此](https://developers.google.com/maps/documentation/directions/)页面上的 XML 输出部分在文档中找到方向。

3) 使用 DocumentBuilderFactory 或其他方式检索这些方向。

您的应用程序在 kml 文档中查找标记“LineString”。但是，由于现在您使用的是 XML 或 JSON，因此请查找指南中给出的相关标签。

# asp.net-mvc - 当我想从控制器访问模型数据时无法检索模型类的元数据

> ID：14133980
> 
> 赞同：0
> 
> 时间：2013-01-03T06:19:22.137
> 
> 标签：asp.net-mvc

我正在尝试制作一个应用程序，其中我使用脚手架制作了位置模型、控制器和视图。我在位置中有位置名称和位置 ID 属性。正在创建数据库和位置表，并且正在填充数据。现在我想创建一个部门类，其中我有 3 个属性，即 Dept_ID、Dept_Name 和 Loc_ID（外键）。我在相应的文件中添加了所需的代码，如下所示。

在 Department.cs(模型)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace DMS.Models
{
    public class Department
    {
        public int D_ID { get; set; }
        public string D_Name { get; set; }
        [ForeignKey("L_ID")]
        public int L_ID { get; set; }

    }
} 
```

在 DB_CONTEXT 类中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace DMS.Models
{
    public class DB_CONTEXT : DbContext
    {
        public DbSet<Location> Movies { get; set; }
        public DbSet<Department> Department { get; set; } 
    }
} 
```

并在 locatoin.cs(Model)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace DMS.Models
{
    public class Location
    {
        public int ID { get; set; }
        public string L_Name { get; set; }
    }
} 
```

当我尝试为部门添加控制器时，出现错误

```
unable to retrieve metadata for 'DMS.Models.Department' The navigation property 'L_ID' is not declared property on type Department.Verify that it has not been explicitly excluded from the model and that it is a  valid navigation property. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:07:38.890

[ForeignKey("LoactionID")]

公共 int L_ID { 获取；放; }

公共虚拟位置位置 {get;set;}

在部门模型中进行这些更改，然后再试一次。我希望这能解决你的问题。

# asp.net-mvc - 在 jsTree 上下文菜单中创建自定义项

> ID：14133984
> 
> 赞同：13
> 
> 时间：2013-01-03T06:19:46.273
> 
> 标签：asp.net-mvc, treeview, jstree

我在 asp.net mvc3 中使用带有 contextmenu 的 jsTree 创建了一个树视图。

```
<div id="divtree">
<ul id="tree">
    <li><a href="#" class="usr">@Model.Name</a>
        @Html.Partial("Childrens", Model)
    </li>
</ul> 
```

```
<script type="text/javascript">
$(function () {
    $("#divtree").jstree(
        {
            "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"]
        });
}); 
```

它工作正常。

![图片](../Images/afb2237692ef4fb02ed62423e210ca66.png)

我想在上下文菜单中创建一个自定义项。例如创建一个新的菜单项。New 用于在上下文菜单中创建新员工，并将员工插入 DB。我为这个任务使用了一个 jQuery POST 函数。但是如何处理上下文菜单项中的点击事件。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-03T07:28:46.263

以下是自定义上下文菜单插件的方法：

```
$("#divtree").jstree({
    "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"],
    "contextmenu": {
        "items": function ($node) {
            return {
                "Create": {
                    "label": "Create a new employee",
                    "action": function (obj) {
                        this.create(obj);
                    }
                },
                "Rename": {
                    "label": "Rename an employee",
                    "action": function (obj) {
                        this.rename(obj);
                    }
                },
                "Delete": {
                    "label": "Delete an employee",
                    "action": function (obj) {
                        this.remove(obj);
                    }
                }
            };
        }
    }
}); 
```

好吧，在这个例子中，我只调用了 click handlers: 中的基本函数`this.create(obj);`，`this.rename(obj);`以及被点击的节点`this.remove(obj);`在哪里。`obj`

So now for example if you want to send an AJAX request to the server when a new item is added you could subscribe to the `create.jstree` event as shown in the [`demo page`](http://www.jstree.com/demo) of the jsTree documentation:

```
<script type="text/javascript">
    $("#divtree").jstree({
        "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"],
        "contextmenu": {
            "items": function ($node) {
                return {
                    "Create": {
                        "label": "Create a new employee",
                        "action": function (obj) {
                            this.create(obj);
                        }
                    },
                    "Rename": {
                        "label": "Rename an employee",
                        "action": function (obj) {
                            this.rename(obj);
                        }
                    },
                    "Delete": {
                        "label": "Delete an employee",
                        "action": function (obj) {
                            this.remove(obj);
                        }
                    }
                };
            }
        }
    })
    .bind("create.jstree", function (e, data) {
        $.ajax({
            url: "@Url.Action("create", "employees")", 
            type: 'POST',
            data: {
                "name" : data.rslt.name
            },
            success: function (result) {
            }
        });
    });
</script> 
```

Inspect the `e` and `data` arguments that are passed to the `create.jstree` event callback. They contain lots of useful information about the newly created node that you could use to send along with the AJAX request.

受此示例的启发，您可以继续使用文档中所示的`remove.jstree`和事件对其进行扩展。`rename.jstree`因此，当您查看它时，只需阅读文档即可。例如，我一生中从未使用过 jsTree，但我只用了 5 分钟就在文档中找到了示例并为您做一个快速的秒杀。因此，下次当您对正在使用的某些插件或框架有编程相关问题时，请先花更多精力阅读文档。

# android - 如何使用 mp3 音频文件和图像制作 3gp 视频？

> ID：14133989
> 
> 赞同：3
> 
> 时间：2013-01-03T06:20:30.943
> 
> 标签：android, video, mp3

我正在尝试通过为我的 android 应用程序组合一个 mp3 音频剪辑和一个图像来创建一个 3gp 视频文件。即：mp3 + image = 3gp 视频剪辑。

我对此做了很多研究，但发现可用的帮助是有限的。

请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:27:29.667

该过程称为*转码*。指针：

*   [使用 ffmpeg 将 avi 转换为 3gp](https://stackoverflow.com/questions/12598108/convert-avi-to-3gp-using-ffmpeg)
*   [Android 上的 FFMPEG](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:29:00.627

如果您希望在您的应用程序之外执行此操作，请查看[这篇文章](https://stackoverflow.com/questions/3132774/add-an-image-to-mp3-and-convert-it-to-a-video-file-using-ffmpeg)，它提供了可用于实现相同目的的 ffmpeg 命令。

此外，ffmpeg 也可以为 android 编译并使用本文中讨论的 JNI[使用](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)。

复制最佳答案以供快速参考：

以下是我让 ffmpeg 在 Android 上运行所经历的步骤：

1.  为 Android 构建 ffmpeg 的静态库。这是通过使用[Android Build System构建 olvaffe 的 ffmpeg android 端口 (](http://source.android.com/porting/build_system.html) [libffmpeg](http://gitorious.org/~olvaffe/ffmpeg/ffmpeg-android/commits/android) ) 来实现的。只需将源放在 /external 和 away 下。您还需要从 Android 构建中提取 bionic(libc) 和 zlib(libz)，因为 ffmpeg 库依赖于它们。`make`
2.  使用 Android NDK 创建一个包装 ffmpeg 功能的动态库。有很多关于如何使用 NDK 的文档。基本上你需要编写一些 C/C++ 代码来将你需要的功能从 ffmpeg 导出到一个库中，java 可以通过 JNI 与之交互。NDK 允许您轻松链接到您在步骤 1 中生成的静态库，只需在 Android.mk 中添加与此类似的行：`LOCAL_STATIC_LIBRARIES := libavcodec libavformat libavutil libc libz`
3.  使用您的 java 源代码中的 ffmpeg-wrapping 动态库。那里有足够的关于 JNI 的文档，你应该没问题。

关于使用 ffmpeg 进行播放，有很多例子（ffmpeg 二进制文件本身就是一个很好的例子），[这里](http://dranger.com/ffmpeg/tutorial01.html)有一个基础教程。最好的文档可以在标题中找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T06:30:34.610

将 ffmpeg的一个端口编译[为 android](https://github.com/guardianproject/android-ffmpeg)。您将获得一个 ffmpeg 可执行文件，并将其放入您的应用程序中。设置您的应用程序以将其提取到其数据目录中并将其标记为可执行文件。然后将它与[ffmpeg 命令行选项](http://ffmpeg.org/ffmpeg.html)一起使用。

构建一个包装器 JNI 类，如果您只需要从 java 代码中调用它。

# google-drive-api - Google Drive SDK API：有没有办法在电子邮件中显示为权限，而不是 Permission.getName() 来显示名称

> ID：14133990
> 
> 赞同：0
> 
> 时间：2013-01-03T06:20:44.147
> 
> 标签：google-drive-api

如果我这样做（以下代码），它会显示名称（Lanny Boy）而不是电子邮件（lannyboy@mydomain.com）。我检查了所有可用的权限 API 扩展，没有什么可以帮助解决电子邮件地址中的权限。

```
PermissionList permissions = service.permissions().list(file.getId()).execute();

for (Permission permission : permissions.getItems()) {
     System.out.println(permission.getName());
} 
```

要插入权限，我使用 permission.setValue() 添加为电子邮件地址。但是当我做 as permission.getValue() 来检索邮件信息时，都返回 null @@" 为什么？

```
PermissionList permissions = service.permissions().list(file.getId()).execute();

for (Permission permission : permissions.getItems()) {
     System.out.println(permission.getValue());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:27:49.977

我认为我能做的唯一方法是使用 Google Apps Provisioning 作为

```
String fullName = userEntry.getName().getGivenName() + " " + userEntry.getName().getFamilyName(); 
```

使用 permission.getName() 检查

# php - 如何提高你的php开发知识

> ID：14133995
> 
> 赞同：-4
> 
> 时间：2013-01-03T06:20:58.610
> 
> 标签：php, standards

我想向经验丰富的 php 开发人员寻求提示，请问您会给那些试图提高她的 php 知识的人提供哪些提示和任何一般性建议？我目前是初级开发人员，但我需要在接下来的两个月内达到中级/中级知识水平。
任何帮助将不胜感激。
**我想要的东西是：**
改善你的逻辑思维流程，
提高你的 php 编程知识，
提高你的沟通技巧，
最大限度地减少对微观管理的需求。

我只是想达到我有足够信心**在合乎逻辑的时间框架内完成任务**并交付的地步**oo 标准兼容方式**。此外，为了达到可以**信任我领导中小型项目的程度**。非常感谢，我期待收到您的来信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:35:24.583

> 我只是想达到我有足够信心在合乎逻辑的时间框架内执行任务并以符合 oo 标准的方式交付的地步。

这个很容易回答：**使用框架。**太糟糕了，有很多用于 PHP 的。CodeIgniter、ZF、Symphony 和 Yii 是其中主要的。我的朋友倾向于使用后者，但总的来说他们都是平等的。

> 达到可以信任我领导中小型项目的程度。

领导项目有些不同，需要更多的组织技能而不是编程技能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:45:11.290

另一种方法是让自己做一些项目，例如创建购物车或预订系统，阅读讨论论坛尝试新技术。是的，框架也是改进的好方法，并且根据您当前所做的工作，尝试在不使用类的地方使用类进行改进。Lynda.com 教程也是奠定基础的好方法。

# c# - 在引号外的正则表达式中匹配注释（//注释）

> ID：14133996
> 
> 赞同：0
> 
> 时间：2013-01-03T06:21:07.517
> 
> 标签：c#, regex

> **可能重复：**
> [正则表达式从 C# 中删除行注释](https://stackoverflow.com/questions/3524317/regex-to-strip-line-comments-from-c-sharp)

我完全坚持这一点，而且我不擅长制作正则表达式。

基本上我想匹配文本中的评论，例如这个：

> ```
> //Comment outside quotations
> string text = "//Comment inside quotations..";
> //Another comment 
> ```

我只想匹配顶部和底部的评论，而不是引号内的中间评论

我现在的评论是：

> ```
> //.*$ 
> ```

匹配整个行尾的注释。

我希望它用于文本框中的语法突出显示。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:51:17.390

试试这个 ：

```
"^(?!\".*\")//.*$" 
```

这将匹配

```
//Comment outside quotations 
```

并且不会匹配

```
string text = "//Comment inside quotations.."; 
```

请为 c# 进行必要的转义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:43:29.307

试试这个正则表达式：

```
([^"]|"[^"]*")*(?<COMMENT>//.*) 
```

[解析命名组](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)“COMMENT”（或您选择的任何名称）的每个匹配项。快速免责声明我没有在 C# 中对其进行测试，我只是使用在线[工具](http://gskinner.com/RegExr/)将正则表达式放在一起。

# gstreamer - 无法使用 gstreamer 插件中的 g_value_set_object() 在 gstreamer 应用程序中获取对象

> ID：14133999
> 
> 赞同：0
> 
> 时间：2013-01-03T06:21:25.770
> 
> 标签：gstreamer

我有一个 gstreamer 测试应用程序。我的意图是在我的一个 gstreamer 插件中为我的应用程序定义一个结构。但是我遇到了分段错误。

测试应用程序片段：

```
notify_func(GObject *obj)
{
  GObject *myobj;
  g_object_get(obj, "my-prop", &myobj,NULL);  
} 
```

插件片段：

```
get_property()
{
  case MY_PROP:
  g_value_set_object(value, obj1->myStructure);
  break;
} 
```

结构 ：

```
struct obj1 {
  MyStructure *myStructure;
  ...
}; 
```

但是我从 g_value_set_object 得到分段错误。确切地说，G_IS_OBJECT(obj) 崩溃了。我的 obj1 实例属于 GST_TYPE_ELEMENT 类型。任何人都可以建议正在发生的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:56:11.593

我编写了类似的“示例”Gstreamer 插件和 Gstreamer 应用程序来测试插件。希望它有帮助，也回答你的问题:)

Gstreamer 插件代码：-

**头文件：**

```
typedef struct _test
{
    gchar *filename;
    guint width;
    guint height;
}TEST;

struct _GstSample 
{
    GstElement element;
    GstPad *src;
    GstPad *sink;
#ifndef STRUCTURE   
    gchar *filename;
    guint width;
    guint height;
#else
    TEST *test;
#endif  
    gboolean test_arg;
}; 
```

**C 文件**

```
gst_sample_class_init(GstSampleClass *klass)
{
  ....
  g_object_class_install_property(gobject_class, PROP_TEST,
    g_param_spec_pointer("test", "test", "Structure Testing", G_PARAM_READWRITE));
}

gst_sample_set_property()
{
  ...
  case PROP_TEST:
   sample->test = (TEST *) g_value_get_pointer(value);
   g_print("Struct filename:%s \t width:%u \t height:%u \n", 
        sample->test->filename,
        sample->test->width, 
        sample->test->height);
}

gst_sample_get_property()
{
  ...
  case PROP_TEST:
   g_value_set_pointer(value, sample->test);
   break;
} 
```

Gstreamer 应用程序代码：-

```
typedef struct _test
{
    gchar *filename;
    guint width;
    guint height;
}TEST;

main()
{
  ...
  TEST test, *test1;

  test.filename = "Structure";
  test.width = 14;
  test.height = 50;
  g_object_set(G_OBJECT(sample), "test", &test, NULL);  
  ...
  g_object_get(G_OBJECT(sample), "test", &test1, NULL);
  g_print("Struct Addr:%p \t filename:%s \t width:%u \t height:%u \n",
           &test1, test1->filename, test1->width, test1->height); 
} 
```