# StackOverflow 问答 13891000-13891999

# android - Android 操作栏和选项卡

> ID：13891003
> 
> 赞同：1
> 
> 时间：2012-12-15T09:23:52.407
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/6da862c062b8aadcff046945e31e1e97.png)

我已经在我的应用程序中实现了 ActionBar，并且我在操作栏中有 3 个选项卡（片段）。

我想在屏幕底部使用一些按钮显示选项（屏幕截图中的浅蓝色条）。

有人可以指导我如何实现这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:50:32.467

要在底部显示操作栏菜单项，请将此属性添加到清单文件中的活动元素

```
android:uiOptions="splitActionBarWhenNarrow" 
```

例子：

```
<activity 
android:name=".HomeScreen"
...
...
android:uiOptions="splitActionBarWhenNarrow"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:01:23.113

行。我明白了你的问题。您可以尝试为上部选项卡使用选项卡主机，并为下面的栏尝试相对布局，您可以在其中放置您的东西。

# javascript - 在 Mac Safari 的开发菜单中找不到 ipad

> ID：13891004
> 
> 赞同：2
> 
> 时间：2012-12-15T09:23:59.420
> 
> 标签：javascript, macos, ipad, debugging, web-inspector

我需要在 iPad Safari (iOS-6) 上调试 Javascript。我想这可以通过将其连接到 Mac（或使用 xCode iPad 或 iPhone 模拟器而不是连接实际的 iPad）来使用远程调试来完成。我还需要在 iPad 上打开 Safari->Advanced->WebInspector 和 Safari->Preferences-> Advanced ->选中我的 macbook 中的“在菜单栏中显示开发菜单”选项。然后当“开发”选项出现在顶部 Safari 工具栏中（我不知道确切的术语）我应该在那里看到我的 iPad，然后可以开始远程调试。现在一切都很好，除了我在 Safari 的“开发”选项中看不到 ipad（或我尝试了这两个选项的模拟器）。任何想法/想法我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T13:26:06.417

您必须至少有 Safari 6+

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T17:27:36.083

看起来你不能在 Windows 上，除非你正在做某种形式的仿真 [——http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html)

“重要提示：您只能检查已从 Xcode 传输到您设备的设备上的应用程序。您无法检查已从 App Store 下载的应用程序，即使它是您的应用程序。”

您还需要 OSX 10.7 和 safari 6，这对于 windows 尚不存在。:(

# java - 获取 [SQLITE_BUSY] 数据库文件被选择语句锁定

> ID：13891006
> 
> 赞同：37
> 
> 时间：2012-12-15T09:24:06.500
> 
> 标签：java, hibernate, jpa, sqlite

如果我对我的网络应用程序运行多个线程，我会得到：

```
java.sql.SQLException: [SQLITE_BUSY]  The database file is locked (database is locked)
    at org.sqlite.DB.newSQLException(DB.java:383)
    at org.sqlite.DB.newSQLException(DB.java:387)
    at org.sqlite.DB.execute(DB.java:339)
    at org.sqlite.PrepStmt.executeQuery(PrepStmt.java:75)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96) 
```

我知道只有一个线程可以写入 sqlite 数据库，但我只是从数据库中读取。那么为什么我会收到此错误消息？

顺便说一句：我的连接池如下所示：

```
<bean class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.username}" />
    <property name="password" value="${database.password}" />
    <property name="initialSize" value="1" />
    <property name="maxActive" value="2" />
    <property name="maxIdle" value="1" />
    <property name="poolPreparedStatements" value="true" />
</bean> 
```

设置为：Java 1.6、Tomcat 7.0.34、Spring 3.2、Hibernate 3.6.9 和 sqlite3 3.7.2

问候罗杰

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-15T11:48:36.017

经过一番谷歌搜索后，我发现在连接到 SQLite 时使用多个连接是一种不好的做法。看

[http://touchlabblog.tumblr.com/post/24474398246/android-sqlite-locking](http://touchlabblog.tumblr.com/post/24474398246/android-sqlite-locking)

将您的 poolsize maxactive 设置为 1 并尝试一下。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-15T18:27:27.270

您的应用程序应该只有一个连接。您可以使用它来确保。

```
public class SqliteHelper {
private static Connection c = null;
public static Connection getConn() throws Exception {
    if(c == null){
    Class.forName("org.sqlite.JDBC");
    c = DriverManager.getConnection("jdbc:sqlite:D:/test.db");
    }
    return c;
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-21T20:12:32.000

另请注意，如果您不小心忘记关闭连接，则可能会发生这种情况：

```
Connection connection;
try {
  Statement statement = connection.createStatement();
  ResultSet resultSet = statement.executeQuery(QUERY);
  if (resultSet.next()) { /* do something */ }
catch (SQLException e) { /* handle exception */ }
finally {
  if (connection != null) {
    try {
      connection.close(); // <-- This is important
    } catch (SQLException e) {
      /* handle exception */
    }
  }
} 
```

虽然一旦服务器启动，第一个数据库连接可能会正常工作，但后续查询可能不会，这取决于连接池的配置方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-01T05:15:48.307

每次建立连接时，请确保在工作完成后关闭它，它对我有用，就像您正在使用

```
Connection con = null;
PreparedStatement pst = con.prepareStatement("...query... "); 
/*
 do some stuff 
*/
pst.executeQuery();
pst.close();
con.close(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-10T07:52:53.373

我遇到了同样的问题，即使所有连接、结果集和语句都已关闭，我仍然遇到错误。我的问题是使用 Intellij 中的 DB 浏览器插件来可视化和管理表。从这个工具断开数据库解决了这个问题。因此，请确保没有外部工具连接到数据库并锁定表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-18T11:41:02.863

在我的情况下，后台有线程使用 sqlite 连接，这导致了这个错误。

1.  关闭 sqlitebrowser
2.  关闭电子应用程序（可能需要重新启动）
3.  重新运行你的程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-05T16:51:26.810

对于在 WSL2 中遇到问题的任何人：

当我使用 WSL2 和 Datagrip 时发生在我身上，即使数据库不忙。

事实证明，Datagrip 试图通过 Windows 的 sqlite3 连接到 WSL2 中存在的数据库文件。

将文件从 WSL2 移动到 Windows 文件目录似乎可以解决此问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-07T16:49:39.640

对我来说，问题是我打开了太多的会话所以我将我的 DAO 类中的会话字段设为静态

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-09T11:21:22.017

感谢 bowman han，我在他的解决方案中添加了一段代码，它对我有用。

```
private static Connection c = null;
public static Connection connect() throws Exception {

    if (c == null) {
        c = (Connection) DriverManager.getConnection(url);
    } else {
        c.close();
        c = (Connection) DriverManager.getConnection(url);
    }
    return c;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-26T23:23:12.107

您打开了另一个包含数据库的应用程序，请尝试关闭该应用程序并再次运行您的程序。这对我有用

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-12-15T09:30:48.777

尝试`@Transactional(readonly=true)`那些只做读取的方法。也许这对你有用。

# fft - 您如何在最大值（计算机代数系统）中进行快速傅立叶变换？

> ID：13891009
> 
> 赞同：0
> 
> 时间：2012-12-15T09:24:21.493
> 
> 标签：fft, cas, maxima

我得到了连续傅里叶变换的基本概念，我对离散傅里叶变换有点模糊，而在快速傅里叶变换上仍然是模糊的。我想知道如何计算和解释最大值中某些函数的快速傅里叶变换（FFT）。例如，我将如何计算 sin(x) 的 FFT？我知道如何在 MATLAB 中执行此操作，但我不确定如何在 maxima 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:34:41.843

嗯，有一个内置的快速傅里叶变换函数：见'fft'。

'fft' 仅适用于数字数据。也许您想要一个也适用于符号数据的函数。很容易将普通的（不是快速的）离散傅里叶变换写成求和，例如：`(1/n) sum(y[k]*exp(2*%pi*%i*j*k/n)`对于`j`第 - 个元素。（公式可能有误，我是凭记忆工作的。）

如果您想对符号数据进行快速傅立叶变换，则需要使用已发布的算法。（有很多书里面都有 FFT 算法。）只要用 Maxima 写算法，运算就会自动成为符号。

# git - Git：权限修改数据库对象

ID：13891016

赞同：2

时间：2012-12-15T09:25:23.250

标签：git

# java - configure external database with maven embedded-glassfish

> ID：13891017
> 
> 赞同：0
> 
> 时间：2012-12-15T09:25:24.363
> 
> 标签：java, jpa, glassfish, ejb

I need to create educational demo of java web-application using EJB.

I want to use maven embedded-glassfish plugin to simplify matter for people who will run this demo (so that they need not manually set up and configure glassfish server).

However, I could not understand how to force embedded-glassfish to use other database rather than temporary apache derby. I use Java Persistence API - and I want users to use permanent database, for example H2, started by my application (it starts all right).

I've tried straightforward idea - to configure what I need by persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="demoData" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://127.0.0.1:12345/demodb"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="eclipselink.ddl-generation" value="create-tables"/>
        </properties>
    </persistence-unit>

</persistence> 
```

It is not ignored completely, it is loaded - but my JPA works with default database anyway. What can I do? Can I reconfigure jdbc/__default datasource somehow, or make my persistence file work? Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:43:16.603

在 JavaEE 容器上下文中，直接在持久性单元中配置 JDBC 连接是不常见的。相反，JDBC 连接被单独配置为数据源，通过 javax.persistence.jtaDataSource 属性在持久性单元中引用（这使容器有机会管理连接池等）。

因为没有设置 jtaDataSource，所以容器“回退”到“jdbc/__default”下的默认数据源。

我的建议是您配置自己的数据源，可以在persistence.xml 中引用。

# aptana - Update Aptana to 3.3.0.201212131616-13122012161933 has hidden all my connections?

> ID：13891037
> 
> 赞同：2
> 
> 时间：2012-12-15T09:28:17.933
> 
> 标签：aptana

I´ve updated Aptana Studio 3 to version 3.3.0.201212131616-13122012161933 and no longer have success to my connections. Where can I find them and recover?

I'm using Aptana as standalone, not as eclipse plugin.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:41:10.370

好的，一个新的问题结果。我已经手动重新输入了我所有的连接，所以我昨天完成了我的工作。

但是今天我启动了 Aptana Studio，我所有的连接都消失了！它们可以在连接管理器中再次选择，但在再次重新启动后，它们又消失了。

是否有我必须启用或禁用的属性以保持 aptana 与项目的连接权？

谢谢

**编辑** 我已经通过图像证明了我的问题，因为它更容易理解为我的英语不好。

**首先** ，我卸载了 Aptana 并重新安装了它。我开始创建一个新项目，例如为它创建三个连接。

**其次** ，我测试了功能的连接，所有三个都可以！然后我关闭了 Aptana Studio 并重新启动它。没有连接与项目相关联！您可以[在此处查看第 1 步和第 2 步](http://www.dp-one.net/aptana-problems/step-1.jpg)

**第三** ，如果我单击链接到项目的新连接的“+”符号，我可以从下拉列表中选择手动添加的连接并将其链接到项目。[在此处](http://www.dp-one.net/aptana-problems/add-connection.jpg)的最后一个屏幕上查看

**我的猜想** 必须有一些东西可以禁用或启用以保持与项目的连接。但我不知道我的错误是什么。我像 3.2 版一样处理工作室。3.3 中是否有一些我看不到的变化？

感谢帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:51:36.133

今天，appcelerator 发布了一个能够解决问题的更新。因此，您可以通过启动 Aptana Studio 并运行更新来修复它。安装后，所有连接都应链接到您指定的项目！

# jquery - 图片未在我的主页 silder Wordpress 网站中加载

> ID：13891039
> 
> 赞同：0
> 
> 时间：2012-12-15T09:28:49.243
> 
> 标签：jquery, wordpress, nivo-slider

我不确定我的图像没有出现在滑块中的绝对 JS 错误。

我的网站是：- URL

而不是JS错误

`$ is not a function at`--

```
 $(function() {
   $('#design_thumbs a').lightBox();
   }); 
```

它在出现 JS 错误之前可以正常工作。我唯一做的就是改变我的主页。

让我知道我怎样才能使这项工作得到尝试`jQuery.noConflict();`

但没有帮助:(（上面的代码在我的`header.php` ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:48:40.197

您是否尝试过这种方式：

```
jQuery(function() {
  jQuery('#design_thumbs a').lightBox();
}); 
```

还有几种方法：

```
jQuery(function($) {
  jQuery('#design_thumbs a').lightBox();
}); 
```

还有这个：

```
(function($) {
  jQuery('#design_thumbs a').lightBox();
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:57:51.177

我认为问题在于，可能`<head>`直到执行之后才加载`<script>`中的 jquery 库`<body>`。我对脚本加载的顺序有点模糊，但我知道当它们放在`<head>`. 至于`<body>`，我相信它们会在页面中加载内容时同步执行。尝试将脚本移动到头部，因为`$(function(){})`它只是`$(document).ready(function(){})`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:06:58.180

最后我自己找到了解决方案。

我在我的网站[THEME FOREST THEME](http://themeforest.net/item/pekaboo-for-wordpress-children-theme-template/409980)上使用的这个主题，没有 JS 错误反映，所以没有 JS 问题。

但是我必须在我的主题文件中进行一些更改，这些`common-functions.php`文件只有主页的设置。

代码是->

```
if (is_page_template('page-home.php') ) { 
```

**评论**该行并将其更改为这样的内容->

```
//if (is_page_template('page-home.php') ) {
if ( is_page(67) ) {   //change 67 with your page id 
```

同样在`header.php`为 nivo 滑块 css 效果修改 CSS-

将此代码更改为您的页面的类似内容

```
<?php if ( is_page_template('page-home.php')) { ?>
<link rel="stylesheet" type="text/css" media="all" href="<?php echo get_template_directory_uri(); ?>/css/nivo-slider.css"/>
<?php }; ?> 
```

更改为（使用页面 id 代码）

```
<?php if ( is_page(67)) { ?>
<link rel="stylesheet" type="text/css" media="all" href="<?php echo get_template_directory_uri(); ?>/css/nivo-slider.css"/>
<?php }; ?> 
```

# php - 从 REQUEST_URI (PHP) 中删除一个查询字符串

> ID：13891043
> 
> 赞同：0
> 
> 时间：2012-12-15T09:29:03.050
> 
> 标签：php, string, query-string

我在从 url 中删除特定查询字符串时遇到问题。我想保留其余的查询，但只是转储最后一个。问题是查询字符串每次都可能有不同的值，所以我不知道该怎么做。

例如我的网站网址可能是：

```
http://sitename.com/index.php?Cat=Bus&Origin=UK 
```

我想做的是保留 Cat=Bus 并删除 Origin=UK

因此，如果我尝试将原产地更改为德国，我会写：

```
echo '<a href="'.$_SERVER['REQUEST_URI'].'&Origin=Germany">Germany</a>'; 
```

所以它需要它所在的页面：

```
http://sitename.com/index.php?Cat=Bus&Origin=UK 
```

使用 Request_URI。然后我想把它从 &Origin=* 中去掉，然后一旦完成，就把它传递到一个字符串中，并在最后添加新的原点。

我想：

```
$theURI = $_SERVER['REQUEST_URI']; 
```

但我不知道如何从头到尾。

```
$amended = $theURI - '&Origin=*' 
```

然后结束

```
echo '<a href="'.$amended.'&Origin=Germany">Germany</a>'; 
```

我只是不知道如何在 PHP 中表达 $amended 函数。

有人可以帮忙吗？这被用于国家之间的分类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:35:01.603

根据您获取来源的方式（静态 url 与动态 url），这是对`$_GET`超全局的简单操作。

```
$url = $_SERVER['REQUEST_URI']; //edit: I usually use $_SERVER['PHP_SELF'], so try this if REQUEST_URI fails
$get_param = $value; //$value can be germany, england, poland, etc etc
$url .= "&Origin=".$get_param;
echo "<a href='".$url."'>$get_param</a>"; 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:46:55.357

如果您知道确切的变量并且它们并不多，您可以使用 Dale 的评论：

```
echo '<a href="/index.php?Cat=' . $_GET['Cat'] . '&Origin=Germany">Germany</a>'; 
```

如果没有，您可以使用 str_replace：

```
$url = $_SERVER['REQUEST_URI'];
$url = str_replace("origin=" . $_GET["origin"], "", $url);
$url = preg_replace("#&+#", "&", $url);
... 
echo "<a href='" . $url . "&origin=Germany"'>Germany</a>"; 
```

# database - 库存系统的数据库结构

> ID：13891046
> 
> 赞同：0
> 
> 时间：2012-12-15T09:29:49.400
> 
> 标签：database, database-design, database-schema

我正在尝试为计算机商店开发库存和销售点系统。他们中的大多数都有产品序列号，但有些产品（例如闪存驱动器）没有。当他们要出售任何产品时，他们希望通过“产品的序列号”从库存中获取产品信息，对于那些没有序列号的产品，他们将从下拉列表中选择产品信息。

我已经设计了用于保存库存信息的数据库，但我对如何保存序列号感到非常困惑。你能否给我你的建议，以更好的方式来构建我的数据库，以保存有和没有序列号的产品信息

谢谢：）

表：类别

```
category_id category_name 
```

表：品牌

```
brand_id brand_name 
```

表：产品

```
product_id  category_id   brand_id   product_name 
```

表：purchase_order

```
p_order_id supplier_id total_amount  purchase_date 
```

表：purchase_details

```
p_details_id  p_order_id   product_id   unit_price   quantity 
```

表：inventory_transaction（此 tbl 用于跟踪当前库存，对于每次购买我添加正值，对于购买退货我添加负值）

```
inv_tran_id    product_id   unit_price  quantity 
```

## 编辑

当我填写我的数据库表时，它如下所示：

表：产品

```
product_id  category_id   brand_id   product_name
   1            1          2           17 Inch LCD LED
   2            2          5           8 GB Flash Drive 
```

采购订单

```
p_order_id supplier_id total_amount  purchase_date
  1            1         500.00        2012-12-15 
```

表：purchase_details

```
p_details_id  p_order_id   product_id   unit_price   quantity
   1             1            1           200.00        10
   2             1            2           50.00          5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:39:44.707

当您说`product's serial number`产品编号将与产品实体相关联并且应该在产品表上时，您有点回答了自己的问题。这是假设产品序列号对于产品是唯一的。

制造商的产品序列号不是唯一的，因此与产品具有多对一的关系。这必须保存在另一个表上，可能称为 Product_Item 或 Manufacturer_Product，制造商的产品序列号作为主键，Product_ID 作为外键。您可以将其扩展以定义其他制造商属性，例如制造商的产品名称（可能不同）以及制造商本身。如果您想通过库存订购进行任何类型的自动库存水平控制，您无论如何都必须这样做。

# jsp - 如何从 jsp 或 Struts2 上的服务器获取当前日期

> ID：13891049
> 
> 赞同：3
> 
> 时间：2012-12-15T09:30:11.600
> 
> 标签：jsp, struts2

我想从服务器获取日期，我尝试过下面的代码，但从当前系统获取日期，因为我在不同的系统上运行了我的应用程序，它给出了不同的结果，因为系统日期不同。

我的代码是：

```
String date = "yyyy-MM-dd"; 
Calendar calendar = Calendar.getInstance();     
SimpleDateFormat dateFormat = new SimpleDateFormat(date);       
System.out.println("Today Date = "+dateFormat.format(calendar.getTime())); 
```

所以我期待来自服务器的结果日期，而不是来自系统的结果，因为不同的系统有不同的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:36:44.907

```
System.currentTimeMillis(); 
```

这会对你有所帮助。如果你想要格式化的日期，那么

```
Date d1 = new Date();
SimpleDateFormat df = new SimpleDateFormat('MM/dd/YYYY HH:mm AM');
String formattedDate = df.format(d1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T13:31:42.630

```
<strong>Server Time&nbsp;:&nbsp;&nbsp;</strong><label id="timelable"></label>

<script type="text/javascript">
        var myVar = setInterval(function(){ myTimer() }, 1000);
        var jsVar=  <%=java.util.Calendar.getInstance().getTimeInMillis()%>;
        var timeZoneOffset=<%=java.util.TimeZone.getDefault().getOffset(System.currentTimeMillis())%>;

        jsVar=jsVar+timeZoneOffset;
        function myTimer() {
        jsVar=jsVar+1000;
        var d = new Date(jsVar);
        var t=d.toUTCString();
    document.getElementById("timelable").innerHTML = t;
}

        </script> 
```

现在您将看到在您的 jsp 中运行的服务器时间。

# java - 关于 Java HttpServletRequest 和 Principal 对象的一些信息

> ID：13891053
> 
> 赞同：1
> 
> 时间：2012-12-15T09:30:47.563
> 
> 标签：java, spring, spring-mvc

在此期间，我正在研究可从 STS 仪表板下载的 Spring MVC 展示示例

在我的 home.jsp 视图中，我有以下链接：

```
<a id="request" class="textLink" href="<c:url value="/data/standard/request" />">Request arguments</a> 
```

此链接生成一个对 URL 的 HTTP 请求：**“/data/standard/request”**

这是处理此 HTTP 请求的控制器类的方法：

```
@RequestMapping(value="/data/standard/request", method=RequestMethod.GET)
public @ResponseBody String standardRequestArgs(HttpServletRequest request, Principal user, Locale locale) {
    StringBuilder buffer = new StringBuilder();     // Rappresenta un buffer (sequenza mutabile di caratteri) API compatibile con StreamBuffer
    buffer.append("request = ").append(request).append(", ");
    buffer.append("userPrincipal = ").append(user).append(", ");
    buffer.append("requestLocale = ").append(locale);
    return buffer.toString();
} 
```

此方法采用 3 个参数，其中一些我还不清楚：

*   **HttpServletRequest 请求**：阅读 javadoc 我可以读到这个对象：**扩展 ServletRequest 接口以提供 HTTP servlet 的请求信息**但是：什么样的信息？

这个对象相关的缓冲区内容是：**request = org.apache.catalina.connector.RequestFacade@62c77dc3**究竟是什么意思？

*   **Principal user** : 阅读javadoc 我可以读到这个对象： **这个接口代表了一个principal的抽象概念，它可以用来代表任何实体，例如个人、公司和登录ID。**

我不清楚我到底可以在这个对象中放入什么以及为什么缓冲区中的相关内容为空

有人可以帮助我吗？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:56:12.400

**HttpServletRequest**：由 Container 填充的对象。该对象由 servlet 容器填充，即您的服务器可能是 tomcat、weblogic。该对象包含请求参数信息、会话信息。您对此对象几乎没有控制权。

**主要用户**：已登录到您的容器以访问应用程序的用户。如果您在容器中添加了安全性，那么该对象将为您提供已登录用户的详细信息：用户名、角色（真实信息。）

**Locale locale**：访问您的 Web 应用程序的用户的语言环境。

就 StringBuffer 的响应而言，打印的是对 HttpServletRequest 对象的引用。该对象由 servlet 容器填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:55:18.937

> 这个对象相关的缓冲区内容是：request = org.apache.catalina.connector.RequestFacade@62c77dc3 究竟是什么意思？

请求容器的对象实现，在本例中为 tomcat。HttpServletRequest 对象包含大量数据（关于 http 请求），如参数/header/method/url 等。您需要阅读 java servlet 规范。http://download.oracle.com/otndocs/jcp/servlet-2.4- fr-spec-oth-JSpec/

Tomcat 是这个规范的一个实现。

您是否也将 Principal 和 Locale 设为 null ？根据[http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html) 它们是有效的控制器方法参数。

# python - Mac OS X 10.7.5 上的致命错误“stdio.h”Python 2.7.3

> ID：13891056
> 
> 赞同：2
> 
> 时间：2012-12-15T09:30:59.613
> 
> 标签：python, mysql, macos, python-2.7

有人告诉我这个问题更适合 Stack Overflow（而不是 ServerFault）

所以这里是：

我的 Mac OS X 10.7.5 遇到了这个奇怪的问题

```
/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:33:10: fatal error: 'stdio.h' file not found 
```

是什么导致了上述错误？这个错误一直困扰着我，我无法安装 mysql-python，因为我坚持这一步。

我正在使用 Python 2.7.3。Google App Engine (python)、python 脚本、龙卷风之类的东西通常可以在我的 mac 上运行。但不是 mysql-python。

我已经使用 dmg 映像安装了 MySQL，并将 mysql 文件夹复制到 /usr/local/

我该如何解决？

我也尝试过运行命令：`sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/` 而不是通过运行来安装 mysql-python `sudo python setup.py install`。

但收到以下信息：

```
running install
running bdist_egg
running egg_info
writing MySQL_python.egg-info/PKG-INFO
writing top-level names to MySQL_python.egg-info/top_level.txt
writing dependency_links to MySQL_python.egg-info/dependency_links.txt
writing MySQL_python.egg-info/PKG-INFO
writing top-level names to MySQL_python.egg-info/top_level.txt
writing dependency_links to MySQL_python.egg-info/dependency_links.txt
reading manifest file 'MySQL_python.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'MySQL_python.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.6-intel/egg
running install_lib
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
running build_ext
gcc-4.2 not found, using clang instead
building '_mysql' extension
clang -fno-strict-aliasing -fno-common -dynamic -g -O2 -DNDEBUG -g -O3 -Dversion_info=(1,2,4,'rc',5) -D__version__=1.2.4c1 -I/usr/local/mysql/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.6-intel-2.7/_mysql.o -Os -g -fno-common -fno-strict-aliasing -arch x86_64
In file included from _mysql.c:29:
/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:33:10: fatal error: 'stdio.h' file not found
#include <stdio.h>
         ^
1 error generated.
error: command 'clang' failed with exit status 1 
```

我还有什么其他可能的方法可以解决它？

谢谢！

最好的祝福。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T04:32:24.743

我想通了。

只需安装 Xcode 中的命令行工具即可解决问题。

干杯。

# c# - 忽略异常

> ID：13891058
> 
> 赞同：2
> 
> 时间：2012-12-15T09:31:37.347
> 
> 标签：c#, winforms, exception

# 问题

当我们的应用程序抛出异常时，什么也没有发生。

应用程序的反应就像一个空的 try catch 正在更高级别的某个地方捕获异常，并且该异常被忽略......

当简单地抛出这样的异常时，`throw new Exception("BOOM");`什么可以捕获并忽略异常？？？我在我的代码中找不到任何空的 try-catch 或更高级别的 try-catch，异常在哪里？

我在 DragDrop 事件处理程序中抛出异常。

# 问题

*   这种行为有什么可能的原因吗？
*   有没有办法确切地看到异常消失的地方？我尝试查看调用堆栈，进入反汇编代码，在其他级别捕获异常，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:25:05.820

> 在 DragDrop 事件中引发异常

这是必不可少的信息，如果您发布了一个片段，那将是显而易见的。拖放事件处理程序是特殊的。在它们中引发的任何异常都会被吞下而无需任何诊断。这背后的可能原理是它们很可能会失败，因为它们处理的是另一个程序生成的数据。并且不应该允许产生这样的不良数据的错误程序使您的程序崩溃。

如果您需要调试代码，然后使用 Debug + Exceptions，请勾选 CLR 异常的 Thrown 复选框。抛出异常时，调试器现在将停止。

如果您希望用户知道任何异常，那么您需要使用 try/catch 在异常被吞下之前捕获它。另一个程序中的任何错误都成为您解释的小风险。

# web-services - Web 服务是 WSDL 还是 REST 或两者兼而有之？

> ID：13891060
> 
> 赞同：0
> 
> 时间：2012-12-15T09:32:13.507
> 
> 标签：web-services, rest, wsdl

我想知道 Web 服务明确意味着 WSDL 文件和 SOAP 协议（​​主要是 WSDL）的使用，或者它也可能意味着 REST API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:47:29.087

听起来有点混乱。

WSDL 代表 Web 服务描述语言，用于定义 SOAP Web 服务。

SOAP 和 REST 都使用 http 作为协议，但据我所知，您无法使用 WSDL 定义“REST 服务”。“REST 服务”被称为“资源”。

一些工具使用 WADL（Web 应用程序描述语言）来定义 REST 资源，但它在生成客户端方面不如 WSDL 可靠，并且未被社区广泛接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:37:57.417

Web 服务是通过 HTTP 协议提供数据（通常是 XML 或 JSON）和对这些数据进行操作的程序。

数据是否通过 SOAP 传输，API os 是否构造为 REST API 与是否为 Web 服务无关。WSDL 文件描述 Web 服务的接口。它们可能描述 SOAP 服务以及 REST 服务......

# c# - 当在字符串上找到特定字符时修剪字符串，有可能吗？

> ID：13891062
> 
> 赞同：0
> 
> 时间：2012-12-15T09:32:24.223
> 
> 标签：c#, string

假设我有这个字符串：

```
String myString = "violet are blue|roses are red|this is a terrible poet"; 
```

每当找到字符'|'时，我想修剪字符串。因此，当执行代码时， myString 将是：

```
myString = "roses are red|this is a terrible poet"; 
```

最后

```
myString = "this is a terrible poet"; 
```

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:41:32.640

```
private string trimString(string s)
{
   int index = s.IndexOf("|");
   return s.Substring(index+1); //returns string from this index to the end of string
} 
```

**用法**

```
String myString = "violet are blue|roses are red|this is a terrible poet";

myString = trimString(myString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:36:29.330

您可以执行以下操作：

```
 string [] stringparts mystring.spilt('|'); 
```

`stringsparts`可用于打印您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:37:20.990

使用`String.Split()`方法；

```
//Single Line Solution
string newString1 = myString.Split('|').Last();

//Another way
string[] arr = myString.Split('|');   //Split the string by | into an array
string newString2 = arr[arr.Length-1]; //Get the last element of the splited array

Console.WriteLine(newString1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T09:39:39.347

您可以`Substring`为此使用方法，也许您可​​能希望将其用作扩展方法。代码包括修剪到第一个（左）和修剪到最后一个（右）`|`：

```
public static class StringExtensions
{
    public static string TrimToFirst(this string s)
    {
        int index = s.IndexOf('|');
        if(index >= 0)
        {
            s = s.Substring(index + 1);
        }
        return s;
    }

    public static string TrimToLast(this string s)
    {
        int index = s.LastIndexOf('|');
        if(index >= 0)
        {
            s = s.Substring(index + 1);
        }
        return s;
    }
}

// usage
string myString = "violet are blue|roses are red|this is a terrible poet";
Console.WriteLine(myString.TrimToLast());
// outpus: this is a terrible poet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T09:41:34.040

```
string myString = "violet are blue|roses are red|this is a terrible poet";
var elements = myString.Split(new char[] { '|' }).Skip(1);

StringBuilder sb = new StringBuilder();
foreach (var element in elements)
{
    sb.Append(element);
    sb.Append("|");
}

string result = sb.Remove(sb.Length - 1, 1).ToString();

Console.WriteLine(result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T09:50:25.160

这是 100,000000 种方法之一

```
string myString = "violet are blue|roses are red|this is a terrible poet";
string result = myString.Contains('|') ? myString.Substring(myString.IndexOf('|')).TrimStart('|') : myString; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T19:05:38.767

实现它的一种简短方法：-

```
myString = myString.Substring(myString.LastIndexOf("|") + 1); 
```

# asp.net - ASP.NET：创建和使用 bin 的子文件夹

> ID：13891073
> 
> 赞同：2
> 
> 时间：2012-12-15T09:34:46.753
> 
> 标签：asp.net, plugins, web-config

我正在创建一些在启动时验证我的网站配置的插件 dll。我想将这些 dll 放在 /bin 文件夹的子目录中。所以我将它添加到我的 web.config 文件中：

```
<runtime>
   <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="bin;bin/plugins" />
      ...
</runtime> 
```

然后我有一个项目，可以构建一些 dll 并将其部署到 /bin/plugins 目录中。

我已经验证了构建步骤是正确的，并创建了子文件夹并将 dll 放在那里。

然后在 application_start 上，我尝试加载程序集。我得到当前正在执行的程序集路径，如下所示：

```
 Dim assembly As Assembly = System.Reflection.Assembly.GetExecutingAssembly()
    Dim asmDirectory As String = Path.GetDirectoryName(assembly.Location)
    Dim pluginDirectory As String = Path.Combine(asmDirectory, "plugins") 
```

pluginDirectory 通常设置为这样的：

```
"C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\91be3168\7a998462\assembly\dl3\33ada1a0\6561a9fc_a4dacd01" 
```

但是在那个目录中，没有插件目录。

如何让 IIS（在我的情况下为 IIS 6.0）将子文件夹和内容从我的代码目录复制到执行位置？

如果 VB.NET 太难阅读，我很乐意翻译成 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:02:24.747

在那里复制程序集的行为称为[影子复制](http://blogs.msdn.com/b/junfeng/archive/2004/02/09/69919.aspx)。为了启用它，ASP.NET 调用[AppDomain.SetShadowCopyPath](http://msdn.microsoft.com/en-us/library/system.appdomain.setshadowcopypath.aspx)（它是一个过时的 API，但它仍然调用它），只将路径传递给 bin 文件夹。

这就是为什么您在子文件夹中看不到您的程序集被复制影子的原因。该行为是不可配置的。此外，即使是这样，它也不会按照您想要的方式工作，因为它不会重新创建与 bin 中相同的结构。

[您可以调用HttpRuntime.BinDirectory](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.bindirectory.aspx) ，而不是依赖执行的程序集路径，这将为您提供 bin 的路径，您可以将插件文件夹附加到该路径。

# linq - 如何使用linq将一列数据复制到同一表中的另一列？

> ID：13891078
> 
> 赞同：0
> 
> 时间：2012-12-15T09:35:27.780
> 
> 标签：linq, linq-to-sql, linq-to-objects, linq-to-dataset

请任何人澄清，如何使用linq将一列数据复制到同一表中的另一列。

谢谢你，Siva Kumar goru。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:39:49.963

您可以在没有 LINQ 的情况下简单地做到这一点（目的是查询数据，而不是修改）

```
foreach(DataRow row in table.Rows)
    row["AnotherColumn"] = row["OneColumn"]; 
```

# android - 布局及其元素不能添加到任何活动中

> ID：13891088
> 
> 赞同：0
> 
> 时间：2012-12-15T09:37:11.373
> 
> 标签：android, layout, dialog, custom-component

我在另一个项目中为我的应用程序开发支持类，然后，我将它添加到我的应用程序中。我创建了一个显示对话框的类，并且在其项目中完美运行，但是当我将它添加到我的应用程序项目时，它无法识别布局及其元素。

![在此处输入图像描述](../Images/90601dafd6ca6a5c98b32a6bf39e2384.png)

我确定所有内容都已添加，但似乎 R xml 中没有任何引用。你知道有什么解决办法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:41:56.987

您需要添加您的`Reference/Library Project`然后只有您可以将其元素和布局添加到您的.`Build Path``Running application``Reference/Library Project``Running application`

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:11:51.387

检查是否在您的导入中导入 your.package.R 而不是 android.R，这是一个常见问题

# xml - 如何在sencha touch 2中从xml获取媒体内容属性值

> ID：13891110
> 
> 赞同：1
> 
> 时间：2012-12-15T09:39:55.940
> 
> 标签：xml, sencha-touch-2, sencha-architect

我想获取 在 sencha touch 2 的快照中突出显示的**media:content 属性->“url”值。**![在此处输入图像描述](../Images/1783709f0af5d1cf73bc5b8c23c98b0c.png)

> **我的煎茶模型代码是**

```
Ext.define('MyApp.model.Feed', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {
            name: 'title'
        },
        {
            name: 'link'
        },
        {
            name: 'pubDate'
        },
        {
            name: 'channel'
        },
        {
            name: 'item'
        },
        {
            name: 'content'
        },
        {
            name: 'description'
        },
        {
            name: 'category'
        }
    ],
    hasMany: {
        associationKey: 'content',
        model: 'MyApp.model.Feed',
        autoLoad: true
    }
} 
```

});

> **煎茶店 XMLStore**

```
Ext.define('MyApp.store.MyXmlStore', {
extend: 'Ext.data.Store',

requires: [
    'MyApp.model.Feed'
],

config: {
    autoLoad: true,
    model: 'MyApp.model.Feed',
    storeId: 'MyXmlStore',
    proxy: {
        type: 'ajax',
        url: 'http://www.goodnews.pk/feed/',
        reader: {
            type: 'xml',
            rootProperty: 'channel',
            record: 'item'
        }
    }
} 
```

});

> **MyList 查看代码**

```
Ext.define('MyApp.view.ListView', {
extend: 'Ext.Panel',

config: {
    id: 'ListView',
    layout: {
        type: 'card'
    },
    items: [
        {
            xtype: 'list',
            itemTpl: [
                '<div style="width:auto; float:left;"><img src="{pubDate}" width="50" height="50" /></div>',
                '<div style="width:70%; padding: 5px;">',
                '    <span><h4>{description}</h4></span>',
                '    <span>{category}</span>',
                '    <span>{content}</span>',
                '</div>'
            ],
            store: 'MyXmlStore'
        }
    ]
} 
```

});

xml 链接是[www.goodnews.pk/feed/](http://www.goodnews.pk/feed/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:41:56.343

我解决了来自媒体的 url 链接：sencha 架构师中的 xml 内容解析。我只更改了模型中的几个设置，并添加了一个通过此函数转换字段的函数。

上面的代码是一样的。只有我的煎茶模型代码是变化的。代码如下。

> **我的煎茶模型代码**

```
Ext.define('MyApp.model.Feed', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {
            name: 'title'
        },
        {
            name: 'link'
        },
        {
            name: 'pubDate'
        },
        {
            name: 'channel'
        },
        {
            name: 'item'
        },
        {
            name: 'content'
        },
        {
            convert: function(v, rec) {
                var nodes = rec.raw.querySelectorAll('description');
                var arrayItem = [];
                var l = nodes.length;

                var desc = "";

                for( var i = 0; i < l; i++){
                    var node = nodes[i];

                    // now push the description in array with substring
                    desc = nodes[i].textContent;
                    console.log(desc.substring(0,100));

                    //arrayItem.push(nodes[i].textContent);
                    //console.log(nodes[i].textContent);

                    desc = nodes[i].textContent;
                    arrayItem.push(desc.substring(0,100)+'[...]');
                }

                return arrayItem;
            },
            name: 'description'
        },
        {
            name: 'category'
        },
        {
            convert: function(v, rec) {
                console.log(''+rec.raw);
                var nodes = rec.raw.querySelectorAll('content');
                console.log('length is '+nodes.length);
                var arrayItem = [];
                var l = nodes.length;
                var flag = true;

                for( var i = 0; i < l; i++){
                    var node = nodes[i];

                    //this will get the image Link
                    var imageLink = nodes[i].getAttribute('url');

                    //console.log(nodes[i].textContent);

                    if(i%2!==0)
                    {

                        // now push the image Link in array that contains all the images link
                        arrayItem.push(imageLink);
                        console.log(nodes[i].getAttribute('url'));
                    }

                }

                return arrayItem;
            },
            name: 'imageLink'
        }
    ],
    hasMany: {
        associationKey: 'content',
        model: 'MyApp.model.Feed',
        autoLoad: true
    }
} 
```

});

我还分享了我的 sencha architech 快照。+ 控制台日志 ![煎茶建筑师](../Images/776bbb3c8a535715e49e50d1ace045a4.png) ![在此处输入图像描述](../Images/9bc49c10b779fcc95c825f4a63e80abd.png)

# image - 如何从本地驱动器中检索图像并在 MVC4 的视图中显示？

> ID：13891111
> 
> 赞同：0
> 
> 时间：2012-12-15T09:40:01.690
> 
> 标签：image, asp.net-mvc-4

大家好，我正在开发用户上传图像的应用程序，我将这些图像保存在我的本地文件夹中的本地驱动器中，而不是服务器上，我正在将该 URL 保存在我的数据库中

```
 if (UploadedImages != null )
        {
            var img = 0;
            foreach (var Image in UploadedImages)
            {                   
                if (Image.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(Image.FileName);
                    var path = System.IO.Path.Combine("D:\\SCommerceImages\\", fileName);

                    Image.SaveAs(path);
                    if (img == 0)
                    {
                        customProduct.ThumbNailImage = ".." + path;
                        img++;
                    }
                    else if (img == 1)
                    {
                        customProduct.BigImage = ".." + path;
                    }
                    else
                    {
                        ViewData["Image"] = ".." + path;
                    }
                }
            }
        } 
```

我的问题是，当我尝试检索这些图像时，当我使用萤火虫检查它们时，这些图像没有显示在我的视图中，它说无法加载图像，谁能告诉我如何克服这个问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-15T09:41:57.073

改变你的

`var path = System.IO.Path.Combine("D:\\SCommerceImages\\", fileName);`

至

```
 var path = System.IO.Path.Combine(@"D:\SCommerceImages\", fileName.extension); 
```

# spring - 使用 spring-data-jpa 创建子查询

> ID：13891114
> 
> 赞同：1
> 
> 时间：2012-12-15T09:40:38.970
> 
> 标签：spring, spring-data-jpa

我对使用 spring-data-jpa 1.2.0.RELEASE 的 querydsl 有疑问

我有包含一组促销的实体项目，每个促销都有促销类型，它是一个枚举。我正在尝试查找包含一组过滤促销的所有项目，其中 PromotionType == PromotionType.Special。我想我会通过一个子查询来实现这样的促销活动：

谓词：

```
public class ItemPredicates {
    private static QItem $ = QItem.item;

    public static BooleanExpression getSpecialItems() {
        return $.promotions.any().promotionType.eq(PromotionType.SPECIAL);
    }
}

Test:

//prepare data
Item item = new Item();
item.setPromotions(Sets.newHashSet(promotion(PromotionType.SPECIAL), promotion(PromotionType.NORMAL)));

//assertion
Item specialItems = itemRepository.findOne(ItemPredicates.getSpecialItems()); 
```

因此，我期望只有特殊类型的促销过滤掉促销的项目，而不是我总是得到一个有一组促销的项目。如果我将测试更改为此：

```
Test:

//prepare data
Item item = new Item();
item.setPromotions(Sets.newHashSet(promotion(Promo tionType.NORMAL)));

//assertion
Item specialItems = itemRepository.findOne(ItemPredicates.getSpecialItems()); 
```

然后我不会得到正确的项目。但是如何过滤促销集以仅具有特殊促销类型？

请问你能帮我一把吗？

# java - JDBC 和 SQL Server 连接问题

> ID：13891115
> 
> 赞同：2
> 
> 时间：2012-12-15T09:40:48.053
> 
> 标签：java

我对 Java 很陌生（我是一个纯粹的 .net 人）。我正在尝试进行 SQL Server 2008 数据库连接。现在我正在使用“jTDS”驱动程序来完成我的工作。

db.dbConnect("jdbc:jtds:sqlserver://XXXXXXX\XXXXXXXX/MyDB","用户名","密码");

我在连接中做错了什么？我收到以下错误

![在此处输入图像描述](../Images/224a1a0bbc85e8cb1c1f5fa919e5e6a6.png)

我知道这可能是一个很容易解决的问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:54:57.253

您将[Microsoft SQL Server JDBC 驱动程序](http://msdn.microsoft.com/en-us/library/ms378428.aspx)URL 格式与[jTDS 驱动程序](http://jtds.sourceforge.net/faq.html#urlFormat)混淆了。

jTDS 的格式为：

```
jdbc:jtds:<server_type>://<server>[:<port>][/<database>][;<property>=<value>[;...]] 
```

在您的具体示例中，数据库的正确 URL 将是：

```
jdbc:jtds:sqlserver://IIS08TOPSDEVDB1/SmbCommission;instance=IIS08TOPSDEVDB1 
```

现在，当您使用实例名称进行连接时，您需要确保 SQL Server Browser 服务正在运行，并且该实例已配置为接受 TCP/IP 连接。如果您不（想要）使用 SQL Server Browser 服务，请确保在固定端口上配置实例并指定该端口而不是实例：

```
jdbc:jtds:sqlserver://IIS08TOPSDEVDB1:<the-port>/SmbCommission 
```

另一种选择是使用 Microsoft SQL Server JDBC 驱动程序，其格式如下：

```
jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]] 
```

使用这种格式，正确的 URL 应该是：

```
jdbc:sqlserver://IIS08TOPSDEVDB1\IIS08TOPSDEVDB1;databaseName=SmbCommission 
```

# java - 如何从现有数组中取出一个随机元素，然后不再使用它？

> ID：13891116
> 
> 赞同：-4
> 
> 时间：2012-12-15T09:40:58.453
> 
> 标签：java, arrays, file-io, random, bytearray

我被要求制作一个字节文件。我得到了数组**字节 a[] = {97, 98, 99, 100, 101, 102}** ，现在我必须从 a[] 数组中创建字节文件。但我有限制：

1.  文件的数据必须是随机的（来自 a[]）
2.  必须几乎同时在文件中检测到所有字节。

    公共类 WriteByteFile { byte[] a = {97, 98, 99, 100, 101, 102};

    最终字符串文件=“文件”；

    /* 打开文件 */ BufferedOutputStream out = null; 尝试 { out = new BufferedOutputStream (new BufferedOutputStream(file)); } catch (FileNotFoundException e1) { System.err.println("无法打开文件：" + file1 + "：" + e1.getMessage()); System.exit(1); }

    /* 写入文件 */ try { for (int b = 0; b < 1650; b++) { out.write(//这里我必须从 a[] 中获取随机元素，但在接下来的 5 次中不能再获得它) ; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:44:29.850

`1.the data of the file must be random (from the a[])`

`2.all the bytes must be detected in the file almost the same times.`

这两条线是矛盾的。如果您的文件中必须存在所有字符`same no of times`，那么您从数组中选择的字符不是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:52:47.817

> 必须几乎同时在文件中检测到所有字节。

这里的关键是“几乎”。这里不需要精确等价，只需要统计等价。

如果您随机选择每个字节，独立于其他字节，您将满足这一点。统计将完成其余的工作。如果你继续掷骰子，你会得到几乎相同的 1-6 次，但是没有机制可以保证完全等价（事实上，这里不太可能完全等价）。

# c - 捕获全局鼠标按下和释放

> ID：13891118
> 
> 赞同：-2
> 
> 时间：2012-12-15T09:41:13.297
> 
> 标签：c, xlib

我想捕捉鼠标按钮 2 的按下和单独释放。我想使用 xbindkeys 但 afaik 它没有给我这样的功能。（可以？）

这个： http: [//developers-blog.org/blog/default/2010/08/10/XServer-Event-Handling-C-Example](http://developers-blog.org/blog/default/2010/08/10/XServer-Event-Handling-C-Example)或多或少地解释了这些东西在我自己编写时是如何工作的。但是，当我添加 ButtonPressMask 时，我得到：

```
func: attach_to_focuswin
func: handle_event
X Error of failed request:  BadAccess (attempt to access private resource denied)
  Major opcode of failed request:  2 (X_ChangeWindowAttributes)
  Serial number of failed request:  8
  Current serial number in output stream:  8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:41:27.600

我发现 xbindkeys 具有这样的功能（+Release），但是鼠标滚轮仿真（单击并按住鼠标中键然后向上/向下移动鼠标；实际上是 Trackpoint Wheel Emulation）对鼠标中键发出的事件产生了奇怪的影响。特别是当我使用 xev 对其进行测试时，那里只报告了一个事件，如果我单击并按住鼠标中键，则永远不会报告它（即使在发布之后）

# asp.net - 使用 ASP.NET 将批处理数据从 Oracle 加载到 Access

> ID：13891120
> 
> 赞同：0
> 
> 时间：2012-12-15T09:41:26.400
> 
> 标签：asp.net, oracle, ms-access

我需要在 ASP.NET 页面上有一个按钮，该按钮会触发从 Oracle 中的一个表到 Access DB 的数据复制。大约有 25'000 行。此过程每天将触发 2-3 次，优化（速度）是关键要求。

我尝试使用 Oracle 制作一个 DataReader 数据，然后遍历它，每次都使用 ExecuteNonQuery() 执行 INSERT 到 Access 中。使用此方法需要 5 分钟以上。

这根本不是我的专业领域，我会很感激一些关于我应该做什么的提示（甚至是一个工作代码示例）。

精度低：出于某种原因（我知道它已被弃用），我必须使用 System.Data.OracleClient。Oracle 中的表和 Access 中的表具有相同的字段名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:21:31.040

您可以针对包含与 Oracle 的内联连接的 MS Access 连接运行查询。我目前没有 Oracle 的副本，但它看起来像：

```
 INSERT INTO MyTable (field1name, field2name, etc )
 SELECT (field1name, field2name, etc ) 
 FROM [ODBC;Driver={Microsoft ODBC for Oracle};Server=myServerAddress;Uid=myUsername;Pwd=myPassword;].MyTable; 
```

（[http://www.connectionstrings.com/oracle#microsoft-odbc-for-oracle](http://www.connectionstrings.com/oracle#microsoft-odbc-for-oracle)）

您可以通过使用外部数据向导将相关表连接到您的 MS Access 副本，然后检查 Tabledef 的连接属性来获得准确的连接字符串。这导致了另一种可能性，即使用链接的 Oracle 表对 Access 连接运行查询。这将只是一个直接的 MS Access 查询。

最后，您应该能够从 Oracle 输出到 CSV 并导入到 MS Access，这应该比逐行更快，因为几乎所有内容都是如此。

# java - 在休眠本机查询中获取新创建的行ID

> ID：13891130
> 
> 赞同：3
> 
> 时间：2012-12-15T09:42:46.757
> 
> 标签：java, sql, hibernate

```
sess.createSQLQuery("INSERT INTO ARCHIVE (folder) VALUES(:folder)")
        .setParameter("folder",path)
.executeUpdate(); 
```

我想要新创建的对象的 id。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T09:56:36.190

尝试一下

整数 lastId = (Integer) session.createSQLQuery("SELECT LAST_INSERT_ID()") .uniqueResult();

# c# - XtraReport：无法使用分配给 DataSource 属性的对象

> ID：13891132
> 
> 赞同：1
> 
> 时间：2012-12-15T09:43:21.840
> 
> 标签：c#, .net, devexpress, datasource, xtrareport

我有一个使用存储在数据库中的报告的 C# 应用程序，对于使用 XPObject 作为数据源（*CptOperation 类，代码如下*）的特定报告，我在尝试打印或预览时收到此错误消息：

> 分配给 DataSource 属性的对象不能用作报表的数据源，因为它不实现任何受支持的接口。有关详细信息，请参阅 [http://help.devexpress.com/#XtraReports/CustomDocument1179](http://help.devexpress.com/#XtraReports/CustomDocument1179)

这是我用来打印报告的代码。

```
public static void PrintReport(string reportCode, object dataSource, string printerName)
{
    using (var uow = new UnitOfWork { ConnectionString = Content.GlobalInfo.ServerConnectionString })
    {
        var report = uow.FindObject<Content.Report>(new BinaryOperator("Code", reportCode));
        if (report == null)
        {
            XtraMessageBox.Show(String.Format("The report {0} is not found", reportCode),
                Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }

        var xtraReport = getXtraReportFromReport(report);
        xtraReport.DataSource = dataSource;

        if (!String.IsNullOrEmpty(printerName))
            xtraReport.Print(printerName);
        else
            xtraReport.Print();
    }
}

private static XtraReport getXtraReportFromReport(Content.Report report)
{
    XtraReport xtraReport;
    using (var writer = new StreamWriter(new MemoryStream()))
    {
        writer.Write(report.Content);
        writer.Flush();
        xtraReport = XtraReport.FromStream(writer.BaseStream, true);
    }
    return xtraReport;
} 
```

这是我的对象持久性类“CptOperation”：

```
private CptTypeOperation cptTypeOperation;
public CptTypeOperation CptTypeOperation
{
    get { return cptTypeOperation; }
    set { SetPropertyValue<CptTypeOperation>("CptTypeOperation", ref cptTypeOperation, value); }
}

private int numero;
public int Numero
{
    get { return numero; }
    set { SetPropertyValue<int>("Numero", ref numero, value); }
}

private CptSession cptSession;
[Association("CptSession-CptOperation")]
public CptSession CptSession
{
    get { return cptSession; }
    set { SetPropertyValue<CptSession>("CptSession", ref cptSession, value); }
}

[Association("CptOperation-Piece")]
public XPCollection<Piece> Pieces
{
    get { return GetCollection<Piece>("Pieces"); }
}

[Association("CptOperation-Transact")]
public XPCollection<Transact> Transacts
{
    get { return GetCollection<Transact>("Transacts"); }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:55:49.300

问题出在我发送一个类型的对象`XPObject`作为报表数据源，但实际上xtraReport数据源必须是一个`IList`或`IList<T>`对象，例如，它可以是类型：`XPCollection<CptOperation>`或`List<CptOperation>`...

# php - 获取数组的最后一个元素，而不改变其内部指针

> ID：13891133
> 
> 赞同：2
> 
> 时间：2012-12-15T09:43:52.120
> 
> 标签：php, arrays

如何在不更改其内部指针的情况下获取数组的最后一个元素？

我正在做的是：

```
while(list($key, $value) = each($array)) {  
    //do stuff  
    if($condition) {  
        //Here I want to check if this is the last element of the array            
        prev($array);  
    }  
} 
```

所以`end($array)`会把事情搞砸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:00:30.957

试试这个：

```
<?php
$array=array(1,2,3,4,5);
$totalelements = count($array);
$count=1;

while(list($key, $value) = each($array)) {  
    //do stuff  
    if($count == $totalelements){ //check here if it is last element
        echo $value;
    }
    $count++;
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T10:15:59.790

很简单，你可以使用：

```
$lastElementKey = end(array_keys($array));
while(list($key, $value) = each($array)) {  
    //do stuff  
    if($key == $lastElementKey) {  
        //Here I want to check if this is the last element of the array            
        prev($array);  
    }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T10:22:23.443

为什么不使用类似的东西：

```
$lastElement= end($array);
reset($array);
while(list($key, $value) = each($array)) {  
    //do stuff   
}

// Do the extra stuff for the last element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T10:11:45.057

像这样的东西：

```
$array = array_reverse($array, true);
$l = each($array);
$lastKey = $l['key'];
$array = array_reverse($array, true);

while(list($key, $value) = each($array)) {  
    //do stuff  
    if($key == $lastKey) {  
        echo $key . ' ' . $value . PHP_EOL;
    }  
} 
```

这里的问题是，如果数组很大，那么反转它需要一些时间。

# ios - UICollectionView 不显示使用 NSURLRequest 获得的项目

> ID：13891135
> 
> 赞同：0
> 
> 时间：2012-12-15T09:44:17.657
> 
> 标签：ios, facebook, json, image, gallery

我正在 ios 中制作一个有 4 个屏幕的应用程序，其中一个我想用作照片库。我使用图形从 facebook 页面下载的这些图像。在我的 ViewController 类中的 viewDidLoad 方法中创建连接 url：

```
(void)viewDidLoad
{
  [super viewDidLoad];  
  NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/NBAStoreNYC/photos"];  
  NSURL *url = [NSURL URLWithString:urlString];  

  // Create NSURLRequest
  NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:30];  

 //Create conection
 NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];  

 if (connection) 
 {  
    NSLog(@"Connecting...");   
    dataJSON = [[NSMutableData alloc] init];  
 } 
 else 
 {    
    NSLog(@"ERROR: Unable to create connection.");  
 }
} 
```

为了下载图像，我解析了返回的 JSON，以便在每个 for..end 中获取图像的 URL：

```
-(void)connection:(NSURLConnection )connection didFailWithError:(NSError )error{ NSLog(@"Error: %@", [error localizedDescription]); }

-(void)connection:(NSURLConnection )connection didReceiveResponse:(NSURLResponse )response{ NSLog(@"Received response: %@", response); [dataJSON setLength:0]; }

-(void)connection:(NSURLConnection )connection didReceiveData:(NSData )data { [dataJSON appendData:data]; }

-(void) connectionDidFinishLoading:(NSURLConnection *) connection {
NSError *error;
UIImageView *image1;
NSMutableArray *coleccion=[[NSMutableArray alloc] init];
NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:dataJSON options:kNilOptions error:&error];
NSArray *data = [dic objectForKey:@"data"];
if (!dic) {
    NSLog(@"Error parsing JSON");
} else {
    for(NSDictionary *item in [dic objectForKey:@"data"]) {
        for(NSDictionary *attachment in [item objectForKey:@"images"]) {
            NSString *nombre = [attachment objectForKey:@"source"];
            NSURL * imageURL = [NSURL URLWithString:nombre];
            NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
            image1 = [UIImage imageWithData:imageData];
            [items addObject:image1];
        }
    }
}
//[self.view setNeedsDisplay];
} 
```

最后我用收藏视图创建了我的画廊：

```
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
return [items count]*5;
}

-(UICollectionViewCell )collectionView:(UICollectionView )collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{
  static NSString *identifier = @"CollectionCell";
  UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];
  UIImageView *imageView = (UIImageView *)[cell viewWithTag:1];
  imageView.image = [items objectAtIndex:indexPath.row%1];
  return cell;
} 
```

现在，当我运行应用程序时没有加载任何图像，为什么？我如何解决它以显示图像？练习几乎等于：[http](http://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial) ://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial 不同之处在于我想下载 facebook 图形的图像，而不是已经将它们加载到项目中

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:47:12.700

我在这里看到的主要问题是您的项目需要时间来加载 - 在主线程上加载它们没有任何意义，因为这只会导致 UI 无响应。如果您正在寻找不在主线程上执行的一行代码，它将是：

```
 NSData * imageData = [NSData dataWithContentsOfURL:imageURL]; 
```

另一个（相关）问题是 collectionView 委托在项目准备好之前调用“cellForItemAtIndexPath”和“numberOfItemsInSection”。您需要在 UICollectionView 实例上执行“reloadData”，以便在新下载的项目准备就绪并插入项目数组后出现。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:45:36.083

我有这个，因为我的物品需要时间来加载，而且加载它们没有任何意义。我的新闻方法是：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSOperationQueue *queue = [[NSOperationQueue alloc]init];
NSInvocationOperation *websOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(loadImages) object:nil];
[queue addOperation:websOperation];
}

-(void)loadImages{
NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/NBAStoreNYC/photos"];
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:30];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
if (connection) {
    NSLog(@"Connecting...");
    dataJSON = [[NSMutableData alloc] init];
} else {
    NSLog(@"ERROR: Unable to create connection.");
}
} 
```

但方法：

```
-(void) connectionDidFinishLoading:(NSURLConnection *) connection {
NSError *error;
UIImageView *image1;
NSMutableArray *coleccion=[[NSMutableArray alloc] init];

NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:dataJSON options:kNilOptions error:&error];
//con esto saco las imagenes de la url
NSArray *data = [dic objectForKey:@"data"];
if (!dic) {
    NSLog(@"Error parsing JSON");
} else {
    for(NSDictionary *item in [dic objectForKey:@"data"]) {
        for(NSDictionary *attachment in [item objectForKey:@"images"]) {
            NSString *nombre = [attachment objectForKey:@"source"];
            NSLog(@"%@", nombre);
            NSURL * imageURL = [NSURL URLWithString:nombre];
            NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
            image1 = [UIImage imageWithData:imageData];
            [items addObject:image1];
        }
    }
}

//[self.view setNeedsDisplay];
} 
```

不执行，为什么？我已经放了断点，但是这个方法中没有输入。

# mysql - 使用 Spring 和 MySQL 实现 web 应用程序功能的问题

> ID：13891138
> 
> 赞同：0
> 
> 时间：2012-12-15T09:45:02.220
> 
> 标签：mysql, spring, web-applications

我目前正在实现一个 Web 应用程序（一个简单的任务系统）的功能，我有由多个 jsps 组成的 GUI，这些 jsps 使用引导程序看起来不错。我经历了许多教程，例如“如何在 spring 中制作 jdbc 应用程序”或“如何使用 spring 创建简单的 web 应用程序”，但我不知道如何使用 spring 框架制作一个使用数据库中数据的 web 应用程序

为了简单起见..想象一下我的 MySQL 数据库只有一个带有 2 个列的表，一个是 ID，第二个是 NAME。

我需要制作什么文件（类/xmls..etc）以及它们应该包含什么来在 JSP 上显示我的数据库的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:08:18.900

从 git hub 获取示例应用程序，尝试此启动[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

或者这对于[域驱动的设计](http://dddsample.sourceforge.net/)

# android - 如何在 Android 中通过短信发送通话记录？

> ID：13891139
> 
> 赞同：4
> 
> 时间：2012-12-15T09:45:18.920
> 
> 标签：android, sms, calllog

我正在尝试`CallLog`通过短信发送历史记录。那么`CallLog`历史正在显示，`TextView`但短信不起作用。

代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_call_log);
tv = (TextView) findViewById(R.id.call);

    getCallDetails();
}

private void getCallDetails() {
    // TODO Auto-generated method stub
    StringBuffer sb = new StringBuffer();
    Cursor managedCursor = managedQuery( CallLog.Calls.CONTENT_URI,null, null,null, null);
    int number = managedCursor.getColumnIndex( CallLog.Calls.NUMBER ); 
    int type = managedCursor.getColumnIndex( CallLog.Calls.TYPE );
    int date = managedCursor.getColumnIndex( CallLog.Calls.DATE);
    int duration = managedCursor.getColumnIndex( CallLog.Calls.DURATION);
    sb.append( "Call Details :");
    while ( managedCursor.moveToNext() ) {
    String phNumber = managedCursor.getString( number );
    String callType = managedCursor.getString( type );
    String callDate = managedCursor.getString( date );
    Date callDayTime = new Date(Long.valueOf(callDate));
    String callDuration = managedCursor.getString( duration );
    String dir = null;
    int dircode = Integer.parseInt( callType );
    switch( dircode ) {
    case CallLog.Calls.OUTGOING_TYPE:
    dir = "OUTGOING";
    break;

    case CallLog.Calls.INCOMING_TYPE:
    dir = "INCOMING";
    break;

    case CallLog.Calls.MISSED_TYPE:
    dir = "MISSED";
    break;
    }
    sb.append( "\nPhone Number:--- "+phNumber +" \nCall Type:--- "+dir+" \nCall Date:--- "+callDayTime+" \nCall duration in sec :--- "+callDuration );
    sb.append("\n----------------------------------");
    }
    managedCursor.close();

    String str = sb.toString();
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage("5554", null, str, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:55:56.247

因为您的消息字符串长度可能超过一个消息长度，所以使用[smsManager。](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#divideMessage%28java.lang.String%29)如果字符串超出 SMS 大小限制，则用于发送消息的[divideMessage（字符串文本） ：](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#divideMessage%28java.lang.String%29)

```
SmsManager sms = SmsManager.getDefault(); 

if(str.length()>160){
    ArrayList<String> smses = smsManager.divideMessage(str);  

        smsManager.sendMultipartTextMessage("5554", null,
                    smses, null, null);
 }
else{
      sms.sendTextMessage("5554", null, smses, null, null);
 } 
```

并确保您已添加以下权限`AndroidManifest.xml`：

```
 <uses-permission android:name="android.permission.SEND_SMS" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:59:54.017

您的代码运行良好。

```
SmsManager sm=SmsManager.getDefault();

String phoneNumber="xxxxxxxxxx";
String message="test text message";

sm.sendTextMessage(phoneNumber, null, message, null, null); 
```

我认为您需要添加此权限。

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

我试过了，它也向我收取了 1 条发送短信的费用。:)

希望它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T02:36:41.763

发送呼叫登录消息

```
SmsManager sms = SmsManager.getDefault();
ArrayList<String> part = sms.divideMessage(sb.toString());
sms.sendMultipartTextMessage("number to whom u wanna send", null, part, null, null); 
```

现在接收方将其作为一条消息处理

**发送方**

![发送方](../Images/4fb8d5725ead62832b67f3d19929cff1.png)

**接收端**

![接收端](../Images/d1c835b04f8c66d52c53c3ab12935ab7.png)

# python - 缩放的 QPixmap 看起来很糟糕

> ID：13891142
> 
> 赞同：7
> 
> 时间：2012-12-15T09:46:30.277
> 
> 标签：python, pyqt, pyqt4, qpixmap

我有以下小部件：

```
pixmap = QtGui.QPixmap(r'pics\cdaudio.png').scaled(100, 100) 
```

图像从 256x256 缩小。它看起来很波涛汹涌：

![在此处输入图像描述](../Images/9281bc55b1b2924e618e7f5587fec199.png)

如何在 Qt 中平滑地扩展它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T09:57:17.780

使用`transformMode`参数：

```
pixmap = QtGui.QPixmap(r'pics\cdaudio.png').scaled(100, 100, transformMode=QtCore.Qt.SmoothTransformation) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-06T05:20:46.163

根据@iTayb，这是我想出的：

```
// Scale the source to the requested size with 
//  the KeepAspectRatio as aspectMode & SmoothTransformation as mode
*source = source->scaled(width, height, Qt::KeepAspectRatio, Qt::SmoothTransformation);
target->setPixmap(*source); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:30:46.403

如果可能的话，为什么不使用 SVG 格式（以及 Qt SVG 模块）？

# mysql - 统计 Set 类型中成员的出现次数

> ID：13891144
> 
> 赞同：0
> 
> 时间：2012-12-15T09:46:31.643
> 
> 标签：mysql

我有一张这样的桌子：

```
 +----+-----------+---------+
  | ID | monday    | tuesday | 
  +---+-----------+----------+
  |  1 | 1,2,3,4,5 | 3,4,5,6 |
  |  2 | 3,4,5     | 5,6,7   |
  +----+-----------+---------+ 
```

Where`monday`和`tuesday`是 SET 类型的列。每个数字代表一周中给定日期的可用小时数。我想计算每小时可用的条目数，以便查看大多数受访者何时空闲。

例如， on `monday`, 3 的计数为 2，for `tuesday`,3 的计数为 1。我想使用尽可能少的查询。

我已经为此工作了几个小时，但无法弄清楚。任何帮助，将不胜感激！关于如何更好地做到这一点的建议也将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:07:21.013

正如[@PRPGFerret 建议](https://stackoverflow.com/questions/13891144/count-occurence-of-members-in-set-type#comment19137397_13891144)的那样，您确实应该规范化您的架构（请参阅[@BillKarwin 对“*在数据库列中存储逗号分隔列表真的那么糟糕吗？* ”](https://stackoverflow.com/a/3653574/623041)的回答）：

```
CREATE TABLE Hours (Hour TINYINT UNSIGNED NOT NULL);
INSERT INTO Hours (Hour) VALUES
  ( 0),( 1),( 2),( 3),( 4),( 5),( 6),( 7),( 8),( 9),(10),(11),
  (12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23)
;

CREATE TABLE HoursAvailable (
  Day  ENUM(
         'Monday',
         'Tuesday',
         'Wednesday',
         'Thursday',
         'Friday',
         'Saturday',
         'Sunday'
       ) NOT NULL,
  ID   BIGINT  UNSIGNED NOT NULL,
  Hour TINYINT UNSIGNED NOT NULL,
  PRIMARY KEY (Hour, Day, ID)
);

INSERT INTO HoursAvailable (Day, ID, Hour)
  SELECT 'Monday', ID, Hour
  FROM   my_table JOIN Hours ON FIND_IN_SET(Hours.Hour, my_table.monday)
UNION ALL
  SELECT 'Tuesday', ID, Hour
  FROM   my_table JOIN Hours ON FIND_IN_SET(Hours.Hour, my_table.tuesday)
;

DROP TABLE Hours;
DROP TABLE my_table; 
```

然后你可以这样做：

```
SELECT Day, COUNT(*) FROM HoursAvailable WHERE Hour = 3 GROUP BY Day; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/0e572/1/0)上查看。

如果不以这种方式规范化您的数据，您可能会做一些相当低效的事情：

```
SELECT SUM(FIND_IN_SET(3, monday )>0),
       SUM(FIND_IN_SET(3, tuesday)>0)
FROM   my_table; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/70397/1/0)上查看。

请注意，正如[@ArielChelsău 所观察到的](https://stackoverflow.com/questions/13891144/count-occurence-of-members-in-set-type#comment19137303_13891144)，星期二的计数`1`不是`0`问题中提到的。

# c++ - 使用动态数组和缓冲区对象绘图

> ID：13891146
> 
> 赞同：0
> 
> 时间：2012-12-15T09:47:26.117
> 
> 标签：c++, opengl, graphics, vertex-buffer, vertex-array

创建顶点数组和索引数组时出现问题。我不知道代码的真正问题是什么，但我想是数组类型的问题，有人可以告诉我吗？

```
#define GL_GLEXT_PROTOTYPES
#include<GL/glut.h>
#include<iostream>
using namespace std;

#define BUFFER_OFFSET(offset) ((GLfloat*) NULL + offset)

const GLuint numDiv = 2;
const GLuint numVerts = 9;
GLuint VAO;

void display(void) {  

  enum vertex {VERTICES, INDICES, NUM_BUFFERS};

  GLuint * buffers = new GLuint[NUM_BUFFERS];

  GLfloat (*squareVerts)[2] = new GLfloat[numVerts][2];
  GLubyte * indices = new GLubyte[numDiv*numDiv*4];

  GLuint delta = 80/numDiv;
  for(GLuint i = 0; i < numVerts; i++)
  {
  squareVerts[i][1] = (i/(numDiv+1))*delta;
  squareVerts[i][0] = (i%(numDiv+1))*delta;
  }

  for(GLuint i=0; i < numDiv; i++){
  for(GLuint j=0; j < numDiv; j++){
      //cada iteracao gera 4 pontos
      #define NUM_VERT(ii,jj) ((ii)*(numDiv+1)+(jj))
      #define INDICE(ii,jj) (4*((ii)*numDiv+(jj)))
      indices[INDICE(i,j)]   = NUM_VERT(i,j);
      indices[INDICE(i,j)+1] = NUM_VERT(i,j+1);
      indices[INDICE(i,j)+2] = NUM_VERT(i+1,j+1);
      indices[INDICE(i,j)+3] = NUM_VERT(i+1,j);
  }
  }

  glGenVertexArrays(1, &VAO);
  glBindVertexArray(VAO);

  glGenBuffers(NUM_BUFFERS, buffers);

  glBindBuffer(GL_ARRAY_BUFFER, buffers[VERTICES]);
  glBufferData(GL_ARRAY_BUFFER, sizeof(squareVerts),
  squareVerts, GL_STATIC_DRAW);
  glVertexPointer(2, GL_FLOAT, 0, BUFFER_OFFSET(0));
  glEnableClientState(GL_VERTEX_ARRAY);

  glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, buffers[INDICES]);
  glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices),
      indices, GL_STATIC_DRAW);

  glClear(GL_COLOR_BUFFER_BIT);
  glColor3f(1.0,1.0,1.0);
  glDrawElements(GL_POINTS, 16, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));
  glutSwapBuffers();
}

void init() 
{
  glClearColor(0.0, 0.0, 0.0, 0.0);
  gluOrtho2D((GLdouble) -1.0, (GLdouble) 90.0, (GLdouble) -1.0, (GLdouble) 90.0);  
}

int main(int argv, char** argc) {

  glutInit(&argv, argc);
  glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
  glutInitWindowSize(500,500);
  glutInitWindowPosition(100,100); 
  glutCreateWindow("myCode.cpp");
  init();
  glutDisplayFunc(display);
  glutMainLoop();

  return 0;  
} 
```

编辑：

这里的问题是绘图根本不起作用。但我没有收到任何错误，这只是不显示我想要显示的内容。即使我将制作顶点的代码放入缓冲区中的不同函数中，这也不起作用。我只是尝试这样做：

```
void display(void) {  

      glBindVertexArray(VAO);  
      glClear(GL_COLOR_BUFFER_BIT);
      glColor3f(1.0,1.0,1.0);
      glDrawElements(GL_POINTS, 16, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));
      glutSwapBuffers();
} 
```

我将其余的代码显示在程序启动时调用的另一个函数中。但问题依旧

编辑2：

在 glBufferData(GL_ARRAY_BUFFER,sizeof(squareVerts),squareVerts,GL_STATIC_DRAW);

sizeof(squareVerts) 应该是 sizeof(GLfloat)*x，与索引相同。

# string - 字符串缩减

> ID：13891149
> 
> 赞同：0
> 
> 时间：2012-12-15T09:47:41.930
> 
> 标签：string, algorithm

现在可能这是一个众所周知的问题：考虑任何字符串 S ，仅包含 3 个字符 (a,b,c)。您可以对这些字符串执行此缩减操作：“将两个连续的不同字符替换为第三个字符，例如 'ab' 可以替换为 'c' 和 'ac' cab 可以替换为 'b'。” 我们可以通过这个操作减少多少？

答案总是 (1,2,string.length) 。

string.length 如果所有字符都相同，则 2 iff count(a) = count(b) = count(c) 在 S. 1 中否则。但我无法证明这一点。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:19:16.990

您通过对*S*的长度进行归纳来证明这种类型的声明。

但是您必须正确地提出索赔，而您还没有。你的主张是

> 答案是| *小号*| 如果所有字符都相同，如果 count(a) = count(b) = count(c) 在*S*中为 2，否则为 1。

考虑字符串`aabb`。您的说法说这可以减少到长度 1，但实际上它只能减少到长度 2：可能的减少序列是`aabb`→ `acb`→`bb`和`aabb`→ `acb`→ `aa`。

获得正确的索赔，您应该能够完成证明。

# c# - 如何将存储过程结果转换为特定类型

> ID：13891161
> 
> 赞同：1
> 
> 时间：2012-12-15T09:48:51.053
> 
> 标签：c#, asp.net, entity-framework

我在 SQL Server 中有一个存储过程并将其转换为我的实体模型中的函数，现在如何将函数的输出转换为 C# 中的给定类型`int,string`等等？

例子：

```
Testentities test=new TestEntities();
object d=test.FunctionTest("Params"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:51:39.830

到一个字符串：

```
Testentities test = new TestEntities();
object d = test.FunctionTest("Params");
string result = d.ToString(); 
```

诠释：

```
Testentities test = new TestEntities();
object d = test.FunctionTest("Params");
int result = Convert.ToInt32(d); 
```

.NET[`Convert`](http://msdn.microsoft.com/en-us/library/system.convert.aspx)类可以转换为许多不同的类型。

但是请注意：**当然**，您需要确定目标类型是正确的类型，即使这样 - 您需要为转换可能失败的事实做好准备 - 把它放在一个`try...catch`块中！

**更新：**在您发现结果实际上是 a`List<object>`之后，您需要执行以下操作：

```
Testentities test = new TestEntities();
object d = test.FunctionTest("Params");

List<string> results = new List<string>();

foreach(object o in d)
{
    results.Add(o.ToString());
} 
```

并且可以对`int`值进行相同的操作（只需`Convert.ToInt32()`在`foreach`循环中使用

# html - Html css 悬停替代

> ID：13891164
> 
> 赞同：1
> 
> 时间：2012-12-15T09:49:18.607
> 
> 标签：html, css

:hover 选择器样式在鼠标悬停时链接。我想当我点击然后显示元素而不是鼠标悬停。我应该使用什么悬停替代方案..`#cssmenu li:hover ul{ display:block; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:35:31.893

仅使用 HTML 和 CSS 的简单方法是基于`:target`伪类：

```
<style>
#cssmenu li ul {
  display: none;
}
#cssmenu :target ul  {
  display: block;
}
 li:hover ul { display:block; }
</style>
<h1>menu with target</h1>
<ul id="cssmenu">
    <li><a id=sub1 href=#sub1>submenu 1
        <ul>
            <li>foo</li>
            <li>bar</li>
        </ul></a>
    </li>
    <li><a id=sub2 href=#sub2>submenu 2
        <ul>
            <li>item A</li>
            <li>item B</li>
            <li>item C</li>
        </ul></a>
    </li>
</ul> 
```

[jsfiddle](http://jsfiddle.net/yucca42/aV5HE/)

但是，`:target`IE 8 和更早版本不支持伪类，因此如果您也希望覆盖它们，则需要使用一些 JavaScript 填充程序，例如[IE7.js](http://code.google.com/p/ie7-js/)或 Selectivizr（或使用完全基于 JavaScript 的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:58:36.600

这是演示的小提琴：http: [//jsfiddle.net/dineshswami/nXGYc/](http://jsfiddle.net/dineshswami/nXGYc/)

HTML：

```
<ul id="cssmenu">
    <li>1</li>
    <li>2
        <ul>
            <li>A</li>
            <li>B</li>
        </ul>
    </li>
</ul> 
```

CSS：

```
ul#cssmenu ul{
display:none;
} 
```

查询：

```
$(document).ready(function () {
    alert("bang");
    $("#cssmenu li").click(function () {
        alert("bang bang");
        $("#cssmenu li ul").show();
    });
}); 
```

# c# - Shapen 在尝试转换 Java 代码时引发 IllegalStateException

> ID：13891168
> 
> 赞同：2
> 
> 时间：2012-12-15T09:49:30.200
> 
> 标签：c#, java, sharpen-tool

我正在尝试使用 Sharpen Tool 将[lucenetransform](http://code.google.com/p/lucenetransform/)代码从 java 移植到 c#。[我在PaulDB.getWords()](http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java)使用了锐化设置信息

当我运行转换过程时，出现以下错误

> !会话 2012-12-15 14:55:21.773 -------------------------------------------------- --------- eclipse.buildId=I20120608-1200 java.version=1.6.0_38 java.vendor=Sun Microsystems Inc. BootLoader 常量：OS=win32, ARCH=x86_64, WS=win32, NL=en_IN Framework参数：-application sharpen.core.application -header C:\adt-bundle-windows\workspace\lucenetransform\header.txt 锐化/src -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\junit\junit -3.8.2.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\junit_4\junit-4.5.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\copylibs\org -netbeans-modules-java-j2seproject-copylibstask.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\lucene-core-3.3.0.jar @sharpen-all-options 命令行参数：-数据 C：\adt-bundle-windows\workspace\lucenetransform\sharpen -application sharpen.core.application -header C:\adt-bundle-windows\workspace\lucenetransform\header.txt 锐化/src -cp C:\adt-bundle-windows \workspace\lucenetransform\lib\junit\junit-3.8.2.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\junit_4\junit-4.5.jar -cp C:\adt-bundle-windows \workspace\lucenetransform\lib\copylibs\org-netbeans-modules-java-j2seproject-copylibstask.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\lucene-core-3.3.0.jar @sharpen -所有选项\adt-bundle-windows\workspace\lucenetransform\lib\copylibs\org-netbeans-modules-java-j2seproject-copylibstask.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\lucene-core-3.3 .0.jar @sharpen-all-options\adt-bundle-windows\workspace\lucenetransform\lib\copylibs\org-netbeans-modules-java-j2seproject-copylibstask.jar -cp C:\adt-bundle-windows\workspace\lucenetransform\lib\lucene-core-3.3 .0.jar @sharpen-all-options
> 
> !ENTRY org.eclipse.osgi 4 0 2012-12-15 14:55:28.110 !MESSAGE 应用程序错误!STACK 1 java.lang.IllegalStateException at sharpen.core.CSharpBuilder.pushExpression(CSharpBuilder.java:3364) at sharpen.core .CSharpBuilder.visit(CSharpBuilder.java:2171) 在 org.eclipse.jdt.core.dom.StringLiteral.accept0(StringLiteral.java:136) 在 org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java :2514) 在 org.eclipse.jdt.core.dom.AssertStatement.accept0(AssertStatement.java:167) 的 org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2562)。 jdt.core.dom.ASTNode.accept(ASTNode.java:2514) 在 org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2585) 在 org.eclipse.jdt.core.dom.Block。在 org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514) 上的 accept0(Block.java:136) 在sharpen.core。CSharpBuilder.visitBlock(CSharpBuilder.java:1865) 在sharpen.core.CSharpBuilder.processBlock(CSharpBuilder.java:1826) 在sharpen.core.CSharpBuilder.visitBodyDeclarationBlock(CSharpBuilder.java:1793) 在sharpen.core.CSharpBuilder.mapMethodParts(CSharpBuilder .java:1540) 在 org.eclipse.jdt.core.dom.MethodDeclaration.accept0( MethodDeclaration.java:489) at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514) atsharpen.core.CSharpBuilder.visit(CSharpBuilder.java:3384) atsharpen.core.CSharpBuilder.mapMembers (CSharpBuilder.java:760) 在sharpen.core.CSharpBuilder.processTypeDeclaration(CSharpBuilder.java:373) 在sharpen.core.CSharpBuilder$2.run(CSharpBuilder.java:284) at sharpen.core.framework.DynamicVariable.using(DynamicVariable.java:46) at sharpen.core.CSharpBuilder.visit(CSharpBuilder.java:279) at org.eclipse.jdt.core.dom.TypeDeclaration.accept0 (TypeDeclaration.java:467) 在 org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514) 在 org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2585) 在org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:219) at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514) at sharpen.core.CSharpBuilder.run( CSharpBuilder.java:134) 在sharpen.core.SharpenConversion$2.run(SharpenConversion.java:121) 在sharpen.core.framework.DynamicVariable.using(DynamicVariable.java:46) 在sharpen.core.framework.Environments.runWith( Environments.java:23) 在sharpen.core.SharpenConversion。convert(SharpenConversion.java:119) at sharpen.core.SharpenConversion.run(SharpenConversion.java:105) 在 sharpen.core.SharpenConversionBatch.convertCompilationUnit(SharpenConversionBatch.java:72) 在 sharpen.core.framework.ConversionBatch.convertPair(ConversionBatch .java:79) 在sharpen.core.framework.ConversionBatch.run(ConversionBatch.java:71) 在sharpen.core.SharpenApplication.convertTo(SharpenApplication.java:96) 在sharpen.core.SharpenApplication.convert(SharpenApplication.java: 83) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java) 上的 sharpen.core.SharpenApplication.safeRun(SharpenApplication.java:71) :196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher。在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java: 353) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629 ) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438) 在 org.eclipse.equinox。org.eclipse.core.launcher.Main.main(Main.java:34) 上的 launcher.Main.main(Main.java:1414)

eclipse控制台显示如下信息

> NamespaceAndIdentifiers [exec] 本机类型系统模式打开。[exec] 组织使用模式开启。[exec] 头文件：C:\adt-bundle-windows\workspace\lucenetransform\header.txt [exec] AbstractPipedTransformer.java [exec] AbstractTransformedIndexOutput.java [exec] /sharpened/src/org/apache/lucene/store/ transform/AbstractTransformedIndexOutput.java(227)：未解析的 cref 目标 [exec] ByteIndexInput.java [exec] CompressedIndexDirectory.java [exec] DataDecryptor.java [exec] DataEncryptor.java [exec] DataTransformer.java [exec] DecompressionChunkCache.java [exec ] DeflateDataTransformer.java [exec] InflateDataTransformer.java [exec] LRUChunkCache.java [exec] NullTransformer.java [exec] ReadDataTransformer。java [exec] /sharpened/src/org/apache/lucene/store/transform/SequentialTransformedIndexOutput.java(63)：找不到参数“pLevel”。[exec] /sharpened/src/org/apache/lucene/store/transform/SequentialTransformedIndexOutput.java(64)：找不到参数“deflateCount”。[exec] ReadPipeTransformer.java [exec] SequentialTransformedIndexOutput.java [exec] SharedBufferCache.java [exec] StoreDataTransformer.java [exec] StorePipeTransformer.java [exec] StreamIndexOutput.java [exec] TransformedDirectory.java [exec] TransformedIndexInput.java [exec ] 错误：null [exec] java.lang.IllegalStateException [exec] at sharpen.core.CSharpBuilder.pushExpression(CSharpBuilder.java:3364) [exec] at sharpen.core.CSharpBuilder.visit(CSharpBuilder.java: core.CSharpBuilder.visitBodyDeclarationBlock(CSharpBuilder.java:1793) [exec] 转换在 4468 毫秒内完成。[exec] 在 sharpen.core.CSharpBuilder.mapMethodParts(CSharpBuilder.java:1540) [exec] 在 sharpen.core.CSharpBuilder.processMethodDeclaration(CSharpBuilder.java:1495) [exec] 在 sharpen.core.CSharpBuilder.visit(CSharpBuilder. java:1346) [exec] 在 org.eclipse.jdt.core.dom.MethodDeclaration.accept0(MethodDeclaration.java:489) [exec] 在 org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java: 2514）[exec]在sharpen.core.CSharpBuilder.visit（CSharpBuilder.java:3384）[exec]在sharpen.core.CSharpBuilder.mapMembers（CSharpBuilder.java:760）[exec]在sharpen.core.CSharpBuilder.processTypeDeclaration（ CSharpBuilder.java:373) [exec] at sharpen.core.CSharpBuilder$2。invoke(DelegatingMethodAccessorImpl.java:25) [exec] at java.lang.reflect.Method.invoke(Method.java:597) [exec] at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629) [exec] 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) [exec] 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438) [exec] 在 org. eclipse.equinox.launcher.Main.main(Main.java:1414) [exec] at org.eclipse.core.launcher.Main.main(Main.java:34) [exec] 发生错误。查看日志文件 [exec] C:\adt-bundle-windows\workspace\lucenetransform\sharpen.metadata.log。launcher.Main.basicRun(Main.java:584) [exec] at org.eclipse.equinox.launcher.Main.run(Main.java:1438) [exec] at org.eclipse.equinox.launcher.Main.main( Main.java:1414) [exec] at org.eclipse.core.launcher.Main.main(Main.java:34) [exec] 发生错误。查看日志文件 [exec] C:\adt-bundle-windows\workspace\lucenetransform\sharpen.metadata.log。launcher.Main.basicRun(Main.java:584) [exec] at org.eclipse.equinox.launcher.Main.run(Main.java:1438) [exec] at org.eclipse.equinox.launcher.Main.main( Main.java:1414) [exec] at org.eclipse.core.launcher.Main.main(Main.java:34) [exec] 发生错误。查看日志文件 [exec] C:\adt-bundle-windows\workspace\lucenetransform\sharpen.metadata.log。
> 
> BUILD FAILED C:\adt-bundle-windows\workspace\lucenetransform\run-sharpen.xml:59：执行此行时出现以下错误：C:\adt-bundle-windows\workspace\lucenetransform\run-sharpen.xml :20：执行返回：13
> 
> 总时间：10秒

似乎无法从 Google 找到有关此问题的任何帮助。任何帮助将不胜感激。

# php - 检查重定向地址是网站本身 - PHP

> ID：13891169
> 
> 赞同：0
> 
> 时间：2012-12-15T09:49:44.910
> 
> 标签：php

我有一个多语言网站，更改语言功能的工作方式如下：

```
change_lang.php?lang=en&return=www.example.com/pages/etc 
```

在 change_lang.php 中我读取了`$_GET['return']`然后`$return_addr = $_GET['return']`使用`header("location:" . $return_addr)`将用户发送回他所在的地方，现在想象有人想污染返回地址：

```
change_lang.php?lang=en&return=www.HACKER-SITE.com/virus.exe 
```

为了防止这种情况，我想将`$return_addr`值限制为仅限本地机器（服务器），我的代码是：

```
<?php
    if(substr(BASE_URL, 0, 8) == 'https://'){
        $start_len = 8;
        $return_http = 'https://';
    } else{
        $start_len = 7;
        $return_http = 'http://';
    }
    $http_extracted_base_url = substr(BASE_URL, $start_len);
    if(substr($http_extracted_base_url, 0, 10) == substr($return, 0, 10)){
        // OK
    }else{
        // NOT OK
        exit();
    }
    ?> 
```

`BASE_URL`是我的域的定义值，例如`http://example.com`，当用户在他的地址中没有使用“www”时，上面的代码运行良好，但是当他这样做时，我需要检查我的代码上的另一件事，所有这些都必须有一个更好的解决方案，这就是我的问题；我应该如何检查返回 URL 是否返回到网站本身，我不想检查 http `s`r www，或者我们可能希望将来在我们的网站上停放另一个域，所以一些用户可能使用第二个地址并且上面的代码失败，因为`BASE_URL`被定义为第一个域。

PS：我不要`PING`返回地址的域，服务器上禁用了执行功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:55:39.670

你可以做的是编写一个函数，接收 2 个 URL，一个是 the ，`return=URL`另一个是 say.. `$_SERVER['PHP_SELF']`//`$_SERVER['REQUEST_URI']``$_SERVER['DOCUMENT_ROOT']`

例子：

```
function secure_url($server_url, $get_url) { 
    //do function stuff
    //check URLs to see if the return parameter matches the URL of your site
    //might have to strip any extra URL data for comparison
    if ($bad_url) exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:58:45.250

我建议使用`$_SERVER['HTTP_REFERER']`或您定义的`BASE_URL`

```
<?php

    // your language handling code

    $redirect = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : BASE_URL;
    header("Location: {$redirect}\r\n");
    exit; 
```

我要补充一点，虽然这可以被操纵（所以我被告知）肯定它会影响的唯一人是操纵该标题的用户，因为他们正在被重定向？

# jquery - Jquery 结合 has() 和 is()

> ID：13891171
> 
> 赞同：1
> 
> 时间：2012-12-15T09:50:20.163
> 
> 标签：jquery, addclass

我正在构建一个下拉列表，需要 jquery 来更改一些样式类。这段代码运行良好，基本上将一个类添加到`li`有一个`ul`孩子的

```
$('#nav ul li:has(ul)').hover(
    function(){
        $(this).addClass('dropdown')
    },
    function(){
        $(this).removeClass('dropdown')
    }
); 
```

我遇到的问题是，如果有人单击此链接并且不移动光标，则在鼠标离开元素并再次出现`addClass`之前不会触发。`.hover`

您可以在此处查看问题[单击“行业部门”链接并且不要移动鼠标](http://www.on-sitephysio.com.au/industry-sectors)

我找到`.is(":hover"`了），但无法弄清楚如何让它与当前的`hover()`. 我可以让它们保持相同的功能还是不是那么简单？

# blackberry - Blackberry facebook sdk:Loginscreenshowing空白白屏

> ID：13891175
> 
> 赞同：0
> 
> 时间：2012-12-15T09:50:53.847
> 
> 标签：blackberry

我已经使用 facebook 草莓 sdk 将 facebook 集成到我的黑莓应用程序中。它在成功的前几天工作正常，但现在显示空白屏幕。我认为这是使用 FB 与 BIS、MOBILE、WIFI 网络的连接流问题。请建议我解决方案。

# css - CSS边框小于1px

> ID：13891177
> 
> 赞同：132
> 
> 时间：2012-12-15T09:51:13.403
> 
> 标签：css, border

> **可能重复：**
> [HTML：亚像素边框](https://stackoverflow.com/questions/5709698/html-sub-pixel-border)

默认`border:1px`值太大。但是，`border: 0.5px solid;`不工作。是否有 CSS 解决方案可以使边框大小减半？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-12-15T10:11:29.303

像素是渲染某些东西的最小单位值，但是您可以通过修改颜色来用视觉错觉来欺骗厚度（眼睛也只能看到[一定的分辨率](http://www.clarkvision.com/articles/eye-resolution.html)）。

这是[一个测试](http://jsfiddle.net/F7kpe/)来证明这一点：

```
div { border-color: blue; border-style: solid; margin: 2px; }

div.b1 { border-width: 1px; }
div.b2 { border-width: 0.1em; }
div.b3 { border-width: 0.01em; }
div.b4 { border-width: 1px; border-color: rgb(160,160,255); }
```

```
<div class="b1">Some text</div>
<div class="b2">Some text</div>
<div class="b3">Some text</div>
<div class="b4">Some text</div>
```

### 输出

![在此处输入图像描述](../Images/72ae8f2ceb1f648695800d046c8e361e.png)

这给人一种错觉，即最后`DIV`一个边框宽度较小，因为蓝色边框与白色背景融合得更多。

* * *

## 编辑：替代解决方案

Alpha 值也可用于模拟相同的效果，而无需计算和操作 RGB 值。

```
.container {
  border-style: solid;
  border-width: 1px;

  margin-bottom: 10px;
}

.border-100 { border-color: rgba(0,0,255,1); }
.border-75 { border-color: rgba(0,0,255,0.75); }
.border-50 { border-color: rgba(0,0,255,0.5); }
.border-25 { border-color: rgba(0,0,255,0.25); }
```

```
<div class="container border-100">Container 1 (alpha = 1)</div>
<div class="container border-75">Container 2 (alpha = 0.75)</div>
<div class="container border-50">Container 3 (alpha = 0.5)</div>
<div class="container border-25">Container 4 (alpha = 0.25)</div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T09:52:40.080

在屏幕上画一条比一个像素还细的线是不可能的。尝试为边框使用更微妙的颜色。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T09:54:24.397

尝试根据您的需要以 % 为边框，例如 0.1%。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-15T10:08:29.320

您的屏幕可以显示的最小宽度为 1 像素。所以它不可能显示小于 1px。1 个像素只能有 1 种颜色，不能拆分。

# winapi - 如何捕捉鼠标移动到屏幕边界之外

> ID：13891180
> 
> 赞同：0
> 
> 时间：2012-12-15T09:52:12.470
> 
> 标签：winapi, mouse

我的应用程序在按下事件时捕获鼠标，并依赖于与当前鼠标指针位置（可见指针）不直接相关的鼠标移动。所以数学是基于鼠标的初始点和相对点，视觉反馈在视觉上没有链接到可见的鼠标指针，所以指针也可以完全隐藏。但是当我到达屏幕边界时，传入的坐标被剪裁了。它看起来很合理，因为指针也不移动，但我想继续获取有关鼠标相对移动的信息，即使可见指针到达屏幕边界。这可能吗？也许可以从驱动程序访问原始鼠标信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:57:49.057

基本上[原始输入 Api](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864%28v=vs.85%29.aspx)服务于我的目标。需要使用 RegisterRawInputDevices 注册窗口并获取 WM_INPUT 消息。传入的数据通过不受屏幕边界限制的相对鼠标移动。

# android - Android中的静态单例生命周期

> ID：13891186
> 
> 赞同：30
> 
> 时间：2012-12-15T09:53:10.113
> 
> 标签：android, singleton

我有一些不清楚的情况：

在最后一个引用持有 Activity 被销毁后，静态单例是否会被垃圾收集？因为 Application 中不再有对单例实例的引用。那么我可以依赖单身人士吗？

通过官方[Android 文档](http://developer.android.com/reference/android/app/Application.html)：

> 通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。

通过一些帖子：

[https://web.archive.org/web/20160729201921/http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](https://web.archive.org/web/20160729201921/http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

> 在开发应用程序时，**我发现有时某些绑定到活动的静态变量碰巧未初始化，即使它们之前已初始化**！我认为当一个静态变量被初始化时，它会在应用程序的整个生命周期中保持不变，但情况似乎并非如此。

换句话说，如果没有任何东西持有对我的静态单例类的引用，那么如何防止它被垃圾收集和销毁？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-15T10:03:02.970

不，因为如果它是一个单例，它作为一个`static`字段存储在它的类中，并且通常单例不会被客户端破坏，即你不会放置一个静态方法`deleteInstance()`来设置引用，`null`这样如果没有其他人使用它，它就是合格的用于垃圾收集。对于静态字段，垃圾回收会在加载该类的类加载器被丢弃时发生。

由于这个原因，关键字`static`本身可能会导致内存泄漏，如果它引用了 Activity 对象，所以在使用时要非常小心。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T10:02:53.127

是的。每次你离开你的应用程序时（例如你的应用程序打开相机应用程序来拍照，或者打开浏览器打开一个链接，或者用户只是按下后退按钮），你的`Application`对象就有可能被销毁并重新创建当您导航回您的应用程序时。

如果你有一个，你应该在你的自定义类的一个`static {}`块中初始化任何静态变量，或者在你的类中初始化它们以确保它们不会为空。`Application``Activities`

请注意，在硬件较弱、内存较低的设备上更有可能遇到此问题，但您应该期望它可能发生在任何设备上。

底线是，在 android 中，不要期望您的静态变量会随时保留在内存中。始终检查它们是否存在，并在必要时在正确的位置重新初始化它们。

**编辑：**

我知道已经很久了，我完全忘记了这个线程，无论如何，这里是官方 Android 生命周期文档的来源：

[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T10:07:25.977

您无法控制 Java 对象何时被垃圾回收。当一个对象不再有（非循环）引用时，它就有资格进行垃圾回收。此外，使用 Android，您无法控制 Activity 何时从内存中删除。

> 单例应该代表始终存在的东西。

*   您不能强制对任何对象进行垃圾收集；您可以*请求*垃圾收集器运行，[`System.gc()`](http://download.oracle.com/javase/6/docs/api/java/lang/System.html#gc%28%29)但这只是一个请求。

*   如果您想使“单例”符合垃圾收集的条件，您可能希望有一种方法将静态变量设置为 null（并希望没有其他任何东西获取引用的副本）。显然，下次有人要求实例时，就需要重新创建它。当然，此时它并不是真正的单例。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-12-30T11:37:20.520

即使活动被销毁，所有单例对象都将保留。

# ruby-on-rails - 如何用 git 组织 50 个相关的 rails 应用程序？

> ID：13891188
> 
> 赞同：3
> 
> 时间：2012-12-15T09:53:16.947
> 
> 标签：ruby-on-rails, git, github

我正在着手使用 50 个相关的 Rails 应用程序，它们之间会有细微的差异 - css 可能会有所不同，并且为了 SEO 等，每个应用程序可能会有不同的路线和不同的视图标题等。

但是当我更改其他内容时，我希望所有 50 个应用程序都保持一致。所以基本上我将不得不拥有自己的 cms，每个网站都会有不同的设置。

我确定我不是第一个遇到这个问题的人。在使用 Rails、git、github 和 heroku 时，我将如何组织它，以便在我部署时，所有应用程序都会更新并保持一致，但仍保持自己的设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:41:20.163

我分叉了一个基础项目并将其保持为“上游”。我在我的开发环境中克隆了分叉的项目并将其保留为“原点”。所以我的开发环境有起源和上游。

当我做一些影响所有分叉项目的事情时，我会在上游进行更改，然后进入每个项目，从上游提取并合并。

您还可以拥有上游层次结构，并使它们与原始上游保持同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:28:20.570

如果这些纯粹是配置文件，最好的方法是遵循 Heroku 页面“[配置和配置变量](https://devcenter.heroku.com/articles/config-vars)”：

不要将这些文件放在 Git 存储库本身中。

> 使用 Heroku CLI 的`config`、`config:add`和`config:get`管理`config:remove`您的配置变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:28:57.607

如果可能的话，我非常喜欢只维护一个项目。如果它只是应用程序的（用户控制的）样式，您可能会采用 basecamp 样式中的多租户方法。您的应用程序将显示不同的端点，例如按子域区分，您也可以将不同的顶级域指向。然后需要将应用程序的可变部分存储在数据库中，例如样式、布局以及您拥有的任何用户控制的内容。[这个问题的答案中](https://stackoverflow.com/questions/4729282/best-way-to-handle-dynamic-css-in-a-rails-app)概述了一种方法，尽管肯定有更多方法。

# android - 如果 GPS 不可用，Android 回退到 ACCURACY_COARSE

> ID：13891190
> 
> 赞同：0
> 
> 时间：2012-12-15T09:53:57.083
> 
> 标签：android, geolocation, gps

我正在使用 Criteria 对象来获得像这样的最佳提供者

```
final boolean isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
if(isGpsEnabled) {
      Criteria crit = new Criteria();
      crit.setAccuracy(Criteria.ACCURACY_FINE);
      crit.setCostAllowed(true);
      crit.setPowerRequirement(Criteria.NO_REQUIREMENT);
      crit.setSpeedRequirement(false);
      String provider = locationManager.getBestProvider(criteria, true);
      locationManager.requestLocationUpdates(provider, 600000, 0, new myLocationListener());
} 
```

在我的手机（Android 4.1）上，我同时启用了“使用 GPS 卫星”和“使用无线网络”选项。现在，当我在户外时，上面的代码效果很好，它给了我 GPS 位置。

但是，当我在室内时，它不会恢复为“网络”提供商。它只是不断尝试通过 GPS 获取位置，但从未得到它（我等了 1 分钟左右）

当我将 Criteria 的代码更改为使用 Criteria.ACCURACY_COARSE 时，它使用“网络”提供程序。

我如何让它首先尝试 GPS（因为它已启用），并且因为我们在室内，所以它将无法连接到卫星然后回退到使用“网络”。我不能轻易地让它工作。*我再次声明，GPS 已启用，但无法访问卫星，因此希望它获取网络位置。*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:10:35.457

解决方案是创建位置管理器并附加 2 个侦听器以接收更新。一个用于 GPS，另一个用于 NETWORK。您将其设置为相当快地接收更新（或者根据您自己的情况，我只需要获取位置）然后创建一个方法来比较 GPS 和网络的位置并找出哪个更准确。您最多执行 3 次以平均获得哪个返回最准确的位置，然后停止位置更新。

# c# - C# 选项以最好地使用具有 1000 个函数的 C++ DLL

> ID：13891192
> 
> 赞同：1
> 
> 时间：2012-12-15T09:54:15.880
> 
> 标签：c#, c++, dll, pinvoke, wrapper

我有大约 5 个 C++ DLL，它们有数千个函数等等。所以问题是，我有点爱上了 C# 中的 WPF（据我所知）。但这是另一种语言，所以在做了一些研究后，我发现我可以创建一个包装器，所以我做到了（包装器是在 C++/CLI 中创建的）。包装器有一些转换，它工作得很好。我也听说过 Pinvoke，但我对所有这些的问题是，如果我没有时间转换数千个函数和变量怎么办？那我该怎么办？有什么快速的方法吗？

PS。我正在使用 Visual Studio 2012

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:57:55.700

您可能想查看[SWIG](http://www.swig.org/Doc1.3/CSharp.html)。

> SWIG 是一种软件开发工具，它将用 C 和 C++ 编写的程序与各种高级编程语言连接起来。

# java - 无法在 webView Android 中打开 Twitter

> ID：13891193
> 
> 赞同：3
> 
> 时间：2012-12-15T09:54:16.970
> 
> 标签：java, android, webview

我正在使用以下方法打开 Facebook、Twitter 和网页：

```
private void showAddDialog(String ur) {

        final Dialog nagDialog = new Dialog(this,
                android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
        nagDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        nagDialog.setContentView(R.layout.airwebview);

        final WebView webView = (WebView) nagDialog
                .findViewById(R.id.webView_AboutWebsite);
        Button mCancelButton = (Button) nagDialog
                .findViewById(R.id.button_CancelButton);

        mCancelButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                nagDialog.dismiss();
            }
        });

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings()
                .setUserAgentString("silly_that_i_have_to_do_this");
        webView.getSettings().setDomStorageEnabled(true);
        webView.loadUrl(ur);

        nagDialog.show();
    } 
```

我已经能够成功启动 Facebook 和其他网站，但无法打开`WebView`.

到目前为止，我已使用以下方法打开 Twitter，但尚未成功：

`webView.getSettings().setDomStorageEnabled(true);`

```
mWebView.getSettings().setUserAgentString("Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543a Safari/419.3"); 
```

这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:20:38.763

我检查了您的代码，在我设置了覆盖 shouldOverrideUrlLoading 方法以加载重定向 URL 的 WebViewClient 后，它在我的手机上工作正常。

```
private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    } 
```

当我没有添加 WebViewClient 时，推特让我重定向到默认的网络浏览器，在我的例子中是 Chrome。

检查这是否对您有帮助。

# c# - 如何获得所有可能的 3 个字母排列？

> ID：13891200
> 
> 赞同：11
> 
> 时间：2012-12-15T09:55:11.053
> 
> 标签：c#, algorithm, alphabetical

> **可能重复：**
> [列出字符串/整数的所有排列](https://stackoverflow.com/questions/756055/listing-all-permutations-of-a-string-integer)

例如，

```
aaa .. aaz .. aba .. abz .. aca .. acz .. azz .. baa .. baz .. bba .. bbz .. zzz 
```

基本上，想象一下计算二进制，但不是从 0 到 1，而是从 a 到 z。

我一直试图让这个工作无济于事，而且公式变得相当复杂。我不确定是否有更简单的方法来做到这一点。

## 编辑

我现在有这样的东西，但它并不完全存在，我不确定是否有更好的方法：

```
private IEnumerable<string> GetWordsOfLength(int length)
{
    char letterA = 'a', letterZ = 'z';

    StringBuilder currentLetters = new StringBuilder(new string(letterA, length));
    StringBuilder endingLetters = new StringBuilder(new string(letterZ, length));

    int currentIndex = length - 1;

    while (currentLetters.ToString() != endingLetters.ToString())
    {
        yield return currentLetters.ToString();

        for (int i = length - 1; i > 0; i--)
        {
            if (currentLetters[i] == letterZ)
            {
                for (int j = i; j < length; j++)
                {
                    currentLetters[j] = letterA;
                }

                if (currentLetters[i - 1] != letterZ)
                {
                    currentLetters[i - 1]++;
                }
            }
            else
            {
                currentLetters[i]++;

                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-15T10:22:19.683

对于可变数量的字母组合，您可以执行以下操作：

```
var alphabet = "abcdefghijklmnopqrstuvwxyz";
var q = alphabet.Select(x => x.ToString());
int size = 4;
for (int i = 0; i < size - 1; i++)
    q = q.SelectMany(x => alphabet, (x, y) => x + y);

foreach (var item in q)
    Console.WriteLine(item); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-15T09:59:52.190

```
var alphabet = "abcdefghijklmnopqrstuvwxyz";
//or var alphabet = Enumerable.Range('a', 'z' - 'a' + 1).Select(i => (char)i);

var query = from a in alphabet
            from b in alphabet
            from c in alphabet
            select "" + a + b + c;

foreach (var item in query)
{
    Console.WriteLine(item);
} 
```

***_ _*编辑*_ _***

对于一般解决方案，您可以在[此处使用 CartesianProduct](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

```
int N = 4;
var result = Enumerable.Range(0, N).Select(_ => alphabet).CartesianProduct();
foreach (var item in result)
{
    Console.WriteLine(String.Join("",item));
} 
```

* * *

```
// Eric Lippert’s Blog
// Computing a Cartesian Product with LINQ
// http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx
public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences)
{
    // base case: 
    IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
    foreach (var sequence in sequences)
    {
        var s = sequence; // don't close over the loop variable 
        // recursive case: use SelectMany to build the new product out of the old one 
        result =
            from seq in result
            from item in s
            select seq.Concat(new[] { item });
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T10:08:03.480

这是一个非常简单的解决方案：

```
for(char first = 'a'; first <= (int)'z'; first++)
    for(char second = 'a'; second <= (int)'z'; second++)
        for(char third = 'a'; third <= (int)'z'; third++)
            Console.WriteLine(first.ToString() + second + third); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-15T10:00:15.277

对于 3 个“数字”，您有 26^3 个计数。只需在三个循环中从“a”迭代到“z”。

# php - 使用 AnnotationReader 创建的 Zend Framework 2 表单即使数据无效也是有效的

> ID：13891201
> 
> 赞同：2
> 
> 时间：2012-12-15T09:55:14.643
> 
> 标签：php, zend-form, zend-framework2

我有一个表单，我使用这样的注释生成器创建它：

```
$builder  = new AnnotationBuilder();
$fieldset = $builder->createForm(new \Application\Entity\Example());  
$this->add($fieldset);
$this->setBaseFieldset($fieldset); 
```

在控制器中，一切都是标准的：

```
$entity = new \Application\Entity\Example();
$form = new \Application\Form\Example();
$form->bind($entity);
if($this->getRequest()->isPost()) {
    $form->setData($this->getRequest()->getPost());
    if($form->isValid()) {
        // save ....
    }
} 
```

问题是，$form->isValid() 总是返回 true，即使提交的是空的或无效的表单。更奇怪的是，表单元素的错误信息都被设置了，暗示它们是无效的。

我查看了 ZF2 Form / InputFilter / Input 类，发现： Input->isValid() 被调用了两次：一次在 Form->isValid() 中，一次在 Form->bindValues() 中Input->isValid() ($this->getValidatorChain) 中的验证器链为空，在第二次调用（来自 bindValues）中它是正确的。

可能出了什么问题？

PS。使用开发版本 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:27:44.710

我发现是什么原因造成的。

事实证明，注释构建器从未打算以这种方式工作。注释构建器创建了一个 \Zend\Form\Form 实例，我将其作为字段集放置在我的基本表单中。我不知道为什么，但这导致基本表单无法验证。所以为了使上面的代码工作，不应该有额外的 Form 类，在控制器中我们应该有：

```
$entity = new \Application\Entity\Example();
$builder  = new AnnotationBuilder();
$form = $builder->createForm($entity);  
$form->bind($entity);
if($this->getRequest()->isPost()) {
    $form->setData($this->getRequest()->getPost());
    if($form->isValid()) {
        // save ....
    }
} 
```

或许未来 AnnotationBuilder 中会有一个 createFieldset 函数，但目前看来这是唯一的方法。希望这可以帮助某人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T22:50:10.933

我也遇到同样的问题。当我使用注释在表单中创建字段集*@Annotation\Type("fieldset")*时，**isValid()**始终返回 true。

查看**Zend\Form\Factory**的代码，当我们创建 Fieldset 时，**configureFieldset()**函数不会调用**prepareAndInjectInputFilter()** ，即使在表单规范 中有*input_filter的地方也是如此。*

只有在我们创建表单时，**Zend\Form\Factory::configureForm()**函数才会调用**prepareAndInjectInputFilter()**。

因此，输入过滤器和验证组似乎仅由 AnnotationBuilder 在其*类型*设置为创建表单时创建。

我自己创建了一个输入过滤器，通过将下面的代码添加到我的表单中的注释：

```
 $fspec = ArrayUtils::iteratorToArray($builder->getFormSpecification($entity));
    $outerfilter = new InputFilter();
    $iffactory = new \Zend\InputFilter\Factory ();
    $filter  = $iffactory->createInputFilter($fspec['input_filter']);
    $outerfilter->add($filter, 'shop');  // Use the name of your fieldset here.
    $this->setInputFilter($outerfilter); 
```

# regex - 如果前缀与后缀相同，如何匹配正则表达式

> ID：13891215
> 
> 赞同：1
> 
> 时间：2012-12-15T09:57:05.363
> 
> 标签：regex

我有字符串`asdf-zxcv-qwer-`

`-` 我想替换我正在使用的所有单词之间的所有出现`/-[a-z]+-/`It match only `zxcv`，因为连字符 before`qwer`用作前缀 after `zxcv`。如何使它同时匹配`zxcv`和`qwer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:01:06.647

使用一个[断言](http://php.net/regexp.reference.assertions)，可以是look-behind ( `(?<=…)`) 或look-ahead assertion ( `(?=…)`)，它被检查但不被使用：

```
/(?<=-)[a-z]+-/
/-[a-z]+(?=-)/ 
```

# jquery - jquery在重新加载站点后恢复可拖动位置

> ID：13891224
> 
> 赞同：1
> 
> 时间：2012-12-15T09:58:20.500
> 
> 标签：jquery, css, html, position, draggable

我试图将一个 div 从一个容器拖到另一个容器并将它们放在那里。这样可行。问题是当我尝试保存并重新加载位置时。可拖放的 div 应该从 #dragdelete div 拖到 #tagDropPoint div

```
$('.resizeDiv')
    .draggable({ revert: "invalid", snap: "#dragDelete", snapMode: "inner", containment: "#draggableArea" });

$('#tagDropPoint').droppable({accept: '.resizeDiv',
    drop: function(event, ui) {
        setActive(lastXmlTag);
        ui.draggable.resizable();
        }
 }); 
```

这就是我获得职位的方式

```
$('.resizeDiv').mouseup(
    function(){
        var position = $(this).position();
        var dropAreaPos = $('#tagDropPoint').position();

        var xpos = position.left - dropAreaPos.left;
        var ypos = position.top - dropAreaPos.top;

        var width = $(this).width();
        var height = $(this).height();

        var thisId = $(this).attr("id");
        lastXmlTag = thisId;
        updateDDXMLAttr(xpos, ypos, width, height, thisId);

    }
); 
```

用于拖动的 HTML：在此处拖动标签。

```
 <div class="ddSpacer">&nbsp;</div>

        <div id="dragDelete" class="dragDelete" style="height: {$this->heightListBox}px;">
            <p class="dynConTagHeading">XML-Tags</p>
            <div id="dynConTagsContainer">

            </div>
        </div>
            <p style="clear: both">&nbsp;</div>
        </div> 
```

位置和大小值存储在隐藏字段中，并在刷新站点后重新加载。draggableArea div 显示在 jquery 对话框中。但是重新加载时位置不一样。怎么可能修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:06:50.283

使用 cookie 来存储位置，或者使用服务器端页面渲染技术（如 php 或 ASP.NET）来传递带有正确位置的 Div 的页面。

页面 div 位于原始位置是正确的 HTML 行为，没有什么可以“修复”这种行为，这就是它的工作方式。如果您希望它表现不同，请使用 cookie 或以不同方式呈现页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:07:02.280

Javascript（包括 Jquery）只是浏览器操作。要保存，您需要将设置保存到数据库或文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:20:30.120

这些位置可能由于填充、边距、绝对位置而移动，并且可能是由于某些编码错误。

如果您可以为此创建一个[JSFiddle](http://jsfiddle.net/)，那么调试和帮助您会更容易。

# python - numpy 特征值的精度

> ID：13891225
> 
> 赞同：3
> 
> 时间：2012-12-15T09:58:28.317
> 
> 标签：python, numpy, floating-point, linear-algebra

首先，我通过使用找到 (4000x4000) 矩阵的特征值[`numpy.linalg.eigvalsh`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.eigvalsh.html)。然后，我改变了边界条件，期望特征值只有微小的变化。

减去特征值容易受到浮点错误的影响，所以我使用了一些相对容差。

现在说我有一个 eigenvalue`A = 1.0001e-10`和另一个`B = 1.0050e-10`。根据我对浮点运算的浅薄知识，`A - B != 0`. 问题是，这些数字来自涉及多个数量级的线性代数计算。例如，其他特征值可能是有序的`1`。

问题是，使用 计算的特征值的精度是`numpy.linalg.eigvalsh`多少？这个精度是相对于值 ( `A * eps`)，还是相对于最大特征值？或者可能相对于原始矩阵的元素？

例如，这个矩阵：

```
1      1e-20
1e-20  3 
```

给出与此相同的特征值：

```
1     1e-5
1e-5  3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:37:46.693

我不确定是否在 eigvalsh 下使用了 Lapack，但这可能很有趣：

对称/非对称特征问题的 Lapack 误差界限：

[http://www.netlib.org/lapack/lug/node89.html](http://www.netlib.org/lapack/lug/node89.html)

[http://www.netlib.org/lapack/lug/node91.html](http://www.netlib.org/lapack/lug/node91.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:28:29.797

首先，求解器不精确。其次，您的示例矩阵条件不佳：对角线元素比非对角线元素大几个数量级。这总是会导致数字问题。

从简单代数来看，第二个矩阵的行列式是`(1 * 3) - (1e5 * 1e5) = 3 - 1e-10`。您已经可以看到精度问题实际上是最小元素精度的两倍。（这同样适用于特征值。）即使 linalg 使用双精度，因为求解器是近似的，你会得到相同的答案。如果您将较小的值更改为`1e-3`您开始看​​到差异，因为现在精度处于数值近似的数量级。

这个具体问题[之前已经问过了](https://stackoverflow.com/questions/6876377/numpy-arbitrary-precision-linear-algebra)。您可以在[此答案](https://stackoverflow.com/a/6879889/1580351)中看到如何使用 sympy 以任意精度求解特征值。

# backbone.js - 骨干 - 获取方法不返回输出

> ID：13891226
> 
> 赞同：0
> 
> 时间：2012-12-15T09:58:32.737
> 
> 标签：backbone.js, underscore.js

我是 Backbone.js 的新手，我有一个数据集，分配给查看，但我无法获取数据，同时我控制台任何人告诉我我的代码有什么问题？

代码：

```
var model = Backbone.Model.extend({
    data:[
        {text:'Google',href:"http://www.google.com"},
        {text:'Yahoo',href:"http://www.yahoo.com"},
        {text:'Bing',href:"http://www.bing.com"}
    ]
});

var View = Backbone.View.extend({
    initialize:function(){
       this.render();
    },
    render:function(){
         var data = this.model.get('data');
        console.log(data);    
    }
});

var myView = new View({model:model}); 
```

我得到的错误在这里：

```
TypeError: this.model.get is not a function
[Break On This Error]   

var data = this.model.get('data'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:05:56.727

您需要实际实例化模型；using`extend`只是创建`Backbone.Model`原型的扩展。 [以下创建 的新*实例*，`Backbone.Model`](http://jsfiddle.net/rKeDq/)并使用数据对其进行初始化：

```
var model = new Backbone.Model({
    data:[
        {text:'Google',href:"http://www.google.com"},
        {text:'Yahoo',href:"http://www.yahoo.com"},
        {text:'Bing',href:"http://www.bing.com"}
    ]
});
var myView = new View({ model: model }); 
```

* * *

如果要将数据放入模型本身的*类型*中，则可以使用以下`defaults`属性：

```
var Model = Backbone.Model.extend({
    defaults: {
        data:[
            {text:'Google',href:"http://www.google.com"},
            {text:'Yahoo',href:"http://www.yahoo.com"},
            {text:'Bing',href:"http://www.bing.com"}
        ]
    }
});
var model = new Model();
var myView = new View({ model: model }); 
```

# android - Android活动在更改选项卡时显示黑屏

> ID：13891229
> 
> 赞同：0
> 
> 时间：2012-12-15T09:58:43.807
> 
> 标签：android

当我更改选项卡时，选项卡子活动背景变为黑屏。我在笔记（Nexus 7）和平板电脑（Smasung Galaxy Tab）中遇到了这个问题。请分享一些想法来解决它。首先，我单击了第一个选项卡。当时活动加载正常。然后我去了标签 2。然后我再次点击了第一个标签。这时候屏幕变黑了。基本上布局 bg 没有加载。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:53:48.813

我在 tab_host.XML 中设置了与我在其他布局中使用的图像相同的背景图像。

```
 <FrameLayout android:layout_width="match_parent"
                android:layout_height="match_parent" android:id="@android:id/tabcontent">
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="match_parent" android:id="@+id/tab1" />
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="match_parent" android:id="@+id/tab2" />
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="match_parent" android:id="@+id/tab3" />
            </FrameLayout>
        </RelativeLayout>
    </TabHost>

</LinearLayout> 
```

# batch-file - 在 installshield 中执行 .BAT 文件

> ID：13891233
> 
> 赞同：5
> 
> 时间：2012-12-15T09:59:37.963
> 
> 标签：batch-file, installshield, custom-action

我正在开发一个包，我需要运行一个`.bat`文件来为我安装 Windows 服务。我需要两件事：

1.  steps to make custom action that will run `.bat` files? or other may to run .bat file.
2.  how to make this custom action with the installation process(for example: just after license agreement)?

*note: my service that I am installing is Delphi service. Regards.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T19:36:33.053

理想情况下，您应该考虑创建一个使用 MSI 标准操作 InstallService 安装服务的组件。

否则，您可以使用以下步骤在安装期间执行批处理文件。

1.  创建延迟类型 50 自定义操作（具有由属性值指定的路径的 EXE 文件）。
2.  将其源设置为 [SystemFolder]\cmd.exe。
3.  将其目标设置为“/c path-to-batch-file-on-target-system”
4.  在 InstallService 附近安排它的操作。

此外，不要忘记添加一个回滚自定义操作，以恢复批处理文件所做的任何修改，并在此自定义操作之前安排它。

[编辑步骤 3]

# iphone - 更改 UILabel 颜色动画

> ID：13891241
> 
> 赞同：0
> 
> 时间：2012-12-15T10:00:27.323
> 
> 标签：iphone, ios, uilabel

如何像下面的[链接](http://www.youtube.com/watch?v=_vOYvaNhSHw)那样逐渐改变 UILabel 文本的颜色？任何人都可以建议我一些代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:13:05.850

您可以使用格式化文本。

```
NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:@"Hello World"];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(1,5)]; 
```

*iOS < 6*

其次，您需要继承 UILabel 并在 drawRect 方法中打印此字符串。您需要创建某种类型的循环来根据语速改变颜色。

*iOS 6*

您可以使用属性Textproperty（无需子类）

*   (void)drawTextInRect:(CGRect)rect

或重用代码：

[https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:14:36.807

从 iOS 6.0 开始使用`NSAtributedString`。`UILabel`对于低于 iOS 6.0 的较小版本，请使用支持[NSAtributedString](https://github.com/mattt/TTTAttributedLabel)的 TTTAttributedLabel

由它`attributed string`根据你的变化`requirement``setting``again``UILabel`

**编辑**添加`colored text`你想要的，例如在循环中

标签中的第一秒：我是好孩子。

在标签中获得第二名：**我**是好孩子。

在标签中获得第三秒：我**是**好孩子。

在标签中的第 4 秒：我是**好孩子**。

标签中的第 5 秒：我是**好孩子**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:24:54.837

这是我的示例代码之一。使用 TTTAttributedLabel 类的 block 方法可能会对您有所帮助。

```
 [cell.lblAtt setText:strAtt afterInheritingLabelAttributesAndConfiguringWithBlock:^NSMutableAttributedString *(NSMutableAttributedString *mutableAttributedString) {

        UIFont *italicSystemFont = [UIFont boldSystemFontOfSize:12];
        CTFontRef italicFont = CTFontCreateWithName((__bridge CFStringRef)italicSystemFont.fontName, italicSystemFont.pointSize, NULL);

        NSUInteger lenght = [[tempObj objectForKey:@"username"] length];
        NSUInteger lenght2 = [[NSString stringWithFormat:@"%d",[tempArr count]] length];

        [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[ThemeColor CGColor] range:NSMakeRange(0,lenght)];
        [mutableAttributedString addAttribute:(NSString*)kCTFontAttributeName value:(__bridge UIFont*)italicFont range:NSMakeRange(0,lenght)];

        [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[ThemeColor CGColor] range:NSMakeRange(lenght+11,lenght2)];
        [mutableAttributedString addAttribute:(NSString*)kCTFontAttributeName value:(__bridge UIFont*)italicFont range:NSMakeRange(lenght+11,lenght2)];

        return mutableAttributedString;
    }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:11:34.550

您链接的应用程序 [http://www.youtube.com/watch?v=_vOYvaNhSHw] 可能是使用`cocos2d`.
在`cocos2d`中，您还可以使用动画轻松更改文本颜色。

这里是一个例子： http:
[//www.cocos2d-iphone.org/forum/topic/5903](http://www.cocos2d-iphone.org/forum/topic/5903)

这里cosos2d sdk，我建议尝试一下，因为它非常强大： http:
[//www.cocos2d-iphone.org/](http://www.cocos2d-iphone.org/)

请享用。

# php - PHP `preg_match` 似乎不适用于包含 CR 的字符串

> ID：13891248
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:02:18.540
> 
> 标签：php, regex, preg-match

我需要预匹配以下内容：

```
Aanvaller Flugel25
[1:260:7] 
```

起初是这样的：

```
Aanvaller Flugel25 [1:260:7] 
```

这个 preg_match 不再起作用：

```
preg_match('#(Aanvaller|Verdediger) (.*) \[([0-9]:[0-9]{1,3}:[0-9]{1,2})\]#i', $this->_source) 
```

看起来输入正在搞砸。第一行之间有一个图像`flugel25`，`[1:260:7]`并且没有复制到我`preg_match`检查它的文本框中，有没有办法检查所涉及的奇怪输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:15:17.440

使用`\s`代替空格字符，如下所示：

```
#(Aanvaller|Verdediger)\s+(.*?)\s+\[([0-9]:[0-9]{1,3}:[0-9]{1,2})\]#i 
```

# entity-framework - 如何在 Entity Framework 4 中使用我的存储过程？

> ID：13891249
> 
> 赞同：1
> 
> 时间：2012-12-15T10:02:25.403
> 
> 标签：entity-framework, stored-procedures, entity-framework-4, entity

我有这个用于登录的存储过程

```
ALTER PROCEDURE usp_Login

    (
    @username varchar(50),
    @password varchar(50)
    )   
AS
BEGIN
DECLARE @loginflag VARCHAR(1)   
IF EXISTS (SELECT dbo.tbl_Login.Id FROM dbo.tbl_Login WHERE (dbo.tbl_Login.LoginId = @username))
    BEGIN
IF ((SELECT COUNT(dbo.tbl_Login.Id) FROM dbo.tbl_Login WHERE (dbo.tbl_Login.LoginId = @username) AND (dbo.tbl_Login.Loginpassword= @password))> 0)
        BEGIN
        WITH LoggedInUser AS 
        (
SELECT  L.LoginId,L.LoginRole,L.LoginPassword,L.UserId,S.FatherName,S.Name,S.RollNo,S.Marks,S.Dob,                    S.Address,S.PhoneNumber,S.CityId,S.EmailAddress,S.Gender,S.Password,             S.SiteUrl,S.StuAvtar,S.StuCv FROM dbo.tbl_Login AS L INNER JOIN dbo.tbl_Student AS S ON L.UserId = S.Id  
                       WHERE L.LoginPassword=@password AND L.LoginId=@username
        )
        SELECT *FROM LoggedInUser

        END
        ELSE        
            SELECT -98 AS Error --User Password Wrong   
    END 
    ELSE 
        SELECT -99  AS Error --USER NOT EXISTS
END 
```

我想将它与具有返回结果的实体框架一起使用。我该怎么做？请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:19:06.530

**使用 Code First 时，**没有**对**存储过程的直接映射支持****

 **您可以使用**db.Database.SqlCommand 方法**简单地调用您的过程**而不是 Add方法。**

 **试试这个（**这是一个示例**）：

**新闻类：**

```
public class News
{
   public int NewsId { get; set; }
   public string Title { get; set; }
   public string Body { get; set; }
   public bool Active { get; set; }
} 
```

**连接字符串**

```
<connectionStrings>
   <add
      name="MyDatabaseContext"
      connectionString="Data Source=MyServer;Initial Catalog=MyDatabase;Integrated Security=True;"
      providerName="System.Data.SqlClient" />
</connectionStrings> 
```

**数据库上下文**

```
public class MyDatabaseContext : DbContext
{
   public DbSet<News> Newses { get; set; }
} 
```

**存储过程**

```
ALTER PROCEDURE [dbo].[News_Insert]
(
   @Title VARCHAR(100),
   @Body VARCHAR(MAX),
   @NewsStatusId INT
)

AS

BEGIN

   INSERT INTO
      News
      (
         Title,
         Body,
         NewsStatusId
      )
      VALUES
      (
         @Title,
         @Body,
         @NewsStatusId
      );

  SELECT SCOPE_IDENTITY();

END 
```

**如何在上述模型中使用 SP（代码优先）**

```
db.Database.SqlCommand("dbo.News_Insert @Title, @Body, @NewsStatusId",
  new SqlParameter("Title", news.Title),
  new SqlParameter("Body", news.Body),
  new SqlParameter("NewsStatusId", news.NewStatus.Id)); 
```

**以下是一些有用的链接以获取更多详细信息**

[**尼古拉斯博客文章**](http://weblogs.asp.net/dotnetstories/archive/2011/03/01/using-stored-procedures-with-entity-framework-in-an-asp-net-application.aspx)

[**超越关系博客文章**](http://beyondrelational.com/modules/2/blogs/64/posts/11620/entity-framework-40-bind-stored-procedure-with-result-entity-class.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:31:11.037

这是一个关于如何通过实体框架[存储过程在实体框架中使用存储过程的链接](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:22:47.547

您可以在 sql 和实体更新中编写存储过程，然后将其转换为函数并使用它，例如程序中的函数，db-click 实体模型和打开页面（EntityModel）然后我右侧页面 db-click名为 StoredproceduresEntity 的文件夹并打开然后右键单击一个 StoredProcedures 并选择选项 AddFunction... 然后选择输出类型转到：http: [//msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)****

# c# - PayPal 定期付款 计费频率

> ID：13891254
> 
> 赞同：4
> 
> 时间：2012-12-15T10:03:25.620
> 
> 标签：c#, asp.net, paypal

我第一次在我的网站上实施贝宝，所以有人可以告诉我，我如何测试定期付款，因为最小计费周期是一天，频率是 1，所以我应该等待一天来检查 IpN 处理程序的点击吗？或者有没有其他方法可以在不等待的情况下测试定期付款？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:17:56.180

如果您需要测试订阅或定期付款 IPN，您可以通过创建自己的 HTML 表单并将操作设置为您的 IPN 侦听器 URL 来轻松完成。

将隐藏字段添加到与您希望从 PayPal 获得的字段相匹配的表单中，您可以通过在沙盒上执行实际交易来获取第一个 IPN，然后将其复制到您的测试表单中。

这样，您可以直接将表单提交给您的 IPN 侦听器，并在屏幕上实际看到结果。这对于故障排除也很有用。

您唯一需要考虑的是，在以这种方式进行测试时，IPN 不会验证，因为原始数据并非来自 PayPal。您可以轻松地在代码中处理此问题以进行测试。

一旦一切都按照您想要的方式工作，您可以放心，它对于从 PayPal 收到的实际 IPN 将以相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T13:22:57.677

据我所知，除了等待测试 PayPal 订阅之外别无他法。您不能在人造时钟下运行沙箱：

类似的问题：

[测试 Paypal 订阅 IPN](https://stackoverflow.com/questions/1364360/testing-paypal-subscription-ipn)

贝宝文档：

[PayPal 支付标准集成指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:12:02.357

您可以根据需要在贝宝沙盒上进行多次测试

# sql - 使用来自 2 个视图的选择查询

> ID：13891256
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:04:03.010
> 
> 标签：sql

有一个 sql 查询问题，我应该找出哪些用户通过了所有测试。以下是表格：

例如：名称表（列名称）

**用户（用户名，密码）**

**测试（测试#，creditpertrue，negperfalse，total，neededcredit）**

*{creditpertrue=每个正确答案的分数，negperfalse=每个错误答案的分数，total=是测试的总分，needcredit 是通过测试的分数}*

**问题（测试#,q#,truechoice#）**

**user_test(userid,test#)**

*{此表显示哪个用户参加了哪个测试（一个用户只能参加一次测试）}*

**user_test_question(uesrid,test#,q#,userchoice#)** *{此表显示每个用户在每个测试和问题中的选择#可能是错的或正确的}*

现在的问题是： **`find out the userid of users that have passed all of the tests.`**

我想到的一个解决方案是：

像这样创建 2 个视图：view1:userid,test#,numberofrightchoices

和

view2:userid,test#,numberofwrongchoices

然后在这两个视图上使用选择并使用 numberofrightchoices*creditpertrue-numberofwrongchoices*negperfalse>=neededcredit

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:33:49.653

我认为您需要获取已通过所有测试的用户列表的查询将是：

```
select userid,
from user_test
where userid not in (
    Select 
        userid
    from    
        (select t0.test#,t2.uesrid, neededcredit,
            Sum(case when t1.truechoice# = userchoice# then t0.creditpertrue else -negperfalse end) as User_Test_Points
        from test t0 left join   
            question t1 on (t0.test# = t1.test#) left join
                user_test_question t2 on (t1.q# = t2.q#)
        where t2.uesrid is not null
        Group by t0.test#,t2.uesrid,neededcredit )
    Where Test_Results.User_Test_Points < Test_Results.neededcredit ) 
```

# c++ - VisualStudio 2012 gl.h 在哪里？

> ID：13891257
> 
> 赞同：3
> 
> 时间：2012-12-15T10:04:09.290
> 
> 标签：c++, visual-studio, opengl

所以我试图让 GLFW 运行，最后设法让一切顺利。然后我想我已经解决了我卸载 Visual Studio 2010 的问题（注意我使用的是 VS 2012，我安装了 2010 认为它可能是 2012 的问题）和 Windows SDK，我下载的这两个东西都认为我需要它们来运行 GLFW。

在其中之一之间，我的项目破裂了。它现在找不到 gl.h，根据一些谷歌搜索，它应该包含在 Visual Studio 或 Windows SDK 中。

重新安装SDK后，错误仍然存​​在。我什至检查了文件夹，那里似乎没有 gl.h。

所以我修复了Visual Studio 2012，没有骰子。还搜索了 VS VC 包含文件夹，没有找到 gl.h，所以我的问题是 gl.h 到底藏在哪里？或者至少它附带什么软件，Windows SDK？VS？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:48:37.103

标头`gl.h`是[Windows SDK](http://msdn.microsoft.com/en-us/windows/bb980924.aspx)的一部分，但可能已经安装在您的系统上。重新安装后，它应该明确存在。

为了在所有设备上使用所有 OpenGL 功能，您需要像[GLEW](http://glew.sourceforge.net/)这样的扩展管理员。一个包含所有需要的标题，例如`gl.h`，为您服务。有一些教程解释了如何设置 OpenGL 和 GLEW，我推荐页面[http://open.gl](http://open.gl/context#Onemorething)。

对我来说，Visual Studio 11 在 Windows 8 下与 OpenGL 配合得很好。你只需要链接正确的库。

# mysql - 关于多个唯一约束的重复键更新

> ID：13891258
> 
> 赞同：1
> 
> 时间：2012-12-15T10:04:15.200
> 
> 标签：mysql

我有一个对两列有唯一约束的表。我正在尝试使用重复密钥更新，但出现错误...

...创建表

```
CREATE TABLE IF NOT EXISTS `requests` (
  `userFrom` int(11) NOT NULL,
  `userTo` int(11) NOT NULL,
  `dateSent` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY `userFrom` (`userFrom`,`userTo`)
) 
```

...添加一些数据

```
INSERT INTO requests (userFrom, userTo) VALUES (1, 2) 
```

...然后失败（当传递 1 的 userFrom 和 2 的 userTo

```
INSERT INTO requests (userFrom, userTo) VALUES (:userFrom, :userTo) ON DUPLICATE KEY UPDATE set dateSent = NOW() 
```

错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'set dateSent = NOW()' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:08:18.893

我认为这里不需要`set`关键字，试试这个

```
INSERT INTO requests (userFrom, userTo) VALUES (:userFrom, :userTo) ON DUPLICATE KEY UPDATE dateSent = NOW() 
```

# wcf - 在 IIS 7.0 和 Silverlight 5.0 下发布 WCF RIA 域服务

> ID：13891260
> 
> 赞同：0
> 
> 时间：2012-12-15T10:05:22.407
> 
> 标签：wcf, ria, silverlight-5.0, publishing, deploying

关于在 IIS 7.0 下发布 WCF RIA 域服务，我有一些简单的问题：

**1.)**我是否需要 *.svc 文件才能在 IIS 7.0 下发布 WCF RIA 域服务？**是/否？**

**2.)**如果 1.) 是，有没有办法自动生成这个 *.svc 文件，还是我必须自己手动生成？**自动/手动？**

**3.)**我的域服务是 *.cs 文件中的简单类。我是否需要将它们配置为“始终复制到发布文件夹”或在构建“Web.dll”中“运行”域服务？**总是复制/存在于 Web.dll 中？**

我的问题看起来很简单，但我很难让它在 IIS 7.0 下工作。在内部 VS 2010 开发服务器中调试和测试是没有问题的。

我从来没有遇到过发布“正常”WCF 服务的问题，因为那里有很多好的建议，但对于 WCF RIA 服务来说，这让我很头疼。

**提前感谢您的简短回答。如果您有任何关于使用 Silverlight 5.0 发布 WCF RIA 服务的教程的良好链接，请发布它。**我已经为此工作了好几天，并且已经用谷歌搜索了我的大脑。我真的不明白这有多难。我在 SO 上找到了一些链接，但其中一些已经不存在了，其中一些似乎没用，因为 WCF RIA 服务随着时间的推移而改变。

谢谢你，我真的很感激任何帮助。

**编辑：我已经可以在 VS 2010 中调试 IIS 上的 WCF RIA 服务代码，但前提是该服务是从 ASP.NET 代码隐藏文件中调用的。这告诉我，WCF RIA 服务正在 IIS 上工作和运行。这个问题都是关于向外部世界发布服务的。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:12:34.820

您是否尝试从 Visual Studio 发布项目？

我发现了一些有趣的阅读链接：

[http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx)

[http://timheuer.com/blog/archive/2009/12/10/tips-to-deploy-ria-services-troubleshoot.aspx](http://timheuer.com/blog/archive/2009/12/10/tips-to-deploy-ria-services-troubleshoot.aspx)

[http://social.msdn.microsoft.com/Forums/da-DK/wcf/thread/84b377b2-45d1-44d3-ba1a-7d9ef5ee939a](http://social.msdn.microsoft.com/Forums/da-DK/wcf/thread/84b377b2-45d1-44d3-ba1a-7d9ef5ee939a)

我希望这对你有帮助。

# paypal - PayPal 结帐 - 默认情况下为信用卡选项卡

> ID：13891261
> 
> 赞同：10
> 
> 时间：2012-12-15T10:05:53.297
> 
> 标签：paypal, checkout

有没有办法让你输入信用卡信息的部分默认打开，而不是你输入贝宝信息的部分？

我真的需要这个，但找不到任何地方！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-15T20:28:43.297

唯一的方法是使用[Express Checkout](https://developer.paypal.com/docs/classic/products/#ec)。在您的[SetExpressCheckout](https://developer.paypal.com/docs/classic/api/merchant/SetExpressCheckout_API_Operation_NVP/)请求中，您设置 SOLUTIONTYPE=Sole 和 LANDINGPAGE=Billing。

这将强制显示完整的信用卡表格，以便人们无需创建 PayPal 帐户即可输入信用卡...

![在此处输入图像描述](../Images/dbc5038d6a58706d6d5a77653bd0f55c.png)

遗憾的是， [Payments Standard](https://developer.paypal.com/docs/classic/products/#wps)无法做到这一点。“Guest Checkout”适用于 Payments Standard，但它全部基于 cookie，因此如果所使用计算机上的任何人曾经登录过 PayPal 帐户，它会假定他们将来会这样做，并且不会t 提供信用卡选项。

**编辑**

这个问题再次出现，我有更多信息要提供。 [检查出来](https://stackoverflow.com/questions/22799030/paypal-expresscheckout-api-behavior-changed-recently)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-26T07:41:39.213

对于从谷歌到达这里但仍然无法解决它的人来说，这有几个关键因素：

1.  PayPal 参数：如果您查看[PayPal 的 API](https://developer.paypal.com/docs/classic/api/merchant/SetExpressCheckout_API_Operation_NVP/)，则有 3 个相关字段：LANDINGPAGE、USERSELECTEDFUNDINGSOURCE、SOLUTIONTYPE。

2.  不发送电子邮件参数。将电子邮件参数更改为“”（空白）。如果您发送电子邮件参数，它将始终打开登录选项卡。

3.  饼干。不管你做什么，如果用户在他的浏览器上有一个 PayPal cookie，登录选项卡将默认打开（并且上述参数将被忽略）没有解决方案（据我所知）所以确保你检查它是否适用于 cookie 原始浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T22:42:45.060

对于那些致力于最新实施快速结帐的人，默认情况下打开信用卡选项卡所需要做的就是在执行 a和它`&SHIPTOCOUNTRYCODE=US`之前向 nvpstring 添加一个额外的（或默认的任何国家/地区代码）到 nvpstring`SetExpressCheckout`将开始像奇迹一样工作。

干杯:)

# php - 防止 Ajax 在搜索时刷新

> ID：13891263
> 
> 赞同：1
> 
> 时间：2012-12-15T10:05:54.177
> 
> 标签：php, ajax, jquery

我有这段代码，它允许我每隔几秒钟重新加载一次页面的内容。

```
function()
{
$('#lista').show().load('listaupdate.php').fadeIn("slow");}, 3000); 
```

现在，问题是，我在那里有一个搜索表单，但是，我应该如何防止在搜索时刷新？

或者它可以刷新确定，但是在搜索完成之后，并且在给出结果之后。分页也是同样的问题，如果我转到第 2 页，它会刷新并带我到第 1 页。

我该如何解决这个问题？谢谢

搜索表格：

```
<form action="listasearch.php" method="post">
<select name="kategoria">
  <option value="dyqani_pergjegjes">Dyqani Përgjegjës</option>    
</select> 
<input type="text" name="search">
 <input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:35:36.010

在我看来，您有两种选择：

1.  选项 1：让 listaupdate.php 只返回数据并对其进行 AJAX 调用，而不是在完整的处理程序中加载和构建标记（想法是没有必要重新加载整个页面，包括搜索表单 -只是需要更新的数据）。见[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

2.  选项 2 - 在用户使用搜索字段时取消更新（坦率地说，这不是更好的解决方案，但仍然如此）。做类似的事情：

    ```
    var interval = setInterval(function(){
    $('#lista').show().load('listaupdate.php').fadeIn("slow");}, 3000); 
    ```

听一些与搜索相关的事件（如果焦点不适合这种情况，请自己制作一个）：

```
$('input[name="search"]').on("focus", function(event){
     interval = clearInterval(interval);
});

// restart it when search is done
$("form").submit( function(event){
         interval = setInterval(function(){
        $('#lista').show().load('listaupdate.php').fadeIn("slow");}, 3000);
  }); 
```

# android - ImageView 不使用位图更新？

> ID：13891265
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:06:43.827
> 
> 标签：android

为什么我的 imageview 没有在 for 循环中更新，只有最后一个 url 中的图像显示在 imageview 中，而不是所有图像，我做错了什么？

```
public class LoadImageActivity extends Activity {
    ImageView image_view;
    Bitmap bitmap;

    String[] imageLocation={
            "http://wallbase1.org/thumbs/rozne/thumb-499842.jpg",
            "http://ns3002439.ovh.net/thumbs/rozne/thumb-2493796.jpg",
            "http://ns3002439.ovh.net/thumbs/rozne/thumb-2486664.jpg" };  

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        image_view = (ImageView)findViewById(R.id.imageview);

        for (int i = 0; i < 2; i++) {
            bitmap = loadImage(imageLocation[i]);
            image_view.setImageBitmap(bitmap);

            Animation rotate = AnimationUtils.loadAnimation(LoadImageActivity.this, R.anim.rotate);
            findViewById(R.id.imageview).startAnimation(rotate);
        }
    }

    public  Bitmap loadImage(String image_location){
        URL imageURL = null;
        try {
            imageURL = new URL(image_location);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        try {
            HttpURLConnection connection = HttpURLConnection)imageURL.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream inputStream = connection.getInputStream();

            bitmap = BitmapFactory.decodeStream(inputStream);//Convert to bitmap
        } catch (IOException e) {
            e.printStackTrace();
        }
        return bitmap;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:18:41.647

好吧，起初，您设备在两行连续代码中切换图像的速度有多慢（有效）？

其次，必须先对系统进行布局，这发生在`onCreate()`返回之后。你所做的是：

```
-set reference to bitmap that will be shown when layouted
-changed that reference
-let the system do the layout (Question: Which reference will be read?) 
```

看起来您想要设置第一个位图，旋转它，然后设置另一个位图。你需要做的是：

```
-set bitmap
-start animation with an Animation.AnimationListener, which sets the second bitmap in onAnimationEnd(). 
```

@感谢亚当！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:22:34.147

你可以在你的第一个动画上放一个，你可以在监听`Animation.AnimationListener`器的方法中加载下一个图像并开始新的过渡。`onAnimationEnd(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:57:06.583

尝试设置底层对象（位图），然后更新 ImageView。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T10:19:34.790

该方法`loadImage()`不在 UI 主线程中，请使用 Handler 使用新图像更新 ImageView。

# qt - PyQide-Qt QSyntaxHighlighter 多行

> ID：13891268
> 
> 赞同：3
> 
> 时间：2012-12-15T10:06:54.083
> 
> 标签：qt, syntax-highlighting, pyside, qtextedit

`highlightBlock(self, qtext)`of将我的小部件中的`QtGui.QSyntaxHighlighter`每一行`QTextEdit`视为不同的块 ( `qtext`)。这会阻止我的正则表达式中的**多行标志**，这在我的情况下是一个交易破坏者！我阅读了`setCurrentBlockState()`and`previousBlockState()`但它们并没有真正帮助不破坏多行标志。

有没有一种简单的方法可以克服这个错过的问题？如果没有，您会建议将其作为最佳方法：

a) 将QTextBlock 从一行扩展`QTextEdit`和更改为整个文本。`QDocument`

b) 从头开始​​使用 QTextLayout、QTextFormat 等实现我自己的荧光笔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T22:19:16.250

扩展 Qt 类（没有被宣传为可扩展）的问题是很多方法不是虚拟的，而且大多数实现都是在[私有](http://zchydem.enume.net/2010/01/19/qt-howto-private-classes-and-d-pointers/)类中完成的。

这使得扩展并不容易。所以我会坚持B计划。

# c# - 将字符串转换为日期时间

> ID：13891270
> 
> 赞同：2
> 
> 时间：2012-12-15T10:07:24.957
> 
> 标签：c#, string, datetime, typeconverter

> **可能重复：**
> [字符串中的日期时间格式？](https://stackoverflow.com/questions/232732/date-time-format-from-string)

有谁知道我如何将以下字符串转换为`DateTime`C# 中的值？

```
"Thu Nov 15 2012 00:00:00 GMT+0300 (E. Africa Standard Time)" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T10:29:37.247

如果您只有以 结尾的字符串`"GMT+0300 (E. Africa Standard Time)"`，您可以尝试：

```
string dateString = "Thu Nov 15 2012 00:00:00 GMT+0300 (E. Africa Standard Time)";
DateTime date = DateTime.ParseExact(dateString, "ddd MMM dd yyyy HH:mm:ss 'GMT+0300 (E. Africa Standard Time)'", System.Globalization.CultureInfo.InvariantCulture); 
```

说明符的含义如下：

*   "ddd" 星期几的缩写名称。
*   “MMM” 月份的缩写名称。
*   "dd" 月份中的第几天，从 01 到 31。
*   "yyyy" 四位数的年份。
*   "HH" 小时，使用从 00 到 23 的 24 小时制。
*   "mm" 分钟，从 00 到 59。
*   "ss" 第二个，从 00 到 59。
*   ":" 时间分隔符。
*   "string", 'string' 文字字符串分隔符。

[您可以在名为Custom Date and Time Format Strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的 MSDN 文章中找到有关不同格式说明符的更多信息

此外，如果您也想解析`"GMT+0300 (E. Africa Standard Time)"`部分，我认为您应该实现一种自己解析它们的方法。我不认为有一个说明符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:42:07.170

首先，您应该将非洲标准时间文化信息用于您的；

```
CultureInfo( "af-ZA", false ); 
```

但是您的字符串转换为`DateTime`. `DateTime`对我来说，完美地转换似乎是不可能的。但是我们可以在您的字符串中进行一些修复。例如，如果您的字符串是这样的；`"11/15/2012 00:00:00"`你可以像这样转换它；

```
using System;
using System.Globalization;

namespace Programs
{
    public class Program
    {      
        public static void Main(string[] args)
        {
            string str = "11/15/2012 00:00:00";
            DateTime dt = DateTime.ParseExact(str, "MM/dd/yyyy hh:mm:ss", new CultureInfo("af-ZA"));
            Console.WriteLine(dt.ToString());
        }
    }
} 
```

[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[`DateTime.ParseExact Method`](http://msdn.microsoft.com/en-us/library/332de853.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:23:25.067

试试这个：

```
DateTime date = DateTime.Parse(yourDateTimeString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:07:47.820

没有办法处理（东非标准时间）。

假设 UTC=GMT 您还可以获得时区部分，只需删除字符串中不重要的部分

```
string t = Regex.Replace("Thu Nov 15 2012 00:00:00 GMT+0300 (E. Africa Standard Time)", "([(].+?[)])", "");
t= t.Replace("GMT", "").Trim();

DateTime a = DateTime.ParseExact(t, "ddd MMM dd yyyy HH:mm:ss zzzz", System.Globalization.CultureInfo.InvariantCulture); 
```

# c# - 创建泛型方法时无法指定泛型函数返回值

> ID：13891272
> 
> 赞同：1
> 
> 时间：2012-12-15T10:07:42.963
> 
> 标签：c#, c#-4.0

我有这个方法需要将 int 值列表转换为适当的枚举值列表。

问题是 Select 正在返回一个对象类型，因为我没有为泛型函数指定返回类型，因为返回类型也是泛型的。

```
 public static Tout Convert<Tout, Tin>(IList<Tin> reply)
    {
        Type resultListElementType = typeof(Tout).GetGenericArguments()[0];
        MethodInfo setEnumValueMethod = typeof(EnumUtils).GetGenericMethod("SetEnumValue", new Type[] { typeof(Tin) });
        MethodInfo setEnumValueGenericMethod = setEnumValueMethod.MakeGenericMethod(resultListElementType, typeof(Tin));
        Tout result = (Tout)(dynamic)reply.Select(v => setEnumValueGenericMethod.Invoke(null, new object[] { v })).ToList();
        return result;
    } 
```

通用函数签名如下

```
 public static Tout SetEnumValue<Tout, Tin>(Tin value) 
```

有什么方法可以配置泛型函数的返回类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:22:23.023

你已经在这样做了。你绑定`TIn`到`typeof(Tin)`. 问题出在其他地方：

```
Tout result = (Tout)(dynamic)reply.Select(v => setEnumValueGenericMethod.Invoke(null, new object[] { v })).ToList(); 
```

这给了你一个`List<object>`. 将每个单独的值转换为正确的类型：

```
List<Tout> result = reply.Select(v => (Tout)(dynamic)setEnumValueGenericMethod.Invoke(null, new object[] { v })).ToList(); 
```

并更改公共静态 Tout Convert(IList 回复)

到

```
 public static List<Tout> Convert<Tout, Tin>(IList<Tin> reply) 
```

# android - 果冻豆有壳吗？

> ID：13891280
> 
> 赞同：-2
> 
> 时间：2012-12-15T10:08:48.957
> 
> 标签：android, unix, android-4.2-jelly-bean

我正在尝试在运行 jelly bean 4.2 的 nexus 7 上设置一个小开发环境

我能找到的唯一 shell 是 google play 商店中的终端模拟器，它没有工具，没有 curl，甚至没有 sudo 命令。

果冻豆实际上带有什么，我需要做什么才能使用 sudo 访问和工具在那里获得一个外壳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:12:14.047

Root 并安装[Busybox](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)会给你一些新的命令。使用 su 而不是 sudo 成为超级用户（需要 root 手机）。

您还可以通过 adb 访问 shell，方法是将手机连接到计算机并运行：

```
adb shell 
```

要求您安装 ADB（它是[Google 的 Android SDK](http://developer.android.com/sdk/index.html)的一部分）

# java - 在tomcat 7中将robots.txt放在哪里？

> ID：13891284
> 
> 赞同：5
> 
> 时间：2012-12-15T10:09:35.540
> 
> 标签：java, apache, tomcat, sitemap, robots.txt

我正在使用 Tomcat 7 来托管我的应用程序。我在 tomcat-home\conf\Catalina\localhost 下使用了 ROOT.xml 文件

```
<Context 
  docBase="C:\Program Files\Apache Software Foundation\Tomcat 7.0\mywebapp\MyApplication" 
  path="" 
  reloadable="true" 
/> 
```

这是在根上下文中加载我的 webapp。

但现在我很困惑把`robots.txt`和`sitemap.xml`文件放在哪里。当我放入 C:\Program Files\Apache Software Foundation\Tomcat 7.0\mywebapp\MyApplication 下时，它没有出现。

我也试过把它放在里面`C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT`，以防万一。但没有任何效果。我仍然找不到 404。任何人都可以请指导。

ps 我的 Web 应用程序运行良好。只是我的`robots.txt`文件无法访问。

## 编辑

我的 web.xml 文件：

```
 <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:52:32.010

只需`robots.txt`放入`Tomcat_DIR/webapps/ROOT/`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T10:11:17.367

它应该在您的上下文目录中

`mywebapp\MyApplication`

就在您将拥有您的 web-inf 目录、index.html 等的地方。

更新：

根据我们的讨论，所有 url 都由 Spring MVC DelegatingFilterProxy 处理，因此您需要以某种方式从该过滤器中排除 *.txt，可能是通过扩展 DelegatingFilterProxy 并在 web.xml 中配置该过滤器

解决方案：我可以通过 Spring MVC 中的这个 hack 来提供静态内容：

```
<mvc:resources mapping="/robots.txt" location="/robots.txt" order="0"/> 
```

省了我很多头痛。:) 为其他人编写它以从中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T18:22:16.577

我遇到了同样的问题：我没有测量我将 robots.txt 放在哪里或将`<mvc:resources mapping="/robots.txt" location="/robots.txt" order="0"/>`每个请求配置到 robots.txt 返回 404 状态。

这里的问题是我在客户端使用 Spring MVC 和 Backbone.js MVC，它有它的路由。所以我无法调整`<url-pattern></url-pattern>`为两个 MVC 服务。

我在这里找到的唯一快速而丑陋的解决方案是将 /robots.txt 的请求作为 Spring MVC 中的请求处理

```
@RequestMapping(value = "/robots.txt", produces = {"text/plain"}, method = RequestMethod.GET)
@ResponseBody
public String getRobotsTxt() {
    return "User-agent: *" + 
   "\n" + "Allow: /js/views/*.js" + 
   "\n" + "Allow: /js/*.js" + 
   "\n" + "Allow: /css/*.css" + 
   "\n" + "Allow: /css/*.png" + 
   "\n" + "Disallow: /cgi-bin" + 
   "\n" + "Sitemap: http://blabla/sitemap.xml";
} 
```

# android - android 应用内测试用户不符合此购买条件

> ID：13891290
> 
> 赞同：3
> 
> 时间：2012-12-15T10:10:26.713
> 
> 标签：android, in-app

我正在尝试实施，`in-app`但我从 google play 收到此消息`**the user is not eligible for this purchase**`，但我刚刚创建了测试帐户并将其添加到我的商家帐户中。（apk 在草稿中，所以我需要一个测试帐户进行测试）**具有测试访问权限的 Gmail 帐户**。

我想知道这个过程需要一些时间（如果然后多少？）`or`它只适用于我改变它。

任何人都可以帮助我。

# ruby - Ruby“存储”格式字符串

> ID：13891297
> 
> 赞同：0
> 
> 时间：2012-12-15T10:11:44.823
> 
> 标签：ruby, string

如何存储这样的格式字符串

```
s = "test with #{value}" 
```

这样以后我就可以做到这一点

```
puts s % {:value => 'hello'} 
```

如果我写第一件事，它会抱怨`value`找不到（真的，我想稍后再提供）。如果我使用原始字符串`s = 'test with #{value}'`，则不会对其进行插值。

我专门尝试了这个：

```
@format_html = "<a href=\"http://boardgamegeek.com/user/%{who.sub ' ', '+'}\">%{who}</a> receives <a href=\"%{got[0]}\">%{got[1]}</a> from <a href=\"http://boardgamegeek.com/user/%{from.sub ' ', '+'}\">%{from}</a> and sends <a href=\"%{given[0]}\">%{given[1]}</a> to <a href=\"http://boardgamegeek.com/user/%{to.sub ' ', '+'}\">%{to}</a>"
puts @format_html % {:who   => 'who',
                        :given => 'given',
                        :from  => 'from',
                        :got   => 'got',
                        :to    => 'to'} 
```

我明白了：

```
KeyError (key{who.sub ' ', '+'} not found): 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T10:16:51.383

这仅适用于 ruby​​ 1.9+：

```
s = "test with %{value}"
puts s % { value: 'hello' } # => test with hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:11:23.010

镐[http://pragprog.com/book/ruby3/programming-ruby-1-9](http://pragprog.com/book/ruby3/programming-ruby-1-9)在下面说`String#%`：

> 如果格式规范包含多个替换，则 arg 必须是包含要替换的值的数组。

```
@format_html = "<a href=\"http://boardgamegeek.com/user/%s\">%s</a> receives <a href=\"%s\">%s</a> from <a href=\"http://boardgamegeek.com/user/%s\">%s</a> and sends <a href=\"%s\">%s</a> to <a href=\"http://boardgamegeek.com/user/%s\">%s</a>"
h = {:who   => 'who',
     :given => ['given1', 'given2'],
     :from  => 'from    ',
     :got   => ['got1', 'got2'],
     :to    => 'to     '}
who, given, from, got, to = h.values
who_plus  = who.gsub(' ', '+')
got0      = got[0]
got1      = got[1]
from_plus = from.gsub(' ', '+')
given0    = given[0]
given1    = given[1]
to_plus   = to.gsub(' ', '+')
puts @format_html % [who_plus, who, got0, got1, from_plus, from, given0, given1, to_plus, to] 
```

执行 ：

```
$ ruby -w t.rb
<a href="http://boardgamegeek.com/user/who">who</a> receives <a href="got1">got2</a> from <a href="http://boardgamegeek.com/user/from++++">from    </a> and sends <a href="given1">given2</a> to <a href="http://boardgamegeek.com/user/to+++++">to     </a> 
```

# iphone - CHCSVParser - 如何从网络服务器加载

> ID：13891301
> 
> 赞同：0
> 
> 时间：2012-12-15T10:12:31.857
> 
> 标签：iphone, ios, ipad, csv, ios6

[我想从每天更新的网络服务器解析 csv。我正在使用来自此链接https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)的 csvparser ，我正在使用以下代码：

```
 NSError *err = [[[NSError alloc] init] autorelease];
NSString *lunchFileURL = [[NSString stringWithFormat:@"http://www.somewhere.com/LunchSpecials.csv"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *lunchFile = [NSString stringWithContentsOfURL:[NSURL URLWithString:lunchFileURL] encoding:NSUTF8StringEncoding error:&err];
CHCSVParser *p = [[CHCSVParser alloc] initWithContentsOfCSVString:lunchFile usedEncoding:&encoding error:nil]; 
```

我收到此错误：

```
 No visible @interface for 'CHCSVParser' declares the selector 'initWithContentsOfCSVString:usedEncoding:error:' 
```

我检查了这个链接[Load remote csv into CHCSVParser](https://stackoverflow.com/questions/4636428/load-remote-csv-into-chcsvparser?rq=1) 并且它不起作用。我是 ios 的菜鸟，请让我知道如何解决这个问题。非常感谢帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:29:28.347

应该是：

```
NSError *err;
NSString *lunchFileURL = [[NSString stringWithFormat:@"http://www.somewhere.com/LunchSpecials.csv"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString *lunchFile = [NSString stringWithContentsOfURL:[NSURL URLWithString:lunchFileURL]
                                               encoding:NSUTF8StringEncoding
                                                  error:&err];

// if you're going to create a CHCSVParser yourself, the syntax is:

CHCSVParser *p = [[CHCSVParser alloc] initWithCSVString:lunchFile
                                               encoding:NSUTF8StringEncoding
                                                  error:&err];

// or, if you're going to use NSArray+CHCSVAdditions.h, the syntax might be:

NSArray *array = [[NSArray alloc] initWithContentsOfCSVString:lunchFile
                                                     encoding:NSUTF8StringEncoding
                                                        error:&err]; 
```

笔记：

*   你不需要`alloc`/对象`init`；`NSError`这些带有`NSError **`参数的类会在遇到错误时为您创建自动释放错误对象；否则他们就不管它；

*   类`CHCSVParser`方法不是`initWithContentsOfCSVString`，而是`initWithCSVString`；

*   或者，如果您使用`NSArray`类扩展，则语法为`arrayWithContentsOfCSVString`or `initWithContentsOfCSVString`; 和

*   您指定了 的编码`&encoding`，但此参数不是指针，所以我看不出这怎么可能是正确的；我刚刚指定了编码。

我假设你想使用`NSArray+CHCSVAdditions`category 方法`initWithContentsOfCSVString`或`arrayWithContentsOfCSVString`（它给你一个`autorelease`对象），而不是`CHCSVParser`，但这取决于你。

# sql-server - 在 WHERE 中具有常量的 SELECT 语句的奇怪行为

> ID：13891306
> 
> 赞同：1
> 
> 时间：2012-12-15T10:13:00.233
> 
> 标签：sql-server, optimization, select, where

我对 MSSQL 查询有一个非常奇怪的问题，用于存储过程，但在这里简化以显示问题的核心。

查询如下

```
SELECT vs.fv_numer FROM win.v_sprzedaz vs 
```

View 相当复杂，但运行大约需要 2 秒。现在大吃一惊：

```
DECLARE @test=1
SELECT vs.fv_numer FROM win.v_sprzedaz vs
WHERE @test =1 
```

现在查询执行需要...15 秒！

由于缺乏知识，我没有详细分析执行计划（在这两种情况下都是不同的，而且相当复杂）。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:29:31.223

猜测 where 子句导致视图中使用的索引不被查询。您需要将一些[QUERY HINT](http://msdn.microsoft.com/en-us/library/ms181714.aspx)放入视图查询中以强制执行它们。

在不了解您的数据库的情况下，很难对它有所了解。但在我看来，查询计划也无法优化。

我首选的解决此类问题的方法是采用视图查询并逐渐将@test 添加到其中并查看发生了什么变化，然后通过逐渐删除条件进行调查，直到@test 没有任何区别。然后你会看到冲突。然后，您需要研究如何最好地添加优化，因为这可能会影响视图的其他用例。

# android - 在类中处理 AsyncTask

> ID：13891308
> 
> 赞同：1
> 
> 时间：2012-12-15T10:13:30.253
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 类来处理来自服务器的图像以在 ImageView 中显示它
我的代码中有一个 Next 按钮来使用以下代码调用下一个图像：

```
private class LoadImage extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPostExecute(Void result) {

        if (imgque != null) {
            imgSelectedQue.setImageDrawable(imgque);
            if (getActivity() != null) {
                adjustResourceEnvelope();
            }
        }

    }

    @Override
    protected void onPreExecute() {
        imgque = null;
        imgSelectedQue.setImageDrawable(null);
        imgSelectedQue.requestLayout();
    }

    @SuppressWarnings("deprecation")
    @Override
    protected Void doInBackground(Void... params) {
        InputStream is;
        try {
            is = (InputStream) new URL(Constants.PLAYER_SERVICE_BASE_URL + "/playerservice"
                    + imageurl).getContent();
            imgque = Drawable.createFromStream(is, null);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            imgque = null;
            e.printStackTrace();
        }

        return null;

    }
} 
```

现在的问题是，如果我重复单击下一个按钮，那么它会多次调用 AsyncTask，并且 ImageView 会显示所有图像，例如“幻灯片放映”，因为所有 url 图像都在队列中**。**
有没有办法只显示最后一个 AsyncTask 调用图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:19:46.783

做这样的事情：

[1] 当您`LoadImage AsyncTask`点击`NEXT`按钮`disable`NEXT 按钮时调用。

[2]再次打开按钮的`onPreExecute()`方法。`LoadImage AsyncTask` `enable``NEXT`

或者，

您也可以使用 simple 来实现这些目标`FLAG`。通过将其设置为真假。

希望这对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:09:34.287

我找到了解决方案。
如果有人面临同样的问题。
我添加了新行

```
if (loadimage != null)
 {
   loadimage.cancel(true);
   loadimage = null;
}

loadimage.cancel(true) will stop the AsyncTask if it is already Running 
```

然后执行 AsycTask()

```
loadimage = new LoadImage();
loadimage.execute(); 
```

通过这种方式，我只能调用我需要的最后一个 AsyncTask。

# java - 如何摆脱排序整数末尾的零

> ID：13891311
> 
> 赞同：0
> 
> 时间：2012-12-15T10:13:48.027
> 
> 标签：java, sorting

我的代码正在运行，但它给了我不必要的数字，我不知道如何摆脱它们。任何建议将不胜感激

```
import java.util.Scanner;
import java.io.*;

 public class ArraySort1 {

  public static void main(String[] args) throws IOException {
  Scanner inputFile; 
  inputFile = new Scanner(new File("arrayex1.txt"));
  PrintWriter outputFile;
outputFile = new PrintWriter(new FileWriter("sorted.txt"));

      /* Declare the array */

int[] numbers = new int[10000];
int index = 0;

      int temp, smallest, smallest_index;

      /* Read the first number */
      numbers[index] = inputFile.nextInt();

      while(inputFile.hasNextInt()) {
        numbers[index] = inputFile.nextInt();
        index++;
        }
// Local variable
int swValue;

// Display menu graphics
System.out.println("============================");
System.out.println("|   MENU SELECTION DEMO    |");
System.out.println("============================");
System.out.println("| Options:                 |");
System.out.println("|        1\. Selection Sort |");
System.out.println("|        2\.  Bubble Sort   |");
System.out.println("|        3\. Exit           |");
System.out.println("============================");
swValue = Keyin.inInt(" Select option: ");

// Switch construct
switch (swValue) {
case 1:
  System.out.println(" Selection Sort Starting....");
  for (int i = 0; i < index - 1; i++) {

      smallest = numbers[i];
      smallest_index = i;

      for (int j = i + 1; j < index; j++) {

        if (numbers[j] < smallest) { 
              smallest = numbers[j];
              smallest_index = j;
          }
      }

      /* If needed switch numbers[i] and numbers[smallest_index] */

      if (numbers[i] != numbers[smallest_index]) {

          temp = numbers[i];
          numbers[i] = numbers[smallest_index];
          numbers[smallest_index] = temp;
      }
  }
  for (int i = 0; i < index; i++) {          
    System.out.print (numbers[i] + " ");
          outputFile.print (numbers[i] + " ");
      }

      inputFile.close();
      outputFile.close();

  break;
case 2:
 //2 System.out.println("Bubble Sort Sorting 2 selected");

    //int i = 0, t=0;
    boolean swapped = true;

    while(swapped){

    swapped = false;

    for(int i1 = 0; i1 < index  - 1; i1++){
        smallest = numbers[i1];
        smallest_index = i1;

    if(numbers[i1] > numbers[i1 + 1]){
    swapped = true;
    int tmp = numbers[i1];
    numbers[i1] = numbers[i1 + 1];
    numbers[i1 + 1] = tmp;
    } 
    } 

    for(int i1 = 0; i1 < numbers.length; i1++){
   System.out.print(numbers[i1] + "\t");
    } 
   System.out.println();

    }

 break;

case 3:
  System.out.println("Exit selected");
  break;
default:
  System.out.println("Invalid selection");
  break; // This break is not really necessary
   }
 }

} 
```

如果我选择选项 2：我得到冒泡排序

```
1   2   4   1   5   7   9   56  67  0   0   0
1   2   4   5   7   9   56  67   0               0  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0       0   0   0   0   0   0   0   0   0   0   0   0   0   0   
1   1   2   4   5   7   9   56  67  0 
```

请我有问题的代码是冒泡排序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:24:33.603

问题是您的数组的长度为 10000。

```
int[] numbers = new int[10000]; 
```

这是选择 1 时生成输出的方式

```
for (int i = 0; i < index; i++) { 
```

您最多只能打印`index`（这是您从文件中读取的整数数量）。

当您选择选项 2 时，这是您生成输出的方式：

```
for(int i1 = 0; i1 < numbers.length; i1++){ 
```

其中`numbers.length`表示数组的每个元素。我现在不写解决方案，因为我认为你应该能够从这里自己解决它。

# webgl - 两条 z 相同的丝带，它们相互覆盖

> ID：13891313
> 
> 赞同：0
> 
> 时间：2012-12-15T10:14:26.073
> 
> 标签：webgl, three.js

我正在用 THREE.Ribbon 绘制地图道路，每条道路都有不同颜色的边框，所以我使用了两条色带，一个更宽的边框颜色，一个更窄，然后我可以达到我的目的。

我还在丝带的两端画了一个带圆圈的帽子，当然画了两个圆圈，较小的一个覆盖较大的一个，就像canvas2D中的linecap一样。

我不能使用 THREE.Line 作为替代方案，因为我的 webgl 中 Line 的宽度最大值为 1。

我的代码是这样的：

```
var circleShape = new THREE.Shape();
var circleRadius = lineWidth/2;
circleShape.moveTo( 0, circleRadius );
circleShape.quadraticCurveTo( circleRadius, circleRadius, circleRadius, 0 );
circleShape.quadraticCurveTo( circleRadius, -circleRadius, 0, -circleRadius );
circleShape.quadraticCurveTo( -circleRadius, -circleRadius, -circleRadius, 0 );
circleShape.quadraticCurveTo( -circleRadius, circleRadius, 0, circleRadius );
var circle = new THREE.ShapeGeometry( circleShape);
var material = new THREE.MeshBasicMaterial( { color: color, depthWrite: false} );
var mesh = new THREE.Mesh( circle, material );
this.parent.add( mesh );

var material = new THREE.MeshBasicMaterial( { color: widerColor, depthWrite: false} );
var widerRibbon = new THREE.Ribbon( widerGeometry, material );
this.parent.add( widerRibbon );

var material = new THREE.MeshBasicMaterial( { color: narrowerColor, depthWrite: false} );
var narrowerRibbon = new THREE.Ribbon( narrowerGeometry, material );
this.parent.add( narrowerRibbon ); 
```

我的逻辑是后者将涵盖前者。所以更窄的丝带会覆盖更宽的丝带，丝带会覆盖半圈。

我的困难：

结果是它们相互覆盖（没有depthWrite：false）。

我发现THREE.MeshBasicMaterial可以设置depthWrite为false，我加了，然后我发现较窄的ribbon成功覆盖了较宽的ribbon，但奇怪的是ribbon两端的帽子似乎异常，当我看右边的ribbon时在上面，它工作得很好，但是当我用一个角度看它时，我发现丝带无法覆盖圆圈。

我不知道如何处理这个问题，我只是希望后面的图在它们都具有相同的 z 坐标时覆盖前面的图。

感谢您的指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:55:20.573

如果您想使用“画家的算法”（最后绘制的始终是您所看到的），只需在材质中关闭 Z。也就是在声明材质时将“depthTest”属性设置为false

# eclipse - 将 playframework 与 eclipse 的 scala 工作表插件一起使用

> ID：13891319
> 
> 赞同：1
> 
> 时间：2012-12-15T10:16:48.103
> 
> 标签：eclipse, scala, playframework, worksheet

我尝试将 Eclipse 中的工作表插件与一个游戏项目结合使用，但它似乎不起作用。每个导入都标记为未找到。

有没有人有这个工作，我有什么特别需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:40:33.630

是的，我有这个问题。我为解决它所做的是：

1.  如果您不使用它，我建议您开始使用[Scala-IDE for eclipse](http://scala-ide.org/)
2.  即使我以前有 scala-ide，但当我尝试将 scala 工作表与一个游戏项目一起使用时，我仍然遇到了这个问题。当您遇到计算机问题时，我尝试对 scala 工作表插件执行默认操作：reboot-update-reboot。它奏效了！我当前使用的 Scala Worksheet 版本是（如我的 Eclipse 安装详细信息中所示）：

> Scala 工作表：0.1.2.v-2_09-201210230838-85b738a

检查您的版本是否与我的相同。如果尝试将其删除并重新安装。如果不是，请尝试更新它。告诉我它是否有效。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:45:48.100

这个问题有点笼统，但是：

如果工作表在没有播放框架的情况下正常工作 => 问题应该在于框架的安装：

1.  您是否更新了 PATH（[http://www.playframework.org/documentation/2.0.4/Installing](http://www.playframework.org/documentation/2.0.4/Installing)）？
2.  命令`play help`有效吗？

您是在专门询问 Play 的 Eclipse 插件：您是否遵循[http://www.playframework.org/documentation/1.0.1/ide#eclipse](http://www.playframework.org/documentation/1.0.1/ide#eclipse)上的指南？

哪一步不适合你？

# c# - 如何 在 C# 中使用 HtmlAgilityPack 删除我的 html 字符串中的标签？

> ID：13891322
> 
> 赞同：3
> 
> 时间：2012-12-15T10:17:04.457
> 
> 标签：c#, c#-4.0, html-agility-pack

我有一个 HTML 字符串，我正在使用 HtmlAgilityPack 来解析 html 字符串。

**这是我的 html 字符串**

```
<p class="Normal-P" style="direction: ltr; unicode-bidi: normal;"><span class="Normal-H">sample<br/></span> <span class="Normal-H">texting<br></span></p> 
```

这个 HTML 字符串`<br>`在两个地方都有标签。所以，我想删除这两个标签......

你能帮我删除`<br>`我的html字符串中的所有标签吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T11:01:55.990

这很简单：

*   将 HTML 片段加载到敏捷包中`HtmlDocument`
*   使用xpath 表达式获取所有`<br />`标签`"//br"`
*   `Remove()`使用方法去除上一步得到的标签
*   检查`DocumentNode.OuterHtml`属性中的结果

这是代码：

```
const string htmlFragment =
    @"<p class=""Normal-P"" style=""direction: ltr; unicode-bidi: normal;"">" +
    @"<span class=""Normal-H"">sample<br/></span>" +
    @"<span class=""Normal-H"">texting<br></span></p> ";

var document = new HtmlAgilityPack.HtmlDocument();
document.LoadHtml(htmlFragment);

foreach (var brTag in document.DocumentNode.SelectNodes("//br"))
    brTag.Remove();

Console.WriteLine(document.DocumentNode.OuterHtml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:12:23.030

```
string html = ...;
string html = Regex.Replace(html, "<br>", "", RegexOptions.Singleline); 
```

# javascript - Extjs Combo 显示值 - 如果未找到值

> ID：13891324
> 
> 赞同：4
> 
> 时间：2012-12-15T10:18:08.750
> 
> 标签：javascript, extjs, autocomplete

我正在使用这种技术来完成组合框[http://cdn.sencha.com/ext-4.1.1a-gpl/examples/form/forum-search.html](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/form/forum-search.html)的自动完成功能，它返回名称和类型一辆车，有时类型未知，所以没有返回，我希望它是“无数据”，所以我使用了这个`valueNotFoundText: 'No Data'`但没有用

```
xtype: 'combo',
store: s,
hideTrigger:true,
typeAhead: false,
id: 'search',
queryMode: 'remote',
queryParam: 'query',
displayField: 'name',//+'type',
valueField: 'name',//+'type',
//valueNotFoundText: 'No Data',
 ,listConfig: {
                loadingText: ' Loading...',
                getInnerTpl: function() {
         return  '{name}'+'<br>'+'<p><font size="1">{type}'+':type</font></p>';
                }
                ,
            }
            ,  listeners: { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:56:21.450

我猜您正在寻找这种（简化的工作示例。）

```
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    typeAhead: true, // this will simply show the typed text if nothing is found.
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    tpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
               '<div class="x-boundlist-item">{abbr}</div>',
        '</tpl>'
    ),
    displayTpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
            '<tpl if="name.length == 0"> ',             
               'no data', // You can return any other additional value or formating here
            '<tpl else>',
               '{name}', // You can return any other additional value or formating here
            '</tpl>',                                  
        '</tpl>'
    ),
    valueNotFoundText: 'no data' // this will be displayed if no record is found after setValue()
}); 
```

这是一个有效的**[JSFiddle](http://jsfiddle.net/sran/czrt6/7/)**

**那么这是如何工作的**

只需为下拉菜单设置模板（如果您需要这样做）并为显示字段设置模板。

*这两个例子都是简化的，因为我不知道你的整个模板。*

**更新示例**

*注意：我不会`type`用作属性名称，因为这是一种保留名称，因为它标识字段对象/原语的类型*

```
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name','ctype'],
    data : [
        {"abbr":"AL", "name":"Alabama", "ctype":"AL"},
        {"abbr":"AK", "name":"Alaska", "ctype":"AK"},
        {"abbr":"AZ", "name":"Arizona", "ctype":""}
    ]
});

// Create the combo box, attached to the states data store
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    typeAhead: true, // this will simply show the typed text if nothing is found.
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    tpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
            '<tpl if="ctype.length == 0"> ',             
               '<div class="x-boundlist-item">{name}<p><font size="1">no data</font></p></div>',
            '<tpl else>',
               '<div class="x-boundlist-item">{name}{ctype}<p><font size="1">{ctype}</font></p></div>',
            '</tpl>',
        '</tpl>'
    ),
    displayTpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
            '<tpl if="itype.length == 0"> ',             
               'no data',
            '<tpl else>',
               '{name}', 
            '</tpl>',                                  
        '</tpl>'
    ),
    valueNotFoundText: 'no data', // this will be displayed if no record is found after setValue()
    renderTo: Ext.getBody()
}); 
```

**[JSFiddle](http://jsfiddle.net/sran/czrt6/8/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:46:26.827

您可以使用列表配置[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-cfg-emptyText](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-cfg-emptyText)中的 emptyText 配置选项。ComboBoxes 内部列表类 BoundList 从 View 扩展，因此它遵循相同的 api。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-listConfig](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-listConfig)

```
listConfig: {
    emptyText: 'No Data'
} 
```

# powershell - 将值传递给运行/后台脚本块的最佳方式是什么？

> ID：13891325
> 
> 赞同：0
> 
> 时间：2012-12-15T10:18:14.817
> 
> 标签：powershell

我有启动几个正在运行的脚本块的脚本`start-job`。

将一些变量/值传递给正在运行的后台脚本块的最佳方法是什么？

有一些选项，如服务代理/队列、文件等。有更轻松的方法吗？

例如，

```
$sb = {
    $Value = $args[0] # initial value
    while ($true) 
    {
        # Get more values from caller
        $Value = .....
    }
}
start-job -ScriptBlock $sb -ArgumentList $initValue
# There are more values to send to the script after the script block is started.
while (moreVaulesAvailable)
{
     # $sb.Value = .... newly generated values ? 
} 
```

`Start-Job`启动了另一个 PowerShell 进程。是否有任何内置机制在 PS 进程之间传递值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:56:39.187

您可以使用 MSMQ 来执行此操作。PowerShell V3 附带了一个 MSMQ 模块。下面是一个如何使用 MSMQ 将消息传递给后台任务的示例：

```
$sb = {
    param($queueName)
    $q = Get-MsmqQueue $queueName
    while (1) {
        $messages = @(try {Receive-MsmqQueue -InputObject $q -RetrieveBody} catch {})
        foreach ($message in $messages)
        {
            "Job received message: $($message.Body)"

            if ($message.Body -eq '!quit')
            {
                return
            }
        }
        Start-Sleep -Milliseconds 1000
        "Sleeping..."
    }
}

$queueName = 'JobMessages'
$q = Get-MsmqQueue $queueName
if ($q)
{
    "Clearing the queue $($q.QueueName)"
    $q | Clear-MsmqQueue > $null    
}
else
{
    $q = New-MsmqQueue $queueName
    "Created queue $($q.QueueName)"
}

$job = Start-Job -ScriptBlock $sb -ArgumentList $queueName -Name MsgProcessingJob
"Job started"

$msg = New-MsmqMessage "Message1 for job sent at: $(Get-Date)"
Send-MsmqQueue -Name $q.Path -MessageObject $msg > $null

Receive-Job $job

$msg = New-MsmqMessage "Message2 for job sent at: $(Get-Date)"
Send-MsmqQueue -Name $q.Path -MessageObject $msg > $null

$msg = New-MsmqMessage "!quit"
Send-MsmqQueue -Name $q.Path -MessageObject $msg > $null

Wait-Job $job -Timeout 30
Receive-Job $job
Get-Job $job.Name
Remove-Job $job 
```

当我运行这个脚本时，我得到以下输出：

```
C:\PS> .\MsmqQueue.ps1
Clearing the queue private$\jobmessages
Job started

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
4      MsgProcessin... BackgroundJob   Completed     True            localhost            ...
Job received message: Message1 for job sent at: 12/15/2012 17:53:39
Sleeping...
Job received message: Message2 for job sent at: 12/15/2012 17:53:39
Sleeping...
Job received message: !quit
4      MsgProcessin... BackgroundJob   Completed     False           localhost            ... 
```

# entity-framework - 我应该如何处理没有实体有键的 EF 代码优先模型？

> ID：13891331
> 
> 赞同：0
> 
> 时间：2012-12-15T10:19:15.350
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我已经使用实体数据模型向导根据 SQL Server 中的对象目录视图（即 sys.objects、sys.tables、sys.columns 等）生成 EF 数据模型（带有 POCO 的 edmx）。当我尝试访问通过我的 DbContext 的 DbSet 属性的任何数据，EF 都会引发 ModelValidationException，抱怨实体没有定义键。

我可以轻松地修改生成实体 POCO 的 T4 模板以包含一个标有 [Key] 属性的虚拟属性，但这似乎有点笨拙，因为现在我的实体类有一个不属于它们的“幻像”属性. 为键列选择名称也是一个问题，但我可以做一些事情，比如为每个类生成一个唯一键列名称的 GUID。

但是，难道没有更好、更简洁的方式告诉 EF 我不需要键列，因为这个模型是严格只读的？

**附录：**如果我使用*Entity Framework Power Tools - Reverse Engineer Code First*工具，它会为每个实体创建一个映射类（派生自`EntityTypeConfiguration`），并且在实体没有定义键的情况下，它使用实体中的所有字段定义一个。

# c++ - 无法使用 Qt 下载文件 >= 1GB

> ID：13891333
> 
> 赞同：1
> 
> 时间：2012-12-15T10:19:23.740
> 
> 标签：c++, qt

我有一个程序应该通过网络下载文件。只要文件很小（<1GB），一切都很好。但是当文件大于 1GB 时，会发生以下两种情况之一：
a) 如果我将来自 QNetworkReply 的信号与下载进度连接到我的插槽之一，应用程序会因 std::bad_alloc 崩溃
b) 如果我没有连接来自 QNetworkReply 的任何信号，应用程序在 73% 时停止。
任何帮助都非常感谢。
这是我在连接中使用的代码和插槽：

```
QNetworkReply* reply = network_access_manager_->get(request);
    connect(reply,SIGNAL(downloadProgress(qint64,qint64)),parent_,SLOT(downloadProgress(qint64,qint64))); 
```

这是插槽：

```
void MainWindow::downloadProgress(qint64 bytesReceived,qint64 bytesTotal)
{

    try
    {
    ui->label->setText(QString::number(bytesReceived));

    ui->label_2->setText(QString::number(bytesTotal));
    ui->progressBar->setRange(0,bytesTotal);
    ui->progressBar->setValue(bytesReceived);
    }
    catch(std::exception& e)
    {
        qDebug() << e.what();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:42:33.337

阅读[QNetworkReply](http://qt-project.org/doc/qt-4.8/QNetworkReply.html)的文档：

> QNetworkReply 是一个顺序访问的 QIODevice，这意味着一旦从对象中读取数据，它就不再由设备保存。因此，如果需要，应用程序有责任保留这些数据。每当从网络接收到更多数据并进行处理时，就会发出 readyRead() 信号。

因此，只需在下载期间随时使用 readyRead() 信号从 QNetworkReply 读取，然后写入文件或任何您想要的地方。

在这里您可以找到一些其他信息（特别是阅读 Frank Osterfeld 的回答）：[Downloading File in Qt From URL](https://stackoverflow.com/questions/4383864/downloading-file-in-qt-from-url)。

# html - 奇怪的 行为

> ID：13891336
> 
> 赞同：0
> 
> 时间：2012-12-15T10:19:46.047
> 
> 标签：html, css, html-lists

我正在开发这个网站：

[https://dl.dropbox.com/u/10264776/Web%20sustn.sk/odbory/fotograficky_dizajn.html](https://dl.dropbox.com/u/10264776/Web%20sustn.sk/odbory/fotograficky_dizajn.html)

出于某种原因，此框右侧（Ctrl+F 1992）呈现出一种奇怪的行为，其中 li 的内容被推了几个像素，这不是样式，它们对所有样式都是相同的，但是我注意到它是只有 ul 没有它的内容从一行推送到另一行，就像表中的其他行一样。

任何想法如何解决这一问题？所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:30:16.117

试着评论 style.css 第 119 行

```
.list {
    border-color: #BBBBBB;
    border-style: solid;
    border-width: 1px 0;
    margin-bottom: -1px;
    /*width: 560px;*/
} 
```

通过这样做，您的问题将仅解决该元素，但您的宽度将从应用 .list 的整个元素中删除，因此您需要调整提到 1992 的特定表。它是表格行为，它根据文本和布局或呼吸空间扩展表格单元格。所以你需要把宽度放在那个特定的表格单元格上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:35:41.107

像这样使用

```
.list ul li
{
list-style: none;
padding:0;
margin:0;
padding-left: 1em; 
text-indent: -.7em;
}

li:before 
{
content: "• ";
color: red; /* or whatever color you prefer */
} 
```

详细解释看[这里](https://stackoverflow.com/questions/5306640/how-to-define-the-color-of-bullets-in-ul-li-lists-via-css-without-using-any-im/5308785#comment18326651_5308785)

# c# - 如何在asp.net中复制文件

> ID：13891339
> 
> 赞同：0
> 
> 时间：2012-12-15T10:20:01.290
> 
> 标签：c#, asp.net, c#-4.0, asp.net-4.0

我使用 ASP.net 并在网站上有一个 .docx 文件：

```
Server.MapPath("~") + @"Files\tmp.docx". 
```

我想将此文件复制到

`Server.MapPath("~") + @"Files\Docx\"`以“D210”命名。

如何复制此文件并重命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:29:36.100

你需要做 IO 工作所以不要忘记添加`Using System.IO;`
，这是你需要的代码：

```
//1.Prepare the name for renaming
string newName = "D210";

//2.Create the Folder if it doesn't already exist
if(!Directory.Exists(Server.MapPath("~")+@"\Files\Docx\"))
    Directory.CreateDirectory(Server.MapPath("~")+@"\Files\Docx\");

//3.Copy the file with the new name
File.Copy(Server.MapPath("~") + @"Files\tmp.docx",Server.MapPath("~")+@"\Files\Docx\"+newName+".docx"); 
```

# .net - 如何将 SQL Server 2012 Express 设置与 .NET windows 应用程序设置合并？

> ID：13891342
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:20:45.563
> 
> 标签：.net, sql-server

如何将 SQL Server 2012 Express 与 .NET Windows 应用程序设置或 exe 合并？请给我 SQL Server 2012 Express 的下载链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:25:26.070

很简单：你没有。合并设置很糟糕——你失去了更新/维护它们的能力。

您所做的是拥有一个引导应用程序，该应用程序在安装应用程序之前安装 SQL Server express Standard Setup。

看看 Visual Studio - 它也是如此。它安装的所有先决条件都以未修改的形式存在，包装应用程序（您启动的 exe）只是调用它们来安装它们。

目前，制作安装程序（WIX 工具集）的唯一真正方法对此具有引导机制。

# java - 通过更新到最新的 anddorid SDK 和 ADT，“AndEngine”示例不在 Eclipse 上运行

> ID：13891353
> 
> 赞同：3
> 
> 时间：2012-12-15T10:23:13.740
> 
> 标签：java, android, andengine, eclipse-adt

它工作正常，但是当我将我更新`eclipse`到最新版本时`ADT`，`SDK`它给了我这个错误。

```
12-15 14:58:07.501: E/AndroidRuntime(639): java.lang.NoClassDefFoundError: org.andengine.AndEngine 
```

如果有人在此之前遇到过这种情况，请帮助我，因此我的 AndEngine 项目也给了我同样的错误。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:51:44.367

我已经按照这些步骤解决了这个问题。

首先，我创建了名为的新库`AndEngineLibs`并将所有支持 AndEngine 的库添加到其中。

然后在项目properties->java build path->Order and Export中勾选`AndEngineLibs`

如图所示。我不知道它是否相关，但它对我有用:)![在此处输入图像描述](../Images/cd0026d67080544644e6b1f35d29657e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T11:08:39.880

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在`/libs`文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于`/libs`. 将其放在那里并将其重新添加到构建路径中。

大多数情况下，出现此类错误是因为较新版本的 ADT 要求所有外部 jar 都在`libs`文件夹中。

# seo - 将商店名称添加到元标题 OpenCart 1.5.4

> ID：13891355
> 
> 赞同：1
> 
> 时间：2012-12-15T10:23:26.267
> 
> 标签：seo, metadata, opencart

我有一个商店设置，搜索引擎优化在排名方面似乎很好。但是，我注意到的一件事是 OpenCart 在元标题中不包含商店名称。

有没有办法在不进行任何扩展的情况下对其进行硬编码？任何指针都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:07:44.750

您可以通过编辑`header.tpl`文件来添加它`/catalog/view/theme/your-theme-name/template/common/`

# python - Google App Engine：流量监控

> ID：13891356
> 
> 赞同：3
> 
> 时间：2012-12-15T10:23:37.720
> 
> 标签：python, google-app-engine

监控 Google App Engine 托管网站的网站流量的最佳方法是什么？

在每个页面处理程序中放置一些代码来记录对数据存储的每个页面请求是相当简单的，现在（感谢 stackoverflow）我有代码来[记录引用站点](https://stackoverflow.com/questions/13887187/google-app-engine-traffic-source)。

还有[一个](https://stackoverflow.com/questions/4686938/how-to-structure-google-datastore-app-engine-web-traffic-model)关于使用数据存储记录流量的问题，但它没有考虑其他选项（如果有的话）。

我担心的是数据存储很昂贵。还有其他方法吗？人们通常会实施流量监控，还是我过于热心？

如果我确实通过数据存储实现流量监控，建议捕获哪些字段？什么是好的和/或常见的做法？

我会选择：时间戳；页; 推荐人；IP地址; 用户名（如果已登录）。还有其他建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T10:48:38.533

您提到的所有项目都已由内置 App Engine 记录器记录。为什么需要复制它？如果需要，您可以定期下载日志进行分析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T11:44:53.217

人们通常使用谷歌分析（或类似的东西），因为它进行客户端跟踪并提供比服务器端跟踪更多的洞察力。

如果您只需要服务器端跟踪，那么分析日志就足够了。Log API 的问题在于它可能很昂贵，因为它不进行真正的查询：对于每次日志搜索，它都会遍历所有日志（在范围内）。

您可能想查看[Mache](http://blog.streak.com/2012/07/export-your-google-app-engine-logs-to.html)，这是一个将所有 GAE 日志导出到具有适当查询功能的 Google BigQuery 的工具。

另一种选择是[下载日志](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Downloading_Logs)并使用本地工具对其进行分析。GAE 日志采用 Apache 格式，因此有[很多可用的工具](https://www.google.com/search?q=apache%20log%20analyzer&aq=f&oq=apache%20log%20analyzer)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T10:53:37.090

您可以使用日志记录模块，它带有单独的配额限制。

> 7 MB，跨越 69 天（保留限制的 1%）

我不知道限制是多少，但这是我的应用程序中的一条线，所以它似乎很大。

然后，您可以添加到日志中

```
logging.debug("something to store") 
```

如果它还没有包含您需要的内容，请使用以下命令在本地读取：

```
appcfg.py --num_days=0 request_logs appname/ output.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T10:53:01.570

您通过（或等效的 python）写出的任何内容都`System.err.println`将自动附加到应用程序引擎日志中。因此，例如，您可以创建自己的日志记录格式，将`println`'s 放在所有页面上，然后下载该格式的日志和 grep。例如，如果这是您的格式：

```
MYLOG:url:userid:urlparams 
```

然后下载日志并通过管道`grep ^MYLOG`传输，它将为您提供网站的所有流量。

# android - 将拍摄的图像从相机设置为 ImageButton 背景

> ID：13891361
> 
> 赞同：0
> 
> 时间：2012-12-15T10:24:41.510
> 
> 标签：android, imagebutton

我正在从相机拍摄照片，并想将其设置为 ImageButton 背景的背景。

拍照，将其呈现在 ImageView 中并将其保存到设备以及完整的路径效果很好。

如果有问题，这是我在 OnActivityResult 中的处理代码：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) { // Handling the photo

    ImageView imageView=(ImageView)findViewById(R.id.imageView1);
    if (requestCode == TAKE_A_PHOTO) {
        // Check if the result includes a thumbnail Bitmap
        if (data != null) {
            if (data.hasExtra("data")) {
                Bitmap thumbnail=data.getParcelableExtra("data");
                imageView.setImageBitmap(thumbnail);
            }
        } else {
            // If there is no thumbnail image data, the image
            // will have been stored in the target output URI.
            // Resize the full image to fit in out image view.
            int width = imageView.getWidth();
            int height = imageView.getHeight();
            BitmapFactory.Options factoryOptions = new BitmapFactory.Options();
            factoryOptions.inJustDecodeBounds = true; BitmapFactory.decodeFile(outputFileUri.getPath(),
                    factoryOptions);
            int imageWidth = factoryOptions.outWidth; int imageHeight = factoryOptions.outHeight;
            // Determine how much to scale down the image
            int scaleFactor = Math.min(imageWidth/width, imageHeight/height);
            // Decode the image file into a Bitmap sized to fill the View
            factoryOptions.inJustDecodeBounds = false; factoryOptions.inSampleSize = scaleFactor; factoryOptions.inPurgeable = true;
            Bitmap bitmap = BitmapFactory.decodeFile(outputFileUri.getPath(),
                    factoryOptions);
            imageView.setImageBitmap(bitmap);
            Toast.makeText(this, "Image saved to "+ incomePhotoURL, Toast.LENGTH_LONG).show();

        }
    }
    else if (requestCode == LOAD_AN_IMAGE) {
        Uri selectedImageUri=data.getData();
        isAudioRecordPath=idanUtils.getRealPathFromURI(selectedImageUri, AddIncome.this);
        Toast.makeText(this, "Image loaded from "+incomePhotoURL, Toast.LENGTH_LONG).show();
        Log.i(ItemsDataBase.TAG, "Image loaded from "+incomePhotoURL);
    }
} 
```

# java - 如何更改java小程序消息框的标题？

> ID：13891363
> 
> 赞同：0
> 
> 时间：2012-12-15T10:24:52.117
> 
> 标签：java, swing, applet, message, joptionpane

嘿，所以我按下按钮并出现一个消息框，名为“消息”。我如何重命名这个标题？

寻找这个，但没有找到任何地方。

这就是我创建一个按钮然后激活它以便弹出消息的方式。没有粘贴整个代码，因为它很长，但这就是这个按钮。

```
private JButton readmeButton;

readmeButton = new JButton("Readme");
layout.setConstraints(readmeButton, constraints);
chartPanel.add(readmeButton);
readmeButton.addActionListener(this);

JOptionPane.showMessageDialog(null, "lalala"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:35:14.357

`JOptionPane.showMessageDialog`有多个重载。其中之一是[`showMessageDialog(Component parentComponent, Object message, String title, int messageType)`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane.html#showMessageDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int%29)。

你可以使用这个：

```
JOptionPane.showMessageDialog(null, "lalala", "title", JOptionPane.PLAIN_MESSAGE); 
```

最后一个参数的其他选项是`ERROR_MESSAGE`, `INFORMATION_MESSAGE`, `WARNING_MESSAGE`, `QUESTION_MESSAGE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T07:19:37.707

在你的代码中试试这个：

```
JOptionPane.showMessageDialog(null, "Hello","Exit",JOptionPane.QUESTION_MESSAGE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:44:01.463

利用

```
JOptionPane.showMessageDialog(null, "lalala","Readme",JOptionPane.PLAIN_MESSAGE); 
```

## [参考](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

在上面的链接上，还有许多其他选项。看看它。

# jquery - 如何使用 jquery 循环播放幻灯片

> ID：13891367
> 
> 赞同：1
> 
> 时间：2012-12-15T10:25:13.053
> 
> 标签：jquery

基本上我正在尝试使用 jquery 创建幻灯片。此处幻灯片导航工作正常，但幻灯片循环不工作。
我在这里试过我的**[jsfiddle](http://jsfiddle.net/sureshpattu/GfpHz/2/)**
我的脚本是：

```
 var currIndex = -1;

 function slideshow(slideshowId){
     var len=$("ul#"+slideshowId+" li.slides").length;
     currIndex = (currIndex + 1) % len;
     $("ul#"+slideshowId+" li.slides").hide();
     $("ul#"+slideshowId+" li.slide"+currIndex+"").fadeIn();     
 }

 function slidepagenation(slideshowId,slideno){    
        $("ul#"+slideshowId+" li.slides").hide();
        $("ul#"+slideshowId+" li.slide"+slideno+"").fadeIn();
        currIndex = slideno;
 }

var tshone = 0;
var tshtwo = 0;

    slideshow('slideshow-one');
    tshone =setInterval(slideshow('slideshow-one'), 500);
     slideshow('slideshow-two');
    tshtwo =setInterval(slideshow('slideshow-two'), 500);

    $('ul.slideshow-one li a').click(function(){
        clearInterval(tshone);
        var element = $(this);
        var slideshowid=element.parent().parent().attr('class');
        var slideno = $("ul.slideshow-one li a").index($(this));
        slidepagenation(slideshowid,slideno); 
    });

    $('ul.slideshow-two li a').click(function(){
        clearInterval(tshtwo);
        var element = $(this);
        var slideshowid=element.parent().parent().attr('class');
        var slideno = $("ul.slideshow-two li a").index($(this));
        slidepagenation(slideshowid,slideno); 
    }); 
```

​我的 html 在这里：

```
<ul class="slideshow" id="slideshow-one">
    <li class="slides slide0" style="display:block">
    Slide one
    </li>
    <li class="slides slide1">
    Slide two
    </li>
    <li class="slides slide2">
    Slide three
    </li>     
</ul>
<div class="full-length clearfix txt-center">
<ul class="slideshow-one">
    <li><a>1</a></li>
    <li><a>2</a></li> 
    <li><a>3</a></li>     
</ul>
</div>
<br><br>
<ul class="slideshow" id="slideshow-two">
    <li class="slides slide0" style="display:block">
    Slide one
    </li>
    <li class="slides slide1">
    Slide two
    </li>    
</ul>
<div class="full-length clearfix txt-center">
<ul class="slideshow-two">
    <li><a>1</a></li>
    <li><a>2</a></li>    
</ul>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:29:14.050

`setInterval`接受一个*函数*在间隔上运行，但你给它`undefined`：

```
tshone =setInterval(slideshow('slideshow-one'), 500); 
```

...因为该行*调用* `slideshow`并将其返回值传递给`setInterval`. 由于`slideshow`不返回值，因此调用它的结果是`undefined`.

反而：

```
tshone =setInterval(function() {
    slideshow('slideshow-one');
}, 500); 
```

现在我们正在创建一个函数并将其传递给`setInterval`. `slideshow`该函数每半秒调用一次。

另请注意，您只使用了**一个** `currIndex`，但您尝试将它与两个不同的幻灯片一起使用。那是行不通的。我建议`currIndex`完全消除并从 DOM 中找出哪个幻灯片处于活动状态。像这样的东西：

```
function slideshow(slideshowId){
    var slideShow = $("ul#"+slideshowId);
    var slide;

    slide = slideShow.find("li.slides:visible");
    if (slide.length > 1) {
        slide.hide();
        slide = $();
    }
    slide = slide.hide().nextAll("li.slides").first();
    if (slide.length == 0) {
        slide = slideShow.find("li.slides").first();
    }
    slide.fadeIn();
} 
```

# artificial-intelligence - 遗传算法和神经网络

> ID：13891369
> 
> 赞同：1
> 
> 时间：2012-12-15T10:25:43.583
> 
> 标签：artificial-intelligence, neural-network, genetic-algorithm

我现在正在研究遗传算法和神经网络，我想用遗传算法训练神经网络，用神经网络解决OCR问题，我还是不明白训练方法，假设我有 5 个训练集，每组有 26 个字符（AZ），我应该进行从 A1-Z1 到 A5-Z5（每组）或 A1-A5 到 Z1-Z5（每字符）的训练以及多少代应该按字符生成？或者直到错误最小？

我想这就是我现在想问的全部

如果我的问题有什么不清楚的地方请告诉我

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T18:36:02.363

实际上，你真的可以为每个字母开发一个神经网络。只需使用自动关联网络（自动编码器）。这些网络经过训练，以便输出再现输入。这样你就可以训练 26 个网络。在验证时，对于每个字母，获得最低错误的网络是代表该字母的网络。这种方法在分类问题上取得了很好的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:23:55.747

具有 26 个输出的神经网络是奇数。您应该为每个字母建立一个网络，但让它在训练期间看到所有字母，以便它可以在看到预期字母时告诉您。对于代数，您通常应该满足以下两个条件之一：错误变得低于阈值或代数超过限制。这取决于您选择这些参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T15:45:06.060

用 GA 训练 ANN 会非常缓慢。也许你应该考虑一些混合方法。在将数据输入 ANN 之前，您需要进行大量图像预处理。此外，您需要非常仔细地设计您的 ANN。您应该考虑输入的大小和输出的大小。使用 GA，您可以优化两件事：1\. ANN 拓扑或 2\. ANN 权重。

# ruby-on-rails-3 - 为什么 unicorn.pid 已更新但进程未重新启动？

> ID：13891373
> 
> 赞同：0
> 
> 时间：2012-12-15T10:26:08.253
> 
> 标签：ruby-on-rails-3, unicorn

我刚刚切换到在独角兽上部署我的 Rails 项目。在我的 capistrano 食谱`deploy:restart`中是

```
task :restart, :except => { :no_release => true } do
    run "cd #{shared_path}/pids && kill -s USR2 `cat unicorn.pid`"
end 
```

但是我不时发现，有时部署过程会成功完成，但是尽管更新了 unicorn.pid，但独角兽进程仍然保持不变。

例如，我在 12 月 15 日部署，并监控`unicorn.pid`更新，但如果我运行`ps -ef | grep unicorn`，我可以看到 unicorn 进程在我上次部署时仍在启动，因此它引用了最后一个发布文件夹，导致麻烦。

这是为什么？

以下是我的`unicorn.rb`文件：

```
env = ENV["RAILS_ENV"]

case env
when 'pre', 'production'
  @app_path = '/home/deployer/deploy/myproject'
end

if env == 'pre' || env == 'production'
  user 'deployer', 'staff'
  shared_path = "#{@app_path}/shared"
  stderr_path "#{shared_path}/log/unicorn.stderr.log"
  stdout_path "#{shared_path}/log/unicorn.stdout.log"

  if env == 'production'
    worker_processes 6
  else
    worker_processes 2
  end

  working_directory "#{@app_path}/current" # available in 0.94.0+

  listen "/tmp/myproject.sock", :backlog => 64

  timeout 30

  pid "#{shared_path}/pids/unicorn.pid"

  preload_app true
  GC.respond_to?(:copy_on_write_friendly=) and
  GC.copy_on_write_friendly = true

  before_fork do |server, worker|

    defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!

    old_pid = "#{shared_path}/pids/unicorn.pid.oldbin"
    if File.exists?(old_pid) && server.pid != old_pid
      begin
        Process.kill("QUIT", File.read(old_pid).to_i)
      rescue Errno::ENOENT, Errno::ESRCH
        # someone else did our job for us
      end
    end
  end

  after_fork do |server, worker|
    defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:02:33.773

我不确定为什么会这样，但我个人在通过 Capistrano 部署时不会杀死 Unicorn PID。

相反，我通过 god gem 启动 unicorn，并配置 god 文件，以便在文件被触摸时重新启动 unicorn。

当我通过 Capistrano 部署时，我会在每次部署后触摸文件，强制重启独角兽进程

```
namespace :deploy do
  desc "Touch restart.txt, which will restart all God processes"
  task :restart do
    run "touch #{ current_path }/tmp/restart.txt"
end 
```

您还需要将此模块添加到 .god 文件中：

```
module God
  module Conditions
    class RestartFileTouched < PollCondition
      attr_accessor :restart_file
      def initialize
        super
      end

      def process_start_time
        Time.parse(`ps -o lstart  -p #{self.watch.pid}`)
      end

      def restart_file_modification_time
        File.mtime(self.restart_file)
      end

      def valid?
        valid = true
        valid &= complain("Attribute 'restart_file' must be specified", self) if self.restart_file.nil?
        valid
      end

      def test
        process_start_time < restart_file_modification_time
      end
    end
  end
end 
```

# javascript - 将具有自定义名称的数组插入二维数组 - javascript

> ID：13891374
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:26:37.517
> 
> 标签：javascript

我有一个像这样创建的二维数组

```
var books = new Array();  // create an Array
        var book1 = new Array();
      book1.push("1");
      book1.push("adfgsdg");
      book1.push("dfgsdfg");
      book1.push("dfgds");
      book1.push("44.95");
      book1.push("dfgsd");
      book1.push("dfgsdg");
      books.push(book1);
    var book2 = new Array();
      book2.push("2");
      book2.push("gdhff");
      book2.push("fghfd");
      book2.push("fghdf");
      book2.push("44.95");
      book2.push("2000-12-16");
      book2.push("fghfghd");
      books.push(book2); 
```

你能告诉我如何动态创建一个新的 book3、book4.... 数组并推入 books 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:30:11.997

只需使用一个对象：

```
var books = {book1: ['book1 title', 'book1 - title2']};
books['book2'] = ['book2 titles'];
books.book3 = [];//works, too
books.book3.push('foobar'); 
```

如果您坚持使用引用特定数组的变量，那很容易做到：

```
var book2 = books.book2;//arrays are objects, so:
book2.push('A second title');
console.log(books.book2[1]);//logs "A second title" 
```

十分简单。在*动态名称前面*，只是一个简单的例子：

```
books['book' + someVar] = []; 
```

工作得很好。

正如@raghaw 指出的那样，也许您可​​以做一些解释：
JavaScript 并不真正支持关联数组，而是使用对象（即使数组也只是*“拉皮条”*对象，但这是另一回事）

您可以通过调用构造 ( ，就像您所做的那样) 创建任何对象的新实例`new X()`，但是对于本机对象类型（例如 Array 和 Object），不建议这样做（例如`new Array(10);`，`new Array('10')`行为会有所不同）。
在这些情况下，最好使用文字符号：

```
var wrong = new Object();//not "wrong", but impredictable 
var better = {};//or new [whateverTypeOfObject]();
//ditto for arrays:
var dangerous = new Array();
var safe = []; 
```

要为对象/数组分配已经存在*的*一组值，只需填写它们：

```
var myObject = {key: "value",
                theValue: {can: 'be',
                           anything: ["even", "another", "object"]}
               }; 
```

可以使用点表示法或方括号表示法来访问数据：

```
console.log(myObject.theValue['can']);//be
//===
console.log(myObject.theValue.can);//be
//===
console.log(myObject["theValue"]["can"]);//be 
```

如果您使用变量作为键，则必须使用括号表示法。如果您觉得需要更多信息，[请查看 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)，花一些时间在该站点上 - 这是 JS 的一个很好的参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:44:31.263

首先，我认为 Elias 的回答非常好。但是，如果您没有心情去 OO，只需按照 raghavv 在评论中所说的创建书籍 3 和 4，然后将它们全部推送到书籍数组中

```
books.push(books1);
books.push(books2);
books.push(books3);
books.push(books4); 
```

它的结果实际上是这样的

```
var books[
    books1[value1, value2, value3],
    books2[value1, value2, value3],
    books3[value1, value2, value3],
    books4[value1, value2, value3]
]; 
```

# vim - 删除 VIM 中除第一列之外的所有内容

> ID：13891376
> 
> 赞同：16
> 
> 时间：2012-12-15T10:26:57.523
> 
> 标签：vim, editing

我有一个文本文件，我想删除除每行第一个单词之外的每个单词，但我不知道该怎么做。

所以，如果我有：

```
one two three
four five
six 
```

我想留在：

```
one
four
six 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-15T10:29:16.443

如果这些行不以空格开头，您可以用`' .*'`空字符串替换（匹配第一个单词之后的所有内容）：

```
:%s/ .*//g 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T19:42:50.477

一个更强大的解决方案是通过一个非常擅长这些操作的程序来过滤它：`awk`.

假设您有以下内容：

```
one two three

  four five
            six 
```

运行`:%!awk '{print $1}'`，你会得到：

```
one

four
six 
```

`awk`的默认字段分隔符是空格，但您可以根据需要将其更改为您想要的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T22:07:46.337

或者，您可以使用宏来完成。在正常模式下键入`qa`开始在寄存器 a 中录制宏。然后键入`0elDj`以删除当前行上除第一个单词之外的所有内容，然后转到下一行。再次键入`q`以结束录制宏。

现在您可以在任何带有`@a`. 运行`:%norm! @a`以将宏应用于缓冲区中的每一行。

通过这种方式，您可以重复任何您想要的复杂操作，而不仅仅是替换。我喜欢宏:)

编辑：请注意，当一行严格少于 2 个字符时，它不起作用。因此，这通常不是解决此问题的最佳方法。

# android - 如果没有条目，则活动崩溃

> ID：13891377
> 
> 赞同：1
> 
> 时间：2012-12-15T10:27:01.403
> 
> 标签：android, android-activity

我有个问题。当有条目时，统计活动正常工作。但是，如果没有条目，则 stast 活动将崩溃。请帮我。需要一些东西来防止它。（我不是程序员，所以对我来说并不容易）

```
package com.sudarmuthu.android.wt.activities;

import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

import com.sudarmuthu.android.wt.R;
import com.sudarmuthu.android.wt.data.DBUtil;
import com.sudarmuthu.android.wt.data.Entry;

/**
 * Activity class to handle stats
 * 

public class EntriesStatsActivity extends Activity {

// for debugging
private static boolean D = true;
private static String TAG = "WT - EntriesStatsActivity";

private List<Entry> mEntries;

/* (non-Javadoc)
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.entry_stats);

    Bundle bundle = getIntent().getExtras();
    int typeId = bundle.getInt("typeId");

    if (D) Log.d(TAG, "Got type id: " + typeId);

    mEntries = DBUtil.fetchEntries(this, typeId, null);
    Entry firstEntry = mEntries.get(0);

    int count = mEntries.size();
    float sum = 0;
    float average = 0;

    float min = Float.parseFloat(firstEntry.getValue());
    float max = Float.parseFloat(firstEntry.getValue());

    // calculate
    for (Entry entry : mEntries) {
        float value = Float.parseFloat(entry.getValue());
        sum += value;

        if (value < min) {
            min = value;
        }

        if (value > max) {
            max = value;
        }
    }

    average = sum / count;

    // populate the values
    TextView statsCount = (TextView) findViewById(R.id.statsCount);
    statsCount.setText("" + count);

    TextView statsSum = (TextView) findViewById(R.id.statsSum);
    statsSum.setText("" + sum);

    TextView statsAverage = (TextView) findViewById(R.id.statsAverage);
    statsAverage.setText("" + average);

    TextView valueFrom = (TextView) findViewById(R.id.valueFrom);
    valueFrom.setText("" + min);

    TextView valueTo = (TextView) findViewById(R.id.valueTo);
    valueTo.setText("" + max);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:31:37.120

如果没有条目，`mEntries.size()`则等于 0。所以当你这样做时

```
average = sum / count; 
```

你除以 0，它会抛出一个`Arithmetic Exception`（你不能将一个数字除以 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:44:41.297

你可能会得到一个空指针异常：

```
mEntries = DBUtil.fetchEntries(this, typeId, null);
if( mEntries == null ) {
   return;
} 
```

# azure-web-app-service - 我可以将 Windows Azure 共享网站扩展到多个实例吗？

> ID：13891379
> 
> 赞同：1
> 
> 时间：2012-12-15T10:27:29.627
> 
> 标签：azure-web-app-service

查看Windows Azure网站门户网站，在“比例”页面下，选择共享选项时，可见实例计数滑块。然而，滑块不会移动。

我想使用共享网站的 2 个实例。我认为这应该是可能的，因为它是一项付费服务​​，我只会被收取双倍的费用。我还不需要完整的 RESERVED 选项。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:09:44.503

根据[文档](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-scale-websites/#howtochangescale)和这个[介绍视频](http://www.youtube.com/watch?v=VFIUxsuGopc)应该是可能的。[Azure 网站论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/9dffff8d-ed04-4e42-9e81-7b6917f2c814)中也有讨论此主题的主题。管理门户帮助还记录了**共享实例计数**。

请记住，网站仍处于预览阶段，因此可用性可能会有所不同，并且某些限制尚未最终确定。

我刚刚尝试过，但无法在两个不同的位置扩展新创建的共享网站（滑块刚刚停留在 1）。

**2013-01-25 更新**：在一些更改期间，我刚刚注意到北欧站点的共享实例计数现在最多可以更改为 6。

# jquery - 在 JQuery 中从数码相机/扫描仪设备捕获图像/文档？

> ID：13891384
> 
> 赞同：0
> 
> 时间：2012-12-15T10:28:40.503
> 
> 标签：jquery

使用 JQuery，是否有可能从连接到计算机的数码相机/扫描仪捕获图像/扫描文档？这些设备仅通过 USB 端口连接。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:32:43.750

假设客户端基于浏览器的 javascript，简单的答案是否定的，jQuery 本身不能执行此任务。

可以想象，jQuery 可以用作执行此类任务的更广泛的软件应用程序的一部分。该应用程序将需要重要的其他软件与设备通信并以可以在浏览器中呈现的方式提供数据。我不知道具有这种特定架构的捕获应用程序，但完全有可能存在一个。

在这样的应用程序中，jQuery 也可能被用作服务器角色的一部分。在这种情况下，我们将讨论 Node.js，它（简而言之）使用 ECMA-262 (javascript) 作为定义服务器行为的应用程序编程语言。

# c++ - 动态内存分配-为什么程序末尾没有“删除”？

> ID：13891388
> 
> 赞同：6
> 
> 时间：2012-12-15T10:29:03.097
> 
> 标签：c++

关于以下程序，我有 2 个问题： 1\. 程序是否仅将元素（类型矩形和六边形）创建为动态的，或者指向它们的指针也是动态的？

2.为什么程序最后没有删除。例如这样的事情：（如果我正确地假设只有元素是动态的..）

```
for(i=0;i<3;i++)
    delete shapeArray[i]; 
```

非常感谢，这个网站在我的老师无法帮助的事情上帮助了我很多！石然

该计划是：

```
 int main()
{
 // Create array of pointers to Shapes of various types.
 const int NUM_SHAPES = 3;

 Shape * shapeArray[] = { new Hexagon(),
 new Rectangle(),
 new Hexagon()
 };

 // Set positions of all the shapes.
 int posX = 5, posY = 15;
 for (int k = 0; k < NUM_SHAPES; k++)
     {
 shapeArray[k]->setPosition(posX, posY);
 posX += 10;
 posY += 10;
};

 // Draw all the shapes at their positions.
 for (int j = 0; j < NUM_SHAPES; j++)
{
 shapeArray[j]->draw();
 }

 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T10:36:47.240

1.  您的程序在堆栈上创建一个指向 Shape 的指针数组。数组大小在编译时从初始化列表 {} 的长度已知。初始化器列表中的每个元素都是通过 operator new 在堆上创建的 Shape 的地址。

2.  它们没有被释放的事实是不好的风格，当程序退出时，您的操作系统将释放分配的动态内存，因此在这种特殊情况下不会产生一些后果，但是不删除内存可以检测“真正的”内存泄漏更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T10:36:34.123

1) 是的。它只为指针分配内存。它创建一个包含 3 个指针的数组，其中包含以下内容：

```
Shape * shapeArray[] = { new Hexagon(),
 new Rectangle(),
 new Hexagon()
 }; 
```

2) 在程序退出时，分配给指针的内存通常会被操作系统重新校准。但是，您应该`delete`明确地使用它们，以免依赖于操作系统所做的事情，并且随着程序大小的增长，您可能会失去跟踪并遇到内存泄漏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-15T10:32:38.090

您的程序占用的所有内存将在操作系统退出后释放，因此没有理由在此处删除它。

# c++ - cpp文件中的纯虚拟接口实现

> ID：13891394
> 
> 赞同：2
> 
> 时间：2012-12-15T10:29:42.837
> 
> 标签：c++, header-files, virtual-inheritance

将纯虚拟接口的实现放在cpp中并完全跳过头文件是一种好习惯吗？

```
A.h
struct A
{
    virtual void func() = 0;
};
B.cpp
class B : public A
{
   virtual void func() override {
   ...
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:45:45.463

必须有人*使用*该类`B`，并且他们必须从某个地方获取 的实例，`B`即使他们只通过`A*`. 所以你可以有例如：

啊

```
struct A
{
    virtual void func() = 0;
    virtual ~A() {}
}; 
```

溴化氢

```
#include "A.h"
A *Bfactory(); 
```

B.cpp

```
#include "B.h"
struct B : public A { ... };
A *Bfactory() { return new B(); } 
```

另一方面，这是一个相当“弱”的工厂函数，因为它只返回`B`. 也许在某个地方会有另一个工厂函数`A`根据其参数创建不同的派生类。该函数需要包含`A.h`、`B.h`等`C.h`，但如果它总是用于`Bfactory`创建 的实例，`B`则不需要 . 的类定义`B`。所以在这种情况下，类定义只存在于`B.cpp`.

顺便说一句，我从工厂返回了一个原始指针。在现实生活中，您可能更喜欢返回一个`unique_ptr`或其他智能指针。如果这样做，那么实际上可以避免在`A`. 但我怀疑这通常是否值得。

# linux - Linux 上的 Indy HTTP 服务器仅返回响应文本的最后一个字符

> ID：13891395
> 
> 赞同：2
> 
> 时间：2012-12-15T10:30:01.347
> 
> 标签：linux, delphi, http, freepascal, indy10

环境：Ubuntu 12.04 LTS、Indy 10.5.9 rev 4885、Lazarus 1.0.4 / FPC 2.6.0。

使用我的简单 TIdHTTPServer 测试程序，Web 浏览器只显示最后一个字符 ('!') 而不是应该是 'Hello world!' 的完整响应。

我可以看到在函数`ToBytes`（IdGlobal.pas 中的第 6059 行）中，传递的 AValue 参数中的文本仍然正确，ASrcEncoding 是 TIdASCIIEncoding 而 ADestEncoding 是“ISO-8559-1”。执行第 6061 行 (LBytes := TIdTextEncoding.Convert(ASrcEncoding, ADestEncoding, LBytes);) 后，LBytes 数组包含 #33 后跟零。

我的示例项目：

```
program MyHTTPServer;

uses
  cthreads,
  IdHTTPServer, IdCustomHTTPServer, IdContext, IdSocketHandle, IdGlobal,
  SysUtils;

type
  TMyServer = class (TIdHTTPServer)
  public
    procedure InitComponent; override;
    procedure OnGet(AContext: TIdContext;
    ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
  end;

procedure Demo;
var
  Server: TMyServer;
begin
  Server := TMyServer.Create(nil);
  try
    Server.Active := True;
    WriteLn('Hit any key to terminate.');
    ReadLn;
  finally
    Server.Free;
  end;
end;

procedure TMyServer.InitComponent;
var
  Binding: TIdSocketHandle;
begin
  inherited;

  OnCommandGet := OnGet;

  Bindings.Clear;
  Binding := Bindings.Add;
  Binding.IP := '127.0.0.1';
  Binding.Port := 8080;
  Binding.IPVersion := Id_IPv4;
end;

procedure TMyServer.OnGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
begin    
  AResponseInfo.ContentText := 'Hello world!';
end;

begin
  IdGlobal.GIdIconvUseTransliteration := True;

  Demo;
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:04:11.097

The problem is fixed in SVN trunk revision 4889\.

# java - 在android中接收参数Arraylist

> ID：13891399
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:30:16.127
> 
> 标签：java, android, eclipse

我正在使用 apache lib 编写一个小型 ftp 客户端。我正在返回 ArrayList 中的文件列表

```
import java.io.IOException;
import java.net.SocketException;
import java.util.ArrayList;
import java.util.List;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPFile;
import org.apache.commons.net.ftp.FTPReply;

import android.os.AsyncTask;
import android.util.Log;

public class myftpTask extends AsyncTask<String, Void, List<FTPFile>> {
    public FTPFile[] FTPFile;
    FTPClient mFtp = new FTPClient();

    @Override
    protected List<FTPFile> doInBackground(String... params) {
        List<FTPFile> myFiles = new ArrayList<FTPFile>();
        // TODO Auto-generated method stub
        try {
            mFtp.connect(params[0], 21);

            if (FTPReply.isPositiveCompletion(mFtp.getReplyCode())) {
                mFtp.login(params[1], params[2]);
                mFtp.enterLocalPassiveMode();
                mFtp.changeWorkingDirectory("/public_html");
                FTPFile files[] = mFtp.listFiles();

                for (int i = 0; i < files.length; i++) { // does not enter here
                    //Log.d("F-> " , ((FTPFile) files[i]).getName().toString());
                    //myFiles.add((FTPFile) files[i]).getName().toString());
                    myFiles.add(files[i]);
                }
                Log.v("Files", myFiles.toString());
                mFtp.disconnect();
            }
        } catch (SocketException e) {
            try {
                mFtp.disconnect();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //return 1;
        return myFiles;

    }
} 
```

我像这样收到它

```
import java.util.List;

import org.apache.commons.net.ftp.FTPFile;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    @SuppressWarnings("unchecked")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = (ListView) findViewById(R.id.listView1);

        List<FTPFile> listofFiles;

        listofFiles = (List<FTPFile>) new myftpTask().execute(
                "*****", "*****", "******");

        ArrayAdapter<FTPFile> arrayAdapter = new ArrayAdapter<FTPFile>(this,
                android.R.layout.simple_list_item_1, listofFiles);
        lv.setAdapter(arrayAdapter);
    }

} 
```

但是它抛出了一个异常，不能强制转换为列表。

哪里有问题？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:35:27.997

**问题 ：**

```
listofFiles = (List<FTPFile>) new myftpTask().execute(
                "*****", "*****", "******"); 
```

你被投错了

**解决方案 1：**

使用 [get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法从主 UI 线程中的 AsyncTask 获取结果，如下所示：

```
 listofFiles = (List<FTPFile>) new myftpTask().execute(
                    "*****", "*****", "******").get(); 
```

**笔记 ：**

这个解决方案暂停你的主线程执行，直到响应没有从 AsyncTask 回来，正如文档所说

* * *

**解决方案 2：**

用于`onPostExecute(List<FTPFile> result)`在 AsyncTask 执行完成时更新 Ui 而不会挂起 Ui

只需将您的代码更改为：

```
public class myftpTask extends AsyncTask<String, Void, List<FTPFile>> {

   //your code here

  @Override
  protected void onPostExecute(List<FTPFile> result) {
   // TODO Auto-generated method stub
   super.onPostExecute(result);
   ArrayAdapter<FTPFile> arrayAdapter = new ArrayAdapter<FTPFile>(this,
                android.R.layout.simple_list_item_1, result);
        lv.setAdapter(arrayAdapter);
  }

} 
```

并从 main Activity 启动 myftpTask 任务：

```
public class MainActivity extends Activity {
 ListView lv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = (ListView) findViewById(R.id.listView1);

        new myftpTask().execute("*****", "*****", "******");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:36:35.163

这会编译吗

```
 listofFiles = (List<FTPFile>) new myftpTask().execute(
                "*****", "*****", "******"); 
```

？？？

`newmyftpTask().execute();`从此类型返回对象 `AsyncTask<String, Void, List<FTPFile>>`

改用这个

```
 listofFiles = (List<FTPFile>) new myftpTask().execute(
                    "*****", "*****", "******").get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:36:41.763

要从 AsyncTask 获取返回值，您必须使用它的[get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法，

代替，

```
listofFiles = (List<FTPFile>) new myftpTask().
                                         execute("*****", "*****", "******"); 
```

和，

```
listofFiles = (List<FTPFile>) new myftpTask().
                                    execute("*****", "*****", "******").get(); 
```

但是，这会阻塞你的 UI 线程。因此，最好是创建一个`Interface`或`BroadCastReceiver`从 AsyncTask 返回值/数据。[这](https://github.com/lalit3686/AsyncTaskReturnValue)是相同的演示。

# javascript - jquery日期范围验证器不显示错误消息

> ID：13891403
> 
> 赞同：0
> 
> 时间：2012-12-15T10:30:46.860
> 
> 标签：javascript, jquery, asp.net-mvc

我在我的 asp.net mvc 页面上使用 jquery daterange 验证器`http://docs.jquery.com/Plugins/Validation/multiplefields`。我的 html 看起来像这样：

```
 <tr>
            <td align="left" valign="top">
                <label>
                    <input name="fromDate" type="text" class="flat requiredDateRange jq_watermark" id="fromDate"
                        style="width: 190px" title="Creation From Date" readonly="readonly" />
                </label>
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <label>
                    <input name="toDate" type="text" class="flat requiredDateRange jq_watermark" id="toDate"
                        style="width: 190px" title="Creation To Date" readonly="readonly" />
                </label>
            </td>
        </tr>
        <tr>
            <td colspan="3" align="left" valign="top">
                <label id="error" class="error" style="display: block;">
                </label>
            </td>
        </tr> 
```

在页面顶部，我正在使用这个：

```
$(document).ready(function(){
        $("#fromDate").datepicker({ dateFormat: 'dd MM yy', changeYear: true, changeMonth: true });
        $("#toDate").datepicker({ dateFormat: 'dd MM yy', changeYear: true, changeMonth: true });
}); 
```

和

```
jQuery(function () {

    jQuery("#frmSearch").validate({
        groups: {
            datesnotnull: "fromDate toDate",
            dateRange: "fromDate toDate"
        },
        errorPlacement: function (error) {
            jQuery("#frmSearch").find("#error").append('error');
           jQuery("#frmSearch").find("#error").show();

        }
    });

}); 
```

我的 daterangevalidator 文件如下所示：

```
// a custom method for validating the date range
$.validator.addMethod("datesnotnull", function () {  
    return (($("#fromDate").val().length != 0) && ($("#toDate").val().length != 0)) || (($("#fromDate").val().length == 0) && ($("#toDate").val().length == 0));
}, "Please specify the date range, from and to date.");

// a custom method for validating the date range
$.validator.addMethod("dateRange", function () {

    return ((($("#fromDate").val().length==0) && ($("#toDate").val().length==0)) || (new Date($("#fromDate").val()) < new Date($("#toDate").val())));
}, "Please specify a correct date range, the from date must be before the to date.");

// a new class rule to group all three methods
$.validator.addClassRules({
    requiredDateRange: { required: false, date: true, datesnotnull : true , dateRange: true  }    
});

// overwrite default messages
$.extend($.validator.messages, {    
    date: "Please specify valid dates"
}); 
```

但是当 todate 小于数据时，我只收到“Creation To Date”消息。我想显示消息“请指定正确的日期范围，起始日期必须早于截止日期”，这是红色的默认消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:23:26.450

您应该在 中使用以下选项`validate()`：

```
ignoreTitle: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:41:11.340

new Date($("#fromDate").val()) 返回一个字符串。您应该比较毫秒值： new Date($("#fromDate").val()).getTime()

# php - 检测实时 xml 提要中的更改，解析然后使用 php 发送到 mysql

> ID：13891408
> 
> 赞同：0
> 
> 时间：2012-12-15T10:31:17.397
> 
> 标签：php, xml-parsing, websocket, polling

监听实时 xml 提要中的更改、解析文件然后插入 mysql 数据库的最佳方法是什么。目前我正在考虑使用 ajax 和 jquery 的 settimeout 或 setinterval 函数来轮询 xml 文件。

我还研究了长轮询技术，这可能会减少我拨打的电话数量。

我是否可以将 websockets 用于此类事情，并且使用 php 作为后端它们是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:40:07.453

setInterval 将是一个更简单、不那么突兀的解决方案。尝试使用 websocket 时，您可能会发现增加了一层复杂性。

虽然如果你喜欢你可以查看[http://socket.io/](http://socket.io/)，它提供了一个跨浏览器的 websockets 方法非常酷。

我会说对此做出决定取决于间隔的频率以及使用 javascript 加载数据的必要性（在页面加载之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:35:21.340

我会设置一个`setInterval`查询数据库和 XML 然后比较，如果有差异然后更新。

* * *

```
var time = 50000, //desired update time in milliseconds 
    checkData = setInterval(function(){
var current = queryDB(), //function returns db data in string format 
    live = getLive();    //function gets xml then returns in string format

if (current != live) { updateDB(); }

}, time); 
```

这应该给你一个想法。

# perl - 如何在perl中合并来自两个不同文件的列

> ID：13891410
> 
> 赞同：0
> 
> 时间：2012-12-15T10:31:19.783
> 
> 标签：perl

我编写了以下 perl 代码来读取文本文件（a1.txt）并平均时间戳。我想同时读取两个文件（a1.txt 和 a2.txt）并合并两个文件中的所有列。

下面的代码一次只能读取一个文件。请帮我修改下面的 Perl 代码并以下列格式给出输出。

`a1.txt`：

```
PERFORMANCE TESTING

-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
300_wireframe_view_redraws_(GR) 00:01:56

80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:51

3_hidden_view_redraws_(GR) 00:01:35

6_Fast_HLR_activations_(CP) 00:01:10

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:42

2_shaded_mouse_spins_(GR) 00:00:21

270_shaded_view_redraws_(GR) 00:01:39
-------------------------------------------------------------------

****************************************************
****************************************************
-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
300_wireframe_view_redraws_(GR) 00:01:56

80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:51

3_hidden_view_redraws_(GR) 00:01:35

6_Fast_HLR_activations_(CP) 00:01:09

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:42

2_shaded_mouse_spins_(GR) 00:00:20

270_shaded_view_redraws_(GR) 00:01:39
-------------------------------------------------------------------

****************************************************
****************************************************
-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
300_wireframe_view_redraws_(GR) 00:01:55

80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:50

3_hidden_view_redraws_(GR) 00:01:34

6_Fast_HLR_activations_(CP) 00:01:09

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:40

2_shaded_mouse_spins_(GR) 00:00:21

270_shaded_view_redraws_(GR) 00:01:35
-------------------------------------------------------------------

****************************************************
**************************************************** 
```

`a2.txt`：

```
PERFORMANCE TESTING

-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:50

3_hidden_view_redraws_(GR) 00:01:37

6_Fast_HLR_activations_(CP) 00:01:12

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:43

2_shaded_mouse_spins_(GR) 00:00:21

270_shaded_view_redraws_(GR) 00:01:35

240_realtime_rendered_redraws_(GR)_1 00:13:16
-------------------------------------------------------------------

****************************************************
****************************************************
-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:50

3_hidden_view_redraws_(GR) 00:01:37

6_Fast_HLR_activations_(CP) 00:01:12

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:42

2_shaded_mouse_spins_(GR) 00:00:20

270_shaded_view_redraws_(GR) 00:01:40

240_realtime_rendered_redraws_(GR)_1 00:13:14
-------------------------------------------------------------------

****************************************************
****************************************************
-------------------------------------------------------------------
PERF_SMK_OCUS_50    Version P-20-17
-------------------------------------------------------------------
80_wireframe_view_redraws_with_DATUMS_on_(GR) 00:00:50

3_hidden_view_redraws_(GR) 00:01:37

6_Fast_HLR_activations_(CP) 00:01:12

120_hidden_view_redraws_with_Fast_HLR_(GR) 00:00:44

2_shaded_mouse_spins_(GR) 00:00:20

270_shaded_view_redraws_(GR) 00:01:40

240_realtime_rendered_redraws_(GR)_1 00:13:24
-------------------------------------------------------------------

****************************************************
**************************************************** 
```

期望的输出：

```
> Test Cases                                  a1.txt timestamp (hh:mm:ss)      a2.txt(hh:mm:ss)      delta (a1 -a2)(hh:mm:ss)
>----------------------------------------------------------------------------------------------------------------
>240_realtime_rendered_redraws_(GR)_1           N/A                            00:13:18             N/A

> 3_hidden_view_redraws_(GR)                     00:01:34                       00:01:37           -00:00:03

> 270_shaded_view_redraws_(GR)                   00:01:37                       00:01:38           -00:00:01

> 120_hidden_view_redraws_with_Fast_HLR_(GR)     00:00:41                       00:00:43           -00:00:02

> 300_wireframe_view_redraws_(GR)                00:01:55                        N/A                 N/A 

> 2_shaded_mouse_spins_(GR)                      00:00:20                       00:00:20            00:00:00

> 6_Fast_HLR_activations_(CP)                    00:01:09                       00:01:12           -00:00:03 

> 80_wireframe_view_redraws_with_DATUMS_on_(GR)  00:00:50                       00:00:50            00:00:00 
```

我的代码：

```
my %retrieve;
my $count = 0;

my $file1 = 'a1.txt';

open (R, $file1) or  die ("Could not open $file1!");

while (<R>) {

    next unless /^*Retrieve_generic_/ ||
                /^*Retrieve_assembly_1_/ ||
                /^*Retrieve_assembly_2_/ ||
                /^*300_wireframe_view_/ || 
                /^*80_wireframe_view_/ ||
                /^*3_hidden_view_/ || 
                /^*Fast_HLR_/ || 
                /^*120_hidden_view_/ ||
                /^*shaded_view_/ ||
                /^*shaded_mouse_/ || 
                /^*realtime_rendered_/;
    $count++;
    my ( $retrieve, $time ) = split;
    my ( $h, $m, $s ) = split ':', $time;
    $retrieve{$retrieve} += $h * 3600 + $m * 60 + $s;

}
close(R);

for my $retrieve ( keys %retrieve ) {

    my $hms = secondsToHMS($retrieve{$retrieve} / ( 3));
    print "$retrieve\t$hms\n" if defined $hms;
}

# For seconds < 86400, else undef returned

sub secondsToHMS {
    my $seconds = $_[0]; 
    return undef if $seconds >= 86400;

    my $h = int $seconds / 3600;
    my $m = int( $seconds - $h * 3600 ) / 60;
    my $s = $seconds % 60;

    return sprintf( '%02d:%02d:%02d', $h, $m, $s );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:29:39.520

这就是我将如何去做。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use English qw( -no_match_vars $OS_ERROR );

die 'expecting two filenames as arguments'
    if @ARGV != 2;

my @ids;

my %time_for;

for my $filename (@ARGV) {

    my $id;

    if ( $filename =~ m{\A ( .+? / )?( [^/.]+? )( [.] \w+ ) \z}xms ) {
        my $path = $1 || "";
        my $name = $2;
        my $ext  = $3 || "";
        $id       = $name;
        $filename = "$path$name$ext";
        push @ids, $id;
    }

    die "cant parse file ID from $filename"
        if !$id;

    die "cant find $filename"
        if !stat $filename;

    open my $fh, '<', "$filename"
        or die "open $filename: $OS_ERROR";

    while ( my $line = <$fh> ) {

        if ( $line =~ m{\A ( \w+ \( \w+ \) \w* ) \s+ ( \d+:\d+:\d+ ) }xms ) {

            my ( $subject, $hms ) = ( $1, $2 );

            my $seconds = hms_to_sec( $hms );

            $time_for{$subject}->{$id} ||= $seconds;

            $time_for{$subject}->{$id}
                = ( $seconds + $time_for{$subject}->{$id} ) / 2;
        }
    }

    close $fh,
        or die "close $filename: $OS_ERROR";
}

print <<"HEAD";
> Test Cases                                     $ids[0] timestamp (hh:mm:ss)          $ids[1] (hh:mm:ss)         delta ($ids[0]-$ids[1])(hh:mm:ss)
> ------------------------------------------------------------------------------------------------------------------------------
HEAD

for my $subject (sort keys %time_for) {

    my ( $a1, $a2 ) = @{ $time_for{$subject} }{@ids};

    my $delta = defined $a1 && defined $a2 ? $a1 - $a2 : undef;

    printf "> % -46s % -32s % -21s %s\n\n",
        $subject,
        sec_to_hms( $a1 ),
        sec_to_hms( $a2 ),
        sec_to_hms( $delta );
}

sub hms_to_sec {
    my ( $h, $m, $s ) = map { int $_ } map { $_ ? $_ : 0 } split /:/, $_[0];
    return $h * 3_600 + $m * 60 + $s;
}

sub sec_to_hms {
    my ( $s ) = @_;

    return 'N/A'
        if !defined $s || $s > 86_400;

    my $sign = ' ';

    if ( $s < 0 ) {
        $sign = '-';
        $s *= -1;
    }

    my $h = int $s / 3_600;
    my $m = int ( $s - $h * 3_600 ) / 60;

    return sprintf '%s%02d:%02d:%02d', $sign, $h, $m, $s % 60;
} 
```

输出是这样的。

```
> Test Cases                                     a1.txt timestamp (hh:mm:ss)      a2.txt(hh:mm:ss)      delta (a1 -a2)(hh:mm:ss)
> ------------------------------------------------------------------------------------------------------------------------------
> 120_hidden_view_redraws_with_Fast_HLR_(GR)      00:00:41                         00:00:43             -00:00:02

> 240_realtime_rendered_redraws_(GR)_1           N/A                               00:13:19             -00:13:19

> 270_shaded_view_redraws_(GR)                    00:01:37                         00:01:38             -00:00:01

> 2_shaded_mouse_spins_(GR)                       00:00:20                         00:00:20              00:00:00

> 300_wireframe_view_redraws_(GR)                 00:01:55                        N/A                    00:01:55

> 3_hidden_view_redraws_(GR)                      00:01:34                         00:01:37             -00:00:02

> 6_Fast_HLR_activations_(CP)                     00:01:09                         00:01:12             -00:00:02

> 80_wireframe_view_redraws_with_DATUMS_on_(GR)   00:00:50                         00:00:50              00:00:00 
```

假定文件名使用 / 作为路径分隔符。（适当的可移植实现可能是另一个问题的主题。）

你可以这样称呼它：

```
./merge_columns.pl /some/path/a1.txt /another/path/a2.txt 
```

我希望这会有所帮助。

# java - 在一个字段中反序列化具有多种类型的 JSON

> ID：13891415
> 
> 赞同：12
> 
> 时间：2012-12-15T10:31:52.597
> 
> 标签：java, json, jackson, resttemplate

我想反序列化 JSON（使用 Jackson 1.9.11 和 RestTemplate 1.0.1），其中一个字段可能具有更多类型含义，例如：

```
 {"responseId":123,"response":"error"} 
```

或者

```
 {"responseId":123,"response":{"foo":"bar", ... }} 
```

任何一种情况都可以与特定类型的一个设置器（字符串或自定义响应类）一起正常工作，但是当我放入我的实体 bean 覆盖设置器以能够处理这两种情况时，会引发异常：

```
Caused by: org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [xxxx.templates.ExportResponse] and content type [application/json;charset=utf-8] 
```

我正在考虑三种解决方案，但我没有让它们中的任何一个起作用：

*   仅使用 String setter 并在内部使用 ObjectMapper 来解组该字符串，如果它不等于“error”，但是当该 JS Array 出现时，它不是字符串，因此不使用 String setter :(。
*   使用带有自己的 JsonDeserializer 扩展的多态类型处理（@JsonTypeInfo 注释） - 我仍在尝试理解并实现这一点。
*   创建 HttpMessageConverter 列表并放入我可以使用的所有消息转换器。但我认为这一步是不必要的，因为只使用了 MappingJacksonHttpMessageConverter，对吗？

# 编辑：它现在是如何工作的

实体 bean 中的设置器：

```
@JsonDeserialize(using = ResponseDeserializer.class)
public void setResponse(Object responseObject) {
    if(responseObject instanceof Response)
        response = (Response) responseObject;
} 
```

ResponseDeserializer 中的反序列化方法：

```
public Response deserialize(JsonParser parser, DeserializationContext context) throws IOException, JsonProcessingException {
    Response response = new Response();

    if(JsonToken.START_OBJECT.equals(parser.getCurrentToken())) {
        ObjectMapper mapper = new ObjectMapper();
        response = mapper.readValue(parser, Response.class);
    } else
        throw new JsonMappingException("Unexpected token received.");

    return response;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T11:28:50.987

实现这一点的唯一方法是使用自定义反序列化器。

这是一个例子：

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule testModule = new SimpleModule("MyModule", new Version(1, 0, 0, null));
testModule.addDeserializer(Response.class, new ResponseJsonDeserializer());
mapper.registerModule(testModule); 
```

这里是如何编写（至少我会这样写）反序列化器：

```
class ResponseJsonDeserializer extends JsonDeserializer<Response>  {
  @Override
  public Responsedeserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {
    Response response = new Response();
    if(jp.getCurrentToken() == JsonToken.VALUE_STRING) {
        response.setError(jp.getText());
    } else {
       // Deserialize object
    }
    return response;
  }
}

class Response {
   private String error;
   private Object otherObject; // Use the real type of your object

   public boolean isError() {
      return error != null;
   }

   // Getters and setters

} 
```

# html - 会话 JSP 按钮单击

> ID：13891417
> 
> 赞同：0
> 
> 时间：2012-12-15T10:32:06.810
> 
> 标签：html, jsp, button

您好我想做一个显示数字和按钮的 JSP 程序。当用户单击此按钮时，其上方的数字会增加。我想在这个程序中包括会话。

我所做的是这样的：

这是html中的表格：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My Form</title>
</head>
<body>

<%! public void displayNum(){ %>
Number: <%=session.getAttribute("Counter") %>
<%! } %>

<FORM METHOD=POST ACTION="getcount.jsp"> 
<button TYPE="button" ONCLICK= "displayNum()">Add 1</button>
</FORM>

</body>
</html> 
```

这是 myJSP 文件：

```
<% 
     AddCount addCount = new AddCount();
     addCount.setCounter(addCount.addCounter(addCount.getCounter()));
     int counter = addCount.getCounter();

     session.setAttribute("Counter", counter);
%> 
```

其中 AddCount 是一个带有变量 counter、setter 和 getter 以及增加计数器的函数的 java 类 - addCount(num); 运行文件时我得到的只是一个没有任何文本的按钮：/

我一直在尝试一遍又一遍。有人能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:43:13.380

您在 html 中添加 java 代码，这是不可能的。

第二件事，即使您在 AddCount 中有一个静态 int 计数器，它也不会工作，因为许多用户可能会使用此页面并期望他们每次点击只增加一个增量。

所以你应该做的就是写一个像 index.jsp 这样的 jsp 文件

```
<%Integer counter = (Integer)request.getSession().getAttribute("counter")
  if(counter==null) {counter=0;}
  counter ++;
  request.getSession().setAttribute("counter",counter);

 %>
 <div>counter=<%=counter%></div><br>
 <a href="index.jsp">+1</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:59:18.500

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <script src="jquery.js"></script>
    <title>My Form</title>
    </head>
    <body>

    <script>
        $(document).ready(function() {
            $("button").click(function() {
                $("#div1").load("increament.jsp");
            });
        });
    </script>

    <div id="div1"> {number will be displayed here} </div>
    <button>Add 1</button>

    </body>
    </html> 
```

和增量.jsp 文件：

```
<%
    int count;
    if (session.getAttribute("Counter") == null) {
        count = 1;
    } else {
        count = (Integer) session.getAttribute("Counter");
        count++;
    }
    session.setAttribute("Counter", count);
    out.println(session.getAttribute("Counter"));
 %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:53:30.397

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My Form</title>
</head>
<body>

function displayNum()
{

<% 
     AddCount addCount = new AddCount();
     addCount.setCounter(addCount.addCounter(addCount.getCounter()));
     int counter = addCount.getCounter();

     session.setAttribute("Counter", counter);
%>

document.getElementById("demo").innerHTML="<%=session.getAttribute("Counter")%>";
}

<p id="demo"> {number will be displayed here} </p>
<button TYPE="button" ONCLICK= "displayNum()">Add 1</button>

</body>
</html> 
```

# g++ - 在 cygwin 上将 LAPACK 库与 g++ 链接

> ID：13891423
> 
> 赞同：2
> 
> 时间：2012-12-15T10:32:40.443
> 
> 标签：g++, cygwin, lapack

**背景**

我试图通过在 LAPACK 库中使用 zgeev 例程来查找复杂矩阵的特征值。据我了解，LAPACK 是为 FORTRAN 编写的，因此要将其与 C（或 C++）程序一起使用，必须进行一些修改，例如转换矩阵并在例程名称中附加下划线（参考：[http：/ /www.physics.orst.edu/~rubin/nacphy/lapack/codes/eigen-c.html](http://www.physics.orst.edu/~rubin/nacphy/lapack/codes/eigen-c.html) )

**问题**

将 LAPACK 库链接到 C++ 程序 ( [http://www.physics.orst.edu/~rubin/nacphy/lapack/codes/eigen-c.html](http://www.physics.orst.edu/~rubin/nacphy/lapack/codes/eigen-c.html) )

和

在我的 Windows 7 笔记本电脑上的 cygwin 上使用 g++ 编译它，我使用以下命令：

```
$ g++ eigen_complex.cpp -L G:\cygwin_root_dir\lib -lliblapack.a -llibblas.a 
```

并得到以下结果：

```
eigen_complex.cpp: In function `int main()':
eigen_complex.cpp:41: error: `zgeev_' undeclared (first use this function)
eigen_complex.cpp:41: error: (Each undeclared identifier is reported only once for each function it appears in.) 
```

我不明白是什么导致了这个错误。将库的名称从 liblapack 更改为 lapack 或任何内容（例如“lapa”）不会对错误产生任何影响。以下编译命令返回与上面相同的结果

```
g++ eigen_complex.cpp -L G:\cygwin_root_dir\lib -llapack.a -lblas.a
g++ eigen_complex.cpp -L G:\cygwin_root_dir\lib -llapack -lblas
g++ eigen_complex.cpp -L G:\cygwin_root_dir\lib -lliblapack -llibblas
g++ eigen_complex.cpp -lliblapack -llibblas 
```

和

```
g++ eigen_complex.cpp -lliblapack -lxyz 
```

还。我相信没有名为 xyz 的库，编译器也没有给出任何警告。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-28T20:03:39.707

希望将此原型添加到项目的某个标题中应该可以解决它：

```
extern "C" void zgeev_(char*, char*,int*,double *, int*, struct complex [], struct complex [1][1], int*, struct complex [1][1], int*, struct complex [], int*, struct complex [], int*); 
```

# php - 联系表单组复选框数组

> ID：13891426
> 
> 赞同：0
> 
> 时间：2012-12-15T10:33:25.827
> 
> 标签：php, arrays, validation, checkbox

我有一个用 PHP 构建的联系表单，我有一个单选框（单击）并将其更改为一个组复选框，这意味着可以单击多个框。

但是，只有最后一次点击发送到我的电子邮件，并且玩代码让我搞砸了，我对 php 数组代码和多个 (({{

这是html代码

```
 <label><input type="checkbox" name="addon" value="NONE" <?php if (isset($_POST['addon']) && $_POST['addon'] == 'NONE') echo 'checked="checked"'; ?> tabindex="4" />  None <br /></label>
    <label><input type="checkbox" name="addon" value="HKG" <?php if (isset($_POST['addon']) && $_POST['addon'] == 'HKG') echo 'checked="checked"'; ?> tabindex="5" />  Hong Kong <br /></label>
    ....
    <label><input type="checkbox" name="addon" value="Other Start City" <?php if (isset($_POST['trip']) && $_POST['addon'] == 'Other Start City') echo 'checked="checked"'; ?> tabindex="4" /> Other</label> 
```

这是我目前拥有的php代码，但这仅给出了一个答案。

```
 $Indhold .= "Tour Extension: ".$_POST['addon']."\n"; 
```

我尝试将其更改为数组（按照教程[http://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)进行操作），但随后电子邮件上只打印了数组。

如果可能的话，我还想在该组合框上包含验证。所以他们不能选择NONE和HKG，必须至少点击一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:35:40.663

`$_POST/GET`如果名称以`[]`(or `[index]`)结尾， PHP 只会填充数组。

利用`name="addon[]"`

数组不是字符串，所以你不能只是连接它们。您可以使用[`implode`](http://php.net/implode/)将数组的成员转换为单个字符串。您也可以使用`for`循环来一一处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:37:53.743

你只需要处理`$_POST['addon']`作为`array`（命名你的复选框之后`"addon[]"`）

```
// make sure at least one checkbox is checked
if (isset($_POST['addon']))
{
    foreach ($_POST['addon'] as $k => $v)
    {
        $Indhold .= "Tour Extension: {$v}\n";
    }
} 
```

或者作为替代方案：

```
 // make sure at least one checkbox is checked
    if (isset($_POST['addon']))
    {
        $indhold .= 'Tour Extension: ' . implode(', ', $_POST['addon']) . "\n";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T10:53:57.803

如果表单中有多个输入元素，只有一个 name( `i.e. not followed by '[]'`)，则只能从提交的表单中检索所有这些元素中的最新元素。因此，如果您在单个组中选中多个复选框（`i.e. the checkboxes having a single name which is not in the format 'name[]'`但很简单`'name'`），那么您可以从表单提交中获取最后一个选中的复选框值，因为单个组中所有先前选中的值都会被覆盖。因此，您需要使用数组作为组名来获取单个组中所有选中的复选框值。

因此，如果您在一个组中**有多个复选框**，请始终使用以下语法：

```
<input type=checkbox name="check1[]" value="v1">v1
<input type=checkbox name="check1[]" value="v2">v2
<input type=checkbox name="check1[]" value="v3">v3
<input type=checkbox name="check1[]" value="v4">v4 
```

但如果是单个复选框，请使用以下内容：

```
<input type=checkbox name="check2" value="v1">v1 //No need to append square bracket at the end of the assigned name. 
```

# android - Android 日期/时间显示 0 而不是 12

> ID：13891427
> 
> 赞同：0
> 
> 时间：2012-12-15T10:33:44.443
> 
> 标签：android, date, time

我想知道我下面的代码有什么问题：

```
 // Assign hour set in the picker
        c.set( Calendar.HOUR, selectedHour );
        c.set( Calendar.MINUTE, selectedMinute );

        // For alternative times
        c.add( Calendar.HOUR, SUB_SIX_HOUR );
        c.add( Calendar.MINUTE, SUB_FLAT_MINUTE );

        hour = c.get( Calendar.HOUR );
        minute = c.get( Calendar.MINUTE );
        hour = c.get( Calendar.HOUR_OF_DAY );

        StringBuilder sb4 = new StringBuilder();
        if(hour>=12){                      
          sb4.append(hour-12).append( ":" ).append(minute).append(" PM");
        }else if(hour == 0){
          sb4.append( "12" ).append( ":" ).append(minute).append( "AM" );
        }else{
          sb4.append(hour).append( ":" ).append(minute).append(" AM");
        }

        alternative.setText( "Alternative times: " + sb3 + " (9 hours)" + sb4 + " (6 hours)" ); 
```

请帮我弄清楚当计算的时间是午夜 12:00 时如何显示 12 而不是 0。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:48:39.693

```
 hour = c.get( Calendar.HOUR );
 minute = c.get( Calendar.MINUTE );
 hour = c.get( Calendar.HOUR_OF_DAY ); 
```

您在设置`hour`后再次设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T11:01:21.163

使用它来检查上午或下午。

```
c.get(Calendar.AM_PM); 
```

请参阅此处获取文档[Calendar.AM_PM](http://developer.android.com/reference/java/util/Calendar.html#AM_PM)

# algorithm - 关于最小生成树的基本问题

> ID：13891430
> 
> 赞同：1
> 
> 时间：2012-12-15T10:34:24.173
> 
> 标签：algorithm, language-agnostic, graph, minimum-spanning-tree

这不是家庭作业。我正在尝试从教科书上做练习来理解`MST (minimum spanning tree)`。

假设我`C`在加权无向图中有一个循环`G`。据我了解，以下是正确的：

*   中最*重*的边不`C`属于 的*任何*MST `G`。也就是说，*没有*`G`包含该边的 的 MST 。
*   中*最轻**的*边缘`C`属于. _ 也就是说，有一个 的 MST ，其中包含该边。*`G``G`*

 *现在我想知道以下说法是否也正确。

*   中*最轻*的边缘`C`属于 的*所有*MST `G`。也就是说，不存在*不*`G`包含该边的 MST 。
*   `C`除了*最重*的边缘之外，任何边缘都属于*某个*MST。也就是说，`C`除了*最重*的一条边之外，每条边都有一个包含该边的 MST。

你能证明最后的说法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:49:40.113

你的第一个说法总是正确的。对于任何图形，最轻的边都在 MST 上。

第二个并不总是正确的。如果整个图是一个循环，则它总是正确的，因此每个节点都有 2 条与之相关的边。但是，在一般情况下，只要节点之间存在路径并且以总权`(u,v)`重 小于.`k``u``v``k`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T13:25:24.577

即使对于第一个声明，如果有多个最轻的边，也不需要将所有边都包含在 MST 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T09:59:46.990

我不认为你的说法是有效的。问题是您只考虑更大图中的循环。

例如，考虑一个由循环中的 6 个节点组成的图 G（随机权重 >1）。您的声明可能适用于该图，但现在在图的中心添加 1 个节点并将其与成本为 1 的 6 个链接连接。整个图的 MST 现在将仅包含这 6 条边（形成星形）。

如果您现在查看您的声明，您会看到：

*   您的周期中最轻的边缘不属于 MST (=star)
*   循环中的所有边都不在 MST 中*

# regex - 使用 Regex 增加整数值 1

> ID：13891445
> 
> 赞同：0
> 
> 时间：2012-12-15T10:36:40.083
> 
> 标签：regex

我想增加价值。例如

*   杰瑞1
*   杰瑞2
*   杰瑞3
*   杰瑞4

我想改变它。

*   杰瑞2
*   杰瑞3
*   杰瑞4
*   杰瑞5

我该如何改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:46:33.230

不要试图对所有事情都**滥用正则表达式**。

**按照设计，正则表达式不支持 count**。原因很简单：如果你想拥有它，你至少需要一种 2 型语言，而处理比 3 型（“常规”）语言要复杂得多。

详见维基百科：[https ://en.wikipedia.org/wiki/Chomsky_hierarchy](https://en.wikipedia.org/wiki/Chomsky_hierarchy)

因此，根据定义，一旦您完全支持计数，它可能不再是常规语言。

有一些扩展，例如 perl 扩展的正则表达式，确实可以解决这个特定问题。但本质上，它们不再是正则表达式，而是调用外部函数来完成工作。

以下**perl 扩展正则表达式**应该可以满足您的要求：

```
s/(-?\d+)/$1 + 1/eg 
```

但本质上，只有匹配部分是正则表达式，替换是Perl，所以图灵完备。该`e`标志表示正确的部分应该由 Perl 评估，而不是作为正则表达式替换字符串。

您当然可以在几乎任何其他正则表达式引擎中使用此技巧。匹配，然后计算增量，然后用新值替换匹配。

完整的 perl 过滤器演示：

```
> echo 'Test 123 test 0 Banana9 -17 3 route66' | perl -pe 's/(-?\d+)/$1+1/eg'
Test 124 test 1 Banana10 -16 4 route67 
```

该`p`标志使 perl 读取标准输入并将程序应用于每一行，然后输出结果。这就是实际脚本仅包含替换的原因。这就是 Perl 在 unix 脚本中如此受欢迎的原因。您甚至可以将此过滤器批量应用于一整套文件（请参阅`-i`就地修改和`perlrun`手册页）。因此，为了修改一整套文件（备份将使用 后缀`.bak`）：

```
perl -p -i .bak -e 's/(-?\d+)/$1+1/eg' <filenames> 
```

# magento - 编译使我的主页内容空白

> ID：13891450
> 
> 赞同：0
> 
> 时间：2012-12-15T10:37:15.983
> 
> 标签：magento, compilation, magento-1.7

我想在我们的 Magento 网站上启用编译，但是当我启用它时，我的主页出现空白内容。它在输出菜单之前停止渲染。类别和产品页面似乎很好。

我们使用 Mercado 主题，主页使用 HomepageGrid 块，它是一个 CMS 页面。

有人可以提供一些见解吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:23:38.710

您所要做的就是检查您的错误日志。空白页表示 php 错误，并且您的输出配置为错误日志，而不是屏幕。可能查看的地方： `path_to/magento/var/log/`文件`system.log`和`exception.log`. 或`/var/log/`和文件夹`httpd/error_log`等看起来您在首页上有一些模块，例如特色产品或其他自定义内容，请检查您的 CMS > Pages > Homepage 内容。谢谢你

# string - 您如何将后缀数组实际应用于任何类型的文本？

> ID：13891453
> 
> 赞同：1
> 
> 时间：2012-12-15T10:37:38.427
> 
> 标签：string, algorithm, data-structures, pattern-matching, suffix-array

我正在阅读`Suffix Arrays`，构建一个的代码很简单。但是我找到的所有资源通常都使用一个简单的示例文本`banana`来解释这个概念。
因此，尽管示例文本很简单，并且后缀数组显示为 ( `a`, `ana`, `anana`, `banana`, `na`, `nana`)，但据我所知，这可以应用于任何类型的文本。
但我不明白，因为文本有空格、换行符、标点符号等。
那么这如何适用于任何类型的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:44:18.067

对于更长的字符串，您的后缀数组如下所示：

```
[01] banana split, yum!
[02] anana split, yum!
[03] nana split, yum!
[04] ana split, yum!
[05] na split, yum!
[06] a split, yum!
[07]  split, yum!
[08] split, yum!
[09] plit, yum!
[10] lit, yum!
[11] it, yum!
[12] t, yum!
[13] , yum!
[14]  yum!
[15] yum!
[16] um!
[17] m!
[18] ! 
```

然后，您可以按字母顺序对其进行排序以找到最长的重复子字符串，这是后缀数组的常见用途。

我还记得做过类似的事情来查找长文本中单词的重复模式，我使用空格字符作为分隔符，而不是遍历每个字符：

```
[01] if it is true it is true
[02] it is true it is true
[03] is true it is true
[04] true it is true
[05] it is true
[06] is true
[07] true 
```

虽然这不是一个后缀数组，但一旦按字母顺序排序，就可以找到重复的单词模式：

```
[01] if it is true it is true
[06] is true
[03] is true it is true
[05] it is true
[02] it is true it is true
[07] true
[04] true it is true 
```

通过将每一行与其上一行进行比较，只要字符匹配，我们发现'is true'和'it is true'是单词的重复模式。

这种方法的灵感来自一个常见的 DNA 研究问题，称为最长重复子串问题：[http ://en.wikipedia.org/wiki/Longest_repeated_substring_problem](http://en.wikipedia.org/wiki/Longest_repeated_substring_problem)

当然，它确实出现在基因科学以外的其他领域。

# jquery - 让用户传递动画的值

> ID：13891460
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:38:50.587
> 
> 标签：jquery, animation

您好 jquery 的新手，我试图让用户输入会影响动画的值。（向上或向下移动）这是我到目前为止所拥有的，似乎我无法让它传递值以使其动画化，任何帮助都会很棒。

html

```
<select id="selectBox">
<option selected="selected" class="selectBox" value="top">Top </option>
<option class="selectBox" value="bottom">Bottom </option>
</select>

<input type="text" id="value" />
<input id="button" name="button" value="Animate" type="button"> 

<div class="box"style="height:100px; width:300px; padding: 35px; margin:50px auto; 
border:30px solid #000;"> 
```

​javascript/jquery

```
< script type = "text/javascript" >

$("#button").click(function() {
var boxType = $('#selectBox').val();
var value = $('#value').val();

console.log(boxType + " " + value);

if (boxType == "top") {
    $(".box").stop().animate({
        marginTop: $('input').val('changed input value');
    }, 1000);
}
if (boxType == "bottom") {
    console.log("marginBottom")
    $(".box").stop().animate({
        marginBottom: $('input').val('changed input value');
    }, 1000);
}
}); < /script>​

here it is on JSFIDDLE 
```

[http://jsfiddle.net/X5Dd4/](http://jsfiddle.net/X5Dd4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:49:06.347

您需要删除这两行末尾的分号：

```
marginTop: $('input').val('changed input value');
...
marginTop: $('input').val('changed input value'); 
```

...因为它们在对象文字中无效。但是在这些行中调用`.val()`设置输入*值*也没有意义。只需使用`value`您在代码开头设置的变量，该变量已经包含用户输入的内容。

像这样的东西：

```
if (boxType == "top") {
    $(".box").stop().animate({
        marginTop: value
    }, 1000);
}
if (boxType == "bottom") {
    console.log("marginBottom")
    $(".box").stop().animate({
        marginBottom: value 
    }, 1000);
} 
```

在您的小提琴中，您需要从 JS 窗口中删除`<script>`and`</script>`标记 - 您在那里显示的代码是`onload`处理程序的主体。

演示：http: [//jsfiddle.net/X5Dd4/1/](http://jsfiddle.net/X5Dd4/1/)

请注意，在小提琴中为边缘底部设置动画并不是很令人兴奋，因为它只是将框下方的任何东西向下推，而它下方没有任何东西。

（另外，鉴于您的代码中有一条`console.log()`语句，您不是在看您的控制台吗？当我去找您的小提琴时，分号错误和`<script>`标签问题都在控制台中报告。）

# silverlight - 我什么时候应该在 Silverlight 中调用 Focus 方法

> ID：13891461
> 
> 赞同：0
> 
> 时间：2012-12-15T10:39:31.383
> 
> 标签：silverlight, mvvm

我的观点有几个文本框。其中之一需要得到关注。数据模型中究竟定义了哪一个。目前我在绑定完成后立即调用 Focus 方法。结果我得到了错误，这意味着无法设置焦点。问题是

*   什么是做这件事的正确时间？
*   我怎么知道这一刻在视图模型中而不知道任何视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:36:04.843

正确的答案是通过 Dispatcher.BeginInvoke 安排设置焦点。这意味着视图模型必须具有对 Dispatcher 对象的引用，这有点棘手，但值得付出努力。

# php - APC 是否比 MySQL 更好的缓存选项？

> ID：13891465
> 
> 赞同：1
> 
> 时间：2012-12-15T10:40:11.470
> 
> 标签：php, apc

每当我需要缓存一些信息时，我都依赖时间戳和 MySQL，将数据存储到数据库中并以这种方式获取。我刚刚阅读了有关 APC 的信息。

APC 要容易得多，但是除了更少的 SQL 和更清晰的代码之外，是否值得将我以前的缓存方法转换为 APC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:49:19.513

如果您已经有一个数据库正在运行并完成大部分工作，那么提高性能的第一步就是对数据库进行适当的调整。正确配置的 MySQL 非常快。显然在某个时间点它已经不够快了，需要进一步的缓存。缓存时要考虑的一件事是您的数据可能不再一致。这意味着您可能会更新主存储（数据库）中的数据，但其他人会读取过时的缓存条目

现在您已经提到 APC 作为一种可能的解决方案：APC 是两个相关但不同的东西：

*   PHP 脚本的操作码缓存
*   PHP 用户数据的共享 memorz 缓存

操作码缓存通过将编译后的 PHP 脚本存储在内存中来工作。因此，当请求一个站点时，PHP 解释器不必从磁盘读取文件并分析代码，而是可以直接执行它。这带来了巨大的推动作用，而且总是一件好事。

共享内存缓存接受任何 PHP 变量（嗯，有一些例外......）并将其存储在系统的共享内存中，因此同一台机器上的所有 PHP 进程都可以读取它。因此，如果您将数据库查询的结果存储在 APC 中，您可以节省时间，因为与查询数据库（将查询发送到不同的机器、解析、执行、发送结果）相比，访问共享内存非常快...... ) 但正如开始时所说，您必须注意数据可能已过时。还要注意所有数据都存储在内存中。因此，根据可用 RAM 的数量，可以存储的内容存在限制。另一个很大的缺点是数据仅存储在内存中。这意味着无论何时系统出现故障，缓存都会为空，并且其中的所有内容都将丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:54:31.930

一般来说，APC 会比 MySQL 快得多，因此值得花时间研究它并考虑从一个系统切换到另一个系统。而且，正如您所提到的，您将向数据库发出更少的 SQL 查询。

可以通过谷歌找到更多信息，我遇到了以下内容：

[http://www.mysqlperformanceblog.com/2006/08/09/cache-performance-comparison/](http://www.mysqlperformanceblog.com/2006/08/09/cache-performance-comparison/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:25:16.477

从字面上回答这个问题，是的。Mysql 不是缓存，APC 是，因此更好。

Mysql 是一种在其之上实现缓存的存储选项，但是您正在使用您提到的那些时间戳以及您正在使用它们执行的任何逻辑来实现缓存。APC 是数据和代码缓存的完整实现。

性能方面，访问本地 APC 缓存总是比访问 mysql 数据库快得多。关键字是*local*，APC 不是分布式的（据我所知），所以如果你想共享你的缓存，你需要一个外部缓存系统，比如 memcached。

# jquery - 修改 jQuery UI 滑块控件

> ID：13891467
> 
> 赞同：1
> 
> 时间：2012-12-15T10:40:26.220
> 
> 标签：jquery, user-interface, slider

我使用 jQuery UI 滑块控件。我的滑块宽度为`200px`. 我希望我的左手柄`14px`的中心向右移动，我的右手柄的中心向左偏移`14px`.

我的滑块将超过`172px`( `200 -14 - 14`)。`background-image`措施`200px`。_ 的长度`14px`计算如下：

```
width of the handle (28px) / 2 
```

我使用默认`margin-left: 0px;`删除`margin-left:-14px`。但是，我的右手柄向右移动`28px`！

你能帮我解开这个谜吗？

```
.ui-slider .ui-slider-handle {
    width: 28px; 
    height: 28px; 
    background: url(http://hitskin.com/themes/13/67/44/i_right_arrow.png) no-repeat 0 0;
    overflow: hidden; 
    position: absolute;
    margin-left: 0;
    top: -7px;
    border-style: none;
    cursor: help;
}​ 
```

[JSFiddle 演示](http://jsfiddle.net/userdude/3teR3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:17:06.967

奇怪的是，您想更改默认样式，因为您应用的新样式非常难看。也就是说，您可以像这样覆盖右手柄的特殊样式：

```
$(function(){
   $('.ui-slider a:nth-child(odd)').css('margin-left','-28px');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:34:38.407

所有这一切，而且一直只是你使用了错误的措施。您需要使用`em`s 而不是`px`s，这是我在查看原始尺寸和`margin-left`. 所以...

```
.ui-slider .ui-slider-handle {
    height: 1.6em;
    width: 1.6em;
    margin-left: -.8em;
    position: absolute;
    top: -7px;
    background: url(http://www.celinni.com/creaprint/js/ui/images/bulle.png) no-repeat center center;
    border-style: none;
    cursor: help;
} 
```

[http://jsfiddle.net/userdude/3teR3/5/](http://jsfiddle.net/userdude/3teR3/5/)

我已经使图像部分透明（在 Firefox 或 Chrome 中），因此您可以看到它们完美地排列在一起。当您滑动它们时，它们也可以正常工作。

# wordpress - 显示具有特定缩略图大小的帖子的所有图像

> ID：13891469
> 
> 赞同：0
> 
> 时间：2012-12-15T10:41:09.707
> 
> 标签：wordpress, image, post, image-size

我正在使用此代码段来显示帖子的所有图像：

```
<?php
$argsThumb = array(
    'order'          => 'ASC',
    'post_type'      => 'attachment',
    'post_parent'    => $post->ID,
    'post_mime_type' => 'image',
    'post_status'    => null
);
$attachments = get_posts($argsThumb);
if ($attachments) {
    foreach ($attachments as $attachment) {
        //echo apply_filters('the_title', $attachment->post_title);
                echo '<img src="'.wp_get_attachment_url($attachment->ID, 'testsize', false, false).'" />';
    }
}
?> 
```

这段代码用于创建自定义缩略图大小

```
add_image_size( 'testsize', 400, 400, true ); 
```

不幸的是，它不会输出 400px X 400px 的图像，尺寸只是原始尺寸。（注意：我重新生成了缩略图并在帖子中添加了新图像，但它仍然不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:20:51.857

这是答案： wp_get_attachment_url() 不接受参数。使用 wp_get_attachment_image() 代替工作。

```
<?php
$argsThumb = array(
    'order'          => 'ASC',
    'post_type'      => 'attachment',
    'post_parent'    => $post->ID,
    'post_mime_type' => 'image',
    'post_status'    => null
);
$attachments = get_posts($argsThumb);
if ($attachments) {
    foreach ($attachments as $attachment) {
        //echo apply_filters('the_title', $attachment->post_title);
        echo '<img src="'.wp_get_attachment_image($attachment->ID, 'testsize').'" />';
    }
}
?> 
```

# php - 获取 Base-URL 和 Absolute-Path 的最佳实践

> ID：13891472
> 
> 赞同：-2
> 
> 时间：2012-12-15T10:41:42.943
> 
> 标签：php

我知道有一些关于这个主题的问题，但它们都包含不同的答案。我想知道从 5.4 + 开始获取基本 url 和绝对路径的最有效方法是什么

绝对路径：使用魔法常数

```
define('ROOT', __DIR__); //C:\wamp\www 
```

或者自己写一次路径

```
define('ROOT', 'C:\wamp\www'); 
```

最终用途：

```
require ROOT . '/blabla/test.php'; 
```

否则我应该如何接收绝对路径？除非没有更好的方法，否则哪种选择最有效？

关于基本网址，我不太确定如何生成网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:52:35.577

这是我通常如何处理这个问题。请记住，我在本地（Windows）使用 apache，它可以处理“/”目录分隔符，不确定 IIS 等。

文件夹结构：

```
C:/wamp/www/somefolder
    /index.php
    /core
        /database.php
        /config
            /database.php 
```

索引.php：

```
// ROOT will be C:/wamp/www/somefolder
define('ROOT', str_replace('\\', '/', dirname(__FILE__)));
define('CORE', ROOT . '/core');
define('CONFIG', CORE . '/config');
require(CORE . '/database.php'); 
```

/somefolder/core/database.php：

```
require(CONFIG . '/database.php'); 
```

所以基本上我`dirname(__FILE__)`在 index.php 文件中使用。它总是对我有用，并且是我获得根目录正确路径的值得信赖的方式。

# html - 长 html 表丢失其背景图像

> ID：13891476
> 
> 赞同：0
> 
> 时间：2012-12-15T10:41:56.170
> 
> 标签：html, css, css-tables

我在表格单元格中有大约 7500 个（短）文本行。
表格在大约第 1800 行失去了背景图像。
桌子的长度有限制吗？
单元格中的文本保持可见直到结束，但没有背景。
表名为#story。

```
#story{
    margin-top:15px;
    border:medium ridge #FFF;
    border-radius:9px;
    background-image:url(img/back01.jpg);
    } 
```

也试过：

```
 background: url("img/back01.jpg") repeat; // without result
    background-color:#FFF; // this works along the whole table.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:01:19.670

我没有看到你的问题：

**html:**

```
<table id="story"><tr><td id="content"></td></tr></table> 
```

**js：**

```
for(var i=1; i < 3000; i++) {
    var line = document.createElement("div");
    line.innerHTML = "line " + i;
    document.getElementById("content").appendChild(line);
 } 
```

**CSS：**

```
#story{
    margin-top:15px;
    border:medium ridge #FFF;
    border-radius:9px;
    background-image:url(http://www.google.co.uk/images/srpr/logo3w.png);
    }​ 
```

我在[这里](http://jsfiddle.net/9zTYH/2/)工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:56:54.407

我测试了与 palako 相同的代码，并且对我也很好

```
<!doctype html>
<html>
    <head>
        <style type="text/css"> 
        #story{
    margin-top:15px;
    border:medium ridge #FFF;
    border-radius:9px;
    background-image:url(back01.jpg);
    }
        </style>
    </head>
    <body>
        <table id="story"> 
         <?php 
         $z="";
         echo "<tr><td>";
         for($i=0; $i<8000; $i++)
         {
         $z = $z.$i."\n</br>";
         }
        echo $z."</td></tr>";            
         ?>
        </table>
    </body> 
</html> 
```

# jquery - NivoSlider 第一个图像不显示

> ID：13891477
> 
> 赞同：0
> 
> 时间：2012-12-15T10:42:00.600
> 
> 标签：jquery, css, wordpress, nivo-slider

我在 wordpress 网站上有一个滑块，但第一张图片有问题。不显示。在所有负载之后，这也有效。这是滑块的链接：[http ://www.teenbetween.relationshipsireland.com/](http://www.teenbetween.relationshipsireland.com/)

# c++ - wxWidgets 2.9 学习资源

> ID：13891479
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:42:08.340
> 
> 标签：c++, user-interface, wxwidgets, doc

我对 wxWidgets 2.9 有疑问。我只是找不到任何一个教程/电子书/关于它的任何东西。我发现的极少数适用于 2.8，不适用于 2.9（更好，我想使用 2.9）。wxwidgets 的文档很差（当然不是很差，记录了数百个类，但是除了 hello world 应用程序之外它缺少任何好的教程，而且库本身不直观。它远不及 SFML 2 的直观用法和非常出色的文档（你可以从那里轻松学习 SFML存在。

能分享一些2.9的学习资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:50:02.743

几乎所有关于 wxWidgets 2.8 的内容也适用于 2.9，只需概述手册中关于[自 2.8 以来的更改](http://docs.wxwidgets.org/trunk/overview_changes_since28.html)的章节。

您要查找的教程位于`samples`wxWidgets 发行版的子目录中，其中有近百个。学习 wxWidgets 的最好方法是阅读（编译和运行）示例。

# php - 在百分比上调用随机函数？

> ID：13891480
> 
> 赞同：5
> 
> 时间：2012-12-15T10:42:14.817
> 
> 标签：php, random

我无法弄清楚这一点。

我需要一个解决方案来调用随机函数的百分比。

前任。脚本调用subscriptions() 的概率为10%，系统调用函数“specialitems()”的概率为3%。

我被困在这个问题上，所以我希望有人可以帮助我解决这个问题。

```
<?php
   class RandomGifts {
   public $chances = '';

   public function __construct($user) {
          $this->user = $user;

          //Find percent for each function
          $this->chances = array( 
                 'subscriptions' => 10, // 10%
                 'specialitems'  => 3,  //  5%
                 'normalitems'   => 30, // 40%
                 'fuser'         => 50, // 70%
                 'giftcards'     => 7,  //  7%
          );

 //This should call the function which has been calculated.
 self::callFunction(?);

 }

   public function subscriptions(){}
   public function specialitems(){}
   public function normalitems(){}
   public function fuser(){}
   public function giftcards(){}

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:45:30.153

尝试这个：

```
$a = rand(1, 100);
$total = 0;
$f = '';
foreach($this->chances as $function => $percent) {
    $total += $percent;
    if($a <= $total) {
        $f = $function;
        break;
    }
}
if(!empty($f))
    $this->$f(); 
```

百分比不应加到 100 以上。如果总和低于 100，则剩余百分比为“什么也不做”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T10:46:07.070

然后用你的类和 $var 名称调用一个函数就行了。

```
$this->$var(); 
```

# c++ - “vtable”链接器错误（涉及带有“=default”的虚拟析构函数）- Clang 3.1 中的潜在错误？

> ID：13891485
> 
> 赞同：6
> 
> 时间：2012-12-15T10:43:12.757
> 
> 标签：c++, gcc, llvm, clang

我的代码中出现链接器错误。我已将其归结为以下基本要素。

此代码给出了链接器错误**“vtable for Foo”，引用自：Foo::Foo()**

```
class Foo {
public:
  Foo();
  virtual ~Foo() = default;
};
Foo::Foo() { } 
```

但是这段代码没有给出任何错误：

```
class Foo {
public:
  Foo();
  virtual ~Foo() { }
};
Foo::Foo() { } 
```

为什么？我认为`= default`应该基本上和那些空方括号做同样的事情。

**更新：**我正在使用“Apple LLVM 编译器 4.1”，它是 Xcode 4.5.2 的一部分。这可能是这个编译器中的一个错误吗？它可能适用于最新的 GCC（尽管 Apple 不再发布）。有关编译器的讨论，请参见下面的评论。

**更新 2：**如下所述，更改行以`virtual inline ~Foo() = default;`消除此错误。这不只是**一个**错误吗？在这种情况下，如果没有明确写出，编译器似乎无法识别内联函数`inline`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:32:27.627

[这似乎是一个已经修复的clang中的错误。](http://llvm.org/bugs/show_bug.cgi?id=13424)您问得恰到好处，因为很快就会有新版本发布：[候选版本已经可用](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-December/026295.html)。请试一试，您的示例适用于 i386-linux 二进制版本，并且应该适用于所有这些版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:54:53.297

在 Itanium ABI 中，为包含未在类中内联定义的第一个虚拟方法的定义的翻译单元发出 v 表（和其他 RTTI 信息），或者如果只有内联定义的虚拟方法，则针对每个翻译单元包括类。然后由链接器来合并冗余符号。

通过指定`= default`，Clang 可能没有意识到您已经在类中**定义**了`virtual`内联方法，并且包含您的文件的每个 TU 都应该定义 v-table 和 RTTI 信息，而是等待定义出现某处。

我可以建议将定义*放在*课堂之外吗？=>`Foo::~Foo() = default;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:53:27.440

它适用于 g++ 4.7.2。但是我和你的clang 3.1有同样的问题。

我有 3 个文件。

富.h：

```
#ifndef FOO_H
#define FOO_H

class Foo {
public:
  Foo();
  virtual ~Foo() = default;
};

#endif // FOO_H 
```

Foo.cpp：

```
#include "Foo.h"

Foo::Foo() { } 
```

主.cpp：

```
#include <iostream>
#include "Foo.h"

using namespace std;

int main()
{
    Foo foo;
    return 0;
} 
```

但如果是这样，它也适用于 clang：

Foo.cpp 为空。

主文件

```
#include <iostream>
#include "Foo.h"

using namespace std;

Foo::Foo() { }

int main()
{
    Foo foo;
    return 0;
} 
```

所以我猜clang在生成目标文件时有错误。

# jquery - JQuery 主题在服务器中不起作用

> ID：13891487
> 
> 赞同：1
> 
> 时间：2012-12-15T10:43:12.977
> 
> 标签：jquery, css, zend-framework

我正在使用带有“开始”主题的 JQuery 的 DatePicker。它在我的本地机器上使用该主题正确显示。但是当我将它上传到我们的服务器时，它并没有像在本地那样显示。日历显示，但外观错误。

我能观察到的唯一区别是：在我的本地机器上，我使用“http://”。当我在我们的服务器上查看它时，我使用“https://”。

这是我的 Zend 框架代码（布局）的片段。

```
$this->headLink()
                ->appendStylesheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/start/jquery-ui.css');

$this->headScript()
                ->prependFile('https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js')
                ->prependFile('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'); 
```

然后在我的索引控制器中：

```
$this->headScript()
->setScript('$(document).ready(function() {
        $("#datepicker").datepicker({ dateFormat: "dd/mm/yy" });
    });')

<div class="left">Date: <input type="text" size="7" id="datepicker"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:58:57.513

如果站点在 https 中运行，则样式表可能被阻止，在这种情况下，某些浏览器不会加载不安全的内容，只会加载安全的内容。

即->appendStylesheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/start/jquery-ui.css');

如果您的 Web 浏览器上安装了任何开发人员工具，您可能需要检查样式表是否加载。Chrome 有一个网络控制台，可以显示单个文件是否成功加载。

如果是这种情况，您可以尝试更改 ->appendStylesheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/start/jquery-ui.css');

到 ->appendStylesheet('https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/start/jquery-ui.css');

或 ->appendStylesheet('//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/start/jquery-ui.css');

# html - 在 HTML/CSS 文档中创建空间的最佳方法是什么？

> ID：13891489
> 
> 赞同：1
> 
> 时间：2012-12-15T10:43:28.580
> 
> 标签：html, css

我有一个 div，其中每行有 3 个图像。图像都是相同的大小。我一直在使用小的完全清晰的透明图像，然后我会明确给出高度和宽度以在图像之间形成空间。一个例子是这样的：

```
 div begin
 space image width=15, height=1 actual image (no explicit dimensions)
 space image width=10, height=1 actual image (no explicit dimensions)
 space image width=10, height=1 actual image (no explicit dimensions)

 space image width=900, height=20 (this is to separate rows, which should be 900 wide, space + 3 x image)

 space image width=15, height=1 actual image (no explicit dimensions)
 space image width=10, height=1 actual image (no explicit dimensions)
 space image width=10, height=1 actual image (no explicit dimensions)
 div end 
```

这些行可能会或可能不会通过代码生成，有时会有href。我意识到我也许可以在图像/或锚元素上使用边距/填充来创建空间。但这需要在每个图像上设置一个类。这似乎不是解决这个问题的好方法。出于几个原因：空间将在锚标签内，使其可链接。我不会反对使用 div 并在它们上使用特定的类。但是，我已经尝试过了，但它们似乎没有像我预期的那样工作。它们创建了换行符，所以现在图像出现在一个列中，而且它们似乎并没有占用任何实际空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:48:36.987

```
 How about 2 divs, one for each row. Then set the margins on those.

  <div class="row"> Your images or anchor tags</div>
  <div class="row"> Your images or anchor tags</div> 
```

然后

```
 .row{
      margin-top:10px;

  } 
```

或者你想要的图像行之间的空间。

您可以对图像使用 div 以便更好地在屏幕上定位它们。特别是希望避免向锚标签添加边距。

```
 div.img{
     display:inline;
 }

 .firstcol{
     margin-left:15px;
 }

 .col{
     margin-left:10px;
 } 
```

和

```
 <div class="img firstcol">The first image of teh row</div>
 <div class="img col">The second image of teh row</div> 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:09:25.897

使用间隔图像相当笨拙，几乎不需要。最简单的方法可能是将所有图像包装在`a`元素中，仅`<a><img ...></a>`用于那些不应该作为链接的图像。然后您可以在`a`元素上设置边距，而无需使边距可点击。

您还可以将图像库格式化为三行图像，而无需将这种划分作为 HTML 代码的一部分。例子：

```
.gallery img { border: 0; margin-bottom: 20px;  }
.gallery a:nth-child(3n+1) { margin-left: 15px; }
.gallery a:nth-child(3n+2) { margin-left: 10px; margin-right: 10px; }
.gallery a:nth-child(3n+3):after { content: "\A"; white-space: pre; } 
```

这有效地使布局类似于表格，而无需将划分硬编码为 HTML 中的列。最后一条规则有点棘手（但有效），它会在每个第三个元素之后导致换行。

[jsfiddle](http://jsfiddle.net/yucca42/2MgDM/)

PS 这也会在最后一行图像下方创建 20 像素的边距。如果这是一个问题，您可以通过设置来取消它`.gallery { margin-bottom: -20px }`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:43:08.897

这就是我的工作：

```
.row {
  margin-left:20px;
}
.space {
  margin-left:12px;
  display: inline;
}
.row-space {
  margin-bottom:20px;
}

div class=row
  a href=x img
  div class=space /div
  a href=x img
  div class=space /div
/div

div class=row-space /div 
```

我需要 display-inline 来避免换行。过去，我已经阅读并使用过 float: left，但这还有一些其他副作用，不利于此目的。

# postgresql - PostgreSQL 和 JDBC 的 ClassNotFoundException

> ID：13891492
> 
> 赞同：0
> 
> 时间：2012-12-15T10:43:51.020
> 
> 标签：postgresql, jdbc, connection, classnotfoundexception

我在连接 Java 和 PostgreSQL 数据库时遇到了一些困难。我已经下载了[JDBC4 Postgresql 驱动程序，版本 9.2-1002](http://jdbc.postgresql.org/download.html)驱动程序并正确设置了应用程序 ClassPath。我的代码如下

```
import java.sql.*;

public class JavaPostGreSQLConnectivity
{
    public static void main(String[] args) 
    {
        DB db = new DB();        
        db.dbConnect("jdbc:postgresql://127.0.0.1:5432/TestDB", "postgres","pwd");
    }
}

class DB
{
    public DB() {}

    public void dbConnect(String db_connect_string, String db_userid, String db_password)
    {
        try
        { 
            Class.forName("org.postgresql.Driver");
            Connection conn = DriverManager.getConnection(db_connect_string, db_userid, db_password);
            System.out.println("connected");

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}; 
```

运行时出现以下错误

![在此处输入图像描述](../Images/aaf3b3ba7b2d5bb0549e417dbb144601.png)

是不是在抱怨

**Class.forName("org.postgresql.Driver");**

如果是这样，那么驱动程序名称是什么？但是，出于学习目的，我遵循[了这一点。](http://www.java-samples.com/showtutorial.php?tutorialid=202)

但是，如果我这样做

```
C:\Program Files (x86)\Java\jdk1.7.0\bin>java -cp C:\Users\pos
tgresql-9.2-1002.jdbc4.jar; JavaPostGreSQLConnectivity

connected 
```

它有效。为什么我已经将驱动程序正确放置在类路径中时需要再次明确提及它？有没有其他方法（我只想将 JAR 文件放在 Classpath 中，程序应该从那里读取）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:54:55.453

驱动程序名称是可以的。[和驱动官方文档](http://jdbc.postgresql.org/documentation/head/index.html)中提到的一样。因此，驱动程序只是不在类路径中。

你说：

> 我 [...] 正确设置了应用程序 ClassPath

另一方面，您只需调用以下命令即可启动程序：

```
java JavaPostGreSQLConnectivity 
```

在这种情况下，类路径上没有 PG 驱动程序。您必须使用类似的东西手动添加它

```
java -cp postgresql-jdbc4.jar JavaPostGreSQLConnectivity 
```

**编辑**输入时问题已更改，因此重复。

您仅在 IDE 中添加了 jar。这有助于 IDE 编译您的代码。如果您使用 IDE 启动程序，那么 IDE 也会为您设置类路径。但是，如果您不通过 IDE 启动，那么没有人知道正确的类路径，并且必须手动设置。

您的选择是：

*   始终通过 IDE 启动
*   制作一些隐藏类路径设置的批处理脚本（常见解决方案）
*   设置`CLASSPATH`环境变量（不随其他 Java 应用程序扩展）
*   制作一个“可执行 Jar”并在那里设置类路径。（使用该术语搜索此站点）。
*   将 jar 放入 JVM 自动拾取的位置（例如，`lib/ext`在 JRE 的目录中）。但是污染 JRE/JDK 库是最糟糕的选择。

注意：这都是 Java 基础知识，与 PostgreSQL 无关。

# c# - 直接从流中异步上传到 azure

> ID：13891497
> 
> 赞同：2
> 
> 时间：2012-12-15T10:45:19.127
> 
> 标签：c#, azure

我想直接使用流上传到我的天蓝色本地开发帐户。我为 azure blob 存储创建了一个类。

```
public class AzureBlob
{
    delegate void UploadFinished(IAsyncResult result);
    public void uploadFile()
    {
        //Initial configuration
        CloudStorage account = CloudStorageAccount.DevelopmentStorageAccount;
        CloudBlobClient client = account.CreateBlobClient();
        CloudBlobContainer container = client.GetContainerReference("myfiles");
        Stream stream = new MemoryStream();

        //Upload to azure
        CloudBlob blob = container.GetBlobReference("sample.txt");
        UploadFinished uploadFinished = delegate(IAsyncResult result)
        {
            Console.WriteLine("Upload finished {0} {1}", result.IsCompleted, stream.Position);
        };
        blob.BeginUploadFromStream(stream, new AsyncCallback(uploadFinished));

        //Write to stream
        for(int i=0;i<100;i++)
        {
            for(int j=0;j<50;j++)
            {
                stream.WriteByte(65);
            }
        }
        stream.Close();

    }
} 
```

我面临的第一个问题是我在存储中获取了文件，但它不包含任何数据。即使我在回调中使用 EndOfUploadStream 方法（根据一些stackoverflow答案是一个解决方案）。其次，我将断点放在回调中，我发现回调在我关闭流之前执行了一次，并且程序不断更新流。此时流位置在 913 左右（大部分是随机的）。请帮助我直接通过流异步上传 blob。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:57:40.190

在我看来，您有比赛条件。您在实际将内容放入其中之前就开始上传流。

你可能想要这样的东西：

```
Stream stream = new MemoryStream();

//Write to stream
for(int i=0;i<100;i++)
{
    for(int j=0;j<50;j++)
    {
        stream.WriteByte(65);
    }
}
stream.SetPosition(0); // <-- need to reset stream position to 0 before uploading

//Upload to azure
CloudBlob blob = container.GetBlobReference("sample.txt");
UploadFinished uploadFinished = delegate(IAsyncResult result)
{
    blob.EndUploadFromStream(result); // <-- have to call this in your handler
    Console.WriteLine("Upload finished {0} {1}", result.IsCompleted, stream.Position);
};
blob.BeginUploadFromStream(stream, new AsyncCallback(uploadFinished)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:54:34.180

smarx的好答案！此外，将 stream.Close() 移动到回调中。

```
delegate void BeginUploadFinished(IAsyncResult result);
public void UploadFile()
{
    //Initial configuration
    var account = CloudStorageAccount.DevelopmentStorageAccount;
    var client = account.CreateCloudBlobClient();
    var container = client.GetContainerReference("myfiles");
    Stream stream = new MemoryStream();
    var state = new Object{};

    //Upload to azure
    var blob = container.GetBlobReference("test.txt");
    BeginUploadFinished beginUploadFinished = delegate(IAsyncResult result)
    {
        blob.EndUploadFromStream(result);
        Trace.WriteLine("EndUploadFromStream", "Information");
        stream.Close();
        stream.Dispose();
    };

    //Write to stream
    Trace.WriteLine("Writing Stream", "Information");
    for (var i = 0; i < 100; i++)
    {
        for (var j = 0; j < 50; j++)
        {
            stream.WriteByte(65);
        }
    }
    stream.Seek(0, SeekOrigin.Begin);

    Trace.WriteLine("BeginUploadFromStream", "Information");
    var _result =  blob.BeginUploadFromStream(stream, new AsyncCallback(beginUploadFinished), state);
    _result.AsyncWaitHandle.WaitOne();
} 
```

# html - 关于在 html 上实现纸牌游戏的建议

> ID：13891501
> 
> 赞同：-1
> 
> 时间：2012-12-15T10:45:46.523
> 
> 标签：html

我正在寻找实现权力的游戏基于纸牌的游戏（很像 yu-gi-oh）。我对编程并不陌生，我在 Java、C、C++ 方面有很好的水平，但我对 html 及其库相当陌生。我想知道是否有人可以就我应该使用哪些库或方法给我一些建议。我需要能够：

*   拥有庞大的数据库。
*   制作小动画，只是图像的小平移和旋转。
*   添加个性化按钮和其他菜单项。
*   玩家和多人之间的决斗至 5 人。

我提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:10:14.630

对于数据库，您应该使用 PHP + MySQL。

对于动画，使用带有 jquery 库、HTML5、CSS3 的 javascript。

个性化按钮，其他菜单项可能是 CSS-CSS3

玩家和多人对战 5 人，嗯，可能使用 NodeJS，但可以在 PHP+Ajax 中完成。

或者您可以用 Java 编写它，并将其嵌入到网站中。在线查看 Drakensang，用 Java 编写，嵌入到网站中。

学习网络开发的好网站：http: [//www.w3schools.com/](http://www.w3schools.com/)

阿贾克斯：[http ://www.w3schools.com/ajax/ajax_intro.asp](http://www.w3schools.com/ajax/ajax_intro.asp)

jQuery：jquery.com/

PHP：php.net/manual/en/index.php

NodeJS：nodejs.org/

MySQL：www.mysql.com/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T10:49:48.790

只需使用 html5 就可以了。如果您需要更多，那么 jquery 可能很有用。

更详细地说：

*   小动画、平移和旋转：[旋转图像](https://stackoverflow.com/questions/5756287/rotate-an-image-on-html5-canvas)

*   个性化按钮：普通 grafic 或 css

*   对于多人游戏，您可能也需要插座。html5 也支持这些。

# c# - c# .net MVC4 模型来表示表格或表格

> ID：13891512
> 
> 赞同：3
> 
> 时间：2012-12-15T10:48:11.183
> 
> 标签：c#, asp.net-mvc

您好，我对 mvc 4 中的模型有点困惑，并认为有人可以为我指出正确的方向。这将不胜感激。

例如，如果我有一个包含以下字段的表

```
 [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 5)]         
        public string UserName { get; set; }

        [Required(ErrorMessage="Email Address is Required")]
        [StringLength(15,  ErrorMessage = "Email Address must be between {0} and {1} in size",MinimumLength = 5 )]
        [DataType(DataType.EmailAddress)]
        [Display(Name="Email")]        
        public string Email { get; set; }

        [MaxLength(25)]
        [Display(Name="Mobile Telephone Number")]    
        public string Mobile {get;set;}

        [MaxLength(500)]    
        [Display(Name="Headline")]
        public string Headline {get;set;}

        [Required]
        [StringLength(200)]
        [Display(Name = "First Name")]
        public string FirstName {get;set;}

        [Required]
        [StringLength(200)]
        [Display(Name="Surname")]
        public string Surname { get; set;}

        public virtual int? DayOfBirthId { get; set; }
        public virtual DayOfBirth DayOfBirth { get; set; }
        public virtual int? MonthOfBirthId { get; set; }
        public virtual MonthOfBirth MonthOfBirth { get; set; }
        public virtual int? YearOfBirthId { get; set; }
        public virtual YearOfBirth YearOfBirth{get;set;} 
```

这是我在数据库中的用户配置文件表。但是，我想要一个用户注册到网站的表格。当他们第一次注册时，我不需要电话等所有详细信息，我真正需要的只是用户名、电子邮件地址和密码。我是否为此创建另一个模型。或者我有一个模型，并且在控制器上将字段设置为 null 或空字符串，这在注册时不需要。我也进行了验证，因此将为尚未在表单中输入的数据设置此设置。

我的问题最终是所有形式都应该代表模型——是否应该重新设计数据库以满足这一要求。或者控制器应该设置不需要的值。或者是否应该有另一个模型来表示要创建的映射到该表的表单。

我对此有点困惑，任何人的澄清将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:57:35.570

看起来您正在将模型直接映射到视图，这很好，但通常使用[ViewModels](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)的概念。

[Viewmodels](http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx)专门针对将要在其中使用的视图进行定制，并且仅包含视图所需的属性。然后映射 ViewModel

1.  用于持久保存来自用户的任何更改的模型
2.  来自用于显示用户持久数据的模型

您可以手动滚动两个对象之间的映射，或使用[AutoMapper](http://automapper.org/)或[EmitMapper 之](http://emitmapper.codeplex.com/)类的工具。

# java - paintComponent on JPanel, image flashes and then disappears

> ID：13891513
> 
> 赞同：3
> 
> 时间：2012-12-15T10:48:30.457
> 
> 标签：java, swing, repaint, paintcomponent

I have a JApplet (MainClass extends JApplet), a JPanel (ChartWindow extends JPanel) and a Grafico class.

The problem is that the Grafico class instance has 2 JPanel that should show 2 images (1 for each panel) but the images are shown and after a little while they disappears: instead of them i get a gray background (like an empty JPanel). This happens for every repaint() call (that are made in the ChartWindow class)

the MainClass `init()` contains

```
chartwindow=new ChartWindow();
add(chartwindow) 
```

chartwindow has a Grafico instance.

it's the ChartWindow's `paintComponent` (override)

```
paintComponent(Graphics g)
{
    super.paintComponent(g);
    Image immagineGrafico=createImage(grafico.pannelloGrafico.getWidth()
          ,grafico.pannelloGrafico.getHeight()); 
     Image immagineVolumi=createImage(grafico.pannelloVolumi.getWidth()
      ,grafico.pannelloVolumi.getHeight());
  Graphics2D imgGrafico=(Graphics2D)immagineGrafico.getGraphics();
  Graphics2D imgVolumi=(Graphics2D)immagineVolumi.getGraphics();
  grafico.draw(imgGrafico,imgVolumi,mouseX,mouseY);

  ((Graphics2D)grafico.pannelloGrafico.getGraphics()).drawImage(immagineGrafico,0,0,this);
  ((Graphics2D)grafico.pannelloVolumi.getGraphics()).drawImage(immagineVolumi,0,0,this);
} 
```

grafico's JPanels are added this way in the ChartWindow's constructor

```
grafico=new Grafico()
................
add(grafico.pannelloGrafico);
add(grafico.pannelloVolumi); 
```

Tell me if you need more information, thank you very much :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:52:31.613

You need to override the JPanel's paintComponent rather than the chart window's if you want to paint on them. What happens is that everytime the JPanel paints itself the default paint would overwrite your images.

```
 class PanelloVolumi extends JPanel{
         //some code

         public void paintComponent(Graphics g){

             //paint one image here
         }

     } 
```

And do the same for the other JPanel.

Then add instances of these JPanels to your Applet.

# asp.net - 地图路由 MVC3

> ID：13891516
> 
> 赞同：1
> 
> 时间：2012-12-15T10:48:36.600
> 
> 标签：asp.net, asp.net-mvc-3, routing

也许我的问题很容易回答，但我是 MVC3 的新手。

我的 MVC3 Web 项目中有这些可能的路线：

*   /品牌/品牌ID
*   /brands/{action}/{参数}

其中brands 是我的控制器，brandID 是接收我的Index 操作的特定参数。此外，我的品牌控制器有更多操作，我需要在 Global.asax 中定义正确的地图路线以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:06:39.660

[自定义路由](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)中有一个示例（针对您的情况进行了修改）。

全球.asax：

```
routes.MapRoute(
    "BrandDetails",
    "Brands/{brandID}",
    new { controller = "Brands", action = "Details" },
    new { brandID = @"\d+" }
);

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

品牌控制器：

```
public ActionResult Index()
{
    return View();
}

public ActionResult Details(int brandID)
{
    return this.View(brandID);
} 
```

# c++ - 如何做 RakNet Keep-Alive

> ID：13891520
> 
> 赞同：1
> 
> 时间：2012-12-15T10:48:43.547
> 
> 标签：c++, network-programming, multiplayer, raknet

我正在为我想要制作的一个简单的网络游戏计划我的服务器循环。

使用 RakPeerInterface（从我读到的内容听起来像是一个可靠的 UDP 实现），我希望能够在 3 秒内判断玩家是否通过意外方式（客户端崩溃、断开连接、任务管理器）断开了游戏-终止）。

我认为某处有一个 raknet 功能可以做到这一点，但我还没有找到它。

# mysql - 基于codeigniter中的数组从数据库中获取值

> ID：13891523
> 
> 赞同：1
> 
> 时间：2012-12-15T10:49:24.497
> 
> 标签：mysql, arrays, codeigniter, select

我有一个数组

```
$user = array([0]=>1 [1]=>2 [2]=>3) 
```

其中包含某些用户的 id。我需要从数据库中获取这些用户的国家。

```
foreach($userid as $user){
    $this->db->select('country');
    $this->db->where('user_id',$user);
    $this->db->from('company');
    $usercountry = $this->db->get();
    $count = $usercountry->row();
    $country = $count->country;
    } 
```

假设 user1 有国家 ES，user2 有 IN，user3 有 US，user4 有 UK。那么如果数组包含 1,2,3。然后我需要得到国家 ES,IN,US。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:59:57.433

这是这种数组的正常查询方式

```
public function get_countries($user)
{
 $query = "select country from company where user_id IN($user)";
 $result = $this->db->query($query);
 if($res->num_rows()>0){
        return $res->result("array");
    }
    return array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:00:33.487

1.  不需要带有多个查询的循环 - 而是使用`WHERE id IN (1,2,3);`或 CodeIgniter 等效项 -`$this->db->where_in();`
2.  如果您有代表不同国家/地区的 ID，您可以在数据库中创建一个表，其中包含国家列表及其 ID。然后，当您从`users`表中获取数据时，您始终可以 使用链接中的公共链从该表中[加入](http://www.w3schools.com/sql/sql_join_inner.asp)`country_id`国家/地区 - （这称为 FOREIGN KEY，它会在表之间创建关系）。

# ios - iOS SDWebImage 无法识别的选择器完成块

> ID：13891526
> 
> 赞同：1
> 
> 时间：2012-12-15T10:49:51.053
> 
> 标签：ios, automatic-ref-counting, objective-c-blocks, unrecognized-selector, sdwebimage

我在我的 iPhone 项目中使用[SDWebImage](https://github.com/rs/SDWebImage)来自动加载和缓存图像。基本用法完美：

```
[self.imageView setImageWithURL:[NSURL URLWithString:*url*]]; 
```

但是，当我使用带有额外参数选项的任何其他方法时，例如我想使用的带有完成块的方法：

```
[self.posterImageView setImageWithURL:[NSURL URLWithString:[Utils getMoviePosterUrlForMovie:movie withSize:PosterSizeBig]]
                          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) { }]; 
```

我得到错误：

```
'NSInvalidArgumentException', reason: '-[UIImageView setImageWithURL:completed:]: unrecognized selector sent to instance 
```

我发现的与无法识别的选择器错误有关的所有其他问题和解决方案都是整个库的问题，其中基本的“setImageWithURL”方法也不起作用。

这里可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:46:09.630

这也是我面临的问题，我通过在 Build Settings>TARGETS>Linking>Other Linker Flags 中设置标志来解决

-force_load ${BUILT_PRODUCTS_DIR}/libSDWebImage.a

如这个链接所示：

[SDWebImage : setImageWithURL 在用于设置 UITableViewCell 的图像时失败](https://stackoverflow.com/questions/8504953/sdwebimage-setimagewithurl-fails-when-used-to-set-image-of-a-uitableviewcell)

有点晚了，但希望这有帮助

# php - PHP中的无休止的查询/循环？

> ID：13891528
> 
> 赞同：0
> 
> 时间：2012-12-15T10:50:39.990
> 
> 标签：php, html, mysql, sql

您好，我正在按姓氏的第一个字母查询名称数据库。然而，当我执行查询并打印结果时，第一个名字会一遍又一遍地打印出来，而实际上有多个名字要打印出来。这是我到目前为止所拥有的。传入的数据是一个字母，它假设收集所有具有该开头字母的姓氏。我做错了什么会导致这个无限循环？

```
function displayprofs()
{
print"<div>";
print "<p><a href = '$_SERVER[PHP_SELF]'>return to start</a>\n";
$abc=($_POST['abc']);
print"$abc";
$db = adodbConnect();
$query="Select * FROM Category WHERE Description LIKE '$abc%'";
$result=$db->Execute($query);
$row=$result->FetchRow();
while($row)
    {

      $name= $row['Description'];
      print "<form method='post' enctype='multipart/form-data' action='$_SERVER[PHP_SELF]'>\n";
      print"<input type='hidden' name='profy' value='$name'>";
      print"<p>$name<input type='submit' name='add' value ='Submit'/></p>\n";                                                   //submit button
      print"</form>\n";
      //break;
    } 
print"</div>";  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:52:37.730

您获取`$row`一次，然后开始`while`循环，其条件始终为真。`$row=$result->FetchRow();`在街区内失踪`while`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T10:54:19.463

替换`while($row)`为`while($row=$result->FetchRow())`

并删除`$row=$result->FetchRow();`你在开始之前写的`while`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:55:00.913

既然你有`while($row)`，你将一遍又一遍地迭代同一行。改为`while($row=$result->FetchRow())`改为并删除先前的 fetch 或保持原样并放在`$row=$result->FetchRow();`while 块的末尾。

解决方案1：

```
 while($row=$result->FetchRow())
    {

      $name= $row['Description'];
      print "<form method='post' enctype='multipart/form-data' action='$_SERVER[PHP_SELF]'>\n";
      print"<input type='hidden' name='profy' value='$name'>";
      print"<p>$name<input type='submit' name='add' value ='Submit'/></p>\n";                                                   //submit button
      print"</form>\n";
    } 
```

解决方案2：

```
 $row=$result->FetchRow();
    while($row)
    {
      $name= $row['Description'];
      print "<form method='post' enctype='multipart/form-data' action='$_SERVER[PHP_SELF]'>\n";
      print"<input type='hidden' name='profy' value='$name'>";
      print"<p>$name<input type='submit' name='add' value ='Submit'/></p>\n";                                                      //submit button
      print"</form>\n";
      $row=$result->FetchRow();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T10:57:39.823

到目前为止，您知道该`while($row)`位可能是一个错误。只是为了避免您不得不在一分钟内发布第二个问题：这不是最好的想法：

```
print "<form method='post' enctype='multipart/form-data' action='$_SERVER[PHP_SELF]'>\n"; 
```

也许考虑将其写*为*：

```
print "<form method='post' enctype='multipart/form-data' action='{$_SERVER['PHP_SELF']}'>\n"; 
```

*或*：

```
print "<form method='post' enctype='multipart/form-data' action='".$_SERVER[PHP_SELF]."'>\n"; 
```

# php - jquery jeditable 保存到数据库

> ID：13891529
> 
> 赞同：1
> 
> 时间：2012-12-15T10:51:29.287
> 
> 标签：php, jquery

我正在使用以下代码启用带有 jeditable 的实时编辑：

```
<script type="text/javascript"> 
$(document).ready(function(){

        var aDataSet = [
["klad1111.com","<img src='world/se.png' />","-","0","0","0%","0"],
["klad2222.com","<img src='world/dk.png' />","2012-12-05","1","3","300%","15"],
["klad33333.com","<img src='world/dk.png' />","-","0","0","0%","0"],
["klad6666.info","<img src='world/dk.png' />","-","0","0","0%","0"],
["klad44444.info","<img src='world/dk.png' />","-","0","0","0%","0"],
["klad5555.com","<img src='world/se.png' />","-","0","0","0%","0"],
    ];

    $('#dynamic').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
    $('#example').dataTable( {
        "aaData": aDataSet,
        "aoColumns": [
            { "sTitle": "Namn" },
            { "sTitle": "Land" },
            { "sTitle": "Uppdaterad" },
            { "sTitle": "Neutrala Posts", "sClass": "center" },
            { "sTitle": "Post / Client", "sClass": "center" },
            { "sTitle": "Ratio", "sClass": "center" },
            { "sTitle": "Total Posts", "sClass": "center" }                             
        ]
    } );

    /* Init DataTables */
    var oTable = $('#example').dataTable();

    /* Apply the jEditable handlers to the table */
    $('td', oTable.fnGetNodes()).editable( 'editable_ajax.php', {
        "callback": function( sValue, y ) {
            var aPos = oTable.fnGetPosition( this );
            oTable.fnUpdate( sValue, aPos[0], aPos[1] );
        },
        "submitdata": function ( value, settings ) {
            return {
                "row_id": this.parentNode.getAttribute('id'),
                "column": oTable.fnGetPosition( this )[2]
            };
        },
        "height": "14px"
    } );

});

</script> 
```

实时编辑类型的作品，当我点击一个单元格时，我会打开一个输入框。但是保存部分不起作用..我不确定如何相应地更新我的数据库..

有任何想法吗？

# ios - SHKFacebook handleDidBecomeActive - 不知道选择器的类方法

> ID：13891541
> 
> 赞同：3
> 
> 时间：2012-12-15T10:54:37.717
> 
> 标签：ios, facebook, sharekit

我正在尝试让 Sharekit Facebook 共享工作。[手册](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)中的第 7 步指出应实施这些方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [SHKFacebook handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    [SHKFacebook handleWillTerminate];
} 
```

但是 XCode 给了我一个错误，`handleDidBecomeActive`它`handleWillTerminate`不是`SHKFacebook`.

知道我可能做错了什么吗？我将 ShareKit 与 Cocoapods 联系起来。

# ruby-on-rails - Ruby on Rails Form_for 错误

> ID：13891544
> 
> 赞同：1
> 
> 时间：2012-12-15T10:55:35.360
> 
> 标签：ruby-on-rails, ruby, form-for

我正在用 Ruby on Rails 作为学校项目制作游戏，但现在我遇到了这个错误：

#<#:0x007ff34cca8f68> 的未定义方法“storylines_index_path”

我正在制作一个页面，您希望有一个表格来添加故事情节，所以我需要一个包含一些字段的表格。我想使用 form_for 方法。但是当添加我得到这个错误

这是我的代码：

意见/new.html.erb

```
<% provide(:title, 'Overzicht Storylines') %> 
<h1>Voeg nieuwe storyline toe</h1>
<%= form_for(@storyline) do |f| %>
  <%= render 'shared/error_messages' %>

  <%= f.label :title %>
  <%= f.text_field :title%>

  <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>

<% end %> 
```

storylines_controller.rb

```
class StorylinesController < ApplicationController   def index
  @storylines = Storylines.find(:all)   end

  def show
    @storyline = Storylines.find(params[:id])   
  end

  def new
    @storyline = Storylines.new   end end 
```

故事情节.rb

```
class Storylines < ActiveRecord::Base   
  attr_accessible :title, :text
end 
```

路线.rb

```
StoryLine::Application.routes.draw do   
  get "users/new"   
  get "storylines/new"

  resources :users
  resources :storylines
  resources :sessions, only: [:new, :create, :destroy]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  root to: 'static_pages#home'

  match '/help',    to: 'static_pages#help'
  match '/contact', to: 'static_pages#contact'
  match '/about', to: 'static_pages#contact'
  match '/home', to: 'static_pages#home'

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:20:00.110

Rails 约定要求您以单数形式命名模型，即`Storyline`不是`Storylines`. 在类定义中重命名模型名称，控制器应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:03:35.590

当你这样做

```
form_for(@storyline) 
```

它将尝试查找**storylines_index_path**，以便在您的数据库中创建一个 Storyline 对象。

因此，您需要在**config/routes.rb**文件中定义路由，如果您已经定义了应该定义路由的**资源 :storylines**，如果您不想创建 REST 资源，则可以创建自己的路由

```
match 'storylines/create', to: 'storylines#create', as: :storylines_create 
```

然后在视图上

我建议阅读[Rails 路由指南](http://guides.rubyonrails.org/routing.html)，因为它更好地解释了 Rails 上与路由相关的所有内容

# macos - 如何在 ical 弹出窗口菜单上添加自定义菜单项“创建会议/任务”

> ID：13891545
> 
> 赞同：3
> 
> 时间：2012-12-15T10:55:36.177
> 
> 标签：macos, cocoa, icalendar

![这是了解在 iCal 的弹出窗口中添加新菜单项的快照](../Images/59759abb297c9a71518701d4af34f4cf.png)

要求：用户将能够右键单击日历并获得三个新选项：安排会议、安排通话和安排任务

我的要求似乎不是开发个人应用程序。添加新会议、通话或任务后，所有数据都应发布到服务器。我不明白从哪里开始为 iCal 制作插件。

# javascript - 自动垂直图像滑块

> ID：13891547
> 
> 赞同：0
> 
> 时间：2012-12-15T10:55:46.093
> 
> 标签：javascript, jquery, html, css

我需要帮助来创建一个垂直图像滑块，它会以间隔自动滑动图像。

HTML：

```
<div id="myCarousel" class="carousel slide">
<!-- Carousel items -->
<div class="carousel-inner">
<div class="active item">
<img src="img/1.jpg" />
</div>
<div class="item">
<img src="img/2.jpg" />
</div>
<div class="item">
<img src="img/3.jpg" />
</div>
<div class="item">
<img src="img/4.jpg" />
</div>
</div>
<!-- Carousel nav -->
<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

Javascript：

```
<script type="text/javascript">
$(document).ready(function () {
$('.carousel').carousel({ interval: 3000 });
});
</script> 
```

我需要垂直相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:45:01.003

我建议您使用[jCarousel](http://sorgalla.com/projects/jcarousel/)或[bxslider](http://bxslider.com)。看看[这个](http://sorgalla.com/projects/jcarousel/examples/static_vertical.html)和[这个](http://www.queness.com/post/3036/create-a-custom-jquery-image-gallery-with-jcarousel)垂直滚动示例 pf jCarousel 和[这个](http://bxslider.com/examples/vertical-slideshow)bxslider 示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-04T12:46:29.493

这是一个如何使用 CSS3 和 HTML5 来获得垂直滑块效果的示例。

[https://jsfiddle.net/cd3oezzj/](https://jsfiddle.net/cd3oezzj/)

使用`@keyframes`规则。`@-webkit-keyframes`某些浏览器可能需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T07:44:04.310

把它放在下面：

```
<script src= "http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src= "js/bootstrap.js"></script>
 <script type="text/javascript">
     var $ = jQuery.noConflict();
     $(document).ready(function() { 
     $('#myCarousel').carousel({ interval: 2000, cycle: true });
     }); 
</script> 
```

请按照我维护的顺序维护序列...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T06:23:27.963

您可以使用

```
$(window).scrollTop() 
```

# php - 未定义索引：第 4 行 C:\wamp\www\emailvalidate.php 中的电子邮件

> ID：13891548
> 
> 赞同：0
> 
> 时间：2012-12-15T10:56:11.367
> 
> 标签：php, ajax, post, indexing, undefined-index

我是阿贾克斯的新手。在我的 Ajax 中，我收到以下错误消息：

> 注意：未定义索引：第 4 行 C:\wamp\www\test\sample.php 中的地址

我用谷歌搜索，但我没有为我指定的问题找到解决方案。

这就是我所做的。

**带有 Ajax 的 HTML 表单 (test1.php)**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("mydiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","test2.php",true);
xmlhttp.send();
}
</script>

</head>

<body>
<form id="form1" name="form1" method="post" action="test2.php">
  <p>
    <label for="address"></label>
    <input type="text" name="address" id="address" onblur="loadXMLDoc()"  />
    <input type="submit" name="submit" id="submit" value="Submit" />
  </p>
  <p><div id = 'mydiv'></div></p>
</form>
</body>
</html> 
```

**test2.php**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<?php
echo "Your Address is ".$_POST['address'];
?>

</body>
</html> 
```

我确信这是一个非常简单的问题，但我不知道如何解决它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:58:43.040

您没有发送任何名称为`address`

我假设如果您重命名`input name="mail"...`为`input name="address"`某些情况，将会对这种情况有所了解。

作为替代解决方案...更改：

```
<?php
echo "Your Address is ".$_POST['address'];
?> 
```

对此

```
<?php
echo "Your Address is ".$_POST['mail'];
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T11:00:27.363

我没有在您的 HTML 代码中看到“地址”。你有一个文本框：

```
<input type="text" name="mail" id="mail" onblur="loadXMLDoc()"  /> 
```

但它的名称是“邮件”，而不是“地址”你可以这样做：

```
<?php
echo "Your Address is ".$_POST['mail'];//instead of 'address'
?> 
```

# python - python脚本中的mongodb数组更新

> ID：13891551
> 
> 赞同：1
> 
> 时间：2012-12-15T10:56:25.503
> 
> 标签：python, mongodb, updates

我需要`jobs`通过 python 脚本更新 mongo 集合中的数组中的值

例如，以下在 mongo 控制台中工作得非常好，但是如何在 python 中这样做

```
posts.update({'_id':213},{'$set':{"jobs.1.title":1}}, false, true) 
```

更有趣的一点是，我认为通过使用`$`我可以更改数组中的所有值。以下内容既不适用于控制台也不适用于脚本。

```
posts.update({'_id':213},{'$set':{"jobs.$.title":1}}, false, true) 
```

问题是如何在 python 脚本中进行上述更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:23:39.753

它在 Python 的 pymongo 中非常相似[`update`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.update)：

```
posts.update({'_id':213}, {'$set':{"jobs.1.title":1}}, upsert=False, multi=True) 
```

当然，您还需要连接到数据库并设置`posts`为该集合。

[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)不像您想的那样充当通配符；它标识文档中与查询匹配的第一个数组元素。我认为没有办法像这样更新所有数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:24:06.723

您可以使用[pymongo](http://api.mongodb.org/python/current/)从 python 与 MongoDB 进行交互。

关于 $ 运算符更新数组中的所有值，这不是您应该使用它的方式。请检查[文档](http://docs.mongodb.org/manual/reference/operators/#_S_)。

> 数组字段必须作为查询选择器的一部分出现。

MongoDB 问题跟踪器上有一个关于此主题的[未解决问题。](https://jira.mongodb.org/browse/SERVER-1243)

一种解决方法是读取文档，更改数组值程序端并更新它。

# iphone - UIWebView contentEditable 图像复制粘贴崩溃 (EXC_BAD_ACCESS)

> ID：13891553
> 
> 赞同：4
> 
> 时间：2012-12-15T10:56:34.363
> 
> 标签：iphone, objective-c, ios, ios5, uiwebview

我正在加载一些 html 内容`UIWebView`。内容看起来像这样

```
<img alt="" src="/image/968" style="width: 75px; height: 26px;">qweqwwqeqwe<img src="/image/969" width="32" height="32"></p> 
```

这部分工作正常。我使用的是从 iOS5.0 开始支持的`contentEditable`属性。`UIWebView`我将内容包装在一个

```
<div contentEditable="true">mycontent</div>. 
```

我能够编写/复制文本等。但是当我尝试从中选择和复制图像`webView`并将其粘贴到下一行时，我的应用程序崩溃了（`EXC_BAD_ACCESS`）。我在 iPad 1 上运行 iOS 5.1.1。我试过检查

```
 [[UIPasteboard generalPasteboard] image]
 [[UIPasteboard generalPasteboard] images]

 [[UIPasteboard generalPasteboard] url]
 [[UIPasteboard generalPasteboard] urls] 
```

`null`但是在我复制图像并检查它们之后，它们总是要么包含零对象，要么包含零对象。任何指针将不胜感激？

![在此处输入图像描述](../Images/fcd8d87bd43c8321d669eb725cc28dd5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:38:12.053

我使用以下代码将 html 字符串加载到`webView`其中并对其进行编辑。它运行良好。

```
#import "WebViewEditViewController.h"

@interface WebViewEditViewController ()

@end

@implementation WebViewEditViewController

- (void)viewDidLoad
{
 NSString *path = [[NSBundle mainBundle] bundlePath];
 NSURL *baseURL = [NSURL fileURLWithPath:path];

 NSString *htmlString=@"<html><body><div contentEditable=\"true\"><img alt=\"\" src=\"1.jpg\" style=\"width: 100px; height: 100px;\">qweqwwqeqwe<img src=\"2.jpg\" width=\"150px\" height=\"70px\"></p></div></body></html>";
 [_webView loadHTMLString:htmlString baseURL:baseURL];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我尝试在复制后打印日志，发现在两种情况下都在`[[UIPasteboard generalPasteboard] image]`粘贴`null`，而代码工作正常。

# pointers - 使用 codepad.org 和 devcpp 时的编译警告

> ID：13891554
> 
> 赞同：0
> 
> 时间：2012-12-15T10:57:20.313
> 
> 标签：pointers

我正在编写一个程序来检查天气给定的字符串是回文。当我尝试编译代码时，我收到以下警告

**pandridom_with_space.cpp [错误] ISO C++ 禁止指针和整数之间的比较 [-fpermissive]**

我知道我们可以忽略此警告，但我想知道如何修改我的代码以删除此警告。

```
bool isPalindrome(const char*p,int len)
{
    if((p==NULL)||(len<1))
    return false;
    int i=0,j=len-1;
    while(p[i]!=0 && i<j)
    {
            while((i<j)&&(p[i] == " "))// <<<===== here I am getting warning.
            i++;
            while((i<j)&&(p[j] == " "))// <<<===== here I am getting warning.
            j--;
            if(p[i]!=p[j])
            return false;
            i++;
            j--;

    }
    return true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:28:47.010

```
p[i] == " " 
```

`p[i]`是一个`char`（它是一个整数类型），并且`" "`是一个 ( `const`，因为它是 C++)`char`数组，它被转换为与指向其第一个元素的指针的比较。

您的意思是将其与空格字符进行比较，`' '`. （注意字符文字的单引号，双引号用于字符串文字。）

# web-applications - 为以下性质的列表分配 X 和 Y 标题的最有效方法是什么？

> ID：13891558
> 
> 赞同：0
> 
> 时间：2012-12-15T10:57:44.037
> 
> 标签：web-applications, python-2.7, web-scraping

以下是我正在尝试处理的数据。这是一个列表，我想进一步分解，以便于参考和处理。

我想添加一个 X 和 Y 标头，以便我可以通过调用 list['X']['Y'] 轻松调用它的值。这可以在 Python 中完成吗？

```
['0.0740,0.0730,0.0720,0.0300,0.0290,0.0240,0.0210,0.0200', '0.0200,0.0200,0.0150', '0.0260,0.0260,0.0200,0.0200,0.0200,0.0150', '0.0210,0.0210,0.0200,0.0170', '0.0770,0.0760,0.0740,0.0550,0.0450,0.0210', '0.0530,0.0520,0.0510,0.0230,0.0220', '0.0160,0.0160'] 
```

如果有人能告诉我怎么做，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:52:05.367

您的列表当前包含一个维度，以逗号分隔的字符串表示您的价格。

只需使用`.split(',')`将这些字符串转换为列表；列表理解使这变得轻而易举：

```
splitlist = [prices.split(',') for prices in yourlist] 
```

这会产生一个列表列表：

```
[['0.0740', '0.0730', '0.0720', '0.0300', '0.0290', '0.0240', '0.0210', '0.0200'], ['0.0200', '0.0200', '0.0150'], ['0.0260', '0.0260', '0.0200', '0.0200', '0.0200', '0.0150'], ['0.0210', '0.0210', '0.0200', '0.0170'], ['0.0770', '0.0760', '0.0740', '0.0550', '0.0450', '0.0210'], ['0.0530', '0.0520', '0.0510', '0.0230', '0.0220'], ['0.0160', '0.0160']] 
```

并且`splitlist[0][0]`是字符串`'0.0740'`。

如果您需要以浮点值而不是字符串结束，只需`map()`在拆分字符串上应用：

```
splitlist = [map(float, prices.split(',')) for prices in yourlist] 
```

以便将每个单独的价格映射到`float()`调用。现在你有：

```
[[0.073999999999999996, 0.072999999999999995, 0.071999999999999995, 0.029999999999999999, 0.029000000000000001, 0.024, 0.021000000000000001, 0.02], [0.02, 0.02, 0.014999999999999999], [0.025999999999999999, 0.025999999999999999, 0.02, 0.02, 0.02, 0.014999999999999999], [0.021000000000000001, 0.021000000000000001, 0.02, 0.017000000000000001], [0.076999999999999999, 0.075999999999999998, 0.073999999999999996, 0.055, 0.044999999999999998, 0.021000000000000001], [0.052999999999999999, 0.051999999999999998, 0.050999999999999997, 0.023, 0.021999999999999999], [0.016, 0.016]] 
```

并`splitlist[0][0]`具有浮点值`0.073999999999999996`。

# python - 有没有一种更 Pythonic 的方式来在函数的参数上展开列表？

> ID：13891559
> 
> 赞同：6
> 
> 时间：2012-12-15T10:57:49.063
> 
> 标签：python, list, function, parameters, arguments

```
def foo(a, b, c):
 print a+b+c

i = [1,2,3] 
```

有没有办法在 i 上不显式索引的情况下调用 foo(i)？试图避免 foo(i[0], i[1], i[2])

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T11:00:05.393

是的，使用[`foo(*i)`](http://docs.python.org/2.7/tutorial/controlflow.html#unpacking-argument-lists)：

```
>>> foo(*i)
6 
```

您还可以`*`在函数定义中使用： `def foo(*vargs)`将所有非关键字参数放入一个名为`vargs`. 并且使用`**`, 例如`def foo(**kargs)`, 会将所有关键字参数放入一个名为 的字典中`kargs`：

```
>>> def foo(*vargs, **kargs):
        print vargs
        print kargs

>>> foo(1, 2, 3, a="A", b="B")
(1, 2, 3)
{'a': 'A', 'b': 'B'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T11:00:50.307

它被称为[参数解包](http://docs.python.org/3/tutorial/controlflow.html#unpacking-argument-lists)，并且有一个运算符。

```
foo(*i) 
```

顺便说一句，它适用于任何可迭代对象，而不仅仅是列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T11:00:04.500

是的，Python 支持：

```
foo(*i) 
```

请参阅[Unpacking Argument Lists](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)的文档。适用于任何可迭代的东西。有两颗星`**`，它适用于 dicts 和命名参数。

```
def bar(a, b, c): 
    return a * b * c
j = {'a': 5, 'b': 3, 'c': 2}

bar(**j) 
```

# android - 通过 GCM 和 Urban Airship 的 Android 推送通知

> ID：13891565
> 
> 赞同：0
> 
> 时间：2012-12-15T10:59:01.880
> 
> 标签：android, push-notification, urbanairship.com

我已经从 google gcm 客户端示例开始实施和应用程序。我得到了一个 regId，这似乎没问题，之后当我尝试使用 Urban Airship 发送推送时，我将我的 regId 放在 APID 字段中，但它出现了一个错误：无效的 APID。

也许我应该使用android中的城市飞艇示例来获取apid？

我认为 APID 和 regID 是一回事。我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:11:33.497

```
 PushManager.shared().setIntentReceiver(PushNotificationPluginIntentReceiver.class);
            String apid = PushManager.shared().getAPID();
            log.info("My Application onCreate - App APID: " + apid);
        } 
```

使用这段代码获取客户端应用程序 id 并将用于**测试推送**

# java - 触发 actionListener 后如何清除表单字段？

> ID：13891567
> 
> 赞同：0
> 
> 时间：2012-12-15T10:59:12.287
> 
> 标签：java, forms, jsf-2, actionlistener, managed-bean

我在视图范围内放置了一个托管 bean。这是豆：

```
@ManagedBean(name = "adminController")
@ViewScoped
public class AdminController extends BaseWebController implements Serializable {

    private static final long serialVersionUID = 1019716974557397635L;

    private transient CustomerDTO customerDTO;

    @PostConstruct
    public void init() {
        customerDTO = new CustomerDTO();
    }

    public void saveCustomer(ActionEvent event) {
        System.out.println(customerDTO.isActive());
        try {
            getServiceProvider().getCustomerService().addNewCustomer(customerDTO);
            getFacesContext().addMessage(null, FacesMessageUtils.getMessageForCustomerAddSuccess(getFacesContext()));
        } catch (Throwable throwable) {
            getFacesContext().addMessage(null, FacesMessageUtils.getMessageForCustomerAddError(getFacesContext()));
            printStackTrace(throwable);
        }       

    }

    public CustomerDTO getCustomerDTO() {
        return customerDTO;
    }

    public void setCustomerDTO(CustomerDTO customerDTO) {
        this.customerDTO = customerDTO;
    }   
} 
```

观点是：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">

    <p:panel header="#{adbBundle['admin.addCustomerPanel.header']}"
        id="addCustomerPanel" toggleable="true">
        <p:panelGrid columns="2" id="addCustomerTable"
            styleClass="addCustomerTable">
            <f:facet name="header">
                <p:outputLabel id="header"
                    value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.header']}" />
            </f:facet>

            <p:outputLabel for="customerName"
                value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName']}" />
            <h:panelGroup layout="block">
                <p:inputText id="customerName" styleClass="customerName"
                    autocomplete="off"
                    label="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName']}"
                    value="#{adminController.customerDTO.customerName}" required="true" />
                <pe:tooltip for="customerName"
                    value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName.tooltip']}"
                    showEffect="slideToggle" hideEffect="slideToggle" showDelay="0"
                    myPosition="left center" atPosition="right center" />
            </h:panelGroup>

            <p:outputLabel for="customerId"
                value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerId']}" />
            <h:panelGroup layout="block">
                <p:inputText id="customerId" autocomplete="off"
                    label="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerId']}"
                    value="#{adminController.customerDTO.customerId}" required="true">
                    <f:validator validatorId="customerIDValidator" />
                </p:inputText>
                <pe:tooltip for="customerId"
                    value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerId.tooltip']}"
                    showEffect="slideToggle" hideEffect="slideToggle" showDelay="0"
                    myPosition="left center" atPosition="right center" />
            </h:panelGroup>

            <p:outputLabel for="activeStatus"
                value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.activeStatus']}" />
            <h:panelGroup layout="block">
                <p:selectBooleanCheckbox id="activeStatus" value="#{adminController.customerDTO.active}" />  
            </h:panelGroup>

            <f:facet name="footer">
                <p:commandButton value="#{adbBundle['saveButton']}"
                    actionListener="#{adminController.saveCustomer}"
                    icon="ui-icon-check" update=":growl, @form" />
            </f:facet>
        </p:panelGrid>
    </p:panel>

</ui:composition> 
```

我面临的问题是，在`actionListener`成功执行后，输入字段保存了这些值。

在上述`h:form`xhtml中是不可见的，它被放置在父页面中：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">#{adbBundle['home']}</ui:define>
    <ui:define name="content">
        <p:growl id="growl" showDetail="true" />
        <h:form id="form">
            <ui:include src="/WEB-INF/includes/addCustomer.xhtml" />
        </h:form>
    </ui:define>

</ui:composition> 
```

但是，如果我`customerDTO = new CustomerDTO();`在末尾添加`actionListener` `saveCustomer`，输入将被重置。

是清除表格的方法吗？或者有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:18:43.753

使用按钮上的 ActionEvent 清除表单数据

```
public void clear(){
    customerDTO = new CustomerDTO();
    } 
```

# python - 如何在python pexpect中匹配像（％i1）这样的正则表达式

> ID：13891571
> 
> 赞同：0
> 
> 时间：2012-12-15T10:59:49.683
> 
> 标签：python, regex, pexpect

我想使用 pexpect 从 python 中使用 maxima，每当 maxima 启动时，它都会打印一堆这种形式的东西：

```
$ maxima
Maxima 5.27.0 http://maxima.sourceforge.net
using Lisp SBCL 1.0.57-1.fc17
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 
```

我想像这样启动pexpect：

```
import pexpect 
cmd = 'maxima'
child = pexpect.spawn(cmd)
child.expect (' match all that stuff up to and including (%i1)')
child.sendline ('integrate(sin(x),x)')
chil.expect( match (%i2) i think ; see below sample session  ) 
print child.before 
```

如何将起始横幅与提示符 (%i1) 匹配？依此类推，随着会话的进行，最大值也会将 (%i1) 的值加一，

```
(%i1) integrate(sin(x),x);
(%o1)                              - cos(x)
(%i2) integrate(log(x),x);
(%o2)                            x log(x) - x
(%i3) 
```

所以下一个期望是：

```
child.expect ('match (%i2)')
child.sendline ('integrate(log(x),x)')
child.expect( match (%i3) ) 
print child.before 
```

我如何匹配（递增）整数？基本上我需要在打印（%o#）时匹配（%i#）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:27:55.027

这个正则表达式匹配它：`\(%i\d\)`. 如果您需要匹配`(%o#)`s 只需在针中替换`i`为。`o`

# php - 带参数 0 的函数 php

> ID：13891584
> 
> 赞同：1
> 
> 时间：2012-12-15T11:01:20.727
> 
> 标签：php, function, parameters, int, switch-statement

我有这样的功能

```
public function get_page($position) {

    switch ($position) {
        case "current":
            echo "current";
            return $this->current_page;
            break;
        case "first":
            echo "first";
            return $this->current_page >= 3 ? 1 : false;
            break;
        case "last":
            echo "last";
            return $this->current_page <= $this->total_pages() - 2 ? ceil($this->count / $this->nb_items_to_show) : false;
            break;
        case "previous":
            echo "previous";
            return $this->current_page - 1 >= 1 ? $this->current_page - 1 : false;
            break;
        case "next":
            echo "next";
            return $this->current_page + 1 <= $this->total_pages() ? $this->current_page + 1 : false;
            break;
        case is_int($position):
            echo "int";
            if ($position >= 1 && $position <= $this->total_pages()) {
                return $position;
            } else {
                return false;
            }
            break;
        default:
            echo "default";
            return false;
            break;
    }
} 
```

当我调用该函数时，它适用于除 0 以外的所有参数，并在开关中进入“当前”情况。

```
$paginator->get_page(0); 
```

如果我用引号“0”调用该函数，它就可以工作。但是这个函数可以这样调用

```
$paginator->get_page($paginator->get_page("current") - 2); 
```

如何使用参数 0 调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:05:32.560

`is_int`返回`TRUE`或`FALSE`

`case is_int($position):`这是相同的`case -1:`，`case 1:`但不是`case 0:`

在 PHP 中，`TRUE`被认为是**任何非零值**

您可能正在寻找`case intval($position):`

还值得注意的是，将 a 与 进行比较时`string`，`0`它将始终返回`TRUE`，除非字符串以数字开头，例如`23balloons`. 这就是 PHP 的工作原理。

因此，出于以下原因，您将希望**所有整数条件都继续您的字符串条件：**

> 在数字上下文中评估字符串时，结果值和类型确定如下。
> 
> 如果字符串不包含任何字符 '.'、'e' 或 'E' 并且数值符合整数类型限制（由 PHP_INT_MAX 定义），则字符串将被评估为整数。在所有其他情况下，它将被评估为浮点数。
> 
> 该值由字符串的初始部分给出。如果字符串以有效的数字数据开头，这将是使用的值。否则，该值将为 0（零）。有效的数字数据是一个可选的符号，后跟一个或多个数字（可选地包含一个小数点），后跟一个可选的指数。指数是“e”或“E”后跟一位或多位数字。

更多信息可以在[这里](http://josephscott.org/archives/2012/03/why-php-strings-equal-zero/)找到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T11:15:46.927

改变：

```
is_int // Find whether the type of a variable is integer 
```

到：

```
is_numeric // Finds whether a variable is a number or a numeric string 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-15T11:09:56.110

切换前添加：

```
if (!is_string($position)) {
goto default;
} 
```

# throttling - 错误代码=003001；状态码=403；来源=限制策略

> ID：13891588
> 
> 赞同：2
> 
> 时间：2012-12-15T11:01:52.973
> 
> 标签：throttling, intuit-partner-platform

最近在我们使用IPP数据服务的app中，时不时会遇到这些错误。

```
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
  <Error RequestId="49f7926a9aa84cfc8289534801dee72d">
    <RequestName>ErrorRequest</RequestName>
    <ProcessedTime>2012-12-07T10:10:59+00:00</ProcessedTime>
    <ErrorCode>3001</ErrorCode>
    <ErrorDesc>message=This client has made too many consecutive requests over too short a period of time.  Please wait a short amount of time before attempting to submit again; errorCode=003001; statusCode=403; source=Throttling Policy</ErrorDesc>
  </Error>
</RestResponse> 
```

在 IPP 文档的任何地方都找不到对“限制策略”或错误代码“3001”的任何引用。

任何有助于确定节流限制的帮助将不胜感激。它们是基于 IP、速率限制、并发限制、OAuth 消费者、OAuth 客户端还是其他什么？

编辑：关于同一问题的 IDN 论坛链接：[https](https://idnforums.intuit.com/messageview.aspx?catid=69&threadid=18910) ://idnforums.intuit.com/messageview.aspx?catid=69&threadid=18910 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:24:38.747

是的，如果单个用户或针对单个领域的请求超过每分钟 500 个，则会有一个限制过程。

在一分钟内，您有超过 600 个请求。

看起来几乎所有（除了 32 个请求）都是单个客户查询……所有不同的客户记录 ID。有没有一种方法可以进行单个客户列表查询，必要时进行过滤，以在单个请求中获取一堆客户记录并减少您拨打的电话数量。

# qt - .ico 图标未在 Windows 上显示

> ID：13891591
> 
> 赞同：10
> 
> 时间：2012-12-15T11:02:18.450
> 
> 标签：qt, plugins, icons, toolbar, ico

我遵循了[Qt 资源系统](http://doc.qt.digia.com/qt/resources.html)指南，并且**.ico 图标出现在 Linux 上。**

当我尝试从 Qt Creator 运行应用程序时，图标未显示在 Windows 上。

我*怀疑*基于[Qt/C++ 的插件问题：在 Windows 操作系统下运行程序时图标未显示，但我无法从指南](https://stackoverflow.com/q/6516299/341970)[How to Create Qt Plugins](http://doc.qt.digia.com/qt/plugins-howto.html)中弄清楚该怎么做。

**是插件问题还是为什么 Windows 上没有显示图标？**

**如果是插件问题：如何告诉我的应用程序在哪里可以找到 qico.dll？**

* * *

环境细节：

适用于：Kubuntu 12.04 LTS、Qt Creator 2.4.1 和 Qt 4.7.4（64 位）

失败：Windows XP SP2 32 位、Qt Creator 2.4.1 和 Qt 4.7.4（32 位）

Everyting 是默认设置（开箱即用），我没有弄乱设置。

**资源.qrc**

```
<!DOCTYPE RCC><RCC version="1.0">
    <qresource>
        <file>images/spreadsheet.ico</file>
    </qresource>
</RCC> 
```

也试过了`<qresource prefix="/">`。

来自**application.pro**

```
RESOURCES += \
    resources.qrc

OTHER_FILES += \
    images/spreadsheet.ico 
```

在对应的**源文件中**

```
QIcon(":/images/spreadsheet.ico") 
```

我也尝试过[在 Windows 上部署应用程序](http://qt-project.org/doc/qt-4.8/deployment-windows.html)

```
QDir plugins(QCoreApplication::applicationDirPath()+"/plugins");

qDebug() << "Plugin directory" << plugins.absolutePath() << "found?" << plugins.exists();

app.addLibraryPath(plugins.absolutePath()); 
```

使用插件目录中的 qico.dll。它应用程序打印插件目录存在，但图标仍然不显示。

我再说一遍：**它适用于 Linux。**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T15:04:04.873

对于未来的谷歌访问者：您可以阅读问题下的评论，因为这是该答案的诞生地。

所以问题是默认情况下`ico`不支持格式`QIcon`，你需要一个插件。在这种情况下`QImageReader::supportedImageFormats()`，列出 QIcon 支持的格式的函数可能会有所帮助。

如果您的格式不受支持，您可以尝试将`imageformats`文件夹从 Qt`plugins`目录复制到可执行文件所在的目录中。如果您的应用程序位于`c:\myapp`文件夹中，您应该有`c:\myapp\imageformats`文件夹（不是`c:\myapp\plugins\imageformats`）。否则，您必须使用`QCoreApplication::addLibraryPath`.

还要确保`qico4.dll`和`qicod4.dll`（如果你在调试模式下构建）在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T16:41:37.207

只是为了详细说明`QCoreApplication::addLibraryPath`- 事情：

您需要使“**插件**”文件夹可用。不是子文件夹！

这是**Python** / **PySide**用户使用 PySide 包位置的一种方式。如果您已经有一个实例，您也可以只使用您的`QtGui.QApplication`实例，该实例位于此处：`app`

```
pyside_plugin_path = os.path.join(sys.modules['PySide'].__path__[0], 'plugins')
app.addLibraryPath(pyside_plugin_path) 
```

并且已经感谢了`doc`！

# sqlite - SQLite 删除表未删除

> ID：13891594
> 
> 赞同：2
> 
> 时间：2012-12-15T11:03:04.500
> 
> 标签：sqlite

在`sqlite3`命令行工具中，我删除了一个表：

```
sqlite> DROP TABLE tableName; 
```

这是一个很大的表，所以我希望 sqlite 文件的大小会大幅下降。然而，它根本没有改变。

从数据库中完全清除此表的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:04:51.060

当您在 SQLite 中删除表时，文件的大小不会缩小，您必须明确要求它。

常见问题解答中的更多信息：[http ://www.sqlite.org/faq.html#q12](http://www.sqlite.org/faq.html#q12)

还有一些选项可以将您的数据库配置为启用自动真空，您可以在`VACUUM`此处的关键字文档中找到更多信息： [http](http://www.sqlite.org/lang_vacuum.html) ://www.sqlite.org/lang_vacuum.html和`PRAGMA`此处的选项：[http:// /www.sqlite.org/pragma.html#pragma_auto_vacuum](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)

# android - API10 上的 ImageView.getY()？

> ID：13891595
> 
> 赞同：1
> 
> 时间：2012-12-15T11:03:14.757
> 
> 标签：android

我正在为 Android 2.3.3 (API10) 开发一个应用程序，所以我的问题是：

有没有 API10 的库`ImageView.getY();`？

# php - 将行数组存储到mysql数据库中

> ID：13891597
> 
> 赞同：0
> 
> 时间：2012-12-15T11:03:44.277
> 
> 标签：php

我已经编写了一些 php 代码来以表的形式从 mysql 数据库中检索一些记录。该表有三列，其中前两列是从数据库中填充的，第三列是每行的下拉列表。现在我想从填充的行中选择下拉列表，并将每行的信息存储在一个新的数据库中。

请查看代码并回复您的建议。

```
<html>
    <?
        // data from the "recordentry.php";
        $date = $_POST['date'];
        $course = $_POST['course'];
        $period = $_POST['period'];
        $batch = $_POST['batch'];
        $subject = $_POST['subject'];
        $faculty = $_POST['faculty'];
    ?>
    <p> Current Date&Time:<? echo $date ?></p>
    <form enctype="multipart/form-data" name="f1" method="POST" ACTION="<?=$self ?>"">
    <?
        $db = "contact";
        //mysql_connect(localhost,$_POST['username'],$_POST['pass']);
        $link = mysql_connect("localhost", "root", "");
        if (!$link)
            die("Couldn't connect to MySQL");
        mysql_select_db($db, $link) or die("Couldn't open $db: " . mysql_error());
        $result = mysql_query("SELECT name,uic FROM student where batch='$batch' AND course='$course' order by name") or die("SELECT ERROR: " . mysql_error());
        $num_rows = mysql_num_rows($result);
        echo "<table border='1' align='center'><tr><th>Name</th><th>Unique Identification Code</th>
    <th>Attendance</th></tr>";
        while ($row = mysql_fetch_array($result))
        {
            //Display the results in different cells
            echo "<tr><td align=center>" . $row['name'] . "</td><td align=center>" . $row['uic'] . "</td><td align=center><select name='attendance' style='background-color:#FFC'>
    <option>Present
    <option>Absent
    </select></td></tr>";
            $data[] = array(
                'name' => $row['name'],
                'uic' => $row['uic'],
                'attendance' => $row['attendance']
            );
        }
        echo "<tr><td><input type='submit' value='Submit' name='submit_button' />";
        echo "</table>";
        foreach ($data as $value)
        {
            $name = mysql_result($value['name']);
            $uic = mysql_result($value['uic']);
            $a_status = mysql_result($value['attendance']);
            $db = "contact";
            $link = mysql_connect("localhost", "root", "");
            //$link = mysql_connect("localhost",$_POST['username'],$_POST['password']);
            if (!$link)
                die("Couldn't connect to MySQL");
            mysql_select_db($db, $link) or die("Select Error: " . mysql_error());
            $result = mysql_query("INSERT INTO attendance(date, course, period, batch, subject, faculty,name, uic, attendance) VALUES ('$date', '$course', '$period', '$batch', '$subject', '$faculty', '$name', '$uic', '$a_status')") or die("Insert Error: " . mysql_error());
            mysql_close($link);
        }
    ?>
    </form>
</html> 
```

上面的代码可以从数据库中所有检索到的数据中填充表。但是提交后它不能存储最后三个字段$name、$uic 和$attendance。所以，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:12:50.827

尝试这个：

```
 $name = mysql_result($result, $value['name']);  
 $uic = mysql_result($result, $value['uic']);  
 $a_status = mysql_result($result, $value['attendance']); 
```

这将获得*一次*值- 但您在该查询中重用 $result （当您插入时），因此它将被覆盖。更改第一个呼叫或第二个呼叫。

# c# - Html Agility Pack 未封闭嵌入，参数标签

> ID：13891598
> 
> 赞同：1
> 
> 时间：2012-12-15T11:04:13.977
> 
> 标签：c#, asp.net, .net, html-agility-pack

尝试像这样解析 embed-object 标记：

> HtmlNode source2 = HD.CreateElement("source"); source2.InnerHtml =

```
<object width="640" height="390" ><param name="movie" value="http://videa.hu/flvplayer.swf?v=SMxjdkVDqmrfAxJz" /><param name="allowscriptaccess" value="always" /><param name="allowFullScreen" value="true" /><embed width="640" height="390" src="http://videa.hu/flvplayer.swf?v=SMxjdkVDqmrfAxJz" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" /></object><br /><a href="http://videa.hu/videok/jarmuvek/markoloval-tisztitjak-a-parkolot-az-SMxjdkVDqmrfAxJz"> title="fdsdf sdf">dsdfs fs dfsd fsd </a>n here. 
```

问题是当我尝试文档代码`HD.DocumentNode.OuterHtml`或`source2.InnerHtml`参数和嵌入标签将被打开时。

我试过了

> HtmlNode.ElementsFlags["param"] = HtmlElementFlag.Closed;

但得到一个额外的关闭标签。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:26:09.783

尝试这个，

```
 HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
 document.LoadHtml(loadhtmlstring);
 document.OptionFixNestedTags = true; 
```

当您将 html 加载到 HtmlDocument 中时，请尝试修复 html 标签。那么你可以解决你的问题。即允许自动修复 HTML 的标签错误。

# jquery - Joomla 2.5.8 上的错误 500：不支持 JHtml::jquery。文件未找到

> ID：13891599
> 
> 赞同：1
> 
> 时间：2012-12-15T11:04:17.637
> 
> 标签：jquery, joomla, joomla2.5

我正在使用 Joomla 2.5.8 。实际上，在我安装新主题后，此错误发生“JHtml: :jquery not supported. File not found”。由于我是 Joomla 的新手，所以我无法弄清楚。我什至尝试了 Joomla Jquery 库插件，但没有帮助。请帮我整理一下。

**这是调试信息：**

> ```
> 1 JSite->render() JROOT/index.php:48
> 2 JDocumentHTML->parse()  JROOT/includes/application.php:259
> 3 JDocumentHTML->_fetchTemplate() JROOT/libraries/joomla/document/html/html.php:414
> 4 JDocumentHTML->_loadTemplate()  JROOT/libraries/joomla/document/html/html.php:591
> 5 require()   JROOT/libraries/joomla/document/html/html.php:531
> 6 TemplateWarpHelper->render()    JROOT/templates/yoo_revista/index.php:19
> 7 include()   JROOT/templates/yoo_revista/warp/helpers/template.php:49
> 8 TemplateWarpHelper->render()    JROOT/templates/yoo_revista/layouts/template.php:17
> 9 include()   JROOT/templates/yoo_revista/warp/helpers/template.php:49
> 10 JHtml::_() JROOT/templates/yoo_revista/warp/systems/joomla/layouts/head.php:22
> 11 JError::raiseError()   JROOT/libraries/joomla/html/html.php:123
> 12 JError::raise()    JROOT/libraries/joomla/error/error.php:251 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:15:55.757

找到用于导入 jQuery 的代码行并确保它显示以下内容：

```
JHtml::_('jquery.framework'); 
```

它以 noConflict 模式导入它，但也仅适用于**Joomla 3.x**

否则，您可以将其替换为以下内容，这将检测是否已经加载了 jQuery 库，如果没有，它将导入它。

```
if (!JFactory::getApplication()->get('jquery'))
{
    JFactory::getApplication()->set('jquery',true);
    JFactory::getDocument()->addScript('http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:00:40.513

JHtmlJquery is not a class in Joomla! 2.5, it was introduced in 3.0 with the other UI changes. Odds are the extension you've installed is designed for Joomla! 3.0 and later.

# c++ - #define c++ 中的等价物

> ID：13891600
> 
> 赞同：5
> 
> 时间：2012-12-15T11:04:21.167
> 
> 标签：c++

g++ 4.7.2

你好，

我来自 C89，现在我正在使用 g++ 编译器做 c++。

通常我会做这样的事情：

```
#define ARR_SIZE 64
#define DEVICE "DEVICE_64" 
```

在 C++ 中执行此操作的等价物是什么？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T11:09:57.837

`#define`在 C++ 中有。因此，您可以编写相同的代码。但是对于像这样的常数，最好使用 const 关键字。

```
const int ARR_SIZE = 64;
const std::string DEVICE("DEVICE_64"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T11:07:48.160

您可以使用`const`# 代替`define`

```
 const int ARR_SIZE = 64;
  const char DEVICE[] = "DEVICE_64"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T11:07:16.603

`const`您可以使用关键字定义常量：

```
const int ARR_SIZE = 64;
const char DEVICE[] = "DEVICE_64"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-15T11:09:00.223

最好使用匿名命名空间（仅限于当前文件）：

```
namespace {
    int const ARR_SIZE = 64;
    /* ... */
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T11:21:11.257

# #define 没问题！

除类型检查外，大多数 C 代码都无需更改即可使用 C++ 编译器进行编译。所以#define 在 C++ 中仍然有效。

您可能想查看其他 stackoverflow 条目，例如：

[我应该使用#define、枚举还是常量？](https://stackoverflow.com/questions/112433/should-i-use-define-enum-or-const)

[使用 C++ 编译器编译 C 代码会出现什么问题？](https://stackoverflow.com/questions/861517/what-issues-can-i-expect-compiling-c-code-with-a-c-compiler)

# entity-framework - 来自另一个项目的实体框架连接字符串引用

> ID：13891601
> 
> 赞同：3
> 
> 时间：2012-12-15T11:04:32.200
> 
> 标签：entity-framework, c#-4.0, linq-to-sql, entity, linq-to-objects

我有一个由 4 个项目组成的解决方案。MVC、WCF、业务 LYR、DataAcess。我正在使用实体框架进行数据库事务。我的要求是我只想从 MVC webconfig 中获取实体连接字符串，而不在访问层的 APP.cofig 中引用。在这种情况下可能吗？

当我尝试以下代码时，出现错误。

```
 this.ConnectionString="data source=cmh-sosql;initial catalog=Student;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework";

            System.Data.SqlClient.SqlConnectionStringBuilder scsb = new System.Data.SqlClient.SqlConnectionStringBuilder(this.ConnectionString);

EntityConnectionStringBuilder ecb = new EntityConnectionStringBuilder();
ecb.Metadata = "res://*/schoolModel.csdl|res://*/schoolModel.ssdl|res://*/schoolModel.msl";
ecb.Provider = "System.Data.SqlClient";
ecb.ProviderConnectionString = scsb.ConnectionString;

using (SchoolDB schoolDB = new SchoolDB(ecb.ConnectionString)) 
```

错误：实体类型 student 不是当前上下文模型的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:10:30.500

你是绝对正确的。我得到了解决方案。无需在 webconfig 中保留任何字符串以引用实体模型。我们可以参考上面的代码。但变化是配置上下文对象。

```
public SchoolDB(string  connectionString)
        : base(connectionString)
    {
    }
We need to change the constructor also by this format. 
```

感谢 Sampath

# r - 将幂集生成为 0/1 选择向量的列表

> ID：13891604
> 
> 赞同：3
> 
> 时间：2012-12-15T11:05:21.530
> 
> 标签：r

如果例如 |S| = 8，我怎样才能得到具有以下形式的行的 256 x 8 矩阵：

```
> sample(c(0,1),8,replace=T)
[1] 1 0 0 1 1 1 0 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:05:04.790

也许这有帮助：

```
library(e1071)
bincombinations(8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T14:00:03.743

这是一个更快（并且可以说更干净）的版本`bincombinations`：

```
fast.bincombinations <- function(p)
    vapply(X = seq_len(p),
           FUN = function(i)rep(rep(0:1, each = 2^(p-i)), times = 2^(i-1)),
           FUN.VALUE = integer(2^(p)))

system.time(fast.bincombinations(24))
#    user  system elapsed 
#   2.967   1.056   3.995 

system.time(bincombinations(24))
#    user  system elapsed 
#  11.144  12.111  53.687 
```

我们还要提一下，`bincombinations`输出一个数字矩阵，恕我直言，这是糟糕的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:23:57.447

你可以这样做：

```
s = 8                                        # <-- |s| = 8
pset <- t(sapply(0:(2^s-1),intToBits))[,1:s] # <-- a matrix of 256x8 raws
pset <- apply(pset ,2,as.integer)            # <-- raws to integers 
```

结果：

```
> head(pset)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    0    0    0    0    0    0    0    0
[2,]    1    0    0    0    0    0    0    0
[3,]    0    1    0    0    0    0    0    0
[4,]    1    1    0    0    0    0    0    0
[5,]    0    0    1    0    0    0    0    0
[6,]    1    0    1    0    0    0    0    0
> tail(pset)
       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[251,]    0    1    0    1    1    1    1    1
[252,]    1    1    0    1    1    1    1    1
[253,]    0    0    1    1    1    1    1    1
[254,]    1    0    1    1    1    1    1    1
[255,]    0    1    1    1    1    1    1    1
[256,]    1    1    1    1    1    1    1    1 
```

这是另一种方式：

```
s = 8;
res <- sapply(0:(s-1),function(x)rep(c(rep(0,2^x),rep(1,2^x)),2^(s-x-1))) 
```

# c# - NetworkStream.DataAvailable 与 TcpClient.Available

> ID：13891609
> 
> 赞同：7
> 
> 时间：2012-12-15T11:06:01.237
> 
> 标签：c#, tcpclient, networkstream

在以下情况下；

```
System.Net.Sockets.TcpClient TC = SomeHowObtained;
System.Net.Sockets.NetworkStream NS = TC.GetStream(); 
```

`NS.DataAvailable`使用和检查有什么区别`TC.Available > 0`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T11:25:07.937

在这种情况下，没有，没有区别。内部`NS.DataAvailable`返回 true 时`Socket.Available != 0`。因为`TC.Available`刚刚返回`Socket.Available`并且您正在检查它是否大于 0，所以您基本上在做同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T11:24:27.037

来自 MSDN：

[NetworkStream.DataAvailable](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable.aspx)

> 获取一个值，该值指示要读取**的 NetworkStream 上的数据是否可用。**

[TcpClient.Available](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.available.aspx)

> 获取**已从网络接收**并可供读取的数据量。

`NetworkStream.DataAvailable`返回`boolean`（如果数据在要读取的流上可用，则为 true），`TcpClient.Available`返回`Int32`（从网络接收到的可读取数据的字节数）

# jquery - jQuerify 无法在 chrome 上使用 facebook

> ID：13891611
> 
> 赞同：5
> 
> 时间：2012-12-15T11:06:02.923
> 
> 标签：jquery, bookmarklet

jQuerify 是一个小书签，用于向当前显示的网页添加 jquery 支持。看看这个页面： http: [//www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet/](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet/)

这个演示让我知道 jquery 是否已经下载，如果没有则加载它，然后显示活动版本。我的问题是：使用 google chrome 浏览时，某些页面上没有显示任何内容，例如 facebook、google（不是缓存页面，而是页面结果）使用 IE 时在这些页面上工作。

我试图断开 chrome 上的用户 google 会话，但我仍然遇到问题。我认为这是由 https url 引起的。但在我确认“显示所有内容”后，它在 IE 中显示正常。

Chrome中可能存在错误配置吗？jQuerify 是否有任何修复或我应该放弃并找到另一个解决方案来加载 jquery 和远程脚本？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T09:10:19.220

在 Google Chrome 中，您可以在浏览器的控制台中看到错误消息。

它说：拒绝加载脚本“http://code.jquery.com/jquery.min.js”，因为它违反了以下内容安全策略指令：“script-src https: *//.facebook.com http: // /* .facebook.com https:// *.fbcdn.net http://* .fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net *.google.com 127.0.0.1:* *.spotilocal。 com:* chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl 'unsafe-inline' 'unsafe-eval' https:// *.akamaihd.net http://* .akamaihd.net”。

**这是因为 Facebook 已经实现了一个安全功能，该功能是通过 HTTP 标头“X-WebKit-CSP”实现的。**

这就是为什么 Facebook 上的当前实现会影响在基于 webkit 的浏览器（Chrome 和 Safari）中加载外部脚本的 **原因 jQuerify 书签在 Firefox 和 IE 上运行良好。**

**Chrome 的解决方案**，您可以使用以下方法：

*   由于您可以在上面的详细信息中看到，支持 127.0.0.1:*。只需在您的系统上运行一个简单的 Web 主机（例如：Apache Web 服务器）。将 jquery javascript 文件复制到系统上的 Apache 链接目录中。现在这个文件可以通过类似的路径访问`http://127.0.0.1/jquery.js`（注意：不要`http://localhost/`在这里使用）。在 jQuerify 小书签中，将 jQuery 文件的路径从 更改`http://code.jquery.com/jquery.min.js`为`http://localhost/jquery.js`. 现在小书签可以正常工作了。

       或者

*   将整个 jQuery 代码加载到小书签中，这样它就不会加载外部脚本文件。不推荐，因为如果您还希望使用它通过 jQuery 文件进行调试，这将不如第一种方法有用。

# visual-studio - 调用者主对话框的dll

> ID：13891612
> 
> 赞同：0
> 
> 时间：2012-12-15T11:06:11.977
> 
> 标签：visual-studio, mfc

我绝望地寻找 MFC dll 示例，该示例使用仅使用回调函数的字符串更新从 CDialog 派生的对话框上的编辑字段。我意识到静态函数是在回调中使用的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:46:00.320

我猜你意识到 dll 应该有一些东西（比如一个单独的线程，或者这个模型的某个第三方消息处理程序。所以，这超出了这个问题的范围。

回到问题：为了创建一个回调函数，你需要“typedef”它的原型，并将这个函数的地址从你的调用应用程序传递给 dll。在您的 dll“h”文件中指定：

```
// This is the Mfcdll1.h header file
// You should have some code created by the wizard, similar to the following:
#ifdef MYDLL_EXPORTS
#define MYDLL_API __declspec(dllexport)
#else
#define MYDLL_API __declspec(dllimport)
#endif

// This is the typedef for your callback function type:
typedef void (CALLBACK* MY_DLL_CALLBACK)
(
 LPVOID lpParam,
 LPCTSTR lpszMessage
);

class CMyDllApp : public CWinApp
{
public:
  CMyDllApp();
  // etc.

  void SetCallBack(MY_DLL_CALLBACK pCallback, LPVOID pCallbackParm){m_pCallback = pCallback; m_pCallbackParm = pCallbackParm;}

private:
  MY_DLL_CALLBACK m_pCallback;
  LPVOID m_pCallbackParm;
};

MYDLL_API void SetCallBack(MY_DLL_CALLBACK pCallback, LPVOID pCallbackParm); 
```

在你的 dll 的 cpp 文件中指定这个：

```
CMyDllApp::CMyDllApp()
{
  m_pCallback = NULL;
  m_pCallbackParm = NULL;
}

MYDLL_API void SetCallBack(MY_DLL_CALLBACK pCallback, LPVOID pCallbackParm)
{
  theApp.SetCallBack(pCallback, pCallbackParm);
} 
```

现在，如果你的 dll 想要调用回调函数，你需要做的就是：

```
CMyDllApp::SendCallbackToTheCaller(LPCTSTR lpszMessage)
{
  if(m_pCallback) (*(m_pCallback))(m_pCallbackParm, lpszMessage);
} 
```

在这个阶段，您已经在 dll 中完成了编码。现在，您需要做的就是在对话框中指定静态回调函数，该函数将更新您的编辑控件，类似于： 在 h 文件中：

```
// TestDlg.h  - My Test dialog with the Edit Control
CTestDlg: public CDialog
{
  public:
  static void CALLBACK StatusCallback(LPVOID lpParam, LPCTSTR lpszMessage);
}; 
```

在 cpp 文件中：

```
BOOL CTestDlg::OnInitDialog()
{
  CDialog::OnInitDialog();

  // Insert this line along your stuff
  ::SetCallback((MY_DLL_CALLBACK)StatusCallback, (LPVOID)this);
}

void CALLBACK CTestDlg::StatusCallback(LPVOID lpParam, LPCTSTR lpszMessage)
{
  CTestDlg* pTestDlg = reinterpret_cast<CTestDlg*>(lpParam);
  ASSERT(pTestDlg!=NULL);
  pTestDlg->m_edStatus.SetWindowText(lpszMessage);
} 
```

# c# - 使用 Emgu CV 检测到面部的虚拟头发 - C#

> ID：13891613
> 
> 赞同：1
> 
> 时间：2012-12-15T11:06:16.273
> 
> 标签：c#, image-processing, emgucv, face-detection

我目前的项目要求我学习人脸检测/跟踪和图像处理，鉴于我在 c# 方面的经验，我选择`Emgu CV`了人脸检测和跟踪库作为我的选择库。根据我目前所学的知识，我可以进行人脸检测和跟踪，以及基本的图像处理。

我的目标是能够在检测到的脸上放置虚拟头发。我想要实现的类似于[此视频]：[http](http://www.youtube.com/watch?v=BdPmECfUFcI) ://www.youtube.com/watch?v=BdPmECfUFcI 。

我想知道的是在检测到的脸上处理不同类型发型的头发放置时使用的技术。我以什么图像格式存储头发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:20:59.097

观看视频后，我注意到它认为头部是一个平面矩形而不是一个矩形棱柱（3D 对象），所以它没有考虑使用透视变换，我也不会考虑它。这是一个限制，但可以作为进行此类展示位置的不错的第一步。请注意，这不仅仅是考虑透视的简单问题，您的面部跟踪算法还需要能够处理更复杂的配置（例如，眼睛可能不完全可见）。

因此，您需要的第一件事是根据眼睛与 x 轴的角度对齐的边界矩形，如下右图所示（红色部分表示眼睛之间的连接）。左图显示了一个与轴对齐的典型边界框，它不适用于此问题。

![在此处输入图像描述](../Images/f8173abee7d7b537019b38899b428ec3.png)

考虑到头部是对称的之后，问题也被简化了，所以你知道上图中的顶部中间点是你的头顶的中间。此外，考虑到典型的头部顶部可能会比底部大，那么您会在下图中看到矩形的宽度接近前额的宽度。例如，您还可以考虑仅在头部上半部分的边界矩形。

![在此处输入图像描述](../Images/8ce686ef897639cdea39ebc458553cc4.png)

现在剩下的就是在这个矩形中定位一些对象。为此，您需要增加要定位的对象的描述，使其不是纯粹的像素。我们可以定义“入口宽度”（EW）和“入口中点”（EM）。该 EW 确定了另一个矩形（头部矩形）中定位它所需的宽度。因此，如果 EW 小于所需值，则分别在 EW 较大时放大此对象。请注意，头部矩形的全宽通常会高估定位此对象，因此您可以尝试使用宽度的百分比。EM 值有助于了解如何将此对象放置在头部上方。下图中，EW 是水平蓝色虚线，EM 是其上的中点。

![在此处输入图像描述](../Images/8ec78ca45a86754933c094ed25e1932d.png)

这个对象唯一需要的其他特殊的东西是一个被认为是背景的值。因此，在绘制这个对象时，很容易知道是使一个点完全透明（背景值）还是完全不透明（其他任何东西）。这是我想到的基本需要完成的草图。

# qt - Embarcadero C++ builder + FireMoneky vs Qt

> ID：13891615
> 
> 赞同：6
> 
> 时间：2012-12-15T11:06:25.107
> 
> 标签：qt, c++builder, firemonkey

我想知道我对这个问题的看法是否正确。使用 embarcadero 的 C++ 构建器（现在使用基于 clang 的编译器）和 FireMonkey 框架来支持 Qt 有什么意义吗？关键是 Qt 似乎将小部件抛在了后面，他们更多地专注于 javascript，而 embarcadero 似乎非常致力于 C++。我是对的还是我看错了？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:03:30.587

> Qt 似乎将小部件抛在了后面，他们更多地专注于 javascript

不。从 Qt 5.0 开始，推动的是用 QML 编写 GUI，而后端仍然是您想要的任何东西（传统上是 C++，但几乎有语言的 Qt 绑定）。主要原因是编写现代流体硬件加速 UI 非常费力，因此 Qt 编写了一种基于 JavaScript 的语言，可以将其中的大部分内容自动化；另一个原因是，虽然每个人都知道 GUI 代码和后端代码应该完全分开，但在现实世界中，随着时间的推移，它们往往会变得混合，拥有一个带有信号/插槽驱动后端的 QML 前端会强制执行这一点。

Qt 还拥有 QML 中可用的所有“传统”小部件（目前仍处于测试阶段，但旨在发布 v5.1 - 我认为），并且 C++ 小部件仍将在它们自己的库中可用。更不用说 Qt 始终支持以前的版本，因此您可能还有 7 年的时间来使用“普通”v4.x C++ 小部件！

我无法评论 Embarcadero 或 FireMonkey - 因为我从未听说过它们......

# ruby-on-rails - 如何在 Rails 3.2.8 中比较两个不同表的两行

> ID：13891616
> 
> 赞同：1
> 
> 时间：2012-12-15T11:06:23.383
> 
> 标签：ruby-on-rails

我需要将winning_numbers 表中的一行7 个属性与另一个表lottery_selections 中的1 行或更多行进行比较，该表在rails 3.2.8 中包含6 个属性。从结果中，我想计算一个表中与另一个表匹配的属性数量并呈现结果。

我有两个模型：lottery_selections 和winning_numbers

```
# == Schema Information
#
# Table name: lottery_selections
#
#  id                     :integer          not null, primary key
#  syndicate_id           :integer
#  lottery_selection_1    :integer
#  lottery_selection_2    :integer
#  lottery_selection_3    :integer
#  lottery_selection_4    :integer
#  lottery_selection_5    :integer
#  lottery_selection_6    :integer
#  lottery_selection_date :datetime
#  created_at             :datetime         not null
#  updated_at             :datetime         not null
#

class LotterySelection < ActiveRecord::Base
  attr_accessible :lottery_selection_1, :lottery_selection_2, :lottery_selection_3, :lottery_selection_4,\
   :lottery_selection_5, :lottery_selection_6, :lottery_selection_date, :syndicate_id
  belongs_to :winning_number

  #validates_associated :winning_number
  validates :lottery_selection_1, :lottery_selection_2, :lottery_selection_3, :lottery_selection_4,\
   :lottery_selection_5, :lottery_selection_6, :presence => true, :numericality => {:greater_than_or_equal_to => 1}, \
   :numericality => {:less_than_or_equal_to => 49}

 UNIQU_FIELDS = [:lottery_selection_1, :lottery_selection_2, :lottery_selection_3, :lottery_selection_4,\
 :lottery_selection_5, :lottery_selection_6]

validate :lottery_numbers_are_unique

def lottery_numbers_are_unique
    unless UNIQU_FIELDS.map{|field| self[field] }.uniq.length == UNIQU_FIELDS.length
      errors[:base] << "You have repeated one or more numbers for that day's draw"
    end
    end
end

# == Schema Information
#
# Table name: winning_numbers
#
#  id                   :integer          not null, primary key
#  winning_numbers_date :datetime
#  winning_number_1     :integer
#  winning_number_2     :integer
#  winning_number_3     :integer
#  winning_number_4     :integer
#  winning_number_5     :integer
#  winning_number_6     :integer
#  winning_number_bonus :integer
#  created_at           :datetime         not null
#  updated_at           :datetime         not null
#

class WinningNumber < ActiveRecord::Base
  attr_accessible :winning_number_1, :winning_number_2, :winning_number_3, :winning_number_4, :winning_number_5,\
   :winning_number_6, :winning_number_bonus, :winning_numbers_date
  has_many :lottery_selections
  #validates_associated :lottery_selections
      validates :winning_number_1, :winning_number_2, :winning_number_3, :winning_number_4, :winning_number_5,\
    :winning_number_6, :winning_number_bonus, :presence => true, :numericality => {:greater_than_or_equal_to => 1}, \
   :numericality => {:less_than_or_equal_to => 49}

  #Below checks that for any given date there can only be one set of winning numbers
  validates :winning_numbers_date, uniqueness: { scope:     [:winning_number_1, :winning_number_2, :winning_number_3,\
   :winning_number_4, :winning_number_5, :winning_number_6, :winning_number_bonus] }

  UNIQ_FIELDS = [:winning_number_1, :winning_number_2, :winning_number_3, :winning_number_4, :winning_number_5, :winning_number_6, :winning_number_bonus]

  validate :winning_numbers_are_unique

  def winning_numbers_are_unique
      unless UNIQ_FIELDS.map{|field| self[field] }.uniq.length == UNIQ_FIELDS.length
        errors[:base] << "You have repeated one or more numbers for that day's draw"
      end
  end
end 
```

您能否建议我如何进行比较并使用结果来呈现结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:21:34.470

Most effective solution (even more rails developer will advise not to do it): Create a stored procedure on the database where you can do the comparison and return the result.

Something quick you can do (although the more you research the better, on a lottery app you may have a lot of tickets and you need to run something that is really effective):

```
winning_numbers = # Do a query and put the array of winning numbers here

seven_numbers_match = LotterySelection.where("number_1 in (?) and number_2 in (?) and number_3 in (?) and number_4 in (?) and number_5 in (?) and number_6 in (?) and number_7 in (?)", winning_numbers, winning_numbers, winning_numbers, winning_numbers, winning_numbers, winning_numbers, winning_numbers)

six_number_match = LotterySelection.where("(number_1 in (?) and number_2 in (?) and number_3 in (?) and number_4 in (?) and number_5 in (?) and number_6 in (?) and number_7 not in(?)") OR (number_1 in (?) and number_2 in (?) and number_3 in (?) and number_4 in (?) and number_5 in (?) and number_6 not in (?) and number_7 in (?)) OR (...") 
```

And so on, it may not be the best algorithm but it works and use the db engine to do the compassion.

But definitely for a problem like this, I'll simply hire a DBA consultant to write the stored procedure for me.

# vb.net - 文件创建后 My.computer 无法访问文件

> ID：13891617
> 
> 赞同：4
> 
> 时间：2012-12-15T11:06:30.060
> 
> 标签：vb.net

我有一些代码可以删除一个文件，制作另一个文件（这样我就可以覆盖它）并在上面写。

```
 My.Computer.FileSystem.DeleteFile("./pass")
            File.Create("./pass")
            My.Computer.FileSystem.WriteAllText("./pass", MaskedTextBox1.Text, True) 
```

当它开始写文字时，它说：

```
An unhandled exception of type 'System.IO.IOException' occurred in mscorlib.dll

Additional information: The process cannot access the file '[path]\pass' because it is being used by another process. 
```

有没有办法解决这个问题，或者只是覆盖文件而不删除并重新制作它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T12:33:14.817

> 因为它正被另一个进程使用

这并不完全准确，*您的*流程正在使用它。File.Create() 返回一个 FileStream 对象。您没有调用它的 Close() 方法，所以它仍在使用中。File.Create().Close() 可以解决这个问题。

但是在这里使用 File.Create() 没有意义， FileSystem.WriteAllText() 已经创建了文件。删除文件也没有意义，WriteAllText() 会覆盖文件。因此，只需删除前两个语句即可解决您的问题。

# android - Android地理编码器不准确，但仅适用于我的包名

> ID：13891619
> 
> 赞同：2
> 
> 时间：2012-12-15T11:06:48.440
> 
> 标签：android, geocode

我有一个应用程序，它非常依赖于使用 Android 中内置的地理编码支持的反向地理编码结果。但是，我注意到地理编码器对象返回的结果不准确，可能相差数百米/码。然而，最奇怪的是，这种不准确似乎是由我的包名引起的！

如果我运行您可以在[http://developer.android.com/training/basics/location/geocoding.html](http://developer.android.com/training/basics/location/geocoding.html)下载的示例代码，一切都会像魅力一样工作。反向地理编码器几乎总能得到正确的门牌号，在某些情况下还能得到我邻居的门牌号。

但是，如果我采用相同的示例代码，并且只将包名称更改为我的应用程序的包名称，那么反向地理编码突然变得非常不准确。此外，地理编码器服务返回的纬度和经度与我为地理编码器提供的纬度和经度非常不同。

据我所知，Android 地理编码器不受任何使用限制。但是我怎么能仅仅根据包名得到不准确的结果呢？这对我和我的用户（超过 50 万）来说都非常令人沮丧。

# c++ - 用单独的单词分隔字符串

> ID：13891620
> 
> 赞同：1
> 
> 时间：2012-12-15T11:06:53.233
> 
> 标签：c++

取这个字符串：

```
asking  a question    is easy 
```

我想要一个while循环

*   取第一个词`asking`，
*   用一个函数检查它的一些东西，
*   然后进入下一个单词`a`
*   依此类推，直到字符串结束

单词可以用一个或多个空格分隔。

**编辑：**

我想我在解释时实际上犯了一个错误。这是我一直在做的事情：

```
int main()
{
    cout<<"string="; gets(string);
    cout<<"template="; cin>>template;
    while (i<strlen(string))
    {
        k=0;
        while (string[i]!=' ')
        {
            word[k]=string[i];
            i++; k++;
        }
        if (function(string,word)==1) count++;
        while (i<strlen(s) && string[i]==' ')
          i++;
    }
    cout <<"count="<<count;
} 
```

我想像在学校一样坚持使用一些旧的/基本的 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:16:24.807

Stick your string in a `std::stringstream` and then extract words from it in a `while` loop (to check that the stream is still okay):

```
std::string str("asking a question is easy");
std::stringstream ss(str);
std::string word;
while (ss >> word) {
  // Do something
} 
```

# jquery - jquery on button click 在按钮上方显示工具提示

> ID：13891621
> 
> 赞同：1
> 
> 时间：2012-12-15T11:07:03.780
> 
> 标签：jquery, html

我需要在使用 jquery 的按钮单击时在按钮上方显示 div。

```
$("#but button").click(function(){
    $("#mydiv").css("display","block");
    });

<div id="but"><button type="button">Show Div!</button></div>
<div id="mydiv" style="display: none;">The div must be above button</div> 
```

**更新**

我需要在按钮上方制作一个工具提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T11:13:06.757

我建议花一个小时通读[jQuery API 文档](http://api.jquery.com)。从字面上看，它只需要那么长时间，但回报巨大。

**更新**

您关于使其成为工具提示的编辑完全改变了问题。您可能希望使用 div 定位`position: absolute`并为其提供相对于按钮的坐标，如下所示`left`：`top`

```
$("#but button").click(function(){
  var pos = $(this).offset(),
      div = $("#mydiv");

  // Make it visible off-page so
  // we can measure it
  div.css({
    "display": "block",
    "border": "1px solid black",
    "position": "absolute",
    "left": -10000,
    "top": 0
  });

  // Move it where we want it to be
  div.css({
    "left": pos.left + 10,
    "top":  pos.top - div.height() - 10
  });
}); 
```

[实例](http://jsbin.com/ilowij/5)| [资源](http://jsbin.com/ilowij/5/edit)

* * *

**原始答案**：

最明显的事情是更改标记，以便 div 位于正确的开始位置。

很难说出你在问什么，但如果你想`#mydiv`超越`#but`：

```
$("#but button").click(function(){
    $("#mydiv").css("display","block").insertBefore("#but");
}); 
```

[实例](http://jsbin.com/ilowij/1)| [资源](http://jsbin.com/ilowij/1/edit)

但是如果你想把它放在*按钮*之前但里面`#but`：

```
$("#but button").click(function(){
    $("#mydiv").css("display","block").insertBefore(this);
}); 
```

[实例](http://jsbin.com/ilowij/2)| [资源](http://jsbin.com/ilowij/2/edit)

# sql-server - 为什么，当从 SSMS（TASK/IMPORT）使用 SSIS 时，未激活触发器

> ID：13891626
> 
> 赞同：0
> 
> 时间：2012-12-15T11:07:33.577
> 
> 标签：sql-server, sql-server-2008, ssis, ssms

我已经开始在 SSMS 中使用 SSIS（右键单击数据库/TASKS/IMPORT）。它工作得很好，特别是当上传到具有高 ping 时间的服务器并且 INSERT INTO 语句需要（非常）过多的时间时。

我遇到的问题是 INSERT 触发器没有被激活。我怎样才能确保它们是？我对服务器的权限有限，无法（当前）保存 SSIS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:56:44.283

触发器未激活，因为 SSIS 中的任务是批量操作。

# nhibernate - NHibernate - 使用 SetMaxResults 的 HQL “join fetch”抛出错误

> ID：13891628
> 
> 赞同：5
> 
> 时间：2012-12-15T11:07:47.103
> 
> 标签：nhibernate, nhibernate-mapping, hql

我正在尝试运行最简单的查询：

```
string queryStr = "select b " +
                  "from Blog b " +
                  "left outer join fetch b.BlogComments bc";

IList<Blog> blogs = Session.CreateQuery(queryStr)
    .SetMaxResults(10)
    .List<Blog>(); 
```

但它会引发以下错误：

```
System.ArgumentNullException: Value cannot be null.
Parameter name: source 
```

但是，如果我从 HQL 中删除“获取”，它就可以正常工作。此外，如果我保留 fetch 但删除 SetMaxResults 它也可以正常工作。这与 fetch + SetMaxResults 组合有关。

我正在尝试加载子集合以优化查询并防止 SELECT N+1 问题。我将 NHibernate 3.3.1.4000 与 MySQL 数据库一起使用。

* * *

我的映射：

```
public class BlogMap : ClassMapping<Blog>
{
    public BlogMap ()
    {
        // other properties (snip)....

        Set(x => x.BlogComments, x =>
        {
            x.Inverse(true);
            x.Cascade(Cascade.All | Cascade.DeleteOrphans);
            x.Lazy(CollectionLazy.Extra);
            x.Key(k => { k.Column("BlogId"); });
        }, x => x.OneToMany());
    }
}

public class BlogCommentMap : ClassMapping<BlogComment>
{
    public BlogCommentMap ()
    {
        // other properties (snip)....

        ManyToOne(x => x.Blog, x =>
        {
            x.Column("BlogId");
            x.NotNullable(true);
        });
    }
} 
```

* * *

根据要求进行堆栈跟踪：

```
[ArgumentNullException: Value cannot be null.
Parameter name: source]
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +4206743
   NHibernate.Engine.QueryParameters.CreateCopyUsing(RowSelection selection) +178
   NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters) +210
   NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results) +369
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters queryParameters, IList results) +301

[GenericADOException: Could not execute query[SQL: SQL not available]]
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters queryParameters, IList results) +351
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters parameters) +282
   NHibernate.Impl.QueryImpl.List() +162
   WebApp.Repositories.BlogRepository.SearchBlogs(SearchBlogs search) in C:\...path...\BlogRepository.cs:43
   WebApp.Controllers.HomepageController.Index(Int32 page) in C:\...path...\Controllers\HomepageController.cs:54
   lambda_method(Closure , ControllerBase , Object[] ) +101
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:09:16.123

您遇到的是一个错误......但在这种情况下，这可能是一个**好兆头**！;) 因为在获取父对象及其集合的查询上的分页 ( `SetFirstResult()`, ) 将返回意外结果。`SetMaxResults()`比方说，

**数据库**表包含以下内容：

> *   博客A
>     *   博客评论A1
>     *   博客评论A2
>     *   博客评论A3
> *   博客B
>     *   博客评论B1
>     *   博客评论B2

**`QueryOver`**语法（有效）与上述 HQL 相同：

```
var blogs = session.QueryOver<Blog>()
  .Fetch(c => c.BlogComment).Eager // collection in one SQL
  .Skip(0).Take(2) // paging, but weird...
  .List<Blog>(); 
```

**`.Skip(0).Take(2)`**- 第一页，选择导致这两行但一个*BlogA*：

> | 博客A | 博客评论A1
> | 博客A | 博客评论A2

**`.Skip(2).Take(2)`**- 下一页，奇怪...再次*BlogA*

> | 博客A | 博客评论A3
> | 博客B | 博客评论B1

这很可能不是我们想要的。

### 建议：选择 1+1

在这种情况下，最可靠的是只对父对象 ( `Blog`) 进行分页。然后，当我们在 NHibernate 会话中拥有所有博客 ( `.Skip(2).Take(2)`) 时，我们只会为他们的**所有**孩子 ( `BlogComments`) 调用一次 select。

最简单的方法是设置`batch-size="x"`，其中*x*是一个接近通常页面大小的数字（例如 25 或 50）。

> `.BatchSize(25)`

NHibernate 文档[19.1.5。使用批量获取](http://nhforge.org/doc/nh/en/index.html#performance-fetching-batch)解释细节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:08:53.077

这看起来像是 QueryParameters.CreateCopyUsing() 中的错误，或者其他东西没有正确创建原始 QueryParameters。无论如何，将 SetMaxResults() 与集合连接一起使用将强制在客户端应用分页，而不是在数据库中，这可能不是您想要的。

您可能希望重写它以在产生 10 个博客 ID 并在外部查询中获取连接的子查询上使用 IN。

# c# - 在 Winforms 中创建自定义图形

> ID：13891633
> 
> 赞同：1
> 
> 时间：2012-12-15T11:08:28.240
> 
> 标签：c#, winforms, doublebuffered

我正在尝试为我的应用程序制作一个简单的图表，该图表显示每 100 毫秒的实时数据。所以我想我可以使用该方法绘制图形线`DrawCurve`并从以下代码开始：

```
class BufferedPanel : Panel
{
     public BufferedPanel()
     {
        this.DoubleBuffered = true;         //to avoid flickering of the panel
     }                    
}

class Form2: Form
{
    BufferedPanel panel1 = new BufferedPanel();
    List<Point> graphPoints = new List<System.Drawing.Point>();

    private void Form2_Load(object sender, EventArgs e)
    {
       this.panel1.Paint += new System.Windows.Forms.PaintEventHandler(this.panel1_Paint);
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        using (Graphics g = e.Graphics)
        {
            Point[] points = graphPoints.ToArray();
            g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

            if (points.Length > 1)
               g.DrawCurve(graphPen, points);
         }
     }

     private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
     {
         graphPoints.Add(new System.Drawing.Point(counter * steps, (int)(float)e.UserState));      //x - regular interval decided by a constant; y - simulated by background worker
         panel1.Refresh();
         counter++;
     }

} 
```

截至目前，我正在从后台工作线程模拟 graphPoints 的值。我的问题是，*当我对面板进行双重缓冲时，我无法看到图形线*。当我将双缓冲设置为 false 时效果很好。我不熟悉使用`Graphics`. 所以我不太确定它是如何工作的。请帮助我。

另外，我想`AutoScrolling`在图形线到达面板末端时实现。你能提出一个关于如何做的想法吗？

这是我的工作图的图像：

![在此处输入图像描述](../Images/271c1e9616ca1ce5ab01ed6f73f173fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:08:07.503

```
 using (Graphics g = e.Graphics) 
```

那很糟。这会破坏传递给 Paint 事件处理程序的 Graphics 对象。当您的事件处理程序返回时，对该对象无能为力，它是一只死鹦鹉。因此，不要指望之后有任何工作，包括打开双缓冲时需要发生的事情，需要将缓冲区绘制到屏幕上才能看到。

*正确使用using*语句或 Dispose() 方法有一个简单的规则。如果您创建了一个对象，那么您就拥有它，并且您可以销毁它。放下它，你没有创造它。

一些证据表明您对“graphPen”变量也有误解。笔绝对是您在 Paint 事件处理程序中创建和销毁的对象。不要存储一个，这只是在 GDI 堆中不必要地占用空间，不值得创建一个所需的几微秒。你肯定会为笔使用*using*语句。

所以快速修复是：

```
 var g = e.Graphics; 
```

# php - css 父类

> ID：13891637
> 
> 赞同：1
> 
> 时间：2012-12-15T11:09:01.563
> 
> 标签：php, html, css, class

我有一个关于 CSS 以及如何在无序列表中遗赠背景信息的问题。

我有一个页脚，我想显示不同的标志。我有一个页脚类

```
 <ul class="flag">
     <li id="de"></li>
  </ul> 
```

`.flag`由组成：

```
.footer #legals #list2 .flag{
    width: 20px;
    height: 10px;
    display: inline-block;
    float:left;
    margin-top: 16px;
    margin-left: 15px;
    background-image:url(../images/flags.png);
}
.footer #legals #list2 .flag #de{   
    background-position: -40px;
}
.footer #legals #list2 .flag #en{
    background-position: -20px;
}
.footer #legals #list2 .flag #en_us{
    background-position: -20px;
} 
```

所以我认为每个标志只更改条目会更容易`background-position`。但由于某种原因，这不起作用，我不知道为什么？我也尝试使用而不是，`li id` `div id`但它仍然是一样的。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:13:06.597

`background-image`设置在而`<ul>`不是`<li>`。如果您将第一个选择器从

```
.footer #legals #list2 .flag 
```

到

```
.footer #legals #list2 .flag li 
```

那么`<li>`将实际上有一个`background-image`to `position`。

# iphone - 用 Xcode 打开 .ipa？

> ID：13891638
> 
> 赞同：-1
> 
> 时间：2012-12-15T11:09:02.853
> 
> 标签：iphone, xcode, ipa

我们在 6 个月前购买了 2300 欧元的应用程序开发，开发人员向我们提供了 Xcode 项目，但问题是我的 Mac 被盗了……开发人员失踪了……

**是否可以通过解压缩 ipa 来生成一个 Xcodeproj？**

*Mac OS X 10.8.2 - Xcode 4.5.2*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:11:52.650

不，这是不可能的。ipa 包括编译和加密的可执行文件。你应该更好地寻找开发者，成为一个“已经在做备份”的人。

# iphone - 带有嵌套字典的 HTTP 请求

> ID：13891642
> 
> 赞同：0
> 
> 时间：2012-12-15T11:09:51.463
> 
> 标签：iphone, ios, web-services, asihttprequest, asiformdatarequest

我需要使用 POST 方法访问 Web 服务，并使用嵌套字典来接收相关数据。但我一直得到空洞的回应。我究竟做错了什么？

```
 NSURL *url = [NSURL URLWithString:@"http://appzander.com/gateway.php"];

    ASIFormDataRequest *_request = [ASIFormDataRequest requestWithURL:url];

    __weak ASIFormDataRequest *request = _request;

    AppDelegate *app = [[UIApplication sharedApplication] delegate];
    NSDictionary *paramsDic = [[NSDictionary alloc] initWithObjectsAndKeys:
                             [NSNumber numberWithDouble:app.myLocation.longitude],@"longitude",
                             [NSNumber numberWithDouble:app.myLocation.latitude],@"latitude",
                             @"500000",@"radius",
                             @"1000",@"maxResults",
                             nil];
    NSDictionary *requestDic = [[NSDictionary alloc] initWithObjectsAndKeys:
                                @"GetNearestStations",@"function",
                                @"false",@"debug",
                                paramsDic,@"params",
                                nil];

    [request addRequestHeader:@"Content-Type" value:@"application/json"];
    [request appendPostData:[[SBJsonWriter new] dataWithObject:requestDic]];
    request.requestMethod = @"POST";    
    [request setDelegate:self];
    [request setCompletionBlock:^{         
        NSData *responseString = [request responseData];// responseString];
        NSLog(@"Response: %@", responseString);
        [self plotCrimePositions:responseString];
    }];
    [request setFailedBlock:^{
        NSError *error = [request error];
        NSLog(@"Error: %@", error.localizedDescription);
    }];

    // 6
    [request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:43:34.717

使用 **ASIFormDataRequest**

```
 NSURL *url = [NSURL URLWithString:@"yourUrlhere"];   

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    [request setRequestMethod:@"POST"];

    [request setPostValue:email forKey:@"username"];

    [request setPostValue:pasw forKey:@"pass"];

    [request setDelegate:self];

    [request startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:45:06.647

已解决-我没有正确发送参数：

```
 NSURL *url = [NSURL URLWithString:@"http://appzander.com/gateway.php"];

    ASIFormDataRequest *_request = [ASIFormDataRequest requestWithURL:url];

    __weak ASIFormDataRequest *request = _request;

    AppDelegate *app = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    NSDictionary *paramsDic = [[NSDictionary alloc] initWithObjectsAndKeys:
                               [NSNumber numberWithDouble:32.071738],@"longitude",
                               [NSNumber numberWithDouble:34.791295],@"langitude",
                               @"500000",@"radius",
                               @"1000",@"maxResults",
                               nil];

    [request setPostValue:@"false" forKey:@"debug"];
    [request setPostValue:@"GetNearestStations" forKey:@"function"];
    SBJsonWriter *jsonWriter = [[SBJsonWriter alloc] init];

    NSString *paramsDicJSON = [jsonWriter stringWithObject:paramsDic];
   [request setPostValue:paramsDicJSON forKey:@"params"];
    request.requestMethod = @"POST";
    [request setDelegate:self];
    [request setCompletionBlock:^{
        NSString *responseString = [request responseString];
        [self plotBikes:responseString];
    }];
    [request setFailedBlock:^{
        NSError *error = [request error];
        NSLog(@"Error: %@", error.localizedDescription);
    }];
    [request startAsynchronous]; 
```

# button - Twitter Bootstrap 按钮切换 - 如何使开/关状态颜色对比更明显

> ID：13891650
> 
> 赞同：3
> 
> 时间：2012-12-15T11:10:53.040
> 
> 标签：button, twitter-bootstrap, colors, toggle

我正在使用 Twitter Bootstrap 的按钮切换功能。一切都很完美。问题是切换开关的开/关状态之间的颜色差异太相似了。很难看出开启和关闭状态之间的区别。

理想情况下，我想让开/关状态之间的颜色对比更加明显，或者完全改变状态之间的颜色（例如蓝色=关闭，红色=打开）。

```
<button type='button' class='btn' data-toggle='button' value='ABC'><i class='icon-star-empty'></i></button> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T09:24:25.860

最近也遇到了这个问题。找到了一个快速的解决方案

引导程序-3.1.1

在第 209 行从`bootstrap.js`

改变

```
if (changed) this.$element.toggleClass('active') 
```

至

```
if (changed) this.$element.toggleClass('btn-success') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:48:44.847

我意识到我可以使用 JQuery 更改课程。现在关闭状态为白色，开启状态为绿色。

```
 $(document).ready(function() {

 $('.keyContactToggle').click(function (e) {

   var UserID = $(this).attr('value');

 if ( ($(this).is('.btn')) && ($(this).is('.keyContactToggle')) && !($(this).is('.btn-success')) ) {

   $(this).addClass('btn-success');

 } else {

   $(this).removeClass('btn-success');

 }

});

}); 
```

# ios - UIView 动画滑入

> ID：13891652
> 
> 赞同：2
> 
> 时间：2012-12-15T11:10:57.920
> 
> 标签：ios, xcode, animation, uiview, cgrect

我试图让我`UIView`的方法从右侧滑入，`viewDidLoad`这就是我所拥有的。

```
CGRect menuFrame = self.menu.frame;
menuFrame.origin.y = menuFrame.size.height+200;

[UIView animateWithDuration:1
                      delay:0.05
                    options: UIViewAnimationCurveEaseIn
                 animations:^{
                     self.menu.frame = menuFrame;
                 }
                 completion:^(BOOL finished){
                     NSLog(@"Animation Complete!");

                 }]; 
```

我不确定这里出了什么问题我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T16:28:21.643

这不是你问的，但无论如何值得一说：`viewDidLoad`这段代码是个坏地方。`viewDidLoad`被调用是因为视图控制器已经获得了它的视图，而不是因为该视图已经出现或即将出现在界面中。它*可能*很快就会出现在界面中，这就是为什么您的代码到目前为止似乎可以工作，但可能不会。

此代码的正确位置可能是`viewWillAppear`或`viewDidAppear`。不过，您可能只想在视图第一次出现时调用此代码一次。如果您想阻止代码被调用，因为您已经`menu`在之前的调用中动画化到视图中`viewDidAppear`，只需包含一个条件检查以查看可见视图中是否`menu`已经有一个框架。

顺便说一句，避免与框架和边界有关的事情的另一个原因`viewDidLoad`是，如果您的应用程序启动到横向并且这是您的根视图，`x`并且`y`是相反的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T11:30:21.363

看起来您正试图从底部滑入菜单，因为 Y 位置最初被向下推了 200。

通常，您首先将视图作为子视图添加到其屏幕外位置，然后在动画块中设置屏幕上的位置。

并且，确保您`1.0`作为动画持续时间传递。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-15T11:31:31.727

使用这些 transition.subtype 以获得不同的效果

```
CATransition* transition = [CATransition animation];  
transition.duration = 0.5;  
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];  
transition.subtype = kCATransitionFromLeft; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
//transition.subtype = kCATransitionFromTop; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom

[appDelegate.navigation.view.layer addAnimation:transition forKey:nil];
viewController *DairyVC = [[viewController alloc] initWithNibName:@"viewController" bundle:nil];

[appDelegate.navigation pushViewController:DairyVC animated:YES]; 
```

# bash - 如何查找大于某个大小的文件，并按上次修改日期对它们进行排序？

> ID：13891662
> 
> 赞同：7
> 
> 时间：2012-12-15T11:13:00.330
> 
> 标签：bash, find

我需要编写脚本来记下所选目录中的每个文件，这些文件大于某个大小。我还需要按大小、名称和最后修改日期对它们进行排序。

所以我做了前两种情况：

**按大小排序**

```
RESULTS=`find $CATALOG -size +$SIZE | sort -n -r | sed 's_.*/__'` 
```

**按名称分类**

```
RESULTS=`find $CATALOG -size +$SIZE | sed 's_.*/__' | sort -n ` 
```

但我不知道如何按最后修改日期对结果进行排序。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T11:28:53.640

如果您没有太多文件，最好的方法之一是使用`ls`自己进行排序。

按名称排序并每行打印一个文件：

```
find $CATALOG -size +$SIZE -exec ls -1 {} + 
```

按大小排序并每行打印一个文件：

```
find $CATALOG -size +$SIZE -exec ls -S1 {} + 
```

按修改时间排序，每行打印一个文件：

```
find $CATALOG -size +$SIZE -exec ls -t1 {} + 
```

您还可以使用`ls`开关：使用长列表格式按修改时间排序（从小到大），并具有人类可读的大小：

```
find $CATALOG -size +$SIZE -exec ls -hlrt {} + 
```

哦，您可能只想要`find`文件（并忽略目录）：

```
find $CATALOG -size +$SIZE -type f -exec ls -hlrt {} + 
```

最后，一些评论：避免在 bash 中使用大写的变量名（这被认为是不好的做法）并避免使用反引号，`$(...)`而是使用。例如，

```
results=$(find "$catalog" -size +$size -type f -exec ls -1rt {} +) 
```

此外，您可能不想像上一行那样将所有结果放在一个字符串中。您可能希望将结果放入数组中。在这种情况下，`mapfile`像这样使用：

```
mapfile -t results < <(find "$catalog" -size +$size -type f -exec ls -1rt {} +) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:28:38.590

尝试（做任何事情，将STDIN`xargs`视为参数列表）`-t`和. 即是这样的：`-r``ls`

```
find $CATALOG -size +$SIZE | xargs ls -ltr 
```

这将为您提供按上次修改日期排序的文件。

但是，一次按多个属性排序对于 shell 实用程序和管道来说真的很尴尬——我认为你需要使用脚本语言（ruby、perl、php 等），除非你的 shell fu 很强大。

# r - 在R中的循环操作下绘制图形

> ID：13891667
> 
> 赞同：2
> 
> 时间：2012-12-15T11:13:54.547
> 
> 标签：r, loops, graphics

下面的脚本运行并绘制数据系列的贝叶斯变化点 (bcp)，其中 6 列数据在此处引用为 x <-13:18，即数据文件 2GB01.csv 中的第 13 到 18 列。问题是只绘制了第 18 列的输出图。我需要修改脚本以在一个图形窗口分区中为每个列数据集绘制 6 个图形。有什么帮助吗？

数据文件看起来像这样.... col1 col2 ....col13 col14 col15 col16 col17 col18 11 14 17 87 90 10 20 76 23 87 87 16 09 17 87 65 。. . . . . . . . . . . . . . . . . . . . . . .

脚本如下所示......

在这里输入代码

```
 data2<-read.csv("2GB01.csv", header=TRUE, row.names=1)

    x <- 13:18
    for(i in seq(along=x)){
        ond<-data2[,i]
        bcp.1<-bcp(as.vector(ond))
    if (require("strucchange")) {
    bp <- breakpoints(ond ~ 1, h = 2)$breakpoints
    rho <- rep(0, length(ond))
    rho[bp] <- 1
    b.num<-1 + c(0,cumsum(rho[1:(length(rho)-1)]))
    bp.mean <- unlist(lapply(split(ond,b.num),mean))
    bp.ri <- rep(0,length(ond))

    for (i in 1:length(bp.ri)) bp.ri[i] <- bp.mean[b.num[i]]
        xax<-seq(1960, 2010, length=51)
        op <- par(mfrow=c(2,1),col.lab="black",col.main="black")
        op2 <- par(mar=c(0,4,4,4.5),xaxt="n",yaxt="n", cex.axis=0.75,las=2)
        plot(xax, ond, col="grey", pch=20, xlab="",ylab="", axes=T)
        lines(xax, bcp.1$posterior.mean, lwd=2)
        axis(4, yaxt="s")
        mtext('Posterior mean', las=0, side=4, line=3.5)
        lines(bp.ri, col="blue")
        par(op2)
        op3 <- par(mar=c(5,4,0,4.5), xaxt="s",yaxt="n", cex.axis=0.75,las=2)
plot(xax, bcp.1$posterior.prob, xlab="Year", ylab="Posterior   probability",     type="l", xlim=c(1960,2010), ylim=c(0,1),las=0)
    for (i in 1:length(bp.ri)) abline(v=xax[bp[i]], col="blue")
        axis(2, yaxt="s")
        par(op3)
        par(op)

} else {
  cat("strucchange is not loaded")
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:30:04.473

将其移至循环外部：

```
op <- par(mfrow=c(2,1),col.lab="black",col.main="black") 
```

如果您每次都调用它，它每次都会设置绘图网格（例如清除它）。

你需要做类似的事情`mfrow=c(2,length(rp.ri))`。

# php - 如何使用php创建pdf

> ID：13891668
> 
> 赞同：0
> 
> 时间：2012-12-15T11:14:30.147
> 
> 标签：php, mysql, pdf, pdf-generation

我想为我的 PHP 网页创建 PDF 文件，它必须是一些按钮，例如创建 PDF，然后用户单击按钮 PDF 文件必须自动生成我的网页动态页面，它包含 MySQL 表我是如何做到的，并且有任何开源软件适用于它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:18:26.297

您可以使用 fpdf 制作 PDF：http: [//fpdf.org/](http://fpdf.org/)

```
<?php
require('fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');
$pdf->Output();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:16:42.343

像往常一样生成 PHP，但添加`header`

```
header("Content-Type: application/pdf");
header('Content-Disposition:inline; filename="testing.pdf"'); //view in browser 
```

或者

```
 header("Content-Type: application/pdf");
 header('Content-Disposition:attachment; filename="testing.pdf"'); //force download 
```

# c - 在 C 中有效地重定向输出

> ID：13891670
> 
> 赞同：1
> 
> 时间：2012-12-15T11:14:59.767
> 
> 标签：c, bash, io

我想知道这两条提示行中哪一条在性能方面更好：

*   `./function input > output.txt`
*   `./function input output.txt`

现在，在某些情况下，我的函数仅`fprintf`用于打印输出，例如：

```
fprintf(output," whatever"); 
```

那么，上面提到的哪一种替代方案在性能方面表现更好？重定向标准输出或直接在文件中打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:34:21.773

两种方法之间的区别仅在于哪个进程打开文件进行写入并关闭它。因此，运行程序时没有性能差异。五个（stdin、stdout、stderr、“input”和“output.txt”）文件描述符打开而不是只有四个（将输出写入stdout时）这一事实没有区别。

当然，为了让您的程序无论是写入标准输出还是写入文件都以完全相同的方式运行，它必须也写入行缓冲的文件（就像写入标准输出时的默认设置一样）。

如果您没有像这样调用`setvbuf()`您从中获得的文件结构（从手册页获取），您的程序将使用块缓冲，并且在大多数情况下，这将比重定向到标准输出更快。`fopen()``setvbuf(stream, (char *) NULL, _IOLBF, 0);``setvbuf()`

因此，如果允许您的程序对其输出使用块缓冲，`./function input output.txt`则速度会更快。（但关于您的问题的评论是有效的：一定要衡量真正的表现！）

# javascript - 加载多个页面 - Infinite Scroll JS

> ID：13891671
> 
> 赞同：0
> 
> 时间：2012-12-15T11:15:24.307
> 
> 标签：javascript, html, scroll, infinite

我想加载的不仅仅是使用[infinitescroll.js 的页面。](http://www.infinite-scroll.com/)

脚本：

```
$('.wrapper').infinitescroll({

navSelector  : '#page-nav',            
   // selector for the paged navigation (it will be hidden)
nextSelector : '#page-nav a',    
   // selector for the NEXT link (to page 2)
itemSelector : '.page'          
   // selector for all items you'll retrieve
}); 
```

第 1 页：

```
<h2>Graffiti</h2>

<ul class="page">
    <li><a href="assets/img/graffiti/1.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/1.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/2.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/2.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/3.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/3.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/4.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/4.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/5.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/5.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/6.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/6.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/7.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/7.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/8.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/8.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/9.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/9.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/10.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/10.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/11.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/11.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/12.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/12.jpg" alt=""></a></li>
</ul>

<nav id="page-nav">
    <a href="?page=graffiti/graffiti2"></a>
</nav> 
```

第2页：

```
<h2>Graffiti</h2>

<ul class="page">
    <li><a href="assets/img/graffiti/13.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/13.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/14.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/14.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/15.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/15.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/16.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/16.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/17.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/17.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/18.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/18.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/19.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/19.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/20.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/20.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/21.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/21.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/22.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/22.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/23.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/23.jpg" alt=""></a></li>
    <li><a href="assets/img/graffiti/24.jpg" rel="lightbox[graffiti]"><img src="assets/img/graffiti/thumbs/24.jpg" alt=""></a></li>
</ul>

<nav id="page-nav">
<a href="?page=graffiti/graffiti3"></a>
</nav> 
```

等等，但插件只加载第一页。

我如何必须更改标记以加载不止一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:22:27.530

为什么不增加从服务器获取资源的限制？不是每页 12 个元素，而是 24 个，从技术上讲，这就是你想要的 2 个页面，对吧？

# build - 如何编写干净的目标？

> ID：13891673
> 
> 赞同：0
> 
> 时间：2012-12-15T11:15:27.880
> 
> 标签：build, makefile

首先，我不确定我要问*的是*我的问题。也许是别的东西，所以，请不要犹豫，指出这一点。我*认为*我出错的地方是`clean`我的 Makefile 的目标，但它可能完全是另外一回事。

这是发生的事情：在运行之后`make clean`，然后是`make`几个目标，它们的结果文件在`clean`不重建期间被删除。*（除了我的问题之外，我对完全取消所有缓存 GNU/Make 的方法感兴趣，自从我使用它以来，它一直是一个主要的痛苦，并且从未产生任何积极的后果，甚至一次也没有）。*

如果我再次运行`make`，一些目标将被重建。如果我`make`再运行一次，依赖于上一轮构建的目标的目标将被重建，依此类推。

这是相应的 Makefile 部分：

```
PACKAGE = i-iterate
DOCDST = ${PACKAGE}/docs
HTMLDOCDST = ${PACKAGE}/html-docs
DOCSRC = ${PACKAGE}/info
IC = makeinfo
ICO = --force
TEXI2HTML = texi2html
TEXI2HTMLO = --split section --use-nodes
HTML2WIKI = html2wiki
HTML2WIKIO = --dialect GoogleCode
TEXI = $(wildcard $(DOCSRC)/*.texi)
INFO = $(addprefix $(DOCDST)/,$(notdir $(TEXI:.texi=.info)))
WIKIDST = ../wiki
HTML = $(wildcard $(HTMLDOCDST)/*.html)
WIKI = $(addprefix $(WIKIDST)/,$(notdir $(HTML:.html=.wiki)))

$(DOCDST)/%.info: $(DOCSRC)/%.texi
    echo "info builds: $<"
    $(IC) $(ICO) -o $@ $<
    $(TEXI2HTML) $(TEXI2HTMLO) $<

$(WIKIDST)/%.wiki: $(HTMLDOCDST)/%.html
    $(HTML2WIKI) $(HTML2WIKIO) $< > $@

default: prepare $(INFO) move-html $(WIKI) rename-wiki byte-compile
    cp -r lisp info Makefile README i-pkg.el ${PACKAGE}

prepare:
    mkdir -p ${PACKAGE}
    mkdir -p ${DOCDST}
    mkdir -p ${HTMLDOCDST}

move-html:
    $(shell [[ '0' -ne `find ./ -maxdepth 1 -name "*.html" | wc -l` ]] && \
mv -f *.html ${HTMLDOCDST}/)

rename-wiki:
    $(shell cd ${WIKIDST} && rename 'i-iterate' 'Iterate' *.wiki)
    $(shell find ${WIKIDST} -name "*.wiki" -exec sed -i \
's/\[i-iterate/\[Iterate/g;s/\.html\#/\#/g;s/&lt;/\</g;s/&gt;/\>/g' \
'{}' \;)

byte-compile:
    emacs -Q -L ./lisp -batch -f batch-byte-compile ./lisp/*.el

clean:
    rm -f ./lisp/*.elc
    rm -f ./*.html
    rm -rf ${DOCDST}
    rm -rf ${HTMLDOCDST}
    rm -rf ${PACKAGE} 
```

这是输出：

**第一次运行**

```
$ make
mkdir -p i-iterate
mkdir -p i-iterate/docs
mkdir -p i-iterate/html-docs
emacs -Q -L ./lisp -batch -f batch-byte-compile ./lisp/*.el
Wrote /home/wvxvw/Projects/i-iterate/trunk/lisp/i-iterate.elc
cp -r lisp info Makefile README i-pkg.el i-iterate 
```

**第二轮**

```
$ make
mkdir -p i-iterate
mkdir -p i-iterate/docs
mkdir -p i-iterate/html-docs
echo "info builds: i-iterate/info/i-iterate.texi"
info builds: i-iterate/info/i-iterate.texi
makeinfo --force -o i-iterate/docs/i-iterate.info i-iterate/info/i-iterate.texi
texi2html --split section --use-nodes i-iterate/info/i-iterate.texi
emacs -Q -L ./lisp -batch -f batch-byte-compile ./lisp/*.el
Wrote /home/wvxvw/Projects/i-iterate/trunk/lisp/i-iterate.elc
cp -r lisp info Makefile README i-pkg.el i-iterate 
```

**第三轮**

```
$ make
mkdir -p i-iterate
mkdir -p i-iterate/docs
mkdir -p i-iterate/html-docs
echo "info builds: i-iterate/info/i-iterate.texi"
info builds: i-iterate/info/i-iterate.texi
makeinfo --force -o i-iterate/docs/i-iterate.info i-iterate/info/i-iterate.texi
texi2html --split section --use-nodes i-iterate/info/i-iterate.texi
html2wiki --dialect GoogleCode i-iterate/html-docs/i-iterate_9.html > ../wiki/i-iterate_9.wiki
# ... a bunch more of the documentation pages ...
/i-iterate_5.wiki
html2wiki --dialect GoogleCode i-iterate/html-docs/i-iterate_2.html > ../wiki/i-iterate_2.wiki
emacs -Q -L ./lisp -batch -f batch-byte-compile ./lisp/*.el
Wrote /home/wvxvw/Projects/i-iterate/trunk/lisp/i-iterate.elc
cp -r lisp info Makefile README i-pkg.el i-iterate 
```

如您所见，`$(INFO)`第一次运行时甚至没有输入，即使它输出文件的目录刚刚被删除并重新创建。当它（不）重建`$(WIKI)`.

编辑：

这是目录结构，`#`符号后面的文本是注释。

```
|- info
|  +- documentation.texi
|- lisp
|  +- source.el
|  +- binary.elc # generated during compile
|- docs # should be deleted and created during the build
|  +- documentation.info
|- html-docs # should be deleted and created during the build
|  +- documentation.html
|- i-iterate # sources are copied here for distribution
|  |- info
|  |  +- documentation.texi
|  |- lisp
|  |  +- source.el 
```

* * *

对原始 Makefile 的更新，但问题未解决

```
TEXI = $(wildcard $(DOCSRC)/*.texi)
INFO = $(addprefix $(DOCDST)/,$(notdir $(TEXI:.texi=.info)))
WIKIDST = ../wiki

$(DOCDST)/%.info: $(DOCSRC)/%.texi
    @echo "info builds: $<"
    $(IC) $(ICO) -o $@ $<
    $(TEXI2HTML) $(TEXI2HTMLO) $<

# This rule is not applied! :(
$(WIKIDST)/%.wiki: $(HTMLDOCDST)/%.html
    @echo "Wiki: $<"
    $(HTML2WIKI) $(HTML2WIKIO) $< > $@

default: prepare $(INFO) move-html rename-wiki byte-compile
    cp -r lisp info Makefile README i-pkg.el ${PACKAGE}

prepare:
    mkdir -p ${PACKAGE}
    mkdir -p ${DOCDST}
    mkdir -p ${HTMLDOCDST}

move-html:
    $(shell [[ '0' -ne `find ./ -maxdepth 1 -name "*.html" | wc -l` ]] && \
mv -f *.html ${HTMLDOCDST}/)
    $(eval HTML := $(wildcard $(HTMLDOCDST)/*.html))
    $(eval WIKI := $(addprefix $(WIKIDST)/,$(notdir $(HTML:.html=.wiki))))
    @echo "HTML: $(HTML)"       # prints as expected
    @echo "WIKI: $(WIKI)"       # prints as expected

rename-wiki: $(WIKI)                     # this dependency never triggers
                                         # the $(WIKIDST)/%.wiki rule
    @echo "Renaming: `ls $(HTMLDOCDST)`" # the files are there
    $(shell cd ${WIKIDST} && rename 'i-iterate' 'Iterate' *.wiki)
    $(shell find ${WIKIDST} -name "*.wiki" -exec sed -i \
's/\[i-iterate/\[Iterate/g;s/\.html\#/\#/g;s/&lt;/\</g;s/&gt;/\>/g' \
'{}' \;) 
```

由于某种原因，尝试以`$(WIKI)`这种方式执行不会触发对应规则。

如果我改变`rename-wiki`看起来像：

```
rename-wiki: ../wiki/file.wiki 
```

我得到“没有建立目标的规则。即使`$(WIKIDIST)/%.wiki`是建立目标的规则。

* * *

编辑2：

最后，我可以像这样实现我想要的：

```
move-html:
    $(shell [[ '0' -ne `find ./ -maxdepth 1 -name "*.html" | wc -l` ]] && \
mv -f *.html $(HTMLDOCDST)/)
    $(foreach html, $(wildcard $(HTMLDOCDST)/*.html), \
$(HTML2WIKI) $(HTML2WIKIO) $(html) > \
$(addprefix $(WIKIDST)/, $(notdir $(html:.html=.wiki)))) 
```

不用说我是多么喜欢这个解决方案和使一个人设计出一种语言的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:35:53.243

这里有几个问题。这可能需要几次迭代。

首先，当您`make clean`删除`i-iterate/`其中的所有内容时，包括`i-iterate/info/whatever.texi`. 由于没有 texi 文件，Make 推断不需要制作 info 文件；`$(INFO)`是一个空列表。

我收集到通过一些黑魔法，emacs 命令`info/`从以太中创建了一个充满 texi 文件的目录，然后 Make 将其复制到`i-iterate/`（在`default`规则中）。那是对的吗？如果它是正确的，那么我们应该在这一步之前执行此操作*。*`$(INFO)`我怀疑这`$(WIKI)`一步也是如此，但我们不要超前。

# android - 我可以使用 android 中的链接从 .html 文件调用 .java 文件吗？

> ID：13891674
> 
> 赞同：1
> 
> 时间：2012-12-15T11:15:38.660
> 
> 标签：android

我可以借助 android 中的链接从 .HTML 文件中调用 .java 文件吗？

我是android应用程序开发的新手。我没有那么多想法。所以请帮助我。

.java 文件的位置在 src/my_package_name 文件夹中，.HTML 文件的位置在 assets/www 文件夹中。

我试图通过 html 文件中的锚标记来解决这个问题，我已经给出了**href="ContactUs.java"**链接。它不工作。

模拟器显示错误。那是**应用程序错误。未找到请求的文件。ContactUs.java(file:///android_asset/ContactUs.java)**。

我不确定它是否正确。

所以请建议我是否有更好的方法来做到这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:48:30.143

这是从 html 打开活动的解决方案。

首先您的主要活动包含您的网络视图：

```
package com.test.jsitest;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class WVActivity extends Activity {

    private WebView m_wv = null;

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_wv);
        m_wv = (WebView) findViewById(R.id.webview);
        m_wv.getSettings().setJavaScriptEnabled(true);
        m_wv.loadUrl("file:///android_asset/www/index.html");
        m_wv.addJavascriptInterface(new ActivityLauncher(this), "Android");
    }
} 
```

然后你的Javascript界面​​：

```
package com.test.jsitest;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;

public class ActivityLauncher {
    private Context m_context;

    public ActivityLauncher(Context context) {
        m_context = context;
    }

    public void launchActivity() {
        m_context.startActivity(new Intent((Activity)m_context,
             Activity2.class)); // Here you replace by your activity (ContactUs)
    }
} 
```

最后你的 html 文件：

```
<DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <a href="javascript:Android.launchActivity()">Link</a> 
    </body>
</html> 
```

我对其进行了测试，它在 8 级 API 下工作。我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:27:33.407

我想你正在寻找这样的东西：http: [//developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

你不能通过 html 来做，但你可以通过 javascript，使用 JavaScript 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:37:40.693

你根本不能调用java文件。android上的Java文件很可能是应用程序的一部分（因此是活动） - 通常你必须使用一些URL协议，androis系统会为你调用合适的应用程序这里有更多关于它的信息： [如何从javascript调用android应用程序](https://stackoverflow.com/questions/2808127/how-to-call-android-application-from-javascript)

# c# - 用正则表达式 C# 查找和替换

> ID：13891678
> 
> 赞同：-1
> 
> 时间：2012-12-15T11:16:17.100
> 
> 标签：c#, regex, visual-studio, replace

我需要找到提到的 lambda 语句并将其从我的代码中删除。我的项目这么大，我注意到在 Visual Studio 的查找和替换框中，有一个参数可以使用正则表达式来查找和替换代码。是否有可以完全找到该语句的正则表达式（也包含换行符和空格）？

```
() =>
      {
        CallMethod()
      }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:08:58.363

恐怕 VS IDE 在单行模式下使用正则表达式（考虑到它在建议菜单中提供 \n 这实际上很奇怪）。我认为创建一个新项目会更好，该项目将加载文件，从中读取所有文本，并替换您指定的任何正则表达式，然后将文件保存回来。

基本上你需要的正则表达式是这样的：

```
(\(\ *\)\ *=\>[\r\n\s\{\}]*CallMethod\ *\(\ *\)[\r\n\s\{\}]*,) 
```

在 C# 代码中，您可以这样做：

```
System.Text.RegularExpressions.Regex regex = new System.Text.RegularExpressions.Regex(@"(\(\ *\)\ *=\>[\r\n\s\{\}]*CallMethod\ *\(\ *\)[\r\n\s\{\}]*,)", System.Text.RegularExpressions.RegexOptions.Multiline);
regex.Replace(document, string.Empty); 
```

希望这对您有所帮助。

# knockout.js - Kendo-Knockout：如何使窗口居中

> ID：13891681
> 
> 赞同：6
> 
> 时间：2012-12-15T11:16:27.747
> 
> 标签：knockout.js, kendo-ui

我正在使用 RPNiemeyer 的 kendo-knockout 库。我有一个剑道窗口，我在 html 中这样使用：

```
<div data-bind="kendoWindow: { isOpen: isOpen, title:'States', width: 600, height: 150, modal: true, resizable: false, actions: ['Maximize', 'Close'] }" > </div> 
```

我曾经像这样将对话框居中：

```
$('#productionStates').data("kendoWindow").center(); 
```

但作为`center`一种方法，我不能像这样在标记中传递它`center: true`。在 kendo-knockout 文档中，有一些小部件的属性小部件，我猜这是关键，但我不确定如何使用它，因为没有示例。欢迎任何想法。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T15:06:12.107

`widget`当您需要以提供的绑定选项不支持的方式与小部件交互时，应使用该参数。通常，这是最后的手段，但在这种情况下，这似乎是正确的选择。

你所做的就是将一个 observable 传递给`widget`参数，它将被实际的小部件填充。然后，您可以从视图模型中调用方法。

就像是：

```
var ViewModel = function() {
   this.isOpen = ko.observable(false);
   //center it if it is opened
   this.isOpen.subscribe(function(newValue) {
       if (newValue) {
           this.myWidget().center();         
       }
   }, this);

   //hold the widget
   this.myWidget = ko.observable();
}; 
```

然后，在标记中：

```
<div data-bind="kendoWindow: { isOpen: isOpen, visible: false, modal: true, widget: myWidget }">
     ...
</div>​ 
```

示例：http: [//jsfiddle.net/rniemeyer/gNgDm/](http://jsfiddle.net/rniemeyer/gNgDm/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:49:22.490

实际上，我通过将其粘贴在绑定处理程序中实现了与 Niemeyer 相同的效果：

```

    ko.bindingHandlers.kendoWindow.options = {
        打开：function () { this.element.data('kendoWindow').center(); }
    };

```

不需要额外的绑定，但它确实绑定了您的“onOpen”事件。

# zeromq - Detect dropped messages in ZeroMQ Queues

> ID：13891682
> 
> 赞同：10
> 
> 时间：2012-12-15T11:16:31.407
> 
> 标签：zeromq

Since it does not seem to be possible to query/inspect the underlying ZeroMQ queues/buffers sockets to see how much they are utilized, is there some way to detect when a message is dropped due to full buffers in a Publisher socket when sent/queued?

For example, if the publisher queue is full, the `zmq_send` operation will simply drop the message.

Basically, what I want to achieve is a way to detect situations where the queues are getting stressed and/or full to be able to (later on) tune the solution to work better. One alternative way would be to add a sequence number to each message and do a simple calculation in the subscriber but I can never be sure that a message was lost due to full buffers in the publisher.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T13:47:24.233

ZeroMQ 指南中有一个例子（如果你想愉快地使用 0MQ，你应该阅读和消化）：http: //zguide.zeromq.org/page:all#Slow-Subscriber-Detection-Suicidal- [Snail-图案](http://zguide.zeromq.org/page:all#Slow-Subscriber-Detection-Suicidal-Snail-Pattern)

该机制就像您自己回答的那样，在消息中添加一个序列号，并允许订阅者检测间隙并采取适当的措施。对于大多数 pubsub 场景，您可以将默认 HWM（即 1,000）提高到更高的值；这取决于您的平均邮件大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-26T08:56:31.043

我知道这是一篇旧帖子，但这是我最近遇到同样问题时所做的。

我选择使用 a`DEALER/ROUTER`并将**`ZMQ_SNDHWM`**选项设置为 1。我还在每个**`zmq_send()`**. 超时可能在 10 毫秒到 3 秒之间，具体取决于您的场景（本地或远程发送）。

如果消息未在超时内发送或发送缓冲区已满，`zmq_send()`则将返回 false。这使我能够在 zmq 前面设置一个重试队列。我知道这不是一个完美的解决方案，但对我来说它工作得很好。令我困惑的是`DEALER`-socket返回的真/假的含义`zmq_send()`。我一直无法找到那个问题的答案。它是否表明消息已被缓冲或消息已被传递给我，这`ROUTER`让我感到困惑。就我而言，无论如何我都得到了所需的结果。

只是为了记录，这是使用 netmq 完成的，但我想它也适用于 ZeroMQ。

不过我同意詹姆斯的观点。ZeroMQ （和 netmq ）至少应该提供一种检查队列（并获取消息）的方法，以及一种告诉各种套接字不要丢弃消息的方法。最好的选择是根据配置的选项将未及时传递的消息发送到某种死信队列。然后可以单独处理死信队列。

# iphone - 代表不工作

> ID：13891686
> 
> 赞同：0
> 
> 时间：2012-12-15T11:17:13.917
> 
> 标签：iphone, objective-c, ios, delegates

我有一个`tableview`，并且`tableview`我正在设置`customcell`.in`customcell`有一个按钮，当单击按钮时，调用委托方法并播放或暂停音频。但我不知道为什么我的方法没有调用。

这是我的代码。

AudioInfoCell.h //它的子视图

```
#import <UIKit/UIKit.h>

@protocol PlayPauseDelegate <NSObject>

-(void)playPauseAudio;

@end

@interface AudioInfoCell : UITableViewCell

{
    id<PlayPauseDelegate> delegate;

}

@property(nonatomic,strong)id delegate;

@end; 
```

音频信息单元.m

```
@synthesize delegate;

- (IBAction)playPauseBtnTapped:(id)sender {

if([delegate respondsToSelector:@selector(playPauseAudio)])
{
    //send the delegate function with the amount entered by the user
    [delegate playPauseAudio];
}
} 
```

AudioTableViewController.h //它的父视图

```
#import "AudioInfoCell.h"

@interface AudioTableViewController : UIViewController<PlayPauseDelegate> 
```

AudioTableViewController.m

```
cell.delegate = self;

-(void)playPauseAudio{
NSLog(@"button pressed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:05:20.143

@kartik，我没有指定您指定的方法`cell.delegate=self;`。

所以我假设你已经在 中指定了它`viewDidLoad`，而不是在`vieWillApear`方法中指定它而不是它应该工作。

# php - fetching from DB and store them in a new array PHP

> ID：13891687
> 
> 赞同：0
> 
> 时间：2012-12-15T11:17:21.373
> 
> 标签：php

I am fetching data from my DB and they look like this:

```
[{"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","3":"1","key-4":"1"}] 
```

where the key-1 are the name of the column. (I only have one entry so).

I want to extract only the column values and save them into a new array that will output like this:

```
{"key-1":"1","key-2":"1","key-3":"1","key-4":"1"} 
```

I want it to look exactly like this and not : `[{"key-1":"1","key-2":"1","key-3":"1","key-4":"1"}]`

I tried this:

```
$cart["key-1"]=$output["key-1"]; 
```

where $output is the outcome of the DB that shown first (the one with []).

and the $cart is the new array I want.

Both are declared as:

```
$cart=array();
$output=array(); 
```

and `$output[]=$row` where row is the result of the DB fetch. How to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:29:24.227

这是一种方法，我在这里用数据库行替换了一个字符串，并使用了[`json_decode()`](http://php.net/json_decode)and[`json_encode()`](http://php.net/json_encode)

```
$data = '[{"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","3":"1","key-4":"1"}]';

// convert to an array
$data = json_decode($data, true);

// create new array here
$cart = array();

for ($i = 0; $i < count($data); $i++)
{
    foreach ($data[$i] as $k => $v)
    {
        if (strpos($k, 'key') !== FALSE)
        {
            $cart[$k] = $v;
        }
    }
}

echo $cart['key-1'] . '<br/>';

echo json_encode($cart); 
```

输出：

```
1
{"key-1":"1","key-2":"1","key-3":"1","key-4":"1"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:27:49.707

这是一个非常混乱的问题。从我收集到的你想要的可能是这个..？

```
$cart=array();
foreach ($output as $index=>$value){
  if stripos($index,"key-"){
    cart[$index]=$value;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:28:46.010

用于`mysql_fetch_assoc()`仅获取列名；）

```
while ($row = mysql_fetch_assoc($result_of_query))
{
    echo $row['key-1'];
    echo $row['key-2'];
} 
```

# .htaccess - restricting input of GET url on htaccess rewrite url

> ID：13891689
> 
> 赞同：0
> 
> 时间：2012-12-15T11:18:17.850
> 
> 标签：.htaccess

**My original url is :** `www.site.com/report.cgi?d=2012-05`

**Requested URL:** `www.site.com/report-2012-05.cgi`

**My Htaccess Code:***

```
RewriteRule ^report([^/]*)\.cgi$ /report.php?d=$1 [L] 
```

I want to restrict the request parameter to just `XXXX-XX number format` in GET url.
How can I do this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:59:52.340

我真的不明白你的问题，除了你想修改 URL 格式，将参数值放在不同的位置。

最好的方法是像这样捕获查询字符串：

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} d=(.*) 
```

圆括号内的值是参数值（2012-05），可以用 %1 反向引用。例如：

```
RewriteRule .*  report-%1.cgi [L] 
```

将重写 URL`/report-2012-05.cgi`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:36:37.433

我认为您需要`.cgi`从重写规则中删除

对于 www.site.com/report-xxxx-xx

```
RewriteRule ^report-([^/]*)$ /report.cgi?d=$1 [L]<br> 
```

对于 www.site.com/xxxx-xx

```
RewriteEngine On
RewriteRule ^([^/]*)$ /report.cgi?d=$1 [L] 
```

# java - Java SE 6：如何在 Ubuntu Linux 上通过 Runtime.getRuntime().exec() 从外部打开文件？

> ID：13891690
> 
> 赞同：1
> 
> 时间：2012-12-15T11:18:24.313
> 
> 标签：java, windows, ubuntu, runtime, exec

我正在使用 Java SE 6，并希望通过预定义的程序在外部进程中打开文件。目前，我正在为 pdf 文件使用以下代码，例如：

视窗：

```
public static Process openFile(File file) {
    return Runtime.getRuntime().exec("C:/Program Files (x86)/Adobe/Reader 10.0/Reader/AcroRd32.exe \""+file.getAbsolutePath()+"\"");
} 
```

Ubuntu Linux：

```
public static Process openFile(File file) {
    return Runtime.getRuntime().exec("/usr/bin/evince \""+file.getAbsolutePath()+"\"");
} 
```

在 Windows 上，这适用于所有文件。但是在 ubuntu 上，只要文件路径中有空格，它就会尝试打开多个文件。这是一个例子：

```
contract.pdf -> works on windows and ubuntu
contract 1 (copy).pdf -> works only on windows, ubuntu tries to open 3 different files (contract, 1, and (copy).pdf) 
```

我需要什么特殊字符告诉 ubuntu 它应该将带有空格的文件路径作为一个文件处理？

提前感谢您的帮助！最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:22:04.257

我会尝试使用[Desktop.open](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)

> 启动关联的应用程序以打开文件。
> 
> 如果指定的文件是目录，则启动当前平台的文件管理器打开它。

或者你可以试试

```
return Runtime.getRuntime().exec(new String[]{ 
        "/usr/bin/evince", file.getAbsolutePath() }); 
```

# javascript - 如何在鼠标悬停时在标签上显示按钮？

> ID：13891694
> 
> 赞同：-4
> 
> 时间：2012-12-15T11:18:45.157
> 
> 标签：javascript, jquery, html, css

当鼠标光标移到另一个标签上时，我想`background-image`在另一个标签上显示一个按钮（一个图像或一个 div） 。`<img>`图像的宽度是固定的，但高度可以改变。

一个例子如下：

![在此处查看图片。](../Images/905abbd2121bfd616f869b09041934ea.png)

我怎么能用 jQuery 或纯 JS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:25:01.160

CSS：

```
div {
    position: relative;
    bottom: 30px;
    left:50%;
    z-index:1000;
    opacity:0;
} 
```

查询：

```
$("img").hover(function(){
    $("div").css("opacity",1);
},function(){
     $("div").css("opacity",0);
}); 
```

剩下的自己解决。

很好的教程：[http ://buildinternet.com/2009/03/sliding-boxes-and-captions-with-jquery/](http://buildinternet.com/2009/03/sliding-boxes-and-captions-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:24:24.647

看一下 jQuery hover 方法。也许再加上将按钮从屏幕外移动到所需位置。您可以使用 css z-index 将对象定位在另一个对象之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:29:16.250

为什么在这里 js？

这是简单的CSS：

HTML：

```
<div class="image"><div class="inner"><button>Hello</button></div></div>​ 
```

CSS：

```
.image {
    background-image: url(http://placehold.it/350x150);
    width: 350px;
    height: 150px;
    position: relative;
}
​.image .inner {
 display:none;
 position: absolute;
 top: 60px;
 left: 100px;    
}
.image:hover .inner {
 display: block;   
}
​ 
```

[演示](http://jsfiddle.net/oceog/xAzT7/)

[带过渡的演示](http://jsfiddle.net/oceog/xAzT7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:42:27.680

因为您提到您只想使用 jquery 来执行此操作..

```
$('#buttonId').css("position", "absolute");
$('#buttonId').css("bottom","0");
$('#buttonId').css("cursor","hand");
$('#buttonId').css("cursor","pointer");
$('#buttonId').css("margin","0 auto");
$('#buttonId').parent().css("text-align","center");​​​​​​​​​​​​​ 
```

顺便说一句，这里不需要`a`标签。如果您想要手形光标，请使用`cursor`属性。

# .net - Use older (2.x) and newer (3.x) version of Lucene.net.dll in a same .net project

> ID：13891697
> 
> 赞同：0
> 
> 时间：2012-12-15T11:19:18.067
> 
> 标签：.net, visual-studio-2010, lucene.net

I want to do a comparison and performance benchmarking between the old token stream API and the newer one in the Lucene.net framework. I want to write a single console application for that and want to avoid writing two different applications, each bound to different version of lucene.

When I tried to add references of the older and newer version of Lucene.net dll in the .net application, VS 2010 complains that the reference has already been added. What is the solution? How can I refer to both the versions of the same dll in a same .net project?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:27:01.890

让它更复杂可能会使它实际上更简单。我会将它分成 3 个程序——一个用于比较新旧 API 的控制台应用程序，以及 2 个输入到控制台应用程序的无用户 I/O 程序，一个绑定到 2.x Lucene，一个绑定到3.x Lucene。（您甚至可以编写 2.x 无用户 I/O 程序，然后从中派生 3.x 无用户 I/O 程序（取决于您制作的 2.x 版本）与 -- 2.9.x 的比较非常接近 3.0)。）

*[编辑...]*

您还应该查看在[同一文件夹中使用同一程序集的不同版本](https://stackoverflow.com/questions/2460542/using-different-versions-of-the-same-assembly-in-the-same-folder)，因为它解决了类似的问题。

# php - Javascript PHP template system

> ID：13891702
> 
> 赞同：3
> 
> 时间：2012-12-15T11:19:41.183
> 
> 标签：php, javascript, templates

**What I currently have:**

*   index.php: Mainpage, showing topbar, navigation & placeholder for content

*   navigation: uses javascript to load a php-file into the content-section from index.php if a link in the navigation is clicked; important: NO refresh of index.php

Is working fine right now. Also the url in the address bar is not being changed right now when clicking a link.

**What should be added:**

If a link in the navigation is clicked, javascript should still load a php-file but also should change the url in the address bar without refreshing the side.

Example:

*   url: "www.example.com
*   In navigation link "work" is clicked.
*   work.php is loaded into the content-section of index.php
*   url now: "www.example.com/work

Additionally if the user types www.example.com/work in the address bar index.php should load work.php without a link being clicked.

A good example to understand my issue with the url in the address bar is facebook. Hope I could clarify my problem so somebody is able to help me ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:23:23.843

您只能在不刷新页面（发出另一个请求）的情况下更改 URL 的主题标签。因此，当单击导航链接时，您可以将“www.example.com”更改为“www.example.com/#work”，但如果不重新加载页面，则无法将其更改为“www.example.com/work”。

可以使用 javascript 使用 window.location.hash 设置主题标签

```
window.location.hash = "work"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:43:13.640

如果您希望避免使用主题标签，可以使用[HTML5 历史 API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。这允许你`/`在你的页面中使用`history.pushState()`and `history.replaceState()`方法。还有一个你可能会觉得有用的[插件。](https://github.com/balupton/history.js)

# c - How to evaluate if a code is correct against a submitted solution

> ID：13891704
> 
> 赞同：0
> 
> 时间：2012-12-15T11:20:03.800
> 
> 标签：c, algorithm, compare, evaluate

I´m searching information about how to compare two codes and decide if the code submitted by someone is correct or not (based on a solution code defined before).

I could compare the output but many codes may have the same output. Then I think I must compare someway the codes and give a percentage of similitude.

Anybody can help me?

(the language code is C but I think this isn´t important)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:18:00.220

我的一些老师使用在线自动程序评分系统，例如[http://web-cat.org/](http://web-cat.org/)

在作业中，他们会指定您必须提供的公共 api，然后他们会针对您的函数编写测试，就像单元测试一样。他们会故意选择会利用边界条件和其他学生因没有考虑而臭名昭著的事情的测试，然后用许多不同的输入调用你的代码，试图让你的代码失败。

有时他们会对预期值进行硬编码，有时他们会允许某个范围内的值，有时他们只是自己完成分配并完成分配，因此您自己的代码必须与他们的代码产生的结果相匹配。

显然，并非所有程序都可以通过这种方式有效地评分。这也有点容易出错，因为有时即使是老师也犯了错误并溢出了一个 int 或其他东西，那么正确的学生提交的内容与老师的错误结果不匹配。但是，一个系统不一定要完美才能有用。但我认为这提出了一个重要的观点，即通过阅读代码手动评分也不一定会揭示所有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:55:43.377

另一种可能性是复制提交的代码，去除所有空白并搜索必须存在的子字符串才能使代码正确和/或不存在的子字符串才能被视为正确的代码。麻烦的一点可能是设置为允许一些更棘手的要求，例如 [(a 或 c)、((a 或 b) 和 c)、((a 或 b) 和 c)]，其中变量是关于与变量相关的子字符串是否存在于代码中的布尔检查结果。

例如，[("printf"),("for"), (not "1,2,3,4,5,6,7,9,10")] 将需要 "printf" 和 "for"是代码中的子字符串，而“1,2,3,4,5,6,7,9,10”我不熟悉C，所以我假设这里需要“printf”能够在不涉及输出流的情况下打印任何内容，这可以通过 [("printf" or "out"),("for"), (not "1,2,3,4,5,6 ,7,9,10")]，其中“out”是使用输出流所需的 C 代码的一部分。

可以根据“正确”代码自动找到所需的子字符串，但正如其他人所提到的，还有其他方法可以做事。这就是为什么可能需要对“解决方案”进行硬编码的原因。即便如此，您很可能会错过一个必需的子字符串，并且它会被标记为错误，但这可能是您可以在一定程度上成功完成您所要求的事情的唯一方法。

正则表达式在这里可能很有用。

# jquery - each() jquery issue

> ID：13891707
> 
> 赞同：0
> 
> 时间：2012-12-15T11:20:30.587
> 
> 标签：jquery, each

SUre I am missing something with this Jquery. Suppose I have a list of n words as so : `<div class ="text"><p>word(n)</p></div>`. I want to alert each of the words so I put simply :

```
var string= $('.text p');
string.each(function(){ldelim}
alert($(this).val());
{rdelim}
); 
```

{rdelim} and {ldelim} are just left braces and right braces because I use smarty. But the alert returns an empty message. Someone could help ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:23:36.863

您应该使用`text`方法，`val`用于设置/获取表单元素的值：

```
alert($(this).text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:23:49.577

```
var string= $('.text p');
string.each(function(i,v){ldelim}
    alert($(v).text());
{rdelim}
); 
```

这应该工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:24:48.767

使用此流程：

```
var string= $('.text p');
 $.each(string,function(k,v){                        
 alert(v.text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:32:43.753

试试这种方式：

```
$(function(){

$.each($('.text p'),function(){
alert($(this).html())
});

}); 
```

# objective-c - animationDidStop in ios

> ID：13891708
> 
> 赞同：1
> 
> 时间：2012-12-15T11:20:32.500
> 
> 标签：objective-c, ios, xcode

I'm generating `CALayer` when user taps the screen. Then I'm translating that layer to certain position using `Animation`. Then I'm removing it using this code in `animationDidStop`:

```
 [mylayer removeFromSuperLayer]; 
```

Here everything is working fine, but when I tap again before the previous animation stops, my current layer is not removed from the superlayer. How do I removed it under these circumstances?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:04:24.080

如果您每次都创建一个新层，那么委托方法将只能删除当前层（即旧层将丢失）

您可以尝试`CATransaction begin/commit`在动画周围使用对并添加完成块，这样您就可以为每个动画传递图层引用

```
[CATransaction begin];

[CATransaction setCompletionBlock:^{
    [myLayer removeFromSuperlayer];
}];

//your existing animation code

[CATransaction commit]; 
```

# iphone - How to load different textures for each mesh in OpenGL ES 2.0?

> ID：13891709
> 
> 赞同：0
> 
> 时间：2012-12-15T11:20:35.470
> 
> 标签：iphone, ios, opengl-es-2.0

I am new in OpenGL ES and I am trying to do some basic stuff as part of my learning curve. I was able to render two meshes, a sphere and a cube with two glDrawArrays calls. I am trying to load a different texture to wrap around the cube and sphere but what is happening is that the last loaded texture is wrapped to both meshes. Does anyone know why this might be happening?

Here is the code for the mesh:

```
glEnable(GL_DEPTH_TEST);

glGenVertexArraysOES(1, &vertexArray);
glBindVertexArrayOES(vertexArray);

glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeMeshVerts, meshVerts, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 4*8, BUFFER_OFFSET(0));

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 4*8, BUFFER_OFFSET(4*3));

glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 4*8, BUFFER_OFFSET(4*6));

// Texture
// Create image from file
NSString *path = [[NSBundle mainBundle] pathForResource:textureImage ofType:@"jpg"];
NSData *texData = [[NSData alloc] initWithContentsOfFile:path];
UIImage *image = [[UIImage alloc] initWithData:texData]; 
```

// Generates a new OpenGL ES texture buffer and // initializes the buffer contents using pixel data from the // specified Core Graphics image, cgImage.

```
[TextureLoader textureWithCGImage:image.CGImage options:nil error:NULL];

glBindVertexArrayOES(0); 
```

Here is the draw code:

```
glBindVertexArrayOES(_vertexArray);

// Render the object with ES2
glUseProgram(_program);

// Set the sampler texture unit to 0
glUniform1i (uniforms[UNIFORM_TEXTURE_MATRIX], 0);

glDrawArrays(GL_TRIANGLES, 0, numVertices); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:57:10.720

在渲染之前，您没有将纹理绑定到采样器。首先，您需要保留对由`GLKTextureInfo`返回的对象的引用`textureWithCGImage:`，然后您可以使用`glBindTexture`纹理名称将其绑定到当前的采样器。例如

```
GLKTextureInfo *tex = [TextureLoader textureWithCGImage:image.CGImage options:nil error:NULL];
...
glBindTexture(GL_TEXTURE_2D, tex.name); 
```

您需要在每次绘制调用之前执行此操作，以便为采样器设置正确的纹理。您可以将所需的每个纹理绑定到不同的采样器，然后也只需传入正确的采样器制服。

# android - 如何在 Eclipse 中将 GitHub 库包含到您现有的 Android 项目中

> ID：13891715
> 
> 赞同：10
> 
> 时间：2012-12-15T11:21:24.690
> 
> 标签：android, import, github

我想将[这个](https://github.com/SimonVT/android-numberpicker/tree/master/library)库从 github 包含到我现有的项目中，我正在使用 eclipse。有没有关于如何做到这一点的教程？我是 android 和 java 开发的新手，所以任何一步一步的帮助都会很棒！

注意：我在 eclipse 中安装了一个 Egit 插件。

* * *

当我尝试从我从 github 页面下载的解压缩文件中导入库时的屏幕图像： ![在此处输入图像描述](../Images/7fd6634e21c1201793053fd4dd274f49.png)

* * *

同样在按照以下建议导入库后，在我的包资源管理器中创建了一个库文件夹，但这是我得到的： ![在此处输入图像描述](../Images/b9c2e65c7c15d44305dd06e19e010975.png)

* * *

我现在在 eclipse 包资源管理器中有库，现在我想将它添加到我的项目中，所以我右键单击现有项目并选择属性。在 Android 库下，我单击确定并选择库而不是确定，没有任何反应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:15:29.743

右键单击您的项目 -> 属性 -> Android -> 添加。在那里你可以软管图书馆。

![在此处输入图像描述](../Images/0e43c9246d18ba2c40387124b367ce27.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:26:06.537

解压拉链，

> 右键单击您的工作区 -> 导入 -> Android -> Existing Android Code Into Workspace -> 提供该项目/库的路径

完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:06:38.353

我遇到了和你一样的问题，请[在这里](https://stackoverflow.com/questions/13858675/how-to-import-viewpagerindicator-library-in-eclipse/14435370#14435370)查看我的答案，希望对您有所帮助。

# java - 我必须通过蓝牙发送多张图像。但是如何在我的应用程序中一张一张发送图像时显示进度条

> ID：13891719
> 
> 赞同：0
> 
> 时间：2012-12-15T11:22:02.707
> 
> 标签：java, android

这是我的代码。

```
ArrayList<Uri> uris = new ArrayList<Uri>();
    mul = fileSelectorList;
     Log.d("final",""+mul);
    int length = mul.size();

    Intent mail_int = new Intent();
    mail_int.setAction(android.content.Intent.ACTION_SEND_MULTIPLE);
    mail_int.setType("image/*");
    for(int i = 0; i < length; i++) {
        File file = new File(mul.get(i));
        uris.add(Uri.fromFile(file));
    }
    mail_int.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);

    startActivity(mail_int); 
```

当图像开始发送时，我必须显示进度条才能一张一张地发送图像。这怎么可能。

# php - 如何链接同一个表mysql数据库中的2行？

> ID：13891722
> 
> 赞同：-2
> 
> 时间：2012-12-15T11:22:29.217
> 
> 标签：php, mysql, database, rows

我有一个用户表，我需要在其中链接两行。即我希望一个用户有一个链接到另一个。

是否可以在 php 中使用 mysql 来做到这一点？

或者，如果没有，请建议我采取其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:28:21.903

您可以进行自加入：

```
SELECT a.*, b.*
FROM   my_table a JOIN my_table b ON a.foo = b.bar 
```

要永久存储两条记录之间的“链接”，您可以创建关系表：

```
CREATE TABLE relationships (
  id_a BIGINT UNSIGNED NOT NULL,
  id_b BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (id_a, id_b),
  FOREIGN KEY (id_a) REFERENCES my_table (id),
  FOREIGN KEY (id_b) REFERENCES my_table (id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:29:02.040

查找自我加入，一个快速的谷歌应该会给你你需要的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:30:30.683

如果关系是多对多的（即，每个用户可能有到许多其他用户的链接），最好的方法是使用列出关系的第二个表。

```
user_links (
    user_a_id int not null,
    user_b_id int not null,
    PRIMARY KEY(user_a_id, user_b_id)
) 
```

您可能需要阅读[Database Normalization](http://en.wikipedia.org/wiki/Database_normalization)。

# java - maven-embedded-glassfish-plugin 的类路径

> ID：13891729
> 
> 赞同：0
> 
> 时间：2012-12-15T11:23:40.037
> 
> 标签：java, maven, jdbc, glassfish

我正在使用 maven Embedded-glassfish 插件并尝试使用外部数据库。

现在我需要在类路径上提供特定的 JDBC 驱动程序，就像这里提到的：http: [//docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm](http://docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm)

但我不**知道如何**为这个插件设置类路径（最好在 pom.xml 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T05:59:27.897

尝试将 appserv-rt.jar（位于 Glassfish 的 lib 目录中）文件添加到项目的构建路径（它将添加所有依赖项，如果您想避免这种情况，您应该首先使用 jar 创建一个库，然后添加该库）

# php - 使用 Kohana3 框架从表中获取随机行 - 快速

> ID：13891732
> 
> 赞同：2
> 
> 时间：2012-12-15T11:24:10.287
> 
> 标签：php, mysql, kohana-3

如何使这段代码在 Kohana3 框架中工作？我有一个语法问题。

```
ORM::factory('table1')
->where ( 'id', '=', ceil( DB::expr('rand()')  * [SELECT max(id) from table1] ) )
->find(); 
```

这就是我想从表中选择随机行的方式。

这适用于小表（包含超过 1000 行），但不适用于大表：

```
ORM::factory('table1')
->order_by(DB::expr('RAND()'))
->find(); 
```

我想要的标准mysql等价物是这样的：

```
SELECT name
  FROM table1 JOIN
       (SELECT CEIL(RAND() *
                    (SELECT MAX(id)
                       FROM table1)) AS id
        ) AS r2
       USING (id); 
```

那么，如何将其转换为 Kohana3 框架的工作代码？

PS 如果表中没有空洞（没有删除的行），这种方法可以正常工作，这在我的情况下很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:29:32.477

您正在尝试做的实际上是 MySQL 的问题。您需要正确的查询让它对任何大小的表执行。一个更具可扩展性的实现是使用 PHP 生成一个小于最大 ID 的随机数，然后对其进行选择。

获取最高ID：

```
SELECT MAX(id) max_id FROM table1 
```

在 PHP 中获取“id”来选择：

```
$rand_id = mt_rand(0, $max_id-1); 
```

然后使用 LIMIT 1 创建查询以选择随机记录，这样即使有漏洞也能正常工作。

```
SELECT * FROM table1 WHERE id>=$rand_id ORDER BY id LIMIT 1 
```

可以在 MySQL 中完成这一切，但使用 DB 抽象层并不容易阅读或实现。

# iphone - UrbanAirShip 中的徽章编号未更新

> ID：13891733
> 
> 赞同：1
> 
> 时间：2012-12-15T11:24:23.433
> 
> 标签：iphone, ios, ipad, urbanairship.com

我是 iOS 新手。

*   我正在使用城市飞艇进行推送通知。
*   现在，当我第一次发送通知时，我得到了徽章 1。
*   但是，当我再次发送通知时，尽管我发送带有 +1 徽章的通知，但它仍然会显示为 +1。

我用

```
[[UAPush shared] setAutobadgeEnabled:YES];
[[UAPush shared] resetBadge]; 
```

在**didFinishLaunchingWithOptions**方法中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:21:37.343

推送通知始终将徽章编号设置为发送的值。没有递增。如果您不发送任何值，则徽章将保持以前的状态不变。如果您发送 0，则徽章将被移除。

查看文档，我发现您必须为徽章参数提供正确的值：支持自动、增量和减量。那些从UA的数据库中获取最近的值并根据关键字对其进行修改。

这是您需要在推送通知 JSON 字典中执行的操作。

PS：Apple 批准后，您应该查看我们的应用 Airship Commander。这有一个步进控制离开，擦除或设置徽章编号： http: [//www.cocoanetics.com/2012/12/airship-commander-1-0/](http://www.cocoanetics.com/2012/12/airship-commander-1-0/)

# perl - 如果准备语句在下面的代码中失败，我如何返回一个值？

> ID：13891736
> 
> 赞同：2
> 
> 时间：2012-12-15T11:24:28.423
> 
> 标签：perl, perl-module

```
sub loadFileRecon {
    my $self = shift;
    my $days = shift;
    if($days eq '') {
        $days = 1;
    }
    my $insert = $self->{rba}->rbdb->prepare(q{
        insert into rba.filerecon (
            filename,
            records,
            start_dtm,
            file_type,
            managed_file_id,
            mf_dtm,
            processed_tidemark,
            mm_records,
            mm_dropped,
            mm_erred,
            mm_duplicate,
            file_source
        )
        select
            i.filename,
            i.records,
            i.file_dtm start_dtm,
            i.file_type,
            mf.managed_file_id,
            mf.created_dtm mf_dtm,
            NULL,
            i.orig_records,
            i.dropped,
            i.erred,
            i.duplicate,
            i.file_source
        from rba.mmfilestats i, managedfile mf, filelog fl
        where
            i.filename = fl.file_name and
            trunc(i.file_dtm) = trunc(sysdate - ?) and
            mf.managed_file_id = fl.managed_file_id
    }) or die $DBI::errstr;
    $insert->execute($days);
    $insert->finish;
    $self->{rba}->rbdb->commit;
    my $update = $self->{rba}->rbdb->prepare(q{
        update rba.filerecon fr
        set processed_tidemark = (
            select processed_tidemark
            from jobhasfile j
            where j.managed_file_id = fr.managed_file_id
        )
        where
            trunc(start_dtm) = trunc(sysdate - ?) and
            processed_tidemark is null
    });
    $update->execute($days);
    $insert->finish;
    $self->{rba}->rbdb->commit;
} 
```

如果上面的准备语句由于表或视图不存在而失败，那么它应该向 perl 模块返回一个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:54:52.927

如果`prepare`返回错误，您正在告诉您的程序死亡：

```
 }) or die $DBI::errstr; 
```

将其替换为您要查找的内容：

```
 }) or return $somevalue; 
```

或完全删除`or`并检查您的语句句柄的值；

```
 my $insert = $self->{rba}->rbdb->prepare(q{       
      ...
   });
   return $somevalue if ( !$insert ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:42:23.807

您需要做的是返回 DBI::errstr。不要死于错误。所以做这样的事情（从你的准备开始，到你的位置结束，但摆脱“或死”）：

```
 ...prepare( ......

    where
        i.filename = fl.file_name and
        trunc(i.file_dtm) = trunc(sysdate - ?) and
        mf.managed_file_id = fl.managed_file_id
    });

    if ($DBI::errstr) {
        # oops something is wrong
        print $DBI::errstr;
        call_error($DBI::errstr);
    } 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:40:00.787

您发布的错误日志显示您的错误是在执行点而不是在准备点引发的。所以这就是你在执行后所做的：

```
 #your execute statement first
    $insert->execute($days);
    #Now the check on the execute
    if ($DBI::errstr) {
       # oops something is wrong
       return -1;
    } 
```

请让我知道这是否有效

# java - Hibernate GWT：关闭休眠日志到控制台

> ID：13891737
> 
> 赞同：0
> 
> 时间：2012-12-15T11:24:35.463
> 
> 标签：java, hibernate, gwt

我在互联网上搜索了很多类似问题的主题，但任何一个都可以帮助我解决这个问题。所以我使用 GWT + Hibernate (jars)：

```
junit-4.11-beta-1.jar
mysql-connector-java-5.1.22-bin.jar
dom4j-1.6.1.jar
antlr-2.7.7.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.8.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
gwt-servlet.jar
hibernate-validator-4.0.2.GA.jar
validation-api-1.0.0.GA.jar 
```

我想做的就是禁用控制台输出，例如：

```
2012-12-14 23:41:09 org.hibernate.tool.hbm2ddl.TableMetadata <init>
INFO: HHH000126: Indexes: [primary]
2012-12-14 23:41:09 org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000232: Schema update complete 
```

因为它使我的应用程序非常慢。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:27:48.080

**这个问题与 GWT 无关。这些日志对性能的影响为零。**

如果您需要关闭休眠日志，那么您需要首先找到休眠的初始化方式，然后在此处或在您的应用程序日志设置中解决休眠的日志级别。[参考](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-logging)。

```
1) In code via some Annotation
2) from a hibernate properties file
3) from hibernate.cfg.xml
4) from log4j.properties 
```

我们**使用 hibernate.cfg.xml**并使用关闭休眠 sql 日志
`<property name="show_sql">false</property>`

您需要为您的应用程序找到类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:44:05.110

在您的 log4j 配置中，将休眠记录器设置为更高级别：

```
<logger name="org.hibernate">
  <level value="error"/> 
</logger> 
```

如果您不想看到信息级休眠消息。

# jquery - 用户搜索时清除间隔

> ID：13891738
> 
> 赞同：0
> 
> 时间：2012-12-15T11:24:38.103
> 
> 标签：jquery, ajax

我有这个表格，我用它来搜索数据库中的一些记录。

它在一个名为：listaupdate.php 的页面内

我有另一个 lista.php，我用它来刷新和获取 listaupdate.php 的更新

现在，在一些人的帮助下，我来到了这一部分：listaupdate.php

```
<form action="listasearch.php" method="post">
<select name="kategoria">
<option value="status">Status</option>
</select> 
<input type="text" name="search">
<input type="submit">
</form> 
```

表格，在 lista.php 我有：

```
 var interval = setInterval(function(){
$('#lista').show().load('listaupdate.php').fadeIn("slow");}, 3000);
$('input[name="search"]').on("focus", function(event){
     interval = clearInterval(interval);
});

// restart it when search is done
$("form").submit( function(event){
         interval = setInterval(function(){
        $('#lista').show().load('listaupdate.php').fadeIn("slow");}, 3000);
  }); 
```

我需要的是，当有人搜索重新加载时应该停止。然后在表格重新设置后它应该重新开始..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:37:21.373

是个

```
$('input[name="search"]').on("focus", function(event){
     interval = clearInterval(interval);
}); 
```

是在区间吗？从中删除并更改如下：

```
$('input[name="search"]').on("focus", function(event){
     clearInterval(interval);
     interval = 0;
}); 
```

# c++ - QListWidget 的高度与窗口的高度相同

> ID：13891740
> 
> 赞同：0
> 
> 时间：2012-12-15T11:24:52.860
> 
> 标签：c++, qt

如何使 QListWidget 的高度与主窗口的高度相同？

因此，如果我更改它必须调整大小的主窗口，如果列表不能全部在小部件中查看，则使滚动条可见，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:58:00.820

[Qt 有一个叫做布局](http://doc.qt.digia.com/qt/layout.html)的漂亮东西，它可以满足你的需求。

如果列表小部件是主窗口中的唯一小部件，那么只需将主窗口的布局设置为水平或垂直就足够了。

这是[有关布局的视频教程](http://youtu.be/2edb0VOkx-k?t=1m53s)的链接。

# c++ - 无法排队

> ID：13891747
> 
> 赞同：0
> 
> 时间：2012-12-15T11:25:47.033
> 
> 标签：c++, setw

我不知道如何更好地排列这个。我认为通过使用`L = name.length();`并从中减去`setw`它会更好地排列，但不是。我有`name`并且`ID`设置正确，但我似乎无法让其余的排队。这些是`floats`顺便说一句。

```
for (int z=0; z<i ;z++){

  if( EInfo[z].valid >0){

    string name = employee[z].getName();
    int L = name.length();

    payReportObj << fixed << setprecision (2)  <<  endl;

      payReportObj  << setw(3) << employee[z].getID()
                  << setw(36)
                  << employee[z].getName()
                  << setw(30-L) << "$" << setw(4) << EInfo[z].grossPaySE
                  << setw(25) << "$" << setw(4) << EInfo[z].taxSE
                  << setw(15) << "$" << setw(4) << EInfo[z].insuranceSE
                  << setw(25) << "$" << setw(4) << EInfo[z].netPaySE; 
```

我试图让它更像这样...... ![想要我想去](../Images/87fc17cd17239b5ca20951eb29717835.png)

这就是我所拥有的...![这就是我所拥有的。](../Images/4cc54e971b7c57a9ffc383da19d1fcc1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:13:47.010

替换`setw(30-L)` 为`setw(30)`。和这个：

```
int L = name.length(); 
```

不需要。如果要右对齐数字，请使用`std::right`.

您在 nodepad 中使用比例字体打开了输出文件。即使它们是按比例字体对齐的，您也不会看到列。将字体更改为固定或在终端中键入`type output.txt`。

# c# - 从 jquery / javascript 调用 windows 服务 wcf 服务

> ID：13891755
> 
> 赞同：2
> 
> 时间：2012-12-15T11:27:22.497
> 
> 标签：c#, jquery, .net, json, wcf

我有一个托管在 Windows 服务中的 WCF（从 MS 网站示例中挑选），我可以使用 SOAP UI 访问和调用方法。但是，当我尝试使用 jquery 从 Web 应用程序调用相同的方法时，我不断收到未知错误，并且来自 json 的状态代码为 12152。

下面是该服务的 app.config。

```
<?xml version="1.0"?>
<configuration>
        <system.serviceModel>
        <services>
            <!-- This section is optional with the new configuration model
           introduced in .NET Framework 4\. -->
                <service name="Microsoft.ServiceModel.Samples.CalculatorService" behaviorConfiguration="CalculatorServiceBehavior">
                    <host>
                        <baseAddresses>
                            <add baseAddress="http://localhost:8080/ServiceModelSamples/service"/>
                        <!--<add baseAddress="net.tcp://localhost:8081/ServiceModelSamples/service"/>-->
                        </baseAddresses>
                    </host>
                <!-- this endpoint is exposed at the base address provided by host: http://localhost:8000/ServiceModelSamples/service  -->
                    <endpoint address="basic" binding="basicHttpBinding" contract="Microsoft.ServiceModel.Samples.ICalculator"/>
                    <endpoint address="ws" binding="wsHttpBinding" contract="Microsoft.ServiceModel.Samples.ICalculator"/>
                    <endpoint behaviorConfiguration="web" address="wb" binding="webHttpBinding" contract="Microsoft.ServiceModel.Samples.ICalculator"/>
                <!--<endpoint address="tcp" binding="netTcpBinding" contract="Microsoft.ServiceModel.Samples.ICalculator"/>-->
                <!-- the mex endpoint is exposed at http://localhost:8000/ServiceModelSamples/service/mex -->
                    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
                </service>
            </services>
            <behaviors>
                <serviceBehaviors>
                    <behavior name="CalculatorServiceBehavior">
                        <serviceMetadata httpGetEnabled="true"/>
                        <serviceDebug includeExceptionDetailInFaults="False"/>
                    </behavior>
                </serviceBehaviors>
                <endpointBehaviors>
                    <behavior name="web">
                        <webHttp/>
                    </behavior>
                </endpointBehaviors>
            </behaviors>
        </system.serviceModel>
    <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>   </configuration> 
```

下面是javascript代码

```
function CallService() {
    debugger;
    $.support.cors = true;
    $.ajax({

        type: 'POST',
        url: 'http://localhost:8080/ServiceModelSamples/service/wb/ShowMessage/',
        data: '{}',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        processdata: false,
        error: function (xhr) { ServiceFailed(xhr); }
    });
} 
```

下面是合约代码

```
[ServiceContract(Namespace="test")]
 public interface ICalculator
{
[OperationContract]
double Add(double n1, double n2);
[OperationContract]
double Subtract(double n1, double n2);
[OperationContract]
double Multiply(double n1, double n2);
[OperationContract]
double Divide(double n1, double n2);
[OperationContract]
[WebGet(ResponseFormat=WebMessageFormat.Json)]
string ShowMessage();
} 
```

关于如何从 js 代码调用服务的任何指示都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:16:45.260

看来我必须手动构建 SOAP 信封才能进行这种调用。或者另一个选项似乎是，使服务成为 RESTful 服务。

# c# - 使用实体框架进行 ASP.NET 发布

> ID：13891762
> 
> 赞同：3
> 
> 时间：2012-12-15T11:27:59.100
> 
> 标签：c#, asp.net

如何使用实体框架发布 ASP.NET C# 网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:38:36.070

阅读这些文章：

[`Deploying Your Site Using Visual Studio`](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/deploying-your-site-using-visual-studio-cs)

[`How to Deploy ASP.NET Web Application`](http://www.beansoftware.com/ASP.NET-Tutorials/Deploy-ASP.NET.aspx)

# javascript - 事件中自定义属性的“未定义”值 (Firefox)

> ID：13891765
> 
> 赞同：1
> 
> 时间：2012-12-15T11:28:28.633
> 
> 标签：javascript, firefox, iframe, dom-events, undefined

我有带有代码的 test.html 页面（[https://gist.github.com/4293833](https://gist.github.com/4293833)）：

```
<!doctype html>
<html>
<head>
  <script>
  var paymentEventHandler = function (e) {
    console.log(e)
    console.log('payment: ' + JSON.stringify(e.status))
    alert('status: ' + e.status)
  }

  if (document.addEventListener) {
    document.addEventListener('payment', paymentEventHandler)
  } else {
    document.attachEvent('onPayment', paymentEventHandler)
  }
  </script>
</head>
<body>
  <iframe src='/iframe.html'></iframe>
</body>
</html> 
```

和 iframe.html：

```
<!doctype html>
<html>
    <head>
        <script>
         var event

         if (document.createEvent) {
             event = document.createEvent("HTMLEvents")
             event.initEvent("payment", true, true)
         } else {
             event = document.createEventObject()
             event.eventType = 'payment'
         }

         event.status = 'ok'

         if (window.parent.document.dispatchEvent) {
             window.parent.document.dispatchEvent(event)
         } else {
              window.parent.document.fireEvent('onPayment', event)
         }
        </script>
    </head>
    <body>
    </body>
</html> 
```

代码在 Chrome、Safari、Opera 中有效，但在 Firefox 中我得到了`undefined`. 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:09:33.530

您需要创建自定义事件而不是 htmlevent 并使用 initCustomEvent 进行初始化

# html

```
 <!doctype html>
    <html>
    <head>
      <script>
      var paymentEventHandler = function (e) {
        alert('status: ' + e.detail.status)
      }

      if (document.addEventListener) {
        document.addEventListener('payment', paymentEventHandler)
      } else {
        document.attachEvent('onPayment', paymentEventHandler)
      }
      </script>
    </head>
    <body>
      <iframe src='iframe.html'></iframe>
    </body>
    </html> 
```

# 框架

```
 <!doctype html>
    <html>
        <head>
            <script>
             var event

             if (document.createEvent) {
                 event = document.createEvent("CustomEvent")
                 event.initCustomEvent("payment", true, true, {status:"ok"});
             } else {
                 event = document.createEventObject()
                 event.eventType = 'payment'
             }

             if (window.parent.document.dispatchEvent) {
                  console.dir(event);
                 window.parent.document.dispatchEvent(event)
             } else {
                  console.dir(event);
                  window.parent.document.fireEvent('onPayment', event)
             }
            </script>
        </head>
        <body>
        </body>
    </html> 
```

# mysql - MySQL 服务器 - 永久设置 max_allowed_pa cket 值

> ID：13891768
> 
> 赞同：0
> 
> 时间：2012-12-15T11:28:39.687
> 
> 标签：mysql, size, packet

我在 CentOS 服务器上安装了 MySQL 服务器版本 5.5.25。我在 /etc/my.cnf 文件中将 *max_allowed_pa​​cket* 大小增加到 32M 以便永久存储它（`max_allowed_packet = 32M;`），然后我用*/etc/init.d/mysqld restart 重新*启动了服务器。问题是在 PHPMyAdmin 中的值不会改变。我尝试使用`SET GLOBAL max_allowed_packet = 33554432;`(32 MB) 从 shell 设置变量，但 shell 返回“0 行受影响”。

它是MySQL服务器的错误吗？或者也许我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:31:15.547

您是否重新启动了 Apache？

```
 service httpd restart 
```

# java - 无法使用 MYSQL 服务器使用 textView 插入数据

> ID：13891775
> 
> 赞同：0
> 
> 时间：2012-12-15T11:29:13.190
> 
> 标签：java, php, android, mysql, json

帮帮我.. 下面代码中的 JSON 有问题。无法解析为 php 文件.. android 应用程序链接到 phpmyadmin@MySQL 服务器....使用 php 文件。这使用 TextView 发送数据。数据是从其他页面传递的。并将其保存在下面的文本视图中。但是当数据要发送时。JSON 不起作用，我创建的应用程序停止并检测到故障应用程序。我的 php 文件没有问题，但在这段代码中我不知道有什么问题..它没有达到我认为的 try funcion.. 只需要帮助我使用 php 文件将数据从这个应用程序插入到 mysql 服务器。

```
 @Override
         protected void onPreExecute() {
             super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity3.this);
            pDialog.setMessage("Sending Aduan....");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
         }

         protected String doInBackground(String... args) {

             String nama = txtView1.getText().toString();
             String alamat = txtView2.getText().toString();
             String no_ic = txtView3.getText().toString();
             String mobile = txtView4.getText().toString();
             String telefon = txtView5.getText().toString();
             String email = txtView6.getText().toString();
             String kenyataan = txtView7.getText().toString();
             String pelaksana = txtView8.getText().toString();
             String lokasi = txtView9.getText().toString();
             String daerah = txtView10.getText().toString();    

             List<NameValuePair> params = new ArrayList<NameValuePair>();
             params.add(new BasicNameValuePair("nama", nama));
             params.add(new BasicNameValuePair("alamat", alamat));
             params.add(new BasicNameValuePair("no_ic", no_ic));
             params.add(new BasicNameValuePair("mobile", mobile));
             params.add(new BasicNameValuePair("telefon", telefon));
             params.add(new BasicNameValuePair("email", email));
             params.add(new BasicNameValuePair("kenyataan", kenyataan));
             params.add(new BasicNameValuePair("pelaksana", pelaksana));
             params.add(new BasicNameValuePair("daerah", daerah));
             params.add(new BasicNameValuePair("lokasi", lokasi));

             JSONObject json = jsonParser.makeHttpRequest(url_create_aduan,"POST", params);

             Log.e("Create Response", json.toString());

             try {
                 int success = json.getInt(TAG_SUCCESS);

                 if (success == 1) {

                   Intent i = new Intent(getApplicationContext(),Rujukan.class);
                 startActivity(i);
                 finish();
                } else {
                }
                } catch (JSONException e) {
                        e.printStackTrace();
                    }
             return null;
         }

         protected void onPostExecute(String file_url) {

             pDialog.dismiss();
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:39:58.883

**问题 ：**

您正在尝试`doInBackground`从`AsyncTask`.

**解决方案 ：**

因为不可能从 UI 线程访问 UI 元素，所以将所有项目形式移动`doInBackground` 到`onPreExecute`和`onPostExecute`as ：

```
String nama,alamat,no_ic,mobile,telefon;
String email,kenyataan,pelaksana,lokasi,daerah;

 @Override
         protected void onPreExecute() {
             super.onPreExecute();

              nama = txtView1.getText().toString();
              alamat = txtView2.getText().toString();
              no_ic = txtView3.getText().toString();
              mobile = txtView4.getText().toString();
              telefon = txtView5.getText().toString();
              email = txtView6.getText().toString();
              kenyataan = txtView7.getText().toString();
              pelaksana = txtView8.getText().toString();
              lokasi = txtView9.getText().toString();
              daerah = txtView10.getText().toString();  

            pDialog = new ProgressDialog(MainActivity3.this);
            pDialog.setMessage("Sending Aduan....");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
         }

         protected String doInBackground(String... args) {

             List<NameValuePair> params = new ArrayList<NameValuePair>();
             params.add(new BasicNameValuePair("nama", nama));
             params.add(new BasicNameValuePair("alamat", alamat));
             params.add(new BasicNameValuePair("no_ic", no_ic));
             params.add(new BasicNameValuePair("mobile", mobile));
             params.add(new BasicNameValuePair("telefon", telefon));
             params.add(new BasicNameValuePair("email", email));
             params.add(new BasicNameValuePair("kenyataan", kenyataan));
             params.add(new BasicNameValuePair("pelaksana", pelaksana));
             params.add(new BasicNameValuePair("daerah", daerah));
             params.add(new BasicNameValuePair("lokasi", lokasi));

             int success=0;
             JSONObject json = jsonParser.
               makeHttpRequest(url_create_aduan,"POST", params);

             Log.e("Create Response", json.toString());

             try {
                  success = json.getInt(TAG_SUCCESS);

                } catch (JSONException e) {
                  e.printStackTrace();
                  success=0;
                  }
             return ""+success;
         }

         protected void onPostExecute(String result) {

                pDialog.dismiss();
                if (Integer.parseInt(result) == 1) {

                   Intent i = new Intent(
                   Current_Activity.this,Rujukan.class);
                 startActivity(i);
                 finish();
                } else {
                   //your task here
                }
         }
     } 
```

# c# - 选择单元格时，如何突出显示 DataGrid 的 ColumnHeader 和 RowHeader？

> ID：13891780
> 
> 赞同：4
> 
> 时间：2012-12-15T11:29:54.797
> 
> 标签：c#, wpf, datagrid

在微软的 Excel 中，当一个单元格或一组单元格被选中时，列的标题和行的标题将被突出显示。如何在 wpd DataGrid 中实现类似的功能？

我想我应该处理`DataGrid.SelectionChanged`事件，但我不知道如何进行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:05:46.543

我认为最简单的方法是使用 SelectedCellsChanged 事件。

检查我的例子：

XAML 代码：

```
 <DataGrid Name="myData"
                  AutoGenerateColumns="True"
                  SelectionMode="Extended"
                  SelectionUnit="Cell"                  
                  SelectedCellsChanged="myData_SelectedCellsChanged"                  
                  /> 
```

代码隐藏：

```
private void myData_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
{
            foreach (var item in myData.Columns)
            {
                item.HeaderStyle = null;
            }

            if (myData.SelectedCells != null && myData.SelectedCells.Count != 0)
            {
                Style styleSelected = new Style();
                styleSelected.Setters.Add(new Setter(Border.BackgroundProperty, new SolidColorBrush(Colors.Orange)));

                foreach (var item in myData.SelectedCells)
                {
                    item.Column.HeaderStyle = styleSelected;
                }
            }
  } 
```

如果您想要列之间的垂直线，您还可以在 styleSelected 中设置 Border.BorderBrushProperty 和 Border.BorderThicknessProperty。

# javascript - JQuery - 对象[对象对象]没有方法

> ID：13891783
> 
> 赞同：3
> 
> 时间：2012-12-15T11:30:06.543
> 
> 标签：javascript, jquery, function

您好，我正面临这个奇怪的 JQuery 问题。我的JS：

```
$("#flip-counter").centerH();
function centerH() {
var marginL = ( $(window).width() - $(this).width() ) / 2;
$(this).css("marginLeft",marginL+"px");
alert(marginL);
} 
```

收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'centerH'         
(anonymous function) 

k jquery.js:2 
l.fireWith jquery.js:2 
p.extend.ready jquery.js:2
D jquery.js:2 
```

jquery.js:2 为空。

我会理解是否没有任何代码可以工作，但现在一切正常，除此之外我无法添加任何其他功能。我只是不断收到同样的错误。所有文件都正确包含，当我删除这段 JS 代码时，我的代码就像一个魅力。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T11:34:15.840

如果您想将函数与 jquery 对象一起使用，则需要扩展 jquery。

```
$.fn.centerH = function() {
    var marginL = ( $(window).width() - $(this).width() ) / 2;
    $(this).css("marginLeft",marginL+"px");
    alert(marginL);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T11:33:39.150

这段代码：

```
$("#flip-counter").centerH() 
```

...尝试获取`centerH`从返回的 jQuery 对象调用的属性`$("#flip-counter")`，然后将其作为函数调用。所以`centerH`对象上必须有一个函数。

这段代码：

```
function centerH() {
var marginL = ( $(window).width() - $(this).width() ) / 2;
$(this).css("marginLeft",marginL+"px");
alert(marginL);
} 
```

...创建一个`centerH`函数，但不做任何事情来将它添加到 jQuery。

如果您尝试制作[jQuery 插件](http://docs.jquery.com/Plugins/Authoring)，请将函数分配给`$.fn`：

```
$.fn.centerH = centerH; 
```

一旦你这样做了，这`$("#flip-counter").centerH()`条线就可以工作了。但请注意，在 jQuery 插件函数中，`this`它**不是**DOM 元素（您的`$(this).css(...)`代码似乎将其视为一个）。在 jQuery 插件函数中，`this`是调用该函数的 jQuery 对象（所以`this.css(...)`改为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:33:59.263

centerH() 函数在全局范围内。但是您从 $("#flip-counter") jQuery 对象调用它。

如果您想让自己的自定义函数可用于 jQuery 对象，您可以这样创建它：

```
jQuery.fn.yourFunction = function() { 
    // do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:33:40.607

你不能像这样向 JQuery 添加函数。您需要使用 jQuery.fn.centerH 将其添加为插件

更多信息：

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# autocad - 在AutoCAD中读取和绘制txt文件

> ID：13891786
> 
> 赞同：1
> 
> 时间：2012-12-15T11:30:21.930
> 
> 标签：autocad

我想在 autocad 中读取一个 txt 文件并绘制它们（线/折线）。它可能看起来像

```
1 x11 y11 z11.......x14, y14,z14  % polyline 1
..
n xn1 yn1 zn1.......xn4, yn4,zn4  % polyline n 
```

我想知道什么是最好和最简单的方法。我应该使用什么编程语言。什么是有用的链接，或者在这个方向上已经做了一些工作。最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:39:02.467

无需编程语言！只需创建一个文本文件并在文件中键入 AutoCAD 命令，就像在 AutoCAD 命令提示符下一样。使用 .scr 扩展名保存文件，您可以将文件拖到 AutoCAD 窗口中，或使用 AutoCAD 中的脚本命令查找并运行命令脚本。

更多信息：[http ://www.upfrontezine.com/tailor/tailor19.htm](http://www.upfrontezine.com/tailor/tailor19.htm)

我实际上使用 Python 来生成这些命令脚本。借助现代语言的力量，并加入一些 AutoLisp，您可以做令人惊讶的复杂事情。我已经使用它来为斜拉桥的复杂钢塔建模，并为 Larsa 建模测试模型几何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:02:06.980

有几种方法可以做到这一点。

**简单的解决方案**

***脚本文件***

创建脚本文件更简单快捷 [http://docs.autodesk.com/MAP/2010/ENU/AutoCAD%20Map%203D%202010%20User%20Documentation/HTML%20Help/files/WS1a9193826455f5ff47b7aa4b11fbe75ecf1-65dc.htm](http://docs.autodesk.com/MAP/2010/ENU/AutoCAD%20Map%203D%202010%20User%20Documentation/HTML%20Help/files/WS1a9193826455f5ff47b7aa4b11fbe75ecf1-65dc.htm)

***AutoLISP 自动化***

这也更容易和更快地提供大量在线资源。 [http://www.pixelgraphicsinc.com/AutoLisp_Tutorial01.html](http://www.pixelgraphicsinc.com/AutoLisp_Tutorial01.html)

最佳但复杂的解决方案

**.NET C# 插件**

这是最好的选择，因为它可以让您做的不仅仅是基本的事情。如果你喜欢做编码。这很好玩。您可以使用 .NET C# 创建插件并读取 txt 文件以创建线段。

让我知道你怎么去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:15:15.903

您可以在 C# 和 C++ 中使用 ObjectARX。C# 将是一个更好的选择。

只需使用 C# System.IO 库使用 StreamReader 读取您的文本文件。

创建文本文件中指定的点数组。

最后使用给定的点创建折线并在 ObjectARX 中使用瞬态，您可以显示折线。

# iphone - 我可以在未经用户明确同意的情况下将照片保存到相机胶卷吗？

> ID：13891790
> 
> 赞同：0
> 
> 时间：2012-12-15T11:31:26.453
> 
> 标签：iphone, objective-c, ios

我正在开发一个让用户拍照的 iPhone 应用程序。这些照片保存在应用程序中，但我也想将它们保存到相机胶卷中。问题是我的应用程序没有 UI 控件让用户指定他是否希望将照片也保存在相机胶卷中。我搜索了 Apple 指南和文档，但找不到有关此问题的任何提示。因此，根据您的经验，可以在不征得用户许可的情况下将用户拍摄的照片也保存在相机胶卷中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:36:55.980

在未经许可的情况下写入相机胶卷是完全可以的..但是最好在保存照片后显示成功的保存警报..如果您在没有向用户提供一些反馈的情况下保存不必要/非自愿的照片，用户将不会高兴

```
void UIImageWriteToSavedPhotosAlbum (
   UIImage  *image,
   id       completionTarget,
   SEL      completionSelector,
   void     *contextInfo
); 
```

以上是保存图像的方法..它可以在苹果文档中找到[保存到相机胶卷](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:46:24.207

如果用户通过点击按钮或其他方式自己拍照，则保存到相机胶卷是您能做的最好的事情，IMO，我认为您不需要显示警报或任何类型的通知。

唯一的事情是，确保用户知道他应该去哪里检索他的照片......

# winforms - 在多级下拉菜单中将 ToolStripDropDown.DropShadowEnabled 设置为 false

> ID：13891792
> 
> 赞同：0
> 
> 时间：2012-12-15T11:32:06.890
> 
> 标签：winforms, shadow, toolstripdropdown

我想禁用 ToolStripDropDownButton 下拉菜单上的下拉阴影。如果下拉菜单包含本身具有下拉菜单的项目（例如多级菜单），则在 ToolStripDropDownButton 上将 DropShadowEnabled 设置为 false 会导致顶级下拉菜单出现在错误的位置。见附图。

![在此处输入图像描述](../Images/b8c9608134eb5cbc1c392d3157fc56fc.png)

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        toolStripDropDownButton1.DropDown.DropShadowEnabled = false;
    }
}

partial class Form1
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
        this.toolStrip1 = new System.Windows.Forms.ToolStrip();
        this.toolStripDropDownButton1 = new System.Windows.Forms.ToolStripDropDownButton();
        this.item1ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
        this.subitem1ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
        this.toolStrip1.SuspendLayout();
        this.SuspendLayout();
        // 
        // toolStrip1
        // 
        this.toolStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.toolStripDropDownButton1});
        this.toolStrip1.Location = new System.Drawing.Point(0, 0);
        this.toolStrip1.Name = "toolStrip1";
        this.toolStrip1.Size = new System.Drawing.Size(292, 25);
        this.toolStrip1.TabIndex = 0;
        this.toolStrip1.Text = "toolStrip1";
        // 
        // toolStripDropDownButton1
        // 
        this.toolStripDropDownButton1.DisplayStyle = System.Windows.Forms.ToolStripItemDisplayStyle.Image;
        this.toolStripDropDownButton1.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.item1ToolStripMenuItem});
        this.toolStripDropDownButton1.Image = ((System.Drawing.Image)(resources.GetObject("toolStripDropDownButton1.Image")));
        this.toolStripDropDownButton1.ImageTransparentColor = System.Drawing.Color.Magenta;
        this.toolStripDropDownButton1.Name = "toolStripDropDownButton1";
        this.toolStripDropDownButton1.Size = new System.Drawing.Size(29, 22);
        this.toolStripDropDownButton1.Text = "toolStripDropDownButton1";
        // 
        // item1ToolStripMenuItem
        // 
        this.item1ToolStripMenuItem.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.subitem1ToolStripMenuItem});
        this.item1ToolStripMenuItem.Name = "item1ToolStripMenuItem";
        this.item1ToolStripMenuItem.Size = new System.Drawing.Size(152, 22);
        this.item1ToolStripMenuItem.Text = "item1";
        // 
        // subitem1ToolStripMenuItem
        // 
        this.subitem1ToolStripMenuItem.Name = "subitem1ToolStripMenuItem";
        this.subitem1ToolStripMenuItem.Size = new System.Drawing.Size(152, 22);
        this.subitem1ToolStripMenuItem.Text = "subitem1";
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 273);
        this.Controls.Add(this.toolStrip1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.toolStrip1.ResumeLayout(false);
        this.toolStrip1.PerformLayout();
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.ToolStrip toolStrip1;
    private System.Windows.Forms.ToolStripDropDownButton toolStripDropDownButton1;
    private System.Windows.Forms.ToolStripMenuItem item1ToolStripMenuItem;
    private System.Windows.Forms.ToolStripMenuItem subitem1ToolStripMenuItem;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:22:19.293

这是 ToolStripItem 类中非常典型的损失。显然这是一个错误，它可能是在他们应用 hack 解决 Windows 问题时引入的。您仍然可以在参考源中看到内部错误编号：

```
public bool DropShadowEnabled {
    get {
        // VSWhidbey 338272 - DropShadows are only supported on TopMost windows
        // due to the flakeyness of the way it's implemented in the OS. (Non toplevel
        // windows can have parts of the shadow disappear because another window can get
        // sandwiched between the SysShadow window and the dropdown.)
        return dropShadowEnabled && TopMost && DisplayInformation.IsDropShadowEnabled;
    }
    set {  // etc... }
} 
```

但是在设置器和渲染器中没有相应的修复。

他们提到的脆弱性实际上在 Vista 中得到了修复，您仍然在 XP 上运行，因此您看不到它。投影在 Aero 桌面上的处理方式不同，无论是否启用，它都是系统设置。所以在 Aero 上使用该属性是完全无效的。

这些 ToolStripItem 类错误在 .NET 2.0 发布后没有得到修复，因为整个 Winforms 团队都转移到了 WPF 组。而且它们现在肯定没有得到修复，尽管您可以自由地在 connect.microsoft.com 上提交错误，但没有意义。

由于该属性现在是系统设置，因此该属性不再对更高版本的 Windows 产生影响，因此唯一合乎逻辑的事情就是认输。不要更改属性。

# android - 下载 LARGE 文件时，Android 更新进度不起作用

> ID：13891796
> 
> 赞同：0
> 
> 时间：2012-12-15T11:32:34.533
> 
> 标签：android, file, download, progress

我读过[这个话题](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

我在下载大文件时遇到问题，因为进度对话框不上传进度或下载后只上传一次并突然显示 100%。但是当我下载小文件时，一切都很好。

我认为问题可能在这里：

```
publishProgress((int)(total*100/fileLength)); 
```

我的代码：

```
private class DownloadFile extends AsyncTask<String, Integer, String> {

    @Override

    protected String doInBackground(String... sUrl) {

        try {

            URL url = new URL(sUrl[0]);

            URLConnection connection = url.openConnection();

            connection.connect();

            // this will be useful so that you can show a typical 0-100% progress bar

            int fileLength = connection.getContentLength();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream());

            String sdpath = Environment.getExternalStorageDirectory().getAbsolutePat();

            File dir = new File(sdpath + "/Myfolder");

            dir.mkdir();

            OutputStream output = new FileOutputStream(dir.toString() + "/" + "myfilename");

            byte data[] = new byte[1024];

            long total = 0;

            int count;

            while ((count = input.read(data)) != -1) {

                total += count;

                // publishing the progress....

               publishProgress((int)(total/fileLength)*100);

               output.write(data, 0, count);

            }
            output.flush();
            output.close();
            input.close();
            } 
          catch (Exception e) {

        }

        return null;

    }

    @Override

    protected void onPreExecute() {

        super.onPreExecute();

        mProgressDialog.show();

    }

      @Override

       protected void onProgressUpdate(Integer... progress) {

        super.onProgressUpdate(progress);

        mProgressDialog.setProgress(progress[0]);

    } 
```

}

我的文件大约 80 MB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:40:40.677

你应该先尝试划分：

```
publishProgress((int)(total/fileLength)*100); 
```

因为你可以得到一个超出范围的划分。

# xml - 音乐 API 的建议，这些 API 根据所选流派、专辑封面和所选专辑中的曲目提供艺术家？

> ID：13891798
> 
> 赞同：1
> 
> 时间：2012-12-15T11:33:11.130
> 
> 标签：xml, api, uri

我正在寻找一个 API，它可以让我通过 URI 查询其数据库，以搜索基于流派（例如说唱）的音乐艺术家。我还希望 API 为从 URI 传入的选定艺术家姓名或艺术家 ID 提供专辑名称和专辑封面的列表。API 还应该能够列出与同样从 URI 指定的专辑标题/id 关联的所有曲目。

过去我曾尝试过 Echonest，但他们没有提供获取专辑封面的方法。

我正在寻找以 XML 格式显示的 URI 查询结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:35:44.873

你试过allmusic.com吗？他们有元数据服务。

## - 更新 -

试试免费的音乐档案，他们有一个 API，但我还没有测试过。 [http://freemusicarchive.org/api](http://freemusicarchive.org/api)

并且总是有 last.fm API。
[http://www.last.fm/api](http://www.last.fm/api)

您可能会发现并非所有功能都可以使用单个 API，因此您可能必须使用一个来根据流派获取艺术家，另一个来获取封面艺术等。

# java - 双数组操作到单数组

> ID：13891808
> 
> 赞同：0
> 
> 时间：2012-12-15T11:34:39.963
> 
> 标签：java, arrays

```
public void calculatePercentage(int exam[][])
    {
        int perc = 0;
        for (int i = 0; i < examen.length; i++)
        {
            for (int[] score : exam)
                perc += score;
            perc /= exam.length;
        }
    } 
```

你好，我真的被困在这个了。给定参数exam [] []，我想创建一个新的mathod calculatePercentages。双数组考试包含 3 行元素。该方法所要做的就是简单地计算每一行的总和。答案可能很简单，但我只是不知道该怎么做。对于单个数组，我猜代码是：

```
double perc = 0;
    for(int score : exam)
    {
            perc += score;
    }
    perc /= (exam.length);
    return perc; 
```

考试[][] 可能看起来像：

|10 12 18 5 3 | |12 3 5 15 20 | |20 15 13 11 9 |

输出百分比 [] 应该像：

{48,55,68} percent[] 的每个元素是exam[] 1 行元素的总和

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:38:55.670

> 双数组考试包含 3 行元素。该方法所要做的就是简单地计算每一行的总和。

这个名字没有意义，但它会做你想做的事。

```
public int[] calculatePercentage(int exam[][]) {
    int[] sums = new int[exam.length];
    for (int i = 0; i < exam.length; i++) {
         int sum = 0;
         for (int j = 0; j < exam[i].length; j++) {
              sum += exam[i][j];
         }
         sums[i] = sum;
    }
    return sums;
} 
```

还有一个双数组`double[]`，你说的是二维 int 数组`int[][]`

**编辑**

[Pshemo](https://stackoverflow.com/users/1393766/pshemo)指出一个更短的解决方案是可能的：

```
public int[] calculatePercentage(int exam[][]) {
    int[] sums = new int[exam.length];
    for (int i = 0; i < exam.length; i++) {
         for (int j = 0; j < exam[i].length; j++) {
              sums[i] += exam[i][j];
         }
    }
    return sums;
} 
```

甚至只是

```
public int[] calculatePercentage(int exam[][]) {
    int[] sums = new int[exam.length];
    for (int i = 0; i < exam.length; i++)
         for (int j = 0; j < exam[i].length; j++)
              sums[i] += exam[i][j];
    return sums;
} 
```

但我还是更喜欢第一个，因为它的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:37:51.973

```
for (int i = 0; i < exam.length; i++) {
        int sum = 0;
        for (int j = 0; j < exam[i].length; j++) {
            sum += exam[i][j];
        }

    } 
```

为每个使用

```
for (int x[] : exam) {
      for (int y : x) {

        sum += y;
      }
} 
```

# mysql - mysql中的超出范围错误

> ID：13891809
> 
> 赞同：0
> 
> 时间：2012-12-15T11:35:18.257
> 
> 标签：mysql

我试图使用mysql实现黑客新闻算法并得到以下错误

```
 Double value is out of range in 
    pow(((unix_timestamp() - unix_timestamp(postDateTime))/3600 + 1),1.5)

Where the value of postDateTime is 2012-12-15 10:41:31 
```

如果我将上述实现为

```
pow(((unix_timestamp() - unix_timestamp(cast(postDateTime as signed)))/3600 + 1),1.5) 
```

它工作得很好，但我不明白它背后的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:56:49.247

你运行的是什么版本的mysql？检查[此链接](http://bugs.mysql.com/bug.php?id=61224)。

并检查[文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_unix-timestamp)以了解为什么您会得到负值：

> 如果不带参数调用，则返回 Unix 时间戳（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。如果使用日期参数调用 UNIX_TIMESTAMP()，它会返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数。date 可以是 DATE 字符串、DATETIME 字符串、TIMESTAMP 或格式为 YYMMDD 或 YYYYMMDD 的数字。服务器将日期解释为当前时区的值，并将其转换为 UTC 的内部值。
> 
> ...
> 
> 如果要减去 UNIX_TIMESTAMP() 列，您可能希望将结果转换为有符号整数。请参阅第 12.10 节，“强制转换函数和运算符”。

# python - ValueError：需要超过 0 个值才能解压（python 列表）

> ID：13891813
> 
> 赞同：22
> 
> 时间：2012-12-15T11:36:43.447
> 
> 标签：python

我正在从 Google 代码类学习 python。我正在尝试练习。

```
def front_x(words):
  x_list, ord_list = []
  for word in words:
    if word[0] == 'x':
      x_list.append(word)
    else:
      ord_list.append(word)
  return sorted(x_list) + sorted(ord_list) 
```

我相信由于在一行上初始化了两个空列表而引发了错误。如果在单独的行上初始化它们，则不会再发生错误。这是原因吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-15T11:38:36.933

您正在尝试使用元组赋值：

```
x_list, ord_list = [] 
```

您可能打算使用多个分配：

```
x_list = ord_list = [] 
```

这不会像你期望的那样做；改用以下内容：

```
x_list, ord_list = [], [] 
```

或者，最好还是：

```
x_list = []
ord_list = [] 
```

当使用逗号分隔的变量名列表时，Python 期望右侧有一系列表达式与数字变量匹配；以下内容也是合法的：

```
two_lists = ([], [])
x_list, ord_list = two_lists 
```

这称为元组解包。另一方面，如果您尝试对*一个*空列表文字 ( `x_list = ord_list = []`) 使用多重赋值，那么两者`x_list`和`ord_list`都将指向*同一个*列表，并且通过一个变量所做的任何更改都将在另一个变量上可见：

```
>>> x_list = ord_list = []
>>> x_list.append(1)
>>> x_list
[1]
>>> ord_list
[1] 
```

最好让事情保持清晰，并使用两个*单独*的分配，给每个变量自己的空列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T11:38:27.230

换行

```
x_list, ord_list = []

to

x_list, ord_list = [], [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T04:50:15.003

函数的返回类型与函数中预期的值不匹配...

检查从函数返回的变量数量和您期望的变量

# ios - 在 UIView（不是 MKMapView）中使用 lat/long 的最佳实践

> ID：13891814
> 
> 赞同：3
> 
> 时间：2012-12-15T11:36:51.797
> 
> 标签：ios, cocoa-touch, uiview, geolocation, uikit

基本上我有一个 POI 列表（名称、纬度、经度），我想在 UIView 上绘制它们，相对于我当前的纬度/经度。我正在寻找一些将这些 POI（纬度/经度）映射到**UIView**的最佳实践。

我**不想**使用 MKMapView（不需要显示地图数据）。

我在读：

[http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/CoordinateSystem.html](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/CoordinateSystem.html)

但我不知道如何从 CLLocation 到我的 UIView 上的 (x,y)。我只想在我当前位置周围绘制那些 POI。因此，例如，如果我的屏幕代表一个 20 x 30 公里的区域，我如何将我的 POI 映射到它们对应的 (x,y) 坐标？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:40:37.480

你所做的有点奇怪，但你可以将纬度/经度转换为一个`CGPoint`类似于结构的名为 an 的结构`MKMapPoint`。An`MKMapPoint`具有与地图上的点相对应的`x`和`y`值。想象一下，如果你布置了一张世界的平面地图，0,0 是左上角。`MKMapPoint`是使用该坐标系在该地图上的一个点。

使用函数`MKMapPointForCoordinate()`将 a 转换`CLLocationCoordinate2D`为 an`MKMapPoint`

```
MKMapPoint myMapPoint = MKMapPointForCoordinate(myLocationCoordinate); 
```

当你得到点列表时，你必须做一些事情，比如找到最大和最小 x 和 y 值，然后使用这些值将所有点拟合到你的视图中，否则你最终会得到非常接近的负载点在您的视图中的一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:25:01.683

有许多（许多）不同的方法可以对行星进行建模并将 3D 坐标转换到 2D 表面上，并且各种方法引入的错误取决于您所在的地球的哪个部分。这个问题似乎涵盖了您所追求的大部分内容：

[在带有校准点的地图上将经度和纬度转换为 XY](https://stackoverflow.com/questions/1369512/converting-longitude-latitude-to-x-y-on-a-map-with-calibration-points)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T13:58:55.563

我的猜测是，对于 20 公里乘 30 公里的区域，您可以认为地球是平的，因此可以线性外推坐标。我相信您可以通过谷歌了解经纬度 0.00001 的距离有多大。

因此，如果您要在 X 轴上表示 20Km，并且您当前的位置是纬度 30.1234567，而 0.0000001 是 1 km，那么您可以将您的坐标放在屏幕的中心，将 30.1234557 作为最左边的 X 坐标等等。

我不想在这里提供答案，而只是想大声思考，因为我也想做一些类似的事情，并将其作为基于 Internet 的应用程序（尽管没有显示），在给定两个坐标的情况下，我不得不找到它们之间的距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T13:12:47.417

我认为它的最佳方式（正确适用于[墨卡托投影图](https://en.wikipedia.org/wiki/Mercator_projection "墨卡托投影图")）：

```
extension UIView
{
    func addLocation(coordinate: CLLocationCoordinate2D)
    {
        // max MKMapPoint values
        let maxY = Double(267995781)
        let maxX = Double(268435456)

        let mapPoint = MKMapPointForCoordinate(coordinate)

        let normalizatePointX = CGFloat(mapPoint.x / maxX)
        let normalizatePointY = CGFloat(mapPoint.y / maxY)

        let pointView = UIView(frame: CGRectMake(0, 0, 5, 5))
        pointView.center = CGPointMake(normalizatePointX * frame.width, normalizatePointY * frame.height)

        pointView.backgroundColor = UIColor.blueColor()

        addSubview(pointView)
    }
} 
```

我在 UIView 上添加坐标的简单项目：[https ://github.com/Glechik/MapCoordinateDrawer](https://github.com/Glechik/MapCoordinateDrawer)

# java - JMS：本地代理 + HA

> ID：13891828
> 
> 赞同：0
> 
> 时间：2012-12-15T11:38:32.237
> 
> 标签：java, jms, activemq

有一个 tomcat 集群，每个 tomcat 节点生成可以由任何其他节点执行的“任务”。我希望任务由创建它的节点执行。

我认为为每个 tomcat 使用嵌入式代理并将其配置为存储转发网络是个好主意。问题是一个节点可能会关闭，然后应该由其他 tomcat 执行任务/消息，而不是等待当前的 tomcat 起床。

另一方面 - 当使用主/从集群时，如何优先考虑发送消息的节点？

如何在activemq中配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:36:20.987

本地消费者的优先级应该是默认的。[在 AMQ 文档中](http://activemq.apache.org/how-do-distributed-queues-work.html)：

> ActiveMQ 使用消费者优先级，因此本地 JMS 消费者的优先级始终高于存储转发网络中的远程代理。

然而，你不会真正实现你想要的。如果一个 tomcat 节点出现故障，嵌入式 ActiveMQ （以及仍然附加到该实例的任何消息）也会发生故障。消息不会自动复制到所有其他代理。

但是你问一些关于主/从集群的问题。您是否打算拥有经纪人网络或主/从设置？或者你打算有一个组合？

# java - 处理图像时出现内存不足异常。在java中

> ID：13891832
> 
> 赞同：0
> 
> 时间：2012-12-15T11:38:36.870
> 
> 标签：java, imgscalr

==================嗨这里是我的代码=========================== ===

这是一个例子

> imgscalr

```
package anil1.main;

import java.awt.image.BufferedImage;
import java.awt.image.BufferedImageFilter;
import java.io.File;

import javax.imageio.ImageIO;

import org.imgscalr.Scalr;

import static org.imgscalr.Scalr.*;

public class ImageScalar {
    public static void thum(String img) throws Exception
    {

         String path1 = "."; 

          String files;
          File folder = new File("C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\webapps\\Myapp\\images\\candidates");
          File[] listOfFiles = folder.listFiles(); 

          for (int i = 0; i < listOfFiles.length; i++) 
          {

           if (listOfFiles[i].isFile()) 
           {
           files = listOfFiles[i].getName();
               if (files.endsWith(".jpg") || files.endsWith(".png") || files.endsWith(".jpeg")|| files.endsWith(".JPEG") )
               {

            boolean token =false;
        String path=listOfFiles[i].getPath();

        BufferedImage originalImage = ImageIO.read(new File(path));

    //  BufferedImage thumbnail =Scalr.crop(originalImage, 140, 140, 140, 140);

        BufferedImage thumbnail=Scalr.resize(originalImage, Scalr.Method.ULTRA_QUALITY,Scalr.Mode.FIT_EXACT, 180, 250);

        String parent = "C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\webapps\\Myapp";
        String child = "\\Thumbs\\images\\candidates";

    String  total=parent+child+path.substring(path.lastIndexOf("\\"));
    String  total1=parent+child;
    System.out.println(total);

    File f=new File(total1);
    File f1=new File(path);
    File f2=new File(total);
    try{
        if(f1.exists()){
        if(f.exists())
        {

            System.out.println("from if");
        ImageIO.write(thumbnail, "jpeg", f2);

        }
        else 
        {
            System.out.println("from else");
            f.mkdirs();
        ImageIO.write(thumbnail, "jpeg", f2);

        }}
        if (new File(total1).exists())
        token=true;

        System.out.println(token);

               }finally{
                   originalImage.flush();  
                   thumbnail.flush();
                f=null;   
                f1=null;
                thumbnail=null;
                originalImage=null;
               }
             }//if
          }//for
    }//main

    }//class

public static void main(String[] args)throws Exception {
    thum("");
}
} 
```

处理一些图像后，我得到了以下异常

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.awt.image.DataBufferInt.<init>(Unknown Source)
    at java.awt.image.Raster.createPackedRaster(Unknown Source)
    at java.awt.image.DirectColorModel.createCompatibleWritableRaster(Unknown Source)
    at java.awt.image.BufferedImage.<init>(Unknown Source)
    at org.imgscalr.Scalr.createOptimalImage(Scalr.java:2006)
    at org.imgscalr.Scalr.scaleImage(Scalr.java:2133)
    at org.imgscalr.Scalr.scaleImageIncrementally(Scalr.java:2275)
    at org.imgscalr.Scalr.resize(Scalr.java:1711)
    at anil1.main.ImageScalar.thum(ImageScalar.java:40)
    at anil1.main.ImageScalar.main(ImageScalar.java:114) 
```

我无法找到解决方案，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:44:47.927

代码很难阅读，因为它没有正确缩进，但似乎您一次在内存中处理一个图像，所以如果这导致 OutOfMemoryError，那么除了增加 VM 的内存之外，您别无选择，或者找一个使用更少内存的库来做同样的事情。

要增加堆内存，请使用该`-Xmx`标志来启动您的程序。例如，对于 512 MB 的堆，您可以使用

```
java -Xmx512m my.MainClass 
```

# iphone - 如何在 ios 中使用 MIM 图表库创建水平条形图？

> ID：13891833
> 
> 赞同：0
> 
> 时间：2012-12-15T11:38:44.493
> 
> 标签：iphone, ios

我在 xcode (IOS) 中使用 MIM 图表库创建了一个垂直条形图。现在我想使用相同的 Mim 图表库在水平视图中创建一个条形图。

是否可以在水平视图中创建条形图？我尝试了一些代码，但没有得到那个水平视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:52:36.397

Try this one [https://github.com/eul/ILGraphics](https://github.com/eul/ILGraphics) There is Demo project where you can find how to use it

# java - 从 Java 连接到 Access DB

> ID：13891834
> 
> 赞同：-2
> 
> 时间：2012-12-15T11:38:47.057
> 
> 标签：java, database, ms-access

如何从java连接到访问数据库？

我有：

*   完全安装的 java sdk-jdk & jre
*   和 apache derby 数据库。
*   我的访问是2007版本。
*   操作系统视窗 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:49:10.250

你需要这样的东西：

```
public class myConnection 
{

// JDBC driver name and database URL
private static final String JDBC_DRIVER = "sun.jdbc.odbc.JdbcOdbcDriver";
private static final String DATABASE_URL ="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=.\\database.accdb";

// declare Connection for accessing and querying database
private Connection connection;

// constructor connects to database
public myConnection () 
{ 
    try 
    {
        Class.forName(JDBC_DRIVER);
        connection = DriverManager.getConnection(DATABASE_URL);

    } 

    catch (SQLException sqlException)
    {
        JOptionPane.showMessageDialog(null, sqlException.getMessage(),
                "Database Error", JOptionPane.ERROR_MESSAGE);

        System.exit(1);
    }

    catch (ClassNotFoundException classNotFound)
    {
        JOptionPane.showMessageDialog(null, classNotFound.getMessage(),
                "Driver Not Found", JOptionPane.ERROR_MESSAGE);

        System.exit(1);
    }
}

public void closeConnection()
{
    try 
    {
        connection.close();
    }

    catch (SQLException sqlException)
    {
        JOptionPane.showMessageDialog(null, sqlException.getMessage(),
                "Database Error", JOptionPane.ERROR_MESSAGE);

        System.exit(1);
    }
}

public Connection getConnection()
{
    return connection;
} 
```

}

# java - 为什么我在使用三元运算符时不能抛出异常

> ID：13891841
> 
> 赞同：14
> 
> 时间：2012-12-15T11:40:16.377
> 
> 标签：java, android

这不会编译并给出以下错误：`Illegal start of expression`. 为什么？

```
public static AppConfig getInstance() {
    return mConfig != null ? mConfig : (throw new RuntimeException("error"));
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T13:45:36.860

你可以写一个实用方法

```
public class Util
{
  /** Always throws {@link RuntimeException} with the given message */
  public static <T> T throwException(String msg)
  {
      throw new RuntimeException(msg);
  }
} 
```

并像这样使用它：

```
public static AppConfig getInstance() 
{
    return mConfig != null ? mConfig : Util.<AppConfig> throwException("error");
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-15T11:42:50.300

这是因为 java 中的三元运算符采用 形式`expression ? expression : expression`，并且您将语句作为最后一部分。这是没有意义的，因为语句没有给出值，而表达式却给出了值。当 Java 发现条件为假并尝试给出第二个值时，它意味着什么？没有价值。

三元运算符旨在让您在不​​使用完整`if`语句的情况下快速在两个变量之间做出选择 - 这不是您想要做的，所以不要使用它，最好的解决方案很简单：

```
public static AppConfig getInstance() {
    if (mConfig != null) {
        return mConfig;
    } else {
        throw new RuntimeException("error");
    }
} 
```

三元运算符不是为了产生副作用而设计的——虽然它可以产生副作用，但阅读它的人不会想到这一点，所以最好用一个真实的`if`陈述来说明清楚。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-12T12:07:46.073

如果它对某人有帮助，这是使用 java 8+ 可选的答案：

```
public static AppConfig getInstance() {
    return Optional.ofNullable(mConfig).orElseThrow(() -> new RuntimeException("error"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:41:54.077

您正在尝试返回一个`throw new RuntimeException("error")`. 这就是您收到错误的原因。因为`true`万一你回来`AppConfig`了，`false`万一你回来了`exception`。

# jquery - Flexslider 通过 ajax 加载

> ID：13891842
> 
> 赞同：0
> 
> 时间：2012-12-15T11:40:21.510
> 
> 标签：jquery, ajax, flexslider

我正在使用 jQuery 插件 easytabs 从另一个页面加载 HTML。HTML 可能包含一个 jQuery flexslider，但由于 JavaScript 已经运行，滑块在加载后无法工作。这是我的代码：

```
<ul class="portfolio-thumbnails">
    <li><a href="portfolio.html #item1" data-target="#item1">Load via ajax</a></li>
</ul>

<div class="panel-container">
    <div id="item1" class="portfolio-item"></div> /* The slider loaded from the ajax call will be appended to this div */
</div> 
```

当我单击通过 ajax 加载链接时，我尝试调用 flexslider，如下所示：

```
$(".portfolio-thumbnails li a").click(function () { 
    $('.flexslider').flexslider({
        animation: "slide"
    });
}); 
```

...但这仅在我单击时第二次有效。我猜想 flexslider 脚本是在通过 ajax 加载 HTML 之前被调用的。我也尝试过从外部页面（portfolio.html）调用 flexslider 脚本，但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:51:39.267

你能把它放在你`success`的简单标签 ajax 请求的回调中吗？将以下内容附加到您的 easytab 事件中：

```
 .bind('easytabs:ajax:complete', function() {
    $('.flexslider').flexslider({
        animation: "slide"
    });
  }); 
```

在文档中的[事件挂钩](http://os.alfajango.com/easytabs/#event-hooks)下找到：

点击标签后不加载的响应

![在此处输入图像描述](../Images/90f4060485107a5716f7afedbede6b5c.png)

# box-api - 在 V2 API 请求中使用从 v1 API 获取的身份验证令牌

> ID：13891844
> 
> 赞同：1
> 
> 时间：2012-12-15T11:40:45.893
> 
> 标签：box-api

由于我找不到如何使用我的 Box 凭据对 V2 API 进行身份验证，我尝试将来自 V1 API 的身份验证令牌与 V2 请求一起使用。

我发现了一些奇怪的东西，我想知道是否有问题。

用于验证 V2 请求的标头文档对 curl 命令的描述如下）： curl -k -L [https://api.box.com/2.0/files/5053864602/content](https://api.box.com/2.0/files/5053864602/content) -H "Authorization: Bearer AUTH_TOKEN"

使用 curl 我什么也得不到，甚至没有错误消息。但是，我用 Postman 尝试了这个请求，在响应中我可以看到令牌无效。

在这个论坛中，我发现标题可能有不同的形式，包括**api_key**所以我尝试了以下方法： curl -k -L [https://api.box.com/2.0/files/5053864602/content](https://api.box.com/2.0/files/5053864602/content) -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"

并且此请求有效，因为我可以像使用 V1 API 调用一样获取文件的内容。

BOX 的人可以解释发生了什么吗？我怀疑我不是唯一一个有这个问题的人......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:25:05.380

Box API 现在支持 OAuth 2，它具有完全修改的身份验证流程。您可以在此处找到有关如何将 OAuth 2.0 与 Box 一起使用的说明：http: [//developers.box.com/oauth/](http://developers.box.com/oauth/)

V2 API 仍然支持 V1 样式的身份验证，但最终将被弃用。但是，**如果您现在开始针对 Box API 进行构建，则应该使用 OAuth 2**以避免将来不得不做双重工作和移植。

V1 风格的身份验证和 OAuth 2.0 之间存在一些差异，但值得注意的是，在 OAuth 2.0 中，您不必使用 API 密钥（现在在 OAuth 2.0 中称为“客户端 ID”）签署 API 请求，只有 access_token 您通过身份验证过程。

您可以在我之前的链接中阅读有关我们实施 OAuth 2 的更多信息，也可以在[此处](http://oauth.net/2/)阅读有关一般规范的信息。

# c++ - 无法用新值覆盖 stringstream 变量

> ID：13891856
> 
> 赞同：5
> 
> 时间：2012-12-15T11:43:19.337
> 
> 标签：c++, stringstream

```
string whatTime(int seconds) {

 string h,m,s,ans;
 stringstream ss;

 ss << (seconds/3600); 
 seconds -= (3600*(seconds/3600));
 ss >> h;
 ss.str("");

 ss << (seconds/60);
 seconds -= (60*(seconds/60));
 ss >> m;
 ss.str("");

 ss << seconds;
 ss >> s;

 return (h + ":" + m + ":" + s );

} 
```

上述程序的输出采用这种格式“some_value::”我也尝试过 ss.str(std::string()) 和 ss.str().clear() 但即使这样也不起作用。有人可以建议任何方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T12:00:02.943

您已经使用[正确](https://stackoverflow.com/a/2848109/560648)清空了字符串缓冲区`ss.str("")`，但您还需要使用 清除流的错误状态`ss.clear()`，否则在第一次提取后将不会尝试进一步读取，这会导致 EOF 条件。

所以：

```
string whatTime(int seconds) {

 string h,m,s,ans;
 stringstream ss;

 ss << (seconds/3600); 
 seconds -= (3600*(seconds/3600));
 ss >> h;
 ss.str("");
 ss.clear();

 ss << (seconds/60);
 seconds -= (60*(seconds/60));
 ss >> m;
 ss.str("");
 ss.clear();

 ss << seconds;
 ss >> s;

 return (h + ":" + m + ":" + s );

} 
```

但是，如果这是您的完整代码并且您出于任何原因不需要各个变量，我会这样做：

```
std::string whatTime(const int seconds_n)
{
    std::stringstream ss;

    const int hours   = seconds_n / 3600;
    const int minutes = (seconds_n / 60) % 60;
    const int seconds = seconds_n % 60;

    ss << std::setfill('0');
    ss << std::setw(2) << hours << ':'
       << std::setw(2) << minutes << ':'
       << std::setw(2) << seconds;

    return ss.str();
} 
```

这要简单得多。[看到它在这里工作](http://ideone.com/pZ1jX2)。

在 C++11中，您可以使用[完全避免流](https://stackoverflow.com/questions/8065413/stdlexical-cast-is-there-such-a-thing)`std::to_string`，但这不允许您进行零填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T11:49:44.723

您需要调用 stringstream 的 clear 方法，而不是使用`ss.clear()`.

```
string whatTime(int seconds) {

 string h,m,s,ans;
 stringstream ss;

 ss << (seconds/3600); 
 seconds -= (3600*(seconds/3600));
 ss >> h;
 ss.str("");
 ss.clear();

 ss << (seconds/60);
 seconds -= (60*(seconds/60));
 ss >> m;
 ss.str("");
 ss.clear();

 ss << seconds;
 ss >> s;

 return (h + ":" + m + ":" + s );

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:17:29.793

你只需要字符串流，没有别的。其余的都是纯粹的开销。

```
string whatTime(int seconds) {
    stringstream ss;

    ss << setFill('0');
    ss << setw(2) << (seconds/3600) << ":"         // hours
       << setw(2) << ((seconds / 60) % 60) << ":"  // minutes
       << setw(2) << (seconds%60);                 // seconds

    return ss.str();
} 
```

# spring - 在春季 RMI 中出现错误

> ID：13891857
> 
> 赞同：2
> 
> 时间：2012-12-15T11:43:19.673
> 
> 标签：spring, rmi

我在开发 spring RMI 应用程序时遇到以下错误是代码..

可序列化的类..

```
 package co.tcs.pojo;
    import java.io.Serializable;      
    public class Message implements Serializable {
         private final String message;    
         public Message(String message) { this.message = message; }    
         public String getMessage() { return message; } 
        } 
```

界面...

```
package com.tcs;
import co.tcs.pojo.Message;

interface EasyServer {
     Message exchangeMessage(String user);
    } 
```

实现类和服务器类也......

```
 package com.tcs;
    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;
    import org.springframework.context.support.FileSystemXmlApplicationContext;

    import co.tcs.pojo.Message;    
    public class EasyServerImpl implements EasyServer {    
         public Message exchangeMessage(String user) {
             return new Message(user + ", Spring rocks!");
         }    
         public static void main(String[] args) {    
             try{
                    ApplicationContext appctx=new FileSystemXmlApplicationContext("src/SpringContainer.xml");                   
                    System.out.println("RMI Server started.....>>");
                }
                catch(Exception e)
                {
                    System.out.println("Exception : ServerProgram : main() : ");                    System.out.println("----->");
                    e.printStackTrace();
                    System.out.println("<-----");               }
         }
        } 
```

最后是xml ..

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="easyServer" class="com.tcs.EasyServerImpl">
</bean>

<bean class="org.springframework.remoting.rmi.RmiServiceExporter">
 <!-- register the impl as the 'easyServerService' -->
 <property name="serviceName" value="easyServerService"/>
 <property name="service" ref="easyServer"/>
 <property name="serviceInterface" value="EasyServer"/>
 <!-- defaults to 1099 -->
 <property name="registryPort" value="1199"/>
</bean>

</beans> 
```

封装结构的快照..

[http://imageshack.us/photo/my-images/607/sd1l.jpg/](http://imageshack.us/photo/my-images/607/sd1l.jpg/)

我得到的错误是..

```
15 Dec, 2012 5:01:10 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@70eb7859: display name [org.springframework.context.support.FileSystemXmlApplicationContext@70eb7859]; startup date [Sat Dec 15 17:01:10 IST 2012]; root of context hierarchy
15 Dec, 2012 5:01:10 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from file [D:\Pos2Workspace\ztestRmi\src\SpringContainer.xml]
15 Dec, 2012 5:01:10 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.context.support.FileSystemXmlApplicationContext@70eb7859]: org.springframework.beans.factory.support.DefaultListableBeanFactory@28bb0d0d
15 Dec, 2012 5:01:10 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@28bb0d0d: defining beans [easyServer,org.springframework.remoting.rmi.RmiServiceExporter#0]; root of factory hierarchy
15 Dec, 2012 5:01:10 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@28bb0d0d: defining beans [easyServer,org.springframework.remoting.rmi.RmiServiceExporter#0]; root of factory hierarchy
Exception : ServerProgram : main() : 
----->
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.remoting.rmi.RmiServiceExporter#0' defined in file [D:\Pos2Workspace\ztestRmi\src\SpringContainer.xml]: Initialization of bean failed; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type [java.lang.String] to required type [java.lang.Class] for property 'serviceInterface'; nested exception is java.lang.IllegalArgumentException: Cannot find class [EasyServer]. Root cause: java.lang.ClassNotFoundException: EasyServer
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:485)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:251)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:169)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:170)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:413)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:735)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:369)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:124)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:68)
    at com.tcs.EasyServerImpl.main(EasyServerImpl.java:18)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert property value of type [java.lang.String] to required type [java.lang.Class] for property 'serviceInterface'; nested exception is java.lang.IllegalArgumentException: Cannot find class [EasyServer]. Root cause: java.lang.ClassNotFoundException: EasyServer
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:395)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1313)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1042)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
    ... 13 more
Caused by: java.lang.IllegalArgumentException: Cannot find class [EasyServer]. Root cause: java.lang.ClassNotFoundException: EasyServer
    at org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:252)
    at org.springframework.beans.propertyeditors.ClassEditor.setAsText(ClassEditor.java:63)
    at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:341)
    at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:325)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:192)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:138)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:390)
    ... 17 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:52:22.553

根本原因：java.lang.ClassNotFoundException：EasyServer

接口 EasyServer 在 com.tcs 包中

你可能想试试

```
<property name="serviceInterface" value="com.tcs.EasyServer"/> 
```

# algorithm - 反向矩形包装

> ID：13891858
> 
> 赞同：5
> 
> 时间：2012-12-15T11:43:24.737
> 
> 标签：algorithm, rectangles, vertices, packing

我有一个由正方形组成的连接形状，例如，拿一张方格纸，沿着现有的线画一条线，这条线在它的开始处结束，并且不交叉。

现在的目标是找到一种算法（*不是蛮力*），用尽可能少的非重叠矩形填充这个形状。

我正在寻找最佳解决方案。从图像中可以看出，天真的贪心方法（取最大的矩形）不起作用。

![最佳](../Images/cb8c1d05ae342bf970dc76df98156e07.png "最优解") *（最佳）*

![贪婪的](../Images/a8da1d1c080a75d0823301536c7b2bbb.png "贪婪的解决方案") *（贪婪的）*

我的场景是减少顶点，但我确信还有其他用例。

*注意：这个问题似乎很基本，但我无法在其他地方找到解决方案。另外，这个问题是NP难的吗？*

*编辑：我刚刚意识到，在我的场景中，用尽可能少的非重叠**三角形**填充形状会产生更好的结果。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-29T18:41:13.203

自从我问了最初的问题以来，我花了很多时间研究这个。对于第一个问题（最好用矩形填充形状），我在标题“Optimal Greedy Meshing”下写了解决方案：

[http://blackflux.wordpress.com/2014/03/01/meshing-in-voxel-engines-part-2/](http://blackflux.wordpress.com/2014/03/01/meshing-in-voxel-engines-part-2/)

复杂性实际上比对没有孔的多边形进行最佳三角剖分更好（更快）。最慢的部分是 Hopcroft-Karp 算法。

链接的博客文章中还讨论了将形状视为多边形。请注意，我也在考虑漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:03:52.737

第一个问题比三角形更难；对于三角形，请参见算法

[http://en.wikipedia.org/wiki/Polygon_triangulation](http://en.wikipedia.org/wiki/Polygon_triangulation)

它可以在没有任何额外顶点的情况下做到这一点。

# iphone - UIDatePicker 未更新视图中的标签

> ID：13891860
> 
> 赞同：0
> 
> 时间：2012-12-15T11:43:31.017
> 
> 标签：iphone, objective-c, ios5, uilabel, uidatepicker

我正在尝试在我在情节提要中为该视图设置的标签上显示日期，但是每次我尝试更改日期时，它只显示今天的日期...请在我的 .h 文件中提供帮助

```
IBOutlet UILabel *datelabel;
UIActionSheet *pickerViewPopup;
UIDatePicker *pickerView;
-(IBAction)dateButtonClicked:(id)sender; 
```

`

在我的 .m 文件中

```
-(IBAction)dateButtonClicked:(id)sender {

[self showPickerView]; 
```

}

```
-(void)showPickerView {

pickerViewPopup = [[UIActionSheet alloc] initWithTitle:nil delegate:self    cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

pickerView = nil;
pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 44, 0, 0)];
((UIDatePicker*)pickerView).datePickerMode = UIDatePickerModeDateAndTime;

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc]  initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self  action:@selector(cancelButtonPressed:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
[barItems addObject:doneBtn];

[pickerToolbar setItems:barItems animated:YES];  

[pickerViewPopup addSubview:pickerToolbar];
[pickerViewPopup addSubview:pickerView];
[pickerViewPopup showInView:self.view];
[pickerViewPopup setBounds:CGRectMake(0, 0, 320, 464)];
}
-(void)doneButtonPressed:(id)sender {

NSDate *myDate = pickerView.date;    
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"cccc, MMM d, hh:mm aa"];
NSString *prettyVersion = [dateFormat stringFromDate:myDate];
self.datelabel.text=prettyVersion;
[pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
}

-(void)cancelButtonPressed:(id)sender{
[pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:41:18.540

您已将`datelabel`其视为实例变量而不是@property。您无法使用`self.datelabel`. 所以在你的`doneButtonPressed:`...

更改以下行

```
self.datelabel.text=prettyVersion; 
```

和

```
datelabel.text=prettyVersion; 
```

顺便说一句... XCode 必须在这一行显示警告，不是吗？

# rest - 带有自己的参数/值的 Ruby on Rails redirect_to

> ID：13891861
> 
> 赞同：0
> 
> 时间：2012-12-15T11:43:37.747
> 
> 标签：rest, redirect, ruby-on-rails-3.2, httprequest

我有一个非常相似的问题： [Rails redirect_to with params](https://stackoverflow.com/questions/9661611/rails-redirect-to-with-params/13886317#13886317)

所以，我从这个线程中了解到，我可以像这样将参数添加到控制器 redirect_to：

```
format.html { redirect_to @order, :test => "test", notice: 'Order was successfully created.' } 
```

据我了解，有了这个，我应该能够在视图中显示 :test 的值。但是如果我尝试像这样访问它

```
<p>
  <b>Zahlungsart:</b>
   <%= params[:test] %>
</p> 
```

什么都没发生。

它似乎也不是参数原因的一部分

```
<%= params.inspect %> 
```

只是显示

```
{"action"=>"show", "controller"=>"orders", "id"=>"32"} 
```

我不知道这里到底出了什么问题……redirect_to 是那个，默认情况下由控制器的“创建”操作调用。

到目前为止，我通过仅定义视图`$test`中可访问的内容来解决`<%= $test %>`此问题......但这对我来说似乎非常难看（不是吗？？？）。

为了清楚起见，我要传递给视图的参数不是像控制器默认定义中的@order 这样的类的实例。它只是一个带有我想传递给视图的值的变量。什么是正常的（RESTful <-如果我以正确的方式理解这个表达式......）只是添加一个参数？

提前感谢您再次启发我;-)

问候

托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:47:50.330

你应该像这样使用它

```
format.html { redirect_to order_path(@order, :test => "test"), notice: 'Order was successfully created.' } 
```

# mysql - MySQL，如何从查询（谁使用 LIMIT）中获取返回的行数并保存行集。（存储过程/函数）和按行集语句的数量

> ID：13891865
> 
> 赞同：0
> 
> 时间：2012-12-15T11:44:27.637
> 
> 标签：mysql, stored-procedures, count, rowset

例如表 x 有 9 条记录

x = 5

我查询：

```
 Select * From `x` LIMIT 0,5 
```

// 我需要来自这个查询的数据和行集计数。

// 变量 count -- 存储第一次查询返回的行数，

当第一个查询行集小于 5 行时，则

我从表 z 进行新查询

```
 Select * From `z` Limit 0,(5 - count)

  -------------------------------- 
```

FOUND_ROWS 的伎俩不起作用。

[http://pastebin.com/1kKD0wqC](http://pastebin.com/1kKD0wqC)

```
 -------------------------------- 
```

问题：

如何在存储过程/函数（MySQL）中做到这一点？

如何从一个查询中的第一个查询（行集和返回的行数）获取？

```
 -------------------------------- 
```

目标：

工作后功能应该返回

行集的总和（查询 1 和 2）。

或者

行集查询 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:49:34.587

```
Select * From `z` Limit 0,(5 - (SELECT COUNT(*) FROM `x` LIMIT 0,5)) 
```

没有检查它是否有效，但它应该。我参考手册： [http ://dev.mysql.com/doc/refman/5.0/en/subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:25:18.070

我找到了解决方案：

MySQL（存储过程的内容）：

```
Set @tmp = 0;
Select `field_1`, `field_2` From `table_1` Where @tmp := @tmp + 1 LIMIT 0 ,5; 
```

// 我们有行集和会话变量 (@tmp) - 返回的行数

* * *

@提示

```
 @tmp := @tmp + 1 
```

它必须在 where 的所有条件之前。

例如：

```
[.....] Where @tmp := @tmp + 1 And `field_2` > 1 LIMIT 0, 5; 
```

将永远返回 1...

* * *

正确版本

```
[.....] Where `field_2` > 1 And  [Other conditions] And @tmp := @tmp + 1  LIMIT 0, 5; 
```

# java - 无法连接到mysql中的特定架构

> ID：13891871
> 
> 赞同：3
> 
> 时间：2012-12-15T11:44:56.180
> 
> 标签：java, mysql, jdbc

我正在尝试将 jdbc 连接到 mysql 服务器中的特定模式，模式名称正在挖掘

当我尝试连接时，我可以访问所有数据库，因此执行语句适用于我的数据库中的所有方案，而不是仅适用于“挖掘”

这就是我建立连接的方式：

```
 public class Mining {
        Connection conn;

        void createConnection() {
            try {
                Class.forName("com.mysql.jdbc.Driver"); 
                this.conn = DriverManager.getConnection(
                "jdbc:mysql://localhost/?currentSchema=mining","admin","admin" );
//I ALSO TRIED THIS:    "jdbc:mysql://localhost/mining","admin","admin"

            } catch (SQLException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
        } 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T11:47:52.797

尝试，

```
private Connection connect = DriverManager
              .getConnection("jdbc:mysql://localhost/mining?"
            + "user=admin&password=admin"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-18T12:34:29.657

```
String databaseURL = jdbc:mysql://hostName:portNumber/schemaName? 

Connection connectionObj = DriverManager.getConnection(databaseURL,userName,password); 
```

# android - 服务崩溃（或自动重启）

> ID：13891876
> 
> 赞同：0
> 
> 时间：2012-12-15T11:46:18.913
> 
> 标签：android

我有一项在 Android 设备启动后运行的服务。这每天执行两个通知。但我有一个问题：看起来服务崩溃或自动重新启动。通知也不会在指定时间执行。我怎样才能解决这个问题？有时我看到吐司`Service Created`和`Service Started`。谢谢！

编码：

```
public class UnUsedService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();
    }
    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();
    }

    private PendingIntent pendingIntent;

    @SuppressWarnings("deprecation")
    @Override
    public void onStart(Intent intent, int startId) {

        super.onStart(intent, startId);

        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

        Calendar cal1 = Calendar.getInstance();
        cal1.set(Calendar.HOUR_OF_DAY, 05); //midday
        cal1.set(Calendar.MINUTE, 45);
        cal1.set(Calendar.SECOND, 00);

        Calendar cal2 = Calendar.getInstance();
        cal2.set(Calendar.HOUR_OF_DAY, 17);//8pm for example
        cal2.set(Calendar.MINUTE, 30);
        cal2.set(Calendar.SECOND, 00);

        AlarmManager am = (AlarmManager)getApplicationContext().getSystemService  (Context.ALARM_SERVICE);
        Intent intent2 = new Intent(getApplicationContext(), AlarmReceiver.class);
        PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), 0, intent2, PendingIntent.FLAG_UPDATE_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, cal1.getTimeInMillis(),cal2.getTimeInMillis(), pi);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:00:02.867

如果您的通知需要在特定时间运行，您应该使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来安排它们。这由 Android 保留，因此您的服务可以自由地被终止，并且警报将在必要时重新启动它。

听起来您目前正在让您的服务 24/7 运行，以便它可以每天做两次事情；这是一个糟糕的Android公民！使用`AlarmManager`代替将解决您的问题，并让您停止浪费资源。

# mysql - ERROR 1452 (23000)：无法添加或更新子行：外键约束失败

> ID：13891879
> 
> 赞同：13
> 
> 时间：2012-12-15T11:47:03.980
> 
> 标签：mysql, sql

当我执行以下 SQL 命令时：

```
INSERT INTO test_usershosts (RID,userid,hid,Usr,Pass) 
VALUES (NULL,1,1,"user","pass"); 
```

我收到以下错误消息：

```
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`dm`.`test_usershosts`, CONSTRAINT `test_usershosts_ibfk_1` FOREIGN KEY (`
userid`) REFERENCES `test_users` (`userid`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

我的桌子：

```
CREATE TABLE IF NOT EXISTS `test_users` (
`userid` int(11) NOT NULL AUTO_INCREMENT,
`username` varchar(10) NOT NULL DEFAULT '',
`password` varchar(50) NOT NULL DEFAULT '',
PRIMARY KEY (userid)
) ENGINE=InnoDB;

INSERT INTO `test_users` (`userid`, `username`, `password) VALUES
(1120, 'guest', '12250170a9624f336ca24');

CREATE TABLE IF NOT EXISTS `test_hosts` (
`hid` int(11) NOT NULL AUTO_INCREMENT,
`UID` int(11) NOT NULL,
`name` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
PRIMARY KEY (hid)
) ENGINE=InnoDB;

INSERT INTO `test_hosts` (`hid`, `UID`, `name`) VALUES (30, 10, 'MU');

CREATE TABLE IF NOT EXISTS `test_usershosts` (
`RID` int(11) NULL AUTO_INCREMENT,
`userid` int(11) ,
`hid` int(11) ,
`Usr` varchar(100) ,
`Pass` varchar(100) ,
PRIMARY KEY (RID),
INDEX (userid),
INDEX (hid),
FOREIGN KEY (userid) REFERENCES test_users (userid) 
    ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (hid) REFERENCES test_hosts (hid) 
    ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

我研究了许多类似的案例，但找不到任何解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-15T12:00:46.163

您收到该异常的原因是因为您在 table 上插入了一条记录，该记录`test_usershosts`的值`userID`不存在于 table 上`test_users`。与 的值相同`hid`也不会出现在 table 上`test_hosts`。

表`test_usershosts`依赖于表：`test_users`和 `test_hosts`。因此，请确保在 table 上插入记录时，和`test_usershosts`的值已经存在于父表中：和 .`hid``userid``test_users``test_hosts`

尝试执行这个查询，它肯定会被插入。

```
INSERT INTO test_usershosts (RID,userid,hid,Usr,Pass) 
VALUES (NULL,1120,30,'user','pass'); 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/52c21/1)

我在表上看到该`AUTO_INCREMENT`选项：`test_users`和 `test_hosts`, 不需要，因为您在两个表上执行的每个查询都提供值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T12:00:24.493

在`test_users`客人的`UserID`是`1120`和`test_hosts`隐藏= 30

你必须改变

```
INSERT INTO test_usershosts (RID,userid,hid,Usr,Pass) VALUES (NULL,1,1,"user","pass"); 
```

至：

```
INSERT INTO test_usershosts (RID,userid,hid,Usr,Pass) VALUES (NULL,1120,30,"user","pass"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-15T17:14:02.667

就我而言，以防它为某人服务。我一直在努力寻找解决方案，当将主键也标记为唯一时通常会发生这种情况。但在我的情况下，它只被标记为主要并且没有被标记为唯一，直到我注意到 unica 的选项是“打开的”并且我点击了它，直到那时我让自己建立关系。

**然后记录在案……检查您的主键是否也是唯一的。**

# cmake - CMake 中的自动变量

> ID：13891880
> 
> 赞同：0
> 
> 时间：2012-12-15T11:47:09.923
> 
> 标签：cmake

我有很多自定义 CMake 命令，所以我最终在构建脚本中重复了很多这种模式，例如

```
set(PREREQ ${CMAKE_CURRENT_SOURCE_DIR}/foo.txt ${CMAKE_CURRENT_SOURCE_DIR}/bar.txt)
add_custom_command(
    OUTPUT baz.txt
    COMMAND cat ${PREREQ} > baz.txt
    DEPENDS ${PREREQ}
)
add_custom_target(a ALL DEPENDS baz.txt) 
```

`$@`CMake ( ,等)中是否有 GNU Make 自动变量的等价物，`$<`所以我可以避免两次指定输入/输出（依赖项、输出和命令）？

我还能怎么弄干它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:27:53.510

使用自定义函数怎么样？对于您的示例脚本，这可能如下所示：

```
function (add_custom_command_with_target _targetName _output)
    add_custom_command(
        OUTPUT ${_output}
        COMMAND cat ${ARGN} > ${_output}
        DEPENDS ${ARGN}
    )
    add_custom_target(${_targetName} ALL DEPENDS ${_output})
endfunction() 
```

可以通过以下方式调用该函数：

```
add_custom_command_with_target(a baz.txt ${CMAKE_CURRENT_SOURCE_DIR}/foo.txt ${CMAKE_CURRENT_SOURCE_DIR}/bar.txt) 
```

在函数体中，您可以使用预定义变量`ARGN`，它保存最后一个预期参数之后的参数列表。这是最接近 GNU Make 的预定义变量的东西。

# function - 调用函数时将函数用作成员的内存成本

> ID：13891881
> 
> 赞同：4
> 
> 时间：2012-12-15T11:47:13.323
> 
> 标签：function, arguments

这是我在这里的第一篇文章。

我知道这个问题可能看起来很模糊，我会尽量弄清楚......

全球范围内不针对任何解释语言（我目前正在使用 C#，但我认为答案也应该适用于其他人......）

我想知道，这种类型的电话：

```
Afunction(var1,var2,AnotherFunction(var3,var2,AthirdFunction(Avector.z)),Mathf.RoundToInt(Avector.x)); 
```

运行速度将比：

```
Type var1 = avalue;
Type var2 = avalue;
Type var3 = avalue;
Type var4 = AthirdFunction(Avector.z);
Type var5 = Mathf.RoundToInt(Avector.x);
Type var6 = AnotherFunction(var3,var2,var4);

Afunction(var1,var2,var6,var5); 
```

我知道第二种方法更容易阅读，但它运行得更快，因为我知道我可能会广泛调用这个函数（比如说，在图形应用程序中，每一帧）。关于内存使用，最好在使用函数后立即创建更多变量以销毁它，还是直接在“Afunction”中编写所有内容，同时声明尽可能少的变量......

（并且为了理解：`Afunction(), AnotherFunction() and AthirdFunction()`已经在其他地方声明）

我希望这类问题不超出论坛使用规则...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:09:48.333

假设一个合理的编译器，您在 Afunction、AnotherFunction 和 AthirdFunction 中使用的算法对性能的影响比您上面询问的任何其他算法都大。通常，一旦您拥有最有效的功能，您就会担心您所询问的内容。

另外，编译器将内联函数调用，这意味着您可以调用

```
return_value = fx( A(), B() ); 
```

但是，如果您要查看编译器的汇编器输出通过什么，事情可能看起来不是那样的。

调用函数调用会产生开销，而系统和编译器架构决定了开销是多少。

如果这是一种解释型语言，如 awk 或 BASIC，那么第二个代码块，线性调用函数外部的东西，将运行得更快。或者更准确地说，它早在 1980 年代就在 DEC PDP 上做了。

# c#-4.0 - 使用 C# 在数据表中检查重复行

> ID：13891887
> 
> 赞同：0
> 
> 时间：2012-12-15T11:48:05.460
> 
> 标签：c#-4.0

我有如下数据表。这里不允许第 2、3、4、5 行。我如何使用 C# 验证这种情况。请帮忙。这里的列数不是固定的。

* * *

```
 A             B             C
  A             B             C
  A             B             
  A                           C
                B             C
  A             B             B
  B             B             C
  A             C             B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:47:16.943

**C# 与 LinQ**

此函数消除列中的重复值和空值。如果您要查找的不是 null，那么您只需将“DBNull”更改为您想要的。

```
public static DataTable FilterDataTable(DataTable table) 
    {
        // Erase duplicates
        DataView dv = new DataView(table);
        table = dv.ToTable(true, table.Columns.Cast<DataColumn>().Select(x => x.ColumnName).ToArray()); 

        // Get Null values
        List<DataRow> toErase = new List<DataRow>();
        foreach (DataRow item in table.Rows)            
            for (int i = 0; i < item.ItemArray.Length; i++)
            {
                if (item.ItemArray[i].GetType().Name == "DBNull")
                { toErase.Add(item); break; }

            }            
        //Erase Null Values
        foreach (DataRow item in toErase)            
            table.Rows.Remove(item);

        return table;            
    } 
```

# opengl-es - 如何仅对一个对象禁用 GL_DEPTH_TEST

> ID：13891888
> 
> 赞同：0
> 
> 时间：2012-12-15T11:48:34.440
> 
> 标签：opengl-es

我有一个问题...是否可以仅对一个对象禁用 GL10.GL_DEPTH_TEST？在我的示例中，有一个带有 Alphashadow 纹理的 Groundplane，我想为我的 Carmodel 禁用 DEPTH_TEST 以伪造阴影。其他对象不应该禁用 DEPTH_TEST，所以我不会通过它们看到阴影。

这是一个屏幕截图（阴影没有完美地转换为它们的对象，但我想你会得到我的问题） [https://dl.dropbox.com/u/18265107/special/screenshot.png](https://dl.dropbox.com/u/18265107/special/screenshot.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:04:32.483

Anything you disable depth-test for will show on top of other stuff. You can choose to do, or not do, that for anything you like. However I don't think it will fix your shadows.

To achieve what you were wanting, disabling depth-test isn't enough, and you would need to render things in the right order:

1.  render the ground.
2.  render the car.
3.  render the shadows, with depth-test disabled.
4.  render the rest of the environment.

However this assumes the ground is flat, and that shadows don't cast onto other scene objects, which will probably look wrong.

# java - 在java中我如何设计一个既通用又简单易读的api

> ID：13891891
> 
> 赞同：4
> 
> 时间：2012-12-15T11:48:49.520
> 
> 标签：java, api, oop

我的例子是我希望我的用户打电话

```
findCustomers(...) 
```

现在我的问题是关于这种方法的论点。我有一个

```
Customer.java 
```

对象，我希望用户能够使用该库按客户名称和客户 ID 进行搜索。

现在我不想创建多个方法

```
findCustomerById(String id)
findCustomerByName(String name)
findAllCustomers() 
```

相反，我想做的是一个通用的 findCustomer

```
/** if you pass only custoer.name and rest of fields are null will search by name,
if you pass a null custoer object will return all customers, if you pass both custoer id and his name will search by both fields). **/
findCustomer(Customer customer) 
```

现在我有一个通用的 api 方法，但我不喜欢在对象中传递空值，我不喜欢空值。

有人对这样的 api 有明确的最佳实践吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T11:54:39.267

用于查询的流体 api 之类的东西怎么样：

```
List<Customer> matches = find(new CustomerQuery().withName("john(.*)").withId(42)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T11:59:41.353

您尝试构建的内容称为[*Query By Example*](http://en.wikipedia.org/wiki/Query_by_Example)。没关系，但它有局限性：您的`Customer`类被重新用作查询参数，使其某些代码无用或适得其反。例如，如果您添加一个要求名称仅包含字母的验证，您将无法使用通配符查询名称。

解决此问题的一种方法是提供专门设计用于处理查询参数的查询构建器类。查询对象本身可以包装`Map<String,Object>`用户传递的参数绑定，让您的查询 API 将其拆开，并将相应的数据传递给底层数据存储的查询。

```
QueryObject<Customer> qObj = new QueryObject(Customer.class);
qObj.setParameter("FirstName", "Joe");
qObj.setParameter("LastName", "S*");
qObj.setParameter("ID", 123);
List<Customer> cust = findCustomers(qObj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:52:25.973

而不是传递一个我认为有许多其他方法的客户对象，你可以有

```
findCustomer(String id, String name); // id or name can be null. 
```

或 CustomerSearch 对象，该对象可以具有这些或可能具有多个 id 和名称。

# c# - 在 Unity 中，如何将值从一个脚本传递到另一个脚本？

> ID：13891892
> 
> 赞同：27
> 
> 时间：2012-12-15T11:49:01.123
> 
> 标签：c#, unity3d

在 Unity 中，我希望一个对象具有所有其他对象都可以访问的下降速度变量。由于各种原因，我不能使用内置的重力来做我想做的事情。

**如何重复访问一个对象中的变量，以便在它更新时从另一个对象获取更新后的变量？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-15T14:00:14.737

有几种方法可以实现这一点。

如果您希望速度变量由附加到游戏对象的组件控制`MyObject`

```
public class SpeedController : MonoBehaviour
    public float speed;
    // maybe you want restrict this to have read access, then you should use a property instead 
```

在其他课程中，您可以：

```
GameObject go = GameObject.Find ("MyObject");
SpeedController speedController = go.GetComponent <SpeedController> ();
float courrentSpeed = speedController.speed; 
```

注意只有一个名为 MyObject 的对象，否则事情会变得一团糟。

或者，您可以`SpeedController`在需要访问的每个类中定义一个成员，`speed`并通过在 Unity 编辑器中拖放来设置引用。然后保存查找，但是如果在许多类中需要，这当然很不方便。

* * *

另一种方法是创建一个包含`speed`变量并具有的单例：

```
public class MyGlobalSpeedController {
    private static MyGlobalSpeedController instance = null;
    public static MyGlobalSpeedController SharedInstance {
        get {
            if (instance == null) {
                instance = new MyGlobalSpeedController ();
            }
            return instance;
        }
    }
    public float speed;
} 
```

所以所有类都可以访问这个：

```
float currentSpeed = MyGlobalSpeedController.SharedInstance.speed 
```

* * *

正如 Jan Dvorak 在评论部分所说：

```
public class SpeedController : MonoBehaviour
    public static float speed; 
```

* * *

**[更新]** 感谢 Jerdak。是的[Component.SendMessage](http://docs.unity3d.com/Documentation/ScriptReference/Component.SendMessage.html)应该绝对在列表中：

```
go.SendMessage("GetFallingSpeed"); 
```

同样，您需要参考`go`第一个解决方案中描述的内容。

这个问题还有更多的解决方案。如果您正在考虑在所有场景中都处于活动状态的游戏对象，您应该看看[Unity 单例管理器类](https://stackoverflow.com/questions/13730112/unity3d-singleton-manager-classes)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-16T14:24:56.180

如果我是你，我会把这个速度变量设为“静态公共”，这样你就可以从任何地方访问它。您应该始终避免使用“find.anything”等功能，它们非常慢。你没有理由去寻找你确切知道它在哪里的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-23T13:11:12.513

> 如果它在 fixedUpdate 中 – Martin j

似乎它在 Awake 中也很有效。两个脚本都添加到同一个 GameObject 中。

```
public class FirstScript : MonoBehaviour {
    protected internal GameObject myobject;
private void Awake() {
       myobject = (GameObject)Instantiate(Resources.Load("nameofprefab"));
       myobject.transform.parent = gameObject.transform;
... 
```

```
public class SecondScript : MonoBehaviour {
    private GameObject myobject;
private void Awake() {
       myobject = gameObject.GetComponent<FirstScript>().myobject;
       myobject.SetActive(false); //for example
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T08:26:44.310

```
other.GetComponent<class name>().object name; 
```

# phpmyadmin - 删除 phpmyadmin 中的特定列

> ID：13891895
> 
> 赞同：2
> 
> 时间：2012-12-15T11:49:11.310
> 
> 标签：phpmyadmin, row, sql-delete

我需要删除特定列的列表这里是一个例子

我有一个包含“数字”和“城市”的表格

```
numbers    city

55         madrid  
55         no  
56         italia  
56         no  
57         paris  
57         no 
```

我只需要为每个号码保留“否”城市。我试过这个：

```
DELETE FROM mytable WHERE numbers (55,56,57) and city (madrid,italia,paris) 
```

我知道这行不通，但它只是为了让您了解我需要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:49:27.590

你应该写： DELETE FROM mytable WHERE numbers **IN** (55,56,57) and city **IN** ( **'madrid','italia','paris'** );

如果你有一组字符串，你必须得到引号之间的字符串......

# php - 使用 DOM 在具有特定类的 IMG 之后插入 DIV

> ID：13891905
> 
> 赞同：1
> 
> 时间：2012-12-15T11:49:55.520
> 
> 标签：php, wordpress, dom

所以这是针对 WordPress 的。我要做的是在我的主题的functions.php 文件中进行一些修改。我要做的就是获取 WordPress 图像的 ID，然后`<div>`在图像本身之后添加一个 IF 图像包含类`dd-star-rating`。

笔记：

*   图像 ID 在“类”属性中。它将类似于`wp-image-X`（`X`图像的 ID 在哪里）。我希望它存储在一个名为的变量中`$id`

*   我希望它在`<div>Star Rating ID = $id</div>`每个具有该类的图像之后添加`dd-star-rating`

下面是存储在`$content`变量中的示例：

```
<p>Nunc et neque risus. Nam a nisl eu magna rutrum euismod ac in lorem. Aenean varius accumsan ligula tincidunt malesuada. In diam lectus, pharetra quis cursus in, egestas vitae tellus. In neque arcu, aliquet ut egestas in, ultrices id ligula. Suspendisse ut dolor ligula, sit amet placerat ligula. Ut viverra nisi id ante facilisis pharetra. Aenean scelerisque, leo eget accumsan condimentum, odio libero ultrices enim, pretium placerat sapien purus nec odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Curabitur bibendum viverra pellentesque. Pellentesque eu diam non eros consectetur semper nec sed nisl.</p>

<p style="text-align: center;"><img class="size-full wp-image-44 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept.png" width="720" height="540" /></p>

<p style="text-align: center;"><img class="size-full wp-image-45 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept2.png" width="720" height="540" /></p>

<p>Nulla eros ante, lobortis in convallis eget, dignissim ut quam. Proin nisi nunc, iaculis ac auctor eu, tincidunt ac augue. Nunc purus nisi, sollicitudin nec luctus ullamcorper, dictum id magna. Sed quis nisi sagittis sapien placerat semper vitae tempus leo. Suspendisse sem diam, eleifend in blandit sed, pellentesque ac nisl. Morbi tincidunt adipiscing augue in pharetra. Duis dapibus bibendum egestas. Phasellus dictum dapibus quam id fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p> 
```

所以对于这两个图像，因为它们包含`dd-star-rating`类，我希望`$content`变量的值更改为：

```
<p>Nunc et neque risus. Nam a nisl eu magna rutrum euismod ac in lorem. Aenean varius accumsan ligula tincidunt malesuada. In diam lectus, pharetra quis cursus in, egestas vitae tellus. In neque arcu, aliquet ut egestas in, ultrices id ligula. Suspendisse ut dolor ligula, sit amet placerat ligula. Ut viverra nisi id ante facilisis pharetra. Aenean scelerisque, leo eget accumsan condimentum, odio libero ultrices enim, pretium placerat sapien purus nec odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Curabitur bibendum viverra pellentesque. Pellentesque eu diam non eros consectetur semper nec sed nisl.</p>

<p style="text-align: center;"><img class="size-full wp-image-44 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept.png" width="720" height="540" /></p>
<div>Star Rating ID = 44</div>

<p style="text-align: center;"><img class="size-full wp-image-45 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept2.png" width="720" height="540" /></p>
<div>Star Rating ID = 45</div>

<p>Nulla eros ante, lobortis in convallis eget, dignissim ut quam. Proin nisi nunc, iaculis ac auctor eu, tincidunt ac augue. Nunc purus nisi, sollicitudin nec luctus ullamcorper, dictum id magna. Sed quis nisi sagittis sapien placerat semper vitae tempus leo. Suspendisse sem diam, eleifend in blandit sed, pellentesque ac nisl. Morbi tincidunt adipiscing augue in pharetra. Duis dapibus bibendum egestas. Phasellus dictum dapibus quam id fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p> 
```

现在这是我的代码，在我的主题 functions.php 文件中：

```
add_filter( 'the_content' , 'dd_wrap_image' );

function dd_wrap_image ( $content )
{    
    $dom = new DOMDocument;
    $dom->loadHTML($content);
    $imgs = $dom->getElementsByTagName('img');

    foreach($imgs as $img)
    {
        if ($img->hasAttribute('class') && strstr($img->getAttribute('class'), 'dd-star-rating'))
        {                
            // get the "wp-image-X" ID and store into $id variable
            // add "<div>Star Rating ID = $id</div>" after image

            $class_array = explode(' ', $img->getAttribute('class'));

            foreach ($class_array as $k => $v)
            {
                if (strstr($v, 'wp-image'))
                {
                    $id = end(explode('-', $v));
                }
            }

            if (!empty($id))
            {
                $img->appendChild("<div>Star Rating ID = $id</div>");
            }            
        }
    }

    $dom->saveHTML();
    return $content;
} 
```

如您所见，我在条件语句中需要一些帮助。正则表达式匹配最适合用`preg_match()`? `<div>`在每个图像之后添加的最佳方法是什么？使用`str_replace()`？

编辑：

更新了我的代码。但是现在出现错误`Argument 1 passed to DOMNode::appendChild() must be an instance of DOMNode, string given`

再次编辑：

非常感谢哈克！但是，如果我想在每张图片之后添加一些更大的代码，如下所示？

假设以下代码存储在一个名为 的变量中`$star_code`，我将如何使用 DOM 在图像之后插入它？

```
<div class="dd-star-poll" id="img-$id">

    <ul class="dd-star-poll-options">
    <li><a href='#' title='1 star out of 5' class='one-star'>1</a></li>
    <li><a href='#' title='2 stars out of 5' class='two-stars'>2</a></li>
    <li><a href='#' title='3 stars out of 5' class='three-stars'>3</a></li>
    <li><a href='#' title='4 stars out of 5' class='four-stars'>4</a></li>
    <li><a href='#' title='5 stars out of 5' class='five-stars'>5</a></li>    
    </ul>

    <div class="dd-star-poll-results">
    Currently 3.5/5 Stars.
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:21:00.673

您遇到的最后一个问题是因为您不是`<div>`通过字符串而是通过对象添加新元素。例如：

```
$class->appendChild(new DOMElement('div', "Star Rating ID = $id")); 
```

但是，我也建议您在您的情况下使用 XPath。它确实允许您只选择那些将类作为您要查找的字符串的 img 元素。至少与您在 PHP 代码中编写的级别相同。所以你可以节省一些代码。

示例选择所有匹配的属性，然后解析它们（使用正则表达式）以获得 ID：

```
$doc = new DOMDocument;
$doc->loadHTML("<body>$html</body>");

$xp = new DOMXPath($doc);
$images = $xp->query(
    '//img[@class
           and contains(@class, "dd-star-rating") 
           and contains(@class, "wp-image-")
       ]/@class'
);

foreach ($images as $class) {
    $id = preg_match('/(?:^|\s)wp-image-(\d+)(?:$|\s)/', $class->nodeValue, $matches) ? $matches[1] : NULL;
    $class->appendChild(new DOMElement('div', "Star Rating ID = $id"));
} 
```

结果：

```
<p>Nunc et neque risus. Nam a nisl eu magna rutrum euismod ac in lorem. Aenean varius accumsan ligula tincidunt malesuada. In diam lectus, pharetra quis cursus in, egestas vitae tellus. In neque arcu, aliquet ut egestas in, ultrices id ligula. Suspendisse ut dolor ligula, sit amet placerat ligula. Ut viverra nisi id ante facilisis pharetra. Aenean scelerisque, leo eget accumsan condimentum, odio libero ultrices enim, pretium placerat sapien purus nec odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Curabitur bibendum viverra pellentesque. Pellentesque eu diam non eros consectetur semper nec sed nisl.</p>

<p style="text-align: center;"><img class="size-full wp-image-44 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept.png" width="720" height="540"></p>
<div>Star Rating ID = 44</div>

<p style="text-align: center;"><img class="size-full wp-image-45 aligncenter concept dd-star-rating" alt="concept" src="http://www.mysite.com/wp-content/uploads/2012/12/concept2.png" width="720" height="540"></p>
<div>Star Rating ID = 45</div>

<p>Nulla eros ante, lobortis in convallis eget, dignissim ut quam. Proin nisi nunc, iaculis ac auctor eu, tincidunt ac augue. Nunc purus nisi, sollicitudin nec luctus ullamcorper, dictum id magna. Sed quis nisi sagittis sapien placerat semper vitae tempus leo. Suspendisse sem diam, eleifend in blandit sed, pellentesque ac nisl. Morbi tincidunt adipiscing augue in pharetra. Duis dapibus bibendum egestas. Phasellus dictum dapibus quam id fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p> 
```

* * *

通过使用 的返回值来添加更多元素[`DOMElelemnt::appendChild`](http://php.net/DOMElement.appendChild)。例子：

```
$prefix = 'dd-star-poll';

$divOuter = $node->appendChild(new DOMElement('div'));
$divOuter->setAttribute('class', $prefix);
$divOuter->setAttribute('id', "img-$id");

$ul = $divOuter->appendChild(new DOMElement('ul'));
$ul->setAttribute('class', "$prefix-options");

... 
```

您只需继续添加元素。

# sql-server - 我可以在杀死相应连接的同时保持交易活跃吗？

> ID：13891911
> 
> 赞同：1
> 
> 时间：2012-12-15T11:51:04.927
> 
> 标签：sql-server, transactions

在 sql server 中，如果我开始一个事务并关闭该应用程序，事务将自动回滚。

我想知道当应用程序关闭时是否有任何方法可以使交易保持活力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:01:13.850

不，我不这么认为。我认为这种设计是错误的。您应该使用[补偿](http://en.wikipedia.org/wiki/Compensating_transaction)方法，而不是交易方法。

事务可以锁定资源（取决于隔离策略）。你可能不想要这个。

阅读这篇[IBM 文章](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/cjta_wsbascope.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:07:07.377

当您提交数据库时，您基本上是在说要写入的数据是正确的并由应用程序处理。仅当交易关闭时才会写入数据，并且此合同意味着数据库不会包含无效/损坏的信息。所以不行。关闭连接后，您将无法保持活动事务。

# java - 我已经能够编写一个打印出算术级数的代码，但我需要帮助如何在二维数组中打印它

> ID：13891912
> 
> 赞同：1
> 
> 时间：2012-12-15T11:51:09.207
> 
> 标签：java, int

我被要求编写一个代码来打印二维数组中的算术维度。我已经编写了打印等差数列的代码，但我不知道如何在二维数组中打印它。这是我的代码任何帮助将不胜感激

```
package task3;

import java.util.Scanner;

public class ArithmeticProgression {
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);

    double firstTerm = 0;
    double numberOfTerms = 0;
    double nthTerm = 0;
    double commonDifference = 0;
    double  sum= 0;
    double term = 0;

    System.out.print("Enter the value of a (First Term) : "); 
    firstTerm = input.nextDouble();

    System.out.print("Enter the value of d (Common Difference) : "); 
    commonDifference = input.nextDouble();

    System.out.print("Enter the value of n (Number of terms) : "); 
    numberOfTerms = input.nextDouble();

    nthTerm = firstTerm + (numberOfTerms - 1) * commonDifference;

    sum = numberOfTerms * (2 * firstTerm + (numberOfTerms - 1) * commonDifference)/2;

    System.out.println("");
    System.out.println("The Arithmetic Progression is as follows :");

    for(int i = 0; i < numberOfTerms; i++){
        term = firstTerm + i * commonDifference;
        System.out.print(term+" + ");
    }

    System.out.println("...");
    System.out.println("The nthTerm of the series : " + nthTerm);
    System.out.println("The Sum of n terms of series : " + sum);
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:56:39.903

在不指定二维数组中的行和列之间的关系的情况下，这种进展更适合一维数组。在这种情况下，您可以使用：

```
double[] terms = new double[(int)numberOfTerms];
for (int i = 0; i < numberOfTerms; i++) {
   terms[i] = firstTerm + i * commonDifference;
}

System.out.println(Arrays.toString(terms)); 
```

# android - 我如何在 actionMode 中捕获 OK 点击

> ID：13891915
> 
> 赞同：0
> 
> 时间：2012-12-15T11:51:36.610
> 
> 标签：android, actionbarsherlock

我有一个自定义搜索 actionMode，我想按下 OK（勾选）按钮来执行搜索。勾选按钮似乎没有调用 onActionItemPressed(..)。

捕捉滴答声的最佳方法是什么？

```
// this is what I have:
@Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            switch (item.getItemId()) {
                default:// ok button
                    if (search) applySearch();
                    stopActionMode();
                    okPressed=true;
                    KeyBoardUtil.hideKeyboard(SlideTabbedActivity.this, filterText);
            }
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:01:33.460

事实上，您应该添加一个新的 MenuItem 而不是使用 DONE 来执行搜索。单击 DONE 等于按返回，`onDestroyActionMode()`将被调用。

# php - 新的 debian 服务器上的 SQLite 性能问题

> ID：13891920
> 
> 赞同：1
> 
> 时间：2012-12-15T11:52:27.173
> 
> 标签：php, performance, sqlite, debian

我最近安装了一个新服务器：

*   Debian 挤压
*   阿帕奇2
*   php5.3.3-7
*   sqlite

从旧服务器迁移我的应用程序时，我观察到它的运行速度要慢得多。我隔离了这个问题，sqlite 更新运行速度慢了 10 倍以上。

两个 sqlite 都是 2.8.17 版本，旧服务器运行 PHP 版本 5.2.6-1+lenny3 这是我使用的基准脚本：

```
function write($value) {
    $dbh = sqlite_open('mt.sq');
    $sql = "REPLACE INTO hash (key,value,lm) VALUES ('test','$value','dummy')";
    sqlite_query($dbh, $sql);
    $dbh = sqlite_close($dbh);
}

$n = 100;
$start = microtime(true);
for($i=0;$i<$n;$i++) write($i);
$avg = (microtime(true) - $start) / $n;
echo "Average write time: ".$avg."[s]"; 
```

新服务器结果：平均写入时间：0.0795[s]
旧服务器结果：平均写入时间：0.0032[s]

这是用于测试的数据库：

```
BEGIN TRANSACTION;
CREATE TABLE hash(
    key PRIMARY KEY,
    value,
    lm
);
INSERT INTO hash VALUES('test',99,'dummy');
COMMIT; 
```

我不知道在哪里搜索。有没有人观察到同样的性能问题？
任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:20:56.487

This is a known "issue" - ext4 comes with barriers enabled by default (in contrast to ext3) - see [Serious performance issues with ext4fs barriers](http://liferea.blogspot.co.uk/2010/06/serious-performance-issues-with-ext4fs.html):

> The important difference in this aspect from ext4fs to ext3fs is that **ext4fs comes with barriers enabled**, which is a filesystem feature (optional in ext3fs) that tries to improves filesystem integrity. But this comes at a cost: depending on your application use case this **might decrease filesystem throughput a lot**

# android - ImageLoader 在选项卡更改时刷新图像

> ID：13891922
> 
> 赞同：1
> 
> 时间：2012-12-15T11:52:37.260
> 
> 标签：android, android-fragments, android-imageview

在我的 getView （对于我的适配器）我做

```
 ImageView malImage = (ImageView)vi.findViewById(R.id.animelist_malimg); // thumb image

    HashMap<String, String> anime = new HashMap<String, String>();

    anime = data.get(position);

    //...

    String img_url = anime.get(AnimeListFragment.KEY_MALIMG_URL);

    malImage.setTag(img_url);

    imageLoader.DisplayImage(img_url, malImage); 
```

当我更改选项卡时，如果它仅比当前选项卡多一个似乎很好，但如果它是两个或更多选项卡，它将刷新图像并闪烁占位符图像片刻。有什么合理的方法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:25:36.477

好吧，我是个白痴。在我阅读的教程中，在适配器构造函数中它将初始化一个新的 ImageLoader。这是不好的。我在我的 MainActivity 中创建了一个公共的静态 ImageLoader，并在我的所有适配器中共享它，这似乎工作得很好。

由于这个主题，我确实学到了一些新技巧，所以感谢你试图帮助我。

# c++ - 如何确定一个物体是在航点之前还是之后？

> ID：13891923
> 
> 赞同：4
> 
> 时间：2012-12-15T11:52:49.873
> 
> 标签：c++, irrlicht

我正在为一个学校项目制作赛车游戏。使用 Visual Studio 10 专业版和 Irrlicht。抱歉语法不好>.>，这是我的第一个问题，所以不确定它是否正确。

我希望它如何工作是我在赛道上的不同点制作航点，然后我运行我的航点检查以查看汽车是否经过其下一个航点（下一个它“需要”过去），如果是，那么它更新下一个航路点，否则什么都没有。

我希望这会起作用的方式是，我创建一个从 n 到 n+1 的向量，然后找到与 n 处的第一个向量垂直的向量。然后我看看对象是在那个向量的前面还是后面。我发现了一个[Gamedev.net 论坛帖子](http://www.gamedev.net/topic/542870-determine-which-side-of-a-line-a-point-is/)，它帮助我实现了这个功能：

```
void Engine::checkWaypoint(Vehicle* vehicle)
{
  btVector3 vector = waypoints[vehicle->nextWaypoint];
  // n
  btVector3 nextVector = waypoints[vehicle->nextWaypoint + 1];
  // n+1
  vector = nextVector - vector;
  // First vector
  btVector3 pos = btVector3(vehicle->position.X,vehicle->position.Y,vehicle->position.Z);

  float product = vector.dot(pos - waypoints[vehicle->nextWaypoint]);
  // positiv = before, negative = behind

  if(product < 0)
    vehicle->nextWaypoint += 1;
} 
```

当前的错误是：

1.  在不超过新点的情况下更新下一个航点。

2.  当它到达终点并重置时，它会停止在第一个航点上触发。

所以我的问题：

这是一个好方法吗？

我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:04:06.203

通常，在比赛游戏中，您必须*在检查站*才能对其进行验证：您只需检查汽车是否离检查站足够近。所以，我认为以下伪代码是有效的：

```
if( car is_near current_checkpoint )
    current_checkpoint = current_checkpoint->next_checkpoint;

is_near: return distance(car, current_checkpoint) < some value 
```

对于距离测试，可以使用简单的圆形（如伪代码所示），也可以测试汽车是否撞到了检查点的边界框（或放置在检查点内的框），它取决于您的检查点是如何制作的。

或者，您可以将所有从检查点到其追随者的线组成一条曲线，然后找到它所在位置最近的线，您可以从中找到下一个检查点。例子：

```
 o--o
                       /    \
    o-----------------o      \
   /                          \  <-- your track: S = start
  /                            o                 E = end
 /        o---o        X      /                  o = checkpoint
S        /     \       .     /                   X = car
        /       o------.----o
       /                  ^
   E--o                   |
                closest road from the car 
```

不方便：结果可能会因道路的曲率而异。我建议您使用我描述的第一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:13:23.403

您的代码测量从当前路径点到下一个路径点的向量距离，即玩家。但是，如果两个连续段的向量（例如）成直角，则该算法可以一次跳过多个路点。（即，如果您将线划过下一个路点，它可能会一直延伸到路中间，这意味着玩家可以在驶向该路点时来回穿过这条线）。

某种边界体积可能会起作用，要么是到航路点的距离（检查它是否小于道路宽度的 2 倍），要么是到你计算的点之间的向量的距离。

（或者您可能只需添加更多航点就可以逃脱）

至于为什么一圈时它不起作用，似乎您只需在航点上添加一个即可找到下一个。您需要以总数为模进行计算：

```
next_waypoint = (vehicle->nextWaypoint + 1) % num_waypoints; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:01:48.530

发现我的原始代码可以正常工作，问题出在航点上。

使航路点很容易看到，而且它们都彼此太近了，所以科德在同一个地点重复了很多次。

所以让航点之间的距离更长，把它们变成一条轨道，一切都开始像我想要的那样工作。

# javascript - 为什么动态加载内容时我的德语变音符号无法正确显示？

> ID：13891927
> 
> 赞同：4
> 
> 时间：2012-12-15T11:53:34.187
> 
> 标签：javascript, html, ajax, utf-8, character-encoding

> **可能重复：**
> [MySQL 5 的 UTF8 问题](https://stackoverflow.com/questions/346531/utf8-problem-with-mysql-5)

我无法在 HTML 页面上显示“德语变音符号”字符。

实际页面是保存`UTF-8 without BOM`编码的，有它`UTF-8 metatag`，它是通过 AJAX 请求的，我`response header to UTF-8`也在手动设置。尽管如此，所有德语字符都被破坏了。

我还对动态内容进行了另一个 AJAX 调用，该调用正确返回（在 Firebug 中），但是当在浏览器中显示时，Umlaute 再次被破坏。

我可以通过设置`iso-8859-1`所有 Ajax 响应标头来解决所有问题，但我认为`UTF-8`可以处理特殊字符并且我不必混合字符编码。

**问题**：
UTF-8 不应该正确处理字符吗？还是我需要另一个字符集？我错过了一些明显的东西吗？

谢谢！

**编辑：**
这是一个截图：![在此处输入图像描述](../Images/b4a00e273d6b91c54010c9c023203954.png)

接下来代码。

**编辑：**
这是我从服务器返回的内容： ![在此处输入图像描述](../Images/16d029faaa565890f7b161652ed13ad0.png)

并且响应标头还显示正在交付的内容为 UTF-8 ![在此处输入图像描述](../Images/353825dc0f644b1c7b1c2b809f60b8de.png)

所以从我不知道的角度来看，服务器响应似乎是正确的`UTF-8`并且显示外来字符，是这样吗？

实际页面是由 Jquery Mobile 请求的，所以我不能说那里发生了什么。动态内容，我自己做。这是来自我的应用程序控制器的调用：

```
var form = "",
    service = "../services/views.cfc",
    method = "byPass",
    returnformat = "json",
    targetUrl = "",
    formdata = "form_submitted=getUsers&method="+method+"&returnformat="+returnformat,
    successHandler = function(objResponse, cbk) {
        cbk( objResponse );
    };

ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, "yes", "", returnformat, cbk ); 
```

触发：

```
var ajaxFormSubmit = 
    function ( form, service, formdata, targetUrl, successHandler, dataHandler, errorHandler, returnformat, type ){
    var override = null;

    if ( type !== "" && type !== "post" ){
        override = type;
        type = "get";
    }

    $.ajax({
        async: false,
        type: type == "" ? "get" : type,
        url: service,
        data: formdata,
        dataType: returnformat,
        success: function( objResponse ){
            if (objResponse.SUCCESS == true || typeof objResponse === "string" ){
                dataHandler == "yes" ? successHandler( objResponse, override ) : successHandler( override );
            } else {},  
        error: function (jqXHR, XMLHttpRequest, textStatus, errorThrown) {}
        });
    } 
```

在服务器上（我正在使用`Coldfusion8`and `MySQL 5.0.88`。我最终在这个视图中：

```
<cffunction name="getUsers_abc" access="public" returntype="any" output="false" hint="JSON vcard library">
    <cfargument name="local" type="struct" required="true" hint="Local Object" />
    <cfscript>
        var THAT = local;
        THAT.displayStart = 0;
        THAT.displayLength = 10;
        THAT.count = 0;
        THAT.loginid = Session.id;
    </cfscript>
    <cftry>
    <!--- Database call --->
    <cfquery datasource="#Session.datasource#" name="getUsers">
        SELECT 
            tn.iln, 
            tn.typ, 
            ...
        FROM table AS Tn
        WHERE tn.freigeschaltet != "5"
        AND tn.typ = "abc"
        LIMIT #THAT.displayStart#,#THAT.displayLength# 
    </cfquery>

    <!--- CREATE JSON --->
    <cfsavecontent variable="jsonRetailers">
        <cfoutput>{"data":[</cfoutput>
            <cfloop query="getUsers">
                <cfset THAT.count = THAT.count + 1>
                    <cfoutput>
                        <cfoutput>{</cfoutput>
                            <cfoutput>"type":"#getUsers.typ#",</cfoutput>
                            ...
                            <cfoutput>}]</cfoutput>
                        <cfoutput>}</cfoutput>
                    </cfoutput>
                    <cfif getUsers.recordcount LT THAT.displayStart + THAT.displayLength>
                        <cfif THAT.count is not getUsers.recordcount><cfoutput>, </cfoutput></cfif>
                    <cfelse>
                        <cfif THAT.count LT THAT.displayLength><cfoutput>, </cfoutput></cfif>
                    </cfif>
                </cfloop>
                <cfoutput>]</cfoutput>
                <cfoutput>,"SUCCESS":true,"Count":#getUsers.recordcount#}</cfoutput>
            </cfsavecontent>
            <cfset variables.alredayBinary = "false">

            <!--- GZIP if possible --->
            <cfif cgi.HTTP_ACCEPT_ENCODING contains "gzip">
                <cfinvoke method="gzip" stringToZip="#jsonRetailers#" returnvariable="passBackObject"></cfinvoke>     
                <cfheader name="Content-Encoding" value="gzip">
                <cfset variables.alredayBinary = "true">
            </cfif>
            <!--- setting UTF-8 --->
            <cfheader name="Content-Type" value="text/json; charset=UTF-8">
            <cfheader name="Content-Length" value="#len(passBackObject)#" >
            <cfif variables.alredayBinary EQ "false">
                <!--- send to browser --->
                <cfcontent reset="no" variable="#CharsetDecode(passBackObject, "UTF-8")#" />
            <cfelse>
                <cfcontent reset="no" variable="#passBackObject#" />    
            </cfif>
            <cfreturn  />
</cffunction> 
```

所以，不幸的是没有 PHP。代码没有告诉我问题出在哪里，但也许你看到了什么，我没有。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:58:42.520

> 坏了=他们显示为“？” 问号

这意味着您很可能正在获取`latin1`远程脚本中的字符，并在 UTF-8 上下文中显示它们。（Ajax 请求的默认编码是 UTF-8。）

从头到尾检查[UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)，并确保您在所有地方都使用 UTF-8。如果 Ajax 脚本从数据库中获取数据，请确保您明确设置了编码。

# ember.js - Ember-data - 检索所有扩展 DS.Model 的类型

> ID：13891932
> 
> 赞同：1
> 
> 时间：2012-12-15T11:55:16.113
> 
> 标签：ember.js, ember-data

有没有办法判断一个类型是否扩展了 DS.Model？

例如，我可能有一个这样的类：

```
App.Klass = DS.Model.extend() 
```

我想说的是：

```
Ember.A(Ember.keys(Radium)).forEach (a) -> createType(a) instanceof DS.Model 
```

以上将永远是错误的，因为它们不是实例。

谁能建议一种从我的应用程序中检索所有模型类型的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:51:36.083

您正在寻找`detect`方法：

```
Ember.A(Ember.keys(Radium)).filter (a) -> DS.Model.detect(Radium[a]) 
```

# c - 如何在文本文件中找到单词的中间字符？

> ID：13891933
> 
> 赞同：-3
> 
> 时间：2012-12-15T11:55:33.590
> 
> 标签：c, file

如何在文本文件中找到第一个单词的中间字符，然后用它来计算该字符的其他出现次数？我有计算文本文件中单词的函数和计算第一个单词长度的函数。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <conio.h>
#define maxBuf 128

void howMany(FILE * file);
void words(FILE * file);

int main() {
FILE *temp, *file;
file = fopen("test.txt", "r");
temp = fopen("temp.txt","w");
char sd1[maxBuf];

howMany(file);
words(file);

fclose(file);
fclose(temp);

unlink("test.txt");
rename("temp.txt","test.txt");

return 0;  
}
void howMany(FILE * file){
char sd1[maxBuf];
file = fopen("test.txt", "r");
int i, z, c;
char word[1000];

while (!feof(file)) {
        if(fscanf(file,"%s",word)==1);
        printf("word read is: %s\n", word);
        printf("word read is: %i\n", strlen(word));                  
        break;
}
}
void words(FILE * file){
file = fopen("test.txt", "r");
char sd1[maxBuf];
int iwant; 
int nwords = 0; 

char word[1000];
int i, z;

while (fscanf(file, "%s", sd1) == 1) {

++nwords;
}
printf("There are %i words. \n", nwords);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:32:50.350

缩进你的代码。

检查函数的结果，如`fopen, fgets`......

`MAX_BUF`是一个更好的名字`maxBuf`

```
size_t middle, n = strlen(sd1);
middle = (n / 2) + (n % 2 != 0); 
```

# python - 为什么我无法在使用 pip 和/或 easy_install 安装后使用 python 2.7 在 mac 上导入 beautifulsoup？

> ID：13891934
> 
> 赞同：1
> 
> 时间：2012-12-15T11:55:43.657
> 
> 标签：python, python-2.7, beautifulsoup, pip, easy-install

```
$ sudo pip install beautifulsoup4
Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Cleaning up... 
```

我安装`beautifulsoup4`了，似乎已经成功完成，但我无法导入它：

```
Python 2.7.3 (v2.7.3:70, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import beautifulsoup4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named beautifulsoup4
>>> import beautifulsoup
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named beautifulsoup 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T11:57:05.660

该模块称为`bs4`：

```
from bs4 import BeautifulSoup 
```

# codeigniter - 在 codeigniter 上搜索和分页

> ID：13891936
> 
> 赞同：4
> 
> 时间：2012-12-15T11:56:15.800
> 
> 标签：codeigniter, search, pagination

伙计们

我尝试使用分页创建搜索。我可以做到，当我转到第二页时没有问题，但是当我转到第三页时数据丢失。请帮我。这是我的控制器代码：

```
function fast_search() {

    $data = array(
        'reason'           => $this->input->post('reason'),
        'shahr'            => $this->input->post('shahr'),
        'file_type'        => $this->input->post('file_type'),
        'region'           => $this->input->post('region'),
        'neighbourhood'    => $this->input->post('neighbourhood'),
        'under_build_area' => $this->input->post('under_build_area'),
        'user_type'        => $this->input->post('user_type')
    );

    $this->session->set_flashdata($data);

    /*-------------------------------------------------------*/
    $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;

    if ($page == 0) 
    {
        $config = array();
        $config['base_url']    = base_url() . 'file/fast_search/page';
        $config['per_page']    = 9;
        $config['uri_segment'] = 4;
        $config['total_rows']  = count($this->file_model->fast_search($data));
        $this->pagination->initialize($config);

        $data['results'] = $this->file_model->fast_search($data, $config['per_page'], $page);
        $data['links']   = $this->pagination->create_links();

    } else {

        $this->session->keep_flashdata('reason');
        $this->session->keep_flashdata('shahr');
        $this->session->keep_flashdata('file_type');
        $this->session->keep_flashdata('region');
        $this->session->keep_flashdata('neighbourhood');
        $this->session->keep_flashdata('under_build_area');
        $this->session->keep_flashdata('user_type');

        $result_data = array(
            'reason'           => $this->session->flashdata('reason'),
            'shahr'            => $this->session->flashdata('shahr'),
            'file_type'        => $this->session->flashdata('file_type'),
            'region'           => $this->session->flashdata('region'),
            'neighbourhood'    => $this->session->flashdata('neighbourhood'),
            'under_build_area' => $this->session->flashdata('under_build_area'),
            'user_type'        => $this->session->flashdata('user_type')
        );

        $config = array();
        $config['base_url']    = base_url() . 'file/fast_search/page';
        $config['per_page']    = 9;
        $config['uri_segment'] = 4;
        $config['total_rows']  = count($this->file_model->fast_search($result_data));
        $this->pagination->initialize($config);

        //$this->dvd($result_data);
        $data['results'] = $this->file_model->fast_search($result_data, $config['per_page'], $page);
        $data['links']   = $this->pagination->create_links();
    }

    /*-------------------------------------------------------*/

    //$this->dvd($data['links']);

    if ($data['results'] != FALSE) 
    {
        $data['agency_nums']      = $this->user_model->get_registered_agency();
        $data['updated_agencies'] = $this->user_model->get_uplated_agencies();
        $data['count_files']      = $this->file_model->count_files();

        $this->load->view('fast_search', $data);
        //return $data;
    } else {
        $data['error']            = 'No Result !';
        $data['agency_nums']      = $this->user_model->get_registered_agency();
        $data['updated_agencies'] = $this->user_model->get_uplated_agencies();
        $data['count_files']      = $this->file_model->count_files();
        $this->load->view('fast_search', $data);
    }
} 
```

我使用像这样的会话函数： $this->session->set_flashdata($data); $this->session->keep_flashdata('reason');

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:46:16.590

嗨，我真的很喜欢 net.tuts 的这个关于 CI 搜索的教程，它真的很好，你不需要使用会话来保存和检索搜索数据，你需要扩展你的输入类，它会在数据库中保存关键字和搜索条件给您和 id 为您可以在分页中使用的已保存记录查看了这个非常棒的教程

[CI 搜索和分页](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-search-results-without-query-strings-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T05:40:14.397

如果您在点击下一页时将这样的会话设置为 null，因为 $data 没有数据（帖子只发送一个），我认为您必须设置这样的条件

```
 $is_search =  $this->input->post('search'); // name button search
    if (!array_filter($data) && $is_search===false) { // check array is empty and no search value (only submit form have search name)
           $data = array(
                 'reason'           => $this->session->userdata('reason'),
                 'shahr'            => $this->session->userdata('shahr'),
                 'file_type'        => $this->session->userdata('file_type'),
                 'region'           => $this->session->userdata('region'),
                 'neighbourhood'    => $this->session->userdata('neighbourhood'),
                 'under_build_area' => $this->session->userdata('under_build_area'),
                 'user_type'        => $this->session->userdata('user_type')
           );
    } else {
           $this->session->set_userdata( $data ); // create new session
    }
/*-------------------------------------------------------*/
    $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0; 
```

# php - 解析的文件在页面中回显

> ID：13891938
> 
> 赞同：-1
> 
> 时间：2012-12-15T11:56:38.637
> 
> 标签：php, xml, curl

> **可能重复：**
> [如何避免 curl_exec() 中的回声？](https://stackoverflow.com/questions/8190956/how-to-avoid-echo-in-curl-exec)

我正在解析一个需要身份验证的 XML 文件。一切正常，文件下载正确，但在 html 页面上打印了 XML 身份验证文件的内容。我怎样才能避免这种行为？

这是XML文件

```
 <maxi-xml>
           <login>Login successful</login>
       </maxi-xml> 
```

这是 cURL 连接

```
 $ch = curl_init();
    $cookiefile = tempnam("tmp", "cookies");
    curl_setopt($ch, CURLOPT_URL,"http://www.maxithlon.com/maxi-xml/login.php?user=$_SESSION[user]&scode=$_SESSION[password]");
    curl_exec($ch);

    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);  
    curl_exec($ch);

    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile); 
    curl_setopt($ch, CURLOPT_URL, "http://www.maxithlon.com/maxi-xml/athletes.php?");
    $fp = fopen('xml/'.$_SESSION[teamid].'_athletes.xml', 'w');
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T12:00:36.207

在 curl_exec 之前放这个

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

# attributes - 使用下划线的 JAXB 属性

> ID：13891942
> 
> 赞同：3
> 
> 时间：2012-12-15T11:56:56.200
> 
> 标签：attributes, jaxb, underscore.js

我在 JAXB 上工作以使用 java 对象我正在创建 xml。但我正在使用 javaclass 字段喜欢

qpack_id 作为它在 qpackId 之类的 xml 文件中创建的属性

那么如何在 jaxB 中使用 _（下划线）请指导我。

xml 文件应创建以下属性

```
<qpack " qpack_id="MB0046_SET4" qpack_name="MB0046">
</qpack> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:58:29.257

**从 Java 类开始**

您可以使用`XmlAttribute`注释来指定名称。

```
@XmlAttribute(name="qpack_name")
public String getQPackName() {
    return qPackName;
} 
```

**从 XML 模式开始**

如果您正在谈论从 XML 模式生成 Java 类并保留`_`Java 属性名称中的字符，请参阅下面的答案以获取完整示例：

*   [如何在 xjc 中禁用 Java 命名约定？](https://stackoverflow.com/questions/6267478/how-to-disable-java-naming-conventions-in-xjc/6271449#6271449)

# java - Java SWT Slider.getMaximum() 等于100，但你最多只能拖到90

> ID：13891948
> 
> 赞同：6
> 
> 时间：2012-12-15T11:57:52.360
> 
> 标签：java, slider, swt

如果你创建一个`Slider`（org.eclipse.swt.widgets.Slider）然后调用`getMaximum()`它，值是100。但是当你实际尝试将Slider拖到它的最大值时，它只达到90。

我可以解决这个问题：

```
sl.setSelection(sl.getMaximum());   // sl.getMaximum() is 100   
int actualMax = sl.getSelection();  // should be 100, but is actually 90 
```

但肯定有什么问题，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:26:54.163

如您所知`Slider`，只是`ScrollBar`小部件，您设置的最大值等于 **max_value+thumb_value**值。

试试这个代码：

```
 final Slider slider = new Slider(shell, SWT.NONE);
  slider.setMaximum(100);
  slider.setMinimum(0);
  slider.setThumb(20);

  slider.addSelectionListener(new SelectionListener() {

    @Override
    public void widgetSelected(SelectionEvent e) {
        System.out.println( slider.getSelection()  +"   "+ slider.getThumb());
    }

    @Override
    public void widgetDefaultSelected(SelectionEvent e) {

      // TODO Auto-generated method stub

    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:04:58.610

我还可以在带有 SWT 3.6.1 和 SWT 4.2.1 的 Windows 7 上观察到这种行为。

一个简单但不满意的解决方法是使用：

```
sl.setMaximum(110); 
```

然后值范围从 `0`到`100`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T21:14:36.067

尽管提供的答案有助于解决问题，但我仍然需要一段时间才能正确实施。如果您想`0-100`使用滑块选择值，您应该这样做：

```
// we want to have the values 0-100
slider.setMaximum(100 + slider.getThumb());
// this now returns the selected value, which can be from 0-100
slider.getSelection(); 
```

# c++ - 只关闭一个套接字

> ID：13891951
> 
> 赞同：3
> 
> 时间：2012-12-15T11:58:15.613
> 
> 标签：c++, sockets, tcp

我制作了一个类似于套接字服务器的软件（在基础设施中的三个节点之间发送数据包）。为了简单起见，我创建了三个线程，一个用于每个 TCP 套接字（我知道这不是最佳的，但就我的目的而言，这是最简单的选择，也是最快的），一切都很好。在服务器启动时，三个套接字执行通常的初始化（getaddr、listen、bind 等）并监听三个不同的端口；当我启动客户端时，客户端正确连接并发送/接收数据。

问题是：每当一个客户端断开连接时，甚至其他套接字也会被强制断开并重新启动，这有点问题。我敢打赌可疑代码就在这里（这是从线程启动的例程）：

```
void ManageSocket1( void )
{
    while( true )
    {
        Socket* socket = new Socket( 27016, "SocketName" );
        if( socket->CreateSocket() )
        {
            socket->StartCommunication();
        }
        socket->CloseSocket();
        delete socket;
    }
}

void ManageSocket2( void )
{
    // clone of ManageSocket1
} 
```

CreateSocket() 负责创建套接字，而 StartCommunication() 接收/发送数据；对于这两种方法，无需发布代码，因为它是“通用”的 tcp 套接字打开代码。ManageSocketX() 由 main() 中的线程启动，并且由于其性质而永远不会返回到 main()。

那是 CreateSocket()：

```
int Socket::CreateSocket( void )
{
res = WSAStartup( MAKEWORD( 2,2 ), &wsaData );

if( res != 0 ) 
{
    logBook->PrintMsg( socketName, "WSAStartup failed" );
    return ERROR;
}
else
{
    logBook->PrintMsg( socketName, "WSAStartup done" );
}

res = getaddrinfo( NULL, socketPort, &hints, &result );

if ( res != 0 ) 
{
    logBook->PrintMsg( socketName, "GetAddrInfo failed" );
    WSACleanup();
    return ERROR;
}
else
{
    logBook->PrintMsg( socketName, "GetAddrInfo succesful");
}

ListenSocket = socket( result->ai_family, result->ai_socktype, result->ai_protocol );

if( ListenSocket == INVALID_SOCKET ) 
{
    logBook->PrintMsg( socketName, "GetAddrInfo failed with error: ", WSAGetLastError() );
    freeaddrinfo( result );
    WSACleanup();
    return ERROR;
}
else
{
    logBook->PrintMsg( socketName, "Socket created succesfully");
}

res = bind( ListenSocket, result->ai_addr, ( int )result->ai_addrlen );
if( res == SOCKET_ERROR ) 
{
    logBook->PrintMsg( socketName, "Bind failed with error: ", WSAGetLastError() );
    freeaddrinfo( result );
    closesocket( ListenSocket );
    WSACleanup();
    return ERROR;
}
else
{
    logBook->PrintMsg( socketName, "Socket successfully bound");
}

freeaddrinfo( result );

if( listen( ListenSocket, SOMAXCONN ) == SOCKET_ERROR ) 
{
    logBook->PrintMsg( socketName, "Bind failed with error: ", WSAGetLastError() );     
    closesocket( ListenSocket );
    WSACleanup();
    return ERROR;
}
else
{
    logBook->PrintMsg( socketName, "Listening on port", atoi( socketPort ) );
}

ClientSocket = accept( ListenSocket, NULL, NULL );
if( ClientSocket == INVALID_SOCKET ) 
{
    logBook->PrintMsg( socketName, "Accept failed:", WSAGetLastError() );
    closesocket( ListenSocket );
    WSACleanup();
    return 1;
}
else
{
    logBook->PrintMsg( socketName, "Client connection accepted" );
}

return SUCCESS;
} 
```

那就是 StartCom()

```
void Socket::StartCommunication( void )
{
char recvbuf[BUFLEN];
int  recvbuflen = BUFLEN;

do
{
    res = recv( ClientSocket, recvbuf, recvbuflen, 0 );
    if( res > 0 ) 
    {
        logBook->PrintMsg( socketName, "Bytes received:", res );            
    } 
    else if( res == 0 )
    {
        logBook->PrintMsg( socketName, "Connection closing..." );
    }
    else 
    {
        logBook->PrintMsg( socketName, "Receive failed:", WSAGetLastError() );
        closesocket( ClientSocket );
        WSACleanup();
        return;
    }       
} 
while( res > 0 );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T14:21:09.043

问题是`WSACleanup`当任何套接字终止时您正在调用。从文档中：

> 在多线程环境中，WSACleanup 终止所有线程的 Windows 套接字操作。

更远：

> 调用 WSACleanup 时打开的套接字将被重置并自动释放，就像调用 closesocket 一样。

# jquery - jquery根据标题在页面加载时隐藏图像

> ID：13891952
> 
> 赞同：2
> 
> 时间：2012-12-15T11:58:29.910
> 
> 标签：jquery, html, css

我想在页面加载时隐藏图像，**具体取决于它的标题** 这似乎不起作用..当我把它放在我的代码中时，我会收到所有具有标题的图像的警报（这是正确的）：

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        alert(this.title);
 }

}); 
```

在我的 CSS 文件中，我首先禁用了所有图像的显示：

```
.contact a.tooltip{
    display: none;
} 
```

现在我想**显示**所有标题非空的图像，这不起作用：

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        this.show();
        alert(this.title);
 }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T12:01:31.217

文章 a.tooltip img 没有隐藏。.contact a.tooltip 被隐藏。

改变

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        this.show();
        alert(this.title);
 }

}); 
```

到

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        this.parent().show();
        alert(this.title);
 }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:01:55.527

```
$("article a.tooltip img").each( function() {
var t = $(this).attr("title");
if(t!=// some title) {
$(this).parent("a.tooltip").show();
}
else {
$(this).parent("a.tooltip").remove();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:02:07.613

尝试使用`$(this)`并`.attr()`喜欢这样：

```
$('article a.tooltip img').load(function(){
  if($(this).attr('title') != ""){
    $(this).show();
    alert($(this).attr('title'));
  }
}); 
```

希望它可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T18:02:43.580

文章 a.tooltip img 没有隐藏。.contact a.tooltip 被隐藏。

改变

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        this.show();
        alert(this.title);
 }

}); 
```

到

```
$('article a.tooltip img').load(function(){
    if(this.title != ""){
        $(this).parent().show();
        alert(this.title);
 }

}); 
```

# c++ - IFTResult 到 cvMat 像素坐标

> ID：13891957
> 
> 赞同：2
> 
> 时间：2012-12-15T11:58:55.190
> 
> 标签：c++, opencv, kinect-sdk

首先对我的英语感到抱歉，我正在使用带有面部跟踪 API 的 Microsoft 的 Kinect SDK，并且我正在使用`GetFaceRect`功能获得面部矩形。我现在要做的是将视频缓冲区转换为 OpenCV `Mat`，然后使用 OpenCV 删除除面部之外的所有内容。要将视频帧转换为 OpenCV mat，我使用以下命令：

```
cv::Mat * openCVImg = new cv::Mat(cameraConfig.Height, cameraConfig.Width, CV_8UC4);
memcpy(openCVImg->data, m_KinectSensor.GetVideoBuffer()->GetBuffer(), m_KinectSensor.GetVideoBuffer()->GetBufferSize()); 
```

问题是当我尝试再次绘制面部矩形时，但这次使用 OpenCV，`Mat`我将矩形移到左侧并且与我的面部不匹配。

我读到图像可能会大步前进，但有：

```
m_KinectSensor.GetVideoBuffer()->GetStride() / m_KinectSensor.GetVideoBuffer()->GetBytesPerPixel() 
```

我得到了将近 640 到帧的宽度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:40:15.417

谢谢！正如 Esteban 之前建议的那样，而不是使用 `memcpy`y copy byte per byte from `IFTResult`to`cv::Mat`

# java - 在 Windows 7 上生成 Java 内核时遇到问题

> ID：13891958
> 
> 赞同：0
> 
> 时间：2012-12-15T11:59:02.007
> 
> 标签：java, multithreading

我遇到了我的 Java 进程挂起的情况。我通过 eclipse 运行了我的 junit tcases，这反过来又启动了另一个挂起的进程。

有没有办法从挂起的进程生成 Java 内核，因为 ctrl-brk 在这种情况下对我没有帮助，因为我没有控制台。

我尝试搜索 jstack 之类的选项，因为我使用的是 IBM jvm，SendSignal 无法在 64 位上运行，并且来自 adapatj 的 stacktrace 不再可用。我也尝试了 jconsole，但是当我尝试选择进程 ID 时，它只是继续尝试连接到给定的进程。

我只知道挂起的 Java 进程的进程 ID，我需要 Java 内核来分析为什么该进程处于挂起状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:02:13.267

因为`IBM JVMs`这里提到了如何获取堆转储的部分：http: //help.eclipse.org/indigo/index.jsp?topic= [%2Forg.eclipse.mat.ui.help%2Ftasks%2Facquiringheapdump.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Ftasks%2Facquiringheapdump.html)

> **IBM 虚拟机的系统转储和堆转储**
> 
> Memory Analyzer 还可以从 IBM 系统转储和便携式堆转储 (PHD) 文件中读取与内存相关的信息。
> 
> 为此，只需将 IBM DTFJ 功能安装到 Memory Analyzer 0.8 或更高版本中。
> 
> 遵循 IBM DTFJ 功能部件安装说明。
> 如果 DTFJ 功能已成功安装，则文件 > 打开堆转储菜单还应为文件类型提供以下选项：
> - IBM DTFJ for 1.4.2 VMs
> - IBM DTFJ for Portable Heap Dumps
> - IBM SDK for Java (J9) Javadump
> - IBM SDK for Java (J9) 系统转储
> 
> 生成转储所需的最低 IBM 虚拟机版本是 IBM JDK 1.4.2 SR12、5.0 SR8a 和 6.0 SR2，尽管以前的版本可能会生成可用于 Memory Analyzer 但根信息不准确的转储

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:05:19.230

转到 Eclipse 的“调试”视图，选择挂起的进程，右键单击，选择“属性”，您将拥有 eclipse 用来启动该进程的命令。在控制台中启动此命令，然后按 Ctrl-Break。

# ruby - Hash 上的继承钩子

> ID：13891964
> 
> 赞同：1
> 
> 时间：2012-12-15T11:59:53.320
> 
> 标签：ruby, hook

```
def Object.inherited(c)
  puts "class #{c} extends #{self}"
end

c = Class.new
#class #<Class:0xcfe57ac> extends Object
#=> #<Class:0xcfe57ac> 
```

几乎可以正常工作

```
def Hash.inherited(h)
  puts "The Hash is #{h}"
end

h = Hash.new
#=> {} 
```

在这种情况下为什么不调用钩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:07:40.297

因为`Class.new`创建了一个类，也就是说继承了一个类，调用了`inherited`，但`Hash.new`不创建类，也不调用`inherited`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:06:47.597

镐：Class#inherited - cls.inherited(sub_class) 在创建 cls 的子类时由 Ruby 调用。

```
def Hash.inherited(sub_class)
  puts "Hash inherited by #{sub_class}"
end

class MySubHash < Hash
end

$ ruby -w t.rb
Hash inherited by MySubHash 
```

# java - 在 XML Hibernate 上映射 SQL

> ID：13891965
> 
> 赞同：-2
> 
> 时间：2012-12-15T11:59:53.727
> 
> 标签：java, xml, hibernate

我在 XML 上创建一些 SQL 查询，然后用 Hibernate 和更多狗屎阅读它：P，我的问题是：

- 在我的查询中，我必须很好地使用“something < something”，“<”被检测为 XML 中标记的开头，我无法使用该查询，有人知道该怎么做吗？

这是查询：

```
<named-query name="Replacement.findByAmount">
        <query>select r from TReplacement r where r.having <= r.expected</query>
    </named-query> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:03:57.857

```
<query name="findByAmount">
        <![CDATA[select r from TReplacement r where r.having <= r.expected]]>
    </query>

Query query = session.getNamedQuery("findByAmount");
List results = query.list();
System.out.println("No of Results: " + results.size()); 
```

# c# - asyncfileupload.hasfile 在更新面板中为假

> ID：13891966
> 
> 赞同：0
> 
> 时间：2012-12-15T11:59:56.180
> 
> 标签：c#, asp.net, updatepanel, asyncfileupload

我正在使用 AJAX 控件工具包中的 asyncFileUpload 控件。我可以在后面的代码中对它进行类型转换并访问它，但它似乎没有抓取文件。这是它在页面中的嵌套方式：

```
<asp:LoginView ID="LoginView1" runat="server">
    <AnonymousTemplate>
    </AnonymousTemplate>
    <LoggedInTemplate>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Repeater ID="rpt_items_loggedin" runat="server">
                   <ItemTemplate>
                   </ItemTemplate>
                </asp:Repeater>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btn_addwish" EventName="click" />
            </Triggers>
        </asp:UpdatePanel>
        <div class="wenslijst_preview">        
            <div class="fourfifth">
                <table>
                    <tr>
                       <td>
                          <asp:Label ID="lbl_img" runat="server" Text="Upload een afbeelding:" AssociatedControlID="fu_img_upload"></asp:Label>
                       </td>
                       <td>
                          <asp:AsyncFileUpload ID="asfu_img" runat="server" UploaderStyle="Traditional" />
                       </td>
                    </tr>
                </table>
            </div>
            <div class="fifth">
                <asp:ImageButton ID="btn_addwish" runat="server" CssClass="icon_img" 
                                        ImageUrl="images/add.png" onclick="btn_addwish_Click"/>
            </div>
        </div>  
     </LoggedInTemplate>
</asp:LoginView> 
```

这就是我在后面的代码中处理它的方式。当我调试时，我看到 AsyncFileUpload 控件没有获取任何数据：

```
protected void btn_addwish_Click(object sender, ImageClickEventArgs e)
{
        AjaxControlToolkit.AsyncFileUpload f = new      AjaxControlToolkit.AsyncFileUpload();
        f = (AjaxControlToolkit.AsyncFileUpload)(this.LoginView1.FindControl("asfu_img"));
        Label l = new Label();
        l = (Label)(this.LoginView1.FindControl("lbl_img_feedback"));
        string filePath = "";
        if (f.HasFile)
        {
            try
            {
                string fileName = DateTime.UtcNow.Ticks + "_" + cId;
                filePath = "images/userimg/" + fileName;
                f.SaveAs(Server.MapPath(filePath));
                l.Text = filePath;
            }
            catch (Exception ex)
            {
                l.Text = "Deze foto kon niet worden geuploaded. " + ex.Message;
            }
        }
    } 
```

如果您需要查看更多代码或信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:25:34.740

确保带有 asyncfileupload 控件的用户控件未异步加载，例如通过 Response.Redirect("pageWithUploadControl")。

您是否处理过 FileUploadComplete 事件并检查 AsyncFileUploadState 是否为 Success？

还尝试更改更改表单的编码类型：

```
<form id="form1" enctype="multipart/form-data" runat="server"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:23:45.647

在我看来， btn_addwish 是您要用于上传文件的按钮，如果是这种情况，那么您的问题是当执行 f.Hasfile 时，上传还没有完成，因此，它没有有一个文件。尝试使用 UploadedComplete 事件或其他控件来检查 hasfile。

# jakarta-ee - 重写 HttpServlet 服务方法

> ID：13891975
> 
> 赞同：16
> 
> 时间：2012-12-15T12:00:54.620
> 
> 标签：jakarta-ee, tomcat, servlets

我有一个 servlet，它看起来像：

```
public class MyServlet extends HttpServlet {

public void doGet(HttpServletRequest request, HttpServletResponse response)
             throws IOException, ServletException {
    doTheJob(request, response);
}//method doGet

public void doPost(HttpServletRequest request, HttpServletResponse response)
              throws IOException, ServletException {
    doTheJob(request, response);
}//method doPost

private void doTheJob(.....) {
    ...........................
}

} 
```

由于我的应用程序的工作方式，我只需要从**doGet()**和**doPost()调用****doTheJob(** ) 。所以我认为，我最好覆盖**HttpServlet**的方法**service()**。

 ******但我想知道这是否会阻碍任何事情或会导致任何问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-15T12:09:00.493

这就是`service()`通常的实现方式（[非常简化](http://grepcode.com/file/repo1.maven.org/maven2/javax.servlet/servlet-api/3.0-alpha-1/javax/servlet/http/HttpServlet.java#HttpServlet.service%28javax.servlet.ServletRequest%2Cjavax.servlet.ServletResponse%29)）：

```
protected void service(HttpServletRequest req, HttpServletResponse resp) {
    String method = req.getMethod();

    if (method.equals(METHOD_GET)) {
            doGet(req, resp);
    } else if (method.equals(METHOD_HEAD)) {
        doHead(req, resp);
    } else if (method.equals(METHOD_POST)) {
        doPost(req, resp);

    } else if (method.equals(METHOD_PUT)) {
        doPut(req, resp);   

    } else if (method.equals(METHOD_DELETE)) {
        doDelete(req, resp);

    } else if (method.equals(METHOD_OPTIONS)) {
        doOptions(req,resp);

    } else if (method.equals(METHOD_TRACE)) {
        doTrace(req,resp);

    } else {
        resp.sendError(HttpServletResponse.SC_NOT_IMPLEMENTED, errMsg);
    }
} 
```

正如你所看到的，它几乎没有委托给HTTP 方法`doGet()`并`doPost()`依赖于 HTTP 方法。所以从一只手上替换`doGet()`和`doPost()`用`service()`就可以了。另一方面，您的 servlet 也将处理单独`PUT`的、、和其他方法，`DELETE`它将返回*405 Method not allowed*。`HEAD``doGet()``doPost()`

 *这就是为什么我实际上建议将代码分开`doGet()`并`doPost()`委托给您的代码，并让 servlet 处理其他方法。如果这是您的代码中重复出现的模式，请考虑以下帮助 servlet：

```
public class AbstractServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
                 throws IOException, ServletException {
        doGetOrPost(request, response);
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response)
                  throws IOException, ServletException {
        doGetOrPost(request, response);
    }

    abstract protected void doGetOrPost(.....);

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-15T12:09:30.147

你最好保持原样。覆盖该`service()`方法还会使该方法响应 PUT、HEAD、DELETE 等。它绕过了默认`service()`方法对最后修改的标头所做的工作。*******

# c - OpenGL/OpenCL 互操作，OpenCL 渲染到纹理麻烦

> ID：13891981
> 
> 赞同：2
> 
> 时间：2012-12-15T12:01:52.027
> 
> 标签：c, opengl, opencl, textures

我正在尝试将 OpenCL 渲染为 OpenGL 256x256 纹理。
全部编译正确，但只渲染黑屏：

![](../Images/3c52171c59953bf5f01f95dffd0928a9.png)

如果关闭纹理，它通常会呈现白色矩形。

```
// Setting up OpenCL

    const char *source =
        "__kernel void Main(__write_only image2d_t image)\n"
        "{\n"
        " int x = get_global_id(0);\n"
        " int y = get_global_id(1);\n"
        " write_imagef(image, (int2)(x, y), (float4)(x / 256.0f, y / 256.0f, 1.0f, 1.0f));\n"
        "}\n";

    cl_platform_id platform;
    clGetPlatformIDs(1, &platform, NULL);

    cl_device_id cdDeviceID;
    clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &cdDeviceID, NULL);

    cl_context_properties props[] = {
        CL_CONTEXT_PLATFORM,
        (cl_context_properties)platform,
        CL_GL_CONTEXT_KHR,
        (cl_context_properties)wglGetCurrentContext,
        CL_WGL_HDC_KHR,
        (cl_context_properties)wglGetCurrentDC,
    };

    *context = clCreateContextFromType(props, CL_DEVICE_TYPE_GPU ,NULL, NULL, NULL);
    *queue = clCreateCommandQueue(*context, cdDeviceID, 0, NULL);
    *program = clCreateProgramWithSource(*context, 1, &source, NULL, NULL);
    clBuildProgram(*program, 1, &cdDeviceID, NULL, NULL, NULL);
    *kernel = clCreateKernel(*program, "Main", NULL);
...
// Setting up texture

    glEnable(GL_TEXTURE_2D);

    GLuint texture;
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 256, 256, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

    cl_mem cl_screen;
    cl_screen = clCreateFromGLTexture2D(context, CL_MEM_WRITE_ONLY, GL_TEXTURE_2D, 0, texture, 0);
...
// Rendering
    clEnqueueAcquireGLObjects(queue, 1, &cl_screen, 0, NULL, NULL);
    clSetKernelArg(kernel, 0, sizeof(cl_screen), cl_screen);
    size_t work_size[] = { 256, 256 };
    clEnqueueNDRangeKernel(queue, kernel, 2, 0, work_size, 0, 0, NULL, NULL);
    clEnqueueReleaseGLObjects(queue, 1, &cl_screen, 0, NULL, NULL);
    clFinish(queue);

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindTexture(GL_TEXTURE_2D, texture);

    glBegin(GL_QUADS);
    glTexCoord2i(0, 1);
    glVertex3f(-1.0f, 1.0f, 0.0f);
    glTexCoord2i(1, 1);
    glVertex3f( 1.0f, 1.0f, 0.0f);
    glTexCoord2i(1, 0);
    glVertex3f( 1.0f,-1.0f, 0.0f);
    glTexCoord2i(0, 0);
    glVertex3f(-1.0f,-1.0f, 0.0f);
    glEnd();
    glFinish();

    SwapBuffers(hDC);
... 
```

完整代码：

```
#include <windows.h>
#include <gl/gl.h>
#include <CL/cl.h>
#include <CL/cl_gl.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
void EnableOpenGL(HWND hWnd, HDC * hDC, HGLRC * hRC);
void DisableOpenGL(HWND hWnd, HDC hDC, HGLRC hRC);
void EnableOpenCL(cl_kernel * kernel, cl_program * program, cl_context * context, cl_command_queue * queue);
void DisableOpenCL(cl_kernel * kernel, cl_program * program, cl_context * context, cl_command_queue * queue);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)
{
    WNDCLASS wc;
    HWND     hWnd;
    HDC      hDC;
    HGLRC    hRC;
    MSG      msg;
    BOOL     quit = FALSE;

    wc.style         = CS_OWNDC;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon( NULL, IDI_APPLICATION );
    wc.hCursor       = LoadCursor( NULL, IDC_ARROW );
    wc.hbrBackground = (HBRUSH)GetStockObject( BLACK_BRUSH );
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = "GLCLInterop";

    RegisterClass(&wc);

    hWnd = CreateWindow("GLCLInterop", "GLCLInterop", WS_CAPTION | WS_POPUPWINDOW | WS_VISIBLE, 0, 0, 640, 480, NULL, NULL, hInstance, NULL);

    cl_kernel        kernel;
    cl_program       program;
    cl_context       context;
    cl_command_queue queue;

    EnableOpenGL(hWnd, &hDC, &hRC);
    EnableOpenCL(&kernel, &program, &context, &queue);

    glEnable(GL_TEXTURE_2D);

    GLuint texture;
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 256, 256, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

    cl_mem cl_screen;
    cl_screen = clCreateFromGLTexture2D(context, CL_MEM_WRITE_ONLY, GL_TEXTURE_2D, 0, texture, 0);

    while (!quit)
    {
        if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            if (msg.message == WM_QUIT) 
                quit = TRUE;
            else 
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        } 
        else 
        {
            clEnqueueAcquireGLObjects(queue, 1, &cl_screen, 0, NULL, NULL);
            clSetKernelArg(kernel, 0, sizeof(cl_screen), cl_screen);
            size_t work_size[] = { 256, 256 };
            clEnqueueNDRangeKernel(queue, kernel, 2, 0, work_size, 0, 0, NULL, NULL);
            clEnqueueReleaseGLObjects(queue, 1, &cl_screen, 0, NULL, NULL);
            clFinish(queue);

            glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
            glClear(GL_COLOR_BUFFER_BIT);

            glBindTexture(GL_TEXTURE_2D, texture);

            glBegin(GL_QUADS);
            glTexCoord2i(0, 1);
            glVertex3f(-1.0f, 1.0f, 0.0f);
            glTexCoord2i(1, 1);
            glVertex3f( 1.0f, 1.0f, 0.0f);
            glTexCoord2i(1, 0);
            glVertex3f( 1.0f,-1.0f, 0.0f);
            glTexCoord2i(0, 0);
            glVertex3f(-1.0f,-1.0f, 0.0f);
            glEnd();
            glFinish();

            SwapBuffers(hDC);
        }
    }

    DisableOpenGL(hWnd, hDC, hRC);
    DisableOpenCL(&kernel, &program, &context, &queue);
    DestroyWindow(hWnd);

    return msg.wParam;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{

    switch (message)
    {
    case WM_CREATE:
        return 0;

    case WM_CLOSE:
        PostQuitMessage(0);
        return 0;

    case WM_DESTROY:
        return 0;

    case WM_KEYDOWN:
        switch (wParam)
        {

        case VK_ESCAPE:
            PostQuitMessage(0);
            return 0;

        }
        return 0;

    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
}

void EnableOpenGL(HWND hWnd, HDC * hDC, HGLRC * hRC)
{
    PIXELFORMATDESCRIPTOR pfd;
    int format;

    *hDC = GetDC(hWnd);

    ZeroMemory(&pfd, sizeof(pfd));

    pfd.nSize      = sizeof(pfd);
    pfd.nVersion   = 1;
    pfd.dwFlags    = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 24;
    pfd.cDepthBits = 16;
    pfd.iLayerType = PFD_MAIN_PLANE;
    format         = ChoosePixelFormat(*hDC, &pfd);

    SetPixelFormat(*hDC, format, &pfd);

    *hRC = wglCreateContext(*hDC);
    wglMakeCurrent(*hDC, *hRC);
}

void DisableOpenGL(HWND hWnd, HDC hDC, HGLRC hRC)
{
    wglMakeCurrent(NULL, NULL);
    wglDeleteContext(hRC);
    ReleaseDC(hWnd, hDC);
}

void EnableOpenCL(cl_kernel * kernel, cl_program * program, cl_context * context, cl_command_queue * queue)
{
    const char *source =
        "__kernel void Main(__write_only image2d_t image)\n"
        "{\n"
        " int x = get_global_id(0);\n"
        " int y = get_global_id(1);\n"
        " write_imagef(image, (int2)(x, y), (float4)(x / 256.0f, y / 256.0f, 1.0f, 1.0f));\n"
        "}\n";

    cl_platform_id platform;
    clGetPlatformIDs(1, &platform, NULL);

    cl_device_id cdDeviceID;
    clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &cdDeviceID, NULL);

    cl_context_properties props[] = {
        CL_CONTEXT_PLATFORM,
        (cl_context_properties)platform,
        CL_GL_CONTEXT_KHR,
        (cl_context_properties)wglGetCurrentContext,
        CL_WGL_HDC_KHR,
        (cl_context_properties)wglGetCurrentDC,
    };

    *context = clCreateContextFromType(props, CL_DEVICE_TYPE_GPU ,NULL, NULL, NULL);

    *queue = clCreateCommandQueue(*context, cdDeviceID, 0, NULL);

    *program = clCreateProgramWithSource(*context, 1, &source, NULL, NULL);
    clBuildProgram(*program, 1, &cdDeviceID, NULL, NULL, NULL);

    *kernel = clCreateKernel(*program, "Main", NULL);
}

void DisableOpenCL(cl_kernel * kernel, cl_program * program, cl_context * context, cl_command_queue * queue)
{
    clReleaseKernel(*kernel);
    clReleaseProgram(*program);
    clReleaseContext(*context);
    clReleaseCommandQueue(*queue);
} 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T21:37:29.253

您的图像是 GL_UNSIGNED_BYTE，但您使用的是 write_imagef。切换到 GL_FLOAT 或 write_imageui。

# ios - didFinishPickingMediaWithInfo 中的 iOS presentViewController 导致应用程序滞后

> ID：13891991
> 
> 赞同：1
> 
> 时间：2012-12-15T12:03:35.580
> 
> 标签：ios, uiimagepickercontroller

在我的应用程序中，我执行以下顺序：

1）我用设备相机拍照

2）在`didFinishPickingMediaWithInfo`我取回图像中，我关闭`UIImagePickerController`并呈现 a `viewController`，就像这样

```
[self dismissViewControllerAnimated:YES completion:^(void){
    [self presentNewViewController];
}]; 
```

presentNewViewcontroller 看起来像这样

```
- (void) presentNewViewController {
    newViewController* newVC = [[newViewController alloc]init];
    [newVC setImage: selectedImage]; //selected Image comes from didFinishPickingMediaWithInfo

    [self presentViewController:newVC animated:YES completion:nil];
} 
```

这意味着在`UIImagePickerController`被解雇后，我会立即展示一个新的控制器。

此操作在模拟器上运行良好，但在设备上会导致应用程序滞后。首先，我必须等待 2-3 秒，然后新的`viewController`开始出现，即便如此，它的动画运行缓慢且碎片化，不流畅。

起初我认为选择的图像太大，但后来我使用它压缩`UIImageJPEGRepresentation`但结果没有改变。

有谁知道为什么会这样？

# wordpress - TimThumb 和 777 权限

> ID：13891992
> 
> 赞同：0
> 
> 时间：2012-12-15T12:03:40.023
> 
> 标签：wordpress, .htaccess, timthumb

我在 Wordpress 网站上运行了 TimThumb，我可以让它工作的唯一方法是将 timthumb 目录权限设置为 777。不过我不喜欢这样做，在我之前必须使用 777 权限在目录中放置一个 .htaccess 文件以停止在该目录中运行的脚本，显然无法在 timthumb 目录中执行此操作。有谁知道无需使用 777 就可以让 timthumb 工作的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:01:30.837

TimThumb 需要对特定文件夹的写入权限
*（我现在不记得是哪个，但我正在查找）*

您不必 777 整个目录，只需要那个特定的文件夹

另外，我相信 660 可能适合此文件夹（读/写）

这也值得一看： [http ://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/](http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/)

TimThumb 的先前版本存在漏洞，该插件旨在扫描该漏洞。

# python - Selenium Python 安装问题

> ID：13891996
> 
> 赞同：0
> 
> 时间：2012-12-15T12:04:02.847
> 
> 标签：python, selenium

我已按照该网站的说明进行操作：http: [//selenium-python.readthedocs.org/en/latest/installation.html](http://selenium-python.readthedocs.org/en/latest/installation.html)

我遵循了以下部分：Windows 用户的详细说明：

通过将其（python-2.7.3.msi）下载并安装到我的 windows 来完成第 1 步。现在我对第二步感到困惑。我需要什么我无法理解，我刚刚下载了“pypa-virtualenv-1.8.1-74-g2adac08.tar.gz”并将其解压缩到文件夹“D:\Python and Selenium”。第一步提到的 MSI .exe 文件和这个 .zip 文件都存在于我刚才提到的同一目录中。

我也尝试了以下方法，但出现错误：

```
 Microsoft Windows [Version 6.1.7600]
    Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

    C:\Users\Arup Rakshit>cd..

    C:\Users>cd..

    C:\>d:

    D:\>cd D:\Python and Selenium\pypa-virtualenv-2adac08

    D:\Python and Selenium\pypa-virtualenv-2adac08>pip install https://github.com/py
   pa/virtualenv/tarball/develop
   'pip' is not recognized as an internal or external command,
    operable program or batch file.

    D:\Python and Selenium\pypa-virtualenv-2adac08> 
```

您现在可以指导我将它成功安装到我的 PC 上吗？

***更新***

```
 Microsoft Windows [Version 6.1.7600]
  Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

  C:\Users\Arup Rakshit>cd..

  C:\Users>cd..

  C:\>cd Python27

  C:\Python27>cd python.exe
 The directory name is invalid.

 C:\Python27>python.exe virtualenv.py selenv
  python.exe: can't open file 'virtualenv.py': [Errno 2] No such file or directory

 C:\Python27>
 C:\Python27> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:03:44.663

你需要在你的文件夹中有这个文件：

[虚拟环境.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py)

然后使用命令行运行：

```
C:\Python27\python.exe virtualenv.py selenv 
```

之后，您将拥有一个名为“selenv”的子文件夹。使用命令行运行：

```
selenv\Scripts\pip.exe install selenium 
```

并检查您是否可以使用 selenv\Scripts\python.exe my_selenium_script.py 运行您的 python-selenium 脚本

请注意，您需要使用 pip 的完整路径，因为您在 windows PATH 中没有它

# php - json_decode 在有效值 php 上返回 null

> ID：13891998
> 
> 赞同：-1
> 
> 时间：2012-12-15T12:04:11.663
> 
> 标签：php

这是我的代码：

```
 echo '<br/>';
   echo 'Json data from DB   '.json_encode($output);
   $data=array();
   $array=json_decode($output,true);
   echo '<br/>';
   echo 'Concerted into an array   '.json_encode($array); 
```

这是输出：

```
Json data from DB  [{"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","3":"1","key-4":"1"}] 
Concerted into an array null 
```

为什么 json_devode 返回 null？如果我尝试这样：

```
$data = '[{"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","3":"1","key-4":"1"}]';

// convert to an array
$data = json_decode($data, true); 
```

然后正常打印出来：

```
Json data from DB  [{"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","3":"1","key-4":"1"}] 
Concerted into an array  {"0":"1","key-1":"1","1":"1","key-2":"1","2":"1","key-3":"1","4":"1","key-4":"1"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T12:07:30.327

因为`json_decode`需要一个字符串而`$output`不是字符串（如`json_encode`: 它是一个数组所证明的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:10:40.473

你好像把事情搞混了。在您的示例`$output`中似乎已经是一个数组并且您想再次对其进行解码？如何？

当你这样做时：

```
json_encode($output); 
```

它返回一个正确的 JSON 对象，这意味着它`$output`已经是一个数组。而且您不能`json_decode`使用非 JSON 对象。看来你可以直接使用`$output`，或者你需要更清楚地说明你的问题。