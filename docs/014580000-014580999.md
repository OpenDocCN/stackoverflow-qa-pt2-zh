# StackOverflow 问答 14580000-14580999

# assembly - 程序序言解释

> ID：14580007
> 
> 赞同：1
> 
> 时间：2013-01-29T09:52:17.423
> 
> 标签：assembly, stack, stack-overflow, subroutine

我对此很陌生，并且有一些问题希望您能帮助理解它。

> 调用过程时必须做的第一件事是保存前一个 FP（因此它可以在过程退出时恢复）。然后它将 SP 复制到 FP 以创建新的 FP，并推进 SP 为局部变量保留空间。这段代码称为过程序言。在过程退出时，必须再次清理堆栈，这称为过程结语。已提供 Intel ENTER 和 LEAVE 指令以及 Motorola LINK 和 UNLINK 指令，以有效地完成大部分程序 prolog 和 epilog 工作。

上述文字引用自砸叠纸，我发现以下问题很难理解：

> “程序在调用时必须做的第一件事是保存以前的 FP（这样它可以在程序退出时恢复）。然后它将 SP 复制到 FP 以创建新的 FP”

1) 将 SP 复制到 FP 是否会删除保存的 FP 值 - 应该保存？

> “然后它将 SP 复制到 FP 以创建新的 FP，并推进 SP 为局部变量保留空间。”

2）为什么需要提前SP？推入局部变量时不应该自动递减吗？

3) 在不调用任何子程序的情况下启动主函数时SP、IP和FP的值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T16:00:50.523

> 1) 将 SP 复制到 FP 是否会删除保存的 FP 值 - 应该保存？

将堆栈指针复制到帧指针寄存器（Intel 上的 e/bp）会覆盖以前的值，是的，但是您刚刚在上一步中将该值精确地保存在堆栈中，以便可以在退出时恢复它。

> 2）为什么需要提前SP？推入局部变量时不应该自动递减吗？

是的，`push`是这样，但此步骤通常使用`mov`（在 Intel 上）完成，它不会修改堆栈指针。

> 3) 在不调用任何子程序的情况下启动主函数时SP、IP和FP的值是多少？

`main`显然，IP 指向 中的第一条指令。堆栈指针指向保存在堆栈上的最后一项。帧指针通常指向调用的操作系统函数的帧`main`。

# c# - 等待来自子对象/视图模型的事件

> ID：14580009
> 
> 赞同：1
> 
> 时间：2013-01-29T09:52:36.457
> 
> 标签：c#, mvvm, async-await, mvvmcross

我正在使用 MVVM Cross 构建一个 WinRT/WP8 应用程序，其中一个要求是用户能够上传图像。就主应用程序而言，“图片”只是一个带有一些元数据的字节数组——它的实际来源与它无关。我所拥有的（到目前为止，对于 WinRT，还没有实现电话）是一个“IPictureSource”接口，带有一个 GetBytes 方法和 2 个实现 - LivePicture 和 FileSystem。每个都做它需要做的事情来获取/查找图像，并以所需的格式返回它。

该应用程序目前有点笨拙，因为 UI 层正在嗅探设备功能，并且仅在相机不可用时才允许文件系统

我想要做的是将这些抽象一点，可能有两个子视图模型，一个专用于相机（如果可用，则启用它自己）和一个用于文件系统，或者甚至可能是一个集合，如果设备有多个相机，给用户最大的选择。

无论哪种方式，我都想要一个设计，让我有多个图片来源，它们都能够返回适当的数据。

在过去，我会在 IPictureSource 上公开一个“PictureTaken”事件，然后循环访问来自父对象的子对象，注册每个事件并通过一个公共处理程序处理它们。

我不明白为什么这仍然行不通，但是由于我有一点喘息的空间来充分利用新技术（特别是异步/等待），现在有更好的方法来做到这一点，尤其是一个我可以进行单元测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:04:33.223

如果您想摆脱这些事件处理程序，请在此处查看[我的答案](https://stackoverflow.com/questions/14479471/where-to-subscribe-to-events-of-the-inner-object/14480001#14480001)。也许您的 MVVM 框架已经提供了一个事件聚合器。

# android - 更新 GUI 时的 Android 进度对话框

> ID：14580012
> 
> 赞同：0
> 
> 时间：2013-01-29T09:52:49.903
> 
> 标签：android, multithreading, android-asynctask, progressdialog, runnable

所以我已经在这里工作了 2 天，但仍然无法正常工作。我已经尝试过实现可运行的异步任务的解决方案，但它似乎永远无法与我的代码一起使用。也许我以错误的方式实施它......

无论如何，我编写了以下代码。当我创建这个活动时，我想显示一个带有文本“正在加载”的进度对话框。问题是，您不能从另一个线程更新 GUI 元素。那就是我卡住的地方。希望你能帮帮我！

PS：我需要 ProgressDialog 的原因是因为这条线

```
ArrayList<String> genres = MysqlHandler.getAllGenres(); 
```

加载可能需要相当长的时间。我还有一些其他活动需要做同样的事情，加载可能需要 5 秒。

```
public class GenreActivity extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_genre);

    try {
        ArrayList<String> genres = MysqlHandler.getAllGenres();

        LinearLayout layout = (LinearLayout) findViewById(R.id.AllGenreLayout);

        for(int i = 0; i < genres.size(); i++)
        {
            Button myButton = new Button(this);
            myButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.yellow_button));
            myButton.setTextAppearance(this, R.style.ButtonText);
            myButton.setText(genres.get(i));
            myButton.setOnClickListener(this);
            layout.addView(myButton);
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:58:13.177

```
/// try :)

progressgialog.post(new Runnable(){
run ()
{
progressgialog.setMessage("asd");
}
})

//// catch :)

activity.runOnUiThread(new Runnable()
{
progressgialog.setMessage("asd");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:59:27.610

我找到了一种解决方法，并认为我会分享它。由于我在 oncreate 方法中创建了另一个线程，我想我也可以在启动意图时创建一个线程。所以代替这段代码：

```
Intent inte = new Intent(FirstSearchActivity.this, GenreActivity.class);
startActivity(inte); 
```

现在我在做：

```
//start the progress dialog
progressDialog = ProgressDialog.show(FirstSearchActivity.this, "", "Loading...");
new Thread() 
{
public void run() 
    {
        Intent inte = new Intent(FirstSearchActivity.this, GenreActivity.class);
        startActivity(inte);
        progressDialog.dismiss();
    }
}.start(); 
```

# html - 转换：旋转（45度）到DIV里面一起在歌剧中不起作用

> ID：14580022
> 
> 赞同：0
> 
> 时间：2013-01-29T09:53:14.423
> 
> 标签：html, css

我想使用 css transform:rotate(45deg) 将 Div 旋转 45deg，但它会影响所有内部元素。我在里面一起使用了 2 个 Div，外部 div 旋转 45 度，内部 DIv 旋转 -45 度，因此内部 Div 中的文本不旋转，但它在 Opera 中并不能真正工作，它的文本 invert.it 在 IE、Firefox 和谷歌中工作真正的铬。我的第二个问题：当我想在内部 DIV 标签内输入时，我应该每次根据我的文本大小更改边距以使其居中对齐 DIV 标签。我应该怎么办？谢谢

外部 DIV 的 css：

```
transform: rotate(45deg);
-ms-transform: rotate(45deg); /* Internet Explorer */
-moz-transform: rotate(45deg); /* Firefox */
-webkit-transform: rotate(45deg); /* Safari and Chrome */
-o-transform: rotate(45deg); /* Opera */ 
```

内部 DIV 的 css：

```
-webkit-transform: rotate(-45deg);
-moz-transform: rotate(-45deg);
-ms-transform: rotate(-45deg);
-o-transform: rotate(315deg);
transform: rotate(-45deg);
margin: 30px 115px 0 0; 
```

在 Opera 浏览器中查看 DIV 及其文本旋转：

![在此处输入图像描述](../Images/e9b39513a1230c20acab43b512044fe4.png)

**编辑：** 它应该显示相同：

![在此处输入图像描述](../Images/471df9964b4a29eb82a323336e57ece0.png)

# vb.net - 如何知道 vb.net 中的域名服务器？

> ID：14580024
> 
> 赞同：0
> 
> 时间：2013-01-29T09:53:17.653
> 
> 标签：vb.net

我想要一个 vb.net 函数。我们提供域名，它提供名称服务器和 IP。

代码是什么？

我知道我可以使用 webclient 来废弃各种 whois 网站。他们不喜欢那样并输入密码。我想要“好”的方式来做到这一点。

假设 google.com 的名称服务器是 ns1.google.com 我想知道 google.com 的名称服务器是什么。

例如：

如果我们去[http://who.is/whois/google.com/](http://who.is/whois/google.com/)

我们会看到 google.com 有 ns1.google.com ns2.google.com ns3.google.com 和 ns4.google.com

我想要一个函数说`FindNS("Google.com")`屈服`"ns1.google.com"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:58:33.107

```
System.Net.Dns.GetHostEntry("ns1.google.com").AddressList; 
```

这将返回链接到您提供的主机名的所有 IP 的数组。

# javascript - Sharepoint 2010 中的 HTML5 canvas.getContext("2d")

> ID：14580025
> 
> 赞同：1
> 
> 时间：2013-01-29T09:53:22.403
> 
> 标签：javascript, canvas, html5-canvas

我正在为 Sharepoint 2010 编写 Visual WebPart，我需要使用 HTML5 画布。

```
 document.getElementById("testDiv").innerHTML = '<a href="http://c-blues.com">Right</a>';
        ctx = canvas.getContext("2d");
        cxt.fillStyle="#000000;
        cxt.fillRect(0,0,150,75); 
```

但是有错误：

**运行时错误 Microsoft JScript：对象不支持属性或方法“getContext”**

当我尝试在 ASP.NET Web 应用程序中使用此代码时，它工作正常。怎么了？\

PS：所有代码：

```
<!DOCTYPE HTML>
<style type="text/css">
.clocks {
    height: 500px;
    margin: 25px auto;
    position: relative;
    width: 500px;
} 
```

```
var canvas;
var ctx;
var clockRadius = 250;
var clockImage;

// функции отрисовки :
function clear() { // очистка
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
}

function drawScene() { // основная функция drawScene
    clear(); // очистка канвы

    // получение текущего времени
    var date = new Date();
    var hours = date.getHours();
    var minutes = date.getMinutes();
    var seconds = date.getSeconds();
    hours = hours > 12 ? hours - 12 : hours;
    var hour = hours + minutes / 60;
    var minute = minutes + seconds / 60;

    // сохранение
    ctx.save();

    // отрисовка часов (как бэк)
    ctx.drawImage(clockImage, 0, 0, 500, 500);

    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.beginPath();

    // отрисовка чисел
    ctx.font = '36px Arial';
    ctx.fillStyle = '#000';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    for (var n = 1; n <= 12; n++) {
        var theta = (n - 3) * (Math.PI * 2) / 12;
        var x = clockRadius * 0.7 * Math.cos(theta);
        var y = clockRadius * 0.7 * Math.sin(theta);
        ctx.fillText(n, x, y);
    }

    // часы
    ctx.save();
    var theta = (hour - 3) * 2 * Math.PI / 12;
    ctx.rotate(theta);
    ctx.beginPath();
    ctx.moveTo(-15, -5);
    ctx.lineTo(-15, 5);
    ctx.lineTo(clockRadius * 0.5, 1);
    ctx.lineTo(clockRadius * 0.5, -1);
    ctx.fill();
    ctx.restore();

    // минуты
    ctx.save();
    var theta = (minute - 15) * 2 * Math.PI / 60;
    ctx.rotate(theta);
    ctx.beginPath();
    ctx.moveTo(-15, -4);
    ctx.lineTo(-15, 4);
    ctx.lineTo(clockRadius * 0.8, 1);
    ctx.lineTo(clockRadius * 0.8, -1);
    ctx.fill();
    ctx.restore();

    // секунды
    ctx.save();
    var theta = (seconds - 15) * 2 * Math.PI / 60;
    ctx.rotate(theta);
    ctx.beginPath();
    ctx.moveTo(-15, -3);
    ctx.lineTo(-15, 3);
    ctx.lineTo(clockRadius * 0.9, 1);
    ctx.lineTo(clockRadius * 0.9, -1);
    ctx.fillStyle = '#0f0';
    ctx.fill();
    ctx.restore();

    ctx.restore();
}

function init() {
    canvas = document.getElementById("canvas");
    if (canvas.getContext) {
        document.getElementById("testDiv").innerHTML = '<a href="http://c-blues.com">Right</a>';
        ctx = canvas.getContext("2d");
       clockImage = new Image();
        //            setInterval(drawScene, 1000);
        cxt.fillStyle="Red";
        cxt.fillRect(0,0,150,75);
    }
    else {
        ctx = canvas.getContext("2d");
        cxt.fillStyle="Green";
        cxt.fillRect(0,0,150,75);
        document.getElementById("testDiv").innerHTML = '<a href="http://c-blues.com">Error</a>';
    }
}
// инициализация
window.onload = init;
</script>

<div class="clocks">
<canvas id="canvas" width="500" height="500">
</canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:29:13.727

您使用的浏览器似乎不支持该`<canvas>`元素。您发布的错误只是表明该对象（画布）不支持该方法`getContext`。

请参阅[这篇文章](https://stackoverflow.com/questions/2745432/best-way-to-detect-that-html5-canvas-is-not-supported)，其中解释了如何检查您的浏览器是否支持`canvas`. 实际上答案包含您试图用来**检测**是否支持画布的代码 - 在您的情况下似乎**不**支持画布：

```
function isCanvasSupported(){
  var elem = document.createElement('canvas');
  return !!(elem.getContext && elem.getContext('2d'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T05:54:58.873

```
ctx = canvas.getContext("2d");
cxt.fillStyle="#000000; 
```

**ctx**和**cxt** =)

对

```
ctx.fillStyle="#000000; 
```

# asp.net-mvc - Onion 架构 - ASP.NET MVC 需要参考 Infrstructure？

> ID：14580029
> 
> 赞同：0
> 
> 时间：2013-01-29T09:53:36.093
> 
> 标签：asp.net-mvc, architecture, reference

我不确定我是否在搜索主题方面做得很好，但我似乎无法找到我的问题的答案。根据我的理解，Onion Architecture 的 UI 和 Infrastructure 在同一层。假设我在 ASP.NET MVC 项目中有我的 UI，我有 DAL 项目，这是我的基础设施。假设我的代码如下所示：

**核：**

**//IOrderSaver接口也被定义在核心上**

```
public class OrderService
{
    private IOrderSaver orderSaver;

    public OrderService(IOrderSaver orderSaver)
    {
        this.orderSaver = orderSaver;
    }

    public void AcceptOrder(Order order)
    {
        orderSaver.SaveOrder(order);
    }
} 
```

**基础设施（DAL）：**

```
public class OrderSaverDAL : IOrderSaver
{
    //implementation goes here
} 
```

现在，在我的 UI（ASP.NET MVC）中，我想实例化 OrderService 类，以便它可以接受订单。为了让 UI 做到这一点，它必须将 IOrderSaver 传递给构造函数。它需要通过 OrderSaverDAL。

**问题**：

1.  UI (ASP.NET MVC) 是否需要引用 OrderSaverDAL？根据我对 Onion Architecture 的理解（如果我理解正确的话），UI 应该没有对 DAL 的引用。有人可以解释一下吗？

2.  如果我不需要从我的 ASP.NET MVC 项目中引用 OrderSaverDAL，我将如何在 ASP.NET MVC 中构造 OrderService？您能否通过提供有关如何实现此目的的示例代码来指导我？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:23:36.577

您需要一个额外的**配置模块/层**来连接 ui 和 dal。如果您自己实现此功能而不进行反射，则此配置模块需要所有参考。

通常[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)与[依赖注入容器](http://en.wikipedia.org/wiki/Dependency_injection#Automatically_injected_dependency)一起工作，该容器可以在运行时通过配置文件或检查本地程序集来解析引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:14:48.530

> 1.  UI (ASP.NET MVC) 是否需要引用 OrderSaverDAL？根据我对 Onion Architecture 的理解（如果我理解正确的话），UI 应该没有对 DAL 的引用。有人可以解释一下吗？

你说得对，UI 在逻辑上不应该依赖于 DAL。

然而，正如 k3b 所指出的，进行依赖倒置（洋葱架构严重依赖其）的一种常见方法是通过 DI 容器。然后，您需要某种[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)，这是使用容器组合应用程序对象图的地方。组合根必须是“无所不知”的，并且需要对每个项目的引用才能将其连接起来。

事实证明，UI 通常是托管合成根的位置，因为 UI 是应用程序的自然起点，非常适合在正确的时间进行合成。您可以为您的合成根创建一个单独的项目，但这不太方便。

# joomla - Joomla 样式表覆盖

> ID：14580031
> 
> 赞同：1
> 
> 时间：2013-01-29T09:53:46.423
> 
> 标签：joomla, joomla2.5, joomla-k2

我正在为 k2 创建一个模板覆盖（尽管我猜这个问题在某些方面可能适用于任何 Joomla 扩展）。

现在我已经创建了我的覆盖`template/html/com_k2`非常好。然后我去更新样式表。现在据我所知，我可以做以下两件事之一：

1.  更改 K2 CSS 样式表。但这意味着每次我更新 k2 时，样式表都会被覆盖——远非理想！

2.  在我的模板中添加一个新的 K2 特定样式表。但这意味着我有效地加载了 K2 样式表两次 - 一次用于组件，然后再次用于模板 k2 样式表。现在通常这不会是一个主要问题 - 但由于 K2 样式表超过 1000 行长 - 这将开始产生性能影响 - 特别是因为 k2 不是我将需要的唯一样式表覆盖！

有没有替代样式表的替代方法？因为正如我所说，这两个想法都远非完美！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:30:12.117

将自定义 css 规则放在哪里并不重要。您最好将它们放在 Joomla 中！模板的 custom.css 文件。

但是，如果您担心一个额外的 css 文件，请查看您的页面：您可能有超过 10 个，具体取决于模板和扩展名：因此处理额外的 css 文件不会有任何影响；但“正确的方式”需要：

a) 将所有 css 压缩为一个（注意不同的相对路径）

b) 缩小结果

这当然意味着编辑所有添加 css 规则和链接的组件和模块视图，这是一项巨大的工作。

# javascript - 绘制 5 点星的算法

> ID：14580033
> 
> 赞同：4
> 
> 时间：2013-01-29T09:53:51.537
> 
> 标签：javascript, math, canvas

我目前正在研究一种使用 JavaScript 在画布上绘制标准 5 点星的解决方案。我在那里的一部分，但无法完全弄清楚。我会很感激任何人可能有的任何提示或指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T08:10:42.597

n 点星，点均匀分布在一个圆圈周围。假设第一个点在 0,r（顶部），圆以 0,0 为中心，我们可以从一系列旋转 2π/(2n+1) 的三角形构造它：

![5分星](../Images/b8876840bfc348838bfc2455120e6187.png)

定义一个旋转函数：

```
function rotate2D(vecArr, byRads) {
    var mat = [ [Math.cos(byRads), -Math.sin(byRads)], 
                [Math.sin(byRads), Math.cos(byRads)] ];
    var result = [];
    for(var i=0; i < vecArr.length; ++i) {
        result[i] = [ mat[0][0]*vecArr[i][0] + mat[0][1]*vecArr[i][1],
                      mat[1][0]*vecArr[i][0] + mat[1][1]*vecArr[i][1] ];
    }
    return result;
} 
```

通过旋转 n 个三角形构造一个星形：

```
function generateStarTriangles(numPoints, r) {
    var triangleBase = r * Math.tan(Math.PI/numPoints);
    var triangle = [ [0,r], [triangleBase/2,0], [-triangleBase/2,0], [0,r] ];
    var result = [];
    for(var i = 0; i < numPoints; ++i) {
       result[i] = rotate2D(triangle, i*(2*Math.PI/numPoints));
    }
    return result;
} 
```

定义一个函数来绘制任何给定的多边形数组：

```
function drawObj(ctx, obj, offset, flipVert) {
   var sign=flipVert ? -1 : 1;
   for(var objIdx=0; objIdx < obj.length; ++objIdx) {
      var elem = obj[objIdx];
      ctx.moveTo(elem[0][0] + offset[0], sign*elem[0][1] + offset[1]);
      ctx.beginPath();
      for(var vert=1; vert < elem.length; ++vert) {
        ctx.lineTo(elem[vert][0] + offset[0], sign*elem[vert][1] + offset[1]);
      }
      ctx.fill();
   }
} 
```

使用上面的方法绘制一个 5 点星：

```
var canvas = document.getElementsByTagName('canvas')[0];
var ctx = canvas.getContext('2d');
var offset = [canvas.width/2, canvas.height/2];
ctx.fillStyle="#000000";
var penta = generateStarTriangles(5, 200);
drawObj(ctx, penta, offset, true); 
```

看这里[http://jsbin.com/oyonos/2/](http://jsbin.com/oyonos/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T15:34:29.360

我对 Chris 发布的代码进行了一些更改，以便对我有用：

```
var alpha = (2 * Math.PI) / 10; 
var radius = 12;
var starXY = [100,100]

canvasCtx.beginPath();

for(var i = 11; i != 0; i--)
{
    var r = radius*(i % 2 + 1)/2;
    var omega = alpha * i;
    canvasCtx.lineTo((r * Math.sin(omega)) + starXY[0], (r * Math.cos(omega)) + starXY[1]);
}
canvasCtx.closePath();
canvasCtx.fillStyle = "#000";
canvasCtx.fill(); 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-01T15:18:22.557

这是 Turtle Geometry 使事情变得简单的问题：

5分星：

重复5次：

前轮 100，右 144，前轮 100，左 72，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T10:04:27.000

您需要绘制内部位，一个完整的圆是 2 * PI 弧度。在下面的示例中，r 是包围圆的半径。下面的代码来自一个开源项目（[http://github.com/CIPowell/PhyloCanvas](http://github.com/CIPowell/PhyloCanvas)）

```
var alpha = (2 * Math.PI) / 10; 
// works out the angle between each vertex (5 external + 5 internal = 10)
var r_point = r * 1.75; // r_point is the radius to the external point

for(var i = 11; i != 0; i--) // or i could = 10 and you could use closePath at the end
{
var ra = i % 2 == 1 ? rb: r;

var omega = alpha * i; //omega is the angle of the current point
    //cx and cy are the center point of the star.
node.canvas.lineTo(cx + (ra * Math.sin(omega)), cy + (ra * Math.cos(omega)));

}

//Store or fill. 
```

注意：这是给猫剥皮的众多方法之一，我相信其他人有另一种方法。此外，递减循环而不是递增循环的原因是性能。i != 0 比 i < 10 更有效，并且 i-- 比 i++ 更有效。但是性能对我的代码很重要，对你的代码可能并不那么重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-05T20:43:04.300

我自己也在寻找这样的算法，想知道我是否可以自己发明一个。结果不是太难了。所以这里有一个创建星星和多边形的小函数，带有设置点数、外半径和内半径的选项（后者只适用于星星）。

```
function makeStar(c, s, x, y , p, o, i) {
    var ct = c.getContext('2d');
    var points =  p || 5;
    var outer_radius = o || 100;
    var inner_radius = i || 40;
    var start_x = x || 100;
    var start_y = y || 100;
    var new_outer_RAD, half_new_outer_RAD;
    var RAD_distance = ( 2 * Math.PI / points);  
    var RAD_half_PI = Math.PI /2; 
    var i;
    ct.moveTo(start_x, start_y);
    ct.beginPath();

    for (i=0; i <= points; i++) {
        new_outer_RAD = (i + 1) * RAD_distance;     
        half_new_outer_RAD = new_outer_RAD - (RAD_distance / 2); 

        if (s) {
            ct.lineTo(start_x + Math.round(Math.cos(half_new_outer_RAD - RAD_half_PI) * inner_radius), start_y + Math.round(Math.sin(half_new_outer_RAD - RAD_half_PI) * inner_radius));
        }

        ct.lineTo(start_x + Math.round(Math.cos(new_outer_RAD - RAD_half_PI) * outer_radius), start_y + Math.round(Math.sin(new_outer_RAD - RAD_half_PI) * outer_radius));   

    }

    ct.stroke();
}

var canvas = document.getElementById('canvas');

makeStar(canvas);
makeStar(canvas, true, 120,200, 7, 110, 40); 
```

# vxworks - 任务调度

> ID：14580037
> 
> 赞同：0
> 
> 时间：2013-01-29T09:54:02.957
> 
> 标签：vxworks

我的系统由七个任务组成。我创建了一些演示 RTP 来检查我的系统，如下所示：

```
 int main()
    {
        taskSpawn("/task1" , 107 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task1, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task2" , 106 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task2, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task3" , 105 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task3, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task4" , 104 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task4, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task5" , 105 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task5, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task6" , 106 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task6, 0,0,0,0,0,0,0,0,0,0);
        taskSpawn("/task7" , 101 , VX_NO_STACK_FILL , 2000 , (FUNCPTR)task7, 0,0,0,0,0,0,0,0,0,0);

        taskExit(OK);
    }

void task1() { taskDelay(7); }
void task2() { taskDelay(13); }
void task3() { taskDelay(313); }
void task4() { taskDelay(19); }
void task5() { taskDelay(188); }
void task6() { taskDelay(10); }
void task7() { taskDelay(10); } 
```

我运行了 RTP 并连接了性能分析器。性能分析器给了我每个任务的 CPU 使用率。我要检查的是每个任务是否按时执行，例如我想确保 task1 每 7*16 = 112 毫秒执行一次（我的系统时钟频率是 60HZ，这意味着调度程序每 16 毫秒调用一次）

问题： 1\. 探查器中是否有任何方法可以确保发生这种情况。2.如果没有怎么检查这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:06:40.973

我从来没有使用过profiler，所以我对它一无所知，但是我之前在vxworks中做过你想要的。这是我的做法：

1）产生一个优先级= 255（或低于任何实时任务）的任务，它消耗100％的CPU，如下所示：

* * *

```
void lowPriTask()
{
    volatile int forever = 1;
    while (forever) {}
} 
```

* * *

2) 使用 taskSwitchHookAdd() 安装任务切换挂钩，并且您的切换挂钩回调应该跟踪（在内存中）旧的 taskId 和新的 taskId，以及 tickGet()，基本上只是在内存中编译此信息的列表。

3）然后当你运行你的任务一段时间后，将内存转储到一个文件中，并找出一些很酷的方法来检查它/可视化它，也许在 excel 左右的帮助下。

这个 lowPri 任务的原因是因为在 vxworks 中 taskSwitchHook 仅在发生任务切换时调用（显然），微妙的细节是如果系统空闲则不会发生任务切换。因此，如果您正在跟踪任务切换进出的时间，并且系统处于空闲状态，那么您将有一些任务似乎占用大量 CPU 时间，而实际上系统处于空闲状态。像这样：

*   taskSwitch_In
*   任务运行
*   任务已完成，但没有其他任务准备好，因此系统进入空闲状态....
*   一些滴答声之后，任务就准备好了……
*   taskSwitch_Out

因此，如果您有一个消耗 100% 空闲时间的低优先级任务，那么总是会在任何（更高优先级）任务完成后立即强制切换任务。所以你总是会看到这样的模式：

*   taskSwitch_In
*   任务运行
*   taskSwitch_Out（在没有其他任务准备好的情况下到 lowPriTask）

除此之外，它还可以根据此低优先级任务运行的时间量准确估计有多少空闲时间。

它很粗糙，但它有效。

# android - 从其他类更改图像

> ID：14580045
> 
> 赞同：0
> 
> 时间：2013-01-29T09:54:41.193
> 
> 标签：android

我有主要活动类和主要布局。我还有其他名为 time 的课程。我想从其他类更改设置主布局上的图标。我怎样才能做到这一点 ？

```
public class Time extends TimerTask
public class Main extends Activity 
```

时间课程每 3 秒运行一次。在运行方法中，我尝试过

```
 ImageView image;
@Override
public void run() {
              image = (ImageView) findViewById(R.id.imageView1);
              image.setImageResource(R.drawable.android3d);
    } 
```

但是，给出错误。此类中未实现“findViewById”。

编辑 ：

```
<ImageView
    android:id="@+id/imageView1"
    android:contentDescription="@string/isViolate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_weight="0.04"
    android:src="@drawable/set2" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:57:01.197

尝试使用

```
image = (ImageView) getView().findViewById(R.id.imageView1); 
```

# java - 如何禁用 ImageView 中的图像拉伸？

> ID：14580047
> 
> 赞同：2
> 
> 时间：2013-01-29T09:54:50.413
> 
> 标签：java, android

此视图有一些 ImageView 和图像。ImageView 是 100px/100px，但图像是 50px/50px。我不希望图像填充 ImageView 中的全部空间，即我希望 ImageView 在 ImageView 的中心包含我的图像而不拉伸。我该怎么做？

更新：对不起，我犯了一个错误。我的 ImageView 是 50px/50px，我的图像是 100px/100px。你怎么看待这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-08T22:26:39.993

添加到您的 ImageView：

```
android:scaleType="center" 
```

**请注意**，如果您使用 Android Studio xml 布局预览，`android:background="@drawable/my_image"`您仍然会看到您的图像被拉伸（在运行时它不会拉伸）。但是，如果您仍然想在 IDE 预览中看到您的 ImageView 背景（未拉伸），请使用`android:src="@drawable/my_image"`而不是背景属性。（无论如何 scaleType 应该是中心）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:57:31.637

您需要`android:scaleType`在图像视图上设置属性。如果图像比您的视图大，请使用, ,选项`centerInside`之一。`fitXY``fitStart``fitEnd`

您可以在 ImageView 类的 Android 开发人员文档中获得所需的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:57:50.707

设置`android:scaleType`适当的值，你可以给`centerCrop`.

例如`android:scaleType="centerCrop"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:58:15.980

在 ImageView 中，我们有一个名为 scaleType 的属性，如下面的代码所示。

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="16dp"
    android:layout_marginTop="94dp"

    android:scaleType="center"

    android:src="@drawable/ic_launcher" /> 
```

它不会缩放您的图像。

# vba - VBA：应用程序.打印输出

> ID：14580048
> 
> 赞同：1
> 
> 时间：2013-01-29T09:54:51.523
> 
> 标签：vba, printing, ms-word

我正在使用此代码在 vba 中打印三次文档：

```
...     
 Application.PrintOut fileName:="", Range:=wdPrintAllDocument, Item:= _
        wdPrintDocumentContent, Copies:=1, Pages:="", PageType:=wdPrintAllPages, _
        ManualDuplexPrint:=False, Collate:=True, Background:=True, PrintToFile:= _
        False, PrintZoomColumn:=0, PrintZoomRow:=0, PrintZoomPaperWidth:=0, _
        PrintZoomPaperHeight:=0
... 
```

有时如果我运行这行代码，它会停止工作。单词冻结，什么也没发生。我只能停止这个过程。我检查了打印机设置

```
MsgBox Application.ActivePrinter 
```

活动打印机存在并准备就绪。还有什么问题？我用的是 2007 字。

感谢提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T10:12:44.363

尝试使用 Document.PrintOut 因为 Application.PrintOut 打印**活动文档**，因此如果您同时使用另一个 word 文档，您可以将文档发送到打印机而不是所需的文档。

# java - 将excel单元格内容附加到新的excel文件

> ID：14580049
> 
> 赞同：1
> 
> 时间：2013-01-29T09:54:59.293
> 
> 标签：java, webdriver, apache-poi, selenium-webdriver, jxl

我有一段代码可以读取内容并将其粘贴到新的 excel 文件中

代码是

```
for(int rownum=2; rownum<=datatable.getRowCount(testName); rownum++)
    for(int colnum=1; colnum<=datatable.getColumnCount(testName); colnum++) {
        datatable.getCellData(testName, "Serial", rownum);
        // Get value of other column  Serial :)
        String getdata = datatable.getCellData(testName, "Rules", rownum);
        if (datatable.getCellData(testName, "Serial", rownum).equals(serial)) {
            datatable.getCellData(testName, colnum, rownum);
            datatable.setCellData(testName, "Result", rownum,"PASS" );
            datatable = new Xls_Reader(System.getProperty("user.dir")+"//src//config//Result.xlsx");
            datatable.setCellData("Data Sheet", "Results", rownum,"PASS" );
            datatable.setCellData("Data Sheet", "Summary", rownum, getdata);
        }
    } 
```

现在这是作为 (String ,string) 传递的，这是针对运行的单个测试用例的。问题是当我将 Contents 插入 Result 时，它将存储在单元格 2, 3 中。这将被一次又一次地覆盖。我想附加多个工作表中的所有多个执行案例，并且必须附加结果。那可能吗 ？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:36.330

我会做一个疯狂的猜测，但我想我知道发生了什么。

在开始这段代码之前，您已经阅读了存储在 dataSheet 变量中的 XSL 表。片段开头的 for 循环将查看 dataSheet 变量的内容，以检查每次迭代的完成条件。

如果序列值等于某个值，则执行一些操作，然后用新文档覆盖数据表变量，然后在其中存储一些值。当循环完成时，它将查看新的数据表循环是否完成，据我所知，它将永远这样下去，在每次迭代时替换原始文档。

为了解决这个问题，至少将新创建的数据表放在一个单独命名的变量中，并在进入循环之前将原始数据表的宽度和高度存储在变量中，这样它们在循环执行期间不会被更改。从外观上看，您也是从数据表中获取数据而不实际使用它，还是只有我一个人？

# django - django-seo - 什么都不显示

> ID：14580053
> 
> 赞同：1
> 
> 时间：2013-01-29T09:55:11.380
> 
> 标签：django

我的 django 项目中有一个应用程序。

我创建了 seo.py 文件并添加：

从 rollyourown 导入 seo

```
class MyMetadata(seo.Metadata):
    title = seo.Tag(head=True, max_length=68)
    description = seo.MetaTag(max_length=155)
    keywords = seo.KeywordTag()

    class HelpText:
        title  = "This will appear in the window/tab name, as well as in search results."
        keywords = "A comma separated list of words or phrases that describe the content"
        description = "This will appear in the description"

    class Meta:
        seo_views = ('app_name', ) 
```

在我的 base.html 中，`head`我添加了：

```
{% load seo %}
{% get_metadata %} 
```

但什么也没有显示。怎么了？（当然，我在管理面板中添加了数据 - 我的元数据（查看））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:59:14.830

如果您没有将该应用程序放在 settings.py 中的 INSTALLED_APPS 变量中，则加载模板标签库将不起作用。你把rollyourown.seo放在那里了吗？

您需要设置的路径应采用“/pagename/”格式。对于您的主页，您只需要'/'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T11:37:54.877

@ringfirebug，可能您已经解决了您的问题，但我会回答。您不需要为每个页面设置路径。使用模型、模型实例或视图。从您的配置中，我看到您在 seo_views 中仍然有一个默认视图。它应该看起来像这样开始工作：

```
class Meta:
    seo_views = ('your_app_name.view_name',)
    seo_models = ('your_model_1', 'your_model_2',) 
```

因此，当在模型或视图中创建新的元数据条目时，您将能够在选择框中看到这些模型和/或视图。

接下来，在您的模板中，如果它仍然不起作用，您必须准确获取该对象的 seo 数据，这对我有用。

```
{% load seo %}
{% get_metadata for obj as metadata %}
{% metadata %} 
```

这里的 'obj' 是对象，例如，您通过 RequestContext 的视图将产品路径到模板。

如果你设法解决它，请告诉我。

顺便说一句，如果您已经设法在元标记中使用外部数据，例如“年度最佳 {{ product.name }}”，请告诉我如何操作。

# javascript - 如何获取日期文本字段自动填充

> ID：14580054
> 
> 赞同：-3
> 
> 时间：2013-01-29T09:55:13.003
> 
> 标签：javascript, jquery

我想要一个日期文本字段来自动填充。

假设我有一个日期，例如 2013 年 1 月 4 日，并且我有一个名为“日期”的文本字段。我想要的是这个文本字段应该自动填充为 2013-1-4。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:02:00.183

```
var d = new Date();

var month = d.getMonth()+1;
var day = d.getDate();

var output = d.getFullYear() + '/' +
 (month<10 ? '0' : '') + month + '/' +
 (day<10 ? '0' : '') + day;` 
```

onload 请把这个功能放在你的页面中，只需要做一些你将完成的编程工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:02:54.687

**当前日期：**

```
date = new Date().toISOString().match(/(\d{4}\-\d{2}\-\d{2})/);
$('input[name=date]').val(date[1]); 
```

[当前日期演示](http://jsfiddle.net/fSP43/1/)

**预定义日期：**

```
var date = new Date("4 January 2013");
date = new Date(date.getTime()-date.getTimezoneOffset()*60*1000)
       .toJSON()
       .match(/(\d{4})\-[0]?(\d{1,2})\-[0]?(\d{1,2})T/);
$('input[name=date]').val(date[1]+'-'+date[2]+'-'+date[3]); 
```

[预定义日期演示](http://jsfiddle.net/fSP43/4/)

# kendo-ui - Kendo treeview checkchildren 即

> ID：14580058
> 
> 赞同：0
> 
> 时间：2013-01-29T09:55:29.710
> 
> 标签：kendo-ui, kendo-treeview

我有一个树视图

```
 $("#treeview").kendoTreeView({
    dataSource: { data: dati.toJSON()
    },
    checkboxes: {
        checkChildren: true
    },
    selected: false
}); 
```

但是，即当我检查 Root 节点时，childreb 没有检查..有人知道如何解决吗？

树视图位于剑道模式窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:29:41.680

此问题已在最新的 KendoUI 版本 2012.03.1315 中得到解决。现在它工作正常。

# android - android：使用 json 数据进行 ProgressDialog 后，ListView 或 Activity 不更新

> ID：14580060
> 
> 赞同：0
> 
> 时间：2013-01-29T09:55:37.013
> 
> 标签：android, listview, progressdialog

我搜索一天以找到我的错误。我没有任何成功。我有一个 ListView 的活动。ListView 每 5 分钟使用 json 数据更新一次。为了获取 json 数据，我将纬度和经度发布到我的服务器（使用 sql 过滤）。我每次都清除 ListView。`mylist.clear();`好的。这很好用。

LocationManager 总是更新位置（我用 Toast 检查它）。我过滤县以获取 json 数据。

```
JSONObject json = null;
           json = jsonFunctions.getJSONfromURL("http://myurl.de", mlat, mlon); 
```

但是当我离开一个县并进入一个新县时，ListView 不会使用新数据进行更新。它会在每次更新旧县的旧数据后显示。

但是，我还有其他活动

```
 Intent intent = new Intent(StartActivity.this, ReportActivity.class);
        startActivity(intent);
        finish(); 
```

在应用程序中，当我启动它并使用 ListView 回到活动时，具有正确 json 数据的新县可用......

我没有发现我的错误。你能帮我吗？

编码：

```
public class StartActivity extends ListActivity {
    private Timer autoUpdate;
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    Button btnShowLocation;

    // GPSTracker class
    GpsData gps;    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        btnShowLocation = (Button) findViewById(R.id.report_btn);
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(StartActivity.this, ReportActivity.class);
                startActivity(intent);
                finish();
            }
        });

        //new task().execute();
    }

     @Override
     public void onResume() {
      super.onResume();
      autoUpdate = new Timer();
      autoUpdate.schedule(new TimerTask() {
       @Override
       public void run() {
        runOnUiThread(new Runnable() {
         public void run() {
             //start GPS
             gps = new GpsData(StartActivity.this);
             Toast.makeText(StartActivity.this, "lat: " + gps.getLatitude() + "lon: " + gps.getLongitude(), Toast.LENGTH_SHORT).show();
             //start json download
             new task().execute();
         }
        });
       }
      }, 0, 300000); // updates each 5 min
     }

class task extends AsyncTask<String, String, Void>
{
private ProgressDialog progressDialog = new ProgressDialog(StartActivity.this);
    InputStream is = null ;
    String result = "";
    protected void onPreExecute() {
       progressDialog.setMessage("Status Update...");
       progressDialog.show();
       progressDialog.setOnCancelListener(new OnCancelListener() {
    @Override
        public void onCancel(DialogInterface arg0) {
        task.this.cancel(true);
       }
    });
     }
       @Override
    protected Void doInBackground(String... params) {
            //get Location Data
               double latitude = gps.getLatitude();
               double longitude = gps.getLongitude();
               String mlat = String.valueOf(latitude);
               String mlon = String.valueOf(longitude);

               //if (gps.latitude != 0.0) {

           JSONObject json = null;
           json = jsonFunctions.getJSONfromURL("http://myurl.de", mlat, mlon);

        if (json != null){

      try{
        JSONArray  earthquakes = json.getJSONArray("bing");
        mylist.clear();
        String myCity = "";
            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                //get the wright name for artID
                String myArt = getString(getResources().getIdentifier("list_" + e.getString("artID"), "string", getPackageName()));

                if (!(e.getString("county") == e.getString("city"))){
                    myCity = e.getString("city");
                }

                if (e.getString("city").equals("")){
                    myCity = e.getString("county");
                }

                // Get Time difference
                String clienttime = e.getString("clienttime");
                long mTime = (System.currentTimeMillis() - Long.valueOf(clienttime).longValue()) / (60 * 1000);

                map.put("id",  String.valueOf(i));
                map.put("mlat", e.getString("lat"));
                map.put("mlon", e.getString("lon"));
                map.put("first", myArt + ": " + e.getString("road") + ", " + myCity);
                map.put("second", mTime + " min. ago, " + e.getString("suburb"));
                mylist.add(map);
            }       
      }

      catch(JSONException e){
         Log.e("log_tag", "Error parsing data "+e.toString());
      }
      }
        else{
          mylist.clear();
          HashMap<String, String> map = new HashMap<String, String>();
            map.put("id",  "1");
            map.put("mlat", "51.6764996");
            map.put("mlon", "7.7664251");
            map.put("first", getString(R.string.no_data1));
            map.put("second", getString(R.string.no_data));
            mylist.add(map);
      }
      //}

            return null;

        }
    protected void onPostExecute(Void v) {
        ListAdapter adapter = new SimpleAdapter(StartActivity.this, mylist , R.layout.main, 
                new String[] { "first", "second" }, 
                new int[] { R.id.item_title, R.id.item_subtitle });

setListAdapter(adapter);

final ListView lv = getListView();
lv.setTextFilterEnabled(true);  
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
        @SuppressWarnings("unchecked")
        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
        Toast.makeText(StartActivity.this, "Map View is coming soon", Toast.LENGTH_SHORT).show(); 
        //Intent intent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("geo:" + o.get("mlat") + "," + o.get("mlon") + "?z=20"));
        //startActivity(intent);
    }
});
            this.progressDialog.dismiss();

        } 
    }

@Override
public void onPause() {
 super.onPause();
 autoUpdate.cancel();
 gps.stopUsingGPS();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:04:25.143

不要每次在 postExecute 中创建适配器，只需使用 adepter.clear 然后在调用 notifyDataSetChanged 之后添加新数据。

# asp.net - UpdatePanel 删除了 JQuery 移动样式 (CSS)

> ID：14580061
> 
> 赞同：0
> 
> 时间：2013-01-29T09:55:39.247
> 
> 标签：asp.net, css, jquery, updatepanel

我试过浏览这个网站和谷歌的许多选项，关于在回发之前保存 UpdatePanel 的状态有各种想法，但是我不确定如何实现这样的事情。

我在刷新 GridView 的 ASP.NET 页面中有一个 UpdatePanel - 我的代码运行良好。然而，在异步回发上，它会导致 JQuery CSS 消失，这使得文本框看起来是圆形的，文本的颜色等等......

我不需要添加任何 JQuery 事件 - 但只需要知道如何将样式添加回面板 - 重新添加整个框架也是一种选择。

我会将代码添加到我的项目中，但代码量很大 - 以下是我在 Site Master 上的 JQuery 引用：

```
<!DOCTYPE html> 
<html class="ui-mobile"> 
<head>
<!-- Apple Settings -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width, initial-scale=1" /> 

<!-- Apple Icons -->
<link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
<link rel="apple-touch-icon" href="/touch-icon-iphone.png" /> 
<link rel="apple-touch-icon" sizes="72x72" href="/touch-icon-ipad.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/touch-icon-ipad-retina.png" />
<link rel="icon" href="/touch-icon-ipad-retina.png" />

<!-- Style Sheets -->
<link rel="stylesheet" href="/themes/Sequencing_App_V2.min.css" />
<link rel="stylesheet" href="/css/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="/css/Custom.css" />

<!-- JavaScript -->
<script type="text/javascript" src="/js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/javascript/Custom.js"></script>
<script type="text/javascript">

</script>
<script type="text/javascript" src="/js/jquery.mobile-1.2.0.min.js"></script>

<!-- Content Placeholders -->
<title><asp:ContentPlaceHolder ID="page_title" runat="server"></asp:ContentPlaceHolder></title>
<asp:ContentPlaceHolder ID="head" runat="server"></asp:ContentPlaceHolder> 
```

有人可以在这里帮忙吗？

感谢您提供的所有帮助。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:49:07.233

jQuery mobile 在构建时添加了许多额外的 html 元素。

这些将在 PostBack 后丢失，您需要为 UpdatePanel 中的新元素重新创建它。

如果您使用列表视图来呈现数据，则需要在 PostBack 之后刷新它

```
<script type="text/javascript">
    function handleEndRequest(sender, args)
    {
        $('table').listview('refresh');
        //Refresh any other elements
    }

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(handleEndRequest);
</script> 
```

# iphone - 如何更改突出显示的表格视图中心标签？

> ID：14580063
> 
> 赞同：0
> 
> 时间：2013-01-29T09:55:50.697
> 
> 标签：iphone, ios, uitableview

表格视图中心单元格总是像选择器一样突出显示。如果我选择中心单元格，则返回该值。如果我在时间中心点滚动表格必须突出显示值仅更改（如选择器操作）如何做到这一点？此任务的任何示例代码。提前致谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UILabel     *modelLabel;
        UIButton    *modelButton;
        modelButton                 = [UIButton buttonWithType:UIButtonTypeCustom];
        modelButton.frame           = CGRectMake(0.0, 0.0, LABEL_WIDTH, LABEL_HEIGHT);
        modelButton.tag             = indexPath.row+100;
        [modelButton addTarget:nil action:@selector(modelButtonAction:) forControlEvents:UIControlEventTouchUpInside];
        [[cell contentView] addSubview:modelButton];
        modelLabel                  = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, LABEL_WIDTH, LABEL_HEIGHT)];
        modelLabel.text             = [NSString stringWithFormat:@"%@", [[modelArray objectAtIndex:indexPath.row] valueForKey:@"Model"]];
        modelLabel.tag              = indexPath.row+1000;
        modelLabel.backgroundColor  = [UIColor clearColor];
        modelLabel.textColor        = [UIColor grayColor];
        modelLabel.alpha            = 0.5;
        modelLabel.textAlignment    = UITextAlignmentCenter;
        modelLabel.font             = EUROSLITE_FONT(14);
        [[cell contentView] addSubview:modelLabel];
    }

    return cell;
} 
```

行数是 700、800，像这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:02:34.663

A`UITableView`扩展`UIScrollView`。因此，您可以实现以下委托：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

在那里您可以检查`scrollView.contentOffset`并将相应的单元格设置为突出显示。请注意，这不是中心单元。您需要添加`(int)(scrollView.frame.size.height/2)-(int)(cell.frame.size.height/2)`.`scrollView.contentOffset.y`

示例（请取消突出显示所有其他单元格）：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [[tableView visibleCells] makeObjectsPerformSelector:@selector(setHighlighted:) withObject:[NSNumber numberWithBool:NO]];

    CGPoint center = CGPointMake(0, scrollView.contentOffset.y+(int)(scrollView.frame.size.height/2));
    NSIndexPath *cellIndexPath = [tableView indexPathForRowAtPoint:center];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:cellIndexPath];
    [cell setHighlighted:YES];
} 
```

# url-rewriting - nginx php文件重写url

> ID：14580066
> 
> 赞同：5
> 
> 时间：2013-01-29T09:55:55.903
> 
> 标签：url-rewriting, nginx, rewrite

所以使用 apache 我有一个文件夹：

www.domain.com/folder/folder1/index.php?word=blahblah

我希望访问 www.domain.com/folder/folder1/blahblah 的用户被重定向到上述 URL，而不更改 URL。

因此，我在文件夹/文件夹 1/ 中有以下 .htaccess，它运行良好：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+)$ index.php?word=$1 
```

所以我想用 nginx 实现相同的功能，我使用了两个转换器： [http](http://www.anilcetin.com/convert-apache-htaccess-to-nginx/) ://www.anilcetin.com/convert-apache-htaccess-to-nginx/结果：

```
if (!-f $request_filename){
    set $rule_0 1$rule_0;
}
if (!-d $request_filename){
    set $rule_0 2$rule_0;
}
if ($rule_0 = "21"){
    rewrite ^/(.+)$ /index.php?word=$1;
} 
```

和[http://winginx.com/htaccess](http://winginx.com/htaccess)结果：

```
 if (!-e $request_filename){ rewrite ^(.+)$ /index.php?word=$1; } 
```

现在，我尝试了两种方法，但都不起作用。我尝试将它们插入

```
location / {
} 
```

或在

```
location /folder/folder1 {
} 
```

或在

```
location ~ \.php$ {
} 
```

在所有位置我都收到 404 错误

nginx 错误报告“从上游读取响应标头时主脚本未知”或“没有这样的文件或目录”。

有人可以启发我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:47:39.147

首先，不要使用`if`. 如果是邪恶的-> [http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)

您可以使用以下重写规则来完成此操作。

```
rewrite ^/folder/folder1/(.*)$ /folder/folder1/index.php?word=$1 last; 
```

将此重写规则放在您的`location / {}`块上方

# rebar - 尝试构建钢筋时出现“未捕获的 rebar_core 错误”

> ID：14580071
> 
> 赞同：5
> 
> 时间：2013-01-29T09:56:07.160
> 
> 标签：rebar, erl

我必须在 riak 上添加和删除节点。为此，我正在尝试按照以下链接中的步骤构建钢筋：[https ://github.com/basho/rebar](https://github.com/basho/rebar)

当我运行引导命令时，我得到以下关于 erlang 库的信息：

```
**Uncaught error in rebar_core: {error,{erl_interface,include,"code:lib_dir(erl_interface)is unable to find the erl_interface library."}}** 
```

我正在使用 riak 1.2.1 版本和 erlang 版本 R15B01。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-05-12T12:39:11.240

[尝试为 Elixir 安装HTTPoison](https://hex.pm/packages/httpoison)包时出现相同的错误消息（这取决于[idna](https://hex.pm/packages/idna)）。

在 Fedora 上，我只需要`yum install erlang`……修复它。

安装 Erlang 源代码似乎已经解决了类似的[问题。](https://github.com/edgurgel/httpoison/issues/32)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-05T20:32:27.660

RHEL 7 上的 Couchdb 2.0：

```
sudo yum install erlangrebar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:10:56.053

我能够解决这个问题。由于访问限制，rebar 无法访问 erl_interface_library。一旦解决了这个问题，事情就顺利进行了！

# php - PHP MYSQL查询组合并添加两个相等的结果

> ID：14580073
> 
> 赞同：1
> 
> 时间：2013-01-29T09:56:20.237
> 
> 标签：php, mysql

有人请帮我解决我已经为此花了两天时间的 sql 查询....

我有一个下面给出的MYSQL查询

```
(SELECT
  c.cl_list as cl_list,
  c.name as name,
  pc.value as value,
  count( pc.value) as total
FROM
  projs p 
  LEFT JOIN classify_proj_new pc 
    ON p.proj_id = pc.proj_id_fk
  LEFT JOIN classify_list c 
    ON c.cl_list = pc.class_id_fk
WHERE
  MATCH ( p.title ) AGAINST ( 'jerm'  IN BOOLEAN MODE )
GROUP BY 
  c.cl_list,
  pc.value)
UNION ALL
(SELECT
  c.cl_list as cl_list,
  c.name as name,
  pc.value as value,
  count( pc.value) as total
FROM
  jerm p 
  LEFT JOIN classify_jerm_new pc
    ON p.jerm_id = pc.jerm_id_fk
  LEFT JOIN classify_list c
    ON c.cl_list = pc.class_id_fk
WHERE
  MATCH ( p.jermname ) AGAINST ( 'jerm'  IN BOOLEAN MODE )
GROUP BY
  c.cl_list,
  pc.value) 
```

这给出了（下）的结果：

```
 cl_list      name              value        total
------------------------------------------------------------------------------------
    1       department         jewller          2
    3       price                 50            2
    6       color                blue           1
    6       color                Red            2
    1       department         jewller          1
    6       color                Red            1 
```

但我试图得到一个结果，它可以添加重复值的总数并避免重复值....这样的事情（如下）：

```
 cl_list      name              value        total
------------------------------------------------------------------------------------
    1       department         jewller          3
    3       price                 50            2
    6       color                blue           1
    6       color                Red            3 
```

有人请帮助我，我对我的输出感到非常难过...

非常感谢您提前...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:05:18.030

从您的查询中选择并按 cl_list、名称和值分组：

```
SELECT
  cl_list,
  name,
  value,
  sum(total) as total
FROM (
  -- your current query here ...
) data
GROUP BY
  cl_list,
  name,
  value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:03:19.207

试试下面的代码。它将显示唯一的记录并避免重复。

```
GROUP BY c.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:05:10.033

`group`名称和值的结果

```
(SELECT c.cl_list as cl_list, c.name as name, pc.value as value, count( pc.value) as total
FROM projs p 
LEFT JOIN classify_proj_new pc ON p.proj_id = pc.proj_id_fk
LEFT JOIN classify_list c ON c.cl_list = pc.class_id_fk
WHERE MATCH ( p.title ) AGAINST ( 'jerm'  IN BOOLEAN MODE )
GROUP BY c.name, pc.value)
UNION ALL
(SELECT  c.cl_list as cl_list, c.name as name, pc.value as value, count( pc.value) as total
 FROM jerm p 
 LEFT JOIN classify_jerm_new pc ON p.jerm_id = pc.jerm_id_fk
 LEFT JOIN classify_list c ON c.cl_list = pc.class_id_fk
 WHERE MATCH ( p.jermname ) AGAINST ( 'jerm'  IN BOOLEAN MODE )
 GROUP BY c.name, pc.value) 
```

# tfs-sdk - 使用 TFS API，带有 .svnExe 等扩展名的文件类型会被忽略

> ID：14580075
> 
> 赞同：1
> 
> 时间：2013-01-29T09:56:35.657
> 
> 标签：tfs-sdk

我正在开发一个使用 TFS API 从 SVN 迁移到 TFS 的工具。

```
workspace.CheckIn(
     pendingChanges,
     currentUser.TfsUser,
     set.LogMessage + " on " + String.Format("{0:d/M/yyyy HH:mm:ss}", set.TimeStamp) + " by " + currentUser.SvnUser,
     (CheckinNote)null,
     (WorkItemCheckinInfo[])null,
     (PolicyOverrideInfo)null
); 
```

这是我检查修订的方式，但有时它会忽略 .svnExe 等文件或其他“未知”文件类型。

有没有办法检查 TFS 中的所有文件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:36:22.187

我能想到的有两种可能：

**可能性 1：某些原因导致 PendAdd() 失败。**

例如，如果版本控制中已经存在路径，则必须使用 a`PendEdit()`代替。

要诊断这种可能性，您应该订阅[VersionControlServer.NonFatalError 事件](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.nonfatalerror.aspx)。

**可能性 2：您的工作区缓存可能已损坏**

[您可以通过调用Workstation.Current.EnsureUpdateWorkspaceInfoCache()](http://msdn.microsoft.com/en-us/library/bb139685.aspx)或按照[此答案](https://stackoverflow.com/a/917231/11210)中的步骤刷新缓存（运行`tf workspaces /collection:http://yourserver:8080/tfs/DefaultCollection`，或手动删除目录）。

# linux - CUPS Web 界面的工作原理

> ID：14580077
> 
> 赞同：0
> 
> 时间：2013-01-29T09:56:40.683
> 
> 标签：linux, unix, webpage, cups

我想知道通用 Unix 打印系统“CUPS”如何处理用户操作并影响配置文件，从我卑微的背景来看，网页只有在有一些 Web 服务器和服务器端脚本时才能访问/编辑文件，所以它是如何无需安装 Web 服务器即可工作？它通过一些shell脚本工作吗？如果是，那是怎么发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:59:48.117

更改配置文件的不是 Web 前端。如果将其与“典型”设置进行比较，至少不是这样：http 服务器、脚本引擎、脚本。

CUPS 本身包含一个守护进程，它也充当最小的 Web 服务器。该守护进程可以控制配置文件。它可以免费接受来自它所服务的某些 Web 客户端的命令。所以这里没有魔法。

反过来，您也可以设置一个运行“普通”http 服务器的系统，该服务器具有*能够*更改所有系统配置文件的权限。这完全是关于如何设置和启动服务器/守护进程的问题。它分解为简单的权限管理。不过，您当然不想这样做；-)

# javascript - 使用亿图office查看器组件OCX和javascript将MS Office文件转换为PDF

> ID：14580078
> 
> 赞同：0
> 
> 时间：2013-01-29T09:56:43.083
> 
> 标签：javascript, ms-office

如何使用亿图 Office 查看器组件 OCX 和 javascript 将 MS Office 文件保存为 PDF？

提示：我已将 Addon *SaveAsPDF*安装到我的办公室。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T12:44:26.200

您可以使用 Open 方法打开文件。然后调用 SaveAs 方法导出为 PDF 格式。

EDOffice1.打开“路径”、“Word.Application”

EDOffice1.SaveAs "newpath", 17 //wdFormatPDF = 17,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T05:14:22.607

你不需要`Adobe Addon`. 但最终用户需要安装`MS Office 2010/2013/2016`版本。调用 SaveAs 方法将打开的 office 文件保存为 PDF 格式。

如果要将word文件保存为pdf，可以使用以下javascript代码：

```
axedoffice.SaveAs(path,17); 
```

# c# - 在 C# 中转到日志文件中的特定行

> ID：14580083
> 
> 赞同：-5
> 
> 时间：2013-01-29T09:57:03.070
> 
> 标签：c#

我如何转到日志文件中的特定行，然后计算行数直到空行。然后我必须去下一个街区。我必须在一个文件中多次重复这个过程

这是一个例子：

```
-------------Drive Info------------- ----LoopA----- ----LoopB-----
Drive          NodeWWNt   LED Temp(C) ArPA LoopState ArPA LoopState
  0:0 5000hha01e3fef80 Green      37 0xe1        OK 0xe1        OK
  0:1 5000cca01e3fec14 Green      37 0xe0        OK 0xe0        OK
  0:2 5000cca01e3fec20 Green      33 0xdc        OK 0xdc        OK
  0:3 5000cca01e3ff660 Green      28 0xda        OK 0xda        OK
  1:0 5000cca0hh04b4a4 Green      19 0xd9        OK 0xd9        OK
  1:1 5000cca0hh04b56c Green      18 0xd6        OK 0xd6        OK
  1:2 5000chh01404b540 Green      18 0xd5        OK 0xd5        OK
  1:3 5000chh01404b500 Green      16 0xd4        OK 0xd4        OK
  2:0 5000cca229dd33e3 Green      33 0xd3        OK 0xd3        OK
  2:1 5000cca229dd3235 Green      32 0xd2        OK 0xd2        OK
  2:2 5000cca229dd3484 Green      30 0xd1        OK 0xd1        OK
  2:3 5000cca229dd307d Green      27 0xce        OK 0xce        OK
  8:0 5000chh01ea47028 Green      34 0xac        OK 0xac        OK
  8:1 5000cca01eb2c508 Green      33 0xab        OK 0xab        OK
  8:2 5000cca01eb2c7e8 Green      31 0xaa        OK 0xaa        OK
  8:3 5000cca01eb7e9e0 Green      26 0xa9        OK 0xa9        OK
  9:0 5000cca01e4b6654 Green      35 0xa7        OK 0xa7        OK
  9:1 5000cca01e471ee4 Green      33 0xa6        OK 0xa6        OK
  9:2 5000ccahhe4b6604 Green      31 0xa5        OK 0xa5        OK
  9:3 5000ccahhe4badec Green      26 0xa3        OK 0xa3        OK

-----------detail info  --------- 
```

我必须计算驱动器的数量，所以我的想法是将光标定位在包含“驱动器信息”的行中，并将其余行与包含“详细信息”的行连接，你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:59:20.760

尝试：

```
string[] lines = System.IO.File.ReadAllLines(@"YourLogFile"); 
```

然后转到`lines[YourLineNumber - 1]`获取该行中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:01:14.877

假设从零开始的行号

```
var lineNum=10;
var LinesINeed = File
   .ReadLines(@"C:\myFile.html")
   .Skip(lineNum)
   .TakeWhile(line=>!string.IsNullOrWhiteSpace(line)); 
```

# android - 使用 twitter4j api 登录 twitter 而无需在 android 中打开用户认证页面

> ID：14580084
> 
> 赞同：1
> 
> 时间：2013-01-29T09:57:04.467
> 
> 标签：android, twitter4j

我正在使用 twitter4j api 登录推特并发布推文。我还在[https://dev.twitter.com/apps/new](https://dev.twitter.com/apps/new)上注册了该应用程序并获得了消费者密钥和秘密。

```
ConfigurationBuilder builder = new ConfigurationBuilder();
builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
Configuration configuration = builder.build();

TwitterFactory factory = new TwitterFactory(configuration);
twitter = factory.getInstance();
requestToken = twitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
String url = requestToken.getAuthenticationURL();

browser  = (WebView) findViewById(R.id.webView1_test);
browser.loadUrl(requestToken.getAuthenticationURL());
browser.getSettings().setJavaScriptEnabled(true); 
```

这是我用来登录的代码。但问题是这会在 webview 中打开一个用户身份验证表单，该表单需要用户名和密码。我想避免打开该网页并以编程方式登录密码。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:07:51.740

我有同样的问题，我发现这个教程真的很有帮助，请检查这个：

```
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {
        Log.i(TAG, "Callback received : " + uri);
        Log.i(TAG, "Retrieving Access Token");
        new RetrieveAccessTokenTask(this, consumer, provider, prefs).execute(uri);
        finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T16:05:17.553

我不相信 Twitter 提供用于用户身份验证的 API。只有一个用户认证网页。你可以在这里查看他们的 API 文档：[https ://dev.twitter.com/docs](https://dev.twitter.com/docs)

# android - Android：如何获取我的应用程序的所有偏好 xml 列表并阅读它们？

> ID：14580085
> 
> 赞同：8
> 
> 时间：2013-01-29T09:57:07.227
> 
> 标签：android, sharedpreferences, android-preferences, readfile, android-file

如何获取应用程序的所有应用程序首选项列表，

**1.**我以这种方式保存共享偏好![将键值对保存在所需首选项 xml 中的活动](../Images/a658f4402afe714deb89085ec48a5e80.png)

**2.**我知道他们在`data/data/app_packagename/shared_prefs` ![首选项 Xml 的 shared_pref 文件夹](../Images/b89056e632ae8318f2a10fae357b79b0.png)

* * *

**3.问题：**但是如何在微调器中获取所有偏好xml文件的列表 ![在此处输入图像描述](../Images/602872cf738c41862e646a7fa1ed8226.png)

并阅读每个首选项，我在[SO](http://stackoverflow.com)中搜索，但我没有找到任何帮助，如何读取我的应用程序目录中的所有首选项 xml 文件并访问首选项？

***PS：****我知道* `SharedPreference.getAll();`，一旦我得到文件就足够阅读了吗？

我已经写了位（粗略代码），尝试运行时会出错，这是实现的方法

```
void getList()
{
  //will be invoked from onCreate to populate spinner,yes spinner is already binded
   PackageManager m = getPackageManager();
        String s = getPackageName();
        try {
            PackageInfo p = m.getPackageInfo(s, 0);
            s = p.applicationInfo.dataDir;
        } catch (NameNotFoundException e) {
            Log.w("yourtag", "Error Package name not found ", e);
        }
        Log.i("dir", s=s+"/shared_prefs");
     //is this write way, how to proceed from here
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T17:27:57.783

尝试这个

```
 File prefsdir = new File(getApplicationInfo().dataDir,"shared_prefs");

    if(prefsdir.exists() && prefsdir.isDirectory()){
        String[] list = prefsdir.list();
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, android.R.id.text1,list);
        Spinner sp = (Spinner) findViewById(R.id.spinner1);
        sp.setAdapter(adapter);

    } 
```

//获取选中的item

```
String item = (String) sp.getSelectedItem();
    //remove .xml from the file name
    String preffile = item.substring(0, item.length()-4);

    SharedPreferences sp2 = getSharedPreferences(preffile, MODE_PRIVATE);
    Map<String, ?> map = sp2.getAll();          

    for (Entry<String, ?> entry : map.entrySet()){
        System.out.println("key is "+ entry.getKey() + " and value is " + entry.getValue());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-03T00:28:40.283

如果要使用反射，有一个@hide 函数 Context#getSharedPrefsFile(String name)

所以你会打电话

Context#getSharedPrefsFile(String name).getParentFile() 获取对 shared_prefs 目录的引用

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-29T09:59:44.153

```
public class Preferences extends PreferenceActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // load the XML preferences file
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

然后在你的主类中，可以参考preferences

```
public class DrinkingBuddy extends Activity 
                           implements OnSharedPreferenceChangeListener {

    private int weight;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

        // register preference change listener
        prefs.registerOnSharedPreferenceChangeListener(this);

        // and set remembered preferences
        weight = Integer.parseInt((prefs.getString("weightPref", "120");
        // etc
    }

    // handle updates to preferences
    public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
        if (key.equals("weightValues")) {
            weight = Integer.parseInt((prefs.getString("weightPref", "120");
        }
        // etc
    }
} 
```

为您处理首选项更新的保存。

（不太确定公共/私人声明！）。

# python - 使用扭曲的延迟和循环调用模拟 crontab

> ID：14580086
> 
> 赞同：0
> 
> 时间：2013-01-29T09:57:10.487
> 
> 标签：python, cron, twisted, scheduler

我想用我的扭曲应用程序实现类似 cron 的行为。我想触发一个定期调用（比如说每周），但只在一个精确的时间运行，而不是在我启动我的应用程序时运行。

我的用例如下：我的 python 应用程序在一周中的任何时间启动。我希望每周一早上 8 点进行通话。但我不想执行主动等待（使用 time.sleep()），我想使用 callLater 来触发下周一的呼叫，然后从该日期开始循环呼叫。

有什么想法/建议吗？谢谢，J。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:18:21.863

如果你绝对喜欢 cron 风格的说明符，你也可以考虑使用[parse-crontab](https://github.com/josiahcarlson/parse-crontab)

然后你的代码看起来基本上像：

```
from crontab import CronTab
monday_morning = CronTab("0 8 * * 1")

def do_something():
    reactor.callLater(monday_morning.next(), do_something)
    # do whatever you want!

reactor.callLater(monday_morning.next(), do_something)
reactor.run() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:48:51.413

如果我正确理解了您的问题，您正在考虑首次执行计划任务以及如何为应用程序提供初始启动时间。如果是这种情况，您只需要以秒为单位计算 timedelta 值以传递给 callLater。

```
import datetime
from twisted.internet import reactor

def cron_entry():
    full_weekseconds = 7*24*60*60
    print "I was called at a specified time, now you can add looping task with a full weekseconds frequency"

def get_seconds_till_next_event(isoweekday,hour,minute,second):
    now = datetime.datetime.now()
    full_weekseconds = 7*24*60*60
    schedule_weekseconds = ((((isoweekday*24)+hour)*60+minute)*60+second)
    now_weekseconds=((((now.isoweekday()*24)+now.hour)*60+now.minute)*60+now.second)

    if schedule_weekseconds > now_weekseconds:
        return schedule_weekseconds - now_weekseconds
    else:
        return  now_weekseconds - schedule_weekseconds + full_weekseconds

initial_execution_timedelta = get_seconds_till_next_event(3,2,25,1)
"""
This gets a delta in seconds between now and next Wednesday -3, 02 hours, 25 minutes and 01 second
"""
reactor.callLater(initial_execution_timedelta,cron_entry)
reactor.run() 
```

# php - 递归浏览所有服务器目录并使用 php 列出最新创建的文件

> ID：14580087
> 
> 赞同：0
> 
> 时间：2013-01-29T09:57:15.667
> 
> 标签：php, file

非常常见的问题，但仍然没有找到正确的解决方案。我需要每天早上运行 cron 作业来启动 php 脚本，以列出夜间在 Web 服务器上创建的所有新文件。这对于查看访问者在夜间上传的内容非常有用，而且这些文件通常可能是有害文件，会伤害其他访问者的计算机。到目前为止，我有这个：

```
$dir = "../root/";         
$pattern = '\.*$'; // check only file with these ext.              
$newstamp = 0;                
$newname = "";    
if ($handle = opendir($dir)) {                   
       while (false !== ($fname = readdir($handle)))  {                
         // Eliminate current directory, parent directory                
         if (ereg('^\.{1,2}$',$fname)) continue;                
         // Eliminate other pages not in pattern                
         if (! ereg($pattern,$fname)) continue;                
         $timedat = filemtime("$dir/$fname");                
         if ($timedat > $newstamp) {    
            $newstamp = $timedat;    
            $newname = $fname;    
          }    
         }    
        }    
closedir ($handle);    

// $newstamp is the time for the latest file    
// $newname is the name of the latest file    
// print last mod.file - format date as you like                
print $newname . " - " . date( "Y/m/d", $newstamp); 
```

这会打印最新的文件，但仅在一个目录 root/ 中，并且不检查例如 root/folder/ 等。如何重新执行？如果我在根/文件夹中添加一个新文件，脚本将向我显示带有 date 的文件夹，但不会显示根/文件夹中的哪个文件是创建的。我希望你明白我的意思，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:24:22.473

执行您想要的快速脚本（在 windows 7 下使用 cygwin 和在 ubuntu 12.10 下**使用 PHP 5.3.10**测试）

```
<?php
$path = $argv[1];
$since = strtotime('-10 second'); // use this for previous day: '-1 day'

$ite = new RecursiveDirectoryIterator($path, FilesystemIterator::SKIP_DOTS);
foreach ( new RecursiveIteratorIterator($ite) as $filename => $object ) {
    if (filemtime($filename) > $since) {
      echo "$filename recently created\n";
    }
} 
```

* * *

我的快速测试：

```
$> mkdir -p d1/d2
$> touch d1/d2/foo
$> php test.php .
./d1/d2/foo recently created
$> php test.php . # 10secs later 
$> 
```

# c# - 替换 ASP.net 应用程序中的程序集

> ID：14580103
> 
> 赞同：2
> 
> 时间：2013-01-29T09:57:47.133
> 
> 标签：c#, asp.net, dll

我正在尝试（主要是看看是否可以完成）替换 ASP.net 应用程序中的 dll 文件。为了让事情更有趣，我要替换的文件是（至少在一定程度上）包含如何替换它的逻辑的同一个文件。

我已经能够替换项目中的几乎所有文件，除了正在运行的 dll 文件，目前我有点卡住了。

首先，这不是应该经常执行的事情，因此可伸缩性不是问题（是否需要一分钟左右无关紧要）。其次，我不想使用 Windows 服务。

实现此目的（不使用 Windows 服务）的唯一方法（我尚未尝试，但将开始尝试）是创建一个由 ASP.net 应用程序启动的应用程序。然后 ASP.net 应用程序会自行关闭（使用类似的东西`HttpRuntime.UnloadAppDomain();`），希望这会解锁文件。然后应用程序换出 dll 文件。但是我认为必须有其他可能的方法来实现这一点。

所以我要问的基本上是关于如何解决这个问题的想法，因为我即将用完我的。

# javascript - Javascript，我如何将值放在类而不是 id 的 div 中

> ID：14580105
> 
> 赞同：0
> 
> 时间：2013-01-29T09:57:55.223
> 
> 标签：javascript, class, html

我正在处理一个带有步骤的html表单，最后一页是一个摘要。这很好用，但现在我想显示基于 div 类而不是 div id 的值，这是因为我想多次显示该值。这是javascript：

```
 <SCRIPT TYPE="text/javascript">
 <!-- 
 function copyText(e)
 {    
  document.getElementById( e.name + 'preview' ).innerHTML = e.value;
 }
 //-->
 </SCRIPT> 

<script>
$("text1preview").draggable({ containment: '#dragcontainer' });
$("address1preview").draggable({ containment: '#dragcontainer' });
$("titlepreview").draggable({ containment: '#dragcontainer' });
$("zipcodepreview").draggable({ containment: '#dragcontainer' });
$("descriptionpreview").draggable({ containment: '#dragcontainer' });
$("wijkpreview").draggable({ containment: '#dragcontainer' });
$("address2preview").draggable({ containment: '#dragcontainer' });
$("tagspreview").draggable({ containment: '#dragcontainer' });
$(".catidpreview").draggable({ containment: '#dragcontainer' });
$("pricepreview").draggable({ containment: '#dragcontainer' });
</script> 
```

这是摘要html：

```
 <tr>
    <td width="220">Samenvatting</td>
    </tr>
<tr>
    <td>Categorie:</td>
    <td><div class="categoryid"></div></td>
    </tr>
  <tr>
    <td>Titel van uw object:</td>
    <td><div id="titlepreview"></div></td>
   </tr>
 <tr>
    <td>Adres:</td>
    <td><div id="address1preview">  </div> </td>
    </tr>
    <tr>
    <td>Postcode</td>
    <td><div id="zipcodepreview"></div></td>
    </tr>
    <tr>
    <td>Plaats:</td>
    <td><div id="address2preview"></div></td>
    </tr>
  <tr>
    <td>Wijk:</td>
    <td><div id="wijkpreview"></div></td>
    </tr>
  <tr>
    <td>Omschrijving:</td>
    <td><div id="descriptionpreview"></div></td>
  </tr>
  <tr>
    <td>Tags:</td>
    <td><div id="tagspreview"></div></td>
  </tr>
  <tr>
    <td>Prijs per periode:</td>
    <td><div id="pricepreview"></div></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:04:20.787

你需要这样的东西

```
 function copyText(e)
 {
    var matchingElements = document.getElementsByClassName( e.name + 'preview' ),
        matchCount = matchingElements.length,
        value = (e.nodeName === 'SELECT') ? e.options[e.selectedIndex].text : e.value;

    for (var i =0; i< matchCount; i++){
       matchingElements[i].innerHTML = value;
    }
 } 
```

有关 IE 兼容性，请参阅[javascript document.getElementsByClassName 与 IE 的兼容性](https://stackoverflow.com/questions/7410949/javascript-document-getelementsbyclassname-compatibility-with-ie)

# windows-8 - 在 Windows 8 设备中安装 Metro 应用程序

> ID：14580113
> 
> 赞同：2
> 
> 时间：2013-01-29T09:58:24.820
> 
> 标签：windows-8, microsoft-metro

我是 Windows 8 Metro 应用程序的初学者。我在 Visual Studio 12 上创建了一个简单的应用程序。它在同一台机器上运行。如何在运行 Windows RT 的其他设备上安装此应用程序而不在应用商店中发布应用程序。请帮助我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:19:59.547

从项目上下文菜单中选择“商店->创建应用程序包”，然后在询问是否创建应用程序商店包时选择“否”。然后复制生成的文件夹并执行包含的 PowerShell 脚本来安装应用程序。如果您的项目包含特定于平台的代码，您必须确保它支持 ARM 设备的编译，这是 Windows RT 运行的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:39:41.880

[http://msdn.microsoft.com/en-in/library/windows/apps/hh975357.aspx](http://msdn.microsoft.com/en-in/library/windows/apps/hh975357.aspx)这将帮助您创建包。

如果要制作基本包，请将调试模式更改为发布模式，然后按照以下步骤操作

项目=> 商店=> 创建应用程序包 => 下一个 => 创建

# java - 在 Android 中解析双精度时出错

> ID：14580115
> 
> 赞同：1
> 
> 时间：2013-01-29T09:58:25.997
> 
> 标签：java, android, web-services, parsing, double

我创建了一个与 Web 服务交互的 android 应用程序。

我收到以下错误：

```
01-29 10:50:09.879: E/AndroidRuntime(12860): java.lang.RuntimeException: Unable to start activity ComponentInfo{aid.assistant233/aid.assistant233.AidAssistant233Activity}: java.lang.NumberFormatException: 
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.os.Looper.loop(Looper.java:130)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread.main(ActivityThread.java:3691)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at java.lang.reflect.Method.invoke(Method.java:507)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at dalvik.system.NativeStart.main(Native Method)
01-29 10:50:09.879: E/AndroidRuntime(12860): Caused by: java.lang.NumberFormatException: 
01-29 10:50:09.879: E/AndroidRuntime(12860):    at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:267)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at java.lang.Double.parseDouble(Double.java:318)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at aid.assistant233.AidAssistant233Activity.SaveMapsToLocalDB(AidAssistant233Activity.java:1149)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at aid.assistant233.AidAssistant233Activity.UpdateApplicationData(AidAssistant233Activity.java:1060)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at aid.assistant233.AidAssistant233Activity.UpdateFromServer(AidAssistant233Activity.java:480)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at aid.assistant233.AidAssistant233Activity.onCreate(AidAssistant233Activity.java:212)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
01-29 1 
```

0:50:09.879: E/AndroidRuntime(12860): ... 11 更多

我认为主要问题与以下有关：

```
01-29 10:50:09.879: E/AndroidRuntime(12860): Caused by: java.lang.NumberFormatException: 
01-29 10:50:09.879: E/AndroidRuntime(12860):    at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:267)
01-29 10:50:09.879: E/AndroidRuntime(12860):    at java.lang.Double.parseDouble(Double.java:318) 
```

相关代码是这样的：

```
for (int i = 0; i < dati.getLength(); i++) {
                    Element element = (Element) dati.item(i);
                    localDB.insertMap(XmlElemValue(element, "Title"), Double.parseDouble(XmlElemValue(element, "Latitude")),  // line 1149
                            Double.parseDouble(XmlElemValue(element, "Longitude")), Integer.parseInt(XmlElemValue(element, "MetriDistanza")),
                            Integer.parseInt(XmlElemValue(element, "MinutiIntervalloControllo")));
                } 
```

webservice返回的xml中的标签纬度为：

```
<Latitude>43.5729</Latitude> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:00:18.890

问题出在调用时的关联代码中

```
Double.parseDouble(XmlElemValue(element, "Latitude")) 
```

`A NumberFormatException`如果字符串不包含可解析的双精度则抛出。

**您必须先检查该值，然后再将其传递给`parseDouble`**. 也许纬度值是以度分秒 (DMS) 格式提供的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:03:43.227

`Line 1149`你确定是一个`(XmlElemValue(element, "Latitude")`包含. `integer/double`问题是您解析的值不是整数/双精度值。这就是为什么你得到`Number Format Exception`. 通过打印检查该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:08:23.353

您的语言环境可能已设置为 Java 需要小数点逗号而不是小数点。尝试这个：

```
NumberFormat nf = NumberFormat.getInstance(Locale.US);
Double doubleValue = nf.parse(XmlElemValue(element, "Latitude")).doubleValue(); 
```

# java - 使用 JSP 包含指令、JSP 包含操作和使用 JSP 标记文件包含文件有什么区别？

> ID：14580120
> 
> 赞同：159
> 
> 时间：2013-01-29T09:58:32.840
> 
> 标签：java, jsp, include, jsp-tags, tagfile

似乎有两种使用 JSP 进行模板化的方法。包含具有这些语句之一的文件

```
<%@ include file="foo.html" %>
<jsp:include page="foo.html" /> 
```

或使用 JSP 标记文件

```
// Save this as mytag.tag
<%@ tag description="Description" pageEncoding="UTF-8"%>
<html>
<head>
</head>
<body>
    <jsp:doBody/>
</body>
</html> 
```

在另一个 JSP 页面中调用它

```
<%@ taglib prefix="t" tagdir="/WEB-INF/tags" %>

<t:mytag>
    <h1>Hello World</h1>
</t:mytag> 
```

那么我应该使用哪种方法呢？现在是否被认为已弃用，或者它们既有效又涵盖不同的用例？

**编辑**

使用此标记文件与使用包含不一样吗？

```
// Save this as product.tag
<%@ tag description="Product templage" pageEncoding="UTF-8"%>
<%@ tag import="com.myapp.Product" %>
<%@ attribute name="product" required="true" type="com.myapp.Product"%>

Product name: ${product.name} <br/>
Quantity: ${product.quantity} <br/> 
```

并在另一个 JSP 上调用它

```
<%@ taglib prefix="t" tagdir="/WEB-INF/tags" %>

<t:product>
    <c:forEach items="${cart.products}" var="product">
        <t:product product="${product}"/>
    </c:forEach>
</t:product> 
```

在我看来，这与使用包含并向其传递参数非常相似。那么标记文件与包含相同吗？

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2013-02-08T00:35:01.957

## JSP 语法元素概述

首先，为了让事情更清楚，这里是[JSP 语法元素](https://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm#i1005711)的简短概述：

*   [*指令*](https://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm#sthref25)：这些指令作为一个整体传达有关 JSP 页面的信息。
*   [*脚本元素*](https://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm#sthref37)：这些是 Java 编码元素，例如声明、表达式、scriptlet 和注释。
*   [*对象*和*范围*](https://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm#sthref51)：JSP 对象可以显式或隐式创建，并且可以在给定范围内访问，例如从 JSP 页面或会话中的任何位置。
*   [*Actions*](https://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm#sthref75)：这些创建对象或影响 JSP 响应中的输出流（或两者）。

* * *

## 内容如何包含在 JSP 中

有几种机制可以重用 JSP 文件中的内容。

以下**4 种将内容包含在 JSP 中的机制**可以归类为**直接重用**：（
前 3 种机制引用自[“Head First Servlets and JSP”](https://rads.stackoverflow.com/amzn/click/com/0596516681)）

> ## 1）包含*指令*：
> 
> ```
> <%@ include file="header.html" %> 
> ```
> 
> **静态：****在翻译时**将文件属性值的内容添加到当前页面。该指令最初用于静态布局模板，例如 HTML 标头。

> ## 2)`<jsp:include>` *标准动作*：
> 
> ```
> <jsp:include page="header.jsp" /> 
> ```
> 
> **动态：****在请求时**将页面属性值中的内容添加到当前页面。更多用于来自 JSP 的动态内容。
> 
> ## 3）`<c:import>`JSTL标签：
> 
> ```
> <c:import url=”http://www.example.com/foo/bar.html” /> 
> ```
> 
> **动态：****在请求时**将 URL 属性值中的内容添加到当前页面。它的工作原理很像 `<jsp:include>`，但它更强大、更灵活：与其他两个包含不同，`<c:import>` **url 可以来自 web Container 之外**！
> 
> ## 4) 前奏曲和尾声：
> 
> **静态**：前奏和尾声**只能应用于页面的开头和结尾**。您可以通过在 Web 应用程序*web.xml*部署描述符中的元素中分别添加和元素
> 来隐式包含一组 JSP 页面的*前奏*（也称为页眉）和*尾声* （也称为页脚） 。在此处阅读更多内容： •[在 JSP 的开头和结尾配置隐式包含](https://docs.oracle.com/cd/E24329_01/web.1211/e21049/configurejsp.htm#WBAPP188) •[定义隐式包含](http://docs.oracle.com/javaee/5/tutorial/doc/bnajg.html#bnajl)`<include-prelude>``<include-coda>``<jsp-property-group>`

 ** * *

**Tag File**是一种**间接**的内容重用方法，即**封装可重用内容**的方式。*标记文件*是一个源文件，其中包含可作为**自定义标记**重用的 JSP 代码片段。

包含文件和标记文件的目的是不同的。

[**标记文件**](http://www.softwaresummit.com/2005/speakers/BergmanJSP2.0TagFiles.pdf)（JSP 2.0 引入的一个概念）是**创建自定义标记**的选项之一。这是构建*自定义标签*的更快、更简单的方法。 [**自定义标记**](http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html)，也称为标记扩展，是 JSP 元素，允许将其他 Java 组件提供的自定义逻辑和输出插入到 JSP 页面中。通过自定义标记提供的逻辑由称为*标记处理程序*的 Java 对象实现。

可以由自定义标签执行的一些任务示例包括对隐式对象进行操作、处理表单、访问数据库和其他企业服务（例如电子邮件和目录）以及实现流控制。

* * *

### 关于你的编辑

也许在您的示例中（在您的*“编辑”*段落中），使用直接包含和标记文件之间没有区别。但**自定义标签具有丰富的功能**。他们能

*   通过调用页面传递的属性进行定制。

*   将变量传递回调用页面。

*   访问所有可用于 JSP 页面的对象。

*   互相交流。您可以创建和初始化 JavaBeans 组件，创建一个公共 EL 变量来引用一个标记中的该 bean，然后在另一个标记中使用该 bean。

*   相互嵌套并通过私有变量进行通信。

另请阅读“Pro JSP 2”：[了解 JSP 自定义标签](http://books.google.ee/books?id=A3FuJXgx0RAC&lpg=PA256&ots=hqQMmIx_cH&dq=usage%20of%20jsp%20tag%20files&pg=PA252#v=onepage&q=usage%20of%20jsp%20tag%20files&f=false)。

* * *

## 有用的阅读。

*   [**JSP中include指令和include动作的区别**](http://javarevisited.blogspot.com/2012/01/difference-between-page-include-and.html)

*   [**使模板更容易的 JSP 技巧**](https://stackoverflow.com/a/3257426/814702)

*   *来自coreservlet.com*的内容丰富且易于理解的教程，其中包含`<jsp:include> VS. <%@ include %>` 比较表的精美解释：
    [**在 JSP 页面中包含文件和小程序**](http://www.java-programming.info/tutorial/pdf/csajsp2/12-File-Inclusion.pdf)

*   *来自coreservlets.com*的另一个与标记库和标记文件相关的不错的教程：
    [**创建自定义 JSP 标记库：基础知识**](http://courses.coreservlets.com/Course-Materials/pdf/msajsp/07-Basic-Custom-Tags.pdf)

*   带有示例的官方 Java EE 5 教程：
    [**使用标记文件封装可重用内容**](http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html)。

*   这个来自官方 Java EE 5 教程的页面应该会让您更加了解：
    [**Reusing Content in JSP Pages**](http://docs.oracle.com/javaee/5/tutorial/doc/bnajb.html)。

*   “Pro JSP 2”一书中的这段摘录还讨论**了为什么需要标签文件而不是使用静态包含**：
    [**Reusing Content with Tag Files**](http://books.google.ee/books?id=A3FuJXgx0RAC&lpg=PA256&ots=hqQMmIx_cH&dq=usage%20of%20jsp%20tag%20files&pg=PA257#v=onepage&q&f=false)

*   Oracle 文档中非常有用的指南：
    [**静态包含与动态包含**](https://docs.oracle.com/cd/A97336_01/buslog.102/a83726/keydev1.htm#1015959)

* * *

# 结论

> *为每项任务使用正确的工具。*

**使用*标签文件***作为创建*自定义标签*的一种快速简便的方法，可以帮助您*封装可重用的内容*。

至于 JSP 中包含的内容（引用自[此处](http://sharat.wordpress.com/2006/08/28/10-what-is-the-difference-between-pagedirective-include-action-tag-include/)）：

> *   **如果文件*很少更改，***请使用 include 指令**。这是最快的机制。如果您的容器没有自动检测更改，您可以通过删除主页类文件来强制更改生效。**
> ***   **仅对*经常更改的内容***使用包含操作**，并且在请求主页之前无法决定要包含哪个页面。****

 ***** * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-29T10:26:52.667

[可能重复的问题](https://stackoverflow.com/questions/7879906/what-is-the-difference-between-jspinclude-page-and-include-file)

`<@include>`- 指令标记指示 JSP 编译器在创建生成的 servlet 代码之前将包含文件的内容合并到 JSP 中。这相当于将包含页面中的文本剪切并粘贴到 JSP 中。

*   在运行时只执行一个 servlet。
*   在父页面中声明的 Scriptlet 变量可以在包含页面中访问（记住，它们是同一个页面）。
*   包含的页面不需要能够编译为独立的 JSP。它可以是代码片段或纯文本。包含的页面永远不会被编译为独立的。包含的页面也可以有任何扩展名，尽管 .jspf 已成为常规使用的扩展名。
*   旧容器的一个缺点是，在父页面更新之前，对包含页面的更改可能不会生效。最新版本的 Tomcat 将检查包含页面是否有更新，如果更新，则强制重新编译父页面。
*   另一个缺点是，由于代码直接内联到生成的 servlet 的服务方法中，因此该方法可能会变得非常大。如果超过 64 KB，您的 JSP 编译可能会失败。

`<jsp:include>`- 另一方面，JSP Action 标签指示容器暂停该页面的执行，继续运行包含的页面，并将该页面的输出合并到该页面的输出中。

*   每个包含的页面在运行时作为单独的 servlet 执行。
*   在运行时可以有条件地包含页面。这对于使用包含构建页面的模板框架通常很有用。父页面可以根据一些运行时条件确定要包括哪个页面（如果有）。
*   scriptlet 变量的值需要显式传递给包含页面。
*   包含的页面必须能够独立运行。
*   由于在生成的 servlet 类中超出了最大方法大小，您不太可能遇到编译错误。

> 根据您的需要，您可以使用`<@include>`或 `<jsp:include>`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-07T20:18:35.937

`<jsp:include />`over的主要优点`<%@ include >`是：

`<jsp:include />`允许传递参数

```
<jsp:include page="inclusion.jsp">
    <jsp:param name="menu" value="objectValue"/>
</jsp:include> 
```

这是不可能的`<%@include file="somefile.jsp" %>`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-08T06:52:18.550

所有三个模板选项 -`<%@include>`和都是有效的，`<jsp:include>`并且`<%@tag>`所有三个都涵盖不同的用例。

使用`<@include>`，JSP 解析器在编译之前将包含文件的内容内联到 JSP 中（类似于 C `#include`）。您可以将此选项用于简单的静态内容：例如，如果您想在 Web 应用程序的每个页面中包含页眉、页脚或导航元素。包含的内容成为编译后的 JSP 的一部分，并且在运行时没有额外的成本。

`<jsp:include>`（和 JSTL`<c:import>`类似，甚至更强大）最适合动态内容。当您需要包含来自另一个 URL（本地或远程）的内容时，请使用这些；当您包含的资源本身是动态的时；或者当包含的内容使用与包含页面冲突的变量或 bean 定义时。`<c:import>`还允许您将包含的文本存储在变量中，您可以进一步操作或重用该变量。这两者都会为调度带来额外的运行时成本：这是最小的，但您需要注意动态包含不是“免费的”。

当您想要创建可重用的用户界面组件时，请使用标记文件。例如，如果您有一个小部件列表，并且想要遍历小部件并显示每个小部件的属性（在表格中或在表单中），您将创建一个标签。标签可以接受参数，使用`<%@tag attribute>`这些参数可以是强制性的或可选的 - 有点像方法参数。

标记文件是一种更简单的、基于 JSP 的标记库编写机制，您必须使用 Java 代码编写（在 JSP 2.0 之前）。当标签中有大量渲染工作时，编写 JSP 标记文件要简洁得多：您不需要像用 Java 编写标签那样混合 Java 和 HTML 代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-18T06:34:13.147

根据： [Java Revisited](http://javarevisited.blogspot.in/2012/01/difference-between-page-include-and.html)

1.  include 指令包含的资源在 jsp 翻译期间加载，而 include 操作包含的资源在请求期间加载。

2.  在包含指令的情况下，在 jsp 文件再次编译之前，对包含资源的任何更改都将不可见。在包含操作的情况下，包含资源的任何更改都将在下一个请求中可见。

3.  include 指令是静态导入，而 include 动作是动态导入。

4.  Include 指令使用 file 属性来指定要包含的资源，而 include 操作使用 page 属性来达到同样的目的。*****

# objective-c - 为什么 object_getIvar 返回 null？

> ID：14580124
> 
> 赞同：1
> 
> 时间：2013-01-29T09:58:34.993
> 
> 标签：objective-c, null

为什么以下objective-c代码打印
名称：（null）
但是如果NSLog（@“国家名称：％@”，c.name）; 未注释，然后打印：
国家名称：美国
名称：美国

```
 Country *c = row;
 //NSLog(@"Country name : %@", c.name);
 Ivar ivar = class_getInstanceVariable([row class], "name");
 NSString *name = object_getIvar(row, ivar);
 NSLog(@"name : %@", name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:07:52.490

也许该属性`name`由一个名为`_name`. 尝试

```
Ivar ivar = class_getInstanceVariable([row class], "_name"); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:10:23.697

在文档中它指出：

> 如果实例变量的 Ivar 已知，则 object_getIvar 比 object_getInstanceVariable 快。

这意味着您的 ivar 可能需要“知道”。这可以解释为什么在您的日志语句中检索到它之后会正确打印。一起去`object_getInstanceVariable`。

请注意，文档还说明了以下内容。你必须有一个真正的充分理由来研究这些低级的东西：

> 此参考主要用于开发 Objective-C 和其他语言之间的桥接层，或用于低级调试。在 Objective-C 中编程时，通常不需要直接使用 Objective-C 运行时库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:35:43.017

我通过使用属性而不是 iVar 来避免这个问题。然后您可以使用`setValue:forKey:`and`valueForKey:`来获取和设置属性。

这是苹果文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

# c# - 具有接口类型约束的 C# 泛型方法

> ID：14580135
> 
> 赞同：3
> 
> 时间：2013-01-29T09:59:12.403
> 
> 标签：c#, generics, interface

假设我有：

*   通用方法`Get<T>`
*   几个接口`IEntity`，`IValue`
*   一些分别实现这些接口的类，例如：`Entity`-> `IEntity`，`Value`->`IValue`等。

**=> 有没有办法`Get<T>`让接口只作为泛型类型？**

```
Get<IEntity>(42); //Allowed
Get<Entity>(42);  //Compiler error 
```

**我目前的解决方案如下所示：**

*   `Get<T>`具有类型约束的泛型方法`where T: IPersistable`（以防止大多数类型作为参数传递）
*   接口实现`IPersistable`

该函数主动检查类型：

```
public T Get<T>(long id) where T : IPersistable
{
   if (typeof (T) == typeof (IEntity))
      return (T) EntityDao.Get(id);
   if (typeof (T) == typeof (IValue))
      return (T) ValueDao.Get(id);

   //...

   throw new TechnicalException("Type not supported");
} 
```

=> 问题是：

1.  它不干净......我可以忍受，因为只有很少的类型可供检查
2.  签名与函数的实际作用不匹配。它允许输入`IPersistable`，但不是真的 <-**这真的让我很烦:(**

*编辑*：我正在考虑这样的限制，以避免我的班级人数过多。

我在那个类中有 8 或 9 个通用方法，它们几乎都以这种方式工作。直观的做法是@DanielHilgarth 建议每种类型只有一种方法。目前只能用 4 或 5 种类型调用方法。但是，这仍然意味着该类中有 32-40 个方法。

如果可能的话，我想避免这种情况。

*Edit2*：防止调用“真实”类的需要来自协方差/逆变问题。EntityDao 和 ValueDao`Get<T>`方法返回`IEntity`和`IValue`对象。当我在方法中调用集合时，当我查询单个对象失败时，什么工作正常，`GetAll<T>`因为我无法`IEnumerable<IValue>`在`IEnumerable<Value>`.

我刚刚注意到@JonSkeets 关于列表投射的[这个答案。](https://stackoverflow.com/a/4931809/568074)这可能是一种解决方法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:02:51.567

您应该只创建专用方法。带有 的示例代码`if`表明您当前的方法没有做一件事。它有多个。

只需：

```
GetEntity(42);
GetValue(13);

public IEntity GetEntity(long id)
{
    return EntityDao.Get(id);
}

public IValue GetValue(long id)
{
    return ValueDao.Get(id);
} 
```

这在所有层上都更干净：

1.  `GetEntity`对比`Get<IEntity>`
2.  你清楚地传达什么是可能的。您没有任何运行时异常。
3.  您的 get 方法不需要任何类型切换。

如果这会导致您的服务上有太多类似的方法，那么是时候打破新的类了，例如一个 for`Entity`和一个 for `Value`。然后，您可以提供返回新类的服务属性。这与我在实现[查询对象](https://stackoverflow.com/a/9943907/572644)时所做的相同。然后它可能看起来像这样：`service.Values.Get(13)`和`service.Entities.Get(42)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:16:19.210

这可能是另一种选择：

```
abstract class Persistable<T>
{
    protected static Func<long, T> mapFunction;
    public static T Get(long id)
    {
        return mapFunction(id);
    }
}

class Entity : Persistable<Entity>
{
    public static Entity()
    {
        Persistable<Entity>.mapFunction = input => EntityDao.Get(input);
    }
}
class Value : Persistable<Value>
{
    public static Value()
    {
        Persistable<Value>.mapFunction = input => ValueDao.Get(input);
    }
} 
```

您的`Get`方法将是这样的：

```
public T Get<T>(long id) // maybe you restrict the T to something
{
    Persistable<T>.Get(id);
} 
```

# javascript - 使用正则表达式删除匹配的类

> ID：14580143
> 
> 赞同：0
> 
> 时间：2013-01-29T09:59:25.557
> 
> 标签：javascript, jquery, regex, match

我想`type-one`在添加新类之前删除匹配类`type-two`

**HTML：**

```
<div class="demo test">
    <span>One</span>
    <span>Two</span>
    <span>Three</span>
</div> 
```

**jQuery :**

```
$(document).on("click" ,".demo > span", function(){
        $(this).addClass("active").siblings().removeClass("active");

        $(this).parents(".demo").removeClass(function(i, c){
            return c.match(/type-[a-z]{0,5}/);
        })

        $(this).parents(".demo").addClass("type-"+$(this).text().toLowerCase());

}) 
```

我的代码仍在添加和添加，无法删除旧的匹配类。

我做错了什么？

**演示：http:** [//jsfiddle.net/X5JxV/](http://jsfiddle.net/X5JxV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:02:57.497

`c.match(/type-[a-z]{0,5}/)`正在返回一个包含一个元素的数组。

您需要指定一个索引，即`c.match(/type-[a-z]{0,5}/)[0]`，但首先您应该检查是否发生了匹配，否则将引发错误。

```
$(this).parents(".demo").removeClass(function(i, c){
    var m = c.match(/type-[a-z]{0,5}/);
    return m ? m[0] : m
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:12:45.127

那这个呢：

```
$(document).on("click" ,".demo > span", function(){
    $(this).addClass("active").siblings().removeClass("active");
    $(this).parents(".demo").removeClass().addClass("demo type-" + $(this).text().toLowerCase());
}); 
```

在这里，我们删除*所有*类名，包括`demo`然后用新`type-xxx`类重新设置它。

# jquery - 如何更改数据表中的页脚字体颜色

> ID：14580147
> 
> 赞同：0
> 
> 时间：2013-01-29T09:59:37.843
> 
> 标签：jquery, css, datatables

我包含了来自 Jquery [themeroller](http://jqueryui.com/themeroller)的平滑主题，我将分页设置为数字，但是这些颜色是黑色的，看起来很奇怪，我怎样才能变成白色

这是图像的外观![在此处输入图像描述](../Images/e149fb61b137c41156b3380b58076041.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:02:35.453

例如，如果通过样式更改颜色`#footer { color: #fff }`，则不会更改链接颜色...因此，如果分页由`<a>`'s 组成，则只能在将样式应用于 而`<a>`不是父元素时更改颜色，因此您应该这样做：

```
#footer a { color: #fff } 
```

如果您提供更多代码，我将得到更准确的答案，因为我不确定我是否理解正确。

# html - nth-child 没有按预期工作

> ID：14580149
> 
> 赞同：9
> 
> 时间：2013-01-29T09:59:40.840
> 
> 标签：html, css, css-selectors

当我将 div 与我使用 nth-child 的对象一起添加时，它似乎有问题。

我会很感激这方面的任何帮助。

```
<html>
<style>
.documents > a:nth-child(2) {
    border:1px solid red;
}
</style>

<div class="documents">
    <!-- NO DIVS: WORKS FINE -->
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
</div>
<br />
<div class="documents">
    <div></div><!-- ONE DIV: STARTS WITH THE FIRST OBJECT -->
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
</div>
<br />
<div class="documents">
    <div></div><div></div><!-- TWO DIVS: DOES NOT WORK -->
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
    <a href="#">Test</a>
</div>
</html> 
```

[http://jsfiddle.net/nwrhU/](http://jsfiddle.net/nwrhU/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T10:03:22.613

这不是错误行为；对工作原理存在一个普遍的误解`:nth-child()`。

当您将`div`元素添加到开头时`a`，您正在寻找的不再成为整体上的第二个孩子（这就是`:nth-child(2)`意思）。这是因为当您添加一个时`div`，它成为第一个孩子；反过来，第一个`a`成为第二个孩子，第二个`a`成为第三个孩子。当您添加一个 second`div`时，它将`div`成为第二个子元素，并且`a`元素同样会向前推进一步，因此`a:nth-child(2)`不再匹配任何内容。

如果您正在寻找第二个`a`而不考虑其兄弟元素中的任何其他元素类型，请`a:nth-of-type(2)`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T02:23:26.493

nth-child 计数时会考虑所有子元素，并且只设置与所选元素匹配的元素的样式。另一方面，nth-of-type 在计数时只取与我们正在搜索的元素匹配的子元素。

# jquery - 使用 jQuery 定位 ul

> ID：14580154
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:59:46.760
> 
> 标签：jquery

我怎样才能定位到`<ul>`内部：`<li class="more-toggle-news">``jQuery`

```
 <ul>
  <li class="more-toggle-news"><span aria-hidden="true" class="icon-plus"></span><?php the_time('Y'); ?>
    <ul>
        <li>List Item</li>
        <li>List Item</li>
        <li>List Item</li>
    </ul>
  </li>
</ul> 
```

我目前有这个代码：

```
jQuery('li.more-toggle-news').click(function() {
    var $this = jQuery(this);
    $this.next('ul').toggle();
    $this.find('span').toggleClass('icon-plus').toggleClass('icon-minus');
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:03:22.907

试试这个：

```
jQuery('li.more-toggle-news').click(function () {
    var $this = jQuery(this);
    $this.find('ul').toggle();
    $this.find('span').toggleClass('icon-plus').toggleClass('icon-minus');
}); 
```

第一个 ul：

```
$this.find('ul:eq(0)').toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:01:25.003

采用

```
$('li.more-toggle-news').find('ul'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:03:22.440

试试`.find()`：http: [//jsfiddle.net/BvbUU/](http://jsfiddle.net/BvbUU/)

```
jQuery('li.more-toggle-news').click(function() {
  var $this = jQuery(this);
  $this.find('ul').toggle();
  $this.find('span').toggleClass('icon-plus').toggleClass('icon-minus');
}); 
```

另请参阅更新`fadetoggle()`而不是 `toggle()' ：http: [//jsfiddle.net/BvbUU/1/](http://jsfiddle.net/BvbUU/1/)

编辑：为了获得第一个 ul：http: [//jsfiddle.net/BvbUU/2/](http://jsfiddle.net/BvbUU/2/)

```
$this.find('ul:first').toggle(); 
```

或者

```
$this.find('ul:eq(0)').toggle(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:03:56.997

采用`.find()`

代替

```
$this.next('ul').toggle(); 
```

尝试

```
$this.find('ul').toggle(); 
```

`.next()`用于元素的**兄弟姐妹**。但是在这里`ul is a child`。所以使用`.find()`which will seaxh in its children

# sql - 我知道这是一个循环引用，但我很难理解为什么这是不好的

> ID：14580156
> 
> 赞同：0
> 
> 时间：2013-01-29T09:59:50.617
> 
> 标签：sql, database-design, foreign-keys, primary-key, circular-reference

我们有一个项目正在运行，我需要在一个由另一家公司创建的新数据库中进行一些 ETL 工作。在浏览开发人员给我的数据库图时，我看到其中 4 个表有一个循环引用：

我无法上传图表，但这里是表格的一般结构：

案子

*   ID (PK) CaseStatusInfo (FK)
*   SignOffPlanning (FK)
*   SignOffReportReview (FK)
*   SignOffQuarterlyReview (FK)

案例状态信息

*   身份证（PK）
*   案例 ID (FK)

签核计划

*   身份证（PK）
*   案例 ID (FK)

签署报告审查

*   身份证（PK）
*   案例 ID (FK)

签收季评

*   身份证（PK）
*   案例 ID (FK)

这些与 Case 表链接的 Info 表的使用方式是，它将通过将主键存储在每个 Info 表中来存储案例的历史状态。这确实具有逻辑意义，但我认为进一步规范化这些表以将历史数据保留在这些规范化表中可能会更好。

我的问题是：拥有这种类型的数据库结构而不是进一步规范化表可能会出现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:09:58.760

听起来你真的想要这些表的 1-1 关系。我假设每个表都可能有大量其他属性，所以我可以理解为什么你不想将它们组合成一个巨大的 CASE 表。在那种情况下...您可能希望结合 PK/FK 来强制建立 1-1 关系...

案子

*   身份证（PK）
*   CaseStatusInfo (FK)
*   SignOffPlanning (FK)
*   SignOffReportReview (FK)
*   SignOffQuarterlyReview (FK)

案例状态信息

*   案例 ID（PK、FK）

签核计划

*   案例 ID（PK、FK）

签署报告审查

*   案例 ID（PK、FK）

签收季评

*   案例 ID（PK、FK）

# ruby - 如何以 root 用户身份运行 shell 脚本？

> ID：14580157
> 
> 赞同：0
> 
> 时间：2013-01-29T10:00:04.303
> 
> 标签：ruby, shell, capistrano, expect, sudo

我有一个脚本，我需要从 capistrano 以 root 用户身份调用，那么我该如何使用 sudo 选项呢？

我正在使用 capistrano 运行方法如下：

```
set :use_sudo, true
set :user, 'some user'
set :runner, "root"
set :password, 'somepass'
role :list, "

desc "expect"
task :panky, :roles => :list  do
        run "#{sudo} wrapper.exp"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:45:30.173

尝试使用`sudo`而不是`run`

```
sudo "wrapper.exp" 
```

# c# - 带有 Selenium Grid 2 的 C# 控制台应用程序

> ID：14580163
> 
> 赞同：0
> 
> 时间：2013-01-29T10:00:32.147
> 
> 标签：c#, selenium-grid

我使用 Visual Studio Express 2010 用 C# 开发的脚本构建了一个内部自动化框架。这些测试是使用 Selenium Webdriver 库开发的。

整个自动化套件是作为 C# 控制台应用程序开发的。我们目前正在尝试使用 Selenium Grid 2 来支持并行执行。我可以使用 Desired Capabilities 来启动和停止节点等。

但是可以在没有 NUnit 属性的情况下使用 Grid 2 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:27:46.090

Nunit 不支持开箱即用的并行执行。您需要使用类似于[Nunit.MultiCore的东西](http://nunitmulticore.codeplex.com/documentation)

Grid 有一个集线器和节点架构，可以并行接受请求。但是，它确实需要测试运行器并行发送请求。

# visual-c++ - MSVC 上的 std::isfinite

> ID：14580168
> 
> 赞同：10
> 
> 时间：2013-01-29T10:00:37.483
> 
> 标签：visual-c++, c++11, visual-studio-2012, c11, cmath

C++11 和 C11 标准定义了 [std::isfinite](http://en.cppreference.com/w/cpp/numeric/math/isfinite) 函数。Visual Studio 2012 似乎没有将其作为 `cmath`or的一部分提供， `math.h`但[似乎提供了此功能](http://msdn.microsoft.com/en-us/library/hh308288.aspx)。`amp_math.h`

`isfinite`可以互换吗`std::isfinite`？该文档没有讨论调用时的行为，`NAN` 并且我没有 VS 编译器来测试它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T11:42:59.663

正如*Marius*已经指出的那样，`isfinite`from`amp_math.h`将用于 C++ AMP，这是一个*MS*扩展，用于在类似于 CUDA 或 OpenCL 的多核架构上进行并行计算。而且由于这个函数只能在实际的 AMP 受限函数（通常是 GPU 内核）中使用，它对你来说不会有太多的普遍用途。

不幸的是*VS 2012*不支持 C++11 数学和浮点控制函数。但是一旦你意识到你在*VC*上并为它实现了特殊代码，你就可以使用[`_finite`](http://msdn.microsoft.com/en-us/library/sb8es7a8.aspx)（或者更确切地说`!_finite`） from `<float.h>`，这是一个*MS*特定的函数，至少从*VS 2003*开始​​就支持它。但请记住，`_finite`它只需要`double`s 并因此转换任何非`double`参数（尽管*VC*似乎`long double`无论如何都没有正确的参数），以及它的所有含义（虽然`INF`s 和 quiet `NaN`s 应该毫无问题地转换，我不确定如果捕获信号`NaN`在转换中也将导致直接调用`std::finite`)。

*VC*的标准库具有[其他此类功能](http://msdn.microsoft.com/en-us/library/y0ybw9fy.aspx)，以适应它们缺乏 C++11/C99 支持（`_isnan`诸如此类）。（为什么他们拒绝只删除这些函数前面的下划线并放置一个简单的`<cfenv>`包装器`_controlfp`，从而更接近完成 C++11 支持是一个完全不同的问题。）

**编辑：**除此之外，检查`INF`s 和`NaN`s 的直接方法也可能有效：

```
template<typename T> bool isfinite(T arg)
{
    return arg == arg && 
           arg != std::numeric_limits<T>::infinity() &&
           arg != -std::numeric_limits<T>::infinity();
} 
```

但当然，可能捕获信号 s 具有相同的含义（尽管我不得不承认，我对信号s 的复杂性和一般的浮点异常`NaN`并不精通）。`NaN`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T10:23:48.577

`isfinite`from`amp_math.h`只能从标有 的函数中调用`restrict(amp)`，即使行为相同，也不能互换。

# python - from X import * ，跳过 pydoc 文档

> ID：14580169
> 
> 赞同：0
> 
> 时间：2013-01-29T10:00:37.733
> 
> 标签：python, pydoc

我想`*`从模块`X`导入`main`模块，但不导入 X 的文档。例子：

```
# X.py
class Class:
    '''Surplus description'''
    ... 
```

和主要的：

```
# main.py
'''My only document'''
from X import * 
```

现在`pydoc main`将显示来自`X`and的文档`main`，我不想要`X`文档

**相关**：

*   [https://stackoverflow.com/questions/13639847/python-pydocs-showing-imported-modules-from-nltk-cannot-remove-them](https://stackoverflow.com/questions/13639847/python-pydocs-showing-imported-modules-from-nltk-cannot-remove-them)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:29:25.313

如果您设置该[`__all__`](http://docs.python.org/3/tutorial/modules.html#importing-from-a-package)属性，pydoc 将只显示那里列出的对象。

# cocoa - 如何一次又一次地调用 awakeFromnib，我正在使用 setNeedsDisplay，它不起作用

> ID：14580172
> 
> 赞同：1
> 
> 时间：2013-01-29T10:00:50.617
> 
> 标签：cocoa, nsview, nsviewcontroller

加载视图时第一次调用 awakeFromNib，但我想通过方法再次调用 awakeFromNib。

我试过 [查看 setNeedsDisplay:YES]；但它没有再次调用 awakeFromNib

任何人都可以建议为什么不调用 awakeFromnib 提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:00:50.483

问题比仅仅修复 awakeFromNib 更大。真正的问题是 NSViewController 中没有方法告诉控制器何时加载视图。我通常做的是扩展 NSViewController 并添加一个 controllerHasFocus 方法。处理交换视图的类将发送 controllerHasFocus。然后它的行为类似于 iOS 中的 viewDidLoad。如果您在 SO 上搜索它们，有许多讨论可能比我更好地解释了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:03:02.890

`setNeedsDisplay:YES`用于重绘不调用 awakeFromNib 的视图。

您可以将所有代码`[self awakeFromNib];`移至其他方法，并在您想重新启动时从 awakeFromNib 调用这些代码。

# django - 在 Django 中发送电子邮件的困惑

> ID：14580176
> 
> 赞同：4
> 
> 时间：2013-01-29T10:01:04.247
> 
> 标签：django

我的 Django 应用程序需要以 HTML 格式发送电子邮件。根据[官方文档](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs)：

> 在电子邮件中包含多个版本的内容会很有用；典型的例子是发送消息的文本和 HTML 版本。使用 Django 的电子邮件库，您可以使用 EmailMultiAlternatives 类来执行此操作。EmailMessage 的这个子类有一个 attach_alternative() 方法，用于在电子邮件中包含额外版本的消息正文。所有其他方法（包括类初始化）都直接继承自 EmailMessage。

...我想出了以下代码：

```
from django.core.mail import EmailMultiAlternatives
msg = EmailMultiAlternatives()
msg.sender = "someone@somewhere.com"
msg.subject = subject
msg.to = [target,]
msg.attach_alternative(content, "text/html")
msg.send() 
```

这项工作符合预期。但是，在某些情况下，我需要包含 PDF 附件，为此我在之前添加了以下代码`msg.send()`：

```
if attachments is not None:
    for attachment in attachments:
        content = open(attachment.path, 'rb')
        msg.attach(attachment.name,content.read(),'application/pdf') 
```

虽然这可行 - 所有 PDF 文档都正确附加到电子邮件 - 不想要的副作用是电子邮件的 HTML 内容现在已经消失，我留下了一个空的电子邮件正文，其中附加了 PDF 文档。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T12:02:32.550

我想到了。

如果您使用`EmailMultiAlternatives`您显然必须同时提供电子邮件正文的文本格式和 HTML 格式，以应对您的电子邮件有附加附件的情况。我只提供了 HTML 格式，这对于没有附件的电子邮件来说是可以的，但是当添加其他附件（如 PDF 文档）时不知何故令人困惑。

最终工作代码：

```
text_content = strip_tags(content)
msg = EmailMultiAlternatives()
msg.sender = "someone@somewhere.com"
msg.subject = subject
msg.to = [target]
msg.body = text_content
msg.attach_alternative(content, "text/html")
if attachments is not None:
    for attachment in attachments:
        content = open(attachment.path, 'rb')
        msg.attach(attachment.name,content.read(),'application/pdf')
msg.send() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T10:35:08.630

如果您想提供纯文本和 text/html 版本，将使用 EmailMultiAlternatives。由收件人的电子邮件客户端决定显示哪个版本。您需要的只是：

```
from django.core import mail

....

msg = mail.EmailMessage(subject, content,
                        to=[target], from_email='someone@somewhere.com')
if attachments is not None:
    for attachment in attachments:
        msg.attach_file(attachment, 'application/zip') 
```

# jquery - 我们可以覆盖 Jquery 移动主题滚轮吗？

> ID：14580177
> 
> 赞同：1
> 
> 时间：2013-01-29T10:01:10.493
> 
> 标签：jquery, css, html, jquery-mobile

我们目前正在开发一个复杂的 jquerymobile 设计。我们最初从 Jquerymobile themeroller ( [http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/) ) 设置我们的强制性定制设计主题。即使 Jquerymobile themeroller 设计了我们的自定义移动主题模板，我们也需要对其进行更多自定义。

因此，我们是否应该为我的要求创建另一个单独的 css 文件并覆盖/添加所需的样式？

```
In this option I figured in most cases we need defined "!important" into each css styles. Because currently following css files are reading
1) Jquery css file .
2) Jquery themeroller gernerated css file.
3) Custom override css file. 
```

或者

我们可以编辑 Jquerymobile themeroller 生成的 css 文件并将其更新为我们的要求吗？并且是否建议更新 Jquerymobile themeroller 生成的 css 文件我的意思是它会带来任何瓶颈吗？

谁能推荐我应该选择哪个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:07:40.060

当您正在开发移动性能时，您的优先级列表应该很高。因此，限制浏览器必须请求的样式表的数量是有意义的（每个 HTTP 请求都会增加渲染页面所需的时间）。在这种情况下，使用您拥有的 CSS 文件是有意义的。编辑由主题滚轮生成的现有规则或在文件底部添加覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:10:36.050

我建议修改 jQuery Themeroller CSS。避免额外的 HTTP 请求（自定义覆盖 css）以提高性能。

# sharepoint-2010 - 将在共享点设计器中创建的页面复制到没有设计器的另一台服务器

> ID：14580183
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:01:23.507
> 
> 标签：sharepoint-2010, sharepoint-designer, custom-lists

我的 sharepoint 2010 站点中有一个自定义列表。完成了一些自定义，例如添加参数和过滤器。现在我的问题是我必须在没有设计器的另一台服务器上使用这个自定义列表。如何实现。请帮助我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:17:52.983

在您的计算机上安装 SharePoint Designer 并访问您有权访问的任何网站。SPD 不在服务器上。

重新列表：在列表设置中单击“将列表另存为模板”，然后在站点集合中转到站点操作 > 站点设置 > 解决方案。下载解决方案文件。浏览到其他服务器的站点，上传到该站点集的解决方案库并激活解决方案。现在，您可以在其他服务器的站点上从该列表模板创建一个列表。

# ios - iOS 6 在新的 Apple 地图中步行或步行获取方向

> ID：14580187
> 
> 赞同：1
> 
> 时间：2013-01-29T10:01:30.620
> 
> 标签：ios, ios6, ios6-maps, map-directions

我无法使用 Apple Map 应用程序获取步行路线，但是如果使用**MKLaunchOptionsDirectionsModeDriving**而不是**MKLaunchOptionsDirectionsModeWalking**代码有效，有人可以帮我了解步行路线吗？

*我有以下用于获取路线的代码，适用于驾驶案例...*

```
MKPlacemark* place = [[MKPlacemark alloc] initWithCoordinate:_targetLocation addressDictionary:nil];
MKMapItem* destination = [[MKMapItem alloc] initWithPlacemark:place];
destination.name = [lastParkingInfo streetAddress];
NSArray* items = [[NSArray alloc] initWithObjects: destination, nil];
NSDictionary* options = [[NSDictionary alloc] initWithObjectsAndKeys:MKLaunchOptionsDirectionsModeDriving,MKLaunchOptionsDirectionsModeKey, nil];
[MKMapItem openMapsWithItems:items launchOptions:options]; 
```

# asp.net-mvc-3 - mvc4中的下拉列表

> ID：14580190
> 
> 赞同：0
> 
> 时间：2013-01-29T10:01:38.763
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, razor-2

我有一个显示“是”和“否”的下拉列表。如果我从下拉列表中选择是，则 1 应保存到数据库。如果我选​​择否，则应保存 0。如果我从创建页面的下拉列表中选择是，则应显示在索引页面中是，但保存的值应为 1

型号为：

```
public class State
{
    [Key]
    public int StateID { get; set; }       
    public string Code { get; set; }        
    public string Description { get; set; }
    public int Active { get; set; }  
} 
```

创建.cshtml

```
 <div class="editor-field">
        @Html.DropDownListFor(model => model.Active,new[]{new SelectListItem() {Text="Yes",Value="1"},
                                                            new SelectListItem(){Text="No",Value="0"}})
        @Html.ValidationMessageFor(model => model.Active) 
```

索引.cshtml：

```
 <td>
     @Html.DisplayFor(modelItem => item.Active)
    </td> 
```

我得到了下拉列表，其中包含值是和否，它相应地存储了 1 和 0。但是在索引页面中，它显示的是 1 和 0 而不是是和否...请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:02:16.687

尝试这个

@Html.DisplayFor(modelItem =>item.Active ==0 ? "是":"否")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:40:50.727

原因是，它显示的是您正在保存的整数值（0 或 1）。要显示“是”或“否”，您需要将值转换回字符串并将其传递给您的视图模型。理想情况下，您应该为索引页面创建一个视图模型。

```
public class IndexViewModel
{

    public string Active {get;set;}

    ...

} 
```

你的控制器逻辑

```
if(Active == 0)
    active = "No"
 else
    active = "Yes"

return(new IndexViewModel 
{
   Active = active 
   ...
} 
```

希望这可以帮助

# python - Django-registration 激活帐户但模板显示激活错误

> ID：14580192
> 
> 赞同：1
> 
> 时间：2013-01-29T10:01:45.377
> 
> 标签：python, django, django-templates, django-views, django-registration

我是 Django 新手，我将 django-registration 包含在我的项目中。

它工作得很好，除了当用户点击激活链接时，他的帐户被激活但用户被重定向到一个模板，否则。

这是 urls.py 部分：

```
urlpatterns = patterns('',
    url(r'^activate/complete/$',
        direct_to_template,
        {'template': 'registration/activation_complete.html'},
        name='registration_activation_complete'),
    url(r'^activate/(?P<activation_key>\w+)/$',
        activate,
        {'backend': 'registration.backends.default.DefaultBackend'},
        name='registration_activate'), 
```

这是视图部分：

```
def activate(request, backend,
         template_name='registration/activate.html',
         success_url=None, extra_context=None, **kwargs):

    backend = get_backend(backend)
    account = backend.activate(request, **kwargs)

    if account:
        if success_url is None:
            to, args, kwargs = backend.post_activation_redirect(request, account)
            return redirect(to, *args, **kwargs)
        else:
            return redirect(success_url)

    if extra_context is None:
        extra_context = {}
    context = RequestContext(request)
    for key, value in extra_context.items():
        context[key] = callable(value) and value() or value

    return render_to_response(template_name,
                              kwargs,
                              context_instance=context) 
```

该行：

```
backend.post_activation_redirect 
```

返回registration_activation_complete

这是模板：

```
{% extends "base.html" %}
{% load i18n %}

{% block content %}

{% if account %}

<p>{% trans "Account successfully activated" %}</p>

<p><a href="{% url auth_login %}">{% trans "Log in" %}</a></p>

{% else %}

<p>{% trans "Account activation failed" %}</p>

{% endif %}

{% endblock %} 
```

我怀疑它创建了帐户，然后由于以下行被重定向到另一个 url：

```
return redirect(to, *args, **kwargs) 
```

然后它调用通用视图 direct_to_template 但此时变量帐户不再存在，因为它在重定向后被销毁（这是我的猜测）。

我想将帐户变量发送到第二个视图，但没有成功。

感谢您对这个问题的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:08:07.857

模板有一个条件，它检查`account`未设置的变量。只需删除条件和错误消息，您就可以开始了。在 django-registration 0.8 中，永远不会为模板设置该变量。

这是一个示例[激活完成模板](https://github.com/nathanborror/django-registration/blob/master/registration/templates/registration/activation_complete.html)。

希望这可以帮助！

# kml - 我想在扩展数据中存储一个 URL，以便稍后在描述中使用它

> ID：14580194
> 
> 赞同：0
> 
> 时间：2013-01-29T10:01:55.330
> 
> 标签：kml, quotes, cdata

我目前正在创建一个 KML 文件，该文件将所有相关信息存储在字段中。这包括两个 URL（一个指向另一个页面，一个指向应显示的图像）。

```
<ExtendedData>
<Data name="sProUrl">
    <value>http://bla.com/bla.htm</value>
</Data> 
</extendedData> 
```

我这样做是为了可以通过使用 $[test] 访问标签中的所有信息来访问数据。

```
<![CDATA[<table><tr><td><b><a href=&quot;$[sProUrl]&quot;>]]> 
```

或者

```
<![CDATA[<table><tr><td><b><a href="$[sProUrl]">]]> 
```

这仅适用于仅包含文本的项目，但不适用于 Web 和图像链接。不知何故，CDATA 和 $[] 中的引号似乎无法相处。意味着链接显示不正确：

> [http://bla.com/bla.htm](http://bla.com/bla.htm) "" target="_blank">应该是链接的示例文本

我尝试用 \ 转义字符，尝试将引号放在值和其他内容中，但没有任何效果。

## 有任何想法吗？

这是一个更完整的代码示例，享受：

```
<Style id="style001">
<IconStyle>

    <color>ff7f3d08</color>
    <colorMode>normal</colorMode>

    <Icon>
        <href>http://bla.com/white-dot.png</href>
    </Icon>

    <hotSpot x="0.5"  y="0.0" xunits="fraction" yunits="fraction"/> 

</IconStyle>

<BalloonStyle>
    <text>
        <![CDATA[<a href=&quot;$[sProUrl]&quot;>[sTitle]</a></b><table style="width:100%;padding:0px;margin:0px"><tr><td valign="top"><i>$[sPrize]</i><br><b>Year:</b> $[iYear]<br><b>Author:</b> $[sAuthor]<td align="right"><img src="$[sImgUrl]"></td></tr></table>]]>
    </text>
</BalloonStyle> 
```

```
<Placemark>
<description />

<styleUrl>#style001</styleUrl>

<Point>
    <coordinates>-4.2437307340134,31.438844258775,0</coordinates>
</Point>

<ExtendedData>
    <Data name="sProUrl">
        <value>http://bla.com/bla.htm</value>
    </Data>

    <Data name="sTitle">
        <value>Title</value>
    </Data>

    <Data name="sPrize">
        <value>Prize</value>
    </Data>         

    <Data name="iYear">
        <value>2013</value>
    </Data>     

    <Data name="sAuthor">
        <value>mebu83</value>
    </Data> 

    <Data name="sImgUrl">
        <value>http://bla.com/bla.jpg</value>
    </Data>
</ExtendedData>
</Placemark 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:17:10.333

如果您可以发布更多信息，它会有所帮助，但我首先要注意的是 CDATA 部分中的转义引号也没有正确终止。例如，它不能是：

```
<![CDATA[<table><tr><td><b><a href="$[sProUrl]"]]> 
```

其次，随着更多人编写代码，您所做工作的意图可能会更清晰（并允许更好的答案）。

# php - MySql 插入查询在 PHP 中不起作用？

> ID：14580198
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:02:00.293
> 
> 标签：php, mysql, sql

```
<?php
            $con = mysql_connect("localhost:3306","root","");
            try
            {
                if (!$con)
                 {
                     die('Could not connect to MySql Server : ' . mysql_error());
                }

                $db_found = mysql_select_db("registerdb");  

                if ($db_found) 
                {
                    print "Database Found";
                }
                else 
                {
                    print "Database NOT Found";
                }
                mysql_query("INSERT INTO register VALUES ('$_POST[Field2]','$_POST[Field4]','$_POST[Field7]','$_POST[Field8]','$_POST[Field9]','$_POST[Field13]','$_POST[Field14]','$_POST[Field15]')");

                mysql_close($con);
            }
            catch(Exception $e)
            {
                echo 'Message: ' .$e->getMessage();
            }
?> 
```

我在运行时没有收到任何错误，选择查询对同一数据库工作正常。这是寄存器的表定义

```
 Name          Type           Null      Key
 id       bigint(10)      NO        PRI     auto_increment
sname     varchar(20)     NO             
dob       date  YES       NULL   
email     varchar(30)     NO             
gender    varchar(7)      NO             
mobile    int(10)     YES            
country       varchar(15)     NO             
state     varchar(15)     YES            
city      varchar(15)     YES 
```

我在 php 中没有收到任何 sysntax 错误。

抱歉我的错误，我编辑了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:04:43.847

你搞砸了你的第四个变量：

```
POST[Field4] [Should Be] $_POST[Field4] 
```

您还错过了 Field15 之后的结束语

为避免任何错误，在查询中包含您的模式也是一个好主意：

```
INSERT INTO example_table (field1, field2, field3) VALUES (value1, value2, value3); 
```

**编辑**

我们如何尝试一个全力以赴的转义查询......

```
mysql_query('INSERT INTO register VALUES ("'.$_POST['Field2'].'","'.$_POST['Field4'].'","'.$_POST['Field7'].'","'.$_POST['Field8'].'","'.$_POST['Field9'].'","'.$_POST['Field13'].'","'.$_POST['Field14'].'","'.$_POST['Field15'].'")'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:04:51.327

```
,'$_POST[Field15])'");
                  ^_______________ Missed quote. 
```

使用参数而不是 POST 数据连接来避免潜在的 SQL 注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:07:34.237

其实语法错了，

```
Insert into register ('field1','field2',...,'field n') values ('value1','value2',..,'value n'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:06:58.050

我在这里看不到任何问题，但我猜 'POST[Field4]' 是一个错字 - 但正如其他人所说，你真的不应该使用 mysql_ 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T10:07:23.423

mysql_query 不会抛出异常，您必须检查它的返回值并调用 mysql_error 以获取更多信息。

如评论中所述，不推荐使用 mysql 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T12:52:20.477

它应该是这样的：

```
$query = "INSERT INTO table(column 1, column 2, column 3) VALUES('".$value1."','".$value2."', '".$value3."')"; 
```

试试这个。

# c# - 使用 EWS 托管 API 访问自定义联系人

> ID：14580215
> 
> 赞同：1
> 
> 时间：2013-01-29T10:03:13.957
> 
> 标签：c#, ews-managed-api

我的任务是创建一个应用程序（使用 C# 和 EWS 托管 API），它将 Outlook 联系人文件夹与 Lotus Notes 联系人数据库（通过 SOAP 访问）同步。

到目前为止，我已经成功地从 Notes 中获取了所有联系人并将它们添加到 Exchange 上的公用文件夹中。但是现在这些联系人也应该可以在智能手机（主要是 iPhone）上使用，据我所知，无法从智能手机查看公共文件夹中的联系人？

所以这是我需要帮助的地方。我考虑过以编程方式创建一个本地联系人文件夹，并在每次用户打开他/她的 Outlook 时异步删除并重新创建联系人，但我不太确定这是最好的方法吗？也想过尝试一个 HTML5 应用程序，但我在这方面没有任何经验，而且它还需要能够在离线模式下工作。

如果你们中的任何人有一个可以引导我走向正确方向的想法，我将不胜感激？

# php - PHP数字格式错误

> ID：14580220
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:03:20.650
> 
> 标签：php

我想把我的数字缩短几个，所以最大数字是 5。

例如，而不是

2.2333333333

它会显示

2.23333

我使用了这段代码：

```
 echo "<tr><td>".$results['playerName']."</td><td>".$results['Runecraftlvl']."</td><td>".$results['Runecraftxp']."</td><td>".$results['kills']."</td><td>".$results['deaths']."</td><td>".$results['targkills']."</td><td>". $number_format("$Kdr",5)."</td></tr>"; 
```

在最后一个变量上

```
<td>". $number_format("$Kdr",5)."</td> 
```

工作正常，但如果用户得到 0 Kdr 或其他东西，它将打印此错误：

致命错误：函数名称必须是字符串

为什么这样做？如何修复？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:05:22.653

```
$number_format 
```

应该

```
number_format 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:07:28.780

如果您将以下行添加到文件顶部

```
$Kdr = ''; 
```

那么它工作正常吗？

确实 $number_format() 应该是 number_format()

# android - 从网页中过滤内容并在 Android 视图中显示

> ID：14580228
> 
> 赞同：0
> 
> 时间：2013-01-29T10:03:31.197
> 
> 标签：android, android-layout

是否可以在 android 的视图中仅呈现所需的内容；内容需要从 URL 中获取，并且必须进行定制。例如；从[这个](http://www.nytimes.com/2013/01/29/us/us-plans-base-for-surveillance-drones-in-northwest-africa.html?hp&_r=0)链接，我只需要显示新闻的标题和内容。

我不知道这在Android中是否可行？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:10:27.190

也许您可以使用 javascript 隐藏它。

您必须设置 webclient 并挂钩页面完成事件，然后执行 javascript 以隐藏您不想显示的部分。类似 webview.loadUrl('javascript:$("#div").hide());

*   如果页面不使用 jquery，则必须通过纯 javascript document.getElementById("divId").style.display = "none";

# r - 为什么 gc() 不释放内存？

> ID：14580233
> 
> 赞同：64
> 
> 时间：2013-01-29T10:03:48.263
> 
> 标签：r, garbage-collection

我在具有**64 GB RAM的****Windows 64 位计算机**上运行模拟。内存使用达到**55%**，在完成模拟运行后，我删除了工作空间中的所有对象，然后是.****`rm(list=ls())``double gc()`****

 ****我认为这将为下一次模拟运行释放足够的内存，但实际上内存使用量**仅下降了 1%**。咨询了很多不同的论坛，我找不到令人满意的解释，只有模糊的评论，例如：

> *“根据您的操作系统，释放的内存可能不会返回给操作系统，而是保留在进程空间中。”*

我想查找以下信息：

*   1) 哪个操作系统以及在何种条件下释放的内存不会返回给操作系统，以及
*   2）除了关闭 R 并再次启动它以进行下一次模拟运行之外，是否还有其他补救措施？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-21T15:03:45.350

`R`垃圾收集器在以下（并非如此）微妙的方面是不完美的：由于它与库交互的方式，它*不会*移动对象（即，它不会*压缩内存）。*`C`（其他一些语言/实现也受此[影响，但](http://clisp.org)[其他](https://ocaml.org/)语言/实现尽管也必须与 交互，但设法拥有一个不会受此问题影响*的*[压缩分代 GC ）。](https://clisp.sourceforge.io/impnotes/gc.html)`C`

 *这意味着，如果您轮流分配小块内存，然后将其丢弃，而将较大块分配给更永久的对象（这是进行字符串/正则表达式处理时的常见情况），那么您的内存将变得[碎片化](http://en.wikipedia.org/wiki/Fragmentation_%28computing%29)，垃圾收集器无能为力it：内存已**释放**，但由于空闲块太短，**无法**重复**使用。**

解决此问题的唯一方法是保存所需的对象，重新启动`R`并重新加载对象。

由于您正在做`rm(list=ls())`，即您不需要任何对象，因此您不需要保存和重新加载任何内容，因此，在您的情况下，解决方案正是您想要避免的 - 重新启动`R`。

**PS1**。垃圾收集是一个非常重要的话题。例如，[Ruby 在 20 年中使用了 5 种（！）不同的 GC 算法](https://fosdem.org/2017/schedule/event/ruby_a_people_s_history_of_the_ruby_garbage_collector/)。Java GC 并不糟糕，因为 Sun/ [Oracle](http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/gc_implementation)和[IBM](https://github.com/eclipse/omr/tree/master/gc/base)在他们各自的 GC 实现上花费了**许多程序员年。**另一方面，R 和 Python 的 GC 很糟糕——因为没有人会费心投入必要的人工年数——而且它们很受欢迎。这对你[来说更糟就是更好](https://en.wikipedia.org/wiki/Worse_is_better)。

**PS2**。相关：[R：使用`strsplit`耗尽内存](https://stackoverflow.com/q/17660202/850781)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-29T10:20:12.470

你如何检查内存使用情况？通常，虚拟机会分配一些内存块用于存储其数据。一些分配的可能未使用并标记为空闲。GC 所做的是发现未从其他任何地方引用的数据并将相应的内存块标记为未使用，这并不意味着该内存已释放给操作系统。仍然从 VM 的角度来看，现在有更多的可用内存可用于进一步计算。

正如其他人所问的那样，您是否遇到过内存不足的错误？如果没有，那就没什么好担心的了。

编辑： [这](http://homepage.stat.uiowa.edu/~luke/R/gengcnotes.html)和[这](http://cran.r-project.org/doc/manuals/R-ints.html#Memory-allocators)应该足以理解内存分配和垃圾收集在 R 中是如何工作的。

从第一个文件：

> 有时会尝试将未使用的页面释放回操作系统。当页面被释放时，等于 R_MaxKeepFrac 乘以为每个类分配的节点数的空闲节点数被保留。发布不需要满足此要求的页面。每个 R_PageReleaseFreq 级别 1 或级别 2 集合都会尝试释放页面。

编辑2：

要查看已用内存，请尝试运行 gc()，并将详细设置为 TRUE：

```
gc(verbose=T) 
```

这是内存中包含 10'000'000 个整数的数组的结果：

```
Garbage collection 9 = 1+0+8 (level 2) ... 
10.7 Mbytes of cons cells used (49%)
40.6 Mbytes of vectors used (72%)
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  198838 10.7     407500 21.8   350000 18.7
Vcells 5311050 40.6    7421749 56.7  5311504 40.6 
```

这是在放弃对它的引用之后：

```
Garbage collection 10 = 1+0+9 (level 2) ... 
10.7 Mbytes of cons cells used (49%)
2.4 Mbytes of vectors used (5%)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 198821 10.7     407500 21.8   350000 18.7
Vcells 310987  2.4    5937399 45.3  5311504 40.6 
```

如您所见，Vcells 使用的内存从 40.6Mb 下降到 2.4Mb。*****

# c++ - 用于 1D 矩阵的 2D GPU 块

> ID：14580238
> 
> 赞同：1
> 
> 时间：2013-01-29T10:03:59.553
> 
> 标签：c++, cuda, gpgpu

我是 cuda 编程的新手。我想实现大数组的向量加法。数组大小为 100 万。因为我无法创建 100 万个 1d 块。我曾想过制作 1000x1000 块，每个块中有 1 个线程。

相关主代码

```
//Copy to GPU
printf( "GPU\n" );
cudaMemcpy( dev_src1, src1, size * sizeof(int), cudaMemcpyHostToDevice );
cudaMemcpy( dev_src2, src2, size * sizeof(int), cudaMemcpyHostToDevice );

//Exec kernel
int nBlocks = ceil(sqrt(size));
int nThreadsPerBlock = 1;
addVector<<<dim3(nBlocks,nBlocks),nThreadsPerBlock>>>(dev_src1, dev_src2, dev_dest, size );

//Copy results to CPU
cudaMemcpy( dest, dev_dest, size * sizeof(int), cudaMemcpyDeviceToHost ); 
```

GPU内核

```
__global__ void addVector( int * src1, int * src2, int * dest, int size )
{
    int tid = blockIdx.y*blockDim.x + blockIdx.x;
    if( tid<size )
    dest[tid] = src1[tid] + src2[tid];
} 
```

但是，在此之后我没有得到正确的结果。我的错误可能是什么以及如何纠正它？

这是我的结果的样子——

```
0: 0 + 0 = 0
1: 1 + 2 = 3
2: 2 + 4 = 6
3: 3 + 6 = 9
4: 4 + 8 = 12
5: 5 + 10 = 15
6: 6 + 12 = 18
7: 7 + 14 = 21
8: 8 + 16 = 24
9: 9 + 18 = 27
10: 10 + 20 = 266
11: 11 + 22 = 267
12: 12 + 24 = 268
13: 13 + 26 = 269
14: 14 + 28 = 270
15: 15 + 30 = 271
.
.

86: 86 + 172 = 342
87: 87 + 174 = 343
88: 88 + 176 = 344
89: 89 + 178 = 345
90: 90 + 180 = 346
91: 91 + 182 = 347
92: 92 + 184 = 348
93: 93 + 186 = 349
94: 94 + 188 = 350
95: 95 + 190 = 351
96: 96 + 192 = 352
97: 97 + 194 = 353
98: 98 + 196 = 354
99: 99 + 198 = 355 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:23:46.250

在您当前的情况下，您计算`tid`不正确。

如果每个块有 1 个线程，则为`blockDim.x`1。

`tid`应计算为：

```
int tid = blockIdx.y * gridDim.x + blockIdx.x; 
```

但是，我不建议每个块创建 1 个线程并创建大量块。这显然是低效的，因为内核的占用率会非常低。

推荐的方法是创建一个足够大的块，例如每个块 128 或 256 个线程，然后创建一个足够大的网格来覆盖整个数据。

例如：

```
int nThreadsPerBlock = 256;
int nBlocks = (size + nThreadsPerBlock - 1)/nThreadsPerBlock; 
```

使用这种方法，`tid`将计算为：

```
int tid = blockIdx.x * blockDim.x + threadIdx.x; 
```

# android - Android - GitHub 开源项目 android-alt-installer

> ID：14580240
> 
> 赞同：1
> 
> 时间：2013-01-29T10:04:04.670
> 
> 标签：android

我对 Github 开源项目有一些疑问......来自这个链接[https://github.com/android-enhancement/android-alt-installer](https://github.com/android-enhancement/android-alt-installer)因为它创建了自定义安装程序。

它是特定于设备的 android 操作系统还是应用程序..？这样我就可以修改我的应用程序的安装程序代码，以便它在所有 android 设备上运行相同的安装过程。

我想修改安装程序，以便在安装应用程序之前对文件进行一些检查。如果文件不存在，则应中止安装。

我有一个 Windows 7 操作系统并使用 eclipse IDE 开发应用程序。

此外，我（反复）阅读了上述链接中的 README.txt，但我无法理解。

我可以在我的应用程序中实现自定义安装程序吗？谁能给我一个简单明了的解释。

对此的任何帮助将不胜感激。

# android - 如何从 Mifare Class 1k (MF1S50) 中的受保护块中读取和写入 ndef？

> ID：14580241
> 
> 赞同：1
> 
> 时间：2013-01-29T10:04:05.073
> 
> 标签：android, nfc, mifare

目前我使用的是 MF1S50 卡，它遵循典型的 Mifare Classic 扇区和块结构等。

当没有任何块受到保护时，我能够读取和写入 ndef 消息。该消息似乎消耗了 356 个字节，这只是前几个块。

我正在使用写作`Ndef.writeNdefMessage()`和阅读使用`Ndef.getNdefMessage()`.

我是否可以对我正在使用的块进行密码保护并继续用于`Ndef.getNdefMessage`读取和`Ndef.writeNdefMessage`写入这些块？

（我的第一直觉说不，这是不可能的）。如果不是，一般程序是什么？这是它的工作方式吗？

连接-> 验证-> 读取-> 增量-> 读取-> 关闭。

我猜如果发生这种情况，

`<action android:name="android.nfc.action.NDEF_DISCOVERED" />`

不能用对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:26:34.420

如果 NDEF 存储在 MIFARE Classic 卡上，用于读取扇区内容的密钥 A 是固定的，因此任何 NFC 设备都可以访问这些内容。但是，您可以更改密钥 B 并配置扇区，以便密钥 A 只能用于读取消息而不能覆盖它。

# google-apps-script - 在 google-apps-script 中有没有办法知道谷歌驱动器的文件夹是否为空？

> ID：14580242
> 
> 赞同：2
> 
> 时间：2013-01-29T10:04:10.603
> 
> 标签：google-apps-script, google-drive-api

我想编写一个谷歌应用程序脚本将每个空文件夹丢弃到我的谷歌驱动器中，我应该使用哪个方法/属性来检查当前文件夹（我可以写一个循环）真的是空的，id est 没有任何文件或任何其他里面的嵌套文件夹？

而且，如果您删除了一个链接了一些文件的文件夹，会发生什么？这些文件是被丢弃还是被孤立（如果只是链接到文件夹，当然）？

谢谢你。

– 亲切的，

tiziano solignani, da  Mac [http://blog.solignani.it](http://blog.solignani.it)

这是我在第一个有用的答案之后编码的，我只是插入了分页：

```
function FindEmptyFolders() {

var pageSize = 200;
var folders = null;
var token = null;
var i = null;

Logger.clear()

do {
var result = DocsList.getAllFoldersForPaging(pageSize, token);
folders = result.getFolders();
token = result.getToken();
  for (var i = 0; i < folders.length; i++) {
      for(n=0;n<folders.length;++n){
        if(folders[n].getFiles().length==0 && folders[n].getFolders().length==0){
            folders[n].setTrashed(true)
            Logger.log(folders[n].getName())
            Logger.log(folders[n].getUrl())
        }
      }    
  } 
 } while (folders.length == pageSize);

  MailApp.sendEmail('solignani@solignani.it', 'Script eliminazione folders vuoti Log', Logger.getLog());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:07:10.660

这段代码完成了工作

```
function testForEmptyFolders() {
var folders = DocsList.getAllFolders()
  for(n=0;n<folders.length;++n){
    if(folders[n].getFiles().length==0 && folders[n].getFolders().length==0){
     folders[n].setTrashed(true)
     Logger.log(folders[n].getName())
     }
   }
} 
```

记录器显示已删除文件夹的名称

# vi - 如何使用 VI 转到大文本文件中的最后一个非空行？

> ID：14580243
> 
> 赞同：2
> 
> 时间：2013-01-29T10:04:14.590
> 
> 标签：vi

我有一个非常大的文本文件，其中偶尔有一个空行，底部有大面积的空行。

我可以用“G”回到绝对底部，但我如何回到空白区域开始的最后一行？或者我如何搜索“5 个连续的空白行”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:13:56.327

```
G
?. 
```

`G`走到底部。`?`向后搜索正则表达式，`.`是匹配任何字符的正则表达式。

# java - selvin在android中集成linkedin的代码

> ID：14580245
> 
> 赞同：0
> 
> 时间：2013-01-29T10:04:21.610
> 
> 标签：java, android, linkedin

这是基于 selvin 的编码完成的，但它对我不起作用，即消息没有发布在 android 的链接墙上。登录后停留在同一页面。这是代码`public class LITestActivity extends Activity {

```
// /change keysssssssssssssssssssssssssssss!!!!!!!!!!

static final String CONSUMER_KEY = "key";

static final String CONSUMER_SECRET = "secret";

static final String APP_NAME = "abc";
static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-linkedin";
static final String OAUTH_CALLBACK_HOST = "litestcalback";
static final String OAUTH_CALLBACK_URL = String.format("%s://%s",
        OAUTH_CALLBACK_SCHEME, OAUTH_CALLBACK_HOST);
static final String OAUTH_QUERY_TOKEN = "oauth_token";
static final String OAUTH_QUERY_VERIFIER = "oauth_verifier";
static final String OAUTH_QUERY_PROBLEM = "oauth_problem";

final LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory
        .getInstance().createLinkedInOAuthService(CONSUMER_KEY,
                CONSUMER_SECRET);
final LinkedInApiClientFactory factory = LinkedInApiClientFactory
        .newInstance(CONSUMER_KEY, CONSUMER_SECRET);

static final String OAUTH_PREF = "LIKEDIN_OAUTH";
static final String PREF_TOKEN = "token";
static final String PREF_TOKENSECRET = "token secret";
static final String PREF_REQTOKENSECRET = "requestTokenSecret";

TextView tv = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    tv = new TextView(this);
    setContentView(tv);
    final SharedPreferences pref = getSharedPreferences(OAUTH_PREF,
            MODE_PRIVATE);
    final String token = pref.getString(PREF_TOKEN, null);
    final String tokenSecret = pref.getString(PREF_TOKENSECRET, null);
    if (token == null || tokenSecret == null) {
        startAutheniticate();
    } else {
        showCurrentUser(new LinkedInAccessToken(token, tokenSecret));
    }

}

void startAutheniticate() {
    final LinkedInRequestToken liToken = oAuthService
            .getOAuthRequestToken(OAUTH_CALLBACK_URL);
    final String uri = liToken.getAuthorizationUrl();
    getSharedPreferences(OAUTH_PREF, MODE_PRIVATE).edit()
            .putString(PREF_REQTOKENSECRET, liToken.getTokenSecret())
            .commit();
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
    i.putExtra("sms_body", "Welcome to Rebuix, http://www.rebuix.com");
    startActivity(i);
    Toast.makeText(this,
            "Successfuly posted: " ,
            Toast.LENGTH_LONG).show();
}

void finishAuthenticate(final Uri uri) {
    if (uri != null && uri.getScheme().equals(OAUTH_CALLBACK_SCHEME)) {
        final String problem = uri.getQueryParameter(OAUTH_QUERY_PROBLEM);
        if (problem == null) {
            final SharedPreferences pref = getSharedPreferences(OAUTH_PREF,
                    MODE_PRIVATE);
            final LinkedInAccessToken accessToken = oAuthService
                    .getOAuthAccessToken(
                            new LinkedInRequestToken(uri
                                    .getQueryParameter(OAUTH_QUERY_TOKEN),
                                    pref.getString(PREF_REQTOKENSECRET,
                                            null)),
                            uri.getQueryParameter(OAUTH_QUERY_VERIFIER));
            pref.edit()
                    .putString(PREF_TOKEN, accessToken.getToken())
                    .putString(PREF_TOKENSECRET,
                            accessToken.getTokenSecret())
                    .remove(PREF_REQTOKENSECRET).commit();
            showCurrentUser(accessToken);
        } else {
            Toast.makeText(this,
                    "Appliaction down due OAuth problem: " + problem,
                    Toast.LENGTH_LONG).show();
            finish();
        }

    }
}

void clearTokens() {
    getSharedPreferences(OAUTH_PREF, MODE_PRIVATE).edit()
            .remove(PREF_TOKEN).remove(PREF_TOKENSECRET)
            .remove(PREF_REQTOKENSECRET).commit();
}

void showCurrentUser(final LinkedInAccessToken accessToken) {
    final LinkedInApiClient client = factory
            .createLinkedInApiClient(accessToken);
    try {
        final Person p = client.getProfileForCurrentUser();
    // /////////////////////////////////////////////////////////
    // here you can do client API calls ...
    // client.postComment(arg0, arg1);
    // client.updateCurrentStatus(arg0);
    // or any other API call (this sample only check for current user
    // and shows it in TextView)
    // /////////////////////////////////////////////////////////
        tv.setText(p.getLastName() + ", " + p.getFirstName());
    } catch (LinkedInApiClientException ex) {
        clearTokens();
        Toast.makeText(
                this,
                "Appliaction down due LinkedInApiClientException: "
                        + ex.getMessage()
                        + " Authokens cleared - try run application again.",
                Toast.LENGTH_LONG).show();
        finish();
    }

}

@Override
protected void onNewIntent(Intent intent) {
    finishAuthenticate(intent.getData());
} 
```

}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:28:25.920

尝试以下 URL 以集成社交网络，如 facebook、[Twitter 和 LinkedIn](http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr)

# wcf - 使用 ChannelFactory 对 WCF 进行单元测试

> ID：14580251
> 
> 赞同：1
> 
> 时间：2013-01-29T10:04:34.980
> 
> 标签：wcf, channelfactory

我正在开发一些 WCF 服务，它们将被部署到 Azure，所以我想尝试在本地完成尽可能多的单元测试，以避免在我们运行集成测试时到暂存区域的无用往返。这些服务使用 CQRS 模式，我按照以下方式对所有内容进行了分层： - 将依赖项注入 WCF 服务的引导程序 - 每个服务方法的命令 - 拦截命令的命令处理程序 到目前为止，我可以对命令进行完全单元测试，处理程序和引导程序。我还需要写的是这种类型的测试：

```
[TestMethod]
public void Client_ReceiveValidCommand_WillExecute()
{
    var factory = new ChannelFactory<IDomainWriteService>("*");
    var service = factory.CreateChannel();
    var expectedCommand = BuildAddUsersCommand();
    service.AddUsers(expectedCommand);
} 
```

问题是这个测试在配置文件中**假装** 一个有效的端点。有什么方法可以在我的测试适应性开始时启动 IIS express 之类的东西，然后将通道工厂插入这个 IIS 实例？我根本无法创建一个暂存区域，我可以在其中部署我的服务并运行我的集成测试，所以我宁愿尽可能遵循单元测试方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:31:35.597

我在这里发现了一篇有趣的文章：[http](http://www.reimers.dk/jacob-reimers-blog/testing-your-web-application-with-iis-express-and-unit-tests) ://www.reimers.dk/jacob-reimers-blog/testing-your-web-application-with-iis-express-and-unit-tests解释了如何**在IIS express**，当然也可以在你的单元测试中**运行 IIS express 。**通过这种方式，我可以简单地创建一个新的 IIS express 实例并托管我的 WCF 服务，运行单元测试并最终销毁所有内容。

# c++ - 四元数和旋转轴

> ID：14580257
> 
> 赞同：4
> 
> 时间：2013-01-29T10:04:45.293
> 
> 标签：c++, math, 3d, rotation, quaternions

这个问题已经回答了。下面是使它工作所需的大部分代码！希望它可以帮助别人。

感谢@Aki Suihkonen、@David Hammen 和@MBo。

两个角度函数都给出了正确的答案。

我有三点：

```
A: 12 4 5
B: 6 8 -10
C: 5 6 7 
```

我已经实现了四元数。我想旋转 C 点，使 Angle( A, B, C ) 比以前高 40 度。

我的问题是：我必须根据哪个轴旋转？我想象因为 A、B 和 C 创建了一个平面，所以我必须根据向量 BA 和 BC 的垂直轴旋转点 C。我用它们的单位向量的 CrossProduct 获得了它，但是当我尝试获得 Angle( A, B, C ) 时，它并没有给我正确的结果。

这就是我获得角度的方式：（旧方式）

```
results:
Angle of ABC before rotation = 67.3895.
Angle of ABC after rotation = 107.389.

float Angle( float x1, float y1, float z1,
             float x2, float y2, float z2 )
{
  float x, y, z;
  CrossProduct( x1, y1, z1, x2, y2, z2, &x, &y, &z );

  float result = atan2 ( L2Norm( x, y, z ),
                         DotProduct( x1, y1, z1, x2, y2, z2 ) );

  return result;
} 
```

其中 x1, y1, z1, x2, y2, z2 是单位向量 BA 和 BC 的结果。

更新角度功能：

```
results:
Angle of ABC before rotation = 67.3895.
Angle of ABC after rotation = 107.389.

Angle( Atom &atom1, Atom &atom2, Atom &atom3 )
{
float px1, py1, pz1;
    float px2, py2, pz2;

    UnitVector( atom1.X(), atom1.Y(), atom1.Z(),
            atom2.X(), atom2.Y(), atom2.Z(),
            &px1, &py1, &pz1 );

    UnitVector( atom3.X(), atom3.Y(), atom3.Z(),
            atom2.X(), atom2.Y(), atom2.Z(),
            &px2, &py2, &pz2 );

  float dot_product = DotProduct( px1, py1, pz1, px2, py2, pz2 );
  float length_BA = sqrt( px1*px1 + py1*py1 + pz1*pz1 );
  float length_BC = sqrt( px2*px2 + py2*py2 + pz2*pz2 );

  return acos( dot_product / ( length_BA * length_BC ) );
}

float DotProduct( float x1, float y1, float z1,
                  float x2, float y2, float z2 )
{
  return x1*x2 + y1*y2 + z1*z2;
}

void CrossProduct( float x1, float y1, float z1,
                   float x2, float y2, float z2,
                   float *ox, float *oy, float *oz )
{
  *ox = (y1*z2) -(z1*y2);
  *oy = -((x1*z2) -(z1*x2));
  *oz = (x1*y2) -(y1*x2);
} 
```

所以我的问题是：我必须根据哪个轴旋转点 C，以便 Angle(A,B,C) 比以前大 40 度？

```
 // The 3 points.
  Atom A( "A", -4, 2 , 8 );
  Atom B( "B", -1, 3 , 4 );
  Atom C( "C", -2, -4 , 5 );

  float x1, y1, z1;
  float x2, y2, z2;
  float x, y, z;

  // Get the cross product. Create the perpendicular vector to the BA and BC vectors.
  PointVector( A.X(), A.Y(), A.Z(), B.X(), B.Y(), B.Z(), &x1, &y1, &z1 );
  PointVector( C.X(), C.Y(), C.Z(), B.X(), B.Y(), B.Z(), &x2, &y2, &z2 );

  CrossProduct( x1, y1, z1, x2, y2, z2, &x, &y, &z );

  // Normalize the coordinates.
  float length = sqrt( x*x + y*y + z*z );
  length = 1.0 / length;

  x *= length;
  y *= length;
  z *= length;

  // Create the 40 degrees angle. It is supposed to increment the current ABC angle by 40 degrees.
  float angle = 40*M_PI/180;
  float sinAngleOver2 = sin(angle/2);
  float w = cos(angle/2);

  // Create the axis quat.
  Quatd q(w, x * sinAngleOver2, y * sinAngleOver2, z * sinAngleOver2);

  // Create the point quaternal. The angle of it equals to the current ABC angle.
  angle = Angle( A, B, C ) *180/M_PI;
  angle *= M_PI/180;
  sinAngleOver2 = sin(angle/2);
  w = cos(angle/2);

  // Normalize the coordinates. The coordinates are the C point coordinates.

    x = C.X() - B.X();
    y = C.Y() - B.Y();
    z = C.Z() - B.Z();

    length = sqrt( x*x + y*y + z*z );
    length = 1.0 / length;

    x *= length;
    y *= length;
    z *= length;

  Quatd qpt(w, x * sinAngleOver2, y * sinAngleOver2, z * sinAngleOver2);

  // Rotate.
  qpt = q*qpt*q.unitInverse();

  Atom new_C;
  new_C.X( qpt.x + B.X() );
  new_C.Y( qpt.y + B.Y() );
  new_C.Z( qpt.z + B.Z() );

  cout << "Angle: " << Angle( A, B, new_C )*180/M_PI << '\n'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:54:24.007

此代码不正确：

```
// Normalize the coordinates. The coordinates are the C point coordinates.
length = sqrt( C.X()*C.X() + C.Y()*C.Y() + C.Z()*C.Z() );
length = 1.0 / length;

x = C.X() / length;
y = C.Y() / length;
z = C.Z() / length; 
```

`length`通过重用变量来存储，您已经把自己弄糊涂了`1 / length`。`C`您需要将by的分量相乘以`length`在此处标准化您的向量。

我对四元数数学不够熟悉，无法理解你最后想要做什么，但看起来你确实在`C`绕原点旋转。您想围绕 旋转`B`，这意味着从 减去`B`，`C`围绕原点执行旋转，然后添加`B`到结果以返回原始空间。

就个人而言，我会实现某种四元数向量乘法，或者将四元数转换为矩阵以执行转换。

# java - 会话到期时的授权重定向不适用于提交 JSF 表单，页面保持不变

> ID：14580267
> 
> 赞同：9
> 
> 时间：2013-01-29T10:05:01.537
> 
> 标签：java, jsf, redirect, jsf-2, authorization

我正在使用 JSF2。我已经实现了一个自定义面孔 servlet，如下所示：

```
public class MyFacesServletWrapper extends MyFacesServlet {
    // ...
} 
```

其中我正在做一些授权检查并在用户未登录时发送重定向：

```
public void service(ServletRequest request, ServletResponse response) {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;

    if (...) {
        String loginURL = req.getContextPath() + "/LoginPage.faces";
        res.sendRedirect(loginURL);
    }
} 
```

这在用户尝试导航到另一个页面时有效。但是，当通过 JSF 命令链接/按钮提交 JSF 表单时，这不起作用。line `sendRedirect()`line 被命中并执行，没有抛出异常，但用户停留在同一页面。基本上，根本没有视觉上的变化。

为什么这适用于页面导航，但不适用于表单提交？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T11:39:07.683

您的具体问题很可能是因为您的 JSF 命令链接/按钮实际上正在发送一个 ajax 请求，而该请求又需要一个特殊的 XML 响应。如果您发送重定向作为对 ajax 请求的响应，那么它只会将 ajax 请求重新发送到该 URL。这反过来又没有反馈而失败，因为重定向 URL 返回整个 HTML 页面而不是特殊的 XML 响应。您实际上应该返回一个特殊的 XML 响应，其中指示 JSF ajax 引擎更改当前的`window.location`.

但是你实际上有更大的问题：使用错误的工具来完成这项工作。您应该为这项工作使用一个[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)，而不是一个自制的 servlet，并且肯定不是一个取代`FacesServlet`负责所有 JSF 工作的人的过滤器。

假设您在请求/视图范围的 JSF 后备 bean 中执行登录，如下所示（如果您使用容器管理的身份验证，另请参见[使用 j_security_check 在 Java EE / JSF 中执行用户身份验证的](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)第二个示例）：

```
externalContext.getSessionMap().put("user", user); 
```

那么这个过滤器的启动示例应该这样做：

```
@WebFilter("/*") // Or @WebFilter(servletNames={"facesServlet"})
public class AuthorizationFilter implements Filter {

    private static final String AJAX_REDIRECT_XML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
        + "<partial-response><redirect url=\"%s\"></redirect></partial-response>";

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
        String loginURL = request.getContextPath() + "/login.xhtml";

        boolean loggedIn = (session != null) && (session.getAttribute("user") != null);
        boolean loginRequest = request.getRequestURI().equals(loginURL);
        boolean resourceRequest = request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER + "/");
        boolean ajaxRequest = "partial/ajax".equals(request.getHeader("Faces-Request"));

        if (loggedIn || loginRequest || resourceRequest)) {
            if (!resourceRequest) { // Prevent browser from caching restricted resources. See also https://stackoverflow.com/q/4194207/157882
                response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
                response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
                response.setDateHeader("Expires", 0); // Proxies.
            }

            chain.doFilter(request, response); // So, just continue request.
        }
        else if (ajaxRequest) {
            response.setContentType("text/xml");
            response.setCharacterEncoding("UTF-8");
            response.getWriter().printf(AJAX_REDIRECT_XML, loginURL); // So, return special XML response instructing JSF ajax to send a redirect.
        }
        else {
            response.sendRedirect(loginURL); // So, just perform standard synchronous redirect.
        }
    }

    // ...
} 
```

### 也可以看看：

*   [使用 JSF 2.0 / Facelets，有没有办法将全局侦听器附加到所有 AJAX 调用？](https://stackoverflow.com/questions/9305144/using-jsf-2-0-facelets-is-there-a-way-to-attach-a-global-listener-to-all-ajax/)
*   [FullAjaxExceptionHandler 不在 ajax 按钮上显示会话过期错误页面](https://stackoverflow.com/questions/17296420/fullajaxexceptionhandler-does-not-show-session-expired-error-page-on-ajax-button/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:11:45.047

FacesContext.getCurrentInstance().getExternalContext().redirect("newpage.xhtml"); 试试这个....代替 res.sendredirect(cpath)。

# ios - 使用 iphone mapkit 获取点击坐标

> ID：14580269
> 
> 赞同：19
> 
> 时间：2013-01-29T10:05:02.460
> 
> 标签：ios, objective-c, mapkit

我正在使用苹果的 mapkit 框架制作一个应用程序。我想要做的是从您按下的位置获取经度和纬度。我使用以下代码从用户当前位置获取坐标：

```
- (IBAction)longpressToGetLocation:(id)sender {
    CLLocationCoordinate2D location = [[[self.mapView userLocation] location] coordinate];
    NSLog(@"Location found from Map: %f %f",location.latitude,location.longitude);
} 
```

如何让该代码显示按下的位置而不是用户位置？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-29T10:28:03.983

首先，使用 a`UIGestureRecognizer`代替 an`IBAction`

```
- (void)longpressToGetLocation:(UIGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.state != UIGestureRecognizerStateBegan)
        return;

    CGPoint touchPoint = [gestureRecognizer locationInView:self.mapView];   
    CLLocationCoordinate2D location = 
        [self.mapView convertPoint:touchPoint toCoordinateFromView:self.mapView];

    NSLog(@"Location found from Map: %f %f",location.latitude,location.longitude);

} 
```

**斯威夫特 2：**

```
@IBAction func revealRegionDetailsWithLongPressOnMap(sender: UILongPressGestureRecognizer) {
    if sender.state != UIGestureRecognizerState.Began { return }
    let touchLocation = sender.locationInView(protectedMapView)
    let locationCoordinate = protectedMapView.convertPoint(touchLocation, toCoordinateFromView: protectedMapView)
    print("Tapped at lat: \(locationCoordinate.latitude) long: \(locationCoordinate.longitude)")
} 
```

**斯威夫特 3：**

```
@IBAction func revealRegionDetailsWithLongPressOnMap(sender: UILongPressGestureRecognizer) {
    if sender.state != UIGestureRecognizerState.began { return }
    let touchLocation = sender.location(in: protectedMapView)
    let locationCoordinate = protectedMapView.convert(touchLocation, toCoordinateFrom: protectedMapView)
    print("Tapped at lat: \(locationCoordinate.latitude) long: \(locationCoordinate.longitude)")
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-08T13:50:32.363

```
class mapviewCtrl: UIViewController, UIGestureRecognizerDelegate
{
    @IBOutlet var mapViewVar: MKMapView!
    override func viewDidLoad() {
    super.viewDidLoad()
    let lpgr = UILongPressGestureRecognizer(target: self, action:"handleLongPress:")
    lpgr.minimumPressDuration = 0.5
    lpgr.delaysTouchesBegan = true
    lpgr.delegate = self
    self.mapViewVar.addGestureRecognizer(lpgr)
}
override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
}
func handleLongPress(gestureReconizer: UILongPressGestureRecognizer) {
    if gestureReconizer.state != UIGestureRecognizerState.Ended {
        let touchLocation = gestureReconizer.locationInView(mapViewVar)
        let locationCoordinate = mapViewVar.convertPoint(touchLocation,toCoordinateFromView: mapViewVar)
        println("Tapped at lat: \(locationCoordinate.latitude) long: \(locationCoordinate.longitude)")
        return
    }
    if gestureReconizer.state != UIGestureRecognizerState.Began {
        return
    }
} 
```

***斯威夫特 4。***

```
class mapviewCtrl: UIViewController, UIGestureRecognizerDelegate
{
  @IBOutlet var mapViewVar: MKMapView!
  override func viewDidLoad() {
  super.viewDidLoad()
  self.setMapview()
}
func setMapview(){
  let lpgr = UILongPressGestureRecognizer(target: self, action: #selector(mapviewCtrl.handleLongPress(gestureReconizer:)))
  lpgr.minimumPressDuration = 0.5
  lpgr.delaysTouchesBegan = true
  lpgr.delegate = self
  self.mapViewVar.addGestureRecognizer(lpgr)
} 

@objc func handleLongPress(gestureReconizer: UILongPressGestureRecognizer) {
  if gestureReconizer.state != UIGestureRecognizerState.ended {
    let touchLocation = gestureReconizer.location(in: mapViewVar)
    let locationCoordinate = mapViewVar.convert(touchLocation,toCoordinateFrom: mapViewVar)
    print("Tapped at lat: \(locationCoordinate.latitude) long: \(locationCoordinate.longitude)")
    return
  }
  if gestureReconizer.state != UIGestureRecognizerState.began {
    return
  }
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-23T12:18:53.820

**swift 3**的另一种方法 是：这是几个片段的混搭——使用覆盖，您只需在一个地方更新代码，这很方便，增强模块化，并删除假设和潜在的崩溃点。

```
 override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
    // Let's put in a log statement to see the order of events
    print(#function)

    for touch in touches {
        let touchPoint = touch.location(in: self.mapView)
        let location = self.mapView.convert(touchPoint, toCoordinateFrom: self.mapView)
        print ("\(location.latitude), \(location.longitude)")
    }
} 
```

# mysql - 更新查询我有两个表

> ID：14580270
> 
> 赞同：1
> 
> 时间：2013-01-29T10:05:02.900
> 
> 标签：mysql

我在 mysql 数据库中有两个表。macs 和 deviceinventory 我想更新 macs 表列名 deviceid =1 但更新那些在 deviceinventory 表列设备 ID 中找不到的记录我使用此查询但它给出错误

```
UPDATE macs SET deviceid = 1 
WHERE deviceid = (SELECT deviceid FROM macs NOT IN (
                     SELECT * FROM deviceinventory.`deviceid`
                 )) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:08:13.197

```
UPDATE macs 
SET deviceid = 1 
WHERE deviceid IN (
  SELECT deviceid 
  FROM macs 
  WHERE deviceid NOT IN (
      SELECT deviceid 
      FROM deviceinventory
  )
 ) ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T10:08:24.583

试试这个：

```
UPDATE 
   macs 
SET 
   deviceid = 1 
WHERE 
   deviceid NOT IN 
     (SELECT deviceid FROM deviceinventory); 
```

# devexpress - 如何将 AdvBandedGridView 用作 GridControl 中的详细信息级别

> ID：14580271
> 
> 赞同：0
> 
> 时间：2013-01-29T10:05:06.367
> 
> 标签：devexpress, master-detail, gridcontrol

我想在以下链接中设计一个主从网格视图：

[http://documentation.devexpress.com/#WindowsForms/CustomDocument562](http://documentation.devexpress.com/#WindowsForms/CustomDocument562)

但是，我想使用 AdvBandedGridView 类型作为详细信息视图之一，但我不知道如何填充其数据。

我发现 AdvBandedGridView 类型在所有示例中始终是“主视图”，但就我而言，我希望它是内部细节之一。

我怎么能这样做，提前非常感谢。最好的问候，阿雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:17:46.557

有一篇优秀的文章：[How to: Bind GridControl to Database and Implement Master-Detail Mode at Design Time](http://documentation.devexpress.com/#WindowsForms/CustomDocument2163)。我相信它涵盖了您问题的所有可能方面。

另请阅读以下文章以获取更多详细信息：[主从关系](http://documentation.devexpress.com/#WindowsForms/CustomDocument3473)

# properties - 将属性文件放在 Struts 2 的什么位置？

> ID：14580274
> 
> 赞同：7
> 
> 时间：2013-01-29T10:05:11.523
> 
> 标签：properties, struts2, localization

我有一个属性文件放置在 Java 中的 Web 项目的根目录中。我正在使用 Struts 2。我的代码无法读取属性文件。我应该在哪里保存我的属性文件？

我已经检查了默认路径，它是我的 Eclipse 的安装位置。但我希望该系统应该从项目文件夹本身读取文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:39:46.810

属性文件通常会：

1.  在类路径上，例如，作为资源打开，或
2.  在客户无法访问的位置，例如，在`/WEB-INF`

哪个更合适取决于您的需求。基于类路径的文件允许捆绑默认属性文件而无需配置。例如，Log4J 将`log4j.properties`在类路径的根目录中查找其默认配置文件。

但是，这有时会导致问题，具体取决于类加载顺序：有时系统会拾取“杂散”配置文件。自己配置它可能仍然是可取的；我仍然倾向于类路径，但配置文件也常见于`WEB-INF`. 任何一种方法都有效，并且两种样式都可以使用 JNDI、init 参数、环境变量或系统变量（例如`-D`）来配置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T12:09:53.653

通常您应该将属性文件放到文件`src`夹中，以便您的应用程序能够在您运行应用程序时读取属性文件，属性文件会从`src`文件夹复制到`classes`文件夹。据您所知，该`classes`文件夹应该是项目输出文件夹，因此它将用作`classpath`文件夹，并且应用程序能够加载属性文件（如果它位于`classpath`.

从类路径获取属性的示例：

```
Properties prop = new Properties();

try {
  //load properties from the class path
  prop.load(this.getClass().getClassLoader().getResourceAsStream("myproperties.properties"));

  //get the property 
  System.out.println(prop.getProperty("mykey"));

} catch (IOException ex) {
  ex.printStackTrace();
  throw ex;
} 
```

但是，如果您知道文件系统上文件的路径，则可以加载属性，在这种情况下使用

```
prop.load(new FileInputStream("/path/to/myproperties.properties")); 
```

如果你在谈论`struts.properties`

> 该框架使用了许多属性，这些属性可以根据您的需要进行更改。要更改任何这些属性，请在 struts.properties 文件中指定属性键和值。属性文件可以位于类路径上的任何位置，但通常位于 /WEB-INF/classes 下。

如果您正在寻找消息资源属性，则可以在提供的`struts.properties`或`struts.xml`更高版本中进行配置。

```
<constant name="struts.custom.i18n.resources" value="path/to/resources/MessageResources"/> 
```

该值是文件路径`src/path/to/resources/MessageResources.properties`

如果您正在寻找配置应用程序的正确方法，请考虑选择使用[EasyConf](http://easyconf.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T12:26:38.623

将 myPropertyFile.properties 文件保存在 src 文件夹中（构建项目后，您将在 WEB-INF/classes 中找到它）并使用以下代码访问它们：

```
 Properties prop = new Properties();
  ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
  prop.load(classLoader.getResourceAsStream("/myPropertyFile.properties")); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-23T12:06:39.590

理想情况下，您可以将属性文件保存在：/src/com/cft/web/bundle/。例如，/src/com/cft/web/bundle/LabelResources.properties 或 /src/com/cft/web/bundle/Applicationresources.properties。

实际上，您可以根据自己的喜好提供任何路径。

只要记住在 web.xml/struts-config.xml 中添加正确的完整路径

例如=g。1\. 在 web.xml 中：

```
 <description>Application Resources</description>
		<env-entry-name>ApplicationResources</env-entry-name>
		<env-entry-value>com.cft.web.bundle.ApplicationResources</env-entry-value>
		<env-entry-type>java.lang.String</env-entry-type>
```

2.  在 Struts-config.xml 中

```
<message-resources parameter="com.cft.web.bundle.LabelResources" key="yourPropertiesFileName"/>
```

# php - 跨站点脚本问题

> ID：14580277
> 
> 赞同：1
> 
> 时间：2013-01-29T10:05:17.860
> 
> 标签：php, xss

现在我试图过滤我的所有变量以保护我的网站免受 xss 的影响。我在这里和那里读了一些东西，对我来说，这样做似乎最好的方法是将我需要的所有字符列入我使用的数字的白名单

```
$adrnr = preg_replace("/[^0-9]/", "", $adrnr); 
```

但如果涉及到单词我有一个问题，因为我是德国人，我需要将 ü,ä,ö 和 ß 列入白名单有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:29:32.220

虽然您可以（甚至应该）过滤/转换/验证您的输入，但必须对您的输出进行 XSS 预防，因为您必须做的是基于上下文的。`htmlspecialchars()`将您保存在输出中的许多位置，但不是全部。请参阅[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。

对于德语名称的输入验证，您可以简单地使用：

```
preg_match('/^[a-zA-ZäöüßÄÖÜ ]+$/', $nachname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:07:28.813

您只需要使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)来转义 HTML 字符。

# ios - 静态与（无效）

> ID：14580279
> 
> 赞同：0
> 
> 时间：2013-01-29T10:05:18.483
> 
> 标签：ios, static, void

这是Apple代码的一部分。

我不明白第一行。为什么有一个“无效”的回报？

```
// forward declaration of our utility functions
static NSUInteger _ImageCount(void);

static NSUInteger _ImageCount(void)
{
    static NSUInteger count = 0;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        count = [_ImageData() count];
    });
return count;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:08:41.913

`foo(void)`表示该函数不需要任何参数。但它确实返回并且`NSUInteger`.

```
static NSUInteger _ImageCount(void)
^      ^          ^           ^
|      |          |           parameter list
|      |          function name
|      return type
visibility (may be referenced only from this module) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:11:14.157

我认为你错误地构思了函数，因为函数应该返回“NSUInteger”。

“void”是来自c/c++的参数类型，它指定了“无参数”。

**静态 NSUInteger _ImageCount(void);**

"NSUInteger" 是返回类型 "void" 指定无参数

# javascript - Jquery：读取表格行并根据条件向行添加效果

> ID：14580280
> 
> 赞同：1
> 
> 时间：2013-01-29T10:05:19.543
> 
> 标签：javascript, xml, jquery

正在向表中添加动态数据，从 AJAX 调用中，我想读取其中包含“BLOCK”字符串的行，如果它在那里添加红色？

我怎样才能做到这一点.......？以下是我当前的代码

```
 success: function(xml) {
                  var block_count;
                  var xmlDOM = $(xml);
                  block_count = $(xml).find('item').length;
                  xmlDOM.find("item").slice(position,position+page_size).each(function()       {
                            var $this=$(this);
                            var $user=$this.find("user").text();
                            var $tag=$this.find("tag").text();
                            var $action=$this.find("action").text();
                            var $time=$this.find("time").text();
            $("#datatable").append("<tbody><tr class='datarow'><td>"+$time+"</td> <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>");
                    });

         <table id='datatable' width="100%" cellpadding="7" cellspacing="1" style="line-height: .9em;">
                    <thead>
                            <tr id='tableheader'>
                                    <th>Time</th><th>User</th><th>tag</th><th>Action</th>
                            </tr>
                    </thead>
         </table> 
```

编辑：如果该行中包含 BLOCK 字符串，我该如何添加红色......？

该表看起来像这个图像![在此处输入图像描述](../Images/b7ae873040471770d18aa2d82906981e.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:52:08.640

我做的，

它可以帮助其他人，

```
 $color = /BLOCK/.test($action) ? 'red' : '';
  $("#datatable").append("<tbody><tr class='datarow'"+ $color +" ><td>"+$time+"</td> <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>");
  if ($color == "red"){
       $("tr.datarow:contains('BLOCK')").css('color','red');
   } 
```

感谢你们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:57:50.503

代替：

```
$("#datatable").append("<tbody><tr class='datarow'><td>"+$time+"</td> <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>"); 
```

和：

```
$color = /BLOCK/.test($action) ? 'red' : '';
$("#datatable").append("<tbody><tr class='datarow "+$color+"'><td>"+$time+"</td> <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>"); 
```

然后添加CSS：

```
.datarow.red {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:14:18.970

```
function change() {
$("#datatable tr.datarow:contains('BLOCK')").css({ "background":"red" });
} 
```

您只需要在您想要或希望它在事件中更改时触发或执行更改功能。

[小提琴作为工作示例](http://jsfiddle.net/Sf5n6/)

# android - 在android中关闭自动对焦

> ID：14580281
> 
> 赞同：4
> 
> 时间：2013-01-29T10:05:21.323
> 
> 标签：android, camera

这是在我的应用程序代码中关闭相机自动对焦的任何方法。如果手机没有自动对焦，我想检查我的扫描仪是如何工作的，但在我的手机中我有这个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:12:28.323

使用[`FOCUS_MODE_INFINITY`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_INFINITY)或`FOCUS_MODE_FIXED`。您也可以使用`FOCUS_MODE_MACRO`，但这需要将手机靠近正在扫描的对象。

再想一想，“扫描仪”这个词让人想起条形码和二维码，所以除非你把它们打印成全尺寸的页面，否则你实际上可能会更好`FOCUS_MODE_MACRO`。

[`Camera.Parameters.setFocusMode()`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setFocusMode%28java.lang.String%29)您可以在打开相机时设置所需的对焦模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T21:30:23.147

您可以使用`mCamera.cancelAutoFocus();`

此外，如果您想设置宏或其他焦点模式，您应编写：

```
Camera.Parameters mParam = mCamera.getParameters();
mParam.setFocusMode(Camera.Parameters.FOCUS_MODE_MACRO);
mCamera.setParameters(mParam); 
```

所有对焦模式和相机参数都[在这里](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)可用：

# android - 在android中画一条平滑的线逐渐变小

> ID：14580283
> 
> 赞同：5
> 
> 时间：2013-01-29T10:05:28.130
> 
> 标签：android, android-widget

我正在尝试实现一个简单的可绘制视图。现在我正在使用[Path 的 quadTo](https://i.stack.imgur.com/GM6YV.png)方法来绘制一条平滑线。

结果是这样的： ![在此处输入图像描述](../Images/9fb933681a697aa408942a7698f6a43e.png)

当用户快速移动手指时，我不知道如何逐渐画出一条小线。与此示例相同： ![在此处输入图像描述](../Images/9e08dd378eb56488702e94ecef2b945a.png)

你知道我怎样才能得到这个结果吗？（任何方式，引擎或开源）。现在，我正在考虑实现我自己的“quadTo”方法。但我认为它会很慢（或者超出我的能力）。因为它是 Android SDK 上的原生方法。

感谢您的任何帮助。

这是我的简单可绘制视图的实现，供任何需要它的人使用：

```
public class TestView extends LinearLayout{

private static final String TAG = "TestView";
private PointF previousPoint;
private PointF startPoint;
private PointF currentPoint;
private static final float STROKE_WIDTH = 5f;

private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
private Paint paintBm = new Paint(Paint.ANTI_ALIAS_FLAG);
private Bitmap bmp;
private Canvas canvasBmp;
private Path path;
private int paintSize = 25;

public TestView(Context context, AttributeSet attrs) {
    super(context, attrs);

    this.setWillNotDraw(false);
    paint.setAntiAlias(true);

    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeCap(Paint.Cap.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
    paint.setColor(Color.BLACK);
    //paint.setAlpha(100);

    paintBm.setAntiAlias(true);

    paintBm.setStyle(Paint.Style.STROKE);
    paintBm.setStrokeJoin(Paint.Join.ROUND);
    paintBm.setStrokeCap(Paint.Cap.ROUND);
    paintBm.setStrokeWidth(STROKE_WIDTH);
    paintBm.setColor(Color.BLACK);
    paintBm.setAlpha(100);
    path = new Path();
    //paint.setPathEffect(new CornerPathEffect(2));
}

public TestView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    paint.setAntiAlias(true);

    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeCap(Paint.Cap.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
    paint.setColor(Color.BLACK);

    path = new Path();
    //paint.setPathEffect(new CornerPathEffect(2));
}

@Override
protected void onLayout(boolean changed, int left, int top, int right,
        int bottom) {
    // TODO Auto-generated method stub
    super.onLayout(changed, left, top, right, bottom);
    if(bmp == null){
        bmp = Bitmap.createBitmap(right-left,bottom-top,Bitmap.Config.ARGB_8888);
        canvasBmp = new Canvas(bmp);

    }
}
@Override
public boolean onTouchEvent(MotionEvent event) {
    //printSamples(event);
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        currentPoint = new PointF(event.getX(), event.getY());
        previousPoint = currentPoint;
        startPoint = previousPoint;
        path.reset();
        break;

    case MotionEvent.ACTION_MOVE:
        startPoint = previousPoint;
        previousPoint = currentPoint;
        currentPoint = new PointF(event.getX(), event.getY());
        int historySize = event.getHistorySize();
        for(int i = 0; i < historySize; i++){

        }

        drawLine(canvasBmp, path, paint, previousPoint, currentPoint);
        //path.moveTo(currentPoint.x, currentPoint.y);
        break;
    case MotionEvent.ACTION_UP:
        startPoint = previousPoint;
        previousPoint = currentPoint;
        currentPoint = new PointF(event.getX(), event.getY());
        drawLine(canvasBmp, path, paint, previousPoint, currentPoint);
        paintSize = 25;
        break;
    default:
        break;
    }

    invalidate();
    return true;// super.onTouchEvent(event);
}

@Override
protected void onDraw(Canvas canvas) {
    Log.v("pichan", "dasd");
    //canvas.drawBitmap(bmp, 0,0, null);
    //canvas.drawColor(Color.BLUE);
    //canvas.drawPath(path, paint); 
    canvas.drawBitmap(bmp, 0, 0, paintBm);

}

private void drawLine(Canvas canvas, Path path, Paint paint, PointF start, PointF end)
{
    PointF mid1 = midPoint(previousPoint, startPoint);
    PointF mid2 = midPoint(end, start);

    path.reset();
    paint.setStrokeWidth(paintSize);
    path.moveTo(mid1.x, mid1.y);
    path.quadTo(previousPoint.x, previousPoint.y, mid2.x, mid2.y);
    canvas.drawPath(path, paint);
    //canvas.
    //paintSize -= 1;
}

private PointF  midPoint(PointF p1, PointF p2)
{
    return new PointF((p1.x + p2.x) / 2.0f ,  (p1.y + p2.y) * 0.5f);
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-10T03:46:15.230

经过一段时间的研究，我构建了一个 SignView 让用户登录或绘图，结果将保存到图像文件中。

有兴趣的可以看这里： [SignView](https://github.com/roscrazy/SignView)

希望这个自定义视图可以节省一些时间。

# jquery - 单击列表框中的项目后，使用 jquery 再次取消选择它

> ID：14580284
> 
> 赞同：0
> 
> 时间：2013-01-29T10:05:31.617
> 
> 标签：jquery

我有如下代码的列表框：

```
<select onchange="saveQuery(this);" id="savedQuery" size="10" name="savedQuery[]">
  <option value="xyz">XYZ</option>
  <option value="mno">MNO</option>
</select> 
```

和功能：

```
 function saveQuery(ptr){
     var queryName;
     var $queryName = $('#savedQuery option:selected').val()
     $("#query").val($queryName);        
 } 
```

在这里，在更改时，我正在获得所选项目的价值。

我想在同一次点击时再次取消选择它。这意味着一次选择和取消选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:11:58.470

使用[道具（）](http://api.jquery.com/prop/)

```
function saveQuery(ptr){
  var queryName;
  var $queryName = $('#savedQuery option:selected').val()
  $("#query").val($queryName);
  $("#savedQuery option:selected").prop("selected", false) ;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:12:59.430

获取一个空字符串的值`$('#savedQuery')`会起作用。

```
$('#savedQuery').val(''); 
```

这是jsfiddle。[http://jsfiddle.net/CfDmc/](http://jsfiddle.net/CfDmc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:13:20.467

使用 jQuery清除 a 的最简单方法`select`是将其值设置为空字符串。

由于您正在传递`this`到处理程序，因此无需在 DOM 中为`$('#savedQuery')`代码创建新的搜索。也`$('select').val()`将与`$('select option:selected').val()`.

```
function saveQuery(ptr){
     var $this=$(ptr);
     var $queryName = $this.val();
     $("#query").val($queryName);
     /* reset*/
     $this.val('');        
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:15:53.263

您可以使用以下任何选项：

```
$("#savedQuery").val([]); 
```

或者

```
$("#savedQuery option").prop("selected", false); 
```

或者

```
$("#savedQuery option:selected").prop("selected", false) ; 
```

或者

```
$("#savedQuery").find('option').removeAttr("selected"); 
```

所以你的功能将是这样的

```
function saveQuery(ptr){
   var queryName;
   var $queryName = $('#savedQuery option:selected').val()
   $("#query").val($queryName);
   $("#savedQuery").val([]);
} 
```

# java - 上下文是只读的

> ID：14580286
> 
> 赞同：6
> 
> 时间：2013-01-29T10:05:37.970
> 
> 标签：java, spring, tomcat, servlets, jndi

Helo 大师，我必须动态创建一个 JNDI 数据源，我尝试使用一个名为 SetupApplicationListener 的侦听器来完成它。这里是开始`WEB-LIB/web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee">

    <display-name>pri-web</display-name>

    <!-- Listeners -->
    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>
    <listener>
        <listener-class>myapp.SetupApplicationListener</listener-class>
    </listener> 
```

监听器代码：

```
public class SetupApplicationListener implements ServletContextListener {

    public static Log LOG = null;

    public void contextInitialized(ServletContextEvent ctx){
        try {            
            createOracleDataSource();
.....
        }
    }

    private void createOracleDataSource() throws SQLException, NamingException {
        OracleDataSource ds = new OracleDataSource();
        ds.setDriverType(...);
        ds.setServerName(...);
        ds.setPortNumber(...);
        ds.setDatabaseName(...);
        ds.setUser(...);
        ds.setPassword(...);

        new InitialContext().bind("java:comp/env/jdbc/myDS", ds);
    }

.....
} 
```

并且有错误：

```
[ERROR] 29/01/2013 09:44:50,517 (SetupApplicationListener.java:86) -> Error
javax.naming.NamingException: Context is read only
    at org.apache.naming.NamingContext.checkWritable(NamingContext.java:903)
    at org.apache.naming.NamingContext.bind(NamingContext.java:831)
    at org.apache.naming.NamingContext.bind(NamingContext.java:171)
    at org.apache.naming.NamingContext.bind(NamingContext.java:187)
    at org.apache.naming.SelectorContext.bind(SelectorContext.java:186)
    at javax.naming.InitialContext.bind(InitialContext.java:359)
    at myapp.SetupApplicationListener.createOracleDataSource(SetupApplicationListener.java:102) 
```

我可以将 Context 的只读属性设置为“true”吗？谢谢！:)

```
Tomcat 6.0
Oracle 11g
jdk1.5 
```

**编辑**：不需要动态，我必须在内部定义一个 jndi 数据源我不能修改服务器文件，因为它是一个共享服务器。它必须是 jndi 因为其他模块以这种方式使用它，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:18:35.467

如果您需要动态创建数据源，是否真的需要 JNDI 查找？JNDI 旨在建立应用程序外部的连接，而在您的场景中，由于合法需求，它与应用程序紧密耦合。为什么不只使用 JDBC 连接？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-22T10:59:50.283

您需要创建一个 ServletContextListener 并在那里您可以使 InitialContext 可写 - 这不是应该这样做的方式，但如果您真的需要它，这是您可以做到的一种方式。

这也适用于 Java Melody！

```
protected void makeJNDIContextWritable(ServletContextEvent sce) {
    try {
        Class<?> contextAccessControllerClass = sce.getClass().getClassLoader().loadClass("org.apache.naming.ContextAccessController");
        Field readOnlyContextsField = contextAccessControllerClass.getDeclaredField("readOnlyContexts");
        readOnlyContextsField.setAccessible(true);
        Hashtable readOnlyContexts = (Hashtable) readOnlyContextsField.get(null);
        String context = null;
        for (Object key : readOnlyContexts.keySet()) {
            String keyString = key + "";
            if (keyString.endsWith(sce.getServletContext().getContextPath())) {
                context = keyString;
            }
        }
        readOnlyContexts.remove(context);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:27:25.280

我以前没有遇到过这个问题，因为我通常在应用程序服务器（tomcat、weblogic 等）中定义 JNDI。正如 Kevin 所说，这正是 JNDI 的设计目的；将数据源配置与源代码分离，并通过查找和注入检索 JNDI 资源；

回到您的问题，我认为 tomcat 对在运行时修改 JNDI 有严格的规定。换句话说，您不能从 Context 中重新绑定或删除 jndi。如果您仔细阅读 tomcat 规范，您可能会看到一些关于 jndi 查找但没有重新绑定的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T16:23:25.047

来自 EE 6 平台规范 (JSR 316) 的 EE.5.3.4 部分：

> 容器必须确保应用程序组件实例对其命名上下文只有读取权限。容器必须从修改环境命名上下文及其子上下文的 javax.naming.Context 接口的所有方法中抛出 javax.naming.OperationNotSupportedException。

请注意，本节中的“它们的命名上下文”指的是`java:comp`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T12:05:41.797

`useNaming="false"`我通过在我的 context.xml 中设置解决了这个问题。

[从文档中](https://tomcat.apache.org/tomcat-9.0-doc/config/context.html#Standard_Implementation)：

> useNaming ：设置为 true（默认值）以让 Catalina 为该 Web 应用程序启用与 Java2 Enterprise Edition (J2EE) 平台约定兼容的 JNDI InitialContext。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-08T20:35:35.303

我也有这个问题，但是对于 Tomee 来说是新手，我不知道有一个简单的解决方案。当我将我的 web 应用程序部署到 webapps 文件夹时，该应用程序运行良好，但是当我将它部署到服务文件夹时，我得到了同样的中止。问题是文件夹名称与战争名称不匹配（减去 .war）。一旦我解决了这个问题，该应用程序就可以正常工作了。确保战争名称、文件夹名称和服务名称相同。此问题会产生几个不同的错误，包括 Context is read only 和 Error merging Java EE JNDI entries。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-21T19:30:26.457

当我发现我正在关闭 environmentContext 对象时我解决了这个问题例如：

```
Context context=new InitialContext();
Context environmentContext=(Context) context.lookup("java:comp/env"); 
```

我的代码是：

```
environmentContext.close(); 
```

从 environmentContext 中删除关闭功能后，问题被卖给了我；

# php - 动态包含页面，自动将变量发送到 url

> ID：14580289
> 
> 赞同：1
> 
> 时间：2013-01-29T10:05:51.727
> 
> 标签：php, mysql

我现在正在学习 Php，这意味着我对它非常陌生。我已经动态地包含了我的页面，并且我在我的索引文件上定义了一个变量和一个从数据库中选择的功能页面。问题是它一直告诉我未定义用户，而且我必须将'?bruger_id=1' 添加到' `http://localhost/bruger/index.php`'，才能按应有的方式查看它。我的问题是，我怎样才能自动执行此操作，所以我必须这样做。

$bruger_id = $_GET['bruger_id'];

```
$side = 'content';
if(isset($_GET['side'])){
$side = $_GET['side']; /* gets the variable $side */
         }
include("pages/".$side. ".php"); 
/* otherwise, include the default page */ 
```

*功能* 功能 bruger_funktioner($bruger_id){

```
 $data=array();
    $results = mysql_query ("SELECT bruger.fk_rolle_id, funktioner.funktion_navn 
                                    FROM bruger
                                        INNER JOIN roller 
                                            ON bruger.fk_rolle_id = roller.rolle_id
                                        INNER JOIN roller_funktioner
                                            ON roller.rolle_id = roller_funktioner.fk_role_id
                                        INNER JOIN funktioner
                                            ON funktioner.funktion_id= roller_funktioner.fk_funktion_id
                                    WHERE bruger.bruger_id = $bruger_id") or die (mysql_error());
    while($row = mysql_fetch_assoc ($results)){
        $data  [] = $row['funktion_navn'];
    }   
    return $data;
} 
```

菜单

*   家*   韦尔格布鲁格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:44:25.790

据我所知，您正在寻找这样的构造：

```
<?php
    if(isset($_GET['bruger_id'])) {
        //Do the bruger_functioner
    } else { 
        //Maybe do the bruger_functioner with a default id?
    }
 ?> 
```

如果这不是你所追求的，请告诉我。并更好地解释这个问题。

# android - 基于缩放调整地图上对象的大小

> ID：14580291
> 
> 赞同：1
> 
> 时间：2013-01-29T10:06:01.523
> 
> 标签：android, google-maps

我有一张图片作为标记图像，我正在使用 mapview 的卫星模式。如何根据地图上的其他对象重新调整此图像的大小？就像当我放大或缩小地图时，它会根据其他对象重新调整大小，比如附近的建筑物。

# iphone - 如何检测用户是否拒绝使用我的默认位置？

> ID：14580292
> 
> 赞同：4
> 
> 时间：2013-01-29T10:06:16.180
> 
> 标签：iphone, ios, objective-c, core-location

> **可能重复：**
> [确定用户是否拒绝了 CoreLocation 权限](https://stackoverflow.com/questions/8661653/determining-if-user-has-denied-corelocation-permission)

我将如何检测用户是否在 iOS 应用程序中拒绝“使用我的默认位置”？

我想根据他们的选择向他们展示不同的视图控制器。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:18:06.560

为此，您需要实现以下委托方法：

```
- (void)locationManager:(CLLocationManager*)manager didFailWithError:(NSError*)error
{
    if([error code]== kCLErrorDenied)
        self.locationDenied = YES;

        switch ([error code]) {
        // "Don't Allow" on two successive app launches is the same as saying "never allow". The user
        // can reset this for all apps by going to Settings > General > Reset > Reset Location Warnings.
        case kCLErrorDenied:
            [appDelegate showAllowGPSLocationView];
        default:
            break;
    }

    self.locationDefined = NO;
} 
```

您可以在 AppDelegate 中创建方法“showAllowGPSLocationView”。并向用户显示，您需要访问 GPS 位置。

希望它能解决您的问题。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:12:19.943

```
-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied) {
        // denied
    }
    else if (status == kCLAuthorizationStatusAuthorized) {
        // allowed
    }
} 
```

实施`CLLocationManagerDelegate`委托有关详细说明，请参阅[此处](https://stackoverflow.com/questions/13910748/how-to-detect-user-selects-dont-allow-for-mkmapview-for-iphone)。为我工作。希望它有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:13:47.817

您可以尝试如下：

```
 #if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_4_2
    if ([CLLocationManager locationServicesEnabled] && ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized))  
 #else 
    if ([CLLocationManager locationServicesEnabled])    
 #endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:34:39.717

我为此创建了一个功能，以两种方式解决问题：首先检查是否启用了位置服务（设备上的第一个位置设置），然后检查用户是否授权您的应用程序。

```
- (bool)locationAvailable
{
    if (!([CLLocationManager locationServicesEnabled]) || ( [CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied))
        return FALSE;
    else
        return TRUE;
} 
```

# sql - If Else 条件的 SQLite 语法

> ID：14580294
> 
> 赞同：42
> 
> 时间：2013-01-29T10:06:25.213
> 
> 标签：sql, sqlite

我正在使用 SQLite 数据库。我的表有一个名为“密码”的文本列。之前用于检索我用来执行简单`select * from myTable`查询的值。但现在的要求是，如果密码值不是，`NULL`那么我需要将其显示为“是”或“否”。它是这样的：

```
select * from myTable
if Password != NULL then Password = 'Yes'
else Password = 'No' 
```

我对此进行了很多搜索，但没有得到任何正确的链接或示例。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-29T10:45:01.180

```
SELECT *,
       CASE WHEN Password IS NOT NULL
       THEN 'Yes'
       ELSE 'No'
       END AS PasswordPresent
FROM myTable 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-29T10:09:51.523

SQLite 使用 CASE WHEN THEN END 语法。您可以在此处阅读更多相关信息：[http ://www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)

我没有检查语法，但我猜是这样的：

```
select * 
from myTable CASE WHEN Password != NULL THEN Password = 'Yes' ELSE Password = 'No' END; 
```

虽然我不确定这是否会起作用。如果您尝试根据表中每条记录的密码是否存在来获得“是”或“否”，那么这可能更接近您想要的：

```
SELECT Field1, 
    Field2,
    (CASE WHEN Password != NULL THEN 
        'Yes' 
     ELSE 
        'No' 
     END) as 'Password'
FROM myTable; 
```

同样，我目前无法访问 SQLite 来自己测试它，所以它可能需要一些工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-29T02:50:16.580

我知道如果密码列中已写入密码，我们希望将密码列的值更改为“是”，否则我们将值更改为“否”。

我们可以使用以下两个查询来进行这些更改：

```
UPDATE myTable SET Password = "YES" WHERE Password IS NOT NULL;    
UPDATE myTable SET Password = "NO" WHERE PASSWORD IS NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-24T16:56:37.557

您可以使用[`IIF()`](https://www.sqlite.org/lang_corefunc.html#iif)SQLite v3.32.0+ 中的函数来进一步缩短代码：

```
SELECT
  Password,
  IIF(Password IS NOT NULL, 'Yes', 'No') [HasPassword] 
```

# java - RMI 需要 java.rmi.server.hostname 进行 NAT，那么像 CORBA 这样的其他技术解决 NAT 问题的方法是什么？

> ID：14580298
> 
> 赞同：0
> 
> 时间：2013-01-29T10:06:45.330
> 
> 标签：java, rmi, corba, hosts

在 Java 中，如果客户端需要打开与 RMI 服务器的连接，我们需要在服务器的启动参数中指定**-Djava.rmi.server.hostname=hostxxx ，并在客户端的 hosts 文件中添加 hosts 条目，如下所示：**

```
x.x.x.x  hostxxx 
```

由于每个客户端都需要添加hosts条目，这样做很不方便。

我只是想知道 CORBA（或其他 RPC 解决方案）解决此问题的方法是什么？他们是否还需要像 RMI 一样修改主机条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:37:36.143

该系统属性仅适用于 RMI/JRMP。我不知道有什么方法可以为 CORBA 做这件事，我已经看过了。

# javascript - 从 Highcharts 系列数组中删除起始“0”值

> ID：14580299
> 
> 赞同：0
> 
> 时间：2013-01-29T10:06:49.547
> 
> 标签：javascript, highcharts

我有以下生成的 JavaScript 代码来显示带有 HighCharts 的图表：

```
<script type="text/javascript">

var highchartsOptions   = Highcharts.setOptions(Highcharts.theme);
var TaskChart; // Chart-Objekt    
var TaskDuration          = new Array();    
// Save starting points to javascript variables for HighCharts
var startingUTC = 1288102643364;
TaskDuration =  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,206,216,216,206,206];
for(var i = 0; i < TaskDuration.length; i++) {
    if(TaskDuration[i] == 0) {
        TaskDuration[i] = null;
    }
}
</script>
<script type="text/javascript">
$j(document).ready(function() { 
    TaskChart = new Highcharts.Chart({
    credits: {
            enabled: false
    },
    chart: {
      renderTo: "chart01",
      defaultSeriesType: 'area',
      zoomType: 'x',
      spacingBottom: 250
    },
    title: {
      text: "Task Duration"
    },
    xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            week: '%e. %b %Y'   
        },
        offset: 10,
        startOnTick: true,
        maxZoom: 7 * 24 * 3600000 // seven days
    },
    yAxis: {
      title: {
        text: "Duration"
      }
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.series.name +'</b><br/>';            
        }
    },
    plotOptions: {
        area: { 
           stacking: 'normal',
           lineColor: '#666666',
           lineWidth: 1,
           marker: {
              lineWidth: 1,
              lineColor: '#666666'
           }
        }
     },
    series: [
    {
        name: 'Duration',
        pointStart: startingUTC,
        pointInterval: 24*60*60*1000, 
        data: TaskDuration
    }]
  });
});
</script> 
```

现在的问题是我想从 TaskDuration 系列数组的开头删除所有“0”值。

我尝试将数组中的值设置为“null”：

```
for(var i = 0; i < TaskDuration.length; i++) {
    if(TaskDuration[i] == 0) {
        TaskDuration[i] = null;
    }
} 
```

但 Highcharts 仍然在图表中显示值。

如何防止这种行为？

我还尝试从数组中删除所有值，直到一个不是“0”的值。但是使用这种方法，“startingUTC”是错误的。也许我还必须重新计算这个值......

问候， 桑德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:11:42.673

您需要删除不设置 null 的元素，使用它从数组中删除零元素：

```
var myArray=[];

for(var i = 0; i < TaskDuration.length; i++) {
    if(TaskDuration[i] != 0) {
       myArray.push(TaskDuration[i]);
    }
} 
```

工作[JSfiddle](http://jsfiddle.net/zaheerahmed/JwmuT/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:57:48.747

问题是您正在使用`pointStart`and `pointInterval`。
`PointInterval`将忽略您的空点并将点添加到`yAxis`.
所以，删除它。

```
series: [{
    name: 'Duration', 
    data: TaskDuration
}] 
```

# django - 如何在 Django admin 中创建一个依赖于类别过滤器的子类别过滤器？

> ID：14580304
> 
> 赞同：1
> 
> 时间：2013-01-29T10:07:23.790
> 
> 标签：django, filter, admin

在我的 Django 管理员模型的列表过滤器中，我有一个过滤器`Category`，我想添加一个过滤器`Sub-category`，其值取决于所选`Category`值。

我怎样才能做到这一点`ModelAdmin.list_filter`？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:33:47.987

为 Sub-Category创建一个继承自[SimpleListFilter的类。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

在方法内部`lookups`检查是否`request.GET`有匹配的查询字符串`Category`，如果有，则根据此过滤器创建一个查询集。

应该看起来像这样：（根据您的真实模型进行更改..可能有语法错误，我没有测试代码，但它应该看起来非常相似）

```
class SubCategoryFilter(SimpleListFilter):
    title = 'sub category'
    parameter_name = 'sub_category'

    def lookups(self, request, model_admin):
        sub_categories = Category.objects;
        if 'category' in request.GET:
             sub_categories = sub_categories.filter(main_category=request.GET['category'])
        return (
            (sub_cat.pk,sub_cat.text) for sub_cat in sub_categories
        ) 
```

# ruby-on-rails - Rails 搞砸了，找不到宝石

> ID：14580306
> 
> 赞同：0
> 
> 时间：2013-01-29T10:07:24.570
> 
> 标签：ruby-on-rails, ruby

我不知道我在 OSX Mountain Lion 下安装 ruby​​ / rails 发生了什么。

我从一个黑色的 rails 应用程序开始，运行 bundle 并列出已安装的 bundle，`bundle show`我得到了这个：

```
[..]
* sqlite3 (1.3.7)
* thor (0.17.0)
* tilt (1.3.3)
* treetop (1.4.12)
[..] 
```

一旦我运行 rake db:migrate 我得到以下错误：

```
Could not find thor-0.17.0 in any of the sources
Run `bundle install` to install missing gems. 
```

但是，如图所示，安装了 thor-0.17。如果我强迫它：

```
sudo gem install --version 0.17 thor 
Successfully installed thor-0.17.0
1 gem installed
Installing ri documentation for thor-0.17.0...
Installing RDoc documentation for thor-0.17.0... 
```

并再次运行迁移，我一直有依赖错误（在这种情况下“在任何源中都找不到 formtastic-2.2.1”）对于捆绑包说已经安装的 gem。有什么帮助吗？谢谢

**编辑**

*   [宝石文件： http](http://pastebin.com/WSz5dLrm) ://pastebin.com/WSz5dLrm
*   Gemfile.lock：[http ://pastebin.com/2kuFz1kK](http://pastebin.com/2kuFz1kK)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:18:53.283

因此，使用您的 Gemfile 后，我收到以下错误：

> Bundler 找不到 gem "railties" 的兼容版本：在 Gemfile 中：rails (= 3.2.8) ruby​​ 依赖于 railties (= 3.2.8) ruby
> 
> ```
> sass-rails (~> 3.2.3) ruby depends on
>   railties (3.2.11) 
> ```
> 
> Bundler 找不到 gem "actionpack" 的兼容版本：在快照中 (Gemfile.lock): actionpack (3.2.11)
> 
> 在 Gemfile 中：meta_search (>= 1.1.0.pre) ruby​​ 依赖于 actionpack (~> 3.1.0.alpha) ruby
> 
> 运行`bundle update`将只使用 Gemfile 中的 gem 从头开始​​重建快照，这可能会解决冲突。

使用 3.2.11 版本的 rails 修复了捆绑包。

无论如何，Rails 3.2.11 修复了一个巨大的安全威胁，所以更新吧！

# c# - 最初不可见的按钮

> ID：14580309
> 
> 赞同：0
> 
> 时间：2013-01-29T10:07:32.697
> 
> 标签：c#, winforms, visible

我正在 c# 应用程序上制作一个“窗体应用程序”。我有几个按钮和文本框。**我想要的是，当我第一次运行应用程序时，一些按钮和文本框是不可见的。** 在我单击某个按钮后，这些按钮和文本框变得可见。

在我运行应用程序的那一刻，最初在表单上可以看到所有内容（按钮和文本框）。按下按钮后，我可以让它们可见和不可见，但最初每件事都是可见的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:08:49.183

每个[Button](http://msdn.microsoft.com/en-us/library/system.windows.forms.button%28v=vs.100%29.aspx)类都有一个[Visible](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible%28v=vs.100%29.aspx)属性，只需将其设置为`true`or `false`，即可显示或隐藏按钮。

*   首先从 PropertyGrid 将[Visible](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible%28v=vs.100%29.aspx)属性设置为`false`（对于那些在启动时不可见的按钮）

*   处理点击其他人

*   单击其中一个（基于您的应用程序逻辑）make =>

（例子）

```
btnMyInvisibleButton.Visible = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T10:09:30.663

`Visible`对于要隐藏的每个控件，在设计器上将该属性设置为 false。

当您希望它们再次可见时，只需稍后在代码中将其设置为 true（例如在按钮按下事件中）。

MSDN 参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T10:09:22.707

您需要做的就是通过将它们的 Visible 属性设置为 False 使它们在表单设计器中不可见。

注意：如果您这样做，它们在设计器中*仍然*可见 - 但它们在运行时将不可见。

# asp.net - 如何在 javascript 中获取 ASP.NET 会话变量？

> ID：14580311
> 
> 赞同：1
> 
> 时间：2013-01-29T10:07:36.677
> 
> 标签：asp.net, vb.net, session

我有一个带有一些文本字段的网站。

网站 b 在 a 的 iframe 中。

我在网站 b 中保存了不同会话中的一些值

```
 Session("anzahlInterneTeilnehmer") = anzahlInterneTeilnehmer
  Session("anzahlExterneTeilnehmer") = anzahlExterneTeilnehmer 
```

保存会话后，我从网站 a 调用父函数

```
parent.parentTeilnehmer() 
```

我想在网站 a 的文本字段中显示会话值

```
 function parentTeilnehmer() {
            var intern = ????
            var extern = ????
            var InterneTextFeld = ISGetObject("WebInput1");
            var ExterneTextFeld = ISGetObject("WebInput2");
            InterneTextFeld.SetValueData(intern);
            ExterneTextFeld.SetValueData(extern);
        } 
```

如果不刷新整个页面，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:10:22.720

会话存储在服务器端，因此您无法通过 javascript 在客户端访问这些变量。我建议将这些变量保存到隐藏字段

```
<input type="hidden" id="anzahlInterneTeilnehmer" runat="server" />
<input type="hidden" id="anzahlExterneTeilnehmer" runat="server" /> 
```

将事件处理程序附加到网站 A 的页面 PreRender 方法，并在那里将 anzahlInterneTeilnehmer 的值设置为会话值（请原谅我的 VB）

```
Private Sub Page_Render(ByVal sender As System.Object, ByVal e As
System.EventArgs) Handles MyBase.PreRender
anzahlInterneTeilnehmer.Value = Session("anzahlInterneTeilnehmer")
End Sub 
```

然后在你的 javascript

```
var internHolder = document.getElementById("anzahlInterneTeilnehmer");
var intern = internHolder.value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T11:08:04.010

你可以在javascript中这样做

```
var val = <%= Session["MyVariable"]%>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:31:50.027

只有当您的 js 函数出现在*.aspx*页面上时，您才能在 javascript 中访问 Session 变量，这不是一个好方法，因为最好将我们的脚本文件保存在单独的 Scripts 文件夹中，这样您就可以将会话值存储在隐藏字段中：

```
<script type="text/javascript">
    function GetSessionValues() {
        var intern = '<%=Session("InternalValue") %>';
        var extern = '<%=Session("ExternalValue") %>';
    }
</script> 
```

# c# - 在gridview单元格中插入div

> ID：14580312
> 
> 赞同：1
> 
> 时间：2013-01-29T10:07:37.347
> 
> 标签：c#, asp.net, gridview

我有一个gridview，在RowDatabound 事件中我试图在单元格内插入一个div 并设置innerhtml。在调试时，div 的 innerHTML 充满了文本。但是当它运行时 ii 是一个空单元格。有什么帮助吗？

```
 protected void grdThreat_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            HtmlGenericControl div = new HtmlGenericControl("div");

            div.InnerHtml = e.Row.Cells[4].Text;
            e.Row.Cells[4].Controls.Add(div);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:21:11.813

面板将呈现为`div`，因此您可以使用它：

```
Panel mainPanel = new Panel();

mainPanel .Controls.Add(new LiteralControl(e.Row.Cells[4].Text));

e.Row.Cells[4].Controls.Add(mainPanel); 
```

# c++ - 创建模板队列的问题

> ID：14580320
> 
> 赞同：0
> 
> 时间：2013-01-29T10:08:00.153
> 
> 标签：c++, templates, queue

我正在尝试编写自己的模板队列类来学习如何使用模板。我看到这种类型的问题经常被问到，并且我已经阅读了很多回复，但我仍然没有看到我做错了什么。

```
template <class type>
struct Node{
    type data;
    Node *next;
};

template <class type>
class LinkedListQueue{
public:
    LinkedListQueue();
    void push(type new_data);
    void pop();
    type front();
    void print();

private:
    Node<type> *head;
    Node<type> *tail;
};

template <class type>
LinkedListQueue<type>::LinkedListQueue(){
    this->head = NULL;
    this->tail = NULL;
}

template <class type>
void LinkedListQueue<type>::push(type new_data){
    Node<type> *newNode;
    newNode->data = new_data;
    newNode->next = NULL;

    if(this->head == NULL){
        this->head = newNode;
        this->tail = newNode;
    }else{
        this->tail->next = newNode;
        this->tail = newNode;
    }
}

template <class type>
void LinkedListQueue<type>::pop(){
    if(this->head != NULL){
        this->head = this->head->next;
        if(this->head == NULL){
            this->tail == NULL;
        }
    }else{
    cout << "Queue is Empty" << endl;
    }
}

template <class type>
type LinkedListQueue<type>::front(){
    return(this->head->data);
}

int main() {
    LinkedListQueue<int> newQueue;
    newQueue.push(5);
    newQueue.push(4);
    cout << newQueue.front() << endl;
    newQueue.pop();
    cout << newQueue.front() << endl;
} 
```

我无法确定问题出在哪里。如果我注释掉 pop 和 last front call，第一个 front() 调用会正确输出。但是，取消注释 pop 和 front 会破坏一切。当我尝试调试 pop() 时，列表中似乎只有一个节点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:11:19.477

您没有分配新节点。只是存储数据。

```
Node<type> *newNode; //<=== indeterminate pointer
newNode->data = new_data;
newNode->next = NULL; 
```

不管怎样，你总是在推入一个新元素，所以分配它，设置它，然后弄清楚它的去向。此外，为您的节点创建一个构造函数，该构造函数接受数据的 const-ref，并将 next 设置为 NULL。这使您的代码更加直接（实际上更高效）：

```
Node<type> *newNode = new Node<type>(new_data); 
```

随着节点模板变为：

```
template <class type>
struct Node
{
    Node(const type& value) 
        : data(value), next(NULL) {};
    type data;
    Node *next;
}; 
```

最后，您`pop()`并没有删除节点，只是在处理指针。您可能也想解决这个问题。

```
template <class type>
void LinkedListQueue<type>::pop()
{
    if(this->head != NULL)
    {
        Node<type>* victim = this->head;
        this->head = this->head->next;
        if(this->head == NULL)
            this->tail == NULL;
        delete victim; // <=== note: deleting node.
    }
    else
    {
        cout << "Queue is Empty" << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:11:33.727

这是一个**大**问题：

```
Node<type> *newNode;
newNode->data = new_data; 
```

您声明一个指针并开始直接访问它，而不为它分配内存。这意味着指针指向一个看似随机的位置。导致*不确定的行为*和奇怪的事情发生是可以预料的。

此外，如果您为节点分配内存，则会出现内存泄漏，因为您没有释放`pop`函数中的节点。

# mysql - 获得 7 天的每日总销售额

> ID：14580323
> 
> 赞同：3
> 
> 时间：2013-01-29T10:08:22.897
> 
> 标签：mysql, sql

我正在尝试获取过去 7 天的日期和总和（总计）。我正在尝试此代码并获取**date NULL 和 daily_sale 0.00**

```
SELECT
  date,
  IFNULL( SUM( total ), 0 ) AS daily_sale
FROM sales
WHERE date BETWEEN NOW()
    AND DATE_SUB(NOW(), INTERVAL 7 DAY) 
```

我注意到如何获得日期和每日总销售额。我想得到结果

```
date       daily_sale    
2013-01-29 500.00
2013-01-28 500.00
2013-01-27 500.00
2013-01-26 500.00
...
2013-01-23 500.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:14:22.417

您可以尝试`interval - 7 day`：

```
SELECT  date, SUM(Coalese(total,0)) AS daily_sale
FROM yourtable
WHERE date BETWEEN NOW()  AND DATE_ADD(NOW(), INTERVAL -7 DAY) 
```

不知道为什么`between`不起作用，请查看：

**[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/e9b9e/1)**

```
select dates, sum(coalesce(daily_sale,0)) as total
from sales
where dates <= NOW()
and dates >= Date_add(Now(),interval - 7 day)
group by dates
;

|                          DATES | TOTAL |
------------------------------------------
| January, 23 2013 00:00:00+0000 |   500 |
| January, 24 2013 00:00:00+0000 |   500 |
| January, 27 2013 00:00:00+0000 |  1500 |
| January, 28 2013 00:00:00+0000 |  1000 |
| January, 29 2013 00:00:00+0000 |   500 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:11:19.757

来自 MySQL [BETWEEN...AND 手册](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

```
expr BETWEEN min AND max 
```

所以把它改成

```
 SELECT CURDATE( ),DATE_SUB( CURDATE() , INTERVAL 7 DAY ) AS weekEndDate, 
           `date` , SUM( COALESCE(`daily_sale`,0 ) ) AS weekly_sale
    FROM tbl_sale
    GROUP BY weekEndDate
    LIMIT 0 , 30 
```

[`Working DEMO`](http://sqlfiddle.com/#!2/40938/4)

笔记：

*   **date**是 mysql 保留关键字，所以将其包装在```
*   SUM 的语法是`SUM(column_name)`，您的列名是**daily_sales**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:20:20.143

如果第一个日期表达式需要是较低的，正如@diEcho 的回答所暗示的那样，那么您需要`NOW()`在表达式中创建第二个术语，而不是第一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:20:20.720

您应该在 BETWEEN 命令中首先使用最低日期，因此 NOW() 必须在最后

```
SELECT
  date,
  IFNULL( SUM( total ), 0 ) AS daily_sale
FROM sales
WHERE date BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) and NOW() 
```

或者如果您需要每天的统计数据：

```
SELECT
  DATE(`date`),
  IFNULL( SUM( total ), 0 ) AS daily_sale
FROM sales
WHERE date BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) and NOW()
group by DATE(`date`) 
```

# android - 如何使 asynctask 的状态从运行到完成？

> ID：14580327
> 
> 赞同：0
> 
> 时间：2013-01-29T10:08:31.337
> 
> 标签：android

我正在尝试在活动类之外实现 AsyncTask。现在的问题是这个 asynctask 类的状态总是显示为正在运行，我该如何让它完成？

这是我的活动课

```
protected void onCreate(Bundle savedInstanceState) {

    employeeAsyncTask.execute(new String[] {url});

    System.out.println("Status "+employeeAsyncTask.getStatus());
    //employeeAsyncTask.cancel(true);

    while(employeeAsyncTask.getStatus() == AsyncTask.Status.RUNNING){

    }

    while (employeeAsyncTask.getStatus()== AsyncTask.Status.FINISHED)   {
        System.out.println("hereeeeeeeeeeeeee");
        ArrayList<Employee> list = employeeAsyncTask.getEmpList();
        System.out.println("Size of list "+list);
    }

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_capture);

} 
```

这是我的异步任务类

```
public class FetchEmployeeAsyncTask extends AsyncTask<String, Void, ArrayList>{

private ArrayList<Employee> empList = null;
private boolean done = false;

/**
 * @return the done
 */
public boolean isDone() {
    return done;
}

/**
 * @param done the done to set
 */
public void setDone(boolean done) {
    this.done = done;
}

@Override

protected ArrayList doInBackground(String... url) {
    // TODO Auto-generated method stub
    ArrayList<Employee> employees = null;
    for(String employeeUrl : url){

        employees = fetch(employeeUrl);
    }
    return employees;
}

private ArrayList<Employee> fetch(String url) {
    // TODO Auto-generated method stub
    ArrayList<Employee> employees = null;
    String response = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        response = EntityUtils.toString(httpEntity);
        employees = EmployeeXMLParser.XMLfromString(response);
        System.out.println("Size in fetch "+employees.size());

        //System.out.println("Employee Name :: " + employees.get(0).getFirstName() + " " + employees.get(0).getLastName());
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } /*catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        System.out.println("Error parsing the response :: " + response);
        e.printStackTrace();
    }*/
    return employees;
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    done = false;
}

@Override
public void onPostExecute(ArrayList employeeList){

    setEmpList(employeeList);
    System.out.println("in post execxute "+employeeList.size());
    done = true;
}

public ArrayList<Employee> getEmpList() {
    return empList;
}

public void setEmpList(ArrayList<Employee> empList) {
    this.empList = empList;
} 
```

}

我无法弄清楚 onPostExecute() 中应该包含什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:03:40.270

添加一个将活动作为参数并将其存储在字段中的构造函数：

```
private MyActivity activity;

public FetchEmployeeAsyncTask(MyActivity activity) {
    this.activity = activity;
} 
```

然后在 onPostExecute 方法中，您可以传回员工列表：

```
@Override
public void onPostExecute(ArrayList employeeList) {
    activty.onEmpListLoaded(employeeList);
} 
```

并在您的活动中执行`onEmpListLoaded`任何需要做的事情。

# asp.net - ASP.NET 确认框显示两次

> ID：14580332
> 
> 赞同：1
> 
> 时间：2013-01-29T10:08:52.180
> 
> 标签：asp.net

我已经搜索了一种在按下某个按钮时显示确认框的方法。我唯一的问题是确认框显示了两次。代码：

```
<dx:ASPxButton ID="btnDel" runat="server" onClick="btnDel_Click" Text="Delete"> 
```

在 Page_Load 中：

```
btnDel.Attributes.Add("onclick", "return confirm('Are you sure?');"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:14:13.563

将您的 Page_Load 代码更改为：

```
if (! IsPostback)
    btnDel.Attributes.Add("onclick", "return confirm('Are you sure?');"); 
```

您只需在第一次加载页面时添加一次 onclick 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:43:40.980

您使用的按钮控件是 devexpress 按钮，它实现了自己的 ClientSideEventCollection，您可以在其中添加任何 javascript。你可以这样做

```
<dx:ASPxButton ID="btnDel" runat="server" onClick="btnDel_Click" Text="Delete">
<ClientSideEvents Click="function(s, e) {
    e.processOnServer = confirm('Are sure to save data?');
  }" />
</dx:ASPxButton> 
```

这`e.processOnServer`是一个布尔值，它决定是否应该执行服务器行程，所以我们将确认的结果分配给这个布尔值。

[您可以在此处](http://documentation.devexpress.com/#AspNet/CustomDocument9448)的 devexpress 文档中找到有关开发快速控件上的 ClientSideEvents 的更多信息

# c# - 如何在 c++/CLI 中调用带有 out 参数的 c# 函数

> ID：14580334
> 
> 赞同：1
> 
> 时间：2013-01-29T10:08:51.880
> 
> 标签：c#, c++-cli, activex

我对 C++ 很陌生。

我有一个 C# dll，我想在 c++ 项目中调用它。

C# 中的函数我会这样声明：

```
 public int ShowStringReturn(out string str)
    {
        str = "Message from c#";
        return 0; 
    } 
```

然后，我在我的 C++ 项目中调用它：

```
__declspec(dllexport) 
    int ShowStringCSharpReturn (std::string &strOut)
    {
        try
        {  
            String^ str; 
            IngWrapper::Ingressus_Instance->xIMUobject->ShowStringReturn(str);  

            using System::Runtime::InteropServices::Marshal; 
            const char* chars = (const char*)(Marshal::StringToHGlobalAnsi(str)).ToPointer( );
            strOut = chars; 

            return 0; 
        }
        catch (Exception^ ex)
        {
            MessageBox::Show(ex->Message,"Error",MessageBoxButtons::OK,MessageBoxIcon::Error);
            return -1;
        }
    } 
```

我可以编译它，但是当我在我的 windows 窗体应用程序中调用 activex dll 时，我收到一个错误“外部组件已引发异常”我应该如何声明和调用我的函数？

# php - 如何检查CKEDITOR textarea是否为空

> ID：14580335
> 
> 赞同：1
> 
> 时间：2013-01-29T10:08:55.867
> 
> 标签：php, html, ckeditor

我有一个 CKEDITOR 文本区域。该字段永远不会为空，因为 CKEDITOR 总是写

```
<p>&nbsp;</p> 
```

如果该字段不包含用户输入。

有没有办法检查该字段是否为空（没有用户输入）？因为：如果用户输入为空，$_POST['textarea'] == '' 也会返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:27:30.590

好吧，如果它一直添加这个`<p>&nbsp;</p>`怎么样？

```
if (in_array($_POST['textarea'], array('<p>&nbsp;</p>', ''))) 
```

或者：

```
if (str_replace('<p>&nbsp;</p>', '', $_POST['textarea']) == '') 
```

如果用户无意中按下了，这也将返回 true `enter`，但不添加任何文本。

编辑：

根据您对“空输入”的概念，您可以随心所欲地使用它：

```
if (trim(str_replace('&nbsp', '', strip_tags($_POST['textarea']))) == '') 
```

等等

再编辑一些：

原来这已经讨论过：[Validate FCKEditor blank or not](https://stackoverflow.com/questions/10596884/validate-fckeditor-blank-or-not)

# backbone.js - Backgrid 如何知道为分页生成哪些数字？

> ID：14580336
> 
> 赞同：0
> 
> 时间：2013-01-29T10:08:59.153
> 
> 标签：backbone.js, backgrid

我正在为我的 Backgrid 驱动的表格实现分页，如下所示：

```
footer: Backgrid.Extension.Paginator 
```

在我的收藏中：

```
state: {
   pageSize: 15
} 
```

现在，我实际上还没有实现对分页服务器端的任何处理（我觉得这可能会产生奇怪的结果），但它把这个 HTML 放在：

![在此处输入图像描述](../Images/86e1b3a134c217436a2e73dc44891773.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:29:16.507

这是一种错误，也是一种不匹配的期望。

它开始向后分页的原因是因为您的服务器模式`Backbone.PageableCollection`没有`totalRecords`设置 in `state`，根据[文档，这是在服务器模式下所必需的。](https://github.com/wyuenho/backbone-pageable#introduction)

此外，`Backgrid.Extension.Paginator`默认滑动窗口为 10 页，但显然 0.1 版假设当您决定召唤网格时集合不会为空，（它基本上假设您会遵循[推荐的最佳实践here](http://backbonejs.org/#FAQ-bootstrap)） ，所以这种情况从未被检查过。在此关注此问题的进展[。](https://github.com/wyuenho/backgrid/issues/33)

# java - 最高效 - 性能方面 - 用于 JVM 间通信

> ID：14580337
> 
> 赞同：9
> 
> 时间：2013-01-29T10:08:59.620
> 
> 标签：java, performance, ipc, rmi, mq

我有一个需要在不同进程之间进行通信的 Java 应用程序。进程可以在同一个 JVM 或不同的 JVM 上运行，但在同一台机器上运行。

我的应用程序需要向另一个进程（相同或不同的 JVM）提交“消息”并忘记它。类似于IBM“MQ”之类的消息队列，但简单，只使用内存，没有IO到硬盘以获得性能提升。

我不确定 Performance prescriptive 的最佳方法是什么。

*   我想知道 RMI 在性能方面是否有效，我认为它需要一些开销。
*   使用本地主机的 TCP/IP 套接字怎么样？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T10:20:39.533

> 我想知道 RMI 在性能方面是否有效，我认为它需要一些开销。

RMI 的工作效率很高。它做的比大多数人需要的要多得多，但通常足够快。您应该能够以大约 1 毫秒的延迟获得每秒 1-3 K 条消息。

> 使用本地主机的 TCP/IP 套接字怎么样？

这始终是一个选项，但使用纯 Java 序列化不会比使用 RMI 快很多。如何进行序列化和反序列化对于高性能至关重要。

* * *

一个重要的注意事项是，大部分时间都花在序列化和反序列化消息上，大多数传输无法帮助您，因此如果您想要获得最大性能，您必须考虑有效的编组策略。大多数传输协议仅对原始字节进行基准测试。

具有讽刺意味的是，如果您愿意使用磁盘，它可以比 TCP 或 UDP（如 ZeroMQ）更快，而且您可以“免费”获得持久性。

*这个库（我是作者）可以在进程之间*每秒执行数百万条消息，延迟低至 100 纳秒（比 ZeroMQ 低 350 倍）[https://github.com/peter-lawrey/Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle) 优点是

*   超快速的序列化和反序列化，大多数传输基准都避免包括这一点，因为它通常需要比传输成本更长的时间。
*   是您可以在消息发送后随时监控队列之间发生的情况。
*   重播所有消息。
*   生产者可以在您的消费者之前处理任何数量的数据，以优雅地处理微突发，直至您的磁盘空间大小。例如，消费者可能落后于 TB。
*   支持通过 TCP 进行复制。
*   消费者或生产者的重启在很大程度上是透明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T10:15:06.700

如果您正在开发服务器应用程序，请尝试考虑 ZeroMQ。它具有出色的性能，允许更轻松地构建进程间通信，允许构建异步 API。

[ZeroMQ](http://www.zeromq.org/)通过 InterProcess 通信宣布了出色的性能。[甚至](http://www.zeromq.org/area:faq#toc3)比 TCP 还要好听起来很棒。我们正在为我们的集群化模式考虑这个解决方案。

Pieter Hintjens 对不同 Message Broker 之间的性能比较给出了[很好的答案](https://stackoverflow.com/questions/7921324/performance-comparison-between-zeromq-rabbitmq-and-apache-qpid/7959438#7959438)。

# winapi - Win32Native.Readfile 等待同步，性能瓶颈？

> ID：14580339
> 
> 赞同：0
> 
> 时间：2013-01-29T10:09:04.803
> 
> 标签：winapi, synchronization, profiler, blocking, redgate

我分析了一个应用程序。基本上每个线程都从网络共享读取 XML 文件，反序列化对象，记录到本地文件，异步记录到数据库并调用 Web 服务。24 核机器上的线程数量约为 14。

Redgate 分析器向我显示多线程应用程序 70% 的时间都在等待同步。这是一个令人震惊的信号还是意料之中的？此外，如果您可以就如何分析此类分析器日志提供建议，请分享您的知识。

![探查器日志](../Images/302704b890f2a5f6090ec158521b7655.png)

![调用图](../Images/fdf23f2cc48339a2d9f809d97ad41729.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:55:11.263

等待同步只是意味着一个线程在等待另一个线程完成操作时被挂起。您是否应该担心这一点取决于您预计该线程上的操作需要多长时间才能完成。

例如，如果堆栈指示读/写，那么它可能只是意味着磁盘很慢。也许您可以通过更改代码来最小化它；也许它只是一个不稳定的网络或磁盘驱动器。

# java - 生成 GOST 34.10-2001 密钥对并将其保存到某个密钥库

> ID：14580340
> 
> 赞同：4
> 
> 时间：2013-01-29T10:09:09.653
> 
> 标签：java, bouncycastle, keytool, jce, gost3410

目前我需要为 GOST 34.10-2001 签名算法生成一个密钥对。很高兴发现充气城堡提供者支持此算法，但我无法生成密钥对并将其保存到任何类型的任何密钥库。`keyalg`目前我尝试了这个命令（如果is`DSA`和 sigalg is ，这个命令很好用`SHA1withDSA`）：

```
keytool -genkey -alias test1 -keyalg ECGOST3410 -keysize 512  -sigalg GOST3411withECGOST3410 \
-keypass test_1 -validity 1000 -storetype JKS -keystore test1.jks -storepass test_1 -v \
-provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath "bcprov-jdk16-1.46.jar" 
```

但我有一个错误：

```
keytool error: java.lang.IllegalArgumentException: unknown key size.
java.lang.IllegalArgumentException: unknown key size.
        at sun.security.x509.CertAndKeyGen.generate(CertAndKeyGen.java:134)
        at sun.security.tools.KeyTool.doGenKeyPair(KeyTool.java:1156)
        at sun.security.tools.KeyTool.doCommands(KeyTool.java:786)
        at sun.security.tools.KeyTool.run(KeyTool.java:172)
        at sun.security.tools.KeyTool.main(KeyTool.java:166) 
```

`keysize`当我尝试从命令中操作 keysize 或删除选项时，我可以看到完全相同的错误。但是有一些特殊情况。当我设置`keysize`为`256`我有另一个错误：

```
keytool error: java.lang.IllegalArgumentException: key size not configurable.
java.lang.IllegalArgumentException: key size not configurable.
        at sun.security.x509.CertAndKeyGen.generate(CertAndKeyGen.java:134)
        at sun.security.tools.KeyTool.doGenKeyPair(KeyTool.java:1156)
        at sun.security.tools.KeyTool.doCommands(KeyTool.java:786)
        at sun.security.tools.KeyTool.run(KeyTool.java:172)
        at sun.security.tools.KeyTool.main(KeyTool.java:166) 
```

目前我不知道如何生成密钥对以及如何将其保存到密钥库。此外，我还有一些可以为 GOST 34.10-2001 算法生成密钥对的 java 代码：

```
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

KeyPairGenerator kpg = KeyPairGenerator.getInstance("ECGOST3410", "BC");
kpg.initialize(new ECGenParameterSpec("GostR3410-2001-CryptoPro-A"));

KeyPair kp = kpg.generateKeyPair(); 
```

此代码示例使用`ECGenParameterSpec`类来初始化密钥对生成器，所以我应该以某种方式将它提供给 keytool（`-providerArg provider_arg`或`-Jjavaoption`）吗？

PS 我认为我应该提供曲线名称作为一些参数，但我无法确定我应该使用什么参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-06T10:09:34.047

您将无法使用 keytool 和 BC 创建带有 GOST3410 密钥的密钥库。

`sun.security.x509.CertAndKeyGen`keytool 使用的类不提供使用参数初始化密钥生成器的选项，而[BC GOST3410 密钥生成器](https://github.com/bcgit/bc-java/blob/master/prov/src/main/java/org/bouncycastle/jcajce/provider/asymmetric/ecgost/KeyPairGeneratorSpi.java)需要使用`ECParameterSpec`.

您可以创建密钥对+证书并以编程方式将它们放入密钥库中：

```
Security.addProvider( new org.bouncycastle.jce.provider.BouncyCastleProvider() );

KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance( "ECGOST3410", "BC" );
keyPairGenerator.initialize( new ECGenParameterSpec( "GostR3410-2001-CryptoPro-A" ) );
KeyPair keyPair = keyPairGenerator.generateKeyPair();

org.bouncycastle.asn1.x500.X500Name subject = new org.bouncycastle.asn1.x500.X500Name( "CN=Me" );
org.bouncycastle.asn1.x500.X500Name issuer = subject; // self-signed
BigInteger serial = BigInteger.ONE; // serial number for self-signed does not matter a lot
Date notBefore = new Date();
Date notAfter = new Date( notBefore.getTime() + TimeUnit.DAYS.toMillis( 365 ) );

org.bouncycastle.cert.X509v3CertificateBuilder certificateBuilder = new org.bouncycastle.cert.jcajce.JcaX509v3CertificateBuilder(
        issuer, serial,
        notBefore, notAfter,
        subject, keyPair.getPublic()
);
org.bouncycastle.cert.X509CertificateHolder certificateHolder = certificateBuilder.build(
        new org.bouncycastle.operator.jcajce.JcaContentSignerBuilder( "GOST3411withECGOST3410" )
                .build( keyPair.getPrivate() )
);
org.bouncycastle.cert.jcajce.JcaX509CertificateConverter certificateConverter = new org.bouncycastle.cert.jcajce.JcaX509CertificateConverter();
X509Certificate certificate = certificateConverter.getCertificate( certificateHolder );

KeyStore keyStore = KeyStore.getInstance( "JKS" );
keyStore.load( null, null ); // initialize new keystore
keyStore.setEntry(
        "alias",
        new KeyStore.PrivateKeyEntry(
                keyPair.getPrivate(),
                new Certificate[] { certificate }
        ),
        new KeyStore.PasswordProtection( "entryPassword".toCharArray() )
);
keyStore.store( new FileOutputStream( "test.jks" ), "keystorePassword".toCharArray() ); 
```

# android - [Android]canvas.drawText 在不断改变文字大小时很慢

> ID：14580341
> 
> 赞同：2
> 
> 时间：2013-01-29T10:09:10.997
> 
> 标签：android, hardware-acceleration, drawtext

我正在尝试通过更改文本大小来不断缩放文本。每次文本大小发生变化时，我都会在画布上实现自己的 drawText 视图。但是无效和重绘画布的过程变得很慢，导致一些动画也变得很慢。

具体操作系统版本为4.0.3（应用在与操作系统版本4.1.1相同的设备上运行良好）

硬件加速已开启。（关闭时运行良好）

我写了一个简单的项目来重现这个问题。自定义视图：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class MyTextView extends View {

private Paint mPaint;
private float mTextSize = 80f;

public MyTextView(Context context) {
    this(context, null);
}

public MyTextView(Context context, AttributeSet attr) {
    super(context, attr);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setTextSize(mTextSize);
}

@Override
public void onDraw(Canvas canvas) {
    canvas.save();
    mPaint.setTextSize(mTextSize);
    canvas.drawText("Test test test", 200, 200, mPaint);
    canvas.restore();
    mTextSize += 1f;
}
} 
```

活动：

```
import android.os.Bundle;
import android.view.MotionEvent;
import android.app.Activity;

public class MainActivity extends Activity {
private MyTextView mTextView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mTextView = (MyTextView)findViewById(R.id.text);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    mTextView.invalidate();
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T10:53:00.107

最后我使用了 StaticLayout.draw(Canvas) 而不是调用 Canvas.drawText

# asp.net - 在 C# 中将 Base64 字节数组解码为图像

> ID：14580342
> 
> 赞同：6
> 
> 时间：2013-01-29T10:09:13.940
> 
> 标签：asp.net, upload, base64, decode

我正在 android 中制作一个小型应用程序，用于浏览图库中的图像或从相机中拍照。然后将所选图像压缩并上传到服务器。我在 android 中使用 Base64 String 压缩了图像，为了上传图像，我在 ASP.NET 中创建了一个 Web 服务。但我不确定如何将字符串（在android中使用Base64转换）解码为图像（网络服务应该能够转换它）。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:12:58.843

[您可以通过Image.FromStream](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromstream.aspx)将 base64string 转换为图像。您需要先将 base64string 转换为流。

```
byte[] imageBytes = Convert.FromBase64String(imgBase64String);
Image img = null;

using (MemoryStream ms1 = new MemoryStream(imageBytes))
{
     img = Image.FromStream(ms1);
}

if (img != null)
{
  // ...
} 
```

# html - 引导程序中两列之间的垂直分隔线

> ID：14580346
> 
> 赞同：103
> 
> 时间：2013-01-29T10:09:24.400
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter bootstrap，并且有一行有两列（span6）。如何在两个跨度之间创建垂直分隔线。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-29T10:18:00.370

如果您的代码如下所示：

```
<div class="row">
  <div class="span6">
  </div>
  <div class="span6">
  </div>
</div> 
```

然后我假设您在“span6”DIVS 中使用额外的 DIVS 来保存/样式化您的内容？所以...

```
<div class="row">
  <div class="span6">
    <div class="mycontent-left">
    </div>
  </div>
  <div class="span6">
    <div class="mycontent-right">
    </div>
  </div>
</div> 
```

所以你可以简单地在“mycontent-left”类中添加一些 CSS 来创建你的分隔线。

```
.mycontent-left {
  border-right: 1px dashed #333;
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2019-08-23T10:25:27.213

在 Bootstrap 4 中`border-right`，您可以使用实用程序类。

因此，例如，您可以这样做：

```
<div class="row">
  <div class="col-6 border-right"></div>
  <div class="col-6"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-10-28T01:41:16.657

```
.row.vertical-divider {
  overflow: hidden;
}
.row.vertical-divider > div[class^="col-"] {
  text-align: center;
  padding-bottom: 100px;
  margin-bottom: -100px;
  border-left: 3px solid #F2F7F9;
  border-right: 3px solid #F2F7F9;
}
.row.vertical-divider div[class^="col-"]:first-child {
  border-left: none;
}
.row.vertical-divider div[class^="col-"]:last-child {
  border-right: none;
}
```

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" />
<div class="row vertical-divider" style="margin-top: 30px">
  <div class="col-xs-6">Hi there</div>
  <div class="col-xs-6">Hi world<br/>hi world</div>
</div>
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-05-04T16:50:33.183

好吧，这是我已经使用了一段时间的另一个选项。它对我很有用，因为我主要需要它在视觉上分开 2 列。而且它也是响应式的。这意味着如果我在中型和大屏幕尺寸中的列彼此相邻，那么我将使用 class `col-md-border`，它将在较小的屏幕尺寸上隐藏分隔符。

**CSS：**

```
@media (min-width: 992px) {
    .col-md-border:not(:last-child) {
        border-right: 1px solid #d7d7d7;
    }
    .col-md-border + .col-md-border {
        border-left: 1px solid #d7d7d7;
        margin-left: -1px;
    }
} 
```

在 scss 中，您可能会从这里生成所有需要的类：

**scss:**

```
@media(min-width: $screen-md-min) {
    .col-md-border {
        &:not(:last-child) {
            border-right: 1px solid #d7d7d7;
        }

        & + .col-md-border {
            border-left: 1px solid #d7d7d7;
            margin-left: -1px;
        }
    }
} 
```

**HTML：**

```
<div class="row">
    <div class="col-md-6 col-md-border"></div>
    <div class="col-md-6 col-md-border"></div>
</div> 
```

**这个怎么运作：**

cols 必须位于没有其他 cols 的元素内，否则选择器可能无法按预期工作。

`.col-md-border:not(:last-child)`匹配除**.row close 之前的最后一个元素之外**的所有元素，并为其添加右边框。

`.col-md-border + .col-md-border`如果这两个彼此相邻，则匹配具有相同类的第二个 div 并添加左边框和 -1px 负边距。负边距是为什么哪一列的高度更大并且分隔符将与最高列的高度相同的 1px 不再重要。

它也确实存在一些问题...

1.  当您尝试变得聪明/懒惰并在同一行元素内将`col-XX-X`class 与`hidden-XX`/ classes 一起使用时。`visible-XX`
2.  当您有很多列并且需要像素完美的东西时。因为它将 n-1 列向左移动 1px。

...但另一方面，它是响应式的，非常适合简单的 html，并且很容易为所有引导屏幕尺寸创建这些类。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-23T16:42:44.920

当一列的内容较高时，要修复分隔线太短的丑陋外观，请为所有列添加边框。给每个其他列一个负边距以补偿位置差异。

例如，我的三列类：

```
.border-right {
    border-right: 1px solid #ddd;
}
.borders {
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    margin: -1px;
}
.border-left {
    border-left: 1px solid #ddd;
} 
```

和 HTML：

```
<div class="col-sm-4 border-right">First</div>
<div class="col-sm-4 borders">Second</div>
<div class="col-sm-4 border-left">Third</div> 
```

如果您想要与 Bootstrap 的水平分隔线相同的颜色，请确保使用 #ddd。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-05-03T22:16:16.843

使用**Bootstrap 4**，您可以使用*边框*，避免编写其他 CSS。

> 左边框

如果你想要内容和边框之间的空间，你可以使用*padding*。（在本例中，向左填充 4px）

> PL-4

**例子：**

```
 <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"/>

    <div class="row">
      <div class="offset-6 border-left pl-4">First</div>
      <div class="offset-6 border-left pl-4">Second</div>
    </div>
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-08-20T16:27:39.567

如果您在 2018 年仍在寻找最佳解决方案，我发现如果您至少有一个免费的伪元素（ ::after 或 ::before ），这种方式非常有效。

你只需要像这样向你的行添加类：`<div class="row` *vertical-divider* `">`

并将其添加到您的 CSS 中：

```
.row.vertical-divider [class*='col-']:not(:last-child)::after {
  background: #e0e0e0;
  width: 1px;
  content: "";
  display:block;
  position: absolute;
  top:0;
  bottom: 0;
  right: 0;
  min-height: 70px;
} 
```

具有此类的任何行现在将在其包含的所有列之间具有垂直分隔线...

您可以在[此示例中看到它是如何工作的。](https://www.bootply.com/qjvYXfWLuN)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-10-18T05:10:21.770

如果您想要两列之间的垂直分隔线，您只需要添加

```
class="col-6 border-left" 
```

到您的列 div-s 之一

但

在响应式设计的世界中，您有时可能需要让它消失。

解决方案消失`<hr>`+消失`<div>`+`margin-left: -1px;`

```
<div class="container">
  <div class="row">
    <div class="col-md-7">
      1 of 2
    </div>
    <div class="border-left d-sm-none d-md-block" style="width: 0px;"></div>
    <div class="col-md-5" style="margin-left: -1px;">
    <hr class="d-sm-block d-md-none">
      2 of 2
    </div>
  </div>
</div> 
```

[https://jsfiddle.net/8z1pag7s/](https://jsfiddle.net/8z1pag7s/)

在 Bootstrap 4.1 上测试

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-08-22T07:45:54.787

我已经测试过了。它工作正常。

```
.row.vdivide [class*='col-']:not(:last-child):after {
      background: #e0e0e0;
      width: 1px;
      content: "";
      display:block;
      position: absolute;
      top:0;
      bottom: 0;
      right: 0;
      min-height: 70px;
    }

    <div class="container">
      <div class="row vdivide">
        <div class="col-sm-3 text-center"><h1>One</h1></div>
        <div class="col-sm-3 text-center"><h1>Two</h1></div>
        <div class="col-sm-3 text-center"><h1>Three</h1></div>
        <div class="col-sm-3 text-center"><h1>Four</h1></div>
      </div>
    </div> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-02-16T14:59:31.830

## 必须打开整页才能看到边框！

在 CSS 中添加了媒体宽度条款，因此在移动友好方面没有任何令人讨厌的边框。希望这可以帮助！这将调整为最长列的长度。在 .col-md-4 和 .col-md-6 上进行了测试，我的假设是它与其余部分兼容。虽然没有保证。

[JSFiddle](https://jsfiddle.net/mzack5020/ooxn0vsr)

```
.row {
  overflow: hidden;
}

.cols {
  padding-bottom: 100%;
  margin-bottom: -100%;
  overflow: hidden;
}

@media(min-width: 992px) {
  .col-md-4:not(:first-child), 
  .col-md-6:not(:first-child) {
    border-left: 1px solid black;
  }
  .col-md-4:not(:last-child),
  .col-md-6:not(:last-child) {
    border-right: 1px solid black;
    margin-right: -1px;
  }
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<div class="container">
  <h1>
    .col-md-6
  </h1>
  <hr>
  <div class="row text-center">
    <div class="col-md-6 cols">
      <p>Enter some text here</p>
    </div>
    <div class="col-md-6 cols">
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
    </div>
  </div>
  <hr>
  <h1>
    .col-md-4
  </h1>
  <div class="row text-center">
    <div class="col-md-4 cols">
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
    </div>
    <div class="col-md-4 cols">
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
    </div>
    <div class="cols col-md-4 cols">
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
      <p>Enter some more text here</p>
    </div>
  </div>
</div>
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-23T19:06:36.633

假设您有一个列空间，这是一个选项。根据您的需要重新平衡列。

```
<div class="col-1">
    <div class="col-6 vhr">
    </div>
</div> 
```

```
.vhr{
  border-right: 1px solid #333;
  height:100%;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-15T19:17:51.530

好吧，我所做的是移除各个跨度之间的排水沟，然后为左跨度绘制一个左边框，为右跨度绘制一个右边框，这样它们的边框重叠只是给出一条线。这样，可见线将只是边界之一。

CSS

```
.leftspan
{
padding-right:20px;
border-right: 1px solid #ccc;
}

.row-fluid .rightspan {
margin-left: -0.138297872340425%;
*margin-left: -0.13191489361702%;
padding-left:20px;
border-left: 1px solid #ccc;
}

.row-fluid .rightspan:first-child {
margin-left: -0.11063829787234%;
*margin-left: -0.104255319148938%;
} 
```

HTML

```
 <div class="row-fluid" >
      <div class="span8 leftspan" >
      </div>

      <div class="span4 rightspan"  >
      </div>
 </div> 
```

试试这个它对我有用

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-11T10:45:53.610

**我在Bootstrap 3.3.7**中寻找一个垂直分隔线，但默认情况下它们没有，所以我写了一个简单的单行 div 来为我完成这项工作。

看看它是否适合你。

```
<div style="display: inline;border-right: 1px solid gray; padding:0 5px;"></div> 
```

感谢您的阅读。干杯。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-03T11:30:21.483

正如@WalterV 上面回答的那样，已更改为**Bootstrap 5+**：

```
<div class="row">
      <div class="offset-6 border-start border-5">First</div>
      <div class="offset-6 border-start border-5">Second</div>
</div> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-01T01:11:06.140

从 bootstrap v4 开始，您可以使用此代码

```
 <div class="row">
   <div class="col-6 span6 border-right">
      dummy content
   </div>
   <div class="col-6 span6">
      right div content
   </div>
 </div> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-23T16:55:01.130

Bootstrap V5 引入了放置在元素上的`.vr` [类。](https://getbootstrap.com/docs/5.1/helpers/vertical-rule/)`<div>`如果需要，将其放置在`<li>`元素内以分隔元素内的`<ul>`元素。

```
<ul class="navbar-nav">
  <li>Element 1</li>
  <li>
    <div class="h-100 vr"></div>
  </li>
  <li>Element 2</li>
</ul> 
```

注意：`.navbar-nav`类与[导航栏](https://getbootstrap.com/docs/5.1/components/navbar/)相关，并设置包装元素正确显示垂直规则（分隔符）所需`list-style`的所有子元素的 css 属性。`none``<li>`

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2014-07-27T21:49:31.143

使用这个，100% 保证：-

```
vr {
  margin-left: 20px;
  margin-right: 20px;
  height: 50px;
  border: 0;
  border-left: 1px solid #cccccc;
  display: inline-block;
  vertical-align: bottom;
} 
```

# c++ - 调试构建未检测到代码更改

> ID：14580352
> 
> 赞同：1
> 
> 时间：2013-01-29T10:09:50.557
> 
> 标签：c++, debugging, visual-c++, timestamp

我目前是 C++ 编程的初学者。参加我在网上找到的课程。现在，我只是在编写一个程序，该课程会在每个视频中不断建立。这是好东西。

就在今天，我一直在为该计划工作更多。出于某种奇怪的原因，在我没有进行任何调整的情况下，Debug 没有检测到代码更改。

我已经尝试了一切，从撤消我的步骤到它实际需要更改的地步，并且故意犯错误以便它会给我一个编译器错误，但是没有。它只是运行自此事件开始以来一直在运行的相同程序。

我搜索了一下，我认为它与调试时间戳有关？我不确定。我试图在 Visual C++ 和文件中查找这些时间戳，但一无所获。

# php - joomla 模板从 1.5 到 2.5 的转换

> ID：14580354
> 
> 赞同：1
> 
> 时间：2013-01-29T10:09:53.227
> 
> 标签：php, templates, joomla, joomla2.5, joomla1.5

我公司基于 Joomla 1.5 到 2.5 版本更新了网站，现在我需要转换模板以适应新版本。

我正在关注本教程： http: [//magazine.joomla.org/issues/issue-may-2012/item/740-How-to-convert-Joomla-15-template-to-Joomla-25](http://magazine.joomla.org/issues/issue-may-2012/item/740-How-to-convert-Joomla-15-template-to-Joomla-25)

我安装了转换后的版本，但有一些问题：只显示标题图像。所有文章都被隐藏了。

查看页面的源代码，我发现`<jdoc:include />`返回的 HTML 中的所有标签都是 copid 没有被解释，因此页面中没有导入组件。

你能帮助我吗？

* * *

**更新**

打开调试模式和错误报告错误消息显示：

> 致命错误：在第 17 行的 /home/forup/httpdocs/jupgrade/templates/forup_25/functions.php 中的非对象上调用成员函数 getMessageQueue()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:13:07.377

```
Replace: $mainframe->getMessageQueue(); 
With: JFactory::getApplication()->getMessageQueue(); 
```

这应该对您有所帮助：[http ://www.artisteer.com/?post_id=119930&p=forum_post&forum_id=20](http://www.artisteer.com/?post_id=119930&p=forum_post&forum_id=20)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T15:20:02.560

在您的模板中，php-function 打印 cms 的特殊标签，例如：

```
echo '<jdoc:include...'; or
print '<jdoc:include...'; 
```

Joomla 无法处理此输出。

# android - Android - 是否可以对 android 设备屏幕进行视频录制？

> ID：14580359
> 
> 赞同：-2
> 
> 时间：2013-01-29T10:09:58.877
> 
> 标签：android

> **可能重复：**
> [如何记录 Android 设备屏幕？](https://stackoverflow.com/questions/10680325/how-can-i-record-the-android-device-screen)

我阅读了很多文章，但没有找到任何解决方案。我需要一个应用程序或其他东西来录制我的设备屏幕的视频。我想为我的其他应用制作宣传视频。任何帮助将不胜感激..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:26:15.507

为此，您可以做的一件事是

[**1）在您的模拟器中运行应用程序并使用任何桌面记录**](http://camstudio.org/)器捕获它 （我正在这样做）

为了捕获设备屏幕

2) 使用[**Google Play中的一些应用程序**](https://play.google.com/store/apps/details?id=com.zausan.zscreenrecorder&hl=en)

编辑：看到这个[答案](https://stackoverflow.com/a/10680404/1450401)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:17:01.447

我脑海中浮现的两个想法：

*   将模拟器与一些屏幕捕获软件一起用于您的计算机
*   如果您的设备有电视输出，请将其连接到您可以录制的某个屏幕

ddms 是 Android SDK 自带的一个工具，你可以用它来查看你设备的屏幕，但是它的刷新率非常慢。

Google Play 中也有一些屏幕录制应用程序，但这些应用程序需要 root 访问权限。

# button - 如何通过 gridcell 中的存储库按钮获取 xtragrid 行索引？

> ID：14580360
> 
> 赞同：3
> 
> 时间：2013-01-29T10:10:04.640
> 
> 标签：button, repository, devexpress, xtragrid

我在 xtragrid 单元格中有按钮。当我单击存储库按钮项时，我想获取行索引。我怎样才能获得细胞信息或索引..

我想在另一个页面上显示单元格信息，在行单元格中单击了存储库按钮..

你能帮助我吗 ？谢谢你的建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:26:00.140

要获取有关 Grid HitInfo 的信息，请查看[Hit Information Overview](http://documentation.devexpress.com/#windowsforms/CustomDocument770)和[Samples of Using Hit Information](http://documentation.devexpress.com/#WindowsForms/CustomDocument771)文档：

```
private void gridView1_MouseDown(object sender, MouseEventArgs e) {
    // obtaining hit info 
    GridHitInfo hitInfo = gridView1.CalcHitInfo(new Point(e.X, e.Y));
    if (((e.Button & MouseButtons.Right) != 0) && (hitInfo.InRow)  && 
        (!gridView1.IsGroupRow(hitInfo.RowHandle))) {
        // switching focus 
        gridView1.FocusedRowHandle = hitInfo.RowHandle;
        // showing the custom context menu 

        ViewMenu menu = new ViewMenu(gridView1);
        DXMenuItem menuItem = new DXMenuItem("DeleteRow", 
          new EventHandler(DeleteFocusedRow));
        menuItem.Tag = gridView1;
        menu.Items.Add(menuItem);
        menu.Show(hitInfo.HitPoint);
    }        
} 
```

检查这个：

```
private void repositoryItemButtonEdit_ButtonClick(object sender, DevExpress.XtraEditors.Controls.ButtonPressedEventArgs e)
{
    myGridView.DeleteRow(myGridView.FocusedRowHandle);  /// you can get focusedRowHandle here
} 
```

参考：
[Winforms XtraGrid 删除行按钮](http://www.devexpress.com/Support/Center/p/B207739.aspx)
[网格每一行上的删除按钮 - 我们如何防止用户使用删除按钮在新列中键入文本](http://www.devexpress.com/Support/Center/p/Q150366.aspx)

**编辑：** 参考这个 Devexpres 线程： [Cannot get the rowhandle to delete a row using RepositoryItemButtonEdit](http://www.devexpress.com/Support/Center/p/Q295187.aspx)

# deobfuscation - 如何保护 .NET 可执行文件免受 de4dot 或类似工具的影响？

> ID：14580363
> 
> 赞同：5
> 
> 时间：2013-01-29T10:10:12.863
> 
> 标签：deobfuscation

我曾尝试使用以下混淆器进行混淆，但没有一个针对 de40 工具 [https://bitbucket.org/0xd4d/de4dot/] 成功

看到这有多简单真的很痛苦..只需将混淆的 .net exe 拖到 de4dot.exe 上，您将获得源代码..

尝试过的混淆器是：

Agile.NET (aka CliSecure) Babel.NET CodeFort CodeVeil CodeWall CryptoObfuscator DeepSea Obfuscator Dotfuscator .NET Reactor Eazfuscator.NET Goliath.NET ILProtector MaxtoCode MPRESS Rummage Skater.NET SmartAssembly Spices.Net Xenocode

都是没用的。。真是郁闷啊。。

你能提供一些更好的解决方案来保护这个工具吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T12:12:26.890

de4dot 很快就会与大多数混淆器/保护器兼容，如果不兼容，其他东西会兼容。

我要做的是从 codeplex 下载 Confuser 并在其中使用高级功能选项卡。

我所做的总是有效且无法逆转，是我：

在混淆器的“高级”中混淆除“减少元”之外的所有内容。然后，我用 RPX 打包器压缩程序集。然后，我将压缩程序集与 Confuser 中的“资源加密”重新混淆。

这使得组装几乎完全不可逆转（总有一些人是好饼干）。我还建议在源代码中为您的字符串添加 md5/sha-1 加密。

有了所有这些保护方法，我正式说您的 .net 程序集受到了非常严格的保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:22:07.510

我遇到了同样的问题，直到现在才解决。我关注一些混淆器的发布。我检查了最新版本的 ILProtector 已发布，因此我尝试使用它来保护 .NET 可执行文件，并且可以说 ILProtector 绝对适用于 de4dot。de4dot 无法反编译受保护的程序集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T22:23:57.433

就像今天一样，De4dot 的最后一个版本似乎也可以对 ILProtector 进行反混淆。

来自 Secureteam.net 的 Agile.net 代码保护表示在其他反混淆器中击败了 de4​​dot，但我还没有尝试过。我会在测试后立即编辑我的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T08:23:03.350

最好尝试使用您自己的自定义打包机打包。所有商业打包程序都可以通过一个或其他解包器进行反编译。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-23T16:38:52.457

我今天检查了 4-5 混淆器。混淆器的主要目的不应该是隐藏您的许可证代码，而是保护您的软件/算法不被程序员仅仅通过查看代码轻松编写。因为如果任何软件（如 Windows、SQL Server、Adobe 等）很容易被黑客入侵，那么您就没有机会隐藏您的许可证代码。就我而言，我用 C# 开发了一些软件，如果有人可以在按钮单击事件中访问其代码，则可以轻松复制这些软件。因此，我测试了一些实现“代码流混淆”的混淆器，这使得理解代码的执行流程/算法变得非常困难。事实上，当我在我的软件上进行“代码流混淆”时，我无法理解我的代码本身，更不用说别人能理解的了。

想象一下，您花了几周时间开发一种算法，该算法可以完成某项任务，例如：您可以从所有网站获取机票并在软件中显示。如果有人可以看到它的代码，他/她可以在一天内简单地创建相同的软件。所以，最好把算法弄得乱七八糟，让任何人都很难理解。

我试过：Dotfuscator、Eziriz .NET Reactor 和 Crypto Obfuscator 和 rustemsoft Skater .NET Obfuscator。（还有一些其他人）

以下是我的结果：

1.  所有混淆器的所有字符串/变量/函数加密都可以很容易地被 de4dot 去混淆器去混淆。因此，加密字符串/变量/函数是没有意义的。
2.  我对所有 3 个都使用了最高级别的“代码流混淆”。我无法使用 rustemsoft Skater .NET，因为它的软件挂了很多，用户界面让我感到困惑。并且免费/评估版没有启用“代码流混淆”进行评估。因此，Dotfuscator 对代码进行了最好的整理。然后 .NET Reactor 和 Crypto Obfuscator 处于同一水平，但它们的混淆程度远不如 Dotfuscator。
3.  您可以尝试使用应防止使用 de4dot 直接反混淆的虚拟化软件对软件进行虚拟化，但同样可以使用任何好的解包器轻松解压缩 exe，然后可以使用 de4dot 对提取的程序集进行反混淆。使用虚拟化软件将主要的exe、dll和其他资源打包在一个大exe中，这样您就不必创建安装文件等，直接在任何计算机上运行exe。因此，在这种情况下，您可以在单个加密的 exe 中加密 .NET 程序集。但是，就像我说的那样，它可以很容易地打开包装。YouTube上有很多关于这个主题的视频。它不做“控制流混淆”，这是我的主要目的。

所以，最后我做的是：

使用 Dotfuscator 混淆控制流，然后再次“控制流”使用 .NET Reactor 或 Crypto Obfuscator 混淆混淆后的 exe。在此之后，如果我对 exe 进行去混淆处理，任何中级程序员都无法理解代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-25T21:42:47.290

Skater .NET 混淆器成功地对抗 de4dot。反混淆器将受原始保护的程序集成员名称重命名为人类可读的字符串。溜冰者与之抗争！

最近 MindSystemm 小组发布了一个名为 Skater.NetDeobfuscator [url: https://github.com/MindSystemm/Skater.NetDeobfuscator] 的特殊工具，它利用了 Skater .NET 混淆器的漏洞。Rustemsoft 得到了迫切需要保护 Skater .NET 混淆器关键算法和软件基础设施的信号，以便为 Skater 的用户提供更可靠的源代码保护。 [那已经解决了](https://www.linkedin.com/pulse/skater-net-obfuscator-vulnerabilities-have-been-skater-net-obfuscator-1e/?trackingId=xRvp6dppUcMs0ADscr1SHw%3D%3D)。

# android - 在 onTouchEvent() 中的 MotionEvent.ACTION_MOVE 期间重绘视图

> ID：14580364
> 
> 赞同：4
> 
> 时间：2013-01-29T10:10:13.447
> 
> 标签：android, touch

我已经创建了自己的扩展组件`RelativeLayout`，在其中我有一个`View`类型的字段，该字段被定位为边距：

![在此处输入图像描述](../Images/86b5a4620a7c1ddf6e5fc5efb3e4e316.png)

蓝色四边形代表我的父视图，红色圆圈是子视图。

现在我想允许用户在屏幕上移动手指时移动这个红色圆圈。这是我的`onTouchEvent()`方法：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    int eventAction = event.getAction();

    switch (eventAction) {
        case MotionEvent.ACTION_DOWN: 
            // finger touches the screen
            break;

        case MotionEvent.ACTION_MOVE:
                marginX = (int)event.getX();
                marginY = (int)event.getY();
                RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)pointer.getLayoutParams(); // pointer is this red circle
                lp.setMargins(marginX, marginY, 0, 0);

            break;

        case MotionEvent.ACTION_UP:   
            // finger leaves the screen
            break;
    }

    return true;
} 
```

但我很快发现，当用户在屏幕上移动手指时它不会刷新它的位置，而是只有当用户从屏幕上松开手指时才会刷新。所以基本上，当我移动我的手指时，圆圈保持在相同的位置，但是当我停止移动时，圆圈被绘制在新的位置。我尝试`invalidate()`在父视图和子视图上都使用方法，但没有帮助。我认为它可能与 UI 线程有关，但我无权访问`runOnUiThread()' method as it's not an`Activity`。

编辑：我将一项活动传递给我的班级，以便我可以使用`runOnUiThread()`. 我`case: ACTION_MOVE`现在看起来像这样：

```
case MotionEvent.ACTION_MOVE:      
    marginX = (int)event.getX();
    marginY = (int)event.getY();

    activity.runOnUiThread(new Runnable() {
        public void run() { 
        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)pointer.getLayoutParams();
        lp.setMargins(marginX, marginY, 0, 0);
        pointer.invalidate();
        }
    });

break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:19:37.187

我认为您需要拖放功能

参考[http://www.vogella.com/articles/AndroidDragAndDrop/article.html](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:16:09.157

如果它是简单的指针，您可以将其绘制`Canvas`为`Drawable`：

```
@Override
protected void onDraw(Canvas canvas) {
    pointer.setBounds(marginX, marginY, marginX + pointerWidth, marginY + pointerHeight);
    pointer.draw(canvas);

    super.onDraw(canvas);
} 
```

然后在方法中调用`invalidate()`指针。`onTouchEvent()`

# c# - 发布列表 到 MVC 控制器始终为空

> ID：14580370
> 
> 赞同：0
> 
> 时间：2013-01-29T10:10:25.127
> 
> 标签：c#, asp.net-mvc, json, entity-framework, jquery

我正在尝试将列表发布到我的 MVC 控制器..

**控制器：** `// POST api/UserFollows`

```
public HttpResponseMessage PostUserFollows(List<FollowItem> followItemList)
{
   //I'M GETTING NULL IN followItemList
   if(followItemList==null)
   {
      return Request.CreateResponse(HttpStatusCode.BadRequest);
   }
} 
```

**输出：**

```
STATUS 400 Bad Request <-- Means I got null in followItemList
TIME 4025 ms
Cache-Control →no-cache
Connection →Close
Content-Length →0
Date →Tue, 29 Jan 2013 09:38:31 GMT
Expires →-1
Pragma →no-cache
Server →ASP.NET Development Server/10.0.0.0
X-AspNet-Version →4.0.30319 
```

**`FollowItem`班级_**

```
namespace Helpers.SubClasses
{
    public class FollowItem
    {
        public bool action;
        public long FollowsUserId;
    }
} 
```

我尝试了很多请求，但没有一个有效..我总是得到空！

**发布方法：**

```
function postFollowList() {
            $.ajax( {
            url: Request_Url + "api/UserFollows",
            type: 'post',
            data: {
                    {action: true, FollowsUserId: 123456777},
                    {action: true, FollowsUserId: 123456888}
            },
            dataType: 'json',
            success: function( data )
            {
                $('#newmovie').html("OK");
            },
            error: function (jqXHR, textStatus, err) 
            {
                $('#newmovie').html('Error: ' + err);
            }
             }); 
```

**请求：** //作为 JSON - 我正在使用[POSTMAN](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)

```
1.
    [
        {"action":"true","FollowsUserId":"123456777"}
    ]
2.
    [
        {action: true, FollowsUserId: 123456777},
        {action: true, FollowsUserId: 123456888}
    ]
3.
    {[
        {action: true, FollowsUserId: 123456777},
        {action: true, FollowsUserId: 123456888}
    ]}
4.
    {followItemList:[
        {action: true, FollowsUserId: 123456777},
        {action: true, FollowsUserId: 123456888}
    ]} 
```

**空值示例：**

![例子](../Images/1c8145e1b32462dfc90dbe6aae18f9b3.png)

**我尝试了更多..有人可以帮我吗？谢谢！！！**

**编辑：** 答案是我`application/xml`在需要发送时发送了内容类型`application/json`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:25:55.063

我试过这个 -

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        var foo = new List<FollowItem>()
        {
            new FollowItem {action = true, FollowsUserId = 123456777},
            new FollowItem {action = true, FollowsUserId = 123456888}
        };
        return new JsonResult {Data = foo, JsonRequestBehavior = JsonRequestBehavior.AllowGet};
    }

    //
    // POST: /Home/
    public ActionResult Dump(List<FollowItem> followItems)
    {
        Debug.WriteLine(followItems);
        return new HttpStatusCodeResult(200);
    }

}
public class FollowItem
{
    public bool action;
    public long FollowsUserId;
} 
```

并张贴这个 -

```
[
  {"action":true,"FollowsUserId":123456777},
  {"action":true,"FollowsUserId":123456888}
] 
```

这有效。请注意，这也是它发送响应的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:26:39.680

尝试将变量名称添加到数据中。请参阅以下代码。

```
function postFollowList() {
        $.ajax( {
        url: Request_Url + "api/UserFollows",
        type: 'post',
        data: { followItemList: [
            {action: true, FollowsUserId: 123456777},
            {action: true, FollowsUserId: 123456888}
        ]},
        dataType: 'json',
        success: function( data )
        {
            $('#newmovie').html("OK");
        },
        error: function (jqXHR, textStatus, err) 
        {
            $('#newmovie').html('Error: ' + err);
        }
}); 
```

编辑：也许你可以在发布之前尝试序列化数组：

```
 data: { followItemList: JSON.stringify([
            {action: true, FollowsUserId: 123456777},
            {action: true, FollowsUserId: 123456888}
        ])}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:22:35.817

JSON 似乎无效。也许试试这个：

```
[
    {
        "action": true,
        "FollowsUserId": 123456777
    },
    {
        "action": true,
        "FollowsUserId": 123456888
    }
] 
```

检查 JSON 有效性的一个好工具是[jsonlint.com](http://jsonlint.com/)。

# android - Android Cordova2.3 -jquery ajax($.support.cors = true) 不工作（相同的请求适用于 chrome 浏览器）

> ID：14580372
> 
> 赞同：0
> 
> 时间：2013-01-29T10:10:27.003
> 
> 标签：android, jquery, cordova, jquery-mobile

我已经阅读了这个问题，并在网上尝试了所有可能的解决方案，但没有任何效果。这是我的 html 代码......

```
<!DOCTYPE html> 
<head>
<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
<script src="jquery-1.8.2.min.js"></script>
<script>

$( document ).bind( "mobileinit", function() {
    // Make your jQuery Mobile framework configuration changes here!
    console.log("made cors changes");
    //$.mobile.ajaxEnabled = true;
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;

});
</script>
<script src="cordova-2.3.0.js"></script>
<script src="jquery.mobile-1.2.0.min.js"></script>
</head>
<body>

<div data-role="page" id="page1">
    <div data-theme="a" data-role="header" data-position="fixed" >
        <h4>
            JLT
        </h4>

    </div>
    <div data-role="content" >

        <p>
        Send data to server?
        </p>
        <a data-role="button" id="transportYES" data-inline="true">
            Yes
        </a>
        <a data-role="button" id="transportNO" data-inline="true">
            No
        </a>

    </div>
</div>

<script>

$( "#transportYES" ).bind( "click", function(event, ui) {
  console.log('clicked');

    $.ajax({
   type: "GET",
   url: "http://api.wordnik.com//v4/word.json/recant/definitions",
   data: "includeRelated=false&includeTags=false&useCanonical=false&api_key=7741b711eec09c12e05070046d60da6b92e03750359859fde",
   dataType: "json",
   beforeSend:function(){
   console.log('before sending');
   },
   success: function(msg){
     alert( msg[0].word );
   },
   error: function(xhr, ajaxOptions, thrownError){
   console.log(xhr);

     alert( 'error' );
   }
 });

});

</script>
</body>
</html> 
```

如果我从 chrome 运行此代码，我会从服务器获得响应，但是当与 phonegap 打包时，它在 android 模拟器中不起作用.. 我什至在 config.xml 文件中允许所有域如下 `<access origin=".*"/>`.. 一直停留在这个问题很久了..请帮忙..!!!!

它在设备上工作，问题出在模拟器上......无法更早地获得测试设备......本可以节省很多时间...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:59:52.373

除非您将此代码放在 jQuery 和 jQuery Mobile 之间的文件中，否则您的 mobileinit 事件将起作用。

你必须做如下（只是一个例子）

```
<script src="js/external/jquery-1.8.2.min.js"></script>
<script src="js/configs.js"></script>
<script src="js/external/jquery.mobile-1.2.0.js"></script> 
```

在您的 configs.js 中，只需将您的 mobileinit

```
$( document ).bind( "mobileinit", function() {
   //your code
}); 
```

# wordpress - 停止 tinymce 加载 wordpress 管理员

> ID：14580374
> 
> 赞同：0
> 
> 时间：2013-01-29T10:10:57.847
> 
> 标签：wordpress, tinymce

我最近在我的 WordPress 安装中手动安装了 TinyMCE。一切正常，直到我去编辑一个我安装了“All in one Cufon”的插件。出于某种原因，即使我只将 TinyMCE 包含在主题中，它也已包含在内。

这是为 cufon 代码添加格式并破坏它。

有人知道如何防止在 WordPress 管理员中加载 TinyMCE 吗？

我在萤火虫中收到以下错误：

```
SyntaxError: syntax error
[Break On This Error]   

<p>Cufon.replace('h1', { fontFamily: 'AvantGarde LT Book', h 
```

这是我的 TinyMCE 文件，包括：

```
<script type="text/javascript" src="http://tinymce.moxiecode.com/js/tinymce/jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript" src="http://tinymce.moxiecode.com/js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>

    <script type="text/javascript">
    tinyMCE.init({
            mode : "textareas",
            theme : "simple"
    });
    </script> 
```

谢谢，丹

# php - 哈希会话登录有时有效，有时无效

> ID：14580375
> 
> 赞同：1
> 
> 时间：2013-01-29T10:11:10.847
> 
> 标签：php, mysql, session, cookies

我被困在这里。我基于会话和 cookie 制作了一个非常简单的登录脚本。这没什么花哨的。

我所拥有的是：

在页面顶部：`<?php session_start(); ?>` 成功注册后，大约在第 400 行：

在第 1 页上，成功注册后，会设置会话。

```
<?php    
    $hash = md5(time()); // Time is just for testing purposes.
    $_SESSION['emailadres'] = filter_var($emailadres, FILTER_VALIDATE_EMAIL);
    $_SESSION['hash'] = $hash;
?> 
```

登录名和电子邮件地址成功存储在数据库中，然后页面被转发：`<?php header("location: nextpage.php"); ?>`

下一页需要成功注册和会话登录：

```
session_set_cookie_params(0);
session_start();
$emailadres = filter_var($_SESSION["emailadres"], FILTER_VALIDATE_EMAIL);
$hash = filter_var($_SESSION["hash"], FILTER_SANITIZE_STRING); 
```

而已。

它大约有 75% 的时间是正确的，但有时，遵循完全相同的道路，数据库中的哈希值和会话中的哈希值并不相同。

有人建议吗？它可能与P3P等有关。请参阅： [iFrames Iexplorer 不会写入或读取会话（或 cookie）](https://stackoverflow.com/questions/14438461/iframes-iexplorer-doesnt-write-or-read-sessions-or-cookies/14439820#14439820)

# mongodb - MongoDB：了解 MongoDB 内部细节。

> ID：14580378
> 
> 赞同：1
> 
> 时间：2013-01-29T10:11:14.360
> 
> 标签：mongodb

我们将 Mongo DB 用于我们的 Application 。

`db.isMaster()`目前，当我在 Mongo Shell 中发出命令时。

它显示了以下信息（此设置当前与我们的开发框相关联）

```
PRIMARY> db.isMaster()
{
        "setName" : "dev",
        "ismaster" : true,
        "secondary" : false,
        "hosts" : [
                "10.11.13.111:27017",
                "10.11.13.111:27018"
        ],
        "arbiters" : [
                "10.11.13.111:27019"
        ],
        "primary" : "10.11.13.111:27017",
        "me" : "10.11.13.111:27017",
        "maxBsonObjectSize" : 16777216,
        "ok" : 1
} 
```

请让我知道以上信息是什么意思？？

1\. 这是否意味着它有 1 个主要奴隶和两个次要奴隶？（一个任意的也出现在 list 中）

1.  我怎么知道 slaveOk 设置为 true 还是 false ？

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:18:09.120

*   `setName`是您的副本集的名称。
*   `ismaster`显然表明您连接的节点是主节点还是从节点。
*   `secondary`是相反的`ismaster`。
*   `hosts`是`host:port`在副本集中存储数据的节点对。
*   `arbiters`是`host:port`对[仲裁者](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-arbiters)。这些节点不能存储数据，但它们的投票用于主选举过程。
*   `primary`表示谁是主要的。
*   `me`- 表示您连接的节点。
*   `maxBsonObjectSize`- 现在 16MB。只是一个非常全局的常数。
*   `ok`- 有点返回码。

都可以在[这里](http://docs.mongodb.org/manual/reference/command/isMaster/#isMaster)找到。关于您的问题：

1.  不，你有两个节点。一个主 ( `10.11.13.111:27017`) 和一个从 ( `10.11.13.111:27018`)
2.  检查[这个](http://docs.mongodb.org/manual/reference/method/cursor.readPref/#cursor.readPref)。是游标操作。

# c# - 如何在html表中显示存储过程输出？

> ID：14580380
> 
> 赞同：0
> 
> 时间：2013-01-29T10:11:19.397
> 
> 标签：c#, asp.net-mvc, sql-server-2008, stored-procedures, html-table

我想在 HTML 表中显示存储过程的输出。我知道如何在 gridview 中显示，但我不知道如何在 HTML 表格中显示。谁能给我建议或提供示例代码，以便我从中学习。我已经搜索并尝试解决。我想从创建的 HTML 表中创建图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:26:30.003

首先，您必须创建一个 ViewModel 来显示您想要在视图上列出的信息。像这样的东西：

```
public class ProductViewModel 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    /* other properties you need */
} 
```

在您的控制器中，您可以访问数据库并创建一个列表并将其返回到显示在 html 输出中的视图。我可以建议您创建一个数据访问层，而不是直接在控制器中使用 Ado.Net。

```
public ActionResult Index()
{
    var model = new List<ProductViewModel>();

    // create a connection
    SqlConnection con = new SqlConnection("your_connection_string");    
    try 
    {
        // open the conneciton
        con.Open();

        // prepare a command
        SqlCommand command = new SqlCommand("You_Stored_Procedure_Name",con);   
        command.CommandType = CommandType.StoredProcedure;

        // add parameters if you need
        // command.Parameters.AddWithValue("ParameterName", value);

        // execute a reader with the command
        using (var reader = command.ExecuteReader())
        {
            // loop in the result and fill the list
            while (reader.Read())
            {
                // add items in the list
                model.Add(new ProductViewModel() 
                        {
                            Id = (int)reader["Id"],
                            Name = reader["Name"].ToString(),
                            Price = (decimal)reader["Price"]
                            // other properties
                        });
            }
        }       
    }
    catch 
    {
    }
    finally 
    {   
        con.Close();
    }

    return View(model);
} 
```

在您的视图中，您可以使用 键入它并将其`IEnumrable<ProductViewModel>`列在 html 表或您需要的任何 html 结构中，如下所示：

```
@model IEnumerable<ProductViewModel>

<table>
    <tr>
        <th>Name</th>
        <th>Price</th>      
    </tr>
    @foreach(var item in Model)
    {
        <tr>
            <td>@item.Name</td>
            <td>@item.Price.ToString("C2")</td>
        </tr>
    }
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:21:47.773

我认为...您可以致电 SP 并在您的 .CS 页面上获取数据...

现在您必须做一件事.. 将该 Datareader 存储在任何列表中。然后应用 linq 查询，您可以根据您的要求获取记录。将该记录存储在单独的变量中。

见示例：

```
 MainHTML = MainHTML + "<div class=" + "HideDivClass" + " id=" + TMid + "><table width=" + "180" + " cellspacing=" + "1" + " cellpadding=" + "2" + " align=" + "left" + "><tbody><tr><td style=" + "text-align:center;font-size:13px" + "align=" + "center" + " colspan=" + "2" + "><b>" + TransModeName + "</b></td></tr><tr><td class=" + "DetailsFontSize" + ">Last 7 days</td><td  class=" + "DetailsFontSize" + " " + "align=" + "right" + ">$" + TotalSumActualCharge7Days + "</td></tr><tr></tr><tr><td class=" + "DetailsFontSize" + ">Last 30 days</td><td class=" + "DetailsFontSize" + " " + "align=" + "right" + ">$" + TotalSumActualCharge30Days + "</td></tr><tr><td class=" + "DetailsFontSize" + ">This Year</td><td class=" + "DetailsFontSize" + " " + "align=" + "right" + ">$" + TotalSumActualChargeThisYear + "</td></tr><tr><td class=" + "DetailsFontSize" + ">Total</td><td class=" + "DetailsFontSize" + " " + "align=" + "right" + ">$" + TotalSumActualChargeTotal + "</td></tr><tr><td class=" + "DetailsFontSize" + ">Avg/Shipment</td><td class=" + "DetailsFontSize" + " " + "align=" + "right" + ">$" + AvgShip.ToString("#.####") + "</td></tr><tr><td class=" + "DetailsFontSize" + "align=" + "center" + " colspan=" + "2" + "></td></tr></tbody></table></div>"; 
```

在这里，我将 MainHTML 作为字符串...并制作了一个字符串（HTML 布局/设计格式）并将此字符串绑定到标签。

喜欢。label.text = MainHTML.tostring(); 你可以根据你的东西设置设计...

# android - 从抛出 FileNotFoundException 的资产中读取文件

> ID：14580385
> 
> 赞同：6
> 
> 时间：2013-01-29T10:11:22.627
> 
> 标签：android, assets, filenotfoundexception

我正在使用以下代码：

```
 public void readLevel(int line){
    AssetManager am = this.getAssets();
    InputStream is = null;
    try {
        is = am.open("levelinfo.txt");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Scanner scanner = new Scanner(is);
    scanner.useDelimiter(",");
    String skip;
    for(int i = 1; i < line; i++){
        skip = scanner.nextLine();
    }
    levelData = new ArrayList<Integer>();
    while(scanner.hasNextInt()){
        levelData.add(scanner.nextInt());
    }
} 
```

代码给出了 FileNotFoundException。我见过一些类似的问题，但我不太确定如何解决它。该文件是资产文件夹中的文本文件。任何帮助表示赞赏

安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:18:00.433

试试这种方式：

> ```
> AssetManager assetManager = getResources().getAssets();
>  InputStream inputStream = null;
> try {
>     inputStream = assetManager.open("levelinfo.txt");
>         if ( inputStream != null)
>             Log.d(TAG, "It worked!");
>     } catch (IOException e) {
>         e.printStackTrace();
>     } 
> ```

# android - PhoneGap：无需登录即可获取用户的推文

> ID：14580400
> 
> 赞同：0
> 
> 时间：2013-01-29T10:12:14.413
> 
> 标签：android, cordova, twitter

我正在尝试在 Android 的 PhoneGap 中构建一个应用程序。我需要通过 twitter 获取修复用户的推文并显示他的所有推文。意味着推文应该在应用页面上可见，而不是在 Twitter 应用或任何浏览器中。

我正在尝试[从这里使用 twitter 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Twitter)。但我无法在此插件中找到如何在没有身份验证的情况下获取所有推文。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:28:46.017

最佳建议：[http ://android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)

还有一个建议：[http ://automateddeveloper.blogspot.com/2011/06/android-twitter-oauth-authentication.html](http://automateddeveloper.blogspot.com/2011/06/android-twitter-oauth-authentication.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:52:19.877

这很简单，我在寻找错误的地方，你不需要任何 twitter 插件，通过在你的 html 或任何 div 或按钮中实现这个代码块，它会得到所有的推文并为你做剩下的事情.

```
 <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
        <div id="twitter_update_list"></div>
         <script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=SpinParty&include_rts=true&count=50&callback=twitterCallback2">
    </script> 
```

# c# - WCF 路由服务通道关闭

> ID：14580410
> 
> 赞同：2
> 
> 时间：2013-01-29T10:12:42.703
> 
> 标签：c#, wcf, iis-7

错误消息如下：

> 此通道不能再用于发送消息，因为输出会话由于服务器启动的关闭而自动关闭。通过将 DispatchRuntime.AutomaticInputSessionShutdown 设置为 false 来禁用自动关闭，或者考虑使用远程服务器修改关闭协议。

当我向 WCF 路由器（wsHttpBinding 或 BasicHttpBinding 到 NetTcpBinding）创建 Web 请求并且路由器随后请求 WinService 时，就会发生这种情况。一旦 WinService 抛出异常，下一个请求就会给出上面的错误消息。它由 WCF 路由器创建。任何地方都没有解决方案，我花了几天时间找到一个。

没有解决方案的类似问题的链接：

*   [WCF 通信错误随机发生，无法捕捉到原因](https://stackoverflow.com/questions/12144530/wcf-communication-error-occurs-randomly-and-impossible-to-catch-the-reason-why)
*   [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/3f19cdaa-f426-4902-a93a-2654c7f19788/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/3f19cdaa-f426-4902-a93a-2654c7f19788/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:12:42.703

我所做的工作解决方案如下：

*   **不要抛出异常，抛出 FaultException**

怎么做：

*   在 WinService 接口上定义一个响应代码枚举（示例如下）

> ```
> [System.CodeDom.Compiler.GeneratedCodeAttribute("svcutil", "3.0.4506.2152")]
> [System.SerializableAttribute()]
> [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "blah")]
> public enum ErrorCode
> {
>     ERROR
> } 
> ```

要不就

> ```
> public enum ErrorCode
> {
>     ERROR
> } 
> ```

*   然后使用定义的枚举代替 Exception throw FaultException：

> throw new FaultException(ErrorCode.ERROR, new FaultReason("blah"), new FaultCode("Sender"));

*   就是这样！现在您可以发送生成此异常的请求并且它不会关闭通道

# sql - Oracle SQL Query 按组获取剩余金额

> ID：14580411
> 
> 赞同：2
> 
> 时间：2013-01-29T10:12:44.183
> 
> 标签：sql, oracle

我需要找到每个信用编号的**剩余金额**。预期的结果是这样的：

```
CREDIT_NO   CREDIT_TYPE CREDIT_AMOUNT   TOTAL_A REMAINING_AMT   FINAL_TOTAL_PER_BILL
A1          W           100             1000     900            600
A1          X           100             1000     800            600
A1          Y           100             1000     700            600
A1          Z           100             1000     600            600
B1          X           100             2000     1900           1700
B1          Y           100             2000     1800           1700
B1          Z           100             2000     1700           1700 
```

这是我到目前为止所做的查询（请原谅菜鸟）：

```
WITH TEMP AS
  (SELECT 1 ID,
    'A1' CREDIT_NO,
    'X' CREDIT_TYPE,
    100 CREDIT_AMOUNT,
    1000 TOTAL_A
  FROM DUAL
  UNION ALL
  SELECT 2, 'A1' , 'Y', 100, 1000 FROM DUAL
  UNION ALL
  SELECT 4, 'A1' , 'Z', 100, 1000 FROM DUAL
  UNION ALL
  SELECT 3, 'B1', 'X', 100, 2000 FROM DUAL
  UNION ALL
  SELECT 5, 'B1', 'Y', 100, 2000 FROM DUAL
  UNION ALL
  SELECT 6, 'B1', 'Z', 100, 2000 FROM DUAL
  UNION ALL
  SELECT 7, 'A1', 'W', 100, 1000 FROM DUAL
  )

SELECT 
  TEMP1.CREDIT_NO ,
  TEMP1.CREDIT_TYPE,
  TEMP1.CREDIT_AMOUNT ,
  TEMP1.TOTAL_A ,
  CASE
    WHEN TEMP1.CREDIT_NO  = (LAG (TEMP1.CREDIT_NO,1) OVER (ORDER BY TEMP1.CREDIT_NO) ) -- set remaining CREDIT_AMOUNT
    OR (LAG (TEMP1.CREDIT_NO,1) OVER (ORDER BY TEMP1.CREDIT_NO) ) IS NULL
    THEN TEMP1.TOTAL_A - (SUM(TEMP1.CREDIT_AMOUNT) OVER ( ORDER BY TEMP1.CREDIT_NO ROWS BETWEEN
      UNBOUNDED PRECEDING
    AND CURRENT ROW ) )
    WHEN TEMP1.CREDIT_NO <>   -- new bill, new total CREDIT_AMOUNT
      (LAG (TEMP1.CREDIT_NO,1) OVER (ORDER BY TEMP1.CREDIT_NO) )
    THEN TEMP1.TOTAL_A - TEMP1.CREDIT_AMOUNT
  END AS REMAINING_AMT 
  ,TEMP1.TOTAL_A - (SUM(TEMP1.CREDIT_AMOUNT) OVER (PARTITION BY CREDIT_NO)) AS FINAL_TOTAL_PER_BILL
FROM TEMP TEMP1
ORDER BY CREDIT_NO, CREDIT_TYPE 
```

我的问题是我不知道如何计算第二个信用编号的剩余金额。上述查询的结果是：

```
CREDIT_NO   CREDIT_TYPE CREDIT_AMOUNT   TOTAL_A REMAINING_AMT   FINAL_TOTAL_PER_BILL
A1          W           100             1000     900            600
A1          X           100             1000     800            600
A1          Y           100             1000     700            600
A1          Z           100             1000     600            600
B1          X           100             2000     1900           1700
B1          Y           100             2000     1400           1700
B1          Z           100             2000     1300           1700 
```

是否可以在不使用存储过程的情况下获得运行剩余量？我尝试将它基于rownum，但它不是连续的。

尽管我发现了与此类似的问题（[Link 1](https://stackoverflow.com/questions/11454201/how-to-recursively-compute-ratio-of-remaining-amounts-based-on-rounded-values-fr)，[Link 2](https://stackoverflow.com/questions/10547851/sql-query-to-calculate-remaining-running-balances-based-on-a-given-conditions)，[Link 3](https://stackoverflow.com/questions/10547851/sql-query-to-calculate-remaining-running-balances-based-on-a-given-conditions)）（尽管我仍在查看第三个链接），但我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:23:51.990

使用运行小计，并注意 at`partition`子句：

```
select credit_no, credit_type, 
   total_a - sum(credit_amount) over (partition by credit_no order by id) as remaining_credit,
   total_a,
   total_a - sum(credit_amount) over (partition by credit_no) as FINAL_TOTAL_PER_BILL
from temp 
```

[见 sqlfiddle](http://www.sqlfiddle.com/#!4/d41d8/6638)

# math - 数学方程式的格式/标准

> ID：14580415
> 
> 赞同：0
> 
> 时间：2013-01-29T10:12:54.870
> 
> 标签：math, standards

我正在开发能够通过 Web 服务与许多不同编程语言进行通信的 Web 框架。将有必须能够用不同语言计算的数学方程。我想知道是否已经有某种标准或格式来传输数学方程，可能是 XML 或其他格式？

例如，如果我有以下等式（这很简单，但可能更复杂）

(a * b^2) / 2

然后在编程语言中，我只给出 a 是 4，b 是 3，然后程序就能够计算方程并给出结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:14:39.033

也许[MathML](http://en.wikipedia.org/wiki/Mathml)是您正在寻找的东西，尤其是*Content MathML*。

# css - 黑莓上的盒子尺寸

> ID：14580421
> 
> 赞同：1
> 
> 时间：2013-01-29T10:13:09.657
> 
> 标签：css

我几乎完成了一个项目，现在我面临一个我不知道如何解决的问题。我使用 box-sizing:border-box（使用 ie6/7 polyfill）完成了整个 css 样式，它在我测试的每台设备上都像一个魅力一样工作，直到我拿起一个黑莓。它不支持 box-sizing（实际上它支持，但仅从最后一个版本开始），现在我的所有布局都被破坏了。由于项目几乎完成，我不想返回并更新每个样式表以不使用该 css 规则。您认为解决此问题的最佳方法是什么？

谈到这个： [http ://caniuse.com/#search=box-sizing](http://caniuse.com/#search=box-sizing)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:31:21.220

第一个建议是您可以[对 BlackBerry 浏览器执行服务器端检测，](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-detect-the-BlackBerry-Browser/ta-p/559862)如果检测到的版本不支持该`box-sizing`属性，只需在级联上向客户端发送一个覆盖样式表，其中包含所有必要的规则（具有更高的特异性，当然）纠正错误的风格。

否则，如果此方法仍然需要太多工作来修复，您可以尝试仅为该特定浏览器提供非严格的文档类型，并查看该浏览器使用的框模型。可以肯定的是，这是一个有点老套的方法，但也许这种改变会产生一些好的影响并“拉直”你的布局。

# magento - Magento - list.phtml 过滤产品集合没有给出正确的分页

> ID：14580427
> 
> 赞同：2
> 
> 时间：2013-01-29T10:13:25.993
> 
> 标签：magento, collections, pagination, product, catalog

我正在尝试过滤 list.phtml 以满足我的需要，它只显示基于属性值的产品。加载产品集合的原始代码是：

```
$_productCollection=$this->getLoadedProductCollection();
$_helper = $this->helper('catalog/output'); 
```

要进行过滤，我得到了代码：

```
$_productCollection=$this->getLoadedProductCollection();

$cat_id = Mage::getModel('catalog/layer')->getCurrentCategory()->getId();
$_productCollection = Mage::getResourceModel('catalog/product_collection')
   ->addAttributeToFilter('language', array('eq' => array('English')))
   ->addAttributeToSelect('*')
   ->addCategoryFilter(Mage::getModel('catalog/category')->load($cat_id));

$_helper = $this->helper('catalog/output'); 
```

这可行，但是分页和项目总数（从toolbar.phtml和pager.phtml生成的不正确。例如，原始产品集合的正确分页为7页，每页10个产品。

但是，当我使用上面显示的过滤器时，分页显示相同的 7 页，并且每一页过滤的书都在一页上（有 18 本书英文，所以 18 本书中有 7 页是重复的）。

请有人帮我解决这个分页问题。

谢谢。

集合的 SQL 如下：

```
 SELECT `e`.*, `at_language`.`value` AS `language`, `cat_index`.`position`
 AS `cat_index_position` FROM `catalog_product_entity`
 AS `e` INNER JOIN `catalog_product_entity_varchar`
 AS `at_language` ON (`at_language`.`entity_id` = `e`.`entity_id`) 
 AND (`at_language`.`attribute_id` = '1002') 
 AND (`at_language`.`store_id` = 0) INNER JOIN `catalog_category_product_index`
 AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 
 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='38' 
 AND cat_index.is_parent=1 WHERE (at_language.value = 'English') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:48:15.077

在您的 list.phtml 文件中使用它：

```
$_productCollection->clear()
    ->addAttributeToFilter('attribute_set_id', array('eq' => 63))
    ->load(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T10:54:53.640

我的猜测是您弄错了产品计数，因为缺少产品可见性过滤器。尝试像这样添加它：

```
$_productCollection = Mage::getResourceModel('catalog/product_collection')
   ->addAttributeToFilter('language', array('eq' => array('English')))
   ->addAttributeToSelect('*')
   ->addCategoryFilter(Mage::getModel('catalog/category')->load($cat_id))
   ->setVisibility(
       Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds()
   ); 
```

添加：

您设置的自定义集合`list.phtml`与系统在分页器中使用的集合不同。分页器块`Mage_Catalog_Block_Product_List_Toolbar`将从`$this->_getProductCollection()`（[请参阅此处](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Catalog/Block/Product/List.php#L158)）获取原始产品集合，该集合没有您的过滤器。

恐怕，对模板文件中的集合进行更改是不够的。您可能必须覆盖该`Mage_Catalog_Block_Product_List`块，特别是其功能`_getProductCollection()`以实现必要的过滤。

加法2

建议的功能覆盖`Mage_Catalog_Block_Product_List::_getProductCollection`：

```
protected function _getProductCollection()
{ 
    $collection = parent::_getProductCollection();
    $collection->addAttributeToFilter('language', array('eq' => array('English')));
    $this->_productCollection = $collection;

    return $this->_productCollection;
} 
```

# javascript - Javascript 生成的下拉菜单未在 IE 8 上显示

> ID：14580428
> 
> 赞同：0
> 
> 时间：2013-01-29T10:13:28.317
> 
> 标签：javascript, html, web, internet-explorer-8

我有三个选择菜单，它们发布到一个函数中，以通过 Ajax 获取金额。

问题是在所有浏览器中都显示选择菜单，但在 Internet Explorer 8 中只显示年份选择菜单。

以下是 Javascript：

```
 <!--START CALENDAR DROPDOWN-->

        <script type='text/javascript'>//<![CDATA[ 

        (function() {

            var currentDate = new Date();

            var calendar = [
                ["January", 31],
                ["February", 28],
                ["March", 31],
                ["April", 30],
                ["May", 31],
                ["June", 30],
                ["July", 31],
                ["August", 31],
                ["September", 30],
                ["October", 31],
                ["November", 30],
                ["December", 31]
                ],
                cont = document.getElementById('calendar-container');
            // setup
            var sel_year = document.createElement('select'),
                sel_month = document.createElement('select'),
                sel_day = document.createElement('select');

                sel_year.setAttribute("id", "year2Sel");
                sel_month.setAttribute("id", "monthSel");
                sel_day.setAttribute("id", "daySel");

                sel_year.setAttribute("name", "year2Sel");
                sel_month.setAttribute("name", "monthSel");
                sel_day.setAttribute("name", "daySel");

                sel_year.setAttribute("onchange", "showRSS(document.getElementById('field2').value");
                sel_month.setAttribute("onclick", "showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, this.value, document.getElementById('daySel').value )");
                sel_day.setAttribute("onchange", "showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, this.value )");

            function createOption(txt, val, selected) {
                var option = document.createElement('option');
                option.value = val;
                option.selected = selected;
                option.appendChild(document.createTextNode(txt));
                return option;
            }

            function clearChildren(ele) {
                while (ele.hasChildNodes()) {
                    ele.removeChild(ele.lastChild);
                }
            }

            function recalculateDays() {
                var month_index = sel_month.value,
                    df = document.createDocumentFragment();
                for (var i = 1, l = calendar[month_index][1]; i <= l; i++) {
                    var selected = (currentDate.getDate() === i) ? true : false;
                    df.appendChild(createOption(i, i, selected));
                }
                clearChildren(sel_day);
                sel_day.appendChild(df);
            }

            function generateMonths() {
                var df = document.createDocumentFragment();
                calendar.forEach(function(info, i) {
                    var selected = (currentDate.getMonth() === i) ? true : false;
                    df.appendChild(createOption(info[0], i, selected));
                });
                clearChildren(sel_month);
                sel_month.appendChild(df);
            }

            sel_month.onchange = recalculateDays;

            generateMonths();
            recalculateDays();

            cont.appendChild(sel_year);
            cont.appendChild(sel_month);
            cont.appendChild(sel_day);
        }());
        //]]>  

        </script>

    <!--END CAELNDAR DROPDOWN--> 
```

我只是使用 HTML 调用它：

```
<div id="calendar-container"></div> 
```

以下是 IE8 开发者工具中显示的输出：

```
<div id="calendar-container"/>

<select name="yearSel" id="yearSel" onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)">
 <OPTION selected value=2013>2013</OPTION> <OPTION value=2014>2014</OPTION>
</select> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:23:38.910

我认为您的问题很可能在于 .setAttribute(); 功能。IE7/8 支持要么有问题，要么不存在。

尝试这样的事情并改用“id”属性。

```
sel_year.id = "year2Sel";
sel_month.id = "monthSel";
sel_day.id = "daySel"; 
```

或者，它可能是您的 onchange/onclick 设置属性中的某些内容。您应该能够使用它而不是内联“onchange”：

```
element.onchange = function() {
    // Do something
} 
```

尽管您必须为跨浏览器解决方案添加一些事件侦听器/attachEvent。

# iphone - 将导航控制器栏按钮与嵌入容器视图交互

> ID：14580434
> 
> 赞同：3
> 
> 时间：2013-01-29T10:13:48.267
> 
> 标签：iphone, ios, xcode, storyboard, container-view

![在此处输入图像描述](../Images/4eb708236fd00fc4f3b7181097b117f6.png)

我创建了一个 UIViewController，并在其中插入了一个容器视图，其中嵌入了一个 UITableViewController。如上图所示。

当用户单击表格视图单元格时，我想在导航栏上添加一个 UIBarButton。

但是，我该如何管理呢？单击表格视图单元格时我可以升起 DatePicker，但是当我在表格视图控制器实现文件中调用 self.presentingViewController 时，它返回（null），与我调用 self.parentViewController 时相同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:11:34.700

You're probably trying to access the parent controller too early. If you log self.parentViewController in viewDidLoad, it will return null, but it should return the correct controller from viewDidAppear, and certainly from the didSelectRowAtIndexPath method. Using parentViewController in this context is correct, not presentingViewController.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:51:07.493

我建议在 ViewController 本身中实现 ​​UITableViewController 委托和数据源方法。这样您就不必担心访问包含 UITableView 的 ViewController。

# bash - echo/printf 引入的换行符，同时回显填充了文件列的数组条目

> ID：14580435
> 
> 赞同：0
> 
> 时间：2013-01-29T10:13:48.533
> 
> 标签：bash, shell, awk

在将其放入 shell 脚本之前，我正在检查 shell 上的 shell 行

```
$ cat file.csv | awk -F',' '{ print $2 }' 
"test1 test2 test1"
"test2 test3 test100"
"test3 test4 test3" 
```

而在脚本中，我将上述所有信息填充到这样的数组中

```
arr=(`cat file.csv | awk -F',' '{ print $2 }'`)
for v in ${arr[@]}
do
    echo $v
done 
```

它像这样呼应我

```
"test1
test2
test1"
"test2 
test3 
test100"
"test3 
test4 
test3" 
```

我希望数组填充，例如，像这样的条目：

```
"test1 test2 test1" 
```

并不是

```
"test1
test2
test1" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:27:14.220

这里的问题是 bash 确定分隔数组每个元素的方式。默认情况下，它使用 IFS 变量中的任何字符，默认为空格，即制表符空格和换行符。由于数组的每个元素都包含空格，因此如果您希望它正常工作，它不能成为 IFS 的一部分。因此，如果您尝试：

```
root@host$ cat x.txt
blah,one two three,blah
blah,four five six, blah
root@server$ IFS=$'\n' arr=( $(  awk -F',' '{print $2 }' x.txt ) ) ## no need to cat into awk it can take a filename argument to read from
root@server$ for v in ${arr[@]};do echo "$v";done
one two three
four five six 
```

你应该看到它正确输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:16:46.300

问题是如何填充数组，原始问题使用 csv 中的引用值，分配给数组时会忽略这些值。

请注意，在 arr 的赋值中，$( ) 位用双引号引起来。

```
file.csv="test1 test2 test1","test2 test3 test100","test3 test4 test3"

$ arr=( "$( awk -F, 'print $2}' file.csv)" ) 
```

将正确地将值放入数组中，

```
$ for f in ${arr[@]}; do echo $f; done 
```

将打印出第二个值：

```
"test2 test3 test100" 
```

第二个值的引号仍然存在，无论您使用 echo $f 还是 echo "$f"，都无所谓。

# algorithm - 一个“分而治之”的算法分配

> ID：14580442
> 
> 赞同：5
> 
> 时间：2013-01-29T10:14:05.210
> 
> 标签：algorithm, divide-and-conquer

现在我有 N 个不同的整数，我需要找到一个具有最多数字的区间，其值在 O(NlogN) 时间区间的端点之间。我称之为“分而治之”的问题，因为它属于我期末考试的“分而治之”类别。我已经考虑了 2 周并且做了很多实验，但没有一个是正确的（与蛮力算法相比）。有人可以帮助我吗？

例子：

8,1,3,4,7。答案是 1-7。

2,6,5,4,9,8。答案是 2-9 或 2-8。

我认为“间隔”这个词并不能表达我的意思。我的意思是找到数组的一个子序列，它的值在子序列的端点之间的数字最多。eg.1：“1,3,4,7”有两个数字（3,4），eg.2：“2,6,5,4,9”和“2,6,5,4,9”都有,8" 有三个数字（6,5,4）。

这是我的代码（O（n ^ 2））。@Vaughn Cato 我用它来与您的代码进行比较。

```
#! /usr/bin/env python
#coding=utf-8
import itertools
def n2(numbers):
  a = [0]*len(numbers)
  ans = -1
  l = 0
  r = 0
  for j in range(1,len(numbers)):
    t = 0
      for i in range(j-1,-1,-1):
        if numbers[i]<numbers[j]:
          x = t - a[i]
          if x>ans:
            ans = x
            l = i
            r = j
          t += 1
        else:
          a[i] += 1
  return (numbers[l],numbers[r],ans)

def countBetween(numbers,left,right):
  cnt = 0
  for i in range(left+1,right):
    if numbers[left]<numbers[i]<numbers[right]:
      cnt += 1
  return cnt

for numbers in itertools.permutations(range(5)):
  ans1=n2(numbers)
  ans2=longestInterval(numbers)
if(ans1[2]!=ans2[2]):
  print ans1,ans2,numbers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:47:38.930

**注意：这实际上不起作用，但它可能会给你一些想法。**

这样想：

*   设`X`为数字数组。
*   设`s`为子序列开始的索引。
*   设`e`为子序列末尾的索引。

如果你选择一个任意的分区索引`p`，那么最长的子序列要么穿过这个分区，要么落在那个分区的左边或右边。如果最长的子序列穿过这个分区，那么`s < p <= e`. 要查找，请查找和之间大于 X[s]`s`的数字最多的索引。要找到 'e'，请找到介于两者之间且小于 X[e] 的数字最多的索引。`s``p``p``e`

可以递归检查左右两边，看能否找到更长的子序列。

如果您有按值排序的索引，则可以在线性时间内找到哪个索引在右侧具有最大的数字或在左侧具有最大的数字`X`：

要找到起始索引，请从排序的索引列表中的第一个索引开始，并说它是迄今为止最好的。如果下一个索引大于迄今为止最好的索引，那么任何未来的索引都需要比我们当前的最好的更靠左才能成为新的最好的索引，所以我们从最好的索引中减去一个（但记住最好的索引是什么）真的是）。如果下一个索引在我们最好的索引的左边，那么让它成为最好的索引。按顺序为每个索引重复此过程。

您可以执行类似的过程来找到右侧末端的最佳索引。

唯一剩下的技巧是维护我们正在处理的任何范围的索引排序列表。这可以通过最初对整个数字集进行排序并找到它们的索引来完成，然后在递归的每个级别，我们可以在线性时间内将排序的索引分成两个子列表。

这是该想法的python实现：

```
# Find the index from the given indices that has the most numbers to the
# right of it which are greater in value.  The indices are sorted by
# the value of the numbers at that index. We don't even need to know
# what the numbers are.
def longestLowerSequence(indices):
  best_index=indices[0]
  target_index=best_index
  for i in range(0,len(indices)):
    if indices[i]<target_index:
      best_index=indices[i]
      target_index=best_index
    else:
      target_index-=1
  return best_index

# Find the index from the given indices that has the most numbers to the
# left of it which are less in value.
def longestUpperSequence(indices):
  n=len(indices)
  best_index=indices[n-1]
  target_index=best_index
  for i in range(0,n):
    if indices[n-1-i]>target_index:
      best_index=indices[n-1-i]
      target_index=best_index
    else:
      target_index+=1
  return best_index

# Return the pair of indices which has the most values between it.
def longestRangeFromSortedIndices(numbers,indices,begin,end):
  assert end>begin
  if end-begin<=2:
    return (indices[begin],indices[end-1])
  assert type(indices) is list
  partition=(begin+end)/2
  left_indices=filter(lambda index: index<partition,indices)
  right_indices=filter(lambda index: index>=partition,indices)
  assert len(left_indices)>0
  assert len(right_indices)>0
  left=longestLowerSequence(left_indices)
  right=longestUpperSequence(right_indices)
  left_range=longestRangeFromSortedIndices(numbers,indices,begin,partition)
  right_range=longestRangeFromSortedIndices(numbers,indices,partition,end)
  best_size=countBetween(numbers,left,right)
  best_range=(left,right)
  left_size=countBetween(numbers,left_range[0],left_range[1])
  right_size=countBetween(numbers,right_range[0],right_range[1])
  if left_size>best_size:
    best_size=left_size
    best_range=left_range
  if right_size>best_size:
    best_size=right_size
    best_range=right_range
  return best_range

def sortedIndices(numbers):
  return sorted(range(len(numbers)),key=lambda i: numbers[i])

def longestInterval(numbers):
  indices=sortedIndices(numbers)
  longest_range=longestRangeFromSortedIndices(numbers,indices,0,len(numbers))
  return (numbers[longest_range[0]],numbers[longest_range[1]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:49:54.013

我相信这是[最大子数组问题](http://en.wikipedia.org/wiki/Maximum_subarray_problem)的一个变种。

可以使用分治法来解决，如下所示：

1.  将整数数组分成相等的两半

2.  `R1`分别计算`R2`两半的结果（是每一半的最大间隔的长度`R1`，`R2`并存储起点和终点）

3.  获取`MIN`前半部分的最小整数和后半部分的最大整数`MAX`，并将结果计算为原始数组中到`R3`的距离（分别为起点和终点）`MIN``MAX``Min``Max`

4.  返回最大的`R1`,`R2`和`R3`作为整个问题的结果

为什么这样有效：

最大的间隔来自以下三种情况之一：1）前半部分 2）后半部分 3）跨越两部分。因此，计算三个中的最大值会产生最佳结果。

时间复杂度：

解决复发：

```
T(n) = 2T(n/2) + O(n) 
```

给`T(n) = O(nlogn)`. 注意：正如递归所示，我们解决了两个一半大小的子问题（<code>2T(n/2)），并在线性时间（`O(n)`）中找到两半中的最小和最大整数。

# gcc - 将 c++ 对象文件链接到 c 对象文件

> ID：14580446
> 
> 赞同：3
> 
> 时间：2013-01-29T10:14:19.470
> 
> 标签：gcc, compilation, g++

假设我有一个 c++ 文件和 c 文件。为它们创建了目标文件。现在我需要将两者链接到一个可执行文件中。当我尝试时，它给出了关于 c++ 的错误。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:18:11.430

首先，必须标记从 C 文件调用的 C++ 文件中的所有函数`extern "C"`：

```
extern "C" int some_function(); 
```

这告诉 C++ 编译器不要[*破坏*](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)名称。

要继续，您当然不能从 C 源代码使用任何 C++ 功能，例如类、命名空间、引用和其他 C++ 特定功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:21:20.190

看看这个页面：[http ://dsc.sun.com/solaris/articles/mixing.html](http://dsc.sun.com/solaris/articles/mixing.html)

文章在同一程序中混合 C 和 C++ 代码

在这里，您将找到所有需要的信息，例如：

```
extern "C" 
{
    #include "header.h"
}

#ifdef __cplusplus
extern "C" { 
```

这么久...

# java - 格式 XXXXXXX_YZZZZ 的正则表达式

> ID：14580448
> 
> 赞同：1
> 
> 时间：2013-01-29T10:14:21.183
> 
> 标签：java, regex

我正在尝试在java中编写一个正则表达式，它将验证以下格式 -

```
XXXXXXXX_YZZZZ 
```

在哪里

```
X – alphanumeric characters(8 characters)
Y - alpha character
Z - numeric characters 
```

我为第一部分尝试的是 -`^[a-zA-Z0-9 ]*$`但我不知道如何去第二部分。

谁能告诉我所需格式的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:15:42.343

你忘了指定金额和我假设的下划线......

```
/^[a-z0-9]{8}_[a-z][0-9]{4}$/i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T10:22:12.340

查看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，然后您可以将您的要求转换为：

```
"^\\p{Alnum}{8}_\\p{Alpha}\\p{Digit}{4}$" 
```

它使用预定义的字符类，就像您在问题中列出的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:16:52.240

这个怎么样？

```
^[a-ZA-Z0-9]{8}\_[a-zA-Z][0-9]{4}$ 
```

您还可以对结果进行分组：

```
^([a-ZA-Z0-9]{8})\_([a-zA-Z])([0-9]{4})$ 
```

这样您就可以从结果中单独处理 X、Y 和 Z 部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T10:17:00.977

试试这个正则表达式：

```
^[A-Za-z\d]{8}_[A-Za-z]\d{4}$ 
```

您的正则表达式匹配零个或多个字母数字字符和/或空格。

这是学习正则表达式的好地方：[http ://www.regular-expressions.info](http://www.regular-expressions.info)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T10:48:47.960

试试这个正则表达式

```
^[a-zA-Z0-9]{8}[_][a-zA-Z][0-9]{4}$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T10:16:36.030

尝试：

```
^[a-zA-Z0-9]{8}_[a-zA-Z][0-9]{4}$ 
```

[Regexper](http://www.regexper.com/)是您的朋友。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T10:19:27.930

```
^[a-zA-Z0-9]{8}_[a-zA-Z][0-9]{4}$ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T10:24:53.433

在 Java 中，您可以使用元字符来表达正则表达式：

```
 "8abba778_a2012".matches("^\\w{8}_[a-z]\\d{4}$"); 
```

[编辑]：根据@Jon Dvorak，我正在纠正我的答案。实际上，\w 过于大方，也适用于下划线字符_。正确答案 ：

```
 "8abba778_a2012".matches("^[a-zA-Z0-9]{8}_[a-z]\\d{4}$"); 
```

# android - 地理编码器在 android 2.3.3 和 android 3.0 中不起作用

> ID：14580450
> 
> 赞同：0
> 
> 时间：2013-01-29T10:14:22.283
> 
> 标签：android, eclipse

公共类 LocateActivity 扩展 MapActivity {

```
MapView mapView = null;  

Geocoder geocoder = null; 
Drawable drawable = null;

Geocoder gc = null;

final CountDownLatch signal = new CountDownLatch(1);

String status;
double lat;

double lng;

public ArrayAdapter<String> adapter;
public AutoCompleteTextView filltt;
public static String KEY_REFERENCE = "reference"; // id of the place
public static String KEY_NAME = "name"; // name of the place
public static String KEY_VICINITY = "vicinity"; //

ProgressDialog pDialog;
PlacesList nearPlaces;

List<Overlay> mapOverlays;

AddItemizedOverlay itemizedOverlay;

GeoPoint geoPoint;
// Map controllers
MapController mc;

double latitude;
double longitude;
OverlayItem overlayitem;

Drawable drawable_user;
Drawable drawablee;

String locnm;

GPSTracker gps;

GooglePlaces googlePlaces;
ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String,String>>();

protected void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  

    setContentView(R.layout.main);

    System.out.println("My locale::"+Locale.getDefault().getDisplayLanguage());

    filltt = (AutoCompleteTextView)findViewById(id.autoCompleteTextView1);
    mapView = (MapView) findViewById(R.id.geoMap);  
    mapView.setBuiltInZoomControls(true);  
    mapView.setClickable(true);  
    mapOverlays = mapView.getOverlays();

    gc = new Geocoder(this);

    drawable = this.getResources().getDrawable(R.drawable.pon);
    adapter = new ArrayAdapter<String>(this,R.layout.item_list);
    adapter.setNotifyOnChange(true);
    filltt.setAdapter(adapter);
    filltt.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (count%3 == 1) {
        adapter.clear();
                        GetPlaces task = new GetPlaces();
                                //now pass the argument in the textview to the task
                                        task.execute(filltt.getText().toString());
                }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
        // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }
        });

    // map starting point  
    int lat = (int) (51.678383 * 1000000);  
    int lng = (int) (19.334822 * 1000000);  
    GeoPoint pt = new GeoPoint(lat, lng);  
    mapView.getController().setZoom(18);  
    mapView.getController().setCenter(pt);  

    final String lattt="23.0666";
    final String loggg="72.6666";

    Button geoBtn = (Button) findViewById(R.id.geocodeBtn);  

  //  geoBtn.setText(Html.fromHtml("<b>Year:</b>2012,<b>Franch</b>"));
    geocoder = new Geocoder(this);  

    geoBtn.setOnClickListener(new OnClickListener() {  

        @Override  
        public void onClick(View v) {  
            try {  

                locnm = filltt.getText().toString();

                if(locnm.length()==0){
                    Toast.makeText(LocateActivity.this, "Enter Location", Toast.LENGTH_LONG).show();
                }
                else
               // EditText locale = (EditText) findViewById(R.id.location);  
                {
                new LoadPlaces().execute();

                String locationName = filltt.getText().toString();  

                Toast.makeText(LocateActivity.this, locationName, Toast.LENGTH_LONG).show();

               System.out.println("location: "+locationName);

                List<Address> addressList = geocoder.getFromLocationName(  
                        locationName, 5);  

                System.out.println("first val: " + addressList.get(0));
                System.out.println("Total Result: " + addressList.size());

                if (addressList != null && addressList.size() > 0) {  
                    int lat = (int) (addressList.get(0).getLatitude() * 1e6);  
                    int lng = (int) (addressList.get(0).getLongitude() * 1e6);  

                }  
              }  
            } catch (Exception e) {  
                e.printStackTrace();  
            }  
        }  
    });  
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
  // refresh your views here
  super.onConfigurationChanged(newConfig);
}

class GetPlaces extends AsyncTask<String, Void, ArrayList<String>>
{

    @Override
               // three dots is java for an array of strings
    protected ArrayList<String> doInBackground(String... args)
    {

        Log.d("gottaGo", "doInBackground");

        ArrayList<String> predictionsArr = new ArrayList<String>();

        try
        {

            URL googlePlaces = new URL(
            // URLEncoder.encode(url,"UTF-8");
                    "https://maps.googleapis.com/maps/api/place/autocomplete/json?input="+ URLEncoder.encode(args[0].toString(), "UTF-8") +"&types=geocode&language=en&sensor=true&key=AIzaSyDYnuaL0x_7xGNqrEvYkgEB20_k-b4avOI");
            URLConnection tc = googlePlaces.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));

            String line;
            StringBuffer sb = new StringBuffer();
                            //take Google's legible JSON and turn it into one big string.
            while ((line = in.readLine()) != null) {
                sb.append(line);
                System.out.println("Line: "+line);
                }
                            //turn that string into a JSON object
            JSONObject predictions = new JSONObject(sb.toString());
                           //now get the JSON array that's inside that object           
            JSONArray ja = new JSONArray(predictions.getString("predictions"));
            System.out.println(ja.length());
                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                                    //add each entry to our array
                    predictionsArr.add(jo.getString("description"));
                }
        } catch (IOException e){
            Log.e("YourApp", "GetPlaces : doInBackground", e);
        } catch (JSONException e){
            Log.e("YourApp", "GetPlaces : doInBackground", e);
        }
        return predictionsArr;
}

//then our post

@Override
protected void onPostExecute(ArrayList<String> result)
{

    Log.d("YourApp", "onPostExecute : " + result.size());
    //update the adapter
    adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.item_list);
    adapter.setNotifyOnChange(true);
    //attach the adapter to textview
    filltt.setAdapter(adapter);

    for (String string : result)
    {

        Log.d("YourApp", "onPostExecute : result = " + string);
        adapter.add(string);
        adapter.notifyDataSetChanged();

    }

    Log.d("YourApp", "onPostExecute : autoCompleteAdapter" + adapter.getCount());

} 
```

}

```
class LoadPlaces extends AsyncTask<String, String, PlacesList> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LocateActivity.this);
        pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Places JSON
     * */
    @SuppressLint("NewApi")
    protected PlacesList doInBackground(String... args) {
        // creating Places class object
        googlePlaces = new GooglePlaces();

        try {
            if(gc.isPresent()){
                  List<Address> list = gc.getFromLocationName(locnm, 1);

                  Address address = list.get(0);

                  lat = address.getLatitude();
                  lng = address.getLongitude();
                }

            System.out.println("Lat Val: " + lat);
            System.out.println("Long Val: " + lng);

            String types = ""; // Listing places only cafes, restaurants

            // Radius in meters - increase this value if you don't find any places
            double radius = 1000; // 1000 meters 

            // get nearest places
            nearPlaces = googlePlaces.search(lat,
                    lng, radius, types);

            System.out.println("Places: "+nearPlaces);
          //    }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return nearPlaces;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * and show the data in UI
     * Always use runOnUiThread(new Runnable()) to update UI from background
     * thread, otherwise you will get error
     * **/
    protected void onPostExecute(PlacesList file_url) {
        super.onPostExecute(file_url);
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        signal.countDown();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed Places into LISTVIEW
                 * */
                // Get json response status
                status = nearPlaces.status;

                // Check for all possible status
                if(status.equals("OK")){
                    // Successfully got places details
                    if (nearPlaces.results != null) {
                        // loop through each place
                        for (Place p : nearPlaces.results) {
                            HashMap<String, String> map = new HashMap<String, String>();

                            // Place reference won't display in listview - it will be hidden
                            // Place reference is used to get "place full details"
                            map.put(KEY_REFERENCE, p.reference);

                            // Place name
                            map.put(KEY_NAME, p.name);

                            System.out.println("Place Name: " +p.name);

                            // adding HashMap to ArrayList
                            placesListItems.add(map);
                            System.out.println("ITEM: " + placesListItems.get(0));
                        }

                    }
                }
                else if(status.equals("ZERO_RESULTS")){

                }
                else if(status.equals("UNKNOWN_ERROR"))
                {

                }
                else if(status.equals("OVER_QUERY_LIMIT"))
                {

                }
                else if(status.equals("REQUEST_DENIED"))
                {

                }
                else if(status.equals("INVALID_REQUEST"))
                {

                }
                else
                {
                }
            }
        });

         try {
            signal.await(30, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        mapOverlays = mapView.getOverlays();

        // Geopoint to place on map
        geoPoint = new GeoPoint((int) (lat * 1E6),
                (int) (lng * 1E6));

        // Drawable marker icon
        Drawable drawable_user = getResources()
                .getDrawable(R.drawable.mark_red);

        itemizedOverlay = new AddItemizedOverlay(drawable_user);

        // Map overlay item
        overlayitem = new OverlayItem(geoPoint, "Your Location",
                "That is you!");

        itemizedOverlay.addOverlay(overlayitem);

        mapOverlays.add(itemizedOverlay);
        itemizedOverlay.populateNow();

        // Drawable marker icon
        Drawable drawable = getResources()
                .getDrawable(R.drawable.mark_blue);

        itemizedOverlay = new AddItemizedOverlay(drawable);

        mc = mapView.getController();

        // These values are used to get map boundary area
        // The area where you can see all the markers on screen
        int minLat = Integer.MAX_VALUE;
        int minLong = Integer.MAX_VALUE;
        int maxLat = Integer.MIN_VALUE;
        int maxLong = Integer.MIN_VALUE;

        // check for null in case it is null
        if (nearPlaces.results != null) {
            // loop through all the places
            for (Place place : nearPlaces.results) {
                latitude = place.geometry.location.lat; // latitude
                longitude = place.geometry.location.lng; // longitude

                // Geopoint to place on map
                geoPoint = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));

                // Map overlay item
                overlayitem = new OverlayItem(geoPoint, place.name,
                        place.vicinity);

                itemizedOverlay.addOverlay(overlayitem);

                // calculating map boundary area
                minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
                minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
                maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
                maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
            }
            mapOverlays.add(itemizedOverlay);

            // showing all overlay items
            itemizedOverlay.populateNow();
        }

        // Adjusting the zoom level so that you can see all the markers on map
        mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

        // Showing the center of the map
        mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
        mapView.postInvalidate();

    }

}

@Override  
public boolean isLocationDisplayed() {  
    return false;  
}  

@Override  
public boolean isRouteDisplayed() {  
    return false;  
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        exitByBackKey();

        //moveTaskToBack(false);

        return true;
    }
    return super.onKeyDown(keyCode, event);
}
protected void exitByBackKey() {

    AlertDialog alertbox = new AlertDialog.Builder(this)
    .setMessage("Do you really want to Exit ?")
    .setPositiveButton("YES", new DialogInterface.OnClickListener() {

        // do something when the button is clicked
        public void onClick(DialogInterface arg0, int arg1) {

            filltt.setText("");
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);

            //close();

        }
    })
    .setNegativeButton("NO", new DialogInterface.OnClickListener() {

        // do something when the button is clicked
        public void onClick(DialogInterface arg0, int arg1) {

                       }
    })
      .show();

} 
```

}

注意：此代码在 android 4.0 中完美运行，但是当我在 android 2.3 中对其进行测试时，它给了我强制关闭错误。并向我抛出错误，例如服务不可用.. 纬度和经度值为 0。
解决方案是什么？请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:12:57.527

```
 I got the solution.

    package com.example.locatebased;

    import java.io.*;
    import java.net.HttpURLConnection;
    import java.net.URL;
    import java.util.Hashtable;
    import org.kxml.*;
    import org.kxml.io.*;
    import org.kxml.kdom.*;
    import org.kxml.parser.*;

    import android.util.Log;

    public class Geocoding
    {
        Hashtable ht=null;
        private boolean time=true;
        private int count=0;
        private String citystreetvalue=null;

         public Geocoding()
         {
             System.out.println("Constructor call...");
             ht=new Hashtable();
         }

    //***************************** Find Address of the latitude Longitude ***********

        public String parseXml(String address)
        {       

            try
            {

                System.out.println("Address is:" + address);
                //URL mUrl = new URL("http://maps.google.com/maps/api/geocode/xml?address=tagore%20road%20rajkot&sensor=false");

                URL mUrl = new URL("http://maps.google.com/maps/api/geocode/xml?address=" + address + "&sensor=false");

                Log.e("Url",mUrl.toString());
                HttpURLConnection mConn = (HttpURLConnection) mUrl.openConnection();

                System.out.println("After address add...");
               InputStream is = mConn.getInputStream();
               Reader reader = new InputStreamReader(is);
               XmlParser parser = new XmlParser(reader);
               traverse(parser,"");

               mConn.disconnect();
               is.close();

               System.out.println("Close all connection...");
               if(ht.get("status").toString().equals("OK"))
               {
                System.out.println("result is Ok..." + ht.get("locality").toString() );
                citystreetvalue=ht.get("latitude").toString() + ","+ ht.get("longitude").toString() +","+ht.get("locality").toString();
               }
               else
               {
                System.out.println("result is not Ok...");
                citystreetvalue="InvalidLocation";
               }

            }
            catch(Exception e)
            {
                System.out.println(e.toString());
            }

            System.out.println("before returen statement...");
            return citystreetvalue;

        }    

        public void traverse(XmlParser parser, String indent ) throws Exception
        {
            System.out.println("in Traverse method....");

        boolean leave = false;
        String title = new String();
        String desc = new String();

        do
        {
        ParseEvent event = parser.read ();
        ParseEvent pe;
        switch (event.getType())
        {
         // For example, <title>
         case Xml.START_TAG:
         // see API doc of StartTag for more access methods
         // Pick up Title for display
         if ("status".equals(event.getName()))
         {
                    pe = parser.read();
                    title = pe.getText();
                    ht.put("status",title); 
         }
             if(count<2)
             {
             if ("lat".equals(event.getName()))
                {

                    pe = parser.read();
                    title = pe.getText();
                    ht.put("latitude",title);
                    count=count+1;

                }
              if ("lng".equals(event.getName()))
              {
                    pe = parser.read();
                    desc = pe.getText();
                    ht.put("longitude",desc);
                    count=count+1;

              }
             }

          if ("long_name".equals(event.getName()))
            {

                pe = parser.read();
                title = pe.getText();

            }

          if ("type".equals(event.getName()))
          {
                pe = parser.read();
                            desc = pe.getText();

                            if(desc.equals("route"))
                            {
                                System.out.println("street is:" + title);
                                ht.put("street",title);
                            }
          }  
         if("formatted_address".equals(event.getName()))
         {

                  if(time)
                  {
                            pe = parser.read();
                            title = pe.getText();
                            ht.put("address",title);
                            time=false;
                  }

         }

              ht.put(desc,title);

          traverse(parser,"") ; // recursion call for each <tag></tag>
          break;
          // For example </title?
         case Xml.END_TAG:
          leave = true;
          break;
          // For example </rss>
         case Xml.END_DOCUMENT:
          leave = true;
          break;
          // For example, the text between tags
         case Xml.TEXT:
          break;
         case Xml.WHITESPACE:
          break;
          default:
          }

          } while( !leave );

         }

    }

now add below code in mainactivity class:

geocoding=new Geocoding();

locnm=locnm.replace(" ","%20");
String citystreetvalue=geocoding.parseXml(locnm);    
System.out.println("string is:" + citystreetvalue);

if(citystreetvalue.equals("InvalidLocation"))
{
    }else
    {                               
        String citystreetval[]=Split(citystreetvalue, ",");     

            String latstreet=citystreetval[2];
            nlatitude=citystreetval[0];
            nlongitude=citystreetval[1];
    } 
```

# iphone - 我的应用程序中的浏览器 - iOS

> ID：14580460
> 
> 赞同：0
> 
> 时间：2013-01-29T10:15:09.507
> 
> 标签：iphone, ios, objective-c, browser, uiwebview

我正在我的 App 中寻找一个好的浏览器。那就是我点击我的应用程序中的一个链接，而不是把我带到 Safari，而是把我带到一个带有一些基本控件（后退、前进、刷新、停止和可能共享）的 UIWebView。我可以自己写一个，但我相信肯定已经有一些东西了。我四处搜索，找不到任何不会被严重弃用的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:24:00.280

创建您自己`UIWebView`的库或使用具有此类内置函数的库： [https ://github.com/samvermette/SVWebViewController](https://github.com/samvermette/SVWebViewController)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T10:49:10.837

您应该使用所需的功能创建自己的浏览器`UIWebview`。

按照[这里](http://dblog.com.au/iphone-development/iphone-sdk-tutorial-build-your-very-own-web-browser/)的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:21:40.063

获取 UIWebView 属性并使用以下代码。

```
 NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];

    [_webVeiew loadRequest:requestObj]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:23:27.370

`UIWebView`使用或使用添加一些自定义功能（如[TSMiniWebBrowser](https://github.com/tonisalae/TSMiniWebBrowser) ）的库来实现您自己的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T10:19:20.987

你必须使用 UIWebView。

> [UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# android - 如何创建适用于 android>=froyo 的 Tabhost 布局？

> ID：14580464
> 
> 赞同：0
> 
> 时间：2013-01-29T10:15:31.167
> 
> 标签：android, android-tabhost, android-tabactivity

我想用 TabHost 创建布局，我想为每个选项卡创建活动以进行一些计算。此外，我希望这适用于所有 android >= Froyo。我到处寻找不明确和结论性的解决方案。因此，如果有人可以帮助我，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:19:28.683

很好的问题对其他人真的很有帮助，

使用以下代码使用选项卡并通过单击特定选项卡来调用活动：

```
 public class TabSample extends TabActivity {
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabmain);
    setTabs() ;
}
private void setTabs()
{
    addTab("Tab1", R.drawable.tab1,Home.class);
    addTab("Tab2", R.drawable.tab2,AboutUs.class);

    addTab("Tab3", R.drawable.tab3,Services.class);
    addTab("Tab4", R.drawable.tab4,Contact.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:21:30.173

这是 TabHost 的完整实现，它适用于所有版本的 android。在给定的链接中查看我的答案

[某些设备的标签和图像](https://stackoverflow.com/questions/14274097/tabs-and-images-with-some-devices/14275730#14275730)

# java - 机器人类，如 android 类

> ID：14580465
> 
> 赞同：3
> 
> 时间：2013-01-29T10:15:30.920
> 
> 标签：java, android, class, awtrobot

> **可能重复：**
> [Android API 像 java.awt.Robot](https://stackoverflow.com/questions/4416228/android-api-like-java-awt-robot)

有没有其他的android类，比如java中的Robot类，或者我们可以在android中使用Robot类吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:23:00.387

不，但对您来说等效的可能是Android 上的[Instrumentation](http://developer.android.com/reference/android/app/Instrumentation.html)。

例如，`sendKeyDownUpSync(int key)`用于向当前聚焦的窗口发送向上和向下键事件同步。

```
Instrumentation inst = new Instrumentation();
inst.sendKeyDownUpSync(KeyEvent.KEYCODE_MENU); 
```

还有[`TouchUtils`](http://developer.android.com/reference/android/test/TouchUtils.html)用于模拟触摸事件的实用程序类。虽然我必须注意， Instrumentation 类实际上只[用于测试](http://developer.android.com/tools/testing/testing_android.html#Instrumentation)，所以这取决于你想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:41:23.113

如果是用于测试，您可以查找 Robotium，[http://code.google.com/p/robotium/](http://code.google.com/p/robotium/)。它是适用于 Android 的 Selenium。

# visual-studio-2010 - 是否可以将 Visual Studio 2010 设置为仅在导航栏中列出方法？

> ID：14580466
> 
> 赞同：3
> 
> 时间：2013-01-29T10:15:31.540
> 
> 标签：visual-studio-2010

在栏中列出了方法和属性，对我来说最好只显示快速导航类的方法

![导航栏](../Images/117cc227983623547c624941c003f74e.png)

# sql - 计算每周比赛的奖牌数量

> ID：14580469
> 
> 赞同：4
> 
> 时间：2013-01-29T10:15:43.010
> 
> 标签：sql, postgresql, postgresql-8.4

我有一张桌子，上面有每周玩家的分数：

```
# select * from pref_money limit 5;
       id       | money |   yw
----------------+-------+---------
 OK32378280203  |   -27 | 2010-44
 OK274037315447 |   -56 | 2010-44
 OK19644992852  |     8 | 2010-44
 OK21807961329  |   114 | 2010-44
 FB1845091917   |   774 | 2010-44
(5 rows) 
```

这条 SQL 语句为我提供了每周的获胜者以及每个玩家获胜的次数：

```
# select x.id, count(x.id) from (
    select id,
           row_number() over(partition by yw order by money desc) as ranking
    from pref_money
) x
where x.ranking = 1 group by x.id;
           id           | count
------------------------+-------
 OK9521784953           |     1
 OK356310219480         |     1
 MR797911753357391363   |     1
 OK135366127143         |     1
 OK314685454941         |     1
 OK308121034308         |     1
 OK4087658302           |     5
 OK452217781481         |     6
.... 
```

我想将后一个数字保存在`medals`玩家表的列中：

```
# \d pref_users;
                   Table "public.pref_users"
   Column   |            Type             |     Modifiers
------------+-----------------------------+--------------------
 id         | character varying(32)       | not null
 first_name | character varying(64)       |
 last_name  | character varying(64)       |
 city       | character varying(64)       |
 medals     | integer                     | not null default 0 
```

请问这个怎么做？我只能想到使用临时表，但必须有更简单的方法...谢谢

**更新：**

Clodoaldo 建议的查询有效，但现在我的 cronjob 偶尔会失败：

```
/* reset and then update medals count */
update pref_users set medals = 0;
psql:/home/afarber/bin/clean-database.sql:63: ERROR:  deadlock detected
DETAIL:  Process 31072 waits for ShareLock on transaction 124735679; blocked by process 30368.
Process 30368 waits for ShareLock on transaction 124735675; blocked by process 31072.
HINT:  See server log for query details.

update pref_users u
set medals = s.medals
from (
    select id, count(id) medals
    from (
        select id,
            row_number() over(partition by yw order by money desc) as ranking
        from pref_money where yw <> to_char(CURRENT_TIMESTAMP, 'IYYY-IW')
    ) x
    where ranking = 1
    group by id
) s
where u.id = s.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:26:46.467

您可以创建一个使用“奖牌选择”并将其与实际数据连接起来的视图：

```
CREATE VIEW pref_money_medals AS
SELECT *
FROM pref_money
JOIN (SELECT count(x.id)
      FROM (SELECT id, row_number() 
            OVER(PARTITION BY yw ORDER BY money DESC) AS ranking
            FROM pref_money
            ) x
      WHERE x.ranking = 1 group by x.id) medals
ON pref_money.id = medals.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:45:21.793

```
update pref_users u
set medals = s.medals
from (
    select id, count(id) medals
    from (
        select id,
            row_number() over(partition by yw order by money desc) as ranking
        from pref_money
    ) x
    where ranking = 1
    group by id
) s
where u.id = s.id 
```

# c++ - C++ 将字符串日期 (1/4/2000) 转换为 int 日期 (20000104)

> ID：14580471
> 
> 赞同：1
> 
> 时间：2013-01-29T10:15:52.590
> 
> 标签：c++, string, date, data-conversion

我可以编写一个函数来解析字符串日期，但我觉得我在这里重新发明了轮子。是否有一种更快的，也许是内置的 C++ 方法来从这种格式的字符串日期：2000 年 1 月 4 日到更易于使用的 int，如 20000104？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:15:24.373

除非您还需要内置的 C++ 方法来进行验证，否则“显而易见的”解析是：

```
int parseDate(const std::string &input) {
    int month;
    int day;
    int year;
    if (std::sscanf(input.c_str(), "%d/%d/%d", &month, &day, &year) != 3) {
        // handle error
    } else {
        // check values to avoid int overflow if you can be bothered
        return 10000 * year + 100 * month + day;
    }
} 
```

`sscanf`如果您想~~编写几行代码~~类型安全，则可以使用流提取器来代替。

标准库中当然没有什么可以`10000 * year + 100 * month + day`为您做的。如果你不拘泥于那个确切的值，你只想要一个正确顺序的整数，那么你可以看看你的平台是否有一个功能来告诉你所谓的“儒略日”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:19:00.390

标准库函数是[`strptime()`](http://linux.die.net/man/3/strptime)，但不确定在 C++ 中被认为是多么“干净”。

如果您对 没`strptime()`问题，以下是您将如何使用它来处理您的情况：

```
struct tm when;

strptime("1/4/2000", "%m/%d/%y", &tm); // Note: should check return value.
const int sortable = 10000 * tm.tm_year + 100 * tm.tm_month + tm.tm_day; 
```

当然，你可以根据需要使用 Boost；相关的角落似乎是[Posix Time](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/posix_time.html)。

# java - ArrayList 导致 NullPointerException

> ID：14580473
> 
> 赞同：-3
> 
> 时间：2013-01-29T10:16:00.707
> 
> 标签：java, swing, arraylist, nullpointerexception

我从paintcomponent方法中得到了这段代码的空指针异常

```
 public A1Panel() {
            final ArrayList<MySnowFlake> myShapes = new ArrayList<MySnowFlake>();   //Stage 1: Replace this line
            popup = new JPopupMenu();               //create the popup menu
            makePopupMenu();

            addMouseListener( new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                maybeShowPopup(e);
            }

            public void mouseReleased(MouseEvent e) {
                maybeShowPopup(e);
            }

            private void maybeShowPopup(MouseEvent e) {
                if (e.isPopupTrigger()) {
                    popup.show(e.getComponent(), e.getX(), e.getY());
                }
            }
            public void mouseClicked( MouseEvent e ) {  //Stage 1: Modify the following statements
                myShapes.add(currentIndex, new MySnowFlake(e.getX(), e.getY(), currentLevel, currentLength));
                currentIndex += 1;
                repaint();
            }
            });
        }

        public void paintComponent(Graphics g) {
                //g.drawString("" + currentIndex, 50,50);
            //Stage 1: Modify the following statements
            try{
            for (int i = 0; i < currentIndex; i++) {
                myShapes.get(i).paint(g);
            }
            } catch(NullPointerException e){
                System.out.println("NullPointerException caught!!");
            }
        } 
```

## 我的雪花

```
public class MySnowFlake {
    protected int level;            // the recursion level
    protected Turtle turtle;        // the turtle object
    protected double turn = Math.PI/3; // the turning angle
    public int length;              // the length of the snowflake
    public Point p;                 // the initial position

    /** Constructor to create a Snowflake and initialize all values
    */
    public MySnowFlake(int x, int y, int level, int length) {
        this.level = level;
        this.length = length;
        p = new Point(x,y);
        turtle = new Turtle();
    }

    public void translate(int dx, int dy){
        p.x += dx;
        p.y += dy;
    }

    public void LevelUp(){
        level++;
    }

    public void LevelDown(){
        level--;
    }

    /**
     * Recursive draw method
    * @param lev -  the level of the koch shape
    * @param size -  the size of the koch shape
    */
    public void draw(int lev, double size) {
        // 1) define the base case
        if(lev < 0){

        // 2) define the recursive case

    }

    /**
     * Paint a snowflake
    * @param g  the graphics control
    */

    public void paint(Graphics g) {
        double size = length;

        // replace this line with recursive calls
        g.drawRect(p.x, p.y, level*5, level*5);

        // 1) set up the turtle object first

        // 2) call the recursive draw method

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:17:55.793

当您使用 ArrayList 的实际长度时，循环会更可靠：

```
for (int i = 0; i < myShapes.size(); i++) { 
```

但请注意，异常也可能发生在 MySnowFlake 类的 paint 方法中。当您捕获可能由许多不同问题（如 NullPointerException）引起的异常时，您应该始终打印它的堆栈跟踪，以便您可以看到实际抛出异常的位置：

```
 } catch(NullPointerException e){
            System.out.println("NullPointerException caught!!");
            e.printStackTrace();
        } 
```

在生产软件中，将所有意外异常的堆栈跟踪保存到日志文件或数据库中通常是个好主意，这样您以后可以进行事后分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:48:51.373

您能否更改这两行的顺序，即代替

```
myShapes.add(currentIndex, new MySnowFlake(e.getX(), e.getY(), currentLevel, currentLength));
currentIndex += 1; 
```

尝试这个：

```
currentIndex += 1;
myShapes.add(currentIndex, new MySnowFlake(e.getX(), e.getY(), currentLevel, currentLength)); 
```

# android - 添加编辑文本值总是返回零

> ID：14580474
> 
> 赞同：0
> 
> 时间：2013-01-29T10:16:01.023
> 
> 标签：android, android-edittext, textview

我在activitya中有10个edittext值，我想添加它们并在newactivity中显示结果。

我的代码

```
 public class activitya extends Activity implements onclicklistener
    {
      private EditText editext1;
      private EditText editext2;
      private EditText editext3;
      private EditText editext4;
      private EditText editext5;
      private Button calculate;

      protected void onCreate(Bundle savedInstanceState) 
          {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activitya);
            calculate =(Button)findviewbyid(R.id.button1);
            calculate.setonclicklistener(this);

          }

       public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1:
      onadd();
      break;
      default:
      break;
   }

     }
public void onadd()
{

    Bundle bundle = new Bundle();
    String value1 = editext1.getText().toString();
    String value2 =editext2.getText().toString();
    bundle.putString("sendvalue1",value1));
    bundle.putString("sendvalue2",value2));

      try{
     Double Total =Double.parseDouble(value1)+Double.parseDouble(value2);}
      catch(NumberFormatException e)
     {
      e.printstacktrace();
      }
     bundle.putString("totalvalue",String.valueof(Total));

   Intent a = new intent(this,newactivity.class);
    a.putExtras(bundle);
    startactivity(a);

   }
   } 
```

在新活动中：

```
 public class newactivity extends activity{
  private TextView total;

  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        total =(TextView)findviewbyid(R.id.text1);
    onview();

}

   public void onview()
 {
 Bundle bundle = this.getIntent().getExtras();
 String param1 = bundle.getString("totalvalue");
        total.setText(param1);

 } 
```

只有当我输入所有 10 个值时，它才会正确显示加法，奇怪的是，如果我什至没有输入一个值它显示为零，无法理解问题出在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:28:14.140

`EditText`在添加所有值之前检查所有长度。

像，

```
if(EditText1.getText.length()==0){
 Toast.makeText(YourActivity.this,"All fields are mandatory ",
                                    Toast.LENGTH_LONG).show();
}else if(EditText2.getText.length()==0){
} else if(){
..........
 }else{
 } 
```

你会避免`NullPointerException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:00:38.710

你有一个 try-catch 并且你在 catch 中什么也不做。这通常是不好的做法，因为您不知道代码中何时发生任何事情。

在这种情况下，当您尝试解析空字符串时， Double.parseDouble 会引发异常。 `""`不能解析为双精度。 `"0"`能够。

您需要确保每个编辑文本都包含一个可以解析为双精度值的有效值，或者在尝试解析每个值之前对其进行测试。

# visual-studio-2008 - 解决方案文件夹和智能设备部署项目

> ID：14580475
> 
> 赞同：0
> 
> 时间：2013-01-29T10:16:02.520
> 
> 标签：visual-studio-2008, compact-framework, cab

是否可以分组组织此类项目？我无法将智能设备部署项目移动到解决方案文件夹中：

![开始拖动](../Images/616c3c83c1602b852d0cbc28de79c5e6.png)

![掉落](../Images/af574bddc0a4164e46da4cd5d0abac69.png)

结果：安装项目***尚未***移动到目标文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T18:23:41.300

您需要创建一个安装和部署项目。

我这里没有 VS2008 工作了，所以我无法发布 VS2008 屏幕截图。

在 VS2010 中，它看起来像这样：

![设置和部署](../Images/e8c301a1f4e2a051e2a5c33f6c862c7e.png)

希望您可以在 ListView 区域中进行选择。

**更新：**

好的，我在家拿着我的 VS2008 副本。

你想要这样的东西吗？

![设置和解决方案](../Images/64ea1f646c4ecc942b8cd6bca46546c9.png)

这是在您向解决方案添加新项目时创建的（我的图片中的 FTMaint）。

如果要指定 Setup 项目的输出位置，请右键单击 Setup 项目，选择 Properties，然后在 Output file name 字段中指定输出文件的位置：

![输出规格](../Images/995b0c8dfbb69b934c6778b4ef35205b.png)

# c++ - 对象作为函数参数

> ID：14580476
> 
> 赞同：1
> 
> 时间：2013-01-29T10:16:05.543
> 
> 标签：c++

我写了一个简单的程序。

我收到此错误：

```
time.cpp: In function ‘int main()’:
time.cpp:22:9: error: expected ‘;’ before ‘a’
time.cpp:23:4: error: ‘a’ was not declared in this scope
time.cpp:24:4: error: ‘b’ was not declared in this scope
time.cpp:25:4: error: ‘c’ was not declared in this scope 
```

这是我的代码：

```
#include<iostream>
using namespace std;
class time
{
    int hour;
    int min;

public:
    void gettime(int h,int m)
    {
        hour=h;
        min=m;
    }

    void puttime()
    {
        cout<<hour<<endl<<min;
    }

    void sum(time x,time y)
    {
        min=x.min+y.min;
        hour=min/60;
        min=min%60;
        hour=hour+x.hour+y.hour;
    }
};

int main()
{
    time a,b,c;
    a.gettime(2,45);
    b.gettime(3,35);
    c.sum(a,b);
    a.puttime();
    b.putime();
    c.puttime();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:21:22.693

请记住，有一个名为 的标准函数[`time`](http://en.cppreference.com/w/cpp/chrono/c/time)。

这是您应该避免的主要原因之一`using namespace std;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:26:02.970

b.putime() 必须是 b.puttime() 这里。否则编译此代码

# varnish - 清漆在 MISS 上的行为

> ID：14580491
> 
> 赞同：5
> 
> 时间：2013-01-29T10:17:21.203
> 
> 标签：varnish

考虑这种情况：Varnish 缓存有一个 MISS 并且后端服务器现在正在重新生成请求的内容。在生成期间，第二个请求进来并获得了 MISS。varnish 是否在其他请求未决时将此请求发送到后端？如果在这段时间之间有数千个请求怎么办。服务器会崩溃吗？每个请求都会使其变慢。

这是正确的还是清漆“同步”这些场景以防止出现此类问题？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:20:03.307

Varnish 将所有请求发送到后端。即它不会对其他请求进行排队，只发出一个后端请求并将其响应用于所有请求。

然而，Varnish 有一个[宽限选项](https://www.varnish-cache.org/trac/wiki/VCLExampleGrace)，可以让您在这些类型的情况下将旧的、过期的内容保存在缓存中。

例如考虑以下 VCL：

```
sub vcl_recv {
  if (req.backend.healthy) {
    set req.grace = 5m;
  } else {
    set req.grace = 24h;
  }
}

sub vcl_fetch {
   set beresp.grace = 24h;
} 
```

现在，如果后端是健康的（请参阅[后端轮询](https://www.varnish-cache.org/trac/wiki/BackendPolling)）并且请求导致 a `MISS`，则第一个请求将发送到后端。如果另一个请求针对相同的内容，但缓存中有一个年龄 <TTL+req.grace 的项目（在本例中为 5 分钟），则该请求将获得“陈旧”的内容。只要导致 a 的第一个请求`MISS`从后端获得响应（并且缓存再次新鲜）或项目的年龄变得大于 TTL+req.grace，就会发生这种情况。

如果后端关闭（req.backend.healthy == FALSE），那么只要 age<TTL+24h 就会提供过时的内容。

您可能还想查看[Varnish 书籍的](https://www.varnish-software.com/static/book/)[保存请求](https://www.varnish-software.com/static/book/Saving_a_request.html)部分，以获得更详尽的示例和练习。

**固定：**未转义的 < 字符。

**修复更多：**还有另一个未转义的 < 字符...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T23:29:11.690

我相信 Ketola 的（接受的）答案是错误的。

对同一个 URI 的多个 Varnish 请求**将**被排队。

然后取决于第一个请求的结果是否可缓存。如果是，它也将用于其他（排队的）请求。如果没有，所有其他排队的请求将被发送到后端。

因此，如果您有一些要缓存的慢速 API 端点，并且它是可缓存的（关于 Varnish 规则），则该 URI 的多个请求将只命中后端一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-26T08:49:14.310

我对@max_i 的回答没有任何意见或任何意见，所以我提交了另一个答案来验证他的答案。

Ketola 接受的答案并非完全错误，它可能只是过时了，并且对于旧版本的 Varnish 可能是正确的。具体这部分：

> Varnish 将所有请求发送到后端。即它不会对其他请求进行排队，只发出一个后端请求并将其响应用于所有请求。

在使用 Varnish 4.1 LTS 和 Apache 2.4 的标准安装独立测试后，我创建了一个基本的 PHP 文件，其中包含以下内容：

```
<?php sleep(5); echo 'hello world!'; 
```

然后用[ab](https://httpd.apache.org/docs/2.4/programs/ab.html)测试了使用 50 个请求在 5 个并发下的 HTTP 请求周期。结果表明，虽然 Varnish 接受了每一个连接，但只向后端发出了一个请求，正如预期的那样，该请求大约需要 5 秒才能解决。随后，每个 Varnish 连接都必须等待该最短时间才能收到响应。

这样做的缺点当然是第一个请求之后的请求在其后面“排队”，但是与所有 50 个请求同时到达后端（或者在我的测试中是并发的）相比，这当然是一个小问题5）。

# ruby - 为什么机械化不搜索这种形式？

> ID：14580492
> 
> 赞同：0
> 
> 时间：2013-01-29T10:17:22.380
> 
> 标签：ruby, mechanize

我是机械化的新手。我正在尝试使用搜索词“TAICHI 21”搜索表单，但它似乎不起作用。该页面位于[http://www.asus.com/Search/](http://www.asus.com/Search/)

这是我犯的错误还是检测机器人的表单？

```
require 'nokogiri'
require 'mechanize'

agent = Mechanize.new

#User Agent masking
agent.user_agent_alias = 'Windows Mozilla'

#This handles the url
page = agent.get('http://www.asus.com/Search/')
pp page

#Lock onto the search box
asus_form = page.form('aspnetForm')

#Prepare a search for our form
asus_form.q = 'TAICHI 21'

#Submit our form
button = asus_form.button_with(:value => "Button1")
page = agent.submit(asus_form, button)

#Output our Pretty Print to text file
pp page
File.open("results.txt","w") do |f|
  PP.pp(page,f)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:59:58.057

我仔细查看了结果，并在其中找到了您的链接。在我的测试期间，我更改了代码中的一些内容，但我相信这并没有真正改变任何东西。最后一行找到您的链接。

```
agent = Mechanize.new

#User Agent masking
agent.user_agent_alias = 'Windows Mozilla'

#This handles the url
search = 'TAICHI 21'
page = agent.get("http://www.asus.com/Search/?SearchKey=#{search}")

#Output our Pretty Print to text file
File.open("results.txt","w") do |f|
  PP.pp(page.links.find_all{|l| l.text =~ /#{search}/i},f)
end 
```

# sql-server - 如何将 SQL Server 登录名从一台服务器传输到另一台服务器？

> ID：14580493
> 
> 赞同：0
> 
> 时间：2013-01-29T10:17:23.847
> 
> 标签：sql-server, login, sql-server-2008-r2, database-migration

我计划在两台服务器之间迁移一些 SQL Server 2008 R2 数据库。

建议按照本文中的方法 3：http: [//support.microsoft.com/kb/918992](http://support.microsoft.com/kb/918992)在迁移数据库*后*传输登录信息。

这对我来说看起来很正常，但一个问题是目标服务器上是否已经存在任何这些登录名。如果是这种情况，是否需要做任何额外的事情，如果是这样，该怎么办？

[我的理解有点模糊 - 恢复数据库中的用户是否可能仍然是孤立的，因为他们引用的登录在新服务器上具有不同的 SID？]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:25:17.573

该脚本会生成登录脚本，而不是直接执行语句，因此您可以查看它们，并为目标上尚不存在的用户运行脚本。

该脚本将根据新登录名是否需要新的登录名生成新的 SID——这取决于登录名的类型。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms403629%28v=sql.105%29.aspx)关于这个主题：

> SID 的来源取决于登录的创建方式。如果登录是从 Windows 用户或组创建的，则会为其提供源主体的 Windows SID；Windows SID 在域中是唯一的。如果 SQL Server 登录是从证书或非对称密钥创建的，则会为其分配一个从公钥的 SHA-1 哈希派生的 SID。如果登录创建为需要密码的旧式 SQL Server 登录，则服务器将生成一个 SID。

我认为除非您将`sys.server_principals`桌子用于特殊用途，否则您无需担心这一点。

* * *

从下面的评论中，Steve 想通过脚本创建登录，并在新服务器上分离和重新附加数据库。令人担忧的是这些登录现在将成为孤立的——即附加到原始服务器上的登录，其名称与新服务器上的登录相同，但 SID 不同。

是的，这将是一个问题。要对此进行排序，您需要访问[此 MSDN 文章](http://msdn.microsoft.com/en-gb/library/ms175475%28v=sql.105%29.aspx)。总结一下：

要检测孤立用户，请执行以下 Transact-SQL 语句：

```
USE <database_name>;
GO; 
sp_change_users_login @Action='Report';
GO; 
```

输出列出了当前数据库中未链接到任何 SQL Server 登录的用户和相应的安全标识符 (SID)。有关详细信息，请参阅[sp_change_users_login](http://msdn.microsoft.com/en-gb/library/ms174378%28v=sql.105%29.aspx) (Transact-SQL)。

要解析孤立用户，请使用以下过程：

以下命令将指定的服务器登录帐户与指定的数据库用户重新链接。

```
USE <database_name>;
GO
sp_change_users_login @Action='update_one', @UserNamePattern='<database_user>', 
   @LoginName='<login_name>';
GO 
```

* * *

正如史蒂夫指出的那样，`sp_change_users_login`被折旧，首选的替代方法是使用`ALTER USER`：

```
ALTER USER <database_user>
WITH LOGIN <login_name> 
```

[MSDN 链接](http://msdn.microsoft.com/en-gb/library/ms176060%28v=sql.105%29.aspx)

# html - 表单元素出现在表单之外

> ID：14580497
> 
> 赞同：-3
> 
> 时间：2013-01-29T10:17:41.453
> 
> 标签：html, css, forms

我呈现这样的表格：

```
<form action='/search' method='get' style='display: none'>
  <input name='q' type='search' />
  <input type='submit' value='Search' />
</form> 
```

在页面源代码中，这部分看起来像这样，但 Web Inspector 和 Firebug 都在 DOM 树中显示它，如下所示：

```
<form action='/search' method='get' style='display: none'></form>
<input name='q' type='search' />
<input type='submit' value='Search' /> 
```

因此，尽管有声明，输入仍然可见`display: none`，并且表单提交也不起作用。

为什么会这样，有什么想法吗？谜团更深：这个表单呈现在网站的两个页面上，而在另一个页面上，它按预期显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:19:04.410

在显示设置为无的情况下，表单不应该是可见的。它甚至可以在您的一个页面上运行，因此您可以确定代码。您需要检查其他页面中的代码。我猜你已经粘贴了工作表单的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:30:50.500

创建 div 并对其应用 display:none 。而不是将 display none 应用于表单元素的表单

# sql-server - 修改 MS SQL 存储过程的快速方法

> ID：14580504
> 
> 赞同：4
> 
> 时间：2013-01-29T10:17:59.703
> 
> 标签：sql-server, stored-procedures, ssms

我需要经常编辑 Microsoft SQL 存储过程，我发现传统方式（打开 MSSMS -> 展开数据库树，展开存储过程树并按 SP 的名称定义过滤器）很长。我正在寻找一种像“sp_helptext”这样的方法（命令行），但是一种实际上会为我打开存储过程进行编辑的方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:07:13.917

没有像这样的直接命令

```
MODIFY dbname.schemaname.spname 
```

除了使用 SSMS 的传统 GUI 方式之外，您有 3 个使用 TSQL 的选项

```
EXEC sp_helptext dbname.schemaname.spname';

SELECT OBJECT_DEFINITION (OBJECT_ID(dbname.schemaname.spname'));

SELECT definition
FROM sys.sql_modules
WHERE object_id = (OBJECT_ID(dbname.schemaname.spname')); 
```

不幸的是，所有这些选项都会导致格式丢失。

您正在尝试在这里混合两种技术。

1.  SQL 和 SQL 语法
2.  SQL 管理工具

可能无法使用 TSQL 来操作 Management Studio，而这正是您想要的。恐怕剪切和粘贴是您唯一的选择。

拉吉

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T09:59:53.803

有一种方法：我开发 SSMSBoost - SSMS 插件。它允许直接从 SQL 编辑器打开对象脚本。

1.  在 SQL 编辑器中将光标放在存储过程名称上

2.  点击 F2，程序将在新窗口中编写脚本。

点击 Ctrl-F2 将在对象资源管理器树中定位对象，因此您可以使用更多 SSMS 命令右键单击它。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:23:03.713

查看 Redgate SQL 提示。有了这个，您可以右键单击 Stored Proc 的名称，然后单击“ALTER”

[红门 SQL 提示](http://www.red-gate.com/products/sql-development/sql-prompt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T18:25:46.433

下面是可用于运行 sp_helptext 过程的代码，该过程将为您返回一个行表，您可以将其写入将创建存储过程的文件。然后，您可以将文件名传递到 SSMS 命令行以在 sql 服务器管理器打开时直接打开该文件。

> 例如）Ssms tempFile.sql

```
using (SqlConnection con = new SqlConnection ("Connection String Here"))
{
    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "sp_helptext @procName";
        cmd.CommandType = CommandType.Text;

        cmd.Parameters.AddWithValue("procName", "Name Of Stored Proc Here");

        con.Open(); 

        using (SqlDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                /* 
                You will get the CREATE PROC text here
                Do what you need to with it. For example, write
                to a .sql file
                */
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-18T18:52:01.363

永远不要使用 SSMS（或 SSMS 插件）为存储的过程编写脚本以进行更改。存储的过程应该始终直接从您的源代码管理中打开。如果源代码管理中没有这些对象，则需要这样做。SP 是代码，它们需要像其他代码一样对待。从源代码控制系统之外编辑sps脚本是不负责任的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-26T04:35:02.967

用这个

```
SELECT ROUTINE_DEFINITION from INFORMATION_SCHEMA.ROUTINES
where ROUTINE_NAME = 'YourStoredProcedureName' 
```

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-23T10:22:58.467

如果您决定忽略此处关于源代码控制的建议，一种快速的方法是在您的桌面上创建一个您可以轻松启动的 .sql 文件，其中包含以下内容。

```
SELECT o.name, m.definition AS [Copy This Definition], o.type_desc, o.create_date, o.modify_date 
FROM sys.sql_modules m INNER JOIN sys.objects o ON m.object_id = o.object_id
WHERE o.name='the_SP_in_question' -- <<<<<< SP/Func to search for 
```

在 F5 之前根据需要编辑 SP 名称，然后将结果中的定义复制到新查询中。并更改`CREATE`为`ALTER`当然。

遗憾的是，MS 还没有为此提供标准命令，它会有它的用途。

# c# - 使用 XAML 和自定义控件在 Silverlight/Lightswitch 中打印

> ID：14580507
> 
> 赞同：0
> 
> 时间：2013-01-29T10:18:06.123
> 
> 标签：c#, silverlight, xaml, printing, visual-studio-lightswitch

我正在使用 Lightswitch 编写 Silverlight 应用程序。我想打印某些屏幕上显示的数据。

我找到[了这个在 Silverlight/Lightswitch 中打印的教程](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/3/Printing-With-LightSwitch.aspx)。它描述了如何使用可以打印的 XAML 创建自定义控件。控件如下所示：

![在 Lightswitch 中打印](../Images/a4528fd042fe895ed4c5bb8d8caea8db.png)

在后台，您可以看到控件在 Silverlight 应用程序中的外观。该控件同时包含一个按钮和一个网格：

```
<StackPanel>
    <Button Content="Print" Name="btnPrint" Click="btnPrint_Click" />
        <Grid x:Name="LayoutRoot">
            <!-- grid code goes here -->
            <!-- some more code an closing tags --> 
```

使用 Silverlight 的打印 API，在自定义控件中打印是这样完成的：

```
PrintDocument printInvoice = new PrintDocument();
private void btnPrint_Click(object sender, System.Windows.RoutedEventArgs e){   
    printInvoice.PrintPage +=
        new EventHandler<PrintPageEventArgs>(printInvoice_PrintPage);
}

void printInvoice_PrintPage(object sender, PrintPageEventArgs e){
    e.PageVisual = LayoutRoot;
} 
```

由于`e.PageVisual = LayoutRoot`使用了，我们只看到打印输出中的表格，而不是按钮。没关系，但我想为打印布局使用单独的 XAML。我的目标是仅`Print`在 Silverlight 应用程序上显示一个按钮，并在单独的 XAML 中定义打印布局。

因此，我刚刚开始创建第二个 XAML 作为 SilverlightControl 并尝试使用它：

```
MyPrintLayout mpl = new MyPrintLayout();
void printArtikels_PrintPage(object sender, PrintPageEventArgs e){
    e.PageVisual = mpl.LayoutRoot;
} 
```

但我收到错误“Das Element ist bereits das untergeordnete Element eines anderen Elements”（英文：“该元素已经是另一个元素的子元素”）。[这个问题也在这个问题](https://stackoverflow.com/questions/5578109/wpf-datagrid-bug-when-toggle-visibility-on-a-column-with-an-image-as-headercont)中讨论过，但它并没有解决我的问题。

当我包含`MyPrintLayout`在 silverlight 应用程序中时，它显示没有问题（其中只有一些文本来测试功能）。

好像我这样做完全错误。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:05:39.683

mpl.LayoutRoot 已经是 mpl 的子元素。试试这个：

```
void printArtikels_PrintPage(object sender, PrintPageEventArgs e){
    MyPrintLayout mpl = new MyPrintLayout();
    e.PageVisual = mpl;
} 
```

# javascript - 移动浏览器上的本地存储无法正确清理

> ID：14580512
> 
> 赞同：0
> 
> 时间：2013-01-29T10:18:21.000
> 
> 标签：javascript, jquery, html, jstorage

这会让我发疯。这发生在 iphone 4S Safari(IOS 6) 上，但**不会发生**在任何桌面浏览器上。

每次在我发出新请求之前，我都会刷新 jStorage，在 Alert test1 上，一切都如我所料。但第二个警报 Test2 显示的是来自存储的**较旧数据，而****不是****成功功能**中接收和设置的“**数据**” 。

 **这怎么可能？

```
$.ajaxSetup({ cache: false });
$.jStorage.flush();
    localStorage.clear();
alert("Test1 "+$.jStorage.get('token')+"tu:"+$.jStorage.get('user'));

$.ajax
    ({
        type: "POST",
        url: "rs/user/token",
        async: false,
        cache: false,
        beforeSend: function (xhr){

        },
        success: function (data){
            $.jStorage.set('token', data);
            $.jStorage.set('user',username);             
            changemenu('menu.html');
            alert("Test2 "+$.jStorage.get('token')+"tu:"+$.jStorage.get('user'));
        },
        error: function() {

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:13:23.627

原来它与本地存储无关，**STUPID** IOS 6 safari 缓存所有 POST 请求，所以它在每个请求上秘密地返回相同的令牌。这是我很长时间以来见过的最愚蠢的事情！

[http://arstechnica.com/apple/2012/09/developers-claim-safari-in-ios-6-breaks-web-apps-with-aggressive-caching/](http://arstechnica.com/apple/2012/09/developers-claim-safari-in-ios-6-breaks-web-apps-with-aggressive-caching/)

[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)**

# vb.net - 如何在没有多个页面的情况下使用选项卡控件的按钮？

> ID：14580517
> 
> 赞同：0
> 
> 时间：2013-01-29T10:18:31.493
> 
> 标签：vb.net, winforms

我正在为 VB 2010 做一个类项目，该项目最初设计为使用按钮。但是，我发现使用选项卡控件看起来更好并且更有意义。我问我的导师这是否可以接受，她真的很喜欢它的外观，但说我需要使用代码来更改页面上控件的属性以满足此作业的要求。

我可以回到使用按钮，但现在我只是想知道它是否可以完成？那么有没有办法将单个固定页面用于多个选项卡？（我可以调整它的大小，以便只显示选项卡按钮，但我觉得这太骇人听闻了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:44:20.737

这是一个有问题的 UI，因为 TabControl 通常用于更改区域内容的视图，并且您希望 TabControl 充当对象上的“操作”。从项目的声音来看，RadioButtons 听起来像是一个更合适的工具。

使这项工作的一种方法是将 TabControl 和您正在修改的控件彼此分开，并仅显示每个选项卡的操作描述，如下所示：

![在此处输入图像描述](../Images/3e69dce8aff2004d912279be8d256329.png)

```
Private Sub TabControl1_Selecting(sender As Object, _
                                  e As TabControlCancelEventArgs) _
                                  Handles TabControl1.Selecting
  Select Case e.TabPage.Name
    Case TabPage1.Name
      Panel1.BackColor = Color.Blue
    Case TabPage2.Name
      Panel1.BackColor = Color.Red
  End Select
End Sub 
```

# mysql - MySQL：使用 If else 更新查询

> ID：14580520
> 
> 赞同：2
> 
> 时间：2013-01-29T10:18:47.807
> 
> 标签：mysql, sql

我想更新表格，但不知道要更新哪一列。这是一个简单的例子

```
Update tablename
set 
if col1='A' then col1='IA',col2='XXX'
if col3='A' then col3='IA', col4='XXX'
where
(col1='A' and col2='UNKNOWN') or (col3='A' and col4='UNKNOWN') 
```

这里要么`col1`或`col3`肯定包含`'A'`

请给我正确的查询

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:44:54.490

试试这个查询

```
UPDATE tablename
SET col1=(CASE WHEN col1 LIKE 'A' THEN col1='IA' ELSE col1 END),
col2=(CASE WHEN col1 LIKE 'A' THEN col2='XXX' ELSE col2 END),
col3=(CASE WHEN col3 LIKE 'A' THEN col3='IA' ELSE col3 END),
col3=(CASE WEHN col3 LIKE 'A' THEN col4='XXX' ELSE col4 END)
WHERE
(col1='A' AND col2='UNKNOWN') OR (col3='A' AND col4='UNKNOWN') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T04:38:20.437

和旧帖子，但对于那些偶然发现这一点的谷歌人。这行不通。例如

```
THEN col1='IA' 
```

将返回一个布尔值并将 col1 设置为`1`ie true 而不是只返回`'IA'`with`THEN 'IA' ELSE col1 END`

为了清楚起见：

```
UPDATE tablename
SET col1=(CASE WHEN col1 LIKE 'A' THEN 'IA' ELSE col1 END),
col2=(CASE WHEN col1 LIKE 'A' THEN 'XXX' ELSE col2 END),
col3=(CASE WHEN col3 LIKE 'A' THEN 'IA' ELSE col3 END),
col3=(CASE WEHN col3 LIKE 'A' THEN 'XXX' ELSE col4 END)
WHERE
(col1='A' AND col2='UNKNOWN') OR (col3='A' AND col4='UNKNOWN') 
```

# r - 在 R 的命令行中获取帮助

> ID：14580527
> 
> 赞同：0
> 
> 时间：2013-01-29T10:19:07.727
> 
> 标签：r

在 R 中，`?plot`为了获得`plot`.

有没有办法在命令行中获得语言内部结构的帮助，例如，关于变量函数参数“...”、不同类型的数组访问`[]`或`[[]]`,`$`等？

```
> help("...")
No documentation for ‘...’ in specified packages and libraries:
you could try ‘??...’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:24:30.197

是的，在反引号中引用函数名称

```
?`[`. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:24:52.380

怎么样`?'$'`，`?'['`？这个对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:25:29.750

对于索引功能，您可以使用：

```
help("[") 
```

这是因为`[`，例如，它本身实际上是一个函数，如果你这样做，你可以看到：

```
x <- 1:5
do.call("[", list(x, 2))
[1] 2 
```

而`...`不是一个功能，所以`help("...")`不会工作。

# android - 长按后如何选择 ListView 项？

> ID：14580531
> 
> 赞同：15
> 
> 时间：2013-01-29T10:19:27.397
> 
> 标签：android, android-listview, selection, onitemclicklistener, contextual-action-bar

我有一个愚蠢的小问题。我已经注册了一个`ListFragment`作为`OnItemClickListener`和`OnItemLongClickListener`它自​​己的`ListView`。

调用事件时`onItemClick`，会启动该项目的详细视图活动的意图，那里没有问题。

当`onItemLongClick`事件发生时，我想完成以下事情：

*   创建 CAB
*   保持选中的长按项目

代码：

```
@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    if(this.cabMode != null)
        return false;
    this.cabMode = getActivity().startActionMode(editModeCallback);
    view.setSelected(true);
    return true;
} 
```

CAB 将显示，但是，选择不会保留在项目中。

一些零碎的东西，以防它们相关：我已经阅读了有关通过调用`view.requestFocusFromTouch()`或使用来解决此问题的信息`listView.setItemChecked()`，但这对我不起作用。此外，列表项的视图是从自定义布局实例化的，但没有附加任何自定义事件侦听器。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T12:35:01.763

这是可能的，但只是勉强......我真的不知道这么简单的事情怎么会变得如此可笑地复杂。

答案的关键可以在这里找到：[Android：ListView selection 后保持蓝色背景](https://stackoverflow.com/questions/12386333/android-keep-blue-background-after-listview-selection)

这归结为定义一个附加样式，`ListView`并将选择模式设置为`AbsListView.CHOICE_MODE_SINGLE`（如链接答案中所述）。

这允许您以编程方式使用 切换选择`Listview.setItemChecked()`。但是，您需要自己跟踪`onItemLongClick`回调中所触摸项目的索引，因为`ListView.setSelection()`不会这样做（至少`ListView.getSelectedItem()`在我所见的情况下总是会返回 -1）。

代码（为简单起见，我的片段实现了所有三个`OnItemClickListener`、`OnItemLongClickListener`和 `ActionMode.Callback`）：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    this.listViewAdapter = new ListViewAdapter();
    this.root = (ListView)inflater.inflate(R.layout.fragment_bookmarks, container, false);
    this.root.setAdapter(this.listViewAdapter);
    this.root.setOnItemClickListener(this);
    this.root.setOnItemLongClickListener(this);
    this.root.setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);
    return this.root;
}

@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    if(this.cabMode != null)
        return false;
    this.selectedPosition = position;
    this.root.setItemChecked(position, true);

    this.root.setOnItemClickListener(null);
    this.cabMode = getActivity().startActionMode(this);
    return true;
} 
```

最后，如果您想在 CAB 关闭时摆脱选择：

```
@Override
public void onDestroyActionMode(ActionMode mode) {
    cabMode = null;
    this.root.setItemChecked(this.selectedPosition, false);
    this.selectedPosition = -1;
    this.root.setOnItemClickListener(this);
} 
```

注册和取消注册`OnItemClickListener`可确保当 CAB 处于活动状态时，您不会意外触发通常与项目关联的操作（如打开详细视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-31T14:20:20.307

我的解决方案：（技巧）

```
final ListView lvMain = (ListView) activity.findViewById(R.id.listTHEMES);
lvMain.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
lvMain.setItemsCanFocus(false);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(activity,
            android.R.layout.simple_list_item_multiple_choice, ArrayTheme);
lvMain.setAdapter(adapter);
lvMain.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                                       int pos, long id) {
        // TODO Auto-generated method stub
        if (lvMain.isItemChecked(pos)){lvMain.setItemChecked(pos,false);}else{lvMain.setItemChecked(pos,true);}
        Log.v(LOG_TAG,"long clicked pos: " + pos);
        //lvMain.setSelection();

        return true;
    }
});
lvMain.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
        //Log.d(LOG_TAG, "itemClick: position = " + position + ", id = " + id);
        if (lvMain.isItemChecked(position)){lvMain.setItemChecked(position,false);}else{lvMain.setItemChecked(position,true);}

    }
}); 
```

# html - html：垂直放置img，中间没有空格

> ID：14580535
> 
> 赞同：4
> 
> 时间：2013-01-29T10:19:33.720
> 
> 标签：html, image

我将图像彼此垂直放置。我希望他们彼此相撞，但我在他们之间找到了一条空白线。我该如何摆脱这条线？我试过margin = 0px。我也试过不把它们放在一个div中。

（下图来自W3编辑器）

```
<div>
    <img border="0" src="/images/pulpit.jpg" width="304" height="228" style = "margin:0px;">
</div>
<div>
    <img border="0" src="/images/pulpit.jpg" width="304" height="228" style = "margin:0px;">
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:23:08.347

添加 css 属性`display:block`应该可以解决问题。我还删除了填充和边距以消除任何其他样式。所有样式都应该移动到 CSS 块而不是内联。

```
img {
  padding: 0;
  margin: 0;
  display: block;
}
```

```
<div>
  <img border="0" src="https://dummyimage.com/200x100/1ff/100">
</div>
<div>
  <img border="0" src="https://dummyimage.com/200x100/100/1ff">
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T11:41:20.493

做这个。如果您使用表格来显示图像，它会起作用。

```
<style type="text/css">

table
{
border-collapse: collapse; /* 'cellspacing' equivalent */
}
table tr,
table td
{
padding:0;
}
</style>

<table>
<tr>
<td>
<img src="side1.jpg" />

</td>
</tr>
<tr>
<td>    
<img src="side2.jpg" />
</td>
</tr>
</table> 
```

它适用于垂直和水平图像。就像拼图一样。问候。

# php - 浏览器中的源代码和 file_get_contents 给出不同的代码

> ID：14580538
> 
> 赞同：0
> 
> 时间：2013-01-29T10:19:39.313
> 
> 标签：php, javascript, gmail

我从浏览器和通过 file_get_contents 获取了[http://gmail.com](http://gmail.com)源代码，两者都是不同的。

如何使用 php 或 js 或任何其他编程语言获得在浏览器中显示的相同源代码（但我更喜欢 php 或 js）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:26:08.953

试试这个库[Simple HTML Dom Parser](http://sourceforge.net/projects/simplehtmldom/)。

并使用

```
$html = file_get_html('http://www.google.com/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:22:02.043

浏览器显示生成的源代码，`google.com`而 php 只获取写在 google 的索引文件中的文本，当然是 Javascript！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:01:07.813

gmail.com 几乎肯定会根据发出请求的浏览器进行用户代理嗅探来更改输出（尽管它被认为是不好的做法，尽管谷歌会因为这样做而惩罚其他人）。所以我的猜测是，即使在两个不同的浏览器之间，你也不太可能获得相同的源代码，更不用说使用`file_get_contents`.

如果您改用 cURL 库并欺骗 UA 字符串，您可能会有所收获，但我什至不会指望它完全正常工作。

但即使你这样做并且它有效，gmail.com 作为一个站点确实严重依赖于动态加载的内容。甚至部分脚本仅在需要时才加载。我看不出将gmail站点加载到PHP脚本中的任何可能的方式可能对远程有用。即使您确实按照自己的意愿加载了它，那又如何呢？他们不断地更改代码，因此尝试编写一个程序来解析 HTML 代码将是徒劳和沮丧的练习。

我想真正的问题是你想在这里实现什么？如果你想从 gmail 加载你的邮件，他们会为这类事情提供适当的 API，这将比尝试解析 gmail 站点本身更好、更可靠。我想不出你想要这样做的许多其他原因，所以也许你应该研究一下 API。

可以在此处下载用于 PHP 的 Gmail API：[http ://code.google.com/p/gmail-api/downloads/detail?name=gmail-api.v0.1.php](http://code.google.com/p/gmail-api/downloads/detail?name=gmail-api.v0.1.php)

# python - 在 python 中使用 bing 或 google API 获取位置坐标

> ID：14580540
> 
> 赞同：3
> 
> 时间：2013-01-29T10:19:42.283
> 
> 标签：python, google-maps, coordinates, bing-maps, nltk

这是我的问题。我有一个示例文本文件，通过爬取各种 html 页面来存储文本数据。此文本包含有关各种事件及其时间和地点的信息。我想获取这些位置的坐标。我不知道如何在 python 中做到这一点。我正在使用 nltk 来识别此示例文本中的命名实体。这是代码：

```
import nltk

with open('sample.txt', 'r') as f:
    sample = f.read()

sentences = nltk.sent_tokenize(sample)
tokenized_sentences = [nltk.word_tokenize(sentence) for sentence in sentences]
tagged_sentences = [nltk.pos_tag(sentence) for sentence in tokenized_sentences]
chunked_sentences = nltk.batch_ne_chunk(tagged_sentences, binary=True)

#print chunked_sentences
#print tokenized_sentences
#print tagged_sentences

def extract_entity_names(t):
    entity_names = []

    if hasattr(t, 'node') and t.node:
        if t.node == 'NE':
            entity_names.append(' '.join([child[0] for child in t]))
        else:
            for child in t:
                entity_names.extend(extract_entity_names(child))

    return entity_names

entity_names = []
for tree in chunked_sentences:
    # Print results per sentence
    # print extract_entity_names(tree)

    entity_names.extend(extract_entity_names(tree))

# Print all entity names
#print entity_names

# Print unique entity names
print set(entity_names) 
```

示例文件是这样的：

> 考文特花园的波西米亚人
> 
> 时间：2013 年 1 月 18 日（不同日期），晚上 7:30 地点：伦敦考文特花园，约翰·科普利（John Copley）常年流行的皇家歌剧院作品普契尼（Puccini）的《波西米亚人》（La bohème）在本季两次中的第一次重演，恰逢圣诞节期间。马克·埃尔德爵士指挥罗兰多·维拉宗饰演鲁道夫，麦加·科瓦列夫斯卡饰演咪咪。一个寒冷的平安夜，咪咪在巴黎拉丁区遇到了诗人鲁道夫（Dmytro Popov 于 1 月 5 日至 18 日演唱该角色）。在她的蜡烛熄灭后，他们在黑暗中摸索，坠入爱河。鲁道夫和另外三个小伙子住在一起：哲学家科林（Nahuel di Pierro/Jihoon Kim，1 月 18 日）、音乐家 Schaunard（大卫比齐奇）和喜欢穆塞塔（Stefania Dovhan）的画家马塞洛（奥登艾弗森）。

我想从此文本中获取伦敦考文特花园的坐标。我该怎么做 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-14T08:30:54.337

自 2013 年 9 月起，Google Maps API v2[不再有效](https://developers.google.com/maps/articles/geocodingupgrade)。这是一个用于 API v3 的优秀 @jimhark 代码的更新版本（我省略了这`__main__`部分）：

```
import urllib
import simplejson

googleGeocodeUrl = 'http://maps.googleapis.com/maps/api/geocode/json?'

def get_coordinates(query, from_sensor=False):
    query = query.encode('utf-8')
    params = {
        'address': query,
        'sensor': "true" if from_sensor else "false"
    }
    url = googleGeocodeUrl + urllib.urlencode(params)
    json_response = urllib.urlopen(url)
    response = simplejson.loads(json_response.read())
    if response['results']:
        location = response['results'][0]['geometry']['location']
        latitude, longitude = location['lat'], location['lng']
        print query, latitude, longitude
    else:
        latitude, longitude = None, None
        print query, "<no results>"
    return latitude, longitude 
```

有关参数和其他信息的完整列表，请参阅[官方文档](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T11:37:24.660

你真的有两个问题：

1.  如何提取位置文本（或潜在位置文本）。
2.  如何通过使用位置文本调用地理编码服务来获取位置（纬度、经度）。

第二个问题我可以帮忙。（但请参阅下面的编辑以获取有关您的第一个问题的一些帮助。）

使用旧的 Google Maps API（仍在工作），您可以将地理编码降低到一行（一条丑陋的行）：

```
def geocode(address):
    return tuple([float(s) for s in list(urllib.urlopen('http://maps.google.com/maps/geo?' + urllib.urlencode({'output': 'csv','q': address})))[0].split(',')[2:]]) 
```

查看[Google Maps API 地理编码文档](https://developers.google.com/maps/documentation/geocoding/)：

这是可读的 7 行版本加上一些包装代码（从命令行调用时，请记住将地址括在引号中）：

```
import sys
import urllib

googleGeocodeUrl = 'http://maps.google.com/maps/geo?'

def geocode(address):
    parms = {
        'output': 'csv',
        'q': address}

    url = googleGeocodeUrl + urllib.urlencode(parms)
    resp = urllib.urlopen(url)
    resplist = list(resp)
    line = resplist[0]
    status, accuracy, latitude, longitude = line.split(',')
    return latitude, longitude

def main():
    if 1 < len(sys.argv):
        address = sys.argv[1]
    else:
        address = '1600 Amphitheatre Parkway, Mountain View, CA 94043, USA'

    coordinates = geocode(address)
    print coordinates

if __name__ ==  '__main__':
    main() 
```

解析 CSV 格式很简单，但是 XML 格式有更好的错误报告。

## 编辑 - 帮助您解决第一个问题

我看着`nltk`。这不是微不足道的，但我可以推荐[自然语言工具包文档，第 7 章 - 从文本中提取信息](http://nltk.org/book/ch07.html)，特别是`7.5 Named Entity Recognition`. 在本节的最后，他们指出：

> NLTK 提供了一个已经被训练来识别命名实体的分类器，可以通过函数 nltk.ne_chunk() 访问。如果我们设置参数 binary=True ，那么命名实体就被标记为 NE；否则，分类器会添加类别标签，例如 PERSON、ORGANIZATION 和 GPE。

您正在指定`True`，但您可能需要类别标签，因此：

```
chunked_sentences = nltk.batch_ne_chunk(tagged_sentences) 
```

这提供了类别标签（命名实体类型），看起来很有希望。但是在你的文本和一些带有位置的简单短语尝试了这个之后，很明显需要更多的规则。阅读文档以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:08:27.973

您要执行的操作称为地理编码操作。当然，您必须自己在文本信息块中提取“位置”信息。

您可以使用以下服务执行此操作：

*   必应地图：http: [//msdn.microsoft.com/en-us/library/ff701714.aspx](http://msdn.microsoft.com/en-us/library/ff701714.aspx)
*   谷歌地图：[https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)
*   诺基亚地图：http: [//developer.here.net/javascript_api_explorer](http://developer.here.net/javascript_api_explorer)

请记住，您应该考虑可能适用于您的许可证，具体取决于您的用例。

# c# - 覆盖 PictureBox 的 OnMouseClick 作为成员

> ID：14580541
> 
> 赞同：2
> 
> 时间：2013-01-29T10:19:50.253
> 
> 标签：c#, image, forms, picturebox, onmouseclick

我目前有一个矩阵，其中包含我的类的一个成员，称为`furniture`
在这个`Furniture`我有一个 PictureBox 成员，我想覆盖它的 OnMouseClick 方法
我在哪里做呢？
在`Furniture`类代码中？
覆盖此类成员的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:22:36.170

如果您的意思是*覆盖*没有其他地方可做，那么在您的自定义类中：

创建一个`MyPictureBox`从 original 派生的新类`PictureBox`。

例子：

```
public class MyPictureBox : PictureBox {

    public override void OnMouseClick(...)  {
       //...
    }

} 
```

然后，自然地，在你的表单中使用*这个*对象：

```
Furniture.Controls.Add(new MyPictureBox ()); 
```

不知道什么是*真正*`Furniture`的控制，所以这只是理论上的例子。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:21:41.803

如果你只想检测点击，你只需要为 PictureBox.MouseDown 添加一个处理程序

您可以在设计器中执行此操作 - 找到图片框，检查其属性并选择“事件”，然后输入 MouseDown 处理程序的名称。

请注意，这与实际覆盖 OnMouseClick 不同，但我怀疑您并不想这样做......

您想要覆盖 OnMouseClick 的原因是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:21:44.993

请看下面的代码。

```
public class DerivedPictureBox: PictureBox
{
    protected override void OnMouseClick(MouseEventArgs e)
    {
        base.OnMouseClick(e);
    }
} 
```

每当您在应用程序中使用 DerivedPictureBox 时，它都会执行这个派生的 OnMouseClick 方法。*

# javascript - PhoneGap : 如何在 Google Play 商店上传 APK 文件

> ID：14580543
> 
> 赞同：2
> 
> 时间：2013-01-29T10:19:57.233
> 
> 标签：javascript, jquery, html, css, cordova

我有一个小的 android 应用程序。我从 phonegap.com 制作了 APK 文件。

现在我尝试将该 APK 文件上传到 Google Play 商店。但它显示错误：

```
Upload failed

You need to use a different package name because "com.phonegap.www" already exists in Google Play. 
```

我没有得到 com.phonegap.www 包在哪里的问题......我的应用程序中没有这个包结构..www 包在资产文件夹中。

请给我一些可行的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:20:47.857

你的包名是什么？在 phonegap 构建网站上单击您的应用程序，转到设置选项卡，向下滚动到配置并检查您的包名称是什么。将其设置为 com.yourCompanyName.yourAppName 并重新构建您的应用程序。

如果您通过 Eclipse 构建，请在 AndroidManifest.xml 中设置您的包名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T11:26:27.210

虽然我对 Eclipse 没有任何经验，但我能够通过在 Android Studio 中生成“签名发布”APK（根据[http： //comments.gmane.org/gmane.comp.handhelds.phonegap/69299](http://comments.gmane.org/gmane.comp.handhelds.phonegap/69299)）。据我所知，AndroidManifest 中的文本与我所拥有的没有任何不同，但生成构建变体确实有效。此外，尝试上传可调试版本会产生以下错误，仅供参考： `You uploaded a debuggable APK. For security reasons you need to disable debugging before it can be published in Google Play.`

只是为了记录我尝试解决问题的经验：在转向 Android Studio 之前，我多次尝试通过 Cordova 命令行工具和 PhoneGap Build 来解决。我确认包名不在 `com.phonegap.www`，`config.xml``AndroidManifest.xml`和其他人（检查以确保文本不在我的项目中的任何位置 - 它不是）。如果该包名称包含在项目的某个缓存版本中，我多次删除、重新添加和重建 Android 平台，每次尝试不同的调整；在 PhoneGap Build 上使用这些更新的版本并没有产生在 Google Play 上被接受的 APK。我还删除了PhoneGap Build 项目并重新创建，以确保我没有不小心在某处输入有问题的包名称——我没有。此外，请注意，截至 2016 年 4 月，我在 PhoneGap Build 的项目中没有“配置”选项，因此无法更改包名称。

除了上面提到的以外，我还没有尝试过其他选择，仅供参考，所以不能说这是否是解决这个问题的最快或最有效的方法。我很好奇如何避免它开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T15:09:44.430

我有这个问题。您必须打开 config.xml 文件并更改顶部的小部件 ID，包括它的第二部分和第三部分。

例如，com.phonegap.helloworld 需要更改为 com.mycompany.myappname。您不能只更改最后一部分，因为根据我的经验，这不起作用。

# html - 输入一个字符后光标仍停留在字符上的字体系列

> ID：14580544
> 
> 赞同：1
> 
> 时间：2013-01-29T10:19:59.393
> 
> 标签：html, fonts, font-face, font-size, webfonts

如果您注意到这个字体系列 - [http://www.fontsquirrel.com/fonts/CAC-Champagne](http://www.fontsquirrel.com/fonts/CAC-Champagne)，“T”几乎与“U”的 1/4 重叠。当我使用@font-face 包含此字体系列并键入时，光标键入 T 但仅保留在其上。 ![网络浏览器上的光标已变为箭头](../Images/b74d950be7e61d4a3b68d9eb78a37799.png)

这会导致问题，当我将此文本复制到宽度为“auto”的跨度中时，跨度不会显示完整的“T”，而是直到箭头所在的位置。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:26:59.020

这是字体的一个特点，在脚本字体中并不少见。例如，字母“T”的前进宽度（准确地说是 1,146 个单位）比字形的宽度，即其边界框的宽度（即 1,786 个单位）要小得多。这是故意的，是使结果类似于手写文本的设计的一部分。

对于包含此字体文本的内联元素，请使用一些右填充来补偿效果。虽然边界框向右延伸的效果主要是大写字母的字形特征，通常不会出现在单词的末尾，但它也会出现在小写字母（例如“f”）中。根据以下简单实验，“0.25em”的值似乎是合适的：

```
<span style="font-family: CAC Champagne; font-size: 32pt;
border: solid red 1px; padding-left: 0.25em;
padding-right: 0.25em;">f</span> 
```

# android - 在没有 Google 的 YouTube 应用的情况下使用 YouTube Android API？

> ID：14580547
> 
> 赞同：5
> 
> 时间：2013-01-29T10:20:01.893
> 
> 标签：android, youtube-api

我们正在为自定义 Android 设备开发 YouTube 应用（使用 Android YouTube API）。现在的问题是我们的设备上没有预装谷歌的 YouTube 应用程序（这是使用这些 API 的每个要求）。以下是我的问题：

1.  有什么方法可以在不安装 Google 的 YouTube 应用的情况下使用这些 API？

2.  如果没有，我们是否可以将 YouTube App apk 与我们的应用程序捆绑在一起，并在我们的应用程序首次运行时安装 Google 的应用程序？这种方法可行吗？

3.  谷歌需要什么样的权限，我们如何获得它？

**请注意**：我们不想使用原生 Android 视频播放器，也不想在 Web 视图中嵌入 YouTube 播放器。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:38:22.413

YouTube API 用于为您的应用添加 YouTube 播放功能，这意味着您将能够在应用界面中嵌入 YouTube 视频。是的，它确实需要安装官方 YouTube 客户端，因为这将为您提供播放代码和播放视频的能力。但是，您不需要运行它。该视频将在您的应用程序中。

我还没有检查过，但是假设这[`com.google.android.youtube.player.YouTubePlayerView`](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView)是一个在 YouTube 官方 API 中实现的 View 是合乎逻辑的，它将使用 YouTube API 注入您的应用程序，这将呈现视频。

为了呈现视频并在您的应用中播放，您需要官方 YouTube 应用的支持。就那么简单。

[YouTube API 文档](https://developers.google.com/youtube/android/player/)确实提到它将在运行 Android 2.2 (Froyo) 的设备上可用。

因此，为了使用 API，我们必须需要 YouTube 应用的支持。

关于你的第二个问题，请参考[这篇文章](https://stackoverflow.com/a/5283856/1450401)。

首先，我们用来支持 YouTube API 的 Google 的 YouTube 应用（4.2.16）不是开源的。这是一个免费的应用程序，但这并不意味着它是开源的。谷歌还没有公布最新的 YouTube 应用的源代码，YouTube API 也不是开源的。此外，这是一个实验项目。

你在哪里见过这两个项目的源代码吗？

也许他们会提出更多的修改和功能，但我认为没有你所说的解决方法。

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T11:56:46.183

这是一个新的答案，这在 webview 中使用了 iFrame

[参考](https://github.com/PierfrancescoSoffritti/Android-YouTube-Player)

youtube api 支持 iFrame

# c++ - 将 Mat 数据复制到另一个 Mat

> ID：14580548
> 
> 赞同：2
> 
> 时间：2013-01-29T10:20:02.473
> 
> 标签：c++, opencv

我需要将我的图像数据从一个 Mat 复制到另一个 Mat。我的代码如下所示

```
Mat src; // Source image
Mat res(1024,768,CV_8UC3); //Same width and height as source
uchar *dest=src.data;
res.data=dest; 
```

但是我的目标图像失真了。是我的编码问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:49:25.123

> 但是我的目标图像失真了。是我的编码问题吗？

如果宽度和高度相同，那么问题似乎在于通道数（每个像素的字节数）。尝试更改`CV_8UC3`为`CV_8UC1`.

而且您的代码不会复制*数据*，它会复制*指针*。阅读有关[`memcpy`](http://www.cplusplus.com/reference/cstring/memcpy/).

实际上，您应该使用以下方法`clone`：[`cv::Mat`](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)

```
// returns deep copy of the matrix, i.e. the data is copied
    Mat clone() const; 
```

# java - 添加 ActiveMQ 代理

> ID：14580550
> 
> 赞同：1
> 
> 时间：2013-01-29T10:20:09.830
> 
> 标签：java, jms, activemq

我希望我的 ActiveMQ 有两个活跃的代理。

一个是主要的，第二个在第一个不可用时采取行动。

如何在 activemq.xml 文件中定义这个代理？

我尝试通过简单地复制并粘贴默认代理并更改端口和名称来添加代理，但是在尝试运行 activemq 时会引发异常。

此外，我如何知道哪个代理正在积极管理我队列中传入的传出消息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:09:33.837

当主代理不可用时，通过在客户端上使用故障转移协议，消息将被路由到从代理，但请确保 randomize=false。

例如：故障转移:(tcp://master:61616,tcp://slave:61616)?randomize=false

当主代理失败并且消息仍在主代理的数据存储中等待时，要使用这些等待消息，请将从代理和主代理配置到相同的 JDBC 数据存储。

通过将主代理和从代理配置为相同的 JDBC 数据存储，您的主代理将锁定 JDBC 数据存储，而从代理将仅在主代理失败时才变为活动状态，这将释放对数据存储的锁定。

确保主代理在上述配置中的从代理之前启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:40:15.223

您可以使用JMS 客户端中的**failover://协议来实现这一点。**有关如何配置故障转移协议的详细信息，请参阅[故障转移传输参考页面。](http://activemq.apache.org/failover-transport-reference.html)

这是ActiveMQ 3.x 中的*可靠：//*协议和大于 3.x 的 ActiveMQ 版本中的*故障转移：//*

这是一篇好[文章](http://java.dzone.com/articles/new-activemq-failover-and)

# xcode - Xcode 4.6 和 clang 错误

> ID：14580555
> 
> 赞同：1
> 
> 时间：2013-01-29T10:20:19.907
> 
> 标签：xcode, google-drive-api, llvm, clang

我刚刚将 Xcode 升级到 4.6，现在我的项目不再构建。

这里的错误信息：

```
clang: error: unknown warning option '-Wno-pragmas'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

![错误信息](../Images/cf840a8771353e10a326060f2f061c5d.png)

谢谢。

## 更新

我不知道它是否是一个重要的标志，但如果我从 GTLTouchStaticLib 的 Build Settings 中删除这个标志，我可以在没有错误消息的情况下编译：

```
-Wno-unknown-pragmas 
```

在**其他警告标志**中。

在另一个构建之前需要清理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:35:05.233

The error is actually pretty clear, isn't it? Xcode calls `clang` with the option `-Wno-pragma` and `clang` complains that it does not know any such option. Since Xcode is not setting this option by default, you must have manually added this option in the build settings. If you don't really need, just disable/remove it.

What is a bit strange is that `clang` actually does know this option, at least on my system (just like `clang` also knows `-Wno-unknown-pragmas`). So you may want to go to the build log and look up the exact `clang` command line call that Xcode performs. In the build log, you can select the failed build and expand the failed call, which will you give the exact command line call that Xcode performed in attempt to build a source file.

# ios - iOS 中的聊天功能实现

> ID：14580559
> 
> 赞同：0
> 
> 时间：2013-01-29T10:20:30.737
> 
> 标签：ios, windows, livechat

我想在我的应用程序中实现聊天功能。我发现 XMPPframework 看起来像我正在寻找的东西。由于它使用 xmpp 协议来运行聊天，所以它会安装在 windows 服务器上吗？

我们团队中的服务器人员也联系我使用使用 websockets 的 signalr 目标 c 框架。由于服务器是 Windows，我需要使用 sigar 目标 c 框架吗？Signalr 可以[在 github](https://github.com/DyKnow/SignalR-ObjC)中找到。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:49:38.410

客户端和服务器是独立的。如果您的客户端在 iOS 上运行，请不要担心。服务器可以用任何语言实现，只要它提供 XMPP 协议中定义的服务即可。

实际上，您不必自己实现服务器端。已经有很多服务器实现通过 XMPP 与客户端进行通信。最常用的是[***Openfire***](http://www.igniterealtime.org/projects/openfire/)。

在客户端，您需要做的就是向服务器发送 XML 消息并从服务器接收 XML 消息。显然，有人已经处理好了。也有 XMPP 客户端实现。由于我是 Windows Phone 开发人员，我更喜欢[Matrix](http://www.ag-software.de/matrix-xmpp-sdk/)。它提供了与 Openfire 服务器通信的简单客户端类。我相信您会发现 iOS 与 Matrix 等效。

祝你的项目好运！

# c# - 为 PictureBox 鼠标按下添加事件

> ID：14580560
> 
> 赞同：2
> 
> 时间：2013-01-29T10:20:33.060
> 
> 标签：c#, events, event-handling

我想让这个活动发挥作用：

```
private void pictureBox1_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
{
    //code
} 
```

我知道我必须为此添加一个事件，但我无法在任何地方找到语法。如何添加此活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T10:23:00.670

您必须将事件处理程序分配给事件，通常在表单的构造函数中：

```
class MyForm 
{ 
    PictureBox pictureBox1;

    public MyForm()
    {
        ...
        InitializeComponent(); 
        ...
        pictureBox1.MouseDown += new MouseEventHandler(pictureBox1_MouseDown);
        ... 
    }
} 
```

如果您通过 Visual Studio 中的表单设计器添加控件，它将自动生成`InitializeComponent()`创建控件的方法（调用其构造函数），因此请确保您在调用`InitializeComponent()`.

您还可以通过表单设计器将事件处理程序分配给事件：选择控件，右键单击它，选择*属性*，单击 flash 图标（*事件*），找到所需的事件（`MouseDown`）并双击它 - 事件处理程序方法将分配给该事件（您可以检查代码`InitializeComponent()`）。现在您只需在事件处理程序的主体中编写代码。

# iphone - 倒计时模式下的 UIDatePicker 不支持调整大小？

> ID：14580565
> 
> 赞同：2
> 
> 时间：2013-01-29T10:20:41.113
> 
> 标签：iphone, ios

我有一个`UIDatePicker`倒计时模式。`UIDatePicker`默认不支持自动调整大小。所以我手动将框架设置为横向调整大小

```
- (void) resizeDatePicker: (UIInterfaceOrientation)orientation
 {
    if (UIInterfaceOrientationIsPortrait(orientation)) 
      {
    self.timePicker.frame = CGRectMake(0, 44, 320, 216);
      }
    else 
     {
    self.timePicker.frame = CGRectMake(0, 44, 480, 162);
     }
  } 
```

它可以在除倒数计时器之外的所有其他模式下工作。在倒计时模式下，它没有清楚地显示。

![横向UIDatePicker](../Images/3e55c28ce8872957ab0a3d3557440700.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:59:05.547

解决了我的问题..我在这里发布我的答案..可能会帮助其他人。在倒计时模式下，您不能直接调整框架的大小。所以我将日期选择器添加为视图的子视图，然后将**CGAffineTransformMakeScale**应用于视图。然后我也将框架设置到适当的位置。

```
if (UIInterfaceOrientationIsPortrait(orientation)) 
{

    self.pickerView.transform = CGAffineTransformIdentity;
    self.pickerView.frame =CGRectMake(0,40, 320, 216);

}
else 
{

    self.pickerView.transform = CGAffineTransformMakeScale(0.65, 0.65);
    self.pickerView.frame =CGRectMake(0,40, 480, 140);

} 
```

它将选择器的大小减少 65%。PickerView 是包含选择器的视图。
以下问题帮助我解决了这个问题

1.  [如何更改 UIPickerView 高度](https://stackoverflow.com/questions/573979/how-to-change-uipickerview-height)
2.  [我们可以在 iPhone 中调整 UIDatePicker 视图的大小吗](https://stackoverflow.com/questions/1173485/can-we-resize-the-uidatepicker-view-in-iphone)
3.  [有没有办法调整 UIPickerView 的大小，以便我可以在我的应用程序中心完全看到它？](https://stackoverflow.com/questions/4941808/is-there-any-way-to-resize-the-uipickerview-so-that-i-can-see-completely-it-in-c)

# c - 制作文件：流不进入if循环

> ID：14580569
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:20:57.240
> 
> 标签：c, linux, makefile, proc

我正在尝试将大量文件（.pc pro*c 代码、c 代码和 .h 文件到一个 exe 中）编译成一个 exe。

示例代码。

请注意，制表符会相应地放置。但是在发布时在此处删除。

对不起，试图修复缩进..但是现在会做得更好。

**请注意，行首的 T 代表一个制表符。**

```
build :$(OBJS)

T @if [ "$(EXE)" = "abc" ]; then \

T echodo  `command`\

T elif [ "$(ORA_CLIENT_LIB)" = "shared" ]; then \

T echodo $(CC) $(LDFLAGSSHRD) $(LIBPATHS)  -m64 -o $(EXE) $(OBJS) `cat $(ORACLE_HOME)/rdbms/lib/sysliblist ` $(LIBHOME)/libclntsh.so; \

T else \

T echodo $(CC) $(LIBPATH) -m64 -o $(EXE) $(OBJS) -L$(LIBPATH) $(PROLDLIB) $(AMOLIB) $(LIBHOME)/libclntsh. a ;\

T fi 
```

变量 ORA CLient Lib 设置为共享。而且，代码仍然没有进入 elif 块。我错过了什么吗？

当我运行make时，我收到错误...

```
------/bin/sh: -c: line 4: syntax error: unexpected end of file
------make: *** [build] Error 2 
```

所有 .o 文件都已创建，但 exe 不是。我不明白缺少什么。echodo 是 Oracle bin 的文件。由于我正在编译 ProC 代码，因此它必须具有一定的相关性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:33:27.500

I was expecting to see `\`s on all of the lines except the last like this:

```
build: $(OBJS)
        @if [ "$(EXE)" = "abc" ]; then \
        echo --------; \
        elif [ "$(ORA_CLIENT_LIB)" = "shared" ]; then \
        echodo $(CC) $(LDFLAGSSHRD) $(LIBPATHS)  -m64 -o $(EXE) $(OBJS) `cat $(ORACLE_HOME)/rdbms/lib/sysliblist ` $(LIBHOME)/libclntsh.so; \
        else \
        echodo $(CC) $(LIBPATH) -m64 -o $(EXE) $(OBJS) -L$(LIBPATH) $(PROLDLIB) $(AMOLIB) $(LIBHOME)/libclntsh.a; \
        fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:29:57.523

我会继续冒险猜测......

我猜它会`echodo`回显它的所有参数，并将第一个参数作为命令执行，其余参数作为它执行的命令的参数。

然而在行

```
echodo  -------- 
```

它回显然`--------`后*尝试执行它*。而且由于您不太可能有一个名为的命令，因此`--------`您会收到错误消息。

如果要回显字符串`--------`，请使用普通的普通`echo`命令。

# performance - if-else 比 switch 快，为什么？（在 ActionScript3 中）

> ID：14580570
> 
> 赞同：2
> 
> 时间：2013-01-29T10:21:04.493
> 
> 标签：performance, actionscript-3, if-statement, switch-statement

测试了以下内容：

```
 var timer:int = getTimer();
        trace(timer);

        for ( var g:int = 0; g < 10000000; ++g)
        {
            var mod0:int = g % 10;
            var sum0:String = "";

            switch(mod0)
            {
                case 0: sum0 = "0"; break;
                case 1: sum0 = "1"; break;
                case 2: sum0 = "2"; break;
                case 3: sum0 = "3"; break;
                case 4: sum0 = "4"; break;
                case 5: sum0 = "5"; break;
                case 6: sum0 = "6"; break;
                case 7: sum0 = "7"; break;
                case 8: sum0 = "8"; break;
                case 9: sum0 = "9"; break;
                default: break;
            }
        }

        timer = getTimer();
        trace(timer);

        for ( var h:int = 0; h < 10000000; ++h)
        {
            var mod1:int = h % 10;
            var sum1:String = "";

            if (mod1 == 0)      sum1 = "0";
            else if (mod1 == 1) sum1 = "1";
            else if (mod1 == 2) sum1 = "2";
            else if (mod1 == 3) sum1 = "3";
            else if (mod1 == 4) sum1 = "4";
            else if (mod1 == 5) sum1 = "5";
            else if (mod1 == 6) sum1 = "6";
            else if (mod1 == 7) sum1 = "7";
            else if (mod1 == 8) sum1 = "8";
            else if (mod1 == 9) sum1 = "9";
        }

        timer = getTimer();
        trace(timer); 
```

计时器给出： 221 443 636 ，这意味着`switch`需要 222 毫秒和`if-else`193 毫秒，为什么？
对于我在 C++ 中所知道的，`switch`它更快，因为它编译为跳转表汇编代码，在 AS3 中不应该相同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:53:31.717

这里有一个非常彻底的了解：http: [//jacksondunstan.com/articles/793](http://jacksondunstan.com/articles/793)

TL;DR：actionscript 编译器有点糟糕。此外，AS3 中的 switch 语句比例如 C/C++ 复杂得多，因为它可以在非整数类型上工作。

# jquery - 来自 SQL 的 ColdFusion ValueList

> ID：14580573
> 
> 赞同：1
> 
> 时间：2013-01-29T10:21:15.030
> 
> 标签：jquery, sql, coldfusion

我正在尝试在 ColdFusion 中创建一个值列表。基本上，我希望用户能够将他们的乐队成员输入到各个字段中。然后在提交时，任何存在的值都作为字符串而不是单个文本值存储到我的数据库中。从数据库中检索它时，运行它并使用逗号作为分隔符并再次单独拆分值。在纸上和我的脑海中，这听起来很简单，但我无法理解它。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:10:57.180

如果您真的想使用该解决方案，您可以简单地使用`listToArray`+`cfloop`或只是`cfloop`获取个人名称：

```
<CFSET list_names = "John ,Luke, Bob" /> <!--- this should be the value from your db field --->
<CFSET array_names = listtoarray(list_names) />

<CFLOOP array="#array_names#" index="name">
    #name# is in the band<br />
</CFLOOP> 
```

或者直接使用列表并循环它：

```
<CFSET list_names = "John ,Luke, Bob" /> <!--- this should be the value from your db field --->

<CFLOOP list="#list_names#" index="name">
    #name# is in the band<br />
</CFLOOP> 
```

但是......我会将乐队成员的姓名保存在单独的表格中 - 例如：

表`bands`：

```
| id | bandname  |
+----+-----------+
| 1  | The Hives | 
```

表`bands_members`：

```
| band_id | name                   |
+---------+------------------------+
|   1     | Howlin’ Pelle Almqvist |
|   1     | Nicholaus Arson        |
|   1     | Vigilante Carlstroem   | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:55:09.480

为兜售我自己的（免费和开源）产品而道歉，DataMgr 有一些东西可能对这种情况特别有吸引力。

您可以传入一个逗号分隔的列表，它会将列表适当地保存为相关表中的行。

所以，你可以有一个“bands”表，一个“players”表，一个连接它们的“band2players”表。如果是这样，您可以有一个可用玩家复选框（称为“玩家”）。

然后，当您提交乐队时，您可以在 Form.id 中启动一个 band_id（例如）并执行以下操作：

```
 <cfset Application.DataMgr.SaveRelationList("band2players","band_id",Form.id,"player_id",Form.players)> 
```

[http://www.bryantwebconsulting.com/docs/datamgr/save-many-to-many-relationships.cfm](http://www.bryantwebconsulting.com/docs/datamgr/save-many-to-many-relationships.cfm)

通过一些额外的工作，您甚至可以在 DataMgr 中设置一个“关系字段”，以使 DataMgr 的行为就像“bands”表有一个“players”字段一样，即使它实际上只是在后台访问“bands2players”数据. 这将允许您使用逗号分隔的列表进行保存和检索。如果您想要一个文本区域而不是复选框列表，您甚至可以使用名称而不是 id。

[http://www.bryantwebconsulting.com/docs/datamgr/lists.cfm](http://www.bryantwebconsulting.com/docs/datamgr/lists.cfm)

# c# - 扩展 SafeHandle 以在设置句柄时自动调用函数

> ID：14580574
> 
> 赞同：1
> 
> 时间：2013-01-29T10:21:16.403
> 
> 标签：c#, interop, pinvoke, reference-counting

有没有办法实现一个 SafeHandle 类，当它的句柄字段设置为有效值时，它可以自动调用一个函数？（与销毁 SafeHandle 时调用 Release 抽象函数的方式非常相似）

每当我从本机 dll 中引用一个句柄时，我都需要手动调用本机 dll 函数来增加句柄的引用计数。

# javascript - 在查看页面源中隐藏 URL

> ID：14580584
> 
> 赞同：2
> 
> 时间：2013-01-29T10:21:39.197
> 
> 标签：javascript, html

我想从查看页面源代码中隐藏我的 html 页面中的特定 url。
这是我的html页面：

```
a href="http://.[myservername]/manifest.f4m"/> " 
```

如果我右键单击并查看页面源，则 url 是可见的，但我不希望 url( `http://.[myservername]/manifest.f4m`) 在右键单击时可见。是否可以从查看页面源中隐藏 url，或者可以从页面源中删除
整个标签？`<a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:23:33.663

简短的回答：没有。

您无法隐藏必须由浏览器读取的信息。

您可以在 javascript 中使用代码混淆，但在去混淆或解释后仍然可以访问该地址。

所以不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:43:27.557

正如其他答案所指出的那样；隐藏 URL 是不可能的 - 可以稍微混淆它，但是分析页面中的脚本代码仍然可以访问您的 URL。

如果您只是不想让用户直接访问图像或其他内容，这可能会有一些用处，但如果您真的需要安全性，这在任何情况下都是灾难性的。- 因为那些有兴趣从你隐藏的资源中获利的人会花时间绕过你的混淆障碍。

您越接近您想要的就是不隐藏 URL - 是在服务器端生成一个加密令牌，该令牌将允许从您的服务器一次获取提供者资源（之后，令牌被取消）。

同样，它在某些情况下会有所帮助，但您无法阻止客户端将获取的资源保存到他的本地机器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:25:35.040

不，我认为隐藏 URL 是不可能的。浏览器需要知道 URL，否则它无法加载图像或构建可点击的链接或其他任何东西。所以 URL 需要在那里。

您可以做的是混淆 URL。使其对机器可读，但对人类不可读。例如通过使用 Base64 编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:22:38.563

不，你不能。除非您想重新编码客户的浏览器

# c# - WPF ，单击 TextBox 应检查 RadioButton

> ID：14580589
> 
> 赞同：2
> 
> 时间：2013-01-29T10:21:47.380
> 
> 标签：c#, wpf, textbox, radio-button

我有一个`RadioButton`和一个`TextBox`内部`StackPanel`的，如下所示：

```
 <StackPanel Orientation="Horizontal">
        <RadioButton x:Name="rbSelectedQuantity" GroupName="CardQuantity"
          FontSize="14" Margin="5"
          Content="Selected Quantity">
        </RadioButton>

        <TextBox x:Name="txtSelectedQuantity" Width="50" Margin="5" TextAlignment="Right"
        Text="0"></TextBox>
  </StackPanel> 
```

这是我的场景：如果我在文本框内单击，我的单选按钮应该会被自动选中。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:26:21.973

处理`GotFocus`TextBox 的事件并将`RadioButton` `IsChecked`属性设置为`True`

```
private void txtSelectedQuantity_GotFocus(object sender, RoutedEventArgs e)
    {
        rbSelectedQuantity.IsChecked = True;
    } 
```

# jquery - 我们可以将插入符号隐藏在数字字段中而不禁用它吗

> ID：14580590
> 
> 赞同：1
> 
> 时间：2013-01-29T10:21:48.033
> 
> 标签：jquery, html

我有一个**微调器**- 不是文本字段或文本区域

`<input type="number" />`

![在此处输入图像描述](../Images/44fbe8bc615aa893e4bf388f10f9a4fa.png)

单击控件时，最好不要在字段中显示闪烁的插入符号。

![在此处输入图像描述](../Images/ebab8e15c06c24371bceec9e3bf10b5d.png)

如何在 HTML 文本输入字段中隐藏插入符号的答案[？](https://stackoverflow.com/questions/4333919/how-to-hide-the-caret-in-an-html-text-input-field)

当然不起作用，因为当字段被禁用或只读时微调器不会运行。

隐藏不是微调器的[文本字段闪烁光标](https://stackoverflow.com/questions/3671141/hide-textfield-blinking-cursor)也不会

[jQuery UI spinner](http://jqueryui.com/spinner/)也有同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:51:16.557

眨眼是本机输入表示的一部分-您必须将其破解为 A) 使所述输入不可见并 B) 在其他地方复制其内容。

A）我建议使用`colour: transparent`. 如果支持较旧的浏览器（我知道旧的 IE 不会喜欢这个），您可以使用`visibility: hidden`其他技术，但是解决焦点将是困难的。

B）使用 围绕输入创建一个包装器`position: relative`，然后立即创建一个跨度，该跨度将在输入值更改时匹配。

这是一个简单的代码笔示例：

[http://codepen.io/barneycarroll/pen/beFgm](http://codepen.io/barneycarroll/pen/beFgm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:42:18.497

`css:`

```
.your-field{
    color: transparent;
} 
```

1.  将包装器添加到带有的字段`position: relative;`和`span/div/whatever`带有 . 的字段之后`position: absolute`。

2.  位置跨度正确（它的左上角应该与输入文本开始位置重叠）

3.  添加事件处理程序`keyup/keydown/custom arrow click/any event that changes input val`
4.  处理函数（jQuery）：

    ```
    function() { $('.your-absolute-positioned-element').text( $('.your-field').val() ); } 
    ```

# c# - IEqualityComparer 和 Contains 方法

> ID：14580595
> 
> 赞同：18
> 
> 时间：2013-01-29T10:21:56.350
> 
> 标签：c#, .net, ienumerable

我有一个带有这 2 个枚举字段的简单类，我试图在集合（）中找到该对象的一项，`List<T>`但 Contains 方法无法正常工作

```
public class Calculator : IEqualityComparer<Calculator>
{
    public DashboardsComputationMode ComputationMode { get; set; }
    public Modes Mode { get; set; }

    public Calculator(DashboardsComputationMode dashboardsComputationMode, Modes mode)
    {
        ComputationMode = dashboardsComputationMode;
        Mode = mode;
    }

    public bool Equals(Calculator x, Calculator y)
    {
        return (x.ComputationMode.Equals(y.ComputationMode) && x.Mode.Equals(y.Mode));
    }

    public int GetHashCode(Calculator obj)
    {
        return obj.ComputationMode.GetHashCode() ^ obj.Mode.GetHashCode();
    }
}

public enum DashboardsComputationMode
{
    Weighted = 0,
    Aggregated = 1,
    PR = 2,
    CurrentValue = 3,
    EquivalentHours = 4,
    AggregatedCorrected = 5,
    PRCorrected = 6
}

public enum Modes
{
    InstantaneousMode = 0,
    DailyMode = 1,
    MonthlyMode = 2,
    YearlyMode = 5,
    Undefined = 4,
} 
```

为什么这个测试不起作用

```
[TestMethod]
public void TestMethod1()
{
  var list = new List<Calculator>()
  {
    new Calculator(DashboardsComputationMode.PR, Modes.DailyMode),
    new Calculator(DashboardsComputationMode.CurrentValue, Modes.YearlyMode),
    new Calculator(DashboardsComputationMode.PRCorrected, Modes.MonthlyMode)
  };

  var item = new Calculator(DashboardsComputationMode.CurrentValue, Modes.YearlyMode);
  Assert.IsTrue(list[1].Equals(item));
  Assert.IsTrue(list.Contains(item));
} 
```

第一个断言工作正常

```
Assert.IsTrue(list[1].Equals(item)) 
```

但第二个没有

```
Assert.IsTrue(list.Contains(item)); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T10:45:15.320

[`List<T>.Contains`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)通过使用默认的相等比较器（由 返回的比较器[`EqualityComparer<T>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)）确定相等。

这是 MSDN 关于如何[`EqualityComparer<T>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)工作的解释：

> Default 属性检查类型 T 是否实现了 [System.IEquatable](http://msdn.microsoft.com/en-us/library/ms131187.aspx)接口，如果是，则返回 使用该实现的[EqualityComparer 。](http://msdn.microsoft.com/en-us/library/ms132123.aspx)否则，它返回一个使用T 提供的[Object.Equals](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)和[Object.GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)覆盖 的[EqualityComparer 。](http://msdn.microsoft.com/en-us/library/ms132123.aspx)

换句话说，你的`Calculator`类要么实现[System.IEquatable](http://msdn.microsoft.com/en-us/library/ms131187.aspx)（而**不是**`System.IEqualityComparer`!）接口，要么重写[Object.Equals](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)和[Object.GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T10:45:01.113

您没有`IEqualityComparer<Calculator>`在 Equals 和 Contains 中使用。`EqualityComparer`有着不同的意义。我为你更正了代码。

```
 public class CalculatorComparer : IEqualityComparer<Calculator>
{

    public bool Equals(Calculator x, Calculator y)
    {
        return (x.ComputationMode.Equals(y.ComputationMode) && x.Mode.Equals(y.Mode));
    }

    public int GetHashCode(Calculator obj)
    {
        return obj.ComputationMode.GetHashCode() ^ obj.Mode.GetHashCode();
    }
}
public class Calculator
{
    public DashboardsComputationMode ComputationMode { get; set; }
    public Modes Mode { get; set; }

    public Calculator(DashboardsComputationMode dashboardsComputationMode, Modes mode)
    {
        ComputationMode = dashboardsComputationMode;
        Mode = mode;
    }

    public override bool Equals(object obj)
    {
        Calculator y = obj as Calculator;

        return (this.ComputationMode.Equals(y.ComputationMode) && this.Mode.Equals(y.Mode));
    }
}

public enum DashboardsComputationMode
{
    Weighted = 0,
    Aggregated = 1,
    PR = 2,
    CurrentValue = 3,
    EquivalentHours = 4,
    AggregatedCorrected = 5,
    PRCorrected = 6
}

public enum Modes
{
    InstantaneousMode = 0,
    DailyMode = 1,
    MonthlyMode = 2,
    YearlyMode = 5,
    Undefined = 4,
} 
```

现在两者都应该返回 true。

# javascript - 文件选择器从 url 上传

> ID：14580597
> 
> 赞同：0
> 
> 时间：2013-01-29T10:22:06.607
> 
> 标签：javascript, file-upload, filepicker.io

我刚开始为我的应用程序使用文件选择器。它工作正常。我在服务器上有大量上传的文件。我想将几个文件上传到文件选择器。我所做的是列出所有文件的 url。是否有任何 javascript 方法可以使用文件 url 上传文件。

我很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:15:36.053

您需要使用 filepicker.storeUrl 方法：[https ://developers.filepicker.io/docs/web/#storeUrl](https://developers.filepicker.io/docs/web/#storeUrl)

```
filepicker.storeUrl(
     "https://filepicker_static.s3.amazonaws.com/37e3769/img/landing/cloud.png",
     {filename: 'cloud.png'},
     function(FPFile){
         console.log(JSON.stringify(FPFile));
     }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:27:38.137

看看geturl。这是一个开源项目，可以从命令行将文件上传到 filepicker.io。如果不出意外，您可以阅读代码并复制相关部分。

[https://github.com/uams/geturl](https://github.com/uams/geturl)

# android - Android android.view.WindowManager$BadTokenException: 无法添加窗口

> ID：14580599
> 
> 赞同：2
> 
> 时间：2013-01-29T10:22:10.227
> 
> 标签：android

我正在将我的 android 应用程序与 facebook 链接并调用 Async 任务来验证 fb 用户，然后在处理程序中调用另一个 Async 任务来链接我数据库中的 fb 帐户。在从第二个异步任务接收信息时，我正在显示带有上下文“this”的进程对话框。两个异步任务中也有进程对话框。有时它工作正常，但有时它显示

`android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@422608e8 is not valid; is your activity running?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:35:13.387

This exception occurred while app was trying to notify user from the background thread by opening a Dialog.

However, according to Google Play console, exception occurred very often and seemed very consistent.

You should use the applicationContext instead of passing the activity. `Context appContext = this.getApplicationContext();` must go, and instead you use a pointer to the `activity` you're in.

So wherever you have passed the pointer of `activity` or `this` instead try to pass the `context`.

# tree - d3 嵌套选择：如何访问数组数据

> ID：14580604
> 
> 赞同：1
> 
> 时间：2013-01-29T10:22:13.597
> 
> 标签：tree, d3.js

我在这里查看了许多关于嵌套选择的类似帖子，但我没有成功地将问题转移到我的案例中。我希望可以将其作为一个单独的问题提出。

我有：代表系统发育树的嵌套 json 结构（有物种）

```
 {
   "name" : "Sauria",
   "children" : [
      {
         "domains" : [
            {
               "name" : "BRCA2",
               "domain_start" : 100,
               "domain_stop" : 240
            }
         ],
         "common_name" : "NaN",
         "seq_length" : 200,
         "duplication" : "N",
         "name" : "ENSMGAP00000010132",
         "class" : "leaf",
         "bootstrap" : "NaN",
         "taxon" : "Meleagris_gallopavo"
      },
      {
         "domains" : [
            {
               "name" : "BRCA2",
               "domain_start" : 100,
               "domain_stop" : 240
            }
         ],
         "common_name" : "NaN",
         "seq_length" : 200,
         "duplication" : "N",
         "name" : "ENSACAP00000006049",
         "class" : "leaf",
         "bootstrap" : "NaN",
         "taxon" : "Anolis_carolinensis"
      }
    ],
   "bootstrap" : "15",
   "taxon" : null,
   "common_name" : "NaN" 
```

要获取所有节点并绑定我的数据，我会这样做

```
 var node = d3.select("#tree svg").selectAll("g.node").data(nodes, function(d) { return d.id || (d.id = ++i); }); 
```

然后我使用向每个节点添加组

```
 var nodeEnter = node.enter().append("svg:g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; }); 
```

我像这样为每片叶子画一个矩形

```
 var div3 = nodeEnter.append("rect")
            .attr("x", 192)
            .attr("y", 160)
             .attr("width", function(d){return d.children ? "":"10";})
             .attr("height", function(d){
                   return d.children ? "": domainOnlyScale(d.seq_length);
            })
           .attr("transform", function(d){return d.children ? "":"rotate(-90 100 100)";})
           .attr("fill", function(d){return d.children ? "":"grey";}); 
```

现在棘手的事情。我想使用每个叶子具有的“域”中的数据在矩形上绘制一些东西，所以这部分

```
 "domains" : [
        {
           "name" : "BRCA2",
           "domain_start" : 100,
           "domain_stop" : 240
        }
     ], 
```

我根本不知道如何遍历所有叶子和域数组的每个元素（请注意，这个数组可以有多个条目）。所以当我尝试使用“每个”时

```
 div3.each(function(d) {    
        [d.domains].each(function(dom){
                    d3.select(this)
                   .append("rect")
                   .attr("x", 230)
                   .attr("y", 175)
                   .attr("rx", 5)
                   .attr("ry", 5)
                   .attr("width", function(d){return "12";})
                   .attr("height", function(d){
                        console.log("here we go again: "+d.name+" has length: "+(d.domains.seq_stop - d.domains.seq_start));
                           //var randomnumber=Math.floor(Math.random()*11)
                           return dom.domain_start;
                    })
                    .attr("fill", function(d){return d.children ? "":"red";})
       })
       }); 
```

d3 告诉我“Object [object Object] 没有方法'each'”，但我认为 d.domains 是一个数组。

你能帮我访问这个嵌套的“域”信息吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:56:44.830

在嵌套选择中，您应该将嵌套数据作为参数传递给`data()`选择的函数。所以不是做`div3.each`，而是看起来像这样。

```
div3.selectAll("rect").data(function(d) { return d.domains; }).enter()
    .append("rect")
    ... 
```

您应该能够使用未更改的其余代码。

# c# - C# 中未使用的“使用”指令对性能的影响

> ID：14580606
> 
> 赞同：21
> 
> 时间：2013-01-29T10:22:15.873
> 
> 标签：c#, .net, performance

只是好奇而已。

`using`如果我在我的代码文件的开头添加多个我在我的代码中没有使用的指令，这是否重要。像这样。

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.IO;
//using blah.. blah.. blah..;

public class myClass
{
    // Class members
} 
```

*   **它对我的应用程序的内存使用**有不良影响吗？

*   **它对我的应用程序的性能**有不良影响吗？

我知道删除它们是一个很好的做法，并且我们对 .Net IDE 的短期全面支持这样做，但我只是想知道它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T10:24:57.573

额外的`Using` *指令*不会对最终应用程序产生任何内存/性能影响 - 它们只是编译器提供的处理长类型名称的快捷方式。编译器使用这些命名空间将非限定（或部分限定）类型名称解析为正确的类型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-29T11:38:33.487

只是为了完整起见，为此生成的 IL：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Hello World!");
        }
    }
} 
```

还有这个：

```
class Program
{
    static void Main(string[] args)
    {
        System.Console.Write("Hello World!");
    }
} 
```

完全相同：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       13 (0xd)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "Hello World!"
  IL_0006:  call       void [mscorlib]System.Console::Write(string)
  IL_000b:  nop
  IL_000c:  ret
} // end of method Program::Main 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-29T10:30:28.027

您的应用程序没有性能问题。这只是您用来避免输入整个限定条件的快捷方式。例如

```
var f = new File() 
```

代替

```
var f= new System.IO.File(); 
```

然而。它确实会在一定程度上影响您的开发环境 (IDE) 的性能，因为您使用的 using 语句越多，自动完成缓存的增长就越大。这使得查找时间稍慢。但这通常很难引起注意。

不过，此建议不适用于向您的项目添加程序集引用。如果您添加对 MyGloriousLibrary.DLL 的引用并且从不使用它，那么您将度过一段糟糕的时光。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T10:25:18.113

它根本不会影响应用程序的整体性能或内存使用情况。using 指令在编译时就在那里，因此您不必每次都写出完整的类名。一旦你的代码被编译（编译的代码总是使用完整的类型名称），这些指令就没有任何剩余了。

# android - 无法通过gps或网络获取经纬度

> ID：14580607
> 
> 赞同：0
> 
> 时间：2013-01-29T10:22:17.113
> 
> 标签：android, gps

我正在尝试在移动设备上获取 GPS 纬度和经度。日志中没有错误，但我无法获得任何信息。无论是否选择了“使用无线网络/GPS”设置。需要帮助

```
public class MainActivity extends Activity {

    private final static String TAG = "GPSTest";

    private LocationManager mLocationManager;
    private LocationListener mLocationListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        String serviceName = Context.LOCATION_SERVICE;
        mLocationManager = (LocationManager) getSystemService(serviceName);

        mLocationListener = new LocationListener() {

            @Override
            public void onLocationChanged(Location location) {
                // TODO Auto-generated method stub
                Log.e(TAG, "onLocationChanged");
                if (location != null) {
                    Log.e(TAG, "Current Latitude = " + location.getLatitude());
                    Log.e(TAG, "Current Longitude = " + location.getLongitude());
                }
                mLocationManager.removeUpdates(this);
            }

            @Override
            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub
                Log.e(TAG, "onProviderDisabled");

            }

            @Override
            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub
                Log.e(TAG, "onProviderEnabled");
            }

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub
                Log.e(TAG, "onStatusChanged");
            }
        };

        if (!mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 2000, 10, mLocationListener);
        } else {
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 10, mLocationListener);
        }
    }

    @Override
    protected void onDestroy() {
        mLocationManager.removeUpdates(mLocationListener);
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:25:35.483

您实际上是在设备中使用吗？如果您在模拟器中使用，则必须`geo fix <longitude value> <latitude value>`通过 Telnet 强制 ()。在设备中，您必须在“设置”中激活定位服务。

另一件事，清单文件中是否有以下行？

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" /> 
```

您需要获得许可才能访问该位置。

**编辑**

您还可以使用 DDMS 在模拟器上模拟地理位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:35:23.033

Please give these permissions:

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.INTERNET" /> 
```

and for more browse this link:

[http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:28:00.193

您是否在清单文件中提供了如下权限：

> ```
> <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
> <uses-permission android:name="android.permission.ACCESS_GPS" /> 
> ```

# php - 使用在 Ajax 调用中创建的 php 会话变量

> ID：14580611
> 
> 赞同：0
> 
> 时间：2013-01-29T10:22:33.823
> 
> 标签：php, ajax, session, drupal, drupal-7

嗨，我有一个链接，它在单击它时调用一个 JavaScript 函数，它有一个对 php 文件的 Ajax 调用。在 php 中，我创建了一个会话并存储了一些值。在结束 Ajax 调用后，我无法访问该会话变量......在使用 Ajax 时我有什么要做的吗？这是我在 Ajax 调用中的 PHP

```
 <?php
session_start();
    $_SESSION[$_REQUEST["p"]][$_REQUEST["p_id"]]=$_REQUEST["p_id"];
    print_r($_SESSION[$_REQUEST["p"]]);
    ?> 
```

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:20:39.223

在 drupal 中无需单独启动会话。

1.  尝试删除 session_start 和 print_r $_SESSION 变量
2.  如果您得到的结果与会话无关，否则为了维护匿名用户会话，请检查用户表 uid 0 是否存在。

# php - 无法在 Windows 中运行 drush

> ID：14580615
> 
> 赞同：2
> 
> 时间：2013-01-29T10:22:39.237
> 
> 标签：php, drupal, drush

我默认在 C:\ProgramData\Drush 位置安装了 Drush-5.4-2012-06-04-Installer-v1.0.18.msi。我运行该程序并移至 drupal 工作目录。

当我输入 drush 时，它显示“drush 未被识别为内部或外部命令”错误。在运行之前我需要配置任何东西吗？请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T22:36:46.240

您需要设置路径变量：

*   右键单击**计算机**
*   去**属性**
*   然后点击**高级系统设置**
*   点击**环境变量**，然后
*   找到变量**路径**
*   并编辑它

将此添加到变量值**C:ProgramData\Propeople\Drush**的末尾并重新启动 drush，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T05:04:58.673

当我用作曲家安装 drush 时遇到了这个问题。

对于使用 composer 安装 drush 的任何人，如果出现此问题，您必须按如下方式设置 PATH 变量。

```
F:\Users\{YOUR-USERNAME}\AppData\Roaming\Composer\vendor\drush\drush\; 
```

我这样做了，现在我的路径变量在下面。

```
F:\ProgramData\Oracle\Java\javapath;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;F:\Program Files\TortoiseSVN\bin;F:\Program Files\Git\cmd;F:\wamp\bin\php\php5.5.12;F:\ProgramData\ComposerSetup\bin;F:\Users\user\AppData\Roaming\Composer\vendor\drush\drush\; 
```

小心，只是不要复制粘贴上面的变量，你必须将 drush 路径附加到现有变量。 ![在此处输入图像描述](../Images/9e7e64bc201ff535b350b419ee9de714.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-31T11:33:05.793

对于 Drupal，您需要`composer require drush/drush`从根项目文件夹运行命令

# c# - 代码优先多对多查询

> ID：14580620
> 
> 赞同：0
> 
> 时间：2013-01-29T10:22:51.123
> 
> 标签：c#, asp.net-mvc, ef-code-first

我有一个代码表：

```
public class Code
{
    [Key]
    public int CodeID { get; set; }

    [Required]
    [StringLength(30)]
    public string Title { get; set; }

    [Required]
    [StringLength(150)]
    public string Description { get; set; }

    public DateTime DateAdded { get; set; }

    public DateTime LastUpdated { get; set; }

    [Required]
    [StringLength(30)]
    public string Project { get; set; }

    [Required]
    [StringLength(30)]
    public string CMS { get; set; }

    public int DotNetVersion { get; set; }

    [Required]
    [StringLength(150)]
    public string Dependencies { get; set; }

    [StringLength(30)]
    public string Author { get; set; }

    public string CodeFile { get; set; }

    [Required]
    [StringLength(100)]
    public string TFSLocation { get; set; }

    ////Creates a relationship in the DB with Tag
    //[ForeignKey("TagID")]
    public virtual ICollection<Tag> Tags { get; set; }

    ////Purely for API
    //[Required]
    public int TagID { get; set; }
} 
```

一个标签表：

```
public class Tag
{
    [Key]
    public int TagID { get; set; }

    [Required]
    [StringLength(30)]
    public string TagName { get; set; }

    ////Creates a relationship in the DB with Code
    public virtual ICollection<Code> Code { get; set; }
} 
```

和一个视图模型：

```
public class CodeTagViewModel
{
    public List<Tag> Tags { get; set; }
    public List<Tag> SelectedTags { get; set; }        

    public int CodeID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public DateTime DateAdded { get; set; }
    public DateTime LastUpdated { get; set; }
    public string Project { get; set; }
    public string CMS { get; set; }
    public int DotNetVersion { get; set; }
    public string Dependencies { get; set; }
    public string Author { get; set; }
    public string CodeFile { get; set; }
    public string TFSLocation { get; set; }

} 
```

我正在尝试运行查询以获取链接到已搜索标签名称的代码文件。目前我有这样的事情：

```
 List<CodeTagViewModel> models = new List<CodeTagViewModel>();
        List<Code> codes = db.Code.ToList<Code>();

        foreach (Code code in codes)
        {
            models.Add(MapCodeToModel(code));
        }

        var orderedModels = models.ToList();

        if (!String.IsNullOrEmpty(searchString))
        {
            orderedModels = models.Where(x => x.Title.ToUpper().Contains(searchString.ToUpper()) || x.Description.ToUpper().Contains(searchString.ToUpper()) || x.Project.ToUpper().Contains(searchString.ToUpper()) || x.CMS.ToUpper().Contains(searchString.ToUpper()) || x.Dependencies.ToUpper().Contains(searchString.ToUpper()) || x.Author.ToUpper().Contains(searchString.ToUpper())).ToList();

            if(orderedModels.Count == 0)
            {
                var Tags = db.Tags;
                 orderedModels = models.SelectMany(x => x.SelectedTags).Select(t => t).Where(t => t.TagName).Contains(searchString).ToList();
            }
        }

        return View(orderedModels); 
```

根据代码表的其他列进行搜索工作正常，我只是将它们包括在内，这样您就可以更好地了解我想要做什么；也许有比执行我的 if 语句更好的方法来查看搜索是否首先匹配其他任何内容。它只是搜索似乎对我不起作用的标签。

我需要帮助的部分：

```
 orderedModels = models.SelectMany(x => x.SelectedTags).Select(t => t).Where(t => t.TagName).Contains(searchString).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:57:37.337

假设您有一个标签枚举，您可以通过直接导航与代码文件的关系来找到代码文件 -

```
var tags = ... // enumeration of tags
var matches = tags.SelectMany(t => t.Code); 
```

**编辑**

查看您的代码，我不明白您究竟想在这里搜索什么，但假设您的搜索字符串应该与标签名称匹配，那么查找匹配的标签应该是直截了当的：

```
var tags = db.Tags.Where(t => t.TagName.ToUpper().Contains(searchString.ToUpper())); 
```

**编辑**
我不明白你为什么需要搜索模型。您可以直接搜索代码：

```
searchString = searchString.ToUpper();
var directMatches = db.Code.Where(c=> c.Title.ToUpper().Contains(searchString) ||
                        c.Description.ToUpper().Contains(searchString) ||    
                        ... (and so on) 
```

这将在其他属性上提供匹配的代码文件，然后您可以将其与标签搜索中的匹配项结合以获取合并结果 ( `directMatches.Union(matches)`)。

另一方面，`ToList`谨慎使用 - 它实现当前查询以生成内存数据，因此代码语句如

```
List<Code> codes = db.Code.ToList<Code>(); 
```

这会将所有代码行从数据库带到内存。同样，代码`if(orderedModels == models.ToList())`将不起作用，因为您正在比较两个`ToList`调用的结果，这将是两个不同的内存列表，并且它们的引用比较将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:39:07.913

解决了它：

```
if(orderedModels.Count == 0)
            {
                var codesByTag = db.Code.Where(c => c.Tags.Any(t => t.TagName.ToUpper().Contains(searchString))).ToList<Code>();
                foreach (var searchResult in codesByTag)
                {
                    orderedModels.Add(MapCodeToModel(searchResult));
                }
            } 
```

MapCodeToModel 是我自己的自我解释方法，如果有帮助，我可以根据要求发布。

# html - 下拉菜单超载

> ID：14580625
> 
> 赞同：0
> 
> 时间：2013-01-29T10:23:00.727
> 
> 标签：html, css

在 IE8 中，Dropdown 重载到另一个 Div 这里我使用以下 CSS

```
background-color:#f7f7f7;
font:12px arial;
color:#999999;
width:240px;
display:none;
z-index:999999;
position:absolute;
top:20px;
border-left:1px solid #d8d8d8;
border-right:1px solid #d8d8d8;
margin-left:40px; 
```

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:25:41.007

删除此行

```
position:absolute;
top:20px; 
```

并查看[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

# jquery - 在 wordpress 中使用 hashTags 将不同页面的拇指链接到 Flexslider

> ID：14580628
> 
> 赞同：0
> 
> 时间：2013-01-29T10:23:08.633
> 
> 标签：jquery, wordpress, flexslider, hashtag

我正在加载所有附加到 wordpress 帖子的拇指图像。

[http://www.piagrimbuehler.ch/wordpress/skill/food/](http://www.piagrimbuehler.ch/wordpress/skill/food/)

当我单击 Thumb 时，项目页面打开，图像显示在 flexslider 中。但我希望 flexslider 显示我点击的拇指。

我正在尝试使其与 HashTags 一起使用。我已经使用图像 ID 创建了 URL。

[http://www.piagrimbuehler.ch/wordpress/projects/waldhaus-kuche/#125](http://www.piagrimbuehler.ch/wordpress/projects/waldhaus-kuche/#125) 像这样。

但现在 flexslider 应该显示正确的图像。谁能指导我正确的方向？

这是我的 flexslider 脚本：

```
jQuery('.flexslider').flexslider({
        slideshowSpeed: 6000,  
        directionNav: true,
        slideshow: 1, 
        controlsContainer: '.slideshow',                        
        animation: 'fade',
        touch: true,
        controlNav: false
    }); 
```

我发现了这个脚本：

```
(jQuery.noConflict())(function($) {
    //Get your hash tag
    var loc = $(location).attr('href');
    var idx = 1;
    if(loc.lastIndexOf('#') != -1)
    {
        idx = loc.substr(loc.lastIndexOf('#')+1).replace('slide', '');
    }

    //verify that idx is really a number
    if(isNaN(idx-0))
    {
        idx = 1;
    }

    $('#yourFlexSlider').flexslider ({
        startAt: idx
    });
}); 
```

但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:50:54.473

解决了问题:-)

需要更改我的href。

```
<a href="<?php the_permalink(); ?>#slide<?php echo $i; $i++;?>" ><?php  echo wp_get_attachment_image( $attachment_id, 'thumb' ); ?> 
```

但我现在唯一的问题是**下一个**和上一个按钮不起作用**。**“controlNav”有效。如果我直接单击**下一个**和上一个，则不会出现下一个图像**。**但是，如果我先单击“controlNav”，然后单击上一个或下一个，则一切正常。

[看到它的链接](http://www.piagrimbuehler.ch/wordpress/skill/food/)

# windows - egit 工作时的奇怪行为也出现在 git 控制台上

> ID：14580629
> 
> 赞同：1
> 
> 时间：2013-01-29T10:23:23.117
> 
> 标签：windows, eclipse, git, egit, msysgit

我在 windows7 上使用 eclispe egit (msysgit)，我注意到一些奇怪的行为

例如

1.) 我在主分支

2.) 在eclipse中用egit切换到devel

3.）转到控制台并执行：

```
git diff --stat --color --histogram devel..master 
```

4.）回到eclipse并再次切换到master

之后，我在所有项目的污物附近看到了一个日食箭头，看起来污物很脏

然后我再次去控制台做

```
git status 
```

但它什么也没说，工作目录干净

我在这里错过了什么吗？

在 eclipse 和 git 控制台中同时使用 egit 是否错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:01:39.997

也许您遇到了[JGit 错误 372834](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372834)，这是关于 Windows 上的换行符转换。

*   配置选项`core.autocrlf`设置为什么？
*   当您打开此类文件的历史记录时，转到文件列表并在编辑器中打开来自提交的版本，该文件有哪些行尾（使用*Ctrl+3*和*显示空白字符*使它们可见）？
*   当您打开文件的工作区版本时，它有哪些行尾？

# c# - FileHelperEngine 列的顺序

> ID：14580637
> 
> 赞同：0
> 
> 时间：2013-01-29T10:23:45.270
> 
> 标签：c#, csv, filehelpers

您好我正在使用 FileHelperEngine 来解析 csv 文件。

```
FileHelperEngine csvEngine = new FileHelperEngine(typeof (Model));
Model[] lines= csvEngine.ReadFile(fileName) as Model[]; 
```

如果列顺序与模型对象中所有 csv 文件的属性的顺序相匹配，则此方法在第一行具有标题。但是当标题顺序与模型属性不同时，我有问题...

如果 csv 列的顺序与模型对象的顺序不同，它如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:38:34.260

您应该使用两个类，一个`Model`是 FileHelpers 记录类，另一个是 CSV 文件的规范。它应该只包含公共字段（而不是属性），并且这些字段应该与 CSV 文件中的顺序相同。（FileHelpers 记录类不应被视为应遵循最佳编码实践的普通 C# 类；而它只是描述导入文件结构的语法。）

然后，一旦您将文件读入`Model[]`数组，然后枚举它以将字段映射到您的第二个类`ModelObject`，该类不是 FileHelpers 类并且可以按任何顺序具有属性。

# r - 什么是衡量数据*居中*到 LM 预测线的程度

> ID：14580644
> 
> 赞同：3
> 
> 时间：2013-01-29T10:23:55.660
> 
> 标签：r, statistics, lm

我有两个数据集，我使用 R 的[`lm`](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/lm.html)命令对其进行绘图。下面的第一个图没有以红线为中心。但是右边的第二张图以直线为中心。

![数据1](../Images/47ef08df11fabc64595baceace1a0c79.png) ![数据2](../Images/0aaa814e34bd63077229615c0058959e.png)

我的问题是：

1.  衡量数据以线为中心的程度如何？
2.  如何从数据结构中提取它？

我用来绘制该数据的代码很简单：

```
 data <-read.table("myfile.txt")
 dat1x <- data$x1
 dat1y <- data$y1

 # plot left figure
 dat1_lm <- lm(dat1x ~ dat1y)
 plot(dat1x ~ dat1y)
 abline(coef(dat1_lm),col="red")
 dat1_lm.r2  <- summary(dat1_lm)$adj.r.squared;

 # repeat the the same for right figure
 dat2x <- data$x2
 dat2y <- data$y2
 dat2_lm <- lm(dat2x ~ dat2y)
 plot(dat2x ~ dat2y)
 abline(coef(dat2_lm),col="red")
 dat2_lm.r2  <- summary(dat2_lm)$adj.r.squared; 
```

**使用 RMSE 分数**更新绘图：****

 **![F1g1](../Images/4c502d17e1c6985f5c513c5e252fdbe6.png) ![在此处输入图像描述](../Images/2f9adc087b98b153d340d43c54961a66.png)

根据以预测线为中心的数据，我正在寻找一个显示右图优于左图的分数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:29:01.907

R 平方给出了线的拟合优度，即由线性模型解释的数据集中变化的百分比。另一种解释 R 平方的方法是模型的性能比均值模型好多少。p 值给出了拟合的显着性，即线性模型的系数显着不同于零。

要提取这些值：

```
dat = data.frame(a = runif(100), b = runif(100))
lm_obj = lm(a~b, dat)
rsq = summary(lm_obj)[["r.squared"]]
p_value = summary(lm_obj)[["coefficients"]]["b","Pr(>|t|)"] 
```

或者，您可以计算观测值与线性模型结果之间的 RMSE：

```
rmse = sqrt(mean((dat$a - predict(lm_obj))^2)) 
```

请注意，这是`a`线性模型的 RMSE。如果你想要 和 的`a`RMSE `b`：

```
rmse = sqrt(mean((dat$a - dat$b)^2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:49:05.200

您可能正在寻找的是[MAPE](http://en.wikipedia.org/wiki/Mean_absolute_percentage_error)（平均绝对百分比误差）。它相对于其他精度度量（MSE、MPE、RMSE、MAE 等）的优势在于 MAPE 不依赖于电平，它测量的是*绝对*误差，并且具有明确的含义。您可以使用包`forecast`来获取其中一些措施：

```
library(forecast)
data <- data.frame(y = rnorm(100), x = rnorm(100))
model <- lm(y ~ x, data)
accuracy(model)
#           ME         RMSE          MAE          MPE         MAPE 
# 5.455773e-18 1.019446e+00 7.957585e-01 1.198441e+02 1.205495e+02 
accuracy(model)["MAPE"]
#     MAPE 
# 120.5495 
```

或者

```
mape <- function(f, x) mean(abs(1 - f / x) * 100)
mape(fitted(model), data$y)
# [1] 120.5495 
```

另一方面，看起来[MPE](http://en.wikipedia.org/wiki/Mean_percentage_error)（平均百分比误差）更适合显示数据以预测线为中心的程度，例如让预测为`p <- rep(2, 20)`和数据，`y <- rep(c(3,1), 10)`然后是。`MPE = 0``MAPE = 100%`

所以你应该决定你真正想要展示什么，MAPE 作为准确度的衡量标准更好，但对你来说，第二个例子 MPE 可能是更好的选择。

**更新：**如果它确实以您要检查的内容为中心，您应该查看没有任何平方、绝对值等的对误差求和的度量。也就是说，您可能还想查看 ME（平均误差），其中比 MPE 简单一点，但有不同的解释。这是一个与您的第一个示例有些相似的示例：

![在此处输入图像描述](../Images/16bb0762fa4f5cf263301030c6c6253e.png)

```
mpe <- function(f, x) mean((1 - f / x) * 100)
mape <- function(f, x) mean(abs(1 - f / x) * 100)
me <- function(f, x) mean(x - f)

set.seed(20130130)
y1 <- rnorm(1000, mean = 10, sd = 1.5) * (1:1000) / 300
y2 <- rnorm(1000, mean = 10, sd = 1.7) * (1:1000) / 250
pr <- (1:1000) / 30

data <- data.frame(y = c(y1, y2),
                   x = 1:1000,
                   prediction = rep(pr, 2),
                   id = rep(1:2, each = 1000))

results <- data.frame(MAPE = c(mape(pr, y1), mape(pr, y2)),
                      MPE = c(mpe(pr, y1), mpe(pr, y2)),
                      ME = c(me(pr, y1), me(pr, y2)),
                      id = 1:2)
results <- round(results, 2)

ggplot(data, aes(x, y)) + geom_line() + theme_bw() +
  facet_wrap(~ id) + geom_line(aes(y = prediction), colour = "red") +
  theme(strip.background = element_blank()) + labs(y = NULL, x = NULL) +
  geom_text(data = results, x = 150, y = 50, aes(label = paste("MAPE:", MAPE))) +
  geom_text(data = results, x = 150, y = 45, aes(label = paste("MPE:", MPE))) + 
  geom_text(data = results, x = 150, y = 40, aes(label = paste("ME:", ME))) 
```**

# jquery - jquery无法添加子列表 要附加的标签 标签

> ID：14580652
> 
> 赞同：3
> 
> 时间：2013-01-29T10:24:15.150
> 
> 标签：jquery

我尝试将一些子标签插入到这样的`<div>`标签中：

```
$('#div1')
.append('<p style="float:left;width:82%;">blablablalb <ul><li>llist item</li><li>another list item</li></ul></p>');

<div id="div1"></div> 
```

我得到这个结果：

```
<div id="div1">
   <p style="float:left;width:82%;">
       blablablalb 
   </p>
   <ul>
      <li>llist item</li>
      <li>another list item</li>
   </ul>
   <p></p>
</div> 
```

但我希望将代码分层，如 .append 参数中所写。IE。列表应该在`<p>`元素内部而不是之后。

有没有办法做到这一点 ？

[http://jsfiddle.net/jPEWW/](http://jsfiddle.net/jPEWW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:25:31.097

实际上这与 jQuery 无关。您不能在`ul`元素中使用`p`元素，大多数浏览器在看到元素已使用`p`时会关闭该元素。`ul`

# qt - 是否需要在子类中调用基类的事件处理函数？

> ID：14580654
> 
> 赞同：3
> 
> 时间：2013-01-29T10:24:27.110
> 
> 标签：qt, inheritance, qt4, qt5, qevent

假设我`QWidget::keyPressEvent(QKeyEvent *e)`在我的子类中重新实现了。

是否有必要在它的末尾调用基类的实现？

例子：

```
MyWidget::keyPressEvent(QKeyEvent *e)
{
    // my event handler...

    // now call parent event handler, necessary?
    QWidget::keyPressEvent(e);
} 
```

如果是这样，这样做有什么意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T22:11:56.040

如果您不对事件采取行动，则应始终将事件传递给基类的实现，因为它可能会对其采取行动，或者可能为它安装了事件过滤器。例如，如果用户按 Esc，则默认实现会`QWidget`关闭弹出窗口小部件。因此，为了确保不破坏任何事件处理，请始终将事件传递给基类，除非您对它们采取行动。

# java - Jawr CSSServlet 抛出 StackOverflowError

> ID：14580656
> 
> 赞同：4
> 
> 时间：2013-01-29T10:24:28.433
> 
> 标签：java, css, stack-overflow, jawr, hybris

我正在将使用 Jawr 的 Hybris 应用程序部署到 Tomcat 服务器。在启动时，JawrServlet 会引发 StackOverflow 错误。

这个错误很难重现，但在处理 CSSServlet 的过程中总是会发生。记录后不久：

```
[JawrRequestHandler] Initializing jawr config for request handler named CSSServlet 
```

这就是在我的 web.xml 中配置 Servlet 的方式：

```
 <servlet>
        <servlet-name>CSSServlet</servlet-name>
        <servlet-class>net.jawr.web.servlet.JawrServlet</servlet-class>

        <!-- Location in classpath of the config file -->
        <init-param>
            <param-name>configLocation</param-name>
            <param-value>/jawrsetup.properties</param-value>
            <!--<param-value>/jawrTEST.properties</param-value>-->
        </init-param>
        <init-param>
            <param-name>type</param-name>
            <param-value>css</param-value>
        </init-param>
        <init-param>
            <param-name>mapping</param-name>
            <param-value>/jawr-css</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

这是发生错误的控制台日志的一部分：

```
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.081 | 11:20:16,036 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/pause.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.082 | 11:20:16,036 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/pause-ie.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.082 | 11:20:16,036 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/left-hover.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.087 | 11:20:16,036 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/left-hover-ie.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.087 | 11:20:16,036 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/right-hover.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.087 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/right-hover-ie.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.092 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/play-hover.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.092 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/play-hover-ie.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.092 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/pause-hover.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.093 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bk-ruby/pause-hover-ie.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.097 | 11:20:16,045 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url('/images/bg.png')
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.098 | 11:20:16,046 [WrapperSimpleAppMain] DEBUG [Base64PostProcessorCssImageUrlRewriter] Skip encoding image resource : url("/images/content-bg.png")
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.098 | 11:20:16,057 [WrapperSimpleAppMain] INFO  [Base64ImageEncoderPostProcessor] Base64 Postprocessing done
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.098 | 11:20:16,058 [WrapperSimpleAppMain] DEBUG [AbstractChainedResourceBundlePostProcessor] postprocessing bundle:/bundles/dmlights.css
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 | Jan 29, 2013 11:20:16 AM org.apache.catalina.core.ApplicationContext log
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 | SEVERE: StandardWrapper.Throwable
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 | java.lang.StackOverflowError
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$LazyLoop.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$GroupTail.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$CharProperty.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$Ques.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$GroupHead.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$LazyLoop.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$GroupTail.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$CharProperty.match(Unknown Source)
INFO   | jvm 1    | main    | 2013/01/29 11:20:16.198 |     at java.util.regex.Pattern$Ques.match(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T18:40:34.257

我正在使用 Jawr 3.3.3 和 Bootstrap 3.1.0 并且遇到了同样的问题。**解决方案是在bootstrap.css**中做一个小的“更正”，即。改变：

```
a[href]:after {
    content: " (" attr(href) ")";
}
abbr[title]:after {
    content: " (" attr(title) ")";
} 
```

到：

```
a[href]:after {
    content: " \0028" attr(href) "\0029";
}
abbr[title]:after {
    content: " \0028" attr(title) "\0029";
} 
```

请注意，唯一改变的是左括号和右括号（及其对应的 css 代码）。

这种方式语义保持不变，但颚不会失败。:) （我很确定这是导致这种情况的正则表达式的事情..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:58:32.900

在我的 CSS 中，我有一个可能导致问题的类定义：

```
.our-price-indicated-pdp-acessories,
.our-price-indicated-cart-dropdown
{
    color: #6E6E6E;
    font-size: 11px;
    line-height: 15px;
    font-weight: bold;
    text-align: center;
} 
```

所以我把它改成：

```
.our-priceind-pdpa,
.our-priceind-cartdrop{
    color: #6E6E6E;
    font-size: 11px;
    line-height: 15px;
    font-weight: bold;
    text-align: center;
} 
```

它再次起作用。

但很难绝对确定。当类的名称很长时，错误并不总是发生。如果你问我，整个问题是一个奇妙的思维扭曲。

我的建议是，看看你的 CSS，看看你是否有长的类名，并尝试在没有这些 CSS 类的情况下重新部署应用程序。

# javascript - javascript中的ajax函数不能检查XML是否为空？

> ID：14580658
> 
> 赞同：1
> 
> 时间：2013-01-29T10:24:37.527
> 
> 标签：javascript, jquery, html, xml, error-handling

```
 error: function(x, t, m) {
        if(t === "timeout") {
            document.location.reload(true);
        }
        else if(t === "parsererror") {
            alert("Error in reading the XML file.");
        }
        else if(t === "abort") {
            alert("The XML request is aborted.");
        }
        else{
            alert("Encounter error in reading XML.");
        }
    } 
```

这些是ajax函数提供的默认错误检查方法，但是它不检查文件是否为空。有没有办法解决这个问题？另外，还有其他我应该处理的典型错误情况吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T19:33:14.600

> 是的，只需检查数据是否为“”，您自己。不过，“空响应”并不是错误。这可能是一个完全有效的回应。

# http - Angular如何从http.post成功返回值？

> ID：14580667
> 
> 赞同：2
> 
> 时间：2013-01-29T10:25:07.433
> 
> 标签：http, post, angularjs, return-value

我的角度控制器中有一个代码

```
$scope.message = '';
$http.post('/save/').success(function(data) {                  
    $scope.message = "success";
});
console.log($scope.message);
//get empty string? 
```

为什么在我运行后，我在 $scope.message 上得到空字符串？成功时 http.post 如何返回值，因为我想为我的另一个函数重用该值。不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:08:53.707

您正在寻找的是：

```
$scope.$watch("message", function(value){
  console.log($scope.message);
}); 
```

这是 我制作的[一个示例 plnkr 示例](http://plnkr.co/edit/cdymfFgfP3UKDqxnl4v4?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:29:05.863

怎么办——

```
$scope.message = '';
$http.post('/save/').success(function(data) {                  
    $scope.message = "success";
    console.log($scope.message);
}); 
```

?

还是我错过了其他东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:10:29.470

> 为什么在我运行后，我在 $scope.message 上得到空字符串？

当响应可用时，异步调用[$http](http://docs.angularjs.org/api/ng.%24http)的成功回调。这解释了为什么 console.log() 可以在回调之前运行。如果另一个函数需要该值，@ShaiRez 已经提供了两种解决方案：

1.  在成功回调中调用另一个函数
2.  [$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)值，并在 $watch 侦听器回调中调用另一个函数

# android - 如何从android中的数组列表中获取两个特定值之间的所有值？

> ID：14580672
> 
> 赞同：0
> 
> 时间：2013-01-29T10:25:17.903
> 
> 标签：android, arraylist

我有一个`arraylist`字符串类型。在此`arraylist`我存储一些日期，例如

```
 ArrayList<String> date = new ArrayList<String>();
    date.add("20-jan-2013 11:32:39 AM");
    date.add("21-jan-2013 11:32:39 AM");
    date.add("22-jan-2013 11:32:39 AM");
    date.add("23-jan-2013 11:32:39 AM");
    .
    .
    .
    .
    .
    .
    date.add("29-jan-2013 11:32:39 AM"); 
```

数组列表中有超过 20 个值。我的问题是我如何从`arrayList`两个值（日期）之间获取值（日期），比如从这个日期开始 `21-jan-2013 11:32:39 AM to 27-jan-2013 11:32:39 AM.` 帮助我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:44:10.087

```
SimpleDateFormat dateFormat = new SimpleDateFormat("dd-mmm-yyyy hh:mm:ss aa");
Date convertedDate = new Date();
ArrayList<String> filteredDate=new ArrayList<String>;
Iterator<String> iterator = lList.iterator();

for (String temp : lList) 
{
 try
    {
    convertedDate = dateFormat.parse(temp);
     } 
    catch (Exception e) 
    {
    e.printStackTrace();
    }
    if((convertedDate.before(date2)) && (convertedDate.after(date1))) //here "date2" and "date1" must be converted to dateFormat
    {
      filteredDate.add(convertedDate); // You can use these filtered ArrayList
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:39:11.147

```
List<String> result = new ArrayList<String>();
boolean foundFirst = false;
for(String s : date) {
    if(!foundFirst) {
        if(s.equals(myFirstElement)) {
            foundFirst = true;
            result.add(s);
        }
    } else {
        result.add(s);
        if(s.equals(myLastElement) {
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:39:57.723

像这样的一些想法会起作用：

```
 ArrayList<String> date = new ArrayList<String>();

    int begin=0, end=0;
    for(int i = 0; i < date.size(); i++){
        if(date.get(i).equals(myFirstDate)){
            begin = i;
        }
        if(date.get(i).equals(myLastDate)){
            end = i;
        }
    }

    ArrayList<String> myDates = new ArrayList<String>();
    for(int i = 0; i < (end - begin); i++){
        myDates.add(date.get(i + begin));
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T10:50:04.973

做这样的事情：

```
private ArrayList<String> filter(ArrayList<String> original, String startDate, String endDate) {
    TimeStamp start = ...; 
    TimeStamp end = ...; 
```

在这里，您需要获取字符串值的时间戳，看看它是如何工作的，看看这个[问题，以及提供的答案](https://stackoverflow.com/questions/2742380/how-to-convert-string-date-to-timestamp-in-java)。

```
 ArrayList temp = new ArrayList<String>();
    for (int i= 0; i < original.size(); i++) {
       TimeStamp currentTimeStamp = timestamp of original.get(i)
       if (start < currentTimeStamp && stop > currentTimeStamp) {
           temp.add(original.get(i));
       }
    }
    return temp;
} 
```

这应该可以解决您的问题

# html - 换行边距看起来不太好

> ID：14580675
> 
> 赞同：1
> 
> 时间：2013-01-29T10:25:22.303
> 
> 标签：html, css

我有一个href，它出现在一个句子之后。但根据单词它可以与句子在同一行或换行。但由于 margin-left:5px; 它在换行时看起来不太好。我怎么能做到，如果左边没有任何其他词，它会从一开始就开始。[http://jsfiddle.net/tVC43/11/](http://jsfiddle.net/tVC43/11/)

```
<div class="box" style="border:1px solid red;">
   welcome to xxxxxxxxx part.
  <nobr style="margin-left:5px">hi thomas</nobr>
  </div>
  <div class="box" style="left:200px; border:1px solid red;">
   welcome to xxxxxxxxx.
  <nobr style="margin-left:5px">hi thomas</nobr>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:33:28.443

Jsfiddle example updated. Add some css rules over the `nobr` as shown below.

```
<div class="box" style="border:1px solid red;">
   welcome to xxxxxxxxx part.
  <nobr>hi thomas</nobr>
</div>
<div class="box" style="left:200px; border:1px solid red;">
   welcome to xxxxxxxxx.
  <nobr>hi thomas</nobr>
</div> 
```

CSS:

```
.box{
  width:155px;
  height:100px;
  border:1px solid; 
  position:absolute;
}

nobr {
    clear: left;
    display: block;
} 
```

`float: left` & `display: block;`

Please let me know.

* * *

Solution #2: - simply remove `style="margin-left:5px"` from the second `nobr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:31:07.970

你为什么用`<nobr>`？我没有发现在你的例子和你的例子中一切看起来都很好。

链接的默认样式应该意味着它们与文本正确显示。除非您的链接在`display: block`多行文本`display: inline-block`中`margin`的行为与预期不同。

有关更多说明，请参见此处：http: [//www.w3.org/TR/CSS21/visuren.html#inline-formatting](http://www.w3.org/TR/CSS21/visuren.html#inline-formatting)

# ruby - 从数组运行多个方法

> ID：14580677
> 
> 赞同：0
> 
> 时间：2013-01-29T10:25:29.047
> 
> 标签：ruby

我需要像下面的示例一样从数组中运行多个方法，第一种方法有效，但我宁愿只运行这些方法而不显示结果。如何调整第二种方法，以免出现以下错误？

```
def method1
  print 1
end

def method2
  print 2
end

[method1, method2].each(&p) #=>12 (works)

[method1, method2].each(&method(:run)) 
#=>12 `method': undefined method `run' for class `Object' (NameError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:31:28.880

因为`method1`调用方法（而不是引用它），所以您的数组实际上包含运行方法的结果，而不是对方法本身的引用。

你可能想要：

```
[:method1, :method2].each {|m| method(m).call} 
```

# python - 如何在 ipython 笔记本中将 matplotlib 图作为 html 抓取？

> ID：14580684
> 
> 赞同：4
> 
> 时间：2013-01-29T10:25:46.417
> 
> 标签：python, pandas, matplotlib, jupyter-notebook

我有一个使用 Pandas 对基于规则的交易系统进行回测的 IPython Notebook。

我有一个函数，它接受各种标量和函数作为参数，并将统计数据包输出为一些表和几个图。

对于自动化，我希望能够将其很好地格式化为“页面”，然后在循环中调用该函数，同时改变输入并让它输出多个页面进行比较，所有这些都来自单个笔记本单元格。

我采用的方法是创建 IpyTables 然后调用`_repr_html_()`，一路构建 HTML 输出，以便我最终可以从运行循环的函数中返回它。

如何以这种方式捕获绘图的输出 - matplotlib subplot 对象似乎没有实现`_repr_html_()`？

随意提出另一种您认为可以同样解决问题的方法。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:37:19.093

> 好的，如果你走那条路，这个关于如何捕获 >matplotlib 数字作为内联 PNG 的答案 stackoverflow.com/a/5314808/243434 可能会有所帮助 - @crewbum
> 
> 为防止重复绘图，请尝试在禁用 pylab 的情况下运行（仔细检查您的 config >files 和命令行）。– @crewbum

--> 这最后需要重启笔记本：ipython notebook --pylab (NB no inline)

# objective-c - 数组随机化逻辑可能的错误

> ID：14580687
> 
> 赞同：1
> 
> 时间：2013-01-29T10:25:54.750
> 
> 标签：objective-c

我有一个随机数组。我无法重现这一点，但我的应用程序的用户报告说，他遇到了这样一种情况，即数组中的一个元素出现了两次，而另一个元素根本没有出现。看看下面的逻辑，在某些情况下有什么可能导致这个问题的吗？

```
NSMutableArray *strArray = [NSMutableArray arrayWithCapacity:18];
[strArray addObjectsFromArray:tempNSArray];
int randomIndex, arrayCount = [strArray count];
for (int i = 0; i < arrayCount; i++) {
    randomIndex = arc4random() % arrayCount;
    [strArray exchangeObjectAtIndex:i withObjectAtIndex:randomIndex];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:52:24.380

尝试使用数组 tempNSArray 的内容创建新的 NSMutableArray，当您选择一个随机对象时将其删除，直到新的 NSMutableArray 为空。试试这个代码：

```
NSMutableArray *strArray = [[NSMutableArray alloc]init];
NSMutableArray *tempMutableArray=[[NSMutableArray alloc]initWithArray:tempNSArray];

int randomIndex;
while ([tempMutableArray count]=!0){
    randomIndex = arc4random() % [tempMutableArray count];
    [strArray addObject:[tempMutableArray objectAtIndex:randomIndex]];
    [tempMutableArray removeObjectAtIndex:randomIndex];

} 
```

# asp.net-mvc - 在剑道网格编辑弹出模式中添加新按钮

> ID：14580690
> 
> 赞同：0
> 
> 时间：2013-01-29T10:25:58.277
> 
> 标签：asp.net-mvc, kendo-ui

我想添加一个按钮 kendo 网格编辑弹出模式（ kendo web asp.net mvc razor ）

![我想得到什么](../Images/0347139d0cabe61ebd1111de0e14df93.png)

示例：我有 2 个具有关系的表（表 A）-许多（表 B）现在用户单击添加新 B，在弹出编辑中有一个下拉显示 A，在下拉列表旁边我想添加新按钮添加新的 A 而无需直接导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:01:02.640

在您的列定义中定义一个[编辑器](http://docs.kendoui.com/api/web/grid#columnseditor-function)函数，该函数生成两个元素（添加时的复选框和按钮）。

例子：

```
{
    field   : "selected",
    title   : "Selected",
    template: "<input type='checkbox' name='selected' #= selected ? 'checked' : '' # disabled/>",
    editor : generateButton
} 
```

并且`generateButton`是：

```
function generateButton(container, options) {
    container.append('<input type="checkbox" name="' + options.field + '" data-type="boolean" data-bind="checked:' + options.field + '"/>')
            .append('<a href="#" id="mybutton" class="k-button">Button</a>');
} 
```

JSFiddle 中的示例在[这里](http://jsfiddle.net/OnaBai/HkTL2/)

# c# - 从外部 Api 解析 json

> ID：14580694
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:03.487
> 
> 标签：c#, json, json.net, deserialization

我目前正在为外部 REST API（我无法控制）编写 ac# 包装器库，它返回 JSON。

反序列化以下 JSON

```
{
    "countries": {
        "2": {
            "name": "Albania",
            "isoCode": "AL",
            "dialCode": "+355"
        },
        "3": {
            "name": "Algeria",
            "isoCode": "DZ",
            "dialCode": "+213"
        },
        "4": {
            "name": "American Samoa",
            "isoCode": "AS",
            "dialCode": "+1684"
        }
    }
} 
```

我的库中有一个方法`GetCountries`，它执行以下操作：

```
public List<Country> GetCountries()
{
  string endpointUrl = GenerateEndPointUri(...)

  var countries = IssueApiGETRequest<CountriesWrapper>(endpointUrl);

  return countries.Countries.Select(x =>
  {
    x.Value.Id = x.Key;
    return x.Value;
  }).ToList();
} 
```

`IssueAPIGetRequest`看起来像这样：

```
private T IssueApiGETRequest<T>(string endPointUrl)
{
  using (var handler = new HttpClientHandler())
  {
    handler.Credentials = ...;

    using (HttpClient client = new HttpClient(handler))
    {
      var response = client.GetAsync(endPointUrl).Result;

      if (response.IsSuccessStatusCode)
      {
        string json = response.Content.ReadAsStringAsync().Result;
        var result = JsonConvert.DeserializeObject<T>(json);

        return result;
      }
      else
      {
        switch (response.StatusCode)
        {
          case HttpStatusCode.BadRequest:
            throw new InvalidParameterException("Invalid parameters");
        }
        throw new Exception("Unable to process request");
      }
    }
  }
} 
```

这允许我为外部 API 上的所有 GET 端点定义一个通用方法，并将它们序列化为我自己定义的类型。

最后，我定义了这些类实体：

```
 [JsonObject(MemberSerialization = MemberSerialization.OptIn)]
  internal class CountriesWrapper
  {
    [JsonProperty(PropertyName = "countries")]
    public IDictionary<int, Country> Countries { get; set; }
  }

  [JsonObject(MemberSerialization = MemberSerialization.OptIn)]
  public class Country
  {
    public int Id { get; set; }

    [JsonProperty(PropertyName = "name")]
    public string Name { get; set; }

    [JsonProperty(PropertyName = "isoCode")]
    public string IsoCode { get; set; }

    [JsonProperty(PropertyName = "dialCode")]
    public string DialCode { get; set; }
  } 
```

我对 GetCountries 方法不太满意，该方法必须重申从反序列化返回的 Dictionary 并拥有`CountriesWrapper`该类。

**问题：**我想知道我是否错过了一个技巧，或者是否有人可以建议一种更清洁的方式来解决这个问题。同时保持向外部 API 发出 GET 请求的通用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:41:25.797

这可以使用类似于此[答案的 JsonConverter 来完成](https://stackoverflow.com/questions/10121804/json-net-field-is-either-string-or-liststring/10122308#10122308)

我认为json很奇怪，反正我实现了可以读取那种json的转换器。我不认为它实施得很好，但你可以改进它

```
class CountriesConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return (objectType == typeof(List<Country>));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var l = new List<Country>();
        dynamic expando = new ExpandoObject();
        var temp = expando as IDictionary<string, object>;
        if (reader.TokenType == JsonToken.StartObject)
        {
            var newCountry = true;
            while (reader.TokenType != JsonToken.EndObject)
            {
                if(newCountry)
                    reader.Read();
                if (reader.TokenType == JsonToken.PropertyName)
                {
                    if (reader.Value != null && reader.Value.ToString() != "countries")
                    {
                        if (!temp.ContainsKey("Id"))
                        {
                            newCountry = true;
                            int id = 0;
                            if (Int32.TryParse(reader.Value.ToString(), out id))
                                temp.Add("Id", id);
                        }
                        else
                        {
                            var propertyName = reader.Value.ToString();
                            reader.Read();
                            temp.Add(propertyName, reader.Value.ToString());
                        }

                    }
                }
                else if (reader.TokenType == JsonToken.EndObject)
                {
                    l.Add(Country.BuildCountry(expando));
                    temp.Clear();
                    reader.Read();
                    newCountry = false;
                }
            }
            reader.Read();
            while (reader.TokenType != JsonToken.EndObject)
            {
                reader.Read();
            }
        }

        return l;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        //ToDo here we can decide to write the json as 
        //if only has one attribute output as string if it has more output as list
    }
} 
```

和国家类，它只是 de BuildCountry 方法是一样的

```
[JsonObject(MemberSerialization = MemberSerialization.OptIn)]
public class Country
{
    public int Id { get; set; }

    [JsonProperty(PropertyName = "name")]
    public string Name { get; set; }

    [JsonProperty(PropertyName = "isoCode")]
    public string IsoCode { get; set; }

    [JsonProperty(PropertyName = "dialCode")]
    public string DialCode { get; set; }

    internal static Country BuildCountry(dynamic expando)
    {
        return new Country
        {
            Id = expando.Id,
            Name = expando.name,
            IsoCode = expando.isoCode,
            DialCode = expando.dialCode
        };

    }
} 
```

# android - 如何创建自动将其图像调整为不同的移动屏幕尺寸的 HTML 页面？

> ID：14580695
> 
> 赞同：12
> 
> 时间：2013-01-29T10:26:06.827
> 
> 标签：android, html, mobile

我想创建一些 HTML 页面，这些页面将显示在不同的移动设备上。我希望它们能够自动适应不同的手机屏幕尺寸。

HTML 页面包括文本和图像。图像可能大于 600x450，但如果移动屏幕（例如）为 280x320，则图像应自动调整其大小以适应。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T10:48:44.950

如果您正在谈论的页面实际上只包含文本和图像，那么我认为您在每个 HTML 页面中需要做的就是：

1.  在标签内添加这个[视口元](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)`<head>`标签：

    ```
    <meta name="viewport" content="width=device-width"> 
    ```

    这应该使页面以合理的大小呈现。

2.  `<style>`在标签内添加这个`<head>`标签：

    ```
    <style>
    img {
        max-width: 100%;
    }
    </style> 
    ```

    我*认为*这将确保所有图像都不会呈现比应用程序的 webview 视口更宽的范围。

    （如果这不起作用，请尝试`width: 100%;`。这肯定会使所有图像与视口一样宽，因此不会更宽。）

但是，您的问题有点过于笼统：我们最终可能会写一本涵盖所有可能性的书。您能否将其更具体地用于您实际正在处理的代码？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T10:33:33.410

这种技术被称为流体或自适应布局，这里有一个很好的[介绍](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:30:24.757

媒体查询是做你想做的最好的方式。

像往常一样设置你的 html 和样式表，但在你的 CSS 文档的末尾使用类似于下面的代码的东西。您将需要针对不同的设备宽度和布局制定不同的查询，但这应该可以帮助您入门。

```
/* iPHONE 3-4 + RETINA PORTRAIT STYLES */
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) and (max-device-height: 480px) and (orientation:portrait) {
    /* Your adjusted CSS goes here */
}

/* iPHONE 3-4 + RETINA LANDSCAPE STYLES */
@media only screen and (max-device-width: 480px) and (min-device-width: 320px) and (max-device-height: 480px) and (orientation:landscape) {
    /* Your adjusted CSS goes here */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:35:03.843

这里有很多选项，最详细的要在一个问题中讨论。

没有“自动”的方式来做到这一点——它必须手动编码。我能想到的三个选项，需要更多调查：

1.  使用 User-Agent http 标头来识别正在连接的设备并将用户重定向到所需的网站模板。
2.  使用 JavaScript 执行与上述相同的操作。
3.  使用 CSS 来控制每个对象的大小。您可以强制每个对象为整个屏幕大小的百分比，而不是固定值。CSS 还提供了一种基于给定屏幕尺寸指定样式的方法：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T10:36:35.330

您可以使用媒体查询使您的布局具有响应性，这意味着修复所有小、中、大屏幕。

有关更多详细信息，您可以访问本教程 -[通过简单的步骤学习响应式设计](http://blog.klassicweb.com/learn-responsive-design-in-easy-steps/)

# javascript - 启用 Ajax 的网上商店

> ID：14580697
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:08.713
> 
> 标签：javascript, html

我想创建基于 ajax 的网上商店（例如 extjs）。它不适用于某些移动设备和浏览器中禁用 js 的用户。这可能是大约 5% 的用户。我会忽略禁用 javascript 的用户，但我不能忽略搜索引擎。最痛苦的是它不会被搜索引擎抓取。谷歌有一些“复杂”的规则如何为他们的搜索引擎实现这一点，但这不适用于所有其他搜索引擎。所以，我想知道，处理这类问题的最佳方法是什么？可能您必须创建单独的网站，启用 js 和禁用 js 的网站？

然后在每个页面的标题中使用标签将所有禁用 js 的用户（或搜索引擎）重定向到没有 js 的网站。

这是很多痛苦。是否有一些指导方针可以以最少的努力实现这一目标？我还想在没有任何 java 脚本的情况下保留纯 html 以避免双重网站编程。你如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T11:42:15.230

您可以为商店中的产品目录创建 XML 站点地图，所有搜索引擎都可以理解：[http ://www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)

然后，搜索引擎是否可以抓取您的网站并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:29:46.830

我建议研究渐进增强： [http ://alistapart.com/article/progressiveenhancementwithjavascript](http://alistapart.com/article/progressiveenhancementwithjavascript)

这意味着虽然应用程序将为大多数用户使用 AJAX，但那些没有 javascript 的用户只会看到页面刷新而不是立即更新。

这并不意味着您需要两次编写站点，只是意味着您需要考虑 JS 并以它在原始功能之上工作的方式编写。

这也意味着网络爬虫可以找到您的内容。

# javascript - jQuery：Microsoft JScript 运行时错误：需要对象

> ID：14580698
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:10.630
> 
> 标签：javascript, jquery

我是 jQuery 的新手。我正在尝试根据复选框的选择显示或隐藏跨度。这是我的代码：

```
<script type = "text/javascript">
    $('#chkShowDescriptions').change(function () {
        var display = this.checked ? 'block' : 'none';
        $('.desc').css('display', display);
    }
    );
</script>

<p>
    <input type = "checkbox" id = "chkShowDescriptions" 
     name = "chkShowDescriptions" />Show Descriptions
</p>

@if(@item.Description != null)
{
    <span class = "desc" style = 
    "font-size: 0.7em; color: Gray; text-align: 
    justify; display: none;">
    Description: @item.Description<br />
    </span>
} 
```

但是，我得到一个运行时异常，它说：`Microsoft JScript runtime error: Object expected`

我在 Windows 7 上使用 IE 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:29:59.623

试试这个，让我知道它是如何工作的。

```
<script type = "text/javascript">
    $('#chkShowDescriptions').change(function () {
        $('.desc').toggle();
    });
</script> 
```

编辑：您在哪一行收到此错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:35:12.903

我找到了错误的原因。或者我认为。

我想我在包含 jQuery 库声明/包含之前放置了脚本标记声明。

# php - 使用 phpExcel 类型数字 % 符号未出现在数字单元格中

> ID：14580699
> 
> 赞同：1
> 
> 时间：2013-01-29T10:26:14.290
> 
> 标签：php, phpexcel

当我使用以下代码时，我正在使用以下代码在 Excel 工作表中显示百分比，它从工作表中隐藏“ **%** ”百分号它显示 29 而不是 29% 我想制作这个数字，但想用“%”符号显示它

```
$objPHPExcel->getActiveSheet()
 ->setCellValueExplicit('A1', '29%', PHPExcel_Cell_DataType::TYPE_NUMERIC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:34:38.170

```
$objPHPExcel->getActiveSheet()->setCellValue('A1', 29);
$objPHPExcel->getActiveSheet()->getStyle('A1')
    ->getNumberFormat()->setFormatCode(
        '0 "%"'
); 
```

# java - 在linux中附加依赖jar和项目jar

> ID：14580700
> 
> 赞同：2
> 
> 时间：2013-01-29T10:26:14.360
> 
> 标签：java, linux, jar, javafx-2, executable-jar

我正在尝试使用 JavaFX 在 swing 项目的 linux 上运行 jar 文件。我已经在 linux 上安装了 JRE7。

我的项目 jar 使用了两个 jar：**jfxrt.jar**和**lucene.jar**。我已将 jar 复制到*/home/projectdir/lib/*并通过以下命令设置类路径

```
 export CLASS PATH=/home/projectdir/lib/jarfilename.jar 
```

但是在以下命令的帮助下运行我的项目 jar 时仍然出现错误：

```
 java -jar projectjar.jar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:31:27.967

你在环境变量中有一个错字：它应该是 CLASSPATH （中间没有空格）。你还需要把两个罐子都放进去：

```
export CLASSPATH=/home/projectdir/lib/jfxrt.jar:/home/projectdir/lib/lucene.jar:projectjar.jar 
```

或更好地使用相对路径：

```
export CLASSPATH=lib/jfxrt.jar:lib/lucene.jar:projectjar.jar 
```

但是您必须使用主类名，而不是-jar，正如另一个答案中所指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:49:21.627

AFAIK，使用 -jar 选项时会忽略类路径设置。使用 -cp 选项并在命令行上指定主类。

从文档中：

[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#jar](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#jar)

> -罐
> 
> 执行封装在 JAR 文件中的程序。第一个参数是 JAR 文件的名称，而不是启动类名称。为了使此选项起作用，JAR 文件的清单必须包含格式为 Main-Class: classname 的行。在这里，classname 标识具有用作应用程序起点的 public static void main(String[] args) 方法的类。有关使用 Jar 文件和 Jar 文件清单的信息，请参阅 Jar 工具参考页面和 Java 教程的 Jar 跟踪。使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

# linux - 通过终端选择性地从分隔文件中提取字段

> ID：14580705
> 
> 赞同：1
> 
> 时间：2013-01-29T10:26:30.087
> 
> 标签：linux, bash, unix, awk, grep

如果我有一个分隔文件，例如；

```
A=1|B=2|C=3|D=4|E=5|F=6 
```

我想提取某些字段并仅使用标准 unix 工具（即 grep、awk、cut）将它们打印在一行上。我怎么能这样做？

文本字段可能并不总是以相同的顺序排列，并且一行可能比另一行多。我希望能够根据它们的开头选择字段。

因此，上面对 A= 和 C= 的查询应该将以下内容输出为一行；

```
A=1 C=2 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:32:44.363

我建议使用支持将 RS 指定为正则表达式的 awk 版本，例如 gawk 或 mawk：

```
echo 'A=1|B=2|C=3|D=4|E=5|F=6' | 
  awk -v RS='[|\n]' -v ORS=' ' -v pat='(A|C)=' '$0 ~ pat'; echo 
```

或者如果你想避免最后的回声：

```
echo 'A=1|B=2|C=3|D=4|E=5|F=6' | 
  awk -v RS='[|\n]' -v ORS=' ' -v pat='(A|C)=' '$0 ~ pat; END { printf "\n" }' 
```

我的最爱：

```
echo 'A=1|B=2|C=3|D=4|E=5|F=6' | 
  awk '$0 ~ pat' RS='[|\n]' ORS=' ' pat='(A|C)='; echo 
```

输出：

```
A=1 C=3 
```

### 编辑

错误修复，换行符也应该被视为记录分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:31:30.730

这符合您的需求吗？

```
kent$  echo "A=1|B=2|C=3|D=4|E=5|F=6"|grep -Po "(?<=\||^)(A=|C=)[^|]*"
A=1
C=3 
```

如果你想要它在单行，管道它`tr '\n' ' '`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:49:31.580

你也可以使用这个：

```
awk -F"|" '{for(i=1;i<=NF;i++){if($i~/[A|C]\=/)printf $i" "}}' 
```

你也可以使用 perl：

```
perl -lne 'push @a,/[A|C]=\d+/g;END{print "@a"}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T02:57:02.870

使用 sed

`sed -re 's/(A=[0-9]+)(.*)(C=[0-9]+)(.*)/\1 \3/' temp.txt`

输出

`A=1 C=3`

# php - Zend Framework DB 删除方法去除值

> ID：14580706
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:30.973
> 
> 标签：php, zend-framework, zend-db

我试图根据条件从数据库中删除记录。查询非常简单，但我仍然得到奇怪的结果。我想在 ZF 做什么：

```
$where = array(
               $db->quoteInto('name = ?', $name),
               $db->quoteInto('surname = ?', $surname)
         );

$db->delete('users', $where); 
```

在尝试调试时，我得到：

```
DELETE FROM `users` WHERE (name = 'John') AND (surname = 'Johnson') 
```

什么是正确且有效的 SQL 语句。但后来我的价值观被剥夺了，所以我得到这样的查询：

```
DELETE FROM `users` WHERE (name = ) AND (surname = ) 
```

根据调试结果，这发生在`Zend_Db_Statement`类（Statement.php）、`_stripQuoted`方法中。

因此，最终结果不是删除了一条记录，而是清除了整个表。

我已经将文档和 Google 搜索到了与我的情况非常接近的示例。所以我不明白这有什么问题？

Zend 框架版本：1.12

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:57:41.200

删除的第二个参数应该是一个字符串。所以我想你想要：

```
$where = $db->quoteInto('name = ?', $name).' AND '.$db->quoteInto('surname = ?', $surname);    
$db->delete('users', $where); 
```

# ios - MKMapView 多标注显示

> ID：14580707
> 
> 赞同：-2
> 
> 时间：2013-01-29T10:26:31.893
> 
> 标签：ios, mkmapview

我想在我的地图视图中显示多个图钉（不点击）的标注。怎么做？是否有任何默认方式或是否有任何可用的库。如果您能引用我的示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:30:51.350

这是不可能的，因为标注指示用户点击了哪个引脚。我也不知道有任何第三方库会增加对此的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:41:32.623

虽然使用常规标注可能无法实现，但如果您想要的弹出窗口不是交互式的，您可以通过使 MKAnnotationView 看起来像一个展开的窗口来伪造它。

# vb.net - 在winforms应用程序运行时存储密码以访问/更改密码的最佳方法是什么？

> ID：14580709
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:33.377
> 
> 标签：vb.net, winforms, passwords, store, updates

完成数据库连接字符串需要密码。密码每月更改一次。我想检测密码何时更改并询问用户新密码并将其存储以供下次执行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:29:01.783

您可以使用 ConfigurationManager 类将密码保存在应用程序配置文件中，使用 SecureString 类保护密码，然后使用 Cryptography 命名空间中的工具对其进行加密。

[关联](https://stackoverflow.com/questions/2681580/how-to-store-user-settings-username-password-in-a-windows-application-for-the)

# javascript - 使用 javascript 获取我当前的地址

> ID：14580715
> 
> 赞同：6
> 
> 时间：2013-01-29T10:26:42.753
> 
> 标签：javascript, jquery, google-maps, geolocation

我对使用 Javascript 获取当前地址很感兴趣，只是通过组装其他一些 SO 线程（[1](https://stackoverflow.com/questions/8951346/javascript-function-convert-geolocation-code-to-street-adress)、[2](https://stackoverflow.com/questions/3397585/navigator-geolocation-getcurrentposition-sometimes-works-sometimes-doesnt)）来解决这个问题，所以想发布这个问题和答案。

请看下面的答案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T10:30:35.287

这是HTML：

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<p id='latitudeAndLongitude'></p>
<p id='address'></p> 
```

这是JS：

```
var latitudeAndLongitude=document.getElementById("latitudeAndLongitude"),
location={
    latitude:'',
    longitude:''
};

if (navigator.geolocation){
  navigator.geolocation.getCurrentPosition(showPosition);
}
else{
  latitudeAndLongitude.innerHTML="Geolocation is not supported by this browser.";
}

function showPosition(position){ 
    location.latitude=position.coords.latitude;
    location.longitude=position.coords.longitude;
    latitudeAndLongitude.innerHTML="Latitude: " + position.coords.latitude + 
    "<br>Longitude: " + position.coords.longitude; 
    var geocoder = new google.maps.Geocoder();
    var latLng = new google.maps.LatLng(location.latitude, location.longitude);

 if (geocoder) {
    geocoder.geocode({ 'latLng': latLng}, function (results, status) {
       if (status == google.maps.GeocoderStatus.OK) {
         console.log(results[0].formatted_address); 
         $('#address').html('Address:'+results[0].formatted_address);
       }
       else {
        $('#address').html('Geocoding failed: '+status);
        console.log("Geocoding failed: " + status);
       }
    }); //geocoder.geocode()
  }      
} //showPosition 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T10:48:19.857

使用[HTML5 地理位置：](http://codeheaven.org/find-position-on-google-map-using-html5-geolocation-for-android-and-iphone.html)

```
function GetGeolocation() {

navigator.geolocation.getCurrentPosition(GetCoords, GetError);

}

function GetCoords(position){

  alert(position.coords.latitude);

  alert(position.coords.longitude);

  alert(position.coords.accuracy);

 var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
geocoder.geocode({'latLng': latlng}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    if (results[1]) {
      map.setZoom(11);
      marker = new google.maps.Marker({
          position: latlng,
          map: map
      });
      infowindow.setContent(results[1].formatted_address);
      infowindow.open(map, marker);
    }
  } else {
    alert("Geocoder failed due to: " + status);
  }
});

} 
```

# gtk - Alsa 混音器和 GtkVolumeButton

> ID：14580720
> 
> 赞同：0
> 
> 时间：2013-01-29T10:26:58.587
> 
> 标签：gtk, alsa

我编写代码来获取和设置 alsa 混音器音量：

```
snd_mixer_elem_t *elem = NULL;
long alsa_min, alsa_max, alsa_vol;

int alsa_get_volume( void )
{
    long val;
    assert (elem);

    if (snd_mixer_selem_is_playback_mono(elem)) {
        snd_mixer_selem_get_playback_volume(elem, SND_MIXER_SCHN_MONO, &val);
        return val;
    } else {
        int c, n = 0;
        long sum = 0;
        for (c = 0; c <= SND_MIXER_SCHN_LAST; c++) {
                if (snd_mixer_selem_has_playback_channel(elem, c)) {
                        snd_mixer_selem_get_playback_volume(elem, SND_MIXER_SCHN_FRONT_LEFT, &val);
                        sum += val;
                        n++;
                }
        }
        if (! n) {
                return 0;
        }
        val = sum / n;
        sum = (long)((double)(alsa_vol * (alsa_max - alsa_min)) / 100\. + 0.5);
        if (sum != val) {
           alsa_vol = (long)(((val * 100.) / (alsa_max - alsa_min)) + 0.5);
        }
        return alsa_vol;
    }
}

int alsa_set_volume( int percentdiff )
{
    long volume;

    alsa_get_volume();

    alsa_vol += percentdiff;
    if( alsa_vol > 100 ) alsa_vol = 100;
    if( alsa_vol < 0 ) alsa_vol = 0;

    volume = (long)((alsa_vol * (alsa_max - alsa_min) / 100.) + 0.5);

    snd_mixer_selem_set_playback_volume_all(elem, volume + alsa_min);
    snd_mixer_selem_set_playback_switch_all(elem, 1);
    muted = 0;
    mutecount = 0;

    return alsa_vol;
} 
```

我不会通过 GtkVolumeButton 来改变 alsa 混音器的音量。试过这个，但是当 gtk 按钮的值向上或向下改变时，alsa 混合器总是跳到 100%：

```
int gtk_volume_button_get_value (GtkWidget *button)
{
    return (int) (gtk_scale_button_get_value(GTK_SCALE_BUTTON(button)) * 100);
}

void gtk_volume_button_set_value (GtkWidget *button, int value)
{
    gtk_scale_button_set_value(GTK_SCALE_BUTTON(button), (gdouble) value / 100);
}

void volume_value_changed_cb(GtkVolumeButton *button, gpointer user_data)
{
    int vol = (int)(gtk_volume_button_get_value(volume_button) + 0.5);

    alsa_set_volume(vol);
} 
```

请帮我为 GtkVolumeButton 编写一个正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:02:19.763

您的问题与 GtkVolume 无关。事实上，它源于您使用两种不同的方法来处理音量。`alsa_get_volume`给你一个绝对声级，它是一个整数。人们会期望`alsa_set_volume`接受相同的值范围。这就是您如何使用它`volume_value_changed_cb`： « 获取音量控制的音量级别，介于 0 和 100 之间，并将其设置为当前音量。»。

但是，实现方式完全不同。它的实现就像你想告诉它“添加或减去当前音量的 x%”。您获得当前音量级别并添加该百分比，因此您计算的是相对声级，而不是绝对声级。因此，如果您的初始声级为 50%，而您想将其降低到 45%，那么人们会期望您会打电话`alsa_set_volume (45)`要求这样做。但目前，跟注`alsa_set_volume (45)`将设置`alsa_vol`为 50 + 45 = 95%。

所以你需要使用绝对量，而不是相对量。

```
/* newvol: Desired volume level in the [0;100] range */
int alsa_set_volume (int newvol)
{
    long volume;

    alsa_vol = CLAMP(absvol, 0, 100);

    volume = (long)((alsa_vol * (alsa_max - alsa_min) / 100.) + alsa_min);

    snd_mixer_selem_set_playback_volume_all(elem, volume);
    snd_mixer_selem_set_playback_switch_all(elem, 1);
    muted = 0;
    mutecount = 0;

    return alsa_vol;
} 
```

# objective-c - 当方向发生在横向模式时，我希望 presentview 及其内容在滚动视图上

> ID：14580723
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:27:04.933
> 
> 标签：objective-c, ios6, uiscrollview, xcode4.5

当我从纵向模式切换到横向模式时，视图应该扩大，但长度应该相同并且在滚动视图中，这样当我滚动时应该显示完整内容：

```
if (([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeLeft) ||
    ([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeRight))
{
    UIScrollView *scrollView=[[UIScrollView alloc] init];
    UIView *view1 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 480, 480)];
    view1 = self.view;
    [scrollView addSubview:view1];
    scrollView.frame = CGRectMake(0, 0, 480, 480);
    scrollView.contentSize = CGSizeMake(480, 480);
    scrollView.delegate = self;
    scrollView.alwaysBounceVertical = YES;
    [self.view addSubview:scrollView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:47:20.547

请用更多信息更新您的问题，例如 - 什么有效和无效？不要将更新添加为评论，编辑您的问题。

在您现有的代码中，至少这是错误/混淆的：

```
 UIView *view1 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 480, 480)];
 view1 = self.view; 
```

您在第一行中分配一个指向新视图的指针，然后在第二行中将其重新分配给您现有的 self.view 。那么这里：

```
 [self.view addSubview:scrollView]; 
```

您正在将包含内容视图的滚动视图添加到同一内容视图。那是行不通的。

作为更清洁的解决方案，为什么不为*两个*方向设置滚动视图/子视图组合。然后当你旋转时，你只需要改变你的滚动视图的内容大小。

对于正常的直立方向：

```
 self.scrollview.contentSize = self.scrollview.bounds.size; 
```

对于风景：

```
 self.scrollview.contentSize =
         CGSizeMake(self.scrollView.bounds.size.width, self.contentView.bounds.size.height 
```

（假设您的内容位于 scrollView 内的名为 contentView 的视图中）

您应该能够`contentOffset`使故事板中的两个方向都正常工作，但如果不能，您可以在代码中为每个方向设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T06:21:08.543

```
if(([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeLeft) || ([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeRight)) { 
UIScrollView * scrollView=[[UIScrollView alloc] init]; UIView *view1 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 480, 480)]; 
view1 = self.view; [scrollView addSubview:view1]; scrollView.frame = CGRectMake(0, 0, 480, 480);           
scrollView.contentSize = CGSizeMake(480, 480); scrollView.delegate = self; 
scrollView.alwaysBounceVertical = YES; [self.view addSubview:scrollView]; 
} 
```

# java - 在 Eclipse 中部署期间使用变量

> ID：14580726
> 
> 赞同：0
> 
> 时间：2013-01-29T10:27:14.633
> 
> 标签：java, eclipse, jakarta-ee, ant

我确实有一些配置文件。目前这些文件完全是手动编写的。但是有些部分确实会不时更改，例如版本号或当前年份。在我的 ant 脚本中，我可以在配置文件中定义一些变量，并在部署期间用当前值替换这些变量。但我确实使用 ant 进行全自动夜间构建。对于软件的正常和交互式工作，我确实直接使用 Eclipse，没有任何 ant 目标。

有谁知道如何在 Eclipse 部署中替换这些变量？

当然，我可以保留我的源配置文件和变量，并使用 ant 在部署和使用的源文件夹中创建最终配置文件，所以两者都被签入。但这也是多余的信息，看起来像黑客大部头书！

因为误会太多：

我想在文本中有一个源配置文件，例如@MY-VAR@。在部署期间，此占位符将替换为编译时已知的变量值。蚂蚁可以做到这一点。我可以用 Eclipse 做类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:38:56.083

你如何读取变量？我会选择系统范围的属性，这也适用于 Linux 和 Windows 平台，并且可以在计算机之间进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:41:09.323

你在用 Java 开发吗？

这会有帮助吗？
[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_run_env.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_run_env.htm)

# c# - 文件上传和最大长度

> ID：14580727
> 
> 赞同：-3
> 
> 时间：2013-01-29T10:27:20.820
> 
> 标签：c#, asp.net, .net, file-upload

我正在尝试解决一个问题。我想用 fileupload 控件上传一个最大长度为 10mb 的文件（例如）。我对文件的尺寸进行了所有控制，但是当我尝试上传大于 10mb 的文件时，浏览器会显示“页面错误”页面。

有没有办法通过服务器端拦截错误？

谢谢你们

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
        StatusLabel.Text = Server.MapPath("~/prova")
                         + FileUpload1.PostedFile.FileName;

    if (!IsPostBack)
    {
        var config = WebConfigurationManager.OpenWebConfiguration("~");
        var section = config.GetSection("system.web/httpRuntime")
                                     as HttpRuntimeSection;
        section.MaxRequestLength = 10485760*200;
    }

    HyperLink hl = new HyperLink();
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
    {
        if (Page.IsValid)
        {
            try
            {
                string filename = Path.GetFileName(FileUpload1.FileName);
                FileUpload1.SaveAs(Server.MapPath("~/prova") + filename);
            }
            catch (Exception ex)
            {
                StatusLabel.Text = "Upload status: The file could not be"
                                 + " uploaded. The following error occured: "
                                 + ex.Message;
            }
        }
    }
}

protected void CustomValidator1_ServerValidate(object source,
                                               ServerValidateEventArgs args)
{
    if (FileUpload1.FileContent.Length < 10485760)
    {
        args.IsValid = true;
    }
    else
    {
        args.IsValid = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:49:28.600

您需要更改 maxRequestLength。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.web>
    <httpRuntime maxRequestLength="102400" executionTimeout="1200" />
</system.web>
</configuration> 
```

如果你想拦截异常，那么你需要在 Global.asax 中处理它。这是 [代码示例的链接](http://geekswithblogs.net/sglima/archive/2011/09/20/how-to-handle-maximum-request-length-exceeded-exception.aspx)

# git - 我可以使用 git 丢失文件吗？

> ID：14580729
> 
> 赞同：1
> 
> 时间：2013-01-29T10:27:23.907
> 
> 标签：git

我正在用 git 做第一步。只是想问是否存在我可以丢失git跟踪的文件的情况？

让我解释一下我的意思。我一直在关注一个 git 教程。首先，我已将文件添加到 git 存储库。

```
git add README
git commit -m "readme" 
```

然后我删除了文件。

```
git rm README 
```

由于我是一个完整的新手，我一直期待这个命令会停止跟踪我的存储库中的自述文件。然而，自述文件已经消失了。我害怕永远失去它。

幸运的是，有一个“git reset --hard”命令可以取回我的 README。但是我本可以进行更改，因此此命令无济于事。幸运的是，在这种情况下，我可以执行“git reset --hard *hash* ”或“git revert”来让我的 README 恢复。

所以，基本上我的问题是在某些情况下我可以删除文件并且无法取回它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:31:04.390

`git rm README`***将从跟踪索引和工作树***中删除该文件。

如果您只想停止跟踪文件，可以使用：

```
git rm --cached README 
```

请参阅：[从 git 中删除文件](https://stackoverflow.com/questions/13974595/removing-files-from-git/13974943#13974943)

# delphi - 如何在 Delphi XE3 FireMonkey 2 的 TTabControl 的每个选项卡上实现关闭按钮？

> ID：14580733
> 
> 赞同：2
> 
> 时间：2013-01-29T10:27:27.123
> 
> 标签：delphi, tabcontrol, delphi-xe3, firemonkey-fm2

我正在尝试创建一个浏览器样式的 TabControl，在 FireMonkey FM2 的每个选项卡上都有一个小的关闭按钮。

由于 FM2 中没有 TTabsheet 和 TPageControl 组件，我无法使用“[如何为 TPageControl 的 TTabsheet 实现关闭按钮”中的答案](https://stackoverflow.com/questions/2201850/how-to-implement-a-close-button-for-a-ttabsheet-of-a-tpagecontrol)。我猜，这段代码提供了太多未声明的函数和变量，这些函数和变量在 FM2 中不再支持。

我不想使用任何第三方组件，因为你永远不知道它们是否会支持下一个版本的 Delphi :)

我可以提供在 Delphi XE3 VCL（但不是 FireMonkey）中运行良好的完整代码：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, Math, Vcl.Themes;

type
  TFormMain = class(TForm)
    PageControlCloseButton: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    TabSheet3: TTabSheet;
    procedure FormCreate(Sender: TObject);
    procedure PageControlCloseButtonMouseLeave(Sender: TObject);
    procedure PageControlCloseButtonMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure PageControlCloseButtonMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
    procedure PageControlCloseButtonMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure PageControlCloseButtonDrawTab(Control: TCustomTabControl; TabIndex: Integer; const Rect: TRect; Active: Boolean);

  private
    FCloseButtonsRect: array of TRect;
    FCloseButtonMouseDownIndex: Integer;
    FCloseButtonShowPushed: Boolean;
  public
    { Public declarations }
  end;

var
  FormMain: TFormMain;

implementation

{$R *.dfm}

procedure TFormMain.FormCreate(Sender: TObject);
var
  I: Integer;
begin

  PageControlCloseButton.TabWidth := 150;
  PageControlCloseButton.OwnerDraw := True;

  //should be done on every change of the page count
  SetLength(FCloseButtonsRect, PageControlCloseButton.PageCount);
  FCloseButtonMouseDownIndex := -1;

  for I := 0 to Length(FCloseButtonsRect) - 1 do
  begin
    FCloseButtonsRect[I] := Rect(0, 0, 0, 0);
  end;

end;

procedure TFormMain.PageControlCloseButtonDrawTab(Control: TCustomTabControl; TabIndex: Integer; const Rect: TRect; Active: Boolean);
var
  CloseBtnSize: Integer;
  PageControl: TPageControl;
  TabCaption: TPoint;
  CloseBtnRect: TRect;
  CloseBtnDrawState: Cardinal;
  CloseBtnDrawDetails: TThemedElementDetails;
const
  UseThemes: boolean=true;
begin
  PageControl := Control as TPageControl;

  if InRange(TabIndex, 0, Length(FCloseButtonsRect) - 1) then
  begin
    CloseBtnSize := 14;
    TabCaption.Y := Rect.Top + 3;

    if Active then
    begin
      CloseBtnRect.Top := Rect.Top + 4;
      CloseBtnRect.Right := Rect.Right - 5;
      TabCaption.X := Rect.Left + 6;
    end
    else
    begin
      CloseBtnRect.Top := Rect.Top + 3;
      CloseBtnRect.Right := Rect.Right - 5;
      TabCaption.X := Rect.Left + 3;
    end;

    CloseBtnRect.Bottom := CloseBtnRect.Top + CloseBtnSize;
    CloseBtnRect.Left := CloseBtnRect.Right - CloseBtnSize;
    FCloseButtonsRect[TabIndex] := CloseBtnRect;

    PageControl.Canvas.FillRect(Rect);
    PageControl.Canvas.TextOut(TabCaption.X, TabCaption.Y, PageControl.Pages[TabIndex].Caption);

    if not UseThemes then
    begin
      if (FCloseButtonMouseDownIndex = TabIndex) and FCloseButtonShowPushed then
        CloseBtnDrawState := DFCS_CAPTIONCLOSE + DFCS_PUSHED
      else
        CloseBtnDrawState := DFCS_CAPTIONCLOSE;

        DrawFrameControl(PageControl.Canvas.Handle,
        FCloseButtonsRect[TabIndex], DFC_CAPTION, CloseBtnDrawState);
    end
    else
    begin
      Dec(FCloseButtonsRect[TabIndex].Left);

      if (FCloseButtonMouseDownIndex = TabIndex) and FCloseButtonShowPushed then
        CloseBtnDrawDetails := ThemeServices.GetElementDetails(twCloseButtonPushed)
      else
        CloseBtnDrawDetails := ThemeServices.GetElementDetails(twCloseButtonNormal);

      ThemeServices.DrawElement(PageControl.Canvas.Handle, CloseBtnDrawDetails,
        FCloseButtonsRect[TabIndex]);
    end;

  end;
end;

procedure TFormMain.PageControlCloseButtonMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var
  I: Integer;
begin
  if Button = mbLeft then
  begin
    for I := 0 to Length(FCloseButtonsRect) - 1 do
    begin
      if PtInRect(FCloseButtonsRect[I], Point(X, Y)) then
      begin
        FCloseButtonMouseDownIndex := I;
        FCloseButtonShowPushed := True;
        PageControlCloseButton.Repaint;
      end;
    end;
  end;
end;

procedure TFormMain.PageControlCloseButtonMouseMove(Sender: TObject;
  Shift: TShiftState; X, Y: Integer);
var
  Inside: Boolean;
begin
   if (ssLeft in Shift) and (FCloseButtonMouseDownIndex >= 0) then
  begin
    Inside := PtInRect(FCloseButtonsRect[FCloseButtonMouseDownIndex], Point(X, Y));

    if FCloseButtonShowPushed <> Inside then
    begin
      FCloseButtonShowPushed := Inside;
      PageControlCloseButton.Repaint;
    end;
  end;
end;

procedure TFormMain.PageControlCloseButtonMouseLeave(Sender: TObject);
var
  PageControl: TPageControl;
begin
   FCloseButtonShowPushed := False;
  PageControlCloseButton.Repaint;
end;

procedure TFormMain.PageControlCloseButtonMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var
  PageControl: TPageControl;
begin

  if (Button = mbLeft) and (FCloseButtonMouseDownIndex >= 0) then
  begin
    if PtInRect(FCloseButtonsRect[FCloseButtonMouseDownIndex], Point(X, Y)) then
    begin
      PageControlCloseButton.Pages[PageControlCloseButton.ActivePageIndex].TabVisible := false;
      PageControlCloseButton.ActivePageIndex := 0;

      FCloseButtonMouseDownIndex := -1;
      PageControlCloseButton.Repaint;
    end;
  end;
 end;

end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-12T10:06:14.203

在 github 上有一个开源组件，它在此链接[https://github.com/jkour/neTabControl](https://github.com/jkour/neTabControl)上扩展了基础 FMX TTabControl，您可以在其中了解如何自行操作。

# java - 嵌入式 Jetty jar 生成

> ID：14580734
> 
> 赞同：1
> 
> 时间：2013-01-29T10:27:27.697
> 
> 标签：java, embedded-jetty

我是码头的新手，我对码头的嵌入式模式感到非常沮丧。这就是我正在做的事情。我在我的 java 应用程序中嵌入了 jetty web 容器。我在项目的源文件夹中创建了一个 WebContent 文件夹（它是一个 Eclipse 项目）。我创建了一个 web.xml 文件来处理 servlet。但是，当我在 eclipse 中运行它时，应用程序运行良好，但是当我从 eclipse 构建可运行的 jar 文件并运行以下命令 java -jar app.jar 并尝试加载 index.jsp 页面时，我收到 404 错误消息。请帮忙。有人可以告诉我将 WebContent 文件夹放在哪里或如何从 eclipse 生成 jar 文件吗？

# c# - 如何为文本框添加回复按钮

> ID：14580743
> 
> 赞同：-9
> 
> 时间：2013-01-29T10:28:12.427
> 
> 标签：c#, asp.net, webforms

单击按钮时，将显示 5 个文本框。我必须添加一个按钮来回复最后一个文本框 - 谁能告诉我怎么做？

这是我的代码：

```
protected void GenTextBox(object sender, EventArgs e)
{
    for (i = 1; i <= TotalReplys; i++)
    {
        HtmlGenericControl lineBreak = new HtmlGenericControl("br");
        Page.Controls.Add(lineBreak);

        TextBox MyTextBox = new TextBox();

        MyTextBox.ID = i.ToString();
        MyTextBox.Width = 540;
        MyTextBox.Height = 60;
        MyTextBox.Text = "Get the value from the database";
        MyTextBox.TextMode = TextBoxMode.MultiLine;

        Panel1.Controls.Add(MyTextBox);

        Panel1.Controls.Add(lineBreak);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:03:38.893

一般来说，你在正确的轨道上。使用与生成文本框相同的代码，但将其重新用于生成按钮。

**这里有一些提示可以让你走上正轨**

```
if ( i == TotalReplys ){
  Button MySearchButton = new Button();
  //Set Button Properties
  Panel1.Controls.Add(MySearchButton);
} 
```

我想你要么挂在 if 语句逻辑上，要么可能不知道 Button 对象。无论哪种方式，这都应该让你走上正轨。

# algorithm - 不需要预先定义所需聚类数量的聚类算法

> ID：14580744
> 
> 赞同：0
> 
> 时间：2013-01-29T10:28:13.573
> 
> 标签：algorithm, machine-learning, cluster-analysis

我有一组来自需要集群的搜索引擎的用户查询。到目前为止，我遇到的唯一聚类算法是 K-means 算法，它需要定义聚类的数量。在这种情况下，我不知道数据中存在多少个簇。是否有任何聚类算法允许在不预先定义聚类数量的情况下进行聚类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:15:14.090

有相当多的图聚类算法具有此属性。例如，亲和传播聚类 (APC)、受限邻域搜索聚类算法 (RNSC) 和马尔可夫聚类算法 (MCL)。对于这三个特定的独立软件可用，尽管我在 APC 实施方面遇到了问题（但这是几年前的事了）。

# mysql - 如何将字段预设存储在数据库中？

> ID：14580746
> 
> 赞同：0
> 
> 时间：2013-01-29T10:28:14.777
> 
> 标签：mysql

我必须向用户展示巨大的表格，并且我需要允许用户选择他想要查看的字段。

问题是：将这些字段存储在数据库中的最佳方式是什么？到目前为止，我唯一的想法是创建一个这样的表：

![在此处输入图像描述](../Images/f5c5eb405895872eaa06139b9350fc0a.png)

并将这些字段设置为`0`or `1`，但这对我来说似乎是个坏主意。

什么是野兽方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:27:58.730

让表格为： `(user_id, field_name, enabled)`

**或者**如果也需要显示顺序 `(user_id, field_name, disp_order, enabled)`

选择那些`enabled`反对给定的记录`user_id`（`disp_order`如果需要，按排序）。

# jquery - Jquery DatePicker 设置默认日期

> ID：14580749
> 
> 赞同：32
> 
> 时间：2013-01-29T10:28:23.497
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有两个日期字段，我使用 DatePicker 来选择日期。

对于第一个日期字段，我希望今天的日期作为默认日期。
对于第二个日期字段，我需要`today + 15`天数作为我的默认日期

**jQuery**

```
$("[name=trainingStartFromDate]").datepicker({ dateFormat: 'dd-mm-yy', changeYear: true});
$("[name=trainingStartToDate]").datepicker({ dateFormat: 'dd-mm-yy', changeYear: true}); 
```

如何设置默认日期？

我已经尝试`setDate: new Date()`过第一次约会，但它不起作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-29T10:31:13.890

今天日期：

```
$( ".selector" ).datepicker( "setDate", new Date());
// Or on the init
$( ".selector" ).datepicker({ defaultDate: new Date() }); 
```

从今天起15天：

```
$( ".selector" ).datepicker( "setDate", 15);
// Or on the init
$( ".selector" ).datepicker({ defaultDate: 15 }); 
```

[jQuery 用户界面文档](http://api.jqueryui.com/datepicker/#option-defaultDate)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-01-17T06:32:33.377

创建日期选择器并设置日期。

```
$('.next_date').datepicker({ dateFormat: 'dd-mm-yy'}).datepicker("setDate", new Date()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-19T10:01:16.300

对于今天的日期

```
$(document).ready(function() {
$('#textboxname').datepicker();
$('#textboxname').datepicker('setDate', 'today');}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-29T10:31:02.143

使用[默认日期（）](http://api.jqueryui.com/datepicker/#option-defaultDate)

> 如果该字段为空白，则设置在首次打开时突出显示的日期。通过 Date 对象或当前 [[UI/Datepicker#option-dateFormat|dateFormat]] 中的字符串指定实际日期，或从今天开始的天数（例如 +7）或一串值和句点 ( 'y' 表示年，'m' 表示月，'w' 表示周，'d' 表示天，例如 '+1m +7d'），或 null 表示今天。

试试这个

```
$("[name=trainingStartFromDate]").datepicker({ dateFormat: 'dd-mm-yy', changeYear: true,defaultDate: new Date()});
$("[name=trainingStartToDate]").datepicker({ dateFormat: 'dd-mm-yy', changeYear: true,defaultDate: +15}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-09-09T14:30:27.427

首先，您需要获取当前日期

```
var currentDate = new Date(); 
```

然后你需要把它放在 datepicker 的参数中，如下所示

```
$("#datepicker").datepicker("setDate", currentDate); 
```

检查以下[jsfiddle](http://jsfiddle.net/unt8Y/8/light/)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-10T13:19:34.040

```
<script  type="text/javascript">
    $(document).ready(function () {
        $("#txtDate").datepicker({ dateFormat: 'yy/mm/dd' }).datepicker("setDate", "0");
        $("#txtDate2").datepicker({ dateFormat: 'yy/mm/dd',  }).datepicker("setDate", new Date().getDay+15); });                       </script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-08T09:57:28.640

在 ID="mydate" 的元素输入或日期选择器中显示当前日期的代码

不要忘记添加对 jquery-ui-*.js 的引用

```
 $(document).ready(function () {
        var dateNewFormat, onlyDate, today = new Date();

        dateNewFormat = today.getFullYear() + '-' + (today.getMonth() + 1);

        onlyDate = today.getDate();

        if (onlyDate.toString().length == 2) {
            dateNewFormat += '-' + onlyDate;
        }
        else {
            dateNewFormat += '-0' + onlyDate;
        }
        $('#mydate').val(dateNewFormat);
    }); 
```

# java - 文件名或路径安全问题的外部控制

> ID：14580751
> 
> 赞同：2
> 
> 时间：2013-01-29T10:28:34.683
> 
> 标签：java, security, veracode

我有一个代码

```
File file = new File(fileName) 
```

我`fileName`正在从其他细节做准备。但是，我越来越

> 文件名或路径的外部控制

当我将代码提交到安全扫描工具“Vera Code”时出现缺陷。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:30:34.460

报告的问题意味着有人可以`fileName`从外部修改，例如通过用户输入或修改配置文件。另见[CWE-73：文件名或路径的外部控制](http://cwe.mitre.org/data/definitions/73.html)。

这会导致一个安全漏洞，攻击者可以访问您文件系统上的任何文件，并读取文件甚至覆盖预期文件以外的文件。

您需要检查您的各个部分的**来源**`fileName`。例如，假设用户能够`extn`通过您的 Web UI 提供。如果您在应用程序中使用用户输入而无需进一步验证，则用户可能能够访问他不应该访问的文件：

```
User input: extn="/../etc/passwd"

Resulting fileName: "/certificateId docTypeLongName_FileId/../etc/passwd" 
```

为了解决这个问题，您可以使用**验证**来确保输入不包含特定的字符串，例如`..`，或者您可以使用**白名单**（如果可能的输入范围有限）来确保只提交众所周知的值。

# elasticsearch - Elasticsearch 对相同的文档给出不同的分数

> ID：14580752
> 
> 赞同：19
> 
> 时间：2013-01-29T10:28:39.160
> 
> 标签：elasticsearch

我有一些具有相同内容的文档，但是当我尝试查询这些文档时，尽管查询的字段包含相同的文本，但我得到了不同的分数。我已经解释了分数，但我无法分析并找到不同分数的原因。

我的查询是

```
 curl 'localhost:9200/acqindex/_search?pretty=1' -d '{
    "explain" : true,
    "query" : {           
        "query_string" : {         
            "query" : "text:shimla"
        }
    }     
  }' 
```

搜索响应：

```
{
  "took" : 8,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 31208,
    "max_score" : 268.85962,
    "hits" : [ {
      "_shard" : 0,
      "_node" : "KOebAnGhSJKUHLPNxndcpQ",
      "_index" : "acqindex",
      "_type" : "autocomplete_questions",
      "_id" : "50efec6c38cc6fdabd8653a3",
      "_score" : 268.85962, "_source" : {"_class":"com.ixigo.next.cms.model.AutoCompleteObject","_id":"50efec6c38cc6fdabd8653a3","ad":"rajasthan,IN","category":["Destination"],"ctype":"destination","eid":"503b2a65e4b032e338f0d24b","po":8.772307692307692,"text":"shimla","url":"/travel-guide/shimla"},
      "_explanation" : {
        "value" : 268.85962,
        "description" : "sum of:",
        "details" : [ {
          "value" : 38.438133,
          "description" : "weight(text:shi in 5860), product of:",
          "details" : [ {
            "value" : 0.37811017,
            "description" : "queryWeight(text:shi), product of:",
            "details" : [ {
              "value" : 5.0829277,
              "description" : "idf(docFreq=7503, maxDocs=445129)"
            }, {
              "value" : 0.074388266,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 101.658554,
            "description" : "fieldWeight(text:shi in 5860), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shi)=1)"
            }, {
              "value" : 5.0829277,
              "description" : "idf(docFreq=7503, maxDocs=445129)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=5860)"
            } ]
          } ]
        }, {
          "value" : 66.8446,
          "description" : "weight(text:shim in 5860), product of:",
          "details" : [ {
            "value" : 0.49862078,
            "description" : "queryWeight(text:shim), product of:",
            "details" : [ {
              "value" : 6.7029495,
              "description" : "idf(docFreq=1484, maxDocs=445129)"
            }, {
              "value" : 0.074388266,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 134.05899,
            "description" : "fieldWeight(text:shim in 5860), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shim)=1)"
            }, {
              "value" : 6.7029495,
              "description" : "idf(docFreq=1484, maxDocs=445129)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=5860)"
            } ]
          } ]
        }, {
          "value" : 81.75818,
          "description" : "weight(text:shiml in 5860), product of:",
          "details" : [ {
            "value" : 0.5514458,
            "description" : "queryWeight(text:shiml), product of:",
            "details" : [ {
              "value" : 7.413075,
              "description" : "idf(docFreq=729, maxDocs=445129)"
            }, {
              "value" : 0.074388266,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 148.2615,
            "description" : "fieldWeight(text:shiml in 5860), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shiml)=1)"
            }, {
              "value" : 7.413075,
              "description" : "idf(docFreq=729, maxDocs=445129)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=5860)"
            } ]
          } ]
        }, {
          "value" : 81.8187,
          "description" : "weight(text:shimla in 5860), product of:",
          "details" : [ {
            "value" : 0.55164987,
            "description" : "queryWeight(text:shimla), product of:",
            "details" : [ {
              "value" : 7.415818,
              "description" : "idf(docFreq=727, maxDocs=445129)"
            }, {
              "value" : 0.074388266,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 148.31636,
            "description" : "fieldWeight(text:shimla in 5860), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shimla)=1)"
            }, {
              "value" : 7.415818,
              "description" : "idf(docFreq=727, maxDocs=445129)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=5860)"
            } ]
          } ]
        } ]
      }
    }, {
      "_shard" : 1,
      "_node" : "KOebAnGhSJKUHLPNxndcpQ",
      "_index" : "acqindex",
      "_type" : "autocomplete_questions",
      "_id" : "50efed1c38cc6fdabd8b8d2f",
      "_score" : 268.29953, "_source" : {"_id":"50efed1c38cc6fdabd8b8d2f","ad":"himachal pradesh,IN","category":["Hill","See and Do","Destination","Mountain","Nature and Wildlife"],"ctype":"destination","eid":"503b2a64e4b032e338f0d0af","po":8.781970310391364,"text":"shimla","url":"/travel-guide/shimla"},
      "_explanation" : {
        "value" : 268.29953,
        "description" : "sum of:",
        "details" : [ {
          "value" : 38.52957,
          "description" : "weight(text:shi in 14769), product of:",
          "details" : [ {
            "value" : 0.37895453,
            "description" : "queryWeight(text:shi), product of:",
            "details" : [ {
              "value" : 5.083667,
              "description" : "idf(docFreq=7263, maxDocs=431211)"
            }, {
              "value" : 0.07454354,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 101.67334,
            "description" : "fieldWeight(text:shi in 14769), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shi)=1)"
            }, {
              "value" : 5.083667,
              "description" : "idf(docFreq=7263, maxDocs=431211)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=14769)"
            } ]
          } ]
        }, {
          "value" : 66.67524,
          "description" : "weight(text:shim in 14769), product of:",
          "details" : [ {
            "value" : 0.49850821,
            "description" : "queryWeight(text:shim), product of:",
            "details" : [ {
              "value" : 6.6874766,
              "description" : "idf(docFreq=1460, maxDocs=431211)"
            }, {
              "value" : 0.07454354,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 133.74953,
            "description" : "fieldWeight(text:shim in 14769), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shim)=1)"
            }, {
              "value" : 6.6874766,
              "description" : "idf(docFreq=1460, maxDocs=431211)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=14769)"
            } ]
          } ]
        }, {
          "value" : 81.53204,
          "description" : "weight(text:shiml in 14769), product of:",
          "details" : [ {
            "value" : 0.5512571,
            "description" : "queryWeight(text:shiml), product of:",
            "details" : [ {
              "value" : 7.3951015,
              "description" : "idf(docFreq=719, maxDocs=431211)"
            }, {
              "value" : 0.07454354,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 147.90204,
            "description" : "fieldWeight(text:shiml in 14769), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shiml)=1)"
            }, {
              "value" : 7.3951015,
              "description" : "idf(docFreq=719, maxDocs=431211)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=14769)"
            } ]
          } ]
        }, {
          "value" : 81.56268,
          "description" : "weight(text:shimla in 14769), product of:",
          "details" : [ {
            "value" : 0.55136067,
            "description" : "queryWeight(text:shimla), product of:",
            "details" : [ {
              "value" : 7.3964915,
              "description" : "idf(docFreq=718, maxDocs=431211)"
            }, {
              "value" : 0.07454354,
              "description" : "queryNorm"
            } ]
          }, {
            "value" : 147.92982,
            "description" : "fieldWeight(text:shimla in 14769), product of:",
            "details" : [ {
              "value" : 1.0,
              "description" : "tf(termFreq(text:shimla)=1)"
            }, {
              "value" : 7.3964915,
              "description" : "idf(docFreq=718, maxDocs=431211)"
            }, {
              "value" : 20.0,
              "description" : "fieldNorm(field=text, doc=14769)"
            } ]
          } ]
        } ]
      }
    }
  }
} 
```

这些文件是：

> {"_class":"com.ixigo.next.cms.model.AutoCompleteObject","_id":"50efec6c38cc6fdabd8653a3","ad":"rajasthan,IN","category":["Destination"],"ctype" :"destination","eid":"503b2a65e4b032e338f0d24b","po":8.772307692307692, **"text":"shimla"** ,"url":"/travel-guide/shimla"}
> 
> {"_id":"50efed1c38cc6fdabd8b8d2f","ad":"himachal pradesh,IN","category":["Hill","See and Do","Destination","Mountain","Nature and Wildlife"], "ctype":"destination","eid":"503b2a64e4b032e338f0d0af","po":8.781970310391364," **text":"shimla"** ,"url":"/travel-guide/shimla"}

请指导我理解分数差异的原因。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-29T16:00:56.263

lucene 分数取决于[不同的因素](http://lucene.apache.org/core/3_6_2/scoring.html)。使用 tf idf 相似度（默认一个）主要取决于：

1.  词频：找到的词在文档中的频繁程度
2.  倒排文档频率：找到的词条在文档中出现的频率（同时索引）
3.  字段规范（包括索引时间提升）。较短的字段比较长的字段获得更高的分数。

在您的情况下，您必须考虑到您的两个文档来自不同的分片，因此每个分片的分数都是单独计算的，因为每个分片实际上都是一个单独的 lucene 索引。

您可能想看看更昂贵的[DFS，Query then Fetch 搜索类型](http://www.elasticsearch.org/guide/reference/api/search/search-type.html)，elasticsearch 提供更准确的评分。默认是简单的查询然后获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T15:04:42.647

[javanna](https://stackoverflow.com/a/14587002/4810382)清楚地指出了这个问题，表明分数的差异来自于分数发生在多个分片中的事实。这些分片可能有不同数量的文档。这会影响评分算法。

然而，[Elasticsearch: The Definitive Guide 的](https://www.elastic.co/guide/en/elasticsearch/guide/current/relevance-is-broken.html)作者告知：

> 本地和全局 IDF [逆文档频率] 之间的差异会减少您添加到索引中的更多文档。有了真实世界的数据量，本地 IDF 很快就会平局。问题不在于相关性被破坏，而在于数据太少。

您不应在生产中使用 dfs_query_then_fetch。为了进行测试，请将您的索引放在一个主分片上或指定`?search_type=dfs_query_then_fetch`.

# css - Css 菜单，悬停时不隐藏当前菜单链接

> ID：14580753
> 
> 赞同：5
> 
> 时间：2013-01-29T10:28:43.467
> 
> 标签：css, drop-down-menu

在这里，我以我的菜单[jsfiddle 为例](http://jsfiddle.net/3ZRZz/1/)。所以我有带有下拉菜单的水平菜单，但我需要的是 - 首先`li`应该在页面加载时展开（这并不难），当我将鼠标悬停在任何其他元素上时，它应该显示当前展开的内容（如果我`mouseleave`当前元素应该是展开）。

这是我将鼠标悬停在鼠标离开时的情况，`Item2`它`Item2`应该保持这样的状态：

```
Item1       Item2          Item3
            |||||
subItem2.1  subItem2.2 subItem2.3 
```

**更新：**

我设法做到了，但除了例外，这里是[JSFiddle上的链接](http://jsfiddle.net/3ZRZz/6/)

它可以按我的意愿工作，但是当我单击链接时，`Item1`或者调用函数，并且再次处于活动状态时，我需要以某种方式设置活动链接单击的链接，`Item2``init()``Item1`

例如，如果我单击一个`Item3`链接，它会将我重定向到 Item3 页面，并且此链接在菜单中处于活动状态。[（ Jsfiddle](http://jsfiddle.net/3ZRZz/6/)上的所有代码）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T08:16:23.737

如果我正确理解您的问题，问题是您需要调用 init 函数来重绘所有内容，但同时您将 item1 设置为当前；如果您刚刚按下链接 2，这是不行的。

如果认为您的解决方案应该是几乎删除所有初始化代码。所有这些都可以在 css 样式中完成，大大简化了您的代码。

您将活动设置为项目。（您已经在锚点中执行此操作，在 li 中执行此操作）。然后，把所有的外观样式放在css中，你的脚本就变小了。

不需要在子项上设置活动。你可以设置像li.active li这样的规则；即，作为活动 li 的后代的 li。

完成所有这些操作后，您就可以完全避免使用 init 函数。

**添加小提琴**

我在更新的[小提琴中改变了它](http://jsfiddle.net/3ZRZz/6/)

我将可见项目菜单标记为“当前”，我发现“活动”对类名感到困惑。一定要在li中，而不是在the中，这样才能影响到二级lis

现在脚本只是

```
$(document).ready(function() {
    $("#menu_item ul.menu li.expanded").mouseover(function(){
        var previous = $('.current');
        previous.removeClass('current');          
        $(this).addClass('current');
    });
}); 
```

我只是从前一个当前元素中删除当前元素，并将其添加到新元素中。

最初的选择只是在标记中

```
<div id="menu_item">
    <ul class="menu">
        <li class="expanded first current">
        <a href="#" title="">Item1</a> 
```

新的 CSS 规则是：

```
#menu_item > ul.menu > li.current  {
    background-color: orange;
}
#menu_item ul.menu li ul {
    display: none;
}
#menu_item ul.menu li.current ul {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:38:29.957

我在想，您可能会对以活动状态为目标的 URL 感兴趣。您可以使用 JavaScript 获取当前路径`window.location.pathname`。您可以使用以下方法检查 jQuery：

```
$(".first a[href=" + window.location.pathname + "]").addClass('active'); 
```

这会将活动类添加到与当前路径`.first`具有相同属性的所有锚点中。`href`您可能需要修剪前导斜线。

*   请查看这篇关于[活跃状态](http://code.activestate.com/recipes/576958-method-based-url-dispatcher-for-the-tornado-web-se/)的文章。
*   您可能还对[jQuery UI 选项卡](http://keith-wood.name/uiTabs.html)感兴趣。
*   这是标准实践中的另一个[jQuery UI 选项卡。](http://jqueryui.com/tabs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T11:42:00.407

你应该改变你的风格而不是它可以正常工作。

```
ul.menu li.expanded ul {
  position: relative;
  display: block;
  top: 20px;
  background-color: orange;
} 
```

# ruby-on-rails - 是否可以将文本内容获取到视图中？

> ID：14580758
> 
> 赞同：1
> 
> 时间：2013-01-29T10:28:52.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有这些文件

*   意见/sign_up/new.html.erb
*   意见/sign_up/content.text.erb

我想`content.text.erb`默认显示这个 text_area 中的内容。
我怎样才能？

**意见/sign_up/new.html.erb**

```
<%= text_area :page, :content, :readonly => 'true', :size => '250x10' %> 
```

**意见/sign_up/content.text.erb**

```
Hello

Are you seeing this?

This should be at Line 6. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:38:46.270

根据[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-text_area)，您需要设置`@page.content`（因为您的前两个参数`:page`和`:content`）。如果这是不可能的，我会退回到标准的“硬编码”文本区域，比如`<textarea><%= render file: "sign_up/content" -%></textarea>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:36:51.193

While I haven't tested it your answer should look about this:

```
<%= text_area :page, :content, :readonly => 'true', :size => '250x10', :value => render_to_string("/sign_up/content") %> 
```

You may need to apply `html_safe` on the returned string from `render_to_string`

UPDATE:

After trying myself I got an error so I came up with a workaround:

1 - set @val in your controller the following way:

```
@val = render_to_string(:file => "/sign_up/content.html.erb", :layout => false) 
```

2 - Then in your view:

```
<%= text_area :page, :content, :readonly => 'true', :size => '250x10', :value => @val %> 
```

Works as charm.

If you don't want to use the value attribute of textarea you can assign the value in step 1 to the `@page.content` and it will automatically be inserted as a default value to the form input.

# android - 设计：安卓表格布局

> ID：14580759
> 
> 赞同：2
> 
> 时间：2013-01-29T10:28:54.150
> 
> 标签：android, android-tablelayout

这是我的第一个 android 应用程序，我面临很多问题。我想做这样的设计：

![所需的布局](../Images/ede145467875a9d3f446ae7c01557bd1.png)

我尝试了许多解决方案来做到这一点，但没有任何效果。这是我的代码：

```
<TableLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
<View
            android:layout_height="2dip"
            android:background="@color/dark_blue"/>
        <!--Product information-->
        <TableRow android:id="@+id/product_info">
            <ImageView android:id="@+id/product_img"
                       android:src="@drawable/mdpi_product_verify_scan_code"
                       android:layout_width="fill_parent"
                       android:layout_height="fill_parent"
                       android:layout_weight="1"
                    />
            <TextView android:id="@+id/tvdesc"
                      android:layout_width="fill_parent"
                      android:layout_height="fill_parent"
                      android:layout_weight="2"
                      android:text="description description description "
                      android:textColor="@color/black"
                    />
        </TableRow>

<View
            android:layout_height="2dip"
            android:background="@color/dark_blue"/>

        <!--Images button-->
        <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                >
            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Product Description"
                    android:textColor="@color/black"
                    android:textAppearance="?android:textAppearanceMedium"
                    />
            <FrameLayout
                    android:background="@color/dark_blue"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top|left"
                    android:padding="5dp">
            <ImageButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/mdpi_btn_show_images_icon"
                    android:background="@android:color/transparent"
                    />
                <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                    android:text="Images"/>
            </FrameLayout>
        </TableRow>

        <TableRow android:id="@+id/product_info">
            <ImageView android:id="@+id/ima"
                       android:src="@drawable/mdpi_product_verify_scan_code"
                       android:layout_width="fill_parent"
                       android:layout_height="fill_parent"
                       android:layout_weight="1"
                    />
            <TextView android:id="@+id/tv2"
                      android:layout_width="fill_parent"
                      android:layout_height="fill_parent"
                      android:layout_weight="2"
                      android:text="description description description "
                      android:textColor="@color/black"
                    />
        </TableRow>

        <!--Verification -->
        <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                android:text="product verification"
                android:textAppearance="?android:textAppearanceMedium"
                android:textColor="@color/green"/>
        </TableRow>
        <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="This product can be verified. Tap on the VERIFY PRODUCT button above."
                    android:textColor="@color/green"/>
        </TableRow>

    </TableLayout> 
```

这就是结果

![结果](../Images/483d42f39c1178a8f222da165dcafcac.png)

正如你所看到的，所有的元素都搞砸了，当我设置重力时，图像按钮也消失了，图像消失了，文本保持在原来的位置，没有任何变化。

这张图显示了问题所在： ![问题标记](../Images/2f1b3c65979ae829ef58206c60a77c78.png)

1.  如何使每个文本排成一行。
2.  将图像设置在左侧（重力左侧不起作用）
3.  如何画一条垂直线？
4.  我如何将图像与文本一起放置？（我使用的是跨度，但它只适用于一行，我有两个文本行，无论如何要合并两个垂直单元格）。
5.  图像按钮消失。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:54:42.123

我想这应该可以帮助您了解它是如何工作的。我设法做一些看起来像你可能需要的事情

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Space
        android:layout_width="match_parent"
        android:layout_height="10dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Tap to Verify Product" />

    <Space
        android:layout_width="match_parent"
        android:layout_height="10dp" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <Space
        android:layout_width="match_parent"
        android:layout_height="10dp" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="80dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="16dp"
            android:src="@drawable/ic_launcher" />

        <View
            android:id="@+id/view1"
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/imageView1"
            android:background="@android:color/darker_gray" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageView1"
            android:layout_alignLeft="@+id/textView2"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/textView3"
            android:layout_alignLeft="@+id/textView1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/textView2"
            android:layout_marginLeft="21dp"
            android:layout_toRightOf="@+id/view1"
            android:text="TextView" />
    </RelativeLayout>

    <Space
        android:layout_width="match_parent"
        android:layout_height="10dp" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="46dp" >

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="22dp"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="20dp"
            android:src="@drawable/ic_launcher" />

    </RelativeLayout>

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="TextView" />

</LinearLayout> 
```

在您的 IDE 中尝试一下，如果您需要进一步的帮助，我会看看我能做些什么。

# c# - 模型包含列表 但内容未加载

> ID：14580760
> 
> 赞同：1
> 
> 时间：2013-01-29T10:28:54.353
> 
> 标签：c#, asp.net-mvc-4

这是我关于stackoverflow的第一个问题，我希望我做对了；）搜索没有为我当前的问题提供任何提示。我是 ASP.NET MVC 4 的新手。

我已经使用 Razor-HTML-Engine 建立了一个新的 ASP.NET MVC 4 项目。我创建了两个模型：

**模型客户端**

```
[Table("Clients")]
public class Client
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string ContactName { get; set; }

    public ICollection<License> Licenses { get; set; }
} 
```

**模型许可证**

```
[Table("Licenses")]
public class License
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string SerialNumber { get; set; }

    public ICollection<ActivationHistory> ActivationHistory { get; set; }
} 
```

我读到我必须创建一个从 DbContext 派生的新类才能使其正常工作：

```
public class ClientDbContext : DbContext
{
    public DbSet<Client> Clients { get; set; }
    public DbSet<License> Licenses { get; set; }
} 
```

* * *

在我看来，这给了我：

*   两个具有 PrimaryKeys 的表以及表之间的关联 (1:N)
*   *能够在使用 db.SaveChanges() 后*创建客户端对象并用于`Client.Licenses.Add()`向表中添加新元素
**   拥有所有许可证的客户使用`var t = db.Clients.Single(a => a.Id == 1);`

    *   到目前为止我是对的吗？* 

 *我现在向客户端添加了示例数据：

```
// Get Context
var c = new ClientDbContext();

// Create new License
var n1 = new License();
// Testdata
n1.SerialNumber = "12345";

// Get test Client
var test = c.Clients.Single(v => v.ContactName.Contains("Testclient"));

// Add test License to Client
test.Licenses.Add(n1);

// Save Changes
c.SaveChanges() 
```

检查数据库，在许可证表中添加了一个新行。有一个外键 Client_Id 指向正确的客户端*Testclient*

但是，如果我尝试在视图上显示来自许可证的信息，则根本没有条目：

```
 foreach (var item in Model.Licenses)
                 {
                     @Html.DisplayFor(modelItem => item.SerialNumber)
                 } 
```

我正在使用默认的控制器方法：

```
 public ActionResult Details(int id = 0)
    {
        Client client = db.Clients.Find(id);
        if (client == null)
        {
            return HttpNotFound();
        }

        return View(client);
    } 
```

谁能给我一个提示我做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:34:25.963

You have to mark your navigation properties(Licenses) as `virtual`.*

# modem - 向我的内部 UMTS 调制解调器发送 AT 命令

> ID：14580761
> 
> 赞同：1
> 
> 时间：2013-01-29T10:28:57.870
> 
> 标签：modem, at-command, umts

我有一台 thinkpad 笔记本电脑，我想在调制解调器连接到网络后向它发送 AT 命令。使用的接口是“/dev/ttyACM0”。在那里发送我的命令的最佳方式是什么？我尝试了 gnokii，但无法连接到我的调制解调器：/ 我也尝试将命令回显到设备，这很有效，但要获得命令的输出以继续计算并不容易。也许你们中的一个人有更好的方法来做到这一点。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:05:26.780

你试过minicom吗？（从你的界面假设你使用的是 Linux）

[迷你通简介。](http://www.question-defense.com/2010/07/27/use-minicom-for-linux-modem-dialup-at-command-testing)

[在www.alternativeto.net](http://www.alternativeto.net)中输入“minicom”会链接到另一个 Linux 终端仿真器，称为 Cutecom，但我没有个人经验。

# jquery - jQuery 和 ParseError

> ID：14580765
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:04.073
> 
> 标签：jquery, json, codeigniter

当我尝试将 json 数据发送到 codeigniter 中的控制器时，我无法弄清楚为什么我会继续收到 parseerror。这是我的简单表格：

```
<div style="" id="message_abuso" class="error">parsererror</div>
<div style="display:none;" id="inviato_abuso"> Notifica abuso inviata! </div>
<div style="display: none;" id="waiting_abuso"> 
<img alt="Loader" title="Loader" src="http://****:8888/addons/default/themes/THEME/img/ajax-loader.gif"> 
</div>
<form id="form_abuso" style="display: block;"> 
<input type="hidden" value="1" name="id_utente" id="id_utente"> 
<input type="hidden" value="3" name="id_animale" id="id_animale"> 
<textarea name="testo" id="testo_abuso" rows="10" cols="20"></textarea> 
<input type="submit" class="riporta_abuso" value=""> 
```

这是我的 jquery 脚本：

```
<script type="text/javascript">
    $(document).ready(function(){
         $('.riporta_abuso').click(function() {

                $('#waiting_abuso').show(500).delay(2000);
                $('#form_abuso').hide(0);
                $('#message_abuso').hide(0);
                $('#inviato_abuso').hide(0);

                    $.ajax({
                        type : 'POST',
                        url : 'http://****:8888/canile/notifica_abuso',
                        dataType : 'json',
                            data:  {
                                id_animale: $('#id_animale').val(),
                                id_utente:  $('#id_utente').val(),
                                testo:      $('#testo_abuso').val(),
                            },
                            success : function(data){
                                $('#waiting_abuso').hide(500);
                                $('#message_abuso').removeClass().addClass((data.error === true) ? 'error' : 'success')
                                    .text(data.msg).delay(2000);
                                if (data.error === true)
                                {
                                    $('#form_abuso').delay(2000).show(500);
                                    $('#message_abuso').show(500);
                                }
                                else
                                {
                                    $('#inviato_abuso').text(data.msg).delay(2000).show(500);
                                    $('#form_abuso').delay(2500).show(500);
                                }
                            },
                            error : function(XMLHttpRequest, textStatus, errorThrown) {
                                $('#waiting_abuso').hide(500);
                                $('#inviato_abuso').hide(0);
                                $('#message_abuso').removeClass().addClass('error')
                                    .text(textStatus).delay(2000).show(500);
                                $('#form_abuso').delay(2000).show(500);
                            }
                        });

                        return false;
                    });
                });
                </script> 
```

这是控制器：

```
function notifica_abuso()
        {
            $id         = $this->input->post('id_animale');
            $id_utente  = $this->input->post('id_utente');
            $testo      = trim($this->input->post('testo'));

            if( is_numeric($id) && is_numeric($id_utente) && $testo != "")
            {               
                if( ! $this->canile_abusi_m->controlla_esistenza($id) )
                {
                    if( ! $this->canile_abusi_m->notifica($id , $id_utente , $testo) )
                    {
                        //Impossibile salvare
                        $risposta['error'] = true;
                        $risposta['msg'] = "Cant save.";                            
                        echo json_encode($risposta);
                        exit;
                    }
                }

                //Non ci sono errori
                $risposta['error'] = false;
                $risposta['msg'] = "";                          
                echo json_encode($risposta);
                exit;
            }
            else{
                //Non sono id numerici
                $risposta['error'] = true;
                $risposta['msg'] = "Errors errori";                         
                echo json_encode($risposta);
                exit;
            }

        } 
```

每次我得到 parserror

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:39:58.317

也许这可以工作，替换这个：

```
testo:      $('#testo_abuso').val(), 
```

这样 ：

```
testo:      $('#testo_abuso').val() 
```

（在您的第二次报价中）

# c# - 为什么我可以在没有跨线程异常的情况下从线程中的表单访问控件？

> ID：14580766
> 
> 赞同：1
> 
> 时间：2013-01-29T10:29:05.177
> 
> 标签：c#, winforms, multithreading

通常，当您访问线程中的控件时，您最终会遇到一些跨线程异常。在我的 C# WinForms 应用程序中，我有一个图片框和一个工具条标签，它们不会导致该异常。我不明白为什么，谁能给我解释一下？

这里有一些代码解释：

在主窗体中，我有一个图片框和一个工具条标签。此外，我还引用了另一个表单，它没有控件，也没有额外的源代码。然后在主窗体中有另一个与线程一起工作的对象。该线程可以引发三个不同的事件，主窗体订阅这三个事件。

*   Event1 导致工具条标签更新（带有来自线程的一些信息）。
*   Event2 导致图片框更新（使用来自线程的新图片）。

Event1 和 Event2 工作得很好。我不使用任何调用方法，我直接更改 Text 和 BackgroundImage 属性而没有跨线程异常。

*   Event3虽然会造成麻烦。它应该显示另一种形式，但我收到了交叉治疗异常。只有当我使用 BeginInvoke 来显示表单时它才有效。

这是为什么？

**编辑：**

多线程由*MJPEGStream*对象完成。我订阅了该 MJPEGStream 对象的*NewFrame*方法。

```
public partial class Form1 : Form
{
    private CAM cam;

    private PeekWindow frmPeekWindow;

    public Form1()
    {
        InitializeComponent();

        cam = new CAM();
        cam.NewImageMessageEvent += new NewImageEventHandler(cam_NewImageMessageEvent);
        cam.DetectionEvent += new DetectionEventHandler(cam_DetectionEvent);
        cam.FpsChangedMessageEvent += new FpsChangedEventHandler(cam_FpsChangedMessageEvent);
        cam.DetectionThreshold = (float)this.numDetectionThreshold.Value;

        frmPeekWindow = new PeekWindow();

        // without the next two lines, frmPeekwindow.Show() won't work if called in an event
        frmPeekWindow.Show();
        frmPeekWindow.Hide();
    }

    void cam_FpsChangedMessageEvent(object sender, FpsChangedEventArgs e)
    {
        lblFPS.Text = string.Format("fps: {0:0.0}", e.FPS);
    }

    void cam_DetectionEvent(object sender, DetectionEventArgs e)
    {
        if (chkEnablePeakWindow.Checked)
        {
            if (frmPeekWindow.InvokeRequired)
            {
                frmPeekWindow.Invoke((MethodInvoker)delegate()
                {
                    frmPeekWindow.Show();
                    frmPeekWindow.setImage(e.Image);
                });
            }
            else
            {
                frmPeekWindow.Show();
                frmPeekWindow.setImage(e.Image);
            }
        }
    }

    void cam_NewImageMessageEvent(object sender, NewImageEventArgs e)
    {
        picStream.BackgroundImage = e.Image;
    }
} 
```

这是 CAM 类：

```
class CAM
{
    private object lockScale = new object();

    private MJPEGStream stream;
    private Bitmap image;

    public event NewImageEventHandler NewImageMessageEvent;
    public event FpsChangedEventHandler FpsChangedMessageEvent;
    public event DetectionEventHandler DetectionEvent;

    // configure (login, pwd, source)
    public CAM()
    {
        this.stream = new MJPEGStream("...");
        this.stream.Login = "...";
        this.stream.Password = "...";
        this.stream.NewFrame += new NewFrameEventHandler(OnNewFrame)
    }

    private void OnNewFrame(object sender, NewFrameEventArgs ev)
    {
        try
        {
            FpsChangedMessageEvent(this, new FpsChangedEventArgs(10));

            // get image
            image = ev.Frame;
            NewImageMessageEvent(this, new NewImageEventArgs(new Bitmap(image)));

            DetectionEvent(this, new DetectionEventArgs(new Bitmap(image)));
        }
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:27:19.867

你不会得到跨线程异常，但这并不意味着这是一个安全的操作。您的控制总是有可能变得不稳定。你只是不知道它什么时候会发生。

请参阅 Microsoft 的以下说明。 [http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

> 对 Windows 窗体控件的访问本质上不是线程安全的。如果您有两个或更多线程操作控件的状态，则可能会强制控件进入不一致的状态。其他与线程相关的错误是可能的，例如竞争条件和死锁。确保以线程安全的方式执行对控件的访问非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:14:33.013

我想到了这三种可能性：

1.  该操作已被分派到 gui 线程。
2.  当前不需要分派该操作。
3.  该操作以某种方式从 gui 线程执行。

最有可能是3号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:59:20.453

您不必总是调用 BeginInvoke/Invoke。有时操作在前台线程上运行，有时在后台运行。

根据无处不在的 microsoft 示例，您可以检查是否需要调用 BeginInvoke/Invoke。

```
private void SetTextStandardPattern()
{
    if (this.InvokeRequired)
    {
        this.Invoke(SetTextStandardPattern);
        return;
    }
    this.text = "New Text";
} 
```

这是一篇不错的 Microsoft 文章，其中包含示例： http: [//msdn.microsoft.com/en-us/library/ms171728 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx)

这是另一篇关于如何“避免”该模式的文章：http: [//www.codeproject.com/Articles/37642/Avoiding-InvokeRequired](http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired)

# c# - 我想将一个类的属性绑定到我的用户控件中的控件

> ID：14580771
> 
> 赞同：2
> 
> 时间：2013-01-29T10:29:13.907
> 
> 标签：c#, wpf, binding, wpf-controls

我正在努力寻找解决绑定问题的方法。

我有一个用户控件，它有一个用于调用单独窗口的按钮，用户可以在其中选择一个对象。选择此对象后，窗口关闭，用户控件中的对象根据选择更新其属性。该对象的属性绑定到用户控件中的控件，但是当我更新对象中的属性时，控件中的值不会更新（我希望这是有道理的）。

这是后面的精简代码：

```
public partial class DrawingInsertControl : UserControl
{
    private MailAttachment Attachment { get; set; }        

    public DrawingInsertControl(MailAttachment pAttachment)
    {
        Attachment = pAttachment;

        InitializeComponent();

        this.DataContext = Attachment;
    }

    private void btnViewRegister_Click(object sender, RoutedEventArgs e)
    {
        DocumentRegisterWindow win = new DocumentRegisterWindow();
        win.ShowDialog();

        if (win.SelectedDrawing != null)
        {
            Attachment.DwgNo = win.SelectedDrawing.DwgNo;
            Attachment.DwgTitle = win.SelectedDrawing.Title;
        }
    }
} 
```

和xml：

```
<UserControl x:Class="DrawingInsertControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="310" d:DesignWidth="800" >
<Border BorderBrush="Black" BorderThickness="2" Margin="10">
    <Grid> 
```

...

```
<TextBox Grid.Column="1" Name="txtDocNo" Text="{Binding DwgNo}" /> 
```

最后是位于单独模块中的附加对象：

```
Public Class MailAttachment
    Public Property DwgNo As String
End Class 
```

我省略了命名空间和其他我认为不相关的东西。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:36:40.553

你的`MailAttachment`类应该实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/ru-ru/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)接口：

```
public class MailAttachment: INotifyPropertyChanged
{

    private string dwgNo;
    public string DwgNo{
        get { return dwgNo; }
        set
        {
            dwgNo=value;
            // Call NotifyPropertyChanged when the property is updated
            NotifyPropertyChanged("DwgNo");
        }
    }

  // Declare the PropertyChanged event
  public event PropertyChangedEventHandler PropertyChanged;

  // NotifyPropertyChanged will raise the PropertyChanged event passing the
  // source property that is being updated.
  public void NotifyPropertyChanged(string propertyName)
  {
     if (PropertyChanged != null)
     {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
     }
  }  
} 
```

这将强制您的控件观察`PropertyChanged`事件。因此，您的控件可以收到有关更改的通知。

我提供的代码是在 C# 上的，但是，我希望你能把它翻译成 VB.Net。

# android - 如何在 Phonegap Android 中加载本地 HTML 文件？

> ID：14580773
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:16.807
> 
> 标签：android, cordova

我尝试使用 Phonegap Android 在我的应用程序中加载本地 html 文件，但总是以显示的全屏 html 页面结束。

这是我的代码：

```
<!-- my header code -->
<div data-role="content" id="termsContent">
    <iframe id="frame" src="tnc.html" width="100%" height="100%">
    </iframe>
</div>
<!-- my footer code --> 
```

我只是将 html 文件加载到我的 iframe 标记中。我的实施错了吗？

# c# - 找到子条件时如何获取某个父元素节点

> ID：14580775
> 
> 赞同：1
> 
> 时间：2013-01-29T10:29:18.883
> 
> 标签：c#, xml, xelement

我在编写 C# 脚本时遇到问题，该脚本将为我提供给定子元素的某个父元素。为了清楚起见，这是 XML 树的一个示例。

```
<parent attribute='X'>
  <child_element1>A</child_element1>
  <child_element2 attribute='Y'>
    <grandchild_element1>B</grandchild_element1>
    <grandchild_element2>
      <key>C</key>
    </grandchild_element2>
    <grandchild_element3>D</grandchild_element3>
  </child_element2>
  <child_element3>E</child_element3>
</parent> 
```

遍历树，我的脚本找到了`<key>`节点。我想要制作的是以下树。

```
<parent attribute='X'>
  <child_element2 attribute='Y'>
    <grandchild_element1>B</grandchild_element1>
    <grandchild_element2>
      <key>C</key>
    </grandchild_element2>
    <grandchild_element3>D</grandchild_element3>
  </child_element2>
</parent> 
```

如您所见，我正在尝试删除原始树中的`child_element1`和。`child_element3`

我已经为脚本编写了一个伪代码，如下所示，但到目前为止还没有弄清楚如何在 C# 中编写真实的东西。

1.  显示关键节点上方的所有第一个和第二个父元素。`grandchild_element2`是 key 的第一个父级，是 key`child_element2`的第二个父级。所以他们的所有元素都显示出来了。
2.  仅显示与下一个父级别的键有直接关系的节点/元素。`parent`是 key 的第三个父母。与键有直接关系的`parent`元素是`child_element2`。所以只`child_element2`显示。`child_Element1`并且`child_element2`没有显示，因为它们与键没有直接关系

我在 stackoverflow 上查看了以下解决方案，但不幸的是，它们都只显示了如何获取所有父元素（而不是显示`<key>`节点的祖先元素。

1.  [如果子节点满足特定条件，则检索 XML 父节点属性并将两者都分配给变量](https://stackoverflow.com/questions/4812853/retrieve-xml-parent-node-attribute-if-child-node-meets-a-certain-criteria-and-as)
2.  [C# XML，找到节点和他所有的父母](https://stackoverflow.com/questions/11412029/c-sharp-xml-find-node-and-all-his-parents)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:08:07.550

如果您使用 XSLT，这很容易：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="valueToFind" select="'C'" omit-xml-declaration="yes" />

  <xsl:template match="/*">
    <xsl:apply-templates select="node()[descendant-or-self::node() = $valueToFind]" />
  </xsl:template>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates 
            select="node()[descendant-or-self::node() = $valueToFind]" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当示例 XML 被赋予单个根元素并将其馈送到此 XSLT 中时，结果是：

```
<a>
  <a.1 name="First">
    <a.1.2>
      <a.1.2.2>
        <key>C</key>
      </a.1.2.2>
    </a.1.2>
  </a.1>
</a> 
```

如果您不熟悉 XSLT，请使用 XSLT 参数：

```
<xsl:param name="valueToFind" select="'C'" /> 
```

本质上是一个变量，您可以从执行代码中传入其值。在这里，我刚刚为其赋予了默认值`C`，因此它可以在 XSLT 调试器中运行并产生可证明的结果。

# java - 在 Windows 2008 R2 Box 上创建 Jenkins Slave

> ID：14580777
> 
> 赞同：2
> 
> 时间：2013-01-29T10:29:31.843
> 
> 标签：java, windows, jenkins

我有一个主 Jenkins 服务器。我想创建一个从属 Windows 2008 R2 从属 Jenkins？

我需要在从盒上安装 Jenkins 吗？还是将 slave-jnlp 文件保存到磁盘并打开它就足够了？

我下载了 slave-agent.jnlp 并尝试运行它。我得到：

![在此处输入图像描述](../Images/f2f59a854f44499545cb3afc945edacb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:40:06.577

您没有在从属服务器上安装完整的 Jenkins 服务器。只是本文档中的从代理：[https ://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-Howdoesthiswork%3F](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-Howdoesthiswork%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:15:40.647

那么，您遵循了[文档](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)的哪一部分？有很多方法可以做到

*   您是否尝试[安装为服务](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Windows+service#InstallingJenkinsasaWindowsservice-InstallSlaveasaWindowsservice%28require.NET2.0framework%29)？
*   您尝试过使用[Java Webstart](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-LaunchslaveagentviaJavaWebStart)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-05T19:08:22.053

这是因为与**jnlp**相关的 Java 安全性增加了，阻止了它使用 http。

选项 A) 安全方法：切换到 HTTPS。购买并安装证书，甚至创建您自己的证书颁发机构并自签名您自己的证书，安装它，并将 CA 安装为所有节点上的受信任根！现在应该可以工作了。

选项 B）`slave-agent.jnlp`通过某种安全方式（例如 SSH）将文件从 Jenkins 服务器复制到 Jenkins 节点，或者对于那些不关心安全性的人（同行压力）：

```
wget http://10.150.0.150:8080/computer/NODENAME/slave-agent.jnlp 
```

或通过管理 Powershell（也是不安全的传输）：

```
iwr('http://10.150.0.150:8080/computer/NODENAME/slave-agent.jnlp') 
```

将您的 Jenkins 节点设置为信任任何看起来可能来自您的 Jenkins 服务器的不安全 http：

```
Windows > All Programs > Java > Configure Java > Security tab > Edit Site List
add your server ("http://10.150.0.150:8080", for instance) 
```

双击桌面上的“slave-agent.jnlp”文件。应该看到 Jenkins UI 显示从代理已启动。

```
File > Install as Windows Service 
```

强烈推荐 HTTPS（选项 A。）

# jquery-mobile - XPages 添加表单标签以禁用 Ajax

> ID：14580778
> 
> 赞同：1
> 
> 时间：2013-01-29T10:29:31.550
> 
> 标签：jquery-mobile, xpages

我正在使用 jQuery Mobile (1.2.0) 和 XPages (8.5.3) 并希望禁用 Ajax 表单提交，因为这似乎会阻止图像被保存（所有其他文本字段都已成功保存）。

我可以`data-ajax="false"`使用以下内容添加到表单标签吗？

```
<xp:this.attrs>
        <xp:attr name="data-ajax" value="false"></xp:attr>
</xp:this.attrs> 
```

我尝试`Form`在主题中使用（根据[添加 styleClass](https://stackoverflow.com/questions/13212865/how-can-i-add-styleclass-to-form-tag-in-xpages)）但没有添加任何内容，我可以添加`styleClass`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:44:08.333

只需将这些行添加到您的主题中：

```
<control mode="override">
    <name>Form</name>
    <property>
        <name>attrs</name>
        <complex type="xp_attr">
            <property>
                <name>name</name>
                <value>data-ajax</value>
            </property>
            <property>
                <name>value</name>
                <value>false</value>
            </property>
        </complex>
    </property>
</control> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:37:26.207

另一种替代方法是将`createForm`XPages 中的属性设置为`false`. 这不会生成`form`标签并允许您使用`xp:form`. 然后，您可以`xp:this.attrs`像在查询中一样使用添加自定义属性。所以你的代码看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" createForm="true">
    <xp:form id="myForm">
        <xp:this.attrs>
            <xp:attr name="data-ajax" value="false"></xp:attr>
        </xp:this.attrs>
        <!-- All the other controls go here -->
    </xp:form>
</xp:view> 
```

这将生成如下`form`所示的标签：

`<form id="view:myForm" method="post" action="/myPath/myDatabase.nsf/xFormAttrs.xsp" class="xspForm" enctype="multipart/form-data" data-ajax="false">`

# objective-c - 循环没有在 iPad 上完全运行（在模拟器上很好）

> ID：14580784
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:38.827
> 
> 标签：objective-c, memory-management, nsstring, automatic-ref-counting

我正在做一个基于 ARC 的项目。我正在从一个大文本文件中获取文本，需要从中删除空格或换行符。以下代码在模拟器上运行良好，但在 iPad 上崩溃并且无法完全运行（这可能是内存问题）。例如，如果循环需要运行 2000 次，它会在 iPad 上运行 1800 次后崩溃。

```
- (BOOL)formatTheText {
NSString *content = [NSString stringWithContentsOfURL:_textFileURL
                     encoding:NSUTF8StringEncoding 
                            error:NULL];

NSRange paraRange = {0,1};
NSString *modifiedContent = @"";
BOOL previousLineWasEmpty = NO;
int lineNumber = 0;

while (paraRange.location < [content length]) {

    NSRange currentParaRange = [content paragraphRangeForRange:paraRange];
    NSString *paragraph = [content substringWithRange:currentParaRange];
    NSCharacterSet *newLineSet = [NSCharacterSet newlineCharacterSet];

    NSArray *array = [paragraph componentsSeparatedByCharactersInSet:newLineSet];
    NSString *currentParagraph = @"";

    for (NSString *line in array) {
        currentParagraph = [currentParagraph stringByAppendingString:line];
    }

    // Add a space when combining two lines
    modifiedContent = [modifiedContent stringByAppendingFormat:@"%@ ",currentParagraph];
    paraRange.location += currentParaRange.length;

    if ([currentParagraph length] == 0) {

        // If previous line was empty just add a new line character
        if (previousLineWasEmpty) {
            modifiedContent = [modifiedContent stringByAppendingString:@"\n"];

        } else {
            // Add two lines for the start of a new paragraph
            modifiedContent = [modifiedContent stringByAppendingString:@"\n\n"];
        }
        previousLineWasEmpty = YES;

    } else {
        previousLineWasEmpty = NO;
    }
    lineNumber++;
}
self.cleanedString = modifiedContent;
return YES;
} 
```

# android - 在 OpenCV 中处理 Android 相机意图位图图像（需要转换为 Mat 对象）？

> ID：14580785
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:43.383
> 
> 标签：android, opencv, bitmap, android-ndk, android-camera-intent

我正在尝试通过以下步骤处理从 Android 的相机意图获得的 bmp 图像：

1.  `bmp`从意图中获取图像
2.  将`bmp`图像转换为`Mat`对象以进行 OpenCV 处理**（问题从这里开始）**
3.  是否需要 OpenCV 处理（通过将`Mat`对象*obj*作为*obj*`.getNativeObjAddr()`发送到本地处理，或在 java 中本地执行）。
4.  将`Mat`对象转换回`bmp`

这个问题确实并不新奇。我在网上找到了无数类似的问题，但是似乎没有一个可以解决这种情况。

## 结果（问题）

目的是在对象中显示处理后的图像（经过上述 4 个步骤）`ImageView`。运行后，ImageView 保持不变，logcat 在到达线路调用时发出以下警告`Utils.bitmapToMat()`

```
 W/System.err(3872): java.lang.IllegalArgumentException: mat == null 
```

## 代码

下面是`onActivityResult`方法中使用的代码大纲（`resultant_bmp`是从相机意图获取的bmp。它自己显示成功）。
`filePath`是 . 的文件路径、名称和扩展名`resultant_bmp`。

起始`if`条件之后的前 3 行来自[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-opencv/maGpOvyIqp0)，在上述问题中它的使用似乎可以正常工作。

```
Bitmap resultant_bmp /*image from camera*/,   
       bmp /*image after opencv processing*/;
Mat rgb_img, gray_img;      

if (OpenCVLoader.initDebug()) { 

     BitmapFactory.Options options = new BitmapFactory.Options();
     options.inPreferredConfig = Config.RGB_565;
     resultant_bmp= BitmapFactory.decodeFile(filePath, options);

     /****************** Problem starts HERE ******************
     Last point reachable before Logcat states:
       W/System.err(4460):java.lang.IllegalArgumentException: mat == null   

     After this point, the program doesn't crash, but expected results 
       in the imageView (last line of code) do not result.
     **********************************************************/  

     Utils.bitmapToMat(resultant_bmp, rgb_img);                                 
     Imgproc.cvtColor(rgb_img, gray_img, Imgproc.COLOR_RGBA2GRAY); 

     /*Do opencv processing (on gray_img) here*/

     Utils.matToBitmap(gray_img, bmp);

     imageView.setImageBitmap(bmp);

} 
```

## 以往的尝试和研究

*   [我在这里](https://stackoverflow.com/questions/13042767/opencv-error-cannot-load-info-library-for-opencv?rq=1)发现了一个类似的问题，并按照建议尝试将文件推`libopencv_java.so`送到`system/lib`设备上，在命令行中使用 adb 并收到错误：

`failed to copy 'libopencv_java.so' to 'system/lib/libopencv_java.so': Read-only file system`

*   [这个](https://stackoverflow.com/questions/8454542/android-opencv-converting-mat-to-grayscale-with-using-mattobitmap-bitmaptomat)问题考虑了当前问题中相同的问题域；上面提供的代码遵循与那里建议的类似模式，但仍然不起作用。

*   基于[这个](https://stackoverflow.com/a/10869291/1446598)[答案](https://stackoverflow.com/questions/13042767/opencv-error-cannot-load-info-library-for-opencv?rq=1)（以及前面提到的那个），我在代码中添加了以下几行：

`System.loadLibrary("opencv_java");
System.loadLibrary("libopencv_java");`

*   我已将 OpenCV 库添加到项目属性中；以及指示 NDK 根路径所在位置的 NDKROOT 变量，如此处进一步[解释](https://stackoverflow.com/a/14527852/1446598)。

*   我已经在 OpenCV 的另一个工作示例中尝试了所需的图像处理（在上面的步骤 3 中），所以问题肯定出在**步骤 2**（上面）中；a`bmp`到`Mat`对象的转换。

应该有一个简单的解决方案，但我似乎找不到它。如果可能的话，我们将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:41:25.750

你初始化你的垫子变量了吗？我在提供的代码中找不到它。

在尝试转换为 mat 之前添加它。

```
Mat rgb_img = new Mat(); 
```

# python - 具有嵌套布局的 Python 类层次结构——有意义吗？

> ID：14580787
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:46.573
> 
> 标签：python, oop, class, inheritance, hierarchy

我遇到了一些奇怪的错误，只是问自己我的类层次结构中是否存在基本问题。如果涉及 python，我绝对是新手。因此，如果这种方法看起来像完全废话 - 你知道为什么会这样:-)

我在围绕 MVC 模式设计的应用程序中有几个类。应用程序控制器可以控制四个我称之为“设备”的对象，因为它们就像独立的设备一样。每个设备运行动作（计算），在这种情况下是图像处理。这些操作旨在在单独的线程中运行。因此，每个设备都应该打开一个“自己的”线程并在该线程中完成其计算。

为此，我设计了一个描述“设备”的基类，因此所有设备都继承了它们的基本设置和逻辑，尤其是它们由控制器控制的方式。对于我实现了一个'worker'类的线程，我计划将这些类实例推送到线程中。那部分还没有工作。这些工作类的设计如下： 基设备类包含一个嵌套的工作基类。它还实现了一些基本的控制方法来处理作为基本设备类成员存储的工作程序实例。所有专用设备类（派生自基本设备类）也实现了一个嵌套的工作类。这些类是从嵌套在基本设备类中的基本工作类派生的。这是层次结构的草图：

```
/class Device/
             /methods
             /members
             /class Worker/
                          /methods
                          /members
/class fooDevice(Device)/
                        /methods
                        /members
                        /class fooWorker(Device.Worker)/
                                                       /methods
                                                       /members
/class barDevice(Device)/
                        /methods
                        /members
                        /class barWorker(Device.Worker)/
                                                       /methods
                                                       /members 
```

请注意，这些类`fooWorker`和`barWorker`都派生自`Device.Worker`!

我的问题是：虽然这些东西在设置过程中似乎可以工作，但我得到了运行时错误。还不确定它们来自哪里，它们是什么意思。但首先我想了解我制作的类层次结构布局是否有意义？这完全是胡说八道吗？还是常用的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:27:08.797

嵌套类是有意义的。Django 将它们用于模型和表单中的元配置。我有时在工厂模式中使用它们，例如

```
 class BaseFactory(object):
      class FactoryItem(object):
          pass 

      @classmethod
      def create(cls):
          return cls.FactoryItem()

   class ShoeFactory(BaseFactory):
      class FactoryItem(BaseFactory.FactoryItem):
          def laces(self):
              return 1 
```

但是您可以轻松地在全局范围内定义 FactoryItem 类并将它们分配给“FactoryItem”类成员，例如

```
class Shoe(BaseFactory.FactoryItem):
    ...

class ShoeFactory(BaseFactory):
    FactoryItem = Shoe 
```

我遇到的唯一问题是对象的反序列化。我真的不记得何时/何地/为什么，可能在某处使用了泡菜，但它未能解决嵌套类。

您遇到了哪些特定的运行时问题？

# ios - 自定义对象的分析器和自动释放问题

> ID：14580789
> 
> 赞同：0
> 
> 时间：2013-01-29T10:29:47.753
> 
> 标签：ios, objective-c, sqlite

我有一个类来管理我的项目的数据库查询，我在内存管理和`[return autorelease]`部分代码方面遇到了一些问题。我不知道如何将对象返回给调用函数，但它会在之后使用它。代码是这样的：

```
-(Hexagram *)getHexagramforId:(NSInteger)hexagramNumber{
    Hexagram *current;
    if (init_statement == nil) {
        const char * sql = "SELECT * FROM HEXNUMBER where _id =?";
    if (sqlite3_prepare_v2(database, sql, -1, &init_statement, NULL) != SQLITE_OK) {
        NSAssert1(0, @"Error:failed to prepare argument with message %s", sqlite3_errmsg(database));
    }
    sqlite3_bind_int(init_statement, 1, hexagramNumber);
    if (sqlite3_step(init_statement) == SQLITE_ROW) {
        current = [[Hexagram alloc]initWithId:hexagramNumber
                                             Title:[NSString stringWithUTF8String:(char*)sqlite3_column_text(init_statement, HEX_TITLE)]
                                               LongText:[NSString stringWithUTF8String:(char*)sqlite3_column_text(init_statement, HEX_TEXT)]ShortText:nil InternalColor:sqlite3_column_int(init_statement, INTERNAL_COLOR) ExternalColor:sqlite3_column_int(init_statement, EXTERNAL_COLOR)];

    }else{
        NSAssert1(0, @"Database is corrupt, error %s", sqlite3_errmsg(database));
    }
    sqlite3_reset(init_statement);
    sqlite3_close(database);
    init_statement = nil;
    return current;
}
return nil; 
```

}

所以在分析器中会发生什么，它说对象当前的六角星被泄露了，但是如果我用自动释放返回它，它就会崩溃。我想支持 iOS < 5 所以我不想使用 ARC 但到目前为止我不知道如何返回这个对象并且不会在静态分析器中得到这个错误。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:47:58.623

首先，分析器抱怨的原因是因为您正在`Hexagram`通过 创建对象`alloc] init`，然后像这样返回它，这意味着您的对象将以 1 的保留计数开始。除非您的方法名称以 new/alloc/copy 开头，代码（和静态分析器）的用户将期待一个自动释放的对象。（请参阅[命名约定 + 内存管理的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)）。

至于自动释放；Autorelease 将给一个对象一个保留计数 1（以便它可以挂起一段时间），但将在运行循环结束时释放。这将导致保留计数为 0，并且对象被释放。

现在，为什么会`return [current autorelease]`失败？原因将是由于方法的调用者`getHexagramforId`。如果有人正在调用一个返回自动释放对象的方法（一个不以 new/alloc/copy 等开头的方法......），那么**他们有责任**在需要时保持该对象（出于上述原因多于）。

因此，例如，如果您更改`return current`为`return [current autorelease]`, 并按如下方式调用该方法：

```
Hexagram* obj = [[SomeClass getHexagramforId:3] retain]; 
```

你的程序不应该崩溃。您正在显式保留一个自动释放的对象，因此您现在可以保留该对象，直到您不再需要它为止。此时，调用`[obj release]`.

保留自动释放对象的其他方法包括将其分配给保留属性，如下所示：

```
@property (nonatomic, retain) Hexagram* hexObj;

self.hexObj = [SomeClass getHexagramForId:3]; 
```

# web-services - 使用 LabVIEW 使用单声道 Web 服务

> ID：14580793
> 
> 赞同：0
> 
> 时间：2013-01-29T10:30:11.483
> 
> 标签：web-services, mono, labview

我已经在单声道中开发了一个 Web 服务。我可以在我的网络和其他程序中使用它。webservice 在 xsp2 服务器上运行：

现在我将 wsdl 导入 LabVIEW，一切正常，但是当我调用 web 服务时，出现以下错误。

> 错误调用方法
> 
> TestWebService.TestWebService.Parameter(System.ArgumentNullException: key不能为NULL, parametername: key) **System.ArgumentNullExceptioin** in TestWebService.lvlib:Parameter.vi

我查看了 msdn，所有内容都与我在 mono ws 中找不到的 svc 文件有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:59:30.180

听起来您需要一个不为 NULL 的“Key”，是否有“CreateKey”方法？或者你应该只使用一些任意数字。

吨

# php - 如何让 gettext 和 poedit 识别自定义文件类型？

> ID：14580794
> 
> 赞同：5
> 
> 时间：2013-01-29T10:30:18.033
> 
> 标签：php, smarty, gettext, poedit

我正在尝试让 Smarty 和 gettext 在我的项目中一起工作。目前 smarty 使用`.tpl`文件作为其模板系统。
我使用 PoEdit 创建目录文件，并在 PHP 下的文件扩展名中添加了“*.tpl”，但是当我尝试扫描 gettext 字符串时，出现以下错误并且无法找到我的字符串：

> xgettext：警告：文件`../libs/smarty/debug.tpl' extension`tpl' 未知；将尝试 C
> xgettext: 警告：文件`../template/login.tpl' extension`tpl' 未知；将尝试 C
> xgettext: 警告：文件`../template/index.tpl' extension`tpl' 未知；会尝试C

那么我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T15:53:14.180

（你提到的应该有效）。确保它正确保存。

`Edit > Preferences > Parsers`

选择`PHP`

输入允许的扩展名...

*.php;* .tpl

![在此处输入图像描述](../Images/71932166fc2a9428e9398832eb47f9c3.png)

注意：您可能还需要更新解析器命令以包括：

`xgettext --language=PHP --force-po -o %o %C %K %F`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-03T09:24:00.747

经过一天尝试安装 smarty 解析器没有成功后，我编辑了 Perl

> 编辑 > 首选项 > 解析器

所以在我添加的扩展列表中 *.tpl

> *.pl;*.tpl

它现在解析 smarty tpl 中的所有 {_("text")}

# asp.net - 没有协议绑定与 WCF 服务的给定地址匹配

> ID：14580795
> 
> 赞同：0
> 
> 时间：2013-01-29T10:30:20.857
> 
> 标签：asp.net, wcf, web-services, svc

我正在使用 IIS6 运行一个网站（ASP.Net 4）。当我尝试运行 svc 服务时收到以下错误消息：

> 没有协议绑定与给定地址“ [http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc](http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc) ”匹配。
> 
> 协议绑定在 IIS 或 WAS 配置中的站点级别进行配置。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.InvalidOperationException：没有协议绑定匹配给定地址“ [http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc](http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc) ”。协议绑定在 IIS 或 WAS 配置中的站点级别进行配置。源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：没有协议绑定与给定地址“ [http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc](http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc) ”匹配。协议绑定在 IIS 或 WAS 配置中的站点级别配置。] [ServiceActivationException: 没有协议绑定与给定地址匹配' [http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc](http://www.holtalen.kommune.no/Templates/eDemokrati/Services/eDemokratiService.svc)'。协议绑定在 IIS 或 WAS 配置中的站点级别配置。] System.Runtime.AsyncResult.End(IAsyncResult result) +679246 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +190 System.ServiceModel.Activation.HostedHttpRequestAsyncResult .ExecuteSynchronous(HttpApplication context, String routeServiceVirtualPath, Boolean flowContext, Boolean ensureWFService) +234 System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +355 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute () +148 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously

我已将扩展名 .svc 添加为站点的应用程序映射。

Web.config 的部分内容：

```
<system.serviceModel>
    <extensions>
      <bindingElementExtensions>
        <add name="udpTransport" type="Microsoft.ServiceModel.Samples.UdpTransportElement, EPiServer.Events" />
      </bindingElementExtensions>
    </extensions>
    <services>
      <!-- Before deployment, you should remove the returnFaults behavior configuration to avoid disclosing information in exception messages -->
      <service name="EPiServer.Events.Remote.EventReplication" behaviorConfiguration="DebugServiceBehaviour">
        <endpoint name="RemoteEventServiceEndPoint" contract="EPiServer.Events.ServiceModel.IEventReplication" binding="customBinding" bindingConfiguration="RemoteEventsBinding" address="soap.udp://239.255.255.19:5000/RemoteEventService" />
        <!-- Uncomment this endpoint and the "RemoteEventServiceClientEndPoint" to enable remote events
            <endpoint name="RemoteEventServiceEndPoint"
                    contract="EPiServer.Events.ServiceModel.IEventReplication"
                    binding="customBinding"
                    bindingConfiguration="RemoteEventsBinding"
                    address="soap.udp://239.255.255.19:5000/RemoteEventService" />-->
      </service>

        <service name="SSP.eDemokrati.Templates.Services.eDemokratiService"  >
                <!-- Add the following endpoint.  -->
                <!-- Note: your service must have an http base address to add this endpoint. -->
                <endpoint contract="SSP.eDemokrati.Templates.Services.eDemokratiService" binding="webHttpBinding"  />
                <host>
     <baseAddresses>
     <add baseAddress="http://www.holtalen.kommune.no/" />
      <!--<add baseAddress="http://172.28.160.23:80/" />
     --> 

     </baseAddresses>
    </host>
       </service>

      <!-- In order to get fault information from the server for debug purposes, add behaviorConfiguration="DebugServiceBehaviour" to the endpoint "RemoteEventServiceEndPoint" -->
    </services>

    <client>
      <endpoint name="RemoteEventServiceClientEndPoint" address="soap.udp://239.255.255.19:5000/RemoteEventService" binding="customBinding" bindingConfiguration="RemoteEventsBinding" contract="EPiServer.Events.ServiceModel.IEventReplication" />
      <!-- Uncomment this endpoint and the "RemoteEventServiceEndPoint" to enable remote events
        <endpoint name="RemoteEventServiceClientEndPoint"
           address="soap.udp://239.255.255.19:5000/RemoteEventService"
           binding="customBinding"
           bindingConfiguration="RemoteEventsBinding"
           contract="EPiServer.Events.ServiceModel.IEventReplication" />-->

    </client>
    <behaviors>
      <serviceBehaviors>
        <behavior name="DebugServiceBehaviour">
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <customBinding>
        <binding name="RemoteEventsBinding">
          <binaryMessageEncoding />
          <udpTransport multicast="True" />
        </binding>
      </customBinding>
   </bindings>

        <serviceHostingEnvironment multipleSiteBindingsEnabled="false">
   <serviceActivations>
    <add relativeAddress="Templates/eDemokrati/services/eDemokratiService.svc" service="SSP.eDemokrati.Templates.Services.eDemokratiService" />
   </serviceActivations>
  </serviceHostingEnvironment>

  </system.serviceModel> 
```

我应该向 IIS 添加什么配置才能使其正常工作？

# forms - 如何从 Symfony 2.2 中的表单生成器获取字段值

> ID：14580800
> 
> 赞同：1
> 
> 时间：2013-01-29T10:30:32.043
> 
> 标签：forms, symfony, symfony-2.2

我如何从表单生成器中获取字段值？

我的控制器：

```
$region = new Region();
$region->setName('TEMP!!');

$formBuilder = $this->createFormBuilder(array('region' => $region));

$formBuilder->add('region', new RegionAjaxType); 
```

和表格类型：

```
/**
 * @{inerhitDoc}
 */
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $region = ....
    $builder
       ->add('name', 'text');
} 
```

我想从构建器表单中获取区域对象以获取变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:38:18.097

选项有参数“数据”

示例用法：

```
/**
 * @{inerhitDoc}
 */
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $region = $options['data'];
    $builder
       ->add('name', 'text');
} 
```

并控制使用类型`OptionsResolver`

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver
        ->setDefaults(array(
            'region' => new Region
        ))
        ->addAllowedTypes(array(
            'region' => 'Acme\DemoBundle\Entity\Region',
        ))
    ;
} 
```

# android - Web应用程序中的Android/Iphone设备数据区别？

> ID：14580802
> 
> 赞同：1
> 
> 时间：2013-01-29T10:30:38.017
> 
> 标签：android, iphone, database-design, data-binding

因此，我正在研究一个 Web 应用程序的数据库架构，该应用程序也将开发其 android 和 iphone 应用程序。

为此，我想创建一个列名`device_id`来`mysql database`跟踪用户是否通过**web-app**或**android-app**或**iphone-app**使用应用程序。

以下是几个功能点：

**创建/注册**

*   可以通过 web-app / android-app / iphone-app 完成。

**登录**

*   无论从哪里创建用户，用户都可以基于 Web 上的中央数据库从所有用户登录（使用登录 Web 服务）。

**问题域**

> 没有任何事实，但我的一些技术团队建议：

**之前会提供**UDID**和**ANDROID_ID的****Iphone**和**Android**在未来的版本中不会这样做。**

 ******现在，

即使没有互联网连接，移动应用程序也可以工作，因此我开发了一个同步工具，它可以通过单击按钮将设备上的数据同步**到网络**和**网络到设备。**

某些情况下可能包括**同一用户，他也在各种设备和 Web 上使用该应用程序，**以便数据在设备和 Web 上无缝同步。

因此，最好的解决方法是什么，我可以自动生成一些独特的序列，而不是依赖设备 ID 进行同步过程。

- -编辑 - -

> 在出厂重置和植根设备上，它确保设备不会返回唯一的 ID，而且还有各种开发公司致力于 android 定制，因此它不能保证唯一的设备 ID。那么，我怎么能通过我的末端和网络上的一些逻辑来获得更好的解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:11:14.277

猜想你已经完成了同步过程（@Nishant B 的帖子），现在对于唯一 ID，这里是几乎适用于所有 Android 设备（Tab + Mobile）的代码片段。

现在如您所知，Android 中无法保证任何唯一 ID，因此最好创建一个密钥，该密钥将在每次生成时生成为多个密钥和唯一的组合...

```
TelephonyManager TelephonyMgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
String szImei = TelephonyMgr.getDeviceId(); // Requires READ_PHONE_STATE

String m_szDevIDShort = "35" + //we make this look like a valid IMEI
Build.BOARD.length()%10+ Build.BRAND.length()%10 +
Build.CPU_ABI.length()%10 + Build.DEVICE.length()%10 +
Build.DISPLAY.length()%10 + Build.HOST.length()%10 +
Build.ID.length()%10 + Build.MANUFACTURER.length()%10 +
Build.MODEL.length()%10 + Build.PRODUCT.length()%10 +
Build.TAGS.length()%10 + Build.TYPE.length()%10 +
Build.USER.length()%10 ; //13 digits

WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);

BluetoothAdapter m_BluetoothAdapter = null; // Local Bluetooth adapter
m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
String m_szBTMAC = m_BluetoothAdapter.getAddress();
String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();

String m_szLongID = m_szImei + m_szDevIDShort + m_szWLANMAC + m_szBTMAC;
// compute md5
MessageDigest m = null;
try {
     m = MessageDigest.getInstance("MD5");
} catch (NoSuchAlgorithmException e) {
e.printStackTrace();
}

m.update(m_szLongID.getBytes(),0,m_szLongID.length());
// get md5 bytes
byte p_md5Data[] = m.digest();
// create a hex string
String m_szUniqueID = new String();

for (int i=0;i<p_md5Data.length;i++) {
        int b = (0xFF & p_md5Data[i]);
// if it is a single digit, make sure it have 0 in front (proper padding)
if (b <= 0xF) m_szUniqueID+="0";
// add number to string
     m_szUniqueID+=Integer.toHexString(b);
}

// hex string to uppercase
m_szUniqueID = m_szUniqueID.toUpperCase(); 
```

在这里，我们获取了 IMEI、制造商板详细信息、Wifi 地址和蓝牙地址（出厂重置时不将 ANDROID_ID 作为其更改）。`m_szUniqueID`结合这些密钥，可以在 MD5 的帮助下生成唯一密钥（ ）。

我确信在上面的帮助下，您每次都可以生成一个唯一的密钥。

好点：

*   它在同一设备上的连续生成中没有变化，这意味着一个设备将只有一个 ID，即唯一。
*   甚至可以使用未注册的设备，即没有 IMEI 号码的设备。
*   也适用于平板电脑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:37:56.927

您在同步过程中处于正确的轨道上。

设备 UDID（适用于 iPhone）和 Android_ID（适用于 Android）仅用于推送通知。

您可以在没有这个的情况下实现同步过程。

为此，您需要执行以下步骤：

1) 当应用程序第一次在设备 (iPhone/Android) 中打开时，然后在服务器上传递空白 ("") 日期。所以它会给你所有的数据。

2）将所有数据存储在本地数据库中以供离线使用。并且还在本地存储服务器日期。

3）现在，当用户下次打开应用程序时，然后将先前存储的数据传递到服务器上，它将只提供最新添加/更新的数据。

4）在本地数据库中进行必要的更改添加/编辑。

5) 这样，您将在网络和两个应用程序（iPhone 和 Android）中拥有相同的数据。

6) 当用户对本地数据进行更改时，在本地数据库中将其设置为“TRUE”。因此，当下一次同步执行时，检查 SET 位并将所有数据上传到服务器。

7) 因此，所有网络、iphone 和 android 上的所有数据都将是最新的。

希望你有一个想法。

快乐编码。

干杯!******

# zend-framework2 - 插入行时 ZF2 TableGateway 不起作用

> ID：14580803
> 
> 赞同：0
> 
> 时间：2013-01-29T10:30:40.460
> 
> 标签：zend-framework2, tablegateway

当我打算在 DB 中插入一行时，我遇到了一个致命错误。我不明白发生了什么，我阅读了一些博客但没有解决方案，我的代码与 Evan 在他的博客中发布的示例相同。

我的模特班

```
`class CommentTable 
{
    protected $_commentTableGateway;
    protected $_hydratator;
    protected $_resultSet;

    public function __construct($adapter)
    {
        $this->_hydratator           = new \Zend\Stdlib\Hydrator\ClassMethods;
        $rowObjectPrototype = new Comment();
        $this->_resultSet          = new \Zend\Db\ResultSet\HydratingResultSet($this->_hydratator, $rowObjectPrototype);
        $this->_commentTableGateway =  new TableGateway('comments', $adapter, null, $this->_resultSet );
    }   
    public function fetchAll() 
    {
        return $this->_commentTableGateway->select();
    }

    public function saveComment(Comment $comment)
    {  
        $id = (int)$comment->getId();
        if ($id == 0) {
           $this->_commentTableGateway->insert($this->_hydratator->extract($comment));//this fails
        } else {
            if ($this->getComment($id)) {
                $this->_commentTableGateway->update($data, array('id' => $id));
            } else {
                throw new \Exception('El comentario que queire editar no exite');
            }
        }
    }

    public function getComment($id)
    {
        $id  = (int) $id;
        $rowset = $this->_commentTableGateway->select(array('id' => $id));
        $row = $rowset->current();
        if (!$row) {
            throw new \Exception("Could not find row $id");
        }
        return $row;
    }
}
</code>
<code>` 
```

 `In module class:

```
//a factory in service manager
'Comment\Model\CommentTable' =>  function($sm) {
        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
        $table = new CommentTable($dbAdapter);
        return $table;
},
</code>    
<code> 
```

My controller:` 

```
public function getCommentTable()
{
    if (!$this->_commentTable) {
        $sm = $this->getServiceLocator();
        $this->_commentTable = $sm->get('Comment\Model\CommentTable');
    }
    return $this->_commentTable;
}

</code> 
```

我得到这个错误：

可捕获的致命错误：第 258 行的 D:\xampp\htdocs\haystack\vendor\zendframework\zendframework\library\Zend\Db\Adapter\Driver\Pdo\Statement.php 中的类 stdClass 的对象无法转换为字符串

我知道错误的类型（'stdClass 无法转换为字符串'），但我不明白发生了什么......

任何帮助表示赞赏

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:03:58.043

希望这会帮助你。这是我的 TableGateway

```
class Domains extends AbstractTableGateway
{
    public function __construct($adapter)
    {
        $this->table = 'domains';

        $this->adapter = $adapter;

        $this->initialize();
    }
} 
```

这是我插入数据的方式：

```
$this->getTableDomains()->insert(array(
    'companyid' => $params['companyid'],
    'domain_id' => $result->id,
    'name'      => $name,
    'type'      => strtoupper($params['type']),
    'content'   => strtolower($params['content']),
    'ttl'       => $ttl,
    'prio'      => $prio
)); 
```

# wordpress - MediaElement.js 将音频播放器显示为黑色矩形

> ID：14580815
> 
> 赞同：0
> 
> 时间：2013-01-29T10:31:02.570
> 
> 标签：wordpress, mediaelement.js, mediaelement

自从使用 WordPress 3.5.1 升级到 MediaElement.js 版本 2.10.3 后，我网站上的音频播放器显示为带有“下载”链接的黑色矩形，而不是播放器。无论使用什么主题，都会发生这种情况。这发生在 Mac 上的 Firefox 和 Safari 中。

[http://www.centenarypresbyterian.org.au/bible-talks/](http://www.centenarypresbyterian.org.au/bible-talks/)

（其他用户在 wordpress 支持论坛上报告了同样的问题 - [http://wordpress.org/support/topic/plugin-mediaelementjs-html5-video-audio-player-black-rectangle-no-audio-no-video-在旧版浏览器中](http://wordpress.org/support/topic/plugin-mediaelementjs-html5-video-audio-player-black-rectangle-no-audio-no-video-in-older-ie-browsers)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:09:46.470

我有同样的问题。我注意到在 MediaElement 插件的设置页面上，“音频设置”下的“默认类型”字段中没有任何值。我将值设置为“audio/mp3”，它又开始工作了。不知道这是否是一个新领域，或者升级是否破坏了我的价值。

# php - 使用 Smarty 在一行上重置多个变量

> ID：14580822
> 
> 赞同：1
> 
> 时间：2013-01-29T10:31:09.170
> 
> 标签：php, variables, smarty, variable-assignment, template-engine

我有许多变量想在 Smarty 中重置为空白，但是我想避免这样的多行：

```
{assign var='background_id' value=''}
{assign var='background_link' value=''} 
```

有没有一种方法可以像在 PHP、Perl 等中那样使用 Smarty 在一行中重置多个变量？

Smarty 文档中对此没有任何内容。

# android - GCM 面临问题 - 设备上未收到消息

> ID：14580823
> 
> 赞同：2
> 
> 时间：2013-01-29T10:31:09.177
> 
> 标签：android, google-cloud-messaging

我遵循谷歌指南在我的设备和服务器端设置 GCM。我成功获得了设备注册 ID，当我使用它使用谷歌提供的服务器端代码发送消息时，我也获得了成功。但是我的手机没有收到任何消息。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:41:12.970

参考[链接](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)，了解概念并参考课程`GCMIntentService`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:34:20.233

根据[GCM Architectural Overview](http://developer.android.com/google/gcm/gcm.html)，GCM 使用端口 5228、5229 和 5230 来发送消息。如果您一切正常，但仍未收到消息，请询问您的网络管理员并确认这些端口已打开。

# c# - 在计时器的帮助下构建秒表

> ID：14580828
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:31:14.817
> 
> 标签：c#, winforms, timer

我想向我的 WinForms 添加功能，以便在它启动时启动一个计数器，该计数器将以 hh:mm 为单位。我知道这可以使用计时器来完成。我制作了一个显示当前时间的时间标签，但我不知道如何在加载表单时启动计时器。有什么方法或类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:50:47.843

将`Timer`组件放置到您的表单中（从工具箱中拖动它 - 这很重要，因为计时器应该注册为表单的组件，以便在表单关闭时正确处理）。将计时器的`Interval`属性设置为`60000`（等于一分钟）。并订阅`Tick`事件：

```
void timer1_Tick(object sender, EventArgs e)
{
    if (endTime < DateTime.Now)
    {
       MessageBox.Show("Time is out!");
       timer1.Stop();
       return;
    }

    timeLabel.Text = (endTime - DateTime.Now).ToString(@"hh\:mm");
} 
```

在[Form_Load](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件处理程序上启动计时器并保存倒计时结束时间：

```
private DateTime endTime; // field to store end time

void Form1_Load(object sender, EventArgs e)
{
    endTime = DateTime.Now.AddMinutes(120); // set countdown to 120 minutes
    timer1.Start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:42:12.220

计时器的创建非常简单直接：

```
Timer t1 = new Timer(); 
t1.Interval = 100; 
t1.Tick+=new EventHandler(t1_Tick);
t1.Start();

void t1_Tick(object sender, EventArgs e)
{

} 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.80).aspx)

# c++ - Qt从文件中打开图像 - 如何知道图像大小

> ID：14580835
> 
> 赞同：4
> 
> 时间：2013-01-29T10:31:32.243
> 
> 标签：c++, image, file, qt

我正在使用 QFileDialog 获取图像文件。图像可以是不同的标准图像文件扩展名。如何获取图像大小（宽度和高度）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-05-09T07:36:10.043

如果只需要图像的大小，而不需要图像本身，最好使用 QImageReader。如[wiki](http://wiki.qt.io/Loading_Large_Images)中所述，并非所有图像数据都已加载。这个过程应该快得多：

```
QImageReader reader("image.png");
QSize sizeOfImage = reader.size();
int height = sizeOfImage.height();
int width = sizeOfImage.width(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:34:45.717

从检索到的文件名创建 QPixmap 并调用[QPixmap::size()](https://doc.qt.io/qt-5/qpixmap.html#size)

# css - 改变背景没有滑动效果

> ID：14580837
> 
> 赞同：0
> 
> 时间：2013-01-29T10:31:36.263
> 
> 标签：css, zepto

我正在研究像滑块一样的 iphone。是`<input type="range">`带有供滑动使用的按钮的标签。当我将按钮移动到结束时，锁定图片上的按钮必须更改为解锁图片。为此，我将按钮的背景从带有锁定图标的图片更改为带有解锁图标的图片（都在一张精灵图片中）。像这样： `$('.btn').css({'background-position': '-62px -104px'});` 但是由于某种原因，图片不仅发生了变化，而且就像向右滑动并消失了，而从左侧出现了新图片。奇怪的动画效果。而且我找不到这种奇怪行为的原因。谁能向我解释为什么会这样，我该怎么办？我不确定，但也许会有所帮助：滑块使用 Zepto js 而不是常规的 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:35:49.053

听起来您在`.btn`元素上激活了 css 转换。这将导致背景图像以滑动效果过渡。

尝试将以下 css 添加到元素中：

```
.btn {
    -webkit-transition: none;
       -moz-transition: none;
         -o-transition: none;
            transition: none;
} 
```

请注意，如果您的代码的任何其他部分依赖于处于活动状态的转换，这可能会产生意想不到的后果。

有关更多信息，请参见此处[http://www.w3.org/TR/css3-transitions/#transition-shorthand-property](http://www.w3.org/TR/css3-transitions/#transition-shorthand-property)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:34:23.157

试试这个：

```
$('.btn').css({'background-position': 'old position'}).hide();
$('.btn').css({'background-position': 'new position'}).show(); 
```

# java - 导入 com.sun.xml.internal.fastinfoset.util.StringArray 无法在 javac 中解析

> ID：14580841
> 
> 赞同：0
> 
> 时间：2013-01-29T10:31:56.870
> 
> 标签：java, ant

我正在尝试为我的项目编写 ant 脚本，但在 javac 我遇到了这个问题：

```
80: package com.sun.xml.internal.fastinfoset.util does not exist
[javac] import com.sun.xml.internal.fastinfoset.util.StringArray;
[javac]                                        ^ 
```

JAVA_HOME 设置为 jdk1.6 ANT_HOME 设置为 apache-ant-1.8.4

构建文件是

```
<?xml version="1.0" ?>
<project name="project" default="war">
<property name="location" location="D:\Project"></property>
<property name="project-location" location="${location}\project"></property>
<path id="Web App Libraries.libraryclasspath">
 <fileset dir="${project-location}/web/WEB-INF/lib"/>
 </path>
    <path id="EAR Libraries.libraryclasspath"/>
    <path id="compile.classpath">
        <pathelement location="${project-location}/web/WEB-INF/classes"/>
        <path refid="Web App Libraries.libraryclasspath"/>
        <path refid="EAR Libraries.libraryclasspath"/>
</path>
<path id="Server Library [JBoss v4.2] (unbound).libraryclasspath"/>

<target name="init" >
    <mkdir dir="D:/JBOSSHOME/build/classes"/>
    <mkdir dir="D:/JBOSSHOME/dist" />
</target>

<target name="compile" depends="init" >
    <javac destdir="D:/JBOSSHOME/build/classes" debug="true"       srcdir="${project-location}/src">
        <classpath refid="compile.classpath"/>
    </javac>
</target>

<target name="war" depends="compile">
    <war destfile="D:/JBOSSHOME/project.war" webxml="${project-location}/web/WEB-INF/web.xml">
        <fileset dir="${project-location}/web"/>
        <lib dir="${project-location}/web/WEB-INF/lib"/>
        <classes dir="D:/JBOSSHOME/build/classes"/>
    </war>
</target> 
```

任何帮助或指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:36:29.927

不推荐使用 com.sun.internal 包，因为

*   不保证它们可以跨环境使用
*   也不保证对这些类的支持

# android - 使用 javacv android 进行人脸识别

> ID：14580842
> 
> 赞同：2
> 
> 时间：2013-01-29T10:31:57.047
> 
> 标签：android, javacv

我正在关注 javacv 人脸检测/识别代码，关于人脸识别存在混淆。我正在做的是（对不起，如果这听起来很愚蠢，但我被卡住了）

1）检测人脸裁剪并将其保存到sdcard并将路径放在learn.txt文件中（学习部分）

2）检测人脸裁剪它并在现有人脸中找到它，无论它是否存在，但即使人脸在样本人脸中不存在，它也总是返回最近的位置。

我做错了什么？

```
// Method, I'm using to recognize face

public Integer recognizeFace(Bitmap face, Context context) {
    Log.i(TAG, "===========================================");
    Log.i(TAG, "recognizeFace (single face)");

    float[] projectedTestFace;
    float confidence = 0.0f;
    int nearest = -1; // closest match -- -1 for nothing. 
    int iNearest;

    if (trainPersonNumMat == null) {
        return null;
    }

    Log.i(TAG, "NUMBER OF EIGENS: " + nEigens);
    // project the test images onto the PCA subspace
    projectedTestFace = new float[nEigens];
    // Start timing recognition
    long startTime = System.nanoTime();

    testFaceImg = bmpToIpl(face);
//  saveBmp(face, "blah");
    // convert Bitmap it IplImage
    //testFaceImg = IplImage.create(face.getWidth(), face.getHeight(),
    //      IPL_DEPTH_8U, 4);

    //face.copyPixelsToBuffer(testFaceImg.getByteBuffer());

    // project the test image onto the PCA subspace
    cvEigenDecomposite(testFaceImg, // obj
            nEigens, // nEigObjs
            new PointerPointer(eigenVectArr), // eigInput (Pointer)
            0, // ioFlags
            null, // userData
            pAvgTrainImg, // avg
            projectedTestFace); // coeffs

    // LOGGER.info("projectedTestFace\n" +
    // floatArrayToString(projectedTestFace));
    Log.i(TAG, "projectedTestFace\n" + floatArrayToString(projectedTestFace));

    final FloatPointer pConfidence = new FloatPointer(confidence);
    iNearest = findNearestNeighbor(projectedTestFace, new FloatPointer(pConfidence));
    confidence = pConfidence.get();
    // truth = personNumTruthMat.data_i().get(i);
    nearest = trainPersonNumMat.data_i().get(iNearest); // result

    // get endtime and calculate time recognition process takes
    long endTime = System.nanoTime();
    long duration = endTime - startTime;
    double seconds = (double) duration / 1000000000.0;
    Log.i(TAG, "recognition took: " + String.valueOf(seconds));

    Log.i(TAG, "nearest = " + nearest + ". Confidence = " + confidence);
    Toast.makeText(context, "Nearest: "+nearest+" Confidence: "+confidence, Toast.LENGTH_LONG).show();

    //Save the IplImage so we can see what it looks like
    Random generator = new Random();
    int n = 10000;
    n = generator.nextInt(n);
    String fname = "/sdcard/saved_images/" + nearest + " " + String.valueOf(seconds) + " " + String.valueOf(confidence) + " " + n + ".jpg";

    Log.i(TAG, "Saving image as: " + fname);

    cvSaveImage(fname, testFaceImg);

    return nearest;
} // end of recognizeFace 
```

**编辑**信心总是消极的！

提前致谢

# git - Git 备忘单

> ID：14580843
> 
> 赞同：2
> 
> 时间：2013-01-29T10:31:57.653
> 
> 标签：git

我来自 SVN，并决定现在将 GIT 用于我的一个项目。我看过 Mercurial 备忘单和 GIT 教程，但没有看到漂亮干净的 GIT 工作表的建议。是否有一个 GIT 备忘单在命令的彻底解释和简洁之间取得了很好的平衡？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:36:09.613

输入谷歌`github cheat sheet ext:pdf`。前3个结果确实不错。

无论如何，你可以在 github 网站上找到很好的[帮助](https://help.github.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:35:51.343

这是一个[Git SVN 速成课程](http://git.or.cz/course/svn.html)- 专门为从 SVN 切换到 Git 的人制作的指南。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:02:34.600

我发现[这个](http://ndpsoftware.com/git-cheatsheet.html)有时可以用作书签。如果您需要使用 git 的起点，我推荐两个资源：

*   [github开始教程](http://try.github.com/levels/1/challenges/1)
*   [git ready](http://gitready.com/)这个指向另外两个非常好的信息源：[git book](http://git-scm.com/book)和[git from botton up](http://newartisans.com/2008/04/git-from-the-bottom-up/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T22:55:19.837

Matthew McCullough 最好的 Git 备忘单之一[就在这里](http://refcardz.dzone.com/refcardz/getting-started-git)。

# sql-server - 如何在 Orchard 中使用 IRepository 和 int 键（不是 IDENTITY）

> ID：14580845
> 
> 赞同：3
> 
> 时间：2013-01-29T10:32:01.383
> 
> 标签：sql-server, asp.net-mvc, insert, orchardcms, irepository

我正在使用 Orchard IRepository 来管理数据并保存到数据库……这就是我想要做的。

我的课是：

```
public class SocietaRecord
{
    public virtual int Id { get; set; }
    public virtual string Club { get; set; }
    public virtual string Email { get; set; }
} 
```

我的迁移：

```
SchemaBuilder.CreateTable("SocietaRecord", table => table
    .Column<int>("Id", column => column.PrimaryKey())
    .Column<String>("Club", c => c.Nullable())
    .Column<String>("Email", c => c.Nullable())
); 
```

请注意，Id 不是和 IDENTITY

现在，当我调用 Repository Create 时，执行以下插入：（使用 sql profiler 抓取）

```
exec sp_executesql N'INSERT INTO Match_SocietaRecord 
(Club, Email) VALUES (@p0, @p1); 
select SCOPE_IDENTITY()',N'@p0 nvarchar(4000),@p1 nvarchar(4000),
@p0=N'Test',@p1=NULL 
```

失败是因为它忽略了我的 Id 并假设（错误地）Tables 有一个自动编号键。

这是错误：

```
NHibernate.Exceptions.GenericADOException: could not insert:
[Match.Models.SocietaRecord]
[SQL: INSERT INTO Match_SocietaRecord (Club, Email) VALUES (?, ?); 
select SCOPE_IDENTITY()] ---> System.Data.SqlClient.SqlException: 
Cannot insert the value NULL into column 'Id', table ORCHARD.dbo.Match_SocietaRecord'; 
column does not allow nulls. INSERT fails. 
```

如何向存储库解释以查看表并且如果没有身份则不要假设身份以便我可以插入自己的 id？（是的，我在创建之前在对象记录上提供了一个有效的 ID）

编辑：我已经挖掘了一些代码，我认为：

*   不正确的身份是由于 Fluent NHibernate：自动映射约定

*   Orchard 使用 IAutoMappingAlteration 覆盖不正确的假设

所以我可以改变我的问题：

如何为我的班级定义自定义 IAutoMappingAlteration 以向 Orchard 解释我的 Id 不是身份？

或（换句话说）

如自动映射文档中所述，我可以在哪里找到果园中的“自动映射配置”？

[https://github.com/jagregory/fluent-nhibernate/wiki/Auto-mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Auto-mapping)

（...“您可以通过覆盖自动映射配置中的 IsId 方法来修改自动映射器发现身份的方式。”...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:28:09.443

Orchard 中的存储库实现可供更高级别的内容管理 API 使用。它的设计或意图不是作为通用存储库实现或 ORM 的替代品（我们为此提供了 nHibernate）。您应该直接使用 nHibernate。OrchardPo 模块中的低级示例：[https ://bitbucket.org/bleroy/orchardpo/src](https://bitbucket.org/bleroy/orchardpo/src)

# java - 如何将文件包装为 blob 并将它们作为数据存储提交到谷歌应用引擎 java

> ID：14580846
> 
> 赞同：1
> 
> 时间：2013-01-29T10:32:01.397
> 
> 标签：java, google-app-engine, google-cloud-storage

我尝试使用文件服务将数据存储在 Google 应用程序引擎中，并且我成功上传了它，但后来我注意到它没有存储为 blob 值。所以我用谷歌搜索并得到了这个链接[如何处理多部分表单数据？或如何处理文件上传到我的应用程序？](https://developers.google.com/appengine/kb/java#fileforms)由谷歌提供。

在本文档中，代码如下所示，

```
 FileItemIterator iterator = upload.getItemIterator(req);
 while (iterator.hasNext()) {
 FileItemStream item = iterator.next();
 InputStream stream = item.openStream();
 if (item.isFormField()) {
 log.warning("Got a form field: " + item.getFieldName());
 } else {
 log.warning("Got an uploaded file: " + item.getFieldName() +", name = " + item.getName());

 // You now have the filename (item.getName() and the
 // contents (which you can read from stream). Here we just
 // print them back out to the servlet output stream, but you
 // will probably want to do something more interesting (for
 // example, wrap them in a Blob and commit them to the
 // datastore). 
```

这里我不了解如何将它们包装为 blob 并将它们提交到数据存储区。谁能建议我如何解决这个问题。这种方式是否将文件存储为谷歌应用引擎中的 blob 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:34:06.003

```
InputStream is = item.openStream();
try {
   FileService fileService = FileServiceFactory.getFileService();
   AppEngineFile file = fileService.createNewBlobFile(mime, fileName);
   boolean lock = true;
   FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
   byte[] buffer = new byte[BUFFER_SIZE];
   int readBytes;
   while ((readBytes = is.read(buffer)) != -1) {
       writeChannel.write(ByteBuffer.wrap(buffer, 0, readBytes));
   }
   writeChannel.closeFinally();
   String blobKey = fileService.getBlobKey(file).getKeyString();
} catch (Exception e) {
   e.printStackTrace(resp.getWriter());
} 
```

# php - 构造 PHP 数组以正确传递给 JS

> ID：14580849
> 
> 赞同：0
> 
> 时间：2013-01-29T10:32:09.607
> 
> 标签：php, javascript, jquery, json, mongodb

当我们这样做时，这有效：

```
$db = $connection->messages;
$collection = $db->messagesCollection;
$messageArray = $collection->find(array('IDto' => '4'));
foreach($messageArray as $messageData){
    $messageFrom = $messageData['IDfrom'];
    $messageTo = $messageData['IDto'];
    $messageTitle = $messageData['messageTitle'];
    $messageIfRead = $messageData['ifRead'];    
}

$JSONData = array('true', $messageFrom, $messageTo, $messageTitle, $messageIfRead); 
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

但是当我们这样做时：

```
$db = $connection->messages;
$collection = $db->messagesCollection;
$messageArray = $collection->find(array('IDto' => '4'));
$JSONData = array('true', $messageArray); 
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

并在 Javascript 中这样做：

```
$.getJSON("mySite.com/pullData/getMail.php?callback=?",{
request: requestVar},
function(recievedData) {
    alert(recievedData);
}) 
```

我们收到警告`true, [object Object]` 当使用控制台日志时，我们得到`Object {}`

我们如何正确发送该表数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:39:01.607

我相信你最大的问题是`MongoCursor`：

```
$messageArray = $collection->find(array('IDto' => '4'));
$JSONData = array('true', $messageArray); 
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

您正在尝试对`MongoCursor`那里的对象进行编码，因此字符串表示形式为`[object Object]`.

尝试：

```
$messageArray = $collection->find(array('IDto' => '4'));
$JSONData = array('true', iterator_to_array($messageArray)); 
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

反而。`find`MongoDB 中的所有函数都返回 a `MongoCursor`，您的第一个代码工作的原因是因为您迭代游标来构建您的对象：

```
foreach($messageArray as $messageData){
    $messageFrom = $messageData['IDfrom'];
    $messageTo = $messageData['IDto'];
    $messageTitle = $messageData['messageTitle'];
    $messageIfRead = $messageData['ifRead'];    
} 
```

另请注意，`json_encode`文档的默认值将包含对象，例如`MongoId`和`MongoDate`不会很好地编码为可重用的 JSON 语法。因此，您需要自己处理这些类型。

### 编辑

也许更好的方法是手动重做索引：

```
$messageArray = $collection->find(array('IDto' => '4'));
$d = array();
foreach($messageArray as $row){
    $d = $row;
}

$JSONData = array('true', $d); 
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

这样，您将拥有一个`0`基于递增的索引，而不是 ObjectId 作为每个索引的基础。

# r - 使用 dropbox api 读取 R 中的原始数据以保存为 .RData 文件

> ID：14580850
> 
> 赞同：5
> 
> 时间：2013-01-29T10:32:12.570
> 
> 标签：r, dropbox-api, rcurl, httr

在为 dropbox 制定了 oauth 签名批准系统后，我想使用 API 和`httr`'s`GET`函数下载我保存在那里的 .RData 文件。

该请求成功并返回数据，但它是原始格式，并且想知道如何在本地驱动器上再次将其转换为 RData 文件。

这是我到目前为止所做的：...

```
require(httr)
db.file.name <- "test.RData"
db.app <- oauth_app("db",key="xxxxx", secret="xxxxxxx")
db.sig <- sign_oauth1.0(db.app, token="xxxxxxx", token_secret="xxxxxx")

response <- GET(url=paste0("https://api-content.dropbox.com/1/files/dropbox/",db.file.name),config=c(db.sig,add_headers(Accept="x-dropbox-metadata")))

str(response)
List of 8
 $ url        : chr "https://api-content.dropbox.com/1/files/dropbox/test.RData"
 $ handle     :List of 2
  ..$ handle:Formal class 'CURLHandle' [package "RCurl"] with 1 slots
  .. .. ..@ ref:<externalptr> 
  ..$ url   :List of 8
  .. ..$ scheme  : chr "https"
  .. ..$ hostname: chr "api-content.dropbox.com"
  .. ..$ port    : NULL
  .. ..$ path    : chr ""
  .. ..$ query   : NULL
  .. ..$ params  : NULL
  .. ..$ username: NULL
  .. ..$ password: NULL
  .. ..- attr(*, "class")= chr "url"
  ..- attr(*, "class")= chr "handle"
 $ status_code: num 200
 $ headers    :List of 14
  ..$ server                       : chr "nginx/1.2.6"
  ..$ date                         : chr "Tue, 29 Jan 2013 10:18:58 GMT"
  ..$ content-type                 : chr "application/octet-stream"
  ..$ content-length               : chr "1142953"
  ..$ connection                   : chr "keep-alive"
  ..$ access-control-expose-headers: chr "X-Dropbox-Metadata, Accept-Ranges, Content-Range"
  ..$ accept-ranges                : chr "bytes"
  ..$ x-dropbox-metadata           : chr "{\"revision\": 8398, \"rev\": \"20ce0573b0e8\", \"thumb_exists\": false, \"bytes\": 1142953, \"modified\": \"Thu, 24 Jan 2013 2"| __truncated__
  ..$ etag                         : chr "8398n"
  ..$ pragma                       : chr "public"
  ..$ cache-control                : chr "max-age=0"
  ..$ access-control-allow-origin  : chr "*"
  ..$ status                       : chr "200"
  ..$ statusmessage                : chr "OK"
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
 $ cookies    : list()
 $ content    : raw [1:1142953] 1f 8b 08 00 ...
 $ times      : Named num [1:6] 0 0.4 0.518 0.879 1.898 ...
  ..- attr(*, "names")= chr [1:6] "redirect" "namelookup" "connect" "pretransfer" ...
 $ config     :List of 1
  ..$ httpheader: Named chr [1:2] "x-dropbox-metadata" "OAuth oauth_consumer_key=\"xxxxxx\", oauth_nonce=\"xxxxxxxx\", oauth_signature=\"xxxxxxxxxxxxxx\", o"| __truncated__
  .. ..- attr(*, "names")= chr [1:2] "Accept" "Authorization"
  ..- attr(*, "class")= chr "config"
 - attr(*, "class")= chr "response"

raw.content.of.file <- content(response)
head(raw.content.of.file)
[1] 1f 8b 08 00 00 00 
```

基本上我想以某种方式将`raw.content.of.file`对象保存到一个名为 的文件`downloaded.RData`中，该文件应该与`test.RData`至少能够将位于`test.RData`我的全局环境中的对象相同或失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:46:18.103

您可以使用`writeBin`将二进制响应内容写入`Rda`文件。这是一个完整的工作示例：

```
library(httr)
test <- 1:10
save(test, file="~/Dropbox/test.Rda")
response <- GET(url="https://dl.dropbox.com/s/9rjbjwqxid7yj53/test.Rda?dl=1")
writeBin(response$content, "test2.Rda")
rm(test)
load("test2.Rda")
test
 [1]  1  2  3  4  5  6  7  8  9 10 
```

如果您不想将二进制数据保存到文件中，还有一种更简单的方法。你可以直接做：

```
rm(test)
load(rawConnection(response$content))
test
 [1]  1  2  3  4  5  6  7  8  9 10 
```

# .htaccess - 搜狗蜘蛛在屏蔽后仍然访问我们的网站

> ID：14580854
> 
> 赞同：1
> 
> 时间：2013-01-29T10:32:19.650
> 
> 标签：.htaccess, mod-rewrite, web-crawler

我们的网站被“搜狗网络蜘蛛”点击率很高，所以我们想到了使用htaccess规则来阻止它。我们创建了以下规则 -

```
RewriteCond %{HTTP_USER_AGENT} Sogou [NC]
RewriteRule ^.*$ - [L] 
```

然而，我们仍然受到搜狗的欢迎。我想知道我应该在这条规则中做哪些改变来阻止搜狗。

感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:22:56.517

正如@faa 提到的，你实际上并没有阻止任何东西：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} Sogou [NC]
RewriteRule ^.*$ map.txt [R=403] 
```

确保您已打开 RewriteEngine 和 [R=403]。

您可能仍然会在访问日志中看到来自它们的命中，但是结合不发送任何数据和 403 禁止标头，您应该会看到命中最终消失。即使他们继续抓取您的网站，它也不应该再在您的服务器上产生如此多的额外负载。

# ruby-on-rails - Take input in the view and pass it to the contoller

> ID：14580862
> 
> 赞同：0
> 
> 时间：2013-01-29T10:32:41.773
> 
> 标签：ruby-on-rails

The following code in not rendering even the buttons:

```
<% form_tag :controller=> :create_new, :action=>:input do %>
<%=text_field_tag :my_input%>
<%=submit_tag "Send input"%>
<%end%> 
```

the controller create_new has the following method:

```
def input
@my_input=params[:my_input]
end 
```

the routes.rb has::

```
resources :create_new do
   post :input, :on=>:collection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:34:47.390

Use `<%= form_tag` instead of `<% form_tag`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:48:56.840

```
<%= form_tag input_create_new_path, :html_options => {:method => :post} do |f| %>
  <%= f.text_field :my_input%>
  <%= f.submit "Send input"%>
<%end%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:42:09.897

对于 rails 3，我们必须对 form_tag 和 form_for 使用“=”符号。所以改变你的代码如下..

```
 <%=form_tag :controller=> :create_new, :action=>:input do %>
 <%=text_field_tag :my_input%>
 <%=submit_tag "Send input"%>
 <%end%> 
```

# ruby-on-rails - rails设计路由问题

> ID：14580866
> 
> 赞同：0
> 
> 时间：2013-01-29T10:33:04.893
> 
> 标签：ruby-on-rails, devise

我是 Rails 新手，这是我的第一个应用程序。当前使用 rails 3.2.11 并设计 2.2.3 进行身份验证。

问题是登录后，应用程序返回 404 并说它无法找到“用户”控制器和“显示”操作的路由。

我有一个用于静态页面的主控制器和一个用于用户的用户控制器。我已经使用 rails generate 命令生成了用户模型。我的 config/routes.rb 如下。

```
devise_for :users
resources  :users
root :to => 'home#index' 
```

* * *

> > 在 2013-01-29 15:44:25 +0530 开始 POST "/users/sign_in" for 127.0.0.1 由 Devise::SessionsController#create as HTML 参数处理：{"utf8"=>"✓", "authenticity_token" =>"cHXjNbgzEx2YsHX/AMb1oxjStY75IVHc9wT40NUOdJM=", "user"=>{"email"=>"r@e.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, " commit"=>"Sign in"} 用户负载 (0.4ms) SELECT "users".* FROM "users" WHERE "users"."email" = 'r@e.com' LIMIT 1 (0.1ms) 开始交易 ( 0.5ms）更新“用户”设置“last_sign_in_at”='2013-01-29 10:06:46.145781'，“current_sign_in_at”='2013-01-29 10:14:26.063767'，"sign_in_count" = 66, "updated_at" = '2013-01-29 10:14:26.067024' WHERE "users"."id" = 1 (188.0ms) commit transaction Completed 404 Not Found in 365ms

```
ActionController::RoutingError (No route matches {:action=>"show", :controller=>"users"}): app/controllers/application_controller.rb:5:in `after_sign_in_path_for' 
```

我已经修改了应用程序控制器，如下所示

```
def after_sign_in_path_for(resource)
  user_url(resource)
end 
```

我想要做的是，一旦用户登录，我想向用户显示特定信息。为此，我修改了 after_sign_in_path_for()。关于如何获得所需结果的任何提示？

我的 rake 路线输出如下

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                   users GET    /users(.:format)               users#index
                         POST   /users(.:format)               users#create
                new_user GET    /users/new(.:format)           users#new
               edit_user GET    /users/:id/edit(.:format)      users#edit
                    user GET    /users/:id(.:format)           users#show
                         PUT    /users/:id(.:format)           users#update
                         DELETE /users/:id(.:format)           users#destroy
                    root        /                              home#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:09:53.683

你需要在你的`application_controller.rb`

```
 def after_sign_in_path_for(resource)
   user_url(current_user)
  end 
```

看看[https://github.com/plataformatec/devise/wiki/How-to%3A-redirect-to-a-specific-page-on-successful-sign-in-and-sign-out](https://github.com/plataformatec/devise/wiki/How-to%3A-redirect-to-a-specific-page-on-successful-sign-in-and-sign-out)

只需在干净安装的导轨/设备上尝试并正常工作即可。我认为您应该进行一些重定向`users_controller.rb`，因此无法正常工作！请删除控制器中的任何过滤器或重定向并测试该代码

试一把！

问候！

# php - preg_match 模式在完全有效的值上失败

> ID：14580870
> 
> 赞同：0
> 
> 时间：2013-01-29T10:33:23.127
> 
> 标签：php, regex, wordpress

我使用 regexpal.com 针对 Wordpress 试图比较的数据测试我的正则表达式，但它失败了，看看这个并告诉我你是否发现问题？

正则表达式

```
"#^json/(.+?)/?([a-zA-Z0-9]*)?$#" 
```

匹配的内容

```
json/trips 
```

这些作品，前一个没有

```
json/trips/0
json/trips/13
json/fullticket/9805048001130122361809 
```

如果我在正则表达式中尝试所有这些，它们都可以工作，但是在 wordpress 中，只有不包含我要获取的元素的 id 的那个会失败，其他的可以正常工作。

有趣的是，$matches 返回：

```
array
0 => string 'json/trips' (length=10)
1 => string 't' (length=1)
2 => string 'rips' (length=4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:42:19.510

试试这个正则表达式：

```
#^json/([^/]+)/?([a-zA-Z0-9]*)?$# 
```

输出 ：

```
Array
(
    [0] => json/trips
    [1] => trips
    [2] => 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:45:33.537

稍微调整一下 wordpress 重写规则后的答案是：

```
data/([^/]+)(/([a-zA-Z0-9\-]*))?$ 
```

注意：我在新场景中将 json 更改为数据，所以我不会弄乱自定义帖子类型规则

# javascript - document.querySelectorAll([classname]) 在 IE9 中不起作用

> ID：14580872
> 
> 赞同：1
> 
> 时间：2013-01-29T10:33:28.217
> 
> 标签：javascript, internet-explorer-9, getelementsbyclassname

> **可能重复：**
> [IE9 等效于 querySelectorAll](https://stackoverflow.com/questions/13171247/ie9-equivalent-of-queryselectorall)

我试图在 IE9 中运行的一些 JS 中获取所有类名为“video”的元素。我正在使用`var videopanels = document.querySelectorAll(".video");`哪个在 Chrome 中运行良好。

不幸的是，当我`document.querySelectorAll(".video")`在调试器中观看时出现此错误：

```
document.querySelectorAll(".video")
Object doesn't support property or method 'querySelectorAll'
Error 
```

但是，当我在调试器中观看`document`（它显示为 a `DispHTMLDocument`）并打开`[Methods]`列表时，我看到

```
querySelectorAll()
querySelectorAll(v)
IHTMLDOMChildrenCollection 
```

这是怎么回事？为什么我可以在调试器中看到它，但（显然）没有实际调用或使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:38:00.807

将您的文档类型更改为 html5 标准。

```
<!DOCTYPE html> 
```

还要检查 IE9 是否在兼容模式下运行，因为这可能会导致它忽略它支持的某些方法。

# asp.net-mvc-3 - 在 ASP.NET-MVC3 中禁用 unicode 字符编码

> ID：14580876
> 
> 赞同：5
> 
> 时间：2013-01-29T10:33:35.083
> 
> 标签：asp.net-mvc-3, encoding, utf-8

在我的网站上，每个文本都以 UTF-8 格式提供。

由于现在每个浏览器都支持 unicode 字符，我想按原样使用它们。

asp.net 框架通过将任何 unicode 替换为数字字符引用（如`&#225;`. 参考检查：[http ://en.wikipedia.org/wiki/Unicode_and_HTML#HTML_document_characters](http://en.wikipedia.org/wiki/Unicode_and_HTML#HTML_document_characters)

当然，这样网页可以在最古老的网景中正确呈现，但例如谷歌分析电子商务模块在理解这些特殊编码的字符时遇到了一些麻烦。

有没有办法全局禁用数字字符引用编码？

例如我想用剃刀写：

```
<span class="title">@ViewBag.Title</span> 
```

我希望它显示在输出中：

```
<span class="title">Számítástechnika</span> 
```

不是这个：

```
<span class="title">Sz&#225;m&#237;t&#225;stechnika</span> 
```

我没有尝试禁用 html 编码，因此 Html.Raw 不是解决方案，例如我无法确保 @ViewBag.Title 不会满足以下内容：

```
<span class="title"><script>alert('injected hahahah');</script></span> 
```

所以我对特殊 html 字符的自动编码很满意。这不是我想要禁用的。

我不想重构所有代码，我认为应该有一个“全局开关”来禁用这种在剃刀中使用字符串参数的行为。有没有办法做到这一点？

我也可以明确禁止数字字符引用，例如使用类似的东西`new MvcHtmlString(myString, some parameters)`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:09:32.710

恐怕您无法关闭此编码功能。[WebUtility.HtmlEncode](http://msdn.microsoft.com/en-us/library/ee388364.aspx)提供了这个“不错”的功能，您不能影响编码。

但是，从**.net 4.0**开始，您可以自定义编码行为，方法是创建一个继承自 的类`HttpEncoder`并在 web.cofig [HttpRuntimeSection.EncoderType](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.encodertype.aspx)中对其进行配置。但是您需要实现自己的自定义编码逻辑。

幸运的是， **.net 4.5**附带了一个新`HttpEncoder`的编码坏东西（如`<script>`）但正确处理 Unicode 字符的方法，称为[AntiXssEncoder](http://msdn.microsoft.com/en-us/library/system.web.security.antixss.antixssencoder.aspx)

所以你只需要在你的 web.config 中添加这个：

```
<system.web>
    <httpRuntime encoderType="System.Web.Security.AntiXss.AntiXssEncoder, 
                             System.Web, Version=4.0.0.0, Culture=neutral, 
                             PublicKeyToken=b03f5f7f11d50a3a"/>    
</system.web> 
```

如果您还没有使用 .net 4.5，您可以在[Microsoft Web Protection Library](http://wpl.codeplex.com/)`AntiXssEncoder`的帮助下 实现您的

这是一篇如何设置它的文章：[Using AntiXss As The Default Encoder For ASP.NET](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx)（虽然它可能已经过时了）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-21T10:13:39.503

您也可以使用`@Html.Raw`mvc 的方法。这在您不想在全局级别执行此操作时很有用，有时在已构建的项目中。

```
@Html.Raw(@ViewBag.Title) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-12T14:46:21.330

对于 .Net Core Web 应用程序，您可以在`ConfigureServices`方法中配置默认​​编码行为：

```
public void ConfigureServices(IServiceCollection services)
{
    services.Configure<WebEncoderOptions>(options => 
            {
                options.TextEncoderSettings = new TextEncoderSettings(UnicodeRanges.All);
            });
} 
```

这将在 html 页面上呈现非编码的 unicode 字符。来源[https://github.com/aspnet/HttpAbstractions/issues/315](https://github.com/aspnet/HttpAbstractions/issues/315)

# google-apps-script - Programmatically expanding Tree in Google Apps Script

> ID：14580879
> 
> 赞同：0
> 
> 时间：2013-01-29T10:33:47.103
> 
> 标签：google-apps-script

Is it possible to expand the first element of a tree (GUI) in google apps script? I can't see any methods for that in the API [https://developers.google.com/apps-script/class_tree](https://developers.google.com/apps-script/class_tree)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:41:28.173

您可以使用[TreeItem 方法 setState()](https://developers.google.com/apps-script/class_treeitem#setState)打开树的某个树项。

```
function OpenItem(e)
{
  var app = UiApp.getActiveApplication();
  app.getElementById('Item0').setState(true)
  return app;
} 
```

树项在哪里`Item0`。

[工作示例](https://sites.google.com/a/lagaroo.com.br/dev-test/home/dev-test-tree-item)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:33:01.963

这样的事情怎么样？

```
function treetest(){
var ss=SpreadsheetApp.getActiveSpreadsheet();
var app = UiApp.createApplication()
var tree1 = app.createTree()
var tree2 = app.createTree()
var tree3 = app.createTree()
tree1.add(tree2)
tree1.addItem('item on tree1').addItem('item on tree1').addItem('item on tree1')
tree2.addItem('item on tree2').addItem(tree3).addItem('item on tree2').addItem('item on tree2')
tree3.addItem('item on tree3').addItem('item on tree3')
app.add(tree1)
ss.show(app)
} 
```

![在此处输入图像描述](../Images/efce2820138241b29f2bd59f3217bb63.png)

tree2 添加到 tree1 的根，tree3 添加到 tree2 的 2cond 分支

# ios - UIScrollView double tap zoom not pinching

> ID：14580880
> 
> 赞同：0
> 
> 时间：2013-01-29T10:33:54.707
> 
> 标签：ios, uiscrollview, zooming, scale, pinch

I'm able to zoom with a specific maxZoomScale with double tap on UIScrollView. After my UIScrollView has been zoomed I still can zoom on it with a pinch. I would like to block this zoom pinch. Is there a way to do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:38:18.663

你不应该能够缩放超过你的最大比例，你可能指的是 bouncingZoom ......然后将其设置为 NO ：

`bouncesZoom=NO;`

# vb6 - 便携式程序 vb6 需要 SQLite3

> ID：14580887
> 
> 赞同：3
> 
> 时间：2013-01-29T10:34:33.703
> 
> 标签：vb6, sqlite

有什么想法可以像 sqlite 版本 1 一样在 vb6中使用**sqlite 版本 3吗？**sqlite 版本 1 使用`ags_sqlite.dll`

[http://www.freevbcode.com/imagesvr_ce/184390/source/008/zully_lite_sqlite.zip](http://www.freevbcode.com/imagesvr_ce/184390/source/008/zully_lite_sqlite.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:50:10.103

我会使用[SQLite ODBC 驱动程序](http://www.ch-werner.de/sqliteodbc/)。它工作得非常好，并且允许使用 DSN-less 方法，这使得应用程序分发更容易。

唯一需要注意的是它不允许在一次调用中使用多个语句 - 因此您必须单独调用它们。

# android - APIs not getting hidden even after using the annotation @hide in Android

> ID：14580888
> 
> 赞同：2
> 
> 时间：2013-01-29T10:34:35.857
> 
> 标签：android, hide, javadoc

I am writing my own SDK on android and as such creating my own jar. Now I create documentation of my SDK using droiddoc tool.

In my framework files(.java), there are many APIs that I have marked with @hide Now this is the current state:

a) all APIs marked with @hide are hidden in documentation.

b) These APIs marked hidden is INCLUDED in class files in generated jar file.(I use Java decompiler to check this).

Now when I include this jar in eclipse and use Ctrl+space on my class object to find its options, i can see that hidden APIs are actually visible and accessible here.

Am I missing anything here, and do I need to add any special flags in make file? Or is this a normal behaviour?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:15:57.777

我发现：

> android.jar 删除了来自 com.android.internal 的所有类，并且所有标有@hide 的类、枚举、字段和方法也被删除了

所以带有@hide 的类不包含在jar 中-> 这就是为什么它们在eclipse 中无法访问。此外：

> 当您在设备上启动应用程序时，它会加载未切割的 framework.jar（大致相当于设备上的 android.jar），并具有所有内部 API 类和所有隐藏的 API 组件。

看看[这篇文章](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)和[这个答案](https://stackoverflow.com/questions/7888191/how-do-i-build-the-android-sdk-with-hidden-and-internal-apis-available)
希望你找到隐藏东西的替代解决方案

# ios - 适用于 iOS 的 Google Analytics SDK 2.0 是否象征崩溃报告？

> ID：14580889
> 
> 赞同：5
> 
> 时间：2013-01-29T10:34:36.340
> 
> 标签：ios, google-analytics

他们的网站上没有提到这一点，[谷歌分析 SDK](https://developers.google.com/analytics/devguides/collection/ios/v2/)

我说的是自动未捕获的异常处理：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  [GAI sharedInstance].trackUncaughtExceptions = YES; // Enable 
  //...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T18:01:48.037

从理论上讲，这只有在您不从应用程序二进制文件中删除符号时才有可能，从而导致更大的二进制文件（最多大 30-50%）。或者，如果您上传 dSYM，您也可以获取行号。

由于您无法上传 dSYM 文件，并且文档似乎不需要您将符号留在应用程序二进制文件中，因此它们不会象征未捕获的异常导致的崩溃。

# linux - Linux 发行版 info/man/doc/etc 来源

> ID：14580898
> 
> 赞同：1
> 
> 时间：2013-01-29T10:34:46.807
> 
> 标签：linux, bash, documentation, manpage

我目前正在构建一个全面的多发行版/项目/源代码/OS 开源文档网站。

目前，由于需要从标准手册页获取内容的转换过程，不是不尊重（手册页摇滚），而是标准手册页的神秘格式，我的文本容量为 15GB，并且还在增长。

必须有更现代的源格式，我可以从中获取手册页内容。开发人员还没有为文档编写 50 年前的 *roff 格式文件，是吗？

我迫切需要尽可能多地消除手册页来源，所以到目前为止，如果有任何为这些项目做出贡献的开发人员可以澄清手册页是原始编写的还是从另一种文本格式生成的，作为构建过程的一部分是一个巨大的帮助。就这样进入列表。

我希望不再使用古老的基于 *roff 的 doc 文件的地方：

*   自由BSD
*   NetBSD
*   OpenBSD
*   Debian
*   Ubuntu
*   琴图
*   拱
*   Slackware（我实际上可以为 slackware 'docs' 使用更好的来源，与其他发行版相比，docs.slackware.com 有点“贫血”）
*   苏塞
*   红帽企业 Linux

因此，作为一个花了很多时间在基于操作系统的文档文件集中与愚蠢的 groff -mandoc 'file' -T html 错误搏斗的程序员，我需要帮助并求助于 SO。

选项 1 是对文档内容的解析更友好的替代来源。

选项 2 是重新格式化手册页内容的更好方法，而不是运行

```
find . -type f -exec sh -c 'cd $(dirname "$0") && groff -mandoc "$0" -T html > "$0.html"' {} \; 
```

或者

```
find . -type f -exec sh -c 'cd $(dirname "$0") && man2html "$0" > "$0.html"' {} \; 
```

并希望我不会在数千个文件中遇到一个错误。所有这些也几乎抛弃了 Unicode 多语言支持。

如果在谷歌上搜索涉及“人”和“文档”这两个词的技术内容并不是一项几乎无用的努力，我自己可能已经找到了解决方案，但他们就在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:38:52.940

我不知道我是否得到你的实际问题。

但是今天，许多积极维护的项目的联机帮助页都是从可以在各种项目的源代码压缩包中找到的 docbook (XML) 源创建的。所以它们是用 XML 编写和维护的。

`xmlto`这些 docbook 文件由（或）之类的工具转换`docbook2man`为创建手册页或 html 页面或 pdf.. 等。

# struts - I can't start my Struts 2 project at work. I always get the following error messages:

> ID：14580903
> 
> 赞同：0
> 
> 时间：2013-01-29T10:35:03.923
> 
> 标签：struts

> Unable to load configuration. - action - file:/home/murali/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/struts-2-demo/WEB-INF/classes/struts.xml:54:100 at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70) at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429) at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471) at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74) at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) at org.apache.catalina.core.ApplicationFilterConfig.(ApplicationFilterConfig.java:103) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) at java.util.concurrent.FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) Caused by: Action class [org.apache.struts2.TestAction] not found - action - file:/home/murali/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/struts-2-demo/WEB-INF/classes/struts.xml:54:100 at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:480) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:424) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:541) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:290) at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112) at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:239) at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67) ... 18 more

# javascript - 在javascript中同步2个多项选择列表

> ID：14580904
> 
> 赞同：0
> 
> 时间：2013-01-29T10:35:04.000
> 
> 标签：javascript, list, select, return-value, sync

我试图弄清楚如何在 javascript 中同步两个多项选择列表。这是有效的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
</head>

<script language="JavaScript">
<!--

function SelectEmail(name)
{
    var listboxEmails = document.getElementById('emails');
    for (var i=0;i<listboxEmails.length;i++)
    {
        listboxname = listboxEmails[i].innerHTML
        if (listboxname == name)
        {
            listboxEmails.selectedIndex = i;
            break;
        }
    }//end for 
}//end function SelectEmail

// -->
</script>
<body>
<select id='names' name ='names' style = "width: 100" multiple="multiple" onClick="SelectEmail(this.value);">
    <option value ="joe">joe</option>
    <option value ="albert">albert</option>
    <option value ="gary">gary</option>
    <option value ="ace">ace</option>
</select>

<select id="emails" name ="emails" style = "width: 100;"  multiple="multiple">
    <option value ="joe@asds.com">joe</option>
    <option value ="albert@asds.com">albert</option>
    <option value ="gary@asds.com">gary</option>
    <option value ="ace@asds.com">ace</option>
</SELECT>
</body>
</html> 
```

但是我想让它显示多种选择。因此，例如，如果我在左侧列表中选择 albert 和 gary，我希望右侧列表也选择 albert 和 gary。请帮我解决一下这个。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:29:06.923

您的功能`SelectEmail()`无法工作，因为它设置`selectedIndex`了您的选择，它选择了一个选项并取消选择其余选项。此外，您正在使用选项的文本内容，`#emails`以便将它们与`#names`. 这不是一个好的做法，因为文本节点应该显示文本而不是启用脚本中元素的识别。相反，您可以`selected`为要选择的每个选项单独访问该属性。通过向元素的选项添加附加属性`#emails`，它可能如下所示：

```
<select id="emails" name="emails" style="width: 100;" multiple="multiple">
    <option value="joe@asds.com" data-name="joe">joe</option>
    <option value="albert@asds.com" data-name="albert">albert</option>
    <option value="gary@asds.com" data-name="gary">gary</option>
    <option value="ace@asds.com" data-name="ace">ace</option>
</select> 
```

您现在可以使用该`data-name`属性来映射选项，例如通过以下方式：

```
function selectEmail() {
    // deselect all
    $('#emails option').removeAttr('selected');
    var names = $('#names').val();
    if (names == null) {
        // none selected
        return;
    }
    $.each(names, function (i, name) {
        var selector = 'option[data-name="' + name + '"]';
        $('#emails ' + selector).attr('selected', true);
    });
} 
```

这是一个工作小提琴（你会注意到我也使用了`onchange`事件而不是：http `onclick`: [//jsfiddle.net/H9hNH/2/](http://jsfiddle.net/H9hNH/2/)

# remedy - Extarct worklog(work info) from BMC Remedy User for a set of Incident ID

> ID：14580910
> 
> 赞同：0
> 
> 时间：2013-01-29T10:35:32.193
> 
> 标签：remedy

Is there any way possible that I can extarct `worklog(work info)` from BMC Remedy User for a set of Incident ID using macro. I have extracted all the fields except "Worklog". Allthough I get the information that `This is a known issue and is on our Enhancements Requests list to be addressed.` Source -[Link](http://its.uncg.edu/Service_Management/Incident/Remedy/FAQ/)

So is there any way possible. Any type of information is highly acceptable.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:09:21.287

Worklog is a related table, the field on the Incident form does not store any information. You'll need to query the HPD:Worklog form: You can also post the question in the BMCDN communities, you will get more people looking at your questions.

[https://communities.bmc.com/communities/community/bmcdn/bmc_it_service_support?view=overview](https://communities.bmc.com/communities/community/bmcdn/bmc_it_service_support?view=overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T04:10:47.360

我不知道使用宏。宏已被弃用。所以我建议避免在任何新代码中使用宏。当我需要编写提取工作日志信息的代码时，我通常使用带有设置字段操作的活动链接或过滤器。

# sip - 如何识别 sip call 的两条腿？

> ID：14580916
> 
> 赞同：1
> 
> 时间：2013-01-29T10:36:04.843
> 
> 标签：sip

我正在开发一个 sip 呼叫跟踪应用程序。我已经使用标签 ID 字段来连接呼叫的两个呼叫支路
。但有时标签 ID 会不一样。

我所做的是——

标签 ID 与相应的呼叫 ID 相关联。

是否有任何其他领域我需要考虑识别通话的腿（对话）。

![在此处输入图像描述](../Images/7456bd7e44148e4fb2a7b9249264872b.png) 以上是 1 个带有标签 ID 的调用的示例。两条腿使用不同的颜色。唯一的相似之处是我在标签 ID 中有一个数字**3568450037 。****10.10.10.120**是服务器 ip。

我必须在通话腿之间找到牢固的联系。请帮助我...并请建议我一些链接来解决这个问题..

感谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:48:05.137

Call-ID、From 标签和 To 标签都是用来识别对话的。来自[SIP RFC 关于 Dialogs 的章节](https://www.rfc-editor.org/rfc/rfc3261#section-12)。唯一的技巧是匹配本地和远程标记，即调用一端的 To 标头标记与调用另一端的 From 标头标记匹配，反之亦然。

> 每个 UA 都使用一个对话 ID 来标识一个对话，该对话 ID 由一个 Call-ID 值、一个本地标记和一个远程标记组成。对话中涉及的每个 UA 的对话 ID 都不相同。具体而言，一个UA的本地标签与对端UA的远程标签相同。标签是不透明的标记，有助于生成唯一的对话 ID。

**更新：**

在使用包含 IP 地址和标签的表格进行编辑之后，涉及两个完全独立的调用，每个调用都有自己的对话框。我想您的问题更多的是如何匹配来自两个单独调用的两个不同对话，而不是尝试匹配对话中的事务/请求。

实际上，SIP 标头中没有任何内容可用于匹配两个独立的 SIP 对话以了解呼叫已桥接在一起。我假设您正在使用 B2BUA，因为它是桥接呼叫的唯一常见 SIP 元素。匹配对话的一种方法是查看 INVITE 请求和响应中携带的 SDP。至少您可以获得每条支路发送和接收的端口号，并以这种方式匹配它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-16T20:05:14.930

答案有点晚了，但如果它可以帮助其他人：

如果您是编写 B2BUA 应用程序的人，您可以修改它以在每条支路的消息中添加一个具有相同标识符的标头，然后该标识符不仅标识一条支路，而且标识整个呼叫。

有一个信息 IETF 文件提出了这一点： [https ://datatracker.ietf.org/doc/html/draft-kaplan-dispatch-session-id-03](https://datatracker.ietf.org/doc/html/draft-kaplan-dispatch-session-id-03)

# mysql - 将 MySQL 数据库的存储引擎从 InnoDB 转换为 MyISAM 并返回（特定于 Drupal 7）的后果是什么？

> ID：14580919
> 
> 赞同：1
> 
> 时间：2013-01-29T10:36:07.803
> 
> 标签：mysql, database, drupal-7, innodb, myisam

我正在将中等规模（200k+ 用户）[Drupal](http://drupal.org/) 6 CMS 升级到 Drupal 7。数据迁移将通过使用[Migrate Module](http://drupal.org/project/migrate)来处理。在 Drupal 版本 6 之前（包括在内），MyISAM 是 Drupal 数据库的默认 MySQL 存储引擎。从 Drupal 版本 7 开始，推荐使用 InnoDB。据此，我开发的迁移类必须将数据从旧的 D6 MyISAM DB 迁移到新的 D7 InnoDB DB。

我在运行迁移脚本时遇到了严重的性能问题：在“大型”Amazon Web Services 服务器实例上迁移 200k+ 用户配置文件将花费 20 多个小时，而该实例实际上已为此目的进行了优化。正如我从阅读模块的问题跟踪器中了解到的那样，使用所述迁移模块进行迁移时，此类性能问题并不少见。但是，我找到了一种解决方案，可以将 D7 DB 从 InnoDB 转换为 MyISAM，从而将性能提高十倍。

现在的问题是：由于一旦用户再次使用它，我将不得不使用 InnoDB 存储引擎运行 D7 DB，我想知道如果我将存储引擎设置为 MyISAM 是否会对 DB 造成任何损害迁移过程的持续时间以及之后返回 InnoDB？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:11:42.783

如果您看到 InnoDB 和 MyISAM 之间的性能差异非常大，很可能是由于 InnoDB 正在做出的事务保证。将`innodb_flush_log_at_trx_commit`变量设置为`0`在迁移期间应该可以让您在迁移期间获得非常好的性能，然后您可以`1`在迁移完成后将其设置回。

即时更改是安全的；但是您应该注意，如果服务器在设置为 时崩溃`0`，您可能会丢失一些已提交的事务（但对于您的迁移，我猜这个警告很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:19:31.150

您还可以将 sync_binlog 变量更改为 0 ant，它还可以将速度提高到 20%，迁移后您可以将其设置回 1。

但如果在此过程之间发生电源故障，您可能会丢失一些数据。但是我认为您只是在迁移数据，则不会花费太多时间，并且断电的可能性非常低。

# html - CSS styling issue - scrolling

> ID：14580921
> 
> 赞同：0
> 
> 时间：2013-01-29T10:36:11.987
> 
> 标签：html, css

I'm trying to build a menu (see [fiddle](http://jsfiddle.net/machismo/vhFX3/)). I have text box which will be hidden in some cases, shown in some cases, so divs below that should adjust the position when `textbox` is hidden. The `listitems` div contains lot of list items. The bottom div should be at the bottom of the screen. `maindiv`'s position should be fixed. Menu area div at the end cannot be removed. Something with the style definition is messed up, I cannot scroll down to the last item. Is there a way to do it without assigning specific height for listitems div?

I'm trying to get something like this. [http://tinypic.com/r/1t0sat/6](http://tinypic.com/r/1t0sat/6)

Any hints or pointers will be helpful. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:08:26.887

我已尝试根据您的要求更新您的 CSS。核实。我希望你能找到你的解决方案。

```
 #mainDiv {
    bottom: 0px;
    border-top-width: 1px;
    border-right-width: 1px;   
    border-bottom-width: 1px;
    border-left-width: 1px;
    position: relative;
    min-height:100%;
    height:auto !important;
    z-index: 30;
    box-shadow: 5px 5px 5px #888;
    background-color: rgb(0, 87, 71);
}
#mainDiv .MainContentArea {
    width: 100%;
    height: 100%;   
     height:auto !important;
    min-width: 240px;
     min-height:100%;
}
#mainDiv .HeadingArea {
    left: 0px;
    top: 0px;
    height: 16px;
    right: 0px;
    padding-top: 8px;
    padding-right: 8px;
    padding-bottom: 8px;
    padding-left: 8px;
    white-space: nowrap;  
    background-color: rgb(96, 76, 91);
}
#mainDiv .InputArea {
    left: 0px;
    top: 0px;
    height: 30px;
    right: 0px;
    padding-top: 0px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
    white-space: nowrap;

}
#mainDiv .SubTitleArea {
    left: 0px;
    top: 0px;
    height: 16px;
    right: 0px;
    padding-top: 12px;
    padding-right: 8px;
    padding-bottom: 12px;
    padding-left: 8px;
    white-space: nowrap;

}
#mainDivSearch input[type='text'] {
    width: 220px;
    height: 30px;
    padding-top: 0px;
    padding-right: 22px;
    padding-bottom: 0px;
    padding-left: 3px;
}
#mainDiv input[type='checkbox'] {
    vertical-align: bottom;
}
#mainDiv .ContentArea {
    left: 0px;
    top: 0px;
    height: 100%;

}
#mainDiv .MenuArea {
   width:100%;
    height: 28px;
    text-align: center;

    bottom: 0px;
    padding-top: 6px;
    padding-right: 6px;
    padding-bottom: 6px;
    padding-left: 6px;
    white-space: nowrap;
    position: absolute;
    background-color: rgb(216, 176, 131);

}
#ContentListArea {
    width: 100%;
    height: 100%;

}
#ContentListArea .Options2Area {
    left: 0px;
    top: 0px;
    height: 16px;
    right: 0px;
    padding-bottom: 6px;
    margin-top: 10px;
    margin-right: 15px;
    margin-bottom: 0px;
    margin-left: 18px;
    vertical-align: top;
    border-bottom-color: #afafaf;
    border-bottom-width: 1px;
    border-bottom-style: solid;

}
#ContentListArea .ListItemsArea {
    left: 0px;
    top: 32px;
    right: 0px;
    bottom: 0px;
    overflow: auto;
    padding-top: 6px;
    padding-right: 6px;
    padding-bottom: 6px;
    padding-left: 18px;

}
.ItemList li {
    padding-bottom: 4px;
    display: block;
    list-style-type: none;
}
.ItemList li .ItemArea {

    height: 15px;
}
.ItemList li .ItemDetail {
    left: 0px;
    top: 0px;
    white-space: nowrap;

}
.ItemList li .ItemLabel {
    padding-top: 8px;
    white-space: nowrap;
}
textarea, select, input[type=text] {
    width: 99%;
    overflow: auto;

}

body, html
{
    height: 100%;
    min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:54:55.500

您需要为以下样式设置**高度**`#ContentListArea .ListItemsArea`

```
#ContentListArea .ListItemsArea {
left: 0px;
top: 32px;
right: 0px;
bottom: 0px;
overflow: auto;
padding-top: 6px;
padding-right: 6px;
padding-bottom: 6px;
padding-left: 18px;
position: absolute;
height: 193px;/*change this according to your  need*/ 
```

}

小提琴演示 [http://jsfiddle.net/krish/vhFX3/1/](http://jsfiddle.net/krish/vhFX3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:09:30.747

在 CSS 中用我的替换你自己的代码片段

```
#ContentListArea .ListItemsArea {
    left: 0px;
    top: 32px;
    right: 0px;
    bottom: 0px;
    overflow: auto;
    padding-top: 6px;
    padding-right: 6px;
    padding-bottom: 6px;
    padding-left: 18px;
    //position: absolute;
    height: 200px;
} 
```

给它一个适当的高度，以便它可以在该高度内滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:50:03.250

将此行替换`<div id="mainDiv" style="left: 198px; top: 101px; display: block;">`为`<div id="mainDiv" style="left: 198px; display: block;">`并删除`<div class="MenuArea"></div>`

# grails - Grails - 语言环境设置回“en”

> ID：14580927
> 
> 赞同：2
> 
> 时间：2013-01-29T10:36:44.993
> 
> 标签：grails, internationalization, locale

我是 Groovy/Grails 的新手，目前正在开发一个原型作为概念证明。我正在尝试使用 Grails 内置的 i18n 功能来切换语言。我在属性文件中使用消息包来执行此操作。

我在目录`messages_cy.properties`下创建（即威尔士语）`i18n`，当我附加`?lang=cy`到 URL 的末尾时，这一切似乎都工作正常。

但是，当我导航到主页（当前是默认的 Welcome to Grails 页面）时，它会将语言环境切换回“en”，每当我导航到另一个页面时，它就会切换回原来的状态。

目前我正在使用动态脚手架，它正在为我创建控制器和视图，我们最终可能会改变。我不确定这是否会导致问题。主页 (index.gsp) 是唯一没有动态搭建的页面。

任何人都可以对此有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:27:20.287

我通过创建一个`HomeController`并使用 UrlMapping.groovy 将`Home`控制器映射到根 URL 来解决这个问题。

HomeController.groovy

```
import org.springframework.web.servlet.support.RequestContextUtils as RCU

class HomeController {
def index() {
  def newLocale = RCU.getLocale(request)
  RCU.getLocaleResolver(request).setLocale(request, response, newLocale)
 }
} 
```

UrlMappings.groovy

```
"/"(controller:'home',action:"index", view:'/index') 
```

# java - 无法在 GAE 后台线程中使用 JDO

> ID：14580931
> 
> 赞同：1
> 
> 时间：2013-01-29T10:37:14.383
> 
> 标签：java, google-app-engine, exception, jdo

我在 Google App Engine 中的 Runnable 对象上创建了一个后台线程，如下所示：

```
BackendService s = new BackendService();
thread = ThreadManager.createBackgroundThread(s);
thread.start(); 
```

但是 - 在初始化时获取 PersistenceManagerFactory ，我这样做是这样的：

```
private static final PersistenceManagerFactory pmfInstance = JDOHelper.getPersistenceManagerFactory("transactional"); 
```

我得到一个类加载器异常：

```
Uncaught exception from servlet
com.google.apphosting.runtime.FatalError: A not-user-defined ClassLoader was set as the thread'scontextClassLoader: sun.misc.Launcher$AppClassLoader@1a8c4e7
at com.google.appengine.runtime.Request.process-f71d5e950ca508ff(Request.java)
at java.security.AccessController.doPrivileged(AccessController.java:34) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:17:13.610

我遇到了同样的问题（使用 JPA。）似乎有效的解决方案是手动在 Runnable 中设置类加载器。

在调用对象中：

```
private static Thread thread;
private static ClassLoader cl; 
```

在调用方法中：

```
...
cl = getClass().getClassLoader();
thread = ThreadManager.createBackgroundThread(...);
thread.start();
... 
```

在可运行的 run() 中：

```
thread.setContextClassLoader(cl);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T12:40:00.593

```
`线程线程 = ThreadManager.createBackgroundThread(new Runnable() {
    公共无效运行（）{
        ...
        类加载器 cl = getClass().getClassLoader();
        Thread.currentThread().setContextClassLoader(cl);
        ...
    }
});`

```

# objective-c - 当使用 KIF 测试框架 UIButton 不适用于 UIControlEventTouchUpInside

> ID：14580932
> 
> 赞同：1
> 
> 时间：2013-01-29T10:37:15.623
> 
> 标签：objective-c, uibutton, uigesturerecognizer, kif-framework, kif

我尝试使用 KIF 框架制作一些场景。当我添加例如：

```
[scenario addStep:[KIFTestStep stepToTapViewWithAccessibilityLabel:@"MyUIButtonAccessibilityLabel"]]; 
```

UIControlEventTouchUpInside 不会为具有accessibilityLabel @“MyUIButtonAccessibilityLabel”的UIButton 触发。

uigesturerecognizer 是否会干扰 KIF 中的 UIControlEventTouchUpInside？在 KIF 中是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:33:17.670

我昨天真的遇到了这个。stepToTapViewWithAccessibilityLabel 对我的应用程序中的所有内容都工作得很好，但我遇到了一个按钮，它绝对不能工作。

为了解决这个问题，我最终使用了 stepToTapScreenAtPoint （我不是特别喜欢），但它似乎工作正常。我还在我的类别中添加了一个 void initialize 方法，以便我可以确定哪个设备在运行时执行测试，并基于此确定我需要点击的确切位置：

```
@implementation KIFTestStep (SLAdditions)

static CGPoint kButtonLocation;

+ (void)initialize
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        kButtonLocation = CGPointMake(498.0, 622.0);
    else
        kButtonLocation = CGPointMake(247.0, 316.0);
}

+ (NSArray *)stepsToDoSomething
{
    NSMutableArray *steps = [NSMutableArray array];

    [steps addObject:[KIFTestStep stepToWaitForTappableViewWithAccessibilityLabel:@"The Button Label"]];
    [steps addObject:[KIFTestStep stepToTapScreenAtPoint:kButtonLocation]];

    // Verify that tapping succeeded
    [steps addObject:[KIFTestStep stepToWaitForAbsenceOfViewWithAccessibilityLabel:@"The Button Label"]];

    return steps;
} 
```

# python - pygame - KEYDOWN 事件 - 行不更新位置

> ID：14580935
> 
> 赞同：1
> 
> 时间：2013-01-29T10:37:20.827
> 
> 标签：python, line, pygame, keydown

我正在制作一个 2 人游戏，它应该看起来像：
![游戏画面](../Images/ecc98e80ee24a308f706cacef106dd12.png)
在游戏中，射手（绿色和蓝色，由玩家控制）可以互相射击子弹。
如果子弹
1\. 与墙壁（灰色）碰撞，它就会被摧毁。
2.击中射手，它失去健康（射手）。
游戏是（应该是）回合制的，并在玩家达到`0`健康时结束。

**我的问题**
1\. 我的射手枪管没有更新/旋转。
2.是否有更好的方法来检测是否按下了（ny）键。
* 射手、子弹、墙是类

**我的代码**
（如果未提及任何对回答有用的功能，请发表评论）

```
import math,random,pygame
def event_handle(event,turn):
    if turn == 1:
        c_s = p1
    elif turn == 2:
        c_s = p2
    else:
        return None
    if event.type == pygame.KEYDOWN:
        key = pygame.key.get_pressed()
        # next_pos
        if key[pygame.K_q]:
            c_s.next_x -= 1
        if key[pygame.K_e]:
            c_s.next_x += 1
        # angle
        if key[pygame.K_w]:
            c_s.angle += radians(1)
        if key[pygame.K_s]:
            c_s.angle -= radians(1)
        # power (speed)
        if key[pygame.K_d]:
            c_s.speed += 0.1
        if key[pygame.K_a]:
            c_s.speed -= 0.1

def draw_all(bullist,shooters,wall,surface):
    # draw shooters
    for shooter in shooters:
        shooter.move()
        shooter.draw(surface)
    # draw bullets
    for bullet in bullist:
        bullet.gravity()
        bullet.move()
        bullet.collides(shooters,wall,bullist)
        bullet.out(surface,bullist)
        bullet.draw(surface)
    # wall
    wall.update()
    wall.draw(surface)
    pygame.draw.aaline(surface,(255,255,255),(0,400),(640,400))

def angle(A,B,BC,theta):

    C = [0,0]
    alpha = math.atan2(A[1]-B[1] , A[0] -B[0] ) - theta
    C[0] = int(round(B[0]  + BC * math.cos(alpha),0))
    C[1] = int(round(B[1]  + BC * math.sin(alpha),0))
    return C

class Shooter:
    def __init__(self,pos,size,color,xmax,xmin):
        self.pos = pos
        self.size = size
        self.rect = pygame.Rect(pos,size)
        self.health = 100
        self.color = color
        self.angle = 0
        self.speed = 0
        self.max = xmax
        self.min = xmin
        self.next_x = pos[0]

        self.color2 = []
        for i in color:
            i = i - 100
            if i < 0:
                i = 0
            self.color2.append(i)

    def draw(self,surface):
        global C
        pygame.draw.rect(surface,self.color,self.rect)

        c = angle(self.rect.midleft,self.rect.center,
                  20,radians(self.angle))
        if c != C and c != [95,392]:
            print c
            C = c
        pygame.draw.line(surface,self.color2,self.rect.center,c,3)

## the other funcs or classes not needed

# globals
turn = 1
C = []
# pygame
(width, height) = (640, 480)
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption('Shooter')
clock = pygame.time.Clock()
# game actors
shooters = []
bullets = []
p1 = Shooter((400,400),(30,-15),(255,0,0),0,0)
p2 = Shooter((100,400),(30,-15),(0,255,0),0,0)
shooters.extend([p1, p2])
wall = Wall(100)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
            pygame.quit()
            break
        else: event_handle(event,turn)
    if not running:
        break
    screen.fill((0,0,0))
    # Game draw logic + Game logic

    draw_all(bullets,shooters,wall,screen)
    pygame.display.flip()
    clock.tick(40) 
```

### 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:13:02.797

您的代码确实有效，但存在一些问题。枪管实际上会旋转，但每次按键时只会旋转很小的量。

尝试将您的`event_handle`功能更改为：

```
def event_handle(turn):
    if turn == 1:
        c_s = p1
    elif turn == 2:
        c_s = p2
    else:
        return None
    key = pygame.key.get_pressed()
    # next_pos
    if key[pygame.K_q]:
        c_s.next_x -= 1
    if key[pygame.K_e]:
        c_s.next_x += 1
    # angle
    if key[pygame.K_w]:
        c_s.angle += radians(10)
    if key[pygame.K_s]:
        c_s.angle -= radians(10)
    # power (speed)
    if key[pygame.K_d]:
        c_s.speed += 0.1
    if key[pygame.K_a]:
        c_s.speed -= 0.1 
```

由于此时您对事件类型根本不感兴趣，因此我删除了`event`参数和`if event.type == pygame.KEYDOWN:`检查。这样，您可以按住按键，而不是被迫多次敲击按键来旋转枪管。

我还增加了桶从旋转`radians(1)`到的值`radians(10)`。否则，更改太小而无法看到（在合理的时间内）。

此外，您必须将主循环调整为

```
...
for event in pygame.event.get():
    if event.type == pygame.QUIT:
        running = False
        pygame.quit()
        break
if not running:
    break
event_handle(turn)
... 
```

所以`event_handle`称为主循环的每次迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:59:21.580

如果您使用的是 key.get_pressed，则根本不需要检测 key_down 事件。只需删除该`if event.type == pygame.KEYDOWN:`语句，然后检查返回的内容是否`pygame.key.get_pressed`有您的密钥。

Alos，您应该`pygame.event.pump`在每次循环运行时调用代码中的某个位置。把它放在你的while循环中。

（还有一个与您的问题无关的提示：将主循环移动到一个函数内 - 让它像这样挂在程序主体中是很可怕的）

# asp.net-mvc-3 - 出现错误：找不到路径“/Content/images/ui-bg_flat_75_ffffff_40x100.png”的控制器或未实现 IController

> ID：14580938
> 
> 赞同：0
> 
> 时间：2013-01-29T10:37:42.090
> 
> 标签：asp.net-mvc-3

请参阅下面的错误跟踪：

> xxx.MvcApplication [(null)] - Application_Error: Unhandled Excpetion: System.Web.HttpException (0x80004005): 路径 '/Content/images/ui-bg_flat_75_ffffff_40x100.png' 的控制器未找到或未实现 IController。在 System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) 在 System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) 在 System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& 控制器, IControllerFactory& factory)
> 在 System.Web.Mvc.MvcHandler .<> *c_DisplayClass6.b* _2() 在 System.Web.Mvc.SecurityUtil.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，布尔&完成同步)

我们已经有：

```
 routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("{allasmx}", new {allasmx=@".*\.asmx(/.*)?"}); 
```

在 global.asax.cs 文件中，但不确定为什么会显示此错误。图片 URL 只不过是 jQuery 插件提供的图片。由于错误消息来自生产日志，因此不确定在哪个事件中被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:00:17.720

我建议查看[我在 MVC2 中的图像和 robots.txt 上收到“未实现 IController”错误，](https://stackoverflow.com/questions/2109841/im-getting-a-does-not-implement-icontroller-error-on-images-and-robots-txt-in)因为它为手头的问题提供了洞察力和解决方案。

# network-programming - NDIS 驱动程序能否将计算机“锁定”到一个网络

> ID：14580939
> 
> 赞同：0
> 
> 时间：2013-01-29T10:37:44.843
> 
> 标签：network-programming, driver, wireless, filter-driver

我想编写一个程序，它将计算机“锁定”到用户确定的无线网络。

1.  它应该自动建立并保持与指定网络的连接
2.  程序运行时其他网络应隐藏和/或不可访问
3.  应与 Windows XP - 8 兼容
4.  应该适用于所有无线网卡

我可以为此创建[NDIS 过滤器驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565492%28v=vs.85%29.aspx)或[NDIS 中间驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565773%28v=vs.85%29.aspx)吗？哪一个是更好的选择？此外，我链接的 MSDN 文档似乎没有提供有关如何实际*编写*驱动程序的良好信息，我在哪里可以找到？

# html - 具有自定义样式的html下拉列表

> ID：14580940
> 
> 赞同：2
> 
> 时间：2013-01-29T10:37:48.910
> 
> 标签：html, css

我怎样才能完全改变一个元素的设计？我正在尝试像下图一样制作下拉菜单，我写的是

```
<select>
 <option value="0">Title</option>
  <option value="1">Mrs</option>
  <option value="2">Mr</option>
</select> 
```

我被困在放置自定义图像以打开下拉列表的下拉列表以及如何设置选择元素的样式

![在此处输入图像描述](../Images/be41d184fa9687cf00dd883161068c50.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:49:33.583

众所周知，某些表单元素很难单独使用 CSS 来设置样式，并且在所有浏览器中仍然看起来相同。

样式化 SELECT 元素的推荐做法通常是使用 javascript 解决方案，因为这将跨浏览器工作。

看看 Chris Coyle 的文章： [http ://css-tricks.com/dropdown-default-styling/](http://css-tricks.com/dropdown-default-styling/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:51:12.280

您不能`select`以您描述的方式对元素进行样式设置。背景颜色或边框之类的东西是可能的。

仅使用 CSS 进行样式设置可以像这样：

```
select {
    border-radius: 5px;
    color: lightgrey;
    font-weight: bold;
} 
```

使用此 CSS，您将拥有圆角和更改字体。

什么是不可能的：

*   更改图标
*   更改下拉框的背景或字体

尝试摆弄 javascript、嵌套`div`s 和隐藏`input`字段。浏览一下[http://jqueryui.com 也会](http://jqueryui.com)对您有很大帮助。

# sql-server - 将多行中的单列连接成具有不同关键字的一列

> ID：14580941
> 
> 赞同：1
> 
> 时间：2013-01-29T10:37:49.290
> 
> 标签：sql-server, tsql, common-table-expression

我有一篇`table`文章，其中有一列`keywords`存储标签或关键字

样本数据

```
Table Article
------------------------------------------
ID    keywords
------------------------------------------
1     one, two, three
2     four, five, six
3     seven, eight, three
4     one, two, three
5     twenty, hundred, one hundred one, one hundred two, seventy
6     seventy, three, two hundred 
```

如果我使用如下 CTE 查询，那么它会将所有关键字列连接在一行中，但另一方面也会得到重复行，这是一个问题，因为我们将有 1000 篇具有数百个相似关键字的文章。

```
SELECT TOP 1 
    stuff(
    (
    select cast(',' as varchar(max)) + lower(Keywords)
    from art_Article a
    for xml path('')
    ), 1, 1, '') AS All_Keywords
FROM
    art_Articles G
ORDER BY
    G.ArticleKeywords ASC; 
```

上面的查询产生以下结果作为单行

```
---------------------------------------------------
All_Keywords
----------------------------------------------------
one, two, three,four, five, six,seven, eight, three,one, two, three,twenty, hundred, one hundred one, one hundred two, seventy,seventy, three, two hundred 
```

从结果中可以明显看出，它还显示了重复的关键字 no。时间，因为它存储在行中。他们是我只能获得一次重复关键字的方法吗？

`DISTINCT`如果有人可以帮助我对此进行排序以将结果作为仅包含关键字的单列，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:51:58.590

我认为您必须先将数据分成几行，然后再将它们连接在一起。这将允许您在`FOR XML PATH`用于获取最终列表时获得不同的值。

这是此过程的 CTE 版本：

```
;with cte (id, word, words) as
(
  select id,
    cast(left(keywords, charindex(',',keywords+',')-1) as varchar(50)) word,
         stuff(keywords, 1, charindex(',',keywords+','), '') words
  from article
  union all
  select id,
    cast(left(words, charindex(',',words+',')-1) as varchar(50)) word,
    stuff(words, 1, charindex(',',words+','), '') words
  from cte
  where words > ''
) 
select top 1 
    stuff((select distinct ', '+ rtrim(ltrim(word))
           from cte
           for xml path('')), 1, 1, '') AS All_Keywords
from cte 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/7a6d6/13)。这给出了结果：

```
|                                                                                                             ALL_KEYWORDS |
----------------------------------------------------------------------------------------------------------------------------
|  eight, five, four, hundred, one, one hundred one, one hundred two, seven, seventy, six, three, twenty, two, two hundred | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:04:08.050

相关子查询应该这样做：

```
SELECT G.ID,
    stuff(
    (
    select cast(',' as varchar(max)) + lower(Keywords)
    from art_Article a
    where a.id = g.id
    for xml path('')
    ), 1, 1, '') AS All_Keywords
FROM
    art_Articles G
ORDER BY
    G.ArticleKeywords ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:00:22.423

解决方案之一是将结果与拆分函数结合起来，并在其上运行带有 DISTINCT 的 SQL 语句。您可以根据需要进一步修改它。我有测试，它对我有用。希望它可以帮助其他人。

```
DECLARE @Keywords nvarchar(MAX)
SELECT TOP 1 @Keywords =
    stuff(
    (
    select cast(',' as varchar(max)) + lower(Keywords)
    from Article U
    for xml path('')
    ), 1, 1, '') 
FROM
    Articles G
ORDER BY
    G.ArticleKeywords ASC;

SELECT DISTINCT(VALUE) AS VALUE FROM [uf_SplitKeywords] (',', @Keywords) 
```

拆分功能代码如下

```
ALTER FUNCTION [dbo].[uf_SplitKeywords] 
   (  @DELIMITER VARCHAR(5), 
      @LIST      VARCHAR(MAX) 
   ) 
   RETURNS @TABLEOFVALUES TABLE 
      (  ROWID   int IDENTITY(1,1), 
         [VALUE] VARCHAR(MAX) 
      ) 
AS 
   BEGIN
   Declare @Pos int
   While LEN(@List) > 0
      begin
        Select @Pos=CHARINDEX(@Delimiter,@List,1)      
        if @Pos>0
           begin
             Insert into @TABLEOFVALUES ([Value]) Values (SubString(@List,1,@Pos -1))
             Select @LIST = STUFF(@List,1,@Pos ,'')
           end
        else  
            begin
            Insert into @TABLEOFVALUES ([Value]) Values (@List)
            Select @LIST =''
            end  
      end
   Return 
   End 
```

# html - 突出显示并复制 html 中 iframe 的整个文本

> ID：14580942
> 
> 赞同：0
> 
> 时间：2013-01-29T10:37:49.703
> 
> 标签：html, iframe, copy, highlight

我们如何在html中突出显示和复制iframe的整个文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:45:23.557

我看不出你不能这样做的理由。简单地说，使用 Chrome 或 Firefox 等浏览器，右键单击 iframe 中要复制的部分，然后选择 View Frame Source。您应该在 iframe 中获取代码。

# javascript - 使用 livevalidation 脚本 - 特殊字符，除了 _（下划线）-（连字符）。（点）和空格

> ID：14580943
> 
> 赞同：1
> 
> 时间：2013-01-29T10:37:52.737
> 
> 标签：javascript, jquery, livevalidation

我正在使用实时验证脚本

> [http://livevalidation.com](http://livevalidation.com)

我需要检查文本是否包含除 _ (下划线) - (hyphen) 之外的特殊字符。（点）和空格 除了那些字符之外的特殊字符的存在将不会被验证 该隐为此做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:15:41.363

我认为你被正则表达式困住了。

正则表达式是您的要求是`/^[a-z0-9_ .-]*$/i`

```
var myField = new LiveValidation('myField', { validMessage: "I am valid!" });
myField.add(Validate.Format, { pattern: /^[a-z0-9_ .-]*$/i }); 
```

# java - 在 Liferay 5.2.3 中使用显示标签

> ID：14580945
> 
> 赞同：0
> 
> 时间：2013-01-29T10:37:55.580
> 
> 标签：java, struts, liferay, displaytag

我在 Liferay 5.2.3 的表格中使用显示标签进行分页。我的代码片段是：

```
<logic:notEmpty name="ReportList"> 
                            <div class="TabbedPanelsContent">
                            <div id="LoanPosition_Tabel">                           
                           <display:table   name="sessionScope.ReportList" requestURI="${urlRepDetails}" pagesize='<%= pagesize %>' sort="list" class="displaytag" defaultsort="3" defaultorder="ascending"  >
                                <display:column href="${urlReverseStatusRepDetails}"paramId="fileNumber" paramProperty="fileNumber" property="fileNumber" title= '<%= messages.getMessage("sr.fileNumber") %>' sortable="true" headerClass="sortable" class="tabel-border" />
                                <display:column property="uploadFileName" title='<%= messages.getMessage("sr.uploadFileName") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="product" title='<%= messages.getMessage("sr.product") %>'sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="uploadDate" title='<%= messages.getMessage("sr.uploadDate") %>' sortable="true" headerClass="sortable" class="tabel-border-rt" style="text-align:right"/>
                                <display:column property="uploadTime" title='<%= messages.getMessage("sr.uploadTime") %>'sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="totalInvoiceAmount" title='<%= messages.getMessage("sr.totalInvoiceAmount") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="totalNumbarOfInvoice" title='<%= messages.getMessage("sr.totalNumbarOfInvoice") %>' sortable="true" headerClass="sortable" class="tabel-border-rt" style="text-align:right"/>
                                <display:column property="totalSuccessfulCases" title='<%= messages.getMessage("sr.totalSuccessfulCases") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="amountDisbursed" title='<%= messages.getMessage("sr.amountDisbursed") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="fileDescription" title='<%= messages.getMessage("sr.fileDescription") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="manufacrCompCode" title='<%= messages.getMessage("sr.manufacrCompCode") %>' sortable="true" headerClass="sortable" class="tabel-border"/>
                                <display:column property="status" title='<%= messages.getMessage("sr.status") %>'sortable="true" headerClass="sortable" class="tabel-border"/>                  
                                <display:setProperty name="paging.banner.placement" value="bottom" />
                                <display:setProperty name="basic.empty.showtable" value="true" />
                                <display:setProperty name="paging.banner.onepage" value='' />
                                <display:setProperty name="paging.banner.no_items_found" value='' />
                                <display:setProperty name="paging.banner.one_item_found" value='' />
                                <display:setProperty name="paging.banner.all_items_found" value='' />
                                <display:setProperty name="paging.banner.some_items_found" value='' />
                            </display:table>
                            </div>
                            </div>
                </logic:notEmpty> 
```

问题是当我单击文件编号时，我正在下载文件，但是当我移动到下一页，即第 2 页和后续页面时，我上次下载的文件再次被下载，只需单击分页。这里发生的事情是从点击页面 2 或 3 上的表单发布的最后点击请求号增益。我无法区分点击请求号和分页链接。如何解决这个问题？我是 Liferay 5.2.3 中的 struts 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T10:34:54.290

当你点击分页链接时，它会调用同一个jsp中预设的每个javascript函数或同一个jsp中已经包含的javascript。

# windows-phone - Window Phone 增强现实和形状识别

> ID：14580948
> 
> 赞同：1
> 
> 时间：2013-01-29T10:38:01.810
> 
> 标签：windows-phone, augmented-reality, emgucv, shape-recognition

我是 Windows Phone 应用程序开发的初学者。我的目标是创建一个简单的增强现实应用程序，其中包括形状识别（例如手或脸）。此外，我想在屏幕上绘制 3D 对象并将它们放置在现实中。问题是开始开发的最佳方式是什么？特别是您建议使用哪些工具包？我目前的想法是使用 WP-SDK 中内置的 Motion Class 检测运动，并使用 EmguCV 检测和识别形状。我应该使用哪个库来绘制形状（Direct3d 或 XNA）？这是一个好的开始方式吗？如果 EmguCV 在 Windows Phone 平台上可用，我很困惑？

附加信息：
- 平台将是 WP7.5 或 WP8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T19:35:50.953

我也在做 windows phone 项目，它是关于人脸识别的，但是因为缺少可以用于其他事情的库，所以我改变了我的项目。但是有 FACESDK 可以帮助您进行人脸识别。 [http://research.microsoft.com/en-us/projects/facesdk/](http://research.microsoft.com/en-us/projects/facesdk/)

# c - kxk 布尔矩阵的快速乘法，其中 8 <= k <= 16

> ID：14580950
> 
> 赞同：8
> 
> 时间：2013-01-29T10:38:06.287
> 
> 标签：c, optimization, matrix-multiplication

我想找到一种尽可能快的方法将两个小布尔矩阵相乘，其中小表示 8x8、9x9 ... 16x16。这个套路会用到很多，所以它需要非常高效，所以请不要建议直截了当的解决方案应该足够快。

对于 8x8 和 16x16 的特殊情况，我已经有了相当有效的实现，基于[此处找到的解决方案](https://stackoverflow.com/questions/6538032/binary-matrix-vector-multiplication/6538237#6538237)，我们将整个矩阵分别视为一个`uint64_t`或`uint64_t[4]`。在我的机器上，这比直接实现快大约 70-80 倍。

但是，在 8 < k < 16 的情况下，我真的不知道如何利用任何合理的表示来实现上述巧妙的技巧。

所以基本上，我愿意接受任何使用任何类型的表示（矩阵的）和函数签名的建议。您可以假设这针对 32 位或 64 位架构（选择最适合您的建议的）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:24:00.340

给定两个 4x4 矩阵 a= 0010,0100,1111,0001, b=1100,0001,0100,0100，首先可以计算转置 b' = 1000,1011,0000,0100。

然后得到的矩阵 M(i,j)=axb mod 2 == popcount(a[i]&b[j]) & 1; // 或奇偶校验

从中可以注意到，只要位向量适合计算机字，复杂度只会增加 n^2。

如果有一些特殊的置换和位选择操作可用，这至少可以加快 8x8 矩阵的速度。一个向量中的 NxN 位可以精确地迭代 N 次。（所以 16x16 几乎是极限）。

每个步骤由累加组成，即 Result(n+1) = Result(n) XOR A(n) .& B(n)，其中 Result(0) = 0，A(n) 是 A <<< n，并且 ' <<<' == 元素的列旋转，其中 B(n) 从矩阵 B 复制对角线元素：

```
 a b c          a e i          d h c          g b f
B=  d e f  B(0) =  a e i  B(1) =  d h c   B(2) = g b f
    g h i          a e i          d h c          g b f 
```

在进一步考虑之后，更好的选择是`^^^`（逐行旋转）矩阵 B 并选择 A(n) == 列从 A 复制的对角线：

```
 a b c         a a a           b b b           c c c 
A=  d e f  A(0) = e e e , A(1) =  f f f,  A(2) =  d d d 
    g h i         i i i           g g g           h h h 
```

**编辑**为了使以后的读者受益，我提出了便携式 C 中 W<=16 位矩阵乘法的完整解决方案。

```
#include <stdint.h>
void matrix_mul_gf2(uint16_t *a, uint16_t *b, uint16_t *c)
{
    // these arrays can be read in two successive xmm registers or in a single ymm
    uint16_t D[16];      // Temporary
    uint16_t C[16]={0};  // result
    uint16_t B[16];  
    uint16_t A[16];
    int i,j;
    uint16_t top_row;
    // Preprocess B (while reading from input) 
    // -- "un-tilt" the diagonal to bit position 0x8000
    for (i=0;i<W;i++) B[i]=(b[i]<<i) | (b[i]>>(W-i));
    for (i=0;i<W;i++) A[i]=a[i];  // Just read in matrix 'a'
    // Loop W times
    // Can be parallelized 4x with MMX, 8x with XMM and 16x with YMM instructions
    for (j=0;j<W;j++) {
        for (i=0;i<W;i++) D[i]=((int16_t)B[i])>>15;  // copy sign bit to rows
        for (i=0;i<W;i++) B[i]<<=1;                  // Prepare B for next round
        for (i=0;i<W;i++) C[i]^= A[i]&D[i];          // Add the partial product

        top_row=A[0];
        for (i=0;i<W-1;i++) A[i]=A[i+1];
        A[W-1]=top_row;
    }
    for (i=0;i<W;i++) c[i]=C[i];      // return result
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T10:45:53.797

如何将其填充到下一个“聪明”（例如 8 或 16）大小，对角线上的所有“1”？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T12:41:30.833

根据您的应用程序，**将矩阵及其转置存储在一起**可能会有所帮助。您将节省大量时间，否则这些时间将在矩阵乘法期间用于转置，但代价是一些内存和更多操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-22T20:45:54.587

有一种更快的方法可以使用 64 位乘法以及一些简单的位技巧来将 8x8 矩阵相乘，该方法适用于 GF[2] 或布尔代数。假设这三个矩阵在一个 64 位 int 中被打包成 8 位连续的 8 行，我们可以使用乘法来分散这些位并在一个 for 循环中完成这项工作：

```
uint64_t mul8x8 (uint64_t A, uint64_t B) {

    const uint64_t ROW = 0x00000000000000FF;
    const uint64_t COL = 0x0101010101010101;

    uint64_t C = 0;

    for (int i=0; i<8; ++i) {
        uint64_t p = COL & (A>>i);
        uint64_t r = ROW & (B>>i*8);
        C |= (p*r); // use ^ for GF(2) instead
    }
    return C;
} 
```

如果您负担得起阻塞行以提高效率，则 16x16 的代码很简单。这个技巧也广泛用于高性能线性代数库，包括将矩阵划分为 N/M x N/M 个 MxM 子矩阵块，选择 M = 2^m 以最大化缓存中的局部性。处理 N % M != 0 的常用方法是用 0 填充行和列，以便可以对所有块乘法使用相同的算法。

我们可以将相同的想法应用于可变维数 8 >= N >= 16 的布尔矩阵，只要我们能够以行阻塞格式在内部表示矩阵。我们只是假设矩阵是 16x16，最后 16-N 行和列用 0 填充：

```
void mul16x16 (uint64_t C[2][2], const uint64_t A[2][2], const uint64_t B[2][2]) {

    for (int i=0; i<2; ++i)
        for (int j=0; j<2; ++j)
            C[i][j] = mul8x8(A[i][0],B[0][j])
                    | mul8x8(A[i][1],B[1][j]); // once again, use ^ instead for GF(2)
} 
```

请注意，我们仅在 8x8=64 整数乘积和一些位运算中完成了 16x16 矩阵乘法。

mul8x8 也可以通过现代 SSE/AVX 矢量指令得到很大改进。理论上可以用一条 AVX512 指令并行执行所有 8 个乘积（我们仍然需要先将数据分散到 ZMM 寄存器），然后使用 lg2(8) = O(3) 指令进行水平归约。

# gnuplot - gnuplot 在使用 dgrid3d 时忽略 x 和 y 范围

> ID：14580956
> 
> 赞同：0
> 
> 时间：2013-01-29T10:38:25.427
> 
> 标签：gnuplot

我有一个包含分散数据的文件（点大约位于规则网格的顶点上）：前两列是 x 和 y 坐标，然后是我需要绘制的其他数据的几列。我想获得代表这些数据的颜色图，并且由于点是分散的，我使用**dgrid3d**来生成规则网格并具有更平滑的表示。我的问题是，当我设置**dgrid3d**时，gnuplot 会忽略 x 和 y 范围并在图框之外绘制网格。Bellow 是重现我的问题的最小脚本：

```
set view map
set yrange [0.4:0.8]
set xrange [0.2:0.8]
set pm3d 
set style data lines
set dgrid3d 100,100,4
splot "./Terr.dat" using 1:2:(log($6)) pal 
```

我得到的结果如下图： ![在此处输入图像描述](../Images/b524e308000b9a147955cb684d17aa10.png)

**设置pm3d**的选项**clip1in**或**clip4in**无效。如果我取消设置**视图** 以使结果为 3D 表面，它也会忽略 x 和 y 范围。我可以很容易地编写一个脚本来预处理数据并删除我想要的范围之外的点，但是**gnuplot**应该能够管理这个。任何的想法？

 ******我正在使用**gnuplot 4.2 补丁级别 6**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:09:07.417

我不确定我能否重现您的问题，但您的脚本中有一些有趣的地方。当`set style data lines`您使用`pm3d`. 我创建了一个简单的数据文件：

```
0 1 4
1 0 5
0 0 2
1 1 3 
```

我使用这个脚本绘制了它：

```
set view map
set yrange [0.4:0.8]
set xrange [0.2:0.8]
set dgrid3d 100,100,4
splot 'test.dat' u 1:2:3 w pm3d 
```

它似乎“工作”（我使用的是gnuplot 4.6.0）。

![简单的图像](../Images/32f4a7be1b912a5202927966a57d49a4.png)

但是有几点需要注意——请注意，我的原始域中的每个点都超出了给定的 x 和 y 范围。Gnuplot 在构建表面时仍然使用这些点。这也相当不错地展示了 gnuplot 加权函数的样子（尽管我们可以通过仅在数据文件中使用 1 个点来做得更好。）

* * *

# 更新

在我的两台计算机之间，我可以访问 gnuplot4.2.6、gnuplot4.3.0、gnuplot4.4.2、gnuplot4.6.0、gnuplot4.6.1 和 gnuplot4.7.0。gnuplot4.2.6 是**唯一**表现出您描述的行为的版本。在我看来，他们在 4.3 CVS 分支中更改了 pm3d 的行为，但没有将这些更改推回 gnuplot4.2。简单的解决方法是升级到 gnuplot4.6——我已经将它用作我的默认 gnuplot 几个月了，它似乎相当稳定。******

# jquery - scrollTop 仅适用于 Firefox

> ID：14580957
> 
> 赞同：2
> 
> 时间：2013-01-29T10:38:28.340
> 
> 标签：jquery

该脚本在 Firefox 中运行良好，但在其他浏览器中无法跳转到函数。它只突出显示找到的术语。请帮忙！

```
function highlightTerms()
{
   var searchTerm = $('#search-term').val();
     $("p:contains('"+searchTerm+"')").addClass('highlighted');
}

function unhighlight()
{
  $('.highlighted').removeClass('highlighted');
}

function scrollToFirstFoundTerm()
{
   var firstFoundTerm = $('.highlighted:first');
   if (firstFoundTerm.length > 0)
      $('html').scrollTop(firstFoundTerm.offset().top);
}

function searchAndHighlight()
{
   unhighlight();
   highlightTerms();
   scrollToFirstFoundTerm();

} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:44:14.510

尝试：

```
$('html, body').scrollTop(firstFoundTerm.offset().top); 
```

应该可以跨浏览器工作并添加`body`.

# java - 构造 EncryptedPrivateKeyInfo 时出现异常

> ID：14580958
> 
> 赞同：1
> 
> 时间：2013-01-29T10:38:30.203
> 
> 标签：java, encryption, openssl, ssl-certificate, private-key

我已经生成了一个私钥并用密码对其进行了加密。现在我想将它加载到 EncryptedPrivateKeyInfo 中，这样我就可以构造它并将其导出为 PEM 格式文件。下面是我使用的代码，

```
final CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null);
final X500Name x500Name =
    new X500Name("IN", "AP", "HYD", "TEST", "TEST_ORG", "test@xyz.com");
keypair.generate(1024);
final PrivateKey privKey = keypair.getPrivateKey();
final X509Certificate[] chain = new X509Certificate[1];
long validity = 123;
chain[0] = keypair.getSelfCertificate(x500Name, new Date(), 
    validity * 24 * 60 * 60);
Key key =  new SecretKeySpec(password.getBytes(), ALGO);
Cipher c = Cipher.getInstance(ALGO);
c.init(Cipher.ENCRYPT_MODE, key);
byte[] encVal = c.doFinal(privKey.getEncoded());
AlgorithmParameters params = AlgorithmParameters.getInstance("DES");
params.init(encVal); // <--- exception thrown here
EncryptedPrivateKeyInfo encinfo = new EncryptedPrivateKeyInfo(params, encVal);

// displaying encrypting value
String encryptedValue = Base64.encodeBase64String(encinfo.getEncoded());
System.out.println(encryptedValue); 
```

但是在执行上面的代码时，我得到了下面的异常

```
java.io.IOException: DER input not an octet string
  at sun.security.util.DerInputStream.getOctetString(DerInputStream.java:233)
  at com.sun.crypto.provider.SunJCE_t.a(DashoA13*..)
  at com.sun.crypto.provider.DESParameters.engineInit(DashoA13*..)
  at java.security.AlgorithmParameters.init(AlgorithmParameters.java:260) 
```

在行`params.init(encVal);`。我没有从异常中得到什么问题。任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:52:54.140

包含加密私钥的 PKCS #8 文件具有以下 ASN.1 结构：

```
EncryptedPrivateKeyInfo ::= SEQUENCE {
  encryptionAlgorithm EncryptionAlgorithmIdentifier,
  encryptedData EncryptedData } 
```

请注意，加密数据只是整个数据包的一部分。您需要将此数据与加密算法标识符一起包含在序列中。您上面的代码仅产生`encryptedData`部分。

* * *

我建议你考虑使用 BouncyCastle。看起来他们[最近可能改进了对 PKCS#8 的支持](http://www.bouncycastle.org/jira/browse/BJA-243)。这是一些示例代码：

```
KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
KeyPair keyPair = generator.generateKeyPair();

final PrivateKey privKey = keyPair.getPrivate();

JceOpenSSLPKCS8EncryptorBuilder builder =
    new JceOpenSSLPKCS8EncryptorBuilder(PKCS8Generator.PBE_SHA1_3DES);

builder.setIterationCount(10000);
builder.setPasssword("Hello, World!".toCharArray());

OutputEncryptor outputEncryptor = builder.build();    
PKCS8Generator pkcs8Generator =
    new JcaPKCS8Generator(privKey, outputEncryptor);

try (PemWriter writer = new PemWriter(new PrintWriter(System.out))) {
  writer.writeObject(pkcs8Generator);
} 
```

这将输出一个加密的私钥：

```
-----开始加密私钥-----
MIICrjAoBgoqhkiG9w0BDAEDMBoEFM1kXgdc0vzEhCwQG5G2wAaSA7POAgInEASC
AoAkBPjKkNVpt9O9+Q63WMscX0eEiGyD6/kFwI+ZgH4/s98uKDHxWTB0fQ+HA+Iy
gQC1b+QhT2HVR0DIB6lfhou4FrcJXBAqf4h0ybkfmE4xTfVQcCpgKm4uUC/FYjks
dgTMajN9NHL06nUjd/0uVsM2bzbJHXlDmPRB0LdfvuxzcGN0Vvn13IJrjRnGwTGR
nv6ZyE3gbjCranINhMtCDMtg9Ydm7+DHC53YOeqbbhgO9/aJHpRzX/H6zLYp/oa0
GpHM6NzsTfABS8QyqR+EaoFad/XHvC9nKUDqm8LVjmKdlXrLDmpHQ4kxZqMIbijE
/Pu2IfHB0jYYa93F2i0fKkIaeve4oo3/izBn0amXVnsPMnkyrIoUUaLzI/gb/419
vp+1kmAKsEFCRIDQlDCiR9CyuePOaR0d7EckVMDU0uR9MXYAV73Y3VRXe1votrQ/
5Wi8ueio9TBDYj9wYYoYmRpz454HqJ/71k0xr5IJugJIJkUzNN9VkjK9rhgT0Vz5
wY/E1yZZepqCR1xrYgDuu/n4t63EERMo+BgkpKBMnWliU3QdQT2r4qBnma+c9lq8
IWb3y3Phl4LsX3DnLed1rUIOcQKiN2T9/yl+7eEtk8APkKuLK5DDDytgAcOQ1MIF
7Ie2939OG1c3mAwrdeOk20zf0SSbpX17MDmUoMwKsP9u8bqHahNoucjtuVSRtjSe
94xntc0fHkiIueApffxjErJOd2pmjGxJ7D2lkjV4G3AEg3vqFXk6E8nPIqIZL4qI
9KzmAFv88+QDIVTM5fheIOxZpeBkXtq2e19gCijiysqLDWL2CLuN4LVzhKCkJF6x
QGN1FcLk95ikvhI/LEn6qrih
-----结束加密私钥-----

```

# c++ - std::multimap 如何存储其元素？

> ID：14580960
> 
> 赞同：0
> 
> 时间：2013-01-29T10:38:32.630
> 
> 标签：c++, stl

> **可能重复：**
> [如何实现 C++ 多图？](https://stackoverflow.com/questions/6258387/how-is-a-c-multimap-implemented)

[C++ 参考提到](http://www.cplusplus.com/reference/map/multimap/)

> 多图通常实现为二叉搜索树。

但是它们**典型的内部**表示是什么？是像`std::map<Key, std::list<Value> >`还是类似？我担心的是在一组具有相同键的元素上插入和迭代的复杂性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:17:13.287

如果您想了解特定操作的复杂性，您只需查看标准即可。该标准对复杂性有保证，但实现可以自由地以任何他们希望的方式满足这些保证。

对于插入，复杂性是`O(lg n)`，除非您每次都指定最佳提示，在这种情况下，复杂性会被`O(1)`摊销。（在此处查看详细信息：http: [//en.cppreference.com/w/cpp/container/multimap/insert](http://en.cppreference.com/w/cpp/container/multimap/insert)）

对于具有相同键的一组元素的迭代，复杂性与从任何迭代器到另一个迭代器的迭代相同。鉴于您已经找到了迭代器，迭代与您正在迭代的项目数呈线性关系。（抱歉，目前无法找到此参考）

# windows-phone-8 - 我的应用程序如何知道 Windows Phone 8 中是否有来电？

> ID：14580961
> 
> 赞同：1
> 
> 时间：2013-01-29T10:38:39.043
> 
> 标签：windows-phone-8

我的应用程序在前台运行，电话接到来电。在这种情况下，手机不会向应用程序发起任何事件，例如停用或关闭。如何识别我的应用程序未运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:46:22.210

您的应用程序实际上仍然是当前的前台应用程序（因此，有点运行，但音频/视频因明显原因而暂停）。

您将在应用程序中收到一个被遮挡的事件，但您无法区分这是由于来电、来电短信、吐司还是提醒。

这是您获得[的 Obscured 事件的 MSDN 文档的链接。](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationframe.obscured%28v=vs.105%29.aspx)您还可以检测到相应的 Unobscured 事件。

# asp.net - 如何使用现有的 3 层 DAL-BL-UI 应用程序并将 DAL 分离到不同的服务器中？

> ID：14580963
> 
> 赞同：0
> 
> 时间：2013-01-29T10:38:45.143
> 
> 标签：asp.net, database, security, data-layers

我有一个现有的 3 层应用程序 (DAL-BL-UI)，它安装在一台 Web 服务器上。Web 服务器使用 Framework 4 ADO.NET 直接与数据库服务器 (MSSQL) 通信。将现有应用程序更改为不直接与数据库服务器通信的最快方法是什么。我想以最少的代码更改在 Web 和数据库服务器之间添加一个“中间服务器”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:04:10.890

ADO.NET 使用连接字符串连接到数据源。默认连接字符串在 Web.config 中定义。DAL 将使用它来连接到数据库。只要在防火墙等上打开了正确的端口，ado.net 连接的服务器就可以在任何地方。

如果您的 dal 在单独的程序集中，那么您可以编写一个简单的 DAL Web 应用程序，该应用程序引用 DAL.BLL 并将所需的方法和对象公开为 Web 服务 - 要么使用 RESTFUL 方法、SOAP、WCF、简单的 ASHX - 无论你喜欢什么最好的。然后在您的原始应用程序中开发一个新的 DAL，而不是使用 ADO.NET，使用 Web 服务。保持 DAL 接口不变，这样您就可以在不更改任何 BL 或 UI 代码的情况下切换新的 DAL。

WCF 数据服务可能是您的答案 - 取决于您想要进行多少重构 - [http://msdn.microsoft.com/en-us/data/bb931106](http://msdn.microsoft.com/en-us/data/bb931106)

# java - java：在 H2 中的 executeBatch() 之后检索键

> ID：14580967
> 
> 赞同：7
> 
> 时间：2013-01-29T10:38:57.420
> 
> 标签：java, prepared-statement

我正在尝试从`executeBatch()`事务中检索生成的密钥，但我只获得要添加的最后一个密钥。

这是我的代码：

```
 PreparedStatement ps_insert = conn.prepareStatement(insertQuery, PreparedStatement.RETURN_GENERATED_KEYS);          
        for (int i = 0 ; i < adding_dates.length ; i++){
            ps_insert.setInt(1, Integer.parseInt(consultant_id));
            ps_insert.setDate(2, adding_dates[i]);
            ps_insert.setInt(3, Integer.parseInt(room_id));
            ps_insert.addBatch();
        }
        ps_insert.executeBatch();
        ResultSet rs = ps_insert.getGeneratedKeys(); //<-- Only the last key retrieved
        conn.commit(); 
```

我究竟做错了什么？

编辑：抱歉没有提到我在嵌入式模式下使用 H2 ( [http://www.h2database.com/html/main.html ) 数据库。](http://www.h2database.com/html/main.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:51:51.537

根据 H2 [jdbc driver javadocs](http://h2database.com/javadoc/org/h2/jdbc/JdbcStatement.html#getGeneratedKeys)，这是正常行为：

> 返回一个结果集，其中包含 为此连接**最后生成的自动增量键（如果有）。**如果最后一个修改语句没有生成任何键，则返回一个空结果集。返回的结果集仅包含最后一行的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:59:06.000

这是 H2 实施的限制。这是一个[问题](http://code.google.com/p/h2database/issues/detail?id=357)。

现在使用不带批处理的插入/更新，或者通过选择以某种方式查询生成的键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:45:43.380

您必须迭代`ResultSet`以检索密钥。

```
 PreparedStatement ps_insert = conn.prepareStatement(insertQuery, PreparedStatement.RETURN_GENERATED_KEYS);          
    for (int i = 0 ; i < adding_dates.length ; i++){
        ps_insert.setInt(1, Integer.parseInt(consultant_id));
        ps_insert.setDate(2, adding_dates[i]);
        ps_insert.setInt(3, Integer.parseInt(room_id));
        ps_insert.addBatch();
    }
    ps_insert.executeBatch();
    ResultSet rs = ps_insert.getGeneratedKeys(); //<-- Only the last key retrieved

    if (rs.next()) {
       ResultSetMetaData rsmd = rs.getMetaData();
       int colCount = rsmd.getColumnCount();

       do {
           for (int i = 1; i <= colCount; i++) {
             String key = rs.getString(i);
             System.out.println("key " + i + "is " + key);
           }
       }
      while (rs.next();)
     } 

    conn.commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:46:15.133

如果您在 2 个线程之间共享会话/连接，并且其中两个线程尝试同时执行语句，那么您可能会看到这种问题。

您可能需要（a）使用连接池或（b）同步您对数据库的整个访问。

例如选项 (b)

在您的方法前面放置一个`synchronize`令牌以使其线程安全

只是一个想法，因为我不知道你完成了执行上下文

# excel - 基于Excel版本的条件编译

> ID：14580969
> 
> 赞同：5
> 
> 时间：2013-01-29T10:39:05.583
> 
> 标签：excel, vba, compilation, excel-2010, excel-2013

我知道我可以在 VBA 中使用条件编译来区分 64 位和 32 位版本（使用`#If VBA7 Then ...`）。

是否还有一个类似的内置常量，`Application.Version`以便我可以在编译时区分 Excel 2013/2010/2007/... 等？

此外，是否有可用的现有编译器常量列表？到目前为止，我找到了`VBA7`和`Win64`（例如，从[这篇](http://www.cpearson.com/excel/Bitness.aspx)文章中）——但还有其他的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:53:39.530

从此[链接](https://msdn.microsoft.com/VBA/Language-Reference-VBA/articles/compiler-constants)中，您有以下常量：

```
VBA6
VBA7
Win64
Win32
Win16
Mac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-02T19:37:19.930

不是问题的版本粒度，但我需要将 Office 365/XL16 特定代码与其前身分开。VBA7向后兼容VBA6，而VBA6对VBA7一无所知。我们可以利用它来发挥我们的优势。

```
Sub testit()
#If VBA6 And VBA7 Then
   Debug.Print "Cool!" 'XL16 vba code
#Else
   Debug.Print "Yeah!" 'Not XL16 vba code
#End If
End Sub 
```

XL14 及以下评估#If 为真/假，XL16 为真/真。如果只是#If VBA7，XL14 会尝试编译XL16 代码。我不知道为什么，但这就是它的测试方式。

# php - Magento 3 级子类别菜单

> ID：14580970
> 
> 赞同：1
> 
> 时间：2013-01-29T10:39:06.293
> 
> 标签：php, magento, drop-down-menu, categories

我正在开发一个具有 2 级（类别和子类别）菜单的 magento 网站，我想添加第 3 级，但我不知道如何让它工作，我需要帮助。

这是我用来获得第 1 和第 2 类别级别的代码，我怎样才能获得第 3 级别？

```
<div class="left_content">
 <div class="menu">
    <?php $_helper = Mage::helper('catalog/category') ?>
    <?php $_categories = $_helper->getStoreCategories() ?>
    <?php $currentCategory = Mage::registry('current_category') ?>
    <?php if (count($_categories) > 0): ?>
            <ul id="menu">
            <?php foreach($_categories as $_category): ?>
                    <li class="sub">
                    <a href="<?php echo $_helper->getCategoryUrl($_category) ?>"><?php echo $_category->getName() ?></a>
                    <?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
                    <?php $_subcategories = $_category->getChildrenCategories() ?>
                    <?php if (count($_subcategories) > 0): ?>
                        <ul>
                        <?php foreach($_subcategories as $_subcategory): ?>
                            <li>
                                <a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
                                <?php echo $_subcategory->getName() ?>
                                </a>
                            </li>
                        <?php endforeach; ?>
                        </ul>
                    <?php endif; ?>
                    </li>
             <?php endforeach; ?>
            </ul>
    <?php endif; ?>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:55:37.550

```
<div class="left_content">
 <div class="menu">
    <?php $_helper = Mage::helper('catalog/category') ?>
    <?php $_categories = $_helper->getStoreCategories() ?>
    <?php $currentCategory = Mage::registry('current_category') ?>
    <?php if (count($_categories) > 0): ?>
            <ul id="menu">
            <?php foreach($_categories as $_category): ?>
                    <li class="sub">
                    <a href="<?php echo $_helper->getCategoryUrl($_category) ?>"><?php echo $_category->getName() ?></a>
                    <?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
                    <?php $_subcategories = $_category->getChildrenCategories() ?>
                    <?php if (count($_subcategories) > 0): ?>
                        <ul>
                         <?php foreach($_subcategories as $_subcategory): ?>
                            <li>
                                <a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
                                <?php echo $_subcategory->getName() ?>
                                <!--sub sub category-->
                                <?php $_subcategory = Mage::getModel('catalog/category')->load($_subcategory->getId()) ?>
                                <?php $_subsubcategories = $_subcategory->getChildrenCategories() ?>
                                <?php if (count($_subsubcategories) > 0): ?>
                                 <ul>
                                 <?php foreach($_subsubcategories as $_subsubcategory): ?>
                                 <li>
                                    <a href="<?php echo $_helper->getCategoryUrl($_subsubcategory) ?>">
                                 <?php echo $_subsubcategory->getName() ?>
                                    </a>
                                 </li>
                          <?php endforeach; ?>
                        </ul>
                     <?php endif; ?>
                                 <!--sub sub category-->
                                </a>
                            </li>
                        <?php endforeach; ?>
                        </ul>
                    <?php endif; ?>
                    </li>
             <?php endforeach; ?>
            </ul>
    <?php endif; ?>
    </div>

</div> 
```

现在对你应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:53:48.533

你在正确的轨道上。
继续吧。
[Link 1](https://stackoverflow.com/questions/13435468/how-to-make-second-root-category-navigation-in-magento/13450858#13450858)
[Link 2](https://stackoverflow.com/questions/8227838/how-to-display-the-categories-and-subcategories-in-a-tree-format/13099835#13099835)
希望以上参考链接对您有所帮助。

# django - Django unittests - 配置不当的错误

> ID：14580976
> 
> 赞同：3
> 
> 时间：2013-01-29T10:39:34.860
> 
> 标签：django, testing, testcase, unittest2

我正在尝试为我的模块编写测试。当我运行时：

```
python manage.py test my_module 
```

我收到消息：

```
django.core.exceptions.ImproperlyConfigured: Please fill out the database NAME in the settings module before using the database. 
```

我还没有任何测试，只有 BaseTest，我在其中创建用户、组和分配权限。

问题可能出在哪里？服务器正常工作，配置似乎不错。我需要定义测试设置吗？

* * *

*行。我想我知道问题出在哪里：] 我有存储在其他模块中的权限列表。所以我在写`from module.perms import perms`（普通的python列表）。看起来，python 所做的不仅仅是将该列表从其他模块导入到我的模块中。这就是失败的原因。*

**解决方案：** 列表定义后的环绕代码：

```
if __name__ == "__main__":
   ... 
```

那么一切都应该运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:01:02.897

行。我想我知道问题出在哪里：] 我有存储在其他模块中的权限列表。所以我是从 module.perms import perms （普通的 python 列表）写的。看起来，python 所做的不仅仅是将该列表从其他模块导入到我的模块中。这就是失败的原因。

解决方案：列表定义后的环绕代码：

```
if __name__ == "__main__":
   ... 
```

那么一切都应该运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:49:22.523

您需要在 settings.py 中设置您的 DATABASE 设置，并且您的应用程序需要在已安装的应用程序中。例如：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'database.sqlite', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:33:00.560

`python manage.py test`不使用`NAME`settings.py 中定义的数据库`DATABASES`。从[文档](https://docs.djangoproject.com/en/1.4/topics/testing/#the-test-database)-

> 需要数据库的测试（即模型测试）不会使用您的“真实”（生产）数据库。为测试创建单独的空白数据库。
> 
> 无论测试通过还是失败，测试数据库都会在所有测试执行完毕后销毁。
> 
> 默认情况下，测试数据库通过将 test_ 添加到 DATABASES 中定义的数据库的 NAME 设置的值来获取它们的名称。当使用 SQLite 数据库引擎时，测试将默认使用内存数据库（即，数据库将在内存中创建，完全绕过文件系统！）。如果要使用不同的数据库名称，请在字典中为 DATABASES 中的任何给定数据库指定 TEST_NAME。

回答你的问题。`TEST_NAME` [您可以使用设置](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-TEST_NAME)定义测试数据库。但你不应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T23:44:44.307

这是人们通过搜索找到此问题的另一种潜在解决方案：

我试图`TestRunner`在我的设置文件中定义我自己的类，这意味着它必须导入`DjangoTestSuiteRunner`. 文件顶部的此导入导致`ImproperlyConfigured`错误。将自定义 TestRunner 类移动到单独的文件解决了该问题。

# mysql - 更新两个mysql查询之间的差异

> ID：14580979
> 
> 赞同：1
> 
> 时间：2013-01-29T10:40:01.863
> 
> 标签：mysql, cron, sync

我正在开发一个 Web 应用程序，它使用我拥有只读权限的远程数据库中的一些数据。该数据库 SATMANAGE 中的数据每 5 分钟更新一次。对于我的应用程序，我需要一个远程数据库表中的一些列，称为 IDIRECT_STATUS。

自动取款机。我有一个 cron 作业从 CLI 执行查询并将数据存储在 .txt 文件中。然后它截断本地表并使用 LOAD DATA LOCAL INFILE 重新填充更新的数据。

到目前为止，这一切都很好。随着应用程序变得越来越复杂，我需要一种更改本地“远程”表的方法。虽然我现在截断了本地“远程”表。我只需要使用远程“IDIRECT_STATUS”表中的更新数据来更新该表。这使我能够在本地“远程”表中拥有远程“IDIRECT_STATUS”表中不存在的列。

这就是我要找的。左侧是远程表。我想在相应的列上保留右侧的本地数据库，并使用左侧的远程数据库进行更新。这不会截断本地表，以便其他本地列保持状态。

```
IDIRECT_STATUS                  remotes
-------------------------------|-------------------------------
id                             | id
netmodem_name                  | netmodem_name
nms_name                       | nms_name
ip_addr                        | ip_addr
serial_no                      | serial_no
last_date_online               | last_date_online
last_updated                   | last_updated
network_name                   | network_name
network_id                     | network_id
is_mobile                      | is_mobile
latitude                       | latitude
longitude                      | longitude
lnb_name                       | lnb_name
buc_name                       | buc_name
upstream_qos_profile_name      | upstream_qos_profile_name
downstream_qos_profile_name    | downstream_qos_profile_name
inroute_maximum_data_rate      | inroute_maximum_data_rate
outroute_maximum_data_rate     | outroute_maximum_data_rate
upstream_cir                   | upstream_cir
use_upstream_cir               | use_upstream_cir
crtp_enabled                   | crtp_enabled
INROUTE_GROUP_ID               | INROUTE_GROUP_ID
                               | excluded           (Not updated or deleted)
                               | excluded_to        (Not updated or deleted)
                               | shipowner_id       (Not updated or deleted)
                               | etc...             (Not updated or deleted ...) 
```

希望你们这些了不起的人能够帮助我。我有什么不清楚的请告诉我，我会尽快编辑问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:09:27.467

我`last_updated`在左表中看到了一个字段。我的建议是使用一个简单的 perl 或 php 脚本来执行以下操作：

a) 检查本地表的最新更新时间 b) 从远程表中选择上次插入后已更新的数据 c) 用远程数据更新本地表

在 php 代码中，它看起来像这样：

```
<?
// select the last update time
$sql = "select max(last_updated) as last_update_time from remotes";
$r = mysql_query($sql);
$row = mysql_fetch_assoc($r);
// save the last upate time
$last_update_time = $row['last_update_time'];

// get newer rows from the remote database
$sql = "select * from IDIRECT_STATUS where last_updated > ".$last_update_time;
$r = mysql_query($sql);
while ($row = mysql_fetch_assoc($r)) {
  // generate update queries
  $sql = "update remotes set netmodem_name='".$row['netmodem_name']."', ... last_updated='".$row['last_updated']."' where id=".$row['id'];
  // execute query
  mysql_query($sql);
}
?> 
```

# android - android - ExpandableListView 中的自下而上动画

> ID：14580980
> 
> 赞同：3
> 
> 时间：2013-01-29T10:40:02.660
> 
> 标签：android, android-animation, expandablelistview

我有一个 ExpandableListView 并为其子组设置以下动画：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator" >

<translate
    android:duration="900"
    android:fromYDelta="500%"
    android:toYDelta="0%" >
</translate>

  </set> 
```

这就是它的外观。正常状态：

![在此处输入图像描述](../Images/4750e5f68cf35ecb9a2763991f2402c9.png)

当一个组被扩展时，子组从底部出现，覆盖主要组片刻：

![在此处输入图像描述](../Images/daa65c5e20e6424b0ae11112b64e4ce2.png)

我需要的是这些子组在动画生效时不会覆盖主要组，并且像这样从主要组的“背景”向上滑动：

![在此处输入图像描述](../Images/abe6f8d23ceaa7a2822231bb6d95b38a.png)

任何想法如何实现这一目标？

# git - Assembla Git 项目依赖/合并

> ID：14580984
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:10.210
> 
> 标签：git, assembla

我正在使用汇编/git。
目标：
我想在 assembla 上托管 2 个不同的项目：Common 项目和我的 NewProject。
Common 被多个开发人员使用，他们可能会对其进行编辑和提交更改。
只有我在 NewProject 上工作，这个 NewProject 使用 Common 作为外部资源，我的意思是当我想从 assembla 中提取 NewProject 时，我还想获取 assembla 中不同项目上的最新 Common 文件。
这可能吗 ？我想也许这句话是“项目之间的合并”？
我是 git/assembla 的新手，以前一直使用 tortoise SVN
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:34:13.033

无论您的项目是在同一个空间还是在另一个空间，您都可以创建从主项目到个人项目的合并请求。

要进行此设置，您希望将主项目从 Fork Network 下的 git 工具分叉到一个新的 repo。然后，当您准备好从主存储库合并到您的个人项目时，您想从主存储库的 git 工具提交代码以设置合并请求。

# ios - 无法从通知中心删除推送通知

> ID：14580986
> 
> 赞同：2
> 
> 时间：2013-01-29T10:40:24.910
> 
> 标签：ios, objective-c, cocoa

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];' 
```

我添加了上面的代码，`didfinishLaunchingWithOptions`但是当用户在他的通知中心点击通知并进入我的应用程序时，通知不会被清除。

编辑：

我还尝试将其添加到我的代码中：

> 如果您尝试从消息中心清除消息，您还需要增加然后减少 `application:didReceiveRemoteNotification:`方法中的标记，以便当用户通过按下通知进入您的应用程序时，消息中心也会清除，即：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 1];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

如此处所述：[iOS应用程序：如何清除通知？](https://stackoverflow.com/questions/8682051/ios-application-how-to-clear-notifications)但通知仍然无法从通知中心清除

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:17:24.680

我刚刚在我的应用程序中手动添加了一个徽章编号并粘贴了

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
      application.applicationIconBadgeNumber = 0;
} 
```

给我的 AppDelegate。对我来说，这就像一个魅力。请注意，`didfinishLaunchingWithOptions`与`applicationDidBecomeActive`Mouhammad Lamaa 解释的不同。如果您将其粘贴到您的 AppDelegate 并点击通知中心的通知，它应该会消失。如果不是，您的应用程序可能会在激活后创建一个新通知？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:49:17.367

添加此代码

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
      application.applicationIconBadgeNumber = 0;
} 
```

在`didfinishlaunchingwithoptions`您的应用程序首次启动时启动。如果您的应用程序在后台运行，`didfinishlaunchingwithoptions`则不会启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:13:34.433

当用户从通知操作打开应用程序时 - 它启动

```
- (BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UILocalNotification *remoteNotif =
        [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (remoteNotif) {
        //handle remote notification
    }
    ....
} 
```

但是当应用程序在后台时，它会调用

```
- application:didReceiveRemoteNotification: 
```

也方法`[[UIApplication sharedApplication] cancelAllLocalNotifications];`仅取消注册的本地通知。推送通知不能被取消——它们会立即发送并且只执行一次。

# asp.net - 从面板更改为gridview - 布局错误

> ID：14580990
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:28.413
> 
> 标签：asp.net, gridview, panel, databound

嘿伙计们，在我对面板进行硬编码之前，我想在屏幕上显示：

```
<asp:Panel ID="Panel1" runat="server" CssClass="PrintHeader" HorizontalAlign="Center">
                <div style="margin-left:10px;margin-bottom:10px;text-align:center;">
                    <span style="font-size:22px;border-bottom:double 1px black">Construction Contracts</span><br /><br />
                    <span style="font-size:12px;">317 Upper Road, Mountblock, Liverpool, Co. Such&Such BT70 6HJ</span><br /><br />
                    <span style="font-size:16px;">Invoice Number: <%: this.CurrentInvoiceName %></span><br />
                    <span style="font-size:16px;">MEASUREMENT FOR PAYMENT</span><br />
                    <span style="font-size:12px;">V.A.T. No. 851 119 123</span>
                </div>
            </asp:Panel> 
```

产生： ![发票的当前布局](../Images/d846dda7087e45d1fa18bacdccf1e980.png) 然后我使用带有boundField的GridView，从表格中提取详细信息并将它们显示在屏幕上。问题是我的布局有点困难。我在用着：

```
<asp:GridView ID="GridView1" CssClass="PrintHeader" HorizontalAlign="Center" runat="server" Width="100px" AllowSorting="true" AutoGenerateColumns="false" DataSourceID="GridDataSource"> 
                <Columns>

                        <asp:BoundField DataField="id" HeaderText="InvoiceInfoID" ReadOnly="True" SortExpression="InvoiceInfoID" /> 
                        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />  
                        <asp:BoundField DataField="Address" HeaderText="Address" SortExpression="Address" />  
                        <asp:BoundField DataField="County" HeaderText="County" SortExpression="County" />  
                        <asp:BoundField DataField="Postcode" HeaderText="Postcode" SortExpression="Postcode" />
                        <asp:BoundField DataField="Invoice Number" HeaderText="Invoice Number" SortExpression="Invoice Number"/>   
                        <asp:BoundField DataField="Info" HeaderText="Info" SortExpression="Info" />   
                        <asp:BoundField DataField="VAT Number" HeaderText="VAT Number" SortExpression="VAT Number"/>  

                                </Columns>

                                <PagerStyle CssClass="footer"/>        
                                <PagerTemplate>
                                    <asp:GridViewPager runat="server" />
                                </PagerTemplate>
                                <EmptyDataTemplate>
                                    There are currently no details to display.
                                </EmptyDataTemplate>

                </asp:GridView>

                 <asp:SqlDataSource ID="GridDataSource" runat="server"   
                            ConnectionString="<%$ConnectionStrings:ClarkesTest4FromMaster1ConnectionString %>"  
                            SelectCommand="SELECT id, [Name], [Address], [County], [Postcode], [Invoice Number], [Info], [VAT Number] FROM [Invoice Info] ORDER BY [Name]" >
                 </asp:SqlDataSource> 
```

这看起来像： ![在此处输入图像描述](../Images/290a5ffce1851a63e27b896cd12fcbe6.png)

我想更改表格以显示为我以前的布局，没有表格，并且每一行都在彼此之上，而不是在它旁边，我尝试过 show column=false 之类的东西，也尝试过使用面板做不到，

谁能告诉我需要编辑什么属性才能实现我想要的？

谢谢

编辑：感谢所有我试过中继器的人的回复：

所以：

```
<asp:Panel ID="Panel2" runat="server" CssClass="PrintHeader" HorizontalAlign="Center">
                        <asp:Repeater ID="InvoiceHeader" DataSourceID="GridDataSource" runat="server">
                            <ItemTemplate>
                                <asp:Label ID="Name" runat="server" Text='<%Eval("invoice_Info")%>'> </asp:Label>
                                </tr>
                                </td>
                            </ItemTemplate>
                        </asp:Repeater>
                    </asp:Panel>
 <asp:SqlDataSource ID="GridDataSource" runat="server"   
                            ConnectionString="<%$ConnectionStrings:ClarkesTest4FromMaster1ConnectionString %>"  
                            SelectCommand="SELECT id, [Name], [Address], [County], [Postcode], [Invoice Number], [Info], [VAT Number] FROM [Invoice Info] ORDER BY [Name]" >
                 </asp:SqlDataSource> 
```

然后在后面的代码中：

```
 ClarkeDBDataContext db = new ClarkeDBDataContext();

        invoice_Info =
        (from invoiceInfo in db.Invoice_Infos
         select invoiceInfo).FirstOrDefault();

        Header.DataBind();
The page displays: <%Eval("invoice_Info")%> 
```

有人可以告诉我哪里出错了吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:30:09.480

代替`<%Eval("invoice_Info")%>`使用`<%#Eval("invoice_Info")%>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:35:42.823

```
 <asp:GridView ID="grdid" runat="server" AutoGenerateColumns="false" EmptyDataText="No records" ShowHeader="false">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                 <div style="margin-left:10px;margin-bottom:10px;text-align:center;">
                <span style="font-size:22px;border-bottom:double 1px black">Construction Contracts</span><br /><br />
                <span style="font-size:12px;">317 Upper Road, Mountblock, Liverpool, Co. Such&Such BT70 6HJ</span><br /><br />
                <span style="font-size:16px;">Invoice Number: <%#Eval("CurrentInvoiceName")%></span><br />
                <span style="font-size:16px;">MEASUREMENT FOR PAYMENT</span><br />
                <span style="font-size:12px;">V.A.T. No. 851 119 123</span>
            </div>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

以这种方式使用代码。将您的网格与适当的列值绑定。

# python - Python“if”语句被忽略

> ID：14580991
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:27.590
> 
> 标签：python, loops, if-statement, for-loop, logical-operators

> **可能重复：**
> [带有 if/elif 语句的多个条件](https://stackoverflow.com/questions/12335382/multiple-conditions-with-if-elif-statements)

如果满足多个条件之一（“或”），我将在 Python 中的循环内触发循环。该脚本似乎跳过了“if”语句并在不满足所需条件的情况下进入内部循环。

**代码**

```
# Begin TestCase
# Main logic: execute RemoteController macro, if expected state == true, set 'Success', else: Fail
for macroname_n in range (32):
    handler("RemoteController", "SET", "[{0}_{1}_{2}]".format(testcase, macroname_n, platform), "")
    result = pbc_json(disk, testcase_area, testcase, platform, filename_n, coord_n)
    filename_n += 1
    coord_n += 1
    if macroname_n == 15 or 20:
        success_counter = 0
        for extra_loop in range(15):
            handler("RemoteController", "SET", "\"down 4\"", "")
            result = pbc_json(disk, testcase_area, testcase, platform, filename_n, coord_n)
            filename_n += 1
            if result >= 50:
                success_counter += 1
        if success_counter <> 15:
            result = 0 
```

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T10:42:58.087

此行不符合您的要求：

```
if macroname_n == 15 or 20: 
```

解析如下：

```
if (macroname_n == 15) or (20): 
```

由于`20`在布尔上下文中始终为真，因此该语句始终为真。你真正想要的是这样的：

```
if macroname_n in (15, 20): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T10:42:08.147

`20`总是`true`在布尔上下文中求值。因此，`macroname_n == 15 or 20`总是`true`。

你可能想写：

```
if macroname_n == 15 or macroname_n == 20:
    success_counter = 0
    # ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:43:29.813

```
if macroname_n == 15 or 20: 
```

应该：

```
 if macroname_n == 15 or macroname_n == 20: 
```

否则它将始终将 20 读取为 true。

# java - 执行 XStream.fromXML 时出错 - 序列化

> ID：14580992
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:29.027
> 
> 标签：java, serialization, xstream

我在使用 XStream 反序列化 XML 文件时遇到问题。问题在于 JLanguageTab 类。我知道这一点，因为当我将其更改为其他适用于 XML 的类时，一切正常。

堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" com.thoughtworks.xstream.converters.ConversionException: Cannot deserialize object with new readObject()/writeObject() methods
---- Debugging information ----
class               : xxx.XMLStaticMessages
required-type       : xxx.JLanguageTab
path                : /staticMessages/staticMessage/languageVersion
line number         : 1
-------------------------------
at com.thoughtworks.xstream.converters.reflection.SerializableConverter.doUnmarshal(SerializableConverter.java:253)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:195)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:195)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46)
at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:117)
at com.thoughtworks.xstream.core.ReferenceByXPathMarshallingStrategy.unmarshal(ReferenceByXPathMarshallingStrategy.java:29)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:846)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:833)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:781)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:773)
at com.procom.staticmessages.XMLStaticMessagesFactory.getStaticMessages(XMLStaticMessagesFactory.java:49)
at xxx.XMLStaticMessagesFactory.getStaticMessages(XMLStaticMessagesFactory.java:18)
at cxxx.StaticMessagesForm.jMenuItemOpenActionPerformed(StaticMessagesForm.java:341)
at xxx.StaticMessagesForm.access$900(StaticMessagesForm.java:21)
at xxx.StaticMessagesForm$9.actionPerformed(StaticMessagesForm.java:241)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
at javax.swing.AbstractButton.doClick(AbstractButton.java:356)
at javax.swing.plaf.basic.BasicMenuItemUI$Actions.actionPerformed(BasicMenuItemUI.java:802)
at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1661)
at javax.swing.JComponent.processKeyBinding(JComponent.java:2879)
at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:689)
at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:697)
at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:697)
at javax.swing.JMenuBar.processKeyBinding(JMenuBar.java:668)
at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:306)
at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:292)
at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2971)
at javax.swing.JComponent.processKeyBindings(JComponent.java:2963)
at javax.swing.JComponent.processKeyEvent(JComponent.java:2842)
at java.awt.Component.processEvent(Component.java:6282)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1890)
at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:752)
at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1017)
at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:889)
at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:717)
at java.awt.Component.dispatchEventImpl(Component.java:4731)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

课程代码： http: [//pastebin.com/RijdmTe0](http://pastebin.com/RijdmTe0)

# jakarta-ee - 在生产部署时使用 liquibase 自动回滚

> ID：14580993
> 
> 赞同：1
> 
> 时间：2013-01-29T10:40:31.850
> 
> 标签：jakarta-ee, maven, liquibase

我在带有 liquibase-maven-plugin 的 java ee 项目中使用工具 liquibase 进行数据库更改。到目前为止，我在本地机器上进行了尝试，但需要在生产中进行下一步。

本地我可以进行更新、回滚、将标签作为一种检查点和替换备份。更新已经完全自动化。它在项目运行之前执行：

```
<plugin>
  <groupId>org.liquibase</groupId>
  <artifactId>liquibase-maven-plugin</artifactId>
  <version>2.0.5</version>
  <configuration>
    ..
  </configuration>
  <executions>
    <execution>
      <phase>process-resources</phase>
      <goals>
        <goal>update</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

我可以进行回滚并将标签放在命令行中，例如：

```
mvn liquibase:tag -Dliquibase.tag=release1
mvn liquibase:rollback -Dliquibase.rollbackTag=release1 
```

在生产服务器上，我希望一切都完全自动化。当部署失败并且我需要返回项目的原始版本时，我主要对 db-rollbacks 感兴趣。
设置标签应该像[如何在 liquibase 中将变更集标记为回滚中](https://stackoverflow.com/questions/11131978/how-to-tag-a-changeset-in-liquibase-to-rollback)所述那样工作。

但是如何完全自动化地管理回滚呢？

1.  是否也可以制定回滚目标？如果是：我如何控制它的执行时间？我不想在项目中意外创建一个循环，调用更新和回滚无穷无尽。

通常的做法是：backup1、update、run。如果失败，您将返回备份 1。这是自动可能的吗？恐怕一旦发生故障（在运行项目时），您将无法再自动执行回滚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:41:37.603

我不相信在 Maven 中动态启用/禁用插件执行是可能的。您必须提前知道更新是否成功，当然您不会。

但是，您可以在[Ant](http://ant.apache.org/)中执行此操作，方法是在更新过程运行后设置成功/失败属性。[您可以通过Maven AntRun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)轻松地将 Ant 脚本连接到 Maven 。

# c#-4.0 - 多页打印

> ID：14580995
> 
> 赞同：1
> 
> 时间：2013-01-29T10:40:38.293
> 
> 标签：c#-4.0, printing

谁能建议我在 Windows 窗体 c# 应用程序中打印多个文档的最佳方式是哪一种？我可以打印单个文档，但是当它出现多个文档时会变得害怕......

# php - 使用GD的图像边框

> ID：14580996
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:40:38.743
> 
> 标签：php, joomla2.5

这是我的验证码图片脚本

```
 $width              = 100;
    $height             = 40;
    $im                 = @ImageCreate((int)$width, (int)$height);

    $bg                 = ImageColorAllocate($im, 255, 255, 255);

    $border             = ImageColorAllocate($im, 100, 120, 180);

    $text               = base64_decode($_GET["key"]);

    $textcolor          = ImageColorAllocate($im,20,40,75);

    for( $i=0; $i<($width*$height)/5; $i++ ) {
        imagefilledellipse($im, mt_rand(0,$width), mt_rand(0,$height), 1, 1, $border);
    }
    for( $i=0; $i<($width*$height)/1000; $i++ ) {
        imageline($im, mt_rand(0,$width), mt_rand(0,$height), mt_rand(0,$width), mt_rand(0,$height), $border);
    }

//  $font               = 10;
    $font               = $height * 0.28;

    $font_width         = ImageFontWidth($font);
    $font_height        = ImageFontHeight($font);

    $text_width         = $font_width * strlen($text);

    $position_center    = ceil(($width - $text_width) / 2);

    $text_height        = $font_height;

    $position_middle    = ceil(($height - $text_height) / 2);

    $textbox = imagettfbbox($font, 0, $font_fam, $text) or die('Error in imagettfbbox function');
    $x = ($width - $textbox[4])/2;
    $y = ($height - $textbox[5])/2;
    imagettftext($im, $font, 0, $x, $y, $textcolor, $font_fam , $text) or die('Error in imagettftext function');
//  ImageString($im, $font, $position_center, $position_middle, $text, $textcolor);
    Imagepng($im);
    header("Content-type: image/png");
    imagedestroy($im); 
```

图像显示成功，我需要为此图像显示边框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:42:36.947

您可以`ImageRectangle($im, 0, 0, $width - 1, $height - 1, $color);`在变量之后添加`$textcolor`. 我想这可能会对你有所帮助。

# jsf - Richfaces嵌套手风琴中的空指针异常

> ID：14580997
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:40.077
> 
> 标签：jsf, jsf-2, richfaces

我正在使用 Richfaces 4.2.2，并尝试使用它来实现嵌套手风琴。相同的 Facelet 代码如下：

```
<h:form id="accordForm">
    <rich:accordion switchType="client" activeItem="#{projectCreation.activeTab}">
        <c:forEach var="proj" items="#{projectCreation.projects}">
            <rich:accordionItem name="#{proj.description}">
                <f:facet name="header">#{proj.description}</f:facet>
                <h:form>
                    <rich:accordion switchType="client" activeItem="#{projectCreation.activeModuleTab}" rendered="#{proj.modules[0]!=null}">
                        <c:forEach var="mdle" items="#{proj.modules}">
                            <rich:accordionItem name="#{mdle.description}">
                                <f:facet name="header">#{mdle.description}</f:facet>
                                <t:dataList var="subMdle" value="#{mdle.subModules}" layout="unorderedList">
                                    <h:outputText value="#{subMdle.description}"></h:outputText>
                                </t:dataList>
                            </rich:accordionItem>
                        </c:forEach>
                    </rich:accordion>
                </h:form>
            </rich:accordionItem>
        </c:forEach>
    </rich:accordion>
</h:form> 
```

但是我得到`NullPointerException`了，错误日志如下：

```
java.lang.NullPointerException
    org.richfaces.component.AbstractAccordion.getActiveItem(AbstractAccordion.java:66)
    org.richfaces.component.AbstractTogglePanel.encodeBegin(AbstractTogglePanel.java:166)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1777)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276)
    org.richfaces.renderkit.html.TogglePanelItemRenderer.doEncodeChildren(TogglePanelItemRenderer.java:136)
    org.richfaces.renderkit.html.AccordionItemRenderer.doEncodeChildren(AccordionItemRenderer.java:93)
    org.richfaces.renderkit.RendererBase.encodeChildren(RendererBase.java:157)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276)
    org.richfaces.renderkit.html.TogglePanelRenderer.doEncodeChildren(TogglePanelRenderer.java:127)
    org.richfaces.renderkit.RendererBase.encodeChildren(RendererBase.java:157)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:286)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:341)
    com.hcl.common.filter.MySessionFilter.doFilter(MySessionFilter.java:90)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:08:35.190

删除 activeItem 属性并将 id 属性设置为 rich:accordion。为我工作。祝你好运！

# android - android 使用 javamail smtp 发送邮件给 authenticationfailure

> ID：14580998
> 
> 赞同：0
> 
> 时间：2013-01-29T10:40:41.293
> 
> 标签：android, smtp, jakarta-mail

我正在尝试使用 javamail 和 smtp 发送邮件。当我从我的 gmail 地址发送时，它对我有用。我更改了相同的代码以从我的交换帐户发送，但它不起作用。我收到身份验证失败异常。

**代码**

```
public class GmailSender extends javax.mail.Authenticator {   
private String mailhost = "smtp.company.com";   
private String user;   
private String password;   
private Session session;   

static {   
    Security.addProvider(new JSSEProvider());   
}  

public GmailSender(String user, String password) {   
    this.user = user;   
    this.password = password;   

    Properties props = new Properties();   
    props.setProperty("mail.transport.protocol", "smtp");   
    props.setProperty("mail.host", mailhost);   
    props.put("mail.smtp.auth", "true");   
    props.put("mail.smtp.port", "465");   
    props.put("mail.smtp.socketFactory.port", "465");   
    props.put("mail.smtp.socketFactory.class",   
            "com.example.javamailtestpreetha.AlwaysTrustSSLContextFactory");   
    props.put("mail.smtp.socketFactory.fallback", "false");   
    props.setProperty("mail.smtp.quitwait", "false");   

     session = Session.getInstance(props, new GMailAuthenticator(user, password));
   // session = Session.getDefaultInstance(props, this);   
} 
```

我尝试使用默认端口，即 25 ，那次我收到错误指示错误的端口号。所以我假设端口号是正确的。我尝试了 ping 主机及其工作。我试过的用户名`domain/username, username, username@company.com`。但总是得到同样的例外。请帮我解决这个问题。

提前致谢

我设置调试并得到以下日志。它告诉不正确的身份验证数据。我确定我的登录名和密码是正确的。谁能帮我输入用户名？

是`username`或`domain\username`还是`domain/username`或`username@mycompanyaddress.com`或别的什么？我怀疑这可能是一个问题。

我尝试添加`props.put("mail.imap.auth.plain.disable", "true");`但失败并出现相同的**错误**

* * *

> 01-29 17:50:46.958: I/System.out(3898): 220-mycompany.servername.com ESMTP Exim 4.80 #2 2013 年 1 月 29 日星期二 16:50:51 +0300 01-29 17:50:46.958 : I/System.out(3898): 220-我们不授权使用此系统来传输未经请求的，01-29 17:50:46.958: I/System.out(3898): 220 和/或批量电子邮件。01-29 17:50:46.962：I/System.out(3898)：调试 SMTP：连接到主机“smtp.mail.mycompany.com”，端口：465 01-29 17:50:46.962：I/System。 out(3898): EHLO localhost 01-29 17:50:46.989: I/StatusBarPolicy(218): onSignalStrengthsChanged 01-29 17:50:47.220: I/System.out(3898): 250-mycompany.servername.com 你好本地主机 [80.227.5.70] 01-29 17:50:47.220: I/System.out(3898): 250-SIZE 52428800 01-29 17:50:47.220: I/System.out(3898): 250-8BITMIME 01 -29 17:50:47.220：I/System.out（3898）：250-流水线 01-29 17:50:47.220：I/System。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:30:03.067

尝试打开[会话调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)。也许协议跟踪会提供更多线索。

如果您使用的是 Exchange 2007，您可能会遇到[JavaMail wiki](http://kenai.com/projects/javamail/pages/Exchange)上描述的 AUTH=PLAIN 错误。

# javascript - 我正在为请求我的第一个网站的任何人设置我的第二个网站的 cookie

> ID：14580999
> 
> 赞同：2
> 
> 时间：2013-01-29T10:40:44.050
> 
> 标签：javascript, cookies, jsonp

好的，所以我在affiliatedomain.com 有一个域，它实际上只是我的主网站maindomain.com 的附属版本。

我们要求在用户第一次访问affiliatedomain.com 时在浏览器上设置maindomain.com cookie。这目前是通过服务器端 302 重定向到 maindomain.com/addcookie?redirect=affiliatedomain.com 实现的，然后执行 301 重定向回affiliatedomain.com。

由于以下几个原因，这显然不是理想的，a) 因为它执行不必要的客户端重定向，b) 它使 maindomain.com 对 url 重定向安全漏洞保持开放。

我已经通过 XHR 研究了通过在 maindomain.com 上执行 javascript GET 来实现这一点，但这需要打开**Access-Control-Allow-Origin**，这不是所有版本的 IE 都支持的（我们需要支持IE6 和 7）。

那么有什么办法可以达到这个要求吗？我已经研究过 JSONP，但不太确定如何使用这种方法实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:28:17.697

我找到了一种方法来做到这一点。我在 maindomain.com 上设置了一个控制器操作，以返回带有端点 maindomain.com/setcookie.mvc 的 JavaScript() 类型的 ActionResult。然后从affiliatedomain.com 我添加了一个指向这个端点的标签。

然后，客户端将对 setcookie.mvc 页面执行 GET（因为相同的域策略不适用于标签），这反过来又允许我执行我需要的任何服务器端 cookie 逻辑。