# StackOverflow 问答 15934000-15934999

# c - 屏蔽信号的原因？

> ID：15934001
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:49:32.950
> 
> 标签：c, signals, masking

所以这根本不是代码相关的，只是概念上的。进程在执行过程中的任何时候屏蔽信号的一些原因是什么？我得到了信号和屏蔽的概念，只是想不出任何屏蔽信号的具体例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:57:21.560

一个例子：父进程派生一个孩子，不关心孩子是否/何时死亡，并且不想在执行阻塞操作时被打断......所以它屏蔽了`SIGCHILD`.

但是你的问题对于这个论坛来说实在是太宽泛了。

# mysql - SQL 查询产生错误的计数结果

> ID：15934002
> 
> 赞同：2
> 
> 时间：2013-04-10T18:49:34.737
> 
> 标签：mysql, sql

我有以下 SQL 查询

```
SELECT
  DISTINCT
  count("SiteTree_Live"."ID") 
FROM  
  "SiteTree_Live"
  LEFT JOIN "Page_Live" ON "Page_Live"."ID" = "SiteTree_Live"."ID"
  LEFT JOIN "TourPage_Live" ON "TourPage_Live"."ID" = "SiteTree_Live"."ID"
  LEFT JOIN "DepartureDate" ON "DepartureDate"."TourID" = "SiteTree_Live"."ID"
WHERE 
  ("SiteTree_Live"."Locale" = 'en_AU')
  AND ("SiteTree_Live"."ClassName" IN ('TourPage'))
  AND ("DepartureDate"."DepartureDate" LIKE '2012-11%') 
```

但它产生错误的计数作为查询结果。假设此查询返回的总预期结果不应超过 245，但目前，它返回的结果超过了大约“4569”。

那是因为“DepartureDate”表上的 JOIN，因为当我从“DepartureDate”表中删除连接时，查询返回预期结果。

我需要对查询进行哪些修改以计算“SiteTree_Live”。“ID”和“DepartureDate”。“TourID”之间的 Macthes，而仅计算“SiteTree_Live”。“ID”计数，不包括出发日期？

欢迎任何建议:)

答案

```
SELECT 
COUNT(DISTINCT SiteTree_Live.ID) 
FROM 
"SiteTree_Live" LEFT JOIN "Page_Live" ON "Page_Live"."ID" = "SiteTree_Live"."ID" 
LEFT JOIN "TourPage_Live" ON "TourPage_Live"."ID" = "SiteTree_Live"."ID" 
LEFT JOIN "DepartureDate" ON "DepartureDate"."TourID" = "SiteTree_Live"."ID" 
WHERE 
("SiteTree_Live"."Locale" = 'en_AU') 
AND ("SiteTree_Live"."ClassName" IN ('TourPage'))
AND ("DepartureDate"."DepartureDate" LIKE '2013-03%') 
```

似乎给了我正确的结果。感谢@Michael Berkowski 的提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:25:32.520

这样做（你有一堆不需要的连接）

```
SELECT 
  COUNT(DISTINCT SiteTree_Live.ID) 
FROM 
  `SiteTree_Live`
LEFT JOIN 
  `DepartureDate` ON `DepartureDate`.`TourID` = `SiteTree_Live`.`ID` 
WHERE 
  `SiteTree_Live`.`Locale` = 'en_AU'
  AND `SiteTree_Live`.`ClassName` = 'TourPage'
  AND `DepartureDate`.`DepartureDate` LIKE '2013-03%' 
```

你也可以做一个 GROUP BY：

```
SELECT 
  COUNT(SiteTree_Live.ID) 
FROM 
  `SiteTree_Live`
LEFT JOIN 
  `DepartureDate` ON `DepartureDate`.`TourID` = `SiteTree_Live`.`ID` 
WHERE 
  `SiteTree_Live`.`Locale` = 'en_AU'
  AND `SiteTree_Live`.`ClassName` = 'TourPage'
  AND `DepartureDate`.`DepartureDate` LIKE '2013-03%'
GROUP BY
  SiteTree_Live.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:35:42.167

次要更正：如果`DepartureDate`是日期类型，`LIKE '2013-03%`则将强制将其强制转换为字符类型（这是 mysql*功能*）因此，`DepartureDate`不会使用任何索引，IIRC。更好地使用普通的范围查询：

```
SELECT 
  COUNT(DISTINCT stl.ID) 
FROM 
  SiteTree_Live stl
LEFT JOIN 
  DepartureDate dd ON dd.TourID = stl.ID 
WHERE 
  stl.Locale = 'en_AU'
  AND stl.ClassName = 'TourPage'
  AND dd.DepartureDate >= '2013-03-01'
  AND dd.DepartureDate < '2013-04-01'
   ; 
```

# javascript - 如何正确调用“f.prototype”？

> ID：15934003
> 
> 赞同：0
> 
> 时间：2013-04-10T18:49:42.243
> 
> 标签：javascript, nomenclature

给定一个javascript函数

```
var f = function(); 
```

据我了解，我称之为`Object.getProtoypeOf(f)`“f的原型”。

什么是正确的术语`f.prototype`？

“使用 f 作为构造函数构造的 Prototype 对象将得到”听起来有点冗长；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:06:37.340

在这里查看：http: [//jsfiddle.net/UCmW8/](http://jsfiddle.net/UCmW8/)

```
var Person = function(name) {
    this.name = name;
}

Person.prototype.sayHi = function() {
    alert(this.name + ' says hi!');
};

var matt = new Person('Matt');
matt.sayHi() // alerts 'Matt says hi!'

console.log('matt.prototype',                matt.prototype);
console.log('Object.getPrototypeOf(matt)',   Object.getPrototypeOf(matt));
console.log('Person.prototype',              Person.prototype);
console.log('Object.getPrototypeOf(Person)', Object.getPrototypeOf(Person)); 
```

这会产生什么？

![原型输出](https://i.stack.imgur.com/sJjc4.png)

首先`matt.prototype`是`undefined`。函数有一个原型对象，当该函数用作构造函数时，实例可以使用它的属性，但实例本身没有`prototype`属性。

`Object.getPrototypeOf(matt)`找到真正的原型。如您所见，这与`Person.prototype`. 它允许您获取原型，而无需引用构造函数。

最后，如果我们尝试，`Object.getPrototypeOf(Person)`我们会得到一些奇怪的东西。我们的构造函数，毕竟是一个函数。将您创建的函数视为某些`Function`构造函数的实例，并具有自己的原型。因此，当您执行此操作时，您正在获取*所有函数的原型对象。*

# ios - NSLogs 如何导致代码不崩溃？

> ID：15934004
> 
> 赞同：10
> 
> 时间：2013-04-10T18:49:43.033
> 
> 标签：ios, core-data

我今天遇到了一个相当有趣的 exc_bad_access 崩溃。经过大量挖掘，我想出了以下信息（在模拟器中运行）：

如果我只是运行代码，应用程序会在将数据加载到我的托管对象时随机崩溃。据我所知，当我将数据加载到托管对象时，它总是崩溃——而不是从我的 JSON dict 转换为数据到实际使用的对象的部分（从字符串和 NSNulls 到 ints/floats 和 nils）

当然，随机崩溃是邪恶的，所以我尝试在调试器中逐步完成该过程，但这并没有被证明是实际的——我正在处理很多对象，所以一个接一个地通过它们只是没有不工作。所以我决定添加一些 NSLogs 来跟踪这个过程并尝试以这种方式发现一个模式。

瞬间解决了崩溃问题。

过程中的任何地方只有一个 NSLog 防止了崩溃。

我最终追踪了堆栈跟踪并发现了实际问题：我在线程环境中访问托管对象，但不是从关联的 MOC 的 performBlockAndWait: 方法中访问。那时，崩溃对我来说非常明显——我很震惊我之前没有遇到更多问题。我敢打赌，在拥有 2-3 个对象的“小型”测试数据集和使用 NSLogs 在那里调试代码之间，错误在早些时候被非常有效地掩盖了......但问题仍然存在：

为什么 NSLog 可以防止应用程序崩溃？一段没有副作用的代码究竟如何改变应用程序其余部分的执行？这没有任何意义！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T18:53:58.637

令人惊讶的是，这是一种相当普遍的情况：我不止一次看到它在看似无关的地方启用登录会立即解决其他地方的时间问题。

这样做的原因是`NSLog`，就像许多其他输出函数一样，具有内部同步。某处有一个互斥锁，可以保护对 的内部缓冲区的访问`NSLog`，无论是在它`NSLog`本身还是在它使用的一个 I/O 库中。这种同步使调用者能够`NSLog`从多个线程中使用。正是这种同步改变了程序的时间，影响了竞争条件并最终解决了崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:53:18.577

> 为什么 NSLog 可以防止应用程序崩溃？一段没有副作用的代码究竟如何改变应用程序其余部分的执行？这没有任何意义！

确实，这是有道理的。真的。

一个单一的`NSLog`力量将某些东西打印到您的控制台，它需要几秒钟的时间，并且在您对某个线程的处理完成和崩溃（可能是由于输入不可用）之间不再存在。

您的错误可能是由于异步调用。您的下一个过程在完成前一个过程之前开始。而您的下一个流程需要来自 previos 流程的数据。`NSLog`消耗一些时间。

# html - Ruby on rails 按钮的作用类似于复选框

> ID：15934005
> 
> 赞同：0
> 
> 时间：2013-04-10T18:49:50.977
> 
> 标签：html, ruby-on-rails

我是 RoR 的真正菜鸟，并且缺少其中的基本编程概念。

我创建了一个包含 3 个布尔字段和相应的显示/编辑/删除等的表。

默认情况下，我有用于更改/创建这些布尔字段的复选框。

问：我想创建一个按钮而不是复选框，它的作用类似于复选框，在“选中”或“未选中”的情况下，它会在按钮上设置相应的颜色/图像。

编辑：对于那些否认这一点的人 - 如果这对你来说如此微不足道，至少告诉我这个问题有什么问题

干杯阿莱杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:26:12.490

您似乎只是想为复选框赋予不同的样式。虽然这可以通过直接编写 CSS 来完成，但您最好使用像 Bootstrap 或 jQuery-UI 主题这样的前端框架，它会为您完成，并带有一些预定义的样式。

[引导程序](http://twitter.github.io/bootstrap/)

[jQuery UI 主题](http://jqueryui.com/themeroller/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:17:29.217

您可以使用 css 使大多数东西看起来像大多数东西：

[CSS：将复选框设置为看起来像按钮，是否有悬停？](https://stackoverflow.com/questions/7642277/css-styled-a-checkbox-to-look-like-a-button-is-there-a-hover)

# php - 从 URL 裁剪图像

> ID：15934010
> 
> 赞同：1
> 
> 时间：2013-04-10T18:50:17.653
> 
> 标签：php, jquery, image, url, crop

嗨，我一直在使用 iTunes API，我所做的是将搜索返回的数据保存到数据库中。我正在将 iTunes 图像 URL 保存到我的数据库中，我想知道使用 PHP 从 URL 中裁剪图像的最佳方法是什么，或者在我在网站上显示图像之前使用 jQuery 裁剪图像更好? 提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:57:38.157

使用 jQuery 和 php 裁剪图像的完整分步教程（包括现场演示）

[http://www.script-tutorials.com/image-crop-plugin-using-jcrop-jquery/](http://www.script-tutorials.com/image-crop-plugin-using-jcrop-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:58:44.360

最好将裁剪后的版本裁剪并存储在服务器上，这样图像加载速度更快，并且可以节省大量带宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:59:23.223

您可能会想要在服务器端裁剪图像。裁剪客户端意味着客户端将不得不加载整个图像，这将减慢页面加载速度（可能很多，具体取决于图像的大小）。

裁剪服务器端意味着您必须将裁剪的图像保存到您的服务器并从那里提供它们。这比仅在客户端进行裁剪更痛苦，但最终对您的用户可能会更好。

由于您使用的是 PHP，因此您需要[ImageMagick](http://php.net/manual/en/imagick.cropimage.php)。

# java - 错误： 预期的

> ID：15934012
> 
> 赞同：0
> 
> 时间：2013-04-10T18:50:23.567
> 
> 标签：java

当我尝试编译 Report.java 时，我在第 6 行收到错误消息：`error: <identifier> expected aClient.setClientName("Michael");`带有和箭头指向第一个括号。

```
public class Client {

    private String _clientName;

    public String getClientName(){
        return _clientName;
    }
    public void setClientName(String clientName){
        _clientName = clientName;
    }

}
public class Report {

    Client aClient = new Client();
    //ClientLawn aClientLawn = new ClientLawn();

    aClient.setClientName("Michael");
    //aClientLawn.setLawnWidth(10);
    //aClientLawn.setLawnLength(10);

    public void output(){
        System.out.println(aClient.getClientName());
        //System.out.println(aClientLawn.calcLawnSize());
    }

} 
```

我还想说明我是 Java 新手，所以请保持温和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:52:31.387

使用`instance initialization block`.

```
public class Report {

    Client aClient = new Client();
    //ClientLawn aClientLawn = new ClientLawn();
    {
        aClient.setClientName("Michael");
        //aClientLawn.setLawnWidth(10);
        //aClientLawn.setLawnLength(10);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:53:22.360

此行应放入初始化程序块中：

```
{
    aClient.setClientName("Michael");
} 
```

所以它在创建`aClient`.

此处的代码针对`Report`. 不幸的是，您无法为其设置参数。如果您想这样做，请将此块放入构造函数中：

```
public Report (String clientName) {
    aClient.setClientName(clientName);
    //aClientLawn.setLawnWidth(10);
    //aClientLawn.setLawnLength(10);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:04:27.660

正如其他人指出的那样，您不能在方法之外执行代码，因此以下行是非法的：

```
Client aClient = new Client();
aClient.setClientName("Michael"); 
```

它们需要包装在方法中，例如类的构造函数：

```
public class Report {
    public Report() {
        Client aClient = new Client();
        aClient.setClientName("Michael");
    }

    // ....
} 
```

看起来您希望此代码是可执行的，在这种情况下，您希望将所有这些放在一个`main`方法中，例如：

```
public class Report {
    public static void main(String... args) {
        Client aClient = new Client();
        aClient.setClientName("Michael");
        System.out.println(aClient.getName());
    }
} 
```

然后，您可以编译并执行`Report`该类。

# clojure - Let形式的从左到右的装订顺序

> ID：15934015
> 
> 赞同：1
> 
> 时间：2013-04-10T18:50:28.403
> 
> 标签：clojure, let, destructuring

我正在[研究 Clojure](http://www.joyofclojure.com/)中的一个解构示例，并且遇到了一个令我惊讶的示例。这两个产生相同的输出：

```
(let [range-vec (vec (range 10)) [a b c & more :as all] range-vec]
        (println "a b c: " a b c)
        (println "more: " more)
        (println "all: " all))

(let [range-vec (vec (range 10))]
    (let [[a b c & more :as all] range-vec]
        (println "a b c: " a b c)
        (println "more: " more)
        (println "all: " all))) 
```

现在最初第一种形式与我的直觉相反，因为认为绑定和优先级从左到右发生，在分配给“all”之前不会定义 range-vec。我的第二种形式，range-vec已经定义好了，然后在第二个let语句中赋值给all，这似乎是遵循我目前所知道的规则。我什么时候知道符号何时被绑定以及发生的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:15:23.670

根据[Clojure 文档](http://clojure.org/special_forms#Special%20Forms--%28let%20%5Bbindings%2a%20%5D%20exprs%2a%29)：

> 绑定是顺序的，因此每个绑定都可以看到之前的绑定。

你是 Lisp 或 Scheme 程序员吗？Clojure在这方面`let`就像`let*`在 CL 或 Scheme 中。

# c - 数据类型：C 中的浮点、长转换

> ID：15934018
> 
> 赞同：0
> 
> 时间：2013-04-10T18:50:33.517
> 
> 标签：c, floating-point, ieee-754, type-conversion

我正在阅读 C prime plus，在第 3 章，数据类型中，作者说：

如果您采用表示浮点数 256.0 的位模式并将其解释为长值，您将得到 113246208。

我不明白转换是如何工作的。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:53:09.810

该引用的重要之处在于整数/长整数和浮点数以不同的格式保存在内存中，因此您不能简单地拿起一些有浮点数的内存并说现在它是一个整数并获得正确的值.

可以在搜索 IEEE 标准中找到有关如何将每种数据类型保存到内存中的细节，但这也可能不是引用的目标。它试图告诉您的是，浮点数和整数是使用不同的模式保存的，您不能简单地将浮点数用作整数，反之亦然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:20:55.627

256.0 是 1.0*2 ⁸，对吗？

现在，查看格式（从@bash.d 中窃取）：

```
31                             0
|                              |
SEEEEEEEEMMMMMMMMMMMMMMMMMMMMMMM //S - SIGN , E - EXPONENT, M - MANTISSA 
```

这个数字是正数，所以`0`进入`S`。

指数 ,`8`进入`EEEEEEEE`但在它进入之前，您需要`add 127`按照格式的要求进入它，所以`135`去那里。

现在，`1.0`只有点右边的内容实际存储在 中`MMMMMMMMMMMMMMMMMMMMMMM`，所以 0 去那里。格式中表示的`1.`大多数数字都是隐含的，实际上并没有存储在格式中。

这里的想法是所有非零数的绝对值都可以转换为

    1.0...1.111(1) * 10^(一些整数)（所有数字都是二进制）

或几乎等效

    1.0...1.999(9) * 2^(一些整数)（所有数字都是十进制）

这就是我在回答的顶部所做的。转换是通过重复将数字除以 2 来完成的，直到你得到十进制范围 [1.0, 2.0) （或二进制 [1.0, 10.0) 中的尾数）。既然这个 1 总是在一个非零的数字中，为什么要存储它呢？因此它不会被存储，并为您提供另一个免费`M`位。

所以你最终得到：

```
(0 << 31) + ((8 + 127) << 23) + 0 = 1132462080 
```

格式在[此处](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:57:01.137

虽然整数和长值通常使用二进制补码表示，但- 值`float`具有特殊的编码，因为您不能告诉计算机仅使用位来显示浮点值。一个 32 位浮点数包含一个符号位、一个尾数和一个指数。这些共同决定了`float`它的价值。
请参阅[此处](http://en.wikipedia.org/wiki/IEEE_floating_point)的文章。

**编辑**

所以，这就是 IEEE 754 编码的浮点数的样子（32 位）

```
31                             0
|                              |
SEEEEEEEEMMMMMMMMMMMMMMMMMMMMMMM //S - SIGN , E - EXPONENT, M - MANTISSE 
```

我不知道 的模式`256.0`，但 long 值将被纯粹解释为

```
31                             0
|                              |
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB // B - BIT 
```

所以没有“转换”，而是不同的解释。

# solr - 从 Solr 数组中只获取一个匹配的行

> ID：15934020
> 
> 赞同：0
> 
> 时间：2013-04-10T18:50:35.397
> 
> 标签：solr

如何仅获得与我的查询匹配的行： ?q=taxonomy_ids:1/636/*

得到了这个结果：

![](https://i.stack.imgur.com/az9EU.png)

只想要：`<str>1/636/587</str>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:16:09.003

没有简单的方法。但是，有一个技巧，您可以使用匹配荧光笔并使用这些结果而不是搜索本身返回的结果。您可能希望将 PRE/POST 高亮标记配置为空字符串。网上有一篇关于某处的文章，但我找不到了。

缺点是你会得到两次结果。一次作为文档，一次作为突出显示。

另一个选项是挂钩到 Lucene 的解释结构的自定义组件。

# button - 从 netbeans 工具栏按钮运行脚本

> ID：15934023
> 
> 赞同：0
> 
> 时间：2013-04-10T18:50:43.880
> 
> 标签：button, netbeans, toolbar

我使用教程创建了一个新的工具栏按钮：[创建工具栏按钮](https://platform.netbeans.org/tutorials/71/nbm-google.html)
但是，它没有说明如何使用该按钮运行脚本。从“创建工具栏”开始，它与我需要的方向不同。

我只需要一个非常非常简单的操作，即在 netbeans 终端中运行一个 shell 脚本。

我如何让它从按钮运行这个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:12:13.943

在您链接到的示例中，您需要将您的逻辑放在 GoogleAction.java 中。具体来说，这部分代码是您需要处理按钮按下的地方。

```
public void actionPerformed(ActionEvent e) {
    // TODO implement action body
} 
```

如果要在其中运行脚本，则需要编写 java 来执行此操作：

```
ProcessBuilder pb = new ProcessBuilder("/path/to/script.sh", "arg1", "arg2");
Map<String, String> env = pb.environment();
env.put("TestEnvValue", "value");
pb.directory(new File("myDir"));
Process p = pb.start(); 
```

# linq - 在 Linq 表达式中使用变量

> ID：15934026
> 
> 赞同：0
> 
> 时间：2013-04-10T18:50:57.897
> 
> 标签：linq

我正在编写一个 Linq 查询，其中我的对象在我的视图中构建了一个网格（表）。

```
filteredProducts =
    filteredProducts.Take(take)
                    .Skip(pagesToSkip)
                    .OrderBy(w => w.ProductName)
                    .ToList(); 
```

按照非常常见的模式；根据单击的列标题，网格可以“排序”不同的列。我需要替换硬编码的“ProductName”，以便可以包含任何可能的列名。该[解决方案可能基于this question提出的方法，](https://stackoverflow.com/questions/958220/how-can-i-use-linq-to-sort-by-multiple-fields)但我的用例足够不同，以至于我还无法实现任何东西。SO的自动建议没有提供任何其他看起来很奇怪的明显问题，因为这肯定是一个常见问题。

我已经尝试了明显的：

```
var mySortColumn = "w.ProductId"; 
```

然后：

```
.OrderBy(w => mySortColumn) 
```

并且不会收到编译或运行时投诉，但也不尊重指定值。我尝试过的其他变体会立即抛出编译器错误。

[本文建议我应该使用 SWITCH/CASE 构造](http://msdn.microsoft.com/en-us/library/vstudio/bb513731.aspx)来为每个可能的“OrderBy”子句构建一个完全不同的查询。虽然我通常不会对黑客行为嗤之以鼻，但是；伊克。

看起来我们离动态 SQL 时代的“构建字符串”时代还没有那么远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:59:26.957

该`OrderBy`方法需要一个`Func<Type,int>`委托。这意味着您可以执行以下操作：

```
using System;
using System.Collections.Generic;
using System.Linq;
class Program
{

    static void Main(string[] args)
    {
        var foos = new List<Foo>()
        {
            new Foo { A = 1, B = 2 },
            new Foo { A = 2, B = 1 }
        };

        Func<Foo, int> a = f => f.A;
        Func<Foo, int> b = f => f.B;

        bool orderByA = false;

        Display(foos.OrderBy(orderByA ? a : b));
    }

    private static void Display(IEnumerable<Foo> foos)
    {
        foos.ToList().ForEach(f => Console.WriteLine(f));
    }
}

class Foo
{
    public int A { get; set; }
    public int B { get; set; }

    public override string ToString()
    {
        return A + " " + B;
    }
} 
```

如果您真的希望能够对属性名称进行排序，则需要创建一些代码来`Expression`从您的`string`.

# php - php从url检查日期时间

> ID：15934032
> 
> 赞同：0
> 
> 时间：2013-04-10T18:51:17.303
> 
> 标签：php

URL 中的日期和时间应采用 YYYY-MM-DD-HH-II-SS 格式。我想检查它的正确性并以mysql时间戳格式的列插入数据库。

1）`$timestamp = $this->input->get('time_from')`我从网址收到它。

2）在插入数据库之前，我尝试打印它。

```
 if (! empty($timestamp)) {
        $timestamp = date_create_from_format('Y-m-d-H-i-s', $timestamp);
        if (! $timestamp)
            echo date_format($timestamp, 'Y-m-d H:i:s');
     } 
```

3）我得到那一年可能是在 1970 年之前，例如 1950-01-01-10-32-01 通过这个检查是正确的。但是在 mysql 列中插入这样的日期是不可能的。4) 我得到 2012-02-31-10-00-00 在 2012-03-02 10:00:00 自动转换。

问题是：如何避免这些令人困惑的自动转换？提供此类检查的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:54:34.437

您不能在 MySQL TIMESTAMP 列中存储 1970 年之前的日期。请改用 DATETIME。[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-types.html](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-types.html)

您可以使用[checkdate()](http://php.net/manual/en/function.checkdate.php "检查日期")函数来查看日期是否有效。

# angularjs - 替换Angular中的子节点

> ID：15934035
> 
> 赞同：1
> 
> 时间：2013-04-10T18:51:33.910
> 
> 标签：angularjs, angularjs-scope

我正在处理一棵数据树。从任何给定节点，我可能需要添加一个从 RESTful 服务器返回的子节点。数据开始看起来像这样……</p>

```
[{ "text":"Apples", "id":1, "childNodes":[] },
 { "text":"Boxes", "id":2, "childNodes":[] },
 { "text":"Cups", "id":3, "childNodes":[] }] 
```

然后我写了一个“id:1”的帖子，它返回……</p>

```
[{ "text":"Apples", "id":1, "childNodes":[
    { "text":"first Apple", "id":'1a', "childNodes":[] },
    { "text":"second Apple", "id":'1b', "childNodes":[] },
    { "text":"third Apple", "id":'1c', "childNodes":[] }
  ]
}] 
```

…这是请求节点的完全替代品。我让 Angular 正确布置模型，接受数据更改，将这些更改发布到服务器，并接受最后一个 JSON blob。惊人的。但我不确定如何用新数据更新 $scope。我的视图看起来像这样……</p>

```
<div ng-repeat="node in data.nodes" >
  <p>{{node.text}}</p>
  <button ng-click="addLoopInstance(node)">Add child nodes</button>
</div> 
```

和控制器……</p>

```
function SurveyController($scope, sampleService) {

    $scope.addLoopInstance = function(node) {
        sampleService.post({ id: node.id }, function(response, getResponseHeaders) {
            // this doesn't work
            node = response;
            // neither does this
            $scope.$apply(function() {
                node = response;
            });
        });
    }

} 
```

有什么想法吗？在此先感谢，Angular 文档是……想要……但我发现用户群非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:16:07.837

只是按照你所说的，我建立了一个示例小提琴：http: [//jsfiddle.net/VXxqM/3/](http://jsfiddle.net/VXxqM/3/)

但是，关于此的两件事，您的`addLoopInstance()`, 如果它确实返回：

```
[{ "text":"Apples", "id":1, "childNodes":[
    { "text":"first Apple", "id":'1a', "childNodes":[] },
    { "text":"second Apple", "id":'1b', "childNodes":[] },
    { "text":"third Apple", "id":'1c', "childNodes":[] }
  ]
}] 
```

然后您需要引用要替换的子节点：

```
node.childNodes = response[0].childNodes; 
```

其次，我不知道你是否只是为了简单起见而遗漏了一些东西，但你的原始`ng-repeat`循环没有解决 childNodes，所以你有它，没有办法判断它是否确实正在更新。不管怎样，看看小提琴，看看我做了什么让它工作。

# objective-c - 使用 ARC 避免这种悬空指针

> ID：15934036
> 
> 赞同：2
> 
> 时间：2013-04-10T18:51:34.240
> 
> 标签：objective-c, automatic-ref-counting

我有一个对象包含对对象的`strong`引用：

```
@property (nonatomic, strong) NSObject *thing; 
```

在其他地方，我有一个传递对象引用的方法：

```
[thirdObject doSomething:secondObject.thing]; 
```

在一种情况下（在一百万或十亿中），thirdObject 最终使用了一个悬空指针，因为该对象被交换并且没有所有者。

我可以通过这样做来避免这种情况吗？这对 ARC 有什么不同吗？

```
NSObject *thing = secondObject.thing
[thirdObject doSomething:secondObject.thing]; 
```

如果没有，我该如何避免这种情况？

**编辑：**消息是“发送到已释放实例 0xwhatever 的消息”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T21:41:22.833

如果不应用某种线程安全，就无法在多个线程上读取和写入属性。现在原则上，对于像字符串这样的简单对象，也许仅仅应用`atomic`就足够了。请参阅[原子属性和非原子属性之间的区别是什么？](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties)更多关于它的作用。

坦白说，我真的很不喜欢`atomic`。我知道它的作用，但它似乎是一种获得你真正想要的东西的繁琐方式（而且往往最终比你想要的要少）。这不是一个非常通用的解决方案；我无法`atomic`“稍微”自定义访问器（例如添加 a`setNeedsDisplay`等）。

这就是为什么我喜欢基于队列的访问器。它们的工作量更大，但它们对很多问题都很有效。

```
@property (nonatomic, readwrite, strong) dispatch_queue_t thingQueue;
@property (nonatomic, strong) NSObject *thing;

- (id)init {
  ...
    _thingQueue = dispatch_queue_create("...", DISPATCH_QUEUE_CONCURRENT);
  ...
}

- (NSObject *)thing {
  __block NSObject *thing;
  dispatch_sync(self.thingQueue, ^{
    thing = _thing;
  });
  return thing;
}

- (void)setThing:(NSObject *)thing {
  dispatch_barrier_async(self.thingQueue, ^{
    _thing = thing;
  });
} 
```

我喜欢这个系统的地方在于，它允许所有读者并行处理。当作者尝试进行更新时，无论涉及多少读者，都可以保证不会饿死。而且它总是很快返回。当值发生变化时，队列中还有一个明确的点，这样在 writer 之前请求 value 的读者总是会得到旧 value，而 writer 之后的读者总是会得到新 value，无论有多少争用在队列中。

关键是getter是同步的，所以会一直等到能拿到值，setter中包含了barrier。屏障意味着“在我运行时，不能从这个队列中安排其他块”。所以你有一堆并行运行的读取器块，然后设置器屏障出现并等待所有读取器完成。然后它单独运行，设置值，然后它后面的读者可以再次并行运行。

# copy - cmd系统找不到文件

> ID：15934038
> 
> 赞同：0
> 
> 时间：2013-04-10T18:51:35.377
> 
> 标签：copy, cmd

我在 cmd 中有一个非常奇怪的结果，当前文件夹是 test ：

```
c:\test> 
```

和

```
c:\test\>dir
10/04/2013  18:06    <REP>          10042013 
```

在文件夹 test 我放了一个 exe：oggenc.exe

```
c:\test\>copy oggenc.exe 10042013 
```

虽然当我复制时系统告诉我它找不到指定的文件

我真的不明白出了什么问题，你能帮帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:14:39.667

```
xcopy /h oggenc.exe 10042013 
```

诀窍，我的文件被隐藏了，这就是为什么复制无法完成这项工作，问题解决了，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:02:36.260

那是因为`c:\test\copy`它不是可执行文件。`copy`是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T18:16:32.983

检查您是否具有适当的权限。在我的测试用例中，我能够创建一个文件夹“C:\test”，但不能将我自己的 %userprofile% 复制到“C:\test”中

当我以管理员身份打开 cmd 时，它工作得很好！

我试图发布一张图片，但显然还没有足够高的代表。对不起。

这是图片的链接，而不是 [http://bit.ly/1ubwjY4](http://bit.ly/1ubwjY4)

# asp.net - 页面范围的默认异常处理程序

> ID：15934040
> 
> 赞同：0
> 
> 时间：2013-04-10T18:51:47.393
> 
> 标签：asp.net, exception-handling

我有一个 ASP.NET 页面，其中包含许多如下所示的事件处理程序：

```
Private Sub btnNextEvent_Click(sender As Object, e As EventArgs) Handles btnNextEvent.Click
    Try
        NextRegistration()            
    Catch ex As Exception
        lblError.Text = ex.Message
    End Try
End Sub 
```

那个小小的 try-except 块在很多（可能有十几个）地方重复出现。

有没有办法定义一个页面范围的“默认”异常处理程序，以便我可以这样说？

```
Private Overrides Sub DefaultHanderIWishIHad(ex As Exception)
    lblError.Text = ex.Message
End Sub

Private Sub btnNextEvent_Click(sender As Object, e As EventArgs) Handles btnNextEvent.Click
    'no need to handle here, because the default handler is just fine...
    NextRegistration()            
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:04:33.720

在一个页面上

```
private void Page_Error(object sender, EventArgs e)
{ /* ... */ } 
```

应用程序：Global.asax

```
void Application_Error(object sender, EventArgs e)
{ /* ... */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:07:43.857

实际上，如果您遇到异常并且没有就地处理，那么您将失去控制 - 从那里您只能重定向并记录错误。

所以我不建议进行全局错误捕获。现在在页面上有一个在异常时调用的函数`OnError`，但我只建议关闭任何打开的处理程序，而不是处理任何错误，因为正如我所说，当你在那里时，你失去了对页面的控制.

```
protected override void OnError(EventArgs e)
{
   base.OnError(e);
} 
```

相对：[如何在我的 ASP.NET 应用程序中创建一个“通用错误”页面，以便它处理在提供该页面本身时触发的错误？](https://stackoverflow.com/questions/10751363/how-do-i-make-a-generic-error-page-in-my-asp-net-application-so-that-it-handle/10751939#10751939)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:41:00.357

甚至您也可以使用 ELMAH [http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)。哪个好，易于配置和处理所有未处理的异常

# php - 在同一查询实例上多次打开模态窗口

> ID：15934043
> 
> 赞同：0
> 
> 时间：2013-04-10T18:51:51.680
> 
> 标签：php, jquery, ajax, modal-dialog

我想我只需要重新处理这段代码。这是我的问题。

我正在调用一个查询来显示类别下的“优惠”列表。然后单击这些链接，它们在 jquery 的模式框中打开。

一切都很好！但是，在不同的类别下，有些优惠是相同的（相同的唯一 ID）。

当页面上有多个报价链接时，如果单击它，它将加载模态窗口两次..因为该页面上有多个实例。

我知道问题出在哪里，但我不知道如何正确编码！我知道我不需要每次在查询中创建或调用脚本？？

谢谢，这是我的查询代码：

```
$line .= '<span class="icon-caret-right"></span> <a id="manual-ajax'.$offer_id.'" href="view.php?o='.$offer_id.'">'.$offer_title.'</a><br />';  

$line .= " <script> $('#manual-ajax$offer_id').click(function(event) {
              event.preventDefault();
              $.get(this.href, function(html) {
              $(html).appendTo('body').modal();

      });
    });

</script>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:07:28.223

问题是您的 ID 不是唯一的，因为它们必须是唯一的。因此，当相同的 ID 再次出现时，您正在将其他点击处理程序绑定到元素。

但是，如果您改用类，则不需要 ID。

```
$line .= '<span class="icon-caret-right"></span> <a class="manual-ajax" href="view.php?o='.$offer_id.'">'.$offer_title.'</a><br />'; 
```

然后编写一个处理程序：

```
$(function() {
    $(".manual-ajax").click(function(event) {
        event.preventDefault();
        $.get(this.href, function(html) {
            $(html).appendTo('body').modal();
        });
    });
}); 
```

# selenium-grid - Selenium Grid2 显示错误

> ID：15934047
> 
> 赞同：1
> 
> 时间：2013-04-10T18:52:07.713
> 
> 标签：selenium-grid

我一直在努力在云中设置 Selenium Grid2，现在我遇到了一个我无法弄清楚的错误。

```
Selenium::WebDriver::Error::UnknownError: Unable to connect to host 127.0.0.1 on port 7057 after 45000 ms. Firefox console output:
  Error: no display specified
  Error: no display specified 
```

我已经启动了两个节点 - Hub 和 WebDriver

```
java -jar selenium-server-standalone-2.32.0.jar -role hub -port 7055
java -jar selenium-server-standalone-2.32.0.jar -role webdriver  -hub http://ec2-54-244-219-84.us-west-2.compute.amazonaws.com:7055/grid/register 
```

我已经安装了 Xvfb 并开始使用屏幕。

```
Xvfb :99 -screen 0 1024x768x24 & 
```

我还设置了显示环境变量。

```
export DISPLAY=:99 
```

我正在尝试在 Amazon EC2 上运行一个简单的测试。

```
require 'headless'
require 'selenium-webdriver'

# Start the headless browser
headless = Headless.new
headless.start
browser = Selenium::WebDriver.for(:remote, :url => "http://localhost:7055/wd/hub")

# Print google.com's title
browser.get('http://google.com')
puts browser.title

# Close the browser
browser.quit
headless.destroy 
```

或者从我的本地机器

```
require 'headless'
require 'selenium-webdriver'

# Start the headless browser
headless = Headless.new
headless.start
browser = Selenium::WebDriver.for(:remote, :url => "http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/wd/hub")

# Print google.com's title
browser.get('http://google.com')
puts browser.title

# Close the browser
browser.quit
headless.destroy 
```

但我仍然收到上述错误...

```
Error: no display specified 
```

此外，当我尝试从命令行运行 FireFox 时...

```
Xlib:  extension "RANDR" missing on display ":99". 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:37:30.167

为我解决此问题的方法是执行以下操作...

而不是像这样运行 webdriver 节点......

```
java -jar selenium-server-standalone-2.32.0.jar -role webdriver  -hub http://ec2-54-244-219-84.us-west-2.compute.amazonaws.com:7055/grid/register 
```

我在命令之前添加了 xvfb-run ...

```
xvfb-run java -jar selenium-server-standalone-2.32.0.jar -role webdriver  -hub http://ec2-54-244-219-84.us-west-2.compute.amazonaws.com:7055/grid/register 
```

# python - ProgrammingError：运算符不存在：整数 = 布尔值

> ID：15934049
> 
> 赞同：0
> 
> 时间：2013-04-10T18:52:09.910
> 
> 标签：python, xml, openerp

```
File "/home/bellvantage/Documents/openerp-7.0/openerp-7.0/openerp/sql_db.py", line 226, in execute
res = self._obj.execute(query, params)
ProgrammingError: operator does not exist: integer = boolean
LINE 1: ...=1,write_date=(now() at time zone 'UTC') where id IN (false)
                                                             ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

我试图覆盖写入功能。因为我还需要更新另一个模型的 (bpl.company.define) 列。所以我使用了 write() 方法。但它给出了上述错误并需要对其进行排序。请给我建议并解释 write() 方法需要传递哪些参数（cr、uid 除外）。

[我在这里](https://github.com/priyankahdp/openerp/blob/master/bpl.py)上传我的模型课。&[在这里](https://github.com/priyankahdp/openerp/blob/master/bpl_view.xml)查看课程。

**bpl.py 中的第 100 行**

**好的，它的排序friend.issue与我在数据库中输入的数据。要读取的数据是null。所以返回false并且错误是这样的:-)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:29:48.880

"now() at time zone .........." 看起来很像 SQL，它应该是一个用双引号括起来的 Python 字符串，而不是裸词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:06:38.243

我认为在文件 bpl.py 中的创建函数中，您得到的 division_id 为 false，您尝试浏览非类型对象的记录，然后尝试写入它。请检查您的 Division_id 是否正确。

# asp.net - 如何从 IHttpResponse 获取响应标头

> ID：15934059
> 
> 赞同：2
> 
> 时间：2013-04-10T18:52:38.677
> 
> 标签：asp.net, servicestack

我希望能够检索响应标头以进行日志记录，但确实在接口上看到了 Headers 属性，但我确实看到了 OriginalResponse。我们应该投射并使用它吗？这会包含 SS 可能注入的任何标头吗？我对该接口的使用是在定义为的全局过滤器中

```
ResponseFilters.Add((httpReq, httpResp, responseDto) =>
{
    // Log portions of the response i.e. Headers
}); 
```

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:11:07.233

httpReq.Headers**与您从**[ASP.NET HttpRequest.Headers](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Extensions/HttpRequestWrapper.cs#L148)或自托管[HttpListenerRequest.Headers](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Extensions/HttpListenerRequestWrapper.cs#L228)获得的实例完全相同。

所以它与手动转换底层请求并直接访问它**完全一样**，例如：

### HttpRequest 标头

对于 ASP.NET

```
var aspNetRequestHeaders = ((HttpRequest)httpReq.OriginalRequest).Headers; 
```

对于 HttpListener：

```
var httpListenerHeaders = ((HttpListenerRequest)httpReq.OriginalRequest).Headers; 
```

### HttpResponse 标头

[当前在IHttpResponse](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpResponse.cs)上没有公开 Headers 集合，因此您需要使用类似的方法从底层 HTTP Response 对象访问它们。尽管您可以轻松地将它们包装在您自己的扩展方法中，例如：

```
public static NameValueCollection GetHeaders(this IHttpResponse) 
{
  var aspNetResponseHeaders = httpReq.OriginalResponse as HttpResponse;
  return aspNetResponseHeaders != null 
     ? aspNetResponseHeaders.Headers
     : ((HttpListenerResponse)httpReq.OriginalResponse).Headers; //Http Listener
} 
```

# jquery - 如何在已经使用引导库的同时添加 jquery ui 日期选择器？

> ID：15934063
> 
> 赞同：4
> 
> 时间：2013-04-10T18:52:56.590
> 
> 标签：jquery, html, jquery-ui, twitter-bootstrap, datepicker

我正在玩引导程序，我打算使用它向页面添加一个日期选择器，但没有任何成功..所以我找到了一个日期选择器的代码，使用查询 ui：[Datepicker](http://jqueryui.com/datepicker/)

并在一个新的 html 页面中尝试了这个，它就像一个魅力。但是，我现在想在我正在处理的页面中使用它，但不同的脚本和 css 文件之间似乎存在一些冲突。有没有办法解决这个问题？

（我已经延迟了页面的内容，但留下了我正在导入的脚本和链接）

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Svensk Bridge</title>
        <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="../css/bootstrap-responsive.css">
    </head>

    <body>

        <p>Date: <input type="text" id="datepicker" /></p>

        <script type="text/javascript" src="../js/jquery.js"></script>
        <script type="text/javascript" src="../js/bootstrap.js"></script>
        <script type="text/javascript" src="../js/list-function.js"></script>
    </body>
</html> 
```

如果我要为日期选择器导入 jquery ui 的所有文件，它将不起作用。

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });
  </script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

所以，总结一下：我可以将 jquery ui datepicker 实现到我已经存在的文档中吗？哪些脚本和链接被优先考虑？

问候，比尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T17:04:33.070

我正在使用带有 Jquery UI datepicker 的 Bootstrap，问题一定是你导入东西的顺序。这是我的订单：

```
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.2.custom.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<link type="text/css" href="css/jquery-ui-1.10.2.custom.css" rel="stylesheet" />
<link type="text/css" href="css/bootstrap.css" rel="stylesheet" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T18:55:11.767

你可以，但我个人的偏好是添加一个 Bootstrap 风格的日期选择器。我一直在使用这个，它非常棒。[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

这里的优点是您实际上不需要为此包含 jQuery UI 库。

# java - Java链表递归插入

> ID：15934065
> 
> 赞同：-4
> 
> 时间：2013-04-10T18:53:02.997
> 
> 标签：java, recursion, linked-list

我需要一种递归方法将元素插入到链表中。将新元素插入列表时，必须保持列表元素的降序排列。这意味着插入的元素值必须按降序排列。该程序的骨架是

```
public static ListElement InsertList(ListElement head, ListElement elem) {

} 
```

ListElement 的实现是

```
public class ListElement {
int value
ListElement next;
} 
```

请坚持提供的节点类。只需要编写 InsertList 类。使用递归。它应该少于 10 行代码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:04:26.767

您需要先尝试，如果遇到困难，请向社区寻求帮助。Stackoverflow 不是您的家庭作业解决方案制造商。

# windows - 如何自动化 cygwin 和 mintty

> ID：15934068
> 
> 赞同：7
> 
> 时间：2013-04-10T18:53:10.107
> 
> 标签：windows, batch-file, cygwin, mintty

我目前在我的快捷方式下有这个

`C:\cygwin\bin\mintty.exe -i /Cygwin-Terminal.ico -`

在那之后我必须输入

`cd x:``ENTER`

然后我运行一个`curl`不会改变的脚本。

我试图通过运行以下命令来自动化它，但它似乎不起作用

我的 SH 文件

```
#!/bin/bash

cd x:
curl http://thedomain.com/update.json --connect-timeout 10000 --max-time 10000 --data-binary @jsonfilename -H 'Content-type:application/json;charset=utf-8;X-Vendor-Email=myemail@.com;' 
```

这就是我在 CMD 中运行的

```
mintty.exe --exec 'c:/cygwin/bin/test.sh' 
```

cygwin 弹出 2 秒然后消失。

请帮忙

**更新**

新错误

```
$ /bin/test.sh
      0 [main] bash 12000 child_info_fork::abort: cygreadline7.dll: Loaded to different address: parent(0x3B0000) != child(0x320000)
/bin/test.sh: fork: retry: Resource temporarily unavailable
      0 [main] bash 12052 child_info_fork::abort: cygreadline7.dll: Loaded to different address: parent(0x3B0000) != child(0x2B0000)
/bin/test.sh: fork: retry: Resource temporarily unavailable
      0 [main] bash 9304 child_info_fork::abort: cygreadline7.dll: Loaded to different address: parent(0x3B0000) != child(0x3A0000)
/bin/test.sh: fork: retry: Resource temporarily unavailable
      0 [main] bash 9036 child_info_fork::abort: cygreadline7.dll: Loaded to different address: parent(0x3B0000) != child(0x3A0000)
/bin/test.sh: fork: retry: Resource temporarily unavailable
      0 [main] bash 9588 child_info_fork::abort: cygreadline7.dll: Loaded to different address: parent(0x3B0000) != child(0x3C0000)
/bin/test.sh: fork: Resource temporarily unavailable 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T20:42:12.960

对于对此感兴趣的人..这是解决方案

使用以下 taret 在 Windows 中为 Mintty 创建一个快捷方式

假设您的 shell 文件位于 c:\cygwin\bin

C:\cygwin\bin\mintty.exe /bin/bash -l -e '/cygdrive/c/cygwin/bin/test.sh'

一旦你的快捷方式工作，你可以做一个 Windows 任务计划程序并从那里获取它。

Windows 7 Pro：使用 Windows 任务计划程序创建一个基本任务以每天启动并完成所有步骤。创建任务后，转到“属性”，然后转到“触发器”选项卡并单击“编辑”

在高级设置框架下，您将看到 REPEAT TASK EVERY.... 从那里不言自明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:48:26.877

您的命令告诉`mintty`您启动并运行您的脚本，这就是它继续执行的操作，然后退出。你所说的那个“弹出窗口”是终端打开，运行你传递给它的命令，然后退出，因为它已经完成了它的工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T19:51:54.527

是否使用文件系统根目录或 cygwin 环境`mintty.exe`评估参数？试试这个。`--exec``c:\``/`

```
mintty.exe --exec '/bin/test.sh' 
```

或者

```
mintty.exe --exec '/cygdrive/c/cygwin/bin/test.sh' 
```

此外，如果您还没有这样做，您应该`chmod 755 /bin/test.sh`使其可执行。

# python - python和f2py错误-NameError：未定义全局名称'inputUtil'

> ID：15934072
> 
> 赞同：0
> 
> 时间：2013-04-10T18:53:28.877
> 
> 标签：python, import, fortran, f2py

我使用 f2py (inputUtil.pyd) 在 python 中编译了一个 fortran 代码。我将此函数导入到我的主要 python 代码中，并从字符串中将两个字符（locationAID 和 locationBID）传递给此函数。

这是错误消息：

```
>>> Traceback (most recent call last):
  File "C:\FROM_OLD_HD\SynBio\Contact 5-23-12\contactsource_workingcopy\python\main.py", line 234, in batchExecute
    self.prepareProteins(tempList[1].replace("protA: ",""),tempList[2].replace("protAID: ",""),tempList[3].replace("protB: ",""),tempList[4].replace("protBID: ",""))
  File "C:\FROM_OLD_HD\SynBio\Contact 5-23-12\contactsource_workingcopy\python\main.py", line 668, in prepareProteins
    total = inputUtil(locationAID,locationBID)
NameError: global name 'inputUtil' is not defined 
```

以下是我的主要 python 代码的一部分：

```
#import fortran modules
from contact import *
from inputUtil import *

....
def prepareProteins(self, locationA, locationAID, locationB, locationBID):
    self.output("Generating temporary protein files...")
    start_time = time.time()

    shutil.copyfile(locationA,"."+os.sep+"prota.pdb")
    shutil.copyfile(locationB,"."+os.sep+"protb.pdb")

    total = inputUtil(locationAID,locationBID)
... 
```

这是我使用 f2py 转换为 python 的部分 fortran 代码，它显示了传递给此函数的字符：

```
 subroutine inputUtil(chida,chidb)
c
       integer resnr,nbar,ljnbar,ljrsnr
       integer resns,nbars
       integer resnc,nbarc
       integer resnn,nbarn
c
       integer numa,numb,ns,n
c
       character*6 card,cards,cardc,cardn,ljcard
c
       character*1 alt,ljalt,chid,ljchid,code,ljcode
       character*1 alts,chids,codes
       character*1 altc,chidc,codec
       character*1 altn,chidn,coden
       character*1 chida,chidb
.... 
```

f2py 工作得很好，所以我认为这不是问题。我只是在学习 python - 我是一个老 Fortran 程序员（从打孔卡的那天开始！）。所以，请回复一些老人可以遵循的东西。

谢谢你的帮助。

打孔爸爸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:42:40.573

我认为您在这里混淆了功能和模块。当你做`from inputUtil import *`然后调用`inputUtil`时，那和调用函数是一样的`inputUtil.inputUtil`。

我在您提供的 Fortran 代码上运行了 f2py，并增加了一行：`print*, "hello from fortran!"`. 我还必须删除 C 注释行，大概是因为我使用了`.f90`. 这是我使用的命令：

```
python "c:\python27\scripts\f2py.py" -c --fcompiler=gnu95 --compiler=mingw32 -lmsvcr71 -m inputUtil inputUtil.f90 
```

现在我应该得到一个名为 inputUtil 的 python 模块。让我们试试看。简单的 Python：

```
import inputUtil
inputUtil.inputUtil('A', 'B') 
```

从这里我得到：

```
AttributeError: 'module' object has no attribute 'inputUtil' 
```

发生什么了？让我们看一下模块：

```
print dir(inputUtil) 
```

这将返回：

```
['__doc__', '__file__', '__name__', '__package__', '__version__', 'inpututil'] 
```

显然 inputUtil 中的大写 U 已转换为小写。让我们用小写的名字调用函数：

```
inputUtil.inpututil('A', 'B') 
```

现在它打印：

```
hello from fortran! 
```

成功！

看起来将函数名称转换为小写可能是 f2py 的问题/功能。我从来没有遇到过它，因为我通常使用小写名称。

为了将来参考，我还建议将 Fortran 放在一个模块中，并将`intent`语句添加到您的子例程参数中。这将更容易在 f2py 模块和 Python 之间传递变量。像这样包裹在一个模块中：

```
module inpututils

contains

subroutine foo(a, b)
...code here...
end subroutine

end module 
```

然后，您从模块中导入所有子例程，并`use inpututils`在另一个文件中的子例程顶部（之前`implicit none`）。

# vb.net - ReportViewer 更改控制颜色

> ID：15934075
> 
> 赞同：0
> 
> 时间：2013-04-10T18:53:35.387
> 
> 标签：vb.net, colors, controls, reportviewer

我希望在我的 report.RDLC 中更改控件的颜色。我的报告都是由 ReportViewer 控件在名为“rv”的表单上生成的。

下面选定的矩形是我要更改颜色的矩形。 ![矩形3](https://i.stack.imgur.com/aD7tk.png)

它具有以下属性：

![矩形属性](https://i.stack.imgur.com/7Qa0y.png)

如何以编程方式更改矩形的背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:22:15.963

几个小时后我想通了。在要更改背景颜色的控件上，从下拉列表中选择“表达式”链接。

![背景颜色表达](https://i.stack.imgur.com/RrNqS.png)

之后，您输入代码，例如：

```
=iif(Fields!State.Value = "Approved", "LightYellow", iif(Fields!State.Value = "Analysis", "LightGreen", "Transparent")) 
```

如果文本框的状态为“已批准”，这会将我的文本框的颜色设置为浅黄色，如果它处于分析阶段，则将其设置为浅绿色。如果这些都不是真的，它只是保持透明（默认）。

*注意：我的“状态”字段已添加到我的数据集中，因此我可以在表达式中使用它。

# javascript - inmobi javascript调用广告两次

> ID：15934076
> 
> 赞同：0
> 
> 时间：2013-04-10T18:53:36.217
> 
> 标签：javascript, inmobi

根据 inmobi Developer Wiki

[http://developer.inmobi.com/wiki/index.php?title=JavaScript](http://developer.inmobi.com/wiki/index.php?title=JavaScript)

您可以使用 Var 部分中的 manual: true 参数调用 Ads on Demand：

例如：

```
<script type="text/javascript" src="http://cf.cdn.inmobi.com/ad/inmobi.js">
    </script>   

<script type="text/javascript">
  var inmobi_conf = {
    siteid : "your site id",
    slot : "slot number",
    test: true,
    manual: true
  };
</script>

<div id="adArea"> </div> 
```

要生成广告，您必须使用以下命令调用它：

```
_inmobi.getNewAd(document.getElementById('adArea')); 
```

它应该填充广告。

我创建了一个简单的测试示例来按需请求广告（使用 inmobi 提供的测试站点 ID）。

问题是我必须点击两次才能加载广告

完整来源：

```
<html>
  <head>
   <script>
     var inmobi_conf = {
       siteid : "4028cba631d63df10131e1d3191d00cb",
       slot : "15",
       test: true,
       manual: true
     };

     function loadAdd(){
       _inmobi.getNewAd(document.getElementById('screen'));
   };
   </script>
   <script src="http://cf.cdn.inmobi.com/ad/inmobi.js"></script>        
  </head>
    <body>
      <div id="screen"> </div>
        <button id="btn1" onClick="loadAdd()">Load Ad</button>
    </body>
</html> 
```

[您可以在http://jsfiddle.net/YYzqA/](http://jsfiddle.net/YYzqA/)上尝试一下

第一次点击“加载广告”按钮（无广告）

第二次点击“Load Ab”按钮（广告将被加载）

碰巧你知道这种行为的原因吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:02:33.630

你已经设置`manual: true`

您需要将其设置`manual: false`为自动为您设置配置。

设置时`manual: true`，您的第一次单击是加载配置

检查[小提琴](http://jsfiddle.net/YYzqA/1/)

# ios6 - 使用 ABCalendarPicker

> ID：15934077
> 
> 赞同：1
> 
> 时间：2013-04-10T18:53:39.950
> 
> 标签：ios6, abaddressbook

我在使用 ABCalendarPicker 时遇到问题。有人可以解释一下为什么下面的截图会这样出现吗？我已将捆绑包和 .a 库添加为构建资源。在运行之前，我还构建了 ABCalendarPicker 项目。

![在此处输入图像描述](https://i.stack.imgur.com/bKzkt.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:12:31.023

`ABCalendarPicker`组件不支持自动布局。只需禁用自动布局或帮助改进组件...

# assembly - dw、db 和 是什么？（问号）在 TASM 结构中是什么意思？

> ID：15934080
> 
> 赞同：2
> 
> 时间：2013-04-10T18:53:48.593
> 
> 标签：assembly, x86, tasm

我是组装新手，现在我想弄清楚`dw`,`db`和.`?``struc`

例如这里：

```
struc segment_descriptor
  seg_length0_15        dw      ?
  base_addr0_15         dw      ?
  base_addr16_23        db      ?
  flags                 db      ?
  access                db      ?
  base_addr24_31        db      ?
ends segment_descriptor 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:57:00.667

“dw”是 WORD 类型的变量，“db”是 BYTE 类型的变量，dd 是双字类型的变量（int32_t）。“？” 表示这些值未初始化。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2020-08-17T17:40:25.867

没有答案，因为值未定义！

1.  为数据分配了一些空间，但它的值是未初始化的（或未定义的）。

2.  换句话说，它可以包含任何东西（已经在该内存地址的随机数据）。

3.  这意味着如果你想从这个内存中读取，并期望读取有意义的数据，你必须首先写入它。

# javascript - console.log 和使用 Node.js 和 CoffeeScript 执行函数

> ID：15934082
> 
> 赞同：2
> 
> 时间：2013-04-10T18:53:52.953
> 
> 标签：javascript, node.js, coffeescript

我用节点编译 CoffeeScript。在脚本中，我有一个清除数组的函数。我想 console.log 空数组。我看不出 3 个块日志之间的区别：

```
clearArray = (arr) ->
  arr.splice 0 , arr.length

#Block 1
arr = [1,2]
clearArray arr
console.log arr

#Block 2
array = [1,2]
console.log clearArray array

#Block 3
console.log clearArray [1,2] 

#Block 1 logs: []
#Block 2 & 3 log: [ 1, 2 ] 
```

据我了解，所有块都应该记录“[]”并返回一个空数组，因为 clearArray 返回 arr.splice() 的结果。#Block2 &3 好像没有执行拼接功能？！任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:59:20.390

`Splice()`修改数组并返回一个包含您删除的元素的数组。

```
var arr = [1, 2];
var a = arr.splice(0, 2);

console.log(arr);
[] 

console.log(a);
[1, 2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:15:14.763

正如 Rodrigo 所说`splice`，返回初始数组，这导致了由 Coffee 的隐式 return 语句引起的误解。您的功能等同于：

```
clearArray = (arr) ->
  return arr.splice 0 , arr.length 
```

要解决这个问题，您必须返回切片数组

```
clearArray = (arr) ->
  arr.splice 0 , arr.length
  return arr 
```

又是一样的

```
clearArray = (arr) ->
  arr.splice 0 , arr.length
  arr 
```

# php - MySQL、HTML 和 PHP 字符冲突

> ID：15934094
> 
> 赞同：0
> 
> 时间：2013-04-10T18:54:27.890
> 
> 标签：php, html, mysql

我正在尝试从数据库中提取文本。在数据库中显示为“♦”没有问题。

但是，当我从数据库中提取记录时，它在页面上显示为一个问号（而不是中间有一个白色 ? 的黑框），一个普通的旧“问号结束”问号。

例如：

♦ 我们需要付钱给你 ♦</p>

将显示：

? 我们需要付钱给你吗？

我将数据库结构设置为 utf8-bin，因为拉丁文没有正确保存它们。我已经环顾四周，阅读文章数小时，但在任何地方都找不到答案。必须有一种方法让它以正确的方式从数据库中提取。我可以插入它但无法检索它，这是没有意义的。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:55:51.150

在你的 php 文件中试试这个：

```
echo utf8_encode(text) or utf8_decode(text) 
```

这在你的 html 头中：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:01:14.840

使用 mysql_set_charset 设置字符集。

```
bool mysql_set_charset ( string $charset [, resource $link_identifier = NULL ] ) 
```

并确保您的页面内容字符集是 utf-8

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:03:44.643

您可以使用我在此处给出的答案来检查问题的根源：[如何修复“不正确的字符串值”错误？](https://stackoverflow.com/questions/1168036/how-to-fix-incorrect-string-value-errors/11013986#11013986)

在您的情况下，HTML 很可能不是 UTF-8 编码的。根据您使用的 HTML 版本，其中之一将满足您的需求：[http ://en.wikipedia.org/wiki/Character_encodings_in_HTML](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)

剩下一件事：检查您的 IDE/Editor 是否也设置为以 UTF-8 存储文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:04:38.710

1.  将您的 php 文件另存为`Encode UTF-8 without BOM`
2.  在查询之前设置：`mysql_set_charset('utf8',$connect)`或者 `array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")`如果您使用的是 PDO
3.  在您的`<head>`标签内设置：`<meta http-equiv="content-type" content="text/html; charset=utf-8">`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T19:09:49.103

好吧，你需要决定你将在你的应用程序上使用什么编码，恕我直言 utf8 是最好的编码，所以你需要让你的 IDE ou Text Editor 只使用 UTF-8 并告诉浏览器你的页面是 UTF-8 使用：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

并使用 PDO 的现代连接方式：

```
<?php
$pdo = new PDO(
    'mysql:host=127.0.0.1;dbname=test',
    "username",
    "password",
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

使用 UTF-8 创建数据库：

```
CREATE DATABASE "test" CHARACTER SET utf8 COLLATE utf8_general_ci 
```

使用 UTF-8 创建表：

```
CREATE TABLE `test` ( 
`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY , 
`name` VARCHAR( 40 ) NOT NULL
) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

使用 utf8_encode 和 utf8_decode 是没有意义的，它会让你的代码不可读。

对不起我的英语，我是巴西人：D

# ajax - 带有面重定向的部分页面呈现 (PPR)

> ID：15934099
> 
> 赞同：0
> 
> 时间：2013-04-10T18:54:35.627
> 
> 标签：ajax, jsf-2

我正在使用 PrimeFaces 3.5，但我遇到了部分页面渲染的问题。我需要将 Facelet 文件中的内容加载到模板的“动态”部分。

`index.xhtml`：

```
<f:view> 
    <h:form id="form1">
        <p:outputPanel layout="block">
            <p:commandButton action="content-2?faces-redirect=false" update="display" />
        </p:outputPanel>
        <p:outputPanel id="display" layout="block">
            content 1
        </p:outputPanel>
    </h:form>
</f:view> 
```

`content-2.xhtml`：

```
<h:body>
    content 2 loaded
</h:body> 
```

当我点击`<p:commandButton>`，然后`content-2.xhtml`将被打开。但是，这会刷新整个页面。XML 响应包含如下内容：

```
<partial-response><changes><update id="javax.faces.ViewRoot"> 
```

当我将`action`属性更改为方法表达式时：

```
<f:view> 
    <h:form id="form1">
        <p:outputPanel layout="block">
            <p:commandButton action="#{myBean.increment}" update="display" />
        </p:outputPanel>
        <p:outputPanel id="display" layout="block">
            #{myBean.count}
        </p:outputPanel>
    </h:form>
</f:view> 
```

然后`display`块按预期更新。XML 响应包含如下内容：

```
<partial-response><changes><update id="form:display"> 
```

为什么`action="content-2?faces-redirect=false"`更新整个页面的方式？

我也尝试过`<ui:composition>`，但在这种情况下，这会重新加载模板的“静态”部分。我不想要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:33:53.223

如果您通过在属性中提供非结果**导航**到不同的视图，这是完全正常和预期的行为。然后 JSF 将使用. JSF/Facelets 不会像您预期的那样以某种方式自动保留树中的公共组件。如果您打算在部分页面渲染期间动态*更改*组件树，那么您需要在其中一个动态包含类似这样的内容（只是一个整数）`null``action``@all`*`<p:outputPanel id="display" layout="block">``section`*

 *```
<ui:include src="section#{bean.section}.xhtml" /> 
```

或多个有条件渲染的部分

```
<ui:fragment rendered="#{bean.section == 1}"><ui:include src="section1.xhtml" /></ui:fragment>
<ui:fragment rendered="#{bean.section == 2}"><ui:include src="section2.xhtml" /></ui:fragment>
<ui:fragment rendered="#{bean.section == 3}"><ui:include src="section3.xhtml" /></ui:fragment>
<ui:fragment rendered="#{bean.section == 4}"><ui:include src="section4.xhtml" /></ui:fragment> 
```

根据包含文件是否包含表单/输入/命令组件和/或引用视图范围的 bean，每个都有自己的优缺点。即在`<ui:include>`视图构建期间运行，如 JSTL。另请参阅 JSF2 Facelets 中的 JSTL 以获取更多详细信息[……有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

的存在`faces-redirect=false`并不重要，因为它已经是默认设置。如果是，那么将在目标 URL 上调用`true`JavaScript 。`window.location`*

# git - 使用 git 应用差异文件

> ID：15934101
> 
> 赞同：21
> 
> 时间：2013-04-10T18:54:39.847
> 
> 标签：git, github

所以我试图使用将差异文件应用到我的 git dev 分支。我想应用的差异是这里的：[https ://github.com/mbabker/joomla-cms/compare/JHtml_move.patch](https://github.com/mbabker/joomla-cms/compare/JHtml_move.patch)

我用了`git apply PATH_TO_PATCH.patch`

现在在尝试应用它时，我得到了大量的错误累积

```
fatal: git apply: bad git-diff - expected /dev/null on line 47 
```

事情是第 47 行读取`--- /dev/null`

我在另一个论坛上看到有人说该部分后面有一个尾随空格，`/dev/null`但没有。

万一它有任何帮助，我也会在第 9、10、11、12 和 13 行出现尾随空格的错误——尽管它们不是任何尾随空格。

在任何情况下，差异都是由 git 生成的 - 我只是将其复制并粘贴到记事本中。

我也尝试过使用`curl https://github.com/mbabker/joomla-cms/compare/JHtml_move.patch | git am`，但这只会给出错误而没有指定位置。

![来自 curl 尝试的错误消息](https://i.stack.imgur.com/vdQYP.png)

关于为什么当线路实际存在时它会给出致命错误的任何想法？？？？

* * *

**更新到@IvanZuzak** 我尝试添加`git am --ignore-space-change --ignore-whitespace PATH_TO_PATCH.patch`但是我首先得到了（因为这是下载的补丁）一个错误说电子邮件无效（它已被转换为html代码）所以我试图修复它但它一直抛出它时不时地起来。然后它说`previous rebase directory PATH_TO_GITHUB_BRANCH/.git/rebase-apply still exists but mbox given.`。所以我发现[这个](http://lilypond.1069038.n5.nabble.com/git-help-previous-rebase-directory-td104464.html)建议删除分支 .git 文件夹中的 rebase-apply 文件夹。所以我这样做了，然后我又收到了无效的电子邮件错误（尽管我已经将这两个都改成了 html 格式）

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-09-12T19:38:37.087

我也有同样的问题：

```
fatal: git apply: bad git-diff - expected /dev/null on line 47 
```

然而第 47 行显示为`--- /dev/null`. 我发现的问题是行尾是 Windows 格式而不是 UNIX 格式。在 Notepad++ 中将行尾转换为 UNIX 格式解决了我的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-04T19:43:28.910

我遇到过同样的问题。我打开了 Git Bash（Cygwin 也可以）并做了：

```
dos2unix.exe <patch-file> 
```

然后我就可以完美地应用补丁了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-04T19:10:57.277

`bad git-diff - expected /dev/null on line 47`您必须检查在 Git 2.17（2018 年第二季度）之后是否仍然看到错误消息。

“”中的许多地方`git apply`都知道“ `/dev/null`”表示“在 diff 的这一侧没有这样的文件”在解析补丁时可以后跟空格和垃圾，除了一个，它制作了一个有效的补丁（例如来自颠覆）被拒绝。

请参阅[Tatyana Krasnukha ( ) 的](https://github.com/tkrasnukha)[提交 e454ad4](https://github.com/git/git/commit/e454ad4becff73588b1b3cc24dba3a0e740c7f7c)（2018 年 2 月 15 日[）](https://github.com/tkrasnukha)。 请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 f16ef7b](https://github.com/git/git/commit/f16ef7bd4c37fba8c030b87610f646a1fce5d52d)（2018 年 2 月 15 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 177bd65](https://github.com/git/git/commit/177bd65cf8601216e906ad56ceb6a46f57df22fa))^(中，2018 年 2 月 28 日）)[`tkrasnukha`](https://github.com/tkrasnukha)
[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

另请参阅[git-for-windows/git 问题 1489](https://github.com/git-for-windows/git/issues/1489)

> ## `apply``/dev/null`：优雅地处理颠覆差异
> 
> Subversion 生成的差异可以包含这样的行：
> 
> --- /dev/null（不存在）
> 
> 让我们教 Git 的应用机制来优雅地处理这样的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-06T00:33:05.150

我有同样的问题，但我正在测试一个我要发送到列表服务器的补丁，遵循这里的建议：[https](https://www.kernel.org/doc/Documentation/email-clients.txt) ://www.kernel.org/doc/Documentation/email-clients.txt 。我不能只在本地文件上解决问题，我需要分发一个可能会被 gmail 破坏的补丁，并且我正在使用`git apply`.

我的同事向我指出

```
git am 
```

比`git apply`纠正这些类型的问题更好，并且应该与`.patch`文件一起使用。上面的评论之一提到了这一点，但它应该是一个答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T18:29:47.377

我有同样的问题你有一个正在进行的变基，写

```
git rebase --skip 
```

很多次，直到看到`No rebase in progress?` 然后再试一次`git am`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-20T11:34:07.930

我遇到过同样的问题。

`fatal: git apply: bad git-diff - expected /dev/null on line 96`

或者，如果我将所有行尾转换为 Unix 格式：

```
error: patch failed: <file>:81
error: <file>: patch does not apply
... 
```

`git apply --ignore-whitespace <patch>.patch`使用 Unix 行尾。

# mongodb - MongoDB 用于 windows 的“mongosniff”

> ID：15934102
> 
> 赞同：0
> 
> 时间：2013-04-10T18:54:40.110
> 
> 标签：mongodb, fiddler

我需要查看对 mongo 服务器的请求/响应。MongoDB 有一个名为“mongosniff”的应用程序，但它在 Windows 上不可用。

我的替代方案是什么？提琴手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:11:16.140

`mongosniff`不包含在 Windows 的二进制下载中，但如果您有耐心并且愿意，您可以自己编译它。您将需要安装开发人员工具，包括[Windows 版 Git](http://msysgit.github.io/)、[Scons](http://www.scons.org/)和[WinPcap 开发人员包](http://www.winpcap.org/devel.htm)，因此这肯定不是一条捷径。

相反，我建议下载[Wireshark](http://www.wireshark.org/)，它是一个跨平台的网络协议分析器。事实上，`mongosniff`即使您不使用 Windows，我也会建议您优先使用 Wireshark。

Wireshark 还使用 WinPcap 库并提供比包括[Mongo Wire Protocol](http://wiki.wireshark.org/Mongo)`mongosniff`在内的大量[支持协议](http://wiki.wireshark.org/ProtocolReference)更全面的用户界面。

[Fiddler](http://fiddler2.com/)是用于调试 HTTP/HTTPS 流量的 Web 代理，与 Mongo Wire 协议没有直接关系。您可以使用 Fiddler 来检查 Web 界面（例如 REST API），但它不会解码较低级别的协议。

# java - Java中“org.apache.log4j.Logger”的奇怪行为

> ID：15934103
> 
> 赞同：0
> 
> 时间：2013-04-10T18:54:42.800
> 
> 标签：java, logging, log4j

我正在做*Maven 项目*。我使用**log4j**做了一个日志。但它在给定文件中显示了一些starnge日志。我试图理解，为什么会出现这个奇怪的日志，但我不明白。请帮助我，为什么这些不需要的行进入日志文件。

请帮我删除这个。

**日志属性**

```
# Define the root logger with appender file
log = /usr/home/log4j
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=C:/Users/aMpliFieR/Desktop/log.txt

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

我通过阅读这个[链接](http://www.tutorialspoint.com/log4j/log4j_sample_program.htm)制作了这个文件。

**代码是**

```
public class test {
    static Logger log = Logger.getLogger( test.class.getName() );

    public static void func(String url1, String url2) throws  InterruptedException {
        Threqad.sleep(100000000);  // Here is some process that performs recursively
        log.info( url1 + "\n" + url2 + "\n"+ ((double)loading_time)/((double)1000)+ " seconds   " + ((double)parsing_time)/((double)1000) +  " seconds   "  + ((double)processing_time)/((double)1000) + " seconds\n\n\n\n" );
    }

    public static void main(String[] args) throws InterruptedException{
            for(int i = 0; i < 5; i++) { func("ANY URL1", "ANY URL2");  }
    }
} 
```

**log.txt-（log.txt的一些起始行）**

```
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session HTTP/1.1
>> "POST /hub/session HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 105[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 105
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"desiredCapabilities":{"platform":"ANY","browserName":"firefox","version":""},"requiredCapabilities":{}}"
<< "HTTP/1.1 303 See Other[\r][\n]"
<< "location: http://127.0.0.1:7055/hub/session/bfaec653-501a-401c-9b6a-227341e1fe38[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 0[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:11 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 303 See Other
<< HTTP/1.1 303 See Other
<< location: http://127.0.0.1:7055/hub/session/bfaec653-501a-401c-9b6a-227341e1fe38
<< connection: close
<< content-length: 0
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:11 GMT
Redirect requested to location 'http://127.0.0.1:7055/hub/session/bfaec653-501a-401c-9b6a-227341e1fe38'
Redirecting to 'http://127.0.0.1:7055/hub/session/bfaec653-501a-401c-9b6a-227341e1fe38' via {}->http://127.0.0.1:7055
Connection 0.0.0.0:59145<->127.0.0.1:7055 closed
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 2 to execute request
Sending request: GET /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38 HTTP/1.1
>> "GET /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38 HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> GET /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38 HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 462[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:11 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 462
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:11 GMT
<< "{"name":"getSessionCapabilities","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":{"cssSelectorsEnabled":true,"browserName":"firefox","handlesAlerts":true,"javascriptEnabled":true,"nativeEvents":true,"platform":"WINNT","rotatable":false,"takesScreenshot":true,"version":"20.0","webStorageEnabled":true,"applicationCacheEnabled":true,"databaseEnabled":true,"locationContextEnabled":true,"browserConnectionEnabled":true,"acceptSslCerts":true}}"
Connection 0.0.0.0:59146<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59146<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/url HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/url HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 74[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/url HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 74
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"url":"http://www.jabong.com/men/shoes/men-loafers/?source=home-leftnav"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 87[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:21 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 87
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:21 GMT
<< "{"name":"get","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":""}"
Connection 0.0.0.0:59147<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59147<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,250)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:34 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:34 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59202<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59202<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,200)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:34 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:34 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59281<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59281<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,200)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:36 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:36 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59282<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59282<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,200)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:36 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:36 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59283<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59283<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,200)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:40 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:40 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59284<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59284<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "[\r][\n]"
>> POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> Accept: application/json, image/png
>> Content-Type: application/json; charset=utf-8
>> Content-Length: 47
>> Host: 127.0.0.1:7055
>> Connection: Keep-Alive
>> "{"args":[""],"script":"window.scrollBy(0,200)"}"
<< "HTTP/1.1 200 OK[\r][\n]"
<< "content-type: application/json; charset=UTF-8[\r][\n]"
<< "connection: close[\r][\n]"
<< "content-length: 99[\r][\n]"
<< "server: httpd.js[\r][\n]"
<< "date: Wed, 10 Apr 2013 18:43:40 GMT[\r][\n]"
<< "[\r][\n]"
Receiving response: HTTP/1.1 200 OK
<< HTTP/1.1 200 OK
<< content-type: application/json; charset=UTF-8
<< connection: close
<< content-length: 99
<< server: httpd.js
<< date: Wed, 10 Apr 2013 18:43:40 GMT
<< "{"name":"executeScript","sessionId":"bfaec653-501a-401c-9b6a-227341e1fe38","status":0,"value":null}"
Connection 0.0.0.0:59285<->127.0.0.1:7055 shut down
Released connection is not reusable.
Releasing connection [{}->http://127.0.0.1:7055][null]
Connection 0.0.0.0:59285<->127.0.0.1:7055 closed
Notifying no-one, there are no waiting threads
Get connection: {}->http://127.0.0.1:7055, timeout = 120000
[{}->http://127.0.0.1:7055] total kept alive: 0, total issued: 0, total allocated: 0 out of 2000
No free connections [{}->http://127.0.0.1:7055][null]
Available capacity: 2000 out of 2000 [{}->http://127.0.0.1:7055][null]
Creating new connection [{}->http://127.0.0.1:7055]
Connecting to 127.0.0.1:7055
CookieSpec selected: best-match
Auth cache not set in the context
Target auth state: UNCHALLENGED
Proxy auth state: UNCHALLENGED
Attempt 1 to execute request
Sending request: POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1
>> "POST /hub/session/bfaec653-501a-401c-9b6a-227341e1fe38/execute HTTP/1.1[\r][\n]"
>> "Accept: application/json, image/png[\r][\n]"
>> "Content-Type: application/json; charset=utf-8[\r][\n]"
>> "Content-Length: 47[\r][\n]"
>> "Host: 127.0.0.1:7055[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:12:37.773

您将 设置`rootLogger`为`DEBUG`，这意味着使用 Log4J的*所有库的调试语句都将记录其调试语句。*这可能是您已用注释替换的代码部分*`// Here is some process that performs recursively`*

将 配置`rootLogger`为 log`INFO`或更高可能会更好，并且 - 如果您确实需要调试级别的日志记录 - 将此特定包的记录器配置为`DEBUG`，使用：

```
log4j.rootLogger = INFO, FILE
log4j.some.package = DEBUG 
```

`some.package`你的班级的包在哪里。但是，由于您目前正在登录信息级别，这并不是真正必要的。

# c - C中的二叉搜索树插入函数

> ID：15934104
> 
> 赞同：0
> 
> 时间：2013-04-10T18:54:43.290
> 
> 标签：c, struct, null, binary-search-tree, avl-tree

对于可能需要此类问题帮助的此问题的未来查看者：我通过结合 2 个函数（InsertNode() 和 InTree()）来修复它我不确定这是否是不好的做法，我会回到你们是否真的确实解决了问题，或者它只是掩盖了它，但它似乎正在工作......

我浏览了这个网站（以及其他网站）上的各种答案，并从那些我得到的解决方案中得到了没有帮助的解决方案（尝试过但没有奏效，或者与我的程序没有区别）。插入函数（我已将其隔离并认为这是有问题的代码）在某处有一些错误导致我的程序崩溃。

```
NP InTree(NP Node,NP Root)
{
    if (Root == NULL)
    {
        Root=Node;
        return Root;
    }
    else
    {
        if (Node->Input < Root->Input)
        {
            return InTree(Node,Root->Left);
        }
        else if (Node->Input > Root->Input)
        {
            return InTree(Node,Root->Right);
        }
        else
        {
            puts("Duplicate");
            return NULL;
        }
    }
}

void InsertNode(int I, TP Tree)
{

    NP Node;
    Node=(NP)malloc(sizeof(struct AVLNode));
    InitializeNode(Node);
    Node->Input=I;
    Node->Height=0;
    Node->Left=NULL;
    Node->Right=NULL;
    InTree(Node,Tree->Root);
    Tree->Size++;
} 
```

NP 是节点指针，TP 是树指针

Node变量是通过InsertNode()发送的初始化节点

```
void InitializeTree(TP Tree)
{

    Tree->Root=NULL;
    Tree->Size=0;
}

void InitializeNode(NP Node)
{

    Node->Input=0;
    Node->Height=0;
} 
```

以上是我的初始化函数，以防您需要查看它们。

树的内存在调用任何函数之前在主类中分配。

我通过测试看到的主要问题是，一旦 Root 等于 Node，它就保持为空。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:18:27.487

我会做这样的事情。您的插入函数不区分特殊情况（空树）和一般情况（非空树）。

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

typedef struct NODE
{
  struct NODE *left  ;
  struct NODE *right ;
  int          value ;
  int          depth ;
} NODE ;

typedef struct TREE
{
  NODE *root  ;
  int   count ;
} TREE ;

NODE *node_create( int value )
{
  NODE *instance = (NODE*) calloc( 1 , sizeof(NODE) ) ;
  instance->value = value ;
  return instance ;
}

TREE *tree_create()
{
  TREE *instance = (TREE*) calloc( 1 , sizeof(TREE) ) ;
  return instance ;
}

NODE *tree_find_and_insert( NODE *parent , int value )
{
  NODE *child = NULL ;

  if ( value < parent->value )
  {
    if ( parent->left == NULL )
    {
      child = node_create(value) ;
      child->depth = ++ parent->depth ;
      parent->left = child ;
      return child ;
    }
    else
    {
      return tree_find_and_insert(parent->left , value ) ;
    }
  }
  else if ( value > parent->value )
  {
    if ( parent->right == NULL )
    {
      child = node_create(value) ;
      child->depth = ++ parent->depth ;
      parent->right = child ;
      return child ;
    }
    else
    {
      return tree_find_and_insert( parent->right , value ) ;
    }
  }
  else /* ( value == parent->value ) */
  {
    // NO-OP by design: dupes fall out and NULL is returned
  }

  return child ;
}

NODE *tree_insert( TREE *tree , int value )
{
  NODE *inserted = NULL ;
  if ( tree->root == NULL )
  {
    tree->root  = node_create( value ) ;
    tree->count = 1 ;
    inserted = tree->root ;
  }
  else
  {
    inserted = tree_find_and_insert( tree->root , value ) ;
  }
  return inserted ;
}

int main ( int argc , char *argv[] )
{
  TREE *my_tree = tree_create() ;
  int i ;

  for ( i = 1 ; i < argc ; ++i )
  {
    char *arg = argv[i] ;
    int   n   = atoi(arg) ;

    tree_insert( my_tree , n ) ;

  }

  return 0 ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:10:27.213

`void InsertNode(int I, TP Tree)`为一个新节点分配内存，但是当你调用时`NP InTree(NP Node,NP Root)`你只修改本地指针地址。您需要使用指向指针的指针（即`NP InTree(NP Node, NP *ppRoot)`）或以下示例：

```
if (Node->Input < Root->Input) {
    if(Root->Left == NULL) {
        Root->Left = Node;
    } else {
        return InTree(Node,Root->Left);
    }
} else if (Node->Input > Root->Input) {
    if(Root->Right== NULL) {
        Root->Right= Node;
    } else {
        return InTree(Node,Root->Right);
    }
} else {
    puts("Duplicate");
    return NULL;
} 
```

附言。我注意到您分配了 struct AVLNode ... NP 是 AVLNode ( `typedef struct AVLNode* NP`) 的 typedef 吗？我不知道你的结构是什么所以我不能说。从技术上讲，AVL 与 B 树的不同之处在于它们是自我平衡的…… [http://en.wikipedia.org/wiki/AVL_tree](http://en.wikipedia.org/wiki/AVL_tree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:12:33.467

在使 等于的`InTree`函数中，它仅在本地更改内存。`Root``Node`

相反，您可能需要使用指向指针的指针来实现您正在尝试的内容。

# javascript - 在 Selenium 测试中登录 Facebook

> ID：15934108
> 
> 赞同：2
> 
> 时间：2013-04-10T18:55:06.003
> 
> 标签：javascript, django, facebook, selenium, django-facebook

我正在开发一个 django 项目，使用 django_facebook 进行 Facebook 交互，使用 Selenium 进行自动化系统测试。

在测试中，当涉及到从我的应用程序登录到 facebook 时，我会这样做：

```
 self.browser.get(self.live_server_url)
        self.browser.find_element_by_xpath('//*[@id="facebook_login_js"]/input').click()

        self.browser.switch_to_window(self.browser.window_handles[1])
        self.login_to_facebook() 
```

但它失败了，因为 Facebook 的 JS SDK 还没有完成它的异步初始化过程。我的测试过去可以正常工作，不知道现在是否发生了变化（比如初始化速度较慢）。

我想到了一个像使用 fbAsyncInit 这样的解决方案，但是该代码是由 django_facebook 在 Javascript 文件中提供的，我不想碰它。

知道如何等到 Facebook JS SDK 完全加载，以便我可以使用登录功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:54:22.657

```
self.browser.get(self.live_server_url);
self.browser.find_element_by_xpath('//*[@id="facebook_login_js"]/input').click();

self.browser.switch_to_window(self.browser.window_handles[1]);

window.set_timeout(function(){
    self.login_to_facebook();
}, 1000) 
```

以上将使其在调用登录之前等待一秒钟。您可以通过更改`1000`. `Set_timeout`以毫秒为单位获取时间值（因此 1000 = 1 秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:12:12.757

我最后不得不重写Facebook初始化，所以之后没有问题。我只是做了

```
function facebookJSLoaded(){
    FB.init({appId: facebookAppId, status: false, cookie: true, xfbml: true, oauth: 

    $('#fb-root').attr("data-sdk-loaded", 1);
};

window.fbAsyncInit = facebookJSLoaded;
F = new facebookClass(facebookAppId);
F.load(); 
```

（这是一个非常类似于[How to detect when facebook's FB.init is complete](https://stackoverflow.com/questions/3548493/how-to-detect-when-facebooks-fb-init-is-complete)的解决方案）。在我的 selenium 测试中，我等待这个属性出现在 fb-root 中以单击登录按钮。

# c++ - 向任何指针添加字节偏移的便携且安全的方法

> ID：15934111
> 
> 赞同：26
> 
> 时间：2013-04-10T18:55:14.820
> 
> 标签：c++, pointers, c++11, pointer-arithmetic

我在使用 C++ 方面还很陌生，还没有掌握该语言的所有复杂性和微妙之处。

**在 C++11 中向任何类型的指针添加任意字节偏移量的最*便携、正确和安全的方法是什么？***

```
SomeType* ptr;
int offset = 12345 /* bytes */;
ptr = ptr + offset;             // <-- 
```

* * *

我在 Stack Overflow 和 Google 上找到了很多答案，但它们都提出了不同的建议。我遇到的一些变种：

1.  [投射到`char *`](https://stackoverflow.com/q/6449935/146622)：

    ```
    ptr = (SomeType*)(((char*)ptr) + offset); 
    ```

2.  投射到`unsigned int`：

    ```
    ptr = (SomeType*)((unsigned int)ptr) + offset); 
    ```

3.  [投射到`size_t`](https://stackoverflow.com/a/14453183/146622)：

    ```
    ptr = (SomeType*)((size_t)ptr) + offset); 
    ```

4.  “`size_t`并且`ptrdiff_t`总是与指针的大小一致。因此，正是这些类型应该用作大型数组的索引，用于存储指针和指针运算。” -关于CodeProject 上的[size_t 和 ptrdiff_t](http://www.codeproject.com/Articles/60082/About-size_t-and-ptrdiff_t)

    ```
    ptr = (SomeType*)((size_t)ptr + (ptrdiff_t)offset); 
    ```

5.  或者像以前一样，但使用[`intptr_t`而不是`size_t`](https://stackoverflow.com/a/1464194/146622)，它是有符号的而不是无符号的：

    ```
    ptr = (SomeType*)((intptr_t)ptr + (ptrdiff_t)offset); 
    ```

6.  只转换为`intptr_t`, 因为`offset`已经是一个有符号整数而[`intptr_t`不是`size_t`](https://stackoverflow.com/a/1464194/146622)：

    ```
    ptr = (SomeType*)((intptr_t)ptr) + offset); 
    ```

在所有这些情况下，使用旧的 C 风格转换是否安全，或者使用`static_cast`或`reinterpret_cast`为此更安全或更便携？

我应该假设指针值本身是无符号的还是有符号的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T18:58:16.437

我会使用类似的东西：

```
unsigned char* bytePtr = reinterpret_cast<unsigned char*>(ptr);
bytePtr += offset; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-11T08:13:08.630

使用`reinterpret_cast`（或 C 风格的转换）意味着绕过类型系统并且不可移植且不安全。是否正确，取决于您的架构。如果您（必须）这样做，则暗示*您知道自己在做什么，*并且从那时起您基本上就靠自己了。警告就这么多。

如果将数字添加`n`到指针或类型，则按类型**元素**`T`移动此指针。您正在寻找的是一种类型，其中 1 个元素表示 1 个字节。`n` **`T`**

 **从`sizeof`第 5.3.3.1 节：

> sizeof 运算符产生其操作数的对象表示中**的字节**数。[...] `sizeof(char)`，`sizeof(signed char)`并且`sizeof(unsigned char)`是**1**。sizeof 应用于任何其他基本类型（3.9.1）的结果是实现定义的。

请注意，没有关于`sizeof(int)`等的声明。

*字节*的定义（第 1.7.1 节）：

> C++ 内存模型中的基本存储单元是字节。一个字节至少大到足以包含基本执行字符集 (2.3) 的任何成员和 Unicode UTF-8 编码形式的八位代码单元，并且由连续的位序列组成，其数量为实现定义。[...] C++ 程序可用的内存由一个或多个连续字节序列组成。**每个字节都有一个唯一的地址。**

因此，如果`sizeof`返回字节数并且`sizeof(char)`为 1，`char`则 C++ 的大小为 1 个字节。因此，*逻辑上*`char`是C++ 的一个字节，但不一定是事实上的标准 8 位字节。添加到 a将返回一个字节（根据 C++ 内存模型）的指针。因此，如果您想玩按字节操作对象指针的危险游戏，您应该将其强制转换为其中一种变体。如果你的类型也有限定符，你也应该把它们转移到你的“字节类型”中。*`n``char*``n``char``const`*

 *```
 template <typename Dst, typename Src>
    struct adopt_const {
        using type = typename std::conditional< std::is_const<Src>::value,
            typename std::add_const<Dst>::type, Dst>::type;
    };

    template <typename Dst, typename Src>
    struct adopt_volatile {
        using type = typename std::conditional< std::is_volatile<Src>::value,
            typename std::add_volatile<Dst>::type, Dst>::type;
    };

    template <typename Dst, typename Src>
    struct adopt_cv {
        using type = typename adopt_const<
            typename adopt_volatile<Dst, Src>::type, Src>::type;
    };

    template <typename T>
    T*  add_offset(T* p, std::ptrdiff_t delta) noexcept {
        using byte_type = typename adopt_cv<unsigned char, T>::type;
        return reinterpret_cast<T*>(reinterpret_cast<byte_type*>(p) + delta);
    } 
```

[例子](http://liveworkspace.org/code/18m0O9%242)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T07:32:39.013

请注意，`NULL`是特殊的。在其上添加偏移量是危险的。
`reinterpret_cast`不能删除`const`或`volatile`限定词。更便携的方式是 C-style cast。
`reinterpret_cast`像@user2218982's answer这样的特征，似乎更安全。

```
template <typename T>
inline void addOffset( std::ptrdiff_t offset, T *&ptr ) { 
    if ( !ptr )
        return;
    ptr = (T*)( (unsigned char*)ptr + offset );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-03T06:50:02.857

我的没有那么优雅，但我希望更具可读性。char *helper_ptr; helper_ptr= (char* ) ptr;

然后你可以使用 helper_ptr 逐字节遍历。

ptr = (SomeType*)(((char*)ptr) + 1) 将 ptr 推进 sizeof(SomeType) 而不是 1 个字节。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-10T19:01:37.653

如果你有：

```
myType *ptr; 
```

你也是：

```
ptr+=3; 
```

编译器肯定会通过以下方式增加您的变量：

```
3*sizeof(myType) 
```

据我所知，这是执行此操作的标准方法。

如果你想迭代让我们说一个 myType 类型的元素数组，那就是这样做的方法。

好的，如果你想使用

```
myNewType *newPtr=reinterpret_cast < myNewType * > ( ptr ) 
```

或者坚持使用普通的旧 C 并执行以下操作：

```
myNewType *newPtr=(myNewType *) ptr; 
```

然后递增***

# asp.net - 通过从另一个表中提取数据来插入到表中

> ID：15934125
> 
> 赞同：1
> 
> 时间：2013-04-10T18:56:33.527
> 
> 标签：asp.net, sql, vb.net, ms-access, relational-database

我从其他人那里继承了这个项目，需要对其进行清理以满足新的要求——他们是这样设计的。

我的 Access 数据库中有 2 个表（我在大括号中包含了字段的数据类型）：

**事件：**

事件ID {自动编号} | EventTitle {短文本} | 事件描述 {长文本} | EventDate {日期/时间} | EventCategory {使用 Categories/CategoryTitle 的行源查找}

**分类：**

CategoryID {自动编号} | CategoryTitle {短文本} | CategoryImage {短文本} | CategoryColor {短文本}

“类别”表包含有关特定类别的所有“主”信息，例如名称、图标（例如勾号、十字等）。

我有一个**查询**（在 Access 内部）将这两个表中的数据拉到一起，下面的字段按顺序排列：

事件ID | 活动标题 | 事件描述 | 活动日期 | 类别标题 | 类别图像

查询的 SQL 是：

```
SELECT Events.EventID, Events.EventTitle, Events.EventDescription,
Events.EventDate, Categories.CategoryTitle, Categories.CategoryImage,
Categories.CategoryColor FROM Events INNER JOIN Categories ON
Events.EventCategory = Categories.CategoryID ORDER BY
Events.EventDate; 
```

网站的其他区域依靠查询来检索信息。

在 Visual Studio 中，我试图将来自 asp 文本框和下拉控件的值插入到我的数据库中的以下字段中：

1.  EventTitle（到 Events.EventTitle）
2.  EventDescription（到 Events.EventDescription）
3.  EventDate（到 Events.EventDate）
4.  EventCategory（到 Events.EventCategory）

第 4 号是有问题的，因为它目前是对“主”事件表的访问查找，该表包含有关实际类别的信息。据推测，从来没有打算以这种方式将数据插入表中。设置事件类别的唯一可能方法是使用 Access 数据库内的下拉组合框来选择事件。

最后，这是我正在编写的插入数据库的子例程：

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
     Dim conn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
     conn.Open()
     Dim cmd As New OleDbCommand("INSERT INTO Events (EventTitle, EventDescription, EventDate, EventCategory) VALUES (@f1,@f2,@f3,@f4)",
    conn)
     cmd.Parameters.AddWithValue("@f1", tb_eventtitle.Text)
     cmd.Parameters.AddWithValue("@f2", tb_eventdescription.Text)
     cmd.Parameters.AddWithValue("@f3", DateTime.ParseExact(tb_eventdate.Text, "dd/MM/yyyy",
     CultureInfo.InvariantCulture))
     cmd.Parameters.AddWithValue("@f4", dd_eventcategory.SelectedValue)
     cmd.ExecuteNonQuery()
     conn.Close()
 End Sub 
```

网站上其他地方还有其他 ASP.NET 数据绑定控件，它们依赖于“类别”表的内容保持不变，所以我怎样才能将上面列出的字段插入到“事件”表中（**特别是**EventCategory )?

**编辑：**

这是我完成的子：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles
  Button1.Click
     Dim conn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
     conn.Open()
     Dim cmd As New OleDbCommand("INSERT INTO Events (EventTitle, EventDescription, EventDate, EventCategory) VALUES (@f1,@f2,@f3,@f4)",
     conn)
     cmd.Parameters.AddWithValue("@f1", tb_eventtitle.Text)
     cmd.Parameters.AddWithValue("@f2", tb_eventdescription.Text)
     cmd.Parameters.AddWithValue("@f3", DateTime.ParseExact(tb_eventdate.Text, "dd/MM/yyyy",
     CultureInfo.InvariantCulture))
     cmd.Parameters.AddWithValue("@f4", dd_eventcategory.SelectedIndex + 1)
     cmd.ExecuteNonQuery()
     conn.Close()
 End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:27:56.603

查找字段可能具有欺骗性。假设您有 [Categories] 表

```
CategoryID  CategoryTitle
1           Pub Crawl
2           Booze Up
3           Big Drunk 
```

当您在数据表视图中打开 [Events] 表时，它看起来像这样

```
EventID EventTitle  EventCategory
1       Thursday    Pub Crawl 
```

如果您想添加一个新的“星期五”事件，您会认为它类似于

```
INSERT INTO Events (EventTitle, EventCategory) VALUES ("Friday", "Big Drunk") 
```

但是由于类型转换失败，“Microsoft Access 将 1 个字段设置为 Null...”而失败。相反，你必须做

```
INSERT INTO Events (EventTitle, EventCategory) VALUES ("Friday", 3) 
```

*数字*`3`CategoryID在哪里，而不是您在数据表视图中看到的。

 *因此，您需要做的是确保从组合框（不是 CategoryTitle）中检索（数字）CategoryID 并将其插入到您的 Events 表中。

顺便说一句，这就是为什么经验丰富的 Access 开发人员会避免查找字段的原因：他们隐藏了数据库的实际工作，导致混乱、沮丧，而且，是的，让一些用户喝醉了……；）*

# android - 如何用两个 TextView 使 ImageView 居中？

> ID：15934129
> 
> 赞同：1
> 
> 时间：2013-04-10T18:56:39.933
> 
> 标签：android, android-layout

xml 如何做这样的事情？

## ![样本](https://i.stack.imgur.com/kmJ5j.png)

即我有两个TextView，一个在另一个下方，都向左对齐。此外，在同一“行”上，我有一个向右对齐的 ImageView。最后，我需要使用 TextViews 将图像垂直居中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:02:28.697

以RelativeLayout为父级，在父级左侧的textviews中取两个，在另一个下方。并将 ImageView 放在父右侧，垂直居中

检查这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="10dp"
    android:paddingBottom="10dp">

    <TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:id="@+id/textview1"   
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_marginLeft="5dp"
     android:textColor="#000000"
     android:textSize="17sp"
     />
     <TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:id="@+id/textview2"   
     android:layout_below="@+id/textview1"
     android:layout_alignParentLeft="true"
     android:layout_marginLeft="5dp"
     android:layout_marginTop="5dp"
     android:textColor="#000000"
     android:textSize="17sp"
     />
    <ImageView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:layout_alignParentRight="true"
     android:layout_centerVertical="true"
     android:layout_marginRight="5dp"
     />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:07:21.643

试试这个，它非常简单，布局不会在任何分辨率下扭曲，使用相对布局会扭曲......

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="5" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="4"
        android:src="@drawable/ic_launcher" />
  </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:44:52.897

您可以使用单个`TextView`小部件实现所需的显示。您可以使用`SpannableString`or`SpannableStringBuilder`来显示具有混合格式的文本，`TextView.setCompoundDrawables`或者`TextView.setCompoundDrawablesWithIntrinsicBounds`在文本的右侧显示图像。

# c# - Windows 应用商店应用程序 - 加密密钥对话框

> ID：15934133
> 
> 赞同：0
> 
> 时间：2013-04-10T18:56:50.277
> 
> 标签：c#, javascript, windows-8, windows-runtime, windows-store-apps

我设法在 c#（下面的代码）中创建了加密密钥对话框，并且我得到了响应消息的状态代码 ok。没关系。

但现在我想知道，如果同样的想法可以在 javascript 项目中完成？我更喜欢使用 javascript，因为我无法让 ajax 请求在 c# 中工作（我用它来访问来自 api 的数据）。

```
 try
        {
            HttpClientHandler aHandler = new HttpClientHandler();
            aHandler.ClientCertificateOptions = ClientCertificateOption.Automatic;

            HttpClient aClient = new HttpClient(aHandler);
            HttpResponseMessage aResp = await aClient.GetAsync("https://www.somelink.com/"); //this is not the link I used
            txtBlock.Text = aResp.StatusCode.ToString();
        }
        catch (Exception theEx)
        {
            txtBlock.Text = theEx.Message;
        } 
```

![在此处输入图像描述](https://i.stack.imgur.com/I32l0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T11:54:23.650

正如我从这个线程中看到的：

[http://social.msdn.microsoft.com/Forums/windowsapps/en-US/0d005703-0ec3-4466-b389-663608fff053/using-client-side-certificates-in-windows-metro?forum=winappswithcsharp](http://social.msdn.microsoft.com/Forums/windowsapps/en-US/0d005703-0ec3-4466-b389-663608fff053/using-client-side-certificates-in-windows-metro?forum=winappswithcsharp)

2012 年 9 月 6 日星期四下午 1:15，来自 Gaurav Mantri (MVP)

他尝试在 C# 和 JS 中以程序方式导入证书，在 JS 中他设法做到了这一点，所以如果他需要该证书，那么他会使用它，所以从逻辑上讲 - 在 JS 中是可能的

# css - 响应式电子邮件模板 android 2.3.6

> ID：15934134
> 
> 赞同：0
> 
> 时间：2013-04-10T18:56:55.950
> 
> 标签：css, responsive-design, media-queries, email-templates

我在互联网上阅读，自 Android 版本 2.3 起支持响应式电子邮件模板。我是运行 Android 2.3.6 的三星 Galaxy Advance 的所有者。遗憾的是，该设备似乎根本不支持邮件模板中的任何类型的 CSS。

有谁知道是否有必须打开的设置？我已经尝试过简单的 Gmail 和电子邮件应用程序，但它们都没有像在 iPhone 上那样显示电子邮件。

如果有解决方案，我想听听。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:36:00.753

Gmail 不支持媒体查询。尝试通过不同的域在您的本地电子邮件应用程序上阅读。（连接 you@somewheredifferent.com）我的工作电子邮件有问题 - 公司 Microsoft Exchange（或他们拥有的一些安全软件）正在剥离媒体查询。当发送到 me@myownsite.com 时，它完美地通过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T15:41:54.530

是的，如果没有样式标签，则不会应用媒体查询。gmail 和其他一些电子邮件客户端就是这种情况。如果您首先构建移动版本并创建媒体查询以重新创建桌面版本，那么它在每个移动设备上都会很酷。这样做的缺点是当您在不支持样式标签（因此媒体查询）的桌面客户端上打开邮件时，您将在桌面上看到移动版本。

如果您正在寻找可以为您工作的模板，那么我推荐 Antwort。这是一个三列布局，以我之前提到的方式工作。( [http://internations.github.io/antwort/](http://internations.github.io/antwort/) )

如果您正在寻找工具，那么我向您推荐：www.edmdesigner.com - 尽管测试阶段尚未开始。

# html - CSS：如何让长文本标签的文本缩进？

> ID：15934135
> 
> 赞同：2
> 
> 时间：2013-04-10T18:56:57.323
> 
> 标签：html, css, less

我有一个列表，每个标签都有 2 个标签`<li>`，一旦第二个标签中的文本变长，换行符就会从下一行的开头开始，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/ybybM.png)

如何缩进文本以使其全部从同一行开始？

```
 .caspName {
  color: @darkTextColor;
  width: 105px;
  display: inline-block;
  &:after {
    content: ":";
  }
```

```
<ul>
  <li>
    <label class="caspName">Investment</label>
    <label class="caspData">Credit card processing</label>
  </li>
</ul>
```

在此处查看小提琴：http: [//jsfiddle.net/4UKT2/](http://jsfiddle.net/4UKT2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:19:50.313

如果我对您的理解正确，您会想要[这样的小提琴表演](http://jsfiddle.net/4UKT2/2/)（我将其更改`label`为`span`）。

```
.caspName{
    width: 105px;
    display: inline-block;
    margin-left: -110px;
}
.caspName:after{
    content: ":";
}

li {
    padding-left: 110px;
} 
```

# django - nginx 中用于 django/uwsgi 的根指令

> ID：15934140
> 
> 赞同：0
> 
> 时间：2013-04-10T18:57:08.957
> 
> 标签：django, nginx, security, uwsgi

假设我有一个 django 项目`/home/django/project0/`，我的设置是：

```
server {
    ...
    root /usr/share/nginx/www/project0;
    ...

    location / {
        uwsgi_pass unix:///tmp/uwsgi/uwsgi_project0.sock;
        include uwsgi_params;
        ...
    }

    location /static/ {
        root /usr/share/nginx/www/project0;
        ...
    }

    # similar settings for robots.txt and favicon.ico

} 
```

1.  由于静态文件将由不同的文件夹提供服务，而 django 将通过 uwsgi 提供服务，根指令不是没用吗？

2.  如果我不将值设置为 root 会发生什么？

3.  我问的主要原因是因为在网上的许多文章中，我看到人们将根目录设置为`/home/django/project0`，据我所知，这会使项目的`settings.py`文件公开（django 社区[不推荐这种做法）。](https://docs.djangoproject.com/en/1.5/topics/security/#additional-security-topics)这种方法在安全方面不是错误的，还是我在这里遗漏了什么？

# jquery - nodejs没有在帖子中重定向

> ID：15934147
> 
> 赞同：0
> 
> 时间：2013-04-10T18:57:24.200
> 
> 标签：jquery, node.js, express

我目前正在玩node.js、express和jade，但不知道为什么当我使用jQuery POST时它不会重定向。我四处阅读，似乎这是一个已知的错误，但无论如何都无法弄清楚。这是我的参考代码：

后端代码：

```
app.get('/ace', function (req, res) {
  res.render('ace', {test: 4});
});

app.post('/ace', function (req, res) {
  var input = req.body.submittedInput;
  console.log(input);
  res.redirect('/');
}); 
```

前端（玉石）

```
script
var editor = ace.edit("editor");
var session = editor.getSession();
editor.setTheme("ace/theme/monokai");
editor.getSession().setMode("ace/mode/javascript");
$.noConflict();
jQuery(document).ready(function($) {
 // Use jQuery in here
  $("#submitButton").click(function() {
  $.post("/ace", 
  { "submittedInput": session.getLines(0, session.getLength()-1)},
    "json");
  });
 });
button(type='button', id="submitButton")
 | SUBMIT 
```

这是控制台输出

```
[ '//Begin Typing Code here', '4' ]
POST /ace 302 5ms - 35
GET / 200 59ms - 12.54kb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:19:35.673

这似乎是一种误解，您编写的代码到底是如何工作的：

```
$.post(
  "/ace",
  { "submittedInput": session.getLines(0, session.getLength()-1)},
  "json"
); 
```

这会向 发送一个 POST 请求`/ace`，但您的重定向只会影响这个特定的请求，它不会影响整个浏览器会话。您现在所拥有的基本上与您删除重定向行并在第一个请求完成后执行第二个`$.post`请求相同。`/`

如果您想重定向浏览器本身，那么您需要删除您的`redirect`行，而是发回一些包含目标 URI 或其他内容的 JSON。然后您的 jQuery 代码将读取该代码并重定向页面本身。

# parsing - REXX - 从 CSV 文件解析

> ID：15934148
> 
> 赞同：2
> 
> 时间：2013-04-10T18:57:27.013
> 
> 标签：parsing, csv, rexx

我在从文本文件解析 CSV 时遇到问题，想知道你们是否可以帮助我。到目前为止，我有以下内容，

CSV 文件 (DATA.txt) 看起来像这样，它总是有 15 个字段，全部用逗号分隔。并非所有字段都是强制性的，因此有些字段将被填写，有些字段为空白。

```
Seattle,Lastname,Firstname,DOB,SEX,etc,etc
Seattle,Lastname,Firstname,DOB,,etc,etc
Portland,Lastname,Firstname,DOB,SEX,,,etc
Portland,Lastname,Firstname,DOB,SEX,etc,etc 
```

这是我的 REXX 代码

```
SOURCEFILE = "C:\DATA\DATA.TXT"
IF A=2 THEN DO COUNTER=1 TO LINES(SOURCEFILE)
    PARSE VALUE LINEIN(SOURCEFILE) WITH CITY "," LAST_NAME "," FIRST_NAME "," MOM_NAME "," MIDDLE_NAME "," DAD_NAME "," DOB "," etc "," etc "," etc "," etc "," SEX "," etc "," etc
    CALL SETCURSOR 4,23
    CALL CREATEDATA
END

CREATEDATA:
CALL TYPE CITY
CALL PRESS TAB
CALL TYPE LAST_NAME
CALL PRESS TAB
CALL TYPE DATE(U)
CALL PRESS TAB
CALL TYPE FIRST_NAME
CALL PRESS TAB
CALL PRESS ENTER
RETURN 
```

我不确定在解析时是否应该使用 ARG 或 VAR，或者我是否正确编写了前两行。事实上，我知道我的 CREATEDATA 函数可以正常工作，因为我输入的是“CITY”，但不是解析的值。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:26:10.993

一个问题 if A=2 then in 的目的是什么

```
IF A=2 THEN DO COUNTER=1 TO LINES(SOURCEFILE) 
```

如果 A != 2 则绕过循环。我怀疑你的程序应该是：

```
SOURCEFILE = "C:\DATA\DATA.TXT"
DO COUNTER=1 TO LINES(SOURCEFILE) 
    PARSE VALUE LINEIN(SOURCEFILE) WITH CITY "," LAST_NAME "," FIRST_NAME "," MOM_NAME "," MIDDLE_NAME "," DAD_NAME "," DOB "," etc "," etc "," etc "," etc "," SEX "," etc "," etc
    CALL SETCURSOR 4,23
    CALL CREATEDATA
END

RETURN   /* prevent the fall through to createdata */

CREATEDATA:

--------------------------- 
```

parse 语句具有以下基本格式

解析 [来源] [解析控制]

其中 [来源] 包括

arg - 过程调用的参数 pull - 从堆栈中提取的数据 var - 数据来自变量值 ... 内联提供数据

所以你的解析可以像

```
 linein = LINEIN(SOURCEFILE)
   PARSE var linein CITY "," LAST_NAME "," FIRST_NAME "," MOM_NAME "," MIDDLE_NAME "," DAD_NAME "," DOB "," etc "," etc "," etc "," etc "," SEX "," etc "," etc 
```

或者

```
 DO COUNTER=1 TO LINES(SOURCEFILE) 
        CALL SETCURSOR 4,23
        CALL CREATEDATA LINEIN(SOURCEFILE)
    END

    RETURN   /* prevent the fall through to createdata */

    CREATEDATA:
    parse arg CITY "," LAST_NAME "," FIRST_NAME "," MOM_NAME "," MIDDLE_NAME "," DAD_NAME "," DOB "," etc "," etc "," etc "," etc "," SEX "," etc "," etc 
```

最后 ass ross 说你应该尝试避免 lines(sourcefile) 因为它涉及读取整个文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:34:56.483

几点评论：

1)`Lines(SourceFile)`在 Windows 系统上可能涉及读取整个文件以计算 CR-LF 序列。然后你的`Parse value LineIn(SourceFile)`循环再次读取它。执行此操作的典型 Rexx 方法是：

```
Address SYSTEM 'TYPE' SourceFile with output stem Lines.
Do Counter = 1 to Lines.0
    Parse var Lines.Counter ...
End
Drop Lines. 
```

至少，只要文件不太大，以至于将其保存在数组中会占用大量内存。

2）您在循环结束时流入`CreateData`，这就是您看到“CITY”的原因。你需要一个`Return`或`Exit`之后的`End`指令。

3) 鉴于#2，很明显它`Parse`永远不会被执行，因为`City`它是未初始化的（Rexx 中未初始化变量的值是它的大写名称）。这是有条件的`A=2`，一定不是这样。

# c++ - OpenCV，C++ cvCaptureFromFile 不工作，但 Python VideoCapture 是

> ID：15934149
> 
> 赞同：1
> 
> 时间：2013-04-10T18:57:28.477
> 
> 标签：c++, python, opencv

我正在处理一些我需要使用的遗留代码，以及在 Python 中做一些工作。我可以在 Python 中读取文件，但不能在 C++ 中读取。这是C++代码

```
int main(int argc, char** argv) {

  CvCapture *capture = NULL; 

  capture = cvCaptureFromFile("path/to/foo.mov");
  if (!capture) {
    std::cerr << "Cannot open " << "path/to/foo.mov" <<   std::endl; 
    return 1; 
  }
  return 0; 
} 
```

# json - 遍历 DOM 并形成一个 JSON 对象

> ID：15934154
> 
> 赞同：0
> 
> 时间：2013-04-10T18:57:47.810
> 
> 标签：json, dom, loops

我正在迭代 DOM 并尝试使用 javascript 创建一个 JSON 对象。以下是代码-

```
<div id="div1" class="clickDiv" style="position: absolute; left: 259px; top: 32px; border: 10px none;"> 
```

节省

当单击按钮以将 DOM id 及其各自的样式保存在 JSON 对象中时，将执行以下函数。

```
 function savecomm(){
var values = [];
var html = [];

$(".clickDiv").each(function() {

        values.push($(this).attr("id"));
        var styleProps = $(this).css( ["position", "left", "top"] );
        $.each( styleProps, function( prop, value ) {
        html.push( prop + ": " + value );
        });

}); 
console.log(values);
console.log(html);

} 
```

我在控制台中得到以下信息：-

```
["div1", "div2", "div3"]
["position: absolute", "left: 712px", "top: 31px", "position: absolute", "left: 872px", "top: 25px", "position: absolute", "left: 587px", "top: 19px"] 
```

我想将 div1 与其各自的样式相关联并将其保存为 JSON 对象。例如：-

```
div1:[position: absolute", "left: 712px", "top: 31px",], div2:[position: absolute", "left: 602px", "top: 51px",] 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:03:07.330

像这样，使用 ID 作为键：

```
function savecomm() {
    var values = {};

    $(".clickDiv").each(function () {
        var html = [];
        var styleProps = $(this).css(["position", "left", "top"]);
        $.each(styleProps, function (prop, value) {
            html.push(prop + ": " + value);
        });
        values[$(this).attr("id")] = html;
    });
    console.log(values);

} 
```

# c++ - 使用 QGLShaderProgram 时出现 GLSL 编译错误

> ID：15934158
> 
> 赞同：0
> 
> 时间：2013-04-10T18:57:55.050
> 
> 标签：c++, qt, opengl, glsl

我目前正在尝试 Qt 5 中的一些 opengl 组件，我正在使用 QtCreator 2.6.2、clang 4.2 在 Mac OSX 10.8 上编译我已经编写了一个非常基本的 GLSL 着色器，可以在 OpenGl Shader Builder 中很好地编译和链接，但是当我尝试使用 QGLShader 加载它时，它无法编译并且日志函数不返回任何错误消息。

顶点着色器：

```
attribute vec4 in_position;
attribute vec3 in_normal;
attribute vec3 in_color;
attribute vec2 in_tex;

uniform vec4 lightPosition;

varying vec2 texCoords;
varying vec3 normal;
varying vec3 vertToLightDir;

void main(void)
{
    gl_Position = gl_ModelViewProjectionMatrix * in_position;
    vec4 worldVert = gl_ModelViewMatrix * in_position;
    vertToLightDir = normalize(vec3(lightPosition - worldVert));
    normal = gl_NormalMatrix * in_normal;
    texCoords = in_tex;
} 
```

片段着色器：

```
uniform sampler2D texture0;
uniform vec4 lightColor;

varying vec2 texCoords;
varying vec3 normal;
varying vec3 vertToLightDir;

void main(void)
{
    float lightIntensity = clamp(dot(normal, vertToLightDir), 0.0, 1.0);
    gl_FragColor = (texture2D(texture0, texCoords) + (lightColor * lightIntensity)) * 0.5;
} 
```

加载着色器的代码：

```
QGLShader fragShader(QGLShader::Fragment);
bool success = fragShader.compileSourceFile("Fragment.glsl");
qDebug() << fragShader.log(); 
```

我使用调试器看到 compileSourceFile 函数返回 false，我还使用 access("Fragment.glsl", F_OK) 来查看程序是否设法找到文件并且确实找到了，顶点着色器文件也是如此，我似乎找不到他们无法编译的原因。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:59:49.450

经过一些调试后，我意识到我正在尝试在创建有效上下文之前编译着色器。我的错。

# javascript - 根据窗口大小动态定义 iframe 高度（非内容）

> ID：15934161
> 
> 赞同：2
> 
> 时间：2013-04-10T18:58:02.030
> 
> 标签：javascript, iframe

我找到了诸如[如何在 Firefox 中动态调整 iFrame 大小的线程？](https://stackoverflow.com/questions/4789689/how-to-dynamically-resize-iframe-in-firefox)其中讨论了基于远程内容调整 iframe 的大小；但是，我还没有找到一种方法（在 Firefox 中）根据窗口大小设置 iframe 的高度。

其他浏览器可以使用`.body.scrollHeight`，但 Firefox 似乎无法使用。见... [http://jsfiddle.net/gjrowe/X63KR/](http://jsfiddle.net/gjrowe/X63KR/)

要查看具有自动调整大小的 iframe，请查看此页面... [http://jsfiddle.net/gjrowe/y2WCP/](http://jsfiddle.net/gjrowe/y2WCP/)

它适用于 Chrome 等浏览器，但不适用于 Firefox

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:02:07.860

这是我为跨浏览器修复所做的...

我添加了这个javascript函数......

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
} 
```

然后我换了...

```
var content_height=document.body.scrollHeight-100; 
```

至...

```
var content_height=getDocHeight()-100; 
```

[您可以在http://jsfiddle.net/y2WCP/9/](http://jsfiddle.net/y2WCP/9/)看到它的实际效果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:15:42.137

我不知道你是否想使用 jQuery，但使用 jQuery 我想我解决了你的问题..

```
// Header is 50px and footer is 50px; therefore, 100px is of screen height is used
// Define content_height and consider the 100px which has already been used
var content_height=document.body.scrollHeight-100;
//alert(content_height);
content_height = $(window).height() -110;
//alert(content_height);
// Set iframe height
document.getElementById('pdf_frame').style.height=content_height+"px";

// Reset iframe height after window resize
$(function(){
    $(window).resize(function(){
        content_height = $(window).height()-110;
        //var content_height=document.body.scrollHeight-100;

        document.getElementById('pdf_frame').style.height=content_height+"px";
    });
}); 
```

[jsFiddle 链接](http://jsfiddle.net/Diabl0570/y2WCP/8/)

# actionscript-3 - 大型 Flash/AS3 项目的工作流程

> ID：15934162
> 
> 赞同：4
> 
> 时间：2013-04-10T18:58:06.033
> 
> 标签：actionscript-3, flash, user-interface, workflow, flash-cs6

我目前正在开发一个相当大的、大量 UI 的 Flash 游戏。我们的团队已经为此工作了大约 9 个月。我们之前都没有任何使用 Flash 的经验，因此我们在此期间不断改进我们的工作流程。但是，我们仍然觉得我们现在做的不是最优的，尤其是程序员和艺术家之间的接口，所以我想知道其他团队是如何工作的。

理想的工作流程应满足以下要求：

**1.重用的UI元素只定义一次**

这意味着，如果我们想要更改字体或按钮样式，我们不想遍历所有菜单并手动更改它们。我们希望它们在一个中心位置定义，并且只从那里引用。如果资产不仅在编辑时而且在运行时共享，即它们只下载一次，则可获得奖励积分。

**2\. 一切按需加载**

目前，我们有两个不同的加载步骤：首先，我们加载菜单库。完成后，玩家已经可以与所有菜单进行交互。然后，我们开始加载实际的游戏数据。但是，初始加载时间仍然太长，导致我们失去了许多潜在玩家。我们真正想做的是只加载主菜单所需的最低限度的内容，然后仅在玩家尝试实际打开相应菜单时加载其他所有内容。[Zuma Blitz](http://apps.facebook.com/zumablitz "祖玛闪电战")在这方面做得非常好。

**3\. 艺术家可以在没有程序员帮助的情况下进行细微的修改**

如果要在不改变实际功能的情况下重新设计菜单，那么艺术家应该可以在 Flash CS6 中自行完成。这需要在艺术和代码之间建立清晰的界面，并且艺术家应该可以在将更改发送给编码人员之前对其进行测试和调试。

-

我们当前的工作流程如下所示：艺术家将屏幕构建为 Flash CS6 中的 MovieClip，然后将其导出为 SWF。在代码方面，从屏幕 SWF 加载 MovieClip，并将它们用作我们基于 PureMVC 的系统中的 View 类。中介者通过它们的实例名称访问视图中的文本字段等元素。

这很容易出错，因为没有中心位置来定义接口（即实例名称）。编码员和艺术家之间需要大量的通信开销。此外，它还会在代码和影片剪辑的内部结构之间创建依赖关系。当艺术家想要对其应用某些效果时，他们无法将文本字段附加到不同的子影片剪辑。

我们正在试验一个基于事件的界面，该界面需要艺术家向影片剪辑添加几行代码。这比以前更不容易出错和相互依赖，但它仍然不能完全满足（3），除非我们编写额外的测试和调试工具。这一定是一个普遍的问题，我很难想象没有更简单的方法。

对于 (2)，我们还开始构建一个自制的解决方案，但同样，这是一项常见的任务，必须有一些我们可以使用的东西。

**那么，经验丰富的 Flash 开发人员如何管理如此大的项目呢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:24:01.990

我有一些想法，但它们是基于我独特的编码风格。

**1\. 重用的 UI 元素只定义一次**
根据*您*重用的内容，这可以像定义库符号并使用它一样简单。无需通过搜索和替换进行挖掘即可替换字体，您也可以在“字体嵌入”菜单中简单地更换字体。

对于跨 xfl 的共享，您可以使用[Flash Pro Project](http://help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7effa.html)。请记住，这涉及到一定的时间开销（文件在您打开或保存文件时需要更新，Flash 在项目中崩溃更多，尝试处理来自一次相同的项目）。

有些人使用 swcs，但这样做需要您在代码中实例化其中的内容，这可能不适用于您的工作流程。我仅将它们用于音频，并且我发现其中的对象必须在您指定为 AS 编译帧的帧上或之前进行编译，否则无法正确实例化声音。我怀疑从 swc 实例化的任何东西都会出现这种情况。

**2\. 一切都按需加载Flash 最保守的秘密之一是，使用***时间轴*和受过教育的编译器使用
非常容易完成。以下是它的工作原理：

 *如果您的 ActionScript 编译帧是大于 1 的帧，那么编译的方式如下：

*   第一帧之前：
    *   第 1 帧使用的任何视觉资源和嵌入的声音
    *   您的主文档类，以及直接从文档类引用的任何类（这是编写接口的一个很好的理由）
*   在您的 AS 编译框架 (N) 之前：
    *   您的 AS 类（代码，不一定是视觉/音频资产）
    *   任何库符号的视觉和音频资产设置为在帧 N 中为 AS 导出（即使它们未在 swf 中使用）
*   在时间轴上首次使用资产的帧之前：
    *   *未*选中在框架 N 中导出为 AS 的所有库符号中的视觉/音频资产。

如果您在第 1 帧上放置了一个微调器加载图形，并且您选择了第 10 帧作为导出帧，那么如果您只是让影片播放直到它到达第 10 帧，那么它将如何加载：

*   如果您的微调器中有任何重资产或在主文档类中直接引用，则用户在下载这些内容时会看到一个空白屏幕
*   微调器将变得可见并旋转
*   一旦您的 AS 类加载完毕，以及在第 10 帧中设置为导出的库符号和实际*在*第10 帧上的资产，您将看到这些资产，并且您需要使用它们的一切都准备就绪。
*   swf 的其余部分将继续在后台加载，更新`framesLoaded`.

实际上，我对第 10 帧上的对象使用了一个 setter 的组合，加上一个 ENTER_FRAME 处理程序来检查我们是否在第 10 帧上。我必须做的某些事情基于一个更容易，而另一些事情则可以更好地做另一种方式。

**3\. 美术人员可以在没有程序员帮助的情况下进行微小**
的更改 如果代码都在库符号的基类中，美术人员不需要理解它，只要他们不删除或更改所需的实例名称即可。`ADDED_TO_STAGE`我尝试通过观察（捕获阶段）和按类型观察显示对象来尽量减少对实例名称的依赖。一旦我引用了适当类型的对象，就很容易观察`REMOVED_FROM_STAGE`该对象以取消引用它。这类似于 RobotLegs 和 Swiz 等框架的工作方式。

此外，我使用了一个我称之为“语义闪存”的概念，我在其中做了很多基于标签的工作。我有一个基类 FrameLabelCip，它具有内置的 nextLabel() 和 previousLabel() 功能，以及调度`FRAME_LABEL_CONSTRUCTED`事件。从故事板事件名称到 Flash 标签名称真的很容易，只需构建图形 bang-bang-bang。

我大量使用[图形符号](http://active.tutsplus.com/articles/general/flashs-underrated-graphic-symbol/)来跨多个标签（例如项目符号列表）同步图形，而不是依赖代码。这个动画师的技巧使这些东西对技术含量较低的队友来说既强大又平易近人。*

# c# - XNA 中的 Draw() 方法在 for 循环中停止工作

> ID：15934165
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:15.640
> 
> 标签：c#, loops, xna, draw, spritebatch

到目前为止，这是我的第一个 XNA 游戏，我在尝试学习它时遇到了很大的困难。我正在关注 Microsoft 的教程，可在此处找到：[XNA Xbox Live Indie Games](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/creating_enemies)

时不时地，代码会中断。诚然，我已经删除了一些我认为我不需要的部分，并且我创建了两个敌人类别，而不仅仅是一个，但我认为我的调整没有遇到任何重大故障。

在 Game1.cs 主文件的 Draw() 方法中，我必须包含一个 for 循环，该循环将遍历可用敌人的列表并在更新时绘制它们。但是，代码行标记为不正确，我完全不知道为什么。我按照教程进行操作，看起来它应该可以工作，但事实并非如此。这是整个 Draw() 方法：

```
protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.ForestGreen);

        backRect.Width = 800;
        backRect.Height = 480;

        // TODO: Add your drawing code here
        // Start drawing
        spriteBatch.Begin();

        spriteBatch.Draw(backgroundTexture, backRect, Color.White);

        // Draw the Player
        player.Draw(spriteBatch);

        for (int i = 0; i < goblins.Count; i++)
        {
            goblins[i].Draw(spriteBatch);
        }

        // Stop drawing
        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

这是 for 循环中的代码不起作用。任何想法如何解决它和/或任何关于更好教程的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:59:53.587

我非常喜欢这个教程： [//xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)

它让我开始得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:06:47.360

你总是需要调用你`SpriteBatch.Begin()`的`SpriteBatch.End()`精灵批次。我不确定混合它们，但尽量避免它并尽可能少地使用 spritebatches。

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.ForestGreen);

    backRect.Width = 800;
    backRect.Height = 480;

    // TODO: Add your drawing code here
    // Start drawing
    spriteBatch.Begin();

    spriteBatch.Draw(backgroundTexture, backRect, Color.White);

    // Draw the Player
    spriteBatch.Draw(playerTexture, playerRect, Color.White);

    for (int i = 0; i < goblins.Count; i++)
    {
        spriteBatch.Draw(goblins[i].Texture, goblins[i].Rect, Color.White);
    }

    // Stop drawing
    spriteBatch.End();

    base.Draw(gameTime);
} 
```

有关文档，请参见[此处](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)。

# ruby-on-rails-3 - 未初始化的常量 ProfilesController

> ID：15934167
> 
> 赞同：1
> 
> 时间：2013-04-10T18:58:17.113
> 
> 标签：ruby-on-rails-3

我的 Profiles 控制器上有一个错误“未初始化的常量 ProfilesController”。这是profiles_controller.rb：

```
class ProfilesController < ApplicationController
  def new
    @profile = Profile.new
  end

  def create
    @profile = Profile.new(params[:profile])

    if @profile.save
      redirect_to profile_path, notice: I18n.t('.profile.created')
    else
      render action: "new"
    end
  end
end 
```

这是 routes.rb：

```
 resources :profiles, only: [:new, :create] 
```

这是 rake 路由的输出：

```
 profiles POST   /profiles(.:format)                     profiles#create
   new_profile GET    /profiles/new(.:format)                 profiles#new 
```

当我单击“new_profile_path”的链接时，我收到错误消息，但对我来说一切似乎都正常吗？控制器名称是复数，路由可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:26:49.603

您很可能拼写错误的控制器文件。确认该文件是真实的：`/app/controllers/profiles_controller.rb'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:23:30.017

真的很奇怪，我创建了一个带有生成器的 Books 控制器，将所有内容重命名为 Profiles，然后它就可以正常工作了。据我所见，路线是相同的。奇怪的....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T13:11:23.860

当我检查控制器的名称是“profile_controller.rb”时，我遇到了同样的问题（虽然我是手动创建的）。但在定义中它是“ProfilesController”。

类 ProfilesController < ApplicationController

```
def index
end

def new     
    @profile =  Profile.new
end

def create  
end 
```

结尾

因此，如果您的控制器名称是正确的并且您已经添加了路由（“resources :profiles”），那么它将按预期工作

# perl - 从 Perl 生成一个 shell，对其进行配置，然后派生 STDOUT

> ID：15934168
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:20.837
> 
> 标签：perl, shell, fork, pipe, stdout

我使用 Perl 脚本来配置和生成一个已编译的程序，该程序需要以某种方式配置的子 shell，所以我使用`$returncode = system("ulimit -s unlimited; sg ourgroup 'MyExecutable.exe'");`

我想从中捕获并解析 STDOUT，但我需要将它分叉，以便在作业仍在运行时检查输出。这个问题很接近： [如何将 Perl 输出发送到 STDOUT 和变量？](https://stackoverflow.com/questions/634508/how-can-i-send-perl-output-to-a-both-stdout-and-a-variable)评分最高的答案描述了一个名为的函数，该函数`backtick()`创建一个子进程，捕获`STDOUT`并在其中运行命令`exec()`。

但是我的调用需要多行来配置 shell。一种解决方案是创建一个一次性的 shell 脚本：

```
#disposable.sh
    #!/bin/sh
    ulimit -s 无限
    sg ourgroup 'MyExecutable.exe'
```

然后我可以用`backtick(disposable.sh)`或得到我需要的东西`open(PROCESS,'disposable.sh|')`。

但我真的不想为此制作一个临时文件。`system()`愉快地接受多行命令字符串。我怎样才能得到`exec()`或`open()`做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:07:27.530

如果您想使用 shell 的强大功能（包括循环、变量，还包括多个命令执行），您必须调用 shell（`open(..., 'xxx|')`不这样做）。

您可以使用 shell`-c`选项将 shell 脚本传递给 shell（另一种可能性是将命令通过管道传送到 shell，但恕我直言，这更难）。这意味着`backtick`从另一个答案调用函数，如下所示：

```
backtick("sh", "-c", "ulimit -s unlimited; sg ourgroup 'MyExecutable.exe'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:23:08.923

与程序 **交互**时应使用 Expect ：http: [//metacpan.org/pod/Expect](http://metacpan.org/pod/Expect) 假设您的 *nix 上的 /bin/bash 与***bash-3.2$***之类的内容匹配，则以下程序可用于启动命令数量在 bash 控制台上使用 $exp->send，然后可以解析每个命令的输出以进行进一步的操作。

```
#!/usr/bin/perl
use Expect;
my $command="/bin/bash";
my @parameters;
my $exp= new Expect;
$exp->raw_pty(1);
$exp->spawn($command);
$exp->expect(5, '-re', 'bash.*$');
$exp->send("who \n");
$exp->expect(10, '-re', 'bash.*$');
my @output = $exp->before(); 
print "Output of who command is @output \n";
$exp->send("ls -lt \n");
$exp->expect(10, '-re', 'bash.*$');
my @output = $exp->before(); 
print "Output of ls command is @output \n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T05:17:34.703

带有反引号的系统`tee`会这样做，不是吗？

```
my $output = `(ulimit -s unlimited; sg ourgroup 'MyExecutable.exe') | tee /dev/tty`; 
```

或修改 Alnitak 的`backticks`（所以它确实使用了子外壳）？

```
my $cmd = "ulimit -s unlimiited ; sg ourgroup 'MyExecutable.exe'";
my $pid = open(CMD, "($cmd) |");
my $output;
while (<CMD>) {
   print STDOUT $_;
   $output .= $_;
}
close CMD; 
```

# sql - 如何在同一张桌子上进行多项选择？

> ID：15934170
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:22.170
> 
> 标签：sql, sql-server

嗨，我现在遇到了一个小问题，我正在 sql server 中进行存储过程。我想从多个表中得到一些结果并将其放入一个临时表中。所以我想我可以使用一个“选择进入”语句工作正常，直到我决定将多个选择添加到临时表中。例如：这是我的代码：

```
while @Compteur <= @wrhCodeEnd
  select lp.lotQty ,lp.lotID into ZeTable from TB_lotLot ltlt
  inner join TB_lotPal lp on ltlt.lotID=lp.lotID
  inner join TB_palSuper ps ON lp.spID=ps.spID
  inner join TB_expExpeditionLot eel ON eel.lotID=lp.spID
  where ps.wrhID <> @Compteur and
   ltlt.wrhID = @Compteur and
   lp.lotID not in(select ZeTable.lotID from ZeTable) 
```

问题是我不知道我是否可以在同一个临时表上进行多项选择，我还想用 where 子句检查表中的信息是否已经存在。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:04:05.723

您可以创建临时表，并可以使用插入语句添加具有所需列的记录，并可以在使用后将其删除。

# php - 成功登录时 JQueryMobile 登录页面重定向

> ID：15934171
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:22.377
> 
> 标签：php, javascript, jquery-mobile

在用户成功登录后尝试将用户重定向到 index.php。除了重定向之外，我一切正常。现在已经环顾了大约一个小时，但没有运气..我确定它与拥有该页面的 jQueryMobile 有关

试过

```
header('Location: index.php'); 
```

什么都没发生。

也试过

```
echo '<script type="text/javascript">$.mobile.changePage($(\'index.php\'), {transition : "slide"});</script>'; 
```

如果我将它们作为我的 php 代码的第一部分，两者都会进行重定向，但是当放置在我需要的地方时，它们什么也不做。

这是我的代码：

```
<?php include "layouts/header.php"; 
if (isset($_POST['submit'])) { // Form has been submitted.

  $username = trim($_POST['username']);
  $password = trim($_POST['password']);

  // Check database to see if username/password exist.
    $hashpass = sha1($password);
    $found_user = User::authenticate($username, $hashpass);

  if ($found_user) {
    $session->login($found_user);
    $message = "Logged in";
    // Redirect to index.php ********

  } else {
    // username/password combo not found 
    $message = "Username/password combination incorrect.";
    $forgotdisplay = "visible";
  }

} else { // Form was not been submitted.
  $username = "";
  $password = "";
}
?>
</head>
<body>
 <div data-role="page" id="loginForm">
    <div data-role="header">
      <h1>Assessment</h1>
    </div>
    <div data-role="content" class="centerContent">
        <h2>Login</h2>
        <p><?php echo output_message($message); ?></p>
        <form action="login.php" method="post" data-ajax="false">
          <table>
            <input type="text" id="username" name="username" maxlength="50" placeholder="username" value="<?php echo htmlentities($username); ?>" />
            <input type="password" id="password" name="password" maxlength="30" placeholder="password" value="<?php echo htmlentities($password); ?>" />            
            <input type="submit" name="submit" value="Login" />       
        </form>
        <a href="register.php" data-role="button" data-transition="slide">Sign Up</a>
        <a href="forgot.php" data-role="button">Forgot Your Password?</a>
        <p id="validate-status"></p>
    </div>
</div>
</body>
</html> 
```

提交有效凭据后，`$message`确实会正确更改为“登录”，因此我知道我在脚本中已经走了这么远。也尝试过`data-ajax="false"`和`"true"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:11:06.687

您好，您可能想将完整的域放在那里。我也有这个问题

```
header('location: www.yourdomain.com/index.php'); 
```

我相信这应该可以解决问题

# ruby-on-rails - s3 存储桶..您尝试访问的存储桶必须使用指定的端点进行寻址。请将所有未来的请求发送到此端点

> ID：15934176
> 
> 赞同：3
> 
> 时间：2013-04-10T18:58:34.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

嗨，我正在使用下面的代码来获取存储桶的大小。进行了全面研究，但唯一的方法是循环遍历每个文件。在循环遍历时，一些存储桶似乎是在不同的区域创建的，我最终得到了上面错误

```
AWS::S3::PermanentRedirect: The bucket you are attempting to access must be addressed         using   the specified endpoint. Please send all future requests to this endpoint. from /home//.rvm/gems/ruby-1.9.2-p180/gems/aws-s3-0.6.2/lib/aws/s3/error.rb:38:in `raise' 
```

终点是 us-west-1，需要帮助解决上述问题以及如何将我的代码动态切换到我的存储桶所属的区域。在失败的情况下还需要添加异常的建议下面是我的代码。请随意发表评论。

```
def get_bucket
  s3 = AWS::S3::Base.establish_connection!(:access_key_id => @config[:ACCESS_KEY_ID], :secret_access_key => @config[:SECRET_ACCESS_KEY])
  if !s3.nil?
    AWS::S3::Service.buckets.each do |bucket|
      puts bucket.inspect
      if !bucket.nil?
        size = 0
        # I'm harding coding below bucket names, for code not to fail
        if ![
             'cf-templates-m01ixtvp0jr0-us-west-1',
             'cf-templates-m01ixtvp0jr0-us-west-2',
             'elasticbeanstalk-us-west-1-767904627276',
             'elasticbeanstalk-us-west-1-akiai7bucgnrthi66w6a',
             'medidata-rave-cdn'
            ].include? bucket.name
          bucket_size = AWS::S3::Bucket.find(bucket.name)
          if !bucket_size.nil?
            bucket_size.each do |obj|
              if !obj.nil?
                size += obj.size.to_i
              end
            end
          end
        end

        load_bucket(bucket.name,bucket.creation_date,size,@config[:ACCOUNT_NAME])
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-19T08:32:46.520

问题是存储桶可以存在于不同的区域，虽然您可以列出来自同一连接的所有存储桶（与其他被锁定到创建它们的位置的 AWS 实体不同），但对存储桶的其他操作需要您登录到它们被限制到的特定“端点”（区域）。

我的解决方案是检查存储桶的位置，然后重新登录到该区域：

```
s3 = AWS::S3.new(@awscreds)
if s3.buckets[bucket].location_constraint != @awscreds[:region] then
  # need to re-login, otherwise the S3 upload will fail
  s3 = AWS::S3.new(@awscreds.merge(region: s3.buckets[bucket].location_constraint))
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T12:29:06.453

我不明白您如何构建 URL 来访问您的存储桶。

如果它是美国标准，你可以说[http://s3.amazonaws.com/BUCKETNAME/path/to/file](http://s3.amazonaws.com/BUCKETNAME/path/to/file)。如果它在其他任何地方，则不起作用（非巧合的是，您仅限于存储桶名称的域允许字符（仅限小写和数字））并且您使用[http://BUCKETNAME.s3.amazonaws.com/path /到/文件](http://BUCKETNAME.s3.amazonaws.com/path/to/file)。

这篇文章可能会有所帮助： [http ://docs.aws.amazon.com/general/latest/gr/rande.html](http://docs.aws.amazon.com/general/latest/gr/rande.html)

# xml - Twilio 不会从生成的 TwiML 生成回复 SMS 消息

> ID：15934177
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:44.187
> 
> 标签：xml, sms, twilio, twilio-twiml

我正在尝试在我的服务器上获得基本的 SMS 响应。[我在http://feedingforward-staging.herokuapp.com/api/sms](http://feedingforward-staging.herokuapp.com/api/sms)设置了一条路线，当您在浏览器中发出 GET 请求时，它会正确生成以下 TwiML：

```
<?xml version="1.0" encoding="UTF-8"?><Response><Sms>Hey Monkey. Thanks for the message!</Sms></Response> 
```

我已将我的 Twilio 号码配置为指向此 URL，当我向该号码发送文本时，服务器会收到请求并使用代码 200（OK）处理它。但是，Twilio 不使用 TwiML 来发送响应文本。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:46:06.633

在您的 Twilio 仪表板上，在此处访问日志 -> 通知：[https](https://www.twilio.com/user/account/log/notifications) ://www.twilio.com/user/account/log/notifications 并查看在您发送消息时是否生成了任何类型的消息。

*披露：这里的 Twilio 员工。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:41:49.523

在 Twilio 一位出色的客户服务代表的帮助下修复了它。

我的应用程序将标头返回到 Twilio，内容类型设置为“application/json”。我将其更改为“应用程序/xml”并且它有效！

# django - 基于通用日期的类视图中的 Django TemplateSyntaxErrors

> ID：15934179
> 
> 赞同：1
> 
> 时间：2013-04-10T18:58:44.593
> 
> 标签：django

我正在尝试更新旧的 Django 项目（最后在 Django 1.4 工作）以使用基于类的通用视图（在 Django 1.5 中）

以下曾经工作

模板：

```
{% block content %}
    {% for month in date_list %}
        <h2><a href="{% url coltrane_entry_archive_month year,month|date:"b" %}">{{ month|date:"F" }}</a></h2>
        <h2>Blah</h2>
    {% endfor %}
{% endblock %} 
```

网址.py

```
urlpatterns = patterns('django.views.generic.date_based',
...   
    (r'^(?P<year>\d{4})/$', 'archive_year', dict(entry_info_dict,make_object_list=True), 'coltrane_entry_archive_year'),
    (r'^(?P<year>\d{4})/(?P<month>\w{3})/$', 'archive_month', entry_info_dict, 'coltrane_entry_archive_month'),
...
) 
```

但是，当我更新 urls.py 以使用泛型类时

```
class ArticleYearArchiveView(YearArchiveView):
    queryset = Entry.objects.all()
    date_field = "pub_date"
    make_object_list = True
    allow_future = True

urlpatterns = patterns('',
...
    url(
        r'^(?P<year>\d{4})/$',
        ArticleYearArchiveView.as_view(),
        name='coltrane_entry_archive_year'
    ),
    url(
        r'^(?P<year>\d{4})/(?P<month>\w{3})/$',
        dates.MonthArchiveView.as_view(
            template_name='coltrane/entry_archive_month.html',
            queryset=Entry.objects.filter(status=Entry.LIVE_STATUS),
            date_field='pub_date'),
        name="coltrane_entry_archive_month"
    ),
...
) 
```

以下 TemplateSyntaxError 开始出现：

**无法解析某些字符：年|、月||日期：“b”**

我可以使用以下方法渲染模板并检查传递给 coltrane_entry_archive_month 的内容：

```
{% for month in date_list %}
    {{ year }}
    {{ month|date:"b" }}
{% endfor %} 
```

我确实注意到 {{ year }} 被渲染为 'Jan. 1, 2013' 而不是 '2013' 匹配 url 中的正则表达式。这个我不明白。

然后我尝试渲染以下内容：

```
{% for month in date_list %}
    {% url "coltrane_entry_archive_month" "2013","apr" %}
{% endfor %} 
```

不高兴，这次 TemplateSyntaxError 是：

**无法解析余数：来自 '"2013","apr"' 的 ',"apr"'**

通用类视图和 url 在 Django 中似乎都是较大的主题，所以任何指针都会非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:12:07.033

[url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)标签不接受逗号分隔的参数，只是用空格列出它们。

```
{% for month in date_list %}
    {% url "coltrane_entry_archive_month" "2013" "apr" %}
{% endfor %} 
```

这意味着您需要将实际模板更改为

```
{% url "coltrane_entry_archive_month" year month|date:"b" %} 
```

也只是一个注释（我注意到您在第二个示例中遵循了该注释）

> 不要忘记在函数路径或模式名称周围加上引号！
> 
> 在 Django 1.5 中更改：第一个参数以前没有被引用，这与其他模板标签不一致。从 Django 1.5 开始，它根据通常的规则进行评估：它可以是带引号的字符串或将在上下文中查找的变量。

# excel - 将 A 列中的每个单元格与 B 列和 C 列中的每个单元格进行比较

> ID：15934180
> 
> 赞同：0
> 
> 时间：2013-04-10T18:58:47.337
> 
> 标签：excel, vba

我有一个包含三列的 Excel 文件。每列中的单元格是不同的范围，例如 A 列有 797340 个单元格，B 列有 91617 个单元格，C 列有 95891 个单元格。我需要比较 A 列中的每个值，看看这个值是在 B 列还是在 C 列，如果条件为 TRUE，则加粗单元格或将颜色更改为红色。如果有什么方法可以使用 Excel 公式实现这一点？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:07:27.220

您可以使用条件格式。请参考下图。它只是一个演示。

> 选择A列>转到条件格式>>新规则>>使用公式确定要格式化的单元格
> 
> 输入公式>>格式为真的值>>选择格式>>确定

```
=OR( IF(ISNA(VLOOKUP(A1,B:B,2,0)),FALSE,TRUE),IF(ISNA(VLOOKUP(A1,C:C,3,0)),FALSE,TRUE)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/9srjG.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:02:34.387

为了让生活更轻松，请使用条件格式并应用您自己的自定义规则。

[http://office.microsoft.com/en-gb/excel-help/quick-start-apply-conditional-formatting-HA010370614.aspx](http://office.microsoft.com/en-gb/excel-help/quick-start-apply-conditional-formatting-HA010370614.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:13:27.147

除非有理由需要使用代码处理此问题，否则您可以根据公式在 excel 中设置条件格式。

例如，您可以基于以下公式创建新的条件格式设置规则：

```
=IF(ISERROR(VLOOKUP([Cell in Column A],[Column B Range],1,FALSE)),"FALSE","TRUE") 
```

当在 B 列中找到匹配值时，此公式将返回 true。然后只需对 C 列再次应用相同的规则。

将此规则应用于 A 列单元格的整个范围，并将条件格式设置为在 true 时返回粗体和红色。

祝你好运！

一个工作表中的范围示例：应用的公式是

```
=IF(ISERROR(VLOOKUP($B3,$F:$F,1,FALSE)),"FALSE","TRUE") 
```

![例子](https://i.stack.imgur.com/t2XTZ.jpg)

# android - 为 Native App Google Analytics 跟踪包含内部版本号的最佳方式是什么？

> ID：15934184
> 
> 赞同：8
> 
> 时间：2013-04-10T18:59:04.147
> 
> 标签：android, ios, sdk, google-analytics, metadata

我了解如何发送**应用程序版本**号，但无法过滤**应用程序内部**版本号变得越来越困难。是否有关于在何处包含内部版本号的最佳做法？

是将其附加在“应用程序版本”变量的括号中还是作为自定义指标？不确定什么是最好的。

我正在为 Android 和 iOS 实现这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T01:20:55.480

看起来最好的选择是将其添加到自定义维度，因为任何其他选项都需要字符串解析：

*   [Android 自定义维度](https://developers.google.com/analytics/devguides/collection/android/v4/customdimsmets#set-send)
*   [iOS 自定义维度](https://developers.google.com/analytics/devguides/collection/ios/v3/customdimsmets#set-send)

# r - 优化：将数据框拆分为数据框列表，每行转换数据

> ID：15934193
> 
> 赞同：8
> 
> 时间：2013-04-10T18:59:26.250
> 
> 标签：r, optimization, apply

**预备**：这个问题主要是教育价值，手头的实际任务已经完成，即使方法不是完全最优的。我的问题是*下面的代码是否可以针对速度进行优化和/或更优雅地实现*。也许使用其他软件包，例如 plyr 或 reshape。在实际数据上运行大约需要 140 秒，远高于模拟数据，因为一些原始行只包含 NA，因此必须进行额外检查。为了比较，模拟数据的处理时间约为 30 秒。

**条件**：数据集包含 360 个变量，是 12 个变量的 30 倍。我们将它们命名为 V1_1、V1_2...（第一组）、V2_1、V2_2...（第二组）等等。每组 12 个变量包含二分法（是/否）响应，在实践中对应于职业状态。例如：工作（是/否）、学习（是/否）等，共12种状态，重复30次。

**任务**：手头的任务是将每组 12 个二分变量重新编码为具有 12 个响应类别（例如工作、学习...）的单个变量。最终我们应该得到 30 个变量，每个变量有 12 个响应类别。

**数据**：我无法发布实际数据集，但这是一个很好的模拟近似值：

```
randomRow <- function() {
  # make a row with a single 1 and some NA's
  sample(x=c(rep(0,9),1,NA,NA),size=12,replace=F) 
}

# create a data frame with 12 variables and 1500 cases
makeDf <- function() {
  data <- matrix(NA,ncol=12,nrow=1500)
  for (i in 1:1500) {
    data[i,] <- randomRow()
  }
  return(data)
}

mydata <- NULL

# combine 30 of these dataframes horizontally
for (i in 1:30) {
  mydata <- cbind(mydata,makeDf())
}
mydata <- as.data.frame(mydata) # example data ready 
```

**我的解决方案**：

```
# Divide the dataset into a list with 30 dataframes, each with 12 variables
S1 <- lapply(1:30,function(i) {
  Z <- rep(1:30,each=12) # define selection vector
  mydata[Z==i]           # use selection vector to get groups of variables (x12)
})

recodeDf <- function(df) {
  result <- as.numeric(apply(df,1,function(x) {
    if (any(!is.na(df))) which(x == 1) else NA # return the position of "1" per row
  }))                                          # the if/else check is for the real data
  return(result)
}
# Combine individual position vectors into a dataframe
final.df <- as.data.frame(do.call(cbind,lapply(S1,recodeDf))) 
```

总而言之，有一个双 *apply 函数，一个跨列表，另一个跨数据框行。这使它有点慢。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:15:14.243

这是一种基本上是即时的方法。(system.time = 0.1 秒)

瑟`set`。columnMatch 组件将取决于您的数据，但如果它是每 12 列，那么以下将起作用。

```
MYD <- data.table(mydata)
# a new data.table (changed to numeric : Arun)
newDT <- as.data.table(replicate(30, numeric(nrow(MYD)),simplify = FALSE))
# for each column, which values equal 1
whiches <- lapply(MYD, function(x) which(x == 1))
# create a list of column matches (those you wish to aggregate)
columnMatch <- split(names(mydata), rep(1:30,each = 12))
setattr(columnMatch, 'names', names(newDT))

# cycle through all new columns
# and assign the the rows in the new data.table
## Arun: had to generate numeric indices for 
## cycling through 1:12, 13:24 in whiches[[.]]. That was the problem.
for(jj in seq_along(columnMatch)) {
 for(ii in seq_along(columnMatch[[jj]])) {
  set(newDT, j = jj, i = whiches[[ii + 12 * (jj-1)]], value = ii)
 }
} 
```

这也可以通过引用原始内容来添加列。

注意也`set`适用`data.frames`....

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T19:34:23.680

IIUC，`1`每 12 列只有一个。剩下的都是 0 或 NA。如果是这样，通过这个想法可以更快地执行操作。

**这个想法：**而不是遍历每一行并询问 的位置`1`，您可以使用具有`1500 * 12`每行的维度的矩阵只是`1:12`。那是：

```
mul.mat <- matrix(rep(1:12, nrow(DT)), ncol = 12, byrow=TRUE) 
```

现在，您可以将此矩阵与您的每个子集`data.frame`（相同维度，此处为 1500*12）相乘，然后将它们的“rowSums”（矢量化）与`na.rm = TRUE`. 这将直接给出您拥有 1 的行（因为 1 将乘以 1 到 12 之间的相应值）。

* * *

**data.table 实现：**在这里，我将用`data.table`这个想法来说明。由于它通过引用创建列，我希望在 a 上使用的相同想法`data.frame`会慢一点，尽管它应该会大大加快您当前的代码。

```
require(data.table)
DT <- data.table(mydata)
ids <- seq(1, ncol(DT), by=12)

# for multiplying with each subset and taking rowSums to get position of 1
mul.mat <- matrix(rep(1:12, nrow(DT)), ncol = 12, byrow=TRUE)

for (i in ids) {
    sdcols <- i:(i+12-1)
    # keep appending the new columns by reference to the original data
    DT[, paste0("R", i %/% 12 + 1) := rowSums(.SD * mul.mat, 
                     na.rm = TRUE), .SDcols = sdcols]
}
# delete all original 360 columns by reference from the original data
DT[, grep("V", names(DT), value=TRUE) := NULL] 
```

现在，您将剩下 30 列对应于 1 的位置。在我的系统上，这大约需要 0.4 秒。

```
all(unlist(final.df) == unlist(DT)) # not a fan of `identical`
# [1] TRUE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T20:11:59.393

我真的很喜欢@Arun 的矩阵乘法想法。有趣的是，如果你针对一些 OpenBLAS 库编译 R，你可以让它并行运行。

但是，我想为您提供另一种可能比矩阵乘法慢的解决方案，该解决方案使用您的原始模式，但比您的实现快得多：

```
# Match is usually faster than which, because it only returns the first match 
# (and therefore won't fail on multiple matches)
# It also neatly handles your *all NA* case
recodeDf2 <- function(df) apply(df,1,match,x=1) 
# You can split your data.frame by column with split.default
# (Using split on data.frame will split-by-row)
S2<-split.default(mydata,rep(1:30,each=12))
final.df2<-lapply(S2,recodeDf2) 
```

如果您有一个非常大的数据框和许多处理器，您可以考虑将此操作并行化：

```
library(parallel)
final.df2<-mclapply(S2,recodeDf2,mc.cores=numcores) 
# Where numcores is your number of processors. 
```

* * *

在阅读了@Arun 和@mnel 之后，我学到了很多关于如何改进这个功能的知识，方法是避免对数组的强制，通过处理`data.frame`逐列而不是逐行。我并不是要在这里“窃取”答案。OP 应该考虑将复选框切换到@mnel 的答案。

但是，我想分享一个不使用`data.table`并避免使用`for`. 然而，它仍然比@mnel 的解决方案慢，尽管有点慢。

```
nograpes2<-function(mydata) {
  test<-function(df) {
    l<-lapply(df,function(x) which(x==1))
    lens<-lapply(l,length)
    rep.int(seq.int(l),times=lens)[order(unlist(l))]
  }
  S2<-split.default(mydata,rep(1:30,each=12))
  data.frame(lapply(S2,test))
} 
```

我还想补充一点 @Aaron 的方法，如果从 a 开始，而不是 a ，使用`which`with`arr.ind=TRUE`也会非常快速和优雅。对 a 的强制比函数的其余部分慢。如果速度是一个问题，那么首先考虑将数据作为矩阵读取是值得的。`mydata``matrix``data.frame``matrix`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-11T01:54:47.193

可以使用基数 R 完成的另一种方法是简单地获取要放入新矩阵中的值并直接使用矩阵索引填充它们。

```
idx <- which(mydata==1, arr.ind=TRUE)   # get indices of 1's
i <- idx[,2] %% 12                      # get column that was 1
idx[,2] <- ((idx[,2] - 1) %/% 12) + 1   # get "group" and put in "col" of idx
out <- array(NA, dim=c(1500,30))        # make empty matrix
out[idx] <- i                           # and fill it in! 
```

# android - 安卓 Cocos 2d

> ID：15934197
> 
> 赞同：0
> 
> 时间：2013-04-10T18:59:29.667
> 
> 标签：android, cocos2d-android

我是 android 和 cocos2d for android 的新手 .. 我在一个未知站点找到了 api

第一个问题是 cocos2d 正式可用于 android 第二个我在显示动画时遇到问题请帮忙

我在资产文件夹中有图像名称“下载（1）.gif”也有“下载（8）.gif”，这是我的代码

应用程序在打开后立即崩溃

```
 public void addAnimation() {

     CCSprite addboxPuzzleOpen = CCSprite.sprite("download (1).gif");           
     addboxPuzzleOpen.setPosition(100,100);      
     addChild(addboxPuzzleOpen);

     CCAnimation OpenPuzzleAnim = CCAnimation.animation("", 0.2f);

     for (int i = 1; i < 8; i++) {            
             OpenPuzzleAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("download ("+i+").gif"));                 
        }
        CCAction OpenPuzzleAction = CCAnimate.action(2, OpenPuzzleAnim, true);
         addboxPuzzleOpen.runAction(OpenPuzzleAction);

     //}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:35:24.770

Cocos2D 仅适用于 iOS。在 Android 上，您必须使用 Cocos2d-x，它是引擎的 c++ 端口。类和方法与 Objective-c 非常相似。要从那里调用 java 方法，您可以使用 JNI（此处的示例：[http](http://www.useatyourownrisk.net/calling-java-methods-from-c-with-cocos2d-x/) ://www.useatyourownrisk.net/calling-java-methods-from-c-with-cocos2d-x/ ）。如果您想知道如何配置 Eclipse 以使用 Cocos2d-x for Android，Ray Wenderlich 的网站上有一个：[http ://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting -开始](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:30:24.937

只需将您的图片名称更改为：download_00.gif 为 download_08.gif

和

替换这一行：

OpenPuzzleAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("下载("+i+").gif")); 到 ...

OpenPuzzleAnim.addFrame(String.format("download_%02d.png", i));

如果它不能正常工作，那么将 gif 的格式更改为 png 或 jpg 以获得异常效果...... njoy

# text - SVG viewBox 影响文本元素的填充

> ID：15934202
> 
> 赞同：0
> 
> 时间：2013-04-10T18:59:40.430
> 
> 标签：text, svg, design-patterns, fill, viewbox

我试图显示一些填充有模式的文本，但找不到避免模式映射出现奇怪行为的方法。

这是问题的代码示例：http: [//jsfiddle.net/queZM/](http://jsfiddle.net/queZM/)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 500 310">
  <defs>
    <linearGradient id = "bgrad" x1 = "0%" y1 = "100%" x2 = "100%" y2 = "0%">
      <stop stop-color = "purple" offset = "0%"/>
      <stop stop-color = "green" offset = "100%"/>
    </linearGradient>
    <pattern id="bg" x="0" y="0" height="1" width="1" patternContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" fill="url(#bgrad)"/>
    </pattern>
  </defs>
  <text dx="0" dy="0" font-size="45" font-weight="bold" fill="url(#bg)">Hello World</text>
</svg> 
```

如您所见（如果没有，请调整显示结果的左下部分的大小），渐变映射有偏移量。此偏移量根据图像的比例而变化。我真的不明白。

如果我删除 svg 标记中的 viewBox 部分，一切都很好（除了我将这张巨大的图片卡在其最终的动态大小的 HTML 容器中）。

如果我使用矩形而不是文本，它似乎很好。

如果文本有 0,0 的偏移量，没关系……</p>

但我想为文本设置一个偏移量，一个能够将我的 svg 图像填充为嵌入 HTML 元素的视图框。我真的不明白！

如果您有任何线索，那将非常有帮助！谢谢

PS：我知道我可以使用渐变填充，但我真的需要使用图案的东西。在示例中，为了使事情尽可能简单，我只使用了渐变，但最终它将是与另一个图像叠加的渐变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:23.710

我打开了一个错误报告：[http ://code.google.com/p/chromium/issues/detail?id=230340](http://code.google.com/p/chromium/issues/detail?id=230340)

总有一天会解决的

我认为它有点“解决”问题。

# node.js - Twitter Streaming API - Node.js 返回未经授权的错误 (OAuth)

> ID：15934204
> 
> 赞同：1
> 
> 时间：2013-04-10T18:59:51.523
> 
> 标签：node.js, http, twitter, oauth, twitter-oauth

我正在尝试使用 http.get 通过 OAuth 连接到 Twitters Streaming API，尽管我遇到了一个小问题。

脚本不断返回未经授权

我使用的代码如下，任何人都可以告诉我我是否遗漏了一些愚蠢的东西或者我的标题不正确。

```
var https = require('https');

var options = {
  host: 'stream.twitter.com',
  path: '/1.1/statuses/filter.json?track=bieber',
  method: 'GET',
  headers: {
      authorization: '
        OAuth 
        oauth_consumer_key      =   "", 
        oauth_nonce             =   "", 
        oauth_signature         =   "", 
        oauth_signature_method  =   "HMAC-SHA1", 
        oauth_timestamp         =   "", 
        oauth_token             =   "", 
        oauth_version           =   "1.0"
      '

  }
};

var req = https.request(options, function(res) {
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log(chunk);
  });
});

req.on('error', function(e) {
  console.log('Oops... ' + e.message);
});

req.write('data\n');
req.write('data\n');
req.end(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:19:03.733

我在这里遇到的问题是 OAuth 请求没有被签名，这说明授权失败。

OAuth 是一个复杂的过程，最好使用已经开发好的库或 NPM 模块。

我在这个实例中使用的特定 NPM 是[node-oauth](https://npmjs.org/package/oauth "npm-oauth")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T09:07:48.790

尝试这个：

```
var options = {
  host: 'stream.twitter.com',
  path: '/1.1/statuses/filter.json?track=bieber',
  method: 'GET',
  auth : "YOUR_ID:YOUR_PASS"
};
var https  = require('https');
https.get(options,function(res){
   res.on("data",function(trunk){
        //YOUR CODE
   }).on("end",function(){
        //YOUR CODE
   }).on("error",function(e){
        //YOUR CODE
   });
} 
```

# php - 回显目录中的所有图像？

> ID：15934209
> 
> 赞同：0
> 
> 时间：2013-04-10T19:00:21.673
> 
> 标签：php

我试图回显文件夹目录中的所有图像，但有几个例外/忽略。

这工作正常，除了它还为它回显的每张照片回显一张空白照片？为什么会发生这种情况，有人可以告诉我哪里出错了，谢谢。

```
<?php
$dirname = "./data/photos/".$profile_id."/";
$images = scandir($dirname);
$ignore = Array("_cover.jpg", "_default.jpg");

foreach($images as $curimg){
    if(!in_array($curimg, $ignore)) {
        echo "<img src='./data/photos/".$profile_id."/$curimg'/ class=\"profile_photos\"><br>\n";
    };
}     
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:05:49.937

您的图像源后似乎有一个额外的斜线：

```
 echo "<img src='./data/photos/".$profile_id."/$curimg'/ class=\"profile_photos\"><br>\n";
//--------------------------------------------------------^ here 
```

这可能会影响浏览器解析 DOM 的方式并导致出现额外的图像。

另外，小建议，请尝试改用此行：

```
 echo "<img src='".$dirname.$curimg."' class=\"profile_photos\"><br>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:06:44.100

您应该确保它`$curimg`实际上是一个 jpg 文件：

```
 if(!in_array($curimg, $ignore) && preg_match("/\.jpg$/i", $curimg)) { 
```

`scandir`不仅返回文件，还返回子目录，包括`.`和`..`。

# android - 强制用户在对话框中选择选项

> ID：15934215
> 
> 赞同：8
> 
> 时间：2013-04-10T19:00:40.590
> 
> 标签：android, android-fragments, android-dialog, android-dialogfragment

在第一次启动应用程序时，我想提示用户（通过对话框）选择他们的城市，然后保存他们的偏好并将适当的数据加载到列表视图中。但是，我注意到一个对话框可以通过后退按钮关闭，或者在对话框之外的任何地方按下，然后触发数据库的空值。

无论如何我可以强制对话框保持打开状态，直到用户选择一个选项？

我已经实现了`.setCancelable(false)`，这似乎不起作用。我的代码在下面，**DialogSetup**是我正在使用的内部类。

任何帮助/想法将不胜感激。

```
public class MainActivity extends ListActivity {
private Cursor lines;
private MetroSleepDb db;
private ListAdapter adapter;
public static final String PREFS_NAME = "METROSLEEP_PREFS";

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    chooseCityDialog();

}

public void setAdapters() {

    db = new MetroSleepDb(this);
    lines = db.getLines(); // you would not typically call this on the main thread
    //ListView listView = (ListView) findViewById(R.id.li);
    adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            lines, 
            new String[] {"line_id"}, 
            new int[] {android.R.id.text1}, 0);

    getListView().setAdapter(adapter);
    getListView().setOnItemClickListener(onAnswerClicked);

}

public String getItem(int pos) {

    Cursor c = (Cursor) adapter.getItem(pos);
    String value = c.getString(c.getColumnIndex("line_id"));
    return value;
}

private OnItemClickListener onAnswerClicked = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        String line_value = getItem(position);
        Intent intent = new Intent(MainActivity.this, ChooseStations.class);
        intent.putExtra("line", line_value);
        startActivity(intent);
    }

};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem  item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;

    case R.id.menu_settings:
        Intent intent = new Intent(this, SettingsActivity.class);
        startActivity(intent);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void chooseCityDialog() {
    DialogFragment newFragment = new DialogSetup();
    newFragment.show(getFragmentManager(), "citypref");
}

public static final class DialogSetup extends DialogFragment {
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.prompt_choose_city)
               .setCancelable(false) 
               .setItems(R.array.Cities, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                       //
               }
        });

        return builder.create();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T19:21:03.760

啊哈！您必须调用[`setCancelable(false)`](http://developer.android.com/reference/android/app/DialogFragment.html#setCancelable(boolean))，`DialogFragment`而不是`AlertDialog.builder`。看到这个问题：[AlertDialog's setCancelable(false) method not working](https://stackoverflow.com/questions/8906269/alertdialogs-setcancelablefalse-method-not-working)。

状态的文档`DialogFragment.setCancelable(boolean cancelable)`：

> 控制显示的 Dialog 是否可取消。使用这个而不是直接调用 Dialog.setCancelable(boolean)，因为 DialogFragment 需要基于这个来改变它的行为。

您只需要添加 1 行代码：

```
public void chooseCityDialog() {
    DialogFragment newFragment = new DialogSetup();
    newFragment.setCancelable(false);
    newFragment.show(getFragmentManager(), "citypref");
} 
```

`Dialog`此外，如果以某种方式从is返回的城市，则有一个默认城市可以回退，这将是一个很好的安全检查`null`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:08:05.303

我会用一个`AlertDialog`代替`DialogFragment`这个。

```
 AlertDialog dlgBuilder = new AlertDialog.Builder(this);
    dlgBuilder.setMessage("Title");
    dlgBuilder.setCancelable(false)
            .setPositiveButton("OK", new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialogInterface, int i) {
                    okCalledMethodInactivity();
                    dialogInterface.dismiss();
                }
            })
            .setNegativeButton("Exit app", new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialogInterface, int i) {
                    finish();
                }
            });
    AlertDialog dlg = dlgBuilder.create();
    dlg.show(); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-10T19:15:10.487

通过禁用后退按钮

```
@Override
public void onBackPressed() {

} 
```

# java - SSLSocketFactory 查找在 java 上花费的时间

> ID：15934220
> 
> 赞同：0
> 
> 时间：2013-04-10T19:01:05.893
> 
> 标签：java, sockets, jsse

我正在使用 java 的 SSL 套接字建立客户端/服务器连接。我正在从客户端向服务器发送一个长字符串，然后将该字符串记录到服务器部分的文本文件中。这真的很基本。

我想要做的是我想了解将该字符串从我的客户端传输到我的服务器所需的时间。我怎样才能达到这个结果？有没有人可以给我一个建议？如果您需要查看我的代码，此代码使用与我的代码相同的结构：[单击](http://stilius.net/java/java_ssl.php)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:39:14.277

取它开始的时间和停止的时间并计算差异。

# ruby - RVM 无法安装 ree

> ID：15934227
> 
> 赞同：0
> 
> 时间：2013-04-10T19:01:48.967
> 
> 标签：ruby, rvm

尝试使用 rvm 安装 ree 时，出现以下错误：

```
Error running 'env CFLAGS=-I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libxml2/include -I/usr/local/opt/libxslt/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -I/usr/local/opt/sqlite/include LDFLAGS=-L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libxml2/lib -L/usr/local/opt/libxslt/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/sqlite/lib...
please read /Users/me/.rvm/log/ree-1.8.7-2012.02/install.log
There has been an error while trying to run the ree installer. Halting the installation. 
```

install.log 说：

```
cc1: error: /opt/local/include: Permission denied 
```

没有`/opt/local/include`。我可以安装其他红宝石，但不能安装 ree。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T12:27:41.480

CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 rvm install ree-1.8.7-2012.02 --with-openssl-dir=`brew --prefix openssl`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T01:12:02.387

我做了以下在MAC中成功安装ree。

```
brew install libksba autoconf automake apple-gcc42

rvm autolibs enable

CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 rvm reinstall ree-1.8.7-2011.03 
```

# arm - Keil IDE 秒表在调试模式下不工作

> ID：15934229
> 
> 赞同：1
> 
> 时间：2013-04-10T19:01:53.897
> 
> 标签：arm, cortex-m3, keil

和许多其他朋友一样，我使用 ST F4-Discovery 板已经有一段时间了。我们都有同样的问题。我们使用的是 Keil IDE（使用了从 4.3 到 4.7 的不同版本）。每当我们使用断点和秒表计时，它在模拟模式下都能完美运行。但是，当我们在板上调试并运行相同的代码时，秒表永远不会报告正确的时间。它实际上是随机的。有谁知道问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-03T11:38:52.243

秒表基于内部寄存器 SEC。似乎有一个错误，如果没有显示寄存器窗口，那么秒表值不会更新。当调试运行时，选择 View|Register 窗口并确保您可以看到 SEC 寄存器值正在更新。状态栏中的秒表现在也应该更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:49:31.037

要解决秒表问题，请转到：Tarjet 选项 - 调试 - 设置 - 跟踪 - 核心时钟并将频率调整为 72MHz 或处理器的核心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-21T07:40:45.077

我很晚才找到答案。它与内部调试电路有关。默认情况下，当我们在调试模式下遇到断点时，定时器外设不会停止，而是继续计数。这就是为什么我们使用秒表不断获得定时器中断实例之间的随机测量间隔。为了获得准确的时序，我们需要调试电路来强制定时器外设在到达断点后停止计数，并在我们越过它时稍后恢复。这可以通过编写以下代码来完成：

```
SET_BIT(DBGMCU->APB1FZ, DBGMCU_APB1_FZ_DBG_TIM3_STOP); 
```

它指示 APB1 总线上的计时器 3 在断点处停止计数。

# java - Java Applet 复选框错误

> ID：15934232
> 
> 赞同：1
> 
> 时间：2013-04-10T19:02:07.390
> 
> 标签：java, applet, checkbox

我的 java 复选框小程序有问题。我让它大部分工作，但我最终遇到了一个小错误。当我选择汤时，沙拉应该是灰色的（确实如此），但如果我已经从沙拉中选择了一个项目，然后单击汤，沙拉将变为灰色，并且仍选择该项目（沙拉内）。

```
public class Applet_11 extends Applet implements ItemListener
{
Panel
    dinnerPanel,
    soupPanel,
    saladPanel;

Checkbox
    standard, deluxe,
    soup, salad, 
    cream, broth, gumbo,
    tossed, caesar,
    croutons,lite;

//Used to setup all of the boxes and add them to the Applet
public void init()
{
    CheckboxGroup dinnerType = new CheckboxGroup();
    standard = new Checkbox("standard", dinnerType, false);
    standard.addItemListener(this);
    deluxe = new Checkbox("deluxe", dinnerType, true);
    deluxe.addItemListener(this);

    CheckboxGroup soupOrSalad = new CheckboxGroup();
    soup = new Checkbox("Soup", soupOrSalad, false);
    soup.addItemListener(this);
    salad = new Checkbox("Salad", soupOrSalad, false);
    salad.addItemListener(this);

    CheckboxGroup soups = new CheckboxGroup();
    cream = new Checkbox("cream", soups, false);
    cream.addItemListener(this);
    broth = new Checkbox("broth", soups, false);
    broth.addItemListener(this);
    gumbo = new Checkbox("gumbo", soups, false);
    gumbo.addItemListener(this);

    CheckboxGroup salads = new CheckboxGroup();
    tossed = new Checkbox("tossed", salads, false);
    tossed.addItemListener(this);
    caesar = new Checkbox("ceasar", salads, false);
    caesar.addItemListener(this);
    croutons = new Checkbox("croutons", salads, false);
    croutons.addItemListener(this);
    lite = new Checkbox("lite", salads, false);
    lite.addItemListener(this);

    //adding the componets to the Applet
    setLayout(new GridLayout(0, 1));

    dinnerPanel = new Panel();
    add(dinnerPanel);
    dinnerPanel.add(standard);
    dinnerPanel.add(deluxe);

    soupPanel = new Panel();
    add(soupPanel);
    soupPanel.add(soup);
    soupPanel.add(cream);
    soupPanel.add(broth);
    soupPanel.add(gumbo);

    saladPanel = new Panel();
    add(saladPanel);
    saladPanel.add(salad);
    saladPanel.add(tossed);
    saladPanel.add(caesar);
    saladPanel.add(croutons);
    saladPanel.add(lite);
}

//ItemEvents and calls other functions
public void itemStateChanged(ItemEvent e)
{
    if (e.getSource() == standard || e.getSource() == deluxe) { 
        handleDinnerType((Checkbox)e.getSource());
    } else if (e.getSource() == soup || e.getSource() == salad) { 
        handleSoupSaladChoice((Checkbox)e.getSource());
    }    
}    

//helper function for dinner type
void handleDinnerType(Checkbox selectedType) 
{
    boolean enabled = false;

    if (selectedType == standard) {
        enabled = false;    
    } else if (selectedType == deluxe) {
        enabled = true;
    }

    cream.setEnabled(enabled);
    broth.setEnabled(enabled);
    gumbo.setEnabled(enabled);
    tossed.setEnabled(enabled);
    caesar.setEnabled(enabled);
    croutons.setEnabled(enabled);
    lite.setEnabled(enabled);

}

//helper function for salad and soup type
void handleSoupSaladChoice(Checkbox selectedCourse) 
{
    boolean soupEnabled, saladEnabled;

    if (selectedCourse == soup) {
        soupEnabled = true;
        saladEnabled = false;
    } else {
        soupEnabled = false;
        saladEnabled = true;
    }

    cream.setEnabled(soupEnabled);
    broth.setEnabled(soupEnabled);
    gumbo.setEnabled(soupEnabled);

    tossed.setEnabled(saladEnabled);
    caesar.setEnabled(saladEnabled);
    croutons.setEnabled(saladEnabled);
    lite.setEnabled(saladEnabled);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T07:32:24.417

您要询问的行为是半复选框和半单选按钮，有两种方法可以解决它：

1.  在 Checkboxgroup 中添加一个额外的 Checkbox，它基本上说“没有其他选项”。并在您的侦听器中设置该复选框的状态。因为一旦您在复选框组中选择了一个选项，您就无法清除它，我相信。

2.  删除 Checkboxgroup 并让您的侦听器管理其他复选框的排除，而不是依赖 Checkboxgroup。示例代码是

-

```
public class Applet_15934232 extends Applet implements ItemListener {
    Panel
            dinnerPanel,
            soupPanel,
            saladPanel;

    Checkbox
            standard, deluxe,
            soup, salad,
            cream, broth, gumbo,
            tossed, caesar,
            croutons, lite;

    //Used to setup all of the boxes and add them to the Applet
    public void init() {
        CheckboxGroup dinnerType = new CheckboxGroup();
        standard = new Checkbox("standard", dinnerType, false);
        standard.addItemListener(this);
        deluxe = new Checkbox("deluxe", dinnerType, true);
        deluxe.addItemListener(this);

        CheckboxGroup soupOrSalad = new CheckboxGroup();
        soup = new Checkbox("Soup", soupOrSalad, false);
        soup.addItemListener(this);
        salad = new Checkbox("Salad", soupOrSalad, false);
        salad.addItemListener(this);

        cream = new Checkbox("cream", false);
        cream.addItemListener(this);
        broth = new Checkbox("broth", false);
        broth.addItemListener(this);
        gumbo = new Checkbox("gumbo", false);
        gumbo.addItemListener(this);

        tossed = new Checkbox("tossed", false);
        tossed.addItemListener(this);
        caesar = new Checkbox("ceasar", false);
        caesar.addItemListener(this);
        croutons = new Checkbox("croutons", false);
        croutons.addItemListener(this);
        lite = new Checkbox("lite", false);
        lite.addItemListener(this);

        //adding the componets to the Applet
        setLayout(new GridLayout(0, 1));

        dinnerPanel = new Panel();
        add(dinnerPanel);
        dinnerPanel.add(standard);
        dinnerPanel.add(deluxe);

        soupPanel = new Panel();
        add(soupPanel);
        soupPanel.add(soup);
        soupPanel.add(cream);
        soupPanel.add(broth);
        soupPanel.add(gumbo);

        saladPanel = new Panel();
        add(saladPanel);
        saladPanel.add(salad);
        saladPanel.add(tossed);
        saladPanel.add(caesar);
        saladPanel.add(croutons);
        saladPanel.add(lite);
    }

    //ItemEvents and calls other functions
    public void itemStateChanged(ItemEvent e) {
        if (e.getSource() == standard || e.getSource() == deluxe) {
            handleDinnerType((Checkbox) e.getSource());
        } else if (e.getSource() == soup || e.getSource() == salad) {
            handleSoupSaladChoice((Checkbox) e.getSource());
        } else {
            handleButtonSelection((Checkbox) e.getSource());
        }
    }

    private void handleButtonSelection(Checkbox source) {
        cream.setState(source == cream);
        broth.setState(source == broth);
        gumbo.setState(source == gumbo);
        tossed.setState(source == tossed);
        caesar.setState(source == caesar);
        croutons.setState(source == croutons);
        lite.setState(source == lite);
    }

    //helper function for dinner type
    void handleDinnerType(Checkbox selectedType) {
        boolean enabled = false;

        if (selectedType == standard) {
            enabled = false;
        } else if (selectedType == deluxe) {
            enabled = true;
        }

        cream.setEnabled(enabled);
        broth.setEnabled(enabled);
        gumbo.setEnabled(enabled);
        tossed.setEnabled(enabled);
        caesar.setEnabled(enabled);
        croutons.setEnabled(enabled);
        lite.setEnabled(enabled);

    }

    //helper function for salad and soup type
    void handleSoupSaladChoice(Checkbox selectedCourse) {
        boolean soupEnabled = (selectedCourse == soup);
        boolean saladEnabled = (selectedCourse == salad);

        if (soupEnabled) {
            tossed.setState(false);
            caesar.setState(false);
            croutons.setState(false);
            lite.setState(false);
        }
        if (saladEnabled) {
            cream.setState(false);
            broth.setState(false);
            gumbo.setState(false);
        }

        cream.setEnabled(soupEnabled);
        broth.setEnabled(soupEnabled);
        gumbo.setEnabled(soupEnabled);

        tossed.setEnabled(saladEnabled);
        caesar.setEnabled(saladEnabled);
        croutons.setEnabled(saladEnabled);
        lite.setEnabled(saladEnabled);
    }
} 
```

# c# - 正则表达式拆分未给出预期结果

> ID：15934236
> 
> 赞同：1
> 
> 时间：2013-04-10T19:02:14.200
> 
> 标签：c#, regex, split

所以我有一个文本文件，它为我提供逗号分隔的数据，用双引号括起来，如下所示：

```
string test = "\"foo\",\"bar\",\"1\",\"\",\"baz\""; 
```

我想捕获每个值，最初我只是用逗号分隔，但我注意到有时引号之间有逗号，所以我将其更改为使用正则表达式来使用非常简单的正则表达式来拉引号之间的所有内容：

```
string pattern = "\"[^\"]*\""; 
```

使用 regexpal 这会返回我想要的结果，但是无论出于何种原因，当我在 c# 中运行这个小程序时，我会返回一个所有逗号的列表，而不是我真正感兴趣的值，我不太确定为什么。谁能发现我的错误？

```
string test = "\"foo\",\"bar\",\"1\",\"\",\"baz\"";
string pattern = "\"[^\"]*\"";
string[] lines = Regex.Split(test, pattern); //Returns a list of commas in quotes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:04:15.143

这是因为`Regex.Split`使用模式来决定必须在哪里拆分序列。换句话说，该模式描述了*分隔符*，而不是您想要捕获的内容：

> 在正则表达式模式定义的位置处将输入字符串拆分为子字符串数组

要以您希望调用的方式使用表达式`Regex.Matches`以获取 a [`MatchCollection`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchcollection.aspx)，并从该集合中检索单个匹配项：

```
string test = "\"foo\",\"bar\",\"1\",\"\",\"baz\"";
string pattern = "\"[^\"]*\"";
MatchCollection mc = Regex.Matches(test, pattern);
foreach (var m in mc) {
    Console.WriteLine(m);
} 
```

这是[关于 ideone 的演示](http://ideone.com/QNomKH)。

# java - 使用 Mockito 或 jUnit 验证方法中的调用

> ID：15934238
> 
> 赞同：1
> 
> 时间：2013-04-10T19:02:26.677
> 
> 标签：java, spring, junit, mockito

我正在对 DAO 进行一些修改。修改包括重构一些代码以防止几个方法被`.getResultsList()`多次调用。相反，结果被缓存到 a`List`并且所有后续代码都与该列表一起使用，从而使代码运行更有效，只需访问数据库一次。

我被要求为我修改的方法创建 jUnit 测试，以确保将来不会再发生类似的事情。我是否可以验证方法中的局部变量使用 mockito 调用了多少次函数？

我已经看到了几个关于`verify`用于验证对模拟对象进行的调用次数的问题/论坛帖子。但我实际上无权模拟这个对象，因为它是在方法内部创建的，任何没有被传入。

基本上 -

`myDao`有一个类变量`EntityManager`调用`em`，`em.createNamedQuery()`函数存储到一个`TypedQuery`变量`q`中。这`q`就是 .getResultsList 被多次调用的原因。

在我的 jUnit 测试中，是否可以监听我在模拟的 Dao 上调用的方法内部发生的情况，并确保`q.getResultsList`在方法运行时只调用一次？

**更新**

`myDao`在我的测试类中是使用`@Autowired`注释配置的，如下所示：

```
@Autowired
MyDao myDao; 
```

它在 applicationContext.xml 中定义，如下所示：

```
<bean id="myDao" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="com.mypackage.myDao"/>
</bean> 
```

我调用的方法在 DAO 内部，所以我调用`myDao.myMethod(myVar);`Inside`myMethod`是我想听的 q 变量。这是一个局部变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:30:19.567

如果您在模拟 myDao，那么您将无法在 myDao 中验证代码。

要对此进行测试，您需要对 myDao 类进行测试。在该单元测试中，您可以模拟`EntityManager`并`createNamedQuery`返回一个模拟查询。然后，您可以使用 mockito`verify`并`times(1)`验证`getResultsList()`仅在模拟查询中调用过一次。

# c# - 控制台输出格式

> ID：15934247
> 
> 赞同：0
> 
> 时间：2013-04-10T19:02:42.873
> 
> 标签：c#, formatting, console-application

我有一个显示估计剩余时间的程序，但在执行此操作时还会打印其他内容。我想在不影响计时器位置的情况下打印其他部分。

这是我的示例输出：

```
将文件处理成更小的块......

还剩 90% 00:00:01。

成品加工文件
现在比较...

会员配对快照
还剩 10% 00:00:08。
        总计：0

分配快照
23% 00:00:07 还剩。
.trans.links[0].type.TransLinkType 102

.trans.links[0].fromTransactionRef.versionHandle.instanceHandle.id 102

        总计：204

交易快照

        总计：0

传输快照
86% 00:00:01 还剩。
.trans.links[0].size.amount 5

.trans.links[0].fromTransactionRef.versionHandle.instanceHandle.id 5

.trans.activityContextRef[0].versionHandle.instanceHandle.id 3708

        总计：3718

        所有对象类型中不同字段的总数：3922

生成的 xml 文件位于：c:\Users\grover\packer\XML
```

我想在 to 的自己的行上打印剩余的时间而不影响其他打印有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:13:17.293

如果你*真的*需要这样做，你可以[覆盖已经写入控制台的内容](https://stackoverflow.com/questions/888533/how-can-i-update-the-current-line-in-a-c-sharp-windows-console-app)，但这会带来非常糟糕的用户体验，除非它不经常更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:14:02.420

让代码打印时间执行以下操作：

1.  将当前光标位置存储在变量中。
2.  将光标移动到下一行。
3.  每次要更新文本时：
    1.  将当前光标位置存储在另一个变量中。
    2.  将光标设置到第一步中光标所在的行。
    3.  写一些文字。
    4.  将当前光标位置设置为步骤 3.1 中存储的值。

这是一个简单的概念演示：

```
private static void Main()
{
    PrintTimes();

    for (int i = 0; i < 10; i++)
    {
        Console.WriteLine("Some text is being printed");
        Thread.Sleep(1000);
    }

    Console.WriteLine();
    Console.WriteLine("press any key to exit . . .");
    Console.ReadKey();
}

private static async void PrintTimes()
{
    int line = Console.CursorTop;
    Console.WriteLine();
    for (int i = 0; i < 10; i++)
    {
        int previousLine = Console.CursorTop;
        int previousChar = Console.CursorLeft;
        Console.CursorTop = line;
        Console.CursorLeft = 0;
        Console.WriteLine("{0}% left       ", 100 - i * 10);
        Console.CursorTop = previousLine;
        Console.CursorLeft = previousChar;

        await Task.Delay(1000);
    }
} 
```

请注意，在此演示中，done in 这个词`PrintTimes`不是原子的，因此仍然可以在其中一些操作之间注入另一个控制台写入。如果您最终经常写入控制台，则需要确保同步所有控制台写入。

# python - 在段落分隔符非标准的段落上拆分文本

> ID：15934248
> 
> 赞同：6
> 
> 时间：2013-04-10T19:02:43.073
> 
> 标签：python, text-processing

如果我有标准段落格式的文本（一个空行后跟一个缩进），例如文本 1，那么使用 text.split("\n\n") 提取段落就很容易了。

文本1：

```
 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sit amet sapien velit, ac sodales   
 ante. Integer mattis eros non turpis interdum et auctor enim consectetur, etc.

      Praesent molestie suscipit bibendum. Donec justo purus, venenatis eget convallis sed, feugiat    
 vitae velit,etc. 
```

但是，如果我有非标准段落格式的文本，例如文本 2，该怎么办？没有空行和可变的前导空格。

文本 2：

```
 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sit amet sapien velit, ac sodales   
 ante. Integer mattis eros non turpis interdum et auctor enim consectetur, etc.
    Praesent molestie suscipit bibendum. Donec justo purus, venenatis eget convallis sed, feugiat    
 vitae velit,etc. 
```

由于前导空格在标准和非标准格式中都很常见，我考虑过在正则表达式匹配上为前导空格建立索引并以这种方式获取段落中断，但必须有一种更优雅的方法来做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T19:11:15.797

您提出的正则表达式解决方案似乎足够优雅：

```
re.split('\s{4,}',text) 
```

这使用 4 个连续的空白字符作为段落分隔符。`'\n\s{3,}'`如果更合适，您可以使用或类似的东西。

# php - 在 preg_replace_callback 中使用局部变量 - PHP

> ID：15934249
> 
> 赞同：1
> 
> 时间：2013-04-10T19:02:43.243
> 
> 标签：php, preg-replace-callback

如何`preg_replace_callback`在 PHP 中使用局部变量。我有以下代码：

```
function pregRep($matches)
{
    global $i; $i++;

    if($i > 2)
    {     
          return '#'.$matches[0];
    }
    else
    {
        return $matches[0];
    }
}

$i = 0;
$str =  preg_replace_callback($reg_exp,"pregRep",$str); 
```

而且也是`$str`一个字符串，`$reg_exp`是一个正则表达式。这两个定义都很好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:08:40.820

最简单的方法是使用[匿名函数](https://stackoverflow.com/questions/9148841/which-version-of-php-added-anonymous-functions)作为回调：

```
$result = preg_replace_callback(
    $pattern,

    function ($match) use ($variable) {
        // do something
    },

    $subject
); 
```

请注意，您可以通过这种方式添加多个变量，但它会在定义函数时创建该变量的副本（如果您将其分配给一个变量以供多次使用，这一点很重要）。如果您想要对变量的“实时”引用，请使用`&$variable`.

当然，使用箭头函数需要 PHP 7.4 或更新版本。

# html - 点击时 HTML 溢出

> ID：15934252
> 
> 赞同：0
> 
> 时间：2013-04-10T19:02:52.270
> 
> 标签：html, onclick, overflow, html-table

由于我可能不会解释上下文，所以我将其链接：[here](https://stackoverflow.com/questions/15932787/td-overflow-onclick-html)

我有一张桌子。在该表中，某些单元格中存在信息溢出。当我使单元格可点击（onclick -> 函数）时，它仅限于单元格。

我的问题：如何使所有溢出都可点击？

# asp.net - 如何将 json 数据发送到 Web 服务并获得响应

> ID：15934253
> 
> 赞同：0
> 
> 时间：2013-04-10T19:03:06.613
> 
> 标签：asp.net, json, jquery

我正在使用 jquery ajax 将 JSON 数据发送到 Web 服务。

我的 JS 代码是-

```
function addToCart(id) 
    {
        $.ajax({
            type: "POST",
            url: "WebService1.asmx/HelloWorld",
            contentType: "application/json; charset=utf-8",
            data: "{id:"+id+"}",
            dataType: "json",
            success: function (data) {
                //alert(data.d);
            }
        });
    } 
```

和 WebService1.asmx 是 -

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
//[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{

    [WebMethod]
    public static int HelloWorld(int id)
    {
        return id;
    }
} 
```

如果我将 js 函数调用为 addToCart(8)，firebug 中**post选项卡的内容是-** **{id:8}**

并且响应是- **{"d":"Hello World"}**

现在我的问题是——

1.  如何在我的 Web 服务中获取 id（在这种情况下为 8），以便我可以将其存储在我的数据库中。
2.  为什么它总是以**d:Hello World**的形式给出响应，它是在哪里定义的？
3.  如何在ajax调用的成功功能中再次向我想在警报框中显示的js发送正确的响应（假设我想在警报中再次显示8，我需要在Web服务和警报框中写什么）。
4.  **tempuri.org**是怎么回事，我需要更改它吗？

# java - 在 web.xml DD 中添加新的 servlet 时，Tomcat 7 拒绝在 Eclipse 上启动

> ID：15934260
> 
> 赞同：2
> 
> 时间：2013-04-10T19:03:28.033
> 
> 标签：java, jakarta-ee, tomcat7, deployment-descriptor

在开发 Java EE 应用程序（学校练习）时，一切似乎都运行正常。但是由于我在我的 eclipse 项目中添加了一个新的 servlet，我的 tomcat 拒绝启动并且重启过程超时。即使延长完成服务器操作的时间限制也无济于事。

这个问题似乎是由我的 web.xml 文件引起的，因为当我删除标签时，一切都像发条一样运行。虽然我可以通过右键单击它来启动我的 servlet，但这不是目的。我需要这个 web.xml 才能使用带有 URL 模式的 jsp 调用我的 servlet。

日志仅显示服务器准备启动，但没有显示错误。如果您不介意看一下，这是我的代码，它给我带来了麻烦。我的 web.xml 填充了与这个完全相同的内容，并且它们都没有阻止 tomcat 正常启动。

```
<servlet>
    <servlet-name>BookYourFlightServlet</servlet-name>
    <servlet-class>com.sdzee.servlets.BookYourFlightServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>BookYourFlightServlet</servlet-name>
    <url-pattern>/bookYourFlightServlet</url-pattern>
  </servlet-mapping> 
```

我还将我的项目移到了我的 Ubuntu 计算机上，以便在那里进行测试，但同样的事情。

它再次失败：这是日志报告：

```
avr. 10, 2013 9:28:25 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;.
avr. 10, 2013 9:28:25 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:pro' did not find a matching property.
avr. 10, 2013 9:28:25 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
avr. 10, 2013 9:28:25 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
avr. 10, 2013 9:28:25 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1015 ms
avr. 10, 2013 9:28:25 PM org.apache.catalina.core.StandardService startInternal
INFO: Démarrage du service Catalina
avr. 10, 2013 9:28:25 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.39
avr. 10, 2013 9:28:26 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\moi\Desktop\mes workspaces\WorkSpace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\pro\WEB-INF\lib\servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
avr. 10, 2013 9:28:26 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/pro]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/pro]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: The servlets named [BookFlightServlet] and [com.sdzee.servlets.BookFlightServlet] are both mapped to the url-pattern [/bookFlightServlet] which is not permitted
    at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
    at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2457)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2139)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2100)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2093)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2093)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2093)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1300)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5269)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

avr. 10, 2013 9:28:26 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

avr. 10, 2013 9:28:26 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

avr. 10, 2013 9:28:26 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 745 ms 
```

我的小服务程序：

```
package com.sdzee.servlets;

import java.io.IOException;
import com.sdzee.beans.ReservationBean;
import com.sdzee.dao.DAOFactory;
import com.sdzee.dao.UtilisateurDao;
import com.sdzee.forms.BookFlightForm;

@WebServlet("/bookFlightServlet")
public class BookFlightServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static final String VIEW = "/WEB-INF/JSP/bookYourFlight.jsp";

    public static final String ATT_BOOKING = "booking";
    public static final String ATT_FORM = "form";
    public static final String CONF_DAO_FACTORY = "daofactory";

    private UtilisateurDao utilisateurDao;

    // ========================================================================
    public void init() throws ServletException {
        /* RÃ©cupÃ©ration d'une instance de notre DAO Utilisateur */
        this.utilisateurDao = ((DAOFactory) getServletContext().getAttribute(
                CONF_DAO_FACTORY)).getUtilisateurDao();
    }

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        /* Affichage de la page d'inscription */
        this.getServletContext().getRequestDispatcher(VIEW)
                .forward(request, response);
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        BookFlightForm form = new BookFlightForm(utilisateurDao);
        /* Traitement de la requÃªte et rÃ©cupÃ©ration du bean en rÃ©sultant */

        ReservationBean reservationBean = form.registerFlightMethod(request);

        request.setAttribute(ATT_FORM, form);
        request.setAttribute(ATT_BOOKING, reservationBean);

        this.getServletContext().getRequestDispatcher(VIEW)
                .forward(request, response);
        System.out.println("Dopost method");

    }

} 
```

我的 Jsp 文件

```
<%@ page pageEncoding="UTF-8" %>
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Book Flight</title>
        <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
        <link type="text/css" rel="stylesheet" href="styles/form.css" />
    </head>
    <body>
        <form method="post" action="bookFlightServlet">
            <fieldset>
                <legend>Reservation</legend>
                <p>You can book your flight with this form.</p>

            <label for="country">Country <span class="requis">*</span></label>
                <input type="text" id="country" name="country" value="<c:out value="${reservationBean.country}"/>" size="20" maxlength="60" />
                <span class="erreur">${form.erreurs['country']}</span>
                <br />

                <label for="departureDay">Departure Date <span class="requis">*</span></label>
                <input type="text" id="departureDay" name="departureDay" value="<c:out value="${reservationBean.departureDay}"/>" size="20" maxlength="60" />
                <span class="erreur">${form.erreurs['departureDay']}</span>
                <br />

                <input type="submit" value="BOOK" class="sansLabel" />
                <br />
            <p class="${empty form.erreurs ? 'succes' : 'erreur'}">${form.resultat}</p>
            </fieldset>
        </form>
    </body>
</html> 
```

Web.xml 文件

```
<servlet>
    <servlet-name>BookFlightServlet</servlet-name>
    <servlet-class>com.sdzee.servlets.BookFlightServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>BookFlightServlet</servlet-name>
    <url-pattern>/bookFlightServlet</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:47:38.630

由于此异常，启动失败。

> 名为 [BookFlightServlet] 和 [com.sdzee.servlets.BookFlightServlet] 的 servlet 都映射到不允许的 url 模式 [/bookFlightServlet]

您无法使用 2 个 servlet 处理 HTTP 请求。为 servlet-name 标记使用唯一名称，并将 URL 模式映射到单独的 servlet 类。您不能这样做的原因是无法同时跨 2 个 servlet 线程有意义地提交 HTTP 响应。

SO上有一个[相关的线程，](https://stackoverflow.com/questions/7885666/having-two-different-servlets-mapped-on-the-same-url-pattern)有人犯了类似的错误。你也可以从中学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:54:00.080

我认为您两次声明了 Servlet com.sdzee.servlets.BookFlightServlet。通过使用相同的 url-apptern 映射相同的 servlet（具有不同的名称：一个带有其包，另一个没有），容器将无法启动，因为这是不允许的！

# php - 上传大量字体并在下拉列表中显示示例/输入字段搜索字体突出显示

> ID：15934261
> 
> 赞同：0
> 
> 时间：2013-04-10T19:03:30.830
> 
> 标签：php, javascript, jquery

我正在创建一个 Microsoft Office 2010 风格的文本编辑器。与 Microsoft Office 一样，我希望有一个以下格式的所有字体的下拉列表：

```
<li>Arial</li>
<li>Arial Black</li>
<li>Arial Narrow</li> 
```

但是，有超过 500 种字体提交到 Google Fonts，甚至上传其中的一小部分，将它们实施到我的列表中并预览字体将需要数小时的重复行为。

有没有办法，使用 Javascript/JQuery/PHP 之类的来加快进程，在我的网站上搜索一个目录，然后每个文件夹都变成一个新的列表项或诸如此类的东西？

谷歌字体目录：[https ://code.google.com/p/googlefontdirectory/](https://code.google.com/p/googlefontdirectory/)

希望这对目前提及的有用；在显示此列表的下拉按钮旁边，有一个输入字段，您可以在其中输入字体。如果用户手动开始输入，我想显示某种形式的突出显示。

最好的问候，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:08:42.387

Google Web Fonts有一个[API](https://developers.google.com/fonts/docs/developer_api)。API 允许访问 JSON 格式的数据，因此您可以使用 JavaScript。

# .net - 詹金斯没有从 Starteam 签出所有文件

> ID：15934264
> 
> 赞同：1
> 
> 时间：2013-04-10T19:03:36.950
> 
> 标签：.net, jenkins, continuous-integration, starteam

我正在尝试使用 Jenkins 设置来改进我们的 CI 策略，该策略目前包括由 Windows 任务调度程序启动的自动构建工作室脚本。我要集成的源代码是一个 .NET 解决方案，我正在尝试通过 MSBuild 构建它。

作为我们的 SCM，我们使用 StarTeam (v. 10.4)，当 Jenkins 尝试将文件检出到工作区并编译解决方案时，我目前遇到了问题。

Jenkins StarTeam 插件未检出某些文件（似乎始终相同）。显然，由于这些文件丢失，我无法将 Jenkins 用于 CI。我的自动化构建工作室脚本没有遇到这个问题：这里所有文件都已正确签出。

从我的角度来看，没有被检出的 C# 文件没有什么特别之处：它们在不同的项目中，包含不同类型的数据（一些 winforms，一些接口），它们都是同一个视图的一部分，似乎已以相同的方式添加到 StarTeam 等。

Jenkins 中的 StarTeam 轮询日志没有显示任何内容。我不知道是否可以使用某种调试模式来追踪问题的性质？

也许我应该补充一点，目前 Jenkins 在我的台式电脑（Win7）上本地运行，同时我正在尝试设置。我正在使用默认位置 c:\Program Files(x86)\Jenkins\Jobs\JOB_NAME\Workspace 来集成我的解决方案。

我希望你们中的一些人可能对问题所在有所了解，因为我真的希望有一个比我们目前拥有的更好的 CI 设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:43:34.707

我设法确定了问题：显然，我们团队中的一位开发人员有时会在将文件夹添加到 StarTeam 时设法更改文件夹的默认位置属性。因此，我们不是在相对于项目根目录的位置签入文件，而是在我们的存储库中得到一个绝对路径。

我能够通过删除原始位置中的文件（即不在 Jenkins 作业文件夹中）来验证这一点，然后在 Jenkins 结帐期间观察文件重新出现在其原始位置。真正让我进一步调查的原因是尝试使用 cmd-line 实用程序从 StarTeam 签出文件，以将文件签入不同的位置。当这仍然没有得到所有文件的检查时，我认为詹金斯不再是罪魁祸首，而是其他一些问题。

我之前没有注意到这一点的部分原因是我对 StarTeam 的经验很少，以及我们团队中的所有开发人员在我们的开发环境中使用相同的映射和路径。因此，绝对路径将文件放置在所有机器上的正确位置，因为使用的路径是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:08:34.527

本质上，StarTeam SDK 在与任何外部应用程序集成时处理文件的检出。您正在运行的 10.4 版本的客户端似乎已经过时，所以如果不是整个客户端，我建议升级 SDK 版本。

StarTeam 在客户端/SDK 方面具有相对较好的前向/后向兼容性，因此理论上您可以针对现有的 2008 R2 客户端安装运行 2009/2009R2 SDK。

至于 Jenkins 中的调试模式，您可以通过运行以下语法在命令行中激活它：

`java -Drally.debug="true" -jar jenkins.war --httpPort=9000`

# image - 如何检测鼠标何时不再处于控件中？

> ID：15934271
> 
> 赞同：2
> 
> 时间：2013-04-10T19:03:52.183
> 
> 标签：image, delphi, delphi-7, onmousemove

我已将图像 ( `TImage`) 作为按钮放入我的程序中。我想添加一些额外的效果，因此`OnMouseMove`（每当用户将鼠标移到图像上时）图像被另一个图像替换以提供额外的效果：

```
procedure TForm1.Image4MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
var 
  Path, Destination: String;
begin
  Path := ParamStr(0);
  Destination := Extractfilepath(Path) + 'Images\Image2.bmp';
  Image4.Picture.LoadFromFile(Destination);
end; 
```

但是无论何时用户将鼠标移开（当他离开图像时），它都不会撤消所做的事情（变回 Image1）。我要怎么做？没有`OnMouseLeave`活动。我正在使用德尔福 7。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T19:12:48.343

首先，您问题中的代码太可怕了！每次光标在图像控件内移动一个像素时，它将（重新）加载位图！这太浪费CPU时间了！

无论如何，在现代版本的 Delphi 中，您只需使用`OnMouseEnter`and`OnMouseLeave`事件。我不认为这些在 Delphi 7 中存在，所以你必须做这样的事情：

```
TImage = class(ExtCtrls.TImage)
protected
  procedure CMMouseEnter(var Message: TMessage); message CM_MOUSEENTER;
  procedure CMMouseLeave(var Message: TMessage); message CM_MOUSELEAVE;
end; 
```

在哪里

```
{ TImage }

procedure TImage.CMMouseEnter(var Message: TMessage);
begin
  // Do something
end;

procedure TImage.CMMouseLeave(var Message: TMessage);
begin
  // Do something else 
end; 
```

此示例采用插入器类的形式，但当然您最好制作一个适当的子类控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:49:34.883

如果您在图像控件中加载另一张图片，那么之前加载的图片就消失了：您必须再次加载它。当鼠标移动到图像的容器上时，您可以这样做，大概是表单本身。

[但是正如 Andreas已经解释](https://stackoverflow.com/a/15934412/757830)的那样，在鼠标移动事件处理程序中加载图片是很糟糕的。

我可以提出替代方案吗？创建*两个*图像控件并将它们放在同一个位置。然后添加以下处理程序：

```
procedure TForm1.Image4AMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  Image4B.BringToFront;
  Image4B.Tag := 1;
end;

procedure TForm1.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  if Image4B.Tag = 1 then
  begin
    Image4B.Tag := 0;
    Image4A.BringToFront;
  end;
end; 
```

# performance - 三个属性与一个 NSDictionary 相比的内存效率

> ID：15934272
> 
> 赞同：0
> 
> 时间：2013-04-10T19:03:53.063
> 
> 标签：performance, cocoa, declared-property

我想将一些数据传递给我的对象，我有两个选择。

关于记忆 - 什么更有效？声明三个属性或声明一个`NSDictionary`使用`initWithCapacity:3`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:06:33.010

声明 3 个属性将比使用`NSMutableDictionary`.

使用属性还可以使您的代码更易于阅读，并允许您的编译器帮助您实现类型安全。

另一个考虑因素是您不能存储`nil`在集合中。

编辑：

就内存而言，您提到的两个选项之间的唯一区别是它`NSDictionary`需要在堆中拥有自己的内存。无论哪种方式，对象本身仍然需要堆中相同的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:23:14.010

我会提倡使用属性，但不是因为性能问题；仅仅是因为我认为它更具可读性且不易出错——您可以通过使用键常量使字典方法干净，但这是额外的工作。

对我来说，最重要的是，在 Instruments 向您展示您在这些对象上花费了大量时间或内存之前，您应该走可读性和清晰性的道路。如果您剃掉几个周期或几个字节，这不太可能很重要。但即便如此，重构用于三个参数的对象初始化的方法也不会是一项艰巨的工作。

# python - 在 Python 中使用填充将整数转换为十六进制

> ID：15934290
> 
> 赞同：1
> 
> 时间：2013-04-10T19:04:51.440
> 
> 标签：python, hex, decimal, base-conversion

我有一个整数`(67)`需要转换为十六进制并存储为字符串，如：

`"\x00\x00\x00\x43"`

我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:14:34.797

由于 OP 中的歧义而更新。

尝试...

```
def convert(i):
    result = ''
    for c in struct.pack('>i', 67):
        c = hex(ord(c))[2:]
        if len(c) < 2:
            c = '0%s' % c
        result += '\\x%s' % c
    return result

>>> print convert(67)
\x00\x00\x00\x43 
```

# asp.net-mvc - 为什么引导宽度仅限于 940 像素？

> ID：15934291
> 
> 赞同：3
> 
> 时间：2013-04-10T19:04:54.787
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在使用 twitter bootstrap 创建一个新的 MVC 站点。但我认为它没有达到预期的目的。我想利用最大屏幕宽度，但同时也想使用 span* 和 offset* 类。我认为，考虑到现在屏幕的宽度很大，940px 太小了。我们如何才能克服这个限制，或者我应该根本不使用引导程序！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:09:13.090

然后使用流体网格系统：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->
    </div>
    <div class="span10">
      <!--Body content-->
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:08:35.107

如果您不想使用流体网格系统但仍想要更大的网格，您可以[在此处](http://twitter.github.io/bootstrap/customize.html%5d)构建自定义版本的引导程序并尝试不同的列/间距宽度。容器的总宽度将为`(@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1))`.

# c# - asp.net 文本框选择

> ID：15934292
> 
> 赞同：1
> 
> 时间：2013-04-10T19:04:55.413
> 
> 标签：c#, asp.net, textbox

我有一个可编辑的标准 asp:textbox，我希望能够选择一部分文本，单击一个按钮，然后用 html 标签封装选定的文本。

例如文本框有这个文本：

敏捷的棕色狐狸跳过了懒狗。

如果我选择“The quick brown fox”并单击一个按钮，我希望文本变成`<i>The quick brown fox</i>`

如何检测选定的文本？使用winforms，您可以使用richtextbox，但在标准的asp.net 控件中没有这样的东西。它也必须是一个 asp:texbox 控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:35:33.567

您可以将 CKEditor 用作高级 html 编辑器，而不是 textarea。[http://ckeditor.com/](http://ckeditor.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:19:26.627

Telerik 有一个非常好的富文本框编辑器。[http://www.telerik.com/developer-productivity-tools.aspx](http://www.telerik.com/developer-productivity-tools.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:12:41.550

我很少推荐这个，因为控件有点笨重，但是你可以使用[ASP.NET AJAX Control Toolkit 来做](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)这个。只需按照网站上的说明安装工具包，并将 DLL 包含在您的项目中。

该工具包有一个扩展器，您可以将其应用于一个`<asp:TextBox>`名为[`HTMLEditorExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx). 有关功能，请参阅链接页面上的示例。基本上，您所要做的就是将`HTMLEditorExtender`标记指向现有`TextBox`控件。

这是该页面上示例的简化版本：

```
<ajaxToolkit:HtmlEditorExtender ID="HtmlEditorExtender1" 
    TargetControlID="yourTextBoxID" DisplaySourceTab="true" 
    runat="server"/>
    <Toolbar> 
        <ajaxToolkit:Bold />
        <ajaxToolkit:Italic />
        <ajaxToolkit:Underline />
        <ajaxToolkit:StrikeThrough />
        <ajaxToolkit:RemoveFormat />
        <ajaxToolkit:BackgroundColorSelector />
        <ajaxToolkit:ForeColorSelector />
        <ajaxToolkit:FontNameSelector />
        <ajaxToolkit:FontSizeSelector />
    </Toolbar>
</ajaxToolkit:HtmlEditorExtender> 
```

请注意，您需要将“yourTextBoxID”设置`TargetControlID="yourTextBoxID"`为要应用扩展程序的 TextBox 控件的 ID。

# python - 如何计算制表符分隔文件中每列中的元素总数

> ID：15934294
> 
> 赞同：0
> 
> 时间：2013-04-10T19:05:05.820
> 
> 标签：python

给定一个制表符分隔的文件，如何计算每列中的元素总数？我的文件大小约为 6GB。

```
column  count   min max sum mean
80  29573061    2   40  855179253   28.92
81  28861459    2   40  802912711   27.82
82                  40  778234605   27.63
83  27479902    2   40              27.44
84  26800815        40  729443846   27.22
85  26127825    2       701704155   26.86 
```

输出：

```
`column` has  6 items in it
`count` has 5 items in it
 and so on 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:21:02.573

怎么样：

```
import csv
from collections import Counter

counts = Counter()
with open("count.tsv", "rb") as fp:
    reader = csv.DictReader(fp, delimiter="\t")
    for row in reader:
        counts += Counter(k for k,v in row.items() if v.strip()) 
```

这使

```
>>> counts
Counter({'column': 6, 'mean': 6, 'count': 5, 'max': 5, 'sum': 5, 'min': 4}) 
```

虽然，正如@Cartroo 所指出的，您可能必须根据您想要考虑为空的值来更改空值标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:09:57.680

假设您的意思是计算非空白文本的出现次数，如下所示：

```
import collections

titles = None
counts = collections.defaultdict(int)
with open("file.txt") as fd:
    for line in fd:
        items = line.split("\t")
        if titles is None:
            if items:
                titles = [i.strip() for i in items]
            continue
        for i in xrange(min(len(titles), len(items))):
            if items[i].strip():
                counts[titles[i]] += 1

for column, count in counts.iteritems():
    print "Column %s has %d items" % (column, count) 
```

请注意，此代码依赖于没有比标题行更多元素的行，尽管它确实处理较短的行。我确信使用列表推导等有更简洁的方法，但我认为更详细的风格可能会更清晰。

如果您的意思是对值本身或类似值求和，则需要对`items`列表做一些更聪明的事情。仅作为示例，要查找“计数”列的总和：

```
total_count = 0
with open("file.txt") as fd:
    for line in fd
        items = line.split("\t")
        try:
            total_count += int(items[1])
        except ValueError:
            pass 
```

我不太确定您要做什么，但希望这些示例能让您了解如何以简单的方式进行此类处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:52:55.960

Map reduce 库就是为这样的大数据处理而制作的。这是使用它的好主意。 [https://developers.google.com/appengine/docs/python/dataprocessing/overview#Downloading_the_Mapreduce_Library](https://developers.google.com/appengine/docs/python/dataprocessing/overview#Downloading_the_Mapreduce_Library)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:15:45.593

我会做这样的事情：

1.  逐行读取文件
2.  [用制表符分隔](http://www.tutorialspoint.com/python/string_split.htm)每一行 ('\t')
    *   对于每个拆分，遍历列表的每个元素
        *   检查空字符串值
            *   如果有一个空字符串，不要做任何事情
            *   如果没有空字符串，则增加该列的计数

对于列数，您可以只使用另一个列表。例如，counts 是我们的列表，counts[0] 将是“column”列的元素数，counts[1] 将是“count”列的元素数，等等。

# php - 使用正则表达式将标记解析为抽象语法树

> ID：15934295
> 
> 赞同：0
> 
> 时间：2013-04-10T19:05:20.650
> 
> 标签：php, regex, abstract-syntax-tree

本题补充：[Recursive processing of markup using Regular Expression and DOMDocument](https://stackoverflow.com/questions/15857560/recursive-processing-of-markup-using-regular-expression-and-domdocument)

所选答案提供的代码对理解构建基本语法树有很大帮助。但是，我现在在收紧正则表达式以仅匹配我的语法而不是匹配`{.`但不匹配时遇到了麻烦`{{`。理想情况下，我希望它只匹配我的语法，即：

```
{<anchor>}
{!image!}
{*strong*}
{/emphasis/}
{|code|}
{-strikethrough-}
{>small<} 
```

两个标签，`a`也`small`需要不同的结束标签。我尝试`$re_closetag`从原始代码示例进行修改以反映这一点，但它仍然与文本匹配太多。

例如：

```
http://www.google.com/>} bang 
smäll<} boom 
```

我的测试字符串是：

```
tëstïng {{ 汉字/漢字 }} testing {<http://www.google.com/>} bang {>smäll<} boom {* strông{/ ëmphäsïs {- strïkë {| côdë |} -} /} *} {*wôw*} 1, 2, 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:01:44.687

您可以在 RE 本身中或在比赛之后控制它。

在重新，控制哪些标签可以“打开”修改这部分`$re_next`：

```
(?:\{(?P<opentag>[^{\s]))  # match an open tag
      #which is "{" followed by anything other than whitespace or another "{" 
```

目前它会查找任何不是`{`空格的字符。只需更改为：

```
(?:\{(?P<opentag>[<!*/|>-])) 
```

现在它只查找您特定的打开标签。

关闭标签部分一次只匹配一个字符，具体取决于当前上下文中打开的标签。（这就是`$opentag`参数的用途。）所以要匹配一对字符，只需`$opentag`在递归调用中更改要查找的内容。例如：

```
 if (isset($m['opentag']) && $m['opentag'][1] !== -1) {
            list($newopen, $_) = $m['opentag'];

            // change the close character to look for in the new context
            if ($newopen==='>') $newopen = '<';
            else if ($newopen==='<') $newopen = '>';

            list($subast, $offset) = str_to_ast($s, $offset, array(), $newopen);
            $ast[] = array($newopen, $subast);
        } else if (isset($m['text']) && $m['text'][1] !== -1) { 
```

或者，您可以保持 RE 原样，并在事后决定如何处理比赛。例如，如果您匹配一个`@`字符但`{@`不是允许的打开标记，您可以引发解析错误或简单地将其视为文本节点（附加`array('#text', '{@')`到 ast）或介于两者之间的任何内容。

# c# - 何时使用索引器而不是字段

> ID：15934296
> 
> 赞同：3
> 
> 时间：2013-04-10T19:05:32.837
> 
> 标签：c#, .net

当我们必须使用`Indexers`而不是`Fields`在 C# 类中使用时，有人可以用一些真实的例子来澄清吗？

```
public class GradeHolder
{
    private int[] counts = new int[100];

    public int this[int grade]
    {
        get { return this.counts[grade];}
        set { this.counts[grade] = value; }
    }
}

public class GradeHolder
{
    private int[] counts = new int[100];

    public void SetCount(int index, int grade)
    {
        counts[index] = grade;
    }

    public int GetCount(int index)
    {
        return counts[index];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:07:13.873

您永远**不必**使用索引器。

当数据结构是自然索引的数据结构时，它们很方便。

而且与字段的比较非常具有误导性——它们是不同的东西，不能真正直接比较（而不是何时使用一个而不是另一个）。

索引器只是一种使用某种索引访问该类型的某些元素的方法。字段是您用来保存类型状态的内容（包括您将索引*到*的内容，如果有的话）。

您也可以在同一个类中使用两者：

```
public class GradeHolder
{
    private int[] counts = new int[100];

    public int[] Counts 
    { 
       get { return this.counts; }
       set { this.counts = value; }

    public int this[int grade]
    {
        get { return this.counts[grade];}
        set { this.counts[grade] = value; }
    }
} 
```

索引器将返回列表中指定索引处的单个项目。

我已经用`Get/Set`属性替换了方法，这是更惯用的 C#（用于简单属性）。

* * *

更新：

既然您已经将`Get/Set`方法更改为更接近索引器所做的事情，那么对于两者中的哪一个更喜欢的答案当然是索引器。

为什么？

*   因为你只有 1 个参数，而不是两个。
*   因为索引器被其他程序员很好地理解并且是人们所期望[的（最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)）。
*   因为它更地道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:08:27.847

当您希望您的类表现得像一个集合（或更可能是封装一个）时，根据某种索引处理不同的值。它是语法糖，真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:19:09.157

更新：此答案适用于该问题的先前版本。

在您的第二个实现中，调用者可以（必须）完全替换 counts 字段，包括将其设置为 null 或更改其大小。

第一个实现保护计数字段，只允许访问每个元素。它还允许实现从 int[] 更改为以后的任何其他内容。

# php - PHP 这个 shell 命令有什么作用？

> ID：15934300
> 
> 赞同：1
> 
> 时间：2013-04-10T19:06:13.777
> 
> 标签：php, shell, exec

我在一个项目中找到了这一行：

```
exec('php '.$myPath."/somefile.php bah blha blha --myparam=$param > /dev/null 2>&1 < /dev/null &";) 
```

这条线是什么意思？

我知道它运行一个`somefile.php`带有参数的`myparam`，但那是这些部分：`/dev/null 2>&1 < /dev/null &`，`bah blha blha`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:11:03.690

所有有问题的语法都是 bash 语法。您可以从[这里](http://www.tldp.org/LDP/abs/html/io-redirection.html)开始了解更多信息。

但是，这里有一点解释：

```
> /dev/null 
```

意味着输出被重定向到 /dev/null 这意味着程序的输出将被丢弃

```
2>&1 
```

表示stderr 被重定向到stdout。由于标准输出被*丢弃，*错误也将被丢弃。

```
< /dev/null 
```

意味着 /dev/null 被传送到程序的标准输入 - 实际上什么都不是。

```
& 
```

在该行的末尾意味着程序应该在后台运行是什么使 exec 立即返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:18:47.953

/dev/null 是一个黑洞，似乎将结果发送到 STDOUT（标准输出，通常是您的屏幕）和 STDERR（标准错误）发送到黑洞。所以总而言之，它什么也没做。

# c# - Telerik 报告按钮在浏览器中太大

> ID：15934308
> 
> 赞同：1
> 
> 时间：2013-04-10T19:06:43.810
> 
> 标签：c#, asp.net-mvc, telerik

所以我创建了一个 Telerik 报告，它在 Visual Studio 中本地看起来很棒，但是当我在浏览器中显示它时，报告的导航按钮太大了。

有谁知道如何解决这个问题？

谷歌对我来说并不是很成功。也许我没有在谷歌上搜索正确的东西。

![问题.png](https://i.stack.imgur.com/Tgr4S.png)

好的，所以我找到了一个视频，帮助它在 IE 和 Firefox 中运行，但它在 Chrome 中仍然很难看。有人知道我可以做些什么来在 Chrome 中修复它吗？这是CSS。注释掉部分是视频所说的要注释掉的内容，以便正确显示。这些部分是 input、textarea{} table{} 和 td{}

```
html {
    background-color: #e2e2e2;
    margin: 0;
    padding: 0;
}

body {
    background-color: #fff;
    border-top: solid 10px #000;
    color: #333;
    font-size: .85em;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
}

a {
    color: #333;
    outline: none;
    padding-left: 3px;
    padding-right: 3px;
    text-decoration: underline;
}

    a:link, a:visited,
    a:active, a:hover {
        color: #333;
    }

    a:hover {
        background-color: #c7d1d6;
    }

header, footer, hgroup,
nav, section {
    display: block;
}

mark {
    background-color: #a6dbed;
    padding-left: 5px;
    padding-right: 5px;
}

.float-left {
    float: left;
}

.float-right {
    float: right;
}

.clear-fix:after {
    content: ".";
    clear: both;
    display: block;
    height: 0;
    visibility: hidden;
}

h1, h2, h3,
h4, h5, h6 {
    color: #000;
    margin-bottom: 0;
    padding-bottom: 0;
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 1.75em;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1.1em;
}

h5, h6 {
    font-size: 1em;
}

    h5 a:link, h5 a:visited, h5 a:active {
        padding: 0;
        text-decoration: none;
    }

/* main layout
----------------------------------------------------------*/
.content-wrapper {
    margin: 0 auto;
    max-width: 960px;
}

#body {
    background-color: #efeeef;
    clear: both;
    padding-bottom: 35px;
}

    .main-content {
        background: url("../Images/accent.png") no-repeat;
        padding-left: 10px;
        padding-top: 30px;
    }

    .featured + .main-content {
        background: url("../Images/heroAccent.png") no-repeat;
    }

header .content-wrapper {
    padding-top: 20px; 
}

footer {
    clear: both;
    background-color: #e2e2e2;
    font-size: .8em;
    height: 100px;
}

/* site title
----------------------------------------------------------*/
.site-title {
    color: #c8c8c8;
    font-family: Rockwell, Consolas, "Courier New", Courier, monospace;
    font-size: 2.3em;
    margin: 0;
}

.site-title a, .site-title a:hover, .site-title a:active {
    background: none;
    color: #c8c8c8;
    outline: none;
    text-decoration: none;
}

/* login
----------------------------------------------------------*/
#login {
    display: block;
    font-size: .85em;
    margin: 0 0 10px;
    text-align: right;
}

    #login a {
        background-color: #d3dce0;
        margin-left: 10px;
        margin-right: 3px;
        padding: 2px 3px;
        text-decoration: none;
    }

    #login a.username {
        background: none;
        margin: 0;
        padding: 0;
        text-decoration: underline;
    }

    #login ul {
        margin: 0;
    }

    #login li {
        display: inline;
        list-style: none;
    }

/* menu
----------------------------------------------------------*/
ul#menu {
    font-size: 1.3em;
    font-weight: 600;
    margin: 0 0 5px;
    padding: 0;
    text-align: right;
}

    ul#menu li {
        display: inline;
        list-style: none;
        padding-left: 15px;
    }

        ul#menu li a {
            background: none;
            color: #999;
            text-decoration: none;
        }

        ul#menu li a:hover {
            color: #333;
            text-decoration: none;
        }

/* page elements
----------------------------------------------------------*/
/* featured */
.featured {
    background-color: #fff;
}

    .featured .content-wrapper {
        background-color: #7ac0da;
        background-image: -ms-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
        background-image: -o-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
        background-image: -webkit-gradient(linear, left top, right top, color-stop(0, #7ac0da), color-stop(1, #a4d4e6));
        background-image: -webkit-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
        background-image: linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
        color: #3e5667;
        padding: 20px 40px 30px 40px;
    }

        .featured hgroup.title h1, .featured hgroup.title h2 {
            color: #fff;
        }

        .featured p {
            font-size: 1.1em;
        }

/* page titles */
hgroup.title {
    margin-bottom: 10px;
}

hgroup.title h1, hgroup.title h2 {
    display: inline;
}

hgroup.title h2 {
    font-weight: normal;
    margin-left: 3px;
}

/* features */
section.feature {
    width: 300px;
    float: left;
    padding: 10px;
}

/* ordered list */
ol.round {
    list-style-type: none;
    padding-left: 0;
}

    ol.round li {
        margin: 25px 0;
        padding-left: 45px;
    }

        ol.round li.zero {
            background: url("../Images/orderedList0.png") no-repeat;
        }

        ol.round li.one {
            background: url("../Images/orderedList1.png") no-repeat;
        }

        ol.round li.two {
            background: url("../Images/orderedList2.png") no-repeat;
        }

        ol.round li.three {
            background: url("../Images/orderedList3.png") no-repeat;
        }

        ol.round li.four {
            background: url("../Images/orderedList4.png") no-repeat;
        }

        ol.round li.five {
            background: url("../Images/orderedList5.png") no-repeat;
        }

        ol.round li.six {
            background: url("../Images/orderedList6.png") no-repeat;
        }

        ol.round li.seven {
            background: url("../Images/orderedList7.png") no-repeat;
        }

        ol.round li.eight {
            background: url("../Images/orderedList8.png") no-repeat;
        }

        ol.round li.nine {
            background: url("../Images/orderedList9.png") no-repeat;
        }

/* content */
article {
    float: left;
    width: 70%;
}

aside {
    float: right;
    width: 25%;
}

    aside ul {
        list-style: none;
        padding: 0;
    }

        aside ul li {
            background: url("../Images/bullet.png") no-repeat 0 50%;
            padding: 2px 0 2px 20px;
        }

.label {
    font-weight: 700;
}

/* login page */
#loginForm {
    border-right: solid 2px #c8c8c8;
    float: left;
    width: 55%;
}

    #loginForm .validation-error {
        display: block;
        margin-left: 15px;
    }

    #loginForm .validation-summary-errors ul {
        margin: 0;
        padding: 0;
    }

    #loginForm .validation-summary-errors li {
        display: inline;
        list-style: none;
        margin: 0;
    }

    #loginForm input {
        width: 250px;
    }

    #loginForm input[type="checkbox"],
    #loginForm input[type="submit"],
    #loginForm input[type="button"],
    #loginForm button {
        width: auto;
    }

#socialLoginForm {
    margin-left: 40px;
    float: left;
    width: 40%;
}

    #socialLoginForm h2 {
        margin-bottom:  5px;
    }

#socialLoginList button {
    margin-bottom: 12px;
}

#logoutForm {
    display: inline;
}

/* contact */
.contact h3 {
    font-size: 1.2em;
}

.contact p {
    margin: 5px 0 0 10px;
}

.contact iframe {
    border: 1px solid #333;
    margin: 5px 0 0 10px;
}

/* forms */
fieldset {
    border: none;
    margin: 0;
    padding: 0;
}

    fieldset legend {
        display: none;
    }

    fieldset ol {
        padding: 0;
        list-style: none;
    }

        fieldset ol li {
            padding-bottom: 5px;
        }

label {
    display: block;
    font-size: 1.2em;
    font-weight: 600;
}

label.checkbox {
    display: inline;
}
/*
input, textarea {
    border: 1px solid #e2e2e2;
    background: #fff;
    color: #333;
    font-size: 1.2em;
    margin: 5px 0 6px 0;
    padding: 5px;
    width: 300px;
}*/

textarea {
    font-family: inherit;
    width: 500px;
}

    input:focus, textarea:focus {
        border: 1px solid #7ac0da;
    }

    input[type="checkbox"] {
        background: transparent;
        border: inherit;
        width: auto;
    }

    input[type="submit"],
    input[type="button"],
    button {
        background-color: #d3dce0;
        border: 1px solid #787878;
        cursor: pointer;
        font-size: 1.2em;
        font-weight: 600;
        padding: 7px;
        margin-right: 8px;
        width: auto;
    }

    td input[type="submit"],
    td input[type="button"],
    td button {
        font-size: 1em;
        padding: 4px;
        margin-right: 4px;
    }

/* info and errors */
.message-info {
    border: 1px solid;
    clear: both;
    padding: 10px 20px;
}

.message-error {
    clear: both;
    color: #e80c4d;
    font-size: 1.1em;
    font-weight: bold;
    margin: 20px 0 10px 0;
}

.message-success {
    color: #7ac0da;
    font-size: 1.3em;
    font-weight: bold;
    margin: 20px 0 10px 0;
}

.error {
    color: #e80c4d;
}

/* styles for validation helpers */
.field-validation-error {
    color: #e80c4d;
    font-weight: bold;
}

.field-validation-valid {
    display: none;
}

input.input-validation-error {
    border: 1px solid #e80c4d;
}

input[type="checkbox"].input-validation-error {
    border: 0 none;
}

.validation-summary-errors {
    color: #e80c4d;
    font-weight: bold;
    font-size: 1.1em;
}

.validation-summary-valid {
    display: none;
}

/* tables
----------------------------------------------------------*/
/*
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin-top: 0.75em;
    border: 0 none;
}*/

th {
    font-size: 1.2em;
    text-align: left;
    border: none 0px;
    padding-left: 0;
}

    th a {
        display: block;
        position: relative;
    }

    th a:link, th a:visited, th a:active, th a:hover {
        color: #333;
        font-weight: 600;
        text-decoration: none;
        padding: 0;
    }

    th a:hover {
        color: #000;
    }

    th.asc a, th.desc a {
        margin-right: .75em;
    }

    th.asc a:after, th.desc a:after {
        display: block;
        position: absolute;
        right: 0em;
        top: 0;
        font-size: 0.75em;
    }

    th.asc a:after {
        content: '▲';
    }

    th.desc a:after {
        content: '▼';
    }
/*
td {
    padding: 0.25em 2em 0.25em 0em;
    border: 0 none;
}*/

tr.pager td {
    padding: 0 0.25em 0 0;
}

/********************
*   Mobile Styles   *
********************/
@media only screen and (max-width: 850px) {

    /* header
    ----------------------------------------------------------*/
    header .float-left,
    header .float-right {
        float: none;
    }

    /* logo */
    header .site-title {
        margin: 10px;
        text-align: center;
    }

    /* login */
    #login {
        font-size: .85em;
        margin: 0 0 12px;
        text-align: center;
    }

        #login ul {
            margin: 5px 0;
            padding: 0;
        }

        #login li {
            display: inline;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        #login a {
            background: none;
            color: #999;
            font-weight: 600;
            margin: 2px;
            padding: 0;
        }

        #login a:hover {
            color: #333;
        }

    /* menu */
    nav {
        margin-bottom: 5px;
    }

    ul#menu {
        margin: 0;
        padding: 0;
        text-align: center;
    }

        ul#menu li {
            margin: 0;
            padding: 0;
        }

    /* main layout
    ----------------------------------------------------------*/
    .main-content,
    .featured + .main-content {
        background-position: 10px 0;
    }

    .content-wrapper {
        padding-right: 10px;
        padding-left: 10px;
    }

    .featured .content-wrapper {
        padding: 10px;
    }

    /* page content */
    article, aside {
        float: none;
        width: 100%;
    }

    /* ordered list */
    ol.round {
        list-style-type: none;
        padding-left: 0;
    }

        ol.round li {
            padding-left: 10px;
            margin: 25px 0;
        }

            ol.round li.zero,
            ol.round li.one,
            ol.round li.two,
            ol.round li.three,
            ol.round li.four,
            ol.round li.five,
            ol.round li.six,
            ol.round li.seven,
            ol.round li.eight,
            ol.round li.nine {
                background: none;
            }

     /* features */
     section.feature {
        float: none;
        padding: 10px;
        width: auto;
     }

        section.feature img {
            color: #999;
            content: attr(alt);
            font-size: 1.5em;
            font-weight: 600;
        }

    /* forms */
    input {
        width: 90%;
    }

    /* login page */
    #loginForm {
        border-right: none;
        float: none;
        width: auto;
    }

        #loginForm .validation-error {
            display: block;
            margin-left: 15px;
        }

    #socialLoginForm {
        margin-left: 0;
        float: none;
        width: auto;
    }

    /* footer
    ----------------------------------------------------------*/
    footer .float-left,
    footer .float-right {
        float: none;
    }

    footer {
        text-align: center;
        height: auto;
        padding: 10px 0;
    }

        footer p {
            margin: 0;
        }
} 
```

这是按钮的来源：

![在此处输入图像描述](https://i.stack.imgur.com/rjY5T.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T18:50:20.063

移除或调整 site.css 中的以下标签

```
/*input, textarea {
    border: 1px solid #e2e2e2;
    background: #fff;
    color: #333;
    font-size: 1.2em;
    margin: 5px 0 6px 0;
    padding: 5px;
    width: 300px;
}*/

/*table {
border-collapse: collapse;
border-spacing: 0;
margin-top: 0.75em;
border: 0 none;
}*/

/*td {
padding: 0.25em 2em 0.25em 0em;
border: 0 none;
}

tr.pager td {
padding: 0 0.25em 0 0;
}*/ 
```

# stored-procedures - 执行 bcp 以通过 cmd 提示符从存储过程中导出数据，而无需 xp_cmdshell

> ID：15934311
> 
> 赞同：0
> 
> 时间：2013-04-10T19:06:45.997
> 
> 标签：stored-procedures, cmd, bcp

我想每天在命令 shell 中运行一系列脚本。这些将直接从 windows / shell -NOT FROM SQL 执行。

我在重新格式化数据的存储过程上使用 bcp。存储过程返回正确的数据。假设我的数据库称为 MYDB，过程称为“MYSP”服务器是 MYSERVER

我正在尝试以下组合：

```
BCP "EXEC MYDB.dbo.MYSP" -SMYSERVER  f "export_stuff.xml" queryout "test_export.dat" -T -c 
```

它没有做任何有用的事情或打印错误消息，而是打印出使用说明。

电话是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:10:51.910

```
bcp "EXEC %db%.dbo.EXPORT_TABLE" queryout dataout.txt -SMYSERVER -T -c -r"\n" -t"" > output.txt 
```

# java - 类继承的最优设置

> ID：15934313
> 
> 赞同：1
> 
> 时间：2013-04-10T19:06:51.917
> 
> 标签：java, inheritance, subclass

我正在做一个关于类继承的实用大学工作。我的问题是三个子类中的两个有一个公共方法，它在第三个中不存在，所以我不知道是否最好在不实现的情况下将这个方法添加到超类中（这是一个 void 方法）或分别在两者中实现它类。最好的实施方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:08:38.643

您可以尝试以下方法：

```
-- Base
    -- Base With Common Method
         -- Class 1
         -- Class 2
    -- Class 3 
```

在 Java 中会是这样的：

```
public class A {
}
public class B extends A {
    public void commonMethod() { }
}
public class Class1 extends B {
}
public class Class2 extends B {
}
public class Class3 extends A {
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T19:11:55.237

您不应该仅仅在实现和重用上使用继承作为标准。如果您在您正在建模的领域的上下文中确实具有真正的**“是”关系，请选择它。**共享您尝试建模的域以获得更具体的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:26:31.897

遵循 Pangea 的思想，如果关系不是“是” ，请始终尝试支持**组合而不是继承。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T19:13:49.540

最好的做法是为两个基类添加另一个抽象，并为所有子类添加一个通用抽象。

例如：

```
 Dog
      Cat
      Bird

      Dog -> FourLegs -> Animal 
      Cat -> FourLegs -> Animal 
      Bird -> Animal 
```

“->”可以是扩展或实现（抽象类或接口）

在任何情况下都不要仅仅因为它方便而给鸟添加四条腿:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T19:13:53.343

您可以在基类中添加该方法。如果子类实现此方法，则子类将重载此方法，否则仅使用基类方法。

```
Smthng like:
Base class: methoda()
SubClass1: methoda() --overloaded
SubClass2: methoda() --second overloaded version
SubClass3: no Implementation --used methoda() of baseclass as no implementation given. 
```

# c++ - 如何实现 C++11 正则表达式库？

> ID：15934314
> 
> 赞同：2
> 
> 时间：2013-04-10T19:07:01.377
> 
> 标签：c++, regex, c++11

当前的 C++ 编译器采用什么路径来实现 C++11 正则表达式库？

据我了解，生成实现识别特定正则表达式的确定性有限状态机的代码是最简单的方法，但是，据推测，这意味着编译器本身必须解析对库的函数调用。 -标准方式（即通过直接实现它们）或某种多态技巧在库代码本身中起作用（我*认为*在 C++ 中不可能发生的事情）。

他们是否使用了一些替代的、更智能的纯 C++ 方法？好像会很复杂！

# assembly - 如何将浮点数舍入到最接近的 .001

> ID：15934315
> 
> 赞同：1
> 
> 时间：2013-04-10T19:07:01.967
> 
> 标签：assembly, floating-point, x86, rounding

有人可以给我一些关于如何在汇编（MASM）中将浮点舍入到最接近的 .001 的提示吗？我有 2 个整数。我需要将商显示为浮点数（num_1 / num_2）。我得到了浮点算术部分，但我不知道如何对结果进行舍入。非常感谢任何建议！

```
;calculate the quotient as a floating-point number
    fild    num_1
    fidiv   num_2
    roundps

    ;display the quotient as a floating-point number        
    call    WriteFloat
    call    CrLf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:40:04.703

您可以将数字缩放 1000，将其四舍五入，然后再按比例缩小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:43:02.853

乘以 1000 ( `fmul`)，四舍五入为整数 ( `frndint`)，然后除以 1000 ( `fdiv`)。

该`roundps`指令需要 SSE4.1，并且仅适用于 SSE 或 AVX 寄存器，不适用于 FPU 的寄存器。

# db2 - 检索旧查询

> ID：15934318
> 
> 赞同：0
> 
> 时间：2013-04-10T19:07:10.467
> 
> 标签：db2, aix

我想查看用户在某个日期范围内执行的查询。这可能吗？如果是这样，怎么做？

例如，几天前执行了一个查询，我想检索它。手动查询不经常运行，所以我的结果不会很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:16:45.040

DB2 for Linux/UNIX/Windows 不跟踪查询的历史记录。

如果您需要查看数据库中执行的语句的历史记录，您有 2 个选项：

1.  为数据库创建[审计策略](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0050607.html)（针对`execute`类别）
2.  为语句（或活动，如果您有工作负载管理）创建/启用[事件监视器](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000915.html)

这两个选项都可以考虑性能，因此请明智地使用它们。

# sql - SQL Server XML 数据类型中的 LIKE 比较

> ID：15934320
> 
> 赞同：5
> 
> 时间：2013-04-10T19:07:12.503
> 
> 标签：sql, sql-server, xml, xquery

我有一个带有 XML 数据类型列的数据库表。该列包含如下值：

```
<NameValuePairCollection>
  <NameValuePair Name="Foo" Value="One" />
  <NameValuePair Name="Bar" Value="Two" />
  <NameValuePair Name="Baz" Value="Three" />
</NameValuePairCollection> 
```

我正在尝试查询 XML 数据类型列的值为 for 的所有`"One"`行`"Foo"`。我无法创建适当的 XQuery 来过滤结果。

我发现了几个相关的 SO 问题，这些问题对我的尝试有所帮助，但我仍然无法让它发挥作用。

[如何查询 SQL Server XML 列中的值 在 SQL](https://stackoverflow.com/q/10344553/346561)
[Server XML 数据类型上使用 LIKE 语句](https://stackoverflow.com/q/1832987/346561)

这是我到目前为止的SQL：

```
select * 
from MyTable 
where [XmlDataColumn].value('((/NameValuePairCollection/NameValuePair)[@Name="Foo"])[@Value]', 'varchar(max)') = 'One'
order by ID desc 
```

这是我现在遇到的错误：

```
XQuery [MyTable.XmlDataColumn.value()]: Cannot atomize/apply data() on expression that contains type 'NameValuePair' within inferred type 'element(NameValuePair,#anonymous) *' 
```

**更新**（响应@LeoWörteler 的建议）

根据您的回答，我将 SQL 更改为：

```
select * 
from MyTable with(nolock) 
where [XmlDataColumn].value('/NameValuePairCollection/NameValuePair[@Name="Subject"]/@Value', 'varchar(max)') = 'One'
order by ID desc 
```

这仍然行不通。我收到以下错误：

```
XQuery [MyTable.XmlDataColumn.value()]: 'value()' requires a singleton (or empty sequence), found operand of type 'xs:string *' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:00:54.740

如果您想选择`Value`属性的值而不是使用 XPath 表达式 in 选择整个`NameValuePair`元素`[XmlDataColumn].value(...)`，这应该有效：

```
/NameValuePairCollection/NameValuePair[@Name="Foo"]/@Value 
```

您的表达式仅检查 是否`NameValuePair`具有属性`Value`。

如果有多个具有正确名称的元素，并且您想检查其中任何一个是否具有 value `"One"`，则可以使用以下[`exist(...)`](http://msdn.microsoft.com/en-us/library/ms189869.aspx)方法：

```
where [XmlDataColumn].exist(
  '/NameValuePairCollection/NameValuePair[@Name="Subject" and @Value="One"]') = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T14:12:47.543

另一种选择是将 XML 转换为 varchar，然后搜索给定的字符串，就像 XML vas 是 varchar 字段一样。

```
SELECT * 
FROM Table
WHERE CAST(Column as nvarchar(max)) LIKE '%Name="Foo" Value="One"%' 
```

我喜欢这个解决方案，因为它干净、易于记忆、不易混淆，并且可以用作 where 子句的一部分。

它不像 Leo 提供的答案那样动态和完整，但根据具体情况，它可能是获取所需数据的“快速和肮脏”的方式。

# php - 用 iPad 上传的照片是旋转的

> ID：15934327
> 
> 赞同：5
> 
> 时间：2013-04-10T19:07:21.717
> 
> 标签：php, javascript, image, exif

我需要一个 PHP 脚本来使用 iPad 在服务器上旋转我上传的图像。我对图像和 exif 数据的方向有疑问。我尝试了 10 种解决方案，但没有解决方案。当“按钮”在右侧时，上传的图像是好的，但是如果我旋转 iPad，那么我的图像会旋转，我无法正常显示它们..有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:09:04.920

给你，我决定玩一玩，因为我有 30 分钟的空闲时间来杀人

[https://github.com/leesherwood/Orientation-Fix-PHP](https://github.com/leesherwood/Orientation-Fix-PHP)

只需将文件路径传递给`fix_orientation`函数，它应该可以工作（检查代码和函数注释，您可能想要编辑它最终如何保存图像，例如名称或其他）

对于那些只想要代码或 github 死掉的人，这里是你的主函数文件

```
 <?php
/*
 * PHP Orientation Fix (GD) v1.0.0
 * https://github.com/leesherwood/Orientation-Fix-PHP
 *
 * Copyright 2013, "leesherwood" Lee Sherwood
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * AKA: I couldn't care less what you do with it, 
 *      im just a nice guy and i want to share.
 *      But it would be nice if you left me a little credit :)
 *
 * If you use this, then let me know at: i-played-with-your-git@secure4sure.org
 */

/**
 * The main function that does the actual job
 * 
 * Pass a string representing the image path and filename such as /var/www/images/image.jpg
 * And it will change the name of the image to include "orig." (for the sake of not deleting your image if something goes wrong)
 * and then create a new image with the same filename, with the orientation fixed
 * The return bool is not informative and should only be used to to tell your script that there is a proper orientated image available (or not)
 * If you want to know why it failed (theres many reason) then you need to make the return values for informative, or use exceptions.     
 *   
 * @param string the path to the file including the file iteself (absolute path would be advised)
 * @return bool true if successful, false if not
 */  
function fix_orientation($fileandpath) {

  // Does the file exist to start with?
  if(!file_exists($fileandpath))
    return false;

  // Get all the exif data from the file
  $exif = read_exif_data($fileandpath, 'IFD0');

  // If we dont get any exif data at all, then we may as well stop now
  if(!$exif || !is_array($exif))
    return false;

  // I hate case juggling, so we're using loweercase throughout just in case
  $exif = array_change_key_case($exif, CASE_LOWER);

  // If theres no orientation key, then we can give up, the camera hasn't told us the 
  // orientation of itself when taking the image, and i'm not writing a script to guess at it!
  if(!array_key_exists('orientation', $exif)) 
    return false;

  // Gets the GD image resource for loaded image
  $img_res = get_image_resource($fileandpath);

  // If it failed to load a resource, give up
  if(is_null($img_res))
    return false;

  // The meat of the script really, the orientation is supplied as an integer, 
  // so we just rotate/flip it back to the correct orientation based on what we 
  // are told it currently is 
  switch($exif['orientation']) {

    // Standard/Normal Orientation (no need to do anything, we'll return true as in theory, it was successful)
    case 1: return true; break;

    // Correct orientation, but flipped on the horizontal axis (might do it at some point in the future)
    case 2: 
      $final_img = imageflip($img_res, IMG_FLIP_HORIZONTAL);
    break;

    // Upside-Down
    case 3: 
      $final_img = imageflip($img_res, IMG_FLIP_VERTICAL);
    break;

    // Upside-Down & Flipped along horizontal axis
    case 4:  
      $final_img = imageflip($img_res, IMG_FLIP_BOTH);
    break;

    // Turned 90 deg to the left and flipped
    case 5:  
      $final_img = imagerotate($img_res, -90, 0);
      $final_img = imageflip($img_res, IMG_FLIP_HORIZONTAL);
    break;

    // Turned 90 deg to the left
    case 6: 
      $final_img = imagerotate($img_res, -90, 0);
    break;

    // Turned 90 deg to the right and flipped
    case 7: 
      $final_img = imagerotate($img_res, 90, 0);
      $final_img = imageflip($img_res,IMG_FLIP_HORIZONTAL);
    break;

    // Turned 90 deg to the right
    case 8: 
      $final_img = imagerotate($img_res, 90, 0); 
    break;

  }

  // If theres no final image resource to output for whatever reason, give up
  if(!isset($final_img))
    return false;

  //-- rename original (very ugly, could probably be rewritten, but i can't be arsed at this stage)
  $parts = explode("/", $fileandpath);
  $oldname = array_pop($parts);
  $path = implode('/', $parts);
  $oldname_parts = explode(".", $oldname);
  $ext = array_pop($oldname_parts);
  $newname = implode('.', $oldname_parts).'.orig.'.$ext;

  rename($fileandpath, $path.'/'.$newname);

  // Save it and the return the result (true or false)
  $done = save_image_resource($final_img,$fileandpath);

  return $done;

}

/**
 * Simple function which takes the filepath, grabs the extension and returns the GD resource for it
 * Not fool-proof nor the best, but it does the job for now 
 */ 
function get_image_resource($file) {

    $img = null;
    $p = explode(".", strtolower($file));
    $ext = array_pop($p);
    switch($ext) {

      case "png":
        $img = imagecreatefrompng($file);
        break;

      case "jpg":
      case "jpeg":
        $img = imagecreatefromjpeg($file);
        break;
      case "gif":
        $img = imagecreatefromgif($file);
        break;

    }  

    return $img;

}

/**
 * Saves the final image resource to the given location
 * As above it works out the extension and bases its output command on that, not fool proof, but works nonetheless
 */  
function save_image_resource($resource, $location) {

    $success = false;
    $p = explode(".", strtolower($location));
    $ext = array_pop($p);
    switch($ext) {

      case "png":
        $success = imagepng($resource,$location);
        break;

      case "jpg":
      case "jpeg":
        $success = imagejpeg($resource,$location);
        break;
      case "gif":
        $success = imagegif($resource,$location);
        break;

    } 

    return $success;

}

/**
 * My Dev environment is not the latest on this machine. which is lucky as i never bothered to check if imageflip needed a specific version
 * ( been using imagerotate for ages and assumed imageflip would surely be included to )
 * But as it turns out, you need a fairly recent version of PHP for imageflip, so i cobbled together a quick replacement function for those that don't have it
 */   
if(!function_exists('imageflip')) {

  // These are the same constants so this script should be upgrade safe, the values are different no doubt, but that won't hurt!
  define("IMG_FLIP_HORIZONTAL", 1);
  define("IMG_FLIP_VERTICAL", 2);
  define("IMG_FLIP_BOTH", 3);

  /**
   * Simple function that takes a gd image resource and the flip mode, and uses rotate 180 instead to do the same thing... Simples!
   */     
  function imageflip($resource, $mode) {

      if($mode == IMG_FLIP_VERTICAL || $mode == IMG_FLIP_BOTH)
        $resource = imagerotate($resource, 180, 0);

      if($mode == IMG_FLIP_HORIZONTAL || $mode == IMG_FLIP_BOTH)
        $resource = imagerotate($resource, 90, 0);

      return $resource;

  }

}

?> 
```

# facebook - 邀请朋友 api facebook

> ID：15934337
> 
> 赞同：0
> 
> 时间：2013-04-10T19:07:32.093
> 
> 标签：facebook, api, invite

```
Please help me with this problem. 
```

我无法收到邀请。但我可以发送邀请。发生了什么？

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({
appId:'APP_ID',
cookie:true,
status:true,
xfbml:true
}); 
```

在喜欢之后，我的粉丝页面中有这段代码......

```
function FacebookInviteFriends()
{
FB.ui({
method: 'apprequests',
message: 'Your Message diaolog'
});
}
</script>

//HTML Code
<div id="fb-root"></div>
<a href='#' onclick="FacebookInviteFriends();"> 
Facebook Invite Friends Link
</a> 
```

请帮忙。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:33:12.600

也许您需要在 FB.ui 调用中处理 requestCallback，如下所示：

```
 ...
            FB.ui({method: 'apprequests',
                message: 'My Great Request'
            }, requestCallback);
         ...

        function requestCallback(result) {
            // Handle callback here
        } 
```

这就是我能帮助你的全部，因为我完全是 FB API 的新手，但我正在一点一点地研究它。

PS。我猜你在 FB.init 中写了 'APP_ID' 来隐藏真实的应用程序 ID ...如果不是，你必须从你的应用程序中编写你自己的应用程序 ID：P

# ios - 方块挡住了我的视线

> ID：15934338
> 
> 赞同：0
> 
> 时间：2013-04-10T19:07:37.990
> 
> 标签：ios, objective-c, objective-c-blocks, retain-cycle

假设我这样做：

```
MyClass *vista = [[MyClass alloc] initWithFrame:CGRectZero];

vista.onFinish = ^{
    CGRect rect = vista.bounds;
    // bla bla bla
}; 
```

然后 xcode 将奖励我此错误：在此块中强烈捕获 vista 可能会导致保留周期

有人建议像这样声明远景

```
__unsafe_unretained MyClass *vista = [[MyClass alloc] initWithFrame:CGRectZero]; 
```

但问题是这样的。vista 变量被分配给向下几行的属性。

```
self.myVista = vista; 
```

这是一个非原子的强属性。

我该如何解决？我可以声明一个临时 id var 来使用它，但这似乎是一个蹩脚的解决方案。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:46:35.723

尝试这个：

```
MyClass *vista = [[MyClass alloc] initWithFrame:CGRectZero];

__weak MyClass *weakVista = vista;    
vista.onFinish = ^{
    CGRect rect = weakVista.bounds;
    // bla bla bla
}; 
```

# machine-learning - SVM分类器的预测计算复杂度

> ID：15934339
> 
> 赞同：3
> 
> 时间：2013-04-10T19:07:40.233
> 
> 标签：machine-learning, svm

线性 SVM 的预测复杂度是多少？它的分离面只是一个超平面，所以预测时间似乎不应该取决于训练数据。同时我读到复杂性与支持向量的数量成正比。将所有这些支持向量保留在经过训练的分类器中有什么意义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-05T02:15:55.690

对于线性 SVM，分离超平面确实可以显式计算并保存为模型。换句话说，线性 SVM 模型的预测严格要求输入空间中的超平面。*许多专门的线性软件包就是这样做的*（LIBLINEAR、SVMPERF、PEGASOS，...）。即使您不需要支持向量的知识来使用线性 SVM 进行预测，但知道支持向量可能仍然有各种用途。

当使用非线性核使用 SVM 进行预测时，情况就大不相同了，因为分离超平面可能是无限维的（例如，当使用 RBF 核时）。在特征空间中计算超平面本身可能是不可能的，但是可以通过支持向量和测试点之间的核评估来计算超平面和特征空间中的测试点之间的内*积*。这就是所谓的*内核技巧*。

大多数同时支持线性和非线性内核的通用软件包倾向于以相同的方式保存所有模型（例如 LIBSVM）。这意味着线性模型是根据测试点和支持向量之间的内积来存储和评估的，就像非线性模型一样。显然，这比线性 SVM 更复杂。绝大多数人使用 SVM 的通用包而不是专门的线性包，即使在训练线性 SVM 时也是如此。这可能就是为什么许多人错误地认为线性 SVM 的预测总是依赖于支持向量的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T21:29:54.087

你是对的，预测时间不依赖于线性 SVM 的数据。这是因为预测变量只是测试向量和学习的权重向量之间的点积。

保留支持向量是没有意义的，否则任何人都会感到困惑:)。如果出于某种原因您想知道稍后的支持向量是什么，您可以通过评估训练数据上的分类器来轻松找出。所有预测错误或 SVM 输出值绝对值小于 1 的训练数据样本都是支持向量。

# plsql - 将存储过程从 SQL Server 迁移到 Oracle

> ID：15934344
> 
> 赞同：0
> 
> 时间：2013-04-10T19:08:15.237
> 
> 标签：plsql, oracle11g

我在 SQL Server 中有一个存储过程，它已迁移到 oracle 数据库。

1.  在 SQL Server 中，我创建了一个临时表，该表从表中获取列名，该表是逗号分隔的字符串。然后根据列名我创建了一个临时表。
2.  然后我将行插入临时表并查询这些表并执行该过程。
3.  最后放下桌子。

我怎样才能在 oracle 中实现同样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:49:54.467

在 Oracle 中，您可能需要类似 PL/SQL 关联记录数组（也称为“索引”表）之类的东西。使用游标一个一个地获取记录，或者使用 BULK COLLECT 一次获取所有记录到数组中，然后在内存中处理它们。

# php - 你应该在 PHP 中使用全局类吗

> ID：15934346
> 
> 赞同：-3
> 
> 时间：2013-04-10T19:08:19.110
> 
> 标签：php

我正在做一个项目，这就是我的编码实践的样子。

*   我在配置中加载所有类文件
*   我在配置中创建了一个 VITAL 类的实例（即。`$database = new Database()`）。非重要类在页面内创建。
*   在我只是`$database->query`用来获取数据的页面内。
*   我调用内部函数`global $database`并从那里获取它。

这种做法正常吗？灰心？鼓励？当你在一个大项目上工作时，你实现了哪种代码结构方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:10:06.947

不要启动您可能不会使用的课程，只有您肯定会使用的课程。用于其他用途的[自动加载](http://php.net/autoload)功能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T19:11:43.443

如果您将方法设为静态，则无需传递引用。

```
class Database {
    static function query($...) {...}
    ...
} 
```

您可能仍然希望构造函数启动连接，但一旦完成，您可以简单地调用`Database::query(...)`.

# ios - Restkit - 实体（null）不符合键“行”的键值编码

> ID：15934347
> 
> 赞同：1
> 
> 时间：2013-04-10T19:08:20.883
> 
> 标签：ios, core-data, restkit

我正在使用 RESTKIT 0.20，但映射有问题。谁能告诉我错误在哪里？谢谢，这是我的代码：

```
RKObjectMapping* pageMapping = [RKEntityMapping mappingForEntityForName:@"Page" inManagedObjectStore:[RKManagedObjectStore defaultStore]];
[pageMapping addAttributeMappingsFromArray:@[ @"rows", @"columns" ]];

RKObjectMapping* magazineMapping = [RKEntityMapping mappingForEntityForName:@"Magazine" inManagedObjectStore:[RKManagedObjectStore defaultStore]];

[magazineMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"pages"
                                                                               toKeyPath:@"pages"
                                                                             withMapping:pageMapping]];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:magazineMapping pathPattern:nil keyPath:@"magazine" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@", kBasePath, [magazine contentPath]]];
NSURLRequest *r = [NSURLRequest requestWithURL:URL];
RKObjectRequestOperation *objectRequestOperation = [[RKObjectRequestOperation alloc] initWithRequest:r responseDescriptors:@[ responseDescriptor ]];

[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    RKLogInfo(@"Load collection of Articles: %@", mappingResult.array);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    RKLogError(@"Operation failed with error: %@", error);
}];

[objectRequestOperation start]; 
```

有实体杂志：

```
@interface Magazine : NSManagedObject

@property (strong) NSString * contentPath;
@property (strong) NSDate * date;
@property (strong) NSString * icon;
@property (strong) NSString * magazineID;
@property (strong) NSDecimalNumber * price;
@property (strong) id priceLocale;
@property (strong) NSString * title;
@property (strong) Page *pages; 
```

最后是 Page 实体：

```
@class Magazine;

@interface Page : NSManagedObject

@property (strong) NSString * content;
@property (strong) NSNumber * contentID;
@property (strong) NSNumber * columns;
@property (strong) NSNumber * rows;
@property (strong) NSString *pageID;
@property (strong) Magazine *assignedMagazine; 
```

错误必须在映射页面实体中，因为其他“下载”方法没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:11:28.160

像这样使用映射：

```
RKManagedObjectMapping *mappingPage = [RKManagedObjectMapping mappingForClass:[Page class] inManagedObjectStore:self.objectStore];
    mappingPage.setDefaultValueForMissingAttributes = NO;
    mappingPage.primaryKeyAttribute = @"contentID";
    [mappingPage mapKeyPathsToAttributes:

     @"CONTENT_FROM_WEBSERVICE", @"content",
     @"ID_FROM_WEBSERVICE", @"contentID",
     @"COLUMNS_FROM_WEBSERVICE", @"columns",
     @"ROWS_FROM_WEBSERVICE", @"rows",     
     nil]; 
```

# javascript - 获取 JavaScript 正则表达式中每个捕获的索引

> ID：15934353
> 
> 赞同：41
> 
> 时间：2013-04-10T19:08:51.323
> 
> 标签：javascript, regex, capturing-group

我想匹配一个像`/(a).(b)(c.)d/`with这样的正则表达式`"aabccde"`，并得到以下信息：

```
"a" at index = 0
"b" at index = 2
"cc" at index = 3 
```

我怎样才能做到这一点？String.match 返回匹配列表和完整匹配开始的索引，而不是每个捕获的索引。

编辑：一个不适用于普通 indexOf 的测试用例

```
regex: /(a).(.)/
string: "aaa"
expected result: "a" at 0, "a" at 2 
```

注意：问题类似于[Javascript Regex: How to find index of each subexpression？](https://stackoverflow.com/questions/11568345/javascript-regex-how-to-find-index-of-each-subexpression)，但我无法修改正则表达式以使每个子表达式都成为捕获组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-08-24T22:42:21.580

目前有一个[提案](https://github.com/tc39/proposal-regexp-match-indices)（第 4 阶段）在本机 Javascript 中实现这一点：

> **ECMAScript 的正则表达式匹配索引**
> 
> ECMAScript RegExp 匹配索引提供了有关捕获的子字符串相对于输入字符串开头的开始和结束索引的附加信息。
> 
> *...我们建议在 的数组结果（子字符串数组*）上采用一个附加`indices`属性。此属性本身是一个索引数组，其中包含每个捕获的子字符串的一对开始和结束索引。任何*不匹配*的捕获组都将类似于它们在*子字符串数组*中的对应元素。此外，*索引数组*本身将具有一个 groups 属性，其中包含每个命名捕获组的开始和结束索引。*`RegExp.prototype.exec()`*`undefined`**

 ***这是一个事情如何运作的例子。以下代码段至少在 Chrome 中运行没有错误：

```
const re1 = /a+(?<Z>z)?/d;

// indices are relative to start of the input string:
const s1 = "xaaaz";
const m1 = re1.exec(s1);
console.log(m1.indices[0][0]); // 1
console.log(m1.indices[0][1]); // 5
console.log(s1.slice(...m1.indices[0])); // "aaaz"

console.log(m1.indices[1][0]); // 4
console.log(m1.indices[1][1]); // 5
console.log(s1.slice(...m1.indices[1])); // "z"

console.log(m1.indices.groups["Z"][0]); // 4
console.log(m1.indices.groups["Z"][1]); // 5
console.log(s1.slice(...m1.indices.groups["Z"])); // "z"

// capture groups that are not matched return `undefined`:
const m2 = re1.exec("xaaay");
console.log(m2.indices[1]); // undefined
console.log(m2.indices.groups.Z); // undefined
```

因此，对于问题中的代码，我们可以这样做：

```
const re = /(a).(b)(c.)d/d;
const str = 'aabccde';
const result = re.exec(str);
// indices[0], like result[0], describes the indices of the full match
const matchStart = result.indices[0][0];
result.forEach((matchedStr, i) => {
  const [startIndex, endIndex] = result.indices[i];
  console.log(`${matchedStr} from index ${startIndex} to ${endIndex} in the original string`);
  console.log(`From index ${startIndex - matchStart} to ${endIndex - matchStart} relative to the match start\n-----`);
});
```

输出：

```
aabccd from index 0 to 6 in the original string
From index 0 to 6 relative to the match start
-----
a from index 0 to 1 in the original string
From index 0 to 1 relative to the match start
-----
b from index 2 to 3 in the original string
From index 2 to 3 relative to the match start
-----
cc from index 3 to 5 in the original string
From index 3 to 5 relative to the match start 
```

请记住，该`indices`数组包含匹配组的索引*相对于字符串的开头*，而不是相对于匹配的开头。

* * *

一个 polyfill 在[这里](https://www.npmjs.com/package/regexp-match-indices)可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-04T22:49:39.483

前段时间我为此编写了[MultiRegExp](https://github.com/dlsloan/MultiRegExp)。只要您没有嵌套的捕获组，它就可以解决问题。它的工作原理是在 RegExp 中的捕获组之间插入捕获组，并使用所有中间组来计算请求的组位置。

```
var exp = new MultiRegExp(/(a).(b)(c.)d/);
exp.exec("aabccde"); 
```

应该返回

```
{0: {index:0, text:'a'}, 1: {index:2, text:'b'}, 2: {index:3, text:'cc'}} 
```

[现场版](http://dlsloan.ca/Docs/Javascript/MultiRegExp.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-11T14:19:35.500

我创建了一个小的正则表达式解析器，它也能够像魅力一样解析嵌套组。它很小但很大。不完全是。像唐纳德的手。如果有人可以测试它，我会非常高兴，因此它将经过实战测试。它可以在以下位置找到：[https ://github.com/valorize/MultiRegExp2](https://github.com/valorize/MultiRegExp2)

用法：

```
let regex = /a(?: )bc(def(ghi)xyz)/g;
let regex2 = new MultiRegExp2(regex);

let matches = regex2.execForAllGroups('ababa bcdefghixyzXXXX'));

Will output:
[ { match: 'defghixyz', start: 8, end: 17 },
  { match: 'ghi', start: 11, end: 14 } ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T23:39:12.557

所以，你有一个文本和一个正则表达式：

```
txt = "aabccde";
re = /(a).(b)(c.)d/; 
```

第一步是获取与正则表达式匹配的所有子字符串的列表：

```
subs = re.exec(txt); 
```

然后，您可以对每个子字符串的文本进行简单搜索。您必须将最后一个子字符串的位置保存在变量中。我已经命名了这个变量`cursor`。

```
var cursor = subs.index;
for (var i = 1; i < subs.length; i++){
    sub = subs[i];
    index = txt.indexOf(sub, cursor);
    cursor = index + sub.length;

    console.log(sub + ' at index ' + index);
} 
```

**编辑：**感谢@nhahtdh，我改进了机制并完成了功能：

```
String.prototype.matchIndex = function(re){
    var res  = [];
    var subs = this.match(re);

    for (var cursor = subs.index, l = subs.length, i = 1; i < l; i++){
        var index = cursor;

        if (i+1 !== l && subs[i] !== subs[i+1]) {
            nextIndex = this.indexOf(subs[i+1], cursor);
            while (true) {
                currentIndex = this.indexOf(subs[i], index);
                if (currentIndex !== -1 && currentIndex <= nextIndex)
                    index = currentIndex + 1;
                else
                    break;
            }
            index--;
        } else {
            index = this.indexOf(subs[i], cursor);
        }
        cursor = index + subs[i].length;

        res.push([subs[i], index]);
    }
    return res;
}

console.log("aabccde".matchIndex(/(a).(b)(c.)d/));
// [ [ 'a', 1 ], [ 'b', 2 ], [ 'cc', 3 ] ]

console.log("aaa".matchIndex(/(a).(.)/));
// [ [ 'a', 0 ], [ 'a', 1 ] ] <-- problem here

console.log("bababaaaaa".matchIndex(/(ba)+.(a*)/));
// [ [ 'ba', 4 ], [ 'aaa', 6 ] ] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-20T06:49:45.373

基于[ecma 正则表达式语法](http://www.ecma-international.org/ecma-262/6.0/#sec-regexp-regular-expression-objects)，我编写了一个解析器，分别是 RegExp 类的扩展，它解决了这个问题（完整索引的 exec 方法）以及 JavaScript RegExp 实现的其他限制，例如：基于组的搜索和替换。您可以[在此处测试和下载实现](http://www--s0-v1.becke.ch/tool/becke-ch--regex--s0-v1/becke-ch--regex--s0-0-v1--homepage--pl--client/)（也可以作为 NPM 模块使用）。

实现工作如下（小例子）：

```
//Retrieve content and position of: opening-, closing tags and body content for: non-nested html-tags.
var pattern = '(<([^ >]+)[^>]*>)([^<]*)(<\\/\\2>)';
var str = '<html><code class="html plain">first</code><div class="content">second</div></html>';
var regex = new Regex(pattern, 'g');
var result = regex.exec(str);

console.log(5 === result.length);
console.log('<code class="html plain">first</code>'=== result[0]);
console.log('<code class="html plain">'=== result[1]);
console.log('first'=== result[3]);
console.log('</code>'=== result[4]);
console.log(5=== result.index.length);
console.log(6=== result.index[0]);
console.log(6=== result.index[1]);
console.log(31=== result.index[3]);
console.log(36=== result.index[4]); 
```

我也尝试了@velop 的实现，但实现似乎有问题，例如它不能正确处理反向引用，例如“/a(?: )bc(def( **\1** ghi)xyz)/g” - 当在前面添加括号时反向引用**\1**需要相应地增加（在他的实现中不是这种情况）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-15T03:10:55.220

我不确定您对搜索的确切要求是什么，但这是您如何在第一个示例中使用[`Regex.exec()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)while 循环获得所需输出的方法。

**JavaScript**

```
var myRe = /^a|b|c./g;
var str = "aabccde";
var myArray;
while ((myArray = myRe.exec(str)) !== null)
{
  var msg = '"' + myArray[0] + '" ';
  msg += "at index = " + (myRe.lastIndex - myArray[0].length);
  console.log(msg);
} 
```

**输出**

```
"a" at index = 0
"b" at index = 2
"cc" at index = 3 
```

使用该`lastIndex`属性，您可以减去当前匹配字符串的长度以获得起始索引。***

# python - PythonMagick ColorSpace 类型

> ID：15934357
> 
> 赞同：3
> 
> 时间：2013-04-10T19:09:25.803
> 
> 标签：python, imagemagick, pythonmagick

我试过了：

```
from PythonMagick import Image
img = Image("input.jpg")
img.quantizeColorSpace("sRGB") 
```

并得到：

> 回溯（最近一次调用最后）：文件... img.quantizeColorSpace("sRGB") Boost.Python.ArgumentError：Image.quantizeColorSpace(Image, str) 中的 Python 参数类型与 C++ 签名不匹配：quantizeColorSpace(Magick::Image {lvalue}) quantizeColorSpace(Magick::Image {lvalue}, MagickCore::ColorspaceType)

我知道我必须使用 MagickCore::ColorspaceType 类型。但是我怎样才能将该类型导入 Python 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T19:30:23.510

很有可能，这是一个错误： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25229](http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25229)

在 PythonMagick 的某些（？）版本中缺少 ColorspaceType，应该在更新的库（>=0.9.9）中修复。

# linux - 是否可以查看正在运行但已修改的 bash 脚本的原始内容？

> ID：15934362
> 
> 赞同：3
> 
> 时间：2013-04-10T19:09:49.337
> 
> 标签：linux, bash

假设我`run.sh`在后台运行 bash 脚本，然后修改`run.sh`. 无论如何要查看`run.sh`脚本的原始内容吗？

例如：

```
echo "echo a1; sleep 120; echo a2" > run.sh; bash run.sh& 
aPid=$!
echo "echo bbbbbb" > run.sh 
```

我期待类似的东西`cat {magic file/path}`，它会打印出来

```
echo a1; sleep 120; echo a2 
```

我正在四处寻找 /proc/$aPid ，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:57:59.380

`bash`似乎试图将它当前正在解释的脚本放在文件描述符 255 上，至少在我的系统上，对文件描述符最大值没有任何活动的非默认约束等......这可能不能保证，所以你可能不得不玩有点，但考虑到正在运行的`bash /some/script/sh`进程的 PID，您可以查看`/proc/<PID>/fd/`文件描述符链接 - 0、1 和 2 当然是预定义的 stdin/stdout/stderr 链接，根据您的脚本可能还有其他链接确实如此，但是筛选该目录的内容以找出哪个文件描述符对应于您的脚本文件应该不难，您可以通过它`cat`或其他任何方式（例如`cat /proc/12345/fd/255`）查看原始脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:34:23.353

首先确保您的 ulimit 设置为允许核心文件。尝试

```
ulimit -c unlimited 
```

接下来，运行您的脚本

```
./run.sh 
```

在您的脚本运行时，修改或删除`run.sh`脚本文件。

`ps ax`查找第一个`run.sh`脚本的进程 ID (PID) 。你应该看到类似的东西

```
19365 pts/5    S+     0:00 /bin/bash ./run.sh 
```

然后做

```
kill -SIGSEGV 19365 
```

你应该看到类似的东西

```
Segmentation fault (core dumped) 
```

在您第一次运行的终端窗口中`run.sh`。

最后，做

```
strings core 
```

`core`文件上。在字符串的某处，您应该会看到原始`run.sh`文件的文本。

学分：这个答案改编自[Retrieve plain text script from compiled bash script](https://stackoverflow.com/questions/3408373/retrieve-plain-text-script-from-compiled-bash-script)。

# sql - psql：服务器意外关闭了连接

> ID：15934364
> 
> 赞同：49
> 
> 时间：2013-04-10T19:09:53.870
> 
> 标签：sql, postgresql, cmd

我一直在尝试运行这个通过 Postgre DB 服务器的批处理文件并运行两个不同的 sql 文件，如下所示：

```
set PGPASSWORD=blah
cls
@echo on
"C:\Progra~1\pgAdmin III\1.16\psql" -d [db name] -h [server name] -p 5432 -U postgres -f C:\query1.sql
"C:\Progra~1\pgAdmin III\1.16\psql" -d [db name] -h [server name] -p 5432 -U postgres -f C:\query2.sql 
```

但是问题来了，有时我会为 query1 或 query2 的命令收到以下错误：

```
psql: server closed the connection unexpectedly 
This probably means the server terminated abnormally
before or while processing the request. 
```

这只有时会发生，所以我不完全确定它为什么会发生。有人可以解释为什么会这样，以及是否有解决此问题的方法。谢谢！

更新：在实际的 Postgre 应用程序中尝试打开远程服务器时，有时我也会遇到同样的错误：“发生错误：“服务器意外关闭了连接这可能意味着服务器在处理请求之前或处理请求时异常终止。”

在我点击错误弹出窗口后，我也得到了这个 Guru Hint 的东西：

数据库编码 创建数据库 VA-trac 以使用 SQL_ASCII 编码存储数据。此编码仅针对 7 位字符定义；未定义第 8 位设置的字符（非 ASCII 字符 127-255）的含义。因此，服务器不可能将数据转换为其他编码。如果您在数据库中存储非 ASCII 数据，强烈建议您使用代表您的语言环境字符集的正确数据库编码，以便在需要时从自动转换为不同的客户端编码中受益。如果您将非 ASCII 数据存储在 SQL_ASCII 数据库中，您可能会遇到由代码转换问题引起的写入或读取数据库的奇怪字符。当使用不同的客户端程序和驱动程序访问数据库时，这可能会让您非常头疼。

无论如何，服务器仍然会在之后打开，我可以从那时起访问数据库。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-09-29T12:57:37.380

留下这个信息，

**如果 PostgreSQL 服务器在另一台机器上并且没有侦听外部接口**，也会导致此错误。

要调试此特定问题，您可以按照以下步骤操作：

*   看看你的 postgresql.conf，`sudo vim /etc/postgresql/9.3/main/postgresql.conf`
*   添加这一行：`listen_addresses = '*'`
*   重启服务`sudo /etc/init.d/postgresql restart`

（注意，上面的命令是针对 ubuntu 的。其他 linux 发行版或操作系统可能有不同的路径到这些文件）

注意：使用`'*'`监听地址将监听所有接口。如果你这样做，`'0.0.0.0'`那么它会监听所有的 ipv4，如果你这样做`'::'`，它会监听所有的 ipv6。

[http://www.postgresql.org/docs/9.3/static/runtime-config-connection.html](http://www.postgresql.org/docs/9.3/static/runtime-config-connection.html)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-12T17:46:24.900

原来这是因为我的本地和服务器之间的 postgre SQL 版本不匹配，在我的计算机上安装相同版本的 PostgreSQL 解决了这个问题。谢谢！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-25T07:23:01.267

就我而言，这是因为我在 pg_hba.conf 中错误地设置了 IP 配置，该配置位于 Windows 的数据文件夹中。

```
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             192.168.1.0/24            md5 
```

我错误地输入（复制粘贴:-)）192.168.0.0 而不是 192.168.1.0。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-15T17:17:41.717

就我而言，我使用的是 Postgresql 9.2.24，解决方案是这样的（pg_hba.conf）：

```
host    all             all             0.0.0.0/0            trust 
```

对于远程连接，请使用**trust**。结合（如上所述）

```
listen_addresses = '*' 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-28T11:56:50.510

在我的情况下，我通过 pgAdmin 与 ssh 隧道建立连接并设置为主机字段 ip 地址，但有必要设置`localhost`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-07T12:32:04.917

这是一个旧帖子，但是...

只是惊讶于没有人谈论 pg_hba 文件，因为它可能是获取此错误代码的一个很好的理由。

在这里检查那些忘记配置它的人： [http ://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-13T20:32:12.753

在我的情况下，我尝试通过 pgAdmin4 使用 ssh 隧道连接，然后`AllowTcpForwarding no`在服务器的`/etc/ssh/sshd_config`. 但它应该是`AllowTcpForwarding yes`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-02T18:53:03.320

如果您使用 Docker，请确保您没有在另一个服务中使用相同的端口，在我的情况下，我错误地为 PostgreSQL 和 Redis 使用了相同的端口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-26T12:15:34.117

如果您的 Postgres 正在工作，但突然遇到此错误，我的问题只需重新启动 Postgres 服务或容器即可解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-15T03:43:34.830

解决方法是先给用户设置密码。

在终端

```
sudo -u <username> psql

ALTER USER <username> PASSWORD 'SetPassword';
# ALTER ROLE

\q 
```

在 pgAdmin 中

```
**Connection**

Host name/address: 127.0.0.1
Port: 5432
Maintenance database: postgres
username: postgres
password: XXXXXX 
```

# .net - 使用 ExpandoObject 命名格式

> ID：15934365
> 
> 赞同：2
> 
> 时间：2013-04-10T19:09:54.727
> 
> 标签：.net, string-formatting

我所拥有的是`ExpandoObject`具有动态数量的属性。

我想使用这个对象来格式化一个使用命名格式表达式的字符串，类似于[这里所做的](http://haacked.com/archive/2009/01/14/named-formats-redux.aspx)

不幸的是，Phil 和朋友的实现都不能与`ExpandoObject`.

我愿意使用字典代替`ExpandoObject`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:56:03.890

原来你可以使用 ExpandoObject... 我添加了[NETFx String.FormatWith Extension Method](http://nuget.org/packages/netfx-System.StringFormatWith/) nuget 包（它本质上是 Phil 帖子中的 Henri Wiechers 解决方案）

但是，不要将其用作扩展方法（这将导致编译器错误），您必须将其用作静态方法，如下所示：

`var str = StringFormatWithExtension.FormatWith(string, ExpandoObject);`

# css - 使用 ng-view 时的背景大小问题

> ID：15934371
> 
> 赞同：3
> 
> 时间：2013-04-10T19:10:17.070
> 
> 标签：css, angularjs

我实际上是在尝试将 Angular 用于个人网站。

当我使用一个简单的页面（没有 ng-view）时，我的背景图像就像一个魅力。但是当我尝试使用 ng-view 渲染模板时，我的背景图像大小完全错误。

这是我的 CSS ：

```
#wrap {
    background-color: #303030;
    background-image: url(../img/bg1.jpg);
    -moz-background-size: cover;
    -o-background-size: cover;
    -webkit-background-size: cover;
    background-size: cover;
    background-repeat: no-repeat;
    min-height: 100%;
    height: auto !important;
    height: 100%;
} 
```

我认为这可能来自 Angular 预渲染我的模板，但我不知道如何解决它......

我已经尝试使用指令并在我的视图中使用 ng-style 调用它，但它不起作用......

我希望有人以前已经遇到过这个问题并且可以帮助我=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:49:31.830

好的，我找到了解决方案！

我正在使用带有 div 的 ng-view：`<div ng-view></div>`所以当我使用我的所有模板时，html 都在这个 div 中呈现。

我只是在这个 div 中明确地将我的高度设置为 100% ：`<div ng-view style="height:100%"></div>`现在它可以工作了。

真的不知道这是一个错误还是缺乏 HTML 经验。

# c# - 从 FormClosing 触发时，RunWorkerCompleted 未触发

> ID：15934379
> 
> 赞同：1
> 
> 时间：2013-04-10T19:10:41.527
> 
> 标签：c#, forms, timer, backgroundworker, formclosing

我有一个表单需要通过 Web 服务调用将未保存的数据保存到外部数据库。当用户手动保存数据时，会触发 RunWorkerCompleted，但是当我通过 FormClosing 事件调用该方法时不会触发。

计时器在用户修改表单中的值几秒钟后滴答作响，如果用户修改另一个值，则计时器会被重置，其想法是“toSend”列表有多个值，我可以一次发布多个更改因为 Web 服务调用开销很大。

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        if (PublishBackgroundWorker.IsBusy)
            return;

        List<object> toSend = new List<object>();

        // Figure out what changed and add it to toSend ...
        toSend.Add(changedItems);

        if (toSend.Count >= 1)
            PublishBackgroundWorker.RunWorkerAsync(toSend);
    }

    private void PublishBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        if (((List<object>)(e.Argument)).Count > 0)
        {
            Service.SrvObjects[] ret = Svc.PublishItems(e.Argument));
        }
    }

    private void PublishBackgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        Invoke(new UpdateStatusCallback(this.UpdateStatus), new object[] { "Ready" });
    }

    private void IPTUserInterfaceForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        timer1.Enabled = false;
        timer1_Tick(this, new EventArgs());
        //Application.DoEvents();
        while (PublishBackgroundWorker.IsBusy)
            System.Threading.Thread.Sleep(100);
    } 
```

这有意义吗？当用户更改一个值并在计时器关闭之前关闭表单时，我手动 Tick 希望 PublishBackgroundWorker.IsBusy 在某个时候为假，并且永远不会因为 RunWorkerCompleted 从未被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:17:48.137

问题是您的 Backgroundworker 并不因为您调用 timerTick 方法而忙碌。因此，在方法的其余部分运行并关闭表单并关闭应用程序之前，永远不会到达此代码：

```
 while (PublishBackgroundWorker.IsBusy)
        System.Threading.Thread.Sleep(100); 
```

# ios - GPUImageView 的别名问题

> ID：15934381
> 
> 赞同：1
> 
> 时间：2013-04-10T19:11:03.577
> 
> 标签：ios, objective-c, gpuimage

我在透明文本 GPUImagePicture 上出现奇怪的黑色混叠，它与基本 GPUImagePicture 混合，并以 GPUImageView 作为最终目标。这就是我正在做的事情：

```
textOverlay = [[GPUImagePicture alloc] initWithImage:self.rootViewController.previewImageTextOverlay];
GPUImageAlphaBlendFilter *textBlend = [[[GPUImageAlphaBlendFilter alloc] init] autorelease];
[upstreamOutputFilter addTarget:textBlend];
[textOverlay addTarget:textBlend];
[textBlend addTarget:gpuPreviewImageView];
[textOverlay processImage]; 
```

[![图片](https://i.stack.imgur.com/fK3UL.png)](https://i.stack.imgur.com/fK3UL.png)
[（来源：[kevinharringtonphoto.com](http://www.kevinharringtonphoto.com/photos/i-m4Hrt6L/0/M/i-m4Hrt6L-M.png)）]

如何消除混叠？

我想要这个（通过堆叠两个 UIImages 得到）：（ [来源：][[kevinharringtonphoto.com](http://www.kevinharringtonphoto.com/photos/i-QqgWnhg/0/M/i-QqgWnhg-M.png)][）][![图片](https://i.stack.imgur.com/G46mI.png)](https://i.stack.imgur.com/G46mI.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:03:00.240

我调查并发现这是 GPUImageAlphaBlendFilter 的错误。问题是着色器代码没有考虑第二个图像的预乘 alpha。

这是一个快速修复：

代替

```
gl_FragColor = vec4(mix(textureColor.rgb, textureColor2.rgb, 
                        textureColor2.a * mixturePercent), textureColor.a); 
```

和：

```
if (textureColor2.a == 0.0) {
   gl_FragColor = textureColor;
} else {
   gl_FragColor = vec4(mix(textureColor.rgb, textureColor2.rgb / textureColor2.a,
                           mixturePercent * textureColor2.a), textureColor.a);
} 
```

可能有一些不错的方法可以使用不涉及分支的着色器来执行此操作，但这很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T01:02:14.377

诺基亚，这对我有用，但我需要设置不透明度值

```
 filter = [[GPUImageAlphaBlendFilter alloc] init];
 [filter setMix:1]; 
```

# mysql - 如何返回按实体分组的最近时隙，但仅针对最近的可用日期，而不是每个可用日期？

> ID：15934383
> 
> 赞同：4
> 
> 时间：2013-04-10T19:11:06.750
> 
> 标签：mysql, sql, database

我有一个表格，可以存储教师的可用约会，按小时计算，可以完全自由地为每位教师每天添加无限的插槽（只要插槽不重叠）。示例简化结构：

```
CREATE TABLE time_slots (
  id int(10) unsigned NOT NULL AUTO_INCREMENT,
  teacher_id mediumint(8) unsigned NOT NULL,
  slot bigint(20) unsigned NOT NULL DEFAULT '0',
 ); 
```

**slot**列存储 slot的时间戳。

如何为每位教师显示最接近的第一个可用日期的所有可用位置？注意：显示给定一天的所有时间段，同一老师不能显示超过一天。

## 示例数据：

PS：使用 datetime 只是为了使事情更具可读性。

```
+----+------------+------------------+
| id | teacher_id | slot             |
+----+------------+------------------+
| 1  | 1          | 2013-04-10 08:00 |
| 2  | 1          | 2013-04-10 09:00 |
| 3  | 1          | 2013-04-10 09:30 |
| 4  | 1          | 2013-04-11 08:00 |
| 5  | 1          | 2013-04-11 09:00 |
| 6  | 1          | 2013-04-11 10:30 |
| 7  | 2          | 2013-04-12 07:00 |
| 8  | 2          | 2013-04-12 09:00 |
| 9  | 2          | 2013-04-14 08:00 |
+----+------------+------------------+ 
```

## 预期结果：

假设在**2013-04-10 08:30**进行搜索，返回的结果必须是：

```
+----+------------+------------------+
| id | teacher_id | slot             |
+----+------------+------------------+
| 2  | 1          | 2013-04-10 09:00 |
| 3  | 1          | 2013-04-10 09:30 |
| 7  | 2          | 2013-04-12 07:00 |
| 8  | 2          | 2013-04-12 09:00 |
+----+------------+------------------+ 
```

1.  不要显示 id 1，因为从 4 月 10 日开始已经过了 08:00。
2.  不要显示 id 4、5、6，因为我们发现teacher = 1 的最接近的可用插槽是 id 的 2 和 3。
3.  不要显示 id 9，因为对于 teacher = 2，最接近的可用插槽是 7 和 8，所以不要改天返回。

## 我试过的

我很难提出查询，我只是提出了这个基本查询，但它没有假设只获得第一个可用天，当然它不会返回给定日期的所有可用插槽。每个教师只返回 1 个插槽：

```
SELECT id, teacher_id, FROM_UNIXTIME(slot)
FROM time_slots
WHERE slot >= [Actual timestamp]
GROUP BY DATE(FROM_UNIXTIME(slot))
ORDER BY slot, teacher_id ASC 
```

注意：我在这里使用 FROM_UNIXTIME 只是为了调试，当然我稍后会优化索引等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:20:45.497

首先，您需要一个查询来获取每个老师最近的**一天**，因为这对于每个老师来说都是不同的。一些伪 SQL 在这里这样做：

```
SELECT
  MIN(DATE(slot)) as closestDay,
  teacher_id
FROM time_slots
WHERE slot >= NOW()
GROUP BY teacher_id 
```

然后进行该查询并使用结果显示每天的所有可用插槽

```
SELECT 
   id,
   time_slots.teacher_id,
   FROM_UNIXTIMESTAMP(slot)
FROM time_slots
JOIN (
    SELECT
      MIN(DATE(slot)) as closestDay,
      teacher_id
    FROM time_slots
    WHERE slot >= NOW()
    GROUP BY teacher_id
) a
ON a.teacher_id = time_slots.teacher_id
  AND DATE(time_slots.slot) = closestDay
WHERE time_slots.slot >= NOW() 
```

它显然没有经过测试，但它应该给你一个大致的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:33:04.483

无需加入：

```
drop table if exists time_slots;
CREATE TABLE time_slots (
  id int(10) unsigned NOT NULL AUTO_INCREMENT primary key,
  teacher_id mediumint(8) unsigned NOT NULL,
  slot datetime 
 );
insert into time_slots values 
('1','1','2013-04-10 08:00'),
('2','1','2013-04-10 09:00'),
('3','1','2013-04-10 09:30'),
('4','1','2013-04-11 08:00'),
('5','1','2013-04-11 09:00'),
('6','1','2013-04-11 10:30'),
('7','2','2013-04-12 07:00'),
('8','2','2013-04-12 09:00'),
('9','2','2013-04-14 08:00');

select * from time_slots 
where (teacher_id, date(slot)) in
(select teacher_id, date(min(slot)) from time_slots where slot >= '2013-04-10 08:30' group by teacher_id)
having slot >= '2013-04-10 08:30'
; 
```

# c - 读取引脚电平 Raspberry Pi

> ID：15934388
> 
> 赞同：3
> 
> 时间：2013-04-10T19:11:23.750
> 
> 标签：c, raspberry-pi

我一直在 C gpio 示例下使用此[示例中的代码。](http://elinux.org/RPi_Low-level_peripherals#nofollow)我能够设置和写入引脚而没有定义问题：

```
// GPIO setup macros. Always use INP_GPIO(x) before using OUT_GPIO(x) or SET_GPIO_ALT(x,y)
#define INP_GPIO(g) *(gpio+((g)/10)) &= ~(7<<(((g)%10)*3))
#define OUT_GPIO(g) *(gpio+((g)/10)) |=  (1<<(((g)%10)*3))
#define SET_GPIO_ALT(g,a) *(gpio+(((g)/10))) |= (((a)<=3?(a)+4:(a)==4?3:2)<<(((g)%10)*3))

#define GPIO_SET *(gpio+7)  // sets   bits which are 1 ignores bits which are 0
#define GPIO_CLR *(gpio+10) // clears bits which are 1 ignores bits which are 0 
```

和

```
 INP_GPIO(4); // must use INP_GPIO before we can use OUT_GPIO
  OUT_GPIO(4);
  GPIO_SET = 1<<4; 
```

这工作正常。但是，如果我想从 pin 中读取，我不确定该怎么做。我试图通过返回来阅读它，`gpio + thePin`但我相信这给了我地址而不是价值。我尝试返回一个指针，但这也给了我垃圾（-232783856）。

任何想法如何从引脚读取值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-05T21:52:04.443

```
#define GPIO_LEV *(gpio+13)                  // pin level
INP_GPIO(4);                                 // pin 4 initialization for reading
unsigned int value = GPIO_LEV;               // reading all 32 pins
bool pin4_value = ((value & (1 << 4)) != 0); // get pin 4 value 
```

此代码基于[bcm2835 库](http://www.airspayce.com/mikem/bcm2835/)中的函数 bcm2835_gpio_lev并且仅可用于引脚 0 到 31。如果它不起作用，请查看此库 - 读取值加倍。

# php - php array_search 0 索引

> ID：15934392
> 
> 赞同：11
> 
> 时间：2013-04-10T19:11:34.937
> 
> 标签：php, arrays, search, zero

似乎您不能使用 PHP 中的 search_array 函数来搜索 0 索引并将其评估为真。

例如，考虑以下代码：

```
$test=array(100, 101, 102, 103);

if($key=array_search(100,$test)){

     echo $key;

}

else{

     echo "Not found";

} 
```

在大海捞针中找到针'100'，键返回为0。到目前为止一切顺利，但是当我评估搜索是否成功时，它失败了，因为返回的值为0，等于false！

php 手册建议使用 '!==' 但这样做不会返回键（数组索引），而是返回 1 或 0：

```
if($key=(array_search(103,$test)!== false)){

} 
```

那么如何才能成功搜索数组，在 0 索引中找到匹配项并将其评估为真呢？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-10T19:13:05.197

这在文档中明确提到。您需要使用`===`或`!==`：

```
$key = array_search(...);

if ($key !== false) ... 
```

否则， when `$key`is `0`，其[计算结果为`false`](http://php.net/manual/en/language.types.boolean.php)when 被测试为布尔值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T19:15:28.880

The conditional in your second example block gives execution order priority to the `!==` operator, you want to do the opposite though.

```
if (($key = array_search(100,$test)) !== false) { 
```

`!==` has **higher** precedence than `==` which makes the parentheses necessary.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:17:43.530

```
$key = array_search($what, $array);
if($key !== false and $array[$key] == $what) {
 return true;
} 
```

it's more secure

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:15:18.757

```
if(($key = array_search(103,$test)) !== false){

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T00:16:26.687

```
$test=array(100, 101, 102, 103);

if (($key = array_search(100,$test)) === false) {
    echo "Not found";
} else{
    echo $key;
} 
```

# tomcat - Jenkins 将插件部署到多个 Tomcat 服务器

> ID：15934400
> 
> 赞同：1
> 
> 时间：2013-04-10T19:11:47.033
> 
> 标签：tomcat, jenkins, tomcat7, jenkins-plugins

我想使用 Jenkins 部署插件将我的战争文件部署到多个远程 tomcat 7 服务器。

通过 UI 我只能做一台服务器。一旦我选择“将战争/耳朵部署到容器”，我就无法再次选择它。该选项显示为灰色。

注意部署到一台服务器工作得很好，我只想能够部署到多台服务器。我可以使用 Jenkins 部署插件来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T23:40:15.280

我不这么认为，我相信这是jenkin中这个插件的局限性。理想情况下，它应该允许我们在多个服务器上部署相同的战争。希望这会有所帮助。

# java - 解码消息时出现 ArrayOutOfBoundsException

> ID：15934404
> 
> 赞同：0
> 
> 时间：2013-04-10T19:12:16.173
> 
> 标签：java, arrays

当我运行以下代码时，出现“数组越界”异常。基本上，我将两个 TLV 编码字符串从客户端发送到服务器，服务器解码 TLV 编码值并将它们打印到屏幕上。

打印解码值的代码

```
byte[] from_ca = new byte[65536];
int msg = is.read(from_ca, 0, 65536);
from_ca = Arrays.copyOfRange(from_ca, 0, msg);
Object[] decodeBytes = TLV.decode(from_ca);

String ca_id = (String) decodeBytes[0];
String cb_id = (String) decodeBytes[1]; 
```

TLV 类中用于解码的代码

```
public static Object[] decode(byte[] data) throws Exception {
    int i = 0;
    List<Object> tlvList = new ArrayList<Object>();
    while (i < data.length) {
        if (data[i] == TLV.ascii) {
            int length = (256 * data[i + 2]) + data[i + 1];
            tlvList.add(new String(Arrays.copyOfRange(data, i + 3, i + 3 + length), "US-ASCII"));
            i = i + 3 + length;

        } else if (data[i] == TLV.integer) {
            int length = (256 * data[i + 2]) + data[i + 1];
            tlvList.add(Integer.parseInt(new String(Arrays.copyOfRange(
            data, i + 3, i + 3 + length), "US-ASCII")));
            i = i + 3 + length;

        } else if (data[i] == TLV.binary) {
            int length = (256 * data[i + 2]) + data[i + 1];
            tlvList.add(Arrays.copyOfRange(data, i + 3, i + 3 + length));
            i = i + 3 + length;

        }
    } // end of loop
    return tlvList.toArray(new Object[tlvList.size()]);
} 
```

运行程序时出现以下异常：

```
an error has occurred
java.lang.ArrayIndexOutOfBoundsException: 1
at ServerConnection.run(Server.java: 131)
At java.lang.Thread.run(Unknown Source) 
```

如果可能的话，我将不胜感激进一步调试问题甚至解决方案的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:20:29.247

您正在迭代，`i < data.length`但随后您尝试访问`data[i + 1]`and `data[i + 2]`。

你应该做

`while (i < data.length - 2)`反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:20:30.540

最有可能这条线导致你异​​常

```
 int length = (256 * data[i + 2]) + data[i + 1]; 
```

当计数器`(i)`达到`data.length`那时 `data [i+2]`并将`data[i + 1]`超出数组范围。

# android - 输入图像在移动设备上快速按下时具有突出显示框

> ID：15934413
> 
> 赞同：1
> 
> 时间：2013-04-10T19:11:48.770
> 
> 标签：android, iphone, image, mobile, input

我正在为即将举行的活动制作移动拍卖页面。我有两个按钮。1) 提高投标价格的三角形图像 2) 提交投标的圆形图像。

三角形有一个凹形底部，圆形图像位于其中。当按下时，图像会从正常状态变为缩进状态，以表明它们正在被按下。我正在为图像使用`onmousedown`和`onmouseup`事件。

```
<input id="btnraise" class="btnraise" type="image" src="bidraise-up.png" onmousedown="touchStartRaise()" onmouseup="touchEndRaise();" />
<input id="btnbid" class="btnbid" type="image" src="mobilebid-up.png" onmousedown="touchStart()" onmouseup="touchEnd()"/> 
```

为了满足不同移动平台（即windows phone、iPhone、Android）的要求，我为每个图像设置了两个事件监听器。我以这种方式开始是因为据我所知，iPhone 使用触摸事件，这对他们来说效果最好。（我可能弄错了。如果您对此有更好的了解，请告诉我）

```
var btnbid = document.getElementById('btnbid');
btnbid.addEventListener('touchstart', touchStart, false);
btnbid.addEventListener('touchend', touchEnd, false);

var btnraise = document.getElementById('btnraise');
btnraise.addEventListener('touchstart', touchStartRaise, false);
btnraise.addEventListener('touchend', touchEndRaise, false); 
```

这就是背景，所以你明白我有什么。现在，当我在不同平台上测试此页面时，我得到了这个框，就像按下输入图像时按钮突出显示一样。只能在手机上。我不知道这是什么。有人可以帮忙吗？这一切有意义吗？

# java - 我如何检查动态线程是否结束

> ID：15934419
> 
> 赞同：1
> 
> 时间：2013-04-10T19:12:16.023
> 
> 标签：java, android, multithreading

我有一个imageurl数组，通过DownloadFromUrl函数下载，从myfunction调用，我使用线程，我不知道有多少图像url，对于创建的每个图像下载单独线程，我想在所有这些线程之后启动一个活动结尾。

我怎么能得到所有这些线程，线程睡眠时间更长不能工作它不是一个好的过程。我也不能通过静态变量计数来计算线程结束，因为有时图像无法下载或 url 损坏，或者连接没有超时，

我现在有点迷茫，要弄清楚这些所有线程都结束了的程序是什么？

```
public void DownloadFromUrl(String DownloadUrl, String fileName) {

               try {
                       File root = android.os.Environment.getExternalStorageDirectory();               

                       File dir = new File (root.getAbsolutePath() + "/"+Imageurl.facebookpage);
                   if(dir.exists()==false) {
                        dir.mkdirs();
                   }

                   URL url = new URL(DownloadUrl); //you can write here any link
                   File file = new File(dir, fileName);

                   /* Open a connection to that URL. */
                   URLConnection ucon = url.openConnection();

                   /*
                    * Define InputStreams to read from the URLConnection.
                    */
                   InputStream is = ucon.getInputStream();
                   BufferedInputStream bis = new BufferedInputStream(is);

                   /*
                    * Read bytes to the Buffer until there is nothing more to read(-1).
                    */
                   ByteArrayBuffer baf = new ByteArrayBuffer(5000);
                   int current = 0;
                   while ((current = bis.read()) != -1) {
                      baf.append((byte) current);
                   }

                   /* Convert the Bytes read to a String. */
                   FileOutputStream fos = new FileOutputStream(file);
                   fos.write(baf.toByteArray());
                   fos.flush();
                   fos.close();
                   LoginActivity.statsofdownload++;

                   Log.d("DownloadManager","file://"+file.getAbsolutePath());

           } catch (IOException e) {
               Imageurl.pagestat="space";
               Log.d("DownloadManager", "Error: " + e);
           }

        }

myfunction()
{
 for(String string : Imageurl.output) {
                            imagea++;
                        final   int ind =imagea;
                        final String ss=string;
                        new Thread(new Runnable() {
                                public void run() {
                                      DownloadFromUrl(ss,"IMAGE"+ind+".jpeg");
                                      File root = android.os.Environment.getExternalStorageDirectory();         

                                   Imageurl.newyearsvalues.add("file://"+root.getAbsolutePath() + "/"+Imageurl.facebookpage+ "/"+"IMAGE"+ind+".jpeg");

                              }
                                }).start();

                    }

//// now need to call an activity but how I will know that these thread all end
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:18:01.560

***备选方案 1**：`ExecutorService`与`shutdown()`和一起使用`awaitTermination()`：*

```
ExecutorService taskExecutor = Executors.newFixedThreadPool(noOfParallelThreads);
while(...) {
  taskExecutor.execute(new downloadImage());
}
taskExecutor.shutdown();
try {
  taskExecutor.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
} catch (InterruptedException e) {
  ...
} 
```

基本上，`shutdown()`它会停止`ExecutorService`接受任何更多的线程请求。 `awaitTermination()`等待直到`ExecutorService`完成所有线程的执行。

***替代方案 2：**使用`CountDownLatch`：*

```
CountDownLatch latch = new CountDownLatch(totalNumberOfImageDownloadTasks);
ExecutorService taskExecutor = Executors.newFixedThreadPool(noOfParallelThreads);
while(...) {
  taskExecutor.execute(new downloadImage());
}

try {
  latch.await();
} catch (InterruptedException E) {
   // handle
} 
```

在你的 imageDowloader() 函数中添加一行：

```
latch.countDown(); 
```

这将在每次执行时将锁存器的值增加 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:22:39.177

您可能希望使用单个[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的`execute`方法，而不是为每个可运行对象创建一个新线程，这样您就可以在线程完成工作后重用它们。

至于确定您的线程何时完成，请使用静态[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)跟踪成功完成，并使用另一个静态 ConcurrentLinkedQueue 跟踪可能需要重试的不成功完成。然后在您的 run() 方法中，您将包含代码

```
public void run() {
    try {
        ...
        successfulCompletionQueue.offer(this);
    } catch (Exception ex) {
        unsuccessfulCompletionQueue.offer(this);
    }
} 
```

`this`与手头任务相关的任何日志信息在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:23:35.900

要确定完成，使用`asynctask`，`onPostExceute()`方法，您可以确保所有图像都已下载，如果您需要进行下载以在下载时使用图像，您也可以查看进度。

由于`onPostExecute()`方法在ui线程中运行，现在应该没有任何问题。

但请记住`asynctask`，不能多次执行相同的操作。在这种情况下，您有 2 个选择：

1.  下载所有图像`asynctastask`并从其更新活动`onPostExecute()`
2.  `asynctask`为每个下载单独执行。并使用每个`onPostExecute()`来更新活动。

# php - 使用数据库中的数据刷新网页中的 div

> ID：15934425
> 
> 赞同：0
> 
> 时间：2013-04-10T19:12:29.310
> 
> 标签：php, javascript, html

我在一个页面上有一个 div，它从 MySQL 数据库中随机化数据（图片和文本）并显示它。基本上，每次您点击刷新时，它都会显示不同的图片和文字。是否可以放置一个按钮做完全相同的事情，而不必刷新整个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:16:54.027

使用 jQuery`$.ajax()`和`$.html()`.

通过 .将 jQuery`$.ajax()`连接到您的按钮`$.click()`。然后对于返回的数据，将`div`的内容设置为`$.html()`。

贴一些代码，我会提供更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:02:52.503

对于您正在尝试做的事情，这可能有点复杂。但是有了这个，您可以将多个图像作为 JSON 发送回，并让您的成功函数循环通过它们，等等。

jQuery ajax 帖子：

```
$("#yourbutton").click(function(e){ //when your button is clicked
e.preventDefault();
$.ajax({
    type: 'POST', // or POST
    url: 'ajax/testajax.php',
    dataType: 'json',
    data: {'getimage' : '1'}, // just post a 1 because you're getting a random image anyway
    success: function(response) {
        var obj = eval(response);
        var image = obj[i];
        var newPic = $('<img/>',{ //new img with the following attributes
            src: image.src,
            name: image.name,
            width: '100' //and other attributes you want to include
        });
        newPic.appendTo("#container"); //apendd the new image to the container  
    }
});
}); 
```

php：

```
if(!empty($_POST['getimage'])){

    if($_POST['getimage'] == 1){

         // do your query for the random image

        $img = array(
            array("name" => $row['imageName'], "src" => $row['imageSrc'])
        );
        echo json_encode($img);  //send back as JSON

    } else {

        echo 'fail';  // send back a failure

    }
} 
```

# javascript - 使固定的第三列与中间容器齐平

> ID：15934429
> 
> 赞同：0
> 
> 时间：2013-04-10T19:12:47.377
> 
> 标签：javascript, html, css

试图使三列设计适用于超宽或高分辨率屏幕。这是它的样子，特别是第三列与第二列齐平： ![答对了](https://i.stack.imgur.com/rnR90.png)

这是宽屏的样子：![没有布埃诺](https://i.stack.imgur.com/VPMON.png)

对于那些使用较小浏览器（它是一个交互式查询构建器）的人来说，它应该是粘性的，但是对于较大的屏幕，它的`right`属性使它离中心点太远了。`Absolute`定位将解决冲洗问题，但它会破坏粘性目标。

有没有一种优雅的方法可以做到这一点，或者我应该根据浏览器分辨率通过 javascript 更改定位？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:18:26.637

没有人回应，所以我决定做[这个](http://jsfiddle.net/LQden/1/embedded/result/)jsfiddle 例子。通过阅读说明，这就是我认为你所要求的。不完美，但这就是你 10 分钟的工作所得到的，不是吗？

正如大多数“粘性”示例所示，您只需要使用`position: fixed;`，但是当使用浮动时，就像我所做的那样，您必须包装您想要“粘性”的内容并将元素位置设置为`fixed`

# eclipse - 防止 Eclipse（重新）移动导入注释

> ID：15934435
> 
> 赞同：0
> 
> 时间：2013-04-10T19:13:05.567
> 
> 标签：eclipse

我看过一些与此类似的错误报告，但我想知道除了禁用`Ctrl`+ `Shift`+之外是否有明确的答案`O`。

当您组织导入时，所有行注释都会被推到底部。

有没有办法解决这个问题，以便行注释随导入一起移动，或者更改（或重新编码）组织导入的功能？

编辑：或者，另一方面，有没有办法让eclipse在项目刷新时自动组织导入？

解决 XY 问题：我有一些 Java 被预处理到单独的项目中，并且一些代码具有未使用 + 未解析的导入，预处理无法轻松（有效地）检测/删除。将代码添加到项目后*会刷新项目。*

这最终会为未解决的导入产生数千个错误。是的，我可以浏览每个项目并为每个源文件夹组织导入，但如果可能的话，我宁愿让事情自动完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:23:58.203

如果您通过自行开发的 Eclipse 插件进行项目拆分，那么在生成的项目设置中为“清理”操作生成必要的设置可能是一种替代方法（例如，为其中一个配置清理操作你的项目，然后看看`.settings/org.eclipse.jdt.ui.prefs`）。然后，您可以以编程方式调用 Cleanup 操作，类似于执行的`org.eclipse.jdt.internal.ui.actions.AllCleanUpsAction`操作。

好处：如果这样做，您不仅可以组织导入，还可以应用各种其他自动格式化。

# php - 为什么这个 PHP 在执行时让我的网站空白？

> ID：15934436
> 
> 赞同：-2
> 
> 时间：2013-04-10T19:13:07.647
> 
> 标签：php

我正在制作的网站有两个字段，当您按下提交按钮时，将运行以下 PHP。但是，如果两个字段都为空，则页面返回空白，几乎就像它`exit()`在某个点运行一样。

```
else if ($_POST["submit"] == "Update Bookmark") {
$url_to_update = $_POST["url_to_update"];

if (strpos($url_to_update, "http") === false) {
$url_to_update = "http://" . $url_to_update;
}

// Check if this URL is already in Pinboard
$api_url = "https://*username*:*password*@api.pinboard.in/v1/posts/get?url=" . $url_to_update . "&format=json";

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $api_url);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$json = curl_exec($ch);

curl_close($ch);

$values = json_decode($json);

// URL is already in Pinboard
  if (count($values["posts"]) > 0) {
$new_title = str_replace(" ", "%20", $_POST["new_title"]);
$api_url = "https://*username:password*@api.pinboard.in/v1/posts/add?url=" . $url_to_update . "&description=" . $new_title . "&format=json";

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $api_url);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$json = curl_exec($ch);

curl_close($ch);

$values = json_decode($json);

  if ($values->result_code == "done") {
echo "<div class='success-message'><strong>Updated!</strong> Your bookmark has been successfully updated to the new title.</div>";
}
  else {
echo "<div class='error-message'><strong>Dang!</strong> Something messed up.</div>";
  }
}
// URL is not already in Pinboard, so add it for the user
  else {
$new_title = str_replace(" ", "%20", $_POST["new_title"]);
$api_url = "https://*username:password*@api.pinboard.in/v1/posts/add?url=" . $url_to_update . "&description=" . $new_title . "&format=json";

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $api_url);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$json = curl_exec($ch);

curl_close($ch);

$values = json_decode($json);

if ($values->result_code == "done") {
echo "<div class='success-message'><strong>Added instead!</strong> There wasn't a bookmark with this URL already, so we added it.</div>";
  }
else if ($values->result_code == "missing url") {
echo "<div class='error-message'><strong>Invalid URL!</strong> That's not a valid URL!</div>";
  }
else {
echo "<div class='error-message'><strong>Dang!</strong> Something messed up.</div>";
    }
  }
} 
```

有人可以提供一些帮助吗？我一遍又一遍地扫描它，但我找不到导致它的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:18:32.743

您可能关闭了错误报告。试着把它放在你的标题中：

```
<?php
ini_set('display_errors', 'On');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:18:24.560

如果这是放置在中的唯一代码，`php`那么您应该首先开始`if` `else`语句的案例，而`if`不是直接`elseif`尝试使用第一个条件和`if`检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:28:28.550

把它放在你的 PHP 脚本的开头，这样你就可以获得一些正确的调试信息：

```
<?php
  error_reporting(E_ALL);
  ini_set('display_errors', TRUE);
  ini_set('display_startup_errors', TRUE);
  ini_set('memory_limit', '256M');
?> 
```

如果您仍然卡住，请尝试在此处发布错误消息，也许我们可以为您提供更多帮助。

# facebook - facebook 应用程序中的 Html5 画布 toDataUrl 使操作不安全

> ID：15934440
> 
> 赞同：1
> 
> 时间：2013-04-10T19:13:20.163
> 
> 标签：facebook, html, html5-canvas

在我的 facebook 应用程序中，我正在将图像加载到画布上并通过 javascript 对其进行修改，同时在我使用 document.getElementById('mycanvas').toDataURL 时保存图像时显示“操作不安全”。我有一些答案，比如使用“crossOrigin”，但它在我的情况下不起作用，因为我正在修改画布图像。任何帮助将不胜感激。

# windows - windows批处理文件编译和运行scala脚本

> ID：15934451
> 
> 赞同：2
> 
> 时间：2013-04-10T19:13:55.760
> 
> 标签：windows, scala, scripting, batch-file

我想编写一个 Windows 批处理文件，它首先编译一个 scala 脚本然后运行它。

不知何故，当我运行 .bat 文件时，它只会执行第一个命令，而不是第二个。它只会编译脚本而不运行它。

如果我自己执行 .bat 文件的两个命令，它就可以工作。

我究竟做错了什么？

v.scala 的内容：

```
object v extends App {
println("hello")
} 
```

run.bat 的内容：

```
scalac v.scala
scala v 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:56:42.207

是`scalac`批处理文件吗？如果是，请尝试制作它`call scalac`。

如果从另一个调用批处理文件，第一个批处理文件将在执行第二个批处理文件后退出，除非它是用“call”调用的。

这是一个例子：

**Foo1.bat**

```
foo2.bat
echo foo1 
```

**Foo2.bat**

```
echo foo2 
```

看起来如果你运行 Foo1.bat，它会同时吐出“foo1”和“foo2”，但它不会：

```
C:\temp>foo1

C:\temp>foo2.bat

C:\temp>echo foo2
foo2 
```

要更改行为，Foo1.bat 应如下所示：

**foo1.bat**

```
 call foo2.bat
    echo foo1 
```

# php - 在 LOAD DATA INFILE 期间时间戳字段未正确更新

> ID：15934459
> 
> 赞同：0
> 
> 时间：2013-04-10T19:14:24.413
> 
> 标签：php, mysql

我正在使用 LOAD DATA INFILE 使用测试数据填充 MySQL 表并看到我不理解的行为。时间戳列（默认值=CURRENT_TIMESTAMP）正在正确更新一些记录，而另一些则看似随机地更新为 0000-00-00 00:00:00。

```
Questions Table Structure:
Column             Type     Null    Default             Comments
Q_ID               int(10)  No           
Clients_ID         int(10)  No           
Question           varchar(255) No 
```

. . 其他字段省略。

```
Submit_Timestamp   timestamp    No      CURRENT_TIMESTAMP 
```

连接db后，相关代码如下：

```
// prepare the SQL query for the Questions table

$sql = "LOAD DATA INFILE 'c:/wamp/www/Q_Sample_01.CSV' INTO TABLE Questions FIELDS TERMINATED BY ','";

// submit the query and capture the result

$result = mysqli_query($conn, $sql) or die (mysqli_error($conn)); 
```

程序执行并将数据正确地插入到所有字段中，但 Submit_Timestamp 字段除外，该字段有时会得到正确的结果，有时会得到 0000-00-00 00:00:00。

CSV 文件在所有记录中都有一个前导逗号，以指示缺少的 Q_ID 数据。Q_ID 字段，即 Autoincrement，工作正常。CSV 行末尾没有时间戳数据，我希望 MySQL 输入默认值。我试图在 CSV 中列出的最后一个字段之后放置尾随逗号，认为这可能更清楚地表明有数据要添加到 Submit_Timestamp 字段中，但它让事情变得更糟，给了我 0000-00-00 00:00:00对于每条记录。

我还尝试了一个建议来更改制作 Submit_Timestamp ON UPDATE CURRENT_TIMESTAMP 的表，但它没有帮助，也不是我想要的这个字段的行为，所以我删除了它。

我刚刚注意到一个模式，虽然它还没有对我解释。时间戳全为 0 的记录中至少有一个字段用双引号括起来，以防止包含的逗号不恰当地指示新字段。这并不总是在最后一个字段中（与 Submit_Timestamp 字段相邻）。CSV 是在 Microsoft Excel 中创建的。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:38:26.027

Excel 保存到 CSV 对于包含逗号的字符串数据存在问题。

您可以通过将分隔符更改为不在数据中的内容来轻松解决此问题。我用了'|' （在我键盘上的反斜杠上方）。

您还需要更改 SQL 命令以将此更改合并到分隔符中。

`$sql = "LOAD DATA INFILE 'c:/wamp/www/Q_Sample_01.CSV' INTO TABLE Questions FIELDS TERMINATED BY '|'";`

这非常有效。

# facebook-graph-api - 如何通过 Facebook API 获取用户喜欢的页面的个人资料照片？

> ID：15934463
> 
> 赞同：0
> 
> 时间：2013-04-10T19:14:41.883
> 
> 标签：facebook-graph-api

我可以轻松获得用户喜欢，然后使用页面信息

```
array(
        'method' => 'GET',
        'relative_url'  => '/'.$user.'/likes','name' => 'user-likes'
     ),
array(
        'method' => 'GET',
        'relative_url'  => '?ids={result=user-likes:$.data.*.id}'
     ), 
```

但我没有在返回的数组中获得 Page 的个人资料图片的链接。我正在使用以下权限：

```
friends_birthday, friends_education_history, read_stream, read_friendlists,
user_birthday, user_education_history, user_likes, user_work_history 
```

并且在 Page API 中给出了获取页面图片不需要特殊权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:36:31.367

您获得的点赞仅包含部分数据。结果背后是页面。在每个“喜欢”记录上，您都有一个 id 字段，指示页面 id。然后你需要使用这个 id 来获取图片。例如，对于封面图片，您可以：

```
<facebook-api-url>/<page-id>?fields=cover 
```

这将返回如下内容：

```
{
"cover": {
"cover_id": 532177873290169, 
"source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-frc1/s720x720/390184_532120873490169_756865062_n.jpg", 
"offset_y": 57, 
"offset_x": 0
}, 
"id": "531671606872729"
} 
```

'source' 字段当然是图片本身所需的 url

# html - 从一张 HTML 图像中删除 CSS 规则

> ID：15934466
> 
> 赞同：2
> 
> 时间：2013-04-10T19:14:46.877
> 
> 标签：html, css, wordpress

我在 Wordpress 中工作，我在帖子中有一张图片，我想从中删除 CSS 格式。

我的 CSS 中有一条规则为图像提供背景，我不确定仅从这张图像中删除 CSS 规则所需的 HTML。

任何帮助，将不胜感激。

**编辑**：对。代码会很有帮助：这是放置在网站上的所有图像的 CSS 规则。

```
/* 3.2 Images */

.entry img, img.thumbnail { 
padding: 4px; 
background: #f6f6f6; 
border:2px solid #fff; 
display: block; 
-moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); 
transition: all 0.25s ease-in-out; 
-webkit-transition: all 0.25s ease-in-out; 
-moz-transition: all 0.25s ease-in-out; 
}

.entry img:hover, img.thumbnail:hover { 
box-shadow: 0 0 5px rgba( 10, 10, 10, 0.5 ); 
-webkit-box-shadow: 0 0 5px rgba( 10, 10, 10, 0.5 ); 
-moz-box-shadow: 0 0 5px rgba( 10, 10, 10, 0.5 );  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:36:00.193

创建一个覆盖这些规则的 id

```
#justthisonce img{

//css rules for the "one off" image

} 
```

html看起来像

```
<div id="justthisonce"><img ..... /></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:28:36.853

如果**只是一篇文章**中的**一张图片**1- 从文章编辑的右上角单击2- 找到该图片的标签。 3-在之后添加 **`HTML`
`img`
`<img`**

 **```
style="background-color:none;" 
```

所以它变成了类似的东西

```
<img style="background-color:none;" src="SourceOfImage" ...> 
```

并更新您的帖子。

如果您想对更多图像执行此操作，我建议在您的 style.css 的 wordpress 中创建一个类，并将该类应用于这些图像。**

# rest - Symfony2 中的部分升级（PATCH）

> ID：15934468
> 
> 赞同：0
> 
> 时间：2013-04-10T19:14:57.760
> 
> 标签：rest, symfony, http-headers

我正在尝试使用 Symfony2 后端实现 API。为了支持 PATCH 和实体的部分更新，我试图解决 Symfony2 将在表单中不包含属性时将属性设为 NULL 的事实。

我在[https://gist.github.com/makasim/3720535](https://gist.github.com/makasim/3720535)找到了这个解决方法，但我不确定在哪里实现它或在我的控制器中调用它。

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T16:06:21.123

我认为最新版本的 Symfony2 不需要上述解决方法，因为对 PATCH 请求的部分绑定的本机支持已合并[https://github.com/symfony/symfony/pull/7849](https://github.com/symfony/symfony/pull/7849)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:22:47.330

查看表单组件的食谱条目：“[如何使用表单事件动态修改表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html)”：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // Do your stuff
    $builder->addEventSubscriber(new PatchSubscriber ());
} 
```

# ruby-on-rails - Heroku gem api缩放工作者响应422 Unprocessable Entity

> ID：15934475
> 
> 赞同：-1
> 
> 时间：2013-04-10T19:15:18.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, resque

我正在使用[宝石“heroku-resque-auto-scale”](https://github.com/mirthlab/heroku-resque-auto-scale)来扩展工人。

在resque中，我可以看到所有工作都失败了：

```
RestClient::UnprocessableEntity
Error
422 Unprocessable Entity 
```

这是完整的错误日志： http: [//pastie.org/private/tpgptsgbcvroyjy5n35lgw](http://pastie.org/private/tpgptsgbcvroyjy5n35lgw)

这个错误是什么意思？

我创建了一个 Procfile：

```
resque: env TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10 bundle exec rake resque:work 
```

Heroku rails 应用程序位于 cedar 堆栈上。我希望没有任何工作将 Heroku 工人设置为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:36:58.670

Heroku gem 已被弃用，切换到 heroku-api gem 并且工作正常。

# android - 未调用 OnTouchListener

> ID：15934476
> 
> 赞同：0
> 
> 时间：2013-04-10T19:15:23.293
> 
> 标签：android, ontouchlistener

我正在尝试通过触摸启动语音识别，但问题是用户触摸屏幕时未调用 OnTouchListener

我试图在函数中放置断点，但它根本没有出现在函数中

在我的笔记本电脑上，Logcat 无法正常工作，因此我无法使用日志，因此无法使用 toast 来查看是否调用了该函数。

代码如下。任何人都可以请帮助为什么不调用此功能？

更新：

我在 OnCreate 中调用 setOnTouchListener，现在使用视图后，我的应用程序在启动时崩溃。

```
View view = findViewById(R.layout.voice_recog);
    view.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Toast toast = Toast.makeText(getApplicationContext(),"Touch recognised",Toast.LENGTH_LONG);
            toast.show();
            startVoiceRecognitionActivity();

            return false;
        }
    }); 
```

我发现问题在于分配视图...由于找不到源错误，应用程序崩溃...在线

```
 View view = findViewById(R.layout.voice_recog);
    //crashes on below line ....with Source not found error
    view.setOnTouchListener(new View.OnTouchListener() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:18:25.250

我猜您没有将侦听器分配给任何视图，因为您只是在这里创建了侦听器。用于`findViewById()`获取要在其上运行此代码的任何视图的实例，然后调用：

```
yourView.setOnTouchListener(TouchListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:19:49.190

在你的 onCreate 中试试这个：

```
getView().setOnTouchListener(myTouchListener); 
```

# python - Speeding Up CSV Update/Import Into Django Model

> ID：15934482
> 
> 赞同：1
> 
> 时间：2013-04-10T19:16:36.670
> 
> 标签：python, mysql, django, csv, django-models

I have a large CSV file that I am importing into Django. At the moment, if my math is correct, it will be done in 32 hours! Is it possible to speed this up?

I have a CSV file with ~157,000 rows and 15 columns. I am reading this into my Django model and saving it off to a MySQL database. Here is where the magic happens:

```
reader = csv.reader(csvFile, delimiter=',', quotechar='"')
for row in reader:
    tmpRecord = Employee(
        emp_id = row[0], # Primary Key
        name = row[1],
        # snipped for brevity; other columns assigned
        group_abbr = row[14]
    )

    pieces = string.split(tmpRecord.name.title(), " ")
    newName = pieces[1]
    try:
        newName += " " + pieces[2]
    except IndexError:
        pass
    newName += " " + pieces[0]
    tmpRecord.name = newName

    tmpRecord.save() 
```

The "pieces" chunk is taking the name field from "LASTNAME FIRSTNAME MIDDLE" and turning it into "Firstname Middle Lastname".

This will be run about once a month to update the database with new employees and any changes to existing employee records. Much of the time, an existing record isn't going to change, but any one (or more) of fields might change. Is there a check I could add that take less time then just calling `save()` on each record?

At the moment, this is taking about 15 seconds per 20 records to complete! Is there a way I can speed this up (substantially)?

**UPDATE:**

If it matters, the `emp_id` is the table's primary key. No employee ever has the same id as a previous employee (retired employees included).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:41:26.750

I think bulk_create will help you [https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)

If you have problems with data that already persist in database. Insert into other table, then using SQL queries fix your issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:46:00.737

Perhaps you could use your python script to prepare an intermediate load CSV, then try doing a load operation instead?

[http://dev.mysql.com/doc/refman/5.6/en/load-data.html](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)

# java - 在调用 println() 之前线程 main 停止了吗？

> ID：15934485
> 
> 赞同：1
> 
> 时间：2013-04-10T19:16:41.317
> 
> 标签：java

现在的问题是，如果你在输出时运行我的程序，我应该有一个字符串输出用户输入的每月投资、利率和年份，它应该在一行和下一行打印它，之后应该是相同的，但是如果用户输入了不同的值，他想为每月投资、利率和年份输入另一个不同的值。我的可能是它把所有东西都打印成一个像 ex:$400 2.0% 3 $500 3.0% 2 <--- 这从 $500 开始应该在下一行而不是第一个条目的第一个？

```
System.out.print("Inv/Mo.\tRate\tYears\tFuture Value\n");
     for (int j = 0; j < FutureValueArrayList.size(); j++)
     {
        String myArrayList = FutureValueArrayList.get(j);
        System.out.print(ArrayList + "\t");
        System.out.println();

     } 
```

我也得到这个错误我似乎无法找到解决它的方法“线程主在调用 println() 之前停止”这是 print(ArrayList + "\t") 之后的 println；在我的 for 循环中。

```
import java.util.*;
import java.text.*;

public class FutureValueApp
{
public static void main(String[] args)
{
    // display a welcome message
    System.out.println("Welcome to the Future Value Calculator");
    System.out.println();

    ArrayList<String> FutureValueArrayList = new ArrayList<String>();

    // perform 1 or more calculations
    Scanner sc = new Scanner(System.in);
    String choice = "y";
    while (choice.equalsIgnoreCase("y"))
    {

        // get the input from the user
        System.out.println("DATA ENTRY");
        double monthlyInvestment = getDoubleWithinRange(sc,
            "Enter monthly investment: ", 0, 1000);
        double interestRate = getDoubleWithinRange(sc,
            "Enter yearly interest rate: ", 0, 30);
        int years = getIntWithinRange(sc,
            "Enter number of years: ", 0, 100);

        // calculate the future value
        double monthlyInterestRate = interestRate/12/100;
        int months = years * 12;
        double futureValue = calculateFutureValue(
            monthlyInvestment, monthlyInterestRate, months);

        // get the currency and percent formatters
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        NumberFormat percent = NumberFormat.getPercentInstance();
        percent.setMinimumFractionDigits(1);

        // format the result as a single string
        String results =
              "Monthly investment:\t"
                  + currency.format(monthlyInvestment) + "\n"
            + "Yearly interest rate:\t"
                  + percent.format(interestRate/100) + "\n"
            + "Number of years:\t"
                  +  years + "\n"
            + "Future value:\t\t"
                  + currency.format(futureValue) + "\n";

        // print the results
        System.out.println();
        System.out.println("FORMATTED RESULTS");
        System.out.println(results);

      String monthlyInvestmentFormat = currency.format(monthlyInvestment);
      String interestRateFormat = percent.format(interestRate/100);
      String futureValueFormat = currency.format(futureValue);

      FutureValueArrayList.add(monthlyInvestmentFormat);
      FutureValueArrayList.add(interestRateFormat);
      FutureValueArrayList.add(Integer.toString(years));
      FutureValueArrayList.add(futureValueFormat);

        // see if the user wants to continue
        System.out.print("Continue? (y/n): ");
        choice = sc.next();

        System.out.println();
    }

     System.out.print("Inv/Mo.\tRate\tYears\tFuture Value\n");
     for (int j = 0; j < FutureValueArrayList.size(); j++)
     {
        String ArrayList = FutureValueArrayList.get(j);
        System.out.print(ArrayList + "\t");
        System.out.println();

     }
    System.out.println();
}   

public static double getDouble(Scanner sc, String prompt)
{
    boolean isValid = false;
    double d = 0;
    while (isValid == false)
    {
        System.out.print(prompt);
        if (sc.hasNextDouble())
        {
            d = sc.nextDouble();
            isValid = true;
        }
        else
        {
            System.out.println("Error! Invalid decimal value. Try again.");
        }
        sc.nextLine();  // discard any other data entered on the line
    }
    return d;
}

public static double getDoubleWithinRange(Scanner sc, String prompt,
double min, double max)
{
    double d = 0;
    boolean isValid = false;
    while (isValid == false)
    {
        d = getDouble(sc, prompt);
        if (d <= min)
            System.out.println(
                "Error! Number must be greater than " + min + ".");
        else if (d >= max)
            System.out.println(
                "Error! Number must be less than " + max + ".");
        else
            isValid = true;
    }
    return d;
}

public static int getInt(Scanner sc, String prompt)
{
    boolean isValidInt = false;
    int i = 0;
    while (isValidInt == false)
    {
        System.out.print(prompt);
        if (sc.hasNextInt())
        {
            i = sc.nextInt();
            isValidInt = true;
        }
        else
        {
            System.out.println("Error! Invalid integer value. Try again.");
        }
        sc.nextLine();  // discard any other data entered on the line
    }
    return i;
}

public static int getIntWithinRange(Scanner sc, String prompt,
int min, int max)
{
    int i = 0;
    boolean isValid = false;
    while (isValid == false)
    {
        i = getInt(sc, prompt);
        if (i <= min)
            System.out.println(
                "Error! Number must be greater than " + min + ".");
        else if (i >= max)
            System.out.println(
                "Error! Number must be less than " + max + ".");
        else
            isValid = true;
    }
    return i;
}

public static double calculateFutureValue(double monthlyInvestment,
double monthlyInterestRate, int months)
{
    double futureValue = 0;
    for (int i = 1; i <= months; i++)
    {
        futureValue =
            (futureValue + monthlyInvestment) *
            (1 + monthlyInterestRate);
    }
    return futureValue;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:35:06.277

你需要这样编码

```
 System.out.print("Inv/Mo.\tRate\tYears\tFuture Value\n");
 for (int j = 0; j < FutureValueArrayList.size(); j++)
 {
    String ArrayList = FutureValueArrayList.get(j);
    System.out.print(ArrayList + "\t");
    if((j+1)%4 == 0){
        System.out.println();
    }

 }
System.out.println(); 
```

注意 (j+1)%4 技巧的使用。

注意：这只是一个格式化技巧。执行此操作的正确方法是创建一个具有 4 个参数（速率、总和、时间、futureValue）的 FutureValue 对象，并覆盖 toString() 方法以便以所需格式正确打印对象。我鼓励你试试这个。

方法二：

```
/*FutureValueArrayList.add(monthlyInvestmentFormat);
            FutureValueArrayList.add(interestRateFormat);
            FutureValueArrayList.add(Integer.toString(years));
            FutureValueArrayList.add(futureValueFormat);*/

            FutureValueArrayList.add(monthlyInvestmentFormat+"\t"+interestRateFormat+"\t"+Integer.toString(years)+"\t"+futureValueFormat); 
```

现在无需以任何方式更改您的打印代码。

# java - onProgressUpdate 不起作用

> ID：15934487
> 
> 赞同：0
> 
> 时间：2013-04-10T19:16:56.617
> 
> 标签：java, android, android-asynctask, apache-commons-httpclient

```
private class DownloadTextTask extends AsyncTask<String,Long,Long> {

        CharSequence contentText;
        Context context;
        CharSequence contentTitle;
        PendingIntent contentIntent;
        int ID = 1;
        long time;
        int icon;
        CharSequence tickerText;

        @Override
        protected Long doInBackground(String... urls) {
            InputStream inputStream = null;
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpResponse httpResponse = httpclient.execute(new HttpGet(urls[0]));
                inputStream = httpResponse.getEntity().getContent();
                byte[] buffer = IOUtils.toByteArray(inputStream);
                FileOutputStream fos = new FileOutputStream(MEDIA_PATH + "/fileName.mp3");
                fos.write(buffer);
                fos.flush();
                fos.close();    
            } catch (Exception e) {
            }
            return (long) 100;
        }

        @Override
        protected void onPostExecute(Long result) {
            contentText = result + "% complete";
            contentTitle="Downloading Finished!";
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
            notificationManager.notify(ID, notification);
        }

        @Override
         protected void onPreExecute() {
                super.onPreExecute();
                downloadNotification();
         }

         @Override
         public void onProgressUpdate(Long... progress) {
                super.onProgressUpdate(progress);
                contentText = progress[0] + "% complete";
                notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
                notificationManager.notify(ID, notification);
         }

           public void downloadNotification(){
                String ns = Context.NOTIFICATION_SERVICE;
                notificationManager = (NotificationManager) getSystemService(ns);

                icon = R.drawable.downicon;
                //the text that appears first on the status bar
                tickerText = "Downloading...";
                time = System.currentTimeMillis();

                notification = new Notification(icon, tickerText, time);

                context = getApplicationContext();
                //the bold font
                contentTitle = "Your download is in progress";
                //the text that needs to change
                contentText = "0% complete";
                Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
               // notificationIntent.setType("audio/*");
                contentIntent = PendingIntent.getActivity(context, 0, notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT);

                notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
                notificationManager.notify(ID, notification);

            }
    } 
```

我写了这段代码来下载一个 mp3 文件，这里的问题是，它没有更新下载文件的进度！我正在使用 IOUtils 类将 InputStream 转换为 byte[]。在那种情况下，我不知道如何发布进度！请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:20:39.070

您需要在 doInBackground() 中调用 publishProgress(param)

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

1.  **doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用**。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。**此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。**

2.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。**此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度**。例如，它可用于动画进度条或在文本字段中显示日志。

一个例子@http [://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)

```
 OutputStream output = new FileOutputStream("/sdcard/file_name.extension")
        long total = 0;
        int count;
        while ((count = inputStream.read(buffer) != -1) {
            total += count;
            // publishing the progress....
            publishProgress((int) (total * 100 / fileLength));
            output.write(buffer, 0, count);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:31:17.407

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)的所有函数都有访问说明符`protected`。

所以应该是：

```
@Override
     protected void onProgressUpdate(Long... progress) {
            super.onProgressUpdate(progress);
            contentText = progress[0] + "% complete";
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
            notificationManager.notify(ID, notification);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:36:53.660

我认为没有办法`IOUtils.toByteArray(..)`提供进度更新。如果文件很大，您可能不想将整个内容读入内存。您可以使用[CountingInputStream](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/CountingInputStream.html)来跟踪读取的总字节数。

```
public long countContent(URL urls) {
  try {
     //...
     CountingInputStream counter = new CountingInputStream(httpResponse.getEntity().getContent());
     FileOutputStream os = new FileOutputStream(MEDIA_PATH + "/fileName.mp3");

     int read;
     byte[] buffer = new byte[1028];
     while ((read = counter.read(buffer)) != -1) {
        os.write(buffer, 0, read);
        publishProgress(counter.getByteCount()/size);
     }
     // ...
     return counter.getByteCount()/size;
  } catch (IOException ex) {
     throw new RuntimeException(ex);
  }
} 
```

# c# - 将绑定属性类型从 string 更改为 int

> ID：15934488
> 
> 赞同：0
> 
> 时间：2013-04-10T19:15:57.627
> 
> 标签：c#, wpf, binding, datagrid, converter

我正在尝试将几列的绑定属性从 string 更改为 int，因为它们是从文件中读取的，并且我想在数据最终显示在屏幕上时使用数字排序。

我创建了这个转换器并在 XAML 文件中进行了相应的更改以在`DataTemplate`标签中实现转换器，但我仍然在输出中得到字符串排序，而不是数字排序。

我四处寻找类似转换器的其他版本，但没有找到任何相关的东西。我不确定我的转换器有什么问题。

这是我的转换器：

```
public class IntToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is string)
        {
            string s = (string)value;
            int num;
            if (int.TryParse(s, out num))
                return num;
        }
        return 0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int number = (int)value;
        return number.ToString();
    }
} 
```

这些是在`XAML`. 本地`namespace`定义在`Windows.Resources`.

```
<me:IntToStringConverter x:Key="IntToStringConverter" /> 
```

排序部分如下所示：

```
<toolkit:DataGridTemplateColumn Width="55" Header="Min Run" SortMemberPath="MinRun">
    <toolkit:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{ Binding Path=MinRun, Converter={StaticResource IntToStringConverter}}" HorizontalAlignment="Center" />
        </DataTemplate>
    </toolkit:DataGridTemplateColumn.CellTemplate>
</toolkit:DataGridTemplateColumn> 
```

`DataGrid`绑定在这里：

```
<toolkit:DataGrid x:Name="myGrid" Grid.Row="1" Background="{x:Null}" Foreground="White" ItemsSource="{Binding ObsRacResults}" VirtualizingStackPanel.IsVirtualizing="True" BorderThickness="0" Margin="4" VerticalGridLinesBrush="#FF555555" AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" CanUserResizeColumns="False" CanUserReorderColumns="False" HorizontalGridLinesBrush="#FF555555" SnapsToDevicePixels="True" CanUserResizeRows="False"> 
```

然后我有我的专栏、风格等。

# java-ee-6 - WSO2 AS 5.1.0 中的 JavaEE 6 支持

> ID：15934489
> 
> 赞同：2
> 
> 时间：2013-04-10T19:17:05.077
> 
> 标签：java-ee-6, wso2

WSO2 AS 5.1.0 JavaEE 6 是否兼容？我可以在应用程序中使用上下文、依赖注入、JPA2 和 JSF2 等技术部署在应用服务器上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:21:05.940

WSO2 AS 5.1.0 不是符合 JavaEE 的服务器，但我们正在积极考虑在未来版本中成为符合 JavaEE Web Profile 的服务器。事实上，我们的方法不是一次支持完成 JavaEE WP 规范，而是一次考虑一个或几个规范，并支持围绕特定技术的完整用户故事，而不仅仅是支持规范。通常我们确保可以在 WSO2 AS 中使用特定的技术，以便使用该技术构建的应用程序可以将 WSO2 平台级别的优势利用到应用程序中。此外，其他 WSO2 开发人员工具（例如 Developer Studio）也进行了改进，以支持围绕用例的新技术。作为示例而不是支持 JNDI，只考虑另一个 Java EE 规范 AS 5.1。

回答您的具体问题我不确定 CDI 的时间表，但 JPA 2.0 和 JSF 2.0 支持最有可能出现在下一个 WSO2 AS 主要版本上。如上所述，如果您可以将所有 Java EE 依赖项打包到您的应用程序中，您可以将它们部署在 WSO2 AS 5.1.0 上而不会出现任何问题，就像在 Tomcat 上部署它们一样。

仅供参考 WSO2 AS 5.1.0 支持以下规范。

小服务程序 3.0

JSP 2.2

EL 2.2

JSTL 1.2

JNDI

JAX-RS 2.0

JAX-WS 2.2

JAXB 2.2

管理系统

SAAJ

邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:00:56.590

请参阅本文档 [1] 以获取有关支持的功能的信息...

[1] [http://docs.wso2.org/wiki/display/AS510/Features](http://docs.wso2.org/wiki/display/AS510/Features)

问候，

莫汉

# cqrs - 使用 CQRS 的读取端实现方法

> ID：15934490
> 
> 赞同：20
> 
> 时间：2013-04-10T19:17:05.263
> 
> 标签：cqrs, event-sourcing

我已经转移到积极使用 CQRS + 事件源的项目。乍一看，它是按照所有那些书籍和博客来实现的，但最后我意识到在实现中到底有什么令人讨厌的地方。

这是CQRS架构：![CQRS 设计](https://i.stack.imgur.com/ID9GW.jpg)

最初我从[这里](http://cre8ivethought.com/blog/2009/11/12/cqrs--la-greg-young)拍了这张照片。

正如我们在图片中看到的，读取端从队列中接收事件并将其一一传递到不同的投影集（反规范化器）中，然后通过 AddOrUpdate 方法将生成的 ViewModel 保存到例如 DB 中。因此，据我所知，图片反规范化器只能依赖事件本身加上来自读取端数据库的数据。例如：

1.  帐户视图已存储在数据库中。
2.  EmailChanged 事件到达
3.  我们从数据库中读取帐户视图
4.  对其应用电子邮件更改
5.  我们将帐户保存回数据库。

另一个案例（计算一些项目的数量，比如订单）：

1.  OrderCreated 事件到达
2.  我们读取了代表 NumberOf 先前到达的订单的 ViewModel
3.  增加并保存它。

我们在项目中拥有的内容：我们仅将所有这些事件用作域模型中发生更改的通知器。因此，我们做什么：

1.  我们获取域存储库并读取所有必要的聚合。这样做我们可以获得它们的最新状态。
2.  我们只是从头开始构建 ViewModel 对象
3.  将新创建的对象保存到 Db

我们在项目中使用的方法对我来说有点奇怪，但我看不出它的所有缺点。如果我们需要重建我们的读取端，我们添加“活动”反规范化器，下次它接收到特定事件时，它会重新创建新的视图模型。

如果我们使用书中的方法，我将不得不在我的系统之外的某个地方有一个单独的实用程序逻辑来进行重建。为此我们需要：

1.  放下读取端
2.  从头开始读取事件存储中的所有事件
3.  让它们穿过投影

**所以我的问题是：**
这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:48:37.270

> 我们在项目中使用的方法对我来说有点奇怪，但我看不出它的所有缺点。

一个突出的缺点是，在收到事件后，您必须对相应聚合的存储库进行额外调用。这意味着必须直接或作为服务公开此存储库。除了增加的依赖关系之外，还有额外的 IO。

对于从事件存储进行重建，您描述的方法是普遍接受的方法。[此处](https://abdullin.com/post/event-sourcing-projections/)描述的一种方法使用专用于重建投影的事件日志。这可用于解决重建时的性能问题。还可以[查看 Cloud 中的 Scalable and Simple CQRS Views](http://abdullin.com/journal/2011/1/19/scalable-and-simple-cqrs-views-in-the-cloud.html)和[DDD/CQRS mailing list](https://groups.google.com/forum/#!topic/dddcqrs/Tn080Iu0zqI)。

# windows - Win32 API - CurrentWindow 到 Message-Only-Window 并返回到原始窗口

> ID：15934491
> 
> 赞同：2
> 
> 时间：2013-04-10T19:17:14.350
> 
> 标签：windows, winapi

我使用 SetParent 将窗口更改为仅消息窗口，但是当我尝试使用 SetParent 恢复窗口时，我要么无法恢复窗口，要么出现大量延迟？示例源代码。

```
// Change to message-only

HWND newParent = SetParent(currentHandle, HWND_MESSAGE);

// Change back

SetParent(newParent, currentHandle); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:46:34.000

你已经把参数颠倒了。要恢复原始父级，您需要：

```
SetParent(currentHandle, newParent); 
```

请记住，在这两种情况下，您都在更改窗口的父级。所以第一个参数`SetParent`必须两次都相同。

部分问题是您的变量命名不当。我会这样命名它们：

```
// convert to message only
HWND previousParent = SetParent(window, HWND_MESSAGE);

// restore parent
SetParent(window, previousParent); 
```

# php - 如何存储中间有变量的语言字符串，Php

> ID：15934494
> 
> 赞同：0
> 
> 时间：2013-04-10T19:16:28.553
> 
> 标签：php, string

我的字符串散布在几个类中，使更改变得困难。我想做的是有一个配置函数，它将所有字符串放入变量中并在程序中使用，所以我只需要编辑一个函数。(PHP)

我的问题是我怎么能有一个字符串（或其他数据类型）允许我稍后连接。例如：

```
$vars = array('one', 'two', 'red', 'blue');
foreach($vars as $var) {
     echo "List all rows with <strong>$var</strong> in the column.<br/>";
} 
```

> 列出列中包含**一个**的所有行。
> 列出列中包含**两个**的所有行。
> 列出列中所有带有**红色**的行。
> 列出列中所有带有**蓝色**的行。

我想坚持“列出列中包含**$var**的所有行”。在一个地方，然后在另一个时间在另一个函数中添加 $var。我知道我可以只保留两个变量或将其放入一个数组中，但我觉得肯定有一些我缺少的数据结构可以使这项工作更容易。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:38:17.157

```
<?php    
$str = "blah blah blah {var}";
....
$output = str_replace("{var}",$someVar,$str); 
```

很好的解决方案，@Andrej。但是调整一下：

```
<?php
$search = array("{name}"); 
$replace = array($name); 
$var = str_replace($search, $replace, "My name is {name}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:20:26.933

```
$str = "blah blah blah {var}";
....
$output = str_replace("{var}",$someVar,$str); 
```

阅读有关模板的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:21:49.577

继续阅读[`printf()`](http://ca2.php.net/manual/en/function.printf.php)，您不必担心变量命名。

```
$string = "List all rows with <strong>%s</strong> in the column.<br/>";
$var = "herp";

printf($string, $var);

function something() {
  $something_else = 'derp';
  printf($string, $something_else);
}

something(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T19:28:09.730

看看[PHP array_map](http://www.php.net/manual/en/function.array-map.php)函数

# facebook-apps - “用户时间轴上的应用程序选项卡”？

> ID：15934499
> 
> 赞同：0
> 
> 时间：2013-04-10T19:17:40.917
> 
> 标签：facebook-apps, timeline

[这篇博文](http://developers.facebook.com/blog/post/625/)说：

> **时间线应用程序选项卡中的故事**
> 
> 使用 Feed 对话框或 Graph API 从应用程序发布的故事现在将显示在用户时间轴上的应用程序选项卡中。这与从应用程序选项卡中显示的应用程序发布的 Open Graph 操作一致。

文本“*用户时间轴上的应用程序选项卡*”引起了我的注意。用户时间轴中是否有应用程序选项卡之类的东西？我什至根本不知道用户的时间线中有标签。我搜索了文档，但只找到了关于页面的标签应用程序，而不是用户的时间线。我是否遗漏了什么，或者博客文章只是使用了不正确的术语？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:44:06.623

这不是一回事。在这种情况下，博客文章指的是用户时间轴的视图，该视图被过滤为仅显示来自特定应用程序的帖子。这是在 facebook.com 上通过从时间轴上的“更多”选择器中选择一个应用程序来选择的，在时间轴、关于、朋友和照片旁边

此外，该博客文章已有 15 个月的历史，您应该尽量不要依赖这些博客文章，除非它们是最新的，在构建您的应用程序时应使用主要文档

# javascript - 如何从具有隔离范围的指令中公开行为？

> ID：15934500
> 
> 赞同：34
> 
> 时间：2013-04-10T19:17:42.057
> 
> 标签：javascript, angularjs, angularjs-directive

如何从指令中公开方法？我知道我应该对数据使用属性，但我真的想公开*行为*，而不是*数据*。父控制器可以调用的东西。

假设我的 DOM 看起来像：

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="call()" >Call</button>
        <div id="container" my-directive> </div>
    </div>
</div> 
```

JavaScript：

```
angular.module("main", []).controller("MyCtrl", function($scope) {
    $scope.call = function() {
        $scope.myfn();
    };
}).directive("myDirective", function() {
    return {
        // scope: {},
        controller: function($scope) {
            $scope.myfn = function() {
                console.log("myfn called");
            }
        }
    };
}); 
```

jsFiddle：http: [//jsfiddle.net/5gDjQ/7/](http://jsfiddle.net/5gDjQ/7/)

如果`scope`注释掉了（即指令没有孤立的范围），它就可以正常工作。当我按下按钮时，`myfn`会调用并记录到控制台。

一旦我取消注释`scope`，它就不起作用。`myfn`是在子范围内定义的，父级不容易使用。

就我而言，我认为污染父范围是一个坏主意，我真的很想避免它。

那么，如何将指令中的函数公开给父控制器？或者：如何从父控制器调用指令上的方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-10T20:07:43.147

您可以通过在双向绑定到控制器的作用域中设置一个变量（使用“=”）来使用隔离作用域来执行此操作。然后，在您的指令中，您可以将函数分配给该变量，并且 angular 将使用绑定在您的控制器中查找相应的变量。该变量将指向您的控制器可以调用的函数。

[http://jsfiddle.net/GWCCr/](http://jsfiddle.net/GWCCr/)

html：注意新的属性：

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="call()" >Call</button>
        <div id="container" my-directive my-fn="fnInCtrl"> </div>
    </div>
</div> 
```

js：

```
angular.module("main", []).controller("MyCtrl", function($scope) {
    $scope.call = function() {
        $scope.fnInCtrl();
    };
}).directive("myDirective", function() {
    return {
        scope: {
            myFn: '='
        },
        controller: function($scope) {
            $scope.myFn = function() {
                console.log("myfn called");
            }
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-19T07:59:31.827

与其试图弄清楚如何调用隐藏在指令中的函数，我认为您应该问自己：*为什么我要调用指令中定义的函数？*

我能想到的一个原因是：*触发指令的某些行为，这些行为也可以由应用程序的用户从指令中触发*。

如果是这样，那么显而易见且 Angulary 要做的事情是在包含应该对其做出反应的指令的范围内**广播一个事件。**然后该指令将监听该事件并自行触发其功能。

这有额外的好处：

*   如果您愿意，可以在事件数据对象中发送参数
*   您可以在多个指令中触发反应（例如，如果它们形成一个集合）
*   您可以与范围层次结构深处的指令进行通信（例如，如果该指令在另一个指令中，而该指令在其他指令中，等等），而无需通过每个嵌套指令传递函数回调
*   它不会破坏指令的隔离

## 例子

让我们尝试提出一个非常简单的示例：假设我们有一个小部件，它显示从某个地方下载的随机励志名言。它还有一个按钮可以将报价更改为不同的报价。

这是指令的模板：

```
<p>{{ quote }}</p>
<button ng-click="refreshQuote()"></button> 
```

这是指令的代码：

```
app.directive("randomQuote", function () {
  return {
    restrict: "E",
    scope: {},
    link: function (scope) {
      scope.refreshQuote = function () {
        scope.quote = ... // some complicated code here
      };
      scope.refreshQuote();
    }
  };
}); 
```

请注意，该指令是完全自包含的：它具有隔离范围并自行获取引用。

假设我们还希望能够从控制器刷新报价。这可以像在控制器代码中调用它一样简单：

```
$scope.$broadcast("refresh-random-quote"); 
```

要添加事件处理程序，我们必须将此代码添加到`link`指令的函数中：

```
scope.$on("refresh-random-quote", function () {
  scope.refreshQuote();
}); 
```

这样，我们创建了一个从控制器到指令的单向通信通道，它不会破坏指令的隔离，并且如果指令嵌套在广播事件的代码的范围层次结构的深处也可以工作.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-10T20:08:44.983

> 如何将指令中的函数公开给父控制器？
> 或者：如何从父控制器调用指令上的方法？

好吧，我认为您不应该尝试这样做（即，将控制器行为耦合到指令），但如果您必须...这是您可以做到的一种方法：将控制器函数传递给您的指令，指令可以调用以通知控制器指令功能：

```
<div id="container" my-directive cb="setDirectiveFn(fn)"></div>

directive("myDirective", function() {
    return {
       scope: { cb: '&' },
        controller: function($scope) {
            $scope.myfn = function() {
                console.log("myfn called");
            }
            $scope.cb({fn: $scope.myfn});
        }
    };
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/uSvg6/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-11T22:15:34.790

AngularJS V1.7.1 ^([*](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#171-momentum-defiance-2018-06-08))的发布引入了新的[ng-ref 指令](https://docs.angularjs.org/api/ng/directive/ngRef#overview)。

[ng-ref](https://docs.angularjs.org/api/ng/directive/ngRef#overview)属性告诉 AngularJS在当前范围内发布组件的控制器。这对于让诸如音频播放器之类的组件将其 API 暴露给同级组件很有用。它的播放和停止控件可以轻松访问。

有关详细信息，请参阅

*   [AngularJS`ng-ref`指令 API 参考](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#171-momentum-defiance-2018-06-08)
*   [新 AngularJS ng-ref 指令的缺陷](https://stackoverflow.com/questions/51715591/pitfalls-of-the-new-angularjs-ng-ref-directive)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-20T21:48:01.530

为了做出贡献，@georgeawg 给了我一个很酷的解决方案，使用 Service 来完成这项工作。这样您就可以在同一页面上处理多个指令。

```
<html ng-app="myApp">
<head>
  <script src="https://opensource.keycdn.com/angularjs/1.6.5/angular.min.js"></script>
</head>
<body ng-controller="mainCtrl">
  <h1>^v1.6.0 ($postLink hook required)</h1>
  <my-directive name="sample1" number="number1"></my-directive>
  <my-directive name="sample2" number="number2"></my-directive>
</body>
<script>
  angular.module('myApp', [])
    .controller('mainCtrl', ['$scope', 'myDirectiveFactory', function ($scope, myDirectiveFactory) {
      $scope.number1 = 10
      $scope.number2 = 0
      this.$postLink = function () {
        myDirectiveFactory.get('sample2')
          .increment()
          .increment()
          .increment()
          .increment()
        myDirectiveFactory.get('sample1')
          .increment()
          .increment()
        myDirectiveFactory.get('sample2')
        .decrement()
      }
    }])
    .factory('myDirectiveFactory', function () {
      var instance = {}
      return {
        get: function (name) {
          return instance[name]
        },
        register: function (name, value) {
          return instance[name] = value
        },
        destroy: function (name) {
          delete instance[name]
        }
      }
    })
    .controller('myDirectiveCtrl', ['$scope', 'myDirectiveFactory', function ($scope, myDirectiveFactory) {
      $scope.name = $scope.name || 'myDirective'
      $scope.$on('$destroy', function () {
        myDirectiveFactory.destroy($scope.name)
      })
      var service = {
        increment: function () {
          $scope.number++
          return this
        },
        decrement: function () {
          $scope.number--
          return this
        }
      }
      myDirectiveFactory.register($scope.name, service)
    }])
    .directive('myDirective', [function () {
      return {
        controller: 'myDirectiveCtrl',
        restrict: 'E',
        scope: {
          number: '<',
          name: '@?'
        },
        template: '<p> {{ number }} </p>'
      }
    }])
</script>
</html> 
```

# java - 俳句生成器 Java

> ID：15934501
> 
> 赞同：0
> 
> 时间：2013-04-10T19:16:42.003
> 
> 标签：java, arrays

我需要编写一个生成随机俳句的程序。我的计划是让程序读取包含指定数量的音节名词、动词和形容词的文件，但我遇到了编码问题。现在它看起来像这样：

```
package poetryproject;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.Random;
import java.util.Scanner;

public class PoetryProject {

    public static void main(String[] args) throws FileNotFoundException {

        Random gen = new Random();

        Scanner adjectivesFile = new Scanner(new File("AdjectivesFile.dat"));
        Scanner nounFile = new Scanner(new File("NounFile.dat"));
        Scanner verbFile = new Scanner(new File("VerbFile.dat"));

        int adjectiveCount = adjectivesFile.nextInt();
        String[] adjectiveList = new String[adjectiveCount];
        for (int i = 0; i < adjectiveCount; i++) {
            adjectiveList[i] = adjectivesFile.nextLine();
        }
        adjectivesFile.close();

        int nounCount = nounFile.nextInt();
        String[] nounList = new String[nounCount];
        for (int i = 0; i < nounCount; i++) {
            nounList[i] = nounFile.nextLine();
        }
        nounFile.close();

        int verbCount = verbFile.nextInt();
        String[] verbList = new String[verbCount];
        for (int i = 0; i < verbCount; i++) {
            verbList[i] = verbFile.nextLine();
        }
        verbFile.close();

        for (int count = 1; count <= 1; count++) {
           System.out.printf("The %s %s \n",       adjectiveList[gen.nextInt(adjectiveList.length)]);
        }
        for (int count = 1; count <= 1; count++) {
            System.out.printf("%s %s \n", nounList[gen.nextInt(nounList.length)]);
        }
        for (int count = 1; count <= 1; count++) {
            System.out.printf("%s %s \n", verbList[gen.nextInt(verbList.length)]);
        }
     }
} 
```

对于我的输出，我只得到“The”形容词部分。为什么是这样？

哦，是的，我目前只致力于让第一行正确打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:21:12.220

第一个的格式说明符`printf()`与参数不匹配：

```
System.out.printf("The %s %s \n", adjectiveList[gen.nextInt(adjectiveList.length)]); 
```

[`MissingFormatArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/util/MissingFormatArgumentException.html)这将在打印形容词部分后抛出一个过早地结束您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:27:19.840

由于您没有为 System.out.printf 指定第二个参数，因此它会在以下行生成找不到符号错误：

```
System.out.printf("The %s %s \n",adjectiveList[gen.nextInt(adjectiveList.length)]);
                          ^ 
```

删除第二个格式说明符并将其编写为：

```
System.out.printf("The %s\n",       adjectiveList[gen.nextInt(adjectiveList.length)]); 
```

这应该可以解决您的问题。

# css - Firefox 背景图像怪异

> ID：15934502
> 
> 赞同：0
> 
> 时间：2013-04-10T19:16:42.567
> 
> 标签：css, firefox, cross-browser

Firefox 不会像 IE、Chrome 或 Safari 那样解释我的背景标题图像。这是为什么？

页面：[http](http://wlvrtn.com/sites/nms/page.php) ://wlvrtn.com/sites/nms/page.php 它的外观：[http ://cl.ly/OCbp](http://cl.ly/OCbp)

HTML：

```
<header class="banner banner-1">
   <h1>About Us</h1>
</header> 
```

CSS：

```
.banner {
position: relative;
text-align: center;
overflow: hidden;
height: 229px;
padding-top:105px;
z-index: 0;
width: 100%;
margin: 0 auto;
background-color: #8ab2a9;
background-repeat: no-repeat;
background-position-x: center;
background-position-y: bottom; 
}

.banner-1 {
background-image: url(../images/banners/banner-01.jpg);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:20:48.430

添加

```
.banner-1 { background-position: center bottom;} 
```

它应该工作。

# javascript - 通过 Javascript 修复/清理用户提供的 URL

> ID：15934506
> 
> 赞同：0
> 
> 时间：2013-04-10T19:17:52.563
> 
> 标签：javascript, url, clean-urls

有没有人碰巧有专注于清理用户提供的 URL 的 javascript 代码？我有一个移动应用程序要求用户输入他们的网站 URL，而且很多时候 URL 的格式不正确，缺少 http:// 前缀等。（在移动设备上打字往往容易出错）我经常看到类似的东西：

```
google.com
ww.google.com
http//www.goggle.com
http://www..google.com 
```

我知道有一定的假设必须做清理 URL，但似乎在某个地方会有一个库用于 URL 清理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:41:53.097

我想这是你能得到的最好的开始。它现在处理：.co.uk 或任何多部分域类型、协议、无 www、无协议等。我计划将其作为库插件。

[https://github.com/WebSudosUK/framework/blob/master/com.websudos.urlMatcher.js](https://github.com/WebSudosUK/framework/blob/master/com.websudos.urlMatcher.js)

# c - 无法通过 dev_queue_xmit() 发送数据包

> ID：15934513
> 
> 赞同：0
> 
> 时间：2013-04-10T19:18:14.777
> 
> 标签：c, linux-kernel, ip, netfilter

我想在 NF_IP_LOCAL_OUT 钩子中捕获数据包，并稍微修改它们。之后，我`dev_queue_xmit()`用来发送数据包。不幸的是，虽然函数返回0，但数据包无法成功发送。请问如何解决这个问题？谢谢！

```
static struct nf_hook_ops modify_ops;

static unsigned int modify(unsigned int hooknum, struct sk_buff * skb, const struct net_device * in, const struct net_device * out, int (*okfn)(struct sk_buff *))
{

        struct sk_buff* nskb;
        struct iphdr* nip_hdr;
        unsigned int   nip_hdr_off;
        struct icmphdr *icmph = NULL;
        int ret = 0;
        struct net *net = NULL;

        nskb = skb_copy(skb, GFP_ATOMIC);
        if(nskb == NULL)
        {
                 printk("%s\n", "skb_copy return NULL");
                 return NF_ACCEPT;
        }

        if( ip_hdr(nskb)->protocol != IPPROTO_ICMP)
        {
                kfree_skb(nskb);
                return NF_ACCEPT;
        }

        nip_hdr = ip_hdr(nskb);   //nip_hdr = nskb->nh.iph;
        nip_hdr_off = nip_hdr->ihl << 2;

        nip_hdr->daddr = in_aton("192.168.1.1");
        nip_hdr->check = 0;
        nip_hdr->check = ip_fast_csum((unsigned char *)nip_hdr, nip_hdr->ihl);
        icmph = icmp_hdr(nskb);
        icmph->checksum = 0;
        icmph->checksum = in_cksum((unsigned short *)icmph,
                        ntohs(nip_hdr->tot_len) - sizeof(struct iphdr));

        nskb->csum = 0;
        nskb->csum = csum_partial((unsigned char *)(ntcp_hdr + ntcp_hdr_off),
                                          ntohs(nip_hdr->tot_len) -
        nip_hdr_off - ntcp_hdr_off, 0);
        nskb->ip_summed = CHECKSUM_NONE;
        nskb->pkt_type  = PACKET_OUTGOING; //PACKET_OTHERHOST;

        neth_hdr = (struct ethhdr *) skb_push(nskb, ETH_HLEN);
        skb_reset_mac_header(nskb);
        nskb->protocol = neth_hdr->h_proto = htons(ETH_P_IP);
        memcpy (neth_hdr->h_dest, DMAC, ETH_ALEN);
        memcpy (neth_hdr->h_source, SMAC, ETH_ALEN);
        nskb->dev = dev_get_by_name(&init_net,ETH);
        if(nskb->dev==NULL)
        {
            printk("%s\n", "dev_get_by_name return NULL");
            kfree_skb(nskb);
            return NF_ACCEPT;
        }

        dev_hold(nskb->dev);
        printk("%s\n", "dev_hold ok");
        dev_put(nskb->dev);

        ret = dev_queue_xmit(nskb);
        printk("ret:%d\n", ret);
        return NF_STOLEN;

}

static int __init init(void)
{
  int  ret = 0;
  modify_ops.hook = modify;
  modify_ops.hooknum = 3; //NF_IP_LOCAL_OUT;
  modify_ops.pf = PF_INET;
  modify_ops.priority = NF_IP_PRI_FIRST;

  ret = nf_register_hook(&modify_ops);
  if (ret < 0)
   {
     printk("%s\n", "can't modify skb hook!");
     return ret;
   }

    printk("%s\n", "insmod modify skb module");
    return 0;
}

static void __exit fini(void)
{
    nf_unregister_hook(&modify_ops);
    printk("%s\n", "remove modify skb module.");
}

module_init(init);
module_exit(fini); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:54:05.280

数据包中未设置 ICMP 校验和。校验和是计算出来的，但放在 中`nskb->csum`，在这种情况下是没有意义的。

以下是我认为的问题：

在`NF_IP_LOCAL_OUT`调用时，数据包的 MAC 标头尚未设置。
`dev_queue_xmit`但是，希望 MAC 标头就位。

设置 MAC 标头（可能涉及发送 ARP 数据包）`ip_finish_output`在钩子之后和调用之前完成`dev_queue_xmit`。

你不应该打电话`dev_queue_xmit`。如果不能简单地 return `NF_ACCEPT`，则需要重新注入数据包（`nf_reinject`）。

# ember.js - Ember.js 中是否有等效于布局 nil 的内容？

> ID：15934518
> 
> 赞同：1
> 
> 时间：2013-04-10T19:18:28.020
> 
> 标签：ember.js

我有一个 ember 应用程序，它有一个相当复杂的应用程序模板，每个页面都包含一个音频播放器、移动抽屉、标题等。

我的登录页面需要能够拥有自己的模板，而不需要这些东西。在 Ruby 中，我可以简单地做 layout => nil 来不使用应用程序模板，但我找不到这样做的方法是 ember。

我不想只隐藏我没有在这一页上使用的所有元素，也不想在其他每一页上都明确包含这些元素。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:24:06.537

您可以使用[`Ember.Route#renderTemplate`](http://emberjs.com/api/classes/Ember.Route.html#method_renderTemplate)定义[命名的插座](http://emberjs.com/guides/routing/rendering-a-template/)，以便您可以指定哪些插座将连接到某些路由的视图/模板/模式/控制器。

例如

说我有一个模板：

```
<script type="text/x-handlebars">
    {{#if showTemplate}}
    <h1>App</h1>
        {{outlet center}}
        {{outlet south}}
    {{else}}
        {{outlet blank}}
    {{/if}}
</script> 
```

我有一个这样的应用程序控制器：

```
App.ApplicationController = Em.Controller.extend({
    title: 'Cool App',
    layout: true,
    useLayout: function() {
        return this.get('layout');
    }.property('layout')
}); 
```

我可以指定在应用程序模板下的哪些出口中加载哪些模板：

```
App.LeftRoute = Em.Route.extend({
    renderTemplate: function() {
        this.render('left', {
            into: 'application',
            outlet: 'center'
        });

        this.render('south', {
            into: 'application',
            outlet: 'south'
        });
    }
});

App.RightRoute = Em.Route.extend({
    renderTemplate: function() {
        this.render('right', {
            into: 'application',
            outlet: 'center'
        });
    }
}); 
```

对于这个特定的路由，我在via中设置了`layout`属性，这将导致应用程序模板删除其他模板。`ApplicationController``controllerFor`

```
App.BlankRoute = Em.Route.extend({
    setupController: function(controller, model) {
        var c = this.controllerFor('application');
        c.set('layout', false);
    },
    renderTemplate: function() {
        this.render('blank', {
            into: 'application',
            outlet: 'blank'
        });
    }
}); 
```

（见[小提琴](http://jsfiddle.net/schawaska/KZtxW/)）

有了这个规范，在“正确的路线”上，只会显示“中心”的内容，“南出口”将是空白的。“空白路线”将加载到没有任何模板标记的插座中。

我知道这看起来需要付出很多努力，但这只是一个概念性示例，我确信可以对其进行改进。

# c# - 闭括号的 Visual Studio 放置

> ID：15934520
> 
> 赞同：2
> 
> 时间：2013-04-10T19:18:30.100
> 
> 标签：c#, visual-studio-2010

目前 Visual Studio 完成我的 if 语句如下：

```
if(true){
} 
```

我想要的是：

```
if(true){

} 
```

我在工具->选项->文本编辑器下找到了很多将左大括号放在新行上的选项，但是有没有放置右大括号的选项？如果我的光标最终位于两个大括号之间，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:17:32.727

Visual Assist 具有此功能。

您可以在这里找到免费试用版 - [http://www.wholetomato.com/](http://www.wholetomato.com/)

# c# - 声明一个可变的泛型类

> ID：15934523
> 
> 赞同：1
> 
> 时间：2013-04-10T19:18:36.653
> 
> 标签：c#, .net, generics, dynamic

在我的项目中，我有 2 个接口。

`IButtonInputHandler<T>`& `INumericInputHandler<T>`

现在我想创建一个获取第一个接口\第二个接口\两者的类，并根据它们的类型公开方法。例如，如果我使用`IButtonInputHandler<Buttons>`and构建类`INumericInputHandler<Scroller>`，我想公开两个接收 Button 和 Scroller 对象的函数。

如果我只用 构建类`IButtonInputHandler<Keys>`，我想公开一个将接收 Buttons 对象的函数。

需要明确的是——如果我保留动态使用 2 种类型的选项，我的类将是这样的：

`Class<T>`并且该方法将返回 T。

基本上我需要灵活性，有时使用一种类型，有时使用两种类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:39:35.620

您需要使用的是[constraints](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)，但是添加多个约束时没有 OR 选项。

您需要做的是创建一个`T`必须实现的第三个接口（或基类）。对于您的原始示例，如果`Buttons`和`Scroller`两者都实现`IInputs`，您可以将接口声明为

```
public interface IButtonInputHandler<T>  where T : IInputs
{
}

public interface INumericInputHandler<T>  where T : IInputs
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:45:38.773

制作三个类：

```
public class ButtonInputHandler<T> : IButtonInputHandler<T>
{
    //implement IButtonInputHandler<T> here
}

public class NumericInputHandler<T> : INumericInputHandler<T>
{
    //implement INumericInputHandler<T> here
}

public class ButtonAndNumericInputHandler<TButton, TNumeric> :
    ButtonInputHandler<TButton>, INumericInputHandler<TNumeric>
{
    //implement INumericInputHandler<TNumeric> here
    //(the implementation for IButtonInputHandler<TButton> will be inherited)
} 
```

# bash - 是否可以通过 print 命令从 BASH 脚本中获取输出？

> ID：15934529
> 
> 赞同：0
> 
> 时间：2013-04-10T19:18:58.797
> 
> 标签：bash

我刚刚开始使用 BASH 脚本并遇到了问题。

我正在尝试输出变量的值，而我可以通过`echo`命令实现这一点。当我尝试使用该`print`命令时，我看到一个错误。

这是尝试使用`print`命令时的问题：

```
ian@ian-VirtualBox:~$ y=$HOME
ian@ian-VirtualBox:~$ print -- $y
**Warning: unknown mime-type for "/home/ian" -- using "application/octet-stream"
Error: no "print" mailcap rules found for type "application/octet-stream"** 
```

..这是使用的输出`echo`

```
ian@ian-VirtualBox:~$ echo $HOME
/home/ian 
```

不支持该`print`命令吗？还是我的环境有问题？

如有需要，我使用的是 Xubuntu 12.10

**更新以下响应\反馈：**

我期望`print`做什么？

像 echo 命令一样输出变量的值。

为什么我期待这种行为？

我一直提到的示例使用 print ，就像我在上面的示例中一样。我没有得到任何输出只是错误。所以我想知道为什么会发生这个错误。

我必须提供的示例*是*使用 Korn Shell。我很感激我正在使用 BASH shell，但我天真地认为它应该可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:21:05.673

`print`不是标准的 shell 命令。你在想`printf`吗？

阅读[shell 脚本指南](http://mywiki.wooledge.org/BashGuide/)可能会帮助您入门。

（[`print`您系统上的命令](https://launchpad.net/ubuntu/oneiric/+package/mime-support)看起来像是用于打印文件，而不是显示名称的扩展。）

# python - 在 CGI 脚本的主目录中导入 python 模块

> ID：15934532
> 
> 赞同：4
> 
> 时间：2013-04-10T19:19:06.557
> 
> 标签：python, cgi, python-import

我有一个需要机械化的 CGI 脚本，但它没有安装在我的网络主机上的系统范围内。我将它安装在我的主目录中

```
$HOME/.local/lib/python2.7/site-packages/mechanize-0.2.5-py2.7.egg 
```

但是我的 CGI 脚本无法导入 mechanize

```
#!/usr/bin/python

import sys,cgi,cgitb
import mechanize
^-- Exception(import mechanize ImportError: cannot import name mechanize) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:31:03.207

发生这种情况是因为您的 cgi 脚本作为不同的用户（可能是 apache 或 root）运行，因此 Python 不会使用您主文件夹中的 site-packages 目录。

您可能想要在这里做的是将主文件夹中的 site-packages 目录添加到整个系统将使用的站点目录列表中。

您可以通过`sitecustomize.py`在 Python 安装的 site-packages 目录中添加具有以下内容的文件来执行此操作：

```
import site
site.addsitedir('/home/YOUR_USER/.local/lib/python2.7/site-packages') 
```

如果不明显，请替换`/home/YOUR_USER`为您的主目录的实际路径。

您可以使用以下命令找到 Python 安装站点包目录所在的位置：

```
python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()" 
```

# c# - 通过知道标签并且不循环遍历项目，将值设置为列表视图的某一列中的行

> ID：15934533
> 
> 赞同：1
> 
> 时间：2013-04-10T19:18:07.177
> 
> 标签：c#

如果我知道行的标签，是否有机会在不循环列表视图的项目的情况下为某一列中的一行设置一个值？

例如

```
|Column1|Column2|Column3
   1       A        A
   2       B        B
   3       C        C 
```

例如，如果我想将值“OK”设置为第一行中的 column3：

```
listView1.Items.Column[2].Text == "OK" Where listview1.Items.Tag == "MyTag" 
```

有没有类似给出的例子的东西？（我写的只是一个例子，类似的东西不存在）；

据我所知，这样做的唯一方法是遍历项目，找到标签并将值设置为列，但我想知道是否还有其他方法可以这样做/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:33:51.420

您可以使用 LINQ 获得相同的结果，如果您从数据库中获取，也可以执行相同的过滤器。我想澄清一下，无论您使用什么短格式，它们都必须遍历数据以匹配它。没有从循环中逃脱，可能是LINQ让你觉得它是一条线但在内部它们也是循环的。我之前也以相同的方式工作，但没有跳过循环，即使有时使用你自己的循环，你也可以有一些业务逻辑来更快地找到价值。

# php - 更新cookie的最佳方法？

> ID：15934535
> 
> 赞同：0
> 
> 时间：2013-04-10T19:19:09.423
> 
> 标签：php, class, cookies

我正在编写一个类来控制如何为我正在处理的自定义 CMS 处理 cookie，我很好奇创建 cookie 后更新 cookie 的最佳方法。下面我粘贴了我班级中的一个函数，我正在使用它来更新 cookie，但它似乎不能正常工作。我遇到的问题是即使此函数返回“true”，cookie 似乎也没有改变。

```
 function updateCookie($data){
            $cookieArray = $this->getCookie();
            array_push($cookieArray,$data);
            //print_r($cookieArray);
            $json_string = json_encode($cookieArray,true);
            if(setcookie(_COOKIENAME, $this->encodeString($json_string,"S33D"))){
                return true;
            }
            else return false;
        } 
```

建议或更正会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:42:13.050

文档中的一些提示可能会有所帮助：

> 如果在调用此函数之前存在输出，则 setcookie() 将失败并返回 FALSE。如果 setcookie() 成功运行，它将返回 TRUE。这并不表示用户是否接受了 cookie。

...

> 请注意，当您发送 cookie 时，cookie 的值部分会自动进行 urlencoded，当接收到时，它会自动解码并分配给与 cookie 名称同名的变量。如果您不想要这个，如果您使用的是 PHP 5，则可以使用 setrawcookie() 代替。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

还有一些 knitpicking: setcookie 返回一个布尔值，因此无需进行检查。做就是了：

```
return setcookie( ... ); 
```

# mysql - 减去一行的两个结果

> ID：15934543
> 
> 赞同：0
> 
> 时间：2013-04-10T19:18:37.630
> 
> 标签：mysql

我有一张桌子，三列是这样的：

```
SELECT * FROM table1 WHERE status="ok"
# Result 1
/*--------------------------------------------
    qnt     name        status
    10      prod1       ok
    10      prod2       ok
--------------------------------------------*/

SELECT * FROM table1 WHERE status="deleted"
# Result 2
/*--------------------------------------------
    qnt     name        status
    2       prod1       deleted
    3       prod2       deleted
--------------------------------------------*/ 
```

我想要这样的结果（有可能吗？）：

```
# Result3 = (Result 1) - (Result 2)
/*--------------------------------------------
    qnt     name
    8       prod1
    7       prod2
--------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:24:37.673

```
SELECT
   ok.qnt - deleted.qnt AS qnt,
   ok.name
FROM 
   (SELECT * FROM table1 WHERE status="ok") ok
LEFT JOIN 
   (SELECT * FROM table1 WHERE status="deleted") deleted
   ON ok.name = deleted.name 
```

# ios - iOS：创建一个非全屏的外部窗口？

> ID：15934547
> 
> 赞同：0
> 
> 时间：2013-04-10T19:18:48.693
> 
> 标签：ios, window, external-display

我正在做一个 iPad 应用程序，它利用视频镜像来模仿我放在 iPad 显示屏上的内容。但我想在屏幕上添加一些额外的内容，而不会搞砸镜像。

我的想法是创建一个仅占据屏幕一部分的外部窗口，从而（希望）使“视频镜像”内容仍然可见。所以我正在尝试这种公认的冒险方法，每次它“爆炸”为全屏（我可以看到因为我已将其背景颜色设置为红色。）

```
 CGRect externalScreenFrame = CGRectMake(0, 0, 200, 200);
            UIWindow* externalWindow = [[UIWindow alloc] initWithFrame:externalScreenFrame];
            externalWindow.autoresizingMask = UIViewAutoresizingNone;
            externalWindow.backgroundColor = [UIColor redColor];
            externalWindow.screen = externalScreen;
            externalWindow.hidden = NO; 
```

难道我做错了什么？还是这完全不可能？

# java - 如何从 Java 中的 ZIP 文件中获取压缩文件数据？

> ID：15934550
> 
> 赞同：1
> 
> 时间：2013-04-10T19:19:57.630
> 
> 标签：java, zip

使用`java.util.zip`，我可以访问未压缩的文件（这是正常的预期行为）。我还可以获取有关每个文件的元数据（通过`java.util.zip.ZipFile`）有没有办法在 ZIP 中实际获取文件的压缩数据（字节流），即在 Java 解压缩之前？同样，是否有任何用于 Java 较低级别 ZIP 操作的库？

编辑：显然，我可以通过将 ZIP 文件作为字节流读取并解释整个文件来做到这一点，但这会涉及到大量关于 Zip 文件的复杂性。从本质上讲，这意味着从头开始创建一个库来读取/处理 zip 文件。我不想要那个。

# php - mysql搜索与给定输入匹配的列或给定输入与给定价格和价格之间的价格

> ID：15934552
> 
> 赞同：1
> 
> 时间：2013-04-10T19:20:04.903
> 
> 标签：php, mysql, phpmyadmin

当我使它工作正常时，我开始编写我的输入代码，总共 7 个输入字段 4 个复选框和 4 个输入文本字段，但看起来像 mysql 中的这个搜索数据，其中匹配输入 1 或输入 2 在变量 1 和变量 2 之间匹配，其中大小在 size1 和尺寸2

```
 $fetch=mysql_query("select * from diamonds where diamond-color='".$red."' or diamond-color_pink='".$pink."'  and diamond_price between '".$min_price."' and '".$max_price."'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:23:10.330

试试这个：

```
select * from diamonds 
 where diamond_price between 1000 and 10000
   and (diamond-color ='red' or diamond-color_pink='pink') 
```

替换为对应的变量。

# magento - 您如何在 Magento 中设置事件观察者的排序顺序？

> ID：15934553
> 
> 赞同：14
> 
> 时间：2013-04-10T19:20:07.573
> 
> 标签：magento, events, observers

我已经在事件上创建了一个观察者，但它似乎在运行该方法`catalog_product_save_after`的目录规则观察者之前被调用。`applyAllRulesOnProduct()`我需要在`applyAllRulesOnProduct()`跑步后给我打电话。这些观察者的顺序是如何选择的？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-10T21:11:25.767

与 Magento 中的许多人一样，答案很复杂。您的具体情况可能与**两个**可能的问题有关。这会很长——跳到最后看无上下文的简短版本。

### 模块加载顺序

没有办法**显式**设置观察者排序顺序。Magento 将按照它们被[合并到全局配置](http://alanstorm.com/category/magento#magento_config)中的顺序运行事件。因此，虽然您无法具体控制事件的顺序，但您**可以**通过使用XML 声明文件`<depends/>`中的标记来控制 Magento 加载和合并模块的顺序。`app/etc/modules`

例如，在`Mage_Api2.xml`文件中

```
<!-- File: app/etc/modules/Mage_Api2.xml -->
<config>
    <modules>
        <Mage_Api2>
            <active>true</active>
            <codePool>core</codePool>
            <depends>
                <Mage_Core />
                <Mage_Oauth />
            </depends>
        </Mage_Api2>
    </modules>
</config> 
```

作者已经指出该`Mage_Api2`模块*依赖*于`Mage_Core`和`Mage_Oauth`模块。这意味着`Mage_Api2`' 的`config.xml`文件将在和的文件**之后**合并。这意味着 中定义的事件将在和中定义的事件之后运行。`config.xml``Mage_Core``Mage_Oauth``Mage_Api2``Mage_Core``Mage_Oauth`

缺少一个`<depends/>`节点，模块加载的规则是

1.  所有**核心**模块都在非核心模块之前加载

2.  其余模块按字母顺序加载。

让您的模块依赖于`Mage_CatalogRule`模块（`applyAllRulesOnProduct`定义观察者方法的位置）是一种很好的形式。 **但是**，这不是必需的，因为所有核心模块都在非核心模块之前加载。

这是因为事件观察者方法的运行顺序还有另一个因素。

### 区域顺序

除了模块顺序之外，您还需要考虑事件观察器定义在哪个**区域**。也就是说，当您在 Magento 中创建事件观察器时，您会放入一些`config.xml`看起来像这样的

```
<config>
    <!-- ... -->
    <global>
        <!-- ... -->
        <events>
            <catalog_product_save_after>
                <observers>
                    <abc_abc>
                        <class>abc_abc/observer</class>
                        <method>test</method>
                    </abc_abc>
                </observers>
            </catalog_product_save_after>
        </events>       
    </global>
</config> 
```

在上面的例子中，这个事件观察者已经被定义在`global`区域中（因为它在`<global/>`节点内部）。这意味着观察者将在**Magento**和区域中`frontend`运行。`adminhtml`但是，也可以**限制**您的事件运行的区域。例如，`catalogrule`您提到的事件是在`adminhtml`区域中定义的

```
<!-- #File: app/code/core/Mage/CatalogRule/etc/config.xml -->
<config>
    <!-- ... -->
    <adminhtml>
        <!-- ... -->
        <events>
            <!-- ... -->
            <catalog_product_save_after>
                <observers>
                    <catalogrule>
                        <class>catalogrule/observer</class>
                        <method>applyAllRulesOnProduct</method>
                    </catalogrule>
                </observers>
            </catalog_product_save_after>
        </events>
    </adminhtml>
</config> 
```

这意味着这个事件观察器只会在 Magento 的后端`adminhtml`区域运行。换句话说，它仅在您在后端管理控制台中保存事件时运行。

**这**就是我认为您的问题所在，因为在 Magento 的现代版本（可能还有旧版本）中，来自`<global/>`节点的事件观察者总是在`<adminhtml/>`节点中的事件观察者之前运行。我的猜测是您的事件在`<global/>`节点中。尝试将其移动到`<adminhtml/>`节点。

**简短版本**：确保您的模块`<depends/>`在`Mage_CatalogRule`模块上，并将您的事件观察器配置移动到`<adminhtml/>`模块的`config.xml`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T12:40:34.367

我知道这是一个旧线程，但如果有人想更改其模块的加载顺序：

/etc/modules/* 文件夹按字母顺序加载，因此如果您的模块文件位于第一个（或最后一个），它会相应地按该顺序加载 - 所以您可以将 /etc/modules/Namespace_Module.xml 重命名为 /etc/modules/ ZZZNamespace_Module.xml 最后加载它（假设没有任何其他带有 ZZZZ 的模块......）

此外，为了澄清，您模块中的所有其他内容都可以保持不变（代码/文件和文件夹名称），您只需更改这个文件，该文件可以命名为您选择的任何内容。

# xamarin.ios - Xamarin.IOS 构建分发时架构 armv7 的重复符号

> ID：15934560
> 
> 赞同：3
> 
> 时间：2013-04-10T19:20:32.117
> 
> 标签：xamarin.ios

我有一个我已经编译多年的应用程序，但是在构建分发时突然出现 80-100 个重复符号错误。知道是什么原因造成的或如何解决吗？

如果我关闭 LLVM，那么一切都会好起来的：-/

```
/var/folders/0h/vq5g4bwx4bl_l6d7w8qfxq6r0000gn/T/tmp121b3ed0.tmp/NDC2010.exe.armv7.o
 duplicate symbol _type_info_98 in:
  /Users/cnordvik/projects/private/myapp/trunk/iPhoneV2/NDC2010/NDC2010/obj/Release/mtouch-      cache/System.armv7.cache.bkurnUkrJNkd4r5Vjq9VHff8nFM=.o
/var/folders/0h/vq5g4bwx4bl_l6d7w8qfxq6r0000gn/T/tmp121b3ed0.tmp/NDC2010.exe.armv7.o
 ld: 632 duplicate symbols for architecture armv7
 collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:40:18.527

这是一个潜入版本 6.2.2 的错误（已在 6.2.3中[解决）。](http://docs.xamarin.com/releases/ios/xamarin.ios_6/xamarin.ios_6.2#Xamarin.iOS_6.2.3)它仅在使用 LLVM 优化编译器时影响某些程序集。

您的直接选择是：

*   降级到 6.2.1；
*   禁用 LLVM；或者
*   升级到 6.2.3

# python - BeautifulSoup 标签去除

> ID：15934562
> 
> 赞同：2
> 
> 时间：2013-04-10T19:20:36.867
> 
> 标签：python, html-parsing, beautifulsoup

我正在寻找使用 Python/BeautifulSoup 解析 HTML 表...

这是我第一次尝试用 Python 编写任何东西，所以它可能不是最有效的。

我在这里找到了另一个帖子的功能（在大多数情况下都很好用），但我遇到了几个问题。

我正在运行的代码在这里：

```
def strip_tags(html, invalid_tags):
    bs2 = BeautifulSoup(str(html))
    for tag in bs2.findAll(True):
        if tag.name in invalid_tags:
            s = ""      

            for c in tag.contents:
                if not isinstance(c, NavigableString):
                    c = strip_tags(unicode(c), invalid_tags)
                s += unicode(c)

            tag.replaceWith(s)
    return bs2

invalid_tags = ['td','b']

for row in bs.findAll('tr'):
    col = row.findAll('td')

for index,item in enumerate(col):
    t = item.findAll('a')
    for ta in t:
        ta.replaceWithChildren()
        col[index] == item  

for item in col:
    print(strip_tags(item.string,invalid_tags).string 
```

原始数据表 (HTML) 如下所示：

```
<td align="left">11/10</td>
<td>N ARMY</td>
<td>-7.5</td>
<td>NL</td>
<td><b>76-65</b></td>
<td><span style="color:green">W</span></td>
<td><span style="color:green">W</span></td>
<td></td>
<td class="cell4">50.0%</td>
<td class="cell4">76.9%</td>
<td class="cell4">37.5%</td>
<td class="cell5">37.1%</td>
<td class="cell5">90.0%</td>
<td class="cell5">29.4%</td> 
```

当我运行 strip_tags 函数时，它适用于除第二行之外的所有标签...“无”作为输出返回。

如果有人能提供任何关于为什么会发生这种情况的见解，我将不胜感激。

编辑：哇感谢大家的快速回复。无论如何，这是我运行代码时发生的情况：

```
11/10
没有任何
-7.5
荷兰
76-65
W
W
没有任何
50.0%
76.9%
37.5%
37.1%
90.0%
29.4%
```

问题在于第二行，它返回“None”而不是“N ARMY”。所以是的，理想情况下，我只想要在标签中找到的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:19:49.600

如果我正确理解了您想要的输出，则无需手动删除标签-这就是我们使用`BeautifulSoup`! ;)

您需要调用的是返回的实例`get_text()`上的方法。`tag``find_all()`

使用您的示例 html：

```
<table>
    <tr>
        <td align="left">11/10</td>
        <td>N ARMY</td>
        <td>-7.5</td>
        <td>NL</td>
        <td><b>76-65</b></td>
        <td><span style="color:green">W</span></td>
        <td><span style="color:green">W</span></td>
        <td></td>
        <td class="cell4">50.0%</td>
        <td class="cell4">76.9%</td>
        <td class="cell4">37.5%</td>
        <td class="cell5">37.1%</td>
        <td class="cell5">90.0%</td>
        <td class="cell5">29.4%</td>
    </tr>
</table> 
```

对 s 进行简单的迭代`td`，然后调用`get_text()`，我们就可以开始了！

```
from bs4 import BeautifulSoup

with open('test.html', 'rb') as html: #My local version of your html file
    soup = BeautifulSoup(html.read())

for td in soup.find_all('td'):
    print td.get_text() 
```

这给出了输出：

```
11/10
N ARMY
-7.5
NL
76-65
W
W

50.0%
76.9%
37.5%
37.1%
90.0%
29.4%
[Finished in 0.1s] 
```

# highcharts - 在 HighChart 圆环图中单击外部切片时如何获取内部切片？

> ID：15934563
> 
> 赞同：1
> 
> 时间：2013-04-10T19:20:37.903
> 
> 标签：highcharts, donut-chart

当我单击子切片（外切片）时，是否可以获得父切片（内切片）？

当您单击 MSIE 的 8.0 时，我会弹出一个说 8.0 的窗口。我想得到的是父切片数据，在这种情况下是 MSIE。注意，Chrome 也有 8.0 版，所以当我点击它时，我应该得到 Chrome。

这可能吗？

我的目标是当用户点击一个版本时，该切片的信息显示在圆环图下方的表格中。当用户单击浏览器切片时，将显示浏览器所有版本的信息。

这是我设置的 JSFiddle。

```
 series: [{
     ...,
     point:{
        events:{
            click: function (event) {
                alert(this.name); // Get access to parent slice here.
            }
        }
    }
}]
http://jsfiddle.net/CodeWzrd/Sre9G/2/ 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:44:46.490

您应该修改向下钻取结构并为每个“内部”系列添加 id，并为“外部”系列添加 parentID。然后使用 get 函数（[http://api.highcharts.com/highcharts#Chart.get()](http://api.highcharts.com/highcharts#Chart.get())）显示“父”名称。

这是显示 MSIE 名称的简单示例，但如果您为其他系列添加所有参数，那么它将适用于每个系列。

[http://jsfiddle.net/Sre9G/4/](http://jsfiddle.net/Sre9G/4/)

```
 point: {
            events: {
                click: function (event) {
                    var parentSerie = this.options.parentId;
                   alert(this.series.chart.get(parentSerie).name); 

                }
            }
        } 
```

# android - 片段仅显示一个列表

> ID：15934572
> 
> 赞同：0
> 
> 时间：2013-04-10T19:20:51.843
> 
> 标签：android, android-fragments

我尝试从我的片段中显示两个列表。当我显示第一个（array1）时，没关系。但是当我添加第二个时，它只是替换了第一个，我只看到第二个列表（数组 2）。这是我的代码，请告诉我这里有什么问题吗？

这是我的片段文件：

```
public class ToFragment extends ListFragment {   
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        String[] array1 = {
                "listitem1",
                "listitem2"
        };
        String[] array2 = {
                "listitem1"
        };
        ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(inflater.getContext(), R.layout.trainlist, R.id.traintextviewid);
        adapter1.addAll(array1);    
        setListAdapter(adapter1);

        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(inflater.getContext(), R.layout.trainlist, R.id.timetextviewid);
        adapter2.addAll(array2);    
        setListAdapter(adapter2);

        return super.onCreateView(inflater, container, savedInstanceState);
    } 
```

这是 tofragment.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fragment_container"
        android:baselineAligned="false"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:orientation="horizontal" >
        <ListView
            android:id="@+id/trainlist"
            android:layout_width="250dp"
            android:layout_height="wrap_content" >
        </ListView>
        <ListView
            android:id="@+id/timelist"
            android:layout_width="48dp"
            android:layout_height="wrap_content">
        </ListView>         
</LinearLayout> 
```

和 trainlist.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/traintextviewid"
        android:textIsSelectable="true"
        android:layout_width="250dp"
        android:layout_height="48dp"/>
    <TextView
        android:id="@+id/timetextviewid"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:textIsSelectable="true" />
</LinearLayout> 
```

我希望它看起来像两个列表，第二个是低宽度。请告诉我该怎么办！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:33:44.950

如果要合并两个数组并在列表视图中显示结果，请将它们添加到一个 ArrayAdapter。不要为每个阵列创建适配器。

```
 adapter1.addAll(array1); 
    adapter1.addAll(array2);       
    setListAdapter(adapter1); 
```

如果你想要单独的列表，你应该使用带有两个 listliews 或两个 ListFragments 的自定义片段（一个列表一个 listfragment）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:35:28.663

`ListFragment`不能支持多个列表。如果您需要更多，请使用常规`Fragment`作为主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:41:45.377

1.  `ListView`在`ListFragment`下举行`android.R.id.list`。只可以有一个人。将 a`Fragment`与该视图一起使用。
2.  如果您试图适应`ListFragment`居住地`android:id="@+id/fragment_container"`，那么您已经做错了。你正试图把 a`Fragment`放进去`Fragment`，这样你就可以了`Fragment`。
3.  停止使用硬编码`android:layout_width`

# svn - 从 IntelliJ 迁移到 Visual Studio - 隐藏的深度 SVN 集成功能，还是通过插件可用？

> ID：15934573
> 
> 赞同：1
> 
> 时间：2013-04-10T19:20:56.197
> 
> 标签：svn, version-control, visual-studio-2012, intellij-idea

我喜欢 Visual Studio，但我想念 IntelliJ 的一些功能。大多数情况下，深度 VCS 集成。

IntelliJ 根据 VCS 状态对文件选项卡进行颜色编码 - 绿色表示新建，蓝色表示修改，红色表示已删除等。用于 VS 的 VisualSVN 插件非常接近，但据我所知没有此功能。

欢迎从 IntelliJ 迁移到 VS 的任何其他提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:17:04.397

最接近 IntelliJ 的方法是使用[ReSharper](http://www.jetbrains.com/resharper/)。

ReSharper 由[JetBrains](http://www.jetbrains.com/)制作，JetBrains也制作了 IntelliJ。

目前，它没有您所要求的任何特殊[VCS 支持。](http://devnet.jetbrains.com/thread/303949)

但是您会在 ReSharper 中找到 IntelliJ 的许多其他好东西：

*   重构工具
*   XML 支持
*   HTML/CSS/Javascript 支持
*   相同的键盘快捷键
*   单元测试集成
*   还有更多...

许多 Visual Studio 开发人员离不开 ReSharper。我就是其中之一。

# ruby-on-rails - 如何使用 Assets Sync gem 在 Rails 应用程序上引用 S3 图像？

> ID：15934575
> 
> 赞同：2
> 
> 时间：2013-04-10T19:21:00.937
> 
> 标签：ruby-on-rails, amazon-s3, asset-pipeline, assets

我正在使用[Assets Sync](https://github.com/rumblelabs/asset_sync)在部署时将资产上传到 S3。所有资产均已正确上传并存储在 S3 上。

应用中使用的js、css、字体均指向S3，图片除外

我想问题可能出在rails应用程序上......

到底是怎么回事？

我的初始化程序**配置**文件：

```
AssetSync.configure do |config|
  config.fog_provider = 'AWS'
  config.fog_directory = ENV['FOG_DIRECTORY']
  config.aws_access_key_id = ENV['AWS_ACCESS_KEY_ID']
  config.aws_secret_access_key = ENV['AWS_SECRET_ACCESS_KEY']

  # Don't delete files from the store
  # config.existing_remote_files = 'keep'
  #
  # Increase upload performance by configuring your region
  # config.fog_region = 'eu-west-1'
  #
  # Automatically replace files with their equivalent gzip compressed version
  config.gzip_compression = true
  #
  # Use the Rails generated 'manifest.yml' file to produce the list of files to
  # upload instead of searching the assets directory.
  # config.manifest = true
  #
  # Fail silently.  Useful for environments such as Heroku
  config.fail_silently = true
end 
```

**配置/环境/staging.rb**

```
MyApp::Application.configure do
  routes.default_url_options[:host]= ENV['DOMAIN']

  config.cache_classes = true  
  config.cache_store = :dalli_store
  config.static_cache_control = "public, max-age=2592000"
  config.action_controller.perform_caching = true

  config.consider_all_requests_local = false

  config.serve_static_assets = true
  config.assets.compress = true
  config.assets.compile = false
  config.assets.digest = true
  config.assets.enabled = true
  config.assets.js_compressor = :uglifier
  config.assets.precompile += %w(static.js static.css vendor.js)

  config.assets.paths << Rails.root.join('app', 'assets', 'fonts')

  config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
  config.assets.prefix = "/assets"

  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify

end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T12:50:33.530

**问题在于你的 CSS**

我们只需要解决这个问题，如果你知道发生了什么就很简单了

> 您的应用需要使用[SCSS (SASS)](http://sass-lang.com/)，以确保 rake 可以将 image_paths 编译到您的 CSS 文件中。

所以而不是使用

```
/*-- Typical .CSS (static) --*/
.profile_page {
    background: url(background.png);
} 
```

您需要确保您的应用程序可以处理编译过程，这就是 SCSS 的用武之地：

```
/*-- file.css.scss (dynamic) --*/
.profile_page {
    background: asset_url(background.png)
} 
```

这里有一个关于 Rails 应用程序中 SCSS 的很好的[资源](https://stackoverflow.com/questions/9138946/proper-scss-asset-structure-in-rails)：[Proper SCSS Asset Structure in Rails](https://stackoverflow.com/questions/9138946/proper-scss-asset-structure-in-rails)

我们所做的是更改`application.css`-> `application.css.scss`，然后导入各种不同的 .scss 文件，其中包含 assets_path 定义：

```
@import 'fonts'; 
```

这意味着我们可以将 fonts.css.scss 文件更改为以下格式：

```
/*-- Akagi Font --*/
@font-face {
    font-family: 'akagi';
    src: asset_url('fonts/akagi-th-webfont.eot');
    src: asset_url('fonts/akagi-th-webfont.eot?#iefix') format('embedded-opentype'),
         asset_url('fonts/akagi-th-webfont.woff') format('woff'),
         asset_url('fonts/akagi-th-webfont.ttf') format('truetype'),
         asset_url('fonts/akagi-th-webfont.svg#akagithin') format('svg');
    font-weight: 300;
    font-style: normal;
}
@font-face {
    font-family: 'akagi';
    src: asset_url('fonts/akagi-bk-webfont.eot');
    src: asset_url('fonts/akagi-bk-webfont.eot?#iefix') format('embedded-opentype'),
         asset_url('fonts/akagi-bk-webfont.woff') format('woff'),
         asset_url('fonts/akagi-bk-webfont.ttf') format('truetype'),
         asset_url('fonts/akagi-bk-webfont.svg#akagibook') format('svg');
    font-weight: 400;
    font-style: normal;
}
@font-face {
    font-family: 'akagi';
    src: asset_url('fonts/akagi-sb-webfont.eot');
    src: asset_url('fonts/akagi-sb-webfont.eot?#iefix') format('embedded-opentype'),
         asset_url('fonts/akagi-sb-webfont.woff') format('woff'),
         asset_url('fonts/akagi-sb-webfont.ttf') format('truetype'),
         asset_url('fonts/akagi-sb-webfont.svg#akagisemibold') format('svg');
    font-weight: 500;
    font-style: normal;
} 
```

这修复了所有路径，但`rake asset:precompile`确实很慢

* * *

**重要的提示**

让它正常工作有一个技巧，它是在生产环境中预编译资产，如下所示：

```
rake assets:precompile RAILS_ENV=production 
```

# mysql - 自增列还是 UNIQUE 约束？

> ID：15934584
> 
> 赞同：3
> 
> 时间：2013-04-10T19:20:18.007
> 
> 标签：mysql, sql

这是我的带有自动增量列的语言表定义（DBMS 是 MySQL）：

```
DROP TABLE IF EXISTS languages;
CREATE TABLE IF NOT EXISTS languages (
    language       VARCHAR(16) NOT NULL,
    PRIMARY KEY    (language)
) ENGINE=InnoDB; 
```

这是它的另一个版本，但应用了 UNIQUE 约束：

```
DROP TABLE IF EXISTS languages;
CREATE TABLE IF NOT EXISTS languages (
    language_id    TINYINT     NOT NULL AUTO_INCREMENT,
    language       VARCHAR(16) NOT NULL,
    PRIMARY KEY    (language_id),
    UNIQUE         (language)
) ENGINE=InnoDB; 
```

对于哪个版本更好用，我有两种看法。一方面，根据数据库设计理论，第一个定义似乎是正确的，只是因为其中没有多余的垃圾，并且 PRIMARY KEY 约束保证不能有两行具有相同的值，也就是说，有例如，“English”这个词不可能在列中出现两次，这当然是一件好事。但是这样做的问题是另一个表中引用语言列的外键字段必须存储字符串而不是 ID 号。这仅仅意味着引用表将把整个内容存储在列中，如果应用程序可以提供一个下拉组合框列表，其中包含预先填充的唯一值，那么拥有语言表似乎没有意义。但，

另一方面，第二种方法听起来更实用。为了确保唯一性，我们可以使用 UNIQUE 约束，并且在引用列中使用整数而不是字符串，这往往会占用更少的内存，据我所知，它们在搜索操作期间比字符串快得多。

请帮我弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:46:47.950

我在这里问了一个类似的问题[如果 SQL 字典表有一个 IDENTITY 列](https://stackoverflow.com/questions/13165368/should-an-sql-dictionary-table-have-an-identity-column)

在那种情况下，我发现没有 ID 列是正确的决定，因为我永远不会通过代码中的 PK 以外的任何方式引用数据。那就是没有依赖于该表的外键。

如果您正在查找一些任意数据或将其作为外键引用，我总是主张使用 id 列，因为它会减小数据库的大小并且可以立即识别它是外键任何拥有最基本数据库知识的人的关键。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T20:22:07.570

第二个版本更加规范化。在数据库设计理论中有 1NF（第一范式）、2NF 到 6NF 的概念。1NF 意味着您只有某种密钥。6NF 意味着您的数据结构尽可能干净。高标准化听起来不错，但你付出了代价：

*   更复杂的查询和插入操作
*   由于所有这些复杂性而导致性能下降

如有疑问，我总是会选择不太复杂的选项。如果有一天你真的需要全面优化或规范化，你可以在那天改变你的架构。不确定你的数据库有多大，但如果你仔细地重构，重构可能是小菜一碟。

# drools - drools arraylist 收集访问对象

> ID：15934586
> 
> 赞同：0
> 
> 时间：2013-04-10T19:20:26.960
> 
> 标签：drools

如何从 Drools 5.5 中收集的结果项 ArrayList 访问获取器？

在类似于下面示例的代码中，我得到`The method getStatus() is undefined for the type Object`.

我试过铸造结果，我试过 generics `ArrayList<Alarm>`。

归根结底，我试图访问`ArrayList()`.

```
rule "Raise priority if system has more than 3 pending alarms"
when
    $system : System()
    $alarms : ArrayList( size >= 3 )
              from collect( Alarm( system == $system, status == 'pending' ) )
then
    System.out.println($alarms.get(0)); // show Alarm.toString() 
    System.out.println($alarms.get(0).getClass()); // prints "Alarm"
    System.out.println($alarms.get(0).getStatus());

   // Raise priority, because system $system has
   // 3 or more alarms pending. The pending alarms
   // are $alarms.
end 
```

# jquery-selectors - 用于在选择器中使用属性的 JQuery 通配符

> ID：15934591
> 
> 赞同：0
> 
> 时间：2013-04-10T19:21:53.640
> 
> 标签：jquery-selectors, wildcard, jquery-attributes

我已经广泛研究了这个主题，并且在假设我想做的事情没有通配符之前，我作为最后的手段提出了要求。

我需要从文档中提取所有文本输入元素并将其添加到数组中。但是，我只想添加具有 id 的输入元素。

我知道您可以在使用 $(#\S*) 等 id 选择器时使用 \S* 通配符，但是我不能使用它，因为我也只需要按文本类型过滤结果，所以我搜索属性。

我目前有这个：

```
values_inputs = $("input[type='text'][id^='a']"); 
```

这可以按我的意愿工作，但它只带回以“a”开头的文本输入元素。我想获取所有带有“id”的文本输入元素。我不能使用：

```
values_inputs = $("input[type='text'][id^='']"); //or
values_inputs = $("input[type='text'][id^='*']"); //or
values_inputs = $("input[type='text'][id^='\\S*']"); //or
values_inputs = $("input[type='text'][id^=\\S*]"); 
//I either get no values returned  or a syntax error for these 
```

我想我只是在 SQL 中为 JQuery 属性选择器寻找相当于 * 的东西。没有这样的事情，还是我只是以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:26:02.567

你的逻辑有点模棱两可。我相信您*不*想要具有*任何*id 的元素，而是想要 id 不*等于*空字符串的元素。用这个。

```
values_inputs = $("input[type='text']")
    .filter(function() { 
        return this.id != '';
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:31:12.857

尝试将您的选择器更改为：

```
$("input[type='text'][id]") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:31:21.373

其实，很简单：

```
var values_inputs = $("input[type=text][id]"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T14:29:02.317

我想出了另一种非常简单地使用通配符的方法。这对我帮助很大，所以我想我会分享它。

您可以通过以下方式在选择器中使用属性通配符来模拟“*”的使用。假设您有动态生成的表单，其中元素是使用相同的命名约定创建的，除了动态更改表示索引的数字：

```
id='part_x_name' //where x represents a digit 
```

如果您只想检索具有 id 名称和元素类型的某些部分的文本输入，您可以执行以下操作：

```
var inputs = $("input[type='text'][id^='part_'][id$='_name']"); 
```

瞧，它将检索在 id 字符串开头具有“part_”和在字符串末尾具有“_name”的所有文本输入元素。如果你有类似的东西

```
id='part_x_name_y' // again x and y representing digits 
```

你可以这样做：

```
var inputs = $("input[type='text'][id^='part_'][id*='_name_']"); //the *= operator means that it will retrieve this part of the string from anywhere where it appears in the string. 
```

如果其他元素 id 在您的文档中具有类似的命名约定，则取决于其他 id 的名称可能会开始变得有点棘手。在指定通配符时，您可能需要更有创意。在最常见的情况下，这足以满足您的需求。

# python - Python多处理和读取大文件很慢

> ID：15934595
> 
> 赞同：1
> 
> 时间：2013-04-10T19:21:02.173
> 
> 标签：python, file, multiprocessing, hard-drive

我正在使用 python 的多处理包来启动执行某些工作的不同进程。这项工作是在读取大文件后执行的。这些文件必须由每个进程加载，因此，有许多进程试图同时从同一个硬盘驱动器获取不同的大文件，这会使读取缓冲区饱和。它给了我一个非常缓慢的表现。我的问题是：有什么方法可以告诉 Python 在读取缓冲区低于某个值之前不会尝试打开文件？或者，当您想通过从同一个硬盘驱动器访问大文件来执行多处理工作时，应该遵循哪种策略？
谢谢，亚历杭德罗

# c# - 如何执行批处理文件？

> ID：15934596
> 
> 赞同：0
> 
> 时间：2013-04-10T19:21:04.170
> 
> 标签：c#, oracle

我刚刚编写了我的第一个 C# 代码！我按照这个示例从[Oracle](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/dotnet/GettingStartedNETVersion/GettingStartedNETVersion.htm)创建数据拉取：

这是我当前的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using Oracle.DataAccess.Client; // ODP.NET Oracle managed provider
using Oracle.DataAccess.Types;

namespace OraTrigger
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string oradb = "Data Source=server;User Id=user;Password=pass;";
            OracleConnection conn = new OracleConnection(oradb); // C#
            conn.Open();

            OracleCommand cmd = new OracleCommand();
            cmd.Connection = conn;
            cmd.CommandText = "SELECT cast(count(D_DTM) AS varchar(20)) as trig FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI"; 
            cmd.CommandType = CommandType.Text;

            OracleDataReader dr = cmd.ExecuteReader();
            dr.Read();
            label1.Text = dr.GetString(0);

            conn.Dispose();
        }
    }
} 
```

如果计数> 0，我如何执行批处理文件？我试图遵循[这个](https://stackoverflow.com/questions/5519328/executing-batch-file-in-c-sharp)。但是一个愚蠢的问题是，bat文件的位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:26:52.650

你可以简单地这样做：

```
var startInfo = new ProcessStartInfo("{full path to .bat file");
Process.Start(startInfo); 
```

这将执行批处理文件，就像您在 Windows 中双击它一样。现在，起作用的原因是该属性在类上默认`UseShellExecute`设置为。因此，它实际上将利用 Windows shell 来启动您提供的文件。`true``ProcessStartInfo`

另一种选择是`Start`像这样发出：

```
Process.Start("{full path to .bat file"); 
```

但这个解决方案的问题是你没有设置发送任何参数或开关到应用程序，因为你没有使用`ProcessStartInfo`，但它可能对你有用。

* * *

因此，完整的代码可能如下所示：

```
int cnt;
if (int.TryParse(label1.Text, out cnt))
{
    if (cnt > 0)
    {
        var startInfo = new ProcessStartInfo("{full path to .bat file");
        Process.Start(startInfo);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:28:02.360

使用 Process.Start()

请参阅以下内容：

[http://www.dotnetperls.com/process-start](http://www.dotnetperls.com/process-start)

# android - Android禁用短信服务

> ID：15934600
> 
> 赞同：0
> 
> 时间：2013-04-10T19:21:12.923
> 
> 标签：android, android-permissions, android-broadcast

有没有办法以编程方式禁止用户接收/发送短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:34:20.033

不，你不能这样做。也许在有根设备等上你可以，但这不是要考虑的标准情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:22:33.790

我不知道发送部分，但要阻止接收短信，你可以给你的应用程序高优先级

```
<receiver android:name=".receiver.SMSReceiver" android:enabled="true">
    <intent-filter android:priority="1000">
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

在您的[BroadcastReceiver 的](http://developer.android.com/reference/android/content/BroadcastReceiver.html)onReceive() 方法中，您可以使用[abortBroadcast()](http://developer.android.com/reference/android/content/BroadcastReceiver.html#abortBroadcast%28%29)。所以收到的短信不会到达收件箱。

# java - 在同一个活动中实现两个 TimePicker

> ID：15934601
> 
> 赞同：1
> 
> 时间：2013-04-10T19:21:16.440
> 
> 标签：java, android, dialog, datepicker, timepicker

我在同一个活动中使用两个时间选择器来让用户为特定任务选择开始时间和停止时间，我使用支持库中提供的 DialogFragment 类来向后兼容旧的 Android 版本。

我设置了时间选择器并且它们正确显示，但我无法弄清楚如何获取用户为这两个时间选择器输入的值，我没有任何实现对话框的背景或经验，所以你的代码指导高度赞赏示例！

这是我创建 TimePickerFragment 类的代码，在一个单独的文件中创建，从以下位置获取和编辑： http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)：

```
package com.calls.only;

import java.util.Calendar;

import android.app.Dialog;
import android.app.TimePickerDialog;
import android.app.TimePickerDialog.OnTimeSetListener;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;

public class TimePickerFragment extends DialogFragment {

    @Override 
    public Dialog onCreateDialog(Bundle savedInstanceState) {
         // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        if (!(getActivity() instanceof OnTimeSetListener)) throw new IllegalStateException("Activity should implement OnTimeSetListener!");
            OnTimeSetListener timeSetListener =  (OnTimeSetListener) getActivity();

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), timeSetListener, hour, minute, false);
    }
} 
```

在我的 MainActivity 中：

```
package com.calls.only;
import java.util.Calendar;
import java.util.TimeZone;
import android.os.Bundle;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.DialogFragment;
import android.view.Menu;
import android.view.View;
import android.widget.RadioButton;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements TimePickerDialog.OnTimeSetListener {

    public void InputStartTime(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getSupportFragmentManager(), "timePicker");
    }

    public void InputEndTime(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getSupportFragmentManager(), "timePicker");
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            Log.i("TimePicker", "Time picker set!");
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

关于如何实现两个时间选择器并通过在上面的代码中添加一些东西来区分它们的输入的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T11:42:04.700

我刚刚实施了一个类似的项目。我使用了一个内部 DialogFragment 来显示 DatePickerDialog 和一个标志来检测单击了哪个 EditText。[您可以在我的 github](https://github.com/ishitcno1/AndroidSamples/tree/master/DatePicker)
上获取示例

MainActivity.java

```
public class MainActivity extends ActionBarActivity implements View.OnClickListener {
private EditText mStartTime;
private EditText mEndTime;

private DatePickerDialogFragment mDatePickerDialogFragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mStartTime = (EditText) findViewById(R.id.start_date);
    mEndTime = (EditText) findViewById(R.id.end_date);
    mDatePickerDialogFragment = new DatePickerDialogFragment();

    mStartTime.setOnClickListener(this);
    mEndTime.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    int id = v.getId();
    if (id == R.id.start_date) {
        mDatePickerDialogFragment.setFlag(DatePickerDialogFragment.FLAG_START_DATE);
        mDatePickerDialogFragment.show(getSupportFragmentManager(), "datePicker");
    } else if (id == R.id.end_date) {
        mDatePickerDialogFragment.setFlag(DatePickerDialogFragment.FLAG_END_DATE);
        mDatePickerDialogFragment.show(getSupportFragmentManager(), "datePicker");
    }
}

public class DatePickerDialogFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {
    public static final int FLAG_START_DATE = 0;
    public static final int FLAG_END_DATE = 1;

    private int flag = 0;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Calendar calendar = Calendar.getInstance();
        int year = calendar.get(Calendar.YEAR);
        int month = calendar.get(Calendar.MONTH);
        int day = calendar.get(Calendar.DAY_OF_MONTH);

        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void setFlag(int i) {
        flag = i;
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(year, monthOfYear, dayOfMonth);
        SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
        if (flag == FLAG_START_DATE) {
            mStartTime.setText(format.format(calendar.getTime()));
        } else if (flag == FLAG_END_DATE) {
            mEndTime.setText(format.format(calendar.getTime()));
        }
    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:paddingBottom="@dimen/activity_vertical_margin"
tools:context="com.edinstudio.app.samples.datepicker.MainActivity">

<EditText
    android:id="@+id/start_date"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:hint="Please pick a date" />

<EditText
    android:id="@+id/end_date"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/start_date"
    android:focusable="false"
    android:hint="Please pick a date" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:30:25.860

与其`TimePickerDialog.OnTimeSetListener`在 Activity 中实现，不如将其提供给构造函数中的片段。这样每个实例都可以做不同的事情。

所以你会像这样使用它：

```
 frag1 = new TimePickerFragment(new TimePickerDialog.OnTimeSetListener() { /* Your implementation*/ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:36:25.437

## 使用时间选择器显示editText的onClick（）对话框的活动

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if ((v.getId() == R.id.edtTime)) {

        final Dialog dialog = new Dialog(AddTimeActivity.this);
        dialog.setContentView(R.layout.add_time_dialog);
        Button mSave = (Button) dialog.findViewById(R.id.btnSave);
        mSave.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                TimePicker timePicker = (TimePicker) dialog
                        .findViewById(R.id.timePicker1);
                timePicker.clearFocus();
                hourSelect = timePicker.getCurrentHour();
                minuteSelect = timePicker.getCurrentMinute();

                if (hourSelect == 0) {
                    tt = "AM";
                    hourSelect = 12;
                } else if (hourSelect > 0 && hourSelect < 12) {
                    tt = "AM";
                } else if (hourSelect == 12) {
                    tt = "PM";
                } else {
                    tt = "PM";
                    hourSelect = hourSelect - 12;
                }
                timeSelect = hourSelect;
                edtTime.setText(new         StringBuilder().append(timeSelect)
                          .append(":").append(pad(minuteSelect)).append(tt));
                dialog.dismiss();

            }
        });
        dialog.show();
    } 
```

## add_time_dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Select Time" />

<TimePicker
    android:id="@+id/timePicker1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" />

<Button
    android:id="@+id/btnSave"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:text=" Save " />

</LinearLayout> 
```

# sql-server - ms sql 中的分页

> ID：15934604
> 
> 赞同：0
> 
> 时间：2013-04-10T19:22:30.470
> 
> 标签：sql-server, tsql, paging

我有这个代码

```
ALTER PROCEDURE [dbo].[Model_Core_BlogPost_GetLatestPaging] 
@PageSize INT,
@CurrentPage INT
AS
BEGIN

DECLARE @PageStart int, @PageEnd int
SET @PageStart = @CurrentPage * @PageSize
set @PageEnd = @PageStart + @PageSize

;with C as (

SELECT
e.blogpostid, 
e.PreviewText, 
e.Headline, 
e.URLHeadline, 
u.Blogname, 
u.imageurl AS ImageURL, 
e.CommentsCount, 
e.HitsCount, 
e.Created, 
ROW_NUMBER() over (order by e.created desc) as rownum

FROM BlogPosts e
INNER JOIN Users u ON e.BlogUserID = u.UserID
WHERE e.[Status] = 1 and e.Deleteddate is null
)

SELECT *
FROM C
WHERE rownum > @pagestart
AND rownum <= @pageend

END 
```

当@CurrentPage 很大并且我经常在我的应用程序中遇到 sql 超时时，我会遇到问题。

任何解决方案的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:14:58.113

只要索引到位，我建议将此查询分成 2 个单独的查询。

首先运行排名功能并过滤博客文章，将结果插入临时表，然后可能通过使用选项循环连接将临时表与用户连接（临时表与用户相比将具有非常少的行，循环连接非常适合这个情况）。

这样，您的连接将有更少的行来解析。另外，您确定 blogposts.created 列有索引吗？Row_number 将对该字段执行排序。

# javascript - 链接地址的加密 问问题

> ID：15934605
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：javascript, asp.net, html, hyperlink, security

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T20:12:01.160

你不能。告诉高级管理人员不要这么保密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:15:18.620

首先，从浏览器中隐藏 url 是不可能的。浏览器必须从服务器请求网页，即使 url 以某种方式被隐藏，它也必须是 HTTP 请求中的纯文本，这将打开它到像 Fiddler 这样的中间人实用程序。

其次，这感觉像是通过默默无闻的安全感。某些人不应该访问的资源应该被明确锁定，而不仅仅是因为用户不知道 url（还）而隐藏。

但是，纯粹作为一种思考练习......我想......你可以编写一个知道真实 url 的处理程序，使用代码来检索页面的内容，然后将其写入响应。所以用户会看到处理程序的 url，但看不到处理程序从哪里提取数据。但是，您必须竭尽全力在页面上查找所有链接和资源，并将这些引用转换为也通过您的处理程序。

当然，实际上，我认为这个概念是愚蠢的。您的高级管理人员正试图解决一些问题，而对用户隐藏 url 并不是解决办法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:28:02.993

不确定这是否是您想要的，但这里有一个类似的问题：

[php加密解密](https://stackoverflow.com/questions/2347802/php-encrypt-and-decrypt)

它有帮助吗？还有一个，但它是一个php代码：

[http://php.net/manual/en/function.mcrypt-encrypt.php](http://php.net/manual/en/function.mcrypt-encrypt.php)

另外，您希望用什么语言来实现代码？

或者，您可以使用此站点：[http](http://www.iwebtool.com/html_encrypter) ://www.iwebtool.com/html_encrypter并在框中键入您的 html，例如

```
 <a href="https://stackoverflow.com/posts/5934696"> This is your post link</a> 
```

然后使用“加密”按钮。它将返回您正在寻找的 javascript。

例如

```
 "<"Script Language='Javascript'>
         document.write(unescape('%3C%61%20%68%72%65%66%
         3D%22%68%74%74%70%3A%2F%2F%73%74%61%63%6B%6F%76%65%72%66%6C%
         6F%77%2E%63%6F%6D%2F%70%6F%73%74%73%2F%31%35%39%33%34%36%39%
         36%22%3E%54%68%69%73%20%69%73%20%79%
         6F%75%72%20%70%6F%73%74%3C%2F%61%3E'));
     </Script> 
```

没有 jsFiddle，因为不允许使用 javascript。![你的例子](https://content.screencast.com/users/MeeVanMatterhorn/folders/Jing/media/8cfe71a7-52cf-48b2-9c7e-5ab826fb1599/jsFiddle_not.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T21:26:47.573

如果高层管理人员如此保密，那么可以肯定的是，您也已经有 IT 人员也锁定了浏览器，即 Internet Explorer。您的 IT 团队可能会强制隐藏公司内所有浏览器的地址栏。我不认为这可以根据每个请求来完成。这意味着地址栏将一直打开或关闭。

根据[这篇文章](http://forums.techguy.org/7435387-post3.html)，您的 IT 团队可能能够更新注册表以隐藏地址栏，如下所示：

```
Run following RegKey:

Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Internet Explorer\ToolBars]

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Internet Explorer\ToolBars\Restrictions]
"NoNavBar"=dword:00000001 
```

这是一个[谷歌搜索](https://www.google.com/search?q=it%20hide%20address%20bar%20in%20IE&oq=it%20hide%20address%20bar%20in%20IE&aqs=chrome.0.57j62l3.11093j0&sourceid=chrome&ie=UTF-8#q=it%20hide%20address%20bar%20in%20IE&hl=en&safe=off&source=lnt&tbs=qdr%3ay&sa=X&ei=LdhlUcHmKqT-0gGslIGgBA&ved=0CB8QpwUoBQ&bav=on.2,or.r_cp.r_qf.&bvm=bv.44990110,d.dmQ&fp=9bf500b58936b040&biw=1023&bih=1059)，它也可能提供更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-08T11:12:42.630

好吧，与其让它消失，不如让其他人很难看穿，甚至对那些不了解 base-64 的人来说也是不可能的。这是一个代码：

```
 var a = document.querySelectorAll("*"), b = 0;
   for ( b = 0; b < a.length; b ++ ) {
     if ( a[b].hasAttribute("data-href") ) {
       a[b].href = atob( a[b].getAttribute("data-href") );
     };
   }; 
```

现在你可以这样称呼：

```
 <a data-href="aHR0cDovL3d3dy5teWNvbXBhbnkuY29t">Go</a> 
```

通过使用 btoa() 我将“http://www.mycompany.com”转换为 base-64 格式的“aHR0cDovL3d3dy5teWNvbXBhbnkuY29t”，并设计了“data-href”来理解编码。在这一切背后，它的外观和行为如下：

```
<a href="http://www.mycompany.com">Go</a> 
```

# c# - ServiceStack/Razor - 如何使用外部 MVC 控件（DevExpress）

> ID：15934608
> 
> 赞同：1
> 
> 时间：2013-04-10T19:23:00.100
> 
> 标签：c#, asp.net-mvc, razor, devexpress, servicestack

作为基础，我正在使用本教程：[http ://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html](http://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html)

所以，我的项目运行良好，我有一些 cshtml，它们正在正确编译和显示。但我需要一些更复杂的功能，我不想从头开始写。相反，我想使用 devexpress mvc 控件，这就是我的问题开始的地方。

有 devexpress mvc 示例，使用标准 Microsoft MVC 非常简单：http: [//www.devexpress.com/Support/Center/e/E3326.aspx](http://www.devexpress.com/Support/Center/e/E3326.aspx)

出于测试/学习目的，我想在如上所述创建的自托管 ServiceStack 项目中使用相同的控件并获得相同的效果。不幸的是，我什至不知道从哪里开始，因为我的项目结构有点（或甚至更轻微）不同。

您能否查看该 devexpress 示例并为我提供一些提示，我应该如何将外部 devexpress 控件嵌入到我的项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:12:26.057

有几件事我会调查。

*   一个简单的控件可以在 ServiceStack.Razor 中编译吗？
*   你能把一个简单的控件绑定到一个模型上吗？

快速查看代码似乎可能会导致问题：

*   GridViewPartial.cs
    *   settings.CallbackRouteValues = new { Controller = "Home", Action = "GridViewPartial" }; - 我的问题是如何创建 ServiceStack url 并返回必要的“部分/html”响应。

# c - 在 kernel_fpu_end 之前调用 kernel_fpu_begin 两次

> ID：15934615
> 
> 赞同：2
> 
> 时间：2013-04-10T19:22:14.233
> 
> 标签：c, linux, linux-kernel, linux-device-driver, kernel-module

我正在使用[asm/i387.h](http://lxr.free-electrons.com/source/arch/x86/include/asm/i387.h?v=3.2#L310)`kernel_fpu_begin`中的and`kernel_fpu_end`函数来保护 FPU 寄存器状态，以便在 Linux 内核模块中进行一些简单的浮点运算。

我很好奇在`kernel_fpu_begin`函数之前调用函数两次的行为，`kernel_fpu_end`反之亦然。例如：

```
#include <asm/i387.h>

double foo(unsigned num){
    kernel_fpu_begin();

    double x = 3.14;
    x += num;

    kernel_fpu_end();

    return x;
}

...

kernel_fpu_begin();

double y = 1.23;
unsigned z = 42;
y -= foo(z);

kernel_fpu_end(); 
```

在`foo`函数中，我调用`kernel_fpu_begin`and `kernel_fpu_end`; 但`kernel_fpu_begin`在调用 to 之前已经被调用过`foo`。这会导致未定义的行为吗？

此外，我什至应该在函数`kernel_fpu_end`内部调用吗？调用后`foo`我返回一个**double**`kernel_fpu_end`，这意味着访问浮点寄存器是不安全的，对吗？

我最初的猜测是不要在函数内部使用`kernel_fpu_begin`and`kernel_fpu_end`调用`foo`；但是如果`foo`将**双重**强制转换返回为**unsigned**会怎样——程序员不知道在之外使用`kernel_fpu_begin`和？`kernel_fpu_end``foo`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T19:09:00.730

Short answer: no, it is incorrect to nest `kernel_fpu_begin()` calls, and it will lead to the userspace FPU state getting corrupted.

Medium answer: This won't work because `kernel_fpu_begin()` use the current thread's `struct task_struct` to save off the FPU state (`task_struct` has an architecture-dependent member `thread`, and on x86, `thread.fpu` holds the thread's FPU state), and doing a second `kernel_fpu_begin()` will overwrite the original saved state. Then doing `kernel_fpu_end()` will end up restoring the wrong FPU state.

Long answer: As you saw looking at the actual implementation in `<asm/i387.h>`, the details are a bit tricky. In older kernels (like the 3.2 source you looked at), the FPU handling is always "lazy" -- the kernel wants to avoid the overhead of reloading the FPU until it really needs it, because the thread might run and be scheduled out again without ever actually using the FPU or needing its FPU state. So `kernel_fpu_end()` just sets the TS flag, which causes the next access of the FPU to trap and cause the FPU state to be reloaded. The hope is that we don't actually use the FPU enough of the time for this to be cheaper overall.

However, if you look at newer kernels (3.7 or newer, I believe), you'll see that there is actually a second code path for all of this -- "eager" FPU. This is because newer CPUs have the "optimized" XSAVEOPT instruction, and newer userspace uses the FPU more often (for SSE in memcpy, etc). The cost of XSAVEOPT / XRSTOR is less and the chance of the lazy optimization actually avoiding an FPU reload is less too, so with a new kernel on a new CPU, `kernel_fpu_end()` just goes ahead and restores the FPU state. (

However in both the "lazy" and "eager" FPU modes, there is still only one slot in the `task_struct` to save the FPU state, so nesting `kernel_fpu_begin()` will end up corrupting userspace's FPU state.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:02:15.627

我正在用我理解的正在发生的事情来评论[asm/i387.h Linux 源代码（版本 3.2）。](http://lxr.free-electrons.com/source/arch/x86/include/asm/i387.h?v=3.2#L310)

```
static inline void kernel_fpu_begin(void)
{
        /* get thread_info structure for current thread */
        struct thread_info *me = current_thread_info();

        /* preempt_count is incremented by 1
         * (preempt_count > 0 disables preemption,
         *  while preempt_count < 0 signifies a bug) */
        preempt_disable();

        /* check if FPU has been used before by this thread */
        if (me->status & TS_USEDFPU)
                /* save the FPU state to prevent clobbering of
                 * FPU registers, then reset the TS_USEDFPU flag */
                __save_init_fpu(me->task);
        else
                /* clear the CR0.TS bit to prevent
                 * unnecessary FPU task context saving */
                clts();
}

static inline void kernel_fpu_end(void)
{
        /* set CR0.TS bit (signifying the processor switched
         * to a new task) to enable FPU task context saving */
        stts();

        /* attempt to re-enable preemption
         * (preempt_count is decremented by 1);
         * reschedule thread if needed
         * (thread will not be preempted if preempt_count != 0) */
        preempt_enable();
} 
```

The `FXSAVE` instruction is typically used to save the FPU state. However, I believe the memory destination stays the same every time `kernel_fpu_begin` is called within the same thread; unfortunately that would mean that `FXSAVE` will overwrite the previously saved FPU state.

Therefore I suspect that you **CANNOT** safely nest `kernel_fpu_begin` calls.

What I still cannot understand though is how the FPU state is being restored, since the `kernel_fpu_end` call does not appear to execute a `FXRSTOR` instruction. Also, why is the `CR0.TS` bit set in the `kernel_fpu_end` call if we are no longer using the FPU?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T06:47:32.513

是的，正如您定义的一些双变量 &`foo`也返回双值；您还必须在外面使用`kernel_fpu_begin`和`kernel_fpu_end`打电话`foo` [。](http://lists.kernelnewbies.org/pipermail/kernelnewbies/2012-November/006462.html)

* * *

[类似的问题](http://www.serverphorums.com/read.php?12,409657)也有这种情况，在某些情况下您可以在不使用 `kernel_fpu_begin`和`kernel_fpu_end`调用的情况下进行编码。

# jquery - PhoneGap Android：$.getJSON("http://foo.com") 不工作（访问权限？）

> ID：15934618
> 
> 赞同：0
> 
> 时间：2013-04-10T19:22:24.100
> 
> 标签：jquery, json, cordova, getjson

使用 Cordova-2.5.0 + jQuery 1.9.1，我正在尝试访问远程 JSON 文件。

```
$(document).ready(function() {
        $.getJSON("http://sub.foo.com/json.php",function(data) { 
```

它在我的 Chrome 浏览器上可以正常工作，但在我的 Android 模拟器上却不行（它在尝试访问远程 JSON 文件时停止）。

我确实在“AndroidManifest.xml”上设置了权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

并在“config.xml”上

```
<access origin="http://sub.foo.com" /> 
```

我究竟做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:32:15.900

我不知道答案，但我有一个调试提示；Weinre [http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

# css - 照片不会水平显示？

> ID：15934628
> 
> 赞同：-1
> 
> 时间：2013-04-10T19:23:12.427
> 
> 标签：css

我正在尝试获取即时回显的图像以显示内联块/水平，但无论我做什么，它们都只是向下/垂直列出。我怎样才能解决这个问题？

这是我的代码：

```
<div class="profile_photos_area">
    <?php
    $dirname = "./data/photos/".$profile_id."/";
    $images = scandir($dirname);
    $ignore = Array("_cover.jpg", "_default.jpg");
    foreach($images as $curimg){
    if(!in_array($curimg, $ignore) && preg_match("/\.jpg$/i", $curimg)) {
    echo "<img src='".$dirname.$curimg."' class=\"profile_photos\"><br>\n";
    };
    }     
    ?>
</div>

.profile_photos{
    margin-top:0px;
    border:#ccc 1px solid;
    width: 170px;
    height: 150px;
    display:inline-block;
    position:relative;

}

.profile_photos_area{
    width:665px;
    height:350px;
    background:#000;
    margin-left:-193px;
    display:inline-block;
    overflow:hidden;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:17:36.490

你看过你的代码生成的 html 吗？看星号：

```
echo "<img src='".$dirname.$curimg."' class=\"profile_photos\">******<br>******\n"; 
```

br。**br**！

它*是*html，它的意思是……**断线**！只需删除它。

[演示](http://jsfiddle.net/wcVRy/)

# javascript - html5画布描边为清晰的线条

> ID：15934633
> 
> 赞同：0
> 
> 时间：2013-04-10T19:23:40.933
> 
> 标签：javascript, html, canvas

我目前有以下内容：

```
 ctx.save();
  ctx.translate(459,258);
  ctx.rotate(sec * Math.PI/36);
  ctx.lineWidth = 10;
  ctx.beginPath();
  ctx.moveTo(135,0);
  ctx.lineTo(210,0);
  ctx.strokeStyle = 'rgba(0,153,255)';
  ctx.stroke();
  ctx.restore(); 
```

画一圈线（笔画）。我想把它转换成一个`clearRect`，而不是画这个圆圈，我希望它擦除一个相同形状的圆圈......我该怎么做？

我试过这样做，但没有奏效：

```
 ctx.save();
  ctx.translate(459,258);
  ctx.rotate(sec * Math.PI/36);
  ctx.lineWidth = 10;
  ctx.beginPath();
  ctx.moveTo(135,0);
  ctx.lineTo(210,0);

  ctx.clear();
  ctx.restore(); 
```

谢谢。

# ruby-on-rails - 使用 Acts-as-taggable-on 通过 Javascript 在 Rails 中提交 Select2 表单

> ID：15934634
> 
> 赞同：3
> 
> 时间：2013-04-10T19:24:41.673
> 
> 标签：ruby-on-rails, simple-form, acts-as-taggable-on, jquery-select2

当访问页面的用户是所有者时，我在页面上显示了一个标签列表。我希望这个人能够直接在页面上将标签调整为照片。添加标签后，它将根据照片更新 Acts-as-taggable on 字段。我真的很接近让一切正常工作，唯一无法成功的是远程保存此数据（当我向页面添加提交按钮并单击此按钮时它可以工作。）

Gems：（我手动添加了 Select2 的脚本）

```
gem 'simple_form'
gem 'acts-as-taggable-on' 
```

我的表格：

```
<%= simple_form_for [@mountain, @photo], remote: true do |f| %>
    <%= f.input :tag_list, label: false, :input_html => {class: 'select2-container select2-container-multi', style: 'width:100%'}  %>
    <%= f.submit "Update tags" %>
<% end %> 
```

我的愿望是删除此表单中的提交按钮。

这是将表单呈现为带有标签的 Select2 表单的脚本：

```
<script type="text/javascript">
    $("#photo_tag_list").select2({tags:[], width: 'resolve', placeholder: "Add photo tags" });
    $("#photo_tag_list").on("change", function() { 
        $("#photo_tag_list_val").html($("#photo_tag_list").val());
    });

    $("#photo_tag_list").select2("container").find("ul.select2-choices").sortable({
    containment: 'parent',
    start: function() { $("#photo_tag_list").select2("onSortStart"); },
    update: function() { $("#photo_tag_list").select2("onSortEnd"); }
    });
</script> 
```

我在 chrome 控制台的帮助下尝试了以下操作来尝试提交表单：1）向标签列表添加一个值，2）转到控制台并运行 $("#photo_tag_list").submit();。我收到以下消息，其中我添加的值不在 value="" 内。

```
<input class=​"string optional select2-container select2-container-multi" id=​"photo_tag_list" name=​"photo[tag_list]​" size=​"50" style=​"width:​ 100%;​ display:​ none;​" type=​"text" value=​"description_blank, pack, champions">​ 
```

在此先感谢您的帮助！请让我知道查看更多代码是否有帮助。

# c++ - OpenGL顶点阵列球体C的问题

> ID：15934637
> 
> 赞同：3
> 
> 时间：2013-04-10T19:23:48.777
> 
> 标签：c++, opengl

这是问题的图片：

![在此处输入图像描述](https://i.stack.imgur.com/Di13k.png)

这是线框：

![线框](https://i.stack.imgur.com/siS8j.png)

正如您从上面的图片中看到的那样，我有一些奇怪的图形问题并且不知道如何修复，我认为代码有问题，尽管没有其他人遇到过代码问题。

代码：

```
 unsigned int rings = 12, sectors = 24;

    float const R = 1./(float)(rings-1);
    float const S = 1./(float)(sectors-1);
    int r, s;

    vertices.resize(rings * sectors * 3);
    normals.resize(rings * sectors * 3);
    texcoords.resize(rings * sectors * 2);
    std::vector<GLfloat>::iterator v = vertices.begin();
    std::vector<GLfloat>::iterator n = normals.begin();
    std::vector<GLfloat>::iterator t = texcoords.begin();
    for(r = 0; r < rings; r++) for(s = 0; s < sectors; s++) {
            float const y = sin( -M_PI_2 + M_PI * r * R );
            float const x = cos(2*M_PI * s * S) * sin( M_PI * r * R );
            float const z = sin(2*M_PI * s * S) * sin( M_PI * r * R );

            *t++ = s*S;
            *t++ = r*R;

            *v++ = x * getR();
            *v++ = y * getR();
            *v++ = z * getR();

            *n++ = x;
            *n++ = y;
            *n++ = z;
    }

    indices.resize(rings * sectors * 4);
    std:vector<GLushort>::iterator i = indices.begin();
    for(r = 0; r < rings; r++) for(s = 0; s < sectors; s++) {
            *i++ = r * sectors + s;
            *i++ = r * sectors + (s+1);
            *i++ = (r+1) * sectors + (s+1);
            *i++ = (r+1) * sectors + s;
    }

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glVertexPointer(3, GL_FLOAT, 0, vertices.data());
    glNormalPointer(GL_FLOAT, 0, normals.data());
    glTexCoordPointer(2, GL_FLOAT, 0, texcoords.data());
    glDrawElements(GL_QUADS, indices.size(), GL_UNSIGNED_SHORT, indices.data()); 
```

代码取自（[使用 Visual C++ 在 Opengl 中创建 3D 球体](https://stackoverflow.com/questions/5988686/how-do-i-create-a-3d-sphere-in-opengl-using-visual-c/5989676#5989676)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:55:12.403

索引将以顶点之外的索引结束。索引中的最后四个值将是：

```
*i++ = 11 * 24 + 23 = 287;
*i++ = 11 * 24 + (23 + 1) = 288;
*i++ = (11 + 1) * 24 + (23 + 1) = 312;
*i++ = (11 + 1) * 24 + 23 = 311; 
```

但 vertices 只包含 288 个顶点。我假设它对其他人有效的原因是 glDrawElements 可能会在某些实现中包装索引。

# javascript - 字符串在源代码中换行，而不是在浏览器中

> ID：15934641
> 
> 赞同：1
> 
> 时间：2013-04-10T19:25:07.983
> 
> 标签：javascript, line, break

我正在做一个学校项目，我必须从 Twitter 中提取推文到我的数据库中，然后用 JavaScript 分析它们。现在我在将它们放入 JS 数组时遇到了以下问题。

我的数据库的第 20 个结果似乎换成了新的一行。如果我跳过它，它可以正常工作，但是一旦添加它。它将进入一个新的行。我已经在不同的文件中分别回显了这条特定的推文。网页上的输出如下：

```
@HARDWELL Awesome!! Happy Friday :) http://t.co/uLbm9QvNUM 
```

当我按 CTRL+U 时，源代码如下所示：

```
@HARDWELL Awesome!! Happy Friday :)
http://t.co/uLbm9QvNUM 
```

据说这会破坏我的新 Array () 代码，因为 javascript 突然进入新行，因此停止在数组上继续。

我尝试了转义、htmlspecialchars 和所有其他代码，但似乎没有任何效果。

什么代码使我能够删除这些随机换行符，有 nu /n 或 /r 或任何..

这就是我的数组的样子：

```
var tweetArray = new Array("@HARDWELL great night. Love to do it again http://t.co/j4dtyTQDt8", "i think @HARDWELL is going to be one of the most influential people in the 2010's &amp;amp;amp; 2020's!!!", "@HARDWELL is amazing!!", "dying to hear how @HARDWELL felt behind the DJ both at @ultramusic?people fordayzzz there to watch you kill it #missionaccomplished", "@HARDWELL @DyroMusic @RevealedRec #revealedcontest http://t.co/yAW4bEaGKA", "@HARDWELL PLEASE NOTICE ME I LOVE YU SO FUCKING MUCH COME TO VENEZUELA NOTICE ME PLEAAAAASR YOU ARE MY IDOL", "RT @BigNoseFaggot: @HARDWELL @DyroMusic @RevealedRec #revealedcontest http://t.co/zOc6WLGiRd", "Listening to @HARDWELL tomorrowland set got me buzzzzzzing! Going next year ðŸ’¯", "RT @HARDWELL: We're the lucky ones...", "@HARDWELL @DyroMusic @RevealedRec #revealedcontest http://t.co/zOc6WLGiRd", "#nowwatching @HARDWELL LIVE AT Miami UMF 2013", "A new favorite: Hardwell - Spaceman Naffz Remix [OUT NOW] by @hardwell http://t.co/fkzRC4XSdN on #SoundCloud", "@WetRepublic in #April with @CalvinHarris @nervomusic @HARDWELL @deadmau5 &amp;amp;amp; @steveaoki http://t.co/MxWSzw3O1s", "#NP @HARDWELL Forever in my mind #ultramusic", "@DANNICdj @revealedrec @HARDWELL HUGE track, heard it at UMF! #RevealedBombFactory", "RT @HARDWELL: The soundtrack of your nightlife!", "@HARDWELL follow me!!!", "@HARDWELL great!!! http://t.co/g86s9DJFLK", "RT @Est_C: Never too early for a @HARDWELL podcast #Armin #ThisIsWhatItFeelsLike", "@hardwell @avicii @kaskade 1 2 3 sets of ultra", "@HARDWELL Awesome!! Happy Friday :
http://t.co/uLbm9QvNUM"); 
```

最后一部分不在同一行，导致我的代码中断。

谷歌关闭错误：

JSC_PARSE_ERROR：解析错误。第 3 行字符 1530 处的未终止字符串文字 ...l @avicii @kaskade 1 2 3 套超”，“@HARDWELL 太棒了！！星期五快乐 :) ^ JSC_PARSE_ERROR：解析错误。缺少 ) 在第 4 行字符 0 [http://t.co/uLbm9QvNUM](http://t.co/uLbm9QvNUM) ") 的参数列表后； ^ JSC_PARSE_ERROR：解析错误。第 4 行字符 4 的语法错误 [http://t.co/uLbm9QvNUM](http://t.co/uLbm9QvNUM) "); ^

* * *

到目前为止，我发现，当我手动在 ) 和 h （换行符的位置）之间放置一个退格键时，它解决了这个特定行的问题。似乎 twitter API 拯救了那些在推文中添加“新行”的人。我认为这就是原因，但他们怎么可能看不见我的问题呢？有谁知道我如何从 php 字符串中删除“输入”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:12:28.287

我认为快乐脸上的 ) 正在关闭数组并创建新行。

# jquery - 不工作

> ID：15934645
> 
> 赞同：0
> 
> 时间：2013-04-10T19:25:22.383
> 
> 标签：jquery, html, button

我正在尝试创建一个指向另一个页面的按钮。这是HTML：

```
<div class="new_user"> 
<button id="buton_user_nou">Creaza User
</button>
</div> 
```

和 jQuery：

```
$('#buton_user_nou').click(function(){
location.href='/register.htm'
}) 
```

在所有浏览器中，该按钮完全处于非活动状态。悬停时它甚至没有突出显示...请指点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:57:14.847

尝试..

```
$(window).load(function(){
  $("#buton_user_nou").click(function() {
    location.href='/register.htm';
  });
}); 
```

这样它将在文档之前加载:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:31:22.167

您缺少 zemi 冒号，还建议将事件注册码放入准备好的文档中。这将确保在添加事件时存在 dom 元素。

```
$(document).ready(function() {
    $("#buton_user_nou").click(function() {
        location.href='/register.htm';
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:33:03.157

我不知道你把你​​的脚本放在哪里，但问题可能是脚本在 DOM 完成加载之前被执行，所以没有 jQuery 可以找到的按钮。

正如 adeneo 指出的那样，只需将代码包装在文档就绪函数中：

```
$(document).ready(function() {
  $('#buton_user_nou').click(function() {
    location.href='/register.htm'
  });
}); 
```

# php - 用变量更新mysql字段不起作用

> ID：15934648
> 
> 赞同：0
> 
> 时间：2013-04-10T19:25:29.363
> 
> 标签：php, mysql, string, feed, concat

所以我使用 CONCAT 将 2 个字符串组合在一起，并希望通过在现有字符串的末尾添加一个新字符串来更新我的数据库中的 TEXT 字段。

```
// This code works great. will add "EXTRA" at end of the feed.
$insert = ("update $username set feed = CONCAT(feed, 'EXTRA')");
mysql_query($insert);

// This code doesn't work. not sure what to change in the variable area?
$extra = "EXTRA";
$insert = ("update $username set feed = CONCAT(feed, '$extra')");
mysql_query($insert); 
```

我尝试了变量声明的许多变体，但是当我只写一个字符串时，似乎无法让它像我一样工作。任何帮助或见解表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:28:36.707

我认为你在这里混淆了你的 SQL：

```
"update $username set feed = CONCAT(feed, 'EXTRA')" 
```

`$username`=**表名**??

看起来你可能想要更新一个字段，它等于某个字段`$username`：

```
"update TABLENAME set feed = CONCAT(feed, '$extra') WHERE username = '$username'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:29:47.467

查看示例查询：

```
UPDATE table_name SET field1 = CONCAT(field1, "new data" ) WHERE field2 = value; 
```

并根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:33:46.010

要在提要末尾添加“EXTRA”一词，我认为您需要执行以下操作：

```
$insert = ("update $username set feed = CONCAT(feed, '" . $extra . "')"); 
```

# java - 使用 APACHE POI XSSF 添加链接文件不接受目录地址并显示 java.net.URISyntaxException

> ID：15934650
> 
> 赞同：0
> 
> 时间：2013-04-10T19:25:35.283
> 
> 标签：java, selenium, apache-poi, xssf, hssf

我正在尝试在任何 .xlsx 文件的单元格内容中超链接 .png 文件。以下是代码的一部分，它显示 java.net.URISyntaxException 异常（似乎是因为地址中使用了斜杠）。但是更改 link.setAddress("test.png") 没有显示任何错误，但它并没有解决我的目的。请帮我。

```
 public static void main(String[]args) throws Exception{
       XSSFWorkbook wb = new XSSFWorkbook();
       CreationHelper createHelper = wb.getCreationHelper();
       CellStyle hlink_style = wb.createCellStyle();
       Font hlink_font = wb.createFont();
       hlink_font.setUnderline(Font.U_SINGLE);
       hlink_font.setColor(IndexedColors.BLUE.getIndex());
       hlink_style.setFont(hlink_font);
       XSSFSheet sheet = wb.createSheet("Hyperlinks");
        XSSFCell cell = sheet.createRow(1).createCell((short)0);
       cell.setCellValue("File Link");
       Hyperlink link = createHelper.createHyperlink(Hyperlink.LINK_FILE);
       link.setAddress("H:\\Selenium\\XL\\src\\santosh\\xlwork\\test.png");
       cell.setHyperlink(link);
       cell.setCellStyle(hlink_style);
       FileOutputStream out = new FileOutputStream("hyperlinks.xlsx");
       wb.write(out);
       out.close();
    } 
```

最终我需要做的是将屏幕截图与任何单元格超链接。屏幕截图目录将位于 Eclipse 工作区以外的任何位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T18:29:18.917

最后我做到了......感谢Gagravarr......给了我一个好主意。

```
boolean isDirCreated = false;//to create Screenshot directory just once

//Create Screenshot Directory.
public static void createDir(String ScreenshotDirAddress){
    if(!isDirCreated){
       File file= new File(ScreenshotDirAddress);
       if (!file.exists())
            file.mkdirs();
    isDirCreated=true;
    }
}

//hyperlink screenshot
public static void hyperlinkScreenshot(XSSFCell cell, String FileAddress){
    XSSFWorkbook wb=cell.getRow().getSheet().getWorkbook();
    CreationHelper createHelper = wb.getCreationHelper();
    CellStyle hlink_style = wb.createCellStyle();
    Font hlink_font = wb.createFont();
    hlink_font.setUnderline(Font.U_SINGLE);
    hlink_font.setColor(IndexedColors.BLUE.getIndex());
    hlink_style.setFont(hlink_font);
    Hyperlink hp = createHelper.createHyperlink(Hyperlink.LINK_FILE);
    FileAddress=FileAddress.replace("\\", "/");
    hp.setAddress(FileAddress);
    cell.setHyperlink(hp);
    cell.setCellStyle(hlink_style);
}

//take screenshot
public static void takeScreenShot(WebDriver driver, String screenshotName, XSSFCell cell){
    createDir();
    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    try {
        String FullAddress=System.getProperty("user.dir")+"/"+ScreenshotDirAddress+"/"+screenshotName+".png";
        FileUtils.copyFile(scrFile, new File(FullAddress));
        hyperlinkScreenshot(cell, FullAddress);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我遇到的主要问题与 URL 有关。如果我使用“\”，则显示非法ArgumentException，而用“/”替换它可以正常工作。我不知道确切的原因，但如果

```
 FileAddress=FileAddress.replace("\\", "/"); 
```

被评论...它显示非法参数异常。所以如果网址是

***D:\eclipse\workspace\TestApp\Screenshot\TestResult\Test.png***

将显示非法ArgumentException。但是，如果将“\”替换为“/”以使其成为 ***D:/eclipse/workspace/TestApp/Scr​​eenshot/TestResult/Test.png***

它工作正常。URL 都是正确的，并且在浏览器中打开同一个文件，甚至在 excel 文件中手动使用超链接同一个文件，它工作正常。我不知道为什么它在 Apache POI 中显示异常，可能是一个可能的错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-19T11:45:02.093

```
public static String takeScreenShot(XSSFRow wrow, XSSFCell cell,String fileName)
    {
        try {

            DateTimeFormatter dtf = DateTimeFormatter.ofPattern("HH:mm:ss");
            LocalDateTime now = LocalDateTime.now();    
            fileName = fileName + dtf.format(now);
            fileName=fileName.replace(":","");

            File src = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
            String screen_path;
            ReadConfigProperty file = new ReadConfigProperty();
            FileUtils.copyFile(src, new File("Screenshot\\" + fileName + ".jpg"));
            screen_path= file.reportFilePath() + fileName + ".jpg";

            screen_path= "file:///"+screen_path;

            cell = wrow.createCell(7);
            //cell.setCellValue(screen_path);

            XSSFWorkbook wb=cell.getRow().getSheet().getWorkbook();
            CreationHelper createHelper = wb.getCreationHelper();
            XSSFCellStyle hlink_style = wb.createCellStyle();
            XSSFFont hlink_font = wb.createFont();
            hlink_font.setUnderline(Font.U_SINGLE);
            hlink_font.setColor(IndexedColors.BLUE.getIndex());
            hlink_style.setFont(hlink_font);
            Hyperlink hp = createHelper.createHyperlink(Hyperlink.LINK_FILE);
            screen_path=screen_path.replace("\\", "/");
            hp.setAddress(screen_path);
            cell.setHyperlink((org.apache.poi.ss.usermodel.Hyperlink) hp);
            cell.setCellStyle(hlink_style);

            return screen_path;
        }catch (Exception e) {
            e.printStackTrace();
        }
        return fileName;

    } 
```

# ruby - 如何使用 Ruby aws/s3 Gem 生成安全 URL 以从 s3 下载文件

> ID：15934652
> 
> 赞同：5
> 
> 时间：2013-04-10T19:24:37.227
> 
> 标签：ruby, url, amazon-web-services, amazon-s3

我正在编写一个小脚本来定位 aws 存储桶中的特定文件，并创建一个临时经过身份验证的 url 以发送给同事。（理想情况下，这将创建类似于在控制台上右键单击存储桶中的文件并复制链接地址的结果）。

我研究了回形针，它似乎不符合这个标准，但是我无法意识到它的全部功能。

我尝试了以下方法：

> ```
> def authenticated_url(file_name, bucket)
>   AWS::S3::S3Object.url_for(file_name, bucket, :secure => true, :expires => 20*60)
> end 
> ```

产生了这种结果：

> ...-1.amazonaws.com/file_path/file.zip.AWSAccessKeyId={key}Expires=1200&Signature={...}

有没有办法创建一个更类似于上述场景的安全 url，可以简单地作为链接发送？如果没有，任何安全的替代方案都将受到欢迎。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T19:40:26.733

您需要一个称为“标记化链接”的东西。幸运的是，它内置在您正在使用的 aws-sdk gem 中。

这是您可以使用的解决方案的先前问题：

[如何在 S3 中存储数据并允许用户使用 rails API / iOS 客户端以安全的方式访问？](https://stackoverflow.com/questions/10811017/how-to-store-data-in-s3-and-allow-user-access-in-a-secure-way-with-rails-api-i)

然而，这是一个 Rails 解决方案，它有花哨的 Rails 时间助手，如`20.minutes.from_now`. 您可以通过将特定秒数添加到当前时间来将到期日期设置为特定日期`Time.now.to_i + (20 * 60)`，或者将 ActiveSupport 时间助手包含到您的 ruby​​ 脚本中`require 'active_support/core_ext/numeric/time'`。这将允许这些`20.minutes.from_now`东西工作。

此外，您将需要整个`aws-sdk`gem，而不仅仅是 S3 部分。

# php - Wordpress - 删除动态生成的样式表？

> ID：15934653
> 
> 赞同：0
> 
> 时间：2013-04-10T19:25:39.200
> 
> 标签：php, css, wordpress

我创建了一个 wordpress 站点，它有一个错误，其中“动态生成的样式表”创建了这种样式：

# 内容{宽度：0px;}

这会导致我的所有内容向左挤压。[http://wp.townsendsites.com](http://wp.townsendsites.com) 有没有办法摆脱这个，或者在 php 或 css 中覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:44:50.377

解决问题的一种更简洁的方法不是尝试覆盖样式；首先要弄清楚为什么会有这些风格。

我*快速*浏览了这个主题，我可以看到动态样式表正在根据主题设置生成它的样式；主题应该在管理区域中有一个额外的选项屏幕，您可以在其中输入自己的内容宽度。

如果您无法从 'functions.php' 中注释掉第 619 行，当前读取为“add_action('wp_enqueue_scripts', 'bitLumen_enqueue_dynamic', 10);” 那是加载动态样式表的那行

我建议您先尝试在管理区域中找到设置；用 !important 规则来暴力破解你的风格是没有意义的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:32:02.207

如果要覆盖无法覆盖的标记，请使用：`width: 80% !important;` 这不是最佳做法，但它有效。80% 就是一个例子。

# php - 将“id”分配给 mysql 行以与关联数组一起使用

> ID：15934655
> 
> 赞同：0
> 
> 时间：2013-04-10T19:25:57.973
> 
> 标签：php, mysql

我一直在为我的网站制作一个搜索系统，我希望它能够显示一些带有从 mysql 数据库中提取的数据的结果。这引起了一个小问题，所以我在网上寻找了一些帮助，发现您实际上可以使用**mysql_fetch_array**或**mysql_fetch_assoc**来显示结果。但是，当我运行搜索表单和操作页面时，我的本地主机服务器冻结并且我的计算机开始过热（笔记本电脑）。

我将如何解决这个问题？

顺便说一句，我确实尝试过使用`while ($user = $mysql->tableCheckArray(_parameters_))`（正如我在一些教程中发现的那样），但是如上所述发生了同样的事情。

这是我的搜索代码：

```
if (isset($_POST[search]) && !empty($_POST[search])){

$search = $_POST[search];

$mysql = new mysqlHandle;

$mysql->accessOpen('root', '', 'Portfolio', 'localhost');

// Sets $rows to number of entries with the 'Name' value of $search.

$rows = $mysql->tableCheck('*', stats, Name, $search, Portfolio);

echo '<div id="content">
    <div id="content_main">
        <h2>Search Results </h2>
        <br/><hr/><br/>';

if ($rows>0){

    // Sets the row's 'id' / entry number.

    $num = 1;

    while ($num<$rows){

        $user = $mysql->tableCheckArray('*', stats, Name, $search, Portfolio);

        echo $user[Name]."<br/>";
        echo $user[Image]."<br/>";
        echo $user[Age]."<br/>"."<br/>"."<br/>"."<hr/>"."<br/>";

        $num++;

    }

    /*
    while ($num<=$rows){

        $user = $mysql->tableCheckAssoc('*', stats, Name, $search, Portfolio);

        echo $user[Name][$num]."<br/>";
        echo $user[Image][$num]."<br/>";
        echo $user[Age][$num]."<br/>"."<br/>"."<hr/>"."<br/>";

        $num++

    }
    */

}else{

    echo "No users found";

}

echo '</div>
    </div>';

} 
```

这是我的 MySQL 代码：

```
function tableCheckAssoc($span, $table, $column, $value, $base){

    $this->span=$span;
    $this->table=$table;
    $this->column=$column;
    $this->value=$value;
    $this->database=$base;

    mysql_select_db($this->database);

    $this->query10="SELECT $this->span FROM $this->table WHERE $this->column = '$this->value'";
    $this->result10=mysql_query($this->query10) or die("<br/>"."Invalid $table CHECK query: " .mysql_error());

    return mysql_fetch_assoc($this->result10);  

}

// Returns array.

function tableCheckArray($span, $table, $column, $value, $base){

    $this->span=$span;
    $this->table=$table;
    $this->column=$column;
    $this->value=$value;
    $this->database=$base;

    mysql_select_db($this->database);

    $this->query4="SELECT $this->span FROM $this->table WHERE $this->column = '$this->value'";
    $this->result4=mysql_query($this->query4) or die("<br/>"."Invalid $table CHECK query: " .mysql_error());

    return mysql_fetch_array($this->result4);       

}

// Returns number of rows.

function tableCheck($span, $table, $column, $value, $base){

    //accessOpen();

    $this->span=$span;
    $this->table=$table;
    $this->column=$column;
    $this->value=$value;
    $this->database=$base;

    mysql_select_db($this->database);

    $this->query="SELECT $this->span FROM $this->table WHERE $this->column = '$this->value'";
    $this->result=mysql_query($this->query) or die("Invalid $table CHECK query: " .mysql_error());

    return mysql_num_rows($this->result);

} 
```

我显然希望显示第一个查询行的“名称”、“图像”和“年龄”值，然后显示第三个等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:40:52.907

tableCheckArray() 每次都返回第一个匹配的记录。每次调用它时，都必须重新运行查询并传递相同的结果集。

而是让 tableCheck() 传回结果。

```
function tableCheck($span, $table, $column, $value, $base){
    mysql_select_db($base);

    $sql = "SELECT $span FROM $table WHERE $column = '$value'";

    return mysql_query($sql) or die("Invalid $table CHECK query: " .mysql_error());
} 
```

然后你会运行这样的东西：

```
$recs = tableCheck($span, $table, $column, $value, $base);

while($row = mysql_fetch_array($recs)){
    // print $row
} 
```

tableCheck 函数非常低效，因为它们要求您继续运行查询并且它们只返回第一条记录。此外，没有任何意义`$this->span = $span`。$span 已经定义，所以不要使用更多的内存重新定义它。

# c# - 无法将文件添加到列表框...阅读

> ID：15934658
> 
> 赞同：0
> 
> 时间：2013-04-10T19:26:02.693
> 
> 标签：c#, listbox, environment, appdata

我正在使用代码显示列表框中的所有启动项，环境变量为“%appdata% 此代码中有一些错误，我需要帮助...。检查代码中的注释错误

是否有任何其他解决方案但仍在使用 %appdata%？

这是代码：

```
 private void readfiles()
    {
        String startfolder = Environment.ExpandEnvironmentVariables("%appdata%") + "\\Microsoft\\Windows\\Start Menu\\Programs\\Startup";
        foldertoread(startfolder);
    }

    private void foldertoread(string folderName)
    {
        FileInfo[] Files = folderName.GetFiles("*.txt"); // HERE is one error "Getfiles"
        foreach (var file in Directory.GetFiles(folderName))
        {
            startupinfo.Items.Add(file.Name); // here is another error "Name"

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:31:16.463

此行不起作用，因为`folderName`它是一个字符串（并且没有`GetFiles`方法）：

```
FileInfo[] Files = folderName.GetFiles("*.txt"); 
```

发生第二个错误是因为`file`变量是`string`包含文件名的。您无需致电`file.Name`，只需尝试以下操作：

```
startupinfo.Items.Add(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:34:02.230

我认为您不需要以下行：

```
FileInfo[] Files = folderName.GetFiles("*.txt"); 
```

该`foreach`循环将生成您需要的内容。其次，`file`变量是一个字符串，所以不要调用：

```
startupinfo.Items.Add(file.Name); 
```

...改为：

```
startupinfo.Items.Add(file); 
```

最后，您可以使用字符串代替循环的 var 类型，并且可以指定文件类型过滤器：

```
foreach (string fileName in Directory.GetFiles(folderName, "*.txt")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:35:44.053

该`string`对象没有`GetFiles()`方法。试试这个：

```
string startfolder = Environment.GetFolderPath(Environment.SpecialFolder.Startup);

string[] files = Directory.GetFiles(startfolder, "*.txt");

foreach (string file in files)
{
   startupinfo.Items.Add(Path.GetFileNameWithoutExtension(file));
} 
```

`Path.GetFileNameWithoutExtension(file)`只返回文件名而不是完整路径。

# javascript - 如果其中的所有变量都返回 True，则 JS 函数返回 True

> ID：15934661
> 
> 赞同：-3
> 
> 时间：2013-04-10T19:26:21.347
> 
> 标签：javascript

下面的函数验证我的表单，其中每个变量调用一个函数以确保该字段已被填写。如果该字段未填写，则函数返回 FALSE，因此变量为 FALSE。我想知道如果所有变量都返回 TRUE，我怎样才能使这个函数返回 TRUE。

现在，由于最后一行，它每次都返回 FALSE。谢谢！

```
function validateform(){
        var namevalid = validatename();
        var entreevalid = validateentree();
        var fillingvalid = validatefilling();
        var ricevalid = validaterice();
        var beansvalid = validatebeans();
        var cheesevalid = validatecheese();

        return false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:27:57.090

```
function validateform(){
        var namevalid    = validatename(),
            entreevalid  = validateentree(),
            fillingvalid = validatefilling(),
            ricevalid    = validaterice(),
            beansvalid   = validatebeans(),
            cheesevalid  = validatecheese();

        return (namevalid && entreevalid && fillingvalid && 
                ricevalid && beansvalid  && cheesevalid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:29:07.813

简单的。改变这个：

```
return false; 
```

对此：

```
return (namevalid && entreevalid && fillingvalid && ricevalid && beansvalid && cheesevalid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:30:13.613

比为每次检查创建变量更简洁的版本：

```
function validateform(){
        return (validatename() && validateentree() && validatefilling() 
               && validaterice() && validatebeans() && validatecheese());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:31:37.697

您可以完全摆脱局部变量：

```
function validateform() {
    return validatename() && validateentree() &&
           validatefilling() && validaterice() &&
           validatebeans() && validatecheese();
} 
```

好处是如果previous返回false则不会调用后续函数，因此整个代码更加优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T19:35:53.713

一个简短的版本：

```
return (validatename() && validateentree() && validatefilling() && 
        validaterice() && validatebeans() && validatecheese()); 
```

# jpa - 我可以使用什么 JPA 命名查询来访问多对多连接？

> ID：15934665
> 
> 赞同：0
> 
> 时间：2013-04-10T19:26:35.707
> 
> 标签：jpa, named-query

我有一个名为“订单”的 JPA 实体。当订单被“续订”（复制了微小的更改）时，我会将对原始订单的引用存储在“续订”订单中。

JPA 实体参考：

```
@ManyToMany
@JoinTable(name = "OP_ORDER_RENEWAL", joinColumns = @JoinColumn(name = "ORDER_ID"), inverseJoinColumns = @JoinColumn(name = "RENEWED_ORDER_ID"))
private List<Order> renewedOrders = new ArrayList<Order>(); 
```

“更新”方法：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public Order renewOrder(Order originalOrder) {
  Order newOrder = new Order();
  ..............
  List<Order> listOfOrdersThisOrderIsRenewing = new ArrayList<Order>();
  listOfOrdersThisOrderIsRenewing.add(originalOrder);
  newOrder.setRenewedOrders(listOfOrdersThisOrderIsRenewing);
  em.persist(newOrder);
  return newOrder;
} 
```

每当我尝试使用 getter 方法访问 Renewed Orders 列表时：

```
public List<Order> getRenewedOrders() {
      return renewedOrders;
} 
```

我收到“无法延迟初始化角色集合”错误。谷歌搜索此错误后，我决定最好的选择是使用单独的 NamedQuery 来获取 RenewedOrders：

```
@NamedQuery(name = "Order.getRenewedOrders", query = "select o from Order o join fetch o.renewedOrders where o.id = :orderId") 
```

当我使用该 NamedQuery 时，查询返回 Order 本身，而不是其更新的订单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:28:04.647

最终为我工作的查询：

```
select r from Order o left outer join o.renewedOrders r where o.id =:orderId 
```

# sql-server-2008 - 使用空间特征的 Sql Server 2008 半径搜索

> ID：15934667
> 
> 赞同：1
> 
> 时间：2013-04-10T19:26:41.963
> 
> 标签：sql-server-2008, spatial-query

我已经查看了许多与我的类似的 SO 问题，但在我的具体情况下我似乎无法得到任何工作。我有一个基于半径的搜索的实现，可以使用邮政编码和半径进行正常工作，但准确性有点低，因为人们可以住在邮政编码的边缘，并且它限制了应用程序只能到达有邮政编码的地方。所以我想要做的是使用用户位置的纬度和经度，并使用 sql server 空间功能，从我的 Locations 表中返回一个 ID 列表，该列表在用户定义的半径内具有纬度和经度。这是我到目前为止所拥有的：

```
SELECT Id FROM Location WHERE (GetDistanceBetween(39.0997, 94.5783, Latitude,     
Longitude)<=5) 
```

GetDistanceBetween 定义如下：

```
 FUNCTION [GetDistanceBetween]
(
@Lat1 float,
@Long1 float,
@Lat2 float,
@Long2 float
)
RETURNS float
AS
BEGIN

DECLARE @RetVal float;
DECLARE @startPoint geography;
DECLARE @endPoint geography;
SET @startPoint = geography::Point(@Lat1, @Long1, 4326)
SET @endPoint = geography::Point(@Lat2, @Long2, 4326)
SET @RetVal = (SELECT @startPoint.STDistance(@endPoint) / 3959 );

RETURN @RetVal;

END 
```

Location 表包含三列，Latitude、Longitude 和 Id。每个位置行都属于我需要从中获取信息的另一个表地址。我在存储过程中尝试做的是：

```
PROCEDURE [dbo].[GetGeoObjectsInRange](
@startLat as float (10),
@startLong as float(10), 
@range  as numeric (15) 
)

AS
BEGIN

Select * from dbo.Address WHERE geolocation_id in (SELECT Id from Location          
WHERE GetDistanceBetween(@startLat, @startLong, Latitude, Longitude)<=@range)
RETURN
END 
```

如您所见，我正在尝试将 GetDistanceBetween 调用的结果传递给另一个选择。这目前不返回任何结果，而我的其他方式返回 39 个结果。谁能看到我做错了什么？我并不是一个真正的数据库专家，但作为一个项目的唯一开发人员迫使我学习如何绕过它们。如果重要的话，我会使用 NHibernate 从 C# MVC3 应用程序调用存储过程。

我很感激任何帮助。

# git - 删除名为“远程”的本地分支

> ID：15934669
> 
> 赞同：2
> 
> 时间：2013-04-10T19:26:44.103
> 
> 标签：git, git-branch, git-remote

我做了一件非常愚蠢的事情。我想在我试图“修复”它并意外地让事情变得更糟之前我应该​​问一下。

我试图在我的 git repo 中列出所有远程分支：

```
git branch remote 
```

显然这不是正确的命令。我没有列出远程分支，而是创建了一个*名为*remote 的本地分支。我应该这样做：

```
git branch -r 
```

我可以删除这个分支吗：

```
git branch -d remote 
```

这会对我的远程分支有什么影响吗？我不想意外删除远程端的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:31:52.370

是的，

```
git branch -d remote 
```

看一看：

```
MYHOST:git wwheeler$ cd seiso/
MYHOST:seiso wwheeler$ git branch
* master
  trunk
MYHOST:seiso wwheeler$ git branch remote
MYHOST:seiso wwheeler$ git branch
* master
  remote
  trunk
MYHOST:seiso wwheeler$ git branch -d remote
Deleted branch remote (was 15dc59f).
MYHOST:seiso wwheeler$ git branch
* master
  trunk
MYHOST:seiso wwheeler$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:25:23.770

我也犯过这个错误。一件容易做的事是`rm .git/refs/heads/remote`。

大部分 git 存储库结构都很简单，您可以通过在其中四处探索来学到很多东西。

# c# - 带有列表对象的 Linq 匿名类型

> ID：15934671
> 
> 赞同：0
> 
> 时间：2013-04-10T19:26:51.583
> 
> 标签：c#, linq, entity

我是 LINQ 和实体框架的新手，到目前为止，我只能执行相对简单的数据查询。我刚刚开始使用以下代码查询数据并将结果存储在一个类中：

```
public class myData
{
    public string name { get; set; }
    public string id {get; set;}
}

 var data = (from t1 in MyContext.Table1
             from t2 in MyContext.Table2
             where t1.Id == "1"
             select new myData
             {
                 name = t1.Name,
                 id = t2.id
             }).FirstOrDefault(); 
```

是否也可以抓取遵循多对一关系的数据？例如，如果有许多使用 t1.Id 存储的“数据值”可以同时查询这些数据？

例如

```
public class myData
{
    public string name { get; set; }
    public string id {get; set;}
    public List<double> data {get; set;}
}

 var data = (from t1 in MyContext.Table1
             from t2 in MyContext.Table2
             where t1.Id == "1"
             select new myData
             {
                 name = t1.Name,
                 id = t2.id
                 data = t2.datavalues      <== This obviously gives a conversion error
             }).FirstOrDefault(); 
```

似乎应该有一种合理的方法来解决这个问题，但我找不到任何东西。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:33:23.823

你想要做的是`Join`桌子：

```
var query = from t1 in MyContext.Table1
    join t2 in MyContext.Table2
    on t1.Id == t2.Id into t2Values
    select new myData
    {
        name = t1.Name,
        id = t1.id,
        data = t2Values.Select(t2 => t2.SomeField),
    }; 
```

# actionscript-3 - 基于数学的距离缓动与特定动画从目标点改变 1 秒

> ID：15934673
> 
> 赞同：1
> 
> 时间：2013-04-10T19:26:02.143
> 
> 标签：actionscript-3, vector, physics, distance

我有一个非常具体的问题，其中我有一个对象沿着一个向量移动，该向量最终会到达目标点并停止移动。所讨论的对象是具有“飞行”动画序列、“着陆”动画序列和“空闲”动画序列的资产。

对象必须以固定速度沿着从舞台上随机点出发的直线移动。当物体距离终点正好 30 帧时，物体将开始缓动，在该终点它将变为着陆序列（这需要 30 帧，或基于 frameRate 的一秒）。一旦着陆序列完成，缓动应该向下舍入到 0，其中对象已经完成了它的旅程，现在无限期地切换到“空闲”序列。

我在下面提供了一个屏幕截图来展示我的问题。任何帮助将不胜感激，因为数学和何时播放着陆序列给了我最多的问题。我试图让飞行 -> 着陆 -> 空转的过程非常顺畅和自然。

我正在使用 ActionScript3 并且 SWF 以或接近 30fps 的速度运行！

截图说明：http: [//i.stack.imgur.com/oWrEg.png](http://i.stack.imgur.com/oWrEg.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:31:14.490

我建议您使用 Tweenlite 库。

这是一些伪代码：

```
// determine x,y landing location
// calculate the angle between ship's x,y & landing location.
// calculate the x,y location along that angle that the landing animation should begin
// Tween from ship's x,y to the x,y where landing sequence should begin
    // set the onComplete parameter to call the function that triggers the landing sequence
// Tween from ship's current location to the landing location
    // set onComplete parameter to call function that sets ship to idle animation 
```

如果您使用 Tweenlite，这是一个如何设置 tween 的示例：

```
Tweenlite.to(ship, duration, {x:targetX, y:targetY, onComplete:startLandingSequence}); 
```

-- 持续时间是飞船从当前位置到达着陆序列应该开始的位置需要多长时间。

当使用补间进行此类操作时，您需要根据其速度计算您的船到达给定位置需要多长时间。该值是您将作为补间持续时间传递的值。

```
duration = distance / speedInPixelsPerSecond; 
```

就您在评论中提出的计算向量而言，这里有一个很棒的向量教程：

[http://www.tonypa.pri.ee/vectors/as3/start.html](http://www.tonypa.pri.ee/vectors/as3/start.html)

# android - 典型的 ZIP 文件和 APK 文件之间有区别吗？

> ID：15934674
> 
> 赞同：6
> 
> 时间：2013-04-10T19:26:06.720
> 
> 标签：android, zip, apk

我知道一个典型的 APK 文件会有 AndroidManifest.xml 但这不是我要求的方面。我问的是 ZIP 结构和标题，即从较低级别的角度来看。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:38:45.467

任何 APK 文件都是有效的 ZIP 文件。不仅如此 - 必须存在的文件，`zipalign`通常用于对齐文件中的数据结构的事实 - 但它都是有效的 ZIP。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T19:28:47.327

AFAIK，它是一个完全标准的 ZIP 文件。使用我尝试过的任何工具将 APK 作为 ZIP 文件处理都没有问题。

请注意，与常规 ZIP 文件一样，并非所有条目都会被压缩（因文件类型而异）。

# jquery - jQuery 将 data-role="none" 添加到我正在使用 jQuery mobile 并且需要将 data-role="none" 添加到页面上的所有 <select> 标签不幸的是我无法控制这些标签的生成方式，是否有一个 jQuery 命令可以用来自动在页面加载时添加这个？更新在尝试了每个人的建议后， data-role="none" 属性确实得到了正确添加，但 jQuery mobile 仍然处理事情。有没有办法使用jQuery默认关闭所有表单处理？检查文件中是

> ID：15934680
> 
> 赞同：0
> 
> 时间：2013-04-10T19:27:23.053
> 
> 标签：jquery, jquery-mobile

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:30:16.063

`$('select').attr('data-role', 'none');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:56:09.033

这是一个选项，以防您有来自服务器端的值，您不想干扰，如果设置：

```
$("select").each(function (i, e) {
    if(typeof $(e).attr("data-role") === "undefined") {
        $(e).data("role", "none");
    }
}); 
```

希望这可以帮助。

关于您的第二个问题，您可能在 mobileinit 事件中缺少这一行：

```
$.mobile.ignoreContentEnabled = true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T19:29:42.693

```
$(document).bind('pageinit', function() {
    $('select').attr('data-role', 'none');
}); 
```

或者

```
$(document).bind('pageinit', function() {
    $('select').data('role', 'none');
}); 
```

最后一个不会改变属性，而是将值存储在 jQuery 的 data() 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T19:31:28.930

因此，当页面加载并添加 data-role="none" 以选择标签时，您可以添加此脚本：

```
$(document).ready(function(){
   $('select').data('role','none');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T19:30:31.050

页面加载后使用 jQuery.attr。

```
$(function(){
   $('select').attr('role-data', 'none');
}); 
```

# java - 在方法级别过滤消息？

> ID：15934681
> 
> 赞同：0
> 
> 时间：2013-04-10T19:26:46.660
> 
> 标签：java, logging, log4j

在 log4j 中，是否可以不仅在包/类级别进行过滤，还可以在方法级别进行过滤？如果是，如何？

感谢您的任何提示:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:30:49.997

在 log4j 中，您不按包或类“过滤”（我假设您指的是定义每个记录器的日志级别的配置），而是按记录器名称进行过滤。

只是碰巧大多数时候使用类的名称来实例化记录器，因此记录器的名称最终成为该类的规范名称。你可以给你的记录器起任何名字，然后用这个名字来配置它。

# uiviewcontroller - 如何使用 SetNeedsDisplay 刷新我的 UIVIewController

> ID：15934684
> 
> 赞同：4
> 
> 时间：2013-04-10T19:27:38.013
> 
> 标签：uiviewcontroller, xamarin.ios, xamarin

我有一个简单的 UIViewController（单点触控），在 UI 上有一个按钮。现在，我的用例很简单——我想在单击按钮时重新加载 UIViewController。在某些线程上，我读到我只需要为 UIView 调用 SetNeedsDisplay，但这似乎对我不起作用。这是我的代码片段 -

```
public partial class AbcScreen : UIViewController
{
....
    public override void ViewDidLoad()
    {
        base.ViewDidLoad();
        // Declare and Add a button
        Add(myBtn);
        myBtn.TouchUpInside += (sender, ea) =>
                {  
                    Console.WriteLine("Touched the button");
                    View.SetNeedsDisplay();
                };
    }
} 
```

我阅读了其他一些线程，但似乎没有任何帮助。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-15T09:44:28.707

尝试

```
this.ReloadInputViews(); 
```

# shell - 检查文件中是否存在字符串（ksh）

> ID：15934687
> 
> 赞同：0
> 
> 时间：2013-04-10T19:27:46.563
> 
> 标签：shell, unix, scripting, ksh

这个 KornShell (ksh) 脚本应该做的是在我的 dmesg 中检查磁盘、内部和外部。在 dmesg 输出中，内部驱动器显示为 wd[0-9]，外部驱动器显示为 sd[0-9]。我当然没有那么多磁盘，但我希望我的脚本能够涵盖尽可能多的可能性。将检查设备 0-9。这就是这个想法：

创建两个大小为 9 的数组，如果 wd0 存在，则通过 dmesg 搜索，如果存在，则使内部的第一个元素为 1，如果 wd1 确实存在，则使数组的第二个元素为 1，否则为 0。

如果要搜索一个特定的磁盘，例如 wd0，我可以执行以下操作：

```
internal=`dmesg | grep "^wd0" | head -n 1 | cut -d\  -f1` 
```

这使得

```
internal = wd0 
```

但是如何以“循环”的方式检查字符串 wd0-wd9 是否存在于 dmesg 中

```
# create arrays
set -A internals 0 0 0 0 0 0 0 0 0 
set -A externals 0 0 0 0 0 0 0 0 0 
```

（下面的代码不是 ksh 代码，而是用类似 c 的语法呈现这个想法）：

```
for (i=0;i<=8;i++){
    if (wd0) # that is if wd0 exists, if wd1 exists etc.
        internal[i] = 1;
    else
        internal[i] = 0;
} 
```

当然，外部也应遵循相同的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:02:28.810

我认为以下内容应该可以帮助您前进，但不确定您希望将数组设置为什么值，但这里是：

```
#!/bin/ksh

set -A internal 

for i in {0..9}
do
   echo "Looking for wd"$i
   internal[$i]=`dmesg | grep "^wd$i" | head -n 1 | cut -d\  -f1`
   if [[ ${internal[$i]} = "wd"$i ]];then
     internal[$i]=1
   else
     internal[$i]=0
   fi
done 
```

# regex - RegEx - 如果不在列表中，则为真

> ID：15934692
> 
> 赞同：1
> 
> 时间：2013-04-10T19:27:59.620
> 
> 标签：regex

如果字符串与其他字符串列表不完全匹配，我希望正则表达式返回 true。可能有比使用 RegEx 更好的方法来做到这一点，但出于我的目的，我需要使用 regex 方法进行验证。

例如，列表包含

```
aaa aab aac dvs efg 
```

我希望表达式匹配，如果我输入例如：

```
aa 
a
aae 
```

但我希望它在完全匹配时失败，例如值 aaa aab

我试过类似的东西：

```
[^aaa|aab|aac|dvs|efg] 
```

但这不起作用，它发现'aa'、'aaa'、'aab'（例如）都不匹配。我不希望 'aa' 不匹配。aa 应该匹配，因为它不完全等于列表中的字符串之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:57:09.123

这个正则表达式应该适合你：

```
^(?!\b(?:aaa|aab|aac|dvs|efg)\b).*$ 
```

**说明：**使用负前瞻匹配一个不完全在给定字符串列表中的字符串。

### 现场演示：[http ://www.rubular.com/r/BMuCk5S6PJ](http://www.rubular.com/r/BMuCk5S6PJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:37:21.077

您使用的语法是获取与指定字符匹配的字符。

您正在寻找的是[负前瞻](http://www.regular-expressions.info/lookaround.html)

它可以这样使用：

```
^(?:(?!^(aaa|aab|aac|dvs|efg)$).)*$ 
```

此外，正如其他人所提到的，始终确保您确实需要使用 RegEx（很难理解为什么您会被迫使用除家庭作业之外的特定技术）。

以下是 C# 中此问题的示例：

[使用内置`Collection`方法](http://ideone.com/URH7qK)的版本需要 1.59 秒和 1 行独特的、可理解的代码。

[使用 RegEx 的版本](http://ideone.com/c1bIys)需要 4.55 秒，包含 3 行独特、更复杂的代码。

# ruby-on-rails - JavaScript 正在我的 Rails 应用程序上秘密运行

> ID：15934693
> 
> 赞同：0
> 
> 时间：2013-04-10T19:28:00.500
> 
> 标签：ruby-on-rails

我在路由文件中唯一的一行是：

```
root :to => 'spikes#index' 
```

在 Javascript 资产中，我有一个简单的函数，如下所示：

**穗.js 文件：**

```
$(function(){

    alert("WAT");
    document.write("abc");

}); 
```

在 Views->spikes->index.html.haml 文件中我什么都没有！它是空的。我曾经有以下代码，但我删除了它：

```
 = javascript_include_tag 'spike' 
```

但是当我运行我的 Rails 应用程序时，我仍然在浏览器上看到一个警告和“abc”。

它从哪里调用它？到底怎么回事！？！

更新：这也是我的**application.html.erb 文件：**

```
<!DOCTYPE html>
<html>
<head>
  <title>D3Spike</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:38:43.753

您可能有一个`<script>`标签`app/views/layouts/application.html.erb`（或者可能`.haml`，不是`.erb`），它包装了您的所有页面。如果您将其取出一秒钟，您可能会看到警报消失。

需要理解的几件事：1）您向我们展示的 JavaScript 代码仅通过被包含来运行（将其粘贴到浏览器的控制台中以了解我的意思）和 2）在 Rails 中，正常行为适用于您的所有 JavaScript一直被包括在内，这可能不是您所期望的。

# plesk - 如何在 Plesk 11 中设置最喜欢的地方？

> ID：15934694
> 
> 赞同：1
> 
> 时间：2013-04-10T19:28:01.633
> 
> 标签：plesk

我经常想加载 phpMyAdmin，但在 Plesk 11 中单击 WebAdmin 图标需要大约 5 次。以前版本的 Plesk 有收藏夹，所以我可以从主页一键到达那里。我尝试在浏览器中为该页面添加书签，但如果我注销并重新登录会导致错误。Plesk 11 是否提供收藏夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:51:40.407

Plesk 11 中没有“收藏夹”，但有“自定义按钮”。您可以在管理员主页上创建带有链接的自定义按钮`"/server/db_servers.php?cmd=dbwebadmin&db_server_id=1"`

此 URL 可能因您的服务器而异，您可以在“数据库服务器”页面上获取。

# sql - 使用两个不同的 WHERE 语句进行选择

> ID：15934709
> 
> 赞同：2
> 
> 时间：2013-04-10T19:28:31.483
> 
> 标签：sql, postgresql

我正在努力解决如何运行选择查询，我同时检查两个不同的值，并希望它们在单独的列中。

我的表格示例：

```
ID | foreignID | value |  accepted
----------------------------------
 1 |         1 |     5 |         Y
 2 |         1 |     2 |         Y
 3 |         1 |     4 |         N
 4 |         2 |     8 |         Y 
```

我正在尝试做的是沿着这个思路：

```
SELECT 
    foreignID, 
    SUM(value WHERE (accepted='Y')) AS sum1,
    SUM(value WHERE (accepted='N')) AS sum2
FROM example
WHERE foreignID='1' 
```

我的预期结果是：

```
foreignID | sum1 | sum2
------------------------
        1 |    7 |    4 
```

显然上面的代码是行不通的，它只是一个半 sudo 代码来显示我想要的。本质上，我只想检查一个 foreignID，然后从几个 SUM 中获取结果，每个 SUM 都需要自己的参数。

有谁知道可以实现这一目标的任何方式，或类似的方式。我试过 UNION 将它放入...

```
foreignID | sum
        1 |   7
        1 |   4 
```

...但这并不是我真正想要的。

我还在[一个 sql 语句中看到了多项选择，](https://stackoverflow.com/questions/4427757/multiple-select-in-one-sql-statement)这似乎是在正确的轨道上，但同样，这是使用 UNION，我认为这对于我的示例来说并不理想。

我可能错了，所以如果我错了，请证明我错了。我可能只是忽略了一些东西！感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:30:00.973

试试这个：

```
SELECT 
    foreignID, 
    SUM(CASE WHEN accepted = 'Y' THEN value ELSE 0 END) AS sum1,
    SUM(CASE WHEN accepted = 'N' THEN value ELSE 0 END) AS sum2
FROM example
WHERE foreignID='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:33:24.430

这比以下更具可读性`case`：

```
select
    foreignID,
    sum("value" * (accepted = 'Y')::int) sum1,
    sum("value" * (accepted = 'N')::int) sum2
from example
where foreignID = '1' 
```

将布尔值转换为整数会导致 0 或 1。许多（如果不是大多数）语言都以相同的方式进行转换。我测试了四个：

C＃

```
Console.WriteLine("{0} {1}", 
    7 * Convert.ToInt32(true) - 2 * Convert.ToInt32(false), 
    // Or shorter:
    7 * (true ? 1 : 0) - 2 * (false ? 1 : 0)
); 
```

Python

```
>>> 7 * True - 2 * False
7 
```

Javascript

```
<script type="text/javascript">
    document.write(7 * true - 2 * false);
</script> 
```

PHP

```
<?php
echo 7 * true - 2 * false;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:38:19.097

[SQL小提琴](http://www.sqlfiddle.com/#!10/3aff8/6)

```
create table test(
      id int ,
      foreignid int,
      value int,
      accepted char(1)
      )

    INSERT INTO test values (1,1,5,'Y');
    INSERT INTO test values (2,1,2,'Y');
    INSERT INTO test values (3,1,4,'N');
    INSERT INTO test values (4,2,8,'Y');

    select 
    foreignid,
    sum( case when accepted='Y' then value else 0 end) as sumY
    ,sum( case when accepted='N' then value else 0 end) as sumN
    from test
    group by foreignid; 
```

# c - 从c中连接的udp套接字中读取返回

> ID：15934710
> 
> 赞同：0
> 
> 时间：2013-04-10T19:28:37.567
> 
> 标签：c, sockets, unix, blocking, udpclient

我对 UDP 客户端/服务器模型进行编程，此应用程序的主要功能是客户端插入目录路径，然后服务器会将提供的目录的内容重新运行给客户端，因此此客户端代码：

```
#include "cliHeader_UDP.h"

int
main(int argc, char **argv)
{
    int                 sockfd;
    struct sockaddr_in  servaddr;

        /*Error checking for providing  appropirate port# */
    if(argc<3 )  
        err_quit("Error,no port provided, please enter the port#:22011 \n");

    portno=atoi(argv[2]);

    for(;;)
    {
        bzero(&servaddr, sizeof(servaddr));
        servaddr.sin_family = AF_INET;
        servaddr.sin_port = htons(portno);
        Inet_pton(AF_INET, argv[1], &servaddr.sin_addr);

        sockfd = Socket(AF_INET, SOCK_DGRAM, 0);        
        dg_cli(stdin, sockfd, (SA *) &servaddr, sizeof(servaddr));
    }
    exit(0);
}

**//and here is the dg_cli implemntation :**

void
dg_cli(FILE *fp, int sockfd, const SA *pservaddr, socklen_t servlen)
{
    int n;
    char    sendline[MAXLINE], recvline[MAXLINE + 1];

    Connect(sockfd, (SA *) pservaddr, servlen);
    for(;;)
    {
         bzero(&sendline, sizeof(sendline));
         printf("please enter Directory Name :\n");
         Fgets(sendline, MAXLINE, fp);

        /*To check if the supplied name ended with \n in sendline buffer */
        if((p = strchr(sendline, '\n'))) *p = 0; 

        write(sockfd, sendline, strlen(sendline));
        printf("test for write\n");                     
**Line 31.......:**     while ( (n=read(sockfd, recvline, MAXLINE)) )
                {
                    if(n<0)
                    perror("Error");

                    printf("recvline is: %s\n",recvline);
                    printf("n========%d\n",n);

                }
            printf("exit from read While\n");
            recvline[n] = 0;    /* null terminate */

    }
} 
```

第 31 行的问题...是第一次运行，因为我希望客户端插入 DIR 路径，因此服务器将返回路径的内容，但是当用户需要再次插入路径时，**它仍然阻塞在 for 中的读取循环并且不从for循环返回，所以当缓冲区的内容结束时如何设置条件从for循环返回，如TCP中的EOF**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:34:34.800

正如您所注意到的，UDP 中没有“连接”的概念——即使你调用了——所以当通信结束时`connect(2)`没有办法`read`返回。`0`有一些方法可以解决这个问题：

*   当输出结束或其他一些特殊标记时，让服务器发送一条长度为 0 的消息
*   让客户分析输入并以某种方式检测到它已经结束

这两种方法在实践中都有点脆弱：想象一下如果“输出结束”消息变得很多会发生什么。因此，您还必须针对这种情况进行准备，并可能添加超时（`SO_RCVTIMEO`例如查找）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:21:18.537

我尝试了类似的东西看看：服务器端的部分代码：

```
//at server side Read the directory contents
            printf("The contents of [%s] is :\n",mesg);
            bzero(&mesg, sizeof(mesg));
            while( (dptr = readdir(dp)) !=NULL ) 
            {
                printf(" \n[%s] \t",dptr->d_name);
                //report(dptr->d_name, &status_buf);
                sprintf(mesg,"%s",dptr->d_name);

                if((dptr = readdir(dp)) ==NULL)     
                {
                    bzero(&mesg, sizeof(mesg));
                    sprintf(mesg,"%c",'!');
                    Sendto(sockfd, mesg, sizeof(mesg), 0, pcliaddr, len);
                }

                Sendto(sockfd, mesg, sizeof(mesg), 0, pcliaddr, len);

            }
            // Close the directory stream
            closedir(dp);

//and at the client side : 

flag=1;             
        while ( (n=read(sockfd, recvline, MAXLINE)) )
                {
                    if(n<0)
                    perror("Error");

                    printf("recvline is: %s\n",recvline);
                    flag=flag+1;
                    printf("Flag now is :%d\n",flag);
                    printf("n========%d\n",n);
                         bzero(&recvline, sizeof(recvline));
                    if(recvline[0]=='!')
                        return;

                } 
```

# assembly - 在 TASM 中声明段时，“para public use16”是什么意思？

> ID：15934711
> 
> 赞同：0
> 
> 时间：2013-04-10T19:28:45.737
> 
> 标签：assembly, x86, tasm

我知道这里的代码应该创建一个包含 16 位代码和数据的段。

```
segment code16 para public use16
assume cs:code16, ds:code16 
```

但我不确定这里的格式是什么。

我认为这`segment`意味着我们正在声明一个段，`code16`是名称，但我不确定`para public use16`.

可能`assume cs:code16, ds:code16`意味着我们将把它用于代码和数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:49:05.113

`para`
这是[段对齐](http://www.plantation-productions.com/Webster/www.artofasm.com/DOS/ch08/CH08-2.html#HEADING2-74)。`para`是“段落”的缩写，在此上下文中表示 16 个字节。因此，您将段对齐在 16 字节边界上。

`public`
这是[段组合类型](http://www.plantation-productions.com/Webster/www.artofasm.com/DOS/ch08/CH08-2.html#HEADING2-164)。`public`表示应将具有此名称的所有段连接成一个段。

`use16`
这意味着该段将默认使用 16 位指令编码，并且 32 位指令将需要前缀操作码，否则它们会模棱两可。

# javascript - 处理程序中的 JavaScript 变量可见性

> ID：15934713
> 
> 赞同：0
> 
> 时间：2013-04-10T19:29:01.533
> 
> 标签：javascript, node.js

我对它的工作原理有点困惑，让我给你一个示例代码：

```
someClass = function() {
    this.a = 10;

    this.Foo = function() {
        console.log(this.a); // will output "10"
        setTimeout(this.Bar, 1);
    }

    this.Bar = function() {
        console.log(this.a); // undefined
    }
}
var instance = new someClass();
instance.Foo(); 
```

我的理解是 this.a 在函数 Bar 中不可见，如果它是从 setTimeout （或其他一些“处理程序”类型的东西）调用的。解决这个问题的常见/正确方法是什么？

（我在 Node.js 中尝试这个）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:35:04.727

将函数*this.Bar*作为参数传递给另一个函数时，您需要将*this.Bar***绑定** 到您希望执行它的上下文。

 *如果您使用 jQuery 或 Underscore.js 之类的 JS 库，它们已经具备该功能：

```
setTimeout(_.bind(this.Bar, this), 1); 
```

**这是绑定**函数的简单实现：

```
var bind = function(scope, fn) {
  return function() {
    return fn.apply(scope, arguments);
  };
} 
```

**更新**：

正如@generalhenry 指出的那样，node.js 已经在（*Function.prototype.bind ）中附带了一个**绑定*函数，因此您可以在不添加自定义*绑定*函数或外部库的情况下执行此操作：

 **```
setTimeout(this.Bar.bind(this), 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:37:24.160

问题是`this`当您将函数传递给`setTimeout`.

这是修复它的最简单方法，`this`通过闭包存储为引用并改用它。

```
// This uses _me_ everywhere for consistency, but the only place that really needs it 
// is within the Bar method. But consistency in this case makes your code more change-
// proof, say if someone calls setTimeout(instance.Foo, 1)
someClass = function() {

    var me = this;
    me.a = 10;

    me.Foo = function() {
        console.log(me.a); // will output "10"
        // setTimeout will cause me.Bar to be called with window as the context
        setTimeout(me.Bar, 1);
    }

    me.Bar = function() {
        // so we avoid using _this_ in here
        console.log(me.a); // 10
    }
} 
```

稍微优雅一点的方法是使用[Function.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
someClass = function() {
    this.a = 10;

    this.Foo = function() {
        console.log(this.a); // will output "10"
        // the bind call will force it to use the first argument as `this`
        setTimeout(this.Bar.bind(this), 1);
    }

    this.Bar = function() {
        console.log(this.a); // undefined
    }
} 
```***

# servicestack - ServiceStack 是否支持端到端类型化请求中的泛型

> ID：15934722
> 
> 赞同：3
> 
> 时间：2013-04-10T19:29:42.643
> 
> 标签：servicestack

我在玩 ServiceStack，想知道它是否支持这种情况。我在我的请求类型中使用泛型，因此许多从公共接口继承的 DTO 将支持相同的基本方法 [例如... GetById(int Id)]。

使用特定于一种 DTO 的请求类型可以工作，但会破坏泛型的优点......

```
var fetchedPerson = client.Get<PersonDto>(new PersonDtoGetById() { Id = person.Id });
Assert.That(person.Id, Is.EqualTo(fetchedPerson.Id)); //PASS 
```

将路由映射到泛型也可以：

```
Routes.Add<DtoGetById<PersonDto>>("/persons/{Id}", ApplyTo.Get);
...
var fetchedPerson2 = client.Get<PersonDto>(string.Format("/persons/{0}", person.Id));
Assert.That(person.Id, Is.EqualTo(fetchedPerson2.Id)); //PASS 
```

但是使用端到端通用请求类型失败：

```
var fetchedPerson3 = client.Get<PersonDto>(new DtoGetById<PersonDto>() { Id = person.Id });
Assert.That(person.Id, Is.EqualTo(fetchedPerson3.Id)); //FAIL 
```

我想知道我是否只是遗漏了一些东西，或者我是否试图将 ooone 层抽象得太远...... :)

下面是一个使用 NUnit 的完整的失败程序，默认的 ServiceStack 东西：

```
namespace ssgenerics
{
    using NUnit.Framework;
    using ServiceStack.ServiceClient.Web;
    using ServiceStack.ServiceHost;
    using ServiceStack.ServiceInterface;
    using ServiceStack.WebHost.Endpoints;

    [TestFixture]
    class Program
    {
        public static PersonDto GetNewTestPersonDto()
        {
            return new PersonDto()
            {
                Id = 123,
                Name = "Joe Blow",
                Occupation = "Software Developer"
            };
        }

        static void Main(string[] args)
        {}

        [Test]
        public void TestPutGet()
        {
            var listeningOn = "http://*:1337/";
            var appHost = new AppHost();
            appHost.Init();
            appHost.Start(listeningOn);
            try
            {

                var BaseUri = "http://localhost:1337/";
                var client = new JsvServiceClient(BaseUri);

                var person = GetNewTestPersonDto();
                client.Put(person);

                var fetchedPerson = client.Get<PersonDto>(new PersonDtoGetById() { Id = person.Id });
                Assert.That(person.Id, Is.EqualTo(fetchedPerson.Id));

                var fetchedPerson2 = client.Get<PersonDto>(string.Format("/persons/{0}", person.Id));
                Assert.That(person.Id, Is.EqualTo(fetchedPerson2.Id));
                Assert.That(person.Name, Is.EqualTo(fetchedPerson2.Name));
                Assert.That(person.Occupation, Is.EqualTo(fetchedPerson2.Occupation));

                var fetchedPerson3 = client.Get<PersonDto>(new DtoGetById<PersonDto>() { Id = person.Id });
                Assert.That(person.Id, Is.EqualTo(fetchedPerson3.Id));
                Assert.That(person.Name, Is.EqualTo(fetchedPerson3.Name));
                Assert.That(person.Occupation, Is.EqualTo(fetchedPerson3.Occupation));
            }
            finally
            {
                appHost.Stop();
            }
        }
    }

    public interface IDto : IReturnVoid
    {
        int Id { get; set; }
    }

    public class PersonDto : IDto
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Occupation { get; set; }
    }

    public class DtoGetById<T> : IReturn<T> where T : IDto { public int Id { get; set; } }
    public class PersonDtoGetById : IReturn<PersonDto> { public int Id { get; set; } }

    public abstract class DtoService<T> : Service where T : IDto
    {
        public abstract T Get(DtoGetById<T> Id);
        public abstract void Put(T putter);
    }

    public class PersonService : DtoService<PersonDto>
    {
        public override PersonDto Get(DtoGetById<PersonDto> Id)
        {
            //--would retrieve from data persistence layer
            return Program.GetNewTestPersonDto();
        }

        public PersonDto Get(PersonDtoGetById Id)
        {
            return Program.GetNewTestPersonDto();
        }

        public override void Put(PersonDto putter)
        {
            //--would persist to data persistence layer
        }
    }

    public class AppHost : AppHostHttpListenerBase
    {
        public AppHost()
            : base("Test HttpListener",
                typeof(PersonService).Assembly
                ) { }

        public override void Configure(Funq.Container container)
        {
            Routes.Add<DtoGetById<PersonDto>>("/persons/{Id}", ApplyTo.Get);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:40:16.060

不，这是 ServiceStack 中的一个基本概念，即每个 Service 都需要自己**独特的 Request DTO**，请参阅[此答案以获取更多示例](https://stackoverflow.com/a/15883689/85785)。

你可以这样做：

```
[Route("/persons/{Id}", "GET")]
public class Persons : DtoGetById<Person> { ... } 
```

但我强烈[建议不要在 DTO 中使用继承](https://stackoverflow.com/a/10759250/85785)。属性声明就像服务合同的 DSL，它不应该被隐藏。

[有关更多详细信息，请参阅有关 DTO 在 Services 中的目的的](https://stackoverflow.com/a/15369736/85785)答案。

# css - 字段设置背景颜色

> ID：15934724
> 
> 赞同：3
> 
> 时间：2013-04-10T19:29:45.767
> 
> 标签：css, telerik, form-designer

我正在尝试使用以下代码为 Telerik 中的字段集设置背景颜色。

有人可以指出我正确的方向，或者有任何其他想法吗？

```
.RadForm_Office2007.rfdFieldset fieldset
  { 
  border: solid 1px #080808;
   background-color:yellow !important;

    }

 <telerik:RadFormDecorator ID="RadFormDecorator1" runat="server" 
  DecoratedControls="Fieldset"  Skin="Office2007"/>

 <fieldset style="float: left; width: 280px;">
<legend>Grid
</legend>     
<telerik:RadTextBox runat="server"></telerik:RadTextBox>

</fieldset> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:33:30.837

您可以将背景颜色设置为

```
<fieldset style="float: left; width: 280px; background-color:red;"> 
```

您可以使用颜色代码来设置这样的背景颜色

```
<fieldset style="float: left; width: 280px; background-color:#999999;"> 
```

您可以访问 [http://www.colorpicker.com/](http://www.colorpicker.com/)查找颜色代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:55:00.937

答案就在你眼前

```
fieldset
{ 
border: solid 1px #080808;
background-color:yellow !important;

} 
```

# java - 在 Java 中使用 Executor 编写文件

> ID：15934727
> 
> 赞同：1
> 
> 时间：2013-04-10T19:30:04.650
> 
> 标签：java, multithreading, executorservice, fork-join, threadpoolexecutor

我有一个`List<Map<String,String>>`ie；地图列表。每个 Map 都有`File Name`as`Key`和`File Content`as `Value`。

我在上面的列表中有超过 250 万张地图。我的要求是遍历此列表并在读取每个 Map 键和值的输出文件夹中创建文件。所以最后我将拥有 250 万个文件。需要4个多小时。然后我停止程序。如果我为整个 250 万条记录运行该程序，我不知道确切的时间。

我需要使用多线程对此进行优化。

如何使用 Java 优化它`Executors/ Fork/ Join`（我有`Java 7`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:35:17.067

如果您在单个磁盘上写入文件，我认为添加更多线程不会真正有帮助。您的程序是 IO 密集型的，而不是 CPU 密集型的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:52:06.753

有几点需要注意：

正如@vtheron 所说，“程序更多的是 IO 限制而不是 CPU 限制”，因此添加更多线程，您将在上下文切换中浪费更多 CPU 周期，这在此处根本不需要。

我猜你当前的基准是 4 小时内 250 万，那么当前的实现是什么？

硬件配置也会对性能提升起到至关重要的作用，考虑看看这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:36:12.520

您可以使用[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)和实现[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)的类。

```
public class Processor implements Runnable {
    private final Map<String, String> map;

    public Processor(Map<String, String> map) {
        this.map = map;
    }

    public void run() {
        // Do work here
    }
}

ThreadPoolExecutor executor = new ThreadPoolExecutor();
for(Map<String, String> map : list) {
    executor.execute(new Processor(map));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:37:39.783

可以通过将问题拆分为与可用处理器一样多的子问题来实现并行化。对于列表迭代器，您可以迭代子列表：

```
int nThreads = Runtime.getRuntime().availableProcessors() + 1;
ExecutorService exec = Executors.newFixedThreadPool( nThreads );
int interval = list.size()/parallel.nThreads;
int from     = 0;
for( int i = 0; i < nThreads; ++i ) {
   int to = ( i == nThreads - 1 ) ? 1000 : from + interval;
   exec.submit( new Search( from, to, list ));
   from = to;
}
exec.shutdown();
exec.awaitTermination( 1, TimeUnit.DAYS ); 
```

该类`Search`用于完成工作（创建文件）。

类的例子`Search`：

```
class Search implements Runnable {

  final int from;
  final int to;
  final List< Map< String, String >> list;

  Search( int from, int to, List< Map< String, String >> list ) {
     this.from = from;
     this.to   = to;
     this.list = list;
  }

  @Override
  public void run(){
     for( int b = from; b < to; ++b ) {
        Map< String, String > map = list.get(b);
        ...
     }
  }
} 
```

# c# - 计算需要多少页

> ID：15934728
> 
> 赞同：0
> 
> 时间：2013-04-10T19:30:04.833
> 
> 标签：c#

如何计算我的数据需要容纳多少页？

我得到了 23 行数据，每页需要 20 行 = 2 页。

**当我划分它时，我得到 1：**

```
var pages = totalRows / 20; 
```

**当我使用模数时，我得到 3：**

```
var pages = totalRows % 20; 
```

所以请向我解释我应该使用什么计算来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:32:42.330

您应该划分然后四舍五入，这将导致最后一页少于 20 行。

```
var pages = (int)Math.Ceiling(totalRows / 20.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:32:34.320

尝试

```
var pages = (totalRows+19) / 20; 
```

一般来说：

```
var pages = (totalRows+rowsPerPage-1) / rowsPerPage; 
```

这相当于进行浮点除法和四舍五入（见其他答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:36:47.760

我喜欢cdhowie的回答。但是，如果您不想使用`Math.Ceiling`，可以执行以下操作：

```
int pages = totalRows / 20;
if (totalRows % 20 != 0) { pages += 1; } 
```

# linux - 编写无限期运行的 linux 守护程序的最佳工具？

> ID：15934729
> 
> 赞同：2
> 
> 时间：2013-04-10T19:30:05.297
> 
> 标签：linux

我想知道编写无限期运行 PHP 脚本的守护程序的替代方法是什么。换句话说：执行 PHP 脚本 ---> 进程 ---> 完成 ---> 重复。

这可以用 Bash 编写吗？还是C？是否有一个我可以安装的 Linux 工具可以无限期地为我运行类似的东西？通常使用哪些方法来处理此任务？

更新：我正在使用 centos

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:34:24.547

这是一个常见的问题，人们已经编写了几个实用程序来做到这一点（通常它们被称为看门狗）。

您可以比较可用选项并检查您更喜欢的选项的来源。他们之中有一些是：

*   如果您在 Ubuntu 中，请尝试[upstart](http://upstart.ubuntu.com/)。
*   [守护进程](http://cr.yp.to/daemontools.html)
*   [主管](http://supervisord.org/)（我最喜欢的）。

可以使用 cron 定期运行任务，但是很难防止并发（很难做好，处理锁、过时锁等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:35:19.903

如果它可以满足您的功能和性能要求，那么 qiuickest 将是您所知道的。Bash - 通常最简单，perl - 强大，c - 只有当你真的知道你在做什么时。如果您最了解，您可以使用 php 本身。

您可以创建一个 cron 作业来执行您的 php 脚本。或者使用外部程序守护您的程序。用 perl 创建守护进程很容易，如果 php 也可以作为守护进程进行分叉，这不会感到惊讶。

重击解决方案：

```
cd /
while :; do php /path/myprog.php >> /var/log/myphplog.log; done </dev/null >/dev/null 2>/dev/null &
disown 
```

您可以将此代码放在 rc.local 中或创建一个新的初始化脚本。日志轮换也很好。

# c# - 在 Visual Studio 2012 中折叠所有 #region

> ID：15934733
> 
> 赞同：25
> 
> 时间：2013-04-10T19:30:19.597
> 
> 标签：c#, visual-studio-2012, ide, resharper

首先，不`CTRL+M`，`CTRL+O`不是答案。对我来说，这是崩溃的#Region、///Comments 和Methods，我讨厌这样。

我只想折叠/展开`#region`部分。我正在使用 Visual Studio 2012 和 Resharper。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T19:42:40.453

**`ctrl`+`m`** , **`ctrl`+`s`**将折叠当前区域。您可以手动选择多个区域并以这种方式折叠它们。

由于“折叠所有开放区域”命令不存在，您可以随时尝试创建一个新区域；在这种情况下，请查看这篇文章：[如何向 Visual Studio 2012 添加命令？](https://stackoverflow.com/questions/12482620/how-to-add-commands-to-visual-studio-2012)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T19:33:29.300

您不能只折叠区域，但快捷键 chord: `ctrl+m`可以`ctrl+l`完成所有操作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-03T19:33:01.040

你可以通过安装[Menees VS Tools](http://www.menees.com/VSTools.htm)扩展来做到这一点。它也可以通过 Visual Studio Gallery 获得（在 VS2013 中：工具 > 扩展和更新... > 在线 > [在搜索框中键入 Menees]）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-22T18:50:31.603

突出显示所有内容`CTR`+`A`然后`CTR`+ `m` `CTR`- `m` （2 次！！）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-05T21:14:29.120

[在对类似问题的回答中，](https://stackoverflow.com/a/28153235/2998072) Ray Pietrzak 发布了一个宏的代码，该宏将执行此操作。我使用[Visual Commander 扩展](https://visualstudiogallery.msdn.microsoft.com/deda8ac1-75e6-4068-89ab-b607cee38f2d)来创建一个新的“命令”，并将 Ray 的 ExpandAllRegions 和 CollapseAllRegions 方法的代码粘贴到命令中。我修改了这两种方法，以便它们采用“DTE”参数，如下所示：

```
 Sub ExpandAllRegions(DTE As DTE2) 
```

和

```
 Sub CollapseAllRegions(DTE As DTE2) 
```

我编辑了命令的 Run 方法，如下所示：

```
 Sub Run(DTE As DTE2, package As Microsoft.VisualStudio.Shell.Package) Implements VisualCommanderExt.ICommand.Run
      CollapseAllRegions(DTE)
  End Sub 
```

然后可以将该命令添加到菜单、工具栏或键盘快捷键。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T19:43:15.560

不幸的是，如果不编写自己的利用 IDE 的 Visual Studio 扩展，这是不可能的。您可以[从 MSDN 开始](http://msdn.microsoft.com/en-us/library/dd885119.aspx)。

# css - 滚动条后将布局高度拉伸 100%

> ID：15934738
> 
> 赞同：0
> 
> 时间：2013-04-10T19:30:31.487
> 
> 标签：css

我有一个三列、固定的页眉/页脚和三列内容布局，当中间 DIV 溢出时，左右 DIV 不会拉伸到 100% 高度。

有什么建议吗？另外，您如何看待布局 CSS 以及它的跨浏览器兼容性和整体 CSS 使用情况？

干杯，大卫

jsFiddle：http: [//jsfiddle.net/VsTYJ/1/](http://jsfiddle.net/VsTYJ/1/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Sample Page</title>
        <style type="text/css">
            html 
            {
                height: 100%;
            }
            body 
            {
                margin: 0;
                padding: 0;
                height: 100%;
            } 
            #container-main
            {      
                background: #888888;   
                margin: 0;
                padding: 0;
                font: 1.5em "Trebuchet MS", Helvetica, sans-serif;    
                height: 100%;               
                min-height: 100%;
                min-width: 768px;
            }    
            #container-left, #container-middle, #container-right
            {            
                float: left;
                margin: 0;
                padding: 0;                  
                min-height: 100%;
            }  
            #container-left
            {            
                background: #777777;
                width: 25%;
            } 
            #container-middle
            {            
                background: #999999;
                width: 60%;
            } 
            #container-right
            {            
                background: #777777;
                width: 15%;
            } 
            #container-header 
            { 
                background: #eee; 
                border: 0px solid #666; 
                height: 60px; 
                left: 0; 
                position: fixed; 
                width: 100%; 
                top: 0;  
                padding: 0;                      
            }
            #header-left, #header-middle, #header-right 
            { 
                text-align: center;
                line-height: 60px; 
                margin: 0; 
                padding: 0;
                float: left;                         
            }  
            #header-left
            {  
                background: #999999;
                width: 25%;             
            }  
            #header-middle
            {  
                background: #888888;
                width: 60%;             
            } 
            #header-right
            {  
                background: #999999;
                width: 15%;             
            }                              
            #container-content 
            { 
                margin: 0; 
                overflow: auto; 
                padding: 50px 0 50px 0; 
                width: 100%; 
            }
            #content
            {
            }
            #container-footer 
            { 
                background:#eee; 
                border: 0px solid #666; 
                bottom:0; 
                height:60px; 
                left:0; 
                position:fixed; 
                width:100%; 
            }
            #footer-left, #footer-middle, #footer-right 
            { 
                text-align: center;
                line-height: 60px; 
                margin: 0; 
                float: left;                         
            }  
            #footer-left
            {  
                background: #999999;
                width: 25%;             
            }  
            #footer-middle
            {  
                background: #888888;
                width: 60%;             
            } 
            #footer-right
            {  
                background: #999999;
                width: 15%;             
            }                                                              
        </style>
    </head>
    <body>
        <div id="container-main">
            <div id="container-left">            
                Content 1
            </div>
            <div id="container-middle">
                <div id="container-header">
                    <div id="header-left">
                        Header Left
                    </div>
                    <div id="header-middle">
                        Header Middle
                    </div>
                    <div id="header-right">
                        Header Right
                    </div>
                </div>
                <div id="container-content">
                    <div id="content">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                        </p>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                        </p>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                        </p>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                        </p>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                        </p>
                    </div>
                </div>
                <div id="container-footer">
                    <div id="footer-left">
                        Footer Left
                    </div>
                    <div id="footer-middle">
                        Footer Middle
                    </div>
                    <div id="footer-right">
                        Footer Right
                    </div>
                </div>
            </div>
            <div id="container-right">
                Content 3
            </div>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:58:48.723

尝试这个

在这里小提琴：- [http://jsfiddle.net/z837M/](http://jsfiddle.net/z837M/)

我所做的更改不是用背景包装内容，您可以使用 background-size 如果您打算稍后放置任何图像，您可以使用 100% 或覆盖作为其值。使位置 Fixed 和 Z-Index :-1

## CSS

```
#container-main
            {      
                background: #888888;   
                -webkit-background-size: 100%;
                -moz-background-size: 100%;
                -o-background-size: 100%;
                background-size: 100%;
                margin: 0;
                padding: 0;
                font: 1.5em "Trebuchet MS", Helvetica, sans-serif;    
                height: auto;               
                min-height: 100%;
                min-width: 100%;
               position:fixed;
               z-index:-1;
            } 
```

## html

```
 <div id="container-left">            
        Content 1
    </div>
    <div id="container-middle">
        <div id="container-header">
            <div id="header-left">
                Header Left
            </div>
            <div id="header-middle">
                Header Middle
            </div>
            <div id="header-right">
                Header Right
            </div>
        </div>
        <div id="container-content">
            <div id="content">

                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.                    
                </p>

            </div>
        </div>
        <div id="container-footer">
            <div id="footer-left">
                Footer Left
            </div>
            <div id="footer-middle">
                Footer Middle
            </div>
            <div id="footer-right">
                Footer Right
            </div>
        </div>
    </div>
    <div id="container-right">
        Content 3
    </div> 
```

## 更新

使用表格显示使列占据全高。由于您有一些固定的元素，因此它们位于何处并不重要。[**小提琴**](http://jsfiddle.net/4nBzc/)

### CSS

```
 div.column {
        display:table-cell;
    }
    div.section {
        display:table-row;
    } 
```

### HTML

```
 <div id="container-wrapper" class="section">
        <div id="container-left" class="column">
            <div class="container-content">Content 1</div>
        </div>
        <div id="container-middle" class="column">
            <div class="container-content">
                <div id="content">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                </div>
            </div>
        </div>
        <div id="container-right" class="column">Content 3</div>
    </div> 
```

# c# - 如何向 Sharepoint 库提交匿名 Infopath 表单

> ID：15934743
> 
> 赞同：1
> 
> 时间：2013-04-10T19:31:06.917
> 
> 标签：c#, sharepoint-2010, infopath2010

我让管理员批准的 InfoPath 表单通过 CA 上传到我的网站集并获得批准。我通过 Web 部件将表单附加到我的 SharePoint 网站，并且我能够以匿名用户的身份查看它。但是，我无法以匿名用户身份将表单数据提交到我的 SharePoint 库。在库中，我授予匿名用户在库中添加项目和查看项目的权限。

我关注了一些网站并尝试添加自定义代码以提交，但我得到：处理表单时出现严重错误....

使用按钮上的规则调用数据连接，我得到：表单无法提交到指定的SharePoint列表或文档库。SharePoint 位置可能是只读的，或者您可能无权访问它。服务器的 Windows 事件日志中添加了一个条目。

谁能指出我正确的方向？当我登录到 SharePoint 网站时，提交工作正常。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T20:06:19.527

试试这个代表

 `````
SPSecurity.RunWithElevatedPrivileges(delegate()
{
//yoursubmitcode
}); 
`````

# jquery - IE7 中的 Kendo UI 网格可选选项

> ID：15934744
> 
> 赞同：1
> 
> 时间：2013-04-10T19:31:07.837
> 
> 标签：jquery, frameworks, grid, kendo-ui

我使用 Kendo UI 创建了一个网格。

我的目标是当我悬停（或鼠标悬停）网格中的每一行时不显示任何突出显示。到目前为止，这在 IE8、IE9、Firefox 中对我有用，但不适用于 IE7。

谢谢

这是我的网格的代码：

```
$("#Summary").kendoGrid({
    navigatable : true,
    scrollable : false,
    filterable : isFilterable,
    sortable : true,
    resizable : true,
    previousNext:false,
    pageable : {

        refresh : false,
        input : false,
        numeric : true,
        buttonCount:4,
        pageSizes : ddResultsPerPage
    },
    rowTemplate : summaryRowtemplate,
    altRowTemplate : summaryAltRowtemplate,
    dataBound : formatSummaryRow,
    columns : summaryColumns
}); 
```

# bash - nohup 与双与号 (&&) 而不是分号 (;) 一起使用时不起作用

> ID：15934751
> 
> 赞同：5
> 
> 时间：2013-04-10T19:31:24.420
> 
> 标签：bash, nohup

我有一个脚本，用于`ssh`登录到远程机器、`cd`特定目录，然后启动一个守护进程。原始脚本如下所示：

```
ssh server "cd /tmp/path ; nohup java server 0</dev/null 1>server_stdout 2>server_stderr &" 
```

这个脚本似乎工作正常。但是，当用户输入错误的路径导致`cd`失败时，它并不可靠。由于 ，即使失败`;`，该命令也会尝试运行该命令。`nohup``cd`

明显的修复不起作用：

```
ssh server "cd /tmp/path && nohup java server 0</dev/null 1>server_stdout 2>server_stderr &" 
```

也就是说，SSH 命令在服务器停止之前不会返回。放在`nohup`前面`cd`而不是前面`java`没有用。

谁能帮我解决这个问题？你能解释一下为什么这个解决方案不起作用吗？谢谢！

**编辑：** cbuckley 建议使用`sh -c`，我从中得出：

```
ssh server "nohup sh -c 'cd /tmp/path && java server 0</dev/null 1>master_stdout 2>master_stderr' 2>/dev/null 1>/dev/null &" 
```

但是，现在退出代码总是`0`在`cd`失败时；而如果我这样做，`ssh server cd /failed/path`那么我会得到一个真正的退出代码。建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T22:58:52.927

请参阅[Bash 的运算符优先级](http://tldp.org/LDP/abs/html/opprecedence.html)。

被`&`附加到整个语句，因为它的优先级高于`&&`. 您无需对此`ssh`进行验证。只需在你的 shell 中运行它：

```
$ sleep 100 && echo yay &
[1] 19934 
```

如果`&`仅附加到`echo yay`，那么您的 shell 将休眠 100 秒，*然后*报告后台作业。但是，整个过程`sleep 100 && echo yay`都是后台运行的，您会立即收到工作通知。运行`jobs`将显示它挂出：

```
$ sleep 100 && echo yay &
[1] 20124
$ jobs
[1]+  Running                 sleep 100 && echo yay & 
```

您可以使用括号在 周围创建一个子shell `echo yay &`，为您提供您所期望的：

```
sleep 100 && ( echo yay & ) 
```

这类似于 using `bash -c`to run `echo yay &`：

```
sleep 100 && bash -c "echo yay &" 
```

把这些扔进一个`ssh`，我们得到：

```
# using parenthesis...
$ ssh localhost "cd / && (nohup sleep 100 >/dev/null </dev/null &)"
$ ps -ef | grep sleep
me 20136     1  0 16:48 ?        00:00:00 sleep 100

# and using `bash -c`
$ ssh localhost "cd / && bash -c 'nohup sleep 100 >/dev/null </dev/null &'"
$ ps -ef | grep sleep
me 20145     1  0 16:48 ?        00:00:00 sleep 100 
```

将此应用于您的命令，我们得到

```
ssh server "cd /tmp/path && (nohup java server 0</dev/null 1>server_stdout 2>server_stderr &)" 
```

或者：

```
ssh server "cd /tmp/path && bash -c 'nohup java server 0</dev/null 1>server_stdout 2>server_stderr &'" 
```

另外，关于你对帖子的评论，

> 对，`sh -c`总是返回 0。例如，`sh -c exit 1`错误代码为 0"

这是不正确的。直接从手册页：

> Bash 的退出状态是脚本中执行的最后一个命令的退出状态。如果没有执行任何命令，则退出状态为 0。

确实：

```
$ bash -c "true ; exit 1"
$ echo $?
1
$ bash -c "false ; exit 22"
$ echo $?
22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:26:04.717

ssh 服务器 "test -d /tmp/path" && ssh 服务器 "nohup ... &"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:34:36.433

答案汇总：

*   坏：`sh -c`用于包装整个`nohup`命令对我的目的不起作用，因为它不返回错误代码。（@cbuckley）
*   好的：`ssh <server> <cmd1> && ssh <server> <cmd2>`工作但速度慢得多（@joachim-nilsson）
*   好：创建一个shell脚本`<server>`，连续运行命令并返回正确的错误代码。

最后一个是我最终使用的。如果了解外壳内部原理的人可以向我解释，我仍然有兴趣了解为什么原始用例不起作用！

# android - Async Task 需要点击两次按钮才能完成加载

> ID：15934754
> 
> 赞同：1
> 
> 时间：2013-04-10T19:31:36.267
> 
> 标签：android, android-asynctask

下面是我的 LoginActivity 的代码，其中我基本上是从 AsyncTask 中的 URl 获取 JSON 和图像。奇怪的是，我的 onClick() 的 else 部分总是执行（即 toast 显示）。只有当我再次单击该按钮时，它才会跳转到下一个活动。

```
public class LoginActivity extends Activity
{

    Button getBunks;
    CheckBox detailscheck;
    EditText regText, bdayText;
    String storedReg, storedBDay;
    public static final String PREFS_NAME = "MyPrefsFile";
    String predataURL;
    String prephotoURL;
    public static URL dataUrl;
    public static String dataUri = "http://ankit.im/websisAPI/parser.php";
    ProgressDialog progressDialog;
    JSONObject temp = null;
    Bitmap tmpPhoto;
    boolean doneFlag = false;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getBunks = (Button) findViewById(R.id.getBunkButton);
        detailscheck = (CheckBox) findViewById(R.id.rememberOpts);
        regText = (EditText) findViewById(R.id.regNo);
        bdayText = (EditText) findViewById(R.id.bday);
        detailscheck.setChecked(true); // To avoid Nag

        try
        {
            dataUrl = new URL("http://ankit.im/websisAPI/parser.php");
        } catch (MalformedURLException e)
        {
            e.printStackTrace();
        }

        // Check if login details are already stored

        SharedPreferences prefs = this.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
        storedReg = prefs.getString("regno", null);
        storedBDay = prefs.getString("bday", null);

        // The Following Listeners Check if the user has entered
        // appropriate Data in the Fields
        // Check is on enter key press and on Focus Change

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        final SharedPreferences.Editor editor = settings.edit();

        regText.setOnFocusChangeListener(new OnFocusChangeListener()
        {

            @Override
            public void onFocusChange(View v, boolean hasFocus)
            {
                if (detailscheck.isChecked())
                {
                    if (!hasFocus)
                    {
                        if (regText.getText().toString() != "" || regText.getText() != null)
                        {
                            editor.putString("regno", regText.getText().toString());
                            editor.commit();
                            // Toast.makeText(getApplicationContext(),
                            // "Reg No Stored", Toast.LENGTH_SHORT).show();
                        }
                    }

                }
            }
        });

        bdayText.setOnEditorActionListener(new OnEditorActionListener()
        {

            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
            {
                if (actionId == EditorInfo.IME_ACTION_SEARCH || actionId == EditorInfo.IME_ACTION_DONE || event.getAction() == KeyEvent.ACTION_DOWN
                        && event.getKeyCode() == KeyEvent.KEYCODE_ENTER)
                {
                    editor.putString("bday", bdayText.getText().toString());
                    editor.commit();
                    // Hide Virtual Keyboard
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(regText.getWindowToken(), 0);

                    return true;

                }
                return false;
            }
        });

        bdayText.setOnFocusChangeListener(new OnFocusChangeListener()
        {

            @Override
            public void onFocusChange(View v, boolean hasFocus)
            {
                if (detailscheck.isChecked())
                {
                    if (!hasFocus)
                    {
                        if (bdayText.getText().toString() != "" || bdayText.getText().toString() != null)
                        {
                            editor.putString("bday", bdayText.getText().toString());
                            editor.commit();
                            // Toast.makeText(getApplicationContext(),
                            // "BDay Stored", Toast.LENGTH_SHORT).show();
                        }
                    }

                }
            }
        });

        // Handle the button click
        getBunks.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {

                new DownloadStudentData().execute();

                if (doneFlag == true)
                {
                    // GlobalVars.showAttendanceData();
                    Intent actChange = new Intent(v.getContext(), DetailsTabViewActivity.class);
                    startActivity(actChange);
                    finish();
                } else if (doneFlag == false)
                {
                    Toast.makeText(getApplicationContext(), "Error in Downloading, Please Check Details or Try Again", Toast.LENGTH_LONG).show();
                }
            }
        });

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    protected void onStart()
    {

        super.onStart();
        if (storedReg != null && storedBDay != null)
        {
            regText.setText(storedReg);
            bdayText.setText(storedBDay);
        }

    }

    private class DownloadStudentData extends AsyncTask<Void, Void, Void>
    {
        // ProgressDialog progressDialog;
        final JSONParser jsp = new JSONParser();

        @Override
        protected void onPreExecute()
        {
            // super.onPreExecute();
            progressDialog = new ProgressDialog(LoginActivity.this);
            progressDialog.setCancelable(true);
            progressDialog.setTitle(" Downloading Data ");
            progressDialog.setMessage("Please Wait, Loading...");
            progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            // progressDialog.setProgress(0);
            progressDialog.show();

        }

        @Override
        protected Void doInBackground(Void... voids)
        {

            temp = new JSONObject();
            temp = jsp.getJSONFromUrl(dataUri); // get the data
            prephotoURL ="http://218.248.47.9/websis/control/img/P12703.JPGimgId=P12703";

            try
            {
                InputStream in = new java.net.URL(prephotoURL).openStream();
                tmpPhoto = BitmapFactory.decodeStream(in);
            } catch (Exception e)
            {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(Void v)
        {

            GlobalVars.setJSON(temp);
            GlobalVars.setPhotoURL(prephotoURL);
            GlobalVars.setBitmap(tmpPhoto);
            doneFlag = true;

            try
            {
                GlobalVars.setPhotoURL(temp.getString("photolink"));
            } catch (JSONException e)
            {
                e.printStackTrace();
            }

            progressDialog.dismiss();
        }
    }

    @Override
    protected void onPause()
    {
        super.onPause();
        if (progressDialog != null)
            progressDialog.dismiss();
    }
} 
```

GlobalVars 只是一个包含公共静态变量和方法的全局类。

另外我不确定这是否是在后台从 URL 下载图像的正确方法，任何更好的选择将不胜感激（URLImageViewHelper 不适合我的需要）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:35:55.523

AsyncTask 在不同的线程上运行，并且不会及时完成以更改`doneFlag`. （这就是为什么它是异步的。）

```
new DownloadStudentData().execute(); // Takes time to complete

if (doneFlag == true) { ... } // Happens milliseconds later, AsyncTask still running
else if (doneFlag == false) { ... } 
```

您需要在`onPostExecute()`.

* * *

几个快速提示：

*   `if (doneFlag)`是 的简写`if (doneFlag == true)`。
*   一个布尔值只能有两种状态，你不需要使用`else if()`，只需使用`else {...}`

# mysql - 在使用 MySQL 的 Rails 应用程序中以 UTF8 与标准拉丁文编码数据的建议

> ID：15934755
> 
> 赞同：0
> 
> 时间：2013-04-10T19:31:45.580
> 
> 标签：mysql, ruby-on-rails, utf-8

我正在开发一个 Rails 应用程序，直到今天我尝试对我通过应用程序更改的数据进行一些 ETL 时，一切都进展顺利。我在比较 2 列。一个是标准的，另一个是 UTF8。我确信我可以通过解码其中一列进行比较来解决这个问题，但我有一个更大的问题。Rails 应用程序发生的情况正常吗？从一开始就在我的整个数据库中使用 UTF8 编码是否可取？database.yml 设置为使用 UTF8 编码，我应该将其设置为拉丁文吗？我们现在不会使用任何非凡的符号，但我们是一家国际公司，也许该应用程序可以传播。

我会很感激任何建议。

# c# - asp.net c# regex n "\n"s 加空格到两个 "\n"

> ID：15934757
> 
> 赞同：-2
> 
> 时间：2013-04-10T19:32:00.357
> 
> 标签：c#, regex

谁能帮我写一个正则表达式？让一个字符串将“/n /n /n”合并到“/n/n”

例如：

```
"abc   \n\n   \n \n    \n   \n   \n   \n   ddfdfd" === "abc   \n\n  ddfdfd" 
```

所以只删除“\n”之间的空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:34:45.447

您需要使用替换方法，将匹配的表达式替换为字符串。

听起来您想匹配`\n[\s]*\n`，并将其替换为 simple `\n\n`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:35:59.523

这是一个快速的方法。

```
string s = "abc   \n\n   \n \n    \n   \n   \n   \n   ddfdfd";

string s2 = Regex.Replace(s, @"\n\s*\n", "\n\n"); 
```

# html - 是否可以使用 Bootstrap 在一行中有多个控制组

> ID：15934765
> 
> 赞同：0
> 
> 时间：2013-04-10T19:32:24.787
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 创建一个简单的网页。当我创建一个包含一些个人信息的表单时，比如名字、姓氏、电子邮件地址等。有时我更喜欢在同一行中创建 2 个控制组（名字标签和输入字段，以及姓氏标签和输入字段） . 我怎样才能实现它？**在Horizo​​ntal-form**中这样做并不明显。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:40:10.927

你不能用水平形式做到这一点，你必须使用[`.form-inline`Twitter Bootstrap 类](http://getbootstrap.com/2.3.2/base-css.html#forms)。

```
<form class="form-inline">
    <label>First name</label>
    <input type="text" class="input-small" placeholder="First name"/>
    <label>Last name</label>
    <input type="text" class="input-small" placeholder="Last name"/>
</form> 
```

[http://jsfiddle.net/fq4wm/](http://jsfiddle.net/fq4wm/)

或者，您也可以以水平形式执行此操作，但您必须覆盖许多类和属性，我不建议这样做。更好的方法是对这些东西使用默认的 Twitter Bootstrap 类。

编辑：您可以在一种形式中组合水平和内联类，如下所示：

```
<form class="form-inline">
    <label>First name</label>
    <input type="text" class="input-small" placeholder="First name"/>
    <label>Last name</label>
    <input type="text" class="input-small" placeholder="Last name"/>
    <br/><br/><br/>
    <div class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="inputEmail">Email</label>
            <div class="controls">
                <input type="text" id="inputEmail" placeholder="Email"/>
            </div>
        </div>
        <div class="control-group">
           <label class="control-label" for="inputPassword">Password</label>
           <div class="controls">
               <input type="password" id="inputPassword" placeholder="Password"/>
           </div>
         </div>
     </div>
</form> 
```

[http://jsfiddle.net/fq4wm/6/](http://jsfiddle.net/fq4wm/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:37:36.770

更改类以使其成为内联表单：

```
<form class="form-inline">
   ...
</form> 
```

然后更容易将字段放置在不同的行和列中。

# c++ - 根据其他变量设置变量

> ID：15934767
> 
> 赞同：0
> 
> 时间：2013-04-10T19:32:30.457
> 
> 标签：c++

```
header1.h

#define MaxNum 10
#define MinNum 1
//similar 100 other variables defined 

main.cpp

#include header1.h
main()
{
  int size;
  string first = "MaxNum"; //could be any of the variable name defined in header file 

  size = MaxNum ; 
```

我在头文件中定义了某些变量。主要是，根据“first”的值，我需要设置“size”的值。这是可行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:38:48.430

我猜你想拥有

```
size = MaxNum 
```

如果`first == "MaxNum"`和

```
size = MinNum 
```

如果`first == "MinNum"`. 如果（可供选择的变量集）的可能值集很小，`first`您可以简单地将赋值放在一系列语句周围。最后，放一条语句，写一条错误信息。`if``else if``else`

但是，您必须对每种情况进行*硬编码：*

```
if (first == "MaxNum") {
    size = MaxNum;
}
else if (first == "MinNum") {
    size = MinNum;
}
//... 
```

因此，随着变量数量的增加，您决定分配给的代码会`size`变得更大。这被认为是糟糕的风格，非常**难以维护**并且容易出错。

如果您不想这样做，**请不要**在程序中使用多个变量，而是使用一个容器变量来包含所有这些可能的键及其值。它被称为**关联容器**，在 C++ 中有[`std::map`](http://en.cppreference.com/w/cpp/container/map)实现这种数据结构的类型。

```
// Your container for the sizes (or whatever you want to call it)
std::map<std::string, int> sizes; 
sizes["MinNum"] = 1;
sizes["MaxNum"] = 100;
// ... more values ...

// Accessing this container with a variable as the key:
size = sizes[first]; 
```

如您所见，使用字符串变量作为键访问此容器非常容易。`sizes[first]`简单地为您提供容器中的值，其键等于变量当前内容的值`first`。

关于 C++（和 C）源代码的一个非常重要的事实是，在运行时您无法访问变量的名称。所以本质上，它们可以被重命名而不会影响你的程序。当您编写对您的代码（“元代码”）进行操作的代码时，您想要拥有的（查询变量、枚举、类、函数、它们的参数等的名称）被称为**自省**或**元编程。**

默认情况下，C++ 不提供元编程工具（我知道的唯一例外：`typeid`，但变量名/定义没有）。默认情况下，您可以绕过此限制并在构建过程中包含一些额外的步骤，该步骤会解析这些定义的头文件并以在运行时可访问的不同方式存储它们。但地图是更好的方式，相信我。

# tomcat - 对 accesslogvalve 目录使用环境变量

> ID：15934769
> 
> 赞同：0
> 
> 时间：2013-04-10T19:32:35.483
> 
> 标签：tomcat, tomcat-valve

我想从 setenv.bat 中的值填充 accesslogvalve 中的“dir”。前任：

```
<Valve
className="org.apache.catalina.valves.AccessLogValve"
directory="${my.logs.dir}"
prefix="access_log"
fileDateFormat="yyyy-MM-dd.HH"
suffix=".log"
pattern="%t %H cookie:%{SESSIONID}c request:%{SESSIONID}r  %m %U %s %q %r"/> 
```

我在 setenv.bat 中指定了“my.logs.dir”

`set my.logs.dir=C:\xyz\abc`

当我启动tomcat时，我在tomcat安装下看到一个文件夹${my.logs.dir}。问题是当 tomcat 启动时 ${my.logs.dir} 没有被环境变量替换。如果我给出硬编码值，例如 `dir="C:\xyz\abc"`，它可以正常工作。

谁能指导我在服务器启动时用环境中的值替换 ${my.logs.dir} ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:50:11.293

我认为 Tomcat 配置文件中默认不提供环境变量。但是，系统属性是。因此，如果您将变量添加为系统属性而不是环境变量，它应该可以工作。

如果您出于某种原因绝对必须使用环境变量，Tomcat 文档在其关于可以设置为自定义 Tomcat 行为的[系统属性的部分中引用了属性替换：](http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html#Property_replacements)

> org.apache.tomcat.util.digester。PROPERTY_SOURCE
> 
> 将此设置为实现 org.apache.tomcat.util.IntrospectionUtils.PropertySource 的类的完全限定名称。需要有一个不带参数的公共构造函数。
> 
> 使用它来添加属性源，当在 Tomcat 解析的 XML 文件中找到 ${parameter} 表示的参数时，将调用该属性源。

# objective-c - NSXMLParser 不解析某些内容

> ID：15934775
> 
> 赞同：-1
> 
> 时间：2013-04-10T19:33:06.830
> 
> 标签：objective-c, cocoa-touch, nsxmlparser

我的 iOS 应用程序解析从远程服务器获取的 xml（我无法以任何方式影响）。当它遇到如下的 xml 标签时：

```
<tag a="x" b="y" c="z">
  this is a
  <aabb/>
  content
  <ccdd/>
  string
</tag> 
```

它只解析内容的第一部分（“这是一个”），而忽略了这些单个标签之后的所有内容。这些单个标签中有多少个无关紧要，如果它只有一个标签，它也会跳过其余部分。我真的不明白这种行为，有没有解释或克服这个问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T20:06:11.170

# php - 用php变量中的条件运算符替换if语句

> ID：15934777
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:10.773
> 
> 标签：php, conditional-operator

我需要从以下位置更改我的 PHP 代码：（$a 包含带有 html 标记的解析文本，我想向其附加更多数据，检查是否存在视频链接，附加 echo 语句）

```
$cont = '<div>'.$a.'<br>.'
  if (!empty($a->find('object', 0)->data)){
    echo '<a target="_blank" href="'.$a->find('object', 0)->data.'">
    Play Video</a>&nbsp;&nbsp;';
  }
  if (!empty($a->find('object', 1)->data)){
    echo '<a target="_blank" href="'.$a->find('object', 1)->data.'">
    Play Video</a>&nbsp;&nbsp;';
  }
.'</div>'; 
```

我知道这是错误的，所以我需要帮助来实现比较运算符。就像是：

```
$cont = '<div>.'$a.'<br>'.
  ($a->find('object', 0)->data > 0 ? '<a target="_blank" 
  href="'.$a->find('object', 0)->data.'">Play Video</a>&nbsp;&nbsp;')
  ($a->find('object', 1)->data > 0 ? '<a target="_blank" 
  href="'.$a->find('object', 1)->data.'">Play Video</a>&nbsp;&nbsp;')
  .'</div>'; 
```

但是我在第一个 $a->find 中得到一个语法错误“（”。有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:35:24.310

您必须添加由分号引入的 else 部分：

```
$cont = '<div>'.$a.'<br>'.
  ($a->find('object', 0)->data > 0 ? '<a target="_blank" 
  href="'.$a->find('object', 0)->data.'">Play Video</a>&nbsp;&nbsp;':'').
  ($a->find('object', 1)->data > 0 ? '<a target="_blank" 
  href="'.$a->find('object', 1)->data.'">Play Video</a>&nbsp;&nbsp;':'') // :'' here
  .'</div>'; 
```

# c++ - 从代码地址获取代码行

> ID：15934778
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:20.353
> 
> 标签：c++, c, gcc, debug-symbols

我可以通过 .map 文件获得地址对应的功能。我想更进一步，并打印地址对应的代码行。我指的地址是`lr`寄存器。我知道在`lr`上一个函数调用之后会指向代码行，但是获取该行仍然会有所帮助。

# .net - Windows Mobile 上的 VB.NET 中的类型转换

> ID：15934779
> 
> 赞同：1
> 
> 时间：2013-04-10T19:33:21.613
> 
> 标签：.net, vb.net, windows-mobile, type-conversion

我正在为运行带有 .NET 2.0 SP 1 和 VB.NET 的 Windows Mobile 的条码扫描器维护一个应用程序。该应用程序使用 PL/SQL 与 Oracle 数据库集成。

我有一个 SQL 查询，它返回一个 DataTable，其中包含要使用扫描仪挑选的项目列表，有时数量是十进制数。

问题是我无法将十进制数（例如 0,8）从字符串转换为双精度数。我已经尝试了以下所有方法：

```
Dim quantity As String = "0,8"
Dim result As Double = Convert.ToDouble(quantity)
Dim result As Double = Double.Parse(quantity)
Dim result As Double = CDbl(quantity) 
```

在所有情况下，结果都是 8 而不是 0,8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:30:14.180

CF 的解析能力有限。我假设设备文化设置为 en-US，在这种情况下，您可以执行以下操作：

```
Dim quantity As String = "0,8"
Dim result As Double = Double.Parse(quantity.Replace(',', '.')) 
```

如果您希望它对设备的当前设置更具区域设置意识，则可以使用以下方法更安全：

```
Dim quantity As String = "0,8"
Dim result As Double

If CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator == "."
    result = Double.Parse(quantity.Replace(',', '.'))
Else
    result = Double.Parse(quantity)
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:38:36.507

看起来你的`CurrentCulture`has`.`作为小数分隔符，而你试图用它来解析值`,`。

试试看：

```
System.Threading.Thread.Current.CurrentCulture.NumberFormat.NumberDecimalSeparator = ","
Dim result As Double = Double.Parse(quantity) 
```

# css - CSS：变换样式：preserve-3d AND 溢出：隐藏

> ID：15934783
> 
> 赞同：3
> 
> 时间：2013-04-10T19:33:29.337
> 
> 标签：css, overflow, transform

我的网站上有横幅来显示一些云彩。你可以在这里看到它：http: [//sharix.dyndns.org/StackOverflowVisible.php](http://sharix.dyndns.org/StackOverflowVisible.php)

这些云应该被限制在横幅框内。这一直工作到今天。它停止了，我没有碰任何东西。现在他们似乎忽略了文件中的`overflow: hidden;`规则。`default.css`向 div添加第二条`overflow: hidden;`规则`#world`似乎有效，但它违反了`transform-style: preserve-3d;`规则。你可以在这里看到它：http: [//sharix.dyndns.org/StackOverflowHidden.php](http://sharix.dyndns.org/StackOverflowHidden.php)

如何让 3d 转换和溢出规则都工作，就像直到今天一样？文件中有趣的部分`default.css`：

```
#header {
background: #4b6983;
border: 2px solid #7590ae;
text-align: center;
padding: 0px;
margin: 10px 10px 0px 10px;
color: #ffffff;
text-shadow:0px 1px 5px black;
}

#viewport {
overflow: hidden;
background-image: $gradient;
background-image: $oGradient;
background-image: $mozGradient;
background-image: $webkitGradient;
background-image: $msGradient;
}

#header-content:hover {
z-index: 2;
transform: translateZ( 1px );
-moz-transform: translateZ( 1px );
-webkit-transform: translateZ( 1px );
-o-transform: translateZ( 1px );
-ms-transform: translateZ( 1px );
}

#world:before {
    content: "";
    background: url(zvezde.png);
    opacity: $starOpacity;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    position: absolute;
    z-index: -1;
}

#world {
overflow: hidden; /*added today to confine the clouds. breaks preserve-3d*/
position: relative;
top:-100px;
height: 150px;
width:140%;
margin-left:-20%;
margin-bottom:-100px;
transform-style: preserve-3d;
-webkit-transform-style: preserve-3d;
-moz-transform-style: preserve-3d;
-o-transform-style: preserve-3d;
pointer-events:none;
}

.cloudBase {
position: absolute;
left: 50%;
top: 250px;
width: 20px;
height: 20px;
margin-left: -10px;
margin-top: -10px;
transform-style: preserve-3d;
-webkit-transform-style: preserve-3d;
-moz-transform-style: preserve-3d;
-o-transform-style: preserve-3d;
}

.cloudLayer {
/* display:none; */
position: absolute;
left: 50%;
top: 50%;
width: 256px;
height: 256px;
margin-left: -128px;
margin-top: -128px;
-webkit-transition: opacity .5s ease-out;
-moz-transition: opacity .5s ease-out;
-o-transition: opacity .5s ease-out;
} 
```

HTML：

```
<body>
        <div id="page">
            <div id="header">
                <div id="viewport">
                    <div id="header-content">
                        <h1>Title text</h1>
                        ☁ ☁ ☁
                    </div>
                    <div id="world"></div>
                </div>
                <script type="text/javascript" src="/scripts/oblaki-full.js"></script>
            </div>
            <div id="footer">
                10\. April 2013  ~  server uptime:  5:23  ~  load averages: 0.32, 0.39, 0.45             </div>
        </div>
</body> 
```

# ios - UITableViewCell 的 ImageView 可以覆盖整个背景吗？

> ID：15934787
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:36.687
> 
> 标签：ios, ios6, uikit

我正在为我的待办事项列表应用程序构建一个滑动功能。当用户水平滑动（拖动）单元格时，我想显示一个背景图像，覆盖屏幕边缘和单元格边缘之间的间隙。

当我将图像添加到 imageView-property 时，它只是跟随单元格。我可以以某种方式修复它以覆盖整个背景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:16:51.317

听起来你想做类似**Clear**的东西。

您需要做的是：

*   子类`UITableViewCell`
*   像这样添加您的图像视图..

    ```
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.bounds];
    imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    imageView.image = myImage;
    [self insertSubview:imageView atIndex:0]; //I'm not at a compiler, so I'm not 100% on this, but it's something like this. 
    ```

*   添加一个`UIGestureRecognizer`来处理手势，并设置拖动和适当的操作。

# python - 如何遍历列表以查找特定长度的单词？

> ID：15934788
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:41.307
> 
> 标签：python

例如，给定一个列表，

```
F=['MIKE', 'BALL', 'FISH', 'BAT', 'BEAR', 'CAT', 'AT', 'ALLY'] 
```

我将如何遍历所述列表以查找用户输入的具有一定长度的所有单词？我以为会..

```
number=input("How long would you like your word to be?")
possible_words=[]
for word in F:
     if word(len)=number:
          possible_words+=word 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:34:35.470

这会给你一个`list`长度为的单词`N`

```
possible_words = [x for x in F if len(x) == N] 
```

*请注意，您有一个`list`，而不是字典*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:37:11.313

你也可以`filter`在这里使用：

```
 filter(lambda x:len(x)==number, F) 
```

**帮助（过滤器）**：

```
In [191]: filter?
Type:       builtin_function_or_method
String Form:<built-in function filter>
Namespace:  Python builtin
Docstring:
filter(function or None, sequence) -> list, tuple, or string

Return those items of sequence for which function(item) is true.  If
function is None, return the items that are true.  If sequence is a tuple
or string, return the same type, else return a list. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:14:51.963

您可以使用内置的过滤器功能。

```
print filter(lambda word: len(word) == N, F) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T21:27:36.687

尽管就代码大小和整体优雅程度而言，这比其他答案“逊色”，但它与原始代码的相似之处可能有助于理解该实现的错误。

```
F=['MIKE', 'BALL', 'FISH', 'BAT', 'BEAR', 'CAT', 'AT', 'ALLY']

number=input("How long would you like your word to be?")
possible_words=[]
for word in F:
    if len(word) == number:
        possible_words.append(word) 
```

要检查字符串的长度，请使用 len(string) 而不是 string(len)。possible_words 是一个列表，要向其中添加元素，请使用 .append() 而不是 +=。+= 可用于增加数字或将单个字符添加到字符串。请记住在进行比较时使用双等号 (==) 而不是单等号 (=)。

# api - 谷歌地图 KML 图层不会缩放

> ID：15934792
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:51.800
> 
> 标签：api, google-maps, kml

我有一个使用 API V3 的嵌入式谷歌地图，但我无法将其默认缩放为 1 以外的任何值。

我脑子里的JS是：

```
 var map1;
            var src1 = 'https://latitude.google.com/latitude/apps/badge/api?user=8963899225283336226&type=kml';
            function initialize1() {
                map1 = new google.maps.Map(document.getElementById('map-canvas'), {
                zoom: 7,
                mapTypeId: google.maps.MapTypeId.TERRAIN
              });
              loadKmlLayer1(src1, map1);
            } 

            google.maps.event.addDomListener(window, 'load', initialize1);

            function loadKmlLayer1(src1, map1) {
              var kmlLayer1 = new google.maps.KmlLayer(src1, {
                suppressInfoWindows: false,
                clickable: true,
                preserveViewport: false,
                map: map1
              });
            } 
```

HTML 只是地图画布 div，仅此而已。看看这里的一些线程，它看起来与检测视口和重置边界有关。

我发现一个线程建议添加如下内容：

```
 google.maps.event.addListener(kmlLayer1, 'defaultviewport_changed', function() {
            var bounds = kmlLayer1.getDefaultViewport();
            map.setCenter(bounds.getCenter());
            }) 
```

但这没有任何区别。我绝不是 JS 专家，虽然我基本了解上面大部分代码中发生的事情，但我还不够先进，无法即兴创作，甚至无法理解它应该放在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T20:53:48.470

谢谢莫勒。

我对此进行了增强，并且可以正常工作：

```
google.maps.event.addListener(kmlLayer, 'status_changed', function () {
  console.log('kml loaded:');
  google.maps.event.addListenerOnce(map, 'zoom_changed', function () {
    console.log('zoom_changed:');
    map.setZoom(7);
    map.setCenter(new google.maps.LatLng(0, 0));
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:39:00.963

API 将设置视口以包含所有 KML 功能，这将覆盖缩放设置。

缩放更改后重置缩放（就像加载 KML 图层时一样）

```
google.maps.event.addListenerOnce(map1, 'zoom_changed', function() {
  this.setZoom(7);
}) 
```

# android - Maven 找不到外部 jar 的注释

> ID：15934793
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:52.480
> 
> 标签：android, maven, maven-3, android-build, android-maven-plugin

我正在将一个简单的 android 应用程序转换为 Maven，并且遇到了一个包含我在代码中使用的注释类的 3rd 方 jar (ActiveAndroid) 的障碍。我已经确认 jar 确实包含注释类文件，当我将它包含在 libs 目录中并使用 Eclipse 编译时，该 jar 工作正常。

**这是我的 POM.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.danh32</groupId>
    <artifactId>testapp</artifactId>
    <version>1.0</version>
    <packaging>apk</packaging>
    <name>testapp</name>

    <properties>
        <platform.version> 4.1.1.4</platform.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>actionbarsherlock</artifactId>
            <version>4.2.0</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>com.activeandroid</groupId>
            <artifactId>activeandroid</artifactId>
            <version>LATEST</version>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml
                    </androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native
                    </nativeLibrariesDirectory>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

**这是我的编译错误：**

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 19.339s
[INFO] Finished at: Wed Apr 10 14:18:51 CDT 2013
[INFO] Final Memory: 17M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) on project testapp: Compilation failure: Compilation failure:
[ERROR] /Users/danh32/code/android/workspace-android/TestApp/src/com/danh32/testapp/db/DSLocation.java:[9,43] cannot find symbol
[ERROR] symbol  : class ConflictAction
[ERROR] location: @interface com.activeandroid.annotation.Column
[ERROR] /Users/danh32/code/android/workspace-android/TestApp/src/com/danh32/testapp/db/DSLocation.java:[15,32] cannot find symbol
[ERROR] symbol  : method unique()
[ERROR] location: @interface com.activeandroid.annotation.Column
[ERROR] /Users/danh32/code/android/workspace-android/TestApp/src/com/danh32/testapp/db/DSLocation.java:[15,47] cannot find symbol
[ERROR] symbol  : method onUniqueConflict()
[ERROR] location: @interface com.activeandroid.annotation.Column
[ERROR] /Users/danh32/code/android/workspace-android/TestApp/src/com/danh32/testapp/db/DSLocation.java:[15,66] cannot find symbol
[ERROR] symbol  : variable ConflictAction
[ERROR] location: class com.danh32.testapp.db.DSLocation
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging. 
```

我刚开始使用 Maven 并在 Eclipse 之外编译 Android 应用程序，所以我确定我缺少一些简单的东西。任何朝着正确方向的轻推都将受到高度赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:55:22.240

Maven Central Repo 中似乎没有可用的活动 android 工件（请参阅[此搜索](http://search.maven.org/#search%7Cga%7C1%7Cactiveandroid)）。您可以将该 jar 安装在您自己的本地存储库中（使用[mvn install-file](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)但这仅适用于您的本地计算机。或者，您可以将该工件部署到您控制的存储库并在您的 POM 中引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:55:33.963

您正在使用最新的。您是否有可能拥有该工件的多个版本，而 Maven 正在从 Eclipse 中选择一个不同的版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:17:07.597

你考虑过类版本问题吗？只是推测，但可能是 jar 是使用 1.6 JDK 构建的（目标 1.6）您的 POM 已将源和目标指定为 1.5，考虑到您也在使用 1.5 JDK，编译器可能根本无法读取用 1.6 编译的 jar 文件中的类

# vb.net - 什么是 OLE 中的源应用程序

> ID：15934795
> 
> 赞同：0
> 
> 时间：2013-04-10T19:33:59.663
> 
> 标签：vb.net, oledb, ole

我对对象链接和嵌入（Visual Basic）有一些疑问

```
1\. What is  meant by Source Application in OLE?
2\. Why it is used ? 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:19:26.023

COM/ActiveX（包括 OLE）有很多术语和首字母缩略词。像“QI”、“ROT”和“BSTR”，仅举几例：; 但是，据我所知，“源应用程序”不在其中。

问：你到底是在哪里遇到这个词的？它是在什么背景下使用的？

建议：

COM/ActiveX 有“in proc servers”（.dlls）和“out of proc servers”（.exe's）。我怀疑“源应用程序”可能指的是一个超出过程的服务器，比如 MS-Word 或 Excel？

# sql - Oracle SQL 跨 3 个表检索数据

> ID：15934799
> 
> 赞同：1
> 
> 时间：2013-04-10T19:34:16.187
> 
> 标签：sql

以下是关系：

```
CREATE TABLE employee (
  name    varchar2(15) not null, 
  ssn      char(9),
  primary key (ssn),
  foreign key (superssn) references employee(ssn),
);

CREATE TABLE project (
  pname      varchar2(15) not null,
  pnumber    number(4),
  primary key (pnumber),
  unique (pname),
);

CREATE TABLE works_on (
  essn   char(9),
  pno    number(4),
  primary key (essn,pno),
  foreign key (essn) references employee(ssn),
  foreign key (pno) references project(pnumber)
); 
```

问：检索参与每个项目的所有员工的姓名。

我想我被要求查询参与项目的所有员工，按项目名称排序。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:46:15.303

这是一个经典的`divide`问题。

尝试这个。

```
 SELECT name FROM Employee 
    WHERE NOT EXISTS (SELECT pnumber FROM project WHERE pnumber   
      NOT IN (SELECT pno from Works_on WHERE employee.ssn = works_on.essn)) 
```

或者对于所有项目及其员工，

```
 SELECT employees.name, project.pname FROM employees 
    INNER JOIN works_on ON employees.ssn = works_on.essn
      INNER JOIN project ON works_on.pno = project.pnumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:41:03.470

```
SELECT E.NAME FROM
EMPLOYEE E,
PROJECT P,
WORKS_ON WO
WHERE 
E.SSN = WO.ESSN
AND WO.PNO = P.PNUMBER
ORDER BY P.PNAME; 
```

检查这是否对您有用。

你也可以试试这个：

```
SELECT E.NAME FROM
(SELECT E.NAME, P.PNAME FROM
    EMPLOYEE E,
    PROJECT P,
    WORKS_ON WO
    WHERE 
    E.SSN = WO.ESSN
    AND WO.PNO = P.PNUMBER
    ORDER BY P.PNAME); 
```

# c# - 在 Web api 中进行身份验证与仅在普通 Web 应用程序中进行身份验证

> ID：15934802
> 
> 赞同：1
> 
> 时间：2013-04-10T19:34:20.283
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api

我创建了 2 个非常简单的方法：

```
[Authorize]
[HttpGet]
public string getUser()
{
   return User.Identity.Name;
}

[HttpPost]
public bool SignIn(Credentials cred)
{
   var user = userRepository.ValidateUser(cred);
   if (user != null)
   {
      if (user.IsActive)
      {
         FormsAuthentication.SetAuthCookie(userRepository.GetUserIdByEmail(cred.Email).ToString(), cred.RememberMe);
         FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
         user.UserId.ToString(),
         DateTime.UtcNow,
                  DateTime.UtcNow.AddDays(Convert.ToInt32(ConfigurationManager.AppSettings["CookieTimeoutInDays"])),
         true,
         "MyTicket",
         FormsAuthentication.FormsCookiePath);

         //Encrypt the ticket.
         string encTicket = FormsAuthentication.Encrypt(ticket);

         //Create the cookie.
         HttpCookie mycookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);

         // Set the cookie's expiration time to the tickets expiration time
         if (ticket.IsPersistent)
            mycookie.Expires = ticket.Expiration;

         Response.AddHeader(FormsAuthentication.FormsCookieName, encTicket);
         return true;
       }
       else
       return false;
     }
     else
     {
        return false;
     }
  } 
```

我将这些函数放在一个 API 控制器和一个普通控制器中（唯一不同的是`HttpContext.Current.Response.AddHeader(FormsAuthentication.FormsCookieName, encTicket);`它在 api 控制器中时）。当我使用普通控制器进行身份验证并将相同的 cookie 传回以调用`getUser()`它时，它可以工作，但是当我对 API 控制器执行此操作时，它不起作用..我使用移动设备来调用这两个控制器，而不是浏览器。现在我了解 API 控制器通常通过在每次调用的标头中传递用户名和密码来使用基本身份验证，但是从普通控制器执行此操作有什么问题吗？与普通控制器相比，使用 asp.net Web API 有什么优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:49:58.150

> > 当我使用普通控制器进行身份验证并将相同的 cookie 传回调用 getUser() 时，它可以工作，但是当我对 API 控制器执行此操作时，它不起作用

我不确定为什么会这样。如果您使用的是普通模板，请注意您的 ApiController 将位于 /api 路由下，并注意操作名称不会成为 URL 的一部分。如果您的 WebApiConfig 说：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

并且您的控制器类名为 FooController，那么您的 ApiController URL 将类似于：http://:33504/api/Foo

（对于 GET 和 POST）。

将 cookie 与 Web API 一起使用通常不是最好的方法，但如果您有特殊需要，它是可能的。

还有几个地方你可能会被绊倒：

1.  您正在生成表单身份验证 cookie 两次。SetAuthCookie 行执行一次，并将其放入 cookie 标头中。然后， Response.AddHeader 再次执行此操作，将其放入自定义标头（不是 cookie 标头）中。

2.  当您说 Response.AddHeader(FormsCookieName) 时，我认为您的意思是：Response.SetCookie(myCookie)。您当前的代码正在添加一个名为 FormsCookieName 的自定义标头；它没有添加具有该 cookie 名称的 cookie（在 Set-Cookie 标头中）。

3.  对于 Web API，通常不建议使用 HttpContext.Current.Response。相反，请考虑返回 HttpResponseMessage 并设置该对象的标头属性。

> > 现在我了解 API 控制器通常通过在每次调用的标头中传递用户名和密码来使用基本身份验证，但是从普通控制器执行此操作有什么问题吗？

当您使用 Web API 时，您通常会使用 REST，而 cookie 不太适合那里的超媒体理念。如果你不做超媒体/REST，那么我想你可以使用 cookie，尽管它通常不是最合适的。

> > 与普通控制器相比，使用 asp.net Web API 有什么优势？

Web API 为您提供了一个自托管的故事、进行内容协商的能力和一个很好的 HTTP 编程模型。MVC 更多地是专门围绕 HTML 设计的（而不是其他内容类型）。如果您要返回 HTML，MVC 可能是有意义的。如果您的应用程序中没有任何内容返回 HTML，那么 Web API 可能更适合。

不过，对于这个控制器，我会在你的应用程序的其余部分做任何你做的事情。（我不会为这个控制器选择不同的框架。）

# jquery - 切换 Div 大小的高度

> ID：15934806
> 
> 赞同：0
> 
> 时间：2013-04-10T19:34:25.890
> 
> 标签：jquery

我正在寻找一种将 div 扩展到固定高度的简单方法。这将是我的代码的基本框架：

```
<div class="parent">
    <div class="child">
        Lorem Ipsum
    </div>
    <div class="bar">
        <a class="more" href="#">More</a>
   </div>
</div> 
```

单击“更多”，我希望父 div 扩展到 400px 的高度。再次单击“更多”（最好是“更少”），我希望父 div 调整回原来的高度（200px）。

不知何故，我在互联网上找到的任何东西都不起作用。而且由于我是 jQuery 的绝对新手，我找不到错误...我认为问题可能是缺乏正确的元素识别，因为每个类在网站上都使用了多次...

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:39:08.640

试试这个[JSFIDDLE](http://jsfiddle.net/ZEuXG/1/)

html:

```
 <div class="parent">
    <div class="child">
        Lorem Ipsum
    </div>
    <div class="bar">
        <a class="more" href="#">More</a>
   </div>
</div> 
```

js

```
 var div = $("div.parent");
$("a.more").click(function(){
    if($(this).text().toLowerCase() == "more"){
        div.animate({height:400}, 500);
        $(this).text("Less");   
    }            
    else{
       div.animate({height:200}, 500);
         $(this).text("More");   
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:44:54.407

我在您的 HTML 中添加了一个 less 元素，以便父级在展开后可以折叠。

**HTML**

```
<div class="parent">
    <div class="child">
        Lorem Ipsum
    </div>
    <div class="bar">
        <a class="more" href="#">More</a>
        <a class="less" href="#">Less</a>
   </div>
</div> 
```

**CSS**

```
.less{
    display: none;
} 
```

**Javascript**

```
var originalHeight = $(".parent").height();
$(".more").click(function(e){
   toggle(this,400, ".less");
   e.preventDefault();
});

$(".less").click(function(e){
   toggle(this,originalHeight, ".more");
   e.preventDefault();
});

function toggle(element, height, toggleClass){
   $(element).parents(".parent").animate({"height":height + "px"},1000);
   $(element).hide();
   $(toggleClass).show();
} 
```

**工作示例：http:** [//jsfiddle.net/bsF6V/1/](http://jsfiddle.net/bsF6V/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:42:36.617

随着一些CSS的版本：

```
.parent.large {
    height: 400px;
} 
```

您可以使用以下 JavaScript：

```
var $parent = $('.parent');

var $link = $('.more').click(function(e) {
    e.preventDefault();
    if ($parent.hasClass('large')) {
        $parent.removeClass('large');
        $link.text('More');
    } else {
        $parent.addClass('large');
        $link.text('Less');
    }
}); 
```

这是它的一个[jsfiddle](http://jsfiddle.net/LepHL/)。

# java - 让一个带有玻璃的 GWT PopupPanel 淡入淡出

> ID：15934808
> 
> 赞同：1
> 
> 时间：2013-04-10T19:34:27.603
> 
> 标签：java, gwt

我想*淡入*我的`PopupPanel`页面。我可以自己获取`PopupPanel`元素并为不透明度设置动画，但我无法访问玻璃元素。`PopupPanel`这并不是一个真正的技术问题，而是对选择暴露的内容的限制（我会说） 。

有谁知道解决方法或替代方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:53:41.267

基本上所有的玻璃面板看起来都像

```
<div class="gwt-PopupPanelGlass" style="..."></div> 
```

因此，如果您真的需要获取此元素并为其设置动画，您可以通过 jsni 执行以下操作：

```
elements = document.getElementsByClassName("gwt-PopupPanelGlass") 
```

然后像你想要的那样改变元素样式。但这是某种解决方法，您需要在各种浏览器上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:20:45.660

## 解决方案 1 - 延迟绑定

**示例**- [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#example](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#example) **理论**- [https://code.google.com/p/google-web-toolkit/wiki/DeferredBindingsForJRE](https://code.google.com/p/google-web-toolkit/wiki/DeferredBindingsForJRE)

## 解决方案 2 - 使用 Java 类路径进行黑客攻击

当 java 在同一包层次结构中遇到重复的 java 文件时，它会从 jar 中选择一个在类路径中领先于其他的 java 文件。我们在某些情况下使用这种类覆盖技术来改变 GWT 类选择公开的内容。我们将[PopupPanel](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/PopupPanel.java) java 文件复制到我们的代码库中，以 GWT 的确切包形式，即**com.google.gwt.user.client.ui。**

我们需要确保 GWT 编译器在 gwt-user.jar 之前的类路径中看到我们的[PopupPanel版本。](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/PopupPanel.java)这意味着 GWT 编译器选择我们的版本，而不是 gwt 的！！！您可以继续编辑 PopupPanels 属性/方法范围，从私有到更高。

**注意 -**您需要确保 PopupPanel java 文件同步到每个 GWT 版本。

# php - 查询搜索值是否等于两行？

> ID：15934812
> 
> 赞同：1
> 
> 时间：2013-04-10T19:34:41.437
> 
> 标签：php, mysql, sql

我的这段代码很像数据库中的人名搜索引擎。

```
if (isset($_POST['submit'])){
      $keyword = $_POST['stats'];   
      $orderby = $_POST['orderby'];

      if (!empty($_POST['stats'])) {
          $getStats = $db->query("SELECT * FROM `stats` WHERE
              `lastname` LIKE '%$keyword%' OR `firstname` LIKE '%$keyword%' OR
              `nickname` LIKE '%$keyword%' ORDER BY `$orderby`
              DESC"); 
```

然后将结果打印回表格中，我认为表格代码没有必要而且太长。

如果我只搜索姓氏或名字或昵称，上述查询适用

但是，例如，如果数据库中有一个名为 John Smith 的用户，那么

> 名字：约翰姓氏
> ：史密斯

如果只是搜索“John”，他将被打印到表格中，如果我只是搜索“Smith”，这很好并且相同

但如果我搜索“John Smith”，他不会被打印到表格中。

如何更改此查询以便发生这种情况，我已经尝试过：

```
$getStats = $db->query("SELECT * FROM `stats` WHERE
    `firstname`, `lastname` = '$keyword' OR `lastname` LIKE '%$keyword%' OR `firstname` LIKE '%$keyword%' OR
    `nickname` LIKE '%$keyword%' ORDER BY `$orderby`
    DESC"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:36:19.110

`WHERE CONCAT(firstname, ' ', lastname) LIKE %$keyword%`

此外，您应该绑定参数而不是直接将用户输入插入到查询字符串中，您当前的代码容易受到 SQL 注入的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:39:36.100

```
$keyword = str_replace(" ", "%", $keyword); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:41:11.387

你可以试试正则表达式：

```
$keyword = $db->real_escape_string($_POST['stats']); // escape data
$orderby = $db->real_escape_string($_POST['orderby']); // escape data
$keyword = implode("|", explode(" ", $keyword));

$getStats = $db->query("SELECT * FROM stats 
                        WHERE firstname REGEXP '$keyword' 
                           OR lastname REGEXP '$keyword' 
                           OR nickname REGEXP '$keyword' 
                        ORDER BY $orderby DESC"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:42:15.327

尝试这个

```
 $sql = "SELECT *
  FROM stats
  WHERE 
  firstname LIKE '%$keyword%'
  OR lastname LIKE '%$keyword%'
  OR CONCAT_WS(' ',firstname,lastname,) LIKE '%$keyword%'
  OR CONCAT_WS(' ',lastname,firstname) LIKE '%$keyword%'
  OR nickname LIKE '%$keyword%'
  ORDER BY $orderby DESC"; 
```

# phpexcel - phpexcel适合选择

> ID：15934813
> 
> 赞同：2
> 
> 时间：2013-04-10T19:34:44.610
> 
> 标签：phpexcel

我使用出色的 PHPExcel 库生成了一个 excel 文件。此时我需要将所有列显示到一个页面中。当您必须上下滚动以查看所有数据时，您就会知道这种感觉。基本上我有 33 列，我需要将它们放在任何显示器上

我不知道是否是我的设置或问题出在哪里，但我无法使其正常工作。这是我正在使用的代码

```
$objPHPExcel->getActiveSheet()->getPageSetup()->setFitToPage(true);
$objPHPExcel->getActiveSheet()->getPageSetup()->setFitToHeight(0);
$objPHPExcel->getActiveSheet()->getPageSetup()->setFitToWidth(1); 
```

在 MS Excel 上，我选择所有 thw 列，然后选择 View-> Zoom，然后选择 Fit Selection。当使用 PHPExcel 生成 excel 文件时，如何以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:43:27.517

我希望我没有理解错，这里是：phpExcel 有一个名为 setZoomScalezoom() 的方法，但是这不会自动填充整个屏幕：

```
example:
$excel = new PHPExcel();

$sheet = $excel->getActiveSheet();
$sheet->getSheetView()->setZoomScale(300);

$writer = new PHPExcel_Writer_Excel5($excel);
$writer->save('test.xls'); 
```

我的信息来自：来源：[http ://typo3.org/extension-manuals/phpexcel_library/1.7.4/view/5/4/](http://typo3.org/extension-manuals/phpexcel_library/1.7.4/view/5/4/)

> 设置工作表缩放级别 要设置工作表的缩放级别，可以使用以下代码：
> 
> $objPHPExcel->getActiveSheet()->getSheetView()->setZoomScale(75);
> 
> 请注意，缩放级别应在 10 – 400 范围内。

# django - 将字典传递给 Django 中的模板的问题

> ID：15934820
> 
> 赞同：0
> 
> 时间：2013-04-10T19:35:08.410
> 
> 标签：django, templates, dictionary, html-table

我遇到了一个看似简单的问题：

我想将字典传递给模板，然后让模板在页面上呈现该字典。但是，当我运行该页面时，字典没有显示...

这是我的视图页面：

```
def display_meta(request):
    values = request.META.items()
    values.sort()
    c = Context(values)
    return render_to_response('meta_data.html', c) 
```

这是我的模板：

```
{% extends "base.html" %}
{% block content %}
<table>
{% for k, v in c %}
<tr><td> {{k}} </td><td> {{v}} </td></tr>
{% endfor %}
</table>
{% endblock %} 
```

我不确定出了什么问题。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:52:07.643

您需要将上下文作为字典传递。你会这样做

```
def display_meta(request):
    values = request.META.items()
    values.sort()
    return render_to_response('meta_data.html', {'c': values}) 
```

每个键代表将可用的变量，在这种情况下`c`将是一个包含项目的字典`values`

# html - 使用 textwrap 将网站分为 2 列

> ID：15934833
> 
> 赞同：0
> 
> 时间：2013-04-10T19:35:43.847
> 
> 标签：html, css, administration

这是我的[管理面板](http://tristans.tk/admin)，我想用 div 将它分成 2 列。左边的 div 是一个菜单，并设置了以下样式：

```
#menu_left{
position: fixed;
float: left;
width: 300px;
height: 100%;
top: 0;
left: 0;
background: #666;
color: white;
} 
```

右边的是内容，有这样的风格：

```
#content{
text-wrap: unrestricted;
float:left;
width: 100%;
    left: 300px;
} 
```

它不起作用，因为它应该起作用，我希望它包装文本，但它没有。也请告诉我，如果有任何错误的风格设置。

哦，html：

```
<body>
    <div id="menu_left">
        <h1>Menu</h1> <hr />
    </div>
    <div id="content"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:38:05.517

由于`#menu_left`. 您应该将其设为一些像素值，或者更改`#menu_left`为 % 宽度，例如 20%，然后内容可以是 80%，它们会很好地适应。

`left: 300px;`另外，您应该从中删除`#content`，因为`float: left;`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T19:51:14.827

只需清除这些行，您就可以开始了。

```
#menu_left{
position: fixed; <--don't need
float: left;
width: 300px;
height: 100%;
top: 0; <--don't need
left: 0; <--don't need
background: #666;
color: white;
}

#content{
text-wrap: unrestricted; <--don't need (you really want to break letters in the same word?)
float:left;
width: 100%;
left: 300px; <--don't need
} 
```

使用预制系统比尝试从头开始更有意义。我建议使用像 grid960 [http://960.gs/这样的 CSS 系统](http://960.gs/)

# java - 工厂模式是否仅使用默认构造函数创建对象

> ID：15934842
> 
> 赞同：1
> 
> 时间：2013-04-10T19:36:01.280
> 
> 标签：java, design-patterns, graph, factory-pattern

我需要你的帮助我有一个表示为超图的复杂网络超
图顶点有各种类型：图像，标签....
我应该创建数千个顶点
，手动创建它会很困难！
所以我认为工厂模式在这种情况下可能会对我有所帮助，
但是每个顶点类型都有其特定的属性，我应该将它作为参数传递给构造函数

那么在这种情况下工厂方法是正确的选择吗？ ![快速图表](https://i.stack.imgur.com/zyKxZ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:41:16.860

拥有一个带有一个或多个参数的 create 方法的工厂没有任何问题

```
Car blueCar = carFactory.create(CarColor.BLUE);
Car redCar = carFactory.create(CarColor.RED); 
```

或具有多种创建方法的工厂：

```
Car blueCar = carFactory.createBlueCar();
Car redCar = carFactory.createRedCar(); 
```

根据用例可能也值得考虑的工厂替代方案是构建器模式。Builder 只有一个不带参数的 create 方法，但它也有设置将由它创建的对象的属性的方法：

```
carBuilder.setColor(CarColor.BLUE);
Car blueCar = carBuilder.create();
carBuilder.setColor(CarColor.RED);
Car redCar = carBuilder.create(); 
```

create 方法如何在内部实际创建对象是一个留给它自己的实现细节。例如，它可以：

*   使用参数调用构造函数
*   调用默认构造函数，然后在返回的对象上调用一些 setter 来更改其属性
*   根据参数实例化不同的子类
*   或这些选项的组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:41:35.877

工厂方法通常用于创建对象，而无需指定将要创建的对象的确切类。

如果您有不同的顶点实现，这可能是您的选择。

# arrays - 更改函数内变量的值

> ID：15934846
> 
> 赞同：0
> 
> 时间：2013-04-10T19:36:10.060
> 
> 标签：arrays, bash, function, variables

我想知道如何从bash中的函数返回数组

```
array[0]=0
array[1]=0
array[2]=0

function change {

     array[0]=1
     array[1]=2
     array[2]=3

} 
```

但是这不起作用（数组的所有元素仍然为0）感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:44:00.163

不要忘记**调用**该函数。

```
#!/bin/bash

array[0]=0
array[1]=0
array[2]=0

function change {
     array[0]=1
     array[1]=2
     array[2]=3
}

change    # <--------------

echo "${array[@]}" 
```

结果：

```
$ ./test
1 2 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:44:09.240

是的，它们仍然是 0。因为你根本没有调用你的函数。

尝试这个：

```
array[0]=0
array[1]=0
array[2]=0

function change {

     array[0]=1
     array[1]=2
     array[2]=3

}

change
echo ${array[@]} 
```

# php - 在php中读取数组

> ID：15934851
> 
> 赞同：0
> 
> 时间：2013-04-10T19:36:28.510
> 
> 标签：php, arrays, web-crawler

我正在制作一个爬虫，只是尝试基础知识。我被困在试图回显从爬虫获得的数组。这是数组：

```
Array ( [0] => Array ( [0] => vageemail@hotmail.com ) [1] => Array ( [0] => Testemail@hotmail.com ) ) 
```

我想附和这个：

```
vageemail@hotmail.com
Testemail@hotmail.com 
```

所以我做的是这样的：

```
$teller = 1;
while ( $teller != 10 ) {
    foreach ( $email[$teller] as $mail ) {
        echo $mail;
        $teller = $teller + 1;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:40:30.777

它是否显示错误消息？如果是这样，它是什么？

此外，while 循环几乎没有用，因为 foreach 循环充当“while 循环”，直到它遍历整个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:42:11.020

您的阵列开始于`0`.
假设那`$emails`是你的数组。

```
foreach ( $emails as $email ) {
   foreach ( $email as $mail ) {
      echo $mail;       
   }    
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T19:39:56.947

```
foreach($array as $a)
    echo $a[0] 
```

# php - 下面的 PHP 代码停止代码

> ID：15934856
> 
> 赞同：-3
> 
> 时间：2013-04-10T19:36:39.970
> 
> 标签：php, html

我有这个 PHP 代码：

```
<?php
$redirectURL = 'contests-representative-of-the-year-thankyou.php';
$email_to = 'alex@theadamgrp.com';
$subject = 'Submission Form';
#### DO NOT EDIT BELOW THIS LINE ####
require_once dirname(__FILE__) . '/securimage.php';
$securimage = new Securimage();
$captcha = (isset($_REQUEST['ct_captcha'])) ? $_REQUEST['ct_captcha'] :
'';

if ($securimage->check($captcha) == false)   {
    die ('<p style="margin:30px 0 0 0; font-weight:bold; font-size:16px;">Invalid security code entered. Please <a href="javascript:history.go(-1);">click here</a> to go back.</p>');
}

$message = 'This form submission was received at '.date('n/j/Y g:i A').': '."\n\n";
foreach ($_POST as $key=>$value){
    $message .= "\n\n".str_replace('_', ' ', $key).": \n".$value;
}

$message .= "\n\nIP: ".$_SERVER['REMOTE_ADDR'];
mail($email_to, $subject, $message, 'From: no-reply@email.com');
?> 
```

当我将它插入我的网页时，它会“删除”我下面的其余代码。我想它下面有一个带有链接和所有内容的页脚。这就是我下面的内容：

```
</div>
</div>
<?php include("subpage-bar.php"); ?>
</div>
</div>
</div>
<?php include("footer.php"); ?>
</body> 
```

为什么我上面的 PHP 代码会删除我在它下面编码的所有其他内容，有什么理由吗？如果您想直观地了解 O 的含义，这里是查看源代码的[链接。](http://tinyurl.com/cgucqkr)我无法弄清楚问题是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:39:12.620

变成`die()`_`echo`

所以改变

```
die ('<p style="margin:30px 0 0 0; font-weight:bold; font-size:16px;">Invalid security code entered. Please <a href="javascript:history.go(-1);">click here</a> to go back.</p>'); 
```

进入

```
echo '<p style="margin:30px 0 0 0; font-weight:bold; font-size:16px;">Invalid security code entered. Please <a href="javascript:history.go(-1);">click here</a> to go back.</p>'; 
```

（所以没有括号的回声`()`）

**编辑**

对于工作 catha 改变这个：

```
if ($securimage->check($captcha) == false)   {
    die ('<p style="margin:30px 0 0 0; font-weight:bold; font-size:16px;">Invalid security code entered. Please <a href="javascript:history.go(-1);">click here</a> to go back.</p>');
}

$message = 'This form submission was received at '.date('n/j/Y g:i A').': '."\n\n";
foreach ($_POST as $key=>$value){
    $message .= "\n\n".str_replace('_', ' ', $key).": \n".$value;
}

$message .= "\n\nIP: ".$_SERVER['REMOTE_ADDR'];
mail($email_to, $subject, $message, 'From: no-reply@email.com'); 
```

进入这个：

```
if ($securimage->check($captcha) == false)   {
    echo '<p style="margin:30px 0 0 0; font-weight:bold; font-size:16px;">Invalid security code entered. Please <a href="javascript:history.go(-1);">click here</a> to go back.</p>';
} else {
    $message = 'This form submission was received at '.date('n/j/Y g:i A').': '."\n\n";
    foreach ($_POST as $key=>$value){
        $message .= "\n\n".str_replace('_', ' ', $key).": \n".$value;
    }

    $message .= "\n\nIP: ".$_SERVER['REMOTE_ADDR'];
    mail($email_to, $subject, $message, 'From: no-reply@email.com');
} 
```

# django - Django 和 Heroku：静态文件与“工头启动”一起使用，但不适用于“./manage.py runserver”

> ID：15934859
> 
> 赞同：2
> 
> 时间：2013-04-10T19:36:52.833
> 
> 标签：django, heroku, heroku-toolbelt

**我已经在下面的答案中添加了我自己的答案，这已经解决了。**

使用 heroku 工具启动服务器时，我可以提供静态文件`foreman`：

```
$ foreman start
12:25:21 web.1  | started with pid 33574
12:25:21 web.1  | 2013-04-10 12:25:21 [33577] [INFO] Starting gunicorn 0.17.2
12:25:21 web.1  | 2013-04-10 12:25:21 [33577] [INFO] Listening at: http://0.0.0.0:5000 (33577)
12:25:21 web.1  | 2013-04-10 12:25:21 [33577] [INFO] Using worker: sync
12:25:21 web.1  | 2013-04-10 12:25:21 [33582] [INFO] Booting worker with pid: 33582 
```

但它们的静态文件没有使用 runserver 提供：

```
$ ./manage.py runserver
Validating models...

0 errors found
April 10, 2013 - 12:26:06
Django version 1.5, using settings 'myproject.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C. 
```

我的`Procfile`：

```
web: gunicorn myproject.wsgi 
```

我的`settings.py`（删除了一些设置）：

```
import os
import logging

PROJECT_PATH = os.path.dirname(os.path.abspath(__file__))

DEBUG = True
TEMPLATE_DEBUG = DEBUG

# Using local_settings for this
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': '',
        'PASSWORD': '',
        'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '',                      # Set to empty string for default.
    }
}

# Heroku specific database settings, overridden for local dev in local_settings.py (not in git)
import dj_database_url
DATABASES['default'] =  dj_database_url.config()

# Honor the 'X-Forwarded-Proto' header for request.is_secure() (also needed for Heroku)
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/var/www/example.com/media/"
MEDIA_ROOT = os.path.join(PROJECT_PATH, 'media')

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://example.com/media/", "http://media.example.com/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/var/www/example.com/static/"
STATIC_ROOT = os.path.join(PROJECT_PATH, 'static')

# URL prefix for static files.
# Example: "http://example.com/static/", "http://static.example.com/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.gzip.GZipMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.middleware.doc.XViewMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'myproject.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'myproject.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(os.path.dirname(__file__), "templates"),
)

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages"
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'django.contrib.humanize',
    'django.contrib.flatpages',
    'debug_toolbar',
    'stripe',
    'notification',
    'south',
    'registration',
    'timedelta',
    'sorl.thumbnail',
    'django_messages',
    'tinymce',
)

try:
    from local_settings import *
except ImportError:
    pass 
```

我的主要`urls.py`：

```
from django.conf.urls import patterns, include, handler500, url
from django.conf import settings
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns(
    '',
    url(r'^$', 'myproject.views.root', name='root'),
    (r'^admin/', include(admin.site.urls)),

)

urlpatterns += patterns('',
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
) 
```

正如标题所说，我可以使用`foreman start`但不能在运行时加载所有静态资产`./manage.py runserver`。

我也跑过`./manage.py collectstatic`，所以我知道所有静态文件都在正确的目录中。

My`static`和`media`文件夹都位于`myproject`文件夹下，以及`settings.py`主`urls.py`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:16:46.140

您必须将包含静态文件的目录的（绝对）路径添加到设置中的 STATICFILES_DIRS。你不需要运行 collectstatic

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:14:37.523

我终于让它工作了，以便可以通过 runserver 加载静态文件并部署到 heroku 也可以。

我改变的事情：

`settings.py`：这里没有改变任何东西，相反，我将覆盖我的 local_settings.py 文件中的一些设置。

```
STATIC_ROOT = os.path.join(PROJECT_PATH, 'static')

# URL prefix for static files.
# Example: "http://example.com/static/", "http://static.example.com/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

`local_settings.py`: 添加了以下内容：

```
STATIC_ROOT = ''
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(PROJECT_PATH, 'static'),
) 
```

这允许 heroku 提供您的静态文件以及用于开发的 runserver。值得一提的是，我需要在我的 urls.py 末尾添加额外的静态 url 模式才能在 heroku 中提供静态媒体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T20:13:02.833

这是意料之中的。Django 不提供静态文件。Heroku（显然）确实如此。

要在本地提供文件，您需要添加一个路由`urls.py`来提供文件。

# php - 插入带有更改字段和逻辑思维的选择语句

> ID：15934860
> 
> 赞同：0
> 
> 时间：2013-04-10T19:37:05.920
> 
> 标签：php, mysql, date, logic

我正在处理一些与创建经常性发票有关的 php 代码。我需要一些帮助来思考逻辑。我认为最终我会得到一种插入/选择语句。最终在此处生成的 php 代码将在每晚的 cron 中运行。

首先，让我向您展示一些我的表格项目以供参考，并解释一下它们的作用。该表称为 Invoice 并且还有其他表与之关联，但我认为如果我现在可以确定该表的逻辑，我可以将其应用于其他表。

ID = 这是自动递增的主键，也恰好是发票编号。

recurring = 这是发票是一次性的还是经常性的。O=一次，M=每月等

recurred = 这将在插入时设置为 N，这是我用来查看将在表中创建的下一张定期发票是否应基于此发票的逻辑。当将新的定期发票插入表中时，这将更改为 Y，因此 cron 作业不会再次处理它。

date = 这是插入/创建发票的日期。例如，如果创建发票的日期是本月 15 日，则创建的下一张发票将是下个月 15 日。本质上，M 代表每月。但是，我还没有弄清楚如何处理 31 日的创建日期，但下个月只有 30 天，可以在这里使用一些帮助。

所以这是我的逻辑。首先，我运行一个查询来查找所有不是 O 且 recurred = N 的行。

```
$result = mysql_query("SELECT * FROM invoice WHERE recurring != 'O' and recurred 
```

= 'N'") 或死(mysql_error());

接下来，我处理每种重复的 M 代表每月，Q 代表季度，等等。

```
if recurring = M
 if todays date day = 'date' day
  copy line item into a new row with the following changes: new ID, todays date, and mark the recurred to N for the new insert (will mark the old one Y) 
```

显然这不是实际的代码，正是我在想的。

所以我的问题是 1.）如何创建插入选择语句来处理更改的变量和 2.）如果发票是在一个月的 31 日创建并且下个月只有 30 天（或28)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:26:22.850

只取需要重新插入的行：

```
SELECT *, DATEDIFF(`date`, NOW()) as diff FROM invoice WHERE recuring != 'O' 
AND recured = 'N' AND diff >= 30; 
```

遍历该列表并通过计算为每一行使用一个新日期：

```
$newDate = date("Y-m-d", strtotime($oldDate+" +1 month")); 
```

这应该可以解决您每月第 30 天的问题。

现在插入新创建的数据。

此外，使用枚举作为递归字段的好建议，使用布尔值作为递归字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:32:48.480

我做了一些类似的应用程序。就我而言，我有 2 张表：实际发票和经常性发票。循环表有一个名为 NextDate 的字段 - 应创建下一张发票的日期。一次发票直接添加到发票表中，否则 cron 作业会扫描循环表并检查 NextDate 值。如果是过去，则新发票会生成到发票表中，并且 NextDate 会更新（通常按月递增）。

在我的情况下，按月递增只会将月份值更改 1。例如在 MySQL 中

```
DATE_ADD('2008-01-31', INTERVAL 1 MONTH)  --> 2008-02-29 
```

# centos - 在 CentOS 5.x 上安装 Go

> ID：15934866
> 
> 赞同：0
> 
> 时间：2013-04-10T19:37:20.587
> 
> 标签：centos, go

我想在 CentOS 5.x 上安装 Go，但 Go 网站[http://golang.org/doc/install](http://golang.org/doc/install)提到它不受支持。

由于 CentOS 只是 Linux 的另一种风格，是否还有一些方法可以在 CentOS 上安装 Go 语言？

当我安装相同并运行上述网站上提到的示例程序 hello.go 时，我收到错误 hello.go:3:8: import "fmt": cannot find package package runtime: import "runtime": cannot find package

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:55:22.933

```
% export GOROOT=~/
% go run test.go 
test.go:3:8: import "fmt": cannot find package
package runtime: import "runtime": cannot find package 
```

找不到“运行时”包告诉您`$GOROOT`环境变量未设置为 golang 根目录。你需要设置`$GOROOT`. 如果您使用外部包，您也应该设置`$GOPATH`变量（`go help gopath`更多信息）。

一个典型的设置（不是特定于 CentOS）是：

```
export GOROOT="/usr/local/go"
export PATH="$GOROOT/bin:$PATH"
export GOPATH=/Users/rodowi/gocode 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T20:56:18.593

至少对于某些程序来说它工作正常。我有一个生产程序，我在 RHEL 6.x 上编译并在 5.x 和 6.x 上部署，它运行没有任何问题。

编辑：我曾经在 1.0.3 下使用它，但几个月前我升级到“tip go”（即将成为 1.1 版本）。在 1.x 下，当接受 tcp 连接时，它会在 5.9 上崩溃，但在我在邮件列表中报告它几天后，这个问题得到了修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-26T18:54:43.190

[http://dave.cheney.net/2013/06/18/how-to-install-go-1-1-on-centos-5](http://dave.cheney.net/2013/06/18/how-to-install-go-1-1-on-centos-5)

这个页面很好地解释了 CentOS-5 内核中缺少哪些内核原语、它们的影响以及可能的修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:40:44.247

我担心你运气不好，因为 CentOS 5.x 的内核版本太老了。如果 go 运行时使用该内核中根本不存在的功能，那么我看不出它是如何工作的简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-08T18:32:28.313

您可以下载 rpm 包并开始在本地安装，检查以下内容并根据您的操作系统下载：

[http://pkgs.org/download/golang](http://pkgs.org/download/golang)

或者您也可以从源代码编译和构建：

[http://dave.cheney.net/2013/06/18/how-to-install-go-1-1-on-centos-5](http://dave.cheney.net/2013/06/18/how-to-install-go-1-1-on-centos-5)

# php - 下载链接失效

> ID：15934875
> 
> 赞同：-3
> 
> 时间：2013-04-10T19:37:49.190
> 
> 标签：php, html

当我单击链接时，我无法下载图像，只能将其可视化。我的错误是什么？

PHP：

```
 require('conecta.php');
  ini_set('display_errors',1); error_reporting(E_ALL);  
    $cSQL="SELECT ID_PIC, PIC, NOMBRE FROM FOTOS";
    $stmt=$oConni->prepare($cSQL) or die($oConni->error);
    $stmt->execute(); 
    $stmt->store_result();
    $stmt->bind_result($id, $pic, $nombre);
    //$i=0;
    echo '<table cellspacing="0">';
    while ($stmt->fetch()) {

        if (!empty($pic)){ 
            echo'<tr><td><img class="sifoto" src="images.php? id='.$id.'" width="100" height="100"  /></td></tr>';
        }
        echo'<tr><td value='.$id.'><a href='.$nombre.'>DOWNLOAD</a></td></tr>'; 
        //$i++;
    }   
    $stmt->close();
    echo'</table>';

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:46:41.640

Thgis 问题与另一个问题类似。请在此处查看 -[使用 header() 强制使用 php 下载文件](https://stackoverflow.com/questions/8485886/force-file-download-with-php-using-header)

您需要为文件传输设置标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:46:53.383

正如@WesleySchleumer 所说，您需要在下载链接中添加引号。改变：

`echo'<tr><td value='.$id.'>DOWNLOAD<a href='.$nombre.'></a></td></tr>';`

到：

`echo'<tr><td value='.$id.'><a href="'.$nombre.'">DOWNLOAD</a></td></tr>';`

# c++ - 如何在 C++ 中测量内存分配时间？

> ID：15934888
> 
> 赞同：1
> 
> 时间：2013-04-10T19:38:46.257
> 
> 标签：c++, arrays, function, static, heap-memory

我需要执行以下操作：

1.  用 C++ 编写三个函数
2.  一个函数静态声明一个大数组
3.  一个函数在堆栈上声明相同的数组
4.  最后一个函数从 HEAP 创建相同的数组
5.  每个子程序必须被调用很多次（100,000 次）
6.  输出每个所需的时间

这是我的代码：

**用户环境**

```
#include <time.h>
#include <iostream>
using namespace std;

void func1();
void func2();
void func3();

int main()
{

    for (i = 0; i < 100000; i++)
    {
        func1();
        func2();
        func3();
    }
} 
```

**执行**

```
void func1()
{
    int static my_array[1000];
}

void func2()
{
    int my_array[1000];
}

void func3()
{
    new int my_array[1000];
} 
```

问题：

*   我是在 Main 还是在每个 Function 中创建数组（就像我所做的那样）？
*   我是在主函数还是在每个函数中找到时间？
*   是时间（）还是时钟（）？
*   我是否必须将 Time() 保存到变量中？
*   我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:47:08.387

a）您可以按照示例中提到的那样在函数内部创建数组，以便您可以确定每个函数为数组分配内存所花费的时间。

b) You need determine time taken by between each function call. other wise what's the point in determining in each loop.

You can use to determine time diff in milliseconds.

```
 typedef std::chrono::high_resolution_clock Clock;
        typedef std::chrono::milliseconds milliseconds;
        Clock::time_point t0 = Clock::now();
         fun1(); //function call
        Clock::time_point t1 = Clock::now();
        milliseconds ms = std::chrono::duration_cast<milliseconds>(t1 - t0);
        std::cout << ms.count() << "ms\n"; 
```

Similarly you can determine how much time it took for remaining function call.

# jquery - 如何使用 jquery 在 input type="text" 和 textarea 之间切换

> ID：15934891
> 
> 赞同：3
> 
> 时间：2013-04-10T19:38:51.677
> 
> 标签：jquery, html, text, input, textarea

请帮助我处理此代码或使用 jquery 在 input type="text" 和 textarea 之间切换的其他工作代码。

```
$(function(){
$("a#change").toggle(function(){
  var input = document.getElementById('text'),
  textarea  = document.createElement('textarea');
  textarea.id    = input.id;
  textarea.cols  = 40;
  textarea.rows  = 5;
  textarea.value = input.value;
  input.parentNode.replaceChild(textarea,input);
  return false;
},function(){
  textarea.parentNode.replaceChild(input,textarea);
  return false;
}); 
```

});

```
<input type="text" name="text" id="text" /><a href="#" id="change">change</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:46:17.933

以下内容应该适合您。

```
var textbox = $("#textbox");
var textarea = $("<textarea id='textarea'></textarea>");
$("#change").click(function () {
    //Check for textbox or textarea
    if ($("#textbox").length === 1) {
        //Copy value to textarea
        textarea.val(textbox.val());
        //Replace textbox with textarea
        textbox = textbox.replaceWith(textarea);
    } else {
        //Copy value to textbox
        textbox.val(textarea.val());
        //Replace textarea with textbox
        textarea = textarea.replaceWith(textbox);
    }
}); 
```

您可以在需要的第二行中设置列和行。

[jsFiddle](http://jsfiddle.net/Dracs/WzE48/2/)

# php - 由于文档根问题，Minify 2.1.5 可在本地主机上运行， 但不能在实时服务器上运行

> ID：15934892
> 
> 赞同：0
> 
> 时间：2013-04-10T19:38:52.113
> 
> 标签：php, minify, document-root

**问题：**

我的`/min/`文件位于本地和实时服务器的不同位置：

*   `localhost/min/`
*   `/mnt/foo/bar/hello/example.com/web/content/min/`（来自`$_SERVER['DOCUMENT_ROOT']`）

Min 在我的工作正常，`localhost`但通过 ftp 将相同的文件上传到我的实时服务器后，我收到 400 bad request 错误。这显然是由于不同的文档根。

**我试过的：**

将文件中的`$min_documentRoot = ''`变量更改为`config.php`

`$min_documentRoot = '/mnt/foo/bar/hello/example.com/web/content/'`

仍然给出相同的错误。

**附加信息**：我的请求如下所示：

`src="/min/b=js&amp;f=jquery.min.js,bootstrap.min.js,site.js"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:42:48.437

你怎么缩小？是带拉链的吗？

确保实时服务器和本地服务器都具有相同的设置。特别是，请确保它们都具有可用的所需缩小功能。例如，在 Fedora 安装中默认不安装 Zip PHP 函数。

检查在线服务器的httpd错误日志

# clojure - 如何在 Clojure 中为实体化类添加注解？

> ID：15934893
> 
> 赞同：2
> 
> 时间：2013-04-10T19:39:04.270
> 
> 标签：clojure, annotations

我需要创建一个实现接口并具有注释的类，然后将此类的实例传递给用 Java 实现的某些 API。

使用 Clojure，我可以具体化接口并获得如下实例：

```
(reify MyInterface (method1 [this] ...)) 
```

但是，`reify`似乎不接受注释。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:25:06.137

首先`reify`返回一个对象而不是一个类。如果需要生成带注解的类，则需要[`gen-class`](http://clojuredocs.org/clojure_core/clojure.core/gen-class)如下所示使用（示例显示为类添加 Deprecated 注解）：

```
(gen-class :name ^{java.lang.Deprecated true} MyClass
   ...) 
```

此外，您可以使用[`deftype`](http://clojuredocs.org/clojure_core/clojure.core/deftype)：

```
(deftype ^{java.lang.Deprecated true} MyClass 
  ...) 
```

# iphone - 自动布局 - 拉开超级视图？

> ID：15934894
> 
> 赞同：1
> 
> 时间：2013-04-10T19:39:05.697
> 
> 标签：iphone, ios, cocoa, autolayout

是否可以使用自动布局根据汇总高度和子元素之间的填充来设置超级视图的高度？

基本上我正在尝试用来自远程服务器的文本填充子视图，视图正在动态改变高度，但它们的超级视图（或容器视图）是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:47:19.437

请参阅[-intrinsicContentSize](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW177)和 -invalidateIntrinsicContentSize。我相信仅此一项就可以在简单的情况下使您到达那里。据我了解，其他东西（包括与子视图边缘距离受限的超级视图）将被移动以适应声称会破坏其他约束的最小尺寸的视图（例如，保持您的视图可见）。

如果其他人愿意在这里验证/无效/纠正我，我会很高兴。在实践中，我仍然对 Autolayout 特有的许多细节深思熟虑。

# java - 如何更新数据集中的现有记录

> ID：15934895
> 
> 赞同：3
> 
> 时间：2013-04-10T19:39:05.710
> 
> 标签：java, sql

我似乎无法使用强类型数据集更新表中的现有记录。我可以添加一条新记录，但如果我对现有记录进行更改，它就不起作用。

这是我的代码：

```
 private void AddEmplMaster()
 {           
     dsEmplMast dsEmpMst = new dsEmplMast();

     SqlConnection cn = new SqlConnection();
     cn.ConnectionString = System.Configuration.ConfigurationSettings.AppSettings["cn.ConnectionString"];

     SqlDataAdapter da1 = new SqlDataAdapter("SELECT * FROM UPR00100", cn);
     SqlCommandBuilder cb1 = new SqlCommandBuilder(da1);

     da1.Fill(dsEmpMst.UPR00100);

     DataTable dtMst = UpdateEmpMst(dsEmpMst);
     da1.Update(dsEmpMst.UPR00100);
 } 
```

从上面调用此过程以将更改的字段分配给记录：

```
private DataTable UpdateEmpMst(dsEmplMast dsEmpMst)
{  
    DataTable dtMst = new DataTable();

    try
    {               
        dsEmplMast.UPR00100Row empRow =  dsEmpMst.UPR00100.NewUPR00100Row();

        empRow.EMPLOYID = txtEmplId.Text.Trim();
        empRow.LASTNAME = txtLastName.Text.Trim();
        empRow.FRSTNAME = txtFirstName.Text.Trim();
        empRow.MIDLNAME = txtMidName.Text.Trim();
        empRow.ADRSCODE = "PRIMARY";
        empRow.SOCSCNUM = txtSSN.Text.Trim();
        empRow.DEPRTMNT = ddlDept.SelectedValue.Trim();
        empRow.JOBTITLE = txtJobTitle.Text.Trim();
        empRow.STRTDATE = DateTime.Today;
        empRow.EMPLOYMENTTYPE = "1";

        dsEmpMst.UPR00100.Rows.Add(empRow);

    }
    catch { }
    return dtMst;
} 
```

谢谢

更新：

好的，我想通了。在我的`UpdateEmpMst()`程序中，我必须检查记录是否存在，然后先检索它。如果没有，则创建一条新记录以添加。这是我添加的内容：

```
try
{
    dsEmplMast.UPR00100Row empRow; 
    empRow = dsEmpMst.UPR00100.FindByEMPLOYID(txtEmplId.Text.Trim());

    if (empRow == null)
    {
         empRow = dsEmpMst.UPR00100.NewUPR00100Row();
         dsEmpMst.UPR00100.Rows.Add(empRow);
    } 
```

然后我将我的数据分配给`empRow`我创建的新数据并正常更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T19:56:51.820

为了编辑数据集中的现有记录，您需要访问特定行中的特定数据列。可以通过以下方式访问有类型和无类型数据集中的数据： 使用表、行和列集合的索引。通过将表名和列名作为字符串传递给它们各自的集合。尽管类型化数据集可以使用与非类型化数据集相同的语法，但使用类型化数据集还有其他优势。有关详细信息，请参阅下面的“使用类型化数据集更新现有记录”部分。更新类型化或非类型化数据集中的现有记录 将值分配给 DataRow 对象中的特定列。无类型数据集的表名和列名在设计时不可用，必须通过它们各自的索引访问。

# objective-c - 字符串到可变数组目标 c

> ID：15934897
> 
> 赞同：0
> 
> 时间：2013-04-10T19:39:10.583
> 
> 标签：objective-c, arrays, string

我正在尝试从 NSString 中创建一个 NSMutableArray。它不应该被任何东西分开。所以如果字符串是`@"0123"`数组应该是`{@"0", @"1", @"2", @"3", nil}`. 但是如果我使用下面的代码，它会创建一个像`{@"0123", nil}`. 在下面的代码中，我还将常规数组转换为可变数组，因为我不知道如何直接进行..

```
NSMutableArray *myMutableArray = [[NSMutableArray alloc] initWithArray:[myString componentsSeparatedByString:@""]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:41:33.767

```
NSMutableArray *array = [NSMutableArray new];
for (NSInteger i=0; i<string.length; i++) {
    [array addObject:[NSString stringWithFormat:@"%C", [string characterAtIndex:i]]];
} 
```

# c# - 将派生类作为基类传递给 Web 服务方法

> ID：15934901
> 
> 赞同：3
> 
> 时间：2013-04-10T19:39:33.053
> 
> 标签：c#, web-services, tostring, derived-class

我有一个从 Web 服务导入的 C# 类。由于调试问题和数组，我需要这个类有一个`ToString()`覆盖 or `DebuggerDisplayAttribute`，我发现的唯一方法是将前者添加到派生类中：

```
class ExtWebServiceDataClass: WebServiceDataClass
{
    public override string ToString()
    {
        return String.Format("stuff");
    }
} 
```

不幸的是，webservice 方法需要一个基础对象数组并且不接受一个派生对象数组（XML 序列化错误）：

> System.InvalidOperationException：生成 XML 文档时出错。
> 
> → System.InvalidOprrationException：ExtWebServiceDataClass 类型不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。

有没有办法让它从客户端接受它？一个属性说`it's just like the base class, just serialize it as such`？

或者一种从派生类到基类的大规模转换的简单方法？

或者更简单地说，另一种方式来`ToString`覆盖或`DebuggerDisplayAttribute`在客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:55:12.473

`WebServiceDataClass``partial class`在生成的文件中声明为 a （就像大多数生成的类一样）。您可以在同一项目中定义您的[`DebuggerDisplayAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute.aspx)或`ToString`在另一个文件中，如下所示：

```
[DebuggerDisplay("MyString")]
public partial class WebServiceDataClass
{
} 
```

# ios - 自定义类“找不到接口声明”中无法识别目标 C 类别方法

> ID：15934908
> 
> 赞同：1
> 
> 时间：2013-04-10T19:39:46.727
> 
> 标签：ios, objective-c, class, categories

我想在视图控制器的自定义类中使用自定义方法

```
//Viewcontroller.h
#import "Class1.h"

//Class1.h
//#import "Class1+Category.h" // Deemed unnecessary in comments below.
@interface Class1: NSObject
-(void)doSomething;
@end

//Class1.m
#import "Class1.h"
@implementation Class1
-(void)doSomething{
  NSLog("In doSomething");
}
@end 
```

现在我想要一个 Class1 的类别方法。

```
//Class1+Category1.h
#import "Class1.h"
@interface Class1  (Category1) // ERROR : Cannot find interface declaration
-(void)doAnotherThing;
@end

//Class1+Category1.m
#import "Class1+Category.h"
@implementation Class1 (Category1)
-(void)doAnotherThing{
  NSLog(@"Did Another thing");
}
@end 
```

最后 - 在我的 viewcontroller.m 中，我看到了 doSomething 方法，但没有看到 doAnother 方法

```
 //viewcontroller.m
 Class1 *myClass1 = [[Class1 alloc]init];
 [Class1 doSomething]; //Works great!
 [Class1 doAnotherThing]; //Not recognized 
```

我已将 -all_load 添加到我的目标设置中。我没有想法..我使用@class吗？我收到“找不到接口声明”错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:52:10.833

您的类和类别乍一看似乎是正确的，但您的控制器需要导入 Class1+Category.h。也许这就是你错过的？

# javascript - OpenLayers：点击后无法选择功能

> ID：15934909
> 
> 赞同：1
> 
> 时间：2013-04-10T19:39:53.353
> 
> 标签：javascript, frameworks, openlayers

我正在尝试一个简单的测试，其中我有一个顶部带有可拖动功能的基本图像。这些点要素具有关联的外部图形（我更喜欢使用带有关联图形的多边形，但这是另一个问题）。

我有一个完美的悬停控件。我还有一个几乎可以工作的选择控件。但是，一旦单击一次，我就无法重新选择功能。同样，如果在尝试选择功能之前单击功能之外的任何位置，我将无法选择功能。

我希望这很清楚 - 但如果不是，那么这个例子应该是（你也可以看到整个代码）[http://sigfrid.co.uk/oltest/simple.html](http://sigfrid.co.uk/oltest/simple.html)

我将把我认为的关键代码位放在下面......

创建地图

```
var map = new OpenLayers.Map({
    div:'map',
}); 
```

添加基础层

```
 var base = new OpenLayers.Layer.Image(
    'Base level',
    'img/base.png',
    new OpenLayers.Bounds(-1000, -1000, 1000, 1000),
    new OpenLayers.Size(864,864),
    options
);
map.addLayer(base); 
```

添加样式

```
var markerStyleMap = new OpenLayers.StyleMap 
({
    "default": new OpenLayers.Style(template, {context: context}),
    "hover": new OpenLayers.Style ({graphicOpacity:0.5}),
    "select": new OpenLayers.Style ({graphicOpacity:0.1})}); 
```

加分

```
pt1 = new OpenLayers.Geometry.Point(0,0);
pt1Feature = new OpenLayers.Feature.Vector(pt1);
...
markerLayer.addFeatures([pt1Feature,pt2Feature,pt3Feature]); 
```

为不同的标记图像添加独特的查找

```
var lookup = {
    "f1": {externalGraphic:"img/f1.png"},
    "f2": {externalGraphic:"img/f2.png"},
    "f3": {externalGraphic:"img/f3.png"},
}

markerStyleMap.addUniqueValueRules("default", "type", lookup);
markerLayer.styleMap = markerStyleMap;
markerLayer.features[0].attributes.type = "f1";
    ... 
```

添加控件

```
var dragControl = new OpenLayers.Control.DragFeature(markerLayer) 
map.addControl(dragControl);
dragControl.activate();

var highlightCtrl = new OpenLayers.Control.SelectFeature(markerLayer, {
    hover: true,
    highlightOnly: true,
    renderIntent: "hover",
});
map.addControl(highlightCtrl);
highlightCtrl.activate();

var selectCtrl = new OpenLayers.Control.SelectFeature(markerLayer, {
    clickout: true,        
    renderIntent: "select",
});
map.addControl(selectCtrl);
selectCtrl.activate(); 
```

谢谢你的帮助，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:53:03.750

原来拖动和选择不兼容。但是，有一些解决方法，例如

[http://fastr.wordpress.com/2012/04/17/openlayers-selectfeature-where-did-i-clicked-2/](http://fastr.wordpress.com/2012/04/17/openlayers-selectfeature-where-did-i-clicked-2/)

虽然这确实增加了一些事件问​​题......

# php - 函数 foreach 只返回最后一个数组

> ID：15934910
> 
> 赞同：2
> 
> 时间：2013-04-10T19:39:54.487
> 
> 标签：php, function, foreach

我将其放入表列表中，它的作用是第一个函数填充前三行，然后第二个函数根据第一个函数的匹配填充第四行。

```
public function function1($start = 0, $max = 10, $use_result = false) {

    $sql = 'SELECT itemnum, descrip FROM TABLENAME
                WHERE itemnum LIKE "__-_____"
                AND cms_item_id IS NULL
                ORDER BY itemnum ASC
                LIMIT ' . (int)$start . ',' . (int)$max .'';
    $result = $this->registry->db->query($sql);

    $return = array();
    while($row = $result->fetch_assoc()) {
        $return[] = $row;
    }
    return $return;
}

/**
 * Get matches
 * @return array
 */
public function function2(){
    $product = $this->getList();
    foreach($product as $key) {
        $sku = $key['itemnum'];
        list(, $sku) = explode("-", $sku);
            }

    $sql = 'SELECT product_sku, long_name
    FROM TABLENAME
        WHERE product_sku = "' . $sku . '"';
    $result = $this->registry->db->query($sql);
    $return = array();

    while($row = $result->fetch_assoc()) {
        $return[] = $row;
        }
    return $return;
} 
```

正在发生的是 3 行返回正常。但是第 4 行只返回最后一个 $sku 而不是任何匹配的东西。我知道 foreach 循环每次都被覆盖，最后一个循环被放入变量 $sku 中......但是我还能怎么做才能得到我需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:52:52.857

制作所有 SKU 的数组，并使用`IN`而不是`=`来匹配它们。

```
public function function2(){
    $product = $this->getList();
    $skus = array();
    foreach($product as $key) {
        $sku = $key['itemnum'];
        list(, $sku) = explode("-", $sku);
        $skus[] = $sku;
    }
    $sku_string = implode(', ', array_map(function($x) {return "'$x'"; }, $skus));
    $sql = 'SELECT product_sku, long_name
            FROM TABLENAME
            WHERE product_sku IN (". $sku_string .")';
    $result = $this->registry->db->query($sql);
    $return = array();

    while($row = $result->fetch_assoc()) {
        $return[] = $row;
    }
    return $return;
} 
```

也许更好的解决方案是将您的查询合并为一个：

```
SELECT itemnum, descrip, long_name
FROM table1 t1
JOIN table2 t2 ON t2.product_sku = substring_index(itemnum, '-', -1)
WHERE itemnum LIKE "__-_____"
AND cms_item_id IS NULL
ORDER BY itemnum ASC
LIMIT ' . (int)$start . ',' . (int)$max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:08:28.260

尝试这个：

```
public function function2(){
    $product = $this->getList();

    $sku = array();               //Make an empty $sku array
    foreach($product as &$key) {
        $sku = $key['itemnum'];
        list(, $sku) = explode("-", $sku);
        $key['sku'] = $sku;
        $skus[] = $sku;
    }
    $selectValues = implode(',', $skus);

    $sql = "SELECT product_sku, long_name FROM TABLENAME WHERE product_sku IN($selectValues)";
    $result = $this->registry->db->query($sql);
    $return = array();

    $long_names = array();
    while($row = $result->fetch_assoc()) {
        $long_names[$row['product_sku']] = $row['long_name'];
    }

    foreach ($product as &$key) {
        $key['long_name'] = $long_names[$key['sku']];
    }
    return $product;
} 
```

# javascript - 从服务器文件加载 javascript 图像对象

> ID：15934913
> 
> 赞同：0
> 
> 时间：2013-04-10T19:40:00.580
> 
> 标签：javascript, image

我正在开发一个具有这种情况的移动应用程序：用户转到一个屏幕，在那里他们为图像提供索引元数据。他们可以从第一个屏幕转到第二个屏幕，在那里他们选择并上传实际图像以与元数据一起使用。选择后，他们会返回第一个屏幕，然后可以将图像和元数据上传到单独的 Web 服务。现在，一旦选择了图像并且用户返回到第一个屏幕，他们可能想要查看或更改图像（他们之前选择的），然后再将其实际提交到 Web 服务。所以我需要提供一种方式让用户返回第二个屏幕并查看他们之前上传的图像（无需再次选择）。到目前为止清楚吗？

在我的 ASP.Net MVC 移动应用程序代码中，我将上传的图像缓存到服务器上的临时文件路径中。现在我想获取该保存的文件并将其加载到 javascript 图像对象中，以便在用户返回第二个屏幕时将其显示给用户。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:44:17.407

当您将其上传到服务器时，服务器可以响应一个 URL，该 URL 可用于检索上传的图像。捕获该响应并使用它来设置`src`新客户端`Image`对象的属性。

# css - 使用 CSS 选择第二次出现的类？

> ID：15934914
> 
> 赞同：3
> 
> 时间：2013-04-10T19:40:04.233
> 
> 标签：css

给定以下（动态）标记，我需要匹配橙色类的第二次出现，无论有多少 div 具有类 apple。

```
<div>
  <div class="apple"></div>
  <div class="apple"></div>
  <div class="orange"></div>
  <div class="apple"></div>
  <div class="apple"></div>
  <div class="orange"></div> <--
  <div class="apple"></div>
</div> 
```

可以用 CSS 完成吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T19:42:16.550

您可以将它与选择器级别 3 一起使用来选择那些不是第一个的：

```
.orange ~ .orange {
} 
```

[示范](http://jsbin.com/ihigum/1/edit)

最好的方法是使用描述其他`.orange`元素的规则来完成样式：

```
.orange, .orange ~ .orange ~ .orange {
} 
```

[示范](http://jsbin.com/ihigum/5/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T19:54:00.847

在 HTML 中选择第二个类实例，例如：

```
<div>
<ul>
<li class="classname">text</li>
<li>text</li>
...
<li>text</li>
<li class="classname">text</li>
<li>text</li>
</div> 
```

使用这个 CSS（在 Chrome 中测试）。

```
div ul li.classname ~ .classname:not(.classname ~ .classname ~ .classname) 
```

在这种特殊情况下 :nth-child(2) 或 :nth-of-type(2) 不起作用。

# wxwidgets - 使用 wxDialog::ShowModal 时会返回什么

> ID：15934921
> 
> 赞同：1
> 
> 时间：2013-04-10T19:40:25.967
> 
> 标签：wxwidgets

全部：

我想知道当我在调用 Dialog->ShowModal() 后单击 wxDialog 上的“X”时会返回什么？

例如： wxDialog* Dialog = wxDialog(NULL,wxID_ANY,title,wxDefaultPosition,wxSize(310,170)); 对话框->ShowModal();

如果我单击标题栏上的 X 按钮，它应该返回什么？如果我调用 EndModal() 之类的方法怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:53:11.627

如果你点击关闭按钮，你会得到 wxID_CANCEL

EndModal() 返回您传递给它的任何值。 [http://docs.wxwidgets.org/trunk/classwx_dialog.html#a89b6085b05b63e98001311fafcfb21f0](http://docs.wxwidgets.org/trunk/classwx_dialog.html#a89b6085b05b63e98001311fafcfb21f0)

# vb.net - 如何根据子字符串对内容 Telerik GridBoundColumn 进行排序？

> ID：15934925
> 
> 赞同：1
> 
> 时间：2013-04-10T19:40:37.420
> 
> 标签：vb.net, sorting, telerik

我有以下内容：

```
<telerik:GridBoundColumn HeaderText="Name(s)" UniqueName="colNames" DataField="NameList"
                    AllowSorting="false"> 
```

绑定到此的数据来自一个 SQL 存储过程，我无法在不影响许多其他页面的情况下对其进行修改。我需要按子字符串对这些项目进行排序；要显示的字段是“名字姓氏”，我需要按姓氏排序。有没有办法修改上述内容以在“”之后对子字符串进行排序？我知道这是查找姓氏 (F. Murray Abraham == 'M') 的不完美解决方案，但这是我要实施的方法。

我正在尝试使用 Telerik SortExpression，但无法弄清楚语法（假设它甚至可用于此目的）。

如果有帮助，站点代码隐藏是在 VB.NET 中构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T02:45:02.830

最好的方法是通过向包含姓氏的返回数据集添加新列来修改存储的过程，前提是姓氏列与名字分开定义。这不会影响已经在使用存储过程的其他页面，除非您在这些页面上为 RadGrid 使用 AutoGeneratedColumn。

如果从存储过程返回的名称列是完整格式（即“John Smith”）和/或您无法从存储过程中将字段添加到返回的数据集，则必须在代码隐藏中执行此操作：

1.  执行存储过程并使用返回的数据集填充 DataTable
2.  将 String 类型的新列“LastName”添加到 DataTable 对象
3.  对于 DataTable 中的每一行，从“NameList”列中提取姓氏
4.  将其分配给“姓氏”列
5.  将修改后的 DataTable 对象设置为您的 RadGrid.DataSource

请记住将 SortExpression="LastName" 添加到上面的 GridBoundColumn 标记和 AllowSorting="true"。

要提取姓氏：

```
 If Not IsDBNull(row!NameList) Then
        Dim nameparts() As String = Cstr(row!NameList).Split(New Char() {" "c}, StringSplitOptions.RemoveEmptyEntries)
        If nameparts.Count > 0 Then
            row!lastname = nameparts.GetUpperBound(0)
        End If
    End If 
```

# vb.net - 文件是目录不是文件

> ID：15934928
> 
> 赞同：0
> 
> 时间：2013-04-10T19:40:46.757
> 
> 标签：vb.net

我有一个名为 test 的文件夹，其中有子文件夹：根目录下的 A、B 和 C。我正在尝试将文件复制到这三个文件夹中。

不知道为什么我收到错误：

目标文件“c:\test\A”是一个目录而不是一个文件。请帮忙。

```
 Dim OPUSINI As New FileInfo("C:\Program Files (x86)\OPUS_4.5\OPUS32.INI")
    'Where is will be going
    'Dim Win7DestLocation As String = "C:\Users"
    Dim Win7DestLocation As String = "C:\test"
    Dim WinXPDestLocation As String = "C:\Documents and Settings"
    'Get a list of all the Subfolders within the Destination location
    Dim Win7Destdir As New DirectoryInfo(Win7DestLocation)
    Dim WinXPDestdir As New DirectoryInfo(WinXPDestLocation)
    'Checks if Destination Exists for Windows 7
    Dim Win7CheckExistDestLocation As New IO.DirectoryInfo(Win7DestLocation)
    'Checks if Destination Exists for Windows XP
    Dim WinXPCheckExistDestLocation As New IO.DirectoryInfo(WinXPDestLocation)
    If Win7CheckExistDestLocation.Exists Then
        Try
            For Each subfolder As DirectoryInfo In Win7Destdir.GetDirectories

                OPUSINI.CopyTo(subfolder.FullName, True)
            Next
        Catch ex As Exception
            MessageBox.Show("Unable to backup Pump data files." + ex.ToString, "Backup Error:", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:51:48.817

您正在将目录名称传递给[CopyTo](http://msdn.microsoft.com/en-us/library/5axsfwbc.aspx)。
该方法需要文件名而不是目录名。
因此收到异常。

如果我很好理解您的代码，您需要将该行更改为

```
Dim destFile = Path.Combine(subfolder.FullName, OPUSINI.Name))
OPUSINI.CopyTo(destFile, True) 
```

这里也不需要使用 DirectoryInfo 对象。
简单的[Directory](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx)类可以用更少的开销做同样的事情

# jquery - 使用 jQuery 事件控制 HINT.css 库工具提示的显示

> ID：15934929
> 
> 赞同：3
> 
> 时间：2013-04-10T19:40:48.727
> 
> 标签：jquery, css, show-hide, mouseleave

我正在使用[`HINT.css`](http://kushagragour.in/lab/hint/)并希望在单击 div/class 时隐藏提示，并在使用鼠标离开 div/class 时打开它。我认为我在这里所拥有的非常简单。我很惊讶它没有用，我错过了什么？

```
<div class="promo">
   <div class="offer hint--top hint--info hint--rounded hint--info" 
    data-hint="PUT SOME COOL COPY, TO GET PEOPLE TO CLICK!!!"></div>
</div>

$(document).ready(function() {
   $( '.promo' ).on('click','.offer', function(){
   $(this).hide();
});
   $( '.promo' ).on('mouseleave','.offer', function(){
   $(this).show();
});
}); //end of document ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:49:57.413

您遇到的问题是由[`HINT.css`](http://kushagragour.in/lab/hint/)图书馆的工作方式造成的。工具提示是伪元素，所以虽然添加的 jQuery click 事件会隐藏元素，但由于 HINT.css 代码`:hover`类仍在应用于元素，它会立即再次出现。

但是我们可以解决这个问题并通过将`display:none`规则添加到伪元素作为由 jQuery 添加或删除的类来添加功能。

例如：

**JavaScript**

```
$(function() {
  $('.promo').on('click','.offer', function() {
    $(this).addClass('fakeHide');
  });

  $('.promo').on('mouseleave','.offer', function(){
    $(this).removeClass('fakeHide');
  });
}); 
```

**CSS**

```
.fakeHide[data-hint]:before, .fakeHide[data-hint]:after {
  display:none;
} 
```

**HTML**

```
<div class="promo"><span class="offer hint--bottom hint--rounded hint--info" data-hint="PUT SOME COOL COPY!!">I am a promotion - hover over me</span></div> 
```

这是一个很难演示的。出于某种原因，jsFiddle 和 jsBin 都不会在*编辑*模式下显示工具提示，但是它们确实可以在*实时预览*模式下工作。

[**查看演示**](http://jsbin.com/ezuhad/2)或[**编辑演示**](http://jsbin.com/ezuhad/2/edit)- 请记住它仅在实时预览模式下出现！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:51:32.967

一旦您单击 div，它就会隐藏 div，但同时它会`mouseleave`在您再次调用 show 的 div 上触发。这就是为什么它永远不会被隐藏。

[JSFIDDLE](http://jsfiddle.net/Tf8Wc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:45:48.537

您上面提到的代码正是您想要的..

[http://jsfiddle.net/MjFRe/][1]

[1]: JsFiddle 演示

# c# - 删除 id3 标签

> ID：15934933
> 
> 赞同：1
> 
> 时间：2013-04-10T19:41:01.533
> 
> 标签：c#, id3

我需要从 mp3 文件中删除所有 id3 标签。我试过这个：

```
byte[] a = System.IO.File.ReadAllBytes("X.mp3");
int x = 0;
int b=3;
for (int i = 6; i <= 9; i++)
{
   x += (a[i] << (b * 7));
   b--;
}
byte[] r = new byte[a.Length-x];
for (int i = x; i < a.Length; i++)
{
   r[i-x] = a[i];
}
System.IO.File.WriteAllBytes("X.mp3", r); 
```

但它不会删除所有 id3 标签。我认为计算标签的大小有问题，但我不知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:15:21.787

您的代码仅处理文件开头的 ID3v2 标记。如果您的 MP3 文件同时具有 ID3 类型 - ID3v1 和 ID3v2 - 您需要将两者都删除。

ID3v1 标签放置在文件的末尾并且是固定长度的。它们实际上更容易剥离 - 它们始终是文件的最后 128 个字节，并以文本“TAG”开头。

使用预先存在的库来处理 MP3 文件可能会为您提供更好的服务；其中之一是开源库[taglib-sharp](https://github.com/mono/taglib-sharp)。它可以操作这两种类型的 ID3 标签，以及执行各种其他任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T21:18:08.610

我最近不得不这样做并且不想使用图书馆。这是一个片段：

```
var mp3 = File.ReadAllBytes("x.mp3");

int skip = 0;
if (Encoding.ASCII.GetString(mp3, 0, 3) == "ID3")
    skip = 7 + BitConverter.ToInt32(mp3.Skip(6).Take(4).Reverse().ToArray(), 0);

int take = mp3.Length - skip;
if (Encoding.ASCII.GetString(mp3, mp3.Length - 128, 3) == "TAG")
    take -= 128;

File.WriteAllBytes("stripped.mp3", mp3.Skip(skip).Take(take).ToArray()); 
```

# c# - 从 C# 中的两个方法添加列表

> ID：15934936
> 
> 赞同：2
> 
> 时间：2013-04-10T19:41:10.483
> 
> 标签：c#, list, add

我正在尝试使用 getRecords 列表添加 getRecords2 列表。出于某种原因，getRecords 需要很长时间才能处理并在我调用它时超时。

```
public static List<ListA> getRecords2(string id)
{
   List<ListA> listOfRecords = new List<ListA>();
   using (SqlConnection con = SqlConnect.GetDBConnection())
   {
      con.Open();
      SqlCommand cmd = con.CreateCommand();
      cmd.CommandText = "sp2";
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.Add(new SqlParameter("@id", id));

      SqlDataReader reader = cmd.ExecuteReader();

      while (reader.Read())
      {
         ListA listMember = new ListA();
         listMember.ID = (int)reader["ID"];
     listMember.Name = reader["FullName"].ToString().Trim();
      }
      con.Close();
    }
       return listOfRecords;
  }

  public static List<ListA> getRecords(string id)
  {
     List<ListA> listOfRecords = new List<ListA>();
     using (SqlConnection con = SqlConnect.GetDBConnection())
     {
        con.Open();
        SqlCommand cmd = con.CreateCommand();
        cmd.CommandText = "sp1";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@id", id));

        SqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
           ListA listMember = new ListA();
           listMember.ID = (int)reader["ID"];
           listMember.Name = reader["FullName"].ToString().Trim();
        }
        con.Close();
      }
      List<ListA> newlist = getRecords(id);
      foreach (ListA x in newlist) listOfRecords.Add(x);
      return listOfRecords;
   } 
```

我在 getRecords2 中添加了 getRecords 列表。我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:46:19.100

首先，您不会在`while(reader.Read())`循环中向列表中添加任何内容。和`Add`都缺少方法调用：`GetRecords``GetRecords2`

```
 while (reader.Read())
    {
        ListA listMember = new ListA();

        listMember.ID = (int)reader["ID"];
        listMember.Name = reader["FullName"].ToString().Trim();

        // you have to add this line:
        listOfRecords.Add(listMember);
    } 
```

还有一个问题：你`getRecords(id)`一遍又一遍地打电话：

```
List<ListA> newlist = getRecords(id);
foreach (ListA x in newlist) listOfRecords.Add(x); 
```

应该：

```
List<ListA> newlist = getRecords2(id);
foreach (ListA x in newlist) listOfRecords.Add(x); 
```

最后但并非最不重要的一点是：您不必调用-作为方法的一部分，`con.Close();`它会在程序流程退出块时自动完成。`using``Dispose`

# c - 给定数组中两个元素之间的最小距离

> ID：15934942
> 
> 赞同：1
> 
> 时间：2013-04-10T19:41:27.243
> 
> 标签：c, arrays, optimization, distance

在一次比赛中，他们要求编写一个 C 函数，该函数返回给定数组中 X 和 Y 之间的最小距离，其中 X 和 Y 是数组的元素，前提是 X 和 Y 是不同的。

如果已经写了一段代码，但是那段代码遇到了很多`if`'s 和`else`'s，

我的代码（有一些错误）：

```
 int getMinXYDist(int arr[],int n,int x,int y){
         int i,flag = 0,ele = -1 ,dist = 0;
         int minDist = 1000; // SETTING minDist TO MAX VALUE.
         for( i = 0 ; i< n; i++)
          if(arr[i] == x || arr[i] == y){
           if(flag == 0){
            flag = 1;
            ele = arr[i]==x?x:y;
            dist = 0;
          }
        else{
          if(ele == x ){
           if(arr[i] == y){
                minDist = dist < minDist ? dist : minDist;
                dist = 0;
                ele = y;
           }
           else //if(arr[i] == x){
               dist = 0;
          }
          else { //if(ele == y)
              if(arr[i] == x){
                minDist = dist < minDist ? dist : minDist;
                dist = 0;
                ele = x;
           }
          }

          }
        }
          else {
              if(flag == 1)
            dist++;
          }

   return minDist;
}

 void main(){
      int arr = {6,1,5,1,8,6,3,4};
      printf("\n%d" ,getMinXYDist(arr,sizeof(arr)/sizeof(int),6,5) ); //Must return 2.
 } 
```

任何人都可以提出一种更聪明的方法[就像在 O(n) 时间复杂度中一样] 计算距离吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:07:01.000

If x or y is found, record the index it was found at. Once both have been found, each time you find either, compute distance to the last index containing the other value. Update the minimum value if the distance is lower than the previous minimum.

```
int getMinXYDist(int arr[],int n,int x,int y)
{
    int i, indexX, indexY;
    int foundX = 0;
    int foundY = 0;
    int curDist;
    int minDist = n;

    for (i = 0; i < n; i++)
    {
        if (arr[i] == x)
        {
            foundX = 1;
            indexX = i;
            if (foundX && foundY)
            {
                curDist = indexX - indexY;
                if (curDist < minDist)
                {
                    minDist = curDist;
                }
            }
        }
        else if (arr[i] == y)
        {
            foundY = 1;
            indexY = i;
            if (foundX && foundY)
            {
                curDist = indexY - indexX;
                if (curDist < minDist)
                {
                    minDist = curDist;
                }
            }
        }
    }
    return minDist;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:12:48.067

基本上，我认为OP的解决方案已经是最优的，这个算法的下限是`n`步骤，即一次迭代完成。

```
// if -1 is returned, then none of x and y are in the array
// if n is returned, then one of x and y is not in the array
// otherwise, mindist(x, y) is returned.
int test(int v[], int n, int x, int y)
{
    int flag = -1;
    int i, a = -1, b = -1, dist = n;
    for (i = 0; i < n; ++i) {
        if (v[i] == x) {
            flag = 0;
            a = i;
            break;
        } else if (v[i] == y) {
            flag = 1;
            b = i;
            break;
        }
    }
    if (flag < 0) return -1; // x and y are both not in array;

    for (++i; i < n; ++i) {
        if (v[i] == x) {
            if (0 == flag) a = i;
            else {
                flag = 0;
                if (i - b < dist) dist = i - b;
                a = i;
            }
        } else if (v[i] == y) {
            if (1 == flag) b = i;
            else {
                flag = 1;
                if (i - a < dist) dist = i - a;
                b = i;
            }
        }
    }

    return dist;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T19:29:21.637

```
int minDistance ( int arr[], int n, int x, int y) {

    if(x == y) return 0;
    int index1 = -1;
    int index2 = -1;
    int minvalue = n;

    for(int i = 0 ; i < n; i++){
        if((arr[i] == x) && ((i-index2) < minvalue)){
              index1 = i;                                    
              if( index2 != -1)minvalue = i-index2;
        }else if((arr[i] == y) && ((i-index1) < minvalue)){
              index2 = i;                                    
              if( index1 != -1)minvalue = i-index1;
        }     
    }
    return minvalue;
} 
```

在哪里

*   `n`: 数组的大小。
*   `x`和`y`：两个输入数组的数量。

如果`minvalue`返回，`n`则数组中不存在`x`或`y`不存在。

复杂性：O(n)，一次通过。

# c++ - 如何使用 scons 2.3 visual express 2012 构建 c++ 项目？

> ID：15934944
> 
> 赞同：5
> 
> 时间：2013-04-10T19:41:28.550
> 
> 标签：c++, visual-c++, scons

我尝试：

```
env = Environment(ENV = {'PATH' : os.environ['PATH'], \
            'INCLUDE' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\', \
            'LIB' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\lib\\'}) 
```

但它不起作用。错误信息：“cl”不是命令...

我在 scons wiki ( [http://www.scons.org/wiki/PlatformSpecificNotes#Visual_C.2B-.2B-](http://www.scons.org/wiki/PlatformSpecificNotes#Visual_C.2B-.2B-) ) 中找到了描述：如果使用 Microsoft Visual C++，则需要设置 'INCLUDE'、'LIB' 和 'PATH ' 在您的环境中，然后在创建“环境”对象时导入它们。这些将用于定位 MSVC++ 工具并设置“CPPFLAGS”等。

我究竟做错了什么？

完整的 sconstruct（它适用于 ubuntu，以及带有 mingw 的 Windows）：

```
import os
import sys

if ARGUMENTS.get('ndk', 0):
    current_dir = os.getcwd()#os.path.dirname(os.path.abspath(__file__))
    os.environ["NDK_PROJECT_PATH"] = current_dir + '/android-project'
    os.system("ndk-build") # use V=1 if can't compile for android
    exit(0)

if ARGUMENTS.get('ant', 0):
    current_dir = os.getcwd()#os.path.dirname(os.path.abspath(__file__))
    android_prj_path = current_dir + '/android-project'
    os.chdir(android_prj_path)
    os.system("ant debug") # use V=1 if can't compile for android
    exit(0)

VariantDir('obj', 'src', duplicate = 0)

if sys.platform == 'win32':
    if ARGUMENTS.get('msvc', 0) == "1":
        env = Environment(ENV = {'PATH' : os.environ['PATH'], \
            'INCLUDE' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\', \
            'LIB' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\lib\\'})
    else:
        env = Environment(tools = ['mingw'])
        env.Append(CCFLAGS = '-U__STRICT_ANSI__') # for boost::program_options on mingw 4.7
        env.Append(LINKFLAGS = '-mwindows')
        env.Append(LIBS = ['mingw32', 'SDL2', 'SDL2main', 'm', 'user32', 'gdi32', \
                    'winmm', 'imm32', 'ole32', 'oleaut32', 'version', \
                    'uuid', 'glew32', 'opengl32'])
else:
    env = Environment()
    env.Append(CCFLAGS = '-rdynamic')
    env.Append(LIBS = ['SDL2', 'pthread', 'm', 'dl', 'GL'])

env.Append(CCFLAGS = '-fno-strict-aliasing') # for angelscript compile see doc
cur_dir = os.getcwd()
env.Append(CCFLAGS = '-I ' + cur_dir) # for boost find in include path
env.Append(CCFLAGS = '-g -std=c++0x -Wall -Wfatal-errors') #-msse2 -pg
env.Append(LINKFLAGS=[]) # -pg

src = Glob('obj/*.cpp')
src += Glob('obj/scene2d/*.cpp')
src += Glob('obj/pugixml/*.cpp')
src += Glob('obj/debug_support/*.cpp')
src += Glob('obj/angelscript/*.cpp')
src += Glob('obj/scriptarray/*.cpp')
src += Glob('obj/scriptstdstring/*.cpp')
src += Glob('obj/scriptbuilder/*.cpp')
src += Glob('obj/boost_libs_src/program_options/src/*.cpp')
src += Glob('obj/boost_libs_src/smart_ptr/src/*.cpp')
src += Glob('obj/boost_libs_src/system/src/*.cpp')
src += Glob('obj/boost_libs_src/filesystem/src/*.cpp')
src += Glob('obj/libwebp/*/*.c')
src += Glob('obj/zlib/*.c')
src += Glob('obj/libpng/*.c')

env.Program(target = 'start', source = src) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-03T13:56:18.893

使用 scons 和 MSVC 的最佳方式是：

```
env = Environment( MSVC_USE_SCRIPT = "c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\vcvars32.bat") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:33:11.867

适合我的完整脚本

```
import os
import sys

current_dir = os.getcwd()#os.path.dirname(os.path.abspath(__file__))

if ARGUMENTS.get('ndk', 0):
    os.environ["NDK_PROJECT_PATH"] = current_dir + '/android-project'
    os.system("ndk-build") # use V=1 if can't compile for android
    Exit(0)

if ARGUMENTS.get('ant', 0):
    android_prj_path = current_dir + '/android-project'
    os.chdir(android_prj_path)
    os.system("ant debug") # use V=1 if can't compile for android
    Exit(0)

VariantDir('obj', 'src', duplicate = 0)

if sys.platform == 'win32':
    if ARGUMENTS.get('msvc', 0) == "1":
        #os.system('"C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\vcvars32"')
        env = Environment(ENV = {'PATH' : os.environ['PATH'], \
            'INCLUDE' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Include\um\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\shared\\', \
            'LIB' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\lib\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Lib\\win8\\um\\x86\\'})
        env.Append(CCFLAGS = '-I ' + current_dir + '/dep/msvc/include') # for SDL2 on windows
        env.Append(CCFLAGS = '/Od /EHsc -DBOOST_ALL_NO_LIB')
        env.Append(LINKFLAGS = '/LIBPATH:' + current_dir + '/dep/msvc/lib/')
        env.Append(LINKFLAGS = '/SUBSYSTEM:WINDOWS')
        env.Append(LIBS = ['user32', 'gdi32', \
                    'winmm', 'imm32', 'ole32', 'oleaut32', 'version', \
                    'uuid', 'glew32s', 'opengl32'])
    else:
        env = Environment(tools = ['mingw'])
        env.Append(CCFLAGS = '-U__STRICT_ANSI__') # for boost::program_options on mingw 4.7
        env.Append(LINKFLAGS = '-mwindows')
        env.Append(LIBS = ['mingw32', 'SDL2', 'SDL2main', 'm', 'user32', 'gdi32', \
                    'winmm', 'imm32', 'ole32', 'oleaut32', 'version', \
                    'uuid', 'glew32', 'opengl32'])
else:
    env = Environment()
    env.Append(LIBS = ['SDL2', 'pthread', 'm', 'dl', 'GL'])

if ARGUMENTS.get('msvc', 0) != "1":
    env.Append(CCFLAGS = '-fno-strict-aliasing') # for angelscript compile see doc
    env.Append(CCFLAGS = '-std=c++0x -Wall -Wfatal-errors')

env.Append(CCFLAGS = '-I ' + current_dir) # for boost find in include path

if ARGUMENTS.get('release', 0) == "1":
    if sys.platform != 'win32':
        env.Append(CCFLAGS = '-DNO_OPENGL_CHECK -DSDL_ASSERT_LEVEL=1 -O2 -msse2') #-DNO_OPENGL_CHECK -DSDL_ASSERT_LEVEL=1 -O3 -msse2
    else:
        env.Append(CCFLAGS = '/MD')
        env.Append(LIBS = ['SDLmain', 'SDL', 'msvcrt'])
else:
    if sys.platform != 'win32':
        env.Append(LINKFLAGS=['-rdynamic']) # $(sdl2-config --static-libs)
        env.Append(CCFLAGS = '-g')
    else:
        env.Append(CCFLAGS = '/MDd /Gm- /Zi -D_DEBUG /Od ')
        env.Append(LINKFLAGS=['/INCREMENTAL'])
        env['PDB'] = ['start.pdb']
        env['CCPDBFLAGS'] = ['${(PDB and "/Zi /Fd%s" % File(PDB)) or ""}']
        env.Append(LIBS = ['SDLmain_d', 'SDL_d', 'MSVCRTD', 'libcmt'])

src = Glob('obj/*.cpp')
src += Glob('obj/scene2d/*.cpp')
src += Glob('obj/pugixml/*.cpp')
src += Glob('obj/debug_support/*.cpp')
src += Glob('obj/angelscript/*.cpp')
src += Glob('obj/scriptarray/*.cpp')
src += Glob('obj/scriptstdstring/*.cpp')
src += Glob('obj/scriptbuilder/*.cpp')
src += Glob('obj/scripthelper/*.cpp')
src += Glob('obj/boost_libs_src/program_options/src/*.cpp')
src += Glob('obj/boost_libs_src/smart_ptr/src/*.cpp')
src += Glob('obj/boost_libs_src/system/src/*.cpp')
src += Glob('obj/boost_libs_src/filesystem/src/*.cpp')
src += Glob('obj/libwebp/*/*.c')
src += Glob('obj/zlib/*.c')
src += Glob('obj/libpng/*.c')

prog = env.Program(target = 'start', source = src) 
```

# api - Soundcloud API 401 使用 /resolve 时未经授权

> ID：15934945
> 
> 赞同：2
> 
> 时间：2013-04-10T19:41:33.267
> 
> 标签：api, soundcloud

我正在使用“不使用 SoundCloud 连接屏幕进行身份验证”的身份验证方法（请参阅[http://developers.soundcloud.com/docs#authentication](http://developers.soundcloud.com/docs#authentication)）。这就是您提供整个凭证的方法——client_id、client_secret、用户名和密码。我也在使用 Ruby SDK。

```
# create client object with app and user credentials
client = Soundcloud.new(:client_id => 'YOUR_CLIENT_ID',
                        :client_secret => 'YOUR_CLIENT_SECRET',
                        :username => 'YOUR_USERNAME',
                        :password => 'YOUR_PASSWORD') 
```

我正在尝试使用客户端来解析用户。

```
puts client.get('/resolve', :url => 'https://soundcloud.com/random-username').inspect 
```

但是，我不断收到`401 Unauthorized`客户的退货。

我可以确认我正在验证，因为以下执行正常。

```
puts client.get('/me').username 
```

有没有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T09:23:40.040

我发现您需要`client_id`在每个请求中都包含您的内容。

```
puts client.get('/resolve', :url => 'https://soundcloud.com/random-username', client_id: 'YOUR_CLIENT_ID') 
```

# python - Python file.tell() 给出奇怪的数字？

> ID：15934950
> 
> 赞同：14
> 
> 时间：2013-04-10T19:41:51.270
> 
> 标签：python, python-3.x

我在 Windows 64 位上使用 Python 3.3.0。

我有一个如下所示的文本文件：（请参阅 mediafire 的下载链接底部）

```
hello

-data1:blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah

-data2:blah blah blah blah blah blah blah blah blah blah blah
-data3: Empty

-data4: Empty 
```

我试图在文件中导航，因此我`.tell()`用来确定我的位置。但是，当阅读如下所示的文件行时，我得到了一个非常奇怪的结果：

```
f=open("test.txt")
while True:
    a = f.readline()
    print("{}    {}".format(repr(a),f.tell()))
    if a == "":
        break 
```

结果：

```
'hello\n'    7
'\n'    9
'-data1:blah blah blah blah blah blah blah blah blah blah blah blah blah blah bl
ah blah\n'    18446744073709551714
'\n'    99
'\n'    101
'-data2:blah blah blah blah blah blah blah blah blah blah blah\n'    164
'-data3: Empty\n'    179
'\n'    181
'-data4: Empty'    194
''    194 
```

第三行的 18446744073709551714 是怎么回事？尽管它看起来像是一个不可能的值，但它`f.seek(18446744073709551714)`显然是一个可以接受的值，它显然确实把我带到了第 3 行的末尾。虽然，我似乎无法弄清楚为什么。

编辑：以二进制模式打开没有问题`tell()`：

```
f=open("test.txt","rb")
while True:
    a = f.readline()
    print("{}    {}".format(repr(a),f.tell()))
    if a == b"":
        break 
```

结果：

```
b'hello\r\n'    7
b'\r\n'    9
b'-data1:blah blah blah blah blah blah blah blah blah blah blah blah blah blah b
lah blah\r\n'    97
b'\r\n'    99
b'\r\n'    101
b'-data2:blah blah blah blah blah blah blah blah blah blah blah\r\n'    164
b'-data3: Empty\r\n'    179
b'\r\n'    181
b'-data4: Empty'    194
b''    194 
```

test.txt 文本文件可在此处下载，只有 194 个字节：[http ://www.mediafire.com/?1wm4lujb2j48y23](http://www.mediafire.com/?1wm4lujb2j48y23)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T19:46:33.537

这是由 UNIX 样式的行尾引起的记录行为：

> [`file.tell()`](http://docs.python.org/2/library/stdtypes.html#file.tell)
> 
> 返回文件的当前位置，如`stdio`'s `ftell()`。
> 
> **注意**：在 Windows 上，读取带有 Unix 样式行尾的文件时，`tell()`可能会返回非法值（在 之后）。`fgets()`使用二进制模式（'rb'）来规避这个问题。

* * *

以上文档取自python2.7.4文档。python3 的文档发生了一些变化，因为现在有一个处理 I/O 的类的层次结构，我找不到这些信息。您的测试表明行为并没有改变。此外，python3.3 的源代码在`XXX Windows support below is likely incomplete`调用的函数之前有注释`tell`。

* * *

python bug tracker 中存在与此相关的[问题](http://bugs.python.org/issue16273)，Catalin Iacob 的最终评论是：

> 我试图重现这一点，在我的磁盘上选择了一个文件，确实我得到了一个负数，但该文件有 Unix 行结尾。这记录在[http://docs.python.org/2/library/stdtypes.html#file.tell](http://docs.python.org/2/library/stdtypes.html#file.tell) 所以可能没有什么可做的。
> 
> 至于 Armin 在 msg180145 中的报告，尽管它不直观，但这与 ftell 在 Windows 上的行为相匹配，如 [http://msdn.microsoft.com/en-us/library/0ys3hc0b%28v=vs.100的备注部分所述%29.aspx](http://msdn.microsoft.com/en-us/library/0ys3hc0b%28v=vs.100%29.aspx)。文件对象上的 tell() 方法被明确记录为匹配 ftell 行为：“返回文件的当前位置，如 stdio 的 ftell()”。因此，即使它根本不直观，最好保持原样。在 Python3 和 Python 2.7 上使用 io.open 打开时，tell() 返回直观的非零位置，因此无论如何它在未来都是固定的。

所以这似乎是一个“不会修复”的错误。~~有人可能应该打开一个问题~~（评论了这个问题），因为在 python3 文档中根本没有提到这个事实。

* * *

根据[Antoine Pitrou](http://bugs.python.org/issue16273#msg186551)的说法， python3 根本不使用`ftell()`，因此这似乎是一个不同的错误。此外，该错误在 python3.2.3 中不可重现，并且可能是在修复此[问题](http://bugs.python.org/issue11114)时引入的（至少，这是我能找到的对`tell()`3.2.3 和 3.3 之间实现的唯一更改）

* * *

最后编辑：根据[`io`](http://docs.python.org/3/library/io.html#io.TextIOBase.tell)模块文档，该`tell`方法不**返回**自文件开头以来的字节数。返回的值是一个“不透明的数字”，这意味着您可以使用它的唯一方法是将它传递`seek`给以返回该位置。其他操作没有意义。在 python3.2.3 之前返回的值是您所期望的这一事实只是一个实现细节。

请注意，文档[这一](http://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files)部分中的信息完全是**错误**的，希望将来会修复它。

# mysql - 如何在SQL中获取下个月21岁生日的学生？

> ID：15934952
> 
> 赞同：0
> 
> 时间：2013-04-10T19:41:53.520
> 
> 标签：mysql, sql

我想获得所有生日是下个月的学生（我已经看过几个答案）只过滤那些将要 21 岁的学生，知道吗？我的表名是`students`，列名是`birthdate`（日期），谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:50:13.043

如果生日是日期类型，您可以使用如下内容：

```
SELECT *
FROM   students
WHERE
  birthdate BETWEEN
    LAST_DAY(CURDATE())+INTERVAL 1 DAY - INTERVAL 21 YEAR AND
    LAST_DAY(LAST_DAY(CURDATE())+INTERVAL 1 DAY) - INTERVAL 21 YEAR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:50:25.460

假设生日列是日期类型，您可以使用如下条件过滤掉 20 岁且下个月过生日的学生。

```
SELECT * FROM students
WHERE MONTH(birthdate) = (MONTH(NOW()) % 12) + 1
      AND
      TIMESTAMPDIFF(YEAR, birthdate, NOW()) = 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:06:52.957

Try this:

```
 SELECT * FROM students WHERE MONTH(birthdate)=(MONTH(CURDATE()) % 12 + 1)  AND
     (YEAR(CURDATE())-YEAR(birthdate) = 21) ; 
```

[**DEMO**](http://www.sqlfiddle.com/#!2/94b31/1)

# android - 我的顶点只显示一个三角形？

> ID：15934954
> 
> 赞同：1
> 
> 时间：2013-04-10T19:41:58.207
> 
> 标签：android, opengl-es, textures, vertices

这是我为带有索引的树的 2 个三角形的代码，只显示了正方形的下半部分，我不知道我在哪里搞砸了，我已经有一段时间了，谢谢你的时间

```
public class sword extends GLGame {

@Override
public Screen getStartScreen() {
    return new LightScreen(this);
}

class LightScreen extends GLScreen {
    float angle;
    Vertices3 cube,trees;
    PointLight light;
    EulerCamera camera;
    Texture tree;
    Texture buttonTexture;
    SpriteBatcher batcher;
    Camera2D guiCamera;
    TextureRegion buttonRegion;
    Vector2 touchPos;
    float lastX = -1;
    float lastY = -1;

    public Context mContext;
    protected float[] mVMatrix = new float[16];
    protected float[] mPMatrix = new float[16];
    public float swordtouchx,swordtouchy,swordtouchz;
    SkyBox skybox;

    public LightScreen(Game game) {
        super(game);
        mContext = getApplicationContext();
        tree = new Texture(glGame,"tree.png");
        cube = ObjLoader.load(glGame, "swordal.obj");
        light = new PointLight();
        light.setPosition(3, 3, -3);
        camera = new EulerCamera(80, 480
                / (float) 320, 1, 100);
        camera.getPosition().set(0, 0, 0);
        batcher = new SpriteBatcher(glGraphics, 400);
        guiCamera = new Camera2D(glGraphics, 480, 320);

        touchPos = new Vector2();

        GL10 gl = glGraphics.getGL();
        skybox = new SkyBox(mContext);
        skybox.loadTexture(gl);
        trees = new Vertices3(glGraphics,4, 6, false, true,false);
        float[] vertices = { -0.5f, -0.5f, 0.5f, 0, 1,
                0.5f, -0.5f, 0.5f, 1, 1,
                0.5f,  0.5f, 0.5f, 1, 0,
               -0.5f,  0.5f, 0.5f, 0, 0};
         short[] indices = { 0, 1, 2, 3, 2, 0};
        trees.setVertices(vertices, 0, 20);
        trees.setIndices(indices, 0, indices.length);

    }

    @Override
    public void resume() {

    }

    @Override
    public void update(float deltaTime) {
        angle += deltaTime * 5;
        game.getInput().getTouchEvents();
        float x = game.getInput().getTouchX(0);
        float y = game.getInput().getTouchY(0);
        guiCamera.touchToWorld(touchPos.set(x, y));
        swordtouchx = x;
        swordtouchy = y;

        if(game.getInput().isTouchDown(0)) {
            swordtouchy = -1f;
            if(touchPos.x < 64 && touchPos.y < 64) {
                camera.rotate(5, 0);

            } else if(touchPos.x < 128 && touchPos.x > 64 && touchPos.y <64){
                camera.rotate(-5, 0);

            }
        } else { 

            lastX = -1;
            lastY = -1;
        }
        List<TouchEvent> events = game.getInput().getTouchEvents();
        int len = events.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = events.get(i);
            if (event.type == TouchEvent.TOUCH_UP){
                swordtouchy = 600;
            }
        }
        if(camera.getDirection().z < 0){
            swordtouchz = camera.getDirection().z-1.5f;
        }else{
            swordtouchz = camera.getDirection().z +1.5f;
        }
        if(camera.getDirection().x < 0){
            swordtouchx = camera.getDirection().x -0.5f;
        }else{
            swordtouchx = camera.getDirection().x +0.5f;
        }
    }

    @Override
    public void present(float deltaTime) {
        GL10 gl = glGraphics.getGL();

        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        gl.glViewport(0, 0,glGraphics.getWidth(), glGraphics.getHeight());

        camera.setMatrices(gl);

        //skybox.draw(gl);

        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        //gl.glEnable(GL10.GL_LIGHTING);

        trees.bind();
        tree.bind();
        float o = 0;
        for(int i = 0;i<50;i++){
            gl.glPushMatrix();
            gl.glTranslatef(o, -2.5f, 5);
            trees.draw(GL10.GL_TRIANGLES, 0, trees.getNumVertices());

            gl.glPopMatrix();
            o+=1f;}

        trees.unbind();

        gl.glDisable(GL10.GL_BLEND);
        //gl.glDisable(GL10.GL_TEXTURE_2D);
        cube.bind();
        //light.enable(gl, GL10.GL_LIGHT0);

            gl.glTranslatef( swordtouchx,camera.getPosition().y + swordtouchy, swordtouchz);
        //gl.glRotatef(90, 0, 0, 1);
        gl.glRotatef(90, 1, 0, 0);

        cube.draw(GL10.GL_TRIANGLES, 0, cube.getNumVertices());
        cube.unbind();

        guiCamera.setViewportAndMatrices();

        gl.glDisable(GL10.GL_DEPTH_TEST);

    }

    @Override
    public void pause() {
    }

    @Override
    public void dispose() {
    }
    protected void setSkybox(int resourceId) {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:56:04.617

看看您提供索引的方式，您似乎混淆了缠绕订单：

```
short[] indices = { 0, 1, 2, 3, 2, 0}; 
```

虽然您的第一个三角形是按**逆时针**顺序给出的，但您应该按顺时针顺序添加第二个三角形。

很可能您的第二个三角形刚刚被剔除。尝试像这样指定您的坐标：

```
short[] indices = { 0, 1, 2, 3, 0, 2}; 
```

除非被告知要`glDisable(GL_CULL_FACE)`加快绘图速度，否则 opengl 将丢弃法线指向远离观察者的任何三角形，因为建议从该角度看它们是不可见的。

因为你的坐标是这样给出的：

```
 3        2
    +------+
    |      |
    |      |
    +------+
   0        1 
```

序列`3, 2, 0`将像这样结束：

```
 3        2
     ---->
    ^   / 
    |  / 
    | / 
     v    
   0 
```

相反，您正在寻找的是这个缠绕顺序：

```
 3        2
     <----
    |   ^
    |  / 
    | / 
    v  
   0 
```

# c# - 在运行时添加 .NET dll 还是更不容易出错的替代方案？

> ID：15934958
> 
> 赞同：1
> 
> 时间：2013-04-10T19:42:11.850
> 
> 标签：c#, .net, dll

另一个“X 的最佳方式”，但我有一个问题，我应该如何设计我正在开发的这个特定软件。

我有这个 C# WPF 软件（我们称之为 ENGINE），它遍历一个任务列表并在每个任务上调用相同的三个方法：initialize()、calculate() 和 save()。

```
//Simplified obviously (I use indexes vs. foreach because of other code I left out)
while(currentOperatingIndex < tasks.Count)
{
    Task currentTask = tasks.ElementAt(currentOperatingIndex);
    currentTask.initialize();
    currentTask.calculate();
    currentTask.save();
    currentOperatingIndex++;
} 
```

现在这些任务我需要在运行时动态加载到 ENGINE 程序中。当创建新的 TASK 时，引擎程序将永远不会重新构建或更改。所以我设计它，使每个 TASK 都在它自己的库 DLL 中。因此，引擎将在运行时迭代一个 DLL 文件文件夹，并将每个 DLL 加载到程序集中。

我这样设计它是因为每个 TASK 的初始化、计算和保存都不同。例如，假设我要添加一个新任务，我不必更改 ENGINE 的代码或任何其他 DLL，我只需为 TASK 创建一个新的 DLL，确保它具有这 3 个功能，并将其放入文件夹中. 我的目标是，当需要一个新的 TASK 时，程序员可以打开 Visual Studio，创建一个新的 C# 库，创建三个函数，然后编写实现。

这是处理“类似插件”功能的最佳方式吗？

希望我很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:52:01.197

定义一个接口（例如ICalcTask）有3个方法：initialize、calculate、save。

编写插件类库 dll，包括实现 ICalcTask 接口的类。

让您的主机应用程序扫描插件目录中包含 ICalcTask 实现的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:15:21.753

正如 Alexei Levenkov 在对我的问题的评论中提到的，如果您希望在不添加额外代码来包含它们的情况下动态地将插件添加到程序中，请使用 MEF，它将许多插件导入目录中，您可以从那里使用它。谢谢各位的意见。

# vb.net - 使用 Emgu CV 的 Capture = New Capture() 连接到 IP 摄像机

> ID：15934961
> 
> 赞同：1
> 
> 时间：2013-04-10T19:42:12.567
> 
> 标签：vb.net, ip-address, emgucv

使用 Visual Basic 2008 和 Emgu CV，我可以在我的 PC 上捕获网络摄像头的流。**我想要做的是连接到一个 IP 摄像机，知道它的 URL，使用 Capture = New Capture()。**

这是我的代码：

```
Imports Emgu.CV
Imports Emgu.CV.Util
Imports Emgu.CV.Structure

Public Class Form1

Dim capturez As Capture = New Capture("rtsp://[IP Address]/mpeg4/media.amp")

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

    Dim imagez As Image(Of Bgr, Byte) = capturez.QueryFrame()
    PictureBox1.Image = imagez.ToBitmap()

End Sub

End Class 
```

我收到以下错误：*无法从 rtsp://[IP 地址]/mpeg4/media.amp 创建捕获*

是否可以使用 Capture = New Capture 来做到这一点？如果没有，他们还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T14:34:30.320

这是我最终使用的解决方案。它仅适用于 JPEG 网络摄像头（不是 MJPEG），不需要 EmguCV

```
'Connect To Webcam ----------------------------------------------------------------------
    Dim NumberFrames As Integer = 1
    Dim imgNum = Convert.ToString(FrameNumber)
    Dim sourceURL As String = ("http://91.142.238.200/record/current.jpg?rand=" + imgNum)
    'create HTTP request
    Dim req As HttpWebRequest = HttpWebRequest.Create(sourceURL)
    'get response
    Dim res As HttpWebResponse = req.GetResponse
    'get response stream
    Dim reader As New StreamReader(res.GetResponseStream())
    'read data from stream
    Dim img As Image = Image.FromStream(res.GetResponseStream())
    'get bitmap
    PictureBox1.Image = img
    'Increment frame
    FrameNumber = FrameNumber + 1
    '----------------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:49:29.463

这个摄像头有ip用户名和密码吗？如果你尝试这样的事情：

```
Imports Emgu.CV
Imports Emgu.CV.Util
Imports Emgu.CV.Structure

Public Class Form1

Dim capturez As Capture = New Capture("rtsp://username:password@[IP Address]/mpeg4/media.amp")

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

Dim imagez As Image(Of Bgr, Byte) = capturez.QueryFrame()
PictureBox1.Image = imagez.ToBitmap()

End Sub

End Class 
```

# .net - 使用 MVVM 模式在 WPF 中传递和持久化连接字符串？

> ID：15934965
> 
> 赞同：3
> 
> 时间：2013-04-10T19:42:22.083
> 
> 标签：.net, wpf, mvvm, connection-string, unity-container

我的应用程序需要能够存储来自登录模块的连接字符串，以供应用程序中的所有其他模块使用，其中大约有 50 个。我最初打算通过广播和订阅新的/更改的连接字符串事件来使连接字符串可用，但是由于 50 个模块中的大多数/全部是按需加载的，因此它们在登录过程中无法订阅该事件，因为它们是登录过程后加载。根据我的理解，我需要一种不同的方法来使连接字符串可用。

然后我考虑将连接字符串放在 shell 中并尝试将其公开给任何加载的模块，但我找不到一种方法来做到这一点，而不会破坏 MVVM 模式并引入不需要的依赖项。

如果有人知道实现上述两个选项中的任何一个的方法，我会很想知道它是否可以在遵循 MVVM 模式的同时完成。

我现在在想，最好的方法是对连接字符串使用单例的一些变体作为共享服务。我希望 Unity Container 能够存储连接字符串，并且我可以使用服务定位器在任何模块中访问它，但我不知道该怎么做。MEF 和/或 Silverlight 中有任何性质相似的示例。 **有没有人在 WPF 中这样做过，或者有一个如何编写连接字符串单例并将其添加到 Unity 容器的示例？指南、教程或一些代码片段将不胜感激！**

**注意：**我在后端使用 Prism 和 Unity、Oracle，应用程序将部署在 Citrix 服务器上（以安全的名义，他们阻止开发人员写入 app.config），这就是为什么我不能使用这种方法. **当多个用户从 Citrix 运行应用程序时，使用 Singleton 作为连接字符串也会导致问题吗？每个用户都有自己的单例连接字符串吗？** 如果不是，那么我的整个问题都会改变，是否有一种好方法可以用来传递/保留所有模块之间的连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:22:07.943

如果您使用的是 Prism，我强烈建议 Unity Container 注册连接字符串并将 ctor-dependency 注入到您拥有的各种 VM 中。

有点像，定义其他程序集/虚拟机可以使用它的合同，以及 LoginModule 中的实现：

```
class ConnectionInfo : IConnectionInfo 
{
    public GetConnectionString()
    {
      // you get the drift...!  
      // you should probably cache the result into a Lazy<T> impl. and just return
      // that value on future calls, to save the lookup of the config.
    }
} 
```

在登录模块中注册它：

```
container.RegisterType<IConnectionInfo, ConnectionInfo>(
  new ContainerControlledLifetimeManager()); 
```

并且在你的虚拟机的ctor中进行DI它 - 在这一点上它是无忧无虑的：

```
public MyViewModel(IConnectionInfo connectionInfo_)
{
  var connectionString = connectionInfo_.GetConnectionString();
} 
```

我想我对这些情况的首选方法是更喜欢 IEventAggregator 之上的接口，如果我可以选择的话。它只是更容易处理诸如由于事件信号发生得太早而导致迟创建的 VM 没有接收 IEA 信号的情况。这将导致一些真正痛苦的技术债务积累。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:03:16.243

要回答有关如何在 Unity 容器中注册连接字符串的问题，您应该能够使用以下代码段实现所需的结果。

存储连接字符串：

```
Container.RegisterInstance<string>("ConnectionString", theConnectionString); 
```

检索连接字符串：

```
var connectionString = Container.Resolve<string>("ConnectionString"); 
```

正如我在上面的评论中提到的，另一种选择可能是创建一个请求和一个响应类型，您可以使用 EventAggregator 来回发送，让每个模块请求连接字符串并让登录模块回复。

```
var MyToken = Guid.NewGuid();

EventAggregator.GetEvent<ConnectionStringResponse>().Subscribe(r => {
    if(r.Token != MyToken)  // Make sure we're only handling responses to our request.
        return;

    ConnectionString = r.ConnectionString;
    // Kick off whatever other stuff you need to do once
    // you've gotten the connection string
    // Might also want to unsubscribe at this point unless you want
    // to go even further and handle changing connection strings.
});

EventAggregator.GetEvent<ConnectionStringRequest>().Publish(MyToken); 
```

# javascript - jQuery 错误 (skadate)

> ID：15934970
> 
> 赞同：0
> 
> 时间：2013-04-10T19:42:32.900
> 
> 标签：javascript, jquery

我正在使用 SkaDate，它返回的错误如下：

```
Uncaught Error: Syntax error, unrecognized expression: input[@type='checkbox'][@name ='match_religion[]'] 
```

所以，网站停止工作，有什么帮助吗？我正在使用 jQuery 1.8.1 并且已经尝试通过升级 jQuery

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:02:33.967

我已将 jQuery 版本更改为 1.2.6，它的工作很酷

感谢凯文 B 的评论：

该插件是为 jQuery 1.2.6 及更低版本编写的，通过插件并将 [@attributename... 替换为 [attributename... 或查找更新的插件。– 凯文 B 14 分钟前

# php - Config.php 文件无法正常使用 dirname(__FILE__)

> ID：15934972
> 
> 赞同：0
> 
> 时间：2013-04-10T19:42:37.053
> 
> 标签：php, config, dirname

我的配置文件如下所示：

```
<?php
define('ROOT_DIR', dirname(_FILE_));
?> 
```

然后我的html：

```
<?php 
require_once ('../../../../config.php');  // back to app root
?>

<?php
$pageTitle = 'title';
require_once(ROOT_DIR.'includes/content.php');
?> 
```

我知道我的配置文件正在加载，因为我可以在查看源代码时看到我的配置注释。

但是，否则我只会得到一个空白页。有人告诉我我做错了什么吗？

# 编辑：

**错误报告产量**

```
Warning: require_once(./includes/content.php) [function.require-once]: failed to open stream: No such file or directory in /Applications/MAMP/html/BLX2012/prototypes/19/demo.16/events/2013/PIC/LasVegas/index.php on line 10

Fatal error: require_once() [function.require]: Failed opening required './includes/content.php' (include_path='.:/Applications/MAMP/bin/php/php5.3.6/lib/php') in /Applications/MAMP/html/BLX2012/prototypes/19/demo.16/events/2013/PIC/LasVegas/index.php on line 10 
```

[对不起，我希望以上内容更具可读性]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:46:36.593

你错过了一个`/`：`require_once(ROOT_DIR.'includes/content.php');`

将其更改为： `require_once(ROOT_DIR.'/includes/content.php');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:59:09.297

在脚本的开头，添加此语句以查看是否有任何错误：

```
ini_set('error_reporting', E_ALL); 
```

是否有可能将`content.php`文件包含在错误的路径中？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T20:12:30.723

`_FILE_`应该是`__FILE__`（每边2个下划线）。

所以你的`ROOT_DIR`常量设置错误，PHP 不知道去哪里找。

# c# - C#，以编程方式查找任何过去的 BSOD 并获取代码

> ID：15934974
> 
> 赞同：3
> 
> 时间：2013-04-10T19:42:48.110
> 
> 标签：c#, .net, bsod

有没有办法使用 C#/.NET 来查找`KERNEL_DATA_INPAGE_ERROR`过去（即使只是最近）发生的以前的 BSOD 代码（例如）。

我只见过涉及应用程序的方法（例如：[如何分析 BSOD 以及它将提供给我的错误信息？](https://stackoverflow.com/questions/1321029/how-do-i-analyse-a-bsod-and-the-error-information-it-will-provide-me)），但想以编程方式收集错误代码列表。我不需要任何其他数据（内存转储等），而只需要识别源或原因的东西，例如在自动重启之前闪烁的消息。

这是我想找到的代码。[http://msdn.microsoft.com/en-us/library/windows/hardware/hh994433%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh994433%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:48.123

我自己没有做过，但看起来还不错：

1.  [获取事件日志列表](http://msdn.microsoft.com/en-us/library/74e2ybbs%28v=vs.100%29.aspx)
2.  [打开日志并查看全文](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog%28v=vs.100%29.aspx)

# java - 处理 - 美味的数据可视化

> ID：15934975
> 
> 赞同：1
> 
> 时间：2013-04-10T19:42:48.320
> 
> 标签：java, api, processing, data-visualization, delicious-api

对于一个学校项目，我正在尝试在处理平台中使用 Delicious API。

我有个问题，

到目前为止，我可以将各个帖子的“标题”和“标签”可视化到处理画布中。

我的代码看起来像这样。

```
 Delicious delicious;
PFont font;

String title;

void setup() {

  font = loadFont("HelveticaNeue-9.vlw");
  textFont(font);

  size(800, 1000);

  // Initiate Delicious object. Replace username and password with your own info.
  delicious=new Delicious("myusername", "mypassword");

  // Retrieve recent posts. The result is a List object containing the 
  // Posts as del.icio.us.beans.Post objects. We'll use List.toArray() to
  // give us an array of the Objects in the List.
  Object [] o=delicious.getRecentPosts("", 150).toArray();

  // Uncomment the following line to get all posts.
  //  Object [] o=delicious.getAllPosts().toArray();

  // Convert the Objects to Posts
  Post [] posts=new Post[o.length];
  for (int i=0; i<posts.length; i++) { 
    posts[i]=(Post)o[i];
  }

  // Print the posts
  println("Del.icio.us posts retrieved: "+posts.length);
  for (int i=0; i<posts.length; i++) {
    println(i+": "+posts[i]);

    pushMatrix();
    translate(50, 50);

    float descriptionWidth = textWidth(posts[i].getDescription());
    float tagWidth = textWidth(posts[i].getTag());
    int margin = 30;

    fill(50);
    text(posts[i].getDescription(), 0, 20*i);
     text(posts[i].getTime(), descriptionWidth + margin, 20*i);
    fill(135);
    text(posts[i].getTag(), descriptionWidth + margin, 20*i);
    popMatrix();
  }
} 
```

我想要做的是，我想获得一个特定的“设计”，并将帖子的标题分散在该标签周围，并从中心到每个人画一条线......

但是在文档中，我找不到在方法中获取单个特定标签的`getTag()`方法。

文档的链接在这里，(getTag) [http://delicious-java.sourceforge.net/del/icio/us/beans/Post.html#getTag()](http://delicious-java.sourceforge.net/del/icio/us/beans/Post.html#getTag())

> 获取标签“设计”并随机键入包含“设计”标签的帖子标题。

它背后的逻辑是什么，你能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T12:23:33.363

由于您正在遍历所有帖子，因此请使用 getTags() 接收包含标签的字符串，检查它是否包含您感兴趣的标签，如果是，则将帖子放入数组或数组列表中。遍历所有帖子后，您将获得一个列表，其中包含所有带有所需标签的帖子。

# java - 如何更新mysql中的整列？

> ID：15934980
> 
> 赞同：-3
> 
> 时间：2013-04-10T19:42:58.783
> 
> 标签：java, mysql, sql, sql-update

有谁知道如何使用java更新mysql中的整个列？我需要将在线列设置为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:43:32.137

```
UPDATE tablename
SET online = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:53:51.980

不要在查询中添加**where**子句。

例如

```
update Person set name="XYZ" where id=1; 
```

在这里，您只更新特定的结果集。

但是没有 where 子句的相同查询，

```
update Person set name="XYZ". 
```

您正在更新名称列设置为 XYZ 的所有记录。

# jquery - jQuery 小部件加载所需的脚本

> ID：15934983
> 
> 赞同：0
> 
> 时间：2013-04-10T19:43:09.730
> 
> 标签：jquery

我正在构建一个大型 jQuery 小部件，并且我有一些脚本依赖于运行这个小部件。当然，我可以将它们包含在我的 html 页面中，但这并不那么热门。我需要从我的小部件中加载它们。

我知道 $.getScript 但不幸的是，它似乎会在结束 } 之后运行代码，然后再运行其中的内容。它也不会缓存那些会降低站点速度的脚本。

我已经尝试过 LazyLoad 插件，与 $.getScript() 相同，它会在函数之后运行代码，然后再运行其中的代码。

我想做的是在 _create 函数中我可以调用 this._dependencies() 并加载我需要的所有必需的脚本，然后在 _create 中继续。

这是一些代码：

```
;(function ($, window, document, undefined) {
    $.widget("test", {
        create: function () {
            this._dependencies();
            $..setLocale(this.locale);
        },
        _dependencies: functio() {
            LazyLoad.js(['jquery.i18n.js', 'test.i18n.js'], function () {});
        }
    });
})(jQuery, window, document); 
```

# ios - UI 模板视图 - iOs 应用程序所有场景中的通用 UI 元素？

> ID：15934987
> 
> 赞同：5
> 
> 时间：2013-04-10T19:43:15.650
> 
> 标签：ios, cocoa-touch, user-interface, uistoryboard

我正在开发具有通用 UI 元素的 iOs 应用程序 - 所有场景的页眉（带有自定义按钮）、背景图像和页脚。是否可以使用带有通用元素的故事板设计一个模板场景/视图，并将其用于所有其他场景/视图控制器作为基础？在其他场景中，只需将内容添加到空闲位置（图像、表格……）。

我正在考虑使用硬编码元素的通用自定义 UIViewController 超类，但使用情节提要设计 UI 更容易。

应用程序必须与 iOs 5.0 兼容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:31:46.080

选项包括：

1.  使用自定义容器视图控制器。将您的公共控件放在该控制器上，然后为您的子视图使用视图控制器包含。有关详细信息，请参阅

    *   [WWDC 2011 - 102 - 实现 UIViewController 包含](https://developer.apple.com/videos/wwdc/2011/?id=102)视频

    *   在*UIViewController 类参考中*[实现自定义视图控制器](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)

    **   *UIViewController 编程指南*中的[创建自定义容器视图控制器](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)* 
***   定义一个`UIViewController`以编程方式创建公共图形元素的子类，然后从该子类继承所有其他视图控制器。

    *   使用`UIAppearance`协议定义控件的通用外观。看：

    *   [WWDC 2011 - 114 - 自定义 UIKit 控件的外观](https://developer.apple.com/videos/wwdc/2011/?id=114)**

 **就个人而言，我会`UIAppearance`与其他两种方法之一结合使用。我倾向于自定义容器控制器，但是您失去了执行简单模式和推送 segue 的能力（我定义了一个自定义 segue 类型，用于在子级之间进行 segue），所以我可以理解为什么您可能宁愿使用共享`UIViewController`子类。**

# c++ - 模板。在编译期间不知道类型

> ID：15934988
> 
> 赞同：3
> 
> 时间：2013-04-10T19:43:13.273
> 
> 标签：c++

可能是菜鸟问题。我希望使用 CImg 库对图像进行一些处理。它们中的一些可能是（8 位）和其中一些（16 位）的类型。不幸的是，在用户不选择要处理的文件之前，我不知道数据的类型。当然我可以这样做：

```
...  
CImg <unsigned char> img_unisgned_char;  
CImg <unsigned short> img_unisgned_short;  
...  
if (user_pick_8bit) img_unisgned_char.load_raw(fname,img_size_x,img_size_y);  
if (user_pick_16bit) img_unisgned_short.load_raw(fname,img_size_x,img_size_y);  
... 
```

但是 99% 的 CImg 方法对于“unsigned char”、“int”或“float”类型（例如“load_raw”或“blur”）看起来完全相同。有什么方法可以制作 - 我不知道 - 指针？- 所以当用户选择文件时，我可以制作魔法：

```
if (user_pick_8_bit) img = img_unisgned_char;  
if (user_pick_16bit) img = img_unisgned_short;  
... 
//now no mother of what type is picked up by user I simply make:  
img.load_raw(...); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:55:39.987

如果类模板`CImg<T>`有父类，你当然可以这样做。但是您会发现，您可以在不知道像素类型的情况下执行的一组操作仅限于加载和保存之类的操作。为了对图像内容进行操作，您需要保留具体的图像对象。

```
class CImgBase
{
    // Functions that do not reference the pixel type can go here.
    virtual void load_raw(...) = 0;  // agnostic of pixel type
};

// CImg implements CImgBase interface
template<typename T>
class CImg : public CImgBase
{
    void load_raw(...);
    T get_pixel(int x, int y);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:42:31.213

类模板的许多方法都`CImg`依赖于`T`参数，因此即使将非依赖操作抽象为超类，使用该库的许多代码部分最终也会依赖于该类型。接口的很大一部分似乎使用了`Tfloat`数据类型，因此可能有一种方法可以使 suoerclass 仅具有非依赖方法，这在某种程度上可能是可用的。

也许以下方法可以工作：

```
class SuperCimg  {
 public:
    // expose the non dependent methods as virtual pure
    virtual Tfloat linear_atX( /* ... */ ) = 0;
    // etc.
};

template <typename T>
class DependentCimg : public virtual SuperCimg, public virtual Cimg<T> {
   // expose the needed constructors and methods
   public:
   Tfloat linear_atX( /* ... */) {
        return Cimg<T>::linear_atX( /* ... */ );
    }
}; 
```

但正如您所见，实现很繁琐，因为它需要重新定义所有接口。此外，每个方法最终都会是虚拟的，这会在运行时产生影响（也许这就是实现者没有创建超类的原因）。

处理该问题的另一种可能方法是使您的应用程序的每个算法都在该类型上具有多态性，并将最依赖的部分分割成特定的类，这些类将用作您的算法的模板参数（有点像分配器、比较器和std 库模板的其他可配置部分作为这些模板的参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:12:26.663

感谢“madcoder”和“didierc”。我发现你的两个答案都非常有用。我最终得到这样的结果：

```
#include <CImg.h>
#include <conio.h>
#include <stdio.h>
#include <windows.h>

using namespace cimg_library;

class cimg_base
{
 public:
 virtual int load_bmp(const char *const filename) = 0;
 virtual int save_bmp (const char *const filename) = 0;
 virtual void blur (const float sigma) = 0;
 virtual void sharpen (const float amplitude) = 0;
};

class cimg_unsigned_char : public cimg_base
{
 CImg <unsigned char> img;
 int load_bmp (const char *const filename) { img.load_bmp(filename); return 0;}
 int save_bmp (const char *const filename) { img.save_bmp(filename); return 0;}
 void blur (const float sigma) { img.blur(sigma); }
 void sharpen (const float amplitude) { img.sharpen(amplitude); };
};

class cimg_unsigned_short : public cimg_base
{
 CImg <unsigned short> img;
 int load_bmp (const char *const filename) { img.load_bmp(filename); return 0;}
 int save_bmp (const char *const filename) { img.save_bmp(filename); return 0;}
 void blur (const float sigma) { img.blur(sigma); }
 void sharpen (const float amplitude) { img.sharpen(amplitude); };
};

void main(void)
{
 cimg_base *data;

 LARGE_INTEGER lpFrequency;
 LARGE_INTEGER lpPerformanceCountStart, lpPerformanceCountEnd;
 double Frequency,Start,End;

 // no matter witch line is used - progrm work as expected
 data = new cimg_unsigned_char;
 //data = new cimg_unsigned_short;

 data->load_bmp("test.bmp");
 //measure time with virtual
 QueryPerformanceFrequency(&lpFrequency);
 QueryPerformanceCounter(&lpPerformanceCountStart);

 data->blur(2.2f);
 data->sharpen(2.2f);

 QueryPerformanceCounter(&lpPerformanceCountEnd);
 Frequency = (double)lpFrequency.QuadPart;
 End = (double)lpPerformanceCountEnd.QuadPart;
 Start = (double)lpPerformanceCountStart.QuadPart;
 printf_s("Time (virtual):%lf ms\n",((End - Start) / Frequency)*1000);
 data->save_bmp("output_virt.bmp");

 CImg <unsigned char> img;
 img.load_bmp("test.bmp");

 QueryPerformanceCounter(&lpPerformanceCountStart);

 img.blur(2.2f);
 img.sharpen(2.2f);

 QueryPerformanceCounter(&lpPerformanceCountEnd);
 printf_s("Time (normal):%lf ms\n",((End - Start) / Frequency)*1000);
 img.save_bmp("output_normal.bmp");

 _getch();
} 
```

因为这个程序的输出是：

```
Time (virtual):93.705392 ms
Time (normal):93.705392 ms 
```

我不认为虚函数是我的性能问题（据我所知，'didierc' 如果我会进行大量调用，这将是问题吗？）。这个解决方案是否以某种方式“可以接受”，或者由于某种我现在看不到的原因我不应该这样做？

# php - 在 PHP 中存储图像

> ID：15934989
> 
> 赞同：0
> 
> 时间：2013-04-10T19:43:14.973
> 
> 标签：php, forms, phpmyadmin

我已经在我的数据库中存储了几张图像，现在我正在尝试检索它们。我的脚本的设置方式是一个用户可以选择一些信息和图像来配合它。因此，下面的代码显示了图像如何与价格、汽车和详细信息一起显示。目前图像未显示，我在菱形错误中得到其中一个问号。有任何想法吗？

数据库中的图像存储为 BLOB、MIME 类型的 image/jpeg

```
 form method="post" action="booked.php">
  <table>
  <?php while($row=mysql_fetch_assoc($result)) { ?>
    <tr>
      Images: <img style="width: 130px; height: 100px" alt="<?php echo $row['car']; ?>" src="image/<?php echo $row['img']; ?>" /></td>
      Car: <input type="text" name="car"  value="<?php echo $row['car']; ?>" readonly> 
      Details: <input type="text" name="details" value="<?php echo $row['details']; ?>" readonly>
      Price: <input type="text" name="price" value="<?php echo $row['price']; ?>" readonly>
      <input type="radio" name="selected_car" value="<?php echo $row['car']; ?>" /><br>
      <br /><br /><br />

    </tr>
  <?php } ?>

  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:29.347

如果你真的想在 HTML 中粘贴所有的图像数据，你需要对它进行 base64 编码。在这里查看如何： [显示存储在 mysql blob 中的图像](https://stackoverflow.com/questions/5525830/displaying-an-image-stored-in-a-mysql-blob) 但我强烈建议您像 gview 所说的那样：编写一个单独的 php 脚本来获取图像。它必须看起来像这样：

```
<?php
    header('Content-type: image/jpeg');
    $id = $_GET["id"];
    ... get the image from database by $id and echo it ...
?> 
```

... 甚至更好 - 不要将图像存储为 BLOB。只需将它们存储为文件，并且仅将文件名存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:48:44.810

您是存储文件名还是实际文件？如果它是实际文件，您需要编写一个脚本来从数据库中获取数据并将其作为输出呈现。就像是：

`<?php $img = file_get_contents($row['img']); echo $img;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:48:52.997

要在 html 中显示图像，您需要使用 img 标签。图片数据的src需要是一个url。

您不能只返回数据并期望它显示。人们通常编写一个单独的脚本，它只返回使用 header() 函数设置的 mime 类型的图像数据。

```
<img src="getimage.php?id=<?php echo $row['id'] ?>"> 
```

这假设您实际上将图像数据存储在数据库表的二进制字段中。

# regex - Eliminate lines not matching multiline pattern

> ID：15934992
> 
> 赞同：0
> 
> 时间：2013-04-10T19:43:33.277
> 
> 标签：regex, bash, pattern-matching

I'm searching through a logfile, trying to determine the total time a user was logged on. I've already eliminated all lines not related to logins and logoffs. However, for some reason we have login lines that don't have corresponding logout lines, so I'd like to eliminate them. For instance:

```
2013-04-07 08:44:01 [INFO] User logged in
2013-04-07 08:54:55 [INFO] User logged in
2013-04-07 08:57:12 [INFO] User logged in
2013-04-07 08:59:45 [INFO] User logged in
2013-04-07 09:01:28 [INFO] User logged in
2013-04-07 09:11:00 [INFO] User logged in
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection 
```

And I want just

```
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:48:44.620

this awk one-liner could solve the problem:(at least for your example. the real file I cannot see)

```
awk -F\[ '{a[$2]=$0;}END{for(x in a)print a[x]}' file 
```

test with your data:

```
kent$  echo "2013-04-07 08:44:01 [INFO] User logged in
2013-04-07 08:54:55 [INFO] User logged in
2013-04-07 08:57:12 [INFO] User logged in
2013-04-07 08:59:45 [INFO] User logged in
2013-04-07 09:01:28 [INFO] User logged in
2013-04-07 09:11:00 [INFO] User logged in
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection"|awk -F\[ '{a[$2]=$0;}END{for(x in a)print a[x]}'                                                                           
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection 
```

for same login, only the last one would be printed out.

**EDIT**

I thought your real file may be in this case:

you could have multiple login-lost connection blocks, like:

```
kent$  cat file
2013-04-07 09:11:00 [INFO] User logged in
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection
2013-04-08 09:11:00 [INFO] User logged in
2013-04-08 09:12:56 [INFO] User logged in
2013-04-08 09:15:43 [INFO] User lost connection 
```

then this line works for you:

```
 awk '/lost/{print a;print;next;}{a=$0}' file 
```

output is:

```
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection
2013-04-08 09:12:56 [INFO] User logged in
2013-04-08 09:15:43 [INFO] User lost connection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:53:04.347

Assuming that there will never be multiple `User lost connection` lines in a row, the following should work:

```
sed '/User logged in/{h;d};H;x' file 
```

Or if you are on a system that doesn't support `;` as a command separator:

```
sed -e '/User logged in/{h
d
}' -e 'H' -e 'x' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:54:31.043

I can show an awk solution. If a line contains the "logged in" string save the line. If the line does not contain the "logged in" string print the last stored line and print the present line. Can be a problem if there could be two "lost connection" lines following each other. Awk can be a good choice to filter out the other lines as well.

```
#!/bin/bash

awk '!/logged in/ {print x"\n"$0} {x = $0}' <<EOT
2013-04-07 08:44:01 [INFO] User logged in
2013-04-07 08:54:55 [INFO] User logged in
2013-04-07 08:57:12 [INFO] User logged in
2013-04-07 08:59:45 [INFO] User logged in
2013-04-07 09:01:28 [INFO] User logged in
2013-04-07 09:11:00 [INFO] User logged in
2013-04-07 09:12:56 [INFO] User logged in
2013-04-07 09:15:43 [INFO] User lost connection
EOT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T15:24:49.287

This might work for you (GNU sed):

```
sed -r '$!N;/(User logged in)\n.*\1/D' file 
```

# java - BufferedWriter 类型中的 write(int) 方法不适用于参数 (Long)

> ID：15934994
> 
> 赞同：1
> 
> 时间：2013-04-10T19:43:44.947
> 
> 标签：java, long-integer, bufferedwriter

尝试此操作时出现上述错误

```
for (int i = 0 ; i < uaCount.get(args[1]).occurrences ; i++)
    {
        out.write(uaCount.get(args[1]).singleValues.get(i));
    } 
```

Occurrences 和 singleValues 在这里定义：

```
public static class NumberHolder
{
    public int occurrences = 0;
    public int sumtime_in_milliseconds = 0; 
    public ArrayList<Long> singleValues = new ArrayList<Long>();
} 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:45:28.310

鉴于问题的标题，我*猜*你只是想用来`String.valueOf`创建一个字符串：

```
for (int i = 0 ; i < uaCount.get(args[1]).occurrences ; i++)
{
    out.write(String.valueOf(uaCount.get(args[1]).singleValues.get(i)));
} 
```

请注意，尽管如此，值之间不会有分隔符。我还建议为了便于阅读，您可以编写如下内容：

```
NumberHolder holder = uaCount.get(args[1]);
for (int i = 0; i < holder.occurrences; i++)
{
    long value = holder.singleValues.get(i);
    out.write(String.valueOf(value));
    // Maybe out.write(" ") or something similar, as a separator?
} 
```

此外，我*强烈*建议您不要像您目前所做的那样使用公共字段。尝试更仔细地封装您的类型。如果`occurrences`实际上是列表的大小，您可以使用增强`for`循环来简化事情。例如：

```
for (long value : uaCount.get(args[1]).getSingleValues()) {
    out.write(String.valueOf(value));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:46:55.870

改变：

```
public ArrayList<Long> singleValues = new ArrayList<Long>(); 
```

至

```
public ArrayList<Integer> singleValues = new ArrayList<Integer>(); 
```

将消除错误。当然，您将希望避免在 singleValues 中放置任何 long 或 Long 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:49:00.487

从[java.io.BufferedWriter 的文档中](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)：

> 将文本写入字符输出流，缓冲字符，以便高效写入单个字符、数组和字符串。

Long 不是文本，[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)提出了解决方案，使用[String.valuesOf()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28long%29)将 Long 转换为 String 。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-10T19:46:17.383

将其更改为 `(int)(long)out.write(uaCount.get(args[1]).singleValues.get(i));`. 你必须将 Long 转换为整数

# c# - 动态复选框未通过 C# 在 asp.net 中进行检查

> ID：15934996
> 
> 赞同：0
> 
> 时间：2013-04-10T19:43:54.197
> 
> 标签：c#, asp.net

我正在动态生成复选框，如果两个查询的 o/p 匹配，则最初 2 个查询 r 匹配，然后在这种情况下，特定复选框被选中并禁用......但在我的情况下与查询的匹配 o/p 对应的匹配复选框被禁用，但未被选中

```
protected void Page_Load(object sender, EventArgs e)
{
            DataSet ds = c.readDataSet("select teacher_id, name from teacher");
            DataTable dt = ds.Tables[0];
            foreach (DataRow drow in dt.Rows)
            {
                    chk = new CheckBox();
                    chk.ID = "chk_" + drow[0].ToString();

                    SqlDataReader dr = c.readData("select t.teacher_id from teacher t join coordinator c on t.teacher_id=c.teacher_id where c.branch='" + ddl_class.Text + "' and c.cyear=" + DateTime.Now.ToString("yyyy")+" and c.status=2" );
                    while (dr.Read())
                    {
                        if(dr.GetString(0)==drow[0].ToString())
                        {
                           chk.Checked = true;
                           chk.Enabled = false;
                           count = 1;
                        }
                    }

                    dr.Close();

                    chk.ToolTip = drow[1].ToString();
                    lb = new Label();
                    lb.Text = drow[1].ToString();
                    PnlCtrl.Controls.Add(chk);
                    PnlCtrl.Controls.Add(lb);
                    PnlCtrl.Controls.Add(new LiteralControl("<br/>"));
            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:58:57.310

好的，发生这种情况是因为控件`OnPreRender`在设置`CheckBox`为时会忽略它：`Enabled``false`

```
protected internal override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    bool autoPostBack = this.AutoPostBack;
    if (this.Page != null && base.IsEnabled)
    {
        this.Page.RegisterRequiresPostBack(this);
        if (autoPostBack)
        {
            this.Page.RegisterPostBackScript();
            this.Page.RegisterFocusScript();
            if (this.CausesValidation && this.Page.GetValidators(this.ValidationGroup).Count > 0)
            {
                this.Page.RegisterWebFormsScript();
            }
        }
    }
    if (!this.SaveCheckedViewState(autoPostBack))
    {
        this.ViewState.SetItemDirty("Checked", false);
        if (this.Page != null && base.IsEnabled)
        {
            this.Page.RegisterEnabledControl(this);
        }
    }
} 
```

这真的不是那么令人惊讶。所以，而不是设置`Checked = true`这样做：

```
chk.Attributes.Add("checked", "checked"); 
```