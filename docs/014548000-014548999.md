# StackOverflow 问答 14548000-14548999

# javascript - Button press effect not working in css

> ID：14548004
> 
> 赞同：0
> 
> 时间：2013-01-27T13:47:05.707
> 
> 标签：javascript, css

I want to have this button pressed effect in css. I mean for example lets say I press a button then I want to change its css so that it looks pressed. Here is something that I tried. But it's not working. I used example from a site. But the button's size gets smaller and it looks different. Here is the link for the code [http://jsfiddle.net/goku/GdD34/](http://jsfiddle.net/goku/GdD34/)

```
.pressed{ 
  position:relative;
  top: 3px;
  color: #fqq;
  box-shadow: none;
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
}
input.happy {
    background-image: url(/img/happy.png);
    background-color: transparent;
    background-repeat: no-repeat;
    border: none;
    width: 64px;
    height: 64px;
    margin: 10px;
    cursor: pointer;
    border-radius:8px;
    -moz-border-radius:8px;
    -webkit-border-radius:8px;
    box-shadow: 0px 3px 5px #000;
    -moz-box-shadow: 0px 3px 5px #000;
    -webkit-box-shadow: 0px 3px 5px #000;
}

$('.happy').click(function() {
    alert('hello');
    $('.happy').attr('class','pressed');
});

<input type="button" class="happy"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:57:26.843

我建议您将 CSS、the 和 JS 的顺序更改为：

```
<style>
input.happy {
    background-image: url(/img/happy.png);
    background-color: transparent;
    background-repeat: no-repeat;
    border: none;
    width: 64px;
    height: 64px;
    margin: 10px;
    cursor: pointer;
    border-radius:8px;
    -moz-border-radius:8px;
    -webkit-border-radius:8px;
    box-shadow: 0px 3px 5px #000;
    -moz-box-shadow: 0px 3px 5px #000;
    -webkit-box-shadow: 0px 3px 5px #000;
}
input.happy.pressed{ 
  position:relative;
  top: 3px;
  color: #fqq;
  box-shadow: none;
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
}
</style>
<script>
$(function(){
    $(".happy").click(function(){
        $(this).addClass("pressed");
    });
});
</script>
<input type="button" class="happy"> 
```

请注意，“$(function(){”位表示“在页面加载后执行此操作”。“addClass”会将类添加到元素的类列表中，但必须在 DOM 加载后分配事件。

此外，您必须在 click 函数中使用 '$(this)' 而不是 '$(".happy")' 以仅将样式应用于单击的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:01:28.500

您的代码中有一些内容（小提琴）：

*   我猜你想使用一个 javascript 框架（比如 jQuery），你没有在小提琴中选择一个。
*   你在小提琴中有一个错字，在它说的函数内部，`$('happy')`所以不会找到任何元素。
*   您删除 javascript 中的“快乐”类并将其替换为按下。也许您想同时应用两者`$('.happy').attr('class', 'happy pressed');`但是然后更改`.pressed`为`input.pressed`并移至下方`.happy`
*   也许您不希望**所有**`$(this).attr(...)`按钮都更改，请在函数内部使用 use

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:52:19.550

刚刚使用了 :active 伪类。

```
input.happy:active { /* Your style */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:53:17.153

你有一些语法错误。

最好的事件不是`.click()`，它的`.mousedown()`；

**当您单击按钮而不释放时：**

```
$('.happy').mousedown(function() {
        $('.happy').attr('class','pressed');
    }); 
```

我相信现在它正在工作：http: [//jsfiddle.net/HKZ7M/](http://jsfiddle.net/HKZ7M/)

然后，当您释放鼠标时，将其归还旧类。

**当您单击按钮然后释放它**

```
 $('.happy').mousedown(function() {
        $('.happy').attr('class','pressed');

        $('.pressed').mouseup(function() {
            $('.pressed').attr('class','happy');
        });
    }); 
```

它正在工作：http: [//jsfiddle.net/Xx2Gn/](http://jsfiddle.net/Xx2Gn/)

**重要提示：**按钮`.pressed`比`.happy`按钮小，当您释放鼠标时，您必须确保指针将在新`.pressed`按钮上方，这就是为什么[您必须将它们设置为相同大小](http://jsfiddle.net/VyDXf/)的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T13:53:28.043

发生这种情况是因为您要替换班级而不是添加新班级。你应该使用：

```
$('.happy').addClass('pressed'); 
```

代替 ：

```
$('.happy').attr('class','pressed'); 
```

因为当你这样做时，你会删除之前应用到它的所有 CSS。您的另一个选项是将宽度/高度或任何其他 css 添加到`pressed`类中。

# javascript - Angularjs：在 tr 标签上的 ng-repeat 和 ng-switch

> ID：14548010
> 
> 赞同：9
> 
> 时间：2013-01-27T13:47:36.173
> 
> 标签：javascript, angularjs, html-table, ng-switch

我正在尝试使用 AngularJS 创建一个事件列表表。但是每个事件都有一个类型，不同类型的事件内容截然不同，有些类型还会生成不止一行。

在一个完美的世界里，我会这样做：

```
<tbody>
  <ng-repeat="event in events">
    <ng-switch on="event.type">
      <ng-switch-when="type1">
        <tr>
          ...
        </tr>
        <tr>
          ...
        </tr>
      </ng-switch-when>
      <ng-switch-when="type2">
        <tr>
          ...
        </tr>
      </ng-switch-when>
      ...
    </ng-switch>
  </ng-repeat>
</tbody> 
```

但这不起作用，因为大多数浏览器会丢弃或重新定位 ng 标签以强制 tbody 仅包含 trs。

我看到的相关问题的唯一解决方案（[如何在没有 html 元素的情况下使用 ng-repeat](https://stackoverflow.com/questions/11490968/how-to-use-ng-repeat-without-an-html-element)）是拥有多个 tbody 元素；我不想那样做，但即使我这样做，给 tbody ng-repeat 和 ng-switch 属性，我仍然有一个问题，我不能在单个 ng-switch-when 中包装多个 tr .

有没有办法在 AngularJS 中做到这一点，或者这是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:45:14.033

我遇到了这个问题，最好的建议是不要使用表：

只需使用 * 数量的子 div 类做一个父 div id，就像它们是 tr's 和 td's ...

我没有在角度源中检查过这个，但我假设表格元素没有以某种方式交织在一起，谁知道..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:45:44.660

也许最好的选择是根据您的 type1/type2 生成适当标记的指令？

你也可以用 ng-hide/ng-show 来做，虽然这会产生额外的不必要的标记

# c# - 如何在 WPF XAML 中将自定义类型更改为系统类型（字符串）？

> ID：14548012
> 
> 赞同：1
> 
> 时间：2013-01-27T13:47:54.393
> 
> 标签：c#, wpf, xaml, data-binding

> **可能重复：**
> [如何在 WPF XAML 中使用嵌套类？](https://stackoverflow.com/questions/14546347/how-to-use-nested-class-in-wpf-xaml)

我正在重构示例中的代码：

*   [24.129.21。](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)[C# / CSharp Tutorial](http://www.java2s.com/Tutorial/CSharp/CatalogCSharp.htm) » Windows Presentation Foundation » Binding
    中的[Master Detail Binding)](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)

并且[在排除 Skills 类之后](https://stackoverflow.com/a/14536818/200449)
， 在**MainWindow.xaml**中进行了相应的更改

 **```
<local:Team>
  <local:Employee Name="Larry" Age="21">
    <local:Employee.Skills>
      <!--  local:Skills -->
       <local:Skills> 
```

我在**MainWindow1.xaml.cs**：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
namespace WpfApplication
{
  public class Skill
  {//I'd like to remove class Skill having moved property string Description into class Employee 
    public string Description { get; set; }
  }

   public class Employee 
   {
    public string Name { get  ; set; }
    public int Age  { get; set; }
//I'd like to change in the next line Skill --> String               
    public List<Skill> Skills { get; set; }
    //public List<String> Skills { get; set; }

     public Employee()
     {
//I'd like to change in the next line Skill --> String       
       Skills=new List<Skill>();
       //Skills=new List<string>();
     }
  }

  public class Team : ObservableCollection<Employee> { }

  public class Company
  {
    public string CompanyName { get  ; set; }
    public Team Members { get  ; set; }
  }

  public class Companies : ObservableCollection<Company> { }

  public partial class Window1 : Window
    {
      public Window1()
    {
        InitializeComponent();
    }
  }
} 
```

如果要更改，我应该如何更改 Window1.XAML：

*   `List<Skill>`到`List<String>`

在 Window1.xaml.cs 中？

基于相同代码的相关问题：

*   [如何在 WPF XAML 中使用嵌套类？](https://stackoverflow.com/questions/14546347/how-to-use-nested-class-in-wpf-xaml)
*   [是否可以在 WPF XAML 中使用匿名类型？](https://stackoverflow.com/questions/14539860/is-it-possible-to-use-anonymous-types-in-wpf-xaml)

更新：
只是要注意我尝试过的错误：

*   "A" 而不是 A（不带引号）；
*   它应该是`String`（但不是`string`）在 XAML 中（而在 C# 中是`string`or `String`）
*   根据现有代码，尝试将 A 作为属性放置在一个标记中，`<sys:String />` 而不是： `<sys:String>A</sys:String>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:08:46.993

您的 Employee 课程采用了您希望它成为的新方法 -

```
public class Employee
{
    public string Name { get; set; }
    public int Age { get; set; }
    public List<String> Skills { get; set; }

    public Employee()
    {
        Skills=new List<string>();
    }
} 
```

您可以像这样在 xaml 文件中创建实例 -

```
 <local:Team x:Key="teams">
            <local:Employee Name="Larry" Age="21">
                <local:Employee.Skills>
                    <sys:String>A</sys:String>
                    <sys:String>B</sys:String>
                    <sys:String>C</sys:String>
                </local:Employee.Skills>
            </local:Employee>
        </local:Team> 
```

您需要在 xaml 中定义`sys`命名空间以在 xaml 中声明字符串的实例 -

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

我测试了上面的代码`ListBox`及其工作 -

```
<ListBox ItemsSource="{Binding Skills, Source={StaticResource teams}}"/> 
```**

# php - Email confirmation link specific to Email provider

> ID：14548018
> 
> 赞同：0
> 
> 时间：2013-01-27T13:48:43.257
> 
> 标签：php, email

I'm making a new site, and already have email confirmation code in place. But is there a way of making a "go to your inbox" link that is specific to the users' email provider? For example:

*   Go to live.com if it's a @live.com email
*   Go to yahoo.com if it's a @yahoo.com email

Some sort of if statement I'm guessing? Just some ideas would be good!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:04:23.003

```
$email = $_POST['email'];
$ext = array('live.com','yahoo.com');

$domain = explode('@', $email);

if ( $domain[1] == $ext[0])
{
    // Go to Live.com
} 
if( $domain[1] == $ext[1])
{
   //Go to Yahoo.com
} 
```

电子邮件是注册表/订阅表单中的字段名称

# php - 如何使用php连接到sql server

> ID：14548019
> 
> 赞同：0
> 
> 时间：2013-01-27T13:48:44.677
> 
> 标签：php, sql-server

我是 sql server 的新手。我有使用 MySQL 的应用程序，现在我想在该应用程序中使用 sql server 而不是 MySQL。我的PHP是：

```
<?php
$myServer = "localhost";
$myUser = "";
$myPass = "";
$myDB = "UNIVERSITY"; 

//connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
 or die("Couldn't connect to SQL Server on $myServer"); 

//select a database to work with
$selected = mssql_select_db($myDB, $dbhandle)
 or die("Couldn't open database $myDB"); 

//declare the SQL statement that will query the database
$query = "SELECT clgname";
$query .= "FROM dbo.clg ";

//execute the SQL query and return records
$result = mssql_query($query);

$numRows = mssql_num_rows($result);
if($numRows==0){
echo "false";
}
else{
echo "true";
}

//close the connection
mssql_close($dbhandle);
?> 
```

我还删除了之前的分号

```
extension=php_mssql.dll 
```

但我看到错误：

```
Fatal error: Call to undefined function mssql_connect() in C:\xampp\htdocs\1.php on line 8 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:58:01.303

您的 PHP 不使用 mssql 扩展编译，如果他们支持，请询问托管服务提供商启用它，如果您有自己的服务器，只需使用 mssql 扩展编译 PHP --with-mssql=DIR 其中 DIR 是 FreeTDS 安装前缀。FreeTDS 应该使用 --enable-msdblib 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:58:25.080

您可以使用 PDO 来完成这项工作。我将它与 MSSQL 一起使用并且效果很好。例子：

```
try {
    $mssql = new PDO('mssql:host=localhost;dbname=UNIVERSITY', 'username', 'passwd');
    $sth = $mssql->prepare("SELECT * FROM STUDENTS");
    $sth->execute();
    $students_list = array();
    $students_list = $sth->fetchAll();
    $mssql = null;
} catch (PDOException $e) {
    $students_list = null;
} 
```

编辑： si-le 是对的，您还必须安装 mssql 模块并将该行添加到 php.ini 以使其正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:04:06.253

看起来 mssql 扩展没有正确启用...

如果您在本地运行 WAMP，那么您可能需要完成一些额外的步骤。

我找到了一个关于这个的博客，并在这里制作了自己的博客；

[http://pjgcreations.blogspot.co.uk/2013/01/enabling-ms-sql-extensions-in-wamp.html](http://pjgcreations.blogspot.co.uk/2013/01/enabling-ms-sql-extensions-in-wamp.html)

基本思想是；

1.  下载ntwdblib.dll： [http ://www.pjgcreations.co.uk/BlogAttachments/ntwdblib.DLL](http://www.pjgcreations.co.uk/BlogAttachments/ntwdblib.DLL)
2.  单击 WAMP 图标 -> PHP -> PHP Extensions，然后检查“php_mssql”和“php_pdo_mssql”。（Wamp 将重新启动并给你一些错误，忽略它们）
3.  再次重新启动 WAMP 以确保保存设置。
4.  最后，将 ntwdblib 文件放在以下两个目录中：“wamp\bin\php\php5.3.1”（或与您正在使用的版本相关的 PHP 目录）和“wamp\bin\apache\apache2.2.11\bin”（或与您正在使用的版本相关的 Apache 目录）
5.  重启 wampserver，你就完成了！

希望这可以帮助！

# python - 使用 BeautifulSoup 将 html 文档分割成片段解析 html 注释

> ID：14548020
> 
> 赞同：1
> 
> 时间：2013-01-27T13:48:45.543
> 
> 标签：python, html-parsing, beautifulsoup

[这是一个很小的问题，在前面的问题中](https://stackoverflow.com/a/12774067/982901%20in%20a%20previous%20thread)几乎已经解决了。

问题是现在我有很多评论，但这并不完全符合我的需要。我得到了一系列评论内容。我需要在两者之间获取 html。

说我有类似的东西：

```
<p>some html here<p>
<!-- begin mark -->
<p>Html i'm interested at.</p>
<p>More html i want to pull out of the document.</p>
<!-- end mark -->
<!-- begin mark -->
<p>This will be pulled later, but we will come to it when I get to pull the previous section.</p>
<!-- end mark --> 
```

在回复中，他们指出了[关于导航 html 树的糟糕解释](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Searching%20the%20Parse%20Tree)，但我没有找到并回答我的问题。

有任何想法吗？谢谢。

PS。如果有人指出我一种优雅的方式在文档中重复该过程几次，那么额外的荣誉，因为我可能会让它工作，但很糟糕：D

编辑添加：

根据 Martijn Pieters 提供的信息，我必须将`comments`使用上述代码获得的数组传递给他设计的生成器函数。所以这没有错误：

```
for elem in comments:
    htmlcode = allnext(comments)
    print htmlcode 
```

我认为现在可以在遍历数组之前操作 htmlcode 内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:53:43.340

您可以使用`.next_sibling`指针来获取下一个元素。您可以使用它来查找评论后的所有*内容*，最多但不包括另一条评论：

```
from bs4 import Comment

def allnext(comment):
    curr = comment
    while True:
        curr = curr.next_sibling
        if isinstance(curr, Comment):
            return
        yield curr 
```

这是一个生成器函数，您可以使用它来迭代所有“下一个”元素：

```
for elem in allnext(comment):
    print elem 
```

或者您可以使用它来创建所有下一个元素的列表：

```
elems = list(allnext(comment)) 
```

您的示例对于 BeautifulSoup 来说有点太小了，它会将每个评论包装在一个`<p>`标签中，但是如果我们使用您原始目标中的一个片段，`www.gamespot.com`它就可以了：

```
<div class="ad_wrap ad_wrap_dart"><div style="text-align:center;"><img alt="Advertisement" src="http://ads.com.com/Ads/common/advertisement.gif" style="display:block;height:10px;width:120px;margin:0 auto;"/></div>
<!-- start of gamespot gpt ad tag -->
<div id="div-gpt-ad-1359295192-lb-top">
<script type="text/javascript">
        googletag.display('div-gpt-ad-1359295192-lb-top');
    </script>
<noscript>
<a href="http://pubads.g.doubleclick.net/gampad/jump?iu=/6975/row/gamespot.com/home&amp;sz=728x90|970x66|970x150|970x250|960x150&amp;t=pos%3Dtop%26platform%3Ddesktop%26&amp;c=1359295192">
<img src="http://pubads.g.doubleclick.net/gampad/ad?iu=/6975/row/gamespot.com/home&amp;sz=728x90|970x66|970x150|970x250|960x150&amp;t=pos%3Dtop%26platform%3Ddesktop%26&amp;c=1359295192"/>
</a>
</noscript>
</div>
<!-- end of gamespot gpt tag -->
</div> 
```

如果`comment`是对该片段中第一条评论的引用，`allnext()`生成器会给我：

```
>>> list(allnext(comment))
[u'\n', <div id="div-gpt-ad-1359295192-lb-top">
<script type="text/javascript">
        googletag.display('div-gpt-ad-1359295192-lb-top');
    </script>
<noscript>
<a href="http://pubads.g.doubleclick.net/gampad/jump?iu=/6975/row/gamespot.com/home&amp;sz=728x90|970x66|970x150|970x250|960x150&amp;t=pos%3Dtop%26platform%3Ddesktop%26&amp;c=1359295192">
<img src="http://pubads.g.doubleclick.net/gampad/ad?iu=/6975/row/gamespot.com/home&amp;sz=728x90|970x66|970x150|970x250|960x150&amp;t=pos%3Dtop%26platform%3Ddesktop%26&amp;c=1359295192"/>
</a>
</noscript>
</div>, u'\n'] 
```

# javascript - ie9及以下使用History.js时页面刷新返回首页

> ID：14548022
> 
> 赞同：6
> 
> 时间：2013-01-27T13:49:02.613
> 
> 标签：javascript, history.js

我已经建立了一个站点，它使用 History.js 插件通过 AJAX 从一个页面导航到另一个页面，并相应地更新 URL。除 IE 外，一切正常；当您刷新页面时，它实际上是从您来到的第一页加载内容，而不是当前页面内容。在“体面”的浏览器中，它不会从任何页面加载内容，它只会加载该 URL 的整个页面，这是我 IE 应该做的。

我认为它不明白如何处理哈希。如果您访问[http://www.crownacre.voyced.com/contact-us/](http://www.crownacre.voyced.com/contact-us/)它可以正常工作，但是当您访问[http://www.crownacre.voyced.com/#contact-us/](http://www.crownacre.voyced.com/#contact-us/)（带有哈希）时没有。

如果页面在路径名中检测到 # ，我尝试重定向该页面，但无法检测到这一点，因为 window.location.pathname 和 History.getHash() 返回没有任何哈希的路径。

有什么建议么？我见过一些使用这个插件的网站有同样的问题，在这里也有类似的问题，但没有解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:06:16.060

我在重写 tarheelreader.org 时遇到了同样的问题。我正在使用 History.js，它工作正常，除了 IE8 中的刷新问题。这个黑客对我有用。

在仅在初始页面加载时运行的启动代码中，我执行以下操作：

```
var url = window.location.href;
if (url.indexOf('#') > -1) {
    // ie refresh hack
    controller.stateChange();
} 
```

`controller.stateChange()`我用于所有历史记录更改的状态更改处理程序在哪里。

```
function stateChange() {
    // handle changes in the URL
    var hist = History.getState(),
        url = hist.url,
        context = hist.data;
    renderUrl(url, context).then(function(title) {
        document.title = title;
    });
} 
```

您可以在[https://github.com/gbishop/TarHeelReaderTheme查看 main.js 和 controller.js 中的所有代码](https://github.com/gbishop/TarHeelReaderTheme)

**编辑** 进一步探索导致 History.js 使用初始 URL 而不是根的情况。这个黑客似乎可以处理这种情况。

```
function stateChange() {
    // handle changes in the URL
    var hist = History.getState(),
        url = hist.url,
        bar = window.location.href,
        context = hist.data;
    //console.log("State changed...", url, context);
    if (url != bar && bar.indexOf('#') > -1) {
        //console.log('bar = ', bar);
        // I think we only get here in IE8
        // hack for hash mode urls
        var root = History.getRootUrl(),
            hashIndex = bar.indexOf('#');
        if (root != bar.slice(0, hashIndex)) {
            // try to fix the url
            url = root + bar.slice(hashIndex);
            //console.log('new url =', url);
            window.location.href = url;
        }
    }
    renderUrl(url, context).then(function(title) {
        document.title = title;
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:02:15.080

这对我有用：

```
<script>
    var url = new String(document.location);
    if (url.indexOf("#") > -1) {
        alert("There is a Hash in the path");
    }
</script> 
```

**编辑：**

```
function LocationTest()
{
    var loc = window.location;
    alert(loc.href);
    alert(loc.protocol + "//" + loc.host + loc.pathname + loc.search + loc.hash);
    alert(loc.href == loc.protocol + "//" + loc.host + loc.pathname + loc.search + loc.hash);
} 
```

示例来源：[window.location 解释](http://tundrablue.com/development/JavaScript/WindowLocation.html?SearchParameter=true#HashID)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:59:09.880

也许是一个解决方案：你能试试我的 fork 的 History.js 非官方版本 1.8a2，来自： [https ://github.com/andreasbernhard/history.js](https://github.com/andreasbernhard/history.js)

...并提供反馈？非常感谢你！

# c++ - 独立应用程序中的异常安全

> ID：14548024
> 
> 赞同：0
> 
> 时间：2013-01-27T13:49:18.860
> 
> 标签：c++, exception

在一个独立的应用程序（而不是库）中，我被引导相信，就异常安全而言，目标应该是“始终提供[基本保证](http://www.gotw.ca/gotw/059.htm)”。

这听起来合理吗？我们是否应该只担心在它们有助于实现该目标的情况下提供强大的和无保障的保证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:04:53.737

您的目标是尽可能提供最强大的异常安全性，并且只有在必须时才降低它，或者如果不降低它会很昂贵。

您可以提供的最佳异常安全性是 nothrow，但这显然在任何时候都难以避免。有些地方你的代码*应该*抛出，否则你只是在避免一般的异常。

接下来，您应该争取强有力的保证，但实施起来可能会很昂贵。它通常需要制作过多的临时副本，以确保在您的函数运行期间不会影响可观察的状态。

至少，您应该提供基本保证。确保这通常并不昂贵，因为您只是确保没有泄漏。智能指针类型可以帮助您。这并不意味着基本保证不好，但如果你能做得更好，你应该这样做。

也许目标最好写成“*至少*提供基本保证，但争取获得最好的保证”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:26:31.990

我认为这个问题最好由编写应用程序的人来回答。我有代码调用 exit() 来表示失败，这违反了很多准则，但我认为我可以在这种特殊情况下证明该决定是合理的（一次性应用程序，如编译器）。实际上，它甚至不会清理资源，而是将其留给操作系统。另一方面，如果独立应用程序是一个长期存在的服务器应用程序，则基本保证还不够。此外，对于库代码，您通常没有必要的知识来确定它的使用位置，因此您必须小心。

总而言之，我想说您应该尝试提供强/无保证作为指导方针，但您可以做出（希望消息灵通的）决定以在特定情况下降低这些要求。

# socket.io - socket.io - 如何向所有打开的套接字广播消息

> ID：14548025
> 
> 赞同：4
> 
> 时间：2013-01-27T13:49:19.870
> 
> 标签：socket.io

由于非套接字相关事件（例如超时），我想向所有打开的套接字广播一条消息。我该怎么做呢？我应该保留所有打开的套接字的数组并一个一个地向它们发送消息吗？有没有更好的办法？

注意：socket.io 指南中的广播示例发送广播消息以响应套接字连接，因此它具有套接字句柄。即使那样它说

> 广播意味着向除了启动它的套接字之外的其他所有人发送消息。

**编辑** 澄清我的问题 - 我想向所有打开的套接字“发送消息”。这个动作不是由任何套接字触发的，所以没有“这个套接字”。例如，服务器上的某些业务逻辑决定现在执行订单。此信息需要发送到所有打开的套接字。最好的方法是什么？（这不是 socket.io 定义的“广播”。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:26:00.203

所以基本上你需要让所有连接的客户端到你的套接字

```
var clients = io.sockets.clients(); // This returns an array with all connected clients

for ( i = 0; i < clients.length; i++ ) {
    clients[i].emit('event', { data: 'message' });
} 
```

这将发送给所有连接的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:21:22.753

```
socket.broadcast.emit('event name', { data : 'your data' }); 
```

它将广播到所有打开的套接字，除了这个套接字。

# php - foreach 内部 for 循环复杂化

> ID：14548030
> 
> 赞同：1
> 
> 时间：2013-01-27T13:49:50.293
> 
> 标签：php, loops, for-loop, foreach, nested

我在另一个循环中遇到问题。我不知道如何处理这种情况，也没有得到预期的结果 -**我得到了预期的结果，但成倍增加**。

这是我的代码：

```
<div id="view">
    <?php 
    for ($i = 0; $i < sizeof($user_roll_array); $i++): 
        $roll_data =& $user_roll_array[$i];

        $roll_date = $roll_data['time'];
        $roll_ids  = $roll_data['image_ids'];
        $roll_ids  = explode('|', $roll_ids);
        $roll_key  = $roll_data['key'];

        foreach ($roll_ids as $image_id):
            $image_name = $image->get_name($image_id);

    ?>
    <div class="roll-spot">
        <?php echo $image_name; ?>
    </div>
    <?php endforeach; endfor; ?>
</div> 
```

这是`$user_roll_array`包含的内容：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [user_id] => 1
            [image_ids] => 10|9
            [time] => 1359244752
            [key] => 8O0F5k8G9Y1H4b7
        )

    [1] => Array
        (
            [id] => 2
            [user_id] => 1
            [image_ids] => 13|12|11|10|9
            [time] => 1359245133
            [key] => n9G7v49E2Q5h0j7
        )

    [2] => Array
        (
            [id] => 3
            [user_id] => 1
            [image_ids] => 13|12
            [time] => 1359285360
            [key] => 2Q0t1Z3S2r7n5f9
        )

    [3] => Array
        (
            [id] => 4
            [user_id] => 1
            [image_ids] => 10|9
            [time] => 1359285377
            [key] => 4L6w6R2r2Q0c1g9
        )

    [4] => Array
        (
            [id] => 7
            [user_id] => 1
            [image_ids] => 10|9
            [time] => 1359288800
            [key] => 4t1X9P8l9H7C1F6
        )

) 
```

根据我在***for*****循环中****创建的数组***，我需要遍历每个元素并通过方法 ( `$image->get_name($id)`) 获取其名称。然后我需要在下面使用这些名称。*

 ***我希望返回 5 行**，但我得到*13*行，并且名称重复了几次。

如果有人可以解释如何解决这个问题，我会理解这个问题并防止将来发生类似的问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:44:06.723

您获得 13 个结果的原因是因为虽然有 5 个顶级迭代，但您正在循环遍历 13 个子迭代（ID）。

如果您只想进行 5 次迭代，则不应在其中进行子循环。这是您的代码中让您感到困惑的部分：

```
<? foreach ($roll_ids as $image_id): ?>

   <? $image_name = $image->get_name($image_id); ?>
   <div class="roll-spot">
       <?php echo $image_name; ?>
   </div>

<?php endforeach;?> 
```

这个 foreach*本身就在主循环*中，并为每个 ID 可以访问的 div 回显。在主数组的生命周期中，这种情况会发生 13 次。您看到重复的原因是因为您有顶级数组元素，其中包含与其他元素相同的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:56:05.260

删除＆符号

```
$roll_data =& $user_roll_array[$i]; 
```*

# perl - 如何将从 perl 脚本中检索到的用户名作为参数传递给另一个 exe 文件？

> ID：14548031
> 
> 赞同：0
> 
> 时间：2013-01-27T13:50:05.627
> 
> 标签：perl

如何将变量作为参数传递`user_name`给exe文件？`file.exe`另外，告诉我是否真的会使用`getusername`命令从记帐开始数据包中获取用户名。

```
#!/usr/bin/perl
use warnings;
use strict;
my $user_name;

print "Hello radiator is executing the exe file...\n";

my $user_name = $p->getUserName;
open my $EX1_PIPE, '|-', 'file.exe'
        or die $!;

print $EX1_PIPE "$_\n"   # i dont know what this line is for
       for qw/username password/;  #  i dont know what this line is for

close $EX1_PIPE or die $!; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:56:10.997

`open`正在运行命令，因此您只需要使用所需的参数调用命令：

```
open my $EX1_PIPE, '|-', "file.exe $user_name" or die "file.exe $!\n"; 
```

另一方面，鉴于您的评论，您似乎想将用户名作为输入传递给脚本。如果是这种情况，也许您正在寻找：

```
print $EX1_PIPE "$_\n" for ($user_name $password); 
```

（您需要定义一个名为 的变量`$password`）

# java - 如何从似乎无法修复的分号中修复此错误？

> ID：14548034
> 
> 赞同：1
> 
> 时间：2013-01-27T13:50:08.267
> 
> 标签：java, plugins, minecraft

这是我的所有代码：

```
@Override
public void onEnable()
{
    getLogger().info("Plugin Enabled!");

    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args)
    {
        if(cmd.getName().equalsIgnoreCase("Plugin"))
        { 
            // If the player typed /plugin then do the following...
            if (sender instanceof Player) 
            {
                Player player = (Player) sender;

                // Gives player item
                return true;
            } 
            else 
            {
                sender.sendMessage("You must be a player!");
                return false;
            }
        }   
    }

    @Override
    public void onDisable() 
    {
        getLogger().info("Plugin Disabled!");
    }
} 
```

如果您不知道，这是 Minecraft Bukkit 的插件。

这是错误行：

```
getLogger().info("Plugin Enabled!"); 
```

当我删除分号时，“”中的消息是一个错误，当我插入一个“}”或/和一个“{”时，它会显示一个错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:51:33.050

您`onCommand`在另一个方法 ( ) 中有一个方法 ( `onEnable`) - 这是不可能的。

我想您`}`之前缺少一个右括号`public boolean onCommand`。

```
public void onEnable() {
    getLogger().info("Plugin Enabled!");
} //HERE ADD THE MISSING BRACE

public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {
    if (cmd.getName().equalsIgnoreCase("Plugin")) { // If the player typed /plugin then do the following...
        if (sender instanceof Player) {
            Player player = (Player) sender;

            // Gives player item
            return true;
        } else {
            sender.sendMessage("You must be a player!");
            return false;
        }
    } else {
        return false; //HERE YOU NEED TO RETURN FROM THE ELSE TOO
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:55:01.903

问题是您有 3 种方法：`onEnable()`，但是`onCommand()`最后`onDisable()`两种方法是定义的`onEnable()`，您不能在其中执行。如果您在`getLogger()...`通话后添加“}”，您将在那里结束`onEnable()`通话，那么您还需要删除您在向我们展示的块末尾获得的尾随“}”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:03:28.777

```
public void onEnable(){
    getLogger().info("Plugin Enabled!");
}// Add braces

    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){
        if(cmd.getName().equalsIgnoreCase("Plugin")){ // If the player typed /plugin then do the following...
            if (sender instanceof Player) {
                   Player player = (Player) sender;

                   // Gives player item
                   return true;
                } else {
                   sender.sendMessage("You must be a player!");
                   return false;
                }
        } 

    }

@Override
public void onDisable() {
    getLogger().info("Plugin Disabled!");
}
// } Delete this braces 
```

# ajax - FadeOut 效果不调用 AJAX 功能代码

> ID：14548036
> 
> 赞同：1
> 
> 时间：2013-01-27T13:50:32.453
> 
> 标签：ajax, jquery

我正在学习一些基本的 JQuery，它将 Ajax 查询的数据从文本文件附加到 div 元素中。当添加 AJAX 代码和从 fadeOut 效果调用函数时，程序不起作用。否则，fadeOut 工作正常。

我应该在另一个文件中编码 AJAX 并链接它吗？这段代码有什么问题？抱歉，如果问题的标题不准确。

**HTML**

```
<html>    
    <head>
        <title>Help Me</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script src="test.js" type="text/javascript"></script>
    </head>

    <body>
        <div align="center" id = "div1" >
            <img src="pic1" width="200" height="200" alt="" id = "pic1" />
            <img src="pic2" width="200" height="200" alt="" id = "pic2" />
            <img src="pic3" width="200" height="200" alt="" id = "pic3" />
        </div>
        <div id = 'myDiv'></div>
    </body>
</html> 
```

**脚本**

```
$(document).ready(function() {
    $("#pic1").click(function() {
        $("#div1").fadeOut("slow", myFunction());
        $("#myDiv").fadeIn("slow");
    });

    $("#pic2").click(function() {
        $("#div1").fadeOut("slow");
    });

    $("#pic3").click(function() {
        $("#div1").fadeOut("slow");             
    }); 
});

var xmlhttp;
function loadXMLDoc(url, cfunc) {   
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = cfunc;
    xmlhttp.open("GET",url,true);
    xmlhttp.send();
}

function myFunction() {
    loadXMLDoc("testfile.txt", function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:53:14.260

您需要将引用传递`myFunction`给回调。您当前的方法是在页面加载时调用您的函数。试试这个：

```
$("#pic1").click(function() {
    $("#div1").fadeOut("slow", getData); // note: no () brackets
});

function getData() {
    $.get("testfile.txt", function(data) {
        $("#myDiv").html(data).fadeIn("slow");
    });
} 
```

# php - 使用 Ajax 提交表单

> ID：14548042
> 
> 赞同：5
> 
> 时间：2013-01-27T13:51:06.000
> 
> 标签：php, jquery, jquery-validate

我有一个 div，里面有一个表单，并设置为使用 ajax 发布并像这样在 div 中返回结果

```
$(document).ready(function(){
    $("#guestList").validate({
        debug: false,
        submitHandler: function(form) {
            // do other stuff for a valid form
            //$('form').attr('id', 'guestList1')
            $.post('brides_Includes/guestlistDisplay1.php', $("#guestList").serialize(), function(data) {
                $('#results').html(data)
                $("form#guestList")[0].reset();
            });
        }
    });
}); 
```

当结果返回时，它会显示正确的更改并替换表单。但是，当我再次发布表格时。相关更改按原样进行，但随后也会刷新页面并在地址栏中显示发布的信息

我如何发布表单并替换它以允许它再次发布和调用脚本而不会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:03:29.537

使用 ajax 返回表单的问题是页面上已有的任何 JavaScrip 代码都不会看到/利用新表单。解决此问题的最佳方法是使用 ajax 将 JavaScrip 和 HTML 传回。

基本上，每次你传回一个新表单时，你都会传回下面的代码。您需要更新`ID`s 和链接 (brides_Includes/guestlistDisplay1.php)。您还需要用此代码替换主页上的代码，因为这是执行任何传回的 JavaScrip 所必需的。

```
<script type="text/javascript">
$(document).ready(function(){
  $("#guestList").validate({
    debug: false,
    submitHandler: function(form) {
      // do other stuff for a valid form
      //$('form').attr('id', 'guestList1')
      $.post('brides_Includes/guestlistDisplay1.php', $("#guestList").serialize(), function(data) {
        $('#results').html(data);

        //This executes the JavaScript passed back by the ajax.
        $("#results").find("script").each(function(i) {
          eval($(this).text());
        });

        $("form#guestList")[0].reset();
      });
    }
  });
});
</script> 
```

# ms-access-2007 - 访问中按组划分的最高百分比

> ID：14548048
> 
> 赞同：1
> 
> 时间：2013-01-27T13:51:40.133
> 
> 标签：ms-access-2007, frontend

我想先说我使用访问的前端而不是 sql。

我有一组数据，我正在尝试为其制作记分卡。我有`Region, Store, SKU, SKU Count`。我需要在其区域 15% 以内的 SKU 打 6 分，50-85% 的 SKU 打 3 分，低于 50% 的区域打 0 分。

这是我的数据....我无法弄清楚如何做到这一点...我是否缺少一条数据来做到这一点？

```
R   Store   SKU SKU Cnt
24  4969    14260   -942
24  7660    14162   -54
24  78  12486   -174
24  4881    14160   -376
24  78  14161   -162
24  4905    14161   -1179
24  4901    14162   -114
24  4941    14160   -312
24  4815    17912   544
24  4926    18974   112
24  4845    14160   -160
24  4828    14162   -142
28  3004    14261   -3064
28  4813    70339   -229
28  4941    14161   -382
28  4905    12486   -161
28  4907    17912   -1150
28  4907    12486   152
28  4884    14160   -62
28  7217    14261   420
28  4845    14161   -1123
28  4853    20692   -50
28  4899    20692   40
28  4872    14261   -225
32  78  17470   993
32  4956    13978   -374
32  4948    70330   -2454
32  4815    14162   167
32  4972    14161   -242
32  4372    14261   -3613
32  5413    20692   50
32  7155    64673   60
32  78  17471   484
32  4870    20713   47
32  4926    17472   -310
32  4844    12486   -66
32  4863    17471   517 
```

# android - 使用 minsdkversion 3 时设计看起来更大

> ID：14548050
> 
> 赞同：0
> 
> 时间：2013-01-27T13:52:16.263
> 
> 标签：android, android-layout, android-gridview

我创建了一个应用程序，它可以按我想要的方式正常工作`minsdkversion="3"`。但其他活动看起来比平时更大。如果我更改`minsdkversion="8"`或其他内容，其他活动看起来很正常，但我没有得到我想要的输出。

以下是 gridview 和 imageview 布局文件的代码：

**活动主.xml：**

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<GridView
    android:id="@+id/grid_View"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:horizontalSpacing="0dp"
    android:numColumns="4"
    android:stretchMode="columnWidth"
    android:verticalSpacing="0dp"
    android:gravity="center_horizontal"
    android:clipChildren="true" >

</GridView>

</LinearLayout> 
```

**网格.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/image_View"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="0.05"/>
</LinearLayout> 
```

**MainActivity.java：**

```
public View getView(int position, View convertView, ViewGroup parent)
    {
        ImageView imageView;

        if (convertView == null)
        {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            i = i+1;
            imageView.setId(i);
            Log.d("=====  i value =====", String.valueOf(i));
            imageView.setAdjustViewBounds(true);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        }
        else
        {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);

        return imageView;
    } 
```

我的代码有什么问题，我必须改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:20:35.497

> 当按下特定的身体部位时，我必须展示一些吐司

步骤#1：显示正文`ImageView`

第 2 步：覆盖`onTouchEvent()`在您的活动或片段中管理`ImageView`

步骤#3：根据触摸事件的位置和 的大小确定身体部位`ImageView`，并显示你的`Toast`

# ruby-on-rails - 删除项目的链接返回未定义的方法

> ID：14548052
> 
> 赞同：0
> 
> 时间：2013-01-27T13:52:37.427
> 
> 标签：ruby-on-rails, ruby, model, routes

这是路线的相关部分：

```
resources :photos, :path => '', :only => [:show, :new, :create, :destroy, :edit] do
  ...
end 
```

我被添加到视图中删除照片的链接：

```
 <%= button_to 'Delete', @photo, :method => :delete, :confirm => 'Are you sure?' %> 
```

但是这个视图返回错误：

```
undefined method `photo_path' for #<#<Class:0x007faef8172060>:0x007faef87a7908> 
```

**destroy**方法是脚手架生成的方法。我有什么问题？

**编辑：** `rake routes`输出：

```
 root           /                                      photos#index
              search GET       /search(.:format)                      photos#search
      voteup_user_photo GET    /:user_id/:id/voteup(.:format)         photos#voteup
    votedown_user_photo GET    /:user_id/:id/votedown(.:format)       photos#votedown
            user_photos POST   /:user_id(.:format)                    photos#create
         new_user_photo GET    /:user_id/new(.:format)                photos#new
        edit_user_photo GET    /:user_id/:id/edit(.:format)           photos#edit
             user_photo GET    /:user_id/:id(.:format)                photos#show
                     DELETE    /:user_id/:id(.:format)                photos#destroy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:29:40.383

看来您有一个嵌套路由（路径需要`:user_id`和`:id`）。尝试显式传递路径参数：

```
button_to 'Delete', { :user_id => @user.id, :id => @photo.id }, :method => :delete, :confirm => 'Are you sure?' 
```

如果这不起作用，您可能还需要`:action`在选项哈希中包含 。

# c# - C#和MASM dll库如何调试？

> ID：14548054
> 
> 赞同：1
> 
> 时间：2013-01-27T13:52:45.593
> 
> 标签：c#, debugging, dll, masm

## 描述

我的项目有点问题，据说 - 我无法调试加载到用 C# 编写的程序的 dll（用 MASM 编写）。我确实在 dll 中程序的各个位置留下了断点，但没有任何反应。程序执行只是通过过程而不停止。

我使用 Visual Studio 2010 并具有以下解决方案结构：

```
Solution
|
+--+ the masm dll project
|  |
|  +- *.asm 
|  |
|  +- *.def
|
+--+ C# dll library poject 
|  
+--+ my C# project 
```

因此我可以访问 dll 的源代码，并且它的项目与调用项目在同一个解决方案中。

但是，当我在 C# 库项目中设置断点时，它可以工作。

而且我仍然无法调试这个虫子。谁能指出我解决问题的方法？

# 解决方案

[坎福德](https://stackoverflow.com/users/249105/camford)给予

为了能够调试非托管 dll（不仅是 masm、nasm 等），您所要做的就是启用非托管代码调试，这是通过以下方式完成的（在 VS2010 中）：

启用非托管代码的调试

> 1.  在解决方案资源管理器中选择一个项目后，在“项目”菜单上，单击“属性”。
> 2.  单击调试选项卡。
> 3.  选中启用非托管代码调试复选框。

（从[这里](http://msdn.microsoft.com/en-us/library/vstudio/tdw0c6sf%28v=vs.100%29.aspx)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:34:22.323

您需要在 c# 项目的调试设置中启用非托管代码调试。如果这仍然不起作用，因为您有 asm 代码，您可以将`int 3`asm 作为硬编码的 break 指令插入，并重建您的 dll。

# android - 为Android ListView分隔线画两招？

> ID：14548057
> 
> 赞同：8
> 
> 时间：2013-01-27T13:53:10.973
> 
> 标签：android, listview, drawable, divider

是否可以为 ListView 分隔线绘制两个笔画（一个接一个）？

我尝试了以下可绘制对象，但它只显示了第一个笔画：

```
<?xml version="1.0" encoding="utf-8"?>

<shape
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="line">
    <stroke
            android:color="#eeeeee"
            />
    <size
            android:height="1px"
            />

    <stroke
            android:color="#c1c1c1"
            />
    <size
            android:height="1px"
            />
</shape> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-27T17:58:11.463

对的，这是可能的。如果您想使用形状可绘制对象创建它，则必须以不同的方式进行。一个可绘制的形状可以只包含一个形状，在你的情况下是一条线。[您可以在图层列表 drawable](https://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)中组合两个形状。图层列表中的可绘制对象是一个在另一个之上绘制，最后一个在顶部。要创建两条线，您只需为每条线设置适当的填充，以便两条线都可见。生成的drawable将是这样的（我在示例中使线条变粗）：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="2dp">
        <shape android:shape="line">
            <stroke
                    android:color="#eeeeee"
                    android:width="2dp"
                    />
            <size
                    android:height="4dp"
                    />
        </shape>
    </item>
    <item android:top="2dp">
        <shape android:shape="line">
            <stroke
                    android:color="#c1c1c1"
                    android:width="2dp"
                    />
            <size
                    android:height="4dp"
                    />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T14:46:52.183

如果您希望 2 笔画非常细，假设每个笔画 1px 高度，我尝试了上面的解决方案，但我做不到。

我发现用所需颜色的 2 个像素绘制小图像（1x2）要容易得多，然后在分隔线中定义图像：

```
android:divider="@drawable/myTinyDivider" 
```

希望这可以帮助某人。

# c++ - stdio.h 标头的详细参考

> ID：14548061
> 
> 赞同：0
> 
> 时间：2013-01-27T13:53:25.897
> 
> 标签：c++, reference, printf, stdio, manual

我一直在学习 c++（不是在学校，我在家里做所有事情，这是我的第三个高级 OOP 语言），我看到的教程 (cplusplus.com) 只显示了 iostream 标头的使用。我想熟悉 stdio.h 标头，因为它需要学习，而且似乎比 iostream 标头好一点。

我一直没能找到使用 stdio.h 的好参考

我看到了显示命令的参考，但没有深入。

比如它会显示命令 printf(),scanf() 等，但不会详细说明诸如：printf(%i, a); printf(%s, b);

我通过示例发现 %i/%d 用于整数等，以及其他一些。我只是好奇是否有像上面这样更详细的参考资料，我可以检查一下，以更好地理解和使用 stdio.h 标头。

在此先感谢-Ninjex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:57:27.033

通常[`stdio.h`](http://www.cplusplus.com/reference/cstdio/)在编写 C 时应使用，建议[`iostream`](http://www.cplusplus.com/reference/iostream/)在编写 C++ 应用程序时使用。两者都链接到您可以使用的参考资料。[这是一些通用 C++ 指南的链接。](http://vterrain.org/Implementation/effective.html)

# asp.net-mvc-4 - 在 MVC4 中播种数据和创建/管理角色 - 有多难？

> ID：14548067
> 
> 赞同：2
> 
> 时间：2013-01-27T13:54:41.803
> 
> 标签：asp.net-mvc-4, visual-studio-2012, simplemembership

我快要发疯了，所以我会尝试再寻求一些帮助...我正在使用 Visual Studio Express 2012 for Web 创建一个使用 C# + MVC4 + Razor + Entity Framework + ASP.NET 的 Internet 项目4.5\. 我需要执行以下操作：自动创建一个“管理员”用户（将在整个站点获得授权），然后创建一些用户角色。我已经阅读了有关 SimpleMembership、角色和网络上所有内容的信息，但似乎没有什么可以给我一个简单的方法来让整个事情发挥作用。

这是我到目前为止所做的：

**1-**创建了一个 DataContext 类：

```
public class DataContext : DbContext
{
public DataContext()
: base("DefaultConnection")
{
}
public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

**2-**创建了一个初始化程序类，我认为这会给我创建管理员用户和管理员角色：

```
public class DataContextDbInitializer : DropCreateDatabaseAlways<DataContext>
{
protected override void Seed(DataContext context)
{
var roles = (Webmatrix.WebData.SimpleRoleProvider)System.Web.Security.Roles.Provider;
var membership = (Webmatrix.WebData.SimpleMembershipProvider)System.Web.Security.Membership.Provider;
if (!roles.RoleExists("Admins")) {
roles.CreateRole("Admins");
}
if (membership.GetUser("admin", false) == null) {
membership.CreateUserAndAccount("admin", "123456");
}
if (!roles.GetRolesForUser("admin").Contains("Admins")) {
roles.AddUsersToRoles(new[] { "admin" }, new[] { "Admins" });
} 
}
} 
```

（我试过从 DropCreateDatabaseIfModelChanges 继承，但这没有帮助）。

**3-**在 Global.asax 中的 App_Start 方法中添加了两行：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
Database.SetInitializer<DataContext>(new DataContextDbInitializer()); 
```

我还尝试在我的 DataContextDbInitializer 类的 Seed 方法中使用 WebSecurity.InitializeDatabaseConnection，但没有奏效。

**4-**从 AccountController 中删除了 [InitializeSimpleMembership] 注释，因此我可以从应用程序生命周期的一开始就对其进行初始化（在 App_Start 中使用 WebSecurity.InitializeDatabaseConnection，正如我在第 3 号中所解释的那样）。我尝试在 HomeController 中的 Index 方法之上添加 [InitializeSimpleMembership] 并从 App_Start 中删除 WebSecurity.InitializeDatabaseConnection，但这也无济于事。

**5-**在 Web.config 中，我将身份验证方法设置为 Forms（默认），并且还保留了默认连接字符串：

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-TPFinal-20130121210447;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-TPFinal-20130121210447.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

并将其添加到 system.web 标签中：

```
<roleManager enabled="true" cacheRolesInCookie="true" /> 
```

**6-**然后，为了测试一切是否正常，我在 HomeController 的 About() 方法之上使用了 [Authorize(Roles = "Admins")] 注释。如果一切正常，这将迫使我以 admin/123456 身份登录，以便能够看到由 HomeController/About 控制的“About”页面。

**7-**我没有添加 EF 迁移或其他任何东西。默认情况下，所有其他内容都是 VS2012 自动创建的。所以我运行我的应用程序并单击“关于”链接，然后我会看到登录表单（这意味着 [Authorize(Roles = "Admins")] 注释正在执行预期的操作）。我尝试以 admin/123456 身份登录，但每次单击登录按钮时，登录页面都会一遍又一遍地重新加载。

我注意到了一些事情：

- 如果我在 Seed 方法中添加断点，它似乎没有被调用。

- 当我使用 DropCreateDatabaseAlways 并再次运行应用程序时，我能够以 admin/123456 身份登录，这让我再次想到我的整个 DataContextDbInitializer 类甚至没有被使用，因为我认为应该从头开始创建数据库，这将删除管理员用户。

我不知道还有什么要读的，还有什么要尝试的……我是 asp.net 的新手（需要我这么说吗？），简直要疯了。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T19:24:17.173

在 MVC4 中，默认的 Internet 应用程序具有内置的身份验证。一个名为的类`InitializeSimpleMembershipAttribute`位于 Filters 目录中。顾名思义，这个类初始化简单成员数据库。如果您查看构造函数，您将看到以下行：

```
 WebSecurity.InitializeDatabaseConnection("UserContext", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

在此行下方，您可以插入以下代码来创建默认用户：

```
// Create admin user.
                    if (!WebSecurity.UserExists("admin"))
                    {
                        WebSecurity.CreateUserAndAccount("admin", "12345678!");
                    } 
```

只是另一种做事的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:05:47.537

最后，我设法使整个事情顺利进行！

我的种子方法现在看起来像这样：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

if (!Roles.RoleExists("Admins"))
{
    Roles.CreateRole("Admins");
}
if (!WebSecurity.UserExists("admin"))
{
    WebSecurity.CreateUserAndAccount("admin", "123456");
}
if (!Roles.GetRolesForUser("admin").Contains("Admins"))
{
    Roles.AddUsersToRoles(new[] { "admin" }, new[] { "Admins" });
}
base.Seed(context); 
```

我在 Global.asax 中的 App_Start 如下所示：

```
Database.SetInitializer(new DataContextDbInitializer());
DataContext c = new DataContext();
c.Database.Initialize(true); 
```

我不确定这是否真的在做某事，但我在 Web.config 的 system.web 标记中有这个：

```
<roleManager enabled="true" cacheRolesInCookie="true" /> 
```

我还从 AccountController 中删除了 [InitializeSimpleMembership]，并在 AccountModels 中删除了 UsersContext 类。我将这一点移到我自己的上下文类中：

```
public DbSet<UserProfile> UserProfiles { get; set; } 
```

然后，为了测试一切是否正常，我在 HomeController 的 About() 方法之上使用了 [Authorize(Roles = "Admins")] 注释。如果一切正常，这将迫使我以 admin/123456 身份登录，以便能够看到由 HomeController/About 控制的“About”页面。哪个；）

谢谢您的帮助！它有助于我更多地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:26:51.803

试试这样：

```
public class DataContextDbInitializer : DropCreateDatabaseAlways<DataContext>
{
    protected override void Seed(DataContext context)
    {
        if (!Roles.RoleExists("Admins"))
        {
            Roles.CreateRole("Admins");
        }
        if (!WebSecurity.UserExists("admin"))
        {
            WebSecurity.CreateUserAndAccount("admin", "123456");
        }
        if (!Roles.GetRolesForUser("admin").Contains("Admins"))
        {
            Roles.AddUsersToRoles(new[] { "admin" }, new[] { "Admins" });
        }
    }
} 
```

在你的`Application_Start`：

```
Database.SetInitializer<DataContext>(new DataContextDbInitializer());
using (var ctx = new DataContext())
{
    ctx.Database.Initialize(true);
}
WebSecurity.InitializeDatabaseConnection(
    "DefaultConnection", 
    "UserProfile", 
    "UserId", 
    "UserName", 
    autoCreateTables: true
); 
```

# sql - 如何检测数据库数据更改

> ID：14548075
> 
> 赞同：1
> 
> 时间：2013-01-27T13:55:27.740
> 
> 标签：sql, sql-server, sql-server-2008, checksum

在 Sql Server 数据库中，有没有办法检测数据更改，我尝试使用`checksum`&`checksum_agg`但在**单个表上**，我想要的是所有表的整个校验和（哈希）

我用于信号表的查询是

```
select isnull(CHECKSUM_AGG(CHECKSUM(*)),0) from mytable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:03:02.400

听起来您需要 INSERT/UPDATE/DELETE 触发器。

我不确定这是否有效。随着表的增长，计算将变得更加昂贵。您确定每次数据更改时都需要这样做吗？多久进行一次更改？您在每次操作中都丢掉了很多工作。也许您可以在需要时根据要求进行操作，而不是每次写入操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:58:28.107

您可以使用“SP_MSFOREACHTABLE”命令循环遍历所有表并汇总总和

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T06:02:39.437

```
SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) as test FROM yor_table_name WITH (NOLOCK); 
```

你可以用这段代码检测sql server中的变化，这里有一个号码池，每次变化都会选择一个号码，一个号码不会连续出现两次。

# php - array_walk_recursive 和 mysqli::real_escape_string 出错

> ID：14548076
> 
> 赞同：3
> 
> 时间：2013-01-27T13:55:32.833
> 
> 标签：php, mysql

我为我的 mysql 连接使用面向对象的样式，但是如果我这样写：

```
array_walk_recursive($_POST, array($mysqli, 'real_escape_string')); 
```

我收到此错误：

```
Warning: mysqli::real_escape_string() expects exactly 1 parameter, 2 given 
```

事实是**mysqli::escape_string**只接受**1 个参数**：

```
string mysqli::escape_string ( string $escapestr ) 
```

* * *

我写的：

```
$VAR = array();
$VAR = $_POST;

function escape_string($item, $key) {
    $arr[$key] = $mysqli->real_escape_string($item);
}

array_walk_recursive($VAR, 'escape_string'); 
```

我得到这个错误：

```
Fatal error: Call to a member function real_escape_string() on a non-object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:02:13.247

您需要传递一个字符串作为第二个参数，而不是一个数组：

```
function escape_string($item, $key) {
    // Echo them out (using procedural mysqli)
    echo mysqli_real_escape_string($item);
    // or collect them in an array (using OOP mysqli)
    $arr[$key] = $mysqli->real_escape_string($item);
}

array_walk_recursive($_POST, 'escape_string'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:58:18.667

[请参阅array_walk_recursive](http://php.net/manual/en/function.array-walk-recursive.php)的定义。

> 通常，funcname 有两个参数。输入参数的值是第一个，键/索引是第二个。

正如您正确指出的那样：

> 事实是 mysqli::escape_string 只接受 1 个参数：

所以包装`real_escape_string()`一个带有两个参数的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:49:53.490

也许你需要尝试`array_map`但递归。

```
function array_map_recursive($fn, $arr) {
    $rarr = array();
    foreach ($arr as $k => $v) {
        $rarr[$k] = is_array($v)
            ? array_map_recursive($fn, $v)
            : $fn($v); // or call_user_func($fn, $v)
    }
    return $rarr;
} 
```

这里： http: [//php.net/manual/en/function.array-map.php#107808](http://php.net/manual/en/function.array-map.php#107808)

或类似的东西（与“ref”一起使用）；

```
function array_map_recursive2($fn, &$arr) {
    foreach ($arr as $k => $v) {
        $arr[$k] = is_array($v)
            ? array_map_recursive2($fn, $v)
            : $fn($v);
    }
    return $arr;
}

$a = array(1,2,array(5,array(6)));
array_map_recursive2(function($v){
    return $v * 2;
}, $a);
print_r($a); 
```

```
大批
(
    [0] => 2
    [1] => 4
    [2] => 数组
        (
            [0] => 10
            [1] => 数组
                (
                    [0] => 12
                )

        )

)

```

# c# - 如何为游戏创建一个将使用新方法动态扩展的游戏实体类？

> ID：14548077
> 
> 赞同：0
> 
> 时间：2013-01-27T13:55:52.810
> 
> 标签：c#, class, collections, xna, game-engine

所以，我有一个具有基本动作的玩家类。在游戏过程中，他解锁了新的能力。我不知道如何在播放器类中存储新动作。准确地说-我知道怎么做，但是我的方法太乱了，我想清理代码。另外，我想给敌人增加一些这样的能力。换句话说，每个游戏实体（除了墙，也许 :D）都应该有一个集合，我可以向其中添加扩展实体功能的方法。我怎么做这个？抱歉，如果我的问题太抽象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:31:33.503

创建一个动作字典：

```
public Dictionary<string,Action> NameActionDic = new Dictionary<string,Action>(); 
```

然后你可以像这样填充它：

```
player.NameActionDic["jump"] = ()=>{ player.velocity.Y -= 5; }; 
```

并像这样使用：

```
if (KeyboardButtonPressed(Keys.ArrowUp))  // this is just an example
    player.NameActionDic["jump"](); 
```

只需将填充代码放在郊区某处（单独`void`的方法，可能是玩家的构造函数），否则它会干扰您的编辑和继续能力，因为它是一个 lambda 表达式。

# mysql - 如果 PRIMARY KEY 不存在则插入，如果存在则忽略

> ID：14548079
> 
> 赞同：1
> 
> 时间：2013-01-27T13:55:56.260
> 
> 标签：mysql

> **可能重复：**
> [覆盖唯一索引值](https://stackoverflow.com/questions/3060458/overriding-unique-indexed-values)

我想创建一个 MySQL 查询，仅当 PRIMARY KEY 不存在时才执行 INSERT，如果存在则 IGNORE。

这是表定义。

```
CREATE TABLE mytable
(
  uid bigint NOT NULL,
  frnd1_uid bigint,
  frnd2_uid bigint,
  frnd3_uid bigint,
  set_date date NOT NULL,
  CONSTRAINT user_uid PRIMARY KEY (uid )
); 
```

# android - 在单独的线程上调用 Drive API for Android 不返回数据

> ID：14548081
> 
> 赞同：0
> 
> 时间：2013-01-27T13:56:00.733
> 
> 标签：android, google-drive-api

我正在使用适用于 android 的 Drive API v2，当我执行以下方法时，我的应用程序似乎暂停或等待，并且没有返回任何数据。

```
 public About getAbout() throws InterruptedException, ExecutionException {

    FutureTask<About> future = new FutureTask<About>(new Callable<About>() {
        public About call() throws IOException {

            About about = null;
            try {
                about = _driveService.about().get().execute();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return about;

        }
    });

    About about = future.get();
    return about;
} 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:03:49.917

您正在创建一个`FutureTask`，但您从未执行它（不在当前线程上，也不在任何其他线程上）。然后你调用`future.get()`which 将阻塞直到操作完成。由于您从未实际执行该操作，因此它将永远等待。

要在后台线程上执行操作，例如可以使用[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# python - python列表追加

> ID：14548087
> 
> 赞同：0
> 
> 时间：2013-01-27T13:56:33.340
> 
> 标签：python, list, math

我正要编写一个计算多项式的程序。但是下面的代码只是一个尝试。下面的代码给出了一个在“counter = t”时停止的输出......我希望它在counter = 0时给出一个输出。怎么可能？我想将每个数字（输入）视为多项式的系数。如果我成功地做到了这一点，我计划创建一个列表，然后对于列表中的每个元素，例如，我会将它乘以某个提高到其索引的数字，然后将它们相加，以便我评估一个多项式..我清楚吗？我的计划会成功吗？非常感谢。。请帮忙。。

```
t = input("Enter degree of Polynomial: ")  
while t < 0:  
    print ("Not possible! ")  
    t = input("Enter degree of Polynomial: ")   

counter = 0  

while counter < t:  
    x = input("n: ")

    if x <= 0:
        print "Not possible!"
    else:
        print x**t  
    t-=1  

    counter += 1 
```

输出是这样的：
输入多项式的次数：5
n:5
3125
n:4
256
n:3
27
然后它结束..它应该继续要求输入 n 最多五次..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:07:30.757

尝试使用 raw_input() 并记住 raw_input() 总是返回一个字符串。因此，您必须将返回的字符串转换为整数，例如：

```
>>> x = int(raw_input("foo: ")) 
```

然后可以测试 x > 2 等。如果不转换为整数，会发生以下情况：

```
>>> "2" > 1
True
>>> "2" > 3
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:23:51.570

像这样的东西？

```
while True:
    degree = int(raw_input("Enter degree of Polynomial: "))
    if degree >= 0:
        break
    print ("Not possible!")  

x = float(raw_input("x = "))

y = 0.0
for exponent in reversed(range(degree)):
    k = float(raw_input("k[{0}] = ".format(exponent)))
    y += k * (x ** exponent)

print("y = ", y) 
```

这解决了以下形式的多项式：

```
y = (k[N-1] * (x ^ N-1) + (k[N-2] * (x ^ N-2) + ... + k[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:07:07.743

首先：干得好 - 这只是一个小错误：删除最后一行中的“语法空格”，或者完全删除它

其次：不要忘记添加值 ;-) - 关于您的标题，最好使用 python 列表来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T19:02:47.680

问题似乎（对我来说）你让循环依赖于 2 个变量，你可能期望它只依赖于 1。

也许这会更好一些：

```
while t > 0:  
    x = input("n: ")

    if x <= 0:
        print "Not possible!"
    else:
        print x**t  
    t-=1 
```

# ios - iOS：将图像添加到导航栏

> ID：14548088
> 
> 赞同：1
> 
> 时间：2013-01-27T13:56:49.650
> 
> 标签：ios, cocoa-touch

我目前正在开发一个 iOS 应用程序，该应用程序的外观和工作方式几乎与现有的 android 应用程序一样。

作为其中的一部分，我想让顶部导航看起来一样，但由于 iOs 设备不提供硬件或软件集成的后退按钮，我还想保留 iOs 应用程序常见的后退按钮导航.

我已经尝试了无数次尝试来实现它，但我会坚持使用我正在研究的最新版本，因为它看起来最有希望。我已经开始研究一个覆盖and方法的自定义`UINavigationBar`类。结果如下：`initWithCoder:``layoutSubviews:`

![](../Images/fd4abfb593dcd018f5b002f4cbf927e0.png)

如您所见，后退按钮现在与应用程序图标重叠。我正在寻找的是一种使按钮和文本缩放到应用程序图标右侧空间的方法。我试图处理这个问题，`layoutSubviews:`但超类逻辑似乎相当复杂，我无法重现它的功能（特别是它似乎正在使用一些我无权访问的私有变量）。

我还尝试`self.frame`在调用之前进行操作，`[super layoutSubviews]`但除了无限循环之外，我无法在那个方向上实现任何目标。

如果有人能指出我正确的方向，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:24:48.667

如果我正确理解您的问题，我认为您可以通过向 UINavigationItem 添加自定义 titleView 来做到这一点，并有一个图像视图（在左侧的图标）和一个标签（用于标题）作为子视图。这将替换默认标题。

# javascript - 仅使用 javascript/html5 获取麦克风/网络摄像头记录流

> ID：14548097
> 
> 赞同：2
> 
> 时间：2013-01-27T13:58:09.180
> 
> 标签：javascript, asp.net, ios, html, web-applications

我制作了一个 Web 应用程序，需要使用 java 脚本和 html5（无闪存）记录来自 pc/mobile mic/camera 的流。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:41:58.400

有两种方法，getusermedia 和使用输入的 legacy 方法，这是 ios6 允许的：

老办法：

```
<input type="file" accept="video/*;capture=camcorder">
<input type="file" accept="audio/*;capture=microphone"> 
```

当前方式：

```
window.URL = window.URL || window.webkitURL;
navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia ||
                          navigator.mozGetUserMedia || navigator.msGetUserMedia;

var video = document.querySelector('video');

if (navigator.getUserMedia) {
  navigator.getUserMedia({audio: true, video: true}, function(stream) {
    video.src = window.URL.createObjectURL(stream);
  }, onFailSoHard);
} else {
  video.src = 'somevideo.webm'; // fallback.
} 
```

这些样本是从[这里](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)复制的。HTML5Rocks 也有许多工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:08:27.257

```
navigator.getUserMedia ( constraints, successCallback, errorCallback ); 
```

*   [带有示例的简短描述](https://developer.mozilla.org/en-US/docs/WebRTC/navigator.getUserMedia)
*   [API](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)
*   [支持的浏览器](http://caniuse.com/stream)

# ruby-on-rails - 在 rails 3.2 中验证 has_many 关系

> ID：14548104
> 
> 赞同：7
> 
> 时间：2013-01-27T13:59:09.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

鉴于我有下一个模型：

用户.rb

```
has_many :favorites, dependent: :destroy
has_many :sports, through: :favorites 
```

运动.rb

```
has_many :favorites, dependent: :destroy
has_many :users, through: :favorites 
```

在创建新用户的表单中，有一个运动复选框列表，在用户验证中，我想验证是否至少选择了一个。

我这样做是这样的：

在用户控制器中创建操作：

```
@user = User.new(params[:user])
@user.sports << Sport.find(params[:sports]) unless params[:sports].nil?

if @user.save ... 
```

在用户模型中

```
validate :user_must_select_sport

def user_must_select_sport
  if sports.empty?
    errors.add(:Sport, "You have to select at least 1 sport")
  end
end 
```

它实际上是有效的，但我猜它必须是一种更好的方法。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T15:02:14.503

您可以使用“validates_presence_of”

```
class User < ActiveRecord::Base
  has_many :sports
  validates_presence_of :sports
end 
```

但是如果你要使用`accepts_nested_attributes_for`with的话，会有一个错误`:allow_destroy => true`。

你可以看看这个：[嵌套模型和父验证](https://stackoverflow.com/questions/5144527/nested-models-and-parent-validation)

# javascript - 使用通过 javascript 中的 html 浏览按钮捕获的文件名

> ID：14548106
> 
> 赞同：2
> 
> 时间：2013-01-27T13:59:18.773
> 
> 标签：javascript

我正在尝试创建一个表单，我可以在其中上传姓名等人口统计信息以及上传 jpg 图像文件。我无法弄清楚如何捕捉用户从浏览按钮中选择的文件。文件名存储在哪里？如何访问它以进行上传？如何访问它以将其分配为变量，例如：

```
var theFileName; 
function() 
if (filename !=null) { //manipulate the variable }; 
else { //something else}; 
```

我是 JavaScript 新手，并试图通过网络资源和书籍自学，但似乎找不到答案。除了这个问题的答案之外，任何人都可以建议一个好的网络资源来获取关于这个主题的更多信息吗？最终目标是能够使用 PHP 将信息和文件上传到数据库中，以便可以在另一个页面但不同的用户上调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:05:57.547

[http://jsfiddle.net/EDfsh/](http://jsfiddle.net/EDfsh/)

如果你看看我制作的这个小提琴，你就有了你需要的代码；）

它使用 jQuery。

您的 HTML 输入

```
<input type="file" id="pic" > 
```

Java脚本：

```
function fileName(test){
    var source=test.value;
    alert(source);
}

$(function(){
    $('#pic').bind('change',function(){
        fileName(this);
    });
}); 
```

但是您看不到文件的来源。而且您无权查看整个路径。因此，您只需获取文件名。

# php - 您如何在 Silex 中设置和获取 cookie？

> ID：14548107
> 
> 赞同：4
> 
> 时间：2013-01-27T13:59:28.747
> 
> 标签：php, silex

正如标题所暗示的，

这是代码...

```
public function index(Request $request, Application $app)
{
    $cookies = $request->cookies;
    print_r($request->cookies);
    if(!$cookies->has("recordsPerPage"))
    {
        $response = new Response();
        $cookie = new Cookie("recordsPerPage", $app['defaultRecordsPerPage']);
        $response->headers->setCookie($cookie); 
    }
    print_r($request->cookies);exit; //prints nothing here !!
} 
```

我也尝试将其设置为`$app->after()`但失败了。除了在控制器中设置 cookie 之外，您还有其他方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T14:29:15.627

Cookie 设置为响应并在下一次请求时可用。因此，您必须使用此 cookie 返回响应，如果您希望它在请求中可用，请将其设置为重定向响应，以便浏览器设置 cookie 并使用此新创建的 cookie 发出下一个请求：

```
$cookies = $request->cookies;
if(!$cookies->has("recordsPerPage"))
{
    $cookie = new Cookie("recordsPerPage", $app['defaultRecordsPerPage']);
    $response = Response::create('', 302, array("Location" => "http://127.0.0.1/whatever/"));
    $response->headers->setCookie($cookie);
    return $response;
}else{
    return print_r($cookies, 1);
} 
```

其他可能性是直接在请求中设置此 cookie ( `$request->cookies->set('recordsPerPage', $app['defaultRecordsPerPage']);`)，但您仍然必须使用此 cookie 返回响应才能在浏览器中设置它。

# php - 将 SQL 数据放入 HTML 表中

> ID：14548110
> 
> 赞同：7
> 
> 时间：2013-01-27T14:00:07.770
> 
> 标签：php, html, sql, html-table

我正在尝试从我的 mySQL 数据库中获取数据并将它们放入 HTML 表中。在互联网上搜索了很多之后，但我找不到适合我的代码。

目前，我有这个代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <table>
        <thead>
            <tr>
                <td>Naam</td>
                <td>Gemeente</td>
                <td>Datum</td>
            </tr>
        </thead>
        <tbody>
       <?php
          $db_select = mysql_select_db($dbname,$db);
            if (!db_select) {
                die("Database selection also failed miserably: " . mysql_error());
            }
            mysql_select_db("databaseiheko");
            $results = mysql_query("SELECT NaamFuif, GemeenteFuif, DatumFuif FROM tblfuiven");
            while($row = mysql_fetch_array($results)) {
            ?>
                <tr>
                    <td><?php echo $row['NaamFuif']?></td>
                    <td><?php echo $row['GemeenteFuif']?></td>
                    <td><?php echo &row['DatumFuif']?></td>
                </tr>

            <?php
            }
            ?>   
            </tbody>
            </table>
</body>
</html> 
```

我唯一得到的是我表的第一行（Naam-Gemeente-Datum）。我做错了什么还是我忘记了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:06:27.080

首先，要记住的最重要的事情是：

# 您正在使用已弃用且不安全的代码

[**强烈**](https://stackoverflow.com/q/12859942/19068)[建议不要](https://stackoverflow.com/q/12859942/19068)使用[mysql_ 函数](https://stackoverflow.com/q/12859942/19068)**，原因有很多：**

 ***   已弃用并将在 PHP 的未来版本中删除，
*   不安全导致可能的 SQL 注入，
*   缺少更多当前版本的 PHP 中存在的许多功能

*有关更*深入的解释，请参阅链接的问题。

现在，到代码本身：

# 您没有使用`mysql_connect`连接到服务器

您应该使用`mysql_connect`来指定将用于访问数据库中数据的服务器、用户名和密码。*从您的代码来看，它*似乎应该存在，因为函数`$db`中使用了一个变量`mysql_connect`，但没有正确初始化，也没有在其他任何地方再次使用。

您应该`mysql_connect`以类似于以下的方式使用：

```
$db = mysql_connect('localhost', $user, '$password');
如果 (!$db) {
    die('未连接：' . mysql_error());
}

```

（不要忘记设置您的用户名和密码！）

# 您`mysql_select_db`连续使用两次：

```
    $db_select = mysql_select_db($dbname,$db);
        如果（！db_select）{
            die("数据库选择也惨败：" .mysql_error());
        }

```

其次是

`mysql_select_db("databaseiheko");`

1.  注意`$dbname`and`$db`变量，你的代码中没有它们，这个函数不会像这样工作。
2.  第二个`mysql_select_db`覆盖第一个，但您没有指定要使用的服务器连接。

你应该使用第一个版本，但你应该`mysql_connect`在它之前使用。

# 您的代码中有拼写错误

*   `if (!db_select) {`应该`if (!$db_select) {`
*   `echo &row['DatumFuif']`应该`echo $row['DatumFuif']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:31:18.117

mysql_ 函数已弃用，但如果您想使用它们，我建议进行以下更正：

您可以通过这种方式更正您的代码：需要 mysql 连接：

```
 <?php
 //connect to your database
 mysql_connect("serverIpAddress","userName","password");
 //specify database
 mysql_select_db("yourDatabaseName") or die;
 //Build SQL Query
 $query = "select * from tblfuiven";
 $queryResult=mysql_query($query);
 $numrows=mysql_num_rows($queryResult); 
```

numrows 将包含在数据库中找到的记录数。为行数添加一个回显，让我们知道行数是否仍然是一。然后使用 mysql_fetch_assoc 获取行：

```
 while($row = mysql_fetch_assoc($queryResult)) {
        ?>
            <tr>
                <td><?php echo $row['NaamFuif']?></td>
                <td><?php echo $row['GemeenteFuif']?></td>
                <td><?php echo &row['DatumFuif']?></td>
            </tr>
        <?php

        }
        ?> 
```

编辑：您可以使用此代码测试代码并让我们知道您获得的行数（写下您的真实用户名和密码以及数据库名称：

```
 <?php
         mysql_connect("localhost","root","root");     
         mysql_select_db("databaseName") or die;
            $results = mysql_query("SELECT * FROM tblfuiven");
            $numrows=mysql_num_rows($queryResult);
           while($row = mysql_fetch_assoc($queryResult)) {
            ?>
                <tr>
                    <td><?php echo $numrows ?></td>
                    <td><?php echo $row['NaamFuif']?></td>
                    <td><?php echo $row['GemeenteFuif']?></td>
                    <td><?php echo $row['DatumFuif']?></td>
                </tr>

            <?php
           }
           ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T22:34:41.260

您的问题出在 php echo 语句中。它缺少“;”。**

# python - 如何在 Python 中关闭线程？

> ID：14548111
> 
> 赞同：3
> 
> 时间：2013-01-27T14:00:17.510
> 
> 标签：python, multithreading, join, queue

我有太多未完成的线程的问题。我认为队列命令 .join() 只是关闭队列而不是使用它的线程。

在我的脚本中，我需要检查 280k 域，并为每个域获取他的 MX 记录列表，并获取服务器的 IPv6 地址（如果有）。

我使用了线程并感谢他们的脚本，它的速度要快很多倍。但是有一个问题，虽然队列有 join()，但活动线程的数量正在增长，直到发生错误，通知无法创建任何新线程（操作系统的限制？）。

当我从数据库中检索新域时，如何在每个 For 循环之后终止/关闭/停止/重置线程？

线程类定义...

```
class MX_getAAAA_thread(threading.Thread):
    def __init__(self,queue,id_domain):
        threading.Thread.__init__(self)
        self.queue = queue
        self.id_domain = id_domain

    def run(self):
        while True:
            self.mx = self.queue.get()

            res = dns.resolver.Resolver()
            res.lifetime = 1.5
            res.timeout = 0.5

            try:
                answers = res.query(self.mx,'AAAA')
                ip_mx = str(answers[0])
            except:
                ip_mx = "N/A"

            lock.acquire()

            sql = "INSERT INTO mx (id_domain,mx,ip_mx) VALUES (" + str(id_domain) + ",'" + str(self.mx) + "','" + str(ip_mx) + "')"
            try:
                cursor.execute(sql)
                db.commit()
            except:
                db.rollback()

            print "MX" , '>>' , ip_mx, ' :: ', str(self.mx)

            lock.release()
            self.queue.task_done() 
```

正在使用的线程类...（这里没有主要的for循环，这只是他身体的一部分）

```
try:
    answers = resolver.query(domain, 'MX')

    qMX = Queue.Queue()
    for i in range(len(answers)):
        t = MX_getAAAA_thread(qMX,id_domain)
        t.setDaemon(True)
        threads.append(t)
        t.start()

    for mx in answers:
        qMX.put(mx.exchange)

    qMX.join()

except NoAnswer as e:
    print "MX - Error: No Answer"
except Timeout as etime:
    print "MX - Error: dns.exception.Timeout"

print "end of script" 
```

我尝试过了：

```
for thread in threads:
            thread.join() 
```

队列完成后，但是 thread.join() 永远不会停止等待，尽管事实上不需要等待，因为当 queue.join() 执行时，线程没有任何事情可做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T14:52:36.683

当我的线程涉及这样的无限循环时，我经常做的是将条件更改为我可以从外部控制的东西。例如像这样：

```
def run(self):
    self.keepRunning = True
    while self.keepRunning:
        # do stuff 
```

这样，我可以`keepRunning`从外部更改属性并将其设置为 false，以便在下次检查循环条件时优雅地终止线程。

顺便提一句。由于您似乎为放入队列的每个项目都生成了一个线程，因此您甚至根本不需要线程循环，尽管我认为您应该始终强制执行可以创建的线程的最大限制这样（即`for i in range(min(len(answers), MAX_THREAD_COUNT)):`）

### 选择

在您的情况下，您可以重用线程，而不是在每次 for 循环迭代中终止线程。根据我从您的线程源收集的信息，使线程对迭代唯一的所有因素都是`id_domain`您在创建它时设置的属性。但是，您也可以在队列中提供它，因此线程是完全独立的，您可以重用它们。

这可能看起来像这样：

```
qMX = Queue.Queue()
threads = []
for i in range(MAX_THREAD_COUNT):
    t = MX_getAAAA_thread(qMX)
    t.daemon = True
    threads.append(t)
    t.start()

for id_domain in enumerateIdDomains():
    answers = resolver.query(id_domain, 'MX')
    for mx in answers:
        qMX.put((id_domain, mx.exchange)) # insert a tuple

qMX.join()

for thread in threads:
    thread.keepRunning = False 
```

当然，你需要稍微改变你的线程：

```
class MX_getAAAA_thread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        self.keepRunning = True
        while self.keepRunning:
            id_domain, mx = self.queue.get()
            # do stuff 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T14:41:42.697

我不明白为什么你首先需要 a `Queue`。
毕竟在您的设计中，每个线程只处理一项任务。
您应该能够在创建时将该任务传递给线程。
这样你就不需要 a`Queue`并且你摆脱了`while`-loop：

```
class MX_getAAAA_thread(threading.Thread):
    def __init__(self, id_domain, mx):
        threading.Thread.__init__(self)
        self.id_domain = id_domain
        self.mx = mx 
```

然后你可以去掉-method中的`while`-loop ：`run`

```
def run(self):
    res = dns.resolver.Resolver()
    res.lifetime = 1.5
    res.timeout = 0.5

    try:
        answers = res.query(self.mx,'AAAA')
        ip_mx = str(answers[0])
    except:
        ip_mx = "N/A"

    with lock:
        sql = "INSERT INTO mx (id_domain,mx,ip_mx) VALUES (" + str(id_domain) + ",'" + str(self.mx) + "','" + str(ip_mx) + "')"
        try:
            cursor.execute(sql)
            db.commit()
        except:
            db.rollback()

        print "MX" , '>>' , ip_mx, ' :: ', str(self.mx) 
```

为每个任务创建一个线程

```
for mx in answers:
    t = MX_getAAAA_thread(qMX, id_domain, mx)
    t.setDaemon(True)
    threads.append(t)
    t.start() 
```

并加入他们

```
for thread in threads:
    thread.join() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T14:23:02.910

加入线程可以解决问题，但是在您的情况下，连接会无限期地阻塞，因为您的线程永远不会退出您的运行循环。您需要退出 run 方法，以便可以加入线程。

# google-maps-api-3 - 如何通过瓷砖编号而不是 Lat Lng 放置标记

> ID：14548113
> 
> 赞同：-5
> 
> 时间：2013-01-27T14:00:42.593
> 
> 标签：google-maps-api-3

我想按**图块编号**而不是**Lat、Lng**坐标在地图上放置标记。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:15:45.187

不是直接的。您必须首先将瓷砖编号转换为 lat lng。颠倒[您其他问题的答案中](https://stackoverflow.com/questions/14547940/how-to-get-tile-x-y-z-info-of-marker-when-clicked-it#14548229)的方向。

# xcode - 基于文档的应用程序中的 iboutlet

> ID：14548116
> 
> 赞同：0
> 
> 时间：2013-01-27T14:01:00.660
> 
> 标签：xcode, document, iboutlet

我正在搜索超过 2 个小时，但没有找到答案！

我是 xcode 和 cocoa 编程的菜鸟。基本上我的 xib 文件包含一个选项卡视图，并且在其中一个选项卡中我放置了一个 webview。我还添加了 Web 框架。

我的应用程序是基于文档的应用程序。而且我无法为 webview 声明一个 iboutlet 以使其加载 URL。

我应该如何在基于文档的应用程序中声明 iboutlet？我应该在什么文件中进行更多操作？

请保持答案尽可能简单，因为我在这方面非常绿色，并且来自 Windows，需要一些时间来了解 mac 环境。

谢谢你！

伊戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:11:54.097

问题解决了！

首先我要实现 webkit 框架，然后我将实现添加到应用程序委托而不是文档。因此，当打开一个文档时它没有加载页面！

无论如何，谢谢你的帮助jemmons！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T06:54:39.597

我认为：你必须导入 WebKit：

# 导入 <WebKit/WebKit.h>

不过，这只是一个猜测，因为您没有发布足够的代码来确定。

# ruby-on-rails - 水豚暧昧匹配

> ID：14548118
> 
> 赞同：2
> 
> 时间：2013-01-27T14:01:40.540
> 
> 标签：ruby-on-rails

出于某种原因，当我这样做时：

```
click_on("Save") 
```

我的 Capybara 检测到：

```
<button>Save</button>
<button>Save & Schedule</button> 
```

因此它给出了“模糊匹配：找到 2 个元素”错误。

有没有办法告诉它做完全匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:12:50.100

不，没有办法做到这一点。您必须为这些按钮添加 uniq id，因为如果找到多个元素，capybara 2.0 会引发错误。

# ruby-on-rails-3 - Rails 时区不变

> ID：14548132
> 
> 赞同：0
> 
> 时间：2013-01-27T14:03:55.230
> 
> 标签：ruby-on-rails-3

尝试了以下方法：

```
config.time_zone = 'Pretoria'
config.active_record.default_timezone = 'Pretoria' 
```

没有收到任何错误，但它仍然显示为伦敦时间而不是比勒陀利亚，即 +2 小时。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T05:33:18.353

也许尝试在每个请求上设置时区？这样，您最终可以让用户设置自己的时区，并且每个请求都可以与他们的时区设置相关。

```
class ApplicationController < ActionController::Base
  around_filter :set_time_zone

  def set_time_zone
    if logged_in?
      Time.use_zone(current_user.time_zone) { yield }
    else
      yield
    end
  end
end 
```

[http://api.rubyonrails.org/classes/Time.html#method-i-zone-3D](http://api.rubyonrails.org/classes/Time.html#method-i-zone-3D)

# c++ - VS2012、C++11 和内存泄漏检测（VLD 与 CRTDBG）

> ID：14548135
> 
> 赞同：10
> 
> 时间：2013-01-27T14:04:10.520
> 
> 标签：c++, c++11, visual-studio-2012, memory-leaks

我用 CRTDBG 检测到了一堆内存泄漏，但发现它们很难追踪，所以安装了 Visual Leak Detection。这显示了一致数量的泄漏，我追踪到没有虚拟析构函数的抽象类。我修复了这个问题，VLD 现在在我的应用程序中没有显示内存泄漏，但是 CRTDBG 仍然存在，并且始终显示大约 100 个左右的泄漏。

这些工具中的任何一个都可以被 C++11 信任吗？我大量使用唯一指针并且没有它们几乎没有制作任何新对象，因此无法理解泄漏的来源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T14:47:04.440

如果您在 in 的堆栈上有一些全局对象或其他东西`main()`，它们不会在`main()`退出之前被销毁。

如果这些对象进行动态内存分配并且您`_CrtDumpMemoryLeaks()`在 的最后调用`main()`，您仍然会看到该内存“泄漏”。

# c# - 如何打开扩展名为 .tda .tdz 的文件？它是什么样的文件？

> ID：14548138
> 
> 赞同：0
> 
> 时间：2013-01-27T14:04:22.380
> 
> 标签：c#

我需要用`.tda`,`.tda.tdz`扩展名打开文件并将数据转换为可读字符串。

这不是Palm，我敢肯定。已经试过了。

我认为它们是`IBM DB2`数据库临时文件。

在与这些文件相同的文件夹中，我有一个配置文件说`.tda`文件是 Zip 压缩的。

我是 .net c# 开发人员，所以我想知道是否可以在 c# 中做到这一点

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:33:21.870

这些文件是字典的一部分。牛津、剑桥、朗文和许多其他数字词典使用这些文件来存储词典数据。

我的猜测是它们属于出版商（**Pearson Education Limited**）使用的某种专有格式，可能根本与 DB2 无关。

例如，“朗文当代英语词典 5”安装包含

```
/ldoce5.data/fs.skn/files.skn/CONTENT.tda.tdz       <--
/ldoce5.data/fs.skn/files.skn/files.dat
/ldoce5.data/fs.skn/files.skn/TITLE.tda             <--
/ldoce5.data/fs.skn/files.skn/NAME.tda
/ldoce5.data/fs.skn/files.skn/TEXTTITLE.tda
/ldoce5.data/fs.skn/files.skn/CONTENT.tda 
```

除了侵犯版权外，在这些文件中转储字符串可能需要大量的逆向工程。它们中的大多数可能只是字典数据其他部分的索引，而且出版商很可能采取了诸如加密等措施来防止以纯文本形式访问内容。

# jquery - onhover 打开一个弹出窗口，但仅当我单击页面的其余部分或关闭按钮时才会关闭

> ID：14548141
> 
> 赞同：2
> 
> 时间：2013-01-27T14:04:28.890
> 
> 标签：jquery

onhover 打开一个弹出窗口，但仅当我单击页面的其余部分或关闭按钮时才会关闭

```
$('#promo').mouseover(function() {

        $('#promoarrow').show();

    });

    $('#closebtn').click(function() {

        $('#promoarrow').hide();

    }); 
```

这是小提琴：http: [//jsfiddle.net/YFY5g/16/](http://jsfiddle.net/YFY5g/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:15:33.220

你想要这个吗？？

```
$(document).click(function (e) {
    if (e.target)
        target = e.target;
    else if (e.srcElement)
        target = e.srcElement;
    else
        target = e.currentTarget;

    if (target.id != 'promoarrow') $('#promoarrow').hide(); 
}); 
```

# c# - 读取 XML 时程序冻结

> ID：14548142
> 
> 赞同：0
> 
> 时间：2013-01-27T14:04:44.293
> 
> 标签：c#, xml

这是我的代码：

```
using (StreamReader reader = new StreamReader("test.xml"))
{          
    int prev = ' ';
    List<string> info = new List<string>();
    StringBuilder temp = new StringBuilder();

    for (int c; (c = reader.Read()) != -1; )
    {
        if (prev == '>' && c != '<')
        {
            while (c != '<')
            {
                if (c != ' ' && c != '\n' && c != '\r' && c != '\t') temp.Append((char)c);
                c = reader.Read();
            }

            if (temp.Length > 0)
            {
                info.Add(temp.ToString());
                Console.WriteLine(temp.ToString());
                temp.Clear();
            }
        }
        prev = c;
    }

    foreach (string item in info) Console.WriteLine(item);
} 
```

我正在尝试从 XML 文件（没有在 .NET 中实现的方法）中读取有意义的内容（标签之间的信息）。该程序似乎读取了数据块并将它们成功放入列表中，但是当它到达文件末尾时，它只是冻结而不执行 for 语句之后的剩余代码。我必须说它不再循环了——我试过了，它只是冻结了。

XML 文件：

```
<?xml version="1.0"><student><name>Pesho</name>
<age>21</age><interests count="3"><interest>
Games</instrest><interest>C#</instrest><interest>
Java</instrest></interests></student> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:17:28.893

看起来最里面的循环，`while`循环，可以永远从流中读取，因为它读取`while (c != '<')`, 和`(-1) != '<'`.

请注意，当您在( ) 和( )`!=`之间使用运算符时，后者会自动转换为，因此它实际上是：`int``-1``char``'<'``int`

```
while (c != 60) 
```

# windows - 在 Windows 应用商店应用程序中使用本机 dll

> ID：14548145
> 
> 赞同：2
> 
> 时间：2013-01-27T14:05:00.247
> 
> 标签：windows, dll, native

我需要在 Windows Store 应用程序中使用本机 dll。（dll 是 ffmpeg，为 Windows 编译）

可能吗？

# c - 在 C 中查找字符数组的保留内存大小

> ID：14548150
> 
> 赞同：4
> 
> 时间：2013-01-27T14:05:42.203
> 
> 标签：c, string, pointers

我正在尝试学习 C，作为开始，我开始为自己的练习编写一个 strcpy。众所周知，原始的 strcpy 很容易出现安全问题，所以我给自己写了一个“安全”的 strcpy 的任务。

我选择的路径是检查源字符串（字符数组）是否真正适合目标内存。据我了解，C 中的字符串只不过是指向字符数组的指针，以 0x00 终止。

所以我的挑战是如何找到编译器实际为目标字符串保留了多少内存？

我试过：

```
sizeof(dest) 
```

但这不起作用，因为它会返回（我后来发现）dest 的大小，它实际上是一个指针，在我的 64 位机器上，总是返回 8。

我也试过：

```
strlen(dest) 
```

但这也不起作用，因为它只会返回长度，直到遇到第一个 0x0，这不一定反映实际保留的内存。

所以这一切都归结为以下问题：如何找到编译器为我的目标“字符串”保留了多少内存？？？

例子：

```
char s[80] = "";
int i = someFunction(s); // should return 80 
```

什么是“一些功能”？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:07:53.813

一旦你将一个 char 指针传递给你正在编写的函数，你就会失去关于分配给 s 多少内存的知识。您需要将此大小作为参数传递给函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:08:48.210

您可以使用 sizeof 在编译时检查：

```
char s[80] = "";
int i = sizeof s ; // should return 80 
```

请注意，如果 s 是指针，则此操作失败：

```
char *s = "";
int j = sizeof s;  /* probably 4 or 8\. */ 
```

数组不是指针。要跟踪分配给指针的大小，程序只需跟踪它。此外，您不能将数组传递给函数。当您使用数组作为函数的参数时，编译器会将其转换为指向第一个元素的指针，因此如果您希望大小对被调用的函数可用，则必须将其作为参数传递。例如：

```
char s[ SIZ ] = "";
foo( s, sizeof s ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T14:13:02.927

> 所以这一切都归结为以下问题：如何找到编译器为我的目标“字符串”保留了多少内存？？？

没有可移植的方法来找出分配了多少内存。您必须自己跟踪它。

实现必须跟踪指针有多少内存`malloc`，它可能会为您提供一些可用的信息。例如 glibc 的`malloc.h`暴露

```
size_t malloc_usable_size (void *__ptr) 
```

这使您可以大致访问该信息，但是，它不会告诉您您请求了多少，而是告诉您有多少*可用*。当然，这只适用于您从`malloc`（和朋友）获得的指针。对于数组，您只能使用`sizeof`数组本身在范围内的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T14:11:19.683

```
char s[80] = "";
int i = someFunction(s); // should return 80 
```

在表达式`s`中是指向数组第一个元素的指针`s`。您不能仅使用指向其第一个元素的指针值的信息来推断数组对象的大小。您唯一能做的就是在声明数组（此处`sizeof s`）后存储数组大小的信息，然后将此信息传递给需要它的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T14:13:34.673

没有**便携**的方法可以做到这一点。但是，实现肯定需要在内部知道这些信息。基于 Unix 的操作系统，如 Linux 和 OS X，为此任务提供了功能：

```
// OS X
#include <malloc/malloc.h>

size_t allocated = malloc_size(somePtr);

// Linux
#include <malloc.h>

size_t allocated = malloc_usable_size(somePtr);

// Maybe Windows...

size_t allocated = _msize(somePtr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T14:47:10.873

标记 malloc 返回的成员的一种方法是始终 malloc 一个额外的 sizeof(size_t) 字节。将其添加到 malloc 返回的地址，您就有了存储实际长度的存储空间。将分配的大小 - sizeof (size_t) 存储在那里，您就有了新功能集的基础。

当您将其中两种类型的指针传递给您的新特殊 strcpy 时，您可以从指针中减去 sizeof(size_t)，并直接访问大小。这使您可以决定是否可以安全地复制内存。

如果你在做 strcat，那么这两个大小以及计算 strlens 意味着你可以做同样的检查，看看 strcat 的结果是否会溢出内存。

这是可行的。这可能比它的价值更麻烦。

考虑一下如果传入一个未分配的字符指针会发生什么。假设大小在指针之前。这个假设是错误的。在这种情况下尝试访问大小是未定义的行为。如果你幸运的话，你可能会收到一个信号。

这种实现的另一个含义是，当您释放内存时，您必须传入完全返回的 malloc 指针。如果你没有得到正确的，堆损坏是可能的。

长话短说...不要那样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-27T15:07:41.893

对于在程序中使用字符缓冲区的情况，您可以做一些烟雾和镜子来获得您想要的效果。像这样的东西。

```
char input[] = "test";
char output[3];

if (sizeof(output) < sizeof(input))
{
    memcpy(output,input,sizeof(input) + 1);
}
else
{
    printf("Overflow detected value <%s>\n",input);
} 
```

可以通过将代码包装在宏中来改进错误消息。

```
#define STRCPYX(output,input)                                        \
if (sizeof(output) < sizeof(input))                                  \
{                                                                    \
    memcpy(output,input,sizeof(input) + 1);                          \
}                                                                    \
else                                                                 \
{                                                                    \
    printf("STRCPYX would overflow %s with value <%s> from %s\n",    \
                                   #output,       input,   #input);  \
}                                                                    \

char input[] = "test";
char output[3];
STRCPYX(output,input); 
```

虽然这确实给了你想要的东西，但同样的风险也适用。

```
char *input = "testing 123 testing";
char output[9];
STRCPYX(output,input); 
```

输入的大小为 8，输出的大小为 9，输出的值最终为“Testing”

C 并不是为了保护程序员不做错误的事情而设计的。这有点像您正试图在上游划桨 :) 这是一个很好的练习。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-27T16:05:10.413

尽管数组和指针看起来可以互换，但它们在一个重要方面有所不同。数组有大小。但是，由于数组在传递给函数时会“降级”为指针，因此大小信息会丢失。

关键是在某些时候*您*知道对象的大小 - 因为您分配了它或将其声明为某个大小。C 语言使您有责任在必要时保留和传播该信息。所以在你的例子之后：

```
char s[80] = "";  // sizeof(s) here is 80, because an array has size
int i = someFunction(s, sizeof(s)) ; // You have to tell the function how big the array is. 
```

没有确定数组大小的“神奇”方法`someFunction()`，因为该信息被丢弃（出于性能和效率的原因 - C 在这方面相对较低，并且不会添加不明确的代码或数据） ; 如果需要该信息，则必须明确传递它。

您可以传递字符串并保留大小信息，甚至通过复制而不是*通过引用*传递字符串的一种方法是将字符串包装在结构中，因此：

```
typedef struct
{
    char s[80] ;

} charArray_t ; 
```

然后

```
charArray_t s ;
int i = someFunction( &s ) ; 
```

定义`someFunction()`如下：

```
int someFunction( charArray_t* s ) 
{
    return sizeof( s->s ) ; 
} 
```

但是，这样做并不会真正获得太多收益-只是避免使用附加参数；实际上，您失去了一些灵活性，因为`someFunction()`现在只采用由 定义的固定数组长度`charrArray_t`，而不是任何数组。有时这样的限制很有用。这种方法的特点是您可以`pass by copy`这样做：

```
int i = someFunction( s ) ; 
```

然后

```
int someFunction( charArray_t s ) 
{
    return sizeof( s.s ) ; 
} 
```

因为与数组不同的结构可以通过这种方式传递。您同样可以通过副本返回。然而，它可能有些低效。然而，有时便利性和安全性超过了低效率。

# windows - 将段落的内容回显到文件中而不对段落进行任何修改？

> ID：14548151
> 
> 赞同：0
> 
> 时间：2013-01-27T14:05:52.010
> 
> 标签：windows, batch-file, key

如何在不对段落进行任何操作的情况下将段落回显到文件中。我的意思是换行符、空格、特殊字符等，所有的缩进应该是一样的。

我的 .bat 文件（包含 .ppk 文件的内容）

```
 echo (PuTTY-User-Key-File-2: ssh-rsa
Encryption: none
Comment: rsa-key-20130127
Public-Lines: 6
AAAAB3NzaC1yc2EAAAABJQAAAQBVYEVYbGluh1Ne6psUMsK4TRiqwN8GG+ImbsfC
qIYje3S7n3owtEUSDMEc5VvTZTEXk/CKHK6tXhGSNrExXKDhKE2HejY7TFtbc3vU
KM4OogxYeZs/0yBX/kVEu5+kIeZ0ZEsq/ve9/hnEVLZ3DFotUoDzzwdd4jAHUZv2
08xk5tTxodh+iO26RVPSaklZrFjbZkqCwPOnVZhK6JqE/7kZyIM+p5W8CH8XPG3r
fgU/R4BpwMNz+pYo2iiV3eZApI25lY+IcjclA5Amx1JdCM1zIvA6C8ABUbTMXsyG
RHkzdEYjw5+pBF8qLU8s8+M9sw0l5z58dP9t+vuYWz+JrsmL
Private-Lines: 14
AAABAECb4XNY9dcaTO3h+NED0aA6V9sqLDv5bN7QX9GUSdWpiMVWF0dzqeQlU96E
DiNvLBHXvPLlRer7FDdL+7am9kmGSIIy+JuTusG/LUaba4Cx+4E5bpEqJlBtZNoR
ceP9+oGYAYhSPvCkneCuz0VVdKytI1C4WJoS8+nc5LrJyxvsFGgVEIo5nadkABRV
eOLwotq2Mj/lLXHMbE5lB+9m9VNsWrBErNVCwNQdhQOyG1E39YcwBV+hB+Pyu41z
6EHxIRXQvbYNE2HjLvowrnX/9fFfx1kf51+WE+VbFQxrrZqE1p3y2S2kJkAopRio
KZBlNwrR6mwSLtRn4a6ZecKwVE0AAACBAJVV6O5leR0gl27DVqnXu6mhf6Xb8Ije
2JfvLCa73bgpFSYQ2EpxKTiSpZpM3kPpnC7Y0SvigstGHwze/OuCXYnzT/KDkBrs
NDPiuTSmzW3JxtGv1axpfRRt/PaRIHq6pCtyGxIc5A0RrTuSrPzZkHxFggkAYSMK
9YOi1sZhcVtlAAAAgQCSW1Pvq4zSjsUuGMc/w8T8mOOZG4Yllq7e9CSpTMeqeVHl
Vytm5+ujIyas/k/UGA8WQt3ZnD5uLF7tBRoaHf88oE00nXVnLlDeME3Jdbts84tE
1HB9RzwGE+BVknEiNcUjqhVcRqv6+pOClR+K5VOstqs/tmmMOA57c1481K/aLwAA
AIAQn9Fhg4Ih71uvber4RELcZCQrvRFsuASYHrgYBkzw17PTPQ9APv0B1nIPZ/u6
+jhou7qzR78yrYw0Po4ZJmmDt0CP/cZPWL4jQ6sM6on98D6TdKk7rE1c0WPn1Bta
ZtaxQqOku7eAfw745L9EjokekZjohjTFI9rSFdsCfa6dXw==
Private-MAC: 2e75877ab827b492b2a0a16c5019cd45f96e4990) > myfile.txt 
```

在我将其保存为 .bat 并执行后，上面的行不起作用

我想将该段落放在一个具有唯一名称的文件中，这样它就不会覆盖任何现有文件。我是否需要在每一行回显并继续附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:25:42.887

在最后的 EXIT /B 之后放置一个独特的文本标记，然后是您的段落。使用 FOR /F 和 FINDSTR 来定位唯一标记，然后使用 FOR /F 循环来处理标记之后的所有行。

有很多变化，每一种都有不同的限制。

这是最简单的形式，但也有最大的局限性。文本中描述了这些限制。

```
@echo off
setlocal disableDelayedExpansion
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText" "%~f0"'
) do if not defined skip set skip=%%N
>test.txt (
  for /f "usebackq skip=%skip% delims=" %%A in ("%~f0") do echo(%%A
)
type test.txt
exit /b

:::BeginText
This text will be exactly preserved with the following limitations:

  1) Each line will be terminated by CR LF even if original has only LF.

  2) Lines are limited in length to approximately 8191 bytes.

  3) Empty lines will be stripped.

; 4) Lines beginning with ; will be stripped.

  5) The text will be truncated at the first occurance of hex code 0x1A (Ctrl-Z).

Special characters like ^ & < > | etc. do not cause a problem 
```

一些奇怪的 FOR /F 选项语法消除了以开头的行的限制`;`

```
@echo off
setlocal disableDelayedExpansion
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText" "%~f0"'
) do if not defined skip set skip=%%N
>test.txt (
  for /f ^usebackq^ skip^=%skip%^ delims^=^ eol^= %%A in ("%~f0") do echo(%%A
)
type test.txt
exit /b

:::BeginText
This text will be exactly preserved with the following limitations:

  1) Each line will be terminated by CR LF even if original has only LF.

  2) Lines are limited in length to approximately 8191 bytes.

  3) Empty lines will be stripped.

  4) The text will be truncated at the first occurance of hex code 0x1A (Ctrl-Z).

Special characters like ^ & < > | etc. do not cause a problem
;Lines beginning with ; are preserved 
```

读取 FINDSTR /N 输出而不是直接读取文件会保留空行。但是引入了领先的新限制`:`。

```
@echo off
setlocal disableDelayedExpansion
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText" "%~f0"'
) do if not defined skip set skip=%%N
>test.txt (
  for /f "skip=%skip% tokens=1* delims=:" %%A in (
   'findstr /n "^" "%~f0"'
  ) do echo(%%B
)
type test.txt
exit /b

:::BeginText
This text will be exactly preserved with the following limitations:

  1) Each line will be terminated by CR LF even if original has only LF.

  2) Lines are limited in length to approximately 8191 bytes.

:::  3) Leading : will be stripped from each line.

Special characters like ^ & < > | etc. do not cause a problem
Empty lines are preserved!
;Lines beginning with ; are preserved. 
```

这个最终版本几乎和它一样好。延迟扩展必须打开和关闭以保留`!`可能出现在文本中的内容。

```
@echo off
setlocal disableDelayedExpansion
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText" "%~f0"'
) do if not defined skip set skip=%%N
>test.txt (
  for /f "skip=%skip% tokens=*" %%A in (
   'findstr /n "^" "%~f0"'
  ) do (
    set "line=%%A"
    setlocal enableDelayedExpansion
    echo(!line:*:=!
    endlocal
  )
)
type test.txt
exit /b

:::BeginText
This text will be exactly preserved with the following limitations:

  1) Each line will be terminated by CR LF even if original has only LF.

  2) Lines are limited in length to approximately 8191 bytes.

Special characters like ^ & < > | etc. do not cause a problem.
Empty lines are preserved!
;Lines beginning with ; are preserved.
:::Leading : are preserved. 
```

# git - git中的对象目录有什么用？

> ID：14548153
> 
> 赞同：3
> 
> 时间：2013-01-27T14:05:52.897
> 
> 标签：git

我目前正在学习 git，并且我有一个 git repo，我可以在其中看到一个`.git`目录。

在该目录中，我可以看到某些我可以理解的文件和文件夹。

但是有一个目录名为`objects`. 我想不出它们是干什么用的。

例如我的`objects`目录有：

```
04  4a  5f  7a  e9  f2  info  pack 
```

例如，如果看到内容，`04`我可以看到一个名为`12697515217f658b245149a986aba32fa98f38`. 我看不到它的内容，它被加密了。

谁能说出这些`objects`文件夹的用途？为什么大哈希不喜欢`12697515217f658b245149a986aba32fa98f38`？

无论如何，我都可以解密它的内容`12697515217f658b245149a986aba32fa98f38`并真正了解 git 是如何发挥它的魔力的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:14:26.037

在`.git/object`git 存储中，它有自己的内部 blob 仓库，全部由 SHA 索引。

> 为什么大哈希不喜欢`12697515217f658b245149a986aba32fa98f38`？

它是 blob 树的某种表示形式。不同的文件系统以这种方式保存所有 blob 目录更快、更舒适。

> 无论如何，我都可以解密它的内容`12697515217f658b245149a986aba32fa98f38`并真正了解 git 是如何发挥它的魔力的？

我真的希望你不能解密它（它只是被压缩，而不是像@knittl 在评论中注意到的那样加密）。

如果您对目录中的商店感兴趣，`.git`请查看该文章[http://gitready.com/advanced/2009/03/23/whats-inside-your-git-directory.html](http://gitready.com/advanced/2009/03/23/whats-inside-your-git-directory.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T08:07:57.430

objects 目录包含所有存储库文件。这是 git 存储文件备份、存储库中的提交等的地方。这些文件都是加密和压缩的，它们看起来不会太多。git中有四种对象。

1.  犯罪
2.  树
3.  斑点
4.  注释标签

为了理解这些，我们需要知道什么是散列函数。散列函数是将任意大小的输入数据映射到固定大小的输出值的函数。

例如：

```
"I love StackOverflow" --> Hashing Function
                                  |
              dd76fc997fe194a71fe545fb51ff622762a293ff 
```

学习的要点是哈希函数总是会`dd76fc997fe194a71fe545fb51ff622762a293ff`在内容为 时给出输出`"I love StackOverflow"`。

因此，我们可以推断散列函数是确定性的。您可以检查任何内容的哈希输出，也可以`"I love StackOverflow"` 在存储库中使用以下命令：

```
echo "I love StackOverflow" | git hash-object --stdin 
```

来到你是否可以解密哈希码的问题。是的，有办法做到这一点。首先，您必须存储内容的哈希值。例如，

```
echo "I love StackOverflow" | git hash-object --stdin -w 
```

通过在末尾添加 -w 我们的哈希将被存储，我们可以通过

```
git cat-file -p dd76fc997fe194a71fe545fb51ff622762a293ff 
```

现在好奇为什么长哈希码甚至存在于 git 世界中，因为 git 负责查看存储库中存在的任何文件中所做的所有更改。因此，为了跟踪这些更改，git 分配了一个来自散列函数的长散列码，以简单地跟踪我们存储库中所做的每一个微小更改。

存储库中任何文件的每个细微更改都将被赋予一个哈希码，文件的内容将存储在称为“ **blob** ”的空间中。Blob 不会表示文件名，而只会包含带有哈希码的文件内容。

# java - 如何使用 Servlet 创建 Json

> ID：14548160
> 
> 赞同：0
> 
> 时间：2013-01-27T14:06:28.337
> 
> 标签：java, json, servlets

如何使用 servlet 创建像此代码（见下文）的 JSON 数组？现在我在 String 中手动编写代码并将其转换为 JSON 数组，但我总是得到一个错误：

错误：

```
Error parsing data org.json.JSONException: Expected literal value at character 982 of

{
    "question": [
        {
            "text": "",
            "answers": [  { "a1": "" }, { "a2": "" }, { "a3": "" } ],
            "correctAnswers": [ { "ra1": "" }, { "ra2": ""  }, { "ra3": "" } ],
            "explanation": ""
        },
    .
    .
    .
    ]
} 
```

这是 servlet 代码：有些部分是德文的，如果您在理解上有问题，请见谅

```
StringBuffer sb = new StringBuffer();
        ArrayList<Integer> kapitel = new ArrayList<Integer>();

        String text = "false";
        // boolean check = false;

        for (int i = 0; i < 14; i++) {
            if ("1".equals(request.getParameter("k" + (i + 1))))
                kapitel.add(i + 1);
        }

        String arrayFragen[][] = null;
        String arrayAntworten[][] = null;
        String[] antwortSeatze = null;
        String[] richtigeAntwortSeatze = null;

        Main main = new Main();
        Datenbank db = new Datenbank();

        main.frageAntworten(kapitel);

        arrayAntworten = main.antworten;
        arrayFragen = main.fragen;

        int zeahler = 1;
        String frageId;
        sb.append("{");
        sb.append("\n\"frage\": [");

        for (int i = 0; i < arrayFragen.length - 1; i++) {
            frageId = arrayFragen[i][0];

            sb.append("\n{");
            sb.append("\n\"text\": \"" + arrayFragen[i][1] + "\", ");
            sb.append("\n\"antworten\": [");

            antwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                    arrayAntworten)];
            int x = 0;
            for (int j = 0; j < arrayAntworten.length; j++) {
                if (arrayAntworten[j][0].equals(frageId))
                    antwortSeatze[x++] = arrayAntworten[j][1];
            }
            zeahler = 1;
            for (int j = 0; j < antwortSeatze.length - 1; j++) {
                sb.append("\n{\"a" + zeahler++ + "\": \"" + antwortSeatze[j]
                        + "\"}, ");
            }

            // letze Antwortmöglichkeit
            sb.append("\n{\"a" + zeahler++ + "\": \""
                    + antwortSeatze[antwortSeatze.length - 1] + "\"} ");
            sb.append("\n],");

            richtigeAntwortSeatze = new String[db.arraySizeAntwortenSeatze(
                    frageId, arrayAntworten)];

            // Richige Antworten
            sb.append("\n\"richtigeantworten\": [");
            antwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                    arrayAntworten)];
            int y = 0;
            for (int j = 0; j < richtigeAntwortSeatze.length; j++) {
                if (arrayAntworten[j][0].equals(frageId))
                    if (arrayAntworten[j][2].equals("false"))
                        antwortSeatze[y++] = "null";
                if (!(arrayAntworten[j][2].equals("false")))
                    antwortSeatze[y++] = arrayAntworten[j][1];
            }
            zeahler = 1;
            for (int j = 0; j < antwortSeatze.length - 1; j++) {
                sb.append("\n{\"ra" + zeahler++ + "\": \"" + antwortSeatze[j]
                        + "\"}, ");

                // letze Richtige Antwortmöglichkeit
            }
            sb.append("\n{\"ra" + zeahler++ + "\": \""
                    + antwortSeatze[antwortSeatze.length - 1] + "\"} ");
            sb.append("\n],");

            richtigeAntwortSeatze = new String[db.arraySizeAntwortenSeatze(
                    frageId, arrayAntworten)];

            sb.append("\n\"erklaerung\": \"" + arrayFragen[i][2] + "\", ");
            sb.append("\n},");
        }

        // Letzte Frage
        frageId = arrayFragen[arrayFragen.length - 1][0];

        sb.append("\n{");
        sb.append("\n\"text\": \"" + arrayFragen[arrayFragen.length - 1][1]
                + "\", ");
        sb.append("\n\"antworten\": [");

        antwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                arrayAntworten)];
        int x = 0;
        for (int j = 0; j < arrayAntworten.length; j++) {
            if (arrayAntworten[j][0].equals(frageId))
                antwortSeatze[x++] = arrayAntworten[j][1];
        }
        zeahler = 1;
        for (int j = 0; j < antwortSeatze.length - 1; j++) {
            sb.append("\n{\"a" + zeahler++ + "\": \"" + antwortSeatze[j] + "\"},");
        }
        // letze Antwort möglichkeit
        sb.append("\n{\"a" + zeahler++ + "\": \""
                + antwortSeatze[antwortSeatze.length - 1] + "\"} ");
        sb.append("\n],");

        richtigeAntwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                arrayAntworten)];

        sb.append("\n\"richtigeantworten\": [");
        antwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                arrayAntworten)];
        int y = 0;
        for (int j = 0; j < richtigeAntwortSeatze.length; j++) {
            if (arrayAntworten[j][0].equals(frageId))
                if (arrayAntworten[j][2].equals("false"))
                    antwortSeatze[y++] = "null";
            if (!(arrayAntworten[j][2].equals("false")))
                antwortSeatze[y++] = arrayAntworten[j][1];
        }
        zeahler = 1;
        for (int j = 0; j < antwortSeatze.length - 1; j++) {
            sb.append("\n{\"ra" + zeahler++ + "\": \"" + antwortSeatze[j]
                    + "\" },");
        }

        // letze Richtige Antwortmöglichkeit
        sb.append("\n{\"ra" + zeahler++ + "\": \""
                + antwortSeatze[antwortSeatze.length - 1] + "\"} ");
        sb.append("\n],");

        richtigeAntwortSeatze = new String[db.arraySizeAntwortenSeatze(frageId,
                arrayAntworten)];

        sb.append("\n\"erklaerung\": \"" + arrayFragen[arrayFragen.length - 1][2]
                + "\", ");
        sb.append("\n}");

        sb.append("\n]");
        sb.append("\n}");

        text = sb.toString();

        response.getWriter().print(text);
        System.out.println(text); 
```

安卓部分：

```
private  class JSONParser extends AsyncTask<URL, String, String> {

        @Override
        protected String doInBackground(URL... url) {
            InputStream is = null;
            String json = "";

            // VERBINDUNGSAUFBAU
            try {
                URLConnection connection = url[0].openConnection();
                HttpURLConnection http = (HttpURLConnection)connection;
                int response = http.getResponseCode();
                if (response == HttpURLConnection.HTTP_OK) {
                is = http.getInputStream();}

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            // CONVERTIERUNG VON INPUTSTREAM ZU STRING

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line);
                }
                is.close();
                json = sb.toString();
            } catch (Exception e) {
                Log.e("Buffer Error", "Error converting result " + e.toString());
            }
            return json;

//          InputStream is =  m.getData(url[0]);
//          String json = m.InputstreamToString(is);
//          return json;
        }

        protected void onPostExecute(String json) {
             TextView fragenNr = (TextView)
            findViewById(R.id.FragenText);
             fragenNr.setText(json);

            JSONObject jObj = null;
            try {
                jObj = new JSONObject(json);
            } catch (JSONException e) {
                Log.e("JSON Parser", "Error parsing data " + e.toString());
            }

            try {

                frage = jObj.getJSONArray(TAG_FRAGE);

                for (int i = 0; i < frage.length(); i++) {
                    JSONObject f = frage.getJSONObject(i);

                    // Storing each json item in variable
                    String text = f.getString(TAG_TEXT);
                    String erklaerung = f.getString(TAG_ERKLAERUNG);

                    HashMap<String, Object> map = new HashMap<String, Object>();
                    map.put(TAG_TEXT, text);
                    map.put(TAG_ERKLAERUNG, erklaerung);

                    ArrayList<String> antwortenArray = new ArrayList<String>();

                    JSONArray antworten = f.getJSONArray(TAG_ANTWORTEN);
                    for (int j = 0; j < antworten.length(); j++) {
                        JSONObject a = antworten.getJSONObject(j);
                        String tag = TAG_ANTWORTEN_a + (j + 1);
                        antwortenArray.add(a.getString(tag));
                        map.put(tag, antwortenArray.get(j));

                    }

                    map.put("anzahlAntworten", antworten.length());

                    ArrayList<String> richtigeantwortenArray = new ArrayList<String>();
                    JSONArray richtigeantworten = f
                            .getJSONArray(TAG_RICHTIGEANTWORTEN);
                    for (int k = 0; k < richtigeantworten.length(); k++) {
                        JSONObject ra = richtigeantworten.getJSONObject(k);
                        String tag = TAG_RICHTIGEANTWORTEN_ra + (k + 1);
                        richtigeantwortenArray.add(ra.getString(tag));
                        map.put(tag, richtigeantwortenArray.get(k));

                    }
                    map.put("anzahlRichtigerAntworten",richtigeantworten.length());
                    fragenUndAntworten.add(map);
                    fragenListe.add(text);

                }

            } catch (JSONException e) {
                e.printStackTrace();
            }
            View weiterButton = findViewById(R.id.weiterButton);
            weiterButton.setOnClickListener(Fragen.this);
            weiterButton.performClick();

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:35:51.957

不要尝试自己生成 JSON。生成数据结构，并使用 JSON 解析器/生成器将该数据结构实际转换为 JSON 字符串。生成器将负责为您转义字符。有几十个免费的 JSON API。有关列表，请参见[http://json.org/](http://json.org/)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T14:15:06.317

使用 json.jar 创建 json 对象或数组...它具有创建和处理 json 的方法...

# jquery - HTML 页面转换

> ID：14548164
> 
> 赞同：0
> 
> 时间：2013-01-27T14:06:54.877
> 
> 标签：jquery, html, css

在[http://canvas.co](http://canvas.co)网站上，页面无缝更改

在开发者视图中查看代码；当我更改页面时，代码本身似乎甚至都没有重新加载，就好像包含所有内容的元素只是加载新内容，而其他元素保持不变

我注意到的另一件事是，当我查看源代码时，实际上那里的信息很少。如果我搜索浏览器在页面上呈现的一些文本，它不在源代码中。（虽然我很确定不是）感觉好像我正在查看 iframe 的源而不是实际文档

我认为它可能只是一个长页面 - 但事实并非如此，我不想这样做，因为我希望我的内容对每个“页面”都有不同的 URL

任何想法正在发生什么以及我如何也可以实现这种无缝的页面更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:17:14.387

几乎看不到代码的原因是大部分代码似乎是通过外部文件引入的（如果你愿意的话，JavaScript “包含”）。

至于转换，该站点是所谓的“基于状态”的站点，其中站点本身包含在 1 个页面中，并且所有内容都一次加载。使用 jQuery 动画很容易实现这一点，因为您只需加载所有内容，隐藏除主页内容之外的所有内容，然后在用户使用页面时为主页设置动画，并在其中设置目标页面。

希望这可以帮助！

# javascript - 如何在 JavaScript 中设置语言环境，例如 toLocaleUpperCase()？

> ID：14548166
> 
> 赞同：9
> 
> 时间：2013-01-27T14:06:57.467
> 
> 标签：javascript, string, internationalization, locale, turkish

我想使用 JavaScript toLocaleUpperCase() 方法来确保土耳其语的大写正确。但是，我不能确定土耳其语是否会被设置为用户的语言环境。

如果我确定字符串是土耳其语，现代浏览器中是否有办法在运行时设置语言环境？

（我在考虑土耳其语时遇到了这个问题，但实际上它可以是任何其他语言。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:59:47.540

那里实际上并没有什么东西，但我遇到了这个[JavaScript setlocale 函数](http://phpjs.org/functions/setlocale/)脚本，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T14:48:35.073

不幸的是，您无法在运行时设置语言环境。但是，所有的希望都不会丢失，npm 上有许多不错的库供您使用。例如，查看[https://www.npmjs.com/package/upper-case](https://www.npmjs.com/package/upper-case)和[https://www.npmjs.com/package/lower-case ，它也适用于许多其他语言。](https://www.npmjs.com/package/lower-case)

如果这太多了，您可以推出自己的简单库：

```
var ALL_LETTERS_LOWERCASE = 'abcçdefgğhıijklmnoöprsştuüvyz';
var ALL_LETTERS_UPPERCASE = 'ABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZ';

function toLowerCaseLetter(letter) {
  letter_index = ALL_LETTERS_UPPERCASE.indexOf(letter);
  return ALL_LETTERS_LOWERCASE[letter_index];
}

function toLowerCase(my_str) {
  var lower_cased = ''
  for (letter of my_str) {
      lower_cased += toLowerCaseLetter(letter);
  }
  return lower_cased;
}

console.log(toLowerCase('ÇDEFGĞHIİJKLMNOÖPRSŞTUÜ'))
```

大写版本非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T13:02:25.073

此选项在 2013 年可能不存在，但可能会帮助新访问者了解此主题：

根据 MDN（[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLocaleUpperCase](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLocaleUpperCase)），函数 toLocaleUpperCase 采用可选参数“locale”。

设置正确的语言标签本身就是一个主题（[https://www.w3.org/International/articles/language-tags/](https://www.w3.org/International/articles/language-tags/)）。最简单的例子看起来像这样

```
'selam dünya'.toLocaleUpperCase('tr'); // SELAM DÜNYA 
```

# java - 用 Linkedhashmap VALUE 替换 ArrayList 项

> ID：14548167
> 
> 赞同：0
> 
> 时间：2013-01-27T14:07:05.167
> 
> 标签：java, arraylist, linkedhashmap

我有一个名为 numericValueMap 的 Linkedhashmap，其参数为**String,String**：

```
{a=1,b=1,c=2,d=3,e=5} 
```

我有一个名为 equation 的 Arraylist：

```
{ e, -, a, +, b, -, c, *, d, +, b} 
```

我想要做的是用 Linkedhashmap 中的正确值替换 Arraylist 中的项目。到目前为止，这是我的尝试：

```
for (final String key: numericValueMap.keySet()) {
for (int i = 0, n = equation.size(); i < n; i++) {
String algebraItems = (String) equation.get(i);

if(algebraItems.contains(key)) {
    String newNum = algebraItems.replace(algebraItems, ?);
    equation.set(i,newNum);

  }
 }
 } 
```

代码一直工作到并包括将 Arraylist 与相应的 Linkedhashmap Key 进行比较的点。但是，以我目前的知识，我无法用正确的值替换 Arraylist 项。关于我必须使用什么代码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:12:59.790

如果我理解正确的话——

```
int index =0;
if((index = arrayList.get(element))>=0)
    arrayList.set(index,replaceElement); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:32:47.603

通过迭代 LinkedHashMap 并获得对每个项目 KEY 和 VALUE 的访问权限，如下所示：

```
for (Iterator<Entry<String, String>> it = numericValueMap.entrySet().iterator(); it.hasNext();) {
            Entry<String, String> e = it.next();
            String key = e.getKey();
            String value = e.getValue(); 
```

# jquery - MVC 4 和 jQuery getJSON

> ID：14548170
> 
> 赞同：1
> 
> 时间：2013-01-27T14:07:17.507
> 
> 标签：jquery, asp.net-mvc-4, getjson

我必须在大学的一个项目中实施某种实时搜索。我有以下代码：MVC 动作：

```
[Authorize]  
[AcceptVerbs(HttpVerbs.Get)]  
[InitializeSimpleMembership]
public JsonResult Search(string term)  
{  
    var data = ... // get matching item  
    return Json(data, JsonRequestBehavior.AllowGet);  
} 
```

视图中的脚本：

```
$(document).ready(function() {  
    $("#searchText").keyup(function() {  
        $.getJSON('/Search/Search', { "term": $(this).val() },  function(result) {   
            alert(result);    
            $("#searchText").val(result.d);  
        });  
    });  
}); 
```

控制器动作被调用并返回匹配的对象，但 javascript 函数从未被调用，没有警报框，什么都没有。可以做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:29:09.030

您的数据的 JSON 序列化可能存在问题。如果您尝试直接序列化可能包含循环引用的 EF 域模型，则通常会发生这种情况……正确的方法当然是使用视图模型。

为了跟踪问题使用[`FireBug`](http://getfirebug.com/)并查看`Network`选项卡以查看 AJAX 调用的确切请求/响应。在那里，您将能够看到服务器返回的响应，其中将包含错误消息。

# jquery - 动态追加数据到 div

> ID：14548173
> 
> 赞同：2
> 
> 时间：2013-01-27T14:07:20.033
> 
> 标签：jquery, dom, append, each

我正在创建八个 div，我希望使用这些 div 类将它们附加到一个和一个到八个其他 div：

```
var foo1 = "<span class='fooClass'>Foo text1</span>";
var foo2 = "<span class='fooClass'>Foo text2</span>";
var foo3 = "<span class='fooClass'>Foo text3</span>";
var foo4 = "<span class='fooClass'>Foo text4</span>";
var foo5 = "<span class='fooClass'>Foo text5</span>";
var foo6 = "<span class='fooClass'>Foo text6</span>";
var foo7 = "<span class='fooClass'>Foo text7</span>";
var foo8 = "<span class='fooClass'>Foo text8</span>";

$('.fooData').each(function(i) {
    $('this').append('foo' + i);
}); 
```

.fooData div（同样，其中也有八个）是在创建我要附加的 div 之前创建的。

然而这不起作用（即没有数据被添加到.fooData-divs）。我究竟做错了什么？

**注意：**如果重要，.fooData-divs 也有其他类，例如：

```
<div class="color4 fooData leftSide"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:12:06.630

最好使用`array`而不是使用变量并评估它们的名称。

```
foo = [];
var foo[0] = $("<span class='fooClass'>Foo text1</span>");
var foo[1] = $("<span class='fooClass'>Foo text2</span>");

$('.fooData').each(function(i) {
    $(this).append(foo[i]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:12:32.730

此脚本中的几乎所有内容都是错误的。的索引以`each`开头，`0`并且您没有`foo0`定义变量。除此之外，您将一个**字符串**附加到 fooData 元素，而不是您定义的变量。此外`$('this')`（又是一个**字符串**）将不起作用。

# java - 在java中用一个字符替换多个单个字符？

> ID：14548175
> 
> 赞同：1
> 
> 时间：2013-01-27T14:07:28.980
> 
> 标签：java, replace

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T14:10:59.340

您可能希望对这个问题使用[更通用的解决方案](http://www.drillio.com/en/software-development/java/removing-accents-diacritics-in-any-language/)：

```
import java.text.Normalizer;
import java.text.Normalizer.Form;

// ...

public static String removeAccents(String text) {
    return text == null ? null
        : Normalizer.normalize(text, Form.NFD)
            .replaceAll("\\p{InCombiningDiacriticalMarks}+", "");
} 
```

这会从任何脚本中的任何字母中删除所有变音符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T14:08:57.117

非常相似的东西：

```
String output = input.replaceAll("[àáạảãâầấậẩẫăằắặẳẵ]","a"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:08:42.543

```
str.replace("Your character sequence" , "a"); 
```

# javascript - Windows Phone 8 IE 滚动无法正常工作

> ID：14548179
> 
> 赞同：2
> 
> 时间：2013-01-27T14:07:54.347
> 
> 标签：javascript, windows-phone-8

我有一些 javascript，我用来关闭屏幕。作为其中的一部分，我希望页面滚动到顶部，所以我正在使用`window.scrollTo(0, 0)`适用于 android 和 iphone 浏览器的页面，但 windows 8 手机没有滚动......

```
var dismissWelcome;
dismissWelcome = function(e) {
  var welcome;
  if (((e != null ? e.stopPropagation : void 0) != null) && ((e != null ? e.preventDefault : void 0) != null)) {
    e.stopPropagation();
    e.preventDefault();
  }
  welcome = document.getElementById('welcome');
  welcome.style.display = 'none';
  window.scrollTo(0, 0);
};
addEvent('dismiss-welcome', 'touchstart', dismissWelcome); 
```

我如何才能`window.scrollTo(0, 0)`在 Windows 8 手机（最好是所有已知设备）上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:50:31.837

我把它设置为超时，它工作正常。必须与被移除的 dom 对象有关。可能有其他方法可以解决这个问题，但这对我来说很好。

```
var dismissWelcome;
dismissWelcome = function(e) {
  var welcome;
  if (((e != null ? e.stopPropagation : void 0) != null) && ((e != null ? e.preventDefault : void 0) != null)) {
    e.stopPropagation();
    e.preventDefault();
  }
  welcome = document.getElementById('welcome');
  welcome.style.display = 'none';
  window.scrollTo(0, 0);
  // do it again, after the welcome page has finished being removed...
  setTimeout(function() {
    window.scrollTo(0, 0);
  }, 200);
};
addEvent('dismiss-welcome', 'touchstart', dismissWelcome); 
```

# iphone - 列出目录下的文件，不包括隐藏文件且不经过子文件夹

> ID：14548180
> 
> 赞同：0
> 
> 时间：2013-01-27T14:07:56.903
> 
> 标签：iphone, ios, objective-c

有没有办法在满足以下条件`NSLog`的文件夹（命名`downloads`位于我的应用程序的文档目录下）下列出（）文件名：

1）排除隐藏文件（如.DS_Store文件）

2）不要在子文件夹中搜索（我不希望枚举器是递归的）。

非常感谢你。

**编辑：**

3) 不要列出子文件夹的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:14:55.157

将 NSFileManager 的枚举与选项一起使用并传递适当的标志，它们是`NSDirectoryEnumerationSkipsHiddenFiles`和`NSDirectoryEnumerationSkipsSubdirectoryDescendants`

这是来自文档： ![在此处输入图像描述](../Images/2ab0bccf958e903dfa971aa12c1debcc.png)

# c# - 写应用程序时，先完成功能，再优化？

> ID：14548181
> 
> 赞同：1
> 
> 时间：2013-01-27T14:08:14.477
> 
> 标签：c#, .net, performance

Donald Knuth 说过“过早的优化是万恶之源”，我逐渐相信了这句话。

所以我可以说写应用程序时，我们应该专注于完成功能，**而不考虑性能问题，直到我们不能忍受低性能**？

恐怕如果我多次使用错误的模式会减慢应用程序的速度，因此修复问题可能会花费大量时间。我应该在广泛使用之前测试模式的性能吗？

我提到的模式可能是指使用 Linq 或 for-loop，使用`Delegate.BeginInvoke`, `Parallel.For`, or `Task<T>`，处理`IDisposable`或忽略它等。

欢迎任何参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:23:38.537

我同意 Knuth 引用的关于过早优化的精神，因为它会导致代码在开发初期变得过于复杂和笨拙，从而影响代码的质量和完成项目所需的时间。

我对您的帖子有两个担忧：

您应该了解您的函数/算法在理论上是否可以扩展/执行以满足您的要求（例如，您的解决方案的 O 复杂性 -> [http://en.wikipedia.org/wiki/Analysis_of_algorithms](http://en.wikipedia.org/wiki/Analysis_of_algorithms)）

您提到的模式实际上是具体的实现项，其中只有一些与性能有关，例如

*   Parallel.For/Task - 这些对于在多核系统上获得性能很有用
*   IDisposable - 这是与资源管理相关的，而不是要避免的事情
*   Linq vs. for-loop - 这可以是一个点优化，但您需要对您的用例进行基准测试/评估以确定哪个最适合您（例如，在某些情况下，Linq 可以移动到 PLinq 以实现并行性）
*   Delegate.BeginInvoke - 线程同步的非可选组件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:40:25.380

永远不要在不关心性能的情况下编写代码。
性能代码直到代码变得更复杂（例如并行）。
但在 C# 5.0 中，甚至并行并不复杂。
如果您有一些您认为可能需要优化的电话，请为此进行设计。
设计代码，以便优化不会更改方法的接口。

有速度、内存、并发性（如果是服务器应用程序）、可靠性、安全性和支持。
干净的代码通常是最好的代码。

在您知道自己有性能问题之前不要发疯，但不要马虎。

在回答关于 SO 的另一个问题时，我告诉那个人他们不需要 DataTable，DataReader 会更快，内存更少。他们的反应是它仍然以每秒 1/2 的速度运行，我不在乎。对我来说，这是草率的代码。

@JonhSanders 我不同意“直到代码变得更复杂之前的性能代码”会导致错误或不完整。对我来说，性能编码与优化不同。首先传递任何东西，但丢弃我为性能编写的代码 - 没有什么奇异的，只是最佳实践。在我看到可能需要返回并优化的潜在热点的地方，我在编写时会考虑到优化。PS我同意结束这个问题。

# iphone - 使用 coreplot 的 iOS 内存泄漏

> ID：14548186
> 
> 赞同：1
> 
> 时间：2013-01-27T14:08:43.823
> 
> 标签：iphone, ios, xcode, memory-leaks, core-plot

我在设置条形图、点击主页按钮并返回图表后收到内存警告（它在启动备份后重新创建）。我试图在 Instruments 中找到内存泄漏，但我不确定我在寻找什么，下面是 Instruments 的屏幕截图。

![在此处输入图像描述](../Images/c8b9ba847ca590bb57bbcf2ecbd1c55d.png)

谁能帮我吗？

# php - CakePHP 和 Composer 安装——如何将它用于 CakePHP 2.x 应用程序的插件和供应商依赖项

> ID：14548200
> 
> 赞同：0
> 
> 时间：2013-01-27T14:10:56.687
> 
> 标签：php, cakephp, composer-php

`git submodule update`对于 Jenkins @ CloudBees 的插件依赖项，我遇到了一些奇怪的问题。

所以我将一些（如果不是）我所有的依赖项`git submodule`从`Composer`.

我遇到了这个名为`composer installers`. [https://github.com/composer/installers](https://github.com/composer/installers)

我想知道如何将它用于插件和供应商依赖项。

我对 Composer 不熟悉，即使在阅读了文档之后，我也不确定怎么说，将此依赖项专门放在 Plugin/xxx

我知道如何使用`git submodule add`.

所以任何人都知道我应该如何使用 Composer 或更好的 Composer 安装程序，请告诉我。

为了方便起见，我想使用 2 个实际示例。

*   [https://github.com/milesj/Utility](https://github.com/milesj/Utility)将被放置在我的 app/Plugin/Utility 中
*   [https://github.com/simkimsia/php-gd-simpleimage](https://github.com/simkimsia/php-gd-simpleimage)将被放置在我的 app/Vendor/SimpleImage 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:41:17.593

CakePHP 有一个 Composer 插件，其中有一篇关于它的[Backery 文章](http://bakery.cakephp.org/articles/uzyn/2012/06/20/composer_plugin_for_cakephp)。代码在 Github 上可用： [https ://github.com/uzyn/cakephp-composer](https://github.com/uzyn/cakephp-composer)

它正在积极开发中（上次提交是昨天），但在我早期使用它时（今天），它似乎按预期工作。

[Packagist](http://packagist.org)有大量的 Compose-ready 库。其中一些与 CakePHP 相关。有些不是。

您列出的两个示例不在 Packagist 中（还没有？）。值得庆幸的是，Composer 使直接使用 Git（和其他 VCS）存储库成为可能。对于milesj/Utility 插件（有一个`composer.json`文件），您需要按照 Composer 文档中的[Repositories](http://getcomposer.org/doc/05-repositories.md#loading-a-package-from-a-vcs-repository)指南进行正确设置。

对于 php-gd-simpleimage 存储库，您需要编写一个`composer.json`文件，然后按照存储库步骤进行操作。

Composer 最令人困惑的事情之一`composer.json`是库和“项目”的系统/文件格式相同。真的，它们对 Composer 来说都是一样的。但是，在您的“项目”存储库中，您只是概述了需求（通常），而不是使您的应用程序可通过 Composer 安装。无论它们的位置如何，这两个`composer.json`文件都用于同一件事：跟踪和安装依赖项。你可以把它想象成一棵树，你的项目（它是`composer.json`）在顶部，然后是一个分支依赖树。

快乐作曲！

# codeigniter - XSS如何过滤变量？

> ID：14548202
> 
> 赞同：0
> 
> 时间：2013-01-27T14:11:00.630
> 
> 标签：codeigniter, codeigniter-2

我正在使用带有友好 URL (.htaccess) 的 Codeigniter 2.1.3。

在控制器中：

```
public function confirm($key) {
   var_dump($this->input->get());
} 
```

但链接 _http://site.com/confirm/12345 返回“布尔假”。

如何在 URL 中启用查询字符串，或者如何过滤 $key ？

我的.htaccess：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|robots\.txt|files|templates)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:17:58.687

您收到`key`作为函数参数，因此您可以这样做：

```
public function confirm($key) {
   echo $key;
} 
```

`http://site.com/confirm/12345`会回声`12345`。

可以通过`$config['permitted_uri_chars']`in过滤其中的字符`config.php`。

如果你想接收它作为`GET`参数并想对其进行XSS过滤，URL需要是

`http://site.com/confirm?key=12345`在你的控制器中

```
public function confirm() {
   echo $this->input->get('key', TRUE);   // true implies XSS filtering
} 
```

第二种方法需要`$config['enable_query_strings']`设置为`TRUE`.

# javascript - 在 HTML 上将多个写入同一个 ID

> ID：14548203
> 
> 赞同：0
> 
> 时间：2013-01-27T14:11:03.753
> 
> 标签：javascript, html

有人知道在我显示 HTML 页面后是否可以访问特定 ID (getElementById)，并多次更改它的值？

我想向客户端显示一些字符串并根据程序的进度多次更改它，但我不能，它最近才写信给我。

例如：

```
<script type="text/javascript">
  function foo(){
   for(var i = 0; i<10000; i++){
     document.getElementById('myTag').innerHTML = i;
   }
  }
</script> 
```

在这种情况下，我看不到数字运行。我只看到最后一个。

如果我将警报放入循环中 - 值会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:40:06.303

据我了解您的问题，您想要从 0 到 10000 的计数？你想在屏幕上看到进展吗？你可以做这样的事情：

[http://jsfiddle.net/camus/ayJFM/](http://jsfiddle.net/camus/ayJFM/)

```
var interval = 500;//milliseconds
var foo = (function () {
    var i = 0;
    var func = function () {

        if (i < 10000) {
            document.getElementById("myTag").innerHTML = i;
            i += 1;
            setTimeout(func, interval);
        }
    };
    return func;
})();

setTimeout(foo, interval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:29:24.883

您快到了。您做错的唯一一件事是替换 innerHTML 内容而不是添加它。改变这个：

```
document.getElementById('myTag').innerHTML = i; 
```

对此：

```
document.getElementById('myTag').innerHTML += i; 
```

* * *

附加/替代答案：

等待。我刚刚重读了您的问题，并意识到还有另一种解释方式。你问的方式很模糊，所以我把上面的答案保留原样。

处理 for 循环时看不到“运行数字”的原因是您误解了 javascript 在浏览器中的工作方式。

浏览器的事件循环运行如下：

```
1\. Fetch content
2\. Run javscript
3\. Render content
then repeat forever 
```

这就是javascript的工作原理。因此，像您正在做的那样运行一个简单的 for 循环。浏览器执行脚本，直到没有其他内容可以执行（步骤 2）。一旦 javascript 完成执行，它将开始渲染过程（第 3 步）。显然，此时的值`i`是最终值，因此您只能看到最终值。

浏览器从不中断运行 javascript 来呈现/更新页面。那么，人们如何实现倒数计时器等呢？他们通过安排一段 javascript 在事件循环的下一次迭代中执行来做到这一点。也就是说，让浏览器进入第3步，并在浏览器再次进入第2步的适当时刻运行他们想要的脚本。

Javascript 基本上提供了两种方法来做到这一点：setTimeout 和 setInterval。

setTimeout 的工作原理是这样的：

```
step 1\. nothing to do
step 2\. setTimeout schedules a piece of javascript to run at a later time
        Note that the javascript does not execute yet until setTimeout
        expires.
step 3\. let the browser update the page
many, many loops of steps 1-3
step 2 (some time later).
        setTimeout expires and the piece of javascript executes
step 3\. let the browser update the page 
```

所以，要得到你想要的效果，你需要这样做：

```
function foo(){
  var i = 0;
  var update = function(){
    document.getElementById('myTag').innerHTML = i;
    i++;
    if (i<10000) {
      setTimeout(update,100);
    }
  };
  update();
} 
```

# backbone.js - 骨干 pushstate 历史记录不起作用

> ID：14548204
> 
> 赞同：0
> 
> 时间：2013-01-27T14:11:04.580
> 
> 标签：backbone.js, browser-history, pushstate, backbone-routing

我正在使用backbone.js 路线，我正在努力创造历史。这是我的代码：

```
$(function() {  

    var AppRouter = Backbone.Router.extend({
        routes: {
           "/": "initHome",
           "home": "initHome",
           "projects": "initProjects",
           "project/:id" : "initProject"
        }
    });

    // Instantiate the router
    var app_router = new AppRouter;

    app_router.on('route:initProject', function (id) {
        // Note the variable in the route definition being passed in here
          getContent("project",id);
    });

    app_router.on('route:initProjects', function () {
          getContent("projects");
    });

    app_router.on('route:initHome', function () {
          getContent("home");
    });

    // SINGLE PAGE MAGIC
    $(document).on("click",".links",function(e) {
        var href = $(this).attr("href");
        var url =  lang + "/" + href;    
            page = $(this).attr("data-id");
        var param = $(this).attr("data-param");         
        if (typeof(param) == 'undefined') { param = ""; }  

        if(activepage != href && !main.hasClass("loadingPage")){    
            loader.show();  
            firstInit = false;
            activepage = href;
            res = app_router.navigate(url, true);
            getContent(page,param);
        }   
        return false;                           
    });

    Backbone.history.start({pushState: true, root: "/karlin/"});

}); 
```

推送状态在单击时工作正常，但当我尝试浏览器中的后退/下一步按钮时，它不会调用 getContent() 函数。我是骨干新手，所以任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T18:05:35.243

我支持安德鲁的回答：您对路由的使用有点奇怪。

如果您有兴趣了解更多原因，如 Andrew 所说，“Router.navigate 适用于罕见情况”，请在此处阅读第 32-46 页：http://samples.leanpub.com/marionette-gentle-introduction-sample [。 pdf](http://samples.leanpub.com/marionette-gentle-introduction-sample.pdf)

这是我关于 Backbone.Marionette.js 的书的示例的一部分，但路由概念保持不变。特别是，您将了解为什么默认`trigger`值为`false`，以及为什么在设计应用程序路由时考虑到这一点会使您的应用程序变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:09:42.890

改变这个：`res = app_router.navigate(url, true);`

对此：`app_router.navigate(url, {trigger: true});`

我看不出有任何理由创建一个变量“res”。

恕我直言，您有一个复杂的 Backbone 实现。我建议将您的路线移动到构造函数，如下所示：

```
var AppRouter = Backbone.Router.extend({
    routes: {
       "/": "initHome",
       "home": "initHome",
       "projects": "initProjects",
       "project/:id" : "initProject"
    },

    initProject: function (id) {
    // Note the variable in the route definition being passed in here
      getContent("project", id);
    },

    initProjects: function () {
      getContent("projects");
    },

    initHome: function () {
      getContent("home");
    }
});

// Instantiate the router
var app_router = new AppRouter; 
```

此外，如果您像在 Backbone 文档中那样正确设置路由，

```
routes: {
  "help":                 "help",    // #help
  "search/:query":        "search",  // #search/kiwis
  "search/:query/p:page": "search"   // #search/kiwis/p7
}, 
```

您可以使用传统链接将参数传递给路由。您还可以将 if activePage 语句作为更改页面的辅助函数移动到路由器。

Router.navigate 适用于极少数情况。

我建议，一遍又一遍地阅读 Backbone 文档。我每次都学到新东西。那里有很多东西，Backbone 已经在高效地做事了。无需重新发明轮子。

希望这可以帮助！

# php - PHP Ajax 表单集成返回数组

> ID：14548207
> 
> 赞同：1
> 
> 时间：2013-01-27T14:11:21.030
> 
> 标签：php, jquery, ajax

使用 PHP 和 jQuery Ajax 构建一个基本的登录系统。

我想要做的是通过 ajax 提交表单的各个部分并返回一个数组。我不太确定我是否正确。

这是PHP

```
if($access_function == 'access_login_1'){
    $email = $_POST['access_email'];
    $pwd = $_POST['access_pwd'];

    if(!$email || !$pwd){
        $error = 'Empty';
    }
    else {
        $user = get_user($email);
        if($user && $user['pwd'] == $pwd){
            if($user['status'] == 1){
                $action = 1;
            }
            else {
                $order = 'Unauthorised';
            }
        }
        else {
            $error = 'invalid';
        }
    }
    return array('action'=>$action,'error'=>$error,'order'=>$order);
} 
```

get_user 函数是这样的：

```
function get_user($email){
    global $cnx;
    $q = $cnx->prepare("SELECT email FROM `users` WHERE email = :email");
    $q->execute(array(':email' => $email)); 
    return $q->fetch();
} 
```

现在jQuery是真正的斗争。我想要的是将序列化值提交到这个 php.ini 文件。如果脚本返回 1 的动作，我想执行另一个脚本，我希望 $error 进入一个名为 error 的 div 并排序到一个名为 $order 的 div

这没有奏效：

```
function sendvars(container,linkrul,perform){
    var vars = 'access=1';
    $(container).find('input').each(function(){
        vars += '&' + $(this).attr('name') + '=' + $(this).val();
    });
    $.ajax({type:'POST',url:linkrul,data:vars,success:function(results){
        if(results == 1){  }
        else { $(container).find('.orders').html(results).slideDown(300); }
        }
    });
} 
```

-- 散列不只是在我们测试所有东西时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:37:24.323

您需要更仔细地考虑从 PHP 发送到 AJAX 回调的数据：

1.  请记住，PHP 脚本不能“返回”任何东西，它只是“显示”它。因此`return array('action'=>$action,'error'=>$error,'order'=>$order);`不会产生任何 Javascript 可以读取的输出，除非您以某种方式将其序列化（将其转换为字符串并输出），例如 XML 或 JSON（使用[`json_encode()`](http://php.net/json_encode)）。您可以通过直接在浏览器中查看脚本或使用[Firebug](http://getfirebug.com)等调试工具来测试脚本是否输出了有用的内容。
2.  jQuery 需要知道您以何种编码输出数据（请参阅[有关`dataType`参数](http://api.jquery.com/jQuery.ajax/)的文档）。如果它是 XML，它会将整个 XML 文档传递给您的回调函数，因此您需要使用`.find`和`.each`检查之类的函数。可能最简单的方法是让您的 PHP 使用`header('Content-type: application/json');`（它告诉 jQuery 您正在使用 JSON）并使用 回显一些数据`json_encode`，以便您的 Javascript 回调获得一个简单的 Javascript 对象来使用。
3.  您当前的 Javascript 假定 AJAX 调用的结果是整数 ( `result == 1`) 或 HTML 的 blob `.html(results)`。更好的方法是传回您的 PHP 代码中显示的整个结果结构（即`echo json_encode(array('action'=>$action,'error'=>$error,'order'=>$order));`）。然后，您可以分别检查和处理结构的每个部分（例如`response.action == 1`, `.html(response.order)`），您的代码在未来的情况下变得更具可读性和灵活性。

最后，jQuery 有一些内置函数可以在这里为您完成更多工作：签出[`$.post`](http://api.jquery.com/jQuery.post/)作为 AJAX 调用的简写，以及[`.serialize()`](http://api.jquery.com/serialize/)（或其表亲[`.serializeArray()`](http://api.jquery.com/serializeArray/)）读取表单元素的当前值您可以发送到 AJAX 回调的表单。

（顺便说一句，我相信你已经发现了这一点，但我想`linkrul`应该是`linkurl`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:41:47.383

我会这样做返回 json 编码的数组：

```
if($access_function == 'access_login_1'){
    $email = $_POST['access_email'];
    $pwd = $_POST['access_pwd'];

    if(!$email || !$pwd){
        $resp = array(
           'action' => $someValue,
           'order' => $someValue,
           'error' => 'No Email or password provided' 
         );
    }
    else {
        $user = get_user($email);
        if($user && $user['pwd'] == $pwd){
            if($user['status'] == 1){
                $resp = array(
                   'action' => 1,
                   'order' => $someValue,
                   'error' => 'No Error' 
                );
            }
            else{
                $resp = array(
                    'action' => $someValue,
                    'order' => 'Unauthorised',
                    'error' => 'Order Error'
                );
            }
        }
        else {
               $resp = array(
                    'action' => $someValue,
                    'order' => 'Unauthorised',
                    'error' => 'Invalid'
                );
        }
    }
    echo json_encode($resp);
} 
```

在js中：

```
function sendvars(container,linkrul,perform){
    var vars = 'access=1';
    $(container).find('input').each(function(){
        vars += '&' + $(this).attr('name') + '=' + $(this).val();
    });
    $.ajax({type:'POST',url:linkrul,data:vars,dataType:'JSON',success:function(results){
         if(results.action == 1){ 
            //do something 
         }else if(results.action == someOtherValue){
           $(container).find('.orders').html(results.order).slideDown(300);
         }else{
            alert(results.error); //Or put the error in some div
         }    
        //any other code or if/else statement
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:49:50.993

这也是一种选择。

**HTML**

```
<input type='text' class='email' />
<input type='password' class='pass' /> 
```

**PHP - checkLogin.php**

```
<?php

$action = 0;
$order  = 0;
$error  = 0;

if(isset($_POST['email'], $_POST['pass'])) {
     if(!empty($_POST['email']) && !empty($_POST['pass'])) {
          $user = get_user($email);
          if($user && $user['pwd'] == $_POST['pass']){
               if($user['status'] == 1){
                    $action = 1;
               } else {
                    $order = 'Unauthorised';
               }
          } else {
            $error = 'invalid';
          }
     } else {
          $error = "Empty";
     }

     $array = array('action'=>$action,'error'=>$error,'order'=>$order);
     echo json_encode($array);
} 
```

**Javascript**

```
function checkLogin(){
    var email = $('.email').val();
    var pass  = $('.pass').val();
    $.post('checkLogin.php', {email:email,pass:pass}, function(response) {
         var result = $.parseJSON(response);
         if(response['action'] == 1) {
              //authorized
         } else if(response['order'] == 'Unauthorised') {
              //unauthorized
         } else {
              //error
         }
    });
} 
```

# android - 在 Android 应用程序中包含 RSS 提要的步骤是什么？

> ID：14548213
> 
> 赞同：0
> 
> 时间：2013-01-27T14:12:11.630
> 
> 标签：android, rss

我是 android 新手，对 C++ 更熟悉。但是，在研究 RSS 提要以及如何在 android 应用程序中使用它们时，我发现它们必须被“解析”？我以前从未使用过它，现在想知道如何在应用程序中包含 RSS 提要，但我发现的任何信息都是矛盾和令人困惑的。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:44:34.360

对我来说，解析 XML 提要最简单的方法是使用这个库

[http://www.thebuzzmedia.com/software/simple-java-xml-parser-sjxp/](http://www.thebuzzmedia.com/software/simple-java-xml-parser-sjxp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:32:48.567

你也可以签出`XmlPullParser`

[http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T06:53:27.683

我推荐使用这个库： [https ://github.com/Pkmmte/PkRSS](https://github.com/Pkmmte/PkRSS)

它非常易于使用，默认支持 atom 和 Rss2 提要，但支持插入您自己的解析器。

例如，这是您在后台线程中从 URL 加载提要的方式： PkRSS.with(this).load(url).async();

容易，对吧？GitHub 页面中有更多详细信息。

# android - 不规则的Gridview，第一行有一列，其余两列的行

> ID：14548216
> 
> 赞同：0
> 
> 时间：2013-01-27T14:12:40.577
> 
> 标签：android, gridview

我正在尝试`gridview`为我的 Android 应用程序实现不规则。我已经定义`gridview`为显示 2 列，但我只需要在第一行显示 1 列。

是否可以使用`DataAdapter`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:48:17.500

我认为您无法使用 gridview 来完成此操作。适配器简单地提供数据，但视图决定如何布局。如果您的要求允许您使列数保持不变，那么也许您可以使用 gridlayout 代替。我认为您可以尝试像 google currents 应用程序那样进行布局。

如果您有 1000 个项目，Gridview 和 ListView 非常有用，因为它在滚动时会重用视图。如果您的网格中有很多项目，那么我可能会尝试使用 GridView 或 ListView 来实现您的目标。也许你必须改变你的要求。另一种选择是使用 ListView，但将每一行细分为 2 列。

# buddypress - 检查用户是否是朋友以在成员循环 buddyprress 中显示数据

> ID：14548219
> 
> 赞同：0
> 
> 时间：2013-01-27T14:12:51.167
> 
> 标签：buddypress

有人可以帮我吗，我有一个名为 BB Pin 的个人资料字段，我使用

BB 针：`<?php bp_member_profile_data('field=BB Pin');?>`

在 members-loop.php 中显示数据，它工作正常，但我想这样做，如果你不是朋友，字段值为***** ******。

就像是

如果是朋友{

BB 针：`<?php bp_member_profile_data('field=BB Pin');?>`

} 其他{ ***** ** ***** .

谢谢你的帮助。

问候

**更新：**

我刚刚在 members-loop.php 中尝试了以下代码，但没有奏效。

`<?php global $bp; $friend = BP_Friends_Friendship::check_is_friend( $bp->loggedin_user->id, $bp->displayed_user->id ); if ( $bp->loggedin_user->id || $friend == 'is_friend') : ?> echo <?php bp_member_profile_data('field=BB Pin');?> <?php else : ?> echo *************** <?php endif; ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T13:44:30.877

```
$is_friend = friends_check_friendship( bp_loggedin_user_id(), bp_displayed_user_id() );

if($is_friend) {
  BB Pin:<?php bp_member_profile_data('field=BB Pin');?>
} else{
BB Pin: ***; 
```

这个应该在循环中工作！您不能在循环中使用全局变量 $bp，但该特定任务还有其他变量。在这种情况下，我只是改变了

```
$bp->loggedin_user->id, $bp->displayed_user->id 
```

到我的代码示例中的那些！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:03:02.327

检查登录用户是否为好友，请使用以下代码：

```
global $bp;
$is_friend = friends_check_friendship( $bp->loggedin_user->id, $bp->displayed_user->id );

if($is_friend) {
   BB Pin:<?php bp_member_profile_data('field=BB Pin');?>
} else{
   BB Pin: ***;
} 
```

# node.js - 如何从 nodejs 脚本安装 npm 包？

> ID：14548220
> 
> 赞同：14
> 
> 时间：2013-01-27T14:12:52.070
> 
> 标签：node.js, web, npm

如何从 nodejs 脚本安装 npm 包？

问题***不是关于******通过终端****简单**安装**npm 包***，
而是关于**通过 nodejs 脚本安装**：
不是关于这个：`npm install express`，而是关于有`install.js`内容的文件`npm install express`，我将执行`node install.js`它，然后它将在此文件夹中本地安装*express*模块。**

 ***抱歉，Google 和 DuckDuckGo 今天不是我的朋友（*

**主要问题**是我的小实用程序的自动本地安装所需的包，因为全局包在 Windows 中不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T15:08:36.407

查看[commander.js](https://github.com/visionmedia/commander.js)，它允许您使用节点编写命令行应用程序。

然后就可以使用该`exec`模块了。

假设您将以下内容放入`install.js`，您只需要：`./install.js`它就会`npm install`为您运行。

```
#!/usr/bin/env node

var program = require('commander');
var exec = require('child_process').exec;

var run = function(cmd){
  var child = exec(cmd, function (error, stdout, stderr) {
    if (stderr !== null) {
      console.log('' + stderr);
    }
    if (stdout !== null) {
      console.log('' + stdout);
    }
    if (error !== null) {
      console.log('' + error);
    }
  });
};

program
  .version('0.1.3')
  .option('i, --install ', 'install packages')
  .parse(process.argv);

if (program.install) {
  run('npm install');
}

var count = 0;

// If parameter is missing or not supported, display help
program.options.filter(function (option) {
  if(!(option.short == process.argv[2]))
    count++
});

if(count == program.options.length)
  program.help(); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-18T05:36:12.873

*注意：我认为这不能满足您问题的所有要求，因为最后您声明您找不到`npm`......所以也许您的问题会更好地命名为“如何在没有 npm 的情况下安装 npm 包？” - -哎呀！但它解决了标题“如何从 nodejs 脚本安装 npm 包？”*

我刚刚看到了另一种替代方法：模块[npmi](https://github.com/maxleiko/npmi)。虽然这仍然是另一个模块依赖项，但它至少可以在没有 *nix shell 脚本环境的情况下工作，我认为这里的另一个答案 (about `commander.js`) 可以。而且，如果您查看 的代码`npmi.js`，您会发现它非常短，并且仅在节点脚本中直接使用 npm 模块——如果您不想添加 npmi 模块，您可以自己做。

因此，在我们的案例中，我们需要一种无需 *nix shell 脚本（以支持 Windows 用户）来安装模块的方法，这非常符合要求。

如果你不能，那仍然对你没有帮助`require('npm')`。我唯一能想到的就是尝试可能的绝对路径......你可以`require('C:\Program Files\Node\packages\x`）`，我认为 - 或者节点的全局包存储在哪里（每个用户？）。在 try/catch 中进行几次尝试，或者首先测试文件是否存在，然后在找到全局包的实际安装位​​置时尝试要求 npm 模块？您可能会勾选恶意软件扫描程序:-)，但它可能会起作用。**

# php - 如何停止 Web 应用程序中的过多请求？

> ID：14548222
> 
> 赞同：2
> 
> 时间：2013-01-27T14:13:02.470
> 
> 标签：php, mysql, apache, security

我正在寻找 Apache Web 服务器的替代安全注意事项。我通常使用 PHP 和 MySQL。

对于用户登录等进程，我将 IP 地址、尝试次数和上次尝试时间保存在数据库中，因此如果有人在过去 n 分钟或秒内尝试超过 x 次，我只需阻止 IP 地址。

当有很多不同的过程（如用户登录）时，将 IP 地址保留在数据库中听起来并不正确（因为会降低性能并且要做很多事情）。我知道如果你想要安全，你需要牺牲一些性能，但是有没有更好的方法来阻止用户发出过多的请求？也许是 Apache 的一个模块？还是对服务器的较低级别的警告？我特别想避免不必要的数据库工作。

我考虑过使用 CAPTCHA，但将它用于每种形式都会扼杀用户体验。在 n 分钟内的 x 请求后使用它仍然需要我提到的第一种技术。

缓存系统可能会有所帮助，但我看不出它如何防止暴力攻击或用垃圾填充数据库。AFAIK 它只有助于从数据库中读取（如果我错了，请纠正我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:20:21.423

您应该尝试 CloudFlare，保护您的网站免受各种机器人/黑客的攻击。请记住，stackoverflow 是针对有关编程的问题，而不是针对有关安全问题或托管问题的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:27:39.077

除了上面@ranty 的评论（这很合适，除非你真的同时有很多用户），你可以使用内存缓存系统，比如[memcached](http://memcached.org/)。它有一个漂亮的 php 界面，并且非常易于使用。

将每次登录尝试转储到内存缓存（使用 ip 地址作为键和尝试计数作为值，由时间跨度清除）。它速度很快，不应该在性能或开发工作上花费太多。

伪代码如下所示：

```
$memcache_obj = memcache_connect('memcache_host', 11211);
$ip = $_SERVER('REMOTE_ADDR');
$trycount = memcache_get($memcache_obj, $ip);
if ( $trycount == null ) $trycount=0;
if ( $trycount > 3 ) die('bad user');
memcache_set($memcache_obj, $ip, $trycount++ , 0, 30); 
```

# c# - Windows Phone 7JSON HTTPWebrequest 同步

> ID：14548224
> 
> 赞同：0
> 
> 时间：2013-01-27T14:13:03.923
> 
> 标签：c#, windows-phone-7, httpwebrequest, synchronous

我们在Windows Phone 7中有一个线程需要同步，我们需要一个一个的发送HTTPWebrequest，直到线程完成，这样下一个线程才能启动。由于 WP7 是异步的，我们需要一个同步的解决方案。输出为 JSON 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:29:37.520

我尝试了异步/等待。在 Response 被调用之前，它变成了异步的。这是供您参考的代码。

```
 HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            Stream postStream = webRequest.EndGetRequestStream(asynchronousResult);
            // creating JSON object
            JObject json =
            new JObject(new JProperty(VMConstants.JSON_CONSTANT_LOGINCMD, new JObject(
            new JProperty("employeeId", constant.EMPLID)
            )));
            JsonSerializer serializer = new JsonSerializer();
            serializer.NullValueHandling = NullValueHandling.Ignore;
            using (StreamWriter sw = new StreamWriter(postStream))
            using (JsonWriter writer = new JsonTextWriter(sw))
            {
                json.WriteTo(writer, null);
            }
            webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);

                    // Start the web reponse
            postStream.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:41:57.800

你不能（也不应该！！！）使这个同步。而是使用队列机制，或者使用新的异步/等待任务模式的代码，这允许您或多或少地编写代码，就好像它是同步的

# php - 如何使用可变行填充创建 TCPDF HTML 表格

> ID：14548225
> 
> 赞同：18
> 
> 时间：2013-01-27T14:13:12.797
> 
> 标签：php, css, report, tcpdf

我正在尝试在 TCPDF 中创建一个 HTML 表，其中几行在行之间具有较大的空间（填充），而其他行具有较小的填充。

```
$html = '<table border="0" cellpadding="6">
        <tr>
            <td style="width="52%">' . lang('ticket_name') . '</td>
            <td style="width="18%">' . lang('ticket_price') . '</td>
            <td style="width="12%">' . lang('quantity') . '</td>
            <td style="width="18%">' . lang('total') . '</td>
        </tr>
    <tr>
            <td style="padding: 10px">' . $item['name'] . '</td>
            <td style="padding: 10px">' . $item['unit_price'] . '</td>
            <td style="padding: 10px">' . $item['quantity'] . '</td>
            <td style="padding: 10px">' . $item['row_total'] . '</td>
        </tr>
        <tr>
            <td style="text-align:right" colspan="3">' . lang('price_basis') . ': </td>
            <td>' . $totals['total_before_tax'] . '</td>
        </tr>
            <tr>
            <td style="text-align:right" colspan="3">' . 'Ukupni popust' . ': </td>
            <td>' . $totals['total_discount'] . '</td>
        </tr>
            <tr>
            <td style="text-align:right" colspan="3">' . 'Sveukupno' . ': </td>
            <td>' . $totals['grand_total'] . '</td>
        </tr>
    </table>';
$pdf->writeHTML($html, $linebreak = true, $fill = false, $reseth = true, $cell = false, $align = ''); 
```

如您所见，我在表格标签中有一个 cellpadding 属性，它工作正常，但我想在第二行有不同的填充。填充样式显然不适用于“td”或“tr”标签。

我知道这可以用两个具有不同单元格填充的单独表格来完成，但这似乎很错误。必须有另一种方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-04-01T07:00:15.760

TCPDF 不支持所有 CSS 属性，例如 TCPDF 不支持`padding`和`margin`属性。您可以通过内表模拟填充：

```
<tr>
 <td>
  <table><tr>
   <td style="width:10px;"></td>
   <td>' . $item['name'] . '</td>
   <td style="width:10px;"></td>
  </tr></table>
 </td>
</tr> 
```

或者您可以使用不同`cellpadding`的表，每行不同：

```
<table border="0" cellpadding="6">
 <tr>
  <td>' . lang('ticket_name') . '</td>
  <td>' . lang('ticket_price') . '</td>
  <td>' . lang('quantity') . '</td>
  <td>' . lang('total') . '</td>
 </tr>
</table>
<table border="0" cellpadding="5">
 <tr>
  <td>' . $item['name'] . '</td>
  <td>' . $item['unit_price'] . '</td>
  <td>' . $item['quantity'] . '</td>
  <td>' . $item['row_total'] . '</td>
 </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T11:32:03.213

此处的另一个答案提供了*全方位*的填充，但是如果您需要在顶部或底部进行填充，则解决方案是使用具有设定高度/宽度的透明 PNG。

```
private function padding($width,$height){
    return '<img src="/imagepath/images/transparent.png" width="'.$width.'" height="'.$height.'">'; 
} 
```

然后在需要填充的TD中：

`$this->padding(82,11)`

因此，您需要在表格单元格上定义宽度。这也可能适用于左/右填充，但还没有尝试过。

# c# - 文本框验证 2 个字符和 2 个整数

> ID：14548226
> 
> 赞同：0
> 
> 时间：2013-01-27T14:13:17.247
> 
> 标签：c#, validation, textbox

我需要将 textbox1 验证为 2 个字母和 2 个整数，即） ab11

我如何设置它我的文本框只接受 2 个字符和 2 个整数。

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:28:42.473

这应该有效。

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    TextBox tb=sender as TextBox;
    string text=tb.Text;

    switch (text.Length)
    { 
        case 1:
            if (!char.IsLetter(text[0]))
                tb.Text = "";
            break;
        case 2:
            if (!char.IsLetter(text[1]))
                tb.Text = text.Remove(1);
            break;
        case 3: 
            if (!char.IsNumber(text[2]))
                tb.Text = text.Remove(2);
            break;
        case 4:
            if (!char.IsNumber(text[3]))
                tb.Text = text.Remove(3);
            break;
        default:
            if(text.Length>4)
                tb.Text = text.Substring(0, 4);
            break;
    }
    textBox1.Select(tb.Text.Length, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:13:18.827

```
string str = textBox1.Text;
if (Regex.IsMatch(str, @"^(([A-Z]|[a-z])([A-Z]|[a-z])\d\d)$"))
{
    MessageBox.Show("Valid");
} 
```

参考：[正则表达式类](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:27:40.323

如果：

```
string myString = textbox1.Text; 
```

然后验证：

```
If (Regex.IsMatch(myString, "^[A-Za-z]{2}[0-9]{2}$")))
{
   return true;
}
else
{
   return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T14:52:15.233

```
 private void textBox2_Validating(object sender, CancelEventArgs e)
    {
        var cn = textBox2.Text.Where(c => char.IsLetter(c)).Count();
        var cd = textBox2.Text.Where(c => char.IsNumber(c)).Count();
        if (cn >= 2 && cd >= 2)
        {
            //Success, Do Stuff
        }
        else
        {
            e.Cancel = true;
        }
    } 
```

# wpf - 阴影用户控件

> ID：14548227
> 
> 赞同：0
> 
> 时间：2013-01-27T14:13:20.343
> 
> 标签：wpf, controls

我认为执行以下操作可能很常见：

```
<Grid>
    <Border>
        <Border.Effect>
            <DropShadowEffect/>
        </Border.Effect>
    </Border>

    <SomeControl/>
</Grid> 
```

好吧，我在没有 ide 帮助的情况下做到了这一点，如果我忘记了什么，我承认我已经迷失了，但我认为你明白了。

我的问题是，是否可以创建一个允许我这样做的 UserControl：

```
<DropShadowBorder>
    <SomeControl/>
</DropShadowBorder> 
```

如果是这样，请告诉如何。

编辑：以防万一不是很明显，这里的重点是我通常会在我的控件周围放置一个边框，但是当我想使用投影时我不能，因为我只希望边框有投影而不是里面的一切。因此，我必须在同一个网格空间中分别创建边框，但这很烦人，因为当我在控件上调整边距等时，我每次都必须在边框上复制这些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:16:41.527

你不能做用户控制（用户控制不能有内容）。您将必须创建一个自定义控件。我建议您创建一个从`ContentControl`.

自定义控件的代码（默认代码！）：

```
public class DropShadowBorder : ContentControl
{
    static DropShadowBorder()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(DropShadowBorder), new FrameworkPropertyMetadata(typeof(DropShadowBorder)));
    }
} 
```

然后为您的控件定义一个默认样式（在 中`generic.xaml`）

```
<Style TargetType="{x:Type local:DropShadowBorder}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:DropShadowBorder}">
                <Grid>
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Border.Effect>
                            <DropShadowEffect />
                        </Border.Effect>
                    </Border>

                    <ContentPresenter Content="{TemplateBinding Content}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c# - Gridview单选按钮模板字段只有一个选择-javascript

> ID：14548230
> 
> 赞同：1
> 
> 时间：2013-01-27T14:13:55.410
> 
> 标签：c#, javascript, asp.net, gridview

我有`Gridview`一个`Radiobutton Itemtemplate`。我想对整个列进行分组，并且`Radiobutton`应该只选择一个。
但我不想`postback`在服务器端检查它们。可以用 javascript 完成吗？

![在此处输入图像描述](../Images/0f04c61db7d262243bc47cee3ccf1214.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:08:06.593

使用带有`name`属性的 HTML 单选按钮对 GridView 中的所有单选按钮进行分组`ItemTemplate`：

```
<input type="radio" id="TheId" name="GroupName" /> 
```

或者

如果您不想使用 HTML 单选按钮，那么您需要按照[此处](https://stackoverflow.com/questions/6627634/using-radiobuttons-in-a-gridview-control)`checked`所述使用 javascript/jQuery 自己处理单选按钮的属性。

# twitter - 从 twitter 获取带有特定关键字（# 标签）的推文计数的方法是什么？

> ID：14548231
> 
> 赞同：1
> 
> 时间：2013-01-27T14:14:04.737
> 
> 标签：twitter, social-networking, tweets

我需要在推特上组织热门人物的图像，并且我需要相应地动态更新图像的位置......

# javascript - document.write 多行文本

> ID：14548234
> 
> 赞同：3
> 
> 时间：2013-01-27T14:14:46.497
> 
> 标签：javascript

我有一个脚本，它从具有可变长度的用户那里获取输入字符串，通常为 ~ 400-3000 个字母。我的脚本对字符串进行了一些修改，然后应该将其打印到屏幕上。使用文档写入，所有内容都显示在一行上。但是，我希望每个输出行有 ~ 100 个字母，因此用户不必向右滚动 ~ 3000 个字母即可查看整个文本。

我能想到的唯一方法是 for 循环，但也许有人知道更好的解决方案？

**编辑：**

这是我目前用来实现此目的的 for 循环

```
document.write("<p>",">Position: ", (lower+1) + "-" + (lower +print_screen.length), "<br/>");

// print only 70 chars per line
for(i = 0; i < print_screen.length; i += 69){
    document.write(print_screen.substring(i, i+69), "<br/>");
};

document.write("</p>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:18:45.507

将此 CSS 用于您的容器：

```
.longtext {
    white-space: -moz-pre-wrap !important;  /* Mozilla, since 1999 */
    white-space: -pre-wrap;      /* Opera 4-6 */
    white-space: -o-pre-wrap;    /* Opera 7 */
    white-space: pre-wrap;       /* css-3 */
    word-wrap: break-word;       /* Internet Explorer 5.5+ */
    word-break: break-all;
    white-space: normal;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:33:46.283

`replace`您可以使用和正则表达式在字符串中添加中断。这会在每 100 个字符处添加一个中断：

```
document.write(theText.replace(/(.{100})/g, '$1<br/>')); 
```

# javascript - 禁用 TinyMCE 上的默认鼠标单击功能

> ID：14548237
> 
> 赞同：1
> 
> 时间：2013-01-27T14:15:03.023
> 
> 标签：javascript, click, tinymce, preventdefault

通常，当单击 TinyMCE（或任何其他编辑器）中的文本时，插入符号会放置在那里和/或开始文本选择。

我不希望这样的事情发生。我希望当单击可编辑的文本区域时，什么都不应该发生。我怎样才能做到这一点？

在我的设置函数中，我有这个代码，这是对上一个问题的跟进，它确保一旦打开 TinyMCE，就会选择实例中的所有文本：

```
 ed.onInit.add(function(ed, evt) {
      var range = ed.selection.dom.createRng();
      range.setStartBefore(ed.getBody().firstChild);
      range.setEndAfter(ed.getBody().lastChild);
      ed.selection.setRng(range);
            }); 
```

现在选择了所有文本，我不希望用户能够取消选择它或选择文本中的任何其他范围。所以我希望用户的点击什么都不做。我试图在相同的设置函数中添加它：

```
ed.onClick.add(function(ed, evt) {
  console.debug('Editor was clicked: ' + evt.target.nodeName);
  evt.preventDefault();
  evt.stopPropagation();            
        }); 
```

但是当控制台消息出现时，单击仍然取消选择已选择的文本范围。我怎样才能确保点击什么都不做？或者至少它们不会影响已经选择的文本范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:48:03.727

尝试否定`mousedown`事件而不是`click`事后触发的事件。

# java - 这个java代码格式是什么意思

> ID：14548252
> 
> 赞同：-3
> 
> 时间：2013-01-27T14:17:21.287
> 
> 标签：java

> **可能重复：**
> [Java 泛型 - 这个语法是干什么用的？](https://stackoverflow.com/questions/13238150/java-generics-what-is-this-syntax-for)
> [Java中的<>符号是什么](https://stackoverflow.com/questions/14400719/in-java-what-is-the-notation)

```
sBooksProjectionMap = new HashMap<String, String>(); 
```

谁能向我解释一下上述代码这部分的含义：

```
new HashMap<String, String>() 
```

我是 Java 的新手，这`<Sting, String>`部分让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:19:59.200

简单地-

```
Map< key, value > map = new HashMap< key, value >(); 
```

例子是

```
Map<String,String> map = new HashMap<String,String>();
map.put("str","abcd");
map.put("str1","dcba"); 
```

现在让他们简单

```
map.get("str");  // abcd
map.get("str1"); // dcba 
```

# c# - 从流文档中清除内容时出现空引用异常

> ID：14548256
> 
> 赞同：0
> 
> 时间：2013-01-27T14:17:47.517
> 
> 标签：c#, dispose, nullreferenceexception, flowdocument

我正在使用 Dispatcher 从 FlowDocument 中清除内容。代码在非 UI 程序集中。代码是

```
 Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Normal, 
         new Action(delegate()
    {

    _flowDocument.Blocks.Clear();
    } 
```

但是，每当执行此代码时，我都会面临空引用异常。

* * *

好吧，我已经有一个线程（发布问题时忘记了）对 FlowDocument 执行操作，所以我只需要使用委托调用上述代码。

# iphone - 通过 SKStoreProductViewController 申请礼品

> ID：14548258
> 
> 赞同：2
> 
> 时间：2013-01-27T14:17:56.113
> 
> 标签：iphone, ios, objective-c, app-store

我见过许多将按钮链接到[SKStoreProductViewController](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html)以下载特定应用程序或特定音乐的应用程序。这是它的[构建](http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class)方式和外观：

* * *

![在此处输入图像描述](../Images/0a467612cb8a65a0ab9a9ba385f07777.png)

* * *

我已经知道可以通过链接到 appstore 应用程序（如[HERE](https://stackoverflow.com/questions/5197035/gift-app-from-inside-the-app) ）来赠送您的应用程序。**现在我想知道**：“*是否可以通过此控制器赠送您的应用程序？* ”我想知道，因为许多应用程序使用它`SKStoreProductViewController`通过广告或类似的东西下载特定的应用程序。

*如果有人知道这是否可能以及如何...*

* * *

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:36:38.883

就文档而言-您不能这样做。

# c# - 将 Linq 查询转换为 SQL 会弄乱空参数值

> ID：14548261
> 
> 赞同：4
> 
> 时间：2013-01-27T14:18:07.340
> 
> 标签：c#, sql-server, linq, entity-framework

这是一个简单的 LINQ 查询：

```
var objs = db.Objects.Where(o => o.Field1 == val); 
```

这转化为 SQL 查询：

```
select * from [Object] where Field1 = @p1 
```

麻烦的是，值`val`也可以合法地为空。而且 SQL 不喜欢比较空值；它坚持语法`... where Field1 is null`。

`??`除了使用/操作之外，有没有办法巧妙地做到这一点`isnull`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:23:42.117

这又是 LINQ 支持中的一个 EF 弱点。好的旧 LINQ to SQL 根据 val 的运行时值正确地翻译了这个。

我建议你这样做：

```
var objs = db.Objects.Where(
   o => (o.Field1 == val) || (o.Field1 == null && val == null)); 
```

如果 EF 逐字翻译，SQL Server 查询优化器实际上会选择此模式并将其优化为“等于空值”检查。您甚至可以使用此 Code Pattern 查找索引，它可以正常工作。在查询计划中`IS`，这与`EQ`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:39:15.350

[**.HasValue**](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)怎么样？

```
var objs = db.Objects.Where(o => !o.Field1.HasValue && o.Field1 == val); 
```

# java - 两个复合组件之间的通信

> ID：14548262
> 
> 赞同：0
> 
> 时间：2013-01-27T14:18:25.460
> 
> 标签：java, jsf

我有两个独立的 JSF 复合组件。我希望第二个使用第一个的一些属性。

例如：rich:scroller 有一个属性“for”，用于指示滚动器使用的 rich:dataTable 组件。

同样，我有一个复合组件（模态对话框），它将被其他复合组件（一些复合命令链接组件）调用。简单地说，不同的命令链接将打开不同的模式对话框......我想在我的命令链接组合中添加一个“modalPanel”属性。然后他们将知道要打开哪个模式对话框..

ModalPanel 复合将如下所示：

```
<fl:modalPanel id="actModal"
                insideXhtml="../../aaactmodal.xhtml"
                dataBean="#{aaAct}" /> 
```

CommandLink 组合如下所示：

```
<fl:modalLink dataBean="#{aaAct}"
                modalPanel="actModal" /> 
```

我怎样才能做到这一点？

# c# - 在 PHP 中加密一个字符串，在 C# 中解密它？

> ID：14548272
> 
> 赞同：1
> 
> 时间：2013-01-27T14:19:46.417
> 
> 标签：c#, php, .net, winforms, encryption-symmetric

在 action.php 页面中，我有一个要存储在 mysql 中的字符串，但我想在将其插入数据库之前对其进行加密

```
 $data = "Hello World";
 $data = Encrypt_This_String($data,"ABCD"); // abcd is a key
 // now I insert this string into MySQL database 
```

另一方面，我需要从我的 C#.NET 应用程序中取回这个字符串，所以我需要做这样的事情：

```
 string myStr = getMyString(); // where getMyString() is a function that get the encrypted string from db

 myStr = Decrypt_String(myStr,"ABCD"); 
```

我需要 myStr 保持值“Hello World”

有人可以给我一个基于密钥并且可以在 PHP 和 C# 中使用的加密算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:27:44.463

用于[`mcrypt_encrypt`](http://php.net/manual/en/function.mcrypt-encrypt.php)加密来自 PHP 的数据，例如 CBC 模式下的 AES 作为密码；文档页面上有示例代码。

[`AesManaged`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)然后使用or从 C# 解密[`AesCryptoServiceProvider`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)，MSDN 上的两个页面都有示例代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T14:26:54.533

您可以使用 Rijndael (AES 128)：

[PHP- AES128 示例](https://gist.github.com/1077723)

[C# AES128 示例](http://softwaredevelopment.gr/440/rijndael-aes-128-decryption-in-c/)

# javascript - UIWebView 下载它的图片内容

> ID：14548273
> 
> 赞同：3
> 
> 时间：2013-01-27T14:19:51.720
> 
> 标签：javascript, ios, uiwebview, highcharts

我正在使用[高图表](http://www.highcharts.com/)在 Web 视图中的本机 iOS 应用程序中绘制图表，问题是当我将图表导出为图像时，图像出现在 Web 视图中，我无法保存或下载它。

在桌面浏览器中，当我导出它时，它会立即开始下载。

导出机制是通过 JS 函数调用提供的，我从本机应用程序调用它使用

```
[_webView stringByEvaluatingJavaScriptFromString:@"chart.exportChart({ type: 'image/jpeg', filename: 'chart'});"]); 
```

我深入研究了 JS 库，发现他们向那里的服务器发送了一个发布请求以获取图像，所以我没有可以下载的图像的 URL！

我希望能够保存图像并将其传递给我的本机应用程序，任何帮助！

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:51:48.470

您有一个选择是将您的网络视图转换为图像。下面的代码片段做到了：

```
UIGraphicsBeginImageContext(webview.bounds.size);
[webview.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# python - 使用python从复杂字符串中解析日期

> ID：14548285
> 
> 赞同：2
> 
> 时间：2013-01-27T14:21:18.077
> 
> 标签：python, string, parsing, date, python-dateutil

我有许多具有不同日期格式的字符串。我希望能够从字符串中提取日期。例如：

*   今天是 2012 年 8 月。明天不是
*   另一天 8 月 12 日，另一个时间
*   12/08 是另一种格式
*   有另一种 ？2012 年 8 月 12 日可能是
*   最后是 8 月 12 日

我希望从这些结果中得到的结果是 2012-08-01 00:00:00, 2013-08-12 00:00:00, 2013-08-12 00:00:00, 2012-08-12 00:00:00，2013 年 8 月 12 日 00:00:00。

我目前有这个代码：

```
from dateutil import parser
print parser.parse("Today is August 2012\. Tomorrow isn't",fuzzy=True) 
```

您将从这里看到日期打印为 2012-08-27 00:00:00（因为今天是每月 27 日）。在这个例子中我想要的是 2012-08-01 00:00:00。

如果没有给定一天，我如何强制它始终放置每月的第一天？（例如，如果我给 2012 年 8 月它应该返回 2012-08-01，如果我给它 2012 年 8 月 12 日它应该返回 2012-08-12。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:27:28.807

使用`default`参数设置默认日期。这应该处理除了第三种情况之外的所有情况，这有点模棱两可，可能需要一些解析器调整或读心器：

```
In [15]: from datetime import datetime

In [16]: from dateutil import parser

In [17]: DEFAULT_DATE = datetime(2013,1,1)

In [18]: dates=["Today is August 2012\. Tomorrow isn't",
    ...:        "Another day 12 August, another time",
    ...:        "12/08 is another format",
    ...:        "have another ? 08/12/12 could be", 
    ...:        "finally august 12 would be"]

In [19]: for date in dates:
    ...:     print parser.parse(date,fuzzy=True, default=DEFAULT_DATE)
    ...:     
2012-08-01 00:00:00
2013-08-12 00:00:00
2013-12-08 00:00:00  # wrong
2012-08-12 00:00:00
2013-08-12 00:00:00 
```

# android - webview 中的本地 html 页面 \raw\ 文件夹，其中包含指向另一个 html 页面的链接

> ID：14548286
> 
> 赞同：1
> 
> 时间：2013-01-27T14:21:30.387
> 
> 标签：android, android-webview

我正在使用 WebView 来显示存储在 \raw\ 目录中的 html 页面，以便我可以轻松地对其进行本地化。我使用加载页面

```
 InputStream inputStream = getResources().openRawResource(R.id.htmlPage1);
 StringWriter writer = new StringWriter();
 try {
     IOUtils.copy(inputStream, writer);
 } catch (IOException e) {
     e.printStackTrace();
 }
 String x = writer.toString();
 WebView w = (WebView) myFragmentView.findViewById(R.id.webView);
 w.loadDataWithBaseURL("file:///android_asset/", x, "text/html", "utf-8", null); 
```

效果很好。html 页面中使用的图像和 css 文件存储在 \assets\ 目录中。

现在我想在我的 html 页面中添加指向另一个本地页面 (<a href="htmlPage2.html">单击此处</a>) 的链接。WebView 尝试从资产加载页面（这似乎是正确的行为）。不幸的是，\assets\ 文件夹没有本地化。

如何在不放弃本地化功能的情况下链接到其他本地 html 页面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:51:12.510

第 1 步：可能为链接使用更独特的 URL 模式以帮助您区分它们（例如，`<a href="/this/is/another/raw/resource/htmlPage2.html">`）

第 2 步：`WebViewClient`在您的网站上注册`WebView`

第 3 步：在`shouldOverrideUrlLoading()`您的`WebViewClient`中，如果 URL 与您用于这些链接的模式匹配（参见第 1 步），请检查您的加载资源逻辑并返回`true`，否则什么也不做并返回`false`以弹出 Web 浏览器那个网址

# php - Get File Contents inner data retrieve

> ID：14548289
> 
> 赞同：2
> 
> 时间：2013-01-27T14:21:48.490
> 
> 标签：php, jquery

I am developing a whois app for my self to maintain expiry dates of my country level domains (PK). Our PKNIC provider doesn't allow any API or XML to get any such data so i googled found this code that could work now i need a little more code to retrieve only expiry date into a text box.

```
<?php
$postdata = http_build_query(
array(
    'name' => 'google.com.pk',
)
);

$opts = array('http' =>
array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
)
);

$context  = stream_context_create($opts);

$result = file_get_contents('http://pk5.pknic.net.pk/pk5/lookup.PK', false, $context);
//print_r($result);
echo $result;
?> 
```

Using the above code i get the results something like this..

```
 <tr>
      <td>&nbsp;</td>
    <td background="img/bg_diagnol.gif"><div align="right" class="style2">Create Date:</div></td>
    <td>&nbsp;</td>
    <td background="img/square.gif"><span xclass="TD_small">2003-03-05</span></td>
  </tr>
    <tr>
      <td>&nbsp;</td>
    <td background="img/bg_diagnol.gif"><div align="right" class="style2">Expire Date: </div></td>
    <td>&nbsp;</td>
    <td background="img/square.gif">2013-03-05</td>
  </tr>
    <tr>
      <td>&nbsp;</td>
    <td background="img/bg_diagnol.gif">&nbsp;</td>
    <td>&nbsp;</td>
    <td background="img/square.gif">&nbsp;</td>
  </tr>
    <tr>
      <td>&nbsp;</td>
    <td background="img/bg_diagnol.gif"><div align="right" class="style2">Agent Organization:</div></td>
    <td>&nbsp;</td>
          <td background="img/square.gif">MarkMonitor       <!--
     &nbsp; &nbsp; <span class="footer"></span> 
     -->
        </td> 
```

Now i just want to retrieve the Domain Expiry Date, is it possible ? Something maybe like

$('td').find('Expire Date:').after().html

Or is there any regx i can search for date format and copy into text box ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:33:35.377

This seems like weirdly formatted xml to return (looks like it's more for display than consumption), but you can still do it. `.after` is for DOM manipulation.

```
$(":contains(Expire Date)").parent().next().next().html(); 
```

# ruby - selenium - 不支持的命令 dragAndDrop 切换到 ruby

> ID：14548290
> 
> 赞同：1
> 
> 时间：2013-01-27T14:21:57.513
> 
> 标签：ruby, selenium, rspec, format, selenium-ide

我在 selenium IDE 中有一个很好的测试套件，使用 HTML 格式。

我希望将其更改为红宝石。我尝试将格式更改为 ruby​​/rspec 但我得到了

```
# ERROR: Caught exception [ERROR: Unsupported command [dragAndDrop | xpath=
(//div[@id='external-events']/div[contains(text(),'My Event 1')]) | 300,150]] 
```

有什么办法可以解决这个问题并避免错误？其他 Ruby 格式能解决这个问题吗？

我也干了拖放但得到了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:08:53.020

许多 IDE 功能无法直接转换为您选择的语言。DragAndDrop 就是其中之一，我不认为它适用于任何出口。

您必须使用`ActionBuilder`：

[http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html)

# javascript - javascript 自动提交到没有名字的表单 (tumblr)

> ID：14548292
> 
> 赞同：0
> 
> 时间：2013-01-27T14:22:27.340
> 
> 标签：javascript, html, tumblr

我想在 JavaScript 中为 Tumblr 制作自动提交代码，但问题是表单没有名称。我无法编辑 html 我会将代码放入 Chrome 中的 Tampermonkey（与 Firefox 中的 Greasmonkey 相同）。

```
<form id="post_form" style="" enctype="multipart/form-data" class="active" data-post-type="photo">

<div>some photo</div>

<button class="chrome blue txt " type="submit">Reblog post</button>

</form> 
```

我尝试了多种方法，但没有任何效果。

# ruby-on-rails - 设计 current_user 如何工作？

> ID：14548293
> 
> 赞同：3
> 
> 时间：2013-01-27T14:22:31.767
> 
> 标签：ruby-on-rails, devise

我想了解设计 current_user 方法的工作原理，因为我想将它推广到其他模型，这些模型将允许诸如 current_forum 或 current_forum_thread 之类的代码。

更具体地说，我正在尝试在 Rails 中实现一个聊天论坛。我有一个页面显示特定讨论线程的所有帖子（目前没有）。同一页面嵌入了新的帖子表单。调试（参数）显示：

```
action: show
controller: discussions
forum_id: '1'
id: '1'

discussion: !ruby/object:Discussion
  attributes:
    id: 1
    title: first discussion (thread)
    forum_id: 1 
```

因此，posts 控制器中的 create 方法应该知道讨论 id 是什么。然而，控制器中的这段代码不起作用。

```
 1\. @discussion = Discussion.find(params[:id])
  2\. @post = @discussion.posts.new(params[:post])
  3\. if @post.save
  4\.  flash[:success] = "Discussion post created!"
  5\.  redirect_to '#'
  6\. else
  7\.  render '#'
  8\. end 
```

第 1 行引发错误：

```
Couldn't find Discussion without an ID 
```

此外，经过检查发现@discussion 变量始终为 NIL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:57:16.077

对于这个实现来说，在线程中使用 current_id 似乎过于复杂，因为它看起来像是一个非常简单的嵌套资源。

帖子没有保存，因为它找不到讨论。由于您在 Post 控制器而不是 Discussion 上，因此您需要寻找与

```
@discussion = Discussion.find(params[:discussion_id]) 
```

您搜索它的 :id 来自帖子的参数。它没有找到任何东西，因为您可能有更多讨论的帖子。如果它确实找到了一些东西，那就是找到了错误的东西。

使嵌套路由工作的检查清单上的另一件事是使路由正确。用“rake routes”检查它们，但它应该如下所示：

```
resources @discussions do
   resources @posts
end 
```

这将添加路由，以便您的表单（看起来应该类似于`<%= form_for [@discussion, @post] do |f| %>`可以发布/放入讨论帖子路径）。

像你一样使用 current_id 确实是范围界定，而且有点混乱，Ryan Bate 有一个关于多租户的精彩视频[http://railscasts.com/episodes/388-multitenancy-with-scopes](http://railscasts.com/episodes/388-multitenancy-with-scopes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:00:22.080

我认为它更像是一个辅助函数，设计的方法是通过会话获取 ID，但是你可以通过 params 哈希来做同样的事情，即

```
module ApplicationHelper
  def current_forum_thread
   Thread.find(params[:id])
  end
end 
```

那对你有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:56:32.320

我把`before_filter :authenticate_user!`每个控制器放在上面，然后做这样的事情：

```
current_user.posts.new(params) 
```

这也需要关系`User has_many :posts`

似乎有效（但不确定这是否是最好的方法）。

此外，您的错误似乎意味着您的 prarms[:id] 为零，因此请检查它是否正确传递。您应该能够在日志中看到这一点。

```
# Discussions controller - show action
@discussion = Discussion.find(params[:id])
render ...

# Discussion show view
%ul
  - @discussion.posts.each do |post|
    %li= post.content # to output list of posts
= form_for @discussion.posts.new do |f|
  = f.input :content
  = f.submit
  # form to create new post related to this discussion

# Post controller - create method
@post = Post.new(params[:id])
@post.save!
render ... 
```

# python - Python非贪婪第二场比赛

> ID：14548294
> 
> 赞同：0
> 
> 时间：2013-01-27T14:22:36.670
> 
> 标签：python, regex

我有一个字符串`s = "a{asdfgh{asf}xvc}defg}des}"` ，我想`"{asdfgh{asf}xvc}"`使用正则表达式提取部分。我使用了正则表达式匹配

```
p = re.compile('(\{[\w|\W]+?\})') 
```

但它会提取`"{asdfgh{asf}"`. 提取零件的正确正则表达式是什么`"{asdfgh{asf}xvc}"`。

另外：我要问的是'}'字符的第二次出现匹配。我如何匹配第 n 次出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:34:15.180

试试这个...

```
>>> import re
>>> s = 'a{asdfgh{asf}xvc}defg}des}'
>>> p = re.compile('(\{[\w|\W]+?\}.+?\})')
>>> print p.findall(s)
['{asdfgh{asf}xvc}'] 
```

如果您需要再匹配一个，只需附加`.+?\}`到 re。

```
>>> p = re.compile('(\{[\w|\W]+?\}.+?\}.+?\})')
>>> print p.findall(s)
['{asdfgh{asf}xvc}defg}']
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:28:09.950

你可以使用这个正则表达式

```
\{.*?\{[^{}]*\}.*?\} 
```

* * *

第 N 次出现

```
(\{[^}{]*){N}[^{}]*([^{}]*\}){N} 
```

所以

对于 N=1 将匹配`{xyz}`

对于 N=2 将匹配`{x{y}z}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:01:15.050

`}`要在第一个 之后搜索第二个`{`，构建一个像这样的 RE：

{ `<non-} text>`} `<non-} text>`}

表示`<non-} text>`为`[^}]*`，我们得到：

```
 {[^}]*}[^}]*} 
```

如果您需要区分`{}{}`，`{{}}`事情会变得更加复杂。一般来说，REs 不是处理嵌套的好工具：有一个深刻的数学结果使它如此。任何所谓的解决方法都是一个很快就会变得过于复杂的组合。但是，如果您*知道*您的括号模式是什么样的，并且您只想获得第二个`}`，那么就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T17:19:58.433

为了匹配你`{`的第二次出现，`}`你可以使用

```
\{(?:[^}]*\}){2} 
```

为了匹配你可以使用`{`的第 n 次出现`}`

```
\{(?:[^}]*\}){n} 
```

where`(?:[^}]*\})`是一个非捕获组，这`{n}`意味着必须连续出现 n 次才能产生匹配。

# c# - C# 通知中心

> ID：14548295
> 
> 赞同：0
> 
> 时间：2013-01-27T14:22:41.977
> 
> 标签：c#, ios, objective-c

我正在寻找一个 C# 中的解决方案，非常类似于 ios 在objective-c 中内置的通知中心。我需要像在通知中心一样在对象之间发送消息。有人知道这样做的开源吗？

# websocket - 来自服务器 websocket 的 10 字节数据后客户端断开连接

> ID：14548298
> 
> 赞同：0
> 
> 时间：2013-01-27T14:22:52.693
> 
> 标签：websocket

我设法通过了客户端服务器 websocket 连接的握手阶段，但现在我在将数据从服务器发送到客户端时遇到了问题。这是发送数据的代码：

```
public void Send(String s)throws IOException{

os = socket.getOutputStream();

byte[] rawData = s.getBytes("UTF-8");

int frameCount  = 0;
byte[] frame = new byte[10];

frame[0] = (byte) 129;

if(rawData.length <= 125){
    frame[1] = (byte) rawData.length;
    frameCount = 2;
}else if(rawData.length >= 126 && rawData.length <= 65535){
    frame[1] = (byte) 126;
    byte len = (byte) rawData.length;
    frame[2] = (byte)((len >> 8 ) & (byte)255);
    frame[3] = (byte)(len & (byte)255); 
    frameCount = 4;
}else{
    frame[1] = (byte) 127;
    byte len = (byte) rawData.length;
    frame[2] = (byte)((len >> 56 ) & (byte)255);
    frame[3] = (byte)((len >> 48 ) & (byte)255);
    frame[4] = (byte)((len >> 40 ) & (byte)255);
    frame[5] = (byte)((len >> 32 ) & (byte)255);
    frame[6] = (byte)((len >> 24 ) & (byte)255);
    frame[7] = (byte)((len >> 16 ) & (byte)255);
    frame[8] = (byte)((len >> 8 ) & (byte)255);
    frame[9] = (byte)(len & (byte)255);
    frameCount = 10;
}

int bLength = frameCount + rawData.length;

byte[] reply = new byte[bLength];

int bLim = 0;
for(int i=0; i<frameCount;i++){
    reply[bLim] = frame[i];
    bLim++;
}
for(int i=0; i<rawData.length;i++){
    reply[bLim] = rawData[i];
    bLim++;
}
System.out.println(frame);
os.write(reply);
os.flush();
} 
```

那应该将字符串 s 发送给客户端。我可以发送 9 个字节的数据，但测试客户端在 echo websocket 网站上没有收到它，如果我发送第十个字节，客户端会断开连接并说“错误：未知”。知道我在做什么错吗？提前致谢！斯莫列特。

# javascript - 如果晚上 11 点调用函数来更改表单输入值

> ID：14548299
> 
> 赞同：1
> 
> 时间：2013-01-27T14:22:58.397
> 
> 标签：javascript, forms, date, time

如果用户在当地时间晚上 11 点到 12 点之间使用我的网站（无论如何是系统时间），我需要**更改**HTML 表单中的值。

目前我这样做：

```
<a id="dayLink" class="tooltip" name="dayLink"  onclick='javascript: document.getElementById("day").value++; window.alert("date has been advanced by 1 day.");'> 
```

这可行，但它要求用户**查看**链接，将**鼠标悬停**在链接上以**阅读**工具提示，然后**单击**链接以更改值。

我想**自动执行**此操作，以便它在用户甚至不知道的情况下在后台发生。

**这是我尝试过的：**

```
window.onload=function(){
 myMonthFunction();
 myDayFunction();

}

function myDayFunction()
{
    var d = new Date();
    var x = document.getElementById("day");
    x.value=d.getDate();

    y.value=hours[d.getHours()];

    if (y == 11){

      document.getElementById("day").value++; 
      window.alert("date has been advanced by 1 day.");

    }
} 
```

**window.alert**肯定会被调用（只是在那里进行测试），但**day 的值没有增加**。我不确定为什么这可以作为链接而不是函数。有人看到我做错了什么吗？

* * *

**最终起作用的是：**

```
function myDayFunction()
{
    var d = new Date();
    var x = document.getElementById("day");
    x.value=d.getDate();

    var hours = d.getHours()

    if (hours == 23){

      document.getElementById("day").value++; 
      window.alert("date has been advanced by 1 day.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:50:30.183

该变量`y`未在您发布的代码中定义。因此，当您尝试时`y.value = ...`它不会执行，因为 y 未定义。您可以通过在使用之前定义 y 来纠正它。

或者在您的情况下，由于您已经将那个元素缓存在 中`x`，您可以使用 x 本身。

# ios - 从 iOS 媒体库中获取所有艺术家的列表

> ID：14548301
> 
> 赞同：2
> 
> 时间：2013-01-27T14:23:18.260
> 
> 标签：ios, mpmusicplayercontroller, mpmediaitemcollection

我希望获取用户库中的一个`MPMediaItemCollection`或`NSArray`所有艺术家。这是我当前的代码（显然不起作用）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    MPMediaQuery *artistsQuery = [MPMediaQuery artistsQuery];
    self.artistsArray = artistsQuery.collections;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.artistsArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ArtistsCell"];
    cell.textLabel.text = [(MPMediaItemCollection *)self.artistsArray[indexPath.row]   valueForProperty:MPMediaPlaylistPropertyName];
    NSLog(@"%@", cell.textLabel.text);
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:30:40.413

对于艺术家列表，使用`MPMediaItemPropertyArtist`而不是`MPMediaPlaylistPropertyName`媒体项属性键。

由于您的数据源使用的是`MPMediaItemCollection`，因此请使用该`representativeItem`属性来获取每个集合的艺术家标题字符串。

然后将`textLabel`' 文本设置为艺术家字符串。

```
MPMediaItemCollection *artistCollection = self.artistsArray[indexPath.row];
NSString *artistTitle = [[artistCollection representativeItem] valueForProperty:MPMediaItemPropertyArtist];
cell.textLabel.text = artistTitle; 
```

# android - Google Cloud SQL App Engine API 身份验证

> ID：14548306
> 
> 赞同：2
> 
> 时间：2013-01-27T14:23:59.923
> 
> 标签：android, google-app-engine, google-cloud-sql

我正在计划一个需要数据库的android应用程序。我的计划是使用 Google Cloud SQL 作为数据库，并使用 Google App Engine (GAE) 构建 API。我查看了 appengine 库中提供的 UserService 类，开发了一个简单的应用程序进行身份验证，它将用户重定向到 google 页面进行登录并且工作正常。如果我在 android（或任何操作系统）应用程序中使用此 API，用户每次启动应用程序时都必须登录吗？我没试过，但我希望用户只在第一次登录，GAE 会这样工作吗？只是想澄清一下。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:51:41.200

是的，用户只需登录一次（也就是说，直到他/她撤销 Google 安全设置中的权限）。

# html - 地图上的非绝对或固定 div

> ID：14548310
> 
> 赞同：1
> 
> 时间：2013-01-27T14:24:22.317
> 
> 标签：html, css, mapbox

我正在使用 cssgrid.net 的修改版本来满足我制作网站的需求。现在我正在尝试将 MapBox 地图作为其上方的背景`div`，但我的问题在于拖动，因为地图上 div 的包装器不允许我拖动地图。

正如我在 DOM Inspector 中看到的那样，包装器`div.row`使用了整个可用的水平空间，不允许将地图拖到它下面。

我已经[在 J​​SFiddle 中](http://jsfiddle.net/MAJSY/)重现了我的问题，因此您可以看到我正在使用的实际标记和 CSS。

**编辑：**我截取了我遇到的问题的屏幕截图。这里`div.row`取水平空间，因为定义为`max-width: 1140px; margin: 0 auto;`。这意味着如果我改变它的宽度，它就会居中，如果我改变它的边距，它就会把自己拉到左边。

![布局的屏幕截图](../Images/c1c138851fab2ab5efb92100627f61d0.png)

另外，我在测试时发现的一件事是设置 a`padding`不允许我点击，但设置 a`margin`可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:37:18.217

我删除了`.trecio`，并改变了`.row div`。

`.row`改变你最好看的方式的宽度，我已经设置好了`width:180px;`

```
.row  {
    clear:both;
    margin-left:10px;
    overflow:hidden;

    width:180px;
} 
```

看看：http: [//jsfiddle.net/WxALp/](http://jsfiddle.net/WxALp/)

我再次删除`.tercio`，给`.row`一个`float:left;`和`.container`一个`overflow:hidden;`

```
.container {
    padding: 3em 20px;
    overflow:hidden;
}
.row  {
    clear: both;
    width: 200px;
    margin: 0 auto;
    overflow: hidden;
    float:left;

} 
```

检查它：http: [//jsfiddle.net/AliBassam/ZHZtU/](http://jsfiddle.net/AliBassam/ZHZtU/)

# cakephp - cakePHP 在 default.ctp 上显示购物车

> ID：14548311
> 
> 赞同：0
> 
> 时间：2013-01-27T14:24:39.850
> 
> 标签：cakephp, cakephp-2.2

我有一个标准的 cakePHP 2.2 安装，并希望在主页上显示一个购物车，这是一个 cookie，存储映射到数量的产品 ID 数组。cookie 设置正确，我已经验证过了。

我可以从 cookie 数组中检索 ID，现在需要从数据库中获取产品名称、价格和内容，以便将它们呈现给用户，而不是一串 ID。

我的印象是我应该在我的 AppController.php 文件中执行此操作，并具有以下代码。但这给了我下面的错误。getData() 是我的 ProductController.php 类中的一个方法。我试过使用 $uses 和 $this->loadModel 但似乎都不起作用。

Product->getData() 基本上返回产品的数据库行。我将在我的 default.ctp 文件中格式化它。这样做的正确方法是什么？

```
class AppController extends Controller {
    public $components = array('Cookie', 'Session');
    //public $uses = array('Product');

    function beforeFilter() {
        $this->loadModel('Product');
        $cookieCartVar = $this->Cookie->read('Cart');
        $this->set('cookieCart', $cookieCartVar);

        $p = array();
        if (count($cookieCartVar) > 0) {
            foreach ($cookieCartVar as $prodId => $qty) {
                $p[] = $this->Product->getData($prodId);
            }
        }
        $this->set('cookieProducts', $p);
    }       
}

Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'getData' at line 1

SQL Query: getData 
```

# 编辑

这是因为我错误地尝试在 ProductsController.php 中设置 getData() 方法。我应该一直在尝试在模型中创建此功能，而不是在控制器中。我将其更改为使用 $this->Product->findById() 反正这是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:03:40.693

## 产品型号不是*您的*产品型号

如果您在不存在的模型上调用方法，它将作为查询传递给数据库：

```
$someModel->woopWoop(); // executes `woopWoop` 
```

错误说：

> 错误：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“getData”附近使用正确的语法

因此，您调用`getData`的模型不是具有名为 getData 的方法的模型。

要么您想从插件加载模型，而是拥有 AppModel 的实例；在这种情况下，您应该这样做：

```
$this->loadModel('MyPlugin.Product'); 
```

或者实例属于正确的类，但它根本没有方法`getData`。您只需执行以下操作即可检查哪个：

```
debug(get_class($this->Product)); // outputs e.g. "Product" or "AppModel" 
```

# javascript - 从 FB 相册中提取的随机图像

> ID：14548312
> 
> 赞同：1
> 
> 时间：2013-01-27T14:24:56.590
> 
> 标签：javascript, jquery, facebook, slider

我正在尝试修改一个通过专辑 ID 绘制 Facebook 照片的 jQuery 脚本。

它似乎只拉出专辑中的第一张图片。

如何将“获取”过程修改为随机图像而不是顺序？

jQuery：

```
$.fn.fbPhotos = function(album, limit) {

    function base_append(obj) {
        $(base).append(obj);
    }

    function getPhoto(obj) {

        var id = obj.id;
        var img = obj.img;
        var link = obj.link;

        var wrap = $('<div></div>').attr({
            'class': 'fb-photo',
            'id': id
        });

        var avatar = new Image();
        avatar.src = img;

        var _avatar = $('<a></a>').attr('href', link).attr('target', '_blank').attr('class', 'avatar').html(avatar);

        $(wrap).append($(_avatar));
        return wrap;

    }

    function init() {
        fetch();
    }

    function fetch() {
        var r;
        var data = {};
        $.ajax({
            url: 'https://graph.facebook.com/' + albumId + '/photos?limit=' + topLimit,
            type: 'GET',
            dataType: 'jsonp',
            data: data,
            success: function(obj) {
                //    console.log(obj);
                if (obj.error) {
/*       var img = new Image();
                         img.src = theme_url + '/images/ico_fail_bird.png';
                         wipe(img); */
                    return false; 
```

[jsFiddle](http://jsfiddle.net/2JjbV/43/)上的其余部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:43:21.400

你不能用 Graph API 来做，但是你可以用 FQL [photo table](https://developers.facebook.com/docs/reference/fql/photo)来做。在函数中更改此行`fetch`：

```
url: 'https://graph.facebook.com/fql?q=SELECT+src+FROM+photo+WHERE+album_object_id="' 
     + albumId + '"+ORDER+BY+rand()+LIMIT+' + topLimit, 
```

# java - 将 C++ 中的类从类类型实例化为 std::map 值

> ID：14548313
> 
> 赞同：0
> 
> 时间：2013-01-27T14:24:58.713
> 
> 标签：java, c++, reflection, stl

我需要将以下 Java 概念移植到 C++ 中：

保存对象 id 键和类类型值的哈希映射：

```
 Map<String, Class> _objectsBank = new HashMap<>(); 
```

在 init 方法的某处，我像这样填充银行：

```
 _objectsBank .put("CLASS_ID_1", MyClass1.class);
    _objectsBank .put("CLASS_ID_2", MyClass2.class);
    .... 
```

然后，稍后，我根据需求构造了一个保存在该银行中的类的实例。一种“懒惰”的初始化：

```
 private MyClass initNewProg(String name) {

    MyClass instance;

    try {

        Class cl = _objectsBank.get(name);
        java.lang.reflect.Constructor co = cl.getConstructor(String.class);
        instance= (MyClass) co.newInstance(name);
        return instance;

    } catch (NoSuchMethodException | SecurityException | InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e)
    {
        e.printStackTrace();
        return null;
    }
 } 
```

我将如何在 C++ 中做到这一点？如何将类类型设置为 std::map 值，以便稍后查询它以从中构造适当的实例？Boost库中有这样的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T15:26:08.210

您可以使用函数指针。由于您不能将函数指针指向构造函数，因此必须使用工厂函数：

```
template <class Derived>
Base* create()
{
        return new Derived;
} 
```

然后，您可以将函数指针保存到映射中工厂函数的模板实例以构造您的派生类：

```
int main()
{
        std::map<std::string, Base*(*)()> classMap;
        classMap["Derived1"] = &create<Derived1>;
        classMap["Derived2"] = &create<Derived2>;

        delete classMap["Derived1"]();
        delete classMap["Derived2"]();   
} 
```

在[Ideone上看到](http://ideone.com/QhKPkR)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T15:33:51.987

看看[有没有办法从保存类名的字符串中实例化对象？](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name)以及[使用工厂模式按名称实例化类](https://stackoverflow.com/questions/1832003/instantiating-classes-by-name-with-factory-pattern)，它描述了问题和多种方法以及每种方法的优缺点。这些示例涵盖了类的构造函数注册，这解决了您在@Karthik T 的解决方案中提到的多个 if 语句的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:31:33.147

一种选择是，您可以存储代表实例的字符串，而不是类名，然后使用工厂方法返回正确的实例。但这会更加笨拙，因为您需要通过执行以下操作来手动模拟反射过程。

```
MyClass* initNewProg(string name) {
    if(name == "derived1")
       return new Derived1();
    else if(name == "derived2")
    ....
} 
```

另一种选择是使用单独的工厂方法和函数指针。

```
typedef MyClass* (*MyFactoryFunc)();

map<string,MyFactoryFunc> myMap;

MyClass* createDerived1(){return new Derived1();}
...

MyClass* initNewProg(string name) {
    return myMap[name]();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T14:38:56.677

如果使用 Qt 并将你的对象变成 QObjects 是一种选择，那么它可以通过 Qt 元对象系统来做到这一点。[`QObject::metaObject()`](http://qt-project.org/doc/qt-4.8/qobject.html#metaObject)研究它的实际起点是[`QMetaObject::newInstance()`](http://qt-project.org/doc/qt-4.8/qmetaobject.html#newInstance)方法文档。

这也说明了这一点，在 C++ 中获得这样的功能或多或少需要额外的预处理步骤，例如 Qt's `moc`，它创建额外的 .cpp 文件，其中包含额外的方法和数据来支持这一点。

一个更轻量级的选项可能是开发您自己的简单预处理器，例如读取 .cpp 文件中的一些特殊注释符号，并可能生成代码以创建映射，该映射将对象类型映射到实例化对象的函数或其他东西. 我不确定您是否可以诱使 C++ 模板系统为您完成大部分工作。

# php - 如何在 Drupal 7.x 中自动删除旧的 Feed 项？

> ID：14548316
> 
> 赞同：2
> 
> 时间：2013-01-27T14:25:04.123
> 
> 标签：php, mysql, drupal

Drupal 7.18，我使用从导入的提要项创建节点的提要和提要新闻模块。数据库变得太大，我想完全删除超过 4 周的提要项目。我可以通过编辑特定的提要手动删除提要中的所有项目，使用“删除项目”选项卡，但我只想删除超过 4 周的项目，并设置项目过期规则。我没有找到执行此操作的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:19:00.457

我安装了**开发**模块，它有开发生成模块，在“生成内容”菜单中，我们可以选择生成不同的内容类型，并在生成新内容之前选择**删除**给定内容类型中的所有内容。我检查了这个选项并将新节点数量设置为零。因此，Devel Generate 模块删除了所有节点（Feed 项），但没有创建新节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:58:43.693

我自己正在寻找这个，我只是要创建一个视图来收集超过 1 个月的文章的所有 nid 并将它们传递给[node_delete_multiple($nids)](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_delete_multiple/7) 并将它放在我的自定义模块的 hook_cron() 中，这样它将运行克朗。下面是我的 hook_cron() 函数中的代码。

```
//remove old articles from site.
$old_articles = views_get_view_result('articles_to_delete');
foreach($old_articles as $article){
  $nids_to_delete[]=$article->nid;
}
$num_articles = count($nids_to_delete);
if($num_articles > 0){
  node_delete_multiple($nids_to_delete);
  watchdog('city_sync', '%num old articles were deleted in cron run.', array('%num' => $num_articles), WATCHDOG_NOTICE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:45:25.533

聚合器模块（在核心中，但默认禁用）实际上是这样做的：它聚合提要项目但不创建新节点。

如果您需要在这 4 周期间创建要使用的实际节点（例如，在自定义视图中），也许您可​​以使用规则模块自动将`published`状态设置为未发布 if `$today - $datepublished > 4 weeks`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T17:45:34.047

目前正在开发的补丁允许您管理从提要中删除的提要项目： [https ://drupal.org/node/1470530](https://drupal.org/node/1470530)

# python - 如何为 exec 语句指定另一个范围

> ID：14548317
> 
> 赞同：1
> 
> 时间：2013-01-27T14:25:16.187
> 
> 标签：python

我正在跟踪一个名为`tracedFn()`：

```
sys.settrace(traceit)
tracedFn()
sys.settrace(None) 
```

`tracedFn`：_

```
def tracedFn():
    foo = False 
```

在`traceit`函数中，我想使用 exec 语句来执行带有 tracedFn() 中变量的语句，如下所示：

```
def traceit(frame, event, trace_arg):
    if event == 'line':
        exec 'foo = True'
        print frame.f_locals
        #foo still False

return traceit 
```

但是当我打印 frame.f_locals 时，exec 不会更改 foo 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:27:55.907

见[`exec`声明文件](http://docs.python.org/2.7/reference/simple_stmts.html#the-exec-statement)；`in`您可以通过在表达式后添加来指定上下文：

```
exec 'foo = True' in frame.f_globals, frame.f_locals 
```

请注意，您不能向函数*添加*新的局部变量。您只能更改现有的局部变量（那些在编译时已在函数中声明的变量）。因此，除非`foo`已在您正在跟踪的函数中定义，否则您不能*添加* `foo`到该函数的局部变量。

全局变量不受这种限制；您可以随意添加到全局命名空间；在这种情况下，请忽略该`, frame.f_locals`部分。

# html - 如何从另一个关联表中呈现字段？轨道上的红宝石

> ID：14548318
> 
> 赞同：1
> 
> 时间：2013-01-27T14:25:17.013
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, associations

我有 3 个模型：User、Order 和 UserOrder

**用户订单.rb**

```
belongs_to :user, :class_name => "User"
belongs_to :order, :class_name => "Order" 
```

**用户.rb**

```
has_many :user_orders, foreign_key: :user_id,
                      dependent: :destroy
has_many :ordering, through: :user_orders,
                  source: :order 
```

**订单.rb**

```
has_many :reverse_user_orders, foreign_key: :order_id, 
                              dependent: :destroy,
                              class_name: "UserOrder"

has_many :orderers, through: :reverse_user_orders, source: :user 
```

我在**orders_controller.rb**中有控制器操作，它创建了用户和订单之间的关系并且它工作正常（它在数据库中创建记录）

```
 def create
 ...
   if @order.save
    current_user.order!(@order)
 .... 
```

我想在**订单的 index.html.erb**文件中呈现 user.name

```
<%= order.orderers.name %> 
```

但在 HTML 中，它只呈现标题“用户”。如果我使用 <%= order.orderers %> 它会返回完整的哈希值，包括 user.name。

```
[#<User id: 19, name: "Peter Jackson", email: "foobar@vk.com", remember_token:   "pj6eI2mc2_6G0UbumoEqMA", password_reset_token: nil, password_reset_sent_at: nil, created_at: "2013-01-27 14:10:15", updated_at: "2013-01-27 14:10:28", provider: nil, uid: nil, passport: nil, region: "Zimbabve"] 
```

有什么方法可以在订单的 index.html.erb 中呈现 user.name？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:43:15.660

`order.orderers`将返回一个数组而不是单个值。如果您想打印`name`第一个“订购者”。然后做类似的事情：

```
<%= order.orderers.first.name %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:44:45.013

```
<%= order.orderers.first.name %> #for the first orderer.

<%= order.orderers.last.name %> #for the last orderer. 
```

对于每个订购者：

```
<% for o in order.orderers %>
  <%= o.name %>
 <% end %> 
```

问候！

# c++ - 定义非常量大小的数组时没有错误

> ID：14548319
> 
> 赞同：0
> 
> 时间：2013-01-27T14:25:23.610
> 
> 标签：c++

> **可能重复：**
> [在 C++ 书籍中，数组绑定必须是常量表达式，但为什么下面的代码有效？](https://stackoverflow.com/questions/5947661/in-c-books-array-bound-must-be-constant-expression-but-why-the-following-cod)

我在 main() 中执行此操作：

```
int i = 2; //not constant expression
int foo[i]; //no error? 
```

根据我的书，这不会给我一个错误。为什么？

（我在铿锵3.1）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T14:26:43.323

在启用严格警告的情况下编译它。
`-pedantic`如果你使用 gcc，它会给你一个错误。

大多数编译器通过语言扩展支持可变长度数组 (VLA)。但是，C++ 语言标准不支持将 VLA 作为语言的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:30:36.053

ISO C99 中允许使用可变长度自动数组...有关更多详细信息，请查看[http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Variable-Length.html#Variable-Length](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Variable-Length.html#Variable-Length)

# asp.net - 使用 RadAjaxManager 更新 UserControl 之外的控件

> ID：14548323
> 
> 赞同：1
> 
> 时间：2013-01-27T14:25:35.170
> 
> 标签：asp.net, ajax, telerik

我有一个 RadToolTipManager 正在显示的选择对话框。该对话框由几个输入、一个 RadGrid 和一个用户控件中的按钮组成。当用户单击按钮时，选择对话框关闭。按钮后面的代码正在运行，并且信息正在通过事件处理程序传递回页面。但是，该页面不会使用新数据刷新其控件。

我确定 RadToolTipManager 需要使用 Ajax 调用，我将 RadAjaxManager 添加到页面并将 RadAjaxManagerProxy 添加到用户控件。但我不知道如何获取用户控件中的按钮来启动页面上控件的 Ajax 请求。

根据我的研究，我需要为页面启动 AjaxRequest 或 __doPostBack。后者会很好，它实际上是需要更新的整个页面。

我只是没有使用 javascript/客户端编程的经验。我是否将它附加到用户控件中的按钮？似乎这会在后面的代码之前触发客户端脚本。后面的代码是将数据加载到需要更新的控件中。而且我不确定如何获取 eventTarget 参数的页面（或页面上的面板）的名称。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:29:57.487

有一种更简单的方法可以在一次回发中做到这一点，无需任何 JavaScritp。

假设 Panel1 是您希望在单击用户控件中的按钮时更新的容器。

将 Panel1 包裹在

```
<asp:UpdatePanel runat="server" id="up1" UpdateMode="Conditional">
<ContentTemplate>
<asp:Panel id="Panel1" runat="server"></asp:Panel>
</ContentTemplate>
</asp:UpdatePanel> 
```

在代码隐藏中调用它的 Update() 方法（在您的按钮已经调用的处理程序中）。对您希望更新的所有单独容器重复此操作。这就是 AJAX 的工作原理：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:06:53.197

在您的用户控件代码隐藏中，您可以尝试添加如下属性：

```
public string ButtonID {
  get { return ButtonControl.ClientID; }
} 
```

并以可编程的方式将条目添加到 RadAjaxManager。不确定这是否可行；解决方法是将所有内容包装在 RadAjaxPanel 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:41:35.620

我确实得到了 Telerik 支持的帮助。我的 RadAjaxManager 更新不正确。通过让 RadToolTip 通过 RadAjaxManager 触发更新，我能够完成我需要的工作。

也就是说，这是一个非常“Telerik”的解决方案。我更喜欢只在真正改进设计的地方使用第三方库。rdmptn 的解决方案要通用得多，所以请给他点头。

# .net - 如何将自定义 nuget 提要添加到 TeamCity 构建？

> ID：14548324
> 
> 赞同：48
> 
> 时间：2013-01-27T14:25:59.200
> 
> 标签：.net, msbuild, teamcity, nuget

我使用 Teamcity（在 Internet 的虚拟机上运行）创建了一个 Nuget 服务器，并创建了将包发布到其中的构建。

我还有另一个项目需要使用该包。这个项目也是建立在 teamcity 之上的。在我本地的 Visual Studio 上，我添加了 nuget feed uri，安装了包，一切正常。但是当我尝试在 teamcity 上构建它时，它会说“找不到包”。

所以我的问题是：“如何将自定义 nuget 提要添加到 TeamCity 构建中？”

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-27T14:53:46.320

NuGet 包源是通过 Visual Studio 配置的，但它们存储在每个用户的配置文件中，位于`c:\Users\$USER\AppData\Roaming\NuGet\NuGet.config`. TeamCity 包源的条目需要添加到运行构建的构建代理用户的配置文件中。

1.  在本地计算机上，为您的用户打开 Nuget.config 文件
2.  将 TeamCity 包源的条目复制到剪贴板
3.  在构建代理上，为正在执行 TeamCity 构建的用户打开 NuGet.config 文件
4.  粘贴到 TeamCity 包源条目中。保存并退出。
5.  再次运行构建。它现在应该能够找到包。

**编辑：** ladenedge 记录了我最初回答这个问题时不存在的一个很好的解决方案。如果您没有对构建代理的管理员访问权限或想要基于每个项目配置包源，则该解决方案特别有用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-07-29T15:29:34.127

`NuGet.targets`NuGet 现在可以从与源本身一起存储的文件中读取源，如对[重复问题](https://stackoverflow.com/q/17151709/222481)[的回答](https://stackoverflow.com/a/17757387/222481)中所述。

```
<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <!-- Package sources used to restore packages. By default, registered sources under %APPDATA%\NuGet\NuGet.Config will be used -->
    <!-- The official NuGet package source (https://nuget.org/api/v2/) will be excluded if package sources are specified and it does not appear in the list -->
    <PackageSource Include="https://nuget.org/api/v2/" />
    <PackageSource Include="https://my-nuget-source/nuget/" />
</ItemGroup> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-02-19T20:20:17.010

我不想在源代码中的**NuGet.config**中添加提要，因为这是构建基础架构的一部分，而不是应用程序代码的一部分。

**我也不想在 TeamCity 构建代理上的NuGet.config**中添加提要，因为它很难维护（更新、添加、删除），而且我们有很多构建代理。

什么对我最有效 -在包含全局 nuget 提要和我的自定义（分号分隔）的 TeamCity（在根项目上）中添加**%system.PackageSources% ：**

[https://www.nuget.org/api/v2/](https://www.nuget.org/api/v2/)；[http://<teamcity_server_name>:81/guestAuth/app/nuget/v1/FeedService.svc](http://<teamcity_server_name>:81/guestAuth/app/nuget/v1/FeedService.svc)

如果您查看**NuGet.Targets**，您会发现它使用 $(PackageSources) （如果已定义）。因此，您将其定义为 TeamCity 中的“系统”参数，并将其传递给构建过程。

# python - 获取图片的动态src

> ID：14548326
> 
> 赞同：1
> 
> 时间：2013-01-27T14:26:10.190
> 
> 标签：python, urllib

我有一个`<img />`which src 属性正在由 javascript 脚本动态设置 - 所以`<img src="http://1.2.3.4/some_image.jpg?m=3681368312" />`现在是，一秒钟后`<img src="http://1.2.3.4/some_image.jpg?m=1234234" />`。我想使用 python 来加载这个图像并保存它。问题是当我加载 html 时， src 属性是空的 - 它是稍后设置的，所以当我加载它时我得到`<img src="" />`. 第二个问题是地址的 IP 部分可能会随着时间而变化。我希望我的解决方案是通用的，并且当供应商方面的某些事情必须发生变化时不必更改我的代码。有没有办法加载这个动态变化的内容？

编辑：

我当然知道，我可以对 javascript 行为进行逆向工程 - 解析 js 脚本，获取当前加载的 ip 并生成随机令牌，但我想避免这种情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:06:12.040

要获得 'src' 或您的 'img' 而无需对 javascript 进行逆向工程，您必须在“浏览器”中执行它。

在 python 中，为此，我使用 PyQt4 (QtCore, QtGui, QtWebKit)

这是一个例子：[https ://github.com/JulienPalard/PyWebScrap](https://github.com/JulienPalard/PyWebScrap)

# objective-c - Objective c UIImage ontouch of image

> ID：14548330
> 
> 赞同：1
> 
> 时间：2013-01-27T14:26:46.150
> 
> 标签：objective-c, cocoa-touch, uiimageview, uibutton, uiimage

我遇到的问题是我想显示世界地图。我希望用户能够点击一个特定的国家。我知道我可以使我的 UIImages（国家的图片）成为 UIButtons 的图像，但这在我的情况下不起作用，因为即使 UIButton 是自定义按钮，它也是矩形的。由于地图上的国家不是矩形的，因此按钮会重叠，然后当您尝试单击一个国家时，您最终会单击另一个国家。识别用户点击然后确定他们打算点击哪个图像的最佳方法是什么？

编辑：我忘了提及这一点，但如果我能够获得用户点击的坐标，有没有办法检查点击的像素是否是我的 UIImage 中的空白/透明像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:39:13.200

您可以将 a 添加`UITapGestureRecognizer`到您的`UIImageView`中，这将*在*用户点击图像和点击本身的坐标时返回。从坐标中，您可以确定用户正在单击哪个国家/地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:45:39.120

您需要的是像素完美（或接近像素完美）的触摸检测。

Erica Sadun 发布[了一些代码](http://www.informit.com/articles/article.aspx?p=1998968&seqNum=7)，解释了一种方法。

简而言之，您定义自己的`UIView`派生类并覆盖 pointInside:withEvent:` 方法。在那里，您读取与传递给方法的点相关联的图像像素的 alpha 值，并根据其值决定它是否属于图像。

# google-analytics - 具有相同基本 URL 的多个页面的 Google 分析

> ID：14548333
> 
> 赞同：1
> 
> 时间：2013-01-27T14:26:55.907
> 
> 标签：google-analytics, google-analytics-api

我用于跟踪我的页面的当前方法/代码在 Google 搜索中仅显示一个详细信息。

我想知道是否有任何特殊方法可以以下列方式显示结果？{一个通用名称下的多个链接}

![在此处输入图像描述](../Images/949418017ce3a9aebbd6c1d72ee9509f.png)

我怎样才能做到这一点？有可能吗？或者这会根据观众的访问而自动发生？

我搜索了许多博客/教程，但无法找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:33:50.730

是的，你可以这么做。您应该使用 Google 网站管理员工具：[https ://www.google.com/webmasters/tools/](https://www.google.com/webmasters/tools/)

只需注册到谷歌，将您的域添加到网站管理员工具。登录并转到配置/附加链接。

“附加链接是自动生成的链接，可能会出现在您网站的搜索结果下方。如果您不希望页面显示为附加链接，则可以将其降级。只有网站所有者和拥有完全权限的用户才能降级附加链接。”

# xcode - 如何编译在 64 位 Mac OSX 上开发的 mac osx 应用程序以在 32 位上运行？

> ID：14548335
> 
> 赞同：0
> 
> 时间：2013-01-27T14:27:05.333
> 
> 标签：xcode, macos

我正在用 Objective C/C++ 的 mac osx mountain lion 10.8 编写一个程序。机器是64位的。我是来自 windows .Net 开发和 C/C++ 的 mac 世界的新手

目标：该程序必须与 platoform 10.5 mac osx Leopard 及以后的 32 位/64 位兼容。目标是为 10.5 - 10.8 32bit/64bit 提供单个安装程序/版本

我的理解是（可能我错了，请纠正我）如果我在 10.8 Lion 64 位上编译它，程序将无法在例如 10.5 32 位版本上运行，但可能在 10.5 64 位上运行（当然我有测试它）。

给定我的平台 10.8 64 位，我可以让 xcode 为 32 位/64 位编译应用程序并拥有一个版本而不是两个版本吗？

在 linux/windows 上，如果我编译一个 32 位程序，它也将在 64 位平台上运行，但不是相反，我不确定 xcode/mac 如何实现我的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:04:34.780

将 Base SDK 设置为 Mac 的当前版本（例如 10.7） 将部署 SDK 设置为旧版本（例如 1.4）

将部署目标更改为： ![在此处输入图像描述](../Images/3ca073884bec7ee9c337acd4b3045ff1.png)

将基础 SDK 更改为：![在此处输入图像描述](../Images/4d85661d87f9402f244305afa536d709.png)

在此之上您会发现架构，您可以根据需要将它们更改为 32 或 64

# c# - 用于通用功能的 ASP.NET MVC 助手

> ID：14548342
> 
> 赞同：0
> 
> 时间：2013-01-27T14:27:33.403
> 
> 标签：c#, asp.net, asp.net-mvc

如果这可能是重复，我表示歉意，我到处寻找，找不到答案。

我的问题更像是“最佳实践/惯例”之类的问题。

所以这是我的情况，我有一个 AccountController -> 类似这样的东西：

```
 public AccountController(IAuthenticationHelper authHelper, 
                             IAccountService accountService)
    {
        _authHelper     = authHelper;
        _accountService = accountService;
    } 
```

在我的 _Layout 视图中，我有一个当前登录帐户的占位符。为了获取当前登录的帐户，我从 HttpContext 中检索当前用户身份（我在一个包装类中，所以我可以对其进行单元测试）-> 然后我从数据库中获取帐户详细信息。

现在这是我的问题，我需要在_Layout中的这些数据，我可能会做一个期望帐户模型的部分视图->将它放在_Layout中......这就是我卡住的地方，我不喜欢这个想法这么多访问数据库，我不喜欢我必须从所有操作中考虑这个小细节的事实？我在这里遗漏了什么，我想错了吗？我的概念错了吗？这样做的正确方法是什么？（最好以可测试的方式）。

非常感谢您的帮助！

编辑：如果需要，我很乐意提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:36:58.910

你可以[`Child actions`](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)用来实现这一点。例如，您将有一个特定的控制器专门用于检索当前记录的用户详细信息并将它们传递给局部视图：

```
public class UserInfoController: Controller
{
    [ChildActionOnly]
    public ActionResult Index()
    {
        var model = new UserDetailsViewModel();
        if (User.Identity.IsAuthenticated)
        {
            string username = User.Identity.Name;
            // fetch the user info from the database and populate your view model
            // consider caching this information to avoid multiple round-trips 
            // to the database
        }

        return PartialView(model);
    }
} 
```

那么你当然会有相应的局部视图来显示用户信息。

从你的 _Layout 你可以渲染这个子动作：

```
@Html.Action("Index", "UserInfo") 
```

当然，为了避免多次往返数据库，您可以简单地缓存此信息。

现在您的主要动作和模型不必担心这个通用功能。它由子操作处理。显然，您可以在其中使用依赖注入`UserInfoController`来使其完全可单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:34:44.800

通常，登录后，我将相关帐户详细信息存储在`Session`. 由于`Session`在所有视图中都可用，因此您可以从那里引用它。如果您愿意，您还可以从通用视图模型派生，并让您的控制器从自定义控制器库派生。然后，您可以使用来自数据库或直接来自数据库`OnActionExecuted`的帐户详细信息来填充公共视图模型的用户相关部分。`Session`

# ruby-on-rails - 提交单选按钮并在 Rails 中将参数传递给链接或按钮

> ID：14548347
> 
> 赞同：0
> 
> 时间：2013-01-27T14:28:09.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我制作了一个循环来显示我的选项，并需要制作一个链接或按钮来将我的单选按钮的值传递给我的链接或按钮，但我不知道我是如何获得这个值的，请有人帮忙，我的日志中的循环是：

```
<div id="add_post">
<h1>Escolha o Jornal que deseja adicionar:</h1>
 <ul>
<% current_user.journals.each do |journal| %>
        <li><%= radio_button_tag 'journal',journal.id %><%= journal.name %></li>
<%end%>
 </ul>
<%= link_to "Adicionar",add_post_complete_journal_path(HEREEE),:remote=>true %>
</div> 
```

在哪里说 HEREEE 是我想要出现的选项，请帮助我，我非常感谢 mutch

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:37:08.250

您可以使用 JS/Jquery 来实现相同的目的。只需为所有单选按钮命名，例如“myradiobutton”。然后使用 Jquery 获取所选单选按钮的值并通过 AJAX 调用传递它。

就像是：

```
var selected_value = $("input[name='myradiobutton']:checked").val();

$.ajax({
    url: "<%= add_post_complete_journal_path %>",
    data: {selected_val:selected_value},
    success: function(data){
      // Do something after success
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:18:00.443

非常感谢，我修改了一些部分，但这对我来说非常非常感谢，如果有同样的情况，请在这里编写代码以帮助其他人：

```
<%= submit_tag "Adicionar",:class => "enviar" %>

<script type="text/javascript" >
$(document).ready(function(){

    $("#add_post .enviar").click(function(){

    var selected_value = $("#add_post input[type='radio']:checked").val();

    if(!selected_value) {
        alert("Selecione algum jornal para adicionar !");
        return false;
    }

    $.ajax({
        url: "<%= add_post_complete_journal_path %>",
        data: {selected_val:selected_value},
        success: function(data){
            $.fancybox("<%= escape_javascript(render :partial => 'journals/add_post_complete')%>",
              {
                openEffect: "fade",
                closeEffect: "fade",
                autoSize: true,
                minWidth: 480,
                scrolling: 'auto',
              });
        }
    });

    });

});
    </script> 
```

# php - 停止同时操作的高争用对象

> ID：14548349
> 
> 赞同：1
> 
> 时间：2013-01-27T14:28:09.953
> 
> 标签：php, mysql, mysqli

我正在运行一个连接到 MySQL 数据库的 PHP 应用程序，该数据库有时对某些操作具有高负载和高争用。

有些动作非常重要，两个不同用户同时触发的两个进程有时需要在队列中处理。否则操作可能会发生两次，而这不应该发生。

您认为 PHP 和 MySQL 的性能如何才能克服这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:51:49.247

通过使用[MySQL 事务和/或锁定](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-transactions.html)。

# css - SCSS 中的交替变量

> ID：14548352
> 
> 赞同：0
> 
> 时间：2013-01-27T14:28:40.637
> 
> 标签：css, sass

我想根据 HTML 标记上的类来交替使用哪个变量组。所以我想要这样的东西。

SCSS 变量组：

```
.pink {
  $accent: pink;
}

.green {
  $accent: green;
}

.orange {
  $accent: orange;
} 
```

指定要使用的变量组：

```
<html class="pink"> 
```

HTML 文件：

```
<section class="accent"></section> 
```

部分样式：

```
section.accent {
  background:$accent;
} 
```

因此，在本例中，该部分将具有粉红色背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:53:50.820

不，这是不可能的。Sass 被编译成 CSS，然后 CSS 提供给用户。Sass 不知道文档的结构。

你的例子必须写成这样才能使它工作：

```
section.accent {
    .orange & {
        background: orange;
    }

    .pink & {
        background: pink;
    }

    .green & {
        background: green;
    }
} 
```

# python-2.7 - 基于 GUI 的客户端服务器程序？

> ID：14548359
> 
> 赞同：0
> 
> 时间：2013-01-27T14:29:19.430
> 
> 标签：python-2.7, pyqt4

有人可以告诉我如何编写基于 GUI 的客户端服务器程序吗？我在每一面都写了，但我没有把它们结合起来。

如果可能的话，用于 GUI 的 PyQt 和用于客户端/服务器基础的 SocketServer。如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:41:05.030

不清楚您要使用哪种协议的服务器客户端应用程序。首先，我认为看看如何为服务器客户端项目添加一些图形界面更具建设性。然而，一个例子是[pyXMLRPCssh](http://pyxmlrpcssh.sourceforge.net/Wikka-1.1.6.5/wikka.php?wakka=HomePage/backlinks)。另外，看看在[ubuntu 论坛](http://ubuntuforums.org/showthread.php?t=2001605)上使用 GTK 的例子。

# css - 内部 div 在高度为 auto 的容器内具有 100% 的高度

> ID：14548360
> 
> 赞同：7
> 
> 时间：2013-01-27T14:29:22.600
> 
> 标签：css, css-float, height, positioning

我正在努力让一个 div 完全扩展到它的容器高度。

标记：

```
<div class="container">
  <div class="innerOne inner"></div>
  <div class="innerTwo inner"></div>
</div> 
```

在不同视口`.innerTwo`的内容比 's 的高，`.innerOne`但我希望它的背景与`.innerTwo`'s 的大小相同

款式：

```
.container {
   width: 100%;
   height: auto;
   background-color: yellow;   

   /* clearfix */
   *zoom: 1;
   &:before,
   &:after {
     display: table;
     content: "";
     line-height: 0;
   }
   &:after {
    clear: both;
   }
}

.inner {
   float: left;
   width: 50%;
   height: 100%;
   background-color: red;
} 
```

但是高度不会匹配。我知道可以通过给容器设置一个高度来完成，但我不想这样做，因为它是一个响应式站点。这可能吗？我宁愿不使用JS。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T14:40:21.760

您可以为此使用**display:table-cell**属性。像这样写：

```
.container{
    width:100%;
    border:1px solid red;
    display:table;
}
.inner{
    display:table-cell;
    background:green;
    width:50%;
}
.innerTwo{
    background:blue
} 
```

检查这个[http://jsfiddle.net/XXHTC/](http://jsfiddle.net/XXHTC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:39:54.183

您可以在这里找到所需的解决方案：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:37:42.477

本文讨论响应式媒体中的纵横比和大小问题。它可能不是您特定问题的答案，但讨论使用百分比填充的部分有时对我有所帮助。[http://css-tricks.com/rundown-of-handling-flexible-media/](http://css-tricks.com/rundown-of-handling-flexible-media/)

# objective-c - 保持 NSTimer 在后台运行

> ID：14548361
> 
> 赞同：-1
> 
> 时间：2013-01-27T14:29:22.617
> 
> 标签：objective-c, nstimer

我有以下代码，每次用户单击特定按钮时都会运行 1 分钟。

```
timer = [[NSTimer alloc]init];
        timer=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired) userInfo:nil repeats:YES];
        [[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

我的问题是，如果应用程序处于后台模式，如何保持它运行，以便计时器继续工作？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-12T09:01:47.033

```
//NSTimer run in background.

NSTimer *myTimer;  <br>  
 [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:nil];<br>
   myTimer = [NSTimer scheduledTimerWithTimeInterval:60.0
                                 target:self
                               selector:@selector(targetMethod:)
                               userInfo:nil
                                repeats:YES];<br>
[[NSRunLoop currentRunLoop] addTimer:myTimer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:57:33.447

你不应该`alloc`和`init`你的计时器。

```
NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:60.0
                                 target:self
                               selector:@selector(targetMethod:)
                               userInfo:nil
                                repeats:YES]; 
```

你也可以在任何你想要的地方停止它。

```
[myTimer invalidate]; 
```

# c - 使用waitpid在后台运行进程？

> ID：14548367
> 
> 赞同：9
> 
> 时间：2013-01-27T14:29:41.837
> 
> 标签：c, process, waitpid

如果在命令末尾找到“&”，我正在尝试模仿在后台运行进程的 bash 功能。我有以下功能......而且我认为它没有做我想做的事情

```
int execute(char* args[],int background,int *cstatus){
    pid_t   child;
    pid_t   ch;                         /*Pid of child returned by wait*/
    if ((child = fork()) == 0){                 /*Child Process*/
        execvp(args[0],args);       
        fprintf(stderr, "RSI: %s: command not found\n",args[0]); /*If execvp failes*/
        exit(1);

    }else{          /*Parent process*/
        if (child== (pid_t)(-1)) {
            fprintf(stderr,"Fork failed\n"); exit(1);
        }else{
            if (background==0){             /*If not running in background..wait for process to finish*/
                ch = wait(cstatus);
            }else{
                printf("%ld Started\n",(long)getpid());
        /*  printf("Parent: Child %ld exited with status = %ld\n", (long) ch, (long)cstatus);
    */  }}
    }
return 0;
}
int wait_and_poll(int *cstatus){
    pid_t status;
    status = waitpid(-1,cstatus,WNOHANG);
    if (status>0){
        fprintf(stdout,"%ld Terminated.\n",(long) status);
    }
return 0;
} 
```

如果我只是运行“ls -l”，它会按预期工作..但是如果我想在后台运行 ls..并且让程序继续接受新命令，我调用该函数并将背景标志设置为 1，我希望它在后台运行进程，告诉我它已经创建了进程..然后提示接受下一个命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T14:50:05.360

我不认为`waitpid(-1, &cstatus, WNOHANG);`你认为它会做。您需要检查它的返回值。如果是`> 0`，那就是已经退出的子进程的PID。如果是`0`或`-1`，则没有子进程改变状态。

您可以`waitpid(-1, &cstatus, WNOHANG);`在运行的每个命令之前和/或之后调用。在循环中调用它以捕获多个子出口。

你也可以处理 SIGCHILD。您的进程将在子退出后立即收到此信号，如果您想立即报告子进程终止，而不等待用户输入，这很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T15:10:52.257

这很简单。假设您有一个进程 P，其 id 为 pid。

如果您希望它在后台运行（可以通过 & 在您的输入字符串的末尾识别到 shell/program ），您应该这样做

```
//some code
id=fork();
if(id==0)
{
//child does work here
}
else
{
//Parent does work here
if(!strcmp(last string,"&")==0)waitpid(id,&status,0);
} 
```

因此，如果您请求后台执行，则父级不会等待，否则会等待。

# c - 将 C dll 头文件转换为 Delphi 帕斯卡头文件

> ID：14548368
> 
> 赞同：2
> 
> 时间：2013-01-27T14:30:01.187
> 
> 标签：c, delphi, dll, header, pascal

你能帮帮我吗？我需要将此 C 标头转换为帕斯卡标头

```
#include <wtypes.h>
extern "C"
{

typedef struct _sms_report
{
    char            sUserNumber[24];           
    unsigned char   cPort;                      
    unsigned char   cErrorCode;             
    unsigned char   cCount;                 
    unsigned char   cSuccCount;             

    _sms_report()
    {
        memset(this,0,sizeof(_sms_report));
    }
}_SMS_REPORT;

enum ERRORCODE
{
    _SUCCESS = 0,  
    _INVALID = 1,  
    _PORTCANTUSED = 2, 
    _TIMEOUT = 3,  
      _SOMEFAIL = 4, 
    _UNKNOW = 255   
};

typedef void (*On_WIAConnect)(short conn_no);          
typedef void (*On_WIADisConnect)(short conn_no);          
typedef void (*On_SendSmsReport)(short conn_no,char* seq,unsigned short numberCount,_SMS_REPORT* smsReport);
typedef void (*On_ReceiveSmsMsg)(short conn_no,unsigned char portno,char* seq,char* CallerNumber,char* text,
                                unsigned char type,char* receivetime,char timezone);
typedef void (*On_WIAStatusMsg)(short conn_no,char* seq,unsigned char portnum,unsigned char *pPortStatus);
typedef void (*On_SendUSSDResponse)(short conn_no,unsigned char portno,char* seq,unsigned char errcode);
typedef void (*On_ReceiveUSSDMsg)(short conn_no,unsigned char portno,char* seq,char* text,unsigned char status);

struct CBHandler
{
    On_WIAConnect _OnWIAConnect; 
    On_WIADisConnect  _OnWIADisConnect;
    On_SendSmsReport _OnSendSmsReport; 
    On_ReceiveSmsMsg _OnReceiveSmsMsg; 
    On_WIAStatusMsg  _OnWIAStatusMsg; 
    On_SendUSSDResponse _OnSendUSSDResponse;
    On_ReceiveUSSDMsg _OnReceiveUSSDMsg;
};

bool __declspec(dllexport) __stdcall InitLib(CBHandler *);
bool __declspec(dllexport) __stdcall StartRun(char *svrip,WORD port);
bool __declspec(dllexport) __stdcall GetSvrInfo(char *svrip,WORD port);
bool __declspec(dllexport) __stdcall SendSms(short conn_no,unsigned char PortNo,char* dstNumber,
                unsigned char msgCodingType,char* text,unsigned char type,char * seq);
bool __declspec(dllexport) __stdcall SendUSSD(short conn_no,unsigned char PortNo,unsigned char status,
                                    char* text,char * seq);
bool __declspec(dllexport) __stdcall UninitLib();
}; 
```

我制作了 thius pascal 标题：

```
unit zfsmsdll;

interface
uses
{$IFDEF WIN32}
  Windows;
{$ELSE}
  Wintypes, WinProcs;
{$ENDIF}

const
 DLL_NAME = 'zfsmsdll.dll';

type
 TSmsReport = record

   sUserNumber: packed array [1..24] of Char;
         cPort: Byte;
    cErrorCode: Byte;
        cCount: Byte;
      cSuccCount: Byte;

 end;

 TErrorCode = (

      ecSuccess = 0,
      ecInvalid = 1,
  ecPortCansued = 2,
      ecTimeout = 3,
     ecSomeFail = 4,
      ecUnknown = 255
 );

 TOnWIAConnect = procedure ( conn_no: SmallInt) of object; cdecl;
 TOnWIADisconnect = procedure ( conn_no: SmallInt) of object; cdecl;
 TOnSendSmsReport = procedure (conn_no: SmallInt;  seq: PChar; numberCount: Word; smsReport: TSmsReport) of object; cdecl;
 TOnReceiveSmsMsg = procedure (conn_no: SmallInt; portno: Byte; seq: PChar; CallerNumber: PChar; text: PChar;
                               ttype: Byte; receivetime: PChar; timezone: Char) of object; cdecl;
 TOnWIAStatusMsg = procedure (conn_no: SmallInt; seq: PChar; portnum: Byte; pPortStatus: Byte) of object; cdecl;
 TOnSendUSSDResponse = procedure (conn_no: SmallInt; portno: Byte; seq: PChar; errcode: Byte) of object; cdecl;
 TOnReceiveUSSDMsg = procedure (conn_no: SmallInt; portno:Byte; seq: PChar; text: PChar; status: Byte ) of object; cdecl;

 PCBhandler = ^TCBHandler;
 TCBHandler = record
       HOnWIAConnect: TOnWIAConnect;
    HOnWIADisconnect: TOnWIADisconnect;
    HOnSendSmsReport: TOnSendSmsReport;
    HOnReceiveSmsMsg: TOnReceiveSmsMsg;
     HOnWIAStatusMsg: TOnWIAStatusMsg;
 HOnSendUSSDResponse: TOnSendUSSDResponse;
   HOnReceiveUSSDMsg: TOnReceiveUSSDMsg;
 end;

function InitLib ( Handler: PCBhandler ):Boolean; cdecl; external DLL_NAME;
function StartRun ( SrvIp: PChar; Port: Word ):Boolean; cdecl; external DLL_NAME;
function GetSvrInfo ( SrvIp: PChar; Port: Word ):Boolean; cdecl; external DLL_NAME;
function SendSms (conn_no: SmallInt; PortNo: Byte; dstNumber: PChar; msgCodingType: Byte;
                  text: PChar; ttype: Byte; seq: PChar):Boolean; cdecl; external DLL_NAME;
function SendUSSD (conn_no: SmallInt; PortNo: Byte; status: Byte; text: PChar;
                   seq: PChar):Boolean; cdecl; external DLL_NAME;
function UninitLib ():Boolean; cdecl; external DLL_NAME;

implementation

end. 
```

当我调用 InitLib 函数时，其中参数是初始化完成的方法指针的记录，但 adter 方法 InitLib 程序抛出异常访问冲突类型。我认为问题在于声明方法指针。这是我的主要表单单元：

```
unit main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls,zfsmsdll;

type
  TForm1 = class(TForm)
    btn1: TButton;
    mmoLog: TMemo;
    btn2: TButton;
    procedure btn1Click(Sender: TObject);
    procedure btn2Click(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

  THandlerEvents = class

    procedure OnWIAConnect ( conn_no: SmallInt);cdecl;

    procedure OnWIADisconnect ( conn_no: SmallInt);cdecl;
    procedure OnSendSmsReport (conn_no: SmallInt;  seq: PChar; numberCount: Word; smsReport: TSmsReport);cdecl;
    procedure OnReceiveSmsMsg (conn_no: SmallInt; portno: Byte; seq: PChar; CallerNumber: PChar; text: PChar;
                               ttype: Byte; receivetime: PChar; timezone: Char);cdecl;
    procedure OnWIAStatusMsg (conn_no: SmallInt; seq: PChar; portnum: Byte; pPortStatus: Byte);cdecl;
    procedure OnSendUSSDResponse (conn_no: SmallInt; portno: Byte; seq: PChar; errcode: Byte);cdecl;
    procedure OnReceiveUSSDMsg (conn_no: SmallInt; portno:Byte; seq: PChar; text: PChar; status: Byte );cdecl;

  end;

var
  Form1: TForm1;
  HandlerEvents: THandlerEvents;

  InitHandler: TCBhandler;

implementation

{$R *.dfm}

procedure THandlerEvents.OnWIAConnect ( conn_no: SmallInt);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnConnect processed');
end;

procedure THandlerEvents.OnWIADisconnect ( conn_no: SmallInt);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnWIADisconnect processed');
end;
procedure THandlerEvents.OnSendSmsReport (conn_no: SmallInt;  seq: PChar; numberCount: Word; smsReport: TSmsReport);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnSendSmsReport processed');
end;
procedure THandlerEvents.OnReceiveSmsMsg (conn_no: SmallInt; portno: Byte; seq: PChar; CallerNumber: PChar; text: PChar;
                               ttype: Byte; receivetime: PChar; timezone: Char);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnReceiveSmsMsg processed');
end;
procedure THandlerEvents.OnWIAStatusMsg (conn_no: SmallInt; seq: PChar; portnum: Byte; pPortStatus: Byte);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnWIAStatusMsg processed');
end;
procedure THandlerEvents.OnSendUSSDResponse (conn_no: SmallInt; portno: Byte; seq: PChar; errcode: Byte);cdecl;
begin
  Form1.mmoLog.Lines.Add('OnSendUSSDResponse processed');
end;
procedure THandlerEvents.OnReceiveUSSDMsg (conn_no: SmallInt; portno:Byte; seq: PChar; text: PChar; status: Byte );cdecl;
begin
 Form1.mmoLog.Lines.Add('OnReceiveUSSDMsg processed');
end;

procedure TForm1.btn1Click(Sender: TObject);
begin

// try

     InitHandler.HOnWIAConnect := HandlerEvents.OnWIAConnect;
     InitHandler.HOnWIADisconnect := HandlerEvents.OnWIADisconnect;
     InitHandler.HOnSendSmsReport := HandlerEvents.OnSendSmsReport;
     InitHandler.HOnReceiveSmsMsg := HandlerEvents.OnReceiveSmsMsg;
     InitHandler.HOnWIAStatusMsg := HandlerEvents.OnWIAStatusMsg;
     InitHandler.HOnSendUSSDResponse := HandlerEvents.OnSendUSSDResponse;
     InitHandler.HOnReceiveUSSDMsg := HandlerEvents.OnReceiveUSSDMsg;

     if (InitLib(@InitHandler)) then
      begin
         mmoLog.Lines.Add('DLL initialized');
      end else
      begin
         mmoLog.Lines.Add('DLL NO initialized');
      end;

// except on e:Exception do
//  begin
//    mmoLog.Lines.Add('Exception:' + e.Message);
//  end;
// end;

end;

procedure TForm1.btn2Click(Sender: TObject);
begin
 try
     if (UninitLib) then
      begin
         mmoLog.Lines.Add('DLL UNinitialized');
      end else
      begin
         mmoLog.Lines.Add('DLL NO UNinitialized');
      end;
 except on e:Exception do
  begin
    mmoLog.Lines.Add('Exception:' + e.Message);
  end;
 end;
end;

end. 
```

你能帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:26:07.017

您已经使用`of object`了所有回调函数。这是不正确的。C 标头不这样做，因此存在二进制不匹配。这解释了你的错误。

`of object`通过从您的 Delphi 单元中删除所有提及来解决问题。

其他一些评论：

*   C`char`映射到 Delphi`AnsiChar`或 Delphi `Byte`。在 Unicode Delphi 上，您的使用`Char`将不正确。
*   同样，您应该使用`PAnsiChar`而不是`PChar`.
*   函数`InitLIb`等在 C 代码`StartRun`中声明。`__stdcall`你已经`cdecl`在你的 Delphi 代码中制作了它们。
*   的第四个参数`On_SendSmsReport`接受一个指向结构的指针。您的 Delphi 代码被声明为接收该结构。您需要添加该间接并让 Delphi 代码也接收一个指针。
*   的`pPortStatus`参数`On_WIAStatusMsg`是指向字节数组的指针。您已在 Delphi 中将其声明为`Byte`.

我怀疑您的转换中还有一些错误。我建议你再仔细检查一遍。

# javascript - RequireJS 相对路径

> ID：14548369
> 
> 赞同：33
> 
> 时间：2013-01-27T14:30:06.177
> 
> 标签：javascript, requirejs

我是 RequireJS 的新手。我在 Knockout.js 中编写了许多自定义绑定，并希望使用模块将它们拆分。

目前我的代码布局是：

```
/
  default.html
  js
    code.js
    require-config.js 
    lib
      /require.js
      bridge
        bridge.js
        bindings1.js
        bindings2.js
        bindings3.js 
```

我想从 default.html 加载 bridge.js 并将其加载到所有绑定文件中。我尝试使用 require 函数使用或内联 js 加载 bridge.js。

我的 require-config 非常简单：

```
require.config({
    baseUrl: '/'
}); 
```

在 bridge.js 中，我在使用相对路径加载文件时遇到问题。我试过了：

```
require(['./bindings1', './bindings2', './bindings3'], function () {
    console.log('loaded');
}); 
```

但这只是使用路径 baseUrl + 'bindings1.js'，例如。我在 bridge.js 中尝试了各种迭代。我唯一的成功是如果我写了整个路径：

```
require(['js/bridge/bindings1', 'js/bridge/bindings2', 'js/bridge/bindings3'], function () {
    console.log('loaded');
}); 
```

但这不是我想要的。这似乎是一个非常基本的用例，我想我可能误解了相对路径的工作原理。

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-29T18:32:53.660

相对 ID 是相对于在其中解析 ID 的模块 ID 解析的。请参阅[AMD 规范](https://github.com/amdjs/amdjs-api/wiki/AMD)的`module id format`部分。

有两种方法可以将相对依赖 ID 构建到正确的上下文/范围中：

### 定义调用

定义调用是“模块”的开始/定义。在调用内请求的所有依赖项的`define()`范围都在该模块的 ID 内/相对于该模块的 ID。例子：

```
// does not matter what the file name is.
define(
    'hand/named/module'
    , ['./child']
    , factoryFunction
) 
```

或者

```
// inside of 'hand/named/module.js' file.
define(
    ['./child']
    , factoryFunction
) 
```

在上述两种情况下，都会根据调用`./child`定义的模块 ID 进行解析。两种情况下的`define()`模块 id 都被解析为(+ '.js' 显然，到时候得到它)`hand/named/module``./child``hand/named/child`

### “范围”要求

您可以`require`通过覆盖将调用范围从全局更改为本地。您实际上不需要覆盖/保留 name `require`，这是它所做更改的含义。要求功能成为特定模块的“本地”。

```
// inside 'hand/named/module.js' file
define(
    ['require']
    , function(myLocalRequire){
        require('./child', function(){
            // outcome A
        })
        myLocalRequire('./child', function(){
            // outcome B
        })
    }
) 
```

在结果 A 中，您继续使用“全局”要求 - 附加到父范围的要求。您`./child`解析为 baseURL + '/child'

结果 B 是本地范围的，与模块 id 相关联，`hand/named/module`因此`./child`被解析为`hand/named/child`

@CristiPufu 建议使用`require`仅在该函数范围内的本地对象覆盖全局变量：

```
// inside 'hand/named/module.js' file
define(
    ['require']
    , function(require){
        return function(){
            // here we have access only to "local" require,
            // since in the function declaration you decided to
            // override the 'require' variable with new object.
            // All code outside of this function will use global require.
            require('./child', function(){
                // outcome B
            })
        }
    }
) 
```

我的偏好是将所有相关资源放在`define`call 中。使它们明确而有趣，因为很清楚它们与什么相关。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-03-21T16:06:11.023

在需要配置中使用“包”。这是您问题[主题的有效答案](https://stackoverflow.com/questions/9302284/relative-paths-with-requirejs-modules-packages)

```
require.config({
packages: [
{ 
    name: 'packagename',
    location: 'path/to/your/package/root',  // default 'packagename'
    main: 'scriptfileToLoad'                // default 'main' 
}]
   ... some other stuff ...
}); 
```

在包内部，您将能够使用相对路径。

# python - 如何使均值偏移聚类适用于五个以上的聚类？

> ID：14548370
> 
> 赞同：1
> 
> 时间：2013-01-27T14:30:10.273
> 
> 标签：python, scikit-learn

我在平均移位聚类方面遇到了麻烦。当集群数量较小（2、3、4）时，它的工作速度非常快并输出正确的结果，但当集群数量增加时，它会失败。

例如 3 个集群被检测到： ![集群成功](../Images/f151cde193737fda7c69885cb9d370fb.png)

但是当数量增加时，它会失败： ![集群中心失败](../Images/a1b482915a641c79a6fad374c5eac109.png) ![集群失败](../Images/b40fd2f45726793367182d34509004c0.png)

这是完整的代码清单：

```
#!/usr/bin/env python

import sys
import logging

import numpy as np

import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plot

from sklearn.cluster import estimate_bandwidth, MeanShift, get_bin_seeds
from sklearn.datasets.samples_generator import make_blobs

def test_mean_shift():
    logging.debug('Generating mixture')
    count = 5000
    blocks = 7
    std_error = 0.5
    mixture, clusters = make_blobs(n_samples=count, centers=blocks, cluster_std=std_error)

    logging.debug('Measuring bendwith')
    bandwidth = estimate_bandwidth(mixture)
    logging.debug('Bandwidth: %r' % bandwidth)

    mean_shift = MeanShift(bandwidth=bandwidth)

    logging.debug('Clustering')
    mean_shift.fit(mixture)

    shifted = mean_shift.cluster_centers_
    guess = mean_shift.labels_

    logging.debug('Centers: %r' % shifted)

    def draw_mixture(mixture, clusters, output='mixture.png'):
        plot.clf()
        plot.scatter(mixture[:, 0], mixture[:, 1],
                     c=clusters,
                     cmap=plot.cm.coolwarm)
        plot.savefig(output)

    def draw_mixture_shifted(mixture, shifted, output='mixture_shifted.png'):
        plot.clf()
        plot.scatter(mixture[:, 0], mixture[:, 1], c='r')
        plot.scatter(shifted[:, 0], shifted[:, 1], c='b')
        plot.savefig(output)

    logging.debug('Drawing')
    draw_mixture_shifted(mixture, shifted)
    draw_mixture(mixture, guess)

if __name__ == '__main__':
    logging.basicConfig(level=logging.DEBUG)

    test_mean_shift() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:38:41.240

您可能必须选择较小的带宽。我对启发式选择带宽的方式不是很熟悉。所以这里的“问题”是启发式的，而不是实际的算法。

# foursquare - 如何在没有公共 URL 的应用程序中测试foursquare api

> ID：14548373
> 
> 赞同：0
> 
> 时间：2013-01-27T14:30:31.550
> 
> 标签：foursquare

您好我正在尝试使用 Foursquare API 为 iphone 开发应用程序，该应用程序将是一组工具，将与 ASP.NET 应用程序以及 android 和 windows phone 7 中的相同 ios 应用程序交互。

这里的问题是 api 的推送部分需要 URL 来进行推送，而我还没有 url，如果我现在创建了该 url，当所有工具集上线时我该如何更改？

这个想法是我应该可以在不购买域、url 等的情况下测试这个工具集的所有部分。

这可能吗？

提前致谢。

合资企业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:58:22.347

您可以随时编辑应用程序的[设置](https://foursquare.com/developers/apps)（包括推送 URL），但 Foursquare 无法向非公共 URL 发送推送通知。如果您目前没有公共 URL 并且在本地运行所有内容，那么[localtunnel](http://progrium.com/localtunnel/)之类的东西可能对您有用。

# php - 如何设置php where语句array()

> ID：14548377
> 
> 赞同：0
> 
> 时间：2013-01-27T14:30:54.307
> 
> 标签：php, mysqli

我想使用 php 通过将详细信息存储在数组中来设置动态 WHERE 子句。但我希望有一个默认的 WHERE ，`SchoolId = ?`无论选择哪个选项，它都必须检查。我的问题是我在哪里存储默认的`SchoolId = ?`最佳位置以便将其直接放入`$query`或放入`$where`数组中？

$query = 'SELECT ... FROM ...';

```
// Initially empty
$where = array();
$parameters = array();

// Check whether a specific student was selected
if($stu !== 'All') {
    $where[] = 'stu = ?';
    $parameters[] = $stu;
}

// Check whether a specific question was selected
// NB: This is not an else if!
if($ques !== 'All') {
    $where[] = 'ques = ?';
    $parameters[] = $ques;
}

// If we added to $where in any of the conditionals, we need a WHERE clause in
// our query
if(!empty($where)) {
    $query .= ' WHERE ' . implode(' AND ', $where);
} 
```

还要设置`bind_param()`，包含这个的正确设置是什么？我需要在上面的 if 语句中设置它们还是包含单独的 if 语句？

以下是绑定参数：

```
$selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
// You only need to call bind_param once
$selectedstudentanswerstmt->bind_param("iii",$_POST["school"],$_POST["student"],$_POST["question"]); 

//$_POST["school"] -- SchoolId parameters
//$_POST["student"] -- StudentId parameters
//$_POST["question"] -- QuestionId parameters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:36:34.917

我个人的偏好是将默认值放在 $where 数组中。这样，如果您需要调试或跟踪值，您可以全面了解放入数组的内容。

至于绑定参数的位置，您需要在准备查询后执行此操作，因此在构造查询后您将需要第二组 if 语句。

```
// Initially empty
$where = array('SchoolId = ?');
$parameters = array($schoolID);
$parameterTypes = 'i';

// Check whether a specific student was selected
if($stu !== 'All') {
    $where[] = 'stu = ?';
    $parameters[] = $stu;
    $parameterTypes .= 'i';
}

// Check whether a specific question was selected
// NB: This is not an else if!
if($ques !== 'All') {
    $where[] = 'ques = ?';
    $parameters[] = $ques;
    $parameterTypes .= 'i';
}

// If we added to $where in any of the conditionals, we need a WHERE clause in
// our query
if(!empty($where)) {
    $query .= ' WHERE ' . implode(' AND ', $where);
    $selectedstudentanswerstmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $selectedstudentanswerstmt->bind_param($parameterTypes,implode($parameters));
} 
```

# adsense - robots.txt 以允许 adsense bot

> ID：14548379
> 
> 赞同：2
> 
> 时间：2013-01-27T14:31:09.447
> 
> 标签：adsense, robots.txt

我应该在我的 robots.txt 文件中添加什么内容，以使 adsense bot 不会遇到任何问题来创建我的网站？在 Google 支持 ( [http://support.google.com/adsense/bin/answer.py?hl=en&answer=10532](http://support.google.com/adsense/bin/answer.py?hl=en&answer=10532) ) 中，建议添加以下行

```
User-agent: Mediapartners-Google 
Disallow: 
```

但是在许多在线资源中，甚至在维基百科中，建议的行是：

```
User-agent: Mediapartners-Google*
Disallow: 
```

任何人都可以请我澄清一下，我需要添加“*”吗？添加这个“*”符号的目的是什么？如果它很重要，那么为什么谷歌没有提到它在其支持页面中添加 * 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:32:17.520

我认为您的问题是您的文件名称错误。应该是`robots.txt`。星号不是必需的，因为您知道用户代理的确切名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:44:58.270

那颗有趣的无处不在的星星*无处不在：D：D

但是 Google Webmastertools robots.txt 检查器不喜欢它。

例如，这不允许 Adsense bot，至少根据测试工具，2013 03：

```
User-agent: Mediapartners-Google*
Disallow: 
```

这适用于检查器：

```
User-agent: Mediapartners-Google
Disallow: 
```

[http://drupal.org/node/572926](http://drupal.org/node/572926)鼓励自己测试它

# r - 在 R 语言中使用 openair 包中的 windRose() 函数时出错

> ID：14548385
> 
> 赞同：0
> 
> 时间：2013-01-27T14:31:41.793
> 
> 标签：r

我正在尝试使用R 语言中的`openair`包函数绘制风玫瑰图。**我在.csv 文件**`windRose()`中有风向和风速的样本数据。csv 文件数据也粘贴到帖子中。

 **在 RI 中已加载`openair`包并将数据从 csv 文件读取到`dataframe`数据中。当我调用`windRose()`如下所示的函数时，出现错误。

```
windRose(data,wd="dir",ws="spd")

Error in if (mean.wd < 0) mean.wd <- mean.wd + 360 : 
  missing value where TRUE/FALSE needed** 
```

有人可以帮我找到问题。

示例 csv 文件内容

```
dir,spd
343,4.4
293,4.3
157,14.1
166,9.4
117,14.4
5,13.5
335,5.3
87,14.3
130,14.7
301,12.6
330,13.1
265,9.1
70,13.4
257,11.0
174,4.2
97,12.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:28:32.247

将列重命名为**ws**和**wd**可以解决问题：

```
dat <- read.table(text = 'wd,ws    ## I use wd and ws
343,4.4
293,4.3
157,14.1
166,9.4
117,14.4
5,13.5
335,5.3
87,14.3
130,14.7
301,12.6
330,13.1
265,9.1
70,13.4
257,11.0
174,4.2
97,12.2',header=T,sep = ',')

windRose(dat) 
```

![在此处输入图像描述](../Images/dbfae7f297b17603506ea1edaedf6250.png)**

# php - 致命错误：调用未定义函数 openssl_random_pseudo_bytes()

> ID：14548389
> 
> 赞同：0
> 
> 时间：2013-01-27T14:32:21.690
> 
> 标签：php, openssl, vps

我找到了一个脚本，它将随机生成 X 数量的数字/字母。它在我的本地主机上运行良好，但是当我将脚本上传到我的 VPS 时它不起作用。

我收到以下错误：

```
Fatal error:  Call to undefined function  openssl_random_pseudo_bytes() 
```

那将是这部分代码：

```
function crypto_rand_secure($min, $max) {
        $range = $max - $min;
        if ($range < 0) return $min; // not so random...
        $log = log($range, 2);
        $bytes = (int) ($log / 8) + 1; // length in bytes
        $bits = (int) $log + 1; // length in bits
        $filter = (int) (1 << $bits) - 1; // set all lower bits to 1
        do {
            $rnd = hexdec(bin2hex(openssl_random_pseudo_bytes($bytes)));
            $rnd = $rnd & $filter; // discard irrelevant bits
        } while ($rnd >= $range);
        return $min + $rnd;
} 
```

我在 stacksoverflow 上找到了同样问题的帖子。但是，它需要安装一个模块。我不知道该怎么做，但我在 VPS 的 WHM 上找到了这个。

**Home »软件 »模块安装程序**

当我选择 Perl Module 并搜索***openssl***时，我得到了很多结果。我已经安装了其中一个，并且我默认安装了一个。

***这里是安装的 openssl 模块：***

地穴::OpenSSL::RSA

地穴::OpenSSL::随机

仍然......我在我的网站上遇到同样的错误。有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:03:07.560

您还需要按照[http://php.net/manual/en/openssl.installation.php](http://php.net/manual/en/openssl.installation.php)`--with-openssl`中的说明编译 php 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:28:08.063

您发现的 OpenSSL Perl 模块是一个红鲱鱼。它们对 PHP 没有任何影响。（PHP 和 Perl 是两种完全独立的编程语言。）

您需要安装的是 openssl PHP 模块。我不记得 cPanel 是否有重建 PHP 的选项，但如果我是对的并且确实如此，那么您需要完成该过程并在那里启用 OpenSSL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T14:19:54.530

我自己也有同样的问题。我通过编辑我的**php.ini**文件来解决它 - 更改`;extension=php_openssl.dll`为`extension=php_openssl.dll`.

（对于我的安装，我的**php.ini**文件位于我的`P:\Program Files\EasyPHP-12.1\conf_files\`目录中。）

# c++ - 在编译时检查成员函数签名

> ID：14548399
> 
> 赞同：0
> 
> 时间：2013-01-27T14:33:46.697
> 
> 标签：c++, templates, macros

> **可能重复：**
> [是否可以编写 c++ 模板/宏来检查两个函数是否具有相同的签名](https://stackoverflow.com/questions/14541519/is-it-possible-to-write-c-template-macros-to-check-whether-two-functions-have)

是否可以编写 c++ 模板/宏来检查两个成员函数在编译时是否具有相同的签名（返回类型和参数列表）？

我想要这样的东西：

```
CHECK_SIGNATURES(Foo, foo, Bar, bar); 
```

如果 Foo::foo 和 Bar::bar 函数具有不同的返回类型或参数列表，则编译失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:35:59.590

尝试以下操作：

```
template <class T>
bool same(T, T) { return true; }

template <class T, class U>
bool same(T, U) { return false; } 
```

或者，也许您可​​以在[重复问题](https://stackoverflow.com/a/14541544/701092)`std::is_same`的答案中使用 like 。

# sdk - Powerpoint OOXml - 区分图像和视频？

> ID：14548401
> 
> 赞同：1
> 
> 时间：2013-01-27T14:33:51.517
> 
> 标签：sdk, powerpoint, openxml

我刚刚开始使用 ooxml，使用其他人的代码（在 F# 中我只是切线熟​​悉），并且在截止日期前，如果这是一个愚蠢的问题，请原谅我。

我有一个 pptx powerpoint 文件，上面有两个项目。嵌入的图像和嵌入的视频。

据我所知，当使用 OpenXml SDK 解析文件时，视频和图像都显示为`DocumentFormat.OpenXml.Presentation.Picture`.

如何区分哪个实际上是视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:28:28.520

查看 PPTX 本身，以直接了解 SDK 正在解释什么并将其传回给您。

如果您将视频添加到原本空白的演示文稿中，则 PPTX 的 \media 文件夹中将同时存在视频文件和图像。图像是 PPT 从视频中创建的……它是海报框，当视频没有播放时 PPT 向您显示的内容。

我不肯定，但怀疑如果那里有 media[x].wmv 文件，海报图像将是 image[x].png （我认为可能是不同的扩展名，但相同的数字 [x]。

您还可以查看：

```
\ppt\slides\_rels\slide[x].xml.rels

    <?xml version="1.0" encoding="UTF-8" standalone="true"?>

    -<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Target="../slideLayouts/slideLayout1.xml" 
Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/slideLayout" Id="rId3"/>

<Relationship Target="../media/media1.wmv" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/video" Id="rId2"/>

<Relationship Target="../media/media1.wmv" Type="http://schemas.microsoft.com/office/2007/relationships/media" Id="rId1"/>

<Relationship Target="../media/image1.png" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Id="rId4"/></Relationships> 
```

请注意，图像和视频/媒体具有不同的 Type="xxx" 信息。

# winapi - Win32如何打印透明图片（色键）

> ID：14548404
> 
> 赞同：3
> 
> 时间：2013-01-27T14:34:04.973
> 
> 标签：winapi, printing, transparency, alphablending

我正在**尝试**在 Win32 应用程序中打印透明图像。该图像具有 Alpha 通道，但我也可以使用简单的透明蒙版。

使用[::AlphaBlend](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351%28v=vs.85%29.aspx)方法时，它会在屏幕上正确显示，并在我的 HP ColorSphere 打印机上正确打印。但是，对于 PDF 打印机（例如 Primo PDF），图像在 PDF 中显得不透明。

在 Word 中插入相同的图像时，将透明度颜色设置为白色，使用 Primo PDF 时图像显示正确透明。

**我应该如何绘制我的图像，以便透明度也适用于 PDF 打印机？或者：Microsoft Word 是如何实现这一点的？**

谢谢，

费边

# css - 使用css3作为网站背景

> ID：14548407
> 
> 赞同：3
> 
> 时间：2013-01-27T14:34:19.443
> 
> 标签：css, background, grid, gradient

我想用不使用图像的 CSS3 和 HTML5 texhnologies 得到这个结果。

这是HTML

```
<div id="overlay"></div>
<div id="lines"></div> 
```

和 CSS

```
body {
    background: #45484d;
    z-index:-5;
}

#lines {
      background-size: 20px 20px;    
    background-image: -webkit-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 7px),-webkit-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 7px);
    background-image: -moz-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 7px),-moz-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 7px);
    background-image: -o-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 7px),-o-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 7px);
    background-image:repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 7px),repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 7px);
    height:100%;
    width:100%;
    opacity:0.14;
    position:absolute;
    top:0;
    left:0;
    z-index:-4;
}

#overlay {
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:100%;
    z-index:-3;
} 
```

我有点在 jsfiddle 上得到了一些结果：

[http://jsfiddle.net/tt13/BA8Wk/2/](http://jsfiddle.net/tt13/BA8Wk/2/)

但想不出还能做什么。谁能帮我实现这个结果？

[http://i.stack.imgur.com/6BrlY.jpg](http://i.stack.imgur.com/6BrlY.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:51:10.197

*   dabblet：[http ://dabblet.com/gist/4649123](http://dabblet.com/gist/4649123)
*   jsfiddle： http: [//jsfiddle.net/W4LpR/6/](http://jsfiddle.net/W4LpR/6/)（尝试在更大的窗口中打开结果）

HTML

```
<div id="overlay"></div>
<div id="lines"></div>
<div id="lines2"></div> 
```

CSS

```
body {
    background-image: -ms-radial-gradient(center, circle closest-corner, #636363 0%, #27282B 100%);
    background-image: -moz-radial-gradient(center, circle closest-corner, #636363 0%, #27282B 100%);
    background-image: -o-radial-gradient(center, circle closest-corner, #636363 0%, #27282B 100%);
    background-image: -webkit-gradient(radial, center center, 0, center center, 447, color-stop(0, #636363), color-stop(1, #27282B));
    background-image: -webkit-radial-gradient(center, circle closest-corner, #636363 0%, #27282B 100%);
    background-image: radial-gradient(circle closest-corner at center, #636363 0%, #27282B 100%);
    z-index:-5;
}

#lines {
      background-size: 20px 20px;    
    background-image: -webkit-repeating-linear-gradient(0deg, #fff, #fff 1px, transparent 2px, transparent 20px),-webkit-repeating-linear-gradient(-90deg, #fff, #fff 1px, transparent 2px, transparent 20px);
    background-image: -moz-repeating-linear-gradient(0deg, #fff, #fff 1px, transparent 2px, transparent 20px),-moz-repeating-linear-gradient(-90deg, #fff, #fff 1px, transparent 2px, transparent 20px);
    background-image: -o-repeating-linear-gradient(0deg, #fff, #fff 1px, transparent 2px, transparent 20px),-o-repeating-linear-gradient(-90deg, #fff, #fff 1px, transparent 2px, transparent 20px);
    background-image:repeating-linear-gradient(0deg, #fff, #fff 1px, transparent 2px, transparent 20px),repeating-linear-gradient(-90deg, #fff, #fff 1px, transparent 2px, transparent 20px);
    height:100%;
    width:100%;
    opacity:0.14;
    position:absolute;
    top:0;
    left:0;
    z-index:-4;
}

#lines2 {
      background-size: 100px 100px;    
    background-image: -webkit-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 100px),-webkit-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 100px);
    background-image: -moz-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 100px),-moz-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 100px);
    background-image: -o-repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 100px),-o-repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 100px);
    background-image:repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 100px),repeating-linear-gradient(-90deg, #fff, #fff 2px, transparent 2px, transparent 100px);
    height:100%;
    width:100%;
    opacity:0.14;
    position:absolute;
    top:0;
    left:0;
    z-index:-3;
}

#overlay {
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:100%;
    z-index:-2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:11:40.383

我对此的尝试（仅用于演示的 -webkit 规则（Chrome））：

```
background-size: 100px 100px;    

background-image:
   repeating-linear-gradient(0deg, #999, transparent 2px, transparent 20px),
   repeating-linear-gradient(0deg, #fff 1px, transparent 2px, transparent 100px),
   repeating-linear-gradient(90deg, #999, transparent 2px, transparent 20px),
   repeating-linear-gradient(90deg, #fff 1px, transparent 2px, transparent 100px); 
```

（[小提琴](http://jsfiddle.net/dXyHQ/)）

这是一个带有条纹的[：](http://jsfiddle.net/dXyHQ/1/)

```
background-size:4px 4px; 
background-image: 
  repeating-linear-gradient(45deg, transparent, transparent 1px, #333 2px, transparent 3px); 
```

# android - Android 位置，经度（最小值，最大值），纬度（最小值，最大值）

> ID：14548411
> 
> 赞同：4
> 
> 时间：2013-01-27T14:34:47.237
> 
> 标签：android, coordinates, distance

我在使用 Android 时遇到了一点问题。

我有我的 GPS 位置，清晰的经纬度，以及以米为单位的搜索光线（例如 100 米），好吗？

想象一下我在 ray 圆心的位置，我会知道如何在 Android 上获得： topLeft Latitude topLeft Longitude bottomLeft Latitude bottomLeft Longitude

与圆内接的矩形。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:13:22.087

1）将中心经纬度转换为以米为单位的笛卡尔x，y：（纬度在球体上，x，y是平面地图，然后您可以继续学习数学

2）使用极坐标公式创建4个角点
，第一个角的角度为45度，r = 100m
，正方形的第二个角的角度为45 + 90度

3) 将 4 个笛卡尔米坐标转换回 lat,lon

在这里更详细一点 [如何找到围绕某个位置 5 英里半径的一组纬度/经度对](https://stackoverflow.com/questions/13599044/how-to-find-a-set-of-lat-long-pairs-surrounding-a-5-miles-radius-of-a-certain-lo/13612207#13612207)

并在这里查看我的答案

[PHP：如何使用与一组坐标的距离来创建地理围栏（边界框）](https://stackoverflow.com/questions/14519322/php-how-to-create-a-geo-fencebounding-box-using-the-distance-from-a-set-of-co/14532162#14532162)

# java - Android Stock 电子邮件应用程序不想与 pop3 服务器一起使用

> ID：14548412
> 
> 赞同：1
> 
> 时间：2013-01-27T14:34:49.253
> 
> 标签：java, android, email, pop3

我一直在使用 pop3 服务器来补充我最近在 java 中编写的 smtp 服务器，但是当我尝试将它连接到股票 android 电子邮件应用程序时（如果这有什么不同的话，在三星 g s3 上）它将执行以下操作命令：

CAPA

我的服务器回复

+OK 能力列表如下 \r\n

用户\r\n

UIDL \r\n

. \r\n

然后，它通过用户名登录并通过

USER [用户名] \r\n

PASS [密码省略] \r\n

正是这一点，它开始表现得很奇怪。电子邮件应用程序发出“STAT”命令，我的服务器根据 POP3 的规范回复它应该如何：

+确定 1 300 \r\n

但是，在此之后，它完全挂起，并且在服务器端收到的唯一内容是“NULL”等，直到服务器关闭。有人知道怎么修这个东西吗？

编辑：此外，在我的手机插入并打开电子邮件调试的情况下仔细检查 logcat 之后，它看起来并没有分解出任何异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:57:18.290

好吧，我找到了造成它的原因。我在密码上有两个输出，因为我没有足够仔细地阅读规范。现在已经修复了 :)

# php - 用于 android 的 asynctask 使用 php 连接到 mysql

> ID：14548416
> 
> 赞同：2
> 
> 时间：2013-01-27T14:35:35.197
> 
> 标签：php, android, mysql, json

谁能帮我把如何做到这一点放在 asynctask [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)中。这不适用于 android 4.0.3。谁能帮我？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:59:48.447

您可以使用严格模式。但是这种模式只是为了测试和强制android忽略“在主线程上运行”。强烈建议使用`AsyncTak`.

您已经注意到该教程也用于`AsyncTask`某些部分，但它在 UI 线程上运行。情况不妙。您必须删除该部分：

例如在教程中我们有：

```
protected String doInBackground(String... params) {
    // updating UI from Background Thread
    runOnUiThread(new Runnable() {
    public void run() { 
```

您必须将其更改为：

```
protected String doInBackground(String... params) {
    public void run() { 
```

我相信这会对你有所帮助。

# haskell - haskell 中的 mod 函数和类型类

> ID：14548417
> 
> 赞同：0
> 
> 时间：2013-01-27T14:35:38.083
> 
> 标签：haskell, types, typeclass

我在haskell中有这行代码，其中`level :: Float`，和 `y :: Int`，

```
mod (floor(fromIntegral y + (level/2))) (floor level) 
```

和 ghci 向我返回以下内容：

```
No instance for (Integral Float)
  arising from a use of `mod'
Possible fix: add an instance declaration for (Integral Float) 
```

例如，我使用 fromIntegral 和 floor 尝试了几个版本

```
mod (( y + (floor $ level/2))) (floor level) 
```

我试图转换`level/2`为积分，但总是返回相同的答案

我知道我必须给 mod 两个 Integral 参数，所以我不知道为什么代码是错误的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:55:12.080

与, `level :: Float`_`y :: Int`

```
mod (floor(fromIntegral y + (level/2))) (floor level) 
```

是有效的并产生`Integral`调用者想要的任何类型。

```
Prelude> let level = pi :: Float
Prelude> let y = length "foobar"
Prelude> mod (floor(fromIntegral y + (level/2))) (floor level) :: Integer
1 
```

因此错误

```
No instance for (Integral Float)
  arising from a use of `mod'
Possible fix: add an instance declaration for (Integral Float) 
```

表示您正在尝试将结果用作`Float`.

也许你想要

```
fromIntegral $ mod (floor(fromIntegral y + (level/2))) (floor level) 
```

或者您可能需要更改调用上下文以使用`Integral`类型。

# windows-phone-7 - 多个字段的 UpdateSourceTrigger

> ID：14548418
> 
> 赞同：1
> 
> 时间：2013-01-27T14:35:41.593
> 
> 标签：windows-phone-7, binding

基于：

[Windows Phone 7 文本框的“UpdateSourceTrigger=PropertyChanged”等效项](https://stackoverflow.com/questions/4833100/updatesourcetrigger-propertychanged-equivalent-for-a-windows-phone-7-textbox)

如果我的应用程序有 100 个文本框需要更新其来源，我是否必须使用代码来更新它们？

```
TextBlock1.GetBindingExpression(TexBlock.TextProperty).UpdateSource();
TextBlock2.GetBindingExpression(TexBlock.TextProperty).UpdateSource(); 
```

...

```
TextBlock100.GetBindingExpression(TexBlock.TextProperty).UpdateSource(); 
```

我想在**没有 VisualTree**的情况下做到这一点。类似于使用 DataContext 将更新设置为父对象。

# php - 返回数组中的文件目录

> ID：14548419
> 
> 赞同：2
> 
> 时间：2013-01-27T14:35:44.837
> 
> 标签：php, file, readdir, opendir, getcwd

我正在尝试创建一个函数来读取目录并在数组中返回所有文件的工作目录，但它不起作用。我不知道为什么代码不起作用，你能帮我吗？

```
$postsDirectory = "../posts/";

function listFiles() {
    $results = array();
    $handler = opendir($postsDirectory);

    while ($file = readdir($handler)) {
        if ($file != "." && $file != "..") {
            $results[] = getcwd($file);
        }
    }
    closedir($handler);
    return $results;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:55:00.113

[`getcwd()`](http://php.net/getcwd)返回正在执行的脚本的工作目录。它不带任何参数，并且与文件系统上的其他文件无关（“工作目录”的想法对于任意文件也没有意义）。我假设您真正想要的是给定目录中所有目录的列表。

我会为此使用[RecursiveDirectoryIterator](http://php.net/recursivedirectoryiterator)：

```
$it = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($postsDirectory),
    FilesystemIterator::SKIP_DOTS
);

$results = array();
while($it->valid()) {
    if($it->isDir()) {
        $results[] = $it->getSubPath();
    }
    $it->next();
} 
```

# javascript - 引用数据类型 javascript

> ID：14548421
> 
> 赞同：3
> 
> 时间：2013-01-27T14:35:55.977
> 
> 标签：javascript

从我可以从这两个来源推断：

[源 1](http://docstore.mik.ua/orelly/webprog/jscript/ch03_12.htm)和[源 2](https://stackoverflow.com/questions/3907613/how-is-a-javascript-string-not-an-object)

是在javascript中，当在对象的上下文中使用原始数据类型时，它会在内部转换为对象。但这只是一个**临时转换**，因为对象在使用后将从内存中删除。

我的问题是**使用这种方法有什么好处？**只是为了节省内存吗？还是有任何其他的广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:51:04.787

只是因为 JavaScript 是一种[基于原型的](http://en.wikipedia.org/wiki/Prototype-based_programming)程序语言。

> 基于原型的编程被视为鼓励程序员专注于某些示例的行为，然后才担心将这些对象分类为原型对象，这些原型对象后来以类似于类的方式使用。因此，许多基于原型的系统鼓励在运行时更改原型。

这决定了你可以做这样的事情：

```
var str = 'foo'
str.weight // just return 'undefined'

var yes = true, no = false
yes.__proto__.length = function() { return this.toString().length; }
yes.length() // 4
no.length() // 5

var num = 10, amount = 0
num.__proto__.plus = function(num) { return this + num; }
amount.plus(num) // 10 
```

但不幸的是，JavaScript 的一些特性受到了 Java 的影响，例如[原始与对象的区别](http://brendaneich.com/2008/04/popularity/)，所以你得到了这些连贯的东西：

```
var str = 'foo'
str.weight = 42
str.weight // undefined

str = new String('foo')
str.weight = 42
str.weight // 42

1.toString() // error!
var n = 1
n.toString() // '1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:56:44.873

我相信由于您提到的内容，JavaScript 提供的一个优势是简单的*类型强制*。

正如前面所暗示的，JavaScript 是松散类型的。你可以声明一个变量，而不必声明它是什么类型的变量，因此你不知道你在用它做什么。这具有简单的优点，例如能够编写：

```
var str = 'hello user #',
    num = 3,
    sayhello = str + num;

alert(sayhello); // alerts 'hello user #3' 
```

请注意这里如何将数字简单地添加到字符串中，就好像它本身是一个字符串一样。

因此，许多可用的运算符和方法在强类型语言中可能不太容易使用。您可以`parseInt`在参数上使用该方法，而无需先检查或转换参数的类型：

```
var returnWholeNumber = function (arg) {
        return parseInt(arg, 10);
    },
    str = '5 is the answer',
    num = 8.19437;

alert(returnWholeNumber(str)); // alerts number 5
alert(returnWholeNumber(num)); // alerts number 8 
```

通过提供临时对象包装器，JavaScript 使您不必自己进行一些转换。它只是根据您尝试执行的操作提供包装器，然后将其丢弃。因此，JavaScript 可以比强类型语言更具动态性和表现力。

这对于条件句也很有用。一些值（例如，`0`或空字符串`''`）就是所谓的*falsey*。这样，您可以对它们进行简单的布尔检查，JavaScript 会将原始数据类型包装在布尔包装器中。

```
if (!userInput) {
    alert('no input');
} 
```

但是，类型强制可能会令人困惑，需要谨慎：

```
alert('1' + 2 + 3); // alerts 123
alert('1' + '2' + '3'); // alerts 123
alert(1 + 2 + 3); // alerts 6 
```

也适用于条件句。检查类型时使用三等号，以避免意外强制：

```
var i = '3';
if (i == 3) { // type-coercing conditional; i can be a string or a number and this will be true
    alert('i is 3'); // will successfully alert
}
if (i === 3) { // type-checking conditional; i has to be an actual number (and the value must be 3)
    alert('i is a number 3'); // will not alert because i is a string
} 
```

# sql - SQLMaestro for PostgreSQL 的开源替代品

> ID：14548425
> 
> 赞同：0
> 
> 时间：2013-01-27T14:36:09.393
> 
> 标签：sql, database, postgresql, modeling

我正在寻找用于[PostgreSQL 的 SQLMaestro 的开放源](http://www.sqlmaestro.com/products/postgresql/maestro/)代码替代品，因为它具有可视化数据库设计器，这在 pgAdmin 中不可用，这使得数据库设计变得如此简单。

PS我不确定这在这里是否非法，但我不得不问一下，因为谷歌没有帮助我找到替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:46:08.673

[SQL Power Architect](http://www.sqlpower.ca/page/architect)为我解决了这个问题。在 Windows、OS X 和 Linux 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:39:35.480

[我在PostgreSQL wiki](https://wiki.postgresql.org/wiki/GUI_Database_Design_Tools)中找到了很棒的工具，感谢你们的帮助。

# android - Android片段XML布局问题

> ID：14548427
> 
> 赞同：1
> 
> 时间：2013-01-27T14:36:16.133
> 
> 标签：android, xml, layout, android-fragments, fragment

我正在尝试实现我认为相当简单的片段布局，但我遇到了一些问题。任何人都可以粗略地为以下布局建议 XML 解决方案（我知道现在支持嵌套片段，但如果可能的话，我想避免这种情况）：

"=============================="
| 111111111111111111 | 333333333 |
| 111111111111111111 | 333333333 |
| 111111111111111111 | 333333333 |
| 111111111111111111 | 333333333 |
| 111111111111111111 | 333333333 |
| 111111111111111111 | 333333333 |
| ===================| 333333333 |
| 222222222222222222 | 333333333 |
| 222222222222222222 | 333333333 |
"==============================

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:48:51.817

这确实是一个简单的布局。

这是你想要的？

![在此处输入图像描述](../Images/a431385f8aede986344b9ca8bb998d19.png)

代码如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#ff0000" >
        </FrameLayout>

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="2"
            android:background="#00ff00" >
        </FrameLayout>
    </LinearLayout>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="2"
        android:background="#0000ff" >
    </FrameLayout>

</LinearLayout> 
```

# ninject - Ninject 约定泛型接口具有与具体类不同数量的参数

> ID：14548429
> 
> 赞同：1
> 
> 时间：2013-01-27T14:36:25.757
> 
> 标签：ninject, conventions, arity

有没有办法使用 NInject 约定来绑定具有与实现它的具体类不同数量的类型参数的泛型接口？

例如：

```
 public interface IRepository<T1, T2>
    {
        ...
    }
    public class Repository<T1, T2, T3> : IRepository<T1, T2>
    {
        ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:37:21.433

您无法直接执行此操作，但解决方案相当简单：创建一个具有两个继承自 的类型参数的新类型`Repository<T1, T2, T3>`，如下所示：

```
class Rep<T1, T2> : Repository<T1, T2, ActualType>
{
} 
```

这种类型可以直接映射到 a`IRepository<T1, T2>`而不会留下任何未解析的泛型类型参数。

# c# - Awesomium 浏览器缩放 v1.7

> ID：14548430
> 
> 赞同：0
> 
> 时间：2013-01-27T14:36:30.703
> 
> 标签：c#, wpf, awesomium

如何在 Awesomium v​​1.7 中放大/缩小 webControl？v1.7 中没有 webControl.zoom ...我在启动 websession 时应用缩放，如下所示：

```
 myWebControl.WebSession = WebCore.CreateWebSession(new WebPreferences() { CustomCSS = "body { zoom: 200%; }" }); 
```

但我也希望能够在显示 web 控件后应用放大/缩小。就像我们在 v1.6 中所做的那样。我正在使用 wpf C#。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:21:46.803

`Zoom`属性和支持 API（类似于 1.6.x 中可用的 API）将在 1.7 版的最终版本中**提供**。

# css - icomoon 字体和 wordpress 导航菜单

> ID：14548436
> 
> 赞同：1
> 
> 时间：2013-01-27T14:37:12.523
> 
> 标签：css, wordpress, menubar

我正在尝试通过 icomoon 字体在 wordpress 中通过菜单栏的文本链接左侧添加图标。我正在使用从 icomoon 下载的 CSS。我已经在 WP 管理区域的菜单选项区域中添加了该类。图标（字体）确实显示在“li”元素上，但我希望将它们添加到“a”元素中。仅供参考，添加字体的类使用 :before 选择器。这是css的摘录：

```
[class^="icon-"]:before, [class*=" icon-"]:before {
  font-family: 'icomoon';
  font-style: normal;
  speak: none;
  font-weight: normal;
  line-height: 1;
  -webkit-font-smoothing: antialiased;
  color: $white;
}

.icon-home:before {
  content: "\68";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:51:57.953

试试这个。这是我使用的方法。

HTML

```
<h3 class="title-style">
    <a href="#">
    <span aria-hidden="true" data-icon="[insert number from icomoon]";></span>TITLE
    </a>
</h3> 
```

CSS

```
.title-style > a{
    font-family: 'font name';
}

[data-icon]::before {
    font-family: 'icomoon';
    content: attr(data-icon);
    speak: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T13:50:57.983

抱歉，如果我在错误的线程上发表评论，但我正在寻找一种向 WordPress 菜单添加额外字段的方法。建议使用“data-icon”而不是 CSS Pseudo :before 选择器以提高速度性能。目前，WordPress 菜单确实允许内联 html `<i aria-hidden="true" data-icon="****"></i>`，但如果我可以为该`data-icon="***"`属性创建一个新的输入字段，那将真的很有帮助。这样，将字体字形添加到菜单项就更简洁了。稍后，我希望能够在此字段中添加一个选择下拉菜单，其中包含字体字形的预览，但首先我需要能够正确使用 Walker for WP Menus。

# javascript - 检测与圆边缘的碰撞

> ID：14548440
> 
> 赞同：0
> 
> 时间：2013-01-27T14:37:41.963
> 
> 标签：javascript, math

我正在使用脚本根据其半径在圆内生成随机粒子。接下来我想做的是检测粒子何时与圆圈边缘碰撞。

我猜我需要使用 for 循环将圆周的坐标存储在一个数组中，但我不确定执行此操作需要什么数学。

这是我从下面的答案中得到的。但它似乎不起作用：

变量 par 是一个随圆移动的粒子，发射器包含 x，y，圆心的位置，而道具高度包含半径。

```
var fromC = Math.sqrt( (par.y-(emitters[i].y ) )^2 + (par.x- (emitters[i].x))^2); 

if(fromC >= emitters[i].height){
    par.vx *= -1;
    par.vy *= -1;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:26:27.600

问题在于您的`square`操作，`^`而不是 javascript 中的电源运算符。

用这个：

```
var fromC = Math.sqrt( Math.pow((par.y - emitters[i].y), 2) + Math.pow((par.x - emitters[i].x), 2) ); 

if(fromC >= emitters[i].height){
    par.vx *= -1;
    par.vy *= -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:41:36.833

只需计算点与圆心之间的距离（平方根（（y2-y1）^2 +（x2-x1）^2）并与半径进行比较

# jquery - jQuery手风琴，标题链接和保存状态

> ID：14548444
> 
> 赞同：1
> 
> 时间：2013-01-27T14:38:02.623
> 
> 标签：jquery, accordion

我正在使用 jquery ui 手风琴并希望在标题上有链接，并在单击标题链接后保存菜单状态。目前，我只能让一个工作，而没有另一个。（没有链接和保存状态或链接和没有保存状态）我非常喜欢 jquery 初学者，因此非常感谢任何帮助。

导航设置：

```
<nav class="main-nav">
    <ul id="menu-main">
        <li><a href="http://home/">Home</a></li>
        <li>
            <a class="accord" href="http://link1/">Header with link</a>
            <ul class="sub-menu">
                <li><a href="http://link2/">Link2</a></li>
                <li><a href="http://link3/">Link3</a></li>
            </ul>
        </li>
    </ul> 
</nav> 
```

手风琴设置：

```
$(".main-nav > ul" ).accordion({
    active: false,
    heightStyle: "content",
    header: "> li > a.accord",
    clearStyle: true,
    collapsible: true,
    navigation: true       
});

$(".main-nav > ul > li > a").click(function() {
    window.location = $(this).attr('href');
    return false;
}); 
```

# buildroot - 开发自定义包，避免将源同步到构建目录

> ID：14548445
> 
> 赞同：0
> 
> 时间：2013-01-27T14:38:05.083
> 
> 标签：buildroot

我有自定义包，源代码直接在包目录中。目前 buildroot 将源代码复制到构建目录。

是否可以避免这种不必要的开销？Makefile 支持 srcdir != builddir。在 < 2011 buildroot 中，可以指定 SRCDIR 并且没有进行 rsync。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:58:41.580

不幸的是，目前不支持此功能。为了解决这个问题，我们正在努力支持基于每个包的树外构建。第一个原型已在一段时间前被发送到列表中，但需要更多工作。

# php - 土耳其语字符在将它们写入php中的文本文件时发生变化

> ID：14548446
> 
> 赞同：0
> 
> 时间：2013-01-27T14:38:12.670
> 
> 标签：php, parsing, encoding

我正在尝试获取一个 html 文件并将其部分内容写入文本文件。但是，当我尝试这样做时，一些土耳其语字符正在转换，例如 'Ç' 到 ' `&Ccedil;`' 或 'Ö' 到 ' `&ouml;`'。

我曾尝试使用`str_replace`和类似的功能但没有成功。这是我的代码：

```
$file = fopen('yemek.htm','r');
$file2 = fopen('yemek.txt','w');

$i = 9999;
$kontrol = 0;
$id=1;

fwrite($file2, "<yemek> \r\n");

while(!feof($file)){
    $satir = fgets($file);
    $satir = strip_tags($satir);

    if(stristr($satir,'Kalori') != ''){
        $kontrol = 1;
    }

    if(stristr($satir,'2013') != 0){
        $i = 0;
    }

    if($kontrol)
        $i++;

    if($i == 1){
        $tarih = $satir;
        $tarih = ltrim($tarih);
        $tarih = rtrim($tarih);
    }

    if($i == 2){
        $yemek1 = $satir;
        $yemek1 = ltrim($yemek1);
        $yemek1 = rtrim($yemek1);
    }

    if($i == 3){
        $kalori = $satir;
        $kalori = ltrim($kalori);
        $kalori = rtrim($kalori);
    }

    if($i == 8){
        $gun = $satir;
        $gun = ltrim($gun);
        $gun = rtrim($gun);
    }

    if($i == 9){
        $yemek2 = $satir;
        $yemek2 = ltrim($yemek2);
        $yemek2 = rtrim($yemek2);
    }

    if($i == 16){
        $yemek3 = $satir;
        $yemek3 = ltrim($yemek3);
        $yemek3 = rtrim($yemek3);
    }

    if($i == 23){
        $yemek4 = $satir;
        $yemek4 = ltrim($yemek4);
        $yemek4 = rtrim($yemek4);           

    $yazi = "<g1 id='$id' tarih='$tarih' gun='$gun' ym1='$yemek1' ym2='$yemek2' 
        ym3='$yemek3' ym4='$yemek4' klr='$kalori'></g1>";
        $yazi = $yazi . "\r\n";

        fwrite($file2, $yazi);
        $id++;
        $i = 9999;
    }
}

fwrite($file2, '</yemek>');
fclose($file);
fclose($file2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:53:38.570

使用功能：

mb_convert_encoding

[http://php.net/manual/es/function.mb-convert-encoding.php](http://php.net/manual/es/function.mb-convert-encoding.php)

您可以在这里看到类似的问题：[How to write file in UTF-8 format?](https://stackoverflow.com/questions/4839402/how-to-write-file-in-utf-8-format)

# php - 如何在php中显示程序输出

> ID：14548447
> 
> 赞同：1
> 
> 时间：2013-01-27T14:38:21.140
> 
> 标签：php

我是一个php初学者。我想调用一个 mysql 过程并显示该过程返回的输出行。代码如下

**mysql**

```
delimiter //

     create procedure get_ques_list(in p_ques_ctgr varchar(10))

    begin

    select ques from question_list where ques_categorey=p_ques_ctgr
    order by ques;

end // 
```

分隔符；

**php代码**

```
$result=mysql_query("CALL GET_QUES_LIST('S_001')"); 

while($row=mysql_result($result,0,0))

{

    echo $row['ques'];  
} 
```

但它正在发出警告消息

**警告：mysql_result()：提供的参数不是有效的 MySQL 结果资源**

**但是如果我使用查询而不是调用过程，相同的代码可以正常工作并显示 5 行**

```
$result=mysql_query("select ques from question_list where 
ques_categorey='S_001' order by ques"); 
```

程序在执行时也可以正常工作`mysql`

谁能告诉我哪里出了问题？

**任何帮助表示赞赏**

# php - PHP Foreach() 无效参数

> ID：14548448
> 
> 赞同：-2
> 
> 时间：2013-01-27T14:38:21.787
> 
> 标签：php

我收到下面的愚弄错误，但不知道为什么。$_Post 都有数据。

**错误：**警告：在第 19 行的 /home/soc/process_member.php 中为 foreach() 提供的参数无效

```
 $valid = true; 
    foreach($_POST['add'] && $_POST['cpl'] as $value) { 
        if(!isset($value)) { 
            $valid = false;
        } 
    }
    if(!$valid) { 
        $err .= 'please fill in all fields';
        $en['reg_error'] = '<div class=err style="color: #FF0000;"><b>'._error.': '.$err.'</b></div><br>';
        load_template('modules/members/templates/s_reg.tpl');   
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:43:28.500

您应该阅读有关 PHP 的更多信息。“foreach”有两种语法：

```
foreach (array_expression as $value)
    statement
foreach (array_expression as $key => $value)
    statement 
```

这是完全错误的：

```
foreach($_POST['add'] && $_POST['cpl'] as $value) { 
```

让我给你举个例子：

```
<?php
foreach (array(1, 2, 3, 4) as &$value) {
    $value = $value * 2;
}
?> 
```

有关更多信息，请查看有关 foreach 的官方 PHP 文档：http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:50:05.720

我认为你想要的是一个[合并](http://php.net/array_merge)的数组：

```
foreach(array_merge($_POST['add'], $_POST['cpl']) as $value) {
  // ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:41:35.270

首先，在 PHP 中，`&&`操作的结果总是布尔值（即，`true`或`false`） - 你不能将它提供给`foreach`（以及为什么你可能希望？），因此会出现错误。

其次，即使有可能，在`isset`这里使用仍然没有什么意义：如果其中一个`$_POST['add']`或`$_POST['cpl']`确实未设置，则发出*通知*。

因此，您可以像这样重写代码的第一部分：

```
$valid = isset($_POST['add']) && isset($_POST['cpl']); 
```

...或者，考虑到`isset`构造的灵活性，就...

```
$valid = isset($_POST['add'], $_POST['cpl']); 
```

...因为，正如其[官方文档](http://php.net/manual/en/function.isset.php)中所说：

> 如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。评估从左到右进行，并在遇到未设置的变量时立即停止。

如果实际上有一大堆 args 需要检查和/或您懒得每次都输入 '$_POST'，请使用它们的*名称*`foreach`数组（而不是实际值！）来代替：

 *```
$valid = true;
foreach (array('add', 'cpl', 'whatever', 'it', 'takes') as $argName) {
  if (! isset($_POST[$argName])) {
    $valid = false;
    break;
  }
} 
```*

# php - Apache 在上传大文件时检索超时错误并关闭连接

> ID：14548449
> 
> 赞同：0
> 
> 时间：2013-01-27T14:38:25.523
> 
> 标签：php, apache, file-upload, connection-timeout

我一直在尝试重新配置我的`apache`并`php.ini`允许上传大文件。因此我更改了以下变量： **/httpd/conf/httpd.conf：**

超时 7200 代理超时 7200

**/etc/php.ini：**

```
post_max_size = 1024M         ; Maximum size of POST data that PHP will accept.

max_execution_time = 7200     ; Maximum execution time of each script, in seconds

max_input_time = 7200         ; Maximum amount of time each script may spend parsing request data

memory_limit =1024M           ; Maximum amount of memory a script may consume

file_uploads = On             ; Whether to allow HTTP file uploads.

upload_max_filesize = 1024M   ; Maximum allowed size for uploaded files. 
```

PHP 脚本 - 上传前：

```
set_time_limit(0); 
```

回应是：

```
324(net::ERR_EMPTY_RESPONSE) 
```

请注意上传的文件正确地存储在服务器上，所以上传过程是成功的，但我一直收到这个错误。

有什么提示吗？

阿隆·科根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-10T12:43:46.257

我的回答很晚，但也许我会帮助别人。

当我降低时我决定了问题`memory_limit`

PS对不起我的英语

# php - jQuery 或 php 在单个节点中查找多个 html 字符串并用 span 包装

> ID：14548450
> 
> 赞同：2
> 
> 时间：2013-01-27T14:38:33.270
> 
> 标签：php, jquery, string

经过一番挖掘，我仍然没有接近这个。

我有一个由这个 php 生成的 html 字符串...

这会去除所有多个空格。

例如上面输出下面这个字符串，不包含其他节点，只是文本......

```
 1 Lorem ipsum 1.1 Dolor sit amet, consectetur adipiscing elit. 1.2 Nulla non felis enim, a lacinia erat. 1.3 Donec ullamcorper feugiat lobortis. 1.4 Vivamus congue libero ut augue consectetur ultricies vitae eget quam. 2 Suspendisse 2.1 Ultrices volutpat tempus. 2.2 Aenean ullamcorper porta lacus, ut vehicula tortor dapibus hendrerit. 2.3 Proin condimentum est eget arcu mollis consequat. 2.4 Ut malesuada posuere lobortis. 2.5 Suspendisse gravida adipiscing nunc, et vehicula nunc tincidunt nec. 3 Tincidunt 3.1 Sed eget porta ligula. 3.2 Morbi vitae augue in eros tincidunt tincidunt consequat interdum dui. 3.3 Phasellus ante velit, venenatis et dignissim eu, semper vitae lectus. 3.4 Maecenas feugiat adipiscing tortor, non porttitor sem condimentum luctus. 3.5 Curabitur pharetra gravida ornare. 3.6 Donec tortor erat, posuere in ullamcorper eget, posuere sit amet purus. 3.7 Duis feugiat sollicitudin odio, ac molestie nulla elementum non. 4 Vestibulum 4.1 Tempor lectus sit amet purus condimentum nec condimentum dui viverra. 4.2 Duis sodales molestie fermentum. 4.3 Maecenas euismod, lacus ut ullamcorper condimentum, erat felis sodales lectus, a sodales ipsum lectus eu lorem. 4.3 Vivamus ac rhoncus est. 
```

我试图找出所有数字（1、1.2、1.3 等）并将它们包装在一个跨度中。

我尝试了php，但运气不佳...

```
$phrase  = "You should eat fruits, vegetables, and fiber every day.";
$healthy = array("fruits", "vegetables", "fiber");
$yummy   = array("pizza", "beer", "ice cream");

$newphrase = str_replace($healthy, "<span>".$yummy."</span>", $phrase);

echo $newphrase; 
```

上面的 php 正在输出这个......`You should eat Array, Array, and Array every day.`

所以我想我可以试试jquery，但我不确定我是否正确地接近它，请我的代码......

```
var points = [' 1 ',' 1.1 ',' 1.2 ',' 1.3 ',' 1.4 ',' 2 '];

$("p").html(this.html().replace( points,'<span>' + points + '</span>')); 
```

我想我偏离了轨道，但我真的找不到很多关于指向特定字符串位的内容。

我做了一个我的 jQuery 的小提琴...... [http://jsfiddle.net/XmU6p/](http://jsfiddle.net/XmU6p/)

我想与此同时，我仍将继续研究这个问题。但是，如果有人可以分享一些关于我哪里出错的指示，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:43:01.783

在这两种情况下，您实际上都需要遍历值数组并替换每个值。我对PHP不太熟悉，所以我用jQuery做了一个例子。试试这个：

```
var points = [' 1 ',' 1.1 ',' 1.2 ',' 1.3 ',' 1.4 ',' 2 '];
$.each(points, function(i, val) {
    var $p = $('p');
    $p.html($p.html().replace(val, '<span>' + val + '</span>'));
}); 
```

[**更新的小提琴**](http://jsfiddle.net/XmU6p/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:54:31.103

您也可以在 PHP 中执行此操作。您有一个数组到字符串的转换 ( `"<span>$yummy</span>"`)。您需要循环`$yummy`添加跨度：

```
array_walk($yummy, function ($elem) { return "<span>$elem</span>"; }); 
```

*然后*你可以这样做：

```
$newphrase = str_replace($healthy, $yummy, $phrase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T14:56:55.713

```
foreach ($healthy as $key => $food) {
 $newphrase = str_replace($food,'<span>'.$yummy[$key].'</span>',$phrase);
}

echo $newphrase; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T14:57:34.910

在 PHP 中你不需要循环或遍历，你可以使用 str_replace 或 preg_replace，两者都可以处理数组：

```
<?php
  $phrase  = "You should eat fruits, vegetables, and fiber every day.";
  $yummy   = array("<span>pizza</span>", "<span>beer</span>", "<span>ice cream</span>");

  // regex variant...
  $healthy = array('/fruits/i', '/vegetables/i', '/fiber/i');      
  $newphrase = preg_replace($healthy, $yummy, $phrase);
  echo $newphrase;

  // string variant...
  $healthy = array('fruits', 'vegetables', 'fiber');
  $newphrase = str_replace($healthy, $yummy, $phrase);
  echo $newphrase;
?> 
```

我更喜欢正则表达式变体（preg_replace），以便在匹配方面具有更大的灵活性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T14:57:41.473

您的 PHP 示例失败的原因是它`$yummy`是一个数组，但`"<span>"`它是一个字符串。因此，该行将`"<span>".$yummy."</span>"`数组转换为 string `"Array"`，然后将其他字符串添加到它的任一侧，并将其作为单个字符串返回。

由于您想要的是一个数组`str_replace`，因此您需要构造（例如使用`foreach`循环或[`array_map()`](http://php.net/array_map)）一个包含每个元素的`"<span>"`和`"</span>"`周围的新数组 - 最终导致类似`$yummyWithSpan = array("<span>pizza</span>", "<span>beer</span>", "<span>ice cream</span>");`

另一种方法是使用[`preg_replace_callback()`](http://uk3.php.net/preg_replace_callback), 带有添加`"<span>"`and的回调函数`"</span>"`，但是您需要了解正则表达式的工作原理，这可能是您想要了解的内容，也可能不是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T14:59:44.097

PHP：

```
$phrase  = "You should eat fruits, vegetables, and fiber every day.";
$healthy = array("fruits", "vegetables", "fiber");
$yummy   = array("pizza", "beer", "ice cream");

foreach ($healthy as $key => $value) {
  $phrase = str_replace($value, "<span>".$yummy[$key]."</span>",$phrase);
}

echo $phrase; 
```

输出：

```
You should eat <span>pizza</span>, <span>beer</span>, and <span>ice cream</span> every day. 
```

# php - php中的多选表单

> ID：14548458
> 
> 赞同：1
> 
> 时间：2013-01-27T14:39:50.013
> 
> 标签：php, forms

我的 HTML 表单中有以下内容，以及其他输入，比如`<input type="test" name="foo"></input>`和其他。

```
<select name="tags" multiple="multiple">
  <option selected="selected" value="hello">hello</option>
  <option selected="selected" value="world">word</option>
</select> 
```

问题是当我使用

```
var_dump($_POST); 
```

返回的标签是一个字符串，它只包含选择中的最后一项，如下所示：

```
string(5) "world" 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:45:56.457

您的 HTML 应该表明它正在提交一个数组：

```
<select name="tags[]" multiple="multiple"> 
```

（注意`[]`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:52:19.823

尝试使用下面的代码。名字应该是`name="tags[]"`. 如果你的名字就像 name="tags" 它只会传递一个值，如果你想传递多个值，你应该将它命名为一个数组。

```
<select name="tags[]" multiple="multiple">
  <option selected="selected" value="hello">hello</option>
  <option selected="selected" value="world">word</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:00:29.840

您的代码应如下所示：

```
<select name="tags[]" multiple="multiple">
   <option selected="selected" value="hello">hello</option>
   <option value="world">word</option>
</select> 
```

请不要对每个选项都使用 selected="selected" 。Selected="selected" 只能用于一个选项，默认显示的选项！这个非常重要！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T15:11:55.067

使用`name="tags[]"`这种方式传递数组

那么你可以使用

```
if(isset($_POST['tags'])){
    foreach($_POST['tags'] AS $value){
        echo $value;
    }
} 
```

在这种情况下，请务必`method="post"`在您的表单标签中设置。

您可以`selected="selected"`毫无问题地使用

# php - ZF2 ODM MongoDB“需要登录”

> ID：14548460
> 
> 赞同：0
> 
> 时间：2013-01-27T14:39:56.540
> 
> 标签：php, mongodb, doctrine, zend-framework2, odm

我将 ZF2 与 ODM 和 MongoDB 一起使用。当我尝试执行非常简单的任务时，例如：

```
/** @ODM\Document(collection="Test") */
class Test
{
   ...
} 
```

我收到错误“需要登录”。好吧，我知道为什么这是一个问题，我可以使用以下方法解决它：

```
/** @ODM\Document(db="mongoDB", collection="Test") */
class Test
{
   ...
} 
```

有没有办法从 .local/.global 配置文件中添加配置值，或者我可以重新配置配置选项，而不是在每个类中始终使用 db 声明？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:58:01.630

阅读这个关于使用 ZF2 实现 Doctrine 的[有用教程。](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)您应该在 Module.php 和 config/local.php 中放置全局配置选项。Module.php 中的这个数组键：

```
'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
            ),
            'orm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
                )
            )
        )
    ) 
```

local.php 中的这些数据库连接参数：

```
return array(
    // ...
    'doctrine' => array(
        'connection' => array(
            'orm_default' => array(
                'driverClass' => 'Doctrine\DBAL\Driver\PDOMySql\Driver',
                'params' => array(
                    'host'     => 'localhost',
                    'port'     => '3306',
                    'user'     => '',
                    'password' => '',
                    'dbname'   => 'zf2tutorial',
                )
            )
        )
    ),
); 
```

这将允许您避免 DB 实体中的重复，允许您对每个类仅使用以下 Doctrine 声明：

```
/**
 * A music album.
 *
 * @ORM\Entity
 * @ORM\Table(name="album")
 * @property string $artist
 * @property string $title
 * @property int $id
 */
class Album implements InputFilterAwareInterface { 
```

# java - 如何将Java桌面应用程序转换为Web应用程序

> ID：14548466
> 
> 赞同：-1
> 
> 时间：2013-01-27T14:40:58.427
> 
> 标签：java, swing, jakarta-ee

我制作了一个 Java 桌面应用程序，它只存储有关客户的信息。现在，我被要求进行必要的更改以使其成为 Web 应用程序。我对 Java Web 开发完全陌生。

我的理解是，我将获得一台服务器，我必须将程序保留在其中，并且只有管理员才能运行该程序。

我可以通过一些脚本链接到应用程序，以便我的主程序保持不变吗？我的应用程序基于 Swing 和一个简单的基于文件的数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:44:56.077

查看[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)作为部署 Swing 应用程序的一种方式。根据最终用户的要求，您应该能够避免重写您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T14:45:58.167

您必须确定您想要什么类型的 Web 应用程序：servlet 还是 applet？您还可以切换到应用程序类型 JavaFX。对于初学者，请尝试阅读有关杯子类型应用程序的基本结构的一些内容。对于使用小程序，请参阅[如何将 Swing 应用程序转换为小程序？](https://stackoverflow.com/questions/651470/how-to-convert-a-swing-application-to-an-applet)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T14:44:49.777

> 我可以通过一些脚本链接到应用程序，以便我的主程序保持不变吗？

简单回答是不。

我建议您接受一些有关如何用 Java 编写 Web 应用程序的培训。完成之后，您将更好地了解需要做什么。

* * *

请注意，Applet 和 JWS 都需要用户在其 PC 上安装 Java 以运行您的代码。

*   在前一种情况下，用户必须在其 Web 浏览器中启用 Java 插件，这代表着重大的安全风险。

*   在后一种情况下，您没有正常意义上的“Web 应用程序”。相反，您有一个从 Web*启动的常规 Java 应用程序。*（在服务器上存储数据是一个你仍然需要解决的问题......）

# android - SQLite 数据库创建

> ID：14548469
> 
> 赞同：0
> 
> 时间：2013-01-27T14:41:15.447
> 
> 标签：android, android-sqlite

我已经为 SQLite 数据库编写了用于创建数据库和表的代码，但没有在其中插入任何行。那么何时（运行时或编译时）创建数据库以及如何检查数据库是否创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:44:45.643

数据库是`/data/data/[package name]/databases`在一个`.db`文件中创建的，因此请检查它是否是在其中创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T19:26:34.630

您可以使用该功能

```
private boolean checkDataBase(){
    SQLiteDatabase checkDB = null;
    try{
    String myPath = DB_PATH + DB_NAME;
    checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
    //database does't exist yet.
    }
    if(checkDB != null){
    checkDB.close();
    }
    return checkDB != null ? true : false;
} 
```

其中 DB_PATH 将是 /data/data/package_name/ 并且 DB_NAME 将是数据库的名称。例如，您按名称创建数据库 android.db 名称将是 android。

# c# - 我的 EventWaihandle 出了点问题，它不会更改为已发出信号？

> ID：14548482
> 
> 赞同：0
> 
> 时间：2013-01-27T14:42:34.067
> 
> 标签：c#, asynchronous, event-handling

所以我正在使用一些异步方法开发一个 Windows 8 应用程序。在一个特定的地方，我需要应用程序等待异步方法完成，但它似乎没有发送 EventHandle 它的状态。

以下是需要协同工作的方法：

```
public class Film : Page

private User loggedinUser = new User();
private EventWaitHandle handle = new AutoResetEvent(false);
private dynamic parameters;

protected override void OnNavigatedTo(NavigationEventArgs e)
{
    this.parameters = e.Parameter;
    LoadFacebookData(parameters);
    handle.WaitOne();
    LoadUserMovies(loggedinUser.UserName);

}

private async void LoadFacebookData(dynamic parameter)
{
    //async code that gets info from facebook whichs determines what user is logged in
    handle.Set();
}

private void LoadUserMovies(string username)
{
    // irrelevant code
} 
```

代码到达位的那一刻`handle.WaitOne()`，它完全停止工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:46:47.503

简而言之，您不应该使用异步并等待某些东西。标准错误是等待返回的任务（死锁）。您对此做了一个变体：您创建了一个事件并等待它（也是死锁）。

解决方案：要么接受 async-await，要么根本不做 async。（通常）不能以混合方式同时进行。

如果您可以使用 await，这是一个好的开始：

```
await LoadFacebookData(parameters); 
```

摆脱事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:47:02.427

我建议你使用

```
await LoadFacebookData(parameters); 
```

代码行以在异步操作完成后在启动的同一线程上继续执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:01:49.477

据我所知，您发布的代码没有任何问题。这使我相信问题出在您已注释掉的代码中。问题可能是您的代码执行永远不会到达该行

```
handle.Set(); 
```

这可能是因为异常，或者您的异步代码根本无法完成。要“处理”异常的可能性，您可能应该使用任务对象的内置等待方法，而不是您自己的 EventWaitHandle。

您可以将 EventWaitHandle 作为一个整体移除，只需执行以下操作：

```
LoadFacebookData(parameters).Wait(); 
```

这将传播在线程内发生的任何异常。

# android - 如何在 Android 中删除/删除动态生成的按钮？

> ID：14548484
> 
> 赞同：1
> 
> 时间：2013-01-27T14:42:52.007
> 
> 标签：android, button, dynamically-generated

所以我生成了一些按钮。它取决于用户的数字（单击按钮时，创建一个新按钮）。

我是这样做的：

```
 RelativeLayout layout = (RelativeLayout) findViewById(R.id.layoutcprompt);
    RelativeLayout.LayoutParams OBJ = new RelativeLayout.LayoutParams (140,80);
    if ((commandsi%6)==0) {adjust=adjust+86; commandsi=1;}
    OBJ.leftMargin =(140*(commandsi-1))+10;
    OBJ.topMargin =250+adjust;
    Button command = new Button(this);
    command.setLayoutParams(OBJ);
    command.setId(ID);
    command.setText(edittxt.getText().toString());
    edittxt.setText("");
    command.setBackgroundResource(R.drawable.costum_button);
    command.setTextColor(Color.WHITE);
    command.setTextSize(14);
    layout.addView(command);
    command.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Button b = (Button)view;
            scommand=b.getText().toString();
        }
    });
    command.setVisibility(View.VISIBLE); 
```

我想删除/删除它们，但我不知道如何....我给了它们一个唯一的 ID，但我仍然不知道如何删除它们：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:02:46.810

我无法评论其他帖子，但使用

```
command = new Button(this) 
```

可能涉及隐式记忆泄漏`this`！（可以是`Activity`）。而是使用`Context`对象。或者至少删除按钮。

然后因为你有你的`Button`. 只需将其删除：

```
ViewGroup layout = (ViewGroup) findViewById(R.id.layoutcprompt);
View command = layout.findViewById(ID);
layout.removeView(command); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:45:46.543

使命令成为全局变量。然后您可以稍后访问它，然后调用`command.setVisibility(View.GONE);`

因此，在类文件的顶部，您将声明全局变量：

```
Button command; 
```

然后稍后删除重新定义并分配给全局变量：

```
command = new Button(this); 
```

然后当你想隐藏它时，调用：

```
command.setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:45:55.627

尝试使用文档，5 秒的研究可以引导您使用[RemoveView 方法](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)。

```
layout.removeView(command); 
```

**更新**

如果您在此行有空指针异常，则表示您的`layout`为 null，而不是您的`command`. 使`layout`该类的变量成为全局变量。

还要确保为您创建的每个按钮保留不同的变量。如果您有一个全局变量，并使用同一个变量创建 10 个按钮，您将只能引用最后一个创建的按钮。如果您准确说明何时要删除按钮，我们可能会为您提供进一步帮助。

例如，如果您想在用户单击按钮时删除该按钮，您可以更改您的 clickListener：

```
command.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Button b = (Button)view;
            scommand=b.getText().toString();
            layout.removeView(view);    
    }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-26T09:23:07.627

另一种可能有助于查看此线程的其他人的实现是，您可以考虑删除父布局中的所有子元素。一旦获得视图的父级（我假设它是一个布局容器），您就可以删除所有子元素。

```
command.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ViewGroup vg = (ViewGroup)view.getParent();
            vg.removeAllViews();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T14:55:45.637

出于安全目的，您也可以这样做：

```
ViewGroup layout = (ViewGroup) command.getParent();
if(null!=layout) //for safety only  as you are doing onClick
layout.removeView(command); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-15T11:55:05.430

你也可以使用这个sniper

添加按钮

```
 LinearLayout dynamicview = (LinearLayout)findViewById(R.id.buttonlayout);
        LinearLayout.LayoutParams  lprams = new LinearLayout.LayoutParams(  LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

            Button btn = new Button(this);
            btn.setId(count);
            final int id_ = btn.getId();
            btn.setText("Capture Image" + id_);
            btn.setTextColor(Color.WHITE);
            btn.setBackgroundColor(Color.rgb(70, 80, 90));
            dynamicview.addView(btn, lprams);
            btn = ((Button) findViewById(id_));
            btn.setOnClickListener(this); 
```

用于移除按钮

```
 ViewGroup layout = (ViewGroup) findViewById(R.id.buttonlayout);
            View command = layout.findViewById(count);
            layout.removeView(command); 
```

# .net - 如何在单元格中获取有界图像的左上角点（X，Y）？

> ID：14548489
> 
> 赞同：0
> 
> 时间：2013-01-27T14:43:25.770
> 
> 标签：.net, winforms, datagridview

在我的 WinForm 项目中有`DataGridViewImageClumn`.

在我用图像填充列后（在位图的帮助下），我需要在单元格中获取有界图像的左上角`point(X,Y)`。

知道如何实施吗？

# jquery - Foundation 手风琴在页面加载时全部激活或扩展

> ID：14548490
> 
> 赞同：2
> 
> 时间：2013-01-27T14:43:25.003
> 
> 标签：jquery, html, accordion, zurb-foundation

我在实施基础手风琴时遇到问题。问题似乎是页面加载时所有内容都处于活动状态或展开状态。但是，当页面加载时，只有一个手风琴内容应该是活动的，你用

```
<li class="active"> 
```

奇怪的是，在页面加载并单击手风琴标题后，JS 做出响应并仅显示活动的 div，而所有其他 div 消失。

我在这里使用这个主题线程来实现我的网站的手风琴：[https](https://groups.google.com/forum/?fromgroups=#!topic/foundation-framework-/alYolSjS8w8) ://groups.google.com/forum/?fromgroups=#!topic/foundation-framework-/alYolSjS8w8 。

这是损坏的手风琴的链接： [http](http://rppdesigns.com/dev/pennProp_dev/index.php/home/contact) ://rppdesigns.com/dev/pennProp_dev/index.php/home/contact 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:49:37.360

加载手风琴后，只需将其添加到您的代码中：

```
$(".active").trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:49:37.917

创建一个名为whatever的类，即.disguise

```
.disguise{display:none;} 
```

将其应用于任何非活动对象

添加活动的！重要`display: inline;`

你刚刚战胜了这个错误......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T16:22:43.127

使用 Foundation 5.x，这是我能够让它工作的唯一方法：

```
$(document).foundation({
    accordion: {
        // allow multiple accordion panels to be active at the same time
        multi_expand: true
    }
});

$(document).ready(function () {
    // Expand unopened sections
    $('a[aria-expanded="false"]').click();
}); 
```

# android - 在 Intellij IDEA 中使用 Scoreloop UI 作为模块时编译错误

> ID：14548492
> 
> 赞同：2
> 
> 时间：2013-01-27T14:43:40.973
> 
> 标签：android, intellij-idea, scoreloop

在我的 Android 项目中，我需要使用 ScoreloopUI 作为模块。

它在 Eclipse 中运行良好，但我想使用 Intellij IDEA。

如果我创建一个只包含模块的项目，它工作正常。

我已将 Scoreloop UI 作为模块导入，添加了 Android 方面，选中“库模块”框，并在我的项目中添加了模块依赖项。

当我运行、重建或制作时，它首先尝试制作 Scoreloop UI 模块，我遇到了一个复杂的编译错误：

```
java: An exception has occurred in the compiler (1.6.0_24). Please file a bug at the Java Developer Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug Parade for duplicates. Include your program and the following diagnostic in your report.  Thank you.
java: java.lang.NullPointerException
java:   at com.sun.tools.javac.jvm.Code.width(Code.java:276)
java:   at com.sun.tools.javac.jvm.ClassReader.initParameterNames(ClassReader.java:1542)
...
java:   at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:133)
java:   at org.jetbrains.jps.javac.JavacMain.compile(JavacMain.java:135)
java:   at org.jetbrains.jps.incremental.java.JavaBuilder.compileJava(JavaBuilder.java:313)
...
java:   at java.lang.Thread.run(Thread.java:679)
java: Errors occurred while compiling module 'ScoreloopUI'
Compilation completed with 1 error and 5 warnings in 8 sec
1 error
5 warnings
java: Compilation failed: internal java compiler error 
```

任何想法 ？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:31:25.953

在您的项目_构建路径中，您是否尝试过重新排序编译单元？

# zend-framework - 为什么 Zend_Form::getValues() 不返回 MVC 之外的期望值？

> ID：14548494
> 
> 赞同：3
> 
> 时间：2013-01-27T14:44:00.060
> 
> 标签：zend-framework, zend-form

我正在使用 Zend_Form （include_path 上的完整库）**但不使用 MVC**。`$_POST`值与预期一致，但`$form->getValues()`对于 $_POST 中包含正确字符串的键返回 null。我希望`$form->getValues()`为“全名”键返回一个有效的字符串。这是表格：

```
class MyForm extends Zend_Form {

    public function init() {
        $this->setName('myform')
            ->setAction($_SERVER['PHP_SELF'])
            ->setMethod('post');

        $fullname = $this->createElement('text', 'fullname')
            ->setLabel('What is your name?');

        $this->addElement($fullname);
        $this->addElement('submit', 'submit');
    }

} 
```

这是为表单生成的 HTML：

```
<form id="myform" name="myform" enctype="application/x-www-form-urlencoded" action="/classes_test/index.php" method="post">
    <dl class="zend_form">
    <dt id="fullname-label">
        <label for="fullname" class="optional">What is your name?</label>
    </dt>
    <dd id="fullname-element">
        <input type="text" name="fullname" id="fullname" value="">
    </dd>
    <dt id="submit-label">&#160;
    </dt>
    <dd id="submit-element">
        <input type="submit" name="submit" id="submit" value="submit">
    </dd>
    </dl>
</form> 
```

下面是处理：

```
$request = new Zend_Controller_Request_Http();
$form = new MyForm;
$form->setView(new Zend_View);
if ($request->isPost()) {
    var_dump($_POST);
    $data = $form->getValues();
    var_dump($data);
    if ($form->isValid($request->getPost()) {
        ...
    }
} 
```

这是 $_POST 的 var_dump：

```
array
  'fullname' => string 'My Name' (length=7)
  'submit' => string 'submit' (length=6) 
```

这是 $data 的 var_dump：

```
array
  'fullname' => null 
```

为什么“全名”为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T15:39:51.197

`Zend_Form`不`$_POST`直接访问数据，您必须传入数据。完成此操作的方法之一是通过`isValid()`调用。所以你的问题的答案是 - fullname 为 null 因为表单对象中还没有任何数据。

如果您尝试这样做：

```
if ($request->isPost()) {
    var_dump($_POST);

    if ($form->isValid($request->getPost()) {
        $data = $form->getValues();
        var_dump($data);
    }
} 
```

你会得到你期望的结果。

# spring - java.lang.ClassNotFoundException：org.springframework.orm.hibernate4.LocalSessionFactoryBean

> ID：14548499
> 
> 赞同：10
> 
> 时间：2013-01-27T14:44:19.683
> 
> 标签：spring, maven, spring-orm

我是 Spring 新手，这是我的第一个示例（JSF 2、PrimeFaces 3、Spring 和 Hibernate 集成），这是**pom.xml：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-  
v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>MVNO.ONP.project</groupId>
<artifactId>MVNOONPProject</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>MVNOONPProject Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring</artifactId>
    <version>2.5.6.SEC03</version>
</dependency>
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.1.0-b03</version>
</dependency>
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.1.0-b03</version>
</dependency>
 <dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency>
 <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.9.Final</version>
 </dependency>

 <dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.22</version>
 </dependency>
 </dependencies>
 <build>
  <finalName>MVNOONPProject</finalName>
 </build>
 </project> 
```

当我运行项目时，出现此错误：

```
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate4.LocalSessionFactoryBean] for bean with name 'SessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate4.LocalSessionFactoryBean
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1141)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1105)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:386)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    ... 41 more
Caused by: java.lang.ClassNotFoundException: org.springframework.orm.hibernate4.LocalSessionFactoryBean
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:211)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:385)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1138)
    ... 51 more 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-11T21:51:26.200

感谢 Mark 虽然我在做同样的问题

1.  有时eclipse会从local/.m2添加spring 2.5 jar从构建路径中删除，或者即使你添加了spring 4.1，它仍然会使用spring 2.5

2 你应该在你的 Maven 依赖项中有 spring orm 依赖项将它添加到 pom.xml

```
 <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-orm</artifactId>
   <version>4.1.6.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-27T14:56:59.223

Hibernate 4 支持在 3.1 中添加到 Spring Framework。

您的 pom.xml 引用 Spring Framework 2.5.6，因此 org.springframework.orm.hibernate4.LocalSessionFactoryBean 不存在。您需要更新 pom.xml 以引用 Spring Framework 3.1 或更高版本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-27T15:22:31.900

这是包含 spring 3.1.1 的新 pom.xml：

```
 <!-- Spring 3 dependencies -->
  <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
   <version>${spring.version}</version>
</dependency>

  <dependency>
  <groupId>org.springframework</groupId>
   <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
  </dependency> 

 <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
   <version>${spring.version}</version>
  </dependency>

 <dependency>
  <groupId>org.springframework</groupId>
   <artifactId>spring-tx</artifactId>
    <version>${spring.version}</version>
   </dependency>

 <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-orm</artifactId>
 <version>${spring.version}</version>
 </dependency>

  <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
    </dependency> 
```

# c# - 在背景上上传一个文件（html 5 workers）

> ID：14548500
> 
> 赞同：0
> 
> 时间：2013-01-27T14:44:32.470
> 
> 标签：c#, .net, html, file-upload, web-worker

我正在构建一个 WebApp，我正在使用 .net 和 c#。

在这个应用程序中，用户具有将文件（特别是图像）上传到服务器的功能。文件不是太大，最大400kb。问题是，当图像上传时，他们不能做任何事情，必须等到完成（大约需要 5 -30 秒），但我想在后台上传文件，所以在上传时他们将能够做其他事情。

我尝试使用 html 5 工人，但它没有工作。

有人知道怎么做吗？

谢谢。约旦..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:05:22.247

我建议您查看**Asynchronous Pages**。

这是一个帮助您入门的链接： [How to do a BackgroundWorker thread in ASP.NET?](http://forums.asp.net/t/1141831.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:19:26.853

首先查看异步上传文件的更新面板中的 Ajax Async File Upload。

# c++ - 无法从文本文件中获取字符串以打印随机行

> ID：14548508
> 
> 赞同：0
> 
> 时间：2013-01-27T14:44:58.027
> 
> 标签：c++

我不久前拿起了这段代码，作为从文本文件中选择随机行并输出结果的一种方式。不幸的是，它似乎只输出它选择的行的第一个字母，我无法弄清楚它为什么这样做或如何修复它。任何帮助，将不胜感激。

```
#include "stdafx.h"
#include <stdio.h>
#include <iostream>
#include <fstream>
#include <string>
#include <time.h>
using namespace std;

#define MAX_STRING_SIZE 1000

string firstName()
{
    string firstName;
    char str[MAX_STRING_SIZE], pick[MAX_STRING_SIZE];
    FILE *fp;
    int readCount = 0;

    fp = fopen("firstnames.txt", "r");
    if (fp)
    {
        if (fgets(pick, MAX_STRING_SIZE, fp) != NULL)
        {
            readCount = 1;
            while (fgets (str, MAX_STRING_SIZE, fp) != NULL)
            {
                if ((rand() % ++readCount) == 0)
                {
                    strcpy(pick, str);
                }
            }
        }
    }
    fclose(fp);
    firstName = *pick;
    return firstName;
}

int main() 
{
    srand(time(NULL));

    int n = 1;
    while (n < 10)
    {
        string fn = firstName();
        cout << fn << endl;
        ++n;
    }

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:47:51.103

```
 firstName = *pick; 
```

我猜这是问题所在。

`pick`这里*本质上是*一个指向数组第一个元素的指针`char*`，所以当然`*pick`是`char`.. 类型或者数组的第一个字符。

另一种看待它的方式是`*pick == *(pick +0) == pick[0]`

有几种方法可以修复它。最简单的就是执行以下操作。

```
return pick; 
```

[构造函数](http://www.cplusplus.com/reference/string/string/string/)会自动为您进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:39:20.223

由于您没有指定文件的格式，我将介绍两种情况：固定记录长度和可变记录长度；假设每个文本行都是一条记录。

## 读取随机名称、固定长度记录

这个是直截了当的。

1.  确定所需记录的索引（随机）。
2.  计算文件位置=记录长度*索引。
3.  将文件设置到该位置。
4.  从文件中读取文本，使用`std::getline`.

## 读取随机名称、可变长度记录

这假设文本行的长度不同。由于它们各不相同，因此您不能使用数学来确定文件位置。

要从文件中随机选择一行，您要么必须将每一行放入容器中，要么将行开头的文件偏移量放入容器中。

建立容器后，确定随机名称编号并将其用作容器的索引。如果您存储了文件偏移量，请将文件定位到偏移量并读取该行。否则，从容器中拉出文本。

应该使用哪个容器？这取决于。存储文本速度更快，但会占用内存（您实际上是将文件存储到内存中）。存储文件位置占用的空间更少，但您最终会读取每行两次（一次查找位置，第二次获取数据）。

对这些算法的增强是对文件进行内存映射，这对读者来说是一个练习。

## 编辑 1：示例

```
include <iostream>
#include <fstream>
#include <vector>
#include <string>

using std::string;
using std::vector;
using std::fstream;

// Create a container for the file positions.
std::vector< std::streampos > file_positions;

// Create a container for the text lines
std::vector< std::string > text_lines;

// Load both containers.
// The number of lines is the size of either vector.
void
Load_Containers(std::ifstream& inp)
{
  std::string    text_line;
  std::streampos file_pos;
  file_pos = inp.tellg();
  while (!std::getline(inp, text_line)
  {
    file_positions.push_back(file_pos);
    file_pos = inp.tellg();
    text_lines.push_back(text_line);
  }
} 
```

# php - 需要既快又大的缓存系统

> ID：14548513
> 
> 赞同：1
> 
> 时间：2013-01-27T14:45:14.453
> 
> 标签：php, caching

PhP 中是否有一个既快又大的缓存系统？

如果我在磁盘中缓存，则 IO 会上升。

如果我缓存在内存中，则内存很小。

我需要一个在内存中缓存的综合缓存系统，但是当内存变大时，会自动将大数据顺序转储到磁盘。

PhP中有这样的东西吗？

该网站存储了大量的小物品（30k），数以百万计。现在每个数据都存储在一个文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:54:44.677

您应该尝试以下方法之一：

装甲运兵车

XCACHE

加速器

MEMCACHE

ZEND 优化器

这些是可用的最佳 PHP 缓存解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:21:43.617

听起来你想要 Redis。它有点像 memcache，但具有基于磁盘的持久性/溢出。

# asp.net - 使用 JQuery ajax 调用 web 方法时调用 page_load

> ID：14548517
> 
> 赞同：2
> 
> 时间：2013-01-27T14:45:47.110
> 
> 标签：asp.net, web-services, jquery

我正在尝试在 aspx 页面中调用 webmethod，但仅加载页面加载事件。

网络方法：

```
<WebMethod()> _
Public Shared Function Test() As String
    Return "hello"
End Function 
```

ajax 调用：

```
$.ajax({
    type: "POST",
    url: "../Custom/Policy.aspx/Test",
    dataType: "text",
    success: function (data) { alert(data);},
    error: function (request, status, error) {
        console.log(request.responseText);
    }
}); 
```

有趣的是我过去设法让它工作，甚至查看了代码，但我仍然无法让它工作，现在我放弃了......

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:05:32.797

问题是我将本机 JSON 对象传递给数据。一旦我将这个对象作为字符串传递，它就开始工作了！

# http - nginx 将内部 http 服务公开为 https 子域

> ID：14548524
> 
> 赞同：4
> 
> 时间：2013-01-27T14:46:17.367
> 
> 标签：http, authentication, https, nginx, subdomain

我在这个网站和类似的网站上找到了几个部分答案，但我不知道如何把它们放在一起，或者答案就在那里，我无法识别它：-/

我想要达到的目标：

我有一个在 LAN 中运行的 http 服务（我已经适当地设置了 dnsmasq）：

[http://subdomain1.domain.com:1234/](http://subdomain1.domain.com:1234/)

我想将其公开为互联网（外部 DNS 也可以正常工作）：

[https://subdomain2.domain.com:443/](https://subdomain2.domain.com:443/)

由 nginx 处理用户身份验证。

我还想（必须？）保持浏览器中可见的 URL 不变。

我已经尝试了几种从类似问题中发现的组合，但我似乎无法理解。

这是我最后一次尝试：

```
ssl_certificate /var/www/domain.com/domain_com.crt;
ssl_certificate_key /var/www/domain.com/domain_com.key;

server {
        listen   443 default_server;
        server_name subdomain1.domain.com;

        location / {
                auth_basic "Restricted";
                auth_basic_user_file /var/www/domain.com/domain.com.passwords;

                proxy_pass              http://subdomain1.domain.com:1234/;
                proxy_set_header        Host    $http_host;
                # proxy_set_header        X-Real-IP       $remote_addr;
                # proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_redirect          https://subdomain2.domain.com/       http://subdomain1.domain.me:1234/;
        }
} 
```

我得到的是：“错误 107（net::ERR_SSL_PROTOCOL_ERROR）：SSL 协议错误。”

* * *

更新：

我想我找到了解决方案，但仍将不胜感激。这一个还重写了http访问以通过https。

```
ssl_certificate /var/www/domain.com/domain_com.crt;
ssl_certificate_key /var/www/domain.com/domain_com.key;

server {
        listen   80;
        server_name subdomain1.domain.com;
        rewrite ^ https://$server_name$request_uri? permanent;
}

server {
        listen   443;
        ssl on;
        server_name subdomain1.domain.com;

        location / {
                auth_basic "Restricted";
                auth_basic_user_file /var/www/domain.com/domain.com.passwords;

                proxy_pass              http://subdomain2.domain.com:1234/;
                proxy_set_header        Host    $host;
                proxy_set_header        X-Real-IP       $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto       $scheme;
                add_header              Front-End-Https         on;
                proxy_redirect          off;
        }
} 
```

# android-layout - android，xmlns，没有资源标识符错误

> ID：14548526
> 
> 赞同：0
> 
> 时间：2013-01-27T14:46:41.383
> 
> 标签：android-layout, facebook-android-sdk

在 xml 布局文件中，已经定义了 xmlns，但在编译时出现此错误：找不到属性的资源标识符。这是为什么？谢谢

我正在关注 Facebook 网站[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)上的 Facebook 开发教程，布局文件如下：

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <com.facebook.widget.ProfilePictureView
            android:id="@+id/profilepic"
            android:layout_height="wrap_content"
            android:layout_width="0dp"
            android:layout_weight="1"
            app:preset_size="large" app:is_cropped="true"
    />
   </ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:55:17.993

我想通了，必须替换`/res-auto`为`res/com.facebook.samples.profilepicture`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:29:47.933

您的布局文件看起来正确。检查您的“project.properties”文件中的“android.library.reference.1”值是否指向正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:27:01.603

在 API 级别 17 中正确支持 res-auto 功能。它必须应用于使用自定义属性的所有布局。它会在构建时由 eclipse 自动替换。

参考[更新的 SDK 工具和 ADT 修订版 17](http://android-developers.blogspot.com/2012/03/updated-sdk-tools-and-adt-revision-17.html)

# ios - 中东国家是否支持 Admob？

> ID：14548533
> 
> 赞同：0
> 
> 时间：2013-01-27T14:47:09.127
> 
> 标签：ios, admob, iad

我在我的 iOS 应用中集成了 iAd，我的应用客户主要来自中东。事实证明，iAds 不支持中东国家，所以我没有通过 iAds 获得任何收入。我正在寻找中东 iOS 广告网络的其他替代方案，我发现 Admob 和 LeadBolt 是最好的。你能告诉我中东国家是否支持 Admob？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:48:16.003

是的。如果您集成 Admob，您可以使用它在许多其他广告网络之间进行调解，以进一步增加您的收入。

# relational-database - 如果没有公共属性，则自然连接

> ID：14548543
> 
> 赞同：20
> 
> 时间：2013-01-27T14:48:37.097
> 
> 标签：relational-database, relational-algebra

如果表没有同名的属性，自然连接在关系代数中会返回什么？它将为空还是与叉积（笛卡尔运算符）相同？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-10T14:50:28.153

如果两个关系之间没有共同的属性并且您执行 a `natural join`，它将返回`cartesian product`两个关系中的 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-11T14:23:30.200

将返回两个表的笛卡尔积。这是因为当我们对两个表执行任何 JOIN 操作时，将执行这些表的笛卡尔积，然后根据 WHERE 子句中的任何选择条件返回结果行。但是这里和那里不是常见的列，该过程在笛卡尔积之后停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T13:16:58.020

它将返回表格的笛卡尔积。如果有共同属性，则自然连接将删除共同属性的重复性

# ruby-on-rails - 在 declarative_authorization 和 cancan 之间进行选择

> ID：14548549
> 
> 赞同：1
> 
> 时间：2013-01-27T14:49:03.623
> 
> 标签：ruby-on-rails, authorization, cancan, declarative-authorization

CanCan 和 declarative_authorization 有什么区别，我该如何在这两者之间进行选择？您能否提供一些示例，其中一个是更好的选择？

我只是找到一个链接：[https](https://gist.github.com/236709) ://gist.github.com/236709 但我看不出有什么大的区别

# openstreetmap - Openstreetmap Xapi 过滤器

> ID：14548550
> 
> 赞同：0
> 
> 时间：2013-01-27T14:49:14.903
> 
> 标签：openstreetmap

反正有没有过滤使用xapi返回的结果，这样我就没有大量的结果需要处理？我认为像 [filter=tag] 这样的东西可能只显示标签，但我似乎找不到任何说明这是可能的文档。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:34:19.383

(1) 使用 XAPI 的标准方法允许您过滤以仅检索带有特定标签的对象，例如仅获取您将使用的 pubs：

```
http://jxapi.osm.rambler.ru/xapi/api/0.6/*[amenity=pub] 
```

(2) 如果您想在下载 OSM 文件后对其进行过滤（例如删除某些标签），[Osmosis](http://wiki.openstreetmap.org/wiki/Osmosis)是一个命令行工具，可以进行各种类型的过滤。

(3) 如果您想将 OSM 文件过滤成其他格式（即您对最后的 OSM 格式 XML 文件不感兴趣），您可以使用 XSLT。[这是我制作的 XSLT，](https://github.com/danstowell/pubdensity/blob/master/osm_pub_csv.xslt)它从 OSM 文件中提取少量 pub 参数到 CSV。

# sql - 在 SQL Server 中选择项目类型及其基本类型？

> ID：14548551
> 
> 赞同：1
> 
> 时间：2013-01-27T14:49:16.210
> 
> 标签：sql, sql-server, sql-server-2008

我有一个简单的表：

```
DECLARE @t TABLE(item INT, itemType INT  )

insert INTO @t SELECT 1000,0
insert INTO @t SELECT 1000,3
insert INTO @t SELECT 1000,5
insert INTO @t SELECT 1000,6
insert INTO @t SELECT 2000,0
insert INTO @t SELECT 2000,3
insert INTO @t SELECT 2000,5
insert INTO @t SELECT 2000,6
insert INTO @t SELECT 3000,0
insert INTO @t SELECT 3000,10
insert INTO @t SELECT 4000,11 
```

我想选择所有项目，`itemtype = 3`但*如果有一行*，还提供它的基础`itemtype`（*如果存在*），即`itemType = 0`。

例如 ：

*   对于 itemType = 3

    `1000,0`应该提供——为什么？因为 table 也有 1000 + itemType 0
    `1000,3`应该提供 - 为什么？因为我们寻找 itemType=3
    `2000,0`应该提供 --why ？因为 table 找到了 2000,3 并且这个 2000 也有 itemType=0
    `2000,3`应该提供--为什么？因为我们寻找 itemType=3

*   对于 itemType = 10

    `3000,0`应该提供——为什么？因为表找到了 3000,10 并且这 3000 也有 itemType=0
    `3000,10`应该提供--为什么？因为我们寻找 itemType=10

*   对于 itemType = 11

    `4000,11`应该提供——为什么？因为我们寻找 itemType=11 （注意，没有 itemType 0 ，所以只有它自己）。

我开始做：

```
;with cte as(
             SELECT * FROM @t  
            )
select * from cte where itemType=3 
```

总之，如果`itemType`找到了，提供它自己 + 其零类型（如果存在），也提供给他的兄弟姐妹（ sample(#1) ）

~~但我不能在`union` 这里做，因为 CTE 在那里不被识别......~~垃圾。有可能的。

我该如何解决？

[SQL 在线](https://data.stackexchange.com/stackoverflow/query/edit/93494)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:08:13.363

为避免`itemType = 3`两次评估查询，您可以自外连接然后`CROSS APPLY ... VALUES`使用`UNPIVOT`

```
DECLARE @itemType INT = 3;

WITH T(item1, itemType1, item2, itemType2 )
     AS (SELECT *
         FROM   @t T1
                LEFT JOIN @t T2
                  ON T1.item = T2.item
                     AND T2.itemType = 0
                     AND T1.itemType <> 0
         WHERE  T1.itemType = @itemType) 
SELECT item,
       itemType
FROM   T
       CROSS APPLY ( VALUES (item1, itemType1),
                            (item2, itemType2) ) v(item, itemType) 
WHERE item IS NOT NULL 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/2228e/10)

**执行计划**

[![计划](../Images/40958d2527358c8bd893355d37d385e9.png)](https://i.stack.imgur.com/GgMGv.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:09:17.600

```
WITH recordList
AS
(
  SELECT item, itemType
  FROM   SampleTable
  WHERE  itemType = 11 -- change here
)
SELECT item, itemType FROM recordList
UNION
SELECT a.item, a.itemType
FROM   SampleTable a
       INNER JOIN recordList b
          ON a.item = b.item
WHERE  a.itemtype = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e99da/7)
*   [SQLFiddle Demo（*使用`IN`多个值的子句*）](http://www.sqlfiddle.com/#!3/e99da/8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T15:11:10.363

```
DECLARE @findtype INT = 3;

WITH results AS
(
  SELECT t.item, @findtype
  FROM   @t t
  WHERE  t.itemType = @findtype
  UNION ALL
  SELECT t.item, 0
  FROM   @t t
         INNER JOIN results r on r.item = t.item
  WHERE  t.itemType = 0
)
SELECT * 
FROM results; 
```

# android - 嵌入在线性布局中的 Webview 不会上下滚动，只会左右滚动

> ID：14548553
> 
> 赞同：1
> 
> 时间：2013-01-27T14:49:35.507
> 
> 标签：android, android-webview, android-linearlayout, textview, android-xml

我在这里有一个 WebView，以便我的应用程序的用户可以看到我的网站，并且我希望应用程序版本出现在 Webview 上方，因此我将 WebView 标签嵌入到 LinearLayout 中，但是当我在设备上运行项目时，它只会横向滚动, （甚至不完全存在），并且没有上下。我该如何解决？TextView 有一个名为“ver_num”的字符串值，在应用程序中显示为 1.0

```
<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android:
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
       <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/ver_num" />
     <WebView
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/webview"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" />
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:55:19.427

你的 XML 甚至没有编译，使用这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/ver_num" />

    <WebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

# javascript - 如何将 Phonegap 相机与 AngularJS 集成

> ID：14548567
> 
> 赞同：9
> 
> 时间：2013-01-27T14:50:51.137
> 
> 标签：javascript, cordova, angularjs

我正在尝试找出将 phonegap 相机与 AngularJS 集成的最佳实践。我尝试的第一种方法是创建一个带有从 ng-click 调用的 Promise 的工厂。另一种方法是将代码直接放在控制器内的 ng-click 中，但它是不可重用的。也许可以由此制定指令？我相信还有其他一些方法。“angularjs”方式是什么？

这是我尝试过的工厂方法的示例....

的HTML：

```
<button ng-click="takepic">Take Picture</button> 
```

控制器：

```
function picturePageCtrl($scope, Camera) {
    $scope.takepic = function() {
        // I'd like to push this into an array of "pics" here.
        // but it is hard to push() with promises.
        Camera.getPic();
    }
} 
```

工厂：

```
.factory('Camera', function($q) {
    var deferred = $q.defer();
    return {
        getPic: function() {
            navigator.camera.getPicture(
                function (imageURI) {
                    deferred.resolve(imageURI);
                },
                function (message) {
                    deferred.reject(message);
                },
                {
                    quality: 50, 
                    destinationType: Camera.DestinationType.FILE_URI
                }
            );
            return deferred.promise;
        }
    }
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T21:23:00.473

就我个人而言，我会将逻辑放在指令中，因为它需要访问 DOM 函数（指令更适合于此）。如果`require: 'ngModel'`在指令中使用，则可以使用它来存储输出值。

**html:**

```
<button camera ng-model='myPicture'>Take Picture</button> 
```

**指示：**

```
app.directive('camera', function() {
   return {
      restrict: 'A',
      require: 'ngModel',
      link: function(scope, elm, attrs, ctrl) {
         elm.on('click', function() {
            navigator.camera.getPicture(function (imageURI) {
               scope.$apply(function() {
                  ctrl.$setViewValue(imageURI);
               });
            }, function (err) {
               ctrl.$setValidity('error', false);
            }, { quality: 50, destinationType: Camera.DestinationType.FILE_URI }
         });
      }
   };
}); 
```

在您的**控制器**中，您可以`$watch`模型并将其推送到数组中：

```
$scope.myPictures = [];
$scope.$watch('myPicture', function(value) {
   if(value) {
      myPictures.push(value);
   }
}, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-23T22:12:55.170

我添加了一些选项，并为像我一样遇到这篇文章的其他人更正了代码。谢谢你的帖子！

```
app.directive('camera', function() {
   return {
      restrict: 'A',
      require: 'ngModel',
      link: function(scope, elm, attrs, ctrl) {

         elm.on('click', function() {
            navigator.camera.getPicture(function (imageURI) {
               scope.$apply(function() {
                  ctrl.$setViewValue(imageURI);
               });
            }, function (err) {
               ctrl.$setValidity('error', false);
            }, { 
                quality : 50,
                destinationType : Camera.DestinationType.DATA_URL,
                sourceType : Camera.PictureSourceType.PHOTOLIBRARY,
                allowEdit : true,
                encodingType: Camera.EncodingType.JPEG,
                targetWidth: 1000,
                targetHeight: 1000,
                popoverOptions: CameraPopoverOptions,
                saveToPhotoAlbum: false 
            })
         });  
      }
   };
}); 
```

# r - 长向量的 plyr split_indices 函数崩溃

> ID：14548570
> 
> 赞同：3
> 
> 时间：2013-01-27T14:51:15.597
> 
> 标签：r, segmentation-fault, plyr

我正在尝试在大型数据集上运行`acast`包中的函数，并导致程序崩溃。`reshape2`我能够定位这个问题：

```
library(plyr)
n <- 15784000
g <- 1:n
split_indices(g, n) # NOTE for copy/pasters:
                    # this may result in an abort and R exit 
```

我收到以下错误消息：

```
*** caught segfault *** address 0x7ffffc3c44f0, cause 'memory not mapped'

Traceback:
 1: .Call("split_indices", group, as.integer(n))
 2: split_indices(g, n) 
```

如果我减少 n 的值：

```
n <- 3946000 
```

那么错误信息是不同的：

```
Error: segfault from C stack overflow 
```

我正在使用的 R 系统：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-unknown-linux-gnu (64-bit)
Package: plyr_1.8 
```

这是分发/构建问题吗？可以通过适当的选择构建参数来固定它吗？

# meteor - 当所有模板项目在 Meteor 中完成渲染时回调？

> ID：14548581
> 
> 赞同：6
> 
> 时间：2013-01-27T14:52:24.520
> 
> 标签：meteor, publish-subscribe

我正在获取一组记录并将它们放在模板中，让它们呈现`{{#each}}`，并且我想显示一个加载图标，直到呈现最后一个 DOM 节点。

我的问题是我还没有找到一种方法来查询状态/在最后一个渲染的项目上触发回调，也就是要更新/重新绘制的最后一个 DOM 节点。

在我的 HTML 文件中看起来有点像这样：

```
<template name="stuff">
    {{#each items}}
        <div class="coolView">{{cool_stuff}}</div>
    {{/each}}
</template> 
```

在客户端的 JS 文件中：

```
// returns all records of Stuff belonging to the currently logged-in user
Template.stuff.items = function () {
    Session.set('loading_stuff', true);
    return Items.find({owner: Meteor.userId()}, {sort: {created_time: -1}});
};

Template.stuff.rendered = function() {
    // every time something new is rendered, there will have been loading of the DOM. 
    // wait a short while after the last render to clear any loading indication.
    Session.set('loading_stuff', true);
    Meteor.setTimeout(function() {Session.set('loading_stuff', false);}, 300);
}; 
```

`loading_stuff`在 Handlebars 助手中查询Session 变量，如果它是`true`.

我这样做的原因`Meteor.setTimeout`是因为在渲染到模板中的*每个项目之后都会*`Template.rendered`调用它。所以我需要重新确认它仍在加载，但给它一些时间来加载下一个或完成全部渲染，稍等片刻，直到它设置为.*`loading_stuff``false`*

 *如何在所有 DOM 更新（针对特定模板或整个页面）结束时以正确的 Meteor 方式可靠地查询/回调？

非常感谢。

***编辑***

使用回调的解决方案仅部分有效：[`subscribe()`](http://docs.meteor.com/#meteor_subscribe) `onReady()`

在渲染开始之前，模板似乎被多次调用（2-3）次，但是*在*数据从模板依赖渲染的服务器返回之后。这意味着它已经“完成”了加载数据，但 DOM 仍在渲染中。我会玩`Meteor.autorun()`，看看我是否能在某个地方找到一个可靠的钩子来正确地做到这一点。与此同时，我想我原来的问题仍然存在：

我怎么知道整个模板/页面何时完成渲染？

***最终编辑：***

归根结底，根据 DOM 的结构，开发人员需要拥有坚如磐石的 DOM，并尽可能将适当的回调附加到他/她想要检查其状态的元素。这似乎是一个反气候的明智之举，但对我来说，知道模板的最终元素被渲染的唯一方法是在模板的最后呈现一个具有特殊 id 的元素，它表示结束渲染并为其附加`.livequery`回调。我希望 Meteor 将来会为检查这个状态加入一个更加统一和全球性的支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-17T14:44:01.977

在当前模板中嵌套一个项目模板可能真的有帮助吗？

```
<template name="stuff">
   {{#each items}}
     {{> itemTemplate}}
   {{/each}}
</template>

<template name="itemTemplate">
   <div class="coolView">{{cool_stuff}}</div>
</template> 
```

现在，Template.itemTemplate.rendered 上的回调可能会在每次新项目更新到 DOM 时运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T03:51:59.127

我发现 JQuery 的 livequery 插件在等待模板中的元素写入 DOM 时不起作用。这是因为插件侦听 JQuery 方法（如 append），但 Meteor 不使用 JQuery。它使用一个被调用的对象`LiveRange`来写入 DOM。我修改了我的 livequery JavaScript 文件以使用它。

在文件底部附近，有一行调用`registerPlugin()`. 我修改它看起来像这样：

```
$.livequery.registerPlugin([
    {object: $.fn, methods: ['append', 'prepend', 'after', 'before', 'wrap', 'attr',    'removeAttr', 'addClass', 'removeClass', 'toggleClass', 'empty', 'remove', 'html']},
    {object: LiveRange.prototype, methods: ['insertBefore', 'insertAfter']} 
]); 
```

然后我修改了 registerPlugin() 方法，如下所示：

```
registerPlugin: function(registration) {
    for (var i = 0; i < registration.length; i++) {
        var object = registration[i].object;
        var methods = registration[i].methods;

        $.each( methods, function(i,n) {
            // Short-circuit if the method doesn't exist
            if (!object[n]) return;

            // Save a reference to the original method
            var old = object[n];

            // Create a new method
            object[n] = function() {
                // Call the original method
                var r = old.apply(this, arguments);

                // Request a run of the Live Queries
                $.livequery.run();

                // Return the original methods result
                return r;
            }
        });
    }
} 
```

`insertBefore()`这将检查在对象上调用或`insertAfter()`调用时元素是否存在，`LiveRange`并且仍将像以前一样与 JQuery 一起使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T15:26:24.297

您可以使用像[livequery](http://docs.jquery.com/Plugins/livequery)这样的 jquery 插件来跟踪特定选择器的 dom 插入：

```
$('.my-rendered-element').livequery(function () {
    console.log('I've been added to the DOM');
}); 
```

如果您还需要确保图像已经加载并且一切都很好地呈现，您可以使用其他一些实用程序，例如其他插件[imagesLoaded](http://desandro.github.com/imagesloaded/)，并执行以下操作：

```
$('.my-rendered-element').livequery(function () {
    $(this).imagesLoaded(function() {
        console.log('My images have been loaded');
    });
}); 
```

这是一种解决方法，它可能无法与 Meteor 很好地集成，但我发现这两个家伙在很多情况下都非常有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T16:14:06.600

就我而言，部分解决方案是：

将`onComplete()`回调添加到我的收藏的订阅中`Items`，这是任何加载过程的正式结束。所以，没有更多的 hacky `setTimeout`s in `Template.rendered`，只需设置`loading_stuff`为`true`查询数据时（in `Template.stuff.items`），然后在 subscribe 函数`false`的`onComplete()`回调中设置为：

服务器：

```
Meteor.publish('items', function (some_param) {
    return Items.find({some_field: some_param});
}); 
```

和客户：

```
Meteor.subscribe('items', some_param, function onComplete() {
    Session.set('loading_stuff', false);
}); 
```

...

```
Template.stuff.items = function () {
    Session.set('loading_stuff', true);
    return Items.find({owner: Meteor.userId()}, {sort: {created_time: -1}});
}; 
```

这是一个部分解决方案，因为知道数据何时从服务器到达以及 DOM 何时完成渲染是两个独立的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T13:49:01.527

有几个选项：

1.  正如您在最后评论中提到的，您可以创建反应式上下文并在那里处理更改。
2.  您可以创建一个特殊的值，即。_id = "END" 并在模板渲染中查找该值。
3.  我最喜欢的是：不使用集合，而是通过调用对来填充`Meteor.call`模板`Meteor.methods`。您还可以将结果放入反应变量中，以便模板自动重新呈现。

正如您可能已经发现的那样，当调用 publish 方法时触发`onReady`事件，而不是在所有数据都发送过来时触发。[`subscribe()`](http://docs.meteor.com/#meteor_subscribe)[`ready()`](http://docs.meteor.com/#publish_ready)

这是上面＃3的一个简单示例：

在客户端：

```
 Meteor.call('get_complete_email',id, function(err,doc) {
    if (err === undefined) {
      // Note current_compose is reactive
      current_compose.set(new _ComposePresenter(action, doc));
    } else {
      log_error('compose','get complete email ',err);
    }
  }); 
```

在服务器中：

```
 Meteor.methods({
   'get_complete_email': function(id) {
     return Emails.findOne({_id:id, user_id:Meteor.userId}, body_message_fields);
   }
 }); 
```

在您的演示者或查看者代码中：（`data`可以消除临时变量 - 它是遗留的，尚未重构）。

```
Template.compose_to_cc_bcc_subject.prefilled = function(part) {
  if (Current && Current.compose()) { 
    var data = Current.compose();
    if (data == undefined || data[part] == undefined) { return; }
    return data[part]; 
  } else {
    return;
  }
} 
```

显然，您需要将 current_compose、Current 和您自己的对象稍微不同地连接起来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-28T20:21:35.927

我做了另一种DIY方式。将索引/排名映射到光标上，然后根据`.rendered`回调中相同查询的计数检查该索引：

```
items: function() {   
   return Items.find({whatever: whatever}).map(function(item, index) {
      item.rank = index + 1;
      return item;
   });
}

Template.stuff.rendered = function() { 
  if(this.data.rank === Items.find({whatever: this.data.whatever}).count()) {
     //  Do something cool like initializing a sweet
     //  JS plugin now that ALL your template instances 
     //  are all rendered
     $("#coolplugindiv").coolJSPluginInit();
  }
} 
```

我敢肯定它对服务器的负担会稍微重一些，但它确实有效。以为我很好奇`template.lastNode`，是否有某种方法可以使用它来产生相同的效果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-28T13:25:24.470

`onRendered`我发现在下一个模板的块中运行回调很有帮助：

```
<template name="stuff">
  {{#each items}}
    <div class="coolView">{{cool_stuff}}</div>
  {{/each}}
  {{> didMyStuffLoad}}
</template> 
```

然后：

```
Template.didMyStuffLoad.rendered = function () {
  Session.set('loading_stuff', false);
} 
```

在执行此 onRendered 块之前，所有内容都将加载到 DOM 中。*

# c++ - Boost Spirit 在服务器应用程序上实现小型单线 DSL

> ID：14548592
> 
> 赞同：2
> 
> 时间：2013-01-27T14:53:13.483
> 
> 标签：c++, boost, dsl, boost-spirit, boost-spirit-qi

抱歉，如果这个问题之前已经回答过。

我想将一个小型 DSL 插入我正在处理的服务器应用程序中。语法非常简单，即使在这个早期阶段我也很难过。我只是无法理解如何在精神上构建语法。

这是我要测试的语法示例：

```
WHERE [not] <condition> [ and | or <condition> ] <command> [parameters] 
```

WHERE 子句将通过测试它们的命名属性从内部存储中选择多个对象。然后将所选对象的向量作为输入传递给命令对象。

我想对每个对象执行 2 种可能的测试：

```
<property> = "value" 
```

和

```
<property> like <regexp> 
```

还有2个命令：

```
print <propertyName> [, <propertyName> [...]] 
```

和

```
set <propertyName> = "value" [, <propertyName> = "value" [...] ] 
```

所以语法的例子是：

```
where currency like "GBP|USD" set logging = 1, logfile = "myfile" 
```

和

```
where not status = "ok" print ident, errorMessage 
```

我知道这是一个很大的问题，但我想知道是否有任何精神专家可以在几秒钟内敲出这种语法？我已经解析了 LIKE 和 =，但是在尝试将其与 AND、OR 和 NOT 混合时卡住了。对我来说，问题是在思考精神将如何解决这个问题时不知道从哪里开始。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T03:16:18.077

有关概念证明，请参见[http://liveworkspace.org/code/3HUzjS](http://liveworkspace.org/code/3HUzjS)。

我通常首先做的是想象我想如何存储解析的数据。

## 数据类型

我喜欢坚持使用标准容器`boost::variant`（有时`boost::optional`）。从下往上阅读，看看它是多么简单，自上而下：

```
struct regex {
    std::string _pattern;
    explicit regex(std::string const& pattern) : _pattern(pattern) {}
};

typedef boost::variant<double, int, std::string, regex> value;

enum logicOp { logicOr, logicAnd, logicPositive };

struct condition {
    bool          _negated;
    std::string   _propertyname;
    value         _operand;      // value or regex
};

struct filter {
    logicOp   _op;
    condition _cond;
};

struct setcommand {
    typedef std::list<std::pair<std::string, value> > pairs;
    pairs _propvals;
};

struct printcommand {
    std::vector<std::string> _propnames;
};

typedef boost::variant<printcommand, setcommand> command;

struct statement {
    std::vector<filter> _filters;
    command             _command;
}; 
```

笔记：

*   在这种情况下，我创建了一个 ADT，`regex`而不是要求在处理代码中打开运算符类型（`=`vs. `like`）。）
*   我假设您的值可以是 int、double、string（或带有“like”的正则表达式）。
*   我假设您想要从左到右评估过滤条件（没有`and`vs.的优先级`or`）。
*   我**没有**假设 a `set`or`print`命令的参数是唯一的。
*   我`filter`通过为第一项提供“无操作”逻辑组合来简化容器。

## 语法

有了这个目标结构，编写语法就变得*相对*简单了：

```
using namespace qi;

// no-skipper rules
property_  = alpha >> *alnum;
strlit_    = '"' >> *(  (lit('\\') >> char_) | ~char_('"') ) > '"';

// with-skipper rules
regex_     = strlit_ [ _val = phx::construct<regex>(_1) ];
value_     = double_ | int_ | strlit_;
condition_ = (no_case["NOT"] >> attr(true) | attr(false)) 
    >> property_ 
    >> (
            no_case["LIKE"] >> regex_ | '=' >> value_
       );

print_   = no_case["PRINT"] >> property_ % ',';
set_     = no_case["SET"] >> (property_ >> '=' >> value_) % ',';
command_ = print_ | set_;

filters_ %= +(
        (
           no_case["WHERE"] [ _pass = (phx::size(_val) == 0) ] >> attr(logicPositive)
         | no_case["AND"]   [ _pass = (phx::size(_val) >  0) ] >> attr(logicAnd)
         | no_case["OR"]    [ _pass = (phx::size(_val) >  0) ] >> attr(logicOr)
        ) 
        >> condition_);

statement_ = filters_ >> command_; 
```

笔记：

*   我已经决定字符串应该能够包含引号，所以我做了`\`一个转义字符
*   唯一的“棘手”业务是确保过滤器（条件）以“WHERE”开头，并且每个后续条件*必须*以“AND”/“OR”开头。它使用语义动作

    ```
    [ _pass = (phx::size(_val) == 0) ] 
    ```

    `vector`在解析期间检查过滤器的结果列表 ( ) 是否为空

*   该`attr(...)`成语用于获取可选关键字 ( `NOT`) 的默认值。关键字仅在语法中是可选的，在 AST 中不是：

    ```
     no_case["NOT"] >> attr(true) | attr(false) 
    ```

我整理了一个演示，使用 Spirit Karma 将 AST 打印回来。请注意，我没有花很多精力来进行语法往返：

1.  `like`运算符被打印为与正则表达式 ( `m/.../`)相等
2.  没有对字符串文字中的特殊字符进行转义

### 测试程序的输出：

```
parse success: 'where currency like "GBP|USD" set logging = 1, logfile = "myfile"'
parsed: WHERE  currency = m/GBP|USD/ SET logging=1.0, logfile="myfile" 
parse success: 'where not status = "ok" print ident, errorMessage'
parsed: WHERE NOT status = "ok" PRINT ident, errorMessage 
parse success: 'where status = "ok" or not currency like "GBP|USD" print ident, errorMessage'
parsed: WHERE  status = "ok" OR NOT currency = m/GBP|USD/ PRINT ident, errorMessage 
parse success: 'where status = "\"special\"" set logfile = "C:\\path\\to\\logfile.txt"'
parsed: WHERE  status = ""special"" SET logfile="C:\path\to\logfile.txt" 
```

## 完整的测试程序

注意：除此之外`parser`它还包含一个`generator`将解析后的 AST 数据类型打印回来。

**`[Live On Coliru](http://coliru.stacked-crooked.com/a/16f3ecb19a88e948)`**

```
//#define BOOST_SPIRIT_DEBUG
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/fusion/adapted.hpp>
#include <boost/variant.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>
namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

struct regex
{
    std::string _pattern;
    explicit regex(std::string const& pattern) : _pattern(pattern) {}
};

typedef boost::variant<double, int, std::string, regex> value;

enum logicOp { logicOr, logicAnd, logicPositive };

struct condition
{
    bool          _negated;
    std::string   _propertyname;
    value         _operand;      // value or regex
};

struct filter
{
    logicOp   _op;
    condition _cond;
};

struct setcommand
{
    typedef std::list<std::pair<std::string, value> > pairs;
    pairs _propvals;
};

struct printcommand
{
    std::vector<std::string> _propnames;
};

typedef boost::variant<printcommand, setcommand> command;

struct statement
{
    std::vector<filter> _filters;
    command             _command;
};

BOOST_FUSION_ADAPT_STRUCT(regex, (std::string, _pattern))
BOOST_FUSION_ADAPT_STRUCT(printcommand, (std::vector<std::string>, _propnames))
BOOST_FUSION_ADAPT_STRUCT(setcommand, (setcommand::pairs, _propvals))
BOOST_FUSION_ADAPT_STRUCT(condition, (bool, _negated)(std::string, _propertyname)(value, _operand))
BOOST_FUSION_ADAPT_STRUCT(filter, (logicOp, _op)(condition, _cond))
BOOST_FUSION_ADAPT_STRUCT(statement, (std::vector<filter>, _filters)(command, _command))

// see http://stackoverflow.com/a/14206443/85371
namespace boost { namespace phoenix { namespace stl {
    template <typename This, typename Key, typename Value, typename Compare, typename Allocator, typename Index>
        struct at_impl::result<This(std::map<Key,Value,Compare,Allocator>&, Index)>
        { typedef Value & type; };
    template <typename This, typename Key, typename Value, typename Compare, typename Allocator, typename Index>
        struct at_impl::result<This(std::map<Key,Value,Compare,Allocator> const&, Index)>
        { typedef Value const& type; };
}}}

template <typename It, typename Delim>
    struct generator : karma::grammar<It, statement(), Delim>
{
    generator() : generator::base_type(start)
    {
        using namespace karma;

        property_  = karma::string;
        strlit_    = '"'  << karma::string << '"';
        regex_     = "m/" << karma::string << "/";

        value_     = (double_ | int_ | strlit_ | regex_);
        negate_    = eps [ _pass = !_val ] | lit("NOT");

        condition_ = negate_  << property_  << '=' << value_;
        print_     = "PRINT " << property_ % ", ";
        set_       = "SET "   << (property_ << '=' << value_) % ", ";
        command_   = print_ | set_;

        static const auto logicOpNames = std::map<logicOp, std::string> { 
            { logicPositive, "WHERE" },
            { logicAnd, "AND" },
            { logicOr, "OR" } };

        logic_ = string [ _1 = phx::at(phx::cref(logicOpNames), _val) ];

        filters_ = +(logic_ << condition_);

        statement_ = filters_ << command_;

        start = statement_;
    }

  private:
    karma::rule<It, logicOp()            , Delim> logic_;
    karma::rule<It, statement()          , Delim> statement_;
    karma::rule<It, std::vector<filter>(), Delim> filters_;
    karma::rule<It, command()            , Delim> command_;
    karma::rule<It, condition()          , Delim> condition_;
    karma::rule<It, statement()          , Delim> start;
    karma::rule<It, bool()        > negate_;
    karma::rule<It, printcommand()> print_;
    karma::rule<It, setcommand()  > set_;
    karma::rule<It, std::string() > strlit_, property_;
    karma::rule<It, value()       > value_;
    karma::rule<It, regex()       > regex_;
};

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, statement(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        // no-skipper rules
        property_  = alpha >> *alnum;
        strlit_    = '"' >> *(  (lit('\\') >> char_) | ~char_('"') ) > '"';

        // with-skipper rules
        regex_     = strlit_ [ _val = phx::construct<regex>(_1) ];
        value_     = double_ | int_ | strlit_;
        condition_ = (no_case["NOT"] >> attr(true) | attr(false)) 
            >> property_ 
            >> (
                    no_case["LIKE"] >> regex_ | '=' >> value_
               );

        print_   = no_case["PRINT"] >> property_ % ',';
        set_     = no_case["SET"] >> (property_ >> '=' >> value_) % ',';
        command_ = print_ | set_;

        filters_ %= +(
                (
                   no_case["WHERE"] [ _pass = (phx::size(_val) == 0) ] >> attr(logicPositive)
                 | no_case["AND"]   [ _pass = (phx::size(_val) >  0) ] >> attr(logicAnd)
                 | no_case["OR"]    [ _pass = (phx::size(_val) >  0) ] >> attr(logicOr)
                ) 
                >> condition_);

        statement_ = filters_ >> command_;

        start = statement_;
        BOOST_SPIRIT_DEBUG_NODES((start)(condition_)(value_)(strlit_)(regex_)(property_)(statement_)(filters_)(print_)(set_)(command_));
    }

  private:
    qi::rule<It, statement()          , Skipper> statement_;
    qi::rule<It, std::vector<filter>(), Skipper> filters_;
    qi::rule<It, printcommand()       , Skipper> print_;
    qi::rule<It, setcommand()         , Skipper> set_;
    qi::rule<It, command()            , Skipper> command_;
    qi::rule<It, value()              , Skipper> value_, regex_;
    qi::rule<It, condition()          , Skipper> condition_;
    qi::rule<It, statement()          , Skipper> start;
    // lexemes
    qi::rule<It, std::string()> strlit_, property_; // no skipper
};

bool doParse(std::string const& input)
{
    auto f(begin(input)), l(end(input));

    parser<decltype(f), qi::space_type> p;
    statement parsed;

    bool ok = qi::phrase_parse(f,l,p,qi::space,parsed);
    if (ok)   
    {
        std::cout << "parse success: '" << input << "'\n";
        generator<boost::spirit::ostream_iterator, karma::space_type> gen;
        std::cout << "parsed: " << karma::format_delimited(gen, karma::space, parsed) << "\n";
    }
    else      
        std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

    if (f!=l) 
        std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";

    return ok;
}

int main()
{
    doParse("where currency like \"GBP|USD\" set logging = 1, logfile = \"myfile\"");
    doParse("where not status = \"ok\" print ident, errorMessage");
    doParse("where status = \"ok\" or not currency like \"GBP|USD\" print ident, errorMessage");
    // All the extra levels of escaping get a bit ugly here. Of course, you'd be reading from a file/database/etc...
    doParse("where status = \"\\\"special\\\"\" set logfile = \"C:\\\\path\\\\to\\\\logfile.txt\"");
} 
```

# c# - 在方法中访问属性时使用私有或公共属性成员？

> ID：14548593
> 
> 赞同：4
> 
> 时间：2013-01-27T14:53:29.380
> 
> 标签：c#, design-patterns, properties

> **可能重复：**
> [在包含的类中，使用属性还是字段？](https://stackoverflow.com/questions/10366904/within-the-containing-class-use-property-or-field)

看看下面的属性：

```
private string _name;
public string Name 
{  
    get
    {
        return _name;
    }
    set 
    {
        _name = value 
    }
} 
```

假设我需要访问 name 属性，并且我在声明此属性的同一类中的方法中，我应该使用 this.Name 还是 this._name？使用公共成员是更好的做法还是至少更清洁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:55:03.033

您可以使用自动属性简化此代码：

```
public string Name { get; set; } 
```

现在您可以`Name`在方法中使用该属性。

当您的 getter/setter 中有一些更复杂的逻辑时，将使用支持字段。然后根据您是否需要访问该字段或通过 getter/setter 中的逻辑，您将使用该字段或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:54:00.637

我认为最好的例子就是这个。如果您使用 DataBindings 属性，通常看起来像这样：

```
public string Name
{
    get { return _name; }
    set
    {
        _name = value;
        OnPropertyChanged("Name");
    }
} 
```

所以，如果你只是想在这个类中获取名称，那么使用它就像`this.Name`或一样都没有关系`this._name`。

但另一方面，如果你想设置它，这真的取决于你是否想更新 UI。

我的个人惯例是，只要有可能，我就会使用私有后备字段。

在您的情况下，如果 getter 和 setter 中实际上没有更多逻辑 - 自动属性就足够了。

# ember.js - 如何在 Ember.js 中处理“没有匹配的路由”并显示 404 页面？

> ID：14548594
> 
> 赞同：47
> 
> 时间：2013-01-27T14:53:34.390
> 
> 标签：ember.js

我该如何处理错误

```
Uncaught Error: No route matched the URL '...' 
```

并显示自定义 404 页面？

* * *

*注意：这个问题在几个月前被问过并[回答](https://stackoverflow.com/questions/12786383/ember-router-how-to-handle-404-not-found-routes)了 - 但不再起作用。*

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-17T22:45:48.653

```
App.Router.map(function() {
  //set up all of your known routes, and then...
  this.route("fourOhFour", { path: "*path"});
}); 
```

.. 您定义了 FourOhFourRoute 以显示您选择的“找不到路线”消息。您将能够访问fourOhFour 路由中最初请求的路径作为路径参数。

编辑：为了清楚起见——这个答案是在其他人被报告不再工作之后出现的。

编辑 2：我已经更新了答案以反映 Yehuda Katz 的评论（如果我错了，请 LMK）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-28T21:30:13.037

这是一个例子：

我使用通配符路由定义了路由器中的最后一条路由，请参见：[http ://emberjs.com/guides/routing/defining-your-routes/#toc_wildcard-globbing-routes](http://emberjs.com/guides/routing/defining-your-routes/#toc_wildcard-globbing-routes)

我有一条`/not-found`路线，请参阅我的路由器中定义的最后一条路线`/*path`以捕获任何文本字符串，请参阅：[https ://github.com/pixelhandler/blog/blob/master/client/app/router.js#L19](https://github.com/pixelhandler/blog/blob/master/client/app/router.js#L19)

```
Router.map(function () {
  this.route('about');
  this.resource('posts', function () {
    this.resource('post', { path: ':post_slug' });
  });
  this.resource('admin', function () {
    this.route('create');
    this.route('edit', { path: ':edit_id' });
  });
  this.route('not-found', { path: '/*path' });
}); 
```

该路由重定向到`/not-found`，请参阅：[https ://github.com/pixelhandler/blog/blob/master/client/app/routes/not-found.js](https://github.com/pixelhandler/blog/blob/master/client/app/routes/not-found.js)

```
import Ember from 'ember';
export default Ember.Route.extend({
  redirect: function () {
    var url = this.router.location.formatURL('/not-found');
    if (window.location.pathname !== url) {
      this.transitionTo('/not-found');
    }
  }
}); 
```

此外，任何具有导致拒绝承诺的钩子（例如`model`, `beforeModel`）的路由都可以使用该操作转换到 404。`afterModel``error`

```
actions: {
  error: function (error) {
    Ember.Logger.error(error);
    this.transitionTo('/not-found');
  }
} 
```

哪个呈现`not-found`模板，请参阅：[https ://github.com/pixelhandler/blog/blob/master/client/app/templates/not-found.hbs](https://github.com/pixelhandler/blog/blob/master/client/app/templates/not-found.hbs)

```
<h1>404 Not Found</h1>
<p>
  Perhaps you have a link that has changed, see {{#link-to 'posts'}}Archives{{/link-to}}.
</p> 
```

这是我的 404 页面： http: [//pixelhandler.com/not-found](http://pixelhandler.com/not-found)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-17T17:42:31.593

您可以尝试在路由器末尾添加一条包罗万象的路由：

```
App.Router.map(function() {
  this.resource('post', ...);
  this.resource('user', ...);
  this.route('catchAll', { path: '/*' });
});

App.CatchAllRoute = ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T06:58:57.000

**在 Ember 2.x 中**

在`App.Router.map`函数内部，将代码放在回调函数的末尾下方。

```
this.route('your_handler_route_name', { path: '/*path' }）； 
```

现在，每条**未被**先前定义的路线捕获的路线都将被路线捕获`your_handler_route_name`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T04:46:57.600

**解决方案 1**

显示 404 内容：

```
App.Router.reopen({
        handleURL: function (url) {
            try {
                return this._super(url);
            } catch (error) {
                if (error.message.match(/No route matched the URL/)) {
                    return this._super('/404');
                }
            }
        }
    }); 
```

如果您还想将 URL 更改为 404：

```
App.Router.reopen({
        location: locationImplementation,
        handleURL: function (url) {
            try {
                return this._super(url);
            } catch (error) {
                if (error.message.match(/No route matched the URL/)) {
                    this.transitionTo('404');
                    return this._super('/404');
                }
            }
        }
    }); 
```

要了解这里发生的事情，请参见`22636`ember **rc2**中的行。

**解决方案 2**

解析当前 URL 并检查路由或资源是否存在`App.Router.router.recognizer.hasRoute('route.path.goes.here');`

# asp.net - 在 DataBind 之后从代码隐藏访问 Eval()

> ID：14548595
> 
> 赞同：2
> 
> 时间：2013-01-27T14:53:37.343
> 
> 标签：asp.net, gridview, eval, late-binding

我有一个 GridView，其中 ItemTemplates 只是 Eval("ColumnName")，绑定数据后如何访问该字段？

我尝试了 gv.Rows[0].Cells[0] 等，但那里什么也没有。

这是因为后期绑定吗？还是仅仅因为 Eval 不在控件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:06:38.810

您想在“RowCommand”或“RowDataBind”事件中获取数据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:50:10.087

我解决了：

```
((DataBoundLiteralControl)gv.Rows[0].Cells[0].Controls[0]).Text 
```

# javascript - 按名称迭代选择对象

> ID：14548601
> 
> 赞同：1
> 
> 时间：2013-01-27T14:54:31.070
> 
> 标签：javascript, jquery, html

您好，我已关注 Select 对象：

```
<select id="additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears" name="additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears" 
class="w-65 me2-casco-claims-last-years">
 <option value="">-- choose--</option>
 <option value="0">0</option>
 <option value="1">1</option>
 <option value="2">2</option>
 <option value="3">3 and more</option>
</select> 
```

当我尝试通过 jQuery 获取这个对象时

```
$('additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears'); 
```

或 $('select#additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears');

我越来越 []..

所以我尝试通过以下方式从名称中获取它：

```
var select = $("select[name='additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears']") 
```

这是工作，我在选择变量中有选择对象

接下来我需要迭代每个选项，所以我试图让选项集合进行迭代但是

```
select.options or     
        $("select[name='additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears']").options 
```

给我未定义的..而且我不知道如何迭代我的选择中的每个选项元素，我不知道会发生什么，因为我的元素 ID 有逗号“。” ? 我无法修复名称，因为它是由 spring 自动生成的，并且必须以正确的名称发布到服务器；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:55:39.853

尝试这个：

```
$("#additionalDataForm\\.motoForm\\.cascoForm\\.ownerClaims\\.claimsLastYears options") 
```

中的`.`s`id`给 jQuery 一种印象，即它不是一个类选择器。要告诉 jQuery 不要将其视为类选择器，您需要转义点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:07:27.737

另一种通过 ID 选择具有复杂名称的元素的方法是使用原生 JavaScript DOM 方法：

```
$("option", document.getElementById("additionalDataForm.motoForm.cascoForm ..."))
   .each(function() {
      // ...
   }); 
```

**演示：http:** [//jsfiddle.net/xF9qt/](http://jsfiddle.net/xF9qt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:57:43.157

利用：

```
$("select[name='additionalDataForm.motoForm.cascoForm.ownerClaims.claimsLastYears']")[0].options 
```

# c# - composition and aggregation example with UML class diagram

> ID：14548612
> 
> 赞同：16
> 
> 时间：2013-01-27T14:55:22.010
> 
> 标签：c#, uml, class-diagram

i can't seem to understand completely the difference between aggregation and composition in a code.

Client <.>---->BankAccount

(this is supposed to be Client - BankAccount composition class diagram).

So in this example, Client has a bank account, so this means, when a client object dies, his bank account object dies too. Does this mean, that we have to have a BankAccount object within Client class ?

```
Class Client
{

    BankAccount acc = new BankAccount();

    public void addMoneyToBankAccount(decimal amount)
    {         
        acc.AddMoney(amount);
    }

    public decimal CheckBalance()
    {
        return acc.CheckAccountBalance();
    }

} 
```

So, is this composition in code ? What would aggregation look like in this example? Sorry for the newbie question, please correct me if the code was wrong. Thanks in advance.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T15:06:58.973

Yes, What you do is call composition, if you want to do aggregation you to it like this:

```
Class Client
{

    BankAccount acc;

    public Client(BankAccount p_acc)
    {
      acc=p_acc;
    }

    public void addMoneyToBankAccount(decimal amount)
    {         
        acc.AddMoney(amount);
    }

    public decimal CheckBalance()
    {
        return acc.CheckAccountBalance();
    }

} 
```

**Aggregation**:

If inheritance gives us 'is-a' and composition gives us 'part-of', we could argue that aggregation gives us a 'has-a' relationship. Within aggregation, the lifetime of the part is not managed by the whole. To make this clearer, we need an example. For the past 12+ months I have been involved with the implementation of a CRM system, so I am going to use part of this as an example.

The CRM system has a database of customers and a separate database that holds all addresses within a geographic area. Aggregation would make sense in this situation, as a Customer 'has-a' Address. It wouldn't make sense to say that an Address is 'part-of' the Customer, because it isn't. Consider it this way, if the customer ceases to exist, does the address? I would argue that it does not cease to exist. Aggregation is shown on a UML diagram as an unfilled diamond.

As I said at the beginning of the answer, this is my take on composition and aggregation. Making the decision on whether to use composition or aggregation should not be a tricky. When object modelling, it should be a matter of saying is this 'part-of' or does it 'have-a'?

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T15:04:59.050

Your client-BankAccount code is a `composition` relationship

Your code satisfies all the properties of composition

->the lifetime of the part classifier(`BankAccount`) is dependent on the lifetime of the whole classifier(`Client`).

->data usually flows in only one direction (that is, from the whole classifier(`Client`) to the part classifier(`BankAccount`).

* * *

Aggregation can be represented by passing BankAccount to client as an argument to a method

So,this code is Aggregation

```
class client
{
    public bool updateAccount(BankAccount ba){....}
} 
```

As you can see it satisfies all the properties of Aggregation

->it can exist independently of `client`

->Data flows from the whole classifier(`client`) to the part(`BankAccount`)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-04T14:32:14.290

This explanation [from IBM](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/ "from IBM Rational") is helpful to me:

For example, we can think of Car as a whole entity and Car Wheel as part of the overall Car. The wheel can be created weeks ahead of time, and it can sit in a warehouse before being placed on a car during assembly. In this example, the Wheel class's instance clearly lives independently of the Car class's instance. However, there are times when the part class's lifecycle is not independent from that of the whole class — this is called composition aggregation. Consider, for example, the relationship of a company to its departments. Both Company and Departments are modeled as classes, and a department cannot exist before a company exists. Here the Department class's instance is dependent upon the existence of the Company class's instance.

So to me, the creator/destroyer life cycle (new, release) for a composition goes inside an instance; an aggregation must have the option instead to addObject and the method simply save the object id as an attribute of itself. So in the above Client and Bank Account example, it's really up to the business to determine if an Account can exist even if the Client record is destroyed (orphaned accounts) If it is aggegator, you would have Client methods:

```
Class Client {
- (void) addToAccount:(BankAccount *)acc;
- (void) removeFromAccount:(BankAccount *)acc;
} 
```

and the close account method would be part of the BankAccount object instance, since it can exist independently from the Client.

versus the composition method which requres the Client to exist, and if the Client ceases to exist, all the accounts belonging to that account owner are deleted. Therefore, you would ask the Client object to create you an account:

```
Class Client {
- (BankAccount *) openAccount;
- (BOOL) closeAccount:(BankAccount *)acc;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T15:02:59.137

Yes, you are right. This is a simple *composition*.

For an *aggregation*, your Client class should keep reference for BankAccount class, but should not control it's object lifetime.

```
class Client
{
     private readonly BankAccount _account;

     public Client(BankAccount account)
     {
         _account = account;
     }

     //...
} 
```

After Client object will be destroyed, BankAccount object used within can be assigned for an another Client.

# cakephp - 使用翻译行为时的 CakePHP 模式

> ID：14548613
> 
> 赞同：1
> 
> 时间：2013-01-27T14:55:29.480
> 
> 标签：cakephp, internationalization

我使用`TranslateBehavior`两个字段：

*   姓名
*   蛞蝓

我从模型中删除这些字段，因为字段的内容将保存在`i18n table`. 它工作得很好，但有时在我使用的应用程序中`$this->Model->hasField('name')`，当我从模型表中删除字段之后，这个函数总是返回 false。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:56:54.420

## 虚拟场

翻译行为使用[虚拟字段](http://book.cakephp.org/2.0/en/models/virtual-fields.html)，例如，如果您查询*不*`hasField`存在的字段- 它会正确返回 false，因为该字段实际上不存在。

 *## hasField + Translate 行为永远不会“起作用”

翻译行为在查询前按需创建虚拟字段定义，并在查询后销毁它们。因此，您不能只使用[hasField 的第二个参数，](http://book.cakephp.org/2.0/en/models/virtual-fields.html#model-hasfield)因为除非您设法在翻译行为的[beforeFind](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Model/Behavior/TranslateBehavior.php#L93)和[afterFind](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Model/Behavior/TranslateBehavior.php#L269)方法之间调用它，否则结果将始终为 false：

```
$willAlwaysBeFalse = $this->hasField('name', true); 
```

## 备择方案

您可以选择以下几件事：

*   覆盖 hasField 以便它为这些几乎虚拟的翻译字段返回 true
*   为翻译的字段定义一个虚拟虚拟字段，以便第二个 arg of`hasField`确实允许您获得肯定的响应
*   不要删除未使用的翻译字段 - 所以`hasField`总是返回 true

最简单的解决方案是不删除该字段。这也将确保，虽然数据可能是空白的，但如果禁用翻译行为或存在某种错误，您的模型仍然可以工作。*

# linux - 如何低级调试冻结的 Ubuntu 内核？

> ID：14548615
> 
> 赞同：0
> 
> 时间：2013-01-27T14:55:34.200
> 
> 标签：linux, ubuntu, linux-kernel

我们的产品是基于`Ubuntu 12.04`minimal + openbox的自定义媒体服务器。

一些客户报告说他们的系统偶尔会冻结。键盘停止工作。鼠标可以左右移动，但点击不起作用。

当系统死机时，我仍然可以使用 ssh 进入机器。

感谢您帮助我了解我可以做些什么来隔离问题。我可以简单地通过 gdb 附加到某个内核进程并查看它挂起的位置吗？

或者，有没有办法以调试模式启动 Ubuntu，让它正常运行直到发生冻结，然后附加到某个进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:13:14.363

正如其他人指出的那样，如果您仍然能够通过 ssh 连接到机器，那么内核和用户空间就不会被冻结。根据您对输入问题的描述（键盘没有响应，鼠标单击不起作用），我怀疑您的客户可能有一个设备发送的事件会混淆 X 服务器。

我建议您建议让您的消费者向您发送已连接设备的列表，并使用它来尝试找到一个（或多个）可能的嫌疑人，然后尝试在您这边重现该问题。一旦您确定了有故障的设备，您就可以联系上游，以便在输入设备数据库中将它们标记为古怪。

已知会导致 Ubuntu 出现问题的此类设备之一是[SB Arena USB 耳机](https://bugs.launchpad.net/ubuntu/+source/xorg-server/+bug/1007575)，但可能还有其他设备。

# php - 如何为 node.create 使用 drupal xmlrpc

> ID：14548619
> 
> 赞同：0
> 
> 时间：2013-01-27T14:55:48.913
> 
> 标签：php, drupal, xml-rpc

我正在使用`drupal xmlrpc` 我不会在我的 c# 应用程序中使用`XMLRPC POST`for`node.create` 但我得到了一个`error 401 Access denied for user anonymous` 并且我没有找到可以为用户放置用户名和密码的位置正在使用[这里的示例](http://drupal.org/node/1304802) [http://drupal.org/node/ 1304802](http://drupal.org/node/1304802)

请帮助我是新手`drupal`，`drupal`文档对我来说实际上非常Missy

这里是post **xml**代码

```
 <?xml version='1.0' ?>
<methodCall>
  <methodName>node.create</methodName>
  <params>
    <param>
      <value>
        <struct>
          <member>
            <name>type</name>
            <value>
              <string>story</string>
            </value>
          </member>
          <member>
            <name>body</name>
            <value>
              <string>Create body input</string>
            </value>
          </member>
          <member>
            <name>title</name>
            <value>
              <string>Test title</string>
            </value>
          </member>
        </struct>
      </value>
    </param>
  </params>
</methodCall> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:08:45.453

首先由管理员登录drupal站点。然后尝试这样做。我认为它会起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T09:55:45.730

我知道现在回答你的问题已经很晚了。首先，您发布的 XML 示例用于 Drupal 6。如果您使用的是 Drupal 7，则 node.create ressource 将类似于以下示例：

```
<?xml version='1.0' ?>
<methodCall>
  <methodName>node.create</methodName>
  <params>
    <param>
      <value>
        <struct>
          <member>
            <name>type</name>
            <value>
              <string>article</string>
            </value>
          </member>
          <member>
            <name>body</name>
            <value>
              <struct>
                <member>
                  <name>und</name>
                  <value>
                    <array>
                      <data>
                        <value>
                          <struct>
                            <member>
                              <name>value</name>
                              <value>
                                <string>My test body text.</string>
                              </value>
                            </member>
                          </struct>
                        </value>
                      </data>
                    </array>
                  </value>
                </member>
              </struct>
            </value>
          </member>
          <member>
            <name>title</name>
            <value>
              <string>My test node title</string>
            </value>
          </member>
        </struct>
      </value>
    </param>
  </params>
</methodCall> 
```

根据您设置服务权限的方式，您是否应该是经过身份验证的用户。您可以在 http://your_domain/admin/structure/services/list/your_endpoint/edit 中禁用“会话身份验证”进行测试。如果您仍然需要帮助，请随时提出任何问题。

# python - 在 youtube 中检索用户的加入日期

> ID：14548621
> 
> 赞同：0
> 
> 时间：2013-01-27T14:55:53.460
> 
> 标签：python, youtube-api

我正在尝试使用 YouTube API、Python 检索用户的个人资料信息，例如年龄、位置等。到目前为止，除了用户加入 YouTube 的日期外，我已成功检索到所有这些内容。

此信息在个人资料中以“加入日期”的形式提供，但我不知道如何提取它。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:50:54.380

您应该使用新的 v3 数据 API。

如果你有频道的 id，你可以在这里调用它：

[https://www.googleapis.com/youtube/v3/channels?part=snippet&id=UCDsO-0Yo5zpJk575nKXgMVA&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/channels?part=snippet&id=UCDsO-0Yo5zpJk575nKXgMVA&key=%7BYOUR_API_KEY%7D)

如果您没有 API 密钥，您可以在 Google API 控制台中获得一个。

进行 API 调用后，可以在 items.snippet.publishedAt 中找到您要查找的 Date Joined 字段

可以在此处找到此 API 的文档： [https ://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list)

# iphone - 我的应用程序的 ManagedObjectModel

> ID：14548627
> 
> 赞同：-1
> 
> 时间：2013-01-27T14:57:00.603
> 
> 标签：iphone, ios, objective-c, core-data

我在 developer.apple.com 上阅读了一些关于 Core Data 的文章和信息。现在我想为我的应用创建 ManagedObjectModel。所以我需要帮助——因为这是我对数据库的第一个计划。所以我的应用程序将有下一个选项

1.  用户必须使用其登录名和密码登录。因此，如果他忘记密码，则有机会通过在秘密问题上输入正确答案来创建新的通行证。
2.  应用程序将存储联系人。每个联系人都有姓名、姓氏、照片、电话和地图注释的coollection。
3.  用户可以创建一些组（如家人、朋友...）

所以我创建这个应用程序是为了理解objective-c的基础知识，也许我的应用程序中没有逻辑。请检查我的实体，也许我允许失误。

第一实体**联系人**

![在此处输入图像描述](../Images/7b4c9fe6b173eee7716f1957a4132d67.png)

*   id - 联系人号码。
*   图片 - 我将在那里存储数组。因此，如果图像 <200 Kb 我将其插入数据库，如果更多，我将保存此图像的路径
*   map - 地图注释字典
*   姓名
*   电话 - 电话号码数组
*   姓

第二实体**组**

![在此处输入图像描述](../Images/7547a35f4bc54c7d934f1a12f522fd98.png)

*   联系人 - 包含联系人 ID 的数组，属于该组
*   id - 组数
*   title - 它是组的名称（如 Family、Friends...）

第三实体**登录**

![在此处输入图像描述](../Images/9d68322c59813138273186097c1f1bcb.png)

*   groups - 包含组 id 的数组，属于该组
*   登录
*   密码
*   秘密答案 - 回答秘密问题
*   秘密问题

**关系**

![在此处输入图像描述](../Images/ba2d2f5f4f0b8562a4b432dd4cb9fee6.png)

所以每个登录名可以有一些组，但每个组将只属于一个登录名。**所以我为组**关系创建了“多对多关系” 。所以每个组都包含一些联系人，并且联系人可以在一些不同的组中——我创建了多对多的关系。

关于属性“可选”。我明白，如果不检查 - 这个属性或关系必须是。所以我删除了这个属性

*   **联系人**中的“id”
***   **组**中的“id”***   登录中的“登录名”，“密码**”***   在联系中的“toGroups”关系**中***   在**组中的关系“toLogin”中******

 ****关于“删除规则”。我想如果我删除一些登录名，必须删除属于此登录名的所有组和联系人。**我可以在登录**中为关系“组”选择“级联”，但它只会删除组而不是联系人。对于“toContact”关系，我不能这样做，因为如果我删除某个组，它将删除联系人，但其他组仍然可以拥有此联系人。**所以也许我必须在登录**中创建属性“联系人” ，它将是联系人数组，并创建与联系人的关系，如果我删除登录，则属于它的所有组和联系人都将被删除。

PS对不起，我还是新手，我的问题对你来说可能很有趣，但我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:27:39.530

我注意到的几件事——

1.  您无需使用“id”属性。大多数数据库都计划将这些用于主/外键管理，但如果您设置了关系，核心数据将为您管理这一切。同样通过这种逻辑，您不需要属性来手动创建该关系（即组中的“联系人”和登录中的“组”
2.  您确定要将字典和/或数组存储在实体中吗？这些听起来像是另一个独立的实体，例如用于地图注释的实体。然后，您将建立从原始对象到新对象的一对多关系。
3.  存储为二进制数据的图像并不是解决此问题的最有效方法。最好使用应用程序沙箱提供的文件系统。前几天刚看到一个类似的问题在[iOS设备上本地存储图像](https://stackoverflow.com/questions/14531912/storing-images-locally-on-an-ios-device/14531979#14531979)****

# c# - 反射以及如何处理枚举

> ID：14548629
> 
> 赞同：0
> 
> 时间：2013-01-27T14:57:24.830
> 
> 标签：c#, reflection, enums

我想使用类似的东西：

```
object ob;
            var props = ob.GetType().GetProperties();

            List<Element> list = new List<Element>();
            foreach (var prop in props)
            {
                if (prop.PropertyType == typeof(String))
                    list.Add(makeStringProperty(prop));
                else if (prop.PropertyType == typeof(int))
                    list.Add(makeIntProperty(prop));
                else
                {
                }
            } 
```

它将给定对象中的每个属性添加到给定列表中。现在我想添加一个子句来添加枚举变量，包括通过 Enum.GetValues() fe 获取其所有值。这对于任何一个给定的枚举来说都很容易，但我希望这对于每个可能的枚举都是通用的，所以例如如果 ob 会有：

```
enum Weather {
sunny,
rainy,
cloudy
}
Weather weather = sunny;

enum Places {
beach,
mall,
home
}
Places place = beach; 
```

我将能够自己获取两个变量以及两个枚举的所有值。当然我不能直接检查 typeof(Enum) 或任何东西。有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:06:10.390

```
else if(prop.PropertyType.IsEnum)
{
    var values = Enum.GetValues(prop.PropertyType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:02:01.427

有点像

```
typeof(Weather).GetFields() 
```

或者

```
ob.GetType().GetFields() 
```

如果您想直接在`enum`类型上使用反射。an 的成员`enum`是一种`static`字段。

但你也可以使用

```
Enum.GetValues(ob.GetType()) 
```

无论如何，如果有疑问，您应该首先检查它是否是枚举：

```
var typeOfOb = ob.GetType();
if (typeOfOb.IsEnum)
{
  // use Enum.GetValues(typeOfOb) here
} 
```

注意：`System.Type`是用于类型确定的编译时（如`typeof(Weather)`）和类型确定的运行时（如 ）的类`ob.GetType()`。因此，您可以将两者都用作`GetValues(System.Type)`静态方法的参数。

# spotify - Libspotfiy 播放列表文件夹处理

> ID：14548637
> 
> 赞同：1
> 
> 时间：2013-01-27T14:58:26.020
> 
> 标签：spotify, libspotify

我想弄清一些关于 Libspotify 中播放列表文件夹处理的事情。有些事情似乎有点不一致（我得到印象文件夹处理已被黑客入侵作为事后的想法？）

当我循环浏览容器中的所有播放列表时，我注意到我为所有文件夹获得了相同的 sp_playlist 句柄值。这意味着我不能在文件夹上使用任何 sp_playlist_xxx 函数，对吧？所以我不能在他们身上注册回调，找不到他们的名字，等等？

相反，我必须使用 PlaylistContainer 上的特殊功能来获取文件夹名称？

在指向文件夹的句柄上使用 sp_playlist_add_ref 和 sp_playlist_release 是否危险？

另外， sp_playlistcontainer_playlist_folder_id 函数的用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:01:13.710

你的假设大多是正确的。播放列表容器列表中的文件夹占位符就是 - 占位符。

> 相反，我必须使用 PlaylistContainer 上的特殊功能来获取文件夹名称？

是的，`sp_playlistcontainer_playlist_folder_name()`。

> 在指向文件夹的句柄上使用 sp_playlist_add_ref 和 sp_playlist_release 是否危险？

不是特别是，只要你不过度释放某个地方，但一切都是如此。您将拥有对占位符的多个拥有引用，这很好。

> 另外， sp_playlistcontainer_playlist_folder_id 函数的用途是什么？

这是文件夹的唯一 ID，主要是因为您不能将指针用作唯一标识符，因为所有文件夹都使用相同的占位符对象。它允许您在不对名称进行字符串比较的情况下相互比较文件夹（由于多个文件夹可以具有相同的名称，这实际上不是一个好主意）。

# javascript - 除了随机数不能为 3 之外，如何生成 1 - 10 之间的随机数

> ID：14548641
> 
> 赞同：0
> 
> 时间：2013-01-27T14:58:58.560
> 
> 标签：javascript, random

除了随机数不能为 3 之外，如何生成 1 - 10 之间的随机数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T15:01:10.117

获取 1 到 9 之间的随机数，如果大于或等于 3，则添加一个，或者

更好，只需将任何`3`s 更改为`10`s。

```
function getNumber() {
    return (n = 9 * Math.ceil(Math.random())) === 3? 10: n;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:03:36.093

基于这个[不错的答案](https://stackoverflow.com/a/1527820/612202)：

```
function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

var rand;
while((rand = getRandomInt(1, 10)) == 3);
// rand is now your random number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:16:34.813

这是一个简短、快速的解决方案，使用自动执行功能，可以完全满足您的需求，但仅对您描述的特定情况有用：

```
var randOneToTenButNotThree = function () {
    var result = Math.floor(Math.random() * 10) + 1; // PICK A NUMBER BETWEEN 1 AND 10
    return (result !== 3) ? result : randOneToTenButNotThree(); // IF THE NUMBER IS NOT 3 RETURN THE RESULT, OTHERWISE CALL THIS FUNCTION AGAIN TO PICK ANOTHER NUMBER
}

var result = randOneToTenButNotThree(); // RESULT SHOULD BE A NUMBER BETWEEN 1 AND 10 BUT NOT 3 
```

但是，您可以将其抽象出来以产生任何给定范围内的随机数，不包括您选择的任何数字：

```
var randExcl = function (lowest, highest, excluded) {
    var result = Math.floor(Math.random() * (highest - lowest)) + lowest;
    return (result !== excluded) ? result : randExcl();
}

var result = randExcl(); 
```

只是不要忘记，如果函数被重命名，您还应该在该 return 语句的末尾从内部更改对它的引用，以便它可以在产生排除数字时继续调用自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T08:07:14.077

函数 r(){a = Math.floor(Math.random() * 10) + 1; 如果 (a==3) a++; 返回一个;}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T15:03:33.587

```
function rand(){
var r = Math.ceil(Math.random() * 10);
if (r==3){
return rand()}
else
return r;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T15:00:26.217

这应该有效。

```
var r = 3;
while(r == 3) r = Math.ceil(Math.random() * 10); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-27T15:01:33.017

```
function rand(begin, end) {
    var result = Math.floor( Math.random() * (end - begin + 1) ) + begin;

    return result === 3 ? rand(begin, end) : result;
} 
```

# php - codeigniter 中的活动记录自动在 where 子句值周围添加引号

> ID：14548644
> 
> 赞同：5
> 
> 时间：2013-01-27T14:59:19.260
> 
> 标签：php, codeigniter

我试过阅读 stackoverflow 上的其他帖子，还检查了 ci 的活动记录文档，但我似乎找不到我的问题的答案

我的模型中有以下逻辑：

```
 $query = $this->db->get_where('categories', array('parent_id' => $category_id)); 
```

根据 last_query() 方法生成的 sql 是：

选择 * 从 ( `categories`) WHERE `parent_id`= '8'

我需要删除数字 8 周围的引号。我该怎么做？

我尝试使用 select 语句并将 false 作为第二个参数传递。例如：

```
 $this->db->select('*', false);
    $this->db->from('categories');
    $this->db->where('parent_id=',$category_id); 
```

但这并没有真正改变太多。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T15:11:37.147

默认情况下，CodeIgniter 会尝试预测比较中的数据类型，并相应地使用适当的 SQL 语法。如果您的查询使用单引号，则可能表明 $category_id 被视为字符串而不是整数。如果您尝试：

```
$this->db->select('*');
$this->db->from('categories');
$this->db->where('parent_id', (int) $category_id); 
```

或者，您可以手动构建自己的 WHERE 语句：

```
$this->db->where('parent_id = ' . (int) $category_id); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-30T14:31:57.703

对于 MIN 和 MAX 查询，我使用 null 和 false 关键字来删除引号。

```
$this->db->where("$value > min_column",null,false);
$this->db->where("$value < max_column",null,false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T15:06:49.870

这些方法的想法是自动转义以防止 SQL 注入，如果由于某种原因您不想发送这样的原始查询：

```
$q = "select * from categories where parent_id = $category_id";
$this->db->query($q)->result(); 
```

我发现这更容易。但是我认为您可以发送一个额外的`false`参数来禁用它，例如：

```
 $query = $this->db->get_where('categories', array('parent_id' => $category_id),false); 
```

仅供参考，如果您想发送原始查询并转义它们（对于更复杂的查询），您可以使用：

```
$category_id = $this->db->escape($category_id); 
```

# ruby-on-rails - link_to 使用 PUT 方法语法到 rails 3 中的不同控制器

> ID：14548645
> 
> 赞同：1
> 
> 时间：2013-01-27T14:59:24.030
> 
> 标签：ruby-on-rails, controller, link-to, put

我尝试从 Portfolio 视图调用我的 Gallery 控制器的操作。作品集由许多画廊组成。

我试试这个：

```
<%= link_to("Heart", gallery_path(gallery), :action => "like", :method => :put ,  :remote => true) %>

<%= link_to("Heart", :controller => :galleries, :action => "like", :method => :put ,  :remote => true) %> 
```

我得到：

```
<a href="/galleries/3" action="like" data-method="put" data-remote="true" rel="nofollow">Heart</a> 
```

和

```
<a href="/galleries/1/like?method=put" data-remote="true">Heart</a> 
```

我想得到但我卡住了......：

```
<a href="/galleries/3/like" data-method="put" data-remote="true">Heart</a> 
```

有大神帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:44:45.113

我相信你会得到行为，因为你试图在相同的情况下使用“路径助手”和“参数哈希”样式`link_to`（有关更多详细信息，请参阅[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)）。我更喜欢路径助手样式，所以我会这样写链接：

```
<%= link_to(
    'Heart',
    like_gallery_path(gallery),
    {:method => :put, :remote => true}
) %> 
```

如果你喜欢 params 哈希风格，你会写：

```
<%= link_to(
    'Heart',
    {:controller => 'galleries', :action => 'like', :id => gallery.id},
    {:method => :put, :remote => true}
) %> 
```

请注意，URL 参数（控制器、操作等）与链接参数（方法和远程）位于单独的散列中。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:14:01.677

尝试：

```
<%= link_to "Heart", gallery_path(gallery), :url => { :controller => "galleries", :action => "like"}, :method => :put, :remote => true)  %> 
```

# mysql - 在一个查询中获取所有后代？

> ID：14548648
> 
> 赞同：3
> 
> 时间：2013-01-27T15:00:11.613
> 
> 标签：mysql, sql, database

我正在创建一个电子商务网站，我`category_id`在 URL 中有 ，并基于`category_id`我将查询所有子孙（如果找到），因此我可以显示仅与那个相关的产品`category_id`。这个查询真的很酷，因为它不关心它有多少父母......它只是寻找所有父母，直到它找不到更多。

我遇到的问题是我的查询只会获得父母和祖父母（如果找到），但我无法弄清楚如何让这个查询获得所有子行或孙子行（如果找到）。这个查询是从[这里](https://stackoverflow.com/questions/2441821/getting-all-parent-rows-in-one-sql-query)提取的，所以我没有写查询，而且我很难做出正确的改变……我昨天试了一整天。

**编辑** 此查询也不会获得所有相关的子孙（如果找到）。我想要所有孩子和孙子（如果找到）。

**编辑** 这是可以找到我的数据的[SQL Fiddle 。](http://sqlfiddle.com/#!2/b8a979/19)

```
SELECT T2.category_id, T2.category_name 
FROM (SELECT @r AS _id, (SELECT @r := parent 
FROM categories 
WHERE category_id = _id) AS parent 
FROM (SELECT @r := 182)vars, categories h 
WHERE @r <> 0) T1 
JOIN categories T2 
ON T1._id = T2.category_id 
ORDER BY category_id ASC 
```

这是我的表架构：

`category_id | category_name | parent`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:01:30.967

有另一种方法可以完成此操作，但它需要第二个层次结构表。

附加表包含每个父方向关系一行，如下所示：

```
category_id category_name parent
   1           cat1          1
   2           cat2          1
   3           cat3          1
   4           cat4          2
   5           cat5          3
   6           cat6          5

category_id ancestor
   1           1
   2           1
   3           1
   4           1
   4           2
   5           1
   5           3
   6           1
   6           3
   6           5 
```

该表可以由您的代码或触发器维护。它使选择整个层次结构变得微不足道且非常快速，但会增加一些维护（添加/删除）开销，因此您需要考虑长期成本与开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:32:42.763

如果您事先知道[@rambocoder](https://stackoverflow.com/users/249538/rambo-coder)指示的最大可能深度......</p>

```
SELECT
    p.`category_id`,p.`category_name` AS 'parent',
    c.`category_name` AS 'child',
    gc.`category_name` AS 'grandchild'
FROM (SELECT * FROM `categories` WHERE `parent` IS NULL) p
INNER JOIN `categories` c
ON c.`parent`=p.`category_id`
INNER JOIN `categories` gc
ON gc.`category_id`=c.`category_id`
WHERE p.`category_id`=120
ORDER BY c.`category_id`, gc.`category_id` 
```

否则，如果您不确定结果可能达到多少层，那么您将需要编写一个存储过程。

# python - 删除不在引号内的空格

> ID：14548654
> 
> 赞同：2
> 
> 时间：2013-01-27T15:00:48.160
> 
> 标签：python, whitespace

> **可能重复：**
> [Python 正则表达式必须去除引号之间的空格](https://stackoverflow.com/questions/3609596/python-regular-expression-must-strip-whitespace-except-between-quotes)

我需要删除文件中不在单引号或双引号内（即不在字符串中）的所有空格。

我发现这个解决方案 [Python 正则表达式必须去掉引号之间的空格](https://stackoverflow.com/questions/3609596/python-regular-expression-must-strip-whitespace-except-between-quotes)

但这仅适用于双引号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:14:26.973

删除引号外的空格：

```
import re

parts = re.split(r"""("[^"]*"|'[^']*')""", text)
parts[::2] = map(lambda s: "".join(s.split()), parts[::2]) # outside quotes
print("".join(parts)) 
```

# c# - 并行 HTTPWeb 请求 URL

> ID：14548655
> 
> 赞同：0
> 
> 时间：2013-01-27T15:01:08.993
> 
> 标签：c#, vb.net, url, httpwebrequest, image

我有一个应用程序，它加载指向要使用 winforms 下载的图片的 HTTP URL 列表。异步下载的图片放在imagelist里面。我已经完成了，但我的方法一次只下载一张图片，一直持续到每张图片都下载完毕。有没有办法让 webrequest 并行下载多个项目以加快进程？即使带宽被划分，与应用程序一次只下载一张图片相比，它仍然应该更快。VB 或 C# 编码就可以了。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T15:06:45.970

试试这个方法

[https://github.com/dodyg/hobi-hobi/blob/master/HobiHobi.Core/Syndications/SyndicationFetcher.cs](https://github.com/dodyg/hobi-hobi/blob/master/HobiHobi.Core/Syndications/SyndicationFetcher.cs)

```
 public List<FeedAndSource> DownloadAll(RssSubscription subscription)
    {
        var feeds = var feeds = new SynchronizedCollection<FeedAndSource>();

        var tasks = new List<Task>();

        foreach (var sub in subscription.Items)
        {
            var r = Task.Factory.StartNew(() =>
                {
                    var res = Fetch(sub.XmlUri);
                    if (res.IsFound)
                        feeds.Add(new FeedAndSource(sub, res.Item));
                });

            tasks.Add(r);
        }

        Task.WaitAll(tasks.ToArray());

        return feeds.toList();
    } 
```

您只需要关心Task.Factory.StartNew 和Task.WaitAll。

您可以在以下位置找到它们

使用 System.Threading；使用 System.Threading.Tasks；

正如评论指出的那样， List 不是线程安全的。改用 SynchronizedCollection [http://msdn.microsoft.com/en-us/library/ms668265.aspx](http://msdn.microsoft.com/en-us/library/ms668265.aspx)

# c - 什么是消化数据？

> ID：14548657
> 
> 赞同：1
> 
> 时间：2013-01-27T15:01:12.880
> 
> 标签：c, openssl, digest

我正在学习 OpenSSL，我`BIO_f_md()`在 libtrary 文档中找到了这种方法：[http](http://www.openssl.org/docs/crypto/BIO_f_md.html) ://www.openssl.org/docs/crypto/BIO_f_md.html其中说：

`Any data written or read through a digest BIO using BIO_read() and BIO_write() is digested.`

消化是什么意思？什么是消化数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:05:08.577

在[**密码学术语**](http://en.wikipedia.org/wiki/Cryptographic_hash_function)中，摘要只是一个散列值——即密码散列函数的输出。通常，数据本身称为“消息”，数据的哈希值称为“摘要”或“消息摘要”。因此，digested 意味着“散列”。

# watir - 将 wir-webdriver 附加到现有窗口

> ID：14548659
> 
> 赞同：4
> 
> 时间：2013-01-27T15:01:20.340
> 
> 标签：watir, watir-webdriver

是否可以将 watir-webdriver 附加到已打开的浏览器窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:23:20.553

Watir-webdriver 建立在 selenium-webdriver 之上，目前这是一个待定的功能。

请参阅：[http ://code.google.com/p/selenium/issues/detail?id=18&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary](http://code.google.com/p/selenium/issues/detail?id=18&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)

# android - Android：将非原始 ArrayList 类型从一个片段传递到捆绑包中的另一个片段

> ID：14548661
> 
> 赞同：0
> 
> 时间：2013-01-27T15:01:36.453
> 
> 标签：android, android-fragmentactivity

我目前有这个自定义 ArrayList：

```
ArrayList<PlaceDetails> place_list = new ArrayList<PlaceDetails>(); 
```

这将在 onCreateView() 部分填充。

我不确定如何将这个 ArrayList 打包从这个片段类传递到另一个片段类。以下是我的代码片段：

```
public void Map(View view){
    if(hasConnection() == true){
        Bundle b = new Bundle();
        // how should I be passing the ArrayList in this bundle?
        FragmentTransaction ft = getSherlockActivity().getSupportFragmentManager().beginTransaction();
        TOnlineMapViewFragment mapfrag = TOnlineMapViewFragment.newInstance(b);
        ft.replace(R.id.container, mapfrag).addToBackStack(null).commit();

    }
} 
```

所以我创建了包，我想用 newInstance() 方法将它传递给下一个片段。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:17:40.447

考虑在你的类中实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口。然后您就可以将 PlaceDetails 存储在 Bundle 中并将其传递给 setArguments() 方法。

我找到了一个教程：[http](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/) ://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/ 我没有t 测试它，但它看起来不错。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T15:04:30.243

你真的确定真的需要一个捆绑包吗？

```
 TOnlineMapViewFragment mapfrag = TOnlineMapViewFragment.newInstance(b);
 mapfrag.setPlaceList(place_list) 
```

创建应该是微不足道的`setPlaceList(ArrayList<PlaceDetails> place_list)`......

# symfony - 如何在 symfony 2.1 表单中添加条件验证

> ID：14548662
> 
> 赞同：3
> 
> 时间：2013-01-27T15:01:45.010
> 
> 标签：symfony

> **可能重复：**
> [验证依赖于另一个属性的属性 symfony 2](https://stackoverflow.com/questions/12260705/validate-a-property-dependent-on-another-property-symfony-2)

我有一个实体如下：

```
class Items {

    /*
     * @Assert\NotBlank(message="Title cannot be blank")
    */
    private $title;

    /*
     * @Assert\Range(
     *      min = "0.1",
     *      minMessage = "Price should be a positive number",
     *      invalidMessage = "Price should be in number."
     *  )
     */
     private $price;

     private $currency;

} 
```

我正在使用带有表单类 ItemType 的 symfony 2.1 表单。

仅当 $price 有效时，我才想向 $currency 添加验证约束。我怎样才能做到这一点？我想在控制器中以及如果可能的话在表单类中执行此操作，以便对其他人也有帮助

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-01-27T15:07:40.760

我不明白这个问题。我的错。

我认为这就是你要找的东西：[http ://symfony.com/legacy/doc/forms/1_2/en/02-form-validation](http://symfony.com/legacy/doc/forms/1_2/en/02-form-validation)

# android - 使用 Overlays 时如何缓存 android.graphics.path 或 Bitmap？

> ID：14548666
> 
> 赞同：8
> 
> 时间：2013-01-27T15:02:04.197
> 
> 标签：android, google-maps, bitmap, overlay, android-canvas

我正在使用 Overlay 来标记 Google Maps 上的区域，方法是绘制我从任何来源获得的一万个 GeoPoints 的形状。这有效，看起来像这样：

```
 @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow)  {
        super.draw(canvas, mapView, false);

        Projection projection = mapView.getProjection();

        List<Zone> zones = ApplicationContext.getZones();

        path.rewind();

        for (Zone zone : zones) {
            paint.setDither(true);
            paint.setStyle(Style.FILL);
            paint.setAlpha(40);

            MultiPolygon multiPolygon = zone.getMultiPolygon();
            List<Polygon> polygons = multiPolygon.getPolygons();

            for (Polygon polygon : polygons) {
                for (List<Coordinate> coordinates : polygon.getCoordinates())  {
                    for (int i = 0; i < coordinates.size(); i++)  {
                        Point p = new Point();

                        projection.toPixels(new GeoPoint((int)(coordinates.get(i).getLatitude() * 1E6), (int)(coordinates.get(i).getLongitude() * 1E6)), p);

                        if (i == 0)  {
                            path.moveTo(p.x, p.y);
                        }
                        else  {
                            path.lineTo(p.x, p.y);
                        }
                    }
                }
            }
        }

        canvas.drawPath(path, paint);
    } 
```

问题是这非常消耗资源。每次在 MapView 上滚动或移动地图时，都必须一遍又一遍地计算路径，因为像素坐标已经改变。绘制的区域可能变得如此之大，以至于 MapView 上的滚动非常缓慢，以至于无法正常使用。

我的想法是

*   以某种方式缓存路径生成的“形状”，并在 MapView 上的缩放级别更改时重新绘制它。
*   以某种方式在“动态”上绘制绘画 - 位图将其用作叠加层（可能作为 ItemizedOverlay），侦听 MapView 滚动并将位图移动滚动距离。

我不确定是否有更好的方法。

有什么想法可以解决这个问题吗？（我正在使用 Google Maps API 1 并且无法更改）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:09:14.620

在尝试弄清楚如何匹配地图的移动之前，对您当前的代码进行一些优化可能会节省大量资金。特别是，内部循环中的这两行执行次数最多，但执行起来相当昂贵（两次内存分配、浮点乘法和四个方法调用）。

```
Point p = new Point();    
projection.toPixels(new GeoPoint((int)(coordinates.get(i).getLatitude() * 1E6), (int)(coordinates.get(i).getLongitude() * 1E6)), p); 
```

首先，您只需要一个`Point`对象，因此请避免在循环中分配它。将其移至您的下方`path.rewind();`

其次，如果您预先计算坐标`GeoPoints`而不是每次都计算坐标，您将在`draw`例程中节省大量处理。您也可以通过一些工作摆脱这种`if`说法。假设您将您的列表预先`coordinate`转换为列表`GeoPoint`，并使其通过 可用`polygon.getGeoCoordinates()`，您最终可能会得到您的内部循环看起来像 -

```
for (List<GeoPoint> geoCoordinates : polygon.getGeoCoordinates())  {
    projection.toPixels(geoCoordinates.get(0),p);
    path.moveTo(p.x, p.y);  // move to first spot
    final List<GeoPoint> lineToList = geoCoordinates.sublist(1,geoCoordinates.size());  // A list of all the other points
    for(GeoPoint gp : lineToList) {
        projection.toPixels(gp, p);
        path.lineTo(p.x, p.y);
     }
} 
```

这将比你以前做的要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:35:46.280

在最后几天修补之后，我找到了一个可能的解决方案（我认为没有更好的解决方案）不要一遍又一遍地绘制路径，而是将其移动到当前位置。

困难的部分是弄清楚如何缓存绘制的形状而不是一遍又一遍地计算它。这可以通过使用矩阵来完成。使用这个矩阵（我认为这是某种“模板”），您可以操纵路径内的点坐标。第一次（当有人开始移动地图时）我像往常一样绘制该区域。当它尝试第二次或更多次计算时，我不会重新绘制形状，而是通过计算从当前点到最后一点的“增量”来操纵路径。我知道当前点是什么，因为我总是将原始 GeoPoint（始终保持不变）映射到当前投影产生的点。“增量”需要设置为矩阵。之后，我使用这个新矩阵来转换路径。结果真的很快。

这看起来像这样（这不是生产代码，它还不能处理缩放，但它显示了我用作优化基础的原理）：

```
public class DistrictOverlay extends Overlay {

//  private final static String TAG = DistrictOverlay.class.getSimpleName();
    private Paint paint = new Paint();
    private Path path = new Path();
    private boolean alreadyDrawn = false;
    private GeoPoint origGeoPoint;
    Point p = new Point();
    Point lastPoint = new Point();

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, false);

        Projection projection = mapView.getProjection();

        List<Zone> zones = ApplicationContext.getZones();

        if (!alreadyDrawn) {
            path.rewind();

            for (Zone zone : zones) {
                if (!zone.getZoneId().equals(MenuContext.getChosenZoneId())) {
                    continue;
                }

                String dateString = zone.getEffectiveFrom().trim().replace("CEST", "").replace("GMT", "").replace("CET", "").replace("MESZ", "");
                if (DateUtil.isBeforeCurrentDate(dateString)) {
                    paint.setColor(Color.RED);
                } else {
                    paint.setColor(Color.GREEN);
                }

                paint.setDither(true);
                paint.setStyle(Style.FILL);
                paint.setAlpha(40);

                MultiPolygon multiPolygon = zone.getMultiPolygon();
                List<Polygon> polygons = multiPolygon.getPolygons();

                for (Polygon polygon : polygons) {
                    for (List<GeoPoint> geoPoints : polygon.getGeoPoints()) {
                        projection.toPixels(geoPoints.get(0), p);
                        path.moveTo(p.x, p.y);

                        origGeoPoint = new GeoPoint(geoPoints.get(0).getLatitudeE6(), geoPoints.get(0).getLongitudeE6());
                        lastPoint = new Point(p.x, p.y);

                        final List<GeoPoint> pathAsList = geoPoints.subList(1, geoPoints.size());

                        for (GeoPoint geoPoint : pathAsList) {
                            projection.toPixels(geoPoint, p);
                            path.lineTo(p.x, p.y);
                        }
                    }
                }
            }           
        }
        else  {
            projection.toPixels(origGeoPoint, p);       
            Matrix translateMatrix = new Matrix();
            translateMatrix.setTranslate(p.x - lastPoint.x, p.y - lastPoint.y);
            path.transform(translateMatrix);

            lastPoint = new Point(p.x, p.y);
        }

        canvas.drawPath(path, paint);

        if (!path.isEmpty()) {
            alreadyDrawn = true;
        }
    }

    @Override
    public boolean onTap(GeoPoint p, MapView mapView) {
        return true;
    }
} 
```

# azure - 在 Windows 8 和 Windows Phone 8 中使用相同的 Azure MobileService

> ID：14548669
> 
> 赞同：2
> 
> 时间：2013-01-27T15:02:18.747
> 
> 标签：azure, microsoft-metro, windows-phone-8, azure-mobile-services

总之，这就是我想要做的：我有一个 Windows Store 应用程序，它使用 Azure MobileService 来存储数据。[这](http://apps.microsoft.com/windows/app/colors-todo/1cd03a7e-03c1-4625-b021-fb22b3ec999b)是应用程序。身份验证由 Live SDK 的单点登录功能提供。[该应用程序是按照此处](http://www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-windows-8-dotnet/)的说明进行编码的。现在，我想要的只是可以通过 Windows Phone 8 应用程序访问的数据。这是我所做的。这里似乎涉及很多问题。

*   更改了 API 设置以支持[Live Connect Portal](https://manage.dev.live.com/Applications/Index)上的移动客户端身份验证。
*   应用程序机密已泄露。所以，我产生了一个新的秘密。
*   更改了 Azure 移动服务门户中的应用程序密码值以反映新密码。

现在，Windows Store 应用程序停止工作并返回错误消息，`The authentication signature was malformed or signed by a different key.`如果我在 Azure 门户中使用旧的（和丢弃的）应用程序密码，Windows Store 应用程序可以正常工作。

第二个奇怪的事情：我编写了一个主要的 Windows Phone 8 应用程序来使用相同的移动服务。仅当 Azure 门户中存在新的应用程序机密时，此应用程序才有效。使用旧密钥，返回的错误与上述相同：`The authentication signature was malformed or signed by a different key.`

如何使这两个应用程序都工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:29:20.973

我试图重现这一点，但 W8 和 WP8 都适用于我。我从本指南开始：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-windows-8-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-windows-8-dotnet/)

除了第 10 步之外，我做了所有其他事情。我确实检查了“移动客户端应用程序：是”。之后我按照本指南创建 WP8 项目： http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-wp8/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-wp8/)

因此，在您的情况下，您应该将新的 clientid 和 clientsecret 放入 Windows Azure，然后要解决 Windows 8 的问题，您应该重做 Windows 8 教程的第 4 步（Associate App with the Store ....）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T08:46:25.510

如果您想从同一个移动服务实例创建 Windows 应用商店和 Windows Phone 应用程序**并且**都使用 Live Connect 单点登录，您**必须先****注册**Windows 应用商店应用程序。另外，请记住，Windows Store 和 Windows Phone 都以不同的方式实例化 Live 客户端（出于某种原因），我一直忘记这一点。

格伦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:31:40.300

您可能会遇到一些问题，因为在 Windows 8 中，您需要使用 Windows Azure 移动服务 (yourproject.azure-mobile.net) 的 URL 初始化 LiveAuthClient，但在 Windows Phone 8 中，您必须初始化相同的 LiveAuthClient使用 Live Connect 开发人员中心提供的 ClientID。

如果您仍然遇到问题，请向团队发送电子邮件：mobileservices (at) microsoft (dot) com。

# internationalization - 如何跟踪用户选择的语言

> ID：14548675
> 
> 赞同：2
> 
> 时间：2013-01-27T15:03:11.690
> 
> 标签：internationalization

跟踪用户选择的语言的最佳方式是什么？

a) 将语言设置存储在会话变量或 cookie 中

b) 从浏览器发送的 HTTP 标头中读取首选语言（区域设置）

c) 将语言附加到应用程序中每个链接的 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:09:13.193

B&C

首先从浏览器标题中读取首选语言，然后重定向到相应的 URL。

这样同一个 URL 就不会有不同的内容，不会混淆用户和搜索引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:32:53.077

我会向您推荐以下内容：

所有三个选项。

对于新用户，从标头中读取区域设置并将其写入 cookie。如果用户更改了他的首选语言，您只需在 cookie 中更改它并重定向到想要的站点。

如果您只使用 B & C 用户将无法更改他们的首选语言（至少它不会存储在任何地方，因此他们必须在每次访问时更改它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T19:02:57.517

d) 将区域偏好存储到用户配置文件中。

当然，这将需要拥有配置文件和密码的全部负担，但这是 Web 应用程序环境中的最佳选择。

这也意味着您应该根据 HTTP Accept-Language 标头的内容提供登录页面，然后使用用户在配置文件中选择的任何语言。区域首选项页面应默认为 Accept-Language 列表中的第一种支持的语言（如果已经确定，用户可以跳过选择。）

如果您仍然怀疑这是最佳选择，请记住，在区域偏好页面中，您可能会存储大量信息，例如：

*   首选语言（这是您要求的）
*   用户居住的国家
*   首选区域格式（日期、时间和数字等）
*   时区
*   首选书写系统（又名脚本，即西里尔文与拉丁文）
*   测量系统（公制与英制）
*   电子邮件消息的首选编码和格式（文本与 HTML）

其中许多事情根本无法检测到或几乎无法检测到，因为 Web 浏览器不会发送这些信息。并且您可以灵活地添加更多首选项以响应用户的请求（即，某些用户可能更喜欢 24 小时时间格式而不是 12 小时时间格式。）

在这种情况下，您需要跟踪的是用户会话。您可以将这些首选项放在用户会话对象中，以便任何对区域设置敏感的类都可以轻松使用它。

# django - 来自 S3 的 Django 缩略图

> ID：14548678
> 
> 赞同：0
> 
> 时间：2013-01-27T15:03:30.233
> 
> 标签：django, image, amazon-s3, django-templates

关于这个主题有很多问题，但我没有找到任何关于我的问题的确切答案。我正在构建一个 django 应用程序，用户可以在其中存储照片并且它们是私有的。在向他们显示缩略图时，我必须通过从 S3 生成签名 url 来显示缩略图。但这需要相当长的时间。我想知道有没有更好的选择，我错过了。？？？

Sorl-Thumbnail 也有同样的问题。我看过它并没有找到更好的选择。有没有其他选项可以看到图像的来源？这也可能奏效。请尽快帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:29:39.107

It's not entirely clear what you are asking, but sounds like you have some slowness because you are generating thumbnails on the fly. If that's the case, you could improve performance pre-generating the thumbnails-- generate them when you store the image instead of when you request them.

I don't see much room for improvement if you are concerned with the performance of signed requests because your images are private in S3, without changing your application design. In some cases, it's acceptable to use hard-to-guess URLs for private photos. For example, I believe Flickr does that.

# ruby - 如何验证 facebook 命令行应用程序（Ruby）

> ID：14548679
> 
> 赞同：0
> 
> 时间：2013-01-27T15:03:30.390
> 
> 标签：ruby, facebook, facebook-graph-api, command-line, gem

我正在尝试构建一个简单的 ruby​​ 命令行 facebook 客户端，它将在屏幕上显示所有用户的朋友（fb_friends.rb），我正在使用 fb_graph ruby​​ gem：[https ://github.com/nov/fb_graph](https://github.com/nov/fb_graph)

问题是，方法 user.friends 需要让用户首先验证应用程序。

我在这里读过一个类似的问题：[Ruby Command line application to update Facebook Status](https://stackoverflow.com/questions/10207987/ruby-command-line-application-to-update-facebook-status)

据我了解，您无法在命令行中对用户进行身份验证。我的问题是：有没有其他方法来验证用户？

我在想什么：在身份验证时，用户系统的默认网络浏览器将弹出，然后用户将授予访问权限并进行身份验证，现在浏览器窗口将关闭，用户将返回命令行应用程序，他可以见他的朋友名单。

那可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:40:41.750

在不共享服务器端身份验证令牌的情况下，Open Graph 应用程序目前无法实现这一点。Facebook 要求您保持对应用程序身份验证令牌的控制（而不是共享）。如果用户滥用命令行应用程序，并使用您的应用程序 ID 和令牌向服务器发出大量请求，那么您将是其中的一个。

实现目标的最佳方式是在命令行应用程序和 Facebook 图形 api 之间使用受您控制的服务器。命令行 api 可以将用户引导到您的网站，他们将在该网站上点击“Facebook Connect”按钮。用户将通过您的服务器对应用程序进行身份验证，您可以向他们提供一个令牌，他们可以与他们的用户 ID 配对以发布状态更新或通过您的服务器检索朋友。

命令行 api 将与您的服务器交互，而您的服务器与 Facebook Graph API 交互。

这种方法的一个强大的附带好处是，如果 Facebook 的 API 发生变化，您的客户端不会中断（无需更改您自己的服务器的 API）。

# ruby-on-rails - 如何有效地检查活动记录对象是否具有关联？

> ID：14548684
> 
> 赞同：0
> 
> 时间：2013-01-27T15:03:46.643
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个包含数万条快照记录的应用程序。这些“快照”中的极少数（例如 1000 个中的 1 个）将通过 :has_many 关联具有一个或多个“位置”。

如何在不为每个快照触发活动记录查询的情况下有效地发现快照是否有位置？我目前的解决方案是在快照中添加一个布尔字段——如果快照有位置，'has_position' 设置为 true。这似乎有点混乱，因为这意味着我每次创建职位时都必须修改关联的快照。有没有更干净的方法来处理这种情况？

```
create_table "snapshots", :force => true do |t|
  t.datetime "created_at",                       
  t.datetime "updated_at",    
  t.boolean  "has_position",   
end

create_table "positions", :force => true do |t|
  t.integer  "snapshot_id"
  t.datetime "created_at",  
  t.datetime "updated_at",  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:15:06.060

如果您`positions`使用对 的引用生成迁移会发生什么`snapshots`，迁移文件将使用

```
add_index :positions, :snapshot_id 
```

附加到它的末尾。

使用数据库上的索引`snapshot_id`将进行 log(n) 查询来确定一个位置是否至少有一个关联记录。不如使用布尔值的恒定时间好，但只有数万条记录，它不应该花费明显更长的时间（除非你非常非常频繁地这样做）。

此外，在没有索引的情况下，一个简单的`has_position`布尔值可能比您想象的更难维护。您可以将其设置为`true`创建关联位置，但不能将其设置`false`为删除，因为可能存在另一个位置，并且您必须再次进行表扫描。

如果由于某种原因不希望使用索引（或者您确实需要恒定时间查找），那么我建议使用`:counter_cache`列。

# templates - 如果存在特定块，则在 Drupal 7 中隐藏页面标题

> ID：14548686
> 
> 赞同：0
> 
> 时间：2013-01-27T15:03:54.877
> 
> 标签：templates, drupal, views, drupal-blocks

我在某些节点上有一个 Views 3 块，除其他外，它在块中呈现节点标题。

因此，如果该块存在于节点上，我需要以某种方式不呈现标准节点标题以避免重复。任何人都知道我将如何实现这一目标？假设它需要进入预处理或page.tpl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:22:16.977

一种方法是在视图的页眉或页脚中编写 PHP 代码并调用此 api

```
drupal_set_title (''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:50:19.307

它可以在视图界面中完成。转到：结构/视图/视图/视图名称/编辑

在格式下，选择显示字段，然后选择要显示的字段。在上面的示例中，我选择了标题和发布日期。

或者，您可以调整内容类型的预告片、默认或自定义显示，并在视图界面“Show:Teaser”中选择这些显示类型，例如只需转到结构/类型/管理/content_type_name/display 并微调您想要的显示查看。

就个人而言，我更喜欢通过视图显示特定字段。

# java - JPQL 用于生成直方图

> ID：14548691
> 
> 赞同：1
> 
> 时间：2013-01-27T15:04:40.410
> 
> 标签：java, hibernate, jpa, jpql

我正在尝试形成一个查询以生成以下直方图。

假设实体动物，具有无限数量的标签。

```
dog.features = [blue, big, fury, nice]
cat.features = [white, big, fury, ugly]
bear.features = [white, big, fury, ugly]
other_bear.features = [white, big, fury, ugly] 
```

想象一下，我想要生成 cat 和其他类似特征的计数直方图。

首先，我们需要计算所有有猫的夫妻的相似特征

```
 similar_features(cat, dog) = 2
 similar_features(cat, bear) = 4
 similar_features(cat, other_bear) = 4 
```

那么，相似特征的直方图将是：

```
|0| = 0
|1| = 0
|2| = 1
|3| = 0
|4| = 2 
```

我想用 JPQL 来实现这一点 - 我是这样开始的：

```
 SELECT COUNT(DISTINCT feature1) cnt, COUNT(COUNT(DISTINCT feature1)) 
 FROM Animal a1, Animal a2 
 JOIN a1.features feature1 JOIN a2.features feature2 
 WHERE feature1 = feature2 AND i2.id = ?1 
 GROUP BY a1, cnt 
```

这显然是错误的，但它显示了我想要实现的目标。JPQL 甚至可以做到这一点吗？

# java - ArrayAdapter 的空指针异常

> ID：14548697
> 
> 赞同：0
> 
> 时间：2013-01-27T15:05:34.940
> 
> 标签：java, android

我确实有一个应用程序，它从 sdCard 加载声音并在 AlertDialog 中显示为`list`. 它加载和播放听起来很完美。现在，我想限制加载到`list`. 所以，这里有一个任务：

> 我在 sdCard 的文件夹中确实有 N 个声音。我确实有一个列表，根据条件我想显示 A 数量的声音。条件是：如果条件1>6 和条件2<40 则为假并在列表中显示6 个声音，否则如果条件为真，则在列表中显示所有声音。

这是我在代码中实现它的方式，但它给了我`NullPointerException`.

```
ins_mp3List = ins_Dir.listFiles(new Mp3Filter()); //list of all sounds in directory(N)

 user_instruments = new String[ins_mp3List.length]; //will be used in a system internally
 user_instruments_toShow =new String[ins_mp3List.length]; //will be shown in the list
 soundsQ_check=Integer.valueOf(custom_sounds.getString("RAW_1_1", ""));// the value is 0, it is checked
//Condition
 if (ins_mp3List.length>6 && soundsQ_check<40){ 
             user_instruments_block=true;
             for (int i=0; i<= 5; i++) {
              String [] seperated = ins_mp3List[i].toString().split(directory);
              user_instruments[i]=ins_mp3List[i].toString();
              user_instruments_toShow[i] = seperated[1];    
              Log.v("Instruments","true");
             }

         }else{
             for (int i=0; i< ins_mp3List.length; i++) {

              user_instruments_block=false;
              String [] seperated = ins_mp3List[i].toString().split(directory);
              user_instruments[i]=ins_mp3List[i].toString();
              user_instruments_toShow[i] = seperated[1];            
            Log.v("Instruments", user_instruments[i]);
               } 
```

在 sdCard 文件夹中有 8 个文件。`soundQ_check=0`.

LogCat 给出错误：

```
01-27 19:52:11.652: E/AndroidRuntime(2667): FATAL EXCEPTION: main
01-27 19:52:11.652: E/AndroidRuntime(2667): java.lang.NullPointerException
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.AbsListView.obtainView(AbsListView.java:2019)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.ListView.onMeasure(ListView.java:1155)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:676)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:557)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:676)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:557)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2111)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.View.measure(View.java:12881)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.os.Looper.loop(Looper.java:137)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at java.lang.reflect.Method.invokeNative(Native Method)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at java.lang.reflect.Method.invoke(Method.java:511)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-27 19:52:11.652: E/AndroidRuntime(2667):     at dalvik.system.NativeStart.main(Native Method) 
```

我认为某个地方的情况是错误的......任何帮助将不胜感激。如果声音的数量小于 6，它可以正常工作，但如果大于 6，它会给出 nullPointerException ...

UPD LAST：我找到了解决方案。我不应该把

```
 user_instruments = new String[ins_mp3List.length]; //will be used in a system internally
 user_instruments_toShow =new String[ins_mp3List.length]; //will 
```

条件之外。这些线路应该在条件下运行。由于长度不同，它给了我错误。实际长度是 8，我只初始化了其中的 6 个。如果将这两个字符串都置于条件下，它将起作用。感谢您的评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:26:18.947

你是说如果它小于 6，它就可以正常工作。这是因为你在你的条件下使用了 && 运算符，如果第一个条件变为假，它不会检查第二个条件，因此不能访问。`soundQ_check`我认为这条线是影响你的变量：

```
 soundsQ_check=Integer.valueOf(custom_sounds.getString("RAW_1_1", "")); 
```

您可以通过在此行之后打印此变量的值来调试它。

# ios - 旋转取消按钮后TableViewController UISearchBar不可点击

> ID：14548699
> 
> 赞同：0
> 
> 时间：2013-01-27T15:05:52.727
> 
> 标签：ios, ios6, rotation, uisearchbar

我有一个 TableVieController ，其 searchBar 位于*self.tableView.tableHeaderView*。当屏幕旋转时，我只是将框架设置为新的 CGRect。视图看起来不错，但不幸的是一半的搜索栏不可点击，取消按钮也不可点击。

那么我该如何进行这项工作呢？我只能通过创建搜索栏的新实例并分配它来做到这一点，但这不是正确的方法，对吧？

```
const CGRect CGRECT_TABLE_VIEW_PORTRAIT = { { 0.0f, 0.0f }, { 320.0f, 365.0f } };
const CGRect CGRECT_TABLE_VIEW_LANDSCAPE = { { 0.0f, 0.0f }, { 480.0f, 150.0f } };

- (void)viewDidLoad
{
... 
        // create search bar
        searchBar = [[UISearchBar alloc] initWithFrame:self.tableView.bounds];
        [searchBar setTintColor:RGB(168, 212, 255)] ;    
        searchBar.showsCancelButton = YES;
        [searchBar sizeToFit]; // Get the default height for a search bar.
        searchBar.delegate = self;

        self.tableView.tableHeaderView = searchBar;
        self.tableView.frame = CGRECT_TABLE_VIEW_PORTRAIT;
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)
interfaceOrientation duration:(NSTimeInterval)duration {

        if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) {
              tableView.frame = CGRECT_TABLE_VIEW_LANDSCAPE;
        } else {
              tableView.frame = CGRECT_TABLE_VIEW_LANDSCAPE;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:14:42.590

我不知道你为什么要尝试处理旋转，这应该自动发生。这段代码提供了一个搜索栏，可以在旋转时自行调整：

```
- (void)viewDidLoad {
    UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:self.tableView.bounds];
    [searchBar setTintColor:[UIColor colorWithRed:168/255 green:212/255 blue:1 alpha:1]];
    searchBar.showsCancelButton = YES;
    [searchBar sizeToFit]; // Get the default height for a search bar.
    searchBar.delegate = self;
    self.tableView.tableHeaderView = searchBar;
} 
```

# c# - 如何使 UpdateTargetId 在 Ajax.ActionLink 中工作？

> ID：14548701
> 
> 赞同：1
> 
> 时间：2013-01-27T15:05:55.780
> 
> 标签：c#, ajax, jquery

我在控制器中有这个方法

```
[HttpDelete]
public void DeleteDocument(int id)
{
   //Here I do the deletion in the db
} 
```

在视图中我有这个，调用一个返回部分视图的方法

```
@{ Html.RenderAction("GetDocumentsByMember"); } 
```

GetDocumentsByMember 方法

```
 public ActionResult GetDocumentsByMember()
    {
        var companyGuid = HttpContextHelper.GetUserCompanyGuid();

        var documents = _service.GetUploadedDocumentsByMember(companyGuid);

        return PartialView(documents);
    } 
```

和局部视图

```
@model IEnumerable<GradientCapital.DomainModel.Entity.Document.Document>
<div id="uploadeddocuments">
    @*Here there's a table and at one of the columns there's the next link*@

    <td id="delete">
        @Ajax.ActionLink("Delete", "DeleteDocument", new { id = document.Id },
        new AjaxOptions
            {
               Confirm = "Are you sure you want to delete?",
               HttpMethod = "DELETE",
               OnComplete = "deleteComplete"
            })
    </td>
</div> 
```

而 deleteComplete 只是刷新所有内容

```
<script type="text/javascript">
    function deleteComplete() {
        window.location.reload();
    }
</script> 
```

对于一个简单的问题，代码很长（格式是否正确？），我不能让 ajaxoption UpdateTargetId 在这里工作，而不必调用这个 deleteComplete 函数。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:15:30.197

`GetDocumentsByMember`您可以使用 AJAX 调用操作并仅更新实际更改的 DOM 部分，而不是重新加载整个页面：

```
<script type="text/javascript">
    function deleteComplete() {
        $.ajax({
            url: '@Url.Action("GetDocumentsByMember")',
            type: 'GET',
            cache: false,
            success: function(result) {
                $('#uploadeddocuments').html(result);
            }
        });
    }
</script> 
```

Also you'd better use `OnSuccess = "deleteSuccess"` instead of `OnComplete = "deleteComplete"` because you should update only if the Delete call actually succeeded. Don't forget that the `OnComplete` callback is always invoked, no matter whether the AJAX call succeeded or not.

# c++ - 为什么不 tolower 将我的大写字符转换为小写？

> ID：14548703
> 
> 赞同：1
> 
> 时间：2013-01-27T15:06:23.397
> 
> 标签：c++, debugging, function, pointers

> **可能重复：**
> [tolower() 不工作](https://stackoverflow.com/questions/12145463/tolower-not-working)

这是我的代码：

```
char *ptr=&twod[j][i];

                 while (*ptr != '\0')
    {
        tolower(*ptr);

        cout<<endl
            <<endl
            <<endl
            <<*ptr;

        ptr++;

    } 
```

当我计算上述内容时，大写字母仍保持为大写。有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T15:07:42.287

你需要这样做：

```
*ptr = tolower(*ptr); 
```

[`std::tolower`](http://en.cppreference.com/w/cpp/string/byte/tolower) *返回*小写。它不**接受**引用参数*，*因此它*不能*修改`*ptr`你传递给它的参数。

阅读[文档以`std::tolower`](http://en.cppreference.com/w/cpp/string/byte/tolower)获取详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:07:47.830

`tolower`不修改值，它返回一个新值。

尝试这个：

```
*ptr = tolower(*ptr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T15:07:54.440

`tolower`不会改变它的论点。设置变量或打印出操作：

```
*ptr = tolower(*ptr);
std::cout << *ptr;
// or
std::cout << tolower(*ptr); 
```

# android - Android：如何重置和下载 A-GPS 数据？

> ID：14548707
> 
> 赞同：8
> 
> 时间：2013-01-27T15:06:41.950
> 
> 标签：android, gps

如何以编程方式在 Android 应用程序中重置和下载新的 A-GPS 数据？换句话说，“管理 A-GPS 状态”工具如何在[GPS 状态和工具箱](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2)应用程序中工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T17:23:15.887

您应该可以使用`LocationManager.sendExtraCommand(String provider, String command, Bundle extras)`. 这将允许您删除全部或部分 GPS 数据，以便重新下载。文档在[这里，但是从](http://developer.android.com/reference/android/location/LocationManager.html#sendExtraCommand%28java.lang.String,%20java.lang.String,%20android.os.Bundle%29)[这个代码](http://gitorious.org/android-eeepc/base/blobs/fd9f42a6967370490cd2c66e628ccbf2eacc4a4b/location/java/com/android/internal/location/GpsLocationProvider.java#line485)（对于 GPS 提供者）引用的参数的快速纲要：

对于`provider`，使用`LocationManager.GPS_PROVIDER`。

对于`command`, 使用`"delete_aiding_data"`

对于额外内容，如果您通过`null`，它将删除所有数据。如果您只想删除特定数据（例如仅年历或位置），您可以使用[此函数](http://gitorious.org/android-eeepc/base/blobs/fd9f42a6967370490cd2c66e628ccbf2eacc4a4b/location/java/com/android/internal/location/GpsLocationProvider.java#line495)中的标志作为捆绑包中的附加功能。

不要忘记在清单中添加`android.permission.ACCESS_LOCATION_EXTRA_COMMANDS`到您的权限列表！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T10:28:56.940

到目前为止，我的问题的最佳答案似乎是@Geobits 的响应和在[SendExtraCommand 和 force_xtra_injection 的问题中](https://stackoverflow.com/questions/4961514/problems-with-sendextracommand-and-force-xtra-injection)讨论的 XTRA 注入代码的组合。基于此，我目前正在使用以下内容：

```
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
locationManager.sendExtraCommand(LocationManager.GPS_PROVIDER,"delete_aiding_data", null);
Bundle bundle = new Bundle();
locationManager.sendExtraCommand("gps", "force_xtra_injection", bundle);
locationManager.sendExtraCommand("gps", "force_time_injection", bundle); 
```

如果有人对如何改进这一点有其他想法，或者如何确定清除和下载新 GPS 数据的最佳时间，我会很感兴趣。

# sqlite - JavaScript - 将变量从一个函数传递到另一个函数是未定义的

> ID：14548714
> 
> 赞同：0
> 
> 时间：2013-01-27T15:07:15.200
> 
> 标签：sqlite, function, cordova, global-variables

在我的示例中，我试图将变量（**var** ***ttoken***）从一个函数传递到另一个函数并将其保存到 SQLite。编码环境是Phonegap（适用于android）。这是程序：

```
var ttoken;    // global var declaration
function handleLogin() {
var form = $("#loginForm");
var u = $("#username", form).val();
var p = $("#password", form).val();
if(u!= '' && p!= '') {
    $.post("http://localhost/login.php", {username:u, password:p}, function(data){
        if(data!='') {
            $.mobile.changePage("change_page.html");
            ttoken = data.token;
        } else {
            navigator.notification.alert("Error try again", function() {});
        }
    }, "json");
} else {
    navigator.notification.alert("Error, fields are emty", function() {});
}
return {tkn:ttoken};    // putting into array
openDB();
populateDB();
}

var db;
function openDB(){  // create database
    // 'Kurskoffer_DB' vol. 300 Kb
    db = window.openDatabase("Sample_DB", "1.0", "Samole DB", 300000);
    db.transaction(populateDB, errorCB, successCB);
}

function populateDB(tx){    // create 'settings' table
    var tooken = handleLogin();    // accessing the variable ttoken
    tx.executeSql('CREATE TABLE IF NOT EXISTS settings (id INTEGER PRIMARY KEY, token TEXT NOT NULL, sound TEXT NOT NULL, vibra TEXT NOT NULL)');
    tx.executeSql('INSERT INTO settings(id, token, sound, vibra) VALUES (1, "'+tooken.tkn+'", "on", "on")');
} 
```

似乎根据变量传递规则的一切都可以，但是字段标记表中的插入结果是**undefined**。有谁知道为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:14:36.653

该`$.post`函数是异步的，这意味着`handleLogin`将在`post`回调触发之前返回，并且`ttoken`在返回的对象中保持未定义。

设置`handleLogin`为接受回调，该回调将在`post`已返回并`ttoken`已填充时触发。

就像是：

```
function handleLogin(callback) {
    var form = $("#loginForm");
    var u = $("#username", form).val();
    var p = $("#password", form).val();
    if(u!= '' && p!= '') {
        $.post("http://localhost/login.php", {username:u, password:p}, function(data){
            if(data!='') {
                $.mobile.changePage("change_page.html");
                ttoken = data.token;
                if (callback) callback();
            } else {
                navigator.notification.alert("Error try again", function() {});
            }
        }, "json");
    } else {
        navigator.notification.alert("Error, fields are emty", function() {});
    }
}

function populateDB(tx){    // create 'settings' table
    handleLogin(function() {
        tx.executeSql('CREATE TABLE IF NOT EXISTS settings (id INTEGER PRIMARY KEY, token TEXT NOT NULL, sound TEXT NOT NULL, vibra TEXT NOT NULL)');
        tx.executeSql('INSERT INTO settings(id, token, sound, vibra) VALUES (1, "'+ttoken+'", "on", "on")');
    });
} 
```

由于`ttoken`是全局定义的，因此您不必担心将其作为参数传递。

# c++ - 如何删除指向泛型类型对象的指针数组

> ID：14548721
> 
> 赞同：0
> 
> 时间：2013-01-27T15:07:48.560
> 
> 标签：c++

我的班级有一个通用的指针数组，名为`A`：

```
T** A 
```

目前，我通过以下方式删除析构函数中的数组：

```
~MyQuickInitArray(){
    delete [] A;
}; 
```

这会导致内存泄漏吗？如果是这样，我应该遍历数组并调用`delete`每个对象吗？

`delete [] B`附带说明 -如果`B`是整数数组或析构函数是否已经处理它，我是否需要调用？

**编辑：**

这是分配发生的方式：

```
MyQuickInitArray(int size)
{
    if(size <= 0)
    {
        throw new std::exception;
    }

    _size = size;
    _counter = 0;
    A = new T*[size];
    B = new int[size];
    C = new int[size];
}
    MyQuickInitArray(const MyQuickInitArray& myQuickInitArray)
    {
        _size = myQuickInitArray._size;
        _counter = myQuickInitArray._counter;
        A = new T*[_size];

        for(int i = 0; i<_size ;i++)
        {
            if(myQuickInitArray.A[i] != NULL)
            {
                A[i] = new T(*myQuickInitArray.A[i]);
            }
        }

        B = myQuickInitArray.B;
        C = myQuickInitArray.C;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:15:13.600

> 这会导致内存泄漏吗？

`A`如果是指针数组，您肯定可以指望它。您需要遍历数组并自己删除指针。

```
~MyQuickInitArray {
    for (int i =_size; i--;) {
        delete A[i];
    }
    delete [] A;
} 
```

> 我需要调用`delete [] B`if`B`是一个整数数组还是析构函数处理它？

是的，总是删除分配给`new`. 您可以在类的析构函数中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:14:32.060

> 这会导致内存泄漏吗？

是的，`delete[]`在不删除单个元素指向的项目的情况下调用指针数组将导致内存泄漏，因为 C++ 的“内置”指针没有所有权语义。考虑使用“智能”指针，例如，`unique_ptr<T>`而不是“普通”指针，以避免在循环中调用析构函数。

> 如果 B 是整数数组，我是否需要调用 delete [] B

无论数组的元素类型如何，您都需要调用`delete[]`您分配的所有内容。`new[]`

# iphone - 寻找具有透明背景的旋转图像的边界框

> ID：14548724
> 
> 赞同：0
> 
> 时间：2013-01-27T15:08:04.007
> 
> 标签：iphone, ios, cocoa-touch, uiimage, core-graphics

我有一个`UIImage`具有透明背景的。旋转此图像时，我想找到图形周围的边界框（即非透明部分，如果将​​其旋转 a `UIImageView`，它将找到整个`UIImage`包括透明部分的边界框）。

是否有可以为我执行此操作的 Apple 库？如果没有，有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:38:54.577

如果我正确理解了您的问题，您可以检索 uiimageview 的框架（而不是边界），然后获取各个 cgpoints 并显式转换这些点以获得转换后的矩形。因为在 Apple 的文档中它说： *您可以通过调用函数 CGRectApplyAffineTransform 对 CGRect 结构进行操作。此函数返回包含传递给它的矩形的转换角点的最小矩形。*逐个转换点应避免这种自动更正行为。

```
CGRect originalFrame = UIImageView.frame;
CGPoint p1 = originalFrame.origin;
CGPoint p2 = p1; p2.x += originalFrame.width;
CGPoint p3 = p1; p3.y += originalFrame.height;

//Use the same transformation that you applied to uiimageview here
CGPoint transformedP1 = CGPointApplyAffineTransform(p1, transform);
CGPoint transformedP2 = CGPointApplyAffineTransform(p2, transform);
CGPoint transformedP3 = CGPointApplyAffineTransform(p3, transform); 
```

现在您应该能够从这 3 个点定义一个新矩形（第 4 个是可选的，因为可以从 3 个点计算宽度和高度。需要注意的一点是，您不能将这个新矩形存储在 cgrect 中，因为 cgrect 由一个原点和一个大小，所以它的边缘总是平行于 x 和 y 轴。苹果的 cgrect 定义不允许存储旋转的矩形。

# asp.net-mvc - 在同一页面上创建新的父级和子级

> ID：14548727
> 
> 赞同：13
> 
> 时间：2013-01-27T15:08:35.150
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5, master-detail

我的 MVC 应用程序具有经典的父子（主从）关系。

我想要一个页面，在同一页面上创建新的父级和子级。我添加了一个返回部分视图并将子 HTML 添加到父视图的操作，但我不知道如何将操作中新创建的子级关联到原始父级（换句话说，我如何添加新的子实体到父实体中这些实体的集合）。

我想当我提交表单时，该操作应该在其集合中获取包含新创建子项的父实体。

所以简而言之，创建子实体的操作代码应该是什么，以及如何将子实体添加到其父集合中？

我在这里（和其他网站）阅读了很多帖子，但找不到示例。

该应用程序使用 MVC 4 和 Entity Framework 5。

代码示例（我删除了一些代码以保持简单）。该模型是 Form（父）和 FormField（子）实体。

```
public partial class Form
{ 
    public int ID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<FormField> FormFields { get; set; }
}

public partial class FormField
{
    public int ID { get; set; }
    public string Name { get; set; }
    public int FormID { get; set; }
} 
```

以下部分视图 (_CreateFormField.cshtml) 创建新的 FormField（子）。

```
@model FormField

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>FormField</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FormID)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FormID)
        @Html.ValidationMessageFor(model => model.FormID)
    </div>

</fieldset>
} 
```

以下视图 (Create.cshtml) 是创建表单的视图。

```
@model Form

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Form</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

<div>
        @Html.ActionLink(
                "Add Field",
                "CreateFormField", 
                new { id = -1},
                new { @class = "form-field" })
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<div id="CreateFormField"></div>

@section Scripts {
<script>
    $(function () {
        $('.form-field').on('click', function (e) {

            $.get($(this).prop('href'), function (response) {
                $('#CreateFormField').append(response)
            });

            e.preventDefault();
        });
    });
</script>

@Scripts.Render("~/bundles/jqueryval")

} 
```

以下操作处理 FormController 中的创建。

```
[HttpPost]
public ActionResult Create(Form form)
{
    if (ModelState.IsValid)
    {
        db.Forms.Add(form);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(form);
}

public ActionResult CreateFormField(string id = null)
{
    // I guess something is missing here.

    return PartialView("_CreateFormField", new FormField());
} 
```

提前致谢，

沙龙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T12:41:21.270

您可以在父 cshtml 页面中使用 @Html.RenderPartial(_CreateFormField.cshtml) htlper 方法。

有关模式信息， http: [//msdn.microsoft.com/en-us/library/dd492962 (v=vs.118).aspx](http://msdn.microsoft.com/en-us/library/dd492962(v=vs.118).aspx)

我提供了一个伪代码示例，

```
@Foreach(childModel in model.FormFields)
{
    @Html.RenderPartial("childView.cshtml","Name", childModel)
} 
```

请以正确的 c# 语法方式尝试它，您将获得为每个集合项呈现的部分视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T12:42:24.970

我认为对你来说最好和最简单的方法是你有一个创建视图，`Form`并在它的底部放置一个`fieldset`分配`FormFields`给它。

对于字段集，您应该有两个局部视图：一个用于创建，另一个用于编辑。创建的局部视图应该是这样的：

```
@model myPrj.Models.Form_FormFieldInfo

@{ 
    var index = Guid.NewGuid().ToString(); 
    string ln = (string)ViewBag.ListName;
    string hn = ln + ".Index";
}

<tr>
    <td>        
        <input type="hidden" name="@hn" value="@index" />
        @Html.LabelFor(model => model.FormFieldID)
    </td>
    <td>
        @Html.DropDownList(ln + "[" + index + "].FormFieldID", 
            new SelectList(new myPrj.Models.DbContext().FormFields, "ID", "FieldName"))
    </td>        
    <td>
        <input type="button" onclick="$(this).parent().parent().remove();" 
            value="Remove" />
    </td>
</tr> 
```

通过 ajaxly 在 create place view 中调用这个局部视图，您可以为每个标签呈现一些元素。每行元素都包含一个标签、一个包含标签的 DropDownList 和一个删除按钮，用于简单地删除创建的元素。

在创建地点视图中，您有一个裸表，其中包含您通过部分视图创建的那些元素：

```
<fieldset>
     <legend>Form and FormFields</legend>
     @Html.ValidationMessageFor(model => model.FormFields)</label>
     <table id="tblFields"></table>                                        
     <input type="button" id="btnAddTag" value="Add new Field"/>
     <img id="imgSpinnerl" src="~/Images/indicator-blue.gif" style="display:none;" />
</fieldset> 
```

并且您有以下脚本来为每个标签创建一行元素：

```
$(document).ready(function () {
    $("#btnAddField").click(function () {
        $.ajax({
            url: "/Controller/GetFormFieldRow/FormFields",
            type: 'GET', dataType: 'json',
            success: function (data, textStatus, jqXHR) {
                $("#tblFields").append(jqXHR.responseText);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                $("#tblFields").append(jqXHR.responseText);
            },
            beforeSend: function () { $("#imgSpinnerl").show(); },
            complete: function () { $("#imgSpinnerl").hide(); }
        });
    });
}); 
```

动作方法`GetFormFieldRow`如下：

```
public PartialViewResult GetFormFieldRow(string id = "")
    {            
        ViewBag.ListName = id;
        return PartialView("_FormFieldPartial");
    } 
```

并且您已完成创建...您问题的整个解决方案有许多用于视图、部分视图、控制器、ajax 调用和模型绑定的代码。我试图向您展示方式，因为我真的无法在此答案中发布所有这些。

[这](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/)是完整的信息和操作方法。

希望这个答案对您有用并为您指明方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T17:22:21.970

问题是您的局部视图需要使用：

```
@model Form //Instead of FormField 
```

然后在局部视图内部，您必须使用模型 => 模型。**表单**域 .x

```
<div class="editor-label">
    @Html.LabelFor(model => model.FormField.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.FormField.Name)
    @Html.ValidationMessageFor(model => model.FormField.Name)
</div> 
```

这仅适用于一对一的关系（或者我在这个线程中读到：[这里](https://stackoverflow.com/questions/16447616/mvc-4-add-update-list-in-a-partial-view)）。部分视图中是否有 @Html.Form 也没关系。

进行这些更改后，我可以毫无问题地将所有发布的数据返回到控制器。

**编辑：**我遇到了这个问题，因为任何人都会很快发现。

更好的方法（我已经看到）是使用 EditorTemplate。这样编辑器就保持独立于父级，您可以在任何页面上添加*表单*，而不仅仅是在其中添加 FormField 的页面。

然后你会替换

```
@Html.Partial("view") 
```

和

```
@Html.EditorFor() 
```

基本上，我发现在进行编辑时使用 @Html.EditorFor 而不是局部视图要好得多（它称为视图 - 不是编辑器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T16:49:58.517

如果您想使用基于网格的布局，您可能想尝试[Kendo UI 网格](http://demos.telerik.com/kendo-ui/grid/detailtemplate)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T11:38:24.973

使用 jQuery 在单击按钮时添加 FormField。

类似的我使用它如下

```
 <div class="accomp-multi-field-wrapper">
 <table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>FormId</th>
            <th>Remove</th>
           </tr>
     </thead>
<tbody class="accomp-multi-fields">
 <tr class="multi-field">
        <td> <input name="FormFields[0].Name" type="text" value=""></td>
        <td> <input name="FormFields[0].FormId" type="text" value=""></td>
        <td> <button type="button" class="remove-field">X</button></td>
     </tr> 

</tbody>
<tr>
    <th><button type="button" class="add-field btn btn-xs btn-primary addclr"><i class="fa fa-plus"></i> Add field</button> </th>
</tr>
</table>
</div> 
```

和jQuery如下添加字段和删除

```
 <script>
 $('.accomp-multi-field-wrapper').each(function () {
          var $wrapper = $('.accomp-multi-fields', this);
          $(".add-field", $(this)).click(function (e) {
          var $len = $('.multi-field', $wrapper).length;
          $('.multi-field:first-child', $wrapper).clone(false, true).appendTo($wrapper).find('select,input,span').val('').each(function () {
          $(this).attr('name', $(this).attr('name').replace('\[0\]', '\[' + $len + '\]'));
    });

$(document).on("click",'.multi-field .remove-field', function () {
            if ($('.multi-field', $wrapper).length > 1) {
                $(this).closest('tr').remove();
                //
                $('.multi-field', $wrapper).each(function (indx) {
                    $(this).find('input,select,span').each(function () {
                      $(this).attr('name', $(this).attr('name').replace(/\d+/g, indx));

                    })
                })
            }
        });
    </script> 
```

希望这会对你有所帮助。

# jquery-ui - 如何恢复已删除的 ui.item？

> ID：14548733
> 
> 赞同：1
> 
> 时间：2013-01-27T15:09:40.220
> 
> 标签：jquery-ui, jquery-ui-sortable

我的元素样式取决于元素顺序。由于 jQuery UI 在拖动助手时保持原始项目隐藏，隐藏的元素会破坏样式。我可以`ui.item`在开始拖动事件时删除。但是，删除后如何恢复元素？

[http://jsfiddle.net/MnSRd/8/](http://jsfiddle.net/MnSRd/8/)

**HTML**

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

**CSS**

```
ul { height: 50px; }
li { float: left; width: 50px; height: inherit; background: #ccc; margin: 0 10px 0 0; }
li.placeholder { background: #f00; }
li:nth-child(1):before { content: '1'; }
li:nth-child(2):before { content: '2'; }
li:nth-child(3):before { content: '3'; }
li:nth-child(4):before { content: '4'; }
li:nth-child(5):before { content: '5'; } 
```

**JavaScript**

```
$('ul').sortable({
    helper: 'clone',
    placeholder: 'placeholder',
    start: function (e, ui) {
        console.log(ui.item.remove()); // temporary remove
    },
    beforeStop: function (e, ui) {
        // how to bring the item back?
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:25:21.690

您可以先`hide()`输入该项目，然后`show()`再输入。`remove()`将其从 DOM 中完全删除，因此您无法恢复它，除非您`clone()`将其附加回来或仅使用 jQuery[更新小提琴。](http://jsfiddle.net/MnSRd/10/)[`detach()`](http://api.jquery.com/detach/)

```
$('ul').sortable({
    helper: 'clone',
    placeholder: 'placeholder',
    start: function (e, ui) {
        ui.item.hide(); // temporary remove
    },
    beforeStop: function (e, ui) {
        ui.item.show();
    }
}); 
```

阅读评论后，我相信您想要从 sortable 中使用`helper: 'original'`默认帮助程序而不是`helper: 'clone'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:56:25.663

虽然这可能不是每个人的答案，但它可能会解决任何类似的问题。

```
$('ul').sortable({
    helper: 'clone',
    placeholder: 'placeholder',
    start: function (e, ui) {
        ui.item.appendTo(ui.item.parent());
    }
}); 
```

[http://jsfiddle.net/MnSRd/11/](http://jsfiddle.net/MnSRd/11/)

我没有删除 UI 元素，而是将其附加到父容器的末尾。因此它对元素样式没有任何影响。

# spring - 无法让 Spring SOAP 客户端工作：内容类型 'text/xml; charset=utf-8' 不是预期的类型 'application/soap+xml; 字符集=utf-8'

> ID：14548736
> 
> 赞同：4
> 
> 时间：2013-01-27T15:09:54.937
> 
> 标签：spring, soap, soap-client, spring-ws

嗨，我正在尝试使用`Spring-ws`. 我对这个错误所做的谷歌搜索表明我使用的是 Soap 1.1 并且需要指定 Soap 1.2。我试过这样做。我在下面做对了吗？如果这不是问题，有人知道问题是什么吗？

这是**堆栈跟踪的一部分：**

```
org.springframework.ws.client.WebServiceTransportException: Cannot process the message because the content type 'text/xml; charset=utf-8' was not the expected type 'application/soap+xml; charset=utf-8'. [415]
    at org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:663)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:587)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:492)
    at org.springframework.ws.client.core.WebServiceTemplate.sendSourceAndReceiveToResult(WebServiceTemplate.java:436)
    at com.jda.fileserver.FujiAuthenticationTest.testLogin(FujiAuthenticationTest.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
```

这是我的代码，感谢您的帮助：

```
public class AuthTest {
@Test
public void testLogin() throws Exception {
        StringBuffer loginXml = new StringBuffer();
        loginXml.append("<soapenv:Envelope xmlns:soapenv=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ns=\"http://abc.com/xyz/2010/08\">");
        loginXml.append("  <soapenv:Header>");
        loginXml.append("    <ns:loginOperationDetails>");
        loginXml.append("    </ns:loginOperationDetails>");
        loginXml.append("  </soapenv:Header>");
        loginXml.append("  <soapenv:Body>");
        loginXml.append("    <ns:LogIn>");
        loginXml.append("      <ns:logInInfo>");
        loginXml.append("        <ns:CustomerAccountId>customer1</ns:CustomerAccountId>");
        loginXml.append("        <ns:Username>jsmith</ns:Username>");
        loginXml.append("        <ns:Password>abc123</ns:Password>");
        loginXml.append("      </ns:logInInfo>");
        loginXml.append("    </ns:LogIn>");
        loginXml.append("  </soapenv:Body>");
        loginXml.append("</soapenv:Envelope>");

        WebServiceTemplate webServiceTemplate = new WebServiceTemplate();
        SaajSoapMessageFactory defaultMessageFactory = (SaajSoapMessageFactory) webServiceTemplate.getMessageFactory();
        defaultMessageFactory.setSoapVersion(SoapVersion.SOAP_12);
        webServiceTemplate.setMessageFactory(defaultMessageFactory); // probably not needed

        StreamSource source = new StreamSource(new StringReader(loginXml.toString()));
        StreamResult result = new StreamResult(System.out);
        String uri = "http://xyz.abcstage.com/xyz_1.0/membership.svc/ws";
        SoapActionCallback requestCallback = new SoapActionCallback("http://abc.com/xyz/2010/08/MembershipService/LogIn");
        try {
            webServiceTemplate.sendSourceAndReceiveToResult(uri, source, requestCallback, result);
        } 
        catch (SoapFaultException sfe) {
            throw new Exception("SoapFaultException", sfe);
        }
        catch (WebServiceTransportException wste) {
            throw new Exception("WebServiceTransportException", wste);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:12:34.937

Ok, I fixed the above problem, which gets me to another problem. First here's how I fixed the above problem. Now I don't set the SOAP version on the SaajSoapMessageFactory, I set it on the wrapped MessageFactory. Now the Content-Type going out in my request is application/soap+xml.

```
WebServiceTemplate webServiceTemplate = new WebServiceTemplate();
MessageFactory msgFactory = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL);
SaajSoapMessageFactory newSoapMessageFactory = new SaajSoapMessageFactory(msgFactory);
webServiceTemplate.setMessageFactory(newSoapMessageFactory); 
```

Next problem, now I'm getting this:

```
org.springframework.ws.soap.client.SoapFaultClientException: Unexpected fault in the service.
    at org.springframework.ws.soap.client.core.SoapFaultMessageResolver.resolveFault(SoapFaultMessageResolver.java:37)
    at org.springframework.ws.client.core.WebServiceTemplate.handleFault(WebServiceTemplate.java:774)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:600)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:492)
    at org.springframework.ws.client.core.WebServiceTemplate.sendSourceAndReceiveToResult(WebServiceTemplate.java:436) 
```

and here's the info that was returned in the response:

```
500 Internal Server Error
The SOAP action specified on the message, '', does not match the HTTP SOAP Action, 'http://abc.com/xyz/2010/08/MembershipService/LogIn'. 
```

I'll try to solve this, but wanted to update anybody reading this so they can stop looking into the previous error. I need to figure out how to correctly set the soap action.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-07T09:56:05.073

请使用以下代码在 Spring webservice 模板 marshallSendAndReceive 方法中将标头内容类型更改为 text/xml;charset=utf-8。

```
 WebServiceTemplate webServiceTemplate = new WebServiceTemplate();
webServiceTemplate.marshalSendAndReceive(url, request, new WebServiceMessageCallback() {

                public void doWithMessage(WebServiceMessage message) throws IOException, TransformerException {
                    SaajSoapMessage soapMessage = (SaajSoapMessage) message;
                    MimeHeaders headers = soapMessage.getSaajMessage().getMimeHeaders();
                    headers.addHeader(TransportConstants.HEADER_CONTENT_TYPE, "text/xml;charset=utf-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T20:53:11.897

为了添加带有动作和标签的soapheader，下面的代码对我来说很好。

```
public void doWithMessage(WebServiceMessage message) throws IOException {
    SaajSoapMessage soapMessage = (SaajSoapMessage) message;

    SoapEnvelope soapEnvelope = soapMessage.getEnvelope();
    SoapHeader soapHeader = soapEnvelope.getHeader();

    //Initialize QName for Action and To
    QName action = new QName("{uri}", "Action", "{actionname}");
    QName to = new QName("{uri}", "To", "{actionname}");

    soapHeader.addNamespaceDeclaration("{actionname}", "{uri}");

    SoapHeaderElement soapHeaderElementAction = soapHeader.addHeaderElement(action);
    SoapHeaderElement soapHeaderElementTo = soapHeader.addHeaderElement(to);

    soapHeaderElementAction.setText("{text inside the tags}");

    soapHeaderElementTo.setText("{text inside the tags}");

    soapMessage.setSoapAction("{add soap action uri}");

    soapMessage.writeTo(out);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-26T22:19:03.337

使用 setHeader 因为您可能想要替换现有标题的内容，或者如果它不存在则添加它。尽管 Httpheaders 应该是不区分大小写的，但使用 addHeader 就可以做到这一点。在调用 addHeader() 时通过源代码进行调试，即使它忽略大小写，您也会看到它在另一个标头之后插入新标头。所以，至少在Java中，最终会得到

内容类型：

内容类型：

```
 public void doWithMessage(WebServiceMessage message) throws IOException, TransformerException {
                SaajSoapMessage soapMessage = (SaajSoapMessage) message;
                MimeHeaders headers = soapMessage.getSaajMessage().getMimeHeaders();
                headers.setHeader(TransportConstants.HEADER_CONTENT_TYPE, "text/xml;charset=utf-8"); 
```

# linux - 有没有一种方法或工具可以让我在 Windows 上使用类似 linux 的 shell 环境？

> ID：14548740
> 
> 赞同：-1
> 
> 时间：2013-01-27T15:10:22.107
> 
> 标签：linux, windows

有没有一种方法可以像 `ls -l` 在窗口命令提示符下一样使用 linux 命令？或者也许使用强大的命令，比如`grep`在 windows 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:12:27.560

[Cygwin](http://www.cygwin.com/)会做你想要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:16:38.590

[MinGW/MSys](http://www.mingw.org/)是一个最小的 unix 环境。

# xml - 如何使用 excel vba 2007 在 xml 中添加图像标签

> ID：14548741
> 
> 赞同：0
> 
> 时间：2013-01-27T15:10:33.197
> 
> 标签：xml, image, vba, excel

我正在使用 excel 2007 vba 生成 xml。执行宏后，我得到这个输出 ![在此处输入图像描述](../Images/f1fe4edd7e0ec0558bab8288b8472251.png)

但我需要像这样的输出

![在此处输入图像描述](../Images/58818d49674dc4744e74b1e84e95ad41.png)

我不想要 < 和 > 而不是 < 和 > 标签。我正在使用的宏是

```
enter code here

Dim xmlDoc As New MSXML2.DOMDocument30
Dim objNode As MSXML2.IXMLDOMNode
Dim personNode As MSXML2.IXMLDOMNode
Dim imagesNode As MSXML2.IXMLDOMNode
Set objNode = xmlDoc.createNode(NODE_PROCESSING_INSTRUCTION, "xml", "")
xmlDoc.appendChild objNode
Set objNode = xmlDoc.createNode(NODE_ELEMENT, "root", "")
Set personNode = xmlDoc.createNode(NODE_ELEMENT, "person", "")
objNode.appendChild personNode
Set imagesNode = xmlDoc.createNode(NODE_ELEMENT, "images", "")
personNode.appendChild imagesNode
imagesNode.Text = "<image href=" & Chr(34) & "file:///Users/d.jahr/Desktop/XML           Booklet/Bilder/pic1.jpg" & Chr(34) & "/>"
xmlDoc.appendChild objNode
Set objNode = Nothing
MsgBox xmlDoc.XML
xmlDoc.Save ActiveWorkbook.Path & "\" & "result.xml" 
```

结束子

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:41:35.133

与其设置集合的文本，不如`images`考虑附加一个`image`子节点并设置`href`它的属性：

```
Sub test()
    Dim xmlDoc As New MSXML2.DOMDocument30
    Dim objNode As MSXML2.IXMLDOMNode
    Dim personNode As MSXML2.IXMLDOMNode
    Dim imagesNode As MSXML2.IXMLDOMNode

    Dim image1Node As MSXML2.IXMLDOMNode
    Dim namedItem As Object

    Set objNode = xmlDoc.createNode(NODE_PROCESSING_INSTRUCTION, "xml", "")
    xmlDoc.appendChild objNode
    Set objNode = xmlDoc.createNode(NODE_ELEMENT, "root", "")
    Set personNode = xmlDoc.createNode(NODE_ELEMENT, "person", "")
    objNode.appendChild personNode
    Set imagesNode = xmlDoc.createNode(NODE_ELEMENT, "images", "")
    personNode.appendChild imagesNode

    Set image1Node = xmlDoc.createNode(NODE_ELEMENT, "image", "")
    imagesNode.appendChild image1Node
    Set namedItem = xmlDoc.createAttribute("href")
    namedItem.Value = "file:///Users/d.jahr/Desktop/XMLBooklet/Bilder/pic1.jpg"
    image1Node.Attributes.setNamedItem namedItem

    xmlDoc.appendChild objNode
    Debug.Print xmlDoc.XML
End Sub 
```

输出：

```
<?xml version="1.0"?>
<root>
   <person>
      <images>
         <image href="file:///Users/d.jahr/Desktop/XMLBooklet/Bilder/pic1.jpg"/> 
      </images>
   </person>
</root> 
```

# django - 如何处理 Django 中的错误？

> ID：14548746
> 
> 赞同：1
> 
> 时间：2013-01-27T15:11:12.800
> 
> 标签：django, django-templates

如何处理我想为那些创建`404, 403, 500 error`的.`django?``customized page``errors`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:13:22.147

首先，创建 404.html、403.html 和 500.html。

例如 403.html

```
{% extends "base.html" %}

{% block title %}{{block.super}}Forbidden{% endblock %}

{% block content %}
<div id="container">
<h1>403</h1>
<h2>Forbidden</h2>
</div>
{% endblock %} 
```

在你的 base.html 中：

```
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{STATIC_URL}}css/style.css?v=1">
</head>

<body>
    {% block content %}{% endblock %}
</body>
</html> 
```

把它放在你的 url.py

```
#handle the errors    
from django.utils.functional import curry
from django.views.defaults import *

handler500 = curry(server_error, template_name='500.html')
handler404 = curry(page_not_found, template_name='404.html')
handler403 = curry(permission_denied, template_name='403.html') 
```

# c - 使用 libgcrypt 从密码中加密文件

> ID：14548748
> 
> 赞同：3
> 
> 时间：2013-01-27T15:11:26.790
> 
> 标签：c, cryptography, openssl, aes, libgcrypt

我正在开发对文件进行 aes256-cbc 加密的简单软件。我正在使用 GNU/Linux 和 libgcrypt-1.5.0。IV 是使用 OpenSSL rand 函数随机生成的，IV 存储在输出文件中的密文之前。我正在使用 PKCS#7 填充方法。

现在我怀疑如何进行：

1.  最好使用sha256重复输入密码5万次加密文件，还是使用用户给的密码？

2.  如果我想检查输入密码的正确性，我必须将它存储到加密文件中（显然是加密的）。这样做是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:30:18.420

1.  两种选择都不正确。您需要使用一种算法来从密码中获取密钥，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。请参阅函数[gcry_kdf_derive](http://www.gnupg.org/documentation/manuals/gcrypt/Key-Derivation.html#Key-Derivation)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:34:48.177

1.  按照 indiv 的建议，使用 PBKDF2 派生密钥。
2.  使用带有不同盐的 PBKDF2 来派生身份验证密钥并将 MAC 附加到您的加密数据（加密后比加密前更安全）。验证MAC以检查密码是否正确，数据是否被篡改。如果您在选择 MAC 时不确定，请使用带有 SHA-512 的 HMAC（假设您根据您的问题使用 AES-256）。

您可以使用 PBKDF2 的单次调用同时生成加密和身份验证密钥，而不是使用两次具有不同填充的 PBKDF2，方法是一次性生成加密密钥和身份验证密钥的组合大小的密钥。

请注意，根据填充来确定密钥是否正确可能会导致 CBC 填充预言攻击。对于文件加密，此类攻击可能不适用，具体取决于具体情况，但无论如何使用适当的 MAC 进行数据身份验证似乎是一种谨慎的做法，因为您还希望防止位翻转攻击和其他对数据的恶意修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T01:49:49.980

> 1.最好使用sha256重复输入密码5万次加密文件，还是使用用户给的密码？

您永远不会直接使用“原始”密码作为密钥。需要将密钥拉伸到针对蛮力攻击的加固中。查看字符串到密钥 (S2K) 的东西，或基于密码的密钥派生函数 (PBKDF) 以及像 scrypt 这样的内存硬散列。

* * *

> 2.如果我想检查输入密码的正确性，我必须将它存储到加密文件中（显然是加密的）。这样做是否正确？

不，您使用像 GCM 这样的经过身份验证的加密模式。认证加密模式是专门为该任务构建的，并提供机密性和真实性。

在密码下，加密文件将验证或不会。不要担心自己的原因。否则，您正在设置一个预言机，它可能会撤消步骤 1 中的所有内容（这可能适用于此处，也可能不适用）。

# android - 在 Android 中结束线程 - 严重的问题

> ID：14548752
> 
> 赞同：2
> 
> 时间：2013-01-27T15:11:44.090
> 
> 标签：android, multithreading, surfaceview, forceclose

对于何时/如何结束 Surfaceview 应用程序中的线程，我仍然很困惑，希望有人能解释一下。

目前，我正在使用以下代码：

```
Log.v("Destroyed","Surface Destroyed");

preThread.setRunning(false);  
boolean retry = true;        
while (retry) {
    try {
        preThread.join();
        retry = false;
    } catch (InterruptedException e) {
    }
} 
```

上面的代码位于我的 surfaceDestroyed 方法中 - 首先，这是正确的吗？

在我的 surfaceCreated 方法中，我有以下代码应该检查线程是否仍然存在或已停止，如果已停止，则重新启动它：

```
if (runthread==false){

if (preThread.getState()==Thread.State.TERMINATED){
    preThread = new MainThread(thisholder, thiscontext, thishandler);}
else {}
    preThread.setRunning(true);
    preThread.start();
    } 
```

它似乎表现得很奇怪。这是我得到的：

*）当我第一次安装游戏并运行它时，通过我的日志，它说线程已经存在，如果我然后按返回键，surfaceDestroyed 运行但是当我回到活动时，它又说线程已经存在。

*) 如果我按下 home 键，然后 surfaceDestroyed 运行，当我返回活动时，它说线程先前已被销毁并启动一个新线程。

*) 如果我使用 DDMS 终止活动，surfaceDestroyed 不会运行，当我返回活动时，它说线程已经存在。

如果我想清楚，那么第三种情况似乎是唯一有意义的。

我显然做错了什么。主要问题是这样的：

如果我在游戏过程中按了 home 键，然后在 Eclipse 中通过 DDMS 结束应用程序，重新启动应用程序并快速连续按两次返回键（一次，返回上一个活动，然后再次返回启动画面屏幕） - 应用程序强制关闭，我在 logcat 中收到“致命异常：线程 12”。我不得不假设这是因为我的线程永无止境并且正在尝试重新启动？我不知道。

我一直试图弄清楚这个似乎是一个年龄，所以我真的希望有人能解释我做错了什么！

非常感谢！

编辑。Logcat 输出。

![在此处输入图像描述](../Images/86dc961aae7f01c737c4d3233179cfe0.png)

我的 Run() 方法：

```
 public void run(){

    //Main Loop

    while (runthread){

    Log.v("tracking","runthread is: "+runthread);                             //This should only be logged while this loop is running

        timestart = System.currentTimeMillis();                             //Get time at start of loop for FPS calc

        try{c=mySurfaceHolder.lockCanvas();                                 //Set Canvas to locked

            synchronized(mySurfaceHolder){

                if (c==null){Log.v("Stop","Canvas is null for some reason - exiting, "+c+" - see?!!!");}

                framesskipped = 0;                                              // resetting frames skipped
        doDraw(c);                                                      //Draw to the screen
        updateMenu();
        }
        }
        finally{
            if (c != null){

            mySurfaceHolder.unlockCanvasAndPost(c);                     //Post canvas

            }
        }

        //work out timings

            timeend = System.currentTimeMillis();                       //get end time for current frame (for FPS) 
            frametime = timeend-timestart;                              //Set the frametime variable to the time the frame took to render & update (end time - start time)
            sleepfor = (int) (33-frametime);                            // this is the time that the thread will sleep for if <target time

            if (sleepfor>0){                                            // If the 'sleepfor' variable is >0 then set the thread to sleep for it's value (expressed in ms)

                try {
                    OptionsThread.sleep(sleepfor);                      //send thread to sleep for value of sleepfor (determined above).
                } catch (InterruptedException e) {}                     //in case of exception
            }                                                           //close if statement

                while (sleepfor<0 && framesskipped<maxframesskipped){   //if sleepfor is < 0 (ie, frame took longer to render than target time and the maxframesskipped has not reached it's limit)
                    updateMenu();                                       //Update animation variables without rendering to the screen while these conditions are met 
                    sleepfor+=33;                                       //time to sleep plus the time frame took to render
                    framesskipped++;                                    //add one to framesskipped variable so this only skips a certain number of frames
                    }
                }
            } 
```

新的 Logcat 输出显示 nullPointerException 和日志记录输出。runThread 永远不会被记录为 false，所以我不确定如何到达将 canvas 记录为 null 的行！

![在此处输入图像描述](../Images/2a89db4b200508f40afdae8935ff7031.png)

谢谢

编辑：

好的，我已经完全从头开始并重新编写了整个课程——这是我之前所拥有的非常精简的版本，这里是整个课程：

```
 import android.content.res.Resources;
    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.graphics.Canvas;
    import android.os.Handler;
    import android.util.Log;
    import android.view.MotionEvent;
    import android.view.Surface;
    import android.view.SurfaceHolder;
    import android.view.SurfaceView;

public class OptionsScreen extends SurfaceView implements
  SurfaceHolder.Callback {   

    //Create Variables

    private SurfaceHolder thisHolder;
    private Context thisContext;
    private Handler thisHandler;
    private preThread thread;
    private Bitmap background;
    private Resources res;
    private Context myContext;
    private Handler myHandler;

    private Canvas c;
    //      thisholder = getHolder();

    public OptionsScreen(Context context) {
    super(context);

    myContext=context;                                  //This is the context passed into this constructor (this)
    thisHolder = getHolder();                           //Get surface holder
    thisHandler=getHandler();                           //Get Handler
    thisContext = getContext();                         //Get context
    res=getResources();                                 //Get resource

    //add the callback surface holder
    getHolder().addCallback(this);
    //make focusable
    setFocusable(true);
    //create new thread
    thread = new preThread(thisHolder, thisContext, thisHandler);
    //create bitmaps from resources
    background = BitmapFactory.decodeResource(res, R.drawable.sky);
}

 @Override
 public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

    Log.v("check","surfaceChanged run");

 }

 @Override
 public void surfaceCreated(SurfaceHolder holder) {

    Log.v("check","surfaceCreated run"+thread.getState());

    int height = this.getHeight();
    int width = this.getWidth();

    if(thread.getState()==Thread.State.TERMINATED){             //Has thread been stopped previously? could happen if the home key is pressed
        Log.v("check","Thread still exists!!!! - Starting a new one. "+thread.getState()); 
        thread = new preThread(thisHolder, thisContext, thisHandler);

    }

    thread.setRunning(true);
            thread.start();

    Log.v("check","Thread - "+thread.getState());

 }

 @Override
 public void surfaceDestroyed(SurfaceHolder holder) {

      Log.v("check","surfaceDestroyed run"+thread.getState());

      thread.setRunning(false);                     //Set to false to exit run() method

     boolean retry = true;                          //Shut off rendering thread
          while (retry) {
            try {
                thread.join();
                retry = false;
              } catch (InterruptedException e) {
            // try again shutting down the thread

           }

          }

 }

 @Override
 public boolean onTouchEvent(MotionEvent event) {
     Log.v("check","Surface Touched");
    Log.v("check","Thread - "+thread.getState());
     // System.exit(0);

    return super.onTouchEvent(event);
 }

 @Override
 protected void onDraw(Canvas canvas) {

    // if (canvas!=null){

        canvas.drawBitmap(background, 0, 0, null);
        Log.v("Stop","Canvas is "+canvas);
     }
 }

 //*******************************************************************
 //**                           run loop                            **
 //*******************************************************************

protected class preThread extends Thread {

    private SurfaceHolder mySurfaceHolder;
    private Context myContext;

    public preThread(SurfaceHolder surfaceholder, Context context, Handler handler) {               //Constructor

        mySurfaceHolder=surfaceholder;
        myContext=context;
        res = myContext.getResources();

    }

         // flag
         private boolean running;
         public void setRunning(boolean running) {
          this.running = running;
         }

         @Override
         public void run() {

                      while (running) {

            try{c=mySurfaceHolder.lockCanvas();                                 

            synchronized(mySurfaceHolder){

                Log.v("check","Drawing!!");

        onDraw(c);                                                      

        }
        }
        finally{
            if (c != null){

            mySurfaceHolder.unlockCanvasAndPost(c);                     

            }
        }

          }
         }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:53:36.747

线程很难管理，但经过一些尝试和尝试，我想我已经想出了一个在大多数情况下都能正常工作的方案。结束线程

```
 if(m_hThread != null)
        {
            try 
            {
                m_bThread = false; // m_bThread is the while condition of the thread
                m_hThread.interrupt(); // incase the thread is in sleep
                m_Thread.join(); // This call blocks and waits for thread to end
                m_hThread = null;  

            } catch (InterruptedException e) {

                e.printStackTrace();
            }
        } 
```

用于重新创建线程

```
 if(m_hThread == null) 
     {   
         m_bThread = true; //while condition of thread
         StartNewThread(); 
     } 
```

在您的实现中，无需重试 Thread.join，它要么会在第一次尝试中加入，要么会阻塞直到线程加入。至于您的情况，只有第一种情况似乎很奇怪，您发现线程已经在运行，这不可能是真的。第二和第三对我来说完全有意义，并且像他们应该的那样工作。当用户单击主页按钮`surfaceDestroyed`被调用并且线程被终止。

只要 m_bThread 为真，线程就会继续，

```
 while(m_bThread) //b
    {
      // Continuous Thread operations...
    } 
```

m_hThread 在您的代码中只是 preThread ，而 m_Thread 也是 m_hThread 只是这里的打字错误。

# c - 将多维可变长度数组传递给函数

> ID：14548753
> 
> 赞同：42
> 
> 时间：2013-01-27T15:11:48.463
> 
> 标签：c, arrays, c99

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-27T15:45:55.077

Passing arrays to functions is a bit funny in C and C++. There are no rvalues of array types, so you're actually passing a pointer.

To address a 2D array (a real one, not array of arrays), you'll need to pass 2 chunks of data:

*   the pointer to where it starts
*   how wide one row is

And these are two separate values, be it C or C++ or with VLA or without or whatnot.

## Some ways to write that:

Simplest, works everywhere but needs more manual work

```
void foo(int width, int* arr) {
    arr[x + y*width] = 5;
} 
```

VLA, standard C99

```
void foo(int width, int arr[][width]) {
    arr[x][y] = 5;
} 
```

VLA w/ reversed arguments, forward parameter declaration (GNU C extension)

```
void foo(int width; int arr[][width], int width) {
    arr[x][y]=5;
} 
```

C++ w/ VLA (GNU C++ extension, terribly ugly)

```
void foo(int width, int* ptr) {
    typedef int arrtype[][width];
    arrtype& arr = *reinterpret_cast<arrtype*>(ptr);
    arr[x][y]=5;
} 
```

## Big remark:

The [x][y] notation with a 2D array works because the array's type contains the width. No VLA = array types must be fixed at compile-time.

Hence: If you can't use VLA, then...

*   there's no way to handle it in C,
*   there's no way to handle it without a proxy class w/ overloaded operator overloading in C++.

If you can use VLA (C99 or GNU C++ extensions), then...

*   you're in the green in C,
*   you still need a mess in C++, use classes instead.

For C++, `boost::multi_array` is a solid choice.

## A workaround

For 2D arrays, you can make two separate allocations:

*   a 1D array of pointers to `T` (A)
*   a 2D array of `T` (B)

Then set the pointers in (A) to point into respective rows of (B).

With this setup, you can just pass (A) around as a simple `T**` and it will behave well with `[x][y]` indexing.

This solution is nice for 2D, but needs more and more boilerplate for higher dimensions. It's also slower than the VLA solution because of the extra layer of indirection.

*You may also run into a similar solution with a separate allocation for every `B`'s row. In C this looks like a malloc-in-a-loop, and is analogous of C++'s vector-of-vectors. However this takes away the benefit of having the whole array in one block.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-28T00:23:31.170

There is no clear cut way for doing this but you can use a workaround to treat a 2 dimensional array as a one dimensional array and then reconvert it to a two dimensional array inside the function.

```
void foo2(int n, int *arr) 
{
    int *ptr; // use this as a marker to go to next block
    int i;
    int j;

    for(i = 0; i < n; i++)
    {
        ptr = arr + i*n; // this is the starting for arr[i] ...
        for (j = 0; j < n ;j++)
        {
            printf(" %d ", ptr[j]); // This is same as arr[i][j]
        }
    }
}

void bar2()
{
    int arr[10][10];
    foo2(10, (int *)arr);
} 
```

# model - 为整行设置 userData？

> ID：14548756
> 
> 赞同：0
> 
> 时间：2013-01-27T15:12:03.263
> 
> 标签：model, qt4, qtableview

在 QTableView 中，我几乎没有与某些 QStandardItem 相关联的用户数据，

每一行都有一个用户数据（我使用行选择模式）

现在，当用户右键单击同一行上的任何项目时，他们会得到相同的数据。

所以我的问题是，我将用户数据设置在每一行的第一列，每次我得到一个点击事件，我都需要找到同一行的项目，并且首先找到第一列，然后查找关联的用户数据。

这看起来相当愚蠢，是否可以为整行设置数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:51:49.180

您可以考虑使用带有数据列表的自定义 QAbstractTableModel。我目前有一个与您类似的项目，并且子类化 QAbstractTableModel 为我工作。

在您的 QAbstractTableModel 中，创建一个按行返回数据项的方法，例如`DataClass* getRecord(int row);`，在您的 QTableView 行单击事件中，将该方法与所选行相关联。

```
void MyTable::showEditDialog()
{
    MyModel* m = qobject_cast<MyModel*>(model());
    QModelIndexList selected = selectionModel()->selectedIndexes();
    MyDialog dialog(m->getRecord(selected[0].row()), this);
    if (dialog.exec() == QDialog::Accepted)
    {
        m->refresh(selected[0]);
        Q_EMIT contentEdited();
    }
} // end_slot(MyTable::showEditDialog) 
```

[在此处](http://qt-project.org/doc/qt-4.8/qabstracttablemodel.html)和[此处](http://qt-project.org/doc/qt-4.8/model-view-programming.html#model-subclassing-reference)查看QAbstractTableModel 和模型视图编程的文档。

# asp.net - ASP.net IIS 执行应用程序 RunAs 请求者

> ID：14548757
> 
> 赞同：1
> 
> 时间：2013-01-27T15:12:14.790
> 
> 标签：asp.net, iis

我可以从 ASP.net IIS 执行服务或可执行文件 (notepad.exe) 并且该可执行文件作为请求者（客户端）运行吗？例如：John 和 Ada 是 2 个不同的客户，他们有域帐户。Webserver 上的 IIS 有 (notepad.exe)。当 John 在 IIS 上请求页面时，记事本将作为“John”运行当 Ada 在 IIS 上请求页面时，记事本将作为“Ada”运行，这适用还是注意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:15:12.243

```
<identity impersonate="true" /> 
```

来源： http: [//msdn.microsoft.com/en-us/library/72wdk8cc (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/72wdk8cc(v=vs.71).aspx)

# iphone - 将数组传递给另一个视图

> ID：14548762
> 
> 赞同：1
> 
> 时间：2013-01-27T15:12:28.753
> 
> 标签：iphone, objective-c, arrays, nsmutablearray

我是xcode的新手。我正在尝试将数组从一个视图传递到另一个视图。我想将 ProfileViewController 中的整数传递`profileid`给 FavouritesViewController 中的数组。加载 FavouritesViewController 后，日志将显示数组。

这是我的代码：

**ProfileViewController.h**

```
- (IBAction)AddFavouritesClicked:(id)sender; 
```

**ProfileViewController.m**

```
@synthesize profileid;

int profileid = 0;

- (IBAction)AddFavouritesClicked:(id)sender {

    FavouritesViewController *favController = [[FavouritesViewController alloc]init];
    [favController.favouritesArray initWithObjects:[NSNumber numberWithInt:profileid], nil];
    NSLog(@"%@", favController.favouritesArray);

} 
```

**收藏夹ViewController.h**

```
@interface FavouritesViewController : UITableViewController
{
    NSMutableArray *favouritesArray;
}

@property(nonatomic, retain)NSArray *favouritesArray;
@end 
```

**收藏夹ViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"%@", favouritesArray);
} 
```

到目前为止，`favouritesArray`价值始终是`null`

任何帮助将不胜感激。提前致谢！

这是我每次单击`Addtofavoutites`按钮时的日志

```
2013-01-27 22:54:52.865 Ad&Promo[8058:c07] (
2
)
2013-01-27 22:56:10.958 Ad&Promo[8058:c07] (
2
)
2013-01-27 22:56:11.705 Ad&Promo[8058:c07] (
2
)
2013-01-27 22:56:12.191 Ad&Promo[8058:c07] (
2
) 
```

但相反，我希望它看起来像这样..

```
2013-01-27 22:54:52.865 Ad&Promo[8058:c07] (
2,2,2,2
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:19:03.160

你没有分配指针，你错过了 alloc 方法，这样做：

```
favController.favouritesArray=[[NSArray alloc]initWithObjects:[NSNumber numberWithInt:profileid], nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:21:19.987

首先，您应该查看创建数组的语法。它应该是：

```
favController.favouritesArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:profileid], nil]; 
```

不过，我认为仅此一项并不能解决您的问题

这是一个非常典型的错误，出现在 SO 在以下 2 个语句中：

```
FavouritesViewController *favController = [[FavouritesViewController alloc]init];
favController.favouritesArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:profileid], nil]; 
```

你正在分配一个新的`FavouritesViewController`. `FavouritesViewController`这与您已经在应用程序中初始化的任何其他内容无关。这就解释了为什么它的内部数组是空的。

您需要做的是让您的`ProfileViewController`实例知道您的 FavouritesViewController 实例（而不是在前者中实例化后者的私有实例）。

因此，只需`FavouritesViewController`在 内部定义一个属性`ProfileViewController`，并正确初始化它。然后你就可以做到：

```
- (IBAction)AddFavouritesClicked:(id)sender {

    self.favController.favouritesArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:profileid], nil]; 
```

}

这将设置您需要设置到您拥有的其他视图控制器中的值。

编辑：

针对这种需求的更好设计是使用*模型*（如模型-视图-控制器）。

您无需让两个控制器中的一个知道另一个，而是创建一个新类（模型），负责保存应用程序中的所有共享数据。

可以从应用程序中的任何其他类访问此类，以便他们可以设置和获取它存储的数据。

这个类可能是一个单例：

```
[MyModel sharedModel].favArray = ... 
```

或者它可能是一个只公开类方法的类，例如：

```
[MyModel setFavArray:...]; 
```

# c# - SimpleInjector 在没有显式绑定的情况下解析实现接口的所有类型

> ID：14548766
> 
> 赞同：1
> 
> 时间：2013-01-27T15:13:04.440
> 
> 标签：c#, .net, unit-testing, dependency-injection, simple-injector

我有一个界面“ISetting”。我有 POCO 类来实现这个空接口，其中包含一些带有一些自动 getter/setter 的属性。

我希望 SimpleInjector 检查每个请求的类型（未显式注册），​​如果它实现了这个接口，用我提供的方法解决它。

这允许我使用 POCO 对象进行设置，并可以选择使用默认值（来自构造函数）将 POCO 对象绑定到它们自身。这对于单元测试以及关闭设置（使用默认值）非常有用。

这可能吗？方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:31:48.200

这可以使用[ResolveUnregisteredType](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios&referringTitle=Home#Unregistered_Type_Resolution)事件获得。例子：

```
container.ResolveUnregisteredType += (s, e) =>
{
    Type type = e.UnregisteredType;

    if (typeof(ISetting).IsAssignableFrom(type))
    {
        // If you need raw performance, there is also
        // an overload that takes in an Expression.
        e.Register(() =>
        {
            // Do something useful here. Example:
            return Activator.CreateInstance(type);
        });
    }
}; 
```

# apache - Apache 无法启动 - ServerRoot 必须是有效目录并且无法找到指定的模块

> ID：14548768
> 
> 赞同：41
> 
> 时间：2013-01-27T15:13:10.790
> 
> 标签：apache, httpd.conf

我正在使用 xampp 便携式服务器，我在使用 Apache http 服务器时遇到了一些问题，它说“ServerRoot 必须是一个有效的目录”

命令行输出：

```
Please close this command only for Shutdown
Apache 2 is starting ...
httpd.exe: Syntax error on line 35 of K:/../../../xampp/apache/conf/httpd.conf: ServerRoot must be a valid directory

Apache could not be started 
```

我检查了 xampp/apache/conf/httpd.conf 的第 35 行，它是：

```
ServerRoot "/xampp/apache" 
```

哪个不存在。我的文件夹是：

```
K:/../../../xampp/apache/conf     <- where the httpd.conf is
K:/../../../xampp/apache/         <- the server root
K:/../../../xampp/apache/modules  <- where server modules are 
```

如果我将（在第 35 行）更改为

```
ServerRoot ".." 
```

它说：

```
Please close this command only for Shutdown
Apache 2 is starting ...
httpd.exe: Syntax error on line 65 of K:/../../../xampp/apache/conf/httpd.conf: Cannot load modules/mod_access_compat.so into server: Unable to find the specified module

Apache could not be started 
```

我检查了，modules/mod_access_compat.so 存在，所以我不知道如何修复它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-05-15T08:54:48.023

只需从 shell（XAMPP 控制面板中的 shell）运行 setup_xampp.bat，路径应该为 Windows 的 XAMPP 便携式版本自动设置。它对我有用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-07T08:19:39.087

导航到 Apache24 的 conf 目录中的 httpd.conf 文件或您拥有的任何 apache 文件。

转到 ServerRoot= ".." 行并将值更改为 apache 所在的路径，例如 "C:\Program Files\Apache24"

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-11T17:07:05.987

如果您打开编辑器并跳转到错误消息中显示的确切行（在文件中`httpd.conf`），您会看到以下内容：

```
#LoadModule access_compat_module modules/mod_access_compat.so
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule allowmethods_module modules/mod_allowmethods.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule auth_form_module modules/mod_auth_form.so 
```

到模块的路径，例如 `modules/mod_actions.so`，都是相对的，它们是**相对于**设置的值的`ServerRoot`。在(ctrl-F for )`ServerRoot`的顶部定义。`httpd.conf``ServerRoot "`

ServerRoot 通常是绝对设置的，这将`K:/../../../xampp/apache/`在您的帖子中。

但它也可以相**对于**工作目录（[*cf.*](https://stackoverflow.com/q/4419868/632951)）相对设置。如果工作目录是 Apache`bin`文件夹，那么在你的`httpd.conf`:

```
ServerRoot ../ 
```

如果工作目录是 Apache 文件夹，那么这就足够了：

```
ServerRoot . 
```

如果工作目录是 C: 文件夹（Apache 文件夹上方的一个文件夹），那么使用这个：

```
ServerRoot Apache 
```

对于 apache 服务，工作目录[是`C:\Windows\System32`](https://stackoverflow.com/a/884991/632951)，所以使用这个：

```
ServerRoot ../../Apache 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-09T19:17:08.780

将 httpd.conf 文件中的以下路径更改为您的设置。这将解决问题。

```
Define SRVROOT "C:\Apache24"   
ServerRoot "${SRVROOT}" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-20T11:28:12.517

确保您`ServerRoot`在 httpd.conf 中正确指向 Apache 路径。否则，您将在每个其他模块中看到此消息。

例子：

*   `/etc/apache2/apache2`对于 Linux
*   `"C:\Program Files\Apache24"`适用于 Windows

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-27T18:29:46.260

我认为 ServerRoot 需要是绝对的。使用类似“/apache/docroot”的东西

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-26T08:24:08.713

如果您使用实际版本，则根目录中有一个“setup_xampp.bat/.sh”脚本。路径必须是绝对的，但脚本会将所有需要的路径更改为您当前的位置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-29T15:26:43.467

使用带正斜杠的驱动器号开始 (c:/apache/...)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-02T13:30:46.520

1.  导航到你的**XAMPP**目录，你会找到一个名为***apache***的文件夹，打开它，然后复制它的路径，我的路径是“ *D:\Hacking Tools 2\Programs\XAMPP V2\apache* ”
2.  使用任何文本编辑器打开***apache\conf\httpd.conf***
3.  向下滚动直到第 30-40 行
4.  你会发现这样的代码：`ServerRoot "xampp\apache"`
5.  现在，将其更改为 apache 目录，正如我在***步骤 #1***中所说，我的路径是“ *D:\Hacking Tools 2\Programs\XAMPP V2\apache* ”，所以，我的代码将是`ServerRoot "D:\Hacking Tools 2\Programs\XAMPP V2\apache"`
6.  它应该看起来像这样：`ServerRoot "D:\XAMPP\apache"`
7.  现在回到***XAMPP***主目录并运行***xampp_start.exe***

*它对我有用，如果它对你不起作用，只需在打开**xampp_start.exe后用错误值注释即可***

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-20T05:22:42.257

运行“setup_xampp.bat/.sh”，最后删除“\”，这样你的ServerRoot应该是“C:.....\apache” **NO** “C:.....\apache\”

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-29T04:51:38.387

下面解决了。我错误地给了 bin /directory/，所以遇到了这个问题：

如果您安装了 apache，`C:/httpd-2.4.41-o102s-x64-vc14-r2/Apache24`
那么模块位于.. `C:/httpd-2.4.41-o102s-x64-vc14-r2/Apache24/modules`

```
So, the file           C:/httpd-2.4.41-o102s-x64-vc14-r2/Apache24/conf/httpd.conf
should have
       Define SRVROOT "C:/httpd-2.4.41-o102s-x64-vc14-r2/Apache24/" 
```

希望有帮助

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-03T11:50:42.003

> 我检查了 xampp/apache/conf/httpd.conf 的第 35 行，它是：
> 
> ServerRoot "/xampp/apache"
> 
> 哪个不存在。...

创建目录，或更改包含超文本文档的目录的路径。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-16T22:35:05.400

我在 Windows 10 Home 上使用 Xampp 便携版时遇到了同样的问题。我浏览了所有建议，但没有一个奏效。我确实让它与 Windows 防火墙设置一起工作，但我自己出错了。

我的笔式驱动器在我的笔记本电脑上标记为 Drive E，在我的台式机上标记为 Drive F。一旦我更正了使用磁盘分区并将我的桌面的驱动器号更改为 E 到 Windows 要求访问防火墙并单击所有内容。

更正驱动器号的步骤是： 1\. 点击 windows 键并输入**Partition**，“**创建和格式化硬盘分区**”应该在顶部，按 Enter 2\. 在顶部面板中找到您要查找的驱动器，然后单击它。3.右键单击它并选择更改驱动器号和路径，单击 确定 4.现在尝试启动**xampp****控制面板**并启动 Apache 和 Mysql 5.如果您获得 windows 防火墙，请单击**允许**。

我不能说这会奏效，但它对我有用，并且是我在讨论中添加的内容。我也认为这可能只是防火墙不允许其他驱动器号。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-03T06:46:12.757

用于更改 XAMPP 的目录。所以你必须改变目录以及 ServerRoot "E:/xampp/apache"

```
DocumentRoot "E:/xampp/htdocs"

<Directory "E:/xampp/htdocs">

ScriptAlias /cgi-bin/ "E:/xampp/cgi-bin/"

<Directory "E:/xampp/cgi-bin">
    AllowOverride All
    Options None
    Require all granted
</Directory> 
```

我也面临着更换笔记本电脑的同样问题。谢谢

# asp.net - ASP.Net Eval() 是如何工作的？

> ID：14548777
> 
> 赞同：2
> 
> 时间：2013-01-27T15:14:01.857
> 
> 标签：asp.net, data-binding

有人可以解释一下 Eval 在 ASP.NET 中是如何工作的吗？

我知道 Eval 只是[DataBinder.Eval](http://msdn.microsoft.com/en-us/library/2d76z3ck.aspx)的一个表达式，但我想知道幕后实际发生了什么。

我读到 DataBind 发生在控件 PreRender 上，但这让我感到困惑，因为我可以随时调用控件的 .DataBind() 函数。

Eval 语句在什么时候变为实际文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:25:57.903

这是所有`overloads`使用 ILSpy 反编译的实现。这将对您有所帮助。

```
public static object Eval(object container, string expression)
{
if (expression == null)
{
    throw new ArgumentNullException("expression");
}
expression = expression.Trim();
if (expression.Length == 0)
{
    throw new ArgumentNullException("expression");
}
if (container == null)
{
    return null;
}
string[] expressionParts = expression.Split(DataBinder.expressionPartSeparator);
return DataBinder.Eval(container, expressionParts);
}

public static string Eval(object container, string expression, string format)
{
object obj = DataBinder.Eval(container, expression);
if (obj == null || obj == DBNull.Value)
{
    return string.Empty;
}
if (string.IsNullOrEmpty(format))
{
    return obj.ToString();
}
return string.Format(format, obj);
}

 private static object Eval(object container, string[] expressionParts)
 {
object obj = container;
int num = 0;
while (num < expressionParts.Length && obj != null)
{
    string text = expressionParts[num];
    if (text.IndexOfAny(DataBinder.indexExprStartChars) < 0)
    {
        obj = DataBinder.GetPropertyValue(obj, text);
    }
    else
    {
        obj = DataBinder.GetIndexedPropertyValue(obj, text);
    }
    num++;
}
return obj;
} 
```

# ruby-on-rails - 对 belongs_to 过滤器的 ActiveAdmin 自动完成

> ID：14548778
> 
> 赞同：1
> 
> 时间：2013-01-27T15:14:04.220
> 
> 标签：ruby-on-rails, autocomplete, activeadmin

我有一个类似这个项目中描述的关系：

[在 ActiveAdmin 中过滤父对象属性](https://stackoverflow.com/questions/7909540/filter-on-parent-object-attribute-in-activeadmin)

我已经在那里成功实施了解决方案。但是我想为文本框实现自动完成。

有一篇关于在 ActiveAdmin 的过滤器中使用自动完成功能的文章：

[https://github.com/gregbell/active_admin/issues/1754](https://github.com/gregbell/active_admin/issues/1754)

...但是这个例子不涉及关系，我没有成功地适应我的情况。

这是我尝试过的（在我的情况下，我试图在查看评论时过滤用户模型的用户名字段）：

楷模：

```
class User < ActiveRecord::Base
end

class Review < ActiveRecord::Base
   belongs_to :user
   search_methods :user_username
end 
```

活动管理员：

```
ActiveAdmin.register Review do

  controller do
    autocomplete :review, :user_username
  end

  filter :user_username, as: :autocomplete,
       url: '/admin/reviews/autocomplete_review_review_user_username',
        label: "Username", required: false
end 
```

路线：

```
resources :reviews do
  get :autocomplete_review_user_username, on: :collection
end 
```

我对此尝试了几种变体，结果（当自动完成启动时）通常是：

```
ActiveRecord::RecordNotFound (Couldn't find Review with
   id=autocomplete_review_review_user_username): 
```

因为它正在通过 GET 请求发送“id”参数“autocomplete_review_review_user_username”。

我不确定自动完成功能是否应该与用户控制器相关联，但也没有任何变化。

# apache - 重写条件 - 错误标志分隔符 .htaccess (Apache)

> ID：14548779
> 
> 赞同：2
> 
> 时间：2013-01-27T15:14:27.280
> 
> 标签：apache, .htaccess, mod-rewrite, delimiter

我正在尝试使用 .htaccess 将机器人/不需要的客户端重定向到错误页面。但在任何连接上，它只会带来“RewriteCond: Bad flag delimiters”

.ht 访问：

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} askpeter_bot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Jakarta [NC,OR]
...
RewriteCond %{HTTP_USER_AGENT} Genieo [NC]
RewriteRule ^(.*) "http\:\/\/www\.example\.com\/bots\/notallowed.html" [F] 
```

任何想法可能是什么问题？

编辑：
现在我使用拒绝来阻止用户代理

```
deny from env=block
SetEnvIfNoCase User-Agent "USER-AGENT" block=yes 
```

但这不是我想要的方式，因为你只是得到一个空页面而没有消息为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:37:31.173

当您使用 [F] 或 [R=403] 标志时，apache 会呈现指定代码的[ErrorDocument](http://httpd.apache.org/docs/current/mod/core.html#errordocument)。您可以使用 ErrorDocument 指令来设置它，如下所示：

```
ErrorDocument 403 /bots/notallowed.html 
```

在您的情况下，这种方法的问题在于，当发送 403 代码时，它将被用于机器人和人类。

为了将其限制为机器人，我建议如下：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} askpeter_bot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Jakarta [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Genieo [NC]
RewriteRule ^(.*)$ /bots/notallowed.php [L] 
```

然后在 notallowed.php 中，您可以使用 header 函数发送正确的标头：

```
<?php header("HTTP/1.0 403 Forbidden"); ?>
Go away, bot. 
```

如果你不使用 PHP，你可以使用 perl、python、ruby 等等。关键是从脚本发送标头，而不是在这种情况下依靠 apache 发送它。

编辑：

由于您已经尝试过这个，我认为您的一个或多个规则可能有某种隐藏的控制字符。您可以使用 cat 找到这些：

```
cat -v .htaccess 
```

如果由于某种原因这不起作用，请尝试使用此 python：

```
python -c "f = open('.htaccess', 'r'); f.seek(0); file = f.readlines(); print file" 
```

# git - 带有汇编存储库类型个人或公共的 GIT？

> ID：14548793
> 
> 赞同：3
> 
> 时间：2013-01-27T15:15:44.727
> 
> 标签：git, assembla

我将从事一个由 assembla / git 托管的项目。
当我在我的 Visual Studio git 扩展插件“Git”>“克隆存储库”中进行操作时，
我需要选择“存储库类型” - 有什么区别？这是我创建存储库时定义的吗？由于我没有创建我只使用它，我不知道该选择什么。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:22:33.783

公共 git 仓库和个人 git 仓库的区别：

公共 = 任何人都可以看到此存储库。你选择谁可以提交。

私人（我认为您的意思是个人）=您选择谁可以查看并提交到此存储库。

# ruby-on-rails - 如何在一行内编写此“if 语句”？

> ID：14548794
> 
> 赞同：1
> 
> 时间：2013-01-27T15:16:01.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有可能的方法在一行中编写代码？类似于 <%= "A" if ........>

```
<% if @box == 'inbox' && m.is_read?(current_user) %>
A
<% else %>
B
<% end %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T15:18:34.553

您需要一个三元运算符——在 Ruby 中也称为“条件”运算符，如果前面的表达式`?`为真，则返回“A”，如果表达式为假，则返回“B”。

```
<%= (@box == 'inbox' && m.is_read?(current_user)) ? "A" : "B" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:20:23.853

三元运算符可以解决问题（有关如何使用它，请参阅其他答案），但我强烈建议您不要在这里使用它。使用三元运算符，您将减少代码，但您的可读性会因此受到很大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T19:38:10.057

在视图层中，三元组只会让您头疼；逻辑应该在一个助手中，例如，

```
def inbox_msg_read?(box, msg)
  box == 'inbox' && msg.is_read?(current_user)
end

<%= inbox_msg_read?(@box, msg) ? 'A' : 'B' %> 
```

根据这里实际发生的情况，我也可能将“A”/“B”部分移动到帮助器中。

我会将“收件箱”逻辑移动到辅助方法或邮箱对象中：

```
box.inbox? && msg.is_read?(current_user) 
```

这将收件箱逻辑隔离到单个位置（例如，不分散在任意数量的视图文件中），如果您需要其他框的附加逻辑（例如，“垃圾”或其他东西），则创建一个焦点。

它还提供了一个提示，即如果有任何数量的知名盒子（例如，垃圾箱、已发送、今天等），元编程可能有助于识别盒子。这一切都取决于正在发生的事情。

像这样在视图层中分散逻辑会使重构变得不那么明显，并在逻辑/输出需要更改时强制进行多个更改点。

# php - 从 PHP Web 服务自动更新应用程序中的内容

> ID：14548797
> 
> 赞同：0
> 
> 时间：2013-01-27T15:16:34.597
> 
> 标签：php, mysql, cordova, automation

我正在使用 PhoneGap 制作一个应用程序，其中数据库中有一个产品目录。此内容（图片 URL、描述、价格等）可能会每周更新一次，因此我想要一种方法让应用程序检查数据库并查看哪些产品是最新的。这个想法是，当手机有网络连接时，应用程序应该更新自己，所以目录是最新的。

我正在考虑为每个产品设置一个时间戳字段，该字段会在产品更改时更新，并且当用户登录应用程序时，它会检查该产品的存储时间戳并将其与数据库进行检查。如果服务器数据库比应用程序上的数据库更新，它将下载该产品的信息。

这是使信息保持最新的有效方式，还是有更有效的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:24:53.950

使用 jquery 从 API-rest（在服务器中）获取产品并放入本地数据库（如 localStorage、indexedDB 或 SQL-HTML5）怎么样？

然后使用数据库中的项目。

# java - 如何使 JScrollPane/JTextPane “智能”

> ID：14548801
> 
> 赞同：4
> 
> 时间：2013-01-27T15:16:57.947
> 
> 标签：java, swing, automation, jscrollpane, jtextpane

所以，我有一种情况，当满足某种逻辑情况时，滚动条需要自动滚动。

在我的情况下，我写了几行`JTextPane`，并且我突出显示了单词。所以，当到达点时，文本不可见，滚动条应该自动向下滚动。

很少有屏幕截图可以清楚地说明：

![在此处输入图像描述](../Images/e0b5c151b00971ebe531e298c41da214.png)

正如你所看到的，现在屏幕被高亮显示的文本填满了。所以此时滚动条应该向下移动，如下所示：

![在此处输入图像描述](../Images/41680222a7e0ac55b171cf08e6f86f30.png)

我对使用哪个逻辑一无所知，因为：

1）`.txt` 文件的行数会改变。

2）单词突出显示的时间可能会改变。

有什么逻辑可以克服这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T15:32:41.240

您可以简单地使用该`JTextComponent.modelToView(int)`方法找出文本中给定位置的位置，然后使用`scrollRectToVisible`.

小演示示例：

```
import java.awt.Color;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class TestKaraoke {

    private JFrame frame;
    private Timer timer;
    private StyledDocument doc;
    private JTextPane textpane;

    private int index = 0;

    public void startColoring() {
        ActionListener actionListener = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                highlightNextWord();
            }
        };
        timer = new Timer(50, actionListener);
        timer.setInitialDelay(0);
        timer.start();
    }

    protected void highlightNextWord() {
        boolean reachedEnd = false;
        SimpleAttributeSet sas = new SimpleAttributeSet();
        StyleConstants.setForeground(sas, Color.RED);
        int end = textpane.getText().indexOf(' ', index + 1);
        if (end == -1) {
            end = textpane.getDocument().getLength();
            reachedEnd = true;
        }
        ((StyledDocument) textpane.getDocument()).setCharacterAttributes(index, end - index, sas, true);
        try {
            Rectangle modelToView = textpane.modelToView(end);
            textpane.scrollRectToVisible(modelToView);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        index = end;
        if (reachedEnd) {
            timer.stop();
        }
    }

    public void initUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        doc = new DefaultStyledDocument();
        textpane = new JTextPane(doc);
        textpane.setText(TEXT);
        frame.add(new JScrollPane(textpane));
        frame.setSize(300, 300);
        frame.setVisible(true);
    }

    public static void main(String args[]) throws InterruptedException, InvocationTargetException {
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                TestKaraoke karaoke = new TestKaraoke();
                karaoke.initUI();
                karaoke.startColoring();
            }
        });
    }

    private static final String TEXT = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras at vulputate nisi. Phasellus varius massa turpis, eget commodo quam. Vivamus vel varius neque. Cras vestibulum aliquet arcu, sed fringilla elit pretium vel. Nunc nibh tellus, dignissim vitae scelerisque vulputate, hendrerit eu arcu. Aenean tincidunt, sem ut sollicitudin blandit, lorem nulla placerat turpis, condimentum mollis felis risus sed leo. Proin a nisi tristique nisi convallis faucibus vitae ut nulla. Sed aliquam, dolor id lobortis pellentesque, nisl mi sagittis mi, sed bibendum arcu arcu vitae odio. Nunc dapibus, tellus non convallis convallis, augue ipsum lobortis massa, sit amet porta lectus augue non lorem. Nam hendrerit vestibulum risus quis accumsan. Mauris ac eros ipsum. Curabitur et odio nulla, sed egestas lorem. Integer sed pretium diam. Vivamus ullamcorper tortor eu ante iaculis non ullamcorper ante consectetur. Sed sit amet lacus enim, et faucibus dui. Vestibulum tempor luctus lorem non lacinia.\r\n"
            + "\r\n"
            + "Vivamus euismod interdum iaculis. Cras diam odio, venenatis sed hendrerit eget, hendrerit ac dolor. Integer vulputate, lorem et auctor hendrerit, elit elit mattis felis, ut mollis velit est quis quam. Vestibulum vel eros mauris, at ultrices tellus. Proin ac lectus lectus. Morbi vehicula ullamcorper tortor a adipiscing. Ut turpis elit, consectetur id vehicula sed, tempor quis augue. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Maecenas est enim, pulvinar id aliquam convallis, vehicula non enim.\r\n"
            + "\r\n"
            + "Praesent porttitor eros eros, sed mattis ante. Maecenas lobortis condimentum ante, ac condimentum nibh malesuada nec. Mauris luctus facilisis magna non elementum. Vestibulum nibh ante, fringilla ut hendrerit ac, dignissim tempus felis. Duis odio orci, ultrices quis blandit vel, feugiat eu orci. Donec sit amet cursus nulla. Vivamus pharetra posuere tellus, venenatis sollicitudin velit dignissim et. Fusce commodo enim non dui malesuada at malesuada neque semper. Sed dui lacus, auctor vel viverra in, molestie sed leo.\r\n"
            + "\r\n"
            + "Suspendisse potenti. In ipsum mi, scelerisque pellentesque rutrum quis, pretium interdum velit. Suspendisse euismod, velit vel tristique semper, odio mauris gravida eros, mollis dictum massa justo ullamcorper tortor. Donec ut dolor felis. Duis dapibus condimentum orci, vel tempor orci egestas ac. Proin eleifend facilisis ipsum, sit amet volutpat neque suscipit ut. Phasellus lobortis tempor nulla, a tristique neque vulputate in. Integer arcu elit, pharetra in ullamcorper in, semper eu libero. Nunc ac felis iaculis eros placerat viverra. Praesent in nibh nibh, vel elementum nisi. Morbi posuere elementum est, at vulputate est interdum in.\r\n"
            + "\r\n"
            + "Proin nisi libero, rhoncus eget bibendum et, aliquet eget nisi. Sed bibendum, ante eu adipiscing mattis, turpis lacus mollis odio, id iaculis mauris felis eu justo. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Duis lobortis placerat odio, sed commodo sapien vulputate volutpat. Vestibulum pretium faucibus justo, ac rutrum risus vulputate ut. Nulla interdum malesuada tortor in cursus. Mauris libero neque, sagittis ornare tristique a, pretium sed eros. Nulla consectetur feugiat nunc eget tincidunt. Integer luctus, mi non euismod congue, nibh risus posuere magna, eget mattis orci elit ut sapien. Nam eu imperdiet sapien. Etiam non commodo turpis. ";
} 
```

（为了演示的目的，我把屏幕做得很小，阅读器一定非常好;-)）

# java - 自动缩放 ImageIcon 到标签大小

> ID：14548808
> 
> 赞同：21
> 
> 时间：2013-01-27T15:18:01.770
> 
> 标签：java, swing, size, imageicon

在我的 JFrame 上，我使用以下代码在 Panel 上显示图像：

```
 ImageIcon img= new ImageIcon("res.png");
  jLabel.setIcon(img); 
```

我想“自动调整”标签中的图片。确实，有时图像大小只有几个像素，有时甚至更多。

有没有办法设置标签的大小，然后自动调整标签中的图像大小？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-27T22:21:39.770

这是一个棘手的问题。您强调了您使用 a`JLabel`来显示图像的事实，这是标准的做事方式，但是，`JLabel`它是一个复杂的小野兽，具有文本、图标和文本对齐和定位。

如果您不需要所有额外的功能，我会简单地为自己创建一个能够绘制缩放图像的自定义组件......

下一个问题是，你想如何缩放图像？你想保持图像的纵横比吗？您想将图像“适合”还是“填充”到可用空间。

@大卫是对的。您应该尽可能避免`Image#getScaledInstance`，因为它不是最快的，但更重要的是，通常它也不能提供最高质量。

## 适合与填充

![在此处输入图像描述](../Images/8ba20768fac5e841e209112f7c7f032b.png)

下面的例子相当简单（并且从我的代码库中大量借用，所以它可能也有点令人费解；））。它可以从后台缩放线程中使用，但我会根据原始图像的潜在大小做出决定。

```
public class ResizableImage {

    public static void main(String[] args) {
        new ResizableImage();
    }

    public ResizableImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                try {
                    BufferedImage image = ImageIO.read(new File("/path/to/your/image"));

                    JFrame frame = new JFrame("Test");
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new ScalablePane(image));
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
            }
        });
    }

    public class ScalablePane extends JPanel {

        private Image master;
        private boolean toFit;
        private Image scaled;

        public ScalablePane(Image master) {
            this(master, true);
        }

        public ScalablePane(Image master, boolean toFit) {
            this.master = master;
            setToFit(toFit);
        }

        @Override
        public Dimension getPreferredSize() {
            return master == null ? super.getPreferredSize() : new Dimension(master.getWidth(this), master.getHeight(this));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Image toDraw = null;
            if (scaled != null) {
                toDraw = scaled;
            } else if (master != null) {
                toDraw = master;
            }

            if (toDraw != null) {
                int x = (getWidth() - toDraw.getWidth(this)) / 2;
                int y = (getHeight() - toDraw.getHeight(this)) / 2;
                g.drawImage(toDraw, x, y, this);
            }
        }

        @Override
        public void invalidate() {
            generateScaledInstance();
            super.invalidate();
        }

        public boolean isToFit() {
            return toFit;
        }

        public void setToFit(boolean value) {
            if (value != toFit) {
                toFit = value;
                invalidate();
            }
        }

        protected void generateScaledInstance() {
            scaled = null;
            if (isToFit()) {
                scaled = getScaledInstanceToFit(master, getSize());
            } else {
                scaled = getScaledInstanceToFill(master, getSize());
            }
        }

        protected BufferedImage toBufferedImage(Image master) {
            Dimension masterSize = new Dimension(master.getWidth(this), master.getHeight(this));
            BufferedImage image = createCompatibleImage(masterSize);
            Graphics2D g2d = image.createGraphics();
            g2d.drawImage(master, 0, 0, this);
            g2d.dispose();
            return image;
        }

        public Image getScaledInstanceToFit(Image master, Dimension size) {
            Dimension masterSize = new Dimension(master.getWidth(this), master.getHeight(this));
            return getScaledInstance(
                            toBufferedImage(master),
                            getScaleFactorToFit(masterSize, size),
                            RenderingHints.VALUE_INTERPOLATION_BILINEAR,
                            true);
        }

        public Image getScaledInstanceToFill(Image master, Dimension size) {
            Dimension masterSize = new Dimension(master.getWidth(this), master.getHeight(this));
            return getScaledInstance(
                            toBufferedImage(master),
                            getScaleFactorToFill(masterSize, size),
                            RenderingHints.VALUE_INTERPOLATION_BILINEAR,
                            true);
        }

        public Dimension getSizeToFit(Dimension original, Dimension toFit) {
            double factor = getScaleFactorToFit(original, toFit);
            Dimension size = new Dimension(original);
            size.width *= factor;
            size.height *= factor;
            return size;
        }

        public Dimension getSizeToFill(Dimension original, Dimension toFit) {
            double factor = getScaleFactorToFill(original, toFit);
            Dimension size = new Dimension(original);
            size.width *= factor;
            size.height *= factor;
            return size;
        }

        public double getScaleFactor(int iMasterSize, int iTargetSize) {
            return (double) iTargetSize / (double) iMasterSize;
        }

        public double getScaleFactorToFit(Dimension original, Dimension toFit) {
            double dScale = 1d;
            if (original != null && toFit != null) {
                double dScaleWidth = getScaleFactor(original.width, toFit.width);
                double dScaleHeight = getScaleFactor(original.height, toFit.height);
                dScale = Math.min(dScaleHeight, dScaleWidth);
            }
            return dScale;
        }

        public double getScaleFactorToFill(Dimension masterSize, Dimension targetSize) {
            double dScaleWidth = getScaleFactor(masterSize.width, targetSize.width);
            double dScaleHeight = getScaleFactor(masterSize.height, targetSize.height);

            return Math.max(dScaleHeight, dScaleWidth);
        }

        public BufferedImage createCompatibleImage(Dimension size) {
            return createCompatibleImage(size.width, size.height);
        }

        public BufferedImage createCompatibleImage(int width, int height) {
            GraphicsConfiguration gc = getGraphicsConfiguration();
            if (gc == null) {
                gc = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
            }

            BufferedImage image = gc.createCompatibleImage(width, height, Transparency.TRANSLUCENT);
            image.coerceData(true);
            return image;
        }

        protected BufferedImage getScaledInstance(BufferedImage img, double dScaleFactor, Object hint, boolean bHighQuality) {
            BufferedImage imgScale = img;
            int iImageWidth = (int) Math.round(img.getWidth() * dScaleFactor);
            int iImageHeight = (int) Math.round(img.getHeight() * dScaleFactor);

            if (dScaleFactor <= 1.0d) {
                imgScale = getScaledDownInstance(img, iImageWidth, iImageHeight, hint, bHighQuality);
            } else {
                imgScale = getScaledUpInstance(img, iImageWidth, iImageHeight, hint, bHighQuality);
            }

            return imgScale;
        }

        protected BufferedImage getScaledDownInstance(BufferedImage img,
                        int targetWidth,
                        int targetHeight,
                        Object hint,
                        boolean higherQuality) {

            int type = (img.getTransparency() == Transparency.OPAQUE)
                            ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;

            BufferedImage ret = (BufferedImage) img;

            if (targetHeight > 0 || targetWidth > 0) {
                int w, h;
                if (higherQuality) {
                    // Use multi-step technique: start with original size, then
                    // scale down in multiple passes with drawImage()
                    // until the target size is reached
                    w = img.getWidth();
                    h = img.getHeight();
                } else {
                    // Use one-step technique: scale directly from original
                    // size to target size with a single drawImage() call
                    w = targetWidth;
                    h = targetHeight;
                }

                do {
                    if (higherQuality && w > targetWidth) {
                        w /= 2;
                        if (w < targetWidth) {
                            w = targetWidth;
                        }
                    }
                    if (higherQuality && h > targetHeight) {
                        h /= 2;
                        if (h < targetHeight) {
                            h = targetHeight;
                        }
                    }

                    BufferedImage tmp = new BufferedImage(Math.max(w, 1), Math.max(h, 1), type);
                    Graphics2D g2 = tmp.createGraphics();
                    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);
                    g2.drawImage(ret, 0, 0, w, h, null);
                    g2.dispose();

                    ret = tmp;
                } while (w != targetWidth || h != targetHeight);
            } else {
                ret = new BufferedImage(1, 1, type);
            }

            return ret;
        }

        protected BufferedImage getScaledUpInstance(BufferedImage img,
                        int targetWidth,
                        int targetHeight,
                        Object hint,
                        boolean higherQuality) {

            int type = BufferedImage.TYPE_INT_ARGB;

            BufferedImage ret = (BufferedImage) img;
            int w, h;
            if (higherQuality) {
                // Use multi-step technique: start with original size, then
                // scale down in multiple passes with drawImage()
                // until the target size is reached
                w = img.getWidth();
                h = img.getHeight();
            } else {
                // Use one-step technique: scale directly from original
                // size to target size with a single drawImage() call
                w = targetWidth;
                h = targetHeight;
            }

            do {
                if (higherQuality && w < targetWidth) {
                    w *= 2;
                    if (w > targetWidth) {
                        w = targetWidth;
                    }
                }

                if (higherQuality && h < targetHeight) {
                    h *= 2;
                    if (h > targetHeight) {
                        h = targetHeight;
                    }
                }

                BufferedImage tmp = new BufferedImage(w, h, type);
                Graphics2D g2 = tmp.createGraphics();
                g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);
                g2.drawImage(ret, 0, 0, w, h, null);
                g2.dispose();

                ret = tmp;
                tmp = null;
            } while (w != targetWidth || h != targetHeight);
            return ret;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-27T17:36:42.210

> 有没有办法设置标签的大小

覆盖并返回你想要的 s，但是因为 a`getPreferredSize()`会根据它的内容调整自己的大小，你只需要调整你添加到.`JLabel``Dimension``JLabel``JLabel`

> 然后自动调整标签中的图像大小？

您将必须根据所需的宽度和高度调整图像的大小（而不是简单地将其添加到`JLabel`和`JLabel`将大小以适合图像）。

我不建议`Image.getScaledInstance(..)`在这里阅读更多信息：

*   [Image.getScaledInstance() 的危害](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html) 主要概述的问题是：

> `Image.getScaledInstance()`不返回完成的缩放图像。当使用图像像素时，它会将大部分缩放工作留给以后使用。

这是我一直用来规避以下问题的自定义方法`getScaledInstance`：

```
public static BufferedImage resize(BufferedImage image, int width, int height) {
    BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = (Graphics2D) bi.createGraphics();
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
    g2d.drawImage(image, 0, 0, width, height, null);
    g2d.dispose();
    return bi;
} 
```

您可以通过以下方式创建任意大小的图像：

```
BufferedImage image=ImageIO.read(..);
BufferedImage resizedImage=resize(image,100,100);//resize the image to 100x100 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-27T16:47:39.123

也可以通过覆盖的`paintComponent`方法`JLabel`和绘制`image`具有宽度和高度的方法来完成`JLabel`。如果您希望在调整父容器大小时调整图像`container`大小，您可以在每次调整父容器大小时应用父容器`WindowListener`和实例。这是演示：`repaint``Jlabel`

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.ImageIcon;
import javax.swing.SwingUtilities;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

public class  LabelDemo extends JFrame
{
    ImageIcon imageIcon;
    MyJLabel jLabel ;
    public LabelDemo ()
    {
        super("JLabel Demo");
    }
    public void createAndShowGUI()
    {
        imageIcon = new ImageIcon("apple.png");
        jLabel = new MyJLabel(imageIcon);
        getContentPane().add(jLabel);
        addWindowListener( new WindowAdapter()
        {
            public void windowResized(WindowEvent evt)
            {
                jLabel.repaint();
            }
        });
        setSize(300,100);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        jLabel.repaint();
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                LabelDemo demo = new LabelDemo();
                demo.createAndShowGUI();
            }
        });
    }
}
class MyJLabel extends JLabel
{
    ImageIcon imageIcon;
    public MyJLabel(ImageIcon icon)
    {
        super();
        this.imageIcon = icon;
    }
    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(imageIcon.getImage(),0,0,getWidth(),getHeight(),this);
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-29T16:16:01.820

您可以使用[拉伸图标](https://tips4java.wordpress.com/?s=stretch+icon)。

图像将自动调整大小以填充标签可用的空间。您可以控制图像是按比例缩放还是完全填充该区域。

使用`StretchIcon`比其他链接中建议的自定义绘画更灵活，因为您可以从支持图标的任何组件的自动调整大小中受益。

StretchIcon.java：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Insets;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.awt.image.ImageObserver;
import java.net.URL;

import javax.swing.ImageIcon;

/**
 * An <CODE>Icon</CODE> that scales its image to fill the component area, excluding any border or insets, optionally maintaining the image's
 * aspect ratio by padding and centering the scaled image horizontally or vertically.
 * <P>
 * The class is a drop-in replacement for <CODE>ImageIcon</CODE>, except that the no-argument constructor is not supported.
 * <P>
 * As the size of the Icon is determined by the size of the component in which it is displayed, <CODE>StretchIcon</CODE> must only be used
 * in conjunction with a component and layout that does not depend on the size of the component's Icon.
 *
 * @version 1.1 01/15/2016
 * @author Darryl
 */
public class StretchIcon extends ImageIcon
{
    /**
     *
     */
    private static final long serialVersionUID = 1L;
    /**
     * Determines whether the aspect ratio of the image is maintained. Set to <code>false</code> to allow th image to distort to fill the
     * component.
     */
    protected boolean         proportionate    = true;

    /**
     * Creates a <CODE>StretchIcon</CODE> from an array of bytes.
     *
     * @param imageData an array of pixels in an image format supported by the AWT Toolkit, such as GIF, JPEG, or (as of 1.3) PNG
     *
     * @see ImageIcon#ImageIcon(byte[])
     */
    public StretchIcon(byte[] imageData)
    {
        super(imageData);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from an array of bytes with the specified behavior.
     *
     * @param imageData an array of pixels in an image format supported by the AWT Toolkit, such as GIF, JPEG, or (as of 1.3) PNG
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(byte[])
     */
    public StretchIcon(byte[] imageData, boolean proportionate)
    {
        super(imageData);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from an array of bytes.
     *
     * @param imageData an array of pixels in an image format supported by the AWT Toolkit, such as GIF, JPEG, or (as of 1.3) PNG
     * @param description a brief textual description of the image
     *
     * @see ImageIcon#ImageIcon(byte[], java.lang.String)
     */
    public StretchIcon(byte[] imageData, String description)
    {
        super(imageData, description);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from an array of bytes with the specified behavior.
     *
     * @see ImageIcon#ImageIcon(byte[])
     * @param imageData an array of pixels in an image format supported by the AWT Toolkit, such as GIF, JPEG, or (as of 1.3) PNG
     * @param description a brief textual description of the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(byte[], java.lang.String)
     */
    public StretchIcon(byte[] imageData, String description, boolean proportionate)
    {
        super(imageData, description);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the image.
     *
     * @param image the image
     *
     * @see ImageIcon#ImageIcon(java.awt.Image)
     */
    public StretchIcon(Image image)
    {
        super(image);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the image with the specified behavior.
     *
     * @param image the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.awt.Image)
     */
    public StretchIcon(Image image, boolean proportionate)
    {
        super(image);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the image.
     *
     * @param image the image
     * @param description a brief textual description of the image
     *
     * @see ImageIcon#ImageIcon(java.awt.Image, java.lang.String)
     */
    public StretchIcon(Image image, String description)
    {
        super(image, description);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the image with the specified behavior.
     *
     * @param image the image
     * @param description a brief textual description of the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.awt.Image, java.lang.String)
     */
    public StretchIcon(Image image, String description, boolean proportionate)
    {
        super(image, description);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified file.
     *
     * @param filename a String specifying a filename or path
     *
     * @see ImageIcon#ImageIcon(java.lang.String)
     */
    public StretchIcon(String filename)
    {
        super(filename);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified file with the specified behavior.
     *
     * @param filename a String specifying a filename or path
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.lang.String)
     */
    public StretchIcon(String filename, boolean proportionate)
    {
        super(filename);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified file.
     *
     * @param filename a String specifying a filename or path
     * @param description a brief textual description of the image
     *
     * @see ImageIcon#ImageIcon(java.lang.String, java.lang.String)
     */
    public StretchIcon(String filename, String description)
    {
        super(filename, description);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified file with the specified behavior.
     *
     * @param filename a String specifying a filename or path
     * @param description a brief textual description of the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.awt.Image, java.lang.String)
     */
    public StretchIcon(String filename, String description, boolean proportionate)
    {
        super(filename, description);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified URL.
     *
     * @param location the URL for the image
     *
     * @see ImageIcon#ImageIcon(java.net.URL)
     */
    public StretchIcon(URL location)
    {
        super(location);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified URL with the specified behavior.
     *
     * @param location the URL for the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.net.URL)
     */
    public StretchIcon(URL location, boolean proportionate)
    {
        super(location);
        this.proportionate = proportionate;
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified URL.
     *
     * @param location the URL for the image
     * @param description a brief textual description of the image
     *
     * @see ImageIcon#ImageIcon(java.net.URL, java.lang.String)
     */
    public StretchIcon(URL location, String description)
    {
        super(location, description);
    }

    /**
     * Creates a <CODE>StretchIcon</CODE> from the specified URL with the specified behavior.
     *
     * @param location the URL for the image
     * @param description a brief textual description of the image
     * @param proportionate <code>true</code> to retain the image's aspect ratio, <code>false</code> to allow distortion of the image to
     *            fill the component.
     *
     * @see ImageIcon#ImageIcon(java.net.URL, java.lang.String)
     */
    public StretchIcon(URL location, String description, boolean proportionate)
    {
        super(location, description);
        this.proportionate = proportionate;
    }

    /**
     * Paints the icon. The image is reduced or magnified to fit the component to which it is painted.
     * <P>
     * If the proportion has not been specified, or has been specified as <code>true</code>, the aspect ratio of the image will be preserved
     * by padding and centering the image horizontally or vertically. Otherwise the image may be distorted to fill the component it is
     * painted to.
     * <P>
     * If this icon has no image observer,this method uses the <code>c</code> component as the observer.
     *
     * @param c the component to which the Icon is painted. This is used as the observer if this icon has no image observer
     * @param g the graphics context
     * @param x not used.
     * @param y not used.
     *
     * @see ImageIcon#paintIcon(java.awt.Component, java.awt.Graphics, int, int)
     */
    @Override
    public synchronized void paintIcon(Component c, Graphics g, int x, int y)
    {
        Image image = getImage();
        if (image == null)
        {
            return;
        }
        Insets insets = ((Container) c).getInsets();
        x = insets.left;
        y = insets.top;

        int w = c.getWidth() - x - insets.right;
        int h = c.getHeight() - y - insets.bottom;

        if (proportionate)
        {
            int iw = image.getWidth(c);
            int ih = image.getHeight(c);

            if ((iw * h) < (ih * w))
            {
                iw = (h * iw) / ih;
                x += (w - iw) / 2;
                w = iw;
            }
            else
            {
                ih = (w * ih) / iw;
                y += (h - ih) / 2;
                h = ih;
            }
        }
        ImageObserver io = getImageObserver();

        /*
         * Added this code to generate nicer looking results when scaling. - bspkrs
         * BEGIN CHANGES
         */
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_4BYTE_ABGR);
        Graphics2D g2d = bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, w, h, io == null ? c : io);
        g2d.dispose();
        /*
         * END CHANGES
         */

        g.drawImage(bi, x, y, w, h, io == null ? c : io);
    }

    /**
     * Overridden to return 0\. The size of this Icon is determined by the size of the component.
     *
     * @return 0
     */
    @Override
    public int getIconWidth()
    {
        return 0;
    }

    /**
     * Overridden to return 0\. The size of this Icon is determined by the size of the component.
     *
     * @return 0
     */
    @Override
    public int getIconHeight()
    {
        return 0;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T14:01:31.210

试试这个功能：

```
public static BufferedImage resize(BufferedImage image, int width, int height) {
    BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = (Graphics2D) bi.createGraphics();
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
    g2d.drawImage(image, 0, 0, width, height, null);
    g2d.dispose();
    return bi;
}

BufferedImage image1=ImageIO.read(url.openStream());
     BufferedImage resizedImage=resize(image,100,100);
     System.out.println("Load image into frame...");
      icon=new ImageIcon(resizedImage); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-28T12:17:34.533

```
private Image fitimage(Image img, int w, int h) {
    int width = img.getWidth(this);
    int height = img.getHeight(this);
    BufferedImage resizedimage;

    if (width > w && height > h) {
        resizedimage = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2 = resizedimage.createGraphics();
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(img, 0, 0, w, h, null);
        g2.dispose();
    } else {
        resizedimage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2 = resizedimage.createGraphics();
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(img, 0, 0, width, height, null);
        g2.dispose();
    }
    return resizedimage;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-19T05:52:22.780

easywayprogramming.com 如何在java中调整imageicon的大小

当我们将图像图标应用于按钮、标签或面板等任何组件时，由于该图像的大小，它无法正确应用。我们可以通过两种方式调整该图像图标的大小。

1.  第一种方式：Image img = myIcon2.getImage(); 图像 newimg = img.getScaledInstance(230, 310, java.awt.Image.SCALE_SMOOTH);
    newIcon = 新的 ImageIcon(newimg);

2.  第二种方式：

    图片 img = myIcon2.getImage(); BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    newIcon = 新的 ImageIcon(bi);

尝试以下链接easywayprogramming.blogspot.in：easywayprogramming.blogspot.in [ho以在java中调整图像图标的大小](http://easywayprogramming.blogspot.in/2012/06/how-to-resize-imageicon-in-java.html)

# sql - 如果存在 ({sql-statement}) 条件构造，与此 SQL Server 对应的 postgreSQL 9.2 是什么

> ID：14548809
> 
> 赞同：0
> 
> 时间：2013-01-27T15:18:24.087
> 
> 标签：sql, plpgsql, conditional-statements, postgresql-9.2

我在 SQL Server 的存储过程中有这个：

```
 if not exists
        (my select statement)
            insert T
               (a, b, c)
            values
               (v_a, v_b, v_c)      -- arguments passed to the function

      select a,b,c from T where...;    -- return the row to the client after inserting it 
```

postgreSQL 是否与该`if exists ( {select-statement} )`构造对应？plpgsql 编译器起初告诉我缺少“THEN”，但是当我更正`if ... then`语法时：

```
 create function foo(v_a int, v_b int, v_c int)
     returns TABLE (a int, b int, c int)
     as $body$
     begin
        if not exists
          (select id from T where ...) then
           insert into T
             (a, b, c)
           values
             (v_a, v_b, v_c);

       return QUERY
       select a,b,c from T where ...   ;

     end
     $body$
     LANGUAGE 'plpgsql' 
```

编译以：

```
 ERROR:  syntax error at end of input
       LINE 52: $body$ LANGUAGE 'plpgsql'
       .........^ 
```

所以我假设上游有一些错误，但我没有看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:29:13.670

你的`IF`条款不完整。它必须由相应的`END IF`语句关闭。

[检查有关条件](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-CONDITIONALS)的文档。

# google-docs - Google 文档：是否可以替换共享文件？

> ID：14548810
> 
> 赞同：0
> 
> 时间：2013-01-27T15:18:28.460
> 
> 标签：google-docs, stata

我想让学生`.do`通过在 Google Docs 上与我分享一些 Stata ( ) 代码给我。

**是否可以用更新版本替换共享？**

我在“文件”菜单中看不到任何执行此操作的选项，只是重命名和编辑文件描述。

![在此处输入图像描述](../Images/486d1d9204cb823333d15e7fbe714a8d.png)

Google Docs 可以很好地共享和更正论文，但我发现很难共享和更正其他任何内容。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:30:04.330

我相信 gmail 现在可以让您通过 Google Drive 将更新的文件附加/共享到电子邮件中，并且它始终保持可用的最新版本。因此，您可以简单地在桌面上更新您的 .do 文件，将更新的版本保存在您的 Google Drive 上，您的学生应该会得到它们。

[http://gmailblog.blogspot.com/2012/11/gmail-and-drive-new-way-to-send-files.html](http://gmailblog.blogspot.com/2012/11/gmail-and-drive-new-way-to-send-files.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:48:31.737

您可以上传同一文件的多个版本。所有版本都将在以后供审查。要上传新版本，只需单击管理修订（从您在图像中的位置），就会出现一个对话框。单击“上传新修订”并导航到您更新的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:35:03.307

您也可以考虑使用 Google Code（[http://code.google.com](http://code.google.com)；如果您有 gmail 帐户，那么您也有 Code 帐户，或者至少您可以从主 Google 帐户透明地创建一个），并使用您的使用标准代码共享、开发和维护工具（如 Mercurial 及其各种接口）编写代码。我已经非常专业地开发了 Stata 代码，相信我，这是一个比 Google Docs 更好的工具（SO 上任何其他真正的程序员都会证实这一点）。

# c++ - 为什么代码打印所有第一个索引？

> ID：14548814
> 
> 赞同：0
> 
> 时间：2013-01-27T15:18:43.540
> 
> 标签：c++, string, file

我正在尝试编写一个将文本文件中的单词转换为猪拉丁语的程序。我得到了将文本文件的单词分开的代码，但我现在在尝试整理它们时遇到了麻烦。当我运行此代码时，它总是打印所有单词的第一个索引，而不是与 if 语句匹配的单词

```
void wordpro(string sent)
{
  string word;

  istringstream iss(sent, istringstream::in);
  while (iss>> word)
  if (word[0] == 'a'||'e'||'i'||'o'||'u'||'A'||'E'||'I'||'O'||'U')
  {
    cout<< word[0] <<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T15:19:48.323

```
if (word[0] == 'a'||'e'||'i'||'o'||'u'||'A'||'E'||'I'||'O'||'U') 
```

这不是`||`C++ 中的工作方式。但这并不**意味着**上面会导致编译错误。不，从编译器的角度来看这是正确的；唯一的问题是它没有做你*想做*的事！相反，条件将始终为`true`。这就是为什么它会打印代码中所有单词的第一个字符。

为了得到你想要的，你必须写成`||`：

```
if (word[0] == 'a'|| word[0] == 'e'|| word[0] ==  'i' || ... so on) 
```

也就是说，您必须分别比较每个字符。这肯定是令人恼火的。

* * *

C++11 已将您从这里拯救出来，因此您可以[`std::any_of`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)用作：

```
//C++11 only

std::string const v = "aeiouAEIOU";
if (std::any_of(v.begin(), v.end(), [](char c){ return word[0] == c;}) 
```

* * *

或者您可以[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)用作：

```
//C++03 and C++11 both

if ( std::find(v.begin(), v.end(), word[0]) != v.end() ) 
```

它比前一个短一点。此外，这也适用于 C++03！

* * *

或者您可以[`std::count`](http://en.cppreference.com/w/cpp/algorithm/count)用作：

```
//C++03 and C++11 both

if ( std::count(v.begin(), v.end(), word[0]) ) 
```

这甚至更短。

* * *

或者您可以[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)用作：

```
//C++03 and C++11 both

if ( v.find(word[0]) != std::string::npos) 
```

哪个是最短的！

* * *

阅读文档以了解他们每个人的真正作用，以及为什么它适用于您的案例：

*   [`std::any_of`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)
*   [`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)
*   [`std::count`](http://en.cppreference.com/w/cpp/algorithm/count)
*   [`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:26:22.647

上述使用很多的建议`word[0] == 'a' || word[0] == 'e' || ...`是正确的解决方案，以“修复”您编写的内容，它会按照您对单个 if 语句的期望进行。

你可以这样做：

```
 switch(word[0])
 {
    case 'a':
    case 'e':
    case 'i':
    ... /// you'll have to fill the rest in yourself. 
        cout << word[0]; 
        break; 
 } 
```

或者你可以使用老式的 C 风格`strchr`：

```
if (strchr("aeiouAEIOU", word[0]) != NULL)
{
    cout << word[0];
} 
```

可能还有六种其他解决方案。这一切都取决于你喜欢什么“风格”。我可能会选择交换机作为我的第一选择。

# python - django manager 获取任何一个对象

> ID：14548819
> 
> 赞同：1
> 
> 时间：2013-01-27T15:19:22.973
> 
> 标签：python, django, orm, django-models, one-to-many

在多一模型中，我只想从管理器获取一个对象（任何一个对象），该怎么做？

```
models.School.student_set.any_one() 
```

我在文档中没有找到任何这样的方法。现在我正在做类似的事情：

```
models.School.student_set.all()[0] 
```

我认为这是低效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:23:34.613

QuerySet 在您实际从中获取一些数据之前不会被评估，因此对结果进行切片`all()`实际上是有效的。

请参阅[QuerySets 上的文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)- “在您执行某些操作来评估查询集之前，实际上不会发生数据库活动。”。关于[限制 QuerySets](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)的文档也明确提到了您的情况。

如果您喜欢冒险，您可以通过查看`django.db.connection.queries`( [docs](https://docs.djangoproject.com/en/dev/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running) )自行验证

# java - JSP 文件抛出 ORA-12520

> ID：14548823
> 
> 赞同：0
> 
> 时间：2013-01-27T15:19:58.423
> 
> 标签：java, database, jsp, oracle10g, netbeans-6.9

以下代码将在单页加载中执行 160 次。在 10 到 15 次后，我得到以下异常： **[Oracle][ODBC][Ora]ORA-12520: TNS:listener could not find available handler for requested type of server**

代码是

```
 package ServletPkg;

import java.sql.*;
public class CheckSeat {

public boolean checkSeat(String seatNo,String showID)
{
    Statement stmt;
ResultSet rs;
Connection con;
boolean m=false;
String seat=seatNo;
String show=showID;
try
{

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
con=DriverManager.getConnection("jdbc:odbc:ob","Online_Booking","password");
   stmt = con.createStatement();
   rs = stmt.executeQuery("select * from booking_info where book_seat like '%"+seat+"%' and show_id = '"+show+"'");
   if(rs.next())
   {
       m=true;
       System.out.println("Seat Selected");
   }
   con.close();
 }

 catch(Exception e)
 {
    System.out.println(e.getMessage());
 }
    return m;
}
} 
```

我在 JSP 中使用此代码

# android - WiFi Direct 的替代方案

> ID：14548825
> 
> 赞同：4
> 
> 时间：2013-01-27T15:20:02.613
> 
> 标签：android, bluetooth, wifi, tethering

我正在尝试开发一个应用程序，当在两个或更多设备上运行时，它能够以高速相互发送数据。由于距离，蓝牙不是一种选择。我想使用 Direct WiFi，但它仅适用于 Android 4.0 及更高版本。即使我有 Android 4.0.3 的设备，它仍然无法运行。我认为这个版本中没有发现功能。我已经尝试寻找替代方案，例如[WiFi Tethering](http://code.google.com/p/android-wifi-tether/)，但该设备需要植根才能正常工作。此外，没有教程解释它是如何工作的。谁能给我另一种 WiFi Direct 替代方案，让我能够即时创建 AdHoc 网络？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-20T18:30:34.747

现在，您可以使用新的 NFC 通信，但是，如果您的手机没有 WiFi Direct……它就不会进行 NFC 通信。无论如何，我希望这可以帮助你。

# android - 上下文操作栏不会关闭大量项目

> ID：14548826
> 
> 赞同：2
> 
> 时间：2013-01-27T15:20:05.623
> 
> 标签：android, actionbarsherlock, contextual-action-bar

我`contextual action bar`的设置为`CHOICE_MODE_MULTIPLE_MODAL`. 选择菜单项后，我正在使用此代码自动关闭 CAB：

```
 public boolean onActionItemClicked(android.view.ActionMode mode, android.view.MenuItem item) {

        /* menu actions preformed here */

       mode.finish();
} 
```

现在，如果我在其中选择一两个项目，`ListView`它会很好地关闭，但如果我选择更多，通常超过十个，CAB 不会自动关闭。正在执行的操作是`onActionItemClicked`对每个选定项目的数据库调用，因此不确定这是否与此有关。`ActionbarSherlock`如果这有所作为，我也在使用。

# google-maps - jQuery .tablesorter() 未读取 Google 地图数据

> ID：14548829
> 
> 赞同：0
> 
> 时间：2013-01-27T15:20:56.867
> 
> 标签：google-maps, tablesorter

我正在使用谷歌地图来计算用户输入的地址和我们的商店位置之间的距离。读入此数据后，我想使用 jQuery .tablesorter() 对表从最近到最远的存储进行排序。但是，jQuery .tablesorter() 函数无法识别从 Google Maps 读取的数据。我尝试在这个线程上实现 setTimeout() 建议（[JQuery 表排序器附加数据不排序](https://stackoverflow.com/questions/4539616/jquery-tablesorter-appended-data-not-sorting)）和许多其他不起作用的修复。我了解发生了什么（DOM 在构建页面后无法识别写入页面的数据），但我不完全确定如何修复它。有任何想法吗？谢谢！

如果您想看看发生了什么，这里是测试页面的 URL：http: [//www.gregcklotz.com/Larry/Locations.php](http://www.gregcklotz.com/Larry/Locations.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:49:45.597

您只需在将所有距离数据添加到列中后更新表格：

```
for (i = 0; i < stores.length; i++)
{
    address = new google.maps.LatLng(lat, lng);
    coords = new google.maps.LatLng(stores[i].lat, stores[i].long);
    distance = (.621371192237334 * google.maps.geometry.spherical.computeDistanceBetween(address, coords)/1000).toFixed(1);
    $("tr.store"+stores[i].store+" td:last").text(parseInt(distance));
}
// update the table data
$("table").trigger("update");
map.setCenter(marker.getPosition()); 
```

# java - 拒绝 OS X 系统关机

> ID：14548835
> 
> 赞同：1
> 
> 时间：2013-01-27T15:21:45.660
> 
> 标签：java, macos, swt

我们有一个 SWT 应用程序，当它仍在运行时会导致挂起，并且用户在 OS X 上触发系统关闭。从应用程序菜单关闭应用程序可以正常工作。

我试图为实例注册一个`SWT.Close`监听器：`Display`

```
display.addListener(SWT.Close, new Listener() {
    @Override
    public void handleEvent(Event event) {
        if (!handleExitRequest()) {
            event.doit = false;
            event.type = SWT.None;
        }
    }
}); 
```

这神奇地解决了挂起，但不幸的是，退出时调用它是不可靠的。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:35:08.903

I have had mixed results listening for shutdown hooks on the main thread. Sometimes it works and sometimes it doesn't. What has worked for me in the past is to create a separate thread and register the shutdown hook to that.

```
public class MyGuiApplication
{
    public static void main( String[] args )
    {
        Runtime runtime = Runtime.getRuntime();
        Thread shutdownThread = new Thread(new Runnable()
        {
          @Override
          public void run()
          {
            // Put graceful shutdown code of the main application/thread here.
          }
        });

        runtime.addShutdownHook( shutdownThread );

        startMyApp();
    }
} 
```

Hopefully that might work for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:25:37.003

看看这[堂课](http://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/Application.html)和这[堂课](https://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/QuitHandler.html)。

> Application 类允许您将 Java 应用程序与本机 OS X 环境集成。...如果用户在您的应用程序中有未保存的更改，请取消关闭/注销。

你也可以看看以下问题：

[当应用程序是代理时，如何在 Mac OS X 中取消关机？](https://stackoverflow.com/questions/13344980/how-to-cancel-shutdown-in-mac-os-x-when-application-is-an-agent)

# java - ServerSocket 未绑定到端口

> ID：14548841
> 
> 赞同：0
> 
> 时间：2013-01-27T15:22:21.107
> 
> 标签：java, sockets, port

我有一个服务器代码尝试根据给定的端口范围获取空闲端口 -

```
private ServerSocket allocatePort() throws IOException {
    ServerSocket server = null;
    for (int i=0; i<serverPortRange; i++) {
        int port = serverPort.intValue()+i;
        try {
            server = new ServerSocket(port);
            break;
        } catch (IOException e) {
            log.debug(String.format("DCServer could not allocate port %s", port));
        }
    }
    if (server == null) {
        throw new IOException();
    }
    return server;
} 
```

当两台服务器在同一台机器上运行此代码时，它们会以某种方式获得相同的端口。我用netstat检查了它是否真的获得了，我在占用端口列表中没有看到它。

有任何想法吗？

谢谢， 奥菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:04:46.543

[正如文档所述](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#ServerSocket%28int%29)，Java 可以为您做这件事：

> 创建一个绑定到指定端口的服务器套接字。端口 0 在任何空闲端口上创建一个套接字。

# php - Fql 查询用户喜欢按顶级类别排序

> ID：14548842
> 
> 赞同：0
> 
> 时间：2013-01-27T15:22:27.840
> 
> 标签：php, facebook, facebook-fql

现在我只使用**/me/likes**让我的用户喜欢对象，这给了我这个：

```
{
  "data": [
    {
      "category": "Community", 
      "name": "Vectorealism Staff", 
      "id": "133776533453735", 
      "created_time": "2013-01-25T18:28:31+0000"
    }, 
    {
      "category": "Media/news/publishing", 
      "name": "Done! Srl", 
      "id": "282694311753605", 
      "created_time": "2013-01-18T21:55:39+0000"
    }, 
    {
      "category": "Community", 
      "name": "Different Solutions", 
      "id": "271915499553486", 
      "created_time": "2012-09-23T17:17:23+0000"
    }, 
    {
      "category": "Non-profit organization", 
      "name": "Indigeni Digitali", 
      "id": "295601322240", 
      "created_time": "2012-01-23T19:32:13+0000"
    }, 
    {
      "category": "Cause", 
      "name": "StartupVisa", 
      "id": "10150111295350167", 
      "created_time": "2011-12-11T19:12:51+0000"
    }, 
    {
      "category": "Business services", 
      "name": "H-FARM Ventures", 
      "id": "84021019572", 
      "created_time": "2011-04-02T02:30:26+0000"
    }, 
    {
      "category": "News/media website", 
      "name": "iSpazio", 
      "id": "179295038271", 
      "created_time": "2010-05-28T21:12:28+0000"
    }, 
    {
      "category": "Website", 
      "name": "Hot Pin Venezuela", 
      "id": "110628642307976", 
      "created_time": "2010-04-20T18:45:08+0000"
    }, 
    {
      "category": "Website", 
      "name": "El Chiguire Bipolar", 
      "id": "14588159235", 
      "created_time": "2008-11-07T02:27:12+0000"
    }
  ], 
  "paging": {
    "next": "https://graph.facebook.com/1125405534/likes?limit=5000&offset=5000&__after_id=14588159235"
  }
} 
```

在这种特殊情况下，用户的点赞数很少，但有时这个对象可能会变得非常大，我只需要根据对象上提及的次数计算出的前 5 个类别。与其检索完整的未排序对象，不如使用 FQL 来完成我需要的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:02:03.617

不，FQL 和 Graph API 都没有`count()`方法。为了得到你想要的，你需要得到完整的喜欢列表，并在你的最后进行计数。

# javascript - Rails + Masonry + Rails 错误显示更多

> ID：14548843
> 
> 赞同：0
> 
> 时间：2013-01-27T15:22:28.623
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

大家早上好，所以，我在 rails 和这两个插件方面遇到了问题，首先我不知道如何限制 #post 的数量以在 masonry 中存在，我没有找到这个，其他是我与 Masonry 和无限滚动不起作用，我这样做：

```
//= require jquery.masonry.min
//= require jquery.infinitescroll.min

jQuery(document).ready(function () {
    var $container = $('#content');
    $container.imagesLoaded(function () {
        $container.masonry({
            itemSelector:'#post',
            isAnimated:true,
            animationOptions:{
                duration:750,
                easing:'linear',
                queue:false
            }
        });
    });

    $container.infinitescroll({
            navSelector  : "#pag-nav",
            // selector for the paged navigation (it will be hidden)
            nextSelector : "#pag-nav a",
            // selector for the NEXT link (to page 2)
            itemSelector : "#content div#post"
            // selector for all items you'll retrieve

        },
        // trigger Masonry as a callback
        function( newElements ) {
            var $newElems = $( newElements );
            $container.masonry( 'appended', $newElems );
        }
    );

}) 
```

砌体工程但无限滚动不是，我在砌体页面中创建链接：

```
 <div id="pag-nav">
    <a href="#">Carregar mais</a>
  </div> 
```

我的导轨加载所有帖子

@posts = Post.all 我不知道我在哪里将帖子限制为 exibe 并且无限滚动不会出现，请有人可以帮助我非常重要，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:29:12.897

你需要使用分页。为此，您可以使用[kaminari](https://github.com/amatsuda/kaminari)

此外，您必须在每个页面上添加控制器元素，例如`20`：

```
@posts = Post.all.page(params[:page]).per(20) 
```

我建议将此宝石用于砌体：

[https://github.com/kristianmandrup/masonry-rails](https://github.com/kristianmandrup/masonry-rails)

它更完整，您可以保持资产有序。

问候

# android - 设置 Activity 标志和使用 ActionBarSherlock 时选择大小错误

> ID：14548850
> 
> 赞同：0
> 
> 时间：2013-01-27T15:23:07.873
> 
> 标签：android, android-actionbar, actionbarsherlock

我在操作栏上选择的徽标颜色有问题。如下面的截图所示，选择不是从操作栏的开头开始的，它实际上超出了图像本身。图像在分隔线后 2px 处结束，但选择范围比这更远。

我在清单中设置了带有 android:logo="@drawable/ic_action_menu" 的图标，并且我正在使用 ActionBarSherlock。我检查了我的自定义样式，找不到任何可能导致这种情况的东西。将主页图标显示为向上时，所有子活动都可以正常工作。

任何帮助将非常感激！

我的一些相关代码：

```
protected void actionBarSetup() {
    ActionBar ab = getSupportActionBar();
    ab.setDisplayShowTitleEnabled(true);
    ab.setHomeButtonEnabled(true);
}

  <activity
        android:name="MainActivityWrapper"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:icon="@drawable/ic_action_menu"            
        android:label="@string/title_main"
        android:launchMode="singleTop" >
    </activity> 
```

如果可能相关，我也在使用 SlidingMenu 库。

![在此处输入图像描述](../Images/6cd395458116e7174340a303a5ae0128.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:33:56.990

似乎代码的某些部分在此处为“向上箭头”（即绘制选择的部分）留出了一些空间，而代码的另一部分则没有（即绘制图像本身的部分）。你也可以发布 Activity 和 onCreate() 方法的清单部分吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:24:05.807

实际上自己为此找到了解决方案。

```
<style name="Theme.MyApp.NoUp" parent="@style/Theme.MyAppTheme">
    <item name="android:homeAsUpIndicator">@android:color/transparent</item>
</style> 
```

这将隐藏向上指示器，然后选择将按预期工作。然后我将此主题仅应用于具有菜单按钮的活动。

```
<activity
        android:name="MainActivityWrapper"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:theme="@style/Theme.MyApp.NoUp"
        android:icon="@drawable/title_icon"
        android:label="@string/live_menu_choice"
        android:launchMode="singleTop" >
    </activity> 
```

# php - PHP 没有这样的文件或目录

> ID：14548853
> 
> 赞同：1
> 
> 时间：2013-01-27T15:23:12.153
> 
> 标签：php

我是 php 新手，似乎遇到了问题`session_start()`

为了在我找到的电子商务网站的主页上修复它，我插入`session_save_path('sessions');`了 library/config.php 并在商店文件夹的根目录中创建了一个名为“sessions”的文件夹。这似乎可行，但是当我进入 /admin 文件夹时，我得到了以前在首页上的所有错误。

我认为这是相对目录的问题。我将如何解决这个问题？

我已经尝试过`session_save_path($_SERVER['DOCUMENT_ROOT'] . '/hp/store/sessions');`了，但这在管理页面上给了我一个 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:30:23.130

除非您完全了解您的目录结构，否则最好指定一个绝对路径（这也需要一些关于东西在哪里的知识）。尝试使用绝对路径：

```
session_save_path('/var/www/vhosts/example.com/src/sessions'); 
```

`DocumentRoot`如果您使用共享主机，取决于您的 Apache通常会很棘手。如果您希望使用相对路径，唯一的另一种方法是使用反复试验，直到找到会话目录的正确路径：

```
$path = $_SERVER['DOCUMENT_ROOT'] . '/hp/store/sessions';
var_dump(file_exists($path)); 
```

# javascript - 从关联数组中删除值

> ID：14548854
> 
> 赞同：44
> 
> 时间：2013-01-27T15:23:26.017
> 
> 标签：javascript, arrays, object

> **可能重复：**
> [从 javascript 数组中删除特定元素？](https://stackoverflow.com/questions/5767325/remove-specific-element-from-a-javascript-array)

我有一个数组，我想从中删除一个值。

将其视为一个数组

`[ 'utils': [ 'util1', 'util2' ] ]`

现在我只想删除`util2`. 我该怎么做，我尝试使用`delete`但它没有用。

谁能帮我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T15:25:45.043

使用[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)方法：

```
var object = { 'utils': [ 'util1', 'util2' ] }

object.utils.splice(1, 1); 
```

如果您不知道数组元素的实际位置，则需要遍历数组并从那里拼接元素。尝试以下方法：

```
for (var i = object.utils.length; i--;) {
    var index = object.utils.indexOf('util2');

    if (index === -1) break;

    if (i === index) {
        object.utils.splice(i, 1); break;
    }
} 
```

更新：techfoobar 的回答似乎比我的更惯用。考虑改用他的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T15:38:17.103

您可以`Array.splice()`组合使用`Array.indexOf()`来获得所需的行为，而无需遍历数组：

```
var toDelete = object.utils.indexOf('util1');
if(toDelete != -1) {
    object.utils.splice(toDelete, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:30:37.967

我认为 Javascript 中没有所谓的关联数组。它实际上是一个对象。

```
[ 'utils': [ 'util1', 'util2' ] ] 
```

对于这一行，我认为它不会编译。你应该写这个。

```
var obj = { 'utils': [ 'util1', 'util2' ] } 
```

因此，要删除数组（内部数组）中的元素“util2”，有两种方法。

1.  使用弹出（）

    ```
    obj["utils"].pop(); // obj["utils"] is used to access the "property" of the object, not an element in associative array 
    ```

2.  减少长度

    ```
    obj["utils"].length --; 
    ```

# php - .htaccess ?pages 掩码

> ID：14548864
> 
> 赞同：0
> 
> 时间：2013-01-27T15:25:10.243
> 
> 标签：php, .htaccess, mod-rewrite

我已经完成了完整的搜索，但似乎无法准确找到我之后的内容（抱歉，如果我错过了）。

基本上我只想制作一个 $_GET 值，即 ?pages 值。

所以我想要这个：

```
localhost/?page=login 
```

成为

```
localhost/login 
```

但我希望能够在不隐藏它们的情况下使用其他 $_GET 值，例如，我需要它来工作

```
localhost/login?id=12 or localhost/login?name=dave 
```

我还需要所有 url 请求都通过单个 index.php 文件。

任何帮助将非常感激。似乎无法得到我所追求的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:37:04.587

> 所以我想要这个：
> 
> ```
> localhost/?page=login 
> ```
> 
> 成为
> 
> ```
> localhost/login 
> ```

实际上，这并不完全正确。你想要的是

```
/login 
```

成为

```
/index.php?page=login 
```

这可以使用

```
RewriteRule ^(.*)$ index.php?page=$1 [QSA] 
```

该[`QSA`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)标志使原始查询字符串和新查询字符串 ( `page=$1`) 合并，而不是丢弃原始查询字符串。

要禁用指向现有文件名或目录的 URL 重写，请添加适当的[RewriteCond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond) -directives，例如

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

之前`RewriteRule`。

# php - Zend Rest Controller 中除了默认操作之外的更多操作

> ID：14548866
> 
> 赞同：3
> 
> 时间：2013-01-27T15:25:28.200
> 
> 标签：php, zend-framework, zend-rest

我知道 REST API 可以使用 Zend_Rest_Controller 来实现，它有 5 个抽象方法 indexAction、getAction、postAction、putAction、deleteAction 来执行返回、创建、更新等......

我的问题是，除了这些默认功能之外，我是否可以在控制器中使用更多 API 虚构来执行各种类型的操作？

例如：

**indexAction** - 返回可用书籍的列表，

**searchAction** - 根据搜索条件返回书籍列表。（我知道可以在 indexAction 中使用一些参数来完成，但是代码看起来会更复杂，我需要避免这种情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:41:37.257

是的，您可以在控制器中创建自定义操作方法。尽管您正在扩展抽象类 Zend_Rest_Controller，但只要您定义了这 5 个抽象方法（您已经提到的那些），您就可以自由地自定义您的类的其余部分。

您可能会研究的唯一类似方法是[`getAction()`](http://framework.zend.com/apidoc/1.9/Zend_Rest/Zend_Rest_Controller.html). 这需要一个名称为 ID 的参数，并将根据主键检索记录。

* * *

您可能必须在配置文件中定义您的路由：

```
routes.archive.route = "search/:keyword"
routes.archive.defaults.controller = books
routes.archive.defaults.action = search
routes.archive.defaults.year = "Hamlet"
routes.archive.reqs.year = "\s+" 
```

然后你需要将这些配置选项输入你的路由器：

```
$config = new Zend_Config_Ini('/path/to/config.ini', 'production');
$router = new Zend_Controller_Router_Rewrite();
$router->addConfig($config, 'routes'); 
```

阅读[Zend 的文档](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.rest)以获得更深入的教程。

# android - onBackPressed 再次调用 onResume

> ID：14548872
> 
> 赞同：0
> 
> 时间：2013-01-27T15:26:21.283
> 
> 标签：android, android-intent, android-activity

我有一个应用程序向谷歌 GCM 注册设备以获取推送通知。它工作正常，您可以为手机注册通知，一旦注册，它就会在 web 视图中显示一个网站，并准备好接收通知。

问题是在加载 mainActivity 屏幕时，网站显示正常，但如果用户单击后退键，它会再次调用 onResume。我试过打电话

```
setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

.

从调用活动中清除堆栈并希望退出应用程序。这就是我想要的，当按下后退键时应用程序退出。我也尝试过 System.exit(0)，我知道你不应该这样做。

为什么 onResume 从后键按下运行？

这是 onResume 继续运行的活动，这就是我调用该类的方式。

感谢提前马特。

```
import static com.bmi.bmitestapp.CommonUtilities.DISPLAY_MESSAGE_ACTION;
import static com.bmi.bmitestapp.CommonUtilities.EXTRA_MESSAGE;
import static com.bmi.bmitestapp.CommonUtilities.SENDER_ID;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {
    private static final String TAG = MainActivity.class.getSimpleName();
    // label to display gcm messages
    TextView lblMessage;

    // Asyntask
    AsyncTask<Void, Void, Void> mRegisterTask;

    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();

    // Connection detector
    ConnectionDetector cd;

    public static String name;
    public static String email;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this,
                    "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }

        // Getting name, email from intent
        Intent i = getIntent();

        name = i.getStringExtra("name");
        email = i.getStringExtra("email");     

        // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(this);

        // Make sure the manifest was properly set - comment out this line
        // while developing the app, then uncomment it when it's ready.
        GCMRegistrar.checkManifest(this);

        lblMessage = (TextView) findViewById(R.id.lblMessage);

        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                DISPLAY_MESSAGE_ACTION));

        // Get GCM registration id
        final String regId = GCMRegistrar.getRegistrationId(this);

        // Check if regid already presents
        if (regId.equals("")) {
            // Registration is not present, register now with GCM
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            // Device is already registered on GCM
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                // Skips registration.
                Toast.makeText(getApplicationContext(), "Already registered with GCM", Toast.LENGTH_LONG).show();
            } else {
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        // Register on our server
                        // On server creates a new user
                        ServerUtilities.register(context, name, email, regId);
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        mRegisterTask = null;
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        }

        WebView webView = (WebView)findViewById(R.id.webView1);
        webView.loadUrl("http://www.google.com");
    }      //end of oncreate

    /**
     * Receiving push messages
     * */
    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

            // Showing received message
            lblMessage.append(newMessage + "\n");
            Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }
    };

    @Override
    protected void onDestroy() {
        if (mRegisterTask != null) {
            mRegisterTask.cancel(true);
        }
        try {
            unregisterReceiver(mHandleMessageReceiver);
            GCMRegistrar.onDestroy(this);
        } catch (Exception e) {
            Log.e("UnRegister Receiver Error", "> " + e.getMessage());
        }
        super.onDestroy();
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();

    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.e(TAG, "in onResume in mainactivity");

    }

} 
```

.

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                i.putExtra("name", "hardcoded client name");
                i.putExtra("email", "hardcoded email");
                startActivity(i);
                finish(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:44:20.440

[已解决] 从调用活动中我将 setFlags 更改为

```
i.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

# c# - EF5 删除实体

> ID：14548874
> 
> 赞同：1
> 
> 时间：2013-01-27T15:26:22.953
> 
> 标签：c#, entity-framework-5

如何使用 EF5 删除实体？我收到此错误：

```
The object cannot be deleted because it was not found in the ObjectStateManager. 
```

当我尝试在我的 DbSet 上调用 .Remove 时。谷歌搜索后，我尝试了

```
mycontext.Attach(entity)
mycontext.Remove(entity) 
```

但这样我得到：

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key. 
```

那么，它是否在 ObjectStateManager 中？！:)

我的实体是这样的：

```
[Table("Words")]
public class Word : IWord
{
    [Key, Required]
    public int WordId { get; set; }

    [Required, StringLength(50)]
    public string Tag { get; set; }

    //Foreign Key
    public int VocabularyId { get; set; }

    //Navigation
    public virtual Vocabulary Vocabulary { get; set; }
    public virtual Language Language { get; set; }
    public virtual List<Translation> Translations { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:42:57.657

您可以考虑两种情况：

**1.连接场景：**从数据库中加载实体并将其标记为已删除

```
var word = ctx.Words.Where(a=>a.WordId == wordId).First();
ctx.DeleteObject(word);
ctx.SaveChanges(); 
```

**2.断开连接的场景：**附加一个现有实体并将其标记为已删除

```
var word = new Word() { WordId = id };
ctx.Words.Attach(word);
ctx.DeleteObject(word);
ctx.SaveChanges(); 
```

第二种方法将帮助您避免不必要的数据库往返

# java - 如何防止其他人访问仅限管理员用户访问的链接

> ID：14548876
> 
> 赞同：1
> 
> 时间：2013-01-27T15:26:32.137
> 
> 标签：java, jsp, jakarta-ee, servlets

我正在使用 jstl 代码来隐藏必须是唯一管理员用户才能访问的按钮……例如，现在我将按钮隐藏给重定向到 deletepage.jsp 的普通用户。我使用 c:if jstl 标签正确地制作了它......但是如果他们知道链接，普通用户仍然可以访问它......如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:34:31.273

执行此操作的 3 种方法：

1-对每个处理有此问题的调用的 servlet 进行验证。2-通过过滤器来做。3-使用任何框架，如struts。

框架将导致更少的代码以适当的方式编写。如果您不想要首选的框架，则应使用过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:00:31.967

您可以在 web.xml 文件中设置[过滤器](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1015950)，然后实现 SecurityFilter 类。在这个类中，你需要实现函数

```
public void doFilter(ServletRequest req, ServletResponse res,FilterChain next) throws IOException, ServletException {
} 
```

然后，您可以检查请求的 url 是否存在当前用户的会话。如果是，那么您可以将他导航到该页面；否则，只需拒绝并重定向到错误页面

```
if ("/admin.jsp".equals(httpReq.getServletPath())) {
    if(httpReq.getSession().getAttribute("CurrentUser")!=null) {

        // go to the requested url 
    }
    else {
        httpReq.getRequestDispatcher("/no_access.jsp").forward(httpReq, httpRes);
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:44:08.753

使用 MVC，您可以让控制器根据访问控制列表 (ACL) 检查用户的身份，以防止访问受限页面。此外，为了进一步密封这一点，您可以对直接访问这些受限页面进行额外检查，以便用户无法直接请求它们。此建议解决方案的实施细节由您根据您的设计来决定。

# html - 对齐可滚动表格中的 HTML 列

> ID：14548877
> 
> 赞同：0
> 
> 时间：2013-01-27T15:26:33.270
> 
> 标签：html, css, html-table, alignment

我有以下 HTML，其中包含一个可滚动的表格。尽管我在每个实例中都指定了列宽（colspan 大于 1 的情况除外），但我无法让数据列与标题对齐，我不明白为什么。

我怀疑这个问题是不了解 CSS 样式如何相互关联的结果，但这就是我所在的地方。我很想找到一个很好的参考资料，可以帮助我理解。您现在看到“table.main.innerb.subt”的地方我尝试了多种组合，包括简单的“.subt”，但问题仍然存在。

阻止表格对齐的代码有什么问题？哪里有一个好的“虚拟指南”类型的参考，可以帮助解决最初的理解障碍？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content=
"HTML Tidy for Linux/x86 (vers 6 November 2007), see www.w3.org"
name="generator">
<meta content='text/html; charset=us-ascii' http-equiv=
'Content-Type'>
<title>10% Analysis Report for 11/18/2012</title>

<style type='text/css'>

caption.head {
  font-family: verdana,arial,sans-serif;
  font-size:18pt;
  color:#333333;
  border:0 solid white;
 }
table.main {
  border-collapse:collapse;
  border:1px solid gray;
  }
table.main th {
  border-width: 1px;
  padding: 2px 8px;
  border-style: solid;
  background-color: #dedede;
  }
table.main th.empno {width:6em;}
table.main th.empname {width:30em;}
table.main th.date {width:8em;}
table.main th.amt {width:8em;}
table.main th.pct {width:5em;}
table.main th.dir {width:3em;}
table.main th.oicode {width:3em;}

table.main.innerb.subt th.empno {width:6em;}
table.main.innerb.subt th.empname {width:30em;}
table.main.innerb.subt th.date {width:8em;}
table.main.innerb.subt th.amt {width:8em;}
table.main.innerb.subt th.pct {width:5em;}
table.main.innerb.subt th.dir {width:3em;}
table.main.innerb.subt th.oicode {width:3em;}
table.main th.line2 {

  border-width: 1px;
  padding: 0px 8px;
  border-style: solid;
  background-color: #dedede;
  }
table.main tr.shade {
  background-color: NavajoWhite;
  }
table.main td {
  padding: 2px 15px;
  vertical-align: top;
  }
table.main td.oicode {
  border:0 solid white;
  padding: 0px 0px;
  width: 4em;
  }
table.main td.oicode2 {
  padding: 0px 0px;
  width: 4em;
  }
table.main td.oiamt {
  border:0 solid white;
  padding: 0px 0px;
  text-align: right;
  width: 4em;
  }
table.main td.oiamt2 {
  padding: 0px 0px;
  text-align: right;
  width: 4em;
  }
table.main td.empno {width:6em;}
table.main td.empname {width:30em;}
table.main td.date {width:8em;}
table.main td.amt {width:8em;}
table.main td.pct {width:5em;}
table.main td.dir {width:3em;}
table.main td.oicode {width:3em;}

table.main.innerb.subt td.empno {width:6em;}
table.main.innerb.subt td.empname {width:30em;}
table.main.innerb.subt td.date {width:8em;}
table.main.innerb.subt td.amt {width:8em;}
table.main.innerb.subt td.pct {width:5em;}
table.main.innerb.subt td.dir {width:3em;}
table.main.innerb.subt td.oicode {width:3em;}

.empno {width:6em;}
.empname {width:30em;}
.date {width:8em;}
.amt {width:8em;}
.pct {width:5em;}
.dir {width:3em;}
.oicode {width:3em;}

.innerb {height:20em; overflow:auto;}

</style>

<style type="text/css">
 div.c1 {valign: center;}
</style>
</head>
<body>
<p></p>
<div class='c1'></div>
<table align='center' class='main' summary='Script output'>
    <caption class='head'>
    10% Analysis Report for 11/18/2012
    </caption>
    <thead>
        <tr>
            <th colspan='2' scope='col'>Employee</th>
            <th colspan='2' scope='col'>Period End</th>
            <th colspan='2' scope='col'>Gross Amount</th>
            <th class='pct' rowspan='2' scope='col'>Gross Chg&nbsp;%</th>
            <th class='amt' rowspan='2' scope='col'> &nbsp;&nbsp;&nbsp;Difference&nbsp;</th>
            <th class='dir' rowspan='2' scope='col'>Dir</th>
            <th colspan='2' scope='col'>Net Amount</th>
            <th class='amt' rowspan='2' scope='col'>Net Chg&nbsp;%</th>
            <th colspan='5' scope='col'>Current Period Amounts</th>
            <th colspan='3' scope='col'>Other Incomes</th>
        </tr>
        <tr>
            <th class='empno' scope='col'>xxxxxx</th>
            <th class='empname' scope='col'>Name</th>
            <th class='date' scope='col'>Latest</th>
            <th class='date' scope='col'>Previous</th>
            <th class='amt' scope='col'>Latest</th>
            <th class='amt' scope='col'>Previous</th>
            <th class='amt' scope='col'>Latest</th>
            <th class='amt' scope='col'>Previous</th>
            <th class='amt' scope='col'>Overtime</th>
            <th class='amt' scope='col'>DCP</th>
            <th class='amt' scope='col'>RRP</th>
            <th class='amt' scope='col'>OOP</th>
            <th class='amt' scope='col'>Other</th>
            <th class='oicode' scope='col'>Code</th>
            <th class='amt' scope='col'>Curr</th>
            <th class='amt' scope='col'>Prev</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5">Footer</td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <td colspan='20'>
                <div class="innerb">
                    <table class='subt' summary='script output'>
                        <tr>
                            <td class='empno' rowspan='2'>xxxxxx</td>
                            <td class='empname' rowspan='2'>Howya&nbsp;Doin</td>
                            <td class='date' rowspan='2'>11/18/2012</td>
                            <td class='date' rowspan='2'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='2'>7,241.67</td>
                            <td align='right' class='amt' rowspan='2'>6,325.00</td>
                            <td align='right' class='pct' rowspan='2'>14.49</td>
                            <td align='right' class='amt' rowspan='2'>916.67</td>
                            <td class='dir' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>4,246.38</td>
                            <td align='right' class='amt' rowspan='2'>3,660.80</td>
                            <td align='right' class='pct' rowspan='2'>16.00</td>
                            <td align='right' class='amt' rowspan='2'>916.67</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>825.00</td>
                            <td class="oicode">&nbsp;OT&nbsp;</td>
                            <td class="oiamt">&nbsp;916.67&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="oicode">&nbsp;SH3&nbsp;</td>
                            <td class="oiamt">&nbsp;825.00&nbsp;</td>
                            <td class="oiamt">&nbsp;825.00&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='2'>xxxxxx</td>
                            <td class='empname' rowspan='2'>Hoosier&nbsp;Friend</td>
                            <td class='date' rowspan='2'>11/18/2012</td>
                            <td class='date' rowspan='2'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='2'>2,174.04</td>
                            <td align='right' class='amt' rowspan='2'>1,961.54</td>
                            <td align='right' class='pct' rowspan='2'>10.83</td>
                            <td align='right' class='amt' rowspan='2'>212.50</td>
                            <td class='dir' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>1,511.09</td>
                            <td align='right' class='amt' rowspan='2'>1,363.72</td>
                            <td align='right' class='pct' rowspan='2'>10.81</td>
                            <td align='right' class='amt' rowspan='2'>212.50</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td class="oicode">&nbsp;OT&nbsp;</td>
                            <td class="oiamt">&nbsp;65.38&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class="oicode">&nbsp;OT1&nbsp;</td>
                            <td class="oiamt">&nbsp;147.12&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Wanna B.&nbsp;Special</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>3,282.69</td>
                            <td align='right' class='amt' rowspan='1'>6,565.38</td>
                            <td align='right' class='pct' rowspan='1'>50.00</td>
                            <td align='right' class='amt' rowspan='1'>3,282.69</td>
                            <td class='dir' rowspan='1'>Down</td>
                            <td align='right' class='amt' rowspan='1'>2,138.21</td>
                            <td align='right' class='amt' rowspan='1'>3,975.41</td>
                            <td align='right' class='pct' rowspan='1'>46.21</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>3,282.69</td>
                            <td class="oicode">&nbsp;VAC&nbsp;</td>
                            <td class="oiamt">&nbsp;3,282.69&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='2'>xxxxxx</td>
                            <td class='empname' rowspan='2'>Frisky&nbsp;Muffin</td>
                            <td class='date' rowspan='2'>11/18/2012</td>
                            <td class='date' rowspan='2'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='2'>2,223.50</td>
                            <td align='right' class='amt' rowspan='2'>2,020.38</td>
                            <td align='right' class='pct' rowspan='2'>10.05</td>
                            <td align='right' class='amt' rowspan='2'>203.12</td>
                            <td class='dir' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>1,561.17</td>
                            <td align='right' class='amt' rowspan='2'>1,400.01</td>
                            <td align='right' class='pct' rowspan='2'>11.51</td>
                            <td align='right' class='amt' rowspan='2'>203.12</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td class="oicode">&nbsp;OT&nbsp;</td>
                            <td class="oiamt">&nbsp;41.49&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class="oicode">&nbsp;OT1&nbsp;</td>
                            <td class="oiamt">&nbsp;161.63&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class='empno' rowspan='2'>xxxxxx</td>
                            <td class='empname' rowspan='2'>Howya&nbsp;Holdenup</td>
                            <td class='date' rowspan='2'>11/18/2012</td>
                            <td class='date' rowspan='2'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='2'>2,110.31</td>
                            <td align='right' class='amt' rowspan='2'>1,984.62</td>
                            <td align='right' class='pct' rowspan='2'>6.33</td>
                            <td align='right' class='amt' rowspan='2'>125.69</td>
                            <td class='dir' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>1,643.36</td>
                            <td align='right' class='amt' rowspan='2'>1,442.42</td>
                            <td align='right' class='pct' rowspan='2'>13.93</td>
                            <td align='right' class='amt' rowspan='2'>125.69</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='2'>&nbsp;</td>
                            <td class="oicode">&nbsp;OT&nbsp;</td>
                            <td class="oiamt">&nbsp;66.15&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="oicode">&nbsp;OT1&nbsp;</td>
                            <td class="oiamt">&nbsp;59.54&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Failin&nbsp;Groovy</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>300.00</td>
                            <td align='right' class='amt' rowspan='1'>4,876.92</td>
                            <td align='right' class='pct' rowspan='1'>93.85</td>
                            <td align='right' class='amt' rowspan='1'>4,576.92</td>
                            <td class='dir' rowspan='1'>Down</td>
                            <td align='right' class='amt' rowspan='1'>191.79</td>
                            <td align='right' class='amt' rowspan='1'>3,514.42</td>
                            <td align='right' class='pct' rowspan='1'>94.54</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>300.00</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td class="oicode">&nbsp;RR2&nbsp;</td>
                            <td class="oiamt">&nbsp;300.00&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Hoosier&nbsp;Cousin</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>3,076.92</td>
                            <td align='right' class='amt' rowspan='1'>2,461.54</td>
                            <td align='right' class='pct' rowspan='1'>25.00</td>
                            <td align='right' class='amt' rowspan='1'>615.38</td>
                            <td class='dir' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>2,032.98</td>
                            <td align='right' class='amt' rowspan='1'>1,670.48</td>
                            <td align='right' class='pct' rowspan='1'>21.70</td>
                            <td align='right' class='amt' rowspan='1'>615.38</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td class="oicode">&nbsp;OT1&nbsp;</td>
                            <td class="oiamt">&nbsp;615.38&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Sunny&nbsp;Skies</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>4,913.46</td>
                            <td align='right' class='amt' rowspan='1'>4,211.54</td>
                            <td align='right' class='pct' rowspan='1'>16.67</td>
                            <td align='right' class='amt' rowspan='1'>701.92</td>
                            <td class='dir' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>3,170.59</td>
                            <td align='right' class='amt' rowspan='1'>2,745.88</td>
                            <td align='right' class='pct' rowspan='1'>15.47</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>701.92</td>
                            <td class="oicode">&nbsp;HOL&nbsp;</td>
                            <td class="oiamt">&nbsp;701.92&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class='empno' rowspan='3'>xxxxxx</td>
                            <td class='empname' rowspan='3'>Wanna B.&nbsp;Somebody</td>
                            <td class='date' rowspan='3'>11/18/2012</td>
                            <td class='date' rowspan='3'>10/21/2012</td>
                            <td align='right' class='amt' rowspan='3'>11,788.46</td>
                            <td align='right' class='amt' rowspan='3'>35,365.38</td>
                            <td align='right' class='pct' rowspan='3'>66.67</td>
                            <td align='right' class='amt' rowspan='3'>23,576.92</td>
                            <td class='dir' rowspan='3'>Down</td>
                            <td align='right' class='amt' rowspan='3'>6,848.28</td>
                            <td align='right' class='amt' rowspan='3'>18,911.71</td>
                            <td align='right' class='pct' rowspan='3'>63.79</td>
                            <td align='right' class='amt' rowspan='3'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='3'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='3'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='3'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='3'>11,788.46</td>
                            <td class="oicode">&nbsp;EX1&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                            <td class="oiamt">&nbsp;353.65&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="oicode">&nbsp;SEV&nbsp;</td>
                            <td class="oiamt">&nbsp;11,788.46&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class="oicode">&nbsp;VAC&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                            <td class="oiamt">&nbsp;23,576.92&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Sporty&nbsp;Cabin</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>250.00</td>
                            <td align='right' class='amt' rowspan='1'>3,488.46</td>
                            <td align='right' class='pct' rowspan='1'>92.83</td>
                            <td align='right' class='amt' rowspan='1'>3,238.46</td>
                            <td class='dir' rowspan='1'>Down</td>
                            <td align='right' class='amt' rowspan='1'>138.70</td>
                            <td align='right' class='amt' rowspan='1'>1,958.82</td>
                            <td align='right' class='pct' rowspan='1'>92.92</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>250.00</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td class="oicode">&nbsp;RR2&nbsp;</td>
                            <td class="oiamt">&nbsp;250.00&nbsp;</td>
                            <td class="oiamt">&nbsp;&nbsp;&nbsp;</td>
                        </tr>
                        <tr>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Giant&nbsp;Cricket</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>288.00</td>
                            <td align='right' class='amt' rowspan='1'>720.00</td>
                            <td align='right' class='pct' rowspan='1'>60.00</td>
                            <td align='right' class='amt' rowspan='1'>432.00</td>
                            <td class='dir' rowspan='1'>Down</td>
                            <td align='right' class='amt' rowspan='1'>265.81</td>
                            <td align='right' class='amt' rowspan='1'>622.38</td>
                            <td align='right' class='pct' rowspan='1'>57.29</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>288.00</td>
                            <td class="oicode">&nbsp;PDW&nbsp;</td>
                            <td class="oiamt">&nbsp;288.00&nbsp;</td>
                            <td class="oiamt">&nbsp;720.00&nbsp;</td>
                        </tr>
                        <tr class='SHADE'>
                            <td class='empno' rowspan='1'>xxxxxx</td>
                            <td class='empname' rowspan='1'>Blue&nbsp;Lagoon</td>
                            <td class='date' rowspan='1'>11/18/2012</td>
                            <td class='date' rowspan='1'>11/04/2012</td>
                            <td align='right' class='amt' rowspan='1'>5,927.54</td>
                            <td align='right' class='amt' rowspan='1'>3,236.92</td>
                            <td align='right' class='pct' rowspan='1'>83.12</td>
                            <td align='right' class='amt' rowspan='1'>2,690.62</td>
                            <td class='dir' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>3,889.05</td>
                            <td align='right' class='amt' rowspan='1'>2,253.43</td>
                            <td align='right' class='pct' rowspan='1'>72.58</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>&nbsp;</td>
                            <td align='right' class='amt' rowspan='1'>-34.00</td>
                            <td class="oicode">&nbsp;DBL&nbsp;</td>
                            <td class="oiamt">&nbsp;-34.00&nbsp;</td>
                            <td class="oiamt">&nbsp;-2,724.62&nbsp;</td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:51:47.947

当您使用嵌套表以使数据行位于内部表中时，使列对齐变得非常困难。原因是内表的列与外表的列没有以任何方式连接。

在这种情况下，似乎部分差异是由标题单元格与数据单元格中不同的水平填充引起的。所以检查填充设置（在这个过程中最好减少填充，因为表格很宽，大填充会使情况变得更糟）。

# html - CSS 页脚背景

> ID：14548879
> 
> 赞同：0
> 
> 时间：2013-01-27T15:26:59.083
> 
> 标签：html, css, image, footer

我有一个问题，我不知道如何解决这个问题。我正在制作一个网站，在我的网站底部我想要一个页脚图像。图像必须是全宽和 375 像素的高度。但我真的不知道该怎么做。我已经尝试了 css 和 html 中的所有内容，但它不起作用。每次我在 html 中放一些东西时，图像只是它的正常大小，高度为 375 像素，这很好，但它并没有填满屏幕的宽度。那么任何人都可以帮助我吗？我试过的东西：HTML：

```
<div id="image">
<img src="images/college.jpg/>
</div> 
```

CSS：

```
#image {
width: 100%;
height: 375px;
} 
```

请记住，我是 html 和 css 的新手，我只是不知道如何解决这个问题。我尝试了很多东西，但它只是不工作。它就像一个全宽页脚，但它需要是图像而不是颜色。背景图像：src（'图像/college.jpg'）；没用。请帮我处理html和css。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:28:29.730

```
#image img {
width: 100%;
height: 375px;
} 
```

您的 CSS 选择器选择的是图像的父 div 而不是图像。这就是为什么它不能满足您的要求。

如果您想使用`background-image`属性，请记住这`src`是无效的。你必须`url`在 CSS 中这样使用：

```
#image {
width:100%;
height:375px;
background-image:url('images/college.jpg');
} 
```

在 CSS 中，您还可以通过键入`background`而不是`background-image`or来指定图像或颜色`background-color`。例如

```
#image {
width:100%;
height:375px;
background:url('images/college.jpg'); /* background:#fff; */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:33:10.437

您的目标是 div 而不是这里的图像。图像在 div 内，您必须了解 div 只是图像的容器。所以你可能想要定位图像。例如：

```
img.MyImage{
width:<your width here>;
height:<your height here>;
<!-- dont put <> in actual code -->
} 
```

在这里，您的图像标签将具有 MyImage 类。

# wpf - 由于 Windows 7 UAC，将 SDF 数据库从应用程序文件夹移动到用户文件夹？

> ID：14548880
> 
> 赞同：3
> 
> 时间：2013-01-27T15:27:12.617
> 
> 标签：wpf, sql-server-ce, windows-installer, connection-string

我正在为我的 WPF (MVVM) 项目使用 SQL Server CE 4.0，并且在开发过程中，数据库与我的应用程序位于同一文件夹中 - 所以在我的 APP.CONFIG 文件中，我有以下连接字符串：

```
<configuration>
<add name="DatabaseEntities" connectionString="metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;provider=System.Data.SqlServerCe.4.0;provider connection string=&quot;Data Source=Database.sdf&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

然后我创建了一个 Windows 安装程序 (MSI)，在 Windows XP 中一切都很完美......

但是，当我移至 WINDOWS 7 时，无法访问数据库（部署在安装文件夹中）（UAC）。所以看起来我需要将 SDF 移动到其他地方......？

我认为它应该在 Users...\AppData\Local\Model\Database.SDF 下，对吗？或者是否有其他更适合此类文件的位置？

此外，我完全不知道如何将我的 ConnectionString 更改为指向这个新位置（它在 APP.CONFIG 文件中进行了硬编码）。

任何建议和帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:22:08.963

您应该阅读以下有关Windows 7 计算机上[的应用程序数据推荐文件夹的文章。](http://blogs.msdn.com/b/cjacks/archive/2008/02/05/where-should-i-write-program-data-instead-of-program-files.aspx)

至于你的 .config 文件，它是一个标准的 XML 文件，大多数专业的设置创作工具都支持在安装过程中导入它并更新它的内容。例如，在下面的文章中，您可以了解如何[在安装时导入和编辑高级安装程序中的 XML](http://www.advancedinstaller.com/user-guide/qa-import-edit-xml-file.html)。

# asp.net-mvc-3 - MVC 3 不显示谷歌地图

> ID：14548882
> 
> 赞同：0
> 
> 时间：2013-01-27T15:27:46.370
> 
> 标签：asp.net-mvc-3, google-maps

我正在尝试纠正使用 Google 地图的 MVC 应用程序。我从 CodeProject 获得了示例代码，但地图似乎没有在 IE、Chrome 和 Firefox 上显示。索引视图代码：

```
@{ 
ViewBag.Title = "MVC 3 and Google Maps";
Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
function Initialize() {
var latlng = new google.maps.LatLng('40.716948', '74.003563');
var options = { zoom: 14,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), options);
}

$(function () {
Initialize();
});
</script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true">   </script>
<div id="map_canvas" style="width: 400px; height: 300%;">
</div> 
```

布局视图代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript">    </script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
@RenderSection("Scripts", false)
<style type="text/css"> 
        @RenderSection("Styles", false) 
    </style>
</head>
<body>
<div class="page">
    <header>
        <div id="title">
            <h1>My MVC Application</h1>
        </div>
        <div id="logindisplay">
            @Html.Partial("_LogOnPartial")
        </div>
        <nav>
            <ul id="menu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
            </ul>
        </nav>
    </header>
    <section id="main">
        @RenderBody()
    </section>
    <footer>
    </footer>
</div>
</body>
</html> 
```

我不知道该怎么办了，请帮助兄弟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:43:12.000

试试这样：

```
<script type="text/javascript">
    function Initialize() {
        var latlng = new google.maps.LatLng(40.716948, 74.003563);
        var options = {
            zoom: 14,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), options);
    }

    $(function () {
        Initialize();
    });
</script>
<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
<div id="map_canvas" style="width: 400px; height: 300px;"></div> 
```

注意事项：

*   纬度和经度被指定为浮点值，而不是字符串
*   div 的高度`300px`不是`300%`.

另请注意，您指定的坐标 ( `40.716948, 74.003563`) 位于 central 的山脉中`Kyrgyzstan`，因此如果您没有在此缩放级别获得非常详细的地图，请不要感到惊讶。

例如，这里是微软雷德蒙德总部的坐标：`var latlng = new google.maps.LatLng(47.652437, -122.132424);`.

# php - 循环遍历 results_array() 给出错误：尝试获取非对象的属性

> ID：14548883
> 
> 赞同：0
> 
> 时间：2013-01-27T15:27:52.677
> 
> 标签：php, codeigniter

我有一个 ci / bonfire 应用程序。我正在尝试遍历查询结果。但是，在我看来，循环遍历记录及其各个字段的逻辑失败，并显示我正在尝试获取非对象的属性。我已经确保在我的模型中，只有当我有东西要返回时，我才会返回数据......就像这样：

```
 if ($query->num_rows() > 0) 
        { 
            return $query->result_array(); //returns an object of data
        } 
```

在视图中，我还添加了以下调试语句来证明我正在取回数据：

```
 print_r($records); 
```

这给了我以下输出：（我只包含了一个简短的子集..）

```
Array ( [0] => Array ( [category_id] => 59 [name] => procs [description] => [parent_id] => 4 [deleted] => 0 [created_on] => 2012-09-28 00:00:00 [modified_on] => 0000-00-00 00:00:00 ) [1] => Array ( [category_id] => 62 [name] => test [description] => [parent_id] => 4 [deleted] => 0 [created_on] => 2012-09-28 00:00:00 [modified_on] => 0000-00-00 00:00:00 ) 
```

最后，这是我用来循环 $records 的逻辑（同样，只是子集）：

```
 <?php foreach ($records as $record) : ?>
   <tr>
    <td><input type="checkbox" name="checked[]" value="<?php echo $record->category_id ?>" /></td> 
```

它在调用`$record->category_id`

**编辑 1**

我的控制器创建的用于从同一个表返回所有记录的 index() 方法成功地使用`$record->category_id`了视图中的语法。我知道我可以使用`$record['category_id']`，但我想知道为什么我不能让它以另一种方式工作。

任何建议，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:30:41.920

利用

```
$record['category_id '] 
```

应该做的伎俩，Wezy

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:02:56.653

我认为您没有得到一个对象（否则 print_r 会有所不同）。也就是说，“foreach”方法用于数组遍历，而不是对象，即使将对象提供给“foreach”循环，它也会转换为等效的关联数组，因此，在您的情况下，“$record”不再是一个对象，而是一个关联数组。

# php - Wordpress - 在某些帖子类型上禁用 jQuery 脚本

> ID：14548894
> 
> 赞同：1
> 
> 时间：2013-01-27T15:29:19.527
> 
> 标签：php, jquery, wordpress

我正在尝试在 wordpress 上注销一些脚本，但仅限于某些帖子类型。我对 wordpress 和 php 还是很陌生，所以我很难弄清楚这是如何完成的。
这是我注册和排队的脚本：

```
function test_script_method() {
    wp_register_script( 'jq', '/wp-content/themes/test/js/script.js');
    wp_enqueue_script( 'jq' );
    wp_register_script( 'slideshow', '/wp-content/themes/test/js/slideshow.js');
    wp_enqueue_script( 'slideshow' );
}
add_action('wp_enqueue_scripts', 'test_script_method'); 
```

所以我将我的 jQuery 拆分为两个文件，因为我在某些页面/帖子类型上不需要其中的一些。

首先，我试图禁用`'jq'`所有具有帖子类型的帖子的脚本，以及标题为 和 的页面`'news'`上的脚本。 这是可能吗？`'archive-news.php'``'home'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:00:30.360

像这样的东西？

```
enterfunction test_script_method() {
   global $wp_query;
   if ( "news" != get_post_type() && !(is_page('home')) ) {
    wp_register_script( 'jq', '/wp-content/themes/test/js/script.js');
    wp_enqueue_script( 'jq' );
    wp_register_script( 'slideshow', '/wp-content/themes/test/js/slideshow.js');
    wp_enqueue_script( 'slideshow' );
   }
}
add_action('wp_enqueue_scripts', 'test_script_method'); code here 
```

# ios - 隐藏 CATiledLayer 平铺创建

> ID：14548897
> 
> 赞同：3
> 
> 时间：2013-01-27T15:29:41.580
> 
> 标签：ios, catiledlayer

由于在 iOS5 中，Apple 默默地将 tileSize 限制更改为 1024。这个限制在我`CATiledLayer`的`scrollview`. 在屏幕尺寸大于 iPhone 5 的设备上，您可以在构建屏幕时看到 2 (iPhone 5) 或 4 (iPad) 磁贴。虽然从技术上讲一切都很好，但我认为用户不应该看到这个过程，应该看到一个完整的构建层。

我已经禁用了淡入淡出持续时间，仍然可以看到瓷砖。

问题：似乎无法确定何时`CATiledLayer`完成绘制（线程、缓存）。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T23:35:04.590

您可能想要减小图块大小。这可能有助于缩放和平移时的视觉效果。您的下一个赌注可能涉及在它们变得可见之前预加载瓷砖。

# firefox - 通过 Firebug 从本地网站打开原始文件？

> ID：14548899
> 
> 赞同：1
> 
> 时间：2013-01-27T15:30:00.157
> 
> 标签：firefox, firefox-addon, editor, firebug

对于在 Ubuntu 中工作的本地网站。我尝试通过 Firebug 的*HTML*和*CSS*面板使用我的编辑器 (gedit) 打开文件。

在编辑器配置中（Firebug 按钮 > *Open With Editor* > *Configure Editors...*）我可以设置参数`%file`，但这会打开文件的临时副本。

虽然我想打开原来的。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:58:58.873

目前（使用 Firebug 2.0.7）这是不可能的。

在 Firebug 的问题跟踪器中有一个[增强请求](http://code.google.com/p/fbug/issues/detail?id=5035)。尽管即将发布的[Firebug 3 版本将集成到 Firefox DevTools](https://blog.getfirebug.com/2014/11/10/firebug-3-next-generation-of-firebug/)并移至[GitHub 问题跟踪器](https://github.com/firebug/firebug.next/issues)，但您可能需要再次请求该功能。

塞巴斯蒂安

# c# - 如何更改某些选项卡的背景？

> ID：14548900
> 
> 赞同：0
> 
> 时间：2013-01-27T15:30:02.283
> 
> 标签：c#, wpf

所以我有一个带有几个 tabitems 的 tabcontrol。我想包含这个功能，这样每当我右键单击一个选项卡（当前是否选中）时，该选项卡的颜色都会改变。如果我再次这样做，颜色将恢复为默认值（浅灰色）。

我怎么做？我是否应该有两组选项卡外观并将它们作为动态资源并有一个可以即时更改它们的侦听器？

感谢任何帮助或指出我正确的方向。提前致谢。

附言。我正在开发一个 WPF 应用程序并关注 MVVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:58:50.207

试试这个另一种解决方案，

```
public class MyTabItem : TabItem
    {

        protected override void OnMouseRightButtonDown(MouseButtonEventArgs e)
        {
            this.Background = Brushes.Yellow;
            base.OnMouseRightButtonDown(e);
        }       
    } 
```

只需覆盖 Tabitem 并在需要时更改颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:02:22.687

已经讨论过同样的问题并给出了解决方案。[参考这个网址](https://stackoverflow.com/questions/3265140/wpf-tabitem-background-color-changes-when-tabitem-selected-or-hover-over])

# haskell - 函数中的预期类型与实际类型匹配时出错

> ID：14548905
> 
> 赞同：0
> 
> 时间：2013-01-27T15:30:42.053
> 
> 标签：haskell

我一直在 getnumfrmcard (xs) 的第一个参数和 (<) 的第二个参数即 getnumfrmcard(xs) 函数中得到一个无法匹配预期类型 Card 和实际类型 [Card]牌是顺子）

```
enter code here
  data Card = Cards (Suit,Face) deriving (Eq)
  data Hand=  Hands[Card]

   straight:: Hand->Bool
   straight (Hands [] )                                     =True
   straight (Hands (x:xs) )                
            | null(xs)==True                          = True
            | getnumfrmcard (x)  < getnumfrmcard (xs) =straight (Hands xs)
            | otherwise                               = False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:47:31.563

此错误表明该函数`getnumfrmcard`需要一个类型的参数，`Card`但给出了一个`[Card]`（卡片列表）。罪魁祸首是您拥有的倒数第二行`getnumfrmcard (xs)`。如果您匹配一个列表，`(x:xs)`则`x`成为列表的头部（单个元素）并`xs`成为尾部，这是一个列表。所以在

```
f []     = []
f (x:xs) = xs

f [1,2,3] -- [2,3] 
```

`xs`必然`[2,3]`。

你可以匹配，`(Hands (x0:x1:xs))`但是你需要决定如何处理一个只有一个参数的列表（我没有考虑过你真正想要做什么）。

另请注意：您通常不需要在 Haskell 中的函数参数周围加上括号，因此`getnumfrmcard (xs)`您不想编写`getnumfrmcard xs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:37:31.097

此外，如果要检查是否有顺子，仅检查每张牌是否低于下一张是不够的，它必须是*低一张*。

想到一个更 Haskell-y 的解决方案：

```
straight (Hands cards) = and $ zipWith nextStraight cards (tail cards)
   where nextStraight c c' = getnumfrmcard c' == getnumfrmcard c+1 
```

`zipWith nextStraight cards (tail cards)``cards`将通过函数组合每对相邻元素`nextStraight`（检查两张卡是否具有相邻值的函数）。然后我们通过要求*所有*对必须验证谓词（因此是`and`函数）来组合得到的布尔列表。

当然，必须事先对手牌进行排序才能使此方法起作用，否则将无法检测到某些顺子（例如 [2H,3D,5S,4D,6C]）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:30:49.497

在 haskell 中编码并不是那么明显，我会在您的问题中添加更多代码，这样您就不会遇到更多问题 :) 所以我认为基于 Paul 答案的答案可能看起来像这样。

```
module Test where

data Card = Cards (Int, Int) deriving (Eq, Ord)
data Hand = Hands [Card]

straight :: Hand -> Bool
straight (Hands [] ) = True
straight (Hands [x0] ) = True
straight (Hands (x0:x1:xs) )
    | null(xs) == True = True
    | x0 < x1 = straight (Hands xs)
    | otherwise = False

main :: IO ()
main = print $ straight $ Hands [Cards (5,1), Cards(4,4)] 
```

随意编辑这个

# ruby - RSpec 在 Mac 上使用 rvm 运行，但在 Linux 上使用 require 失败

> ID：14548908
> 
> 赞同：1
> 
> 时间：2013-01-27T15:31:12.817
> 
> 标签：ruby, rspec, jenkins

我有一个 ruby​​ 项目，我一直在我的 mac 上使用 ruby​​ 1.9.3 到 rvm 进行开发。我今天大部分时间都在设置构建服务器来运行我的测试，因为我检查了对我的 repo 的更改。我的服务器运行 Ubuntu。我安装了 rvm 并使用 1.9.3。

但是，现在当我尝试使用运行我的 rspec 测试时出现加载错误

```
bundle exec rspec 
```

这适用于我的 Mac，我不知道为什么它不能在我的 Linux 机器上运行。

```
morten@Lux:/var/lib/jenkins/jobs/getdone/workspace$ bundle exec rspec
/var/lib/jenkins/jobs/getdone/workspace/spec/lib/commandExecutor_spec.rb:1:in `require': cannot load such file -- CommandsExecutor (LoadError)
    from /var/lib/jenkins/jobs/getdone/workspace/spec/lib/commandExecutor_spec.rb:1:in `<top (required)>'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
    from /home/morten/.rvm/gems/ruby-1.9.3-p374/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

要求行只是说

```
require 'CommandsExecutor' 
```

并且 commandsExector.rb 位于我的 lib 目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:20:45.137

OS X 的文件系统默认不区分大小写，而 Linux 文件系统通常区分大小写。您说该文件已命名`commandExecutor.rb`，因此要求的正确方法是

```
require 'commandExecutor' 
```

PS：作为旁注，Ruby（以及大多数其他编程语言）的文件名中不使用大写字母是一种常见的约定，C# 和 Java 是一些突出的排除项。

# objective-c - 在 NSManagedObject 的子类中创建的 NSPredicate 崩溃

> ID：14548909
> 
> 赞同：0
> 
> 时间：2013-01-27T15:31:32.637
> 
> 标签：objective-c, macos, nspredicate, nsmanagedobject

当我从 NSManagedObject 的子类外部创建这样的谓词时，它工作得很好：

```
CNSTag *aTag = ...
_predicateForMatchingObjects = [NSPredicate predicateWithFormat:@"ANY tags == %@", aTag]; 
```

但是，当我尝试为我的类 CNSTag 提供函数时，如下所示，程序在尝试创建谓词时崩溃：

```
- (NSPredicate *)predicateForMatchingObjects {

_predicateForMatchingObjects = [NSPredicate predicateWithFormat:@"ANY tags == %@", self];
return _predicateForMatchingObjects;
} 
```

如果我在谓词中访问 self 的关键路径（例如，“ANY tags.name == %@”，self.name），它工作正常；我只是无法访问自我。有谁知道为什么会这样？

# c# - 共享一个事件处理程序的多个按钮不起作用

> ID：14548912
> 
> 赞同：0
> 
> 时间：2013-01-27T15:31:36.923
> 
> 标签：c#, events, event-handling

我在`EventHandler`为多个按钮工作时遇到了一些困难。他们将执行相同的工作，即链接到相同的表单 ( `ModuleTemplate`) 并使用与该模块相关的适当内容填充它。

我只粘贴了有问题的代码。这一切都编译得很好，第一个按钮（btnAudioNotetaker）工作正常，其他按钮什么也不做。

```
public void createAudioNotetaker()
{
    //this button click event works
    btnAudioNotetaker.Click += new EventHandler((sender, e) => btnModule_Click(sender, e, audioNotetakerDict, videoPathDict, pdfPathDict, audioPathDict));
}

public void createClaroRead()
{
    //this one doesn't work
    btnClaroRead.Click += new EventHandler((sender, e) => btnModule_Click(sender, e, audioNotetakerDict, videoPathDict, pdfPathDict, audioPathDict));
}

void btnModule_Click(object sender, EventArgs e, OrderedDictionary pageContent, OrderedDictionary videoPathDict, OrderedDictionary pdfPathDict, OrderedDictionary audioPathDict)
{
    //i want to use this event for each button
    ModuleTemplate newForm = new ModuleTemplate(pageContent, videoPathDict, pdfPathDict, audioPathDict);
    newForm.Show();
    this.Hide();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:12:19.883

我的错误，正如上面评论中所建议的那样，我没有在我的 switch 和 case 语句中调用我的 createClaroRead 函数。这么愚蠢的事情可以忽略。

谢谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:47:51.443

Lambda 很酷，但我认为这段代码更清晰。它可能会或可能不会解决您的问题（尝试此代码时可能会遇到编译器错误），但维护起来会容易得多。

```
public void createAudioNotetaker()
{
    //this button click event works
    btnAudioNotetaker.Click += commonClickHandler;
}

public void createClaroRead()
{
    //this one doesn't work
    btnClaroRead.Click += commonClickHandler;
}

void commonClickHandler(object sender, EventArgs e)
{
    btnModule_Click(sender, e, audioNotetakerDict, videoPathDict, pdfPathDict, audioPathDict));
} 

void btnModule_Click(object sender, EventArgs e, OrderedDictionary pageContent, OrderedDictionary videoPathDict, OrderedDictionary pdfPathDict, OrderedDictionary audioPathDict)
{
    //i want to use this event for each button
    ModuleTemplate newForm = new ModuleTemplate(pageContent, videoPathDict, pdfPathDict, audioPathDict);
    newForm.Show();
    this.Hide();
} 
```

# java - 迭代时出现 NoSuchElementException

> ID：14548913
> 
> 赞同：0
> 
> 时间：2013-01-27T15:31:38.300
> 
> 标签：java, exception, java.util.scanner

这段代码在第一次循环时运行得非常好，但是当我再次迭代它时（在执行完整程序之后）。它在我的代码中抛出一个`NoSuchElementException`，我根本没有关闭任何地方`Scanner`，所以可能是什么问题？

我还应该提到编译器给了我调用这个循环的方法所在的行，该行是：`l = scan.nextInt();`

```
Scanner scan = new Scanner(System.in);
int l;
do {
System.out.println("Please Select...:");
System.out.println("1\. for ...");
l = scan.nextInt();
}
while (l < 0 || l > 4); 
```

我的变量是小写字母“L”，这样就不会让人感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:54:16.463

`NoSuchElementException`当输入中没有数据时抛出。在您的代码中必须是这种情况，但只要您不提供完整的示例，就很难找到任何解决方案。我的第一个建议是使用方法检查输入中是否有任何数据，并且仅当第一个函数返回的值是时才`hasNextInt()`调用。`nextInt()``true`

# c# - SignalR 客户端每两秒重新连接到集线器

> ID：14548923
> 
> 赞同：3
> 
> 时间：2013-01-27T15:32:54.947
> 
> 标签：c#, wcf, azure, signalr

我的客户端每两秒重新连接到 SignalR 集线器。我想知道这是设计使然还是我的错误。

*   SignalR 版本：1.0.0-rc2
*   在 Windows Azure 自托管/无 iis 中托管 SignalR Hub（也没有服务总线等）
*   本地主机上的相同行为
*   我已将心跳间隔设置为 1 分钟，没有变化。还尝试了保持活动/连接超时。

客户：

```
var connection = new HubConnection("http://xyz.cloudapp.net/push");
connection.Start().Wait(); 
```

服务器：

```
var listenUrl = "http://xyz.cloudapp.net/push";
WebApplication.Start<Startup>(listenUrl ); 
```

Fiddler-屏幕截图 ![Fiddler-屏幕截图](../Images/90be38379522d15866adbdc29b33f7ef.png)

[更高的分辨率](http://250kb.de/u/130127/j/XD03olYtNByn.jpg)

日志（客户端、StateChanged 事件/HubConnection）：

```
16:20:48 State Changed: Disconnected -> Connecting
16:20:52 State Changed: Connecting -> Connected
16:20:53 State Changed: Connected -> Reconnecting
16:20:53 State Changed: Reconnecting -> Connected
16:20:55 State Changed: Connected -> Reconnecting
16:20:55 State Changed: Reconnecting -> Connected
[...] 
```

~~**问题 1：** 我可以做些什么来避免每个客户端因为重新连接而每两秒调用一次我的服务器？~~

~~**问题 2：** 如何获取有关重新连接“问题”的信息？有没有办法获取一些内部日志？~~

**编辑 1：** 我已将传输更改为长轮询：

```
connection.Start(new LongPollingTransport()).Wait(); 
```

我发现默认情况下使用长轮询和服务器发送事件。当我只使用长轮询作为传输时，重新连接不会每 2 秒（现在大约每分钟）发生一次。但也没有使用配置值（心跳等）。

**Question 3** 如何设置长轮询传输的重连时间？我找到了一个属性 ReconnectDelay ，但这似乎不是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:52:27.733

这是我的错。

我试图用一个新的孤立项目重现“问题”。我发现我的服务器应用程序正在使用旧的和过时的 SignalR 库。更新到最新版本后，它可以完美运行。大卫，谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T09:01:04.013

谢谢你，我解决了我的问题！

我在 SignalR winform 客户端中收到“System.Net.WebException：请求被中止：请求被取消”的异常。解决方案是使用：

```
HubConnection conn = new HubConnection(myURL);
conn.Start(**new LongPollingTransport()**).Wait(); 
```

代替

```
conn.Start().Wait(); 
```

# android - Android 广播接收器与服务

> ID：14548927
> 
> 赞同：81
> 
> 时间：2013-01-27T15:33:10.657
> 
> 标签：android, android-service, android-broadcast

我试图澄清android中广播接收器和服务之间的区别。

我了解活动可以通过`startService`意图调用来启动服务。

广播接收器可以在代码或清单中注册，并且可以使用`sendBroadcast`.

**你什么时候使用一个与另一个？**

我知道多个广播接收器可以监听相同的意图，而服务并非如此。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-27T15:47:17.163

**无论用户在前台做什么（用户可能在活动之间切换），服务**都意味着在后台执行某个操作一段时间。一个很好的例子是音乐播放器服务——用户开始通过音乐播放器应用程序播放音乐，但当他们退出应用程序时，音乐继续播放。

服务对于跨多个应用程序提供/管理对资源的公共访问也很有用。这通常用于系统资源，例如传感器。

**广播接收器**旨在响应意图（通常是由服务或系统事件发送的意图），做某事并完成。这里的一个例子可能是用户将支持 NFC 的手机触摸到标签，系统为其创建一个意图，并且注册的接收器处理它以更改某些设置（更改音量、打开蓝牙等）。

当一个意图通过 sendBroadcast 广播时，它将被发送到*所有*具有匹配意图过滤器的接收器。但是，重要的是要注意，在 API26+ 中，在清单中注册的大多数接收器在这种情况下不再被调用，[有关更多信息，请参阅 Google 文档](https://developer.android.com/preview/features/background-broadcasts.html)。

* * *

示例 1：假设您想要公开一个函数（可从任何想要使用它的应用程序中获得），该函数要求网站计算与 Kevin Bacon 的分离度。

请注意，此示例是“做某事并返回”，而不是执行长时间运行的后台操作。

您可以通过多种方式实现这一点：

**创建一个所有用户都编译到他们的应用程序中的库项目。**

*   您的代码现在有多个副本，它们都可能是不同的版本。
*   您无法批处理或缓存请求，因为每个请求都是独立处理的。

**创建一个广播接收器来处理每个请求。**

*   您的应用程序注册一个广播接收器以接受询问培根问题的 Intent
*   每个应用程序都会发送一个 Intent 来询问问题。
*   广播接收器接受 Intent 并且
    *   将请求传递给服务进行处理，该服务将 Intent 与结果一起发送给请求者
    *   向服务器发送请求，完成后将使用 Google Cloud Messaging 进行响应
*   因为所有请求都通过一个应用程序，您可以批处理/缓存结果
*   这总是异步的
*   API 是“意图”——不是公开功能的最友好方式

**创建一个服务来处理每个请求**

*   您的应用程序创建一个服务来处理请求，并通过 Binder 或使用 AIDL 公开 API
*   API 可以是同步的（直接调用并返回）或异步的（允许监听器注册并在结果准备好时调用监听器）。如果预计处理速度非常快，您应该只选择同步；服务器调用应该更频繁地异步处理
*   API 是“方法调用”——一种更友好的公开功能的方式

* * *

示例 2：您想要执行一些数据分析以查找数据中的一些模式

**后台线程**如果所有处理都发生在用户在同一个应用程序和同一个 Activity 中，那么后台线程（或者更好的是协程）将是一个好方法

**服务**如果您希望允许用户在执行处理时退出应用程序（并在稍后通知他们结果），或者允许他们在执行处理时通过同一应用程序中的多个活动进行，服务将成为更好的方法

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-01-27T15:48:56.323

**广播接收器**

在 Android 开发者博客上引用[Dianne Hackborn 的话](https://android-developers.googleblog.com/2010/04/multitasking-android-way.html)：

> 处理广播时，应用程序有固定的时间（当前为 10 秒）来完成其工作。如果它没有在那个时间内完成，则认为应用程序行为不端，并且它的进程会立即进入后台状态，以便在需要时被杀死以获取内存。

广播接收器受最大时间限制（通常为 10 秒），它们必须完成。

**服务**

如果您的操作需要更长的时间（连接到互联网可能需要一些时间）。最好在后台运行。为此，您绝对应该从接收器或 Activity 调用服务。他们最后被安卓操作系统杀死。

结论：

1.  一般来说，对您的应用程序很重要的所有工作（获取、解析、缓存、更新数据库）都应该转移到，`Service`因为它们在 Android 上长期存在。正如您几乎认为所有的社交网站都在那里`STICKY_SERVICES`做所有麻烦的工作。

2.  `BroadcastReceiver`主要用于启动服务。它通常取决于应用程序。大多数应用程序用于`ConnectivityManager`在网络处于 UP 或 DOWN 时进行广播。在这些的帮助下，`Service`由`BroadcastReceiver`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-27T16:02:39.137

首先，阅读[Broadcast Receiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)和[Services](http://developer.android.com/reference/android/app/Service.html)的文档。

[您可以在此处](http://www.vogella.com/articles/AndroidServices/article.html)和[此处](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)找到有用的教程。

最后，长话短说：

服务根据您的请求启动 (startService(intent))。您可以将广播接收器视为意图侦听器。

# c# - asp超链接和https

> ID：14548928
> 
> 赞同：0
> 
> 时间：2013-01-27T15:33:40.960
> 
> 标签：c#, asp.net, https

我有一个 asp.net 页面，其中包含很多指向不同页面的超链接。我需要将这些页面之一重定向为 https，而不仅仅是 http。一般来说，我一直在使用带有页面名称的 NavigateUrl 属性，但我可以找到任何使用 https 重定向到带有超链接的新页面的方法。

是否可以使用 https 从 asp:hyperlink 控件重定向到另一个页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:37:08.107

那么，[asp:LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)就是答案。

# java - Java NumberFormat：葡萄牙、卢森堡和其他国家缺少货币符号

> ID：14548929
> 
> 赞同：1
> 
> 时间：2013-01-27T15:33:44.213
> 
> 标签：java, android, locale, currency, number-formatting

在 Android 应用程序（使用的语言是 Java）的范围内，我想显示一个国家列表及其各自的货币。但是有一些奇怪的地方：

1.  对于某些语言环境，getDisplayCountry() 返回的值为空（因此我将这些国家过滤掉）
2.  通过 NumberFormat.getAvailableLocales() 列出某些国家/地区时，它们会出现多次，知道为什么吗？
3.  一些国家有一个带有货币符号和货币代码的条目，以及一个或多个带有货币代码但没有货币符号的条目（用“ **¤** ”表示）
4.  有些国家根本没有货币符号，例如葡萄牙和卢森堡，这两个国家都有欧元。然而，这不可能是因为缺少该符号，因为德国有欧元符号。

这是创建我稍后显示的列表的一段代码：

```
List<String> countries = new ArrayList<String>();
List<Locale> locales = new ArrayList<Locale>();

// Explicitly check for Locales needed to create currencies
Locale[] locales = NumberFormat.getAvailableLocales();
for (Locale locale : locales) {
  if (!locale.getDisplayCountry().isEmpty()) {
    String country = locale.getDisplayCountry();
    String currencySymbol = CurrencyAmount.getCurrencySymbol(locale);

    String formatted = String.format("%s,  %s", country, currencySymbol);
    Log.i(TAG, formatted);
        countries.add(formatted);
    locales.add(locale);
  }
} 
```

上面的代码产生以下日志语句（摘录）：

```
01-27 15:50:25.742: I/de.zainodis.SelectCurrency(13281): Deutschland, €

01-27 15:50:25.882: I/de.zainodis.SelectCurrency(13281): Portugal, ¤

01-27 15:50:25.742: I/de.zainodis.SelectCurrency(13281): Schweiz, CHF

01-27 15:50:25.742: I/de.zainodis.SelectCurrency(13281): Luxemburg, ¤
01-27 15:50:25.820: I/de.zainodis.SelectCurrency(13281): Luxemburg, ¤

01-27 15:50:25.906: I/de.zainodis.SelectCurrency(13281): Taiwan, ¤
01-27 15:50:25.914: I/de.zainodis.SelectCurrency(13281): Taiwan, NT$ 
```

我稍微修改了上面的代码，只显示条目，其中 getInstance(locale) 不会引发 IllegalArgumentException。如果区域设置的国家/地区不是受支持的 ISO 3166 国家/地区，就会出现这种情况。修改后的代码...

```
List<String> countries = new ArrayList<String>();
List<Locale> locales = new ArrayList<Locale>();

Locale[] locales = NumberFormat.getAvailableLocales();
for (Locale locale : locales) {
  if (!locale.getDisplayCountry().isEmpty()) {
    String country = locale.getDisplayCountry();
    String currencySymbol = CurrencyAmount.getCurrencySymbol(locale);

    try {
       Currency currency = Currency.getInstance(locale);
       String formatted = String.format("%s,  %s, %s", country, currencySymbol,
            currency.getCurrencyCode());
       Log.i(TAG, String.format("%s, %s", country, currencySymbol));
       SelectCurrency.countries.add(formatted);
       SelectCurrency.locales.add(locale);

    } catch (IllegalArgumentException e) {
       // Skip these countries
    }
  }
} 
```

...和输出（摘录）：

```
01-27 15:55:01.453: I/de.zainodis.SelectCurrency(13725): Deutschland,  €, EUR

01-27 15:55:01.632: I/de.zainodis.SelectCurrency(13725): Portugal,  ¤, EUR

01-27 15:55:01.453: I/de.zainodis.SelectCurrency(13725): Schweiz,  CHF, CHF

01-27 15:55:01.468: I/de.zainodis.SelectCurrency(13725): Luxemburg,  ¤, EUR
01-27 15:55:01.578: I/de.zainodis.SelectCurrency(13725): Luxemburg,  ¤, EUR

01-27 15:55:01.664: I/de.zainodis.SelectCurrency(13725): Taiwan,  NT$, TWD 
```

由于我想显示一个国家列表，每个国家都有各自的货币（作为符号），如果葡萄牙或卢森堡等国家没有附加货币符号，我该怎么办？我知道我可以选择显示货币代码，但是由于我将使用它们各自的货币呈现金额到 UI 中，我宁愿选择那些符号......我想我可以过滤掉货币符号为“¤ " 但我想知道：它是否保证是全世界每台 Android 设备上的那个符号？如果有人碰巧住在葡萄牙或卢森堡……怎么办？

这就是它的样子，它现在的样子：

![在此处输入图像描述](../Images/ee135e15dab670932bb8432f4d25df53.png)

在此示例屏幕截图中，比利时的条目没有货币符号（应该是 € 符号），但是在列表的后面，还有另一个比利时条目（实际上是几个......），如下所示：

![在此处输入图像描述](../Images/91dbfad9df58d05df35a4d7e82231db2.png)

因此，在比利时的情况下，我可以简单地将带有“¤”作为​​货币符号的那个踢掉，但是像葡萄牙这样没有正确货币符号条目的国家呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:57:27.947

谷歌代码问题有[问题](http://code.google.com/p/android/issues/detail?id=38622)

```
// http://code.google.com/p/android/issues/detail?id=38622
    public void test_getSymbol_38622() throws Exception {
        // The CLDR data had the Portuguese symbol for "EUR" in pt, not in pt_PT.
        // We weren't falling back from pt_PT to pt, so we didn't find it and would
        // default to U+00A4 CURRENCY SIGN (¤) rather than €.
        Locale pt_BR = new Locale("pt", "BR");
        Locale pt_PT = new Locale("pt", "PT");
        assertEquals("R$", Currency.getInstance(pt_BR).getSymbol(pt_BR));
        assertEquals("BR$", Currency.getInstance(pt_BR).getSymbol(pt_PT));
        assertEquals("€", Currency.getInstance(pt_PT).getSymbol(pt_BR));
        assertEquals("€", Currency.getInstance(pt_PT).getSymbol(pt_PT));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-15T21:29:20.847

是的，这是一个仅在 Android v.4.3中[修复](https://android-review.googlesource.com/45031/)的 Google 问题。我正在使用下面的解决方法来解决具有 pt_PT 语言环境的设备的此问题。

```
if (Locale.getDefault().toString().equals("pt_PT")) {
       mCurrencyNumberFormat = NumberFormat.getCurrencyInstance(Locale.getDefault());
       DecimalFormatSymbols dfs = ((DecimalFormat)mCurrencyNumberFormat).getDecimalFormatSymbols();
       dfs.setCurrencySymbol("\u20AC");
       ((DecimalFormat)mCurrencyNumberFormat).setDecimalFormatSymbols(dfs);
} 
```

所以现在显示的是 € 符号，而不是有问题的 ¤ 符号。享受 ）））

# java - 如何在 Eclipse 中安装 android-rss (org.mcsoxford.rss)？

> ID：14548932
> 
> 赞同：0
> 
> 时间：2013-01-27T15:34:09.113
> 
> 标签：java, android

没看懂教程 我尝试并搜索了一些帮助，但没有正常的教程如何在 Eclipse 中安装它。

链接：[https ://github.com/ahorn/android-rss](https://github.com/ahorn/android-rss)

我执行了 cmd 命令，但我不明白“安装”部分的最后一段。我需要对`.classpath`文件做什么？

如果有人可以向我解释如何使它工作，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:23:37.537

每个 Eclipse 项目都有一个`.classpath`文件。这允许 Eclipse 将您的导入引用到您的环境类路径之外的某个已注册的类路径。

在您的`.classpath`文件中，您将找到**唯一**的条目，如下所示：

```
<classpathentry kind="src" path="ejbModule"/> <!-- doesn't have to be "ejbModule" --> 
```

来自提供的`README`链接声明您必须将`path`属性更改为“/src/main/java”。所以你的新`src`类型将是：

```
<classpathentry kind="src" path="/src/main/java"/> 
```

我希望这有帮助。

# gwt - 'org.codehaus.mojo:gwt-maven-plugin' 的错误解析版本：插件需要 Maven 版本 2.1

> ID：14548933
> 
> 赞同：0
> 
> 时间：2013-01-27T15:34:11.190
> 
> 标签：gwt, maven, build

使用 maven 构建 pom.xml 文件时出现以下错误。

```
Error resolving version for 'org.codehaus.mojo:gwt-maven-plugin': Plugin requires Maven version 2.1 
```

下面是我的 pom.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test.group</groupId>
    <artifactId>WoofArchetypeResult</artifactId>
    <version>0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>WoofArchetypeResult</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <gwt.version>2.5.0</gwt.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>net.officefloor.plugin</groupId>
            <artifactId>officeplugin_woof</artifactId>
            <version>2.8.0</version>
        </dependency>
        <dependency>
            <!-- Remove if running stand alone -->
            <groupId>net.officefloor.plugin</groupId>
            <artifactId>officeplugin_woof_servlet</artifactId>
            <version>2.8.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
             <plugin>
                <!-- Standard JVM for compilation -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin> 
            <plugin>
                <!-- Compile GWT Java to JavaScript -->
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwt.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- Test WoOF within Servlet Container -->
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>8.1.8.v20121106</version>
                <configuration>
                    <connectors>
                        <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                            <port>18080</port>
                        </connector>
                    </connectors>
                    <stopPort>18181</stopPort>
                    <stopKey>officefloor</stopKey>
                </configuration>
                <executions>
                    <execution>
                        <id>start-jetty</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <daemon>true</daemon>
                        </configuration>
                    </execution>
                    <execution>
                        <id>stop-jetty</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- Run tests against WoOF within Servlet Container -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.13</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

在 cmd 上点击“mvn install”命令后。我正在构建错误之上。我的 Maven 版本是 2.0.11

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:48:54.467

简单来说你需要使用升级版的Maven。如果您坚持使用 maven 2，那么至少升级到最新版本的 Maven 2 即**Release 2.2.1**。

如果可以，请升级到 Maven 3 最新**版本 3.0.4**。

*您可能会花费大量精力来使旧东西正常工作，您不妨尝试将其用于构建新东西。*

# iphone - 在选项卡式视图控制器中设置标题？

> ID：14548937
> 
> 赞同：-2
> 
> 时间：2013-01-27T15:34:39.967
> 
> 标签：iphone, ios, objective-c, xcode-storyboard

在我的故事板中，我的应用程序从导航控制器开始，然后连接到选项卡式视图控制器，然后分支到三个单独的选项卡。问题是我可以弄清楚如何为各个选项卡设置标题？当应用程序启动时，它们都只是使用选项卡式视图控制器的标题。我还没有为故事板编写代码，但是有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:07:49.887

从标签栏引出的场景应该有`Tab Bar Item`：

![在此处输入图像描述](../Images/8e313a2a1090bdfd9b6e7242ac0dd037.png)

在“属性检查器”中有字段，您可以在其中定义选项卡栏项目的图像和标题： ![在此处输入图像描述](../Images/7bb522bc97cee8fb14033c8fa047de27.png)

您在此处输入的内容将显示在选项卡栏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:38:08.370

试试这个对你有用

[self setTitle:@"测试视图"];

# wordpress - 如何创建一个 Wordpress 循环来显示我的自定义字段？

> ID：14548938
> 
> 赞同：1
> 
> 时间：2013-01-27T15:34:45.420
> 
> 标签：wordpress

如此简单的事情应该更容易做到。

在我的列表页面上，我有一个侧边栏，可以拉出某些自定义帖子字段并显示标题和信息。可以在[这里](http://www.expeditionersafaris.com/place/4-day-thrillingt-wildlife-encounter-wildlife-encounters/)看到。（从“价格”开始的所有内容都是自定义字段。）

在显示此数据的 PHP 文件中，代码为：

```
if (!$preview){ 
    echo get_post_custom_listing_single_page($post->ID,'<p><span class="post_cus_field {#HTMLVAR#}">{#TITLE#} : </span>{#VALUE#}</p>');
} elseif ($preview && $_REQUEST['alook']){
    echo get_post_custom_listing_single_page(mysql_real_escape_string($_REQUEST['pid']),'<p><span class="{#HTMLVAR#}">{#TITLE#}</span> : {#VALUE#}</p>');
} else {
    echo get_post_custom_listing_single_page_preview($post->ID,'<p><span class="post_cus_field {#HTMLVAR#}">{#TITLE#} : </span>{#VALUE#}</p>');
} 
```

我只是想在帖子的底部（在主要信息下）重新创建它。我想我需要重新创建循环，然后调用上述信息，但我无法弄清楚这一点。

那里有任何能够提供帮助的 Wordpress 大师吗？

（此外，最终，我希望能够调用每个单独的自定义帖子字段（“价格”、“住宿”等......，然后在选项卡或手风琴脚本中显示它。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:21:59.937

您可以通过插入到 single.php 或其他对应主题文件中的此循环来回显所有帖子的自定义字段：

```
 $custom_fields = get_post_custom( get_the_ID() );
  $my_custom_field = $custom_fields['my_custom_field'];
  foreach ( $my_custom_field as $key => $value )
    echo $key . " => " . $value . "<br />"; 
```

然后，当您了解自定义帖子字段的键时，您可以通过以下方式一一调用它们

```
echo get_post_meta( get_the_ID(), 'custom-field-key', true); 
```

第一个循环只是为了让您了解正确的键是什么，因此之后您不再需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T06:26:45.833

```
$custom_fields = get_post_custom( get_the_ID() );

if  ($my_custom_field = $custom_fields['custom_field Name'])
{

  foreach ( $my_custom_field as  $value )
{
   echo 'Price: '.$value ;
}

} 
```

# objective-c - 如何使用快速对话框实现滑动删除

> ID：14548940
> 
> 赞同：6
> 
> 时间：2013-01-27T15:34:54.793
> 
> 标签：objective-c, iphone, swipe, quickdialog

我正在使用快速对话框作为表单，我正在尝试实现滑动删除并且不知道我会如何做到这一点。有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-29T23:43:32.380

您可以通过使用 QSortingSection 代替 QSection 并将 canDeleteRows 设置为 YES 来滑动以删除部分中的元素。

```
QSortingSection *foosection = [[QSortingSection alloc] init];
foosection.canDeleteRows = YES; 
```

像往常一样继续添加元素，您应该能够滑动每个元素以显示“删除”按钮。点击删除按钮后，该项目会自动从该部分中消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T23:29:02.200

答案是我认为的组合：[如何检测 iPhone SDK 中的滑动手势？](https://stackoverflow.com/questions/4279699/how-to-detect-swipe-gesture-in-iphone-sdk)

而且，可能是您真正担心的一点，如何[将新 QElement 添加/删除到该部分](https://github.com/escoz/QuickDialog/issues/258#issuecomment-8179931)（来自 github 问题）。

后者表明在这个例子`extraRepayAmount`中，从一个部分中删除元素的方法是这样的：

```
[self.extraRepaySection.elements removeObject:self.extraRepayAmount];
[self.quickDialogTableView reloadSections:[NSIndexSet indexSetWithIndex:2] withRowAnimation:UITableViewRowAnimationFade]; 
```

# c# - 如何使用 linq to xml 从具有相同元素和属性的复杂 xml 中提取数据

> ID：14548943
> 
> 赞同：0
> 
> 时间：2013-01-27T15:35:07.930
> 
> 标签：c#, xml-parsing, linq-to-xml

这是我第一次使用 Linq to xml，我正在努力从 xml 文件中提取一些数据。问题似乎是由于 xml 的格式化方式（这是我无法控制的），因为它具有相同的元素和属性。

```
<host starttime="1357755777" endtime="1357755993">
    <status state="up" reason="arp-response"/>
    <address addr="192.168.1.1" addrtype="ipv4"/>
    <address addr="00:50:56:90:77:9F" addrtype="mac" vendor="VMware"/>
    <hostnames>
        <hostname name="test1.test.com" type="PTR"/>
    </hostnames>
    <ports>
        <extraports state="closed" count="95">
            <extrareasons reason="resets" count="95"/>
        </extraports>
        <port protocol="tcp" portid="135">
            <state state="open" reason="syn-ack" reason_ttl="128"/>
            <service name="msrpc" product="Microsoft Windows RPC" ostype="Windows" method="probed" conf="10">
                <cpe>cpe:/o:microsoft:windows</cpe>
            </service>
        </port>
        <port protocol="tcp" portid="139">
            <state state="open" reason="syn-ack" reason_ttl="128"/>
            <service name="netbios-ssn" method="probed" conf="10"/>
        </port>
        <port protocol="tcp" portid="445">
            <state state="open" reason="syn-ack" reason_ttl="128"/>
            <service name="microsoft-ds" product="Microsoft Windows 2003 or 2008 microsoft-ds" ostype="Windows" method="probed" conf="10">
                <cpe>cpe:/o:microsoft:windows</cpe>
            </service>
        </port>
        <port protocol="tcp" portid="3389">
            <state state="open" reason="syn-ack" reason_ttl="128"/>
            <service name="ms-wbt-server" product="Microsoft Terminal Service" ostype="Windows" method="probed" conf="10"/>
        </port>
        <port protocol="tcp" portid="8081">
            <state state="open" reason="syn-ack" reason_ttl="128"/>
            <service name="http" product="Network Associates ePolicy Orchestrator" method="probed" conf="10"/>
        </port>
    </ports>
</host>
<host starttime="1357755777" endtime="1357755993">
    <status state="up" reason="arp-response"/>
    <address addr="192.168.1.2" addrtype="ipv4"/>
    <address addr="00:50:56:90:67:8F" addrtype="mac" vendor="VMware"/>
    <hostnames>
        <hostname name="test2.test.com" type="PTR"/>
    </hostnames>
    <ports>
        <extraports state="closed" count="97">
            <extrareasons reason="resets" count="97"/>
        </extraports>
        <port protocol="tcp" portid="53">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="domain" product="dnsmasq" version="2.33" method="probed" conf="10">
                <cpe>cpe:/a:thekelleys:dnsmasq:2.33</cpe>
            </service>
            <script id="dns-nsid" output="&#xa;  bind.version: dnsmasq-2.33&#xa;"/>
        </port>
        <port protocol="tcp" portid="81">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="http" product="Apache httpd" method="probed" conf="10">
                <cpe>cpe:/a:apache:http_server</cpe>
            </service>
            <script id="http-title" output="Did not follow redirect to https://192.168.100.14:445/ and no page was returned."/>
            <script id="http-favicon" output="Unknown favicon MD5: 95CDE3E49C5B2645F99AAAAABB6CD4C6"/>
            <script id="http-methods" output="No Allow or Public header in OPTIONS response (status code 403)"/>
        </port>
        <port protocol="tcp" portid="445">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="http" product="Apache httpd" method="probed" conf="10">
                <cpe>cpe:/a:apache:http_server</cpe>
            </service>
            <script id="http-title" output="400 Bad Request"/>
            <script id="http-methods" output="No Allow or Public header in OPTIONS response (status code 403)"/>
        </port>
    </ports>
</host> 
```

以上是我必须使用的 XML 示例，我对这个问题进行了一些简化，输出来自 nmap。

我需要的 XML 数据如下。对于 addrtype ipv4 address/addr 和 addrtype mac 每个端口/portid 的每个主机状态/状态地址/addr 和 address/vendor

```
 XDocument NmapScan = XDocument.Load(file);

    var data = from item in NmapScan.Descendants("host")
         select new 
         {
             status = item.Element("status").Attribute("state").Value,
             ip = item.Element("address").Attribute("addr").Value,
             iptype = item.Element("address").Attribute("addrtype").Value
         };

                foreach (var p in data)
                    Debug.WriteLine(p.ToString()); 
```

我发现的每个教程都没有针对这种类型的 XML 进行介绍。我可以得到每种类型的第一个条目，但不是第二个。我一直无法找到一种方法来遍历它们中的每一个。我想要的是有这个输出

状态 = 启动，ip = 192.168.100.171，iptype = ipv4，端口 = 22，端口 = 80

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:58:00.883

使用 LINQ：

```
foreach (XElement hostElement in NmapScan.Descendants("host"))
{
    // Gets the XElement "address" that have the attribute "addrtype" set to "mac"
    XElement macAddressElement = (from addressElement in hostElement.Elements("address")
                                    where addressElement.Attribute("addrtype").Value == "mac"
                                    select addressElement).Single();

    // Gets the XElement "address" that have the attribute "addrtype" set to "ipv4"
    XElement ipV4AdressElement = (from addressElement in hostElement.Elements("address")
                                    where addressElement.Attribute("addrtype").Value == "ipv4"
                                    select addressElement).Single();

    var p = new
    {
        status = hostElement.Element("status").Attribute("state").Value,
        addrIpv4 = ipV4AdressElement.Attribute("addr").Value,
        addrMac = macAddressElement.Attribute("addr").Value,
        addrVendor = macAddressElement.Attribute("vendor").Value,
        ports = (from portElement in hostElement.Element("ports").Elements("port")
                    select portElement.Attribute("portid").Value).ToList()
    };

    Console.WriteLine(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:42:17.173

您可以在原始选择中进行新选择。请参阅[如何仅将大型 xml 文件的一部分反序列化为 c# 类的答案中的示例？](https://stackoverflow.com/questions/14541158/how-to-deserialize-only-part-of-a-large-xml-file-to-c-sharp-classes/14541675#14541675)

# math - 立体校准真实世界坐标数学

> ID：14548944
> 
> 赞同：2
> 
> 时间：2013-01-27T15:35:08.597
> 
> 标签：math, opencv, matrix, geometry, stereoscopy

我已经实现了《Learning OpenCV》一书中提供的 Stereo 3D 示例。现在我想计算我在左侧图像上单击的像素的真实世界坐标。在这篇文章中，我遇到了这个公式：

Pc = [R|t] * Pw 其中 Pc 和 Pw 是凸轮和世界坐标，R 是旋转矩阵，t 是平移向量。

我已经计算了 [R|T] 部分，但是如何从这个方程计算 Pw 以及如何构建 Pc？我应该只考虑包含 [pixelx,pixely,0] 的 1x3 矩阵吗？

谢谢你的帮助！！！

# asp.net - 水平和垂直边框的不同图像 - CSS

> ID：14548946
> 
> 赞同：2
> 
> 时间：2013-01-27T15:35:10.137
> 
> 标签：asp.net, html, css, user-interface, border

我有两个我自己在 corel-draw 中创建的 png 图像，如下所示，1 个水平和 1 个垂直。

我想做这样的事情，在 css

```
.desiredSpan{
    border-top-image:horizontal.png
    border-bottom-image:horizontal.png
    border-left-image:vertical.png
    border-right-image:vertical.png
} 
```

我见过border-image 属性，但它使用相同的图像作为垂直和水平边框。虽然如果它可以解决我的问题，我不介意使用它。

![在此处输入图像描述](../Images/13c78b9dba3b99866f0cb59e6579358c.png)

![垂直的](../Images/95c0c354a419654d478f4a39ca641414.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:41:44.797

CSS3 中有所有这些选择器：

```
border-image:
border-top-image
border-right-image
border-bottom-image
border-left-image

border-corner-image:
border-top-left-image
border-top-right-image
border-bottom-left-image
border-bottom-right-image 
```

通过[http://www.css3.info/preview/border-image/](http://www.css3.info/preview/border-image/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:47:40.520

[关于CSS 边框](http://www.w3.org/TR/2002/WD-css3-border-20021107)的一切都在这里

但是，我猜它们在 IE 中不起作用。请看这里的兼容性：

[http://caniuse.com/#search=border](http://caniuse.com/#search=border)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:06:36.353

首先，请记住 Internet Explorer 不支持边框图像：http: [//caniuse.com/#search=border-image](http://caniuse.com/#search=border-image)

其次，border-image 只能与 1 个图像一起使用（所以你需要将它们组合起来，我为你做了，在这里：http: [//i.imgur.com/gP414jh.png](http://i.imgur.com/gP414jh.png)

第三，目前，Chrome 和 Firefox 仅支持“border-image”指令……不支持“border-top-image”等。

第四，这是您的示例中使用的 CSS：

```
.bordered {
    width: 500px; // or what you want. 500px is the image width
    border-width: 20px;
    border-image: url(http://i.imgur.com/gP414jh.png) 20 stretch;
} 
```

最后，我给大家做一个例子，看看如何处理border-image：[http ://codepen.io/ByScripts/pen/zHitp](http://codepen.io/ByScripts/pen/zHitp)

# c++ - extern C 返回类对象

> ID：14548947
> 
> 赞同：7
> 
> 时间：2013-01-27T15:35:11.983
> 
> 标签：c++, c, extern-c

我想要一个插件，名称更简单，可以在其他 C++ 代码中解析。

```
class B {
};

extern "C" B foo(); // to avoid name mangling in order to be loaded by dlsym 
```

而在程序的另一部分（也是在 C++ 中并与插件共享 B 类的相同定义）：

```
B (*func)();
func = dlsym("/path/to/so", "foo");
B m = func(); 
```

这样的代码是否会导致任何问题，即是否允许（按标准）在`extern "C"`函数中使用 C++ 类作为参数或返回类型？它似乎适用于我的 gcc，但其他人呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:44:30.410

这应该可行，但有几个条件：

*   如果您打算将 B 类的定义切换为其他内容，它将不起作用。您唯一可以更改的是 foo() 的定义。
*   插件和加载程序都必须在二进制级别上就类 B 的接口达成一致。切换编译器（包括版本和一些标志）可以改变这个接口。
*   您显然必须在 C++ 中转换 dlsym() 的返回值。
*   在 C 中使用类是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:05:46.147

将foo() 声明`extern "C"`为当然允许您通过 dlsym() 使用实际的、未损坏的函数名称来加载它，但否则不会影响加载后如何使用该函数。

通常的规则仍然适用。如果你破坏了 foo() 或 B 类的二进制兼容性，你将需要重新编译插件，就像如果它是一个常规的、非运行时加载的动态库你必须重新编译它一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T19:19:16.317

只要您坚持使用 C++ 并且仅使用 C++，它就会起作用。由于显而易见的原因，您将无法在 C 翻译单元中编译您的函数声明。（即，您将永远无法正确地向 C 编译器解释是什么`B`。）

所以，我在这里看到的唯一问题是 [C] 标签在您的问题上的含义是什么。您是否还需要某种与 C 的交叉兼容性？

# php - 带有 PHP 会话的 HTTPS 网络服务

> ID：14548949
> 
> 赞同：0
> 
> 时间：2013-01-27T15:35:32.940
> 
> 标签：php, ios, web-services

我需要在 PHP 中构建一个使用 HTTPS 和 PHP 会话的 WebService。如何从 iOS 获取服务（目标 c）以及登录服务器时如何保存/使用 php 的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:45:21.240

对于 PHP 会话，一般使用 cookie 在服务器和客户端之间进行交换。因此，您无需做任何事情，因为系统会自动在 HTTP 标头中处理 cookie。（见[这里](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html#//apple_ref/doc/uid/20001834-157091)）。

*注意：为确保您的应用程序接受 cookie（而不是禁用），您可以强制 cookie 接受策略为“始终”，使用`[[NSHTTPCookiesStorage sharedHTTPCookiesStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways]`.*

* * *

要查询您的 WebService，只需使用 Apple 的`NSURLConnection`类向它发送请求。

或者你可以使用一些第三方框架，让你的生活更轻松，为你和所有人构建请求，比如[著名的`AFNetworking`框架](https://github.com/AFNetworking/AFNetworking)，或者如果你打算在你的 PHP 服务器上实现一个 RESTful WebService，你也可以尝试一下[`RESTKit`](http://restkit.org/).

# javascript - 通过 ID 获取输入类型值，其中 display 不是 none

> ID：14548950
> 
> 赞同：2
> 
> 时间：2013-01-27T15:35:40.517
> 
> 标签：javascript, jquery, drupal

我有多个与条件选择相关的字段。如果 Condition 与其他输入字段不匹配，则与上述 div ID 中的样式（display：none）和匹配保持活动状态的样式相关联，它在上述 div ID 中设置（display：block）。这是在 drupal 中，所以我不'无法控制它......所以这是生成的示例 -

```
<div id="edit-field-p1brp-price" class="field-type-text field-name-field-p1brp-price field-widget-text-textfield form-wrapper" style="display: block;">
  <div id="field-p1brp-price-add-more-wrapper">
    <div class="form-item form-type-textfield form-item-field-p1brp-price-und-0-value">
      <label for="edit-field-p1brp-price-und-0-value">
        <input id="edit-field-p1brp-price-und-0-value" class="text-full form-text required" type="text" maxlength="255" size="60" value="5,98,000" name="field_p1brp_price[und][0][value]">
      </div>
    </div>
</div>
<div id="edit-field-sspps-price" class="field-type-text field-name-field-sspps-price field-widget-text-textfield form-wrapper" style="display: none;">
  <div id="field-sspps-price-add-more-wrapper">
    <div class="form-item form-type-textfield form-item-field-sspps-price-und-0-value">
      <label for="edit-field-sspps-price-und-0-value">
      <input id="edit-field-sspps-price-und-0-value" class="text-full form-text required" type="text" maxlength="255" size="60" value="4,65,000" name="field_sspps_price[und][0][value]">
      </div>
   </div>
</div>
<div id="edit-field-sspr1br-price" class="field-type-text field-name-field-sspr1br-price field-widget-text-textfield form-wrapper" style="display: none;">
  <div id="field-sspr1br-price-add-more-wrapper">
    <div class="form-item form-type-textfield form-item-field-sspr1br-price-und-0-value">
      <label for="edit-field-sspr1br-price-und-0-value">
      <input id="edit-field-sspr1br-price-und-0-value" class="text-full form-text required" type="text" maxlength="255" size="60" value="3,98,000" name="field_sspr1br_price[und][0][value]">
      </div>
    </div>
</div> 
```

我必须只获取上面 DIV 中 DISPLAY 为 BLOCK 的那个输入的值。我尝试使用以下可见的 DIV ID，但它没有返回并尝试使用以上 DIV ID 和值也没有发生（这是我尝试的最后一个代码）-

```
if (($("#edit-field-p1brp-price-und-0-value:block").length > 0)){
  var price = $('#edit-field-p1brp-price-und-0-value').val();
}
if (($("#edit-field-sspps-price-und-0-value:visible").length > 0)){
  var price = $('#dit-field-sspps-price-und-0-value').val();
}
if (($("#edit-field-sspr1br-price-und-0-value:visible").length > 0)){
  var price = $('#edit-field-sspr1br-price-und-0-value').val();
} 
```

更新 - -

我用于获取更改一个选择和警报的值的代码更新，但它只给出 NULL..

```
$(document).ready(function() {
        var price = null;
        $('div.form-item-field-membership-payment-type-und').change(function() {

          $("#edit-field-p1brp-price-und-0-value, #edit-field-sspps-price-und-0-value, #edit-field-sspr1br-price-und-0-value").each(function() {
                if($(this).is(':visible')) {
                    price = $(this).val();
                    alert(price);
                }
            });
        alert(price);   
    });  
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:45:25.660

你需要使用

```
$(selector).is(':visible') 
```

看看这个 jsfiddle，遍历你的字段

[http://jsfiddle.net/uuKHB/](http://jsfiddle.net/uuKHB/)

**更新**

我为你更新了 jsfiddle：

[http://jsfiddle.net/uuKHB/1/](http://jsfiddle.net/uuKHB/1/)

```
$("#edit-field-p1brp-price-und-0-value, #edit-field-sspps-price-und-0-value, #edit-field-sspr1br-price-und-0-value").each(function() {
...
} 
```

现在它遍历您选择的输入（查看选择器，您可以使用逗号分隔添加多个元素

**更新警报**

```
var price;
$("#edit-field-p1brp-price-und-0-value, #edit-field-sspps-price-und-0-value, #edit-field-sspr1br-price-und-0-value").each(function() {
    if($(this).is(':visible')) {
        price = $(this).val();
    }
});
alert(price); 
```

像这样 ;）

这是带有警报的更新jsfiddle

[http://jsfiddle.net/uuKHB/2/](http://jsfiddle.net/uuKHB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:40:52.987

您没有设置 display 属性，并且 display 的默认值是 inline-block。如果需要检查块或在条件中使用 inline-block，请将 display 属性设置为 block。您可以使用[css()](http://api.jquery.com/css/)访问显示属性。我想你有有效的 html 并且只有一个元素有`id = edit-field-p1brp-price-und-0-value`

**[现场演示](http://jsfiddle.net/rajaadil/5KvDV/)**

```
if($("#edit-field-p1brp-price-und-0-value").css('display') == 'block')
{
    var price = $('#edit-field-sspr1br-price-und-0-value').val();
} 
```

*如果 display 没有被阻塞，那么 else 部分将执行，这可以在* [这里](http://jsfiddle.net/rajaadil/5KvDV/1/)检查。

# jquery - rails ajax - 检查新故事

> ID：14548952
> 
> 赞同：1
> 
> 时间：2013-01-27T15:36:40.653
> 
> 标签：jquery, ruby-on-rails, ajax

我正在尝试建立一个类似推特的提要。我希望客户轮询以查看是否有基于`@feeds`集合的新提要。

我想我可以检查客户获得的最新提要，并进行查询以获取之后发生的任何提要。但是，这将限制我按时间排序提要。

有没有办法收集集合中的最新值？我最终想要实现类似于 facebook 在新闻提要中的头条新闻。

谢谢！

# java - Play 2.0 不会运行所有测试

> ID：14548953
> 
> 赞同：1
> 
> 时间：2013-01-27T15:36:50.467
> 
> 标签：java, testing, junit, playframework, playframework-2.0

我正在将应用程序移植到 Play 2.0，但由于某种原因，它没有运行所有测试。它找到所有的测试类。但只是没有在其中大多数中运行任何测试。我尝试将类移动到测试目录的基础，但这并没有什么不同。

它不运行的测试包含使用休眠 JPA 的持久性测试。这些类有一个通用的基类，用于管理跨测试的数据库状态。

我期待持久性测试会大放异彩，但是我只是得到了绿灯，因为它没有运行其中的任何测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:01:35.233

我会回答我自己的，以防其他人遇到这个问题。

如果您的设置步骤失败，例如 @BeforeClass 注释方法抛出异常，则 Play 将报告测试用例为 0 次测试中的 0 次运行。

# ember.js - 如何命名为 ember 编制索引的独立车把文件？

> ID：14548955
> 
> 赞同：0
> 
> 时间：2013-01-27T15:37:18.017
> 
> 标签：ember.js, handlebars.js

在本周早些时候发布的 peepcode 截屏视频中，我注意到您可以使用类似的东西为车把模板内联提供约定

数据模板名称=“索引/表”

但是，如果我将此模板从我的 HTML 文件中移出到一个独立的 .handlebars 文件中，那么它的正确名称是什么？如果我预编译它，ember 需要将它设置为什么模板名称？

余烬.模板[？？？]

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T19:38:37.580

我正在寻找的解决方案来自@wycats 本人

如果这是您的嵌套脚本模板（在某些 html 文件中）

```
<script type="text/x-handlebars" data-template-name="tables/index"></script> 
```

并且您决定删除内联脚本并使其成为一个独立文件，您需要预编译它并像这样注册模板

```
var input = Ember.Handlebars.precompile("{{outlet}}");
Ember.TEMPLATES['tables/index'] = Ember.Handlebars.template(input); 
```

这个文件将被称为 index.handlebars 嵌套在“tables”目录下，嵌套在“templates”目录下

对于任何关注这个的人，我确实为我为 django 开发人员编写的 npm 模块添加了对嵌套模板的支持（[django-ember-precompile](https://npmjs.org/package/django-ember-precompile)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:17:12.523

我认为这在很大程度上取决于您用于编译 Ember 的内容。Brunch 的做法与 Sprockets 不同。

但是一些一般的事情：

如果模板位于 .handlebars 文件中，则文件本身不需要任何内容​​，除了模板中需要的内容。

文件结构和命名约定只需​​要与您的路由器相匹配。所以文件树可能如下所示：

```
javascripts/templates/index/tables.handlebars 
```

使用 Rails Asset Pipeline 和 Ember Gem，不需要告诉 Ember 模板，只要它们在 app/assets/javascripts/templates 文件夹中。

当我们使用早午餐（但这是在旧版本的 Ember 上）时，我们必须手动要求所有文件，只需使用标准 JavaScript 要求，例如：

```
require('templates/topnav'); 
```

# css - 在 twitter 引导媒体网格中以不同方式堆叠元素

> ID：14548957
> 
> 赞同：1
> 
> 时间：2013-01-27T15:37:25.427
> 
> 标签：css, twitter-bootstrap

在 twitter bootstrap 中使用媒体网格时，如果我在一行中有 4 个跨度，然后缩小浏览器，这些会变小并最终堆叠为 4 个全宽行。这很好，但在两者之间，我希望在其中一个断点中将它们排列为 2 列，然后最终将主题排列为一个。换句话说，默认情况下，它似乎从 4 列直接变为 1 列，但我希望它介于两者之间的 2 列。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:38:43.950

我假设您正在使用引导响应。如果您使用的是未经修改的版本，那么您需要做的就是创建另一个媒体查询，其中每个具有 span* 类的 div 的宽度为 50%。为了与引导程序完全一致，您也希望将 gridGutterWidth 合并到样式中，并从第一个类型中删除左边距。根据您使用的 css/less/sass 为媒体查询执行正确的语法。如果用于 sass 或 scss

这里有一些示例 CSS 可以帮助您入门：

```
@media (min-width: 794px) and (max-width: 1060px) {
div[class*="span"] {
    width: 48%;
    margin-left: 2%;
}
div[class="span"]:first-of-type {
    margin-left: 0;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:50:46.263

那么你想要实现的是改变响应性。为此，您必须使用 DMTinter 上述评论中提到的媒体查询 @media。

```
 /* Large desktop */
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

这使您能够根据屏幕尺寸更改布局，您可以创建任何类似的响应宽度。

希望这可以帮助！

# jquery - jQuery在悬停时向上/向下滑动

> ID：14548959
> 
> 赞同：2
> 
> 时间：2013-01-27T15:37:40.227
> 
> 标签：jquery

我需要做，div“更改”等待结束，向下滑动 div“用户名”并开始向上滑动，悬停时相同

演示：http: [//jsfiddle.net/2jHBQ/3/](http://jsfiddle.net/2jHBQ/3/)

```
 <div id="avatar">
        <div id="username">Madona</div>
        <div id="change">Change profile</div>
    </div>

$("#avatar").hover(function () {

    $("#username").slideToggle(250);
     $("#change").slideToggle(250);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:51:33.507

如果我正确理解您的问题，事件的缩进过程是：

*   `#avatar`悬停
    1.  `#username`滑下并隐藏
    2.  `#change`显示并向上滑动
*   `#avatar`未悬停
    1.  `#change`滑下并隐藏
    2.  `#username`显示并向上滑动

在这种情况下，您需要两个不同的处理程序（一个用于鼠标进入，一个用于鼠标离开），因为顺序是相反的。

```
$("#avatar").hover(function () {
    $("#username").slideToggle(250, function () {
        $("#change").slideToggle(250);
    });
}, function () {
    $("#change").slideToggle(250, function () {
        $("#username").slideToggle(250);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:52:12.803

您必须使用[**slideToggle()**](http://api.jquery.com/slideToggle/)的回调，如果您还希望它退出，您还需要指定[**hover()**](http://api.jquery.com/hover/)方法的 handlerOut 函数，只是以相反的顺序，类似于：

```
$("#avatar").hover(function () {
    $("#username").slideToggle(250, function () {
        $("#change").slideToggle(250);
    });
}, function () {
    $("#change").slideToggle(250, function () {
        $("#username").slideToggle(250);
    });
}); 
```

[**演示**](http://jsfiddle.net/7fNbM/)- 一个接一个地滑动 - 双向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:48:33.167

您可以使用 .delay() 方法。如您所见，它在这里工作得很好：

[http://jsfiddle.net/2jHBQ/4/](http://jsfiddle.net/2jHBQ/4/)

```
$("#avatar").hover(function () {

    $("#username").slideToggle(250);
     $("#change").delay(250).slideToggle(250);
}); 
```

您可以在此处准备 API：http: [//api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T15:45:29.300

不知道我是否明白你想要什么。尝试这个？

```
 $("#avatar").hover(function () {
$("#username").slideToggle(250,function () {
        $("#change").slideToggle(250);
    });  

}); 
```

或者你可以使用`.mouseenter()`

# c - 数组存储问题

> ID：14548960
> 
> 赞同：1
> 
> 时间：2013-01-27T15:37:39.600
> 
> 标签：c, pic

有以下代码。

```
unsigned char raindays[31];
void midnat(void)   //thing to do at midnight. shift of date.
{
    int d;
    week_day++;
    if (week_day==7) week_day=0;
        r_regn=r_regn+today_rain;

    for (d==29;d>0;d--)
    {
        raindays[d]=raindays[d-1];
    }

    raindays[0]=0;

//  d--;

    raindays[30]=today_rain;
    today_rain=0;

} 
```

但是“数据”不是正确的。我希望“raindays[29]”中的数据将 raindays[28] 中的值降至 0。但它不会正确移动，只有第一个“数据”是正确的，没有其他内容被移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:39:14.360

替换这个

```
for (d==29;d>0;d--) 
```

和

```
for (d=29;d>0;d--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:45:21.607

你有几个问题。

1.  您应该`=`在`for`循环设置中使用，而不是`==`.

2.  循环不应该从 开始`30`，不是`29`吗？

3.  我认为您正在向后使用赋值运算符。如果您想复制`raindays[29]`到`raindays[28]`，然后将该值传播到`raindays[27]`等，您需要使用：

    ```
    raindays[d - 1] = raindays[d]; 
    ```

    不是反过来。

4.  *在* `raindays[29]`开始复制循环之前，您没有放入任何东西。这意味着您将只是复制随机数据，即使您确实进行了上述两个修复。

替代答案：

1.  你还是应该用`=`，不是`==`。

2.  循环仍然从错误的位置开始。

3.  如果您尝试复制*up*，则您的赋值语句是正确的，但是：

4.  在开始复制之前，您仍然需要*在数组中放入一些东西。*由于您没有显示 的​​定义`raindays`，因此很难说这是否重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:47:27.490

尝试这个：

```
void midnat(void)  //thing to do at midnight. shift of date.
     {int d;
     week_day++;
    if (week_day==7) week_day=0;
    r_regn=r_regn+today_rain;

    for (d=30;d>0;d--)
{
    raindays[d-1]=raindays[d];

 }
   raindays[0]=0;

    //  d--;

     raindays[30]=today_rain;
    today_rain=0;

     } 
```

# javascript - 开始将代码转换为客户端

> ID：14548961
> 
> 赞同：1
> 
> 时间：2013-01-27T15:37:41.190
> 
> 标签：javascript, asp.net, ajax, html

我想将我的`asp.net web forms`应用程序部分背后的代码转换为客户端 ajax、javascript……不知道是什么。

我想这样做的原因是，如果互联网连接丢失，应用程序将能够脱机工作。

我有`linq2sql`数据绑定控件，我知道这需要一些工作。

我只是希望有人能指出我正确的方向，这样我就不会浪费更多时间。

最终我会将这个应用程序转换为`MVC`，但我还有很多学习要做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:58:53.453

嗯，这不完全是一个简单的任务。但是，如果您计划好您的步骤，您可以使其更容易。

我会从建立一个站点地图开始。然后确定哪些页面将被转换为视图，哪些控件将被转换为部分视图或 HTML 助手。

例子：

您将 Default.aspx 作为 Web 窗体页。Default.aspx 使用 GridControl.ascx 控件。在 MVC 中，它可能是 Home Controller 上使用 GridControl 部分视图的 Index 视图。

一旦您绘制了网站的所有这些部分，编写代码就会容易得多。我绝对建议您在开始编写代码之前制定计划。

# c++ - 将 istream 传递给函数

> ID：14548962
> 
> 赞同：4
> 
> 时间：2013-01-27T15:37:41.437
> 
> 标签：c++, ifstream, istream

我正在制作一个类似于口袋妖怪想法的游戏类型程序。我们有一个锦标赛类，它跟踪几个团队（它自己的类），它由宠物（它自己的类）组成，不同种类的宠物是 CPet 的子类。

我们正在尝试将文件名传递给 main，从 main 将该文件名传递给 Tournament 类。在 Tournament 类中，我们使用以下命令打开文件：

```
 14 //Construct a tournament
 15 CTournament::CTournament(const char *Filename){
 16         //opening file
 17         ifstream inFile(Filename, ios::in);
 18         if(inFile.bad()){
 19                 cout << "File error" << endl;
 20                 return ;
 21         }
 22          //get Teamlist for tournament
 23          while(!(inFile.eof())){
 24                  CTeam* temp = new CTeam;
 25                  temp->ParseTeam(inFile);
 26 
 27                  TeamList.push_back(temp);
 28          }
 29 } 
```

在这里，我们将 inFile 传递给 CTeam.ParseTeam，如下所示：

```
 30 void CTeam::ParseTeam(std::istream in){
     31   string readline;
     32   getline(in, readline);
     33   this->TeamName = readline;
     34   while(!(in.eof())&&(readline != " " || readline != "/n"))
     35   {
     36           getline(in, readline);
     37           this->Parse(readline);
     38   }
     39 } 
```

我们得到了错误：

```
In file included from /usr/include/c++/4.4/ios:39,
                 from /usr/include/c++/4.4/ostream:40,
                 from /usr/include/c++/4.4/iostream:40,
                 from CTournament.h:11,
                 from CTournament.cpp:8:
/usr/include/c++/4.4/bits/ios_base.h: In copy constructor 'std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)':
/usr/include/c++/4.4/bits/ios_base.h:790: error: 'std::ios_base::ios_base(const std::ios_base&)' is private
/usr/include/c++/4.4/iosfwd:47: error: within this context
/usr/include/c++/4.4/iosfwd: In copy constructor 'std::basic_istream<char, std::char_traits<char> >::basic_istream(const std::basic_istream<char, std::char_traits<char> >&)':
/usr/include/c++/4.4/iosfwd:53: note: synthesized method 'std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)' first required here 
CTournament.cpp: In constructor 'CTournament::CTournament(const char*)':
CTournament.cpp:25: note: synthesized method 'std::basic_istream<char, std::char_traits<char> >::basic_istream(const std::basic_istream<char, std::char_traits<char> >&)' first required here 
CTournament.cpp:25: error:   initializing argument 1 of 'void CTeam::ParseTeam(std::istream)' 
```

我知道有一个类似的问题，他没有包括 fstream。我们已经将它包含在两个头文件中。

我认为这可能是没有将正确的类型传递给 PraseTeam 的问题，但是我找不到任何关于如何将文件传递给 ParseTeam 以验证我是否正确执行的非常具体的内容。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T15:41:21.973

您需要通过引用传递流，因为流通常不可复制：

```
void CTeam::ParseTeam(std::istream &in) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:19:35.163

正如@dasblinkenlight 已经指出的那样，您需要/想要通过引用传递流。

但这只是冰山一角。您的代码有许多更有害的问题。其中最主要的是如下代码：

```
while(!(inFile.eof())) 
```

像这样的代码被破坏了。它行不通。它从来没有，也永远不会（除非发生一些重大奇迹）。几乎不可能在循环中放置一个条件（使用 break 语句）以在正确的时间退出循环——但你还没有这样做，几乎没有其他人这样做，当你这样做时，你可能以及将循环本身变成`while (true)`，因为它总是会在正确的时间退出循环的*其他*逻辑 - 因为这个循环条件不能也不会。[我的意思不是在那里听起来刺耳或讨厌，只是想完全清楚这段代码绝对不起作用*。* ]

您在这里再次遇到相同的基本问题：

```
 while(!(in.eof())&&(readline != " " || readline != "/n")) 
```

这增加了我猜是另一个（虽然不太常见且更容易修复）的问题 - 你`"/n"`几乎肯定是打算成为`"\n"`.

在大多数情况下，您真正​​想要/需要做的是从流中读取某些内容，并让执行读取的函数返回对流的引用。这将让您读取项目，直到读取失败（此时应设置流的故障位）。完成此操作后，您可以使循环以读取成功为条件。在*大多数*情况下，命名该函数很方便`operator>>`，因此读取类的对象使用与读取 int 之类的东西相同的语法。

例如，让我们看一下您的`parseTeam`：

```
 void CTeam::ParseTeam(std::istream in){
   string readline;
   getline(in, readline);
   this->TeamName = readline;
   while(!(in.eof())&&(readline != " " || readline != "/n"))
   {
           getline(in, readline);
           this->Parse(readline);
   }
 } 
```

如果由我决定，我会写一些更像这样的东西：

```
std::istream &operator>>(std::istream &is, CTeam &t) { 
     std::getline(is, t.Teamname);
     CTeam::member member;
     while (is >> member)
         t.members.push_back(member);
     return is;
} 
```

然后，`CTeam`沿着这条一般路线会有一些东西：

```
class CTeam {
    // ...
public:
    class member { 
        // ...     
        friend std::istream &operator>>(std::istream &is, member &m) { 
            // code to read one team member from is
        }
    };
}; 
```

我还应该补充一点，在不了解更多有关该程序的情况下，该组织绝对*不是*具体的——例如，尚不清楚我所展示的实体是否`CTeam::member`真的能够存在于团队环境之外。如果可以，那么您（几乎可以肯定）想让它成为 CTeam 之外的独立类。目前，我只是在猜测如何根据我从您发布的代码中收集到的内容来组织代码。

总结：任何形式的东西都`while (!whatever.eof())`被不可挽回地破坏了。你几乎总是想要`while (read_something())`。C++ 中的约定是用于`>>`从流中读取项目。尽可能/如果可能，请遵循该约定。哦，是的，您几乎总是希望通过引用传递流（例外是您需要使用指向流的指针来代替的奇怪时间 - 不寻常，但它确实会一次又一次地发生）。

# android - ViewPager 屏幕幻灯片奇怪的伪影

> ID：14548964
> 
> 赞同：1
> 
> 时间：2013-01-27T15:37:52.373
> 
> 标签：android, android-layout, android-widget, android-viewpager, android-ui

我在我的 GridView 片段照片应用程序（gridview 中的照片布局，单击照片时将开始可滑动全屏）的 Android 开发网站上按照[此处](http://developer.android.com/training/animation/screen-slide.html)的示例进行操作。

我得到了这个奇怪的伪影，每张向左/向右滑动的照片都会留下自己的痕迹，当上一张照片比下一张大时，这一点最为明显。

*注意：这不是电话相关的问题。

截图如下：

![ViewPager 工件](../Images/b6ef4ede9eb076b6ed46daf50a6754b8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:07:36.320

好吧，终于找到了罪魁祸首：我将这个 Android 主题用于全屏 ViewPager 框架布局。

```
 <style name="FullscreenTheme" parent="android:Theme.NoTitleBar">
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowBackground">@null</item>
        <item name="buttonBarStyle">@style/ButtonBar</item>
        <item name="buttonBarButtonStyle">@style/ButtonBarButton</item>
    </style> 
```

改用它以使其正常工作：

```
<style name="AppTheme.FullScreen" parent="@android:style/Theme.Black.NoTitleBar.Fullscreen" /> 
```

# .htaccess - nginx htaccess 重写

> ID：14548969
> 
> 赞同：0
> 
> 时间：2013-01-27T15:38:21.567
> 
> 标签：.htaccess, nginx, rewrite

如何将其转换为 nginx 格式？谢谢;

```
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^(.*)$ ./index.php?request=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:27:54.230

在 Nginx 中，重写对 .php 文件的请求将为 PHP 源提供服务 - 没有`mod_php`自动生成 FastCGI 进程，而是使用 PHP-FPM（我推荐）或[生成 FastCGI 进程](http://wiki.nginx.org/PHPFcgiExample)。

假设你已经设置好了，你会想要使用`try_files`指令（[docs](http://wiki.nginx.org/HttpCoreModule#try_files)），*比如*：

```
location / {
    try_files $uri $uri/ /index.php?request=$uri&$args;
} 
```

# algorithm - 图表数据的想法

> ID：14548970
> 
> 赞同：0
> 
> 时间：2013-01-27T15:38:40.917
> 
> 标签：algorithm, graph, charts, google-visualization

我有一组像这样的值（温度读数）：0,1,3,3.3,3.44,10,11,11,11.1,11.4,11.4,11.5,12.1,13.1,14,15,19,50 ,67,70,81。

我需要的是一种类似于附图中的水平线图，但它可以自动将这些值拆分为 3 个智能区间（对于我们的示例，我们看到大多数数字在 10 到 15 之间，因此这将是主要区间，其他 2 个用于小于 10 的数字和大于 15 的数字）。

所以绘制的数据类似于： 10% 表示 1-10 之间 70% 表示 10-15 之间 20% 表示 15+

有人有想法么？！

谢谢

[点击查看所需图表类型的示例](http://i.stack.imgur.com/FoTsm.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:01:55.693

你所描述的基本上是一个**一维聚类问题（这里有一个关于**[stats.SE](https://stats.stackexchange.com/questions/13781/clustering-1d-data)的类似问题）。

有很多算法可以做到这一点，例如[k-means](http://en.wikipedia.org/wiki/K-means)或[Expectation-Maximisation](http://en.wikipedia.org/wiki/Expectation_maximization)。如果您正在寻找简单的东西，我会建议前者。

一旦你有了你的集群，你剩下要做的就是将数据插入到你想要使用的任何图表 API 中。

# java - 计算相似度度量

> ID：14548971
> 
> 赞同：0
> 
> 时间：2013-01-27T15:39:13.840
> 
> 标签：java, wordnet

我正在使用 JWNL 并根据 wordnet 计算字符串之间的相似性度量，我运行以下代码：

```
import java.io.FileInputStream;
import java.util.HashMap;
import java.util.Map;

import net.didion.jwnl.JWNL;
import shef.nlp.wordnet.similarity.SimilarityInfo;
import shef.nlp.wordnet.similarity.SimilarityMeasure;

public class wordnet
{

public static void main(String[] args) throws Exception 
{
    //Initialize WordNet - this must be done before you try
    //and create a similarity measure otherwise nasty things
    //might happen!
    JWNL.initialize(new FileInputStream("test/wordnet.xml"));

    //Create a map to hold the similarity config params
    Map<String,String> params = new HashMap<String,String>();

    //the simType parameter is the class name of the measure to use
    params.put("simType","shef.nlp.wordnet.similarity.JCn");

    //this param should be the URL to an infocontent file (if required
    //by the similarity measure being loaded)
    params.put("infocontent","file:test/ic-bnc-resnik-add1.dat");

    //this param should be the URL to a mapping file if the
    //user needs to make synset mappings
    params.put("mapping","file:test/domain_independent.txt");

    //create the similarity measure
    SimilarityMeasure sim = SimilarityMeasure.newInstance(params);

    //get a similarity that involves a mapping
    SimilarityInfo d=sim.getSimilarity("english", "english");
    System.out.println(d.getSynset1());
    System.out.println(d.getSynset2());
    System.out.println(d.getSimilarity());
    System.out.println(d);

}

} 
```

但我不知道为什么结果为零？！

结果是：

> 2013 年 1 月 27 日晚上 7:03:00 net.didion.jwnl.util.MessageLog doLog
> 信息：安装字典 net.didion.jwnl.dictionary.FileBackedDictionary@48fbc0
> [Synset：[偏移量：6074471] [POS：名词] 词：英语——（研究英语语言文学的学科）]
> [同义词：[偏移量：6074471] [词性：名词] 词：英语——（研究英语语言文学的学科）]
> 0.0
> english#n# 3 英语#n#3 0.0

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T17:05:48.057

你必须确保使用对应的 WordNet 字典尝试 Wordnet 2.0 否则尝试 WS4J 使用嵌入 Wordnet 3.0 的系统集之间的相似性度量

# javascript - 作为 if 语句的一部分的可评估字符串？

> ID：14548976
> 
> 赞同：0
> 
> 时间：2013-01-27T15:39:28.040
> 
> 标签：javascript, if-statement

我想要这样：

```
var b = 2
var a = 1

var str = " && b == 2"

if (a == 1|str|) { some code } 
```

我想将“str”放在代码中，我试过这个：

```
document.write("<script lang='javascript'>" + "if (a == 1" + str + ") { some code }" + "</script>") 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:49:23.593

您可以使用 - 就像评论中提到的那样 - 来完成您想要做的事情`eval()`，就像这样：

```
var b = 2
var a = 1

var str = " && b == 2"

if (eval("a == 1" + str) { //some code } 
```

但是， eval 被认为是一种不好的做法。这是因为很难知道要输入的字符串的确切内容，`eval()`因此无法预测代码会做什么。

更好的解决方案可能是使用布尔变量：

```
var b = 2;
var a = 1;

var bCorrect = (b == 2); // parentheses are not required, but do make it clearer.

if(a ==1 && bCorrect) { // some code} 
```

我希望这可以帮助您创建一个好的解决方案。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:47:34.403

您应该能够使用：

```
if (eval("a == 1" + str)) 
```

但是您可能会想出一个更好的方法来做到这一点。也许你应该使用一个取值的函数而不是字符串`a`？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T16:02:51.007

您可以使用以下代码。我认为它会解决你的问题。

```
<script lang='javascript'>

 var b = 2;
var a = 1;
var str = " && b == 2"
if ("a == 1"  + str ) { 
alert("ok");  //do something
} 
```

# windows-runtime - 增强变焦性能

> ID：14548981
> 
> 赞同：1
> 
> 时间：2013-01-27T15:40:16.290
> 
> 标签：windows-runtime, winrt-xaml

我正在开发 C#/XAML WinRT 应用程序。我有一张画布，上面有许多 Path 孩子。我在根级别使用 GestureRecognizer 和 RenderTransform 来支持画布周围的无限平移和缩放。翻译转换效果很好，但我注意到缩放时呈现延迟。我尝试在缩放时在画布上使用 BitmapCache，这在视觉上使它看起来像在缩放操作期间没有重绘子路径，但性能并没有提高。

如果我在画布周围使用 ScrollViewer 而不是自定义缩放，则性能非常好，它看起来很像我的 BitmapCache（在缩放操作完成之前不会清理子路径），但是 ScrollViewer 的其他方面我不'不想要。关于如何让自定义 RenderTransform 在缩放/缩放具有大量子路径的画布时与 ScrollViewer 一样执行的任何建议？

# python - 如果我删除字符串引用，python 会释放内存吗？

> ID：14548983
> 
> 赞同：1
> 
> 时间：2013-01-27T15:40:35.903
> 
> 标签：python

即使 int 值已被删除，Python 也会保留分配给 int 值的空间，如下所示：

```
age = 9999
del age 
```

内存存储的变量age将用于存储其他int值，因此永远不会为此内存调用free函数，但我不知道字符串对象是否使用相同的策略来管理内存？我的意思是永远不会释放字符串的内存分配。

为什么 python 永远不会为 int 对象释放内存，请阅读此博客： [http ://www.laurentluce.com/posts/python-integer-objects-implementation/](http://www.laurentluce.com/posts/python-integer-objects-implementation/)

> python 将管理一个 free_list(python-2.7.3 source code:intobject.c line:45) 来保存一个 int 对象的每个内存分配，并且永远不会释放它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:46:04.963

Python 为您管理所有内存。如果一个值被一个名称引用，它将保留在内存中。一旦一个值不再被任何名称引用，解释器就可以自由地回收内存。您不必担心这一点。

我不明白你的例子，或者你为什么认为“年龄”使用的内存会被再次使用。请记住，Python 名称不像 C 变量：它们不代表分配的内存。它们是可以引用值的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:01:35.890

如果您查看 python 字符串实现，您会发现相关行：

```
op = (PyStringObject *)PyObject_MALLOC(sizeof(PyStringObject) + size); 
```

这表明字符串只是使用 python 的 malloc 分配的。他们不使用像整数这样的池，因为 python 字符串对象的大小取决于字符串的长度。所以你不能像处理整数一样使用池。

See: [http://www6.uniovi.es/python/dev/src/c/html/stringobject_8c-source.html](http://www6.uniovi.es/python/dev/src/c/html/stringobject_8c-source.html)

# java - 如果 XML 具有附件标记，则 DOM 解析器抛出空指针异常

> ID：14548986
> 
> 赞同：0
> 
> 时间：2013-01-27T15:40:48.633
> 
> 标签：java, android, domparser

我正在创建一个 android 应用程序来解析 RSS 提要，在过去的几周里它一直运行良好。但最近其中一篇文章有​​一个`<enclosure>`标签，应用程序停止工作，logcat 指出 DOMParser 抛出了 NullPointerException。
我经历并尝试了我对Java的了解可能做的所有事情。但无济于事。

*附带说明一下，如果我手动删除有问题的标签，问题就解决了，应用程序再次正常工作。*

**这是我正在解析的 xml**

```
<item>
<title>Title</title>
<link>Link</link>
<pubDate>Sun, 27 Jan 2013 05:08:30 +0000</pubDate>
<dc:creator></dc:creator>
<guid isPermaLink="false">guid</guid>
<content:encoded>
Content
</content:encoded>
<enclosure url="" length="22836034" type="audio/mpeg"/>
</item> 
```

*我删除了不相关的标签并替换了信息以保护隐私并保持简短*

**和解析器的一部分：**

```
Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nl = doc.getElementsByTagName("item");

            int length = nl.getLength();

            for (int i = 0; i < length; i++) {
                Node currentNode = nl.item(i);
                RSSItem _item = new RSSItem();

                NodeList nchild = currentNode.getChildNodes();
                int clength = nchild.getLength();

                for (int j = 1; j < clength; j = j + 2) {

                    Node thisNode = nchild.item(j);
                    String nodeContent = null;
                    String nodeName = thisNode.getNodeName();

                    nodeContent = nchild.item(j).getFirstChild().getNodeValue(); 
```

在 logcat 它告诉我这一行：

```
nodeContent = nchild.item(j).getFirstChild().getNodeValue(); 
```

是 NullPointerException 的原因，但正如我之前所说，如果提要没有`<enclosure>`标签，它就可以正常工作。

所以总结一下，如果XML文件有`<enclosure>`标签，就会导致应用程序不再工作。但是没有标签，它工作正常。我想要做的是要么忽略标签，要么（正确地）删除它，然后继续解析文档的其余部分。
目前没有什么对我有用，这就是我在这里问的原因。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:46:52.893

好吧，是的-您要询问 . 的每个子节点的第一个子节点的值`item`。

该`enclosure`节点没有任何子节点，因此*返回*[`getFirstChild`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getFirstChild%28%29)null，如下所述：

> 此节点的第一个子节点。如果没有这样的节点，则返回 null。

So it's fine to call `getFirstChild()` on any node, but you should then check whether the value is null before you call `getNodeValue()`.

# vb.net - 模块和类有什么区别？

> ID：14548991
> 
> 赞同：22
> 
> 时间：2013-01-27T15:41:09.530
> 
> 标签：vb.net, visual-studio

在 Visual Studio 中将新文件添加到 VB.Net 项目时，我可以选择“类”和“模块”。一个类被描述为

```
An empty class file 
```

虽然一个模块被描述为

```
A file for storing groups of functions 
```

这似乎意味着一个模块不如一个类有用，因为一个类可以存储函数组等等。

一个模块只是一组函数，还是模块比 Visual Studio 文档建议的更多？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-27T16:35:44.137

类是一种**类型**。您可以像使用任何其他类型 ( `String`, `Integer`, `Date`, `FileInfo`...) 一样使用此类型来声明变量、参数、属性和函数返回类型。

让我们举一个小例子：

```
Public Class Person
    Public Property FirstName As String
    Public Property LastName As String

    Public Overridable Sub Print() 'I will explain Overridable later.
        Console.WriteLine($"{FirstName} {LastName}")
    End Sub
End Class 
```

现在您可以声明类型的变量`Person`

```
Dim sue, pete As Person
Dim persons As List(Of Person)

sue = New Person()
sue.FirstName = "Susan"
sue.LastName = "Miller"

pete = New Person()
pete.FirstName = "Peter"
pete.LastName = "Smith"

persons = new List(Of Person)()
persons.Add(sue)
persons.Add(pete)

For Each person As Person In persons
    person.Print()
Next 
```

* * *

而**模块**是静态的。即存储在模块中的数据只存在一次。另一方面，您不必用 实例化模块`New`，因此它们通常用于存储全局数据和全局可用的方法。例如，您可以将人员列表存储在模块中。

* * *

但是你可以用类做更多的事情。您可以从基类派生类。这个新类继承了基类的所有内容，并且可以向其添加更多内容。例如，您可以`Employee`从`Person`

```
Public Class Employee
    Inherits Person

    Public Property Salary As Decimal

    Public Overrides Sub Print
        Console.WriteLine($"{FirstName} {LastName}, Salary = {Salary}")
    End Sub
End Class 
```

`Overridable`关键字 in允许派生类`Person.Print`重新定义（覆盖）`Print`方法。（类中的函数和子类称为方法。）

员工的分配与人员兼容。您可以将员工添加到`persons`列表中。这不需要对 For Each 循环进行任何更改，即调用`person.Print()`自动调用正确的`Print`方法（第一个用于“正常”人员，第二个用于员工）。

```
Dim emp as Employee

emp = New Employee()
emp.FirstName = "Frank"
emp.LastName = "Taggart"
emp.Salary = 3500.00D

persons.Add(emp) 
```

关于类还有很多话要说。我希望你对类可以做什么有一定的了解。

请参阅[Visual Basic 中的对象和类，](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/objects-and-classes/)尤其是[类和模块之间的差异](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/objects-and-classes/#differences-between-classes-and-modules)部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-11T07:36:19.540

模块只不过是静态类的另一个名称。
这里的所有都是它的。
如果您不相信，请使用 VB.NET 编译模块并使用 C-Sharp 使用 ILSpy 进行反编译。

是的，这意味着您是正确的，就功能而言，模块是类的子集。
因此，就功能而言，类是模块的超级集，因为它可以包含静态和非静态方法和变量，以及虚拟和受保护的访问修饰符。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-27T15:52:36.483

类更像是一个单元，而模块本质上是函数、变量甚至类等内容的松散集合。

在公共模块中，项目中的类可以访问模块的函数和变量。您不必指定模块名称来寻址一个。您还可以在模块中包含类。

类的变量和函数在类的“所有权”之下。其他类使用的公共变量和函数（方法）与类名一起使用：`classname.method`与模块中的不同。

一个模块只有一个实例，但可以一次使用一个或多个类的实例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-27T15:54:08.087

> 类和模块之间的主要区别在于，类可以实例化为对象，而标准模块不能。因为标准模块的数据只有一份副本，所以当您的程序的一部分更改标准模块中的公共变量时，如果程序的任何其他部分随后读取该变量，则会获得相同的值。相反，对于每个实例化的对象，对象数据是分开存在的。另一个区别是，与标准模块不同，类可以实现接口。

来源： http: [//msdn.microsoft.com/en-us/library/7825002w (en-US,VS.80).aspx](http://msdn.microsoft.com/en-us/library/7825002w(en-US,VS.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T17:02:57.500

实际上，您使用类来创建对象。例如，在以下 .NET 控制台应用程序`r`中是一个`Rectangle`对象：

```
Imports System

Public Class Rectangle

    Private length As Double
    Private width As Double

    'Public methods
    Public Sub AcceptDetails()
        length = 4.5
        width = 3.5
    End Sub

    Public Function GetArea() As Double
        GetArea = length * width
    End Function

    Public Sub Display()
        Console.WriteLine("Length: {0}", length)
        Console.WriteLine("Width: {0}", width)
        Console.WriteLine("Area: {0}", GetArea())
    End Sub

    Shared Sub Main()
        Dim r As New Rectangle()
        r.Acceptdetails()
        r.Display()
        Console.ReadLine()
    End Sub

End Class 
```

# qt - 在 QObjects 之间跨不同线程连接信号/插槽

> ID：14548996
> 
> 赞同：1
> 
> 时间：2013-01-27T15:41:49.640
> 
> 标签：qt, signals-slots, qthread, qobject

我想知道在 MainWindow 的构造器中创建的两个 QObjects 之间连接信号/插槽的最佳做法是什么，但后来移到不同的线程...默认连接似乎不起作用，然后当我使用选项连接时，`Qt::Directconnection`事情开始工作...但有时信号/插槽失败...以下是我的代码模式..如果我需要更改我的类设计，请告诉我...

**主窗口.cpp**

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
{
   myObjectA = new ObjectA;
   myObjectB = new ObjectB;

   connect( myObjectA,SIGNAL(signalA()),myObjectB,SLOT(slotB()) );

   myObjectA.initiateProcess();
   myObjectB.initiateProcess();
} 
```

**对象A.h**

```
#include <QThread>
#include <QObject>

class ObjectA : public QObject
{
    Q_OBJECT
public:
    explicit ObbjectA(QObject *parent = 0);
    void inititateProcess();
public slots:
    void do_job();

signals:
    void signalA();
private:
    QThread *worker;
} 
```

**对象A.cpp**

```
ObjectA::ObjectA(QObject* parent)
{
  ....
}

void ObjectA::do_jobA()
{
  //do something;
}

void ObjectA::initiateProcess()
{
  worker = new QThread;
  connect(worker,SIGNAL(started()),this,SLOT(do_jobA()));
  this->moveTo(worker);
  worker->start()
} 
```

**对象B.h**

```
#include <QThread>
#include <QObject>

class ObjectB : public QObject
{
    Q_OBJECT
public:
    explicit ObjectB(QObject *parent = 0);
    void initiateProcess();
public slots:
    void do_job();
    void slotB();

signals:
    void signalB();//for some other slot
private:
    QThread *worker;
} 
```

**对象B.cpp**

```
ObjectB::ObjectB(QObject* parent)
{
  ....
}

void ObjectB::do_jobB()
{
  //do something;
}

void ObjectB::initiateProcess()
{
  worker = new QThread;
  connect(worker,SIGNAL(started()),this,SLOT(do_jobB()));
  this->moveTo(worker);
  worker->start()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:43:53.653

一般来说，作为个人意见，`QWaitCondition`即使在线程中，我也不会将阻塞代码（像那样）与事件循环混合，除非你知道它不会长时间阻塞。对于 GUI 线程，我会说“长”超过 100 毫秒（比这更长，即使在传统的桌面应用程序中，用户体验也开始受到影响），但对于其他线程，它可能要长得多，这取决于它可以阻塞多长时间线程需要处理的事件和信号。

对于多线程，通常最好对信号使用自动或显式排队连接。直接连接将在发出信号的线程中执行，如果接收对象位于另一个线程中，则需要使插槽（以及因此类中相关的所有内容）成为线程安全的。不这样做会更简单，更安全，要跟踪的事情更少。

如果您现在在一个线程中编写代码，但想准备稍后将其移动到另一个线程，那么最好使连接排队。这样一来，单线程的行为将基本相同，`emit`将立即返回，以后不会有任何意外。

如果您想编写在任何线程中阻塞未确定或其他时间过长的代码，最好子类化`QThread`，覆盖`QThread::run()`并且永远不要调用`exec()`它。然后您可以在自己的循环中使用 QMutex 和 QWaitCondition，或者使用其他一些“传统”的线程间通信方法。您仍然可以从线程发出信号，但连接应该排队以避免线程问题。还要记住，你添加到 QThread 的任何槽都应该在 QThread 对象所在的线程中执行，而不是在`run()`方法正在执行的线程中执行。这实际上是一种非常方便的模式，您可以在 QThread 子类的插槽中“隐藏”所有实际的线程交互代码（请记住，它们不会在运行的线程中`run()`执行），只要您注意不要锁定任何`QMutex`在这些中使用了太长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:20:31.553

根据您的评论，您的线程正忙于`QWaitCondition`，因此无法处理信号。如果您真的需要`QWaitCondition`，您可以使用`QCoreApplication::processEvents`和超时对插槽进行轮询，例如

```
while(true) {
    if(condition.wait(&mutex, 1000)) {
        // process condition
    } else {
        QCoreApplication::processEvents()
    }
} 
```

但这涉及处理信号的延迟（本例中为 1 秒）。除此之外，[在 SO](https://stackoverflow.com/questions/6102040/how-to-implement-a-qthread-that-runs-forever-with-a-qwaitcondition-but-still-n) 上有一个类似的问题，建议摆脱`QWaitCondition`并使用信号/插槽。

# jsp - 在 JSP 中添加外部资源（CSS/JavaScript/图像等）

> ID：14548998
> 
> 赞同：22
> 
> 时间：2013-01-27T15:42:01.963
> 
> 标签：jsp, jstl, assets, el

我在我的项目中添加了一个外部 CSS 样式表，并放置在 Eclipse 中我的项目的 WEB-CONTENTS 文件夹中。当我在 Tomcat 上部署它时，没有应用样式表。当我在 Chrome 中调试它并打开它时，它给了我`404 file not found`错误。为什么会这样以及如何解决？

这是代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>joined now </title>

<link href="globalCSS.css" rel="stylesheet" type="text/css"/>

</head>
<body>
<div>this is at the top</div>
<c:import url="header.jsp" />
<c:import url="navigationBar.jsp" />  
<c:import url="leftpane.jsp" /> 
<c:import url="mainContent.jsp" /> 
<c:import url="rightpane.jsp" />
<c:import url="footer.jsp" />  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T21:16:46.820

您收到`404 File Not Found`错误的原因是您作为`href`属性值给出的 CSS 的路径缺少**上下文路径**。

HTTP 请求 URL 包含以下部分：

```
http://[host]:[port][request-path]?[query-string] 
```

*请求路径*进一步由以下元素组成：

*   *上下文路径*：正斜杠 (/) 与servlet 的 Web 应用程序的[**上下文根的串联。**](http://docs.oracle.com/javaee/7/tutorial/webapp004.htm#BNAEP)例子：`http://host[:port]/context-root[/url-pattern]`

*   *Servlet path*：对应于激活此请求的组件别名的路径部分。此路径以正斜杠 (/) 开头。

*   *路径信息*：请求路径中不属于上下文路径或 servlet 路径的部分。

[在这里](http://docs.oracle.com/javaee/7/tutorial/servlets005.htm#BNAFW)阅读更多。

* * *

# 解决方案

您的问题有多种解决方案，以下是其中一些：

## 1) 使用`<c:url>`来自 JSTL 的标签

在我的 Java Web 应用程序中，我通常在定义 CSS/JavaScript/image 和其他静态资源的路径时使用来自[JSTL](https://stackoverflow.com/tags/jstl/info)[`<c:url>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/url.html)的标记。通过这样做，您可以确保**始终相对于应用程序上下文**（上下文路径）引用这些资源。

 **如果您说您的 CSS 位于*WebContent*文件夹中，那么这应该可以工作：

```
<link type="text/css" rel="stylesheet" href="<c:url value="/globalCSS.css" />" /> 
```

它工作的原因在“ *JavaServer Pages™ 标准标记库*”版本 1.2[规范](http://download.oracle.com/otndocs/jcp/jstl-1.2-mrel2-eval-oth-JSpec/)第 7.5 章（强调我的）中进行了解释：

> **7.5 <c:url>**
> 建立一个应用了正确重写规则的 URL。
> ...
> URL 必须是以方案开头的绝对 URL（例如“http://server/context/page.jsp”）或 JSP 1.2 在 JSP.2.2.1“相对 URL 规范”中定义的相对 URL ”。因此，实现必须**将上下文路径添加到以斜杠开头的 URL**（例如“/page2.jsp”），以便客户端浏览器可以正确解释此类 URL。

*注意*
不要忘记在您的 JSP 中使用*Taglib 指令*来引用[JSTL 标记](http://docs.oracle.com/javaee/5/tutorial/doc/bnake.html)。[另请参阅此处](https://stackoverflow.com/a/14063039/814702)的示例 JSP 页面。

## 2）使用JSP表达式语言和隐式对象

另**一种**解决方案是使用[表达式语言 (EL)](https://stackoverflow.com/tags/el/info)添加应用程序上下文：

```
<link type="text/css" rel="stylesheet" href="${pageContext.request.contextPath}/globalCSS.css" /> 
```

在这里，我们从*请求*对象中检索了上下文路径。为了访问请求对象，我们使用了*pageContext* [**隐式对象**](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaij)。

## 3) 使用`<c:set>`来自 JSTL 的标签

*免责声明*
这个解决方案的想法取自[这里](http://gerrydevstory.com/2013/07/09/looking-up-context-path-on-a-jsp-page/)。

要使访问上下文路径比在解决方案 №2 中更紧凑，您可以首先使用 JSTL[`<c:set>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/set.html)标记，该标记在任何 JSP 范围（页面、请求、会话）中[设置 EL 变量的值](http://docs.oracle.com/javaee/5/tutorial/doc/bnakh.html#bnakj)或 EL 变量的属性或应用程序）供以后访问。

```
<c:set var="root" value="${pageContext.request.contextPath}"/>
...
<link type="text/css" rel="stylesheet" href="${root}/globalCSS.css" /> 
```

*重要说明*
默认情况下，为了以这种方式设置变量，包含此*set*标记的 JSP 必须**至少访问一次**（包括在使用*范围*属性设置*应用程序*范围内的值的情况下，如），**然后再**使用此新变量。例如，您可以有**多个**需要此变量的 JSP 文件。因此，您必须 a)**在***应用程序*范围内设置新变量保存上下文路径并首先访问此 JSP，然后在其他 JSP 文件中使用此变量，或者 b) 在您需要的每个 JSP 文件中设置此上下文路径保存变量访问它。*`<c:set var="foo" value="bar" scope="application" />`*

 ********## 4) 使用 ServletContextListener

使访问上下文路径更紧凑的更有效方法是设置一个变量，该变量将保存上下文路径并使用[*Listener*](http://docs.oracle.com/javaee/7/tutorial/servlets002.htm#BNAFK)*将其存储在应用程序[范围内](https://stackoverflow.com/a/14718683/814702)*。这个解决方案类似于解决方案№3，但好处是现在变量保存上下文路径是在 Web 应用程序**的开始**处设置的，并且在应用程序范围内可用，不需要额外的步骤。[](http://docs.oracle.com/javaee/7/tutorial/servlets002.htm#BNAFK)

 ***我们需要一个实现[*ServletContextListener*](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html)接口的类。这是此类的示例：

```
package com.example.listener;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;

@WebListener
public class AppContextListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
        ServletContext sc = event.getServletContext();
        sc.setAttribute("ctx", sc.getContextPath());
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {}

} 
```

现在在 JSP 中，我们可以使用 EL 访问这个全局变量：

```
<link type="text/css" rel="stylesheet" href="${ctx}/globalCSS.css" /> 
```

*注意*
[@WebListener](http://docs.oracle.com/javaee/7/api/javax/servlet/annotation/WebListener.html)注释从 Servlet 3.0 版开始可用。如果您使用支持旧 Servlet 规范的 servlet 容器或应用程序服务器，请删除*@WebServlet*注释并改为在*部署描述符*(web.xml) 中配置侦听器。*以下是支持最大 Servlet 版本 2.5 的容器的web.xml*文件示例（为简洁起见，省略了其他配置）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    ...  
    <listener>
        <listener-class>com.example.listener.AppContextListener</listener-class>
    </listener>
    ...
</webapp> 
```

## 5) 使用小脚本

正如用户[*@gavenkoa*](https://stackoverflow.com/users/173149/gavenkoa)[所建议](https://stackoverflow.com/questions/14548998/adding-external-resources-css-javascript-images-etc-in-jsp/14571407?noredirect=1#comment54508429_14571407)的，您还可以像这样使用[scriptlet](https://stackoverflow.com/tags/scriptlet/info)：[](https://stackoverflow.com/users/173149/gavenkoa)

 *```
<%= request.getContextPath() %> 
```

对于这么小的事情，它可能是可以的，请注意，[通常不鼓励在 JSP 中使用 scriptlet](https://stackoverflow.com/a/3180202/814702)。

# 结论

我个人更喜欢第一个解决方案（大部分时间在我以前的项目中使用它）或第二个，因为它们最清晰、直观和明确（恕我直言）。但是你选择最适合你的。

* * *

## 其他想法

您可以将您的 Web 应用程序部署为*默认应用程序*（即在**默认根上下文中**），因此**无需指定上下文路径**即可访问它。有关更多信息，请阅读[此处](https://stackoverflow.com/a/14225540/814702)的“更新”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-15T07:18:01.600

**使用以下代码您解决了这个问题....**

```
<style type="text/css">
    <%@include file="css/style.css" %>
</style>
<script type="text/javascript">
    <%@include file="js/script.js" %>
</script> 
```**************