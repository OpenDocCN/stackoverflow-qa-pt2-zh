# StackOverflow 问答 12664000-12664999

# java - org.hibernate.MappingException：找不到具有逻辑名称 Id 的列

> ID：12664005
> 
> 赞同：2
> 
> 时间：2012-09-30T18:50:15.293
> 
> 标签：java, hibernate, jpa, many-to-one, mappingexception

这只是我在 JPA 上的第一个演示，它非常简单，以至于这个错误让我发疯:(

## **数据库（postgresql）**

```
CREATE TABLE "Order"
(
  "Id" integer NOT NULL,
  "DateOf" timestamp with time zone,
  "Description" text,
  CONSTRAINT "PK_Id" PRIMARY KEY ("Id" )
)

CREATE TABLE "LineItem"
(
  "Id" oid NOT NULL,
  "OrderId" integer,
  "Cost" money,
  CONSTRAINT "LineItem_Id" PRIMARY KEY ("Id" ),
  CONSTRAINT "LineItem_OrderId_fkey" FOREIGN KEY ("OrderId")
      REFERENCES "Order" ("Id") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

## **模型**

```
@Entity
@Table(name="\"Order\"")
@XmlRootElement(name="Order")
public class Order implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    @Column(name="\"Id\"")
    public int Id;

    @Column(name="\"DateOf\"")
    public java.util.Date DateOf;

    @Column(name="\"Description\"")
    public String Description;

    @OneToMany(cascade=CascadeType.REMOVE, mappedBy="order")
    public List<LineItem> Items;
}

@Entity
@Table(name="\"LineItem\"")
public class LineItem implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    @Column(name="\"Id\"")
    public int Id;

    @ManyToOne(cascade=CascadeType.REMOVE)
    @JoinColumn(name="\"OrderId\"", referencedColumnName="Id")
    public Order order;
} 
```

## **中层**

```
EntityManagerFactory entityManagerFactory = Persistence
                .createEntityManagerFactory("store");
        EntityManager entityManager = entityManagerFactory
                .createEntityManager();
        Query select = entityManager.createQuery("select t from Order t"); 
```

## **例外**

```
org.hibernate.MappingException: Unable to find column with logical name: Id in org.hibernate.mapping.Table(Order) and its related supertables and secondary tables
    org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:552)
    org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:257)
    org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:116)
    org.hibernate.cfg.Configuration.processEndOfQueue(Configuration.java:1525)
    org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1446)
    org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1351)
    org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
    org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
    javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    rest.Orders.List(Orders.java:37) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:55:24.550

我认为不应引用您的 create Table 语句中的表和列的名称。您是否尝试过以下创建表语句？

```
CREATE TABLE Order
(
  Id integer NOT NULL,
  DateOf timestamp with time zone,
  Description text,
  CONSTRAINT PK_Id PRIMARY KEY (Id )
)

CREATE TABLE LineItem
(
  Id oid NOT NULL,
  OrderId integer,
  Cost money,
  CONSTRAINT LineItem_Id PRIMARY KEY (Id ),
  CONSTRAINT LineItem_OrderId_fkey FOREIGN KEY (OrderId)
      REFERENCES Order (Id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

** 编辑我没有查看映射 **

我认为带有转义的列的映射被忽略了。另外，尝试使用以下内容更改映射：

```
@Entity
@Table(name="Order")
@XmlRootElement(name="Order")
public class Order implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    @Column(name="Id")
    public int Id;

    @Column(name="DateOf")
    public java.util.Date DateOf;

    @Column(name="Description")
    public String Description;

    @OneToMany(cascade=CascadeType.REMOVE, mappedBy="order")
    public List<LineItem> Items;
}

@Entity
@Table(name="LineItem")
public class LineItem implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    @Column(name="Id")
    public int Id;

    @ManyToOne(cascade=CascadeType.REMOVE)
    @JoinColumn(name="OrderId", referencedColumnName="Id")
    public Order order;
} 
```

# javascript - Mongoose - 使用嵌套模型更新文档

> ID：12664008
> 
> 赞同：0
> 
> 时间：2012-09-30T18:50:48.647
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我的快递应用程序中有一个带有“checked_in”标志的基本文档：

```
module.exports = Book= mongoose.model('Book', new Schema({
 name : String,
 checked_in : Boolean
},{ collection : 'Book' })); 
```

我想记录书籍何时签入和签出，所以我想出了另一个模式：

```
var action = new Schema({
 checked_in: Boolean,     
});

module.exports = Activity = mongoose.model('Activity', new Schema({
 book_id: String,
 actions: [action]
},{ collection : 'Activity' })); 
```

'book_id' 应该是一本书的文档 ID，当我更新一本书时，我需要使用操作中的新项目创建或更新该书的活动日志：

```
exports.update = function(req, res){  
    return Book.findById(req.params.id, function(err, book) {  
       var activity = new Activity({book_id: book.id});
       activity.actions.push({
           checked_in: req.body.checked_in,
       });

       Activity.update({ book_id: book.id}, activity.toObject(), { upsert: true }));

       book.checked_in = req.body.checked_in;
       return device.save(function(err) {
           return res.send(book);
       });
    });
}; 
```

我遇到的问题是没有任何东西被插入到 Activity 集合中。如果我使用 .save() 那么我只会在集合中得到很多重复项。

**更新**

我已经开始按照下面给出的建议重新工作，但仍然没有任何运气。这是我现在拥有的：

```
module.exports = Activity = mongoose.model('Activity', new Schema({
  book_id: Schema.ObjectId,
  actions: [new Schema({
    checked_in: Boolean,
    last_user: String
  })]
},{ collection : 'Activity' })); 
```

这是现在的更新代码：

```
exports.update = function(req, res){  
  // TODO: Check for undefined.
  return book.findById(req.params.id, function(err, book) {    
    if(!err) {
      // Update the book.
      book.checked_in = req.body.checked_in;
      book.last_user = req.body.last_user;    
      book.save();

      // If there's no associated activity for the book, create one. 
      // Otherwise update and push new activity to the actions array.
      Activity.findById(book._id, function (err, activity) {
        activity.actions.push({
          checked_in: req.body.checked_in,
          last_user: req.body.last_user
        })

        activity.save();      
      });
    }
  });
}; 
```

我想要结束的是每本书的文档，其中包含一系列签出/签入，每次有人签入或签出一本书时都会更新。IE：

```
{
    book_id: "5058c5ddeeb0a3aa253cf9d4",
    actions: [
        { checked_in: true, last_user: 'ralph' },
        { checked_in: true, last_user: 'gonzo' },
        { checked_in: true, last_user: 'animal' }
    ]
} 
```

最终，我将在每个条目中都有一个时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:34:32.193

我看到了一些可以改进的地方......

*   模型中的`book_id`字段`Activity`应该`Schema.ObjectId`代替`String`. 然后，您可以根据需要使用填充。

*   你没有做任何错误检查`exports.update`。如果用户传入一个 invalid `id`，您将需要检查是否`book`未定义，以及 common `if (err) return next(err)`（这要求您的函数参数是`res, res, next`）。

*   当您在 中创建活动时`exports.update`，您希望使用`book._id`而不是`book.id`

*   `return`不需要所有的语句

*   该`device`变量未在任何地方声明，我不确定您要保存什么...我认为您的意思是`book`那里。

然后，您可以只`.save()`进行活动而不是进行`Activity.update`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:44:30.670

有几个问题：

1.  您正在尝试`findById`使用图书的 id 而不是活动的 id 来查找图书的活动文档。
2.  您没有处理图书的活动文档尚不存在的情况。

试试这个：

```
Activity.findOne({book_id: book._id}, function (err, activity) {
  if (!activity) {
    // No Activity doc for the book yet, create one.
    activity = new Activity({book_id: book._id});
  }
  activity.actions.push({
    checked_in: req.body.checked_in,
    last_user: req.body.last_user
  });

  activity.save();
}); 
```

# objective-c - 无法编译 SMTP 代码

> ID：12664009
> 
> 赞同：1
> 
> 时间：2012-09-30T18:50:53.933
> 
> 标签：objective-c, ios, smtp

我正在尝试编写一个 iOS 应用程序，无需任何用户交互即可在后台发送电子邮件。几天来我一直在互联网上寻找一个简单的解决方案，但我发现的所有东西都非常旧并且无法编译。目前，我正在尝试使用的库是：[https](https://github.com/kailoa/iphone-smtp) ://github.com/kailoa/iphone-smtp 。但是，我无法编译它。

我所做的是将类文件拖到我的项目中，并将所有新类设置为不使用 ARC。但是，我不断收到以下错误：

```
Ld /Users/Andrew/Library/Developer/Xcode/DerivedData/EmailTest2-gpzibaprekjgiheqoazurfdwapxp/Build/Products/Debug-iphonesimulator/EmailTest2.app/EmailTest2 normal i386
    cd /Users/Andrew/Desktop/EmailTest2
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/Andrew/Library/Developer/Xcode/DerivedData/EmailTest2-gpzibaprekjgiheqoazurfdwapxp/Build/Products/Debug-iphonesimulator -F/Users/Andrew/Library/Developer/Xcode/DerivedData/EmailTest2-gpzibaprekjgiheqoazurfdwapxp/Build/Products/Debug-iphonesimulator -filelist /Users/Andrew/Library/Developer/Xcode/DerivedData/EmailTest2-gpzibaprekjgiheqoazurfdwapxp/Build/Intermediates/EmailTest2.build/Debug-iphonesimulator/EmailTest2.build/Objects-normal/i386/EmailTest2.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/Andrew/Library/Developer/Xcode/DerivedData/EmailTest2-gpzibaprekjgiheqoazurfdwapxp/Build/Products/Debug-iphonesimulator/EmailTest2.app/EmailTest2

Undefined symbols for architecture i386:
  "_CFHostCreateWithName", referenced from:
      +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in NSStream+SKPSMTPExtensions.o
  "_CFStreamCreatePairWithSocketToCFHost", referenced from:
      +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in NSStream+SKPSMTPExtensions.o
  "_kCFStreamPropertySSLSettings", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
  "_kCFStreamSSLAllowsAnyRoot", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
  "_kCFStreamSSLAllowsExpiredCertificates", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
  "_kCFStreamSSLAllowsExpiredRoots", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
  "_kCFStreamSSLLevel", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
  "_kCFStreamSSLValidatesCertificateChain", referenced from:
      -[SKPSMTPMessage parseBuffer] in SKPSMTPMessage.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

还有一个 buildstaticlib.sh 文件；但是，当我尝试使用命令`./buildstaticlib.sh`或其任何变体运行它时，它给了我这个错误：

`Usage: ./buildstaticlib.sh PATH where PATH is the destination directory for the build package`

如果您知道如何使用其他库在后台发送电子邮件，我将非常愿意切换。但是，我需要帮助才能使该库也运行。我已经尝试了至少 6 个不同的库，但似乎都没有取得任何进展。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:52:59.580

您可能忘记添加框架。确保所有导入的框架都添加到您的项目中并由您的目标链接到。

如果您打开示例项目，您将看到使用了哪些框架：

![在此处输入图像描述](../Images/1673c4fc640830a35bbbb563f0c5d1a7.png)

# haskell - 从酸性状态查询中检索纯值

> ID：12664012
> 
> 赞同：1
> 
> 时间：2012-09-30T18:51:16.320
> 
> 标签：haskell, acid-state

这看起来应该很容易，但是如果我使用的是 AcidState 的 Data.Acid.Memory.Pure 模块，如何从查询中获得纯值。我想我可以将这个问题概括为“我如何从 Update monad 中获得任何价值？”。你看，我正在尝试编写一个执行以下常规任务的测试：

*   用一个对象更新一个纯 AcidState
*   使用 IxSet 查询超出状态的对象
*   比较查询对象和更新返回的对象是否相等。

我需要一个纯“布尔”，以便轻松与测试框架集成。起初我以为我会简单地使用 Control.Monad.State 中的 runState，但我错了（或者只是做得不对）。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:17:58.643

由于您正在使用[`Data.Acid.Memory.Pure`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid-Memory-Pure.html)，因此您可以使用该模块中的[`update`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid-Memory-Pure.html#v%3aupdate)、[`query`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid-Memory-Pure.html#v%3aquery)和[`update_`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid-Memory-Pure.html#v%3aupdate_)函数（而不是 中的函数[`Data.Acid`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid.html)）来纯粹查看事件的结果。与常规的、不纯`acid-state`的一样，您不能简单地“运行`Update`and `Query`monad”，您必须先将它们转换为事件。使用`Data.Acid.Memory.Pure`，这意味着您只需使用 的构造函数将它们包装起来[`Event`](http://hackage.haskell.org/packages/archive/acid-state/0.8.1/doc/html/Data-Acid-Memory-Pure.html#t%3aEvent)。

# android - 没有videoview的Android播放视频按钮

> ID：12664019
> 
> 赞同：1
> 
> 时间：2012-09-30T18:52:09.247
> 
> 标签：android, video-streaming

我有一个简单的按钮，我希望通过单击此按钮播放 URL 视频购买但没有`videoView`. 所以如果我点击按钮，手机会询问我选择哪个内部播放器来播放视频。

在这里，我使用的`videoView`是在我的应用程序窗口内播放视频但我想要它在外面：

```
 boutonVideo = (Button) findViewById(R.id.boutonVideo);
        video = (VideoView) findViewById(R.id.videoView);
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(video);

        video.setMediaController(mediaController);
        Uri chemin = Uri.parse("http://commonsware.com/misc/test2.3gp");
        video.setVideoURI(chemin);
        video.start(); 
```

谢谢，

所以这里是代码：

```
 boutonVideo = (Button) findViewById(R.id.boutonVideo);
        boutonVideo.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent in;
                if (v.getId() == R.id.boutonVideo) {
                    in = new Intent(Intent.ACTION_VIEW, Uri
                            .parse(urlBandeAnnonce));
                    startActivity(in);
                }

            }
        }); 
```

但是当我决定停止视频并返回我的活动时，它会返回一个错误。这是 AndroidRunTime 错误：

> java.lang.RuntimeException: 无法启动活动 ComponentInfo{Activity}: java.lang.NullPointerException 09-30 15:20:16.449: E/AndroidRuntime(2301):
> at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970 )

* * *

### 解决了

所以我添加了finish(); 并且错误消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:59:04.043

将`Intent`with`ACTION_VIEW`与要播放的电影的 URI 一起使用：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(movieUrl));
startActivity(intent); 
```

where`movieUrl`是一个包含电影路径的字符串。

这可能适用于互联网流，也可能不适用。没有亲自尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:08:51.637

你看过[Android Api 的例子吗](http://developer.android.com/tools/samples/index.html)

如果你已经在你的电脑上安装了样本，它位于（对于 Windows 系统）

```
C:\Program Files\Android\android-sdk\samples\android-16\ApiDemos\src\com\example\android\apis\media 
```

# python - 定义一个函数以从字典中的列表中查找 ID 并对值求和

> ID：12664020
> 
> 赞同：0
> 
> 时间：2012-09-30T18:52:09.370
> 
> 标签：python, function, dictionary

我对这个函数的目标是输出订单的总成本。

我有一个函数可以给我一个字典`{'2': '150.99', '3': '99.50', '15': '5.07'}`，比如第一个值是 ID 号，第二个值是具有该 ID 号的商品的价格。因此，第 3 项商品的价格为 99 美元/欧元/英镑/无论我的单位是什么，以及 50 美分/子单位。

另一个函数为我提供了一个项目 ID 列表，以便像这样查找，`[2, 2, 3]`其中任何项目 ID 都可以出现多次，以表明我购买了多个该项目。因此，在本例中，我将以 150.99 的价格购买 2 件商品 2，并以 99.50 的价格购买 1 件商品 3。

我想定义一个函数，让我将项目 ID 的字典传递给它：价格和要查找的项目 ID 列表，它将输出列表中所有项目的总成本。所以对于上面的例子，它应该输出值`401.48`，因为`(2*150.99)+99.50=401.48`.

作为我尝试过的测试

```
test = DictionaryVariable.get('2')
print test 
```

这将打印预期值（因此在本例中为 150.99。）

但是，我尝试定义一个函数

```
def FindPrice(dictionary, idlist):
    price = 0.00
    for id in idlist:
        price + float(dictionary.get(id))
    return price 
```

然后这样称呼它：

```
Prices = FindPrice(DictionaryVariable, IDListVariable)
print Prices 
```

没有工作 - 该`dictionary.get(id)`部分似乎正在返回`None`（我已经通过将其设为 str 而不是 float 进行了测试），因此它会引发错误，指出“TypeError：float() 参数必须是字符串或数字”。我怀疑我需要使用其他方法从列表中输入项目 ID，但我不知道该方法是什么。我不知道为什么会有`dictionary.get(id)`回报`None`，但`DictionaryVariable.get('2')`给了它我期望的价值。

编辑：感谢那些指出我在字典中使用字符串而不是整数或浮点数的有用帖子，我得到了这个工作：

```
def FindPrice(dictionary, idlist):
    Price = sum(float(dictionary.get(x,0)) for x in idlist)
    return Price
Prices = FindPrice(DictionaryVariable, FunctionThatMakesListofIDs('FileToGetIDsFrom.xml'))
print Prices 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:55:41.440

`get()``None`如果找不到该项目，则返回，顺便说一句，您可以将第二个可选参数传递给`get()`. 因此，现在如果`id`找不到，则返回该参数。（在您的情况下传递 0）

```
>>> dic={'2': '150.99', '3': '99.50', '15': '5.07'}
>>> items= ['2', '2', '3'] 
>>> sum(float(dic.get(x,0)) for x in items)  #pass 0 to get in case id is not there
401.48 
```

`help(dict.get)`：

```
get(...)
    D.get(k[,d]) -> D[k] if k in D, else d.  d defaults to None. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:55:44.560

您的列表 [2, 2, 3] 包含整数，但您的 dict 的键是字符串。我建议您首先使用 int 键和浮点值创建您的 dict，或者像这样转换它：

```
>>> d = {'2': '150.99', '3': '99.50', '15': '5.07'}
>>> d = dict((int(k),float(v)) for k, v in d.iteritems())
>>> d
{2: 150.99000000000001, 3: 99.5, 15: 5.0700000000000003} 
```

# java - .getSelectedRow() 返回 -1

> ID：12664023
> 
> 赞同：2
> 
> 时间：2012-09-30T18:52:40.517
> 
> 标签：java, indexing, jtable

我在我的`JTable`. 我的 JTable，即。myTaskTable 填充了许多具有多列的行。我希望在双击`JTable`. 我不确定为什么它总是返回-1 的索引导致异常。我在忽略什么吗？可能出了什么问题？

这就是我从`JTable`- myTaskTable中检索所选行的索引的方式

```
int selRow = myTaskTable.getSelectedRow(); 
```

谢谢！

**编辑**

这是代码：

```
...
myTaskTable.addMouseListener(this);
...
public void mouseClicked(MouseEvent e)
{
 if(e.getModifiers() == MouseEvent.BUTTON1_MASK)
 {
   if(e.getClickCount() == 2)
   {
     e.consume();
     int selRow = myTaskTable.getSelectedRow();
     System.out.println("GridReport double clicked on row="+selRow);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T22:18:37.847

使用事件获取行索引，而不是表选择：

```
final int selectedRowIndex = table.rowAtPoint(mouseEvent.getPoint());
// If the rows are sorted or filtered
final int modelRowIndex = table.convertRowIndexToModel(selectedRowIndex); 
```

`getSelectedRow()`不适用于多选行（允许多选），因为它总是返回["the index of the **first** selected row"](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedRow%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T22:07:20.677

您是否尝试将`e.consume();`其作为最后陈述？

```
public void mouseClicked(MouseEvent e){
 if(e.getModifiers() == MouseEvent.BUTTON1_MASK){
   if(e.getClickCount() == 2){
     int selRow = myTaskTable.getSelectedRow();
     System.out.println("GridReport double clicked on row="+selRow);
     e.consume();
    }
  }
} 
```

`e.consume();`当您完成响应式代码时，将调用normaly 。这会清除事件的依赖关系，因此它也可能会清除选定的行。

# objective-c - Dark Black & Opaque UIToolbar

> ID：12664029
> 
> 赞同：0
> 
> 时间：2012-09-30T18:53:58.517
> 
> 标签：objective-c, ios, xcode, uitoolbar, uicolor

我正在尝试创建一个深黑色的 UIToolbar（真正的黑色，而不是 UIToolbar 的“黑色”），稍微透明或不透明。下面是我想要的确切颜色/不透明度的屏幕截图。它是汉堡图像顶部的黑色叠加层。

我尝试设置颜色、设置 alpha、不透明属性、半透明，但没有任何效果。有什么建议么？

![需要工具栏](../Images/ca4cac89751e6cd4a8bd5f313301c040.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:12:53.003

只需制作一个您想要的颜色和不透明度的 png，将其添加到您的项目中，然后 [myToolbar setBackgroundImage:thatImage];

哎呀实际上我认为该方法是 setBackgroundImage:forToolbarPosition:barMetrics:

# php - JavaScript + foreach PHP...我找不到错误

> ID：12664038
> 
> 赞同：-1
> 
> 时间：2012-09-30T18:55:01.287
> 
> 标签：php, javascript, function, foreach

您好，我的 JS 函数有问题。请帮助我，直到今天我都需要这段代码，但我不明白出了什么问题:(

```
 foreach($group as $i => $name){
   print'<li onclick="groups(\'group'.$i.'\');" >'.$name.'</li>';
} 
```

然后我有这个代码：

```
$moretags = "<script>";
$moretags .= 'function groups(grid){';
  foreach($group as $i => $name){
  $moretags .= '
  if(grid == \'group'.$i.'\'){
  document.getElementById(\'show\').innerHTML = \'group'.$i.'\';
  }
  ';

}

$moretags .= '</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:06:57.050

正确的方法是在 PHP 中创建一个数组或对象，其中包含您需要传递给客户端 JavaScript 的所有数据。

```
$groups = array('some', 'elements', 'here'); 
```

然后，将其输出到您的页面：

```
<script>
    var groups = <?php echo json_encode($groups); ?>;
</script> 
```

然后，您可以完全访问 JavaScript 中的数据，而不必像现在这样动态生成脚本。您必须生成的唯一部分是变量的分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:07:21.027

我完全同意 Felix Kling 的观点，除非您**真的**知道自己在做什么，否则您不应该使用 PHP 代码生成 JavaScript 代码，而您显然不知道。

由于您的问题缺乏详细信息，因此无法解决您的问题，但我会尽力帮助您至少使您的代码不易出错。

您应该在 PHP 中生成的所有内容应该是没有任何`onclick`属性的 HTML 标记（最多！），只有`class`es 和一些`id`s。然后只需在 JavaScript 中添加相关的事件处理程序（并使用一些框架，如 jQuery -[**阅读此内容以了解原因**](https://stackoverflow.com/questions/5099949/what-are-some-empirical-technical-reasons-not-to-use-jquery/5100169#5100169)），或者您甚至可以在 JavaScript 中添加 HTML 元素，如果它们无论如何都不能在没有 JavaScript 的情况下使用。

代码生成是一件困难的事情。在 PHP 中生成 JavaScript 不会让你走得太远。

# html - 谁能指出一个模块化的静态 HTML 创作/预处理框架，一个 SASS 吗？或者更准确地说，包含包含的 HAML？

> ID：12664040
> 
> 赞同：2
> 
> 时间：2012-09-30T18:55:22.450
> 
> 标签：html, web, haml, static-site

我发现自己在这里和那里做了很多工作（为我自己和合同）来开发小型静态网站，在这些网站上使用 PHP 框架或 Rails 等动态工具将完全没有用，而且手头很重，而且浪费资源。

我正在寻找一种创作静态 HTML 网站的方法，该网站引入了一定程度的模块化和语法简化；澄清一下，类似于 SASS for HTML 的东西具有快速的语法，并且允许将常见的模式挤出到单独的文件中。

我知道 HAML。我希望 HAML 成为我的解决方案。但在我所有的阅读中，HAML 似乎没有与用于内联外部文件内容的 SASS 样式的 include 指令等效。此外，HAML 似乎将自己标榜为模板引擎，而不是 SASS 标榜自己的创作工具。它似乎希望成为 ERB 的替代品并用于 Rails 项目，而不是用作模块化 HTML 预处理器。

我知道我可以通过将少量 Ruby 和内联评估绑定到 HAML 来推出自己的解决方案，但感觉有点便宜和肮脏，因为这并不是 HAML “想要”做的。这不是我反对的解决方案，但如果有一个无配置、轻量级的选项，基本上表现得像 SASS，但对于 HTML，那么我更愿意走那条路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:45:29.777

[我们使用中间人](http://middlemanapp.com/)构建静态站点。有很多功能，但主要是它只是一个非常方便的静态站点生成器（用于开发和生产）。作为一个加号中间人是一个非常受欢迎的事情。

另一个已知的选项是[Serve](http://get-serve.com/)。它可能对 Rails 原型或那些已经熟悉 Rails 的人有用。

但我仍然更喜欢中间人，因为它更受欢迎（服务更年轻，而不是更糟）。

关于您的问题：在这两种工具中，您都可以将 HAML 视图拆分为部分、布局等。

另外，看看[这个类别](https://www.ruby-toolbox.com/categories/static_website_generation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T21:09:02.360

听起来[Stasis](http://stasis.me/)非常适合您的需求。我现在用它来构建一些小型静态站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T20:13:00.787

另一种选择是[Jekyll](http://jekyllrb.com/)。它提供了简单的设置、简单的语法、插件和附加功能。

# 64-bit - 64 位视觉工作室在网站 spark 上不可用

> ID：12664048
> 
> 赞同：1
> 
> 时间：2012-09-30T18:56:06.913
> 
> 标签：64-bit, visual-studio-2012, msdn, websitespark

我有一个网站 spark 帐户，我觉得它非常有用。

我运行 64 位 PC 并希望从网站 spark 下载 Visual Studio 2012 - 但 32 位 (X86) 仅可用。知道为什么 64 位不可用或何时可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T18:57:59.153

没有 64 位版本的 Visual Studio，因为它结合了 32 位*和*64 位 DLL，因为它需要您正在开发（和调试）的程序。您可以将它安装在 32 位和 64 位系统上并且可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T18:56:58.020

没有 64 位版本的 Visual Studio。

不在火花网站上，不在任何地方。

Visual Studio 团队决定不生产一个，因为拥有 64 位版本的开销和复杂性超过了好处。

32 位版本可以正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T18:56:49.183

没有 64 位版本的 Visual Studio。

32 位版本可以在 64 位系统上正常工作。

# haskell - 在 GHCi> 中工作，但在加载时不工作？

> ID：12664050
> 
> 赞同：0
> 
> 时间：2012-09-30T18:56:20.537
> 
> 标签：haskell

我不知道为什么我会得到两个不同的结果，但我确信它与`IO`，我开始讨厌了！

例如：

```
 ghci> x <- readFile "foo.txt"
  ghci> let y = read x :: [Int]
  ghci> :t y
  y :: [Int] 
```

现在，当我创建该文件并执行相同的操作时，它会出现`IO [Int]`？

`foo.txt`是一个仅包含以下内容的 txt 文件：`12345`

谁能给我解释一下？当我要拍它的时候！

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:01:43.543

阅读有关[ghci](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/interactive-evaluation.html)的信息。去引用

> GHCi 提示符下接受的语句语法与 Haskell do 表达式中的语句语法完全相同。但是，这里没有 monad 重载：在提示符下键入的语句必须在 IO monad 中。

基本上，`IO`当您在 ghci 中编写任何内容时，您都在 Monad 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T22:13:56.120

## 大意

清楚 Haskell`IO`中产生值的操作和值本身之间的区别。

## 推荐阅读

[对 Haskell 中 IO 的一个很好的参考是 sigfpe 的The IO Monad for People who Simply Don't Care](http://blog.sigfpe.com/2007/11/io-monad-for-people-who-simply-dont.html)，它不希望您想知道 monad 的理论基础 。

请注意，这是他假设您不关心的单子理论位。他假设你确实关心做 IO。它不是很长，而且我认为它非常值得您阅读，因为它明确了一些您不知道的“规则”，因此会引起您的不适。

## 你的代码

无论如何，在你的代码中

```
x <- readFile "foo.txt" 
```

该`readFile "foo.txt"`位具有 type `IO String`，这意味着它是一个产生字符串的操作。当你这样做时`x <- readFile "foo.txt"`，你`x`用来指代它产生的字符串。`x`注意输出和产生它的操作之间的区别`readFile "foo.txt"`。

接下来我们来看看`y`。您定义`let y = read x :: [Int]`，因此`y`是您指定的 Ints 列表。但是，`y`与定义它的整个块不同。

```
example = do
  x <- readFile "foo.txt"
  let y = read x :: [Int]
  return y 
```

在这里`example :: IO [Int]`，while`y`本身有 type `[Int]`。

## 你沮丧的原因

如果您来自命令式语言，这首先会令人沮丧 - 您习惯于在任何使用值的地方使用产生值的函数，但您习惯于这些函数也被允许执行任意 IO 操作.

在 Haskell 中，您可以使用“纯”函数（不使用 IO）而不是 IO 操作来做任何您喜欢的事情。Haskell 程序员看到了返回值的 IO 操作（只能在其他 IO 操作中重用）与可以在任何地方使用的纯函数之间的巨大差异。

这意味着您最终可能会一直陷入尴尬的 IO monad 中，并且您的所有函数都充满了 IO 数据类型。这很不方便，而且你写的代码很乱。

## 如何避免 IO 混乱

*首先在不*使用外部（文件或用户）数据的情况下完全解决您遇到的问题：

*   将您通常从文件或用户读取的示例数据写入源代码中的值。
*   使用定义中所需的任何数据作为函数的参数编写函数。这是编写纯代码时获取数据的唯一方法。先写纯代码。
*   在样本数据上测试您的功能。（如果你愿意，你可以在每次编写新函数时重新加载 ghci，确保它符合你的预期。）
*   一旦您的程序在没有 IO 的情况下完成，您可以在最后将其作为纯代码的包装器引入。

这意味着在您的程序中，我认为在您`readFile`快要完成之前，您不应该编写任何或其他 IO 代码。

这是一个完全不同的工作流程 - 在命令式语言中，您将编写代码来读取数据，然后执行操作，然后写入数据。在 Haskell 中，最好先编写完成工作的代码，然后再编写读取和写入数据的代码，前提是您知道功能是正确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T02:50:05.343

你实际上不能在 Haskell 源文件中做完全相同的事情，所以我怀疑你所做的实际上看起来像这样：

```
readFoo = do
    x <- readFile "foo.txt"
    let y = read x :: [Int]
    return y 
```

并且惊讶于 的类型`readFoo`出现`IO [Int]`，即使它返回`y`的是 type `[Int]`。

如果是这种情况，您困惑的根源在于`return`Haskell 不是命令式语言的 return 语句。

`return`在 Haskell 中是一个函数。一个完全普通的功能。像任何其他函数一样，它接受某种类型的值作为输入，并为您提供某种其他类型的值作为输出。专门针对`IO`(`return`可以与任何 monad 一起使用，但我们在这里保持简单) 的情况，它具有以下类型：

```
a -> IO a 
```

所以它接受任何类型的值，并给你一个包裹在`IO`monad 中的相同类型的值。所以如果`y`有类型`[Int]`，那么`return y`就有类型`IO [Int]`，这就是你得到的结果`readFoo`。

没有办法`[Int]`从`IO [Int]`. 这是*故意*的。的全部意义`IO`在于，任何依赖于程序“外部”的任何东西的值都只能出现在一个`IO x`类型中。因此，一个内部读取“foo.txt”并返回其中整数列表的函数一定不可能用 Haskell 编写，否则整个纸牌屋都会倒塌。如果我们看到一个类型为 的函数`readFoo :: [Int]`，就像您尝试编写的那样，那么我们知道它`readFoo`只能是一个特定的整数列表；它不能是一个依赖于磁盘上文件内容的列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T19:50:18.887

GHCi 做了一点魔法，让在命令提示符下快速测试东西变得更容易。如果这是程序的一部分，那么`IO [Int]`确实是正确的类型。GHCi 让您将其视为只是`Int`为了节省您的打字时间。

所以这就是“为什么”。

现在，如果您有一个特定的问题，例如“鉴于类型签名是这样的，我该怎么做 X？”......

# java - 递归方法为什么会停止？

> ID：12664052
> 
> 赞同：0
> 
> 时间：2012-09-30T18:56:33.053
> 
> 标签：java, recursion

我正在尝试学习有关递归方法的知识，并且正在为我的二叉树编写一个方法来计算树中所有整数的总和，我的代码工作正常，但我仍然对应用程序如何知道何时停止感到困惑。我的代码如下所示：

```
 public int sum(){

    return sum(overallRoot);
}

private int sum(IntTreeNode root) {
    if (root == null) {
        return 0;
    }else {
        return root.data + sum(root.left) + sum(root.right);
    }

} 
```

（上面的代码来自我的 nodeTree 类）

下一个代码来自我的主类：

```
public class TreeClient {

/**
 * @param args
 */
public static void main(String[] args) {
    IntTree tree = new IntTree(12);
    System.out.println(tree.sum());
} 
```

}

所以问题是（对于许多人来说可能很简单）但是我的应用程序如何知道何时停止？我尝试使用简单的系统输出打印来弄清楚，但据我现在的理解，该方法会在无限循环中调用它自己？

希望有人有时间回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:59:44.580

在任何递归程序中，当达到 a 时，您的迭代将停止**`base condition`**。这里您的基本条件是：-

```
if (root == null) {
    return 0;
} 
```

因此，当您的`root.left`and `root.right`, 在 else 块中的以下`return`语句中都变为 null 时，您已到达您的`base condition`，因此您的循环停止..

```
return root.data + sum(root.left) + sum(root.right); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:59:54.837

真的很简单

从*sum*函数中取一行：

```
return root.data + sum(root.left) + sum(root.right); 
```

当你到达树的底部时，*root.left*将为空，*root.right*也是如此。因此，当上面的代码行调用*sum(root.left)*时，*sum*函数会落入*if*语句的另一半：

```
return 0; 
```

因此，*sum*函数不再调用自身，因此停止递归

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:03:14.030

答案是它不会进入无限循环，因为有一个条件它不再递归调用自身。

条件是

```
if (root == null) 
```

当它发生时

```
return 0; 
```

而不是再次调用自己

```
return root.data + sum(root.left) + sum(root.right); 
```

# ruby-on-rails - 带导轨的奇怪 I18n 日期输出

> ID：12664062
> 
> 赞同：9
> 
> 时间：2012-09-30T18:57:02.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, date, localization, internationalization

我的 Ruby On Rails 3 应用程序中的日期翻译有一个奇怪的问题，我真的不明白为什么......

这是我的`en.yml`和`fr.yml`：

```
fr:
  date:
    formats:
      default: "%d/%m/%Y"
      short: "%e %b"
      long: "%e %B %Y" 
  time:
    formats:
      default: "%d %B %Y %H:%M:%S"
      short: "%d %b %H:%M"
      long: "%A %d %B %Y %H:%M"
    am: 'am'
    pm: 'pm'

en:
  date:
    formats:
      default: "%Y-%m-%d"
      long: "%B %d, %Y"
      short: "%b %d"
  time:
    am: am
    formats:
      default: ! '%a, %d %b %Y %H:%M:%S %z'
      long: ! '%B %d, %Y %H:%M'
      short: ! '%d %b %H:%M'
    pm: pm 
```

这不是特定于特定视图，而是例如在我的一个视图中：

```
<td><%=l job_application.created_at, :format => :default %></td> 
```

我得到了那些奇怪的输出：

```
With locale = :en
=> t, 30 o 2012 18:09:33 +0000

With locale = :fr
=> 30 o 2012 18:09:33 
```

这些错误的“格式”从何而来？

我正在使用 Rails 3.2.8（使用 Postgresql / gem pg），**与 I18n 相关的所有内容都可以正常工作，除了 dates**。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T02:50:29.120

我想我终于想通了，抱歉花了这么长时间。

Rails`l`助手只是调用`I18n.localize`. 如果您跟踪`I18n.localize`代码，您将在[这里](https://github.com/svenfuchs/i18n/blob/master/lib/i18n/backend/base.rb#L59)结束：

```
format = format.to_s.gsub(/%[aAbBp]/) do |match|
  case match
  when '%a' then I18n.t(:"date.abbr_day_names",                  :locale => locale, :format => format)[object.wday]
  when '%A' then I18n.t(:"date.day_names",                       :locale => locale, :format => format)[object.wday]
  when '%b' then I18n.t(:"date.abbr_month_names",                :locale => locale, :format => format)[object.mon]
  when '%B' then I18n.t(:"date.month_names",                     :locale => locale, :format => format)[object.mon]
  when '%p' then I18n.t(:"time.#{object.hour < 12 ? :am : :pm}", :locale => locale, :format => format) if object.respond_to? :hour
  end
end 
```

所以`localize`助手不`strftime`用于日期/时间的“字符串”部分，它试图自己做。为上述月份和日期名称添加翻译（作为 YAML 中的数组），您的本地化日期和时间应该开始工作。

如果你的 YAML 中没有这些翻译数组，那么`I18n.t(:"date.abbr_month_names")`会给你这样的字符串：

```
"translation missing: en.date.abbr_month_names" 
```

然后`I18n.localize`最终会做这样的愚蠢事情：

```
"translation missing: en.date.abbr_month_names"[10] 
```

这将使用[`String#[]`](http://ruby-doc.org/core/String.html#method-i-5B-5D)而不是预期的[`Array#[]`](http://ruby-doc.org/core/Array.html#method-i-5B-5D)，你最终会得到随机的单字符月份和日期名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:06:23.027

> 这些错误的“格式”从何而来？

因为`created_at`是 DateTime，所以使用`time`格式（不是`date`）。

[https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml#L195](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml#L195)

```
time:
  am: am
  formats:
    default: ! '%a, %d %b %Y %H:%M:%S %z' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T14:29:56.337

在您的控制台中输入

```
I18n.t(:"date") 
```

检查您是否获得了您在翻译`.yml`文件中定义的翻译。

将结构与标准 EN 语言环境进行比较

```
I18n.t(:"date", locale:'en') 
```

这让我注意到我`date:`在 my 中两次声明了该属性`.yml`，并且第一部分被第二个声明覆盖。

你应该得到`abbr_month_names`你打电话时声明的那个

```
I18n.t(:"date.abbr_month_names") 
```

这些是调用时将使用的`%b`。

如果没有，请检查您的语言环境`.yml`文件以确保它们被正确声明，并且没有被声明两次。

您也可以打电话`I18n.locale`检查`.yml`您正在编辑的文件是否是 rails 正在使用的文件

# c# - Excel 值到变量列的范围

> ID：12664070
> 
> 赞同：0
> 
> 时间：2012-09-30T18:58:14.113
> 
> 标签：c#, excel

我已经搜索了所有内容，但没有人遇到与我相同的问题。

基本上，用户单击 Excel 中的一个单元格，打开我的表单，填写值，单击插入。将这些变量添加到数组中的程序，然后 Excel 读取并放置该数组。

这是我的第一个 Office 应用程序，所以我在这里完全是盲目的，但这是我的伪代码。

我的解决方案已编辑：

```
 static string GetColumnLetter(int columnNumber)
    {
        var dividend = columnNumber;
        var columnName = String.Empty;

        while (dividend > 0)
        {
            var modulo = (dividend - 1) % 26;
            columnName = Convert.ToChar(65 + modulo) + columnName;
            dividend = ((dividend - modulo) / 26);
        }

        return columnName;

    }

        // Insert into Excel
    public static void ExcelInsert(string mFunction, string mColor, int mQty, string mFau, string mPrice)
    {
        var values = new List<string>
                         {
                             mFunction,
                             mColor,
                             mQty.ToString(),
                             mFau,
                             mPrice
                         }.ToArray();

        var rowNumber = Globals.ThisAddIn.Application.ActiveCell.Row;
        var columnNumber = Globals.ThisAddIn.Application.ActiveCell.Column;
        var columnLetter = GetColumnLetter(columnNumber);

        for (var i = 0; i < values.Count(); i++ )
        {
            var range = Globals.ThisAddIn.Application.Range[String.Format("{0}{1}", columnLetter, rowNumber)];
            range.Value = values[i];
            columnNumber++;
            columnLetter = GetColumnLetter(columnNumber);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:42:25.973

我会尝试获取活动单元格的位置，然后向右移动，每次添加一个值，如下所示：

```
using Excel = Microsoft.Office.Interop.Excel;

void MyMethod()
{
    //Replace '7' with the number of fields on your Windows Form
    int numberOfFields = 7;

    string[] array = new string[numberOfFields];

    array[0] = textBoxOneValue;
    array[1] = textBoxTwoValue;
    array[2] = textBoxThreeValue;
    array[3] = textBoxFourValue;
    array[4] = textBoxFiveValue;
    array[5] = textBoxSixValue;
    array[6] = textBoxSevenValue;

    Excel.Application application = new Excel.Application();
    Excel.Workbook workbook = application.Workbooks.Open(@"C:\whatever.xlsx");
    Excel.Worksheet worksheet = workbook.ActiveSheet;

    Excel.Range activeCell = application.ActiveCell;

    int rowNumber = activeCell.Row;
    int columnNumber = activeCell.Column;

    string columnLetter = GetColumnLetter(columnNumber);

    for(int i = 0; i < numberOfFields; i++)
    {
        Excel.Range range = worksheet.get_Range(String.Format("{0}{1}", columnLetter, rowNumber));
        range.Value = array[i];
        columnNumber++;
        columnLetter = GetColumnLetter(columnNumber);
    }
}

string GetColumnLetter()
{
    int dividend = columnNumber;
    string columnName = String.Empty;
    int modulo;

    while (dividend > 0)
    {
        modulo = (dividend - 1) % 26;
        columnName = Convert.ToChar(65 + modulo).ToString() + columnName;
        dividend = (int)((dividend - modulo) / 26);
    }

    return columnName;

} 
```

当然要感谢[Graham](https://stackoverflow.com/users/1826/graham)的[GetColumnLetter](https://stackoverflow.com/a/182924/969613)方法，这是我见过的最天才的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:07:48.923

你不需要一个循环。

如果`arr`是一个数组，那么

```
ActiveCell.Resize(, UBound(arr) - LBound(arr) + 1).Value = arr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:12:25.280

这是遍历数组的经典方法

```
Dim x(3) As String ' your array
x(0) = "abc"
x(1) = "def"
x(2) = "ghi"
x(3) = "jkl"

Dim r As Range ' range to paste
Set r = ActiveCell

For Each s In x
    r.Value = s
    Set r = r.Offset(,1) ' keep going right
Next 
```

如果您在位置 0 没有任何内容，以下内容可能会有所帮助

```
Dim x(4) As String ' this can actually contain 5 items, from 0 to 4
x(1) = "abc"
x(2) = "def"
x(3) = "ghi"
x(4) = "jkl"

Dim r As Range ' range to paste
Set r = ActiveCell

For i = 1 To UBound(x) ' skip 0
    r.Value = x(i)
    Set r = r.Offset(, 1) ' keep going right
Next 
```

# iphone - 不更新 tableviewcell 中的可视单元格

> ID：12664077
> 
> 赞同：0
> 
> 时间：2012-09-30T18:59:12.607
> 
> 标签：iphone, ios, uitableview

我正在使用 tableviewcell 编写应用程序。当我触摸一个单元格时，我会转到另一个视图控制器，在那里我激活一个开关并将此状态保存在 plist 文件中。回到 tableviewcell 我从 plist 文件中读取信息并更新触摸和激活的单元格的背景颜色。问题是当我通过导航按钮返回 tableview 单元格时，如果单元格可见，则不会显示背景颜色。只有当我向下或向上滚动时，颜色单元才会更新。我尝试过 reloadData 方法，但没有成功。在 IOS API 上，可见单元格将使用 reloadData 方法进行更新。提前致谢。

```
- (void)viewWillAppear:(BOOL)animated {
controladorRegistre = [[ControladorRegistres alloc]initRegistreAmbCategoria];
[self.tableCategories reloadData];
[super viewWillAppear:animated];

}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell       *)cell
            forRowAtIndexPath:(NSIndexPath *)indexPath
{
//Pinta la celda si esta activada
registre = [controladorRegistre getRegistreCategoria:cell.textLabel.text];
BOOL estaActivat = [[registre objectForKey:@"estaActivat"] boolValue];
if (estaActivat) {
    [cell setBackgroundColor:[UIColor redColor]];
}else{
    cell.backgroundColor = [UIColor whiteColor];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:08:53.910

当`willDisplayCell`从另一个视图控制器转换时已经加载的单元格变得可见时不会自动调用，您必须将更新代码放入`viewWillAppear`.

我通常把它分解成一个单独的方法，比如`updateCells`.

`[_tableView visibleCells]`通常，您可以使用或访问相关单元格`indexPathsForVisibleCells`。在您的情况下，您可以保留启动第二个视图控制器的选定单元格的引用并使用它。

# java - Proguard 和序列化

> ID：12664078
> 
> 赞同：1
> 
> 时间：2012-09-30T18:59:17.287
> 
> 标签：java, android

pro guard（混淆）是否影响java中对象的序列化。我的意思是，如果我使用 pro Guard 来混淆我的代码，那么即使我使用序列化对象将其写入文件并稍后再次读取，序列化仍然可以工作

谢谢

# php - $addToSet 和 $inc 用于更新行

> ID：12664080
> 
> 赞同：1
> 
> 时间：2012-09-30T18:59:20.187
> 
> 标签：php, mongodb

我正在研究评级系统。当用户评分时，$inc 增加该字段，并`addToSet`添加 user_id 以确保用户只点击一次评分。我在更新之前检查 user_id 是否已经在 x 字段中，但这是我宁愿避免的另一个查询。我可以在不编写另一个查询的情况下达到这个目的吗？我的意思是，`$addToSet`只有在没有这样的价值时才添加；我可以改为获得受影响的行吗？你能建议其他查询吗？

谢谢！

```
..->update(
    array("_id" => $idob),
    array(
       '$inc'      => array($type => (int) 1),
       '$addToSet' => array("x"   => (int) $user_id)
    )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:35:56.857

好的，我看到了问题。

```
..->update(
    array("_id" => $idob),
    array(
       '$inc'      => array($type => (int) 1),
       '$addToSet' => array("x"   => (int) $user_id)
    )
); 
```

问题是你需要一个条件`$inc`，以便它只有`$inc`在它添加到集合时才存在。

这对于唯一索引是不可能的，因为唯一索引从文档 atm 的根开始工作。此外，您可能希望将`$inc`用作预聚合或不使用的一种形式。

一种方法可能是：

```
update(
    array('_id' => $idob, 'x' => array('$nin' => array($user_id))), 
    array(
        '$inc' => array($type => 1),
        '$push' => array('x' => (int)$user_id)
    )
) 
```

仅当该 user_id 不存在于`x`.

# java - Datanucleus JDO 中的映射属性

> ID：12664086
> 
> 赞同：0
> 
> 时间：2012-09-30T19:00:19.070
> 
> 标签：java, maven, jdo, datanucleus

我有一个有 Map 的类，但是当我尝试保存这个实体时，抛出空指针异常。我的代码/设置可能有什么问题？

我的课：

```
@PersistenceCapable(detachable="true")
public class MyClassEntity implements MyClass {

    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.NATIVE)
    private String id;

    @Persistent @Join @Element(embedded="true")
    @Extension(vendorName = "datanucleus", key = "implementation-classes", value = "com.company.MySecondClassEntity")
    private Map<String, MySecondClass> map = new HashMap<String, MySecondClass>();

    // Getters and setters here

} 
```

例外：

```
Exception in thread "main" java.lang.NullPointerException
    at org.datanucleus.store.rdbms.sql.AbstractStatementGenerator.<init>(AbstractStatementGenerator.java:101)
    at org.datanucleus.store.rdbms.sql.AbstractStatementGenerator.<init>(AbstractStatementGenerator.java:139)
    at org.datanucleus.store.rdbms.sql.UnionStatementGenerator.<init>(UnionStatementGenerator.java:153)
    at org.datanucleus.store.rdbms.scostore.RDBMSJoinMapStore.getSQLStatementForGet(RDBMSJoinMapStore.java:770)
    at org.datanucleus.store.rdbms.scostore.RDBMSJoinMapStore.getValue(RDBMSJoinMapStore.java:639)
    at org.datanucleus.store.rdbms.scostore.RDBMSJoinMapStore.putAll(RDBMSJoinMapStore.java:195)
    at org.datanucleus.store.mapped.mapping.MapMapping.postInsert(MapMapping.java:135)
    at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:520)
    at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:166)
    at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:142)
    at org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2377)
    at org.datanucleus.state.JDOStateManager.makePersistent(JDOStateManager.java:2353)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1896)
    at org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1745)
    at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1593)
    at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:731)
    at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:756)
    at com.mycompany.dao.impl.JDOGenericDao.save(JDOGenericDao.java:63)
    at com.mycompany.dao.Main.main(Main.java:29) 
```

Maven依赖：

```
 <dependencies>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>3.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jdo</artifactId>
        <version>3.1.2</version>
    </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo-api</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>[1.2, 1.3)</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-rdbms</artifactId>
        <version>3.1.2</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:17:36.397

会认为“值实现类”作为扩展键比你在那里拥有的更有意义（否则怎么知道你在谈论地图的值而不是键？）

# c# - Xceed Datagrid ExportToExcel .xml/.xls/.xlsx 格式

> ID：12664088
> 
> 赞同：2
> 
> 时间：2012-09-30T19:00:21.213
> 
> 标签：c#, excel, xceed-datagrid, xceed

有没有办法让 ExportToExcel 函数使用 .xls 或 .xlsx 格式而不是它使用的 .xml？我的客户在导出到 Excel 时不希望看到 .xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:16:57.507

[Excel XML Spreedsheet 格式](http://www.openwith.org/file-extensions/xlsx/883)不是xlsx 文件吗？只需将输出文件的扩展名从 *.xml 更改为 *.xlsx，然后尝试在 Excel 中打开它。

# haskell - Haskell 在函数中被 -> 和 => 弄糊涂了

> ID：12664095
> 
> 赞同：-1
> 
> 时间：2012-09-30T19:01:06.143
> 
> 标签：haskell

`->`和有什么区别`=>`？在函数的声明中？

```
foobar :: Integer -> Integer -> [Integer] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:47:38.107

`->`用于功能需要。签名的`x -> y`意思是“一个接受一个`x`并返回一个`y`”的函数。

`=>`用于处理类。每个类型签名只能出现一次。它左边的东西是一个“上下文”，列出了哪些类型必须是哪些类的实例。右边的东西是一个普通的类型签名。

例如，`(Num x, Show y) => x -> y -> String`将指示`x`必须是数字类型并且`y`必须是可显示类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:06:37.880

阅读[类型约束](http://en.wikibooks.org/wiki/Haskell/Classes_and_types#Type_constraints)。

基本上`foo :: (X a) => a -> b`意味着 type`a`必须有一个 type 的实例 class `X`。

# debugging - 使用 XCode 的脑残调试窗口

> ID：12664096
> 
> 赞同：0
> 
> 时间：2012-09-30T19:01:11.607
> 
> 标签：debugging, uiimageview

XCode 是我遇到过的最差的调试工具。为什么没有任何下拉菜单以人们期望的方式扩展？当我深入到 UIView 子类时，为什么看不到像 ImageView 的 Frame 之类的东西？这很糟糕，并且使复杂的开发环境更加糟糕。

在断点处暂停时如何查看 UIImageView 的框架？为什么这不起作用？

```
po _minAltSlider.frame 
```

当这与您在代码中使用的引用相同时，即：

```
(CGRectContainsPoint(_minAltitudeSlider.frame, touchPoint) 
```

有人可以告诉我到底如何确定框架在运行时认为它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:51:39.417

[iPhone——是否可以在 Xcode 调试器中检查 UIView 的框架？](https://stackoverflow.com/questions/3435354/iphone-is-it-possible-to-inspect-the-frame-of-a-uiview-in-the-xcode-debugger)

最简单的方法是右键单击并在“_view”上“打印描述”，当您向下钻取时，它位于 UIViewController 级别。

天哪，你是对的。由于“框架”实际上并没有显示在那里，我怎样才能在它上面放置一个内存断点？但是什么。至少你可以看到它。

# c# - 根据输入创建对象

> ID：12664097
> 
> 赞同：1
> 
> 时间：2012-09-30T19:01:21.603
> 
> 标签：c#, selenium

我正在使用 Selenium 进行自动化。挑战是这样的。

```
FirefoxDriver driver = new FirefoxDriver();
InternetExplorerDriver driver = new InternetExplorerDriver();
ChromeDriver driver = new ChromeDriver(); 
```

所有这三个创建驱动程序对象。并且所有驱动程序对象都有类似的方法。有一段代码将在这些对象实例化后运行。在程序的一次运行期间，仅使用其中一个驱动程序。我需要一些逻辑来做到这一点。因为没有所有这些 3 的超类。我正在寻找其他出路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:15:35.870

工厂方法模式可以快速解决您的问题。

```
//Define the interface with the common methods
Interface ISuperDriver
{
void run();
}

//implement the interface on firefox
class FireFoxDriver:ISuperDriver{
void run(){
//firefox driver
}
}

//implement the interface on IE
class InternetExplorerDriver:ISuperDriver{
void run(){
//ie driver
}
}

//chrome
class ChromeDriver:ISuperDriver{
void run(){
//chrome
}
}

//create reference for the interface
ISuperDriver Driver;

if(<input 1>){
 Driver= new FireFoxDriver();}//instantiate firefox
else if(<input 2>){
 Driver= new InternetExplorerDriver();}//IE
else if(<input 3>){
 Driver= new ChromeDriver();}//Chrome

//Finally invoke your method
Driver.Run(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:06:23.710

只需创建一个包含这 3 个类的功能的超类。

```
public abstract class Browser {
    public abstract Navigate(string link);
}

public class Firefox : Browser {
    FirefoxDriver driver;
    public Firefox(){
        driver = new FirefoxDriver();
    }

    public abstract Navigate(string link){
        driver.GoTo(link);
    }
}

public class Chrome : Browser {
    ChromeDriver driver;
    public Chrome (){
        driver = new ChromeDriver();
    }

    public abstract Navigate(string link){
        driver.FollowLink(link);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:43:29.723

我知道这已经晚了。但这就是我最终为自己工作的东西

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;

using OpenQA.Selenium.Internal;
using OpenQA.Selenium.IE;
using OpenQA.Selenium.Chrome;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Remote;
using OpenQA.Selenium;
using System.Collections.Specialized;

enum Browser { ie, firefox, chrome };

namespace SearchandClickAds
{
    class Program
    {

        public static RemoteWebDriver getRemoteDriver(Browser b)
        {

            switch (b)
            {
                case Browser.ie:
                    return new InternetExplorerDriver(
                                    InternetExplorerDriverService.CreateDefaultService(),
                                    new InternetExplorerOptions(),
                                    TimeSpan.FromMinutes(10)
                    );

                case Browser.firefox:

                    return new FirefoxDriver(
                                new FirefoxBinary(),
                                new FirefoxProfile(),
                                TimeSpan.FromMinutes(10)
                    );

                case Browser.chrome:

                    return new ChromeDriver(
                                                ChromeDriverService.CreateDefaultService(),
                                                new ChromeOptions(),
                                                TimeSpan.FromMinutes(10)
                    );
            }

            return null;
        }

        static void Main(string[] args)
        {

            string browser_s = args[0].ToLower();
            Browser browser;

            if (browser_s == "ie")
            {
                browser = Browser.ie;
            }
            else if (browser_s == "chrome")
            {
                browser = Browser.chrome;
            }
            else if (browser_s == "firefox")
            {
                browser = Browser.firefox;
            }
            else
            {
                Console.WriteLine("Unknown browser. Must be ie, chrome, or firefox");
                return;
            }

            RemoteWebDriver driver = null;

            while (true)
            {
                try
                {

                    driver = getRemoteDriver(browser);
                    /* Do navigation here */
                 }
            }

            Console.WriteLine("Done.");
            Environment.Exit(0);
            return;

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:51:59.977

策略设计模式就是解决这个问题的一种，它将对象的实例化延迟到运行时。

[点我](http://www.codeproject.com/Articles/38631/Strategy-Design-Pattern)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T19:17:04.600

您可以使用以下类型的类：

```
public abstract class BrowserDriver { ... }

public class InternetExplorerDriver : BrowserDriver { ... }
public class FirefoxDriver : BrowserDriver { ... }
public class ChromeDriver : BrowserDriver { ... } 
```

用法：

```
BrowserDriver driver = null;

switch (BrowserType) // assuming BrowserType is a property of type Browser enum, holding the value from the set {InternetExplorer, Firefox, Chrome}
{
    case Browser.InternetExplorer:
        driver = new InternetExplorerDriver();
        break;
    case Browser.Firefox:
        driver = new FirefoxDriver();
        break;
    case Browser.Chrome:
        driver = new ChromeDriver();
        break;
}

SomeFunction(driver); 

// ...

public void SomeFunction(BrowserDriver driver)
{
    //... your code here
} 
```

# ios - iOS6：Twitter SetInitialText 不工作

> ID：12664099
> 
> 赞同：0
> 
> 时间：2012-09-30T19:01:41.703
> 
> 标签：ios, twitter, xamarin.ios, ios6

我刚刚将我的应用程序更新到 iOS 6，并且该`SetInitialText`功能`TWTweetComposeViewController`已停止工作。作曲家只是空空如也。我正在使用 MonoTouch，还有其他人看到这个问题吗？相同的代码在我的 iOS 5 设备上仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:26:56.610

使用以下代码，这对我来说可以按预期工作：

```
var button2 = UIButton.FromType (UIButtonType.RoundedRect);
button2.Frame = new RectangleF (0f, 0f, 300f, 40f);
button2.SetTitle ("Tweet!", UIControlState.Normal);
button2.TouchUpInside += (sender, e) => {
    var tvc = new TWTweetComposeViewController ();
    tvc.SetInitialText ("Here is a tweet...");
    tvc.SetCompletionHandler ((result) => {
        if (result == TWTweetComposeViewControllerResult.Cancelled) {
            Console.WriteLine ("Cancelled sending the tweet!");
        } else {
            Console.WriteLine ("Tweet sent! hurrah!");  
        }
        this.DismissModalViewControllerAnimated (true);
    });
    this.PresentModalViewController (tvc, true);
};
View.AddSubview (button2); 
```

即使 PresentModal 和 DismissModal 已被弃用，您是否有任何问题的示例代码？

# android - 彩信内容提供商问题（三星 Galaxy S3）

> ID：12664101
> 
> 赞同：1
> 
> 时间：2012-09-30T19:01:48.923
> 
> 标签：android, sms, uri, android-contentprovider, mms

当我们尝试在 Sprint 网络上运行的三星 Galaxy S3 (Android 4.0.4) 上查询“content://mms-sms/conversations/”时，我们遇到了以下崩溃。我们的调用代码：

```
 Uri uri = Uri.parse("content://mms-sms/conversations/");

    Log.e("IL", "CONTENT MIME " + context.getApplicationContext().getContentResolver().getType(uri));

    // The next call crashes...
     Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

有趣的事实是上面的日志返回

```
 CONTENT MIME vnd.android-dir/mms-sms 
```

正如预期的那样。

下面的堆栈跟踪：

```
Caused by: java.lang.NullPointerException
at android.os.Parcel.readException(Parcel.java:1333)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
at android.content.ContentProviderClient.query(ContentProviderClient.java:50)
at com.ilyngo.sms.model.MessageCatalog.refresh(MessageCatalog.java:107)
at com.ilyngo.sms.model.MessageCatalog.getSharedCatalog(MessageCatalog.java:58)
at com.ilyngo.sms.model.ContactsManager.clearCaches(ContactsManager.java:31)
at com.ilyngo.sms.app.bill_test.ThreadListActivity.onResume(ThreadListActivity.java:57)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1158)
at android.app.Activity.performResume(Activity.java:4544)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
... 12 more
java.lang.NullPointerException
at android.os.Parcel.readException(Parcel.java:1333)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
at android.content.ContentProviderClient.query(ContentProviderClient.java:50)
at com.ilyngo.sms.model.MessageCatalog.refresh(MessageCatalog.java:107)
at com.ilyngo.sms.model.MessageCatalog.getSharedCatalog(MessageCatalog.java:58)
at com.ilyngo.sms.model.ContactsManager.clearCaches(ContactsManager.java:31)
at com.ilyngo.sms.app.bill_test.ThreadListActivity.onResume(ThreadListActivity.java:57)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1158)
at android.app.Activity.performResume(Activity.java:4544)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2486)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2000)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:38:37.200

可以使用简化版本的查询来解决问题：

```
Uri.parse("content://mms-sms/conversations?simple=true"); 
Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

这里的关键点是 URI `content://mms-sms/conversations?simple=true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:29:18.423

此 ContentProvider 不接受空投影。您必须使用“*”显式提供它，以便将其传递给底层 SQL 查询语句：

```
final String[] proj = {"*"};
Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, proj, null, null, null); 
```

我想这是一个一般的Android问题。

检查这个问题：[如何在 Android 中读取彩信数据？](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)

# c++ - 什么是“通过* &”？

> ID：12664102
> 
> 赞同：3
> 
> 时间：2012-09-30T19:01:59.250
> 
> 标签：c++, pass-by-reference

这是什么意思？我知道通过引用传递的使用是传递引用，因此您可以直接更改它而无需返回，并且通过指针传递类似但运行时间较慢。但是，我不明白 * & 的作用。例如，

```
foo(int * & var) { } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T19:03:34.167

它通过引用传递一个指针，以便您可以更改指针指向的内容并将这些更改反映给调用者。

例如：

```
void notByReference(int *p) {
    p = nullptr;
}

void byReference(int *&p) {
    p = nullptr;
}

int main() {
    int *i = new int;
    notByReference(i); //i is not changed since a copy of the pointer was passed
    byReference(i); //i itself is changed, leaking memory
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:03:45.510

这允许您通过引用传递指针。这使函数有机会修改指针并让调用者看到该修改。

你不需要停在那里。例如，您可以通过引用传递指向 int 指针的指针。

```
void foo(int** &var) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:16:56.350

请记住，类型限定符`&`彼此`*`独立。当您看到`some_type&`它时，它只是意味着“引用`sometype`”，这反过来意味着该函数可以看到调用者的参数版本并可以对其进行修改。当`sometype`是指针时，它仅意味着调用者版本的参数类型是指针，并且函数可以修改该指针。

# sharepoint - SharePoint 2010 多语言搜索优化

> ID：12664105
> 
> 赞同：1
> 
> 时间：2012-09-30T19:02:20.140
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-search

我的 SharePoint 2010 网站中有一个搜索优化面板，该面板利用托管元数据术语集，我在其中安装了第二种语言并为该语言定义了并行术语。例如，我的多语种术语集是“color”，我的术语是“red”和“blue”，平行术语是“rojo”和“azul”。

用户可以选择他们想在网站上显示的语言，但由于某种原因，我无法显示西班牙语术语……优化面板始终显示英语术语。我的备份计划是编写一个自定义优化面板来查询术语库并获取我的备用语言术语，但我认为我可以通过配置来做到这一点。有没有人对此有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:17:03.180

我找到了自己问题的答案：

[http://technet.microsoft.com/en-us/library/ff805062.aspx](http://technet.microsoft.com/en-us/library/ff805062.aspx)

[http://social.technet.microsoft.com/Forums/en/sharepoint2010setup/thread/de2d48f6-043f-4dde-a3c3-bd5228c68965](http://social.technet.microsoft.com/Forums/en/sharepoint2010setup/thread/de2d48f6-043f-4dde-a3c3-bd5228c68965)

# java - 弹簧注释不起作用

> ID：12664107
> 
> 赞同：0
> 
> 时间：2012-09-30T19:02:32.700
> 
> 标签：java, spring, spring-mvc, annotations

我从 Spring Framework 开始，想要做一个带有注释的 HelloWorld，我已经让它创建了一个控制器和一个视图，我猜是基本的 hello 工作；但是，我想使用注释，因为我不能再使用 SimpleFormController（已弃用）。

我得到的错误是 Estado HTTP 404 - /av/index.jsp

我正在使用 Netbeans，并且我的示例基于它提供的基本模板。我有以下文件，我很确定这是一个错误配置，但到目前为止我找不到任何可以帮助我的东西。提前致谢。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <bean id="annotationHandlerMapping" 
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="order" value="1"/>
        <property name="alwaysUseFullPath" value="true"/>
    </bean>

    <bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <context:component-scan base-package="controller"/>

</beans> 
```

indexController.java

```
package controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.portlet.ModelAndView;

@Controller
public class IndexController {

    @RequestMapping(value="/index.do", method= RequestMethod.GET)
    public ModelAndView inicio (){
        ModelAndView mv = new ModelAndView("index");
        mv.addObject("usuario", "jaxkodex");
        return mv;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:37:02.397

你不见了

```
<mvc:annotation-driven /> 
```

在你的配置中`dispatcher-servlet.xml`

请参阅[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:27:08.253

您在控制器中映射了路径`/index.do`，因此您必须使用以下 url 访问它：`http://localhost/av/index.do`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T10:29:37.950

`<mvc:annotation-driven/>`会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T07:30:37.887

请试试这个

```
<bean 
class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

在 dispatcher-servlet.xml 中添加一个条目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-02T16:07:22.603

在您的 dispatcher-servlet.xml 中，添加 `<mvc:annotation-driven/>`以启用注释驱动的处理程序映射。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T16:21:08.783

尝试通过我的教程之一：

使用基于 java 的配置创建一个[简单的控制器](http://fruzenshtein.com/spring-mvc-creation-of-simple-controller-with-java-based-config/)

我希望我会成功

# ios - 动画 UITextview 变化，保持键盘到位

> ID：12664109
> 
> 赞同：0
> 
> 时间：2012-09-30T19:02:38.640
> 
> 标签：ios, uinavigationcontroller, uitextview, first-responder

我有一个 UITextview，成为第一响应者并出现键盘。目前，我在 inputAccessoryView 工具栏中有按钮，可以通过字符串数组向前和向后交换文本。我的过程没有问题，所以我当然倾向于打破它。我的愿望是像旋转木马一样左右滑动文本视图，以使用户更清楚地知道下一个或上一个字符串来来去去。当前系统只是简单地替换没有动画的文本。

我的第一个想法是创建一个 UINavigationController，给它一个 UIViewControllers 数组来呈现 UITextviews。导航控制器视图仅与文本视图一样大，我将其作为子视图添加到我的完整视图（它本身在导航控制器中）。我得到了这个工作相当完整，导航栏是隐藏的，它看起来与原始文本视图没有什么不同，除了文本视图现在向右或向左滑动，这取决于我是推动还是弹出。问题在于键盘与关闭的视图控制器一起滑落，然后新控制器中的新文本视图成为第一响应者并且键盘返回。关闭，但没有雪茄。

我考虑过使用页面视图控制器，但它似乎也会有同样的问题。我想我可能不得不回到单个文本视图并直接使用静态屏幕抓取为整个过程设置动画。这完全超出了我的经验水平，我认为必须有一种更简单的方法。

任何人都可以建议一种简单的方法来保持该键盘在按所述交换视图时保持存在吗？关于其他攻击角度的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:04:09.787

对于一个简单的动画来说，这似乎是一个非常大的开销。

尝试这样的事情（假设 ARC）：

```
typedef enum _eDirection
{
    rightToLeft = -1,
    leftToRight = 1
} eDirection;

- (void) animateTextFields:(eDirection)direction
{
    CGFloat distance = self.window.bounds.size.width;
    UITextField *oldTextField = thisView.textField;
    CGRect oldTFRect = oldTextField.frame;
    CGRect newTFRect = CGRectOffset(oldTFRect, -direction * distance, 0);
    UITextField *newTextField = [[UITextField alloc] initWithFrame:newTFRect];
    [newTextField setText:@"whatever"];
    [self addSubview:newTextField];
    [UIView animateWithDuration:0.3f
                     animations:^{
                         [oldTextField setFrame:CGRectOffset(oldTextField.frame, direction * distance, 0)];
                         [newTextField setFrame:CGRectOffset(newTextField.frame, direction * distance, 0)];
                     } completion:^(BOOL finished) {
                         [self setTextField:newTextField];
                         [self removeSubview:oldTextField];
                         [newTextField becomeFirstResponder];
                     }];
 } 
```

（**免责声明**：与从头顶输入的所有代码一样，等等）

此方法将创建一个新的 textField，将其水平动画到屏幕上，同时按照您指定的方向将现有的 textField 移出屏幕，然后将新的 textField 分配为当前的并使其成为 firstResponder。

# wpf - MVVMCross 如何与 WPF（Windows）一起使用？

> ID：12664110
> 
> 赞同：1
> 
> 时间：2012-09-30T19:03:01.110
> 
> 标签：wpf, windows, windows-runtime, mvvmcross

如何在 WinRT (Windows 8) 上使用它 - 我无法编译它。我可以将它与“普通”Windows (WPF) 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:44:54.253

目前还没有专门用于 wpf 的 mvvmcross 端口——有几个人建议构建一个，但到目前为止，大多数用户都要求在移动平台上做更多的工作。有一个当前的控制台 (win32) 端口，将其扩展到 WPF 应该非常简单。

未来的开发现在基于 Portable Library 分支 - 请参阅[http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html上的一些信息和](http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html)[https://github](https://github.com/slodge/MvvmCross/tree/vnext)上的代码。 [com/slodge/MvvmCross/tree/vnext](https://github.com/slodge/MvvmCross/tree/vnext)

对于 WinRT，vNext 分支中的 TwitterSearch 示例是一个很好的起点——它应该在所有 MonoTouch、MonoDroid、WP7、WinRT 和控制台上编译和工作：

![移至 vNext](../Images/465790e1e2f393923e2c25f8fedb572e.png)

如果您发现无法编译，请在此处或 github 问题中记录特定的编译器错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:19:22.583

`MvvmCrossLibs\MvvmCrossLibs.sln`由许多项目组成，需要安装不同的运行时才能正确打开（Mono Touch、Mono Droid、WP7）。如果您只需要 WinRT 中的库，最好的办法是`Cirrious\Cirrious.MvvmCross\Cirrious.MvvmCross.WinRT.csproj`直接打开并使用 NuGet 添加缺少的`Newtonsoft.JSON`包（您需要在此`.sln`之前保存自动创建的文件）。在那之后它应该编译得很好，至少它对我有用。现在只需在您的 Windows 应用商店应用项目中引用该程序集并开始使用它。

我以前没有任何使用 MVVMCross 的经验，但它看起来目前不支持 despktop WPF 应用程序。不过，我不知道创建/编译这样的版本会有多困难。

# xml - ACORD XML 命名空间

> ID：12664111
> 
> 赞同：1
> 
> 时间：2012-09-30T19:03:01.937
> 
> 标签：xml, namespaces

我们正在为保险领域开发 Web 服务，并且我们使用 ACORD XML 模式作为标准。Web 服务正在生成具有如下命名空间的 ACORD XML：

```
<ns:TXLife><ns:Party></ns:Party></ns:TXLife> 
```

如果命名空间包含在 ACORD XML 中，它是否被视为 ACORD XML？在 ACORD XML 中使用名称空间有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:21:59.770

> 如果命名空间包含在 ACORD XML 中，它是否被视为 ACORD XML？

如果 XML 符合 ACORD XML 模式（即元素的名称空间和排列是正确的，提供了所需的元素等），那么 XML 就是“ACORD XML”。

您提供的 XML 示例需要定义前缀`ns`以引用您正在使用的适当 ACORD 名称空间名称。我假设它在您的完整 XML 中某处，因为您正在使用自动生成的 Web 服务——但如果没有，则需要添加它。

> 在 ACORD XML 中使用名称空间有什么好处？

如果没有 ACORD 命名空间，则不能将 XML 视为 ACORD XML。请注意，命名空间不一定*将*XML 转换为 ACORD XML，因为它仍然必须符合 ACORD XML 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:21:22.110

如果这些元素是在标准模式中定义的，那么它们*必须*位于正确的命名空间中。

# java - 从基于固定大小数组的 MinHeap 数据结构中删除任何元素

> ID：12664112
> 
> 赞同：2
> 
> 时间：2012-09-30T19:03:01.980
> 
> 标签：java, arrays, data-structures, heap

我`array based MinHeap`在java中使用。我正在尝试创建一个自定义方法，它不仅可以`root`从堆中删除任何元素，而且不能。下面是`MinHeap`代码-

```
public class MinHeap {

    /** Fixed-size array based heap representation */
    private int[] h;
    /** Number of nodes in the heap (h) */
    private int n = 0;

    /** Constructs a heap of specified size */
    public MinHeap(final int size) {
        h = new int[size];
    }

    /** Returns (without removing) the smallest (min) element from the heap. */
    public int peek() {
        if (isEmpty()) {
            throw new RuntimeException("Heap is empty!");
        }

        return h[0];
    }

    /** Removes and returns the smallest (min) element from the heap. */
    public int poll() {
        if (isEmpty()) {
            throw new RuntimeException("Heap is empty!");
        }

        final int min = h[0];
        h[0] = h[n - 1];
        if (--n > 0)
            siftDown(0);
        return min;
    }

    /** Checks if the heap is empty. */
    public boolean isEmpty() {
        return n == 0;
    }

    /** Adds a new element to the heap and sifts up/down accordingly. */
    public void add(final int value) {
        if (n == h.length) {
            throw new RuntimeException("Heap is full!");
        }

        h[n] = value;
        siftUp(n);
        n++;
    }

    /**
     * Sift up to make sure the heap property is not broken. This method is used
     * when a new element is added to the heap and we need to make sure that it
     * is at the right spot.
     */
    private void siftUp(final int index) {
        if (index > 0) {
            final int parent = (index - 1) / 2;
            if (h[parent] > h[index]) {
                swap(parent, index);
                siftUp(parent);
            }
        }
    }

    /**
     * Sift down to make sure that the heap property is not broken This method
     * is used when removing the min element, and we need to make sure that the
     * replacing element is at the right spot.
     */
    private void siftDown(int index) {

        final int leftChild = 2 * index + 1;
        final int rightChild = 2 * index + 2;

        // Check if the children are outside the h bounds.
        if (rightChild >= n && leftChild >= n)
            return;

        // Determine the smallest child out of the left and right children.
        final int smallestChild = h[rightChild] > h[leftChild] ? leftChild
                : rightChild;

        if (h[index] > h[smallestChild]) {
            swap(smallestChild, index);
            siftDown(smallestChild);
        }
    }

    /** Helper method for swapping h elements */
    private void swap(int a, int b) {
        int temp = h[a];
        h[a] = h[b];
        h[b] = temp;
    }

/** Returns the size of heap. */    
    public int size() {
        return n;
    }

} 
```

我如何设计一种方法来从中删除任何元素`MinHeap`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:52:24.280

如果您知道要删除的元素的索引，

```
private void removeAt(int where) {
    // This should never happen, you should ensure to call it only with valid indices
    if (n == 0) throw new IllegalArgumentException("Trying to delete from empty heap");
    if (where >= n) throw new IllegalArgumentException("Informative error message");

    // Now for the working cases
    if (where == n-1) {
        // removing the final leaf, trivial
        --n;
        return;
    }
    // other nodes
    // place last leaf into place where deletion occurs
    h[where] = h[n-1];
    // take note that we have now one element less
    --n;
    // the new node here can be smaller than the previous,
    // so it might be smaller than the parent, therefore sift up
    // if that is the case
    if (where > 0 && h[where] > h[(where-1)/2]) {
        siftUp(where);
    } else if (where < n/2) {
        // Now, if where has a child, the new value could be larger
        // than that of the child, therefore sift down
        siftDown(where);
    }
} 
```

删除指定值（如果存在）的公开函数将是

```
public void remove(int value) {
    for(int i = 0; i < n; ++i) {
        if (h[i] == value) {
            removeAt(i);
            // assumes that only one value should be removed,
            // even if duplicates are in the heap, otherwise
            // replace the break with --i to continue removing
            break;
        }
    }
} 
```

总而言之，我们可以通过将值替换为最后一个叶子的值来删除给定位置的节点（在删除不是微不足道的情况下），然后从删除位置向上或向下筛选。（根据与父母和/或孩子（如果存在）的比较，只需要进行一次筛选或不进行筛选。）

之所以有效，是因为树的删除位置上方和下方的部分满足堆不变式，因此如果交换放置在那里的新值小于父级，则向上筛选会将其放置在删除位置上方的适当位置. 所有被移动的元素都小于子元素中的任何元素，因此对于低于（包括）删除位置的部分保持堆不变量。如果新值大于直接子代之一，则基本上是从删除位置顶部的子堆中删除根，因此`siftDown`恢复堆不变量。

该`siftDown`方法中提到的缺陷的修复是设置`smallestChild`为`leftChild`if `rightChild >= n`：

```
final int smallestChild = (rightChild >= n || h[rightChild] > h[leftChild]) ? leftChild
            : rightChild; 
```

# php - 我怎样才能保护我的贝宝表格

> ID：12664124
> 
> 赞同：0
> 
> 时间：2012-09-30T19:04:35.663
> 
> 标签：php, ajax, api, paypal

我是 paypal API 的新手，我今天读到一篇文章说：坏人可以很简单地更改 paypal 表单中输入的值（如金额）。

因此，我没有将我的代码放在 html 标记中，而是决定通过 ajax 将其引入如下：

```
<div id="result"></div>

$.post({'action.php', {}, function(data)
{
   $('#result').html(data);

}, , 'html'); 
```

在我的页面 action.php 中，我输入了这个简单的代码：

```
<?php
     echo '<input type="hidden" name="amount" value="99">';
?> 
```

**我的问题是：在这种情况下，坏人会改变这个输入的值吗？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:06:04.567

是的，他们当然可以。

使用浏览器或 firebug 附带的 Web 开发人员工具，他们可以在 AJAX 调用*之前更改隐藏字段的值或 JavaScript 值。*

您正在添加一个非常薄的混淆层，任何具有 Web 开发经验的人都可以轻松通过。

# jquery - 如何检查是否已调用后退按钮事件？

> ID：12664126
> 
> 赞同：1
> 
> 时间：2012-09-30T19:05:27.833
> 
> 标签：jquery, browser-history, hashtag

我正在尝试使网站完全支持 ajax，但是我很难弄清楚如何支持历史。我正在使用[http://balupton.github.com/jquery-history/demo/](http://balupton.github.com/jquery-history/demo/)作为带有 jquery 的哈希更改库，如下所示：

```
$(document).on('click','a',function(){
    var url = $(this).attr('href');
    $.ajax({
        // AJAX Call and populate
    });
    $.History.go(url);
    return false;
});
$('input[type="submit"]').livequery('click',function(event){
    $(this).closest("form").ajaxForm(get_pages_load_options);
    var url = $(this).closest("form").attr('action');
    $.History.go(url);
});
$('.get_pages').livequery('change',function(){
    $(this).closest("form").ajaxForm(get_pages_load_options);
    var url = $(this).closest("form").attr('action');
    $.History.go(url);
}); 
```

我还使用以下 javascript 进行书签：

```
function hash_process() {
    url = window.location.hash.replace('#', '');
    $.ajax({
        //AJAX Call and Populate
    });
}
if (window.location.hash) {
    hash_process();
} 
```

但是，对于上述两个片段，我发现后退按钮不起作用，尤其是对于提交的表单。如果我添加以下代码，它只会为我提供没有任何提交信息的默认页面，就像我一开始从未提交过表单一样。

```
window.onhashchange = hash_process; 
```

有没有办法可以检查是否调用了后退按钮？任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:30:28.680

我找到了这个难题的答案。由于第二次调用是在我提交表单后引起的，因此我最终只是在混合中添加了一个附加变量，如下所示：

```
ignore_hash = false;
function hash_process() {
    if (ignore_hash == false) {
        url = window.location.hash.replace('#', '');
        $.ajax({
            // AJAX Call & Populate
        });
    } else {
        ignore_hash = false;
    }
} 
```

在检查之前启动的函数中，我将该变量添加到执行中：

```
$(document).on('click','a',function(){
    var url = $(this).attr('href');
    $.ajax({
        // AJAX Call & Populate
    });
    $.History.go(url);
    ignore_hash = true;
    return false;
}); 
```

# css - 是否可以提高 HTML 元素的不透明度？

> ID：12664132
> 
> 赞同：3
> 
> 时间：2012-09-30T19:06:08.937
> 
> 标签：css

我想要一个`<div>`元素（整个元素、内容和所有内容）向底部淡出。这是为了截断必须适合非常有限的空间（并且可以包含不可预测大小的元素）的新闻帖子。

我能找到的一切都是在背景颜色上使用透明渐变。除了新闻帖子后面是背景图像之外，这很好，所以我不能只在内容底部的顶部放置颜色渐变。

我会在内容顶部放置一个图像渐变，但随着用户滚动，背景会在内容后面移动。

所以想象一下这存在：

```
opacity: -webkit-linear-gradient( ... ); 
```

*使元素的实际不透明度*毕业是唯一可行的方法。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T19:22:28.740

## 2015 更新

浏览器世界已经使用掩码对这种能力进行了改进，然而，据我所知，目前还没有一个是跨浏览器完全标准化的（以一种很好的方式）。因此，无论您实施什么，它都会变得混乱。有关最近增强功能的更多信息，以下是一个很好的帖子：

[https://css-tricks.com/clipping-masking-css/](https://css-tricks.com/clipping-masking-css/)

Chrome 似乎在支持和速度方面胜出，Safari 紧随其后。遗憾的是 Firefox 不支持大部分链接到页面，除了依赖 SVG 的任何内容。幸运的是，SVG 示例显示出衰落，并且似乎可以在 Chrome、Safari 和 Firefox *（至少是最新版本）上*运行。

因此，也许目前最好的方法是实现一个 SVG 蒙版——基于一个应用了渐变的矩形——并使用`mask: url(#maskid);`. 然而，我倾向于发现这些解决方案会被 SVG`viewBox`和尺寸大小问题混淆——并且当不应用于“媒体”元素时会变得非常奇怪——所以现在暂不给出一个防水的例子。

## 基本原则

目前实现这一点的唯一方法是使用绝对位置将渐变渐变叠加到要渐变的元素“顶部”的背景颜色。因此，使用上面其他答案中的渐变，但将其应用于文本顶部的浮动元素。

当您有纯色背景颜色时，这会获得最佳效果，但它也适用于背景图像，只要背景固定在适当位置即可。

**css**

```
.container {
  position: relative;
  overflow: hidden;
  height: 50px; /* some fixed height that you need you content to fix to */
}

.fadeout {
  position: absolute;
  width: 100%;
  height: 1em;
  /* you can use a premade png fade out or a dynamic gradient here*/
  background: ...;
} 
```

**标记**

```
<div class="container">
  <p>
    This is my long text that goes on for paragraphs and paragraphs, 
    far longer than the container....
  </p>
  <div class="fadeout"></div>
</div> 
```

## 更新

在发现 Carson Myers 对这个问题的进一步评论后，我猜测以下可能可行。当我在上面提到背景必须固定时——我的意思是它必须以`background-attachment`. 因此，如果后台已经以这种方式实现，您可以使用以下“hack”来让事情正常工作。请记住，内容顶部的浮动绝对层可能会导致可用性问题。拥有许多透明层会降低旧浏览器的速度：

**jsfiddle**

[http://jsfiddle.net/kthPT/30](http://jsfiddle.net/kthPT/30)

下面的代码是一个示例，其外层设置为滚动其内容*（以表示外部页面或正文）*，并且内部“新闻”区域具有有限的高度并淡出其其余内容。两种用途都`background: url('...')`需要填写相同的背景图片路径。因为在我测试过的所有现代浏览器中，背景图像在两个位置都是“固定的”，所以它会将背景计算到相同的位置。所以顶部的浮动图层与下面的图层具有相同的图形。

结果标记有点~~可怕~~体积庞大，因此您可以在支持不透明度的浏览器上将其转换为由 javascript 生成 - 并且可能使用淡出的任何“高度”。当前版本仅支持 20px 的淡入淡出。

**css**

```
.outer {
    background: url('...') repeat fixed;
    height: 200px;
    overflow: auto;
}

.news {
    position: relative;
    width: 300px;
    height: 100px;
    overflow: hidden;
}

.news .fadeout {
    position: absolute;
    bottom: 0;
    width: 100%;
}

.news .fadeout .fadeline {
    height: 2px;
    background: url('...') repeat fixed;
}

/* a good idea to add vendor prefixed versions of opacity here */
.news .fadeout .o09 { opacity: 0.9; }
.news .fadeout .o08 { opacity: 0.8; }
.news .fadeout .o07 { opacity: 0.7; }
.news .fadeout .o06 { opacity: 0.6; }
.news .fadeout .o05 { opacity: 0.5; }
.news .fadeout .o04 { opacity: 0.4; }
.news .fadeout .o03 { opacity: 0.3; }
.news .fadeout .o02 { opacity: 0.2; }
.news .fadeout .o01 { opacity: 0.1; } 
```

**标记**

```
<div class="outer">
    <div class="news">
        <h4>News</h4>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut 
          suscipit dui ac lacus convallis dapibus. In cursus arcu at 
          arcu mollis vestibulum. Morbi ac quam sed nisl vulputate 
          aliquam in ac velit. Curabitur ac feugiat justo. Fusce 
          imperdiet, arcu non dignissim vulputate, leo odio ultricies 
          mauris, in consectetur risus odio malesuada sapien. 
          Nam sagittis convallis dictum. Duis eget lectus
        </p>
        <div class="fadeout">
            <div class="fadeline o01"></div>
            <div class="fadeline o02"></div>
            <div class="fadeline o03"></div>
            <div class="fadeline o04"></div>
            <div class="fadeline o05"></div>
            <div class="fadeline o06"></div>
            <div class="fadeline o07"></div>
            <div class="fadeline o08"></div>
            <div class="fadeline o09"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
        </div>
    </div>
    <div class="news">
        <h4>News</h4>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut 
          suscipit dui ac lacus convallis dapibus. In cursus arcu at 
          arcu mollis vestibulum. Morbi ac quam sed nisl vulputate 
          aliquam in ac velit. Curabitur ac feugiat justo. Fusce 
          imperdiet, arcu non dignissim vulputate, leo odio ultricies 
          mauris, in consectetur risus odio malesuada sapien. 
          Nam sagittis convallis dictum. Duis eget lectus
        </p>
        <div class="fadeout">
            <div class="fadeline o01"></div>
            <div class="fadeline o02"></div>
            <div class="fadeline o03"></div>
            <div class="fadeline o04"></div>
            <div class="fadeline o05"></div>
            <div class="fadeline o06"></div>
            <div class="fadeline o07"></div>
            <div class="fadeline o08"></div>
            <div class="fadeline o09"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
        </div>
    </div>
    <div class="news">
        <h4>News</h4>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut 
          suscipit dui ac lacus convallis dapibus. In cursus arcu at 
          arcu mollis vestibulum. Morbi ac quam sed nisl vulputate 
          aliquam in ac velit. Curabitur ac feugiat justo. Fusce 
          imperdiet, arcu non dignissim vulputate, leo odio ultricies 
          mauris, in consectetur risus odio malesuada sapien. 
          Nam sagittis convallis dictum. Duis eget lectus
        </p>
        <div class="fadeout">
            <div class="fadeline o01"></div>
            <div class="fadeline o02"></div>
            <div class="fadeline o03"></div>
            <div class="fadeline o04"></div>
            <div class="fadeline o05"></div>
            <div class="fadeline o06"></div>
            <div class="fadeline o07"></div>
            <div class="fadeline o08"></div>
            <div class="fadeline o09"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
            <div class="fadeline o10"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:08:55.643

试试这个方便的工具，它会为你生成 alpha 颜色，你基本上是在尝试使用 rgba 值，但当然要知道这只会被较新的浏览器支持......

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这是它为黑色到 100% alpha 渐变提出的方法：`background: url(IMAGE_URL) linear-gradient(to bottom, rgba(0,0,0,1) 0%,rgba(255,255,255,0) 100%);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T15:06:10.107

如果您对此使用 JavaScript 没问题，那么您可以使用`canvas`元素来完成

# [*演示：在动画背景下淡化文本*](http://codepen.io/thebabydino/pen/lgtvE)

这个想法是你的元素与文本和`canvas`元素是一个在另一个之上。您将文本保留在元素中（以便允许文本选择，这对于文本来说是不可能的`canvas`），但使其完全透明（使用`rgba(0,0,0,0)`, 以使文本在 IE8 和更早版本中可见 - 那是因为您没有`RGBa`支持并且不`canvas`支持 IE8 及更早版本）。

然后，您读取元素内的文本并使用相同的字体属性将其写在画布上，这样您在画布上写的每个字母都会覆盖元素中带有文本的相应字母。

该`canvas`元素不支持多行文本，因此您必须将文本分解为单词，然后继续在测试行上添加单词，然后进行测量。如果测试线的宽度大于一条线的最大允许宽度（通过读取计算出的带有文本的元素的宽度来获得最大允许宽度），那么你将它写在画布上而不用添加最后一个单词，您将测试行重置为最后一个单词，并将写入下一行的 y 坐标增加一个行高（您也可以从元素与文本的计算样式中获得）。对于您编写的每一行，您还可以通过适当的步骤降低文本的不透明度（此步骤与每行的平均字符数成反比）。

在这种情况下，你不能轻易做的是证明文本的合理性。它可以完成，但它变得有点复杂，这意味着您必须计算每个步骤的宽度并逐字而不是逐行编写文本。

另外，请记住，如果您的文本容器在调整窗口大小时改变了宽度，那么您必须在每次调整大小时清除画布并在其上重新绘制文本。

好的，代码：

**HTML**：

```
<article>
  <h1>Interacting Spiral Galaxies NGC 2207/ IC 2163</h1>
  <em class='timestamp'>February 4, 2004 09:00 AM</em>
  <section class='article-content' id='art-cntnt'>
    <canvas id='c' class='c'></canvas>In the direction of the <!--and so on-->  
  </section>
</article> 
```

**CSS**：

```
html {
  background: url(moving.jpg) 0 0;
  background-size: 200%;
  font: 100%/1.3 Verdana, sans-serif;
  animation: ani 4s infinite linear;
}
article {
  width: 50em; /* tweak this ;) */
  padding: .5em;
  margin: 0 auto;
}
.article-content {
  position: relative;
  color: rgba(0,0,0,0);
  /* add slash at the end to check they superimpose *
  color: rgba(255,0,0,.5);/**/
}
.c {
  position: absolute;
  z-index: -1;
  top: 0; left: 0;
}
@keyframes ani { to { background-position: 100% 0; } } 
```

JavaScript：

```
var wrapText = function(ctxt, s, x, y, maxWidth, lineHeight) {
  var words = s.split(' '), line = '', 
      testLine, metrics, testWidth, alpha = 1, 
      step = .8*maxWidth/ctxt.measureText(s).width;

  for(var n = 0; n < words.length; n++) {
    testLine = line + words[n] + ' ';
    metrics = ctxt.measureText(testLine);
    testWidth = metrics.width;
    if(testWidth > maxWidth) {
      ctxt.fillStyle = 'rgba(0,0,0,'+alpha+')';
      alpha  -= step;
      ctxt.fillText(line, x, y);
      line = words[n] + ' ';
      y += lineHeight;
    }
    else line = testLine;
  }
  ctxt.fillStyle = 'rgba(0,0,0,'+alpha+')';
  alpha  -= step;
  ctxt.fillText(line, x, y);
  return y + lineHeight;
}

window.onload = function() {
  var c = document.getElementById('c'), 
      ac = document.getElementById('art-cntnt'), 
      /* use currentStyle for IE9 */
      styles = window.getComputedStyle(ac),
      ctxt = c.getContext('2d'), 
      w = parseInt(styles.width.split('px')[0], 10),
      h = parseInt(styles.height.split('px')[0], 10),
      maxWidth = w, 
      lineHeight = parseInt(styles.lineHeight.split('px')[0], 10), 
      x = 0, 
      y = parseInt(styles.fontSize.split('px')[0], 10), 
      text = ac.innerHTML.split('</canvas>')[1];

  c.width = w;
  c.height = h;
  ctxt.font = '1em Verdana, sans-serif';
  wrapText(ctxt, text, x, y, maxWidth, lineHeight);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T09:22:35.730

这是可能的，无需指定容器的高度。

检查这个[**工作演示**](http://jsfiddle.net/gionaf/m5A83/)，并尝试添加/删除内容`#contents`

HTML

```
<div id="container">
    <div id="contents">
        Some contents goes here
    </div>
    <div id="gradient">
    </div>
</div> 
```

CSS

```
#container {
    position:relative;
}
#contents {
    background:red;
}
#gradient {
    position:absolute;
    z-index:2;
    right:0; bottom:0; left:0;
    height:200px; /* adjust it to your needs */
    background: url(data:image/svg+xml;base64,alotofcodehere);
    background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 70%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(70%,rgba(255,255,255,1)));
    background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
    background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 70%);
}​ 
```

这几乎适用于任何支持不透明度的浏览器（包括 IE9），这是 IE8“rgba”后备（未经测试）：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 ); 
```

要生成您自己的渐变，请访问[Colorzilla](http://www.colorzilla.com/gradient-editor/)。

第一个站点 (0%) 的不透明度必须为 0 ( `rgba(255,255,255,0);`)，然后是 70% 左右 - 做一些测试以找到对您有好处的 - 添加另一个不透明度为 1 ( `rgba(255,255,255,1);`) 的站点。

您必须知道页面/容器的背景才能使其明显工作......

​</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-20T12:05:55.383

目前没有优雅的单行 CSS 解决方案可以让您在所有浏览器中执行此操作。您可以使用非标准`-webkit-mask-image`属性 ( [demo](http://codepen.io/thdoan/pen/wKZBrN) ) 或 SVG 掩码 ( [demo](http://codepen.io/thdoan/pen/rObVdJ) )。迄今为止我见过的最完整的跨浏览器解决方案来自 Christian Schaefer 的教程“ [CSS Masks – How To Use Masking In CSS Now](http://web.archive.org/web/20160505054016/http://thenittygritty.co/css-masking) ”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T02:25:49.190

这是你想要的？

看看我的[jsfiddle](http://jsfiddle.net/UH7HJ/)。

我不确定您想要什么，因为您的描述不令人满意。你能对问题是什么做出一个jsfiddle吗？

# python - 使用 NumPy 将 2D 数组的一个子部分中的所有值设置为另一个值

> ID：12664145
> 
> 赞同：1
> 
> 时间：2012-09-30T19:07:22.013
> 
> 标签：python, numpy

我有一个二维值网格。例如，它们可能看起来像这样：

```
0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 1 1 1 1 1 1 0 
0 1 1 1 1 1 1 1 1 1 0 
0 1 0 0 0 1 1 0 0 1 0
0 1 0 0 0 1 1 0 0 1 0
0 1 0 0 0 1 1 0 0 1 0
0 1 0 0 0 1 1 0 0 1 0
0 1 1 1 1 1 1 1 1 1 0
0 1 1 1 1 1 1 1 1 1 0 
0 0 0 0 0 0 0 0 0 0 0 
```

我想做的是将 1 中包含的所有 0 设置为不同的值。

本质上，我想要做的是在行或列中获取 1 的第一个实例和 1 的最后一个实例，然后在此边界内的任何 0 我想设置为另一个值。

我可以通过获取第一个和最后一个实例来强制它，然后手动设置它，但是有没有一种更有效的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:17:18.387

`skimage`如果你做更多的图像工作，通常可能会有更多的算法。很好地解决了这个问题`scipy.ndimage.binary_fill_holes`。

# svg - 如何在 Inkscape 中强制将字形转换为嵌入的矢量路径

> ID：12664153
> 
> 赞同：4
> 
> 时间：2012-09-30T19:07:53.477
> 
> 标签：svg, vector-graphics, inkscape, glyph, svg-font

我用 Inkscape 创建了一个 SVG 文档。它包含非标准字体的文本。`svg`xml 引用字体。因此，向量依赖于用户机器上可用的字体（或在 Web 场景中使用 Web 字体）。我想删除这种依赖。我知道如何手动操作，但这会很耗时。

**Inkscape 是否提供了一种将所需字形包含为纯向量而不是引用字体的方法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T11:44:40.053

`object to path`您可以通过选择它们并使用函数 ( `Path`-> `Object to Path`)将所有字形转换为矢量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:47:59.807

选择要转换为路径的文本，然后选择“路径 > 对象到路径”。

如果字体许可证允许，您也可以将其用作网络字体，方法是在 svg 文件中添加一些 css，请参阅[此示例](http://xn--dahlstrm-t4a.net/svg/fonts/webfonts_in_svg.svg)。Inkscape 不支持 webfonts AFAIK，但对于编辑，我想如果您的系统上安装了相同的字体，它可能仍然有效。

# xml - 如何将相同的属性多次添加到 XML 中的元素标记

> ID：12664154
> 
> 赞同：9
> 
> 时间：2012-09-30T19:07:56.397
> 
> 标签：xml, xsd, schema

在我正在编写的 XML 模式 (XSD) 中，我需要定义一个可以在其父元素内多次出现的属性。

举个例子来说明一下：父元素表示事件，它支持不同的属性，例如标题和发生日期。被称为的属性之一`department`是组织部门。一个活动可能由一个或多个部门组织。

我想知道 XSD 是否可以处理元素中同一属性的多个实例，或者这是否超出了 XML 标准的范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T19:09:47.300

你不能。每个元素的属性名称都是唯一的。

如果您需要在同一名称下拥有多个数据位，那么通常的解决方案是空格分隔列表或子元素。

```
<event department="foo bar baz" /> 
```

或者

```
<event>
    <department>foo</department>
    <department>bar</department>
    <department>baz</department>
</event> 
```

# node.js - 如何在没有框架的情况下处理 node.js 中的会话

> ID：12664155
> 
> 赞同：6
> 
> 时间：2012-09-30T19:08:15.113
> 
> 标签：node.js, session, socket.io, session-variables

我正在开发一个 SPA（单页网络应用程序）；这个想法是轻量级的，不使用太多的框架和抽象之类的东西，所以我为静态+动态文件创建了 HTTP 服务器，它运行良好。现在我已经在 web 应用程序中实现了 socket.io，但我想知道您认为什么是处理会话的好方法（请记住，socket io 必须能够识别调用函数并知道它必须向谁推送数据）。希望我已经足够清楚了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:17:55.210

Socket.io 内置了用于通过 和 为给定套接字保存服务器端会话数据`socket.get`的`socket.set`方法`socket.del`。默认情况下，它保存此数据的位置是内存存储，但您可以使用 redis 等。请记住，当套接字断开连接时，该数据不会在重新连接时持续存在，因此您需要将客户端识别数据与您的套接字设置事件或身份验证期间。

这样就可以留下您的客户端数据，这些数据可以通过 localStorage、sessionStorage 或普通的老式香草 cookie 等进行持久化。

# coffeescript - 咖啡脚本中的数学计算中断

> ID：12664166
> 
> 赞同：1
> 
> 时间：2012-09-30T19:09:35.783
> 
> 标签：coffeescript

我有一个用 coffeescript 编写的长等式，它在编译为 JavaScript 时会产生一个函数调用：

**咖啡脚本：**

```
@u[idx] = @max(0, currU + t * ((@dU * ((@uu[right] + @uu[left] + @uu[bottom] + @uu[top]) -4 * currU) - d2) + currF * (1.0 - currU))) 
```

**JavaScript：**

```
this.max(0, currU + t * ((this.dU * ((this.uu[right] + this.uu[left] + this.uu[bottom] + this.uu[top])(-4 * currU)) - d2) + currF * (1.0 - currU))); 
```

问题是这部分：

```
((@uu[right] + @uu[left] + @uu[bottom] + @uu[top]) -4 * currU) 
```

这变成了一个函数调用：

```
((this.uu[right] + this.uu[left] + this.uu[bottom] + this.uu[top])(-4 * currU)) 
```

有人可以解释这里发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T19:16:27.007

你要这个：

```
@u[idx] = @max(0, currU + t * ((@dU * ((@uu[right] + @uu[left] + @uu[bottom] + @uu[top]) - 4 * currU) - d2) + currF * (1.0 - currU))) 
```

编译为：

```
this.u[idx] = this.max(0, currU + t * ((this.dU * ((this.uu[right] + this.uu[left] + this.uu[bottom] + this.uu[top]) - 4 * currU) - d2) + currF * (1.0 - currU))); 
```

愚蠢的小问题是`-4`, 与`- 4`.

如果没有空格，编译器会假定 是*'function'*`-4 * currU`的参数，.*`(@uu[right] + @uu[left] + @uu[bottom] + @uu[top])`*

# javascript - 突出显示下拉菜单

> ID：12664167
> 
> 赞同：0
> 
> 时间：2012-09-30T19:09:35.770
> 
> 标签：javascript, html, drop-down-menu, highlight

好的，基本上我不知道我在用 HTML 和 CSS 做什么。

在我的博客上：http: [//oligclimbing.blogspot.co.uk/](http://oligclimbing.blogspot.co.uk/)我在顶部添加了一个栏，链接到博客上的不同页面，为此我从教程中复制了一段代码。

这是代码：

```
<!--[if lte IE 7]>
<script type="text/javascript" src="http://pixopoint.com/wp-content/plugins/pixopoint-menu/scripts/suckerfish_ie.js"></script>
<![endif]-->
<ul id="suckerfishnav" class="sf-menu">
  <li><a href="http://oligclimbing.blogspot.co.uk/">Home</a></li>
  <li><a href="http://oligclimbing.blogspot.co.uk/p/photos_8.html">Photos</a>
  <li><a
 href="http://oligclimbing.blogspot.co.uk/p/videos.html">Videos
<li><a
 href="http://oligclimbing.blogspot.co.uk/p/about-me.html">BIO
    <ul></ul></a
></li></a
></li></li></ul> 
```

当有人将鼠标悬停在其中一个框上时，我如何突出显示这一事实，例如背景变为稍深的灰色？我会写什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:52:21.533

你只是在追求一些这样的 CSS 吗？

```
#suckerfishnav li:hover { background-color: #eeeeee; } 
```

# mysql - csv文件中编码不同于utf-8的数据以什么编码写入mysql？

> ID：12664168
> 
> 赞同：1
> 
> 时间：2012-09-30T19:09:40.150
> 
> 标签：mysql, ruby-on-rails-3, encoding, character-encoding

我上传了 csv 文件，该文件可以使用 UTF-8 编码或其他类似 KOI8-R 的编码。我的问题是当我说：

```
 File.new  @path, "r:#{encoding}"                 
  result = CSV.read(@uploaded_file,  { :headers => true,:encoding => encoding }) 
```

编码是 KOI8-R，我将结果写入 mysql Rails 3 会自动将值从 KOI8-R 转换为 UTF-8 吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:25:46.657

我认为不是 Rails 转换编码，而是您的数据库。我的建议是检查编码的数据库设置。

# android - 一些元素的旋转

> ID：12664174
> 
> 赞同：2
> 
> 时间：2012-09-30T19:10:40.543
> 
> 标签：android, android-layout, android-ui, android-orientation

我正在尝试做在默认 Android 2.3 相机应用程序中已经完成的事情 - 更改设备方向时仅对某些元素（如按钮）进行旋转。例如，当我将手机切换到横向时，我不需要更改整个布局 - 我只需要旋转一些 UI 元素。不知道 Android 4 中的相机应用程序，但在 Android 2.2 中它看起来和我想要的一样。可能吗？

（抱歉英语不好，伙计们）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T22:45:43.317

这是一个老问题，但我只是偶然发现了它。如果有人发现这一点并感到困惑，有两个简单的解决方案。您的元素支持“旋转”属性，该属性可以为它完成大部分艰苦的工作（只需设置一个角度），但要注意这似乎会改变画布尺寸并且可能会给您留下空白填充。还有一个[Rotate Drawable](http://developer.android.com/reference/android/graphics/drawable/RotateDrawable.html)可以帮助您旋转其他可绘制对象。

# ruby - 我如何知道一个方法传递给一个块的参数数量？

> ID：12664177
> 
> 赞同：1
> 
> 时间：2012-09-30T19:10:51.497
> 
> 标签：ruby, ruby-1.9

如果我有两个变量，例如`a`和`h`。

```
a = [“猫”、“狗”、“垫子”]
h = {cat: 'gatto', dog: 'cane', mat: 'stuoia'} #（意大利语翻译）

```

我`.each`在它们上调用方法，如果我不知道它们指向的对象类型，我怎么知道传递给的块`a.each`可以带**一个**参数，而传递给的块`b.each`可以带**两个**？

换句话说，当我将一个块传递给一个方法时，我如何知道该方法将设置多少个块参数？

是否有`some_method`返回块应采用的参数数量？那么这会返回传递给它的块`obj.general_method_that_takes_a_block.some_method`的参数数量吗？`general_method_that_takes_a_block`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:31:36.893

一个直接的方法是：

```
a.each{|e| p [*e].length}
# => 1 1 1
h.each{|e| p [*e].length}
# => 2 2 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:38:40.950

`each`块总是得到一个参数，它永远不会得到两个。在哈希的情况下，当你这样做时：

```
h.each { |k, v| ... } 
```

Ruby 或多或少地在你背后这样做：

```
h.each { |a| k, v = a; ... } 
```

所以你可以检查块的参数是否是一个数组：

```
e.each do |x|
    if x.kind_of? Array
        # e might be a Hash
    else
        # e might be an Array
    end
end 
```

问题是`e`可能`[ [1,2], [3,4] ]`会错误地将您放入*可能是哈希*分支的东西；这种`e`也会骗过`[*e].length`支票。

我认为没有任何干净简单的方法可以知道您从块内部迭代的内容。

# javascript - $.cookie 给出错误

> ID：12664178
> 
> 赞同：0
> 
> 时间：2012-09-30T19:10:53.870
> 
> 标签：javascript, jquery, cookies

我有这个消息：

> TypeError：对象函数（a，b）{return new p.fn.init（a，b，h）}没有方法'cookie'

在我使用了这段代码之后：

```
$.cookie('login', returnedData.login); 
$.cookie('password',returnedData.password);  
alert($.cookie('login')); 
```

我已经包含了 jQuery，它的所有功能都可以正常工作。

请对此有所帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:15:19.403

`$.cookie`不是 jQuery 库的一部分。在您的页面上包含[jquery-cookie ，一切都必须正常工作。](https://github.com/carhartl/jquery-cookie)

# javascript - jQuery var 等于它所关注的输入框的值

> ID：12664179
> 
> 赞同：0
> 
> 时间：2012-09-30T19:11:00.443
> 
> 标签：javascript, jquery, html

我正在构建一个包含 3 个输入 [文本] 的动态小长度转换器。像这样

```
<input type='text' class='bx' id='cm'> Centimeter<br>
<input type='text' class='bx' id='m'> Meter<br>
<input type='text' class='bx' id='km'> Kilometer<br> 
```

效果如下：如果您单击“米”，则该值变为“”，如果您键入一个值，则“厘米”和“公里”值将等于一个值（...）。

[例子](http://calculator.com/calcs/conv.html)

jquery 是这样的：

```
$(function() {

var selected = ????;

// do i need something here to empty the input it is focused on?

$("#cm").val(selected * 545);
$("#km").val(selected * 545);
$("#m").val(selected * 453);

}) 
```

我希望选择的 var 等于它所关注的文本输入的值。

我怎样才能做到这一点？

**示例中的计算提供了丰富的信息。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:17:25.133

您可以使用 jQuery 焦点来获取选定的输入字段。

```
 $(function() {
         $("input.bx").focus({
          var selected  =parseInt(this.value, 10);
              this.value = ''; //this line will remove text from selected input.
              $("#cm").val(selected * 545);
              $("#km").val(selected * 545);
             $("#m").val(selected * 453);
         });
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:13:17.457

```
var selected = $(this).val(); 
```

// // 您编写的代码只会在您的页面第一次加载时起作用。如果您希望它在每次点击时都能正常工作，您需要处理输入的焦点事件。

```
 $('#cm , #km , #m').on('focus', function() {
        var selected = parseInt($(this).val() , 10) ; // Will convert to a Int

        $("#cm").val(selected * 545);
        $("#km").val(selected * 545);
        $("#m").val(selected * 453);

    }); 
```

但我认为**模糊事件在这里比****焦点**事件更有意义..

[小提琴](http://jsfiddle.net/sushanth009/CAxBr/1/)

这将指向所选输入的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:16:10.733

您必须实现一个侦听焦点事件的侦听器。

看一下这个：

[http://api.jquery.com/focus/](http://api.jquery.com/focus/)

```
$('.bx').focus(function() {
    var id = $(this).attr("id");
    if (id === "cm") {
        alert('Handler for .focus() called cm');
    }
    else if (id === "m") {
        alert('Handler for .focus() called m');
    }
    else if (id === "km") {
        alert('Handler for .focus() called km');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T19:17:32.293

您需要一个事件处理程序，在这种情况下用于[`focus`事件](http://api.jquery.com/focus/)：

```
$(function() {
     $(".bx").focus(function(e) {
         var selectedval = this.value,
             selectedtype = this.id;
         …
     });
}); 
```

# url-rewriting - 使用 Flask+Nginx 提供基于动态 URL 的静态文件？

> ID：12664180
> 
> 赞同：4
> 
> 时间：2012-09-30T19:11:02.350
> 
> 标签：url-rewriting, nginx, rewrite, flask

在 Flask 中，如果您将文件放在名为 的目录中`static/`，则表单的任何 URL`http://localhost/static/foo.jpg`都将从`static/foo.jpg`.

这也可以通过 nginx 配置来完成：

```
 location /static {
        alias    /var/www/mywebsite/static;
    } 
```

但是，我想做动态 URL 重写。

如果有人请求 URL `http://localhost/username/foo.jpg`，我想告诉 nginx 从任意 URL 获取静态文件，例如`/var/www/assets/11235/1bcd5.jpg`. 我希望用户看到一个漂亮的 url，并且我希望该位置对用户是透明的。

是否有捷径可寻？理想情况下，我可以做一些事情让 nginx 为文件提供服务。但是，如果 Flask 需要为它服务，那也没关系（我的项目还没有用户！）

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:15:10.300

如果文件可以使用“漂亮” URL 中直接引用的名称存储，那么您可以在 nginx 中进行简单的重写。

但是，您似乎希望将 URL 路径信息映射到磁盘上的其他表示形式，如`username -> 11235`和`foo.jpg -> 1bcd5.jpg`. 如果所提供的内容应该受到身份验证或会话的保护，那么您可能应该将映射和重写保留在您的 Flask 应用程序中，因为 Flask 提供了这样做的方法。

如果内容可以被视为公共内容并且只需要完成映射，则可以将 nginx 配置为获取查询字符串参数，在数据存储中查找它们，并重写 URL。

### 下面是一个[来自 agentzh 的示例，](http://forum.nginx.org/read.php?2,122977,123014#msg-123014)它最初发布在 nginx 邮件列表中：

考虑你的 seo uri 是 /baz，真正的 uri 是 /foo/bar。我在我的本地 mysql“测试”数据库中有下表：

```
create table my_url_map(id serial, url text, seo_url);
insert into my_url_map(url, seo_url)values('/foo/bar', '/baz'); 
```

我以这种方式构建我的 nginx 0.8.41：

```
./configure \
--add-module=/path/to/ngx_devel_kit \
--add-module=/path/to/set-misc-nginx-module \
--add-module=/path/to/ngx_http_auth_request_module-0.2 \
--add-module=/path/to/echo-nginx-module \
--add-module=/path/to/lua-nginx-module \
--add-module=/path/to/drizzle-nginx-module \
--add-module=/path/to/rds-json-nginx-module 
```

另外，我的系统中安装了 lua 5.1.4 和 lua-yajl 库。

这是我的 nginx.conf 的核心部分：

```
upstream backend {
    drizzle_server 127.0.0.1:3306 dbname=test
    password=some_pass user=monty protocol=mysql;
    drizzle_keepalive max=300 mode=single overflow=ignore;
}

lua_package_cpath '/path/to/your/lua/yajl/library/?.so';

server {
    ...

    location /conv-mysql {
        internal;
        set_quote_sql_str $seo_uri $query_string; # to prevent sql injection
        drizzle_query "select url from my_url_map where seo_url=$seo_uri";
        drizzle_pass backend;
        rds_json on;
    }

    location /conv-uid {
        internal;
        content_by_lua_file 'html/foo.lua';
    }

    location /jump {
        internal;
        rewrite ^ $query_string? redirect;
    }

    # your SEO uri
    location /baz {
        set $my_uri $uri;
        auth_request /conv-uid;

        echo_exec /jump $my_uri;
    }
} 
```

foo.lua 的内容，必不可少的粘合剂：

```
local yajl = require('yajl')
local seo_uri = ngx.var.my_uri
local res = ngx.location.capture('/conv-mysql?' .. seo_uri)
if (res.status ~= ngx.HTTP_OK) then
ngx.throw_error(res.status)
end
res = yajl.to_value(res.body)
if (not res or not res[1] or not res[1].url) then
ngx.throw_error(ngx.HTTP_INTERNAL_SERVER_ERROR)
end
ngx.var.my_uri = res[1].url; 
```

然后让我们从客户端访问/baz：

```
$ curl -i localhost:1984/baz
HTTP/1.1 302 Moved Temporarily
Server: nginx/0.8.41 (without pool)
Date: Tue, 24 Aug 2010 03:28:42 GMT
Content-Type: text/html
Content-Length: 176
Location: http://localhost:1984/foo/bar
Connection: keep-alive

<html>
<head><title>302 Found</title></head>
<body bgcolor="white">
<center><h1>302 Found</h1></center>
<hr><center>nginx/0.8.41 (without pool)</center>
</body>
</html> 
```

# python - python的控制台应用程序gui

> ID：12664184
> 
> 赞同：3
> 
> 时间：2012-09-30T19:11:30.960
> 
> 标签：python, user-interface, console-application

我们在 C# 中有控制台应用程序选项，但是如何在 python 中制作控制台 GUI？我应该注意我想在 Windows 中编译和使用我的程序。我还想通过 Enter 按钮在 Python GUI 中选择项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-15T23:29:48.867

如果您使用的是 Windows，您最终需要与[win32 控制台 API](https://msdn.microsoft.com/en-us/library/windows/desktop/ms681913(v=vs.85).aspx)集成以创建控制台 GUI（也称为文本 UI 或 TUI）。您的选择基本上是：

1.  使用[curses](https://docs.python.org/3/howto/curses.html)或位于其之上的包（如 urwid 或 npyscreen）编写您的 TUI。为此，您需要安装 cygwin 或 PDcurses 以使其工作。
2.  使用 pywin32 之类的东西直接写入 win32 API。
3.  使用简化 win32 API 的包，如 effbot 的控制台包。

我发现上述所有内容都不令人满意，因为我不想为 Windows 安装 3rd 方二进制文件的所有麻烦，并且想要一个我可以在任何地方使用的 API（在简单`pip`安装之后），所以我编写了一个跨平台包（[asciimatics](https://github.com/peterbrittain/asciimatics)）修理它。这个包消除了所有的麻烦，并提供了一个干净的、文档化的 API，[其中包含一组](http://asciimatics.readthedocs.io/en/stable/widgets.html)用于 TUI 应用程序的小部件。

例如，以下是上一个文档链接中引用的联系人列表示例代码的屏幕截图，显示了一些基本的文本和按钮小部件。

[![示例截图](../Images/4e7adaf9aa7961b71e8389e731aed484.png)](https://i.stack.imgur.com/McL4M.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:32:50.483

看一下 Python 的 curses 库：

*   [http://docs.python.org/howto/curses.html](http://docs.python.org/howto/curses.html)
*   [http://www.dev-explorer.com/articles/python-with-curses](http://www.dev-explorer.com/articles/python-with-curses)
*   [http://docs.python.org/library/curses.html](http://docs.python.org/library/curses.html)

如果你想要一个 Python shell，那么你可能想看看 PyFlakes / PyShell 或类似的东西。

# android - 带或不带图像的 Android ListView

> ID：12664188
> 
> 赞同：-1
> 
> 时间：2012-09-30T19:11:52.930
> 
> 标签：android, eclipse

我正在尝试创建一个 listView，其中 JSON 数据被拉入 SimpleAdapter，但我能弄清楚的是如何隐藏 Rank 图像，如果它返回 null。

```
 private class LoadDataTask extends AsyncTask<Void, Void, String[]> {
    ProgressDialog Dialog = new ProgressDialog(Post.this);
    @Override
     protected void onPreExecute() {
         super.onPreExecute();  
         mylist.clear();
        Dialog.setMessage("Loading Posts...");
        Dialog.setCancelable(true);
        Dialog.show();
     }
    @Override
    protected String[] doInBackground(Void... params) {
        preferences = PreferenceManager.getDefaultSharedPreferences(Post.this);
        String userID = preferences.getString("userID", "n/a");
        String TID =  Post.this.getIntent().getExtras().getString("id");
        try{
            JSONObject json = JSONfunctions.getJSONfromURL(Constants.BASE_URL+"/posts.php?user="+userID+"&postID="+TID);
            JSONArray  users = json.getJSONArray("users");
            for(int i=0;i<users.length();i++){
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = earthquakes.getJSONObject(i);
            map.put("pid",  e.getString("poster_id"));
            map.put("id",  e.getString("post_id"));
                map.put("Forum", e.getString("forum_id"));
                map.put("Topic", e.getString("topic_id"));
                map.put("Name", e.getString("poster_name"));
                map.put("Text", string);
                map.put("IP", e.getString("poster_ip"));
                map.put("Status", e.getString("poster_status"));
                map.put("Rank", e.getString("prank"));
                map.put("Time", e.getString("poster_time"));
                map.put("active", e.getString("active"));
                map.put("posterisimage", e.getString("posterisimage"));
                map.put("posterimage", e.getString("posterimage"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return null;
    }

    @Override
    protected void onPostExecute(String[] result) {
    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
            new String[] { "Time", "Text", "Name" ,"Rank"}, <==Hide Rank if returned null ???
            new int[] { R.id.item_date, R.id.item_subtitle , R.id.item_title, R.id.item_image});
    ((SimpleAdapter) adapter).notifyDataSetChanged(); 
    setListAdapter(adapter);
        Dialog.dismiss();
        super.onPostExecute(result);
    }
} 
```

有人可以向我展示或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:40:33.430

您可以从 SimpleAdapter 编写自己的 ViewBinder：

```
adapter.setViewBinder(new SimpleAdapter.ViewBinder() {
    @Override
    public boolean setViewValue(View view, Object data, String textRepresentation) {
        if(view.getId() != R.id.item_image)
            return false;

        if(data == null) {
            view.setVisibility(View.GONE);
            return true;
        }

        view.setVisibility(View.VISIBLE);
        return false;
    }

}); 
```

这个 ViewBinder 非常原始。我建议将其自定义为您的特定布局。

# javascript - javascript鼠标坐标与画布和css

> ID：12664189
> 
> 赞同：2
> 
> 时间：2012-09-30T19:11:53.760
> 
> 标签：javascript, html, css, canvas

好吧，现在我正在尝试学习如何在 html 上使用 canvas 标签，并且当我将 css 应用于文档时，我无法处理鼠标事件。

当我移动包含画布的 div 并将其在页面上居中时，问题就开始了，画布的第一个位置不会是 0，因为它居中并且由于某种原因 0,0 将是屏幕的开头而不是开头画布，我觉得很奇怪，因为我直接将事件侦听器添加到画布。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>test</title>

<style type="text/css">
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background: #42413C;
    margin: 0;
    padding: 0;
    color: #000;
}
#divId {
    width: 800px;
    height: 600px;
    text-align:center;
    margin: 20px auto;
    background-color:#0099FF;
}
</style>

<script>
window.onload = function () {

    var canvas = document.getElementById('canvasId');   
    var c = canvas.getContext('2d');
    alert("lol");
    canvas.addEventListener('mousedown', hmd, false);

    function hmd(e) {
        alert ("x: " + e.clientX + "     y: " + e.clientY); 
    }

}
</script>
</head>

<body>

<div id="divId">

<canvas height="300" width="800" id="canvasId" />

</div>

</body>
</html> 
```

所以我在某处读到问题是由 div 引起的，但是当我尝试将 css 直接提供给画布标签时它不起作用，所以基本上我需要做的是让画布居中或放置在屏幕上的任何位置，但其第一个像素为 0,0。添加解决方案会很困难，因为它会自动居中，所以我需要知道用户分辨率才能计算偏移量，所以我正在寻找一种简单地使用 css 或其他东西来完成它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:13:58.580

要获得相对于 的坐标`canvas`，请执行以下操作：

```
function hmd(e) {
    var rx = e.pageX, ry = e.pageY;
    rx -= canvas.offsetLeft;
    ry -= canvas.offsetTop;
    alert ("x: " + rx + "     y: " + ry); 
} 
```

这假设您的`canvas`变量定义是全局的。

**编辑：**另一种方法：

```
function hmd(e) {
    var rx, ry;
    if(e.offsetX) {
        rx = e.offsetX;
        ry = e.offsetY;
    }
    else if(e.layerX) {
        rx = e.layerX;
        ry = e.layerY;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:25:22.740

这是我在最近的实验中一直使用的。它适用于几乎所有东西：边框、填充、位置：偏移 HTML 元素的固定元素等。它也适用于所有触摸设备，即使浏览器被缩放。

[http://jsfiddle.net/simonsarris/te8GQ/5/](http://jsfiddle.net/simonsarris/te8GQ/5/)

```
var stylePaddingLeft = parseInt(document.defaultView.getComputedStyle(can, undefined)['paddingLeft'], 10) || 0;
var stylePaddingTop = parseInt(document.defaultView.getComputedStyle(can, undefined)['paddingTop'], 10) || 0;
var styleBorderLeft = parseInt(document.defaultView.getComputedStyle(can, undefined)['borderLeftWidth'], 10) || 0;
var styleBorderTop = parseInt(document.defaultView.getComputedStyle(can, undefined)['borderTopWidth'], 10) || 0;
var html = document.body.parentNode;
var htmlTop = html.offsetTop;
var htmlLeft = html.offsetLeft;

function getMouse(e) {
    var element = can,
        offsetX = 0,
        offsetY = 0,
        mx, my;

    // Compute the total offset
    if (element.offsetParent !== undefined) {
        do {
            offsetX += element.offsetLeft;
            offsetY += element.offsetTop;
        } while ((element = element.offsetParent));
    }

    // Add padding and border style widths to offset
    // Also add the <html> offsets in case there's a position:fixed bar
    offsetX += stylePaddingLeft + styleBorderLeft + htmlLeft;
    offsetY += stylePaddingTop + styleBorderTop + htmlTop;

    mx = e.pageX - offsetX;
    my = e.pageY - offsetY;

    // We return a simple javascript object (a hash) with x and y defined
    return {
        x: mx,
        y: my
    };
} 
```

# python - Python：错误消息解析

> ID：12664190
> 
> 赞同：0
> 
> 时间：2012-09-30T19:11:54.367
> 
> 标签：python, exception, exception-handling, python-2.7

我正在尝试处理尝试打开不存在的文件时生成的 IOError。我愿意：

```
try:
    inputFile = open('nosuchfile', 'r')
except IOError as exception:
    print 'error: %s' % (exception) 
```

这给了我：

```
error: [Errno 2] No such file or directory: 'nosuchfile' 
```

但我只对消息感兴趣，而不是 [Errno 2] 部分。所以我改变了我的代码。

```
print 'error: %s' % (exception.strerror) 
```

但现在我得到：

```
error: No such file or directory 
```

文件名去哪儿了？我知道我可以单独打印文件名，但我真的很想（如果有的话）名称是如何存储在异常中的，而不是存储在它的任何一个参数中（打印 exception.errno 给出 2）。

我使用的是 2.7.3 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:14:45.503

文件名存储在`filename`属性中：

```
try:
    inputFile = open('nosuchfile', 'r')
except IOError as exception:
    print ('error: %s: %r' % (exception.strerror, exception.filename)) 
```

# javascript - Jquery 对话框不会禁用所有输入和按钮

> ID：12664194
> 
> 赞同：1
> 
> 时间：2012-09-30T19:12:38.860
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

创建新用户时，我使用 jQuery Dialog 显示详细信息表单。我想在向服务器执行 ajax 请求以在数据库中创建实际用户时禁用表单。

我使用`$("#UserDetailsDialog").dialog("disable");`方法来禁用对话框。

似乎此方法仅影响使对话框半透明的 UI，但实际上并不使对话框的输入字段和\或按钮可行：

这是一个代码示例： [小提琴代码](http://jsfiddle.net/ArthurV/p7tV7/)

* * *

**编辑：**

我已经为 jQuery-UI Dev 提交了一张票。团队并得到了快速的“重复”回复。似乎`$("#myDialog").dialog("disable")`jQuery-UI Dialog 的方法不会禁用输入，而只会将 UI 更改为看起来被禁用。此功能确实没有足够好的文档记录。这是 tikect 的链接：[dialog('disable') 不会禁用对话框内的确定/取消按钮](http://bugs.jqueryui.com/ticket/4606)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:37:55.153

没什么，好像 关于该`disable`方法或其实际应该做什么的文档并不多。

显然，`disable`方法/选项不会影响对话框的*内容*（或按钮，这有点奇怪），只会影响对话框本身。如果您想禁用对话框上的输入，我也会手动禁用按钮/输入：

```
$("#UserDetailsDialog").dialog("disable")
    .closest(".ui-dialog")
    .find(":input")
    .prop("disabled", true); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/p7tV7/15/](http://jsfiddle.net/andrewwhitaker/p7tV7/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:19:06.007

尝试 ：

```
$( "#UserDetailsDialog" ).dialog( "option", "disabled", true ); 
```

# c++ - c++11子函数中的随机数生成器

> ID：12664204
> 
> 赞同：1
> 
> 时间：2012-09-30T19:13:25.077
> 
> 标签：c++, random, c++11

我目前正在学习并行计算，为了练习，我需要并行的随机数生成器。但我似乎无法在子例程中使用 RNG，以便它们返回不同的数字。下面的代码是我做的最简单的测试，同时弄清楚如何做到这一点。对于每次迭代，它返回相同的数字，但我不知道为什么。请你解释一下我不明白的地方。

```
#include <iostream>
#include <random>
void morerandom(double& num, double seednum)
{
     std::mt19937 mt;
     mt.seed(seednum);
     std::uniform_real_distribution<double> ureal_d(0.,1.);
     num = ureal_d(mt);
}

int main()
{
    std::vector<double> nums = {0.1, 0.4, 0.3, 0.3, 0.1};
    std::vector<double> results(5,0.);

    for (unsigned k=0; k<5; k++)
    {
        morerandom(results[k], nums[k]);
        std::cout << results[k] << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:10:34.120

The argument to `seed` should by an `int` or other *integral type*, you are using always `0` as seed due to conversion from `double` to `int`.

# performance - 表视图加载性能问题

> ID：12664206
> 
> 赞同：0
> 
> 时间：2012-09-30T19:13:29.343
> 
> 标签：performance, uitableview

我有一个 UITableView，有七行，每行包含文本和一个 .png 图像。当我添加代码为每一行设置图像并在模拟器中运行应用程序时，我会遇到很长的加载时间。

我怀疑性能问题的原因是我的图像尺寸太大并且我正在将图像缩放到适当的像素尺寸。但是，我想确保在我的代码中没有什么可以做的不同以进一步优化性能。在我的代码中我应该做些什么不同的事情吗？

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *c = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (!c)
    {
        c = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:@"Cell"];
    }
//adds text to table view
    [[c textLabel] setText:[categoryNames objectAtIndex:[indexPath row]]];
    [[c textLabel] setTextColor:[UIColor whiteColor]];

    //add pictures to table view

    NSString *path = [[NSBundle mainBundle] pathForResource:[categoryURLs objectAtIndex:[indexPath row]] ofType:@"png"];
    [[c imageView] setImage:[UIImage imageWithContentsOfFile:path]];

    return c;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:47:33.027

通过将图像大小调整为 44x44 像素（标准 UITableViewCell 高度）和 @2x 视网膜图像的 88x88 解决了问题。

# ubuntu - 如何为共享库调整 debian 包中的符号文件

> ID：12664207
> 
> 赞同：5
> 
> 时间：2012-09-30T19:13:39.647
> 
> 标签：ubuntu, debian, packaging, symbols

我正在尝试将我的 Ubuntu PPA 中的 ktorrent 升级到最新的上游版本。它还需要更新的 libktorrent 包。似乎 libktorrent 以不兼容的方式进行了更改，因此导致了一个新的包 libktorrent5 而不是以前可用的 libktorrent4。

但是，当我尝试在我的 PPA 上构建包时，我收到有关不同符号的错误。我尝试了一些方法来修复它，但每次都失败，输出不同。

是否有一些指导如何正确生成符号文件？

完整的构建和构建日志在[这里](https://launchpad.net/~dominik-stadler/+archive/ppa/+build/3864913)

```
dh_strip debug symbol extraction: disabling for PPA build dh_strip debug symbol extraction: not doing anything since NO_PKG_MANGLE is given    dh_makeshlibs -Xusr/lib/kde4/ -a -O--parallel -O--
-O--dbg-package=libktorrent-dbg dpkg-gensymbols: warning: some new symbols appeared in the symbols file: see diff output below dpkg-gensymbols: warning: some symbols or patterns disappeared in the symbols file: see diff output below dpkg-gensymbols: warning: debian/libktorrent5/DEBIAN/symbols doesn't match completely debian/libktorrent5.symbols
--- debian/libktorrent5.symbols (libktorrent5_1.3.0-0ubuntu0~ppa4_amd64)
+++ dpkg-gensymbolsNTCQU9   2012-09-30 02:21:19.000000000 +0000 @@ -2912,13 +2912,20 @@   _ZTVN3utp9UTPServer7PrivateE@Base 1.2.0   _ZTVN3utp9UTPServerE@Base 1.2.0   _ZTVN3utp9UTPSocketE@Base 1.2.0
- _ZThn12_N2bt5UTPex5visitE14QSharedPointerINS_4PeerEE@Base 1.3.0
- _ZThn52_N3dht11FindNodeRspD0Ev@Base 1.3.0
- _ZThn52_N3dht11FindNodeRspD1Ev@Base 1.3.0
- _ZThn52_N3dht11GetPeersRspD0Ev@Base 1.3.0
- _ZThn52_N3dht11GetPeersRspD1Ev@Base 1.3.0
- _ZThn8_N2bt4Peer12chunkAllowedEj@Base 1.3.0
- _ZThn8_N2bt4Peer12handlePacketEPKhj@Base 1.3.0
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn12_N2bt5UTPex5visitE14QSharedPointerINS_4PeerEE@Base 1.3.0
+ _ZThn16_N2bt4Peer12chunkAllowedEj@Base 1.3.0-0ubuntu0~ppa4
+ _ZThn16_N2bt4Peer12handlePacketEPKhj@Base 1.3.0-0ubuntu0~ppa4
+ _ZThn24_N2bt5UTPex5visitE14QSharedPointerINS_4PeerEE@Base 1.3.0-0ubuntu0~ppa4
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn52_N3dht11FindNodeRspD0Ev@Base 1.3.0
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn52_N3dht11FindNodeRspD1Ev@Base 1.3.0
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn52_N3dht11GetPeersRspD0Ev@Base 1.3.0
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn52_N3dht11GetPeersRspD1Ev@Base 1.3.0
+ _ZThn80_N3dht11FindNodeRspD0Ev@Base 1.3.0-0ubuntu0~ppa4
+ _ZThn80_N3dht11FindNodeRspD1Ev@Base 1.3.0-0ubuntu0~ppa4
+ _ZThn80_N3dht11GetPeersRspD0Ev@Base 1.3.0-0ubuntu0~ppa4
+ _ZThn80_N3dht11GetPeersRspD1Ev@Base 1.3.0-0ubuntu0~ppa4
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn8_N2bt4Peer12chunkAllowedEj@Base 1.3.0
+#MISSING: 1.3.0-0ubuntu0~ppa4# _ZThn8_N2bt4Peer12handlePacketEPKhj@Base 1.3.0   (c++)"non-virtual thunk to bt::ChunkDownload::getStats(bt::ChunkDownloadInterface::Stats&)@Base"
1.2.0   (c++)"non-virtual thunk to bt::ChunkDownload::~ChunkDownload()@Base" 1.2.0   (c++)"non-virtual thunk to bt::DataCheckerJob::acquired()@Base" 1.2.0 dh_makeshlibs: dpkg-gensymbols -plibktorrent5 -Idebian/libktorrent5.symbols
-Pdebian/libktorrent5 -edebian/libktorrent5/usr/lib/libktorrent.so.5.0.0  returned exit code 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T14:08:43.570

如果一个库发布（作为不同版本）具有不同的导出符号，则该库的任何“消费者”（即动态链接到它的每个应用程序/库）都需要跟踪它需要哪个特定版本的库。

例如，如果您的应用程序仅使用符号“dht::FindNodeRsp::FindNodeRsp()”并且该符号是在库的 0.7 版中引入的，那么您的应用程序至少需要库的 0.7 版（即使当前版本是 0.9 )

在 debian 上，这个过程是（或：可以）在“符号”文件的帮助下自动化的。例如，如果您打包您的应用程序，打包过程（准确地说：dpkg-shlibdeps）将检查您的应用程序从哪个库导入了哪些符号，并与库包的符号文件进行交叉检查以估计所需库-版本。

看来你的包已经有一个符号文件（好！）

您唯一需要做的就是根据您已有的信息更新此文件。您绝对应该*手动*执行此操作，方法是将构建日志中的差异输出与实际符号文件进行比较，并将适当的行添加到您的符号文件中。

## 示例（添加新符号）

例如，假设您的构建日志包含如下一行：

```
+ _ZThn52_N3dht11FindNodeRspD1Ev@Base 1.3.0 
```

这意味着在库的版本中`_ZThn52_N3dht11FindNodeRspD1Ev@Base`添加了一个新符号 ( )。由于损坏的名称几乎不可读（至少对人类来说），您可能需要运行它以消除它：`+``1.3.0``c++filt`

```
 $ echo _ZThn52_N3dht11FindNodeRspD1Ev@Base | c++filt 
 non-virtual thunk to dht::FindNodeRsp::~FindNodeRsp()@Base 
```

在这种情况下，您应该在符号文件中添加一个新行：

```
 (c++)"non-virtual thunk to dht::FindNodeRsp::~FindNodeRsp()@Base" 1.3.0 
```

请注意，您可能应该去掉本地版本的后缀，例如`1.3.0-0ubuntu0~ppa4`应该成为`1.3.0-0ubuntu0~`（保留尾随波浪号）

## 示例（删除符号）

不幸的是，您得到的输出表明，许多符号*已从*您的库中删除。这很糟糕，因为它破坏了兼容性！（如果您的应用程序（仅）使用在 1.0.3 版中引入但在 2.3.0 版中删除的符号`dht::FindNodeRsp::~FindNodeRsp()`，您可以将其链接到 1.0.3 版，但您也可以使用 1.2.5 版，因为它仍然提供这个符号；您的应用程序不会关心库中可能存在或不存在的其他符号）。

因为它破坏了兼容性，所以你应该确保的第一件事是增加你的 library - **packagename****的主要版本**号。

 **例如，如果您的库已删除（上游）版本“1.0.3”和“1.0.4”之间的符号，并且原始（二进制）包名称为“libfoo1”（用于打包上游“1.0.3”），那么您应该将（二进制）包名称更改为“libfoo2”（即使上游版本仍然是 1.something）

这是*必须*的，由 Debian 政策规定！

重命名二进制包名称，很可能涉及将符号文件重命名`debian/libfoo1.symbols`为`debian/libfoo2.symbols`

一旦你这样做了，从符号文件中删除有问题的行。

## 架构问题：32 位与 64 位

您可能会遇到一些在各种架构上“看起来”不同的类型的问题，特别是 64 位系统与 32 位系统。这些类型中最常见的是`size_t`，它可以扩展为`unsigned long`或`unsigned int`，具体取决于您的架构。

幸运的是，存在处理（某些）这些情况的工具，例如`pkgkde-gensymbols`替换 for `dpkg-gensymbols`，它附带`pkg-kde-tools`

要使用它，请将符号文件中的相关条目修改为如下所示（假设您的库导出符号“foo::bar(size_t n)”

```
 (c++|subst)"foo::bar({c++:size_t})@Base" 1.2.3 
```

然后你必须告诉你的`debian/rules`文件使用`pkgkde-gensymbols`而不是标准。如果您使用 CDBS 进行打包，请在普通包含后添加以下行：

```
 include /usr/share/pkg-kde-tools/makefiles/1/cdbs/symbolshelper.mk 
```

请参阅`README.Debian`pkg-kde-tools 以获取有关如何为其他构建系统执行此操作的信息，例如`dh`和/或“标准”简单 KDE 包。**

# jquery - Jquery对话框加载页面防止对话框在提交表单时关闭

> ID：12664210
> 
> 赞同：1
> 
> 时间：2012-09-30T19:14:23.780
> 
> 标签：jquery

我正在构建一个页面，一旦我单击它调用的函数模式和要在对话框中打开的页面的 url 的链接，对话框中加载的页面包含一个表单，问题是一旦我提交表单对话框关闭而不是保持对话框打开。

从对话框页面提交表单后，是否可以保持对话框打开？

下面是jquery代码：

谢谢

```
$(document).ready(function() {
    $("#dialog").dialog({
        autoOpen: false,
        modal: true,
        width: 400,
        height: 400,
        close: function(event, ui) {
            $("#dialog").html("");
        }
    });
});

function modal(url) {
    $(document).ready(function() {
        $("#dialog").load(url).dialog('open');
    });
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:25:43.123

您可以在提交时添加自己的事件

```
$(document).ready( function() {
    $('#commentform').submit( function() {
        // submit data with $.POST, $.GET, $.AJAX
        return false;
    });
}); 
```

'commentform' - 你的表单的 id 到 'dialog'

# javascript - 用于客户端交互的 web api 或控制器

> ID：12664213
> 
> 赞同：0
> 
> 时间：2012-09-30T19:14:37.753
> 
> 标签：javascript, asp.net-mvc, asp.net-web-api, rich-internet-application

我目前正在开发一个新的 MVC4 应用程序，它将是一个具有大量客户端交互的丰富应用程序。

以前对于 MVC 应用程序，我会使用控制器来简化 javascript 服务器端交互。现在随着 web api 和 rest 服务的出现，我质疑这种方法。

我会对其他开发人员的意见感兴趣，因为它是客户端/服务器端交互的更好实践，使用 web api 而不是控制器动作来进行这种交互会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:40:59.730

我会选择 Web API。您说客户端交互在您的项目中占有重要地位，因此应该有自己的项目。

主要原因是关注点分离，因为它更干净地将返回 Html 的控制器与客户端使用的 API 分离。使用专门用于此特定主题的 Web API 项目将产生更清晰的代码。

例如，在 MVC 控制器中，为了返回一个对象，您将编写以下代码： `return Json(customInstance);`ActionResult 类型。为了在 WebAPI 中实现同样的事情，将使用这行代码：`return customInstance;`CustomObject 类型。

# php - 用于更新数据库或插入新行的脚本

> ID：12664215
> 
> 赞同：0
> 
> 时间：2012-09-30T19:15:13.913
> 
> 标签：php, mysql

人们

我正在尝试使用相同的脚本来批准将联系人添加到数据库中，但如果主键 (id) 已经存在，则查询将进行更新。所以我设置了一个 INSERT INTO .... ON DUPLICATE KEY UPDATE 查询，如下所示：

```
$resultsc = mysql_query("INSERT INTO $contact     (id,First,Last,Companyid,userid,Title,PrimaryPhone,SecondaryPhone,PrimaryEmail,SecondayEmail,inserted) VALUES('$id','$first','$last','$companyid','$userid','$title','$phone1','$phone2','$email1','$email2',NOW()) ON DUPLICATE KEY UPDATE (First,Last,Companyid,userid,Title,PrimaryPhone,SecondaryPhone,PrimaryEmail,SecondayEmail) VALUES ('$first','$last','$companyid','$userid','$title','$phone1','$phone2','$email1','$email2') WHERE id='$id'"); 

if(!$resultsc)
        {
            echo "<font face='Verdana' size='2' ><center>You have successfully approved this user for access to this site.</center><br><center><input type='button' value='Back' onClick='history.go(-2)'></center>"; die();
        }
else
    {

        echo "<font face='Verdana' size='2' ><center>You have not updated this contact for this site.</center><br><center><input type='button' value='Back' onClick='history.go(-2)'></center>";
    } 
```

我没有收到任何错误，但数据库没有更新或插入新记录。所以我检查了我的“$contacts”变量，以确保它指向正确的表，而且确实如此。如果我只是单独进行插入，那么脚本工作正常。但是当我做这个查询时，什么也没有发生。我想知道它有什么问题，或者我应该只使用 if/else 并选择检查现有密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:20:13.540

语法[错误](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

```
INSERT ... ON DUPLICATE KEY UPDATE
   field1=VALUES(field1),
   field2=field2+1,
   field3='fixevalue',
   field4=VALUES(field4)
   etc... 
```

注意`values()`函数的使用。在这些查询中非常方便`on dupe`，因此您不必两次插入字段的值（一次在插入部分，一次在更新部分）。MySQL 将在更新中再次使用插入部分的值。如果您要插入“大”数据并且不想在重复数据上浪费带宽，则非常方便。

在元级别上，不要像在调试阶段那样输出固定的错误消息：

```
if (!$resultc) {
   die(mysql_error());
} 
```

比“哎呀，有些东西不起作用”更有用和更有帮助。

# html - Favicon 未在 Chrome 和 IE8 中显示

> ID：12664217
> 
> 赞同：0
> 
> 时间：2012-09-30T19:15:27.180
> 
> 标签：html

Google Chrome 和 IE8/9 不显示我的网站图标。这是我在 head 标签中的 HTML 代码：

```
<link rel="icon" href="images/favi.ico" type="image/x-icon" />
<link rel="shortcut icon" href="images/favi.ico" type="image/x-icon" /> 
```

你能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:20:12.610

将它放在根目录中，它应该可以工作...
`<link rel="shortcut icon" href="favicon.ico">`
有关更多信息，请参阅此处[http://en.wikipedia.org/wiki/Favicon](http://en.wikipedia.org/wiki/Favicon) ，您最好使用默认名称**favicon.ico**，可能您必须清理您的先缓存到浏览器...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:35:17.600

尝试这个：`<link rel="icon" type="image/ico" href="path_to_icon/favicon.ico"/>`

# c - 为什么动态创建变量时会出现未声明的标识符错误？

> ID：12664219
> 
> 赞同：0
> 
> 时间：2012-09-30T19:16:01.147
> 
> 标签：c, compiler-errors

我看过[这个问题](https://stackoverflow.com/questions/4774961/why-do-i-get-error-undeclared-identifier-unless-i-declare-my-variable-at-the-b)，我注意到当我在`main()`函数中间声明变量时出现错误，但我认为动态创建变量不会导致错误，因为它可以在运行时随时随地完成（据我所知）。

但是，我仍然得到：

```
error C2065: 'i' : undeclared identifier
error C2065: 'z' : undeclared identifier
error C2065: 'intArr' : undeclared identifier 
```

我的代码：

```
int main()
{
  ..... 
  .....
  ..... 

  printf("Type the array size:\t");
  int *z = (int *)malloc(sizeof(int));
  scanf("%d", z);
  int *intArr = (int *)malloc((*z) * sizeof(int));

  int *i = (int *)malloc(sizeof(int));

  for (*i = 0; *i < *z; ((*i)++))
  {
      printf("Type a number\t");
      scanf("%d", (intArr+(*i)));
  }

  printArr(intArr);
}

void printArr(int *arr)
{
    int i; 
    for (i = 0; i < (sizeof(arr) / sizeof(*arr)); ++i)
        printf("%d ", *(arr+i));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:16:39.657

（我不确定为什么@Blood 删除了他的答案；它基本上是正确的。）

当我使用 gcc 编译你的程序时，它编译没有错误。我不得不添加

```
 #include <stdio.h>
 #include <stdlib.h> 
```

到顶部，然后删除`.....`三行。

当我使用 Microsoft 的 Visual C++ 2010 Express 编译相同的程序时，我得到了许多错误。他们中的一些人抱怨未声明的标识符，但这是语法错误的常见副作用；如果编译器无法解析您的源文件，它可能会在尝试恢复时变得“混乱”。最相关的错误是：

```
syntax error : missing ';' before 'type' 
```

在第 10 行：

```
printf("Type the array size:\t");     // line 9
int *z = (int *)malloc(sizeof(int));  // line 10 
```

问题是 1989/1990 版本的 C 标准不允许在一个块中混合声明和语句。它要求首先出现所有声明，然后是所有语句。1999 年的 C 标准改变了这一点，但微软的 C 编译器对 1990 年之后的任何 C 标准的支持都非常有限（他们已经表示他们无意改变这一点）。（我希望他们在未来的版本中*可能*允许混合声明和语句，因为这也是 C++ 的一个特性。）

（我从错误消息的形式假设您使用的是 Microsoft 编译器。）

您可以重新排列代码以满足 Microsoft 编译器的限制。在某些情况下，您可能需要更改类似

```
int *var = initial_value; 
```

到

```
int *var;
// ...
var = initial_value; 
```

另一个建议，与您的问题无关：

在 C 中，您不应该强制转换`malloc()`. 该`malloc()`函数返回一个类型的值`void*`，它可以*隐式*转换为任何指向对象的指针类型。（C++ 没有这种隐式转换，但你可能不应该`malloc()`在 C++ 中使用。）

而不是这样：

```
int *z = (int *)malloc(sizeof(int));
...
int *intArr = (int *)malloc((*z) * sizeof(int)); 
```

你可以这样写：

```
int *z = malloc(sizeof *z);
...
int *intArr = malloc(*z * sizeof *intArr); 
```

去掉不必要的演员表可以避免某些错误；例如，对于某些编译器，如果您忘记了 required ，则强制转换可以掩盖必要的错误消息`#include <stdlib.h>`。并且应用or ，`sizeof`而不是显式命名大小，意味着如果指针的类型发生变化，您将不必更改调用。如果你写，例如：`*z``*intArr`

```
double *p = malloc(sizeof (int)); // incorrect 
```

那么你分配了错误的大小，但编译器不会警告你。

此外，如果您使用 分配单个`int`值`malloc()`，就像您使用`i`and`z`指针所做的那样，您正在做不必要的工作。除非您的目的是练习使用`malloc()`，否则您最好只使用 make`i`和`z` `int`变量，然后放弃`malloc()`调用。您只需将他们的*地址*传递给`scanf`. 换句话说，你可以改变这个：

```
int *z = (int *)malloc(sizeof(int));
...
scanf("%d", z); 
```

对此：

```
int z;
...
scanf("%d", &z); 
```

还有一点：您的程序没有错误检查。`malloc()`如果没有足够的内存来分配可能会失败；发生这种情况时，它会返回一个空指针 ( `NULL`)。`scanf()`如果出现输入错误，或者您`hello`在预期读取`int`. `scanf()`返回它成功扫描的项目数；您应该验证它是否这样做（在这种情况下，它会在成功时返回 1）。对于像这样的简单程序，使用错误消息中止程序：

```
fprintf(stderr, "Call to ... failed\n");
exit(EXIT_FAILURE); 
```

可能已经足够好了。

# android - 如何将文本从文件加载到文本视图

> ID：12664226
> 
> 赞同：1
> 
> 时间：2012-09-30T19:16:29.430
> 
> 标签：android, file-io, textview

> **可能重复：**
> [android 从文本文件中读取](https://stackoverflow.com/questions/7568795/android-reading-from-a-text-file)

所以我需要加载文本，但我不知道如何:( 为了保存文本，我正在这样做

```
File logFile = new File("sdcard/data/agenda.file");
if (!logFile.exists())
{
    try
    {
        logFile.createNewFile();
    } 
    catch (IOException e)
    {

        e.printStackTrace();
    }
}
try
{
    //BufferedWriter for performance, true to set append to file flag
    BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); 
    buf.append(editText1.getText());
    buf.newLine();
    buf.close();
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

那么，如何通过点击按钮将其加载回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:59:07.017

要读取文件的内容，例如 *.txt - 这样做...

```
private String GetPhoneAddress() {
    File file = new File(Environment.getExternalStorageDirectory() + "/reklama/tck.txt");
    if (!file.exists()){
        String line = "Need to add smth";
        return line;
    }
    String line = null;
    //Read text from file
    //StringBuilder text = new StringBuilder();
    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        line = br.readLine(); 
        }
    catch (IOException e) {
        //You'll need to add proper error handling here
    }
    return line;
} 
```

然后，从 activite 到设置为 textview - 只是做类似的事情

```
final TextView tvphone = (TextView) findViewById(R.id.saved_phone);
    String saved_phone = GetPhoneAddress();
    if (saved_phone.length()>0){
       tvphone.setText(saved_phone);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:32:21.237

此函数将读取您的整个文件，并将其设置`TextView`为文本参数，如果这是您想要的。您的代码正在尝试将`TextViews`内容写入文件，而不是读取它。

```
public void loadToTextView(TextView textView) throws Exception
{
    String path = Environment.getExternalStorageDirectory().getAbsolutePath();
    File file = new File(path, "filename.file");
    textView.setText(new Scanner(file).useDelimiter("\\Z").next());
} 
```

小心，你需要处理`Exception`这个函数可能抛出的 , 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:42:14.210

此方法会将每一行读入一个`StringBuffer`.

然后只需调用`setText(contentsOfFile)`您的`TextView`.

```
BufferedReader fileReader = new BufferedReader(new FileReader("/mnt/sdcard/agenda.file"));

StringBuilder strBuilder = new StringBuilder();

String line;
while((line = fileReader.readLine()) != null)
{
    strBuilder.append(line);
}

fileReader.close();

strBuilder.trimToSize();

String contentsOfFile = strBuilder.toString(); 
```

# windows-8 - 检测 Windows 8 应用商店应用程序是否有触摸屏

> ID：12664228
> 
> 赞同：5
> 
> 时间：2012-09-30T19:16:31.220
> 
> 标签：windows-8, microsoft-metro

Win 8 Store App UI 的某些元素会根据用户是否有触摸屏而改变。例如，ScrollViewer 在非触摸屏上呈现时会显示垂直滚动条。在触摸屏上，滚动条是隐藏的。

我想为非触摸屏用户定制我的应用程序 UI，添加额外的控件。有谁知道是否可以检测用户是否有触摸屏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:33:01.403

您可以使用`Windows.Devices.Input`命名空间来检测各种功能（触摸、键盘、鼠标等）。例如，[TouchCapabilities](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.touchcapabilities.aspx)类有一个`TouchPresent`属性，您可以检查是否有可用的数字化仪。

查看[输入：设备功能示例](http://code.msdn.microsoft.com/windowsapps/Input-device-capabilities-31b67745)以了解它们的实际作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:34:14.707

如果您使用的是 HTML/JS，您可以像这样查询它

```
var touchCapabilities = new Windows.Devices.Input.TouchCapabilities();
var isTouchCapable = touchCapabilities.touchPresent; 
```

# javascript - 是 && 语句() 等同于 if( ） 陈述（）？

> ID：12664230
> 
> 赞同：8
> 
> 时间：2012-09-30T19:16:52.070
> 
> 标签：javascript, syntax, if-statement, boolean, syntactic-sugar

两者是一样的吗？

假设你有：

```
var x = true; 
```

然后你有一个：

```
x && doSomething(); 
```

或者

```
if(x) doSomething(); 
```

两种语法之间有什么区别吗？我偶然发现了一点糖吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T19:22:29.027

严格来说，它们会产生相同的结果，但是如果将前一种情况作为其他情况的条件，则会得到不同的结果。这是因为在 的情况下`x && doSomething()`，`doSomething()`将返回一个值来表示其成功。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T19:27:21.847

不，它们不相同。While`if`是一个*语句*，`AND`运算符是一个*表达式*。

这意味着您可以在其他表达式中使用它的结果，而 if 语句则不能：

```
var result = x && doSomething(); 
```

但是，在您的情况下，两者都具有相同的效果。使用更具可读性并更好地代表您的程序结构的一种；我建议使用 if 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-03T10:52:05.053

## 简短的回答：**没有。**

## 长答案：

@Steve 声明的 A`x && doSomething()`是一个**表达式**，

而是`if(x) doSomething();`一个**陈述**，

正如@Daniel Li 和@Bergi 所建议的，认为：

*   计算一个**表达式（应该在****这里**返回一个值）。

*   声明了一个**语句**（**不应该在****这里**返回一个值，想想**副作用**）。

## 为什么会让人困惑？

*   JS允许我们写`( thatExpression );`
*   JS允许我们写`thatExpression;`

两者都假设某种`doNothingWithValueOf`陈述。

## 如何选择？

你使用：

*   `doSomething()`作为一个
    *   表达，思考`IsMyObjectWhatever()`或`MyObjectComputedValue()`，
    *   或作为陈述，认为`ModifyMyObject()`

然后：你`x && doSomething()`用作**表达**吗？

你最终会想到`thisStatement( thatExpression );`无处不在的东西，想想：

*   `()`表达，
*   `;`陈述。

## 那我为什么要选择？

*   很明显，“它有效”。不代表“它是正确的”。

*   如果不太明显的是**什么时候**会有所作为：

    *   只是觉得`()(()())()();` *可以是* **对的**，`(;)` **是** *错*的。
    *   检查@wwaawaw [Javascript：语句和表达式之间的区别？](https://stackoverflow.com/questions/12703214/javascript-difference-between-a-statement-and-an-expression?lq=1)
    *   或[Axel Rauschmayer 发表的表达式与陈述](http://www.2ality.com/2012/09/expressions-vs-statements.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T19:49:24.957

总之，不，这两个陈述是不相等的，尽管在您提出的特定情况下结果是相同的。

`x && doSomething();`是一个表达式，首先是`x`求值的，因为这是一个 AND 并且因为`x`为真，所以第二个参数 ( `doSomething()`) 会被求值。在这种情况下，这意味着该方法已被执行。如果`x`为假，则不会执行 doSomething()，因为表达式的结果不能为真。

`if(x) doSomething();`是一个声明。检查 x 的值，如果为真，则执行 if 语句的范围。

我把这个[小提琴](http://jsfiddle.net/gxCLF/1/)放在一起来演示（稍作修改）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T08:57:26.863

来玩侦探吧。

我们将第一种方法称为**条件箭头调用**，第二种方法称为**传统 If Else**。

我们将在[jsperf](https://jsperf.com)中创建两个单独的案例来评估这两种方法的公平性。

# 条件箭头调用

```
const VALUE = true;
const TEST = false;

//test 1
VALUE && !TEST && (() => {
    console.log('print me!');
})(); 
```

**操作/秒结果：**

1.  火狐：65,152
2.  铬：129,045

# 传统的 If Else

```
const VALUE = true;
const TEST = false;

//test 2
if(VALUE && !TEST) {
    console.log('print me!');
} 
```

**操作/秒结果：**

1.  火狐：65,967
2.  铬：130,499

# 结论

正如您所看到的，在性能方面并没有太大的差异，但**传统的 If Else**在大多数情况下以微不足道的少数胜过条件箭头调用。这可能与动态创建隐式函数有关。

我还意识到 Chrome 的 JavaScript 比 FireFox 的 JavaScript 执行要快得多。

这是 jsperf 链接，您可以运行它来自行评估。

[https://jsperf.com/conditional-methods-vs-traditional-if-else/1](https://jsperf.com/conditional-methods-vs-traditional-if-else/1)

# python - 创建一个 django 查询，该查询将根据字母顺序检索上一个和下一个对象

> ID：12664235
> 
> 赞同：0
> 
> 时间：2012-09-30T19:17:22.497
> 
> 标签：python, django, model, alphabetical

我有一个看起来像这样的 django 模型：

```
class Definition
    name = models.CharField(max_length=254)
    text = models.TextField() 
```

如果我执行以下查询：

```
animal = Definition.objects.get(name='Owl') 
```

如果我的数据库中有以下带有这些名称的定义：

```
Elephant, Owl, Zebra, Human 
```

有没有一种方法可以根据模型中字段的`animal`字母顺序显示基于对象的上一个和下一个定义的 django 查询？`name`

我知道有一些方法可以根据`datetime`字段获取上一个/下一个，但我对这种情况不太确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T19:44:07.653

我不知道在少于三个查询中执行此操作的任何方法。

```
target = 'Owl'
animal = Definition.objects.get(name=target)
previous_animal = Definition.objects.order_by('name').filter(name__lt=target)[0]
next_animal = Definition.objects.order_by('name').filter(name__gt=target)[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T03:57:11.870

如果有人像我一样遇到这种情况...

这是我的解决方案...它也会循环（因此，如果在最后一项上，它将第一项显示为下一项，如果在第一项上将最后一项显示为上一项）

```
 def get_previous_by_title(self):
        curr_title = self.get_object().title
        queryset = self.my_queryset()
        try:
            prev = queryset.filter(title__lt=curr_title).order_by("-title")[0:1].get()
        except Video.DoesNotExist:
            prev = queryset.order_by("-title")[0:1].get()
        return prev

    def get_next_by_title(self):
        curr_title = self.get_object().title
        queryset = self.my_queryset()
        try:
            next = queryset.filter(title__gt=curr_title).order_by("title")[0:1].get()
        except Video.DoesNotExist:
            next = queryset.order_by("title")[0:1].get()
        return next 
```

我有基于用户级别的自定义查询集，因此可以将查询集设置为普通查询集，例如... Video.objects.all() 但是在任何地方我重复代码不止一次我创建一个函数

# ruby - 如何访问论点？

> ID：12664238
> 
> 赞同：0
> 
> 时间：2012-09-30T19:17:39.550
> 
> 标签：ruby, arguments, local-variables

我希望一个方法在另一个方法中使用并返回参数而不需要提及参数名称，`return_arguments`如下所示。

```
def foo a, b, *c
  ... # part a
  p return_arguments
  ... # part b
end

foo(1, "blah blah", :a, :b)
... # return from part a
# => [1, "blah blah", :a, :b]
... # return from part b 
```

这可能吗？我发现`binding`, `local_variables`, 和`eval`可以使用，但不确定如何将参数与`part a`上面定义的其他局部变量区分开来。是否有特定的排序规则`local_variables`？如果是这样，也许我可以将其与`arity`提取参数一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:30:33.407

在方法中使用`local_variables`第一件事，即在设置任何局部变量之前，并保存结果以备后用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:43:34.847

可能最简单的事情是这样的：

```
def foo(*args)
  a, b, *c = *args
  # (...)
  p args
  # (...)
end 
```

或者反过来：

```
def foo(a, b, *c)
  args = [a, b, *c]
  # (...)
  p args
  # (...)
end 
```

我不确定您为什么反对至少提及一次参数名称。在您的方法中分配您的“参数”（让保留完整的数组）或从解析的参数重建数组是最直接和可读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:36:44.097

这绝对是低效的，但这是一个解决方案（尽管您可能应该使用像@tadman 提到的哈希）：

```
set_trace_func proc { |e,_,_,i,b,_|
   if e == 'call'
      p = method(i).parameters
      @arguments = p.map {|p| eval(p[1].to_s,b)}
   end
}

def foo a, b, *c
   a = 50
   b = 3
   return @arguments
   a = 11
   b = 2
end

p foo(1, "blah blah", :a, :b) 
```

# matlab - 我不能在matlab中使用多个数字

> ID：12664240
> 
> 赞同：0
> 
> 时间：2012-09-30T19:18:04.010
> 
> 标签：matlab

我需要为每个 x 找到 rp 但我很难，因为 matlab 给了我这个错误

```
Error in enee_408e_hw2_pb1 (line 6)
rp=(z2*cos(t2)-z1*cos(x))/(z2*cos(t2)+z1*cos(x)) 
```

这是我的代码

```
x=0:.01:pi/2;
n2=1.7;
t2=asin(sin(x)/n2);
z1=377*cos(x);
z2=377\cos(x);
rp=(z2*cos(t2)-z1*cos(x))/(z2*cos(t2)+z1*cos(x)); 
```

我想计算从 0 到 pi/2 的每个角度的 rp，然后绘制它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:27:20.227

每个操作都在 z1 和 z2 中的同一个单元格上执行。Matlab/Ocatave 根据变量类型计算方程。所以如果你把它放在`*`向量之间，它会尝试计算叉积。可能问题是`\`，我不知道 Matlab 试图用它做什么。`.`在运算符更改方法之前添加更自然（对于非数学人员）并乘以相应的单元格。但我仍然不确定这是你所期望的

```
rp=(z2.*cos(t2)-z1.*cos(x))./(z2.*cos(t2)+z1.*cos(x)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:29:49.907

首先，你为什么在这一行中使用 \ ？

```
z2=377\cos(x); 
```

MATLAB 中的 \ 和 / 是有区别的。

是时候了解 ./ 和 .* 与 MATLAB 中的 / 和 * 之间的区别了。

当您需要逐元素操作时，请使用带点的运算符。

# c - 在C中将十进制转换为二进制

> ID：12664242
> 
> 赞同：0
> 
> 时间：2012-09-30T19:18:13.813
> 
> 标签：c, binary, decimal

代码给出了错误的答案。如果数字等于 42，则将其变为 101010。好吧，这是真的。但是如果数字等于4，它会变成99。我没有发现错误。我该如何修复代码？

```
#include<stdio.h>
#include<conio.h>
#include<math.h>

int main()
{
    int i,digit,number=4;
    long long bin= 0LL;
    i=0;
    while(number>0)   
    {
          digit=number%2;
          bin+=digit*(int)pow(10,i);
          number/=2;
          i++;
    }
    printf("%d ",bin);
    getch();   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:27:47.587

停止为此使用浮点计算。你受制于浮点数的变幻莫测。当我用我的编译器运行你的程序时，输出是 100。但我猜你的编译器对浮点的处理`pow`方式不同。

使代码运行并仅使用整数算术的简单更改如下：

```
#include<stdio.h>
#include<conio.h>
#include<math.h>

int main()
{
    int digit,number=4;
    long long scale,bin= 0LL;
    scale=1;
    while(number>0)   
    {
          digit=number%2;
          bin+=digit*scale;
          number/=2;
          scale*=10;
    }
    printf("%lld ",bin);
    getch();   
} 
```

但我宁愿看到二进制文件建立在一个字符串而不是一个整数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-24T06:39:21.947

您可以使用更简单的方法将[十进制转换为二进制数字系统](http://codeforwin.org/2015/08/c-program-to-convert-from-decimal-to-binary-number-system.html)。

```
#include <stdio.h>  

int main()  
{  
    long long decimal, tempDecimal, binary;  
    int rem, place = 1;  

    binary = 0;  

    /* 
     * Reads decimal number from user 
     */  
    printf("Enter any decimal number: ");  
    scanf("%lld", &decimal);  
    tempDecimal = decimal;  

    /* 
     * Converts the decimal number to binary number 
     */  
    while(tempDecimal!=0)  
    {  
        rem = tempDecimal % 2;  

        binary = (rem * place) + binary;  

        tempDecimal /= 2;  
        place *= 10;  
    }  

    printf("\nDecimal number = %lld\n", decimal);  
    printf("Binary number = %lld", binary);  

    return 0;  
} 
```

# java - mapreduce 时的 Hadoop 库冲突

> ID：12664243
> 
> 赞同：1
> 
> 时间：2012-09-30T19:18:23.323
> 
> 标签：java, maven, hadoop

我有一个使用 Hadoop API 启动各种远程 mapreduce 作业的 jar（即，我不使用命令行来启动作业）。执行各种作业的服务 jar 是使用 maven 的“jar-with-dependencies”构建的。

除了使用 commons-codec 1.7 的工作外，我的工作都运行良好，我得到：

> 致命 org.apache.hadoop.mapred.Child：运行子错误：java.lang.NoSuchMethodError：org.apache.commons.codec.binary.Base64.encodeAsString([B)Ljava/lang/String;

我认为这是因为我的 jar 包含 commons-codec 1.7 而我的 Hadoop 安装的 lib 包含 commons-codec 1.4 ...

他们是否有任何方式指示 Hadoop 使用分布式 commons-codec 1.7（我假设这是作为作业依赖项分发的）而不是 hadoop 1.0.3 核心库中的 commons-codec 1.4？

非常感谢！

**注意：**从我的 Hadoop 库文件夹中删除 commons-codec-1.4.jar 确实解决了问题，但似乎不太理智。希望有更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:25:32.163

两种方法：

*   您应该能够从 hadoop 依赖项中排除 commons-codec 并为 commons-codec 添加另一个显式依赖项
*   尝试将范围设置为提供，以便不包含任何 hadoop jar。这假定这些 jar 将位于运行时类路径中。

# javascript - JSF 页面中的 $.noConflict() 冲突

> ID：12664246
> 
> 赞同：0
> 
> 时间：2012-09-30T19:18:53.247
> 
> 标签：javascript, jquery, jsf, jsf-2, primefaces

我有一个要与 AJAX 选项卡一起使用的 Primefaces 图表：

```
<h:head>

</h:head>
<h:body>
    <div id="test" style="width:850px; height:800px; position:absolute;  background-color:transparent; ">

        <h:form>
            <h:panelGroup layout="block">
                <h:selectOneListbox size="0" id="selectedMenu" value="#{dashboardController.selectedMenu}">
                    <f:selectItem itemLabel="first" itemValue="0" />
                    <f:selectItem itemLabel="second" itemValue="1" />
                    <f:selectItem itemLabel="third" itemValue="2" />

                    <f:ajax event="change" execute="@this" render="loadMenu" />
                </h:selectOneListbox>
            </h:panelGroup>

            <h:panelGroup layout="block" id="loadMenu">
                <h:panelGroup rendered="#{dashboardController.selectedMenu=='0'}">
                    MENU 0
                </h:panelGroup>

                <h:panelGroup rendered="#{dashboardController.selectedMenu=='1'}">
                    MENU 1
                </h:panelGroup>

                <h:panelGroup rendered="#{dashboardController.selectedMenu=='2'}">
                    MENU 2
                </h:panelGroup>
            </h:panelGroup> 
        </h:form>    
    </div> 
</h:body>

@ManagedBean
@ViewScoped
public class DashboardController implements Serializable{

private String selectedMenu;

@PostConstruct
public void init() {
    if (selectedMenu == null || selectedMenu.trim().isEmpty()) {
        this.selectedMenu = "0";
    }
}

public String getSelectedMenu() {
    return selectedMenu;
}

public void setSelectedMenu(String selectedMenu) {
    this.selectedMenu = selectedMenu;
} 
} 
```

我将此代码用于图表：

```
<script type="text/javascript">
   $.noConflict();
   // Code that uses other library's $ can follow here.
</script>
    ..........

<p:lineChart id="logins" value="#{StatisticsController.weekActivity}" legendPosition="ne"  
                                 title="Weekly Logins" seriesColors="4D94FF, 1975FF, 005CE6, 0047B2" minY="0" maxY="200"/> 
```

当我删除

```
<script type="text/javascript">
    $.noConflict();
    // Code that uses other library's $ can follow here.
</script> 
```

当 AJAX 选项卡工作时。看来`$.noConflict();`代码有冲突。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:42:46.397

因此，从 primefaces 库中删除 jquery 包含并让它使用您已经包含的 jQuery。

# javascript - javascript数字属性语法

> ID：12664247
> 
> 赞同：1
> 
> 时间：2012-09-30T19:18:55.803
> 
> 标签：javascript, syntax, numbers

> **可能重复：**
> [为什么我不能用一个点访问整数的属性？](https://stackoverflow.com/questions/9380077/why-cant-i-access-a-property-of-an-integer-with-a-single-dot)

我正在阅读一篇文章，遇到了 javascript toFixed 方法的奇怪行为。我不明白最后一句话的原因。谁能解释一下？

`(42).toFixed(2);`// “42.00” **好的**

`42.toFixed(2);`// SyntaxError: 标识符在数字文字之后立即开始

`42..toFixed(2);`// "42.00"**这看起来真的很奇怪**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T19:30:47.770

JavaScript 中的数字在正则表达式中基本上是这样的：

```
[+-]?[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)? 
```

请注意，量词是贪婪的。这意味着当它看到：

```
42.toFixed(2); 
```

它读`42.`作数字然后立即面对`toFixed`并且不知道如何处理它。

在 的情况下`42..toFixed(2)`，数字是`42.`但不是`42..`因为正则表达式只允许一个点。然后它看到`.`which 只能是对成员的调用，即`toFixed`。一切正常。

就可读性而言，`(42).toFixed(2)`它的意图要清楚得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:22:18.293

点不明确：小数点或调用成员运算符。因此错误。

`42..toFixed(2);`相当于`(42.).toFixed(2)`

# python - Celery 将所有输出标记为警告

> ID：12664250
> 
> 赞同：11
> 
> 时间：2012-09-30T19:19:11.287
> 
> 标签：python, celery

为什么 Celery 将所有输出标记为警告？例如：

```
[2012-09-30 16:41:10,718: WARNING/MainProcess] celery@dev-maven has started.
[2012-09-30 16:41:49,219: INFO/MainProcess] Got task from broker: project_reindex.reindex_updated_projects[df28cd38-7582-445b-921b-228ee7570d9f]
[2012-09-30 16:41:52,761: WARNING/PoolWorker-1] Project 51144 indexed. 
```

我该如何配置它？

更新：

> 操作系统 - Ubuntu 10.04
> 
> Celery 3.0.7 (Chiastic Slide)
> 
> 消息代理 - RabbitMQ

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T09:16:28.767

来自`stdout`并`stderr`重定向到记录器的输出，默认日志级别为警告。`worker_redirects_stdouts_level`您可以使用和`worker_redirects_stdouts` 设置配置级别或完全禁用重定向 ：

[https://docs.celeryproject.org/en/latest/userguide/configuration.html#worker-redirect-stdouts](https://docs.celeryproject.org/en/latest/userguide/configuration.html#worker-redirect-stdouts)

这些设置是`CELERY_REDIRECT_STDOUTS_LEVEL`&`CELERY_REDIRECT_STDOUTS`在早期版本中。

# c++ - Symbian 模拟键盘输入

> ID：12664253
> 
> 赞同：1
> 
> 时间：2012-09-30T19:19:24.567
> 
> 标签：c++, qt, keyboard, symbian, textinput

我创建了一个 Qt 后台任务，它根据用户输入生成文本。我的任务在文本输入字段打开时运行，我现在需要一种将文本插入到当前打开的任何应用程序的输入中的方法。我看过按键模拟，但找不到有效的方法。

你知道我能做什么吗？

PS。这适用于 Symbian^3(Belle) 和 Qt 以及 Symbian C++ 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:53:05.810

正在做的事情是

```
 RWsSession sess=CCoeEnv::Static()->WsSession();
        sess.SimulateKeyEvent(RFB::GetKeyEvent(code,ETrue));
        User::After(200000); 
        sess.Flush(); 
```

# visual-c++ - opengl中的复合旋转和平移问题，围绕其自己的局部轴移动对象不起作用

> ID：12664254
> 
> 赞同：0
> 
> 时间：2012-09-30T19:19:32.283
> 
> 标签：visual-c++, opengl, transformation, vbo, coordinate-transformation

我正在用 openGL 构建一个机器人，它应该可以移动和旋转。当我按下机器人应该向前移动，如果我按下 t 那么他应该围绕它自己的局部轴旋转 15*，然后如果我按下 f 他会再次行走。我已经完成了，机器人行走和旋转，但问题是他没有相对于他的局部轴旋转，他正在跟随 (0,0,0)。我想我不明白必须如何制作平移和旋转的组合才能获得我想要的效果。

我现在正在尝试仅使用缩放球体。我在这里添加显示功能，以便你们更清楚：

```
void display() 
{ 
    glEnable(GL_DEPTH_TEST);    // need depth test to correctly draw 3D objects 
    glClearColor(0,0,0,1); 
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT); 
    glShadeModel(GL_SMOOTH);

    //All color and material stuffs go here
    glEnable(GL_LIGHTING); 
    glEnable(GL_LIGHT0); 
    glEnable(GL_NORMALIZE);   // normalize normals 

    glEnable(GL_COLOR_MATERIAL); 
    glColorMaterial(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE); 

    // set up the parameters for lighting 
    GLfloat light_ambient[] = {0,0,0,1}; 
    GLfloat light_diffuse[] = {.6,.6,.6,1};
    GLfloat light_specular[] = {1,1,1,1}; 
    GLfloat light_pos[] = {10,10,10,1}; 

    glLightfv(GL_LIGHT0,GL_AMBIENT, light_ambient); 
    glLightfv(GL_LIGHT0, GL_DIFFUSE, light_diffuse); 
    glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular); 

    GLfloat mat_specular[] = {.9, .9, .9,1}; 
    GLfloat mat_shine[] = {10}; 
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, mat_specular); 
    glMaterialfv(GL_FRONT_AND_BACK, GL_SHININESS, mat_shine); 
    //color specs ends ////////////////////////////////////////

    //glPolygonMode(GL_FRONT_AND_BACK,GL_LINE); // comment this line to enable polygon shades

    glMatrixMode(GL_PROJECTION); 
    glLoadIdentity(); 
    gluPerspective(90, 1, 1, 100); 

    glMatrixMode(GL_MODELVIEW); 
    glLoadIdentity(); 

    glLightfv(GL_LIGHT0, GL_POSITION, light_pos); 

    gluLookAt(0,0,30,0,0,0,0,1,0); 

    glRotatef(x_angle, 0, 1,0); // this is just for mouse handling
    glRotatef(y_angle, 1,0,0); // this is just for mouse handling
    glScalef(scale_size, scale_size, scale_size); // for zooming effect

    draw_coordinate();

    //Drawing using VBO starts here
    glTranslatef(walk*sin(M_PI*turn/180),0,walk*cos(M_PI*turn/180));
    glRotatef(turn,0,1,0);
    draw_sphere(3,1,1);

    glDisableClientState(GL_VERTEX_ARRAY); // enable the vertex array on the client side
    glDisableClientState(GL_NORMAL_ARRAY); // enable the normal array on the client side    

    glutSwapBuffers(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:23:52.267

opengl 的 rotate 函数是围绕 (0,0,0) 旋转的函数。您必须将旋转点平移到中心，然后进行旋转。

```
...
glTranslatef(walk*sin(M_PI*turn/180),0,walk*cos(M_PI*turn/180));
glTranslatef(-x_rot,-y_rot,-z_rot);
glRotatef(turn,0,1,0);
glTranslatef(x_rot,y_rot,z_rot);
... 
```

所以在你的情况下`x_rot=walk*sin(M_PI*turn/180)`，`y_rot=0`和`z_rot=walk*cos(M_PI*turn/180)`。上面变成：

```
...
glRotatef(turn,0,1,0);
glTranslatef(x_rot=walk*sin(M_PI*turn/180),0,walk*cos(M_PI*turn/180));
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:41:25.467

如果您的机器人没有在自己的轴上旋转，则将机器人平移到中心，旋转它并再次将其平移回原始位置。保持你的平移、旋转、缩放和绘图在里面

```
glPushMatrix();
........your rotation,translation,scalling,drawing goes here..........
glPopMatrix(); 
```

这些使场景保持不变。如果您不了解这些功能，请看[这里](https://stackoverflow.com/questions/7031842/how-do-glpushmatrix-and-glpopmatrix-keep-the-scene-the-same)。

# iphone - 同时执行两个UIView（不按顺序执行）

> ID：12664255
> 
> 赞同：1
> 
> 时间：2012-09-30T19:19:34.427
> 
> 标签：iphone, multithreading, animation, uiview, block

我在网上冲浪，但我无法回答我遇到的问题。我正在开发一个 iPhone 应用程序。这里的问题：我有树 UIView A、B 和 C。A 和 B 进入 C。当 C 有结果要显示时，我想同时执行 A 和 B。A 和 B 是一个计数器动画，每个需要 5 秒。完成。但我找不到同时显示 A 和 B 的反动画的方法。总是在 A 动画完成时执行 B。我尝试使用块（dispatch_queue_t），但结果相同。有可能做我想做的事吗？

编辑：[代码](http://dl.dropbox.com/u/1348024/Counters.zip)中的问题是计数器（A和B）没有同时执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:05:22.477

类似的东西？

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [self startAnimation];
}

-(void)startAnimation {

   //Creating views
   UIView *v1 = [UIView.alloc initWithFrame:CGRectMake(10, 10, 40, 40)];
   v1.backgroundColor = [UIColor blueColor];
   [self.view addSubview:v1];

   UIView *v2 = [UIView.alloc initWithFrame:CGRectMake(140, 240, 40, 40)];
   v2.backgroundColor = [UIColor redColor];
   [self.view addSubview:v2];

    //Animating views
    [UIView animateWithDuration:0.5
                 animations:^{
                     v1.frame = CGRectMake(10, 240, 40, 40);
                 }];

    [UIView animateWithDuration:0.5
                 animations:^{
                     v2.frame = CGRectMake(140, 10, 40, 40);
                 }];
} 
```

# bash - awk 函数打印..... -bash？

> ID：12664256
> 
> 赞同：0
> 
> 时间：2012-09-30T19:19:37.410
> 
> 标签：bash, awk

出于某种原因，我试图弄清楚我正在从这个脚本中打印出“-bash”：

```
cat sample | awk -v al=$0 -F"|" '{n = split(al, a, "|")} {print a[1]}' 
```

“样本”文件包含 psv“管道分隔值”，如 a|b|c|d|e|f|d。
我的意图是使用数组。
上述脚本的结果是一个长度为 1 的数组，其中包含的唯一项是“-bash”，即 shell 的名称。
默认情况下，$0 指向当前使用的程序，但据我所知，在 awk 脚本中，$0 参数“应该”指向正在读取的整行。

因为我想了解问题的确切位置是“我是 bash/awk 的新手”，你能指出以下哪些步骤失败了吗？
1-“连接”示例文件并将其作为 awk 脚本的输入传递
2-定义一个名为 'al' 的变量，其中包含在 'sample' 中的每一行作为值
3-定义一个管道“|” 作为字段分隔符
4-定义一个动作，将“al”的值拆分为一个名为“a”的数组，使用管道作为拆分器
5-定义另一个动作，在这种情况下，它只是打印数组中的第一项

有什么建议吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T22:27:25.067

运行前`$0`被shell扩展，`awk`是`$0`当前程序的名称，即`bash`，`-`开头的 是因为bash是通过*login(1)*运行的（见`exec`内置的描述`man bash`）

您需要引用，`$0`以便外壳不会扩展它，并且 awk 会看到它：

```
awk -v 'al=$0' -F"|" '{n = split(al, a, "|")} {print a[1]}' sample 
```

但是变量赋值是在读取任何数据*之前*处理的，因此在程序开始时将变量`al`设置为字符串“$0”，而*不是*设置`al`为每个输入记录的内容。

如果您想要记录，只需这样说而不是使用变量：

```
awk -F"|" '{n = split($0, a, "|")} {print a[1]}' sample 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:24:54.293

通过`-v a1=$0`，您将设置`a1`为当前程序的名称，即 bash。请参阅[man bash](http://linux.die.net/man/1/bash)中的*参数*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:24:41.127

呃...

```
awk -F'|' '{ print $1 }' sample 
```

# algorithm - 为二叉树创建祖先矩阵

> ID：12664257
> 
> 赞同：1
> 
> 时间：2012-09-30T19:20:03.663
> 
> 标签：algorithm, tree

```
 1
   /  \
  2    3
 / \   / \
4   5 6   7 
```

对于给定的二叉树，我们需要创建一个矩阵 a[7][7] 满足像 a[2][1]=1 这样的祖先属性，因为 1 是 2 ....

我通过使用额外的空间来解决它一个数组......我想出的解决方案是

```
int a[n][n]={0};
void updatematrix(int a[][n],struct node *root,int temp[],int index){

if(root == NULL)
  return ;
int i;

for(i=0;i< index;i++)
  a[root->data][temp[i]]=1;
temp[index]=root->data;

updatematrix(a,root->left,temp,index+1);
updatematrix(a,root->right,temp,index+1);
} 
```

我的解决方案有什么错误吗？我们可以就地这样做吗？？？（我的意思是不使用临时数组）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:49:59.223

`temp`包含从根到当前节点的路径，即沿着树向下到达当前节点所访问的节点集合。

如果您在每个节点中都有一个父指针（但我猜没有），您可以跟随这些指针并向上遍历树以遍历与`temp`. 但这会使用更多内存。

您还可以多次沿着树走（伪代码）：

```
def updatematrix(a,node):
  if node is null: return
  walkDown(a.data,node.left)
  walkDown(a.data,node.right)
  updatematrix(a,node.left)
  updatematrix(a,node.right)

def walkDown(data,node):
  if node is null: return
  a[node][data] = 1
  walkDown(data,node.left)
  walkDown(data,node.right) 
```

相同的复杂性，但内存访问的模式看起来对缓存不太友好。

# jquery - 由于长时间接受 HTTP 响应，移动应用程序出现错误

> ID：12664260
> 
> 赞同：1
> 
> 时间：2012-09-30T19:20:19.423
> 
> 标签：jquery, ajax, web-services, blackberry

我正在研究 Blackberry WebWorks 中的移动原生应用程序。我的应用程序在 Tomcat 5.5 上运行，它从 IIS 7.5 上运行的 ASMX Web 服务获取数据。

在数据获取操作期间，我在 2 分钟后超时。我无法克服这个问题，请帮助我克服。

我正在设置 ajax 超时，并且在配置文件中我也提到了超时，但我仍然收到超时。

经过长时间的研究，我发现问题出在 ASMX 服务调用上。在特定的 ASMX 服务方法中，由于涉及大量计算，该方法平均需要 4 分钟才能响应结果。由于 HTTP 响应长时间没有返回调用应用程序超时，我的 ASMX Web 服务工作正常。

我用 Tomcat 5.5 的 server.xml 文件尝试了一切，包括所有可能克服这个问题的属性，但没有结果。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:13:52.630

您需要告诉我们更多有关“巨大计算”的信息以获得具体帮助。根据计算的性质，可以应用一些策略：

1.  如果客户端正在发送大量工作负载，请将其分解为可以在两分钟内得到满足的较小请求。

2.  在响应格式中包含某种无操作操作，如果完整响应尚未准备好，则让 ASMX 服务定期发送无操作操作。这将在长时间计算继续时保持连接有效。但是，这需要对客户端和 ASMX 服务之间的所有缓冲有相当深入的了解，因为您不希望无操作操作进行缓冲，因为您专门使用它来保持连接打开。这可能很难理解。

3.  将单个请求/响应转换为两个请求/响应对，一个用于“开始”，一个用于“检查”。'start' API 开始计算，并返回某种 ID，客户端可以使用它来调用 'check' API 以查看计算是否完成，并获取结果。

# java - 如果针对 32 位和 64 位平台，哪个更快，int 或 long

> ID：12664267
> 
> 赞同：1
> 
> 时间：2012-09-30T19:21:21.250
> 
> 标签：java, android

> **可能重复：**
> [在 64 位 java 中使用 longs 而不是 ints 会受益](https://stackoverflow.com/questions/6903235/will-using-longs-instead-of-ints-benefit-in-64bit-java)

我有一个需要尽可能优化的算法。公认的观点是，当原始操作类型与 CPU 的“位数”相同时，整数数学运算速度最快。如果我的目标是 32 位和 64 位平台，int 和 long 之间是否存在性能差异？

# c# - Google API/OAUTH/NativeApplicationClient/OAuth2Authenticator > 注销？

> ID：12664272
> 
> 赞同：1
> 
> 时间：2012-09-30T19:21:27.513
> 
> 标签：c#, google-api, oauth-2.0, devdefined-oauth

我正在构建一个桌面应用程序，该应用程序使用 OATH 按照此线程中的方案连接到 Googles API：

[用于 dotnet 的 Google API v3；使用带有 API 密钥的日历](https://stackoverflow.com/questions/8537681/google-api-v3-for-dotnet-using-the-calendar-with-an-api-key)

一切正常。我已经构建了一个显示 WebBrowser 以收集 authCode 的表单。

但是如何实现“注销”？找不到任何 API 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:58:44.477

尼尔斯，你可以做以下事情。

1.  通过转到此 URL (https://accounts.google.com/Logout?hl=en)，在 WebBrowser 控件中将用户从 Google 注销
2.  [您可以通过调用https://accounts.google.com/o/oauth2/revoke?token=](https://accounts.google.com/o/oauth2/revoke?token=) {token}来撤销用户令牌
3.  您可以通过调用进一步从网络浏览器中删除 cookie 等。您可以通过调用 System.Diagnostics.Process.Start("rundll32.exe","InetCpl.cpl,ClearMyTracksByProcess 2") 来删除 cookie

# html - 无需下载即可获取页面大小

> ID：12664277
> 
> 赞同：1
> 
> 时间：2012-09-30T19:22:00.637
> 
> 标签：html, size

虽然我不认为这是可能的，但它是一种无需下载即可获得页面大小的方法吗？（这看起来很愚蠢，但无论如何我想在这里问它）

您可以卷曲页面并获取它的大小，但我不想对页面进行 dl，而且带有 text/html 的标题中也没有什么有趣的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:24:22.287

`Content-Length`从页眉查询属性。

[如超文本传输​​协议文档第 14.13 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13)所定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:25:23.263

使用[`HEAD`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)HTTP 方法而不是`GET`：

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。响应 HEAD 请求的 HTTP 标头中包含的元信息应该与响应 GET 请求发送的信息相同。**此方法可用于获取有关请求所隐含的实体的元信息，而无需传输实体主体本身。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T21:58:31.940

即使发出 HEAD 请求也不能保证您将在输出中获得内容长度。自己检查一下：

```
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD'
        )
    )
);

var_dump(get_headers("http://www.stackoverflow.com", 1));
var_dump(get_headers("http://www.google.com", 1));
var_dump(get_headers("http://php.net/", 1)); 
```

我认为最好的选择仍然是使用 curl 去 dl 页面，然后查看页面的大小（纯文本）是多少

# validation - 带有composed_of模型和验证的Rails 3出现错误“NoMethodError：未定义的方法`marked_for_destruction？'”

> ID：12664280
> 
> 赞同：2
> 
> 时间：2012-09-30T19:22:24.433
> 
> 标签：validation, activerecord, ruby-on-rails-3.2

我试图添加自定义验证，如在[Rails 3 中编写的，使用组合模型和验证](https://stackoverflow.com/questions/6707636/rails-3-with-composed-of-model-and-validation)，但我收到奇怪的错误：“NoMethodError: undefined method `marked_for_destruction?' 为了钱”

而且我不明白出了什么问题。

你能帮助我吗？

模型：

```
# == Schema Information
#
# Table name: transactions
#
#  id                  :integer          not null, primary key
#  text                :string(255)
#  amount_cents        :integer          default(0), not null
#  ...
class Transaction < ActiveRecord::Base
  attr_accessible :text, :amount, ...

  validates :text, :length => { :maximum => 255 }

  composed_of :amount, :class_name => "Money", :mapping => %w(amount_cents cents),
              :converter => Proc.new { |value| Money.to_money(value) }
  validates :amount, :presence => true, :numericality => { :greater_than_or_equal_to  => 0 }
  validates_associated :amount
  ...
end

class Money
  attr_reader :cents

  def initialize(cents)
    @cents = cents
  end

  class << self

    def to_money(str_money)
      cents = (str_money.to_f * 100).to_i
      Money.new(cents)
    end

    def to_money?(str_money)
      /\A\d+(\.\d+)?\z/ == str_money.to_s
    end

  end

  def ==(value)
    @cents == self.class.to_money(value).cents
  end

  def to_i
    @cents
  end

  def to_f
    @cents.to_f
  end

  def to_s
    return nil if @cents.nil?

    unit, subunit = @cents.abs.divmod(100)

    unit_str       = ""
    subunit_str    = ""
    fraction_str   = ""

    unit_str, subunit_str = unit.to_s, subunit.to_s

    subunit_str.insert(0, '0') while subunit_str.length < 2

    absolute_str =  "#{unit_str}.#{subunit_str}#{fraction_str}"

    absolute_str.tap do |str|
      str.insert(0, "-") if @cents < 0
    end
  end

  def inspect
    "#<Money cents:#{@cents} to_s:#{self.to_s}>"
  end  
end 
```

错误：

```
1.9.3p194 :001 > t = Transaction.new
 => #<Transaction id: nil, text: nil, amount_cents: 0, date: nil, created_at: nil, updated_at: nil, transaction_type_id: nil, account_id: nil, user_id: nil, trans_account_id: nil, trans_amount_cents: 0> 
1.9.3p194 :002 > t.amount = 100
 => 100 
1.9.3p194 :003 > t.valid?
NoMethodError: undefined method `marked_for_destruction?' for #<Money cents:10000 to_s:100.00>
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/validations/associated.rb:5:in `block in validate_each'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/validations/associated.rb:5:in `reject'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/validations/associated.rb:5:in `validate_each'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validator.rb:153:in `block in validate'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validator.rb:150:in `each'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validator.rb:150:in `validate'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:310:in `_callback_before_21'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:462:in `_run__74709952__validate__911291598__callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_validate_callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validations.rb:227:in `run_validations!'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validations/callbacks.rb:53:in `block in run_validations!'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__74709952__validation__911291598__callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_validation_callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activemodel-3.2.8/lib/active_model/validations.rb:194:in `valid?'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/validations.rb:69:in `valid?'
    from (irb):3
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /home/alexvs/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require' 
```

# java - Java 语句无法执行我的查询

> ID：12664284
> 
> 赞同：2
> 
> 时间：2012-09-30T19:22:36.243
> 
> 标签：java, sql-server, insert, odbc

当我尝试在 Java 中执行查询时遇到问题。当我尝试在 SQL 中将对象添加到我的数据库时，它给了我一个错误，说该指令不发送结果集。当我在 sql server 中执行查询时，它工作正常并插入对象。请帮我。

```
public void addAlbum(String title, double price, String genre, String date, String home, String image) {

int number = getData().size();

boolean isThere = false;    

Statement statement;

for(int i = 0; i < getData().size();i++){

    if(getData().get(i).getTitle().equals(title)){

        isThere = true;

    }

}

if(!isThere){

    try{

        statement = connexion.createStatement();
        String query = "use albums INSERT INTO dbo.Album(Album.artist_number, title, price, genre, date, home, image) VALUES(" + number + ", '" + title + "', " + price + ", '" + genre + "', '" + date + "', '" + home + "', '" + image + "')";

        statement.executeQuery(query);

        getData().add(new Album(String.valueOf(number),title, price, genre, date, home));

        fireTableRowsInserted(getData().size() -1, getData().size() -1);

    }catch(SQLException e){

        JOptionPane.showMessageDialog(null,
                "Error "
                        + e.getMessage(), "Result",
                JOptionPane.ERROR_MESSAGE);

    }       

}else{

    JOptionPane.showMessageDialog(null,
            "There is already an album with this name", "Result",
            JOptionPane.ERROR_MESSAGE);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:25:02.650

您需要[`Statement.executeUpdate(String)`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)使用`INSERT`. [`Statement.executeQuery(String)`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)是为`SELECT`。

`PreparedStatement`s 更好、更容易、更安全。[使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

# osgi - javax.imageio.spi.ServiceRegistry 是否在 OSGi 容器中工作？

> ID：12664287
> 
> 赞同：1
> 
> 时间：2012-09-30T19:23:00.267
> 
> 标签：osgi, xdocreport

任何人都可以明确告诉我是否包含调用的代码的 osgi 包

[javax.imageio.spi.ServiceRegistry](http://docs.oracle.com/javase/6/docs/api/javax/imageio/spi/ServiceRegistry.html)

查找服务（在 META-INF\service 中）将找到该服务，如果该服务实现在另一个包中。

我没有找到任何关于此的特定文档。我正在使用 felix osgi 容器。任何指点将不胜感激。

我怀疑它确实有效，而我的问题出在其他地方，因为我注意到在 xdocreport osgi bundle`fr.opensagres.xdocreport.core`中，在[这里](http://code.google.com/p/xdocreport/source/browse/core/fr.opensagres.xdocreport.core/src/main/java/fr/opensagres/xdocreport/core/registry/AbstractRegistry.java?name=xdocreport-0.9.8)`ServiceRegistry`使用了它，但可能并非所有 osgi 容器都支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T22:01:59.800

不，它没有。我认为它只会在系统类加载器中发现服务，所以这对于捆绑包来说毫无用处。

可能有一种解决方法，这篇[文章](http://coderthoughts.blogspot.nl/2011/08/javautilserviceloader-in-osgi.html)很有帮助，尽管我怀疑它是否对您的问题有用。

OSGi 5 也将支持它（'Service Loader Mediator'）。参考实现是[来自 Apache Aries 的 SPI Fly](http://aries.apache.org/modules/spi-fly.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:42:26.587

开箱即用，OSGi 不支持这个，你需要稍微调整你的代码。但是周围有像 Aries SPI Fly 和[Pax-Swissbox](http://team.ops4j.org/wiki/display/PAXSB/Pax+Swissbox)这样的工具支持您使用这些 SPI“服务”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:30:56.647

嗨，谢谢大家的回答。我认为 ServiceRegistry 将在 osgi 容器中工作以实例化服务，但只能在同一个类加载器中。这可以通过使用[osgi 片段](http://wiki.osgi.org/wiki/Fragment)来促进。因此，只要实现者位于将其 Fragment-host 定义为包含具有 ServiceRegistry 查找代码的类的包的片段中，那么 ServiceRegistry 就可以工作。

这就是为什么它在我链接到的 xdocreport 代码中工作的原因。在这种情况下，ServiceLoader 代码是从[fr.opensagres.xdocreport.core](http://code.google.com/p/xdocreport/source/browse/core/fr.opensagres.xdocreport.core/src/main/java/fr/opensagres/xdocreport/core/registry/AbstractRegistry.java?name=xdocreport-0.9.8)（一个包）中的一个抽象类调用的，该类由 fr.opensagres.xdocreport.document 中的具体类扩展（因此 ServiceRegistry 调用在 fr.opensagres 中[。](http://code.google.com/p/xdocreport/source/browse/document/fr.opensagres.xdocreport.document/src/main/java/fr/opensagres/xdocreport/document/registry/XDocReportRegistry.java?name=xdocreport-0.9.8) xdocreport.document）。服务实现在[fr.opensagres.xdocreport.document.docx](http://code.google.com/p/xdocreport/source/browse/document/fr.opensagres.xdocreport.document.docx/src/main/java/fr/opensagres/xdocreport/document/docx/discovery/DocxDocumentHandlerFactoryDiscovery.java?name=xdocreport-0.9.8)中。已将其[frament-host 定义为 fr.opensagres.xdocreport.document 的](http://code.google.com/p/xdocreport/source/browse/document/fr.opensagres.xdocreport.document.docx/TEMPLATE.MF?name=xdocreport-0.9.8)片段。

所以 fr.opensagres.xdocreport.document 和 fr.opensagres.xdocreport.document.docx 使用相同的类加载器......所以它工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:10:10.603

在 XDocReport 中，我们希望有一个**模块化的 API 报告**来管理：

*   任何**文档类型**（docx、odt、pptx ...）。如果您愿意，您可以实现自己的文档类型并通过 javax.imageio.spi.ServiceRegistry 注册它。
*   任何模板引擎类型（Freemarker、velocity...）。如果您愿意，您可以实现自己的模板类型并通过 javax.imageio.spi.ServiceRegistry 注册它。
*   任何转换器类型（带有 POI+iText 的 docx->pdf 转换器，带有 POI 的 docx->xhtml 转换器，带有 ODFDOM+iText 的 odt->pdf 转换器，带有 ODFDOM 的 odt->xhtml 转换器......）。如果您愿意，您可以实现自己的转换器并通过 javax.imageio.spi.ServiceRegistry 注册它（例如：使用 docx4j+FOP 实现 docx->pdf 转换器，使用 JODConverter 实现 docx->pdf 转换器等）。

正如您所了解的，**javax.imageio.spi.ServiceRegistry 在 OSGi 上下文中工作，**因为**我们使用 OSGi 片段**（共享相同的类加载器）而不是 OSGi 包。我们选择使用相同的代码来管理非 OSGi 和 OSGi 上下文。

我们决定使用 OSGi 片段而不是 OSGi 捆绑包，因为：

1.  如果我们使用 OSGi 包，我们需要开发一个 OSGi 激活器来注册我们的发现（在这个上下文包中，javax.imageio.spi.ServiceRegistry 不起作用）。
2.  如果我们使用 OSGi 包，您需要为每个注册发现的包配置启动级别。

使用 OSGi 片段的唯一缺点是您不能在您的 OSGi 容器中使用多个版本的 XDocReport 模板、转换器、文档。但它是 XDocReport 的一个好功能吗？

您不能将**javax.imageio.spi.ServiceRegistry**与 JDK5（和 JDK6）一起使用。JDK6 提供了**java.util.ServiceLoader**，它是作为 javax.imageio.spi.ServiceRegistry 注册服务的新类。

在 XDocReport 中我们希望支持 JDK5+JDK6。XDocReport 0.9.8 仅使用**javax.imageio.spi.ServiceRegistry**。但似乎 Google App Engine 禁止使用此类（请参阅我们的[问题 132](http://code.google.com/p/xdocreport/issues/detail?id=132)）。所以我为 XDocReport 1.0.0 [JDKServiceLoader](http://code.google.com/p/xdocreport/source/browse/core/fr.opensagres.xdocreport.core/src/main/java/fr/opensagres/xdocreport/core/internal/JDKServiceLoader.java)开发了 Java 反射来管理JDK5 和 JDK6 的**java.util.ServiceLoader** 和**javax.imageio.spi.ServiceRegistry**。

问候安吉洛

# php - 通过 Ajax 填充：JSON 对象与回显 HTML？我有一个 <select>元素，我需要用从 Ajax 调用中获得的值填充该元素。我正在争论是让 Ajax 返回一个正确的键/值 JSON 对象，还是让它回显一堆 <option>元素。选项需要在选择中按字母顺序显示。我觉得使用 JSON 对象是正确的做法。但是当返回该对象时，我必须通过名称而不是值对 JSON 对象进行排序的过程。例如：我的 PHP 返回以下 JSON 对象响应： {"21":"Bandana ID：12664292 赞同：1 时间：2012-09-30T19:24:02.930 标签：php, javascript, html, ajax, json 回答 #1 赞同：4 时间：2012-09-30T19:27:49.237 使用 JSON 数组而不是对象。 [{"key": "21", "value":"Bandana"},{"key":"18", "value":"Baseball"},{"key": "19", "value":"Cowboy"},{"key":"20","value":"Trucker"}] 对象的属性名称不按任何特定顺序维护。也就是说，当您使用 JavaScriptfor ... in循环遍历对象的属性名称时，没有定义顺序。运行时系统可以按任何顺序为您提供名称；我认为它甚至不一定是可重复的。 回答 #2 赞同：1 时间：2012-09-30T19:42:26.757 我更喜欢带有数组数组的json。第一个元素作为键，第二个作为值。 [[21,"Bandana"],[18,"Baseball],[19,"Cowboy"],[20,"Trucker"]]</option></select>

# algorithm - 树遍历。订购、预购、后购

> ID：12664293
> 
> 赞同：4
> 
> 时间：2012-09-30T19:24:05.267
> 
> 标签：algorithm, tree, binary-tree

我理解树遍历和实现背后的想法，但这是问题所在。为什么我们都需要它们？

现在我只知道解析数学表达式时使用了前序遍历。从维基百科我还读到：

*   中序遍历在二叉搜索树上使用中序遍历特别常见，因为根据设置二叉搜索树的比较器（因此得名），这将按顺序从底层集合返回值。前序遍历
*   在将值插入新树的同时按前序遍历树是制作二叉搜索树的完整副本的常用方法。还可以使用前序遍历从表达式树中获取前缀表达式（波兰表示法）：按顺序遍历表达式树。（我已经说过）

但这些例子相当模糊。任何人都可以更深入地描述这一点。尤其是例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:54:08.630

考虑在目录树上做一些文件操作的问题。当操作是删除文件时，则需要在删除目录本身之前清空每个目录，因此需要进行后序遍历。相比之下，在复制层次结构时，需要先复制目录，因此需要进行前序遍历。

老实说，我看不出 BST 中序遍历有什么模糊之处。当您想在用户界面的屏幕上显示 BST 的内容时，您希望按键按顺序显示，不是吗？（如果你不这样做，那么使用 BST 可能不是一个好主意，因为哈希表通常更快。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:02:12.290

我能想到很多例子。以性能为例。

想象一下现实生活中的一棵树。它有一个茎，茎有3个分支。这些内部分支中的每一个都有 3 个外部分支。所以它有9个外部分支。

3 个内部分支之一死了，随后它的 3 个外部分支也死了。

现在你想剪掉所有的枯枝。这棵树有 13 个分支（1 个茎 3 个内部和 9 个外部）。您是否必须单独查看它们以确定是否要切割它们？不

现在想象有一个机器人想要砍掉所有枯死的树枝。在它的软件麸皮中，它看着茎..它死了吗？不，然后它会查看第一个内部分支是否已死？是的！然后它会切断那个分支，同时它的外部分支也将被切断。

而不是做出 13 个选择，它只需要做出 10 个。（茎、2 个健康的内部分支、它们的 6 个外部分支和生病的内部分支）

# python - python中的ntp客户端

> ID：12664295
> 
> 赞同：19
> 
> 时间：2012-09-30T19:24:24.620
> 
> 标签：python

我在 python 中编写了一个 ntp 客户端来查询时间服务器并显示时间，程序执行但没有给我任何结果。我正在使用python的2.7.3集成开发环境，我的操作系统是Windows 7。代码如下：

```
# File: Ntpclient.py
from socket import AF_INET, SOCK_DGRAM
import sys
import socket
import struct, time

# # Set the socket parameters 

host = "pool.ntp.org"
port = 123
buf = 1024
address = (host,port)
msg = 'time'

# reference time (in seconds since 1900-01-01 00:00:00)
TIME1970 = 2208988800L # 1970-01-01 00:00:00

# connect to server
client = socket.socket( AF_INET, SOCK_DGRAM)
client.sendto(msg, address)
msg, address = client.recvfrom( buf )

t = struct.unpack( "!12I", data )[10]
t -= TIME1970
print "\tTime=%s" % time.ctime(t) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-30T20:13:47.577

使用[ntplib](http://pypi.python.org/pypi/ntplib/)：

以下应该适用于 Python 2 和 3：

```
import ntplib
from time import ctime
c = ntplib.NTPClient()
response = c.request('pool.ntp.org')
print(ctime(response.tx_time)) 
```

输出：

```
Fri Jul 28 01:30:53 2017 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-30T12:31:37.753

这是对上述解决方案的修复，它为实现增加了几分之一秒并正确关闭了套接字。因为它实际上只是几行代码，我不想在我的项目中添加另一个依赖项，尽管`ntplib`在大多数情况下可能是要走的路。

```
#!/usr/bin/env python
from contextlib import closing
from socket import socket, AF_INET, SOCK_DGRAM
import struct
import time

NTP_PACKET_FORMAT = "!12I"
NTP_DELTA = 2208988800  # 1970-01-01 00:00:00
NTP_QUERY = b'\x1b' + 47 * b'\0'  

def ntp_time(host="pool.ntp.org", port=123):
    with closing(socket( AF_INET, SOCK_DGRAM)) as s:
        s.sendto(NTP_QUERY, (host, port))
        msg, address = s.recvfrom(1024)
    unpacked = struct.unpack(NTP_PACKET_FORMAT,
                   msg[0:struct.calcsize(NTP_PACKET_FORMAT)])
    return unpacked[10] + float(unpacked[11]) / 2**32 - NTP_DELTA

if __name__ == "__main__":
    print time.ctime(ntp_time()).replace("  ", " ") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T20:03:59.790

它应该是

```
msg = '\x1b' + 47 * '\0' 
```

代替

```
msg = 'time' 
```

但正如 Maksym 所说，您应该改用 ntplib。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:06:47.340

对不起，如果我的回答不能满足您的期望。我认为使用现有的解决方案是有意义的。[ntplib](http://pypi.python.org/pypi/ntplib/)是一个非常好的与 NTP 服务器一起工作的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-01T14:49:22.120

```
msg = '\x1b' + 47 * '\0'
.......
t = struct.unpack( "!12I", msg )[10] 
```

# asp.net - VB.net For Loop 从多个控件中捕获数据（CheckBoxList Items）

> ID：12664296
> 
> 赞同：0
> 
> 时间：2012-09-30T19:24:24.997
> 
> 标签：asp.net, vb.net, for-loop, web-controls

我的页面上有两个 CheckBoxList 控件（`chkListVideoMedia`和`chkListAudioMedia`），我想从中捕获信息并将记录插入到数据库中。我让它适用于其中一个控件，我只需要帮助修改下面的代码以包含第二个 CBL

```
Dim values As New ArrayList()
For counter As Integer = 0 To chkListVideoMedia.Items.Count - 1
    If chkListVideoMedia.Items(counter).Selected Then
        MyTextBox.Text = chkListVideoMedia.Items(counter).Value
        values.Add(newId)
    End If
Next
If values.Count > 0 Then
  For item As Integer = 0 To values.Count - 1
    If item = 0 Then
      MyMedia1.Text = values(item).ToString
    End If
    If item = 1 Then
      MyMedia2.Text = values(item).ToString
    End If
    If item = 2 Then
      MyMedia3.Text = values(item).ToString
    End If
    If item = 3 Then
      MyMedia4.Text = values(item).ToString
    End If
  Next
End If 
```

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:55:40.560

您可以找出哪个 Collection 的 Items 最多，然后检查以确保 count 不大于每个 Collection 中的最大 Items。像这样的东西。

```
Dim values As New ArrayList()
Dim counter As Integer
If chkListVideoMedia.Items.Count > chkListAudioMedia.Items.Count Then
    counter = chkListVideoMedia.Items.Count - 1
Else
    counter = chkListAudioMedia.Items.Count - 1
End If
For x = 0 To counter
    If Not (counter > chkListVideoMedia.Items.Count - 1) Then
        'Do your work here
    End If
    If Not (counter > chkListAudioMedia.Items.Count - 1) Then
        'Do your work here
    End If
Next 
```

# asp.net - 如何跟踪有关 System.Web.UI.PageTheme.SetStyleSheet() 错误的生产错误

> ID：12664299
> 
> 赞同：0
> 
> 时间：2012-09-30T19:24:48.047
> 
> 标签：asp.net, webforms

我的生产 asp.net 4.0 服务器（在调试模式下运行）抛出了很多这些错误，我想不出一种方法来追踪它。我已经搜索了我所有的***头部***标签，它们似乎都有***runat="server"***。我的堆栈跟踪在下面，并没有告诉我 aspx 页面。遗憾的是，这是一个网络项目，但不确定这是否重要。

我试图在我的开发系统上解决这些错误，但没有成功。我在我的服务器上扔了很多东西。

```
Using themed css files requires a header control on the page. (e.g. <head runat="server" />).

at System.Web.UI.PageTheme.SetStyleSheet() 
at System.Web.UI.Page.OnInit(EventArgs e) 
at System.Web.UI.Control.InitRecursive(Control namingContainer) 
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

# python - PYTHONPATH 的问题

> ID：12664300
> 
> 赞同：0
> 
> 时间：2012-09-30T19:24:49.393
> 
> 标签：python, pythonpath

从命令行（Mac OS），当我执行 'echo $PYTHONPATH' 我得到：

```
> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7 
```

如果我然后输入 Python 解释器并执行以下操作：

```
>>> import os
>>> os.environ['PYTHONPATH']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
KeyError: 'PYTHONPATH' 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:27:13.387

您忘记将其导出到环境中，以便子进程可以访问它；它目前只是一个 bash 变量。

```
export PYTHONPATH 
```

# android - 服务的内部绑定器类：静态与否？

> ID：12664301
> 
> 赞同：1
> 
> 时间：2012-09-30T19:24:51.277
> 
> 标签：android, android-service

我有一个带有内部活页夹类的服务：

```
public class MyService extends Service{

private final ServiceB binder = new ServiceB();

   @Override
public IBinder onBind(Intent intent) {
    return binder;
}

  //inner binder class
  class NewsServiceB extends Binder{
         .... 
  } 
```

**我的问题是：这种模式可以吗？或者我应该将 binder 类设为静态，也许对服务使用 Wea ​​kReference**？请注意，每个binder 方法都使用服务的方法，因此使其非静态非常有用，因为代码更简洁即时。

我担心内存泄漏，尽管没有警告显示...

# python - 如何在 Tornado.WebSocket 类中异步运行循环函数？

> ID：12664306
> 
> 赞同：3
> 
> 时间：2012-09-30T19:25:32.707
> 
> 标签：python, asynchronous, tornado

我正在使用 Tornado 运行 WebSocketHandler，并且`while`在 Handler 中有一个循环。这个循环阻塞了一切——这很糟糕。如何使`tailstream()`函数异步（又名非阻塞）？（就像现在一样，`tailstream`阻止一切，甚至无法建立新的 websocket 连接。我需要它为每个 websocket 连接运行。）

```
(...)
class WSHandler(tornado.websocket.WebSocketHandler):
    connections = []
    filters = {}

    def allow_draft76(self):
        # for iOS 5.0 Safari
        return True

    def open(self):
        self.write_message('open')
        self.count = db.my_collection.count() - 1
        self.cursor = coll.find(tailable=True, await_data=True, skip=self.count)
        self.tailstream()

    def on_message(self, message):
        print message

    def on_close(self):
        self.connections.remove(self)
        self.cb.stop()
        print 'connection closed'

    @tornado.web.asynchronous
    def tailstream(self):
        while self.cursor.alive:
            try:
                doc = self.cursor.next()
                self.print2web(doc)

            except StopIteration:
                time.sleep(1)

    (...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:57:40.750

我认为`while`不会阻止它。但是`time.sleep`做！

将其替换为`yield gen.Task(IOLoop.instance().add_timeout, time.time() + 5)`from this [answer](https://stackoverflow.com/questions/11128923/tornado-equivalent-of-delay)。

如果它没有帮助 - 我们可以考虑解决方案的整体结构。

# pdf - 分离 PDF 文件中的图层

> ID：12664307
> 
> 赞同：4
> 
> 时间：2012-09-30T19:25:39.493
> 
> 标签：pdf, ghostscript

有谁知道在 Linux 中使用命令行从 PDF 文件中分离和合并图层（可选内容， [ISO 32000:2008的第 8.11 节）的方法？](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf)

我最感兴趣的是用 Adob​​e Illustrator 创建的文件——如果这离题太远了，我很抱歉。不久前我也将其发布到服务器故障，但没有答案。

[我在这里](http://svn.ghostscript.com/ghostscript/tags/ghostscript-9.00/doc/Develop.htm#PDF_interpreter)遇到了对 cslayer.dev 的引用，但我找不到任何进一步的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:38:32.523

我不知道 Linux（或任何其他平台）中的任何开源命令行实用程序可以分离或合并 PDF 文件中的图层。

我知道的唯一命令行实用程序是闭源付费软件：[**callas pdfToolbox6**](http://www.callassoftware.com/callas/doku.php/en%3adeveloper%3atechnologies)，它有不同的化身：

*   适用于 Windows 和 Mac OS X 的 GUI，
*   适用于 Linux/Solaris 以及 Windows/Mac 的 CLI。

# python - 使用 pycurl 将文件拆分为多个部分以并行下载

> ID：12664314
> 
> 赞同：2
> 
> 时间：2012-09-30T19:26:40.727
> 
> 标签：python, multithreading, download, pycurl

我想在 python 中用 pycurl 下载一个文件。所以我想找到一种方法来分多个部分下载它，从而提高下载速度。我知道理论上它与下载一个部分的文件相同，但同时下载多个部分似乎更快。

# .net - 如果仍然有对它们的引用，是否会清除池化 SQL 连接？

> ID：12664317
> 
> 赞同：2
> 
> 时间：2012-09-30T19:27:04.880
> 
> 标签：.net, sql-server, connection-pooling, sqlconnection

[@usr](https://stackoverflow.com/users/122718/usr)和我[在另一个问题上存在分歧，](https://stackoverflow.com/a/12663933/61164)即 .NET 是否会清除已空闲但仍保持引用的打开连接。

[根据文档](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.80%29.aspx)，我坚持认为，如果物理连接在一段时间内处于空闲状态，那么即使`SQLConnection`对象引用保持不变，它也会在一段时间后被回收。

usr 声称这不会发生，它只回收不再具有引用的连接。他的断言将使连接池变得不可靠，并且会对事务造成严重破坏。

我承认，文档对持有参考的问题含糊不清。

我正在寻找对此的权威答案，而不仅仅是猜测。要么有人实验并证明了这两种情况，要么有人了解内部运作。

那么是哪一个呢？

编辑：

我认为这里的混淆在于“封闭”的术语。情况似乎是，文档将关闭物理连接称为从池中“删除”连接。而“关闭”是指将打开的物理连接释放回池中以供重用。

打开的连接仍然可以中止，但是如果客户端应用程序仍将其保持为打开状态（即客户端应用程序尚未在中止的连接上调用关闭），池化程序是否将其标记为无效，但不确定它是否真的很重要，除了作为池计数的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:45:37.783

我可以 100% 肯定地告诉您，连接在释放之前**不会**返回到池中。我有一个会话创建一个临时表，并在等待用户输入时将其挂起。用户在 6 分钟后返回，按下一个按钮，它继续**使用相同的*SPID***，并且临时表的生活继续进行。

应用逻辑，这是有道理的，因为你能想象如果仅仅因为你已经闲置了 X 分钟就失去了 SPID 会造成多大的破坏吗？您是否应该继续使用命令“ping”SQL Server 以使其保持活动状态？（*这将是疯狂的*）

* * *

您似乎混淆了两个概念。当连接关闭时，它会返回到池中。如果超出范围，则隐式关闭 -> 返回池。**对“空闲”的引用是指池中**的连接何时空闲，而不是当它被主动引用*且未关闭时*。持有的连接甚至不在池中，无法进行任何类型的清理。从池中释放资源是有道理的，因为一个网络应用程序可以轻松地爆发到 100 个连接，然后在接下来的几个月里保持大约 20 个左右的活动并发连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:49:19.883

> .NET 是否会清除已空闲的打开连接，但仍保持持有的引用

“持有的参考”在这里无关紧要，重点是“开放”。要正确回收连接，您需要`Dispose()`或`Close()`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:47:34.750

我刚刚运行了以下程序：

```
 var conn = new SqlConnection("...");
        conn.Open();
        conn.ExecuteNonQuery("select null");
        Thread.Sleep(TimeSpan.FromMinutes(11));
        conn.ExecuteNonQuery("select null"); 
```

它成功运行（使用自定义辅助方法，因此您无法直接运行它）。

这当然不能证明任何事情（只有在它没有正确运行的情况下）。反射器显示池在 6.5 分钟后第一次清理，此后每 30 秒清理一次：

```
private Timer CreatePruningTimer()
{
    return new Timer(new TimerCallback(this.PruneConnectionPoolGroups), null, 240000, 30000);
} 
```

所以测试应该已经暴露了问题。

现在，文档中的句子并不是特别清楚。它没有提到 GC 甚至对象引用（在你的问题中你说它有，但它没有）。

> 连接池程序会定期扫描连接池以查找未通过 Close 或 Dispose 关闭的未使用连接，并回收它找到的那些。如果您的应用程序没有显式关闭或释放其连接，连接池可能需要很长时间才能回收它们，因此最好确保您在连接中显式调用 Close 和 Dispose。

我不相信它。用贝叶斯术语来说，Microsoft 文档是强有力的证据，但如果有强有力的反证，人们可能会得出相反的结论。

我有以下证据表明打开的连接不会无缘无故关闭：

1.  这将注入无法预防的随机故障（仅通过重试）
2.  它会中止正常的交易
3.  这将使长时间运行的交易变得不可能
4.  我看不出为什么会出现这种行为的原因
5.  文档中的句子可以按以下方式解释：池定期返回尚未关闭但其相应 SqlConnection 对象已被 GC 处理的连接（通过使用 Wea​​kReference 或其他方式检测）。我猜微软文档作者的意思是，或者不理解这个问题（似是而非！）
6.  测试没有证明问题
7.  SSMS 如何运行长达一小时的查询？SSMS 应受到同样的限制

# arrays - MATLAB 从 for 循环创建一个数组

> ID：12664321
> 
> 赞同：2
> 
> 时间：2012-09-30T19:27:21.617
> 
> 标签：arrays, matlab, loops, for-loop

我必须从 for 循环的输出创建一个数组。例如，如果 for 循环是：

```
for i=[0.01, 0.02, 0.05]
    exp(i)
end 
```

我应该创建一个数组，例如

```
[exp(0.01) exp(0.02) exp(0.03)] 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:34:56.453

几乎就像你一样:-)

```
V= [0.1 0.2 0.3]
R=exp(V) 
```

创建要为其计算函数的值向量并将其作为参数传递。

# css - 如何在允许滚动的同时将 div 对齐到底部？

> ID：12664322
> 
> 赞同：0
> 
> 时间：2012-09-30T19:27:27.027
> 
> 标签：css, layout

`position: absolute;`我有一个聊天框，用和固定在 div 的底部`bottom: 0px;`。然而，这个问题是它不可滚动。我将如何做到这一点？

-编辑-它在这个页面的底部：[http ://www.novaember.com/servers/minecraft/](http://www.novaember.com/servers/minecraft/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:44:02.770

我在你给的页面上尝试了一些东西。`height: 285px`我想我通过添加and`overflow-y: scroll`得到了你的要求`#webchat-messages`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:15:25.287

我们要强制 div 接受其父 div 的高度。使用`top:0`应该允许它：

```
position: absolute;
top: 0;
bottom: 0;
overflow-y: scroll; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:30:38.570

你可以这样做：

```
#chatdiv {
   overflow-y: scroll;
} 
```

# javascript - 无法弄清楚为什么在重新提交时会清除表单错误消息

> ID：12664326
> 
> 赞同：1
> 
> 时间：2012-09-30T19:28:13.393
> 
> 标签：javascript, forms, validation

第一次提交时出现错误消息。为了清除正确值的错误消息，我创建了一个循环来清除这些标签上的任何跨度，并认为所有消息都将被清除，然后再次运行错误检查并重新应用错误消息。

即使我在循环中返回 false 以清除错误消息，它也只会刷新页面。并且代码似乎没有超过这一点并通过标准错误检查。

```
var label = document.getElementsByTagName("label");
var span = document.getElementsByTagName("span");
var spanMatch = false;

//attempting to remove any span tags once it's resubmitted 
    for (var k=0; k<label.length; k++) {

    if (label.childNodes = span[1]) {
        label.removeChild.span[1];
        spanMatch = true;       
        }
    }       
    if (spanMatch) {return false;}

    var match = false;

//created a single loop so it would check all without return false until all were checked
    for (var i=0; i<1; i++) {

        if (!loanVal.match(regexOne)) {         
        wholeError(obj.loanAmt.name);
        match = true;   
        }
        if (!interestVal.match(regexTwo)){
        floatError(obj.interest.name);
        match = true;   
        }

        if (!periodVal.match(regexOne)) {           
        wholeError(obj.period.name);
        match = true;   
        }

    }
    if (match) {return false;}

    else {alert("Something is right");}  
} 
```

我希望有足够的代码来说明问题出在哪里。这是在线解决此问题的链接：[http ://russet.wccnet.edu/~sfloyd/inp271/php-js-project/loan-calc/index.php](http://russet.wccnet.edu/~sfloyd/inp271/php-js-project/loan-calc/index.php)

谢谢

# c++ - 如何使用 curl (C++ 或 D) 下载带有文件名的文件

> ID：12664327
> 
> 赞同：0
> 
> 时间：2012-09-30T19:28:16.607
> 
> 标签：c++, curl, d

> **可能重复：**
> [是否可以从 http 标头中找到文件名](https://stackoverflow.com/questions/12505661/is-to-possible-to-find-filename-from-http-headers)

我目前正在尝试在 D 中使用 curl 下载文件。使用 curl 可以正常工作，但它需要我指定文件名而不是使用服务器上的文件名。我发现了很多类似的帖子，但它们都使用 php。有没有办法使用 C 或 D 来做到这一点？

# java - 使用 Spring MVC 显示图像和文本（来自数据库）

> ID：12664332
> 
> 赞同：2
> 
> 时间：2012-09-30T19:28:49.287
> 
> 标签：java, image, spring, jsp

我想使用 Spring MVC 3 显示图像**和**字符串。两者都是我使用 Hibernate 从数据库中检索的 POJO 的实例变量。

```
@Entity
@Table(name = "document")
public class Document {

    //id        

    @Column(name = "name")
    private String name;  // the String

    @Basic(fetch = FetchType.LAZY)
    @Column(name="content")
    private byte [] image;
//getters setters 
```

我想使用 Spring MVC 3 在 .jsp 页面上显示图像并在其**旁边**显示字符串。目前我只能通过流式传输并将字符串打印到控制台来显示**图片**，但这不是我想要的。（当然我可以显示字符串，但如果我显示字符串，那么我就无法显示图像。）**我想**在同一页面上显示两者，彼此相邻。

```
@RequestMapping(value = "/displayDocument", method = RequestMethod.POST)
    public void displayDocument(@RequestParam("documentId") String documentId, HttpServletResponse response) {

        Document doc = documentService.get(Long.valueOf(documentId));

        System.out.println(doc.getName());

        if (doc.getImage() != null) {
            response.setContentType("image/jpg");
            try {
                response.getOutputStream().write(doc.getImage());
                response.getOutputStream().flush();
                response.getOutputStream().close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    } 
```

我不想相信没有任何聪明的解决方案可以实现这一目标......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:43:35.150

我认为您对 http 协议的工作方式有点误解。图像总是由网络浏览器在单独的请求中自动获取（这也适用于`<script>`、`<style>`和`<img>`其他一些标签）。所以基本上，您想要构建一个显示名称的 JSP 页面，以及

`<img src="/viewimage?id=${theDocumentId}"/>`.

viewimage 可能是您提供图像的 servlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:10:02.467

我对您想要在这里完成的事情感到有些困惑，因为您的问题首先是指 JSP 页面，但您正在将图像直接写入控制器中的输出流。

我使用 Spring MVC 处理此类事情的方式是，在对该“文档”的主页请求时，将文档的属性添加到模型中，以便您的视图层可以输出它，并在其中包含一个链接将包含 documentID 的 HTML 传递给控制器​​，该控制器可以呈现图像以响应请求（因为您无法在 JSP 页面的输出中准确呈现图像 - HTML 文档）。

看起来你在这后半部分的正确轨道上，但没有足够的细节给你关于第一部分的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T11:47:17.783

你的代码是正确的。

在方法上添加`@ResponseBody`注释`displayDocument()`

# boto - 无法让 dynamodb 扫描与 boto 一起使用

> ID：12664335
> 
> 赞同：3
> 
> 时间：2012-09-30T19:29:05.817
> 
> 标签：boto, amazon-dynamodb

我正在使用 boto 访问 dynamodb 表。一切都很顺利，直到我尝试执行扫描操作。

在反复搜索 Internet 后，我​​尝试了几种语法，但没有运气：

```
def scanAssets(self, asset):
    results = self.table.scan({('asset', 'EQ', asset)})
         -or-
    results = self.table.scan(scan_filter={'asset':boto.dynamodb.condition.EQ(asset)}) 
```

我正在扫描的属性称为“资产”，资产是一个字符串。

奇怪的是 table.scan 调用总是通过这个函数结束：

```
def dynamize_scan_filter(self, scan_filter):
    """
    Convert a layer2 scan_filter parameter into the
    structure required by Layer1.
    """
    d = None
    if scan_filter:
        d = {}
        for attr_name in scan_filter:
            condition = scan_filter[attr_name]
            d[attr_name] = condition.to_dict()
    return d 
```

我不是 python 专家，但我不知道这是如何工作的。即 scan_filter 需要什么样的结构才能通过这段代码？

再说一次，也许我只是说错了。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:45:50.677

好的，看起来我遇到了导入问题。只需使用：

```
import boto 
```

并指定 boto.dynamodb.condition 不会削减它。我不得不补充：

```
import dynamodb.condition 
```

获取条件类型以获取。我现在的工作代码是：

```
results = self.table.scan(scan_filter={'asset': dynamodb.condition.EQ(asset)}) 
```

并不是说我完全理解为什么，但它现在对我有用。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T11:20:29.897

或者你可以这样做

```
exclusive_start_key = None
while True:
    result_set = self.table.scan(
        asset__eq=asset,  # The scan filter is explicitly given here
        max_page_size=100,  # Number of entries per page
        limit=100,
        # You can divide the table by n segments so that processing can be done parallelly and quickly.
        total_segments=number_of_segments,
        segment=segment,  # Specify which segment you want to process
        exclusive_start_key=exclusive_start_key  # To start for last key seen
    )
    dynamodb_items = map(lambda item: item, result_set)
    # Do something with your item, add it to a list for later processing when you come out of the while loop
    exclusive_start_key = result_set._last_key_seen
    if not exclusive_start_key:
         break 
```

这适用于任何领域。

分段：假设您在 test.py 中有上述脚本

你可以像这样并行运行

```
python test.py --segment=0 --total_segments=4
python test.py --segment=1 --total_segments=4
python test.py --segment=2 --total_segments=4
python test.py --segment=3 --total_segments=4 
```

在不同的屏幕

# c - 将文件中的信息写入存档文件？

> ID：12664337
> 
> 赞同：0
> 
> 时间：2012-09-30T19:29:16.503
> 
> 标签：c, buffer, printf

我是一个相对不错的 Java 程序员，但对 C 完全陌生。因此，其中一些函数、指针等给我带来了一些麻烦......

我正在尝试创建一个存档文件（我基本上是在重写 ar sys 调用）。我可以 fstat 我想要的文件，将必要的信息存储到我定义的结构中。但现在我的麻烦来了。我想将结构写入存档文件。所以我想我可以`sprintf()`把我的结构放入一个缓冲区，然后只写缓冲区。

```
sprintf(stat_buffer, "%s", file_struct);
write(fd, stat_buffer, 60); 
```

这似乎不起作用。我可以告诉存档文件的大小增加了所需的 60 个字节，但如果我`cat`是文件，它会打印出废话。

此外，尝试写入文件的实际内容也不起作用......

```
 while (iosize = read(fd2, text_buffer, 512) > 0) {
        write(fd, text_buffer, iosize);
        if (iosize == -1) {
            perror("read");
            exit(1);
        }
    } 
```

我敢肯定这是一个相对简单的修复，只是好奇它是什么！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T22:47:41.120

`%s`用于打印字符串。所以冲刺会在遇到`\0`角色时停止。

相反，您可以直接将结构写入文件。`write(fd, &file_struct, sizeof(filestruct));`但是您将无法通过 cat call 阅读它。您仍然可以从另一个 unarchiver 程序读取文件内容并将其存储到结构中`read(fd, &filestruct, sizeof(filestruct));`

无论如何，这个系统并不完美，因为它将使用您的计算机[字节序](http://en.wikipedia.org/wiki/Endianness)存储结构并且不会便携。如果您想正确执行，请查看[ar 文件格式规范](http://en.wikipedia.org/wiki/Ar_%28Unix%29#File_format_details)。

# java - 用于循环的二维数组不存储值java？

> ID：12664344
> 
> 赞同：0
> 
> 时间：2012-09-30T19:30:05.130
> 
> 标签：java, arrays, for-loop

有人可以帮助找出我在这里做错了什么谢谢。:) for 循环中似乎出了问题，因为即使在循环之外我也记不起这些值。所以我不认为它在存储值，但我似乎无法找到问题所在。

```
import java.lang.Math; 
```

类计算器{

```
public static void main(String[]args)
{
    int range = 20;
    int max=(range/2)
    int min=((-range)/2);
    int x = 0;
    int y = 1;
    int j = min;

    int[][] table = new int[range][2];

for(int i = 0 ; i == range ; i++ )
    {

    //X coordinate
    table[i][x] = 2*j;
    System.out.println("X="+table[i][x]);

    //Y coordinate
    table[i][y] = j;
    System.out.println("Y="+table[i][y]);

    j++;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T19:31:47.877

它应该是`for(int i = 0 ; i < range ; i++ )`基本上循环不会执行，因为 i != range 在开始。

# c# - 数据源和代码背后

> ID：12664346
> 
> 赞同：0
> 
> 时间：2012-09-30T19:30:18.270
> 
> 标签：c#, asp.net, objectdatasource

我如何使用在代码后面的 aspx 文件中声明的数据源对象？

```
 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetEntryByID"
        TypeName="Entry">
        <SelectParameters>
            <asp:QueryStringParameter DbType="Guid" Name="id" QueryStringField="ID" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

我的数据源有一个名为“ID”的对象，我在 asp 文件中使用 Eval("ID")，如何在不调用 select 方法并使用该数据源的情况下在代码中获取它？

更多代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="ObjectDataSource1" BorderStyle="None">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <p style="vertical-align: middle; margin: 8px; background-color: #af9b9b; width: 475px;
                        line-height: 30px; padding-left: 20px; padding-right: 20px;">
                        <span style="float: left;">View Count :
                            <%# Eval("View") %>
                        </span>

                        <asp:HyperLink ID="HyperLink2" NavigateUrl='<%# Eval("ID","~/ShowStory.aspx?ID={0}") %>'
                            runat="server"><%# Eval("Title") %></asp:HyperLink></p>
                    <p style="padding: 10px; padding-top: 0;">
                        <%# Eval("Text") %></p>
                    <p style="vertical-align: middle; margin: 8px; background-color: #af9b9b; width: 475px;
                        line-height: 30px; padding-left: 20px; padding-right: 20px;">
                      Author : <asp:Label ID="lblUser" runat="server" Visible=false Text=""><%# Eval("UserID") %></asp:Label><asp:Label
                          ID="lblUser2" runat="server" Text="Label"></asp:Label></p>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

现在我想使用 members.GetUser("ID").UserName 通过 user provider key 获取用户名。并以`lblUser`如何显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:25:39.090

`membership.GetUser(ObjectDataSource1.ID).UserName``ID`如果我理解您的要求，将为您提供与该属性匹配的用户的用户名。

将它分配给`asp:Label`对象将只是

`lblUser.Text = membership.GetUser(ObjectDataSource1.ID).UserName`

# javascript - Sencha Touch 获取可拖动元素位置

> ID：12664350
> 
> 赞同：1
> 
> 时间：2012-09-30T19:30:27.697
> 
> 标签：javascript, extjs, sencha-touch-2, panel, draggable

有没有办法在拖动面板时获取面板的当前垂直位置？

我有这样的事情：

```
Ext.define("App.DashboardDrawer",
{
  extend: 'Ext.Panel',
  xtype: 'dashboarddrawer',

  config: {
    cls: 'w-drawer',
    height: '380px',
    zIndex: 99999,
    id: 'drawer-container',
    docked: 'bottom',
    draggable:{
      direction:'vertical',
      constraint: {
        min: { x: 0, y: 0 },
        max: { x: 0, y: 338 }
      }
    },
    listeners:{
      drag: function(list, idx, target, record, evt) {
        // I'd like to get the current position of the panel here

      }
    },
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:10:05.060

尝试这个。这个对我有用。

```
 Ext.define('Stackoverflow.view.Demo', {
        extend: 'Ext.Panel',
        alias: 'widget.demo',

        config:
        {  
            draggable:{
              direction:'vertical',
              constraint: {
                min: { x: 0, y: 0 },
                max: { x: 0, y: 338 }
              },
              listeners: {
                    drag: function( draggable, evt, offsetX, offsetY, eOpts ) {
                         console.log( offsetX);
                    }
              }}
        }
        }); 
```

# javascript - 输入字段和复选框的条件

> ID：12664352
> 
> 赞同：0
> 
> 时间：2012-09-30T19:30:37.300
> 
> 标签：javascript, class, checkbox, input-field, prop

如何为多个复选框创建条件！

```
Input Field ID =" INsrvOtr "

CheckBox ID = "INsrv" 
```

假设用户有两个选项，要么在输入字段上输入一个值，要么从复选框中选择任何值，但他只能选择两个选项中的“一个”

复选框：

```
 <input id="INsrv" name="INopt" type="checkbox" value="1" />1<br> 
```

输入字段：

```
<input id="OUTsrvOtr" name="OUToptOtr" type="text" value="" onblur="valINP()"/><br><br> 
```

如果用户在输入字段中输入一个值，就会发生这种情况

如果“输入字段”不为空，则所有“复选框”的类将不包含值。

```
<script>
function valINP(){
    $("#INsrv1").prop('class','text')
    $("#INsrvOtr").prop('class','validate[required] text-input text')
    }
}
</script> 
```

或者如果用户选择选中复选框，这将发生

如果未选中“复选框”，则“输入字段”类将不包含值。

```
<script>
$(document).ready(function() {
    $("input[name$='INopt']").click(function() {
    $("#INsrv1").prop('class','validate[minCheckbox[1]] checkbox text')
    $("#INsrvOtr").prop('class','text')
    });
});
</script> 
```

或者如果两者都没有被选中

该脚本将包含这两个：

```
 $("#INsrv").prop('class','validate[minCheckbox[1]] checkbox text')
 $("#INsrvOtr").prop('class','validate[required] text-input text') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:51:01.393

尝试优化您的代码，一些有用的优化选择控件 [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)或[http://api.jquery.com/attribute-contains-prefix-selector/](http://api.jquery.com/attribute-contains-prefix-selector/)

使用类似的东西

$("#id|="INsrv"]').prop('class','')

对不起，如果语法出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:54:15.913

```
// Use this for INsrv([0-9]+)
$('[id^="INsrv"][id!="INsrvOtr"]').each(function() {

});

// Or if you only want to call `prop`
$('[id^="INsrv"][id!="INsrvOtr"]').prop('yourprop', ''); 
```

然后你可以`$('#INsrvOtr')`单独打电话。

# jquery - 轻松滚动到锚点

> ID：12664355
> 
> 赞同：2
> 
> 时间：2012-09-30T19:30:57.583
> 
> 标签：jquery, jquery-animate, bind, scrolltop

我正在尝试使用 jquery 在单击链接时轻松滚动到锚点。但我不希望它一直滚动到顶部。它必须在距离顶部至少 90px 处停止，这样锚定的 div 就不会落后于我的 90px 高的固定标题菜单栏。有任何想法吗？

```
$(function() {
    $('a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop:  $($anchor.attr('href')).offset().top
        }, 1500,'easeInOutExpo');

        event.preventDefault();
    );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:44:24.420

您是否尝试过在顶部位置减去 90 个像素，如下所示：

`scrollTop: ($($anchor.attr('href')).offset().top - 90)`

如果可行，您可以动态获取标题菜单栏的高度：

`scrollTop: ($($anchor.attr('href')).offset().top - $('menubar').outerHeight()))`

# php - 替换两个单词之间的内容

> ID：12664357
> 
> 赞同：-1
> 
> 时间：2012-09-30T19:31:02.517
> 
> 标签：php, str-replace

我正在尝试使用 php 替换两个单词之间的内容。这两个词之间的内容不同，所以我不能使用传统的str_replace。我想替换两个单词之间的内容，例如：

```
I would like to replace **some string of text** between two words 
```

改成：

```
I would like to replace between two words 
```

你可以看到我删除了“some”和“text”之间的所有措辞。同样，我不能使用常规的 str_replace，因为这两个词之间的文本可能不同。例如，它可能会说：

```
I would like to replace **some words of text** between two words 
```

改成：

```
I would like to replace between two words 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T19:32:20.343

正则表达式很简单：`/some .*? text/`

只需将其替换为空字符串即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:35:40.310

根据您的问题，只有字符串的内部会发生变化。如果是这种情况，那就很简单了，因为您已经有了解决方案：您不需要替换它，但您只需要不接管它：

```
$result = substr($string, 0, $startlen) . substr($string, -$endlen); 
```

可能这可以帮助您为此类问题找到更多“分辨率角度”。

# java - 用户定义的包和类路径

> ID：12664359
> 
> 赞同：0
> 
> 时间：2012-09-30T19:31:07.223
> 
> 标签：java, oop, package

我在一个名为 util 的包中有三个类，都是公共类。但是，当我尝试编译使用这些类的代码时，我收到一个错误，指出这些类不是公共的。我不知道怎么了。三类如下：

```
package util;

class Address {

    private String address;

    public Address(){
        address = "Default";
    }

    public Address(String newAddress){
        address = newAddress;
    }

    public void setAddress(String newAddress){
        address = newAddress;
    }

    public String getAddress(){
        return address;
    }

} 
```

日期类

```
package util;

class Date {

    private String Date;

    public Date(){
        Date = "Default";
    }

    public Date(String newDate){
        Date = newDate;
    }

    public void setDate(String newDate){
        Date = newDate;
    }

    public String getDate(){
        return Date;
    }

} 
```

名称类

```
package util;

class Name {

    private String name;

    public Name(){
        name = "Default";
    }

    public Name(String newName){
        name = newName;
    }

    public void setName(String newName){
        name = newName;
    }   

    public String getName(){
        return name;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:32:47.977

在所有类声明前添加“public”。您将它们全部设为私有。

我不知道这是否是一个简化的示例，但是您的设计还有很多不足之处。您的所有三个类 Date（非必需）、Name 和 Address 都是围绕 String 类的最薄的包装器。我会丰富最后两个并消除第一个。任何使用您的代码的人都必须确定您是指 Date 还是 java.util.Date。馊主意。请改用 JDK java.util.Date。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:34:13.273

这些类不是`public`，它们是[package-private](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)，因为您没有指定任何访问级别修饰符。要使它们向它们`public`添加`public`访问修饰符：

```
public class Address { 
```

# c++ - 如何复制当前进程？

> ID：12664360
> 
> 赞同：2
> 
> 时间：2012-09-30T19:31:11.793
> 
> 标签：c++, windows, fork, duplication

复制当前进程以在 Windows 中生成另一个实例的最简单方法是什么？我知道 Linux 有`fork()`，但我只需要在同一个进程中再次运行 main，可能使用`CreateProcess()`正确的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:07:31.090

正如@DavidHeffernan 评论的那样：

```
STARTUPINFO si;
::memset(&si, 0, sizeof(si));
si.cb = sizeof(si);
PROCESS_INFORMATION pi;
::CreateProcess(NULL, ::GetCommandLine(), NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:36:52.587

[Cygwin`fork()`](http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/cygwin/fork.cc?rev=1.208&content-type=text/x-cvsweb-markup&cvsroot=src)在其托管环境中实施，但即便如此，在让孩子赶上父母以准确复制 POSIX 行为方面，这也是一场复杂的广场舞。

似乎您不需要模仿`fork()`，但是`fork()`/ `exec()`。为此，收集环境变量、程序参数并将它们传递给`CreateProcess()`应该就足够了。也有将文件描述符复制到孩子的选项。请参阅`CreateProcess`的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

# c# - 如何让 GridView checkAll 复选框不触发单个复选框？

> ID：12664368
> 
> 赞同：1
> 
> 时间：2012-09-30T19:32:46.833
> 
> 标签：c#, asp.net, gridview

我有一个 GridView，每一行都包含一个复选框，该列的标题是一个具有 checkAll 功能的复选框：

```
<Columns>
     <asp:TemplateField>
            <HeaderTemplate>
                   <input id="chkAll" onclick="javascript:SelectAllCheckboxes(this);"                                       runat="server" type="checkbox" />
            </HeaderTemplate>
            <ItemTemplate>
                   <asp:CheckBox ID="chkSelect" runat="server" ToolTip="Select this order" AutoPostBack="true" OnCheckedChanged="chkSelect_OnCheckedChanged"/>
            </ItemTemplate>
     </asp:TemplateField>
     ...More BoundFields
</Columns> 
```

SelectAllCheckboxes() 背后的 javascript

```
function SelectAllCheckboxes(spanChk) {

        // Added as ASPX uses SPAN for checkbox

        var oItem = spanChk.children;
        var theBox = (spanChk.type == "checkbox") ?
    spanChk : spanChk.children.item[0];
        xState = theBox.checked;
        elm = theBox.form.elements;

        for (i = 0; i < elm.length; i++)
            if (elm[i].type == "checkbox" &&
          elm[i].id != theBox.id) {
                //elm[i].click();

                if (elm[i].checked != xState)
                    elm[i].click();
                //elm[i].checked=xState;

            }
    } 
```

我的 GridView 基本上包含来自我的网站的销售（订单），因此是美元金额。OnCheckedChanged 事件从页面上显示的 totalAmount 中添加（如果选中）或减去（如果未选中）当前行的价格。这一切都很好，除了当我单击 checkAll 复选框时，所有行复选框的所有 OnCheckedChanged 事件都会触发，并且需要很长时间来处理它。由于我在 OnCheckedChanged 方法中所做的只是对金额求和，有没有一种方法可以不调用各个复选框的事件，而只需调用一个单独的方法，该方法将获取所有 GridView 行并将它们全部加起来一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:24:19.340

如果您考虑在一次回发中在服务器上完成所有操作，您可以尝试以下操作：

```
<Columns>
    <asp:TemplateField>
         <HeaderTemplate>
              <asp:CheckBox ID="chkAll" runat="server" ToolTip="Select this order" AutoPostBack="true" OnCheckedChanged="chkAll_OnCheckedChanged"/>
         </HeaderTemplate>
         <ItemTemplate>
              <asp:CheckBox ID="chkSelect" runat="server" ToolTip="Select this order" AutoPostBack="true" OnCheckedChanged="chkSelect_OnCheckedChanged"/>
         </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

关于后面的代码：

```
 protected void chkSelect_OnCheckedChanged(object sender, EventArgs e)
    { 
        //Process checked item 
    }

    protected void chkAll_OnCheckedChanged(object sender, EventArgs e)
    {
        foreach (GridViewRow item in grdTest.Rows)
        {
            CheckBox ckb = (CheckBox)item.FindControl("chkSelect");

            //This will not call the individual event
            ckb.Checked = ((CheckBox)sender).Checked;
            //Process checked item 
        }
    } 
```

# ruby-on-rails - Has_many 通过批量分配错误

> ID：12664374
> 
> 赞同：0
> 
> 时间：2012-09-30T19:33:46.707
> 
> 标签：ruby-on-rails, has-many-through, mass-assignment

我已经阅读了关于这个主题的许多线程，但仍然看不出我的代码为什么不起作用。我有以下内容：

```
class User < ActiveRecord::Base

has_many :user_roles
has_many :user_groups, :through => :user_roles

#define attributes and validations
accepts_nested_attributes_for :user_roles
accepts_nested_attributes_for :user_groups

attr_accessible <some_attributes>, :user_groups_attributes, :user_roles_attributes

class UserRole < ActiveRecord::Base

belongs_to :user
belongs_to :user_group

attr_accessible :role_name

class UserGroup < ActiveRecord::Base

has_many :user_roles
has_many :users, :through => :user_roles

attr_accessible :user_group_name 
```

通过rails控制台，我正在尝试创建一个与用户关联的用户组，如下所示（在我创建表单之前）

```
user = User.last
<user details listed>
user.user_groups.create(:user_group_name => "test", :role_name => "test") 
```

Gives 不能批量分配属性 role_name。如果有人能看到我做错了什么，我将非常感谢您的帮助。

# include - 要求路径未被接受

> ID：12664375
> 
> 赞同：0
> 
> 时间：2012-09-30T19:33:49.693
> 
> 标签：include, require, require-once, php

> **警告**：require_once（/var/www/html/test_lms/include/mysql.processing.php）：无法打开流： **/var/www/html/test_lms/include/IMEXporter.class.php**中没有这样的文件或目录第**513**行
> 
>  ****致命错误**：require_once()：在 **/var/www/中打开所需的 '/var/www/html/test_lms/include/mysql.processing.php' (include_path='.:/usr/local/lib/php') 失败第****513**行 **的 html/test_lms/include/IMEXporter.class.php****

 ******来自 LINE 513 的 PHP`IMEXporter.class.php`抛出错误**

```
require_once dirname(__FILE__) . "/mysql.processing.php"; 
```

文件在那里。
该文件是 chmod 777。
这两个文件都属于同一个用户和组。
为什么php对我这样做？

* * *

~~问题可能是它`mysql.processing.php`本身已损坏，即使 php 找到了它拒绝检索它的文件，而是抛出一个`Derp! cant find file. Derp.`. 像那样误导我有点愚蠢，但这是有可能的。我现在正在检查我的代码。~~

不，我尝试擦除整个脚本`mysql.processing.php`并写

```
echo "Hello you impudent php"; 
```

它仍然找不到文件。所以它不是文件损坏的问题。我还修复了文件案例问题。从大写 P 到小写，它仍然不会去。我试图包含一个名为 test.php 的文件，但它也找不到那个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:53:30.173

您遇到区分大小写的问题。您很可能将表格`windows environment`移至`Linux`

如果您的文件`mysql.processing.PHP` `require_once dirname(__FILE__) . "/mysql.processing.php`可以在 windows + apache 服务器上运行，但在 Linux + apace 上失败

使用以下内容获取实际文件名

```
var_dump(scandir(__DIR__)); 
```

请运行这个简单的测试

```
error_reporting(E_ALL);

$name = "mysql.processing.php";
$file = __DIR__ . "/mysql.processing.php";
$dir = scandir(__DIR__);
$func = array("file_exists","is_file","is_readable");

echo "<pre>";
foreach ( $func as $fun ) {
    if (! $fun($file)) {
        echo $fun, " - Failed ", PHP_EOL;
    } else {
        echo $fun, " - Failed ", PHP_EOL;
    }
}

if (! in_array(basename($file), $dir)) {
    echo basename($file), " in_array Error", PHP_EOL;
} else {
    echo basename($file), " in_array OK", PHP_EOL;
}

if (! in_array($name, $dir)) {
    echo $name, " in_array Failed", PHP_EOL;
} else {
    echo $name, " in_array Ok", PHP_EOL;
}

if ($name !== basename($file)) {
    echo $name, " basename Failed", PHP_EOL;
} else {
    echo $name, " basename OK", PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:53:09.303

好吧，在错误消息中，文件名的大写与您发布的要求行中的不同...您确定这不是错字吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T20:54:21.137

好的，这就是问题所在。还记得我提到我的`mysql.processing.php`文件可能被破坏的时候吗？那是问题的一半。显然 php在以下情况`require`下会返回错误`failed to open stream: No such file or directory.. etc`：

1) 找不到文件。

2）找到文件，但无法打开。

该错误消息具有误导性，使您相信这是一个路径问题。有时是这样，但像我这样的情况，它只是返回文件的语法问题。现在是下半场。我对我的所有语法错误进行了更正，`mysql.processing.php`但它仍然无法正常工作。所以我只是重新启动了我的服务器，现在它可以工作了。

问题的后半部分是php有缓存php文件的讨厌倾向。通常，您可以开始编辑 php 脚本、修复解决方案等，但没有任何进展，因为 php 不会立即使您的更改生效。这可能会导致您从一个解决方案到下一个解决方案跌跌撞撞，不断更改您的脚本，感觉就像您在迷宫中一样。

有一些方法可以阻止 php 缓存特定文件。但问题在于 php 本身，它的错误报告具有误导性，另外两个问题在于它的问题缓存和排除解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:44:19.600

也许问题是您的 php 不在同一个文件夹中，您不能包含来自 URL 或其他文件夹的 .php。如果 php 位于同一路径或路径上的子文件夹中，则可以包含它。对不起我的英语，但我想你会明白我在说什么。****

# php - 居中显示：用 CSS 向左浮动阻止链接

> ID：12664376
> 
> 赞同：1
> 
> 时间：2012-09-30T19:34:01.283
> 
> 标签：php, html, css, center

我有一个带有`text-align:center`. 它的所有内容都必须居中。在这个 DIV 中，我有一个 PHP 代码，它生成一定数量的 A HREF 链接`display:block`。我希望所有这些链接彼此相邻（直到它对于 div 来说太宽，然后需要跳转到下一行）所以我使用`float:left`. 但是，如果只显示两个链接（块），它们在我的 DIV 中左对齐，而不是在中间。所以我希望我的链接彼此相邻显示，但我也想将它们放在我的 DIV 中。我该怎么做呢？

每个请求的代码：

```
<div style="margin-left:200px;width:300px;text-align:center;background-color:">Pagina's:<br clear="left"> 

<?php 
$sql = "SELECT COUNT(bedrijfsnaam) FROM profiles where plaats = '".$plaats2."'"; 
$rs_result = mysql_query($sql); 
$row = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages = ceil($total_records / 1); 

for ($i=1; $i<=$total_pages; $i++) { 
            echo "<a style=\"float:left;display:block;color:white;width:22px;text-align:center;text-decoration:none;font-size:20px;background-color:#483435;margin-left:4px\" href='".$plaatsnaam7.".php?page=".$i."'>".$i."</a> "; 

}; 
?>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:44:13.677

父 div 必须有

```
text-align: center 
```

里面的一切都必须有`display: inline; float: none;`

# c - 应该使用 `!var` 还是 `var == NULL`？

> ID：12664377
> 
> 赞同：7
> 
> 时间：2012-09-30T19:34:06.503
> 
> 标签：c, pointers

在测试时`NULL`，我看到很多代码使用`!var`. 是否有理由使用这种测试而不是更明确的`var == NULL`. 同样，`if (var)`对于非空项目是否是正确的测试？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T19:38:05.937

和...之间的不同：

`!var`

和

`var == NULL`

`var`在第二种情况下，如果不是指针类型并且`NULL`使用强制转换（如 ）定义，编译器必须发出诊断`(void *) 0`。

此外（正如评论中的@bitmask 所指出的那样）要使用`NULL`宏，您需要包含一个定义`NULL`宏的标准标头。在 C 中，`NULL`为方便起见，宏在多个标题中定义（如`stddef.h`、`stdio.h`、`stdlib.h`、`string.h`等）。

否则，这两种表达方式是等价的，只是口味问题。使用你觉得更舒服的那个。

对于您的第二个问题，与上面提到的区别`if (var)`相同`if (var != NULL)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:48:30.823

var == NULL 版本有一个主要优点：它使编译器和静态分析器可以找到一个特定的常见错误。

假设“var”不是指针，而是分配的变量。`if(!var)`那么将是一个未被发现的错误。

NULL 通常被声明为`#define NULL ((void*)0)`. 该声明不是标准的强制性声明，而是最常见的声明之一。具有半体面类型检查的编译器将能够对如下代码产生警告：

```
int var = ...;
if(var == NULL)  // compiler warning, var is not a pointer 
```

除了上述优点之外，不使用`!`运算符在风格上也是正确的，因为它是一个逻辑运算符，旨在用于布尔变量，而不是指针。它之所以有效，是因为 C 没有强类型。

我建议在这件事上遵循 MISRA-C，它规定对 NULL 或零的检查应该明确。`if(x != NULL)`而不是`if(x)`. 这些规则的基本原理是更具可读性的代码。无论如何，它都会转换为相同的机器代码，因此使您的代码更易于阅读是没有害处的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T19:44:31.683

[ISO/IEC 9899](http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=57853)标准规定：

1.  就语言而言：具有 value 的整数常量表达式`0`，或转换为 type 的此类表达式`void *`称为空指针常量。如果将空指针常量转换为指针类型，则生成的指针（称为空指针）保证与指向任何对象或函数的指针不相等。

2.  从库开始：`NULL`是一个扩展为实现定义的空指针常量的宏。

这意味着您给出的表达式同样“正确”。偏爱一种形式而不是另一种形式的原因主要是品味问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T19:48:00.700

来自 C 标准：

算术类型和指针类型统称为*标量类型*。

一元 + 或 - 运算符的操作数应具有算术类型；~ 运算符，整数类型；的 ！运算符，标量类型。

逻辑否定运算符的结果！如果其操作数的值比较不等于 0，则为 0，如果其操作数的值比较等于 0，则为 1。结果的类型为 int。表达式 !E 等价于 (0==E)。

所以，这应该回答你的问题。

# java - 任何类型的蓝牙代码，即使没有错误，也会在任何 Android 版本上导致强制关闭

> ID：12664382
> 
> 赞同：0
> 
> 时间：2012-09-30T19:35:00.000
> 
> 标签：java, android, bluetooth, forceclose

我尝试使用蓝牙聊天示例中的代码并发送字符串。我尝试使用来自[YAALL 的蓝牙代码 - LED 闪烁另一个 Arduino（翻译）](http://translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http://www.elektroda.pl/rtvforum/viewtopic.php?p=10970239) 我尝试使用来自[蓝牙方向盘](http://www.karelbruneel.com/blog/2011/01/steering-wheel/)的代码。没有蓝牙代码，我的应用程序工作正常，我在底部的调试代码成功更新了所有正确的值，以正确的格式发送，因为它应该被我的电子板接收。只要我添加任何类型的蓝牙代码，没有错误，甚至没有尝试发送任何东西，我的应用程序就会在打开/启动时关闭。

所以我的代码很广泛，所以我将使用以下链接将其发布在 pastebin 上（pastebin DOT com SLASH [the random characters]

MainActivity.java 1T3MfMwE

BluetoothSPPConnection.java ZqhxK2ZL

BluetoothSPPConnectionListener.java mkZcXRFx

ColorPickerDialog.java JywFkBDX

DeviceListActivity.java 0kEQzF1G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:21:33.727

我没有包括蓝牙权限。就这些。

# python - SqlAlchemy 元类混淆

> ID：12664385
> 
> 赞同：13
> 
> 时间：2012-09-30T19:35:22.233
> 
> 标签：python, sqlalchemy, metaclass

我正在尝试在SqlAlchemy的类构建过程中注入一些自己的代码。试图理解代码，我对元类的实现有些困惑。以下是相关的片段：

SqlAlchemy 的默认“元类”：

```
class DeclarativeMeta(type):
    def __init__(cls, classname, bases, dict_):
        if '_decl_class_registry' in cls.__dict__:
            return type.__init__(cls, classname, bases, dict_)
        else:
            _as_declarative(cls, classname, cls.__dict__)
        return type.__init__(cls, classname, bases, dict_)

    def __setattr__(cls, key, value):
        _add_attribute(cls, key, value) 
```

`declarative_base`是这样实现的：

```
def declarative_base(bind=None, metadata=None, mapper=None, cls=object,
                     name='Base', constructor=_declarative_constructor,
                     class_registry=None,
                     metaclass=DeclarativeMeta):
     # some code which should not matter here
     return metaclass(name, bases, class_dict) 
```

它是这样使用的：

```
Base = declarative_base()

class SomeModel(Base):
    pass 
```

现在我已经像这样派生了我自己的元类：

```
class MyDeclarativeMeta(DeclarativeMeta):
    def __init__(cls, classname, bases, dict_):
        result = DeclarativeMeta.__init__(cls, classname, bases, dict_)
        print result
        # here I would add my custom code, which does not work
        return result 
```

并像这样使用它：

```
Base = declarative_base(metaclass=MyDeclarativeMeta) 
```

好的，现在我的问题：

*   `print result`在我自己的课堂上总是打印`None`.
*   代码似乎仍然有效！？
*   为什么元类使用`__init__`而不是`__new__`
*   `declarative_base`返回此类的一个实例。它不应该返回一个`__metaclass__`具有`MyDeclarativeMeta`作为值的属性的类吗？

所以我想知道为什么代码完全有效。由于 SqlAlchemy 人显然知道他们在做什么，我认为我完全走错了轨道。有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T22:55:53.863

第一件事。**需要**返回。`__init__`_ [Python 文档](http://docs.python.org/reference/datamodel.html#object.__init__)说“不能返回任何值”，但在 Python 中“放弃”函数的末尾而不点击 return 语句相当于. 因此，显式返回（作为文字或通过返回导致 的表达式的值）也没有害处。**`None``return None``None``None`**

 **所以你引用的`__init__`方法`DeclarativeMeta`对我来说有点奇怪，但它并没有做错什么。这里又是我添加的一些评论：

```
def __init__(cls, classname, bases, dict_):
    if '_decl_class_registry' in cls.__dict__:
        # return whatever type's (our superclass) __init__ returns
        # __init__ must return None, so this returns None, which is okay
        return type.__init__(cls, classname, bases, dict_)
    else:
        # call _as_declarative without caring about the return value
        _as_declarative(cls, classname, cls.__dict__)
    # then return whatever type's __init__ returns
    return type.__init__(cls, classname, bases, dict_) 
```

这可以更简洁明了地写成：

```
def __init__(cls, classname, bases, dict_):
    if '_decl_class_registry' not in cls.__dict__:
        _as_declarative(cls, classname, cls.__dict__)
    type.__init__(cls, classname, bases, dict_) 
```

我不知道为什么 SqlAlchemy 开发人员觉得需要返回任何`type.__init__`返回（被限制为`None`）。也许它是在证明未来`__init__`可能会返回一些东西。也许这只是为了与其他方法保持一致，其中核心实现是推迟到超类；通常你会返回超类调用返回的任何东西，除非你想对它进行后处理。但是，它实际上并没有做任何事情。

因此，您的`print result`打印`None`只是表明一切都按预期工作。

* * *

接下来，让我们仔细看看元类的实际含义。元类只是一个类的类。*像任何类一样，您通过调用*元类来创建元类（即类）的实例。类块语法并不是真正创建类的东西，它只是用于定义字典然后将其传递给元类调用以创建类对象的非常方便的语法糖。

`__metaclass__`属性并不是魔法，它实际上只是一个巨大的黑客来传达信息“我希望这个类块通过反向通道创建这个元类的实例而不是”的实例，`type`因为没有适当的将该信息传达给口译员的渠道。¹

举个例子可能会更清楚。采取以下类块：

```
class MyClass(Look, Ma, Multiple, Inheritance):
    __metaclass__ = MyMeta

    CLASS_CONST = 'some value'

    def __init__(self, x):
        self.x = x

    def some_method(self):
        return self.x - 76 
```

这大致是执行以下操作的语法糖²：

```
dict_ = {}

dict_['__metaclass__'] = MyMeta
dict_['CLASS_CONST'] = 'some value'

def __init__(self, x):
    self.x = x
dict_['__init__'] = __init__

def some_method(self):
    return self.x - 76
dict_['some_method'] = some_method

metaclass = dict_.get('__metaclass__', type)
bases = (Look, Ma, Multiple, Inheritance)
classname = 'MyClass'

MyClass = metaclass(classname, bases, dict_) 
```

`__metaclass__`因此，“具有以[元类] 作为值的属性的类”**是**元类的一个实例！它们是完全一样的。唯一的区别是，如果您直接创建类（通过调用元类）而不是使用类块和`__metaclass__`属性，那么它不一定具有`__metaclass__`属性。³

最后的调用`metaclass`与任何其他类调用完全相同。它将调用`metaclass.__new__(classname, bases, dict_)`创建类对象，然后调用`__init__`生成的对象来初始化它。

默认元类`type`仅在 中做任何有趣的事情`__new__`。我在示例中看到的元类的大多数用途实际上只是实现类装饰器的一种复杂方式。他们想在创建类时进行一些处理，然后不在乎。所以他们使用`__new__`，因为它允许他们在之前和之后执行`type.__new__`。最终结果是每个人都认为这`__new__`是您在元类中实现的。

但实际上你可以有一个`__init__`方法；它将*在新类对象*创建后被调用。如果您需要为类添加一些属性，或者在某个注册表中记录类对象，这实际上是一个比`__new__`.

* * *

¹在 Python3 中，这是通过`metaclass`在基类列表中添加作为“关键字参数”而不是作为类的属性来解决的。

²实际上，由于需要在正在构建的类和所有基础之间实现元类兼容性，它会稍微复杂一些，但这是核心思想。

³并不是说​​即使是具有元类（除了）的类*也*必须以`type`通常的方式创建为属性；检查类的类的正确方法与检查其他任何类的方法相同；使用，或应用。*`__metaclass__``cls.__class__``type(cls)`*

 ** * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-04T14:31:21.023

SQLAlchemy的`__init__`版本基本上是错误的。它可能是在三年前通过从某个地方剪切和粘贴元类来编写的，或者它开始时是一种不同的方法，`__init__`后来才出现，只是没有改变。我刚在第一次编写时检查了 0.5，它看起来基本相同，但带有不必要的“return”语句。现在修复它，抱歉让您感到困惑。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T23:32:21.600

*   `print result`在我自己的课堂上总是打印无。

这是因为构造函数不返回任何东西:)

*   为什么元类使用`__init__`而不是`__new__`

我认为这是因为 SQLAlchemy 需要将 cls 的引用存储到声明性类注册表中。在`__new__`中，该类尚不存在（请参阅[https://stackoverflow.com/a/1840466](https://stackoverflow.com/a/1840466)）。

当我对 进行子类化`DeclarativeMeta`时，实际上我所做的一切都是`__init__`按照 SQLAlchemy 的代码进行的。在阅读您的问题后回想起来，我的代码应该`__new__`改用。

*   `declarative_base`返回此类的一个实例。它不应该返回一个`__metaclass__`具有`MyDeclarativeMeta`作为值的属性的类吗？

我认为本解释得很好。无论如何，如果您愿意（不推荐），您可以跳过调用`declarative_base()`并创建自己的基类，例如

```
# Almost the same as:
#   Base = declarative_base(cls=Entity, name='Base', metaclass=MyDeclarativeMeta)
# minus the _declarative_constructor.
class Base(Entity):
    __metaclass__ = MyDeclarativeMeta

    _decl_class_registry = dict()
    metadata = MetaData() 
```

在这种情况下，该`__metaclass__`属性将在那里。实际上，我创建了这样的 Base 类来帮助 PyCharm 自动完成`Entity`.***

# php - 单击提交重力表单时显示加载动画

> ID：12664386
> 
> 赞同：1
> 
> 时间：2012-09-30T19:35:22.613
> 
> 标签：php, jquery, forms, wordpress, loading-animation

我正在使用重力表单将我的潜在客户提交给第三方问题是当我点击提交时需要 5 秒才能得到回复并发布潜在客户，而在这种情况下我想向用户显示加载或搜索动画.

我正在使用重力形式，我不知道在哪里以及如何添加此功能。

有人可以帮我解决这个问题，我没有使用ajax。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:01:02.583

当您在 PHP 短代码中将 AJAX 设置为 true 时，最新的更新应该有一个默认的加载图像。

**当 AJAX 属性为 true 时，像这里**

```
<?php 
    echo do_shortcode('[gravityform id="1" title="false" description="false" ajax="true"]');
?> 
```

**做这个...**

为了避免在单击提交按钮时收到重复的潜在客户提交。请记住，重力表单将处理验证。这将为按钮设置样式，更改其中的文本并禁用按钮单击。默认情况下，加载图像将通过重力形式显示。

```
<script type="text/javascript" language="JavaScript">
$(document).ready(function(){

    $('#gform_1 input.gform_button').live('click', function(){

        submitContactForm( $(this) );

    });

});

    function submitContactForm( _this ){

        _this.die('click');
        _this.css('opacity', '0.5');
        _this.val('Sending...');

        _this.attr('disabled', 'disabled');// using this will stop the form from submitting
        $('#gform_1').submit();// this will make sure that it submits

        //console.log('calibrating...');        
    }

</script> 
```

在 jquery 中，尝试在“submitContactForm”函数内部覆盖可见的图像 src。

```
if ( _this.closest('.gform_footer').find('img.gform_ajax_spinner').is(':visible') ){
    _this.closest('.gform_footer').find('img.gform_ajax_spinner').attr('src','DIRECTORY OF YOUR CUSTOM SPINNER IMAGE');
} 
```

这样您就不必记住在更新 Gravity Form 插件时覆盖该图像。

# git - git amend 需要 git push -f 吗？

> ID：12664388
> 
> 赞同：3
> 
> 时间：2012-09-30T19:35:33.270
> 
> 标签：git

```
make changes
git commit 'made changes' -a
git push origin
make more changes
git ammend -a
git push origin 
```

我注意到，当我执行 a`git commit --ammend -a`然后尝试推送到远程仓库时，它需要我强制推送（`git push -f`）。

我的猜测是因为它试图推送相同的（？这个词是什么？）提交代码，但注意到文件中的差异。

这是正确/正常的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T19:41:34.537

A`git commit --amend`或 a `git commit --author=<author>`，如果有任何修改，将生成不同的 SHA1。
那么，是的，`git push -f`将需要一个。

`git amend`可以定义为这个[博客文章](http://www.jukie.net/bart/blog/git-amend)中的别名：

```
git config --global alias.amend 'commit --amend -C HEAD' 
```

> 此别名添加了一个`git amend`命令，该命令将在修改当前提交消息时重用它。

# java - 替换正则表达式java中[和]之间的所有内容

> ID：12664392
> 
> 赞同：14
> 
> 时间：2012-09-30T19:35:50.767
> 
> 标签：java, regex

我需要删除`[ ]`.

例子：

**我的输入：** `ab[cd]e`

**预期输出：** `abe`。

* * *

我尝试使用`\[`and `\]`，但它被报告为非法转义序列。

谁能帮我解决这个问题。

PS：我使用的是 Java 1.7。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T19:37:32.667

使用[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String s = "ab[cd]e";
s = s.replaceAll("\\[.*?\\]", ""); // abe 
```

这将用空字符串替换`[`,和中间的所有内容。`]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T19:38:50.210

试试 replaceAll 方法

```
str = str.replaceAll("\\[.*?\\]","") 
```

# c# - 派生类的 MVC 3 CRUD

> ID：12664397
> 
> 赞同：0
> 
> 时间：2012-09-30T19:36:11.933
> 
> 标签：c#, inheritance, crud, derived-types

我需要帮助的人。我是一个MVC新手..

我收到此错误

传入字典的模型项是 type `System.Collections.Generic.List'1[BaseClass]`，但是这个字典需要一个 type 的模型项`System.Collections.Generic.IEnumerable'1[DerivedClass]`。

这些是我的两个动作

```
namespace Namespace.Controllers
{ 
    public class DerivedController : Controller
    {
        private Context db = new Context();
    }

    public ViewResult Index()
    {
        var baseClass= db.BaseClass.Include(s => s.Arrea);
        return View(BaseClass.ToList());
    }

    //
    // GET: /Derived/Details/5

    public ViewResult Details(int id)
    {
        Derived derived = db.BaseClass.OfType<Derived>().Single(c => c.SDSID==id);
        return View(derived);
    } 
```

我将 EF codefirst 与 TPT 继承一起使用。到目前为止，包括基类在内的一切都有效。我究竟做错了什么？我已经搜索了2天了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:45:22.697

您的视图可能是强类型的，并且您将错误的内容传递给它。

您视图中的第一行应该类似于（如果您使用的是剃须刀）...

```
@model IEnumerable<DerivedClass> 
```

将其更改为...

```
@model IEnumerable<BaseClass> 
```

# c - 学生结构的链表实现

> ID：12664398
> 
> 赞同：0
> 
> 时间：2012-09-30T19:36:18.113
> 
> 标签：c, struct, linked-list

我正在尝试使用以下结构创建学生的链接列表。

```
struct student 
{
    int student_ID;
    char *student_name;
    struct course *courses_enrolled;
    Student *child;
};

//Insert student to the list with a given student pointer and the starting point
Student *insert_student(Student *child, Student *root)
{
    Student *temp = (Student*)malloc(sizeof(Student));
    //if there isn't a starting point, declare this as the start point
    if( root->student_name == NULL )
    {
        root->student_ID = child->student_ID;
        root->student_name = strdup(child->student_name;);
        root->child = NULL;
    }
    //if this student's name is before current node, replace node.
    else if( strcmp( child->student_name, root->student_name ) < 0 )
    {
        temp = root;
        root = child;
        child->child = temp;
    }
    //if this student's name is after current node, keep doing insert recursion
    else if( strcmp( child->student_name, root->student_name ) > 0 )
    {
        insert_student( child, root->child );
    }

    return root;
} 
```

第一个根插入总是可以正常工作，但是当我尝试添加第二个时，程序将在第二次调用 insert_student 后出现段错误。比较失败

```
if( root->student_name == NULL ) 
```

我怀疑这与我访问根的子节点（root->child）有关，但我不确定是什么。

p/s：我知道我没有取消分配，这只是暂时的事情，因为我需要使用不同的库。

更新：删除了多余的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:50:58.793

找到确切的问题有点困难，因为我们没有给出这个函数是如何调用的。似乎有几件事要检查。

我假设您传递给函数的`child`and`root`确实已分配，根中的所有字段都设置为`NULL`并且该学生的姓名是有序的，因此您的第二个分支永远不会发生。然后，第一次插入将起作用。

但是，当您进行第二次插入时。您正在传递`root->child`您`NULL`在第一`if`个子句中设置的内容。这将导致随后`strcmp`失败，因为您无法取消引用`NULL`（例如`NULL->student_name`引发错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:40:13.520

当您递归调用 insert_student 时，您应该确保您传递的值`root`不为空。如果它为空，您可能需要另一种情况（例如在末尾插入）。

我注意到的一件事是您从不使用`temp`. 它在使用前总是未使用或丢弃`temp`。我假设这不是你想要的。

此外，通常`next`会`child`在结构中使用该词而不是在参数中使用类似`newStudent`或仅`student`代替 child 的词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:50:30.120

```
if( root->student_name == NULL )
{
    printf("Always here?\n");
    root->student_ID = child->student_ID;
    root->student_name = strdup(child->student_name);
    temp->student_ID = 0;
    temp->student_name = NULL;
    root->child = temp;
} 
```

我发现实际上我需要将子节点的变量声明为 NULL 才能访问它们。

# ruby-on-rails - Rails - 如何立即获取插入行的 id

> ID：12664400
> 
> 赞同：0
> 
> 时间：2012-09-30T19:36:30.487
> 
> 标签：ruby-on-rails, ruby, activerecord, model

我在我的应用程序中使用这个逻辑： **控制器**

> @current_user = User.find_or_create_from_oauth(auth_hash)

**用户.rb**

```
 def self.find_or_create_from_oauth(auth_hash)
    provider = auth_hash["provider"]
    uid = auth_hash["uid"].to_s

    case provider      
       when 'twitter'
        if user = self.find_by_twitter_uid(uid)
          return user
        else
          return self.create_user_from_twitter(auth_hash)
        end

    end
  end

  def self.create_user_from_twitter(auth_hash)   
    a = self.create({
      :twitter_uid => auth_hash["uid"],
      :name => auth_hash["info"]["name"]
    })
    puts a.inspect
    user = User.find_by_twitter_uid(a.twitter_uid)
    puts '---'
    puts user.inspect
  end 
```

紧接着`self.create`我需要运行这一行：

```
Assignment.create(:user_id => a.id, :role_id => 2) 
```

问题是，该行`puts user.inspect`返回如下内容：

```
#<User id: nil, name: "...name...", twitter_uid: "96580821", provider: "twitter", created_at: nil, updated_at: nil> 
```

为什么在哈希返回**id: nil**？

或者，有没有其他方法，如何获取最后创建记录的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:39:26.610

如果用户已正确保存，则可以直接使用`a`：

```
a.assignments.create(:role_id => 2) 
```

否则（使用`create!`代替检查`create`）可能会出现验证错误。

# python - 用于绘制 3D 粒子的 python 库

> ID：12664401
> 
> 赞同：0
> 
> 时间：2012-09-30T19:36:34.033
> 
> 标签：python

我是 python 新手，我正在做的一项任务是要求“编写一个程序，将直径为 d 的相同非重叠粒子置于具有周期性边界条件的立方 (3d) 晶格中。线性长度为 L。写程序以这样一种方式，您可以改变粒子的数量。证明您的程序有效并显示至少一个可视化“

我想看看我应该使用什么 3D 库，有什么建议吗？

另外，关于我应该如何解决这个问题的任何建议？我想我可以随机生成我有用户输入的 n 个粒子的 x,y,z 坐标。我怎样才能确保它们不重叠呢？我也对“周期性边界条件”感到困惑，但这与 python 无关：|

我在这里先向您的帮助表示感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:05:54.387

Matplotlib 适用于简单的 3D 绘图并且非常受欢迎，因此很容易找到文档、教程和帮助。但是，对于专门针对 3D 绘图的内容，请尝试[Mayavi](http://code.enthought.com/projects/mayavi/ "马亚维")。

# hibernate - Hibernate：集合性能：与集合的多对多关联

> ID：12664411
> 
> 赞同：1
> 
> 时间：2012-09-30T19:38:20.327
> 
> 标签：hibernate, orm

从[休眠文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/performance.html#performance-collections-mostefficientupdate)：

> 可以说，索引集合比多对多关联或值集合的集合具有更多优势。由于 Set 的结构，当元素“更改”时，Hibernate 不会更新行。对 Set 的更改始终通过对单个行的 INSERT 和 DELETE 进行。再一次，这种考虑不适用于一对多关联。

我想知道：

1.  怎么会有多对多的值集合（即值类型）......？我认为值类型只有一个所有者......？

2.  为什么在与集合的多对多关联的情况下，当集合中的元素发生更改时，Hibernate 不会更新，而是使用 INSERT 和 DELETE？

# ruby-on-rails - 多对多不同查询

> ID：12664412
> 
> 赞同：2
> 
> 时间：2012-09-30T19:38:29.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下情况：我有两个模型：UserGroup 和 User（具有多对多关系）。我需要最终得到一个不同的用户列表。

**我所拥有的：一组用户组 ID 和一组用户 ID。**

**我想要什么：一组不同的用户列表，基于我所拥有的。**

[![关系案例](../Images/dc1ecd53a755867566e6f4094869959b.png)](https://i.stack.imgur.com/e0inG.png)

插图有点误导，因为它只显示我有用户组 ID，但我也有一些用户 ID。

如何在 Ruby on Rails 中以优雅的方式做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:25:55.470

希望对你有帮助

```
user_groups = UserGroup.includes(:users).where('query for your selected user_groups records')
distinct_users = user_groups.collect{|ug|ug.users.collect(&:id)}.flatten.uniq 
```

有了这个，您只能为您选择的 user_groups 获得不同的用户

# node.js - NodeJS 上的 Socket.io 和 Express

> ID：12664418
> 
> 赞同：2
> 
> 时间：2012-09-30T19:38:51.460
> 
> 标签：node.js, express, socket.io

我正在尝试使用 和 构建一个简单的应用`express@3.0.0rc4`程序`socket.io@0.9.10`。

我已经使用 express 生成器生成了我的应用程序的骨架：

```
express --sessions --css stylus --ejs myapp 
```

然后我编辑了 package.json 文件以包含 socket.io：

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.0.0rc4",
    "ejs": "*",
    "stylus": "*",
    "socket.io": "*"
  }
} 
```

跑了`npm install`。Socket.io 安装正确。

我打开了 app.js 文件，需要 socket.io，将其设置为侦听服务器，但是在添加事件处理程序时使用

```
io.sockets.on('connection', callback.. bla bla bla); 
```

我明白了

```
io.sockets.on('connection', function(socket) {
           ^
TypeError: Cannot call method 'on' of undefined 
```

我明白了

```
 info  - socket.io started 
```

运行时，socket.io 正在初始化，但似乎没有 io.sockets 模块。

我跑去`console.log(io);`探索这个物体，我得到了：

```
{ version: '0.9.10',
  protocol: 1,
  clientVersion: '0.9.10',
  listen: [Function],
  Manager: 
   { [Function: Manager]
     defaultTransports: [ 'websocket', 'htmlfile', 'xhr-polling', 'jsonp-polling' ] },
  Transport: [Function: Transport],
  Socket: [Function: Socket],
  Static: [Function: Static],
  Store: { [Function: Store] Client: [Function] },
  MemoryStore: { [Function: Memory] Client: [Function: Client] },
  RedisStore: { [Function: Redis] Client: [Function: Client] },
  parser: 
   { packets: 
      { disconnect: 0,
        connect: 1,
        heartbeat: 2,
        message: 3,
        json: 4,
        event: 5,
        ack: 6,
        error: 7,
        noop: 8 },
     reasons: 
      { 'transport not supported': 0,
        'client not handshaken': 1,
        unauthorized: 2 },
     advice: { reconnect: 0 },
     encodePacket: [Function],
     encodePayload: [Function],
     decodePacket: [Function],
     decodePayload: [Function] } } 
```

那么sockets方法在哪里呢？无处。但是看，有一个Socket函数：

```
Socket: [Function: Socket] 
```

所以我想也许文档已被弃用，套接字变成了 Socket。所以我做`console.log(io.Socket);`了并且得到了

```
 this.id = id;
  this.namespace = nsp;
  this.manager = manager;
  this.disconnected = false;
  this.ackPackets = 0;
  this.acks = {};
  this.setFlags();
  this.readable = readable;
  this.store = this.manager.store.client(this.id);
  this.on('error', defaultError); 
```

但是那个 Socket.on 似乎不是我正在寻找的功能。

那么如何设置处理程序呢？在网页上，github 和那里的资源都使用`io.sockets.on()`.

请注意，我也尝试`npm install socket.io`单独运行

我会发布我`app.js`的以防万一，但我的代码似乎没有问题：

```
var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , io = require('socket.io');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

var server = http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

io.listen(server);

console.log(io.Socket);

io.sockets.on('connection', function(socket) {
  socket.emit('init', { msg: 'Welcome'});
  socket.on('roll', function(data) {
    console.log(data);
  })
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T20:18:28.120

```
var app = require('express')()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server)

server.listen(3000)    

io.on('connection',function(socket){
  console.log('connection..')
}) 
```

# java - 在主布局上定位对象意外失败

> ID：12664423
> 
> 赞同：1
> 
> 时间：2012-09-30T19:39:02.423
> 
> 标签：java, android, xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/bkgrndclr">

    <Button
        android="@+id/imgbtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Search Images"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true" />
    <Button
        android="@id/imgbtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Search Web"
        android:layout_alignBottom="@id/imgbtn"
        android:layout_toLeftOf="@id/imgbtn" />
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/imgbtn"
        android:layout_alignRight="@id/imgbtn" />
</LinearLayout> 
```

我将按钮设置在视图的底部和它们上方的文本框，但为什么所有按钮都是线性显示的。首先显示按钮搜索图像，然后是搜索网络，然后是文本框，它们不在底部，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:06:32.723

在第二个按钮中，将按钮的 id 更改为，`"+@id/imgbtn1"`使其不会与第一个按钮发生冲突。

更改`android:layout_alignBottom="@id/imgbtn"`为`android:layout_alignParentBottom="true"`.

您希望 EditText 在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:07:53.817

如果您的 Views 父亲是 LinearLayout "android:layout_alignParentBottom="true"" 没有意义...您需要将 Linear 更改为 Relative 如果您希望 EditText 位于 Buttons 上方，请给它：

```
android:layout_above="@id/imgbtn" 
```

给您的按钮提供不同的 ID！并将它们都更改为 alignParentBottom

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:19:59.403

你还没有描述你想要什么......但我猜你想要屏幕底部的布局，如下所示：

```
|                                               |
| (EditText                                   ) |
|                            (Button)  (Button) |
 ----------------------------------------------- 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/bkgrndclr"
     >

    <Button
        android:id="@+id/btnImages"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Search Images"
         />

    <Button
        android:id="@+id/btnWeb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/btnImages"
        android:text="Search Web"
         />

    <EditText
        android:id="@+id/search"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btnImages"
        android:inputType="text"
         />

</RelativeLayout> 
```

# php - 将所有用户变量加载到会话中还是仅加载用户的 UID？

> ID：12664424
> 
> 赞同：0
> 
> 时间：2012-09-30T19:39:03.370
> 
> 标签：php, session, authentication, session-variables

在 PHP 中使用会话处理用户身份验证时，我看到成功登录后访问用户属性的两个主要选项：

1.  将用户的主要属性加载到会话超全局中
2.  仅将用户的 UID（用户名或 id # 等）加载到会话中，例如`$_SESSION['username']`，然后在页面加载时获取用户的主要属性并将它们存储在用户对象中

**方法一**

*   通过会话超全局更容易访问范围

**方法二**

*   当用户的数据被修改时，您不必担心更新会话变量，因为您在每个页面上获取它

**我的问题**

*   我是否忽略了其他选择？
*   通常“完成”的方式是什么？
*   性能呢？在哪种情况下哪种方法会更快？

**笔记**

*   当我说用户的“主要”属性时，我指的是那些将在许多页面上使用的属性，例如用户名、访问级别、电子邮件地址等。显然你不会加载太多的数据。

*   我指的是数据库存储的会话，而不是基于文件的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:45:22.273

这取决于项目，如果用户的某些信息最容易访问，则进入会话。我会这样做：

```
class User{
   private $userName;
   //ohter attrs
   //getters and setters    
}

function login(){
    $user = new User();
    //populate attrs 
    $_Session["user"] = $user
 } 
```

不要将大批量数据放入会话中，将其留在数据库中，也不要放入 UID，放入一些`User`类对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:48:29.430

通常，只存储 UID 或任何其他唯一标识符（例如用户名），因为所有其他数据都可以动态更改。但是，这取决于数据和项目本身。如果经常使用这些数据并且您真的关心更新它们，那么除了 UID 之外，加载例如访问级别、用户名和电子邮件可能会非常高效！另一方面，仅存储 UID 效率低下，因为您必须请求每个页面上的所有数据，但这是一种更安全的方法。无论如何，如果您需要在大多数页面上加载更多用户数据，这种方法会更好，因为无论如何您都必须请求数据。然而，为了提高例如数据库请求的效率，您可以使用数据库缓存。如果这样做，两种方式的效率可能几乎相等。简而言之，

另请注意，如果您存储 UID 以外的用户数据，您还需要保存会话 ID，因为用户可以打开多个会话，并且您需要确保他在更改用户数据时更改了同一个会话！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:48:37.230

如果您关心性能，那么您可能需要考虑实现一个缓存层（例如 memcache）并将您提取的用户数据存储在缓存中。我通常这样做的方式是只使用 memcached 作为会话处理程序而不是数据库。

# pygments - 在 Phabricator 中使用 Pygmentize 突出显示不起作用

> ID：12664425
> 
> 赞同：4
> 
> 时间：2012-09-30T19:39:11.790
> 
> 标签：pygments, phabricator

我安装了 Phabricator 来处理 Python 项目。一切正常，但文件视图以纯文本形式显示它们。我想要一些 Pygmentize 实用程序提供的高亮显示。

我已经安装了 Pygments

```
sudo pip install Pygments 
```

检查所有用户，**pygmentize**脚本可用，位于 /usr/local/bin。我变了

```
'pygments.enabled' => true, 
```

phabricator 的 myconfig.conf.php 文件中的设置。但它不工作？！我找不到任何日志崩溃或其他问题。你有什么想法为什么会发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:45:50.967

我收到了 Github-Issues 服务的答复。原因是 httpd 用户不能调用这个函数，这里是扩展自己的 $PATH 环境的示例。我将此添加到 myconfig.conf.php 文件中：

```
'environment.append-paths' => array('/usr/local/bin'), 
```

强烈建议将带有 pygmentize 的路径添加到您的路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T19:39:48.973

配置文件位于：

`phabricator/conf/local/local.json`

我已经添加了我的配置

```
"environment.append-paths": ["\/bin","\/usr\/bin","\/usr\/local\/bin","\/usr\/local\/sbin","\/usr\/local\/bin","\/opt\/local\/sbin","\/opt\/local\/bin","\/usr\/sbin","\/usr\/bin","\/sbin"], 
```

我正在使用 SmartOS（$PATH 位于 /usr/local/sbin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/usr/sbin:/usr/bin:/sbin）

# r - 删除列表中数据框中的列

> ID：12664430
> 
> 赞同：23
> 
> 时间：2012-09-30T19:40:11.577
> 
> 标签：r, list, dataframe

我根据 A 列中的因子水平从我的数据框中列出了一个列表。在列表中，我想删除该列。我的头在说 lapply，但没有别的：P

```
$A
ID Test
A   1
A   1

$B
 ID Test
 B   1
 B   3
 B   5 
```

进入这个

```
$A
Test
 1
 1

$B
Test
 1
 3
 5 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-30T19:45:55.253

假设您的列表被调用`myList`，这样的事情应该可以工作：

```
lapply(myList, function(x) { x["ID"] <- NULL; x }) 
```

### 更新

对于更通用的解决方案，您还可以使用以下内容：

```
# Sample data
myList <- list(A = data.frame(ID = c("A", "A"), 
                              Test = c(1, 1), 
                              Value = 1:2), 
               B = data.frame(ID = c("B", "B", "B"), 
                              Test = c(1, 3, 5), 
                              Value = 1:3))
# Keep just the "ID" and "Value" columns
lapply(myList, function(x) x[(names(x) %in% c("ID", "Value"))])
# Drop the "ID" and "Value" columns
lapply(myList, function(x) x[!(names(x) %in% c("ID", "Value"))]) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-11-16T22:07:46.690

如果您是用户，则可以使用包中的功能`tidyverse`替代解决方案。`map``purrr`

```
# Create same sample data as above
myList <- list(A = data.frame(ID = c("A", "A"), 
                              Test = c(1, 1), 
                              Value = 1:2), 
               B = data.frame(ID = c("B", "B", "B"), 
                              Test = c(1, 3, 5), 
                              Value = 1:3))
# Remove column by name in each element of the list
map(myList, ~ (.x %>% select(-ID))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-13T10:52:29.023

我们可以在这里有效地使用括号功能`"["`。

### 例子

```
L <- replicate(3, iris[1:3, 1:4], simplify=FALSE)  # example list 
```

**按数字删除列**

```
lapply(L, "[", -c(2, 3)) 
```

**按名称删除列**

```
lapply(L, "[", -grep(c("Sepal.Width|Petal.Length"), names(L[[1]]))) 
```

**结果**

```
# [[1]]
#   Sepal.Length Petal.Width
# 1          5.1         0.2
# 2          4.9         0.2
# 3          4.7         0.2
# 
# [[2]]
#   Sepal.Length Petal.Width
# 1          5.1         0.2
# 2          4.9         0.2
# 3          4.7         0.2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-05T02:53:32.760

如果您有一个不包含该`ID`列的数据框，您可以使用`map_if`它仅在它存在的地方将其删除。

```
myList <- list(A = data.frame(ID = c("A", "A"), 
                          Test = c(1, 1), 
                          Value = 1:2), 
           B = data.frame(ID = c("B", "B", "B"), 
                          Test = c(1, 3, 5), 
                          Value = 1:3),
           C = data.frame(Test = c(1, 3, 5), 
                          Value = 1:3))
map_if(myList, ~ "ID" %in% names(.x), ~ .x %>% select(-ID), .depth = 2) 
```

# algorithm - 排序整数的压缩算法

> ID：12664432
> 
> 赞同：13
> 
> 时间：2012-09-30T19:40:14.657
> 
> 标签：algorithm, compression

我有一大串从最低到最高排序的随机整数。数字从 1 位开始，到 45 位附近结束。在列表的开头，我的数字非常接近：4、20、23、40、66。但是当数字开始变大时，它们之间的距离也有点高（实际上它们之间的距离是偶然的）。没有重复的数字。

我正在使用[位包装](http://lemire.me/blog/archives/2012/03/06/how-fast-is-bit-packing/)来节省一些空间。尽管如此，这个文件可能会变得非常大。

我想知道在这种情况下可以使用哪种压缩算法，或者任何其他技术来尽可能多地节省空间。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T20:09:17.650

如果您知道数据的真实分布，则可以进行最佳压缩。如果您可以为每个整数提供概率分布，您可以使用算术编码或其他**熵编码**技术来压缩到理论上的最小大小。

**诀窍在于准确预测。**

首先，您可能应该压缩数字之间的**距离**，因为这可以让您进行统计报表。如果您要直接压缩数字，您将很难对它们进行建模，因为它们只出现一次。

接下来，您可以尝试构建一个非常简单的**模型来预测**下一个距离。保留所有先前看到的距离的直方图并根据频率计算概率。

您可能需要考虑缺失值（您显然不能为它们分配 0 概率，因为那是不可表达的）但是您可以为此使用启发式方法，例如逐位编码下一个距离并**单独预测每个位**。您几乎不需要为高位支付任何费用，因为它们几乎总是 0，并且熵编码会将它们优化掉。

***如果您知道*分布**，所有这一切都会简单得多。示例：您正在压缩所有素数的列表，您知道距离的理论分布，因为有公式。所以你已经有了一个完美的模型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-30T20:35:35.813

有一种非常简单且相当有效的压缩技术，可用于已知范围内的排序整数。像大多数压缩方案一样，它针对串行访问进行了优化，但如果需要，您可以构建索引来加速随机访问。

它是一种增量编码（即每个数字由与前一个数字的距离表示），由一个代码向量组成，这些代码要么是

*   单个 1 位，表示 2 ^k的增量，在以下代码中添加到增量中，或

*   一个 0 位后跟一个 k 位增量，表示下一个数字是前一个数字的指定增量。

例如，如果 k 为 4，则序列：

00011 1 1 00000 1 00001

编码三个数字。第一个四位编码 (3) 是第一个 delta，取自初始值 0，因此第一个数字是 3。接下来的两个单独的 1 累加为 2·2 ⁴或 32 的 delta，相加到以下 0000 的增量，总共 32。所以第二个数字是 3+32=35。最后最后一个delta是单2 ⁴加1，一共17个，第三个数是35+17=52。

1 位表示下一个增量应该增加^(2k)（或者，更一般地，每个增量增加^(2k)乘以紧接在前的 1 位的数量。）

另一种可能更好的思考方式是将每个增量编码为可变长度位序列： 1 ^i 0(1|0) ^k，表示 i·2 ^k +[k 位后缀]的增量。但是第一个演示文稿与最优性证明更好地对齐。

由于每个“1”代码代表 2 ^k的增量，因此它们的数量不能超过 m/2 ^k，其中 m 是要压缩的集合中的最大数字。其余代码均对应数字，总长度为 n·(k + 1)，其中 n 是集合的大小。k 的最佳值大约为 log [2] m/n，在您的情况下为 7 或 8。

我对算法的概念做了一个快速的证明，而不用担心优化。它仍然很快；对随机样本进行排序比压缩/解压缩它需要更长的时间。我尝试了一些不同的种子和向量大小，从 16,400,000 到 31,000,000，值范围为 [0, 4,000,000,000)。每个数据值使用的位范围从 8.59 (n=31000000) 到 9.45 (n=16400000)。所有的测试都是用 7 位后缀完成的；log [2] m/n 从 7.01 (n=31000000) 到 7.93 (n=16400000) 不等。我尝试使用 6 位和 8 位后缀；除了在 n=31000000 的情况下，6 位后缀略小，7 位后缀总是最好的。所以我猜想最优 k 并不完全是 floor(log [2] m/n)，但也不远了。

压缩代码：

```
void Compress(std::ostream& os,
              const std::vector<unsigned long>& v,
              unsigned long k = 0) {
  BitOut out(os);
  out.put(v.size(), 64);
  if (v.size()) {
    unsigned long twok;
    if (k == 0) {
      unsigned long ratio = v.back() / v.size();
      for (twok = 1; twok <= ratio / 2; ++k, twok *= 2) { }
    } else {
      twok = 1 << k;
    }
    out.put(k, 32);

    unsigned long prev = 0;
    for (unsigned long val : v) {
      while (val - prev >= twok) { out.put(1); prev += twok; }
      out.put(0);
      out.put(val - prev, k);
      prev = val;
    }
  }
  out.flush(1);
} 
```

减压：

```
std::vector<unsigned long> Decompress(std::istream& is) {
  BitIn in(is);
  unsigned long size = in.get(64);
  if (size) {
    unsigned long k = in.get(32);
    unsigned long twok = 1 << k;

    std::vector<unsigned long> v;
    v.reserve(size);
    unsigned long prev = 0;
    for (; size; --size) {
      while (in.get()) prev += twok;
      prev += in.get(k);
      v.push_back(prev);
    }
  }
  return v;
} 
```

使用可变长度编码可能有点尴尬；另一种方法是将每个代码（1 或 0）的第一位存储在一个位向量中，并将 k 位后缀存储在一个单独的向量中。如果 k 为 8，这将特别方便。

导致文件稍长但更容易为其构建索引的变体是仅使用 1 位作为增量。那么对于某个 a，可能为 0，增量总是 a·2 ^k，其中 a 是后缀代码之前的连续 1 位的数量。然后，该索引由位向量中每个第N^个1位的位置以及到后缀向量中的相应索引（即与位向量中的下一个0对应的后缀的索引）组成。

* * *

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-30T22:04:17.600

过去对我来说效果很好的一个选项是将 64 位整数列表存储为 8 个不同的 8 位值列表。您存储数字的高 8 位，然后是接下来的 8 位，等等。例如，假设您有以下 32 位数字：

```
0x12345678
0x12349785
0x13111111
0x13444444 
```

存储的数据将是（十六进制）：

```
12,12,13,13
34,34,11,44
56,97,11,44
78,85,11,44 
```

然后我通过放气压缩机运行它。

我不记得我能用这个实现什么压缩比，但它比压缩数字本身要好得多。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-30T22:09:42.133

我想用最简单的解决方案添加另一个答案：

1.  如前所述，将数字转换为增量
2.  通过 7-zip LZMA2 算法运行它。它甚至支持多核

我认为这将在您的情况下给出几乎完美的结果，因为距离分布简单。7-zip就能把它捡起来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T06:10:41.607

如果您的序列由**伪**随机数组成，例如可能由典型的数字计算机生成，那么我认为任何压缩方案都不会胜过，为了表示的简洁，只需存储生成器的代码和任何东西您需要定义其初始状态的参数。

如果您的序列由以某种非确定性方式生成的真正随机数组成，那么已经发布的其他答案提供了各种好的建议。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-07-06T09:07:33.520

您可以简单地使用[Delta Encoding](https://en.wikipedia.org/wiki/Delta_encoding)和[Protocol Buffers](https://developers.google.com/protocol-buffers/docs/encoding)。

就像你的例子：4、20、23、40、66。

Delta 编码压缩：4、16、3、17、26。

然后，您将所有数字作为 varint 直接存储在 Protocol Buffers 中。0-127 之间的数字只需要 1 个字节。128-16384 之间的数字需要 2 个字节......这对于大多数场景来说已经足够了。

此外，您还可以使用熵编码（霍夫曼）来实现比 varint 更有效的压缩率。每个数字甚至少于 8 位。

将一个数除以 2 部分。比如 17=...0001 0001（二进制）=(5)0001。第一部分 (5) 是有效位数。后缀部分 (0001) 没有前导 1。

像这个例子：4、16、3、17、26 = (3)00 (5)0000 (2)1 (5)0001 (5)1010

即使有很多数字，第一部分也会在 0-45 之间。所以它们可以通过像霍夫曼这样的熵编码来有效地压缩。

# javascript - 捕获 Wii/Opera 9 上的所有 JavaScript 错误/异常

> ID：12664434
> 
> 赞同：8
> 
> 时间：2012-09-30T19:40:50.023
> 
> 标签：javascript, dom-events, opera

我正在更新我为 Nintendo Wii 构建的网站，并且正在寻找一种调试应用程序的好方法。Wii 的浏览器（Opera 9.3 的一个版本）没有任何类型的 JavaScript 控制台。我打算使用各种远程调试控制台解决方案之一（例如[jsconsole.com](http://www.jsconsole.com)），但它们似乎都不起作用。我怀疑其原因是某种不受支持的功能，但如果没有控制台或某种错误输出，我无法弄清楚那是什么。

我尝试过的事情：

1.  `window.onerror`（[直到 Opera 11.6 才支持](http://dev.opera.com/articles/view/better-error-handling-with-window-onerror/)）
2.  [覆盖`Error.prototype.toString`方法](https://stackoverflow.com/a/6342356/362536)（适用于台式机，不适用于 Wii）
3.  [似乎将脚本包装在`try/catch`块](https://stackoverflow.com/q/645840/362536)中的代码（不会因引用错误而引发异常，而不会引发异常。/ `try`有效`catch`，但仅适用于我抛出的异常。）
4.  `<body onerror="alert('ERROR!!!')" />`
5.  PhoneGap 的远程调试器 / Weinre

对于捕获整个页面的错误和未处理的异常，还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:02:19.410

您总是可以自己编写调试代码，例如：

```
try{
    yourFunction();
}catch(e){
    alert('yourFunction failed!');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:01:48.287

[此链接](https://stackoverflow.com/questions/1648582/equivalent-of-firefoxs-error-console-in-other-browsers)建议查看[firebug lite](http://getfirebug.com/firebuglite)。我不知道它在 wii 浏览器上的表现如何，因为我不拥有该设备。

可惜引擎太旧，无法支持蜻蜓。

# java - 当我做任何事情时，JNI 崩溃：S

> ID：12664436
> 
> 赞同：2
> 
> 时间：2012-09-30T19:40:56.447
> 
> 标签：java, c++, java-native-interface

Java代码：

```
package library;

import java.nio.ByteBuffer;

public class Library
{    
    static{System.loadLibrary("TestDLL");}

    native static void GetGLBuffer(ByteBuffer Buffer, int Width, int Height, int Size);

    public static void main(String[] args) {

        ByteBuffer B = ByteBuffer.allocateDirect(5);
        byte[] C = {'H', 'E', 'R', 'E', '\0'};
        B.put(C);
        GetGLBuffer(B, 0, 0, 4);
        System.out.println((char)B.get(0));
    }
} 
```

C++ 代码：

```
JNIEXPORT void JNICALL Java_library_Library_GetGLBuffer(JNIEnv *env, jclass cls, jobject buffer, jint Width, jint Height, jint Size)
{
    unsigned char* Buff = (unsigned char*)env->GetDirectBufferAddress(buffer);
    //*Buff = 'A'; Crashes it.
    //Buff[0] = 'A'; Crashes it.
    //std::cout<<Buff[0]; Prints fine but crashes when this function ends.
} 
```

如果我什么都不做，它工作得很好。另外，如果我在上面的函数中声明变量，它会崩溃。

我如何解决它？我做错什么了吗？

它打印出这个文件： http: [//pastebin.com/Mz76Bk8G](http://pastebin.com/Mz76Bk8G)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:17:08.693

我只想说我解决了。我必须进入我的 JNI 文件夹，将 JDK 7 的 JNI.h 和 JNI_MD.h 复制到我的 C++ 项目文件夹中，将其作为文件包含并使用 .def 文件进行导出。

如果不执行上述所有步骤，它会使 JVM 崩溃。现在我不知道为什么，但我很高兴它有效。我发布这个是为了让其他有同样问题的人解决它。

谢谢大家的意见。很难弄清楚出了什么问题。希望此评论对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:20:19.183

问题是您没有将一个字节数组传递给您的 C 函数，而是一个 ByteBuffer 对象。要在缓冲区内设置值，您需要调用缓冲区对象上的方法，这在 C 中意味着查询对象的类，查询类以获取正确的方法，然后调用该方法。

例如，如果你想在 ByteBuffer 对象上调用 put(int index, byte b) 方法，你需要在你的 C 代码中做这样的事情：

```
jclass cls = (*env)->GetObjectClass(env, objID);
jmethodId mid = (*env)->GetMethodID(env, cls, "put","(IB)V");
if(mid == 0) return;
(*env)->CallVoidMethod(env, objID, mid, 0, 'A'); 
```

# c# - 如何在 Mono for Android 中下载多个 xml 文件而不会损坏堆内存？

> ID：12664439
> 
> 赞同：1
> 
> 时间：2012-09-30T19:41:14.300
> 
> 标签：c#, android, mono, xamarin.android, monodevelop

我目前正在使用 Visual Studio 2012 IDE，并且正在使用 C# 和 Mono for Android 框架开发一个 Android 应用程序。

我的问题是您如何正确地请求您的应用程序下载一堆文件并将它们存储在您的设备上？

目前，我无法下载所需的 69 个 xml 文件（总计约 6 MB），因为它返回“*ABORTING: HEAP MEMORY CORRUPTION IN tmalloc_large*”错误。但是，我已经测试了 30 个文件（大约 3 MB），它可以很好地下载它们并且我可以使用它们。我需要所有 69 个文件来运行我的应用程序。请帮忙。以下是我正在使用的方法，请提供更正、补充或替代方法。我深深地感激它。

```
public void DownloadLanguagePack(string language, string[] files)
{            
    // Download each file inside the 'files' array
    for (var i = 0; i < files.Length; i++)
    {
        string[] args = { language, files[i].FileName};

        // This way...
        WebClient wc = new WebClient();
        wc.OpenReadCompleted += wc_OpenReadCompleted;
        wc.OpenReadAsync(new System.Uri(files[i].FileURL), args);
    }
}

void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    string[] args = (string[])e.UserState;
    string language = args[0];
    string filename = args[1] + ".xml";

    if (Android.OS.Environment.ExternalStorageState == Android.OS.Environment.MediaMounted)
    {
        // Directory logic, works just fine
        var dir = new Java.IO.File(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal));
        var folder = new Java.IO.File(dir, language);
        var file = new Java.IO.File(folder, filename);
        if (!folder.Exists())
        {
            folder.Mkdirs();
        }

        // Tested with & without ThreadPool and makes no difference.
        ThreadPool.QueueUserWorkItem((c) =>
        {
            // THIS IS THE AREA THAT I BELIEVE NEEDS SOME WORK, MAYBE NOT.
            XDocument doc = new XDocument();
            using (Stream s = e.Result)
            {
                // Load xml into document
                doc = XDocument.Load(s);

                using (var stream = new StreamWriter(file.Path, false))
                {
                    // Save document
                    doc.Save(stream);
                    stream.Flush();
                    stream.Close();

                    GC.Collect();
                }
            }
        });
    }
} 
```

# c# - linq 查询将重复 EDI 数据映射到 XML 结构

> ID：12664443
> 
> 赞同：1
> 
> 时间：2012-09-30T19:41:34.117
> 
> 标签：c#, linq, edi

长话短说（详情见下文），有谁知道我可以构建一个查询以将重复数据返回为已知的 xml 格式，因此每个节点和子元素都针对给定条件分别返回？
**编辑：**我想我的问题归结为：如何查询重复数据，并获取一组条目，直到下一次出现重复？
UNB
UNH
MID
DAN
UNS
UNT
UNH
MID
DAN
UNS
UNT
UNH
MID
DAN
UNS
UNT
UNH
MID
DAN
UNS
UNT
UNH
MID
DAN
UNS
UNT
因此，在这种情况下，知道某些段重复，我如何编写一个返回 UNH - UNT 的查询，分组为：
UNH
MID
DAN
UNS
UNT

**完整详细信息** 我需要将通用 edi (EDIFACT) 写入 xml 映射器。由于 xml 是结构化的，并且已知我已经设计应用程序来导入 xml 文件，使用实体框架提取和存储文件的结构。
![在此处输入图像描述](../Images/981c5d352efb7c7d627999dbef73048a.png) Xml 结构存储为称为 Translation 的自引用实体。翻译包含 xml 节点、它映射到的 Edifact 段名称以及要从中提取值的组合和元素的位置。翻译也将自身引用为父/子关联（以反映 xml 结构）。UI 会自动将每个节点中的内容与段、复合和元素位置进行匹配。我遇到的问题是如何将重复数据分离到适当的重复父节点中： ![所需的 XML 结构在右侧，我的输出在左侧](../Images/f7a27d4c15a39f581a17d9455435beb7.png) 我通过在没有父母的情况下提取翻译来构建它，然后递归地沿着树走：

```
var rootTrans = (from t in Translations
                    where t.ParentID==null
                    select t).ToList();
//(msg is the EDI transmission with a collection of segments-each segment contains composites, each composite contains elements with the actual data eg- )

XElement root = new XElement(Tag.Replace(" ", ""));
foreach (var item in rootTrans)
{
    item.AddContentRecursive(root, msg);
}

var doc = new XDocument(root);

// AddContentRecursive
public void AddContentRecursive(XElement element, Transmission msg)
{
    // Find matching segments for this tag
    var segNodes = (from s in msg.Segments
                        where s.Value == Name
                        select GetElementValue(s, Positions)).DefaultIfEmpty(null);
    // simply add the matching nodes to the parent element
    if (Children.Count == 0)
    {
        var nodes = (from t in segNodes
                        select new XElement(Tag, t));
        element.Add(nodes);
    }
    else
    {
        var aNode = new XElement(Tag);
        element.Add(aNode);
        foreach (var chil in Children.OrderBy(c => c.DocumentOrder))
        {
            chil.AddContentRecursive(aNode, msg);
        }
    }
} 
```

EDI 文件由客户控制，并遵循他们自己的模式，从下面的示例中，UNH 段是一个消息头，并且将重复直到一个 UNT。UNH 的翻译实体有一个名为 tag (MessageHeader) 的属性和一个名为 Name (UNH) 的属性：

> UNH+ORDERR319952+ORDERR:1::OD'
> MID+ORDERR319952+120818'
> DAN+:ADVICE NOTE+TGBGU649'
> MSD+CR'
> SDT+0831824'
> BDT+PIPUK+++++RB'
> ART++46210JD000:::: :PIPE WORK,RH'
> DLV++2160:45'
> DTP+120823:1700'
> PIN+21'
> TCO+:BLB+24+90'
> CSG+0831824+F01-XJ10'
> UNS+S'
> UNT+14+ORDERR319952'
> UNH +ORDERR340246+ORDERR:1::OD'
> MID+ORDERR340246+120818'
> DAN+:ADVICE NOTE+RRHBU636'
> MSD+CR'
> SDT+0831824'
> BDT+PIPUK+++++RB'
> ART++46210JD005:::::管道工程,LH'
> DLV++2160:45'
> DTP+120823:1700'
> PIN+21'
> TCO+:BLB+24+90'
> CSG+0831824+F01-XJ10'
> UNS+S'
> UNT+14+ORDERR340246'
> UNH+ORDERR340247+ORDERR:1::OD'
> MID+ORDERR340247+120818'
> DAN+:ADVICE NOTE+RRHBU641'
> MSD+CR'
> SDT+0831824'
> BDT+PIPUK+++++ RB'
> ART++46210JD600:::::PIPE WORK,RH'
> DLV++4200:45'
> DTP+120823:1700'
> PIN+21'
> TCO+:BAC4325+28+150'
> CSG+0831824+F01-XJ10'
> UNS +S'
> UNT+14+ORDERR340247'

我尝试了查询、递归、循环的不同组合，我知道我缺少一些基本的东西，我在砖墙领域。有没有人遇到过这种问题？任何有关塑造查询的建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:29:15.130

After hours of solitary running in circles, a 10 minute discussion with a colleague yields a working solution. It was to let the segments determine the flow (instead of the mapping like I intended).

EDI data is sequential, and by extension the segments are also sequential, therefore it was a matter of stepping through each segment, paired with its translation or map, and using place holders to create and nest the XML nodes.

Not the prettiest (there are likely better ways of doing the same thing), but it works consistently:

```
// Get a collection of segments and maps
var SegsAndMaps = (from s in msg.Segments
                    join t in Maps on s.Value equals t.Name
                    orderby s.Id
                    select new { Segment = s, Map = t }).ToList();
// Set the placeholders
currentNode = null;
currentParent = null;
for (int i = 0; i < SegsAndMaps.Count; i++)
{   
    var item = SegsAndMaps[i];
    // Separate the properties from anonymous type for clarity
    var aMap = item.Map;
    var aSegment = item.Segment;
    var xml = aSegment.Xml(aMap);
    // If this map shares the same parent
    if (aMap.Parent == currentParent)
    {
        // Add the xml to the current node
        currentNode.Add(xml);
    }
    else
    {
        // Change of parent, walk up the tree to get the right parent
        var trans = aMap;
        while (currentParent != aMap.Parent)
        {
            trans = trans.Parent;
            currentParent = trans.Parent;
        }
        // Walk up the xml tree to find the parent tag to add this xml to
        currentNode = currentNode.Ancestors().DescendantsAndSelf(currentParent.Tag).FirstOrDefault();
        currentNode.Add(xml);
    }
    if (aMap.Children.Count > 0)
    {
        // If this map has child mappings, then update current parent to this, and its xml as the current node
        currentNode = xml;
        currentParent = aMap;
    }
}

var doc = new XDocument(currentNode); 
```

# iphone - iphone 两个笔尖的中心 x 坐标不同

> ID：12664448
> 
> 赞同：0
> 
> 时间：2012-09-30T19:42:04.567
> 
> 标签：iphone, layout, center, nib

好吧，这真的很奇怪。

我什至不知道如何表达这个问题。我正在使用 XCode 4.5 我有两个视图，每个视图都有自己的 NIB。有可能在更早的 XCode 版本中创建了一个 NIB，而在 4.2 中创建了一个（我不记得了）

我有一个要水平居中的图标。

在一个 NIB 中，当我将其居中时，Frame Rectangle 显示 X/Y 坐标 = 160x46，这在其居中且靠近显示器顶部时是有意义的

在另一个 NIB 中，框架矩形是：X/Y 坐标 = 204x46 但它也基本上居中（它可能偏离了几个像素）

如果将 Frame Rect 设置为 160 x 46，则图标会向左移动。

就像 Interface Builder 认为一个 NIB 比另一个更宽/更密集

它们设置为大小：无，方向：纵向视图模式 = 缩放以填充。

我为 Retina4 复制了它们，因为我想布局略有不同，当我将大小设置为 Retina 4" 时会出现同样的问题

我看不到任何可能会搞砸的设置.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:36:47.367

做一件事不要从 XIB 更改从代码中设置它。对于 X 值，您可以设置

> self.view.center.x

对于 Y 值

> self.view.center.y

# cordova - 如何使用 captureVideo 在 PhoneGap 中保存视频？

> ID：12664449
> 
> 赞同：4
> 
> 时间：2012-09-30T19:42:06.457
> 
> 标签：cordova

使用 captureImage() 中的选项在 PhoneGap 中捕获和保存图像非常简单直接，但 captureVideo 只有 3 个选项（均不支持），它们与保存视频无关。

有没有人在视频被捕获后使用 File 对象来做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:58:03.113

获取更多信息：[http ://docs.phonegap.com/en/2.1.0/cordova_media_capture_capture.md.html#CaptureVideo](http://docs.phonegap.com/en/2.1.0/cordova_media_capture_capture.md.html#CaptureVideo)

如果您要使用 captureVideo，您的视频会自动保存并访问它，请尝试以下操作：

```
function captureSuccess(mediaFiles) {
    alert(mediaFiles[0].fullPath);       
} 
```

注意：把null放在option参数或者limit:1

完整示例：

```
function captureSuccess(mediaFiles) {
    alert(mediaFiles[0].fullPath);       
}

function captureError(error) {
    alert('An error occurred during capture: ' + error.code);
}

function captureVideo() {
    navigator.device.capture.captureVideo(captureSuccess, captureError, null);
} 
```

# javascript - 奇怪的css位置问题

> ID：12664452
> 
> 赞同：0
> 
> 时间：2012-09-30T19:42:16.333
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我在我的项目中使用了[Choosen](http://harvesthq.github.com/chosen/)和[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。我想要得到的是，在可折叠的 div 上获得选择的下拉列表，但它位于其他内容之下。这是jsfiddle

[http://jsfiddle.net/tt13/CFbpt/5/](http://jsfiddle.net/tt13/CFbpt/5/)

我错过了什么？如何解决这个问题？

![在此处输入图像描述](../Images/41a987fe7d1b77f414639b39de6c280e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:51:06.267

这应该照顾一切：

```
.collapse.in { overflow: visible; }
.chzn-drop { display: none; }
.chzn-container-active .chzn-drop { display: block; } 
```

[http://jsfiddle.net/Wexcode/7HLyZ/3/](http://jsfiddle.net/Wexcode/7HLyZ/3/)

# c - 为什么 getpwnam() 总是在函数中返回根信息？

> ID：12664456
> 
> 赞同：1
> 
> 时间：2012-09-30T19:43:02.353
> 
> 标签：c, root, getpwnam

我编写了一个简单的程序，它调用`getpwnam()`一个用户名，将该用户名传递给一个函数，然后`getpwnam()`再次调用。出于某种原因，我总是在函数内部获取 root 的密码信息。

```
#include <sys/types.h>
#include <pwd.h>
#include <stdio.h>

void printuser(char *username) {
  printf("USERNAME2: %s\n", username);
  struct passwd *user_info = getpwnam(username);
  printf("USERNAME3: %s\n", username);
  printf("USERNAME4: %s\n", user_info->pw_name);
}

int main(int argc, char *argv[]) {
  struct passwd *user_info = getpwnam(argv[1]);
  printf("USERNAME1: %s\n", user_info->pw_name);
  printuser(user_info->pw_name);
  printf("USERNAME5: %s\n", user_info->pw_name);
} 
```

该程序总是产生以下输出：

```
$ ./test_getpwnam chenxiaolong
USERNAME1: chenxiaolong
USERNAME2: chenxiaolong
USERNAME3: root
USERNAME4: root
USERNAME5: root 
```

我在手册页中找不到与此相关的任何内容。有什么我做错了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:14:39.653

> 返回值可能指向一个静态区域，该区域被后续调用 getpwent()、getpwnam() 或 getpwuid() 覆盖。

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/getpwnam.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getpwnam.html)

特别是，无法保证读/写的顺序，因此将返回的数据传递`getpwnam`给`getpwnam`.

你真的根本不应该使用`getpwnam`；改为使用`getpwnam_r`。

# node.js - 如何在 NodeJS 中创建动态下拉菜单？

> ID：12664457
> 
> 赞同：2
> 
> 时间：2012-09-30T19:43:15.130
> 
> 标签：node.js, ejs

我正在试验节点 Js。如何创建动态下拉菜单？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:44:58.920

```
<div class="control-group">
   <%- form.label("state_or_province", false, {class: "control-label"}) %>
   <div class="controls">
   <!--       <%- form.input("state_or_province") %> -->
     <select id="Facility_state_or_province" name="Facility[state_or_province]" size="1">
       <% state_or_province_list.forEach(function (state_or_province_entry) { %>
         <option value = "<%= state_or_province_entry.lookup_code %>" <%= (facility.state_or_province != null) && (facility.state_or_province == state_or_province_entry.lookup_code) ? 'selected = "selected"' : '' %>><%= state_or_province_entry.meaning %></option>
   <% }); %>  
 </select>
    </div>
</div> 
```

# android - 从非 Activity 类开始一个新的 Activity

> ID：12664463
> 
> 赞同：19
> 
> 时间：2012-09-30T19:44:27.017
> 
> 标签：android, android-activity

我想在非 Activity 类中开始一个新的活动，实现`DialogListener`以下是我的代码：

```
public class FacebookLoginDialog implements DialogListener {
  @Override
  public void onComplete(Bundle values) {
    HomeActivity.showInLog(values.toString());

    Intent i1 = new Intent (this, SearchActivity.class);
    startActivity(i1);
  }

  @Override
  public void onFacebookError(FacebookError e) {
    // TODO Auto-generated method stub
  }

  @Override
  public void onError(DialogError e) {
    // TODO Auto-generated method stub
  }

  @Override
  public void onCancel() {
    // TODO Auto-generated method stub
  }
} 
```

我无法使用`onComplete`方法中的意图开始新活动，请帮助。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-30T19:50:10.697

这不起作用，因为您需要 a`Context`才能开始新活动。你可以将你的类重新组织成这样的：

```
public class FacebookLoginDialog implements DialogListener {
  private final Context context;

  public FacebookLoginDialog(Context context) {
    this.context = context;
  }

  @Override
  public void onComplete(Bundle values) {
    HomeActivity.showInLog(values.toString());

    Intent i1 = new Intent (context, SearchActivity.class);
    context.startActivity(i1);
  }

  //Other methods...
} 
```

然后它将起作用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-30T20:01:52.117

将上下文作为构造函数参数传递，然后试试这个

```
Intent i = new Intent(this, SearchActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-19T01:59:26.157

使用非活动类的starActivity：

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.putExtra(Intent.EXTRA_TEXT, "YOUR STRING");
        intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Share via...");
        context.startActivity(Intent.createChooser(intent, "Share")); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-02-19T08:03:36.573

为了方便使用，您可以使用此特定方法的方法：

```
public class Something
{
   public static void navigate(Context context,  Class<?> nameOfClass)
    {
        Intent i = new Intent(context, nameOfClass);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    }
} 
```

每次都可以通过调用这个在其他类和方法中调用：

```
Something.navigate(activityName.this, classYourWantTONavigateTo.class); 
```

# python - 将多个列表的输出组合成一个列表（Python）

> ID：12664471
> 
> 赞同：0
> 
> 时间：2012-09-30T19:45:29.510
> 
> 标签：python, list, python-2.7

我正在尝试制作一个输出随机哈希的简单循环。

```
 import bcrypt
    from Crypto.Random import random

    def PRG():
        return random.randint(1,100000)

    def p():
        return [str(bcrypt.gensalt(PRG()))]

    for i in range(1,6):
        print(list(p())) 
```

这将返回：

```
 ['$2a$31$GyPdJsZDHSdfFlRqrtkuWO']
    ['$2a$31$r.d6EnQelVkLRkhgLT/dDe']
    ['$2a$31$TAFTlk09m1mZTrZjxqzxGu']
    ['$2a$31$dEC9aKcvz47tqtDH6Ge5XO']
    ['$2a$31$f3Qt6P9zXt7D2JCntGWCOu'] 
```

我想将这些列表合并为一个列表。我知道一旦我知道输出，我就可以将列表与另一行代码一起添加，但是用 100 个不同的列表来做这件事是不切实际的。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:03:06.937

我建议`p()`只返回一个元素，并使用列表推导来构建最终列表：

```
def p():
    return str(bcrypt.gensalt(PRG()))

list_of_salts = [p() for _ in range(1,6)] 
```

# linux - 如何削减 ifconfig 以单独获取 eth* 详细信息？

> ID：12664473
> 
> 赞同：0
> 
> 时间：2012-09-30T19:45:39.137
> 
> 标签：linux, bash, grep, ifconfig

我正在编写一个脚本来打印 ifconfig 的 ethtool 详细信息。

示例输出应该来自 ifconfig 就像，

```
eth0
eth1
eth2 
```

我试过使用下面的命令，

```
root@bt# ifconfig | cut -d ":" -f 1 
```

但无法达到同样的效果。

实际上，我需要得到这些`eth*`并通过

```
root@bt# ethtool <arg1> where arg1=eth* 
```

得到结果 :-) 你能帮我从 ifconfig 中获得作物吗？?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:49:04.517

不。

```
$ awk -F: '$1 ~ "eth" { print $1 }' /proc/net/dev
  eth0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:04:48.900

与`grep`& `ifconfig`：

```
ifconfig | grep -o '^eth[0-9]\+' 
```

或者只有`grep`：

```
grep -oP '^ *\Keth[0-9]+' /proc/net/dev 
```

# javascript - Javascript 表格菜单打开时所有表格都已折叠，为什么？

> ID：12664474
> 
> 赞同：0
> 
> 时间：2012-09-30T19:45:45.863
> 
> 标签：javascript, html-table

我有一个带有折叠表的简单菜单，使用 Javascript。我的问题是当我在浏览器中打开它时，所有表格都已经折叠了！如何在菜单部分“关闭”的情况下打开它，然后仅在单击时折叠每个部分？我知道它在 Javascript 中，但我是新手，所以请耐心等待...谢谢！

这是基本代码：

```
<head>
<script>
function doCollapse(rowname)
{
theElement = document.getElementById(rowname);
if(theElement.style.display == 'none'){
theElement.style.display = '';
}else {
theElement.style.display = 'none';
}
return false;
}
</script>
</head>

<body>
<table>
<tr>
  <td>
    <p1 onClick=" doCollapse ('r1');">JQ</p>
  </td></tr>
<tr>
  <td id="r1">ver biografia</td></tr>

<tr>
  <td>
   <p2 onClick=" doCollapse ('r2');">Obras</p>
 </td>
</tr>
<tr>
<td id="r2">lista</td></tr>

<tr>
  <td>
 <p3 onClick=" doCollapse ('r3');">Exposições</p>
  </td>
</tr>
<tr>
  <td id="r3">lista</td></tr>

</table>
</body>
</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:11:58.777

Since you are using pure javascript and not a library like [jquery](http://jquery.com), I'd suggest a couple of modification to easily target your elements. Try to put the items to show and hide inside a `span` so you can use `document.getElementsByTagName` and then add the Id to those spans rather than on `td`. My concern was that you have more `td` in your code, so you using `document.getElementsByTagName` would affect them as well, which is not what you need. However, you need to be careful that my solution would also suffer from that side effect if you have more spans in your code, which is likely, so you need to take this consideration before you implement this live. Here is the code and you can see a [live demo here](http://jsfiddle.net/QwfSe/)

```
<head>
<script>
    function init(){
        var numberOfRows = document.getElementsByTagName('span').length;
        for (var i = 0; i < numberOfRows; i++){
       document.getElementsByTagName('span')[i].style.display = 'none';
        }

    }

function doCollapse(rowname)
{
theElement = document.getElementById(rowname);
if(theElement.style.display == 'none'){
theElement.style.display = 'inline';
}else {
theElement.style.display = 'none';
}
return false;
}
</script>
</head>

<body onload="init()">
<table>
<tr>
  <td>
    <p onClick=" doCollapse ('r1');">JQ</p>
  </td></tr>
<tr>
    <td><span id="r1">ver biografia</span></td></tr>

<tr>
  <td>
   <p onClick=" doCollapse ('r2');">Obras</p>
 </td>
</tr>
<tr>
<td><span id="r2">lista</span></td></tr>

<tr>
  <td>
 <p onClick=" doCollapse ('r3');">Exposições</p>
  </td>
</tr>
<tr>
    <td><span id="r3">lista</span></td></tr>

</table> 
```

# mysql - 条件加入：不加入空

> ID：12664475
> 
> 赞同：0
> 
> 时间：2012-09-30T19:45:49.260
> 
> 标签：mysql, join

我有可能不一定存在的关系（它们可能是可选的，即 null）；例如，图像可能没有地址，因此它可能为空。

我不确定如何不返回所有空值。

我可以在连接上设置一些条件，说明如果地址为空，则不进行连接并且不返回所有空列？

```
SELECT im.title, im.alias_title, im.description, im.main_image, im.hits, 
    im.show_comment, im.created_on, im.date_taken, im.account_type_id,
    c.make, c.model, ad.address_line_1, ad.address_line_2, 
    spc.state_province_county, tvc.town_village_city, co.country, 
    ge.latitude, ge.longitude, ge.zoom, ge.yaw, ge.pitch, 
    us.first_name, us.surname, us.user_set_online, ut.username,
    ut.account_type_id, aty.`type`, ufy.realname, ufy.location, 
    ufy.location, ufy.account_type_id
FROM image im 
    INNER JOIN user us 
            ON im.user_id = us.id
     LEFT JOIN user_type ut 
            ON us.id = ut.user_id
     LEFT JOIN user_flickr_youtube ufy 
            ON ut.id = ufy.user_type_id  
     LEFT JOIN account_type aty 
            ON ut.account_type_id =aty.id
     LEFT JOIN address ad 
            ON im.address_id = ad.id
     LEFT JOIN state_province_county spc 
            ON ad.state_province_county_id = spc.id
     LEFT JOIN town_village_city tvc 
            ON ad.town_village_city_id =tvc.id
     LEFT JOIN country co 
            ON ad.country_id =co.id
     LEFT JOIN geolocation ge 
            ON im.geolocation_id = ge.id
     LEFT JOIN camera c 
            ON im.camera_id = c.id
WHERE im.alias_title = 'test' 
    AND im.approved = 'Yes' 
    AND im.visible = '1'
LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:54:40.560

> 是否有一些条件我可以在连接上设置，如果地址为空，请不要进行连接，不要让我返回所有空列

是的; 您可以运行 a`JOIN`而不是 a `LEFT JOIN`。但这不会简单地排除地址，如果它是 NULL，它会完全忽略整行。

通常这种情况要么通过提供默认值来处理，可能为空，例如直接在 MySQL 中

```
SELECT
...COALESCE(ad.address_line_1,'(no address)') AS address_line_1,
   COALESCE(ad.address_line_2,'')             AS address_line_2, ... 
```

或者由应用程序处理：

```
if row['address_line_1']:
   result = result + ("<td class=\"address\">%s</td>" % ( row['address_line_1'] ))
... 
```

这也是因为查询可能返回的不是一条记录，而是多条记录，其中一些可能有 NULL 列，而另一些可能没有。

**更新**

有一种方法，但它可能会使奶牛的牛奶变酸 50 英里的距离。

这是一个概念证明，在一个更小的查询和表上，并利用了动态构建查询的可能性。

首先我们有我们的查询`WHERE`条件，这里用“id = 1”表示。`name`如果`name`列不为 NULL ，我们希望拥有该列。

```
SELECT @address := COALESCE(MIN(',name'),'') FROM client WHERE name IS NOT NULL AND id = 1; 
```

如果所选列为 NULL，这将返回一个空字符串。否则它将返回一个逗号和该列的名称。

鉴于您的查询，这句话在您的情况下将是巨大的。它包含与`WHERE`以前相同的内容，但不要求名称为 NULL。字段列表现在是动态的。

```
SELECT @string := CONCAT('SELECT id', @address, ' FROM client WHERE id = 1'); 
```

除了那`@string`是一个字符串。要将其作为查询执行，我们执行

```
PREPARE query FROM @string;
EXECUTE query;
DEALLOCATE PREPARE query; 
```

这可能如何与您的应用程序交互，我不敢理解。我已经在一个消耗性 VM 上尝试了 PHP 的实现:-)，在 1 和 3 的值之间循环（一行有一个 NULL 名称，一个没有）。

```
<?php
        // Connect to this VM's local DB
        mysql_connect('localhost','root','') or die("Cannot connect");
        mysql_select_db('test');

        foreach(array(1, 3) as $id)
        {
                mysql_query("SELECT @address := COALESCE(MIN(',name'),'') FROM client WHERE name IS NOT NULL AND id = $id;");
                mysql_query("SELECT @string := CONCAT('SELECT id', @address, ' FROM client WHERE id = ', $id);");
                mysql_query("PREPARE query FROM @string;");
                $exec = mysql_query("EXECUTE query;");
                while($tuple = mysql_fetch_assoc($exec))
                {
                        print implode(" | ", $tuple) . "\n";
                }
                mysql_query("DEALLOCATE PREPARE query;");
        }
?> 
```

答案似乎表明它正在工作：

```
1 | Rossi
3 
```

*（如果它返回类似“Ia！Cthulhu fhtagn！”之*类的东西，我不会感到惊讶）。

# javascript - Java 脚本在 html 电子邮件模板中不起作用

> ID：12664481
> 
> 赞同：0
> 
> 时间：2012-09-30T19:46:22.447
> 
> 标签：javascript, html, web-services, onclick, gmail

我有一个场景，我需要使用 c# 发送电子邮件，这可以使用 SMTP 轻松完成，但挑战是将 web 服务合并到 html 邮件中，因此我在邮件正文中使用 java 脚本来访问 web 服务时引发按钮点击。

作为一个 html（网页），它工作得非常好，但是当我发送邮件并尝试单击邮件中的按钮时，onclick 没有引发 jscript，因此没有发生任何操作，它实际上已被**禁用**。

我检查了特定html标签中的firebug（在firefox中），令我惊讶的是jscript标签不存在因此没有引发事件。我的问题是我们可以在 html 电子邮件中访问网络服务吗？JScripts 不能在 Gmail 上工作吗？
html电子邮件是否仅使用href进行重定向...根据我的经验，我从未收到任何使用java脚本的邮件（例如单击按钮会放大同一页面中的图像，这在html，asp中很可能页）。

提前谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T19:48:07.917

除了努力理解这个问题之外，Javascript 在大多数邮件客户端中都不起作用。故意禁用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:01:30.660

您不能通过电子邮件自动调用 Web 服务。您必须创建一个 URL 供收件人打开，并让他们从浏览器中的网页访问 Web 服务。

出于安全原因，任何合理的电子邮件客户端都禁用了 JavaScript 和任何其他第三方通信方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:48:33.567

我不知道有任何电子邮件客户端或网络邮件服务会执行嵌入在 HTML 电子邮件中的 JavaScript。

将电子邮件中的 HTML 使用限制为格式化。如果您需要 Web 应用程序，请改为链接到它。

# ruby-on-rails - Ruby on Rails：如何为组织和客户建模？

> ID：12664482
> 
> 赞同：0
> 
> 时间：2012-09-30T19:46:36.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在构建一个**用户**可以拥有许多**客户端**（不能在用户之间共享）的应用程序。

这是一个相当小的应用程序，但*可能会*发生两个**客户端**属于同一个**组织**的情况。因此，最好有一个额外的表格来保存有关该组织的所有信息。客户也可能是私人客户并且不*属于*任何组织。

我知道这在数据库设计中是相当普遍的，但是如何在 Rails 中建模呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:07:35.587

组织与用户的关系如何？如果用户和组织彼此独立，最简单的解决方案是拥有......

```
User         - has_many :clients
Organization - has_many :clients
Client       - belongs_to :user, belongs_to :organization 
```

但我猜这里涉及的更多？您是否正在寻找多对多的解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:15:33.047

答案是@peter-duijnstee 所说的，并提出了额外的限制：

```
class Organization < ActiveRecord::Base
  belongs_to :user
  validates :user, :presence => true
end

class Client < ActiveRecord::Base
  belongs_to :user
  belongs_to :organization

  # note the final "s", it validates a field
  validates :user, :presence => true 

  # no final "s", validate using a method
  validate :organization_user, :if => :organization_present?

  def organization_present?
    organization.present?
  end

  def organization_user
    errors.add(:organization_id, "is not allowed") unless organization.user_id == user_id
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T16:40:47.133

```
User has many clients.
Client belongs to user. 
```

这相当简单。如果您使用的是关系数据库，“clients”表将有一个外键“user_id”。

在客户和组织之间，是一对多的吗？还是多对多？如果是一对多，你可以这样做

```
Organization has many clients.
Client belongs to organization. 
```

如果是多对多，则需要一个映射表

```
Organization has and belongs to many clients.
Client has and belongs to many organizations. 
```

[在此处](http://guides.rubyonrails.org/association_basics.html)了解有关 Rails ActiveRecord 中关联的更多信息

# python - 为 GAE 安装 SimpleAuth 时遇到问题

> ID：12664486
> 
> 赞同：0
> 
> 时间：2012-09-30T19:47:30.043
> 
> 标签：python, google-app-engine, login, oauth, openid

我已经工作了一段时间，试图在 Google App Engine 上安装 SimpleAuth，但我遇到了麻烦。首先在示例代码的底部，他们有这个：

```
def _get_consumer_info_for(self, provider):
       """Should return a tuple (key, secret) for auth init requests.
       For OAuth 2.0 you should also return a scope, e.g.
       ('my app id', 'my app secret', 'email,user_about_me')

       The scope depends solely on the provider.
       See example/secrets.py.template
       """
       return secrets.AUTH_CONFIG[provider] 
```

而且我在任何地方都看不到秘密文件，也看不到它应该做什么。

然后除了那个小问题之外，我很好奇我应该如何将提供者及其登录 URL 呈现给用户。此页面：[https](https://github.com/crhym3/simpleauth/blob/master/example/handlers.py) ://github.com/crhym3/simpleauth/blob/master/example/handlers.py对一般设置有很好的描述，但没有对我们实际需要传递给用户的内容进行任何描述让他们登录。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:25:48.923

首先，请注意这只是一个示例，因此出于演示目的简化了一些代码部分。

`secrets`是一个单独的模块。自述文件说将[secrets.py.template](https://github.com/crhym3/simpleauth/blob/master/example/secrets.py.template)复制到 secrets.py 并设置正确的客户端/消费者 ID 和机密。同样，请参阅 README 以获取有关从何处获取不同提供商的客户端/机密的信息。

渲染由你决定。我做的[一个例子](https://github.com/crhym3/simpleauth/blob/master/example/templates/home.html)是这样的：

```
<p>Try logging in with one of these:</p>
<a href="/auth/google">Google</a>
<a href="/auth/facebook">Facebook</a>
<a href="/auth/openid?identity_url=me.yahoo.com">Yahoo! (OpenID)</a>
<a href="/auth/twitter">Twitter</a>
<a href="/auth/linkedin">LinkedIn</a>
<a href="/auth/windows_live">Windows Live</a> 
```

这些`/auth/...`链接应该路由到与`SimpleAuthHandler`.

[您可以在https://simpleauth.appspot.com](https://simpleauth.appspot.com)上看到示例应用程序，希望它能澄清一些事情。

# kml - 如何创建不允许扩展文件夹的 Google 地球 KML 网络链接

> ID：12664492
> 
> 赞同：1
> 
> 时间：2012-09-30T19:48:19.163
> 
> 标签：kml, google-earth

我创建了一个网络链接，该链接引用另一个 KML 文件，其中包含要加载到 Google 地球中的实际数据。我的问题是引用的 KML 文件中的点数太大，如果 Google 地球中“地点”选项卡下的 KML 文件夹设置为“允许展开此文件夹”（右键单击 KML，特性）。默认情况下，选中此复选框。我想做到这一点，以便默认情况下我创建的每个网络链接都不可扩展。

我在 Google 地球 KML 教程中查找了 checkHideChildren，但该行没有提供任何结果，而且我不完全确定我应该将行放在网络链接 KML 中的什么位置。

这是示例代码，如果您能指出放置这行代码的方向，或者完全不同的方法，将不胜感激！

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.1">
<NetworkLink>
<name>
CPU
</name>
<refreshVisibility>1</refreshVisibility>
<Link id="GPS_Plotter Updater">
<href>CPU.kml</href>
<Style id="style1"><ListStyle>
<listItemType>checkHideChildren</listItemType> <-- this is the line that should be hiding the children points of the KML!
</ListStyle>
</Style>
<styleUrl>#style1</styleUrl>
<refreshMode>onInterval</refreshMode>
<refreshInterval>1</refreshInterval>
<viewRefreshMode>onRegion</viewRefreshMode>
<viewRefreshTime>1</viewRefreshTime>
</Link>
</NetworkLink>
</kml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:26:03.310

尝试将 Style 元素放入 NetworkLink，而不是 Link 元素。Link 不采用样式选择器，但 NetworkLink 采用。如果这不起作用，请尝试使用 listItemType 的 radioFolder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:59:06.677

除了 Mano Marks 的建议之外，您还需要将*styleUrl*元素移动到*NetworkLink*否则它将不适用。请注意，在您的示例中，您有*viewRefreshMode=onRegion*但没有为其定义区域。

这是抑制 NetworkLink 内容的完整工作示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
    <NetworkLink>
        <name>CPU</name>
        <styleUrl>#style1</styleUrl>
        <Style id="style1">
                <ListStyle>
                    <listItemType>checkHideChildren</listItemType>
                </ListStyle>
        </Style>
        <Region>
                <!-- define region here -->
        </Region>
        <refreshVisibility>1</refreshVisibility>        
        <Link id="GPS_Plotter_Updater">
            <href>CPU.kml</href>
            <refreshMode>onInterval</refreshMode>
            <refreshInterval>1</refreshInterval>
            <viewRefreshMode>onRegion</viewRefreshMode>
            <viewRefreshTime>1</viewRefreshTime>
        </Link> 
    </NetworkLink>
</kml> 
```

您可以通过验证 KML 来捕获此类错误。尝试使用 Galdos [KML Validator](http://kmlvalidator.com/home.htm)。

# jquery - Jquery POST 方法在 IE8 上不起作用

> ID：12664494
> 
> 赞同：0
> 
> 时间：2012-09-30T19:48:29.013
> 
> 标签：jquery, ajax, internet-explorer, post

我的 Jquery（版本：1.8.1）代码：

```
$(document).ready(function() {  
    $('#Vehicle-make').change(function() {
        $.post(
            '/cakeMotors/ModelNames/viewList/' ,
            { make_id : $('#Vehicle-make').val() } ,
            function(data) {
                $('#Vehicle-model').html(data); 
            }   
        );
    });
}); 
```

*   在 FF 和 Chrome 上运行良好，甚至检查了服务器对 POST 请求的响应是否为 200。
*   #Vehicle-make 和#Vehicle-model 都是表单选择。
*   这不是跨域请求，所以我认为这不是问题。
*   当我删除 $.post() 并在 .change 事件中放置类似警报的内容时，它可以正常工作！所以，我想 IE 也没有搞砸这一点。

会是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:05:28.790

IE 正在缓存 ajax url。尝试将时间刻度的 url 参数放在末尾 (new Date).getTime()

这将阻止 IE 缓存结果。

是的，这是在黑暗中拍摄的 :)

# ruby-on-rails - 排名位置

> ID：12664499
> 
> 赞同：3
> 
> 时间：2012-09-30T19:49:06.357
> 
> 标签：ruby-on-rails, sum, ranking

我有一个具有以下模型的 Rails 应用程序：

*   用户
*   赌注

用户拥有 many_bets 和 Bets belongs_to User。每个投注都有一个利润损失值，表明用户在该投注中赢/输了多少。

因此，为了计算特定用户总共赢得了多少，我通过以下方式循环他的投注：

```
 User.bets.sum(:profitloss) 
```

我想向用户展示他与所有其他用户相比的排名，可能看起来像这样：

*“你的综合排名：第37位”*

为此，我需要总结每个用户的总奖金，并找出当前用户的位置。

我该怎么做以及怎么做，所以它不会使服务器超载:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T20:14:16.227

你可以尝试类似的东西

```
User.join(:bets).
    select("users.id, sum(bets.profitloss) as accumulated").
    group("users.id").
    order("accumulated DESC") 
```

然后在“用户”的结果列表中搜索（不是真正的用户，他们只有两个有意义的属性，他们的 ID 和一个`accumulated`带有总和的属性），寻找与当前用户对应的一个。

无论如何，要获得单个用户的位置，您必须计算所有用户的位置`accumulated`，但至少这只是一个查询。更好的是，您可以将累积值存储在用户模型中，并仅查询它以进行排名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:18:27.703

如果你有大量的用户和投注，你将无法“按需”计算和排序每个用户的全局利润损失，所以我建议你使用你定期安排的[rake 任务](http://railscasts.com/episodes/66-custom-rake-tasks)（每天一次，每小时等...）

`position`在模型中添加一列`User`，获取所有用户的列表，计算他们的全局利润损失，根据利润损失对用户列表进行排序，最后根据他们在列表中的位置更新`position`每个用户的属性。`User`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T20:21:57.590

最好的方法是在`user`模型本身或与`user`. 如果您不这样做，则必须始终计算所有用户的总和才能获得他们的评分，这意味着对`bets`表进行全表操作。这就是说，这个查询会给你想要的结果，如果超过 1 人的总数相同，它将都算作评分 X：

```
select id, (select count(h.id) from users u inner join 
(select user_id, sum(profitloss) as `total` from bets group by user_id) b2
on b2.user_id = u.id, (select id from users) h inner join
(select user_id, sum(profitloss) as `total` from bets group by user_id) b 
on b.user_id = h.id where u.id = 1 and (b.total > b2.total)) 
as `rating` from users where id = 1; 
```

您将需要插入`user.id`查询`where id = X`

如果您向表中添加一列以`user`跟踪其总数，则查询会更简单一些，在此示例中，列名是`total_profit_loss`：

```
select id, total_profit_loss, (select count(h.username)+1 from users u, 
(select username, score from users) h 
where id = 1 and (h.total_profit_loss > u.total_profit_loss)) 
as `rating` from users where id = 1; 
```

# c++ - C++ 指针问题

> ID：12664501
> 
> 赞同：0
> 
> 时间：2012-09-30T19:49:17.953
> 
> 标签：c++, pointers

我在使用以下代码时遇到问题。我是一名试图自学 C++ 的 Java 开发人员。主要是我在 main() 中的代码没有向根节点插入任何内容。谁能帮我。我确信我的指针有问题。

```
class Node{
    public:
        Node* left;
        Node* right;
        int data;

    Node(int n){
        data = n;
        right = NULL;
        left = NULL;
    }
};

class BST{

    Node* root;

    public:

    BST(){
        root = NULL;
    }

    void insert(int e){
        pinsert(root, e);
    }

    void pinsert(Node* sr, int e){
        if(sr == NULL){
            sr = new Node(e);
        }
        else{
            if((sr->data) > e ){
                pinsert(sr->left, e);
            }
            else{
                pinsert(sr->right, e);
            }
        }
    }
};

int main(){
    BST tree;
    tree.insert(6);
    tree.insert(7);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:52:42.973

您`sr`按值传递并分配给它。这不会改变你`root`。而是通过引用传递它：

```
void pinsert( Node*& sr, int e) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:56:54.570

插入的问题是当您从一个空列表开始时。当您将 a 传递`Node *`给您的`pinsert`函数时，参数是*按 value*传递的，因此您的函数以指针的*副本结束。*当指针为`NULL`时，您将指针更改为指向您的新节点。由于您只有 in 中的指针副本`pinsert`，因此这只更改了指针的副本。当函数返回时，指针和列表不变。

传递对指针的*引用*以解决此问题：

```
void pinsert(Node *&sr, int e) 
```

现在您的其余代码不需要更改，您的函数可以更改指针。

这个问题类似于在 java 中传递对象引用：您可以通过设置字段和调用方法来更改对象的*内容*，但不能将参数更改为新对象或`null`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T19:55:05.697

问题是它`root`总是 NULL，你永远不会给它分配任何东西。

当您致电`pinsert(root, e)`然后执行此操作时：

```
void pinsert(Node* sr, int e){
    if(sr == NULL){
        sr = new Node(e);
    } 
```

您发送根副本并分配给该副本，而不是`root`仍然为NULL的副本。您需要通过引用 ( `void pinsert(Node** sr, int e)`) 发送指针 - 注意 2 'stars' 或`void pinsert(Node*& sr, int e)`.

# c# - 我怎么能发短信？

> ID：12664504
> 
> 赞同：-2
> 
> 时间：2012-09-30T19:49:44.703
> 
> 标签：c#, .net, visual-studio-2010, windows-phone-7, mobile

我目前正在开发适用于 Windows Phone 的应用程序。我想做的很简单——允许用户设置时间，此时手机会向指定号码发送短信。

是否有可能做到这一点 ？我怎样才能做到这一点 ？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:14:54.290

有一种方法可以通过编程方式在“Body”和“To”字段中启动消息应用程序[。SmsComposeTask 类](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.smscomposetask%28v=vs.92%29.aspx)是启动消息应用程序所需要的。

# php - 测试系统：检查答案是否正确

> ID：12664505
> 
> 赞同：0
> 
> 时间：2012-09-30T19:49:48.197
> 
> 标签：php, wordpress

我正在创建一个由 Wordpress 驱动的测试系统，其中每个答案都使用真/假文本框输入，以说明它是否是正确答案。

我创建了一个循环输出答案，旁边有一个复选框：

```
<?php if(get_sub_field('answer_options')): ?>
<?php while(has_sub_field('answer_options')): ?>
<p class="contact-form">
  <input style="width: 20px;" type="checkbox" name="CheckboxGroup<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
  <?php echo the_sub_field('answer'); ?>
</p>
<?php endwhile; ?>
<?php endif; ?> 
```

如何向其中添加代码以包括答案是否正确？我可以做一个如下的条件语句来检查哪个答案是正确的，但我怎样才能将它与上面的代码结合起来？

它需要检查哪个是正确答案，以及用户是否勾选了正确/不正确的复选框。

```
if( get_sub_field('correct') )
{
    echo "do something";
}
else
{
    echo "do something else";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:14:49.900

您不能像这样直接使用 php 检查用户的输入。

如果您要输出由 html 生成的表单，则需要将其完成，然后提交回 Web 服务器。

您可以在他们提交表单时检查答案。听起来您想保持相同的表格，只是将问题标记为正确/不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:27:33.483

解决了以下问题：

```
<?php 
if( is_array( $_POST['CheckboxGroup'.$counter] ) ) {                                    
    foreach($_POST['CheckboxGroup'.$counter]  as  $value[$counter])  { 

        if ($answer == $value[$counter]) { ?>

    <p><?php $score++;echo $value[$counter]; ?></p><br />           
    <?php   }

}}
?> 
```

# ios - Xcode 4.5 更新（项目错误）

> ID：12664508
> 
> 赞同：0
> 
> 时间：2012-09-30T19:50:03.547
> 
> 标签：ios, iphone, xcode, admob

我更新了 Xcode，但遇到了项目错误：

```
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

和

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/joe/Desktop/AdMob/libGoogleAdMobAds.a for architecture armv7s 
```

这在旧版本的 Xcode 中运行良好，但现在不行。我知道这与名为 libGoogleAdMobAds.a 的文件有关

哪个用于 AdMob 广告...

这是一个屏幕截图：

![在此处输入图像描述](../Images/05b4192b2f4d67eb9f71c4693efee08b.png)

更新： ![在此处输入图像描述](../Images/4e13e3d712a5957c2cabf8307daeb5d5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:53:09.013

检查您使用的是最新的适用于 iOS 的 AdMob SDK，因为该错误意味着该库没有添加 iOS 6 架构 (armv7s)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:12:56.310

您可以选择项目设置->构建设置-> C/C++/Objective C 编译器选择 Apple LLVM Compiler 4.1 并构建项目

# c# - 关于数据结构的建议

> ID：12664509
> 
> 赞同：2
> 
> 时间：2012-09-30T19:50:07.453
> 
> 标签：c#, wpf, data-structures

我正在寻找一些关于使用 C#4.0 WPF 创建类似于下图的交互式表格的选项的建议。

本质上，我希望在左侧显示一些固定数据，并根据用户输入，根据选择重新计算剩余数据

我在想一个数据表具有我需要的大约 95% 的功能，但是我找不到很多资源或信息来添加控件以使其具有交互性，或者我正在考虑的是否是死胡同。

我目前已经根据其他地方的选择生成了新的数据表，并显示在 Winforms DataGridView 中，但它很难比较，所以我真的想让它更具交互性。对于 WPF，我希望会有更好的东西。

![在此处输入图像描述](../Images/70d4b0043698c96d92a4768c2e74c16b.png)

我的问题是，数据表可以做到这一点吗？有没有更好的选择？

附加信息：

*   数据并非来自数据库或单一来源。
*   它也不需要保存在任何地方
*   列和行不固定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:17:27.467

A`DataGrid`当然可以为你做这件事，类似于WinForms DataGridView。

对于后端，您有很多选择，但为了适应运行时灵活性，好的旧 DataTable 可能仍然是一个不错的选择。

可能通过一个链接它`CollectionViewSource`

# java - 需要帮助将 java 项目导入 Eclipse

> ID：12664521
> 
> 赞同：0
> 
> 时间：2012-09-30T19:51:42.600
> 
> 标签：java

我在这里阅读并尝试了很多线程，但我还没有成功。

我有一个相当广泛的开源 java 项目，我想针对一些特定需求进行定制.....在 java 和 eclipse 上几乎是菜鸟（尽管有一些开发方面的问题）

我有 Eclipse Indigo 版本 1。

根据我的其他小测试，导入源目录结构为：

> Project_dir
> src_dir
> bin_dir
> some-other-dirs
> 几个 .java 文件

似乎这是在导入过程中显示为 root 的正确目录，但我没有得到任何包（更不用说类型）等。有人可以在导入项目时将我链接到“101”，这样我就可以找到 Main 并获取进行一些分析？....或者也许'用非常基本的术语向我解释导入步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:11:47.070

您可以使用“New Java Project”对话框，设置项目根目录的路径，并相应地调整源文件夹和二进制文件夹（通常源文件夹命名为“src”，eclipse 中的二进制文件夹命名为“bin”）。

# php - Javascript 填充字段值 $_POST 的 NULL？

> ID：12664522
> 
> 赞同：1
> 
> 时间：2012-09-30T19:51:47.913
> 
> 标签：php, javascript, forms

我有一个表格，我想用 Javascript 填写。有用！

但是当我提交表单时，它没有验证，它说该字段为空。

如果我手动填写表格，它可以正常工作吗？

有问题的表格在[这里](http://saveamillioncampaign.com/how-much-did-you-save/)

**编辑**

这是表单的 JS

```
$('#old').keyup(function () {
    if(this.value > 49){
        $('#new').val(this.value - 49);
        $('#new').attr('disabled', 'disabled'); 
    } else { 
        $('#new').val('0');
        $('#new').removeAttr('disabled');   
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:58:21.330

浏览器不会提交禁用的字段。如果您在 PHP 中寻找它们的值，它们将不存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T20:00:04.957

除了弗朗索瓦的回答，您可以使用只读而不是禁用。

# asp.net - 为什么我必须调用 base.OnAuthorization(filterContext)

> ID：12664526
> 
> 赞同：2
> 
> 时间：2012-09-30T19:53:00.590
> 
> 标签：asp.net, authorization, asp.net-web-api

我看过很多指南，其中自定义授权过滤器的实现涉及调用 base.OnAuthorization(filterContext) 作为最后一步。我有自己的自定义授权过滤器，没有上面提到的它可以完美地工作。但是，当我添加对 base.OnAuthorization(filterContext) 的调用时，我的 WebAPI 服务返回 401，即使所有检查都成功通过。

1) 为什么我必须调用 base.OnAuthorization？2）它怎么会自己返回401？

编辑：我认为这与默认的成员资格和角色提供者有关。因为我有点跳过那些，这可能是原因吗？

一旦我调用 base.OnAuthorization，我的响应就会变成 401。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:15:55.877

如果您自己处理所有事情，则不必调用它。

但是，如果您这样做，授权逻辑会将用户 ( `IPrincipal.Identity`) 拉出`Thread.CurrentPrincipal`并在满足以下条件之一时拒绝授权 (401)：

*   `IPrincipal`一片空白

*   `IPrincipal.Identity`未通过身份验证

*   `IPrincipal.Identity`已通过身份验证但不在授权
    用户组中，或者如果用户不属于任何授权角色（在属性上指定）

# node.js - 玉扩展没有布局生成的页面

> ID：12664527
> 
> 赞同：0
> 
> 时间：2012-09-30T19:53:01.260
> 
> 标签：node.js, express, pug, extend, block

**我的问题**：我无法让我的玉块扩展
**我的设置**：使用 Express 3 运行最新的 NodeJS

我正在使用 Post 方法通过 Ajax 加载一些 HTML

```
app.post "/utilities", (req, res) ->
  res.render "utilities", layout:false 
```

在实用程序中，我有内容，我试图将所有内容分解成块，这样这个页面就不会那么忙了

```
// utilities.jade

div#topPanel
  section#toolMenu
    block tool // <- won't load

  div#rightPanel
    section#screen
    section#userWindow
      block user // <- won't load

section#chatWindow
  block chat // <- won't load (example case) 
```

最后，我有遵循这种结构的各个块

```
// chat-block.jade
extends utilities

block chat
  div.inner
    div.left
      form#chat-input
        textarea
    div.window
      div.full 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:22:43.070

我认为您想要做的是将[大块](https://github.com/visionmedia/jade#includes)玉石包含到您的主文件中。

更改为以下代码

```
section#chatWindow
  block chat // <- won't load (example case) 
```

到

```
section#chatWindow
  include chat 
```

和你的chat-block.jade

```
div.inner
  div.left
    form#chat-input
      textarea
    div.window
      div.full 
```

然后它工作正常！

# eclipse - 参考错误构建 OpenCV Android CVCamera_MSER 示例应用程序

> ID：12664531
> 
> 赞同：1
> 
> 时间：2012-09-30T19:53:24.333
> 
> 标签：eclipse, opencv, reference, android-ndk, cygwin

我对 Android 开发以及 OpenCV 还比较陌生。我已经尝试了一些使用 sdk 找到的 OpenCV 示例（使用[OpenCV2.4.2](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.2/)），以及斯坦福大学提供的[一些示例。](http://www.stanford.edu/class/ee368/Android/)斯坦福大学的前两个样本效果很好（*直方图均衡*和*颜色直方图*）。然而，我已经花了将近一个星期的时间来尝试让剩下的三个运行起来。

我已经安装了 Android ndk 并尝试了一次使用 ndk 的 hello world android 应用程序，并且有问题的三个示例项目似乎都需要本机代码（因此是 ndk）。

在 Eclipse 中选择项目时，控制台显示：

```
<terminated> Native Builder CVCamera_MSER [Program] C:\cygwin\bin\bash.exe

/usr/bin/bash: 1ine 0: cd: /home/Davidchen/opencv/android/apps/cvCamera_MSER: No such file or directory 
```

我尝试使用命令行中的命令构建本机项目（正如我从[这里](http://developer.android.com/tools/sdk/ndk/index.html)理解的那样）：

> ```
> cd {project path}  
> {ndk path}/ndk-build 
> ```

然而出现了许多错误，所有与参考相关，因为有无数的参考`home/DavidChen`。我的计算机上没有名为 DavidChen 的文件夹。我的猜测是在项目作者的 cygwin 主文件夹中某处对项目路径的引用。但是，我仍然找不到指定此错误引用的位置，以便可以将其更改为现有引用；我查看了eclipse 中*C/C++ General* Project Properties下的*路径和符号*以及源文件，包括本机代码和 java 代码。

 *当我在 cgywin 的控制台上尝试过它时，它仍然无法正常工作。

* * *

错误是在尝试运行项目 CVCamera_MSER 时，在上面提供的链接中找到的名为**Local Feature Points**的项目视频下（为了方便起见，也 [这里] [14]）。我也尝试过运行*Edges, Lines, and Circles*和*Feature Tracking*项目，但没有成功。

我正在使用在 Windows7 x64bit 上运行的 Eclipse Indigo Service Release 2。

感谢您的时间。*

# linux - 使用 wget 使用 temp 目录下载和安装的理想方法？

> ID：12664534
> 
> 赞同：2
> 
> 时间：2012-09-30T19:53:35.893
> 
> 标签：linux, shell, wget

我正在尝试制定使用 Wget 进行安装的正确过程，在此示例中，我将使用 Nginx。

```
# Download nginx to /tmp/ directory
wget http://nginx.org/download/nginx-1.3.6.tar.gz -r -P /tmp

# Extract nginx into /tmp/nginx directory
tar xzf nginx-1.3.6.tar.gz -C /tmp/nginx

# Configure it to be installed in opt
./configure --prefix=/opt/nginx

# Make it
make

# Make install
make install

# Clean up temp folder
rm -r /tmp/* 
```

这是理想化的过程吗？有什么我可以改进的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:15:05.307

首先，您似乎在重新发明轮子：如果您要解决的问题是在目标系统上自动打包/构建软件，那么有无数可用的解决方案，以各种包管理系统、端口构建器等形式.

至于你的 shell 脚本，你应该考虑修复几件事：

*   类似`http://nginx.org/download/nginx-1.3.6.tar.gz`or的东西`nginx-1.3.6.tar.gz`是常数。尝试将所有常量提取到单独的变量中，并使用它们来简化此脚本的维护，例如：

    ```
    NAME=nginx
    VERSION=1.3.6
    FILENAME=$NAME-$VERSION.tar.gz
    URL=http://nginx.org/download/$FILENAME
    TMP_DIR=/tmp
    INSTALL_PREFIX=/opt

    wget "$URL" -r -P "$TMP_DIR"
    tar xzf "$FILENAME" -C "$TMP_DIR/nginx" 
    ```

*   您通常不能 100% 确定目标部署系统上存在 wget。如果您想最大限度地提高可移植性，您可以尝试检测流行的网络实用程序，例如`wget`, `curl`,`fetch`甚至`lynx`, `links`,`w3m`等。

*   使用临时目录的正确做法是一个很长的单独问题，但通常，您需要遵守 3 件事：

    *   应该以某种方式找出临时目录位置。一般来说，假设它`/tmp`总是一个临时目录是错误的，因为它不能被挂载，它可能是不可写的，如果可以`tmpfs`是已满的文件系统等等等等。不幸的是，没有可移植和通用的方法来检测什么临时目录是。最起码应该检查的内容，`$TMPDIR`以便用户可以将脚本指向适当的临时目录。另一个可能的好主意是一组启发式检查，以确保可以写入所需的位置（至少检查`$TMPDIR`, `$HOME/tmp`, `/tmp`, `/var/tmp`），有足够的可用空间等。
    *   应该以安全的方式创建一个临时目录。在 Linux 系统上，`mktemp --tmpdir -d some-unique-identifier.XXXXXXXXX`通常就足够了。在基于 BSD 的系统上，需要更多的手动工作，因为默认`mktemp`实现并不是特别耐竞争。
    *   使用后应清理临时目录。清洁不仅应该在成功退出时进行，而且在失败的情况下也应该进行。这可以通过使用信号陷阱和特殊的清理回调来解决，例如：

        ```
        # Cleanup: remove temporary files
        cleanup()
        {
                local rc=$?
                trap - EXIT

                # Generally, it's the best to remove only the files that we
                # know that we have created ourselves. Removal using recursive
                # rm is not really safe.
                rm -f "$LOCAL_TMP/some-file-we-had-created"
                [ -d "$LOCAL_TMP" ] && rmdir "$LOCAL_TMP"

                exit $rc
        }
        trap cleanup HUP PIPE INT QUIT TERM EXIT

        # Create a local temporary directory
        LOCAL_TMP=$(mktemp --tmpdir -d some-unique-identifier.XXXXXXXXX)

        # Use $LOCAL_TMP here 
        ```

*   如果您真的想使用 recursive `rm`，那么使用 any `*`to glob 文件是一种不好的做法。如果您的目录将有超过数千个文件，`*`则会扩展为过多的参数并溢出 shell 的命令行缓冲区。我什至可以说，在没有好的借口的情况下使用*任何通配符通常是一种不好的做法。*上面的 rm 行至少应该重写为：

    ```
    rm -f /tmp/nginx-1.3.6.tar.gz
    rm -rf /tmp/nginx 
    ```

    `/tmp`在多用户系统上删除（如）中的所有子目录`/tmp/*`是一种非常糟糕的做法，因为您将获得权限错误（您将无法删除其他用户的文件），或者您可能会严重破坏其他用户通过删除经常使用的临时文件来完成人们的工作。

*   一些小的抛光：

    *   POSIX 标准`tar`现在使用普通的短 UNIX 选项，即`tar -xvz`不是`tar xvz`.
    *   现代 GNU tar（以及，AFAIR，BSD tar）实际上并不需要任何“解压缩”标志，例如`-z`, `-j`,等。它本身检测存档/`-y`压缩格式并且`tar -xf`足以提取任何`.tar`// tarball。`.tar.gz``.tar.bz2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:57:57.850

这是基本的想法。您必须以 root 身份运行 make install 命令（或者如果需要，可以运行整个脚本）。你`rm -r /tmp/*`应该是`rm -r /tmp/nginx`因为其他命令可能在 tmp 目录中有他们正在处理的东西。

还应该注意的是，对于一个体面的项目，从源代码构建无需修改即可工作的可能性相当低。通常，您会发现您需要明确指定库的路径，否则某些代码在您的发行版上编译不正确。

# java - 为什么在声明时不调用 Java 类默认构造函数？

> ID：12664535
> 
> 赞同：1
> 
> 时间：2012-09-30T19:53:42.070
> 
> 标签：java

Java 具有默认构造函数，但其​​功能与 C++ 不同。

在 C++ 中，在声明对象时会隐式调用默认构造函数，因此无需显式“新建”它。但在 Java 中，必须显式初始化对象。有什么特别的原因吗？对此有任何功能要求吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T19:55:52.450

仅当 C++ 声明在堆栈上创建对象时。所有 Java 对象都是基于堆的，所以这不是一个选项。在这两种语言中，构造函数都会在创建新对象时调用。

```
// C++
Obj obj;  // stack
Obj* pObj = new Obj;  // heap

// Java
Obj obj = new Obj();  // heap (stack not possible) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:57:51.433

从技术上讲，

> 在 C++ 中，默认构造函数在声明对象时被隐式调用

不是错误的，而是不完整的。如果一个对象有一个用户定义的默认构造函数，你不能只声明它。声明点也是定义和初始化。

在 Java 中，引用可以是`null`，而在 C++ 中则不能。只有指针可以`NULL`在 C++ 中。所以有不同的语义。

```
JavaObject o = null; //valid Java
                     //invalid C++ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:58:21.980

Java 构造：

```
MyClass myObject; 
```

等效于（-ish）以下 C++：

```
MyClass *myObject; 
```

不：

```
MyClass myObject; 
```

没有与后者等效的 Java。

# backbone.js - 在模板元素上设置滚动条

> ID：12664538
> 
> 赞同：0
> 
> 时间：2012-09-30T19:53:48.760
> 
> 标签：backbone.js, underscore.js, mobiscroll

我正在使用带下划线的 mobiscroll。我有一个下划线模板。我需要对从模板添加的元素执行 .scroller。

这是模板：

```
<form>
    <input type="text" id="startdate" name="startdate"/>
</form> 
```

这是视图中的渲染函数：

```
var MyView = Backbone.View.extend({
    template: render('auctioncreate'),
    render: function() {
        this.$el.empty().append(this.template);
        $('#startdate').scroller();  // this does not work
    }
}); 
```

render 是一个加载 html 并将其制成模板的函数。为了完整起见，这里是渲染函数的代码：

```
function render(tn, td) {
    if(!render.tc) {
        render.tc = {};
    }
    if(! render.tc[tn]) {
        var td = 'assets/js/templates';
        var tu = td + "/" + tn + ".html";
        var ts;
        $.ajax({
            url: tu,
            method: 'GET',
            async: false,
            dataType: 'html',
            success: function(d) {
                ts = d;
            },
            error: function(e) {
            }
        });
        render.tc[tn] = ts;
    }
    return _.template(render.tc[tn]);
} 
```

我尝试在模板本身中添加一个 ondomready javascript。它不能立即工作，但刷新后它确实工作？！

```
$(function() {
    $('#startdate').scroller(); // this work if I refresh once.
}); 
```

基本上，我需要在元素附加到 dom 后对其应用日期时间选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:18:59.467

错误出现在视图的渲染函数中。

代替：

```
$('#startdate')... 
```

它应该是：

```
this.$('#startdate')... 
```

# javascript - 解析 JSON 的脚本标记：它有效吗？

> ID：12664541
> 
> 赞同：0
> 
> 时间：2012-09-30T19:54:05.203
> 
> 标签：javascript, json, parsing, eval

我正在编写一个脚本，我需要在不支持 JSON.parse() 的浏览器中解析 JSON。我有严格的大小目标（总大小 < 20 kb），所以我不能依赖像 jQuery 这样的外部库。

通常的方法是使用 eval() 但我担心它不安全，因为我无法控制 JSON 字符串（由外部源提供）。

我想出了使用脚本标签来创建我的对象的想法：

```
var json='{"name":"Me","age":"30"}';
var scr=document.createElement("script");
scr.innerHTML="var obj="+json;
document.body.appendChild(scr); 
```

这似乎有效，如此处所示：http: [//jsfiddle.net/bz8f7/](http://jsfiddle.net/bz8f7/)

我在这里错过了什么吗？是否存在我的方法不起作用或不安全的情况？

注意：我知道这个方法会创建一个全局变量，我对我的用例很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:56:43.617

使用 JSON polyfill，例如[JSON 3](http://bestiejs.github.com/json3/)。这是一个正确的解析器，这意味着它不使用`eval`，即使没有原生 JSON 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:57:23.197

是的，它确实有效。不，它具有完全相同的缺点`eval`（可能由于 DOM 它甚至更慢，如果您不想使用 JSONP 中的全局函数，它会创建一个全局变量）。

`JSON.parse`如果您关心旧版浏览器，请使用, 并填充它。有一些轻量级的库可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:56:32.150

您仍在评估 JavaScript，只是使用比`eval`. 它具有 eval 的所有安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T09:15:11.840

使用 Douglas Crockford 的[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)，它在缩小前小于 20K。几乎所有的浏览器实现都是`JSON.parse()`从它开始的，所以你不应该有任何兼容性问题。

# javascript - 如何使用正则表达式在此处获取日期？

> ID：12664543
> 
> 赞同：0
> 
> 时间：2012-09-30T19:54:08.530
> 
> 标签：javascript, regex

数据：

```
"Sun Sep 30 2012 12:37:24 GMT-0700 (Pacific Daylight Time)" 
```

在正则表达式中，我试图只得到“2012 年 9 月 30 日”而不做文字`/Sep\s\d\d\s2012/`

我几乎想取出“Sun”和“12:37:24....”，以便只捕获“Sep 30 2012”。

**我将如何在 JavaScript REGEX 中执行此操作？**

更新：

我做了一个，但它不是那么优雅：`\w{3}\s\d{1,2}\s2\d\d\d`

***是否有一个 REGEX 模式可以说，“取出前 3 个字母和它后面的一个空格……捕获日期格式……之后不要取任何东西。”***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:00:12.250

对我来说，似乎日期和月份总是 3 个字符长，因此搜索的字符串始终具有相同的长度并且始终位于相同的位置。

```
"Sun Sep 30 2012 12:37:24 GMT-0700 (Pacific Daylight Time)".slice(4, 15) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:00:23.247

不。我可以看到您几乎肯定会使用一些 JavaScript 日期到字符串的转换（甚至可能只是`(new Date).toString()`），这取决于语言环境。对于脚本的许多用户来说，情况会有所不同。

相反，日期应该已经采用特定格式。比如在 PHP 中你可以这样做`date("Y-m-d H:i:s")`，然后按原样使用或`split(/[- :]/)`. 或者，如果您已经拥有 Date 对象，只需使用这些`get*()`函数。

如果我错了，并且无论语言环境如何，您的格式实际上每次都完全相同，那么我想这样的事情会做：`/[A-Z][a-z]{2} \d{2} \d{4}/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T20:00:56.157

您可以使用`split`,`splice`和`join`

```
var date = "Sun Sep 30 2012 12:37:24 GMT-0700 (Pacific Daylight Time)" ;
var desiredResult = date.split(" ").splice(1, 3).join(" "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T19:58:21.463

你可以使用`substring`：

```
var s = "Sun Sep 30 2012 12:37:24 GMT-0700 (Pacific Daylight Time)";
s = s.substring(4, 15); // "Sep 30 2012" 
```

如果你真的坚持使用正则表达式，你可以使用：

```
s = s.match(/\w{3}\s(\w{3}\s\d{1,2}\s2\d{3})/)[1]; // "Sep 30 2012" 
```

但老实说，日期并不是真的要用正则表达式解析，或者`substring`就此而言，而是用真正的`Date` [解析器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T20:03:20.483

回答问题“在JS中如何说三个字母和一个空格”：

```
> "abc ".match("[A-Za-z]{3} ")
["abc "]
> "ab3 ".match("[A-Za-z]{3} ")
null 
```

# visual-studio-2010 - 更改端口后的 TFS，项目如何连接回 TFS

> ID：12664545
> 
> 赞同：0
> 
> 时间：2012-09-30T19:54:13.780
> 
> 标签：visual-studio-2010, tfs

以前项目使用默认端口（8080），但由于某种原因，我们将端口更改为其他端口号。之后我们将如何配置项目指向新端口？因为一旦我们打开项目，它会自动连接到8080端口（之前的端口号）

或者我可以编辑 .sln 文件下的 SccTeamFoundationServer 参数吗？这无法实现，打开项目时仍然提示丢失连接。

我找到了连接它的方法。在源代码管理资源管理器下，添加新的服务器/端口。一切顺利。

# ios - iOS：OCUnit 集成的链接器错误

> ID：12664552
> 
> 赞同：1
> 
> 时间：2012-09-30T19:54:50.340
> 
> 标签：ios

我正在将 OCUnit 测试用例目标添加到我现有的 iOS 项目中。我已按照以下链接中的教程进行操作并完成了。它为“MyAppTests”和 .m、.h 文件创建了一个新目标。我还添加了 SenTestingKit.framework。

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1)

[http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)

但是当我点击“产品”菜单“测试”选项时，它总是给出以下链接器错误。

![在此处输入图像描述](../Images/0e8c9e26157679a7201a72719df521eb.png)

我尝试通过遵循这些链接和他们提供的解决方案来解决错误， 在我创建了一个新方案[OCUnit 测试嵌入式框架](https://stackoverflow.com/questions/2867251/ocunit-testing-an-embedded-framework)[后，xcode 4 无法启动单元测试（出现链接器错误）](https://stackoverflow.com/questions/6302362/xcode-4-fails-to-initiate-unit-tests-with-linker-error-after-i-created-a-new-s)

但是，没有一个解决方案对我有用，它仍然会给出链接器错误。请帮助解决这些错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:04:19.537

我自己解决了它，我只是删除了与测试目标相关的所有内容并创建了新的测试目标，并按照下面的 Apple 链接进行操作，它按预期工作！

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1)

# android - 如何在listview上获取项目的Y坐标

> ID：12664561
> 
> 赞同：2
> 
> 时间：2012-09-30T19:55:49.913
> 
> 标签：android, listview, coordinate

我的代码的目标是将 ImageView 移动到单击项目的中心，以某种方式“突出显示”它。为此，我试图获取列表视图的单击项目的 Y 坐标。我的代码是：

```
private OnItemClickListener listview_auto_listener = new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int position,
            long arg3) {

        int[] coords = new int[2];

        view.getLocationOnScreen(coords);

        // We need just the top coordinate
        int top = coords[1];
        // And bottom

        moveSelectedCar(top);

    }
}; 
```

其中 moveSelectedCar 是：

```
private void moveSelectedCar(int new_y) {

    TranslateAnimation _tAnim = new TranslateAnimation(
            TranslateAnimation.RELATIVE_TO_SELF,
            TranslateAnimation.RELATIVE_TO_SELF, last_y, new_y);

    _tAnim.setInterpolator(new DecelerateInterpolator());
    _tAnim.setDuration(800);
    _tAnim.setFillAfter(true);
    _tAnim.setFillEnabled(true);

    img_selected_car.startAnimation(_tAnim);

    last_y = new_y;

} 
```

问题是这不会返回单击项目的中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-31T16:41:41.707

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我已经解决了这个问题！

```
private OnItemClickListener listview_auto_listener = new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int position,
            long arg3) {

        int new_top = view.getTop() + view.getRight();
        int view_height = view.getHeight();

        moveSelectedCar(new_top - view_height);

    }
}; 
```

> 我希望这对某人有帮助！

# javascript - 长按模拟 onmousedown 但也有 onclick

> ID：12664570
> 
> 赞同：0
> 
> 时间：2012-09-30T19:56:32.917
> 
> 标签：javascript, jquery

我有以下 HTML

```
<li onclick="setServerID(this);" class="server-item-item" data-server="1" onmousedown="serverHold(this);" onmouseup="serverRelease();"><span>MyServer</span></li> 
```

我的 JS 看起来像：

```
function setServerID(server) {
    sessionStorage.serverID = server.dataset.server;
    getServerInfo();
    gotoMain();
} 
```

和

```
function serverHold(server) {
    pressTimer = window.setTimeout(function() {
        var id = server.dataset.server;
        clearTimeout(pressTimer);
        $('#fav-the-server').css("visibility", "visible");
        a.slide('fav-the-server', "left", 0, "200ms", "ease", "0ms", "1", "alternate", "running");

    },1000);
    return false;
} 
```

这一切都非常有效，这要归功于我在 SO 上查找的以前的帖子，但问题是它是一个触摸屏类型的应用程序，它执行`onclick`

无论如何，这样做可以让我获得以下功能：

> List Item -> Click and Hold for 1000ms -> Execute `serverHold`and do not execute the`setServerID`

和

> 列表项 -> 点击不按住或按住少于 1000ms ->`setServerID`仅执行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:17:13.393

只需保留一个标志，指示您是否在点击期间处理了长按：[demo](http://jsbin.com/oxuwux/2/edit)

# java - 数组列表 不适用于参数（double、double、int、String）

> ID：12664571
> 
> 赞同：-2
> 
> 时间：2012-09-30T19:56:34.177
> 
> 标签：java, android

我正在尝试在我的应用程序中制作一张地图，其中包含我的数据库 MySQL 中的纬度和经度。

![](../Images/009534b6c161dd166fa024305b8f1f3f.png)

当点击我想在地图上显示时，这是我的截图列表视图。

这是我的活动：

```
public class Map_TokoBengkel extends MapActivity {
    private MapView mapView;
    private LocationManager locManager;
    private LocationListener locListener;
    Entity_BikeShopRepair entity;
    private ArrayList<Entity_BikeShopRepair> list_lokasi = new ArrayList<Entity_BikeShopRepair>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_shoprepair);

        final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
        actionBar.setTitle(getString(R.string.app_name));

        actionBar.setHomeAction(new IntentAction(this, new Intent(this,
                Home_Activity.class), R.drawable.home));

        initLokasi();
        initMap();
        initLocationManager();
    }

    /**
     * Initialize the map to the Data Location.
     */
    private void initLokasi() {
        list_lokasi.add(entity.getLat(), entity.getLng(), 1, entity.getShop_Name());
    }

    /**
     * Initialize the map to the LinearLayout.
     */
    private void initMap() {
        mapView = (MapView) findViewById(R.id.map_view);
        mapView.displayZoomControls(true);
        mapView.setBuiltInZoomControls(true);
        mapView.getController().setZoom(15);
    }

    /**
     * Initialize the location manager.
     */
    private void initLocationManager() {
        locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locListener = new LocationListener() {
            // method ini akan dijalankan apabila koordinat GPS berubah
            public void onLocationChanged(Location newLocation) {
                tampilkanPosisikeMap(newLocation);
            }

            public void onProviderDisabled(String arg0) {
            }

            public void onProviderEnabled(String arg0) {
            }

            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            }
        };
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                1000, locListener);

    }

    /**
     * This method will be called when current position changed is submitted via
     * the GPS.
     * 
     * @param newLocation
     */
    protected void tampilkanPosisikeMap(Location newLocation) {
        List<Overlay> overlays = mapView.getOverlays();

        // first remove old overlay
        if (overlays.size() > 0) {
            for (Iterator iterator = overlays.iterator(); iterator.hasNext();) {
                iterator.next();
                iterator.remove();
            }
        }

        // transform the location to a geopoint
        GeoPoint geopoint = new GeoPoint(
                (int) (newLocation.getLatitude() * 1E6),
                (int) (newLocation.getLongitude() * 1E6));
        GeoPoint myposition = geopoint;
        Location locationA = new Location("point A");
        Location locationB = new Location("point B");
        locationA.setLatitude(geopoint.getLatitudeE6() / 1E6);
        locationA.setLongitude(geopoint.getLongitudeE6() / 1E6);
        // initialize icon
        Drawable icon = getResources().getDrawable(R.drawable.marker);
        icon.setBounds(0, 0, icon.getIntrinsicWidth(),
                icon.getIntrinsicHeight());

        // create my overlay and show it
        MyItemizedOverlay overlay = new MyItemizedOverlay(icon, this);
        OverlayItem item = new OverlayItem(geopoint, "My Location", "Lat:"
                + locationA.getLatitude() + "\nLng:" + locationA.getLongitude());
        overlay.addItem(item);
        mapView.getOverlays().add(overlay);
        for (int i = 0; i < list_lokasi.size(); i++) {
            geopoint = new GeoPoint((int) (list_lokasi.get(i).lat * 1E6),
                    (int) (list_lokasi.get(i).lng * 1E6));
            locationB.setLatitude(geopoint.getLatitudeE6() / 1E6);
            locationB.setLongitude(geopoint.getLongitudeE6() / 1E6);

            double distance = locationA.distanceTo(locationB);

            if (list_lokasi.get(i).category == 1) {
                icon = getResources().getDrawable(R.drawable.bicycle_shop);
            } else if (list_lokasi.get(i).category == 2) {
                icon = getResources().getDrawable(R.drawable.bicycle_shop);
            } else if (list_lokasi.get(i).category == 3) {
                icon = getResources().getDrawable(R.drawable.bicycle_shop);
            }

            icon.setBounds(0, 0, icon.getIntrinsicWidth(),
                    icon.getIntrinsicHeight());
            overlay = new MyItemizedOverlay(icon, this);
            item = new OverlayItem(geopoint, list_lokasi.get(i).lokname, "Lat:"
                    + list_lokasi.get(i).lat + "\nLng:"
                    + list_lokasi.get(i).lng + "\n Jarak:" + distance + "m");
            overlay.addItem(item);
            mapView.getOverlays().add(overlay);
        }

        // move to location
        mapView.getController().animateTo(myposition);

        // redraw map
        mapView.postInvalidate();
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

但是在那个代码中有一些错误

```
private void initLokasi() {
    list_lokasi.add(entity.getLat(), entity.getLng(), 1, entity.getShop_Name());
} 
```

错误信息是：

```
The method add(int, Entity_BikeShopRepair) in the type ArrayList<Entity_BikeShopRepair> is not applicable for the arguments (double, double, int, String)`. 
```

有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:03:07.140

问题就在错误中

> ArrayList 类型中的方法 add(int, Entity_BikeShopRepair) 不适用于参数（double、double、int、String）

编译器告诉您，它希望您给它一个 int 和一个 Entity_BikeShopRepair，而是给它四个参数，所以它不知道该怎么做。

```
list_lokasi.add(entity.getLat(), entity.getLng(), 1, entity.getShop_Name()); 
```

看起来你只需要做

```
list_lokasi.add(1, entity); 
```

或者，如果您不关心实体被添加到列表中的哪个位置，

```
list_lokasi.add(entity); 
```

# sql - Microsoft Access - 生成特定查询

> ID：12664573
> 
> 赞同：0
> 
> 时间：2012-09-30T19:56:39.113
> 
> 标签：sql, ms-access

这是我面临的一个有趣的挑战。如果你可以为这个问题创建一个查询，我称你为天才——这让我困扰了很长一段时间。

这里有两张表：

**客户表**

> 客户 ID、姓名

**交易表**

> transactionId、customerId、amountPaid、purchaseDate

我想为当月没有任何交易但前几个月欠款的人选择所有 customerId。

例如，如果我选择的月份是 10 月，我想选择 10 月份没有交易但 10 月之前的交易总和大于零的所有 customerId。基本上，我的目标是生成一份报告，显示当月没有欠款但前几个月欠款的客户的收据。感谢您考虑这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:05:23.163

您可能需要重新考虑您的数据库模型。恕我直言，我认为您需要更多表格来处理多个月。假设以月份（1 月到 12 月）作为列和 userid 列的表。从那我认为你应该能够执行你所描述的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:06:20.783

您可以获取每个客户在所选月份之前的购买日期（包括所选月份），并检查该日期是否在所选月份之前。

自从我使用 Access 以来已经有一段时间了，但是是这样的：

```
select c.customerId, c.name, max(t.purchaseDate) as lastPurchaseDate
from Customers as c
inner join Transactions as t on t.customerId = c.CustomerId and t.PurchaseDate < #2012-11-01#
group by c.customerId, c.name
having lastPurchaseDate < #2012-10-01# 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:34:40.927

我终于在 user1238850 和 Guffa 的帮助下解决了这个问题。这有点混乱，但到目前为止它似乎工作。

```
SELECT Customers.customerId 
FROM (
    SELECT Customers.customerId
    FROM  Customers
    WHERE (((Customers.customerId) Not In (
        SELECT Transactions.customerId 
        FROM Transactions 
        WHERE Customers.customerId = Transactions.customerId AND 
              Transactions.purchaseDate >=#8/1/2012# AND 
              Transactions.purchaseDate <#9/1/2012# OR 
              Transactions.customerId Is Null)))
      )

AS Q1     
INNER JOIN (     
    SELECT Transactions.customerId, Sum(Transactions.amountPaid) AS SumOfamountPaid
    FROM Transactions
    WHERE Transactions.purchaseDate <#8/1/2012#
    GROUP BY Transactions.customerId 
           ) AS Q2 
        ON Q1.customerId = Q2.customerId; 
```

# javascript - 使用闭包将配置绑定到函数

> ID：12664575
> 
> 赞同：2
> 
> 时间：2012-09-30T19:56:47.110
> 
> 标签：javascript, d3.js

我正在阅读关于 d3 中可重用图表的[本教程](http://bost.ocks.org/mike/chart/)，在第一个“配置”部分中，作者描述了两种制作图表功能的方法：

```
// Method 1
function chart(config) {
  // generate chart here, using `config.width` and `config.height`
}

// Method 2
function chart(config) {
  return function() {
    // generate chart here, using `config.width` and `config.height`
  };
} 
```

他建议使用第二种方法而不是第一种方法，因为

> 但是，调用者必须同时管理图表函数（假设您有多种类型的图表可供选择）和配置对象。要将图表配置绑定到图表函数，我们需要一个闭包。

不过，我不明白这个解释。方法2相对于第一种方法有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:08:01.327

这是关于管理信息的。在第一种情况下，如果要更改图表的配置，调用者必须记住`config`必须传递给`chart`：

```
chart(config);
config.xy = 42;
// update the chart, calling chart again
chart(config); 
```

现在，如果有多个可能不同的图表（以及因此不同的图表函数，如`barchart`、`linechart`等），调用者必须记住将哪个配置传递给哪个函数。

如果图表的“类型”以某种方式是独立的，那会更容易。在第二个示例中，您返回对知道如何更新刚刚创建的图表的函数的引用。因此，您可以在不知道它是由哪个函数创建的情况下更新图表：

```
var myChart = chart(config);
config.xy = 42;
// update the chart
myChart(); 
```

这似乎是 D3 使用的一种方法，但您也可以使用面向对象的方法，即创建一个适当的`Chart`构造函数来封装渲染和更新图表的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T23:21:44.283

这是我发现的一种方法，它甚至比您列出的两种方法还要好——我从 d3 源代码中获得了一些东西：

```
function chart() {
    var width, height;

    function display() {
        console.log("My dimensions are: (" + width + " x " + height + ").");
    }

    display.width = function(value) {
        if (!arguments.length) return width;
        width = value;
        return display;
    };

    display.height = function(value) { 
        if (!arguments.length) return height;
        height = value;
        return display;
    };

    return display;    
}

var config = {width: 5, height: 10},
    myChart = chart().width(config.width).height(config.height);

console.log("Width:", myChart.width());   // Width: 5
console.log("Height:", myChart.height()); // Height: 10
myChart(); // My dimensions are (5 x 10).
myChart.height(5);
myChart(); // My dimensions are (5 x 5). 
```

# ios - UIWebView canPerformAction 不禁用某些菜单项

> ID：12664577
> 
> 赞同：3
> 
> 时间：2012-09-30T19:57:01.107
> 
> 标签：ios, uiwebview, contextmenu

在 UIWebView 中，我希望某个类 div 元素仅显示一个自定义上下文菜单条目。所以我在 UIWebView 委托中实现了 canPerformAction:: 方法，如下所示：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {

 if (self.webView.superview != nil) {

     BOOL isMyClass=[[self.webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().getRangeAt(0).startContainer.parentNode.className;"] isEqualToString:@"myClass"];
     if (isMyClass) {
         if (action == @selector(myAction:)) {
             return YES;
         } else {
             return NO; // should disable any other menu items
         }
     } 
 }
 return [super canPerformAction:action withSender:sender];
} 
```

结果很奇怪：当用户选择这样一个 myclass div 时，大多数 menuItems 都没有显示（cut: copy: past:...）但 select: 和 selectAll: 仍然显示（连同 myAction）。在调试器下，我注意到这两个 select/selectAll 方法不会在委托中触发 canPerformAction:: ... 这两个方法在哪里触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T19:55:23.660

我想我知道你为什么会遇到问题。

我有同样的问题和类似的挫败感：

“为什么 select: 和 selectAll: 在单步执行对 canPerformAction:: 的调用时没有出现？”

然后我意识到显示 UIMenuController 时的 firstResponder 只是一个容器，并且这个类有一个实际上扩展 UITextView 类的成员。由于 sharedMenuController 与 Responder 链中的第一响应者交互，因此在容器中实现 canPerformAction 跳过了 select 和 selectAll，因为它们已经由 textView 成员（在这种情况下为 REAL firstResponder）处理。

你应该做的是在显示 UIMenuController 时找到哪个对象是你的 firstResponder，找到它可能拥有的任何响应者对象，直到找到堆栈中最高的响应者，然后在那里实现 canPerformAction。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:30:07.923

Sometimes, when application is used on the iPad device, with no connection to Xcode, the menu correctly displays only the authorized item... Sometimes not... Very erratic behaviour indeed

# git - Git 日志在 GitHub 上提交与合并时显示不同的作者电子邮件

> ID：12664581
> 
> 赞同：3
> 
> 时间：2012-09-30T19:57:33.620
> 
> 标签：git, github

我刚刚检查了我的`git log`并注意到提交的电子邮件地址与合并的不同。我想知道可能是什么原因造成的，所以我可以弄清楚如何做到这一点，这样我的提交电子邮件地址就是我想要的。

（我已经看到了问题的解决方案——我更好奇为什么会发生这种情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:24:47.167

您可能正在使用您的 github 帐户进行合并，并且您的 github 帐户的电子邮件地址与您`git config`在计算机上使用的电子邮件地址不同。

`git config user.email <email-address>`通过使用本地存储库，您只能为一个存储库更改此设置。如果这不起作用，请确保您没有设置`GIT_COMMITTER_EMAIL`or`GIT_AUTHOR_EMAIL`变量。

此外，您可以使用 --global 对本地 EG 上的所有 git 存储库进行更改：`git config --global user.email <email-address>`

# php - Yii 模型返回的数组结构

> ID：12664585
> 
> 赞同：6
> 
> 时间：2012-09-30T19:58:20.213
> 
> 标签：php, web-applications, yii

我是一名 Yii 初学者，遇到了一些困难，希望有人能帮助我重回正轨。我认为这对于经验丰富的 Yii 用户来说可能是一个相当直截了当的问题。所以这里...

在控制器中，假设我对模型运行以下调用-

```
$variable = Post::model()->findAll(); 
```

一切正常，我将变量传递到视图中。这就是我陷入困境的地方。上述查询中返回的数组比我预期的要复杂得多，我正在努力理解它。这是一个样本-

```
print_r($variable); 
```

给-

```
Array ( [0] => Post Object ( [_md:CActiveRecord:private] => CActiveRecordMetaData Object                             ( [tableSchema] => CMysqlTableSchema Object ( [schemaName] => [name] => tbl_post [rawName] => `tbl_post` [primaryKey] => id [sequenceName] => [foreignKeys] => Array ( ) [columns] => Array ( [id] => CMysqlColumnSchema Object ( [name] => id [rawName] => `id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => 1 [_e:CComponent:private] => [_m:CComponent:private] => ) [post] => CMysqlColumnSchema Object ( [name] => post [rawName] => `post` [allowNull] => [dbType] => text [type] => string [defaultValue] => [size] => [precision] => [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [_e:CComponent:private] => [_m:CComponent:private] => ) [columns] => Array ( [id] => CMysqlColumnSchema Object ( [name] => id [rawName] => `id` [allowNull] => [dbType] => int(11) [type] => integer [defaultValue] => [size] => 11 [precision] => 11 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => 1 [_e:CComponent:private] => [_m:CComponent:private] => ) [post] => CMysqlColumnSchema Object ( [name] => post [rawName] => `post` [allowNull] => [dbType] => text [type] => string [defaultValue] => [size] => [precision] => [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [relations] => Array ( [responses] => CHasManyRelation Object ( [limit] => -1 [offset] => -1 [index] => [through] => [joinType] => LEFT OUTER JOIN [on] => [alias] => [with] => Array ( ) [together] => [scopes] => [name] => responses [className] => Response [foreignKey] => post_id [select] => * [condition] => [params] => Array ( ) [group] => [join] => [having] => [order] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [attributeDefaults] => Array ( ) [_model:CActiveRecordMetaData:private] => Post Object ( [_md:CActiveRecord:private] => CActiveRecordMetaData Object *RECURSION* [_new:CActiveRecord:private] => [_attributes:CActiveRecord:private] => Array ( ) [_related:CActiveRecord:private] => Array ( ) [_c:CActiveRecord:private] => [_pk:CActiveRecord:private] => [_alias:CActiveRecord:private] => t [_errors:CModel:private] => Array ( ) [_validators:CModel:private] => [_scenario:CModel:private] => [_e:CComponent:private] => [_m:CComponent:private] => ) ) [_new:CActiveRecord:private] => [_attributes:CActiveRecord:private] => Array ( [id] => 1 [post] => User Post ) [_related:CActiveRecord:private] => Array ( ) [_c:CActiveRecord:private] => [_pk:CActiveRecord:private] => 1 [_alias:CActiveRecord:private] => t [_errors:CModel:private] => Array ( ) [_validators:CModel:private] => [_scenario:CModel:private] => update [_e:CComponent:private] => [_m:CComponent:private] => ) ) 
```

[对不起，如果有更简单的方法来显示这个数组，我不知道]

谁能向我解释为什么模型返回如此复杂的数组？在您的应用程序中使用什么表、列或关系似乎并不重要，在我看来，它们都返回这种格式。

另外，有人可以向我解释结构，以便我可以隔离我想要恢复的变量吗？

提前谢谢了，

缺口

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-01T09:35:59.510

### 更好的 print_r

要在 yii 中获得更好的`print_r`输出，您可以使用[CVarDumper](http://www.yiiframework.com/doc/api/1.1/CVarDumper "http://www.yiiframework.com/doc/api/1.1/CVarDumper")类`dump()`或`dumpAsString()`方法。它们还提供了一个参数`$highlight`，通过正确格式化输出并为其添加缩进，帮助您理解输出。例子：

```
CVarDumper::dump($variables,10,true);
// 10 is the default depth, and passing true will enable highlighting 
```

* * *

### 为什么以及什么结构？

正如其他答案中已经提到的那样，[`findAll()`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail")返回一个**CActiveRecord 对象**数组，一个对象数组也是如此`$variables`，并且`$variables[0]`是第一个 Post 对象。Yii 的 CActiveRecord 有许多对象属性，例如一个 CActiveRecordMetaData 对象，它又具有一个 CDbTableSchema 对象（你有它的子类 CMysqlTableSchema，这意味着你正在使用 mysql）。只是简单地打印出这些`print_r`对象，它们只是主 CActiveRecord 对象的属性。除了这些对象之外，`attributes`CActiveRecord 的属性（它是一个数组）还保存着你的实际属性值，所以在输出的某个地方你还会看到一个像这样的数组：

```
[CActiveRecord:_attributes] => array
(
    'attributeName' => 'attributeValue'
    'anotherAttributeName' => 'anotherAttributeValue'
    'someAttributeName' => 'someAttributeValue'
    ...
) 
```

这些是您的属性值。

* * *

### 如何访问？

要访问模型的属性，我们可以使用对象属性访问和关联数组访问（可能是因为 CActiveRecord 的父类 CModel 实现了 php 的[ArrayAccess 接口](http://php.net/manual/en/class.arrayaccess.php "http://php.net/manual/en/class.arrayaccess.php")）。例子：

```
$variables[0]->attributeName;
$variables[0]['attributeName']; 
```

由于 yii 使用并覆盖了 __get php 魔术方法，我们可以这样做：

```
$variables[0]->attributeName;
// instead of 
$variables[0]->attributes['attributeName']; 
```

`foreach()`当然，您可以使用此处另一个答案中已显示的方法遍历 Post 对象数组：

```
foreach($variables as $aPost){
    echo $aPost->attributeName;
    echo $aPost['attributeName'];
    echo $aPost->attributes['attributeName'];
} 
```

要访问关系，只需使用关系名称：

```
$variables[0]->relationName->attributeOfRelatedTable;
$variables[0]['relationName']->attributeOfRelatedTable;
$variables[0]['relationName']['attributeOfRelatedTable']; 
```

如果您的关系是 HAS_MANY，那么当然相关模型也将作为数组返回：

```
$variables[0]->relationName[0]->attributeOfRelatedTable;
$variables[0]['relationName'][0]->attributeOfRelatedTable;
$variables[0]['relationName'][0]['attributeOfRelatedTable'];
$variables[0]->relationName[0]['attributeOfRelatedTable']; 
```

再次，您可以在 HAS_MANY 关系的情况下遍历关系数组。

编辑： has_many 迭代的示例：

```
foreach($variables as $aPost) { // get each post one by one
    echo $aPost->someAttribute; // or $aPost['someAttribute']
    foreach($aPost->relationName as $aComment) { // say we get each comment of each post
        // or could have done $aPost['relationName'] as $aComment
        echo $aComment->commentAttribute; // or $aComment['commentAttribute']
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:08:45.383

findall 为您的模型返回一组活动记录，请[参见此处](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail)

一旦你有了它，你就可以像这样访问返回的每条记录中的所有列

```
$results = Post::model()->findAll();
foreach($results AS $model) 
{
    echo $model->somecolumnname;
    echo $model->someothercolumnname;
} 
```

因此，您不必过多关注引擎盖下的所有细节，因为您可以直接使用抽象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:29:47.480

一个简单的答案是使用，

```
print_r($variable->attributes); 
```

其中`$variable`是模型类的对象。

# java - 引擎盖下原型作用域 bean 的 Spring 实例化

> ID：12664589
> 
> 赞同：3
> 
> 时间：2012-09-30T19:58:28.733
> 
> 标签：java, spring

Spring 定义了 bean 定义的不同范围，一个是**原型范围**，它在每次查找时都会给出一个新实例。

我对此有两个疑问..

1.  在幕后，spring 如何创建一个新实例？
2.  我听说，它使用 clone() 方法来创建一个新实例，如果是，那么为什么以及如果它使用克隆来提供一个新实例，那么克隆对象的状态会发生什么，因为克隆也会复制状态?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:07:47.147

1.  Like any other bean: using the constructor annotated with @Autowired, or the default one if there isn't any (or a factory method if one is defined).

2.  What you heard is wrong. Most objects are not cloneable, so it would only get an exception by doing that. And it would make no sense since

    *   it wouldn't be able to create the first instance
    *   all the instances would be the same as the first one, which is clearly not what is wanted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:25:59.980

Spring 使用反射机制来创建新实例。Spring，首先查找单例映射，如果没有找到实例，使用bean定义创建新实例，它将应用定义的生命周期。所以你听到的是错误的。

# python - 线性回归 - 降低自由度

> ID：12664590
> 
> 赞同：9
> 
> 时间：2012-09-30T19:58:30.657
> 
> 标签：python, numpy, statistics, pandas, curve-fitting

我有一个 Pandas 数据框，其中包含如下列

```
Order     Balance     Profit cum (%) 
```

我正在做一个线性回归

```
model_profit_tr = pd.ols(y=df_closed['Profit cum (%)'], x=df_closed['Order']) 
```

问题在于标准模型就像（不通过原点的线的方程）

```
y = a * x + b 
```

有 2 个自由度（a 和 b）

斜率 (a)：

```
a=model_profit_tr.beta['x'] 
```

并拦截（b）：

```
b=model_profit_tr.beta['intercept'] 
```

我想降低我的模型的自由度（从 2 到 1），我想要一个像

```
y = a * x 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T20:33:52.877

使用`intercept`关键字参数：

```
model_profit_tr = pd.ols(y=df_closed['Profit cum (%)'], 
                         x=df_closed['Order'], 
                         intercept=False) 
```

来自文档：

```
In [65]: help(pandas.ols) 
Help on function ols in module pandas.stats.interface:

ols(**kwargs)

    [snip]

    Parameters
    ----------
    y: Series or DataFrame
        See above for types
    x: Series, DataFrame, dict of Series, dict of DataFrame, Panel
    weights : Series or ndarray
        The weights are presumed to be (proportional to) the inverse of the
        variance of the observations.  That is, if the variables are to be
        transformed by 1/sqrt(W) you must supply weights = 1/W
    intercept: bool
        True if you want an intercept.  Defaults to True.
    nw_lags: None or int
        Number of Newey-West lags.  Defaults to None.

    [snip] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:33:12.457

这是一个显示解决方案的示例：

```
#!/usr/bin/env python

import pandas as pd
import matplotlib.pylab as plt
import numpy as np

data = [
(0.2, 1.3),
(1.3, 3.9),
(2.1, 4.8),
(2.9,5.5),
(3.3,6.9)
]

df = pd.DataFrame(data, columns=['X', 'Y'])

print(df)

# 2 degrees of freedom : slope / intercept
model_with_intercept = pd.ols(y=df['Y'], x=df['X'], intercept=True)
df['Y_fit_with_intercept'] = model_with_intercept.y_fitted

# 1 degree of freedom : slope ; intersept=0
model_no_intercept = pd.ols(y=df['Y'], x=df['X'], intercept=False)
df['Y_fit_no_intercept'] = model_no_intercept.y_fitted

# 1 degree of freedom : slope ; intersept=offset
offset = -1
df['Yoffset'] = df['Y'] - offset
model_with_offset = pd.ols(y=df['Yoffset'], x=df['X'], intercept=False)
df['Y_fit_offset'] = model_with_offset.y_fitted + offset

print(model_with_intercept)
print(model_no_intercept)
print(model_with_offset)

df.plot(x='X', y=['Y', 'Y_fit_with_intercept', 'Y_fit_no_intercept', 'Y_fit_offset'])
plt.show() 
```

# javascript - 努力使用 RequireJS 设置 Jasmine。从测试框架调用时，模块在定义中断中的相对路径。

> ID：12664593
> 
> 赞同：2
> 
> 时间：2012-09-30T19:59:03.383
> 
> 标签：javascript, jquery, requirejs, jasmine

我有一个项目，我最近刚刚介绍了 RequireJS。在 RequireJS 之前，我一直在用 Jasmine 测试我的项目。我现在正在尝试更新 Jasmine 的 SpecRunner 以便它可以处理 RequireJS。

我发现[这篇关于使用 RequireJS 和 Jasmine 进行单元测试的文章是](http://www.bennadel.com/blog/2393-Writing-My-First-Unit-Tests-With-Jasmine-And-RequireJS.htm)我用来入门的。我遇到了如何加载模块的问题。每个模块都定义了它所依赖的其他模块，但每个模块的加载路径都与加载 requireJS 的位置相关。

我在两个不同的位置加载 requireJS：background.html 和 SpecRunner.html。背景用于主应用程序，SpecRunner 用于测试。问题是我的模块在从 SpecRunner 调用时无法加载，因为它们的相对路径发生了变化。

例子：

*   js/third_party/jquery-1.7.2.min.js
*   [js/背景/player.js](https://gist.github.com/cae8b79758236eeb9e36)
*   js/背景/播放列表.js
*   [测试/SpecRunner.html](https://gist.github.com/d4ede2ed3e6d5c4c651c)
*   [测试/规范/PlayerSpec.js](https://gist.github.com/74aa69b712435625fd46)
*   [背景.html](https://gist.github.com/99a60eae83457938aacd)

有了这个文件夹层次结构和文件，我有两种情况。一种代码运行正常，另一种存在问题：

**好情景**

*   background.html 加载 require.js 并以 player.js 作为加载点执行。
*   player.js 将 playlists.js 定义为依赖项。
*   playlists.js 已加载。
*   player.js 已加载。

**糟糕的场景**

*   SpecRunner.html 加载 require.js 并以 player.js 作为加载点执行。
*   player.js 将 playlists.js 定义为依赖项。
*   playlists.js 无法加载。获取文件：//tests/playlists.js

    *   文件位置不正确。playlists.js 不在 /tests 下，它在 js/background 下！

我不确定我应该如何处理这个？似乎对路径名非常明确是我唯一的出路，但这与所有 requireJS 示例背道而驰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T21:01:12.997

require 中的路径是相对于数据主位置或相对于调用的函数的位置`require()`。在你的好情况下是这样`js/background/`，在你的坏情况下是这样`tests/`。在您链接的博客中，他们使用 require.paths 使其正常工作：

```
<!--
    Since we are in the "test" directory, not in the standard
    "js" directory, we need to define the path prefix' for the
    RequireJS modules so that the modules can be found from the
    tests running in the Spec directory.
-->
<script type="text/javascript">

    var require = {
        paths: {
            "domReady": "../js/lib/require/domReady",
            "model": "../js/model"
        }
    };

</script> 
```

在您的情况下，您必须设置如下路径

```
'player':    '../js/background/player.js',
'playlists': '../js/background/playlists.js' 
```

并在测试运行程序中明确要求播放器和您的规范，就像他们在博客文章中所做的那样。

# java - java: 刽子手游戏重复字母

> ID：12664597
> 
> 赞同：0
> 
> 时间：2012-09-30T19:59:53.570
> 
> 标签：java, string, stringbuffer, chars

我有一个刽子手项目的逻辑问题，它需要用户的一封信并搜索该信是否包含在密码中。问题是我的编程方式，如果用户在密码中猜到的字母多次出现。它只会通过并表示它们。这不是我想要的，我只希望它一次更新正确猜测的字母的状态。

我尝试了一些不同的东西，比如在之后设置一个中断，`status(guessCh,`但是迭代器只会转到字母匹配的第一次出现并停在那里。

对此有什么简单的解决方法吗？

```
private void compare(String str)
{
    guessCh = str.charAt(0);
    char secretCh = '0';
    for (int i = i2; i < secretWord.length(); i++)                                           // Cuts the secret word into individual chars to process. 
    {
        secretCh = secretWord.charAt(i);
//      Compare the two strings.
        if (guessCh == secretCh)                                                            
        {
            status(guessCh, i);                                                               // Sends the letter & placement to status().  
        }

    }

} 
```

n

```
private String status(char guessCh, int placement)
{
/*  Update and return status. */

    if (guessCh >='A' && guessCh <= 'Z')
    {
        status = new StringBuffer(status).deleteCharAt(placement).toString();
        status = new StringBuffer(status).insert(placement,guessCh).toString();
        println("That guess is correct.");
        canvas.displayWord(status);
        return status;
    }

    return status;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:17:33.447

您可以使用比较方法中的状态变量测试先前的解决方案。

```
 if (guessCh == secretCh && status.charAt(i) != secretCh)
    {
        status(guessCh, i);
        break;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:51:08.293

据我所知（和理解），您面临的基本问题是由`for`比较方法中的循环引起的。

（注意，我的示例区分大小写，您需要考虑到这一点）

我可以建议两种基本方法...

第一个是，通过一次检查匹配所有出现...

```
private char guessCh;
private String secretWord;
private String status;
private String secretBuffer;

public TestStringCompare() {

    secretWord = "This is a test";
    // This is a copy of the secret word, this ensures that
    // we always have a copy of the original.
    secretBuffer = secretWord;
    status     = "______________";
    guessCh = 'i';

    compare("i");

}

private void compare(String str) {

    while (secretBuffer.contains(str)) {

        int foundAt = secretBuffer.indexOf(str);
        status(str.charAt(0), foundAt);
        // We want to remove the "guess" from our check string
        // so it doesn't cause a false positive in the future
        StringBuilder sb = new StringBuilder(secretBuffer);
        sb.replace(foundAt, foundAt + 1, "_");

        secretBuffer = sb.toString();
        System.out.println(secretBuffer);

    }

}

private String status(char guessCh, int placement) {
    /*  Update and return status. */

    if (Character.isLetter(guessCh)) {
        status = new StringBuffer(status).deleteCharAt(placement).toString();
        status = new StringBuffer(status).insert(placement, guessCh).toString();
        System.out.println("That guess is correct.");
        System.out.println(status);
    }

    return status;
} 
```

这会产生：

```
That guess is correct.
__i___________
Th_s is a test
That guess is correct.
__i__i________
Th_s _s a test 
```

或者，替换第一次出现的猜测（据我所知，这是你所追求的）

```
public class TestStringCompare {

    public static void main(String[] args) {
        new TestStringCompare();
    }
    private char guessCh;
    private String secretWord;
    private String status;
    private String secretBuffer;

    public TestStringCompare() {

        secretWord = "This is a test";
        secretBuffer = secretWord;
        status     = "______________";
        guessCh = 'i';

        compare("i");

    }

    private void compare(String str) {

        if (secretBuffer.contains(str)) {

            int foundAt = secretBuffer.indexOf(str);
            status(str.charAt(0), foundAt);
            // Some where here you need to remove the "guess" character
            // to ensure that it doesn't get repeated...
            StringBuilder sb = new StringBuilder(secretBuffer);
            sb.replace(foundAt, foundAt + 1, "_");

            secretBuffer = sb.toString();
            System.out.println(secretBuffer);

        }

    }

    private String status(char guessCh, int placement) {
        /*  Update and return status. */

        if (Character.isLetter(guessCh)) {
            status = new StringBuffer(status).deleteCharAt(placement).toString();
            status = new StringBuffer(status).insert(placement, guessCh).toString();
            System.out.println("That guess is correct.");
            System.out.println(status);
        }

        return status;
    }
} 
```

哪个会产生这个...

```
That guess is correct.
__i___________
Th_s is a test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:07:41.633

I am guessing this is homework of some sort - but anyway, why not use [indexOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29)

# javascript - 我能够检测到浏览，但我需要更多信息

> ID：12664606
> 
> 赞同：-2
> 
> 时间：2012-09-30T20:00:46.940
> 
> 标签：javascript

我正在制作一种浏览器检测库（我知道用户代理嗅探并不理想）。我在 quirksmode.org 上发现了一个非常有用的片段，看起来像这样：

```
var $browser = {
    init: function () {
        this.name = this.searchString(this.dataName) || "An unknown browser";

        this.version = this.searchVersion(navigator.userAgent)
            || this.searchVersion(navigator.appVersion)
            || "an unknown version";
    },

searchString: function (data) {

    for (var i=0;i<data.length;i++) {

        var dataString = data[i].string;

        var dataProp = data[i].prop;

        this.versionSearchString = data[i].versionSearch || data[i].identity;

        if (dataString) {
            if (dataString.indexOf(data[i].subString) != -1)
                return data[i].identity;
        }

        else if (dataProp) {
            return data[i].identity;
        }
    }
},

searchVersion: function (dataString) {
    var index = dataString.indexOf(this.versionSearchString);
    if (index == -1) return;
    return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
},

dataName: [
    {
        string: navigator.userAgent,
        subString: "Chrome",
        identity: "Chrome"
    },
    {   string: navigator.userAgent,
        subString: "OmniWeb",
        versionSearch: "OmniWeb/",
        identity: "OmniWeb"
    },
    {
        string: navigator.vendor,
        subString: "Apple",
        identity: "Safari",
        versionSearch: "Version"
    },
    {
        prop: window.opera,
        identity: "Opera",
        versionSearch: "Version"
    },
    {
        string: navigator.vendor,
        subString: "iCab",
        identity: "iCab"
    },
    {
        string: navigator.vendor,
        subString: "KDE",
        identity: "Konqueror"
    },
    {
        string: navigator.userAgent,
        subString: "Firefox",
        identity: "Firefox"
    },
    {
        string: navigator.vendor,
        subString: "Camino",
        identity: "Camino"
    },
    {       // for newer Netscapes (6+)
        string: navigator.userAgent,
        subString: "Netscape",
        identity: "Netscape"
    },
    {
        string: navigator.userAgent,
        subString: "MSIE",
        identity: "Internet Explorer",
        versionSearch: "MSIE"
    },
    {       // for older Netscapes (4-)
        string: navigator.userAgent,
        subString: "Mozilla",
        identity: "Netscape",
        versionSearch: "Mozilla"
    }
]
};
$browser.init(); 
```

所以现在我可以做类似的事情

```
alert($browser.name + $browser.version); 
```

但我也希望能够做到 $browser.author、$browser.prefix 和 $browser.engine。有谁知道我怎么能做到这一点？我知道我能做到

```
 if($browser.name == "Chrome"){ var engine = "WebKit" } 
```

但我不想要“引擎”，我想要“$browser.engine”

## ****编辑****

**好吧，伙计们，正如我之前所说，**我知道用户代理嗅探并不理想**。而且我的整个项目都不是以此为基础的。这只是一个更大的 JS 文件中的一个简短的小模块。这只是一个方便的 $browser 模块。我知道特征检测比 ua 嗅探要好得多，而且我使用modernizr 的方式比使用 jQuery 浏览器对象或 Dojo“有”更多**。**事实上，我从不使用这些。而且我知道stackoverflow通常不是辅导网站（好吧，不是辅导网站），但我有点希望找到一种快速的小方法来手动在每个对象中添加额外信息。我尝试了很多方法并不断出错或失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:10:04.697

jQuery Map`browser`被有效地分组到引擎中，因为“safari”值已被弃用，而“webkit”值现在更受青睐。

但是无论如何你都应该使用 jQuery.support。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:10:06.033

看看这些链接：

*   [检测移动浏览器](http://detectmobilebrowsers.com/)
*   [检测权](http://www.detectright.com/)
*   [设备图集](http://deviceatlas.com/)
*   [WURFL](http://wurfl.sourceforge.net/)
*   [多溴联苯醚](http://mdbf.codeplex.com/)

请记住，尽管您通常不应该使用此信息*而不是*特征检测（除非您必须 - 例如对于某些移动浏览器，您无法进行正确的特征检测，这可能不适用于这里，因为您正在这样做JavaScript 无论如何）。

对于正确的特征检测，请使用[Modernizr](http://modernizr.com/)和[yepnope](http://yepnopejs.com/)，并尽可能对[未来友好](http://futurefriend.ly/)。**

# wordpress - WordPress：从特定页面中删除特色图片

> ID：12664608
> 
> 赞同：2
> 
> 时间：2012-09-30T20:00:49.463
> 
> 标签：wordpress, wordpress-theming

我能够从自定义帖子类型的页面中删除特色图像元框。以下是我使用的：

```
add_action('do_meta_boxes', 'remove_thumbnail_box');
function remove_thumbnail_box() {
  remove_meta_box( 'postimagediv','page','side' );
} 
```

但是，我真正想做的是将其仅应用于特定的页面模板。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:17:40.940

啊，我找到了解决办法。

```
$post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
$template_file = get_post_meta($post_id,'_wp_page_template',TRUE);
if ($template_file === 'page-template-name.php') {
  add_action('do_meta_boxes', 'remove_thumbnail_box');
  function remove_thumbnail_box() {
    remove_meta_box( 'postimagediv','page','side' );
  }
} 
```

如果有更好的解决方案...请不要犹豫发布。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T00:20:06.427

对于其他希望以编程方式删除特色图像支持的人（评论应该是自我解释的）：

```
/**
*   Removes the featured image metabox from specific pages (by ID)
*   @note: populate the $excluded_page_ids_array array with page IDs
*/
function eh_remove_featured_image_metabox_from_specific_pages() {
    // populate with page IDs to exclude featured image metabox from
    $excluded_page_ids_array = array( 38, 29 );
    // store the current post ID
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'];
    // check if the current page is in our excluded array
    if( in_array( $post_id, $excluded_page_ids_array ) ) {
        // remove featured image metabox
        remove_meta_box( 'postimagediv','page','side' );
    }
}
add_action( 'do_meta_boxes', 'remove_featured_image_metabox_from_specific_pages' ); 
```

在调整要排除的页面数组后，您需要将此代码段添加到您的主题 functions.php 文件中。

或者，您可以从*所有*页面中删除特色图像，除了指定的页面 - 特色图像元框将保留。

```
/**
*   Removes the featured image metabox from all pages except specified ones
*   @note: populate the $page_ids array with page IDs
*/
function eh_remove_featured_images_metabox_from_all_pages_except_specified() {
    // populate with page IDs to keep the featured image metabox on
    $page_ids = array( 25, 31 );
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'];
    if( ! in_array( $post_id, $page_ids ) ) {
        // remove featured image metabox
        remove_meta_box( 'postimagediv','page','side' );
    }
}
add_action( 'do_meta_boxes', 'eh_remove_featured_images_metabox_from_all_pages_except_specified' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T17:32:15.250

还有另一种解决方案。通过编辑`page.php`

例如，如果您的功能图像 div 如下所示

```
<div class="thumbnail">
  <?php echo get_the_post_thumbnail( $post_id, $size, $attr ); ?> 
</div> 
```

您可以使用

if (is_page( array( 42, 'about-me', 'Contact' ) ); // 当显示的页面是 post ID :42 或 post_name_slug "about-me" 或 post_title "Contact" 时返回 true。

```
<?php
if (is_page( array( 42, 'about-me', 'Contact' ) ) ) {
    ?>
<div class="thumbnail" style="display:none;">
<?php echo get_the_post_thumbnail( $post_id, $size, $attr ); ?> 
</div>
<?php
}else{
?>
<div class="thumbnail">
 <?php echo get_the_post_thumbnail( $post_id, $size, $attr ); ?> 
</div>
<?php}?> 
```

# c++ - “class::data member is private”错误，但我正在使用成员函数对其进行操作？

> ID：12664615
> 
> 赞同：2
> 
> 时间：2012-09-30T20:01:14.097
> 
> 标签：c++, object, private-members, data-members

我对 C++ 很陌生，我不明白是什么触发了这个错误：

```
/home/---/Documents/C++/---_lab2/lab2c.cpp||In function ‘int main()’:|
Line 9: error: ‘float circle::x1’ is private
Line 58: error: within this context 
```

我知道数据成员 x1（x2,y1,y2 也是）是私有的，但是我正在使用属于类圈子成员的函数对对象 myObj 进行操作，所以它们不应该仍然有效吗？有人可以向我解释这里有什么问题吗？

```
#include <iostream>
#include <cmath>
#define PI 3.14159

using namespace std;

class circle{

private:
float x1,y1,x2,y2;

protected:

float distance(float x1,float y1,float x2, float y2){
    return sqrt(fabs((x2-x1)*(x2-x1))+fabs((y2-y1)*(y2-y1)));
};

public:

float radius(float x1, float y1, float x2, float y2){
    float rad = distance(x1,y1,x2,y2);
    return rad;
};

float circumference(float rad){
    return 2*PI*rad;
};

float area(float rad){
    return PI*rad*rad;
};

float populate_classobj(float x1main,float x2main,float y1main,float y2main){
x1 = x1main;
x2 = x2main;
y1 = y1main;
y2 = y2main;
};

};

int main(){

circle myObj;
float x1main,x2main,y1main,y2main;
cout << "Coordinates of center" << endl;
cout << "X: ";
cin >> x1main;
cout << "Y: ";
cin >> y1main;
cout << "Coordinates of point on circle" << endl;
cout << "X: ";
cin >> x2main;
cout << "Y: ";
cin >> y2main;

myObj.populate_classobj(x1main,x2main,y1main,y2main);

cout << "Radius is " << myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2) << endl;
cout << "Circumference is " << myObj.circumference(myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2)) << endl;;
cout << "Area is " << myObj.area(myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2)) << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T20:08:09.237

`private`当您调用`radius`& 其他方法时，您正试图访问类外的成员。

**但**你真正的问题在于逻辑。为什么需要将参数传递给例如`radius`您的类的方法：

```
float radius(float x1, float y1, float x2, float y2){
    float rad = distance(x1,y1,x2,y2);
    return rad;
}; 
```

圈子已经是独立的了，为什么不只是：

```
float radius(){
    float rad = distance(x1,y1,x2,y2);
    return rad;
}; 
```

与：

```
float circumference(){
    return 2*PI*radius();
};

float area(){
    return PI*radius()*radius();
}; 
```

另外，请注意：

```
circle myObj; 
```

创建一个无效的对象。你不应该`populate_classobj`只是为了让它有效而打电话。相反，有一个适当的构造函数：

```
circle(float x1main,float x2main,float y1main,float y2main) :
x1(x1main),
x2(x2main),
y1(y1main),
y2(y2main)
{
}; 
```

并将对象创建为：

```
circle myObj(x1main,x2main,y1main,y2main); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:05:52.560

`main`尝试使用末尾的各种插入语句`myObj.x1`，它尝试使用 的`x1`成员`myObj`。他们不能，因为`x1`是私人的。代码对该值做什么并不重要。私人是私人的。您可以从成员函数或友元函数**内部**访问该值，但不能从外部访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T20:05:55.680

```
cout << "Radius is " << myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2) << endl;
cout << "Circumference is " << myObj.circumference(myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2)) << endl;;
cout << "Area is " << myObj.area(myObj.radius(myObj.x1,myObj.y1,myObj.x2,myObj.y2)) << endl; 
```

您无法访问私有变量。你也不应该这样做。您的方法签名应该是`myObj.radius()`或已经`myObj.area()`是. 因此，再次将它们作为参数传递是多余的。`x1 y1 x2 y2``circle myObj`

# php - 使用javascript在php中获取记录行

> ID：12664619
> 
> 赞同：0
> 
> 时间：2012-09-30T20:01:48.317
> 
> 标签：php, javascript

来自 Adob​​e Flex，我习惯于在 ArrayCollection 中提供数据，当我想显示所选项目的数据时，我可以使用 sourcedata.getItemAt(x) 之类的东西，它为我提供了从该索引返回的所有数据。

现在在 php 和 javascript 中工作我正在寻找当用户单击一行数据时（在行上带有 onClick 的表中，以便能够查看我的数据变量 $results，然后使用来自的值填充文本输入那行。我的问题是我不知道如何使用 javascript 来查看包含我所有数据的变量，然后根据索引或匹配变量（例如主键）拉出一行。

有人知道怎么做吗。当我可以在原始拉取中提供数据时，最好不要触发“读取”查询，以免再次冲击 mySQL 服务器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:18:17.737

我会发出一个大的 AJAX/JSON 请求并通过 JavaScript 修改给定的数据。

下面的代码是一个实际请求的示例。JS 使用 jQuery，以便更轻松地管理 JSON 结果。容器对象可以用一些方法来扩展，用于将结果对象输入到表中等等。

PHP：

```
$result = array();
$r = mysql_query("SELECT * FROM table WHERE quantifier = 'this_section'");
while($row = mysql_fetch_assoc($r))
  $result[$row['id']] = $row;
echo json_encode($result); 
```

JavaScript + jQuery：

```
container.result = {};
container.doStuff = function () {
  // do something with the this.result
  console.debug(this.result[0]);
}

// asynchronus request
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: function(result){
    container.result = result;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:20:35.103

这是一个很好的问题！AJAXy 的概念在概念上非常简单，但是当您使用 vanilla 代码时，有很多似乎无法填补的漏洞。

您需要做的第一件事是在 HTML 中识别表格中的每一行。这是一个简单的方法：

```
<tr class="tablerow" id="row-<?= $row->id ">
  <td><input type="text" class="rowinput" /></td>
</tr> 
```

我还给了该行一个非唯一的`tablerow`. 现在给他们一些行动！我在这里使用 jQuery，它将为我们完成所有繁重的工作。

```
<script type="text/javascript">
$(function(){
  $('.tablerow').click(function(){
    var row_id = $(this).attr('id').replace('row-','');

    $.getJSON('script.php', {id: row_id}, function(rs){
      if (rs.id && rs.data) {
        $('#row-' + rs.id).find('.rowinput').val(rs.data);
      }
    });
  });
});
</script> 
```

然后`script.php`你会想做这样的事情：

```
$id = (int) $_GET['id'];
$rs = mysql_query("SELECT data FROM table WHERE id = '$id' LIMIT 1");
if ($rs && mysql_num_rows($rs)) {
  print json_encode(mysql_fetch_array($rs, MYSQL_ASSOC));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:06:53.103

也许你可以给每一行一个单选按钮。您可以使用 JavaScript 触发对单选按钮组中的选择的操作。稍后，当一切正常时，您可以使用 CSS 隐藏实际的单选按钮并使整行成为标签，这意味着单击该行将有效地单击单选按钮。这样，它也可以访问，因为有一个动作输入元素，你只是隐藏它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T23:09:41.140

我只是将数据库字段名称存储在`td`元素中（嗯......一个稍微不同的字段名称，因为没有理由将生产数据库字段名称公开给任何关心查看页面源的人），然后使用`dataset`属性提取它.

或者，您可以只设置一个`class`属性。

你的 PHP 看起来像：

```
<tr>
  <td data-name="<?=echo "FavoriteColor"?>"></td>
</tr> 
```

或者

```
<tr>
  <td class="<?=echo "FavoriteColor"?>"></td>
</tr> 
```

javascript看起来有点像：

```
 var Test;
    if (!Test) {
        Test = {
        };
    }
    (function () {
        Test.trClick = function (e) {
            var tdCollection,
                i,
                field = 'FavoriteColor',
                div = document.createElement('div');
            tdCollection = this.getElementsByTagName('td');
            div.innerText = function () {
                var data;
                for (i = 0; i < tdCollection.length; i += 1) {
                    if (tdCollection[i].dataset['name'] === field) { // or tdCollection[i].className.indexOf(field) > -1
                        data = tdCollection[i].innerText;
                        return data;
                    }
                }
            }();
            document.body.appendChild(div);
        };
        Test.addClicker = function () {
            var table = document.getElementById('myQueryRenderedAsTable'),
                i;
            for (i = 0; i < table.tBodies[0].children.length; i += 1) {
                table.tBodies[0].children[i].onclick = Test.trClick;
            }
        };
        Test.addClicker();
    }()); 
```

处理数据集：http: [//jsfiddle.net/R5eVa/1/](http://jsfiddle.net/R5eVa/1/)

与类工作小提琴：http: [//jsfiddle.net/R5eVa/2/](http://jsfiddle.net/R5eVa/2/)

# d - 如何删除关联数组中最近最少访问的键？

> ID：12664621
> 
> 赞同：3
> 
> 时间：2012-09-30T20:01:52.463
> 
> 标签：d

我有一个限制为 x 个键的关联数组，并且想要删除最近最少访问的键以添加另一个键。我在 mintl 中找到了 HashAA，它可以在 D1 中完成这项工作，但我没有为 D2 找到任何东西。现在有什么支持这一点的，还是我需要维护第二个数组才能完成工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:32:21.053

我没有真正的答案，但我认为在几分钟内尝试实现它会很有趣（这可能效率很低，而且可能有问题）：

```
import std.stdio;
import std.traits;

struct MyHash(AA, size_t Limit)
    if (isAssociativeArray!AA)
{
    alias KeyType!AA Key;
    alias ValueType!AA Value;

    void opIndexAssign(Value value, Key key)
    {
        if (hash.length >= Limit)
        {
            Key leastUsed = leastUsedKey;
            hash.remove(leastUsed);
            counts.remove(leastUsed);
        }

        hash[key] = value;
    }

    Value opIndex(Key key)
    {
        counts[key]++;
        return hash[key];
    }

    Value[Key] hash;
    alias hash this;

private:

    @property Key leastUsedKey()
    {
        Key result;
        size_t maxCount = size_t.max;

        foreach (key; hash.byKey)
        {
            if (auto count = key in counts)
            {
                if (*count < maxCount)
                {
                    maxCount = *count;
                    result = key;
                }
            }
            else
            {
                return key;
            }
        }

        return result;
    }

    size_t[Key] counts;
}

// just to avoid declaring variables in main()
@property void consume(int key) { }

void main()
{
    MyHash!(int[int], 3) hash;

    hash[0] = 0;
    hash[1] = 0;
    hash[2] = 0;

    writeln(hash.keys);

    hash[2].consume;
    hash[5] = 0;

    writeln(hash.keys); // 2 stays, 5 added

    hash.clear();
    hash[0] = 0;
    hash[1] = 0;
    hash[2] = 0;

    hash[0].consume;
    hash[1].consume;
    hash[1].consume;
    hash[2].consume;
    hash[2].consume;
    hash[2].consume;

    hash[5] = 0;
    writeln(hash);  // (0 removed)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T22:22:34.367

内置的 AA 将在需要时重新散列以适应更多元素，大小不固定，并且不会跟踪您访问或添加元素的方式，并且由于该语言内置了 AA，备用散列表实现将相对较少（大多数人只使用内置的 AA）。

因此，我非常确定您需要自己执行此操作 - 可能是通过围绕内置 AA 类型创建一个包装器并让包装器跟踪对它的所有访问，以便它知道哪个键被访问最少最近。

您可以随时查看[dcollections](http://dsource.org/projects/dcollections)以了解一些备用容器实现（并且 IIRC*中确实*有一个哈希表，但我怀疑它是否符合您的要求）。就个人而言，我什至从未*听说过*按照您希望的方式运行的哈希表，所以我希望您正在寻找的内容至少有些不正常。但是创建一个围绕 AA 的包装器应该足够简单，它可以按照您想要的方式运行。

# scala - 非阻塞 Scala 循环

> ID：12664622
> 
> 赞同：0
> 
> 时间：2012-09-30T20:01:55.480
> 
> 标签：scala, loops, actor, nonblocking

Scala中有没有办法在不阻塞整个流程的情况下循环执行某些内容？

我有以下代码在 Actor 模型中传输一些东西

所有演员向其他演员发送一些东西：

```
def some_method
  loop {
  // Transmit something
  Thread.sleep(100)
} 
```

我也有一些代码来接收其他演员发送的内容。但是流程并没有脱离循环。它在不退出循环的情况下休眠并继续。因此，所有参与者都继续发送，但没有人接收。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:32:17.623

如果我理解正确，您希望传输每 100 毫秒发生一次，但您不想为此创建另一个线程（并且`Thread.sleep`演员内部可能确实会阻塞流程）。您可以使用`reactWithin`：

```
import java.util.Date
import math.max

def some_method = {
    var last_transmission_time = 0
    loop {
        val current_time = (new Date).getTime
        reactWithin(max(0, last_transmission_time + 100 - current_time)) {
            // actor reaction cases

            case TIMEOUT => {
                // Transmit something
                last_transmission_time = (new Date).getTime
            }
        }
    }
} 
```

`last_transmission_time`保存最后一次传输完成的时间。计算响应超时，以便在当前时间为最后传输时间 + 100ms 时发生 TIMEOUT。

如果发生超时，则意味着自上次传输以来已超过 100 毫秒，因此应调用另一次传输。

如果反应案例本身可能需要很多时间，那么我看不到任何简单的解决方案，而是创建另一个线程。

我没有尝试代码，因为我不确定我是否完全理解您的问题。

# linux - Linux 脚本从 Excel 中提取信息以创建用户

> ID：12664630
> 
> 赞同：-4
> 
> 时间：2012-09-30T20:03:29.767
> 
> 标签：linux, perl

现在我被这个项目困住了，不得不从 excel 文件中提取信息来创建用户。该脚本需要以下内容。

*   为员工创建帐户
*   将他们放入他或她自己的部门组
*   使用他或她的员工 ID 设置初始密码
*   发送一封包含他们的新帐户和密码的电子邮件
*   在屏幕上用圆点显示进度

我快接近了，但在第 8 行和第 13 行出现 EOF 错误，请参见此处的脚本

```
#!bin/bash
echo $(pwd)/employeesdata.xls
Path=$($pwd)/employeesdata.xls
read Path
if [ -e $Path ];
then
Username= [ grep $(Username) $Path | cut -f1 -d `]'
Password= [ grep $(Password) $Path | cut -f2 -d `]'
useradd -- b $Username
echo $Password | /usr/bin/passwd --stdin $Username
fi
exit

I know it doesn't have the email portion yet. 
```

PS-UserScript：第 8 行：在寻找匹配的“”时出现意外的 EOF PS-UserScript：第 13 行：语法错误：文件意外结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:12:08.360

您可以使用 Spreadsheet::ParseExcel 来完成此任务：

首先确保`cpanm`已安装：

```
$ cpan App::cpanminus 
```

然后安装模块：

```
$ cpanm Spreadsheet::ParseExcel 
```

安装后，您将能够使用复制到问题中的解析脚本。该脚本将一次获取每个单元格，但是一旦读取这些值，您仍然需要对这些值执行一些操作。根据电子表格的设置方式（如果您提供样本或至少提供有用的标题），您可能希望在遍历行时收集所需的信息，然后使用您的数据执行所需的操作集。

另外，我想指出您解析的文件必须是较旧的 *.xls 格式。ParseExcel 不会解析 *.xlsx 文件，因此如果需要，请先使用 Excel 以旧格式保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:26:23.233

这个简单的 python 脚本遍历每个单元格/行，我认为这将是一个好的开始：

```
#!/usr/bin/python

from openpyxl import load_workbook
wb = load_workbook(filename = 'file.xlsx', use_iterators = True)
ws = wb.get_sheet_by_name(name = 'Feuil1') # ws is now an IterableWorksheet

for row in ws.iter_rows(): # it brings a new method: iter_rows()
    for cell in row:
        print cell.internal_value 
```

# entity-framework - EF Code First、IoC 和 DbConnection

> ID：12664636
> 
> 赞同：4
> 
> 时间：2012-09-30T20:04:13.583
> 
> 标签：entity-framework, ef-code-first, inversion-of-control, entity-framework-5

我首先使用实体​​框架代码。我希望能够`System.Data.Common.DbConnection`在实例化派生自`System.Data.Entity.DbContext`. 这样我就可以根据代码运行的环境传递不同类型的连接，即`System.Data.SqlClient`在开发中使用（SQL Server），`System.Data.SQLite`在单元测试时以及在生产中使用其他东西。的相关部分`Context`如下所示：

```
public class Context : DbContext
{
    public Context(DbConnection dbConnection)
        : base(dbConnection, true)
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, Configuration>());

        base.OnModelCreating(modelBuilder);
    }

    public DbSet<Test> Tests { get; set; }
} 
```

这给了我以下错误：`The target context 'Services.Persistence.Context' is not constructible. Add a default constructor or provide an implementation of IDbContextFactory.`我认为这发生在模型初始化期间，当 Entity Framework 显然觉得它需要更新它自己的`Context`时，与我试图实现的 IoC 模式无关。缺少默认构造函数是设计使然。`IDbContextFactory`接口同样没用——它也必须有一个默认构造函数。

Entity Framework Code First 是否完全符合通过从配置文件中读取连接字符串（或者直接传递连接字符串）来设置它的配置的想法，还是可以解决这个问题？

*更新*，这里是温莎配置：

```
container.Register(Component
    .For<DbConnection>()
    .UsingFactoryMethod(() =>
        new SqlConnection("Data Source=(localdb)\\v11.0;Database=ThatProject;MultipleActiveResultSets=true"))
    .LifeStyle.Transient);

container.Register(Component
    .For<Context>()
    .UsingFactoryMethod(k => new Context(k.Resolve<DbConnection>()))
    .LifeStyle.PerWebRequest);

container.Register(Component
    .For<IRepository>()
    .UsingFactoryMethod(k => new Repository(k.Resolve<Context>()))
    .LifeStyle.PerWebRequest); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:50:28.070

我很确定您的问题与 EF 无关，但我并不是 Windsor 的真正用户，所以我不能确定您的配置问题是什么。我所做的是使用 ninject 重现类似的配置，它的工作方式与您期望的完全一样，见下文：

```
class Program
    {
        static void Main(string[] args)
        {
            IKernel kernel = new StandardKernel();
            kernel.Bind<DbConnection>().ToMethod((ctx) =>{return new SqlConnection("Data Source=(localdb)\\v11.0;Database=ThatProject;MultipleActiveResultSets=true");});
            kernel.Bind<Context>().ToSelf();//not really needed
            kernel.Bind<TestRepository>().ToSelf();//not really needed
            kernel.Get<TestRepository>();
        }
    }
    public class Context : DbContext
    {
        public Context(DbConnection dbConnection)
            : base(dbConnection, true){}

        public DbSet<Test> Tests { get; set; }
    }
    public class TestRepository
    {
        public TestRepository(Context c)
        {
            c.Tests.Add(new Test());
            c.SaveChanges();

            var all = c.Tests;
        }
    }
    public class Test
    {
        public int Id { get; set; }
    } 
```

这意味着 EF 不会尝试对上下文创建做任何有趣的事情（因为非空构造函数对我来说很好用）。

从您的 Windsor 配置中，我希望您需要执行以下操作，但我不太确定确切的语法：

```
container.Register(Component
    .For<DbConnection>()
    .UsingFactoryMethod(() =>
        new SqlConnection("Data Source=(localdb)\\v11.0;Database=ThatProject;MultipleActiveResultSets=true"))
    .LifeStyle.Transient);

container.Register(Component
    .For<Context>()
    .ImplementedBySelf()//this probably isn't the correct syntax
    .LifeStyle.PerWebRequest);//per request is good, i have some details around why this is good practice if you are interested

container.Register(Component
    .For<IRepository>()
    .ImplementedBy<ConcreteRepository>()//you arent really calling a method and creating the object yourself you are letting Windsor create the object and sort out the dependancy tree
    .LifeStyle.PerWebRequest); 
```

# c# - 通过Id和Name，EF获取下一个和上一个sql行？

> ID：12664638
> 
> 赞同：2
> 
> 时间：2012-09-30T20:04:18.610
> 
> 标签：c#, asp.net, linq, entity-framework

假设我们在 SQL Server 表中有以下数据（按名称排序）：

```
Id   Name        LName
-------------------------
5   Abbas        Dayyan
3   Mohammad     KD
4   Nima         Ahmad
1   Omid         Zangene
2   Pedram       Ahmadi 
```

我们有一个 Id 查询字符串，我们想从 Id 中获取下一行和上一行（如果存在）。

例如：

Id 查询字符串为 4，因此我们希望将**Mohammad KD**作为上一行，将**Omid Zangene**作为下一行。

您能否指导我如何使用 LINQ to Entity Framework 做到这一点。

**编辑：**
实际上，表格行数约为 100 万。
默认情况下，表格行不按名称排序，需要按名称对结果进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:53:57.243

这个怎么样？

```
var result = (from person in db.People
              where person.Id == id
              let ordered = db.People.OrderBy(p => p.Name)                  
              let reversed = db.People.OrderByDescending(p => p.Name)                  
              let previous = reversed.SkipWhile(p => p.Id != id).Skip(1).FirstOrDefault()
              let next = ordered.SkipWhile(p => p.Id != id).Skip(1).FirstOrDefault()
              select new { previous, next }).First(); 
```

**编辑：**考虑到新规范。

**编辑 2：**将代码修改为 not use `LastOrDefault`，这不适用于 LINQ to Entities。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:56:02.273

试试这个：

```
 int id = 4;     
 var list = (from x in ctx.Table
            where x.id >= id - 1 && x.id <= id + 1
            select x).OrderBy(o -> o.name).ToList(); 
```

编辑：这将返回 ID 为 3,4 和 5 的元素。我不知道您是否真的按名称对数据库中的表进行排序，但如果您是，我认为使用循环而不是使用 linq 会更容易获取上一个和下一个元素。

更新：按名称对结果进行排序

# mips - 让 Sourcery Codebench 在 Windows 上运行

> ID：12664639
> 
> 赞同：1
> 
> 时间：2012-09-30T20:04:22.397
> 
> 标签：mips, cross-compiling, codesourcery

我无法在我的机器上设置交叉编译器 ( [Sourcery Codebench](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/) ) 和模拟器 ( [OVP](http://www.ovpworld.org/download_MIPS.php) )。有人可以告诉我怎么做吗？

我想将 C 交叉编译为 MIPS，然后在我的 windows 7 x86-64 位机器上模拟它。我对这类事情没有太多经验，甚至无法确定要下载哪些版本

我已经看到一两个关于让 sourcery 在 Windows 上工作的问题，但他们没有我需要的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:15:06.790

我不熟悉 OVP，但我知道 Sourcery CodeBench。Sourcery CodeBench 可用于 Windows，并带有易于使用的安装程序。精简版页面在这里：

[http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)

有 MIPS ELF（裸机）和 GNU/Linux lite 版下载的链接。我不确定你需要哪一个。最新的工具链来自 Spring 2012 版本。

安装工具链后，您可以编译应用程序并在真实硬件或模拟器上运行它。

你走了多远？您是否安装了工具链和模拟器？你能在你的目标上编译和运行应用程序吗？

# ruby-on-rails-3 - 向 Rails 中的表单添加“必填”字段并引发错误

> ID：12664640
> 
> 赞同：0
> 
> 时间：2012-09-30T20:04:27.617
> 
> 标签：ruby-on-rails-3, forms, validation

标题里写的差不多。

我想在 Rails 中对表单进行客户端验证，这样每当用户没有输入一些“必填”字段时，它就会抛出错误并且根本不提交表单（而不是在服务器端和 redirect_to 这样做：背部）。

关于如何做到这一点的任何例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:01:50.150

看看 [http://railscasts.com/episodes/263-client-side-validations](http://railscasts.com/episodes/263-client-side-validations/%22Client%20Side%20Validation%22)

在用户填写表单时内联显示验证错误可以带来更好的使用体验。了解如何使用客户端验证 gem 来做到这一点。

# r - 为聚类生成数据

> ID：12664645
> 
> 赞同：2
> 
> 时间：2012-09-30T20:05:10.660
> 
> 标签：r, cluster-analysis, random-forest, data-generation

我想用一些人工数据测试我的随机森林聚类。我想生成具有强可靠性和一些噪音的数据集。

我有 2 个属性，A1 和 A2（均为二进制）。类计算为：A1 xor A2。我添加了一些嘈杂的二进制属性。

例如，我们有：

```
A1   A2   noise | class
0    0     ...  | 0
0    1     ...  | 1
1    0     ...  | 1
1    1     ...  | 0
 ...       ...  | ... 
```

在聚类中，我们没有类，因此对于随机森林聚类，我们获取原始数据并对其进行转换。我们将所有现有案例标记为第 1 类，并添加标记为第 2 类的合成数据。合成数据是通过从某个属性的所有值中随机抽样构建的。

这是我们得到的：

```
A1   A2   noise | class
0    0     ...  | 1
0    1     ...  | 1
1    0     ...  | 1
1    1     ...  | 1
       .....
------------------------- 
0    0     ...  | 2
0    0     ...  | 2
1    1     ...  | 2
0    1     ...  | 2
       ..... 
```

上半部分是标有类别 1 的原始数据（如上）。线下是标有类别 2 的随机采样合成数据。随机森林试图找到一些区分类别 1 和类别 2 的结构（真实数据与随机数据）。问题是，没有类的 XOR 什么都没有告诉我们，这里也没有什么可学的。

最后，我的问题：如何生成具有非依赖、轻度依赖或强依赖属性的随机森林聚类数据？

# c++ - JPEG - 从文件中读取焦距

> ID：12664647
> 
> 赞同：2
> 
> 时间：2012-09-30T20:05:17.153
> 
> 标签：c++, jpeg, exif

在研究新相机时，我认为对我过去在照片中使用的最常见设置进行概述会很有趣。我主要对检索图片中使用的焦距感兴趣。虽然光圈/ ISO/快门速度也会受到欢迎。

虽然在过去 10 年中使用了不同的相机，但我也需要将其转换为 35 毫米等效格式以进行比较。我知道这是传感器尺寸的函数，特别是传感器裁剪因子乘以焦距。

搜索我没有设法找到一个 jpeg 文件格式的标题。我了解到您可以在名为 wotsit.org 的网站上找到其中的大部分内容，但显然我无法从那里下载任何内容。我对 jpeg 文件几乎一无所知，但我很确定他们使用 exif 格式来保存我正在寻找的图像元数据。

[http://www.exif.org/Exif2-1.PDF](http://www.exif.org/Exif2-1.PDF)，第 49 页，显示焦距在某处存储为有理数*。但是我很难掌握结构并将其应用到代码中。此外，要计算等效的 35 毫米比率，我必须知道相机的传感器尺寸，我在该文档中找不到。

有人可以给我提示/指出jpeg / exif文件的实际结构的方向吗？我将在这个项目中使用 C++。我知道这一定是可能的，windows 显示 35mm eqv。我的照片。

*这似乎是两个代表分数的 ulong，当划分时，给出焦距？

TL;DR：如何从 jpeg 文件中提取焦距和传感器尺寸以计算 35mm 等效焦距？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:09:02.040

Unless you're purpose is to learn how to read these images I would suggest using a library such as [libexif](http://libexif.sourceforge.net/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:08:38.440

A short answer: [http://www.exiv2.org/](http://www.exiv2.org/)

# wordpress - wordpress 上的 .htaccess：如何将尾部斜杠添加到主页的 url

> ID：12664650
> 
> 赞同：1
> 
> 时间：2012-09-30T20:05:31.517
> 
> 标签：wordpress, .htaccess

我的 .htaccess 中有以下代码：

```
# BEGIN W3TC Browser Cache
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/x-javascript .js
    AddType text/x-component .htc
    AddType text/html .html .htm
    AddType text/richtext .rtf .rtx
    AddType image/svg+xml .svg .svgz
    AddType text/plain .txt
    AddType text/xsd .xsd
    AddType text/xsl .xsl
    AddType text/xml .xml
    AddType video/asf .asf .asx .wax .wmv .wmx
    AddType video/avi .avi
    AddType image/bmp .bmp
    AddType application/java .class
    AddType video/divx .divx
    AddType application/msword .doc .docx
    AddType application/vnd.ms-fontobject .eot
    AddType application/x-msdownload .exe
    AddType image/gif .gif
    AddType application/x-gzip .gz .gzip
    AddType image/x-icon .ico
    AddType image/jpeg .jpg .jpeg .jpe
    AddType application/vnd.ms-access .mdb
    AddType audio/midi .mid .midi
    AddType video/quicktime .mov .qt
    AddType audio/mpeg .mp3 .m4a
    AddType video/mp4 .mp4 .m4v
    AddType video/mpeg .mpeg .mpg .mpe
    AddType application/vnd.ms-project .mpp
    AddType application/x-font-otf .otf
    AddType application/vnd.oasis.opendocument.database .odb
    AddType application/vnd.oasis.opendocument.chart .odc
    AddType application/vnd.oasis.opendocument.formula .odf
    AddType application/vnd.oasis.opendocument.graphics .odg
    AddType application/vnd.oasis.opendocument.presentation .odp
    AddType application/vnd.oasis.opendocument.spreadsheet .ods
    AddType application/vnd.oasis.opendocument.text .odt
    AddType audio/ogg .ogg
    AddType application/pdf .pdf
    AddType image/png .png
    AddType application/vnd.ms-powerpoint .pot .pps .ppt .pptx
    AddType audio/x-realaudio .ra .ram
    AddType application/x-shockwave-flash .swf
    AddType application/x-tar .tar
    AddType image/tiff .tif .tiff
    AddType application/x-font-ttf .ttf .ttc
    AddType audio/wav .wav
    AddType audio/wma .wma
    AddType application/vnd.ms-write .wri
    AddType application/vnd.ms-excel .xla .xls .xlsx .xlt .xlw
    AddType application/zip .zip
</IfModule>
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css A31536000
    ExpiresByType application/x-javascript A31536000
    ExpiresByType text/x-component A31536000
    ExpiresByType text/html A691200
    ExpiresByType text/richtext A691200
    ExpiresByType image/svg+xml A691200
    ExpiresByType text/plain A691200
    ExpiresByType text/xsd A691200
    ExpiresByType text/xsl A691200
    ExpiresByType text/xml A691200
    ExpiresByType video/asf A31536000
    ExpiresByType video/avi A31536000
    ExpiresByType image/bmp A31536000
    ExpiresByType application/java A31536000
    ExpiresByType video/divx A31536000
    ExpiresByType application/msword A31536000
    ExpiresByType application/vnd.ms-fontobject A31536000
    ExpiresByType application/x-msdownload A31536000
    ExpiresByType image/gif A31536000
    ExpiresByType application/x-gzip A31536000
    ExpiresByType image/x-icon A31536000
    ExpiresByType image/jpeg A31536000
    ExpiresByType application/vnd.ms-access A31536000
    ExpiresByType audio/midi A31536000
    ExpiresByType video/quicktime A31536000
    ExpiresByType audio/mpeg A31536000
    ExpiresByType video/mp4 A31536000
    ExpiresByType video/mpeg A31536000
    ExpiresByType application/vnd.ms-project A31536000
    ExpiresByType application/x-font-otf A31536000
    ExpiresByType application/vnd.oasis.opendocument.database A31536000
    ExpiresByType application/vnd.oasis.opendocument.chart A31536000
    ExpiresByType application/vnd.oasis.opendocument.formula A31536000
    ExpiresByType application/vnd.oasis.opendocument.graphics A31536000
    ExpiresByType application/vnd.oasis.opendocument.presentation A31536000
    ExpiresByType application/vnd.oasis.opendocument.spreadsheet A31536000
    ExpiresByType application/vnd.oasis.opendocument.text A31536000
    ExpiresByType audio/ogg A31536000
    ExpiresByType application/pdf A31536000
    ExpiresByType image/png A31536000
    ExpiresByType application/vnd.ms-powerpoint A31536000
    ExpiresByType audio/x-realaudio A31536000
    ExpiresByType image/svg+xml A31536000
    ExpiresByType application/x-shockwave-flash A31536000
    ExpiresByType application/x-tar A31536000
    ExpiresByType image/tiff A31536000
    ExpiresByType application/x-font-ttf A31536000
    ExpiresByType audio/wav A31536000
    ExpiresByType audio/wma A31536000
    ExpiresByType application/vnd.ms-write A31536000
    ExpiresByType application/vnd.ms-excel A31536000
    ExpiresByType application/zip A31536000
</IfModule>
<IfModule mod_deflate.c>
    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
        BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    </IfModule>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/css application/x-javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon
    </IfModule>
</IfModule>
<FilesMatch "\.(css|js|htc|CSS|JS|HTC)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
</FilesMatch>
<FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
</FilesMatch>
<FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
</FilesMatch>
# END W3TC Browser Cache

# BEGIN W3TC Page Cache core
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^(.*\/)?w3tc_rewrite_test$ $1?w3tc_rewrite_test=1 [L]
    RewriteCond %{HTTP_USER_AGENT} (240x320|2\.0\ mmp|\bppc\b|alcatel|amoi|asus|au\-mic|audiovox|avantgo|benq|bird|blackberry|blazer|cdm|cellphone|danger|ddipocket|docomo|dopod|elaine/3\.0|ericsson|eudoraweb|fly|haier|hiptop|hp\.ipaq|htc|huawei|i\-mobile|iemobile|j\-phone|kddi|konka|kwc|kyocera/wx310k|lenovo|lg|lg/u990|lge\ vx|midp|midp\-2\.0|mmef20|mmp|mobilephone|mot\-v|motorola|netfront|newgen|newt|nintendo\ ds|nintendo\ wii|nitro|nokia|novarra|o2|openweb|opera\ mobi|opera\.mobi|palm|panasonic|pantech|pdxgw|pg|philips|phone|playstation\ portable|portalmmm|proxinet|psp|qtek|sagem|samsung|sanyo|sch|sec|sendo|sgh|sharp|sharp\-tq\-gx10|small|smartphone|softbank|sonyericsson|sph|symbian|symbian\ os|symbianos|toshiba|treo|ts21i\-10|up\.browser|up\.link|uts|vertu|vodafone|wap|willcome|windows\ ce|windows\.ce|winwap|xda|zte) [NC]
    RewriteRule .* - [E=W3TC_UA:_low]
    RewriteCond %{HTTP_USER_AGENT} (acer\ s100|android|archos5|blackberry9500|blackberry9530|blackberry9550|blackberry\ 9800|cupcake|docomo\ ht\-03a|dream|htc\ hero|htc\ magic|htc_dream|htc_magic|incognito|ipad|iphone|ipod|kindle|lg\-gw620|liquid\ build|maemo|mot\-mb200|mot\-mb300|nexus\ one|opera\ mini|samsung\-s8000|series60.*webkit|series60/5\.0|sonyericssone10|sonyericssonu20|sonyericssonx10|t\-mobile\ mytouch\ 3g|t\-mobile\ opal|tattoo|webmate|webos) [NC]
    RewriteRule .* - [E=W3TC_UA:_high]
    RewriteCond %{HTTP_COOKIE} w3tc_referrer=.*(google\.com|yahoo\.com|bing\.com|ask\.com|msn\.com) [NC]
    RewriteRule .* - [E=W3TC_REF:_search_engines]
    RewriteCond %{HTTPS} =on
    RewriteRule .* - [E=W3TC_SSL:_ssl]
    RewriteCond %{SERVER_PORT} =443
    RewriteRule .* - [E=W3TC_SSL:_ssl]
    RewriteCond %{HTTP:Accept-Encoding} gzip
    RewriteRule .* - [E=W3TC_ENC:_gzip]
    RewriteCond %{REQUEST_METHOD} !=POST
    RewriteCond %{QUERY_STRING} =""
    RewriteCond %{HTTP_HOST} =www.example.com
    RewriteCond %{REQUEST_URI} \/$ [OR]
    RewriteCond %{REQUEST_URI} (sitemap\.xml(\.gz)?) [NC]
    RewriteCond %{REQUEST_URI} !(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|wp-.*\.php|index\.php) [NC,OR]
    RewriteCond %{REQUEST_URI} (wp\-comments\-popup\.php|wp\-links\-opml\.php|wp\-locations\.php) [NC]
    RewriteCond %{HTTP_COOKIE} !(comment_author|wp\-postpass|wordpress_\[a\-f0\-9\]\+|wordpress_logged_in) [NC]
    RewriteCond %{HTTP_USER_AGENT} !(W3\ Total\ Cache/0\.9\.2\.4) [NC]
    RewriteCond "%{DOCUMENT_ROOT}/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" -F
    RewriteRule .* "/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" [L]
    RewriteCond %{REQUEST_METHOD} !=POST
    RewriteCond %{QUERY_STRING} =""
    RewriteCond %{HTTP_HOST} =www.example.com
    RewriteCond %{REQUEST_URI} \/$ [OR]
    RewriteCond %{REQUEST_URI} (sitemap\.xml(\.gz)?) [NC]
    RewriteCond %{REQUEST_URI} !(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|wp-.*\.php|index\.php) [NC,OR]
    RewriteCond %{REQUEST_URI} (wp\-comments\-popup\.php|wp\-links\-opml\.php|wp\-locations\.php) [NC]
    RewriteCond %{HTTP_COOKIE} !(comment_author|wp\-postpass|wordpress_\[a\-f0\-9\]\+|wordpress_logged_in) [NC]
    RewriteCond %{HTTP_USER_AGENT} !(W3\ Total\ Cache/0\.9\.2\.4) [NC]
    RewriteCond "%{DOCUMENT_ROOT}/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.xml%{ENV:W3TC_ENC}" -F
    RewriteRule .* "/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.xml%{ENV:W3TC_ENC}" [L]
</IfModule>
# END W3TC Page Cache core
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

问题是，如何在我的主页上添加斜线？仅供参考，目前我的每个帖子和页面 url 都有它。我设法更改设置-> 常规-> 站点 url，但没有成功。每次我点击提交按钮将站点 URL 更改为 www.example.com/ 时，它都会返回到 www.example.com。

注意：我会将 mod_rewrite.c 的最后一部分更改为：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*[^/]$ /$0/ [L,R=301]
</IfModule> 
```

但它没有用。我的图像似乎没有找到正确的路径。谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:18:21.023

您不想更改当前 htaccess 中的内容。您想在您拥有的任何其他规则*之前添加尾部斜杠规则。*

# sql - SQL：按空列数排序

> ID：12664652
> 
> 赞同：0
> 
> 时间：2012-09-30T20:05:47.197
> 
> 标签：sql, sorting

我有一个显示结果列表的 SQL 查询。我数据库中的每一行都有大约 20 列，并不是每一列都是强制性的。我希望 SQL 查询的结果按填充的列数排序。顶部空列最少的行，底部空列最多的行。你们中有人知道如何做到这一点吗？

我考虑在表中添加一个额外的列，如果每次用户编辑他们的行时更新，这个数字将指示空列的数量，我可以用它对我的列表进行排序。然而，这听起来像是不必要的麻烦，但也许没有其他办法？我相信这里有人会知道的！

谢谢，

桑德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:08:06.987

您几乎可以在任何带有巨大案例语句的数据库中执行此操作：

```
order by ((case when col1 is not null then 1 else 0 end) +
          (case when col2 is not null then 1 else 0 end) +
          . . .
          (case when col20 is not null then 1 else 0 end)
         ) desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:06:52.310

您可以按空列的数量排序：

```
order by
        case when col1 is null then 1 else 0 end + 
        case when col2 is null then 1 else 0 end +
        case when col3 is null then 1 else 0 end +
        ...
        case when col20 is null then 1 else 0 end 
```

（请注意`+`行尾的：它只有一列，其中包含空字段的整数计数，按升序排序。）

# php - 返回指定为逗号分隔值的组中的所有用户

> ID：12664657
> 
> 赞同：0
> 
> 时间：2012-09-30T20:05:57.997
> 
> 标签：php, mysql, select

我有以下两个表场景：

```
users
id   groups
1    1,2,3
2    2,3
3    1,3
4    3 
```

和

```
groups
id
1
2
3 
```

例如，如何返回属于组 2 和 1 的所有用户的 ID？我是否应该研究加入，一个帮助 group_membership 表或函数来分隔逗号分隔的组 ID 以获得如下内容：

```
group_membership
user_id   group_id
1         1
1         2
1         3
2         2
2         3
...       ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:14:04.247

您应该在用户和组之间建立多对多的关系，（意味着一个用户可能属于多个组，一个组可以容纳多个用户）。

你可以通过 3 个表来做到这一点：

*   **users** - 描述用户信息。
*   **组**- 描述组信息。
*   **user_groups** - 描述哪些用户属于哪些组。

在**user_groups**中，您应该只有 2 列**user_id**和**group_id**，每行是属于单个组的单个用户，允许双方重复。

您的示例转化为：

```
user_id   group_id
1         1
1         2
1         3
2         2
2         3
3         1
3         3
4         3 
```

然后，很容易查询特定组中的所有用户，以及用户所在的所有组。

此过程也称为**[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:10:13.617

The possible solution to your problem is a rearranging of your data.

For this, you need three tables. The users, the groups, and a 'link'-table.

users:

```
user_id
userdata1 
```

groups:

```
group_id
groupdata1 
```

link

```
user_id
group_id 
```

In the link list, you create one dataset for each connection.

So, if user 1 is in groups 2 and 3, the link table will have two entries with the user_id 1\. One linking to group_id 2, and one linking to group_id 3.

To get back to your example, the query to get all users from group 2 is:

```
SELECT * FROM users, link WHERE link.user_id = users.user_id AND (group_id = 2 OR group_id = 3); 
```

This will output all the users, who are in one of the groups, some as duplicates (those, who are members of both groups). If you want to avoid duplicates, add 'GROUP BY user_id'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:30:09.273

***除了适当的规范化***，唯一可用的**hack**，而且是**hack**，在这种情况下是使用 hack 的`LIKE`。

## 这仍然是一种缓慢而可怕的做法。

SQL：

```
SELECT id FROM users 
WHERE 
   groups LIKE '%,$group_id,%' 
   OR groups LIKE '%,$group_id' 
   OR groups LIKE '$group_id,%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T03:36:08.893

您可以使用`FIND_IN_SET()`MySQL 功能。

# python - 如何用python备份整个网页包括图片？

> ID：12664663
> 
> 赞同：1
> 
> 时间：2012-09-30T20:06:47.440
> 
> 标签：python, html, url, web, web-crawler

> **可能重复：**
> [如何在 python 中下载文件](https://stackoverflow.com/questions/8116623/how-to-download-a-file-in-python)

我正在玩 Python 做一些爬行的东西。我知道有`urllib.urlopen("http://XXXX")`这可以帮助我获取目标网站的 html。但是，该网页中指向原始图像的链接通常会使备份页面中的图像不可用。我想知道有没有办法也可以将图像保存在本地空间中，然后我们可以在没有互联网连接的情况下阅读网站上的全部内容。这就像备份整个网页，但我不确定在 Python 中有什么方法可以做到这一点。此外，如果它可以摆脱广告的东西，那就更棒了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:16:57.013

如果您正在寻找备份单个网页，那么您就在路上了。

既然你提到了抓取，如果你想备份整个网站，你需要做一些真正的抓取，你需要[scrapy](http://scrapy.org/)。

有几种方法可以从互联网上下载文件，看看这些问题：

1.  [Python 文件下载](https://stackoverflow.com/questions/10023418/python-file-download)
2.  [如何在python中下载文件](https://stackoverflow.com/questions/8116623/how-to-download-a-file-in-python)
3.  [使用python从http自动下载文件](https://stackoverflow.com/questions/2235458/automate-file-download-from-http-using-python)

希望这可以帮助

# c - 在孩子上调用 SIGTSTP 后，父母没有回应

> ID：12664664
> 
> 赞同：2
> 
> 时间：2012-09-30T20:06:48.613
> 
> 标签：c, linux, shell, signals

> **可能重复：**
> [使用 SIGTSTP 挂起子进程后，shell 没有响应](https://stackoverflow.com/questions/12683466/after-suspending-child-process-with-sigtstp-shell-not-responding)

我正在用 C 编写一个基本的 shell，我现在正在暂停一个子进程。

应该有两种方法可以做到这一点。

*   一种是当我`ps&`输入输入`&`时，最后用 a 调用`kill`( `pid`, `child_pid`)，然后我将孩子`pid`放入进程数组中`bg`。

*   第二个是当我按`CTRL`-`Z`在当前正在运行的子进程上。

我认为我的信号处理程序是正确的，并且我的子进程正在挂起，但是在那之后，终端应该返回到父进程并且没有发生这种情况。

孩子被挂起，但我的外壳不再注册任何输入或输出。`tcsetpgrp()`似乎没有帮助。

**这是我的 shell 代码中的信号处理程序`SIGTSTP`：**

```
void suspend(int sig) {
    pid_t pid;
    sigset_t mask;
    //mpid is the pgid of this shell.
    tcsetpgrp(STDIN_FILENO, mpid);
    tcsetpgrp(STDOUT_FILENO, mpid);
    sigemptyset(&mask);
    sigaddset(&mask, SIGTSTP);
    sigprocmask(SIG_UNBLOCK, &mask, NULL);
    signal(SIGTSTP, SIG_DFL);
    //active.pid is the pid of the child currently in the fg.
    if (active.pid != 0) {
        kill(active.pid, SIGTSTP);
    }
    else{
        //if this code is being run in the child, child calls SIGTSTP on itself.
        pid = getpid();
        if (pid != 0 && pid != mpid){
            kill(pid, SIGTSTP);
        }
    }
    signal(SIGTSTP, suspend);
} 
```

谁能告诉我我做错了什么？

我是否将我的贝壳与孩子一起悬挂，我是否需要以某种方式返回`stdin`贝壳`stdout`？我该怎么做？

谢谢！

# jquery - 100% 高度划分问题

> ID：12664668
> 
> 赞同：1
> 
> 时间：2012-09-30T20:07:11.360
> 
> 标签：jquery, css, html

我正在尝试制作一个包含我所有内容的整页 DIV，但当其他 div 大于屏幕尺寸并且它不会自动扩展时会扩展您可以在[http://molly.everythingcreative.co.uk](http://molly.everythingcreative.co.uk)查看网站（对不起背景图像尚未调整大小，因此文件很大）。我目前正在使用 Stickyfooter 代码使 DIV 保持全屏显示，但它似乎会在调整 DIVS 大小或扩展时在页面底部产生间隙：

```
#global_main_frame {
    width: 350px;
    height: auto !important;
    min-height: 100%;
    top: 0;
    bottom: 0;
    position: relative;
    padding: 0 50px 0px 50px;
    float: left;
    left: -600px;
    background-color: rgba(0,0,0,0.8);
    z-index: 200;
} 
```

例子

```
<div id="global_main_frame">
<!-- All the other DIV's -->
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:34:24.303

这是导致差距的元素`clearfix`上的类。`#global_main_frame`如果您将类`visibility`上的样式规则更改为，您可以看到插入全屏 div 下方的点以清除浮动。`clearfix``visible`

要消除间隙，您可以添加`font-size: 0`到`clearfix`或`clearfix`从元素中删除类`#global_main_frame`（当容器是 body 元素时不需要它）。

# c - 在多线程应用程序中调试信号处理

> ID：12664669
> 
> 赞同：0
> 
> 时间：2012-09-30T20:07:17.553
> 
> 标签：c, multithreading, debugging, signals

我有这个使用 pthreads 的多线程应用程序。我的线程实际上使用 sigwait 等待信号。实际上，我想调试我的应用程序，看看哪个线程在什么时间接收到哪个信号，然后调试它。有什么方法吗，我可以做到。如果我直接运行我的程序，那么信号会快速生成并由我的处理程序线程处理。我想看看哪个处理程序从 sigwait 调用中唤醒并处理信号和所有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:10:17.360

The handy [strace](http://linux.die.net/man/1/strace) utility can print out a huge amount of useful information regarding system calls and signals. It would be useful to log timing information or collect statistics regarding the performance of signal usage.

If instead you are interested in getting a breakpoint inside of an event triggered by a specific signal, you could consider stashing enough relevant information to identify the event in a variable and setting a [conditional breakpoint.](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T21:44:11.150

您可以使用 gdb 尝试的其中一件事是按线程设置断点（例如，在从 sigwait 返回之后），这样您就知道哪个线程被唤醒了：

```
break file.c thread [thread_nr] 
```

不要忘记告诉 gdb 将信号传递给您的程序，例如：

```
handle SIGINT pass 
```

您可能希望将所有这些都放入您的*.gdbinit*文件中，以节省大量输入。

Steven Schlansker 绝对正确：如果这恰好显着改变了程序的时序模式（因此您可以看到您的程序在调试器下的行为与“在野外”完全不同），那么**strace**和日志记录是您最后的希望。我希望这会有所帮助。

# amazon-web-services - Amazon Route 53 - 托管区域和查询到底是什么意思？

> ID：12664671
> 
> 赞同：26
> 
> 时间：2012-09-30T20:07:22.860
> 
> 标签：amazon-web-services, dns, amazon-route53

这似乎是一个非常基本的问题，嗯，确实如此，但在阅读了有关 Amazon Route 53 和常见问题解答后，我有点困惑**，****[并](http://aws.amazon.com/route53/)**想**[检查](http://aws.amazon.com/route53/faqs/)**我是否正确。

*   **什么是托管区域？**通俗地说，就是要与 Amazon Route 53 关联的域（ 、 等）`example.com`的数量。对吗？`domain.com`

    因此，关于定价，如果我只使用 1 个域，我每月只需支付 0.50 美元，对吗？

*   **什么是查询？**解析域的次数？即，如果有人访问`domain.com`它，它会为页面本身、其图像、样式表、JS 文件等生成许多查询，对吗？那么，查询的数量大致等于网站及其内容收到的点击数吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-01T21:26:03.723

托管区域基本上是一个域。不过，单个区域文件也包括所有子域。例如：a.example.com、b.example.com 和 www.example.com 都在同一个区域文件中。

在查询中，是的，它是名称服务器解析域名的请求数量，它可能是针对 ping 或 html 文件或图像或 ftp 请求等。任何时候它为任何人提供名称解析是它提供的查询。不过需要注意的是，区域文件上有一个 TTL（生存时间）设置，并且 DNS 是为缓存而构建的，因此您不会收到不必要的请求。您可以将其设置为整整 24 小时（86400 秒），并且每个获得解析的名称服务器都将缓存该答案并且在该缓存过期之前不会重新查询。

# c# - 编译器使用的相同代码是否应该用于生产代码？

> ID：12664672
> 
> 赞同：0
> 
> 时间：2012-09-30T20:07:24.937
> 
> 标签：c#

我正在阅读 Jon Skeet 最近的这篇文章：[我如何列举你？让我数一数路](http://msmvps.com/blogs/jon_skeet/archive/2012/09/30/how-can-i-enumerate-thee-let-me-count-the-ways.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+JonSkeetCodingBlog+%28Jon+Skeet%27s+Coding+Blog%29)…… 它是关于调查代码编译成什么。在这种情况下，他检查

```
foreach (char ch in text) 
{ 
 // Body here 
} 
```

他使用的最后一个示例（对于 text 类型为 的情况`string`），他表明编译器将 foreach 循环转换为 while 循环，如下所示：

```
int index = 0; 
while (index < text.Length) 
{ 
 char ch = text[index]; 
 index++; 
 // Body here 
} 
```

在这种情况下，从 foreach 循环转换为 while 循环可能并不费力（甚至需要进行这种转换），但从更一般的意义上说，我是否应该将我的代码编写得更类似于编译代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T20:13:16.003

不，您最好专注于编写可读、可维护的代码并将翻译留给编译器。

如果 - 随着编译器的改进 - 循环最好以另一种方式重写/编译，你实际上使编译器更难理解你正在尝试做什么，并且可能会阻止它将循环转换为最优平台的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:11:02.413

No - what the compiler produces shouldn't be what you base your coding style on.

You should optimize for readability first - if you do see problems with performance, then, and only after profiling should you try to optimize.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T20:13:05.923

No, the point of high level languages is to simplify programming. The compiler will act as it should but there isn't a point in replicating it's behavior when the end result will be the same. Use the powerful features of the language instead.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T20:13:52.450

弄清楚如何将 C# 代码转换为可以用 CIL 表示的东西是编译器的工作。正如您已经看到的，它在这方面做得很好。你相信自己能更好地完成这项工作吗？如果是这样，当然，请继续，但对于绝大多数程序员，包括我自己，可能包括你自己，这种信任将是错误的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-30T20:14:52.323

不，您应该使用编译器允许您使用的速记方式。

不仅写得更少，而且可能出现错误的代码也更少。如果你举个例子；很难在. `foreach`_`while``index++`

编译器中的速记就在那里，因此您可以毫不费力地做正确的事情。例如属性的简写：

```
public int Value { get; set; } 
```

这将扩展为一个成员变量和一个使用它的 getter 和 setter（尽管变量名是秘密的）：

```
private int _value;
public int Value {
  get {
    return _value;
  }
  set {
    _value = value;
  }
} 
```

在将该速记添加到编译器之前，您很想改用公共成员变量，因为它的类型要少得多：

```
public int Value; 
```

现在你可以吃咖啡了。:) 只需再添加几个字符，您就拥有了完整的属性，而无需自己编写实现。

# javascript - This error does NOT occur if I use a non-class/prototype method: Origin file:// is not allowed by Access-Control-Allow-Origin

> ID：12664687
> 
> 赞同：2
> 
> 时间：2012-09-30T20:08:44.497
> 
> 标签：javascript, ajax, coffeescript, prototype, cors

I had come across this CORS issue but was able to overcome it using jsonp and callback=? like suggested below: [XmlHttpRequest error: Origin null is not allowed by Access-Control-Allow-Origin](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin) I also have '--allow-file-access-from-files' turned on for Chrome and I have hosted this on Google app engine and also loaded it via Firefox.

However, I started using classes in javascript (via CoffeeScript) and it gives me this error when I use the class method. Please note that I am able to overcome this issue by not using the class/instance method below:

Issue: I am trying to show a few locations on a google map. I call the google fusion table api to get my data and display it. It works fine when I call the dataHandler() method like a regular method and not as as class method. When I call it like a class method, I get this error locally: "Origin file:// is not allowed by Access-Control-Allow-Origin." I am trying locally on Chrome. When I deploy/host it on the google app engine, I get this error on the same line '400 (Bad Request) '

Thanks

```
var myMap = new MyMap();
google.load('visualization', '1.0', {"callback":myMap.initialize});

class MyMap
initialize: -> //Javascript equivalent: MyMap.prototype.initialize = function() {
  ...
  jqxhr = $.get(encodeURI(url), @dataHandler, "jsonp") // Does not work. 

  //Javascript equivalent: jqxhr = $.get(encodeURI(url), this.dataHandler, "jsonp");

  jqxhr = $.get(encodeURI(url), dataHandler, "jsonp") // This works without the @

  //Javascript equivalent: jqxhr = $.get(encodeURI(url), dataHandler, "jsonp");

dataHandler: (d) -> // Does not work. Javascript equivalent: MyMap.prototype.dataHandler = function(d) {

dataHandler= (d) -> // This works. Javascript equivalent: dataHandler = function(d) { 
```

Local Error:

> XMLHttpRequest cannot load [https://www.googleapis.com/fusiontables/v1/query?key=AIzaSyDjfc6i-&sql=SELECT%20Lat,%20Lng%20from%201Stisvr...&callback=](https://www.googleapis.com/fusiontables/v1/query?key=AIzaSyDjfc6i-&sql=SELECT%20Lat,%20Lng%20from%201Stisvr...&callback=)?. Origin file:// is not allowed by Access-Control-Allow-Origin.

Hosted/Server Error:

> GET [https://www.googleapis.com/fusiontables/v1/query?key=AIzaSyDjfc6i-&sql=SELECT%20Lat,%20Lng%20from%201Stisvr...&callback=](https://www.googleapis.com/fusiontables/v1/query?key=AIzaSyDjfc6i-&sql=SELECT%20Lat,%20Lng%20from%201Stisvr...&callback=)? 400 (Bad Request)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:47:32.950

使用像[charles](http://www.charlesproxy.com/)这样的代理，而不是从文件系统访问文件。

# java - 使用自定义值对象映射

> ID：12664688
> 
> 赞同：0
> 
> 时间：2012-09-30T20:09:00.723
> 
> 标签：java

我想要一个 Map 对象来包含特定的值类型。

```
Map<String,Object> foo = new HashMap<String,Object>();
foo.put("1",new Integer(1));
foo.put("2", new String("hello"):
for (Map.Entry<Integer, Integer> entry : foo.entrySet()) {
    if(entry.getValue() instanceof String) {
    //do something
    }
   else if(entry.getValue() instanceof Double) {
       //throw Exception
    }
} 
```

你可以看到我想要完成的事情。我需要在我的 Map 对象中使用特定的值类型，因此我不必放置大量 if/else 语句。我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:38:29.597

*如果您不喜欢拥有多个地图的想法，您可以使用称为覆盖*的 OOP 功能。有关详细信息，请参阅[覆盖方法](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)。

我可能会使用*组合*模式来包装值类型，然后根据值类型为操作定义一个接口。

```
public abstract class ValueType {

    public abstract void valueSpecificAction(); 
}

public class DoubleValueType extends ValueType {

    private Double value;

    public DoubleValueType(Double value) {
            this.value = value;
    }

    public void valueSpecificAction() {
        //do double specific actions
    }
}

public class StringValueType extends ValueType {

    private String value;

    public void valueSpecificAction() {
        //do string specific actions

     }   
} 
```

然后，您可以在地图中添加**ValueType类型的对象。**

```
Map<String,ValueType> foo = new HashMap<String,ValueType>();
foo.put("key1", new DoubleValueType(42.0)); 
```

稍后您可以获得该值，该值的类型为 ValueType 和公共方法*valueSpecificAction()*，它根据特定类型执行这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:32:48.653

我不明白如何避免在某个地方出现 if-else。

仅当值类型可以在计算时确定时，Jan 的解决方案才会为您节省 if-else。上面的玩具示例就是这种情况，但在您的实际问题中是否如此？

如果是为了让代码看起来更干净，你总是可以在一组私有方法中隐藏 if-else 和转换。

# c# - BeginXXX 和线程池

> ID：12664691
> 
> 赞同：1
> 
> 时间：2012-09-30T20:09:15.757
> 
> 标签：c#

我正在用 C# 编写 TCP 服务器，并且正在使用 BeginXXX 和 EndXXX 方法进行异步通信。如果我理解正确，当我使用 BeginXXX 时，请求将在线程池中处理（当请求准备好时），而主线程继续接受新连接。

问题是如果我在这些 AsyncCallback 之一中执行阻塞操作会发生什么？将阻塞操作作为任务运行会更好吗？任务也使用线程池，不是吗？

用例如下：

主线程设置一个监听套接字，它使用 BeginAccept 接受连接，并开始使用 BeginReceive 监听这些连接。当收到完整的消息时，会根据该消息的内容调用一个函数，在所有情况下，80% 的函数将启动数据库查询/插入/更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:47:32.090

我建议你使用 .net 4.5 中引入的 SocketAsyncEventArgs

这里有一些你可以开始的阅读材料

[点我](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:19:51.427

> 问题是如果我在这些 AsyncCallback 之一中执行阻塞操作会发生什么？将阻塞操作作为任务运行会更好吗？

如果你这样做太频繁或太长时间，那么 ThreadPool 将会增长。可能会导致您的应用程序崩溃。

所以尽量避免阻塞。但是一点点应该是可以接受的。请记住，ThreadPool 将以每 500 毫秒 1 个新线程的速度增长。因此，请确保并验证它将在一些合理数量的线程上保持平衡。

一个钝器可能是限制池的 MaxThreads。

> 任务也使用线程池，不是吗？

是的，所以你的选择是有限的。

# mysql - MYSQL查询优化慢查询

> ID：12664693
> 
> 赞同：1
> 
> 时间：2012-09-30T20:09:22.417
> 
> 标签：mysql, optimization, indexing, query-optimization

我在下面有一个查询很慢，我知道可以优化。它需要 0.0479 秒，但这是因为它是按计算字段排序的。在 select 语句中，我选择了 advert_id 列，它是表的主键。如果我修改下面的查询，而不是选择 advert_id 的主键，而是让其他所有内容保持不变，它只需要 0.0098 秒即可运行。

```
SELECT adverts.advert_id, round( sqrt( ( ( (adverts.latitude - '51.558430') * (adverts.latitude - '51.558430') ) * 69.1 * 69.1 ) + ( (adverts.longitude - '-0.0069345') * (adverts.longitude - '-0.0069345') * 53 * 53 ) ), 1 ) as distance
FROM adverts
WHERE (adverts.status = 1) AND (adverts.approved = 1) 
AND (adverts.latitude BETWEEN 51.2692837281 AND 51.8475762719) 
AND (adverts.longitude BETWEEN -0.472015213613 AND 0.458146213613) 
having (distance <= '20') 
ORDER BY distance ASC 
LIMIT 0,10 
```

在第一个查询中，解释说正在使用下面的 'sall' 索引，但额外的列设置为 'Using where; 使用文件排序'。

当我修改查询以不选择 advert_id 时，解释说它使用“sall”索引，但额外的列设置为“使用 where；使用索引；使用文件排序'。

'sall' 索引包括以下列：

状态 批准 纬度 经度

我尝试创建另一个索引，但在状态之前添加 advert_id，希望第一个查询会使用它并且更快，但是当我强制它使用索引时，它甚至更慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:01:35.103

将 advert_id 添加到索引的末尾，而不是开头。

这将允许仅使用索引处理查询（这是“使用索引”的意思），但不会破坏索引已经提供的有效搜索。

此外，正如 Jim Garrison 所指出的，您可能应该在 HAVING 子句之前将“GROUP BY adverts.advert_id”添加到您的查询中。

# artificial-intelligence - Neural Network: calculating errors during backpropagation

> ID：12664695
> 
> 赞同：0
> 
> 时间：2012-09-30T20:09:38.833
> 
> 标签：artificial-intelligence, computer-science, neural-network

I'm using [this article](http://www4.rgu.ac.uk/files/chapter3%20-%20bp.pdf) to implement a neural network with backpropagation, but having trouble calculating errors. In a nutshell, my sigmoid function is squashing all my node outputs to 1.0, which then causes the error calculation to return 0:

```
error = (expected - actual) * (1 - actual) * actual
                                    ^^ this term causes multiply by 0 
```

And so my error is always 0.

I suspect that the problem lies with my sigmoid implementation, which is returning 1.0, rather than asymptotically bounding below 1.0:

```
# ruby
def sigmoid(x)
  1/(1+Math.exp(-x))
end 
```

Am I correct that sigmoid should never actually reach 1.0, or have I got something else wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:16:03.083

在数学上下文中，你是正确的，sigmoid 永远不应该达到 1.0。然而，在实际的编程环境中，Math.exp(-x) 最终会变得非常小，以至于它与 0 之间的差异可以忽略不计，您将得到 1.0 的结果。根据 x 的范围，这不会是令人惊讶的结果。

为了使用 sigmoid 方法，您应该使每个节点的传入权重总和大约为 1。这将使 sigmoid 的输出合理，并使您的权重更快地收敛。

# json - How to properly output JSON with app engine Python webapp2?

> ID：12664696
> 
> 赞同：38
> 
> 时间：2012-09-30T20:09:52.123
> 
> 标签：json, google-app-engine, webapp2

Right now I am currently just doing this:

```
self.response.headers['Content-Type'] = 'application/json'
self.response.out.write('{"success": "some var", "payload": "some var"}')
```

Is there a better way to do it using some library?

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-30T20:30:57.293

是的，您应该使用 Python 2.7 中支持的[`json`库](http://docs.python.org/library/json.html)：

```
import json

self.response.headers['Content-Type'] = 'application/json'   
obj = {
  'success': 'some var', 
  'payload': 'some var',
} 
self.response.out.write(json.dumps(obj)) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-12T23:24:04.323

`webapp2`有一个方便的 json 模块包装器：它将使用 simplejson（如果可用），或者 Python >= 2.6 的 json 模块（如果可用），并作为最后一个资源使用 App Engine 上的 django.utils.simplejson 模块。

[http://webapp2.readthedocs.io/en/latest/api/webapp2_extras/json.html](http://webapp2.readthedocs.io/en/latest/api/webapp2_extras/json.html)

```
from webapp2_extras import json

self.response.content_type = 'application/json'
obj = {
    'success': 'some var', 
    'payload': 'some var',
  } 
self.response.write(json.encode(obj)) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-30T20:32:11.240

python 本身有一个[json 模块](http://docspy2zh.readthedocs.org/en/latest/library/json.html)，它会确保你的 JSON 格式正确，手写的 JSON 更容易出错。

```
import json
self.response.headers['Content-Type'] = 'application/json'   
json.dump({"success":somevar,"payload":someothervar},self.response.out) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-08T02:49:49.610

我通常这样使用：

```
class JsonEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime):
            return obj.isoformat()
        elif isinstance(obj, ndb.Key):
            return obj.urlsafe()

        return json.JSONEncoder.default(self, obj)

class BaseRequestHandler(webapp2.RequestHandler):
    def json_response(self, data, status=200):
        self.response.headers['Content-Type'] = 'application/json'
        self.response.status_int = status
        self.response.write(json.dumps(data, cls=JsonEncoder))

class APIHandler(BaseRequestHandler):
    def get_product(self): 
        product = Product.get(id=1)
        if product:
            jpro = product.to_dict()
            self.json_response(jpro)
        else:
            self.json_response({'msg': 'product not found'}, status=404) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-28T00:25:04.143

```
import json
import webapp2

def jsonify(**kwargs):
    response = webapp2.Response(content_type="application/json")
    json.dump(kwargs, response.out)
    return response 
```

您想要返回 json 响应的每个地方...

```
return jsonify(arg1='val1', arg2='val2') 
```

或者

```
return jsonify({ 'arg1': 'val1', 'arg2': 'val2' }) 
```

# c - 当 C 函数指针具有 void 参数时，这意味着什么？

> ID：12664705
> 
> 赞同：1
> 
> 时间：2012-09-30T20:10:30.107
> 
> 标签：c, function, pointers

> **可能重复：**
> [C void arguments](https://stackoverflow.com/questions/693788/c-void-arguments)

我正在查看一些 OpenGL 图形代码，它具有以下内容：

```
glutIdleFunc(void(*func)(void)); 
```

什么时候在 C 中有一个带有 void 参数的函数指针？这是否意味着该函数可以接受任何参数，或者不允许接受任何参数，或者其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:15:02.577

这意味着您必须将指针传递给没有参数且不返回任何内容的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:23:29.560

`void func(void)` 是一个不带参数且不执行`return`任何操作的函数。

不要混淆： `void func()` which 在 C（不是 C++）中是一个没有参数检查的函数，并且什么都不做`return`。

这不要与： 默认情况下`func(void)` 不带参数并返回一个的函数相混淆。`int`

# iphone - How do I move forward in the direction I am pointing in a 3d world?

> ID：12664707
> 
> 赞同：1
> 
> 时间：2012-09-30T20:10:35.067
> 
> 标签：iphone, objective-c, cocos3d

I am using Cocos3D. I have a camera (which acts as the first-person viewed player in a world with only a spinning "hello, world" and a spinning earth. I have made it possible for the camera to point in any direction, and I have got it to move, but how do I get the camera/player to move forward in the direction he is pointing? (He does not go up or down, i.e. his y position does not change).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:41:15.427

我注意到这是一个相当古老的问题 - 希望这个答案可以帮助某人！

您需要获取相机的旋转角度，将其转换为弧度并使用三角函数来获取新的 XZ 坐标。告诉你的相机移动到那些坐标，然后玩家已经向前移动了！

```
CC3Camera *cam = self.activeCamera;

CC3Rotator *rotator = cam.rotator;
CC3Vector ro = rotatoooor.rotation;
CC3Vector loc = cam.globalLocation;

// If the -90 is left off, you go left/right and not forward
float roA = rotator.rotationAngle-90;

// Bug in rotationAngle? Need this as 315 angle reports as 45
int roI = ro.y;
int diff = roA+90 - roI;
if (diff == 0 && roI == 45)
    roA = 315-90;

double theta = roA * M_PI/180; // Convert to radians
/*
 x = d cos a
 z = d sin a
 */
double sinA = sin(theta);
double cosA = cos(theta);
double newX = distance*cosA + loc.x;
double newZ = distance*sinA + loc.z;

CC3Vector newTo = cc3v(newX, loc.y, newZ); // Pass this to your camera 
```

# iphone - 适用于 iPhone 5 的 iOS 6 APP 不以新分辨率启动

> ID：12664708
> 
> 赞同：-2
> 
> 时间：2012-09-30T20:10:39.400
> 
> 标签：iphone, objective-c, xcode, ios6

我想更新我的 iPhone 应用程序。我在 xcode 上打开我的项目并打开任何 xib 并保存它。当我在模拟器上启动应用程序时，一切正常，从我的 iphone 5 开始，从 iphone 4 开始

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:32:40.773

您需要将“Default-568h@2x.png”启动图像添加到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:26:06.357

只需将“Default-568h@2x.png”启动图像添加到您的项目中。

# jquery - how to get only the text of an element without getting the inline element using jquery?

> ID：12664709
> 
> 赞同：0
> 
> 时间：2012-09-30T20:10:38.737
> 
> 标签：jquery

> **Possible Duplicate:**
> [Getting text within element excluding decendants](https://stackoverflow.com/questions/6487777/getting-text-within-element-excluding-decendants)

how to get only the text of an element without getting the inline element using jQuery?

I have the following problem:

```
<p><strong>Test 1</strong> this is test 1 results</p> 
```

How do I capture only "this is test 1 results" into an array using jQuery? I attempted this but it's not working:

```
var TextResults = $("strong").parent("p").text();
var arrayTestResults = TextResults.split(" "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:42:39.897

您可以使用 contents.map() 函数（如 Felix Kling 提供的链接中所建议的那样）来执行此操作，如下所示：

```
var result = $('p').contents().map(function() {
    if( this.nodeType === 3 ) {
        return this.data;
    }
   }).get().join(''); 
```

这是完整的例子，[http://jsfiddle.net/z3Khs/3/](http://jsfiddle.net/z3Khs/3/)

# php - 在变量末尾添加计数器？

> ID：12664712
> 
> 赞同：0
> 
> 时间：2012-09-30T20:11:02.447
> 
> 标签：php

我有一个 php 循环，其中包含使用 , 在循环中的计数，我想在下面添加代码，但在&`$counter++`末尾回显计数器。我怎样才能做到这一点？`$Question``CheckboxGroup`

```
$Question = $_POST["CheckboxGroup"]; 
```

所以每次它循环时都会创建这样的东西：

```
$Question1 = $_POST["CheckboxGroup1"];
$Question2 = $_POST["CheckboxGroup2"];
$Question3 = $_POST["CheckboxGroup3"];
$Question4 = $_POST["CheckboxGroup4"];
$Question5 = $_POST["CheckboxGroup5"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T20:13:51.683

不要这样做。相反，创建一个数组：

```
foreach ($_POST['CheckboxGroup'] as $cg) {
   $Question = $cg;
} 
```

在您的 HTML 标记中，您可以像这样创建数组值：

```
<input type='checkbox' name='CheckboxGroup[]' />
<input type='checkbox' name='CheckboxGroup[]' />
<input type='checkbox' name='CheckboxGroup[]' /> 
```

当 PHP 接收到它们时，它们将显示为一个数字索引数组，您可以像我上面那样循环它。如果你想明确数组索引，你也可以这样做：

```
<input type='checkbox' name='CheckboxGroup[item1]' />
<input type='checkbox' name='CheckboxGroup[item2]' />
<input type='checkbox' name='CheckboxGroup[item3]' /> 
```

通过以下方式在 PHP 中访问：

```
$_POST['CheckboxGroup]['item2'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:13:25.143

不要使用带有索引的变量作为变量名的一部分。这就是数组的用途。

```
$Question[$counter] = $_POST['CheckboxGroup'.$counter]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T20:14:07.560

虽然你可以做类似的事情

```
$cnt = 1;
$${'Question' . $cnt} = $_POST['Checkboxgroup' . $cnt]; 
```

这变得非常丑陋非常快。最好使用 PHP 对表单字段名称的数组支持：

```
<input type="checkbox" name="checkboxgroup[]" value="..." /> 
```

和

```
$questions[1] = $_POST['checkboxgroup'][1]; 
```

# python - Scheduling update functions in Django and Heroku?

> ID：12664713
> 
> 赞同：0
> 
> 时间：2012-09-30T20:11:10.687
> 
> 标签：python, django, heroku, celery

I am working on a project, to be deployed on Heroku in Django, which has around 12 update functions. They take around 15 minutes to run each. Let's call them update1(), update2()...update10().

I am deploying with one worker dyno on Heroku, and I would like to run up to n or more of these at once (They are not really computationally intensive, they are all HTML parsers, but the data is time-sensitive, so I would like them to be called as often as possible).

I've read a lot of Celery and APScheduler documentation, but I'm not really sure which is the best/easiest for me. Do scheduled tasks run concurrently if the times overlap with one another (ie. if I run one every 2 minutes, and another every 3 minutes, or do they wait until each one finishes?)

Any way I can queue these functions, so at least a few of them are running at once? What is the suggested number of simultaneous calls for this use-case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:35:01.173

根据您的用例描述，您不需要调度程序，因此 APScheduler 不能很好地满足您的要求。

除了工人测功机之外，您还有网络测功机吗？此类处理的通常设计模式是设置一个接受请求的控制线程或控制进程（您的网络测功机）。然后将这些请求放在请求队列中。

该队列由一个或多个工作线程或工作进程（您的工作人员测功机）读取。我没有与 Celery 合作过，但它看起来符合您的要求。根据您的描述，很难确定您需要多少工作线程或工作测功机。您还需要指定每秒需要处理多少更新请求。此外，您需要指定请求是受 CPU 限制还是受 IO 限制。

# ajax - Lightswitch、AJAX 和 Access-Control-Allow-Origin

> ID：12664714
> 
> 赞同：1
> 
> 时间：2012-09-30T20:11:12.273
> 
> 标签：ajax, visual-studio-lightswitch

我正准备在几周内向大约 100 名软件开发人员演示 Lightswitch，但遇到了障碍。

我有一个带有两个项目的 VS2012 解决方案：

*   Lightswitch - 简单的数据模型和 ApplicationData.svc
*   Web - 包含一个尝试使用 JQuery Ajax 与 ApplicationData.svc 通信的网页

我的问题是当我尝试运行解决方案并执行 AJAX 命令时，出现以下错误：

```
XMLHttpRequest cannot load http://localhost:37650/ApplicationData.svc/MyEntities.  Origin
http://localhost:53408 is not allowed by Access-Control-Allow-Origin. 
```

在谷歌搜索了一段时间后，我发现了这个建议，看起来很有希望：

```
<system.webServer> 
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Origin" value="*" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

但它并没有解决问题。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:32:36.897

您可能需要添加：

```
headers: { "If-Match": " *" } 
```

看：

仅使用 .Html 页面的完整 CRUD DataJs 和 KnockoutJs LightSwitch 示例 [http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/128/A-Full-CRUD-DataJs-and-KnockoutJs-LightSwitch-Example-Using- Only-An-Html-Page.aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/128/A-Full-CRUD-DataJs-and-KnockoutJs-LightSwitch-Example-Using-Only-An-Html-Page.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:12:20.313

我用这个解决了同样的问题：

```
<httpProtocol>
    <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Max-Age" value="3600" />
        <add name="Access-Control-Allow-Headers" value="Content-Type, Accept, MaxDataServiceVersion" />
        <add name="Access-Control-Allow-Methods" value="PUT, POST, GET, DELETE, MERGE, OPTIONS" />
    </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:28:30.047

我遇到了同样的问题，唯一的问题是我正在创建一个不是 Web 应用程序的 HTML5 JQuery Mobile 应用程序。该应用程序是基于 JQuery 的应用程序，我将通过 PhoneGap 运行。我的问题是，当我从移动应用程序拨打电话时，我遇到了相同的跨域问题。

你用什么浏览器来测试？我正在使用 Chrome，但由于最初的 Options 请求而出现了问题（请参阅[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)）。我尝试了很多可能的解决方案，比如更新配置文件等等，但都无济于事。

我的下一个目标是通过创建一个 IHttpHandler 来拦截初始 Options 请求，我可以将它作为属性应用到我正在使用的 WCF 服务（我是否提到我在 LightSwitch 解决方案的 Server 项目中创建了自定义 WCF 服务？）。

我会及时向大家发布...

保罗

# php - 用 git 生成我网站的版本号？

> ID：12664715
> 
> 赞同：3
> 
> 时间：2012-09-30T20:11:18.177
> 
> 标签：php, git, versioning

我正在构建一个 PHP/Yii 应用程序。在不同机器上开发和测试时，如果我看到的版本是最新的，我希望能够在页脚中快速查看。所以基本上我想在每次修改某些东西时生成某种版本号。

我在想，自从我使用 Git（和 GitHub）以来，我可以使用每次提交时生成的一些元数据吗？我怎么能做到这一点？

注意：我想避免使用命令行的东西，因为我当前的主机不允许我这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:17:19.243

添加一个 git 钩子以在应用程序的根文件夹中创建一个 txt 文件，以跟踪当前部署代码的版本（或标签，或其他）。

只需 30 秒。示例（搜索 google 以获取更多详细信息以及如何在 git 中使用钩子）在`.git/hooks`文件夹中放入一个名为的文件`pre-commit`并添加以下 shell 代码：

```
#!/bin/sh
rm version.txt -i
git describe --tags >> version.txt
git add version.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:20:43.507

如果您使用 Capistrano 进行部署，一种非常重要的可能性是从站点的基础上读取“REVISION”文件。如果您从 git repo 部署，它将是提交 SHA。

# ruby-on-rails - BookingsController#create 中的 ActiveRecord::RecordNotFound 找不到没有 ID 的约会

> ID：12664716
> 
> 赞同：0
> 
> 时间：2012-09-30T20:11:24.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

app/controllers/bookings_controller.rb:45:in `create'

我有一个约会对象和一个预订对象。Bookings 属于 Appointments 和 Appointments has_many bookings。

我想创建一个具有 :appointment_id 的预订对象

这是我的代码：

```
<% @appointments.each do |appointment| %>
    <%= link_to "new Booking", new_appointment_booking_path(appointment)%>
<%end%> 
```

预订控制器：

```
def new
    @appointment = Appointment.find(params[:appointment_id])
    @booking = @appointment.bookings.new 
    ...

 def create
I was missing [:booking] in line 45\. 
 Line 45:   @appointment = Appointment.find(params[:booking][:appointment_id])
     @booking = @appointment.bookings.new(params[:booking]) 
```

路线

```
resources :appointments do
    resources :bookings
end 
```

当我提交我的 Bookings_form 时，通过了正确的约会 ID，但我收到以下错误：

```
ActiveRecord::RecordNotFound in BookingsController#create
Couldn't find Appointment without an ID 
```

预订_form

```
<%= simple_form_for(@booking) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :appointment_date %>
    <%= f.input :start_time %>
    <%= f.input :end_time %>
    <%= f.input :name %>
    <%= f.input :phone_number %>
    <%= f.hidden_field :appointment_id%>  

 <div class="form-actions">
     <%= f.button :submit %>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:08:45.983

您没有将 Appointment id 传递回该`create`方法。

除了从表单输入通过 params 哈希传入的信息外，该`create`方法一无所知。看到您没有在表单中添加字段`appointment_id`，因此它没有传递给控制器​​并且在`create`方法中不可用。

要解决这个问题，请在表单中添加一个新的隐藏输入，如下所示：

```
<%= f.input :appointment_id, :type => :hidden %> 
```

现在您通过表单帖子明确传递 id，因此它将在您的控制器中可用。

# android - id-beginner wonder 的 plus 和 non-plus

> ID：12664723
> 
> 赞同：1
> 
> 时间：2012-09-30T20:12:16.487
> 
> 标签：android

我是一名 Android 初学者，我不明白`id`参考之前的加号 (+) 到底是什么意思。我在网上找到的教程只说它是 for`new id reference`和非加定义意味着它引用了定义的`id`. 你能否举个例子来澄清我对这个小细节的不理解，我正在绞尽脑汁想把它弄好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:25:37.250

`android:id="@+id/your_id"`表示 SDK 将生成`R.id.your_id`整数资源（您可以查看自动生成的 R.java 文件）。

`your_id`不带“+”( )的引用`android:id="@id/your_id"`只是指向已生成资源的“指针” `R.id.your_id`。因此，为了使用它，您应该已经在代码中的某处定义了它。

所以，作为一个简单的结论：“+”代表添加/创建一个id，没有“+”代表使用已经创建的id。

# symfony - How can I use a user defined function in a Doctrine QueryBuilder?

> ID：12664727
> 
> 赞同：1
> 
> 时间：2012-09-30T20:12:57.767
> 
> 标签：symfony, doctrine, doctrine-orm, dql, user-defined-functions

I have created a user defined function for Doctrine ORM inside my Symfony2 application, called `isnull_string()`. This is to be able to execute a query that would place null records at the bottom instead of the top, when ordering by ascending order on a string field. In MySQL it would look something like `SELECT * FROM airlines ORDER BY ISNULL(name), name;`

The function is registered in the global `config.yml` file, as instructed in the Symfony2 docs. But nowhere can I find any resources as how I could use this function inside the creation of a QueryBuilder object.

Here is what I'm doing to create my drop down menu:

```
 $builder->add('airline', 'entity', array('query_builder' 
       => function(EntityRepository $er){
              return $er->createQueryBuilder('airline')->orderBy('isnull_string(airline.name), airline.name', 'ASC');
          }); 
```

But it's returning a syntax error: `Expected end of string, got '('`

So how can I use this custom function inside the FormBuilderInterface?

# javascript - 如何将图像的源设置为 base64 编码的数据 uri？

> ID：12664730
> 
> 赞同：1
> 
> 时间：2012-09-30T20:13:14.010
> 
> 标签：javascript, image, html, base64

> **可能重复：**
> [将图像从数据 URL 绘制到画布](https://stackoverflow.com/questions/4773966/drawing-an-image-from-a-data-url-to-a-canvas)

这是 JavaScript 代码...

```
var imageObj = new Image();
var context = this.canvas.getContext("2d"); 
imageObj.onload = function() {
     context.drawImage(imageObj, 69, 50);
};
imageObj.src = "blackhat.jpg" 
```

上面的代码是将 Image 对象源设置为服务器基目录中图像文件的位置。我的问题是：-

如何将图像对象源设置为 base64 编码字符串或 DataURI 字符串？

示例：datauri 字符串 =

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADs..................... 
```

如果我按原样设置编码字符串：-

```
imageObj.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADs....................." 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:22:44.060

请考虑改用[Blob 构造函数](http://updates.html5rocks.com/2012/06/Don-t-Build-Blobs-Construct-Them)。这样，通过 AJAX 加载图像更容易，并且不需要内联，这可能是这里的问题（也许它太大了？）。而且您不需要对任何内容进行 base64 编码。

# http - HTTP/1.1 状态标头，什么时候使用？

> ID：12664733
> 
> 赞同：0
> 
> 时间：2012-09-30T20:13:18.667
> 
> 标签：http, http-headers, http-status-codes, http-status-code-401, http-status-code-400

好的，我现在正在处理管理面板，所以我遇到了绊脚石，有点。

表格： http: [//pastebin.com/D8Dt6zP5](http://pastebin.com/D8Dt6zP5)

处理页面： http: [//pastebin.com/FpXSziPM](http://pastebin.com/FpXSziPM)

现在，解决问题，当在 $_GET 中找不到预期值时，我只是使用了 403 Forbidden 标头，但是，当考虑时，它并不是真正需要登录的操作（不是这个，当然用户有登录以首先查看管理面板），这更像是一个意外的值输入。

所以我去研究了一下，在每个简短的解释中，我选择了这些可能合适的标题。

我指的是[这个](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes "HTTP 状态码列表")，按每个状态码的组看，这应该属于4XX码。

所以更深入，我选择这两个：

`400 Bad Request:`由于语法错误，无法满足请求

`417 Expectation Failed:`服务器无法满足Expect request-header字段的要求

现在，我不能确定要使用哪一个，我已经看到`400 Bad Request`很多使用了，但是，我从解释中得到的是错误是由于不存在的请求而不是非法输入造成的。

另一方面，`417 Expectation Failed`似乎正好适合我的使用，但是，我以前从未见过或尝试过这种标题状态。

*正如我旁注的那样，截至维基百科中对 403 的解释，我可以看到这是非常错误的，就像我想的那样，我可能应该将 401 用于没有登录的视图，而 403 用于没有登录的登录用户访问某个区域。*

所以我真的需要你的意见，谢谢。

问候， TheDeadLike。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:18:46.913

我找到了答案；感谢您的兴趣。

你可以在这里看到答案[。](https://serverfault.com/questions/433470/http-1-1-status-codes-400-and-417-cannot-choose-which "HTTP/1.1 选择合适的状态码")

# mysql - MySQL DECIMAL 数据类型

> ID：12664735
> 
> 赞同：20
> 
> 时间：2012-09-30T20:13:43.630
> 
> 标签：mysql

我在 MySQL 中有一个类型为 DECIMAL(2,1) 的列。当我将数字 10 插入数据库时​​，它显示为 9.9。我希望它读取 10.0。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-30T20:17:45.167

`DECIMAL(2,1)`表示（如[手册](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)所示）2 个字符宽的小数（总共！）和 1 个小数。如果你愿意`10.0`，你需要`DECIMAL(3,1)`（三位宽，一位小数）。

# refresh - 带有多次写入的 Dashcode 滚动区域刷新

> ID：12664743
> 
> 赞同：1
> 
> 时间：2012-09-30T20:14:10.727
> 
> 标签：refresh, dashcode

我正在创建一个允许我安装远程驱动器的 Dashcode 项目。我有一个名为“statusArea”的滚动区域，定义为包含安装进度的状态文本，一种命令输出区域。

第一次通过测试，我将强制写入“错误：必须输入”文本。然后我会回到后面提供用户名和密码并重试，但该框永远不会清除新文本。

```
// get configuration fields from back panel
var usernameField = document.getElementById("username");
var username = usernameField.value;
var passwordField = document.getElementById("password");
var password = passwordField.value;

// clear status 
var statusArea = document.getElementById("statusArea");
var status = document.getElementById("content");
status.innerText = "";
statusArea.object.refresh();

if ( !username || !password) {
    status.innerText = "ERROR: Must enter username and password on back panel!";
    alert("Must enter username and password on back panel!");
}

if (username && password) {
    status.innerText = "Connecting as "+username; 
```

我会以错误的方式解决这个问题吗？

谢谢，比尔

# c# - 缩小桌面的 C# 或 C++ 冻结窗格

> ID：12664745
> 
> 赞同：0
> 
> 时间：2012-09-30T20:14:19.387
> 
> 标签：c#, visual-c++, window

> **可能重复：**
> [Microsoft One Note 2010 如何实现停靠在桌面的窗口？](https://stackoverflow.com/questions/6850038/how-does-microsoft-one-note-2010-implement-a-window-that-is-docked-to-the-deskto)

我想知道如何制作一个程序（在 C# 或 C++ 中），它会有一个冻结的窗格并缩小屏幕其余部分的活动区域。一个很好的例子是全屏模式下的 Facebook 客户端聊天程序，因为它始终位于顶部并缩小活动屏幕的区域，包括缩小桌面。我想要实现的是下图中永远不会消失的绿色条：

（注意请忽略下面照片中的红色圆圈，我能找到的唯一一张关于我正在尝试做的事情的图片来自一个关于所有军事站点上他们如何拥有自杀热线的模因，因为系统都很慢，他们让你想自杀）

![在此处输入图像描述](../Images/81bc9d68e6886474d11ccb7ecf1ae520.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:28:01.830

它在 MSDN 上被记录为“AppBar”：http: [//msdn.microsoft.com/en-us/library/windows/desktop/cc144177%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144177%28v=vs.85%29.aspx)

这是一个固定在屏幕边缘的常规 Win32 窗口，并且还减少了其他窗口最大化的区域。

# ruby-on-rails - 带有语法高亮的免费 Linux 文本编辑器

> ID：12664756
> 
> 赞同：2
> 
> 时间：2012-09-30T20:15:32.183
> 
> 标签：ruby-on-rails, ruby, syntax-highlighting, text-editor

我知道文本编辑器和 IDE 问题几乎都被打死了，但我发现的这个问题的大多数答案都是针对 Windows 和 Mac 的，而且并不总是免费的。我刚刚开始 Rails 开发，我正在寻找一个支持语法突出显示的轻量级文本编辑器。我知道有 RubyMine、RadRails 和 Netbeans。我可能总是将其中一个用于大型项目，但是，有时我更喜欢远离 IDE（以及它们创建的所有项目 .xml .config 工作区文件，以及打开未找到的文件的开销）在特定的“项目”中），只需使用一个简单的文本编辑器。我过去一直在使用 Scribes，但它没有为 .rhtml 突出显示。我也听说过有人在 gedit 上苦苦挣扎，而我 m 远没有绝望到可以在 wine 下运行 Notepad++。Sublime 似乎很受欢迎，但不是免费的。我是不是太需要了？有没有符合以下标准的东西：

1.  在 Linux 上运行
2.  具有 Rails 的语法突出显示（.rhtml、.erb、.rake 等）
3.  轻巧（不仅是外观和感觉，而且我不希望它产生 IDE 所做的所有不必要的包袱）
4.  提供几乎所有文本编辑器都具备的基本功能（我知道这听起来很模糊和愚蠢，但更具体地说，所有文本编辑器都应该为您提供指定编码、用空格替换制表符、指定制表符大小、指定默认值的选项行字符等）
5.  自由。开源是一件好事，但不是必需的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:19:13.240

[Sublime Text 2](http://www.sublimetext.com/)是一个了不起的文本编辑器。您可以免费使用它，但它们会时不时地向您显示一个小屏幕。

//也检查[数据包管理](http://wbond.net/sublime_packages/package_control)
//[这](http://www.youtube.com/watch?v=Mk-tFn2Ix6g)是 Paul Irish 在 Sublime 中演示实时 linting 和 Zen Coding

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:24:04.747

Gmate也不错。它是带有许多插件的 Gedit，使其表现得像 textmate。

[https://github.com/gmate/gmate](https://github.com/gmate/gmate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T20:31:39.320

现在，在 Ruby 社区中，最流行的编辑器是[Vim](http://www.vim.org/)，它很难上手，但一旦你习惯了，你就再也回不去了。它重量轻、可定制、可扩展、功能强大且非常棒。

另一个流行的是，正如@superlukas 所说，[Sublime Text 2](http://www.sublimetext.com/)很好，但如果你想长期使用它，你最终将不得不为它付费（它作为一个永无止境的试用版分发）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:38:44.013

Sublime Text 2 是您正在寻找的内容，只需放入命令行：

sudo add-apt-repository ppa:webupd8team/sublime-text-2。sudo apt-get update && sudo apt-get install sublime-text。

然后它将在 usr/lib/sublime-text-2 中。然后您可以从那里进行路径配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T21:33:35.710

除了提到的其他选项（[vim/gvim](http://www.vim.org/download.php)、[Sublime Text 2](http://www.sublimetext.com/)和 Gmate），看看[Redcar](http://redcareditor.com/)。

它是 Ruby 的编辑器，用 Ruby 编写。它实际上非常好，尽管这些天我更倾向于使用 Sublime 和 vim。

# qt - Q_OBJECT "复制" - 复制所有属性

> ID：12664758
> 
> 赞同：3
> 
> 时间：2012-09-30T20:15:37.933
> 
> 标签：qt, properties

众所周知，`Q_OBJECT`s 是实例，不可复制。

是否有任何语法糖来复制任意`QObject`派生类的所有静态和动态属性？

这似乎是一个明智的选择，但我找不到任何这样的参考 - 显然我自己实现一个应该很简单 - 循环`metaObject()`，循环`dynamicPropertyNames()`，相应地设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:44:58.997

您可以按如下方式实现一个复制助手类。

```
/** Enable QObjects to be explicitly copyable by copying property values. */
template<class T>
class QObjectCopyHelper<T>
{
protected:
    explicit QObjectCopyHelper(T *client) : m_client(client) {}

public:
    T *clone(QObject *parent = 0) {
        T *copy = new T(parent);

        // loop over and copy properties from m_client to copy
        // (both from T::staticMetaObject and dynamic ones)

        return copy;
    }

private:
    T *m_client; // <-- I think we need this, but I might be wrong
}; 
```

然后你可以在任何 QObject 子类中使用它，只需要做很少的工作：

```
class MyClass : public QObject, public QObjectCopyHelper<MyClass>
{
    Q_OBJECT
    ...
}; 
```

但是，这仍然需要`clone()`调用（丑陋的“Java 风格”）。所以我们可以额外定义一个复制构造函数来调用`clone()`，你也可以想到`assign()`在赋值运算符中调用的方法。

请注意，这实际上只复制了属性！QObject 中还有很多其他的东西被跟踪，比如当前的连接。他们明确禁止复制 QObjects，因为很难定义如何执行此操作的规则，并且这些规则仅适用于某些用例，而在其他用例中您需要其他规则......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T21:31:08.457

[这里](https://stackoverflow.com/questions/956335/subclass-of-qobject-qregistermetatype-and-the-private-copy-constructor)讨论了一个解决方案，他们采用循环属性方法。这里似乎没有“语法糖”。

# android - 如何自动换行单行 AutoCompleteTextView 的提示？

> ID：12664764
> 
> 赞同：0
> 
> 时间：2012-09-30T20:16:35.223
> 
> 标签：android, android-layout, textview

我有一个 AutoCompleteTextView，用户可以在其中进行单行搜索，即不允许换行。使用`android:singleLine="true"`允许它正常工作。

但是，我还希望在没有输入其他文本时设置一个提示，并且该文本确实需要多行。我的问题是，对于 Android 4+，提示没有包装成几行。但是，在 Android 2.3 中，内容会被包装并显示多行。用户仍然不能输入多行，所以这就是我想要的方式。

使用例如`android:maxLines="2"`并没有帮助，因为这允许用户在搜索时插入换行符。我也尝试过`android:scrollHorizontally="false"`，`android:ellipsize="none"`但`android:layout_weight=1`没有成功。

关于如何获得提示以包装多行并且仍然只接受来自 Android 4 用户的单行的任何想法？以下是我目前正在使用的代码。

```
 <AutoCompleteTextView
        android:id="@+id/autoCompleteTextView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:completionThreshold="3"
        android:hint="This is the hint to be displayed. It's rather long and doesn't fit in one line"
        android:singleLine="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:20:29.713

尝试将 singleLine 更改为：

```
android:lines="1" 
```

现在禁用“Enter”：

EDIT_TEXT.setOnKeyListener(new OnKeyListener() {

```
 @Override
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (keyCode == KeyEvent.KEYCODE_ENTER)
            {
                return true;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:34:14.647

尝试添加 OnFocusChangeListener 来更改`singleLine`or的值`maxLines`：

```
autoCompleteTextView.setOnFocusChangeListener(new OnFocusChangeListener() {
    public void onFocusChange (View v, boolean hasFocus) {
        // This might do it on its own
        ((AutoCompleteTextView) v).setSingleLine(hasFocus);

        // If setSingleLine() doesn't work try this 
        AutoCompleteTextView auto = (AutoCompleteTextView) v;
        if(hasFocus)
            auto.setMaxLines(1);
        else
            auto.setMaxLines(2); // or more if necessary

        // Only keep the one that works, you obviously don't need both!
    }
}); 
```

# asp.net-mvc - 使用 Html.BeginForm 从视图将参数传递给控制器

> ID：12664769
> 
> 赞同：0
> 
> 时间：2012-09-30T20:17:06.510
> 
> 标签：asp.net-mvc

我有两个简单的问题，我希望有人能回答......在网上已经被问过好几次了，但我在下面找不到清楚说明我需要什么的帖子......

问题1：如何从视图中获取值以传递给视图中已经存在值的控制器？换句话说，我需要@loanID 值。此值是表单上的文本框，不是模型的一部分。

```
<label for="txtLoanID">Loan ID :</label>
                            @(Html.Kendo().IntegerTextBox()
                                        .Name("txtLoanID")
                                        .Placeholder("Enter LoanID")
                                )

@using (Html.BeginForm("GeneratePDF", "Home", new { @loanID = loanID }, FormMethod.Post)) 
```

问题 2：如何使用上述行将多个值传递给控制器​​，特别是下拉列表文本值，它也不是模型的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:50:01.330

文本框应该在表单中，以便由它发回。

```
@using (Html.BeginForm("GeneratePDF", "Home", FormMethod.Post))    {
    <label for="txtLoanID">Loan ID :</label>                             
     @Html.Kendo().IntegerTextBox().Name("txtLoanID").Placeholder("Enter LoanID")                               
} 
```

那么您的控制器应该能够通过模型绑定来获取它

```
public ActionResult GeneratePDF(int txtLoadID)
{
} 
```

# php - 使用PHP获取具有指定扩展名的目录中的所有文件？

> ID：12664786
> 
> 赞同：-2
> 
> 时间：2012-09-30T20:18:51.443
> 
> 标签：php, directory

> **可能重复：**
> [从 php 中某些扩展名过滤的目录中获取文件的最佳方法](https://stackoverflow.com/questions/8541180/best-way-to-get-files-from-a-dir-filtered-by-certain-extension-in-php)

我想在我的目录中创建所有 .txt 文件的文件名数组。

目录内容：-file1.txt-file2.txt-otherfile.php

示例数组： - files[1]file1.txt - files[2]file2.txt

# angularjs - module.config 中有哪些提供程序/服务可用？

> ID：12664787
> 
> 赞同：12
> 
> 时间：2012-09-30T20:18:51.880
> 
> 标签：angularjs

我想使用 $document 从输入字段中获取服务器值。

```
var base_url = $document[0].getElementById('BaseUrl').value; 
```

基本 url 用于抓取模板。

```
var base_url = $document[0].getElementById('BaseUrl').value;

$routeProvider.when('/alert', {
  controller: function () { },
  templateUrl: base_url + '/partials/instances.html'
}); 
```

由于 $document 抛出一个未知的错误，我猜测它在配置中不可用？有没有办法找出什么可用，什么不可用？我也可以使用 $http 从服务器获取数据，但这也不可用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T20:55:41.383

AngularJS 模块分两个阶段进行引导：

*   `Configuration phase`只有提供者和常量可用。
*   `Run phase`其中服务基于注册的提供者进行实例化。在此阶段，常量仍然可用，但提供者不可用。

AngularJS[文档](http://docs.angularjs.org/guide/module)（部分：“模块加载和依赖项”）对此进行了深入了解：

> 模块是在引导过程中应用于应用程序的配置和运行块的集合。该模块最简单的形式由两种块的集合组成：
> 
> **配置块**- 在提供者注册和配置阶段执行。只有提供者和常量可以注入到配置块中。这是为了防止在完全配置之前意外实例化服务。
> 
> **运行块**- 在创建注入器后执行并用于启动应用程序。只有实例和常量可以注入运行块。这是为了防止在应用程序运行时进行进一步的系统配置。

鉴于上述情况，您只能注入常量和提供程序（`Provider`在 API 文档中标有后缀）。这可能会回答您的问题，但无助于解决您的模板加载问题......

我想知道您是否不能简单地在 HTML 中使用 base 标记，然后简单地使用相对路径（到基础）而不指定绝对路径？有点像（前提是基础配置正确）：

```
$routeProvider.when('/alert', {
  controller: function () { },
  templateUrl: 'partials/instances.html'
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-19T20:22:39.530

虽然这个问题已经得到了普遍的回答，但这里有一些针对问题中使用的具体示例的补充：

如何使用角度常量来定义部分的 baseUrl（或定义其他表示服务器值的常量并使它们可用于配置）：

```
// file: app.js
'use strict';

/* App Module */
angular.module( 'myApp', [] )

  // define the templateBaseUrl
  .constant( 'templateBaseUrl', 'themes/angular/partials/' );

  // use it in configuration
  .config(['$routeProvider','templateBaseUrl', function($routeProvider,templateBaseUrl) {
    $routeProvider
      .when( '/posts', {
        templateUrl : templateBaseUrl + 'post-list.html',
        controller  : PostListCtrl
      })
      .when( '/posts/:postId-:slug', {
        templateUrl : templateBaseUrl + 'post-view.html',
        controller  : PostViewCtrl
      })
      .when( '/about', {
        templateUrl : templateBaseUrl + 'about.html',
        controller  : AboutPageCtrl
      })
      .when( '/contact', {
        templateUrl : templateBaseUrl + 'contact.html',
        controller  : ContactPageCtrl
      })
      .otherwise({
        redirectTo: '/posts'
      })
    ;
  }]); 
```

在我看来，这有几个好处：

*   如果你移动你的视图，你只需要在一个位置更新你的代码
*   如果您的部分内容深深嵌套在项目布局中，“templateBaseUrl”不会像整个路径那样引起太多噪音
*   您甚至可以在相对路径和绝对路径之间进行更改
*   [对类似问题的回答](https://stackoverflow.com/questions/12858859/routing-in-subdirectory-in-angular-js)建议使用 html 的基本元素来消除在每个 templateUrl 前添加 baseUrl 的需要。但这也影响了网站上的所有其他资源。仅配置模板的基本 url 没有副作用

通常，我不使用带有上述硬编码值的解决方案。这只是一个示例，以最简单的方式显示要做什么。为了能够在您的服务器上复制您的应用程序，请在您的索引文件中定义 app.js 之外的值并在服务器端生成必要​​的路径：

```
// file: index.php
<?php
  // only depends on your project layout
  $angularPartialsBaseUrl = 'themes/angular/partials/';
  // this will change when you move the app around on the server
  $themeBaseUrl  = $_SERVER['REQUEST_URI'] . 'themes/angular';
?><!DOCTYPE html>
<html ng-app="myApp">
<head>
    <title>Yii Blog Demo</title>

    <script>
      var myNS = myNS || {};
      myNS.appConfig = myNS.appConfig || {};
      myNS.appConfig.templateBaseUrl = '<?php echo $angularPartialsBaseUrl; ?>';
    </script>

    <script src="<?php echo $themeBaseUrl; ?>/js/vendor/angular/angular.js"></script>
    <script src="<?php echo $themeBaseUrl; ?>/js/app.js"></script>

</head>

[...] 
```

在 app.js 中：

```
// file: app.js
'use strict';

/* App Module */
angular.module( 'myApp', [] )

  // define the templateBaseUrl using external appConfig
  .constant( 'templateBaseUrl', myNS.appConfig.templateBaseUrl ); 
```

# ruby - ruby savon - 只有 xsd 没有 wsdl

> ID：12664791
> 
> 赞同：0
> 
> 时间：2012-09-30T20:19:40.930
> 
> 标签：ruby, xsd, wsdl, savon

我已经成功地将 savon 用于具有 wsdl 的站点，但现在我有一个仅提供 xsd 的站点，因此我无法执行

```
client = Savon.client("http://service.example.com?wsdl") 
```

savon 可以导入并用于数据提取吗？我认为有一种方法可以伪造一些标题，但我不确定。

作为参考，xsd 在这里[http://api.parature.com/schema/xsd/Retrieve-Ticket.xsd](http://api.parature.com/schema/xsd/Retrieve-Ticket.xsd)

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T01:10:46.413

Savon 特别是一个肥皂客户端，因此需要一个[wsdl](http://en.wikipedia.org/wiki/WSDL)。尽管soap 以xml 表示并且wsdl 是xsd 的一部分，但相反的情况并非如此，因为[schema](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)不是Web 服务定义。总而言之，你在那儿运气不好，Savon将毫无用处。无论您如何尝试破解它，您都在击败一匹死马。

我能建议的最接近令人满意的折衷方案是Savon 使用的[nokogiri](http://nokogiri.org/)，它完全能够单独[处理](http://nokogiri.org/Nokogiri/XML/Schema.html)您现在面临的 xsd/xml 接口。

开心！

# ruby-on-rails - sybase 可以与 ruby -on-rails 一起使用吗？

> ID：12664795
> 
> 赞同：3
> 
> 时间：2012-09-30T20:19:59.150
> 
> 标签：ruby-on-rails

想知道 Rails 可用的后端。

ruby-on-rails 是否适用于 sybase 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:02:12.137

至少有一种配置可以让 Rails 应用程序与 Sybase 通信。使用[JRuby](http://jruby.org)作为 Ruby 解释器，使用[active-record-jdbc-adapter](https://github.com/jruby/activerecord-jdbc-adapter)作为数据库适配器。您还需要安装[Sybase JDBC 驱动](http://www.sybase.com/products/allproductsa-z/softwaredeveloperkit/jconnect)程序。可能还有其他适配器可以与 MRI 或其他 Ruby 解释器一起使用。

在任何情况下，选择 JRuby 而不是 MRI 还有其他充分的理由——线程要好得多。

# mysql - 如何在 Windows 中每 60 秒终止 MySQL 查询或休眠连接？

> ID：12664796
> 
> 赞同：2
> 
> 时间：2012-09-30T20:20:06.353
> 
> 标签：mysql, sql, windows-server-2008

我想每分钟检查一次我的 MySQL 服务器并终止运行时间超过 150 秒的查询。我想这样做的主要原因是因为我不希望某些人的查询为其他人锁定数据库。我知道这不是问题的最终解决方案，但至少它是一个备用方案，以防查询出现问题。我没有从属数据库（这只是一个家庭项目）。

我想安排一个脚本来为我执行此操作。我不熟悉 Perl 或 Ruby，我需要在我的 Windows 2008 Server 机器上完成它。我已经研究过创建一个简单的 cmd 行脚本，但这似乎是不可能的。我知道目前我可以做这样的事情，但我必须手动做：

```
mysqladmin processlist
mysqladmin kill 
```

有人对我如何做到这一点有任何想法或例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:49:00.730

如果你安装了 Wscript - 我认为应该是 - 你可以试试这个。另存为“somethingorother.vbs”并不时执行。或者您可以使用提供的循环。loop 和 kill-for-real 选项都有注释；在生产服务器上取消注释之前测试脚本。

我假设 'mysqladmin processlist' 输出类似这样的内容（取自我的 XP）：

```
+----+------+----------------+----+---------+------+-------+------------------+
| Id | User | Host           | db | Command | Time | State | Info             |
+----+------+----------------+----+---------+------+-------+------------------+
| 21 | root | localhost:1648 |    | Query   | 0    |       | show processlist |
+----+------+----------------+----+---------+------+-------+------------------+ 
```

所以我们要去掉包含“----”的行和包含“Id | User”的行，剩下的就是

```
| 21 | root | localhost:1648 |    | Query   | 0    |       | show processlist | 
```

我们可以用管道符号“|”分割，得到从 0 到 8 的九个字段：

```
0   1     2          3          4      5        6      7           8
 | 21 | root | localhost:1648 |    | Query   | 0    |       | show processlist | 
```

字段 #1 是 Id，字段 #6 产生运行时间。

```
Option Explicit

Dim objShell, objWshScriptExec, objStdOut, strLine
Dim id, fields, rt, Killer, KillRun

' While True
'     WScript.Sleep 150000

Set objShell = CreateObject("WScript.Shell")
Set objWshScriptExec = objShell.Exec("mysqladmin processlist")
Set objStdOut = objWshScriptExec.StdOut

While Not objStdOut.AtEndOfStream
   strLine = objStdOut.ReadLine
   If (InStr(strLine, "----") = 0 and InStr(strLine, "| Id | User |") = 0) Then
       fields = Split(strLine, "|")
       id = trim(fields(1))
       rt = trim(fields(6))
       If rt > 150 Then
           ' Set Killer = CreateObject("WScript.Shell")
           ' Set KillRun = objShell.Exec("mysqladmin kill " & id)
           echo 
       End If
   End If
Wend

' Wend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T22:26:47.547

这是我最终使用的最终脚本。感谢 Iserni 的初步回答，帮助我达到了这一点！

我最终从调用 csript.exe 的 .bat 文件启动它，因为我可以将消息输出到命令行控制台（而不是消息框）。如果要输出到文本文件，也可以添加它，只需确保启动具有完全管理员 UAC 访问权限的 .bat 文件即可。以下是 .bat 文件包含的内容：

```
C:\Windows\System32\cscript.exe "C:\Program Files\MySQL\MySQL Server 5.6\bin\kill-slow-queries.vbs" 
```

这是 .vbs 文件中的内容：

```
 Option Explicit

    Dim objShell, objWshScriptExec, objStdOut, strLine, fields
    Dim id, rt, Killer, KillRun

     While True
         WScript.Sleep 10000

    Set objShell = CreateObject("WScript.Shell")
    Set objWshScriptExec = objShell.Exec("C:\Program Files\MySQL\MySQL Server 5.6\bin\mysqladmin processlist -u root -pMYPASSWORD")
    Set objStdOut = objWshScriptExec.StdOut

On Error Resume Next
    While Not objStdOut.AtEndOfStream
       strLine = objStdOut.ReadLine
       If InStr(strLine, "| 1") > 0 or InStr(strLine, "| 2") > 0 or InStr(strLine, "| 3") > 0 or InStr(strLine, "| 4") > 0 or InStr(strLine, "| 5") > 0 or InStr(strLine, "| 6") > 0 or InStr(strLine, "| 7") > 0 or InStr(strLine, "| 8") > 0  or InStr(strLine, "| 9") > 0 Then
           fields = Split(strLine, "|") 
           id = trim(fields(1))
           rt = trim(fields(6))
           If rt = "" Then 
              rt = 0
           End If
           WScript.Echo "ID: " + id + " Time: " + rt
           If rt > 80 Then
                Set Killer = CreateObject("WScript.Shell")
                Set KillRun = objShell.Exec("C:\Program Files\MySQL\MySQL Server 5.6\bin\mysqladmin kill " + id + " -u root -pMYPASSWORD")
               WScript.Echo "Killed ID: " + id
           End If
       End If

     Wend

      WScript.Echo ""
      WScript.Echo ""

    Wend 
```

我有一个检查每个 Integer 的 If 语句的原因是因为它保证并完全匹配进程的 ID 号。除了这九个选项之外的任何选项都会失败，而且您永远不知道进程列表中*可能*包含什么，所以安全总比抱歉好。

# jquery - 如何隐藏 当有人在框外点击时框

> ID：12664798
> 
> 赞同：0
> 
> 时间：2012-09-30T20:20:14.853
> 
> 标签：jquery

当有人在框外单击时，如何隐藏`<div>`框。我找不到问题。所以请帮我解决这个问题。

```
<html>
  <head>
    <title>Test jQuery</title>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#button-upload').click(function() {
            $('#id_menu_profile').show();
            });
        });
        var $box = $('#id_menu_profile');
        $(document.body).click(function(){
            if (!$box.has(this).length) { // if the click was not within $box
                $box.hide();
            }
        });
    </script>
</head>
<body>
    <dl>
        <dt><a id="button-upload" href="#">Profile<img src="menu.png" name="arrow_profile"></a></dt>
        <!-- Submenu -->
        <div  id="id_menu_profile" style=" display: none;">
            <dt><a href="index.html">Your Id</a></dt>
            <dt><a href="index.html">Account Setting</a></dt>
            <dt><a href="index.html">Change Password</a></dt>
        </div>
    </dl>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:23:12.893

这应该这样做：

```
var openDiv;

function toggleDiv(divID) {
    $("#" + divID).fadeToggle(200, function() {
        openDiv = $(this).is(':visible') ? divID : null;
    });
}

$(document).click(function(e) {
    if (!$(e.target).closest('#'+openDiv).length) {
        toggleDiv(openDiv);
    }
}); 
```

示例：http: [//jsfiddle.net/CHP5w/161/](http://jsfiddle.net/CHP5w/161/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:30:27.110

您只需要`stopPropagation()`在框上单击，因此事件不会到达`Document`单击处理程序，如下所示：

```
var $box = $('#id_menu_profile');
$(document.body).click(function(){
    // click outside $box
        $box.hide();
});

$box.click(function(e){
    e.stopPropagation(); //Don't let the box click bubble up to Document
    // click within $box
}); 
```

# jquery - 如何使哈希页面标题和第一个内容隐藏

> ID：12664800
> 
> 赞同：0
> 
> 时间：2012-09-30T20:20:18.270
> 
> 标签：jquery, hash, master-pages, hide, title

当我输入 url 值时我不能，所以标题不会改变并且第一个内容不会隐藏如何使用 enter 与 url 更改标题并隐藏第一页内容？

```
<script type="text/javascript">
    $(function() {
    var pagecontent = $(".page_content");
    var pages = $("ul.pages li,#logo");
    var hash = window.location.hash;
    var title = document.title;

    pagecontent.not(hash).hide();
    pages.first().addClass("active").show();
    pagecontent.first().show();
    pages.find('[href=' + hash + ']').addClass('active');
    pages.find('[href=' + hash + ']').parent().closest('li').addClass('active');

    pages.click(function() {
        $(this).addClass('active').siblings().removeClass('active');
        $(this).parent().closest('li').addClass('active').siblings().removeClass('active'); 
        pagecontent.hide();
        var activepage = $(this).find("a").attr("href");

        $(activepage).fadeIn();
        title = $('h2', activepage).first().text();   
        $('title').text(title);
        return false;
    });
});
</script> 
```

当我尝试输入 url 时，标题和 pagecontent.first 保持不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:44:11.620

固定的。这里是：

```
$(function() {
    var pagecontent = $(".page_content");
    var pages = $("ul.pages li,#logo");
    var hash = window.location.hash || "#home";
    var title = document.title;

    // new block
    var titlex = $('h2', hash).first().text();
    document.title = titlex;
    $(hash).show();

    $('ul.pages a[href="' + hash + '"]')
        .addClass("active")
        .closest("li")
            .addClass("active");
    // end

    pagecontent.not(hash).hide();
    pages.click(function() {
        $(this).addClass('active').siblings().removeClass('active');
        $(this).parent().closest('li').addClass('active').siblings().removeClass('active'); 
        pagecontent.hide();
        var activepage = $(this).find("a").attr("href");
        window.location.hash = activepage;  //new: fix location hash
        $(activepage).fadeIn();
        title = $('h2', activepage).first().text();   
         $('title').text(title);
        return false;
    });
}); 
```

我们可以讨论这种风格，但这很有效。

编辑：请注意，`click`处理程序设置适当的位置哈希。似乎是正确的决定，但它会导致浏览器标题栏中的闪烁。如果它困扰您，请尝试更换

```
window.location.hash = activepage;
$('title').text(title); 
```

和

```
if( history.pushState ) {
    history.replaceState({}, title, activepage);
} else {
    window.location.hash = activepage;
    document.title = title;
} 
```

# facebook-like - 添加换行符以打开图形元标记

> ID：12664805
> 
> 赞同：1
> 
> 时间：2012-09-30T20:20:44.427
> 
> 标签：facebook-like, facebook-opengraph

> **可能重复：**
> [Facebook 发送对话框：在描述中添加换行符](https://stackoverflow.com/questions/7348980/facebook-send-dialog-adding-a-linebreak-in-the-description)

我为 facebook、google+ 按钮创建了开放图形元标记，它与描述中的单行一起工作得很好。`'\n'`但是我尝试使用, `'\n\r'`, `'<br>'`,等在描述段落之间添加换行符`'<br \>'`，但它们都不起作用。

任何解决方案或解决方法？谢谢。

# networking - netstat -r 的输出

> ID：12664806
> 
> 赞同：-1
> 
> 时间：2012-09-30T20:20:53.300
> 
> 标签：networking, routing, netstat

我一直在尝试了解 的输出`netstat -r`，我所知道的与路由表有关！接口列表中每个接口旁边的数字是什么，度量标准是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:26:14.097

指标为每个接口分配一个“成本”。如果主机有两个或多个可用于特定路由的接口，它们用于确定使用哪个接口。度量值越高，使用该接口的成本就越高。

例如，您可能有一台双宿主机器。一个接口在“便宜”的本地 DSL 线路上，一个接口在昂贵的卫星上行链路上。默认情况下，您宁愿使用该 DSL 线路。两个接口都可以用于传出数据包，因此您要确保 DSL 接口具有较低的指标。

# database - 狮身人面像：警告：属性计数为 0：切换到无 docinfo

> ID：12664813
> 
> 赞同：7
> 
> 时间：2012-09-30T20:22:46.810
> 
> 标签：database, sphinx

我是 Sphinx 的新手，我似乎无法弄清楚这个警告指的是什么或如何解决它。谷歌搜索没有提供太多信息，所以我希望这里的数据库专家知道如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T20:35:31.027

没有什么好害怕的。该消息说，由于缺少这些属性，配置文件中设置的附加属性存储模式将被关闭。

`docinfo`是每个文档属性值的完整集。

阅读更多关于这里[http://sphinxsearch.com/docs/2.0.4/attributes.html](http://sphinxsearch.com/docs/2.0.4/attributes.html)

# javascript - 在 chrome 扩展选项页面上添加 facebook like 按钮

> ID：12664814
> 
> 赞同：1
> 
> 时间：2012-09-30T20:22:54.927
> 
> 标签：javascript, google-chrome-extension, facebook-like, facebook-javascript-sdk, manifest

由于清单版本 2 的内容安全策略，我无法将 facebook like 按钮添加到我的 chrome 扩展选项页面。

以“google.com”的点赞按钮为例。我已按照[facebook 开发中心](http://developers.facebook.com/docs/reference/plugins/like/)的说明进行操作，并添加了

```
<div id="fb-root"></div>
<script type="text/javascript" src="js/facebook-jssdk.js"></script>

<div class="fb-like" data-href="http://www.google.com" data-send="true" data-width="450" data-show-faces="false" data-font="arial"></div> 
```

进入options.html；并添加

```
(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "https://connect.facebook.net/en_GB/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

进入 js/facebook-jssdk.js；并添加了这一行

```
"content_security_policy": "script-src 'self' https://connect.facebook.net; object-src 'self'", 
```

进入 manifest.json

打开 file://home/options.html 时，我可以让 facebook 按钮正常工作。但是，当它通过 chrome://extensions 打开时，按钮不会显示。

我该怎么做才能获得按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:16:02.360

一个更简单的解决方案是使用 iframe 而不是他们的 javascript sdk。唯一的缺点是您将无法包含“发送”按钮。

*   在[代码生成器](https://developers.facebook.com/docs/reference/plugins/like/)上，取消选中**发送按钮**。
*   单击**获取代码**。
*   从**IFRAME**选项卡复制代码。

# mongodb - 来自 Mongo 的随机抽样

> ID：12664816
> 
> 赞同：15
> 
> 时间：2012-09-30T20:23:03.130
> 
> 标签：mongodb, sampling, database

我有一个带有文档的 mongo 集合。每个文档中有一个字段为 0 或 1。我需要从数据库中随机抽样 1000 条记录，并将具有该字段的文档数计算为 1。我需要进行 1000 次抽样。我该怎么做 ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-02-09T18:01:29.430

对于想要回答的人，您现在应该使用`$sample`3.2 中的新聚合函数。

[https://docs.mongodb.org/manual/reference/operator/aggregation/sample/](https://docs.mongodb.org/manual/reference/operator/aggregation/sample/)

```
db.collection_of_things.aggregate(
   [ { $sample: { size: 15 } } ]
) 
```

然后添加另一个步骤来计算`0`s 和`1`s`$group`用于获取计数。[这是 MongoDB 文档中的一个示例](https://docs.mongodb.org/manual/reference/operator/aggregation/group)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-12T10:24:16.570

对于 MongoDB 3.0 及之前的版本，我使用了 SQL 时代的一个老技巧（我认为 Wikipedia 将其用于他们的随机页面功能）。我在需要随机化的每个对象中存储一个介于 0 和 1 之间的随机数，我们称该字段为“r”。然后在“r”上添加一个索引。

```
db.coll.ensureIndex(r: 1); 
```

现在要获取随机 x 对象，您可以使用：

```
var startVal = Math.random();
db.coll.find({r: {$gt: startVal}}).sort({r: 1}).limit(x); 
```

这为您在单个查找查询中提供了随机对象。根据您的需要，这可能有点过头了，但是如果您要随着时间的推移进行大量采样，这是一种非常有效的方法，不会给您的后端增加负担。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T11:57:01.303

这是 shell 中的一个示例`mongo`.. 假设集合`collname`和 感兴趣的值`thefield`：

```
var total = db.collname.count();
var count = 0;
var numSamples = 1000;

for (i = 0; i < numSamples; i++) {
    var random = Math.floor(Math.random()*total);
    var doc = db.collname.find().skip(random).limit(1).next();
    if (doc.thefield) {
        count += (doc.thefield == 1);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T14:03:15.317

我打算用这个来编辑我对@Stennies 答案的评论，但是如果您要跳过大量记录（在这里说大话），您也可以在此处使用单独的自动递增 ID 索引作为替代方案。

我为另一个问题写了另一个答案，很像这个问题，有人试图找到集合的第 n 条记录：

[php mongodb在集合中找到第n个条目](https://stackoverflow.com/questions/12572485/php-mongodb-find-nth-entry-in-collection/12578257#12578257)

我的答案的后半部分基本上描述了一种解决此问题的潜在方法。当然，您仍然需要循环 1000 次才能获得随机行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T23:31:11.540

如果您使用的是 mongoengine，则可以使用 SequenceField 来生成增量计数器。

```
class User(db.DynamicDocument):
    counter = db.SequenceField(collection_name="user.counters") 
```

然后要获取 100 个随机列表，请执行以下操作

```
def get_random_users(number_requested):
    users_to_fetch = random.sample(range(1, User.objects.count() + 1), min(number_requested, User.objects.count()))
    return User.objects(counter__in=users_to_fetch) 
```

你会打电话的地方

```
get_random_users(100) 
```

# windows-8 - 如何在 Windows 8 网页视图中禁用缩放

> ID：12664818
> 
> 赞同：6
> 
> 时间：2012-09-30T20:23:15.997
> 
> 标签：windows-8, windows-runtime

我在应用程序中使用 web 视图来显示外部托管的内容，但是 web 视图允许用户使用捏合手势进行缩放，我想禁用它。

我在 webview 本身上找不到任何这样的属性，并且我在使用 viewport 元标记方面没有取得任何成功，例如：

```
<meta name="viewport" content="user-scalable=no"> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-26T21:13:24.567

我能够使用 CSS 中的以下内容在 Windows 8.1 WebView 中禁用捏合和缩放：

```
html, body
{
  -ms-content-zooming:none;    
} 
```

有很多东西可以尝试： http: [//msdn.microsoft.com/en-us/library/ie/hh771891 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh771891(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T23:01:13.890

不幸的是，这是不可能的。

[http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/8eecf85d-ebd3-4bc0-ad17-15f342efad25](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/8eecf85d-ebd3-4bc0-ad17-15f342efad25)

如果`WebView`工作方式与 WP7 版本类似，那么您可以在 html 中捕获事件并在此处与[此类](http://www.scottlogic.co.uk/blog/colin/2011/11/suppressing-zoom-and-scroll-interactions-in-the-windows-phone-7-browser-control/)似地取消它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T10:07:36.227

我使用了这段代码，终于让它工作了。

```
html, body
{
  -ms-content-zooming:none;  
  touch-action: none;
  content-zooming: none;
  overflow-y: hidden; // hide vertical
overflow-x: hidden; 
overflow-y: none; // hide vertical
overflow-x: none; 
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-03-22T11:22:35.853

放一个

```
<Rectangle Fill="Transparent"/> 
```

在 webview 上，就是这样。

# r - 使用 facet_wrap 将计数和标签添加到堆积条形图

> ID：12664820
> 
> 赞同：3
> 
> 时间：2012-09-30T20:23:33.647
> 
> 标签：r, ggplot2

我想用来`ggplo2`分析李克特量表变量。我想得到这种图形（下），但我不知道如何在堆叠条上添加标签，并为每个分组变量和构面变量（对于`facet_wrap`）插入不同的计数和平均值。

如果有任何帮助，我将不胜感激！

数据可以从[这里获取](https://docs.google.com/file/d/0B-ZJyVlQBsqlX19wSndVb0RkVVk/edit)

我的代码：

```
library(ggplot2)
library(scales)
library(RColorBrewer)

ggplot(example,aes(GroupungVar,fill=VarOfInterest)) + geom_bar(position='fill') +      
scale_fill_manual(values = (brewer.pal(5, "Greens"))) + 
facet_wrap(~FacetVar,ncol=1) + coord_flip() + 
scale_y_continuous(labels=percent) + ylab('Percent') 
```

我得到什么...

![在此处输入图像描述](../Images/637ecf54cd67f569c4788663a764c564.png)

..以及我想要实现的目标（数字与数据集中的不同）。我想在每组的标签中添加计数（N），在条形图上添加百分比标签，在右侧添加平均值（当然对于每组）。百分比和平均值应该适用于图中的所有条形，我只将它们添加到前几个，只是为了说明我的意思。

![在此处输入图像描述](../Images/1a317718ec44f4f3c210ab3ab43b7a22.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T10:51:26.757

我与 R 和 ggplot2 共度一夜，我得到了我想要的 :)

```
library('ggplot2')
library('plyr')
library('RColorBrewer')
library(scales)

label_positions<- function(x) {
  n<-length(x)
  wynik<-numeric(n)
  for (i in 1:n){
    if (i==1) {
      wynik[i]<-0+x[i]/2
    }
    else {
      wynik[i]<-x[i]-(x[i]-x[i-1])/2
    }
  }
  return(wynik)
}

exam1<-ddply(example,.(GroupingVar,FacetVar,VarOfInterest), 'nrow')
exam1.1<-ddply(example,.(GroupingVar,FacetVar),summarise, sr=mean(as.numeric(VarOfInterest),na.rm=T),
               odch=sd(as.numeric(VarOfInterest,na.rm=T)))

exam1<-merge(exam1,exam1.1,by.x=c('GroupingVar','FacetVar'),by.y=c('GroupingVar','FacetVar'))

names(exam1)[4]<-'Count'

exam2<-mutate(exam1,cumul=ave(Count,list(GroupingVar,FacetVar),FUN=cumsum),
              N=ave(cumul, list(GroupingVar,FacetVar),FUN=max),
              CumSumPercent=cumul/N*100,
              Freq=Count/N*100)

exam2<-mutate(exam2,cfrq = ave(CumSumPercent, list(GroupingVar,FacetVar), FUN = label_positions))
exam2$XLabel<-paste(exam2$GroupingVar,' (N=',exam2$N,')',sep='')
exam2$PosMean<-105

p<-ggplot(exam2, aes(x = Etykieta, y = Freq, fill = VarOfInterest)) +
  geom_bar(stat = 'identity',colour="black") +
  labs (x = "", y = "Percentage", fill=" ") + 
  scale_fill_brewer(name="Rating", palette="Greens", breaks = rev(levels(exam2$VarOfInterest))) +
  geom_text(aes(y = cfrq, label=paste(sprintf("%.01f",Freq), "%", sep='')), size=5) +
  geom_text(aes(y=PosMean,label=paste(sprintf("%.02f",sr),' (',sprintf("%.02f",odch),')',sep='')),size=5)+
                      facet_wrap(~FacetVar,ncol=1)  +
                       coord_flip() + ylab('Procent odpowiedzi') + 
  guides(fill=guide_legend(title=NULL)) + theme_bw()  + 
  theme(legend.position="bottom",strip.text.x=element_text(size=15,face='bold'),
        axis.text.x =element_text(size=12,face='bold'), axis.text.y =element_text(size=12,face='bold'),
        axis.title.x=element_text(size=15,face='bold'), axis.title.y=element_text(size=15,face='bold'),
        strip.background=element_rect(colour='black'))

plot(p) 
```

结果

![在此处输入图像描述](../Images/1bcf158097fbfcbe61dbde239d1b3a37.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T22:01:50.033

对于样本大小，我可能只是将它们放在轴标签中，而不是放在图表本身上：

```
library(plyr)
example <- ddply(example,.(FacetVar,GroupungVar),
            transform,
            GroupingVar = paste(as.character(GroupungVar)," - (n=",length(GroupungVar),")",sep = ""))

ggplot(example,aes(GroupingVar,fill=VarOfInterest)) + 
    geom_bar(position='fill') +      
    scale_fill_manual(values = (brewer.pal(5, "Greens"))) + 
    facet_wrap(~FacetVar,ncol=1) + 
    coord_flip() + 
    scale_y_continuous(labels=percent) + 
        ylab('Percent') 
```

![在此处输入图像描述](../Images/5bb8b01073580b7e7055335750c32683.png)

# angularjs - Angular js 支持本地化

> ID：12664823
> 
> 赞同：67
> 
> 时间：2012-09-30T20:24:05.057
> 
> 标签：angularjs, localization

我试图在 AngularJS 中找到支持多种语言的文档，但没有成功。是否支持本地化？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-24T20:20:04.037

看看角度翻译：[https ://github.com/angular-translate/angular-translate](https://github.com/angular-translate/angular-translate)

对于所有 DIY 的人：

您可以找到 Angular 的本地化文件：[这里](https://code.angularjs.org/1.3.14/i18n/)

这些文件将帮助您使用内置的角度过滤器：[日期](https://docs.angularjs.org/api/ng/filter/date)、[货币](https://docs.angularjs.org/api/ng/filter/currency)和[数字](https://docs.angularjs.org/api/ng/filter/number)。惊人的......到目前为止。

现在您想使用自己的文本，而您需要的只是 angular.js 依赖注入的强大功能。创建一个新文件，如：“myTexts_en_us.js”并像这样使用 $provide.value：

```
$provide.value("myTexts", {firstText : "This is my localized text"}); 
```

详情：http:
[//jsfiddle.net/4tRBY/24/](http://jsfiddle.net/4tRBY/24/)

对于实际使用，您应该**添加一个过滤器**：http : [//jsfiddle.net/4tRBY/41/](http://jsfiddle.net/4tRBY/41/)

尖端：

*   确保手动、JS 或服务器将新的本地化文件插入到 html 中。（服务器是这里的最佳选择！）
*   如果您包含其中一个[angular-local 文件](https://code.angularjs.org/1.3.14/i18n/)，则无需在您的应用程序模块中进行设置。（您将自动拥有 $locale - 请参阅小提琴）
*   为您的 $provide-value 添加一个 id 键 - 并将该值设置为您在文件中使用的语言代码 - 这将在测试时派上用场。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-30T23:19:17.420

您正在寻找的是[$locale](https://docs.angularjs.org/api/ng/service/$locale)。

实际上[，在 angularjs 主页的一半](http://angularjs.org/#create-components)左右也有一个示例。

他们的例子中的一个片段：

```
function BeerCounter($scope, $locale) {
  $scope.beers = [0, 1, 2, 3, 4, 5, 6];
  if ($locale.id == 'en-us') {
    $scope.beerForms = {
      0: 'no beers',
      one: '{} beer',
      other: '{} beers'
    };
  } else {
    $scope.beerForms = {
      0: 'žiadne pivo',
      one: '{} pivo',
      few: '{} pivá',
      other: '{} pív'
    };
  }
} 
```

我不确定这是否是一个“标准”……但这是一个开始。如果你有*很多*本地化工作要做，我想我会创建一个服务来注入我的控制器......像这样的伪代码：

```
app.service('myLocalization', ['$locale', function($locale) {
    var res = {
       'help' : { 
           'en-us': 'help',
           'es-mx': 'ayudame'
       },
       'beer' : {
            'en-us': 'beer',
            'es-mx': 'cerveza'
       }
    }

    return {
       getString: function(key) {
          return res[key][$locale.id];
       }
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-11T10:28:15.737

我创建了一个专门用于本地化目的的模块 - [https://github.com/4vanger/angular-l10n](https://github.com/4vanger/angular-l10n) 它支持消息本地化、参数替换、更改飞行语言环境并提供许多方便的使用方式 - 过滤器、指令等.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-06T18:19:42.117

只是为了信息的完整性——从 AngularJS 1.4 流中的某个地方开始——核心之外还会有另一个 i18n 实现。请看一下[https://github.com/angular/i18n](https://github.com/angular/i18n)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-02T06:21:17.300

你也可以看看这个：

[https://github.com/angular-ui/ui-utils/pull/173](https://github.com/angular-ui/ui-utils/pull/173)

性能优于目前可用于 angular 的任何其他 i18n 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T09:08:39.913

如果您正在寻找 i18n 支持，那么您可以参考以下项目，该项目具有完整的多语言功能并且易于实施。看看github项目

[angularjs-本地化服务](https://github.com/lavinjj/angularjs-localizationservice)

# python - 将浮点类型数据从 Arduino 发送到 Python

> ID：12664826
> 
> 赞同：5
> 
> 时间：2012-09-30T20:24:37.493
> 
> 标签：python, c, arduino, atmega

我需要从 Python 向 Arduino 发送浮点数据并返回相同的值。我想先从 Arduino 发送一些浮点数据。数据以 4 个连续字节的形式发送。我试图弄清楚如何收集这些连续的字节并将其转换为 Python 端（系统端）的正确格式

**Arduino代码：**

```
void USART_transmitdouble(double* d)
{
    union Sharedblock
    {
        char part[4];
        double data;

    } my_block;
    my_block.data = *d;
    for(int i=0;i<4;++i)
    {
        USART_send(my_block.part[i]);
    }

}

int main()
{
    USART_init();
    double dble=5.5;
    while(1)
    {
       USART_transmitdouble(&dble);
    }
    return 0;
} 
```

Python代码（系统端）：

```
my_ser = serial.Serial('/dev/tty.usbmodemfa131',19200)

while 1:
    #a = raw_input('enter a value:')
    #my_ser.write(a)
    data = my_ser.read(4)
    f_data, = struct.unpack('<f',data)
    print f_data
    #time.sleep(0.5) 
```

使用`struct`上面代码所示的模块可以打印浮点值。

50% 的时间，数据打印正确。但是，如果我弄乱`time.sleep()`或停止传输并重新启动它，则会打印出不正确的值。我认为在这种情况下解包了错误的 4 个字节集。知道我们可以在这里做什么吗？

除了使用 struct 模块向 Arduino 发送和接收浮点数据外，还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T12:55:40.157

因为这个问题在搜索引擎上排名很高，所以我制定了一个可行的解决方案。

警告：除非您需要全浮点精度，否则转换为字符串并发送（使用 sprintf 或 dtostrf，或使用**Serial.print(value,NumberOfDecimalPlaces)** [（文档）](http://arduino.cc/en/Serial/print)）。这是因为以下解决方案 a) 不适用于不同字节序的机器和 b) 某些字节可能被误解为控制字符。

解决方案：获取浮点数的指针，然后将其作为字节数组传递给 Serial.write()。

例如

```
/*
Code to test send_float function
Generates random numbers and sends them over serial

*/

void send_float (float arg)
{
  // get access to the float as a byte-array:
  byte * data = (byte *) &arg; 

  // write the data to the serial
  Serial.write (data, sizeof (arg));
  Serial.println();
}

void setup(){
  randomSeed(analogRead(0));  //Generate random number seed from unconnected pin
  Serial.begin(9600); //Begin Serial
}

void loop()
{
  int v1 = random(300); //Generate two random ints
  int v2 = random(300);
  float test = ((float) v1)/((float) v2);  // Then generate a random float

  Serial.print("m");  // Print test variable as string
  Serial.print(test,11);
  Serial.println();

  //print test variable as float
  Serial.print("d"); send_float(test);
  Serial.flush();
  //delay(1000);

} 
```

然后为了在 python 中接收这个，我使用了你的解决方案，并添加了一个函数来比较两个输出以进行验证。

```
# Module to compare the two numbers and identify and error between sending via float and ASCII
import serial
import struct
ser = serial.Serial('/dev/ttyUSB0', 9600) // Change this line to your port (this is for linux ('COM7' or similar for windows))
while True:
    if(ser.inWaiting() > 2):    
        command = ser.read(1) #read the first byte
        if (command == 'm'):
            vS = ser.readline()
            #
            ser.read(1)
            data = ser.read(4)
            ser.readline()
            vF, = struct.unpack('<f',data)
            vSf = float(vS)
            diff = vF-vSf
            if (diff < 0):
                diff = 0-diff
            if (diff < 1e-11):
                diff = 0

            print "Str:", vSf, " Fl: ", vF, " Dif:", diff 
```

参考： [将浮点数从 python 发送到 arduino](https://arduino.stackexchange.com/questions/5090/sending-a-floating-point-number-from-python-to-arduino)以及 [如何通过串行发送浮点数](https://stackoverflow.com/questions/3270967/how-to-send-float-over-serial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:47:40.250

嗯，简短的回答是软件和硬件之间存在一些交互。我不确定你是如何停止传输的。我怀疑你所做的实际上是停止发送中间字节的字节，因此在你开始备份时注入一个新字节。time.sleep() 部分可能是某些硬件缓冲区溢出并且您丢失了导致对齐偏移的字节。一旦你开始从一个浮点数中获取几个字节，从另一个浮点数中获取几个字节，你就会开始得到错误的答案。

我注意到的一件事是您没有任何对齐机制。这通常很难用 UART 来完成，因为您只能发送字节。一种方法是来回发送握手。计算机说重新启动，硬件重新启动连接（停止发送内容，清除它拥有的 w/e 缓冲区等）并发送一些魔法，如 0xDEADBEEF。然后计算机可以找到这个 0xDEADBEEF 并知道下一条消息将从哪里开始。您仍然需要了解硬件/操作系统中存在的任何缓冲区，并采取预防措施以免它们溢出。从 XON/XOFF 到实际的硬件流控制，有多种流控制方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T00:52:40.723

我不知道 Python，但是，Arduino 发送这样的数字有什么问题：

```
value= 1.234;
Serial.println(value); 
```

对于 Arduino 接收浮点数：

```
#include <stdio.h>
#include <stdlib.h>

void loop() {
    char data[10], *end;
    char indata;
    int i=0;
    float value;

    while ((indata!=13) & (i<10)) {
        if (Serial.available() > 0) {
            indata = Serial.read();
            data[i] = indata;
            i++;
        }
    }
    i-=1;
    data[i] = 0; // replace carriage return with 0
    value = strtof(data,&end);           
} 
```

请注意，此代码未经测试，尽管与我过去使用的代码非常相似。

# java - 将 JTree 添加到 JScrollPane 时，JTree expandPath 不起作用

> ID：12664829
> 
> 赞同：0
> 
> 时间：2012-09-30T20:25:12.367
> 
> 标签：java, swing, jtree

我对 JTree 的扩展有奇怪的问题。我尝试将 JTree 添加到 JScrollPane。
树应该恢复到展开状态，但它不起作用 - 树已折叠。
这里的代码：

```
 if (expansionState != null) {
        while (expansionState.hasMoreElements()) {
            TreePath treePath = (TreePath) expansionState.nextElement();
             tree.expandPath(treePath);
        }
    }

    m_Scroll = new JScrollPane(tree);
    m_Scroll.setBounds(100, 100, 800, 200);
    mainFrame.getContentPane().add(m_Scroll);
    mainFrame.revalidate(); 
```

当我将 JTree 直接添加到没有 JScrollPane 的框架时，它工作正常，这里的代码：

```
 if (expansionState != null) {
    while (expansionState.hasMoreElements()) {
        TreePath treePath = (TreePath) expansionState.nextElement();
         tree.expandPath(treePath);
    }
}

    //m_Scroll = new JScrollPane(tree);
    tree.setBounds(100, 100, 800, 200);
    mainFrame.getContentPane().add(tree);
    mainFrame.revalidate(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T23:02:33.193

由于未显示捕获扩展状态的代码，因此以下可能只是一个疯狂的猜测。假设`expansionState`存在`Enumeration`这样一种情况，即您已经枚举了它的所有元素一次，到达了它的末尾，现在`hasMoreElements()`总是返回 false。因此，您无法恢复状态。

考虑以下演示，该演示说明了类似的条件，但在展开后重新捕获了展开状态。或者，您可以将扩展状态缓存到一个`List`或类似的集合中。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Enumeration;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;

public class TestTree {
    private Enumeration<TreePath> expansionState;

    public TestTree() {
        JFrame frame = new JFrame("TestTree");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);

        final JTree tree = new JTree(buildDemoModel());

        JPanel buttonsPanel = new JPanel();

        JButton saveButton = new JButton("Capture state");
        saveButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                expansionState = saveExpansionState(tree);
            }
        });

        JButton loadButton = new JButton("Load state");
        loadButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                loadExpansionState(tree, expansionState);
                //recapture the expansion state
                expansionState = saveExpansionState(tree);
            }

        });

        buttonsPanel.add(saveButton);
        buttonsPanel.add(loadButton);

        JPanel content = new JPanel(new BorderLayout());
        content.add(buttonsPanel, BorderLayout.SOUTH);
        content.add(new JScrollPane(tree), BorderLayout.CENTER);

        frame.add(content);
        frame.pack();
        frame.setVisible(true);
    }

    public static Enumeration<TreePath> saveExpansionState(JTree tree) {
        return tree.getExpandedDescendants(new TreePath(tree.getModel().getRoot()));
    }

    public static void loadExpansionState(JTree tree, Enumeration<TreePath> enumeration) {
        if (enumeration != null) {
            while (enumeration.hasMoreElements()) {
                TreePath treePath = enumeration.nextElement();
                tree.expandPath(treePath);
            }
        }
    }

    public static DefaultTreeModel buildDemoModel() {
        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");

        DefaultMutableTreeNode childNode = new DefaultMutableTreeNode("A");
        childNode.add(new DefaultMutableTreeNode("A1"));
        childNode.add(new DefaultMutableTreeNode("A2"));
        root.add(childNode);

        childNode = new DefaultMutableTreeNode("B");
        childNode.add(new DefaultMutableTreeNode("B1"));
        childNode.add(new DefaultMutableTreeNode("B2"));
        root.add(childNode);

        return new DefaultTreeModel(root);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestTree();
            }
        });
    }

} 
```

# database - 数据库原子性一致性

> ID：12664837
> 
> 赞同：19
> 
> 时间：2012-09-30T20:25:42.970
> 
> 标签：database, acid

原子性和一致性有什么区别？在我看来，两者都在用不同的词说同样的话。

原子性

事务的所有任务都已执行或都不执行。没有部分交易。例如，如果一个事务开始更新 100 行，但在 20 次更新后系统失败，则数据库回滚对这 20 行的更改。

一致性

事务将数据库从一种一致状态变为另一种一致状态。例如，在借记储蓄账户并贷记支票账户的银行交易中，失败不得导致数据库仅贷记一个账户，否则会导致数据不一致。

并且看起来原子性是一致性的子集，那么它应该是 cid(conistency,isolation,duribility) ，没有原子性

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T20:35:38.743

原子性确实是说每个事务要么全有要么全无，这意味着它的所有操作都被执行或不执行，并且没有部分操作。

但是，一致性谈论确保任何事务都将数据库从一种有效状态带到另一种有效状态。写入数据库的任何数据都必须根据所有定义的规则有效，包括但不限于约束、级联、触发器及其任何组合 [（取自维基百科）](http://en.wikipedia.org/wiki/ACID#Consistency)。这基本上意味着只将有效状态写入数据库，并且如果事务不违反数据一致性，则将执行该事务，否则将回滚。

希望它能为你解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-22T14:44:04.083

简单解释为了**一致性**：如果数据库中的字段类型是整数，它应该只接受整数值而不接受其他类型。如果你想在这个字段中存储其他类型，就会违反一致性。在这种情况下，事务将回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T09:11:01.637

****原子性**：**
一组语句仅以 100 条语句为例，这些语句也可以是插入语句，如果任何一条语句在处理过程中失败，则应恢复剩余语句，这意味着数据库应返回原始状态。

```
autocommit = false

try{
   statement one ;
   statement two ;
   statement three;
}
catch (){rollback;}
finally(){commit;} 
```

**一致性：** 如果您尝试将日期插入需要满足约束的数据库，级联，触发器就像您尝试将数据插入数据库但表具有主键约束，因此您计划插入的数据应该满足主要关键约束。

**隔离：** 如果两个进程在数据库上运行，假设一个正在读取，另一个正在将数据写入数据库。读取线程应该只读取提交的数据，不应该是内存中的数据

**持久** 性：一旦事务数据提交到数据库应该是同一阶段，它不应该影响电源故障或系统崩溃任何其他

# actionscript-3 - 在 Adob e Flex 中动态创建菜单？

> ID：12664840
> 
> 赞同：2
> 
> 时间：2012-09-30T20:25:57.467
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flash-builder

我有一个 Flex 应用程序，需要以编程方式生成一个菜单，它将非常复杂和动态。这样做的最佳技术是什么？

更新：我已经使用 RIAstar 建议的菜单项和子属性的对象测试了下面的代码。这是有效的，除了我没有看到“输入”菜单，它似乎被绕过了。我看到的是：

![截屏](../Images/a309d5bcf94dafd27ece0e22335d275c.png)

我期待“添加->输入->设备{0..8}”。

感谢您的任何想法，弗雷德。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Menu;
        protected function button1_clickHandler(event:MouseEvent):void
        {
            var toplevelMenu:Object = new Object();
            toplevelMenu.label = "Top Level";
            var addMenu:Object = new Object();
            addMenu.label = "Add";
            toplevelMenu.children = addMenu;

            var inputMenu:Object = new Object();
            inputMenu.label = "Input";

            var inputDevicesMenu:ArrayCollection = new ArrayCollection();
            for (var i:int = 0;i < 10;i++) {
                if ((i % 2) == 0) {
                    var inputDeviceMenu:Object = new Object();
                    inputDeviceMenu.label = "Device " + i;
                    inputDevicesMenu.addItem(inputDeviceMenu);
                }
            }
            if (inputDevicesMenu.length > 0) {
                inputMenu.children = inputDevicesMenu;
            }
            addMenu.children = [inputMenu];

            var menu:Menu = Menu.createMenu(this, toplevelMenu, false);
            menu.show(event.stageX, event.stageY);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Button x="56" y="28" label="Show Menu" click="button1_clickHandler(event)"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:20:10.993

根据 RIAstar 的建议和您的代码，我对 button1_clickHandler 函数进行了一些修改：-

更新了函数 button1_clickHandler 中的代码：-

```
protected function button1_clickHandler(event:MouseEvent):void
            {
                var addMenu:Object = new Object();
                addMenu.label = "Add";

                var inputMenu:Object = new Object();
                inputMenu.label = "Input";

                var outputMenu:Object = new Object();
                outputMenu.label = "Output";

                var inputOutputDevicesMenu:ArrayCollection = new ArrayCollection();
                inputOutputDevicesMenu.addItem(outputMenu);
                inputOutputDevicesMenu.addItem(inputMenu);

                addMenu.children = inputOutputDevicesMenu;

                var inputDevicesMenu:ArrayCollection = new ArrayCollection();
                for (var i:int = 0;i < 10;i++) {
                    if ((i % 2) == 0) {
                        var inputDeviceMenu:Object = new Object();
                        inputDeviceMenu.label = "Device " + i;
                        inputDevicesMenu.addItem(inputDeviceMenu);
                    }
                }
                if (inputDevicesMenu.length > 0) {
                    inputMenu.children = inputDevicesMenu;
                }

                var menu:Menu = Menu.createMenu(this, addMenu, true);
                menu.show(event.stageX, event.stageY);
            } 
```

希望这可能有助于获得一些想法......

# android - GCMIntentService onMessage 触发时如何播放声音文件？

> ID：12664845
> 
> 赞同：3
> 
> 时间：2012-09-30T20:26:29.040
> 
> 标签：android, android-mediaplayer, google-cloud-messaging

在我的应用程序中，我使用 GCM 服务。我想在 onMessage 函数中发出哔声或播放一个小的 mp3 文件。

我的 GCMIntentService 是从 GCMBaseIntentService 扩展而来的。

有人可以分享代码或建议我如何实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:32:54.487

你可以使用：

```
Notification notification = new Notification(icon, title, when);
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notification.defaults |= Notification.DEFAULT_SOUND; // To play default notification sound
notification.sound = Uri.parse("PATH_TO_YOUR_SOUND_FILE"); // to play custom notification sound
NotificationManager nm = (NotificationManager)   getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify(System.currentTimeMillis(), notification); 
```

# bind - 如何检查事件处理程序是否已绑定到元素？

> ID：12664848
> 
> 赞同：3
> 
> 时间：2012-09-30T20:26:58.933
> 
> 标签：bind, jquery

我正在使用 jQuery 将事件处理程序绑定到元素，但也许还有一种方法可以使用普通 JavaScript 进行检查......

如果我使用如下所示的代码，有没有办法测试元素是否已经添加了事件处理程序？当我再次运行该函数（以更新 img src）时，事件被第二次绑定，然后下一次绑定第三次，等等。最简单的方法是什么？

```
$(window["tdImg_"+i]).add(window["tdImgSize_"+i]).bind('click', toggleImageSize); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:33:00.790

这是一个解决方案：

```
$(window["tdImg_"+i]).each(function(){
    if(!this.boundToggleImageSize){
        $(this).bind('click', toggleImageSize);
        this.boundToggleImageSize = true;
    }
}); 
```

这样，您不必取消绑定所有点击事件（如果您在相同元素上有不同的绑定函数）。

**编辑**

正如[**millimoose**](https://stackoverflow.com/users/41655/millimoose)在评论中所建议的那样：

```
$(window["tdImg_"+i]).each(function(){
    if(!$(this).data("boundToggleImageSize")){
        $(this).bind('click', toggleImageSize);
        $(this).data("boundToggleImageSize",true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:31:57.277

最简单的方法是`unbind`事件并再次`bind`重新进行：

```
$(window["tdImg_"+i]).add(window["tdImgSize_"+i]).unbind('click').bind('click', toggleImageSize); 
```

否则，您必须使用 访问`events`数据，`$(el).data("events")`并手动检测事件是否已绑定。另请注意，此方法不包括`inline`事件处理程序。

# android - ksoap 会话网络服务

> ID：12664849
> 
> 赞同：1
> 
> 时间：2012-09-30T20:27:12.910
> 
> 标签：android, android-ksoap2

如何使用 ksoap 维护会话状态？我需要一种从 asp.net Web 服务接收和发送唯一 SessionID 的方法。

所以我写了一个简单的网络服务，但结果总是 1....

```
[ScriptMethod]
[WebMethod(EnableSession = true)]
public string Calculate()
{
    if (Session["example"] == null) { Session["example"] = 0; }
    int r = Convert.ToInt32(Session["example"]);
    r = r + 1;
    Session["example"] = r;
    return Session["example"].ToString();   
} 
```

我知道我需要以某种方式从服务器发回的 cookie 中获取 SessionID，并在每次新调用服务时使用它，但不知道该怎么做。我从 Android 应用程序拨打电话

# sql - 发布到表时出错

> ID：12664851
> 
> 赞同：0
> 
> 时间：2012-09-30T20:27:58.010
> 
> 标签：sql

使用平台：

SQL Server 2008 和 C++ 生成器

我正在两个表之间进行内部连接，这给了我一个错误：

> *找不到要更新的行*

询问：

```
SELECT DISTINCT  
    b.Acc, b.Region, b.Off, b.Sale, a.OrgDate
FROM 
    sales b
INNER JOIN 
    dates a ON (a.Acc = b.Acc and a.Region = b.Region and a.year= b.year)
WHERE
    (a.xdate <> a.yDate)
    and (b.Sale = a.SaleDate)
    and b.year = 2010 
```

注意：`Acc`, `Region`,`Off`是表 b 的主键，也存在于表 a 中。

表 a 有一个 id，它是查询中没有出现的主键。

事实证明，我的内部联接正在返回重复的行。

我将内部联接查询更改为使用“DISTINCT”，以便只返回不同的行而不是重复的。查询运行，但随后出现错误：

> *用于更新或刷新的键列信息不足。*

事实证明，表 A 中的主键字段与表 B 中的字段名称相同

我发现这是在更新 ADO 记录集时发生的错误。BUG：当连接表共享相同的列名时更新 ADO 分层记录集出现问题

我有以下两个问题：

1.  在内部联接查询上使用 Distinct 不是一个好主意吗？
2.  有没有人找到与 TADO 查询相关的错误的解决方案？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:33:18.423

我解决这个问题的方法是手动构建一个更新查询并通过 TADOQuery.ExecSQL 运行它。这假设您实际上知道自己在做什么。

问题是您为什么要处理在所有字段上导致同一行的倍数的记录集？您应该检查您的查询并修复它。DISTINCT 没有帮助，因为 SQL Server 选择了一条记录，但 ADO 不知道它选择了哪一条，因为没有*足够的*信息来正确识别 JOIN 每一侧的源。

* * *

此查询`a.id`用于使源记录可识别：

```
SELECT Acc,Region,Off,Sale,OrgDate,id
  FROM
(
SELECT b.Acc,b.Region,b.Off,b.Sale,a.OrgDate, a.id,
       rn=row_number() over (partition by b.Acc,b.Region,b.Off order by a.id asc)
  FROM sales b
  JOIN dates a ON(a.Acc = b.Acc and a.Region = b.Region and a.year= b.year)
 WHERE a.xdate <> a.yDate
   and b.Sale = a.SaleDate
   and b.year = 2010
) X
 WHERE rn=1; 
```

未经测试，但它应该适用于 ADO

# ruby-on-rails - 如何使 partial_counter 与分页一起工作

> ID：12664854
> 
> 赞同：0
> 
> 时间：2012-09-30T20:28:29.520
> 
> 标签：ruby-on-rails, pagination

我有一个博客应用程序，其中用户有很多帖子。我正在使用 Booststrap 进行分页。如何使 partial_count 方法与分页一起使用？目前，计数在每一页上重置，而不是跨页结转。

**post_controller.rb**

```
def index
  @posts = Post.order("created_at desc").paginate(page: params[:page], :per_page => 12)
end 
```

**意见/帖子/index.html.erb**

```
<%= render @posts %>
<%= will_paginate %> 
```

**意见/帖子/_post.html.erb**

```
<%= post_counter +1%>
<%= post.name %> 
```

计数器在第一页上工作正常。但是，所有后续页面也以“1”开头。如何使后续页面以 (页数 * 12 + 1) 开头？

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:23:32.497

用于`@posts.offset`获得正确的计数器初始化。

# activex - 如何使用数据源选择烛台的高值

> ID：12664855
> 
> 赞同：0
> 
> 时间：2012-09-30T20:28:51.503
> 
> 标签：activex, teechart

我总是将代码视为`datasource="series0"`.

如果`series(0)`是烛台并且我想使用烛台的`Highvalues`或`Closevalues`，那么我如何选择该数据？类似的东西`datasource="series0.Highvalues"?`（值得注意的是，我使用 teechart2011 Eval 和 VB6）。

如果`series(1)`是财务功能`ExpMovAvg`，如何`ExpMovAvg`用代码定义行宽？

同样，如何将`Closevalues`in`Series(0)`用于此功能？不仅仅是`datasource="series0"`。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:21:11.853

> 我总是将代码视为 datasource="series0"，如果 series(0) 是烛台并且我想使用烛台的 Highvalues 或 Closevalues，如何选择该数据？数据源="series0.Highvalues"？（我使用 teechart2011 Eval 和 VB6）

这里有一个简单的 VB6 示例。您可以将蜡烛系列（开盘、收盘、高点、低点）中的 4 个值列表中的任何一个分配给具有以下`MandatoryValueList.ValueSource`属性的函数使用：

```
 TChart1.AddSeries scCandle
  TChart1.Series(0).FillSampleValues

  TChart1.AddSeries scLine
  TChart1.Series(1).SetFunction tfExpMovAvg
  TChart1.Series(1).DataSource = TChart1.Series(0)
  TChart1.Series(1).MandatoryValueList.ValueSource = "Close" '"Open" "High" "Low" 
```

> 如果 series(1) 是财务函数 ExpMovAvg，如何用代码定义 ExpMovAvg 行的宽度？

`Pen.Width`您可以按如下方式设置系列的属性：

```
 TChart1.Series(1).Pen.Width = 2 
```

> 同样，如何将 Series(0) 中的 Closevalues 用于此功能？不仅仅是datasource="series0"，谢谢！

这和上面一样，不是吗？

# python - Django 自定义注册字段

> ID：12664857
> 
> 赞同：3
> 
> 时间：2012-09-30T20:29:28.397
> 
> 标签：python, django, registration, django-registration

对于将自定义字段添加到 django-registration 注册表单/流程这一看似简单的问题，我对提供的答案范围越来越感到困惑。这应该是该软件包的默认记录方面（听起来不是忘恩负义，只是因为它是一个装备精良的软件包），但该问题的解决方案令人眼花缭乱。

谁能给我最简单的解决方案来获取默认注册注册页面中包含的 UserProfile 模型数据？

**更新：**

我最终使用了 Django Registration 自己的信号来给我这个 hacky 修复。它特别难看，因为我不得不`try`在处理我的布尔值的 POST 属性上使用，因为我发现如果复选框留空，则不会返回任何内容。

将不胜感激有关改进这一点或最佳实践的任何建议。

我的应用程序/models.py

```
from registration.signals import user_registered
from django.dispatch import receiver

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    event_commitments = models.ManyToManyField(Event, null=True, blank=True)
    receive_email = models.BooleanField(default=True)

@receiver(user_registered)
def registration_active_receive_email(sender, user, request, **kwargs):
    user_id = user.userprofile.id
    user = UserProfile.objects.get(pk=user_id)

    try:
        if request.POST['receive_email']:
            pass
    except:
        user.receive_email = False
        user.save() 
```

注册应用程序/forms.py

```
class RegistrationForm(forms.Form):

    # default fields here, followed by my custom field below

    receive_email = forms.BooleanField(initial=True, required=False) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:32:16.733

你所拥有的看起来像是一种可行的方法。

我查看了 django-registration 代码，并根据注册视图中的以下评论提出了另一个解决方案。我不完全确定这是否更清洁，但如果您不喜欢信号，这很好。如果您打算进行更多自定义，这也提供了一个更容易的途径。

```
# from registration.views.register:
"""
...
2\. The form to use for account registration will be obtained by
   calling the backend's ``get_form_class()`` method, passing the
   ``HttpRequest``. To override this, see the list of optional
   arguments for this view (below).

3\. If valid, the form's ``cleaned_data`` will be passed (as
   keyword arguments, and along with the ``HttpRequest``) to the
   backend's ``register()`` method, which should return the new
   ``User`` object.
...
""" 
```

您可以创建一个自定义后端并覆盖那些提到的方法：

```
# extend the provided form to get those fields and the validation for free
class CustomRegistrationForm(registration.forms.RegistrationForm):
    receive_email = forms.BooleanField(initial=True, required=False)

# again, extend the default backend to get most of the functionality for free
class RegistrationBackend(registration.backends.default.DefaultBackend):

    # provide your custom form to the registration view
    def get_form_class(self, request):
        return CustomRegistrationForm

    # replace what you're doing in the signal handler here
    def register(self, request, **kwargs):
        new_user = super(RegistrationBackend, self).register(request, **kwargs)
        # do your profile stuff here
        # the form's cleaned_data is available as kwargs to this method
        profile = new_user.userprofile
        # use .get as a more concise alternative to try/except around [] access
        profile.receive_email = kwargs.get('receive_email', False)
        profile.save()
        return new_user 
```

要使用自定义后端，您可以提供单独的 url。在包含默认 URL 之前，请编写 2 个指向您的自定义后端的 conf。Url 按照定义的顺序进行测试，因此如果您在包含默认值之前定义这两个，则这两个将在测试默认值之前捕获。

```
url(r'^accounts/activate/(?P<activation_key>\w+)/$',
    activate,
    {'backend': 'my.app.RegistrationBackend'},
    name='registration_activate'),
url(r'^accounts/register/$',
    register,
    {'backend': 'my.app.RegistrationBackend'},
    name='registration_register'),

url(r'^accounts/', include('registration.backends.default.urls')), 
```

文档实际上描述了所有这些，但它们并不是特别易于访问（没有阅读文档）。它们都包含在项目中，我在[这里](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/docs)浏览它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:46:54.967

我最终使用了 Django Registration 自己的信号来解决这个问题。

我会在某个时候清理 try/except 流程。dokkaebi 在上面还指出，当复选框为空时，我可能能够评估 request.GET 参数。

我的应用程序/models.py

```
from registration.signals import user_registered
from django.dispatch import receiver

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    event_commitments = models.ManyToManyField(Event, null=True, blank=True)
    receive_email = models.BooleanField(default=True)

@receiver(user_registered)
def registration_active_receive_email(sender, user, request, **kwargs):
    user_id = user.userprofile.id
    user = UserProfile.objects.get(pk=user_id)

    try:
        if request.POST['receive_email']:
            pass
    except:
        user.receive_email = False
        user.save() 
```

注册应用程序/forms.py

```
class RegistrationForm(forms.Form):

    # default fields here, followed by my custom field below

    receive_email = forms.BooleanField(initial=True, required=False) 
```

# c++ - eof 位：读取失败之前还是之后？

> ID：12664861
> 
> 赞同：3
> 
> 时间：2012-09-30T20:30:25.423
> 
> 标签：c++, io, stream, ifstream, eof

我目前为一些 IO 操作编写了一个类。一些函数返回 IO 操作是否成功。如果我正在读取一个文件，我想知道是否应该返回`std::ifstream::good()`或`!std::ifstream::fail()`指示 IO 操作是否成功。

差异来自`eof`位，我不确定我是否正确理解它。

假设我有一个包含 4 个字节（1 个整数）的二进制文件。

假设我读取了这个整数。

我的问题是：`eof`在此操作之后还是在下一次 IO 操作之后设置标志（这将失败）？

如果在此操作后直接设置，如果我的读取函数返回`std::ifstream::good()`，则结果将是`false`（但整数被正确读取）。

你能解释我什么时候设置了 eof 位，我应该在我的函数结束时返回什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:41:57.620

EOF 标志*在*您尝试读取流的末尾后设置。

您的函数应该返回对原始流的引用，并且应该在循环或条件中使用它，如下所示：

```
std::istream & process(std::istream & is)
{
    int n;
    if (is >> n) { std::cout << "Read one int: " << n << "\n"; }
    return is;
}

int main()
{
    std::ifstread infile("data.bin");

    while (process(infile)) { }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T21:08:46.493

当读取操作尝试读取超出流的末尾时，会设置流的“eof”位。读取超出流末尾的读取操作可能成功，也可能不成功。这与是否设置了“eof”位无关。

出于这个原因，您应该始终检查读取操作本身的结果，而不是在读取后检查流标志的状态。

对于所有四种组合的示例：

```
#include <iostream>
#include <istream>

int main()
{
        int n;
        if (std::cin >> n)
                std::cout << "read an int with value = " << n << '\n';
        else
                std::cout << "read of int failed\n";

        std::cout << "cin.eof() = " << std::cin.eof() << '\n';
        return 0;
} 
```

设置 eof 位的成功读取：

```
$ printf 1 | ./a.out
read an int with value = 1
cin.eof() = 1 
```

未设置 eof 位的成功读取：

```
$ echo 1 | ./a.out
read an int with value = 1
cin.eof() = 0 
```

未设置 eof 位的不成功读取：

```
$ printf abc | ./a.out
read of int failed
cin.eof() = 0 
```

设置 eof 位的不成功读取：

```
$ echo | ./a.out
read of int failed
cin.eof() = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:31:53.267

eof 标志设置为“在下一次 IO 操作（将失败）之后”。您应该`std::ifstream::good()`在读取操作后返回，该操作告诉您是否设置了任何错误标志。

# c# - 将值从一页传递到另一页并更新

> ID：12664864
> 
> 赞同：0
> 
> 时间：2012-09-30T20:30:53.467
> 
> 标签：c#, asp.net, gridview

我有 2 页，第 1 页包括`gridview`并且我制作了一个`linkbutton`将 ID 传递到另一页（第 2 页）的页面。在第 2 页上，我填写了 10 个`textbox`es，并且我有一个用于编辑信息的按钮。

此代码适用于第 1 页：

```
...
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="lbNextPage" runat="server" 
                    PostBackUrl='<%# "~/secure/upst.aspx?id="+ Eval("ID_st") %>'>edit</asp:LinkButton>
                &nbsp;
            </ItemTemplate>
        </asp:TemplateField> 
```

...

这是第 2 页的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        txtID.Text = Request.QueryString["id"].ToString();
    }
    SqlConnection con = new SqlConnection(strcon);
    string query = "select * from user_st where ID_st = @id";
    SqlCommand cmd = new SqlCommand(query, con);
        cmd.Parameters.AddWithValue("@id", stid);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();

        txtName.Text = dr["name"].ToString();
        txtFamily.Text = dr["family"].ToString();
        txtAddress.Text = dr["adres"].ToString();
        txtHomeTel.Text = dr["home_tel"].ToString();
        txtTahsilat.Text = dr["tahsilat"].ToString();
        txtTel.Text = dr["celphone"].ToString();
        txtEmail.Text = dr["email"].ToString();
        txtShoghl.Text = dr["shoghl"].ToString();
        txtAge.Text = dr["age"].ToString();
        txtFadername.Text = dr["fader_name"].ToString();
        txtIDnumber.Text = dr["melli_code"].ToString();
        txtShSh.Text = dr["sh_sh"].ToString();

} 

protected void btnOk_Click(object sender, EventArgs e)
{

    Boolean res = false;
    SqlConnection conn = new SqlConnection(strcon);

    string famil = txtFamily.Text;
    string name = txtName.Text;
    string fader = txtFadername.Text;
    string tahsil = txtTahsilat.Text;
    Double telhome = Convert.ToDouble(txtHomeTel.Text);
    string adres = txtAddress.Text;
    Double cel = Convert.ToDouble(txtTel.Text);
    string email = txtEmail.Text;
    Double shsh = Convert.ToDouble(txtIDnumber.Text);
    string shoghl = txtShoghl.Text;
    int age = Convert.ToInt32(txtAge.Text);
    Double melli = Convert.ToDouble(txtIDnumber.Text);
    int id = Convert.ToInt32(txtID.Text);

    string query = "update user_st set name=@name ,fader_name=@fader ,family=@famil,tahsilat=@tahsil,adres=@adres,home_tel=@telhome,celphone=@cel,email=@email ,sh_sh=@shsh,shoghl=@shoghl,age=@age,melli_code=@melli where ID_st=@id";

    SqlCommand cmdup = new SqlCommand(query, conn);
    cmdup.Parameters.AddWithValue("@name",name);
    cmdup.Parameters.AddWithValue("@fader_name",fader );
    cmdup.Parameters.AddWithValue("@family", famil);
    cmdup.Parameters.AddWithValue("@tahsilat",tahsil);
    cmdup.Parameters.AddWithValue("@adres", adres);
    cmdup.Parameters.AddWithValue("home_tel",telhome );
    cmdup.Parameters.AddWithValue("@celphone",cel );
    cmdup.Parameters.AddWithValue("@email", email);
    cmdup.Parameters.AddWithValue("@sh_sh", shsh);
    cmdup.Parameters.AddWithValue("@shoghl", shoghl);
    cmdup.Parameters.AddWithValue("@age",age );
    cmdup.Parameters.AddWithValue("@melli_code", melli);
    cmdup.Parameters.AddWithValue("@id", id);

    try
    {
        conn.Open();
        cmdup.ExecuteNonQuery();
        conn.Close();
        res = true;
    }
    catch (SqlException ex)
    {
        lblRes.Text = "error" + ex.ToString();
    }

    if (res)
    {
        lblResult.Text = "Ok";
    } 
```

那是行不通的，我试过这个：

```
 //cmdup.Parameters.Add("@name", SqlDbType.NVarChar, 50).Value = txtName.Text;
    //cmdup.Parameters.Add("@fader_name", SqlDbType.NVarChar, 50).Value = txtFadername.Text;
    //cmdup.Parameters.Add("@family", SqlDbType.NVarChar, 50).Value = txtFamily.Text;
    //cmdup.Parameters.Add("@tahsilat", SqlDbType.NVarChar, 50).Value = txtTahsilat.Text;
    //cmdup.Parameters.Add("@adres", SqlDbType.NVarChar, 150).Value = txtAddress.Text;
    //cmdup.Parameters.Add("home_tel", SqlDbType.Char, 10).Value = txtHomeTel.Text;
    //cmdup.Parameters.Add("@celphone", SqlDbType.Char, 10).Value = txtTel.Text;
    //cmdup.Parameters.Add("@email", SqlDbType.VarChar).Value = txtEmail.Text;
    //cmdup.Parameters.Add("@sh_sh", SqlDbType.Char, 10).Value = txtShSh.Text;
    //cmdup.Parameters.Add("@shoghl", SqlDbType.NVarChar, 50).Value = txtShoghl.Text;
    //cmdup.Parameters.Add("@age", SqlDbType.Int).Value = txtAge.Text;
    //cmdup.Parameters.Add("@melli_code", SqlDbType.Char, 10).Value = txtIDnumber.Text;
    //cmdup.Parameters.Add("@id", SqlDbType.Int).Value = txtID.Text; 
```

或这个 ：

```
 //SqlCommand cmdup = new SqlCommand("EXEC up_st'" + txtName.Text. + "' , '" + txtFamily.Text + "' , '" + txtTahsilat.Text +"' , '" + txtAddress.Text + "' , '" 
    //                                   + txtHomeTel.Text + "' , '" + txtTel.Text + "' , '" + txtEmail.Text + "' , '" + txtShoghl.Text + "' , '"
    //                                   + txtAge.Text + "' , '" + txtFadername.Text + "' , '" + txtIDnumber.Text + "' , '" + txtShSh.Text + "' , '" 
    //                                   + txtID.Text + "'", conn); 
```

或这个 ：

```
 /*"update user_st set name='" + txtName.Text + "',fader_name='" + txtFadername.Text + "',family='" + txtFamily.Text + "',tahsilat='" + txtTahsilat.Text + "',adres='" + txtAddress.Text + "',home_tel='" + txtHomeTel.Text + "',celphone='" 
        + txtTel.Text + "',email='" + txtEmail.Text + "',sh_sh='" +                      txtShSh.Text + "',shoghl='" + txtShoghl.Text + "',age='" + txtAge.Text + "',melli_code='" + txtIDnumber.Text + "' where ID_st=" + txtID.Text*/ 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:53:16.440

您需要将初始 Sql 选择移动到 !IsPostback 块中，因为您正在回发更新，但 Page_Load 在文本框更新之前触发。所以一切都在你的初始代码中工作，你只是用初始信息更新它。试试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        txtID.Text = Request.QueryString["id"].ToString();
        SqlConnection con = new SqlConnection(strcon);
        string query = "select * from user_st where ID_st = @id";
        SqlCommand cmd = new SqlCommand(query, con);
        cmd.Parameters.AddWithValue("@id", stid);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();

        txtName.Text = dr["name"].ToString();
        txtFamily.Text = dr["family"].ToString();
        txtAddress.Text = dr["adres"].ToString();
        txtHomeTel.Text = dr["home_tel"].ToString();
        txtTahsilat.Text = dr["tahsilat"].ToString();
        txtTel.Text = dr["celphone"].ToString();
        txtEmail.Text = dr["email"].ToString();
        txtShoghl.Text = dr["shoghl"].ToString();
        txtAge.Text = dr["age"].ToString();
        txtFadername.Text = dr["fader_name"].ToString();
        txtIDnumber.Text = dr["melli_code"].ToString();
        txtShSh.Text = dr["sh_sh"].ToString();
    }
} 
```

如果你真的想从数据库中重新加载东西，你可以将该查询弹出到一个函数中，然后在按钮单击函数中的按钮单击更新后重新运行它（最后），但实际上没有理由，因为文本框已经有相同的信息。

# c# - 将来自 SerialPort.ReadExisting() 方法的数据存储在变量中？

> ID：12664873
> 
> 赞同：1
> 
> 时间：2012-09-30T20:31:29.617
> 
> 标签：c#, serial-port

我想从连接到 SerialPort 的设备中读取信息。我之前使用表单（下面的代码）完成了此操作，但我试图在没有表单的情况下执行此操作，只是将信息存储到字符串数组中。

与表单一起使用的代码：

```
private void serialPort1_DataReceived(object sender,  System.IO.Ports.SerialDataReceivedEventArgs e)
            {
                string line = port.ReadExisting();              
                this.BeginInvoke(new LineReceivedEvent(LineReceived), line);
            }

        private delegate void LineReceivedEvent(string line);
        private void LineReceived(string line)
        {
            textBox3.AppendText(line);
        } 
```

没有表格我能走多远（DA方法允许在程序中存储变量）。我在最后一行收到以下错误`Cannot implicitly convert type 'string' to 'System.IO.Ports.SerialDataReceivedEventHandler'`。

```
protected override void SolveInstance(IGH_DataAccess DA)
  {
    string selectedportname;
    DA.GetData(1, ref selectedportname);
    int selectedbaudrate;
    DA.GetData(2, ref selectedbaudrate);
    bool connecttodevice;
    DA.GetData(3, ref connecttodevice);
    bool sendtoprint;
    DA.GetData(3, ref sendtoprint);

    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); //Create the serial port
    port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)
    port.Open();             //Open the port
    port.DataReceived += port.ReadExisting();                                             

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:41:55.923

假设`ReadExisting`是一个具有正确参数的方法：

```
//port.DataReceived += port.ReadExisting();   
  port.DataReceived += port.ReadExisting; 
```

但错误表明它正在返回一个“字符串”，因此这里还有更多需要解决的问题。

## 编辑：

看起来应该是：

```
 port.DataReceived += this.serialPort1_DataReceived; 
```

# windows - Netbeans 更新失败

> ID：12664874
> 
> 赞同：4
> 
> 时间：2012-09-30T20:31:36.357
> 
> 标签：windows, netbeans, netbeans-7

我的互联网连接没有问题。但是，当我尝试更新 netbeans 插件或 IDE 本身时，每次都会出现此屏幕。

![窗口标题](../Images/d9d586849dd53ea2d8ca479fe82dbb34.png)

即使操作系统重新安装也不能解决这个问题。一次又一次地得到同样的错误。我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-03-21T12:25:10.080

**在 Netbeans**

去

> 1.  工具->插件->设置

和

> 2.  添加一个新的或将“JAX-RPC”的 URL 更改为下面提到的
> 
> 网址：[http ://bits.netbeans.org/dev/nbms-and-javadoc/lastSuccessfulBuild/artifact/nbbuild/nbms/updates.xml.gz](http://bits.netbeans.org/dev/nbms-and-javadoc/lastSuccessfulBuild/artifact/nbbuild/nbms/updates.xml.gz)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-17T18:24:23.027

Netbeans 8.0.2/Tools/Plugins/Settings....发现了一个错误的 url 即 URL： http: [//netbeans.i2m.dk/updates.xml](http://netbeans.i2m.dk/updates.xml)

取消选中“I2M 更新中心”的活动列，“检查更新”现在可以工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-20T04:14:22.937

我已经尝试了所有解决方案，但没有一个对我有用，但是……有些东西做到了。

**我将Tool > Plugins > Settings**中的每个 url从**http**更改为**https**。

例子：

```
Name: Certified Plugins
URL: http://updates.netbeans.org/netbeans/updates/8.0.2/uc/final/certified/catalog.xml.gz 
```

至：

```
Name: Certified Plugins
URL: https://updates.netbeans.org/netbeans/updates/8.0.2/uc/final/certified/catalog.xml.gz 
```

最后我可以更新我的插件并获取最新插件列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T10:04:39.357

你在代理后面吗？如果是，您可以在以下位置更改设置**`Tools -> Options -> General (Proxy Settings)`**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-10T19:32:10.947

检查您的 Netbeans 日志 - messages.log 文件 - 了解错误的详细信息！

文件的示例位置：

Linux：~/.netbeans/7.3/var/log/messages.log

Windows：c:\Users\USERNAME\AppData\Roaming\NetBeans\7.3\var\log\

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T06:14:50.350

你在使用防火墙吗？可能是您的防火墙阻止了它，

尝试检查被阻止的应用程序。

**更新**

可能是的，因为卡巴斯基大部分时间会在不通知的情况下阻止或意外地被阻止。所以最好尝试在 kasperksy 中检查被阻止的应用程序列表。检查此链接可能会帮助您解决：

[http://support.kaspersky.com/faq/?qid=208285204](http://support.kaspersky.com/faq/?qid=208285204)

[http://support.kaspersky.com/kis2012/settings/firewall?print=true&qid=208284433](http://support.kaspersky.com/kis2012/settings/firewall?print=true&qid=208284433)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-17T17:39:19.317

这可能是一个迟到的答复，但是，我今天刚刚遇到了同样的问题。我去了工具>选项>常规，然后选择“无代理”。点击“应用并确定”。我没有尝试再次更新，而是完全关闭了netbeans，重新启动它，它会自动检测更新。一切都恢复了正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-24T04:54:52.893

我知道为时已晚，但我还有另一种解决方案。

如果您在 NetBeans IDE 上找到**工具 -> 插件 -> 设置，然后取消选中****插件门户**并在**认证插件和 NetBeans 发行版**上添加**https 而不是 http**。

 **然后尝试更新。

希望它对你有用。**

# c - 内存分配后创建元数据页脚

> ID：12664892
> 
> 赞同：0
> 
> 时间：2012-09-30T20:33:45.647
> 
> 标签：c

我试图在我的 malloc 包装函数中分配一个大小为 sz 的结构，然后在该内存区域之后自动添加一个页脚以跟踪超出边界的潜在写入。

在 malloc 包装函数中：

```
malloc_result = (char *) malloc(sz+sizeof(FOOTERSTR));
...
struct metadata_record * metarec = get_metadata_record_new(sz);
...
create_footer(metarec,footer,key_address);

void create_footer(struct metadata_record *rec, char *footer, char *key_address) {
    //Add Footer

    printf("footer = %s\n",footer);
    printf("key_address = %p\n",key_address);

    char *new_footer_ptr = key_address+sizeof(key_address);
    printf("new_footer_ptr = %p\n",new_footer_ptr);

    strncpy(new_footer_ptr,footer,sizeof(footer));
    new_footer_ptr[sizeof(footer)-1] = '\0';
    printf("new_footer_ptr = %s\n",new_footer_ptr);
} 
```

当我运行它时，我得到：

```
footer = zftsfviz
key_address = 0x964ef10
new_footer_ptr = 0x964ef14
new_footer_ptr = zft 
```

我希望在将 new_footer_ptr 作为字符串打印时获得完整的页脚文本，但我只得到页脚的第一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:37:32.380

我不确定“key_address”是什么，但您应该知道 sizeof(key_address) 和 sizeof(footer) 都是 sizeof(char*) 的同义词，这可能不是您想要的。您可能想要 strlen(key_address) 和 strlen(footer) 。如果您确实需要知道分配的大小，则需要将其存储在某处并将其传递给此函数。

# php - 将php表单中的发件人电子邮件地址更改为收件人

> ID：12664897
> 
> 赞同：0
> 
> 时间：2012-09-30T20:34:39.983
> 
> 标签：php, forms, email

我正在尝试创建一个简单的 php 电子邮件表单，将提交的内容发送到指定地址，但我要解决的问题是发送电子邮件的地址 - 目前，它从 myusername@myhostingservice.com 发送，但我希望能够将其更改为简单的 no-reply@mydomain.com 或其他内容。

```
<?php 

$message = $_POST['message'];

$formcontent="$message";

$recipient = "reciever@example.com";

$subject = "question";

mail($recipient, $subject, $formcontent, $header, '-fno-reply@mydomain.com') or die("Error!");

header("Location: webpage_user_is_redirected_to.html");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:37:08.107

您可以使用邮件函数的第 5 个参数：

```
mail($recipient, $subject, $formcontent, $header, '-fno-replay@mydomain.com'); 
```

从[手册](http://php.net/manual/en/function.mail.php)：

> Additional_parameters 参数可用于将附加标志作为命令行选项传递给配置为在发送邮件时使用的程序，如 sendmail_path 配置设置所定义。例如，这可用于在使用带有 -f sendmail 选项的 sendmail 时设置信封发件人地址。

# perl - Perl 可以在动态结构中管理子程序吗？

> ID：12664906
> 
> 赞同：3
> 
> 时间：2012-09-30T20:35:56.357
> 
> 标签：perl

我有一组解析函数。其中一些我需要申请，具体取决于上下文。我可以在 Perl 中管理数组或其他东西中的函数，例如在 JS 中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T20:42:50.193

是的，Perl 和 Javascript 一样是一种函数式语言。基本上，您替换`function`并`sub`省略了函数原型。这是打印出某些内容的三个 subs 的示例：

```
my @subs = (
  sub {print "Sub 1\n"},
  sub {my ($arg) = (@_, 2); print "Sub $arg\n"},
  \&my_function
);
sub my_function {
  print "Sub 3\n"
}

foreach my $function (@subs) {
  $function->("Argument");
} 
```

印刷

```
Sub 1
Sub Argument
Sub 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:39:48.523

是的。`sub {...}`在 Perl 中就像`function () {...}`在 JavaScript 中一样。

# namespaces - Rails：URL路径修改与命名空间的好处？

> ID：12664908
> 
> 赞同：5
> 
> 时间：2012-09-30T20:36:49.433
> 
> 标签：namespaces, url-routing, ruby-on-rails-3.2

*许多人将命名空间作为一种更改 URL 的方法，该 URL 导致他们的控制器带有前缀（即：/admin/movies 而不是 /movies）*

## 更改 URL 路径

[官方文档](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)解释说，如果我们想更改带有前缀的控制器的URL，我们只需要更改 config/route.rb 中的资源。

由此 ：

```
 resources :movies 
```

对此：

```
 resources :movies, :path => "/admin/movies" 
```

## 实现命名空间

经过大量的谷歌搜索后，我想知道为什么这么多人喜欢使用命名空间以及**命名空间与仅修改指向路由器文件中特定控制器的 URL 路径相比**有何优势：myapp/config/route.rb

要实现命名空间，官方文档解释说您需要进行以下修改。**你会看到这是很多工作**：

```
 namespace :admin do
    resources :movies
  end 
```

...并将您的 movies_controller.rb 控制器移动到 app/controllers/admin 目录。

但是，如果您按照这些说明进行操作，您将收到此错误：

*“预期 /var/www/myapp/app/controllers/admin/movies_controller.rb 来定义 Admin::MoviesController”*

*然后您意识到 Rails 期望在您的 movies_controller.rb 开头出现这种“外星人”写作：“Admin::”*

因此，您将 movies_controller.rb 的第一行更改为：

```
 class admin::MoviesController < ApplicationController 
```

代替 ：

```
 class MoviesController < ApplicationController 
```

但是您再次遇到另一个错误： *“未定义的局部变量或方法'admin' for main:Object”*

然后你意识到你忘记了 Ruby 类必须以大写开头。

因此，您在 Ruby 类中添加了一个大写字母：

```
 class Admin::MoviesController < ApplicationController 
```

但你仍然得到一个错误：

*缺少模板 admin/movies/index、application/index with {:locale=>[:"fr-CH"], :formats=>[:html], :handlers=>[:erb, :builder, :rxls, :咖啡，:haml]}。在以下位置搜索：*“/var/www/myapp/app/views”*

我勒个去...？哦，文档是否也忘了说控制器的相应视图也必须移动到 app/view/ 中的管理目录？

因此，您创建一个目录并将您的视图移动到 app/view/admin/ 并且您仍然会遇到相同的错误。

然后你意识到你忘记在 app/view/admin 中包含电影文件夹本身所以你做到了。

您仍然收到错误消息：* undefined method `movies_path' for #<#:0xa817c0c>*

**这一次您知道路由、控制器和视图可以工作**，但您仍然需要更改所有视图的路径...

此外，如果您在控制器文件中使用“ **respond_with** ”方法，则必须包含命名空间作为参数。这是索引操作的示例：

```
 def index
    @movies = Movie.all
    respond_with(:admin, @movies)
  end 
```

此外，如果您使用**declarative_authentification** gem（类似于 cancan gem），则必须在您的 permited_to 的参数前面加上前缀？带有命名空间的方法。例如（使用 HAML 语法）：

```
- if permitted_to? :index, :admin_movies
  // And prefix as well your path
  = link_to 'Show all my movie", admin_movies_path

- if permitted_to? :show, :admin_movies
  // And prefix as well your path
  = link_to 'Show selected movie", admin_movie_path(@movie) 
```

**你意识到你要创建一个命名空间只是为了方便 url 路径，所以你决定放弃，回滚你的 modif，并在你的 route.rb 文件中添加以下行：**

```
 resources :movies, :path => "/admin/movies" 
```

这就像一个魅力立即起作用。

**作为测试目的**，我创建了一个新的假项目“testapp”，包括**带有生成器的命名空间**。我执行了“rails generate scaffold admin/movie title:string”来检查生成器如何处理命名空间。生成的 app/controller/admin/movies_controller.rb 与我们预期的完全不同。每个实例变量声明前都有附加前缀“Admin::”。这里例如索引方法：

```
 def index
    @admin_movies = Admin::Movie.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @admin_movies }
    end
  end 
```

我猜这是因为生成器也将模型 movie.rb 移动到了 app/models/admin 目录

此外，我看到 app/models 中有另一个模型：admin.rb 其中包含：

```
 module Admin
    def self.table_name_prefix
      'admin_'
    end
  end 
```

**我不知道这种方法将如何使用，也不知道由谁使用？**

我还注意到我的表将在 /db/migrate/2012blabla_create_admin_movies.rb 中命名为“admin_movies”

```
 class CreateAdminMovies < ActiveRecord::Migration
    def change
      create_table :admin_movies do |t|

        t.timestamps
      end
    end
  end 
```

好吧，为了建立一个命名空间，似乎会有比我预期更多的工作（和混乱）......

有什么好处/优势？？？

1.  使用另一个 url 路径？我的控制器中的这个小修改会容易得多：resources :movies, :path => "/admin/movies"
2.  为了使使用相同名称的两个不同控制器成为可能？给我的控制器名称加上前缀不是比所有这些混乱更容易吗？

当然，通过提高警惕可以避免上述一些错误。但是你知道，我们只是人类，当深夜编码时，也许你希望这部分 Rails 能够，比方说，更适合人类……

我真的不明白为什么人们对拥有命名空间如此兴奋。如果专家能解释我错过了什么，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:53:22.397

如果您有两个具有相同名称但功能不同的不同控制器，那么您可以使用命名空间路由。您不必为它重命名控制器。查看[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)上的“2.6 控制器命名空间和路由” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T23:25:09.820

这个想法不是在一个目录中拥有大量控制器。命名空间通过将控制器分组到目录中来帮助您做到这一点。

就完成所有这些工作而言，使用命名空间路径生成所需的控制器要容易得多，例如：

```
rake generate controller "Foo/Bars" 
```

然后，rails 可以完成所有繁重的工作，因此您不必这样做。

# iphone - iPhone 5 应用程序（4 英寸屏幕）

> ID：12664909
> 
> 赞同：0
> 
> 时间：2012-09-30T20:36:53.233
> 
> 标签：iphone, xcode, ios6, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我（仍在）尝试将我的一个 iPhone 应用程序转换为 iPhone 5，但它在模拟器中仍然看起来像这样......

我在做什么，为什么它不会填满整个屏幕？

![在此处输入图像描述](../Images/5d805c2f6ae854bdd8be16188f7cd4fb.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T20:39:25.713

您是否提供了 4" 大小的启动图像？这是告诉操作系统您的应用程序支持全屏的指示器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:42:58.093

您是否在 XCode iPhone 5 屏幕尺寸的 UIView 属性检查器中进行了选择？

![在此处输入图像描述](../Images/3837035019477f239df8626ab1ad24c9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:37:17.903

请查看 url， [iPhone 5 TabBar 无法正常工作](https://stackoverflow.com/questions/12569189/iphone-5-tabbar-not-functioning-in-proper-position)

现在，在xib的右侧，在“Interface Builder Document”下，勾选**使用自动布局**并在xib中修复您的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:18:13.637

1.  下载并安装 Xcode 4.5 GM。为您的应用设置 4 英寸的启动图像。这就是您获得 1136 像素屏幕高度的方式（没有它，您将获得 960 像素，顶部和底部有黑色边距）。
2.  测试您的应用程序，希望不要做任何其他事情，因为如果您正确设置了自动调整大小的蒙版，一切都会神奇地工作。如果您没有这样做，请使用适当的自动调整大小掩码调整您的视图布局，或者如果您只想支持 iOS 6，请查看 Auto Layout。

另请注意：自动旋转 API 已完全更改，如果您的应用程序支持默认以外的任何旋转，请查看该 API。

# ssl - 在 SSL 通信期间，Web 服务器上是否需要私钥？

> ID：12664913
> 
> 赞同：0
> 
> 时间：2012-09-30T20:37:08.150
> 
> 标签：ssl

在 SSL 通信期间，Web 服务器上是否需要私钥？我读了：

> 在 SSL 中，每一方使用每一方已知的随机值单独计算密钥。然后双方发送使用密钥加密的消息

和

> 私钥是会话随机生成的密钥，不存储。

以上引用与 Oracle 应用服务器 SSL 通信有关，但我认为它应该涉及一般的 SSL 通信。您能否解释一下，私钥的作用是什么（到目前为止，我认为在 SSL 期间 Web 服务器上需要私钥）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:54:50.970

是的，在 SSL 握手期间需要私钥，因为它用于证明服务器确实是已部署证书的公钥的所有者。
但是公钥/私钥对不用于加密应用程序消息。它们仅在握手过程中使用，在此过程中通过传输给客户端的密码参数创建*共享密钥*，以便计算它并在握手成功完成后用于数据的*对称*加密。

# windows - 如何在屏幕上打印整个文件？

> ID：12664914
> 
> 赞同：-1
> 
> 时间：2012-09-30T20:37:22.297
> 
> 标签：windows, linux, batch-file

如何在 Windows 和 Linux 上从给定系统路径打印到屏幕（回显）整个文件（所有文件内容）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:41:32.003

`cat`在 Unix 和`type`windows 中使用。

# php - 以列表形式回显，在循环中循环

> ID：12664915
> 
> 赞同：1
> 
> 时间：2012-09-30T20:37:28.120
> 
> 标签：php

我有一个类似于以下内容的数据集：

```
---------------------------------------------------------------------
id | category | sub_category | category_href | sub_category_href    |
01 | cat_1    | sub_cat 1    | cat/cat1.php  | cat/cat1/sub_cat1.php|
02 | cat_1    | sub_cat 2    | cat/cat1.php  | cat/cat1/sub_cat2.php|
03 | cat_2    | sub_cat 1    | cat/cat2.php  | cat/cat2/sub_cat1.php|
04 | cat_2    | sub_cat 2    | cat/cat2.php  | cat/cat2/sub_cat2.php|
--------------------------------------------------------------------- 
```

我想要对数据做的是有这样的布局：

```
<div>
  <h2 class="title">Cat1</h2>
  <p>
   <ul class="links">
      <li><a href="cat/sub_cat_1.php" target="_top">sub_cat_1</a></li>
      <li><a href="cat/sub_cat_2.php" target="_top">sub_cat_2</a></li>
  </p>
</div>
<div>
  <h2 class="title">Cat2</h2>
  <p>
    <ul class="links">
        <li><a href="cat/sub_cat_1.php" target="_top">sub_cat_1</a></li>
        <li><a href="cat/sub_cat_2.php" target="_top">sub_cat_2</a></li>
    </p>
</div> 
```

所以我的问题是我将如何使用 php 执行此操作，以便我可以从我的数据库中更改类别和子类别。以下是我在下面的内容，但我需要子类别的第二个循环，否则每个类别只有一个子类别。有人可以为我指出 sub_cat 循环的正确方向吗？谢谢

编辑：

所以我的问题是现在我有不同的类别，我如何回应适当的子类别？

谢谢

```
<?php
include('connect.php');
$result = mysql_query("SELECT DISTINCT category FROM categories")
    or die(mysql_error());
while ($row = mysql_fetch_array($result)) {
    echo "<div>";
    echo "<h2 class='title'>" . $row['category'] . "</h2>";
    echo "<p>";
    echo "<ul class='links'>";
    $result1 = mysql_query("SELECT * FROM categories ")
        or die (mysql_error());
    while ($row = mysql_fetch_array($result1)) {
        echo "<li><a href='" . $row['sub_category_href'] . " target='_top'>" . $row['sub_category'] . "</a></li>";
    }
    echo "</ul>";
    echo "</p>";
    echo "</div>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:16:51.897

该代码可能如下所示：

```
<?php
include('connect.php');
$result = mysql_query("SELECT DISTINCT category FROM categories")
    or die(mysql_error());
while ($row = mysql_fetch_array($result)) {
    echo "<div>";
    echo "<h2 class='title'>" . $row['category'] . "</h2>";
    echo "<p>";
    echo "<ul class='links'>";
    $result1 = mysql_query("SELECT * FROM categories WHERE category = {$row['category']}")
            or die (mysql_error());
    while ($row1 = mysql_fetch_array($result1)) {
        echo "<li><a href='" . $row1['sub_category_href'] . " target='_top'>" . $row1['sub_category'] . "</a></li>";
    }
    echo "</ul>";
    echo "</p>";
    echo "</div>";
}
?> 
```

但我建议你以这种方式优化：

```
<?php
include('connect.php');
$result = mysql_query("SELECT * FROM categories")
    or die(mysql_error());
$cats = array();
while ($row = mysql_fetch_array($result)) {
    $category = $row['category'];
    $sub_category = $row['sub_category'];
    $sub_category_href = $row['sub_category_href'];
    $cat_hrefs[$category][$sub_category] = $sub_category_href;
}
foreach ($cat_hrefs as $category => $sub_category_hrefs) {
    echo "<div>";
    echo "<h2 class='title'>" . $category . "</h2>";
    echo "<p>";
    echo "<ul class='links'>";
    foreach ($sub_category_hrefs as $sub_category => $sub_category_href) {
        echo "<li><a href='" . $sub_category_href . " target='_top'>" . $sub_category . "</a></li>";
    }
    echo "</ul>";
    echo "</p>";
    echo "</div>";
}
?> 
```

您不需要进行三个查询，因为您可以在一个查询中完成，这是更优化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T22:19:59.947

数据库中不需要四列，只需要 sub_category 和 sub_category 其他 2 个 category_href，sub_category_hrefare 是多余的，因为可以从前 2 个生成。

此版本使用推荐用于新应用的 PDO。

```
<div>
// connect to database 
<?php  
$host= "xxx";
$username="xxx";
$password="xxx";
$database="xxx";

// Opens a connection to a MySQL server
$connection=mysql_connect("localhost", $username, $password);
try {

// DBH means "D Handle"
// MySQL with PDO_MYSQL
 $DBH = new PDO("mysql:host=$host;dbname=$database", $username, $password);

}
catch(PDOException $e) {
  echo $e->getMessage();
}

// creating the statement
$STH = $DBH->query('SELECT * FROM  category  LIMIT 0 , 30');  
// setting the fetch mode  
$STH->setFetchMode(PDO::FETCH_ASSOC); 
 //Set up flag
 $test = 0;
while($row = $STH->fetch()) { 

 if($test == 0){
   echo "<h2 class= \"title\">".str_replace('_','',ucfirst($row['category']))."</h2>";
   $test = 1;
 }
 else{
   $test = 0;
 }
  echo "<li><a href=\"cat/".$row['category']."/".$row['sub_category'].".php\" target=\"_top\">".$row['sub_category']."</a></li>"; 

}  
// close the connection
$DBH = null;
?>
</div> 
```

# javascript - Firefox 上奇怪的页面错误

> ID：12664926
> 
> 赞同：1
> 
> 时间：2012-09-30T20:39:21.830
> 
> 标签：javascript, jquery, css, firefox, google-chrome

我在我的项目中使用了[Choosen](http://harvesthq.github.com/chosen/)和[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。这是jsfiddle

[http://jsfiddle.net/Wexcode/7HLyZ/3/](http://jsfiddle.net/Wexcode/7HLyZ/3/)

尝试在 2 个浏览器上打开这个 jsFiddle：Firefox 和 Chrome

在铬上它工作得很好。

在上面的Firefox打开链接。按下第一个可折叠的开启器。它将隐藏（关闭）内部部分，然后再按一次打开：您会看到它只显示选择的，而不是内部 div。这是我按 3 次后看到的 (Firefox)

![在此处输入图像描述](../Images/940d53d9b20b2e7138833d031817c1cf.png)

这就是它的样子（Chrome）

![在此处输入图像描述](../Images/b2c8938a539de50220b234dc85fa591c.png)

我错过了什么？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:22:32.193

看看这个：http: [//jsfiddle.net/7HLyZ/35/](http://jsfiddle.net/7HLyZ/35/)

变化：

`.collapse.in {height: auto;}`

`<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">Collapsible Group Item #1</a>`

`<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo" aria-hidden="true">Collapsible Group Item #2</a>`

# r - R：直方图显示的是密度而不是频率

> ID：12664931
> 
> 赞同：-5
> 
> 时间：2012-09-30T20:40:04.033
> 
> 标签：r, histogram

我目前正在使用 Twitters API 创建个人推文的直方图。当用户发推文时，我创建一个日期列表（在 for 循环中）。

```
dates=c(dates,obtweets[[i]]$getCreated()); 
```

日期示例：

```
> dates[1:3]
[1] "2012-09-09 16:01:18 EDT" "2012-09-29 17:26:12 EDT"
[3] "2012-09-28 17:53:34 EDT" 
```

但是，当我生成 hist(dates,breaks=7) 时，它会在 y 轴上显示密度而不是频率。

知道如何显示频率而不是密度吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T20:55:14.977

从`?hist`文档中：

```
freq: logical; if ‘TRUE’, the histogram graphic is a representation
      of frequencies, the ‘counts’ component of the result; if
      ‘FALSE’, probability densities, component ‘density’, are
      plotted (so that the histogram has a total area of one).
      Defaults to ‘TRUE’ _if and only if_ ‘breaks’ are equidistant
      (and ‘probability’ is not specified). 
```

所以你应该试试`hist(dates, breaks = 7, freq = TRUE)`。

# jquery - N和M位置之间的孩子有一个jQuery选择器吗？

> ID：12664932
> 
> 赞同：0
> 
> 时间：2012-09-30T20:40:23.300
> 
> 标签：jquery, jquery-selectors

假设我有一个元素列表，我想选择大于 2：eq(2) 且小于 6：eq(6) 的孩子。我知道如何选择比使用 :gt() 更大，但我不知道如何在 N 和 M 位置之间进行选择。有一个选择器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:42:53.883

你可以随时使用`.slice()` ^([DOCS](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice))

**[jsBin 演示](http://jsbin.com/udonew/1/edit)**

```
$('ul li').slice(2,5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T20:42:57.367

将它们混合在一起：`$('...:gt(2):lt(4)')`。

这是`:lt(4)`因为`:lt()`“选择索引小于**匹配集中索引的**所有元素”。所以应该使用6-2。

感谢 Joachim Isaksson 指出:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T21:25:51.790

另一种方法是：

```
$('ul li').filter(function(i,elm){ 
    return (i>=2 && i<6);}
).addClass('red'); 
```

# matlab - 解释 corrcoef(X) 函数的结果

> ID：12664935
> 
> 赞同：1
> 
> 时间：2012-09-30T20:40:44.917
> 
> 标签：matlab, matrix, correlation

我有这四个变量：

```
Class1 
Class2
Class3 
Class4 
```

它们中的每一个都是一个矩阵。

他们在一个矩阵里面`X`。

```
X = [[Class1]' [Class2]' [Class3]' [Class4]'] 
```

我将`corrcoef`函数应用于`X`.

```
B = corrcoef(X) 
```

获得结果：

```
B = 1.0000   -0.2392    0.9533    0.6903
   -0.2392    1.0000   -0.1272    0.4267
    0.9533   -0.1272    1.0000    0.6971
    0.6903    0.4267    0.6971    1.0000 
```

但我不知道这是什么意思。我如何解释这些值以及它们的含义？

我在 MATLAB 的帮助文档中找不到帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T01:16:04.787

如果您知道样本相关系数的定义，那么答案很简单。

由于`B`是 4 乘 4，我想我可以放心地假设这`Classz`是对某个随机变量的观察的行向量，并且您有 4 个这样的行向量。因此 X 是一个 N×4 矩阵，列对应于随机变量 1 到 4，行对应于随机变量的观察值。

如果您查看 Mark Elliot 提供的链接中的文档，您会注意到这意味着`X`应用该`corrcoef`功能的方向正确。

的输出`corrcoef`是样本相关矩阵。它是 4 x 4，因为您有 4 个随机变量（ 的列`X`）开始。该矩阵的对角线对应于与自身相关的每个随机变量（因此它们都等于 1）。非对角线对应于随机变量之间的样本相关系数。即元素 (2, 3) 中的数字是随机变量 2 和 3 之间的样本相关系数（即 的第 2 列和第 3 列`X`）。由于 2 和 3 之间的样本相关系数与 3 和 2 之间的样本相关系数相同，`B`因此构造上是对称的。

希望这可以清除它。如果问题是您不知道相关系数是什么，那么 SO 可能不是正确的论坛。也许你自己做一些研究，然后如果你还有问题把它发布到数学交流。

# iphone - XCode 在没有任何行时突出显示随机行并调用错误

> ID：12664937
> 
> 赞同：1
> 
> 时间：2012-09-30T20:41:25.843
> 
> 标签：iphone, objective-c, ios, xcode

我不得不强行关闭我的电脑，而 XCode 是打开的。我重新打开它，现在 XCode 正在突出显示随机的东西并称它们为错误。例如，该行：

```
[[self managedObjectContext] save:nil]; 
```

给出错误：

> 错误的接收器类型'int *'

我尝试了一个干净的然后构建，但错误仍然存​​在。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:00:50.790

您可以从组织者中删除派生数据。这将使 Xcode 重新索引您的项目。并希望解决您的问题。

[Apple doc - 关于项目组织者](http://developer.apple.com/library/mac/#recipes/xcode_help-projects_organizer/articles/about_projects_organizer.html)

# javascript - 如何在嵌入的 Vimeo 视频上获得视频缩略图而不损失任何质量？

> ID：12664943
> 
> 赞同：0
> 
> 时间：2012-09-30T20:41:52.983
> 
> 标签：javascript, vimeo, video-thumbnails

我正在我公司的网站上工作，我们正在某些页面上嵌入视频。我们使用 Vimeo 的自定义缩略图的功能，但最终呈现很丑。

有谁知道如何在 Vimeo vids 上设置缩略图而不丢失原始图片的质量？例如，我听说过一个 javascript 技巧？

我网站上的链接：[http ://radianceconseil.com/creation-sites-web-haute-savoie/](http://radianceconseil.com/creation-sites-web-haute-savoie/)

这是原始图片：[http ://www.radianceconseil.com/images/sites-vitrine-accueil-Vimeo.jpghttp://www.radianceconseil.com/images/sites-vitrine-accueil-Vimeo.jpg](http://www.radianceconseil.com/images/sites-vitrine-accueil-Vimeo.jpghttp://www.radianceconseil.com/images/sites-vitrine-accueil-Vimeo.jpg)

如您所见，质量损失巨大！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:53:44.390

缩略图超出了您的控制范围（Vimeo 正在生成图像并且他们选择了低质量（看起来像高级 JPEG 压缩），Vimeo 说他们将[根据嵌入尺寸](http://vimeo.com/forums/feature_requests/topic:32794)提供更高分辨率的缩略图。但是您可以替换如果您使用 HTML5 视频标签，则它带有一个名为“[海报](http://www.w3schools.com/html5/att_video_poster.asp)”的本地托管图像，或者您可以添加图像并使用一些 JavaScript 在点击时将其替换为 iframe。

# android - 向android数据库（SQLI）添加值时出现异常

> ID：12664946
> 
> 赞同：0
> 
> 时间：2012-09-30T20:42:25.633
> 
> 标签：android

我需要有关我的 android 简单应用程序的帮助。我尝试了很多来解决它，但它没有用。当我使用该`additem()`方法时，我遇到了一个异常：

`android.database.cursorindexoutofboundsexception index 0 requested with a size of 0`

数据库代码

```
public class DBAdapter extends SQLiteOpenHelper 
{
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "Items_Manger";
private static final String Table = "Items";
private static final String creat_Table=
"CREATE TABLE if not exists Items(id  integer primary key autoincrement,name   text,price INTEGER)";
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_price = "price";

public DBAdapter(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(creat_Table);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + Table);

    onCreate(db);
}

void additem(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_ID, contact.get_id());
    values.put(KEY_NAME, contact.get_name()); 
    values.put(KEY_price, contact.get_price());

    db.insert(Table, null, values);      
    db.close(); 
}

 Contact getitem(int id) {
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(Table, new String[] { KEY_ID,
            KEY_NAME, KEY_price }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();
    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)), cursor.getString(1),
            Integer.parseInt(cursor.getString(2)));
    // return contact
    return contact;
}

public List<Contact> getallitems() {
    List<Contact> contactList = new ArrayList<Contact>();

    String selectQuery = "SELECT  * FROM " + Table;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.set_id(Integer.parseInt(cursor.getString(0)));
            contact.set_name(cursor.getString(1));
            contact.set_price(Integer.parseInt(cursor.getString(2)));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    return contactList;
}

//**************************************************************
public int updateitem(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.get_name());
    values.put(KEY_price, contact.get_price());

    return db.update(Table, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.get_id()) });
}

//**************************************************************
public void deleteitem(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(Table, KEY_ID + " = ",new String[] { String.valueOf(contact.get_id()) });           
    db.close();
} 
```

按钮 ：

```
 insert.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            int idd= Integer.parseInt(eid.getText().toString());
            String namee= ename.getText().toString();
            int pricee = Integer.parseInt(eprice.getText().toString());
            Contact c = new Contact();
            c=db.getitem(idd);
            db.additem(new Contact(idd,namee,pricee));  

        }
    }); 
```

联系人类

```
public class Contact {
int id;
int price;
String name;

public Contact(){}

public Contact(int _id, String _name, int _price){
this.id = _id;
this.name = _name;
this.price=_price;
}
public Contact(String _name, int _price){
this.name = _name;
this.price=_price;
}
public Contact(int _id){
this.id=_id;
}

public int get_id(){return this.id;}
public int get_price(){return this.price;}
public String get_name(){return this.name;}

public void set_id(int _id){this.id=_id;}
public void set_price(int _price){this.price=_price;}
public void set_name(String _name){this.name=_name;}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:01:48.133

该异常意味着您正在尝试读取一个空光标（“索引 0，大小为 0”）。

问题是 SQliteDatabase#query() 将始终返回一个 Cursor，Cursor 可能为*空*但不会`null`。因此，让我们更改`getItem()`为在 Contact 尚不存在时返回 null 值：

```
Contact getitem(int id) {
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(Table, new String[] { KEY_ID,
            KEY_NAME, KEY_price }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);

    Contact contact = null;
    if (cursor.moveToFirst()) 
        contact = new Contact(Integer.parseInt(cursor.getString(0)), cursor.getString(1), Integer.parseInt(cursor.getString(2)));

    // return contact
    return contact;
} 
```

现在更新您的 Button 的 OnClickListener：

```
Contact c = db.getitem(idd);
if(c == null)
    db.additem(new Contact(idd,namee,pricee)); 
```

# c++ - 新Linux程序员——尝试开发库

> ID：12664953
> 
> 赞同：0
> 
> 时间：2012-09-30T20:43:05.310
> 
> 标签：c++, linux, shared-libraries

我是一名新的 Linux 程序员，试图开发共享库，并且能够使用 Eclipse 项目设置在 Eclipse 中成功编译一个；只是发现要创建一个 Debian 包我需要一个 ./configure 脚本！所以我在我的系统上设置了 Autotools，并尝试在 Eclipse 中创建一个 Autotools 项目。我使用默认库设置创建了它，然后将 .C 文件重命名为 .CPP 文件，并根据文档更改了 Makefile.am 中的条目。我清理了项目，重建了 Makefile，但由于某种原因，它仍在寻找旧的 .C 文件！！！！（没有规则可以使 libTest_la-libTest.lo' 需要目标 libTest.c！我花了几个小时试图解决这个问题，但无济于事。有人可以帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:10:24.730

.deps 文件夹代表依赖项。这些是在运行 ./configure 时生成的。执行 make distclean （如果存在）或等效项将删除此 .deps 目录以及任何其他生成的文件。make clean 只删除生成的目标文件。重新运行 configure*应该*会生成一个源文件依赖项列表。调用 make 本身不会重新生成依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:59:40.257

好的。发现答案隐藏在 .deps 文件夹中。删除 .deps 文件夹解决了这个问题。我会将答案奖励给能够解释为什么删除文件夹有效的人，因为我对此感到非常困惑。

# wpf - 显示 VB.NET WPF 窗口

> ID：12664958
> 
> 赞同：1
> 
> 时间：2012-09-30T20:44:17.620
> 
> 标签：wpf, vb.net, visual-studio-2010

很抱歉这个非常业余的问题，但我无法完成这项工作。我想制作一个自定义字体对话框窗口（只是为了了解它是如何完成的）并且根据我使用 Google 找到的内容，我应该创建一个我想要显示的窗口实例，然后调用 Show()或 ShowDialog() 方法。然而，智能感知弹出窗口没有显示这些方法可用，并且确实代码没有编译并抱怨这些方法不存在。是否有一些非常简单的东西我错过了或者我只是很远？

```
Imports System.IO

Class MainWindow
    Public font_dialog As Window1 = New Window1

    // ... Removed code that was not pertinent

    Private Sub menu_font_Click(sender As System.Object, e As _
        System.Windows.RoutedEventArgs) Handles menu_font.Click
        // does not compile
        font_dialog.Show()
    End Sub
End Class 
```

这是确切的错误消息：

> 错误 1“显示”不是“WpfApplication1.Window1”的成员。C:\Users\notmyrealusername\documents\visual studio 2010\Projects\WpfApplication2\WpfApplication2\MainWindow.xaml.vb 24 9 WpfApplication2

Window1 的 XAML：

```
<UserControl x:Class="Window1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Height="453" Width="600" DataContext="{Binding}">
    <Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="575*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <TabControl Height="429" HorizontalAlignment="Left" Margin="12,12,0,0" Name="TabControl1" VerticalAlignment="Top" Width="576" Grid.ColumnSpan="2">
            <TabItem Header="Paramètres généraux" Name="TabItem1">
                <Grid>
                    <ComboBox Height="23" HorizontalAlignment="Left" Margin="53,14,0,0" Name="ComboBox1" VerticalAlignment="Top" Width="213" />
                    <Label Content="Police" Height="28" HorizontalAlignment="Left" Margin="6,14,0,0" Name="Label1" VerticalAlignment="Top" />
                    <Label Content="Styles" Height="28" HorizontalAlignment="Left" Margin="6,43,0,0" Name="Label2" VerticalAlignment="Top" />
                    <ListBox Height="100" HorizontalAlignment="Left" Margin="53,43,0,0" Name="ListBox1" VerticalAlignment="Top" Width="213" SelectionMode="Multiple" />
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T22:54:07.337

您必须使 Window1 继承自[Window](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)，后者具有 Show 方法。在 Visual Studio 中，您可以右键单击要添加窗口的项目，然后单击“添加”->“窗口”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T22:53:48.730

> “显示”不是“WpfApplication1.Window1”的成员。

那个男人你`Window1`不是（有效的）窗口......

发布 XAML 的第一行和后面的代码。

此外，您可能想要调用 ShowDialog()，但这是一个单独的问题。

# vba - dotm 创建新文档 - 如何删除对模板的引用？

> ID：12664961
> 
> 赞同：3
> 
> 时间：2012-09-30T20:44:32.293
> 
> 标签：vba, ms-office, ms-word

我有一个存储在其中的宏的 dotm。创建新文档时，我需要消除对 dotm 文件的引用（如果您正在查看 VBA 编辑器中的项目）。

用VBA代码可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:48:43.880

`Attachedtemplate`您可以通过使用该属性将原始引用替换为对另一个模板的引用来切断原始引用。例如：

```
Private Sub Document_New()

ActiveDocument.AttachedTemplate = "C:\Users\Joe\AppData\Roaming\Microsoft\Templates\Normal.dotm"

End Sub 
```

# javascript - 带有 `this` 的 JavaScript eval()

> ID：12664963
> 
> 赞同：2
> 
> 时间：2012-09-30T20:44:37.893
> 
> 标签：javascript, eval

如果我在 HTML 中定义 JavaScript 代码片段，如下所示：

```
<div id=myElem onMyUpdate="alert('Update called for ' + this.id)">... 
```

那么在`this`正确分配的 JavaScript 中评估它的最优雅的方法是什么？

到目前为止，我想出的是这样的：

```
if (elem.hasAttribute('onMyUpdate'))
    (function () { eval(elem.getAttribute('onMyUpdate')) }).call(elem); 
```

这看起来很糟糕（对我来说），但有效。有更好/更优雅的选择吗？

MDN 说 eval() 曾经有第二个参数来做到这一点，但现在已被弃用；然后 MDN 建议改用运算符 with() ，如果您按照提供的链接进行操作，那么最新标准将不推荐使用该运算符。换句话说，死胡同。

（作为旁注，StackOverflow 会忽略`this`搜索词中的单词，因此它可能会错过相关答案 - 有没有办法告诉它不要？）

**编辑**：我忘了提：请不要使用 jQuery，只需使用香草 JavaScript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:53:28.577

这个怎么样：

```
if(elem.hasAttribute('onMyUpdate')) {
  var fun = new Function(elem.getAttribute('onMyUpdate'));
  fun.call(elem);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:54:12.697

理想情况下，您应该完全不引人注意地执行此操作，并且不使用`eval`：

```
<div id="myElem"></div> 
```

.

```
var elem = document.getElementById('myElem');
elem.onMyUpdate = function () {
    alert(this.id);
};

// ...

elem.onMyUpdate && elem.onMyUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T21:00:17.290

您可以使用 elem 而不是使用它。

```
 <div id=myElem onMyUpdate="alert('Update called for ' + elem.id)">... 
```

js：

```
if (elem.hasAttribute('onMyUpdate')){ // all variable available here will be available inside eval.
     eval( elem.getAttribute('onMyUpdate') );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:53:52.187

更优雅的解决方案是使用自定义事件，将处理程序绑定到 HTML 元素上的一些自定义事件，并在代码的其他部分触发它们。有关一些示例，请参阅[本教程](http://dailyjs.com/2009/11/14/jquery-custom-events/)和[Sidharth Mudgal 的答案。](https://stackoverflow.com/questions/12664963/javascript-eval-with-this/12664995#12664995)

# android - 解析 XML 未绑定前缀的 Android XML 错误

> ID：12664964
> 
> 赞同：2
> 
> 时间：2012-09-30T20:44:39.683
> 
> 标签：android, xml, eclipse

我有 2 个错误，但我修复了一个。我仍然在 com.admob.android.ads 处出现 Error parsing XML unbound prefix 错误你错了吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/webview"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
/>

<com.admob.android.ads.AdView
  android:id="@+id/ad" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  xmlns:backgroundColor="#000000"
  xmlns:primaryTextColor="FFFFFF"
  xmlns:secondaryTextColor="#CCCCCC"
  android:layout_alignParentTop="true"
  ads:adUnitId="xxxxxxxxxxxx"
  ads:adSize="BANNER"
  ads:loadAdOnCreate="true"
  /> 
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T21:33:08.870

您需要在主标签（RelativeLayout）上设置布局配置并设置广告的命名空间：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
> 
```

# ruby-on-rails - Rails（或 Ruby）中未初始化的常量 Test::Unit::UI::XML (NameError)

> ID：12664966
> 
> 赞同：1
> 
> 时间：2012-09-30T20:44:47.677
> 
> 标签：ruby-on-rails, ruby, unit-testing

我正在尝试创建一个 xml 运行器来制作 Rails 单元测试的结果报告。这是我的代码：

```
require 'test/unit'
require 'test/unit/ui/console/testrunner'

class FastFailRunner < Test::Unit::UI::Console::TestRunner
  def add_fault(fault)
    @faults << fault
    nl
    output("%3d) %s" % [@faults.length, fault.long_display])
    output("--")
    @already_outputted = true
  end

  def finished(elapsed_time)
    nl
    output("Finished in #{elapsed_time} seconds.")
    nl
    output(@result)
  end
end

Test::Unit::AutoRunner::RUNNERS[:fastfail] = proc do |r|
  FastFailRunner
end 
```

当我运行它时`TESTOPTS="/home/alex/RubymineProjects/app2/test/unit/runner.rb --runner=xml" rake test`

...我收到一个错误（非常奇怪的错误）

```
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Test::Unit::UI::XML (NameError)
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in <module:Unit>'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in <top (required)>'
gem install minitest
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in <module:Unit>': uninitialized constant Test::Unit::UI::XML (NameError)
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'
    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in <top (required)>'
Errors running test:units! #<RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]> 
```

我试图要求`test/unit/ui/xml/testrunner.rb`但没有运气。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:02:24.290

如果您使用的是 Ruby 1.8.7，您可以说：

```
require 'test/unit/ui/console/testrunner'
p Test::Unit::UI::Console::TestRunner # => no problem 
```

（没有这样的文件，`test/unit/ui/xml/testrunner.rb`所以我不确定你在做什么。）

查看 test/unit.rb 中的文档，实际上有示例代码向您展示如何执行此操作需要：[http ://www.ruby-doc.org/stdlib-1.8.7/libdoc/test/unit/rdoc/Test /Unit.html](http://www.ruby-doc.org/stdlib-1.8.7/libdoc/test/unit/rdoc/Test/Unit.html)。

但是，问题是您使用的是 Ruby 1.9.3。Ruby 1.9.3 中没有 /test/unit！嗯，有，但它只是基本测试的兼容层；当然没有 test/unit/ui/console/testrunner，也没有 module/class `Test::Unit::UI::Console::TestRunner`。

相反，有minitest。您可以阅读 minitest 上的文档以了解如何制作测试运行器。[http://docs.seattlerb.org/minitest/](http://docs.seattlerb.org/minitest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T03:26:26.060

需要考虑的一件事是 Test::Unit 包含在默认的 Ruby 1.8.7 安装中。如果您想在更高版本的 Ruby 中使用它，请继续将其安装为 gem。

```
sudo gem install test-unit 
```

[http://test-unit.rubyforge.org/](http://test-unit.rubyforge.org/)

# iphone - 如何访问已在 ApplicationDelegate 中初始化的对象？

> ID：12664968
> 
> 赞同：0
> 
> 时间：2012-09-30T20:44:59.090
> 
> 标签：iphone, objective-c, ios

我需要在启动时在我的 AppDelegate 中初始化一个对象的对象。每当我尝试在其他地方访问 ivar 时，所有返回的都是空的。

我正在做的事情可以简化为

```
//AppDelegate.h:
@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    NSString* someString;
}

@property (nonatomic, copy)   NSString* someString; 
```

然后在 AppDelegate.m

```
//AppDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    someString = @"Hello World!";
    NSLog(@"%@",someString);
} 
```

这就是我访问 NSString 对象时所做的

```
//ViewController.m
- (void)viewDidLoad {
    [super viewDidLoad];
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSLog(@"%@",delegate.someString);
} 
```

输出文本是

*   2012-09-30 22:26:45.125 Labor3[22524:f803] 你好世界！
*   2012-09-30 22:26:45.127 Labor3[22524:f803]（空）

没有任何警告或错误。

我遇到的问题有点复杂，但基本要素保持不变，我什至无法让上面的示例正常工作。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:49:12.717

添加

```
@synthesize someString; 
```

后

```
@implementation AppDelegate 
```

在您的 app-delegate .m 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:52:56.363

您应该使用 _someString 而不是 someString 或使用安德烈的答案解决方案，在您的代码属性 someString 和 ivar someString 没有任何连接

# php - PHP重新发布数据

> ID：12664970
> 
> 赞同：0
> 
> 时间：2012-09-30T20:45:51.183
> 
> 标签：php, post, curl

我收到发布到我域上的 url 的数据，检查某些字段值，如有必要更新数据库，然后将收到的数据发布到另一个 url。

不幸的是，我发布的 url (https) 没有测试平台或类似的东西，所以我需要确保我重新发布的内容与收到的内容相同。

这看起来是一种合理的方法吗？

谢谢

```
foreach($_POST as $key=>$value) 
{ 
    $fields_string .= $key.'='.$value.'&'; 
}
$fields_string = substr_replace($fields_string, "", -1);

$ch = curl_init();
curl_setopt( $ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" );
curl_setopt( $ch, CURLOPT_URL, "https://anotherdomain.com/script.php");
curl_setopt( $ch, CURLOPT_ENCODING, "" );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false );
curl_setopt( $ch, CURLOPT_CONNECTTIMEOUT, 30 );
curl_setopt( $ch, CURLOPT_TIMEOUT, 30 );
curl_setopt( $ch, CURLOPT_MAXREDIRS, 10 );
curl_setopt( $ch, CURLOPT_POST, 1);
curl_setopt( $ch, CURLOPT_POSTFIELDS, $fields_string);
$result = curl_exec($ch);   
$response = curl_getinfo( $ch );    
curl_close($ch);    

$fh = fopen('audit.log', 'a');
fwrite($fh, $response."\r\n");
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:50:52.740

`CURLOPT_POSTFIELDS`可以`array`直接拿

这会很好用：

```
 curl_setopt( $ch, CURLOPT_POSTFIELDS, $_POST); 
```

如果服务器关闭，您还需要管理多次尝试.....

# javascript - 多个将多个元素拖放到画布元素中

> ID：12664972
> 
> 赞同：1
> 
> 时间：2012-09-30T20:45:54.940
> 
> 标签：javascript, html, canvas, drag-and-drop, fabricjs

我的项目的一部分是将多个图像从 div 元素拖放到画布中，图像是 .svg 类型，我使用库[fabric.js](http://fabricjs.com)来渲染这些图像。我面临的问题是文件不会多次放入画布中。

每个级别的警报表明，尽管拖动函数被调用了两次，但 drop 函数只被调用了一次。

这是javascript代码的一部分：

```
var object = new Image();

function allowDrop(ev)
{
    ev.preventDefault();
}

function drag(ev)
{
    ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
    ev.preventDefault();
    var data=document.getElementById(ev.dataTransfer.getData("Text")).getAttribute('src');
    object.src = data.toString();
main();

} 
```

main() 是使用 object.src 捕获图像 url 然后使用 fabric.js 库呈现的函数

# node.js - Socket.io 和 Express 3

> ID：12664973
> 
> 赞同：3
> 
> 时间：2012-09-30T20:46:05.457
> 
> 标签：node.js, express, socket.io

我用 express 生成器创建了一个 express 3 应用程序并安装了 socket.io。在 app.js 上，我发出一条消息：

```
io.sockets.on('connection', function(socket) {
  socket.emit('init', { msg: 'Welcome'});
}); 
```

在服务器端，我写道：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src='/socket.io/socket.io.js' />
    <script>
        var socket = io.connect('http://127.0.0.1:3000');
        socket.on('init', function (data) {
            console.log(data.msg);
        });
    </script>
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
  </body>
</html> 
```

如果我运行 app.js 它应该在控制台上打印“欢迎”，但它不会打印任何东西。我检查了 /socket.io/socket.io.js 是否已被访问，并且确实如此。

运行应用程序时，我得到：

```
 info  - socket.io started
Express server listening on port 3000
GET / 200 28ms - 472
GET /stylesheets/style.css 200 163ms - 110
   debug - served static content /socket.io.js 
```

我错过了什么吗？我遵循了 socket.io 网页示例，但似乎服务器运行良好......也许是客户端的东西？

`var socket = io.connect('http://127.0.0.1', { port: 3000 } );`编辑：我也在客户端尝试过，并且还从主体运行所有套接字客户端。

在 io.sockets.on 事件上做一个 console.log 什么都没有……所以永远不会达到“连接”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T21:09:47.413

应用程序.js：

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();
var server = http.createServer(app)

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', routes.index);

server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

var io = require("socket.io").listen(server)

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
}); 
```

索引.html：

```
<script>
    var socket = io.connect();
    socket.on('news', function (data) {
      console.log(data);
    });
</script> 
```

在浏览器的控制台中，您应该会看到一个包含“hello”的对象：“world”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T21:10:03.180

将 index.jade 文件添加到我之前发布的示例中

服务器.js

```
var app = require('express')()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server)

server.listen(3000)
io.set('loglevel',10) // set log level to get all debug messages
io.on('connection',function(socket){
  socket.emit('init',{msg:"test"})
})
app.get('/',function(req,res){
  res.render('index.jade')
}) 
```

/views/index.jade

```
doctype html
html
  head
    script(src="/socket.io/socket.io.js")
    script.
      var sockets = io.connect()
      sockets.on('init',function(msg){
        alert(msg.msg)
      }) 
```

# php - 当输入为空或有 < 2 个字符时不显示结果

> ID：12664976
> 
> 赞同：0
> 
> 时间：2012-09-30T20:46:16.417
> 
> 标签：php, jquery

我正在使用这个 js 从 php 文件中获取结果并输出它们，这发生在 keyup 上。一切都运行良好，但问题是当我输入某些内容时，最后的结果不会被擦除。如果输入为空或仅键入一个字符，如何使脚本擦除结果？

```
$('#username-search').keyup(function() {
    if (this.value.length < 2) return;
    var usersearch = $(this).val();

    $.post("autocomplete_user.php", {
        results: usersearch,
    },

    function(data) {
        $('#data').html(data)
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:53:02.503

将您的 if 语句更新为以下内容：

if (this.value.length < 2) {($('#data').html() != "" ? $('#data').html("") : return true)}

这样做的目的是，如果输入低于 2，它会检查 ID 为 DATA 的 DOM 元素中是否有任何内容，如果有，则删除数据，如果没有，则返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T21:32:34.323

您可以使用[JQueryUI 自动完成来做到这一点](http://jqueryui.com/demos/autocomplete/)

另请参阅[https://stackoverflow.com/questions/188442/whats-a-good-ajax-autocomplete-plugin-for-jquery](https://stackoverflow.com/questions/188442/whats-a-good-ajax-autocomplete-plugin-for-jquery)

# c# - c# - 用作变量的类型

> ID：12664977
> 
> 赞同：1
> 
> 时间：2012-09-30T20:46:30.593
> 
> 标签：c#

我有一个简单的业务经理外观，应该只保留一些库存信息。但是，我不断收到错误消息，即“Home.Services.InventorySvc”是一种用作变量的类型。

我的门面代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Home.Domain;
using Home.Services;

namespace Home.Business
{
    public class InventoryMngr
    {
        public void Create(CreateInventory inv) 
        {
            Factory factory = Factory.GetInstance();
            InventorySvc invSvc =
            (InventorySvc)factory.GetService(
            (InventorySvc).Name);
            invSvc.CreateInventory(inv);
        }
    }
} 
```

InventorySvc 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Home;
using Home.Domain;

namespace Home.Services
{
    public interface InventorySvc : IService
    {
        void CreateInventory(CreateInventory createinventory);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:51:43.600

您正在使用`(InventorySvc).Name`which 与 相同`InventorySvc.Name`，因此将访问`InventorySvc`该类的静态成员。因为它不是一个类而是一个接口，所以它不能有静态成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:54:55.377

```
InventorySvc invSvc = (InventorySvc)factory.GetService((InventorySvc).Name); 
```

此代码应检索实现的类型的实例`InventorySvc`。但是，您似乎正在尝试*传递*该类型的实例，这是没有意义的——语法错误并且您尚未实例化该类型。想必你还不*知道*具体的类型，只知道接口类型。工厂和接口已经抽象了实现（通常是一件好事）。

在您的示例中，工厂可能期望类型的名称为字符串（我不会通过辩论这是否是一件好事而使答案过于复杂）。作为回报，工厂将实例化一个实现`InventorySvc`并返回它的实例。只有这样，您才能调用实例成员，例如“名称”属性。

附带说明一下，接口名称[应`I`以 c# 中的 a](http://msdn.microsoft.com/en-us/library/8bc1fexb%28v=vs.71%29.aspx)开头，例如`IInventorySvc`. 这使您和任何阅读您的代码的人都更清楚它是一个接口。

另见：[https ://stackoverflow.com/a/681815/453277](https://stackoverflow.com/a/681815/453277)

# asp.net-mvc - 在 Razor 视图中重命名 mvc 模型对象

> ID：12664981
> 
> 赞同：4
> 
> 时间：2012-09-30T20:47:05.147
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我正在使用 MVC 4，通常 Visual Studio 会为您创建所有视图。我有一个只有一个字段的表单，我只想将创建表单嵌入到索引视图中。

所以索引视图有类似的东西`@model IEnumerable<Models.LinkModel>`

所以我通过遍历模型集合来访问它。

但是，如果我尝试为我需要的创建操作嵌入表单，`@model Models.LinkModel` 并且 Model.Name 也可以访问它。有没有办法做到这一点或使用不同的变量名？

**好的，这里有一些额外的信息。**

所以我有一个模型。

```
public class LinkModel
{
   public string LinkUrl {get;set;}
} 
```

我有一个具有 Create 和 Index ActionResults 的控制器。

现在在索引视图中我有

```
@model IEnumerable<Models.LinkModel>

@{
    ViewBag.Title = "Links";
} 
```

我可以做所有我喜欢的逻辑来列出所有链接。

```
@foreach(link in Model)
{
    <p>link.LinkUrl<p>
} 
```

创建视图有这个

```
@model Models.LinkModel // Note that it is just one item not IEnumerable

@{
    ViewBag.Title = "Add Link";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset class="editor-fieldset">
        <legend>LinkModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.LinkUrl)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LinkUrl)
        </div>
       <p>
        <input type="submit" value="Add Link" />
       </p>
    </fieldset>
} 
```

现在为一个字段创建一个表单似乎很愚蠢。我想把这个表格放在索引页面上。问题是我使用变量 Model 访问对象。我想知道是否有办法拥有两个单独的实例或能够访问具有不同名称的模型对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T01:46:40.023

有一个包含项目列表和 1 个用于创建的单个项目的复合模型

```
public class  IndexModel {
   public LinkModel CreateModel {get; set;}
   public IEnumerable<LinkModel> Items {get; set;}
}

@model IndexModel
@using(Html.BeginForm("create")) {
   @Html.EditorFor(m => m.CreateModel.Name);
}
@foreach(var item in Model.Items) {
  @item.Name
} 
```

# magento - Magento - 新订单邮件

> ID：12664983
> 
> 赞同：0
> 
> 时间：2012-09-30T20:47:09.223
> 
> 标签：magento

我正在使用 Magento 1.6.2。

我需要编辑新的订单邮件。哪个文件是项目的模板？我需要生成和格式化项目的特定文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:21:13.117

我已经找到了。app/design/frontend/base/default/template/email/order/items.phtml

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T21:03:49.530

要编辑新订单电子邮件，请进入系统 -> 交易电子邮件，然后单击“添加新模板”。

然后通过从模板输入字段的下拉菜单中选择“新订单”并单击“加载模板”按钮来加载现有的新订单模板。在模板信息部分，您为新模板分配一个新名称并在点击“保存模板”之前对其进行修改。

要应用它，请转到系统 -> 配置 -> 销售并选择销售电子邮件选项。

在订单选项卡中，您将新保存的模板应用到新订单确认模板下拉菜单。

如果您允许客人结帐，请对来自客人的新订单执行相同操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T23:37:44.393

电子邮件模板位于 /app/locale/en_us/template/email 和 /app/locale/en_us/template/email/sales 下。

Magento 中的电子邮件模板令人失望的是，他们希望商店所有者使用后端来管理这些模板，而不是通过编辑模板文件。当然，您始终可以直接编辑模板，但请确保在更新到新版本的 Magento 之前保留它们的备份。

最终工作量很大，据我所见，大多数客户只是更新徽标。如果您的客户想要拥有完全自定义的电子邮件模板，预计需要 20 多个小时才能正确完成（跨电子邮件客户端兼容性、客户端更改等）。

# javascript - javascript在div中加载外部内容

> ID：12664989
> 
> 赞同：1
> 
> 时间：2012-09-30T20:47:43.337
> 
> 标签：javascript, load, external

我想找到使用 javascript 代码（没有 jQuery、Mootools 或任何其他库，只有纯 JS）在 div 中加载外部内容（来自 php 脚本、外部网站）的**最佳解决方案。**它必须在任何浏览器中工作，甚至是 IE :) 实现这一目标的最佳方法是什么？

我发现了很多关于这个的帖子，但其中很多都是旧的，或者没有确定的解决方案。*还是使用iframe*实现这一点更好？

# backbone.js - 骨干.js 模型和收集开销

> ID：12664997
> 
> 赞同：0
> 
> 时间：2012-09-30T20:48:31.603
> 
> 标签：backbone.js, backbone.js-collections

当我从服务器获取模型或集合时，我无法访问模型的属性，除非我将其字符串化然后重新解析。大概模型本身有一些来自backbone.js的额外开销？请注意，在下面的代码中，我可以按顺序执行 stringify/parse，这应该会得到与我开始时相同的结果。然而，显然我已经通过执行这两个步骤消除了一些多余的信息，因为我的模型的属性现在与以前不同。当然，我不需要通过这两个步骤来访问我的模型属性，对吧？

```
Eg.  
thismodel = /// assume this came from server fetch
alert(thismodel.name);    // DOES NOT WORK - undefined

jsonmodel = JSON.stringify(thismodel);
var providerprefslistJSON = jQuery.parseJSON(jsonmodel);
alert(providerprefslistJSON.name);     // WORKS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:23:54.137

骨干模型对象不是普通的旧 JavaScript 对象。它们将它们的属性保存在[内部散列](http://backbonejs.org/#Model-attributes)中。要访问该`name`属性，您可以执行以下操作：

`alert(thismodel.attributes.name);`

或者更好[的是使用 get() 方法](http://backbonejs.org/#Model-get)：

`alert(thismodel.get("name"));`

当您将模型转换为 JSON 然后再返回时，它起作用的原因是因为`JSON.stringify`调用[了 toJSON() 方法，该方法从](http://backbonejs.org/#Model-toJSON)*内部属性哈希*创建 JSON 字符串，这意味着当您解析该字符串时，您会得到一个普通的旧 JavaScript 对象 -与主干模型对象不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T21:11:58.413

首先，您是否尝试访问模型或响应的属性？

看来`alert(thismodel.name)`您要寻找模型的属性而不是属性。如果您正在寻找模型属性，那么也许您想要`alert(this.model.get('name'))`

如果您确实要使用 model.name，那么基本上问题可能在于您如何解析数据。例如，来自您服务器的 JSON 类似于 {'name':'Jimmy'}。

虽然`model.response`发送的原始 JSON 在 object.name 下具有“Jimmy”命名空间，但 Backbone 会自动将其转换为模型属性，除非另有说明（例如 modelObj.attributes.name），此时您将使用该`get()`函数。

如果一切正常，您应该能够相当简单地访问模型数据。

例如获取

```
var model = new MyModel();
    model.id = 1;
    model.fetch({
        success: function(model, response) {
            console.log(model.get('name'));  // The model name attribute
            console.log(response.name);  // The RAW response name property
        }
    }); 
```

或者，您的服务器可能没有将数据作为 JSON 数据发回。是服务器响应`content-type="application/json"`吗？

有些事情要检查。