# StackOverflow 问答 15878000-15878999

# axapta - 合约类和 SysOperation 框架

> ID：15878002
> 
> 赞同：0
> 
> 时间：2013-04-08T11:34:02.863
> 
> 标签：axapta, dynamics-ax-2012

我有一个用于 SSRS 报告的合同/UIBuilder 类。我想使用相同的 Contaract/UIBuilder 类在 excel 中生成数据。

我遇到了[http://www.artofcreation.be/2011/08/22/ax2012-sysoperation-part-1-data-contracts-and-service-operations/](http://www.artofcreation.be/2011/08/22/ax2012-sysoperation-part-1-data-contracts-and-service-operations/)帖子。我发现使用了服务类。

我找到了一些使用服务类和一些不使用的示例。

使用服务真的很重要吗？
另外使用它有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:08:53.723

[如何在报表中使用报表数据提供者类](http://msdn.microsoft.com/en-us/library/gg731917.aspx)？

`SRSReportParameterAttribute`通过在报告中指定属性，可以在多个报告中使用相同的合同：

```
[
    SRSReportQueryAttribute('Cust'),
    SRSReportParameterAttribute(classstr(SrsRDPContractSample))
]
public class SrsRdpSampleClass extends SRSReportDataProviderBase
{
    TmpCustTableSample tmpCust;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T20:44:50.657

我将跳过第一个问题，因为您应该尝试一下，您将得到关于它是否有效的答案......

第二个问题，你已经有一篇很好的博文了——但也可以看看：

[http://daxmusings.codecrib.com/2011/08/from-runbase-to-sysoperation-business.html](http://daxmusings.codecrib.com/2011/08/from-runbase-to-sysoperation-business.html)

当然还有 ms 链接：

[http://msdn.microsoft.com/en-us/library/gg862488.aspx](http://msdn.microsoft.com/en-us/library/gg862488.aspx) [http://www.microsoft.com/en-us/download/details.aspx?id=29215](http://www.microsoft.com/en-us/download/details.aspx?id=29215)

亮点包括：

*   服务器端操作
*   将 ui 元素与契约和逻辑分离
*   可分批的

# javascript - 当浏览器处于后台时，使用 javascript 触发的像素跟踪不会在移动设备上触发

> ID：15878006
> 
> 赞同：0
> 
> 时间：2013-04-08T11:34:11.447
> 
> 标签：javascript, mobile, tracking, pixel

我正在尝试找到一种解决方案来从**iPhone上的 Safari 浏览器中触发像素**

这是我的场景：

我有一个网站（不是本机应用程序），需要在单击提交按钮 10 秒后向第三方触发像素（目前我正在使用 JavaScript）。

问题是当离开另一个应用程序时，JavaScript 停止运行，因此像素不会被触发。

还有其他方法可以触发像素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:03:46.110

在移动浏览器中没有办法做到这一点。我唯一能想到的就是检测到您在移动设备上，然后才在提交时触发 gif。如果它必须在 10 秒之后，那么可能会从服务器触发它，伪造在 gif 的请求中发送的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:57:11.673

如果我了解您的问题，我认为您只有两个选择：

1.  从表单页面发送您的跟踪像素（假设您控制它）；或者
2.  仅在发出跟踪像素请求后提交表单（或者更安全，在获得非错误响应后）。

问题是 Mobile Safari 在标签页处于非活动状态时会完全进入休眠状态。我相信他们会立即进入睡眠状态（与原生 web 视图不同，您有两秒钟的时间来关闭您的应用程序并在应用程序“退出”之前执行您需要做的任何内务处理。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T15:28:28.503

您的问题没有可以在浏览器上实现的合理解决方案。这是由于（并且您已经介绍过）移动 safari 在后台运行后根本不会执行任何操作的事实。因此，您要么需要一个 10 秒的加载屏幕，这可能会导致转换，要么需要类似以下 hack/last-resort 的东西：

1）检测您是否在移动设备上

2）向您的服务器发出像素请求，以及初始提交（甚至从提交中捎带它）

3）在您的服务器端代码上创建一个回调，延迟 10 秒，然后将请求（标头和所有）转发给第三方。这至少必须包括用户代理和 IP。根据您的服务器端语言，欺骗 IP 可能很困难。

缺点：

更多的代码，这非常脆弱。我并不是说无论如何这是一个很好的解决方案。此外，您将丢失该像素发送给第三方的任何 cookie 信息，因为该像素可能托管在您无法控制的域上。如果第三方的实现在请求中需要 cookie 信息，则此解决方法将不起作用。此外，不会传递任何第三方像素特定数据，例如像素上的 ETag。

鉴于您正试图规避移动 safari 的基本行为（也就是在后台不执行 javascript），但是，我看不到任何可靠的客户端上执行此操作的选项。您的另一个选择是在您的域上设置一个 cookie，然后在他们下次加载您的一个页面时，触发像素。这假设用户将重新访问您的页面，这取决于您的用户可能会或可能不会以任何频率发生。

# android - 重新启动强制停止应用程序接收短信

> ID：15878009
> 
> 赞同：0
> 
> 时间：2013-04-08T11:34:15.990
> 
> 标签：android

如果强制停止，我正在尝试在收到短信时重新启动我的应用程序。这是我的代码。它没有重新启动应用程序。我是否应该尝试将接收器写为另一个类。在清单中：

```
 <uses-permission android:name="android.permission.SEND_SMS" />
   <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <receiver android:name=".MySMSbr"> 
     <intent-filter> 
        <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
     </intent-filter> 
    </receiver> 

 My mainActivity onCreate() :

   private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
BroadcastReceiver SMSbr;

  public void onCreate(Bundle savedInstanceState) {
    Toast.makeText(getApplicationContext(),"in OnCreate", Toast.LENGTH_LONG).show();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      
     SMSbr = new BroadcastReceiver() 
        {

          @Override
          public void onReceive(Context context,Intent intent) 
          {
              this.abortBroadcast();
              Toast.makeText(context, "in onReceive", Toast.LENGTH_LONG).show();
              toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                        AppSettings.getLoggingInterval(MainActivity.this));
              this.clearAbortBroadcast();
            }//end of onReceive method

          };//end of BroadcastReceiver

          IntentFilter SMSfilter = new IntentFilter(SMS_RECEIVED);
          this.registerReceiver(SMSbr, SMSfilter);
  }
    in togglelogging the service is started
    where is it going wrong. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:15:14.860

您在清单中声明 a `BroadcastReceiver`- 即静态接收器，但实际上您没有这样的类，并且您正在活动中创建动态接收器。

您实际上正在做的是在您的活动开始时注册您的接收器，但您想要相反的方式（一旦接收器接收到广播就启动您的活动/应用程序）。
您需要创建一个被调用的类，在`SMSbr extends BroadcastReceiver`那里您可以执行您的逻辑。

这样，您将始终注册接收器，并且当接收到 SMS 广播时，它将唤醒您的应用程序。

# python - 将 python 脚本作为 cgi apache 服务器运行

> ID：15878010
> 
> 赞同：8
> 
> 时间：2013-04-08T11:34:18.837
> 
> 标签：python, apache, cgi

我正在尝试使用 Apache 服务器使 python 脚本作为 cgi 运行。我的脚本看起来像这样：

```
 #!/usr/bin/python
  import cgi
  if __name__ == "__main__":

  print("Content-type: text/html")
  print("<HTML>")
  print("<HEAD>") 
```

我已经在 httpd.conf 中完成了必要的配置（在我看来）：

```
 <Directory "/opt/lampp/htdocs/xampp/python">
  Options +ExecCGI
  AddHandler cgi-script .cgi .py
  Order allow,deny
  Allow from all
  </Directory> 
```

我已经用 chmod 设置了脚本的执行权限

但是，当我尝试通过 localhost 访问脚本时，我在 headers:script.py 之前收到错误 500:End of script output 可能是什么问题？该脚本是在类似 Unix 的环境中创建的，所以我认为 clrf vs lf 的问题不成立。非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T15:19:34.900

我认为您在之后缺少打印声明

```
print("Content-type: text/html") 
```

CGI 脚本的输出应由两部分组成，由空行分隔。第一部分包含一些标头，告诉客户端接下来是什么类型的数据。

第二部分通常是 HTML，它允许客户端软件显示带有标题、内嵌图像等的格式良好的文本。

它可能看起来像

```
#!/usr/bin/env python

print "Content-Type: text/html"
print
print """
    <TITLE>CGI script ! Python</TITLE>
    <H1>This is my first CGI script</H1>
    Hello, world!
""" 
```

有关更多详细信息，请访问[python-cgi](http://docs.python.org/2/library/cgi.html)

对于python3

```
#!/usr/bin/env python3

print("Content-Type: text/html")
print()
print ("""
    <TITLE>CGI script ! Python</TITLE>
    <H1>This is my first CGI script</H1>
    Hello, world!
"""
) 
```

# mongodb - 子文档 MongoDB 中键的不同值（1 亿条记录）

> ID：15878011
> 
> 赞同：1
> 
> 时间：2013-04-08T11:34:21.407
> 
> 标签：mongodb, mapreduce, bigdata

我的“样本”集合中有 1 亿条记录。我想要另一个包含所有不同用户名“user.screen_name”的集合

我的 mongodb 数据库“样本”集合中有以下结构：

```
{
"_id" : ObjectId("515af34297c2f607b822a54b"),
"text" : "random text goes here",
"user" :
  {
    "id" : 972863366,
    "screen_name" : "xname",
    "verified" : false,
    "time_zone" : "Amsterdam",
   }
} 
```

当我尝试“distinct（'user.id）.length”之类的东西时，我收到以下错误：

```
 "errmsg" : "exception: distinct too big, 16mb cap", 
```

我需要一种**有效**的方法来拥有另一个集合，其中只有 {"user_name": "name"} 的不同用户在我的“样本”集合中。所以我可以查询这个新数据库的大小并获取不同用户的数量。（以及未来的进一步分析）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:29:21.160

我尝试了我在[这里](https://stackoverflow.com/questions/11782566/mongodb-select-countdistinct-x-on-an-indexed-column-count-unique-results-for)找到的解决方案，它运行良好:) .. 我会保留线程并添加我的代码以防有人需要它。

```
var SOURCE = db.sample;
var DEST = db.distinct;
DEST.drop();
map = function() {
  emit( this.user.screen_name , {count: 1});
}

reduce = function(key, values) {
  var count = 0;

  values.forEach(function(v) {
    count += v['count'];   
  });

  return {count: count};
};

res = SOURCE.mapReduce( map, reduce, 
    { out: 'distinct', 
     verbose: true
    }
    );

print( "distinct count= " + res.counts.output );
print( "distinct count=", DEST.count() ); 
```

问候

# python - AttributeError：数组实例没有属性“__trunc__”

> ID：15878012
> 
> 赞同：0
> 
> 时间：2013-04-08T11:34:23.820
> 
> 标签：python

我正在尝试使用 c-types 在 python 中创建一个二维数组。为此，我创建了两个模块 arrays.py 和 array2D.py

追溯是：

```
Traceback (most recent call last):

 File "C:\Python27\Lib\array2D.py", line 52, in <module>

 arr = Array2D(2,4)

 File "C:\Python27\Lib\array2D.py", line 15, in __init__

 self._theRows[i] = arrays.Array( numCols )

File "C:\Python27\Lib\arrays.py", line 37, in __setitem__

self._elements[ index ] = value

AttributeError: Array instance has no attribute '__trunc__' 
```

**代码**

**arrays.py 模块**

```
import ctypes

class Array:

#Creates an array with size elements.
def __init__( self, size ):
    assert size > 0, "Array size must be > 0"
    self._size = size
    print "sixe is %s" %self._size

 # Create the array structure using the ctypes module.
    PyArrayType = ctypes.c_int * size
    self._elements = PyArrayType()
    print "type is e", type(self._elements)
   #self._elements = ctypes.c_int * size

# Initialize each element.
    #for i in range(self._size):
    #self.clear( i )

# Returns the size of the array.
def __len__( self ):
    return self._size

# Gets the contents of the index element.
def __getitem__( self, index ):
    assert index >= 0 and index < len(self), "Array subscript out of range"
    return self._elements[ index ]

# Puts the value in the array element at index position.
 def __setitem__( self, index, value ):
     assert index >= 0 and index < len(self), "Array subscript out of range"
     print "Type is ", type(index)
     f._index = (index)
     self._elements[ index ] = value

 # Clears the array by setting each element to the given value.
  def clear( self, value ):
      for i in range( len(self) ) :
          self._elements[i] = value 
```

**array2D.py**

```
import arrays

class Array2D :
# Creates a 2-D array of size numRows x numCols.
    def __init__( self, numRows, numCols ):

 # Create a 1-D array to store an array reference for each row.
        self._theRows = arrays.Array( numRows )

# Create the 1-D arrays for each row of the 2-D array.
    for i in range( numRows ) :
        self._theRows[i] = arrays.Array( numCols )

# Returns the number of rows in the 2-D array.
    def numRows( self ):
        return len( self._theRows )

# Returns the number of columns in the 2-D array.
    def numCols( self ):
        return len( self._theRows[0] )

 # Clears the array by setting every element to the given value.
    def clear( self, value ):
        for row in range( self.numRows() ):
            row.clear( value )

# Gets the contents of the element at position [i, j]
    def __getitem__( self, ndxTuple ):
        assert len(ndxTuple) == 2, "Invalid number of array subscripts."
        row = ndxTuple[0]
        col = ndxTuple[1]
        assert row >= 0 and row < self.numRows() \
            and col >= 0 and col < self.numCols(), \
            "Array subscript out of range."
        the1dArray = self._theRows[row]
        return the1dArray[col]

# Sets the contents of the element at position [i,j] to value.
    def __setitem__( self, ndxTuple, value ):
        assert len(ndxTuple) == 3, "Invalid number of array subscripts."
        row = ndxTuple[0]
        col = ndxTuple[1]
        assert row >= 0 and row < self.numRows() \
        and col >= 0 and col < self.numCols(), \
            "Array subscript out of range."
        the1dArray = self._theRows[row]
        the1dArray[col] = value

Forming the 2d array using the following line

arr = Array2D(2,4)

print "arr is %s" %arr 
```

谁能让我知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:12:10.417

在我看来，在这里您尝试将实例存储`Array`到接受实例的数组中`ctypes.c_int`：

```
 # Create a 1-D array to store an array reference for each row.
        self._theRows = arrays.Array( numRows )

# Create the 1-D arrays for each row of the 2-D array.
    for i in range( numRows ) :
        self._theRows[i] = arrays.Array( numCols ) 
```

# symfony - 如何在 Symfony 2 中将 PHP 常量作为服务参数传递？

> ID：15878021
> 
> 赞同：7
> 
> 时间：2013-04-08T11:34:50.063
> 
> 标签：symfony, constants, yaml

使用配置文件定义服务时，如何将 PHP 常量（`CURLAUTH_DIGEST`在本例中）作为构造函数参数传递？

我**现在无法测试它，**但我假设：

```
services:
    my_service:
        class: "%my_service.class%"
        arguments: [CURLAUTH_DIGEST] 
```

不起作用，因为`CURLAUTH_DIGEST`已转换为`string`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T12:14:56.500

这是一种方法

1.  在配置中添加一行以包含`.php`配置

    `**app/config/config.yml**`

    ```
    imports:
        - { resource: constants.php } 
    ```

2.  创建一个新文件`constants.php`

    `**app/config/constants.php**`

    ```
    <?php

    $container->setParameter('curlauth.digest', CURLAUTH_DIGEST); 
    ```

3.  您现在可以在您的服务中访问此常量

    `**@Bundle/Resources/config/services.yml**`

    ```
    services:
        my_service:
            class: "%my_service.class%"
            arguments: [%curlauth.digest%] 
    ```

# asp.net - 使用 ServiceStack.Razor 我得到 IndexOutOfRangeException

> ID：15878022
> 
> 赞同：2
> 
> 时间：2013-04-08T11:34:59.807
> 
> 标签：asp.net, razor, servicestack

我正在努力`ServiceStack.Razor`工作，但我得到了一个`IndexOutOfRangeException`. 堆栈跟踪如下所示：

```
at ServiceStack.Text.Jsv.JsvTypeSerializer.EatMapKey(String value, Int32& i) 
at ServiceStack.Text.Common.DeserializeDictionary`1.ParseStringDictionary(String value)
at ServiceStack.Html.ViewDataDictionary.PopulateModelState() 
at ServiceStack.Razor.ViewPage`1.Init(IRazorViewEngine viewEngine, ViewDataDictionary viewData, IHttpRequest httpReq, IHttpResponse httpRes) 
at ServiceStack.Razor.Templating.TemplateService.InitTemplate[T](T model, ITemplate instance, IHttpRequest httpReq, IHttpResponse httpRes) 
at ServiceStack.Razor.Templating.TemplateService.ExecuteTemplate[T](T model, String name, String defaultTemplatePath, IHttpRequest httpReq, IHttpResponse httpRes) 
at ServiceStack.Razor.RazorFormat.ProcessRazorPage(IHttpRequest httpReq, ViewPageRef razorPage, Object dto, IHttpResponse httpRes) 
at ServiceStack.Razor.RazorFormat.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, Object dto) 
at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate) 
at ServiceStack.WebHost.Endpoints.Formats.HtmlFormat.SerializeToStream(IRequestContext requestContext, Object response, IHttpResponse httpRes) 
at ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions.WriteToResponse(IHttpResponse response, Object result, ResponseSerializerDelegate defaultAction, IRequestContext serializerCtx, Byte[] bodyPrefix, Byte[] bodySuffix) 
```

**设置**

**`Error.cs`**

```
public class Error
{
    public int TrackingNumber { get; set; }

    public string ClientName { get; set; }
}

[Route("/Errors", "GET")]
[Authenticate]
public class Errors : List<Error>
{

} 
```

**`service.cs`**

```
public class ErrorService : Service
{
    public object Get(Errors request)
    {
        var fakeError = new Error(){ TrackingNumber=1, ClientName="Test"};
        var fakeErrorList = new Errors();
        fakeErrorList.Add(fakeError);
        return fakeErrorList;
    }
} 
```

**`errors.cshtml`**

```
@inherits ViewPage<Errors>

<div>
    @Model.Count
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:15:54.017

因此，我对该错误的唯一解释是将 Errors 类反序列化为 View 的过程不喜欢您从 List 继承。您应该能够从 IList 继承，但是您需要实现整个接口。[根据this](https://stackoverflow.com/questions/898152/c-inheritance-problem-with-listt)和[this](https://stackoverflow.com/questions/5376203/inherit-listt)从 List 继承似乎不是一个好主意。如果您想从 List 继承，我能想到的最简单的解决方案是将其转换为 Service 中的 Array，并让您的视图从 Error[] 继承。

```
public class ErrorService : Service
{
    public object Get(Errors request)
    {
        var fakeError = new Error(){ TrackingNumber=1, ClientName="Test"};
        var fakeErrorList = new Errors();
        fakeErrorList.Add(fakeError);
        return fakeErrorList.ToArray();
    }
} 
```

错误.cshtml

```
@inherits ViewPage<Error[]>

<div>
    @Model.Count()
</div> 
```

# mysql - 如何安装 fulltext.search mysql django

> ID：15878023
> 
> 赞同：0
> 
> 时间：2013-04-08T11:35:01.167
> 
> 标签：mysql, django, installation

试图导入 SearchManager

```
from fulltext.search import SearchManager 
```

然后报错

```
ImportError: No module named fulltext.search 
```

我怎样才能安装这个模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:41:21.213

[Django MySQL 全文搜索](https://stackoverflow.com/questions/2248743/django-mysql-full-text-search)

您可以在 django 中使用全文搜索

MyItem.objects.filter(title__search="一些搜索文本")

一件事是-您不能从 Django 模型中定义全文索引，您需要直接在数据库中执行（使用 PHPMyAdmin 或 SQL 查询）

请参阅 Django 文档：[http ://docs.djangoproject.com/en/dev/ref/models/querysets/#search](http://docs.djangoproject.com/en/dev/ref/models/querysets/#search)

# c# - 将 gridview 数据转换为具有更新值的列表或 xml

> ID：15878024
> 
> 赞同：1
> 
> 时间：2013-04-08T11:35:01.323
> 
> 标签：c#, asp.net, xml, gridview

我有`GridView`控制权，我已经将它与对象数据源绑定，我想提供使用编辑模板更改值的工具。

当触发行更新时，我希望将我的 gridview 数据转换为 XML 或列表，以便我可以将该值传递给存储过程。任何提示如何做到这一点？

# sql - 检查索引碎片时“（”附近的语法不正确

> ID：15878027
> 
> 赞同：5
> 
> 时间：2013-04-08T11:35:05.830
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试使用 SQL 2008 R2 检查数据库中的索引碎片。

我正在使用以下代码，取自[http://msdn.microsoft.com/en-gb/library/ms189858(v=sql.100).aspx](http://msdn.microsoft.com/en-gb/library/ms189858(v=sql.100).aspx)，并进行了一些名称更改：

```
USE StockSystem;
GO
SELECT a.index_id, name, avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats (DB_ID(), OBJECT_ID(N'dbo.StockItems'),NULL, NULL, NULL) AS a
JOIN sys.indexes AS b ON a.object_id = b.object_id AND a.index_id = b.index_id; 
```

去

当我运行它时，我收到错误：

```
Msg 102, Level 15, State 1, Line 2
Incorrect syntax near '('. 
```

谁能发现我哪里出错了？

## 更新

奇怪的是，如果我调用这两个函数（DB_ID 和 OBJECT_ID）并获取值，然后替换主 select 语句中的值，一切正常。根据 MSDN，为什么我似乎不能在 SELECT 中使用这两个函数？

## 更新

为了回应 Akrem 的建议，我也尝试了这个，但得到了同样的错误。

```
USE StockSystem;
GO
SELECT a.index_id, name, avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats (DB_ID('StockSystem'), OBJECT_ID(N'dbo.StockItems'), NULL, NULL, NULL) AS a
JOIN sys.indexes AS b ON a.object_id = b.object_id AND a.index_id = b.index_id; 
```

## 更新

抱歉所有更新。我已经在带有数据库副本的 SQL2012 系统上尝试了相同的查询。这没有问题。我也尝试过相同的语句，但在不同的数据库上使用不同的名称，但在同一个 SQL 实例上。这也有效。

我想这是数据库的问题，所以我已经将副本恢复到测试 SQL 实例中。为这个恢复的副本运行索引统计信息有同样的问题。由于这是一个公司不能没有的生产数据库，因此我可以尝试的其他内容受到限制。

有什么想法吗？

## 更新

好吧，这很奇怪。如果我将 DB_ID 和 OBJECT_ID 从语句中取出，批处理就会完美运行。

```
use StockSystem

declare @dbid SMALLINT
declare @objectid INT

select @dbid = DB_ID('StockSystem'), @objectid = OBJECT_ID(N'dbo.StockItems')

SELECT a.index_id,name,avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats (@dbid,@objectid,NULL,NULL,NULL) AS a
JOIN sys.indexes AS b ON a.object_id = b.object_id AND a.index_id = b.index_id; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T11:57:30.510

*   [表值函数的意外错误](https://sqlblog.org/2011/10/20/unexpected-errors-from-table-valued-functions)

您的数据库可能设置为兼容级别 80 (SQL Server 2000)，并且 DB_ID 和 OBJECT_ID 函数不能用作动态管理函数的参数。

您应该将兼容性级别更改为更新的内容或在查询之前使用变量：

```
USE StockSystem;
GO
DECLARE
    @database_id INT = DB_ID(),
    @object_id   INT = OBJECT_ID(N'dbo.StockItems');

SELECT a.index_id, name, avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats (@database_id ,@object_id , NULL, NULL, NULL) AS a
JOIN sys.indexes AS b ON a.object_id = b.object_id AND a.index_id = b.index_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:39:46.347

尝试添加数据库名称

```
DB_ID("DataBaseName") 
```

**更新 ：**

请试试这个并告诉它好像有效

```
USE StockSystem;
GO
select  * from sys.dm_db_index_physical_stats(DB_ID(),null,null,null,null) 
```

# .net - 调整 RichTextBox 宽度以适应指定最大高度中的文本

> ID：15878030
> 
> 赞同：0
> 
> 时间：2013-04-08T11:35:14.340
> 
> 标签：.net, vb.net, controls

我有`RichTextBox`一个最大高度和一个可变宽度。

我想调整框的宽度，以便在没有滚动条的情况下适应所有文本。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:28:08.453

如果控件具有滚动条，您可以获得：

```
Public Declare Function GetWindowLong Lib "user32" Alias "GetWindowLongA" (ByVal hwnd As IntPtr, ByVal nIndex As Integer) As Integer 
```

然后在更改文本后调用这样的函数：

```
Private Sub ValidateTextBox(tb As RichTextBox)
    Dim Hdl As IntPtr = tb.Handle
    Dim Style, VBar As Integer

    tb.Width = iMinWidth
    Style = GetWindowLong(Hdl, GWL_STYLE)
    VBar = Style And WS_VSCROLL

    While VBar > 0 AndAlso tb.Width < iMaxWidth
        tb.Width += 24

        Style = GetWindowLong(Hdl, GWL_STYLE)
        VBar = Style And WS_VSCROLL
    End While
End Sub

Public Const WS_VSCROLL As Integer = &H200000
Public Const GWL_STYLE As Integer = (-16) 
```

# c# - 函数每次返回不同的 MD5 哈希

> ID：15878038
> 
> 赞同：7
> 
> 时间：2013-04-08T11:35:41.980
> 
> 标签：c#, md5

我编写了一个函数，它将文件的 URL 作为参数并返回该文件的 MD5 哈希值。

此函数（在开发环境中）生成的哈希与第三方工具为同一文件生成的哈希相匹配。

但是当它部署在我客户的 QA 环境中时，每次调用该函数时，该函数都会返回不同的值。

我做了一些谷歌搜索，发现问题可能是因为开发人员。服务器是 64 位的，而 QA 服务器是 32 位的。由于我无权访问客户端的服务器，因此我将其部署在另一台 32 位服务器中，发现即使在 32 位服务器中哈希值也匹配（功能按预期工作？）。

我也看过[这个问题](https://stackoverflow.com/questions/1347866/md5-file-hash-for-the-same-unchanged-file-is-different-each-time-c-sharp)。

这是我写的函数：

```
public static String GetMD5HashFromFile(String url)
{
    String response = String.Empty;
    HttpWebRequest aRequest = (HttpWebRequest)WebRequest.Create(url);
    using (HttpWebResponse aResponse = (HttpWebResponse)aRequest.GetResponse())
    {
        MD5 md5 = new MD5CryptoServiceProvider();
        byte[] retVal = md5.ComputeHash(aResponse.GetResponseStream());
        response = "MD5:" + BitConverter.ToString(retVal).Replace("-", string.Empty);
    }
    return response;
} 
```

我的问题是；这个函数返回各种值的原因是什么？我的功能有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:38:11.890

尝试添加日志记录。因此，首先将文件下载到字符串（将其写入磁盘的某个位置，以便稍后进行比较）。然后计算磁盘上的哈希。我在我的一个项目中遇到了这样的问题，在这种情况下，问题是代理服务器增加了一些响应。但是如果没有磁盘上的文件，您将无法比较它们。

# javascript - 对象内的变量范围

> ID：15878047
> 
> 赞同：0
> 
> 时间：2013-04-08T11:36:24.250
> 
> 标签：javascript, scope

myObject 有两个函数，第一个调用第二个，有没有办法在 callMe() 中查看变量 a？

```
var myObj =  {
   callMefirst: function() {
      var thisObj = this;
      var a;
      a = 'chocolate cookie';
      thisObj.callMe();
   },

   callMe: function() {
      alert(a);
   }
}
myObj.callMefirst(); 
```

否则我知道我可以将它作为参数传递，或者在对象的全局范围内设置 var a 但我有兴趣了解这种特定的范围情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:38:48.200

不。因为它是用`var`关键字定义的，所以它的作用域是定义它的函数。因此它只对该函数和该函数内定义的其他函数可见（你没有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:39:54.410

`a`是在函数中定义的，`callMefirst`并且只存在于这里。请记住，JavaScript 具有功能（词法）范围。因此，让`callMe`访问权限的最简单方法`a`是按照您的建议并将其定义在`myObj`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:53:32.060

您可以通过多种方式做到这一点；以下使用闭包。

```
var myObj = (function() {
   var a;

   return{
     callMefirst: function() {
        var thisObj = this;
        a = 'chocolate cookie';
        thisObj.callMe();
     },

     callMe: function() {
        alert(a);
     }
   }
})()
myObj.callMefirst(); 
```

使用闭包和对象初始化：

```
var myObjF = function(pass) {
   var a=pass;

   return{
     callMefirst: function() {
        var thisObj = this;
        thisObj.callMe();
     },

     callMe: function() {
        alert(a);
     }
   }
}
var myObj=myObjF("hello");
myObj.callMefirst(); 
```

使用函数作为对象：

```
var myObjF = function(pass) {
   this.a=pass;

    this.callMefirst = function() {
        var thisObj = this;
        thisObj.callMe();
     };
}
myObjF.prototype.callMe = function() {
    alert(a);
}

var myObj=new myObjF("hello");
myObj.callMefirst(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:50:56.030

试试这个代码：

```
var myObj =  {
  a:"",       
  callMefirst: function() {
      var thisObj = this;
      this.a = 'chocolate cookie';
      thisObj.callMe();
   },

   callMe: function() {
      alert(this.a);
   }
}
myObj.callMefirst(); 
```

# c# - 变量恢复为初始值

> ID：15878048
> 
> 赞同：3
> 
> 时间：2013-04-08T11:36:30.143
> 
> 标签：c#, asp.net, variables, printing, response

在下面，我删除了不相关的代码。我创建了一个名为`printString`. 该`calculateButton_Click`方法做了一堆东西，然后我想使用`response.write`. 然而，该`printString`变量似乎并没有停止“默认”。当我单击`printButton_Click`. 修剪后的代码如下：

```
 public partial class _Default : System.Web.UI.Page
    {
        private string _printString = "DEFAULT";

        protected void Page_Load(object sender, EventArgs e)
        {
            Response.Buffer = true;
        }

        protected void calculateButton_Click(object sender, EventArgs e)
        {
            _printString = "";

_printString = "HARRY POTTER™: THE EXHIBITION Invoice<BR>Today's date: " + DateTime.Today.ToString("dd/MM/yyyy") + "<BR>Visit date: " +
            dateSelectedString + "<BR><BR><BR>Adult tickets: " + numAdult + "<BR>Child tickets: " + numChild + "<BR>Family Passes: " + numFamily +
            "<BR>Payment method: " + paymentType + "<BR>Total to pay: $" + totalPrice.ToString("0.00");

    }

    protected void printButton_Click(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Write(_printString);
        Response.Flush();
        Response.End();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:38:04.210

单击 printButton 时，它使用`DEFAULT`设置变量时的值。

```
private string _printString = "DEFAULT"; 
```

是你的问题。您需要维护`printString`变量被修改时的状态。简单地分配`_printString`给另一个值并不会持久化更改。您可以编写一个函数以在单击`_printString`时分配正确的值`printButton`，使用`ViewState`或直接`Session`在单击函数中分配 _printString，`printButton`如下所示。

```
protected void printButton_Click(object sender, EventArgs e)
{
    _printString = "Harry Potter";

    Response.Clear();
    Response.Write(_printString);
    Response.Flush();
    Response.End();
} 
```

将导致`Harry Potter`被写入页面。

要使用`Session`：

```
protected void calculateButton_Click(object sender, EventArgs e)
{
       _printString = "HARRY POTTER™: THE EXHIBITION Invoice<BR>Today's date: " + DateTime.Today.ToString("dd/MM/yyyy") + "<BR>Visit date: " +
        dateSelectedString + "<BR><BR><BR>Adult tickets: " + numAdult + "<BR>Child tickets: " + numChild + "<BR>Family Passes: " + numFamily +
        "<BR>Payment method: " + paymentType + "<BR>Total to pay: $" + totalPrice.ToString("0.00");

       Session["PrintString"] = _printString;
}

protected void printButton_Click(object sender, EventArgs e)
{
    _printString = (string)Session["PrintString"];

    Response.Clear();
    Response.Write(_printString);
    Response.Flush();
    Response.End();
} 
```

**视图状态：**

```
ViewState["PrintString"] = "HarryPotter"; 
```

然后要检索值，您可以简单地执行以下操作：

```
 _printString = (string)ViewState["PrintString"]; 
```

[http://msdn.microsoft.com/en-gb/library/ms972976.aspx](http://msdn.microsoft.com/en-gb/library/ms972976.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:42:18.670

由于 HTTP 是无状态的（即使是控件），所有（实例）变量都在页面生命周期结束时处理。您可以改用`ViewState`,`HiddenField`或`Session`变量。

```
private string PrintString 
{
    get
    {
        if (ViewState["PrintString "] == null || string.IsNullOrEmpty((String)ViewState["PrintString"]))
        {
            ViewState["PrintString"] = "DEFAULT";
        }
        return ViewState["PrintString"].ToString();
    }
    set { ViewState["PrintString"] = value; }
} 
```

还有其他选择：

[**在 ASP.NET 应用程序中管理持久用户状态的九个选项**](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:45:39.240

按钮单击事件导致回发，并且该`_printString`值未保留。您需要通过[Session](http://msdn.microsoft.com/en-us/library/ms972429.aspx)或[Viewstate](http://msdn.microsoft.com/en-gb/library/ms972976.aspx)将其存储在计算方法中，然后将其设置在打印中，例如：-

```
 protected void calculateButton_Click(object sender, EventArgs e)
 {
     _printString = "";
     _printString = "HARRY POTTER™: THE EXHIBITION Invoice<BR>Today's date: " + DateTime.Today.ToString("dd/MM/yyyy") + "<BR>Visit date: " +
        dateSelectedString + "<BR><BR><BR>Adult tickets: " + numAdult + "<BR>Child tickets: " + numChild + "<BR>Family Passes: " + numFamily +
        "<BR>Payment method: " + paymentType + "<BR>Total to pay: $" + totalPrice.ToString("0.00");
     Session["bigstring"] = _printString;
 }

 protected void printButton_Click(object sender, EventArgs e)
 {
     Response.Clear();
     _printString = Session["bigstring"].ToString();
     Response.Write(_printString);
     Response.Flush();
     Response.End();
 } 
```

# performance - 如何使用 Rapidminer 在测试集上进行测试？

> ID：15878053
> 
> 赞同：1
> 
> 时间：2013-04-08T11:36:43.187
> 
> 标签：performance, evaluation, rapidminer

我正在使用 Rapidminer 进行分析。我在几个模型上使用了交叉验证来获得最佳工作模型。现在我想使用这个模型在一个单独的测试集上进行测试，我使用拆分数据来估计性能。

如何使用测试集？据我所知，所有的验证模块都使用了创建模型的训练集。我可以使用哪种性能度量来获取模型和我的测试集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:17:54.693

使用“应用模型”运算符，您的模型作为第一个输入，您的测试集作为第二个输入。该运算符将返回一个带标签的数据集，该数据集是您的数据输入，带有一些额外的特殊属性，例如预测和置信度。“性能”运算符需要此属性来衡量应用在测试集上的模型的性能。

这是一个使用“示例”存储库中的训练和测试集的小示例。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<process version="5.3.007">
  <context>
    <input/>
    <output/>
    <macros/>
  </context>
  <operator activated="true" class="process" compatibility="5.3.007" expanded="true" name="Process">
    <process expanded="true">
      <operator activated="true" class="retrieve" compatibility="5.3.007" expanded="true" height="60" name="Golf" width="90" x="45" y="30">
        <parameter key="repository_entry" value="//Samples/data/Golf"/>
      </operator>
      <operator activated="true" class="decision_tree" compatibility="5.3.007" expanded="true" height="76" name="Decision Tree" width="90" x="179" y="30"/>
      <operator activated="true" class="retrieve" compatibility="5.3.007" expanded="true" height="60" name="Golf-Testset" width="90" x="179" y="120">
        <parameter key="repository_entry" value="//Samples/data/Golf-Testset"/>
      </operator>
      <operator activated="true" breakpoints="before,after" class="apply_model" compatibility="5.3.007" expanded="true" height="76" name="Apply Model" width="90" x="313" y="30">
        <list key="application_parameters"/>
      </operator>
      <operator activated="true" class="performance" compatibility="5.3.007" expanded="true" height="76" name="Performance" width="90" x="447" y="30"/>
      <connect from_op="Golf" from_port="output" to_op="Decision Tree" to_port="training set"/>
      <connect from_op="Decision Tree" from_port="model" to_op="Apply Model" to_port="model"/>
      <connect from_op="Golf-Testset" from_port="output" to_op="Apply Model" to_port="unlabelled data"/>
      <connect from_op="Apply Model" from_port="labelled data" to_op="Performance" to_port="labelled data"/>
      <connect from_op="Performance" from_port="performance" to_port="result 1"/>
      <portSpacing port="source_input 1" spacing="0"/>
      <portSpacing port="sink_result 1" spacing="0"/>
      <portSpacing port="sink_result 2" spacing="0"/>
    </process>
  </operator>
</process> 
```

# javascript - 在 JavaScript 中动态设置对象

> ID：15878055
> 
> 赞同：0
> 
> 时间：2013-04-08T11:36:51.877
> 
> 标签：javascript

对我来说似乎很复杂。首先，我有这个清单：

```
 liste_path_categories.push(
    { index: null
        , letter: "letter1"
        , type: key
        , picture_url: "url1"
        , id_categ: null
        , response: "Answer here"
    }); 
```

我想要的是从这个大列表中提取这种形式的对象：

```
 data["String1"]["String2"]= String3 
```

和 ：

```
 String1=list_path_categories[i].letter
    String2=list_path_categories[i].id_categ
    String3=list_path_categories[i].response 
```

例子：

```
 data['A']['12'] : "A_answer" 
```

要声明数据，我这样做：

```
 var data = new Object(new Object); 
```

如何设置数据中的所有值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:45:45.800

你的问题很模糊，但你的意思是这样的吗？在属于另一个对象的对象中设置动态属性？

```
data['A']['12'].answer = "A_answer" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:50:16.500

您必须在属性访问中使用变量，而不是使用字符串：

```
var data = {};

if (!data[String1]) {
    data[String1] = {}; // make sure that data[String1] exists and is an object
}

data[String1][String2] = String3; 
```

如果要对数组中的元素执行此操作，则必须[遍历数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)。

* * *

PS：我建议使用比`StringX`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:51:45.063

首先创建构造函数（在 OOP 术语中）：

```
var ctor_object = function(letter,id_categ,response)
{ 
    this.letter = letter;
    this.id_cated = id_categ;
    this.response = response;
} 
```

（在一般情况下，您应该省略 ctor_ 语法并直接在对象类的名称之后命名）

然后在您的类别列表中使用您的构造函数：

```
var length = liste_path_categories.length,
    element = null;
for (var i = 0; i < length; i++)
{
  element = liste_path_categories[i];
  my_obj = new ctor_object(element.letter,element.id_categ,element.reponse)
  // Do something with my_obj
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:52:37.300

您可以使用[Array.forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)方法遍历 liste_path_categories 并构造您的*数据*对象。

例子：

```
var liste_path_categories = [];
var data = {};

liste_path_categories.push(...);
...
liste_path_categories.push(...);

liste_path_categories.forEach(function(element) {
    data[element.letter] = {};
    data[element.letter][element.id_categ] = element.response;
}); 
```

jsFiddle 示例：http: [//jsfiddle.net/3ZvNf/](http://jsfiddle.net/3ZvNf/)

# windows-phone-7 - 如何在Windows Phone App中动态创建具有图像的按钮矩阵

> ID：15878056
> 
> 赞同：1
> 
> 时间：2013-04-08T11:36:52.057
> 
> 标签：windows-phone-7, imagebutton

我是 Windows 手机应用程序开发的新手。我正在创建一个游戏。

我对游戏的要求是，就像我想创建一个8x8 尺寸**的按钮矩阵，**它应该动态创建并且只能通过代码处理。我还想给按钮提供图像，以便在按钮单击时更改。

请尽早帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:57:14.963

在 XAML 或 XNA 中？

如果您使用 XAML，您可以简单地使用两个循环创建 64 个按钮并将它们放置在网格中。只需为每个按钮定义其宽度、高度和边距，即可将其定位在父网格内。

如果您使用 XNA，请再次使用两个循环生成 64 个按钮并手动计算按钮的正确尺寸和位置。

每个按钮作为其内容可以包含 BitmapImage 以及普通字符串。

```
var btn = new Button();
btn.Content = new BitmapImage("..."); 
```

* * *

由于我再次被问到如何做到这一点，我只想在这里相关的代码片段：

```
var rows = 5;
var columns = 6;

var grid = new Grid();

for (var i = 0; i < rows; ++i)
    grid.RowDefinitions.Add(new RowDefinition
        {
            Height = new GridLength(1, GridUnitType.Star)
        });

for (var i = 0; i < columns; ++i)
    grid.ColumnDefinitions.Add(new ColumnDefinition
        {
            Width = new GridLength(1, GridUnitType.Star)
        });

for (var i = 0; i < rows; ++i)
{
    for (var j = 0; j < columns; ++j)
    {
        var control = new Button();
        Grid.SetRow(control, i);
        Grid.SetColumn(control, j);
        grid.Children.Add(control);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T17:45:48.130

```
 Button txtf = new Button();
ImageBrush br=new ImageBrush();
 ImageBrush br=new ImageBrush();
br.ImageSource= new BitmapImage(new Uri("Assets/fb/FB.jpg" ,UriKind.Relative));
txtf.Background = br; 
```

好的，我认为它会很好，试试这个问候开发者穆罕默德·伊姆兰

# varnish - Varnish 从 X-Forwarded-for 中删除公共 IP

> ID：15878059
> 
> 赞同：0
> 
> 时间：2013-04-08T11:36:56.380
> 
> 标签：varnish, varnish-vcl

我面临一个问题，即在特定情况下清漆没有发送中间代理 IP 或公共 IP。场景如下：

*   一些酒店/公司配置了 squid 代理，所有 Internet 流量都通过 Squid 路由。

*   访问我公司网站的用户首先点击负载均衡器，然后是 Varnish，然后是 Apache

*   Apache 配置了 mod_geoip。我网站上的代码根据 IP 地址进行国家/地区重定向。

问题 ：

*   当用户（在该 squid 代理后面）访问负载均衡器后面的我公司的网站时 -> VARNISH -> Apache - 这里 apache 仅获取内部 IP（他的私有 IP）和负载均衡器内部 IP 作为 X-forwarded-for 并因此基于 IP重定向失败！

在 Apache 日志（配置为记录 X-Forwarded-IP）中，我看到用户私有 IP 和我的负载均衡器私有 IP。

172.10.5.10，LoadBalancerIP - - [.......]

*   同一用户在访问另一个没有 Varnish 的站点时，点击负载均衡器 - > Apache - 这里 apache 将用户私有 IP 和用户公共 IP 作为 X-forwarded-for 和基于 IP 的国家/地区重定向工作正常。

在 Apache 日志（配置为记录 X-Forwarded-IP）中，我看到用户私有 IP，然后他的公共 IP 也被记录。

172.10.5.10，公共IP - - [.......]

我的清漆配置如下。

```
 if (req.restarts == 0) {
                   if (req.http.x-forwarded-for) {
                 set req.http.X-Forwarded-For =
                     req.http.X-Forwarded-For + ", " + client.ip;
                   } else {
                 set req.http.X-Forwarded-For = client.ip;
                   }
           } 
```

PS：我已经用谷歌搜索了我能找到的所有链接，每个链接都给出了以下 Varnish 配置

现在要解决这个问题，我不得不绕过 varnish，现在网站流量直接到达 Apache，但我需要让 Varnish 回到原位，以从缓存和 Speedy 交付中获取服务器内容。

如果有人可以指导我如何解决此问题，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:15:36.707

上述问题已解决。归功于 Mithrandir @ Varnish IRC 频道。谢谢！下面提到的更改是解决问题所必需的。

在 default.vcl 的开头添加：

```
import std; 
```

在“ if (req.http.x-forwarded-for) ”下方添加：

```
std.collect(req.http.x-forwarded-for); 
```

*   做清漆配置测试并重新加载。这应该开始显示公共 IP。

*   以下是 vmod_std 文档的解释：

> 收集
> 
> ```
>  Prototype
>           collect(HEADER header)
> 
>    Return value
>           Void
> 
>    Description
>           Collapses the header, joining the headers into one.
> 
>    Example
>           std.collect(req.http.cookie); This will collapse several Cookie:
>           headers into one, long cookie header. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T02:18:09.890

在 Varnish 4 中，这不再需要，[请参阅此处的升级信息](https://www.varnish-cache.org/docs/4.0/whats-new/upgrading.html#x-forwarded-for-is-now-set-before-vcl-recv)

# iphone - 应用 CIFIlter 后设置 UIImageView 内容模式

> ID：15878060
> 
> 赞同：12
> 
> 时间：2013-04-08T11:37:00.233
> 
> 标签：iphone, ios, objective-c, uiimageview, core-image

感谢您的关注。

这是我的代码

```
 CIImage *result = _vignette.outputImage;
self.mainImageView.image = nil;
//self.mainImageView.contentMode = UIViewContentModeScaleAspectFit;
self.mainImageView.image = [UIImage imageWithCIImage:result];
self.mainImageView.contentMode = UIViewContentModeScaleAspectFit; 
```

在这里`_vignette`正确设置了过滤器，并且图像效果正确应用于图像。

我正在使用分辨率为 500x375 的源图像。我的 imageView 几乎具有 iPhone 屏幕的分辨率。所以为了避免拉伸，我使用了 AspectFit。

但是在我将结果图像分配回我的 imageView 时应用效果后，它会拉伸。不管`UIViewContentMode`我用哪个。它不起作用。`ScaleToFill`无论我给出什么过滤器，它似乎总是适用。

知道为什么会这样吗？任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T18:35:38.677

(1) Aspect Fit*确实会*拉伸图像 - 以适合。如果您根本不想拉伸图像，请使用中心（例如）。

(2)`imageWithCIImage`给你一个非常奇怪的野兽，一个不基于 CGImage 的 UIImage，因此不受图层显示的正常规则的影响。它实际上只是 CIImage 的一个薄包装，这不是您想要的。您必须通过 CGImage 将 CIFilter 输出转换（渲染）为 UIImage，从而为您提供一个实际上有一些位（CGImage，位图）的 UIImage。我在这里的讨论为您提供了演示代码：

[http://www.aeth.com/iOSBook/ch15.html#_cifilter_and_ciimage](http://www.apeth.com/iOSBook/ch15.html#_cifilter_and_ciimage)

换句话说，在某些时候你必须调用 CIContext`createCGImage:fromRect:`从你的 CIFilter 的输出中生成一个 CGImageRef，并将它传递给一个 UIImage。在您这样做之前，您的过滤器操作的输出不会是真正的 UIImage。

或者，您可以将图像从`imageWithCIImage`图形上下文中绘制出来。例如，您可以将其绘制到图像图形上下文中，然后使用*该*图像。

你*不能*做的是`imageWithCIImage`直接显示图像。那是因为它不是图像！它没有底层位图（CGImage）。那里没有。它只是一组用于导出图像的 CIFilter 指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-22T15:41:17.013

这是 Swift 的答案，灵感来自[这个问题](https://stackoverflow.com/q/50471353/3151675)和[user1951992 的解决方案](https://stackoverflow.com/a/24936652/3151675)。

```
let imageView = UIImageView(frame: CGRect(x: 100, y: 200, width: 100, height: 50))
imageView.contentMode = .scaleAspectFit

//just an example for a CIFilter
//NOTE: we're using implicit unwrapping here because we're sure there is a filter
//(and an image) named exactly this
let filter = CIFilter(name: "CISepiaTone")!
let image = UIImage(named: "image")!
filter.setValue(CIImage(image: image), forKey: kCIInputImageKey)
filter.setValue(0.5, forKey: kCIInputIntensityKey)

guard let outputCGImage = filter?.outputImage,
    let outputImage = CIContext().createCGImage(outputCGImage, from: outputCGImage.extent) else {
        return
}

imageView.image = UIImage(cgImage: outputImage) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T14:34:42.127

我只是花了一整天的时间。我遇到了方向问题，然后是质量差的输出。

使用相机拍摄图像后，我会这样做。

```
NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

这会导致旋转问题，所以我需要对它执行此操作。

```
UIImage *scaleAndRotateImage(UIImage *image)
{
    int kMaxResolution = image.size.height; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();  

    return imageCopy;  
} 
```

然后当我应用我的过滤器时，我会这样做（特别感谢这个线程 - 特别是 matt 和 Wex）

```
 -(UIImage*)processImage:(UIImage*)image {

            CIImage *inImage = [CIImage imageWithCGImage:image.CGImage];

            CIFilter *filter = [CIFilter filterWithName:@"CIColorControls" keysAndValues:
                        kCIInputImageKey, inImage,
                        @"inputContrast", [NSNumber numberWithFloat:1.0],
                        nil];

    UIImage *outImage = [filter outputImage];

//Juicy bit
            CGImageRef cgimageref = [[CIContext contextWithOptions:nil] createCGImage:outImage fromRect:[outImage extent]];

            return [UIImage imageWithCGImage:cgimageref];
        } 
```

# 3d - 3D 环境中的 XNA 2D 对象

> ID：15878061
> 
> 赞同：1
> 
> 时间：2013-04-08T11:37:00.690
> 
> 标签：3d, xna-4.0

我目前正在使用 XNA 4.0 开发一个 3D 游戏，我有一个 3D 环境、一个可控制的角色和一个跟随角色启动并运行的摄像机。但现在我想在 3D 环境中绘制 2D 图像。2D图像的原因是我想要像爆炸一样的塞尔达传说风行者。

谁能给我关于如何构建它的资源、建议或代码片段（如果它真的很简单）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:21:45.830

您试图达到的效果称为**广告牌**。四边形放置在 3D 空间中并以某种方式旋转，使其始终面向相机（球形广告牌）。广告牌也可以限制为围绕单个轴旋转（圆柱形广告牌）。

*   [HLSL 圆柱形广告牌（用于 XNA）](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Billboarding.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:24:17.640

您可以使用 MAtrix.CreateBillboard-Method 来 coorectly 旋转平面：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.createbillboard (v=xnagamestudio.40).aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.createbillboard(v=xnagamestudio.40).aspx)

# php - PHP MVC 类根据 url 决定执行什么方法

> ID：15878062
> 
> 赞同：3
> 
> 时间：2013-04-08T11:37:04.800
> 
> 标签：php, url-routing

我正在尝试学习 MVC，并且我想在 URL 为 www.example.com/store 并且另一个购物车页面的 URL 为 www.example.com/store/cart 时显示商店页面。这两种方法都在一个类中：

```
class store extends controller {
    function __construct() {
        parent::__construct ();
    }

    function Store() { //this should display the store page
        $this->view->render ( "store" );
    }

    function cart() { //this should display the cart page
        $this->view->render ( "store", "cart.php" );
    }
} 
```

该方法`$this->view->render()`包括带有 html 代码的页面。如何根据 url 决定执行哪种方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T12:33:55.383

我可以看到您正在尝试编写自己的 MVC，因此我将尝试解释您在执行此操作时应该注意的事项。

编写 MVC 时要做的第一件事是利用前端控制器模式。这意味着每个 HTTP 请求都将通过一个文件 index.php。这将帮助您在一个文件中配置您的应用程序。你可以通过总是打开你的让说来做到这一点：

```
www.example.com/index.php/controller/method/param1/param2 
```

或者您可以强制用户使用 .htaccess 文件浏览 index.php。如需参考检查其他框架，如 Codeigniter 和 CakePHP，请查看它们如何使用 .htaccess 文件。

当您在前端控制器文件中时，您应该考虑将 HTTP 请求路由到适当的控制器/方法。确实有很多方法可以实现这一目标，而这取决于您找出实现这一目标的最佳方法。

无论如何，您需要 Router 类来分析您的 URL，并从 URL 中提取您需要的控制器/方法/参数。然后，当您知道需要调用什么控制器/方法时，您需要将实例化控制器的 Dispatcher 类，并调用您需要的方法。您还应该考虑要传递给您的方法的参数，以便您可以在那里使用它们。

解决这个问题的最简单方法是使用查询字符串。

所以假设你有这样的 URL：

```
http://localhost/test/index.php?controller=home&method=welcome 
```

您可以轻松获取控制器和方法名称。

现在您可以执行以下操作：

```
// Get controller and method names
$controller = $_GET['controller'];
$method = $_GET['method'];

// Instantiate controller object
$app = new $controller();

// Call method on you controller object
call_user_func_array(array($app, $method)); 
```

这就像你可以做的最简单的事情只是为了玩耍。一旦你掌握了这一点，编写你的路由器类，使其看起来像这样：

```
http://localhost/test/index.php/controller/method/param1/param2 
```

无论如何，您需要这些课程：

**前端控制器**，因此每个请求都通过一个文件，这是您引导应用程序、注册类自动加载、配置所有内容等的地方……这不是一个类，而是一个包含启动所有内容的程序代码的文件。

**路由器**将分析 URL 并将您想要传递给调用方法的控制器、方法和参数返回给您。

**Dispatcher**将实例化 Controller 并调用 Method，将 Params 传递给您的 Method。

然后所有的控制权都交给你系统的用户，然后你在你的控制器/方法中施展你的魔法。

在调度请求时，您也可以使用它：

```
call_user_func_array(array($app, $method), $params); 
```

这样，您将 $params 传递给 $method，因此您可以在方法中使用 $params。

另外，查看反射类，这可以帮助您分析要调用的方法是否存在，如果不存在，则应调用 HTTP 404 等...

您的问题没有简单的答案，但我希望这会有所帮助，享受构建系统的乐趣并不断改进，直到您得到完美:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:39:17.517

您需要有一个单独的路由器类来向控制器发送路由请求。我建议查看/复制[Symfony 的 Router](http://symfony.com/doc/master/book/routing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:17:55.737

我曾经为家庭酿造方法做过类似的事情。使用 .htaccess (apache) / Web.config (iis) 将所有请求重定向到以下脚本。

```
// include callable controllers here
$partsA = explode("?", $_SERVER['REQUEST_URI']); // split querystring
$partsB = explode("/", $partsA[0]); // get url parts
if (count($partsB) < 2)
    die("missing controller in url");
elseif (count($partsB) < 3)
    die("missing action in url");
$className = $partsB[1];
$methodName = $partsB[2];
if (class_exists($className))
    if (!is_subclass_of($className, "controller"))
        die(htmlspecialchars("Class $className doesn't extend controller")); // prevents use of unauthorized classes
    else
        $controller = new $className();
else
    die(htmlspecialchars("Class $className doesn't exist"));

if (!method_exists($controller, $methodName))
    die(htmlspecialchars("Method $methodName doesn't exist"));
else
    $controller->$methodName(); 
```

# c# - 扩展列表类上的 linq 操作

> ID：15878063
> 
> 赞同：2
> 
> 时间：2013-04-08T11:37:07.847
> 
> 标签：c#, linq, list

我在类 (PersonCollection) 上使用 linq 操作，该类是从名为 Person 的对象列表扩展而来的。

```
public class PersonCollection: List<Person>
{
          //various functions
}

public class Person
{
           public string name{ get; set; }
           public string address { get; set; }
} 
```

最初我使用字符串列表来存储该类所包含的数据，并且 linq 操作可以工作

```
 List<List<String>> oldList = GetList();

    oldList = (List<List<string>>)oldList .OrderBy(s =>s[index_of_name]).ToList(); 
```

这可行，但我显然想摆脱使用本质上是快速代码的概念证明

应用于这些新类的相同类型的 linq 操作不起作用：

```
 people = (PersonCollection)orderedData.OrderBy(s => s.name]).ToList(); 
```

这是我得到的错误：

```
Unable to cast object of type 'System.Collections.Generic.List`1[Person]' to type 'PersonCollection'. 
```

如果我投到 List 它可以工作，这就是我现在使用的

```
 people = (List<Person>)people .OrderBy(s => s.name]).ToList(); 
```

我想使用从人员列表扩展而来的 PersonCollection 类，我的方法哪里出错了？无论是编码还是数据分类方式的一般选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T11:41:59.303

你`PersonCollection`是一个`List<Person>`，但不是相反。

所以你不能将 a`List<Person>`转换为 a `PersonCollection`。您必须创建一个类型的新对象`PersonCollection`

您可以使用构造函数执行此操作：

```
public class PersonCollection : List<Person>
{
  public PersonCollection( List<Person> list )
    : base( list )
  {
  }
} 
```

然后你可以`PersonCollection`从 a 构造 a`List<Person>`

```
List<Person> list = people.OrderBy(s => s.name]).ToList();

PersonCollection pc = new PersonCollection( list ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:08:28.770

作为 Nicholas 答案的附录，我建议创建一个自定义扩展方法以允许使用更短的语法：

```
public static class MyListExtensions {
    public static PersonCollection ToPersonCollection(this IEnumerable<Person> list) {
        return new PersonCollection(list.ToList());
    }
} 
```

作为旁注，我建议重新考虑您的命名法：您`PersonCollection`真的只是代表 a`Collection`还是真实的`List`. 这可能看起来很迂腐，但为了使您的代码更具可读性，通常值得非常*精确地命名。*

# java - jsp sql连接套接字错误mssql server2008R2

> ID：15878064
> 
> 赞同：1
> 
> 时间：2013-04-08T11:37:16.197
> 
> 标签：java, sql-server, jsp

我随机收到以下错误，你们能帮我解决这个问题吗？？？？

请注意错误开始的下面的行..

> [在 org.apache.jsp.jsp.getBookingUserSlots_jsp._jspService(org.apache.jsp.jsp.getBookingUserSlots_jsp:275)]

* * *

```
Error in dboperation getBookingUserSlots.jsp.............java.sql.SQLException: [Microsoft][SQLServer 2000 Driver for JDBC]Error establishing socket.
Error in dboperation getBookingUserSlots.jsp.............[Microsoft][SQLServer 2000 Driver for JDBC]Error establishing socket.
java.sql.SQLException: [Microsoft][SQLServer 2000 Driver for JDBC]Error establishing socket.
    at com.microsoft.jdbc.base.BaseExceptions.createException(Unknown Source)
    at com.microsoft.jdbc.base.BaseExceptions.getException(Unknown Source)
    at com.microsoft.jdbc.base.BaseExceptions.getException(Unknown Source)
    at com.microsoft.jdbc.sqlserver.tds.TDSConnection.<init>(Unknown Source)
    at com.microsoft.jdbc.sqlserver.SQLServerImplConnection.open(Unknown Source)
    at com.microsoft.jdbc.base.BaseConnection.getNewImplConnection(Unknown Source)
    at com.microsoft.jdbc.base.BaseConnection.getImplConnection(Unknown Source)
    at com.microsoft.jdbc.base.BaseStatement.setupImplConnection(Unknown Source)
    at com.microsoft.jdbc.base.BaseStatement.<init>(Unknown Source)
    at com.microsoft.jdbc.base.BasePreparedStatement.<init>(Unknown Source)
    at com.microsoft.jdbc.base.BaseConnection.prepareStatement(Unknown Source)
    at com.microsoft.jdbc.base.BaseConnection.prepareStatement(Unknown Source)
    at org.apache.jsp.jsp.getBookingUserSlots_jsp._jspService(org.apache.jsp.jsp.getBookingUserSlots_jsp:275)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:325)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at LoginFilter.doFilter(LoginFilter.java:46)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

```
String driverName111 = (String) arrLstSQLServer.get(3); 
```

将从 context.xml 返回以下代码

```
<drivername>com.microsoft.jdbc.sqlserver.SQLServerDriver</drivername> 
```

* * *

这就是我的 file.jsp 的样子

```
<html>
  <head>
    <base href="<%=basePath%>">

    <title>Booking Agent Virtual Labs</title>

    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">

  </head>
   <body>

<%              
HashMap hmReadXML11=new HashMap();
citbook.ReadDBSolveITXml solveitXML11=new citbook.ReadDBSolveITXml();
hmReadXML11 = solveitXML11.hmXML;
ArrayList arrLstSQLServer  = (ArrayList) hmReadXML11.get("mssqlserver");
String userName = (String) arrLstSQLServer.get(0);
String userPassword = (String) arrLstSQLServer.get(1);              
String url = (String) arrLstSQLServer.get(2)+";databaseName=DBNAME;user="+userName+";password="+userPassword;
String driverName111 = (String) arrLstSQLServer.get(3); 
if(userPassword==null){
    userPassword="";
}
userPassword = userPassword.trim();
Class.forName(driverName111).newInstance();
con11 = DriverManager.getConnection (url, userName, userPassword);                              
%>
</body>

</html> 
```

用户名和密码从

上下文.xml

```
<mssqlserver>
    <username>xxxxx</username>
    <password>xxxxxxx</password>
    <url>jdbc:sqlserver://192.168.X.XXX\DBINSTANCE:1305</url>
    <drivername>com.microsoft.jdbc.sqlserver.SQLServerDriver</drivername>
</mssqlserver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:44:17.133

我猜你使用了错误的驱动程序：

```
Error in dboperation getBookingUserSlots.jsp.............[Microsoft][SQLServer 2000 Driver for JDBC]Error establishing socket. 
```

看一下：[Microsoft SQL Server JDBC Driver 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=21599)它支持SQLServer2008R2

* * *

以下行返回什么：

```
String driverName111 = (String) arrLstSQLServer.get(3); 
```

为什么得到（3）？

# c - 劫持系统调用

> ID：15878068
> 
> 赞同：3
> 
> 时间：2013-04-08T11:37:21.147
> 
> 标签：c, linux, kernel, kernel-module, system-calls

我正在编写一个内核模块，我需要劫持/包装一些系统调用。我正在暴力破解 sys_call_table 地址，并且我正在使用 cr0 禁用/启用页面保护。到目前为止一切顺利（一旦完成，我将公开整个代码，所以如果有人愿意，我可以更新这个问题）。

无论如何，我注意到如果我`__NR_sys_read`在卸载内核模块时劫持了内核 oops，并且所有 konsoles (KDE) 都会崩溃。请注意，这不会发生在`__NR_sys_open`or`__NR_sys_write`中。

我想知道为什么会这样。有任何想法吗？

PS：请不要走 KProbes 的方式，我已经知道了，我不可能使用它，因为最终产品应该可以使用，而无需重新编译整个内核。

**编辑**：（添加信息）

我在卸载之前恢复了原始功能。另外，我创建了两个测试用例，一个`_write`只包含一个，一个包含`_read`. 一个`_write`卸载正常，但一个`_read`卸载然后崩溃内核）。

**编辑**：（源代码）

我现在在家，所以我现在不能发布源代码，但是如果有人想要，我可以在我开始工作后立即发布示例代码。（约 5 小时）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:58:34.473

这可能是因为内核线程当前位于内部`read`- 如果调用您的 read-hook 不会锁定模块，则无法安全卸载它。

这可以解释“konsoles”（？）崩溃，因为它们可能当前正在执行`read`系统调用，等待数据。当它们从实际的系统调用返回时，它们将跳转到您的函数曾经所在的位置，从而导致问题。

卸载会比较麻烦，但是需要先去掉钩子，然后等待所有调用者退出钩子函数，再卸载模块。

我最近一直在玩 linux syscall hooking，但我绝不是内核专家，所以如果这不正常，我很抱歉。

**PS：** [这种技术](https://github.com/oblique/articles/tree/master/kernel_mode_hooking)可能比暴力破解 sys_call_table 更可靠。`sys_close`如果已经上钩，我见过的蛮力技术往往会导致内核恐慌。

# c# - 为什么页脚只显示在最后一页？

> ID：15878069
> 
> 赞同：1
> 
> 时间：2013-04-08T11:37:25.317
> 
> 标签：c#, itextsharp, footer

我正在尝试制作一个将报价保存在 pdf 文件中的程序。它工作得很好，但我的页脚有问题。我按照这些[说明](http://www.codeproject.com/Tips/573907/Generating-PDF-using-ItextSharp-with-footer-csharp)进行操作。

不幸的是，页脚只显示在最后一页。我该如何解决这个问题？我正在寻找一个最简单的解决方案，因为我刚刚开始使用 C#。

这是我的代码：

```
public override void OnStartPage(PdfWriter writer, Document document)
  {
    base.OnStartPage(writer, document);

    PdfPTable tab = new PdfPTable(1);
    PdfPCell cell = new PdfPCell(new Phrase("Testing..."));
    cell.Border = 0;
    tab.TotalWidth = 300F;
    tab.AddCell(cell);
    tab.WriteSelectedRows(0, -1, 300, 30, writer.DirectContent);
  }
}

private void button1_Click(object sender, EventArgs e) // drukowanie oferty w PDF
{
  if (dataGridView1.Rows.Count > 0)
  {
    Document oferta = new Document(iTextSharp.text.PageSize.A4, 20, 20, 20, 20);
    SaveFileDialog saveFile = new SaveFileDialog();

      saveFile.FileName = textBox7.Text.Trim()+".pdf";
      saveFile.Title = "Zapisz ofertę (PDF)";
      saveFile.Filter = "Adobe Reader|*.pdf|Wszystkie pliki|*.*";

      if (saveFile.ShowDialog() != DialogResult.Cancel)
      {
        try
        {
          PdfWriter wri = PdfWriter.GetInstance(oferta, new FileStream(saveFile.FileName, FileMode.Create));

          oferta.AddAuthor(label1.Text);
          oferta.AddCreator("Creator");
          oferta.AddTitle(sNrOferty);

          oferta.Open();

          PdfContentByte cb = wri.DirectContent;

          iTextSharp.text.Font czcionkaTytul = new iTextSharp.text.Font(iTextSharp.text.FontFactory.GetFont("C:\\Windows\\Fonts\\Verdana.ttf", BaseFont.CP1257, 11.0F, iTextSharp.text.Font.BOLD, BaseColor.BLACK));
          iTextSharp.text.Font czcionkaTabela = new iTextSharp.text.Font(iTextSharp.text.FontFactory.GetFont("C:\\Windows\\Fonts\\Verdana.ttf", BaseFont.CP1257, 11.0F, iTextSharp.text.Font.NORMAL, BaseColor.BLACK));
          iTextSharp.text.Font czcionkaNaglowek = new iTextSharp.text.Font(iTextSharp.text.FontFactory.GetFont("C:\\Windows\\Fonts\\Verdana.ttf", BaseFont.CP1257, 11.0F, iTextSharp.text.Font.BOLD, BaseColor.BLACK));
          iTextSharp.text.Font czcionkaFirma = new iTextSharp.text.Font(iTextSharp.text.FontFactory.GetFont("C:\\Windows\\Fonts\\Verdana.ttf", BaseFont.CP1257, 11.0F, iTextSharp.text.Font.NORMAL, BaseColor.LIGHT_GRAY));

          // dodawanie logo - działa, nie ruszać :D
          iTextSharp.text.Image logo = iTextSharp.text.Image.GetInstance(Properties.Resources.Biomedica_Logo_Mailsignature_02, System.Drawing.Imaging.ImageFormat.Png);
          logo.SetAbsolutePosition(420, 750);
          logo.ScalePercent(30);
          cb.AddImage(logo);

          // dodawanie tekstów
          cb.BeginText();

          // some text lines are added here
          //...

          //dodawanie danych klienta
          // imie i nazwisko
          cb.SetColorFill(BaseColor.BLACK);
          cb.SetFontAndSize(BaseFont.CreateFont("C:\\Windows\\Fonts\\Verdanab.ttf", BaseFont.CP1257, BaseFont.NOT_EMBEDDED), 11.0F);
          cb.SetTextMatrix(300, 700);
          cb.ShowText(textBox1.Text.Trim());

          // pozycja
          cb.SetFontAndSize(BaseFont.CreateFont("C:\\Windows\\Fonts\\Verdana.ttf", BaseFont.CP1257, BaseFont.NOT_EMBEDDED), 11.0F);

          cb.SetTextMatrix(300, 680);
          cb.ShowText(textBox2.Text.Trim());
          //Organizacja
          cb.SetTextMatrix(300, 660);
          cb.ShowText(textBox3.Text.Trim());
          //adres
          cb.SetTextMatrix(300, 640);
          cb.ShowText(textBox4.Text.Trim());
          //miejscowosc
          cb.SetTextMatrix(300, 620);
          cb.ShowText(textBox5.Text.Trim());

          //nr oferty
          cb.SetFontAndSize(BaseFont.CreateFont("C:\\Windows\\Fonts\\Verdanab.ttf", BaseFont.CP1257, BaseFont.NOT_EMBEDDED), 11.0F);
          cb.ShowTextAligned(1, "Oferta cenowa nr: " + textBox7.Text.Trim(), 300, 580, 0);
          cb.EndText();

          PdfPTable tabela = new PdfPTable(dataGridView1.Columns.Count); //poniżej - definiowanie tabeli i przenoszenie danych z datagridview

          float[] szerokości = new float[] 
    {
      dataGridView1.Columns[0].Width,
      dataGridView1.Columns[1].Width,
      dataGridView1.Columns[2].Width,
      dataGridView1.Columns[3].Width,
      dataGridView1.Columns[4].Width,
      dataGridView1.Columns[5].Width,
      dataGridView1.Columns[6].Width
    };
          tabela.WidthPercentage = 95;
          tabela.SetWidths(szerokości);
          tabela.HorizontalAlignment = 1; // 0 - lewo, 1 - środek , 2 - prawo
          tabela.SpacingBefore = 170.0F;
          tabela.SpacingAfter = 12.0F;
          PdfPCell komorka = null;

          foreach (DataGridViewColumn c in dataGridView1.Columns)
          {
            komorka = new PdfPCell(new Phrase(new Chunk(c.HeaderText, czcionkaNaglowek)));
            komorka.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
            komorka.VerticalAlignment = PdfPCell.ALIGN_CENTER;
            tabela.AddCell(komorka);
          }

          if (dataGridView1.Rows.Count > 0)
          {
            for (int i = 0; i < dataGridView1.Rows.Count; i++)
            {
              for (int j = 0; j < dataGridView1.Columns.Count; j++)
              {
                komorka = new PdfPCell(new Phrase(dataGridView1.Rows[i].Cells[j].Value.ToString(), czcionkaTabela));
                komorka.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
                komorka.VerticalAlignment = PdfPCell.ALIGN_CENTER;
                tabela.AddCell(komorka);
              }
            }
          }
          oferta.Add(new Paragraph("Biomedica Poland Sp. z o.o.", czcionkaFirma));
          oferta.Add(new Paragraph("ul. Raszyńska 13", czcionkaFirma));
          oferta.Add(new Paragraph("05-500 Piaseczno", czcionkaFirma));
          oferta.Add(new Paragraph("tel: +48 (22) 737 59 96", czcionkaFirma));
          oferta.Add(new Paragraph("fax: +48 (22) 737 59 94", czcionkaFirma));
          oferta.Add(new Paragraph("www.biomedica.pl", czcionkaFirma));

          oferta.Add(tabela); //dodawanie tabeli 

          oferta.Add(new Paragraph("Oferta ważna do: " + dateTimePicker2.Value.ToLongDateString(), czcionkaTabela));
          oferta.Add(new Paragraph("Proponowany termin dostawy: " + textBox6.Text.Trim() + " dni.", czcionkaTabela));
          oferta.Add(new Paragraph("Termin płatności: " + textBox8.Text.Trim() + " dni.", czcionkaTabela));

          oferta.Add(new Paragraph(30.0f, "Obowiązujące ceny mogą ulec zmianie w przypadku:", czcionkaNaglowek));
          oferta.Add(new Paragraph("   * wzrostu kursów walut powyżej o powyżej 5%", czcionkaNaglowek));
          oferta.Add(new Paragraph("   * zmian stawek cła", czcionkaTabela));
          oferta.Add(new Paragraph("   * lub podatków związanych z obrotem towarowym", czcionkaTabela));

          oferta.Add(new Paragraph(30.0f, "Ofertę wystawił/a:", czcionkaTabela));
          oferta.Add(new Paragraph(label1.Text, czcionkaTabela));
          oferta.Add(new Paragraph(label2.Text, czcionkaTabela));
          oferta.Add(new Paragraph("Tel: " + label3.Text, czcionkaTabela));
          oferta.Add(new Paragraph("e-mail: " + label4.Text, czcionkaTabela));

          wri.PageEvent = new PDFFooter();
          oferta.Close();

        }
        catch (DocumentException dex)
        {
          MessageBox.Show(dex.ToString());
        }
        catch (Exception ex)
        {
          MessageBox.Show(ex.ToString());
        }
      }
  }
  else
  {
    MessageBox.Show("Brak produktów w ofercie", "Pusta oferta", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
  }
} 
```

除了此页脚之外，此代码没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:47:35.263

[正如我在iText in Action](http://itextpdf.com/book)一书中所写，您不应该在`OnStartPage`方法中添加页脚。使用`OnEndPage`您参考的文章中描述的方法。如果您想知道原因：请阅读本书。

此外，如书中所述，您需要在打开文档之前设置页面事件：

```
PdfWriter wri = PdfWriter.GetInstance(oferta, new FileStream(saveFile.FileName, FileMode.Create));
oferta.AddAuthor(label1.Text);
oferta.AddCreator("Creator");
oferta.AddTitle(sNrOferty);
wri.PageEvent = new PDFFooter();
oferta.Open(); 
```

每次创建新页面时都会触发页面事件。如果您仅在关闭文档之前添加页面事件，则不会在所有已完成的页面上触发该事件。换句话说：你提到的文章是错误的。

编写 iTextSharp 代码时请使用官方文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:50:38.047

在 OnStartPage 中添加页脚不起作用。

这是一个例子：

```
public override void OnEndPage(PdfWriter writer, Document document)
        {
            base.OnEndPage(writer, document);

            int pageN = writer.PageNumber;
            String text = "Page " + pageN + " of ";
            float len = bf.GetWidthPoint(text, 8);

            Rectangle pageSize = document.PageSize;

            cb.SetRGBColorFill(100, 100, 100);

            cb.BeginText();
            cb.SetFontAndSize(bf, 8);
            cb.SetTextMatrix(pageSize.GetLeft(40), pageSize.GetBottom(30));
            cb.ShowText(text);
            cb.EndText();

            cb.AddTemplate(template, pageSize.GetLeft(40) + len, pageSize.GetBottom(30));

            cb.BeginText();
            cb.SetFontAndSize(bf, 8);
            cb.ShowTextAligned(PdfContentByte.ALIGN_RIGHT, 
                "Printed On " + PrintTime.ToString(), 
                pageSize.GetRight(40), 
                pageSize.GetBottom(30), 0);
            cb.EndText();
        } 
```

你可以在这里查看整个代码。

[创建页脚和页眉](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T19:01:05.287

```
document = new iTextSharp.text.Document();

HeaderFooter footer = new HeaderFooter(new Phrase("footer string here"), false);
footer.Alignment = iTextSharp.text.HeaderFooter.BOTTOM;
document.Footer = footer;

document.Open(); 
```

我不得不从这段代码中调整为只在最后一页上显示页脚，然后页脚才会出现在每一页上。所以我想回答这里发布的原始问题，可以在每一页上显示一个页脚。

# java - 在安全方法中创建新对象

> ID：15878070
> 
> 赞同：0
> 
> 时间：2013-04-08T11:37:31.370
> 
> 标签：java, spring

在使用 Java Spring 的应用程序中，使用 @Secured("ROLE_USER") 实现了一个方法。在这种方法中，我无法创建新的其他对象。但是，这个方法不能创建其他对象依赖于@Secured? 我怎样才能用这种方法创建一些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:39:02.187

```
@Secured("ROLE_USER") 
```

对您能够编写的代码没有影响，它是部署应用程序时可访问性的规则。

# windows-phone-8 - 是否可以使用 WindowsPhone8 中的 ShareMediaTask 从隔离存储共享 PDF 文件？

> ID：15878082
> 
> 赞同：2
> 
> 时间：2013-04-08T11:38:15.320
> 
> 标签：windows-phone-8

我想共享一个存储在隔离存储中的 PDF 文件。是否可以使用 WindowsPhone8 中的 ShareMediaTask 从隔离存储共享 PDF 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:25:28.757

从我在线阅读的内容来看，ShareMediaTask 无法访问IsolatedStorage
[类似的问题](https://stackoverflow.com/questions/13855377/usage-of-sharemediatask-along-with-isolated-storage-image)

# java - 将列表 A 中的元素添加到特殊成员相等的列表 B 的元素中

> ID：15878084
> 
> 赞同：0
> 
> 时间：2013-04-08T11:38:19.317
> 
> 标签：java, arraylist

我想将一个列表中的对象添加到 Java 中另一个列表中的对象成员中。要添加的对象有一个成员，该成员标识另一个列表中的唯一元素。

有没有简单的方法可以做到这一点？

例如，在代表舰队的列表中添加每个水手到他的船。

```
class Sailor{
 Integer ship_id;
}

class Ship {
 Integer ship_id;
 List<Sailor> sailors;
}

List<Sailor> sailors;
List<Ship> fleet; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:46:24.390

最简单的方法是创建从 Id 到实际`Ship`对象的关联。

例如，您可以`Map<Integer, Ship>`在代码中的某个位置（这取决于结构，甚至可以作为`Ship`.

有了这个`Map`，它只是一个迭代你的问题`Sailors`，并添加到相应的`Ship`.

```
Map<Integer, Ship> shipMap = ....;

for(Sailor sailor: sailors) {
    shipMap.get(sailor.shipId()).addSailor(sailor);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:45:43.077

> 在代表舰队的列表中添加每个水手到他的船上。

不太清楚这意味着什么，但如果你正确地覆盖了 equals 和 ahscode（一致的、传递的、对称的、relfexive）。然后，您可以使用[List.contains()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)检查对象是否在列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:52:43.543

据我了解，您需要以下内容：

```
//Add every sailor to his ship in a list representing the fleet.
    public void addSailorToFleet(){
        for(Sailor sailor : sailors){
            for(Ship ship : fleet){
                if(sailor.ship_id == ship.ship_id){
                    ship.sailors.add(sailor);
                }
            }
        }
    } 
```

这具有 O(n^2) 复杂度。

另一种使用 Map 存储引用的解决方案（由 pcalcao 提供）以空间换时间。根据您的上下文，您可以选择其中任何一个。

使用地图存储参考的另一个缺点是，您总是需要在添加新船时更新地图。

# linux - 使用 ffmpeg 和 red5 预录 flv 视频的直播

> ID：15878088
> 
> 赞同：1
> 
> 时间：2013-04-08T11:38:21.883
> 
> 标签：linux, ffmpeg, red5, rtmp, live-streaming

我的目标是实现以下步骤：-

1.  使用 ffmpeg 预录的 flv 视频的 rtmp 直播。

2.  视频应该像电视台一样连续播放。

我们目前正在使用 red5 和 ffmpeg 来实现这个目标，并且我们已经使用以下转换命令成功地将预录的单个视频的实时流发布到 jwplayer：

```
for i in *.avi; do ffmpeg -i $i -acodec copy -vcodec copy -f flv rtmp://localhost/oflaDemo/livestream 
```

但是当我们需要一个接一个地直播两个视频时，问题就来了。用户必须再次单击播放按钮才能播放第二个视频，这不是电视台的东西，而是我们需要为用户连续播放流，而不是在每个流结束时单击播放按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T20:37:59.527

作为替代方案，我可以建议使用 Wowza Streaming Engine（商业软件，虽然开发者许可证是免费的，但有连接限制和 180 天有效期）。我尝试了 ffmpeg 连接路线，但总而言之，大文件一团糟。

使用 Wowza，您可以通过在 Java 中创建自己的简单模块或使用预制模块（[http://www.wowza.com/forums/content.php?145 -How-to-schedule-streaming-with-Wowza-Streaming-Engine-ServerListenerStreamPublisher](http://www.wowza.com/forums/content.php?145-How-to-schedule-streaming-with-Wowza-Streaming-Engine-ServerListenerStreamPublisher) )

我已经这样做了，并且有几个预先录制的视频文件的实时流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:22:18.697

也许这很有帮助，使用 ffmpeg 连接媒体文件：

[http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files)

# jquery - 将对象数组发布到 mvc 控制器

> ID：15878091
> 
> 赞同：0
> 
> 时间：2013-04-08T11:38:41.360
> 
> 标签：jquery, asp.net-mvc-4

我在 mvc4 中使用 ajax post 到控制器，

我的代码控制器是：

```
[HttpPost]
public JsonResult UpdateAllSettings(int PresetID,List<CustomerAjaxServiceSettingPoco> customerServiceSettings)
{ 
```

和 CustomerAjaxServiceSettingPoco 是：

```
 public class CustomerAjaxServiceSettingPoco
    {
        public int ID { get; set; }
        public string ClientSettingValue { get; set; }
    } 
```

我的 javascript 是：

```
 var customerServiceSettings = new Array();
        $('.settings_user').each(function () {
            customerServiceSettings[customerServiceSettings.length] = { 'ID': $(this).data('settingsid'), 'ClientSettingValue': $(this).val() };
        });

$.ajax({
        url: '/Services/UpdateAllSettings?PresetID=' + PresetID,
        type: 'POST',
        data: { 'customerServiceSettings':JSON.stringify( customerServiceSettings) },
        traditional: true,
        dataType: 'json',
        success: function (result) {
            do...
        }
    }); 
```

仍然处于调试模式，我得到“customerServiceSettings count=0”和“PresetID = 1”我做错了什么？在火灾错误中，帖子来源是：参数 customerServiceSettings [{"ID":1,"ClientSettingValue":"False"},{"ID":2,"ClientSettingValue":"False"},{"ID":3, "ClientSettingValue":"False"},{"ID":4,"ClientSettingValue":"False"},{"ID":5,"ClientSettingValue":"True"},{"ID":6,"ClientSettingValue ":"True"},{"ID":9,"ClientSettingValue":"True"},{"ID":10,"ClientSettingValue":"False"},{"ID":11,"ClientSettingValue": "真"},{"ID":12,"ClientSettingValue":"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:48:16.070

尝试添加**contentType**和`stringify`整个对象，如下所示：

```
$.ajax({
        type: 'POST',
        dataType: 'json',
        url: '...',
        data: JSON.stringify({ steps: ['1', '2', '3'] }),
        contentType: 'application/json; charset=utf-8',
}); 
```

# android - Android 更改可见性不起作用

> ID：15878093
> 
> 赞同：0
> 
> 时间：2013-04-08T11:38:46.480
> 
> 标签：android, android-imageview, runnable

简单的纸牌游戏设置，创建`columns`卡片的行数和数量：

```
 TableLayout tableCards = new TableLayout(this);
    RelativeLayout.LayoutParams relLayParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    relLayParams.addRule(RelativeLayout.CENTER_IN_PARENT);

    tableCards.setLayoutParams(relLayParams);

    int i = 0;
    StringBuilder sbCardsDebug = new StringBuilder('\n');
    for (int r = 0; r < rows; r++) {
        // create a new row
        TableRow tr = new TableRow(this);
        tr.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT, TableLayout.LayoutParams.WRAP_CONTENT));

        for (int c = 0; c < columns; c++) {
            ImageView card = new ImageView(this);
            card.setTag("" + i);
            card.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));

            card.setImageDrawable(bitmapCardBackScaled);

            tr.addView(card);

            card.setOnClickListener(cardClickListener);

            i++;
        }

        // add the row:
        tableCards.addView(tr);

    }

    relativeLayoutCardsHolder.addView(tableCards); 
```

在监听器的某个地方，我有一个这样的代码部分：

```
 imageView.setVisibility(View.INVISIBLE); 
```

这`imageView`是一张卡（我设置了断点也记录了它，它显示了正确的卡。

问题是：它不会变得不可见。

我在想也许我不在一个好的线程中，或者在设置隐形之后我应该需要做些什么吗？

我试过了：

```
 imageView.post(new Runnable() {

            public void run() {
                imageView.setVisibility(View.INVISIBLE);
            }
        }); 
```

和

```
 TableLayout parent = (TableLayout) imageView.getParent().getParent();
                parent.invalidate();
                parent.requestLayout(); 
```

并没有成功。请提出任何建议，我没有想法，谢谢。

编辑1：

作为建议，我也尝试过 postDelayed ：

```
 imageView.postDelayed(new Runnable() {

            public void run() {
                imageView.setVisibility(View.INVISIBLE);
            }
        }, 600); 
```

监听器主体是从第 353 行到第 424 行调用几个带有动画的类，传递引用，它会揭示我的肮脏工作，也会显示业务逻辑（NDA 协议），你对哪一部分感兴趣？- 最少执行 1000 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:49:46.150

如果它是正确的 ImageView，它必须工作。

```
imageView.setAlpha(0); 
```

希望有帮助。

# javascript - 调用构造函数后，Backbone 或 JavaScript 保持模型的状态

> ID：15878098
> 
> 赞同：1
> 
> 时间：2013-04-08T11:38:58.870
> 
> 标签：javascript, backbone.js

每次我调用“this.model = new Unidade();”时，this.model 都会将最后一个值的一些值保存在那里。

this.model.id => 变为 null，但其他属性保留最后一个模型的值。

模型来源

```
window.Unidade = Backbone.Model.extend({

urlRoot : $urlPadrao + "cliente/externo/unidade",

defaults: { // setting defaults to null or "" 
},

initialize: function () {
    ... // Just initialize the validators methods    
},

getDefaults: function() {
    // returns the same values of defaults
    // since I can't get a "new" model
}

}); 
```

在我看来：

```
this.model = new Unidade();
// this.model may be already populated... I'm trying to create a new one
// that's the problem, it keeps some values of the last one
// Shouldn't give me a new model populate with the defaults? 
```

为了记录，我没有弄乱原型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:52:30.880

我设法获得了这个巫术的来源，不知何故，主干正在获取这些属性，然后在模型的原型上进行设置，从而使它们成为静态的。好诡异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:59:07.457

这些属性是数组吗？由于我在本文中发现的内容，我发现我的基本上被视为传递引用：

[Backbone.js 模型中的数组本质上是静态的？](https://stackoverflow.com/questions/9974354/arrays-in-a-backbone-js-model-are-essentially-static)

# mysql - MySQL根据列值授予权限？

> ID：15878100
> 
> 赞同：1
> 
> 时间：2013-04-08T11:39:12.340
> 
> 标签：mysql, database-permissions

我正在尝试向具有“经理”访问权限的某个用户授予访问权限。他们能够`SELECT`，`UPDATE`但仅限于他们自己组中的人。数据库是`redflame`，表是`payroll`。

表格的一部分是这样的：

```
+------+---------+--------+-----------+--------+
| Dept | Manager | Name   | Birthdate | Salary |
+------+---------+--------+-----------+--------+
|    1 | Y       | BOB    | 1/1/1     |  50000 |
|    1 | N       | BILL   | 2/2/2     |  40000 |
|    1 | N       | BART   | 3/3/3     |  70000 |
|    2 | Y       | JIM    | 4/4/4     |  40000 |
|    2 | N       | JANET  | 5/5/5     |  50000 |
... 
```

我只想允许经理`SELECT`和`UPDATE`特权，但只允许他的组。我试过，

```
GRANT SELECT (Dept, Manager, Name, Birthdate),
      UPDATE (Dept, Manager, Name, Birthdate)
   ON redflame.payroll WHERE Dept = '1'
   TO 'Bob'@'localhost'; 
```

我知道这行不通，但是您如何`Bob`根据他的许可来实现`Dept`？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:01:02.867

为每个部门创建一个视图并授予这些权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:20:17.173

根据 MySQL 手册：

[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

> 通常，数据库管理员首先使用 CREATE USER 创建帐户，然后使用 GRANT 定义其权限和特征。

在您的 php 代码中，当您向工资表添加新记录时，您必须执行以下操作（我正在编写伪代码）：

```
if((new->Dept == 1) and (new->Manager == 'Y'))
{
      if (user with name == new->Name doesn't exist)
      {
            Create a new user with name = new->Name
            Grant SELECT and UPDATE privileges to the newly created user ON redflame.payroll table
      }
      else
      {
            error: user already exists!
      }
} 
```

当您更新工资表中的记录时：

```
if(the record was a Manager and he is updated to non Manager)
{
      DROP USER with name = old->Name
}

if(the record was not a Manager and he is updated to Manager)
{
      if (user with name == new->Name doesn't exist)
      {
            Create a new user with name = new->Name
            Grant SELECT and UPDATE privileges to the newly created user ON redflame.payroll table
      }
      else
      {
            error: user already exists!
      }
} 
```

当您从工资表中删除记录时：

```
if((old->Dept == 1) and (old->Manager == 'Y'))
{
      if (user with name == old->Name exists)
      {
            DROP USER with name = old->Name
      }
} 
```

如果您对数据库具有 root 访问权限，则可以创建 ON INSERT、ON UPDATE 和 ON DELETE 触发器。然后使用这个逻辑，编写 SQL 代码。否则，在 php.ini 中实现它。

# ruby-on-rails - 在创建操作中使用内置 has_many 关系导致批量分配错误

> ID：15878108
> 
> 赞同：0
> 
> 时间：2013-04-08T11:39:35.300
> 
> 标签：ruby-on-rails, params, mass-assignment

我有一个批量分配错误，我只能用 UGLY 代码修复。我一定做错了什么。让我解释：

我的 Rails 应用程序客户有很多联系人。客户页面显示属于该客户的联系人列表。我希望能够将新联系人添加到列表中。所以我使用...将客户端传递给联系人控制器

```
<%= link_to('new contact', new_contact_path(client_id: @client)) %> 
```

在联系人控制器中......

```
def new
 client=Client.find(params[:client_id])
 @contact=client.contacts.new
end

def create
  @client = Client.find(params[:contact][:client_id])
  @contact= @client.contacts.build(params[:contact])
      if @contact.save
 ... 
```

“保存”会导致一个不足为奇的错误：

> 无法批量分配受保护的属性：client_id

因为联系人参数包括在联系人模型中不是（也不应该是） attr_accessible 的 client_id

我知道如何解决问题的唯一方法是单独设置每个参数（不包括 client_id），如下所示：

```
@contact= @client.contacts.build(first_name: params[:contact][:first_name], last_name:     params[:contact][:first_name], email: params[:contact][:email]) 
```

这种方法有效，但似乎一切都是错误的。当然是一些更优雅的选择。任何帮助表示赞赏。（是的，我是 Rails 新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:48:17.593

要跳过告诉您应该如何修复错误的部分，我想首先告诉您应该如何进行编码 :) 如果我错了，请纠正。

在`Routes.rb`你应该放（如果不是这样的话）：

```
resources :client do
    resources : contacts
end 
```

然后，在你的`view`文件中，你应该放这样的东西：

```
<%= link_to('new contact', new_client_contact_path(@client)) %> 
```

这样，您不必在创建操作中做任何事情，rails 将管理所有其他事情。这就是它应该做的方式

编辑：

只是为了让它更清楚。在`new`你的`contacts`控制器中你应该把：

```
user= user.find(params[:user_id])
#2nd you build a new one
@contact= user.contacts.build 
```

在控制器中的`create`操作中`contacts`，您应该输入：

```
user = User.find(params[:user_id])
#2nd you create the contact with arguments in params[:contact ]
@contact = user.contact.create(params[:contact ])
response ..... 
```

# android - 恢复 backstack 中不是最顶部的 Fragment

> ID：15878109
> 
> 赞同：5
> 
> 时间：2013-04-08T11:39:35.800
> 
> 标签：android, android-fragments, onresume, back-stack

给定的应用程序流程显示在图形和文字描述如下。

![申请流程](https://i.stack.imgur.com/FO2ur.png)

1.  通过设置，片段 1 是最低的片段，但不在后台堆栈中`disallowAddToBackStack`。
2.  片段 2 被推入堆栈，使用`fragmentTransaction.addToBackStack()`.
3.  片段 1 的新实例被压入堆栈。
4.  最顶部的片段（片段 1）从堆栈中弹出。
5.  活动 2 成为前台。
6.  活动 1 成为前台。

这是我用来处理片段的通用方法：

```
private void changeContainerViewTo(int containerViewId,  Fragment fragment, 
                                   Activity activity, String backStackTag) {

    if (fragmentIsAlreadyPresent(containerViewId, fragment, activity)) { return; }
    final FragmentTransaction fragmentTransaction = 
                 activity.getFragmentManager().beginTransaction();
    fragmentTransaction.replace(containerViewId, fragment);
    fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    if (backStackTag == null) {
        fragmentTransaction.disallowAddToBackStack();
    } else {
        fragmentTransaction.addToBackStack(backStackTag);
    }
    fragmentTransaction.commit();
} 
```

# 问题

当活动 1 在最后一步恢复时，片段 1 的最低实例也恢复。此时片段 1 重新`null`打开`getActivity()`。

# 问题

*   为什么恢复堆栈中不是最顶部的片段？
*   如果恢复片段是正确的 - 我应该如何处理分离的片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T21:51:51.797

当一个`Activity`没有显示 UI 然后来显示 UI 时，`FragmentManager`关联的所有片段都将消失，您需要恢复其状态。

正如[文档](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)所说：

> 在很多情况下，一个片段可能大部分被拆除（例如当放置在没有显示 UI 的后台堆栈时），但它的状态不会被保存，直到它拥有的 Activity 实际需要保存它的状态。

在您的`Activity` `onSaveInstanceState`and`onRestoreInstanceState`中，尝试保存您的`Fragment`引用，然后使用以下内容恢复它们：

```
public void onSaveInstanceState(Bundle outState){
    getFragmentManager().putFragment(outState,"myfragment", myfragment);
}
public void onRetoreInstanceState(Bundle inState){
    myFragment = getFragmentManager().getFragment(inState, "myfragment");
} 
```

试试这个，祝你好运！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T14:36:52.663

Android 操作系统可以并且将在它认为合适的时候创建和销毁片段。当您启动 Activity 2 并返回到 Activity 1 时，可能会发生这种情况。我会确认它不是主动显示的片段。可能发生的情况是，您看到它在执行片段 2 的创建步骤之前为片段 1 执行了一些创建步骤。

至于处理分离的片段，你应该看看这个[页面](http://developer.android.com/training/basics/fragments/communicating.html)。它的要点是您应该只在某些片段函数中使用 getActivity（基于[片段生命周期](http://developer.android.com/guide/components/fragments.html#Creating)）。这可能意味着您必须将一些逻辑移至其他功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T20:33:30.967

我不知道这会如何发生，除非（根据您描述步骤的方式）您误解了 fragmentTransaction.addToBackStack() 的工作原理：它管理哪些事务放置在后台堆栈中，而不是片段中。

来自安卓文档：

> 通过调用 addToBackStack()，替换事务被保存到后退堆栈，因此用户可以通过按“后退”按钮来撤销事务并带回前一个片段。

因此，如果您的第 2 步在代码中看起来像这样：

```
fragmentTransaction.replace(containerViewId, fragment2);
fragmentTransaction.addToBackStack();
fragmentTransaction.commit(); 
```

和你的第 3 步：

```
fragmentTransaction.disallowAddToBackStack()//or just no call to addToBackStack - you do not say
fragmentTransaction.replace(containerViewId, newfragment1);
fragmentTransaction.commit(); 
```

此时，Fragment2 将从 backstack 中移除，您的 backstack 由两个 Fragment1 实例组成。在第 4 步中，您弹出顶部的，这意味着您现在应该将最底部的 Fragment1 放在顶部。

这解释了为什么如果您返回活动，它是恢复的片段。但恐怕不是，为什么它显然与它的活动无关。

# c# - 试图加载格式不正确的程序，仅在 relase

> ID：15878117
> 
> 赞同：1
> 
> 时间：2013-04-08T11:40:02.257
> 
> 标签：c#, x86, release

我明白了

> *“试图加载格式不正确的程序。”*

当我在发布中编译我的代码时出现异常，在调试中一切正常。

Debug 和 release 配置相同：主项目是在 x86 中编译的，一些引用的项目在 AnyCPU 中，我的**问题**.dll也在 x86 中。我必须在 x86 中编译它，因为 problem.dll 使用外部 32 位 dll。

我怎么解决这个问题？

# haskell - 将一元表达式输入到除非或何时

> ID：15878121
> 
> 赞同：11
> 
> 时间：2013-04-08T11:40:12.477
> 
> 标签：haskell, monads

我经常发现自己编写如下代码：

```
import System.Directory (doesFileExist)
import Control.Monad (unless)

example = do
  fileExists <- doesFileExist "wombat.txt"
  unless fileExists $ putStrLn "Guess I should create the file, huh?" 
```

也许更好的方法是：

```
example2 =
  doesFileExist "wombat.txt" >>=
    (\b -> unless b $ putStrLn "Guess I should create the file, huh?") 
```

这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:40:12.477

我可以定义一个辅助函数：

```
unlessM :: Monad m => m Bool -> m () -> m ()
unlessM b s = b >>= (\t -> unless t s)

example3 = unlessM (doesFileExist "wombat.txt") $ 
  putStrLn "Guess I should create the file, huh?" 
```

看起来`unlessM`会很有用。但事实上我在 Hackage 上没有看到任何类似`unlessM`（或具有那种类型签名）的东西，这让我认为有一些更好的方法来处理这种情况，我还没有发现。酷孩子们在做什么？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T12:26:51.197

我已经在`flip unless`这种情况下使用过，但是这些类型的组合器可能会有点吵。使用该`LambdaCase`扩展，您至少可以避免为 的结果使用名称`doesFileExist`，尽管这会导致必须在`True`and上进行模式匹配`False`，这看起来有点奇怪（取决于您是否认为`if`不必要）。

```
{-# LANGUAGE LambdaCase #-}
import System.Directory (doesFileExist)
import Control.Monad (unless)

example' =
  doesFileExist "wombat.txt" >>=
  flip unless (putStrLn "Guess I should create the file, huh?")

example'' =
  doesFileExist "wombat.txt" >>= \ case
    True -> return ()
    False -> putStrLn "Guess I should create the file, huh?" 
```

# django - Django 使用请求方法 get 发送 ID。好习惯？

> ID：15878125
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:40:16.350
> 
> 标签：django, post, get, request

简短的问题。我的应用程序有一个编辑页面。用户可以通过以下方式浏览数据库的条目

```
<li><a href=edit?id={{ obj.id|add:"-1"}}><b>< </b>previous entry |</a></li> 
```

通过 GET 发送 ID 的缺点是什么？如果 POST 是一种更好的方法，有人可以简要解释一下原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:18:05.970

这里的问题不是 GET 与 POST。GET 非常适合显示现有条目的编辑页面：应该使用 POST 来*更新*该条目，即在表单提交时。

但是，您不应该依赖对象主键是连续的。它们可能是，但例如，如果任何一个被删除，就会有一个间隙。您可能应该在视图中明确查询下一个和上一个条目，并将 ID 传递给您的模板。

# mongodb - MongoDB中的索引查询仍然很慢

> ID：15878139
> 
> 赞同：0
> 
> 时间：2013-04-08T11:41:00.690
> 
> 标签：mongodb, indexing

我有一个这样的简单查询：

```
 ({ public: false, publicate: 1, timeline: 1, timeline_visibility: true }).sort({ date: -1}) 
```

我对该查询有一个特定的索引并且正在使用它，但是查询非常慢。这是explain()的输出：

```
"cursor" : "BtreeCursor public_1_publicate_1_timeline_1_timeline_visibility_1_date_-1",
"nscanned" : 141461,
"nscannedObjects" : 141461,
"n" : 141461,
"millis" : 535,
"nYields" : 141,
"nChunkSkips" : 0,
"isMultiKey" : false,
"indexOnly" : false, 
```

我已经用 MongoDB 2.0.2、2.0.9 和 2.4（都在 Linux 上）进行了尝试——结果相同。我该如何解决？谢谢！

# php - 使用 CodeIgniter 的模型中重复代码在多大程度上是可行的？

> ID：15878143
> 
> 赞同：1
> 
> 时间：2013-04-08T11:41:05.103
> 
> 标签：php, database, codeigniter

这是一个长期存在的问题，每次我开发时都会遇到。

我想它不是特定于 CodeIgniter 的，但是当我使用它时，我会在我的示例中考虑它。

首先，哪个更好：

```
function add_entry($data_array)
{
    //code to add entry
}

function edit_entry($data_array)
{
    //code to update entry
} 
```

或者

```
function save_changes($what,$data_array)
{
    //if what == update update
    //otherwise insert
} 
```

两者都产生相同的动作，但你使用哪一个真的很重要吗？

处理更复杂的事情。

我有一个页面，我需要从数据库中获取一个条目。

我还有一个页面，我需要从同一个数据库中获取由用户指定的列排序的所有条目。

我的结果方法是一个类似于

```
function($data_array,$order_by='',$limit='')
{
    //get where $data_array
    //if order_by!='' add order by 
    //if limit !='' add limit
} 
```

当我开发我的应用程序并实现需要“类似”数据库功能的新地方时，我感觉就像在破解以前的方法，以便它们适用于我的所有案例场景。这些方法最终包含许多条件语句，并且在某些情况下会变得相当复杂，在某些情况下需要 4 或 5 个输入参数。

我错过了重点吗？我不想要重复的代码，而且当大部分功能非常相似时，我觉得这种“黑客”方法效果最好。

有人可以建议吗？

最后，我的管理功能是管理控制器中同一应用程序的一部分。我有一个管理模型，其中包含管理数据库交互的特定方法。但是，我使用“用户”模型中的一些模型功能。

例如，如果在管理页面上我需要获取数据库条目的详细信息，我可以加载用户模型来访问此功能。这没有什么错/不安全的..？正确的？

除了在我的管理模型本身中，我还需要获取有关用户数据库条目的数据，因此我直接从我的管理模型调用我的用户模型。这完全可以，但为什么呢？如果我需要数据并且我的用户模型中已经有一个方法可以获取它..重写管理模型中的代码似乎有点毫无意义但是每次调用该函数时它会再次加载整个用户模型吗？

非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:01:09.430

按顺序，在模型中添加编辑与保存。就我个人而言，我在 MY_Model 中内置了一个保存，它可以根据传递的数据中是否存在主键来选择是保存还是编辑，所以显然我更喜欢这种方法，这意味着代码的重复次数要少得多，因为我可以使用在模型中根本没有函数的情况下保存任何表。

至于第二个问题，我认为这取决于情况。我还有许多函数，它们有大量的条件，具体取决于它们的用途和用途。在某些情况下，我发现这会使代码的易读性有点粗糙。如果您通过 if 语句运行它们，它也可能会影响性能。DRY 是一个概念，而不是规则，并且与其他设计概念一样，有时它们只是没有意义，就像数据库规范化一样，我个人认为过度规范化数据库并破坏性能和可用性非常容易。

最后，在管理代码中使用用户函数。我在这里根本看不到问题，反过来可能不是真的，但是仅仅因为它是一个“管理”功能而重写一个功能，当它与用户功能相同时是完全没有意义的。所以你是对的，这是浪费时间和空间。

# asp.net - RadDockZone 内的模板化 RadDock 控件？

> ID：15878154
> 
> 赞同：0
> 
> 时间：2013-04-08T11:41:48.193
> 
> 标签：asp.net, telerik, rad-controls

我创建了一个基于 RadDock 控件的模板化 ASP.NET 用户控件。但是，将此类控件添加到 RadDockZone 会导致运行时错误，指出它只能包含 RadDock 控件。有没有办法解决这个问题？

**模板化的用户控件标记**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TemplatedDock.ascx.cs" Inherits="TemplatedDock" %>
<telerik:RadDock ID="RadDock1" runat="server" EnableAnimation="True" DockHandle="Grip"     Resizable="True">
    <ContentTemplate>
        <asp:PlaceHolder ID="dockPlaceholder" runat="server"></asp:PlaceHolder>
    </ContentTemplate>
</telerik:RadDock> 
```

**模板化用户控制代码隐藏**

```
public partial class TemplatedDock : System.Web.UI.UserControl
{
    private ITemplate _content;

    [TemplateContainer(typeof(ContentContainer))]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [TemplateInstance(TemplateInstance.Single)]
    public ITemplate Content
    {
        get
        {
            return _content;
        }
        set
        {
            _content = value;
        }
    }
    void Page_Init()
    {
        if (_content != null)
        {
            ContentContainer container = new ContentContainer();
            _content.InstantiateIn(container);
            dockPlaceholder.Controls.Add(container);
        }
    }
}
public class ContentContainer : Control, INamingContainer{} 
```

}

**在 RadDockZone 中的使用**

```
<telerik:RadDockZone ID="RadDockZone1" runat="server">
    <a:TemplatedDock>
        <Content>
             <telerik:RadGrid ID="someGrid" runat="server"></telerik:RadGrid>
        </Content>
    </a:TemplatedDock>
</telerik:RadDockZone> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:56:38.047

没有办法让这种情况发生。RadDockZone 必须只有 RadDock 控件作为子项。自定义控件具有不同的类型，因此会引发异常。该区域与 Dock 紧密耦合，以提供简单的集成，如拖放、状态保存等，这是有代价的。

# jquery - 使用 django 更改 ajax 方法

> ID：15878158
> 
> 赞同：0
> 
> 时间：2013-04-08T11:42:01.900
> 
> 标签：jquery, python, ajax, django

我有以下输入：

```
<input id="country_name" type"text" />
<input id="country_id" type"text" /> 
```

`country_name`我想影响与我用onchange插入输入的国家相对应的id 。所以我使用这个 ajax 函数：

```
$("#country_name").change({
    $.ajax({
        url: "/country/getid/",
        method: 'GET',
        datatype: "json",
        data: {'country_name': $("#country_name").val()},
        success: function(response) {   
            $("#country_id").val() = response.country_id;
        }
    });
}); 
```

而我的观点是这样的（链接到同一个网址`urls.py`）

```
def get_country_id(country_name_get):
    countries = Countries.objects.filter(country_name=country_name_get)
    if countries.exists():
        for country in countries:
            country_id = country.country_id
    else:
        country_id = ''
return country_id 
```

在我的 urls.py 中，我添加了这一行：

```
url(r'^/country/getid/$', 'des.services.get_country_id', name='get_country_id'), 
```

我用谷歌浏览器检查了这个元素，然后我看到了这个错误：

```
Uncaught SyntaxError: Unexpected token . 
```

你知道错误来自哪里吗？

我仍然没有得到任何`country_id`输入。我的代码有问题还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:04:22.790

您的视图不返回`HttpResponse`. 此外，您应该返回您`country_id`的 JSON 数据。假设每个国家/地区名称只能在您的数据库中出现一次，您`for`在视图中的循环没有任何意义，因为您只检索查询集中`country_id`的最后一个`country_name`。此外，您应该始终将您的 Django 模型命名为单数，而不是复数，也就是说，`Country`而不是`Countries`.

我会重写你的 AJAX 函数和你的视图，如下所示：

```
$("#country_name").change({
    $.ajax({
        type: 'GET',
        dataType: 'json',
        url: "/country/getid/",
        data: {'country_name': $("#country_name").val()},
        success: function(response) {   
            $("#country_id").val() = response.country_id;
        }
    });
}); 
```

风景：

```
import json
from django.http import HttpResponse

def get_country_id(request):
    country_name = request.GET['country_name']
    response = {}

    try:
        country = Countries.objects.get(country_name=country_name)
        response['country_id'] = country.country_id
    except Countries.DoesNotExist:
        response['country_id'] = ''

    return HttpResponse(json.dumps(response), mimetype='application/json') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:47:16.940

视图必须返回一个 HttpResponse。如果您愿意，该响应的内容可以是一个简单的 ID，但它仍然必须包含在响应中。

```
return HttpResponse(country_id) 
```

如果您查看控制台或浏览器中的开发人员工具，您会看到视图返回 500 错误。浏览器工具也会向您显示错误回溯本身，这正是我上面所说的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:51:49.517

您在 ajax 中的 url 必须有一个 app_name。我不知道您的应用程序的确切名称是什么，所以我放入`app_name`了我的示例。只需将其更改为正确的即可。

```
$("#country_name").change({
    $.ajax({
        type: "GET",
        url: "/app_name/country/getid/",
        data: {'country_name': $("#country_name").val()},
        contentType: "application/json;charset=utf-8",
        dataType: "json",
        success: function(data) {   
            $("#country_id").val() = data;
        }
    });
}); 
```

你必须通过请求，而不是`country_name_get`

```
def get_country_id(request):
    country_name = request.GET['country_name']

    try:
        country = Countries.objects.get(country_name=country_name)
        country_id = country.id
    except Countries.DoesNotExist:
        country_id = ''

    return HttpResponse(country_id) 
```

在您的网址中，我因此而怀疑`des.services.get_country_id`，它必须是

```
 urlpatterns = patterns('app_name.views',
      url(r'^country/getid/$', 'get_country_id', name='get_country_id'),
 ) 
```

或者

```
 urlpatterns = patterns('',
      url(r'^country/getid/$', 'app_name.views.get_country_id', name='get_country_id'),
 ) 
```

取决于你如何定义它

# sql - sqlite：获取每个项目的前 X% 的平均值

> ID：15878160
> 
> 赞同：3
> 
> 时间：2013-04-08T11:42:04.280
> 
> 标签：sql, sqlite, aggregate-functions

是否可以获得组中前 X% 项目的平均值？

例如：
我有一个包含 item_id、timestamp 和 price 列的表。输出应按 item_id 和时间戳分组，“价格列”应取平均值。对于平均而言，应仅使用该组中最低的 X% 价格。

我发现了类似的问题（[如何为每个组选择前 x 条记录](https://stackoverflow.com/questions/14025255/how-to-select-top-x-records-for-every-group)），但这不适用于 sqlite。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:36:22.457

获取每组中的前 n 条记录需要计数。假设没有重复项，以下查询返回项目的记录数：

```
select t.*,
       (select count(*) from t t2 where t2.item_id = t.item_id
       ) as NumPrices
from t 
```

这称为*相关子查询*。现在，让我们扩展这个想法以包括排名，然后计算正确组的平均值：

```
select item_id, avg(price)
from (select t.*,
             (select count(*) from t t2 where t2.item_id = t.item_id
             ) as NumPrices,
             (select count(*) from t t2 where t2.item_id = t.item_id and t2.price <= t.price
             ) as PriceRank
      from t
     ) t
where (100.0*PriceRank / NumPrices) <= X
group by item_id 
```

为了提高性能，您需要在`(item_id, price)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:14:15.727

要获取具有 ID`I`和时间戳的组中的记录计数`T`，请使用以下查询：

```
SELECT COUNT(*)
FROM MyTable
WHERE item_id = I
  AND timestamp = T 
```

要获得限制，请与 相乘`X`，然后使用`ROUND`/`CAST`转换为整数：

```
SELECT CAST(ROUND(COUNT(*) * X / 100) AS INTEGER)
FROM MyTable
WHERE item_id = I
  AND timestamp = T 
```

要获取特定组中在该限制内的所有记录，请按价格对组中的记录进行排序，并限制返回的计数：

```
SELECT *
FROM MyTable
WHERE item_id = I
  AND timestamp = T
ORDER BY price
LIMIT (SELECT CAST(ROUND(COUNT(*) * X / 100) AS INTEGER)
       FROM MyTable
       WHERE item_id = I
         AND timestamp = T) 
```

从理论上讲，要获得组平均值，请添加`GROUP BY`以下内容：

```
SELECT item_id,
       timestamp,
       (SELECT AVG(price)
        FROM (SELECT price
              FROM MyTable T2
              WHERE T2.item_id = T1.item_id
                AND T2.timestamp = T1.timestamp
              ORDER BY price
              LIMIT (SELECT CAST(ROUND(COUNT(*) * X / 100) AS INTEGER)
                     FROM MyTable T3
                     WHERE T3.item_id = T1.item_id
                       AND T3.timestamp = T1.timestamp)
             )
       ) AS AvgPriceLowestX
FROM MyTable T1
GROUP BY item_id,
         timestamp 
```

但是，SQLite 似乎不允许从`LIMIT`子句内部访问相关变量，因此这在实践中不起作用。您必须获取所有组的 ID ( `SELECT DISTINCT item_id, timestamp FROM MyTable`) 并为每个组执行上面的第三个查询。

在任何情况下，请确保您在三列`item_id`、`timestamp`、 和上都有一个索引，`price`以获得良好的性能。

# c - C 中有哪些变量不能被处理？

> ID：15878162
> 
> 赞同：-4
> 
> 时间：2013-04-08T11:42:11.453
> 
> 标签：c, memory-management, var

通常一个变量`'abc'`可以被寻址为`'&abc'`。

c语言中有哪些变量不能处理？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:00:35.423

^* C99 标准的第 6.5.3.2 节（强调我的）解决了这个问题：

> 一元运算`&`符的操作数应该是一个函数指示符、一个 `[]`或一元运算符的结果`*`，或者是一个左值，它指定**一个不是位域且未使用`register`存储类说明符**声明的对象。

* * *

[* 哈哈]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:46:54.933

C中的寄存器变量无法寻址的原因可以在这里找到：

[寄存器变量地址](https://stackoverflow.com/questions/1256246/address-of-register-variable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:54:30.577

Register variable can not be accesses by this way. A register does not have an address. Therefore, you cannot apply the address operator (&) to a register variable.

# jquery - Jquery计算，删除输入内容时删除NaN

> ID：15878165
> 
> 赞同：1
> 
> 时间：2013-04-08T11:42:15.310
> 
> 标签：jquery, html

我正在构建一个简单的计算器，客户可以在其中将信用添加到他们的帐户中，除了以下错误之外，一切正常。

错误：当您输入一个值时，一切都很好，如果您单击离开然后单击返回以编辑并删除您获得 NaN 的值，我希望它默认为 0.00 而不是显示 NaN

随意查看 JS 并优化你可以的地方，因为我只是一起屠杀了这个。

HTML：

```
Credit:
<span id="price01" class="price">&pound;1000.00</span><br/>

Add: <input type="text" id="pricetoadd" placeholder="0.00" name="price02" class="price">

Total: <span class="total"></span> 
```

JS：

```
$.fn.sumValues = function() {
        var sum = 0;
        this.each(function() {
            if ( $(this).is(':input') ) {
                var val = $(this).val();
            } else {
                var val = $(this).text();
            }
            sum += parseFloat( ('0' + val).replace(/[^0-9-\.]/g, ''), 10 );
        });
        return sum;
    };

    $(document).ready(function() {
        $('#pricetoadd').blur(function(){
            var num = parseFloat($(this).val());
            var cleanNum = num.toFixed(2);
            $(this).val(cleanNum);
        if(num < 1){
            $('#error').text('Please enter only 2 decimal places, we have truncated extra points');
            }
        });

        $('input.price').bind('keyup', function() {
            $('span.total').html( $('.price').sumValues().toFixed(2) );
        });
    }); 
```

工作示例：http: [//jsfiddle.net/gRjz7/](http://jsfiddle.net/gRjz7/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:44:50.747

只需添加一点完整性检查器：

```
$('#pricetoadd').blur(function(){
    var num = parseFloat($(this).val());
    var cleanNum = num.toFixed(2);

   cleanNum = isNaN(cleanNum) ? '0.00' : cleanNum;

    $(this).val(cleanNum);

    if(num < 1){
        $('#error').text('Please enter only 2 decimal places, we have truncated extra points');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/gRjz7/1/)

# android - Android - 带有自定义建议的搜索对话框

> ID：15878168
> 
> 赞同：3
> 
> 时间：2013-04-08T11:42:18.947
> 
> 标签：android, search

我有一个搜索对话框，需要从数据库中启用建议，如下所示[http://developer.android.com/images/search/search-suggest-custom.png](http://developer.android.com/images/search/search-suggest-custom.png)。

当我单击操作栏菜单项时，我的搜索对话框将显示在顶部。当用户开始输入一些文本时，它应该搜索数据库并相应地显示建议。到目前为止，我有一个搜索对话框，但是当用户输入一些文本时，没有显示任何建议。

我的内容提供商：

```
public class MyCustomSuggestionProvider extends ContentProvider {
    SQLiteDatabase db;
    SQLiteQueryBuilder qb;
    String sqlTables = "countries";

    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        return 0;
    }

    @Override
    public String getType(Uri uri) {
        return null;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        return null;
    }

    @Override
    public boolean onCreate() {

        return false;
    }
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        MyDatabase myDB = new MyDatabase(getContext());
        db = myDB.getReadableDatabase();
        Cursor c = null;

        if (selectionArgs != null && selectionArgs.length > 0
                && selectionArgs[0].length() > 0) {

            qb = new SQLiteQueryBuilder();
            String[] sqlSelect = { "name" };
            qb.setTables(sqlTables)

                c = qb.query(db, null, selection, selectionArgs, null, null,
                        null);
                c.moveToFirst();
        } else {
            return null;
        }
        return c;
    }
    @Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {
        return 0;
    }

} 
```

我的清单：

```
 <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/Theme.Visa" >
            <provider
                android:name="com.m7.visa.contentprovider.MyCustomSuggestionProvider"
                android:authorities="com.m7.visa.contentprovider.MyCustomSuggestionProvider" >
            </provider>

            <activity
                android:name="com.m7.visa.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
                <intent-filter>
                    <action android:name="android.intent.action.SEARCH" />
                </intent-filter>

                <meta-data
                    android:name="android.app.searchable"
                    android:resource="@xml/searchable" />
            </activity>
</application> 
```

我的可搜索配置：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="hint..."
    android:label="@string/app_name"
    android:searchSuggestAuthority="com.m7.visa.contentprovider.MyCustomSuggestionProvider"
    android:searchSuggestIntentAction="android.intent.action.VIEW"
    android:searchSuggestSelection=" ?" >

</searchable> 
```

知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-26T14:45:34.317

问题出在问号上`android:searchSuggestSelection=" ?" >`。当您在搜索视图中键入“某物”时，它会传递“某物”，左侧有空格。所以解决方案是删除空间，但是'？是 Android XML 文件中的特殊字符，这意味着您必须对其进行转义。

所以最终的解决方案是`android:searchSuggestSelection="\?" >`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:18:37.713

尝试删除行中的空格`android:searchSuggestSelection=" ?" >`

到`android:searchSuggestSelection="?" >`

# dll - Java垂直条形图

> ID：15878172
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:42:39.200
> 
> 标签：dll, charts, java

我需要在 java 中创建垂直条形图，并且无法找到执行此操作的库。有没有简单但仍然适合处理大量数据的库？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:45:10.903

JFreeChart 是您的朋友。它还有许多其他功能，包括您需要的东西。详细信息可以在以下链接中找到 [http://www.jfree.org/jfreechart/](http://www.jfree.org/jfreechart/)

以下站点有一个垂直条形图的示例。 [http://www.roseindia.net/chartgraphs/bar-chart-JFree.shtml](http://www.roseindia.net/chartgraphs/bar-chart-JFree.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:45:11.583

嗨，有很多用于创建垂直条形图的库。

在这里你有一个： [http ://www.jpowered.com/java-bean/graph-chart/vertical-bar-graph/](http://www.jpowered.com/java-bean/graph-chart/vertical-bar-graph/)

还有另一个：

[http://www.javatao.com/content/view/13/12/](http://www.javatao.com/content/view/13/12/)

# uwsgi - uwsgi 无效请求块大小

> ID：15878176
> 
> 赞同：168
> 
> 时间：2013-04-08T11:42:56.680
> 
> 标签：uwsgi

我在皇帝模式下运行 uwsgi

```
uwsgi --emperor /path/to/vassals/ --buffer-size=32768 
```

并得到这个错误

```
invalid request block size: 21327 (max 4096)...skip 
```

该怎么办？？我也试过 -b 32768

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2014-01-17T09:36:52.230

在学习一些教程时，我也遇到了同样的问题。问题是我设置了选项`socket = 0.0.0.0:8000`而不是`http = 0.0.0.0:8000`. `socket`选项旨在与某些第三方路由器（例如 nginx）一起使用，而当`http`设置选项时，uwsgi 可以接受传入的 HTTP 请求并自行路由它们。

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2014-11-15T00:54:58.423

正确的解决方案是不要切换到 HTTP 协议。您只需要在 uWSGI 设置中增加缓冲区大小。

> ```
> buffer-size=32768 
> ```

或在命令行模式下：

> ```
> -b 32768 
> ```

引用官方文档：

> 默认情况下，uWSGI 为每个请求的头部分配一个非常小的缓冲区（4096 字节）。如果您开始在日志中收到“无效的请求块大小”，这可能意味着您需要更大的缓冲区。使用缓冲区大小选项增加它（最多 65535）。
> 
> 如果您在日志中收到“21573”作为请求块大小，这可能意味着您正在使用 HTTP 协议与使用 uwsgi 协议的实例对话。不要这样做。

从这里：[https ://uwsgi-docs.readthedocs.io/en/latest/ThingsToKnow.html](https://uwsgi-docs.readthedocs.io/en/latest/ThingsToKnow.html)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-09-26T09:57:08.977

我可以修复它添加 --protocol=http 到 uwsgi

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-08-28T00:01:26.193

我在尝试在 nginx 下运行它时遇到了同样的问题，并且正在关注[此处](http://uwsgi-docs.readthedocs.org/en/latest/WSGIquickstart.html)的文档。需要注意的是，一旦你切换到 nginx，你必须确保你没有试图访问 --socket 参数指定的端口上的应用程序，而是 nginx.conf 中的“监听”端口。尽管您的问题描述不同，但标题与我遇到的问题完全匹配。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-01T18:54:14.167

当 uWSGI 服务器正在使用`uwsgi`协议并且尝试通过`http`协议`curl`或 Web 浏览器直接访问它时，会显示此错误。如果可以，请尝试将您的 uWSGI 服务器配置为使用`http`协议，以便您可以通过 Web 浏览器或 curl 访问它。

如果您不能（或不想）更改它，您可以`nginx`在本地或远程 uWSGI 服务器前使用反向代理（例如），请参阅[https://uwsgi-docs.readthedocs.org/en/latest/Nginx .html](https://uwsgi-docs.readthedocs.org/en/latest/Nginx.html)

如果感觉工作量太大，请尝试使用`uwsgi-tools`python 包：

```
$ pip install uwsgi-tools

$ uwsgi_curl 10.0.0.1:3030 
```

`uwsgi_proxy`如果您需要通过 Web 浏览器等访问您的应用程序，还有一个简单的反向代理服务器。查看更多扩展答案[https://stackoverflow.com/a/32893520/179581](https://stackoverflow.com/a/32893520/179581)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-31T22:49:44.193

正如文档中的另一条评论所指出的：

> 如果您在日志中收到“21573”作为请求块大小，这可能意味着您正在使用 HTTP 协议与使用 uwsgi 协议的实例对话。不要这样做。

如果您使用的是 Nginx，如果您具有此配置（或类似的奇怪配置），则会发生这种情况：

```
proxy_pass http://unix:/path/to/socket.sock 
```

这是在向 uWSGI 发送 HTTP（这让人很不爽）。相反，使用：

```
uwsgi_pass unix:/path/to/socket.sock; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-05T01:38:08.953

男人我有同样的问题；所以我做到了……看看使用 UWSGI + DJANGO + NGINX + REACT +

1 - 纳米 /etc/uwsgi/sites/app_plataform.ini [uwsgi]

> DJANGO_SETTINGS_MODULE = app_plataform.settings 环境 = DJANGO_SETTINGS_MODULE settings.configure()
> 
> chdir = /home/app_plataform 主页 = /root/app_plataform 模块 = prometheus_plataform.wsgi:application
> 
> 主 = 真正的进程 = 33 缓冲区大小 = 32768
> 
> socket = /home/app_plataform/app_plataform.sock chmod-socket = 777 Vacuum = true

2 - 对 nginx ... 用户 www-data 进行严重的性能升级；

> # worker_processes 自动；worker_processes 4；pid /run/nginx.pid; 包括/etc/nginx/modules-enabled/*.conf；
> 
> 事件 {worker_connections 4092; 多接受；}
> 
> http { ##升级配置
> 
> client_body_buffer_size 16K；client_header_buffer_size 16k；client_max_body_size 32m；#large_client_header_buffers 2 1k；
> 
> client_body_timeout 12；client_header_timeout 12；keepalive_timeout 15；发送超时 10；access_log 关闭；
> 
> ＃＃ ＃ 基本设置 ＃＃
> 
> 发送文件；tcp_nopush 开启；tcp_nodelay 开启；#keepalive_timeout 65; types_hash_max_size 2048; server_tokens 关闭；
> 
> server_names_hash_bucket_size 64；# server_name_in_redirect 关闭；
> 
> 包括/etc/nginx/mime.types；default_type 应用程序/八位字节流；
> 
> ## # SSL 设置 ##
> 
> ssl_protocols TLSv1 TLSv1.1 TLSv1.2；# 删除 SSLv3，参考：POODLE ssl_prefer_server_ciphers on;
> 
> ## # 日志设置 ##
> 
> access_log /var/log/nginx/access.log; 错误日志/var/log/nginx/error.log；
> 
> ## # Gzip 设置 ##
> 
> gzip打开；gzip_comp_level 2；gzip_min_length 1000；gzip_proxied
> 过期无缓存无存储私有身份验证；gzip_types text/plain application/x-javascript text/xml text/css application/xml；gzip_vary on；
> 
> #gzip_proxied 任何；#gzip_comp_level 6；gzip_buffers 16 8k；gzip_http_version 1.1；#gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
> 
> ## # 虚拟主机配置 ##
> 
> 包括/etc/nginx/conf.d/.conf *；包括 /etc/nginx/sites-enabled/*；}

3 - 然后...重新启动服务或 reebot 服务器...

> systemctl 重启 uwsgi & systemctl 重启 nginx

# java - 在 Google App Engine JDO 中查询两个实体

> ID：15878183
> 
> 赞同：0
> 
> 时间：2013-04-08T11:43:18.667
> 
> 标签：java, google-app-engine, jdo

我是谷歌 appengine 和 jdo 的新手。我不知道如何用两个实体在 JDO 中编写查询。我有如下所示的 UserProfile 和 UserFeed 实体。

```
@PersistenceCapable
public class UserProfile {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private String firstName;

@Persistent
private String lastName;

@Persistent
private List<Key> friendProfileKeys;
}

@PersistenceCapable
public class UserFeed {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private Key profileKey;

@Persistent
private String comment;   

@Persistent
private UserFeedType userFeedType;//Friends,Public
} 
```

下面的查询我用来获取用户发布的提要列表。

```
final Query query = pm.newQuery(UserFeed.class);
final List v;

query.setFilter("profileKey == paramUserProfileKey");
query.declareParameters("com.google.appengine.api.datastore.Key paramUserProfileKey");

v = (List) query.execute(profile.getKey()); 
```

请帮助我获取用户及其朋友发布的提要列表以及公开帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:01:33.033

正如@DataNucleus 在他的评论中所说，GAE Datastore 不支持连接查询，所以恐怕不可能在单个查询中检索您想要检索的所有内容......

据我了解，您有两种选择：

第一种**选择**是使用多个查询：一个查询询问所有公开帖子，然后另一个查询（如您编写的用于获取用户的所有提要），另一个获取他的所有朋友，最后一个查询针对每个朋友，询问对于他们的帖子...

第二**个选择**是使用[**拥有的关系**](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Owned_One_to_One_Relationships)。这样，您必须更改 Key 类型的字段（“外键”，而不是主键！）并使用实际类的字段。例如，您应该有一个像这样的字段：

```
@Persistent
private List<UserProfile> friendProfiles; 
```

和

```
@Persistent
private UserProfile profile; 
```

这样，正如 GAE/J 文档中所说，当您检索例如 an 时`UserFeed`，您可以轻松地`User`使用以下方法获取关联：

```
retrievedUserFeed.getProfile(); 
```

您还可以通过以下方式访问检索到的提要作者的朋友：

```
retrievedUserFeed.getProfile().getFriendProfiles(); 
```

这些拥有关系有一种行为，我无法真正向您详细解释（请参阅上一个链接），但基本上当您检索与其他实体具有拥有关系的实体时，如果您不*触摸*对应字段，相关的实体永远不会被检索到。在前面的示例中，如果您检索 a`UserFeed`但您从未使用从未在内存中加载的方法，从而节省资源`getProfile()`...`UserProfile`

顺便说一句，如果你使用这种方法，我强烈建议你有一个关系 from `UserProfile`to`UserFeed`例如：

```
@Persistent
private List<UserFeed> ownedFeeds; 
```

因为您将希望从 to 导航，`UserProfile`而`UserFeed`不仅仅是相反的方式......（注意：这是一个独立于 GAE 和 JDO 以及任何实现的设计问题）

# c++ - 无法使用 scons 运行 cpp 文件

> ID：15878186
> 
> 赞同：3
> 
> 时间：2013-04-08T11:43:25.033
> 
> 标签：c++, scons

我正在尝试在 scons 中编译一个 c++ 程序。scons 适用于 c 程序，但对于 c++，它会给出以下错误。请问有人可以帮我解决这个问题吗，谁知道呢？

第一个.cpp

```
#include <iostream>
int main()
{
    std::cout << "hellooo" << std::endl;
    return 0;
} 
```

S构造函数

```
Program('first','first.cpp') 
```

错误：

```
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
o first.o -c first.cpp
sh: o: command not found
o first.exe first.o
sh: o: command not found
scons: done building targets. 
```

这可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:20:01.957

您没有安装 C++ 编译器，或者至少 SCons 找不到它。尽管您希望 SCons 明确告诉您它找不到编译器，但我认为实际发生的是它有一个编译器的构造变量实际上是空的，并且它使用它来创建命令行。

如果您确实安装了它，则可以按如下方式解决此问题：

```
env = Environment()
env.Replace(CXX = "/path/to/the/c++/compiler") 
```

# ios5 - [NSConcreteNotification isReachable]：无法识别的选择器发送到实例

> ID：15878187
> 
> 赞同：0
> 
> 时间：2013-04-08T11:43:29.457
> 
> 标签：ios5, unrecognized-selector, nsnotification

我正在尝试让 ASIReachability 在我的应用程序中工作，该应用程序在连接不存在时工作，但当连接存在时，它会给出以下错误：

2013-04-08 12:26:20.501 你的 Llanelli Companion [1576:207] -[NSConcreteNotification isReachable]：无法识别的选择器发送到实例 0x7d84d30

我似乎无法解决这个问题，它开始困扰我。

.m 文件：

```
- (void) CheckIfAInternetConnectionExists
{
    Reachability *reach = [[Reachability reachabilityWithHostName:@"http://176.31.101.181:8020/listen.pls"]retain ];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reachabilityChanged:)
                                                 name:kReachabilityChangedNotification
                                                object:nil];
    [reach startNotifier];    
}

- (void) reachabilityChanged:(Reachability *)reach {
    if ([reach isReachable ]) {
        NSLog(@"connection");
        ServerFound = YES;
        [self PrepareStream];
    } else{
        NSLog(@"no connection");
        ServerFound = NO;
        [self PrepareStream];
    }
} 
```

如果有人能为我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:53:56.433

当您收到通知时，您的`reachabilityChanged:`方法的参数将是通知本身。要获取 Reachability 对象，您需要通过发送`-[NSNotification object]`到通知来从通知中获取它。

所以这样的事情应该有效：

```
- (void) reachabilityChanged:(NSNotification *)note {

    Reachability *reach = [note object];

    if ([reach isReachable ]) {
        NSLog(@"connection");
        ServerFound = YES;
    } else{
        NSLog(@"no connection");
        ServerFound = NO;
    }

    [self PrepareStream];

  } 
```

# c# - 如何删除此重复代码

> ID：15878192
> 
> 赞同：0
> 
> 时间：2013-04-08T11:43:47.020
> 
> 标签：c#, duplicate-removal

我在两个地方有相同的代码：

```
if (amountUnit.ToLower().Contains("x"))
{
    string[] amount = amountUnit.Split('x');
    x = amount[0].Trim();
    y = amount[1].Trim();
}
else
{
    x = "1";
    y = amountUnit.Trim();
}
//
unit = textInBrackets.Replace(amountUnit, "");
name = "";
for (int z = 0; z < i; z++)
{
    name += someArray[z];
    name += " ";
}
name = name.Trim(); 
```

准确的代码重复两次。如何解决？如果我用新方法提取它，我会有很多 ref 输入参数。还有其他方法吗？如果不可能，只是评论之前的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:49:11.003

从逻辑上讲，代码似乎有两个独立的块。

一个处理`x`和`y`- 另一个处理`name`. 这些可能应该是*单独的*方法。

现在，您可以创建一个封装`x`and的类型（类或结构） `y`，这意味着您只需要传入一个参数。`ref`您可以简单地*返回*它并在调用者中替换您传入的内容，而不是通过它传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:00:07.730

将您的代码和数据组合到一个类中；-)

```
public class Point
{
    public Point(string amountUnit)
    {
        if (amountUnit == null)
        {
            throw new ArgumentNullException("amountUnit");
        }

        if (amountUnit.ToLower().Contains("x"))
        {
            string[] amount = amountUnit.Split('x');
            this.X = amount[0].Trim();
            this.Y = amount[1].Trim();
        }
        else
        {
            this.X = "1";
            this.Y = amountUnit.Trim();
        }
    }

    string X { get; private set; }
    string Y { get; private set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:05:16.743

像：

```
public struct Parameters
{
    public int X {get; set;}
    public int Y {get; set;}
}

public Parameters ExtractParameters(string amountUnit)
{    
    var parameters = new Parameters();
    if (amountUnit.ToLower().Contains("x"))
    {
        string[] amount = amountUnit.Split('x');
        parameters.X = int.Parse(amount[0].Trim());
        parameters.Y = int.Parse(amount[1].Trim());
    }
    else
    {
        parameters.X = 1;
        parameters.Y = int.Parse(amountUnit.Trim());
    }
    return parameters;
} 
```

用法：

```
var parameters = ExtractParameters(amountUnit);
var x = parameters.X;
var y = parameters.Y; 
```

您还可以使其成为字符串的扩展方法。当然，您最好也添加一些异常处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:08:25.067

如果您不需要任何非常动态的东西，那么将其拆分为两种方法如何，并执行如下简单的操作：

```
public static string GetX(string amountUnit)
{
    return amountUnit.ToLower().Contains("x") ? 
                        amountUnit.Split('x')[0].Trim() : 
                        "1";
}

public static string GetY(string amountUnit)
{
    return amountUnit.ToLower().Contains("x") ? 
                        amountUnit.Split('x')[1].Trim() :       
                        amountUnit.Trim();
} 
```

# java - 捕获所有可能的路径参数 jax-rs 正则表达式

> ID：15878193
> 
> 赞同：3
> 
> 时间：2013-04-08T11:43:47.893
> 
> 标签：java, regex, jax-rs

设置什么正则表达式来`@Path("<what_regex>")`捕获所有可能的路径参数深度（除了一些旨在由其他方法处理的特定路径）？

像：

`/{path1}/{path1}/{path1}/{path1}/{path1}/`等等

虽然仍然映射这些：

```
/create
/read
/update
/delete 
```

到其他 Jax-rs 资源方法。

```
@Singleton
@Path("/")
public class MyRest {
    @GET
    @Path({pathParam}) /* This works */
    public Response getSomething(...){}

    @POST
    @Path("create") /* Along with this */
    public Response createSomething(...){}

    // and so on
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T12:46:22.407

首先，您可能无法捕捉到这些`/{path1}/{path1}/{path1}/{path1}/{path1}/`，因为您无法仅使用一个正则表达式匹配未定义数量的参数。

也就是说，使用的正则表达式引擎似乎是 java 的引擎（非常合乎逻辑）。因此，您可以使用[否定前瞻](http://www.regular-expressions.info/lookaround.html)来确保您没有捕捉到您的关键字。所以我想你可以有这样的东西：

```
@Path("/{path: (?!create|read|update|delete).*}") 
```

然后拆分路径变量，使用“/”作为分隔符。

**还是**。您不能只订购您的功能，以便最后检查一般情况吗？我认为这是最简单的...

然后你只需要使用：

```
@Path("/{path: .*}") 
```

这更容易，并且样板更少。

**编辑：**
准确地说，第一个不会匹配像“/create/anythingelse”这样的URL，因为它只是禁止拥有/create（当然同样的事情也适用于您的其他关键字）。

# php - 为 php 数组中的列表项提供唯一的类

> ID：15878196
> 
> 赞同：0
> 
> 时间：2013-04-08T11:43:53.813
> 
> 标签：php, arrays, list, listitem

我创建了一个数组，显示一个目录（本质上是目录树）的几个子目录中的所有文件。这些文件是单击时在该目录中打开文件的所有链接。

我遇到的问题是我希望能够设置我的结果的样式，但是所有子目录和文件名都具有相同的类（因为它们是使用相同的代码生成的）。

这是我的php：

```
<?php
function listFolderFiles($dir){
$ffs = scandir($dir);
echo '<ol class="song">';
foreach($ffs as $ff){
    if($ff != '.' && $ff != '..'){
        echo '<li class="title">';
        if(is_dir($dir.'/'.$ff)){
            echo $ff;
            listFolderFiles($dir.'/'.$ff);
        }else{
            echo '<a href="'.$dir.'/'.$ff.'" target="_blank">'.$ff.'</a>';
        }
        echo '</li>';
    }
}
echo '</ol>';
}

listFolderFiles('Current Songs');

?> 
```

生成的html是这样的：

```
<ol class="song">
<li class="title">
  Sub Directory Folder 1
<ol class="song">
    <li class="title">
    <a href="Current Songs/Song1.mp3"></a></li>
    <li class="title">
    <a href="Current Songs/Song1.pdf"></a></li>
</ol>
</li>
<li class="title">
  Sub Directory Folder 2
<ol class="song">
    <li class="title">
    <a href="Current Songs/Song2.mp3"></a></li>
    <li class="title">
    <a href="Current Songs/Song2.pdf"></a></li>
</ol class="song">
</li>

</ol>
</li> 
```

如您所见，每个条目由 2 个有序列表组成，但是它们都具有相同的类，所有列表项也是如此，这使得几乎不可能对其进行任何样式设置。

我想要的是生成以下 html 标记：

```
<ol class="song">
<li class="title">
  Sub Directory Folder 1
</li> <!--END TITLE HERE-->
<ol>
    <li>
    <a href="Current Songs/Song1.mp3"></a></li>
    <li>
    <a href="Current Songs/Song1.pdf"></a></li>
</ol>
</ol> <!--END SONG OL HERE--> 
```

任何人都可以就我需要对我的代码进行哪些 php 更改以输出上述内容提供一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:58:16.067

您也可以将班级名称作为参数传递

```
function listFolderFiles($dir,$myclass){
$ffs = scandir($dir);
echo '<ol class="song'.$myclass.'">';
foreach($ffs as $ff){
if($ff != '.' && $ff != '..'){
    echo '<li class="title'.$myclass.'">';
    if(is_dir($dir.'/'.$ff)){
        echo $ff;
        listFolderFiles($dir.'/'.$ff);
    }else{
        echo '<a href="'.$dir.'/'.$ff.'" target="_blank">'.$ff.'</a>';
    }
    echo '</li>';
}
}
echo '</ol>';
}
listFolderFiles('Current Songs','_myclass');
listFolderFiles('Current Songs',''); 
```

# java - 无论如何要从 JFrame 返回特定元素吗？

> ID：15878198
> 
> 赞同：0
> 
> 时间：2013-04-08T11:44:02.077
> 
> 标签：java, arrays, swing, jtextfield

让我们假设 JFrame 包含 9 个 JTextField，如下所示：

```
public static JFrame generateFrame(){
    JFrame frame = new JFrame();
    Container c = frame.getContentPane();
    JPanel panel = new JPanel();
    panel.setLayout(new GridLayout(3,3));
    JTextField[]textFields = new JTextField[9];
    for(int i=0; i<9;i++){
        textFields[i]= new JTextField(1);
        textFields[i].setFont(new Font("Sans-serif", Font.BOLD, 30));
        panel.add(textFields[i]);
    }

    c.add(panel);
    frame.setVisible(true);
    frame.setSize(300,300);

    return frame;
} 
```

所以我将这个返回的 JFrame 分配给 main 方法中的变量，如下所示：

```
 public static void main(String []args){
    JFrame gameFrame = generateFrame(); 
} 
```

无论如何要从“gameFrame”对象中提取所有文本字段吗？DOM 中类似 docyment.getElementByTagName("element") 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:52:23.093

尝试跟随。

```
Component[] components = gameFrame.getComponents();
 for (int i = 0; i < components.length; i++) {
  if (components[i] instanceof JTextField) {
     //DO what you want with the text field here 
   }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:14:27.220

首先，您需要参考 contentpane，因为您已将 JPanel 添加到 contentpane，然后您可以从 JPanel 获取您的字段。

```
JFrame gameFrame = generateFrame();
JPanel panel = (JPanel) gameFrame.getContentPane().getComponent(0);

Component[] comp = panel.getComponents();

for (Component c : comp) {
    JTextField field = (JTextField) c;
    System.out.println("value   :   " + field.getText());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:30:15.570

如果组件都在一个面板上，您可以按照已经建议的方式使用面板的 getComponents() 方法。

如果您在多个面板上有组件，那么您需要使用递归来获取所有组件。在这种情况下，您可能会发现 Darryl 的[Swing Utils](http://tips4java.wordpress.com/2008/11/13/swing-utils/)类很方便。

# php - 错误消息未在 PHP 中显示以进行验证

> ID：15878199
> 
> 赞同：0
> 
> 时间：2013-04-08T11:44:03.053
> 
> 标签：php, phpmyadmin

以下是运行良好的 PHP 代码数据库文件。

```
 if(isset($_POST['submit']))
   {
    $error = array();

 if(empty($_POST["fname"]))
   {
     $error[] = "Please Enter a name";
   }
  else
   {
      $fname = $_POST["fname"];
   }

    if(empty($_POST["lname"]))
     {
  $error[] = "Please Enter last name";
}
   else
     {
  $lname = $_POST["lname"];
}

    if(empty($_POST["email"]))
     {
   $error = "Enter email Id";
 }
  else
     {
   if(preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-        9\._-]+)+$/", $_POST["email"]))
   {
     $email = $_POST["email"];
   }
  else
   {
     $error = "Enter a vaild Email Id";
   }       
    }

   if(empty($_POST["password"]))
    {
  $error = "Enter a password";
}
   else
    {
  $password = $_POST["password"];
}

    if(!empty($error))
      {
  $sql = "SELECT * FROM form (id, 'FirstName', 'LastName', 'Email', 'Password')  VALUES('', '$fname', '$lname', '$email', '$password')";
   $result = mysql_query($sql);
   echo "Successfully Register";
  }
    else
      {
   foreach($error as $key => $values)
                  {
                    echo ' <li>' . $values . '</li>';
                  }
                echo '</ol>';
    echo "Error";
  }

     }

 ?> 
```

上面的代码没有显示任何错误消息...如果我提交表单，只会出现空白页...我使用上面的代码验证我的表单，但这只是我使用的一种基本方法，并用于我正在显示的每个错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:47:54.563

以下测试是错误的：

```
if(!empty($error)) 
```

应该 ：

```
if(empty($error)) 
```

而且你的 SQL 也是错误的......应该是：

```
$sql = "Insert into form (FirstName, LastName, Email, Password)  VALUES('$fname', '$lname', '$email', '$password')"; 
```

假设您的 id 字段是自动递增的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:47:43.797

您忘记将错误推送到数组。你有

`$error = "Enter a password"; //$error is no more an array. It is a string`

并且必须在几个地方：

`$error[] = "Enter a password";`

另外，我建议您使用嵌套`if`语句：

```
if (!empty($_POST['submit'])){
  $errors = array() ;
  if (!isset($_POST['email'])
    $errors['email'] = "No email" ;
  //And so on.

  //Then check for errors
  if (!empty($errors)){
    //proceed submission
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:49:23.363

试试这个代码，它会为你工作得很好。

```
<?php 
  if(isset($_POST['submit']))
   {
    $error = array();

 if(empty($_POST["fname"]))
   {
     $error[] = "Please Enter a name";
   }
  else
   {
      $fname = $_POST["fname"];
   }

    if(empty($_POST["lname"]))
     {
  $error[] = "Please Enter last name";
}
   else
     {
  $lname = $_POST["lname"];
}

    if(empty($_POST["email"]))
     {
   $error[] = "Enter email Id";
 }
  else
     {
   if(preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-        9\._-]+)+$/", $_POST["email"]))
   {
     $email = $_POST["email"];
   }
  else
   {
     $error[] = "Enter a vaild Email Id";
   }       
    }

   if(empty($_POST["password"]))
    {
  $error[] = "Enter a password";
}
   else
    {
  $password = $_POST["password"];
}
    if(count($error)<=0)
      {
  $sql = "SELECT * FROM form (id, 'FirstName', 'LastName', 'Email', 'Password')  VALUES('', '$fname', '$lname', '$email', '$password')";
   $result = mysql_query($sql);
   echo "Successfully Register";
  }
    else
      {
   foreach($error as $key => $values)
                  {
                    echo ' <li>' . $values . '</li>';
                  }
                echo '</ol>';
    echo "Error";
  }
   }
 ?> 
```

# python - Igraph/networkx 中的 k 最短路径实现（Yen 算法）

> ID：15878204
> 
> 赞同：3
> 
> 时间：2013-04-08T11:44:16.303
> 
> 标签：python, graph, path, networkx, igraph

[经过深入研究](https://stackoverflow.com/a/15836361/1863061)并基于[此](https://stackoverflow.com/questions/828041/suggestions-for-kspa-on-undirected-graph)，建议我实施 k 最短路径算法，以便在大型无向、循环、加权图中找到第一、第二、第三……第 k 条最短路径。大约2000个节点。

[维基百科](http://en.wikipedia.org/wiki/Yen's_algorithm)上的伪代码是这样的：

```
function YenKSP(Graph, source, sink, K):
  //Determine the shortest path from the source to the sink.
 A[0] = Dijkstra(Graph, source, sink);
 // Initialize the heap to store the potential kth shortest path.
 B = [];

for k from 1 to K:
   // The spur node ranges from the first node to the next to last node in the shortest path.
   for i from 0 to size(A[i]) − 1:

       // Spur node is retrieved from the previous k-shortest path, k − 1.
       spurNode = A[k-1].node(i);
       // The sequence of nodes from the source to the spur node of the previous k-shortest path.
       rootPath = A[k-1].nodes(0, i);

       for each path p in A:
           if rootPath == p.nodes(0, i):
               // Remove the links that are part of the previous shortest paths which share the same root path.
               remove p.edge(i, i) from Graph;

       // Calculate the spur path from the spur node to the sink.
       spurPath = Dijkstra(Graph, spurNode, sink);

       // Entire path is made up of the root path and spur path.
       totalPath = rootPath + spurPath;
       // Add the potential k-shortest path to the heap.
       B.append(totalPath);

       // Add back the edges that were removed from the graph.
       restore edges to Graph;

   // Sort the potential k-shortest paths by cost.
   B.sort();
   // Add the lowest cost path becomes the k-shortest path.
   A[k] = B[0];
return A; 
```

主要问题是我还不能为此编写正确的python脚本（删除边缘并将它们正确放回原位）所以我只能像往常一样依靠Igraph来做到这一点：

```
def yenksp(graph,source,sink, k):
    global distance
    """Determine the shortest path from the source to the sink."""
    a = graph.get_shortest_paths(source, sink, weights=distance, mode=ALL, output="vpath")[0]
    b = [] #Initialize the heap to store the potential kth shortest path
    #for xk in range(1,k):
    for xk in range(1,k+1):
        #for i in range(0,len(a)-1):
        for i in range(0,len(a)):
            if i != len(a[:-1])-1:
                spurnode = a[i]
                rootpath = a[0:i]
                #I should remove edges part of the previous shortest paths, but...:
                for p in a:
                    if rootpath == p:
                        graph.delete_edges(i) 

            spurpath = graph.get_shortest_paths(spurnode, sink, weights=distance, mode=ALL, output="vpath")[0]
            totalpath = rootpath + spurpath
            b.append(totalpath)
            # should restore the edges
            # graph.add_edges([(0,i)]) <- this is definitely not correct.
            graph.add_edges(i)
        b.sort()
        a[k] = b[0]
    return a 
```

这是一个非常糟糕的尝试，它只返回列表中的一个列表

我不太确定我在做什么，我已经对这个问题感到非常绝望，在最后几天，我对此的看法发生了 180 度甚至一次的转变。我只是一个尽力而为的菜鸟。请帮忙。也可以建议 Networkx 实施。

PS这可能没有其他工作方法，因为我们已经在这里研究过了。我已经收到了很多建议，我欠社区很多。DFS 或 BFS 不起作用。图很大。

编辑：我不断更正python脚本。简而言之，这个问题的目的是正确的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:00:49.493

Github 上有一个 Yen 的 KSP 的 python 实现，[YenKSP](https://github.com/Pent00/YenKSP)。充分感谢作者，这里给出了算法的核心：

```
def ksp_yen(graph, node_start, node_end, max_k=2):
    distances, previous = dijkstra(graph, node_start)

    A = [{'cost': distances[node_end], 
          'path': path(previous, node_start, node_end)}]
    B = []

    if not A[0]['path']: return A

    for k in range(1, max_k):
        for i in range(0, len(A[-1]['path']) - 1):
            node_spur = A[-1]['path'][i]
            path_root = A[-1]['path'][:i+1]

            edges_removed = []
            for path_k in A:
                curr_path = path_k['path']
                if len(curr_path) > i and path_root == curr_path[:i+1]:
                    cost = graph.remove_edge(curr_path[i], curr_path[i+1])
                    if cost == -1:
                        continue
                    edges_removed.append([curr_path[i], curr_path[i+1], cost])

            path_spur = dijkstra(graph, node_spur, node_end)

            if path_spur['path']:
                path_total = path_root[:-1] + path_spur['path']
                dist_total = distances[node_spur] + path_spur['cost']
                potential_k = {'cost': dist_total, 'path': path_total}

                if not (potential_k in B):
                    B.append(potential_k)

            for edge in edges_removed:
                graph.add_edge(edge[0], edge[1], edge[2])

        if len(B):
            B = sorted(B, key=itemgetter('cost'))
            A.append(B[0])
            B.pop(0)
        else:
            break

    return A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T20:55:51.240

我遇到了和你一样的问题，所以我将 Wikipedia 的 Yen 算法的伪代码移植到 Python 中与 igraph 库一起使用。

你可以在那里找到它：[https ://gist.github.com/ALenfant/5491853](https://gist.github.com/ALenfant/5491853)

# c# - 无法使用 Microsoft.Office.Interop.Word

> ID：15878206
> 
> 赞同：1
> 
> 时间：2013-04-08T11:44:22.537
> 
> 标签：c#, ms-word, ms-office

我正在尝试使用命名空间 并在[此处](http://www.mindstick.com/Articles/5cd1b721-9b94-4ea0-bd6e-2bb157401069/)`Microsoft.Office.Interop.Word`实现代码

但是Office用锯齿形红线标记为未识别类型

有人知道我应该如何包含这个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:47:57.720

您可以从此处获取并包含互操作程序集：

[http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:48:06.943

您需要在项目中添加引用。转到解决方案资源管理器，右键单击“参考”，选择“添加参考...”并选择适当的参考，例如 Microsoft.Office.Interop.Word。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T14:49:10.660

您应该在您的计算机上安装 Microsoft Office

# svn - 如何从 SVN 服务器加载最新版本的代码而忽略我的本地更改？

> ID：15878207
> 
> 赞同：3
> 
> 时间：2013-04-08T11:44:23.887
> 
> 标签：svn, repository, commit, revert

1.  几天前，我“更新”了我的本地源代码副本（*即*，我从 SVN 存储库中获取了代码）。
2.  之后，代码被其他人更改并提交到存储库。
3.  现在我想对代码进行一些更改并将其提交到存储库。

我该怎么做？

想到的第一个答案是：进行更改并“svn commit”它们。但是，在这种情况下，看起来我试图删除其他用户添加的更改。此外，可能是最近我不小心对代码进行了一些我不打算做的更改。

想到的第二个答案是：首先，“svn update”您的本地代码，然后进行更改，然后“svn commit”它们。但是，在这种情况下，“更新”将尝试将来自 svn 服务器的新代码与我的代码合并，这些代码可能包含我上面提到的意外不受欢迎的更改。

想到的第三个答案是：首先，“svn revert”，进行更改，然后“svn commit”。但它也不起作用，因为通过“svn revert”我确实删除了我的意外更改（这很好）但我得到了旧版本的代码，如果我尝试将它“svn commit”到 svn 服务器，它会看起来我试图删除其他人所做的更改。

那么解决办法是什么。总而言之，**我想从 SVN 存储库中获取最新版本的代码，并且我不想将此代码与我的本地更改合并（我想覆盖我的本地更改）**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:44:08.157

你可以做两件事：

1.  查看一个新的干净工作目录。没有理由你不能。优点，它不会碰你的东西。
2.  进行更新后还原您的更改。这将使您获得*干净*的结帐，但您将丢失所有更改。

通常，您希望保留所做的更改并将它们合并回其他人所做的更改中。如果您需要干净的结帐，请签出一个新的工作目录。这是最简单的，它会保留您的更改。如果您不想要更改，请还原它们，运行`svn status`以验证您在工作副本（或非版本化文件）中没有更改，然后进行更新。它会比新的干净结帐快一点。

# binary - 带有二进制数据的gnuplot中的pm3d

> ID：15878211
> 
> 赞同：4
> 
> 时间：2013-04-08T11:44:34.187
> 
> 标签：binary, fortran, gnuplot, binary-data

我有一些包含内容的数据文件

```
a1 b1 c1 d1
a1 b2 c2 d2
...
[blank line]
a2 b1 c1 d1
a2 b2 c2 d2
... 
```

我用 gnuplot 绘制这个

```
splot 'file' u 1:2:3:4 w pm3d. 
```

现在，我想使用二进制文件。我使用未格式化的流访问（直接或顺序访问不能直接工作）使用 Fortran 创建了文件。通过使用 gnuplot

```
splot 'file' binary format='%float%float%float%float' u 1:2:3 
```

我得到一个正常的 3D 图。但是， pm3d-command 不起作用，因为我在二进制文件中没有空行。我收到错误消息：

```
>splot 'file' binary format='%float%float%float%float' u 1:2:3:4 w pm3d
Warning: Single isoline (scan) is not enough for a pm3d plot.
Hint: Missing blank lines in the data file? See 'help pm3d' and FAQ. 
```

根据[http://gnuplot.sourceforge.net/demo/image2.html](http://gnuplot.sourceforge.net/demo/image2.html)中的演示脚本，我必须指定记录长度（我仍然不明白）。但是，使用演示页面中的此脚本和带有 pm3d 的命令会获得相同的错误消息：

```
splot 'scatter2.bin' binary record=30:30:29:26 u 1:2:3  w pm3d 
```

那么如何正确绘制二进制文件中的四维数据呢？

编辑：谢谢，mgilson。现在它工作正常。仅作记录：我的 fortran 代码片段：

```
 open(unit=83,file=fname,action='write',status='replace',access='stream',form='unformatted')
 a= 0.d0
 b= 0.d0
 do i=1,200
    do j=1,100  
       write(83)real(a),real(b),c(i,j),d(i,j)
       b = b + db
    end do
    a = a + da
    b = 0.d0
 end do
close(83) 
```

gnuplot 命令：

```
 set pm3d map
 set contour
 set cntrparam levels 20
 set cntrparam bspline
 unset clabel
splot 'fname' binary record=(100,-1) format='%float' u 1:2:3:4 t 'd as pm3d-projection, c as contour' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:24:35.307

很好的问题，感谢您发布它。这是我之前没有花太多时间使用的 gnuplot 的一个角落。首先，我需要生成一些测试数据——我使用了 python，但你也可以`fortran`很容易地使用：

请注意，我的输入数组 ( `b`) 只是一个 10x10 数组。数据文件中的前两个“列”只是索引 (i,j)，但您可以使用任何内容。

```
>>> import numpy as np
>>> a = np.arange(10)
>>> b = a[None,:]+a[:,None]
>>> b
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],
       [ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],
       [ 2,  3,  4,  5,  6,  7,  8,  9, 10, 11],
       [ 3,  4,  5,  6,  7,  8,  9, 10, 11, 12],
       [ 4,  5,  6,  7,  8,  9, 10, 11, 12, 13],
       [ 5,  6,  7,  8,  9, 10, 11, 12, 13, 14],
       [ 6,  7,  8,  9, 10, 11, 12, 13, 14, 15],
       [ 7,  8,  9, 10, 11, 12, 13, 14, 15, 16],
       [ 8,  9, 10, 11, 12, 13, 14, 15, 16, 17],
       [ 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]])
>>> with open('foo.dat','wb') as foo:
...     for (i,j),dat in np.ndenumerate(b):
...         s = struct.pack('4f',i,j,dat,dat)
...         foo.write(s)
... 
```

所以在这里我只是将每个数据点的 4 个浮点值写入文件。同样，这是您已经使用`fortran`. 现在绘制它：

```
splot 'foo.dat' binary record=(10,-1) format='%float' u 1:2:3:4 w pm3d 
```

我相信这指定了每个“扫描”都是一个“记录”。因为我知道每次扫描都会有 10 个浮点数，所以它成为`record`列表中的第一个索引。`-1`表示 gnuplot 应该一直读取记录，直到找到文件末尾。

# c# - 数据类型为 nvarchar 时按日期字段排序

> ID：15878213
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:44:37.910
> 
> 标签：c#, database, sql-server-2005, join

使用堆栈上的答案之一，我使用了以下查询：

```
select 
  AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , 
  AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,
  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,  
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,
  SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "'
  and INST_TYPE LIKE 'FUT%' 
group by CONVERT(VARCHAR(11),sauda_date) order by CONVERT(VARCHAR(11),sauda_date) desc 
```

这个查询给了我下面的输出：

![在此处输入图像描述](https://i.stack.imgur.com/nMuB3.png)

在此，如果我们查看 sauda_date 列，在 2013 年 2 月 28 日之后，它会在 2013 年 3 月 22 日之前订购，然后是 2013 年 3 月 21 日，然后是 2013 年 3 月 20 日，等等。

但它应该是 2013 年 2 月 28 日、2013 年 3 月 1 日、2013 年 3 月 2 日 ....、2013 年 3 月 20 日、2013 年 3 月 21 日、2013 年 3 月 22 日。

我应该在查询中进行哪些更改？

**注意：** sauda_date 是 nvarchar 类型

**新查询：**

```
select AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,  CONVERT(VARCHAR, CONVERT(DATETIME, sauda_date, 106), 106) as Sauda_Date,SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "',106) and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "',106) THEN Trade_Qty ELSE 0 END) AS SellQty ,     SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword from tradefile where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and INST_TYPE LIKE 'FUT%' group by convert(datetime,sauda_date,106) order by convert(datetime,sauda_date,106) desc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:48:20.523

您正在将日期转换为文本以进行排序，因此您获得了文本顺序。“F”在“M”之前。在不知道架构的情况下，我会说：尝试从子句中删除`CONVERT...`调用。`ORDER BY`

此外，您似乎想要`ASC`订购，而不是`DESC`.

编辑：你说 sauda_date 是`nvarchar`类型。我会说它不应该是（使用正确的日期类型进行存储），或者您必须将其转换回日期时间进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:51:15.967

将最后一行更改为：

```
select
  ....,
  CONVERT(VARCHAR, CONVERT(DATETIME, sauda_date, 106), 106)
...
group by CONVERT(VARCHAR, CONVERT(DATETIME, sauda_date, 106), 106)
order by CONVERT(DATETIME, sauda_date, 106) asc 
```

此外，您首先需要最低日期，所以我相信您需要一个`asc`而不是一个`desc`

# java - 用于将语音转换为 Android 的模拟和数字信号的声音 API

> ID：15878215
> 
> 赞同：1
> 
> 时间：2013-04-08T11:44:46.520
> 
> 标签：java, android, mobile

我正在尝试将可能是嗡嗡声或歌唱模式的声音转换为模拟和数字信号，以便我可以得到一个模式，从而我可以移动对象。我已经将我的声音转换为文本语音（语音 api 可用于 android）。我已经尝试过 musicg api 但无法成功。任何人都可以建议任何声音api，欢迎提出建议。

在此先感谢，尼米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T13:30:23.787

您可以参考以下链接：

[Android中的声音识别](https://stackoverflow.com/questions/8524182/sound-recognition-in-android)

[https://github.com/gast-lib/gast-lib/tree/master/library/src/root/gast/audio](https://github.com/gast-lib/gast-lib/tree/master/library/src/root/gast/audio)

[https://code.google.com/p/josemariakim/source/browse/trunk/lab3/ClapController/ClapDetector.java](https://code.google.com/p/josemariakim/source/browse/trunk/lab3/ClapController/ClapDetector.java)

[https://code.google.com/p/musicg/](https://code.google.com/p/musicg/)

欢迎任何其他建议。

谢谢

# php - 无法按索引访问数组，但可以使用 foreach 进行迭代

> ID：15878217
> 
> 赞同：0
> 
> 时间：2013-04-08T11:44:49.587
> 
> 标签：php

为什么我不能通过索引访问数组`$obj->property[0]`但可以遍历数组（每个只有一个值）然后获取值。

```
foreach($obj->property as $inner_obj)
{
    foreach($inner_obj->property as $inner_inner_obj)
        回声$inner_inner_obj->属性；
}
```

如果我按索引访问数组，我会得到`Undefined offset: 0`

**编辑： var_dump 的输出**

```
数组（1）{
 [0]=> 对象（FooClass）#141 {
   // 雅达 雅达
  }
}
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:49:46.227

如果你通过上课，`implements` `Countable, Iterator`你可以制作一个可以使用`foreach`但它不是数组的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:47:17.563

`$obj`不是数组它的`stdClass Object`和

因为那`$obj->property[0]`会告诉你`Undefined offset: 0`

尝试像这样使用它来获得第一个值`property`

```
$obj->property->property; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:48:43.710

因为您在 foreach 中循环遍历数组的属性。使用 [0] 您可以显式尝试将其作为数组访问。您可以让您的对象扩展 ArrayObject 并使 php 以数组的形式访问您的对象，这正是您想要的。

能够将对象用作数组的接口：
[http://www.php.net/manual/en/class.arrayaccess.php](http://www.php.net/manual/en/class.arrayaccess.php)
[http://www.php.net/manual/en/class.countable .php](http://www.php.net/manual/en/class.countable.php)
[http://www.php.net/manual/en/class.iteratoraggregate.php](http://www.php.net/manual/en/class.iteratoraggregate.php)

您可以扩展的对象本身：
[http ://www.php.net/manual/en/class.arrayobject.php](http://www.php.net/manual/en/class.arrayobject.php)

Imo，在没有数组接口的情况下循环对象从来都不是一个好主意，因为这意味着您正在使用公共变量。我的建议是始终使它们受到保护或私有，除非不可能（SOAP？）。您可以通过 getter 和 setter 访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:50:12.703

`$obj->property`可以是没有 key 的数组`0`。数组中的键可能不是数字。因此，您的数组可能是关联数组而不是常规数组。如果你想要数字索引试试这个：

```
 $numArray = array_values($obj->property);
  var_dump($numArray); 
```

如果要访问数组的第一个值，请使用：

```
 $first = reset($obj->property); 
```

如果您的变量是`array`.

# plsql - PLSQL 代码中的“删除”是什么意思？ 我有一个带有以下代码行的 PLSQL 代码。 delete my_table; my_table全局临时表在哪里。我猜上面的代码意味着，从表中删除所有行。但是，我无法谷歌搜索任何结果。

> ID：15878221
> 
> 赞同：1
> 
> 时间：2013-04-08T11:44:53.883
> 
> 标签：plsql, oracle11g, temp-tables

我有一个带有以下代码行的 PLSQL 代码。

```
delete my_table; 
```

`my_table`全局临时表在哪里。我猜上面的代码意味着，从表中删除所有行。但是，我无法谷歌搜索任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:49:29.313

`FROM`关键字和`WHERE`子句[是可选的](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_8005.htm)。

# python - 强制模块从 CPython 脚本在 PyPy 中运行（在部分代码上运行 PyPy）？

> ID：15878223
> 
> 赞同：1
> 
> 时间：2013-04-08T11:44:56.540
> 
> 标签：python, module, cpython, pypy

有没有办法从 CPython 脚本导入模块，但在 PyPy 中运行它们？

问题是我有一个使用大量 SciPy（和 NumPy）的代码，但有些代码可以用 PyPy 优化。

这是我想做的一个随机示例：

sub_run_in_pypy.py 模块：

```
#assuming this can be optimized with PyPy
def function_a(foo):
    return foo**2 
```

main_run_in_cpython.py 模块：

```
import scipy.stats as stats

#assuming this exists:
import import_function_for_pypy
pypy_imported_function = import_function_for_pypy(module_name=sub_run_in_pypy, function_name=function_a)

x = stats.t.rvs(5, loc=0, scale=1, size=1)

print pypy_imported_function(x) 
```

如果这不存在，为什么不呢？

*编辑：正如 Bakuriu 推断的那样，我建议它可能是在一个单独的进程中运行的东西。这会增加太多开销吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T10:45:50.517

由于我早在其他线程之前就偶然发现了这个问题，因此此处简要描述了反向机制[（我可以将 CPython 嵌入 PyPy 中吗？）](https://stackoverflow.com/a/7828981/5349916)。

基本思想是在 CPython 解释器旁边启动一个 PyPy 解释器（反之亦然），并通过进程间通信连接它们。虽然您可能很想尝试通过管道或套接字来执行此操作，但强烈建议使用更高级别的库，例如[execnet](http://codespeak.net/execnet/)（实际上[用于此目的](https://www.quora.com/Did-Quoras-switch-to-PyPy-result-in-increased-memory-consumption)）。

如果您采用低级方法，请务必尽早决定是否以及如何处理多线程或多进程执行等架构，是否需要异步计算甚至主从设置。

# java - 如何从类路径中获取 ResourceBundle 文件？

> ID：15878227
> 
> 赞同：2
> 
> 时间：2013-04-08T11:45:09.510
> 
> 标签：java, jar, classpath, resourcebundle

我正在`ResourceBundle`为不同的语言（en、de、fr、...）使用 a，并且密钥列在 .properties 文件中。它工作得很好，但只使用函数中的类路径`getBundle()`。

现在，如果我将项目构建为可执行 JAR 文件，我将无法维护这些属性/字典文件。如何继续从 JAR 文件中获取这些文件并使用它们（可能使用相对路径）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:16:01.760

检查[这个](http://www.coderanch.com/t/432762/java/java/absolute-path-bundle-file)是否有帮助。**该线程列出了一种使用绝对**路径（非相对路径）实现此目的的方法。

内联链接中的代码：

```
File file = new File("/languages");
URL[] urls = {file.toURI().toURL()};
ClassLoader loader = new URLClassLoader(urls);
ResourceBundle bundle = ResourceBundle.getBundle("english", Locale.getDefault(), loader); 
```

也来自网址：

```
 URL[] urls = new URL[1];

    // - startfolder on the server, where he can find the package-structure like this.BUNDLE_NAME (http://somedomain.com/jws-stuff/com/myexample/test/)
    urls[0] = new URL("http://somedomain.com/jws-stuff/"); 
    ClassLoader loader = new URLClassLoader(urls);
    RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME, Locale.GERMAN, loader); 
```

# regex - awk 不带空格的匹配模式

> ID：15878231
> 
> 赞同：0
> 
> 时间：2013-04-08T11:45:24.277
> 
> 标签：regex, unix, awk

我需要匹配文档第一行中的模式。字段分隔符是“：”，当不遵循模式时我想收到错误消息。我需要区分有空格和没有空格的字段。我使用这样的东西：

```
awk -F ":" '{if (($1 ~/^@[A-Za-z0-9]*/) && ($2 ~/[0-9]*/) && ($3 ~/[0-9]*/) && ($4 ~/[0-9]*/) && ($5 ~/[0-9]+/)){print "ok"} else { print "no"}}' 
```

如果

```
$1 
```

是

```
"AAABBBF43T5Y" 
```

即使是

```
"AABBBF 43T5Y" 
```

当 $1 或其他字段中有空格时，我需要得到“否”。

有什么建议么？

好的，这有点令人困惑。

我有这样的事情：

```
@HWUSI-EAS100R:6:73:941:1973#0/1 
```

我想检查每个字段。第一个可以包含任何字符，第二个可以包含数字等。但是空格是不允许的，所以它是不正确的，例如：

```
@HWUSI-E AS100R:6:73:9 41:1973#0/1 
```

感谢您的反馈，很抱歉让您感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:04:05.070

您的示例和措辞非常令人困惑，但您似乎想检查第一个字段是否包含空格。您可以执行以下操作：

```
$ cat file
AABBBF43T5Y:f2:f3
AABBBF 43T5Y:f2:f3

$ awk -F: '$1~/ /{print "FAIL LINE: ",NR;next}{print "PASS LINE:",NR}' file
PASS LINE: 1
FAIL LINE: 2 
```

如果您只想检查条件并打印输出，这可以更简单地编写，如果您想要其他任何内容，则之前的块结构允许更轻松的修改：

```
$ awk -F: '{print $1~/ /?"FAIL":"PASS","LINE:",NR}' file
PASS LINE: 1
FAIL LINE: 2 
```

如果你清楚地描述你的问题，发布一个有代表性的输入文件和预期的输出，你会得到更好的答案。

**编辑：**

只要正则表达式匹配锚定`^`并且`$`仅包含允许的字符，则不会接受空格：

```
$ cat file
@HWUSI-EAS100R:6:73:941:1973#0/1
@HWUSI-E AS100R:6:73:9 41:1973#0/1

$ awk -F: '$1~/^@[a-zA-Z0-9-]*$/&&$2~/^[0-9]*$/{print "PASS",NR;next}{print "FAIL",NR}' file
PASS 1
FAIL 2 
```

因此`$2~/^[0-9]*$/`，仅当正则表达式匹配且正则表达式为：

```
^      # Match start of field
[0-9]* # Zero or more digits
$      # The end of the field 
```

这将允许空白字段或仅数字字段。

# ios - UITextField 编辑和添加到数组

> ID：15878236
> 
> 赞同：0
> 
> 时间：2013-04-08T11:45:35.617
> 
> 标签：ios, xcode, ipad, nsmutablearray, uitextfield

好的，所以我有一系列标签介于 21 和 35 之间的 UITextField。我正在使用 UITextField 委托在完成编辑时获取文本字段的值，然后将其添加到可变数组中。委托方法的代码如下：

```
- (void)textFieldDidEndEditing:(UITextField *)textField{

if(textField.tag >=21 && textField.tag <36){
    if(textField.text.length != 0)
    [ingredients addObject:textField.text];
  }
} 
```

因此，当文本字段完成编辑后，它会将其值添加到可变数组中。这一切都很好。但是，如果再次编辑该文本字段，则会出现我的问题，如果用户更改该文本字段中的值，它将向数组中添加另一个值，我希望编辑以前的值而不是在数组中创建新值.

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:54:07.770

您可以将您的成分对象从 NSMutableArray 更改为 NSMutableDictionary。例子：

```
- (void)textFieldDidEndEditing:(UITextField *)textField{

    if(textField.tag >=21 && textField.tag <36){
        if(textField.text.length != 0)
            [ingredients setObject:textField.text forKey:[NSNumber numberWithInt:textField.tag]];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:50:17.513

初始化时，将 15 个空字符串添加到成分数组中。然后当`textFieldDidEndEditing:`被调用时，将字符串设置在适当的索引处，`(textField.tag - 21)`而不是使用`addObject:`

# c# - Web 浏览器截屏位图太重

> ID：15878239
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:45:40.033
> 
> 标签：c#, image, webbrowser-control

我正在使用此代码来捕获浏览器屏幕：

```
System.Windows.Forms.WebBrowser wb = new System.Windows.Forms.WebBrowser();
Bitmap bitmap = new Bitmap(240, 320);
wb.DrawToBitmap(bitmap, new System.Drawing.Rectangle(0, 0, 240, 320)); 
```

位图文件大小为 300 kb。我将这些图像存储在多个线程上的 azure blob 存储中，上传需要花费太多时间。如何在不影响质量的情况下减小图像尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:48:18.780

使用 BMP 以外的格式，例如具有高质量设置的 PNG 或 JPEG。或者，在上传之前对位图进行 ZIP 压缩。

# objective-c - 在 Objective C 中为变量分配结构

> ID：15878246
> 
> 赞同：0
> 
> 时间：2013-04-08T11:45:55.543
> 
> 标签：objective-c

我是 Objective C 的新手，所以这可能是一个非常愚蠢的问题。我正在阅读 iOS 编程书，发现了这段代码：

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    CLLocationCoordinate2D loc = [userLocation coordinate]; // returns CLLocationCoordinate2D
    ...
} 
```

我还在学习Objective C，但不`loc` 应该是指针吗？据我了解，您只能直接分配简单的类型，例如 int 和 float。这`CLLocationCoordinate2D`是一个结构。然而这不起作用：

```
CLLocationCoordinate2D *loc = [userLocation coordinate]; 
// this throws error message
// Initializing 'CLLocationCoordinate2D *' with an expression of incompatible type 'CLLocationCoordinate2D' 
```

那么这里发生了什么，我怎样才能更多地了解指针。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:49:23.967

结构不是指针！

它们只是简单的 C 类型数据结构，如 int、float 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:50:01.310

这取决于返回类型`[userLocation coordinate]`是什么。如果它返回一个结构，那么您必须将该结构存储在某个地方。在这种情况下，您会将其存储在堆栈中，一旦超出范围，它将被删除。

如果它返回一个指针，那么该指针将指向存储结构的位置。请记住，结构不是对象，它们只是可以存储组合在一起的多个值的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:51:31.297

您可以分配一个结构。Objective-C 最终还是 C。

虽然内存中的对象在内部与结构并没有太大区别，但您不能直接分配对象，而是对对象的引用。

因此，您需要了解 [userLocation coordinate] 真正返回的内容。它可以是结构或指向结构或 id 的指针。因此，接收返回值的本地变量必须是同一类型。

# java - 将大型二进制文件读入内存后如何清理

> ID：15878248
> 
> 赞同：1
> 
> 时间：2013-04-08T11:46:07.580
> 
> 标签：java, memory-management, memory-leaks

我正在将一堆二进制文件（一次一个）读入内存以对它们执行一些操作，然后将它们保存回磁盘。对于小文件，它工作得非常好，但是，对于较大的文件，我有很多担忧。

现在，假设我正在阅读的文件是 25Mb 大 - 这就是我的代码的样子： -

```
public static byte[] returnEncryptedFileData(File fileObj) {
byte[] fileData = FileUtils.readFileToByteArray(fileObj);
//now performing some operations on fileData

return fileData;
    } 
```

在这段代码执行之后，我看到 (50Mb + MISC) 的额外空间消耗（这很好，因为会有 2 个字节数组 - 一个是我定义的 fileData，另一个是 readFileToByteArray 用来执行操作的，每个都持有25Mb 的数据）

但是，即使在此方法返回并再次调用下一个要读取的文件后，之前持有的内存也不会释放！如果正在读取的下一个文件是 30Mb 大，我会看到 (50Mb + 60Mb + MISC) 的内存消耗

如何在将文件读取到字节数组后进行清理，对其执行一些操作，然后从方法中返回它。System.gc() 没有帮助，因为它不会立即执行 GC.. 我认为不可能“释放”内存？

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:51:17.360

简短的回答：Java 会在它得到它时得到它。[不要使用*_*`System.gc();`](https://stackoverflow.com/questions/2414105/why-is-it-a-bad-practice-to-call-system-gc?lq=1)

现在大多数人都有足够的内存，50mb 并不是什么大问题。如果您最终不得不多次执行此操作，最好的办法是重用您的大字节数组，这样您就只有一个。另一种选择是一次只读取少量文件，进行处理，然后阅读更多。但是，无论处理是什么，这可能都不实用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:59:26.243

如前所述，您不能强制 JVM 对您的内存进行垃圾收集，或释放某部分内存。

但是，您可以使您的内存*更有可能*被释放。要了解其原理，您必须了解垃圾收集器 (GC) 的工作原理。简而言之，当它没有被任何地方引用时，它将释放内存。换句话说，当没有对象持有对 object 的引用时`A`， object`A`将有资格进行垃圾回收。有关该主题的简短介绍，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/usingobject.html)。

因此，您可以通过显式释放对`byte[]`. 随后调用`System.gc()`“建议 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用”。请注意，这并不能保证它实际上会释放您的内存！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:52:50.010

每当 JVM 认为需要时，Java 中的垃圾收集就会完成（这是一个非常简单的解释 :)）。如果您没有收到错误或异常或类似的信息，那您很好。如果您担心应用程序的内存占用，请检查 JVM 的内存参数：例如：[如何增加 JVM 内存？](https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:55:39.857

我猜您仍然对此方法返回的字节数组有一些参考。除非您没有参考它，否则 GC 不会选择它。您能否也发布调用此方法的方式以及调用后会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:01:18.820

唯一不会被 GC 自动取消分配的是 VM 外部的资源。
在您的情况下，由于该`readFileToByteArray`方法始终关闭文件，因此仍分配的内存仍被引用或尚未被垃圾回收

修复它的方法取决于您如何声明需要取消分配的变量。我建议每次读取文件时都使用字节数组的新引用，并以尽可能小的范围声明它（如果有，则在 for 循环内），以便在年轻一代中分配变量-尽快分配。否则，在重新影响它之前明确地将您的引用设置为 null。

# android - 从URL在android中解析Json

> ID：15878251
> 
> 赞同：1
> 
> 时间：2013-04-08T11:46:29.343
> 
> 标签：android, json

我从 URL 获取 json，但在解析时出错。它说的是非法字符。你们能指出罪魁祸首在哪里吗？ **我的代码**

```
public String GetJString(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    Log.d("cstch",json);

        return json;

} 
```

**错误信息**

```
04-08 15:26:43.393: E/AndroidRuntime(1122): FATAL EXCEPTION: AsyncTask #2
04-08 15:26:43.393: E/AndroidRuntime(1122): java.lang.RuntimeException: An error occured while executing doInBackground()
04-08 15:26:43.393: E/AndroidRuntime(1122):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.lang.Thread.run(Thread.java:856)
04-08 15:26:43.393: E/AndroidRuntime(1122): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 124: http://smkamran.com/~tvinfo/tvguide/box/getprogramlist?mediagroupId=9c476522-d771-4fcd-ae21-34b302c04e46&dateBegin=2013-04-08 00:00:00&dateEnd=2013-04-08 23:59:00&channelList=RBB
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.net.URI.create(URI.java:727)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at org.apache.http.client.methods.HttpPost.<init>(HttpPost.java:79)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at com.smkamran.germantv.JSONParser.GetJString(JSONParser.java:80)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at com.smkamran.germantv.ChannelDetails$GetDataFromServer.doInBackground(ChannelDetails.java:267)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at com.smkamran.germantv.ChannelDetails$GetDataFromServer.doInBackground(ChannelDetails.java:1)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-08 15:26:43.393: E/AndroidRuntime(1122):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:57:06.517

根据错误消息，它是 URL 的查询字符串部分中的非法字符。您应该在该 URL 上使用[URLEncoder.encode() 。](http://developer.android.com/reference/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:58:47.523

您的 JSON 无效。

出现以下错误

错误：第 1 行的解析错误：...1658","description":"(1658)Simones Wide ------------------------^ 期待 '字符串'，'数字'，'NULL'，'TRUE'，'FALSE'，'{'，'['，得到'未定义'

此时缺少一些括号。

1658","description":"(1658) Simones Widerstand gegen\u00fcber David br\u00f6ckelt.

# asp.net-mvc - 在 MVC 中使用 Session 对象，真的很糟糕吗？

> ID：15878252
> 
> 赞同：5
> 
> 时间：2013-04-08T11:46:33.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我建议在 MVC3 中使用一个简单的会话对象来维护像 RecordIds 这样的状态数据，而不是将它们传递给所有客户端页面，这会很麻烦。一次填充会话对象直到不再使用似乎要简单得多。

那么这是可以接受的做法还是作弊？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:53:29.810

就像开发人员生活中的一切一样，使用会话是一种权衡，恕我直言，它通常是一个糟糕的选择。

会话状态不仅会导致服务器上的负载趋于增长并产生可伸缩性障碍（这两个问题都可以通过使用状态服务器或 sql 服务器存储会话变量来部分解决），它还有一个并非每个人都知道的设计怪癖：它在会话上维护一个读写锁。（[http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)）

这意味着默认情况下，同一用户不能发出两个并发请求。此行为与 asp.net 相关（不仅仅是 asp.net MVC），但是由于 asp.net MVC 确实鼓励您走 ajax 之路，因此您会更频繁地看到此问题）。

[您可以通过巧妙地使用只读会话状态或有选择地禁用它](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatebehavior.aspx)来绕过这些问题，但根据我的经验，这会产生开发开销，因为该属性只能在类范围内声明，而不能用于特定的操作方法，这会导致您分解逻辑通常会放在一起的单位。

总之，尊敬的，asp.net 会话状态默认行为是有问题的。尽可能避免使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T11:48:34.943

使用 Session 对象没有任何问题。通常人们避免使用它们以减少服务器上的负载；但是如果你很*小心*，不要尝试在其中放入大量数据并且没有太多（多少取决于你的服务器），那么这是一种可以接受的做法。

有关使用会话的潜在缺点的一些信息，请查看[仍然可以在 ASP.NET mvc 中使用会话变量](https://stackoverflow.com/q/6744493/96505)[的答案](https://stackoverflow.com/a/6744710/96505)，或者对于某些事情（例如购物车）是否有更好的选择

# android - UBISLATE DATAWIND 的 USB 供应商 ID

> ID：15878254
> 
> 赞同：1
> 
> 时间：2013-04-08T11:46:41.247
> 
> 标签：android

我正在尝试通过 UBISLATE 在设备 DATAWIND 上运行和调试我的应用程序。

如何找到 USB 供应商 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T05:53:53.937

要将 Android Debug Bridge (adb) 与 DATAWIND Ubislate 7C+ 连接，请在 Ubuntu 终端中运行命令

```
lsusb 
```

它会将连接的 USB 列为

```
......
Bus 001 Device 007: ID 18d1:0003 Google Inc. 
...... 
```

其中 18d1 将作为供应商 ID。然后编辑 /etc/udev/rules.d/51-android.rules 如下

```
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666" 
```

然后重新启动udev

```
# /etc/init.d/udev restart 
```

就是这样，现在已经完成了。必须断开并重新连接平板电脑与计算机。对于终端中的检查类型为

```
adb shell 
```

它将指向平板电脑的根`root@android:/`

或`类型

```
adb devices 
```

这给了

```
List of devices attached 
200804111413fc082   device 
```

这是基于

[如何将此平板电脑注册到 Ubuntu udev 列表？](https://stackoverflow.com/questions/12111005/how-to-register-this-tablet-to-ubuntu-udev-list)

以及其中提供的链接。

[http://clamel.netai.net/smartpad850i/enable_adb](http://clamel.netai.net/smartpad850i/enable_adb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:54:05.190

供应商 ID 列表在[这里](http://developer.android.com/tools/device.html#VendorIds)，您指定的设备似乎没有。因此您无法连接到 Android Debug Bridge (adb)，您仍然可以将项目的 bin 文件夹中的 apk 复制到您的设备，安装并运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T17:13:17.340

USB 供应商 ID 可在 www.linux-usb.org/usb.ids 找到。
18d1 谷歌公司

# asp.net - 文本框 text_changed 事件处理

> ID：15878257
> 
> 赞同：0
> 
> 时间：2013-04-08T11:46:46.857
> 
> 标签：asp.net, events, textbox, textchanged

我在一个表单中有 8 个文本框。并且每个文本框更改事件文本框中的文本都应该保存到数据库中。有没有比触发每个文本框的文本更改事件更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:58:34.653

1.  您可以对所有文本框仅使用一个事件处理程序，并使用 sender 参数来获取更改的文本。

2.  您可以将所有文本框放在[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)中，这样即使您将 AutoPostBack 设置为 true，页面也不会刷新。

3.  您将编写一个 PageMethod 来接收要更新的元素和更新后的文本。可以使用 AJAX 和 jQuery 调用此方法。[Dave Ward 的这个](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)博客应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:00:30.793

一种可能的方法是使用计时器。有一个计时器，每 1000 毫秒（例如）滴答一次并检查 textBox.Text。

# sql-server - 缺少程序集/组件/dll 难题

> ID：15878259
> 
> 赞同：0
> 
> 时间：2013-04-08T11:46:58.230
> 
> 标签：sql-server

我（仍然！）正在重建 Team System Win 7 构建服务器。我已经安装了带有 SDK 和所有花里胡哨的完整 Sql Server 2005 Express，并重新启动了服务器。

但是，当我启动构建时，编译步骤失败并显示以下消息：“名称空间'Microsoft.SqlServer'中不存在类型或名称空间名称'Management'”

这段代码都在我们的开发机器上编译，所以代码必须有正确的引用，而且看起来构建服务器上没有安装一些东西——但是什么？

（出于特定原因，我们使用的是 Sql Srvr 2005）

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:58:42.680

根据 TFS [2012](http://msdn.microsoft.com/en-us/library/vstudio/dd631889.aspx)和[2010](http://msdn.microsoft.com/en-us/library/vstudio/dd631889%28v=vs.100%29.aspx)的文档，需要 SQL 2008 或更高版本。

（我认为您收到的具体错误消息是因为某些方法在 SQL 2005 和 2008 之间被移动到不同的程序集中）

# c# - 如何以编程方式更改 DataGridViewTextBox 列的文本？

> ID：15878263
> 
> 赞同：0
> 
> 时间：2013-04-08T11:47:19.690
> 
> 标签：c#, gridview, datagridviewtextboxcell

我有一个“DataGridViewTextBoxColumn”类型的 DataGridView，其中有以下字段：

```
SrNo. |    Description   |    HSNCode    |    Qty    | Rate    | Amount 
```

我想让用户输入项目 Description ， Qty 和 Rate

“SrNo”。列是`read only`我要生成 SrNo。当用户进入“描述”单元格时自动自动显示，即我想在该单元格中显示行索引。

当用户离开“数量”字段时，我还想在我的程序中计算“金额”（数量*费率）。

我尝试了以下代码：

```
private void grdData_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{

    if (e.RowIndex >= 0)
    {
        if (e.ColumnIndex == 0)
        {
            grdData.Rows[e.RowIndex].Cells[0].Value = e.RowIndex.ToString();

        }
        else if (e.ColumnIndex == 5)
        {
            grdData.Rows[e.RowIndex].Cells[5].Value = 
            ((Convert.ToDouble(grdData.Rows[e.RowIndex].Cells[3])) *    
            (Convert.ToDouble(grdData.Rows[e.RowIndex].Cells[4]));
        }
    }
} 
```

怎么做？

# php - 通过批处理将参数传递给存储在变量中的php文件

> ID：15878264
> 
> 赞同：0
> 
> 时间：2013-04-08T11:47:21.890
> 
> 标签：php, windows-7, batch-file, parameter-passing

我想从 Windows 7 上的批处理文件中调用我拥有的 php 文件，它需要一个参数。

目前，我正在这样做：

```
php myfile.php %1 
```

`%1`传递给批处理文件的值在哪里。

当 php 文件执行时，虽然它不会替换`%1`为该变量的值。

我怎样才能得到它以便我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:52:16.660

[在 PHP 中，您可以使用$argv](http://www.php.net/manual/en/reserved.variables.argv.php)检查传递给脚本的参数，变量的值必须是 in `$argv[1]`，因为`$argv[0]`它是脚本的名称。此外，您可以使用[$argc检查参数的数量](http://www.php.net/manual/en/reserved.variables.argc.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:15:02.897

尝试：

```
php myfile.php %~1 
```

或者：

```
php myfile.php "%~1" 
```

# c# - C# 中的单服务器/多客户端

> ID：15878265
> 
> 赞同：0
> 
> 时间：2013-04-08T11:47:21.930
> 
> 标签：c#

我是 C# 编程的新手。到目前为止，我有一个服务器/单个客户端，但我需要将它变成一个服务器/多个客户端。这是我的代码：

**坦克服务器**

```
 using System;
     using System.Collections.Generic;
     using System.Linq;
     using System.Text;
     using System.Threading.Tasks;
     using System.Net;
     using System.Net.Sockets;
     using System.Threading;

    namespace TankServer
    {
      class Program
    {
        static Socket sck;
        static Socket acc;
        static int port = 1700;
        static IPAddress ip;
        static Thread rec;
        static string name;

        static string GetIp()
        {
            string strHostName = System.Net.Dns.GetHostName();
            IPHostEntry ipEntry = System.Net.Dns.GetHostEntry(strHostName);
            IPAddress[] addr = ipEntry.AddressList;
            return addr[addr.Length - 1].ToString();
        }

        static void recV()
        {
            while (true)
            {
                Thread.Sleep(500);
                byte[] Buffer = new byte[255];
                int rec = acc.Receive(Buffer, 0, Buffer.Length, 0);
                Array.Resize(ref Buffer, rec);
                Console.WriteLine(Encoding.Default.GetString(Buffer));
            }
        }

        static void Main(string[] args)
        {
            rec = new Thread(recV);
            Console.WriteLine("Your Local Ip is : " + GetIp());
            Console.WriteLine("Please enter yout name");
            name = Console.ReadLine();
            Console.WriteLine("Please Enter Your Host Port");
            string inputPort = Console.ReadLine();
            try { port = Convert.ToInt32(inputPort); }
            catch { port = 1700; }

            ip=IPAddress.Parse(GetIp());
            sck= new Socket(AddressFamily.InterNetwork,SocketType.Stream,ProtocolType.Tcp);
            sck.Bind(new IPEndPoint(ip, port));
            sck.Listen(0);
            acc=sck.Accept();
            rec.Start();

            while(true){
                byte[] sdata=Encoding.ASCII.GetBytes("<"+name+">"+Console.ReadLine());
                acc.Send(sdata,0,sdata.Length,0);
            }
        }
    }
} 
```

**坦克客户端**

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.Threading.Tasks;
 using System.Net;
 using System.Net.Sockets;
 using System.Threading;

 namespace TankClient
 {
  class Program
  {
    static string name = "";
    static int port = 1700;
    static IPAddress ip;
    static Socket sck;
    static Thread rec;

    static void recV()
    {
        while (true)
        {
            Thread.Sleep(500);
            byte[] Buffer = new byte[255];
            int rec = sck.Receive(Buffer, 0, Buffer.Length, 0);
            Array.Resize(ref Buffer, rec);
            Console.WriteLine(Encoding.Default.GetString(Buffer));
        }
    }

    static void Main(string[] args)
    {

        rec = new Thread(recV);
        while(true){
        Console.WriteLine("Please enter your name");
        name = Console.ReadLine();
        Console.WriteLine("Please enter the ip of the server");
        ip = IPAddress.Parse(Console.ReadLine());
        Console.WriteLine("Please Enter The Port");
        string inputPort = Console.ReadLine();
        try { port = Convert.ToInt32(inputPort); }
        catch { port = 1700; }

        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Connect(new IPEndPoint(ip, port));
        rec.Start();
        byte[] conmsg = Encoding.Default.GetBytes("<" + name + ">" + "Connected");
        sck.Send(conmsg, 0, conmsg.Length, 0);

        while (sck.Connected)
        {
            byte[] sdata = Encoding.Default.GetBytes("<" + name + ">"+Console.ReadLine());
            sck.Send(sdata, 0, sdata.Length, 0);
        }
    }
  }
 }
  } 
```

我在互联网上搜索，但我真的不明白该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:49:28.503

您需要使用线程来处理服务器端的客户端。

在这里您可以找到如何在线程上制作服务器的教程

[http://csharp.net-informations.com/communications/csharp-multi-threaded-server-socket.htm](http://csharp.net-informations.com/communications/csharp-multi-threaded-server-socket.htm)

这很好。

基本上。服务器在连接时正在侦听 while(true) 循环 服务器创建新线程来处理与客户端的通信。

如果您是初学者，我的好建议是使用异步函数来接收/发送数据以防止 UI 停止响应。BeginConnect、EndConnect、BeginRecieve、EndRecieve 等功能。等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:51:00.093

通过套接字进行通信 - 例如，您可以检查：

[http://ludwigstuyck.wordpress.com/2012/09/21/communicating-through-sockets/](http://ludwigstuyck.wordpress.com/2012/09/21/communicating-through-sockets/)

这就像代码示例的快速入门。

# android - Google Map API 无法在没有 google framework 服务的 Android 设备上运行，我该怎么办？

> ID：15878268
> 
> 赞同：1
> 
> 时间：2013-04-08T11:47:27.627
> 
> 标签：android, google-maps, android-maps

我通过google play services使用google map android API开发了一个应用程序，如果android设备有google framework，它可以运行得很好，否则就不能很好地运行。

但是中国的android设备因为政策原因没有google framework。我们尝试使用openstreet api，但是在我们国家太慢了。

谢谢。

# sql - 使用现有代码创建 Oracle 存储过程

> ID：15878271
> 
> 赞同：0
> 
> 时间：2013-04-08T11:47:38.660
> 
> 标签：sql, oracle, procedure

我有以下脚本，我在 oracle 中运行以返回一些数据，但是我想将其存储为存储过程，因此我不必在运行时重新运行这整段代码。如果有人可以让我知道如何做到这一点，我将不胜感激。我已经在尝试了，但运气不佳。

下面是我想从存储过程运行的代码。

```
SET SERVEROUTPUT ON;
declare 
cursor c_emp is
select *
from train;
r_emp c_emp%ROWTYPE;
begin
open c_emp;
loop
fetch c_emp into r_emp;
exit when c_emp%NOTFOUND;
DBMS_OUTPUT.put_line(r_emp.trainid);
end loop;
close c_emp;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:59:41.457

```
create or replace procedure procedure_name
is
begin
declare 
cursor c_emp is
select *
from train;
r_emp c_emp%ROWTYPE;
begin
open c_emp;
loop
fetch c_emp into r_emp;
exit when c_emp%NOTFOUND;
DBMS_OUTPUT.put_line(r_emp.trainid);
end loop;
close c_emp;
end;
end procedure_name;
/ 
```

**然后只需执行以下程序：-**

```
execute procedure_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:15:21.620

作为 ref 游标的替代方案，您可以使用流水线函数（在某些 SQL 客户端中更容易使用）：

```
create type id_list as table of integer
/

CREATE OR REPLACE function get_trains
  return id_list
  pipelined
as
begin  
  for train_rec in (select trainid from train) loop
    pipe row (train_rec.trainid);
  end loop;
  return;
end;
/ 
```

这可以通过以下方式使用：

```
select *
from table(get_trains()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:01:13.680

您需要光标来选择 oracle 中的数据。有关详细信息，请参阅链接[Oracle – 从存储过程返回记录集](http://decipherinfosys.wordpress.com/2007/08/06/oracle-returning-a-recordset-from-a-stored-procedure/)。

```
-- Create package
CREATE OR REPLACE PACKAGE types
AS
type cursorType is ref cursor;
END;

-- Here we have declared cursor variable of type cursorType as an output variable.
CREATE OR REPLACE PROCEDURE SP_SELECT_DATA
(
  p_ResultSet        OUT  TYPES.cursorType
)
AS
BEGIN
  OPEN p_ResultSet FOR
  select * from your_table;
END SP_SELECT_DATA;

--Testing
VARIABLE resultSet  REFCURSOR
EXEC SP_SELECT_DATA(:resultSet);
PRINT :resultSet 
```

# ruby-on-rails - :name_prefix 对命名空间路由没有任何影响

> ID：15878295
> 
> 赞同：2
> 
> 时间：2013-04-08T11:48:56.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在尝试一天来解决这个问题...

将应用程序从 rails 2 移动到 rails 3，我遇到了 Routes 的一些问题。

我想在 'namespace' 方法上使用 :name_prefix 选项。我可以这样做吗？

我尝试使用“范围”选项获得相同的结果，但仍然走到了死胡同。

这是一个示例代码及其产生的路线：

```
namespace :blog, :name_prefix => 'admin_' do
  resources :contexts   
end

scope :module => 'blog', :path_name_prefix => 'admin_' do
  resources :contexts   
end 
```

耙路线：

```
blog_contexts GET    /blog/contexts(.:format) blog/contexts#index {:name_prefix=>"admin_"}
              POST   /blog/contexts(.:format) blog/contexts#create {:name_prefix=>"admin_"} new_blog_context GET    /blog/contexts/new(.:format) blog/contexts#new {:name_prefix=>"admin_"} edit_blog_context GET    /blog/contexts/:id/edit(.:format) blog/contexts#edit {:name_prefix=>"admin_"}

blog_context GET    /blog/contexts/:id(.:format) blog/contexts#show {:name_prefix=>"admin_"}
             PUT    /blog/contexts/:id(.:format) blog/contexts#update {:name_prefix=>"admin_"}
             DELETE /blog/contexts/:id(.:format) blog/contexts#destroy {:name_prefix=>"admin_"}

contexts GET    /contexts(.:format) blog/contexts#index {:path_name_prefix=>"admin_"}   

       POST   /contexts(.:format) blog/contexts#create {:path_name_prefix=>"admin_"} new_context GET   

/contexts/new(.:format) blog/contexts#new {:path_name_prefix=>"admin_"} edit_context GET    /contexts/:id/edit(.:format) blog/contexts#edit {:path_name_prefix=>"admin_"} context GET    /contexts/:id(.:format) blog/contexts#show {:path_name_prefix=>"admin_"}
        PUT    /contexts/:id(.:format) blog/contexts#update {:path_name_prefix=>"admin_"}
        DELETE /contexts/:id(.:format) blog/contexts#destroy {:path_name_prefix=>"admin_"} 
```

很难注意到差异，但命名空间方法将其名称添加到 (1) 路径名，(2) 路径本身 - 您在浏览器中看到的内容，以及 (3) 作为控制器前缀。

scope 方法只添加一个控制器前缀。

如您所见， :name_prefix 不会影响路径名中的任何内容 - 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:20:52.077

我不是 100% 确定我是否正确理解了您，但您可能想做这样的事情：

```
scope :admin do
  scope :blog do
    resources :contexts
  end
end 
```

一个选项 B（但不是那么好）将是：

```
scope :blog, :as => 'admin_blog'
  resources :contexts
end 
```

# sql - ORA 删除/截断

> ID：15878297
> 
> 赞同：5
> 
> 时间：2013-04-08T11:49:09.047
> 
> 标签：sql, oracle, truncate, sql-loader

我正在使用 SQL 加载程序将我的数据加载到数据库中。

在我插入数据之前，我需要删除表中的现有数据：

```
options(skip=1,load=250000,errors=0,ROWS=30000,BINDSIZE=10485760)
load data
infile 'G:1.csv' "str '^_^'"
replace
into table IMPORT_ABC
fields terminated by "," OPTIONALLY ENCLOSED BY '"'
trailing nullcols(
.
.
.
.) 
```

但我得到了如下错误：

SQL*LOADER-926：对表 IMPORT_ABC 执行删除/截断时出现 OCI 错误 ORA-30036：无法在撤消表空间“undo1”中将段扩展 8

如何删除数据，例如 10000 行？我知道我的数据库有一些限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:33:52.170

批量删除记录可以在 PL/SQL 循环中完成，但通常被认为是不好的做法，因为整个删除通常应被视为单个事务；而这不能从 SQL*Loader 控制文件中完成。您的 DBA 应该调整`UNDO`空间以适应您需要做的工作。

如果你要删除整个表，你几乎肯定会更好地截断，无论是[在控制文件中](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_control_file.htm#sthref669)：

```
options(skip=1,load=250000,errors=0,ROWS=30000,BINDSIZE=10485760)
load data
infile 'G:1.csv' "str '^_^'"
truncate
into table IMPORT_ABC
... 
```

[`truncate`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/statements_10007.htm)或者在开始加载之前作为 SQL*Plus/SQL Developer/其他客户端中的单独语句：

```
truncate table import_abc; 
```

缺点是在加载新行时，您的表对其他用户来说是空的，但如果它是一个专用的导入区域（从名称猜测），无论如何都可能无关紧要。

如果你`UNDO`真的那么小，那么你可能必须运行多个负载，在这种情况下 - 可能很明显 - 你需要确保你只有`truncate`第一个的控制文件（或使用单独的`truncate`语句），[`append`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_control_file.htm#sthref657)而是有正如您在评论中指出的那样，在后续的控制文件中。

如果您使用此数据作为基础来填充其他内容，您可能还需要考虑[外部表](http://docs.oracle.com/cd/E11882_01/server.112/e22490/et_concepts.htm)，因为替换外部数据源没有`UNDO`开销。您可能需要与您的 DBA 讨论如何设置它并为您提供必要的目录权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:55:09.080

您的撤消表空间太小，无法容纳所有撤消信息，并且似乎无法扩展。

您可以将导入拆分为更小的批次并在每个批次之后发出提交，或者让您的 DBA 增加表空间以进行 undo1

并在开始导入之前使用 truncate 而不是 replace

# z3 - 缩小 Z3 中量词的范围

> ID：15878298
> 
> 赞同：1
> 
> 时间：2013-04-08T11:49:09.363
> 
> 标签：z3

有一种`distribute-forall`策略可用于分配全称量词而不是连词。我对通用量词和存在量词的更通用过程感兴趣，该过程将尽可能缩小量词的范围。例如，我想要公式

`(exists ((x Int)) (and (= z (* 2 x)) (<= z y)))`变成

`(and (exists ((x Int)) (= z (* 2 x)) (<= z y)))`.

这可以通过其他一些策略来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:38:44.800

Z3 代码库中的分支`mcsat`有一个名为`miniscope`. 它做你想做的事。我们可以使用[这些指令](https://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)`mcsat`构建分支。我们只需要替换为.`unstable``mcsat`

下面是一些使用这种策略的例子。

```
(declare-const z Int)
(declare-const x Int)
(declare-const y Int)

(assert (exists ((x Int)) (and (= z (* 2 x)) (<= z y))))

(apply miniscope) 
```

和产生的输出

```
(goals
(goal
  (<= z y)
  (exists ((x!1 Int)) (= z (* 2 x!1)))
  :precision precise :depth 3)
) 
```

这是一个更复杂的例子：

```
(set-option :pp.max-depth 100)
(declare-fun p (Int) Bool)
(declare-fun q1 (Int Real) Bool)
(declare-fun q2 (Real Real) Bool)
(declare-fun q3 (Int Int) Bool)

(assert (forall ((x1 Int) (x2 Real))
                (or (q2 x2 x2) (exists ((y Real)) (and (q1 y x2) (q1 x1 x2))))))

(apply miniscope) 
```

和产生的输出

```
(goals
(goal
  (forall ((x2 Real))
    (or (q2 x2 x2)
        (and (forall ((x1 Int)) (q1 x1 x2))
             (exists ((y Real)) (q1 (to_int y) x2)))))
  :precision precise :depth 3)
) 
```

**编辑**

`mcsat`分支包含最终将合并到分支中的进行中的工作`master`。但是，合并可能不会在下一个正式版本（v4.3.2）中发生。当我们发布新版本时，我们合并`unstable`并`contrib`分支到`master`分支中。

该`mcsat`分支本质上是在添加新功能。`unstable`它与and`contrib`分支并不矛盾。

我们鼓励高级用户（熟悉 git）使用非官方版本和替代分支。当然，在报告错误/问题时，应该使用与提交相关的 git 哈希而不是版本号。

**结束编辑**

# text - Sublime2 "translate_tabs_to_spaces: false" 但它仍然插入空格。为什么？

> ID：15878301
> 
> 赞同：5
> 
> 时间：2013-04-08T11:49:14.877
> 
> 标签：text, tabs, sublimetext2, spaces

所以我正在使用 Sublime Text 2，并且我已经设置

```
"translate_tabs_to_spaces": false, 
```

以便制表符保持制表符并且不会转换为空格。但是，当我键入一个制表符时，它仍然插入 4 个空格，而不是一个制表符。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T11:50:23.367

嗯，刚发帖就找到了。我有

`"detect_indentation": true,`

所以它发现使用空格而不是制表符，然后将使用它而不是默认制表符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T01:25:34.577

我有一个窍门。1\. 打开文件 2\. 全选。3\. 剪下来。4\. 保存文件。5\. 关闭文件。6\. 打开文件（必须为空） 7\. 粘贴。

就这样！。

# c# - 带有自定义按钮的 C# 猜谜游戏

> ID：15878302
> 
> 赞同：1
> 
> 时间：2013-04-08T11:49:17.160
> 
> 标签：c#

我有一个按钮，可以确定数字的猜测是否太高现在我知道需要做什么，但这样做完全是另一回事，当我按下按钮重置时，如果它太高，它现在以一个新的随机数开始生病按下太高的按钮，现在猜测的数字让我们说它的 32，32 成为 maxValue 现在我如何在我的按钮方法中写一个语句来做到这一点。

```
int input = random.Next(minValue, maxValue).ToString(); 
```

女巫给了我一个开始的随机数，所以如果猜到的数字太高，我如何获得初始 maxValue，如果太低，如何获得 minValue。

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:26:20.940

首先，欢迎来到 Stack Overflow，请查看常见问题。

尽管我希望您写得更简洁一些并阅读一些内容，但我会尝试给您一些提示。

我是根据我对阅读您的问题的理解来写这篇文章的。

假设问题是这样的：`how do i get the make the guessed number the initial maxValue if its too high or the minValue if its too low.`

或者，正如我所解释的，**如果 maxValue 太高，我如何让它成为猜测的数字，或者如果它太低，对 minValue 做同样的事情？**

首先：

```
int input = random.Next(minValue, maxValue).ToString(); 
```

正如 Soner 评论的那样，为什么要将结果转换为字符串？`input`更重要的是，如果它是随机的，为什么要调用这个变量？不是说错了，而是有点误导。

好吧，让我们将初始最小值/最大值设为 0/100

```
int minValue = 0;
int maxValue = 100;
int secretNumber = random.Next(minValue, maxValue); 
```

秘密数字将在 0 到 100 之间。然后你猜一个数字。我假设这个猜测数字也是随机的，因为你是这样写的。

```
int guess = random.Next(minValue, maxValue); 
```

然后你说，“如果猜测的数字太高，则将其设为初始 maxValue”

```
if (tooHigh && guess<maxValue){ //you pressed "Too High"
    maxValue = guess;
} 
```

我想你可以从这里继续。

# c# - 带有一定数量项目的 Telerik 下拉列表底部出现空白

> ID：15878313
> 
> 赞同：0
> 
> 时间：2013-04-08T11:49:55.360
> 
> 标签：c#, razor, telerik, telerik-combobox

我正在使用 Telerik 控件，当我使用包含 11 个元素的下拉列表时，它会在列表底部出现一个空白区域。

我尝试在 Telerik 的演示页面中，使用 chrome 工具更改下拉列表的内容，它发生了同样的情况。

如果我放置超过 15 个元素，则会显示一个条形并且我可以滚动，如果少于 11 个，则高度会正确调整。

[Telerik 演示](http://demos.telerik.com/aspnet-mvc/razor/combobox?theme=metro)

有人知道如何删除那个空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:48:53.853

将默认的 RadDropDownList 拖到 winForm 上后，我添加了 11 个元素。它只会显示大约 5 然后自动滚动。我将 DropDownMinSize 的 Height 属性更改为 200，得到以下结果：

( [http://www.sogentech.com/images/11Elements.jpg](http://www.sogentech.com/images/11Elements.jpg) )

从您提供的链接来看，我希望您正在为网络开发。这是关于在 Telerik 网站上从 Lancelot 控制大小的简短说明。我有一种感觉 MinSize 或等效设置（可能是 MinDropDownHeight）是你想要玩的。以下代码专门用于 Silverlight，但这应该让您走上正确的道路：

```
 <!-- Here I've inserted a RadComboBox, I've also set some initial properties-->
    <telerik:RadComboBox Margin="211,59,179,0"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center"
                         MaxDropDownHeight="225"
                         MinWidth="100"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         IsMouseWheelEnabled="False"
                         Text="Top Text Title"
                         EmptyText="empty">

        <!-- This is the default style, it uses the parent container's properties such as width and height -->
        <telerik:RadComboBoxItem Content="First list Item"/>

        <!-- You can explicitly change and set the height/width of the list item by doing this-->
        <telerik:RadComboBoxItem Content="Second List Item"
                                 Height="100"
                                 Width="100"/>

        <!-- Or you can do what I've done here. I set a Minimum width and height and then set the scrollBar to "Auto"-->
        <telerik:RadComboBoxItem Content="Third list item"
                                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                 MinHeight="50"
                                 MinWidth="200"/>

    </telerik:RadComboBox>

</Grid> 
```

# qt - 删除 QAbstractTableModel 中的最后一项时“索引超出范围”

> ID：15878317
> 
> 赞同：1
> 
> 时间：2013-04-08T11:50:09.697
> 
> 标签：qt

我`removeRows()`根据文档实现了该方法。我的数据存储在 QList 中。我可以使用以下方法很好地删除项目：

```
bool MeasurementManager::removeRows(int row, int count, const QModelIndex &m) {
    if(count > 1) {
        qDebug() << "MeasurementManager: cannot remove more than one measurement";
        return false;
    }

    beginRemoveRows(QModelIndex(), row, row+count-1);
    list.removeAt(row);
    endRemoveRows();
    return true
} 
```

但是，当删除最后一项时，我在执行时收到以下错误消息`beginRemoveRows()`：

`ASSERT failure in QList<T>::at: "index out of range"`

移除最后一项（导致崩溃）时，它显然必须位于第 0 行，但只要模型中有其他项目，我就可以毫无问题地移除第 0 行中的项目。

如果我像这样注释掉我的数据的实际删除

```
beginRemoveRows(QModelIndex(), row, row+count-1);
//list.removeAt(row);
endRemoveRows(); 
```

没有发生崩溃，所以我假设它在删除后尝试访问列表的元素之一。但是，当逐步执行该功能时，该`beginRemoveRows()`方法显然是罪魁祸首。

任何从哪里开始调试的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:08:42.793

我找到了解决方案，我的错。我已将“selectionChanged()”信号连接到自定义插槽。这试图访问表模型中最近删除的项目。

我忽略了，取消选择表格项目`selectionChanged()`也会发出一个信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:07:01.310

您看到的可能是通过优化代码引入的代码重新排序的产物。

再次编译代码并禁用所有优化以避免混淆调试器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T14:14:29.153

刚遇到同样的问题。只需调用 reset() 并随后删除行。

```
void QItemSelectionModel::reset() [virtual slot]
Clears the selection model. Does not emit any signals. 
```

# jsch - 从 JSCH 流中提取 userInfo

> ID：15878321
> 
> 赞同：1
> 
> 时间：2013-04-08T11:50:17.657
> 
> 标签：jsch

我正在尝试以 jsch 作为后端来实现在线终端 UI。我需要在 UI 中显示用户信息，即 [username@Machine ~]$ 信息。由于输出流只是简单地发送字节，因此很难区分 userinfo 和真正的命令输出。有什么方法可以区分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T23:32:45.980

一般来说，没有。

如果你有一个 shell 通道，你看到的只是用户远程 shell 的输出，包括提示和实际的命令输出。您可以尝试解析它。在简单的情况下这会起作用，但一般来说这是不可能的，因为每个命令都可以输出类似提示的字符串。

您应该知道用户名（它应该与您用于登录的用户名相同），服务器名称有点棘手。

一个值得探索的想法可能是设置一个由字符序列分隔的特殊提示，这不太可能出现在“正常”命令输出中——`PROMPT`在你的 shell 中设置变量。

`shell`您可以通过不使用实际的通道，而是为每个命令使用单独的通道来规避该问题`exec`- 但是您必须像`cd`自己一样解释命令并跟踪当前目录，并`cd`在每个 exec 中的实际命令之前添加一个命令渠道。您可能希望同时打开一个 sftp 通道以跟踪目录（和列表文件等）。

# java - 为什么 Float.NaN == Float.NaN 为假

> ID：15878322
> 
> 赞同：-3
> 
> 时间：2013-04-08T11:50:18.627
> 
> 标签：java

为什么`Float.NaN == Float.NaN`给`false`？我已经在不止一个 JVM 上对其进行了测试。

任何帮助表示赞赏。

```
 System.out.println(Float.NaN == Float.NaN); // gives false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:51:47.460

这不是 Java 特有的。

IEEE754 的[NaN](http://en.wikipedia.org/wiki/NaN)按合同等于没有数字，甚至它们自己。

# image-processing - 检测图像中圆圈的可能快速方法是什么？

> ID：15878325
> 
> 赞同：9
> 
> 时间：2013-04-08T11:50:32.747
> 
> 标签：image-processing, geometry

检测图像中圆圈的可能快速方法是什么？

例如：我有一个带有一个大圆圈的图像，并且在大圆圈中有 6 个小圆圈。

我需要在不使用霍夫圆（OpencV）的情况下找到一个大圆。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T13:47:28.680

寻找圆圈的标准算法是 Hough（在评论中提到过）和 RANSAC。参数化这些算法将为您的应用程序设置基线速度。

[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)

[http://en.wikipedia.org/wiki/RANSAC](http://en.wikipedia.org/wiki/RANSAC)

为了加快这些算法的速度，您可以查看您的图像集合并决定限制搜索范围是否有助于加快搜索速度。这很简单：只在合理范围内搜索半径。由于它们将边缘点作为输入，因此您还可以查看减少检查的边缘点数量的方法。

但是，还有一些其他技巧可以加快处理速度。

*   仔细设置检查半径的范围。例如，您可能不会简单地从可能的最小半径到可能的最大半径进行检查，而是可能会将搜索分成两个不同的范围：从半径 R1 到 R2，然后从半径 R3 到 R4。
*   放弃 Canny 边缘检测，转而采用您的应用程序可以容忍的最快边缘检测。（你可以放弃 Canny 以获得很多应用程序。）
*   预处理边缘点的图像以消除异常值。消除异常值的适当算法将特定于您的图像集，但您可能会找到一种消除明显异常值的算法，从而在更昂贵的圆拟合算法中节省一些搜索时间。
*   如果您的圆圈定义非常明确，并且所有或几乎所有点都存在，请弄清楚您如何仅匹配四分之一圆或半圆而不是整圆。

长话短说：从一个完整的实现开始并对其进行基准测试，然后逐渐收紧参数设置并限制搜索范围，同时确保您仍然可以为您的应用程序和图像集找到圆圈。

如果您的图像适合缩放，那么一种可能性是创建不同比例的图像金字塔：1/2 比例、1/4 比例、1/8 比例等。您需要一种边缘保留缩放方法在较小的尺度上。

建立图像金字塔后，请尝试以下操作：

1.  找到最小比例的圆圈。图像会很小，可能的半径范围会受到限制，所以这应该是一个快速的操作。
2.  如果您在小尺度上使用初始拟合找到一个圆，请通过在下一个较大比例的图像中进行测试来改进拟合 - 或者 - 继续并在全尺寸图像中进行搜索。
3.  检查下一个最大的比例。在较小比例图像中不可见的圆圈可能会突然“出现”在当前比例中。
4.  对图像中的所有比例重复上述步骤。

图像缩放将是一种快速操作，您可以看到，如果至少有一个圆圈出现在较小比例的图像中，您应该能够通过在小比例图像中执行粗略的圆圈拟合来减少循环总数，并且然后在全尺寸图像中单独优化这些边缘点的拟合。

边缘保留缩放还可以使用相关类型的工具来查找圆，但能否做到这一点取决于图像的内容，包括噪声、边缘点表示圆的完整程度等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:02:11.367

也许，检测[轮廓](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)并检查它们的属性，例如尝试使用[cv::isContourConvex](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html)或另一种方法是使用[协方差矩阵](http://en.wikipedia.org/wiki/Image_moment)的特征值并检查轮廓的代表性[椭圆第一偏心率](http://en.wikipedia.org/wiki/Eccentricity_%28mathematics%29#Ellipses)是否为~0。

# jbpm - 获取当前演员 id

> ID：15878328
> 
> 赞同：0
> 
> 时间：2013-04-08T11:50:40.147
> 
> 标签：jbpm, business-process-management

是否可以在 jBPM3 中获取当前演员的 ID？

具体来说，我需要存储谁启动了工作流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:26:17.487

您可能可以使用`JbpmContext.getActorId()`，这取决于您如何开始您的流程。

否则，您可能会使用该`TaskMgmtSesion`对象来查询`TaskInstance`s（与您的流程相关联）并从那里获取信息？

```
String configResource = "null-or-path-to-jbpm.cfg.xml"
jbpmConfiguration jbpmConfiguration = JbpmConfiguration.getInstance(configResource);
JbpmContext jbpmContext = jbpmConfiguration.getJbpmContext();
TaskMgmtSession taskMgmtSession = jbpmContext.getTaskMgmtSession();
List taskInsts = taskMgmtSession.getfindTaskInstancesByIds(ListOfTaskInstanceIds);
// Loop over taskInsts, find correct one and retrieve actorId? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:27:56.413

已经有人建议我可以使用泳道来获取启动器。

在这里，在 11.7。开始任务中的泳道

[http://docs.jboss.com/jbpm/v3/userguide/taskmanagement.html](http://docs.jboss.com/jbpm/v3/userguide/taskmanagement.html)

# magento - Magento - 保存产品非常慢

> ID：15878335
> 
> 赞同：0
> 
> 时间：2013-04-08T11:50:54.727
> 
> 标签：magento

当我在 Magento 管理员中保存产品时，速度非常慢。保存产品可能需要大约一分钟。

我在 Google 中发现了一些信息，表明这与索引有关。我更改了索引模式，因此它只能手动更新，但问题仍然存在。

出于某种原因，如果我选择产品并使用“更新属性”选项，它会在几秒钟内保存，但更新单个产品会非常缓慢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:15:18.150

系统资源不足，需要 MySQL 优化。查找提供服务器以运行 Magento 的托管服务提供商。1 分钟对于共享服务器来说是正确的，该服务器被设置阻塞，确保资源在系统上的所有用户之间平等共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:31:26.767

通常在 Magento 上传产品时建议使用数据导入/导出。

Magento 后端很慢，您需要更强大的资源/服务器来更快地处理事情。同样如上面的帖子所述，您需要将索引模式设置为您已经完成的手动。

此外，更多数量的属性意味着更高的 sql 查询负载，因此请检查属性集等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:04:13.833

产品保存得很好，直到最近，我在一个半专用服务器上，所以这不是问题。

但是，我现在已经找到了问题的原因。它是 channelunity.com 的扩展。我已经禁用了它，保存产品又需要几秒钟 :)

我已经联系了扩展开发人员，希望他们能提供修复。

# spring-mvc - Spring MCV 3 showErrors 不显示任何内容

> ID：15878340
> 
> 赞同：0
> 
> 时间：2013-04-08T11:51:00.177
> 
> 标签：spring-mvc, velocity

我尝试验证一个简单的表格。验证执行良好，但结果页面未显示错误。我使用速度来呈现页面。我以 spring 网站的 PetClinic 项目为例。

这是我点击“发布表单”按钮时的控制器：

```
@Controller
@RequestMapping("/subscription")
public class SubscriptionController {

@RequestMapping(value = "/newCustomer", method = RequestMethod.POST)
public String processSubmit(@ModelAttribute Customer customer, BindingResult result, SessionStatus status) {

    new CustomerValidator().validate(customer, result);
    if (result.hasErrors()) {
        return "subscription";
    }
    else {
        status.setComplete();
        return  "redirect:/admin";
    }
}

} 
```

当我进行调试时，我看到了错误。我在订阅页面上成功重定向，但没有显示错误。

我的网页（简体）：

```
...

            #springBind("customer")
            #springShowErrors("<br/>" "")
            <form class="form-horizontal"  method="post" action="#springUrl("/subscription/newCustomer/")">

                        ....

                        <!-- Button -->
                        <div class="controls">
                            <button class="btn btn-primary">#springMessage("website.subscription.signup")</button>
                        </div>

             </form>

 ... 
```

如果您需要其他任何东西，请随时告诉我。谢谢你的帮助！几天以来，我一直坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:40:19.880

**编辑：** 我终于找到了错误。它带有 springBind 标签。我不太明白您需要绑定该字段以显示相关错误。这是 twitter 引导框架的一个字段的固定代码。

```
 #springBind("customer.name")
                    <div class="control-group   #if(${status.error})error#end">

                        <!-- Prepended text-->
                        <label class="control-label">#springMessage("website.subscription.name")</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-user"></i></span>
                                 <input class="input-xlarge"
                                    placeholder="John Doe" id="name" name="name" type="text">                                   
                            </div>
                            <p class="help-block">                                  
                                #springShowErrors("<br/>" "")
                            </p>
                        </div>

                    </div> 
```

springShowErrors(...) 将显示与 POJO 客户的字段名称相关的所有错误。

# symfony - FOSUserBundle：密码重置后的成功目标

> ID：15878341
> 
> 赞同：16
> 
> 时间：2013-04-08T11:51:04.543
> 
> 标签：symfony, url-routing, fosuserbundle

在用户使用 FOSUserBundle 的密码重置重置他的密码后，默认情况下他被重定向到 FOSUserProfile。我想重定向到不同的路线。这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-08T13:06:43.523

可以通过创建一个重置订阅者来完成：

```
namespace Acme\UserBundle\EventListener;

use FOS\UserBundle\FOSUserEvents;
use FOS\UserBundle\Event\FormEvent;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

/**
 * Listener responsible to change the redirection at the end of the password resetting
 */
class PasswordResettingListener implements EventSubscriberInterface {
    private $router;

    public function __construct(UrlGeneratorInterface $router) {
        $this->router = $router;
    }

    public static function getSubscribedEvents() {
        return [
            FOSUserEvents::RESETTING_RESET_SUCCESS => 'onPasswordResettingSuccess',
        ];
    }

    public function onPasswordResettingSuccess(FormEvent $event) {
        $url = $this->router->generate('homepage');
        $event->setResponse(new RedirectResponse($url));
    }
} 
```

然后将其注册为带有`kernel.event_subscriber`标签的服务：

```
# src/Acme/UserBundle/Resources/config/services.yml
services:
    acme_user.password_resetting:
        class: Acme\UserBundle\EventListener\PasswordResettingListener
        arguments: [ @router ]
        tags:
            - { name: kernel.event_subscriber } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-24T15:47:19.457

如果您不使用 FOS 用户配置文件视图，有一个丑陋但简单的方法：

添加你的`app/config/routing.yml`：

```
fos_user_profile_show:
    path: /yourpath 
```

# java - 使用泛型为特定类型扩展类

> ID：15878345
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:51:17.847
> 
> 标签：java, generics

我想知道。我有一个`class OccList<T>`. 我对 OccList 持有任何对象都很好，但是如果 T 是一个字符串，或者如果 T 是一个整数，我想做更多的事情。

有什么办法可以在做的时候使用相同的名字吗？到目前为止，我的解决方案是创建一个新类`class StringOccList extends OccList<String>`。理想情况下，我希望能够使用`OccList<String>`并让 java 根据使用的类型创建适当的类，就像方法签名一样。可能吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:56:58.913

它必须是不同的类，除非您希望添加的功能成为基类的一部分。

想想看；假设您有一个`printAll`调用`System.out.println`列表所有内容的方法。方法将走向何方？

1.  您只希望该方法是可调用的，如果它是`String`. 那么它**不能**是基类的一部分（因为否则它会在基类中定义），所以你需要使用不同的类，比如`StringOccList`
2.  如果该方法在基类中是可调用的，那也没关系。您可以编写它以便（在 的情况下`String`）它调用`T.toString`所有成员，或者如果 T 不是适当的类型，您可以让该方法抛出异常。

这就是“泛型”的含义——该类适用于任何类型的内部类型。如果它不适用于任何类型的内部类型，那么它就不再是通用的了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T11:55:57.447

是的，您可以利用 Java 推断类型的一个地方，即方法返回。想象一下你想要一个`OccList`of `String`，但你不想这样做

```
OccList<String> list = new OccList<String>(); 
```

好吧，那么你只需编写一个方法来做到这一点。像这样：

```
public static <E> OccList<E> newOccList(){
    return new OccList();
} 
```

并像这样调用它：

```
OccList<String> stringList = newOccList();
OccList<Integer> integerList = newOccList();
OccList<File> fileList = newOccList(); 
```

它适用于您需要的任何通用类型。

这是在谷歌番石榴库中使用的，请参考[这里](https://code.google.com/p/guava-libraries/)

# c++ - c++继承类构造函数

> ID：15878352
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:51:43.023
> 
> 标签：c++, class, derived

老实说，我有一个小问题，我对派生类构造函数完全感到困惑，需要一些帮助。

我有一个带有参数化构造函数的基类：

```
Element::Element(RandomNumber &rnd, Console &console) 
: rnd(rnd), console(console) 
```

和派生类构造函数

```
Jetsam::Jetsam(RandomNumber rnd, Console console):Element(rnd,console) 
```

基本上我想将基类构造函数中使用的参数传递给派生类构造函数。我尝试了许多不同的方法，目前我收到错误消息“没有初始化程序”。

有没有人对我有任何帮助或可以帮助我理解我的问题。任何帮助将非常感激。

感谢您的时间，

艾琳。

编辑 ：

```
IntelliSense: "Jetsam::Jetsam(RandomNumber rnd, Console console)" provides no         initializer for:  e:\c++\my game\my game\jetsam.cpp   7 
```

编辑：

```
Element::Element(RandomNumber &rnd, Console &console) 
: rnd(rnd), console(console)
{

}

Jetsam::Jetsam(RandomNumber rnd, Console console):Element(rnd,console)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:09:48.263

参考我的评论 - 如果您的成员变量被声明为引用，您将需要像这样定义派生构造函数：

```
Jetsam::Jetsam(RandomNumber &rnd, Console &console):Element(rnd,console) 
```

例如，以下代码对我来说可以编译：

```
// dummy classes for use as member variables
class RandomNumber{};
class Console{};

// base class
class Element
{
public:
    Element(RandomNumber &rnd, Console &console) : rnd(rnd), console(console) {}

    // member variables
    RandomNumber& rnd;
    Console& console;
};

// derived class
class Jetsam : public Element
{
public:
    Jetsam(RandomNumber &rnd, Console &console) : Element(rnd, console) {}
}; 
```

我假设您的声明与上述类似。如果问题显着不同，您可以编辑您的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:55:03.280

`Jetsam::Jetsam(RandomNumber rnd, Console console): Element::Element(rnd,console);`

上面的代码示例应该可以工作。

# android - 了解 SurfaceHolder 概念

> ID：15878353
> 
> 赞同：3
> 
> 时间：2013-04-08T11:51:43.300
> 
> 标签：android, surfaceholder

我想编写一个球在屏幕上移动的程序，因此，我阅读了很多教程，但我无法理解这一行：

```
mHolder = getHolder();
mHolder.addCallback(this); 
```

什么是方法中的“ `this`”参数`addCallback`？为什么我使用这种方法？我读到了，`SurfaceView`但我不能很好地理解。它有什么作用？`SurfaceHolder``Canvas``SurfaceHolder`

我知道也许我的问题很愚蠢，但这是一个问题！请解释一下这个概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:27:12.153

“this”是一个基本的 Java/OO 概念……这里指的是调用 mHolder.addCallback() 的对象。在您的类声明中，您将在顶部看到它“实现了 SurfaceHolder.Callback”。

由于您的类实现了 SurfaceHolder.Callback，因此它*是 SurfaceHolder.Callback*的一个实例，因此它可以将对自身（“this”）的引用传递给采用 SurfaceHolder.Callback 参数的函数。

至于 SurfaceHolder 的“概念”，它只是应用程序代码与 Surface 交互的接口。它在[SurfaceView.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/view/SurfaceView.java?av=f)中使用...查找私有 SurfaceHolder mSurfaceHolder 声明。

这是 100% 的猜测，但我认为 SurfaceHolder 是这样分离的，因为设计人员设想拥有其他类型的 SurfaceView，并希望应用程序代码与它们交互的标准方式。

# .net - 如何在 Outlook 2003 中关闭邮件项？

> ID：15878359
> 
> 赞同：0
> 
> 时间：2013-04-08T11:52:11.453
> 
> 标签：.net, outlook-addin, outlook-2003

我正在开发 Outlook 2003-Addin。现在我有以下问题：用户将他的邮件保存在桌面上并打开它。关闭后，邮件无法再次打开，直到关闭并再次打开outlook。错误说，邮件无法打开，因为它正在访问另一个程序。如果插件被禁用，您可以毫无问题地打开并重新打开文件。尽管窗口已关闭，但该文件仍在访问中。与此处描述的问题相同：[如何正确发布 Outlook MailItem？](https://stackoverflow.com/questions/4437447/how-to-release-outlook-mailitem-correct) 我找到了`Marshal.ReleaseComObject(_mailItem)`释放mailItem的方法，但它对我不起作用。我在 _mailItem_Close 事件中调用它。但它不起作用，我不知道出了什么问题。是地方不对还是方法不对？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:45:52.463

为什么需要关闭事件？显示后立即释放对象，避免使用多点符号。访问 MSG 文件的代码是什么？

# oracle - 如何将带解码的查询转换为 Hibernate (HQL) 中的查询？

> ID：15878364
> 
> 赞同：1
> 
> 时间：2013-04-08T11:52:28.600
> 
> 标签：oracle, hibernate, nhibernate, nhibernate-mapping, hql

我想将 Oracle 中的以下查询转换为 Hibernate HQL 查询

```
select 
      SYSTEM, 
      sum(decode(trim(XAXIS),'HIGH',YAXIS,0)) H,
      sum(decode(trim(XAXIS),'MEDIUM',YAXIS,0)) M, 
      sum(decode(trim(XAXIS),'LOW',YAXIS,0)) L
      from HOME 
      where
          DATA_KEY=5 
      GROUP BY SYSTEM 
```

我想使用`createQuery()`使其独立于数据库并且不想使用 Native SQL

如何在 Hibernate 中编写上述查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-20T07:22:31.140

您可以使用大小写而不是解码。

使用案例您的查询将从

```
select 
      SYSTEM, 
      sum(decode(trim(XAXIS),'HIGH',YAXIS,0)) H,
      sum(decode(trim(XAXIS),'MEDIUM',YAXIS,0)) M, 
      sum(decode(trim(XAXIS),'LOW',YAXIS,0)) L
      from HOME 
      where
          DATA_KEY=5 
  GROUP BY SYSTEM 
```

至

```
select 
      SYSTEM, 
      sum(case when trim(XAXIS) = 'HIGH' then YAXIS else 0 end) H,
      sum(case when trim(XAXIS) = 'MEDIUM' then YAXIS else 0 end) M, 
      sum(case when trim(XAXIS) = 'LOW' then YAXIS else 0 end) L
      from HOME 
      where
          DATA_KEY=5 
      GROUP BY SYSTEM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:07:49.040

你为什么要？HQL 查询是基于字符串的，CreateSqlQuery 也是如此。如果您使用`Session.CreateSqlQuery()`，则无需了解有关 HQL 语法的任何信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:23:10.660

首先，您必须创建一个名为`Home`. `decode`HQL 不支持函数，但您可以使用如下公式创建属性：

```
<property name="prop1" type="Double" formula="decode(trim(XAXIS),'HIGH',YAXIS,0)" />
<property name="prop2" type="Double" formula="decode(trim(XAXIS),'MEDIUM',YAXIS,0)" />
<property name="prop3" type="Double" formula="decode(trim(XAXIS),'LOW',YAXIS,0)" /> 
```

然后你可以编写你的 HQL 查询：

```
select 
    h.SYSTEM, 
    sum(h.prop1) H,
    sum(h.prop2) M, 
    sum(h.prop3) L
from HOME h
where h.DATA_KEY=5 
GROUP BY h.SYSTEM 
```

# java - 如何在 spring 中使用 SimpleJDBCCall 获取存储过程的结果以及两个结果表？

> ID：15878369
> 
> 赞同：0
> 
> 时间：2013-04-08T11:52:40.223
> 
> 标签：java, spring, stored-procedures, sql-server-2008-r2

我正在实现一个 Spring+ MSSQL Server 2008 应用程序。我使用 SimpleJDBCCall API 来执行存储过程和检索结果。

对于具有单表结果的存储过程，它工作正常，但我不知道如何将它用于具有多表结果的过程。这是我的数据库查询的屏幕截图，它返回两个结果表。[1](http://i.stack.imgur.com/12JnI.jpg)

这是我使用的代码，此代码适用于单表结果`

```
public class LoadOnDemandSP extends StoredProcedure{
    private static final String SPROC_NAME = "sps_IME_EF_GetAllMarketData";

    public LoadOnDemandSP(DataSource ds) {
        super(ds, SPROC_NAME);

        RowMapper mapper = new MyRowMapper();
        declareParameter(new SqlReturnResultSet("Return Value", mapper));
        declareParameter(new SqlParameter("FromDate", Types.VARCHAR));
        declareParameter(new SqlParameter("ToDate",Types.VARCHAR));
        compile();

    }

    public List execute(String FromDate,String ToDate) {
        Map inputs = new HashMap();
        inputs.put("FromDate",FromDate);
        inputs.put("ToDate",ToDate);
        Map map = super.execute(inputs);
        if (map != null && map.size() > 0) {
            return (List) map.get("Return Value");
        } else {
            return new ArrayList();
        }

    }

    private class MyRowMapper implements RowMapper<LoadOnDemand> {
        public LoadOnDemand mapRow(ResultSet rs, int rowNum) throws SQLException {
            LoadOnDemand l = new LoadOnDemand();
//              f.setDay(rs.getInt("ContractDay"));
            l.setInternalQuantity(rs.getInt("DVaznTon"));
            l.setExportalQuantitiy(rs.getInt("SVaznTon"));
            l.setInternalValue(rs.getDouble("DArzeshMillion"));
            l.setExternalValue(rs.getDouble("SArzeshMillion"));
            l.setInternalBuyersCount(rs.getInt("DBuyers"));
            l.setExternalBuyersCount(rs.getInt("SBuyers"));
            l.setInternalSellersCount(rs.getInt("DSellers"));
            l.setExternalSellersCount(rs.getInt("SSellers"));
            l.setInternalGoodsCount(rs.getInt("DSymbols"));
            l.setExternalGoodsCount(rs.getInt("SSymbols"));
            l.setTablo(rs.getString("GrouhAsli"));
            return l;
        }
    }

} 
```

///添加////

我的示例 SP：

```
CREATE PROCEDURE [dbo].[sps_Test1]

WITH RECOMPILE      
AS

SELECT *

FROM dbo.tbl1

SELECT *

FROM dbo.tbl2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:10:37.887

您无法处理多个表。您可以使用`union`或将两个表合并为一个`unionAll`

```
CREATE PROCEDURE [dbo].[sps_Test1]

WITH RECOMPILE      
AS

SELECT *

FROM dbo.tbl1
UNION
SELECT *

FROM dbo.tbl2 
```

# python - 音频设备名称中的特殊字符：Pyaudio

> ID：15878370
> 
> 赞同：2
> 
> 时间：2013-04-08T11:52:40.507
> 
> 标签：python, utf-8, portaudio, pyaudio

我目前面临一个难题。我需要在法语 Windows 环境中使用 Pyaudio，并且音频设备的名称默认包含`é`或`è`。

这是出现特殊字符时出现的错误：

```
 u=self.p.get_device_info_by_index(e)
  File "C:\Python27\lib\site-packages\pyaudio.py", line 977, in get_device_info_
by_index
    pa.get_device_info(device_index)
  File "C:\Python27\lib\site-packages\pyaudio.py", line 987, in _make_device_inf
o_dictionary
    print device_info.name
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 13: invalid
continuation byte 
```

如果我可以访问代码，这将不是问题（我猜我需要在字符串链前面添加一个 u"..."）。

问题是我查看了 Pyaudio 代码，导致错误的方法在 pyd 文件（_portaudio.pyd）中定义，因此，我无法修改它！

我试图下载 _portaudio 来自己编译它，但我发现的发行版是用 C 编码的，而且相当繁重（我不知道关于 C 的第一件事）。也许我可以在那里做点什么，但我不知道确切的地点和方式。

我也可以通过仅注释获取音频设备名称的行来解决此问题，但是如果没有向用户显示其名称，则要识别特定的音频输入要困难得多。

编辑 ：

这是整个过程：我从 pyaudio 调用该函数：

```
 import pyaudio

      self.p= pyaudio.PyAudio()

      i=self.p.get_device_count()

      for e in range(i):
          u=self.p.get_device_info_by_index(e) 
```

这将引导我进入调用该方法的 pyaudio 模块：

```
device_info.name 
```

device_info 是 _portaudio.pyd 中定义的对象。由于特定音频设备的名称包含“é”或“è”（谢谢 windows），并且 _portaudio.pyd 未编码以处理这些字符。它返回错误：

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 13: invalid
    continuation byte 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-19T03:49:27.410

我面临着完全相同的问题。就我而言，音频设备名称中有中文字符，当我发生UnicodeDecodeError时 `print device_info.name`

这是我的解决方案。

使用[pymedia](http://pymedia.org/docs/pymedia.audio.sound.html)代替 pyaudio。尝试这个：

```
>>> import pymedia 
>>> dict_list = pymedia.audio.sound.getIDevices()
>>> print dict_list
({'name': '\xc2\xf3\xbf\xcb\xb7\xe7 (Realtek High Definition', 'channels': 2, 'manufId': '1', 'formats': 1048575, 'id': 0, 'productId': '65'},)
>>> dict_list = pymedia.audio.sound.getODevices()
>>> print dict_list
({'name': '\xd1\xef\xc9\xf9\xc6\xf7 (MV USB AUDIO)', 'channels': 2, 'manufId': 'ffff', 'formats': 1048575, 'id': 0, 'productId': 'ffff'}, {'name': '\xd1\xef\xc9\xf9\xc6\xf7 (Realtek High Definition', 'channels': 2, 'manufId': '1', 'formats': 1048575, 'id': 1, 'productId': '64'}) 
```

我正在使用 python 2.7 。

# c# - DateTimePicker WinForm：错误地验证更新值时设置值

> ID：15878373
> 
> 赞同：0
> 
> 时间：2013-04-08T11:52:45.903
> 
> 标签：c#, winforms, validation, datetimepicker

我对 DateTimePicker 有疑问，它很容易重现，感觉就像控件本身的错误，但我想确保我没有误解任何内容。

首先，此代码非常简单，使用 DateTimePicker 创建一个 WinForms 应用程序（我们的项目在 .net 4.0 中，但我尝试在 .net 4.5 中创建它，同样的问题）。选择器本身具有自定义格式，格式为“HH：mm”，并且 ShowUpDown 设置为 true。它有一个验证方法如下：

```
private void dateTimePicker1_Validating(object sender, CancelEventArgs e)
{
    dateTimePicker1.Value = DateTime.Now;
} 
```

在该行上设置断点。

确保在应用程序中有另一个控件，以便您可以跳出 DateTimePicker 以触发验证。

现在，在程序中导航到 DateTimePicker 并在例如小时字段中输入“202”。这看起来就像你先写了 20，当你写第二个“2”时，它现在只是字段中的 2。

现在从 DateTimePicker 中跳出。这将触发验证断点。请注意 DateTimePicker 现在的值是如何设置为 20 小时的日期。让该行再次执行并观察 DateTimePicker 的值。现在将值 os 02 改为小时（不是（！！） DateTime.Now 的值）

因此，在将值设置为 DateTime.Now 之后，它以某种方式将值更改为在 DateTimePicker 中输入的先前未完成的值。

怎么会这样，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:57:07.447

我无法重现这一点。Windows 版本非常重要，许多常见的控制怪癖在以后的版本中得到了修复。我在 Windows 8 上。

然而，这是一个常见问题，这些控件在触发事件时对您对它们执行的操作很挑剔。他们往往会在他们触发事件后运行代码，这很可能会使您所做的事情无效。Validating 事件特别棘手，因为它是作为焦点更改的副作用而引发的。如果 DTP 还没有收到同样的通知，那就有麻烦了。非常典型的事件订购麻烦。如果您实际上没有使用 Validating 来验证数据，请支持 Leave 事件。

听起来像是一场比赛。此类排序问题的一般解决方案是在事件触发并且代码执行不再在控件代码中*之后运行您的代码。*您可以使用表单的 BeginInvoke() 方法优雅地完成此操作。目标在您的程序重新进入消息循环并且 UI 回到静止状态后运行。像这样：

```
 private void dateTimePicker1_Validating(object sender, CancelEventArgs e) {
        this.BeginInvoke(new Action(() => dateTimePicker1.Value = DateTime.Now));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:26:15.777

在验证事件期间，我看到了您解释的行为，但是一旦验证事件完成，值就会设置为`DateTime.Now`.

假设您希望它`DateTime.Now`在 Validating 事件本身期间将 DateTimepicker 控件的值设置为，我发现设置该值两次显示该值更改为`DateTime.Now`-

`dateTimePicker1.Value = DateTime.Now;`

`dateTimePicker1.Value = DateTime.Now;`

# java - twitter4j 拒绝连接

> ID：15878375
> 
> 赞同：0
> 
> 时间：2013-04-08T11:52:50.817
> 
> 标签：java, twitter, twitter4j

我正在运行以下代码以在 twitter 上发布推文，使用`twitter4j-core-2.2.6.jar`.

```
package twitter4j.examples.tweets;
//import java.awt.List;

import java.util.List;
import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.OAuthAuthorization;
import twitter4j.conf.ConfigurationBuilder;

public class TwitterTest{
    private static final String ACCESS_TOKEN = ""; // proper access_token
    private static final String ACCESS_TOKEN_SECRET = ""; // proper secret_token
    private static final String CONSUMER_KEY = ""; // proper consumer_key
    private static final String CONSUMER_SECRET = ""; // proper consumer_secret

    public static void main(String[] args)
    {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthAccessToken(ACCESS_TOKEN);
        builder.setOAuthAccessTokenSecret(ACCESS_TOKEN_SECRET);
        builder.setOAuthConsumerKey(CONSUMER_KEY);
        builder.setOAuthConsumerSecret(CONSUMER_SECRET);
        OAuthAuthorization auth = new OAuthAuthorization(builder.build());

       Twitter twitter = new TwitterFactory().getInstance(auth);
       /* List<Status> statuses = null;
        try {
            statuses = twitter.getHomeTimeline();
        } catch (TwitterException e1) {
            System.out.println("Error");
            e1.printStackTrace();
        }
        System.out.println("Showing home timeline.");
        for (Status status : statuses) {
            System.out.println(status.getUser().getName() + ":" +
                               status.getText());
        }*/
        try 
        {
            twitter.updateStatus("Hello World!");
            System.out.println("yessssss\n");
        } catch (TwitterException e) 
        {
            System.err.println("Error occurred while updating the status!="+e.getErrorMessage());
            e.printStackTrace();
            return;
        }
        System.out.println("Successfully updated the status.");
    }
} 
```

当我将状态更新为非空值时，它给了我以下错误。

```
TwitterException{exceptionCode=[126cde36-60c4a990 126cde36-60c4a966], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.6}
        at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:200)
        at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
        at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
        at twitter4j.TwitterImpl.post(TwitterImpl.java:1762)
        at twitter4j.TwitterImpl.updateStatus(TwitterImpl.java:399)
        at twitter4j.examples.tweets.TwitterTest.main(TwitterTest.java:42)
    Caused by: java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
        at java.net.Socket.connect(Socket.java:546)
        at sun.net.NetworkClient.doConnect(NetworkClient.java:173)
        at sun.net.www.http.HttpClient.openServer(HttpClient.java:409)
        at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
        at sun.net.www.http.HttpClient.<init>(HttpClient.java:240)
        at sun.net.www.http.HttpClient.New(HttpClient.java:321)
        at sun.net.www.http.HttpClient.New(HttpClient.java:338) 
```

我怎样才能解决这个问题？

连接被拒绝的相关讨论可以在 Internet 上找到：

*   [http://www.google.co.jp/search?q=126cde36](http://www.google.co.jp/search?q=126cde36)
*   [http://www.google.co.jp/search?q=60c4a990](http://www.google.co.jp/search?q=60c4a990)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:08:12.417

尝试改变

```
OAuthAuthorization auth = new OAuthAuthorization(builder.build());
Twitter twitter = new TwitterFactory().getInstance(auth); 
```

至

```
TwitterFactory twitterFactory = new TwitterFactory(builder.build());
Twitter twitter = twitterFactory.getInstance(); 
```

那应该工作

# javascript - HTML5 响应式画布：调整浏览器画布绘制的大小消失

> ID：15878377
> 
> 赞同：9
> 
> 时间：2013-04-08T11:52:55.817
> 
> 标签：javascript, jquery, html, canvas

我想使用百分比大小制作一个响应式画布，一旦用户调整窗口大小，画布就会相对调整。我可以使用下面的代码来缩放画布，但唯一的问题是当我缩放窗口大小时，鼠标绘图会消失。

```
<style>
body{margin:0px;padding:0px;background:#a9a9a9;}
#main{
display:block;
width:80%;
padding:50px 10%;
height:300px;
} 
canvas{display:block;background:#fff;}
</style>
</head>
<body>
<div id="main" role="main">
<canvas id="paint" width="100" height="100">
< !-- Provide fallback -->
</canvas>
</div> 

<script>

var c = document.getElementById('paint');
var ctx = c.getContext('2d');
var x = null;
var y;

c.onmousedown = function(e){
x = e.pageX - c.offsetLeft;
y = e.pageY - c.offsetTop;
ctx.beginPath();
ctx.moveTo(x,y);

}

c.onmouseup = function(e){
x=null;

}

c.onmousemove = function(e){
if(x==null) return;
x = e.pageX - c.offsetLeft;
y = e.pageY - c.offsetTop; 
ctx.lineTo(x,y);
ctx.stroke();

}

$(document).ready( function(){
//Get the canvas &
var c = $('#paint');

var container = $(c).parent();

//Run function when browser resizes
$(window).resize( respondCanvas );

function respondCanvas(){ 
    c.attr('width', $(container).width() ); //max width
    c.attr('height', $(container).height() ); //max height

    //Call a function to redraw other content (texts, images etc)
}

//Initial call 
respondCanvas();

}); 

</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T14:37:05.447

**调整画布大小时处理内容**

如果调整画布大小，绘制的内容总是会被擦除。这就是画布的行为方式。

您可以在调整大小后重新绘制内容，也可以将内容保存为图像数据并在调整大小后恢复（参见 canvas.toDataURL）。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/V6SVz/](http://jsfiddle.net/m1erickson/V6SVz/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:10px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    // draw some content
    ctx.lineWidth=3;
    ctx.fillStyle="blue";
    ctx.strokeStyle="red";
    ctx.rect(50,50,100,50);
    ctx.fill();
    ctx.stroke();
    ctx.font="14px Verdana";
    ctx.fillStyle="white";
    ctx.fillText("Scale Me",65,75);

    function saveResizeAndRedisplay(scaleFactor){

        // save the canvas content as imageURL
        var data=canvas.toDataURL();

        // resize the canvas
        canvas.width*=scaleFactor;
        canvas.height*=scaleFactor;

        // scale and redraw the canvas content
        var img=new Image();
        img.onload=function(){
            ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);
        }
        img.src=data;

    }

    $("#resizer").click(function(){ saveResizeAndRedisplay(1.5); });

}); // end $(function(){});
</script>

</head>

<body>
    <button id="resizer">Click to resize the canvas</button><br/>
    <canvas id="canvas" width=200 height=150></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T04:03:34.587

我也遇到了你在 mu 应用程序中遇到的同样问题，在阅读了它之后，我得出了这样的结论，即 canvas 元素的行为在重新调整大小后会自行清除，唯一的解决方法是添加窗口重新调整大小事件的侦听器，并在事件触发时重绘画布。

```
$(window).resize(function(e) {
// function to redraw on the canvas
});

$(document).ready(function(e){
    var c = $('#example'); // getting the canvas element
    var ct = c.get(0).getContext('2d');
    var container = $(c).parent();
    $(window).resize( respondCanvas ); //handling the canvas resize
    function respondCanvas(){ 
        // makign the canvas fill its container
        c.attr('width', $(container).width() ); //max width
        c.attr('height', ($(container).height() -20 )); //max height
    }
    respondCanvas();
    make_image('images/india.png',1,1);
} 
```

希望能帮助到你。

[资源](http://ameijer.nl/2011/08/resizable-html5-canvas/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T11:56:16.757

```
c.attr('width', $(container).width() ); //max width
c.attr('height', $(container).height() ); //max height 
```

上面的代码等同于`clearRect`用于清除画布的代码。因此，如果要保留以前绘制的内容，则无法调整宽度和高度。作为一种解决方案，您可以创建一个具有所需宽度的新画布并使用`drawImage(c)`c 绘制先前画布的内容是画布对象。然后您必须删除画布

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T06:49:42.177

谢谢。这真的很有帮助。下面是我试图做的代码。

```
#main{
display:block;
width:80%;
height:300px;
background:#e0e0e0;
} 
canvas{display:block;background:#fff;border:1px solid red;}

</style>

<script>

$(function(){

var container=document.getElementById("main");
var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");

// draw some content
//alert(canvas.width);

var w=$(container).width();
var h=$(container).height();

$(window).resize( saveResizeAndRedisplay );
function saveResizeAndRedisplay(){

    // save the canvas content as imageURL
    var data=canvas.toDataURL();

    // resize the canvas
    canvas.width = $(container).width();
    canvas.height = $(container).height();
    //alert($(container).width());

    // scale and redraw the canvas content
    var img=new Image();
    img.onload=function(){
        ctx.drawImage(img,0,0,img.width,img.height);
    }
    img.src=data;

}

saveResizeAndRedisplay();

}); 
</script>

</head>

<body>

<div id="main" role="main">
 <canvas id="canvas" width=200 height=150></canvas>
</div>

<script>
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var x = null;
var y;

canvas.onmousedown = function(e){
x = e.pageX - canvas.offsetLeft;
y = e.pageY - canvas.offsetTop;
ctx.beginPath();
ctx.moveTo(x,y);
}

canvas.onmouseup = function(e){
x=null;
}

canvas.onmousemove = function(e){
if(x==null) return;
x = e.pageX - canvas.offsetLeft;
y = e.pageY - canvas.offsetTop; 
ctx.lineTo(x,y);
ctx.stroke();
}
</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-25T23:16:55.420

我创建了一个处理 HTML5 画布大小调整的 jQuery 插件。它旨在弥合移动和桌面用户之间的差距。它仍然是一个 WIP，但它是可扩展的，并且内置了一些基本的绘图功能。

[http://trsanders.github.io/responsive-sketchpad/](http://trsanders.github.io/responsive-sketchpad/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-17T08:48:57.860

我使用这种方法：

```
var context = document.getElementById('paint').getContext('2d');
var canvas = context.canvas;

function responsive(width){
    var p = width / canvas.width;
    canvas.width *= p;
    canvas.height *= p;

    var scaleFactor = context.scaleFactor || 1;
    context.scale(p * scaleFactor, p * scaleFactor);
    context.scaleFactor = p * scaleFactor;
}

var mq = window.matchMedia("(min-width: 735px)");
mq.addListener(applyChanges);
applyChanges();

function applyChanges(){
    if(!mq)
        responsive(350);
    else
        responsive(735);
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-03-31T07:29:21.350

我有同样的问题。我的解决方案是使用 CSS3 的属性缩放到画布的父容器：

```
<div id="parent_div">
    <div id="constructor_div">
         <canvas width="600" height="900">
    </div>
</div>

<script>
    constructor_zoom();

    $(window).resize(function() {
        constructor_zoom();
    });

    function constructor_zoom()
    {
        var parent_width = $('#parent_div').width();
        var item_width = $('#constructor_div').width();
        var coef = 0.1;

        $('.constructor_image').css('zoom', parent_width/item_width - coef);
    }
</script> 
```

coef - 使画布从父边框缩进的系数。您可以将其设为零。

我希望它对某人有帮助:-)

# iphone - 无法在 UI Webview ios 中加载大图像

> ID：15878380
> 
> 赞同：1
> 
> 时间：2013-04-08T11:53:16.730
> 
> 标签：iphone, ios, image, memory, uiwebview

我正在开发一个 iPhone/iPad 应用程序。尝试在应用程序本地目录中存储的 UIImage 视图中加载非常大的图像。代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:selectedImage ofType:@"jpg"];
NSString *cssString = @"<style type='text/css'>img {width: 100%; height: auto;} body { margin: 0; padding: 0; }</style>";
NSString *htmlString = [NSString stringWithFormat:@"<html><head>%@</head><body><img src=\"file://%@\" /></body></html>",cssString,path];
[webview loadHTMLString:htmlString baseURL:nil]; 
```

在 iPhone 和模拟器中，图像可以完美加载，但是当我尝试在 iPod touch 4g 中运行应用程序时，它会错过 UI Webview 中的图像。我想有一些内存问题。没有把握。任何帮助。

图片尺寸为：640*5000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:39.147

可能这个[link1](https://stackoverflow.com/questions/478665/link-to-resources-inside-webview-iphone/1382396#1382396)或[link2](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)会帮助你

我们尝试了代码及其工作，

```
NSString *path = [[NSBundle mainBundle]pathForResource:@"imageName" ofType:@"png"];
       NSString *_path = [[NSBundle mainBundle] bundlePath];
          NSURL *baseURL = [NSURL fileURLWithPath:_path];
      [self.webobj loadData:[NSData dataWithContentsOfFile ath] MIMEType:@"image/png" textEncodingName:@"UTF-8" baseURL:baseURL]; 
```

# ruby-on-rails - 如何在 rabl 模板中的子级中添加父级属性（当父级是数组时）？

> ID：15878381
> 
> 赞同：2
> 
> 时间：2013-04-08T11:53:18.020
> 
> 标签：ruby-on-rails, json, rabl

如何在 rabl 模板的子项中添加父属性？做这样的事情：

```
 some_root_attr: {
    attr_a: 'rgtr',
    parent: [
      {
        attr_1: 'asd',
        child: {
          attr_3: 6,
          attr_from_parent_array_member: 'cvb'
        }
      },

      {
         attr_1: 'ert',
         child: {
           attr_3: 9,
           attr_from_parent_array_member: 'erty'
         }
      },
      ...
  ]
} 
```

如何在父数组成员的孩子中获取父数组成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:04:16.553

nesquena 在 github 上发布了解决方案： [https ://github.com/nesquena/rabl/issues/436](https://github.com/nesquena/rabl/issues/436)

```
collection @posts

node :categories do |p|
  p.categories.map do |c| 
    partial("categories/show", :object => c).merge(:post_attr => p.post_attr)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:22:24.820

```
object @obj
attributes :attr_a

child :parents do
  attributes :attr_1
  parent = root_object.dup
  child :child do 
    attributes :attr_3
    node(:attr_from_parent_array_member) { parent.attr_from_parent_array_member }
  end
end 
```

NB没有测试

# iphone - 如何更新iOS应用程序，但文件除外

> ID：15878394
> 
> 赞同：0
> 
> 时间：2013-04-08T11:53:51.060
> 
> 标签：iphone, ios, xcode, settings, sandbox

我正在制作我的第一个 iOS 应用程序。我有一个问题。在我的应用程序中，我想在 Settings.plist 中保存应用程序的当前状态：已完成的级别、达到的分数、金钱、应用内购买等。问题是，我怎样才能放置这个 plist，这样如果用户更新应用程序，他/她就不会丢失这些设置。我阅读了有关应用程序沙箱的信息，但我不明白它是如何工作的，以及如何从 Xcode 管理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:58:54.640

您应该将这些设置存储在**NSUserDefaults**中。它们会在安装新的应用程序版本时保留，因此您不会遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:44:38.553

两点：

a) 当您通过提交*同一应用*的新版本在应用商店更新您的应用时，旧版本创建的文件不会丢失。因此，您可以在应用程序的 Document 或 Library 目录中存储您喜欢的任何内容，并期望它在更新后仍然存在。iTunes 不会备份或恢复 Library/Caches 目录，因此不要在其中放置任何您无法重新创建的内容。如果您提交不同版本的应用程序（不是更新，而是新应用程序，因此您在应用程序商店中有两个单独的应用程序，可能是免费的和付费的），我不知道新版本无法访问第一个版本创建的文件。

b) 用户可以轻松读取、删除或更改您在 Documents/ 或 Library/ 中创建的任何文件。这可以通过他/她的 Mac 上的应用程序来完成，例如 iExplorer（可从 macroplant.com 下载）。因此请注意，如果文件是人类可读的，即 .plist 文件，用户可以更改它以提高他/她的分数、获得更多消耗品或其他任何东西。您可以通过加密数据，或以某种方式掩盖含义，或通过某种校验和方案来防止这种情况发生，这样您至少可以检测到它已被更改。当然，这些措施中的任何一个都涉及并发症，可能不值得麻烦。

顺便说一句...如果您正在开发使用数据文件的应用程序，iExplorer 是一个很棒的调试工具。我对它没有既得利益，只是我已经学会了如何使用它并希望它继续得到支持。可能还有其他应用程序可以做同样的事情，但这个应用程序效果很好，而且快速且易于使用。

# vba - 从不同的工作表和 vlookup 函数中设置范围

> ID：15878395
> 
> 赞同：0
> 
> 时间：2013-04-08T11:53:51.240
> 
> 标签：vba, excel, range, vlookup

此代码工作正常：

```
Sub test_range()
Dim Range1 As Range
Set Range1 = Sheet4.Range("B2:F6081")
End Sub 
```

当我将范围更改为变量时，它给了我错误 1004：

```
Sub test_range()
Dim Range1 As Range
Set Range1 = Sheet4.Range(Cells(2, 2), Cells(6081, 6))
End Sub 
```

我的“选择单元格”转换有什么问题？

此外，我想将它应用于 vlookup 函数：

```
For C = 2 To ColNumber

    C4 = C + 4
    For R = 2 To RowNumber
        Set Condition = Sheet1.Cells(R, 2)
        'MsgBox (Condition)
        Set Range1 = Sheet4.Cells(2, 2).Offset(6079, C + 3) 'B2 (row 2 column 2) : F6081 (row 6081 column 6)
        'MsgBox (Range1)
            arg1 = 5
            arg2 = False
        Sheet1.Cells(R, C4).Value = Application.WorksheetFunction.VLookup(Condition, Range1, 5, 0)
    Next R

Next C 
```

我试图将范围修改为

```
Range1 = Sheet4.Cells(2, 2).Offset(6079, C + 3) 
```

range 函数有效，但 vlookup 函数（再次）给了我错误 1004

我阅读了一些关于 vlookup 的案例以及 vlookup 的每一个暗淡结果作为变体。我也应该这样做吗？我不能把它的结果放到一个列的值上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:40:02.187

`Cells`意思是`ActiveSheet.Cells`！因此，如果你的活动工作表不是Sheet4，`Sheet4.Range(Cells(...`就会给你一个错误！

改为使用`Sheet4.Range(Sheet4.Cells`。

甚至更好，使用`Sheet4.Cells(2,2).Resize(6080,5)`

# xpages - 如何在 HTML 标签中使用复合数据

> ID：15878401
> 
> 赞同：1
> 
> 时间：2013-04-08T11:54:02.127
> 
> 标签：xpages

我在 8.5.3 中有以下代码

```
<xp:div>
    <xp:this.attrs>
          <xp:attr name="data-theme" value="#{javascript:compositeData.data_theme}" />
          <xp:attr name="data-position" value="#{javascript:compositeData.data_position}" />
          <xp:attr name="data-role" value="footer" /> 
    </xp:this.attrs> 
</xp:div> 
```

工作正常。但是客户有 Domino 8.5.2。而且这个版本也不支持`tagName`和`attr`。我有计算的值`attr`。

如何在类似的构造中使用compositeDate

```
<div data-position="#{javascript:compositeData.data-position}" ... 
```

??

一种解决方法是使用计算文本

```
<xp:text escape="false" id="ctFooterDivStart">
    <xp:this.value><![CDATA[#{javascript:"<div data-theme='"+ compositeData.data_theme + "' data-position='" + compositeData.data_position + "' data-role='footer'>"}]]></xp:this.value>
</xp:text> 
```

但这是丑陋的，难以阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:07:55.423

The workaround so far is to write data_position instead of data-position in the source tab to make shure, designer creates the code without errors.

Next I have a small scriptblock on my page to replace all data_position with data-position

```
$(document).ready(function () {$('div[data_position ]').each(function(){
    $(this).attr('data-position ', $(this).attr('data_position ')); //does the switch
    $(this).removeAttr('data_position '); //clears out the old one
});}); 
```

Just a workaround ( idea ). Not checked, if this really is the best way in terms of performance. ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:10:49.140

为此使用主题怎么样？

```
<control>
    <name>div-data-theme</name>
    <property mode="override">
        <name>value</name>
        <value>${javascript:@Char(60) + "div data-theme='" + compositeData.data_theme + "' data-position='" + compositeData.data_position + "' data-role='footer'" + @Char(62) + @Char(60) + "/div" + @Char(62)}</value>
    </property>
    <property mode="override">
        <name>escape</name>
        <value>${javascript:false}</value>
    </property>
</control> 
```

*（@Char 是必需的，因为您不能在主题中使用括号并且 CDATA 不起作用）*

在您的自定义控件中，您可以通过添加*xp:text*元素来使用它：

```
<xp:text themeId="div-data-theme">
</xp:text> 
```

如果您不向*xp:text*组件添加 id，它将不会被 span 标签包围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:27:31.877

我现在决定使用计算文本。涉及的代码不多。所以代码仍然可读。这是可折叠集（手风琴）的示例

```
...
<xp:text escape="false">
    <xp:this.value><![CDATA[${javascript:var html = "<div " 
            html = html + "data-role='collapsible-set' " 
            html = html + "data-mini='" + compositeData.data_mini + "' "
            Html = html + "data-theme='" + compositeData.data_theme + "' " 
            html = html + "data-inset='" + compositeData.data_inset + "' "
            html = html + "data-iconpos='" + compositeData.data_iconpos + "' " 
            html = html + "data-content-theme='" + compositeData.data_content_theme + "' " 
            html = html + "data-collapsed-icon='" + compositeData.data_collapsed_icon + "' " 
            html = html + "data-expanded-icon='" + compositeData.data_expanded_icon + "'> " 
            return html}]]></xp:this.value>
</xp:text>
<xp:callback facetName="fctAccordion" />
<xp:text escape="false">
    <xp:this.value><![CDATA[${javascript:"</div> "}]]></xp:this.value>
</xp:text> 
```

...

# c# - ASP - 单步上传文件

> ID：15878414
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:00.647
> 
> 标签：c#, asp.net, .net, file-upload

使用`asp:FileUpload`控件浏览和上传工作得很好。
但这是两步过程。首先我们必须浏览然后选择文件。

我希望它单步工作所以为了使它单步运行，我尝试了以下代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    //to launch the hidden fileupload dialog
    ClientScript.RegisterStartupScript (GetType(),
"hwa", "document.getElementById('fileupload').click();", true);

    //Getting the file name
    if (this.fileupload.HasFile)
    {
        string filename = this.fileupload.FileName;

        ClientScript.RegisterStartupScript(GetType(), "hwa", "alert('Selected File: '" + filename + ");", true);
    }
    else 
    {
        ClientScript.RegisterStartupScript(GetType(), "hwa", "alert('No FILE has been selected');", true);
    }

} 
```

在此代码中，有一个`fileUpload`控件正在被调用`Button1_Click`。
理想情况下，它应该执行第一行，然后应该显示文件上传控件，在选择文件或取消对话框后，流程应该转到下一行。但是在完整功能执行完成后会显示对话框。
由于这种异步或非预期的执行流程`if (this.fileupload.HasFile)`返回错误（因为尚未要求用户选择任何文件）并且我没有获得所选文件名。

我们可以修改此代码以实现单步上传文件吗？或者是否有任何其他方式可以做到这一点？

**注意-**我已要求不要使用`window forms`and `Threads`。因此，使用这两个解决方案是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:30:11.290

这不完全是您正在寻找的东西，但它可以满足您的需求。不同之处在于，您必须单击该按钮，而不是单击单独的`Browse`按钮。当您按下`Open`按钮时，页面将回发。我为此使用了 JQuery。这是我的代码

**ASPX**

```
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:FileUpload ID="fileupload1" runat="server" />
        <asp:Button ID="btn" runat="server" OnClick="btn_Click" Text="upload" style="display:none" />
    </div>
    <script type="text/javascript">
        var isfirst = true;
        $(function () {

            $('#<%= fileupload1.ClientID %>').on('change', function (e) {
                console.log('change triggered');
                $('#<%= btn.ClientID%>').trigger('click'); // trigger the btn button click which i have hidden using style='display:none'
            });
        });

    </script>
    </form>
</body> 
```

**背后的代码**

```
protected void btn_Click(object sender, EventArgs e)
{
    //TODO 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:11:57.120

您错过了在 Web 环境中存在客户端/服务器端断开连接的事实。

您的行：`ClientScript.RegisterStartupScript (GetType(),"hwa","document.getElementById('fileupload').click();", true);`是客户端代码，直到服务器端脚本完成并且生成的 HTML/javascript/CSS 将返回到浏览器，因为它是客户端 javascript 才会执行。您想利用`onchange`文件上传控件的事件。

这个问题应该可以帮助您：[ASP.NET FileUpload：选择文件后如何自动回发？](https://stackoverflow.com/questions/366631/asp-net-fileupload-how-to-automatically-post-back-once-a-file-is-selected)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T18:25:56.170

对于迟到的人来说，

```
 <div>
        <asp:FileUpload ID="fu" runat="server"  CssClass="bbbb" onchange="clickSeverControl()"/>
        <asp:LinkButton Text="Upload" ID="lnkUpload" runat="server" OnClientClick="showUpload();return false;" OnClick="lnkUpload_Click"/>
    </div> 
```

用css隐藏文件控件

```
 <style>
    .hiddenStyle {
        visibility:hidden;            
    }
    </style> 
```

客户端点击链接按钮事件触发文件上传控件点击

```
 function showUpload() {
        document.getElementById("fu").click();
    } 
```

在更改事件触发服务器端单击

```
 function clickSeverControl() {

        __doPostBack('<%= lnkUpload.ClientID %>', 'OnClick');
    } 
```

在服务器上单击保存上传的文件

```
 protected void lnkUpload_Click(object sender, EventArgs e)
    {
        fu.PostedFile.SaveAs(Server.MapPath("~/Upload") + "/" + fu.PostedFile.FileName);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T12:34:22.197

感谢其他答案我刚刚结合了两个示例并在我的项目中找到了我的问题的解决方案

```
<head runat="server">
    <title></title>
<script src="Scripts/jquery-1.9.1.min.js"></script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:FileUpload ID="fileupload1" runat="server" />
    <asp:Button ID="btnUploadBulk" runat="server" OnClick="btn_Click" Text="upload" style="display:none" />
</div>
<script type="text/javascript">
    var isfirst = true;
    $(function () {
        $('#<%= btnUploadBulk.ClientID%>').on('click', function (e) {
            showUpload();
        })
        });
    function showUpload() {
        var control = document.getElementById("<%= FileUploadControl.ClientID %>");
        control.click();
    }

</script>
</form> 
```

代码背后

```
protected void btn_Click(object sender, EventArgs e)
{
    //TODO 
} 
```

这对我有用

# django - 使用 Django 获取字段值

> ID：15878417
> 
> 赞同：2
> 
> 时间：2013-04-08T11:55:03.370
> 
> 标签：django, django-models, django-views

我可以获得我没有在表单中显示的字段的值吗？我想在会话中传递 ref_id。这是我的模型：

```
 def _createId():
        """
        """
        return hexlify(os.urandom(4))

class jobpost(models.Model):
    item_types = (
        ('Full Time','Full Time'),
        ('Part Time','Part Time'),
        ('Contract','Contract'),
    )
    posttype= (
        ('Job','Job'),
        ('Classified','Classified'),
        ('Project/Task','Project/Task'),
        ('Internship','Internship'),
    )
    #user = models.ForeignKey(User)
    job_id =             models.AutoField(primary_key=True)   
    country= models.ForeignKey(Country,to_field = 'country_name',  null=True)
    #user = models.ForeignKey(User, editable = False)
    post_type =        models.CharField(max_length=255,null=True, choices=posttype,default='Job')
    job_type =        models.CharField(max_length=255,null=True, choices=item_types,default='Full Time')
    job_location =    models.CharField(max_length=255,null=True)
    job_title =             models.CharField(max_length=255,null=True)
    job_description =       models.TextField(null=True)
    start_date =    models.DateField(null=True, help_text="mm/dd/yyyy")
    end_date =      models.DateField(null=True, help_text="mm/dd/yyyy")
    how_to_apply =    models.CharField(max_length=255,null=True)
    ref_id = models.CharField(max_length=32, default=_createId)

    def __unicode__(self):
        return unicode(self.country)
        return self.post_type
        return self.job_location
        return self.job_type
        return self.job_title
        return self.job_description
        return self.start_date 
        return self.end_date
        return self.how_to_apply
        return self.ref_id 
```

意味着我没有在我的表单中显示它，我想在下一个表单的会话中传递这个值..谁能告诉我我该怎么做？以及如何在下一个表单中传递表单的主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:27:21.420

表格.py

```
class JobPostForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(JobPostForm, self).__init__(*args, **kwargs)
        self.fields['ref_id'].widget = forms.HiddenInput()

    class Meta:
        model = jobpost 
```

视图.py

```
def your_view(request):
    if request.method == 'POST':
        form = JobPostForm(request.POST)
        if form.is_valid():
            request.session['ref_id'] = form.cleaned_data.get('ref_id')
            pk = form.save()
            request.session['pk'] = pk.id
    else:
        form = JobPostForm()
    return render(request, page.html,{'form': form}) 
```

# batch-file - 如何在变量中设置命令的输出，然后在批处理脚本中用于进一步的搜索

> ID：15878422
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:18.370
> 
> 标签：batch-file

例如：`Set var=findstr "name" temp.txt [temp.txt consist multiple lines , out of which one line says "my name is ABC"]`稍后找到该行的最后一个单词，即 ABC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:12:29.657

要捕获命令的输出，请使用`for /f`循环。有关`help for`更多信息，请参阅。

### 练习 1

要将 的值设置`%var%`为 的输出`findstr`，请执行以下操作：

```
for /f "delims=" %%I in ('findstr /i "name" "temp.txt"') do set "var=%%I" 
```

然后，如果您想要该行的最后一个单词，则可以使用基本`for`循环来遍历`%var%`.

```
for %%I in (%var%) do set "lastword=%%I"
set "var=%lastword%" 
```

* * *

### 练习 2

或者，如果您知道包含“name”的行将始终是 4 个标记（如“My name is blah”），您可以简单地捕获输出的第四个标记，`findstr`如下所示。

```
for /f "tokens=4" %%I in ('findstr /i "name" "temp.txt"') do set "var=%%I" 
```

就是这样。 `%var%`将包含匹配的行的第四个单词`findstr`。

* * *

### 练习 3

如果您知道该行将始终以“我的名字是”开头，但您想要名字和姓氏的可能性，或者像“John Jacob Jingleheimer-Schmidt”这样的很多名字，您可以使用`tokens`来捕获您想要的类似于练习 2。

```
for /f "tokens=3*" %%I in ('findstr /i "name" "temp.txt"') do set "var=%%J" 
```

请注意，我捕获`%%J`而不是`%%I`这次。那是因为`%%I`将是标记 3（第三个单词），而`%%J`之后的所有内容（通配符`tokens=3*`）。

* * *

### 练习 4

或者，如果名称可能是名字和姓氏，但您知道它将以“我的名字是”开头，您可以通过[变量子字符串替换](http://www.dostips.com/DtTipsStringManipulation.php)删除“我的名字是”部分。

```
for /f "delims=" %%I in ('findstr /i "name" "temp.txt"') do set "var=%%I"
set "var=%var:My name is =%" 
```

这将从 的值中删除“My Name is” `%var%`，留下“John Smith”。

* * *

### 练习 5

如果您不能指望包含“name”的行是相同数量的单词（例如，“Hi there！My name is”或“Hello！My name is”，您可以使用带通配符的[变量子字符串替换](http://www.dostips.com/DtTipsStringManipulation.php)去除可变内容。无论名称是一个词还是多个单词，并且无论“名称是”之前的内容是否变化，这都应该起作用。

```
for /f "delims=" %%I in ('findstr /i "name" "temp.txt"') do set "var=%%I"
set "var=%var:*name is =%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:56:38.903

与其他编程语言一样，您也可以将变量存储在内存中以供进一步使用：

```
@echo off&setlocal

set "file=temp.txt"
set "search=name"

:: clear the local environment
for /f "delims==" %%i in ('set $ 2^>nul') do set "%%i="

:: find the lines containing %search%
for /f "delims=" %%i in ('findstr "%search%" "%file%"') do set "$%%i=%%i"

:: show the line variables
set $ 
```

# java - 使用 hashMap 的比较没有给出预期的结果

> ID：15878423
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:18.833
> 
> 标签：java, android, map, comparison

手头的问题是，当我尝试从中提取值时，`hashmap`它返回 null。

我有一个`hashMap`实例：

`Map<Marker,Tag> theHashMap = new HashMap<Marker,Tag>();`

其中 tag 是一个类，其中包含一些关于 the 的简单信息，`marker`而 the`marker`是一个谷歌地图`marker`。

我在这一切发生的活动开始时添加到 theHashMap

```
theHashMap.put(mapController.AddMarker(new Tag(1, "City Of Dundee", DUNDEE_LOCATION, "untagged",), new Tag(1, "City Of Dundee", DUNDEE_LOCATION, "untagged",)); 
```

where`mapController`是一个处理所有`googleMap`相关内容的类。

和`mapController`。`AddMarker`返回`marker`添加到地图中的那个。

填充后将`hashMap`其传递给以`onMarkerClickListener`供以后参考。

我 `hashMap.get(marker);`从点击的地方`marker listener`调用。`marker``marker`

它总是返回 null，我认为这可能是因为`hashMap`onMarkerClick 侦听器内部是一个单独的实例，但我尝试创建一个指向原始实例的指针但它不起作用，我也尝试过`hashMap.get(marker.getTitle());`并`marker.getID()`认为它会比较那里的标题但是它以相同的结果结束。

如果需要，我将添加更多信息，但现在，有没有其他方法可以根据单击的标记从 hashMap 中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:00:51.310

`hashMap.put(marker,key);`在此 hashMap的代码中，您使用了键 -> 自定义对象（映射器）。

因此，当您通过键调用时，它会返回 null。`provide key (mapper)`对象应该匹配的位置`with put (mapper) key.`

您必须在 Mapper 类中**覆盖 equals 和 hashcode 方法**来解决这个问题。

**编辑：**

在`HashMap`你的`key`是`mapper object(custom object)`. 由于自定义对象（映射器对象）是 HashMap 中的关键，我们必须等于`override`并获取精确值。`hashcode``Mapper class`

```
If key as Primitives(int) or String Object, no need to do the above thing. 
```

# jquery-datatables - DataTables 新数据不起作用

> ID：15878424
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:20.860
> 
> 标签：jquery-datatables

我的 HTML 文件中有一个表格：

```
<!DOCTYPE html>
<head>
<link rel="stylesheet" href="../assets/data-tables/DT_bootstrap.css" />
<link rel="stylesheet" type="text/css" href="../assets/uniform/css/uniform.default.css" />
<link rel="shortcut icon" href="favicon.ico" />
</head>
<body class="fixed-top">
<table id="tabela_1">
<thead>
<tr>
<th>Contacto</th>
<th>Dt Receção</th>
<th>Dt Validade</th>
<th>Refª Cliente</th>
<th>Num Proposta</th>
<th>Estado</th>            
</tr>
</thead>
<tbody id="dados_tabela">
        <tr class="">
            <td>alex</td>
            <td>Alex Nilson</td>
            <td>1234</td>
            <td class="center">power user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>
        <tr class="">
            <td>lisa</td>
            <td>Lisa Wong</td>
            <td>434</td>
            <td class="center">new user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>
        <tr class="">
            <td>nick12</td>
            <td>Nick Roberts</td>
            <td>232</td>
            <td class="center">power user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>
        <tr class="">
            <td>goldweb</td>
            <td>Sergio Jackson</td>
            <td>132</td>
            <td class="center">elite user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>
        <tr class="">
            <td>webriver</td>
            <td>Antonio Sanches</td>
            <td>462</td>
            <td class="center">new user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>
        <tr class="">
            <td>gist124</td>
            <td>Nick Roberts</td>
            <td>62</td>
            <td class="center">new user</td>
            <td><a class="edit" href="javascript:;">Edit</a></td>
            <td><a class="delete" href="javascript:;">Delete</a></td>
        </tr>

    </tbody>

</table>

<script src="../assets/js/jquery-1.8.3.min.js"></script>    
<script src="../assets/breakpoints/breakpoints.js"></script>    
<script src="../assets/bootstrap/js/bootstrap.min.js"></script>     
<script src="../assets/js/jquery.blockui.js"></script>
<script src="../assets/js/jquery.cookie.js"></script>
<script type="text/javascript" src="../assets/uniform/jquery.uniform.min.js"></script>
<script type="text/javascript" src="../assets/data-tables/jquery.dataTables.js">
</script>
<script type="text/javascript" src="../assets/data-tables/DT_bootstrap.js"></script>
<script src="../assets/js/app.js"></script>     

<script>
jQuery(document).ready(function() {         

var oTable = $('#tabela_1').dataTable({ 
"bServerSide": true,
"bRetrieve": true,
"oSearch": {"sSearch": "Initial search"},
"sAjaxSource": "x.php?id_cliente=1",
"aoColumns": [
{ "sTitle": "Nome"},
{ "sTitle": "Data"},
{ "sTitle": "d"},
{ "sTitle": "e"},
{ "sTitle": "e"},
{ "sTitle": "3"}
],
"iDisplayLength": 10,
"bRetrieve": true,
"bScrollCollapse": true
}); 
});

</script>
</body>
</html> 
```

x.php 文件发送以下数据：

```
(...)
$num=1;

echo '{"iTotalRecords":'.$totalRows_rs_listaconsultas.',
"iTotalDisplayRecords":"10",
"aaData":['; 

do {
if ($num>1){
echo ",";
}
echo '["',$row_rs_listaconsultas['nome'],'",
"',$row_rs_listaconsultas['datarecepcao'],'",
"',$row_rs_listaconsultas['validadeconsulta'],'",
"',$row_rs_listaconsultas['referenciaconsulta'],'",
"',$row_rs_listaconsultas['propostanumero'],'",
"',$row_rs_listaconsultas['estado'],'"]'; 
$num=$num+1;
} while ($row_rs_listaconsultas = mysql_fetch_assoc($rs_listaconsultas));

echo ']}'; 
```

该表向我显示了来自 ("sAjaxSource": "php/x.php?id_cliente=1") 的数据。我可以看到所有数据，但排序列、搜索框和所有用于重新处理数据的命令都不起作用。似乎 dataTable 没有“看到”数据。我做错了什么？谢谢你的帮助。马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:43:45.270

这是你需要的。我在数据表网站上使用了代码：

html应该是这样的：

```
<html>
<head>
    </head>
    <body>
<table border="0" cellspacing="5" cellpadding="5" id="users" class="display">
    <thead><tr><th>id</th><th>name</th></tr></thead>
    <tbody><tr><td></td></tr></tbody>
</table>
<script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
        <script src="jquery.dataTables.min.js"
                type="text/javascript"></script>
        <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            $('#users').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "users.php"
            } );
        } );
        </script>
</body>
</html> 
```

注意：我使用了一个只有两列的表，一个 id 列和一个 name 列。我的数据来自`users.php`文件。

该`users.php`文件如下所示：

```
<?php
    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * Easy set variables
     */

    /* Array of database columns which should be read and sent back to DataTables. Use a space where
     * you want to insert a non-database field (for example a counter or static image)
     */
    $aColumns = array( 'id', 'name');

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "id";

    /* DB table to use */
    $sTable = "users";

    /* Database connection information */
    $gaSql['user']       = "";
    $gaSql['password']   = "";
    $gaSql['db']         = "";
    $gaSql['server']     = "";

    /* REMOVE THIS LINE (it just includes my SQL connection user/pass) */
    //include( $_SERVER['DOCUMENT_ROOT']."/datatables/mysql.php" );

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * If you just want to use the basic configuration for DataTables with PHP server-side, there is
     * no need to edit below this line
     */

    /* 
     * Local functions
     */
    function fatal_error ( $sErrorMessage = '' )
    {
        header( $_SERVER['SERVER_PROTOCOL'] .' 500 Internal Server Error' );
        die( $sErrorMessage );
    }

    /* 
     * MySQL connection
     */
    if ( ! $gaSql['link'] = mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) )
    {
        fatal_error( 'Could not open connection to server' );
    }

    if ( ! mysql_select_db( $gaSql['db'], $gaSql['link'] ) )
    {
        fatal_error( 'Could not select database ' );
    }

    /* 
     * Paging
     */
    $sLimit = "";
    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".intval( $_GET['iDisplayStart'] ).", ".
            intval( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    $sOrder = "";
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                $sOrder .= "`".$aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."` ".
                    ($_GET['sSortDir_'.$i]==='asc' ? 'asc' : 'desc') .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    $sWhere = "";
    if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
    {
        $sWhere = "WHERE (";
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ')';
    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = "WHERE ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
        }
    }

    /*
     * SQL queries
     * Get data to display
     */
    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS `".str_replace(" , ", " ", implode("`, `", $aColumns))."`
        FROM   $sTable
        $sWhere
        $sOrder
        $sLimit
        ";
    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );

    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    $sQuery = "
        SELECT COUNT(`".$sIndexColumn."`)
        FROM   $sTable
    ";
    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( $aColumns[$i] == "version" )
            {
                /* Special output formatting for 'version' column */
                $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
            }
            else if ( $aColumns[$i] != ' ' )
            {
                /* General output */
                $row[] = $aRow[ $aColumns[$i] ];
            }
        }
        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

更改这些变量：

1.  `$aColumns = array( 'id', 'name');`//表中的字段
2.  `$sIndexColumn = "id";`//索引列
3.  `$sTable = "users";`//表名
4.  必要的连接变量：

    $gaSql['user'] = ""; $gaSql['密码'] = ""; $gaSql['db'] = ""; $gaSql['server'] = "";

这对我有用。

# javascript - jquery/javascript 中的语法或逻辑错误

> ID：15878425
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:22.283
> 
> 标签：javascript, jquery

我有可变数量的促销项目 ( `panels`) 位于滑动带中，应设置为面板 ( `300px`) 的宽度乘以面板的数量。

它会提醒正确的皮带尺寸。对于固定数字，滑块也可以工作。我怀疑错误出在`if/else if`零件上。我什至不确定这是有效的 Javascript 语法。

任何提示表示赞赏。

```
 $(window).ready(function(){  
        var whichpanel = 1;
        var panels = $(".panel").length;
        var beltsize = panels*300;
        $('.belt').css({'width':beltsize});
    });

    $(window).ready(function promoslider(){
        if (panels>whichpanel){
            $('.belt').delay(7000).animate({'left':'-=300'}, 500);
            whichpanel += 1;    
        }
        else if (panels=whichpanel){
            $('.belt').delay(7000).animate({'left':'0'}, 500);
            whichpanel = 1;
        }   
        setTimeout(promoslider, 0);

    });
    promoslider; 
```

更新！这是现在对我有用的代码（[http://jsfiddle.net/zr5Nd/10/](http://jsfiddle.net/zr5Nd/10/)）：

```
$(window).ready(function () {
var whichpanel = 1;
var panels = $(".panel").length;
var beltsize = panels * 300;
$('.belt').css({
    'width': beltsize
});

function movingdiv() {
    if (panels > whichpanel) {
        //alert('Panels:' + panels + '/whichpanel:' + whichpanel);
        $('.belt').delay(1000).animate({
            'margin-left': '-=300px'
        }, 500);
        whichpanel += 1;

    } else if (panels == whichpanel) {
        //alert('Panels:' + panels + '/whichpanel:' + whichpanel);
        $('.belt').delay(1000).animate({
            'margin-left': '0'
        }, 500*panels);
        whichpanel = 1;

    } else {
        alert('3');
    }
    setTimeout(movingdiv, 0);
}

setTimeout(movingdiv, 0); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:56:32.887

您需要在语句中使用相等/身份运算符 ( `==`/ `===`) 而不是赋值运算符，例如`=``else if`

```
else if (panels == whichpanel){
   $('.belt').delay(7000).animate({'left':'0'}, 500);
   whichpanel = 1;
} 
```

另外，我相信`promoslider;`应该是`promoslider();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:57:22.557

使用`panels === whichpanel` 而不是 `panels=whichpanel`

变量`whichpanel`，`panels`已经失去了它们`scope`的`if/else if`一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:58:58.770

您也应该调用`promoslider`into `$(window).ready`，否则该函数尚不存在。另外，您必须以这种方式进行呼叫`promoslider()`，`promoslider`单独不会导致呼叫。当然，您必须在您的-statement中使用equals-operator`==`而不是assign-operator 。`=``if else`

# android - Android Emulator 没有出现在 Ubuntu 上

> ID：15878427
> 
> 赞同：1
> 
> 时间：2013-04-08T11:55:25.693
> 
> 标签：android, android-emulator

我有`Ubuntu 12.04`和`java 1.7`.

问题是`emulator`无论我尝试什么都不会启动。我也尝试将其更改`java`为 Open`Jdk 6`但这也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:14:59.353

重命名`tools/lib/libOpenglRender.so`为`tools/lib/libOpenglRender.so.xxx`已解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:18:54.857

如果您在开发机器上运行 64 位发行版，则需要使用 apt-get: 安装 ia32-libs 包：

下载包

```
apt-get install ia32-libs 
```

[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)。检查TroubleShooting linux下的链接

# c# - 发送帖子数据并获取状态码

> ID：15878433
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:48.177
> 
> 标签：c#

我需要知道如何在 C# 中将其作为发布数据发送。

以下是在 python 中的，我需要将其转换为 C# 代码并将其作为 webrequests 发送。

```
post = {'customer_fid': self.customer_fid, 'salt': self.salt, 'token': token, 'customer_facebooktoken': self.customer_facebooktoken}

request = self.session.post(self.baseurl + self.loginurl, data=post) 
```

这应该通过 webrequests 或 httpclient 来完成。但我不知道该怎么做。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:05:18.007

[看看这个](https://stackoverflow.com/questions/4015324/http-request-with-post) [或这个](https://stackoverflow.com/questions/4088625/net-simplest-way-to-send-post-with-data-and-read-response)

[或这个](http://developer.nirvanix.com/forums/p/56/126.aspx)

希望这会帮助你。

# asp.net - 添加电话簿条目时DotRas未经授权的访问异常

> ID：15878437
> 
> 赞同：0
> 
> 时间：2013-04-08T11:55:55.790
> 
> 标签：asp.net, usb, 3g, modem, ras

我正在使用 dotras dll 开发一个应用程序。在应用程序中，我的主要目标是使用 3g USB 调制解调器连接到互联网。我在下面添加我的代码：

```
 RasPhoneBook book = new RasPhoneBook();
    book.Open();
    dialer = new RasDialer();
    dialer.StateChanged += new EventHandler<StateChangedEventArgs>  (dialer_StateChanged);
    RasDevice device = RasDevice.GetDeviceByName("ZTE", RasDeviceType.Modem);
    RasEntry entry = RasEntry.CreateDialUpEntry("MyEntry", "*99#", device);
    entry.EncryptionType = RasEncryptionType.Optional;
    entry.Options.ModemLights = true;
    entry.NetworkProtocols.IP = true;
    entry.NetworkProtocols.Ipx = false;
    book.Entries.Add(entry);
    dialer.PhoneBookPath = book.Path;
    dialer.EntryName = "MyEntry";
    dialer.Dial(); 
```

当我尝试将电话簿添加到我的条目时，它返回异常：

```
UnauthorizedAccessException was Unhandled 
```

调用者没有执行请求的操作所需的权限。

我是 DotRas 的新手。那么向电话簿添加条目需要哪些权限？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:52:02.837

我找到了答案。我需要提升应用程序权限的原因是应用程序打开了所有用户的个人资料电话簿。我对 book.Open() 的调用表明了这一点

如果您遇到此类问题，请记住您可以随时将电话簿存储在您的应用程序旁边，这样就无需提升权限。

代码应该是：

```
 RasPhoneBook book = new RasPhoneBook();
           book.Open(".\\MyAppPhoneBook.pbk"); 
```

# tinymce - Tinymce 在 ie8 中获取内容问题（兼容模式）

> ID：15878440
> 
> 赞同：1
> 
> 时间：2013-04-08T11:56:05.520
> 
> 标签：tinymce

我在`tinymce`模态对话框窗口中显示编辑器。有时在获取编辑器内容时，它会在 IE8（兼容模式）中引发脚本错误。

```
tinyMCE.get('testeditor').getContent() 
```

脚本错误是：

我不能在这里写下整个错误消息，但这告诉我

> 第 1 行：156 386 个字符：代码：0

URI 是：

> `http://pro/tiny_mce/tiny_mce.js`

有人可以帮忙吗？

# java - java.sql.SQLException：列 ID 不唯一

> ID：15878441
> 
> 赞同：1
> 
> 时间：2013-04-08T11:56:09.383
> 
> 标签：java, sqlite, sqlexception

我有一个用 Java 编写的程序，它解析一组文件并使用 sqlite 将有关它们的信息放入数据库中。该代码似乎可以正常工作一段时间，直到有一天我收到此异常：

```
Exception in thread "main" java.sql.SQLException: column id is not unique
at org.sqlite.DB.throwex(DB.java:370)
at org.sqlite.DB.executeBatch(DB.java:302)
at org.sqlite.PrepStmt.executeBatch(PrepStmt.java:93)
at DatabaseTest.main(DatabaseTest.java:43) 
```

事实证明，其中两个文件在我的代码中以某种方式相互干扰。我已经构建了一个较小的程序，它仍然会出现同样的问题。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;

public class DatabaseTest {

public static void main(String[] args) throws SQLException {
    System.out.println(new org.sqlite.JDBC().toString());
    Connection conn = DriverManager.getConnection("jdbc:sqlite:my_file.sqlite");
    Statement stat = conn.createStatement();
    try {
        stat.executeUpdate("drop table if exists my_table;");
        stat.executeUpdate("create table my_table (id STRING UNIQUE, content STRING);");

        PreparedStatement prep = conn.prepareStatement("insert into my_table values (?, ?);");

        prep.setString(1, "0325E498"); // I keep this value same for all tests
        prep.setString(2, "test1");
        prep.addBatch();

        //prep.setString(1, "0336E810"); // Gives error
        //prep.setString(1, "0336E8100"); // Gives error
        //prep.setString(1, "0336E8100000"); // Gives error
        //prep.setString(1, "0336E8111111"); // Gives error
        //prep.setString(1, "1336E811"); // Gives error
        //prep.setString(1, "9336E811"); // Gives error
        //prep.setString(1, "A336E811"); // OK!
        //prep.setString(1, "111111111E811"); // Gives error
        prep.setString(1, "111111111E311"); // Gives error
        //prep.setString(1, "111111111E211"); // OK!
        prep.setString(2, "test2");
        prep.addBatch();

        conn.setAutoCommit(false);
        prep.executeBatch();  // Exception thrown here
        conn.setAutoCommit(true);
    } finally {
        stat.close();
        conn.close();
    }
} 
```

我当前的 Maven 依赖信息。

```
<dependency>
    <groupId>org.xerial</groupId>
    <artifactId>sqlite-jdbc</artifactId>
    <version>3.7.2</version>
</dependency> 
```

那么我做错了什么吗？为什么这对大多数字符串都有效，但不是全部？是否以非直接方式计算唯一性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:00:33.313

由于您已对 id 列应用了约束，因此如果您尝试在列**id**`UNIQUE`中插入任何现有值，则会出错

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:46:47.220

问题似乎与使用错误的数据类型有关，它应该是 TEXT 而不是 STRING。来自[sqlite 文档](http://www.sqlite.org/datatype3.html)：

> 请注意，由于“POINT”末尾的“INT”，声明的“FLOATING POINT”类型将给出 INTEGER 亲和性，而不是 REAL 亲和性。并且“STRING”的声明类型具有 NUMERIC 的亲和力，而不是 TEXT。

所以字符串“111111111E311”将被认为是一个OK数字，但它太大了，输入的内容是NaN。字符串“111111111E211”略小，可以原样存储。**

# javascript - 在 knockout.js 中填充选择

> ID：15878446
> 
> 赞同：0
> 
> 时间：2013-04-08T11:56:16.910
> 
> 标签：javascript, knockout.js

我在淘汰表中有一个数量选择选项，但我想根据可用库存对其设置最大限制。

假设我有以下条目的值

```
ID = 1
stock = 8 
```

我想用数字 1-stock 填充数量字段，在本例中为 1-8。数量将始终小于或等于库存。

```
function ItemEntry(ID, stock, quantity) {
    var self = this;
    self.ID= ID;
    self.stock= stock;
    self.quantity = quantity;

}

// viewmodel
function EntryViewModel() {
    var self = this;

    self.itemNumbers = ko.observableArray([
        new ItemEntry("1", 8, QUANTITY HERE!) //initial starting values
    ]);

    self.removeItem = function(item) { self.itemNumbers.remove(item) }
}

//custom binding for dropdown outside of models
ko.bindingHandlers.quantityDropdown = {
        update: function(quantityDropdown, stock, EntryViewModel) {
            var quantity = ko.utils.unwrapObservable(stock());
            for(var i = 0; i < stock(); i++)
            {
               $(quantityDropdown).append('<option value="' + i + '">' + i + '</option>');
            }
        }
    };

ko.applyBindings(new EntryViewModel()); 
```

这是HTML

```
 <table border="1">
  <thead><tr>
        <th>ID</th><th>Stock</th><th>Quantity</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: itemNumbers">
        <tr>
            <td data-bind="text: ID"></td>
            <td data-bind="text: stock"></td>
            <td><select data-bind="quantityDropdown: quantity"></select></td>
            <td><a href="#" data-bind="click: $root.removeItem">Remove</a></td>
        </tr>    
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:18:50.213

在视图模型代码之外创建自定义绑定：

```
ko.bindingHandlers.quantityDropdown = {

    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var quantity = ko.utils.unwrapObservable(valueAccessor());
        for(var i = 1; i < quantity + 1; i++)
        {
            // Add each option element to the select here
            $(element).append('<option value="' + i + '">' + i + '</option>');
        }
    }
}; 
```

然后将您的绑定更改为：

```
<td><select data-bind="quantityDropdown: stock"></select></td> 
```

# svn - 只有完全递归结帐包括外部

> ID：15878448
> 
> 赞同：10
> 
> 时间：2013-04-08T11:56:35.133
> 
> 标签：svn

我正在检查一个包含外部的 SVN 存储库（svn:externals 属性）。

但是，显然，如果我将 --depth 与“infinity”以外的任何值一起使用，则不会下载外部文件。这尤其具有讽刺意味，因为显然可以稍后使用 --set-depth exclude 和 exclude 文件夹进行更新。

是否可以有选择地签出*并*包括所有外部项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T09:41:19.517

我有同样的问题，除了事后手动检查外部的解决方法外，我没有任何真正的答案。

```
mkdir wc
svn co http://example.com/svn/repo/trunk wc --depth=immediates
cd wc
svn co http://example.com/svn/extrepo external --depth=empty 
```

但显然，这违背了外部的全部目的。

此行为在 Subversion 问题跟踪器中报告为[Issue 3311](http://subversion.tigris.org/issues/show_bug.cgi?id=3311)，并在其中注明

> 这是一个明确定义的功能。（有代码检查这种情况，然后显式跳过处理）

（但是，问题没有关闭，仍然有*Status: NEW*。）

而且我无法找到这个“功能”的任何明确原因，我只找到了通过将旧选项的检查与检查交换[来引入它的提交](https://svn.apache.org/viewvc/subversion/trunk/subversion/libsvn_client/update.c?r1=864067&r2=864068&)，我会说这有点太严格了，但它有从那以后基本上就一直呆在那里。`--non-recursive``depth == svn_depth_infinity`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T19:50:42.790

我遇到了同样的问题，我没有解决方案，但我想我至少找到了部分解决方法。

首先，我想解决 David W 关于为什么这是一个问题的问题。我理解他从哪里来的想法，如果您选择要结帐的特定目录，您可能会假设您不希望任何其他目录签出，因此没有外部目录。

但是，情况并非总是如此。例如，我们有多个开发项目都与第三方包相关。我们有一个目录，其中有一个外部目录链接到第三方产品存储库，然后在与该目录相同的级别，我们为我们开发的与该第三方项目相关的不同项目提供单独的目录。在任何给定时间，我可能只想处理我们的一个项目，而我不想查看其他十几个项目，但是我们所有的项目都有相对路径引用“返回”到第 3 方项目目录。所以，每当我签出我们的一个项目时，我都想确保第三方项目的外部链接也被签出。

这是我们商店中的场景，我们需要稀疏结帐，但我们希望也可以签出附加到稀疏结帐链中任何目录的任何外部文件。

现在，对于部分解决方法....

我发现，在我使用 TortoiseSVN 进行初始稀疏检出之后，（它没有得到我的外部）如果我然后转到命令提示符并在外部属性关联的目录上方的目录中执行以下命令with（尚不确定该事实是否相关，但认为值得一提，因为其他人说他们使用 svn up 没有得到类似的结果）：

```
svn up --depth infinity 
```

它会检查我的外部文件（请注意，当我选择稀疏结帐开始时，它没有拉下我没有选择的任何目录）。所以这让我到达了我想去的地方。

这是“更好”，但绝对仍然不完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T21:36:58.543

作为一种变通方法，我使用了一些 cmd/bat windows shell 脚本来读取外部定义并创建其缺失的结帐。这有点像@Mormegil 的回答，只是我阅读了外部的 URL 而不是硬编码它。

```
cd folderWithExternal

rem Read line from svn:external and put it in temporary file
svn propget svn:externals  | findstr myExternalName > external.tmp

rem Put content of temporary file in variable
set /p external=<external.tmp

rem Create a checkout for the external. The ^^ is to deal with cmd escaping.
svn checkout ^^%external% 
```

这个例子假设外部定义在 svn:externals 属性中以这种格式给出：

```
^/elsewhere/foo@123 myExternalName 
```

我不得不`^^`在我的脚本中添加这些来解决`^`Windows cmd 中的转义字符这一事实。在 SVN externals 中，它的意思是“同一存储库的根目录”。

在我的用例中，我还必须检查某些外部而不是其他，这就是我寻找特定外部的原因。您当然可以循环遍历外部的所有行，并为所有这些行创建稀疏结帐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-05T14:40:03.637

As a workaround, I created a folder with the same name as the external folder, then defined the externals inside this. Then the folder is available for selective checkout.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T14:40:29.350

> 示例： svn co --depth immediates 预期：创建根目录下的所有文件，并为根目录下的每个目录创建一个空目录。实际：根目录下的所有文件都创建完毕，根目录下除 externals 之外的每个目录都创建一个空目录。

我想我理解你的问题，但我不确定这是怎么回事。`svn co --depth`and的目的`svn update --set-depth`是允许您进行稀疏检出，从而允许您操作存储库结构，而无需检出您真正不感兴趣的千兆字节文件。

以下是使用稀疏结帐的两个示例：

*   作为一名 CM，我有时会参与我们几乎所有的项目。在我的系统上，我做了一个`svn co --depth=immediates $REPO/trunk`可以让我看到我们所有的项目在主干下，但它不使用很多磁盘空间，也没有花那么长时间结帐。然后我可以进入需要我关注的项目并做一个`svn up --set-depth=infinity`得到那个项目。像这样检查整个存储库可以让我操纵我们的项目（重命名它们，删除过时的项目等）。

*   在我的上一份工作中，我在 CVS 到 SVN 转换后重构了我们的分支和标签。创建了数千个完全没有意义的分支和标签。我做了一个`svn co --set-depth=empty $REPO`然后 `svn up --set-depth=immediates 分支标签。现在我有了一个包含所有标签和分支的目录，但它们下面没有文件。我可以删除过时的分支和标签，并将它们重命名为更有意义的名称。

你抱怨的是，如果我做 a `svn checkout --depth=immediates`，我不会得到一个***空***的externals 目录。但是该目录实际上并不存在于您的项目中。这只是 Subversion 执行的魔术。空的外部目录有什么用？

作为一名 CM，我是少数进行稀疏结账的人之一。这不是大多数开发人员通常会做的事情。当我进行稀疏结帐时，我真的不想看到外部目录。如果出于某种原因，您需要知道外部目录存在的位置，您可以执行`svn plist -vR svn:externals .`并获取完整列表，然后执行`svn up --set-depth=infinity $extern_dir`.

# c# - C# 在字符串中查找文本，然后提取变量

> ID：15878454
> 
> 赞同：1
> 
> 时间：2013-04-08T11:57:00.127
> 
> 标签：c#, json, string, search

我在搞乱 Steam Web API。我正在尝试创建一个函数来查找一段文本，然后提取另一段文本，这将根据我使用函数查找的用户而改变。

我尝试过使用 IndexOf，但由于我要提取的文本长度可能不同，所以很难。

我想从中提取字符串的 Json 响应看起来像这样，但会因我查找的每个用户而异。

```
{
"response": {
    "game_count": 54,
    "games": [
        {
            "appid": 240,
            "playtime_forever": 51842
        },
        {
            "appid": 260,
            "playtime_forever": 43
        },
        {
            "appid": 300,
            "playtime_forever": 191
        },
        {
            "appid": 320,
            "playtime_forever": 130
        },
        {
            "appid": 340,
            "playtime_forever": 4
        },
        {
            "appid": 520
        },
        {
            "appid": 4000,
            "playtime_2weeks": 798,
            "playtime_forever": 61803
        },
        {
            "appid": 440,
            "playtime_forever": 19466
        },
        {
            "appid": 105600,
            "playtime_forever": 2084
        },
        {
            "appid": 72850,
            "playtime_forever": 2010
        },
        {
            "appid": 380,
            "playtime_forever": 91
        },
        {
            "appid": 400,
            "playtime_forever": 76
        },
        {
            "appid": 420
        },
        {
            "appid": 220,
            "playtime_forever": 827
        },
        {
            "appid": 550,
            "playtime_forever": 906
        },
        {
            "appid": 33910,
            "playtime_forever": 77
        },
        {
            "appid": 33930,
            "playtime_2weeks": 1714,
            "playtime_forever": 31904
        },
        {
            "appid": 219540,
            "playtime_forever": 0
        },
        {
            "appid": 570
        },
        {
            "appid": 205790
        },
        {
            "appid": 22380,
            "playtime_forever": 1119
        },
        {
            "appid": 105400,
            "playtime_forever": 134
        },
        {
            "appid": 204030
        },
        {
            "appid": 12120
        },
        {
            "appid": 12250
        },
        {
            "appid": 24010
        },
        {
            "appid": 8190,
            "playtime_forever": 723
        },
        {
            "appid": 620,
            "playtime_forever": 101
        },
        {
            "appid": 644
        },
        {
            "appid": 730,
            "playtime_forever": 431
        },
        {
            "appid": 10,
            "playtime_forever": 396
        },
        {
            "appid": 80
        },
        {
            "appid": 100
        },
        {
            "appid": 42680,
            "playtime_forever": 65
        },
        {
            "appid": 42690,
            "playtime_forever": 1435
        },
        {
            "appid": 22200
        },
        {
            "appid": 113200,
            "playtime_forever": 270
        },
        {
            "appid": 20540
        },
        {
            "appid": 55110
        },
        {
            "appid": 43110
        },
        {
            "appid": 9340
        },
        {
            "appid": 50620
        },
        {
            "appid": 4560
        },
        {
            "appid": 55230,
            "playtime_forever": 1354
        },
        {
            "appid": 4540
        },
        {
            "appid": 4570
        },
        {
            "appid": 22370,
            "playtime_forever": 305
        },
        {
            "appid": 70,
            "playtime_forever": 479
        },
        {
            "appid": 70300,
            "playtime_forever": 138
        },
        {
            "appid": 220240,
            "playtime_2weeks": 72,
            "playtime_forever": 453
        },
        {
            "appid": 107410,
            "playtime_2weeks": 80,
            "playtime_forever": 403
        },
        {
            "appid": 40800,
            "playtime_2weeks": 124,
            "playtime_forever": 124
        },
        {
            "appid": 12210,
            "playtime_2weeks": 663,
            "playtime_forever": 663
        },
        {
            "appid": 12220,
            "playtime_2weeks": 658,
            "playtime_forever": 658
        }
    ]

} 
```

}

我想要做的是搜索即“\”appid\“：440”，然后能够得到后面的playtime_forever int。我不知道该怎么做。如果字符串具有设定的长度，我只能从 Split 函数中获得帮助，因为这样我就可以返回我想要的数组索引。

如果这不清楚，我非常抱歉，我尽力解释我想要实现的目标。

提前致谢，

伊萨克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:12:35.117

正如评论所说，您所看到的不是一个简单的字符串，所以不要尝试为它编写自己的解析器。这是一个包含对象集合的[JSON响应。](http://msdn.microsoft.com/en-us/library/bb299886.aspx)这些对象似乎有 3 个字段：

*   应用程序 ID
*   playtime_forever
*   playtime_2 周

如果您想在代码中以本机方式使用这些，只需创建一个具有三个公共属性（getter 和 setter）的传输对象，其中每个属性与 JSON 字段具有相同的名称。然后只需使用`System.WEb.Script`命名空间的 JavaScriptSerializer 将集合反序列化为`List<TransportObject>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:51:21.957

您可以尝试将 Json 反序列化为动态对象，请看这里：将 [JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)

然后遍历您的应用程序集合并检查 appId = 440

```
for(int i = 0; i <= deserializedResult.Count; i++)
{
    if(deserializedResult[i] == 440)
        ....
} 
```

似乎 playtime_forever 并不总是可用，所以我想你必须使用反射来查看 playtime_forever 在访问之前是否存在。

# powershell - Powershell 数据表

> ID：15878457
> 
> 赞同：0
> 
> 时间：2013-04-08T11:57:10.843
> 
> 标签：powershell, powershell-2.0, powershell-3.0

任何人都可以对powershell表提供一些帮助吗？

脚本的工作部分

```
Function CheckWMI {
Param (
    [Parameter(Mandatory=$True)]
    $Computers

)
        $CheckWMIResults = New-Object system.Data.DataTable
        $Function = $CheckWMIResults.columns.add("ComputerName", [System.Type]::GetType("System.String") )
        $Function = $CheckWMIResults.columns.add("Attempts", [System.Type]::GetType("System.Int32") )
        $Function = $CheckWMIResults.columns.add("Result", [System.Type]::GetType("System.String") )

    ForEach ($Computer in $Computers) {
        $CheckWMIResults.Rows.Add($Computer,"0","Incomplete")
    }

}

CheckWMI "192.168.1.8","192.168.1.7","192.168.1.6" 
```

如您所见，它获取每个 IP 地址并为它们创建单独的行。

现在如何选择其中一行并更新它，例如第二行的计数列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:58:10.350

没有必要为此使用像 DataTable 这样繁重的数据结构。您所需要的只是一个简单的集合，如数组和泛型`PSObject`. 下面重写了上面的脚本，然后将`Result`第一台计算机的设置为`Complete`：

```
Function CheckWMI {
Param (
    [Parameter(Mandatory=$True)]
    [string[]]$Computers

)
    $CheckWMIResults = @();

    ForEach ($Computer in $Computers) {
        $TempResults = New-Object PSObject;
        $TempResults | Add-Member -MemberType NoteProperty -Name "ComputerName" -Value $Computer;
        $TempResults | Add-Member -MemberType NoteProperty -Name "Attempts" -Value 0;
        $TempResults | Add-Member -MemberType NoteProperty -Name "Result" -Value "Incomplete";
        $CheckWMIResults += $TempResults;
    }
    $CheckWMIResults;
}

$Results = CheckWMI -Computers "192.168.1.8","192.168.1.7","192.168.1.6"
$Results[0].Result = "Complete";
$Results; 
```

如果您确实需要类型检查（这`DataTable`给了您），请定义您自己的类型。

```
add-type @"
public class WMIResults {
   public string ComputerName;
   public int Attempts;
   public string Result;
}
"@

Function CheckWMI {
Param (
    [Parameter(Mandatory=$True)]
    [string[]]$Computers

)
    $CheckWMIResults = @();

    ForEach ($Computer in $Computers) {
        $TempResults = New-Object WMIResults;
        $TempResults.ComputerName = $Computer
        $TempResults.Attempts = 0;
        $TempResults.Result = "Incomplete";
        $CheckWMIResults += $TempResults;
    }
    $CheckWMIResults;
}

$Results = CheckWMI -Computers "192.168.1.8","192.168.1.7","192.168.1.6"
$Results[0].Result = "Complete";
$Results; 
```

请参阅[http://blogs.msdn.com/b/powershell/archive/2009/03/11/how-to-create-an-object-in-powershell.aspx](http://blogs.msdn.com/b/powershell/archive/2009/03/11/how-to-create-an-object-in-powershell.aspx)以及`Get-Help Add-Type`有关第二种方法的更多详细信息（您可以使用一个结构而不是一个用于琐碎案例的类，但[类通常是一个更好的主意](https://stackoverflow.com/questions/5487511/struct-vs-class)）。

# python - Python中用于列表替换的代码“就地”

> ID：15878468
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:57:48.933
> 
> 标签：python, list

![在此处输入图像描述](https://i.stack.imgur.com/zlUXi.jpg)

我正在尝试在列表中使用就地进行项目切换。

我不明白为什么它在结果中添加“”改变一个数字，而不是写`[1,2,3,4]`（我的老师想要的结果）它给了我`[1, 2, 3, 4]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:58:58.867

那是 Python 对列表的表示。它不会影响存储在那里的数据，只是它的显示方式，以提高可读性。

您的老师只是错过了给您的示例中的空格（按照惯例，没有必要）。

简而言之：

```
>>> [1,2,3,4] == [1, 2, 3, 4]
True 
```

它们是完全相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:02:06.683

利用

```
print('[' + ','.join(str(i) for i in lst) + ']') 
```

代替

```
print(lst) 
```

# iphone - 带有移动临时证书的 .ipa 文件

> ID：15878469
> 
> 赞同：2
> 
> 时间：2013-04-08T11:57:49.990
> 
> 标签：iphone, objective-c, xcode, ipa

我开发了我的应用程序，并创建了`ipa file`. 我添加了设备 ID 列表并下载了**证书**。现在我想将`.ipa`文件发送给客户。`.ipa`单独发送文件是否足够？还是我必须发送下载的证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:05:42.310

根据我的经验，如果客户的设备包含在用于创建 ipa 文件的配置文件中，您可以直接将 ipa 文件发送给客户。

要验证您的配置文件是否嵌入在 ipa 文件中，只需将 ipa 复制到临时位置的任何位置，将其扩展名重命名为 zip 并解压缩。其内容中将嵌入配置文件。删除现有的配置文件并安装该配置文件只是为了确保它是完美的，如果你想测试的话。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:06:32.950

先打开[http://www.diawi.com](http://www.diawi.com)

现在拖放项目的 .ipa 文件和配置文件。

单击发送按钮后，将创建一个链接

现在您可以将此链接发送到某个地方，他/她可以下载您的应用程序（在 safari 中打开此链接）。

希望它会帮助你。

# javascript - jqGrid 用数据填充网格

> ID：15878470
> 
> 赞同：0
> 
> 时间：2013-04-08T11:57:54.183
> 
> 标签：javascript, jquery, jqgrid

我需要用从 ajax 调用收到的数据填充我的 jqGrid。这是我的 jqGrid 代码：

```
$("#discuss_table_answers").jqGrid({
        datatype: "local",
        jsonReader: {
            root: "list",
            repeatitems: false,
            records: "size"
        },
        colNames: ['agentId', 'date', 'deleted', 'id', 'questionId', 'rating', 'reported', 'text'],
        colModel: [
            {name: 'agentId', index: 'agentId', width: 80, align: 'right', formatter:"number"},
            {name: 'date', index: 'date', width: 80, align: 'right', formatter:"date"},
            {name: 'deleted', index: 'deleted', width: 150, sortable: true
                , formatter: function myformatter(cellvalue, options, rowObject) {
                if (cellvalue) {
                    return "<p>Rejected</p>";
                }
                return "<button class='reject_question' style='height: 20px;width: 100px'>Reject</button>";
            }
            },
            {name: 'id', index: 'id', width: 55,formatter:"number"},
            {name: 'questionId', index: 'questionId', width: 90,formatter:"number"},
            {name: 'rating', index: 'rating', width: 150, sortable: false,formatter:"number"},
            {name: 'reported', index: 'reported', width: 150, sortable: false},
            {name: 'text', index: 'text', width: 80, align: 'right'}
        ], height: "100%" }); 
```

添加数据的功能代码：

```
function addData (rowId) {                
            var ansTable = $("#discuss_table_answers");
            ansTable.clearGridData(true);

            $.getJSON("review2-admin/question/" + rowId + "/answers", function (data) {
                console.log(data);
                console.log(data['list'].length);
                ansTable.setGridParam({data: data}).trigger('reloadGrid');
            }); 
```

从萤火虫我看到我从服务器得到了正确的答案：

```
{"size":2,"list":[{"id":15,"questionId":9,"agentId":7327516,"text":"лоол","date":1364882946000,"reported":false,"deleted":false,"rating":0},{"id":12,"questionId":9,"agentId":4405127,"text":"456456456","date":1364793241000,"reported":false,"deleted":false,"rating":2}]} 
```

所以问题是从服务器获取的数据没有显示在网格中。

我尝试使用类似的测试数据`var testData = [ {list: {agentId: "7327516", date: "1364882946000", deleted: false, id: "15", questionId: "9", rating: "0", reported: false, text: "лоол"}, size: 1} ];` ，它工作正常，表格刷新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:21:30.613

要让 jqGrid 自己处理 JSON 并将参数作为请求的一部分传输，您可以执行以下操作：

摆脱 jsonReader 部分

将以下参数添加到您的 jqGrid 设置中

```
 datatype: 'json',
 mtype: 'POST', 
 url: '/Controller/ActionReturningJSONData' 
```

任何时候您想更改 jqGrid 在查找数据时将发送的参数（通过页面、重新加载等），您可以调用：

```
$('#gridName').jqGrid('setGridParam', { postData: { ValueName: Value }}); 
```

然后在您的控制器上，您只需评估“ValueName”参数即可将您提供的数据集更改回 jqGrid。与在 jqGrid 之外处理 JSON 相比，这应该不会那么混乱。

# android - 重复使用活动

> ID：15878474
> 
> 赞同：0
> 
> 时间：2013-04-08T11:58:18.263
> 
> 标签：android

```
final Intent intent = new Intent(getActivity(), Home.class);
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
break; 
```

我正在尝试`activity`像这样重新使用我的，但该活动根本没有打开。下面是我`Android-Manifest.xml`对应的代码`activity`。

```
<activity android:label="Home" 
    android:configChanges="orientation|screenSize" android:name="com.test.Home">
    <intent-filter>
        <action android:name="android.intent.action.Home" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

重新启动现有的`activity`. 我不希望它在所有情况下只在某些情况下被重用，所以尝试了上面的 Intent 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:17:08.937

只需将其添加到您`manifest file`声明活动的地方

它只会创建您的活动的单个实例。在第一次创建之后，当你调用这个活动时，它的`onResume`函数将被调用而不是`onCreate`. 因此，您将能够使用相同的活动而无需一次又一次地创建它

```
android:launchMode= "singleInstance" 
```

或者您可以尝试添加标志

```
i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT) 
```

它会将已经创建的活动带回前面，而不是创建新实例

打开活动

像这样

```
Intent i= new Intent(myactivity1.this,myactivity2.class);
i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT)
startActivity(i); 
```

# java - 随机数加到总数中

> ID：15878477
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:58:29.390
> 
> 标签：java, generator

大家好，我对这段代码有点卡住了。除了我希望随机数加起来达到用户定义的数量外，我已经全部搞定了。例如，用户输入 23500 我希望所有随机数加起来为总数。这就是我到目前为止所拥有的

```
package containerweights;
import java.util.Random;
import java.util.Scanner;
import java.io.*;
public class Containerweightgenerator {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub

        Scanner input = new Scanner(System.in);
        System.out.printf ("%n ***Random Number Genreator*** %n%n");
        System.out.print("Enter total: ");
        double total_weight = input.nextDouble();
        System.out.print("Enter amount: ");
        double total_pallets = input.nextDouble();

        double average_weight = total_weight / total_pallets;
        System.out.printf("%-40s -%10.2f%n", "Average Weight is: ", average_weight);

        double first_weight = average_weight - 50;
        double second_weight = average_weight + 50;

        double START = first_weight;
        double END = second_weight;
        Random random = new Random();
        for (int idx = 1; idx <= total_pallets; ++idx)
        {
            showRandomInteger(START, END, random);
        }
        }
    private static void showRandomInteger(double sTART, double eND, Random aRandom) throws Exception{
        if ( sTART > eND )
        {
            throw new Exception(" Start connot exceed End.");
        }
        long range = (long)eND - (long)sTART + 1;

        long fraction = (long)(range * aRandom.nextDouble());
        int randomNumber = (int)(fraction + sTART);
        System.out.println(randomNumber);
    } 
        private static void log(String aMessage)
        {
            log(aMessage);
        }   
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:01:29.880

只是给出随机数。如果您给出的最后一个数字超过总数，则返回与总数的差值而不是该数字

根据新要求，我编辑了对以下内容的回答：

```
int pallets=10;
int targetWeight=100;
int totalSoFar = 0;
int[] palletWeight = new int[pallets];

//Give random weight to N-1 pallets
for (int i=0; i<pallets-1; ++i){
    palletWeight[i] = random.nextInt(1.33 * targetWeight / pallets);
    totalSoFar += palletWeight[i];
}

//Check if we exceeded our target
if (totalSoFar > targetWeight){    
    while(totalSoFar > targetWeight){
      int x = random.nextInt(pallets - 1); //pick a pallet at random
      int a = random.nextInt(palletWeight[x]);
      palletWeight[x] -= a; //take of a random 'a' grams out of its weight
      totalSoFar -= a;
    }
}
//Now we are under the target weight, let the last pallet be the difference
 palletWeight[pallets-1] = targetWeight - totalSoFar; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:58:06.713

如果 Lefteris 的答案对您不起作用（因为可能要求所有值实际上都是“随机的”——抛开这意味着什么），您唯一的选择是重复生成随机数集并将它们相加。

这又丑又慢，我更喜欢 Lefteris 的回答。但他确实意味着该系列中的最后一个数字不会是随机的，它的大小分布可能会使其脱颖而出。

# python - 使用 Python 在 Windows 8 中模拟触摸事件

> ID：15878478
> 
> 赞同：1
> 
> 时间：2013-04-08T11:58:33.457
> 
> 标签：python, windows-8, touch, simulation, ctypes

我正在尝试使用适用于 Windows 8 的 python 编写一种驱动程序。我将通过串行接收触摸坐标，然后我想用它来使它看起来好像有人在屏幕上触摸了这些坐标（模拟触摸）。

我的第一个问题是：

Windows 8 中的触摸事件与仅在该区域单击鼠标不同吗？（我知道他们为触摸事件修改了所有内容，但不确定其中涉及到什么——可能就像一个影响区域的东西，让它对触摸屏更友好？）

第二：

如果是这样，是否有一个 python 库来模拟坐标处的“触摸”而不是“点击”？

更新：

使用 ctypes 和评论中链接的页面，我创建了这个：

```
from ctypes import *

#Constants

#For touchMask
TOUCH_MASK_NONE=          0x00000000 #Default
TOUCH_MASK_CONTACTAREA=   0x00000001
TOUCH_MASK_ORIENTATION=   0x00000002
TOUCH_MASK_PRESSURE=      0x00000004
TOUCH_MASK_ALL=           0x00000007

#For touchFlag
TOUCH_FLAG_NONE=          0x00000000

#For pointerType
PT_POINTER=               0x00000001#All
PT_TOUCH=                 0x00000002
PT_PEN=                   0x00000003
PT_MOUSE=                 0x00000004

#For pointerFlags
POINTER_FLAG_NONE=        0x00000000#Default
POINTER_FLAG_NEW=         0x00000001
POINTER_FLAG_INRANGE=     0x00000002
POINTER_FLAG_INCONTACT=   0x00000004
POINTER_FLAG_FIRSTBUTTON= 0x00000010
POINTER_FLAG_SECONDBUTTON=0x00000020
POINTER_FLAG_THIRDBUTTON= 0x00000040
POINTER_FLAG_FOURTHBUTTON=0x00000080
POINTER_FLAG_FIFTHBUTTON= 0x00000100
POINTER_FLAG_PRIMARY=     0x00002000
POINTER_FLAG_CONFIDENCE=  0x00004000
POINTER_FLAG_CANCELED=    0x00008000
POINTER_FLAG_DOWN=        0x00010000
POINTER_FLAG_UPDATE=      0x00020000
POINTER_FLAG_UP=          0x00040000
POINTER_FLAG_WHEEL=       0x00080000
POINTER_FLAG_HWHEEL=      0x00100000
POINTER_FLAG_CAPTURECHANGED=0x00200000

#Structs Needed

class POINT(Structure):
    _fields_=[("x", c_long),
              ("y", c_long)]

class POINTER_INFO(Structure):
    _fields_=[("pointerType",c_int32),
              ("pointerId",c_uint32),
              ("frameId",c_uint32),
              ("pointerFlags",c_int),
              ("sourceDevice",c_uint32),
              ("hwndTarget",c_uint32),
              ("ptPixelLocation",POINT),
              ("ptHimetricLocation",POINT),
              ("ptPixelLocationRaw",POINT),
              ("ptHimetricLocationRaw",POINT),
              ("dwTime",c_uint32),
              ("historyCount",c_uint32),
              ("inputData",c_int32),
              ("dwKeyStates",c_uint32),
              ("PerformanceCount",c_uint64),
              ("ButtonChangeType",c_int)
              ]

class RECT(Structure):
    _fields_=[("left",c_long),
              ("top",c_long),
              ("right",c_long),
              ("bottom",c_long)]

class POINTER_TOUCH_INFO(Structure):
    _fields_=[("pointerInfo",POINTER_INFO),
              ("touchFlags",c_int),
              ("touchMask",c_int),
              ("rcContact", RECT),
              ("rcContactRaw",RECT),
              ("orientation", c_uint32),
              ("pressure", c_uint32)]

#Initialize Touch Injection

pointerInfo=POINTER_INFO(pointerType=PT_TOUCH,
                         pointerId=0,
                         ptPixelLocation=POINT(950,540))

touchInfo=POINTER_TOUCH_INFO(pointerInfo=pointerInfo,
                             touchFlags=TOUCH_FLAG_NONE,
                             touchMask=TOUCH_MASK_ALL,
                             rcContact=RECT(pointerInfo.ptPixelLocation.x-5,
                                  pointerInfo.ptPixelLocation.y-5,
                                  pointerInfo.ptPixelLocation.x+5,
                                  pointerInfo.ptPixelLocation.y+5),
                             orientation=90,
                             pressure=32000)

if (windll.user32.InitializeTouchInjection(1,1) != 0):
    print "Initialized Touch Injection"
#Press Down
touchInfo.pointerInfo.pointerFlags=(POINTER_FLAG_DOWN|
                                    POINTER_FLAG_INRANGE|
                                    POINTER_FLAG_INCONTACT)
if (windll.user32.InjectTouchInput(1, byref(touchInfo))==0):
    print "Failed with Error: "+ FormatError()

else:
    print "Touch Down Succeeded!"

#Pull Up
touchInfo.pointerInfo.pointerFlags=POINTER_FLAG_UP
if (windll.user32.InjectTouchInput(1,byref(touchInfo))==0):
    print "Failed with Error: "+FormatError()

else:
    print "Pull Up Succeeded!" 
```

每次都因输入参数错误而失败。我浏览了所有参考资料，但找不到看起来不正确的类型。有没有人看到明显的东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:31:14.943

多亏了 Eryksum 和 Xyroid，我才能让它工作。感谢您忍受我对 C 型/Windows 的无知。这是将触摸仿真打包为函数的最终脚本（还有额外的常量）：

```
from ctypes import *
from ctypes.wintypes import *

#Constants

#For touchMask
TOUCH_MASK_NONE=          0x00000000 #Default
TOUCH_MASK_CONTACTAREA=   0x00000001
TOUCH_MASK_ORIENTATION=   0x00000002
TOUCH_MASK_PRESSURE=      0x00000004
TOUCH_MASK_ALL=           0x00000007

#For touchFlag
TOUCH_FLAG_NONE=          0x00000000

#For pointerType
PT_POINTER=               0x00000001#All
PT_TOUCH=                 0x00000002
PT_PEN=                   0x00000003
PT_MOUSE=                 0x00000004

#For pointerFlags
POINTER_FLAG_NONE=        0x00000000#Default
POINTER_FLAG_NEW=         0x00000001
POINTER_FLAG_INRANGE=     0x00000002
POINTER_FLAG_INCONTACT=   0x00000004
POINTER_FLAG_FIRSTBUTTON= 0x00000010
POINTER_FLAG_SECONDBUTTON=0x00000020
POINTER_FLAG_THIRDBUTTON= 0x00000040
POINTER_FLAG_FOURTHBUTTON=0x00000080
POINTER_FLAG_FIFTHBUTTON= 0x00000100
POINTER_FLAG_PRIMARY=     0x00002000
POINTER_FLAG_CONFIDENCE=  0x00004000
POINTER_FLAG_CANCELED=    0x00008000
POINTER_FLAG_DOWN=        0x00010000
POINTER_FLAG_UPDATE=      0x00020000
POINTER_FLAG_UP=          0x00040000
POINTER_FLAG_WHEEL=       0x00080000
POINTER_FLAG_HWHEEL=      0x00100000
POINTER_FLAG_CAPTURECHANGED=0x00200000

#Structs Needed

class POINTER_INFO(Structure):
    _fields_=[("pointerType",c_uint32),
              ("pointerId",c_uint32),
              ("frameId",c_uint32),
              ("pointerFlags",c_int),
              ("sourceDevice",HANDLE),
              ("hwndTarget",HWND),
              ("ptPixelLocation",POINT),
              ("ptHimetricLocation",POINT),
              ("ptPixelLocationRaw",POINT),
              ("ptHimetricLocationRaw",POINT),
              ("dwTime",DWORD),
              ("historyCount",c_uint32),
              ("inputData",c_int32),
              ("dwKeyStates",DWORD),
              ("PerformanceCount",c_uint64),
              ("ButtonChangeType",c_int)
              ]

class POINTER_TOUCH_INFO(Structure):
    _fields_=[("pointerInfo",POINTER_INFO),
              ("touchFlags",c_int),
              ("touchMask",c_int),
              ("rcContact", RECT),
              ("rcContactRaw",RECT),
              ("orientation", c_uint32),
              ("pressure", c_uint32)]

#Initialize Pointer and Touch info

pointerInfo=POINTER_INFO(pointerType=PT_TOUCH,
                         pointerId=0,
                         ptPixelLocation=POINT(950,540))

touchInfo=POINTER_TOUCH_INFO(pointerInfo=pointerInfo,
                             touchFlags=TOUCH_FLAG_NONE,
                             touchMask=TOUCH_MASK_ALL,
                             rcContact=RECT(pointerInfo.ptPixelLocation.x-5,
                                  pointerInfo.ptPixelLocation.y-5,
                                  pointerInfo.ptPixelLocation.x+5,
                                  pointerInfo.ptPixelLocation.y+5),
                             orientation=90,
                             pressure=32000)

def makeTouch(x,y,fingerRadius):
    touchInfo.pointerInfo.ptPixelLocation.x=x
    touchInfo.pointerInfo.ptPixelLocation.y=y

    touchInfo.rcContact.left=x-fingerRadius
    touchInfo.rcContact.right=x+fingerRadius
    touchInfo.rcContact.top=y-fingerRadius
    touchInfo.rcContact.bottom=y+fingerRadius

    #Initialize Touch Injection
    if (windll.user32.InitializeTouchInjection(1,1) != 0):
        print "Initialized Touch Injection"

    #Press Down
    touchInfo.pointerInfo.pointerFlags=(POINTER_FLAG_DOWN|
                                        POINTER_FLAG_INRANGE|
                                        POINTER_FLAG_INCONTACT)

    if (windll.user32.InjectTouchInput(1, byref(touchInfo))==0):
        print "Failed with Error: "+ FormatError()

    else:
        print "Touch Down Succeeded!"

    #Pull Up
    touchInfo.pointerInfo.pointerFlags=POINTER_FLAG_UP

    if (windll.user32.InjectTouchInput(1,byref(touchInfo))==0):
        print "Failed with Error: "+FormatError()

    else:
        print "Pull Up Succeeded!"

    return

#Ex:
#makeTouch(950,270,5) 
```

# jsf - 如何设置 p:dataTable 的默认过滤器（精确）？

> ID：15878490
> 
> 赞同：0
> 
> 时间：2013-04-08T11:59:10.127
> 
> 标签：jsf, primefaces, filter

我的数据表中有一个使用 Primefaces 的精确过滤器功能的列。

我需要在**foo1**上设置数据表的默认过滤器，但它是在**all**上设置的。

```
<p:column filterMatchMode="exact"
                    filterOptions="#{bean.filterFooOptions}"
                    filterBy="#{row.foo}">
                    <f:facet name="header">
                        <h:outputText value="Foo" />
                    </f:facet>
                    <h:outputText value="#{row.foos}" />
                </p:column> 
```

以及在我的 bean 中获取过滤器选项的方法：

```
 public SelectItem[] getFilterFooOptions() {
        if (items == null) {
            items =
                    new SelectItem[] { new SelectItem(Foo.foo1.name()),
                            new SelectItem(Foo.foo2.name()), new SelectItem("", "all")};
        }
        return items;

    } 
```

# r - 在 R 中使 for 循环更快而不会并行化

> ID：15878492
> 
> 赞同：0
> 
> 时间：2013-04-08T11:59:12.533
> 
> 标签：r, loops, optimization

我有以下非常简单的循环操作，我需要从 1 循环到 50,000。虽然循环很简单，但它在 R 中非常慢，所以我想知道是否有任何操作可以使它更快，但我不喜欢并行解决方案，因为我的计算机只有 2 个处理器，

```
full3 = fullData
for(i in 1:dim(fullData)[1]) {
  full3[i,923] <- sum(as.numeric(full3[i, 879:912]))
  print(i)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:04:53.350

您应该为此使用矢量化`rowSums`操作：

```
full3 <- fullData
# a[, b] selects the entire column 'b' from data.frame 'a'
full3[, 923] <- rowSums(as.numeric(full3[, 879:912])) 
```

应该这样做。`rowSums`，好吧，计算 subset'd 的每一行的总和`data.frame` `full3[, 879:912]`。此结果存储回第 923 列

# c# - NHibernate 异常：事务未连接，或已断开连接

> ID：15878493
> 
> 赞同：13
> 
> 时间：2013-04-08T11:59:16.077
> 
> 标签：c#, asp.net-mvc-3, nhibernate

在我们的开发环境中，所有 ASP.NET 应用程序都可以正常工作。但是，当我在测试机器上部署站点时，在某些页面上出现此异常：

```
NHibernate.TransactionException: Transaction not connected, or was disconnected
   at NHibernate.Transaction.AdoTransaction.CheckNotZombied() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Transaction\AdoTransaction.cs:line 406
   at NHibernate.Transaction.AdoTransaction.Rollback() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Transaction\AdoTransaction.cs:line 240 
```

我不知道如何解决这个问题。唯一的区别是数据库版本：开发：10.0.5500（2008 R2，SP1，Express）测试：10.0.5500（2008，SP3）

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-03-13T23:34:14.167

这是一个评论，但我也有同样的问题。

当触发器导致数据库级异常时，可能会发生此错误。这将导致事务回滚，因此出现异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T12:43:20.990

您的每请求会话模式实现存在问题。ASP.NET 是多线程的，并且会话在线程终止而不是请求结束时关闭。有很多关于如何管理每个请求的会话的[示例，NHibernate 有一个内置的](http://lozanotek.com/blog/archive/2009/02/17/Contextual_Sessions_with_NHibernate_ndash_Part_1.aspx)[NHibernate.Context.WebSessionContext](http://nhforge.org/wikis/reference2-0en/context-sessions.aspx)但我更喜欢使用依赖注入框架，例如[Ninject](http://www.ninject.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T17:13:42.093

另一个问题可能是用户安全（又是数据库级别的异常）。在我的情况下，潜在的数据库问题是：

```
The server principal "AppUser" is not able to access the database "AppDB" under the current security context. 
```

# c# - hashset、dictionary、arraylist：只见树木不见森林

> ID：15878497
> 
> 赞同：8
> 
> 时间：2013-04-08T11:59:32.203
> 
> 标签：c#, loops, dictionary, arraylist, hashset

关于：我的数学程序将有**大量**的项目进行**迭代**。它主要由一个**项目**和一个**指向**另一个项目的指针（（int）项目，（int）指针）组成，类似于键值对。但是，每个项目都有自己的其他几个**属性**，如下所示：

（项目，指针），（属性，属性，属性，...）

项目、指针和属性将经常添加。

搜索这个网站和其他网站让我对程序使用什么集合更加一无所知。

目前，在 vcskicks.com 上找到的**Dictionary**解决方案似乎效果最好：

```
Dictionary<Dictionary<int,int>,Dictionary<int,int> nestedDictionary = 
    new Dictionary<Dictionary<int,int>,Dictionary<int,int> nestedDictionary(); 
```

或用简单的语言：

```
Dictionary<Dictionary<item, pointer>, 
           Dictionary<attribute,attribute, ...> nestedDictionary =      
    Dictionary<Dictionary<item, pointer>, 
               Dictionary<attribute,attribute, ...>(); 
```

请注意，属性的数量不是预定义的，它的长度会有所不同。由于性能开销，此时我也不愿意使用对象。

**哈希集**似乎不适合，因为会存在重复项，但是它们将具有不同的属性。**或者**一个哈希集可以有重复的项目，但只是没有重复的哈希键？似乎有些混乱。

根据一些以下哈希集将不会计算：

```
11011, 0001
11011, 0011 
```

根据其他人的说法，它会，因为它会有不同的哈希键。这让我很困惑。

**我的问题：**

有模糊的风险：什么是最好的收集类型？如有必要，我很乐意为故事添加更多内容。

**编辑**：

**巨人意味着**：潜在的数百万件物品。所有项目都会有一个指针和属性。 **一般用途**将**搜索**特定项目，检索指针，获取下一个指针的项目，直到没有指针为止。同时收集每个项目的所有属性。将定期添加，仅偶尔删除。 **指针**：指针是它所指的项目的索引。如果您有 2 项，并且第一项链接到第二项，则第一项将具有第二项的索引作为指针。 **最佳**定义为内存使用率和速度。最后，所有找到的项目将相互比较。 **例子：**

```
[Item , pointer] [attribute, attribute, ...]
[11011,    1001] [ 1101,        1111 ]
[10001,    1000] [ 1110,        0101 ]
[11111,    0010] [ 1111,        1110 ]
[11011,    0001] [ 0010,        1010 ] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:03:52.153

所以，基本上看起来你需要保留一个对象的集合，每个对象都具有以下属性：

*   引用逻辑*下*一项
*   属性

所以一个项目看起来像这样（只是一个简单的例子......不完全是保持所有内容公开的最佳实践，但在你的情况下你不会介意）：

```
public struct MyItem
{
   public Dictionary<String, String> attributes;
   public MyItem next;
} 
```

那么你所需要的就是保留一个列表：

```
List<MyItem> myList; 
```

当你想添加一些东西时，很容易：

```
MyItem item1 = new MyItem();
item1.attributes["name"] = "Joe";
item1.next = null; // this is the default behaviour... just illustrating here
myList.Add(item1);

MyItem item2 = new MyItem();
item2.attributes["name"] = "Mary";
item2.next = item1;
myList.Add(item2); 
```

然后，当您要遍历时，只需跟随下一步即可。

```
MyItem item = myList[0];
while (item != NULL)
{
    Console.WriteLine(item["name"]);
    item = item.next;
} 
```

希望这可以帮助。

# jquery - 将 HTML 附加到最初未加载的元素

> ID：15878498
> 
> 赞同：0
> 
> 时间：2013-04-08T11:59:38.103
> 
> 标签：jquery, google-maps

我在我的网站上使用谷歌地图。

现在，当在网站上显示地图时，您可以点击不同的 Pins（位置）。

单击某个位置后，它会显示一个弹出框（谷歌地图气泡）。现在我想在**Address**字段旁边添加其他内容，而我能做到的唯一方法是使用 jQuery。

这是弹出气泡的html：

```
<div class="google-map-placeholder">
 <div class="bubble-content">
   <h4>Address: </h4>
   <p class="custom-bubble-text">Lat and long...</p>
   <p class="custom-bubble-text">PE Offices</p>
 </div>
</div> 
```

我想如何将自定义文本添加到地址：元素

jQuery：

```
var x = $('div.google-map-placeholder').find('div.bubble-content p.custom-bubble-text').html();
            if(x == 'NY Offices'){
                $('div.google-map-placeholder').find('div.bubble-content h4').html('Address: My custom address');
            } 
```

但它不起作用（不附加我的html）......

我想我需要在单击地图标记图标时添加一个事件侦听器，但我该怎么做呢？

![谷歌地图图像](https://i.stack.imgur.com/DTzcb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:07.663

[http://api.jquery.com/click/](http://api.jquery.com/click/)

将允许您将事件侦听器添加到由 jQuery 对象表示的 DOM 节点。

```
$("#target").click(function() {
  alert("Handler for .click() called.");
}); 
```

我觉得您可能会遇到您要针对的 dom 的问题（在弹出窗口内），以便在 onClick 处理程序内部进行修改，甚至在 onClick 被触发时还没有为您准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:15:55.300

我认为最好的方法是使用来自谷歌地图的自定义信息框插件 infobox.js

请参阅以下链接：

[http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/examples.html) [自定义谷歌地图信息气泡](https://stackoverflow.com/questions/4330303/customizing-google-maps-information-bubble)

希望这可以帮助

# jquery-mobile - 如何缩小我的网页以适应移动设备

> ID：15878500
> 
> 赞同：2
> 
> 时间：2013-04-08T11:59:48.160
> 
> 标签：jquery-mobile, webforms, viewport, meta, mobile-application

我正在使用 asp.net 网络表单来开发移动应用程序我的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MobileApplication.Default" %>

<!DOCTYPE html>

<html>
<head id="Head1" runat="server">
<title>Mobile WebForms</title>
<meta charset="urf-8" />
<meta name="viewport" content="width=device-width" />
<style type="text/css">

    body
    {
        font-family:Verdana;
        height: 119px;
    }
    label
    {
        font-size:11pt;
        font-family: Arial, Helvetica, sans-serif;
        display:block;
        margin-right:50px;
    }
    input[type=text]
    {
        width:200px;
        height:15px;
        margin-left:15px
    }
    .content
    {
        width:350px;
        margin:0px auto;
    }
    header
    {
        width:350px;
        text-align:center;
        font-size:15px;
        font-weight:bold;
    }
    .button
    {
        width:350px;
        text-align:center;
    }
</style>   
</head>
<body>
<form id="form1" runat="server">
<div data-role="content">
    <asp:Table ID="Table1" runat="server" GridLines="Both" Height="107px" Width="210px">
        <asp:TableRow runat="server">
            <asp:TableCell runat="server">
                <asp:Label ID="Label1" runat="server" Text="Request ID"></asp:Label> 
                <asp:TextBox ID="TextBox1" runat="server" Text="9015/DOM/NDA/0711"></asp:TextBox>
            </asp:TableCell>
            <asp:TableCell runat="server">
                <asp:Label ID="Label2" runat="server" Text="Request Type" ></asp:Label>
                <asp:TextBox ID="TextBox2" runat="server" Text="Domestic Travel - Self (Employee)"></asp:TextBox>
            </asp:TableCell>
        </asp:TableRow>
        <asp:TableRow runat="server">
            <asp:TableCell runat="server">
                <asp:Label ID="Label3" runat="server" Text="Request Status"></asp:Label>
                <asp:TextBox ID="TextBox3" runat="server" Text="Pending With L1 Manager"></asp:TextBox>
            </asp:TableCell>
            <asp:TableCell runat="server">
                <asp:Label ID="Label4" runat="server" Text="Label"></asp:Label>
                <asp:TextBox ID="TextBox4" runat="server"></asp:TextBox>
            </asp:TableCell>
        </asp:TableRow>
    </asp:Table>
    </div>

</form>
</body>
</html> 
```

我在模拟器中的输出低于输出，但我希望我的页面缩小并适合移动显示。 ![在此处输入图像描述](https://i.stack.imgur.com/vvE3D.png) 我的网页输出是： ![在此处输入图像描述](https://i.stack.imgur.com/V0Ru5.jpg)

此输出应缩小并适合移动设备。我已使用视口标签来执行此操作，但没有得到所需的输出。请帮我完成这项任务。iquery mobile 对这样做有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:24:29.487

您可以使用多种组合，我建议以下一种，

1) 使用这个视口标签，`<meta name="viewport" content = "width =device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no"/>` 2) 使用流体布局，twitter bootstrap 是一个很好的库

# python - 获取python对象以在创建时返回多个值，包括self

> ID：15878501
> 
> 赞同：1
> 
> 时间：2013-04-08T11:59:56.567
> 
> 标签：python, python-2.7

我正在解析一个文本文件并在文本文件中的每行创建一个对象。在解析每一行时，我创建一个时间戳，我希望将其与对象本身一起返回给调用代码。

我意识到并且目前正在通过将时间戳存储在对象本身中并在创建对象后访问它来实现它，但我发现如果我可以在创建对象时返回 self 和时间戳对我来说更方便。

在我有一个关于如何做到这一点的建议下，但我想知道这是否被认为可以，如果不是，我该如何正确地做到这一点？

```
class Foo():
    def __init__(self, infile):
        self.time_stamp = foobar(infile)
        self.line = barfoo(infile)

        return (self, self.time_stamp)

(obj, time_stamp) = Foo() 
```

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:01:57.860

你[不能返回任何东西，只能`None`从`__init__`](http://docs.python.org/2/reference/datamodel.html#object.__init__)：

> 作为对构造函数的特殊约束，不能返回任何值；这样做会导致在运行时引发 TypeError。

使用工厂函数：

```
def create_foo(infile):
    foo = Foo(infile)
    return foo, foo.time_stamp

...

obj, ts = create_foo(a_file) 
```

或[静态方法](http://docs.python.org/2/library/functions.html#staticmethod)

```
class Foo(object):
    ...
    @staticmethod:
    def create(infile):
        obj = Foo(infile)

        return obj, obj.time_stamp

...

obj, ts = Foo.create(a_file) 
```

或者，如果您需要它在子类上正常工作，一个[类方法](http://docs.python.org/2/library/functions.html#classmethod)

```
class Foo(object):
    ...
    @classmethod
    def create(cls, infile):
        obj = cls(infile)

        return obj, obj.time_stamp

...

obj, ts = Foo.create(a_file) 
```

当然，这是最简单的方法：

```
class Foo(object):
    def __init__(self, infile):
        self.time_stamp = ...

obj = Foo(a_file)
ts = obj.time_stamp 
```

我不认为摆脱这条额外的生产线保证设计一个工厂。

# c++ - QWidget如何在Qt下发出objectNameChanged信号？

> ID：15878504
> 
> 赞同：0
> 
> 时间：2013-04-08T12:00:10.660
> 
> 标签：c++, qt, signals

我有这个代码：

```
QWidget *w = qobject_cast<QWidget *>(d->m_object); 
w->setObjectName("test"); 
```

它不能发出 objectNameChanged 信号，所以我想手动发出信号， `w->objectNameChanged("test",QWidget::QPrivateSignal));`但报错`QWidget::QPrivateSignal is private)`。如何发出 QWidget::objectNameChanged() 信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-03T13:26:40.013

从文档（5.7）：

> 注意：这是一个私人信号。它可以用于信号连接，但不能由用户发出。

无论如何，应该发出信号，当您更改名称时，应该在其他地方出现错误。

# php - 使用 jquery 的选项卡加载了 2 次的简单 codeigniter 视图

> ID：15878511
> 
> 赞同：0
> 
> 时间：2013-04-08T12:00:46.350
> 
> 标签：php, jquery, codeigniter

我有一个带有 jquery 选项卡的标题（视图），它将成为我项目的“模板”。但是，我的标题和内容总是显示两次。这是屏幕截图（取自您在下面看到的控制器）：

![在此处输入图像描述](https://i.stack.imgur.com/mw4Kh.png)

这是我的标题的观点：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Johanes Indra</title>
<link rel="stylesheet" href="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

<script type="text/javascript" language="javascript">
  $(function() {
    $( "#tabs" ).tabs();
  });
</script>

<div id="header"><h1>HEADER</h1></div>
    <div id="tabs">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Gallery</a></li>
            <li><a href="#">About Me</a></li>
            <li><a href="#">All About Love</a></li>
        </ul>
    </div>
</head> 
```

这是内容的视图（**在标题下方**）：

```
<body>
<div id="content">
    <?php echo $content; ?>
</div> 
```

这是加载标题和内容的控制器：

```
class Home extends CI_Controller {
public function __construct() {
    parent::__construct();  
    $this->load->model('content_m');
}

public function index() {
    $get_content = $this->content_m->get_content('mscontent');

    foreach($get_content as $temp)
        $data['content'] = $temp->content;

    $this->load->view('header_v');
    $this->load->view('home_v', $data);
} 
```

我的错误在哪里？感谢：D

**编辑 ：**

这是我查看页面源代码时生成的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Johanes Indra</title>
<link rel="stylesheet" href="http://localhost/ci_buku_indra/jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
<script language="javascript" type="text/javascript" src="http://localhost/ci_buku_indra/jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
<script language="javascript" type="text/javascript" src="http://localhost/ci_buku_indra/jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

<script type="text/javascript" language="javascript">
  $(function() {
    $( "#tabs" ).tabs();
  });
</script>

<div id="header"><h1>HEADER</h1></div>
    <div id="tabs">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Gallery</a></li>
            <li><a href="#">About Me</a></li>
            <li><a href="#">All About Love</a></li>
        </ul>
    </div>
</head>
<body>
    <div id="content">
        content dari DB </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:53:52.250

将您的 divs(header,tabs) 放在 body 标记中并关闭所有 div。我认为它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:46:58.307

参考[jquery ui](http://jqueryui.com/tabs/)

同样在您的代码中，您已将`div`with id="header" 放在 head 标记内，这是不好的做法您的视图 header_v.php 应该包含

```
<!doctype html> 
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Tabs - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#tabs" ).tabs();
});
</script>
</head>
<body>
<div id="tabs">
 <ul>
<li><a href="#tabs-1">Nunc tincidunt</a></li>
<li><a href="#tabs-2">Proin dolor</a></li>
<li><a href="#tabs-3">Aenean lacinia</a></li>
 </ul> 
```

您的 home_v.php 或您`$content`应该有这个与您在锚点`html`中输入的相关 div id`href`

```
 <div id="tabs-1">
 <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
  </div>
  <div id="tabs-2">
  <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
  </div>
  <div id="tabs-3">
  <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>

<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.     </p>
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:31:24.460

您在 javascript 代码中使用选项卡，它将返回一个包含多个面板的单个内容区域，每个面板与列表中的标题相关联。

# php - 在 Javascript 中显示带引号和换行符的 PHP 字符串（警告）

> ID：15878513
> 
> 赞同：0
> 
> 时间：2013-04-08T12:00:59.923
> 
> 标签：php, addslashes

PHP 函数addlashes 允许我转义单引号、换行符等。问题是我不能在警告框中创建一个实际的新行。我尝试用双反斜杠 n 替换反斜杠*n* *，*但它会在我的警报框中显示字面意思“\n”。

 *```
<?php $this->info = "Hello ' world\nNew line"; ?>

<script type="text/javascript">
    $(document).ready(function() {
        alert('<?php echo addslashes($this->info); ?>');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:01:34.540

用于[`json_encode`](http://php.net/json_encode)创建有效的 JS 字符串：

```
<script>
    alert(<?php echo json_encode($this->info); ?>);
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:06:14.813

试试这个

```
 <script>
    var myvar = <?php echo json_encode($this->info); ?>;
    alert(myvar);
  </script> 
```*

# java - Hibernate IN 子句显示错误

> ID：15878522
> 
> 赞同：0
> 
> 时间：2013-04-08T12:01:18.773
> 
> 标签：java, hibernate, hql, hibernate-mapping

我必须在 IN 子句中添加一个字符串数组。

我的休眠查询看起来像这样，

```
 Query q = 
                    session.createQuery("from CsePrcsngGroup where CSE_SID=? and CSE_GROUP IN(:cseGrpLists)");
                q.setParameter(0, cseSid);
                q.setParameterList("cseGrpLists", cseGrpLists);
                return q.list(); 
```

其中 CsePrcsngGroup 是我的实体类。CSE_SID 和 CSE_GROUP 是字段名称，cseGrpLists 是字符串数组。

我在执行时得到了这个例外，

```
Caused by: java.sql.SQLException: ORA-00942: table or view does not exist

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:138)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:316)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:282)
    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:639)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:185)
    at oracle.jdbc.driver.T4CPreparedStatement.execute_for_describe(T4CPreparedStatement.java:503)
    at oracle.jdbc.driver.OracleStatement.execute_maybe_describe(OracleStatement.java:1029)
    at oracle.jdbc.driver.T4CPreparedStatement.execute_maybe_describe(T4CPreparedStatement.java:535)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1126)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3001)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3043)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1849)
    at org.hibernate.loader.Loader.doQuery(Loader.java:718)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    ... 55 more

Wrapped exception:
org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2297) 
```

有什么建议么？我尝试使用实体名称代替 DB 列名称，但得到相同的错误。原因是：java.sql.SQLException：ORA-00942：表或视图不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:08:53.993

在查询中使用属性名称而不是列名称。

```
Query q = session.createQuery("from CsePrcsngGroup where property1=? and property2 IN(:cseGrpLists)"); 
```

喜欢而不是`'CSE_SID'`使用映射到此列的属性名称`(ex: id)`

# c# - 我应该在数据库中还是在业务层中进行划分（以供使用）？

> ID：15878525
> 
> 赞同：0
> 
> 时间：2013-04-08T12:01:32.480
> 
> 标签：c#, sql-server

基本上，我从数据库中提取了一个包含两个数字的数组，我想获得一个利用率百分比。

逻辑告诉我我想在业务层中执行此操作，但是我必须遍历数组来处理它。

我可以很容易地投入查询

```
@value1 / @value2 as utilization 
```

什么是最佳实践？什么更有效率？

# asp.net - 布局问题 CSS

> ID：15878527
> 
> 赞同：0
> 
> 时间：2013-04-08T12:01:50.793
> 
> 标签：asp.net, html, asp.net-mvc, css

我是网络开发的新手，想遵守该领域的“标准”。我已经了解 table 标签用于表格数据，而 div 标签用于布局（在 i-net 上进行了一些激烈的辩论之后）。

我正在尝试构建视图的布局，并且正在尽力使用 div。但是如何用 div 准确地分隔元素呢？我曾经在几秒钟内使用 table 标记执行此操作。

这是我现在的布局：

![搜索视图布局](https://lh4.googleusercontent.com/-3lo6HXOucBM/UWKvhE0YCaI/AAAAAAAAANA/KuP2etycQTE/s898/searchForm.png)

如您所见，它的排列不整齐。

这是我的剃刀代码：

```
@model WebHIS___ArtsPortaalWeb.Models.SearchPatientModel
@using (Html.BeginForm()) {
    <div>
        <div class="editor-label">
            Voornaam:</div>
       <div class="editor-field">@Html.TextBoxFor(model => model.FirstName)</div>
        <div class="editor-label">
            Achternaam:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.LastName)</div>
        <div class="editor-label">
            GeboorteDatum:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.DateOfBirth, new {@class = "datafield", type = "date" })</div>
        <div class="editor-label">
            BSN:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.BSN)</div>
        <div class="editor-label">
        Straat:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.Street)</div>
        <div class="editor-label">
            Huisnummer:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.HouseNumber)</div>
        <div class="editor-label">
            Postcode:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.Zipcode)</div>
        <div class="editor-label">
            Plaats:</div>
        <div class="editor-field">@Html.TextBoxFor(model => model.City)</div>
        <input type="submit" value="Sumbit" />
    </div>
} 
```

我的 CSS：

```
.display-label, 
.editor-label {
    margin: 1em 0 0 0;
    float: left; 
}

.display-field, 
.editor-field {
    margin: 0.5em 0 0 0;
    float: left;
} 
```

预先感谢您的帮助。

**更新：**显然我的问题并不清楚。我希望我的布局看起来像图像，但文本框整齐排列。所以“voornaam”的文本框与“straat”的文本框完全一致。标签可以与它们对应的文本框对齐。我希望我能更清楚地表达我的愿望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:09:28.713

为了获得最佳布局，请放入`<table>`

```
<table>
    <tr>
        <td>Voornaam:
        </td>
        <td>Your text box.....
        </td>
        <td>Achternaam:
        </td>
        <td>Your text box.....
        </td>
        <td>thirdname:
        </td>
        <td>Your text box.....
        </td>
    </tr>
    <tr>
        <td>fourthname:
        </td>
        <td>Your text box.....
        </td>
        <td>fifthname:
        </td>
        <td>Your text box.....
        </td>
        <td>sixthname:
        </td>
        <td>Your text box.....
        </td>
    </tr>
</table> 
```

或者您可以按照 Blowsie 的说明使用标签和文本框的显示属性来“阻止”。

```
display:block 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:10:26.470

您可以在 CSS 类中添加宽度参数

`.editor-label { margin: 1em 0 0 0; float: left; width: 150px; }`

对你的输入类做同样的事情，你会得到“表格”的外观。
如果将文本向右对齐，它会看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:03:10.140

**你需要要么...**

将您的标签和输入设置为`display:block` *这种方法最符合语义*

**或者**

通过使用在每个输入后开始一个新行`<br/>`

**或者**

`div`用with包裹标签和字段`display:block`。 *这样做可以让您`min-width`在您的上设置 a`label`并产生表格布局的效果*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:30:34.163

首先，尝试使用`<label>`标签元素，例如：

```
<label for="[input_ID]">Voornaam></label><input ... /> 
```

你想要达到什么样的外观？您没有明确说明您想要实现什么样的布局。您希望所有标签的大小相同吗？如果您希望标签 + 输入组合具有相同的大小，您应该像这样编写 Razor 代码：

```
<div class="editor-field">
    <label>Voornaam:</label>
    @Html.TextBoxFor(model => model.FirstName)
</div> 
```

...使用以下CSS：

```
.editor-field {
    box-sizing: border-box;
    float: left;
    overflow: hidden;
    width: 25%;
}
.editor-field label, .editor-field input {
    float: left;
    display: block;
}
.editor-field label {
    width: (set fixed width here);
} 
```

[编辑]：经过 OP 的一些澄清后，我修改了代码。OP 希望标签与输入元素内联。

# ios - 对数组中的日期进行排序？

> ID：15878531
> 
> 赞同：0
> 
> 时间：2013-04-08T12:01:53.940
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

在我的应用程序中，我有一个字符串数组，表示格式为 MM/dd/YYYY 的日期

下面是我用来排序这个数组的代码

```
NSDateFormatter *formatter =[[NSDateFormatter alloc]init];

[formatter setDateFormat:@"MM/dd/YYYY"];
NSLog(@" arr %@",arr);
[arr sortUsingComparator:^NSComparisonResult(id obj1, id obj2)
 {

     NSDate *date1=[formatter dateFromString:obj1];
     NSDate *date2=[formatter dateFromString:obj2];
     return [date1 compare:date2];
 }];
NSLog(@" arr %@",arr); 
```

下面是 nslog 的输出

```
2013-04-08 17:23:48.112 SEEMR[2792:c07]  arr (
    "02/18/2013",
    "02/16/2013",
    "02/14/2013",
    "01/16/2013",
    "02/13/2013",
    "03/16/2013"
)
2013-04-08 17:24:07.662 SEEMR[2792:c07]  arr (
    "02/18/2013",
    "02/16/2013",
    "02/14/2013",
    "01/16/2013",
    "02/13/2013",
    "03/16/2013"
) 
```

但它没有按预期排序，所以请帮助我的同行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:06:57.160

使用时`NSDateFormatter`，请始终测试您的格式字符串是否正确。你的不是。应该是`MM/dd/yyyy`（情况很重要）。

换句话说，由于您的格式化程序工作不正确，所有`dateFromString:`返回`nil`并且您总是`nil`与 a比较`nil`，后者返回`0`。

将您的日期保存为`NSDate`实例将使您的生活更轻松。一般情况下，最好将日期转换为`NSString`仅当您将其呈现给用户或将其发送到其他应用程序（例如 Web 服务）时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:06:06.980

你可以这样做：

```
NSSortDescriptor* sortByDate = [NSSortDescriptor sortDescriptorWithKey:@"date property name" ascending:YES];
[mutableArray sortUsingDescriptors:[NSArray arrayWithObject:sortByDate]]; 
```

希望能帮助到你！

# android - Android + 偏好

> ID：15878533
> 
> 赞同：1
> 
> 时间：2013-04-08T12:01:59.480
> 
> 标签：android

我有一个`preferences.xml`和`Settings.java`...在`onCreate`我想设置摘要的方法中`preferences`...有人可以指导我什么是最好的方法吗？？？我所知道的是，一种做法是

```
activityName_text = (EditTextPreference) findPreference("activityName");
    activityName_text.setSummary(activityName_text.getText()); 
```

但是对于每个键，如果我遵循上述模式，我觉得代码会很糟糕......

**首选项.xml**：

```
 <PreferenceScreen android:title="Header" >
        <EditTextPreference
            android:defaultValue="TestRequest"
            android:key="activityName"
            android:title="activityName" />
        <EditTextPreference
            android:defaultValue="Request"
            android:key="msgName"
            android:title="msgName" />

        <ListPreference
            android:defaultValue="0"
            android:entries="@array/msg_type"
            android:entryValues="@array/msg_type_values"
            android:key="msgType"
            android:title="msgType" />

        <EditTextPreference
            android:defaultValue="AA"
            android:key="senderURI"
            android:title="senderURI" />
        <EditTextPreference
            android:defaultValue="BB"
            android:key="destinationURI"
            android:title="destinationURI" />
        <EditTextPreference
            android:defaultValue="AA"
            android:key="replyToURI"
            android:title="replyToURI" />
        <EditTextPreference
            android:defaultValue="BB"
            android:key="originatorURI"
            android:title="originatorURI" />
        <EditTextPreference
            android:defaultValue="FF"
            android:key="failureReplytoURI"
            android:title="failureReplytoURI" />
        <EditTextPreference
            android:defaultValue="AA"
            android:key="correlationId"
            android:title="correlationId" />
        <EditTextPreference
            android:defaultValue="HH"
            android:key="security"
            android:title="security" />
        <EditTextPreference
            android:defaultValue="GG"
            android:key="securityType"
            android:title="securityType" />
        <EditTextPreference
            android:defaultValue="HH"
            android:key="priority"
            android:title="priority" />

        <ListPreference
            android:defaultValue="0"
            android:entries="@array/communicationPattern"
            android:entryValues="@array/communicationPatternValues"
            android:key="communicationPattern"
            android:title="communicationPattern" />
        <ListPreference
            android:defaultValue="0"
            android:entries="@array/communicationStyle"
            android:entryValues="@array/communicationStyleValues"
            android:key="communicationStyle"
            android:title="communicationStyle" />

        <EditTextPreference
            android:defaultValue="100"
            android:digits="0123456789"
            android:key="requestedBatchSize"
            android:title="requestedBatchSize" />
        <!-- radhika-number format -->
        <EditTextPreference
            android:defaultValue="78"
            android:digits="0123456789"
            android:key="batchSequenceNumber"
            android:title="batchSequenceNumber" />

        <ListPreference
            android:defaultValue="0"
            android:entries="@array/batchSequenceEndOfReply"
            android:entryValues="@array/batchSequenceEndOfReplyValues"
            android:key="batchSequenceEndOfReply"
            android:title="batchSequenceEndOfReply" />

        <EditTextPreference
            android:defaultValue="HH"
            android:key="iteratorReferenceURI"
            android:title="iteratorReferenceURI" />
        <EditTextPreference
            android:defaultValue="KK"
            android:key="fileLocationURI"
            android:title="fileLocationURI" />
        <EditTextPreference
            android:defaultValue="10/10/2010"
            android:key="timestamp"
            android:title="timestamp" />
        <EditTextPreference
            android:defaultValue="kkk"
            android:key="vendorExtensions"
            android:title="vendorExtensions" />

        <PreferenceCategory
            android:key="activityStatus"
            android:title="activityStatus" >
            <ListPreference
                android:defaultValue="0"
                android:entries="@array/activityStatusType"
                android:entryValues="@array/activityStatusTypeValues"
                android:key="actStatus"
                android:title="activityStatus" />

            <EditTextPreference
                android:defaultValue="AA"
                android:key="qualifier"
                android:title="qualifier" />
        </PreferenceCategory>

        <PreferenceCategory
            android:key="msgSpecificProperties"
            android:title="msgSpecificProperties" >
            <EditTextPreference
                android:defaultValue="multiple values"
                android:key="propName"
                android:title="propName" />
            <EditTextPreference
                android:defaultValue="multiple values"
                android:key="propValue"
                android:title="propValue" />
        </PreferenceCategory>
        <PreferenceCategory
            android:key="compressionType"
            android:title="compressionType" >
            <EditTextPreference
                android:defaultValue="kkk"
                android:key="compressionTypeAttr"
                android:title="extension" />

            <ListPreference
                android:defaultValue="0"
                android:entries="@array/compressionType"
                android:entryValues="@array/compressionTypeValues"
                android:key="compressionTypeValue"
                android:title="value" />
        </PreferenceCategory>
        <PreferenceCategory
            android:key="packingType"
            android:title="packingType" >
            <EditTextPreference
                android:defaultValue="kkk"
                android:key="packingTypeAttr"
                android:title="extension" />

            <ListPreference
                android:defaultValue="0"
                android:entries="@array/packingType"
                android:entryValues="@array/packingTypeValues"
                android:key="packingTypeValue"
                android:title="value" />
        </PreferenceCategory>
    </PreferenceScreen>
    <PreferenceScreen android:title="Body" >
        <PreferenceScreen android:title="Managed Elements" >
            <PreferenceCategory
                android:key="mdOrMlsnRef"
                android:title="md Or Mlsn Ref" >
                <EditTextPreference
                    android:defaultValue="Name"
                    android:key="rdnName"
                    android:title="rdnName" />
                <EditTextPreference
                    android:defaultValue="Value"
                    android:key="rdnValue"
                    android:title="rdnValue" />
            </PreferenceCategory>
        </PreferenceScreen>
        <PreferenceScreen android:title="Active Alarms" >
        </PreferenceScreen>
    </PreferenceScreen>
</PreferenceScreen> 
```

**设置.java：**

```
package com.example.settingstest;

import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.Bundle;
import android.preference.EditTextPreference;
import android.preference.ListPreference;
import android.preference.Preference;
import android.preference.PreferenceActivity;

public class Settings extends PreferenceActivity implements OnSharedPreferenceChangeListener {

    EditTextPreference activityName_text;
    EditTextPreference msgName_text;

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        addPreferencesFromResource(R.xml.preferences);  
    }

    @Override
    protected void onResume() {
        super.onResume();       
        getPreferenceScreen().getSharedPreferences()
        .registerOnSharedPreferenceChangeListener(this);
    }

    @Override protected void onPause() {
        super.onPause();        
        getPreferenceScreen().getSharedPreferences()
        .unregisterOnSharedPreferenceChangeListener(this); 
    }   

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {

        Preference p = findPreference(key);
        if(p instanceof EditTextPreference)
        {           
            p.setSummary(sharedPreferences.getString(key, (String)p.getSummary()));
        }
        else if(p instanceof ListPreference)
        {           
            p.setSummary((String)((ListPreference) p).getEntry());
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:09:16.383

像这样使用它总是更好地从 prefrence.xml 设置摘要，我举一个例子，我正在使用这段代码并且它工作得很好

```
<PreferenceCategory
        android:key="dbh_social"
        android:title="We know you are social" >
    <Preference
            android:key="dbh_invite"
            android:summary="Invite your friends"
            android:title="Invite Facebook Friends" />
    <Preference
            android:key="dbh_wall_post"
            android:summary="Post about us on your Facebook wall "
            android:title="Post on Facebook Wall" />
    </PreferenceCategory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:31:28.030

您可以将所有键放入字符串数组资源并在 onCreate() 上对其进行迭代

```
final String[] keys = getResources().getStringArray(R.array.keys) ; // all your keys here
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

for (int i = 0; i < keys.length; i++) {
    setPreferenceSummary(p, keys[i]);
}

private void setPreferenceSummary(SharedPreferences sharedPreferences, String key) {
    final Preference p = findPreference(key);
    if(p instanceof EditTextPreference)
    {           
        p.setSummary(sharedPreferences.getString(key, (String)p.getSummary()));
    }
    else if(p instanceof ListPreference)
    {           
        p.setSummary((String)((ListPreference) p).getEntry());
    }
}

public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    setPreferenceSummary(sharedPreferences, key);
} 
```

# actionscript-3 - Flex：带有 rotateLabels 和 canDropLabels 的微型轴标签

> ID：15878535
> 
> 赞同：0
> 
> 时间：2013-04-08T12:02:05.097
> 
> 标签：actionscript-3, apache-flex, rotation, label

我正在为我的 CategoryAxis 使用带有 rotateLabels canDropLabels 的 AxisRenderer，并且标签看起来很微观。我可以很好地显示其他所有标签，但标签不会放大。我在下面提供了一个完整的例子。如果您需要 Ubuntu 字体，您可以[在此处下载](http://font.ubuntu.com/)或使用您自己的字体。CategoryAxis 应该每 3 个标签显示一次。

```
<?xml version="1.0"?>
<!-- Derrived From: http://livedocs.adobe.com/flex/3/html/help.html?content=charts_types_06.html -->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
                initialize="init(event)" width="90%" height="60%">
  <mx:Style>
    @namespace mx "http://www.adobe.com/2006/mxml";
    @font-face{
      src: url("../assets/Ubuntu.ttf");
      fontFamily:Ubuntu;
      embedAsCFF:false;
      advancedAntiAliasing:true;
    }
    mx|ColumnChart {
      fontFamily:Ubuntu;
    }
  </mx:Style>
  <mx:Script>
    <![CDATA[
      import mx.collections.ArrayCollection;
      import mx.events.FlexEvent;
      import mx.formatters.DateFormatter;

      public static const msPerSecond:uint = 1000;
      public static const msPerMinute:uint = msPerSecond * 60;
      public static const msPerHour:uint = msPerMinute * 60;
      public static const msPerDay:uint = msPerHour * 24;
      public static const msPerWeek:uint = msPerDay * 7;

      protected var formatter:DateFormatter;

      private var currIndex:uint = 0;

      [Bindable]
      public var expenses:ArrayCollection;

      protected function init(event:FlexEvent):void {
        formatter = new DateFormatter();
        formatter.formatString = 'MM/DD';
        generateExpenses();
      }

      private function generateExpenses():void {
        var now:Date = new Date(), d:Date;
        expenses = new ArrayCollection();
        // The next 60 days inclusive
        for (var i:uint = 0; i < 60; i++) {
          d = new Date();
          d.time = now.time+i*msPerDay;
          var r:uint = rand(100, 1000);
          var o:uint = rand(1, 100);
          expenses.addItem({
            'date':d,
            'profit':r,
            'expenses':rand(r-o, r+o)
          });
        }
      }

      public function categoryLabel(val:Object, prev:Object,
          axis:CategoryAxis, item:Object):String {
        var index:uint = currIndex;
        currIndex++;
        return showLabel(index, axis.dataProvider.length, 20) ?
          formatter.format(val) : '';
      }

      private function rand(lb:int, ub:int):Number {
        return Math.floor(Math.random() * (1 + ub - lb)) + lb;
      }

      private function showLabel(index:uint, max:uint, interval:uint):Boolean {
        return index % int(Math.ceil(max/interval)) == 0;
      }
    ]]>
  </mx:Script>

  <!-- Define custom colors for use as column fills. -->
  <mx:SolidColor id="sc1" color="0x00FF00" alpha=".3"/>
  <mx:SolidColor id="sc2" color="0xFF0000" alpha=".3"/>

  <!-- Define custom Strokes for the columns. -->
  <mx:SolidColorStroke id="s1" color="0x00FF00" weight="2"/>
  <mx:SolidColorStroke id="s2" color="0xFF0000" weight="2"/>

  <mx:Panel title="ColumnChart Control with Custom Column Styles"
    width="100%" height="100%">
    <mx:HBox width="100%" height="100%">
      <mx:Legend dataProvider="{myChart}"/>
      <mx:ColumnChart id="myChart" dataProvider="{expenses}" showDataTips="true"
          width="100%" height="100%" gutterBottom="50">
        <mx:horizontalAxis>
          <mx:CategoryAxis id="cAxis" dataProvider="{expenses}"
              categoryField="date" labelFunction="categoryLabel"/>
        </mx:horizontalAxis>
        <mx:horizontalAxisRenderers>
          <mx:AxisRenderer axis="{cAxis}" labelRotation="{-25}"
            canStagger="false" canDropLabels="true" fontSize="20"/>
        </mx:horizontalAxisRenderers>
        <mx:series>
          <mx:ColumnSeries 
            xField="date" 
            yField="profit"
            displayName="Profit"
            fill="{sc1}"
            stroke="{s1}"
            />
          <mx:ColumnSeries 
            xField="date" 
            yField="expenses"
            displayName="Expenses"
            fill="{sc2}"
            stroke="{s2}"
            />
        </mx:series>
        <mx:verticalAxis>
          <mx:LinearAxis id="lAxis"/>
        </mx:verticalAxis>
      </mx:ColumnChart>
    </mx:HBox>
  </mx:Panel>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:24:16.333

您好，请按如下方式修改您的代码：- CategoryAxis 将每 3 个标签显示一次。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               initialize="init(event)" >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <mx:SolidColor id="sc1" color="0x00FF00" alpha=".3"/>
        <mx:SolidColor id="sc2" color="0xFF0000" alpha=".3"/>

        <!-- Define custom Strokes for the columns. -->
        <mx:SolidColorStroke id="s1" color="0x00FF00" weight="2"/>
        <mx:SolidColorStroke id="s2" color="0xFF0000" weight="2"/>
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        @font-face{
            src: url("../assets/Ubuntu.ttf");
            fontFamily:Ubuntu;
            embedAsCFF:false;
            advancedAntiAliasing:true;
        }
        mx|ColumnChart {
            fontFamily:Ubuntu;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;
            import mx.formatters.DateFormatter;

            public static const msPerSecond:uint = 1000;
            public static const msPerMinute:uint = msPerSecond * 60;
            public static const msPerHour:uint = msPerMinute * 60;
            public static const msPerDay:uint = msPerHour * 24;
            public static const msPerWeek:uint = msPerDay * 7;

            protected var formatter:DateFormatter;

            private var currIndex:uint = 0;

            [Bindable]
            public var expenses:ArrayCollection;

            protected function init(event:FlexEvent):void {
                formatter = new DateFormatter();
                formatter.formatString = 'MM/DD';
                generateExpenses();
            }

            private var dataToShow:uint = 60;
            private function generateExpenses():void {
                var now:Date = new Date(), d:Date;
                expenses = new ArrayCollection();
                // The next 60 days inclusive
                for (var i:uint = 0; i < dataToShow; i++) {
                    d = new Date();
                    d.time = now.time+i*msPerDay;
                    var r:uint = rand(100, 1000);
                    var o:uint = rand(1, 100);
                    expenses.addItem({
                        'date':d,
                        'profit':r,
                        'expenses':rand(r-o, r+o)
                    });
                }
            }

            public function categoryLabel(val:Object, prev:Object,
                                          axis:CategoryAxis, item:Object):String {
                var index:uint = currIndex;
                currIndex++;
                return showLabel(index, axis.dataProvider.length, dataToShow) ?
                    formatter.format(val) : '';
            }

            private function rand(lb:int, ub:int):Number {
                return Math.floor(Math.random() * (1 + ub - lb)) + lb;
            }

            private function showLabel(index:uint, max:uint, interval:uint):Boolean {
                return index % int(Math.ceil(max/interval)) == 0;
            }
        ]]>
    </fx:Script>

    <mx:Panel title="ColumnChart Control with Custom Column Styles"
              width="100%" height="100%">
        <mx:HBox width="100%" height="100%">
            <mx:Legend dataProvider="{myChart}"/>
            <mx:ColumnChart id="myChart" dataProvider="{expenses}" showDataTips="true"
                            width="100%" height="100%" gutterBottom="50">
                <mx:horizontalAxis>
                    <mx:CategoryAxis id="cAxis" dataProvider="{expenses}"
                                     categoryField="date" labelFunction="categoryLabel"/>
                </mx:horizontalAxis>
                <mx:horizontalAxisRenderers>
                    <mx:AxisRenderer axis="{cAxis}" labelRotation="{-25}"
                                     canStagger="false" canDropLabels="true" />
                </mx:horizontalAxisRenderers>
                <mx:series>
                    <mx:ColumnSeries 
                        xField="date" 
                        yField="profit"
                        displayName="Profit"
                        fill="{sc1}"
                        stroke="{s1}"
                        />
                    <mx:ColumnSeries 
                        xField="date" 
                        yField="expenses"
                        displayName="Expenses"
                        fill="{sc2}"
                        stroke="{s2}"
                        />
                </mx:series>
                <mx:verticalAxis>
                    <mx:LinearAxis id="lAxis"/>
                </mx:verticalAxis>
            </mx:ColumnChart>
        </mx:HBox>
    </mx:Panel>
</s:Application> 
```

# jquery - 输入：文本警报父类？

> ID：15878538
> 
> 赞同：1
> 
> 时间：2013-04-08T12:02:09.647
> 
> 标签：jquery

我的悬停目标是“#Font-Size input:text”，在我的 HTML 代码中如下所示；

```
<div id="Font-Type">
    <input type="text" name="Size-Input" maxlength="2" value="12"> 
```

将鼠标悬停在我的文本输入字段上时，我希望 JQuery 打开一个警报框，其父 ID 为“#Font-Type”。我尝试了以下方法，但即使没有“.parent()”部分，警告框也只显示“OBJECT”；

```
var thisParent = $(this).parent();
alert(thisParent); 
```

有没有人有任何想法，因为我试图最小化我的页面所需的代码，因为我需要找到不止一个“输入：文本”的父级。

最好的祝福，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:44.593

尝试

```
alert($(thisParent).attr("id")); 
```

关于 jsfiddle 的示例：http: [//jsfiddle.net/jurgenstillaert/ySMLE/](http://jsfiddle.net/jurgenstillaert/ySMLE/)

thisParent 是一个 DOM 对象，您可以使用 $() 句柄来处理它的属性和事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:03:58.270

在您的情况下，您将对象传递给警报而不是一些字符串，即 id。你需要用来`attr()`显示`id`

```
alert(thisParent.attr("id")); 
```

或者

```
alert(thisParent[0].id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:04:22.683

尝试：

```
var thisParent = $(this).parent().attr('id');
alert(thisParent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:05:20.513

警报向您显示对象，因为`$(this)`包含 DOM 对象。

如果您想提醒 ID，请按如下方式使用它。

```
alert($(this).parent().attr('id')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:06:31.313

试试这个：

```
var thisParent = $(this).parent();
alert(thisParent.attr('id')); 
```

当你这样做时：

```
var thisParent = $(this).parent();
alert(thisParent); 
```

这为您提供了`parent`jQuery 对象，这就是为什么您会收到类似“OBJECT”的警报；

为了`id`在 jQuery 中获取，我们需要这样做：

```
$(element).attr('id'); 
```

这将返回 jQuery 对象`id`属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T12:06:32.123

试试下面的代码：还要确保您的 div 已正确关闭。

```
 alert(thisParent.attr("id")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T12:08:30.787

试试这个 ：

```
$(function(){
$("#txt").hover(function(){
    alert($(this).parent().attr("id"));    
 }); 
}); 
```

# bash - eval echo "$line" 忽略 '&' 符号

> ID：15878541
> 
> 赞同：0
> 
> 时间：2013-04-08T12:02:17.080
> 
> 标签：bash

我在脚本中使用以下部分来替换文件中的变量。

但是在运行这部分脚本之后，脚本会忽略“&”符号。这种行为有原因吗？

```
 while read line
   do
   eval  echo "$line" >> output.txt
   done < "input" 
```

我的输入文件如下所示

```
XXX.6.ID=LCPR_PROJ&
XXX.6.VALUE=$PMS&
XXX.6.CTID=58&
XXX.6.ECID=1032&
XXX.6.SEC= 
```

运行命令后，我的输出如下所示

```
XXX.6.ID=LCPR_PROJ
XXX.6.VALUE=132
XXX.6.CTID=58
XXX.6.ECID=1032
XXX.6.SEC= 
```

我需要更改命令中的某些内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:08:41.773

你不想用`eval`！

`eval`将单独评估表达式，并解释`&`字符。

该`&`字符告诉 bash 在子 shell 中运行命令。从[Bash 手册页](http://hacktux.com/man/bash)：

> 如果命令由控制运算符 & 终止，则 shell 在子 shell 的后台执行命令。

从脚本中删除它

```
while read line
  do
    echo "$line" >> output.txt
  done < "input" 
```

它会按预期工作。

如果您*确实*想通过 运行每一行`eval`，并且您知道自己在做什么，那么您将不得不手动检测并转义`&`s：

```
while read line; do
  line=${line/&/\\&}
  eval echo "$line";
done 
```

通过使用[bash 的字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)。

# jqgrid - jqGrid单击其他行时如何折叠行

> ID：15878544
> 
> 赞同：0
> 
> 时间：2013-04-08T12:02:27.183
> 
> 标签：jqgrid, row, edit, selected

在主网格中，当我单击一行时，它会“突出显示”并显示七个子网格。这是一个示例，其中第一行被选中，并且即将被编辑（正在进行中）： ![在此处输入图像描述](https://i.stack.imgur.com/N9U3S.png)

现在，如果我单击主网格的第二行，第一行被隐藏，第二行被选中。我点击编辑按钮后出现警告：没有选定的行！

![在此处输入图像描述](https://i.stack.imgur.com/rhSen.png)

如果我再次单击第二行，它会变为未选中状态，然后再次单击进行选择和编辑，运行良好！所以我认为我在折叠和展开状态之间切换的代码是错误的：

**2013 年 4 月 11 日更新**

按照 Oleg 的回答，我加入了我的程序的完整代码（限制为 30000）：

```
jQuery(function ($) {
var resetAltRows = function () {
    $(this).children("tbody:first").children('tr.jqgrow').removeClass('myAltRowClass');
    $(this).children("tbody:first").children('tr.jqgrow').each(function(){
        var arbo=$(this).find('td:eq(0)').text().substr(0,1);
        $(this).addClass('myAltRowClass1'+arbo);
        if(arbo==1)$(this).find('td:eq(1) input:checkbox').attr('checked','checked');
    });
    $(this).children("tbody:first").children('tr.jqgrow:visible:odd').addClass('myAltRowClass');
};

var OldSelectedRow=null,
        height=$('body').height()-235,
        numRows=Math.floor(height/23)-(Math.floor(height/23)%5),
        heightRows=numRows*23,
        myGrid = $("#tab51");

//************************
//************************
//************************
myGrid.jqGrid({
    caption:"Liste des BONS DE TRAVAUX STANDARD",
    hidegrid:false,
    url:'opt511.php',
    datatype: "json",
    height:heightRows,
    rowNum:numRows,
    shrinkToFit:true,
    colNames:['Id','A.R.C.','B.T.','Date ARC','Client','Nom','Ville','Cde client','Matériel','Marque','Prest.','Description','N° série','Objet','X','b.type','idref'],
    colModel:[  
        {name:'b.id',index:'b.id', hidden:true,key:true}, 
        {name:'b.arc',index:'b.arc', width:60,align:'center',editable:true}, 
        {name:'b.ind',index:'b.ind', width:30,align:"center"},
        {name:'b.date_in',index:'b.date_in', width:70,align:"center"}, 
        {name:'c.code',index:'c.code', width:40}, 
        {name:'c.descr',index:'c.descr',width:200},
        {name:'c.ville',index:'c.ville', width:200}, 
        {name:'b.cde_clt',index:'b.cde_clt', width:150}, 
        {name:'q.code',index:'q.code', width:80}, 
        {name:'k.code',index:'k.code', width:80}, 
        {name:'b.nature',index:'b.nature', stype:'select',width:40,align:'center',
            searchoptions:{
                dataUrl:'sh51.php'
            },
            cellattr: function (rowId, val, rawObject, cm, rdata) {
                return 'title="' + rawObject[15] + '"';
            }
        }, 
        {name:'2m.descr',index:'2m.descr', width:200}, 
        {name:'p.numserie',index:'p.numserie', width:80}, 
        {name:'b.descr',index:'b.descr', width:200}, 
        {name:'clos',index:'clos', width:20,stype:'select',align:'center',sortable:false,
            searchrules:{date:true}, 
            search:true,
            searchoptions:{
                value:{"": "?", 0:"En cours", 1: "Clôturé"},
                defaultValue:0
            }
        }, 
        {name:'btype',index:'btype', width:40,hidden:true},
        {name:'idref',index:'btype', width:40,hidden:true}
    ], 
    postData: {
            filters:'{"groupOp":"AND","rules":['+
                            '{"field":"clos","op":"eq","data":"0"}]}'
    },
    search:true,
    pager: '#tab51p', 
    sortname: 'b.arc', 
    gridComplete:function(){
        OldSelectedRow=null;
        sortDataCol(this);,
    },
    onSelectRow:function(id,status){
        alert('begin = '+myGrid.jqGrid('getGridParam','selrow'));
        if(OldSelectedRow!=id){
            if(OldSelectedRow!=null){
                myGrid.jqGrid ('collapseSubGridRow', OldSelectedRow);
                $('#'+OldSelectedRow).removeClass('ui-state-highlight');
            }
            $('#'+id).addClass('ui-state-highlight');
            OldSelectedRow=id;
            myGrid.jqGrid('expandSubGridRow',id);
        }else{
            myGrid.jqGrid ('collapseSubGridRow', id);
            $('#'+id).removeClass('ui-state-highlight');
            OldSelectedRow=null;
        }
        alert('end = '+myGrid.jqGrid('getGridParam','selrow'));
    },
    subGrid: true,
    subGridRowExpanded: function(subgrid_id, row_id) {
        //*********************
        //  1ST SUBGRID
        //*********************
        var rowdata = myGrid.jqGrid('getRowData',row_id),
            btr=rowdata['b.id'],
            subgrid_table_id = subgrid_id+"_a", 
            pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511a.php?id="+row_id+"&btr="+btr, 
            datatype: "json", 
            colNames: ['Nature','Information'],
            colModel: [ 
                {name:'c.code',index:'c.code', width:150,align:'right',sortable:false}, 
                {name:'p.coeff',index:'p.coeff', width:630,sortable:false}
            ], 
            height: '100%',
            autowidth:true,
            caption:'1 - INFORMATIONS CLIENT',
        }); 
        //*********************
        //  2ND SUBGRID 
        //*********************
        var clt=rowdata['c.code'],
            subgrid_table_id = subgrid_id+"_b", 
            pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511b.php?id="+row_id+"&clt="+clt, 
            datatype: "json", 
            colNames: ['Id','X','Civilité','Nom','Prénom','Service'],
            colModel: [ 
                {name:'t.id',index:'t.id', width:60, align:"center",hidden:true}, 
                {name:'check',index:'check', width:20,sortable:false,formatter:'checkbox',align:'center',
                    editable: false, edittype: 'checkbox', editoptions: {value: "true:false", defaultValue: "false"}, 
                    formatoptions: {disabled: false}
                },
                {name:'v.code',index:'v.code', width:60,sortable:false},  
                {name:'t.nom',index:'t.nom', width:210,sortable:false}, 
                {name:'t.prenom',index:'t.prenom', width:210,sortable:false},
                {name:'f.descr',index:'f.descr', width:220,sortable:false}
            ], 
            pager: pager_id, 
            sortname: 't.nom',
            hiddengrid:true,
            scroll:true,
            maxheight: 230,
            autowidth:true,
            caption:'2 - PERSONNES A CONTACTER',
            gridComplete:function(){
                OldSelectedRow=null;
                sortDataCol(this);
                    }
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
        //*********************
        //  3TH SUBGRID 
        //*********************
        rowdata = myGrid.jqGrid('getRowData',row_id);
        var parc=rowdata['p.id'];
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_c"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511c.php?id="+row_id+"&parc="+parc, 
            datatype: "json", 
            colNames: ['Id','Ensemble','Quantité','Article','Désignation','Matière'],
            colModel: [ 
                {name:'a.id',index:'a.id', width:60, align:"center",hidden:true}, 
                {name:'c.code',index:'c.code', width:100}, 
                {name:'p.coeff',index:'p.coeff', width:60,align:"center"}, 
                {name:'a.code',index:'a.code', width:80}, 
                {name:'a.descr',index:'a.descr',width:400},
                {name:'m.code',index:'m.code', width:80}
            ], 
            pager: pager_id, 
            sortname: 'c.code', 
            sortorder: "asc", 
            hiddengrid:true,
            rownumbers: true, 
            rownumWidth: 40, 
            gridview: true,
            scroll:true,
            maxheight: 230,
            autowidth:true,
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            altRows:true,
            altclass:'myAltRowClass',
            viewrecords: true,
            caption:'3 - SPECIFICATIONS TECHNIQUES',
            emptyrecords: 'Aucune donnée correspondante...',
        });
        //*********************
        //  4TH SUBGRID 
        //*********************
        rowdata = myGrid.jqGrid('getRowData',row_id);
        var parc=rowdata['idref'];
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_d"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511d.php?id="+row_id+"&parc="+parc, 
            datatype: "json", 
            colNames: ['Id','Ensemble','Quantité','Article','Désignation','Matière'],
            colModel: [ 
                {name:'a.id',index:'a.id', width:60, align:"center",hidden:true}, 
                {name:'c.code',index:'c.code', width:100}, 
                {name:'p.coeff',index:'p.coeff', width:60,align:"center"}, 
                {name:'a.code',index:'a.code', width:80}, 
                {name:'a.descr',index:'a.descr',width:400},
                {name:'m.code',index:'m.code', width:80}
            ], 
            pager: pager_id, 
            sortname: 'c.code', 
            sortorder: "asc", 
            hiddengrid:true,
            rownumbers: true, 
            rownumWidth: 40, 
            gridview: true,
            scroll:true,
            maxheight: 230,
            autowidth:true,
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            altRows:true,
            altclass:'myAltRowClass',
            viewrecords: true,
            caption:'4 - PIECES A PREPARER',
            emptyrecords: 'Aucune donnée correspondante...',
            gridComplete:function(){
                colModel = $("#"+subgrid_id+'_d').jqGrid('getGridParam', 'colModel');
                sortName =$("#"+subgrid_id+'_d').jqGrid('getGridParam', 'sortname');
                $('#gbox_' + $.jgrid.jqID($("#"+subgrid_id+'_d')[0].id) +
                        ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
                        var cmi = colModel[i], colName = cmi.name;
                        if (cmi.sortable !== false) {
                                $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
                        } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
                                $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
                        }
                        if (cmi.name === sortName) {
                                $(this).addClass('ui-state-active');
                                //alert(i);
                                var gridId = $("#"+subgrid_id+'_d').jqGrid('getDataIDs');
                                for (var countRow = 0; countRow < gridId .length; countRow ++)
                                {
                                    var rowId = gridId [countRow ];
                                    var dataFromTheRow = $("#"+subgrid_id+'_d').jqGrid ('getRowData', rowId);
                                    $("#"+subgrid_id+'_d').jqGrid('setCell',rowId, i, '','ui-widget-header');
                                    $("#"+subgrid_id+'_d').jqGrid('setCell',rowId, i, '',{'border-top':0,'border-left':0});
                                }
                        }
                });
            },
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
        //*********************
        //  5TH SUBGRID 
        //*********************
        rowdata = myGrid.jqGrid('getRowData',row_id);
        var btr=rowdata['b.id'],lastId='';
        var prest=rowdata['btype'];
        var nature=rowdata['b.nature'];
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_e"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511e.php?id="+row_id+"&btr="+btr, 
            datatype:"json",
            mType:'POST',
            loadui: "disable",
            colNames:['id','Prestations','Radio','Checked','Disabled','Select','Informations'],
            colModel:[
                    {name:'id',index:'id',width:100,hidden:true},
                    {name:'name',index:'name',width:550,sortable:false,
                        formatter: function (cellvalue,options,rowObject) {
                            if(rowObject.radio.length==0){
                                if(rowObject.id.substr(0,1)=='1'){
                                    var check="checked='checked'";
                                }else{
                                    var check='';
                                }
                                if(rowObject.disabled>'0'){
                                    var disabled="disabled";
                                }else{
                                    var disabled='';
                                }
                                var box="<input type='checkbox' class='itmchk' "+check+" "+disabled+"/>";
                            }else{
                                var box="<input type='radio' class='itmrad' id='"+rowObject.radio+"' name='"+rowObject.radio+"' "+(rowObject.checked>0?'checked':'')+" />";
                            }
                            switch(rowObject.level){
                                case '0':
                                    var bstyle="<strong>", estyle="</strong>";
                                    break;
                                case '1':
                                    var bstyle="", estyle="";
                                    break;
                                default:
                                    var bstyle="<em>", estyle="</em>";
                            }
                            return box + bstyle + $.jgrid.htmlEncode(cellvalue) + estyle;
                        }
                    },
                    {name:'radio',index:'radio',width:30,sortable:false,hidden:true},
                    {name:'checked',index:'checked',width:30,sortable:false,hidden:true},
                    {name:'disabled',index:'disabled',width:30,sortable:false,hidden:true},
                    {name:'select',index:'select',width:200,sortable:false,hidden:true},
                    {name:'data',index:'data',width:230,sortable:false,
                        formatter: function (cellvalue,options,rowObject) {
                            var cell='';
                            if(rowObject.select>" "){
                                var tab=rowObject.select.split("|");
                                var id=rowObject.id.substr(0,1);
                                cell="<select class='itmsel'>";
                                for(var i=0;i<tab.length;i++){
                                    var fld=tab[i].split(';');
                                    var opt="<option value='"+fld[0]+"' class='myAltRowClass1"+id+"'";
                                    if(i==0){
                                        opt+=" style='font-style:italic;'";
                                    }else{
                                        opt+=" style='color:red;'";
                                    }
                                    opt+=">"+(i>0?'&nbsp;&nbsp;• ':'')+fld[1]+"</option>";
                                    cell+=opt;
                                }
                                cell+='</select>';
                            }
                            return cell;
                        }
                    }
            ],
            sortname: 'id', 
            sortorder: "asc", 
            hiddengrid:true,
            gridview: true,
            treeGrid:true,
            pager:pager_id,
            treeGridModel: "adjacency",
            treedatatype: 'json',
            ExpandColumn: 'name',
            jsonReader: {
                    repeatitems: false,
                    root: function (obj) { return obj; },
                    page: function (obj) { return 1; },
                    total: function (obj) { return 1; },
                    records: function (obj) { return obj.length; }
            },
            scroll:true,
            autowidth:true,
            height: 230,
            loadComplete: function() {
                var grid = this;
                resetAltRows.call(this);
                $(this).find('tr.jqgrow td div.treeclick').click(function(){
                        resetAltRows.call(grid);
                });
                $(this).find('tr.jqgrow td span.cell-wrapper').click(function(){
                        resetAltRows.call(grid);
                });
                $("#"+subgrid_table_id).jqGrid('setLabel', 'name', '<b>'+nature+' - '+prest+'</b>');
                //
            },
            beforeSelectRow: function (rowid, e) {
                var $this = $(this),
                isLeafName = $this.jqGrid("getGridParam", "treeReader").leaf_field,
                localIdName = $this.jqGrid("getGridParam", "localReader").id,
                localData,
                state,
                setCheckedStateOfChildrenItems = function (children) {
                    $.each(children, function () {
                        $("#" + this[localIdName] + " input.itmchk").prop("checked", state);
                        if (!this[isLeafName]) {
                            setCheckedStateOfChildrenItems($this.jqGrid("getNodeChildren", this));
                        }
                    });
                };
                if (e.target.nodeName === "INPUT" && $(e.target).hasClass("itmchk")) {
                    state = $(e.target).prop("checked");
                    localData = $this.jqGrid("getLocalRow", rowid);
                    setCheckedStateOfChildrenItems($this.jqGrid("getNodeChildren", localData), state);
                }
            },
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            caption:'5 - TRAVAUX A EFFECTUER',
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
        //*********************
        //  6TH SUBGRID 
        //*********************
        rowdata = myGrid.jqGrid('getRowData',row_id);
        var parc=rowdata['p.id'];
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_f"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511f.php?id="+row_id+"&parc="+parc, 
            datatype: "json", 
            colNames: ['Id','Ensemble','Quantité','Article','Désignation','Matière'],
            colModel: [ 
                {name:'a.id',index:'a.id', width:60, align:"center",hidden:true}, 
                {name:'c.code',index:'c.code', width:100}, 
                {name:'p.coeff',index:'p.coeff', width:60,align:"center"}, 
                {name:'a.code',index:'a.code', width:80}, 
                {name:'a.descr',index:'a.descr',width:400},
                {name:'m.code',index:'m.code', width:80}
            ], 
            pager: pager_id, 
            sortname: 'c.code', 
            sortorder: "asc", 
            hiddengrid:true,
            rownumbers: true, 
            rownumWidth: 40, 
            gridview: true,
            scroll:true,
            maxheight: 230,
            autowidth:true,
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            altRows:true,
            altclass:'myAltRowClass',
            viewrecords: true,
            caption:'6 - INTERVENANTS',
            emptyrecords: 'Aucune donnée correspondante...',
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
        $("#"+subgrid_table_id).jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
        //  montre la colonne triée au chargement des données
        colModel = $("#"+subgrid_table_id).jqGrid('getGridParam', 'colModel');
        sortName = $("#"+subgrid_table_id).jqGrid('getGridParam', 'sortname');
        $('#gbox_' + $.jgrid.jqID($("#"+subgrid_table_id)[0].id) +
                ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
                var cmi = colModel[i], colName = cmi.name;
                if (cmi.sortable !== false) {
                        $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
                } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
                        $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
                }
                if (cmi.name === sortName) {
                        $(this).addClass('ui-state-active');
                }
        });
        //*********************
        //  7TH SUBGRID 
        //*********************
        rowdata = myGrid.jqGrid('getRowData',row_id);
        var parc=rowdata['p.id'];
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_g"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg511g.php?id="+row_id+"&parc="+parc, 
            datatype: "json", 
            colNames: ['Id','Ensemble','Quantité','Article','Désignation','Matière'],
            colModel: [ 
                {name:'a.id',index:'a.id', width:60, align:"center",hidden:true}, 
                {name:'c.code',index:'c.code', width:100}, 
                {name:'p.coeff',index:'p.coeff', width:60,align:"center"}, 
                {name:'a.code',index:'a.code', width:80}, 
                {name:'a.descr',index:'a.descr',width:400},
                {name:'m.code',index:'m.code', width:80}
            ], 
            pager: pager_id, 
            sortname: 'c.code', 
            sortorder: "asc", 
            hiddengrid:true,
            rownumbers: true, 
            rownumWidth: 40, 
            gridview: true,
            scroll:true,
            maxheight: 230,
            autowidth:true,
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            altRows:true,
            altclass:'myAltRowClass',
            viewrecords: true,
            caption:'7 - PLAN DE PREVENTION',
            emptyrecords: 'Aucune donnée correspondante...',
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
        $("#"+subgrid_table_id).jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
        var subgridg="#"+subgrid_id;
        //  #tab_51_1;
        var chaine='abcdefg';
        $(".ui-jqgrid-titlebar",subgridg).click(function(){
            var titlebar=this;
            var clicked=chaine.indexOf($(titlebar).parent().attr('id').substr(-1));
            //  id is 'tab51_1_a' so clicked is 0
            var depart=$(titlebar).parent().parent().parent().attr('id');
            //  I run my search from id 'tab51_1' class 'tablediv'
            $('#'+depart).find('.ui-jqgrid-view').each(function(idx){
                if(idx==clicked){
                    $(".ui-jqgrid-titlebar-close", titlebar).click();
                }else{
                    if(typeof $(subgridg).find('.ui-jqgrid-bdiv:eq('+idx+')').css('display')=='undefined'||$(subgridg).find('.ui-jqgrid-bdiv:eq('+idx+')').css('display')=='block'){
                        $(subgridg).find(".ui-jqgrid-titlebar-close:eq("+idx+")").click();
                    }
                }
            });
        });
    },
    subGridRowColapsed: function(subgrid_id, row_id) { 
        $("#"+subgrid_id+"_a").remove();
        $("#"+subgrid_id+"_b").remove();
        $("#"+subgrid_id+"_c").remove();
        $("#"+subgrid_id+"_d").remove();
        $("#"+subgrid_id+"_e").remove();
        $("#"+subgrid_id+"_f").remove();
        $("#"+subgrid_id+"_g").remove();
        myGrid.jqGrid('resetSelection');            
    }
});}); 
```

我不使用任何 subGridOptions，所以我认为 false 是 reloadOnExpand 的默认值。我在 OnSelectedRow 函数中添加了 2 个警报，在函数的开头和结尾。第一次单击开始和结束时显示良好的 selrows，但对于下一次单击，结束警报显示为“空”。

我还尝试将所有部分删除到“subGridRowExpanded”和“subGridRowColapsed”函数中。麻烦不会发生，开始和结束 selrows 很好，我可以根据需要编辑行。

jqGrid 的内部工作对我来说似乎非常复杂，因为我不习惯使用它，我必须再感谢你一次，感谢你花时间帮助像我这样的菜鸟。你的评论总是对的，我希望你能在这个论坛上呆很长时间。再次感谢。祝你今天过得愉快。继和

**2013 年 4 月 22 日更新**

在应用了 Oleg 的所有建议后，我对我的应用程序的 20 个脚本进行了一些更改，这些脚本都是以相同的方式构建的。对于这个主题，这是我更改的 onSelectRow 的一小部分：

```
 onSelectRow:function(id){
        var expanded = $("td.sgexpanded", myGrid)[0];
        if(expanded){
            $(expanded).trigger("click").parent().removeClass('ui-state-highlight');                
        }
        myGrid.jqGrid('expandSubGridRow',id);
        $('#'+id).addClass('ui-state-highlight');
        alert(id+' '+myGrid.jqGrid('getGridParam','selrow'));
    }, 
```

但结果没有更多的运气，我无法编辑折叠其他行后已展开的行。我不明白为什么折叠旧行并展开选定行后 selrow 会发生变化。我希望有人能帮我解决这个问题，我想我并不是唯一一个遇到这个问题的人。非常感谢您的帮助，非常感谢。继和

**2013 年 4 月 23 日更新**

在应用 Oleg 的建议后，主要问题（在折叠其他行后编辑展开的行）似乎已解决。但是将选定的行设置为网格顶部运行良好，前五行运行良好，但后行不行。奇怪的 ！这是事实的快照：

![在此处输入图像描述](https://i.stack.imgur.com/5FUXY.png)

奇怪，因为[http://jsfiddle.net/jihel/JMcKF/](http://jsfiddle.net/jihel/JMcKF/)中的演示运行良好，并且是用我的应用程序代码创建的！我正在寻找可能有什么问题或更改 scrollTop，如果有人已经遇到过这样的麻烦并且有解决的想法，非常感谢您的帮助。祝你今天过得愉快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:22:10.957

很难分析这么长的代码。因此，我只发布了一些关于在查看代码后可以在代码中看到的潜在问题的评论。

我看到的主要问题：**您应该`idPrefix`在所有**子网格（或主网格和子网格）中使用选项。option option的值`idPrefix`应取决于`rowid`子网格的打开位置。例如，您可以使用

```
idPrefix: "s_" + row_id + "_a_" 
```

对于第一个子网格，`idPrefix: "s_" + row_id + "_b_"`对于第二个子网格，依此类推。

我建议您**不要在列名称中使用`.`(dot) 或任何其他[元字符](http://api.jquery.com/category/selectors/)**。这是您的代码和 jqGrid 代码中潜在错误的根源。您应该了解该`name`属性将用于构建 jqGrid 的一些内部元素的 id 属性。CSS 中有一些限制，哪些字符可以在`id`属性中使用。此外，jqGrid 必须构建选择器以从页面中获取相应的元素。例如，如果包含`$("#" + rowid)`将是错误的选择器，因为选择器将被解释为：元素和类而不是`rowid``.``("#a.b")``id=a``b``id="a.b"`. 旧版本的 jqGrid 根本无法使用这样的 id 和这样的名称。最新版本的 jqGrid 应该可以工作，但是在 id 中使用元字符会在很多时候增加代码的复杂性。你真的需要吗？

由于几乎相同的问题，我不建议您`name`对不同的表使用相同的属性。如果您计划对多个网格或子网格（用于多个网格）使用搜索过滤器，这可能很重要`filterToolbar`。目前，您`'c.code'`在多个子网格中使用，这是未来问题的潜在根源。

如果您*确实需要*用于`.`搜索并且您使用`datatype: "json"`without`loadonce: true`那么您可以使用`index`which has`.`和`name`which has no `.`。例如，您可以使用`name: 'b_id', index: 'b.id'`. 如果使用与属性`index`值相同的值，`name`建议从列定义中*删除属性。* `index`

此外，我不建议使用`scroll:true`jqGrid 选项。一般来说，虚拟滚动是一个不错的功能，但在我看来，虚拟滚动的实现有很多错误和副作用。所以我建议不要使用它。如果您真的几乎不需要该功能，那么您应该在表单中使用它，`scroll:1`并且您必须在调试上投入更多时间。

最后一句话：我不推荐使用`gridComplete`. 我建议`loadComplete`改用。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/15439276/315935)。

最后一句话：我建议在您使用`gridview: true`的所有网格和子网格中使用。

**更新**：我不确定我是否完全理解您要实现的行为`onSelectRow`，但以下实现

```
onSelectRow: function (rowid) {
    var $self = $(this),
        $this = $("#" + $.jgrid.jqID(rowid)), // the row
        $expanded = $self.find("td.sgexpanded");

     if ($expanded.length > 0) {
         $expanded.trigger("click");
     }
     $self.jqGrid("expandSubGridRow", rowid);
     $self.jqGrid("setSelection", rowid, false);
     $this.closest(".ui-jqgrid-bdiv").scrollTop($this.position().top);
} 
```

# c# - 使用sql数据库的C#登录屏幕不起作用

> ID：15878545
> 
> 赞同：1
> 
> 时间：2013-04-08T12:02:29.870
> 
> 标签：c#, sql, if-statement, string-comparison, sqldatareader

我有一个简单的登录屏幕，当用户单击登录按钮时，应该运行 sql 查询来搜索用户名 == 用户名文本框和密码 == 密码文本框的行。我的代码的这一部分工作正常。

但是，当我尝试运行 if 语句时，它将打开一个新表单并关闭登录表单，它会出错，即使我添加了一些消息框来检查语句刺比较是否正确。

有任何想法吗？

登录按钮：

```
private void btnLogin_Click(object sender, EventArgs e)
    {
        try
        {
            string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DebenhamsProjectOfficeDatabase.mdf;Integrated Security=True;User Instance=True";
            SqlConnection cn = new SqlConnection(connection);
            cn.Open();
            string userText = txtUsername.Text;
            string passText = txtPassword.Text;
            SqlCommand cmd = new SqlCommand("SELECT ISNULL(Username, '') AS Username, ISNULL(Password,'') AS Password FROM Users WHERE Username='" + userText + "' and Password='" + passText + "'", cn);

            SqlDataReader dr = cmd.ExecuteReader();

            while (dr.Read())
            {
                MessageBox.Show(userText + " / " + dr["Username"].ToString());
                MessageBox.Show(passText + " / " + dr["Password"].ToString());
                if (dr["Username"].ToString() == userText && dr["Password"].ToString() == passText)
                {
                    this.Hide();
                    Dashboard dashboard = new Dashboard();
                    dashboard.ShowDialog();
                    this.Close();
                }
                else
                {
                    MessageBox.Show("Invalid Username or Password");
                }
            }
            dr.Close();
            cn.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

登录尝试： ![在此处输入图像描述](https://i.stack.imgur.com/Zav0P.png) ![在此处输入图像描述](https://i.stack.imgur.com/SPuOH.png) ![在此处输入图像描述](https://i.stack.imgur.com/oefTa.png)

* * *

根据从下面的答案和评论中获取的建议，代码已更正为以下内容（在 sql 命令中使用 sql 参数）：

```
private void btnLogin_Click(object sender, EventArgs e)
    {
        try
        {
            string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DebenhamsProjectOfficeDatabase.mdf;Integrated Security=True;User Instance=True";
            SqlConnection cn = new SqlConnection(connection);
            cn.Open();
            string userText = txtUsername.Text;
            string passText = txtPassword.Text;
            SqlCommand cmd = new SqlCommand("SELECT ISNULL(Username, '') AS Username, ISNULL(Password,'') AS Password FROM Users WHERE Username = @username and Password = @password", cn);
            cmd.Parameters.Add(new SqlParameter("username", userText));
            cmd.Parameters.Add(new SqlParameter("password", passText));

            SqlDataReader dr = cmd.ExecuteReader();

            try
            {
                dr.Read();
                if (dr["Username"].ToString().Trim() == userText && dr["Password"].ToString().Trim() == passText)
                {
                    this.Hide();
                    Dashboard dashboard = new Dashboard();
                    dashboard.ShowDialog();
                    this.Close();
                }
            }
            catch
            {
                MessageBox.Show("Invalid Username or Password");
            }
            dr.Close();
            cn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:07:51.273

尝试在检查它们时将 trim() 添加到 sql 返回的末尾。

`dr["Username"].ToString().trim()`和 `dr["Password"].ToString().trim()`

有时数据库会存储您看不到的额外空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:11:28.087

试试这个：我认为它会起作用

```
SqlCommand cmd = new SqlCommand("SELECT * FROM Users WHERE Username='" + userText.toString() + "' and Password='" + passText.toString() + "'", cn);

        SqlDataReader dr = cmd.ExecuteReader();
        if (dr.Read())
        {
            MessageBox.Show(username + " / " + usertext);
            MessageBox.Show(password + " / " + passtext);
            this.Hide();
            Dashboard dashboard = new Dashboard();
            dashboard.ShowDialog();
            this.Close();
        }
        else
        {
                MessageBox.Show("Invalid Username or Password");
        } 
```

# phone-number - Google 的 LibPhoneNumber 包：7777777779 和 2234567890 是无效的美国电话号码吗？

> ID：15878548
> 
> 赞同：-3
> 
> 时间：2013-04-08T12:02:36.587
> 
> 标签：phone-number, libphonenumber

**问题：**我正在使用 Google 的 LibPhoneNumber 包来验证 Java 中的电话号码。当国家设置为美国时，**7777777779**和**2234567890**被归类为无效号码，但**7866438057**是有效的。为什么是这样？我已经尝试阅读为什么它们可能无效，例如在[美国电话号码维基百科页面上](http://en.wikipedia.org/wiki/North_American_Numbering_Plan)，但我没有看到任何答案。

**代码 ：**

```
 PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
    try {
        PhoneNumber parsedNumber = phoneUtil.parse(number, iso3Country);
        //Is it a valid number for the locale?
        if (!phoneUtil.isValidNumber(parsedNumber)) {
            //TODO Throw error!
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T12:05:06.513

可能是因为 777 和 223 不是美国区号。

我认为[这](http://www.nanpa.com/nas/public/npasInServiceByNumberReport.do?method=displayNpasInServiceByNumberReport)是北美编号计划中的官方区号列表，其中包括美国、加拿大和许多较小的国家。

# html - 当边框顶部和底部从左侧和右侧获得更高的值时，它们似乎更短？

> ID：15878549
> 
> 赞同：2
> 
> 时间：2013-04-08T12:02:37.703
> 
> 标签：html, css, border

当我在元素的两侧使用较低的值时，边界似乎很短，[**这是要检查的 jsFiddle。**](http://jsfiddle.net/8Rhf7/6/)当它们具有不同的值时，我如何拉直边边框？希望能找到解决办法。

```
span {
    float: left;
    border-top: 10px solid red;
    border-bottom: 10px solid red;
    border-right: 1px solid blue;
    border-left: 1px solid blue;
    padding: 0 10px 0 20px;
    background: orange;
} 
```

![短边框值示例](https://i.stack.imgur.com/D1cjs.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:05:33.827

他们将永远那样做。正如您在自己的示例中看到的那样，边界由对角线划分。您可以通过将两个跨度相互包装来实现您的行为。一个用于垂直边框，另一个用于水平边框。

[小提琴示例](http://jsfiddle.net/8Rhf7/7/)

```
<span class="vertical">
    <span class="horizontal">
    Problem Here, left and right border is shorter
    </span>
</span> 
```

顺便说一句：我建议`box-sizing: border-box`对元素的宽度和高度进行更直观的行为（比较填充行为）：

[小提琴示例](http://jsfiddle.net/8Rhf7/11/)

# jsf - Web 应用程序无法在某些浏览器上下载文件

> ID：15878551
> 
> 赞同：2
> 
> 时间：2013-04-08T12:02:42.713
> 
> 标签：jsf, download, zip, response

我的应用程序上的文件下载有一个非常奇怪的问题。我搜索了很长时间，但找不到合适的解决方案。我将尝试尽可能清楚地描述问题，希望有人可以提供帮助。

我有一个 JSF 应用程序，在提交表单后，用户下载一个动态生成的报告，该报告由一个包含一个 xls 和一个 csv 文件的 zip 文件组成。zip 文件的大小和生成报告的时间取决于用户选择的时间段。

在服务器上，我这样处理响应：

```
response.reset();
response.setContentType("application/zip");
response.setHeader("Content-Disposition", "attachment;filename=\"file.zip\""); 
```

然后我在服务器上的临时目录（每个会话唯一）上生成 csv 和 xls 文件，并将它们直接压缩到响应输出流。

为搜索条件选择较短的时间段时，一切都很好。但是当增加时间间隔时，IE 和 Firefox 似乎“失去”了响应。在 IE 上，请求保持“待处理”，而 FF 在选项卡上显示“正在连接”微调器，即使服务器已完成将文件写入响应。在任何情况下，服务器日志中都没有例外。下载对话框永远不会出现。

令我困惑的是，无论搜索条件如何，Chromium 每次都成功打开文件而没有问题。此外，问题似乎来自测试部署，因为我无法通过设置断点并等待几分钟等方式在本地环境中重现该问题。

等待时间和文件大小不是这个世界的东西，我说的是不到 1MB 和不到 2 分钟即可完成报告。

以下是使用 FF 成功报告的相关请求和响应标头（已删除主机、真实文件名等）：

```
Request:
User-Agent:Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0
Connection:keep-alive
Accept-Language:en-US,en;q=0.5
Accept-Encoding:gzip, deflate
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

Response:
Transfer-Encoding:chunked
Server:Apache/2.2.3 (CentOS)
Keep-Alive:timeout=10, max=98
Expires:Mon, 08 Apr 2013 11:43:49 GMT
Date:Mon, 08 Apr 2013 11:43:48 GMT
Content-Type:application/zip;charset=ISO-8859-1
Content-Disposition:attachment;filename="file.zip"
Connection:Keep-Alive
Cache-Control:max-age=1 
```

假设响应确实到达浏览器似乎是安全的，但不知何故被搞砸了，IE 和 FF 都没有显示下载对话框。

任何帮助将不胜感激。

**编辑：**我忘了提到我已经尝试使用每个可用的工具调试请求/响应周期：IE、FF、Firebug、Fiddler 上的内置开发工具......不幸的是，对于受影响的浏览器不是很有用，因为响应没有出现在第一位。

**编辑2：**黑暗中的各种镜头：

*   Chrome 检查器在请求报告后在控制台中显示此消息：资源解释为文档，但使用 MIME 类型应用程序/zip 传输：“ [https://xxxxxxx.xxx/xxxxx.faces](https://xxxxxxx.xxx/xxxxx.faces) ”。
*   Chrome 检查器在“网络”选项卡中将请求显示为“已取消”，但它会正确保存文件
*   在其余页面上，响应编码为 UTF-8，但 zip 文件为 ISO-8859-1。这似乎是一个默认值，据我所知，它没有在任何地方指定。我让它显示“application/zip;charset=UTF-8”，但需要部署到测试服务器以查看这是否有任何效果。

**编辑 3：**更新：在测试部署中绕过 Apache，让 Tomcat 处理所有事情（就像在本地环境中一样）使问题消失，使 Apache 成为罪魁祸首。唯一明显的区别是 Apache 放在那里的 keep-alive 响应标头。我一直在本地环境中使用 Tomcat，试图找到导致问题的配置，但到目前为止还没有运气。有什么建议么？

# ios - 从选中状态变为正常状态时，UIButton 的突出显示状态不会出现

> ID：15878555
> 
> 赞同：1
> 
> 时间：2013-04-08T12:03:07.043
> 
> 标签：ios, objective-c

我有一个 UIButton ，根据我的应用程序有 4 种不同的状态。

```
state-1 normal.
state-2 selected.
state-3 highlighted , going normal-to-selected.
state-4 highlighted , going selected-to-normal. 
```

最初按钮处于正常状态，当我按下它时，它会进入选定状态并继续在这些状态之间切换。

这是通过为两种状态指定图像并更改所选属性来实现的。

但是，在更改每个状态时，我需要更改突出显示的状态图像，以确保它在被按下时代表状态 3 和状态 4。

问题是，当从选中状态变为正常状态时，UIButton 似乎没有突出显示状态。

所以现在我保留一个 BOOL ivar 来检查我的视图中的选择状态。并保持按钮处于正常状态，并根据 BOOL ivar 的值通过每个操作将其图像更改为突出显示状态和正常状态。

有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T12:21:39.227

原因是状态是两个值的混合。

一些最常见的

```
UIControlStateNormal,
UIControlStateHighlighted,
UIControlStateDisabled,
UIControlStateSelected,
UIControlStateSelected | UIControlStateHighlighted,
UIControlStateSelected | UIControlStateDisabled, 
```

所以如果你想有一个`highlighted`状态`selected`那么我更喜欢这样做。

```
 [button setImage:imageHighlighted forState:UIControlStateSelected | UIControlStateHighlighted]; 
```

如果一般规则是您在选择时始终具有相同的突出显示状态，您可以按照以下方式进行操作

```
 UIControlState mixedState = UIControlStateSelected | UIControlStateHighlighted;
    [button setImage:[button imageForState:state] forState:state];
    [button setBackgroundImage:[button backgroundImageForState:state] forState:state];
    [button setTitleColor:[button titleColorForState:state] forState:state]; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:10:13.660

将突出显示的状态保存在布尔变量中是跟踪状态的常用方法，但是这里有一些简单的代码。

有一种`setHighlighted`方法可以在 UIControl 上调用，您可以覆盖该方法。您可以在其中设置变量，而不是在多个操作中：

```
-(void)setHighligted:(BOOL) highlighted {
    self.mySavedHighlightedState = highlighted;
} 
```

创建一个具有`mySavedHighlightedState`属性的自定义 UIButton 类来实现这一点。

# java - Collections.shuffle 只工作一次

> ID：15878559
> 
> 赞同：3
> 
> 时间：2013-04-08T12:03:22.687
> 
> 标签：java, collections, random, shuffle

我检查了以前的答案，但它对我不起作用。

我有以下代码

```
public static void createPopulation(ArrayList<City> city)
{
    for (int i = 0; i<gen.getSize(); i++)   {   
        ArrayList<City> copy = new ArrayList<City> (city); //added from previous question
        Collections.shuffle(copy, new Random(seed));
        gen.add(copy);
    }
} 
```

它会随机播放一次，无论是否带有注释行，但不会再次随机播放。这是一个 GP 算法（嗯，它的开始），我必须在其中洗牌人口的成员。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T12:04:48.473

那是因为您重新创建了`Random`对象。

做这个 ：

```
Random r = new Random(seed);
for (int i = 0; i<gen.getSize(); i++)   {   
    ArrayList<City> copy = new ArrayList<City> (city); //added from previous question
    Collections.shuffle(copy, r);
    gen.add(copy);
} 
```

从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)：

> 如果使用相同的种子创建 Random 的两个实例，并且为每个实例进行相同的方法调用序列，它们将生成并返回相同的数字序列。

的一个实例`Random`是一个生成器，每次调用它的随机函数时，它的状态都会改变。在这里，您不想将此状态重置为基于初始种子的状态，因为这会导致相同的返回数字序列。这就是为什么您不想为每次改组重新创建一个新实例的原因。

# django - 托管在 Google App Engine 中的 django 项目的 settings.py 的位置

> ID：15878577
> 
> 赞同：1
> 
> 时间：2013-04-08T12:04:19.070
> 
> 标签：django, google-app-engine

我在 GAE 中运行最简单的 django 项目时遇到问题。

运行后`django-admin startproject myproj`（使用 Google SDK 中的 django 1.4），文件夹层次结构如下所示：

```
+ myproj（项目的根文件夹）
  - 管理.py
  + myproj（项目文件的子文件夹）
    - __init__.py
    - 设置.py
    - urls.py
    -wsgi.py

```

然后，我将通常的 app.yaml 添加**到根文件夹**- 即添加到 manage.py 所在的文件夹。

```
application: u-pavarotti
version: 1
runtime: python27
api_version: 1
threadsafe: true

libraries:
- name: django
  version: "1.4"

builtins:
- django_wsgi: on 
```

syncdb、dbshel​​l、shell ... 效果很好。甚至`manage.py runserver`工作文件。但是，尝试运行`dev_appserver`失败。我得到的例外是：

`ImportError: Could not import settings 'settings'`.

好吧，看看 google/appengine/ext/django/main （它`django_wsgi`基本上是为 .* 设置一个 URL 处理程序到 google.appengine.ext.django.main.app）似乎它希望在蟒蛇路径。但是没有做任何事情，要导入的模块是`myproj.settings`（因为 myproj 不在路径中）。

现在，将 .../myproj/myproj （较低的文件夹）添加到 PYTHONPATH 可以解决我的开发机器上的所有问题，但是由于我无法控制 GAE 部署上的搜索路径 - 此解决方案将不起作用。

我可以将所有文件，或者只是 settings.py 向上移动到 myproj，或者将 app.yaml 向下移动（有点相同），但它需要对默认生成的 settings.py 进行各种更改 - 我不这是要走的路。或者，我可以编写自己的处理程序，它将实例化 django.core.handlers.wsge.WSGIHandler （旧教程曾经这样做） - 似乎至少违背了 app 的“内置”属性的创建者的意图。 yaml。

我想知道其他人是如何解决这个问题的，什么是正确的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:37:29.107

`DJANGO_SETTINGS_MODULE`您可以在 app.yaml中声明环境变量：

```
env_variables:
    DJANGO_SETTINGS_MODULE: 'myproj.settings' 
```

# c# - EntityFramework,配置中找不到指定的store provider，或者无效

> ID：15878578
> 
> 赞同：6
> 
> 时间：2013-04-08T12:04:20.880
> 
> 标签：c#, entity-framework, exception

我有一个 Winform 应用程序并且正在使用 EntityFramework。该应用程序在我的开发机器上运行得很好，但是当我尝试在客户端机器上运行时，我得到“在配置中找不到指定的商店提供程序，或者无效”错误。我已经与客户端分发了 EntityFramework.dll。为什么我会收到此错误？我没有将连接字符串放在 app.config 文件中，因为它是根据运行时选择的数据库动态创建的。（我使用 VistaDB 作为数据库）

app.config 如下：

```
<configuration>
<configSections>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection,EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<connectionStrings>
 </connectionStrings>
 <entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
</entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-09T16:46:45.113

我有这个问题。我卸载了 Connector .NET 并重新安装了它。现在它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T15:53:34.153

根据您使用的数据库类型，您需要提供 Entityframe 工作将使用的 Db ORM 设置

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory,MySql.Data" />
    </DbProviderFactories>
  </system.data> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-19T07:33:27.200

要解决此错误，请在客户端计算机上安装[Microsoft SQL Server Compact 4.0 。](https://www.microsoft.com/en-us/download/details.aspx?id=17876)

# highcharts - Highcharts：以刻度为中心的 xAxis 年度标签

> ID：15878585
> 
> 赞同：8
> 
> 时间：2013-04-08T12:04:46.130
> 
> 标签：highcharts

我正在绘制带有每月数据点的折线图。但是，我希望比例仅显示年份字符串。到目前为止，很容易。但是，据我所见，Highcharts 将始终绘制相对于刻度的 xAxis 标签......并且我需要在刻度之间居中显示它们。有没有一些我想念的简单方法，请......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:02:16.847

据我了解，您希望的行为是：http:
[//jsfiddle.net/msjaiswal/U45Sr/2/](http://jsfiddle.net/msjaiswal/U45Sr/2/)

让我分解一下解决方案：
**1\. 每月数据点**
一个数据点对应一个月：

```
var data = [
    [Date.UTC(2003,1),0.872],
    [Date.UTC(2003,2),0.8714],
    [Date.UTC(2003,3),0.8638],
    [Date.UTC(2003,4),0.8567],
    [Date.UTC(2003,5),0.8536],
    [Date.UTC(2003,6),0.8564],
    ..
] 
```

**2\. 缩放以仅显示年度刻度**
使用如下图表选项：

```
 xAxis: {
        minRange : 30 * 24 * 3600 * 1000, //
        minTickInterval: 12* 30 * 24 * 3600 * 1000 // An year
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-20T10:02:41.610

没有简单的、开箱即用的解决方案。您必须使用事件并相应地重新定位标签。这是一个示例解决方案，在调整浏览器窗口大小（或以其他方式强制图表重绘）时也有效，即使滴答计数发生变化：http: [//jsfiddle.net/McNetic/eyyom2qg/3/](http://jsfiddle.net/McNetic/eyyom2qg/3/)

它通过将相同的事件处理程序附加到事件`load`和`redraw`事件来工作：

```
$('#container').highcharts({
  chart: {
    events: {
      load: fixLabels,
      redraw: fixLabels
    }
  },
[...] 
```

处理程序本身如下所示：

```
 var fixLabels = function() {
  var labels = $('div.highcharts-xaxis-labels span', this.container).sort(function(a, b) {
    return +parseInt($(a).css('left')) - +parseInt($(b).css('left'));
  });
  labels.css('margin-left', 
    (parseInt($(labels.get(1)).css('left')) - parseInt($(labels.get(0)).css('left'))) / 2
  );
  $(labels.get(this.xAxis[0].tickPositions.length - 1)).remove();
}; 
```

基本上，它是这样工作的：

1.  获取所有现有标签（重绘时，这包括新添加的标签）。2.按css属性'left'排序（经过一些重绘后它们不会这样排序）
2.  计算前两个标签之间的偏移量（所有标签的偏移量相同）
3.  将偏移量的一半设置为所有标签的左边距，有效地将它们向右移动一半的偏移量。
4.  删除最右边的标签（移到图表之外，有时部分可见）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T02:35:43.713

这可以通过一种解决方法来完成，方法是通过回调（在加载和重绘时调用）手动调整标签位置。请在我对这篇文章的评论中查看链接到的小提琴：[Highcharts - 如何在日期时间 x 轴上居中标签？](https://stackoverflow.com/questions/18516320/highcharts-how-can-i-center-labels-on-a-datetime-x-axis/18516321#18516321)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T14:02:49.573

您是否尝试过使用刻度放置？[http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement](http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T12:34:37.410

有几个 xAxis 选项可以帮助你做你想做的事。

[http://api.highcharts.com/highcharts#xAxis.labels](http://api.highcharts.com/highcharts#xAxis.labels)

看一下'align'，它指定标签是在刻度的左侧还是右侧，还有'x'，它允许您为标签从刻度指定x 偏移量。

# selenium - 为什么在 MSBuild 下测试失败后 Selenium WebDriver 不退出 Firefox？

> ID：15878588
> 
> 赞同：1
> 
> 时间：2013-04-08T12:04:51.970
> 
> 标签：selenium, msbuild, webdriver

我在 .NET 环境中使用 Selenium WebDriver。我在 NUnit 测试运行器中使用 WebDriver，如下所示：

```
 [Test]
    public static void Should_register_user()
    {
        IWebDriver driver = new FirefoxDriver();

        ...

        driver.Quit();
    } 
```

它工作得很好。如果我像这样从 MSBuild 脚本运行此测试： packages\NUnit.Runners.2.6.2\Tools\nunit-console.exe /nologo S022.SeleniumTests.dll /xml=NUnit.Report.xml （无论我是使用 NUnit 社区任务或执行任务）。测试执行但失败，Firefox 浏览器保持打开状态，脚本中的执行等待我关闭浏览器窗口。当我这样做时，脚本会进一步执行。

这是 Selenium 所说的：

```
ProcessModel: Default    DomainUsage: Single
  Execution Runtime: net-3.5
  .F
  Tests run: 1, Errors: 0, Failures: 1, Inconclusive: 0, Time: 10,3118323 secon
  ds
    Not run: 0, Invalid: 0, Ignored: 0, Skipped: 0

  Errors and Failures:
  1) Test Failure : S022.SeleniumTests.RegistrationTests.Should_register
  _user
       Expected string length 6 but was 11\. Strings differ at index 0.
    Expected: "Log-in"
    But was:  "News"
    -----------^

  at S022.SeleniumTests.RegistrationTests.Should_register_user() in S022.SeleniumTests\T
  ests\RegistrationTests.cs:line 22 
```

如果测试通过，则执行按预期进行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:57:10.663

您正在该`[Test]`方法中创建和销毁浏览器实例。当测试用例失败时，会引发异常，并且您的调用`driver.Quit()`永远不会被执行。您可能希望在方法中创建驱动程序实例，并在`[SetUp]`方法中调用。`driver.Quit()``[TearDown]`

# c# - 如何使用 LINQ 和 C# 最好地提取属性值和元素值

> ID：15878593
> 
> 赞同：3
> 
> 时间：2013-04-08T12:04:57.613
> 
> 标签：c#, xml, linq

在我开始之前，这是我的第一篇文章，所以如果有什么我做错或没有做的事情，请告诉我，我会编辑我的帖子

我有一份格式如下的文件。

```
<Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'>
    <EventData>
        <Data Name='SubjectUserSid'>S-1-0-0</Data>
        <Data Name='SubjectUserName'>MACHINE$</Data>
        <Data Name='SubjectDomainName'>DOMAIN</Data>
        <Data Name='SubjectLogonId'>0x0</Data>
        <Data Name='TargetUserSid'>S-1-0-0</Data>
        <Data Name='TargetUserName'>username</Data>
        <Data Name='TargetDomainName'>TDname</Data>
        <Data Name='Status'>0x0</Data>
        <Data Name='FailureReason'>%%2313</Data>
        <Data Name='SubStatus'>0x0</Data>
        <Data Name='LogonType'>10</Data>
    </EventData>
</Event> 
```

我在提出可以从 XML 中提取值（属性值和相应的元素值）的东西时遇到了一点问题。我是否需要每个属性的声明，或者我可以返回一个列表并循环遍历这些值？

编辑：需要提取这些值，以便我可以将它们发送到数据库。我想尝试为此使用 LINQ，但 Xpath 也可以工作

EDIT2：谢谢你的三个好答案，我没有要求。尚未对答案进行投票的声誉，我需要在测试之前到达我的开发机器，但这确实看起来我正在寻找:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:18:52.577

据我了解，您需要访问属性和值作为示例来解析 xml。

> 我是否需要每个属性的声明，或者我可以返回一个列表并循环遍历这些值？

不，你没有。以下面的代码为例来解析 xml：

```
//str contains your xml
XDocument xml = XDocument.Parse(str);
XNamespace ns = "http://schemas.microsoft.com/win/2004/08/events/event";

foreach (var node in xml.Descendants(ns + "Data"))
{
    Console.WriteLine ("Name: " + (string)node.Attribute("Name") + "; "+
                       "Value: " + node.Value);
} 
```

将打印：

```
Name: SubjectUserSid; Value: S-1-0-0
Name: SubjectUserName; Value: MACHINE$
Name: SubjectDomainName; Value: DOMAIN
Name: SubjectLogonId; Value: 0x0
Name: TargetUserSid; Value: S-1-0-0
Name: TargetUserName; Value: username
Name: TargetDomainName; Value: TDname
Name: Status; Value: 0x0
Name: FailureReason; Value: %%2313
Name: SubStatus; Value: 0x0
Name: LogonType; Value: 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:18:43.060

```
XNamespace ns = "http://schemas.microsoft.com/win/2004/08/events/event";
var document = XDocument.Parse(
    "<Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'>" +
    "<EventData>" +
    "    <Data Name='SubjectUserSid'>S-1-0-0</Data>" +
    "    <Data Name='SubjectUserName'>MACHINE$</Data>" +
    "    <Data Name='SubjectDomainName'>DOMAIN</Data>" +
    "    <Data Name='SubjectLogonId'>0x0</Data>" +
    "    <Data Name='TargetUserSid'>S-1-0-0</Data>" +
    "    <Data Name='TargetUserName'>username</Data>" +
    "    <Data Name='TargetDomainName'>TDname</Data>" +
    "    <Data Name='Status'>0x0</Data>" +
    "    <Data Name='FailureReason'>%%2313</Data>" +
    "    <Data Name='SubStatus'>0x0</Data>" +
    "    <Data Name='LogonType'>10</Data>" +
    "</EventData>" +
    "</Event>");

var q = from element in document.Root.Element(ns + "EventData").Elements(ns + "Data")
        select new
        {
            Name = element.Attribute("Name").Value,
            Value = element.Value
        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:31:01.357

获取每个元素的属性：

```
var attributes = from n in xml.Descendants("Data")
                        select n.Attributes("Name").Select(s => s.Value); 
```

获取每个元素的数据：

```
var data = from n in xml.Descendants("EventData")
                        select n.Elements("Data").Select(s => s.Value); 
```

或者在一个查询中：-

```
var nodes = from n in xml.Descendants("EventData").Elements("Data")
                        select new
                        {
                            Data = n.Value,
                            Attribute = n.Attribute("Name").Value
                        }; 
```

# c# - InvalidOperationalException base.Dispose(disposing)

> ID：15878596
> 
> 赞同：-2
> 
> 时间：2013-04-08T12:05:17.867
> 
> 标签：c#, exception, dispose

我为 PLC 创建诊断应用程序。我有一个表单和几个控件，它们是从 UserControl 继承的。这个控制我切换。一种视图是仪表板、图表等。当图形运行时，会发生异常。Form1.Designer.cs 中的“base.Dispose(disposing)”行显示异常。你有什么想法，我该如何解决？感谢您的任何想法。

* * *

这是 Form1.Designer.cs 的代码。错误显示在线 base.Dispose(disposing)。基本上我不知道这部分代码是做什么的。我无法修复它。有人可以告诉我，它是如何工作的吗？这部分什么时候调用？我在我的程序中没有发现 Dispose() 方法的任何用途，仅覆盖每个 Control 中的方法（从 UserControl 继承）。谢谢

namespace WindowsFormsApplication1 { partial class Form1 { /// /// 必需的设计器变量。/// 私有 System.ComponentModel.IContainer components = null;

```
 /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        /*Updated 8.4.2013*/
        //try
        //{
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        //}
        //catch { }
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
        this.statusStrip1 = new System.Windows.Forms.StatusStrip();
        this.toolStripStatusLabel1 = new System.Windows.Forms.ToolStripStatusLabel();
        this.btn_ChangeLanguage = new System.Windows.Forms.Button();
        this.pictureBox1 = new System.Windows.Forms.PictureBox();
        this.Zobraz_Palubka = new System.Windows.Forms.Button();
        this.Zobraz_Verzi = new System.Windows.Forms.Button();
        this.Zobraz_error = new System.Windows.Forms.Button();
        this.Zobraz_Nastaveni = new System.Windows.Forms.Button();
        this.Zobraz_TestIO = new System.Windows.Forms.Button();
        this.Zobraz_monitor = new System.Windows.Forms.Button();
        this.statusStrip1.SuspendLayout();
        ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
        this.SuspendLayout();
        // 
        // statusStrip1
        // 
        this.statusStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.toolStripStatusLabel1});
        resources.ApplyResources(this.statusStrip1, "statusStrip1");
        this.statusStrip1.Name = "statusStrip1";
        // 
        // toolStripStatusLabel1
        // 
        this.toolStripStatusLabel1.Name = "toolStripStatusLabel1";
        resources.ApplyResources(this.toolStripStatusLabel1, "toolStripStatusLabel1");
        // 
        // btn_ChangeLanguage
        // 
        this.btn_ChangeLanguage.Image = global::WindowsFormsApplication1.Properties.Resources.flag_cze_mini;
        resources.ApplyResources(this.btn_ChangeLanguage, "btn_ChangeLanguage");
        this.btn_ChangeLanguage.Name = "btn_ChangeLanguage";
        this.btn_ChangeLanguage.UseVisualStyleBackColor = true;
        this.btn_ChangeLanguage.Click += new System.EventHandler(this.btn_ChangeLanguage_Click);
        this.btn_ChangeLanguage.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.btn_ChangeLanguage.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // pictureBox1
        // 
        this.pictureBox1.BackColor = System.Drawing.Color.Transparent;
        this.pictureBox1.Image = global::WindowsFormsApplication1.Properties.Resources.trojuhelnik;
        resources.ApplyResources(this.pictureBox1, "pictureBox1");
        this.pictureBox1.Name = "pictureBox1";
        this.pictureBox1.TabStop = false;
        // 
        // Zobraz_Palubka
        // 
        this.Zobraz_Palubka.Image = global::WindowsFormsApplication1.Properties.Resources.tachometr_mini;
        resources.ApplyResources(this.Zobraz_Palubka, "Zobraz_Palubka");
        this.Zobraz_Palubka.Name = "Zobraz_Palubka";
        this.Zobraz_Palubka.UseVisualStyleBackColor = true;
        this.Zobraz_Palubka.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_Palubka.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_Palubka.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Zobraz_Verzi
        // 
        this.Zobraz_Verzi.Image = global::WindowsFormsApplication1.Properties.Resources.info_mini;
        resources.ApplyResources(this.Zobraz_Verzi, "Zobraz_Verzi");
        this.Zobraz_Verzi.Name = "Zobraz_Verzi";
        this.Zobraz_Verzi.UseVisualStyleBackColor = true;
        this.Zobraz_Verzi.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_Verzi.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_Verzi.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Zobraz_error
        // 
        this.Zobraz_error.Image = global::WindowsFormsApplication1.Properties.Resources.error1_mini;
        resources.ApplyResources(this.Zobraz_error, "Zobraz_error");
        this.Zobraz_error.Name = "Zobraz_error";
        this.Zobraz_error.UseVisualStyleBackColor = true;
        this.Zobraz_error.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_error.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_error.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Zobraz_Nastaveni
        // 
        this.Zobraz_Nastaveni.Image = global::WindowsFormsApplication1.Properties.Resources.settings_mini;
        resources.ApplyResources(this.Zobraz_Nastaveni, "Zobraz_Nastaveni");
        this.Zobraz_Nastaveni.Name = "Zobraz_Nastaveni";
        this.Zobraz_Nastaveni.UseVisualStyleBackColor = true;
        this.Zobraz_Nastaveni.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_Nastaveni.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_Nastaveni.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Zobraz_TestIO
        // 
        this.Zobraz_TestIO.Image = global::WindowsFormsApplication1.Properties.Resources.testIO_mini;
        resources.ApplyResources(this.Zobraz_TestIO, "Zobraz_TestIO");
        this.Zobraz_TestIO.Name = "Zobraz_TestIO";
        this.Zobraz_TestIO.UseVisualStyleBackColor = true;
        this.Zobraz_TestIO.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_TestIO.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_TestIO.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Zobraz_monitor
        // 
        this.Zobraz_monitor.Image = global::WindowsFormsApplication1.Properties.Resources.line_graph_icon_mini;
        resources.ApplyResources(this.Zobraz_monitor, "Zobraz_monitor");
        this.Zobraz_monitor.Name = "Zobraz_monitor";
        this.Zobraz_monitor.UseVisualStyleBackColor = true;
        this.Zobraz_monitor.Click += new System.EventHandler(this.Zobraz_Click);
        this.Zobraz_monitor.MouseEnter += new System.EventHandler(this.Zobraz_Nastaveni_MouseEnter);
        this.Zobraz_monitor.MouseLeave += new System.EventHandler(this.Zobraz_Nastaveni_MouseLeave);
        // 
        // Form1
        // 
        resources.ApplyResources(this, "$this");
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.Controls.Add(this.btn_ChangeLanguage);
        this.Controls.Add(this.pictureBox1);
        this.Controls.Add(this.Zobraz_Palubka);
        this.Controls.Add(this.Zobraz_Verzi);
        this.Controls.Add(this.Zobraz_error);
        this.Controls.Add(this.statusStrip1);
        this.Controls.Add(this.Zobraz_Nastaveni);
        this.Controls.Add(this.Zobraz_TestIO);
        this.Controls.Add(this.Zobraz_monitor);
        this.Name = "Form1";
        this.statusStrip1.ResumeLayout(false);
        this.statusStrip1.PerformLayout();
        ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.Button Zobraz_monitor;
    private System.Windows.Forms.Button Zobraz_Nastaveni;
    private System.Windows.Forms.StatusStrip statusStrip1;
    private System.Windows.Forms.ToolStripStatusLabel toolStripStatusLabel1;
    private System.Windows.Forms.Button Zobraz_TestIO;
    private System.Windows.Forms.Button Zobraz_error;
    private System.Windows.Forms.Button Zobraz_Verzi;
    private System.Windows.Forms.Button Zobraz_Palubka;
    private System.Windows.Forms.PictureBox pictureBox1;
    private System.Windows.Forms.Button btn_ChangeLanguage;
} 
```

}

* * *

这是异常详细信息：

System.InvalidOperationException 未被用户代码处理 Message=Cross-thread operation not valid: Control 'Form1' 从创建它的线程以外的线程访问。Source=System.Windows.Forms StackTrace：在 System.Windows.Forms.Control.get_Handle() 在 System.Windows.Forms.Form.UpdateMenuHandles(MainMenu menu, Boolean forceRedraw) 在 System.Windows.Forms.Form.UpdateMenuHandles()在 System.Windows.Forms.Form.MenuChanged(Int32 change, Menu menu) at System.Windows.Forms.Form.Dispose(Boolean disposing) at WindowsFormsApplication1.Form1.Dispose(Boolean disposing) in c:__ *Projects*__\C#\RailJay 诊断 SW\20130408\Motor\Motor\Form1.Designer.cs：第 23 行在 System.ComponentModel.Component.Dispose() 在 System.Windows.Forms.ApplicationContext.Dispose(Boolean disposing) 在 System.Windows .Forms.Application.ThreadContext.DisposeThreadWindows() 内部异常：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:52:42.097

看来您是`Dispose`从 GUI 线程以外的线程调用的。你不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:13:51.923

您需要更具体 - 也许在您尝试做的事情中添加一些代码，在哪里？

[编辑]

正如吉姆所提到的，您正在从一个单独的线程中引用一个表单；

> 这是异常详细信息：
> 
> System.InvalidOperationException 未被用户代码处理 Message=Cross-thread operation not valid: Control 'Form1' 从创建它的线程以外的线程访问

这意味着您正试图从未在其上创建的线程中处理 Form1。

您是否在应用程序中运行了单独的线程，如果是，这是首先要查看的地方。

您是否在代码中的任何位置关闭 Form1？

# google-plus - 如何在 Google+ Pages 流上发布 Hootsuite？

> ID：15878598
> 
> 赞同：0
> 
> 时间：2013-04-08T12:05:19.363
> 
> 标签：google-plus, google-api-php-client

我想实现与***Hootsuite***相同的功能，在 PAGE STREAM 中发布帖子。但我什至不知道在哪里寻找它。看起来 Hootsuite 正在使用 API，因为它们会提示一个开放的 Auth 身份验证，用户可以在其中选择并授权该 APP 可以使用他的数据做什么。

使用 PHP 客户端，我已经能够使用时刻类在用户 APP 流（不同于用户主流）中发布，并使用 plus 类客户端从用户那里获取数据，两者都来自此处提供的 PHP 库：[https：/ /code.google.com/p/google-api-php-client/source/checkout](https://code.google.com/p/google-api-php-client/source/checkout)

但我不知道如何在用户页面中写入。有谁知道或可以指出我去哪里，至少，作为Hootsuite在主要的Google+页面流上发布？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:38:07.573

Google+ Pages API 目前仅适用于有限数量的合作伙伴，包括 HootSuite。[您可以在https://developers.google.com/+/api/pages-signup](https://developers.google.com/+/api/pages-signup)请求访问 API，但不能保证 Google 何时或什至会批准您的访问。

虽然您可以使用 HootSuite 控制台将消息发布到 Google+ 页面（请参阅[http://hoosuite.com/google+](http://hootsuite.com/google+)），但您是否可以使用 HootSuite API 来执行此操作尚不清楚。

# javascript - Tumblr 帖子总数统计 - 可能吗？

> ID：15878600
> 
> 赞同：1
> 
> 时间：2013-04-08T12:05:20.450
> 
> 标签：javascript, html, api, tumblr

我有一个有 9 个成员的群组 Tumblr 博客。我目前是它的主要贡献者，当我不发帖时，我注意到该博客有时会陷入闲置状态。作为发帖的激励，我想出了一个想法，我需要你的帮助来实现它。

我想在索引页面的一个框中列出主要贡献者，如下所示：

**作者 / 帖子 / 每个帖子的平均注释**
john / 456 / 45.8
phil / 34 / 12.5

等等。

我知道基本 HTML 的方法，并且在“安装”JS 但不编写它时没有问题。我已经看到 Tumblr 博客的功能使用 API 扩展了十倍，但是，我不知道这是什么。

有人可以告诉我这个请求在 Tumblr 上是否可行，如果不是，什么是 API，我如何使用它来改进我的博客？

# floating-point - fortran 90（浮点错误：溢出）

> ID：15878604
> 
> 赞同：0
> 
> 时间：2013-04-08T12:05:25.873
> 
> 标签：floating-point, fortran90

我正在处理下面的代码，并且收到“运行时错误 M6104：MATH 浮点错误：溢出”。我在网上搜索了错误，并写道输出值的范围比我表示为输入的输入值高。我正在使用 Microsoft Developer Studio，因为当我调试程序时我的计算机是 64 位的，所以我关闭了。所以，我看不出哪些线路会产生问题。如果您检查代码并向我提供有关问题所在的任何线索，我将非常高兴。

编码;

```
! computer code for lid-driven cavity
parameter (n=100,m=100)
real f(0:8,0:n,0:m)
real rho(0:n,0:m)
real w(0:8), cx(0:8),cy(0:8)
real u(0:n,0:m), v(0:n,0:m)
integer i
real tminv(0:8,0:8),sm(0:8),tm(0:8,0:8),stmiv(0:8,0:8)
real ev(0:8,0:8)
open(2,file='uvfield')
open(3,file='uvely')
open(4,file='vvelx')  
open(8,file='timeu')
open(10,file='tmat')
w(:)=(/4./9.,1./9.,1./9.,1./9.,1./9.,1./36.,1./36.,1./36.,1./36./)
cx(:)=(/0.,1.,0.,-1.,0.,1.,-1.,-1.,1./)
cy(:)=(/0.,0.,1.,0.,-1.,1.,1.,-1.,-1./)
tm(0,:)=(/1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0/)
tm(1,:)=(/-4.,-1.,-1.,-1.,-1.,-2.0,-2.0,-2.0,-2.0/)
tm(2,:)=(/-4.0,-2.,-2.,-2.,-2.,1.0,1.0,1.0,1.0/)
tm(3,:)=(/0.0,1.0,0.0,-1.,0.0,1.0,-1.,-1.,1.0/)
tm(4,:)=(/0.0,-2.,0.0,2.0,0.0,1.0,-1.,-1.,1.0/)
tm(5,:)=(/0.0,0.0,1.0,0.0,-1.,1.0,1.0,-1.,-1.0/)
tm(6,:)=(/0.0,0.0,-2.,0.0,2.0,1.0,1.0,-1.,-1./)
tm(7,:)=(/0.0,0.0,-1.,1.0,-1.,0.0,0.0,0.0,0.0/)
tm(8,:)=(/0.0,0.0,0.0,0.0,0.0,1.0,-1.,1.0,-1./)
a1=1./36.
tminv(0,:)=(/4.*a1,-4.*a1,4.*a1,0.,0.,0.,0.,0.,0./)
tminv(1,:)=(/4.*a1,-a1,-2.*a1,6.*a1,-6.*a1,0.,0.,9.*a1,0.0/)
tminv(2,:)=(/4.*a1,-a1,-2.*a1,0.,0.0,6.*a1,-6.*a1,-9.*a1,0.0/)
tminv(3,:)=(/4.*a1,-a1,-2.*a1,-6.*a1,6.*a1,0.,0.,9.*a1,0.0/)
tminv(4,:)=(/4.*a1,-a1,-2.*a1,0.,0.,-6.*a1,6.*a1,-9.*a1,0./)
tminv(5,:)=(/4.*a1,2.*a1,a1,6.*a1,3.*a1,6.*a1,3.*a1,0.,9.*a1/)
tminv(6,:)=(/4.*a1,2.*a1,a1,-6.*a1,-3.*a1,6.*a1,3.*a1,0.,-9.*a1/)
tminv(7,:)=(/4.*a1,2.*a1,a1,-6.*a1,-3.*a1,-6.*a1,-3.*a1,0.,9.*a1/)
tminv(8,:)=(/4.*a1,2.*a1,a1,6.*a1,3.*a1,-6.*a1,3.*a1,0.,-9.*a1/)
do i=0,8
do j=0,8
sumcc=0.0
do l=0,8
sumcc=sumcc+tminv(i,l)*tm(l,j)
end do
ev(i,j)=sumcc
end do
end do
do i=0,8
print*,(ev(i,j),j=0,8)
end do

uo=0.05
rhoo=1.00
dx=1.0
dy=dx
dt=1.0
alpha=0.001
Re=uo*m/alpha
print*,"Re=",Re
omega=1.0/(3.*alpha+0.5)
tau=1./omega

sm(:)=(/1.0,1.4,1.4,1.0,1.2,1.0,1.2,tau,tau/)
do i=0,8
do j=0,8
stmiv(i,j)=tminv(i,j)*sm(j)

end do
end do
do i=0,8
print*,(stmiv(i,j),j=0,8)
end do

mstep=1000
do j=0,m
do i=0,n
rho(i,j)=rhoo
u(i,j)=0.0
v(i,j)=0.0
end do
end do
do i=1,n-1
u(i,m)=uo
v(i,m)=0.0
end do
!main loop
do kk=1,mstep
call collesion(u,v,f,rho,n,m,tm,stmiv)
call streaming (f,n,m)
! ---------------
call sfbound(f,n,m,uo)
call rhouv(f,rho,u,v,cx,cy,n,m)
print*,u(0,m/2),v(0,m/2),rho(0,m/2),u(n,m/2),v(n,m/2),rho(n,m/2)
write(8,*)kk,u(n/2,m/2),v(n/2,m/2)
END DO
!end of main loop
call result(u,v,rho,uo,n,m)
stop
end
!end of main program

subroutine collesion(u,v,f,rho,n,m,tm,stmiv)
real f(0:8,0:n,0:m)
real rho(0:n,0:m)
real u(0:n,0:m), v(0:n,0:m)
real tm(0:8,0:8),stmiv(0:8,0:8)
real fmom(0:8,0:n,0:m),fmeq(0:8,0:n,0:m)
!calculate equilibrium moments
do i=0,n
do j=0,m
t1=u(i,j)*u(i,j)+v(i,j)*v(i,j)
fmeq(0,i,j)=rho(i,j)
fmeq(1,i,j)=rho(i,j)*(-2.0+3.0*rho(i,j)*t1)
fmeq(2,i,j)=rho(i,j)*(1.0-3.0*rho(i,j)*t1)
fmeq(3,i,j)=rho(i,j)*u(i,j)
fmeq(4,i,j)=-rho(i,j)*u(i,j)
fmeq(5,i,j)=rho(i,j)*v(i,j)
fmeq(6,i,j)=-rho(i,j)*v(i,j)
fmeq(7,i,j)=rho(i,j)*(u(i,j)*u(i,j)-v(i,j)*v(i,j))
fmeq(8,i,j)=rho(i,j)*u(i,j)*v(i,j)
end do
end do
!calculate moments
do i=0,n
do j=0,m
do k=0,8
suma=0.0
do l=0,8
suma=suma+tm(k,l)*f(l,i,j)
end do
fmom(k,i,j)=suma
end do
end do
end do
!collision in the moment space  
do i=0,n
do j=0,m
do k=0,8
sumb=0.0
do l=0,8
sumb=sumb+stmiv(k,l)*(fmom(l,i,j)-fmeq(l,i,j))
end do
f(k,i,j)=f(k,i,j)-sumb
end do
end do
end do
return
end
subroutine streaming(f,n,m)
real f(0:8,0:n,0:m)
! streaming
DO j=0,m
DO i=n,1,-1 !RIGHT TO LEFT
f(1,i,j)=f(1,i-1,j)
END DO
DO i=0,n-1 !LEFT TO RIGHT
f(3,i,j)=f(3,i+1,j)
END DO
END DO
DO j=m,1,-1 !TOP TO BOTTOM
DO i=0,n
f(2,i,j)=f(2,i,j-1)
END DO
DO i=n,1,-1
f(5,i,j)=f(5,i-1,j-1)
END DO
DO i=0,n-1
f(6,i,j)=f(6,i+1,j-1)
END DO
END DO
DO j=0,m-1 !BOTTOM TO TOP
DO i=0,n
f(4,i,j)=f(4,i,j+1)
END DO
DO i=0,n-1
f(7,i,j)=f(7,i+1,j+1)
END DO
DO i=n,1,-1
f(8,i,j)=f(8,i-1,j+1)
END DO
END DO
return
end
subroutine sfbound(f,n,m,uo)
real f(0:8,0:n,0:m)
do j=0,m
! bounce back on west boundary
f(1,0,j)=f(3,0,j)
f(5,0,j)=f(7,0,j)
f(8,0,j)=f(6,0,j)
! bounce back on east boundary
f(3,n,j)=f(1,n,j)
f(7,n,j)=f(5,n,j)
f(6,n,j)=f(8,n,j)
end do
! bounce back on south boundary
do i=0,n
f(2,i,0)=f(4,i,0)
f(5,i,0)=f(7,i,0)
f(6,i,0)=f(8,i,0)
end do
! moving lid, north boundary
do i=1,n-1
rhon=f(0,i,m)+f(1,i,m)+f(3,i,m)+2.*(f(2,i,m)+f(6,i,m)+f(5,i,m))
f(4,i,m)=f(2,i,m)
f(8,i,m)=f(6,i,m)+rhon*uo/6.0
f(7,i,m)=f(5,i,m)-rhon*uo/6.0
end do
return
end
subroutine rhouv(f,rho,u,v,cx,cy,n,m)
real f(0:8,0:n,0:m),rho(0:n,0:m),u(0:n,0:m),v(0:n,0:m),cx(0:8),cy(0:8)
do j=0,m
do i=0,n
ssum=0.0
do k=0,8
ssum=ssum+f(k,i,j)
end do
rho(i,j)=ssum
end do
end do
do i=1,n
rho(i,m)=f(0,i,m)+f(1,i,m)+f(3,i,m)+2.*(f(2,i,m)+f(6,i,m)+f(5,i,m))
end do
DO i=1,n
DO j=1,m-1
usum=0.0
vsum=0.0
DO k=0,8
usum=usum+f(k,i,j)*cx(k)
vsum=vsum+f(k,i,j)*cy(k)
END DO
u(i,j)=usum/rho(i,j)
v(i,j)=vsum/rho(i,j)
END DO
END DO
return
end
subroutine result(u,v,rho,uo,n,m)
real u(0:n,0:m),v(0:n,0:m)
real rho(0:n,0:m),strf(0:n,0:m)
open(5, file='streamf')
! streamfunction calculations
strf(0,0)=0.
do i=0,n
rhoav=0.5*(rho(i-1,0)+rho(i,0))
if(i.ne.0) strf(i,0)=strf(i-1,0)-rhoav*0.5*(v(i-1,0)+v(i,0))
do j=1,m
rhom=0.5*(rho(i,j)+rho(i,j-1))
strf(i,j)=strf(i,j-1)+rhom*0.5*(u(i,j-1)+u(i,j))
end do
end do
! 
write(2,*)"VARIABLES =X, Y, U, V, S"
write(2,*)"ZONE ","I=",n+1,"J=",m+1,",","F=BLOCK"
do j=0,m
write(2,*)(i,i=0,n)
end do
do j=0,m
write(2,*)(j,i=0,n) 
end do
do j=0,m
write(2,*)(u(i,j),i=0,n)
end do
do j=0,m
write(2,*)(v(i,j),i=0,n)
end do
do j=0,m
write(2,*)(strf(i,j),i=0,n)
end do
do j=0,m
write(3,*)j/float(m),u(n/2,j)/uo,u(3*n/4,j)/uo
end do
do i=0,n
write(4,*) i/float(n),v(i,m/2)/uo
end do
return
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:55:45.700

你是如何运行它的？如果您在 Visual Studio 中使用 F5 运行，它应该在代码中断时停止。

小事： a) 尝试为输出通道使用更高的数字。大多数编译器使用 1、2、5、6 之类的低数字作为控制台的输入/来自控制台 b）您似乎没有关闭任何通道 c）在子程序结果中，您打开了流 5，但根本不使用它。d) 如果你缩进你的代码而不是从第 1 列开始，它会更容易阅读。例如

```
do i=0,8
   do j=0,8
      sumcc=0.0
      do l=0,8
         sumcc=sumcc+tminv(i,l)*tm(l,j)
      end do
      ev(i,j)=sumcc
   end do
end do 
```

e) 通常在 VS 中，浮点异常是关闭的。启动调试器，在第一个可执行行上设置断点，转到 Debug/Exceptions/Win32 exceptions。打开所有浮点异常。f) Visual Studio 中的条件中断可能非常慢，尤其是对于 9x101x101 矩阵。你可以做类似的事情

```
sumb = sumb + ...
if (sumb .gt. 10000.0) then
   print *,'break here'
end if 
```

并设置打印语句所在的断点。

# javascript - jQuery中有没有类似于Dojo GFX的东西？

> ID：15878609
> 
> 赞同：1
> 
> 时间：2013-04-08T12:05:44.750
> 
> 标签：javascript, jquery, graphics, dojo

[dojox.gfx](http://dojotoolkit.org/reference-guide/1.8/dojox/gfx.html) (GFX) 是与 dojo 一起运行的跨平台矢量图形 API。

它有助于将您的应用程序与所有现代浏览器中的许多本机矢量图形实现差异隔离开来。

从`dojox/gfx`文档中：

> 从 Dojo 1.8 开始，实现了以下原生矢量图形引擎适配：
> 
> *   SVG (Firefox 1.5-3.0, Safari(Webkit) 3+, Opera 9+, Chrome 1.0+, iPhone Safari 2.1+
> *   VML (IE 6-7-8)
> *   Silverlight（Microsoft 支持的任何地方）
> *   Canvas（Firefox 3.0+、Safari 3.0+ 包括 iOS Safari 1.0+）、Opera 9.0+、Chrome、IE9+
> 
> 使用 SVGWeb 的新实验性渲染器的开发也在进行中。

jQuery中有没有类似于dojo GFX的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:37:58.130

不幸的是，本机 jQuery 库中没有任何内容。您将不得不使用其他插件/库来获得相同级别的支持。我相信[raphael](http://raphaeljs.com/)支持 SVG 和 VML。或者，您仍然可以在`dojox/gfx`jQuery 旁边使用该模块。你的 JS 中会有一些额外的臃肿，因为很多 Dojo 库都不会被使用，但缩小会有所帮助（如果你真的有野心，你*可以*去掉不需要的部分，但这需要大量挖掘源代码）。

# meteor - 如何在 Meteor/Telescope 中实现全文搜索

> ID：15878611
> 
> 赞同：4
> 
> 时间：2013-04-08T12:05:54.920
> 
> 标签：meteor, publish-subscribe

我曾尝试使用纯 JavaScript 在 Telescope 中实现搜索，因为看起来 FTS 需要一段时间才能实现 Meteor，而且我还无法让 2.4 与 Meteor 很好地配合使用。

我正在使用已在 Telescope 中实现的现有分页模型来显示热门/新/最佳帖子，以及当您导航到 /search/foobar 时在路由器中设置的搜索关键字的会话变量。

但是，它似乎并没有奏效。例如，当我有 100 个帖子时，常规的分页订阅只会返回其中的 25 个，而我的搜索结果只显示前 25 个中的帖子。

几天来，我一直在用头撞墙试图调试这个：有时它有效，有时它不起作用！

这是代码（我已包含所有其他搜索代码以供参考）：

**应用程序.js：**

```
var resultsPostsSubscription = function() {
  var handle = paginatedSearchSubscription( 10, 'searchResults' );
  handle.fetch = function() {
    return limitDocuments( searchPosts( Session.get( 'keyword' ) ), handle.loaded() );
  };
  return handle;
};

var resultsPostsHandle = resultsPostsSubscription(); 
```

**分页_sub.js：**

我复制了现有的 paginatedSubscription，因为我无法将 Session var 作为 arg 传入；它需要是动态的。稍后我可能会重构。

```
paginatedSearchSubscription = function (perPage/*, name, arguments */) {
  var handle = new PaginatedSubscriptionHandle(perPage);
  var args = Array.prototype.slice.call(arguments, 1);

  Meteor.autosubscribe(function() {
    var subHandle = Meteor.subscribe.apply(this, args.concat([
      Session.get( 'keyword' ), handle.limit(), function() { handle.done(); }
    ]));
    handle.stop = subHandle.stop;
  });

  return handle;
} 
```

**search.js：（**新文件，在 /common 目录中）

```
// get all posts where headline, categories, tags or body are LIKE %keyword%
searchPosts = function( keyword ) {
  var query = new RegExp( keyword, 'i' );
  var results = Posts.find( { $or: [ { 'headline': query }, { 'categories': query }, { 'tags': query }, { 'body': query } ] } );
  return results;
}; 
```

**发布.js：**

```
Meteor.publish( 'searchResults', searchPosts ); 
```

**post_list.html：**

```
<template name="posts_results">
  {{> posts_list resultsPostsHandle}}
</template> 
```

**post_list.js：**

```
Template.posts_results.resultsPostsHandle = function() { 
  return resultsPostsHandle;
}; 
```

**router.js：** 导航中有一个搜索栏重定向到这里

```
posts_results = function( keyword ) {
  Session.set( 'keyword' , keyword );
  return 'posts_results';
};

Meteor.Router.add({
    ...
  '/search/:keyword':posts_results,
  ...
}) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T00:06:10.750

有点晚了，但[这里](http://www.meteorpedia.com/read/Fulltext_search)有一篇关于如何在流星中实现全文搜索的完整文章。

*“不编辑任何 Meteor 代码的最简单方法是使用自己的 mongodb。”*

# android - Google Maps Android MapView v2：禁用缩放

> ID：15878616
> 
> 赞同：10
> 
> 时间：2013-04-08T12:06:08.547
> 
> 标签：android, android-mapview, google-maps-android-api-2

有没有办法禁用缩放（捏和双击）`MapView`但保持滚动？

这意味着将 clickable 设置为 false 将不起作用。

我也尝试过设置一个`onTouch listener`但`activity`它不会触发使用：

```
mapView.setOnTouchListener(this); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-08T12:14:13.423

```
import com.google.android.gms.maps.GoogleMap;

public void onMapReady(GoogleMap map) {
...
map.getUiSettings().setZoomGesturesEnabled(false); 
```

[用户界面设置文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings#setZoomGesturesEnabled%28boolean%29)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T12:15:53.220

您可以使用文件分配这些属性`XML`：

```
 map:uiRotateGestures="true"
   map:uiScrollGestures="true"
   map:uiTiltGestures="true"
   map:uiZoomGestures="true" 
```

所以使用：

```
 map:uiZoomGestures="false" 
```

在`MapFragment`物体上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-10T10:02:46.333

这是**Kotlin 的示例：**

```
map.uiSettings.setAllGesturesEnabled(false) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-08T11:52:04.097

你也可以尝试类似的东西..

**注意：此方法禁用 Google 地图 UI 的放大/缩小功能**

**根据所提出的问题，以上两个答案是正确的。感谢大卫更新我。**

```
GoogleMap myMap;

myMap.getUiSettings().setZoomControlsEnabled(false); 
```

有关可用于 Google Map UI 的更多公共方法..

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings#setZoomControlsEnabled(boolean)](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings#setZoomControlsEnabled(boolean))

# opengl-es - cocos2d中的颜色缓冲和纹理格式是什么意思？

> ID：15878617
> 
> 赞同：0
> 
> 时间：2013-04-08T12:06:10.153
> 
> 标签：opengl-es, cocos2d-iphone, game-engine, cocos2d-x

在 cocos2d. 我们使用

`CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds] pixelFormat:kEAGLColorFormatRGB565 //kEAGLColorFormatRGBA8 depthFormat:0 //GL_DEPTH_COMPONENT24_OES preserveBackbuffer:NO sharegroup:nil multiSampling:NO numberOfSamples:0];`

使用颜色缓冲区和深度缓冲区创建 CCG​​LView。但是缓冲区是什么意思呢？

我们使用

`[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];`

设置纹理格式。它的意义是什么。

我找不到缓冲区和纹理格式之间的关系和不同。它们是如何工作的？

**我们设置了 16 位缓冲区，但设置了 32 位纹理格式。为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:07:27.423

请参考以下链接：

**解释什么是缓冲区以及它们如何应用于 Cocos2d**
[http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/) [http://www.glprogramming.com /red/chapter10.html](http://www.glprogramming.com/red/chapter10.html)

**cocos2d 关于缓冲区的文档**
[http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:setup_buffers](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:setup_buffers)

**关于 RGBA8888 的 cocos2d 文档**
[http://www.cocos2d-iphone.org/archives/61](http://www.cocos2d-iphone.org/archives/61)

# dynamics-crm-2011 - 为表单上的单个字段禁用 CRM 2011 表单助手

> ID：15878620
> 
> 赞同：0
> 
> 时间：2013-04-08T12:06:13.813
> 
> 标签：dynamics-crm-2011

如何为表单上的单个字段禁用（或启用）表单助手？

可以从“显示”选项卡下的“表单属性”中启用/禁用表单助手，
或者可以更改表单 XML：

```
 <form enablerelatedinformation="false"> 
```

或者这个*不受支持的*JavaScript：

```
 document.getElementById('tdRelatedInformationPane').style.display = 'none'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:07:22.873

是否可以禁用单个字段的表单助手，需要删除相应的选项

```
var name = "contractid";
var field = document.getElementById(name + "_context");
field.parentNode.removeChild(field); 
```

我刚刚在这里写了一个更有用的 javascript 函数：

[禁用选定字段的 CRM 2011 表单助手](http://www.crmanswers.net/2013/04/disable-crm-2011-form-assistant-for.html)

注意：**是不受支持的自定义**

# regex - 忽略与 git diff 中的字符串匹配的更改

> ID：15878622
> 
> 赞同：43
> 
> 时间：2013-04-08T12:06:20.720
> 
> 标签：regex, git, diff

我对 git 中受版本控制的大量文件进行了一次简单的更改，我希望能够检查是否没有其他更改滑入这个大型提交。

变化都是形式

```
-                       "main()",
+                       OOMPH_CURRENT_FUNCTION, 
```

其中“main()”可以是任何函数的名称。我想生成所有不属于这种形式的更改的差异。

git diff 的 -G 和 -S 选项非常接近——它们会找到与字符串或正则表达式匹配的更改。

有没有好的方法来做到这一点？

## 迄今为止的尝试

另一个[问题](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)描述了如何否定正则表达式，使用这种方法我认为命令应该是

```
git diff -G '^((?!OOMPH_CURRENT_FUNCTION).)*$' 
```

但这只是返回错误消息

```
fatal: invalid log-grep regex: Invalid preceding regular expression 
```

所以我猜git不支持这个正则表达式功能。

我还注意到标准的 unix diff 具有 -I 选项来“忽略行都匹配 RE 的更改”。但是我找不到用 unix diff 工具替换 git 自己的 diff 的正确方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T10:10:01.210

尝试以下操作：

```
$ git diff > full_diff.txt
$ git diff -G "your pattern" > matching_diff.txt 
```

然后，您可以像这样比较两者：

```
$ diff matching_diff.txt full_diff.txt 
```

如果所有更改都与模式匹配，`full_diff.txt`并且`matching_diff.txt`将是相同的，那么最后一个`diff`命令将不会返回任何内容。

如果有与模式不匹配的更改，最后一个`diff`将突出显示这些更改。

* * *

您可以结合上述所有步骤，避免创建两个额外的文件，如下所示：

```
diff <(git diff -G "your pattern") <(git diff)  # works with other diff tools too 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2020-11-09T20:14:41.873

不再需要 grep！

在 Git 2.30（2021 年第一季度）中，“ [`git diff`](https://github.com/git/git/blob/1ae0949a036864de1f5caa7b375b875284d1c69e/Documentation/git-diff.txt)” ^(（[man](https://git-scm.com/docs/git-diff)）)系列命令学习了“ **`-I<regex>`**”选项来忽略更改的行都与给定模式匹配的帅哥。

请参阅[Michał Kępień ( ) 的](https://github.com/kempniu)[提交 296d4a9](https://github.com/git/git/commit/296d4a94e7231a1d57356889f51bff57a1a3c5a1)和[提交 ec7967c](https://github.com/git/git/commit/ec7967cfafd5844e33afbc1e6fb8ba1b9e5b111b)（2020 年 10 月 20 日[）](https://github.com/kempniu)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 1ae0949](https://github.com/git/git/commit/1ae0949a036864de1f5caa7b375b875284d1c69e))^(中，2020 年 11 月 2 日）)[`kempniu`](https://github.com/kempniu)
^([`gitster`](https://github.com/gitster))

> ## [`diff`](https://github.com/git/git/commit/296d4a94e7231a1d57356889f51bff57a1a3c5a1)：添加`-I<regex>`忽略匹配的更改
> 
> ^(签字人：Michał Kępień)

> 添加一个新的 diff 选项，该选项允许忽略所有行（更改、删除和添加）与给定正则表达式匹配的更改。
> 这类似于独立实用程序中的`-I`/`--ignore-matching-lines`选项，`diff`可用于例如忽略仅影响代码注释的更改或在包含大量自动应用修改的提交中查找不相关的更改（例如树范围的字符串替换）。
> 
> `-G`/`-S`和新选项之间的区别在于`-I`后者基于每次更改过滤输出。
> 
> 使用 'ignore' 字段`xdchange_t`将更改标记为是否忽略。
> 由于 使用相同的字段`--ignore-blank-lines`，相同的大块发射规则适用于`--ignore-blank-lines`和`-I`。
> 这两个选项也可以在同一个`git`调用中一起使用（它们是互补的）。
> 
> 重命名`xdl_mark_ignorable()`为`xdl_mark_ignorable_lines()`，以表明它在逻辑上是“兄弟”`xdl_mark_ignorable_regex()`而不是“父”。

`diff-options`现在在其[手册页](https://github.com/git/git/blob/296d4a94e7231a1d57356889f51bff57a1a3c5a1/Documentation/diff-options.txt#L684-L688)中包含：

> ## `-I<regex>`
> 
> ## `--ignore-matching-lines=<regex>`
> 
> 忽略所有行匹配的更改`<regex>`。
> 可以多次指定此选项。

[例子](https://github.com/git/git/blob/296d4a94e7231a1d57356889f51bff57a1a3c5a1/t/t4013-diff-various.sh#L454-L491)：

```
git diff --ignore-blank-lines -I"ten.*e" -I"^[124-9]" 
```

* * *

`diff -I<regexp>`Git 2.31（2021 年第一季度）已更正“”中的一个小内存泄漏。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 c45dc9c](https://github.com/git/git/commit/c45dc9cf30a6f7f40adb3ea70dd2f2905ecd4afa)和[提交 e900d49](https://github.com/git/git/commit/e900d494dcff7bb9033865e61b452128ff232481)（2021 年 2 月 11 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([45df6c4 提交中](https://github.com/git/git/commit/45df6c4d756df25d04f82f4803923baaf0c12a33))^(，2021 年 2 月 22 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## [`diff`](https://github.com/git/git/commit/c45dc9cf30a6f7f40adb3ea70dd2f2905ecd4afa): 堵住 regcomp() 的内存泄漏`{log,diff} -I`
> 
> ^(签字人：Ævar Arnfjörð Bjarmason)

> 通过释放[它](https://github.com/git/git/commit/1ae0949a036864de1f5caa7b375b875284d1c69e)在[新](https://github.com/git/git/commit/7f7ebe054af6d831b999d6c2241b9227c4e4e08d)[引入](https://github.com/git/git/commit/296d4a94e7231a1d57356889f51bff57a1a3c5a1)的. `diff`_`diff_free()`
> 
> 此内存泄漏是在[296d4a9](https://github.com/git/git/commit/296d4a94e7231a1d57356889f51bff57a1a3c5a1)中有意引入的，请参阅[关于它的先前迭代的讨论](https://lore.kernel.org/git/xmqqeelycajx.fsf@gitster.c.googlers.com/)。
> 
> 那时释放内存有点乏味，但由于它不再是新引入`diff_free()`的让我们使用它。
> 
> 让我们保留模式`diff_free_file()`并添加 a `diff_free_ignore_regex()`，即使（不像`"diff_free_file")`我们不需要在其他地方调用它。
> 我认为这将使代码更具可读性，而不是逐渐积累一个巨大的函数，在不相关的代码之间`diff_free()`共享“ ”等。`int i`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-07-08T13:35:12.923

使用`git difftool`运行一个真正的`diff`.

示例：[https](https://github.com/cben/kubernetes-discovery-samples/commit/b1e946434e73d8d1650c887f7d49b46dcbd835a6)
://github.com/cben/kubernetes-discovery-samples/commit/b1e946434e73d8d1650c887f7d49b46dcbd835a6 我创建了一个`diff`以我想要的方式运行的脚本（这里我将`curl --verbose`输出保留在回购中，每次都会导致无聊的更改我重新运行卷曲）：

```
#!/bin/bash
diff --recursive --unified=1 --color \
     --ignore-matching-lines=serverAddress \
     --ignore-matching-lines='^\*  subject:' \
     --ignore-matching-lines='^\*  start date:' \
     --ignore-matching-lines='^\*  expire date:' \
     --ignore-matching-lines='^\*  issuer:' \
     --ignore-matching-lines='^< Date:' \
     --ignore-matching-lines='^< Content-Length:' \
     --ignore-matching-lines='--:--:--' \
     --ignore-matching-lines='{ \[[0-9]* bytes data\]' \
     "$@" 
```

现在我可以运行`git difftool --dir-diff --extcmd=path/to/above/script.sh`并且只看到有趣的变化。

关于 GNU diff `-I`aka的一个重要警告`--ignore-matching-lines`：这只是防止此类行使块“有趣”，但是当这些更改与其他未忽略的更改出现在同一块中时，它仍会显示它们。我在`--unified=1`上面使用通过使块更小来减少这种影响（每次更改上方和下方只有 1 个上下文行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-29T02:46:11.953

我认为我使用管道和`grep`. 我有两个文件需要检查不包括`@@`and的差异`g:`，所以我这样做了（从[这里](https://stackoverflow.com/questions/18810623/git-diff-to-show-only-lines-that-have-been-modified)、[这里](https://stackoverflow.com/questions/5637311/how-to-use-git-diff-color-words-outside-a-git-repository)和[这里](https://stackoverflow.com/questions/11561498/how-to-compare-two-files-not-in-repo-using-git)借用：

```
$ git diff -U0 --color-words --no-index file1.tex file2.tex | grep -v -e "@@" -e "g:" 
```

这似乎起到了作用。颜色仍然存在。

所以我假设你可以采用更简单的`git diff`命令/输出并做同样的事情。我喜欢这个的是它不需要制作新文件或重定向（管道除外）。

# facebook - Facebook API 多种搜索类型

> ID：15878623
> 
> 赞同：4
> 
> 时间：2013-04-08T12:06:24.440
> 
> 标签：facebook, facebook-graph-api

嗨，提前感谢。

我目前正在使用 Facebook API，我想在我的系统中加入搜索功能，但唯一的问题是我想使用一个或多个关键字来搜索一种或多种类型的对象。

换句话说，不仅可以搜索帖子，而且我希望能够搜索帖子、用户甚至事件。

我试图将参数类型设置如下`type='post,user'`，但它不返回任何内容，结果为空。

有没有办法做到这一点？Facebook API 手册并没有对搜索进行太多说明。

# matlab - 在鼠标向上触发 matlab uitable cellselection 回调

> ID：15878627
> 
> 赞同：2
> 
> 时间：2013-04-08T12:06:30.120
> 
> 标签：matlab, callback, mouse, matlab-uitable

我有一个带有复选框列的 uitable。我想切换每个选定单元格的复选框状态。显然，当用户仍在向选择中添加单元格时执行回调函数时，这不起作用。它应该在用户释放鼠标之前执行。

然而，每次选择区域变化时，单元格选择回调函数的正常行为都会触发。

如何改变这种行为？

一个

# android - Android Systrace 工具内部使用 strace 还是 ftrace？

> ID：15878632
> 
> 赞同：7
> 
> 时间：2013-04-08T12:06:39.233
> 
> 标签：android, linux, trace, systrace

**Systrace** Android 工具在内部调用一个名为**atrace**的工具，它是**ftrace**或**strace**（Linux 工具）的扩展。

如果我们通过模拟器控制台（ADB shell）连接到 Android Jelly Bean，我们可以执行**strace**工具但我们**不能**执行**ftrace**工具（命令未安装）。

通过互联网进行一些研究，我发现**strace**是**ftrace**的前身： [http://crtags.blogspot.de/2012/04/dtrace-ftrace-ltrace-strace-so-many-to.html](http://crtags.blogspot.de/2012/04/dtrace-ftrace-ltrace-strace-so-many-to.html)

查看 Android 源代码，我发现的最“*内部*”参考是**Trace.h**文件： [http ://androidxref.com/4.1.1/xref/frameworks/native/include/utils/Trace.h](http://androidxref.com/4.1.1/xref/frameworks/native/include/utils/Trace.h)

我认为这个文件然后被解析为本机 Linux 驱动程序。

但是，我仍然无法知道这个实现驱动程序是属于**strace**还是**ftrace**。“通常”，它应该是**ftrace**，因为它较新，但在这种情况下，我不知道为什么我们不能从模拟器运行**ftrace 。**相反，**strace**完全可以从模拟器中获得。

那么，是否有人知道**Systrace** Android 工具是否在非常低级别使用**strace**或**ftrace**？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:44:23.110

我已按照此处找到的说明进行操作，与**ftrace**相关： [http ://www.linuxforu.com/2010/11/kernel-tracing-with-ftrace-part-1/](http://www.linuxforu.com/2010/11/kernel-tracing-with-ftrace-part-1/)

一切都很完美。我之前无法执行**ftrace**，因为交互和检索数据是通过逻辑路径完成的。

要执行**ftrace**，在正确配置（许多步骤......）之后，在 adb shell 中：

```
root@android:# cat /sys/kernel/debug/tracing/trace > mytracefile.txt 
```

**atrace**使配置过程更容易，因此我们可以通过以下方式访问跟踪信息：

```
root@android:# atrace -s -w -t 100 > mytracefile.txt 
```

另一方面，我在这里找到了有关执行**strace**的信息：http : [//www.hokstad.com/5-simple-ways-to-troubleshoot-using-strace](http://www.hokstad.com/5-simple-ways-to-troubleshoot-using-strace)

使用 adb shell 在我的环境中成功执行了所有指示的示例。

**两种工具的交互和对结果的访问是非常不同的。**

现在我可以说**systrace** Android 工具是基于**atrace**的，而 atrace又是基于**ftrace**的。

**strace也受支持，但用于其他目的，与****systrace**无关。

问候，

# javascript - GWT：嵌入在 ui 界面中的应用程序的逻辑？

> ID：15878634
> 
> 赞同：2
> 
> 时间：2013-04-08T12:06:41.780
> 
> 标签：javascript, security, gwt

我有一个关于 GWT 的问题。我知道（我想这是正确的）用 GWT 编写的应用程序的逻辑被上传到客户端 UI。所以每个人都可以看到我是如何“编码”的以及我所有的算法（它是 javascript）！！！那么并发企业可以欺骗我的算法！

我想知道 GWT 中是否有内置的安全机制来避免这种情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:12:54.040

**不用担心，GWT 会处理它。**

> 默认情况下，GWT 会混淆它生成的 JavaScript。这样做的部分原因是为了保护您开发的应用程序的知识产权，但也因为混淆减少了生成的 JavaScript 文件的大小，使它们更快地下载和解析。

[为什么我的 GWT 生成的 JavaScript 乱码？](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/FAQ_JavaScriptGibberish)

但是，如果您想让您的代码具有人类可读性，您[可以](http://css.dzone.com/news/understanding-gwt-compiler)使用 `style -PRETTY`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:15:20.167

我不同意。我认为逻辑保留在服务器端，它作为用户界面生成的事件的回调被调用（当然，如果你的应用程序编码得很好。）如果你不喜欢这个[https://developers.google.com/web-toolkit/articles /mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)你将分离逻辑和 UI。无论如何，由 GWT 生成的 js 不是人类可读的（不确定是否有工具将其转换为人类可读的实例）。

# arrays - 在 senchatouch2 中将数组作为查询字符串参数发送

> ID：15878635
> 
> 赞同：1
> 
> 时间：2013-04-08T12:06:42.687
> 
> 标签：arrays, post, methods, sencha-touch-2, query-string

如何使用 POST 方法在 Ajax 请求中将数组作为查询字符串参数发送以访问第三方 Web 服务。

请提供示例代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:49:56.660

虽然 v 在 SenchaTouch2 中使用 POST 方法发送参数，但在 Ajax 请求中使用**jsonData**而不是 params，例如，

```
Ext.Ajax.request({
url:'',
method:'POST',
disableCaching:false,
headers: {
          'Accept':'application/json',
          'Content-Type':'application/json'
         },
**jsonData**: {
           FirstName:fname  //{"FirstName":["Sam","paul"]}
              },
    success: function(response)
    {
        console.log(response.responseText);
    },
    failure: function(response)
    {
        console.log(response.responseText);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:45:43.567

这是我通常这样做的方式

```
...
params: {
  array: Ext.encode(['1', '2', '3'])
},
... 
```

希望这可以帮助

# ajax - 向所有 ajax 调用添加变量

> ID：15878637
> 
> 赞同：0
> 
> 时间：2013-04-08T12:06:44.520
> 
> 标签：ajax, jquery

我有一个变量，我希望添加到我所有的 ajax 调用中，这怎么可能。

我试过`ajaxSetup`这样的：

```
$.ajaxSetup({
data: {'language': 'ENU'}
}); 
```

但是，一旦我在实际调用中指定数据参数，预设变量（语言）就会被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:11:28.990

根据 jQuery API 文档“[使用任何函数的所有后续 Ajax 调用都将使用新设置，除非被各个调用覆盖，直到下一次调用 $.ajaxSetup()。](http://api.jquery.com/jQuery.ajaxSetup/) ”。

`data`对于 to 的属性，这应该是正确的。*确保在设置数据之前*未指定`data`您的个人 ajax 调用或读取数据，以验证您设置的默认值是否存在，然后附加到该数据。

# c++ - 内置类型的模板参数默认值

> ID：15878638
> 
> 赞同：0
> 
> 时间：2013-04-08T12:06:48.763
> 
> 标签：c++, templates

考虑这个函数：

```
template <typename T>
T foo(const T& var = T()) {
  return var;
} 
```

这个调用显然是安全的：

```
foo<std::string>() 
```

是那些？

```
foo<int>()
foo<bool>()
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:09:18.553

是的，它们非常好。表单的表达式`T()`创建一个类型的对象`T`并对其进行值初始化。`int`对or进行值初始化`bool`与对它们进行零初始化相同。也就是说，参数`var`的值为 0。

> 表达式`T()`, 其中是非数组完整对象类型`T`的*简单类型说明符*或类型名称说明*符*[...] 创建指定类型的纯右值，其值是值初始化 (8.5) 对象产生的值类型`T`

值初始化定义为：

> 对类型对象进行值初始化`T`意味着：
> 
> *   if`T`是（可能是 cv 限定的）类类型 [...]
>     
>     
> *   if`T`是（可能是 cv 限定的）非联合类类型 [...]
>     
>     
> *   如果`T`是数组类型，[...]
>     
>     
> *   否则，对象被零初始化。

零初始化定义为：

> 对类型的对象或引用进行零初始化`T`意味着：
> 
> *   如果`T`是标量类型（3.9），则将对象设置为值`0`（零），作为整数常量表达式，转换为`T`；
>     
>     
> *   [...]

由创建的临时对象`T()`然后绑定到`const`引用，这延长了它的生命周期。

> 在两种情况下，临时对象在与完整表达式结束时不同的点被销毁。[...]第二个上下文是引用绑定到临时的。

# c++ - Boost::spirit::karma: duplicate 在 repeat 或 kleene star 中不起作用？

> ID：15878643
> 
> 赞同：1
> 
> 时间：2013-04-08T12:06:57.593
> 
> 标签：c++, boost, boost-spirit, boost-spirit-karma

这是一段非常简单的代码，用于`boost::spirit::karma`在 graphviz dot 语言中生成格式化输出：

```
#include <iostream>
#include <iterator>
#include <vector>
#include <boost/spirit/include/karma.hpp>
using namespace std;

int main() {
    vector<int> v{0,1,2,3};
    unsigned count = 17;
    {
        namespace karma = boost::spirit::karma;
        karma::generate(ostream_iterator<char>(cout), *(karma::duplicate['c' << karma::int_ << '_' << karma::lit(count) << "[xlabel=" << karma::int_ << "];\n"]), v);
    }

    return 0;
} 
```

我希望这会产生：

```
c0_17[xlabel=0];
c1_17[xlabel=1];
c2_17[xlabel=2];
c3_17[xlabel=3]; 
```

相反，它产生了：

```
c0_17[xlabel=1];
c2_17[xlabel=3]; 
```

这意味着该`duplicate[]`指令在 kleene star 中根本无效。我也尝试过该`repeat[]`指令，但这也不起作用。

我究竟做错了什么？我正在使用提升版本 1.53.0。我用`g++`4.7 和`clang++`3.2 编译了代码，都产生了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:35:17.210

```
#include <iostream>
#include <iterator>
#include <vector>
#include <boost/spirit/include/karma.hpp>
using namespace std;

int main() {
    vector<int> v{0,1,2,3};
    unsigned count = 17;
    {
        namespace karma = boost::spirit::karma;
        //karma::rule<ostream_iterator<char>, int()> xlabel = karma::duplicate['c' << karma::int_ << '_' << karma::lit(count) << "[xlabel=" << karma::int_ << "];\n"];
        //karma::generate(ostream_iterator<char>(cout), *xlabel, v);
        karma::generate(ostream_iterator<char>(cout), *karma::attr_cast<int>(karma::duplicate['c' << karma::int_ << '_' << karma::lit(count) << "[xlabel=" << karma::int_ << "];\n"]), v);
    }

    return 0;
} 
```

# c# - 使用单声道 (C#) 关闭监视器

> ID：15878645
> 
> 赞同：1
> 
> 时间：2013-04-08T12:06:59.750
> 
> 标签：c#, linux, mono, debian

我有以下代码可以关闭我目前在单击按钮时使用的 Windows 中的监视器；

```
[DllImport("user32.dll")]
public static extern int SendMessage(int hWnd, int Msg, int wParam, int lParam);
const int SC_MONITORPOWER = 0xF170;
const int WM_SYSCOMMAND = 0x0112;
const int MONITOR_ON = -1;
const int MONITOR_OFF = 2;
const int MONITOR_STANBY = 1;
int onFlag = 0;

private void MonitorOff()
{
    SendMessage(-1, WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_OFF);
    onFlag = 1;
}

private void MonitorOn()
{
    if (onFlag == 1)
    {
        SendMessage(-1, WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_ON);
        onFlag = 0;
    }
} 
```

这段代码工作正常。我现在想使用单声道在 Linux（如果有区别的话是 Debian）下做同样的事情。显然我不能使用 user32.dll 所以想知道是否有人知道如何做到这一点？

我想如果没有实现这一点的内置方法，我可以使用[这些命令......](https://superuser.com/a/31885/114431)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:54:54.513

关于此的一些额外信息；我使用的是树莓派，而 xset 和 setterm 命令只会使屏幕空白。为了真正关闭屏幕，我不得不使用`tvservice -o`（关闭）和`tvservice -p`（打开）。我没有在单声道中找到任何内置方式来执行相同的操作。

# c++ - 编译混合的 GNU Fortran/C++ MPI 共享库

> ID：15878648
> 
> 赞同：2
> 
> 时间：2013-04-08T12:07:06.443
> 
> 标签：c++, fortran, shared-libraries, mpi

我正在尝试将 C++ MPI 包装器编译为 MPI Fortran 库，但链接失败。包装器是使用编译的

```
mpic++ -c my_wrapper.cc -o my_wrapper.o 
```

my_wrapper.cc 内容如下：

```
#include "mpi.h"

extern"C" {
  void fortran_func_(int * comm,bool *do_init);
}

void c_func(MPI_Comm my_comm ) 
{
   MPI_Fint    fcomm;
   fcomm = MPI_Comm_c2f(my_comm);
   bool do_init = false;
   fortran_func_(&fcomm, &do_init);
} 
```

该库是使用编译的

```
 MPI_LINK_FLAGS = $(shell mpic++ --showme:link)
  mpif90 -shared my_wrapper.o $(FORTRAN-LIBS) $(MPI_LINK_FLAGS) -o my_libc++.a 
```

以下是链接错误：

```
 "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in my_wrapper.o
  "std::ios_base::Init::~Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in my_wrapper.o
  "vtable for __cxxabiv1::__class_type_info", referenced from:
      typeinfo for MPI::Info in my_wrapper.o
      typeinfo for MPI::Errhandler in my_wrapper.o
      typeinfo for MPI::Win in my_wrapper.o
      typeinfo for MPI::Comm_Null in my_wrapper.o
      typeinfo for MPI::Group in my_wrapper.o
      typeinfo for MPI::Request in my_wrapper.o
      typeinfo for MPI::Status in my_wrapper.o
      ...
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for __cxxabiv1::__si_class_type_info", referenced from:
      typeinfo for MPI::Intercomm in my_wrapper.o
      typeinfo for MPI::Graphcomm in my_wrapper.o
      typeinfo for MPI::Cartcomm in my_wrapper.o
      typeinfo for MPI::Intracomm in my_wrapper.o
      typeinfo for MPI::Comm in my_wrapper.o
      typeinfo for MPI::Grequest in my_wrapper.o
      typeinfo for MPI::Prequest in my_wrapper.o
      ...
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "operator delete[](void*)", referenced from:
      MPI::Datatype::Get_contents(int, int, int, int*, long*, MPI::Datatype*) const in my_wrapper.o
      MPI::Comm::Alltoallw(void const*, int const*, int const*, MPI::Datatype const*, void*, int const*, int const*, MPI::Datatype const*) const in my_wrapper.o
      MPI::Intracomm::Create_cart(int, int const*, bool const*, bool) const in my_wrapper.o
      MPI::Intracomm::Spawn_multiple(int, char const**, char const***, int const*, MPI::Info const*, int) in my_wrapper.o
      MPI::Intracomm::Spawn_multiple(int, char const**, char const***, int const*, MPI::Info const*, int, int*) in my_wrapper.o
      MPI::Cartcomm::Get_topo(int, int*, bool*, int*) const in my_wrapper.o
      MPI::Cartcomm::Sub(bool const*) const in my_wrapper.o
      ...
  "operator delete(void*)", referenced from:
      MPI::Datatype::~Datatype() in my_wrapper.o
      MPI::Datatype::~Datatype() in my_wrapper.o
      MPI::Status::~Status() in my_wrapper.o
      MPI::Status::~Status() in my_wrapper.o
      MPI::Request::~Request() in my_wrapper.o
      MPI::Request::~Request() in my_wrapper.o
      MPI::Request::~Request() in my_wrapper.o
      ...
  "operator new[](unsigned long)", referenced from:
      MPI::Datatype::Get_contents(int, int, int, int*, long*, MPI::Datatype*) const in my_wrapper.o
      MPI::Comm::Alltoallw(void const*, int const*, int const*, MPI::Datatype const*, void*, int const*, int const*, MPI::Datatype const*) const in my_wrapper.o
      MPI::Intracomm::Create_cart(int, int const*, bool const*, bool) const in my_wrapper.o
      MPI::Intracomm::convert_info_to_mpi_info(int, MPI::Info const*) in my_wrapper.o
      MPI::Cartcomm::Get_topo(int, int*, bool*, int*) const in my_wrapper.o
      MPI::Cartcomm::Sub(bool const*) const in my_wrapper.o
      MPI::Cartcomm::Map(int, int const*, bool const*) const in my_wrapper.o
      ...
  "operator new(unsigned long)", referenced from:
      MPI::Intracomm::Clone() const in my_wrapper.o
      MPI::Cartcomm::Clone() const in my_wrapper.o
      MPI::Graphcomm::Clone() const in my_wrapper.o
      MPI::Intercomm::Clone() const in my_wrapper.o
  "___cxa_pure_virtual", referenced from:
      vtable for MPI::Comm in my_wrapper.o
  "___gxx_personality_v0", referenced from:
      Dwarf Exception Unwind Info (__eh_frame) in my_wrapper.o
  ld: symbol(s) not found for architecture x86_64
  collect2: error: ld returned 1 exit status 
```

我找不到任何示例如何执行此类操作（将 Fortran/C++ 与 MPI 混合），所以我在这里询问，希望它在某些时候对其他人有用。

附言

如果我尝试编译它`mpic++`：

```
MPIF_LINK_FLAGS = $(shell mpif90 --showme:link)
mpic++ -shared my_wrapper.o $(FORTRAN-LIBS) $(MPIF_LINK_FLAGS) -o $@ 
```

我错过了很多来自 $(FORTRAN-LIBS) 的符号，当我链接到`mpif90`. 所以我想我最好将那些缺少的库添加到 Fortran 链接器中。

`Open MPI: 1.6`如果重要，我会使用。

**EDIT1：** 通过将这些添加到 mpif90 链接一切编译：

```
-L/opt/local/lib/gcc47/ -lstdc++ 
```

确实，缺少一些标准的 C++ 东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:16:10.170

您似乎正在使用 FORTRAN 链接器进行链接。它对 C++ 标准库一无所知，因此所有 C++ 标准库（的这些部分`std::ios_base`）都是“未定义符号”。您需要更改链接命令，以添加 C++ 标准库。

由于您的复合材料既不完全是 FORTRAN 也不完全是 C++，因此 FORTRAN 和 C++ 链接器都不完全合适。您可能要考虑`ld`直接使用。在这种情况下，您必须将 C++ 标准库和 FORTRAN 标准库列为要链接的库。

# asp.net - 使用 GridView.RowDataBound 事件显示特定行

> ID：15878650
> 
> 赞同：3
> 
> 时间：2013-04-08T12:07:15.563
> 
> 标签：asp.net, gridview, visual-studio-2012, rowdatabound

**问题**

我有一个 Gridview 绑定到一个项目表，其中一个属性是 clientid 和其他属性。现在我只想显示clientid等于给定id的特定行。

**我有什么**

1.  [根据条件更改 GridView 行颜色](https://stackoverflow.com/questions/5048762/change-gridview-row-color-based-on-condition-in-c-sharp)

2\. [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

每个示例似乎都更新了行值，但没有一个正在尝试我正在尝试做的事情。

**第二个选项**是创建另一个数据表并插入所有满足条件的行并将我的网格视图绑定到该表。

我想知道这是否可以使用 rowdatabound 事件来完成。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:27:32.560

你可以试试这样

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
if(check ur cobdition if condition is false)
e.Row.Visible=false;

} 
```

# discrete-mathematics - 离散数学：删除顶点后检查图的连通性？有效的方式？

> ID：15878651
> 
> 赞同：0
> 
> 时间：2013-04-08T12:07:18.863
> 
> 标签：discrete-mathematics, microsoft-distributed-file-system, disjoint-sets

第一：我承认这是编程竞赛的一部分（没有什么可以赢或什么的）

在阅读了问题并尝试了以下算法后，我得出了以下结论。

给定`n`顶点的无向连通图，

```
count = 0
For i=1 to n:
  remove(ith vertex)
  check for connectivity of graph with remaining vertices
  if connected 
    then increment count
  attach the removed vertex back
print count 
```

我通过两种方式实现了这一点：(1) DFS (2) Disjoint-Set Union 但是没有一种算法足够有效地获得 AC。是否有更好的方法来做到这一点？我不需要详细的解释，几句话就可以了，休息我会弄清楚或死去尝试：p。谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:03:19.887

一个顶点的删除使图形断开连接称为关节点。图中的所有关节点都[可以在线性时间内找到](http://en.wikipedia.org/wiki/Biconnected_component)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:47:11.533

根据您的输入图，有几个选项，每个选项都有自己的优势。我个人不会模拟每个节点的故障，然后检查整个图中的连通性，这需要太多时间。

更聪明的方法可能是构建生成树。这棵树上的每一片叶子都可以在不断开图的其余部分的情况下被移除，因为树的其余部分仍然连接其他所有部分。建造一棵树可以让您跳过单独检查的叶子。您甚至可以构建更多的树来尝试让其他一些节点（非叶子）成为叶子（然后可以跳过）。来自多个节点的 BFS 可以帮助您入门。

此外，当您模拟移除 1 个节点时，您只需检查其邻居是否仍然相互连接。如果邻居是连通的，那么图的其余部分也是连通的。如果图很密集，这应该会限制每个节点的工作量。

# javascript - 如何添加小时，分钟和秒？

> ID：15878653
> 
> 赞同：1
> 
> 时间：2013-04-08T12:07:34.110
> 
> 标签：javascript, jquery, html

我有两次 in_time 和 out_time。我想使用 javascript 添加这两次。我该怎么做？in_time 和 out_time 的值来自文本框。我的html代码是

```
<div>   
<b>PunchIn</b>
    <input type="text" id="intime" class="time" placeholder="09:00:00" />
    <p class="error">PunchTime is not valid</p>
</div>
<br/>
<div>   
    <b>OutTime</b>
    <input type="text" id="brktime" class="time" placeholder="06:00:00" />
    <p class="error1">OutTime is not valid</p>
</div> 
```

[您可以从Demo](http://jsfiddle.net/gxDcn/2/#update)中查看代码

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T12:16:28.717

将时间转换为秒，相加，然后格式化结果：

```
function toSeconds(s) {
  var p = s.split(':');
  return parseInt(p[0], 10) * 3600 + parseInt(p[1], 10) * 60 + parseInt(p[2], 10);
}

function fill(s, digits) {
  s = s.toString();
  while (s.length < digits) s = '0' + s;
  return s;
}

var sec = toSeconds(intime) + toSeconds(out);

var result =
  fill(Math.floor(sec / 3600), 2) + ':' +
  fill(Math.floor(sec / 60) % 60, 2) + ':' +
  fill(sec % 60, 2); 
```

演示：http: [//jsfiddle.net/Guffa/JLh6W/](http://jsfiddle.net/Guffa/JLh6W/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T05:30:45.823

这是javascript，还包括第二次计算

试试这个，

```
var a = "17.30.15hrs"
var b = "1.30.20hrs"

alert(addtime(a, b));

var a = "23.00.25hrs"
var b = "1.30.60hrs"

alert(addtime(a, b));

function addtime(start_time, end_time) {
    var startArr = start_time.replace('hrs', '', start_time).split('.');
    var endArr = end_time.replace('hrs', '', end_time).split('.');

    var d = new Date();
    startArr[0] = (startArr[0]) ? parseInt(startArr[0], 10) : 0;
    startArr[1] = (startArr[1]) ? parseInt(startArr[1], 10) : 0;
    startArr[2] = (startArr[2]) ? parseInt(startArr[2], 10) : 0;
    endArr[0] = (endArr[0]) ? parseInt(endArr[0], 10) : 0;
    endArr[1] = (endArr[1]) ? parseInt(endArr[1], 10) : 0;
    endArr[2] = (endArr[2]) ? parseInt(endArr[2], 10) : 0;

    d.setHours(startArr[0] + endArr[0]);
    d.setMinutes(startArr[1] + endArr[1]);
    d.setSeconds(startArr[2] + endArr[2]);

    var hours = d.getHours();
    var minutes = d.getMinutes();
    var seconds = d.getSeconds();

    return hours + '.' + minutes + '.' + seconds + 'hrs';
} 
```

演示：http: [//jsfiddle.net/AXVPf/7/](http://jsfiddle.net/AXVPf/7/)

**更新**了第二次计算

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:11:02.500

[https://github.com/timrwood/moment](https://github.com/timrwood/moment)分钟库涵盖了您需要的大部分内容。还可以查看 Google Closure Library 日期实现。[http://closure-library.googlecode.com/svn/docs/namespace_goog_date.html](http://closure-library.googlecode.com/svn/docs/namespace_goog_date.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:13:42.683

您可以使用下面的函数将时间字符串转换为数字，然后您可以将它们加在一起

```
function getTimeAsSeconds(time){
    var timeArray = time.split(':');
    return Number(timeArray [0]) * 3600 + Number(timeArray [1]) * 60 + Number(timeArray[2]);
} 
```

就像是：

```
var timeInSeconds = getTimeAsSeconds(document.getElementById('intime').value) + getTimeAsSeconds(document.getElementById('brktime').value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:16:52.630

那里有很多图书馆（没有进行谷歌搜索，但@alex23 有一个）。但是，过程通常是相同的。将字符串转换为最小公分母。在这种情况下秒。获得秒数后，将两者加在一起，然后再次将其转换回小时分秒。正如@codebox 演示的那样，这些转换是简单的乘法和除法。

# magento - 为什么 save 方法在 for 循环中只执行一次？

> ID：15878655
> 
> 赞同：0
> 
> 时间：2013-04-08T12:07:38.100
> 
> 标签：magento

脚本应该在数据库中创建 3 个条目，但我只得到一个，它是最后一个条目。

在我看来 save() 方法只执行一次，但它不应该像在 for 循环中一样运行 3 次吗？

```
public function saveAction()
{
        $vars = $this->getRequest()->getPost();
        var_dump($vars);
        $model = mage::getModel('cevent/cevent');

        for($i=0;$i<=2;$i++){

        $data = array(
          'master_customer_id'   =>  $vars['master_customer_id'][$i],
          'customer_id'          =>  'null',
          'email'                =>  $vars['email'][$i],
          'firstname'            =>  $vars['firstname'][$i],
          'surname'              =>  $vars['surname'][$i],
          'address'              =>  $vars['address'][$i],
          'city'                 =>  $vars['city'][$i]
          );

        $model->addData($data);
        $model->save();        
  }
} 
```

数据库表单中的已发布数据

```
 array
  'master_customer_id' => 
    array
      0 => string '1' (length=1)
      1 => string '1' (length=1)
      2 => string '1' (length=1)
  'firstname' => 
    array
      0 => string 'q' (length=1)
      1 => string 'w' (length=1)
      2 => string 'e' (length=1)
  'surname' => 
    array
      0 => string 'q' (length=1)
      1 => string 'w' (length=1)
      2 => string 'e' (length=1)
  'email' => 
    array
      0 => string 'q' (length=1)
      1 => string 'w' (length=1)
      2 => string 'e' (length=1)
  'address' => 
    array
      0 => string 'Invercagille' (length=12)
      1 => string 'Invercagille' (length=12)
      2 => string 'Invercagille' (length=12)
  'city' => 
    array
      0 => string 'q' (length=1)
      1 => string 'w' (length=1)
      2 => string 'e' (length=1) 
```

数据库只显示一个条目

![在此处输入图像描述](https://i.stack.imgur.com/bcWaK.jpg)

请提出一些建议，或者是否有其他方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:39:02.073

您的第一个循环创建了一个对象，接下来的所有循环都在更新同一个对象。

您必须在每个循环中重置对象才能创建新对象。

而不是使用`object->addData()`，使用`object->setData()`它将用新数据替换所有数据（并且在后台删除存储在对象数据中的先前保存的primary_key）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:40:13.550

Magento 的 ORM`save()`用于创建和更新操作。主键的存在是资源模型层用来确定是执行插入还是更新。当您的对象数据在第一次迭代期间被保存时，它会被插入，但随后会在 引用的实例上设置自动增量主键`$model`，之后您只会获得更新。您可以取消设置数据或在循环中重新实例化类`for`并完成多次插入。

# vba - 将值从文本文件导入 xls

> ID：15878656
> 
> 赞同：-6
> 
> 时间：2013-04-08T12:07:47.160
> 
> 标签：vba, excel, xls

我有一个包含一些值的文本文件，我需要将这些值填充到 xls。我怎么能用宏来做到这一点。假设我有一个如下所述的文本文件：

文件名 - data.txt

```
Records received in CIF file : 2682
Records loaded in CIF table : 2682
count : 2682 
```

我的 xls 格式为

```
File name:  Output.csv                      
Load summary:                           
    "(A)
Records received in CIF file"   "(B)
Records loaded in CIF table (temp_location)"    "(C)
Records failed to load" 
    2682    2682    2682 
```

我需要将 2682 填充到上面提到的输出文件中，但在 xls 中。在这里，我想使用 micro，以便每当我需要将值填充到 xls 时，我想通过运行宏来完成，并且值将自动填充到 xls。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:32:50.463

因此您的代码需要执行以下操作：

1.  打开数据文件，使用**FileSystemObject**，见[MSDN Library: FileSystemObject](http://msdn.microsoft.com/en-us/library/aa242706%28v=vs.60%29.aspx)
2.  开始循环读取测试文件中的数据行（请参阅[MSDN 库：如何在 VBA 中使用循环结构](http://support.microsoft.com/kb/141762)
3.  读取*CIF 文件中收到的记录末尾的文件：*并获取之后的值。请参阅[MSDN 库：OpenAsTextStream 方法](http://msdn.microsoft.com/en-us/library/aa265341%28v=vs.60%29.aspx)和[MSDN 库：FSO ReadLine 方法](http://msdn.microsoft.com/en-us/library/aa265367%28v=vs.60%29.aspx)和*字符串操作*，请参阅[学习 Excel：字符串操作](http://www.learnexcelmacro.com/2012/04/vba-programming-string-manipulation/)和[Excel VBA：字符串操作](http://www.excel-vba-easy.com/vba-programming-string-manipulation.html)，当然还有：[MSDN 库：VB6/VBA 字符串函数参考](http://msdn.microsoft.com/en-us/library/aa443428%28v=vs.60%29.aspx)
4.  从字符串中获取数字
5.  将该数字放入结果工作表中（请参阅[如何引用单元格和范围[Excel 2003 VBA 语言参考](http://msdn.microsoft.com/en-us/library/office/aa221357%28v=office.11%29.aspx)和[MS Excel Visual Basic 参考](http://msdn.microsoft.com/en-us/library/office/aa272254%28v=office.11%29.aspx)）
6.  下一个循环回到步骤 2
7.  使用**保存**方法保存工作表（请参阅[MSDN 库：Excel 工作簿保存方法](http://msdn.microsoft.com/en-us/library/office/ff197585.aspx)

阅读应该让你开始

任何问题或疑问在您尝试编写一些代码**后**告诉我们

菲利普

# php - PHP AND (&&), OR (||) 条件语句中的优先级

> ID：15878660
> 
> 赞同：0
> 
> 时间：2013-04-08T12:08:01.040
> 
> 标签：php, conditional-statements, conditional-operator

有人可以解释是否可以将 PHP If 条件语句（包含说 AND）与另一个 OR 合并？如果是这样，人们将如何构建语法？哪个优先？

例如，可能的目标是实现类似...

```
IF ($Var1 == "a" && $Var2 == "z"){
    //TRUE
        echo "HELLO WORLD";

        //<some code block here>
}

OR

IF ($Var3 == "5"){
    //TRUE
        echo "HELLO WORLD";

        //<some code block here>
} 
```

但是合并到一个 if 条件语句中，这样我就不必为两个 if 语句复制我的代码块（我知道我可以将代码放在函数中的 IF 语句中运行，但是还有另一种方法吗它）。

总而言之（注意，下面的括号纯粹是作为对项目进行分组的一种方式添加的，以表明我对如何运行/处理代码的意图）：

```
(If Var1 = a AND Var2 = b) OR (if Var3 = 5), run block of code. 
```

如果有人可以帮助我，我将不胜感激。几个月来我一直试图找出这个问题，但一无所获。抱歉，如果这已经在 Stack Overflow 上讨论过，我尝试搜索但什么也没找到，尽管我的搜索词可能是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:10:08.857

检查这个：

```
if (($Var1 == "a" && $Var2 == "z") || ($Var3 == "5")){
    //TRUE
        echo "HELLO WORLD";

        //<some code block here>
} 
```

事实上，您不需要额外的括号，因为 && 的优先级高于 ||。但是，它有助于让一切都易于跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T12:10:51.000

像这样使用：-

```
if (($Var1 == "a" && $Var2 == "z") || ($Var3 == "5")) {
    echo "Hello World";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T12:11:07.973

你几乎在那里：

```
if ( ($Var1 == "a" && $Var2 == "z") || ($Var3 == "5") ) { 
```

仔细看括号的顺序。在我遇到的几乎所有语言中，条件中的括号表示括号中表达式的结果将作为一个整体进行评估。PHP 也不例外 - 前半部分仅在 var1 = a 和 var2 = z 时为真，而后半部分 or 仅在 var3 = 5 时为真。当 [var1, var2] = [a ,z] 或 [var3] = [z]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:11:39.623

```
if ($Var1 == 'a' && $Var2 == 'b' || $Var3 == 5)
{ 
//run block of code.
} 
```

# derby - 安装 WL 应用程序时“无法获得锁”

> ID：15878662
> 
> 赞同：2
> 
> 时间：2013-04-08T12:08:11.393
> 
> 标签：derby, ibm-mobilefirst, websphere-liberty

我在安装应用程序时遇到以下问题：
使用 Worklight Console 我正在上传 .wlapp 文件，删除已部署的应用程序并尝试再次上传相同的 .wlapp。
Worklight 控制台随后被卡住，甚至通常的服务器停止也无法完成。
在残酷地杀死服务器进程并重新启动它之后，可以上传 .wlapp。

安装的 Worklight Server 是带有 Derby/Liberty 的 v5.0.6 / v5.0.6.1 CE。

这是来自服务器的错误日志：

> 从 ID = 的 GADGET_APPLICATIONS 中删除 授予 XID : {422, S} , {429, S} 。选择的受害者是 XID : 429\. [java.lang.String]".; 嵌套异常是 org.apache.openjpa.persistence.OptimisticLockException: Unable to get an object lock on "A lock could not be getting due to a deadlock,锁和服务员的循环是： Lock : ROW, GADGET_APPLICATIONS, (2,7) Waiting XID : {429, S} , WORKLIGHT, SELECT t0.ID, t0.ENFORCE_AUTHENTICITY, t0.ENVIRONMENT_ID, t1.ID, t1.DISP_IN_GALLERY, t1.LAST_UPDATE_TIME, t1.NAME, t0.SERVER_VERSION, t0.VERSION, t0.VERSION_LOCKED FROM GADGET_APPLICATIONS t0 INNER JOIN GADGETS t1 ON t0.GADGET_ID = t1.ID Granted XID: {422, S} Lock: ROW, GADGET_APPLICATIONS, (2 ,6) 等待 XID : {422, X} , WORKLIGHT, DELETE FROM GADGET_APPLICATIONS WHERE ID = ? 授予 XID : {422, S} , {429, } 。选定的受害者是 XID : 429\. [java.lang.String]". at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:285) at org.springframework.orm.jpa.DefaultJpaDialect.translateExceptionIfPossible(DefaultJpaDialect .java:120）在 org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:212) 在 org.springframework.orm.jpa.JpaAccessor.translateIfNecessary(JpaAccessor.java:152) 在 org.springframework.orm。 jpa.JpaTemplate.execute(JpaTemplate.java:189) at org.springframework.orm.jpa.JpaTemplate.executeFind(JpaTemplate.java:151) at org.springframework.orm.jpa.JpaTemplate.findByNamedQuery(JpaTemplate.java:343)在 com.worklight.server.database.api.JpaDaoHelper.executeQuery(JpaDaoHelper.java: ID，t1.DISP_IN_GALLERY，t1.LAST_UPDATE_TIME，t1.NAME，t0.SERVER_VERSION，t0.VERSION，t0.VERSION_LOCKED 从 GADGET_APPLICATIONS t0 INNER JOIN GADGETS t1 ON t0.GADGET_ID = t1.ID 授予 XID：{422，S} 锁定： ROW, GADGET_APPLICATIONS, (2,6) 等待 XID : {422, X} , WORKLIGHT, DELETE FROM GADGET_APPLICATIONS WHERE ID = ? 授予 XID : {422, S} , {429, S} 。选定的受害者是 XID : 429\. at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source) at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source) at org.apache.derby org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException（未知来源）的 org.apache.derby.impl.jdbc.EmbedConnection 中的 .impl.jdbc.TransactionResourceImpl.wrapInSQLException（未知来源）。SelectResultObjectProvider.next(SelectResultObjectProvider.java:99) at org.apache.openjpa.lib.rop.EagerResultList.(EagerResultList.java:35) ... 22 更多原因：java.sql.SQLException：无法获得锁由于死锁，锁和等待者的循环为： Lock : ROW, GADGET_APPLICATIONS, (2,7) Waiting XID : {429, S} , WORKLIGHT, SELECT t0.ID, t0.ENFORCE_AUTHENTICITY, t0.ENVIRONMENT_ID, t1.ID , t1.DISP_IN_GALLERY, t1.LAST_UPDATE_TIME, t1.NAME, t0.SERVER_VERSION, t0.VERSION, t0.VERSION_LOCKED FROM GADGET_APPLICATIONS t0 INNER JOIN GADGETS t1 ON t0.GADGET_ID = t1.ID Granted XID: {422, S} Lock: ROW , GADGET_APPLICATIONS, (2,6) 等待 XID : {422, X} , WORKLIGHT, DELETE FROM GADGET_APPLICATIONS WHERE ID = ? 授予 XID : {422, S} , {429, S} 。选定的受害者是 XID : 429\. at org.apache.derby.impl。jdbc.SQLExceptionFactory.getSQLException(Unknown Source) at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source) ... 38 更多原因：错误 40001：由于死锁，无法获得锁，循环锁和服务员是：锁：ROW，GADGET_APPLICATIONS，（2,7）等待 XID：{429，S}，WORKLIGHT，SELECT t0.ID，t0.ENFORCE_AUTHENTICITY，t0.ENVIRONMENT_ID，t1.ID，t1.DISP_IN_GALLERY，t1 .LAST_UPDATE_TIME, t1.NAME, t0.SERVER_VERSION, t0.VERSION, t0.VERSION_LOCKED FROM GADGET_APPLICATIONS t0 INNER JOIN GADGETS t1 ON t0.GADGET_ID = t1.ID 授予 XID : {422, S} Lock : ROW, GADGET_APPLICATIONS, (2, 6) 等待 XID : {422, X} , WORKLIGHT, DELETE FROM GADGET_APPLICATIONS WHERE ID = ? 授予 XID : {422, S} , {429, S} 。选定的受害者是 XID : 429\. at org.apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T05:32:47.990

这可以通过将以下属性添加到 server.xml 中的 WorklightDS dataSource 元素来解决：

```
isolationLevel="TRANSACTION_READ_COMMITTED" 
```

# delphi - delphi 如何在跟踪模式下从特定行找到调用者？

> ID：15878663
> 
> 赞同：1
> 
> 时间：2013-04-08T12:08:13.353
> 
> 标签：delphi, ide, breakpoints

新的太阳年快乐。

在delphi IDE中，我们可以在特定的行上放置一个断点，然后在调试模式下运行时，程序会停止。考虑另一个调用的方法。我们如何通过断点找到谁调用了我们所在的方法？我意识到可以通过按 Ctrl+Alt+C 并在汇编模式下回溯.. 有没有更简单的方法可以找到？

多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:20:46.910

使用`Call Stack`窗户。`View->Debug Windows->Call Stack`从主菜单使用，或按`Ctrl+Alt+S`

![调用堆栈窗口（停靠）](https://i.stack.imgur.com/mDMSg.png)

# sql-server-2008 - 首次尝试连接 Microsoft SQL Server 失败

> ID：15878674
> 
> 赞同：1
> 
> 时间：2013-04-08T12:08:29.683
> 
> 标签：sql-server-2008, ms-access

我有一个 Access accdb 文件，其中所有表都链接（未导入）到 Microsoft SQL Server (2008 R2)。当我加载程序时，我收到此错误消息：![](https://i.stack.imgur.com/Ebegs.png)

现在，单击“确定”后，我得到“SQL Server 登录”屏幕，其中“使用受信任的连接”被选中。我的服务器没有使用“SQL 和 Windows 身份验证模式”——我不知道为什么要检查它。如果我取消选中它并输入我的用户名+密码一切正常，直到我下次加载应用程序。

我检查了我的服务器的日志，每次连接失败时我都会收到两个错误：17806 后跟 18452。重要的是要说我的站和服务器在同一个网络域上。

有任何想法吗？谢谢

已解决：选择要链接的表格时，右侧有一个“保存密码”复选框。Cheking 解决了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:39:44.870

通过选择链接表对话框的“保存密码”选项可以避免这些类型的错误：

![链接表](https://i.stack.imgur.com/g3bAe.png)

但是，更简洁的解决方案是将 SQL Server 及其数据库配置为尽可能使用集成的 Windows 身份验证。

# sql - 删除sql中所有表中的记录

> ID：15878678
> 
> 赞同：-5
> 
> 时间：2013-04-08T12:08:42.600
> 
> 标签：sql

我想从存在记录的所有表中删除与学生“Petar Petrov”相关的所有记录（共有三个表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:10:58.237

对外键使用删除级联怎么样？

*   [微软SQL](http://www.mssqltips.com/sqlservertip/2743/using-delete-cascade-option-for-foreign-keys/)
*   [甲骨文](http://www.techonthenet.com/oracle/foreign_keys/foreign_delete.php)
*   [mysql](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:12:18.833

我想你应该在你的模式中使用**级联。** `foreign keys`

例如：

```
create table students (
 id int,
 constraint pk_students primary key (id)
);

create table a(
 s_id int,
 constraint fk_a_student foreign key (s_id) references students on delete cascade
);

create table b(
 s_id int,
 constraint fk_b_student foreign key (s_id) references students on delete cascade
); 
```

# php - wordpress 调用根函数？

> ID：15878681
> 
> 赞同：0
> 
> 时间：2013-04-08T12:08:50.883
> 
> 标签：php, wordpress, blogs

我对 wordpress 有疑问，因为我是菜鸟，所以无法弄清楚。

我有一个测试站点，你可以在 codita.ro 上看到它

我已经对其进行了重写，因此主页是位于网站根目录中的 index.html，然后其余页面按应有的方式位于 /wp-content/themes/themeexample 中（使用不同的布局）。

现在只有关于我们页面是从 wordpress 管理员创建的，问题是：当你点击它时，你会进入 website/about-us/ 但是如果你点击返回主页按钮，你会进入 website/wp-content/themes /themeexample.html，然后如果您想返回 About US，您可以访问 website/wp-content/themes/themeexample/themeexample/about-us。

看到我的问题了吗？我需要他们正常作为网站/页面

谁能指导我在菜单列表等之前使用哪些调用？

非常感谢我不会问我是否没有在谷歌上搜索几个小时没有任何运气。

```
<div class="topmenu">
        <ul>
            <li><a href="<?php bloginfo( 'template_url' ); ?>index.html">home</a></li>
            <li><a href="<?php bloginfo( 'template_root' ); ?>/about-us">about us</a></li>
            <li><a href="#">reviews</a></li>
            <li><a href="#">locations</a></li>
            <li><a href="#">blog</a></li>
            <li><a href="#">contact us</a></li>
        </ul>
    </div>  <!-- /topmenu --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:21:49.133

将其更改为：

```
<li><a href="<?php bloginfo( 'siteurl' ); ?>">home</a></li>
<li><a href="<?php bloginfo( 'siteurl' ); ?>/about-us">about us</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:22:58.333

尝试使用[get_home_url](http://codex.wordpress.org/Function_Reference/get_home_url)代替：

```
 <li><a href="<?php get_home_url(); ?> ">home</a></li> 
```

# binding - 绑定和递归

> ID：15878684
> 
> 赞同：1
> 
> 时间：2013-04-08T12:09:00.553
> 
> 标签：binding, treeview, observablecollection

我正在开发一个将实体绑定到树视图的项目。实体包括：id、idParent、Name、ChildrenElements（可观察的集合，以防添加任何孩子）。该程序应该将对象绑定到树视图，并添加一个节点以防有任何子节点。

实体：

```
class Item
{
    int id;
    int parentId;
    string name;
    ObservableCollection<Item>childrenElements = new ObservableCollection<Item>();

    public int Id
    {
        get { return id; }
        set { id = value; }
    }

    public int ParentId
    {
        get { return parentId; }
        set { parentId = value; }
    }

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public ObservableCollection<Item> ChildrenElements
    {
        get { return childrenElements; }
        set { childrenElements = value; }
    }

} 
```

视图模型：

```
class ViewModel
{
    public ObservableCollection<Item> OCItem { get; set; }
    Item item;

    public ViewModel()
    {
        OCItem = new ObservableCollection<Item>();
    }
} 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    ViewModel vm;
    public MainWindow()
    {
        InitializeComponent();
        vm = new ViewModel();
        this.DataContext = vm;

        vm.OCItem.Add(new Item() { Name = "Frederic" });
        vm.OCItem.Add(new Item() { Name = "John" });
    }
} 
```

XAML：

```
<Grid>
<TreeView Height="208" HorizontalAlignment="Left" Margin="38,42,0,0" Name="treeView1" VerticalAlignment="Top" Width="177" ItemsSource="{Binding OCItem}">
            <TreeView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Name}"/>
                </DataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Grid> 
```

我的问题是，是否可以在实体中创建（以及如何）一个新的可观察集合，以便该实体在其自己的可观察集合中拥有其他实体，并将其作为该实体的子级添加到树视图中等等。

# forms - 将数据从一种形式输入到另一种形式（外部页面）

> ID：15878685
> 
> 赞同：0
> 
> 时间：2013-04-08T12:09:02.837
> 
> 标签：forms, fill, out

我在我的索引页面上创建了一个文本字段，我需要在 Paypal 网站中输入这个文本字段的值。因此，当用户输入 £25 并单击捐赠时，Paypal 网站将打开，插入的值 (25) 将发布在 Paypal 页面的捐赠金额文本字段中。所以用户不需要重新输入。我已经在我的索引页面上使用了 paypal 按钮。

我知道必须有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:26:39.340

乍一看，它看起来像是跨域脚本问题（或 CSRF）。它声明您不能（出于安全原因）从您自己的网站以外的域访问 JavaScript 实体。很高兴看到您遇到的错误消息。

另请查看此[开始使用贝宝快递](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted)

# ios - geometryFlipped 和 renderInContext

> ID：15878687
> 
> 赞同：0
> 
> 时间：2013-04-08T12:09:15.723
> 
> 标签：ios, objective-c

我有一个 UILabel 的子类，它设置

```
self.layer.geometryFlipped = YES; 
```

如果我将此标签作为子视图添加到视图中，一切都会按预期工作。但是，如果我尝试将此视图转换为图像，则标签在结果​​图像中不可见/不存在。

```
UIGraphicsBeginImageContextWithOptions(self.bounds.size, self.opaque, 0.0);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];
posterImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

如果在向视图添加标签之前我设置 label.geometryFlipped = NO 然后出现标签（除了第一个字母之外的所有字母都颠倒了）。

我在这里做错了吗？

# dart - Dart 导入本地包不带类

> ID：15878690
> 
> 赞同：1
> 
> 时间：2013-04-08T12:09:19.900
> 
> 标签：飞镖, dart

我是[![](https://i.stack.imgur.com/G1dzB.png)飞镖](/questions/tagged/dart "显示标记为“飞镖”的问题")新手，刚刚学习。我的第一个项目之一就在 Github：

[DartSimpleChat](https://github.com/jasper22/DartSimpleChat)

阅读各种教程时，构建客户端/服务器应用程序非常简单。实际上它包含 3 个项目：服务器、客户端和共享。

*   服务器（控制台应用程序）打开`WebSocket`，现在只监听传入的消息。
*   客户端（HTML 应用程序）打开`WebSocket`并发送`SimpleChatMessage`转换为`Json`字符串。
*   `SimpleChatMessage`Shared 是用于类定义的项目容器。

    项目（客户端和服务器）都必须包含`Shared`项目才能正确使用`SimpleChatMessage`类。我遵循了[pub.dartlang](http://pub.dartlang.org/doc/dependencies.html#path-packages)站点上的规范，我看到 Shared 项目正确地列在所有包的列表中。

    问题是共享项目奇怪地没有带来任何类。它只是空无一人地坐在那里。

    这是屏幕截图：

    ![空包](https://i.stack.imgur.com/vw5bk.png)

    在 Client 项目中，`import`指令的工作方式如下：

    ```
    import 'package:DartSimpleChat_Shared/SimpleChatShared.dart'; 
    ```

    我做错了什么？为什么我的本地包没有带来实际的课程？

    我正在使用：

    *   Dart 编辑器版本 0.4.3_r20602
    *   Dart SDK 版本 0.4.3.5_r20602
    *   Ubuntu 12.10 x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:31:09.647

看起来该编辑器没有显示路径依赖项的文件。完成`pub install`后，您的项目似乎没有错误（和 之间的混合除外`SimpleChatMessage`）`SimpleMessage`。

# spring - 有没有办法用 Spring 分解 JSP 代码？

> ID：15878698
> 
> 赞同：0
> 
> 时间：2013-04-08T12:09:59.340
> 
> 标签：spring, jsp

我有一个 jsp 表单，我想在我的应用程序的几个页面中重复使用它。最好的做法是什么？我必须在每个页面中复制表单代码吗？我可以使用包含标签或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:12:29.170

不需要在你想做的事情中使用spring，非常简单，也许你可以解决在主jsp上设置参数并在包含文件中获取这些参数，检查一下，之前有人问过jsp文件包含和编译

[包含另一个 JSP 文件](https://stackoverflow.com/questions/9110148/include-another-jsp-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:15:36.700

如果它们共用，则使用带有 spring 的瓷砖。 [http://www.springbyexample.org/examples/simple-tiles-spring-mvc-webapp.html](http://www.springbyexample.org/examples/simple-tiles-spring-mvc-webapp.html)

# javascript - 如何通过 jQuery 更新 XML 节点？

> ID：15878699
> 
> 赞同：0
> 
> 时间：2013-04-08T12:10:07.180
> 
> 标签：javascript, jquery, xml, dom

```
<id>1</id>
<Question>what is .net ??</Question>
<option1>gdsg</option1>
<option2>dg</option2>
<option3>gfdgfdg</option3>
<option4>gfdgfd</option4>
<Marks>1</Marks>
<USERANSWER></USERANSWER>
<CorrectAnswer></CorrectAnswer>
<DESCRIPTION></DESCRIPTION> 
```

这是我的 XML 格式，我想 `<USERANSWER></USERANSWER>`通过 jQuery 更新节点 - 当我只需要客户端更新而不使用 webmethods 并且我必须在我的应用程序中只使用 html 页面和 xml 文件时，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:15:26.860

```
$(xml).find('USERANSWER').text("answer"); 
```

# macos - 如何安装旧版本的 MonoTouch？

> ID：15878703
> 
> 赞同：2
> 
> 时间：2013-04-08T12:10:19.607
> 
> 标签：macos, xamarin.ios, installation, version

我遇到了 MonoTouch 的问题。我像往常一样在 MonoDevelop 中开发，当更新屏幕弹出时，我已经遵守，让它安装更新，然后重新启动 MonoDevelop。但是，一旦我尝试为 iPhone 编译该项目。它抱怨说，我的许可证已过期。我已经检查过了，不幸的是它是正确的。所以我检查了我的选项，并首先尝试了新的免费 MonoTouch 选项，但安装失败，因为我的 Mac OS X 只有版本**10.6.7**。

所以我回退到重新安装 MonoTouch 的旧图像（monotouch-full.dmg）的选项，但它太聪明了，并尝试安装新的**6.0.10**（完整）而不是旧版本。可能正因为如此，或者由于其他原因，安装程序也很遗憾未能安装：

```
Process: MonoTouchInstaller
Version: 2.0.1
Code Type: X86 (Native)

EXC_BAD_ACCESS (SIGABRT) 
KERN_PROTECTION_FAILURE at 0x0000000000000000

abort() called 
```

我该怎么办？如何在 Mac OS X **10.6.7**上安装旧版本的 MonoTouch 。在我尝试更新它之前它运行良好。我不相信许可证已经结束，我不能再开发了。应该只是缺乏检索较新版本的能力。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:15:33.850

登录[http://store.xamarin.com](http://store.xamarin.com)

然后去“管理订阅”。

您应该在此处看到您的许可证状态，以及要下载的旧版本（在“下载 - 查看所有版本”下）。

# javascript - 将时间拆分为小时、分钟和秒

> ID：15878705
> 
> 赞同：6
> 
> 时间：2013-04-08T12:10:25.790
> 
> 标签：javascript, jquery, html

我必须将时间分成小时、分钟和秒。例如，如果时间是 09:11:21 。我需要它作为 09 小时，11 分钟和 21 秒。

我有两个文本框来输入打卡时间和休息时间。之后我想在一个新的texbox中得到结果。结果是通过打孔时间和休息时间之间的差异来计算的。

例如，如果打卡时间是 09:00:00，休息时间是 01:10:00。我需要 07 小时、50 分钟和 00 秒的结果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T12:11:30.453

您可以使用[split()](http://www.w3schools.com/jsref/jsref_split.asp)

**[现场演示](http://jsfiddle.net/FPJRQ/)**

```
arr = strDate.split(':')
hour = $.trim(arr[0]) + " hrs";
min = $.trim(arr[1]) + " min";
sec = $.trim(arr[2]) + " seconds"; 
```

**正如@TheJohlin 所说，编辑**`parseInt`它而不是 $.trim更好地使用

**[现场演示](http://jsfiddle.net/FPJRQ/5/)**

```
strDate = "12 : 40 :12";
arr = strDate.split(':');
hour = parseInt(arr[0]) + " hrs";
min = parseInt(arr[1]) + " min";
sec = parseInt(arr[2]) + " seconds"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:24:44.667

您可以使用`.replace`

```
var xDate="12:35:45";
alert(xDate.replace(":"," hrs, ").replace(":"," Min and ") + " secs."); 
```

## [演示](http://jsfiddle.net/Uwtzb/)

# jsp - JSP 与 XML 与 XSL

> ID：15878711
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:10:57.267
> 
> 标签：jsp, xslt

我们正在开发一个 Java EE Web 应用程序。我们想知道哪个是渲染数据的更好方法；带有 XSL 的 JSP 或 XML？

每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:23:25.043

如果您已经获得 XML 文档，则使用 XSL，否则我更喜欢 JSP。当您想做某些复杂的事情时，XSL 有其局限性。您仍然可以实现它，但 XSL 太复杂了。

在 JSP 世界中，您可以获得很多选项，因为那里有很多标签库，这让您的生活更轻松。JSP 也被广泛使用，因此您可以轻松找到技能并在社区中获得支持。

# c# - 使用实体框架进行 MVC 4 报告

> ID：15878714
> 
> 赞同：1
> 
> 时间：2013-04-08T12:11:03.587
> 
> 标签：c#, asp.net-mvc, entity-framework, reporting-services, dataset

我正在使用 MVC4 和 Entity Framework 来开发 Intranet Web 应用程序，我必须创建用户可以下载的报告。事实上，我有 2 个报告模板（.rdlc 文件）。其中之一是通用模板，将为下一个模板复制和修改。这就是我对“PersonReport”模板所做的：从通用模板中复制和修改。

我的问题是使用通用模板（以及下面的代码），一切都很好。但是，当我使用我的个性化模板时，它不起作用。我尝试调试我的代码，发现问题出在哪里（当我使用 .Render() 指定格式时）。有我的错误信息：

```
An error occurred during local report processing. 
```

这是我的行动：

```
public ActionResult PersonReport()
{

    ReportViewer personReportViewer = new ReportViewer();

    //Parameters

    ReportParameter[] reportParameters = new ReportParameter[3];
    reportParameters[0] = new ReportParameter("Title", "Test", true);
    reportParameters[1] = new ReportParameter("Address", "Avenue de Tervuren,  268", true);
    reportParameters[2] = new ReportParameter("PostalCode", "B-1150 Brussels", true);

    //Report Template

    personReportViewer.ProcessingMode = ProcessingMode.Local;
    personReportViewer.LocalReport.ReportPath = HttpContext.Server.MapPath("..") + "\\Reporting\\Templates\\" + "AllPersonsReport.rdlc";

    //Source

    DataSet ds = BuSIMaterial.Utils.Services.ExecuteStoredProcedure(db, "GetAllPersons", null);

    ReportDataSource dataSource = new ReportDataSource("personDataSource", ds.Tables[0]);
    personReportViewer.LocalReport.DataSources.Clear();
    personReportViewer.LocalReport.DataSources.Add(dataSource);

    //Report type

    personReportViewer.LocalReport.SetParameters(reportParameters);
    byte[] byteArray = personReportViewer.LocalReport.Render("PDF"); //Here's the failure

    //Downloading

    Response.ClearHeaders();
    Response.AddHeader("Content-Disposition", "attachment; Filename=\"" + DateTime.Now + "_Title_.pdf" + "\"");
    Response.AddHeader("Content-Transfer-Encoding", "Binary");
    Response.BinaryWrite((byte[])byteArray);
    Response.Flush();
    Response.End();

    return RedirectToAction("Index");
} 
```

还有我从一个简单的 select * 存储过程创建 DataSet 的方法：

```
public static DataSet ExecuteStoredProcedure(ObjectContext db,
                                     string storedProcedureName,
                                     IEnumerable<SqlParameter> parameters)
{
    var connectionString =
        ((EntityConnection)db.Connection).StoreConnection.ConnectionString;

    var ds = new DataSet();

    using (var conn = new SqlConnection(connectionString))
    {
        using (var cmd = conn.CreateCommand())
        {
            cmd.CommandText = storedProcedureName;
            cmd.CommandType = CommandType.StoredProcedure;

            if (parameters != null)
            {
                foreach (var parameter in parameters)
                {
                    cmd.Parameters.Add(parameter);
                }
            }

            using (var adapter = new SqlDataAdapter(cmd))
            {
                adapter.Fill(ds);
            }
        }
    }

    return ds;
} 
```

**更新**：我想检查我的 DataSet 是否已填充，但未填充。会不会是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:18:15.903

我认为您应该尝试为您的 Render() 重载添加更多参数：

```
 private Warning[] warnings;
    private string[] streams;
    private string mimeType;
    private string encoding;
    private string extension;

    byte[] byteArray = personReportViewer.LocalReport.Render("PDF", null, out mimeType, out encoding, out extension, out streams, out warnings); 
```

# mysql - mysql 返回值作为 min 或 sum 从 sum

> ID：15878716
> 
> 赞同：1
> 
> 时间：2013-04-08T12:11:07.953
> 
> 标签：mysql, sum, calculated-field

对于我的投票系统，我有两个可能的值可供投票。1 或 -1，这个值被保存在数据库中。

现在我选择/计算分隔的值，如 field_up 和 field_down。我想将查询更改为仅输出一个值，例如：

如果我们有'+6'和-5，它应该返回+1（带+）如果我们有-3和+2，它应该返回-1（带-）

现在我有以下查询

```
SELECT 
SUM(CASE thumb when 1 then 1 else 0 end) AS "thumbs_up", 
SUM(CASE thumb when -1 then 1 else 0 end) AS "thumbs_down" 
FROM ..etc 
```

提前致谢！

西娅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:12:59.247

```
SELECT SUM(thumb) AS votes FROM your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:12:50.463

试试这个

```
SELECT 
SUM( CASE WHEN thumb =1 THEN 1 ELSE 0 END) as "thumbs_up", 
SUM( CASE WHEN thumb =-1 THEN 1 ELSE 0 END) as "thumbs_down",

FROM ..etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:30:02.123

几件事。您可以大大简化您的查询：

```
SELECT 
SUM(thumb = 1) AS thumbs_up, 
SUM(thumb = -1) AS thumbs_down 
FROM ..etc 
```

因为在 mysql 中（仅）`true`is`1`和`false`is `0`。

其次，您需要查询该查询以调整输出：

```
SELECT concat(if(thumbs_up > thumbs_down, '+', ''), thumbs_up - thumbs_down)
FROM (
SELECT 
    SUM(thumb = 1) AS thumbs_up, 
    SUM(thumb = -1) AS thumbs_down
    FROM ..etc
) x 
```

# c# - MaskedTextBox - 即使用户点击任何地方，如何将 IBeam 放在最后？

> ID：15878719
> 
> 赞同：0
> 
> 时间：2013-04-08T12:11:14.910
> 
> 标签：c#, winforms

我有一个 MaskedTextBox，我想将 IBeam 光标放在框的末尾（或开头）。

例子：

![IBeam 光标在位置 3](https://i.stack.imgur.com/k3Lwc.jpg)

- 用户在 MaskedTextBox 中单击并开始输入，但他需要“退格”，因为他单击了框的中间，如何将光标自动向左/向右移动？

MaskedTextBox“Cod IBGE”为“000”（需要 3 个数字）

![现在 IBeam 光标在位置 0](https://i.stack.imgur.com/3H46W.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:22:30.447

您应该在 MaskedTextBox 上添加“Enter”事件，然后将以下代码设置为主页：

```
mtb.SelStart = 0;
mtb.SelLength = 0; 
```

# java - 如何将 java.net.URL/URLConnection 与代理链一起使用

> ID：15878720
> 
> 赞同：3
> 
> 时间：2013-04-08T12:11:17.097
> 
> 标签：java, networking, web, proxy, tunneling

我尝试使用 java 通过一系列代理（不止一个）加载网站。每个请求都应该能够使用另一个链。这是我的第一个快速而肮脏的尝试：

```
// My proxies and there ports marked with pIP1 pPort1, pIP2 pPort2...
Socket socket = new Socket(pIP1, pPort1);
OutputStream out = socket.getOutputStream();
BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

String connectOverProxy1ToProxy2 = "CONNECT " + pIP2 + ":" + pPort2 + " HTTP/1.1\n\n";
String connectHost = "GET http://stackoverflow.com/ HTTP/1.1\n\n";

out.write((connectOverProxy1ToProxy2 + connectHost).getBytes());
out.flush();

String inputLine;
while ((inputLine = in.readLine()) != null)
  System.out.println(inputLine);

out.close();
in.close(); 
```

作为回应，我收到了这个：

```
HTTP/1.0 200 Connection established
Proxy-agent: tinyproxy/1.8.3

HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Cache-Control: public, max-age=30
Expires: Mon, 08 Apr 2013 11:42:08 GMT
X-Frame-Options: SAMEORIGIN
Date: Mon, 08 Apr 2013 11:41:36 GMT
Last-Modified: Mon, 08 Apr 2013 11:41:08 GMT
Vary: *
Content-Length: 182825

<!DOCTYPE html>
<html>
[..]
</html> 
```

让我们来解决问题。现在我尝试使用 URL/URLConnection 加载页面，以使用 java 包的完整处理和功能。有没有办法将 URL/URLConnection 与代理链一起使用而不是单个代理？

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:26:39.540

该类`HttpUrlConnection`通过使用与[代理相关的系统设置](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies)来支持代理。

但是，您可以通过调用[ProxySelector.setDefault()](http://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html#setDefault%28java.net.ProxySelector%29)并提供您自己的`ProxySelector`子类来更改默认代理选择机制。

通过覆盖该[`select(URL)`](http://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html#select%28java.net.URI%29)方法，您可以返回该 URL 所需的代理。我会首先尝试只返回链中的“第一个”代理，看看是否`HttpUrlConnection`自动通过代理链。

# facebook - 页面存在时，facebook共享链接返回404重定向错误

> ID：15878721
> 
> 赞同：15
> 
> 时间：2013-04-08T12:11:20.473
> 
> 标签：facebook, redirect, hyperlink, http-status-code-404, share

即使页面存在，在 facebook 中共享以下链接也会返回 404 错误页面信息而不是页面详细信息和链接：

[http://www.kentbusinessangel.co.uk/lucky-achieve-goals?sq=be-excited&src=fb](http://www.kentbusinessangel.co.uk/lucky-achieve-goals?sq=be-excited&src=fb)

要尝试修复错误：

*   我尝试对链接进行编码以启用传递 & 和 ? 正确（没用）
*   我创建了一个从 http://www.kentbusinessangel.co.uk/lucky-achieve-goals-be-excited/src-fb 到原始 url 的重定向（当您在浏览器中使用 url 时有效，但仍然只显示在 Facebook 上分享时出现 404 错误）
*   我在 http://www.kentbusinessangel.co.uk/lucky-achieve-goal/fb/be-excited 创建了一个静态页面（此页面再次在浏览器中工作，但 facebook 也显示此页面的错误 404！）
*   我等了一天，希望 Facebook 可能需要时间再次抓取页面（他同样的问题仍在继续）
*   我将元标记添加到新的静态页面，并使规范匹配此页面的 url，以防万一它会有所帮助（但它仍然在 facebook 上显示 404 重定向错误共享）：

```
<meta property="og:title" content="13 Lucky Steps to Achieve Your Goals - Be Excited">
<meta property="og:description" content="Get 13 lucky steps to achieve your goals! - Be Excited">
<meta property="og:image" content="../../images/numbers/circles/one.png">
<link rel="canonical" href="http://www.kentbusinessangel.co.uk/lucky-achieve-goal/fb/be-excited"> 
```

有谁知道为什么 Facebook 共享信息是从我的 404 错误页面而不是共享的 url 中获取的，我该如何解决？

编辑：发布此问题后，原始链接 http://www.kentbusinessangel.co.uk/lucky-achieve-goals?sq=be-excited&src=fb 在 facebook 分享中工作！--- 但是，所有通过同一动态页面设置的其他页面仍然无法正常工作，我在上述步骤中创建的其他链接也无法正常工作

即[http://www.kentbusinessangel.co.uk/lucky-achieve-goals?sq=effort&src=fb](http://www.kentbusinessangel.co.uk/lucky-achieve-goals?sq=effort&src=fb)

Edit2：如果在这里发布第二个链接也能神奇地通过 Facebook 分享实现这一点，那就太好了 - 但没有快乐 - *困惑*

对此的任何帮助将不胜感激

编辑 3：好的，原来的链接又不能在共享区域以及其他链接上工作 - 所以回到第一方 -

使固定！！似乎 facebook 在出现重定向错误时抓取了这些页面，并且从那时起就没有重新抓取它们。
将它们放入删除器：developers.facebook.com/tools/debug 重新抓取页面并检索到正确的信息！在为这些页面做这个新的共享链接之后也工作了！（很简单：s）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-21T05:03:48.350

这很简单

之前在博客的编辑 html 位置添加以下元代码`<b:skin><![CDATA[/*`

改变你想要的内容

转到[https://developers.facebook.com/tools/debug/og/object/](https://developers.facebook.com/tools/debug/og/object/)

通过那里的博客链接并废弃它

`<meta content='TestedCodes' property='og:title'/> <meta content='Introducing Important basic codes which a programmer needs to know ' property='og:description'/> <meta content='http://www.testedcodes.net' property='og:url'/> <meta content='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSN90lduXisEbSyVbU4SHa-vcRjQeSZZH7d8kY7AkX3L-f56dFhFw' property='og:image'/>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-04T09:28:32.923

看起来 facebook 在出现重定向错误时设法抓取了页面，并且从那时起就没有重新审视过。当我将页面添加到[developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug/)的delinter 时，它会通过重新刮擦来很好地查看页面——之后共享的链接也可以工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-20T09:07:53.890

您应该使用 Facebook 在[https://developers.facebook.com/tools/debug/提供的调试器](https://developers.facebook.com/tools/debug/)

在那里，请确保您的原始 URL（Fetched URL）和规范 URL 匹配！

无论出于何种原因，如果您最终设置了错误的 og:url 条目，它会扭曲规范 URL，该 URL 与 Fetched URL 不匹配，这对 Facebook 来说是个问题。只需确保 og:url（规范 URL）条目与实际 URL 匹配，因此它不会被视为重定向

# datagrid - 支持行和列跨越的 VB6 更好的网格？

> ID：15878722
> 
> 赞同：3
> 
> 时间：2013-04-08T12:11:21.143
> 
> 标签：datagrid, vb6, activex

谁能建议我为**vb 6提供更好的****网格**，它具有**row-span**、**column-span**设施并且可以处理大约**150000 行。** 所以我们可以实现以下解决方案。 ********![示例网格显示](https://i.stack.imgur.com/D7qYo.png)********

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:13:19.313

我们使用[VSFlexGrid](http://www.componentone.com/SuperProducts/VSFlexGridPro/)。他们的 ActiveX 产品与 VB6 和 IDE 完美结合。它不是免费的。

行**跨度**和**列跨度**可能可以通过其单元格合并功能来完成。 ![VSFlexGrid 合并](https://i.stack.imgur.com/wXPPW.jpg)

其他配置可以在设计时通过 GUI 或在运行时通过代码完成。 ![VSFlexGrid 设计](https://i.stack.imgur.com/Eo3Y6.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:35:18.583

我在我的应用程序中使用 Spread 已经 10 多年了。你可以做 colspan 和 rowspan 以及更多。

[传播](http://www.componentone.com/SuperProducts/SpreadCOM/#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:32:31.413

我一直使用 Infragistics 和 ComponentOne 产品，但我快速搜索并找到了 SCGrid ( [http://scgrid.com/](http://scgrid.com/) )。它具有 RowSpan 和 ColSpan 属性，并提供免费版本。******

# exception - finally 块中的对象引用异常

> ID：15878724
> 
> 赞同：0
> 
> 时间：2013-04-08T12:11:23.067
> 
> 标签：exception, c#-3.0

嗨，我有以下方法。

```
public bool IsTableExist(string tableName)
    {
        try
        {

            if (Utility.Utility.CreatedTable.Contains(tableName.ToLower()))
                return true;
            else
            {
                _dataAccess.openconnection();
                if (!_dataAccess.isTableExist(tableName))
                    return false;
                Utility.Utility.CreatedTable.Add(tableName.ToLower());
                return true;
            }
        }
        catch (Exception ex)
        {
            Logger.WriteLogFile("QueryBuilder", "IsTableExist", ex.StackTrace);
        }
        finally
        {
             _dataAccess.closeconnection();
        }
        return false;
    } 
```

在这里，我遇到了异常：

```
Object reference not set to an instance of an object.
at DataAccessLayer.DataAccess.closeconnection()
at QueryBuilder.QueryBuilder.IsTableExist(String tableName)
at ObjectFilling.BusinessLogic.GetDataTypeForAllTags(DataTable tagDetails) 
```

如何解决异常。我有用于与数据库通信的 openconnection() 和 closeconnection() 方法。当`closeconnection()`方法被调用但`openconnection()`未被调用时，在 finally 块中抛出异常。openconnectio() 仅在以下情况下才会被调用代码到达 else 块。我可以在 else 块中使用 bool 变量来通知 finally 块何时调用 closeconnection。或者是否有任何其他方式可以修改代码以使异常不会发生。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:47:30.333

```
bool isOpen = false; 
try 
 {  
   _dataAccess.openconnection(); 
   isOpen = true; 
 } 
 finally 
 { 
  if (isOpen) 
  _dataAccess.closeconnection(); 
 } 
```

我发现这是可行的解决方案。欢迎任何进一步的想法。在这种情况下，将在打开连接时设置 bool 变量。

# c++ - c ++中的Hashmap不排序元素？

> ID：15878727
> 
> 赞同：0
> 
> 时间：2013-04-08T12:11:27.157
> 
> 标签：c++, hashmap

我必须研究哈希图的实现。我研究过它会根据模板中提到的顺序对元素进行排序。示例代码是：

```
#include <hash_map>
#include <iostream>
using namespace std;

int main()
{
    typedef pair <int, int> Int_Pair;

    hash_map <int, int>::iterator hmp1_Iter;

    hash_map <int, int , hash_compare <int, less<int> > > hmp1;                 
    hmp1.insert(Int_Pair(1, 13));
    hmp1.insert(Int_Pair(3, 51));
    hmp1.insert(Int_Pair(7, 22));
    hmp1.insert(Int_Pair(2, 31));

    cout<<"\nOperation1: hash_map<int, int, \nhash_compare<int, less<int> > > hmp1\n";
    cout<<"Operation2: hmp1.insert(Int_Pair(1, 13))...\n";
    cout<<"hmp1 data: ";
    for(hmp1_Iter = hmp1.begin(); hmp1_Iter != hmp1.end(); hmp1_Iter++)
    cout<<hmp1_Iter->first<<":"<<hmp1_Iter->second<<" ";
    cout<<endl;

    return 0;

} 
```

代码的预期结果是： 1:13 2:31 3:51 7:22 但它给出的是 1:31 3:51 7:22 2:31 。但是应该按升序排列关键元素。请解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:23:00.380

`std::hash_map`是一个无序的关联容器，通常用哈希表实现（键的哈希值作为链表数组中的索引）

如果您需要“有序哈希映射”，您可以使用`std::map`. 它通常是一棵红黑树，其关键元素可以按升序迭代。

`std::hash_map`插入和删除应该比`std::map`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:49:43.957

来自 MSDN 网站上的[hash_map 类](http://msdn.microsoft.com/en-us/library/0d462wfh.aspx)

> 受控序列中元素的实际顺序取决于散列函数、排序函数以及存储在容器对象中的散列表的当前大小。您无法确定哈希表的当前大小，因此通常无法预测受控序列中元素的顺序。

简单地说，hash_map 中元素的顺序永远不能保证是有序的，任何它们看起来是有序的情况都只是巧合。

为了更清楚地说明这一点，[MSDN 网站](http://msdn.microsoft.com/en-us/library/0d462wfh.aspx)指出

> 此 API 已过时。替代方案是 unordered_map 类。

提供更多证据表明 hash_map 从不打算为其元素提供任何顺序。

# c# - 没有 auth_token 的 Hipchat API

> ID：15878735
> 
> 赞同：1
> 
> 时间：2013-04-08T12:11:53.740
> 
> 标签：c#, api, xmpp

我正在使用 jabber 在 C# 中寻找与 hipchat 连接的 API。我不想使用自己的 API hipchat 不必创建身份验证密钥（由管理员）。

我想做一个 Windows 窗体客户端来连接、发送和接收消息等。

有人知道任何图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:19:55.547

您可以在此处找到库列表：http: [//xmpp.org/xmpp-software/libraries/](http://xmpp.org/xmpp-software/libraries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T20:57:10.563

HipChat 使用 XMPP 作为它的聊天层，所以任何 xmpp 标准库都应该起作用，正如 Alex 在他的回答中提到的那样。这是一些关于如何设置一些最流行的 xmpp/jabber 客户端的[文档页面，以及一些限制。](https://confluence.atlassian.com/hipchatkb/setting-up-xmpp-jabber-clients-for-hipchat-751436251.html)

如果您在登录 hipchat 后浏览到[https://www.hipchat.com/account/xmpp](https://www.hipchat.com/account/xmpp)，您将获得特定用户的连接详细信息。请记住，您需要用于 xmpp 连接的 ID 不是您的电子邮件，而是 hipchat 页面上列出的那个。

# android - 无法更新或添加新的联系人照片 Android

> ID：15878740
> 
> 赞同：0
> 
> 时间：2013-04-08T12:12:11.847
> 
> 标签：android, contacts, android-contentprovider, android-contacts, android-contentresolver

我不明白为什么它可以在模拟器上运行，但不能在真实设备上运行。

请帮忙！！！

在这里，我通过电话号码获取联系人 ID

```
 ContentResolver crFull = context.getContentResolver(); 
    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(PhoneNumberFormatter.GetOnlyNumbers(((Contact)recipients.get(k)).GetContactPhoneNumber())));
    Cursor cursor = crFull.query(lookupUri, new String[] { ContactsContract.PhoneLookup._ID }, null, null, null);
    long id = cursor.getLong(cursor.getColumnIndex(ContactsContract.PhoneLookup._ID)); 
```

在这里，我正在从 Base64 转换新图像

```
 String base64Image = json.getString("PhotoBase64");
    byte[] decodedString = Base64.decode(base64Image, Base64.DEFAULT);

    Bitmap bmp = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
    ByteArrayOutputStream streamy = new ByteArrayOutputStream(); 
    bmp.compress(CompressFormat.JPEG, 100, streamy); 
    byte[] photo = streamy.toByteArray(); 
```

在这里，我正在检查联系人是否已经有图像

```
 Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
    InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(crFull, uri); 
```

如果有

```
 int photoRow = -1;
    String where = ContactsContract.Data.RAW_CONTACT_ID + " = " + id + " AND " + ContactsContract.Data.MIMETYPE + " =='" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'";
    Cursor cursorr = crFull.query(ContactsContract.Data.CONTENT_URI, null, where, null, null);
    int idIdx = cursorr.getColumnIndexOrThrow(ContactsContract.Data._ID);
    if (cursorr.moveToFirst()) {
        photoRow = cursorr.getInt(idIdx);
    }

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
    .withSelection(ContactsContract.Data._ID + " == " + Integer.toString(photoRow), new String[] {})
    .withValue(ContactsContract.Data.RAW_CONTACT_ID, id)
    .withValue(ContactsContract.Data.IS_SUPER_PRIMARY, 1)
    .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.Data.DATA15, photo)
    .build());

    try {
            crFull.applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (RemoteException e) {

    } catch (OperationApplicationException e) {
        e.printStackTrace();
    } 
```

如果不

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
    .withValue(ContactsContract.Data.RAW_CONTACT_ID, id)
    .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, photo)
    .build());

    try 
    {
        crFull.applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (RemoteException e) {

    } catch (OperationApplicationException e) {
        e.printStackTrace();
    } 
```

更新和插入仅适用于模拟器。如果我在真实设备上启动它，则不会更新和插入图像。同样在真实设备上我也没有例外。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T10:08:41.153

试试这个...

```
Bitmap bitmap = ((BitmapDrawable) image.getDrawable())
                .getBitmap();
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 80, baos);
byte[] b = baos.toByteArray();

ops.add(ContentProviderOperation
                            .newUpdate(
                                    ContactsContract.Data.CONTENT_URI)
                            .withSelection(
                                    ContactsContract.Data.CONTACT_ID
                                            + " = ? AND "
                                            + ContactsContract.Data.MIMETYPE
                                            + " = ?",
                                    new String[] {
                                            contactid,
                                            ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE })
                            .withValue(Photo.DATA15, b).build()); 
```

# mips - MIPS 在循环中初始化数组

> ID：15878741
> 
> 赞同：1
> 
> 时间：2013-04-08T12:12:16.413
> 
> 标签：mips

所以我试图将 0-50 之间的 10 个数字放入一个数组中。

```
 li  $t0, 0      #loopcounter = 0
    la  $a0, array
    addi    $a0, $0, 0  #initialize array index = 0
    loop:
            li  $v0, 5
            syscall
            blt $v0, 0, loop
            bgt $v0, 50, loop
            add $t0, $t0, 1   #increment loop counter

            sw  $a0, 0($a0)     # ERROR HERE #store value of $v0 at index 0
            addi    $a0, $a0, 4     # Increment the index by 4

            blt $t0, 10, loop 
```

我将如何将这 10 个数字以 $a0 的位置放入我的数组中，然后以后能够访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:27:46.890

这会

```
addi $a0, $0, $0     # initialize index with 0
sw $v0, 0($a0)       # store value of $v0 at index 0
addi $a0, $a0, 4     # Increment the index by 4
sw $v0, 0($a0)       # store value of $v0 at index 1

and so on... 
```

我为你留下了循环部分。

为什么要增加 4 ？

因为 MIPS 中的整数占用 32 位或 4 字节

# javascript - HTML 将文本转换为链接

> ID：15878748
> 
> 赞同：0
> 
> 时间：2013-04-08T12:12:36.443
> 
> 标签：javascript, html, parsing, dom

我有这个 html 代码：

```
<h2>A</h2>
<span>
    <p>Compare BookA. 12:2; BookB. 41:4; 44:6; BookC. 1:11,17; 2:8.</p>
</span> 
```

而这个JavaScript：

```
<script type='text/javascript'>//<![CDATA[ 
    window.onload=function(){
        var span = document.querySelector('span');

        txt = span.innerHTML;

        txt = txt.replace(/(BookA)\. ([\d:,; -]+)/g, function (match, book, verses) {
            var link = '';
            verses.split(/;\s+/).forEach(function (elem) {
                if(elem.length > 0) // <== Alytrem's Solution
                    link += '<a>' + book + ' ' + elem + '</a> ';
            });
            return link;
        });
        span.innerHTML = txt;
    }//]]>
</script> 
```

我用它来生产我想要的东西：

```
txt = txt.replace(/(BookA|BookB|BookC)\. ([\d:,; -]+)/g, function (match, book, verses) 
```

但它返回如下：

```
<a>BookA 12:2</a> <a>BookA</a> <a>BookB 41:4</a> <a>BookB 44:6</a> <a>BookB</a> <a>BookC 1:11,17</a> <a>BookC 2:8</a> 
```

当我尝试这个时：

```
txt = txt.replace(/(BookA)\. ([\d:,; -]+)/g, function (match, book, verses) 
```

它返回如下：

```
Compare <a>BookA. 12:2</a> <a>BookA</a> BookB. 41:4; 44:6; BookC. 1:11,17; 2:8. 
```

我想要得到的是这样的：

```
Compare <a>BookA. 12:2</a> <a>BookB. 41:4</a> <a>BookB. 44:6</a> <a>BookC. 1:11,17</a> <a>BookC. 2:8</a> 
```

有任何想法吗？谢谢。

* * *

**更新**

感谢 Alytrem 的解决方案。但是我还有一个问题，假设这节经文前有一个数字：

```
txt = txt.replace(/(1 BookA|2 BookA|BookB)\. ([\d:,; -]+)/g, function (match, book, verses) 
```

我有这样的话：

```
1 BookA 15:3; 2 BookA 11:20-22 
```

它将返回如下：

```
<a>1 BookA 15:3</a> <a>1 BookA 2</a> BookA 11:20-22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:21:21.303

那是因为

```
"12:2; ".split(/;\s+/) gives you ["12:2",""]. 
```

这是您的解决方案：

```
txt.replace(/(BookA|BookB|BookC)\. ([\d:,; -]+)/g, function (match, book, verses) {
    var link = '';
    verses.split(/;\s+/).forEach(function (elem) {
        if(elem.length > 0) // <== solution
        link += '<a>' + book + ' ' + elem + '</a> ';
    });
    return link;
}); 
```

# java - Eclipse 导出为可执行 jar NullPointerException

> ID：15878753
> 
> 赞同：0
> 
> 时间：2013-04-08T12:12:54.220
> 
> 标签：java, eclipse, classloader

我的项目在 Eclipse 中运行得很好，但导出为可执行 jar 会导致一堆问题。.jar 不可执行，双击什么也不做。在 cmd 中的 .jar 上运行 java -jar 会产生很多 NPE，显然从 .jar 运行时的扫描仪为空。getResource 返回 null，我不知道为什么。

```
Scanner in = null;
    try {
        in = new Scanner(new FileReader(getClass().getResource(filename)
                .getFile()));
        readLine(in);
        in.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } 
```

在哪里`filename = "../001.txt"`

运行扫描仪的类在`game/`. 该文件`001.txt`是应该工作`levels/`的。`../001.txt`

这是清单在 .jar 中的样子

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: game.Game 
```

这是一个非常烦人的问题，谷歌搜索数小时没有提供解决方案，我之前也遇到过类似的问题，但实际上是加载相对路径而不是 NPE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:54:34.967

getResource() 从类路径加载资源，而不是从文件系统路径加载。因此，如果 001.txt 在包级别中，您应该输入：

文件名 = "/levels/001.txt";

前导“/”代表绝对路径。如果您输入“../001.txt”，这是一个相对类路径，并在 /levels/game/../001.txt 中进行转换

# java - 监控activemq话题

> ID：15878759
> 
> 赞同：-2
> 
> 时间：2013-04-08T12:13:23.577
> 
> 标签：java, jms, activemq

我是 ActiveMQ 的初学者，所以我有一些问题......我将制作客户端-服务器应用程序，在服务器端使用 activemq。所有客户端都发送消息，因此服务器上有一个队列从所有客户端接收消息。据我了解，这不是问题。

但是还有一件事......在收到消息后，服务器使用它并为每个传入消息形成应答消息，并且该消息必须传递给所有客户端，而不仅仅是发送者。如果此时某个客户端没有连接，当连接恢复时，客户端必须接收该客户端离线期间服务器发送的所有消息（没有丢失）。

开始学习ActiveMQ，我找到了解决方案：服务器上有一定数量的“输出队列”，这个数量等于客户端的数量。因此，在形成答案后，服务器应用程序会遍历所有“输出队列”，并将消息放入每个队列中。在这个变体中，每个客户端都有唯一的 ID 并监听其 OWN 队列（包含所有应答消息），因此我们可以在服务器上监控每个客户端收到的消息数量（这是优势）。而且，我认为这不是最好的解决方案（队列中有很多相同的对象+在服务器端手动添加每个客户端都是缺点）。

了解更多关于 activemq 的信息，我发现了主题和持久订阅者。看起来像我需要描述的问题。但现在我的问题是 - 我如何监控主题消息？我尝试在浏览器管理员工具中观看它，也在 jconsole 中，但我还看不到这条消息。是否可以？以及未来的任何问题 - 使用主题是解决这个问题的好主意吗？或者，正如我所描述的，使用一定数量的输出队列可能会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:58:46.467

持久订阅可能是要走的路。但是，正如您所经历的那样，您需要牺牲一点运营透明度。

您可能还想看看虚拟目的地，这可能会解决您的问题。

[http://activemq.apache.org/virtual-destinations](http://activemq.apache.org/virtual-destinations)

# c# - 在 iframe 中缩放 pdf 文件

> ID：15878761
> 
> 赞同：0
> 
> 时间：2013-04-08T12:13:39.623
> 
> 标签：c#, asp.net, pdf, iframe

我想知道如何在 iframe 中放大我的 pdf 文件，默认设置为 200%。

我知道 iframe 在用于查看 pdf 文件时会弹出一个缩放“栏”，但我想默认设置缩放，以便用户不必手动缩放。我如何实现这一目标？

我的 iframe asp.net 代码是：

```
<iframe id="pdfFrame" runat="server" style="height:375px;width:550px;" /> 
```

查看pdf的代码是：

```
pdfFrame.Attributes["src"] = "../pdfDocs.ashx?ID=" + index[i]; 
```

如您所见，我使用的是处理程序，因为我的 pdf 是 sql 中的 varbinary。没有问题可以拉出任何东西。我的问题是 iframe 中文件的大小。

我试图[在 iframe 中调整 pdf 的大小，](http://www.sitepoint.com/forums/showthread.php?595599-resize-the-pdf-in-iframe)但请注意我没有在 iframe 中使用 src。我看过[如何缩放 iframe 的内容？](https://stackoverflow.com/questions/166160/how-can-i-scale-the-content-of-an-iframe/2224816#2224816)但这不起作用。

我正在使用母版页，而这个 aspx 页面是内容页之一，所以我不想修改 pdf 的大小以与母版页的内容发生冲突。

如何设置尺寸？我的处理程序有什么东西吗？还是代码中的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:47:14.730

没关系。我使用查询字符串来获取所需的 id，然后重定向到具有更大 iframe 的另一个页面，该页面不是母版页样式的一部分。然后我加载了它，得到了一个更大的pdf

# google-drive-api - 列出未按预期工作的 Google 格式文件的修订

> ID：15878765
> 
> 赞同：1
> 
> 时间：2013-04-08T12:13:55.823
> 
> 标签：google-drive-api

起初，我们似乎遇到了一个类似于[Head revision 报告的错误，它不能按预期的方式用于 Google Docs 格式](https://stackoverflow.com/questions/13410459/head-revision-not-working-as-intended-for-google-docs-formats)，但经过进一步调查，它似乎是一个不同的错误。

一旦文件的修订数量超过某个限制，Google 格式的文件（文档、电子表格等）似乎会折叠修订，并且 API 似乎返回折叠的修订集而不是完整集（即集合在云端硬盘网络应用程序上查看文件时单击“显示不太详细的修订”后显示）。

但是，API 会返回每组中*最早的修订版本，而不是最新版本。*因此，当尝试检索最新修订时（通过 revisions.list 或使用 revisions.get 中的“head”），它通常不会返回实际的最新修订，而是返回最新折叠集中的第一个修订。

这是演示此行为的公共电子表格的 ID：0AgbOJk17djyxdGFqZzlRTks2NnNidzRzRGVJWFlDU2c

在这种特殊情况下，修订 ID 1365416326903000 作为“最新”返回，即使有许多后续修订。

# android - Android - 如何绘制二维渐变？

> ID：15878769
> 
> 赞同：1
> 
> 时间：2013-04-08T12:14:13.027
> 
> 标签：android, gradient, shape

我开始玩渐变，我发现绘制 1 向渐变非常容易（例如从上到下、从左到右或对角线......）但是如何绘制 2 向渐变？我的意思是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/dN57N.png)

大蓝色矩形它是 2 向渐变 - 右上角是蓝色，左边是蓝色，左边是白色，底部是黑色。这个怎么画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T07:50:28.120

答案是：您必须结合 2 个不同的 LinearGradient，例如：

```
LinearGradient val = new LinearGradient(0, 0, 0, height, Color.WHITE, Color.BLACK, TileMode.CLAMP);
                LinearGradient sat = new LinearGradient(0, 0, width, 0, Color.WHITE, Color.HSVToColor(hsvCopy), TileMode.CLAMP);
                ComposeShader merged = new ComposeShader(val, sat, PorterDuff.Mode.MULTIPLY) 
```

;

当然重要的是：

```
[view with this background].setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

在安卓 3.0 及更高版本的手机上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:19:56.580

`gradient`创建颜色时，您可以执行以下操作：

```
 <gradient
    android:centerColor="@color/my_white"
    android:startColor="@color/my_darker_gray"
    android:endColor="@color/my_darker_gray"
    android:angle="45"/> 
```

`start/end/center`为 的位置指定您想要的颜色`gradient`，并指定颜色切换的角度。

# regex - 正则表达式：匹配一个条件，然后在同一行上查找在它之前的另一个条件的第一次出现。可能的？

> ID：15878774
> 
> 赞同：1
> 
> 时间：2013-04-08T12:14:26.183
> 
> 标签：regex, find, sublimetext2, replace

使用正则表达式，我希望根据条件 A 找到一段文本，然后从找到的点向后看并匹配条件 B，并将条件 A 的文本替换为 B 的文本。

例如：

线

```
<div class='fourcol'><h2>REPLACE WITH THIS</h2><a class='abc' rel='1_1' id='def' href='#'><img src='imgs/abc.png' alt='<?= $_GET['event'] ?> t-shirt <?= $_GET['type'] ?> REPLACE THIS TEXT'/></a></div> 
```

搜索`REPLACE THIS TEXT`然后向后看，获取第一个找到的`<h2>*.</h2>`匹配项之间的值，即`REPLACE WITH THIS`，并用`REPLACE THIS TEXT`它替换。

这可能使用文本编辑器查找替换正则表达式功能吗？在这种情况下，我使用的是 Sublime Text 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:21:22.893

使用这个查找：

```
(<h2>)(.*)(</h2>.*)(REPLACE THIS TEXT) 
```

用。。。来代替：

```
$1$2$3$2 
```

如果此模式不是您想要的，请澄清。

干杯。

# javascript - 我们可以使用 javascript 获取 PC 中已安装打印机的详细信息吗？

> ID：15878776
> 
> 赞同：0
> 
> 时间：2013-04-08T12:14:37.223
> 
> 标签：javascript, windows-7, windows-8

这是对 javascript 的调查，有没有人尝试使用 javascript 枚举打印机，它支持所有浏览器，无需任何附加组件。

我在这个地区需要帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:16:10.583

不，这是不可能的，而且可能永远不会出于安全原因。

# android - 从串口Arduino到Android的不完整和奇怪的单词

> ID：15878782
> 
> 赞同：1
> 
> 时间：2013-04-08T12:15:03.923
> 
> 标签：android, arduino

我使用教程*[Data transfer between Android and Arduino via Bluetooth](http://english.cxem.net/arduino/arduino5.php)*从 Arduino 接收代码。

我用 id txtArduino 制作了一个文本视图，我使用了`.append`，但是为什么当 Arduino 发送时我收到不完整的文本？

例如：

> LED 亮起，并且：w- 。输入：13

还有类似这样的奇怪文字。

我该如何解决这个问题？

PS：如果需要，我可以提供更多代码。

### 安卓标头

```
h = new Handler() {
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case RECIEVE_MESSAGE:                                     // If receive massage
                byte[] readBuf = (byte[]) msg.obj;
                String strIncom = new String(readBuf, 0, msg.arg1);   // Create string from bytes array
                sb.append(strIncom);                                  // Append string
                int endOfLineIndex = sb.indexOf("\r\n");              // Determine the end-of-line
                if (endOfLineIndex > 0) {                             // If end-of-line,
                    String sbprint = sb.substring(0, endOfLineIndex); // Extract string
                    sb.delete(0, sb.length());                        // And clear
                    txtArduino.append(sbprint + "\n");                // Update TextView

                    //toggleDOOR.setEnabled(true);
                }
                Log.d(TAG, "...Mesaj:"+ sb.toString() +  " Byte:" + msg.arg1 + "...");
                break;
            }
    };
}; 
```

### Arduino代码：

```
int cnt = 0;
int pinLed = 13;

String myKey = "0000001";

//Pin Geam Masina 2 si 3
int pinGeamInchis = 2;
int pinGeamDeschis = 3;

char incomingByte;
void setup(){
    Serial.begin(9600);

    //INITIALIZARE
    pinMode(pinLed,OUTPUT);
    pinMode(pinGeamInchis,OUTPUT);
    pinMode(pinGeamDeschis,OUTPUT);

    digitalWrite(pinLed,LOW);

    Serial.print("Modul ON( KEY:");
    Serial.print(myKey);
    Serial.print(" )\r\n");
}

void loop(){
    if(Serial.available()> 0){
        incomingByte = Serial.read();
        if(incomingByte == '0'){
            //Opreste LED
            digitalWrite(pinLed,LOW);
            Serial.print("Pin 13: LED OFF\r\n");

            //Inchide Geam
            digitalWrite(pinGeamInchis,HIGH);
            Serial.print("Command:W-C\r\n");
            delay(500);
            digitalWrite(pinGeamInchis,LOW);
            Serial.print("Pin 2:Window Down\r\n");
        }
        if(incomingByte == '1'){
            //Aprinde LED
            digitalWrite(pinLed,HIGH);
            Serial.print("LED ON\r\n");

            //Deschide Geam
            digitalWrite(pinGeamDeschis,HIGH);
            Serial.print("Command:W-O\r\n");
            delay(500);
            digitalWrite(pinGeamDeschis,LOW);
            Serial.print("Pin 3:Window Up\r\n");
        }
    }
} 
```

我明白了，如果我只发送一个“命令”，它就可以工作。我该怎么做才能在串行和 Android 上接收更多命令？

PS：我使用[Arduino Nano](http://arduino.cc/en/Main/ArduinoBoardNano)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:54:16.023

无需在 Arduino 端发送 print("/r/n") ，只需放置一个空的 System.println();

像这样：

```
void taskTransmitData(void)
{
  // start the xml
  Serial.print("HE");
  Serial.print(pMyMemory->currentHeading);
  Serial.print("/HE");

---- 

  Serial.print("CS");
  Serial.print(currentState);
  Serial.print("/CS");

  Serial.println();

} 
```

在 android 端，这应该可以工作：

```
bytes = mmInStream.read(buffer);
byte[] readBuf = (byte[]) buffer;
String strIncom = new String(readBuf, 0, bytes); // create string from bytes array
sb.append(strIncom);      // append string
int endOfLineIndex = sb.indexOf("\r\n");  // determine the end-of-line
if (endOfLineIndex > 0) {  
    // add the current string to eol to a local string
    String sbprint = sb.substring(0, endOfLineIndex);

    // get the start and end indexes of the heading
    int startHeading = sb.indexOf("HE");
    int endHeading = sb.indexOf("/HE");

    // set the heading
    Henry.this.setCurrentHeading(sb.substring((startHeading + 2), endHeading));

    ......

    // get the start and end indexes of the current state
    int startCS = sb.indexOf("CS");
    int endCS = sb.indexOf("/CS");

    // set the current state
    Henry.this.currentState = sb.substring((startCS + 2), endCS);

    // output what we have
    //System.out.println("recv: " + sbprint);
    sb.delete(0, sb.length());   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:17:47.600

# 分析

查看您的 Android 代码：

```
String sbprint = sb.substring(0, endOfLineIndex); // Extract string
sb.delete(0, sb.length());                        // And clear
txtArduino.append(sbprint + "\n");                // Update TextView 
```

您将收到的消息带到（第一个）换行符，然后删除整个消息。我认为，无法确定收到的任何给定“消息”中会有多少数据。

例如，当 Arduino 执行以下操作时：

```
Serial.print("Pin 13: LED OFF\r\n");
// [...]
Serial.print("Command:W-C\r\n"); 
```

这将被发送到 BT 模块，就像：

```
Serial.print("Pin 13: LED OFF\r\nCommand:W-C\r\n"); 
```

然后“某人”（BT 模块？Android OS？...？）可能会决定将其放入*两个*“消息”（或“数据包”）中，例如

```
Message1: "Pin 13: LED OFF\r\nComm"
Message2: "and:W-C\r\n" 
```

在这种情况下，您只会看到

```
"Pin 13: LED OFF" 
```

和

```
"and:W-C" 
```

显示，因为您删除`"Comm"`了第一条消息的部分。

# 建议

尝试将您的替换`sb.delete(0, sb.length());`为`sb.delete(0, endOfLineIndex + "\r\n".length());`，这样您就不会删除整个字符串，而只会删除实际显示的部分，并保留其余部分以在下一条消息中完成。

然后，您还应该添加一个循环，以确保您的代码在一条消息中包含多个换行符时不会失败。为此，只需替换：

```
int endOfLineIndex = sb.indexOf("\r\n"); // Determine the end-of-line
if (endOfLineIndex > 0) {                // If end-of-line, 
```

和

```
int endOfLineIndex; 
while ( (endOfLineIndex = sb.indexOf("\r\n")) > 0) { // While there's at least one complete line in buffer, 
```

# c++ - 如何计算文件中的行号？

> ID：15878783
> 
> 赞同：2
> 
> 时间：2013-04-08T12:15:04.493
> 
> 标签：c++, position, ifstream, line-numbers

我有一个打开的文本文件，光标在某个位置。我需要找到光标的行号。从性能的角度来看，以下哪种方法最好？

1) 将当前位置存储在变量 'pos' 中，并搜索从文件开头到 'pos' 的所有 '\n' 字符。

```
ifstream in("file.txt");
// move anywhere in the file
int lineNum = 0;
std::string line;
istream::pos_type pos = in.tellg();
in.seekg(0);
while ( std::getline(in, line) ) {
   ++lineNum;
   if(in.tellg() >= pos) break;
} 
```

2) 使用单独的 ifstream 做同样的事情。

3）还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:37:23.250

从性能的角度来看，最好不要使用流，而是简单地将整个文件从开始到当前位置读取到一个大字符串（使用例如 fread），并从内存中的结果字符串中计算换行符分隔符的出现次数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:26:15.793

API 是一个很好的帮助点

来自：[http ://www.cplusplus.com/reference/istream/istream/getline/](http://www.cplusplus.com/reference/istream/istream/getline/)

```
istream& getline (char* s, streamsize n ); 
istream& getline (char* s, streamsize n, char delim ); 
```

Get line 从流中提取字符作为未格式化的输入，并将它们作为 c 字符串存储到 s 中，直到提取的字符是定界字符，或者 n 个字符已写入 s（包括终止的空字符）。

定界字符是第一种形式的换行符（'\n'），第二种形式的定界符：当在输入序列中找到时，从输入序列中提取，但丢弃而不写入 s。

**因此，最好的方法是简单地使用 while 循环进行迭代并增加您的计数器。您不需要搜索换行符，因为该函数会为您完成。**

# php - 通过php将10MB的数组发送到txt文件

> ID：15878785
> 
> 赞同：-2
> 
> 时间：2013-04-08T12:15:05.557
> 
> 标签：php

我正在使用 Adob​​e flex 使用 PHP 将 10Mb 的数组（包含整数）写入 bin 文件（文本文件）。但我无法获取文件，因为每次我尝试发送数组时 PHP 都会崩溃。

下面是 PHP 代码，我用来将数组写入 .bin 文件

```
$Text = $_POST["first"]; 
$arr = explode(",",$Text);
$myFile = "test1.bin";
$count=count(explode(",",$Text));
echo sizeof($arr);
$fh = fopen($myFile, 'a') or die("can't open file");
for($i=0;$i<sizeof($arr);$i++)
{
    $sd=pack(V,$arr[$i]); 
    fwrite($fh,"$sd");
}
fwrite($fh,$str);
fclose($fh); 
```

问题出在 PHP 代码中，如果从 flex 成功传递数组，这就是我只发布 PHP 的原因。

请让我知道，替代方式或正确的工作方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:26:47.387

增加你的 post_max_size：
[http ://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

默认情况下，我认为它是 8M，将其增加到 15M 或 20M。

# android - 避免在android中重复警报

> ID：15878787
> 
> 赞同：0
> 
> 时间：2013-04-08T12:15:09.533
> 
> 标签：android, android-alarms

嗨，我是android开发的新手，我正在开发一个与警报相关的应用程序，`notification`而我在特定时间设置警报时一切正常，警报通知正确，但警报`notification`有时会重复，而我不重复它我怎样才能避免这个问题.

这是我的代码：

```
Intent intent = new Intent(this, AlarmReceiver.class);
intent.putExtra("ti", name);
intent.putExtra("id", id);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);      
final Calendar cal = Calendar.getInstance();        
switch(Cun.valueOf(repeat)) {
case No:        
 alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent);
 break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:44:10.703

警报第一次通知后，使用取消它：

```
Intent intent = new Intent(this, AlarmReceiver.class);
intent.putExtra("ti", name);
intent.putExtra("id", id);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE); 
alarmManager.cancel ( pendingIntent ); 
```

# symfony - Sonata Admin Bundle 过滤器显示来自角色用户的实体

> ID：15878789
> 
> 赞同：0
> 
> 时间：2013-04-08T12:15:17.373
> 
> 标签：symfony, sonata-admin

我正在尝试使用 SonataAdminBundle 开发一个仪表板，它根据用户的角色显示一些实体。

例如，如果连接的用户有`ROLE_SUPER_ADMIN`，则应显示所有实体。但如果用户是`ROLE_USER`，则只应显示一个确定的实体，*而不是*全部。

是否可以在实体的服务声明中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-30T14:20:57.633

为了将来参考，诀窍是在 Sonata 中使用 createQuery 和 PermanentParamters 来强制执行过滤器。我刚刚写了一篇关于此的文章： [http ://www.theodo.fr/blog/2016/09/sonata-for-symfony-hide-your-filters/](http://www.theodo.fr/blog/2016/09/sonata-for-symfony-hide-your-filters/)

# xml - 使用 Perl 和 LibXML 处理 Excel XML 文件

> ID：15878803
> 
> 赞同：1
> 
> 时间：2013-04-08T12:16:03.527
> 
> 标签：xml, perl, excel

我正在尝试处理保存为 XML 电子表格的 Excel 文件中的数据。在做了相当多的研究之后（我之前没有做过太多的 XML 处理），我仍然无法让它工作。这是我的最小文件的内容：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40"
 xmlns:fn="http://www.w3.org/2005/xpath-functions"
 xmlns:sbmextension="http://www.serena.com/SBM/XSLT_Extension">
 <Worksheet ss:Name="index">
 </Worksheet>
</Workbook> 
```

还有我的脚本：

```
use XML::LibXML;
use Data::Dumper;
my $filename = $ARGV[0];
my $parser = XML::LibXML->new();
my $doc    = $parser->parse_file($filename);
my $xc = XML::LibXML::XPathContext->new( $doc->documentElement );
my $xpath = '/Workbook/Worksheet/@ss:Name';

print Dumper $xc->findvalue($xpath); 
```

但是，如果我删除（默认命名空间？） xmlns="urn:schemas-microsoft-com:office:spreadsheet" 然后它开始工作。请你能告诉我我错过了什么吗？我想我可以在解析文档之前将其删除，但我想了解我做错了什么:)。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:24:00.690

如果要使用 XPath 表达式和命名空间，则必须先注册命名空间，然后*每次*在所有提及命名空间元素的 XPath 表达式中使用它：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::LibXML;
use Data::Dumper;

my $xml = << '__XML__';
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook
   xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40"
 xmlns:fn="http://www.w3.org/2005/xpath-functions"
 xmlns:sbmextension="http://www.serena.com/SBM/XSLT_Extension">
 <Worksheet ss:Name="index">
 </Worksheet>
</Workbook>
__XML__

my $doc = XML::LibXML->load_xml( string => $xml);
my $xc  = XML::LibXML::XPathContext->new( $doc->documentElement );
$xc->registerNs('ss', 'urn:schemas-microsoft-com:office:spreadsheet');
my $xpath = '/ss:Workbook/ss:Worksheet/@ss:Name';

print Dumper $xc->findvalue($xpath); 
```

# c# - 如何从 C# 在 cmd 上执行命令

> ID：15878810
> 
> 赞同：7
> 
> 时间：2013-04-08T12:16:14.137
> 
> 标签：c#, cmd

我想从我的 C# 应用程序在 cmd 上运行命令。

我试过：

```
string strCmdText = "ipconfig";
        System.Diagnostics.Process.Start("CMD.exe", strCmdText); 
```

**结果：**

cmd窗口弹出，但命令什么也没做。

为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T12:17:38.877

采用

```
System.Diagnostics.Process.Start("CMD.exe", "/C ipconfig"); 
```

如果您想让 cmd 仍然打开，请使用：

```
System.Diagnostics.Process.Start("CMD.exe", "/K ipconfig"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T12:18:07.347

来自[代码项目](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)

```
 public void ExecuteCommandSync(object command)
    {
         try
         {
             // create the ProcessStartInfo using "cmd" as the program to be run,
             // and "/c " as the parameters.
             // Incidentally, /c tells cmd that we want it to execute the command that follows,
             // and then exit.
        System.Diagnostics.ProcessStartInfo procStartInfo =
            new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

        // The following commands are needed to redirect the standard output.
        // This means that it will be redirected to the Process.StandardOutput StreamReader.
        procStartInfo.RedirectStandardOutput = true;
        procStartInfo.UseShellExecute = false;
        // Do not create the black window.
        procStartInfo.CreateNoWindow = true;
        // Now we create a process, assign its ProcessStartInfo and start it
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo = procStartInfo;
        proc.Start();
        // Get the output into a string
        string result = proc.StandardOutput.ReadToEnd();
        // Display the command output.
        Console.WriteLine(result);
          }
          catch (Exception objException)
          {
          // Log the exception
          }
    } 
```

# axis2 - 线程“main”java.lang.ArrayIndexOutOfBoundsException: 1 当我运行我的 Web 服务客户端时出现异常

> ID：15878812
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:16:15.933
> 
> 标签：axis2, rampart

我创建了一个名为“testUpdate”的动态 Web 项目（当然我不会忘记将动态 Web 模块版本更改为 2.5，并且在配置中我选择了 Axis 2 Web 服务

1.  我将这两个类添加到我的动态网络项目中：

SimpleService .java 和 PWCBHandler.java

1.  我右键单击 SimpleService.java -> 新建 -> 其他 -> Web 服务来创建我的 Web 服务

2.  我不会忘记将所有 jar 文件从壁垒分布复制到 testUpdate/WebContent/WEB_INF/lib 和所有 .mar 模块到 testUpdate/WebContent/WEB_INF/modules

3.  我更改了 services.xml 文件，所以它看起来像

    ```
    <service name="SimpleService" >
    <module ref="rampart" />
    <Description>

    </Description>
    <messageReceivers>
        <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver" />
        <messageReceiver  mep="http://www.w3.org/2004/08/wsdl/in-out"  class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
    </messageReceivers>
    <parameter name="ServiceClass" locked="false">com.gismo.SimpleService</parameter>
        <parameter name="InflowSecurity">
        <action>
            <items>UsernameToken</items>
            <passwordCallbackClass>com.gismo.PWCBHandler</passwordCallbackClass>
        </action>
    </parameter>
    </service> 
    ```

4.  我右键单击 testUpdate -> RUN AS _> 在服务器上运行（并且我的 Web 服务部署成功）

5.  文件 -> 新建 -> 其他 -> Web 服务客户端

并在服务定义中粘贴 SimpleService 的 wsdl 文件的 url

( `http://localhost:9091/testUpdate/services/SimpleService?wsdl`)

1.  我将 testcl.java 类添加到我的 Web 服务客户端。这是代码

    ```
    public class testCL {

    public static void main(String[] args) throws Exception {

    if (args.length != 2) {

        System.out.println(args.length);
        System.out
                .println("Usage: $java Client endpoint_address client_repo_path");
    }

    ConfigurationContext ctx = ConfigurationContextFactory
            .createConfigurationContextFromFileSystem(args[1], args[1]
                    + "/conf/axis2.xml");

    ServiceClient client = new ServiceClient(ctx, null);
    Options options = new Options();
    options.setAction("urn:echo");
    options.setTo(new EndpointReference(args[0]));
    client.setOptions(options);

    OMElement response = client.sendReceive(getPayload("Hello world"));

    System.out.println(response);
    }

      private static OMElement getPayload(String value) {
     OMFactory factory = OMAbstractFactory.getOMFactory();
     OMNamespace ns = factory.createOMNamespace("com.gismo/xsd", "ns1");
     OMElement elem = factory.createOMElement("echo", ns);
     OMElement childElem = factory.createOMElement("param0", null);
     childElem.setText(value);
     elem.addChild(childElem);
     return elem;
    }
    } 
    ```

2.  我不要忘记更改 webSercice_client/WebContent/axis2-web/conf/axis2.xml 并添加

    ```
     <module ref="rampart"/>
     <parameter name="OutflowSecurity">
      <action>
        <items>UsernameToken</items>
        <user>bob</user>
         <passwordCallbackClass>com.gismo.PWCBHandler</passwordCallbackClass>
      </action>
     </parameter> 
    ```

3.  但是当我将 testCl 作为 Java Application 运行时，它给了我一个异常

    用法：$java Client endpoint_address client_repo_path 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 at com.gismo.testcl.main(testcl.java:24)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:17:51.017

我的通灵调试能力告诉我，您运行它时没有提供两个命令行参数。您可以在程序输出中看到错误消息“Usage: $java Client endpoint_address client_repo_path”，这意味着您没有提供两个命令行参数，因此`args[1]`可能无效。您的程序在检查命令行参数的数量后不会退出，因此它会`args[1]`在抱怨程序运行不正确后尝试访问。

```
if (args.length != 2) {

    System.out.println(args.length);
    System.out
            .println("Usage: $java Client endpoint_address client_repo_path");
}

ConfigurationContext ctx = ConfigurationContextFactory
        .createConfigurationContextFromFileSystem(args[1], args[1]
                + "/conf/axis2.xml"); 
```

# nosql - RavenDb-从 id 列表中获取列表

> ID：15878813
> 
> 赞同：0
> 
> 时间：2013-04-08T12:16:22.623
> 
> 标签：nosql, ravendb

我正在用 RavenDb 开发一个事件管理器。登录的用户可以在后面的地方写一个帖子，然后在用户墙（主页）中查看所有帖子。每个帖子都可以标记为“喜欢”和“收藏”。像 twitter 或 facebook 这样的小结构。

通过我关注的地方获取帖子的最佳方式是什么？我需要获取喜欢和收藏的数量，如果我已经在 viewmodel 上标记了帖子以发送到视图并显示列表。我正在尝试这样，但抛出最大请求异常。

```
 var myPlaces = this.SessionDb.Query<EventFollow>()
                .Where(ls => ls.UserId == User.Identity.Name)
                .Select(l => l.PlaceId);

            var listPosts = this.SessionDb
                .Advanced.LuceneQuery<Post>().WhereIn("PlaceId", myPlaces)
                .Skip(skip)
                .Take(20)
                .ToList();

            List<PostViewModel> posts = new List<SpottedViewModel>();

            foreach (var p in listPosts)

            {
                PostViewModel vm = new PostViewModel();

                vm.Creator = p.UserCreatorId == User.Identity.Name;

                vm.Like =  this.SessionDb.Query<Lol>().Where(lol => lol.SpottedId == p.Id).Count();

                vm.Favourites = this.SessionDb.Query<Favourite>().Where(fa => fa.SpottedId == p.Id).Count();

                vm.Post= s;

                vm.IsLike = this.SessionDb.Query<Like>().FirstOrDefault(l => l.PostId == p.Id) != null;

                vm.IsFavourite = this.SessionDb.Query<Favourite>().FirstOrDefault(f => f.SpottedId == s.Id) != null;

                posts.Add(vm);
            } 
```

我有这些模型：

```
public class Post
{
    public string Id { get; set; }
    public string UtenteCreatorId { get; set; }
    public string PlaceId { get; set; }
    public string Body{ get; set; }
}

public class Lol
{
    public string Id { get; set; }

    public string PostId { get; set; }

    public string UserId { get; set; }
}

public class Place
{
    public string Id { get; set; }

    public string UserCreatorId { get; set; }

    public string Name{ get; set; }
}

public class Favourite
{
    public string Id { get; set; }

    public string PostId { get; set; }

    public string UserId { get; set; }
}

public class EventFollow
{
    public string Id { get; set; }

    public string PlaceId { get; set; }

    public string UserId { get; set; }
} 
```

谢谢你，对不起我的英语！;D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:35:58.160

您的问题并不是真正从 ID 列表中获取文档列表，您可以使用 IDocumentSession.Load 方法并发送文档 ID 列表，或者像您一样使用 WhereIn。问题是您的模型设计。

在我看来，您需要对数据模型进行一些认真的重新设计。它看起来像现在一样具有很强的关系，而且 RavenDB 不是关系的（或者无论如何都针对关系模型进行了优化）。我很难确切地看到您的用例是什么，但据我所知，我可能会在“发布”模型中保存“收藏夹”和“喜欢”，并将“EventFollow”放在“用户”模型中。

此外，根据 RavenDB 的[“默认安全”](http://ravendb.net/docs/intro/safe-by-default)原则，每个会话限制为 30 个请求（默认情况下，它是可配置的）。你有一些[选择 N+1](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue)在这里进行，所以到目前为止你很可能会超过这 30 个请求。这就是你得到例外的原因。

# android - 是否有任何工具可以为 android 项目创建文档？

> ID：15878815
> 
> 赞同：1
> 
> 时间：2013-04-08T12:16:31.717
> 
> 标签：android, documentation

我已经创建了一个 android 项目，我想将我的项目上传到市场上。但在此之前我需要为我的项目创建一个文档，对吗？

谁能告诉我是否有任何工具可以为 android 项目创建文档？

这里我使用的是 Ubunto 12。

据我所知，到目前为止，我无法通过 Google 找到任何工具。

请提出建议

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T12:23:34.317

如果您在 Google Play 上谈论您的应用程序页面，它是根据您在发布应用程序时在[开发者控制台中提供的信息生成的。](http://developer.android.com/distribute/googleplay/publish/index.html)

您可以提供标题、描述和一些图形资源（屏幕截图、图标等）。描述是纯文本，*几乎*不支持 html 标记，您找不到比集成文本编辑器更好的工具来编写它。没有可用格式功能的官方列表，但请参阅[此问题](https://stackoverflow.com/questions/11071127/google-play-app-description-formatting)以获得广泛的用户反馈。

# iphone - AFNetworking 表单请求（一个请求中上传多个文件）

> ID：15878816
> 
> 赞同：1
> 
> 时间：2013-04-08T12:16:34.457
> 
> 标签：iphone, ios, upload, afnetworking

我们正在开发一个 iOS 应用程序。该应用程序在一个请求中提供单个和多个文件上传选项。我正在使用 AFNetworking 进行单个文件上传，效果很好。现在，我们需要支持多文件上传。我有 html 代码，它实际上是从网络上传多个文件。我需要从 iOS 应用程序做同样的事情。任何人都可以建议我们如何使用 AFNetworking 来做同样的事情吗？

```
<form method="post" action="upload.php?key=ac2a04cc7b6d4420fa5e5eb1701fb0cc1acf7916&channelid=1" enctype="multipart/form-data">
<label>Title:</label> <input name="title" value="My Video Title" /><br />
<label>Date:</label> <input name="date" value="<?php echo time(); ?>" /><br />
<label>Location:</label> <input name="location" value="Sydney, Australia" /><br />
<textarea name="description">The description of the photo/video goes here</textarea><br />
<input name="file[]" type="file" multiple="multiple" /><br /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T12:28:02.837

使用下面的代码将多个文件发送到您的表单。如果需要更改任何内容，请根据您的需要进行自定义。

```
 NSArray *imageArray = [NSArray arrayWithObjects:[UIImage imageNamed:@"close_button.png"],[UIImage imageNamed:@"done_button.png"], nil];
    __block int i=1;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:@"yoururl"];
    NSMutableURLRequest *request=nil;
        request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"yoururl" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData)
        {
            for(UIImage *eachImage in imageArray)
            {
                NSData *imageData = UIImagePNGRepresentation(eachImage);
                [formData appendPartWithFileData:imageData name:[NSString stringWithFormat:@"file%d",i] fileName:[NSString stringWithFormat:@"abc%d.png",i] mimeType:@"image/png"];
                i++;
            }

        }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         NSData *data = (NSData *)responseObject;
         NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
         NSLog(@"Response -> %@",str);

     } failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         NSLog(@"Error -> %@",[error localizedDescription]);
     }]; 
```

在服务器端，我检查了 test.php 代码，我刚刚打印了 print_r($_FILES) 并在我的情况下打印了以下内容，抱歉让您猜测。

```
Response -> Array
(
    [file1] => Array
        (
            [name] => abc1.png
            [type] => image/png
            [tmp_name] => /tmp/phpiWbxSn
            [error] => 0
            [size] => 1997
        )

    [file2] => Array
        (
            [name] => abc2.png
            [type] => image/png
            [tmp_name] => /tmp/phpwtWTE8
            [error] => 0
            [size] => 1847
        )
) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T04:12:20.067

我尝试了 AFHTTPNetwrok 解决方案，但没有成功，然后我在“名称”键中添加了方括号，如下所示，最后图像上传成功。我可能会遇到什么问题？

```
NSData *imageData = UIImageJPEGRepresentation(img,1);
            [formData appendPartWithFileData:imageData name:[NSString stringWithFormat:@"images[%d]",i] fileName:[NSString stringWithFormat:@"images%d.jpg",i] mimeType:@"image/jpeg"]; 
```

# php - 带有工作会话的 PDO 语句？

> ID：15878817
> 
> 赞同：0
> 
> 时间：2013-04-08T12:16:35.997
> 
> 标签：php, mysql, pdo

```
$s = &$_SESSION; 
```

在准备语句中使用会话变量时，我收到了下面提到的错误。

// $s 是一个会话变量

我的查询是：

```
$s['sQuery'] = 'SELECT * FROM `courses` WHERE (CONVERT(`title` USING utf8) = :search 
OR CONVERT(`description` USING utf8) = :search OR CONVERT(`duration` USING utf8) = :search
OR CONVERT(`fees` USING utf8) = :search OR CONVERT(`pre_requisites` USING utf8) = :search)
LIMIT '.$s['limitInc'].', '.$s['limit'];

$s['rQuery'] = $conn->prepare($s['sQuery']);

$s['rQuery']->bindValue(':search',$s['sAll'],PDO::PARAM_STR);
// $s['All'] has post value by user

$s['rQuery']->execute(); 
```

我收到此错误消息。

> 致命错误：未捕获的异常“PDOException”与消息“您无法序列化或反序列化 PDOStatement 实例”在 [无活动文件]：0 堆栈跟踪：#0 [内部函数]：PDOStatement->__sleep()#1 {main} 抛出[无活动文件] 第 0 行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T12:21:16.973

问题是——无论出于何种原因——你试图在数组中存储一个`PDOStatement`对象。`$_SESSION`除非您指定了存储在会话中的自定义保存处理程序对象，否则将在会话保存时序列化并在会话加载时反序列化。因此，存储在会话中的对象必须实现`Serializable`接口，而`PDOStatement`没有。

不仅没有实现可序列化接口，`PDOStatement`还实现`__sleep()`了 PHP 引擎在序列化时调用的方法，并从中抛出异常。（这是您看到的错误）。这样做的意思只是告诉你*不要那样做*；）

# eclipse - Multiple Markers at this line error, Creating Sqlite Database for Eclipse

> ID：15878825
> 
> 赞同：2
> 
> 时间：2013-04-08T12:17:24.337
> 
> 标签：eclipse, sqlite, error-handling

当我运行此代码时，会发生错误。我正在尝试创建数据库并通过修改它来学习。我从教程代码中复制了这段代码，它在示例中运行良好，但我无法运行它。你能提供更多关于为什么会发生这种情况的信息吗？

错误是：

此行有多个标记

```
- The type DatabaseHelper must implement the inherited abstract method SQLiteOpenHelper.onUpgrade(SQLiteDatabase, 
 int, int)
- The public type DatabaseHelper must be defined in its own file
- The type DatabaseHelper must implement the inherited abstract method SQLiteOpenHelper.onCreate(SQLiteDatabase) 
```

我的代码是：

```
package com.example.eos;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper { //ERROR IS HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

     static final String dbName="demoDB";
     static final String employeeTable="Employees";
     static final String colID="EmployeeID";
     static final String colName="EmployeeName";
     static final String colAge="Age";
     static final String colDept="Dept";

     static final String deptTable="Dept";
     static final String colDeptID="DeptID";
     static final String colDeptName="DeptName";

     static final String viewEmps="ViewEmps";

    public DatabaseHelper(Context context)
    {
        super(context, dbName, null,33);
    }

} 
```

# c - 线程中的分段错误

> ID：15878828
> 
> 赞同：0
> 
> 时间：2013-04-08T12:17:34.143
> 
> 标签：c, multithreading, sockets, segmentation-fault

我写了一个有两个线程的服务器程序。一个线程从客户端接收数据，另一个线程向客户端发送数据。两个线程都包含一个无限循环来发送和接收数据。

我的问题是，服务器接受连接并创建用于发送数据的线程，但是，我遇到分段错误并且服务器终止。为什么？

发送线程的代码是：

```
void *send_data(void *num)
{
    int *sock_s=(int *) num;
    int sock=*sock_s;
    char msg[50];
    while(1)
    {
        fgets(msg,50,stdin);
        printf("sending data");
        if(strcmp(msg,"exit")==0)
        {
            break;
        }
        send(sock,msg,sizeof(msg),0);
    }
    send(sock,msg,strlen(msg),0);
} 
```

上述线程由以下人员创建：

```
status_s=pthread_create(&thread_s,NULL,send_data,(void *)client_sock); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:20:53.860

您正在传递客户端套接字，而不是指向客户端套接字的指针。您将 num 视为指针，因此您试图从可能是 3 或 4 或 5 之类的值的内存地址“读取”（套接字 ID，文件描述符表的索引）......这是一个内存违规。

它应该是...

```
void *send_data( void *num )
{
    int sock = (int)num;
    ... 
```

# java - 查找文件的路径

> ID：15878830
> 
> 赞同：0
> 
> 时间：2013-04-08T12:17:38.630
> 
> 标签：java, file, path, space

好的，所以我正在制作一个程序，其中用户键入包含在 jar 文件中的文件名，因此程序从 jar 中提取该文件然后打开它。我做这些都没有问题，只是有些奇怪我不明白这里是我正在使用的代码：

```
String path=getpath(getClass().getProtectionDomain().getCodeSource().getLocation().getPath());
public void open(String filename) throws FileNotFoundException, IOException{
    InputStream is = getClass().getResourceAsStream("pdfs/"+filename);
    OutputStream os = new FileOutputStream(path+"SultanKadab.pdf");
    byte[] buffer = new byte[4096];
    int length;
    while ((length = is.read(buffer)) > 0)
        os.write(buffer, 0, length);
    os.close();
    is.close();
if (pdfFile.exists()&&Desktop.isDesktopSupported())
         Desktop.getDesktop().open(pdfFile); //opening file
}

public String getpath(String f){
    String s = "";
    int lastInd=0;
    for(int i=0;i<f.length();i++){
        if(f.charAt(i)=='/'){s+="\\";lastInd=s.length()-1;}
        else if(f.charAt(i)=='%'&&f.length()-i>=2){
            if(f.charAt(i+1)=='2'&&f.charAt(i+2)=='0')i+=2;s+=" ";
        }
        else s+=f.charAt(i);
    }
    f=s.substring(0,lastInd+1);
    return f;
} 
```

我的问题是关于 getpath 方法，我认为没有必要，我认为 java 有一个内置方法可以做到这一点 getClass().getProtectionDomain().getCodeSource().getLocation().getPath())= "/C:/test%20test/" 它被转换为 "\C:\test test\" 所以我可以将它传递给 fileOutputStream 构造函数，基本上 getpath 方法将 '\' 更改为 '/' 并将 %20 更改为''

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:32:32.273

请参阅：[在 Java 中获取当前工作目录](https://stackoverflow.com/questions/3153337/how-do-i-get-my-current-working-directory-in-java)

不需要 getPath 方法，因为 Java 提供了处理路径的方法。

# android - 如何在 Android 中创建 https 连接？

> ID：15878832
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:17:47.727
> 
> 标签：android, https

我在 Stackoverflow 中发现了很多帖子，但无法让解决方案适用于：

如何在 Android 中创建 https 连接？

代码是：

```
 HttpParams httpParameters = new BasicHttpParams();
    ConnManagerParams.setMaxTotalConnections(httpParameters, 25);
    int timeoutConnection = 10000;
    HttpConnectionParams.setConnectionTimeout(httpParameters,
            timeoutConnection);
    int timeoutSocket = 10000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory
            .getSocketFactory(), 80));
            schemeRegistry.register(new Scheme("https", SSLSocketFactory
            .getSocketFactory(), 443));

    ClientConnectionManager cm = new ThreadSafeClientConnManager(
            httpParameters, schemeRegistry);
    httpClient = new DefaultHttpClient(cm, httpParameters); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:25:27.257

```
HttpClient httpclient = getNewHttpClient();  

HttpGet httpget = new HttpGet(URL);
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

public HttpClient getNewHttpClient() {
        try {
            KeyStore trustStore = KeyStore.getInstance(KeyStore
                    .getDefaultType());
            trustStore.load(null, null);

            SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            HttpParams params = new BasicHttpParams();
            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory
                    .getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));

            ClientConnectionManager ccm = new ThreadSafeClientConnManager(
                    params, registry);

            return new DefaultHttpClient(ccm, params);
        } catch (Exception e) {
            return new DefaultHttpClient();
        }
    } 
```

**MySSLSocketFactory.java**

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
    super(truststore);

    TrustManager tm = new X509TrustManager() {
        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    };

    sslContext.init(null, new TrustManager[] { tm }, null);
}

@Override
public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
    return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
}

@Override
public Socket createSocket() throws IOException {
    return sslContext.getSocketFactory().createSocket();
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T14:35:24.660

当您与服务器进行 https 通信时，您必须做几件事。

1.  使用 Bouncy Castle 使用 OpenSSL 工具创建证书。

2.  将证书加载到代码中并教您的代码使用它。

3.  最后点击 URL 以使用 HttpResponse 类获取响应

[在此链接http://www.compiletimeerror.com/2013/01/login-application-for-android-android.html#.VSE1ftyUfTB](http://www.compiletimeerror.com/2013/01/login-application-for-android-android.html#.VSE1ftyUfTB)中解释了一个很好的示例，它逐步定义了它是如何工作的

# java - 使用 Java+Hibernate+DB2 为别名获取正确映射的挑战

> ID：15878835
> 
> 赞同：2
> 
> 时间：2013-04-08T12:18:04.493
> 
> 标签：java, hibernate, alias, db2-luw

我正在使用 Hibernate 和 IBM DB2 9.7 LUW 为数据库编写 Java 应用程序。我正在使用 SQLQuery API 读取自定义 SQL 查询字符串并针对数据库执行它。该查询包含别名，即`SELECT WORK.EMPLOYEE AS WORKEMPLOYEE`，仅作为示例。

使用`list()`命令从 DB 检索结果集时，结果`map`不包含别名作为键。所以写作`map.containsKey("WORKEMPLOYEE")`返回`false`。我也尝试过使用`query.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE)`，但并没有改变这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T11:48:25.723

我不了解 Hibernate，但我怀疑这是我们看到的有关 DB2 LUW 和别名的问题的症状。

它涉及到列的“名称”和它的“标签”之间的区别。IBM 在[此页面](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.wn.doc/doc/i0052606.html)记录了该行为，这表明该行为会随着数据库驱动程序的不同版本而有所不同。

具体来说，这一段：

> 查询的 SELECT 列表中的列是否有 AS 子句。对于 IBM Data Server Driver for JDBC and SQLJ Version 4.0 之前的 JDBC 驱动程序，如果查询的 SELECT 列表中的列包含 AS 子句，则 ResultSetMetaData.getColumnName 返回 AS 子句的参数。在 IBM Data Server Driver for JDBC and SQLJ Version 4.0 下，ResultSetMetaData.getColumnName 返回表列名。

建议您看到您（和我）认为有问题的行为，因为您使用的是版本 4+ 驱动程序。

有三种可能的解决方案，没有一个是完全令人满意的。

1.  使用版本 3.x 驱动程序。
2.  您可以切换到`getColumnLabel`在`ResultSetMetaData`. 对于使用版本 4+ 驱动程序的 DB2 LUW，这将为您提供正确的结果。这适用于我们的问题版本，但可能与 Hibernate 无关或不可能。
3.  您可以在`DataSource`or`Connection`对象上设置一个属性：`useJDBC4ColumnNameAndLabelSemantics`需要设置为`DB2BaseDataSource.NO`. 但是，我不知道您是否可以通过 Hibernate 进行设置。如果可以的话，它应该使别名表现出旧的（和属性）的方式。

在我们的环境中，我们还没有决定如何最好地处理这个问题。我们目前正在使用选项 1 解决它。我倾向于使用选项 2，但我们必须支持多个数据库平台，我不确定它如何与其他平台一起使用。对于选项 3，我们使用 Spring，因此设置该属性可能不切实际。

# c# - 正在使用的 sql server 版本不支持数据类型 'datetime2'

> ID：15878838
> 
> 赞同：2
> 
> 时间：2013-04-08T12:18:14.837
> 
> 标签：c#, sql, sql-server-2008, entity-framework, sql-server-2005

我的开发服务器是 MS SQL Server 2008 和 Visual Studio 2012。当我在本地运行该项目时它工作正常，但是当我尝试在服务器上运行相同的项目时，它给出了这个错误并且不允许插入或更新日期。错误：“正在使用的 sql server 版本不支持数据类型 'datetime2'。”

我的在线服务器使用的是 MS Sql Server 2005。我没有使用数据类型为“datetime2”的任何字段，所有字段的数据类型都为 datetime。其次，我还尝试将字段从 ProviderManifestToken=”2008” 更改为 ProviderManifestToken=”2005” 但它没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:23:48.003

您不必在数据库中使用 DATETIME2 来获取此错误。请参阅此[问题](https://stackoverflow.com/questions/10224406/the-version-of-sql-server-in-use-does-not-support-datatype)

> 一旦您将所需的（非空）DATETIME 列添加到现有表并且您在将实体保存到数据库之前未设置值，通常会发生此错误。在这种情况下，.NET 将发送默认值 1.1.0001，并且该值不适合 DATETIME 范围。这（或类似的东西）将成为您问题的根源。

# linux - 想要在 awk 命令中使用内部变量

> ID：15878840
> 
> 赞同：-3
> 
> 时间：2013-04-08T12:18:18.147
> 
> 标签：linux, awk, conditional-statements

```
awk < MigStat.stat -F: '{ if ($a == "load")b=8; } $1 == "D0001" && FNR== '$c' {print $b}' 
```

现在我想打印列 $b 中的值，但在这种情况下它打印整行。我想要做的是使用 if 语句中 b 的值来打印该列中的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:22:31.227

要传入值，请使用以下`-v`选项：

```
awk -F: -v a=2 -v c=10 '$a=="load"{b=8}$1=="D0001"&&FNR==c{print $b}' MigStat 
```

笔记：

*   要传入变量，请使用 的`-v`选项`awk`。

*   `awk`读取您不需要使用重定向的文件。

*   的结构`awk`是`condition{block}`。

*   `awk`将变量初始化为`0`所以如果`b`没有在块中设置`$a=="load"{b=8}`那么`{print $b}`将`{print $0}`是`$0`整行的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:32:31.567

您不需要冗余分配`b=8`. 如果脚本与您在此处发布的一样，则根本不需要`$b`。

如果`$a, $c`是外壳变量：

```
awk -F: -v a="$a" -v c="$c" 'a=="load"&&$1=="D0001"&&NR==c{print $8;exit}' MigStat.stat 
```

并在`print $8`调用`exit;`停止 awk 处理更多行后更好。

# asp.net-mvc-4 - 带有附加参数的文件上传为 JSON

> ID：15878842
> 
> 赞同：0
> 
> 时间：2013-04-08T12:18:20.073
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用以下代码上传带有一些附加参数的图像。

```
[HttpPost]
    public HttpResponseMessage Upload(Data data)
    {
        var count = HttpContext.Current.Request.Files.Count;
        return null;
    } 
```

`postman`我尝试使用chrome 扩展检查此方法。我传递了这些值

在标题下

```
enctype: multipart/form-data
Content-Type: application/json 
```

在form-data下添加了一个图片文件

生下

```
{
 "Id": "1",
  "ModifiedBy" : "1"
} 
```

但我得到 0 的问题`count`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:31:45.397

Content-Type 应该是 multipart/form-data 而不是 application/json 以使您的代码正常工作。典型的内容类型如下所示：

```
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryvmxBBVAoH3KRsa9L 
```

然后，实际的帖子数据包含由边界分隔的“数据”块。这些块可以包含内容类型，但它们不是必须的。如果您正在上传文件，则内容类型无关紧要 - 文件名决定了类型。

综上所述，对于 WebAPI，您不应该使用 ASP.NET HttpContext 对象，而应该使用较低级别的 Web API 语义。虽然只要您在 ASP.NET 堆栈内运行，您所做的工作就可以工作，但如果您自己托管或将来在 OWin/Katana 等不同的堆栈上运行，则此代码将不再工作。

要使用特定于 Web API 的代码处理文件上传，请查看 Filip W 的这篇博文。

[http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)

# c++ - 用 char 指针加载文件

> ID：15878844
> 
> 赞同：2
> 
> 时间：2013-04-08T12:18:25.883
> 
> 标签：c++, file, pointers, load, char

我有一个从需要的文件中加载数据的类`char* fileName`，但对如何以这种方式使用它没有清楚的了解。

```
// Constructor
Foo(char* fileName) 
```

我知道 a`char`只包含一个字符，但有人可以澄清如何使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:25:24.850

A`char*`是“指向”的指针`char`。也就是说，它保存了一个`char`对象的地址。使用指向数组中第一个元素的指针是很常见的。也就是说，如果将地址加 1，您将获得数组中下一个元素的地址。

```
┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
│     │     │     │     │     │     │     │     │     │
└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘
   ^
   └─ pointer to first element of an array 
```

C 风格的字符串通常存储在`char`. 例如，这里我们将字符串存储`"filename.txt"`在一个数组中`char`：

```
char str[] = "filename.txt"; 
```

数组的名称可以隐式转换为指向其第一个元素的指针。也就是说，`str`可以将其用作指向`f`字符的指针。该指针的类型为`char*`。

这就是为什么我们经常将`char*`变量视为 C 风格的字符串。尽管它实际上只是一个指针，但通常假定它们指向`char`数组中的第一个。该数组也最常被假定为以空值结尾，这意味着有一个`char`with 值`0`标记字符串的结尾。字符串在内存中看起来像这样：

```
┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
│ f │ i │ l │ e │ n │ a │ m │ e │ . │ t │ x │ t │\0 │
└───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘ 
```

因此，由于数组到指针的转换，您可以将数组传递`str`给您的构造函数，如下所示：

```
Foo foo(str); 
```

但是请注意，将字符串文字直接传递给您的构造函数在 C++03 中已弃用，在 C++11 中完全无效。你不能这样做：

```
Foo foo("filename.txt"); 
```

问题在于这个字符串文字的类型是“array of 13 `const` `char`”。转换为指针后，它是一个`const char*`. 您不能将 a 传递`const char*`给`char*`参数，因为它会违反-`const`正确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:24:08.710

从历史上看，C 的创建者认为我们可以在可以传递数组的地方传递指针，反之亦然。

如果你稍微思考一下这个概念，它们是密切相关的。指针可以浏览内存的许多部分（包括一个数组，它是一个彼此相辅相成的内存字节）。

使用指针而不是数组，并使用 ++ 和 -- 运算符（我们称之为指针算术），您可以在内存中移动，就像在数组中移动索引值一样。

C 字符串中的规范是使用最后的 '\0' 字符来分隔字符串的结尾。将您的指针移动到此结束，然后您将拥有整个字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:27:43.733

A`char*`是指向字符的指针。文件名可以是字符数组`char fileName[12] = "myFile.txt";`[除了`string`etc ] 在这种情况下，`char*`指针用于指向该数组的第一个字符。当您必须打印它时，编译器会获取指针 [ka 基地址] 给出的地址，并通过获取每个字符的地址来继续打印每个字符。a的地址`char`是通过在基地址上加下标得到的，直到`\n`

所以你可以利用

```
char* fileName = "myFile.txt"; or char fileName[11] = "myFile.txt";
Foo(fileName); 
```

或 Foo("myFile.txt");

# f# - 仅在 FSI 中经过身份验证的 http 请求失败

> ID：15878848
> 
> 赞同：5
> 
> 时间：2013-04-08T12:18:32.107
> 
> 标签：f#, fsi, f#-data

我正在发出这样的经过身份验证的请求：

```
let url = "https://datafeeds.networkrail.co.uk/ntrod/CifFileAuthenticate?type=CIF_ALL_FULL_DAILY&day=toc-full"
let auth = "Basic " + (username + ":" + password |> Encoding.UTF8.GetBytes |> Convert.ToBase64String)
Http.Request(url, headers=["Authorization", auth]) 
```

Http.Request 来自[FSharp.Data](http://fsharp.github.io/FSharp.Data/library/Http.html)

在已编译的 F# 应用程序上它工作正常，但是在 F# 交互式运行它时，发送的请求以某种方式略有不同，我收到此错误：

```
System.Net.WebException: The remote server returned an error: (403) Forbidden.
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message> 
```

在提琴手下查看，该网址返回一个 302 重定向到[https://nr-datafeed-cif.s3.amazonaws.com/CIF_ALL_FULL_DAILY%2Ftoc-full.json](https://nr-datafeed-cif.s3.amazonaws.com/CIF_ALL_FULL_DAILY%2Ftoc-full.json)？...

但是在 fsi 下，后续请求会转到[https://nr-datafeed-cif.s3.amazonaws.com/CIF_ALL_FULL_DAILY/toc-full.json](https://nr-datafeed-cif.s3.amazonaws.com/CIF_ALL_FULL_DAILY/toc-full.json) ?... 。

# ios - 如何将设备添加到 Apple 更新的开发人员门户中的配置文件？

> ID：15878849
> 
> 赞同：0
> 
> 时间：2013-04-08T12:18:34.367
> 
> 标签：ios

我总是可以通过检查我想要添加的设备来做到这一点，但我无法通过界面更新找到该选项。

我刚刚编辑了一个旧配置文件（其中有 14 个设备），以便我可以添加一个新测试仪，但现在它告诉我它没有注册任何设备。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:06:06.943

苹果本周末刚刚重新设计了 iOS 开发中心，其中包含一些愚蠢的规则。现在您无法编辑您的临时分发配置文件。要添加任何设备，您必须创建新的配置文件并添加所有设备。添加设备后，您只能编辑其名称。

# gnuplot - gnuplot中对数刻度图中的xrange限制

> ID：15878855
> 
> 赞同：1
> 
> 时间：2013-04-08T12:18:51.527
> 
> 标签：gnuplot

我正在尝试使用 logscale 在 gnuplot 中拟合一个情节。我有 50000 个数据点。起初我以这种方式适合情节。

```
 f(x) = b + m*x
 fit f(x) "xyMSD-all-mal-cel-iso-bcm-thermo2.dat" using 1:2  via m,b 
```

我得到了斜率值。然后我尝试在不同的范围内获得斜率值，如下所示。

```
 fit [30000:50000] f(x) "xyMSD-all-mal-cel-iso-bcm-thermo2.dat" using 1:2  via m,b 
```

上面的代码工作正常。在下一次尝试中，我尝试了，

```
 f(x) = b + m*x
 fit f(x) "xyMSD-all-mal-cel-iso-bcm-thermo2.dat" using (log($1)):(log($2)) via m,b 
```

以上工作也很好。我得到斜率值。然后我尝试选择如下所示的 xrange。这是我有问题的地方。这没用。

```
 fit [500:5000] f(x) "xyMSD-all-mal-cel-iso-bcm-thermo2.dat" using (log($1)):(log($2)) via m,b 
```

有什么办法可以做到这一点？感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:05:16.457

该范围必须适合表达式，在您的情况下是日志值。因此，请确保日志值在范围内。例如，如果您的范围为`($1):($2)`，`[500:5000]`那么对应的范围`(log($1)):(log($2))`应该类似于`[2.69:3.69]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-19T06:29:37.337

Gnuplot 首先在您的数据上使用表达式。限制范围是第二步，因此在这种情况下，所需数据点的对数必须在`xrange`.

**并且不要忘记：** `logscale`使用基于 10 的对数，但`log(x)`or`log($1)`表示基于“e”的对数（约 2.7183）。与`logscale`使用函数`log10(x)`（或`log(x)/log(10)`）调和。

*PS：我知道原来的问题之前已经回答过了，但是我没有足够的声望来附加我关于该`log()`功能的有用评论作为评论。*

# django - int() 参数必须是字符串或数字，而不是 'SimpleLazyObject'

> ID：15878860
> 
> 赞同：27
> 
> 时间：2013-04-08T12:19:09.733
> 
> 标签：django, django-views

我得到了以下错误消息，

> /save/ int() 参数处的 TypeError 必须是字符串或数字，而不是“SimpleLazyObject”

在执行以下表格时。

* * *

视图.py

```
def bookmark_save_page(request):
    if request.method == 'POST':
        form = BookmarkSaveForm(request.POST)
        if form.is_valid():
            # create or get link
            link, dummy = Link.objects.get_or_create(
                    url = form.cleaned_data['url']
                    )
            # create or get bookmark
            bookmark, created = Bookmark.objects.get_or_create(
                    user=request.user,
                    link=link
                    )
            # update bookmarks title
            bookmarks.title = form.cleaned_data['title']
            # if the bookmark is being updated, clear old tag list.
            if not created:
                bookmark.tag_set.clear()
            # create new tag list
            tag_names = form.cleaned_data['tags'].split()
            for tag_name in tag_names:
                tag, dummy = Tag.objects.get_or_create(name=tag_name)
                bookmark.tag_set.add(tag)
            # save bookmark to database.
            bookmark.save()
            return HttpResponseRedirect(
                    '/user/%s/' % request.user.username
                    )
    else:
        form = BookmarkSaveForm()
    variables = RequestContext(request, {
        'form': form
    })
    return render_to_response('bookmark_save.html', variables) 
```

* * *

我以为我出错了，因为我通过了链接

```
bookmark, created = Bookmark.objects.get_or_create(
                    user=request.user,
                    link=link
                    ) 
```

但我不知道如何解决它。我该如何解决？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-08T12:58:36.900

可能的原因是您正在设置`user = request.user`，其中 request.user 不是真正的 User 对象，而是 SimpleLazyObject 实例。请参阅[django：django.utils.functional.SimpleLazyObject 的目的？](https://stackoverflow.com/questions/10506766/django-purpose-of-django-utils-functional-simplelazyobject/10507200#10507200)有关更多详细信息，但使用`request.user.id`应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-11T14:36:24.660

在 localhost 上运行这段代码时，您必须登录。否则`request.user`将是 a `SimpleLazyObject`，那么错误就会出现。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-15T11:33:54.180

Here you trying to create a Bookmark object based on request.user , but request.user is a SimpleLazyObject , so we can get a more secure user object by :

```
from django.contrib import auth

current_user = auth.get_user(request) 
```

and further your query should be

```
bookmark, created = Bookmark.objects.get_or_create(
                    user=current_user,
                    link=link
                    ) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-15T22:25:34.143

很可能正在加载页面的用户未经过身份验证。因此抛出错误。如果要保存对数据库的 request.user 引用，显然必须确保只有经过身份验证的用户才能调用该函数。

在您的情况下，有两种可能性 - 将“@login_required”装饰器添加到函数或检查用户是否在代码中经过身份验证。以下是片段：

带装饰器：

```
from django.contrib.auth.decorators import login_required

@login_required
def bookmark_save_page(request):
    if request.method == 'POST':
        form = BookmarkSaveForm(request.POST)
        if form.is_valid():
            # Do something 
```

或者 - 如果用户通过身份验证，则检查代码内部：

```
def bookmark_save_page(request):
    if request.method == 'POST' and request.user.is_authenticated():
        form = BookmarkSaveForm(request.POST)
        if form.is_valid():
            # Do something 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-03T17:52:05.110

那很奇怪，我有同样的问题和相同的解决方案。在尝试了一堆替代方案后，我回到了 user = request.user 并且它起作用了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-21T13:14:46.543

如果你想设置一个添加**请求**属性，基于`user`-> 你需要使用`lazy`正确处理的 Django 函数`Field.get_prep_value`

```
 from django.utils.functional import lazy
   request.impersonator = lazy(lambda: request.user.id, int)() 
```

# jquery - 每个 id 调用 jQuery 函数或更好地分组到一个调用中

> ID：15878861
> 
> 赞同：0
> 
> 时间：2013-04-08T12:19:14.777
> 
> 标签：jquery, html, performance

我想知道如果我`id`在一次调用 jQuery 函数时对一些 ' 进行分组，或者逐行调用它（`id`after `id`），这是否会提高性能。

暂时是这样的：

```
$('#culetType').combobox();
$('#girdle').combobox();
$('#polishLinesIntensity').combobox();
$('#burnmarksIntensity').combobox();
$('#scratchesIntensity').combobox();
$('#damagesIntensity').combobox(); 
```

那么，如果我这样做会不会是一个性能改进：

```
$('#culetType, #girdle, #polishLinesIntensity, #burnmarksIntensity, #scratchesIntensity, #damagesIntensity').combobox(); 
```

除了阅读不愉快的事实。

我知道我可以给所有这些`id`'sa `class`，这将使我只需要一个电话。

那么这是否会提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:29:00.107

在较新的浏览器中，使用单个选择器会稍微提高性能，因为 jQuery 使用内置方法来运行选择器。创建单个 jQuery 对象并对其中的所有元素进行操作比创建一堆 jQuery 对象要快一些。

在较旧的浏览器中，解析包含单个 id 的选择器会稍微快一些，但创建多个 jQuery 对象会稍微慢一些，因此这些方法的执行情况大致相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:49:36.700

据我所知，写作`$()`每次都会调用 DOM。所以即使在你调用一些元素时更好：

```
el = $('#myEl');
el.firstAction();
el.secondAction(); 
```

代替

```
$('#myEl').firstAction();
$('#myEl').secondAction(); 
```

所以我认为拨打一个电话`$('...,...,...')`会更快，但它会是小的提升。

但是您需要记住，在打一个电话的情况下，您不能执行以下操作：

```
$('#culetType').combobox();
$('#girdle').combobox({property: false});
$('#polishLinesIntensity').combobox(); 
```

# c# - 搜索组合框，如 Google 搜索

> ID：15878862
> 
> 赞同：9
> 
> 时间：2013-04-08T12:19:17.187
> 
> 标签：c#, winforms, autocomplete, combobox, search-engine

我正在制作一个 Windows 窗体，其中我有一个组合框，我从 SQL Server 2010 中加载了一些“发票编号”。我想在用户输入组合框中时显示发票编号。例如，如果用户键入“100”，则应在下拉列表中显示以“100”开头的发票编号。

请帮忙，在此先感谢...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T07:46:21.900

```
 DataTable temp;
    DataTable bank;
    private void Form1_Load(object sender, EventArgs e)
    {
        comboBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        comboBox1.AutoCompleteSource = AutoCompleteSource.ListItems;

        temp = DbRdRw.SqlDbRead("Select * from BankMaster", "BankMaster");

        DataView dtview = new DataView(temp);
        dtview.Sort = "BankName DESC";
        bank = dtview.ToTable();

        comboBox1.DataSource = bank;
        comboBox1.ValueMember = "BankName";
        comboBox1.DisplayMember = "BankName";
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-22T09:40:38.577

在加载时用数据库中的项目填充组合框，然后设置组合框属性：

**AutoCompleteMode** : 建议追加

**自动完成源**：列表项

确保将 DropDown 样式设置为 DropDown，以便用户可以输入。如果在组合框中输入的文本在接受之前确实存在于列表中，只需进行验证。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:37:34.287

尝试 AutoCompleteMode - Suggest 或 SuggestAppend，具体取决于您正在寻找的确切行为。另外，请记住为 AutoComplete 将基于自动完成的列表设置 AutoCompleteSource（我建议使用 ListItems）。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletemode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletemode.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T12:38:12.540

你需要在这里做的是：

*   每次用户在文本框中输入字符时获取一个事件。
*   有一个在此事件上运行的函数来读取框的内容（在您的示例中为“100”）并向您的数据库发出查询，例如：

    `SELECT InvoiceNumber from Invoices WHERE InvoiceNumber LIKE '100%'`

*   将匹配结果显示在组合框中，供用户选择。

# c# - 进度条 C# 变量

> ID：15878864
> 
> 赞同：-2
> 
> 时间：2013-04-08T12:19:29.403
> 
> 标签：c#, progress-bar

我正在尝试从我当前拥有的变量中获取 progessbar（在 C# 中）的值，除以 52，然后乘以 100。这是我的代码，有什么建议可以解决吗？

```
int value;             
value = TestP1.corAns / 52 * 100;             
ProgressBar pBar = new ProgressBar();            
pBar.Value = value;             
label2.Text = Convert.ToString(value) + "%"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:27:04.037

`Value`是`int`可变的，因此`TestP1.corAns / 52`即使`TestP1.corAns`是实数（`float`或`double`）也会四舍五入到某个整数值。此外，如果`TestP1.corAns`也是整数，您将进行整数除法。最终，`value`变量的值将四舍五入为最大整数，小于您的操作结果，大概为 0，因为您需要百分比。为了避免这种情况，首先确保在除法后得到实数，然后将该数字乘以 100。使用如下所示：

```
double value;             
value = TestP1.corAns / 52.0 * 100.0;             
ProgressBar pBar = new ProgressBar();            
pBar.Value = (int)value;             
label2.Text = Convert.ToString(value) + "%"; 
```

# asp.net - 如何从 GridView 获取列宽？

> ID：15878865
> 
> 赞同：0
> 
> 时间：2013-04-08T12:19:34.297
> 
> 标签：asp.net, gridview

正如标题所暗示的那样，我希望在调用 DataBind() 后获得每列的宽度。

调用 gv.Columns[i].ItemStyle.Width.Value 返回 0。这可能是因为 .aspx 文件中 GridView 的定义没有定义宽度。我不想定义它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:29.837

您想在客户端呈现列时获取列的宽度？受制于内容的宽度、页面其他地方的 CSS 设置以及浏览器窗口大小等因素？

为此，您必须使用一些客户端代码，或者收集宽度并将它们存储在隐藏字段中，等待回发，或者通过 Ajax 将它们发送回来。

无论哪种方式，这将是一个两步过程：您将无法`DataBind`检查在同一页面加载中的宽度。您必须等待页面在客户端上呈现才能确定真实宽度。

在任何情况下，除非您正式设置 ，否则`ItemStyle.Width`无论是在回发之后还是在回发之后，您都不会获得非零值，因为*在客户端上呈现*`DataBind`的列的宽度不会自动更新回发。上面我的建议都涉及在客户端确定价值并以其他方式返回它。

# java - 错误插入元素（主键）

> ID：15878866
> 
> 赞同：1
> 
> 时间：2013-04-08T12:19:36.870
> 
> 标签：java, web-services, jpa, playframework, playframework-1.x

我的游戏框架配置有一个问题，当我插入一个新的时，`Notification`我收到了错误。我不知道为什么会出现这个错误。因为我扩展`Model`了类，所以 Play 必须为每一行生成一个新 ID。

如果你能告诉我问题是什么，或者其他更好的方法来做到这一点，也许如果我扩展了`GenericModel`并且我做的代码是这样评论的：

```
// @Id
// @GeneratedValue(strategy = GenerationType.AUTO)
// public long id; 
```

但如果我这样做，我必须如何插入新行？

非常感谢！！！！

* * *

发现错误：

> **发生 PersistenceException** : `org.hibernate.HibernateException`: 数据库没有返回本地生成的标识值

这是`/app/controllers/WSConfiguracion.java`：

```
if (cliente.valorBateria < filasConfiguracionClientes.get(i).limiteBateria) {   
    if (!estadoNotificacion.hayNotiBateria) {

       // code below generated the error
       Notificacion notificacion = new Notificacion(
          filasConfiguracionClientes.get(i).imeiadmin,imei, "bateria baja"
       ).save();

       estadoNotificacion.hayNotiBateria = true;
       //notificacion.save();
       estadoNotificacion.save();
       renderText("NOTIFICA BATERIA");
    }
} else {
    ...
} 
```

### 这是我的模型。

```
package models;
import javax.persistence.Entity;
import play.db.jpa.Model;

@Entity
public class Notificacion extends Model {
   //@Id
   //@GeneratedValue(strategy = GenerationType.AUTO)
   //public long id;

   //@Id
   public long imeiadmin;
   //@Id
   public long imeiclient;
   public String detalleNotificacion;

   public Notificacion(long imeiadmin, long imeiclient,String detalleNotificacion) {
      this.imeiadmin = imeiadmin;
      this.imeiclient = imeiclient;
      this.detalleNotificacion = detalleNotificacion;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:16:55.960

我认为错误：

> **发生 PersistenceException** : `org.hibernate.HibernateException`: 数据库没有返回本地生成的标识值

发生是因为您的数据库中**没有序列**。如果您`Model`为模型扩展类并且处于**开发**模式，Play!Framework 会在名为`hibernate_sequence`. 该序列用于为您的模型生成**ID**。您可以检查您的数据库以确保该序列存在。

如果`hibernate_sequence`存在，您可以像以前一样插入数据：

```
Notificacion notificacion = new Notificacion(
      filasConfiguracionClientes.get(i).imeiadmin,imei, "bateria baja"
).save(); 
```

那么，上面的错误应该得到解决。

* * *

> ### 笔记：
> 
> > **如果您使用PostgreSQL**数据库，我指的是这个答案。如果您使用其他数据库，例如**MySQL**，您应该`AUTO_INCREMENT`在 ID 列上定义为序列定义。

* * *

### 更新 - 我已经为 H2 DB 设置尝试过这个

使用`H2`数据库作为配置`application.conf`：

```
# Development mode
application.mode=dev
# Set simple file written database (H2 file stored)
db=fs
# JPA DDL update for development purpose only
jpa.ddl=update 
```

### 控制器：

```
public static void test15878866() {
   // force to insert dummy data
   Notificacion notificacion = new Notificacion(
      1L, 2L, "This is new notificacion"
   ).save();

   renderText(notificacion.detalleNotificacion);
} 
```

### 该模型 ：

```
@Entity
public class Notificacion extends Model {
   public long imeiadmin;
   public long imeiclient;
   public String detalleNotificacion;

   public Notificacion(long imeiadmin, long imeiclient,String detalleNotificacion) {
      this.imeiadmin = imeiadmin;
      this.imeiclient = imeiclient;
      this.detalleNotificacion = detalleNotificacion;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:07:19.457

我发现了错误！！我只需要添加**super();** 在构造函数内部。谢谢大家，iwawiwi。

**该模型 ：**

```
@Entity
public class Notificacion extends Model {
public long imeiadmin;
public long imeiclient;
public String detalleNotificacion;

  public Notificacion(long imeiadmin, long imeiclient,String detalleNotificacion) {
  super();
  this.imeiadmin = imeiadmin;
  this.imeiclient = imeiclient;
  this.detalleNotificacion = detalleNotificacion;
  }
} 
```

# c# - 功能区组的 ItemContainerStyle

> ID：15878871
> 
> 赞同：2
> 
> 时间：2013-04-08T12:19:54.267
> 
> 标签：c#, wpf, binding

我正在尝试使用以下 xaml 将 RibbonGroup 和几个 RibbonButtons 绑定到我的视图模型：

```
<Style TargetType="{x:Type ribbon:RibbonGroup}" x:Key="RibbonGroupStyle">
    <Setter Property="Header" Value="{Binding Header}" />
    <Setter Property="ItemContainerStyle" Value="{DynamicResource RibbonButtonStyle}" />
    <Setter Property="ItemsSource" Value="{Binding Buttons}" />
</Style>

<Style TargetType="{x:Type ribbon:RibbonButton}" x:Key="RibbonButtonStyle">
    <Setter Property="Label" Value="{Binding Header}" />
</Style> 
```

这给了我以下错误，我可以理解，但是如何正确地将 RibbonButton 的标签绑定到我的视图模型？

```
A style intended for type 'RibbonButton' cannot be applied to type 'RibbonControl'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:45:06.303

您可以将一种样式放在另一种样式中并将其应用于每个按钮：

```
<Style TargetType="{x:Type ribbon:RibbonGroup}" x:Key="RibbonGroupStyle">
    <Style.Resources>
        <Style TargetType="{x:Type ribbon:RibbonButton}" BasedOn="{StaticResource {x:Type ribbon:RibbonButton}">
            <Setter Property="Label" Value="{Binding Header}" />
        </Style>
    </Style.Resources>

    <Setter Property="Header" Value="{Binding Header}" />
    <Setter Property="ItemsSource" Value="{Binding Buttons}" />
</Style> 
```

# asp.net - 如何将 powershell 与 ASP.net 网页集成

> ID：15878872
> 
> 赞同：0
> 
> 时间：2013-04-08T12:19:54.673
> 
> 标签：asp.net, soap, exchange-server, powershell-2.0, powershell-3.0

如何将 powershell 与 ASP.net 网页集成，以便随时单击 asp.net 页面按钮。远程交换服务器上的 powershell 将执行并返回结果。此外，该结果必须发送回 asp.net 页面以在网页上显示给用户。你能帮忙吗？

谢谢 Swapnil Gangrade

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:24:04.510

[查看有关从 C# 运行 powershell](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)的代码项目文章。示例代码如下：

```
private string RunScript(string scriptText)
{
    // create Powershell runspace

    Runspace runspace = RunspaceFactory.CreateRunspace();

    // open it

    runspace.Open();

    // create a pipeline and feed it the script text

    Pipeline pipeline = runspace.CreatePipeline();
    pipeline.Commands.AddScript(scriptText);

    // add an extra command to transform the script
    // output objects into nicely formatted strings

    // remove this line to get the actual objects
    // that the script returns. For example, the script

    // "Get-Process" returns a collection
    // of System.Diagnostics.Process instances.

    pipeline.Commands.Add("Out-String");

    // execute the script

    Collection<psobject /> results = pipeline.Invoke();

    // close the runspace

    runspace.Close();

    // convert the script result into a single string

    StringBuilder stringBuilder = new StringBuilder();
    foreach (PSObject obj in results)
    {
        stringBuilder.AppendLine(obj.ToString());
    }

    return stringBuilder.ToString();
} 
```

但是要小心模拟，因为你可以以错误的用户身份运行这个 powershell。

# iphone - 在 iphone 中检索图像表单数据库花费的时间太长

> ID：15878873
> 
> 赞同：2
> 
> 时间：2013-04-08T12:19:56.360
> 
> 标签：iphone, ios

我是 iOS 编程的新手。

通过使用下面的代码，我从数据库中检索图像并将其存储在数组中，然后在缩略图中显示这些图像。

通过使用下面的代码，一切正常。但我有2个问题

1.  从数据库中检索图像花费的时间太长。
2.  我存储超过 8 张图像意味着它不显示图像，它正在终止应用程序。如果我拍摄低于 8 张图像，它会在缩略图中显示图像。

任何人都可以告诉我，这段代码有什么错误？

```
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];
array=[[NSMutableArray alloc]init];
array1=[[NSMutableArray alloc]init];

// Build the path to the database file
databasePath =  [docsDir stringByAppendingPathComponent: @"Taukydataaa.db"];

NSFileManager *fn=[NSFileManager defaultManager];
NSError *error;
BOOL success=[fn fileExistsAtPath:databasePath];

if(!success)
{    
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Taukydataaa.db"];
    success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
}

const char *dbpath = [databasePath UTF8String];

sqlite3_stmt    *statement;

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"select * from tauky"];

    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        while(sqlite3_step(statement) == SQLITE_ROW)
        {

            NSString* email_idField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,1)];
            NSString* email_idField1 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,0)];
            [array addObject:email_idField];
            [array1 addObject:email_idField1];

            blaukypath =[[NSMutableArray alloc]init];

            for (NSString* path in array)
            {
                [blaukypath addObject:[UIImage imageWithContentsOfFile:path]];
            }

            myScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 840.0)];
            myScrollView.delegate = self;
            myScrollView.contentSize = CGSizeMake(320.0, 840.0);
            myScrollView.backgroundColor = [UIColor whiteColor];

            [self.view addSubview:myScrollView];

            float horizontal = 8.0;
            float vertical = 8.0;

            for(int i=0; i<[blaukypath count]; i++)
            {
                if((i%4) == 0 && i!=0)
                {
                    horizontal = 8.0;
                    vertical = vertical + 70.0 + 8.0;
                }

                buttonImage = [UIButton buttonWithType:UIButtonTypeCustom];

                [buttonImage setFrame:CGRectMake(horizontal, vertical, 70.0, 70.0)];
                [buttonImage setTag:i];

                [buttonImage setImage:[blaukypath objectAtIndex:i] forState:UIControlStateNormal];
                [buttonImage addTarget:self action:@selector(buttonImagePressed:) forControlEvents:UIControlEventTouchUpInside];
                [buttonImage setImage:[UIImage imageNamed:@"play.png"] forState:UIControlStateSelected];

                [myScrollView addSubview:buttonImage];

                horizontal = horizontal + 70.0 + 8.0;
            }

            [myScrollView setContentSize:CGSizeMake(320.0, vertical + 78.0)];

            // Do any additional setup after loading the view, typically from a nib.
            self.navigationItem.leftBarButtonItem = self.editButtonItem;

            UIBarButtonItem *done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(insertNewObject:)];

            self.navigationItem.rightBarButtonItem = done;

            [self.myScrollView addSubview:image];
        }

        sqlite3_finalize(statement);
    }

    sqlite3_close(contactDB);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:25:58.463

几点观察：

*   您已将滚动视图的构建放在从表中读取数据的循环中。例如，如果您的数据库中有 9 行，您将有 9 个滚动视图，第一个有一个图像，第二个有两个，第三个有三个，等等，总共 45 个图像。我真的怀疑这就是你的意思。

*   您应该有一个循环从数据库中读取字符串（此时不要*创建*图像......只需存储图像路径）并填充您的数组。然后，您可以有一个单独的循环（理想情况下，一个完全独立的例程）来构建您的 UI。您确实应该将 UI 与数据库交互隔离开来。任何由图像对象数组组成的东西都会有问题：只维护图像路径数组。

创建大量不需要的图像的问题肯定会减慢应用程序并消耗内存。根据图像的大小，您甚至可能会耗尽内存并崩溃。

至少，您应该解决这个问题。

还有几个额外的问题：

*   另一个潜在的崩溃来源是，如果您的数组中的一个图像路径没有自行解析为图像的路径。因此，`imageWithContentsOfFile`将返回，并且任何添加到数组的`nil`尝试都会崩溃。`nil`在尝试使用它之前，请确保您测试以查看您是否成功找到/加载了图像。

*   你没有说图像有多大，但如果它们大于 140x140，你真的想考虑创建它们的屏幕分辨率再现。如果图像非常大，虽然它可以以 70x70 渲染它们，但您将用完整个图像的内存。同时显示这么多图像时，如果您不小心使用屏幕分辨率图像，您将很快消耗您的内存。

*   根据您在数组中引用的图像数量，您甚至可以考虑一个模型，您可以在其中处理该`UIScrollViewDelegate`方法`scrollViewDidScroll`并仅创建`UIImageView`对象并在它们滚动到视图中时填充它们各自的`image`属性（并删除那些已滚动到视图之外的对象）。如果针对 iOS 6，您可以使用 a`UICollectionView`而不是手动生成的滚动视图，并且您将自动获得其中的一些功能（只要您的数组是图像路径数组而不是图像对象数组）。

如果您仍然崩溃，您应该与我们分享崩溃的详细信息（如果您不告诉我们您遇到了哪种异常/错误，我们只是在猜测）。此外，如果您还没有，请实施一个`didReceiveMemoryWarning`，如果没有别的，当您有内存警告时会告诉您，以便您可以识别问题并解决它。并确保在设备上测试这样的内存消耗应用程序，因为有许多与内存相关的问题不会在模拟器上表现出来，但会在设备上引起注意。

* * *

虽然上面着重于崩溃问题，但您还提出了一个性能问题。特别是如果您不使用`UICollectionView`，而是手动构建滚动视图，那么您可能希望异步执行此操作。基本想法是，您将有一个创建`UIImage`对象的后台操作，然后调度将其添加到主队列中的滚动视图的 UI 任务（因为您*永远不会*在后台队列中执行 UI 操作）。但是，这样一来，用户就可以在图像弹出到位时开始使用该应用程序。

您可能需要在这里考虑一些微妙的问题（在多个线程上进行数据库交互需要一些仔细的实现；确保 UI 更新发生在主队列上；等等），但如果您仍然遇到性能问题，这是典型的解决方案。

尽管如此，我还是会先专注于修复崩溃，然后再处理性能问题。

# drupal-7 - Drupal7 - 安装时无法再更改配置文件/语言

> ID：15878881
> 
> 赞同：0
> 
> 时间：2013-04-08T12:20:33.440
> 
> 标签：drupal-7, installation, acquia

所以，我第一次安装 Drupal 7 Acquia 就成功了。

我不得不全部删除并重新安装

但是现在当我启动安装时，配置文件和语言设置会自动加载，我无法再更改它们：

```
http://localhost:8080/acquia-drupal-7.22.21/install.php?profile=acquia&locale=en 
```

![在此处输入图像描述](https://i.stack.imgur.com/kKwG6.png)

我花了这么多小时来寻找解决方案，但没有成功。我知道我可以在安装后翻译，但这不是我想做的。感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:40:48.993

您的 /sites/default/ 文件夹中是否已经有一个包含两个变量的 settings.php？

我在现有的数据库配置中遇到了同样的行为。

# android - 安卓歌曲控制

> ID：15878882
> 
> 赞同：3
> 
> 时间：2013-04-08T12:20:35.160
> 
> 标签：android

如何在播放下一首歌曲之前停止上一首播放歌曲，我得到修改后的代码，这是我修改后的代码

```
public void pl(int songindex)
{
    if(mp.isPlaying())
    {
        mp.stop();
        if(songindex==0)
        {

            mp=MediaPlayer.create(this, R.raw.gayatri);
            mp.start();
        }

        else if(songindex==1)
        {

            mp=MediaPlayer.create(this, R.raw.brahma);
            mp.start();
        }   

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:25:10.147

当您单击“下一首歌曲”按钮时，首先运行此代码

```
if(mp.isPlaying())
{
    mp.stop();
    //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T16:03:27.953

```
public void pl(int songindex)
{
if(mp!=null)
{
 mp.stop()
 ........
 ........\\your code here
 }
 else if(mp==null)
 {
  ...... 
  ......\\your code here
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T12:26:15.900

尝试这个

```
if(mp.isPlaying())
{
mp.stop();
} 
```

# java - LinkedStack 操作方法

> ID：15878883
> 
> 赞同：0
> 
> 时间：2013-04-08T12:20:42.093
> 
> 标签：java

我目前正在使用 LinkedStacks，我想知道为什么 toString 和 pop 方法不起作用？我使用的方法是本书给出的默认方法，即 Pop 和 toString 方法，其余的我工作过并且运行良好。push 方法完美地添加了元素。偷看，在不改变 List 和 Size 的情况下查看顶部元素，很好地返回了我使用 push 方法的次数。pop 方法奇怪地只工作一次然后给出一个错误。请注意本书在堆栈部分中给出的 toString 方法的示例似乎也不起作用。我很乐意接受任何指示，但请知道我只是一个初学者，我正在学习。这是该类的代码：

# 代码

```
public class LinkedStack<T> implements Stack<T> {

private int count;
private LinearNode<T> top;

//-----------------------------------------------------------------
// Creates an empty stack using the default capacity.
//-----------------------------------------------------------------
public LinkedStack()
{
count = 0;
top = null;
}

    @Override
    public boolean IsEmpty()

    {
        if(top == null)
        {
        System.out.println("Stack is empty");
        }
        return top == null;
    }

    @Override
    public void Push(T element)
{

    top = new LinearNode(element, top);
    System.out.println(element);
    count++;

}

    @Override 
    public T Pop() 
{
    T result;
    System.out.println("Lets pop the top element!");

    if (count == 0) 
    {
    System.out.println("Pop operation failed. "+ "The stack is empty.");
    }

    result = top.getElement();
    top = top.getNext();
    count--;
    System.out.println("The element that we have poped is :" + result);
    return result;

}

    Override
    public String toString()
{

    String result = "<top of stack>\n";
LinearNode current = top;
while (current != null)
{
result += current.getElement() + "\n";
current = current.getNext();
}
return result + "<bottom of stack>";

}

    @Override
    public T Peek() {
        System.out.println("Lets peek the top element!");
        if(count == 0)
        {
         System.out.println("Peek failed stack is empty");
        }
        System.out.println("The element that we have peeked is: " + top.getElement());
        return top.getElement();

    }

    @Override
    public int Size() {
        System.out.println("The size of the list now is: " + count);
        return count;
    }

    } 
```

# 主类代码：

公共类 LSmain {

```
public static void main(String[]args)
{
 LinkedStack<Integer> main = new LinkedStack<>();   
 main.Push(1);
 main.Push(2);
 main.Push(3);
 main.Size();
 main.Peek();
 main.Pop();
 main.Pop();
 main.Size();
 main.toString();

} 
```

}

# 使用pop方法输出两次

```
1
Exception in thread "main" java.lang.NullPointerException
2
3
The size of the list now is: 3
Lets peek the top element!
The element that we have peeked is: 3
Lets pop the top element!
The element that we have poped is: 3
Lets pop the top element!
    at LinkNod.LinkedStack.Pop(LinkedStack.java:64)
    at LinkNod.LSmain.main(LSmain.java:22)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

# 输出不使用两次pop方法

```
run:
1
2
3
The size of the list now is: 3
Lets peek the top element!
The element that we have peeked is: 3
Lets pop the top element!
The element that we have poped is: 3
The size of the list now is: 2 
```

# 分析

/**这实际上创建了一个新节点并存储插入参数中的值错误是我不能将顶部分配给同一个列表，因为如果我这样做，列表将仅由一个顶部节点组成。就像我过去的代码所说的那样，我只是说顶部的砖块等于它自己。所以我从类中了解到的是创建一个新的对象类型 LinearNode 来存储元素，然后 top 将等于该新节点的值。在这种情况下，Pop 将起作用，因为会有更多的节点而不是一个。关于 toString 方法的额外说明是返回；在 java 中有时会显示该值，并且大多数情况下并不意味着您需要添加 System.out.println(); 当您调用方法时在驱动程序中或在方法中。**/

# 推送方法更正：

```
@Override
    public void Push(T element)
{

     LinearNode<T> current = new LinearNode<>(element); 

     current.setNext(top);
     top = current;
     count++;

} 
```

# 主类代码：

```
public class LSmain {

    public static void main(String[]args)
    {
     LinkedStack<Integer> list = new LinkedStack<>();   
     System.out.println("Let's make a List!");
     System.out.println("Push 3 times.");
     System.out.println("Check the size.");
     System.out.println("Peek the top element.");
     System.out.println("Pop three times.");
     System.out.println("The size now should be zero!" + "\n");
     list.Push(1);
     list.Push(2);
     list.Push(3);
     System.out.println(list.toString());
     list.Size();
     list.Peek();
     list.Pop();
     list.Pop();
     list.Pop();
     list.Size();

    } 
```

# 功能输出

```
run:
Let's make a List!
Push 3 times.
Check the size.
Peek the top element.
Pop three times.
The size now should be zero!

<top of stack-->[3][2][1]<--bottom of stack>

Let's check the size of the list!
The size of the list is: '3'

Lets peek the top element!
The element that we have peeked is: [3]

Lets pop the top element!
The element that we have poped is: '3'

Lets pop the top element!
The element that we have poped is: '2'

Lets pop the top element!
The element that we have poped is: '1'

The size of the list is...Woah.
The list size is now: '0'
Push more elements!
BUILD SUCCESSFUL (total time: 3 seconds) 
```

谢谢您的帮助！PS：我忘了将方法声明更改为驼峰式。

# 线性节点代码#

/**当我试图通过创建一个新的 Node 对象来纠正 push 方法时，参数不正确会带来麻烦。**/

包链接节点；

```
public class LinearNode<T> {

    private LinearNode<T> next; //se guarda la referencia del Nodo
    private T element;          //Lista vacia

    public LinearNode()
{
next = null;
element = null;
}
//-----------------------------------------------------------------
// Creates a node storing the specified element.
//-----------------------------------------------------------------
public LinearNode (T elem)
{
next = null;
element = elem;
}
//-----------------------------------------------------------------
// Returns the node that follows this one.
//-----------------------------------------------------------------
public LinearNode<T> getNext()
{
return next;
}
//-----------------------------------------------------------------
// Sets the node that follows this one.
//-----------------------------------------------------------------
public void setNext (LinearNode<T> node)
{
next = node;
}
//-----------------------------------------------------------------
// Returns the element stored in this node.
//-----------------------------------------------------------------
public T getElement()//asigna valor
{
return element;
}

public void setElement(T elem)
{

    element = elem;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:58.900

这看起来像问题：

```
if (count == 0) 
    {
    System.out.println("Pop operation failed. "+ "The stack is empty.");
    }

    result = top.getElement();  //NPE here perhaps
    top = top.getNext();  
    count--;
    System.out.println("The element that we have poped is :" + result);
    return result; 
```

当您触发时，`count == 0`您不会从函数返回，而是继续处理弹出操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:31:05.967

*   `Pop`不起作用，因为您没有更新内部引用`LinearNode`
*   即使堆栈为空，您也会继续尝试弹出
*   您没有解释为什么`toString`不起作用，看起来还可以，但我会使用[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)这些`.append()`方法。

# bash - unix shell：检查目录中的文件列表与文件中的文件列表

> ID：15878887
> 
> 赞同：1
> 
> 时间：2013-04-08T12:20:50.093
> 
> 标签：bash, shell, unix, sh, ksh

我正在尝试编写一个 sh 脚本来检查文件中存储的文件扩展名列表中的所有文件是否位于特定目录中的某个位置。我正在做以下事情：

文件名看起来像 yyyymmdd.ext

hoff_list.lst 示例如下：

```
abc
dfg
hij
klm
xxx
... 
```

我的脚本是：

```
#!/bin/ksh
PATH=$PATH:/usr/bin
_input="/exchange/hoff_list.lst"
hoffdate="20130328"
hsourcedir="/upload_data/"
while IFS=' \t\n' read -r line; do
echo "=$line=" #first problem there
hoff_name=$hsourcedir$hoffdate"."$line
  if test ! "$hoff_name"
     then echo "$hoff_name DOES exist"
     else echo "$hoff_name does NOT exist or is empty"
  fi
done < "$_input" 
```

但它不会回复相关回复。如果文件 reqly 存在于 dir 中，它不会找到文件。回声“=$line=”

退伍军人

```
=abc
=dfg
... 
```

在预期的时候

```
=abc=
=dfg=
... 
```

看起来问题在那里，但不知道如何处理它。将感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:28:27.153

该文件`/exchange/hoff_list.lst`具有 CRLF 行结尾[http://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)。

摆脱 CR。您可以尝试使用`dos2unix`大多数 Linux 系统上可用的实用程序或参考[http://en.wikipedia.org/wiki/Newline#Conversion_utilities](http://en.wikipedia.org/wiki/Newline#Conversion_utilities)。

# c++ - 使用变量参数“...”的 C++ 布尔测试

> ID：15878893
> 
> 赞同：0
> 
> 时间：2013-04-08T12:21:10.333
> 
> 标签：c++, variadic-functions

`Boolean`使用变量参数列表传递多个对象时是否可以对它们进行测试`"..."`？

示例函数：

```
 bool check_collision( SPRITE sprite, PLATFORM platform ...){
         //do check
         return true;
    } 
```

像这样调用：

```
 if(check_collision(sprite,platform,platform2,platform3,platform4,platform5)){
          //manipulate sprite
    } 
```

而不是喜欢：

```
 if((check_collision(sprite,platform)
        && (check_collision(sprite,platform2)
        && (check_collision(sprite,platform3)
        && (check_collision(sprite,platform4)
        && (check_collision(sprite,platform5)){
        //manipulate sprite
    } 
```

或者：

```
 if((check_collision(sprite,platform)
        || (check_collision(sprite,platform2)
        || (check_collision(sprite,platform3)
        || (check_collision(sprite,platform4)
        || (check_collision(sprite,platform5)){
        //manipulate sprite
    } 
```

如果使用 测试它们`"..."`，您是否必须遍历每个平台/将精灵与每个平台进行比较？他们都必须返回`true`以使布尔测试为真还是只有一个？我猜你必须发送一个 3rd`Argument`所以函数知道 bool 是否是一个`OR`or and `AND`？（所以如果 OR，只有一个必须为真，如果 AND，所有都必须为真？）

我已经在我目前正在处理的程序中对其进行了测试，但是我没有实现任何迭代，所以我很确定它只检查第一个`platform`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:31:12.033

```
#include <stdarg.h>
double checkAll(int count, SPRITE sprite, ...)
{
    va_list ap;
    int j;
    boolean result = false;
    va_start(ap, sprite); //Requires the last fixed parameter (to get the address)
    for(j=0; j<count; ++j){
        result = result || checkCollision(sprite, va_arg(ap, PLATFORM)); 
    }
    va_end(ap);
    return result;
} 
```

# angularjs - 在 AngularJS 中的页面加载时初始化/填充选择框

> ID：15878900
> 
> 赞同：1
> 
> 时间：2013-04-08T12:21:37.037
> 
> 标签：angularjs

我正在使用 AngularJS 编写一个 Web 应用程序。我使用第三方库（提供 Angular 服务）从数据库中获取值，然后使用这些库来初始化页面上的一些下拉/选择框。

所以，我有这样的简单选择框：

```
<div ng-controller="ChoiceCtrl">
    <select ng-model="selectedFoo" ng-options="foo in foos"></select>
    <select ng-model="selectedBar" ng-options="bar in bars"></select>
</div> 
```

以及一个相应的控制器，用于初始化选择框的选项。我正在使用的服务在从数据库接收到值后调用给定的回调函数。（回调函数可以重构为一个，但为了清楚起见，我使用了单独的回调函数。）

```
angular.module('choice').controller('ChoiceCtrl', function($scope, ThirdPartyService) {
    $scope.selectedFoo = '';
    $scope.selectedBar = '';
    $scope.foos = '';
    $scope.bars = '';

    var fooCallback = function(result) {
        $scope.foos = result;
        $scope.$apply;
    }

    var barCallback = function(result) {
        $scope.bars = result;
        $scope.$apply;
    }

    ThirdPartyService.asyncGetData('fetchFooOptions', fooCallback);
    ThirdPartyService.asyncGetData('fetchBarOptions', barCallback);
}); 
```

数据库调用是异步的，在页面第一次渲染后完成，所以我手动调用`$scope.$apply`每个回调函数。

**当加载页面时异步获取值时，这是在 AngularJS 应用程序中初始化下拉/选择框的正确方法吗？**

我读过教程说`$scope.$apply`手动调用总是一种“代码味道”......但是由于我从数据库中获取值，所以操作发生在“Angular 之外”，我相信这使得这些调用是合理的——而且实际上是必要的.

我还想知道控制器是否适合这些调用。在我读过的教程中，选项总是在控制器中设置，但那些沙箱示例从来没有发生过异步数据库调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:48:59.173

您应该在代码中修改三件事

1.  该服务应返回一个承诺：请参阅 Angular 文档以创建承诺内部服务在从服务器接收数据时解决该承诺
2.  当 promise 解决时，内部控制器只需为 bar 和 foos 分配适当的值
3.  删除 $scope.apply 因为现在您正在修改适当角度范围内的值

链接：[在 Angular 中同时使用 Promise 和 service](https://stackoverflow.com/questions/14332943/use-promise-and-service-together-in-angular)

# android - Android：正确处理多个通知

> ID：15878907
> 
> 赞同：0
> 
> 时间：2013-04-08T12:21:48.633
> 
> 标签：android, notifications

我收到来自 GCM 的推送通知，并希望它们显示在通知栏中。所以我在 GCMIntentService 类中生成通知。

如果通知区域中已经有通知，则必须将此通知附加到新消息中（使用 BigTextStyle）。但是我怎么知道通知区域中是否有来自我的应用程序的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:25:07.317

您无法获取现有通知，但您可以通过设置通知 ID 来更新现有通知。

```
NotificationManager.notify(NotificationId, NotificationObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:16:32.537

不，您无法确定是否已经发布了通知；这是您应该在应用程序中跟踪的内容。

然而，幸运的是，更新现有通知的 API 与创建新通知的 API 相同：[`notify()`](https://developer.android.com/reference/android/app/NotificationManager.html#notify%28java.lang.String,%20int,%20android.app.Notification%29). 也就是说，一旦您获得新信息，将其添加到某个内部缓冲区（可能只是 a `StringBuilder`），代表收到的完整推送通知集，然后使用您上次使用的相同 ID 和标签构建新通知`Notification.Builder`并调用。`notify()`任何具有该 ID 和标签的现有通知都将替换为新内容。

# php - 以编程方式在 Facebook 群组上发帖

> ID：15878908
> 
> 赞同：3
> 
> 时间：2013-04-08T12:21:48.540
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试为 Facebook 开发一个小应用程序，但我遇到了 API 问题。经过几次搜索，我开始认为图形 API 不允许做我想做的事......

基本上，我想在群组墙上自动发布一条消息。我有一个网站，人们可以在上面发布他们的信息。这个社区还有一个 Facebook 群组，我的意思是自动在 Facebook 群组上发布来自网站的消息副本。当然，每次在网站上提交新消息时。

我知道应用程序和页面不能单独发布在群组墙上。所以，我考虑创建一个 Facebook 帐户，像机器人一样工作，在群组上发布我的消息。我想我必须为这个用户获取一个长期存在的访问令牌，并在它过期时手动更新它。我不想手动登录，但如果我必须不时更新我的​​令牌，这没什么大不了的。

这甚至可能吗？有更好的技巧吗？

我对 Facebook API 有点困惑，对于这个问题我很抱歉。更多是因为 fb API 的变化......现在很多通过网络的答案都被弃用了。我正在寻找的是能够开发我的应用程序的开始 - 一个想法。

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T15:36:21.237

是的，这真的很简单：

首先，您需要`access_token`n 获得`offline_access`许可（这样可以持续 2 个月）

然后，将此 access_token 存储在某处并执行以下操作：

**发布到群墙：**

```
$fbk = new Facebook(...);
$bfk->setAccessToken($yourBotAccessToken);
$postId = $fbk->api("/$fbGroupId/feed/",'post',$message); 
```

您甚至可以对第一个帖子进行回复：

```
$fbk->api('/'.$postid.'/comments/','post',$reply); 
```

# mysql - 我们选择数据库时的 UUID - 性能测试

> ID：15878909
> 
> 赞同：0
> 
> 时间：2013-04-08T12:21:48.630
> 
> 标签：mysql, sql, uuid

我有主键 UUID（在数字中，而不是作为字符串）。字符串非常慢。

当我编写 SQL SELECT 时，标准整数主键是否比 UUID 快得多？你有这种口味吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:55:38.327

原则上是的，整数键总是更好，因为相等或不等的比较可以用一条机器指令完成。但是，对于字符串字段，如果相等是唯一相关的操作，则可以使用哈希表索引（这也应该很快）。我还没有用 mysql 的哈希表探索这个选项，看看。

# jquery - 当一些在 Jquery 中是可选的时，通过许多字段进行过滤

> ID：15878914
> 
> 赞同：0
> 
> 时间：2013-04-08T12:21:59.213
> 
> 标签：jquery

我想按 3 个字段过滤我的表，但是这三个字段都是可选的，我可以按一个字段或两个或三个字段进行搜索。至少应设置一个字段。

这是我所达到的，此代码对一个字段非常有效，如果我以这种方式添加其他字段，则应设置它们。我该如何介绍可选性？

```
 $('#submitButton').click(function() {
    var quantity = $("[name='quantity']").val();
    var category = $('select.categorylist option:selected').val();
    var brand = $("[name='brand']").val();

     $("table tbody tr").hide();

    $("table tbody tr").each(function()
        {
            if ($(this).find("td:eq(3):contains('" + quantity + "')").html() != null)
                {
                    $(this).show();
                }
         });
    return false ; 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:53:03.747

您可以使用`filter`这样的功能：

```
$('#submitButton').click(function() {

    var quantity = $("[name='quantity']").val(),
        category = $('select.categorylist option:selected').val(),
        brand = $("[name='brand']").val();

    $("table tbody tr:not(.header, .filters)").hide().filter(function() {
        var q = quantity ? this.cells[0].innerHTML === quantity : true,
            c = category ? this.cells[1].innerHTML === category : true,
            b = brand ? this.cells[2].innerHTML === brand : true;
        return q && c && b;
    }).show();

    return false;
}); 
```

[http://jsfiddle.net/v4HYP/](http://jsfiddle.net/v4HYP/)

因此，仅当每列的值与相应的过滤器匹配时才会显示行。

# ios - CGAffineTransformMakeRotation 移动 UILabel

> ID：15878917
> 
> 赞同：1
> 
> 时间：2013-04-08T12:22:09.370
> 
> 标签：ios, objective-c

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

我有一个自定义`UIView`（带有自定义 xib）和四个`UILabel`，我想使用以下代码将它们旋转 90 度：

```
- (void)layoutSubviews
{
    [self rotateToLandscape];
}

- (void)rotateToLandscape
{
    NSLog(@"Label 1: %@", NSStringFromCGRect(self.label1.frame));
    NSLog(@"Label 2: %@", NSStringFromCGRect(self.label2.frame));
    NSLog(@"Label 3: %@", NSStringFromCGRect(self.label3.frame));
    NSLog(@"Label 4: %@", NSStringFromCGRect(self.label4.frame));

    self.label1.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 1: %@", NSStringFromCGRect(self.label1.frame));
    self.label2.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 2: %@", NSStringFromCGRect(self.label2.frame));
    self.label3.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 3: %@", NSStringFromCGRect(self.label3.frame));
    self.label4.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 4: %@", NSStringFromCGRect(self.label4.frame));
} 
```

但是，我不知道为什么，都占据着相同的位置。

这是我得到的日志：

```
Label 1: {{15, 0}, {71, 21}}
Label 2: {{15, 29}, {71, 21}}
Label 3: {{15, 58}, {71, 21}}
Label 4: {{15, 78}, {71, 21}}
Label 1: {{40, -25}, {21, 71}}
Label 2: {{40, 4}, {21, 71}}
Label 3: {{40, 33}, {21, 71}}
Label 4: {{40, 53}, {21, 71}} 
```

我读到我必须`UILabel`从它的中心（或从它的左上角）旋转它，但我不知道该怎么做。

这就是我得到的：

![在此处输入图像描述](https://i.stack.imgur.com/FMpXe.png)

而且，如果我显示要记录的中心：

```
- (void)rotateToLandscape
{
    NSLog(@"Label 1: %@", NSStringFromCGPoint(self.label1.center));
    NSLog(@"Label 2: %@", NSStringFromCGPoint(self.label2.center));
    NSLog(@"Label 3: %@", NSStringFromCGPoint(self.label3.center));
    NSLog(@"Label 4: %@", NSStringFromCGPoint(self.label4.center));

    self.label1.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 1: %@", NSStringFromCGPoint(self.label1.center));
    self.label2.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 2: %@", NSStringFromCGPoint(self.label2.center));
    self.label3.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 3: %@", NSStringFromCGPoint(self.label3.center));
    self.label4.transform = CGAffineTransformMakeRotation(M_PI/2);
    NSLog(@"Label 4: %@", NSStringFromCGPoint(self.label4.center));
} 
```

我得到这个日志：

```
Label 1: {50.5, 10.5}
Label 2: {50.5, 39.5}
Label 3: {50.5, 68.5}
Label 4: {50.5, 88.5}
Label 1: {50.5, 10.5}
Label 2: {50.5, 39.5}
Label 3: {50.5, 68.5}
Label 4: {50.5, 88.5} 
```

无旋转：

![在此处输入图像描述](https://i.stack.imgur.com/f9qbS.png)

这些标签在里面`UIView`，我想我必须旋转那个父视图，而不是旋转每个`UILabel`.

**有什么建议吗？`UILabel`旋转后我必须移动每个吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:29:33.150

您应该尝试查看该`frame`属性的文档。

> **警告：**如果该`transform`属性不是恒等变换，则该属性的值未定义，因此应被忽略。

这意味着您在应用旋转变换后打印的帧值可以是任何值。不要依赖那个值。`center`如果您想知道标签的位置，可以查看该属性。

默认情况下，所有视图*都*围绕中心旋转。[您使用锚点](http://blog.ideveloper.tv/understanding-the-anchor-point/)更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:28:01.743

我的解决方案：

而不是旋转每个`UILabel`我必须旋转父`UIView`：

```
- (void)rotateToLandscape
{
    self.transform = CGAffineTransformMakeRotation(M_PI/2);
} 
```

# sql - 子表包含零行时的 SQL SELECT

> ID：15878925
> 
> 赞同：2
> 
> 时间：2013-04-08T09:30:57.913
> 
> 标签：sql, sql-server, select, sql-server-2008-r2

假设我有两张桌子：

```
Table A
employeeID (int)
employeeName (varchar)
employeeDOB (varchar)

Table B
employeeID (int)
holidaysUsed (int) 
```

表 B 通过 与表 A 相关`employeeID`。表 B 可以有零或多行链接到单个员工 ID。我想对表 A 执行 SELECT，但仅在表 B 中没有相应记录时才检索表 A 中的行。

我对此有一些想法，但我想确保我使用的是最佳查询。任何帮助将非常感激。

**附加信息**

数据库平台：SQL Server 2008 R2

典型返回的数据集大小 1000 条记录平均。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T09:41:23.503

`SELECT * FROM A WHERE employeeID NOT IN (SELECT employeeID FROM B);`

# android - 如何获取apk文件

> ID：15878927
> 
> 赞同：-4
> 
> 时间：2013-04-08T12:22:37.713
> 
> 标签：android, apk, google-play

我需要一个 .apk 文件： https: [//play.google.com/store/apps](https://play.google.com/store/apps)它是一个免费版本，我需要将其插入模拟器，但如果您有方便的方法来获取它，则需要根文件。

请指导如何获取 .apk 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:23.417

您将无法从 Google Play 商店中的应用获取 .apk 文件。您只会获得应用程序本身。从应用程序中获取 .apk 的唯一方法是使用 Eclipse 或 NetBeans 设置开发环境。在这种情况下，您可以在项目目录的 bin 文件夹中找到 apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:32:55.210

如果您不想插入模拟器 Google Play 应用程序（在 PC 上运行 android 应用程序），只需使用[BlueStack](http://www.bluestacks.com/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T12:34:28.013

在您的设备上安装免费 APK `Google Play Store`，然后下载[**Airdroid**](https://play.google.com/store/apps/details?id=com.sand.airdroid) ，`Google Play Store`然后按照 Airdroid 中提供的步骤将您的设备连接到您的 PC，然后单击`Apps`它将显示已安装应用程序的列表，然后您可以单击下载以获取`APK`文件安装的应用程序。

# angularjs - 使用 ngResource 时的空视图

> ID：15878928
> 
> 赞同：5
> 
> 时间：2013-04-08T12:22:38.920
> 
> 标签：angularjs

我创建了这样的工厂：

```
angular.module('todoApp', ['ngResource']).factory('taskService', ['constantsService', function($resource, constantsService){
var serverUrl = constantsService.server_url;
return {
    add: function(task){ $resource(serverUrl + '/api/task/', {task: task}, {'query':  {method:'POST'}});}
}
}]); 
```

当我将 ngResource 添加到我的模块时，我得到一个空白的 html 元素而不是我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:40:32.380

我在创建它时将 ngResource 添加到我的模块中，而不是在工厂中，它可以工作。

# javascript - 如何切换/折叠 javascript 元素（我想默认折叠 html）

> ID：15878930
> 
> 赞同：2
> 
> 时间：2013-04-08T12:22:56.667
> 
> 标签：javascript, jquery, html, css

嗨，我需要我的代码帮助才能使下面的 html 折叠，因为它目前没有折叠

这是javascript函数代码

```
function(event, ui) {
    html='';
    var show = "Yes";
    html += "<h5 id='collapsible'>"+ show +"</h5>";
};

$('#history').html(html); 
```

这是在 html 页面上显示 Yes 的 html 文本代码

```
<div id="history"></div> 
```

请帮我切换/折叠`<div id="history"></div>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:50:34.800

如果您已经在使用 jQuery，您可以简单地使用`toggle()`：

```
$("#history").toggle(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T12:29:53.403

您可以为此使用javascript方法：

```
function toggle() {
    var target = document.getElementById("history");
    if(target.style.display == 'block'){
        target.style.display = 'none';
    }
    else {
        target.style.display = 'block';
    } 
```

要默认折叠 HTML，请设置属性：

```
<div id="history" style="display:none;"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:00:14.373

Javascript：

```
$('#collapseHistory').on('click', function(){
      $("#history").toggle();
}); 
```

HTML：

```
<div id="history" style="display: none;"></div>
<div id="collapseHistory">Show/Hide</div> 
```

这应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:43:28.170

**jQuery版本**：

[http://www.codepen.io/anon/pen/xBdkl](http://www.codepen.io/anon/pen/xBdkl)

```
<div id="temp" onClick="javascript:func()">Show/Hide</div>
<p/>
<div id="history"></div>
<script>
var html='';
 var show = "Yes";
 html += "<h5 id='collapsible'>"+ show +"</h5>";
  $('#history').html(html);

var func = function(){
  if($("#history").is(":visible")){
      $('#history').hide();
  }else{
  $('#history').show();
 }
}
</script> 
```

# spring-mvc - SpringMVC 3 405 - 不支持请求方法“POST”

> ID：15878935
> 
> 赞同：2
> 
> 时间：2013-04-08T12:23:07.107
> 
> 标签：spring-mvc, sitemesh

**控制器**

```
@Controller
public class Tester {
    @RequestMapping(value="testPost", method = RequestMethod.POST)
    public ModelAndView testPost(){
      ModelAndView _mv = new ModelAndView();
      _mv.setViewName("shared/post");
      return _mv;
    }
} 
```

**HTML**

```
<form action="testPost" method="post"> 
    <input type="submit" value="Submit" />
</form> 
```

**Web.xml**

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>iCubeHRS</display-name>

   <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

   <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>        
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

   <filter>
        <filter-name>site_mesh</filter-name>
        <filter-class>org.sitemesh.config.ConfigurableSiteMeshFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>site_mesh</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

   <session-config>
        <session-timeout>20</session-timeout>
    </session-config>

</web-app> 
```

**问题**

一旦将“method”属性设置为“POST”，当你点击提交按钮时，它总是变成405 - 不支持请求方法'POST'，如果从控制器中删除方法属性，以及从HTML中删除方法=“post”，它有效，有人知道如何解决这个问题吗？

**更新**

我想我找到了问题，这个问题是由 sitemesh3 引起的，在我从 web.xml 中删除了 sitemesh3 功能后，POST 工作正常，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T21:30:02.810

我不确定这是否与您的设置有关，但我遇到了同样的错误（不支持 405-post）

最初我认为它与站点网格有关。但是，当我在我的情况下对其进行更多研究时，这是因为我使用`<mvc:resources /`> 来提供到装饰器的静态映射。

这是`<mvc:resources />`因为 sitemesh 试图使用 Post 请求访问它，所以不接受装饰器文件的 post 请求。

我更改了装饰器文件的映射以确保它是静态的并响应 POST 和 GET 请求。更多细节在这里[Spring：不接受 mvc:resources 下的 POST 请求？如何解决这个问题](https://stackoverflow.com/questions/15588001/spring-not-accept-post-request-under-mvcresources-how-to-fix-that)

我使用的代码是

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
 <property name="urlMap">
     <map>
          <entry key="/DecTest/**" value="myResourceHandler" />
     </map>
 </property>
 <property name="order" value="100000" />       
</bean>

<bean id="myResourceHandler" name="myResourceHandler"
      class="org.springframework.web.servlet.resource.ResourceHttpRequestHandler">
      <property name="locations" value="/DecTest/" />
      <property name="supportedMethods">
         <list>
            <value>GET</value>
            <value>HEAD</value>
            <value>POST</value>
         </list>
     </property>
     <!-- cacheSeconds: maybe you should set it to zero because of the posts-->
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:03:48.543

好吧，您发现问题出在sitemesh上。[此链接指向](https://code.google.com/p/petclinicplus/)将 springMVC 与 sitemesh 集成的项目

# python - 避免在python中出现多个相似的行

> ID：15878937
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:23:15.887
> 
> 标签：python, coding-style

我的问题是关于编码风格：当我想将一个过程应用于多个变量时，例如：

```
from pylab import vstack     # the function to apply to many variables
v1 = range(5)      # some dummy variables
v2 = range(9)
...
v20 = range(8)

# now, I want to apply a function to all variables that changes them!
v1 = vstack(v1)   # I really do not need the "old" v1 anymore
v2 = vstack(v2)
...
v20 = vstack(v20) 
```

这是 20 行几乎相同的代码。有没有办法`vx = vstack(vx)`用更少的行编写转换（）？

将它们放入可迭代中不起作用：

```
all_v = [v1, v2, v3, .... , v20]
for v in all_v:
    v = vstack(v)

type (v1) # -> v1: <type: list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:27:49.173

你真的需要它们在不同的变量中开始吗？这通常是一种代码气味。如果名称很重要，我会将它们保存在一个列表中，或者一个字典中，并更新：

```
my_data = {}
my_data['v1'] = range(5)
my_data['v2'] = range(9)
...etc...

my_data = {k: vstack(v) for k, v in my_data.iteritems()} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:28:02.337

```
from pylab import vstack
parameters = (5, 9, ..., 8)

v = [vstack(range(p)) for p in parameters] 
```

这将在`parameters`元组上运行列表推导，其中包含`range`函数的参数。对于该元组中的每个参数，`range`函数的结果将传递给`vstack`函数。结果收集在一个列表中。

所以`v[0]`对应于参数值`parameters[0]`等的结果。

在您的代码中它不起作用，因为您`v`在循环中本地覆盖了变量。这不会更改原始列表中的项目。如果您想从这些结果中创建一个（新）列表，您可以使用`list.append`：

```
all_v = [v1, v2, v3, .... , v20]
new_v = []
for v in all_v:
    new_v.append(vstack(v)) 
```

# ios - 如何根据 UITableView 中的选定值重定向页面？

> ID：15878940
> 
> 赞同：-3
> 
> 时间：2013-04-08T12:23:18.950
> 
> 标签：ios, objective-c

在我的 UITableView 中，我有（Google、Facebook、Yahoo），并且根据选择，它应该被重定向到该页面

我需要写`didSelectRowAtIndexPath`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:27:34.507

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[[statuses objectAtIndex:indexPath.row] valueForKey:@"LoginUrl"]]];
} 
```

**如果你的钥匙是** `LoginUrl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:29:48.837

使用以下代码：将您的选择代码放在下面或通过自定义初始化将选定的单个值传递给控制器​​并根据发送的值进行处理

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        [self moveToNewViewControllerForRow:(indexPath.row)];
    }

    -(void)moveToNewViewControllerForRow:(NSInteger)forTheRow{

        switch (forTheRow) {
            case 0:
            {
            }

                break;
            case 1 :
            {
            }
                break;
            case 2 :
            {
            }
                break;   
        }

    } 
```

# openssl - BIO_do_handshake() 总是返回 0

> ID：15878943
> 
> 赞同：3
> 
> 时间：2013-04-08T12:23:33.860
> 
> 标签：openssl, sslhandshakeexception

```
 int rtn =  BIO_do_handshake(sbio);

printf("\n.. returns  %d   .. \n",rtn);

if( rtn <= 0)
{
    fprintf(stderr, "Error in SSL handshake\n");
    ERR_print_errors_fp(stderr);

} 
```

[我从这里](http://linux.die.net/man/3/bio_new_ssl_connect)写这段代码

但是 BIO_do_handshake() 总是返回 0 为什么？

证书很好！！

有任何想法吗 ？？

请帮我..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T21:50:45.700

我们确实需要看到更多的代码，但这里是我`BIO_new_ssl_connect`和朋友们的使用方式。你打电话了`BIO_new_ssl_connect`吗？你打电话了`BIO_set_conn_hostname`吗？你打电话了`BIO_do_connconnect`吗？

下面的代码连接到 www.random.org 并将结果打印到屏幕上。还有一些你必须做的其他检查，但它们超出了热使用`BIO_new_ssl_connect`和朋友的范围。

此外，生物读取循环不可靠，因此不要在生产代码中使用它（示例用于其他目的）。最后，您可以`ERR_print_errors_fp`用于打印错误。在生产中，我做其他事情`ERR_print_errors_fp`通常是不够的（因此是简单的原因`fprintf`）。

* * *

```
long ret = 1;
unsigned long ssl_err = 0;

SSL_CTX* ctx = NULL;
BIO *bio = NULL, *out = NULL;
SSL *ssl = NULL;

/* Cipher suites, https://www.openssl.org/docs/apps/ciphers.html */
const char* const PREFERRED_CIPHERS = "kEECDH:kEDH:kRSA:AESGCM:AES256:AES128:3DES:SHA256:SHA84:SHA1:!aNULL:!eNULL:!EXP:!LOW:!MEDIUM!MD5";

do {
    /* https://www.openssl.org/docs/ssl/SSL_library_init.html */
    ret = SSL_library_init();
    ssl_err = ERR_get_error();

    ASSERT(ret == 1);
    if(!(ret == 1))
    {
        fprintf(stderr, "SSL_library_init: %lu (0x%lx)\n", ssl_err , ssl_err);
        break; /* failed */
    }

    /* https://www.openssl.org/docs/ssl/SSL_CTX_new.html */
    const SSL_METHOD* method = SSLv23_method();
    ssl_err = ERR_get_error();

    ASSERT(NULL != method);
    if(!(NULL != method))
    {
        fprintf(stderr, "SSLv23_method failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break; /* failed */
    }

    /* http://www.openssl.org/docs/ssl/ctx_new.html */
    ctx = SSL_CTX_new(method);
    ssl_err = ERR_get_error();

    ASSERT(ctx != NULL);
    if(!(ctx != NULL))
    {
        fprintf(stderr, "SSL_CTX_new failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break; /* failed */
    }

    /* https://www.openssl.org/docs/ssl/ctx_set_verify.html */
    SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, bio_pin_pubkey_callback);
    /* Cannot fail ??? */

    /* https://www.openssl.org/docs/ssl/ctx_set_verify.html */
    SSL_CTX_set_verify_depth(ctx, 5);
    /* Cannot fail ??? */

    /* Remove most egregious. Because SSLv2 and SSLv3 have been removed,  */
    /* a TLSv1.0 handshake is used. The client accepts TLSv1.0 and above. */
    const long flags = SSL_OP_ALL | SSL_OP_NO_SSLv2 | SSL_OP_NO_SSLv3 | SSL_OP_NO_COMPRESSION;
    long old_opts = SSL_CTX_set_options(ctx, flags);
    UNUSED(old_opts);

    /* http://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html */
    ret = SSL_CTX_load_verify_locations(ctx, "random-org-chain.pem", NULL);
    ssl_err = ERR_get_error();

    ASSERT(1 == ret);
    if(!(1 == ret))
    {
        /* Non-fatal, but something else will probably break later */
        fprintf(stderr, "SSL_CTX_load_verify_locations failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        /* break; */
    }

    /* https://www.openssl.org/docs/crypto/BIO_f_ssl.html */
    bio = BIO_new_ssl_connect(ctx);
    ssl_err = ERR_get_error();

    ASSERT(bio != NULL);
    if(!(bio != NULL))
    {
        fprintf(stderr, "BIO_new_ssl_connect failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break; /* failed */
    }

    /* https://www.openssl.org/docs/crypto/BIO_f_ssl.html */
    /* This copies an internal pointer. No need to free.  */
    BIO_get_ssl(bio, &ssl);
    ssl_err = ERR_get_error();

    ASSERT(ssl != NULL);
    if(!(ssl != NULL))
    {
        fprintf(stderr, "BIO_get_ssl failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break; /* failed */
    }

    /* https://www.openssl.org/docs/ssl/ssl.html#DEALING_WITH_PROTOCOL_CONTEXTS */
    /* https://www.openssl.org/docs/ssl/SSL_CTX_set_cipher_list.html            */
    ret = SSL_set_cipher_list(ssl, PREFERRED_CIPHERS);
    ssl_err = ERR_get_error();

    ASSERT(1 == ret);
    if(!(1 == ret))
    {
        fprintf(stderr, "SSL_set_cipher_list failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break;
    }

    /* https://www.openssl.org/docs/crypto/BIO_s_connect.html */
    ret = BIO_set_conn_hostname(bio, HOST_NAME ":" HOST_PORT);
    ssl_err = ERR_get_error();

    ASSERT(1 == ret);
    if(!(1 == ret))
    {
        fprintf(stderr, "BIO_set_conn_hostname failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break;
    }

    /* https://www.openssl.org/docs/crypto/BIO_s_file.html */
    out = BIO_new_fp(stdout, BIO_NOCLOSE);
    ssl_err = ERR_get_error();

    ASSERT(NULL != out);
    if(!(NULL != out))
    {
        fprintf(stderr, "BIO_new_fp failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break;
    }

    /* https://www.openssl.org/docs/crypto/BIO_s_connect.html */
    ret = BIO_do_connect(bio);
    ssl_err = ERR_get_error();

    ASSERT(1 == ret);
    if(!(1 == ret))
    {
        fprintf(stderr, "BIO_do_connect failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break;
    }

    /* https://www.openssl.org/docs/crypto/BIO_f_ssl.html */
    ret = BIO_do_handshake(bio);
    ssl_err = ERR_get_error();

    ASSERT(1 == ret);
    if(!(1 == ret))
    {
        fprintf(stderr, "BIO_do_handshake failed: %lu (0x%lx)\n", ssl_err , ssl_err);
        break;
    }

    /* Could examine ssl here to get connection info */
    BIO_write(out, "\n", 1);
    BIO_puts(bio, "GET / HTTP/1.0\r\nConnection: close\r\n\r\n");
BIO_READ_TOP:
    {
        char buff[1536]; int len = 0;

        /* https://www.openssl.org/docs/crypto/BIO_read.html */
        len = BIO_read(bio, buff, sizeof(buff));

        if(len > 0)
            BIO_write(out, buff, len);

        if(BIO_should_retry(bio)) goto BIO_READ_TOP;
    }

    func_ret = SUCCESS;

} while (0);

if(out)
    BIO_free(out);

if(bio != NULL)
    BIO_free_all(bio);

if(NULL != ctx)
    SSL_CTX_free(ctx); 
```

# c# - 会话变量 + WebMethod 变量值未更新

> ID：15878945
> 
> 赞同：2
> 
> 时间：2013-04-08T12:23:41.883
> 
> 标签：c#, asp.net, session, session-variables

我有一个带有下拉列表的网络应用程序。选择新索引时，我必须将值存储到会话变量中，该变量是在 Session_Start 事件上创建的。

```
protected void Session_Start(object sender, EventArgs e)
{
    Session.Add("testValue", "test");
} 
```

在 selectedindex 更改事件上，我正在设置这样的新值

```
Session["testValue"] = DropDownList.SelectedItem.Text; 
```

我有一个 Web 服务，我可以在其中检索会话变量的值，如下所示：

```
[WebMethod(EnableSession = true)]
public string getValue()
{

    var testVal = Session["testValue"].ToString();

    return testVal.ToString();
} 
```

我从控制台应用程序连接到 Web 服务并检索返回的值`getValue()`，但始终返回初始值。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:30:05.360

问题是因为当控制台应用程序运行时，似乎创建了一个新会话。使用 Application.Set 和 Application.Get 使用应用程序状态解决了这个问题。希望当系统被多个用户使用时我不会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:28:52.473

这里的值没有改变，你没有改变值。所以没有预期

```
public string getValue()
{
    var testVal = Session["testValue"].ToString();
    return testVal.ToString();
} 
```

错误可能在下拉列表中

```
protected void Page_Load(object sender, EventArgs e)
{
if (!Page.IsPostBack)
{
  Session["testValue] = dropdownlist1.SelectedItem.text;
}
} 
```

和，

```
protected void dropdownlist1_SelectedIndexChanged(object sender, EventArgs e)
{
Session["testvalue"] = dropdownlist1.SelectedItem.text;
} 
```

也试试

```
System.Web.HttpContext.Current.Session["testvalue"] 
```

在这两个部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:32:50.330

检查下拉列表中项目的值是否不同。这对于触发所选的索引更改事件至关重要。

# html - CSS DIV AUTO 填充高度和宽度（溢出为滚动条）

> ID：15878947
> 
> 赞同：1
> 
> 时间：2013-04-08T12:23:59.783
> 
> 标签：html, fill

任何人都可以帮助我吗？

我尝试了很多天，很多来源。但是，我可以找到答案。

*   我需要通过 CSS 创建 4 DIV。

*   标题 div 是 100px，并且总是在 TOP。

*   页脚 div 为 100px，并且始终在 BOTTOM 中（另外，如果客户端浏览器调整大小，它始终在底部，不更改布局）

*   左 div 宽度为 200px（高度：自动填充）

*   MAIN div 是自动填充高度和宽度（溢出是滚动条）

请帮我编写完整的代码 HTML、CSS 或 Javascript。因为，我不擅长 CSS...

请看这张照片： ![例子](https://i.imgur.com/y6yPZdH.jpg)

这是 html 的示例，在 FF 中可以，但在 IE 中不行

```
<html>
<body style="margin: 0; padding: 0;">
    <div style="position: absolute; background: #faa; height: 100px; top: 0px; width: 100%;">
        header
    </div>
    <div style="position: absolute; background: #afa; top: 100px; bottom: 100px; left: 0;
        width: 100px;">
        left
    </div>
    <div style="position: absolute; background: #afa; top: 100px; bottom: 100px; right: 0;
        width: 100px;">
        right
    </div>
    <div style="position: absolute; background: #faa; height: 100px; bottom: 0px; width: 100%;">
        footer
    </div>
    <div style="position: absolute; background: #aaf; bottom: 100px; left: 100px; top: 100px;
        right: 100px; overflow: auto;">
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p>
            <p>Aliquam tincidunt tempor
            velit quis volutpat. Nulla pharetra pulvinar arcu sed lacinia.</p>
            <p> Nulla ultrices aliquet
            sem, vitae commodo elit condimentum ut. Nulla consectetur facilisis nibh, et tempus
            purus pellentesque nec. Ut eu nibh ut arcu mattis luctus. </p>
            <p>Cras at interdum quam.
            Pellentesque imperdiet mi vitae felis sollicitudin iaculis. </p>
            <p>Maecenas accumsan tortor
            neque, at posuere felis. Quisque ultricies mi quis dolor pellentesque elementum.</p>
    </div>
</body>
</html> 
```

[演示](http://jsfiddle.net/GPhJU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:17:07.837

试试这个[http://jsfiddle.net/QXKtm/3/](http://jsfiddle.net/QXKtm/3/)

HTML

```
<header></header>
<div id="container">
    <section id="menu"></section>
    <section id="content"></section>
</div>
<footer></footer> 
```

CSS

```
html, body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

header, footer {
    width: 100%;
    height: 100px;
    position: fixed;
    background-color: red;
}

footer {
    bottom: 0;
}

header {
    top: 0;
}

#container {
    position: absolute;
    top: 100px;
    bottom: 100px;
    width: 100%;
}

#menu, #content {
    height: 100%;
    background-color: blue;

}

#menu {
    width: 200px;
    margin-left: 10px;
    float: left;
}

#content {
    margin: 0px 10px 0px 220px;
    width: auto;
} 
```

# javascript - 将图像附加到电子邮件

> ID：15878956
> 
> 赞同：2
> 
> 时间：2013-04-08T12:24:25.723
> 
> 标签：javascript, internet-explorer, activex, activexobject

我正在尝试将图像附加到 activex 电子邮件。我可以将此附件从 URL 添加为 www.examle.com/example.jpeg 但是我想添加从画布中获取的变量。你可以在下面看到我的代码。你能帮我把这张图片添加为附件吗？任何其他客户端方法都可以吗？谢谢你。

```
 var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");

 var objO = new ActiveXObject('Outlook.Application');     
 var objNS = objO.GetNameSpace('MAPI');     
 var mItm = objO.CreateItem(0);     
 mItm.Display(img);     
 mItm.To = "aaa@bbb.com";
 mItm.Subject = "email";
 mItm.Body = document.getElementById("listbox").value;
 mItm.Attachments.Add("img");
 mItm.GetInspector.WindowState = 2; 
```

# javascript - 如何使用不带双引号的 JSONparse

> ID：15878961
> 
> 赞同：0
> 
> 时间：2013-04-08T12:24:38.433
> 
> 标签：javascript, jquery

我有字符串`"field: 1, count: 22"` 如何解析对象？

评估不提供

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:36:14.050

如果那是您真正的问题，请使用未引用的键。以下代码可能有效（假设键并非每个都包含空格）

```
var x = "field: 1, count: 22";
JSON.parse("{"+x.replace(/([\S]+)\:/g,'"$1":')+"}"); 
```

但我认为你真的应该检查你的数据来自哪里，并尝试让该来源为你提供有效的 JSON，因为正如其他人所指出的那样，你提供的不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:40:27.140

你可以试试这个：

```
function getJSON(str){
      // get lines i.e. "field: 1"
      var lines = str.split(",");

      for (var i = lines.length - 1; i >= 0; i--) {
            // separate key from values. "[field, 1]"
            var keyValue = lines[i].split(": ");
            // add the quotes
            lines[i] = "\"" + keyValue[0] + "\": " + keyValue[1];
      }

      // replace single quotes with double quotes and join array with comma
      // parsing it to an JSON object
      return JSON.parse(("{" + lines.join(", ") + "}").replace(/'/g, "\""));
} 
```

但是@Forbesmyester 的解决方案非常好......无论如何希望它有所帮助......

# css - 如何对齐关于换行符的标签？

> ID：15878962
> 
> 赞同：0
> 
> 时间：2013-04-08T12:24:44.220
> 
> 标签：css, gwt

我正在创建一个左侧有一个图标的标签，已经可以正常工作：

```
<g:FlowPanel>
  <g:Image ... />
  <g:InlineLabel styleName="{style.label}" />
</g:FlowPanel> 
```

现在我想限制 的宽度`FlowPanel`，以便标签将自动换行以用于长文本。但是，损坏的文本将从图标下方开始。我想要的是用左边的填充开始文本，就像图标宽度一样。

例如，如果“x”是图标：

```
x my long
text

x my long
  text 
```

我正在寻找第二种风格。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:56:22.653

1.  给 float:left 给 img
2.  使用 (-) 减去左边距将图像图标向左移动
3.  为“FlowPanel”提供左填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:57:26.667

添加`float:left;`到 InlineLabel 和 Image 的 css 应该使标签文本保持为一个块而不是环绕图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:22:38.717

我会给面板容器左填充并将图像置于绝对定位。

# eclipse - Eclipse管理文件后缀列表

> ID：15878964
> 
> 赞同：0
> 
> 时间：2013-04-08T12:24:46.067
> 
> 标签：eclipse

我决定将我的一些 jsp 文件移动到具有特殊文件类型（名为***.part**）的单独文件中。现在我导入这些文件以像 jsp 一样进行处理，为它们着色并使编码更方便。我可以在`"preferences/web/jsp/Add this suffix"`. 一些可比较的注册文件类型可以在 eg`pref./web/html`或下找到`pref./web/css`。

但是我怎样才能再次删除这些类型呢？如何管理这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:57:34.253

我找到了上述问题的答案：

在 Eclipse 中：Preferences->General->Content-Types->Text->[Remove/Add file here]

# node.js - 枚举nodejs中的系统驱动器

> ID：15878969
> 
> 赞同：11
> 
> 时间：2013-04-08T12:25:18.067
> 
> 标签：node.js, windows

有没有办法检索计算机上所有逻辑驱动器的驱动器名称？

我查看了 fs api，但从那里我只能枚举给定目录的文件和目录。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-30T17:44:51.520

我不确定您所说的“驱动器名称”是什么意思。如果您指的是 形式的驱动器`\\.\PhysicalDriveN`，我遇到了同样的问题并实现了这个适用于所有主要操作系统的模块：

[https://github.com/resin-io/drivelist](https://github.com/resin-io/drivelist)

对于 Windows，您会获得以下信息：

```
[
    {
        device: '\\\\.\\PHYSICALDRIVE0',
        description: 'WDC WD10JPVX-75JC3T0',
        size: '1000 GB'
    },
    {
        device: '\\\\.\\PHYSICALDRIVE1',
        description: 'Generic STORAGE DEVICE USB Device',
        size: '15 GB'
    }
] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-13T15:34:28.257

如果你的目标是 Windows，你可以试试这个：

这个解决方案基于[这篇文章](https://stackoverflow.com/questions/12622758/list-partitions-in-nodejs)的想法。

我用承诺包装它。

```
var spawn = require("child_process").spawn

function listDrives(){
    const list  = spawn('cmd');

    return new Promise((resolve, reject) => {
        list.stdout.on('data', function (data) {
            // console.log('stdout: ' + String(data));
            const output =  String(data)
            const out = output.split("\r\n").map(e=>e.trim()).filter(e=>e!="")
            if (out[0]==="Name"){
                resolve(out.slice(1))
            }
            // console.log("stdoutput:", out)
        });

        list.stderr.on('data', function (data) {
            // console.log('stderr: ' + data);
        });

        list.on('exit', function (code) {
            console.log('child process exited with code ' + code);
            if (code !== 0){
                reject(code)
            }
        });

        list.stdin.write('wmic logicaldisk get name\n');
        list.stdin.end();
    })
}

listDrives().then((data) => console.log(data)) 
```

测试一下，你会看到如下结果：

```
["c:", "d:"] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-19T17:59:48.963

根据[Edwin Lee](https://stackoverflow.com/users/4824331/edwin-lee)的回答：

```
const child = require('child_process');

child.exec('wmic logicaldisk get name', (error, stdout) => {
    console.log(
        stdout.split('\r\r\n')
            .filter(value => /[A-Za-z]:/.test(value))
            .map(value => value.trim())
    );
}); 
```

输出：`['C:', 'D:']`等

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T13:58:53.397

使用[DiskPart](http://technet.microsoft.com/en-us/library/cc766465%28v=ws.10%29.aspx)命令怎么样？在命令行中运行是否会`diskpart list`为您提供所需的输出？如果是这样，您可以使用**child_process.exec在节点中执行此操作**

```
var exec = require('child_process').exec
var cmd = 'diskpart list'
exec(cmd, function(err, stdout, stderr) {
    if (err) {
        console.log('error running diskpart list command')
        console.log(err)
        return
    }
    console.log('stdout data')
    console.log(stdout)

    console.log('stderr data')
    console.log(stderr)
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-17T18:24:03.827

+1 @Bagherani 的降级建议！

我正在使用 Electron React Boilerplate v4.0 并且无法加载驱动列表。我降级到 drivelist@5.2.12，它可以满足我的需要。

# html - 使用 CSS 水平拉伸文本

> ID：15878971
> 
> 赞同：11
> 
> 时间：2013-04-08T12:25:26.427
> 
> 标签：html, css, text

我需要水平拉伸文本，但我唯一能找到的是[font-stretch](https://developer.mozilla.org/en-US/docs/CSS/font-stretch)，根据 w3schools 的说法，任何浏览器都不支持它。

有没有其他方法可以达到这种效果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T12:26:51.047

**是**的 - 您可以通过使用**[CSS 2D 变换](http://www.w3schools.com/css/css3_2dtransforms.asp)**来实现这一点。

这是一个有效的**[JSFiddle](http://jsfiddle.net/NTrqY/)**。

**请注意**，下面的小提琴/代码中的示例适用于 Chrome/Safari (WebKit)，但是，您可以通过使用 、 和等效的前缀/方法在所有主要浏览器中使用`-moz-`2D`-o-`转换`ms`！

**HTML：**

```
<span>Hello!</span> 
```

**CSS：**

```
span {    
  transform:scale(3,1); 
  -webkit-transform:scale(3,1);
  display:inline-block; 
} 
```

**支持：**

它在 Chrome、Firefox、IE9+ 和 Opera 浏览器中受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:26:18.033

你是这个意思吗？使用 CSS：

```
text-align: justify 
```

# google-maps-api-3 - 我在标记属性处未定义

> ID：15878974
> 
> 赞同：0
> 
> 时间：2013-04-08T12:25:37.453
> 
> 标签：google-maps-api-3, markerclusterer

我使用markerclustererplus，我想在集群点击时显示信息窗口。但我对集群中的所有标记都没有定义。我只是无法弄清楚为什么以及会发生什么。这是我的代码

```
<!DOCTYPE html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL & Google Maps Example</title>
    <style type="text/css">
      html, body, #map { margin: 0; padding: 0; height: 95% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn-history/r315/trunk/markerwithlabel/src/markerwithlabel_packed.js"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
    var oncekimarker=null;
    var customIcons = {
      satilik: {
        icon: 'images/pins/yellow.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      kiralik: {
        icon: 'images/pins/blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function initialize() {
        var markers = null;
        var mcmarkers = [];
        var globalMarker = [];

      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(39, 35),
        zoom: 6,
        mapTypeId: 'roadmap'
      });

      var infoWindow = new google.maps.InfoWindow;
      var infowindow = new google.maps.InfoWindow();

      // Change this depending on the name of your PHP file
      downloadUrl("phpsqlajax_genxml.php", function(data) {
        var xml = data.responseXML;
        markers = xml.documentElement.getElementsByTagName("marker");

        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"))
          var point = new google.maps.LatLng(lat, lng);
          var html = "something";
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          mcmarkers.push(marker);

          bindInfoWindow(marker, map, infoWindow, html);
        }

        var mcOptions = {
            gridSize: 30, 
            maxZoom: 13,
            zoomOnClick: false, 
            averageCenter: true
        };

          var mc = new MarkerClusterer(map, mcmarkers, mcOptions);
          google.maps.event.addListener(mc, 'clusterclick', function(cluster) {
            var content = '';

            // Convert lat/long from cluster object to a usable MVCObject
            var info = new google.maps.MVCObject;
            info.set('position', cluster.center_);

            //Get markers
            var yazmarkers = cluster.getMarkers();

            var titles = "";
            //Get all the titles
            for(var i = 0; i < yazmarkers.length; i++) {
                titles += yazmarkers[i].name + "\n";
            }
            infowindow.close();
            infowindow.setContent(titles); //set infowindow content to titles
            infowindow.open(map, info);

            google.maps.event.addListener(map, 'zoom_changed', function() { infowindow.close() });

            });
      });
    }
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        //infoWindow.open(map, marker);

        if (oncekimarker) oncekimarker.setAnimation(null);
        marker.setAnimation(google.maps.Animation.BOUNCE);
        oncekimarker = marker;
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
    google.maps.event.addDomListener(window, 'load', initialize);

  </script>

  </head>

  <body>
    </div>
    <div id="map" style="width: 80%"></div>
  </body>

</html> 
```

任何帮助都将不胜感激。感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:55:58.097

您的标记没有“名称”属性。

```
titles += yazmarkers[i].name + "\n"; 
```

您可以通过像这样创建它们来添加一个

```
 var marker = new google.maps.Marker({
        name: name,
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      }); 
```

警告：虽然目前这适用于 API，但它没有记录在案的行为，您可能希望改用“title”属性，该属性已记录在案并具有在鼠标悬停时作为工具提示出现在标记上的好处。

[工作示例](http://www.geocodezip.com/v3_SO_MarkerClustererPlus.html)

# python - 而不是继续，重新运行功能

> ID：15878977
> 
> 赞同：0
> 
> 时间：2013-04-08T12:25:54.310
> 
> 标签：python, for-loop

我想知道如何在 Python 中执行以下操作。如果我有一个带有`for`循环的函数，则可以使用 if 语句跳过某些数字。

这是从 activestate.com 获得的 fisher-yates d 的实现。

```
import random

def shuffle(ary):
    a=len(ary)
    b=a-1
    for d in range(b,0,-1):
      e=random.randint(0,d)
      if e == d:
            continue
      ary[d],ary[e]=ary[e],ary[d]
    return ary 
```

现在`continue`只需转到 d 的下一个值。我怎样才能不做`continue`，用原始参数重新运行函数`ary`？

请注意，该函数只是一些示例代码，我很好奇如何做到这一点。此外，如果列表很大，则可能无法维护数组的副本，因此这不是真正的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:32:46.020

这是一种常见的递归模式。但是，您的情况与平时略有不同，因为在这里您需要*复制*输入列表，以便在改组失败时进行递归时使用。：

```
import random

def shuffle(ary):
    initial = ary[:]
    a=len(ary)
    b=a-1
    for d in range(b,0,-1):
      e=random.randint(0,d)
      if e == d:
            return shuffle(initial)
      ary[d],ary[e]=ary[e],ary[d]
    return ary

ary = [1,2,3,4,5,6]
print shuffle(ary) 
```

另请注意，[维基百科给出了非常相似的 Sattolo 算法的（非递归）python 实现。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

```
from random import randrange

def sattoloCycle(items):
    i = len(items)
    while i > 1:
        i = i - 1
        j = randrange(i)  # 0 <= j <= i-1
        items[j], items[i] = items[i], items[j]
    return 
```

如果我正确阅读了这篇文章，要重新获得 Fisher-Yates，您只需做一个简单的更改：

```
from random import randrange

def FisherYates(items):
    i = len(items)
    while i > 1:
        i = i - 1
        j = randrange(i+1)  # 0 <= j <= i
        items[j], items[i] = items[i], items[j]
    return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:32:27.000

```
def function(list):
    len(list)-1
    for i in range(len(list)-1,0,-1):
      e= randint(0,i)
      while e > i:
            e= randint(0,i)
      "do something to the list"
    return array 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:34:29.590

您可以将参数复制到临时变量。然后使用 temp 变量调用函数并使用 return；

```
def function(list):
listCopy = list;
    len(list)-1
    for i in range(len(list)-1,0,-1):
      e= randint(0,i)
      if e > i:
            return function(listCopy)
      else
            "do something with the list"
    return array 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:38:41.687

```
def function(list):
    for i in (a for a in range(len(list)-1,0,-1) if randint(0,a) > a):
        #do something with list
    #do something else with remainder. 
```

不完全是你要求的。只是想提醒你这种可能性。

# php - 如何在zend framework 2中自定义表单中的验证消息？

> ID：15878984
> 
> 赞同：2
> 
> 时间：2013-04-08T12:26:17.760
> 
> 标签：php, zend-framework2

我刚刚启动了zend framework 2。我只想知道如何为需要ON（true）的元素自定义表单消息。现在它显示**“请填写此字段”**（如果特定文本框为空并且我单击提交按钮）。

我只想更改此消息。最初我以为这条消息来自图书馆

但是我错了。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T12:42:54.860

请提供您创建表单的方法。最终，您应该简单地覆盖验证器的消息。每个验证器都可以选择覆盖消息。基本语法如下：

```
// This assumes to be INSIDE a Validator
'options' => array(
    'messages' => array(
         \Zend\Validator\NotEmpty::IS_EMPTY => "Dude, it's empty. It shouldn't be!"
     )
) 
```

如果没有给出输入，该示例将覆盖 NotEmpty 验证器消息。此外，您应该知道，如果您使用 HTML5 属性，`required`那么某些浏览器会在您的表单中添加预提交验证，并且浏览器显示的错误消息无法更改。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-08T12:31:11.653

$username = $this->createElement('text', 'username');

```
 $username->addErrorMessage('The username is required!'); 
```

# mysql - 在带有重音符号的批处理文件上执行 sql 脚本

> ID：15878988
> 
> 赞同：1
> 
> 时间：2013-04-08T12:26:19.853
> 
> 标签：mysql, batch-file, diacritics

当我在批处理文件中执行一些 sql 脚本时，我遇到了一些**重音问题（sql 脚本使用表和一些插入创建数据库）**

那是执行脚本文件的批处理文件：

```
@echo off

"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" -u root -proot < dbase.sql; 
```

就是这样的问题（他替换了重音）：

```
Ajout chÃ¨que entrant

Modifier date encaissement (ChÃ¨ques Entrants) 
```

而不是那个：

```
Ajout chèque entrant

Modifier date encaissement (Chèques Entrants) 
```

这就是我为插入所做的：

```
-- Insertion des Roles

insert into dbcheques.role(idRole,LibelleRole) values(1,'Ajout chèque entrant');

insert into dbcheques.role(idRole,LibelleRole) values(2,'Chèques entrants à encaisser aujourd\'hui');

insert into dbcheques.role(idRole,LibelleRole) values(3,'Chèques entrants encaissables');

insert into dbcheques.role(idRole,LibelleRole) values(4,'Modifier date encaissement (Chèques Entrants)');

insert into dbcheques.role(idRole,LibelleRole) values(5,'Rechercher un chèque entrant');

insert into dbcheques.role(idRole,LibelleRole) values(6,'Ajout chèque sortant');

insert into dbcheques.role(idRole,LibelleRole) values(7,'Chèques sortants à encaisser aujourd\'hui');

insert into dbcheques.role(idRole,LibelleRole) values(8,'Chèques sortants encaissables');

insert into dbcheques.role(idRole,LibelleRole) values(9,'Modifier date encaissement (Chèques Sortants)');

insert into dbcheques.role(idRole,LibelleRole) values(10,'Rechercher un chèque sortant');

insert into dbcheques.role(idRole,LibelleRole) values(11,'Ajout utilisateur');

insert into dbcheques.role(idRole,LibelleRole) values(12,'Rechercher utilisateur');

insert into dbcheques.role(idRole,LibelleRole) values(13,'Liste des utilisateurs');

insert into dbcheques.role(idRole,LibelleRole) values(14,'Affecter/Retirer un rôle');

insert into dbcheques.role(idRole,LibelleRole) values(15,'Modifier mon profil'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:33:30.317

添加`--default-character-set`选项。

```
"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" --default-character-set=utf8 -u root -proot < dbase.sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:10:12.680

由于您看到`Ã¨`而不是`è`我认为您的`dbase.sql`文件被编码为 UTF-8，但您没有告诉 MySQL。如果您直接运行命令而不是通过`.bat`文件运行，您可能会得到相同的结果。

最直接的方法是将其添加到文件顶部`dbase.sql`：

```
SET NAMES utf8; 
```

为此，您需要`dbase.sql`在文本编辑器中打开（我想您已经有一个，因为您正在编写批处理脚本）。

或者，您也可以`mysql`使用[`--default-character-set`](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_default-character-set)参数调用：

```
"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" -u root -proot --default-character-set=utf8 
```

一旦你解决了这个问题，我建议你阅读并享受这两个链接：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)
*   [一直到UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

# android - 谷歌眼镜能运行普通的安卓应用吗？

> ID：15878990
> 
> 赞同：4
> 
> 时间：2013-04-08T12:26:26.667
> 
> 标签：android, google-glass

我目前正在为不同的硬件开发一个抬头显示项目，但它是基于 Android 的。我有点担心谷歌可能只需要使用`mirror api`为谷歌眼镜开发。任何熟悉该产品的人都知道您是否可以在其上运行基于 Java 的 Android 应用程序？

# javascript - Unix 时间戳 -> 人类可读错误

> ID：15878993
> 
> 赞同：0
> 
> 时间：2013-04-08T12:26:34.550
> 
> 标签：javascript, jquery, html, epoch

我遵循了指南，在这个网站上阅读了很多答案，但我无法获得一个 unix 纪元时间来正确渲染。

这是一个示例时间戳，取自 JSON 文件 output.json

“时间戳”：“1365427203000”，

这是我的代码

```
$.getJSON('output.json', function (data) {

    var myDate = new Date( data.RTPPMDataMsgV1.timestamp *1000);

    var timestamp_information = '<p>';
    timestamp_information += 'Last update : ' + myDate.toGMTString();
    timestamp_information += '</p>';
    // load the content into timestamp_placeholder div
    $("#timestamp_placeholder").html(timestamp_information); 
```

这是输出..

最后更新：格林威治标准时间 45238 年 8 月 31 日星期二 14:10:00

当我将该时间戳编号输入在线 EPOCH 转换器时，它恢复正常（格林威治标准时间 4 月 8 日大约 13:25）

有人可以帮忙吗？这与纪元是数字字符串而不是整数有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:50:11.700

感谢评论的用户。

时间戳已经被乘以 1000...

我所做的只是使用上面的代码，但没有 *1000 然后我将它包装在一个 parseInt 中，所以函数 new 信息是一个数字，而不是一串数字

# mips - 什么是 MIPS 首字母缩略词中的“互锁管道”？

> ID：15878994
> 
> 赞同：12
> 
> 时间：2013-04-08T12:26:37.683
> 
> 标签：mips, cpu-architecture

我正在经历一个 MIPS 处理器架构。

根据本教程，它指出：没有互锁管道阶段的微处理器 [http://en.wikipedia.org/wiki/MIPS_architecture](http://en.wikipedia.org/wiki/MIPS_architecture)

> 流水线的一个主要障碍是某些指令（例如除法）需要更长的时间才能完成，因此 CPU 在将下一条指令传递到流水线之前必须等待。
> 这个问题的一个解决方案是使用一系列联锁，允许阶段指示它们正忙，暂停上游的其他阶段。
> Hennessy 的团队将这些互锁视为主要的性能障碍，因为它们必须与 CPU 中的所有模块进行通信，这需要时间，并且似乎限制了时钟速度。
> MIPS 设计的一个主要方面是将所有指令的每个子阶段（包括高速缓存访​​问）放入一个周期，从而消除了对互锁的任何需求，并允许单周期吞吐量。

这个链接说：--- [https://www.cs.tcd.ie/Jeremy.Jones/vivio/dlx/dlxtutorial.htm](https://www.cs.tcd.ie/Jeremy.Jones/vivio/dlx/dlxtutorial.htm)

```
issue a "stall" instruction instead of a nop instruction upon a stall 
```

联锁管道的缺点到底是什么？
为什么路由器过去更喜欢具有 MIPS 架构的处理器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-10T05:34:03.280

> MIPS 设计的一个主要方面是将所有指令的每个子阶段（包括高速缓存访​​问）放入一个周期，从而消除了对互锁的任何需求，并允许单周期吞吐量。

但在更高版本的 MIPS 中，[http://cs.nyu.edu/courses/spring02/V22.0480-002/vliw.pdf](http://cs.nyu.edu/courses/spring02/V22.0480-002/vliw.pdf)幻灯片 9，互锁被重新引入架构：

> *   毕竟 MIPS 最初代表的是没有互锁流水线阶段的微处理器之类的东西
> *   因为新的实现（具有不同的内存延迟）需要多个插槽，而且我们不希望代码的正确性依赖于实现的版本。
> *   因为其他指令无论如何都需要互锁（例如浮点）
> *   因为做联锁并不那么痛苦

因此，考虑到您的问题：

> 联锁管道的缺点到底是什么？

联锁需要更复杂的硬件（CPU的控制单元），在手绘晶体管和数十万个晶体管的CPU时代，设计和测试并不是那么容易。他们选择了设计 CPU 内核而不是 Interlocking 的目标，但他们失败了。如果没有 Interlocking，他们就无法生产兼容的商用芯片系列。

> 为什么路由器过去更喜欢具有 MIPS 架构的处理器？

从历史上看，它们在第一个网络设备中很流行，并被用于下一个设备，这可能是由于惯性和对基于 MIPS 的设备的投资（来自网络设备制造商和 MIPS 芯片制造商）。

查看 Dominic Sweetman 撰写的“See MIPS Run”这本书，第 15、16、22 页 [http://books.google.com/books?id=kk8G2gK4Tw8C&pg=PR15](http://books.google.com/books?id=kk8G2gK4Tw8C&pg=PR15)

在 1990 年代中期，有几款易于使用的 MIPS 芯片，R4600、RM5200 和 RM7000。思科使用 1993 年的 R4600，下一个型号具有 64 位总线和大型片上二级缓存。他们有足够的性能来驱动当时的路由器。

我认为在 2010 年代，ARM 上有路由器（现在有很多[带网络和 ARM 的 SoC](http://linuxgizmos.com/cortex-a9-soc-targets-linux-based-nas-devices-and-80211ac-routers/)）。这是因为 ARM 是授权最广泛的架构（就授权核心数量而言，[2011 年为 78%](http://www.eetimes.com/document.asp?doc_id=1261716)）；第二种架构是 10% 的 ARC（查看您的 PC 或笔记本电脑上的 Intel vPro 贴纸 - 如果您有贴纸，则说明您的芯片组中有 ARC 核心；它们也用于许多 SSD 控制器）。MIPS 在该评级中仅排名第三，市场上 100 亿个内核中仅占 6%。