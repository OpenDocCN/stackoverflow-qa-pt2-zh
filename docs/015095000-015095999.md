# StackOverflow 问答 15095000-15095999

# powershell - 将 HTML 中的行转换为 CSV

> ID：15095006
> 
> 赞同：0
> 
> 时间：2013-02-26T17:04:21.880
> 
> 标签：powershell, html-parsing

我有一个 html 文件，其中的链接格式为

```
<a href="http://www.google.com>Date: 25.02.2013 10:30 Name: Google</a><br> 
```

我正在尝试编写一个 powershell 脚本，它将获取链接、日期、时间和名称，并将它们以 CSV 格式（链接、日期、时间、名称）

以下将为我提供链接，但不提供其余信息，我只是错过了什么吗？正则表达式有效，尽管在寻找名称的人中放弃“名称：”会有所帮助。

```
$input_path = 'C:\temp\myfile.html'
$output_file = 'C:\temp\myfile.csv'
$regex_link = '([a-zA-Z]{4})://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)’
$regex_date = '\d{2}\.\d{2}\.\d{4}'
$regex_time = '\d{2}:\d{2}'
$regex_name = 'Name:\s([\w]*)'
$myVar = select-string -Path $input_path -Pattern $regex_link, $regex_date, $regex_time, $regex_name -AllMatches| % { $_.Matches } | % { $_.Value } 
$myVar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:46:34.087

这不是我猜的最干净的解决方案，但它在我的测试中有效：

```
$input_path = 'C:\temp\myfile.html'
$output_file = 'C:\temp\myfile.csv'

(Get-Content $input_path) -match "href" | % {
$data = ($_ -replace '(?:.*)href="(.*?)">Date:\s*([\w\.]+)\s*([\w\:]+)\s*Name:\s*(.*)</a>(?:.*)' , '$1;$2;$3;$4').Split(";")
New-Object psobject -Property @{
    "Link" = $data[0].Trim()
    "Date" = $data[1].Trim()
    "Time" = $data[2].Trim()
    "Name" = $data[3].Trim()
    }
} | Select-Object Link, Date, Time, Name | Export-Csv $output_file -NoTypeInformation 
```

我的文件.html：

```
<html>
<body>
asdsanfkj
djaksl
sadjklas
<a href="http://www.google.com">Date: 25.02.2013 10:30 Name: Googledas adka kasjiw</a><br>
sadsadmdsa
<a href="http://www.google2.com">Date: 22.22.2222 20:20 Name: Google2asd addasd </a><br>
sajl
dasjdsa
asd
</body>
</html> 
```

我的文件.csv：

```
"Link","Date","Time","Name"
"http://www.google.com","25.02.2013","10:30","Googledas adka kasjiw"
"http://www.google2.com","22.22.2222","20:20","Google2asd addasd" 
```

# mongodb - 在一个查询中更新父对象上的子对象

> ID：15095009
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:04:28.440
> 
> 标签：mongodb

您好，我在图像对象上有一组客户端，如下所示：

```
{
        id: 1,
        path: "2013-02/12", 
        clients:
        [
            {
                    id: 321,
                    alias: "Test: audienceDev",
            }
        ],
}, 
```

客户端对象在别处更新，我需要更新此图像对象上的客户端对象。

我试过了：

```
 $this->mongoDB->Image->update(
                array('clients.id' => (int) $document->id),
                array('$set' => array('client' => $document)),
                array('multiple' => true)
            ); 
```

和

```
 $this->mongoDB->Image->update(
                array('clients[].id' => (int) $document->id),
                array('$set' => array('client' => $document)),
                array('multiple' => true)
            ); 
```

两者都不更新图像对象上的客户端对象。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:39:01.770

我知道您有一组客户端，因此要更新每个客户端对象，您应该这样做：

```
$this->mongoDB->Image->update(
  array('clients.id' => (int) $document->id),
  array('$set' => array('clients.$' => $document)),
  array('multiple' => true)
); 
```

This will find all the clients with that '$document->id' and updates every client (.$) of the 'clients' array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:08:38.317

```
array('$set' => array('client' => $document)) 
```

什么是*客户*领域？你没有它。

要更新对象列表，您必须替换整个列表。或者推新条目并拉旧条目。因为当您尝试按*clients.id*标准查找文档时，您会得到文档列表，而不仅仅是*客户*列表。此外，您可以编写一个 js 函数来进行所需的更新。并将其存储在mongodb中。

# twitter-bootstrap - 在一个控制组中并排引导两个锚标记

> ID：15095013
> 
> 赞同：0
> 
> 时间：2013-02-26T17:04:51.277
> 
> 标签：twitter-bootstrap

我在对照组中有两个并排的锚标签。我正在为这个项目使用 twitter 引导程序。但这两个锚标签总是相互重叠

我的html如下

```
<div class="control-group">
     <div class="controls">
          <a id="address" class=" pull-right update btn btn-inverse btn-medium push-top">Update</a>
          <a class="pull-right delete_add btn btn-inverse btn-medium push-top">Delete</a>
     </div>
</div> 
```

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:31:09.437

问题是`pull-right`-class。此类将两个内联框浮动到右侧。

你可以通过添加一个新的类来将文本元素与 CSS 对齐来解决这个问题：

```
.align-right{
   text-align: right;
} 
```

在您的 HTML 代码中删除`pull-right`-class 并添加`align-right`到您的`controls`组中。

```
<div class="control-group">
     <div class="controls align-right">
          <a id="address" class="update btn btn-inverse btn-medium push-top">Update</a> 
          <a class="delete_add btn btn-inverse btn-medium push-top">Delete</a>
     </div>
</div> 
```

[http://jsfiddle.net/handtrix/FZZsu/](http://jsfiddle.net/handtrix/FZZsu/)

# mysql - 增加表格列中的参数

> ID：15095023
> 
> 赞同：1
> 
> 时间：2013-02-26T17:05:16.323
> 
> 标签：mysql, groovy

请帮我制作一个脚本，它将增加 MySQL 数据库中“数字”列中的数字，如下图所示：

```
******************
* index * number *
******************
* 1000A *  01    *
* 1000B *  02    *
* 1000C *  03    *
* 1000D *  04    *
… 
* 1000Z *  99    * 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:12:38.110

我认为这就是你想要的：

```
update `mytable` set number = number + 1 where index = $YOUR_INDEX; 
```

当然，替换`$YOUR_INDEX`为感兴趣的索引。

# java - 将 Java 桌面应用程序与 Ruby on Rails Web 应用程序连接起来

> ID：15095026
> 
> 赞同：2
> 
> 时间：2013-02-26T17:05:25.380
> 
> 标签：java, ruby-on-rails, ruby, database, web

我正在尝试使用 PostgreSQL 数据库构建一个 Ruby on Rails Web 应用程序，以及一个使用 Hibernate 的带有 H2 数据库引擎的 Java 应用程序。

我听说过 JDBC、RMI 和 Sockets，但我对这些一无所知。

问题是，我想使用来自 Web 应用程序的数据，使用本地数据库对其进行一些处理，最后我想将更改上传到数据库，或者假设我想在 Web 数据库中创建新表并立即显示网络中的变化。

例如，我想让学生在网络上注册，将学生从网络数据库中滚动到本地数据库并输入分数，最后我希望能够在网络数据库中添加标记，并且在网络中单个标记应该立即发布。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:14:56.643

您的问题的解决方案是（REST）API。

我建议在 api/v[number_of_version]/ 下为您的 API 创建单独的控制器

[Ryan Bates 在http://railscasts.org](http://railscasts.org)上有一个非常好的示例，介绍了如何在此处构建 REST API。

您可以在此处找到 API 的代码示例。

[https://github.com/railscasts/350-rest-api-versioning/tree/master/store-after/app/controllers/api](https://github.com/railscasts/350-rest-api-versioning/tree/master/store-after/app/controllers/api)

然后您可以使用 HTTP 请求获取数据。

例如。要在您的应用程序中为用户获取数据，您将在 url 中执行 http 请求（您将在 api 和 version 命名空间下的 routes.rb 中定义）/：用户名

例如[http://yourdomain.com/ausername](http://yourdomain.com/ausername)

你会得到一个 JSON 响应，比如

```
user: {
  username: "ausername"
  email: "ausername@amaildomain.com"
 ..... 
```

如果您有任何问题，请随时问我：）

**问题更新**

当然，您可以通过这种方式添加数据。您只需要将正确的 json 导出到正确的 url。

我在这个应用程序中做了一个例子

[https://github.com/Geembo/getshitdone](https://github.com/Geembo/getshitdone)

这个例子：

[https://github.com/Geembo/getshitdone/blob/master/app/controllers/tasks_controller.rb](https://github.com/Geembo/getshitdone/blob/master/app/controllers/tasks_controller.rb)

在这个应用程序中，我通过 Javascript (Backbone) 保存任务。相同的规则适用于 Java（和任何其他语言）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:34:33.190

处理这个问题的最好方法是从 Web 应用程序中提供一个 API，外部应用程序可以与之交互。Rails 的一大优点是它基本上支持开箱即用。

采取典型的控制器操作从网络查看学生。

```
class StudentsController < ApplicationController
  def show
    @student = Student.find(params[:id])
  end
end 
```

发出请求`/students/1`后，`students/show`将为 ID#1 的学生呈现模板。

Rails 能够将 xml/json 附加到 URL 的末尾，以便使用不同的格式类型请求处理。

```
class StudentsController < ApplicationController
  respond_to :html, :json

  def show
    @student = Student.find(params[:id])
    respond_with(@student)
  end
end 
```

这设置了 ActionController 的一个功能，称为 Responder。现在，当向控制器发出请求时，`/students/1.json`将调用`as_json`Student 模型，该模型默认获取所有模型属性并将其转换为 json 对象。这可以通过覆盖学生模型中的 as_json 来定制。

要进行更新，您可以遵循类似的模式。您使用 PUT 请求向服务器提交`/students/1.json`. 请求不是 JSON 格式，您使用的库可能支持设置变量，请确保它采用 Rails 期望的格式（即`student[field]`）。Rails 中间件将负责其余的工作。

```
class StudentsController < ApplicationController
  respond_to :html, :json

  def update
    @student = Student.find(params[:id])
    @student.update_attributes(params[:student])
    respond_with(@student)
  end
end 
```

请注意，使用 Responders 不会检查 update_attributes 是否有效，它`respond_with`会为您执行此操作。如果有错误，您将获得 HTTP 422 Unprocessable Entity 作为响应代码，并且响应的主体将是带有错误的 JSON 对象。

还值得一提的是，如果您更喜欢 XML 响应正文而不是 JSON，则可以在所有这些示例中替换为`json`。`xml`

# objective-c - 用图像加载 UITableView？

> ID：15095029
> 
> 赞同：0
> 
> 时间：2013-02-26T17:05:37.127
> 
> 标签：objective-c

我很迷茫，已经尝试了一切，现在我有来自 AssetsLibrary 的图像，我想在 UITableView 上以矩阵形式显示它们，**我** 不知道如何开始。

我很乐意了解如何将我的 UIImages 链接到 tableView（我需要代码..）并在矩阵中创建他。请给我任何方向..

这就是我从 assetsLibrary 获取图像的方式：

```
//------ get the images from the camera roll ----------
    NSMutableArray *cameraRollPictures=[[NSMutableArray alloc]init];
    ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop)
    {
        NSInteger numberOfAssets = [group numberOfAssets];
        if (numberOfAssets > 0)
        {
            NSLog(@"numberOfPictures: %d",numberOfAssets);
            //NSInteger lastIndex = numberOfAssets - 1;
            int i = 0;
            for (i = 0; i <= numberOfAssets-1; i++)
            {
                [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:i] options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
                 {
                    UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
                    //NSLog(@"theObject!!!! -- (%d) %@",i,thumbnail);
                    [cameraRollPictures addObject:thumbnail];
                }];
            }
        }

    }
      failureBlock:^(NSError *error)
    {
        NSLog(@"error: %@", error);
    }]; 
```

编辑：

知道为什么我每次图像都进入 for 循环两次吗？它记录每个索引 2 次..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:12:31.853

看看[这里](https://github.com/elc/ELCImagePickerController)是如何创建图像矩阵的

如果你想创建一个图像矩阵也可以[在这里](http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker)

或者[在这里](https://github.com/jeena/JPImagePickerController)

# c# - 从 Visual Tree 中删除时，MediaElement 会丢失其源/缓冲输入

> ID：15095033
> 
> 赞同：0
> 
> 时间：2013-02-26T17:05:44.377
> 
> 标签：c#, windows-8, mediaelement

我正在从头开始为我的应用程序构建一个媒体播放器。为了从“常规”视图转到全屏，播放器从我的 XAML 的一部分中删除并插入到另一部分中 - 如下所示：

```
if (Trailer.IsFullScreen())
{
    // some code here

    var mediaPlayer = Trailer; // Trailer is the media player usercontrol
    TrailerFullScreenGrid.Children.Remove(Trailer);
    TrailerWrapper.Children.Add(mediaPlayer);

    // more code here
}
else
{
     // some code here

     var mediaPlayer = Trailer;
     TrailerWrapper.Children.Remove(Trailer);
     TrailerFullScreenGrid.Children.Add(mediaPlayer);

     // more code here
 } 
```

现在，当我这样做时，视频不会继续播放，如果您单击播放按钮，它将重新启动整个剪辑。我想要的是暂停电影，做我所有的 xaml 魔术，然后在暂停时继续播放。我读过一些关于 UnloadedBehaviour 的文章，但这在 Windows 8 RTM 中似乎是不可能的。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:24:45.903

一些视觉元素必须保留在视觉树中才能正常工作，尤其是那些必须与媒体播放或捕捉有关的元素。我从来没有尝试过你在做什么，但我并不惊讶这是这种行为。

我想您可以捕获播放位置并在重新设置控件并再次开始播放后尝试设置它，但这需要大量工作并且可能容易出错。老实说，Windows 开发人员打算让您处理这种情况的方式是使用视觉状态。

如果您曾在 Expression Blend 中使用过**LayoutAwarePage ，那么您之前可能遇到过视觉状态。****LayoutAwarePage**具有 Windows 8 中所有不同视图模式的状态（填充、对齐、全横向、全纵向）。但是即使您不使用**LayoutAwarePage** ，您也可以随时创建自己的状态。您可以在 Blend 的“状态”选项卡上创建状态（如果您没有看到该窗口，则“窗口”->“状态”）。

每个状态都必须位于一个状态*组*中。组名无关紧要，只需了解组中的每个状态都是独占的。因此，您可以调用您的组**MediaPlaybackStates**并在该组内放置两个状态，称为**Windowed**和**FullScreen**。

您已经定义了可以使用 Blend 来设计它们的两种状态。您只需选择状态并更改所需的任何属性。然后在运行时，当您告诉框架进入该状态时，它会播放您“记录”的更改，甚至可以为您制作动画。

当然，一个问题是您不能使用 Visual State 更改控件的父级。相反，请考虑将播放器周围的所有控件分组到可以在进入“全屏”模式时折叠的面板中。使用**Grid**控件布置所有内容，并确保玩家所在的**Row** / **Cell**设置为“*”大小。这意味着当其他控件折叠时它将占用所有可用空间。

我的博客上有一篇详细的文章，展示了如何使用 Visual States 来处理各种 Windows 8 窗口状态（Filled、Snapped 等）。那篇文章应该有希望让你指出正确的方向。

[http://jaredbienz.wordpress.com/2012/04/22/wp-to-w8-view-states-using-visual-state-manager/](http://jaredbienz.wordpress.com/2012/04/22/wp-to-w8-view-states-using-visual-state-manager/)

当您准备好在运行时更改状态时，请调用

```
VisualStateManager.GoToState(this, "FullScreen", true); 
```

第一个参数（*this*）意味着我们正在改变整个窗口的状态。第二个参数是我们要切换到的状态的名称，最后一个参数是如果状态中存在过渡（或动画），您是否要使用它们。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# coldfusion - phpMyadmin 风格的冷融合应用程序

> ID：15095037
> 
> 赞同：0
> 
> 时间：2013-02-26T17:06:01.793
> 
> 标签：coldfusion, phpmyadmin

我正在尝试制作一个简单的类似 phpmyadmin 的系统，以便在没有 php 的服务器上工作。我相信服务器正在运行 ColdFusion 8。我无法使用转储来获取服务器信息。服务器正在使用mysql。

我目前正在使用

```
<cfquery name="qdb" datasource="#application.datasource#">
SELECT * FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_TYPE = 'BASE TABLE' 
</cfquery>

<cfoutput query="qdb">#table_name# < br>< /cfoutput> 
```

从这个页面我转到另一个通过将列名与列信息分开来输出表中所有信息的页面。

我想做的是获取列数据类型。我需要知道哪个列具有主键，以便我可以使用它转到另一个页面来编辑数据。IE phpmyadmin 中的结构页面。

我正在为这个服务器上的一个人做一个应用程序，服务器管理员不会安装 phpmyadmin。使维护数据库变得困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:40:21.423

而不是 <cfoutput query="qdb">#table_name# <br></cfoutput> 试试这个...

```
<cfdump var="#qdb#"> 
```

# asp.net - Internet Explorer 和火狐无法显示网页

> ID：15095038
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:06:04.847
> 
> 标签：asp.net, browser

我尝试在 Internet Explorer 和 Firefox 中打开我的页面，但它们无法显示该网页。但我可以在 Opera 和内部网络浏览器中打开它。地址如下：

```
http://localhost:14254/WebSite18/Default.aspx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:58:25.563

这会有所帮助。

firefox的解决方案1：在firefox中添加一个firebug插件并打开firebug并单击console。现在加载您的网址。如果有任何错误，它将显示在 firebug 控制台中。

解决方案 2：在 IE 中，加载页面并按 F12。这将打开 IE 调试器。单击开始开始调试，这将刷新您的页面，您应该会在 IE 调试器中看到任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:07:00.253

检查 IE 和 Firefox 的代理设置。两种浏览器都应该在本地请求上忽略您的代理服务器（如果有的话），但设置可能很复杂，并且可能设置为即使在本地也强制代理调用。

页面是否在 Google Chrome 中呈现？

# javascript - 如何在jQuery中的两个HTML片段之间淡入淡出

> ID：15095040
> 
> 赞同：2
> 
> 时间：2013-02-26T17:06:13.390
> 
> 标签：javascript, jquery, for-loop, settimeout

[http://jsfiddle.net/SVtJV/16/](http://jsfiddle.net/SVtJV/16/)

```
$( document ).ready(function() {
    for (var i=0; i<3; i++) {
        setTimeout(function() {
            $("#footer-address").fadeOut(400);
        }, 2000);
        setTimeout(function() {
            $("#footer-address").fadeIn(400).html("<strong>Our Place</strong>  New Address Location");
        }, 2400);
        i++;
    }
}); 
```

我正在尝试获取一段代码，其中的`setTimeout`函数可以使用 for 循环运行 3 或 4 次。从逻辑上讲，我可以看到我在 for 循环中的代码不想重复自己，可能是因为`setTimeout`时间值已经过去了。

有没有办法在循环之前重置时间值？还是有更好的方法来执行最终目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:14:09.847

每个 for 循环不会等待超时完成，整个 for 循环可能在 20 毫秒内完成：D 如果你想重复淡入淡出，你必须做一个带有回调的小函数。

```
 $( document ).ready(function() {
    var repeats = 4,
        times = 0,
        fade = function() {
            if (times >= repeats) return false;
            times++;
            $('#footer-address').fadeTo(400, 0, function() {
                $('#footer-address').html('text 1');
                $('#footer-address').fadeTo(400, 1, function() {
                    setTimeout(fade, 1000);
                });
            }); 
        };

    setTimeout(fade, 1000);
}); 
```

而且我不太明白你想用那里的 .html() 做什么。会反复改变吗？

已编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:40:18.100

正如其他人提到的那样，您`i`在两个地方（`for`事后思考和循环主体）递增，因此删除主体分配是要修复的第一部分。此外，原始 HTML 不会被“放回”。

然而，这不是主要问题。JavaScript 会立即执行循环（两次），因此**所有**淡出/淡入函数分别在 2000/2400 毫秒后执行，而不是按预期在超时后执行。您可以通过在您的演示中放置一个`console.log(i);`或来检查这一点，并在页面加载后立即查看 3 个日志行/警报。`alert(i);``i++`

我会将标记作为 HTML，而不是在 JavaScript 中创建它，然后在 2 个 HTML 片段之间淡入淡出，例如参见[**演示**](http://jsfiddle.net/pQrBG/)或以下示例代码。

**HTML**

```
<div id="footer-address">
    <span><strong>We have moved!</strong> Our new address is:</span>
    <span><strong>Our Place</strong>  New Address Location</span>
</div> 
```

**CSS**

```
#footer-address {
    margin-bottom: 2px;
    text-transform: uppercase;
    margin: 0;
    padding: 0;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 10px;
}

#footer-address span:last-child {
    display:none;
} 
```

**JavaScript**（需要 jQuery）

```
var $footer = $('#footer-address');
var i = 0;

(function swap(){
    var $hiddenSpan = $footer.find('span:hidden')

    $footer.find('span:visible').fadeOut(400, function() {
        $hiddenSpan.fadeIn(400)
    })

    if (i++ < 3) setTimeout(swap, 2000)
})(); 
```

JavaScript 使用以 2 秒为间隔运行 3 次的自执行函数（参见[http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/ ）。](http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/)我还利用了jQuery函数的*回调*[`.fadeOut()`](http://api.jquery.com/fadeOut/)（第二个）参数，以便在 fadeOut 完成*后*`.fadeIn()`启动。

 *我确信这里有改进的余地，但希望它仍然有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:30:54.723

我认为这是最干净的解决方案

[在 jsfiddle 上看到它](http://jsfiddle.net/SVtJV/19/)

```
$(function() {
    var times = 3,
        elem = $('#footer-address')
        fader = setInterval(function() {
            elem.fadeOut(400, function() {
                elem.fadeIn(400);
            });
            if (--times === 0) {
                clearInterval(fader);
            }
        }, 1200);
}); 
```

调整时间数字，直到您对结果满意为止。*

# java - 使用 For 循环使用 Scanner 类从文本文件中读取数据

> ID：15095041
> 
> 赞同：-3
> 
> 时间：2013-02-26T17:06:16.470
> 
> 标签：java, regex, delimiter

我目前正忙于一项编程任务，该任务要求我从文本文件中读取数据然后对其进行处理。该文件如下所示：

```
CS1 2012 Group 1
8
5,5,5,6,5,8,9,5,6,8, good, very good, excellent, good
7,7,8,7,6,7,8,8,9,7,very good, Good, excellent, very good
8,7,6,7,8,7,5,6,8,7 ,GOOD, VERY GOOD, GOOD, AVERAGE
9,9,9,8,9,7,9,8,9,9 ,Excellent, very good, very good, excellent
7,8,8,7,8,7,8,9,6,8 ,very good, good, excellent, excellent
6,5,6,4,5,6,5,6,6,6 ,good, average, good, good
7,8,7,7,6,8,7,8,6,6 ,good, very good, good,  very good
5,7,6,7,6,7,6,7,7,7  ,excellent, very good, very good, very good 
```

前两行被读入然后分配给字段，其余行是我必须处理的行。我被告知要使用`.useDelimiter("[ ]*(,)[ ]*")`，但到目前为止还没有真正能够很好地使用它。

读入数据后，我必须使用 switch 语句将字符串转换为整数并计算出平均反馈分数，例如：
优秀 = 5
非常好 = 4
好 = 3

截屏 ：

![在此处输入图像描述](../Images/24ec99cd3f6178bad0e6a2f5ea1a15cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:28:15.720

您可以使用 ',' 中的`useDelimiter(str)`方法`Scanner`作为其参数，以用逗号分隔输入。之后，您可以删除单词周围的空格并使用 and 小写`trim()`字符串`toLowerCase()`。之后，您以标准方式获得字符串，以便您可以将其转换为您认为合适的整数。下面是一些可以做到这一点的代码

```
import java.util.*;

public class Parser {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        sc.useDelimiter(",");
        while (sc.hasNext()) {
            String s = sc.next().trim().toLowerCase();
            // Now check s accordingly to do what you want it to do
        }
    }
} 
```

***注意***：您应该`useDelimiter()`在解析文件中的前两行后使用该方法，因为一开始您确实希望使用空格作为分隔符。

# android - 如何从 AsyncTask 更新 webview

> ID：15095042
> 
> 赞同：1
> 
> 时间：2013-02-26T17:06:16.563
> 
> 标签：android, webview, android-asynctask

我有一个从网络获取 xml 文件的应用程序，对其进行解析以检索我必须缓存的网站网页的路径。例如

```
/services/orthopaedics.php 
```

. 我可以成功下载所有需要缓存的页面的路径。目前我在 AsyncTask 中执行此操作。Web 服务调用的结果（页面路径）存储在 AsyncTask 的 doInBackground 方法中的 contentsValues 中。然后我在 onPostExecute() 方法中遍历这些内容值，我可以在 webview 的 loadUrl() 方法中一一加载网页。这个 webview 是不可见的，因为它只用于缓存目的。

问题在于，由于不可见的 webview 正在加载用户可以看到的另一个 webview，并且要显示站点的索引页面，因此加载速度很慢。在不可见的 webview 停止加载缓存之前，会出现一个白屏。在 phoe 上大约需要 4 秒，这是可以接受的，但在 android 平板电脑上大约需要 30 秒。

我知道对 webview 的调用必须在 UI 线程上，这就是为什么我在 onPostExecute 方法中加载网页（不可见的 webview）。是否可以在 doInBacground 方法中以某种方式将页面加载到缓存中，但将 webview.loadUrl() 放在 runOnUiThread(new Runnable) 中？

我将在下面给出我的意思的简化示例。

```
private class AsyncCacheSite extends AsyncTask<String, ContentValues, ContentValues>{

        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            Log.e(TAG, "about to load main page");
            webView.loadUrl(mobileWebsiteUrl, getHeaders());

            progressDialog = new ProgressDialog(MainActivity.this);
            progressDialog.setTitle("Connecting to Server");
            progressDialog.setMessage("Caching website for offline use...");
            progressDialog.setIndeterminate(true);
            progressDialog.show();
        }

        @Override
        protected ContentValues doInBackground(String... params) {
            ContentValues cv = null;

            try {
                //call the service to get the xml file containing paths
                cv = ws.checkForUpdates();

            } catch (Exception e) {
               e.printStackTrace();
            }

//iterate through the xml file geting the paths
.......
.......
.......
runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
loadUrlIntoCache(page);

                            }
                        })

            return null; 

        }

        @Override
        protected void onPostExecute(ContentValues result) {
            super.onPostExecute(result);

            progressDialog.dismiss();

    }//end of postExecute

 }//end of asyncTask

public void loadUrlIntoCache(String pageUrl){

        WebView wv2 = new WebView(MainActivity.this);

        wv2.getSettings().setSupportZoom(true);
        wv2.getSettings().setBuiltInZoomControls(true);
        wv2.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        wv2.setScrollbarFadingEnabled(true);
        wv2.getSettings().setLoadsImagesAutomatically(true);
        wv2.getSettings().setDomStorageEnabled(true);
        wv2.getSettings().setAppCacheEnabled(true);
        // Set cache size to 8 mb by default. should be more than enough
        wv2.getSettings().setAppCacheMaxSize(1024*1024*32);
        // This next one is crazy. It's the DEFAULT location for your app's cache
        // But it didn't work for me without this line.
        // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
        String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();

        wv2.getSettings().setAppCachePath(appCachePath);
        wv2.getSettings().setAllowFileAccess(true);
        wv2.getSettings().setJavaScriptEnabled(true);
       // wv2.setWebViewClient(new WebViewClient());

////////////////////////////////////////////////////////////////////////////////////////
/////the webviewclient below is the code you gave me to overcome the redirecting issue//
////////////////////////////////////////////////////////////////////////////////////////
webView.setWebViewClient(new WebViewClient() {
public boolean shouldOverrideUrlLoading(WebView view, String url){
// do your handling codes here, which url is the requested url
// probably you need to open that url rather than redirect:
view.loadUrl(url);
return false; // then it is not handled by default action
}
});

        wv2.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
        wv2.setVisibility(View.GONE); 

        wv2.loadUrl(mobileWebsiteUrl + pageUrl, getHeaders());
        Log.e(TAG, "loading " + mobileWebsiteUrl + pageUrl);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:18:27.780

我认为唯一的解决方案是在 doInBackground 中使用 http 请求加载数据，然后在 publishProgress 中使用 [loadData](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T15:59:21.730

遗憾的是，您无法从 AsyncTask 中“加载” URL。必须从主线程调用所有“WebView”方法。

您所能做的就是在第二个线程中更新进度对话框。检查这个答案[Webview with asynctask on Android](https://stackoverflow.com/a/14122815)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T00:12:04.257

WebView 需要从 UI 线程调用。如果您碰巧可以访问主循环器，则可以通过 UI 线程处理程序创建、设置和加载页面。

```
 //Code for creating an instance of Webview inside AsyncTask
    WebView wv = null;
    final Object lock = new Object();
    final int TIMEOUT_MS = 3000;
    AtomicReference<WebView> holder = new AtomicReference<>(); //use to pass the created webview back to worker thread.
    Handler mainHandler = new Handler(Looper.getMainLooper());
    try {
        synchronized (lock) {
            while (wv == null) {
                mainHandler.post(() -> {
                    synchronized (lock) {
                        WebView localWebView = new WebView(context);
                        setWebViewCache(context, localWebView); //configure the cache to your desired location.
                        holder.set(localWebView); //use this line to pass out the created instance from the UI thread back to your async task.
                        lock.notify();
                    }
                });
                lock.wait(TIMEOUT_MS);
                wv = holder.get();
            }
        }
    } catch (InterruptedException ie) {
        Log.e(TAG, "creating prefetch webview times out");
    } 
```

接下来，您要使用 AsyncTask 中所需的 URL 加载 Webview。

```
 synchronized (lock) {
            mainHandler.post(() -> {
                wv.setWebViewClient(new WebViewClient() {
                    @Override
                    public void onPageFinished(WebView view, String url) {
                        super.onPageFinished(view, url);
                        //override with behavior you want after load finishes, make sure to notify the workerthread to proceed.
                        synchronized (lock) {
                            lock.notify();
                        }
                    }
                });
                wv.loadData(html, mimeType, encoding); //here load the url you want
            });
            lock.wait(TIMEOUT_MS);
        } 
```

希望我的代码可以提供帮助。

# javascript - javascript 文本中的模式匹配

> ID：15095051
> 
> 赞同：0
> 
> 时间：2013-02-26T17:06:51.053
> 
> 标签：javascript, regex

我有一个文本，里面有 %text% 这样的模式。如何在 javascript 中获取此模式以将它们包装在跨度中并更改颜色？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:49:23.193

```
var str = 'Some text with patterns like %text% inside.';

str = str.replace( /%([^%]+)%/g, '<span style="color: blue">$1</span>' );    
// Some text with patterns like <span style="color: blue">text</span> inside. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:29:43.013

如果`%`s 之间的模式总是纯文本（不包括空格等），你可以这样做：

```
text = text.replace(/%\w*%/g, function (txt) {
    return '<span style="color: red">' + txt.substring(1, txt.length-1) + '</span>';
}); 
```

虽然 MikeM 的匹配模式远远领先于我，但我留下这个答案来展示，你如何也可以使用函数来操作匹配的字符串，甚至完成一些其他的事情，这取决于匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:26:30.443

使用[正则表达式](http://www.w3schools.com/js/js_obj_regexp.asp)

```
if (String.match(/text/gi)) {
    //wrap span around String and change color of CSS
} 
```

# greasemonkey - 为什么我的 Greasemonkey 脚本没有更新？

> ID：15095055
> 
> 赞同：19
> 
> 时间：2013-02-26T17:07:12.183
> 
> 标签：greasemonkey, auto-update, tampermonkey

我有一个用于 Firefox 的 Greasemonkey 脚本。该脚本包括这个元块和一些代码行。

我想在服务器上更新我的脚本，然后自动更新浏览器的脚本。该`requireSecureUpdates`选项已关闭。
我究竟做错了什么？

我的 1.meta.js

```
// ==UserScript== 
// @name     Ibood autosubmit 
// @include  https://*.ibood.com/* 
// @include  http://*.ibood.com/* 
// @include  * 
// @version  1.1 
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
// @grant    GM_addStyle 
// @downloadURL http://www.tipsvoorbesparen.nl/1.user.js
// @updateURL http://www.tipsvoorbesparen.nl/1.meta.js
// ==/UserScript== 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-27T03:36:36.897

两个问题：

1.  目前，您`1.meta.js`是：

    ```
     // ==UserScript== 
        // @name     Ibood autosubmit 
        // @include  https://*.ibood.com/* 
        // @include  http://*.ibood.com/* 
        // @include  * 
        // @version  1.7
        // @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
        // @grant    GM_addStyle 
        // @downloadURL http://www.tipsvoorbesparen.nl/1.user.js
        // @updateURL http://www.tipsvoorbesparen.nl/1.meta.js
        // ==/UserScript== 
    ```

    注意前导空格？

    由于设计限制¹，Greasemonkey 无法处理其[元数据块](http://wiki.greasespot.net/Metadata_Block)的前导空格。

2.  当前的脚本版本似乎是 1.8，但元文件的版本是 1.7。

~~~~~
对于您在自己的网站上托管的小脚本，甚至不必费心`@updateURL`设置。这主要是为了节省带宽，尤其是在像[userscripts.org](http://userscripts.org/)这样的网站上。

如果没有`@updateURL`设置，Greasemonkey 只会使用/检查`@downloadURL`. 这可以为您节省额外的维护工作（以及可能的 SNAFU）。

最后，在一个不相关的注释上，不要使用`@include *`!
使用`@include *`：

1.  减慢浏览器的速度
2.  可能导致不必要的副作用
3.  导致有良心的用户拒绝安装您的脚本。

* * *

¹ . 具体来说，GM源文件中的这个位，`parseScript.js`：

```
var gAllMetaRegexp = new RegExp(
    '^// ==UserScript==([\\s\\S]*?)^// ==/UserScript==', 'm'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T21:00:16.307

如果脚本正常工作，那么您的元块不太可能有问题，除了您需要使用有效的**HTTPS**源来启用更新。

参考 [http://wiki.greasespot.net/Metadata_Block#.40downloadURL](http://wiki.greasespot.net/Metadata_Block#.40downloadURL)

# reporting-services - 带有来自 SSRS 报告的附件的 Mailto

> ID：15095061
> 
> 赞同：0
> 
> 时间：2013-02-26T17:07:26.737
> 
> 标签：reporting-services, mailto

我有带有电子邮件链接的报告，例如

```
="mailto:" & Fields!EmailAddress.Value
& "?subject=Test email"
& "&body=This is a test email" 
```

有什么办法可以添加附件吗？我需要添加公司徽标。我做了研究，但找不到明确的信息。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:16:08.103

你确定附件是你想要的吗？或者您想在电子邮件中嵌入公司徽标？

一些电子邮件客户端支持 mailto 的附件方法，例如

```
&attachment="C:\fileName.txt" 
```

或类似的东西

# animation - 三.JS 如何移动一个 SkinnedMesh 的骨骼？

> ID：15095068
> 
> 赞同：8
> 
> 时间：2013-02-26T17:07:50.920
> 
> 标签：animation, three.js, mesh

我正在使用 THREE.JS 开发一个 3D 项目，我想为一个简单的 minecraft 角色制作动画。

为此，我从 Blender 中导出了一个（带有骨骼），并使用 SkinnedMesh 类使用 THREE.JS 渲染它。

我尝试了一切以使网格的手臂移动，但我不知道该怎么做。我尝试更改旋转、位置、矩阵并将所有标志设置为 true（如 matrixWorldNeedsUpdate 但手臂没有移动）。

这是一个示例代码：

```
var meshBody = new THREE.SkinnedMesh( geometry, materialTexture );

...

animate = function(){
    meshBody.bones[3].rotation.z += 0.1     
    meshBody.bones[3].matrixAutoUpdate = true;
    meshBody.bones[3].matrixWorldNeedsUpdate = true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-08T22:11:41.950

在构建网格时，确保材质的蒙皮属性设置为`true`，例如：

```
mesh = new THREE.SkinnedMesh (geometry, 
          new THREE.MeshBasicMaterial ({color: 0xaaaa00, skinning: true})
     ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T16:48:53.247

它默认使用四元数旋转。尝试设置`meshBody.bones[i].useQuaternion = false;`然后更改旋转的参数或使用[四元数](http://en.wikipedia.org/wiki/Quaternion)。

# regex - 这个正则表达式怎么做？

> ID：15095070
> 
> 赞同：-3
> 
> 时间：2013-02-26T17:07:56.060
> 
> 标签：regex

我有类似的东西

“标题 1 blablabla”

我想提取样式以具有“标题1”，只有格式是样式+选项卡+文本我只想获取样式

我试过 (. *)\t(\s.* )$

但它没有得到我想要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:25:24.493

仅当字符串以 style 开头时，才会获得样式

```
^(.+?)\t 
```

结果在`$1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:27:19.190

好的，我已经使用了 -- 因为任何人都可以使用它

(?-s)(\S+)[ \s\t]+(.+)

感谢您的大力支持

# sencha-touch-2 - Sencha List 没有数据

> ID：15095076
> 
> 赞同：0
> 
> 时间：2013-02-26T17:08:25.050
> 
> 标签：sencha-touch-2

我有一个 ProfileView 应该显示一些用户数据。这是我第一次尝试从 MySql 获取数据并将其显示在 Sencha 视图上。

**风景**

```
Ext.define('MyApp.view.Profile', {
extend : 'Ext.Panel',
xtype : 'profileview',

requires : ['Ext.List', 'Ext.data.Store'],

config : {
    layout: 'fit',
    title : 'Profiel',
    iconCls : 'user3',
    cls : 'home',
    scrollable : true,
    styleHtmlContent : true,
    html : ['<h1>Mijn Profiel</h1>'].join(""),
    items : [Ext.create('Ext.List', {
        title : 'Profile',
        docked : 'top',
        store : myStore,
        show : function(list, opts) {
            alert('list === ' + list);
            console.log('List Shown: ' + list);
        }
    })]
} 
```

});

```
var myStore = Ext.create("Ext.data.Store", {
model : "MyApp.model.User",
proxy : {
    type : "ajax",
    url : "php/get_user.php",
    reader : {
        type : "json"
        // rootProperty : "users"
    }
},
autoLoad : true
}); 
```

数据正确返回，但没有显示任何内容，这是我试图弄清楚的。

**响应**

```
[{"ID":"19","USERNAME":"Annet","EMAIL":"annet@annet.nl"}] 
```

我跳过了 rootProperty，因为它是单个用户。

**该模型**

```
Ext.define('MyApp.model.User', {
extend : 'Ext.data.Model',
config : {
    fields : [{
        name : 'ID',
        type : 'int'
    }, {
        name : 'USERNAME',
        type : 'string'
    }, {
        name : 'EMAIL',
        type : 'string'
    }]
} 
```

});

那么，为什么列表没有显示任何内容？

**更新**

我检查以查看商店是否包含数据，并且确实如此

```
map: Object
ext-record-1: Class
_data: Object
EMAIL: "annet@annet.nl"
ID: 19
USERNAME: "Annet"
id: "ext-record-1"
__proto__: Object 
```

为什么它没有被列表选中？我也尝试过 DataView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:58:26.617

您需要使用[itemTpl](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.List-cfg-itemTpl)，我为您更改了代码。

```
Ext.define('MyApp.view.Profile', {
extend : 'Ext.Panel',
xtype : 'profileview',

requires : ['Ext.List', 'Ext.data.Store'],

config : {
    layout: 'fit',
    title : 'Profiel',
    iconCls : 'user3',
    cls : 'home',
    scrollable : true,
    styleHtmlContent : true,
    html : ['<h1>Mijn Profiel</h1>'].join(""),
    items : [Ext.create('Ext.List', {
        title : 'Profile',
        docked : 'top',
        itemTpl : '<div>{ID} <span> {USERNAME} </span> <span> {EMAIL} </span> </div>',
        store : myStore,
        show : function(list, opts) {
            alert('list === ' + list);
            console.log('List Shown: ' + list);
        }
    })]
}
}); 
```

# ios - 使用 iOS 6 social.Framework (twitter oauth) 登录到 ASP.NET MVC 4 站点

> ID：15095077
> 
> 赞同：1
> 
> 时间：2013-02-26T17:08:24.920
> 
> 标签：ios, asp.net-mvc-4, twitter-oauth

我有一个使用 ASP.NET MVC 4 构建的站点，其内置登录 OAuth 集成到 Twitter。

我还有一个 iOS 本机应用程序，它使用 social.Framework 和 twitter 的反向身份验证来获取存储在设备上的 twitter 帐户的 oauth 令牌+秘密。

如何将 iOS 凭据用于托管在我的 ASP.NET MVC 4 站点上的页面和 Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:53:35.370

1.  在 AccountController.cs 中，使用不同的 url 克隆 ExternalLoginCallback 操作方法，并添加 oath_token 和 oauth_token_secret 方法参数。
2.  删除 VerifyAuthentication 调用并检查。
3.  检查是否 User.Identity.IsAuthenticated，如果是，WebSecurity.Logout() 并返回 Redirect(Request.Url.ToString())。
4.  调用 Twitter 的 /account/verify_credentials.json（签名）来验证 oauth 令牌并获取 screen_name。确保您使用 RFC3896 编码（例如 %2B 而不是 %2b），否则它将不起作用。
5.  将 result.Provider 替换为“twitter”。
6.  将 result.ProviderUserId 替换为 screen_name。

# java - 基于时间的资源可用性

> ID：15095079
> 
> 赞同：2
> 
> 时间：2013-02-26T17:08:32.317
> 
> 标签：java, performance

我目前正在为处理事件调度的系统开发一个模块。每个事件对象都有一个开始和结束时间戳以及一组所需资源。每个资源的可用数量有限，同时发生的事件数量也有限制。最终，它类似于会议室预订类型系统，其中有有限数量的房间、投影仪、椅子等。

目前，我正在遍历当前事件以计算资源利用率和并发事件计数，但是当这涉及到数千个事件时，这似乎是一种低效的方法。

任何人都可以提出更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:25:55.500

这就是所谓的[NP 完全](http://en.wikipedia.org/wiki/NP-complete)问题。随着样本量的增加，找到一个……说“数学上最优”的解决方案可能会变得非常昂贵。您花在...说“现实世界”解决方案上的时间取决于您的要求。通过使用一些启发式方法可以找到不太理想的解决方案。

**一种启发式：**

您可以按某些指标对模块进行排序。然后将它们按降序添加到您的池中。从最昂贵的模块开始。添加也适合同一插槽的所有模块。之后为其余模块打开一个新插槽。等等。

# jquery - 如何检测 scrollTo 插件当前是否滚动？

> ID：15095081
> 
> 赞同：0
> 
> 时间：2013-02-26T17:08:49.437
> 
> 标签：jquery, scrollto

我如何检测[**scrollTo**](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)插件当前滚动移动？像 jQuery`:animated`选择器。

```
if ( $('.ele').is(':animated') ) {
    $('.ele').animate({'left':'1000px'},5000);
    // .ele will only animate while it is not animating
    // i prevent repeat animation
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:12:15.843

```
el = $('.ele');

if(!el.hasClass('scrolling')) {
    el.addClass('scrolling');
    $.scrollTo( '#xxx', 1000, {onAfter: function() { el.removeClass('scrolling'); }});
} 
```

# python - Python map(None, fcn()) 有更简单的构造吗？

> ID：15095084
> 
> 赞同：1
> 
> 时间：2013-02-26T17:08:53.533
> 
> 标签：python, map, equivalent

Python 的文档`map()`部分说明：

> 如果 function 是`None`，则假定恒等函数；

因此，如果我有一些这样的 Python 代码：

```
def yearsback(tbl, yb):
    def fcn():
      y = None
      i = 0
      for (year, prefix, suffix) in reversed(sorted(tbl.iterkeys())):
        if y == None:
          y = year
        elif y > year:
          i, y = 1 + i, year
        if i >= yb:
          return
        yield (year, prefix, suffix)
    return map(None, fcn()) 
```

有没有更简单的写法？另外，我怀疑`reversed(sorted(tbl.iterkeys()))`也可以简化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:11:27.870

你需要做的就是——

```
list(fcn()) 
```

如果你想要一个迭代器，使用 -

```
iter(fcn()) 
```

# ruby - 如何有效地轮询大量服务器？

> ID：15095087
> 
> 赞同：3
> 
> 时间：2013-02-26T17:09:00.887
> 
> 标签：ruby, polling, minecraft

我正在寻找一种通过 TCP 轮询许多服务器以了解其状态的好方法。我目前正在使用同步代码和 Minecraft 查询协议，但是每当服务器离线时，队列的其余部分都会被阻塞。

我当前代码遇到的另一个问题是，某些服务器倾向于阻止我用于在其防火墙中轮询的服务器，因此它们的服务器在我的服务器列表中显示为脱机。

我正在使用带有无限循环的 Ruby rake 任务，其中我的 MongoDB 数据库中的每个 Minecraft 服务器每 +- 10 分钟进行一次检查和更新（我尝试通过让循环休眠`(600/ s.count.to_i).ceil`几秒钟来设置此间隔。

有什么方法可以有效地完成这项任务（并防止服务器在他们的防火墙中将我的 IP 列入黑名单），最好使用 Ruby 中的异步代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:10:47.910

您需要使用非阻塞套接字来检查 - 多线程。最好的办法是一次生成多个线程来一次检查多个服务器——这样你的主线程就不会被阻塞。

[这个问题](https://stackoverflow.com/questions/56087/does-ruby-have-real-multithreading)包含很多关于 Ruby 中多线程的信息——你应该能够一次产生多个并发线程，或者至少使用非阻塞套接字。

@Lie Ryan 给出的另一点是，您可以使用[IO.Select](http://www.ruby-doc.org/core-2.0/IO.html#method-c-select)一次轮询一组服务器。完成后它将返回一组“在线”服务器——这可能比产生多个线程更优雅。

# javascript - 使用 jQuery 设置不同事件的时间间隔

> ID：15095094
> 
> 赞同：0
> 
> 时间：2013-02-26T17:09:18.220
> 
> 标签：javascript, jquery, setinterval, jquery-slider

我创建了自己的滑块。每张幻灯片在不同的元素上都有不同的动画，所以我有这样的东西可以让按钮从一张幻灯片变为另一张幻灯片。

```
$('.content1').click(function(e){
    $('#image1').animate({'margin-left': '0px', 'margin-top': '0px'});
    $('#box1').animate({'margin-top': '0px'});
    hide2();  //hiddeing slide2
    hide3();  //hidding slide3
    e.preventDefault();
});

$('.content2').click(function(e){
    hide1(); //hidding slide1
    hide3();  //hidding slide2
    $('#box2').animate({'margin-top': '0px'});
    $('#image2').animate({'margin-top': '0px'});
    e.preventDefault();
}); 

$('.content3').click(function(e){
    hide1();
    hide2();
    $('#box3').animate({'margin-left': '0px'});
    $('#image3').stop().delay(1000).show().animate({'opacity': '1'});
    e.preventDefault();
}); 
```

我现在想为滑块添加一个间隔，使其每 X 秒单独移动一次。

我想知道是否可以进行 3 个不同的调用，而不是我习惯的一个函数：

```
setInterval(function(){
     nameOfFunction();
    }, 6*1000); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:42:07.187

最后我`setTimeout`按照@BradM 的建议解决了这个问题。

我敢肯定有一个更简单的方法，但我是这样做的。这是代码：

# 菜单点击事件：

```
$('.content1').click(function(e){
    slide1();
    e.preventDefault();
});

$('.content2').click(function(e){
    slide2();
    e.preventDefault();
}); 

$('.content3').click(function(e){
    slide3();
    e.preventDefault();
}); 
```

# 幻灯片效果

```
function slide1(){
    next = 2; //setting which is gonna be the next slide
    $('#image1').animate({'margin-left': '0px', 'margin-top': '0px'});
    $('#box1').animate({'margin-top': '0px'});

    hide2();
    hide3();
}

function slide2(){
    next = 3; //setting which is gonna be the next slide
    hide1();
    hide3();
    $('#box2').animate({'margin-top': '0px'});
    $('#image2').animate({'margin-top': '0px'});
}

function slide3(){
    next = 1; //setting which is gonna be the next slide
    hide1();
    hide2();
    $('#box3').animate({'margin-left': '0px'});
    $('#image3').stop().delay(1000).show().animate({'opacity': '1'});
} 
```

# 隐藏功能

```
 function hide1(){
    $('#image1').animate({'margin-left': '2000px'});
    $('#box1').animate({'margin-top': '-2000px'});
}

function hide2(){
    $('#box2').animate({'margin-top': '600px'});
    $('#image2').animate({'margin-top': '-2000px'});
}

function hide3(){
    $('#box3').animate({'margin-left': '-2000px'});
    $('#image3').animate({'opacity' : '0', 'display' : 'none'}, function(){
        $(this).hide();
    });
} 
```

# Onmouse over/out 动作

```
//when its over, we stop the movement
var delay = 6000; //6 seconds
$('#slider').hover(function(){
    clearTimeout(timer);

}, function(){
//starting again the animation (since the last slide)   
    timer = window.setTimeout(playSlide, delay);
}); 
```

# 主要播放幻灯片功能

```
var next = 2;  //next slide will be the 2nd one at the start
function playSlide(){
    var name = "slide" + next;
    var method = eval(name);

    method();

    //calling recursively the function
    timer = window.setTimeout(playSlide, delay);
} 
```

# 第一次通话

```
 //only if there's an slider, we initate it
if($('#slider').length){
    //first call the the slider
    timer = window.setTimeout(playSlide, delay);
} 
```

# r - 按相等的桶聚合数据帧

> ID：15095097
> 
> 赞同：4
> 
> 时间：2013-02-26T17:09:35.373
> 
> 标签：r

我想通过data.frame中一个变量的累积总和等量聚合一个R data.frame。我用谷歌搜索了很多，但可能我不知道正确的术语来找到任何有用的东西。

假设我有这个data.frame：

```
 > x <- data.frame(cbind(p=rnorm(100, 10, 0.1), v=round(runif(100, 1, 10))))
> head(x)
           p  v
1  10.002904  4
2  10.132200  2
3  10.026105  6
4  10.001146  2
5   9.990267  2
6  10.115907  6
7  10.199895  9
8   9.949996  8
9  10.165848  8
10  9.953283  6
11 10.072947 10
12 10.020379  2
13 10.084002  3
14  9.949108  8
15 10.065247  6
16  9.801699  3
17 10.014612  8
18  9.954638  5
19  9.958256  9
20 10.031041  7 
```

我想将 x 减少到一个较小的 data.frame 中，其中每一行包含 p 的加权平均值，由 v 加权，对应于 v 的 n 个单位的数量。这种东西：

```
 > n <- 100
> cum.v <- cumsum(x$v)
> f <- cum.v %/% n
> x.agg <- aggregate(cbind(v*p, v) ~ f, data=x, FUN=sum)
> x.agg$'v * p' <- x.agg$'v * p' / x.agg$v
> x.agg
  f     v * p   v
1 0 10.039369  98
2 1  9.952049  94
3 2 10.015058 104
4 3  9.938271 103
5 4  9.967244 100
6 5  9.995071  69 
```

第一个问题，我想知道上面的代码是否有更好（更有效的方法）。第二个更重要的问题是**如何更正上面的代码以获得更精确的分桶**。也就是说，中的每一行都`x.agg`应该包含精确的`100`单位`v`，而不是像上面的情况那样近似。例如，第一行包含前 17 行的聚合，`x`其中对应 98 个单位`v`。下一行（第 18 行）包含 5 个单位，`v`并且完全包含在下一个存储桶中。我想要实现的是将第 18 行的 2 个单元分配给第一个存储桶，将剩余的 3 个单元分配给下一个存储桶。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:15:08.373

如果您正在寻找精确的分桶，我假设 p 的值对于 2 个“拆分”是相同的，即在您的示例中，进入第一个桶的第 18 行的 2 个单位的 p 值是 9.954638

有了上述假设，您可以对非超大型数据集进行以下操作。

```
> set.seed(12345)
> x <- data.frame(cbind(p=rnorm(100, 10, 0.1), v=round(runif(100, 1, 10))))
> z <- unlist(mapply(function(x,y) rep(x,y), x$p, x$v, SIMPLIFY=T)) 
```

这将创建一个向量，其中 p 的每个值对每一行重复 v 次，然后使用 unlist 将结果组合成单个向量。

在这个聚合是微不足道的使用`aggregate`函数之后

```
> aggregate(z, by=list((1:length(z)-0.5)%/%100), FUN=mean)
  Group.1         x
1       0  9.999680
2       1 10.040139
3       2  9.976425
4       3 10.026622
5       4 10.068623
6       5  9.982733 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:04:49.253

这是另一种无需重复的方法`p` `v`。我的理解是，它超过 100 的地方（见下文）

```
18  9.954638  5  98
19  9.958256  9 107 
```

应改为：

```
18    9.954638  5  98
19.1  9.958256  2 100 # ---> 2 units will be considered with previous group
19.2  9.958256  7 107 # ----> remaining 7 units will be split for next group 
```

**编码：**

```
n <- 100
# get cumulative sum, an id column (for retrace) and current group id
x <- transform(x, cv = cumsum(x$v), id = seq_len(nrow(x)), grp = cumsum(x$v) %/% n)

# Paste these two lines in R to install IRanges
source("http://bioconductor.org/biocLite.R")
biocLite("IRanges")

require(IRanges)
ir1 <- successiveIRanges(x$v)
ir2 <- IRanges(seq(n, max(x$cv), by=n), width=1)
o <- findOverlaps(ir1, ir2)

# gets position where multiple of n(=100) occurs
# (where we'll have to do something about it)
pos <- queryHits(o)
# how much do the values differ from multiple of 100?
val <- start(ir2)[subjectHits(o)] - start(ir1)[queryHits(o)] + 1
# we need "pos" new rows of "pos" indices
x1 <- x[pos, ]
x1$v <- val # corresponding values
# reduce the group by 1, so that multiples of 100 will
# belong to the previous row
x1$grp <- x1$grp - 1
# subtract val in the original data x
x$v[pos] <- x$v[pos] - val
# bind and order them    
x <- rbind(x1,x)
x <- x[with(x, order(id)), ]
# remove unnecessary entries
x <- x[!(duplicated(x$id) & x$v == 0), ]
x$cv <- cumsum(x$v) # updated cumsum

x$id <- NULL
require(data.table)
x.dt <- data.table(x, key="grp")
x.dt[, list(res = sum(p*v)/sum(v), cv = tail(cv, 1)), by=grp] 
```

在您的数据上运行：

```
#    grp       res  cv
# 1:   0 10.037747 100
# 2:   1  9.994648 114 
```

在@geektrader 的数据上运行：

```
#    grp       res  cv
# 1:   0  9.999680 100
# 2:   1 10.040139 200
# 3:   2  9.976425 300
# 4:   3 10.026622 400
# 5:   4 10.068623 500
# 6:   5  9.982733 562 
```

这是一个相对大数据的基准：

```
set.seed(12345)
x <- data.frame(cbind(p=rnorm(1e5, 10, 0.1), v=round(runif(1e5, 1, 10))))

require(rbenchmark)
benchmark(out <- FN1(x), replications=10)

#            test replications elapsed relative user.self
# 1 out <- FN1(x)           10  13.817        1    12.586 
```

1e5 行大约需要**1.4 秒**。

# spring - 在 Spring MVC 中初始化应用程序范围的 bean

> ID：15095103
> 
> 赞同：1
> 
> 时间：2013-02-26T17:09:54.117
> 
> 标签：spring, web-applications, spring-mvc

我想为应用程序中的所有下拉列表初始化一个 bean 或 ArrayList，例如键值对列表，这些下拉列表可以在应用程序范围内的会话中使用。并且希望在应用程序启动期间发生。我尝试实现 ServletContextListener 并将 bean 添加到上下文中，但它不起作用。

关于如何实现这一目标的任何建议。谢谢。

拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:41:28.597

定义一个常规（单例）Spring bean 并在构造函数或 @PostConstruct 方法中初始化您的值：

```
import javax.annotation.PostConstruct;
@Component
public class AppBean {

@PostConstruct
protected void init() {
    // executed after dependencies have been injected. initialize values here
}

} 
```

有关更详细的示例，请参见[http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/)

# php - 在序列号字符串（第 2、第 8、第 3、第一个等）上拆分地址字符串

> ID：15095115
> 
> 赞同：2
> 
> 时间：2013-02-26T17:10:44.560
> 
> 标签：php, regex, string, split

我的任务是标准化一些地址信息。为了实现这个目标，我将地址字符串分解为粒度值（我们的地址架构与[Google 的格式](https://developers.google.com/maps/documentation/geocoding/#Types)***非常***相似）。

**到目前为止的进展：**
我正在使用 PHP，目前正在打破 Bldg、Suite、Room# 等...信息。*在我遇到Floors*
之前，一切都很顺利。 大多数情况下，楼层信息表示为*"Floor 10"*或*"Floor 86"*。很好很容易。 对于这一点的一切，我可以简单地打破字符串上的字符串（*"room"*，*"floor"*等..）

 *****问题：**
但后来我注意到我的测试数据集中有一些东西。在某些情况下，楼层的表示更像*"2nd Floor"*。
这让我意识到我需要为FLOOR 信息的***大量变化做好准备。***
有*“3rd Floor”*、*“22nd floor”*和*“1ST FLOOR”*等选项。那么拼出诸如*“十二楼”*之类的变体呢？
男人！！这很快就会变得一团糟。

**我的目标：**
我***希望***有人知道图书馆或*已经*解决了这个问题的东西。
不过，在现实中，我会非常**高兴**有一些好的建议/指导，说明如何优雅地处理根据如此多样化的标准拆分字符串（注意避免误报，例如*"3rd St"*）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:46:28.240

I would start by reading up on regex in PHP. For example:

```
$floorarray = preg_split("/\sfloor\s/i", $floorstring) 
```

Other useful functions are `preg_grep`, `preg_match`, etc

Edit: added a more complete solution.

This solution takes as an input a string describing the floor. It can be of various formats such as:

*   Floor 102
*   Floor One-hundred two
*   Floor One hundred and two
*   One-hundred second floor
*   102nd floor
*   102ND FLOOR
*   etc

Until I can look at an example input file, I am just guessing from your post that this will be adequate.

```
<?php

$errorLog = 'error-log.txt'; // a file to catalog bad entries with bad floors

// These are a few example inputs
$addressArray = array('Fifty-second Floor', 'somefloor', '54th floor', '52qd floor',
  'forty forty second floor', 'five nineteen hundredth floor', 'floor fifty-sixth second ninth');

foreach ($addressArray as $id => $address) {
  $floor = parseFloor($id, $address);
  if ( empty($floor) ) {
    error_log('Entry '.$id.' is invalid: '.$address."\n", 3, $errorLog);
  } else {
    echo 'Entry '.$id.' is on floor '.$floor."\n";
  }
}

function parseFloor($id, $address)
{
  $floorString = implode(preg_split('/(^|\s)floor($|\s)/i', $address));

  if ( preg_match('/(^|^\s)(\d+)(st|nd|rd|th)*($|\s$)/i', $floorString, $matchArray) ) {
    // floorString contained a valid numerical floor
    $floor = $matchArray[2];
  } elseif ( ($floor = word2num($floorString)) != FALSE ) { // note assignment op not comparison
    // floorString contained a valid english ordinal for a floor
    ; // No need to do anything
  } else {
     // floorString did not contain a properly formed floor
    $floor = FALSE;
  }
  return $floor;
}

function word2num( $inputString )
{
  $cards = array('zero',
    'one',    'two',    'three',    'four',     'five',    'six',     'seven',     'eight',    'nine',     'ten',
    'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen', 'twenty');
  $cards[30] = 'thirty';  $cards[40] = 'forty';  $cards[50] = 'fifty'; $cards[60] = 'sixty';
  $cards[70] = 'seventy'; $cards[80] = 'eighty'; $cards[90] = 'ninety'; $cards[100] = 'hundred';
  $ords  = array('zeroth',
    'first',    'second',  'third',      'fourth',     'fifth',     'sixth',     'seventh',     'eighth',     'ninth',      'tenth',
    'eleventh', 'twelfth', 'thirteenth', 'fourteenth', 'fifteenth', 'sixteenth', 'seventeenth', 'eighteenth', 'nineteenth', 'twentieth');
  $ords[30] = 'thirtieth';  $ords[40] = 'fortieth';  $ords[50] = 'fiftieth';  $ords[60] =  'sixtieth';
  $ords[70] = 'seventieth'; $ords[80] = 'eightieth'; $ords[90] = 'ninetieth'; $ords[100] = 'hundredth';

  // break the string at any whitespace, dash, comma, or the word 'and'
  $words = preg_split( '/([\s-,](?!and\s)|\sand\s)/i', $inputString );

  $sum = 0;
  foreach ($words as $word) {
    $word = strtolower($word);
    $value = array_search($word, $ords); // try the ordinal words
    if (!$value) { $value = array_search($word, $cards); } // try the cardinal words
    if (!$value) {
      // if temp is still false, it's not a known number word, fail and exit
      return FALSE;
    }
    if ($value == 100) { $sum *= 100; }
    else { $sum += $value; }
  }

  return $sum;
}
?> 
```

In the general case, parsing words into numbers is not easy. The best thread that I could find that discusses this is [here](https://stackoverflow.com/questions/70161/how-to-read-values-from-numbers-written-as-words). It is not nearly as easy as the inverse problem of converting numbers into words. My solution only works for numbers <2000, and it liberally interprets poorly formed constructs rather than tossing an error. Also, it is not resilient against spelling mistakes at all. For example:

*   forty forty second = 82
*   five nineteen hundredth = 2400
*   fifty-sixth second ninth = 67

If you have a lot of inputs and most of them are well formed, throwing errors for spelling mistakes is not really a big deal because you can manually correct the short list of problem entries. Silently accepting bad input, however, could be a real problem depending on your application. Just something to think about when deciding if it is worth it to make the conversion code more robust.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:16:32.647

首先，您需要详细列出所有可能的输入格式，并决定您想要多深。如果您认为拼写变体是无效的情况，您可以应用简单的正则表达式来捕获数字并检测令牌（房间、地板......）***

# android - Flurry 集成到 Android 和 iOS 上的同一应用程序中

> ID：15095116
> 
> 赞同：12
> 
> 时间：2013-02-26T17:10:47.297
> 
> 标签：android, ios, analytics, flurry

我有一款应用程序可在 Android 商店和 Apple 商店购买。我想将 Flurry 分析集成到其中。在 Flurry 管理站点上，我没有创建 1 个同时针对 Android 和 iOS 的应用程序的选项。

我是否可以同时获取 Flurry SDK 并在我的代码中使用相同的 API 密钥，以便 Android 和 iOS 版本都登录到相同的配置文件，即使配置文件设置为针对 iOS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-08T09:24:08.207

我们已经进行了两次 Flurry Analytics 试验，效果很好。

我们创建了一个 Flurry iOS 项目并使用单独的 iOS 和 Android 应用程序登录到它。我们创建了一个 Flurry Android 项目并使用单独的 iOS 和 Android 应用程序登录到它。在这两种情况下，都使用了实际设备。

*   会话，活跃用户工作
*   版本报告为相同
*   观众 | 语言被报告为相同
*   自定义事件报告为相同的内部 Flurry ID：s
*   设备型号和固件版本的技术 Web 视图显示 iOS 和 Android 条目。

Flurry Crash Analytics 可能会是一个问题，例如只有一个 desym 文件。但是我们无论如何都不能在 iOS 上使用 Flurry Crash Analytics，所以只要 Flurry 项目是一个 Android 项目就应该没问题。

唯一的缺点是它没有得到 Flurry 的官方支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T17:16:46.723

尽管我从未这样做过，而且我不确定是否可以这样做，因为 Flurry 希望您在设置应用程序时指定一个平台，但我会说这是错误的想法。我会快速创建两个应用程序并保持它们的独特性。事实上，我个人为我的 iOS 应用程序创建了两个通用的应用程序，如果在 iPad 和 iPhone 上启动同一个应用程序，只需注册一个不同的快速键。如果您尝试组合它们，您可能会错过重要的设备信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T17:19:49.730

为此，您必须快速创建 2 个不同的应用程序。

# javascript - 谷歌地图中的交互式圆圈，随着半径的变化而变化

> ID：15095118
> 
> 赞同：6
> 
> 时间：2013-02-26T17:10:58.050
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我想要一个用于谷歌地图的交互式圆圈，当我改变滑块的半径时它会增加或减少。
当我增加半径时它工作正常，但在减小半径时它不会改变（减少）地图中的圆圈

```
$(function() {
        $("#slide").slider({
               orientation: "horizontal",
               range: "min",
               max: 10000,
               min: 500,
               value: 500,
               slide: function( event, ui ) {
                            drawCircle(ui.value);
                                            }
                            });
             });

function drawCircle(rad){
      circle = new google.maps.Circle({
              strokeColor: "#FF0000",
              strokeOpacity: 0.8,
              strokeWeight: 2,
              fillColor: "#FF0000",
              fillOpacity: 0.35,
              map: myMap,
              radius: rad });

      circle.bindTo('center', marker, 'position');
                        } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-26T17:31:43.103

创建一次圆圈，而不是在每个滑块移动事件上。然后在滑块更改时简单地更新圆的半径。

未经测试的代码：

```
var circle; //global variable, consider adding it to map instead of window

$(function() {
  circle = new google.maps.Circle({
    strokeColor: "#FF0000",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.35,
    map: myMap,
    radius: 500
  });
  circle.bindTo('center', marker, 'position');

  $( "#slide" ).slider({
    orientation: "horizontal",
    range: "min",
    max: 10000,
    min: 500,
    value: 500,
    slide: function( event, ui ) {
     updateRadius(circle, ui.value);
    }
  });
});

function updateRadius(circle, rad){
  circle.setRadius(rad);
} 
```

# c# - 使用 AJAX 刷新新内容

> ID：15095120
> 
> 赞同：1
> 
> 时间：2013-02-26T17:11:09.540
> 
> 标签：c#, asp.net, ajax, asp.net-ajax

在此示例中，我希望在按下 ID 为“PostCommentsButton”的按钮时触发此 ContentTemplate 并在 ID 为“CommentListView”的 ListView 中再次迭代所有内容。但这在这里不起作用。我想念什么？

在此示例中，我从文本字段中获取新文本，并在后面的代码中将这些来自文本字段的新内容放入 ado.net 中，并将这些新内容保存在数据库中。问题是当按下 UpdatePanel 中的按钮时，新信息没有与其他内容一起出现在列表中。只有当我重新启动页面时它才会出现。我希望再次迭代 UpdatePanel 中的 ListView，以便在按下按钮时使用 AJAX 从文本字段中获取这些新内容。我应该怎么办 ？

asp代码：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="PostCommentsButton" />
                    </Triggers>
                    <ContentTemplate>
                        <asp:ListView ID="CommentListView" runat="server" DataSource= '<%# Eval("Comments") %>'>
                            <ItemTemplate>
                                <div class="postComments">
                                    <span class="authorComment"><%# Eval("Author") %></span>
                                    :
                                    <span class="commentContent"><%# Eval("Message") %></span>
                                </div>
                            </ItemTemplate>
                        </asp:ListView>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

后面的代码：

```
 protected void PostsListView_ItemCommand(object sender, ListViewCommandEventArgs e)
    {

        //commandName is for recognize the clicked button
        if (e.CommandName == "postComment")
        {
            //get the comment from textbox from current listview iteration
            BlogProfileEntities blogProfile = new BlogProfileEntities();
            var commentBox = e.Item.FindControl("AddCommentTextbox") as TextBox;
            var hiddenFieldPostID = e.Item.FindControl("CurrentPostIDHiddenField") as HiddenField;
            string text = commentBox.Text;
            var postID = hiddenFieldPostID.Value;
            Comment newComment = new Comment()
            {
                Message = text,
                PostID = int.Parse(postID),
                Author = Membership.GetUser().UserName
            };

            blogProfile.Comments.Add(newComment);
            blogProfile.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:29:28.057

我在您的示例中没有看到文本框。如果文本框不在列表视图回发时调用的更新面板中，我认为您不会获得当前值。我怀疑如果你在你的 commentBox 变量上设置一个断点，你会看到它返回为 Nothing。如果这不是您的完整代码，请发布所有内容。

# c - MPI 意外输出

> ID：15095121
> 
> 赞同：0
> 
> 时间：2013-02-26T17:11:11.777
> 
> 标签：c, parallel-processing, mpi, ubuntu-10.04

我正在阅读和练习教程中的 MPI 程序。在那里，我看到了一个查找进程等级的示例。但是同样的例子在我的机器上给出了不同的输出（Ubuntu 10.04）。这是程序

```
 #include <stdio.h>
 #include <mpi.h> 
main(int argc, char **argv)
{
  int ierr, num_procs, my_id;

  ierr = MPI_Init(&argc, &argv);

  /* find out MY process ID, and how many processes were started. */

  ierr = MPI_Comm_rank(MPI_COMM_WORLD, &my_id);
  ierr = MPI_Comm_size(MPI_COMM_WORLD, &num_procs);

  printf("Hello world! I'm process %i out of %i processes\n", 
     my_id, num_procs);

  ierr = MPI_Finalize();
} 
```

根据教程的预期输出是

预期输出：

```
Hello world! I'm process 0 out of 4 processes.
Hello world! I'm process 2 out of 4 processes.
Hello world! I'm process 1 out of 4 processes.
Hello world! I'm process 3 out of 4 processes. 
```

我得到的输出

```
Hello world! I'm process 0 out of 1 processes
Hello world! I'm process 0 out of 1 processes
Hello world! I'm process 0 out of 1 processes
Hello world! I'm process 0 out of 1 processes 
```

我的机器使用 intel i3、Dell Inspiron 并且有 Ubuntu 10.04 OS。帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:42:27.023

我刚刚在我的 Ubuntu 上编译并运行了你的程序：

```
tom@tom-ThinkPad-T500:~/MPI_projects/Start/net2/net2/bin/Debug$ mpirun -n 6 ./output
Hello world! I'm process 3 out of 6 processes
Hello world! I'm process 4 out of 6 processes
Hello world! I'm process 0 out of 6 processes
Hello world! I'm process 2 out of 6 processes
Hello world! I'm process 1 out of 6 processes
Hello world! I'm process 5 out of 6 processes 
```

输入包含可执行文件的文件夹并运行：

`mpirun -np 2 ./output`

或者

`mpirun -np 6 ./output`

标志 -np 修改被调用进程的数量（[http://linux.die.net/man/1/mpirun](http://linux.die.net/man/1/mpirun)）。

您也可以在`mpirun`没有任何标志的情况下运行以显示许多有用的信息。

另一个有趣的命令是`mpirun -info`，它将显示打印 MPI 构建信息。

这是我输出的第一部分：

```
tom@tom-ThinkPad-T500:~/MPI_projects/Start/net2/net2/bin/Debug$ mpirun -info
HYDRA build details:
Version:                                 1.4.1
Release Date:                            Wed Aug 24 14:40:04 CDT 2011 
```

最后的手段是使用例如以下命令重新安装或更新您的 MPI：`sudo apt-get install libcr-dev mpich2 mpich2-doc`

# ember.js - Ember.js 版本升级后数据转换

> ID：15095132
> 
> 赞同：2
> 
> 时间：2013-02-26T17:11:34.590
> 
> 标签：ember.js, ember-data

所以我正在编写一个 POC 应用程序，在将 Ember 库升级到 RC1 后遇到了问题。我注意到，当我在新版本中转换到路由时，对象的字符串化版本似乎出现在 URL 中，就像这样......

```
http://localhost:3000/posts/<App.Post:ember269:511401b8c589137c34000001> 
```

当转换为这样时，路由会成功运行，但显然尝试第二次访问这样的 URL 是行不通的。所以我想我会编辑我的代码以转换到 ID。

对于我的编辑路线，我有以下保存事件。

```
 events: {
    save: function(post){
      post.one('didUpdate', this, function(){
        this.transitionTo('posts.show', post);
      });
      post.get('transaction').commit();
    }
  } 
```

当转换发生时，这会产生一个类似上面的 URL。所以我将其更正为以下内容...

```
 events: {
    save: function(post){
      post.one('didUpdate', this, function(){
        this.transitionTo('posts.show', post.id);
      });
      post.get('transaction').commit();
    }
  } 
```

这会产生正确的 URL 格式，但 show 路由不会产生任何输出。（请注意，当我*第一次*以正确的格式访问 URL 时，显示输出确实会产生输出，而不是当我从编辑路由*转换到它时）。*

```
App.PostsShowRoute = Em.Route.extend({
  model: function(params){
    return App.Post.find(params.id);
  },
  setupController: function(controller, model){
    controller.set('content', model);
  }
}); 
```

所以我很困惑。对此问题的原因的任何见解（以及如果您知道 RC 产生它的原因）将不胜感激。帮我把蛋糕也吃掉。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:13:06.810

从你的`App.PostsShowRoute`我可以猜到你设置你的路线映射是这样的：

```
App.Router.map(function() {
  this.resource('posts', function() {
   this.route('show', { path:'/:id' });
  });
}); 
```

您需要更改`:id`为`:post_id`：

```
App.Router.map(function() {
 this.resource('posts', function() {
   this.route('show', { path:'/:post_id' });
 }); 
```

});

现在，由于您使用的是 Ember 约定，您可以通过删除整个约定来利用它，`App.PostsShowRoute = Em.Route.extend ...`因为 Ember 可以为您处理它。

并使用正确的第一种方法：

```
events: {
  save: function(post){
    post.one('didUpdate', this, function(){
      this.transitionTo('posts.show', post);
    });
    post.get('transaction').commit();
  }
} 
```

# python - PyQt：选择后 QtGui.QFileDialog.getSaveFileName 不会关闭

> ID：15095133
> 
> 赞同：3
> 
> 时间：2013-02-26T17:11:35.927
> 
> 标签：python, pyqt, pyqt4, qfiledialog

在我的 PyQt4 应用程序中，有一个功能允许用户保存**avi**文件。为此，在主窗口中实现了**saveMovie方法：**

```
def saveMovie(self):
    """ Let the user make a movie out of the current experiment. """
    filename = QtGui.QFileDialog.getSaveFileName(self, "Export Movie", "",
                                                 'AVI Movie File (*.avi)')

    if filename != "":
        dialog = QtGui.QProgressDialog('',
                                       QtCore.QString(),
                                       0, 100,
                                       self,
                                       QtCore.Qt.Dialog |
                                       QtCore.Qt.WindowTitleHint)

        dialog.setWindowModality(QtCore.Qt.WindowModal)
        dialog.setWindowTitle('Exporting Movie')
        dialog.setLabelText('Resampling...')

        dialog.show()

        make_movie(self.appStatus, filename, dialog)

        dialog.close() 
```

我的想法是使用**QProgressDialog**来显示视频编码工作是如何进行的。
然而，选择文件名后，**QFileDialog**不会消失，整个应用程序保持无响应，直到**make_movie**函数完成。

我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:33:53.803

经验教训：如果您有一些长时间运行的操作要做——例如，读取或写入一个**大**文件，请将它们移动到另一个线程，否则它们将冻结 UI。

因此，我创建了 , 的子类`QThread`，`MovieMaker`其`run`方法封装了之前实现的功能`make_movie`：

```
class MovieMaker(QThread):
    def __init__(self, uAppStatus, uFilename):
        QtCore.QThread.__init__(self, parent=None)
        self.appStatus = uAppStatus
        self.filename = uFilename

    def run(self):
        ## make the movie and save it on file 
```

让我们回到`saveMovie`方法。`make_movie`在这里，我用以下代码替换了原来的调用：

```
self.mm = MovieMaker(self.appStatus,
                     filename)

self.connect(self.mm, QtCore.SIGNAL("Progress(int)"),
             self.updateProgressDialog)

self.mm.start() 
```

请注意我是如何定义一个新**信号**的`Progress(int)`。
这样的信号由`MovieMaker`线程发出以更新**QProgressDialog**用于向用户显示电影编码工作的进展情况。

# java - 当基类需要捕获异常时，在派生类构造函数中使用 Super

> ID：15095138
> 
> 赞同：1
> 
> 时间：2013-02-26T17:11:51.380
> 
> 标签：java, exception, constructor, derived-class, super

我正在尝试将 B 类派生到 Java 中的新 C 类。基类构造函数要求必须抛出或捕获未报告的异常。但是如果我尝试将 super(..) 放在 try/catch 中，那么我会被告知对 super 的调用必须是构造函数中的第一条语句。有谁知道解决这个问题的方法？

```
public class C extends B
{
   //Following attempt at a constructor generates the error "Undeclared exception E; must be caught or declared
   //to be thrown
    public C(String s)
    { 
         super(s);
    }

    //But the below also fails because "Call to super must be the first statement in constructor"
    public C(String s)
    {
         try
         {
              super(s);
         }
          catch( Exception e)
         {
         }
     }
 } 
```

非常感谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:14:39.127

您始终可以使用throws 子句**声明**`Exception`in 构造函数签名。

```
public C(String s) throws WhatEverException
    { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:16:03.540

我知道的唯一方法是在子类构造函数中也抛出异常。

```
public class B {
    public B(String s) throws E {
       // ... your code .../
    }
}

public class C extends B {
   public C(String s) throws E { 
       super(s);
   } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:16:58.323

如果不在第一条语句中调用超级构造函数，就无法定义构造函数。如果有可能你可以抛出运行时异常，那么你不需要编写 try/catch 块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:32:08.820

那么，您需要了解三件事。

1.  在子构造函数中 super 必须是第一条语句，
2.  如果父类方法抛出异常，则子类可以选择捕获它或将异常抛出回父类。
3.  您不能缩小子类中异常的范围。

例子 -

```
public class Parent {

public Parent(){
    throw new NullPointerException("I am throwing exception");
}

public void sayHifromParent(){
    System.out.println("Hi");
}
}

public class Child extends Parent{

public Child()throws NullPointerException{

    super();

}
public static void main(String[] args) {
    Child child = new Child();
    System.out.println("Hi");
    child.sayHifromParent();

}

} 
```

# css - CSS3 过渡（背景颜色）拒绝在 Firefox 中工作

> ID：15095142
> 
> 赞同：2
> 
> 时间：2013-02-26T17:11:57.930
> 
> 标签：css, css-transitions

这很奇怪，我可能在[build.advocateddaily.com](http://build.advocatedaily.com)上的主要导航按钮中遗漏了一些明显的东西，在悬停时与它们相关联的 CSS 背景颜色过渡。

它在 Chrome 中有效，但在 FX 中它只是拒绝遵守。有趣的是，当我打开子菜单并将鼠标悬停在元素上时，背景颜色会使用过渡**恢复正常。**

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:19:53.690

消除

```
position: relative; 
```

来自.mainnav li，在这里工作

Firefox 有时会很有趣。

# assembly - ACALL的寻址方案

> ID：15095147
> 
> 赞同：0
> 
> 时间：2013-02-26T17:12:14.977
> 
> 标签：assembly, 8051

为什么用于计算由`ACALL`（来自intel 8051控制器的指令集）调用的子程序地址的机制如此复杂。他们为什么不像我们在 LCALL 指令中那样直接输入指令的地址并跳转到该地址。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:19:21.200

`LCALL`作为 3 字节指令，您将获得一个操作码和 16 位绝对地址。`ACALL`作为适合 2 个字节的较短版本存在。简单的方法是只使用 8 位作为地址，但工程师决定允许 11 位用于更大范围，前 3 位编码在操作码本身中。即使考虑到通常很小的 8051 程序，8 位也可能过于受限。

可以说编码方案并不是非常复杂（在微控制器中很少有），您只需将地址从 3 个部分放在一起：

`pc`=`[top 5 bits of current program counter] [3 bits from the opcode] [8 bits from the operand]`

长话短说：如果你的函数在 a 的范围内`ACALL`，你可以节省一个字节。您的汇编程序可能能够在`ACALL`和`LCALL`自动之间进行选择。

# awk - 计算带有标题的列数据的平均值

> ID：15095148
> 
> 赞同：3
> 
> 时间：2013-02-26T17:12:15.240
> 
> 标签：awk

例如，我有如下数据：

```
Flats 2b 
01/1991, 3.45
01/1992, 4.56
01/1993, 4.21
01/1994, 5.21
01/1995, 7.09
01/2013, 6.80
Eagle 2
01/1991, 4.22
01/1992, 6.32
01/1993, 5.21
01/1994, 8.09
01/1995, 7.92
01/2013, 6.33 
```

我正在尝试计算第 2 列的平均值，以便我想要的输出最好看起来像这样：

```
Flats 2b
Avg = 4.67
Eagle 2
Avg = 5.26 
```

甚至更简单，看起来像这样没有标题：Avg = 4.67 Avg = 5.26

依此类推...因为输入文件充满了许多标题，其中包含如上所示的数据。

我试图做模式匹配选项，并使用类似这样的 NR 作为 awk 单线器没有成功：

```
awk '/01/1991,/01/1993 {sum+=$2; cnt+=1} {print "Avg =" sum/cnt}' myfile.txt 
```

对于每个气象塔，我分别获得了 1991、1992 和 1993 年的平均值，但不是我想要的平均值。
非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:50:54.467

如果您只想考虑 1991-1993 年

```
#! /usr/bin/awk -f

# new header, print average if exists, reset values
/[a-zA-Z]/ {
    if (cnt > 0) {
        print header;
        printf("Avg = %.2f\n", sum/cnt);
    }
    header=$0; sum=0; cnt=0;
}

# calculate average
/^01\/199[123]/ { sum+=$2; cnt++; }

# print last average
END {
    if (cnt > 0) {
        print header;
        printf("Avg = %.2f\n", sum/cnt);
    }
} 
```

这会查找 awk 脚本查找标题，打印平均值（如果有），然后重置所有变量以进行下一次平均值计算。如果它找到一个数据行，它会在以后计算平均值所需的总和。如果读取最后一行，则打印最终平均值。

该脚本仅考虑 1991 年至 1993 年（包括 1991 年）。如果您想包含更多年份，您可以复制计算行或使用 or 运算符添加多个年份`||`

```
# calculate average
/^01\/199[0-9]/ || /^01\/200[0-9]/ { sum+=$2; cnt++; } 
```

这考虑了所有 1990 年代和 2000 年代。

如果您不想打印标题，请删除相应的行`print header`。

您将此 awk 脚本称为

```
awk -f script.awk myfile.txt 
```

# vim - 如何从vimscript中的字符串中提取文件名？

> ID：15095149
> 
> 赞同：0
> 
> 时间：2013-02-26T17:12:15.540
> 
> 标签：vim, arguments, filenames

假设我们在 vimscript 中给出了这个字符串：

`"/home/Linus Torvalds/.vim/bundle/vim-autoformat/formatters/tidy -q --show-errors 0 --show-warnings 0 --indent auto --indent-spaces 2 --vertical-space yes --tidy-mark no --wrap 68"`.

我们如何提取文件名部分？在这种情况下，这将是：

`"/home/Linus Torvalds/.vim/bundle/formatters/tidy"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:43:18.010

如果您可以保证路径本身没有破折号（`-`），我会这样做：

```
matchstr(input_string,'^.\{-}\ze -') 
```

解释：从字符串的开头 ( `^`) 非贪婪地匹配任何字符 ( `.\{-}`) 直到第一次出现空格后跟破折号 ( `\ze -`)。

或者您可以匹配到第一个破折号，然后使用`substitute()`命令修剪任何尾随空格，这会不太简洁，但可能更具可读性。

# icloud - iCloud 数据传输到其他云

> ID：15095151
> 
> 赞同：0
> 
> 时间：2013-02-26T17:12:19.923
> 
> 标签：icloud

我现在别无选择，只能采用 iCloud。在不久的将来，我想建立自己的云服务。如果应用程序将所有数据从 iCloud 传输到我自己的云，是否有任何问题？

*   当然只有与我的应用程序相关的数据。
*   经用户许可后。

苹果对此持积极态度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:54:50.973

如果您的意思是，Apple 是否会批准将用户的 iCloud 数据传输到其他在线服务的商店应用程序，像往常一样，我们所能做的就是尝试评估可能性。

*   Apple 的指导方针都没有暗示应用程序不得使用非 iCloud 服务。
*   他们也没有暗示将数据从一项服务移动到另一项服务存在任何问题，即使其中一项服务是 iCloud。
*   Apple*不会*善待在用户不知情的情况下将用户数据传输到在线存储的应用程序。假设您向用户明确说明您在做什么，这可能不是问题，但用户应该有机会选择退出您的服务。

根据目前可用的信息，只要您的应用程序清楚发生了什么，您的建议**可能是可以的。**试图过分预测苹果的应用程序批准行为是不明智的。他们明天可能会改变他们的政策，或者他们可能会因为之前没有说明的原因决定拒绝你的应用程序。不过，目前似乎可以接受这样的转换服务。

# sql - 在 SQL Server 中加入子查询的效率

> ID：15095158
> 
> 赞同：9
> 
> 时间：2013-02-26T17:12:44.323
> 
> 标签：sql, sql-server, join, subquery, left-join

我在 SQL Server 2008 R2 中有一个客户和订单表。两者都有关于客户 ID 的索引（称为`id`）。我需要返回客户表中所有客户的详细信息以及订单表中的信息，例如第一个订单的详细信息。

我目前在订单表的子查询中加入了我的客户表，子查询返回我需要的有关订单的信息。例如：

```
SELECT c.id
        ,c.country      
        ,First_orders.product
        ,First_orders.order_id
FROM customers c

LEFT JOIN   SELECT( id, 
                    product 
            FROM (SELECT    id
                            ,product
                            ,order_id
                            ,ROW_NUMBER() OVER (PARTITION BY id ORDER BY Order_Date asc) as order_No 
                        FROM orders) orders
            WHERE Order_no = 1) First_Orders
ON c.id = First_orders.id 
```

我对 SQL 很陌生，想了解我是否有效地执行此操作。我最终在一个选择查询中将很多这样的子查询加入到客户表中，并且可能需要数十分钟才能运行。

那么我这样做是有效的还是可以改进的？例如，我不确定我在订单表中的 id 索引是否有任何用途，也许我可以通过首先创建子查询中内容的临时表并在 id 上创建唯一索引来加快查询速度临时表，所以 SQL Server 知道`id`现在是一个唯一列，然后将我的客户表加入这个临时表？我通常在客户和订单表中有一两百万行。

提前谢谢了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:17:05.173

您可以删除其中一个子查询以提高效率：

```
SELECT c.id
        ,c.country      
        ,First_orders.product
        ,First_orders.order_id
FROM customers c
   LEFT JOIN  (SELECT id
                    ,product
                    ,order_id
                    ,ROW_NUMBER() OVER (PARTITION BY id ORDER BY Order_Date asc) as order_No 
               FROM orders) First_Orders
     ON c.id = First_orders.id AND First_Orders.order_No = 1 
```

在您的上述查询中，您需要小心放置括号的位置，因为我认为它不会起作用。此外，您在结果中返回产品，但不包括在嵌套子查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:16:25.983

对于刚刚学习 SQL 的人来说，您的查询看起来相当不错。

客户索引可能会也可能不会用于查询——您需要查看执行计划。索引 on`orders(id, order_date)`可以非常有效地用于该`row_number`功能。

一条评论是关于字段的命名。该字段`orders.id`不应是客户 ID。这应该类似于“orders.Customer_Id”。保持跨表的命名系统一致将在未来帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-18T13:33:06.173

试试这个...它很容易理解

```
;WITH cte
AS (
    SELECT id
        ,product
        ,order_id
        ,ROW_NUMBER() OVER (
            PARTITION BY id ORDER BY Order_Date ASC
            ) AS order_No
    FROM orders
    )
SELECT c.id
    ,c.country
    ,c1.Product
    ,c1.order_id
FROM customers c
INNER JOIN cte c1 ON c.id = c1.id
WHERE c1.order_No = 1 
```

# three.js - 三点光源

> ID：15095160
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:12:50.693
> 
> 标签：three.js

我创建了一个带高度的 THREE.PlaneGeometry，在最高点找到一个 THREE.PointLight，但这会照亮从该点看不到的区域。为什么？我只想要从一个点看到的区域的光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:53:22.367

默认情况下，表面上任何给定点的外观都是使用灯光、它们的属性，当然还有材质属性来计算的——它不考虑场景的其余部分，因为这在计算上会非常昂贵。各种光线追踪渲染器都可以做到这一点，但它们真的很慢，而且这不是 WebGL 和 Three.js 的工作方式。

你想要的是阴影。Three.js 能够使用 Shadow Map 方法渲染阴影。在 net 和 Three.js 示例文件夹中都有各种使用阴影贴图的示例。

不过要提醒一句，如果你没有很好地掌握基础知识，那么让阴影很好地工作可能会很困难——你可能需要做一些学习。如果没有正确配置和微调，阴影会减慢您的应用程序（特别是有许多灯光）并且看起来很丑。另外我认为阴影贴图只支持 SpotLight 和 DirectionalLight，PointLights 比较棘手。

# javascript - PhoneGap Windows Phone 8 - 从 www/ 文件夹访问资源

> ID：15095161
> 
> 赞同：1
> 
> 时间：2013-02-26T17:12:51.183
> 
> 标签：javascript, jquery, cordova, windows-phone-8

我正在Windows Phone 8 上的PhoneGap 项目上工作。我找不到`www/`在运行时从我的javascript 访问位于文件夹中的资源的解决方案。

我的项目看起来像：

```
- www/
 `- css/
 `- js/
   `- main.js
   `- data1.json
   `- data2.json
 `- index.html 
```

在我的脚本`main.js`中，我想加载`data1.json`或`data2.json`。

我尝试了许多不起作用的解决方案：

**来自 jquery 的 AJAX 函数**

```
this.op = (function() {
  var val = null;
  $.ajax({
    async: false,
    url: 'www/js/data1.json',
    success: function(data) {
      console.log('DATA: ' + data);
      val = JSON.parse(data);
    }
  });
  return val;
})(); 
```

**来自 PhoneGap 的[文件插件示例](http://docs.phonegap.com/en/2.4.0/cordova_file_file.md.html#FileReader)**

```
fileSystem.root.getFile("js/data1.json", null, gotFileEntry, fail); 
```

我还尝试通过使用列出根文件系统中的目录的函数来检查文件系统，这导致我出现以下情况：

```
`- /
  `- __Application Settings
  `- Microsoft
    `- Internet Explorer
      `- DCOM
  `- Shared
    `- Media
    `- ShellContent
    `- Transfers 
```

这些文件夹中的任何一个都指向`www/`或指向我的捆绑包。我找不到`*.json`动态加载文件的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:21:36.150

我的问题是使用亲属路径来访问我的文件。

我正在使用 requireJS 的插件来包含我的文件，但是这个插件为我的文件创建了可笑的亲属路径，例如 `app/../js/data1.json`.

现在效果很好。

编辑：我更改了插件中路径的计算以删除无用的目录更改，如下所示：

```
app/../js/data1.json 
```

变成

```
js/data1.json 
```

只需一个子字符串就足够了，因为每条路径都以相同的方式计算。

# c# - 在新进程中运行时窗口标题中的“无响应”

> ID：15095162
> 
> 赞同：14
> 
> 时间：2013-02-26T17:12:51.863
> 
> 标签：c#, multithreading, winforms, process, devexpress

我有一个**必须在 UI 线程上运行的长时间运行的方法。**(Devex - `gridView.CopyToClipboard()`)

我不需要 UI 在复制时做出响应，并且我添加了一个启动屏幕，这样用户就不会感到无聊。

当我运行这个程序时，一切都很好。

当我运行另一个程序时，麻烦就开始了，而该程序又启动了一个新进程并在其上运行该程序。复制标题几秒钟后显示（未响应）并且鼠标光标显示忙碌，它当然会在几秒钟内清除但我想摆脱它，因为它给用户一种误解的感觉程序有故障。

有没有办法设置我创建的流程的“超时”？

**编辑：**

主程序调用如下代码：

```
fillsProcess = new Process();
fillsProcess.StartInfo.FileName = Application.ExecutablePath;
fillsProcess.Start(); 
```

在 fillsProcess 中，当单击某个按钮时，将调用以下代码：

```
gridViewToCopy.CopyToClipboard(); 
```

这行代码需要一段时间来处理，几秒钟后，fillsProcess 的窗口看起来没有响应，因为此方法在 UI 线程上运行。

**编辑第二个：**

显然（而且真的很容易理解）

```
gridViewToCopy.CopyToClipboard(); 
```

不是导致此问题的唯一方法。许多 Devex 方法必须在 UI 线程上运行（例如数据排序、数据过滤）

因此，感谢任何提供特定解决方案（有效或无效）的人，但我原来的问题再次出现：

**有没有办法改变超时时间或以某种方式控制整个“无响应”惨败？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T09:01:03.677

您可以使用[`DisableProcessWindowsGhosting`](http://msdn.microsoft.com/en-us/library/ms648415.aspx)win32 功能：

```
[DllImport("user32.dll")]
public static extern void DisableProcessWindowsGhosting(); 
```

这实际上不会阻止窗口冻结，但会阻止标题中的“Not Respongind”文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:50:46.153

恐怕最简单的解决方案是`CopyToClipboard()`在你的 for 循环中创建你自己的地方，不时地做一个`Application.DoEvents`，这使 ui 线程保持响应。

我猜 DevExpress 的大多数许可证都有可用的源代码，所以如果有的话，你可能最多可以复制粘贴。

由于您知道数据，因此您可能可以比 DevExpress 使用的泛型更简单的过程。

像这样：

```
const int feedbackinterval = 1000;

private void btnCopy_Click(object sender, EventArgs e)
{
    StringBuilder txt2CB = new StringBuilder();
    int[] rows = gridView1.GetSelectedRows();

    if (rows == null) return;

    for (int n = 0; n < rows.Length; n++)
    {
        if ((n % feedbackinterval) == 0) Application.DoEvents();

        if (!gridView1.IsGroupRow(rows[n]))
        {
            var item = gridView1.GetRow(rows[n]) as vWorkOrder;
            txt2CB.AppendLine(String.Format("{0}\t{1}\t{2}",
            item.GroupCode, item.GroupDesc, item.note_no??0));
        }
     }
        Clipboard.SetText(txt2CB.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:03:03.880

这是因为您在主应用程序线程中同步调用了一个长时间运行的方法。由于您的应用程序正忙，它不会响应来自 Windows 的消息，并且在完成之前被标记为（未响应）。

要处理此问题，请异步复制，例如使用任务作为一种最简单的解决方案。

```
Task task = new Task(() =>
        {
            gridView.Enabled = false;
            gridView.CopyToClipboard();
            gridView.Enabled = true;
        });

        task.Start(); 
```

禁用您的网格，这样任何人都无法更改 GUI 中的值。您的应用程序的其余部分保持响应（可能有副作用！）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T09:57:08.490

您可以启动隐藏的过程，然后检查是否响应并在完成后将其重新显示......您的初始屏幕将显示其仍在“响应”。

```
 Process proc = new Process();
 proc.StartInfo.FileName = "<Your Program>.exe"

 proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

**编辑：** 您还可以创建一个 Timer 事件来监视其他进程并滚动您自己的超时逻辑

```
 DateTime dStartTime = DateTime.Now;
    TimeSpan span = new TimeSpan(0, 0, 0);
    int timeout = 30; //30 seconds        

    private void timer1_Tick(Object myObject, EventArgs myEventArgs)
    {
        while (span.Seconds < timeout)
        {
            Process[] processList = Process.GetProcessesByName("<YourProcess.exe>");
            if (processList.Length == 0)
            {
                //process completed
                timer1.Stop();
                break;
            }
            span = DateTime.Now.Subtract(dStartTime);
        }
        if (span.Seconds > timeout)
        {
            Process[] processList = Process.GetProcessesByName("<YourProcess.exe>");

            //Give it one last chance to complete
            if (processList.Length != 0)
            {
                //process not completed
                foreach (Process p in processList)
                {
                    p.Kill();
                }
            }
            timer1.Stop();
        }
    } 
```

**编辑2**

您也可以在窗口启动后使用 pInvoke "ShowWindow" 来完成隐藏和显示窗口

```
private const int SW_HIDE = 0x00;
private const int SW_SHOW = 0x05;

[DllImport("user32.dll")]
static extern bool ShowWindow(IntPtr hWnd, int nCmdShow); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T17:56:45.077

有几种可能的方法

*   隐藏操作期间的主窗体
*   以某种方式克隆/序列化控件并将其传递给具有另一个 UI 调度程序的线程
*   通过获取选定的单元格`gridView.GetSelectedCells()`，然后将其内容异步放入剪贴板

如果您将`GridView`库上传到某个地方会更有帮助，以便我们可以查看内部。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T18:40:09.880

我不清楚您的用户是否需要看到“无响应”的屏幕。如果没有必要，您可以尝试在该应用程序的主线程关闭后让该应用程序在后台运行；或者您可以最小化应用程序。

如果有必要查看应用程序并使其看起来正在运行，您是否可以分段您的“复制到剪贴板”功能，使其成为线程并接受数组或网格视图和索引范围。这样做的好处是您的从属进程上的主线程永远不会挂起。缺点是人们不喜欢在 C# 中使用线程和委托。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-12T15:50:59.343

好的，您所描述的“无响应”和窗口伪影只是在您的 UI 线程上运行长期活动的症状。UI 线程被阻塞，因此 UI 被冻结。这是无法避免的。老实说，你的应用程序看起来和它一样响应只是“幸运的”。

据我所知，这里描述的每一个解决方法都只是一个 hack 来捏造你的 UI 线程被冻结的事实。不要这样做。修复您的程序，使 UI 线程不会被冻结。

问问自己：我的用户*真的*需要从这个视图中复制所有行吗？可以以某种方式过滤数据以限制行吗？如果没有，有一个名为 MaxRowCopyCount 的属性会限制复制的行数 - 可以在不破坏工作流程的情况下利用它吗？

最后，如果所有其他方法都失败了，是否可以使用其他介质（可能是中间文件），*可以*在后台线程上将数据复制到其中？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T16:28:00.787

IsHungAppWindow 中记录的超时无法更改。不要使用全局状态来管理本地问题。

您必须优化导致无响应的部分。例如使用缓存、虚拟网格（DevExpress 称之为“服务器模式”）、分页、将排序委托给执行数据库查询（使用数据库索引）而不是内存排序（无索引）的 ibindinglistview 过滤器或[实现 IAsyncOperation您的剪贴板数据](http://blogs.msdn.com/b/delay/archive/2009/11/04/creating-something-from-nothing-asynchronously-developer-friendly-virtual-file-implementation-for-net-improved.aspx)，因此您只需要在用户进行粘贴时填充数据。

# xml - 在 XSLT 中，后跟数字的哈希 (#) 是什么意思？

> ID：15095166
> 
> 赞同：3
> 
> 时间：2013-02-26T17:13:06.597
> 
> 标签：xml, xslt

例如，#1 在：

```
f:is-subordinate($M, $E, f:direct-reports#1) 
```

来自[http://www.w3.org/TR/xslt-30/#d7e22590](http://www.w3.org/TR/xslt-30/#d7e22590)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:19:34.153

这称为 arity，它是函数所需的参数数量。如果您没有任何哈希 (#)，则函数的元数为 0。

在这里，它指的是`direct-reports`采用单个参数的函数。

使用 arity，您可以拥有多个名称相同但参数数量不同的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:21:03.230

您指向的示例是一个高阶函数，它以另一个函数作为参数。表示带有 1 个参数的`f:direct-reports#1`命名`f:direct-reports`函数 - 哈希后的数字被称为函数的*arity* - 这种`function#arity`语法是您将函数本身称为第一类对象的方式，而不是调用函数并制作使用它的返回值。

# sql - SQL Server 批量插入错误

> ID：15095170
> 
> 赞同：1
> 
> 时间：2013-02-26T17:13:13.187
> 
> 标签：sql, sql-server, bulkinsert

这是我的 CSV 格式的源数据：

```
4,23,2AY5623,7235623
4,23,2GP1207,1451207
4,23,2GQ6689,4186689 
```

桌子：

```
CREATE TABLE [dbo].[Table1](
    [idCodeLevel] [int] NOT NULL,
    [idFirm] [int] NOT NULL,
    [valCodeFrom] [varchar](15) NOT NULL,
    [valCodeTo] [varchar](15) NOT NULL
) ON [PRIMARY] 
```

这是我用来批量导入的代码：

```
USE Test
GO

TRUNCATE TABLE Table1
GO

BULK INSERT Table1
  FROM 'C:\Temp\test.csv'
  WITH (
    FIELDTERMINATOR = ',',
    MAXERRORS=0,
    ROWTERMINATOR = '\n'
  )
GO 
```

我得到的错误是：

> *消息 4864，级别 16，状态 1，第 2
> 行第 1 行第 1 列 (idCodeLevel) 的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。*

你能请有人告诉我为什么它失败了吗？

我搜索了一下，发现我可能必须使用 .fmt 格式。但是如何将 csv 文件转换为 fmt. 我已经看到了从 sql 表创建 fmt 文件的代码。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:39:28.653

csv 在字段名称的顶部有一行吗？如果是这样，您需要在批量语句中添加“FIRSTROW = 2”。如果没有，请尝试创建一个包含所有 VARCHAR 字段的新表，然后检查数据：您的数据中可能有一些您没有预料到的奇怪内容，例如非打印字符。导入为文本，然后尝试类似“SELECT ISNUMERIC([FIELD1]) FROM NEWTABLE”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:10:37.360

使用 sql 导入向导从外部文件导入数据。

右键单击数据库--->任务--->导入---->将平面文件指定为源并选择目标服务器。

有关更多信息，请访问[将 CSV 数据导入 SQL](http://c--shark.blogspot.in/2011/08/how-to-use-sql-server-2008-r2-import.html "导入 CSV")

# repeater - formview asp.net中的中继器按钮事件

> ID：15095172
> 
> 赞同：0
> 
> 时间：2013-02-26T17:13:18.687
> 
> 标签：repeater, formview

ItemCommand 包含 RepeaterCommandEventArgs 有两个重要字段：

命令名

命令参数

如何获取 Button 事件，获取 asp:DropDownList 选择值

```
<asp:FormView runat="server" id="fwHotelDetails" DataKeyNames="id" OnDataBound="fwHotelDetails_DataBound" OnModeChanging="fwHotelDetails_ModeChanging" >
    <ItemTemplate>
         <asp:Repeater runat="server" id="repScore">
          <ItemTemplate>
            <asp:DropDownList ID="ddlnumber" runat="server">
                                                    <asp:ListItem>1</asp:ListItem>
                                                    <asp:ListItem>2</asp:ListItem>
                                                    <asp:ListItem>3</asp:ListItem>
                                                </asp:DropDownList>

            <asp:LinkButton ID="saveButton" runat="server" CausesValidation="False" CommandName="Edit" CommandArgument='<%# Eval("id")%>' Text="Edit" />
          </ItemTemplate>
        </asp:Repeater>

        <EditItemTemplate>
             Test test, anything??
        </EditItemTemplate>

    </ItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:09:37.863

该`RepeaterCommandEventArgs`参数包含一个名为 的属性`Item`。您可以从此属性访问方法`FindControl()`。

所以你的代码看起来像这样：

```
void repScore_ItemCommand(Object sender, RepeaterCommandEventArgs e) { 
   DropDownList ddl = (DropDownList)e.Item.FindControl("ddlNumber");
   string selectedValue = ddl.SelectedValue;
} 
```

另外，不要忘记连接中继器来处理事件：

```
<asp:Repeater ... OnItemCommand="repScore_ItemCommand" .... > 
```

# php - JQUERY-PHP-MYSQL - 从 Mysql 到现有 DIV 列表的数据没有响应点击事件

> ID：15095173
> 
> 赞同：0
> 
> 时间：2013-02-26T17:13:24.087
> 
> 标签：php, jquery, mysql, css

我是 PHP、MYSQL、JQUERY 的初学者。

我打算将照片库（ul）加载到 div 中。

以下代码段运行良好，并且应用于该元素及其子元素的样式也适用。

WHERE 子句仅用一个参数（TabFotosVisivel=1）就足以加载 12 张图片。

请检查以下片段：

***索引.PHP***

```
<div id="idDivTC">
    <ul>
$result = mysql_query("SELECT * FROM TabFotos WHERE TabFotosVisivel=1 ORDER BY TabFotosID DESC LIMIT 0,12");
while($row = mysql_fetch_array($result)){
$caminhoArquivo=$row["TabFotosCamArqMini"];
$descricao=$row["TabFotosDescricao"];
$titulo=$row["TabFotosTitulo"];
echo("<li><img class='claFotoMiniatura' src='".$caminhoArquivo."' title='".$titulo."' alt='".$descricao."'></li>");
}//fim do while
</ul>
</div><!-- /idDivTC --> 
```

//-----------index.php的样式------------

```
#idDivTC ul li {
display:inline;
}
#idDivTC ul li img{
margin:1px;
float:left;
} 
```

现在我想将另一个画廊加载到相同的结构中，并使用 Jquery 用纯 PHP 调用页面。

WHERE 子句 id 'idLido' 的附加参数。

代码是

//------------ index.php的jquery----------

```
$(".claSubMenu").click(function (){
var idLido=$(this).attr("alt");
$.post("miniatura.php", { idLido:idLido})
.done(function(data) {
var arrayRetorno=new Array();
arrayRetorno=data.split("@");
for (i=0;i<arrayRetorno.length;i++){
$("#idDivTC ul").append(arrayRetorno[i]);
}
});
}); 
```

***MINIATURA.PHP***

```
<?php
require_once("bd.php");
$idLido=$_POST['idLido'];
$sentenca = "SELECT * FROM TabFotos WHERE TabFotosFKGalerias = ".$idLido." AND    TabFotosVisivel=1";
$result = mysql_query($sentenca);
while ($row = mysql_fetch_array($result)){
$titulo=$row['TabFotosTitulo'];
$descricao=$row['TabFotosDescricao'];
$caminhoArquivo=$row['TabFotosCamArqMini'];
$retorno=$retorno."<li><img class='claFotoMiniatura' src='".$caminhoArquivo."'  title='".$titulo."' alt='".$descricao."'></li>@";
}
echo $retorno;
mysql_close($con);
?> 
```

检索数据后，Jquery/javascript 将其转换为数组。

这是我的观点：正如我所说，我想在调用时读取该数组的每个值并将其附加到该元素/列表中

```
$(".claSubMenu").click(function (){ 
```

通过

```
for (i=0;i<arrayRetorno.length;i++){
$("#idDivTC ul").append(arrayRetorno[i]);
} 
```

它有效，但样式不再适用。在我看来，前一个块与后者不同，尽管它们具有相同的 ID。

**此外**，这个点击事件

```
$("#idDivTC ul li > img").click(function (e){ ... 
```

调用 JqueryUI 对话窗口，但它也**仅适用**于前一种结构。

我怎样才能实现我的意图？

谢谢

另外，这是模态对话框窗口（Ui JQuery）的代码：

//-------------------------------- index.php的模态----------------

```
$("#idDivTC ul li > img").click(function (e){
e.preventDefault();
var titulo = $(this).attr("title");
var alternativa = $(this).attr("alt");
var imagemObj = new Image();
var caminhoArquivo=$(this).attr("src");
imagemObj.src= caminhoArquivo;
imagemObj.onload = function()
{
var largura=imagemObj.width;
var altura=imagemObj.height;
$(this).clone().dialog({
title: function (){
return titulo+" - "+caminhoArquivo;
},
modal: true,
resizable: false, 
draggable: true,
width: function(){
return largura;
}
//fim da funcao da largura
});//fim da da this clone
};// fim da imagem load
}); 
```

//-----------------------------

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:19:14.917

一方面，使用事件委托来附加您的点击处理程序：`$("#idDivTC ul li > img").click(...)`成为`$("#idDivTC ul").on("click", "img", ...)`.

新创建的元素不会触发该事件，因为它们没有绑定任何点击事件。

# python - 查找位于两个值之间的数组元素

> ID：15095175
> 
> 赞同：0
> 
> 时间：2013-02-26T17:13:27.813
> 
> 标签：python, arrays, intervals, binary-search

那么问题如下：

首先，我正在使用 Python 进行编码。我有一个排序的自然数“givenY”的数组（Numpy 数组，但如果它可以帮助我将其更改为列表）。我想找到并指向位于两个指定值之间的第一个和最后一个`a=Y[i]`元素`b=Y[i+1]`。我编写了代码，但我相信我是以最糟糕的方式之一编写的，我不确定代码在时间上是否有效。因此，如果我能得到评论或建议从头开始编写它，我会很高兴。`Y[i]`重要的是有很多例外情况，在and之间没有 givenY 的元素`Y[i+1]`（通过分配`-1`给 start 来处理）。我的代码是：

 ~~~~```
startRes=binSearch(givenY,Y[i]);
endRes=binSearch(givenY,Y[i+1]);        
start=startRes[1]
end=endRes[1];        
if(givenY.size==0 or (givenY.size>0 and givenY[start]<=Y[i])):
    start=startRes[1]+1;
if(endRes[0]):
    end=endRes[1]-1;
if end<start or (givenY.size>0 and (givenY[end]>Y[i+1] or givenY[start]>=Y[i+1])) or givenY[end]<=Y[i]:
    start=-1; 
```~~  ~~```
startRes=binSearch(givenY,a);
endRes=binSearch(givenY,b);        
start=startRes[1]
if startRes[0]:
    start=start+1;
end=endRes[1]-1; 
```

这是 binSearch 的实现：

```
def binSearch(arr,element):
left=0
right=arr.size;
mid=(left+right)/2
while left<right:
    mid=(left+right)/2
    if(arr[mid]<element):
        left=mid+1;
    elif (arr[mid]>element):
        right=mid;
    else: 
        return True,mid;
return False,left; 
```

一些简单的输入和输出：

对于给定的 Y=[2,5,8,10]：

*   a=3,b=4，输出：值之间没有。（在我的代码中开始=-1）
*   a=2,b=5，输出：值之间没有。（在我的代码中开始=-1）
*   a=2,b=9 输出：开始=1,结束=2
*   a=1,b=10,输出：开始=0,结束=2
*   a=1,b=11,输出：开始=0,结束=3
*   a=11,b=12，输出：值之间没有。（在我的代码中开始=-1）
*   a=0,b=2，输出：值之间没有。（在我的代码中开始=-1）
*   a=3,b=3, 输出：值之间没有。（在我的代码中 start=-1）
*   a=5,b=5, 输出：值之间没有。（在我的代码中 start=-1）

在我目前工作的情况下，b 总是大于 a。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:14:53.997

我不太明白返回的索引。例如，如果`givenY`是和空列表，两者都`start`将`end`是-1。此外，您发布的代码不会处理列表中的重复值。

`bisect`您可以使用该模块代替手动编码的二进制搜索。有关详细信息，请参阅 API 文档：

1.  [蟒蛇 3.3 - 8.6。bisect - 数组二等分算法](http://docs.python.org/3.3/library/bisect.html)
2.  [蟒蛇 2.7.3 - 8.5。bisect - 数组二等分算法](http://docs.python.org/2.7/library/bisect.html)

下面是一个返回的实现，`start`因此`end`具有以下属性：

1.  `end-start`等于给定边界之间的元素数。
2.  `list[start:end]`返回包含给定边界之间的所有值的切片。
3.  `end-start`等于找到的元素数
4.  当没有找到值时`start==end`。

代码：

```
import unittest

from bisect import bisect_left, bisect_right

def find_range(array, a, b):
    start = bisect_right(array,a)
    end = bisect_left(array,b)
    return (start, end)

class TestCase(unittest.TestCase):
    Y = [1, 3, 5, 10, 15]
    givenY = [3, 4, 5, 6, 7, 8, 9, 10, 11]

    def test_empty_array(self):
        self.assertEqual( (0, 0), find_range([], 1, 2) )

    def test_all_values_larger(self):
        self.assertEqual( (0, 0), find_range([4,5,6], 1, 3) )

    def test_all_values_larger_or_equal(self):
        self.assertEqual( (0, 0), find_range(self.givenY, self.Y[0], self.Y[1]) )

    def test_both_endpoints_inside_list(self):
        self.assertEqual( (1, 2), find_range(self.givenY, self.Y[1], self.Y[2]))
        self.assertEqual( [4], self.givenY[1:2])

    def test_2(self):
        self.assertEqual( (3, 7), find_range(self.givenY, self.Y[2], self.Y[3]) )
        self.assertEqual( [6, 7, 8, 9], self.givenY[3:7])

    def test_no_values_larger_or_equal_to_upper_limit(self):
        self.assertEqual( (8, 9), find_range(self.givenY, self.Y[3], self.Y[4]) )
        self.assertEqual( [11], self.givenY[8:9])

if __name__=="__main__":
    unittest.main() 
```

注意：如果需要，返回的开始和结束位置应该很容易调整到您的当前值，只要确保它是一致的。

**编辑**

据我从给出的示例中可以理解，下面是返回请求值的代码。逻辑在文档字符串中描述`find_range()`。保留原始代码，因为恕我直言，在使用 Python 编程时感觉更自然。

```
import unittest

from bisect import bisect_left, bisect_right

def find_range(array, a, b):
    """Find elements that are greater than a and less than b.
    Returns a tuple (start,end) where array[start] is the first
    value and array[end] is the last value.
    If no value is found, returns start=end=-1.
    """
    start = bisect_right(array,a)
    end = bisect_left(array,b)
    if start==end:
        return (-1,-1)
    else:
        return (start, end-1)

class TestCase(unittest.TestCase):
    Y = [1, 3, 5, 10, 15]
    givenY = [3, 4, 5, 6, 7, 8, 9, 10, 11]

    def test_empty_array(self):
        self.assertEqual( (-1, -1), find_range([], 1, 2) )

    def test_all_values_larger(self):
        self.assertEqual( (-1, -1), find_range([4,5,6], 1, 3) )

    def test_all_values_larger_or_equal(self):
        self.assertEqual( (-1, -1), find_range(self.givenY, self.Y[0], self.Y[1]) )

    def test_both_endpoints_inside_list(self):
        self.assertEqual( (1, 1), find_range(self.givenY, self.Y[1], self.Y[2]))

    def test_2(self):
        self.assertEqual( (3, 6), find_range(self.givenY, self.Y[2], self.Y[3]) )

    def test_no_values_larger_or_equal_to_upper_limit(self):
        self.assertEqual( (8, 8), find_range(self.givenY, self.Y[3], self.Y[4]) )

    def test_sample(self):
        self.assertEqual( (3,3), find_range([1,3,5,7], 5, 8)  )
        self.assertEqual( (3,3), find_range([1,3,5,7], 6, 8)  )

if __name__=="__main__":
    unittest.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:16:48.200

~~首先对列表进行排序，然后进行线性搜索。~~

去掉分号，它们不需要也不需要...~~~~

# iphone - “DDExpression”没有可见的@interface 声明选择器“evaluateWithSubstitutions:error:”错误

> ID：15095176
> 
> 赞同：0
> 
> 时间：2013-02-26T17:13:29.950
> 
> 标签：iphone, ios, objective-c, xcode, ddmathparser

我有一个要验证的数组：**{"2","+","3","=","5"}**

那么我该怎么做呢？我找到了 DDMathParser，理论上我可以像这样验证我的表达式：

```
NSString *expression = [array componentsJoinedByString:@""];

NSError *error = nil;
DDExpression *e = [DDExpression expressionFromString:expression error:&error];
if (error == nil) {
    NSLog(@"parsed: %@", e);
    NSNumber * result = [e evaluateWithSubstitutions:expression error:&error];
    //error: No visible @interface for 'DDExpression' declares the selector 'evaluateWithSubstitutions:error:' 
} 
```

有什么想法为什么？我必须提到这个方法在我的单例中，但是当我把它移到我的视图控制器时，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:20:59.110

假设您正在使用[这个项目](https://github.com/davedelong/DDMathParser/tree/master/DDMathParser)（GiHub 链接），我没有看到方法`evaluateWithSubstitutions:error:`。

从 GitHub 项目中，完整的方法签名看起来是（[source](https://github.com/davedelong/DDMathParser/blob/master/DDMathParser/DDExpression.h)，第 33 行）：

```
- (NSNumber *) evaluateWithSubstitutions:(NSDictionary *)substitutions evaluator:(DDMathEvaluator *)evaluator error:(NSError **)error; 
```

# linux - Makefile 中没有默认目标是不是很糟糕

> ID：15095180
> 
> 赞同：10
> 
> 时间：2013-02-26T17:13:42.867
> 
> 标签：linux, makefile

有类似的东西是不好的做法：

```
all: 
```

在 Makefile 中，强制用户指定目标，并忽略默认目标？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T17:47:31.553

`all`不一定是默认目标。默认目标是您的 makefile 中定义的第一个目标。此外，如果您将一个空目标保留为默认目标（并确保`all`在 makefile 的其他位置没有其他目标具有规则），`make`那么 ' 的行为可能会有点令人费解。我建议让默认行为打印适当的错误消息，例如：

```
error:
        @echo "Please choose one of the following target: compile, install, uninstall"
        @# Alternatively: "Please RTFI(nstall)F(ile)"
        @exit 2 
```

# ios - 通过正则表达式验证 IP 地址 - 未知的转义序列

> ID：15095181
> 
> 赞同：2
> 
> 时间：2013-02-26T17:13:49.440
> 
> 标签：ios, regex, nsregularexpression

我正在开发一个需要使用正则表达式来验证 ipv4 地址的 iOS 项目。

我使用以下代码

```
// only support ip4 currently
NSRegularExpression *regex = [NSRegularExpression
                              regularExpressionWithPattern:@"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                              options:0
                              error:nil];

NSUInteger numberOfMatches = [regex numberOfMatchesInString:IpString options:0 range:NSMakeRange(0, [IpString length])];
return (numberOfMatches==1?TRUE:FALSE); 
```

XCode 不断警告我“未知的转义序列。”。当我输入“1.3.6.-6”或“2.3.33”时返回true。

如何在正则表达式中使用点（。）？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:34:00.283

您需要双反斜杠`.`，因为第一个反斜杠正在由 NSString 解释，并且它正在寻找一个转义字符`.`（不存在）。双反斜杠（`\\.`）会导致第一个反斜杠转义第二个反斜杠（确实存在），这意味着您可以`\`正常使用。

例如，您的正则表达式将是：

```
@"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$" 
```

# sql-server - 无法解决选择语句中第 5 列的排序规则冲突

> ID：15095183
> 
> 赞同：7
> 
> 时间：2013-02-26T17:13:58.180
> 
> 标签：sql-server

我试图将几个字段的组合显示为一个。（客户要求我这样做）。我尝试了以下命令，但出现上述错误：

SQL 片段：

```
SELECT        dbo.VPayment_2.Serial, dbo.VPayment_1.Description, dbo.VPayment_2.Money, dbo.VPayment_1.PaymentType,, 
                         'Payment ' + dbo.VPayment_1.PaymentType + ' - ' + ' Serial ' + CAST(dbo.VPayment_2.Serial AS nvarchar(15)) 
                         + '(' + dbo.VPayment_1.Description + ')' AS Compact Info 
FROM            dbo.VPayment_2 INNER JOIN
                         dbo.VPayment_1 ON dbo.VPayment_2.ID = dbo.VPayment_1.ID 
```

这样最终结果将如下所示：

```
---------------------------------------------------------------------------
Serial  Description    Money    PaymentType         Compact Info
123456  some info      500$        Check      Payment :Check - Serial 123456 - some info 
0       some info2     100$      In Cash      Payment :In Cash - Serial 0 - some info 
```

为了实现这一点，我从有问题的表中创建了两个视图，然后使用我内部的 ID 将这两个视图连接起来，以便获得预期的结果。问题是当我添加紧凑信息字段时，它是其他字段的组合，它会生成错误：

> 无法解决 select 语句中第 5 列的排序规则冲突

当我不比较任何东西时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T17:17:03.437

听起来像`dbo.VPayment_1.PaymentType`并且`dbo.VPayment_2.Serial`具有不同的排序规则（这不仅发生在您比较时，还发生在您联合、连接等时）。

有几个修复：

1.  更改一个视图或同时更改这两个视图以对这些列使用相同的排序规则。您可以通过更改基础列或在视图列表中指定`COLLATE`子句来执行此操作`SELECT`，例如

    ```
    SELECT PaymentType COLLATE Latin1_General_CI_AI
    ... FROM ... 
    ```

2.  在您的查询中明确整理，例如

    ```
    ... 'Payment ' + dbo.VPayment_1.PaymentType COLLATE Latin1_General_CI_AI
        + ' - ' + ' Serial ' + CAST(dbo.VPayment_2.Serial COLLATE Latin1_General_CI_AI
        AS nvarchar(15)) 
    ```

3.  最好的解决方案是更正所有字符串列以使用相同的排序规则。我遇到过很多情况，人们在不同的表、数据库或服务器中使用不同的排序规则，但还没有得到有效的解释——大多数时候他们不知道为什么排序规则不同。

# eclipse - 安装 subclipse 插件后 Eclipse (Indigo) CVS 不再工作

> ID：15095187
> 
> 赞同：0
> 
> 时间：2013-02-26T17:14:05.450
> 
> 标签：eclipse, cvs, subclipse, eclipse-indigo

我正在运行 Eclipse 3.7 (Indigo) 并在不久前安装了 Subclipse 插件。在此之前，我知道 CVS 工作正常。自从我安装了 Subclipse，我就不再需要 CVS。最近继承了一个CVS项目来维护。当我尝试打开 Team Synchronize 视图并尝试同步到 CVS 存储库时，我收到以下错误消息：

```
java.lang.NoClassDefFoundError: org/eclipse/team/internal/ui/synchronize/RegexDiffFilter
    at org.eclipse.team.internal.ccvs.ui.actions.SyncAction.execute(SyncAction.java:58)
    at org.eclipse.team.internal.ccvs.ui.actions.CVSAction.run(CVSAction.java:117)
    at org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent(TeamAction.java:549)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.ClassNotFoundException: org.eclipse.team.internal.ui.synchronize.RegexDiffFilter
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 31 more 
```

[我在https://bugs.eclipse.org/bugs/show_bug.cgi?id=386664](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386664)上发现了一个错误，这正是这个问题，但除了升级到更新版本的 Eclipse 之外，没有人提供任何解决方案，即不是我的选择。

有趣的是，我可以结帐/更新，但不能使用同步视图。

有没有人知道我是否/我可以做些什么来尝试恢复我的 CVS 功能？

一些希望相关的信息：来自插件表：

```
CVS Team Provider Core: v3.3.500.v20120522-1148 (org.eclipse.team.cvs.core)
CVS Team Provider UI: : v3.3.500.v20120522-1148 (org.eclipse.team.cvs.ui)
CVS SSH2: v3.2.300.v20120522-1148 (org.eclipse.team.cvs.ssh2)
Eclipse CVS Client: v1.2.0.v201209141800 (org.eclipse.cvs)
Team Support Core: v3.6.0.I20110525-0800 (org.eclipse.team.core)
Team Support UI: v3.6.101.R37x_20111109-0800 (org.eclipse.team.ui) 
```

使用：

```
Version: Indigo Service Release 2
Build id: 20120216-1857 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:49:26.693

我知道这不是一个明确的解决方案，但它对我有用：

窗口 -> 首选项 -> 团队 -> CVS -> 同步/比较 -> 取消选中允许模型（例如 Java）参与同步 -> 确定

希望有帮助。

# c# - 将 int 转换为 int64，int 变量在 int.MaxValue 处仍返回负数

> ID：15095190
> 
> 赞同：5
> 
> 时间：2013-02-26T17:14:19.527
> 
> 标签：c#

我正在尝试显示商品的价格。价格乘以商品数量。

```
int itemCost = itemPrice * itemQuanity; 
```

当项目的数量变得太多时，itemCost 变为负数，这意味着我需要更大的 int，所以我将 int 更改为使用 int64。

```
int64 itemCost = itemPrice * itemQuantity; 
```

通过此更改，它仍然输出负 itemCost，我做错了什么？

我尝试使用

```
System.Convert.ToInt64(int value); 
```

但这似乎也不起作用，当达到 int.MaxValue 时仍然得到一个负数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T17:16:54.483

`itemPrice`和是什么类型`itemQuantity`？`int`如果它们`int`都是`int64`. 那时，转换（和溢出）已经发生，并且转换为 an`int64`无济于事。

在相乘*之前*，您需要确保两个操作数都是 int64 。所以如果他们还没有，

```
int64 itemCost = ((int64) itemPrice) * ((int64) itemQuantity); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T17:15:49.383

你可以试试：

```
long itemCost = (long)itemPrice * (long)itemQuantity; 
```

`int`发生的事情是，即使您将结果存储在 a中，您仍然尝试将 2 相乘`long`。将它们投射到`long`第一个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T17:16:44.080

您的第二行代码是计算`itemPrice * itemQuantity` **Int32 值**的乘积，*然后*将该结果转换为 Int64。在进行乘法`long` *之前*，您需要将值转换为。

```
long itemCost = itemPrice * (long) itemQuantity; 
```

# .net - 是否有与 .NET 4 兼容的 Office 插件 Shim 版本？

> ID：15095191
> 
> 赞同：3
> 
> 时间：2013-02-26T17:14:20.043
> 
> 标签：.net, .net-4.0, ms-office, add-in, shim

在*不使用*VSTO 创建基于 .NET 的 Office 加载项时，有必要（或至少需要）使用加载加载项的“COM shim”，以提供进程隔离，以便将任何崩溃的影响限制在该加载项。

微软（我认为）提供了我一直在使用的 C++ shim 项目，但现在我将我的项目从 .NET 1.1（是的，真的）升级到 .NET 4 为时已晚。

我收到了来自 shim 项目的编译器警告：

> 警告 C4996：“CorBindToRuntimeEx”：此 API 已被弃用。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=143720](http://go.microsoft.com/fwlink/?LinkId=143720)。

不幸的是，这个链接实际上并没有告诉我如何修复它，而且由于我不理解原文，我无法做到这一点。

仅供参考，有问题的代码如下所示：

```
// Load runtime into the process ...
hr = CorBindToRuntimeEx(
     // version, use default
    0,
     // flavor, use default
    0,
     // domain-neutral"ness" and gc settings
    STARTUP_LOADER_OPTIMIZATION_MULTI_DOMAIN |  STARTUP_CONCURRENT_GC,
    CLSID_CorRuntimeHost, 
    IID_ICorRuntimeHost, 
    (PVOID*) &m_pHost); 
```

是否有可用的 shim 项目的新版本？我一直找不到...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:56:30.317

我找到[了这个](http://blogs.msdn.com/b/mshneer/archive/2010/03/19/com-shim-wizards-for-vs-2010.aspx)，这是 VS2010 的解决方案。它还介绍了在使用 shim 时如何在加载项中设置断点，这是我一直发现的问题。

我也能够将其转换为 VS2012 项目。

# google-maps - Google MAP API 在 https 模式下不起作用

> ID：15095194
> 
> 赞同：1
> 
> 时间：2013-02-26T17:14:26.323
> 
> 标签：google-maps

我已使用 Javascript 将 Google MAP api 集成到我们的应用程序中，但不幸的是，在我单击 IE 底部显示的“显示所有内容”按钮之前，它无法在 https 模式下工作。http模式没有问题。请让我知道我该如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:17:29.473

您是以与协议无关的方式包含 Google MAP 脚本还是仅使用 http 链接？如果你想同时服务器，指向谷歌地图的脚本应该是

```
<script src="//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script> 
```

以便使用 http 或 https。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T19:35:03.130

如果您选中 Internet 选项 > 安全 > 本地 Intranet 下的“启用保护模式”框，这似乎具有允许地图在 IE 8 和 9 中为公司网络上的用户显示的效果。

这当然似乎违反直觉，特别是考虑到此[链接](http://windows.microsoft.com/en-US/windows-vista/What-does-Internet-Explorer-protected-mode-do)中的解释， 但它已经在很多情况下为我的用户解决了问题。不理想，但如果您可以重新创建问题并查看这是否是解决方案，则值得一试。

# gps - GPS跟踪中的数据优化

> ID：15095195
> 
> 赞同：4
> 
> 时间：2013-02-26T17:14:28.243
> 
> 标签：gps, real-time, location-based-service

我正在构建一个实时 GPS 跟踪系统。移动客户端不断向服务器发送位置数据，并每 15 秒更新一次跟踪对象的位置数据。我最大的问题是电池和互联网的成本非常高。

> 是否有任何解决方案有助于优化客户端和服务器之间的数据传输？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:15:16.083

您知道，当您使用 4-5 个属性（时间、纬度、经度、可选的速度、航向）达到每个 GPS 位置 2-3 个字节时，您就有了一个很好的解决方案

尽量避免安全，这会破坏所有减少数据大小的尝试。安全性（签名、标头、密钥）使用的字节数远远超过 GPS 数据包的字节数。

> 是否有任何解决方案有助于优化客户端和服务器之间的数据传输？

是的，至少有一些提示：不要使用 XML，这会使您的数据膨胀 100 到 1000。使用二进制协议。WSDL Web 服务也不太适合这项任务。

设备需要通信的频率越低，每千字节获得更多修复的机会就越大。
一个未压缩的位置：需要12个字节：时间（4），纬度（4），经度（4）。

不同的公司有不同的数据压缩解决方案。我知道一种专利解决方案，一种自信。更多的我不能告诉你。

**电池**
如果禁用屏幕，您可以在 iphone4 上记录 8 小时每秒一个位置。

# r - 循环将脚本应用于子文件夹并相应地命名结果--R

> ID：15095196
> 
> 赞同：1
> 
> 时间：2013-02-26T17:14:31.180
> 
> 标签：r, loops, path, subdirectory

我有一个脚本可以针对一个文件夹中的任何现有火车 .csv 文件获取 test-results.csv 文件的 corssproduct

已编辑 - 添加了一些更正

```
mytest <- function(data) {
data01 <- as.matrix(read.csv(file = "test/test-results.csv", sep = ",", header=FALSE))
data02 <- as.matrix(read.csv(file = data, sep = ",", header=FALSE))
test <- list()
test01<- list()
test02<- list()
i<- 1
while (i <= 25){
    test01[[i]] <- c(data01[i,  ])
    test02[[i]] <- c(data02[i,  ])
    test[[i]]<- crossprod(test01[[i]],test02[[i]])
    i <- i+1
}
return(mytest)
}
result <- lapply(list.files(pattern='^tain.*\\.csv', recursive=TRUE, full.names = TRUE),test)
for (i in seq(length(result))) {
 write.csv(do.call(cbind,result),'result.csv', row.names = FALSE) 
} 
```

我有几个具有相同结构的文件夹

```
Main|experiment 01|test|test-results.csv, train01.csv, train02.csv, train03.csv
Main|experiment 02|test|test-results.csv, train01.csv, train02.csv 
```

如果可能的话，我现在想创建一个脚本，将相同的脚本应用于所有这些文件夹并返回结果（例如`results-experiment01.csv`）而不是应用它们 100 次

抱歉，如果这看起来很糟糕...... R 中的新功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:36:08.660

让我们说普通话`dir`或`list.files`打电话给`recursive = TRUE`你一个文件列表作为字符向量（如下`dirlist`例所示）

```
> dirlist
[1] "Main/experiment 01/test/a.csv"  "Main/experiment 02/test/b.csv"  "Main/experiment 02/test/d.txt"  "Main/experiment 02/dummy/a.csv"
[5] "temp1.csv"                      "Main/temp2.csv" 
```

您可以使用正则表达式对该向量进行子集化，如下所示

```
> csvfiles <- dirlist[grepl('.*(experiment [0-9]+)/test/.*\\.csv', dirlist)]
> csvfiles
[1] "Main/experiment 01/test/a.csv" "Main/experiment 02/test/b.csv" 
```

然后，您可以在此再次使用正则表达式获取结果名称。

```
> resultsnames <-  paste('result_', gsub('.*(experiment [0-9]+)/test/.*\\.csv','\\1', csvfiles), sep="")
> resultsnames
[1] "result_experiment 01" "result_experiment 02" 
```

# solr - 在 Apache Solr 中使用 Tika 提取 .docx 文件会出现 NoSuchMethod 错误

> ID：15095202
> 
> 赞同：2
> 
> 时间：2013-02-26T17:14:44.417
> 
> 标签：solr, apache-poi

我的项目中有一个 Solr 4.0 模块（基本上是一个包含所有 solr 依赖项的 maven web 项目）。它工作得很好，包括内容提取和一切。

但是，当我用`.docx`文档对其进行测试时，它给了我以下错误：

```
13:50:34,468 ERROR [org.apache.solr.servlet.SolrDispatchFilter] (http--0.0.0.0-8080-9) 
null:java.lang.RuntimeException: java.lang.NoSuchMethodError: 
org.apache.poi.openxml4j.opc.PackagePart.getRelatedPart(Lorg/apache/poi/openxml4j/opc/PackageRelationship;)
Lorg/apache/poi/openxml4j/opc/PackagePart; 
```

我试图手动将`openxml4j`依赖项添加到项目中。我已经下载了资源并查看了它，`PackagePart#getRelatedPart`确实不存在。

这是什么错误？我怎样才能解决这个问题？

提前致谢。

* * *

### 编辑

我注意到`poi-ooxml`里面已经有了这些类。很酷，但我也检查了这些来源，但课堂上仍然没有所需的方法`PackagePart`。

顺便说一句：我试图添加`openxml4j`version `1.0-beta`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:47:58.940

这是一个与 jarhell 相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T03:39:45.997

谢谢，“jarhell 相关”是我需要的线索！

我的项目在导入 Tika 应用程序 jar 之前有 POI jar，其中包括它自己的 POI jar。我删除了独立的 POI jar，然后 Tika 能够正确处理 DOCX Word 2013 文件。

现在希望我不会遇到我需要两者的情况！:|

# wso2 - 编写自定义功能

> ID：15095203
> 
> 赞同：5
> 
> 时间：2013-02-26T17:14:44.677
> 
> 标签：wso2, wso2carbon

我们想为 wso2 carbon 编写我们自己的自定义扩展（功能）。是否有一些用于创作功能的文档？

我们确实设法“破解”了我们编写自定义功能的方式。但是我们如何托管它？似乎 Carbon 正在查看一些非常具体的存储库描述符——artifacts.jar 和 content.jar

我们如何在不绑定到 Carbon 构建的情况下生成这些描述符。是否有一些文档描述了如何设置第三方功能存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:38:56.157

[Creating-your-own-wso2-carbon-components](http://wso2.org/library/webinars/2010/08/creating-your-own-wso2-carbon-components)网络研讨会讨论了创建碳组件以及这些组件的功能。它涵盖了很多基础知识和最佳实践。

要托管您编写的已创建功能，您需要从这些功能生成一个 p2 存储库。p2-repo 概念来自 WSO2 产品使用的下划线[Eclipse Equinox](http://wiki.eclipse.org/Equinox_Provisioning)项目。

WSO2 编写了自己的名为 carbon-p2-plugin 的 maven 插件，可帮助生成 p2-repo。这是你可以做到的。只需新建一个 maven 项目（打包：pom），然后在 carbon-p2-plugin 插件配置下设置要发布的功能。以下是您可以使用的示例 pom.xml。[这是从carbon 4.1.0 的 p2-repo 生成 pom.xml](https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.1.0/features/repository/pom.xml)复制的，我对其进行了简化。

我已经测试了这个 pom 文件，它对我有用。有两个示例特征定义。将那些 featureArtifactDef 替换为您自己的功能定义。格式为 $groupId:$artifactId:$version。

当你通过 maven 构建它时，maven 会创建 target/p2-repo 目录。这包含 p2-repository，其中包含完整的 p2-repo，包括 artifacts.jar 和 content.jar。您可以只使用此文件夹来安装功能，也可以将其托管在某个地方。托管没有特殊要求。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <parent>
        <groupId>org.wso2.carbon</groupId>
        <artifactId>carbon-features</artifactId>
        <version>4.1.0</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>
    <artifactId>mysample-feature-repository</artifactId>
    <version>4.1.0</version>
    <packaging>pom</packaging>
    <name>WSO2 Carbon - Feature Repository</name>

    <build>
      <plugins>
        <plugin>
          <groupId>org.wso2.maven</groupId>
            <artifactId>carbon-p2-plugin</artifactId>
            <version>1.5.2</version>
            <executions>
              <execution>
                <id>2-p2-repo-generation</id>
                <phase>package</phase>
                <goals>
                  <goal>p2-repo-gen</goal>
                 </goals>
                 <configuration>
                   <p2AgentLocation>${basedir}/target/p2-agent</p2AgentLocation>
                   <metadataRepository>file:${basedir}/target/p2-repo</metadataRepository>
                   <artifactRepository>file:${basedir}/target/p2-repo</artifactRepository>
                   <publishArtifacts>true</publishArtifacts>
                   <publishArtifactRepository>true</publishArtifactRepository>
                   <featureArtifacts> 

<!-- change the featureArtifactDef to match your needs -->

                      <featureArtifactDef>
                                    org.wso2.carbon:org.wso2.carbon.service.mgt.feature:4.1.0
                      </featureArtifactDef>
                      <featureArtifactDef>
                                    org.wso2.carbon:org.wso2.carbon.registry.core.feature:4.1.0
                      </featureArtifactDef>

               </featureArtifacts>
             </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

# c++ - 没有符号和两组参数的运算符是什么意思？

> ID：15095206
> 
> 赞同：0
> 
> 时间：2013-02-26T17:14:51.460
> 
> 标签：c++, operator-overloading

[在这里](http://www.cplusplus.com/doc/tutorial/classes2/)，我看到了一些运算符重载的清晰示例。语法如下：

```
type operator sign (parameters) { /*...*/ } 
```

在我处理的代码中，我发现了以下字符串：

```
bool operator () (int a) 
```

我对这段代码的第一个问题是没有运算符符号（没有类似`operator+`or `operator*`）。第二个问题是，在`(int a)`我看到的论点面前，`()`我不知道它应该做什么。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:16:03.910

关于没有操作符符号，您是不正确的。运营商就是`()`运营商。请注意，有两组括号。第一组是函数名的一部分，`operator ()`第二组是该运算符的参数。

`operator ()`每当您使用定义为函数的对象时，都会调用重载。考虑：

```
struct greater_than_five
{
  bool operator()(int x) const { return x > 5; }
}; 
```

此类已`operator ()`重载，因此当您将大于 5 的整数传递给它时，它会返回`true`. 你可以像这样使用它：

```
greater_than_five f;
if (f(10)) {
  // 10 is greater than 5
} 
```

请注意，虽然`f`不是函数并且是类型的对象`greater_than_five`，但我们可以像函数一样*调用它*`f(10)`，使用. 这是一个愚蠢的例子，但演示了这些类的使用。这些类通常称为*函子*或*函数对象*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T17:16:28.543

这意味着可以使用类似于函数的语法调用具有该运算符的类的实例。这个类可以称为*函子*：

```
struct Foo
{
  bool operator () (int a) { std::cout << "Foo " << a << "!\n"; }
}; 
```

然后

```
Foo f;
f(42); // prints "Foo 42!" 
```

`operator()`部分表示可以使用 调用操作符，`()`后面是参数列表，类似于普通函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:34:25.857

运算符“()”是括号运算符。您可以重载它以采用任何类型和任意数量的参数。这是一个例子：

```
class Vector3
{
public:
Vector3(float x, float y, float z)
{
    _data[0] = x;
    _data[1] = y;
    _data[2] = z;
}

float& operator() (const int component)
{
    assert(component >= 0 && component < 3);
    return _data[component];
}

private:
    float _data[3];
}; 
```

用法：

```
Vector3 vec(3.0, 1.0, 2.0);
vec(2) = 0.5;
cout<<"Third component : "<<vec(2); 
```

打印 0.5

# qt - QGraphicsItem::HOVER 的奇怪行为

> ID：15095208
> 
> 赞同：1
> 
> 时间：2013-02-26T17:14:59.777
> 
> 标签：qt, qgraphicsitem

我有这个小问题。我在构造函数中有我`QGraphicsItem`的。`setAcceptHoverEvents(true)`

这是奇怪的事情 -`hoverMoveEvent`有效，但`hoverEnterEvent`或`hoverLeaveEvent` **无效**。

我不明白这一点。如果您以前遇到过此问题，请提供帮助。

# mysql - MySQL 根据 Unix/Epoch 时间的最后两位数删除条目

> ID：15095209
> 
> 赞同：1
> 
> 时间：2013-02-26T17:14:59.823
> 
> 标签：mysql

我有一个包含三列的表：

```
 `id` int(11) NOT NULL auto_increment    
  `tm` int NOT NULL    
  `ip` varchar(16) NOT NULL DEFAULT '0.0.0.0' 
```

我想运行一个查询，检查是否在一分钟内记录了相同的 IP，然后删除除一个之外的所有条目。

例如，我有下面的两行。

```
id=1 tm=1361886629 ip=192.168.0.1
id=2 tm=1361886630 ip=192.168.0.1 
```

我只想在数据库中保留一个。

我已经阅读了许多其他删除重复/部分重复条目的问题，但我正在寻找一种方法来比较 Unix/纪元时间的最后两位数字，并根据该数字加上 IP 删除除一个之外的所有数字。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:23:05.460

您可以`CAST`在 mysql 中使用删除最后 2 位数字

```
SELECT CAST( tm AS CHAR( 8 ) ) 
```

这将只选择时间戳中的前 8 位数字，并允许您查找重复项

如果您只想知道最后 2 位数字是什么

```
SELECT RIGHT(CAST( tm AS CHAR( 10 ) ), 2) 
```

这将仅从每个时间戳中选择最后两位数字

# oracle11g - oracle 批量插入失败，因为序列不会自动递增

> ID：15095210
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:03.067
> 
> 标签：oracle11g, bulkinsert, sequences

我正在尝试使用另一个表的数据对 oracle 表进行多次插入，并且我还使用了一个序列。像这样的东西：[http ://www.dbforums.com/oracle/1626242-insert-into-table-sequence-value-other-table.html](http://www.dbforums.com/oracle/1626242-insert-into-table-sequence-value-other-table.html)

现在..在目标表中，序列填充的列上有一个主键，它给了我主键违规。我的猜测是 sequence.nextval 由于某种原因无法正常工作。错误在哪里？这是我的实际查询：

```
 insert into xxxx  (col1, col2, col3, col4, col5)
  select SEQ_CNT.nextval, inner_view.*
    from (select col1, 26, 0, 'N'
    FROM  yyyy WHERE col_ID = 30 AND DELETED = 'N' ) inner_view; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:26:56.583

在我看来，问题似乎不太可能是调用`nextval`序列不起作用。更有可能一些其他进程在表中插入了主键值大于当前从序列返回的值的数据。如果你

```
SELECT seq_cnt.nextval
  FROM dual 
```

并将其与表中主键的最大值进行比较

```
SELECT max(col1)
  FROM xxxxx 
```

我的赌注是最大值大于`nextval`序列中的。如果是这种情况，您通常希望将序列重置为当前最大值，并弄清楚有问题的数据是如何插入的，这样问题就不会在将来再次发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T17:13:32.110

外部查询不会循环，因此序列不会增加。在下面尝试此解决方案

```
insert into xxxx  (col1, col2, col3, col4, col5)
  select inner_view.*
    from (select SEQ_CNT.nextval, col1, 26, 0, 'N'
    FROM  yyyy WHERE col_ID = 30 AND DELETED = 'N' ) inner_view; 
```

# jquery - jQuery UI "autocompleteselect" 事件和 AngularJs 事件之间是否存在冲突？

> ID：15095211
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:03.757
> 
> 标签：jquery, jquery-ui, angularjs, angularjs-directive

我想知道jQuery UI“autocompleteselect”事件和一些AngularJS事件之间是否存在已知冲突？

这是我的情况：我有一个表格和一个自动完成输入

```
<label for="addFruit">Add a fruit</label>
<input type="text" fruit-autocomplete ng-model="fruit"/>

<table>
    <thead>
        <tr>
            <th>Label</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="fruit in fruits | orderBy:fruitsOrder">
            <td>
                {{fruit.label}}
            </td>
            <td>
                <a title="Remove" href="javascript:void(0)" ng-click="rmFruit(fruit)">
                    Remove
                </a>
            </td>
        </tr>
    </tbody>
</table> 
```

我已经在指令中声明了我的自动完成功能

```
app.directive('fruitAutocomplete', ['$http', function($http){
    return function(scope, element, attrs){

        element.autocomplete({
            select : function(event, ui){
                scope.fruit = ui.item; // Stores the selected fruit
                scope.addFruit(); // Perform addFruit()
            },
            source: ... //Get my custom Json source
        }).data('autocomplete') .... // Render in ul

    };
}]); 
```

这是我的控制器的一部分内容

```
/*
 * Methods
 */
// Add a fruit method
$scope.addFruit = function(){
    this.fruits.push({'label' : 'test'}); // Add a new fruit to fruits
};

// Remove a fruit method
$scope.rmFruit = function(fruitToRemove){
    var index = this.fruits.indexOf(fruitToRemove);
    this.fruits.splice(index, 1);
};

$scope.fruit  = null; // the selected fruit
$scope.fruits = fruitsList; // fruitList is the object containing all the fruits
$scope.fruitsOrder = 'label'; 
```

一切正常！除非我在自动完成列表中选择某些内容。事实上，当我选择一个项目时，该`select`选项也被很好地触发`scope.addFruit()`了（我的`$scope.fruits`对象也更新了！）。但是我`table`的并没有立即更新！

所以我尝试添加一个按钮“添加”，它会触发与我的自动完成相同的方法`select`。像这样 ：

```
<button type="submit" ng-click="addFruit()">
    Add
</button> 
```

单击时`scope.addFruit()`会触发，令人惊讶的是，我`table`的会立即更新！

我搜索并发现，当我在我的自动完成列表中选择一些内容，然后在我的自动完成字段中输入一些内容时，我`table`的更新。因此，某处的“on change”事件似乎正在发生某些事情。

也许你们中的一些人经历过这种情况，或者我只是在我的代码中遗漏了一点。也许我应该使用`$watch`？或其他方法？

谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:29:54.777

您应该尝试使用 $scope.$apply 函数包装您的“选择”回调。

```
 ...
  select : function(event, ui){
    scope.$apply(function(){
      scope.fruit = ui.item; // Stores the selected fruit
      scope.addFruit(); // Perform addFruit()
    });
  },
  ... 
```

[您可以在Scope Docs](http://docs.angularjs.org/api/ng.%24rootScope.Scope)中阅读有关 $apply 函数的更多信息。

# c++ - fseek 写入值时返回文件末尾

> ID：15095212
> 
> 赞同：2
> 
> 时间：2013-02-26T17:15:06.203
> 
> 标签：c++, c, fseek

我试图覆盖文件中位置 4 的 4 个字节，但 fseek 似乎不起作用。

我的代码：

```
int r = fseek(cacheStream, 4, SEEK_SET);
std::cout << "fseek returns " << r << std::endl;
std::cout << "ftell " << ftell(cacheStream) << std::endl;
r = fwrite(&chunckSize, sizeof(uint32_t), 1, cacheStream);
std::cout << "fwrite returns " << r << std::endl;
std::cout << "ftell " << ftell(cacheStream) << std::endl; 
```

cacheStream 以“ab”打开。输出是：

```
fseek returns 0
ftell 4
fwrite returns 1
ftell 2822716 
```

该值未被覆盖，而是被写入文件末尾。什么可能导致 fseek 出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:18:06.203

该`"ab"`模式意味着每次写入都将附加到文件中，无论写入前的位置如何。

如果您不希望那样，请不要使用该`"a"`标志。

*稍后添加*：

如果您打开现有文件进行更新，则`"r+b"`打开文件进行读写；`"w+b"`打开文件时截断文件，但允许您阅读您所写的内容。

C99 标准（ISO/IEC 9899:1999——不是当前标准，但会非常相似）说：

> §7.19.5.3`fopen`功能
> 
> *   `r`— 打开文本文件以供阅读
> *   `w`— 将长度截断为零或创建文本文件以进行写入
> *   `a`——附加；打开或创建文本文件以在文件末尾写入
> *   `rb`— 打开二进制文件进行读取
> *   `wb`— 截断到零长度或创建二进制文件进行写入
> *   `ab`——附加；打开或创建二进制文件以在文件末尾写入
> *   `r+`- 打开文本文件进行更新（读取和写入）
> *   `w+`— 截断为零长度或创建文本文件进行更新
> *   `a+`——附加；打开或创建文本文件以进行更新，在文件末尾写入
> *   `r+b` *或* `rb+`— 打开二进制文件进行更新（读取和写入）
> *   `w+b` *或* `wb+`— 截断为零长度或创建二进制文件以进行更新
> *   `a+b` *或* `ab+`——附加；打开或创建二进制文件进行更新，在文件末尾写入

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T17:23:46.720

以“ab”模式打开将导致您在文件末尾添加字节，您需要使用“wb”模式来覆盖字节。

# javascript - 在 JSP 页面上将文本从 mysql 传递到 javascript

> ID：15095213
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:08.077
> 
> 标签：javascript, html, mysql

我有一个文本块作为长文本存储在 mysql 表中，然后我使用 struts bean:define for jsp 检索。我想检索此文本块以在 jquery UI 对话框中使用，这意味着必须使用“\n”字符来解析文本。目前文字出来像

```
emailMSG[1] = "%fn %ln,

Our records indicate that certification in %gn, %cn, %sn expire(d) on %dt.

Please take the refresher course.

Please visit our portal to log into your training.

Please ignore any messages from CITI regarding course expiration. DO NOT log in directly to the CITI site."; 
```

我需要数据采用这种格式：

```
emailMSG[<%=id%>] = "%fn %ln,\n"+
"\n" +
"Our records indicate that certification in %gn, %cn, %sn expire(d) on %dt.\n"+
"\n" +
"Please take the refresher course at the training site.\n"+
"\n" +
"Please visit our portal to log into the site.\n"+
"\n"+
"Please ignore any messages from CITI regarding course expiration. DO NOT log in directly to the CITI site."; 
```

如何从 mysql 表中获取数据中的“\n”+ 字符？

这是我引用这部分的代码（我删除了不相关的部分）：

```
<logic:iterate id="cel" name="CourseEmailList" scope="request">
    <bean:define id="msg" property="message" name="cel" scope="page" type="java.lang.String"/>
    <bean:define id="id" property="id" name="cel" scope="page" type="java.lang.String"/>
<tr>
        <logic:notEmpty name="cel" property="message" scope="page">
            <td><a href="#" onclick="OpenDialog(<bean:write name='cel' property='id' scope="page"/>);return false;">View/Modify</a>
            <script type="text/javascript">
                courseIDs[<%=id%>] = "<%= id%>";
                emailMSG[<%=id%>] = "<%= msg%>";
            </script>
            </td>
        </logic:notEmpty>
        </tr>
</logic:iterate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:14:01.393

我找到了解决方案。可能有一种更简单的方法来做到这一点，但这是我所做的：

1）我写了一个java函数，用%nl替换数据库中数据中的所有/r/n。当我存储查询结果以在 jsp 页面上使用时，我会在结果集中的每一行上调用它。

```
public static String formatMessage(String comment) {
        if(comment != null){
            return comment.replaceAll("\r\n", "%nl");
        }else{
            return "";
        }
  } 
```

2) 然后在我的 jsp 页面上，我获取了 bean:define 数据并将其保存到一个临时变量中，然后执行了一个 str.replace 函数，将所有 %nl 替换为 \n。

```
<script type="text/javascript">
      var temp = "<%= msg%>";
      var parsed = temp.replace(/%nl/g,'\n');
      emailMSG[<%=id%>] = parsed.valueOf();
</script> 
```

这使我的文本正确显示在 jquery ui 对话框文本区域中。

# tcl - Tcl 8.5 Wish.exe 生成两个窗口（控制台 + 另一个窗口）

> ID：15095214
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:09.683
> 
> 标签：tcl, tk

我刚刚从提供的源代码构建了 tcl 8.5，我正在开始一个 wish85/wish 过程。

生成了两个窗口，其中一个是实际的控制台。

我想知道如何强制这种行为：关闭控制台应该关闭进程。我试图强制处理 WM_DELETE_WINDOW 消息，但它似乎不起作用。

你们能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:41:15.380

控制台窗口在不同的 interp 中运行，因此您必须在那里安装协议处理程序。一种方法是使用

```
console eval {wm protocol . WM_DELETE_WINDOW exit} 
```

控制台实现在`[file join $tk_library console.tcl]`（在我的系统 C:/Tcl/lib/tk8.6/console.tcl 上），如果你想在那里乱七八糟（不推荐）。

# django - django-orm - 确保在通过 admin_actions 更新查询集时调用 clean()

> ID：15095215
> 
> 赞同：1
> 
> 时间：2013-02-26T17:15:13.770
> 
> 标签：django, django-models, django-admin

如何确保`clean()`在执行时调用该方法`queryset.update('somefield'=True)`。我还需要确保我能捕捉到任何被方法`ValidationError`抛出的东西`clean()`。

我对 django ORM 的经验很少。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:55:35.560

`clean`使用查询集的功能时不调用模型的方法`update`。查看[更新文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.update)。

您将不得不编写自己的 admin_action 以确保调用该方法。[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/actions/)中有示例。

我想你想要像 -

```
from django.contrib import admin
from yourapp.models import YourModel

def update_and_clean(modeladmin, request, queryset):
    for obj in queryset:
         obj(some_field=True)
         obj.clean()
         obj.save()

class YourModelAdmin(admin.ModelAdmin):
    actions = [update_and_clean]

admin.site.register(YourModel, YourModelAdmin) 
```

# android - 使用应用程序对象时出现异常？

> ID：15095217
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:21.993
> 
> 标签：android

我正在尝试创建一个套接字作为应用程序对象。这是活动的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = getApplicationContext();
    setContentView(R.layout.activity_connect);
    app = (MyApplication) getApplication();
    connectButton = (ImageButton) findViewById(R.id.connect_button);
    connectButton.setOnClickListener(connectListener);
    //app.stablishConnection();

}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {

         app.stablishConnection();  
         Intent intent = new Intent(context, ShowDetails.class);
         startActivity(intent);
    }
}; 
```

这是应用程序类的代码

```
private Socket socket;
Context context;

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}

@Override
public void onCreate() {
    super.onCreate();
    context = getApplicationContext();
}

@Override
public void onLowMemory() {
    super.onLowMemory();
}

@Override
public void onTerminate() {
    super.onTerminate();
}

public void stablishConnection(){
    try {   InetAddress serverAddr;
        serverAddr = InetAddress.getByName("10.10.10.10");
        socket = new Socket(serverAddr, 5000);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

我希望在应用程序关闭之前不会破坏套接字，并且我想在用户单击按钮后创建套接字。

活动调用时，系统向我显示 androidblockguardpolicy 异常`app.stablishConnection()`。我还尝试在 onCreate 中调用此方法（您可以看到它已注释），在这种情况下，当应用程序尝试`socket = new Socket(serverAddr, 5000);`在应用程序类中创建套接字时，它会显示和 Unable to start componentInfo 异常。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:19:08.460

不要在应用程序的主/UI 线程上执行网络操作。有很多关于创建服务或使用后台线程/异步任务来执行您需要执行的任何网络 IO 的教程。

# c# - IHTMLElementCollection 的长度在循环期间发生变化

> ID：15095221
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:36.440
> 
> 标签：c#, browser, mshtml

我有这个循环遍历元素节点的代码：

```
public static IEnumerable<IHTMLDOMNode> AllElements(this IHTMLDOMNode node)
{
    if (node.IsHTMLElement())
    {
        IHTMLElement element = (IHTMLElement)node;
        IHTMLElementCollection collection = element.all;
        int length = collection.length;
        for (var i = 0; i < length; i++)
        {
            IHTMLDOMNode item = collection.item(i);
            yield return item;
        }
    }
} 
```

我的问题是，有时，集合的长度会在循环过程中发生变化。我放置了一个断点，`yield return item;`每当`item`它为空时就会中断，并注意到当它停止时（因此`item`是`null`）我的`length`变量是 `collection.length`815、814 和`i`814，因此它试图获取范围之外的项目。

我知道我可能会`collection.length`进入循环，但恐怕这可能无法解决问题的根源。这应该是可能的吗？页面中的脚本是否可以在我的循环运行的同时运行，这将是删除内部元素的脚本？或者还有什么可能导致集合的长度发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:38:18.337

您是否有一个单独的线程正在修改集合？还是在检索原始枚举数后更改它？如果你做这样的事情：

```
var all = node.AllElements();
node.removeChild(child);
all.moveNext(); 
```

你会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T04:48:52.490

数据是实时的，可以在循环的中间进行垃圾收集。*在循环之后*对数据调用 GC.KeepAlive应该允许它保持可用。

# php - 有没有办法在 PHP 中向 csv 添加十六进制换行符？

> ID：15095223
> 
> 赞同：0
> 
> 时间：2013-02-26T17:15:55.360
> 
> 标签：php, hex

我正在从需要在另一个系统上导入的 magento 导出数据。magento 安装在 Unix 上运行，但导入是在 Windows 上进行的。

所以 csv 是在 unix 上创建的，所以换行符只是 hex `0a`，正如 Windows 所期望的那样`0d 0a`，我相信。如果它在写字板中打开然后保存，那就没问题了。

**- - 编辑 - -**

这就是我在 csv 中添加行的方法：

`fwrite($handle, '"'.implode('","', $productdata).'"'."\r\n");`

将每个字段添加到数组中，在写入时，我只是在右引号和逗号上内爆数组并添加`\r\n`到末尾。

从我读过的有限数量来看，Unix/Mac 似乎将 CRLF 解析为`0a`Windows 将其解析为`0d 0a`. 也许我并没有完全击中头部，无论如何，问题仍然存在。

有什么方法可以强制将换行符解析为 windows 正在寻找的十六进制，或者无论如何我可以手动添加十六进制？

# java - Java-如何通过对角线扩展像素来调整图像大小

> ID：15095226
> 
> 赞同：1
> 
> 时间：2013-02-26T17:16:03.633
> 
> 标签：java, image, resize, scale, pixel

```
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import java.awt.image.WritableRaster;

public class drim {
   public static void drimage() {
      try {
         BufferedImage input =
            ImageIO.read( new File( "/root/project/de.jpg" ));
         int w = input.getWidth();
         int h = input.getHeight();
         int h1 = h * 2;
         int w1 = w * 2;
         BufferedImage im = new BufferedImage( w1, h1,
            BufferedImage.TYPE_BYTE_BINARY );
         WritableRaster raster = im.getRaster();
         for( int i = 0; i < w; i++ ) {
            for( int j = 0; j < h; j++ ) {
               int rgb = input.getRGB( i, j );
               if( rgb == -1 ) {
                  raster.setSample( i * 2, j * 2, 0, 1 );
                  raster.setSample( i * 2, ( j * 2 ) + 1, 0, 0 );
                  raster.setSample( ( i * 2 ) + 1, j * 2, 0, 0 );
                  raster.setSample( ( i * 2 ) + 1, ( j * 2 ) + 1, 0, 1 );
               } else {
                  raster.setSample( i * 2, j * 2, 0, 0 );
                  raster.setSample( i * 2, ( j * 2 ) + 1, 0, 1 );
                  raster.setSample( ( i * 2 ) + 1, j * 2, 0, 1 );
                  raster.setSample( ( i * 2 ) + 1, ( j * 2 ) + 1, 0, 0 );
               }
            }
         }
         ImageIO.write( im, "JPG", new File( "/root/project/dde.jpg" ) );
      }
      catch( Exception e )
      {
         e.printStackTrace();
      }
   }

   public static void main( String[] args ) throws IOException {
      drimage();
   }
} 
```

上面给出的是一个java代码，通过用一组4个像素替换每个像素来调整图像大小，保持组中的对角像素与原始图像中的颜色相同。我们考虑的图像是黑白的二值图像颜色。但现在的问题是如何从调整大小的图像中检索原始图像。请帮助我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:39:50.923

您可能想查看 ImageMagick 来为您调整大小。您需要在您的服务器上安装 ImageMagick pkg，因为 IM4Java API 只是从您的 Java 程序中为您进行命令行调用。

[http://im4java.sourceforge.net/](http://im4java.sourceforge.net/) - Java API/开发者指南等
[http://www.imagemagick.org/script/command-line-options.php#resize](http://www.imagemagick.org/script/command-line-options.php#resize) - imagemagick 应用教程

如果您不喜欢 imagemagick，还有其他图像处理 API，但我无法评论它们，因为我以前没有使用过它们。

# java - NTX 或 NDX 文件版本

> ID：15095232
> 
> 赞同：0
> 
> 时间：2013-02-26T17:16:16.350
> 
> 标签：java, xbase

我想我会放弃，我试图使用 XBaseJ 编辑 NTX 文件，但我收到了这个错误：

> org.xBaseJ.xBaseJException：找不到字段

api说

> org.xBaseJ Index 中定义的字段与数据库中的字段不匹配

但是字段是一样的。

这是我的代码：

```
DBF db = new DBF("C:/somepath/myDBF.dbf");

db.useIndex("C:/somepath/pc1.ntx", "rut");
db.useIndex("C:/somepath/pc2.ntx", "rs");

db.getField("RUT").put("123456");
db.getField("RS").put("SomeCompany");
db.getField("TIPO").put("2");
db.getField("TDOC").put("6");

db.write(); 
```

1.  有没有人也有这个错误？
2.  有没有人尝试过使用 java 编辑 ndx 或 ntx 文件？

请在这里我真的需要一些帮助:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:50:00.973

我自己也有这个确切的问题。所以显然 NTX 文件是一种专有格式，因此开源 xBaseJ 不能使用它们。如果您不想更新任何索引，它可以工作，否则您必须找到另一种解决方案......幸运的是，我有一个对我有用的解决方案：

注意：这在 Mac 上可能有点不同，我不知道，因为我没有自己的，但如果你需要我确定你可以解决任何差异。在 Linux 上也可能有所不同，我的 Linux 机器现在已经死了，所以恐怕我无法测试它，我只需要在 Windows 上进行这项工作。

(1) 收集资源：转到此处：[http](http://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=19) ://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=19 下载 Data Architect 实用程序和 ODBC 驱动程序（其他驱动程序之一也可以工作，但如果您想使用 JDBC 驱动程序您必须实际购买 Advantage 数据库服务器，ODBC 驱动程序是免费的，您可以选择）

(2) 描述数据库：现在打开数据架构实用程序并创建一个新的数据字典（文件菜单）。选择本地服务器作为服务器类型，将数据库设置为包含 DBF 的文件夹。在您的新字典中右键单击表并选择“添加现有”，从打开的对话框中的类型下拉列表中选择 DBF 表（默认情况下隐藏它们）并选择您的 dbfs。选择 Clipper 作为表格类型，然后为您的表格按 OK。接下来，右键单击每个表并选择添加现有索引并为其提供 NTX 索引以供其使用。现在，如果您使用数据架构师编辑文件，它将更新索引。

(3) 设置ODBC驱动 进入“Data Sources (ODBC)”（在Windows的控制面板中）点击System DSN选项卡，然后点击add，选择Advantage，streamline SQL ODBC，给它起一个名字（这个名字将在代码中使用，因此需要是静态的或放入配置文件/作为参数传递），勾选“数据字典”并浏览到与步骤（2）在同一文件夹中创建的 .ADD 文件DBF：

表类型 = Clipper Advantage Locking = 兼容的可用服务器类型 =（仅选择本地服务器 [ALS]，除非您购买了实际的优势服务器）

剩下的选项应该是（我没有提到的那些不应该有所作为。

(4) 一些示例 Java 代码

```
String dbfConnectionUrl = "jdbc:odbc:SML_ODBC"; //Set the ODBC URL
Connection dbfCon = null; //A connection
PreparedStatement dbfUpd = null; //I am using a prepared statement here but jsut regular statements work just as well

    dbfCon = DriverManager.getConnection(dbfConnectionUrl); //Connect to the database, NOT the DBF, the database is the folder containing all the DBFs
    dbfUpd = dbfCon.prepareStatement("UPDATE DBFName SET OPENVOL = ?, SLPERVOL = 0, TFPERVOL = 0 WHERE SCAN = ? AND STORE = ?"); //Then use regular old SQL same as any other JDBC driver, note that you use the name of the DBF (.DBF not needed) as the table names.

    //Setting my variables
    dbfUpd.setBigDecimal(1, 10);
    dbfUpd.setString(2, "0000000000001");
    dbfUpd.setString(3, "02"));
    dbfUpd.executeUpdate(); //Update 
```

显然，您可以很高兴地使用语句 like`"INSERT INTO myDBF (RUT, RS, TIPO, TDOC) VALUES ('123456', 'SomeCompany', '2', '6');"`来做您的示例。

所以在初始设置之后，它真的很容易:) 希望这会有所帮助，因为我花了几个月的时间才找到这个解决方案，而且我还没有遇到在 Java 中使用 NTX 索引的任何其他方式。

# django - Django ModelForm 自定义验证：如何访问提交的字段值

> ID：15095234
> 
> 赞同：11
> 
> 时间：2013-02-26T17:16:25.843
> 
> 标签：django, validation, modelform

我有以下模型表单，并希望将自定义验证添加到名为“billable_work”的字段中。

如何访问表单中提交的“项目”字段？我想检查项目的值（下例中的“p”），但找不到正确的语法，以便我可以测试提交的值。任何帮助，将不胜感激。

```
class EntryForm(forms.ModelForm):
    class Meta:
        model = Entries
        exclude = ('billable_work','notes')  

    billable_work = forms.BooleanField()
    notes = forms.CharField(widget=forms.Textarea,required=False)

    def clean_billable_work(self):
        b = self.cleaned_data['billable_work']
        p = form.fields['project']

        if b == True and p == 523:
            raise forms.ValidationError(_("Entries cannot be both billable and NONE: Indirect."))
        return self.cleaned_data['billable_work'] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T17:29:58.037

我认为您想覆盖模型上的[clean()](https://docs.djangoproject.com/en/1.10/ref/models/instances/#django.db.models.Model.clean)方法，而不是特定表单字段的 clean 方法。从文档 -

> 此方法应用于提供自定义模型验证，并在需要时修改模型上的属性。例如，您可以使用它来自动为字段提供值，或者进行需要访问多个字段的验证。

如果您确实想将验证放在表单中，那么表单`clean()`上的方法会提供类似的功能（请参阅[文档](https://docs.djangoproject.com/en/1.10/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)）。

# java - 使用生成的字符串操作 jLabels 以引用 jLabel

> ID：15095241
> 
> 赞同：0
> 
> 时间：2013-02-26T17:16:36.687
> 
> 标签：java, string, swing, jlabel, stringbuilder

我有一个由 2d int 数组组成的网格。

基本包含00、01、02等，无需赘述。

我有一种提取网格位置的方法，然后使用字符串生成器操作字符串以将其更改为“jxy”（x = x 网格中的位置，y = y 网格中的位置）。

```
 public String getXYstring() {
        int x = getX();
        int y = getY();
        StringBuilder sb = new StringBuilder();
        sb.append("j");
        sb.append(x);
        sb.append(y);
        String posXY = sb.toString();
        return posXY;
    } 
```

例如，如果 x=1 和 y=3，则该方法生成：“j13”。

我所有的 jLabels 都是这样命名的，网格是 8x8，所以它们被命名为：j00、j01、j02 ... j07、j10、j11 等。

如何使用此生成的字符串操作标签？

例如，如果我想使用 setText 更改 jLabel 的文本，我该怎么做？

通常它会像：

```
j13.setText("Hello"); 
```

但是我希望从我的方法中传递“j13”部分！

同样，我不希望这仅限于使用 setText，我还需要能够更改标签内的颜色/背景。

我希望这不会让我想要达到的目标太混乱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:18:25.013

您不能使用字符串来命名变量，但更重要的是，您不想这样做，因为变量名一开始并不那么重要。相反，您可能想要使用 JLabel 数组（一维或二维）并从数组索引中获取标签，或者创建并使用`HashMap<String, JLabel>`

如果使用 HashMap，首先需要使用它的 put 方法用 String/JLabel 对填充它，然后可以使用 String 作为键来提取感兴趣的 JLabel。

```
myMap.get("j13").setText("hello"); 
```

或者如果在一个方法中，

```
public void setLabelText(String labelKey, String text) {
  myMap.get(labelKey).setText(text);
} 
```

你会这样称呼：

```
setLabelText("j13", "Hello); 
```

只要确保所有关键字符串都是*唯一的*，否则这将失败。

关于这一点：

> 同样，我不希望这仅限于使用 setText，我还需要能够更改标签内的颜色/背景。

我建议您不要直接在类之外公开类字段，而是使用外部类可以调用的公共方法，因为这将使持有私有字段的类更完整地控制外部类可以做什么，从而减少不必要的副作用。

# ruby-on-rails-3 - 如何在 seed.rb 中创建引用另一个已创建记录的记录

> ID：15095242
> 
> 赞同：0
> 
> 时间：2013-02-26T17:16:38.683
> 
> 标签：ruby-on-rails-3, activerecord

想象一下，我想为 a`BookSupplier`和`Book`表播种数据。

```
BookSupplier.create(company: "Pablo Lledó - ProjectManagement", city: "Canadá", country: "Estados Unidos", address: "Victoria, BC, Canadá", telephone: "1", contact: "Limberg Morales", email: "", website: "")
Book.create(title: "Ajax", author: "Zakas, Nicholas C.- McPeak, Jeremy - Fawcett, Joe", edition: "", isbn: "84-415-2077-1", pages: "448", publish_date: "Septiembre 2006", cover: "libro_84-415-2077-1_1195672469.jpg") 
```

我怎样才能正确地将那本书与那本书供应商相关联？处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:50:49.103

用一个中间变量来保存供应商。

如果他们已经在您的模型中有关系，那么：

```
pablo_lledo = BookSupplier.create(company: "Pablo Lledó - ProjectManagement")
Book.create(supplier: pablo_lledo) 
```

除此以外：

```
pablo_lledo = BookSupplier.create(company: "Pablo Lledó - ProjectManagement")
Book.create(supplier_id: pablo_lledo.id) 
```

# java - GAE 上传文件 POST Request(URLConnection) - 错误：上传的文件只是部分上传

> ID：15095257
> 
> 赞同：1
> 
> 时间：2013-02-26T17:17:09.477
> 
> 标签：java, google-app-engine, google-cloud-storage

我尝试使用 GAE 从 blobstore 将文件上传到服务器（127.0.0.1），但接收服务器给我错误“上传的文件仅部分上传”。我还在请求中发送了一个参数，服务器正确接收了它。

```
String url = "http://127.0.0.1/";
String charset = "UTF-8";

FileService fileService = FileServiceFactory.getFileService();
AppEngineFile appEngineFile = fileService.getBlobFile(new BlobKey("blob key"));

String param = "my param";
File binaryFile = new File(appEngineFile.getFullPath());
String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.
String CRLF = "\r\n"; // Line separator required by multipart/form-data.

URLConnection connection = new URL(url).openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
PrintWriter writer = null;
try {
    OutputStream output = connection.getOutputStream();
    writer = new PrintWriter(new OutputStreamWriter(output, charset), true); // true = autoFlush, important!

    // Send normal param.
    writer.append("--" + boundary).append(CRLF);
    writer.append("Content-Disposition: form-data; name=\"api_password\"").append(CRLF);
    writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
    writer.append(CRLF);
    writer.append(param).append(CRLF).flush();

    // Send binary file.
    writer.append("--" + boundary).append(CRLF);
    writer.append("Content-Disposition: form-data; name=\"file\"; filename=\"" + binaryFile.getName() + "\"").append(CRLF);
    writer.append("Content-Type: application/octet-stream").append(CRLF);
    writer.append("Content-Transfer-Encoding: binary").append(CRLF);
    writer.append(CRLF).flush();
    InputStream input = null;
    try {

    BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
    BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(new BlobKey("blob key"));
    Long blobSize = blobInfo.getSize();
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    //max read on fetch
    long maxReadFetch = 1015807;

    //read the file in one time temporary
    long i = 0;
    long start = 0;
    long end = 0;
    while(i < blobSize) {

    start = i;
    end = i + maxReadFetch;
    //determine end
    if(end > blobSize) {
    end = blobSize;
    }
    buffer.write(blobstoreService.fetchData(new BlobKey("blob key"), start, end));
    i += maxReadFetch;

    }

    output.write(buffer.toByteArray());

        output.flush(); // Important! Output cannot be closed. Close of writer will close output as well.

    } finally {
        if (input != null) try { input.close(); } catch (IOException logOrIgnore) {}
    }
    writer.append(CRLF).flush(); // CRLF is important! It indicates end of binary boundary.

    // End of multipart/form-data.
    writer.append("--" + boundary + "--").append(CRLF);

    //resp part
InputStream responseStream = new BufferedInputStream(connection.getInputStream());

BufferedReader responseStreamReader = new BufferedReader(new InputStreamReader(responseStream));

StringBuilder stringBuilder = new StringBuilder();
String line2;
while ((line2 = responseStreamReader.readLine()) != null)
{
    stringBuilder.append(line2).append("\n");
}
responseStreamReader.close();

String response = stringBuilder.toString();
resp.getWriter().write(response);
} finally {
    if (writer != null) writer.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:26:13.247

由于错误“上传的文件仅部分上传”是取消上传的结果，我认为您的 GAE 请求可能在 30 秒的执行限制或异常`writer.append("--" + boundary + "--").append(CRLF);`发生之前中止。也许输出日志语句以查看代码停止的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:32:53.097

所以我在这里修复它是我的解决方案

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile appEngineFile = fileService.getBlobFile(new BlobKey(video.getBlobkey()));

String param = "4166764c675120921f348e64ca10148e8ff6d5df";
File binaryFile = new File(appEngineFile.getFullPath());
String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.
String CRLF = "\r\n"; // Line separator required by multipart/form-data.

URLConnection connection = new URL(url).openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
BufferedOutputStream writer = null;

OutputStream output = connection.getOutputStream();
writer = new BufferedOutputStream(output); // true = autoFlush, important!

// Send normal param.
writer.write(("--" + boundary + CRLF).getBytes());
writer.write(("Content-Disposition: form-data; name=\"api_password\"" + CRLF).getBytes());
writer.write(("Content-Type: text/plain; charset=" + charset + CRLF).getBytes());
writer.write((CRLF).getBytes());
writer.write((param + CRLF).getBytes());
writer.flush();

// Send binary file.
writer.write(("--" + boundary + CRLF).getBytes());
writer.write(("Content-Disposition: form-data; name=\"file\"; filename=\"" + binaryFile.getName() + "\"" + CRLF).getBytes());
writer.write(("Content-Type: application/octet-stream" + CRLF).getBytes());
writer.write(("Content-Transfer-Encoding: binary" + CRLF).getBytes());
writer.write((CRLF).getBytes());
writer.flush();
InputStream input = null;
try {

    BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
    BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(new BlobKey(video.getBlobkey()));
    Long blobSize = blobInfo.getSize();

    //max read on fetch
    long maxReadFetch = 1015807;

    //read the file in one time temporary
    long i = 0;
    long start = 0;
    long end = 0;
    while(i < blobSize) {

        start = i;
        end = i + maxReadFetch;
        //determine end
        if(end > blobSize) {
            end = blobSize;
        } else {
            end--;
        }
        writer.write(blobstoreService.fetchData(new BlobKey(video.getBlobkey()), start, end));
        i += maxReadFetch;

    }

    writer.flush(); // Important! Output cannot be closed. Close of writer will close output as well.

} finally {
    if (input != null) try { input.close(); } catch (IOException logOrIgnore) {}
}
writer.write((CRLF).getBytes());
writer.flush(); // CRLF is important! It indicates end of binary boundary.

// End of multipart/form-data.
writer.write(("--" + boundary + "--" + CRLF).getBytes());
writer.flush();

//response part
InputStream responseStream = new BufferedInputStream(connection.getInputStream());

BufferedReader responseStreamReader = new BufferedReader(new InputStreamReader(responseStream));

StringBuilder stringBuilder = new StringBuilder();
String line2;
while ((line2 = responseStreamReader.readLine()) != null)
{
    stringBuilder.append(line2).append("\n");
}
responseStreamReader.close();

String response = stringBuilder.toString(); //JSON data
return response; 
```

# sql - 检查单个列中的多个值以获得相同的引用

> ID：15095258
> 
> 赞同：0
> 
> 时间：2013-02-26T17:17:22.350
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一些这样的行：

```
Table: Orders
OrderNumber     City
------------------------
1001            Austin
1001            Dallas
1001            Houston
1001            Miami
1002            Austin
1003            Austin
1003            Dallas 
```

我想提取所有将 City 作为 Austin**和**任何其他城市的 OrderNumber。在上面的例子中，我应该得到订单 1001 和 1003，而不是 1002。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:29:20.027

另一种可能的方法是有两个 CTE（通用表表达式） - 一个用于所有`Austin`订单，另一个用于所有其他订单 - 并加入这些`OrderNumber`：

```
WITH AustinOrders AS
(
    SELECT OrderNumber FROM Orders WHERE City = 'Austin'
), OtherOrders AS 
(
    SELECT OrderNumber FROM Orders WHERE City <> 'Austin'
)
SELECT
    DISTINCT ao.OrderNumber
FROM AustinOrders ao
INNER JOIN OtherOrders oo ON ao.OrderNumber = oo.OrderNumber 
```

产生以下结果：

```
OrderNumber
-----------
   1001
   1003 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:24:11.260

您应该能够使用：

```
select *
from orders o1
where o1.city = 'Austin'
  and exists (select ordernumber
              from orders o2
              where o1.ordernumber = o2.ordernumber
              group by ordernumber
              having count(distinct city) >1) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3187d/5)

# ms-access - 访问两个字符之间的字符串

> ID：15095262
> 
> 赞同：2
> 
> 时间：2013-02-26T17:17:34.317
> 
> 标签：ms-access

嗨，

我有一个字符串（一个 URL），我想在其中获取访问查询中两个字符之间的第一个字符串。

[http://websiteurl.com/sometext-STUFFIWANT-foo-bar](http://websiteurl.com/sometext-STUFFIWANT-foo-bar)

所有文本都是可变的，并且 URL 中有不同数量的“-”。

我可以得到第一次出现的位置：

```
Instr([column],"-")+1 
```

我想我想要类似的东西：

```
Mid(
    [column],
    Instr([column],"-")+1,
    InStr(InStr(1,[column],"-")-1,[column],"-")
) 
```

然而，这给了我字符串的第一块，然后是我想要的一些文本。

理想情况下，我希望：“获取第一个位置-，第二个位置-，然后返回这两个位置之间的所有文本”

我有点绕圈子，虽然我认为我很接近，但我不再取得进展。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:47:46.483

您没有提到您正在执行此操作的上下文...... VBA 过程，Access 中的查询，Access 会话外部的查询。`Split()`但是，如果您可以使用该功能，这将非常容易。从立即窗口考虑这个例子。

```
strUrl = "http://websiteurl.com/sometext-STUFFIWANT-foo-bar"
varPieces = Split(strUrl, "-")
? varPieces(1)
STUFFIWANT 
```

既然您已经说过要在查询中执行此操作，我认为您正在寻找类似的东西...

```
SELECT
    Mid(
        [column],
        InStr([column], "-") +1,
        (InStr(InStr([column], "-") +1, [column], "-") - InStr([column], "-")) -1
        ) AS stuff_i_want
FROM YourTable; 
```

这甚至可能就足够了。但是，每当为 Null 时，它都会抛出“无效使用 Null”错误`[column]`。它还会阻塞`[column]`包含少于 2 个破折号的值。如果你能处理这些限制，你可能会很高兴。但是如果你需要修改那个复杂的字段表达式......祝你好运！

如果这是您将在 Access 应用程序会话中运行的查询，您可以根据`Split()`我之前向您展示的示例创建一个用户定义的函数。那么您的查询将很容易编写。

```
SELECT
    GetStuffYouWant([column]) AS stuff_i_want
FROM YourTable; 
```

您可能听说过 UDF 查询速度可能很慢的警告。然而，在这种情况下，替代方案是`Mid()`加上一堆`InStr()`函数，这对于 db 引擎来说并不是一个更容易的工作负载。我将这两种方法与一个包含超过 1000 万行的表进行了比较。完全填充 DAO 记录集所需的时间在 37 到 45 秒之间，这两种方法都不是始终如一的赢家。

如果您想自己尝试 UDF 方法，我在下面包含了该函数。这是一个即时窗口会话，使用各种输入值测试该功能。

```
? GetStuffYouWant(Null)
Null
? GetStuffYouWant("")
Null
? GetStuffYouWant("abc")
Null
? GetStuffYouWant("abc-")
Null
? GetStuffYouWant("abc-def")
Null
? GetStuffYouWant("abc-def-")
def
? GetStuffYouWant("http://websiteurl.com/sometext-STUFFIWANT-foo-bar")
STUFFIWANT 
```

并且功能...

```
Public Function GetStuffYouWant(ByVal pInput As Variant, _
        Optional pSplitChar As String = "-") As Variant
    Dim varResult As Variant
    Dim varPieces As Variant

    If IsNull(pInput) Then
        varResult = Null
    Else
        varPieces = Split(pInput, pSplitChar)
        If UBound(varPieces) > 1 Then
            varResult = varPieces(1)
        Else
            varResult = Null
        End If
    End If
    GetStuffYouWant = varResult
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:26:12.990

您的代码非常接近。这是你想做的吗？

```
 dim first as integer
  dim second as integer
   dim result as string
   first = instr(1,"yourtext","-")
    second = instr(first+1,"yourtext","-")

   if first > 0 and second > first then
           second = second - first
            result = mid("yourtext",first+1, second-1)
     end if 
```

对于 "xx-bbb-cc" ，结果将是 "bbb"

对于“xx-bbb-cc-zz-cc”，结果将是“bbb”

对于xxxx-bbb，不会有结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T12:22:29.027

我有同样的问题，这是一个你可以使用的函数，它允许字符串作为 startbit 和 endbit 分隔符，即使没有找到第二个分隔符，也可以从 teststring 中找到中间位。

```
Public Function middlebit(startbit, endbit, teststring)
Dim first As Integer
Dim second As Integer
middlebit = ""
If teststring <> "" Then
    first = InStr(1, teststring, startbit)
    second = InStr(first + Len(startbit), teststring, endbit)
    If second = 0 Then second = Len(teststring)
    If first > 0 And second > first Then
        second = second - first
        middlebit = Mid(teststring, first + Len(startbit), second - Len(startbit))
    End If
End If 
```

结束功能

# iphone - UIView 没有填满它的框架

> ID：15095264
> 
> 赞同：1
> 
> 时间：2013-02-26T17:17:49.540
> 
> 标签：iphone, ios, uiview, ios6

我在这里尝试使用[这个 XYPieChart](https://github.com/xyfeng/XYPieChart)，演示效果很好，看起来很漂亮。问题是，每当我尝试在 Storyboard 上重新创建它时，图表看起来非常小，我似乎无法调整它的大小。我已经玩过所有设置并设置了属性的框架，但似乎没有任何效果。我尝试使用以下方法将其调整到整个屏幕：

```
[self.pieChart setFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)]; 
```

仍然是相同的结果，除了框架在屏幕上延伸并且一切都是灰色的。任何人，这就是它的输出方式，灰色是框架，XYPieChart 在中心加载：

![](../Images/539f36c4e88a769cbe727f1bc205031f.png)

我还是个新手，我一直在寻找如何解决这个问题，但我无法制定一个足够好的、有意义的搜索查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:36:21.840

看起来您还没有在图表上设置 pieRadius 属性。

如果你改变它，它应该使馅饼更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T08:50:03.420

问题是由于自动布局。如果你想在你的项目中继续使用 AutoLayout，你可以简单地改变你的 viewDidAppear 这种方式：

```
- (void)viewDidAppear:(BOOL)animated {

    self.pieChart.pieRadius = MIN(self.pieChart.frame.size.width/2, self.pieChart.frame.size.height/2) - 10;
    self.pieChart.self.pieCenter = CGPointMake(self.pieChart.frame.size.width/2, self.pieChart.frame.size.height/2);
    self.pieChart.labelRadius = self.pieChart.pieRadius/2;
    self.pieChart.labelFont = [UIFont boldSystemFontOfSize:MAX((int)self.pieChart.pieRadius/10, 5)];

    [self.pieChart reloadData];

} 
```

在调用 viewDidAppear 的那一刻，您的 pieChart 框架将已经更新为 AutoLayout 提供的大小。

# c - 需要帮助打印链接列表

> ID：15095265
> 
> 赞同：0
> 
> 时间：2013-02-26T17:17:53.643
> 
> 标签：c, linked-list

当我在 main 中调用 printList 函数时，即使值存在，它也不会打印所有值（我在 printList 函数中手动检查）

```
void printList(listNode *start)
{
    listNode *currentPosition = start->next;

    threadList *t;
    t= currentPosition->tList->next;

    cList *c;
    c = currentPosition->tList->next->cpuList->next;

    if (currentPosition == NULL)
    {
        printf("list is empty\n");
    }
    else
    {
        while (currentPosition != NULL)
        {
            printf("process #: %d # of thread: %d\n",currentPosition->processNumber,currentPosition->numThread);

            while (t != NULL)
            {

                printf("thread #: %d Arrival time: %d # CPU: %d\n",t->threadNumber,t->arrivalTime,t->numCPU);

                while (c != NULL)
                {

                    printf("Burst #: %d CPU Time: %d io Time: %d\n",c->cNum,c->cpuTime,c->ioTime);

                    c=c->next;
                }

                t=t->next;
            }
            currentPosition = currentPosition->next;
        }
    }
} 
```

我所有链表的第一个节点是一个虚拟节点。有人可以帮我弄清楚我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:34:28.507

在`printList`中，看起来您正在设置`t`和`c`最初，然后从不更新它们。

如果你搬家

```
t= currentPosition->tList->next;
c = currentPosition->tList->next->cpuList->next; 
```

就在里面

```
while (currentPosition != NULL) { 
```

然后我认为它会起作用（我手边没有编译器）。

# jquery - 使用jquery设置和读取cookies

> ID：15095268
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:01.713
> 
> 标签：jquery, cookies

我正在使用 jquery cookie 插件并尝试在浏览器会话之间设置 cookie 和读取 cookie：

我有这段代码可以使用 jquery 设置 cookie：

```
<script type="text/javascript"> 
 $(document).ready(function(){
        $.cookie("example", "foo", { path: 'C:/temp', expires: 7 }); 
        alert( $.cookie("example") );
    });

</script> 
```

我得到未定义的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:24:20.310

问题是您误解了路径选项的用途。

注意：我假设你正在使用这个插件：[jquery-cookie](https://github.com/carhartl/jquery-cookie)

以下应该有效：

```
 $(document).ready(function(){
        $.cookie("example", "foo", { path: '/', expires: 7 }); 
        alert( $.cookie("example") );
    }); 
```

从文档中：

> 定义 cookie 有效的路径。默认情况下，cookie 的路径是创建 cookie 的页面的路径（标准浏览器行为）。例如，如果您想让它在整个域中可用，请使用路径：'/'。默认值：创建 cookie 的页面路径。

如您所见，它需要页面的路径，而不是本地路径。

# php - 这里有人使用限制内容专业版吗？

> ID：15095269
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:01.943
> 
> 标签：php, plugins

我有一个使用 Restrict content pro 的客户。虽然客户喜欢限制内容专业版，但它有一个问题 - 他希望帖子在 10 天后自动更改为付费用户，而 RCP（限制内容专业版）不提供此功能。

即使使用试用帖子也只允许订阅用户或登录用户，所以我必须根据客户的需要进行修改。

因此，在帖子的订阅级别上有默认选项“全部”，如果您选择它意味着该帖子将对公众开放，但如果您选择另一个订阅的订阅级别，则说高级订阅该帖子将只对登录用户可见。

我希望此选项在发布日期达到 10 天时自动更改，因此如果帖子还不到 10 天，它将是免费的。但是，如果帖子达到 10 天，那将是溢价。希望你能帮我解决这个问题

这是原始代码：

```
case 'levels':
echo '<select name="', $field['id'] . '" id="' . $field['id'] . '">';

$levels = rcp_get_subscription_levels( 'all', false );
echo '<option value="all">' . __( 'All', 'rcp' ) . '</option>';
foreach ($levels as $level) {
    echo '<option value="' . $level->id . '"', $meta == $level->id ? ' selected="selected"' : '', '>',     $level->name, '</option>';
}
echo '</select>';
break; 
```

这是我修改后的代码不起作用：

```
//modification end here
$pubdate = the_date();
if (($pubdate < 10) == true){
    $levels = rcp_get_subscription_levels( 'all', false );
    echo '<option value="all">' . __( 'All', 'rcp' ) . '</option>';
} else{
    foreach ($levels as $level) {
        echo '<option value="' . $level->id . '"', $meta == $level->id ? ' selected="selected"' : '',     '>',     $level->name, '</option>';
    }
}
//modification end here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T19:32:36.913

我认为您的解决方案的问题在于您正在尝试更新管理员界面（用于选择是否希望您的内容由会员付费或访问）。换句话说，您正试图在错误的地方破解代码。

相反，当您选择 Restrict Content Pro 的属性时，我会查看正在保存的自定义字段。我刚刚在我的一个网站上运行了一个测试，该网站也由 Restrict Content Pro 提供支持，在创建了一个虚拟帖子并将其配置为仅限付费用户和一个特定的用户计划之后，我注意到保存了一些自定义字段值（你可以使用 phpMyAdmin 或任何其他 DB 接口在数据库中看到这一点，我之所以建议这样做而不是 WordPress 中的自定义字段元框是因为有些字段已序列化并且未显示在元框中）。

在我的测试中，我注意到虚拟帖子的以下值发生了变化。

```
Custom Field Name       Example of Value
----------------------------------------
rcp_access_level        None
rcp_subscription_level  a:1:{i:0;s:1:"2";}
rcp_user_level          All 
```

因此，为了实现您需要的内容，我会尝试在 WordPress cron 作业中运行一个脚本，该脚本会在 10 天内搜索帖子，然后相应地更新帖子的这些自定义字段值。

为了查看要更改的内容，我建议查看restrict-content-pro\includes\admin\metabox.php 第140 行上的代码（** 这在您的版本中可能有所不同）以查看函数 rcp_save_meta_data( $post_id ) 里面有什么。

特别是您可能需要更新`rcp_subscription_level`值以使用您希望保护内容的计划级别。相反，如果您希望您的内容受到用户级别的保护，请更新`rcp_user_level`.

# css - CSS div:hover 每个菜单项有子和兄弟选择器问题

> ID：15095274
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:15.127
> 
> 标签：css, css-selectors, parent-child

网站： [http ://avuedesigns.com/index](http://avuedesigns.com/index)

在首页上有 6 个菜单项。我想让每件物品在您翻阅时都有自己的颜色。

当您将鼠标悬停在 div 上时，这条线会将所有内容更改为白色

```
li#home-page.page-wrapper-li>div>div:hover .div-bg-color { background-color:#ffffff ;} 
```

对于每个菜单项，我已经进去并给了他们 ID。当我尝试这个时：

```
 li#home-page.page-wrapper-li#front-page-menu-id-about>div:hover.div-bg-color {background-color:#765478 ;} 
```

我认为它会起作用，因为我声明 >DIV>div:hover 而不是使用运算符。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:25:07.847

试试这个，我认为你的选择器过于复杂。

```
#front-page-menu-id-graphic-design a {background: red ;} 
```

我没有看到您的每个`a`标签的任何唯一 ID 或类。另外，我注意到您在多个元素上使用相同的 ID，这不是一个好主意。

# json - 成功函数什么都不做

> ID：15095276
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:26.597
> 
> 标签：json, jquery, jsonp

我尝试使用 $.ajax 从 json 获取数据，但我的成功函数函数什么也不做。

这是我的代码：

```
 $.ajax({ 
     url: "http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts",
     jsonp: false,
     jsonpCallback: 'jsonCallback',
     cache: 'true',
     dataType : 'jsonp',
     success: function(data) {
         alert("!");
         console.log("!");
       },
 }); 
```

chrome中的状态码是200 OK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:33:47.433

您正在尝试进行 jsoncallback 而不是成功。我通过在您的 ajax 中添加“错误：”案例来发现这一点。我删除了回调，你很高兴！

```
$.ajax({ 
     url: "http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts",    
    // jsonpCallback: 'jsonCallback',
     cache: 'true',
     dataType : 'jsonp',
     success: function(data) {
         alert("!");
         console.log("!");
       },
    error:function (XMLHttpRequest, textStatus, errorThrown){
     alert("error: "+ textStatus);   
    }
 }); 
```

[http://jsfiddle.net/xKq4Y/](http://jsfiddle.net/xKq4Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:21:45.360

尝试：

```
$.ajax({ 
     url: "http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts",
     jsonpCallback: 'jsonCallback',
     dataType : 'jsonp',
     success: function(data) {
         console.log("!");
         console.log(data);
      }
 }); 
```

[在这里](http://jsfiddle.net/zYSSk/)提琴

# c# - md5哈希使用hashFunction c#

> ID：15095277
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:35.867
> 
> 标签：c#, md5

我有这个代码：

```
...
   private void bBrowse_Click(object sender, EventArgs e)
    {

    OpenFileDialog ofd = new OpenFileDialog();
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                string FileName = ofd.FileName;
                tbKeyFile.Text = FileName;
            }
        if (!String.IsNullOrEmpty(tbKeyFile.Text))
        {

            FileStream fs = new FileStream(tbKeyFile.Text, FileMode.Open);

            MD5 hashFunction = MD5.Create();
            byte[] computedHashCode = hashFunction.ComputeHash(fs);

            string HashInString = Convert.ToBase64String(computedHashCode);

            lHash.Text = HashInString;
         }

    }
... 
```

但它不计算 md5 哈希。它正在计算一个 SHA1 校验和。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:32:45.123

正如[CodesInChaos](https://stackoverflow.com/users/445517/codesinchaos)所说：[`MD5.ComputeHash()`](http://msdn.microsoft.com/en-US/library/s02tk69a.aspx)返回 base64 中的值。您必须自己将其转换为 HEX 格式（当然，如果您愿意的话）。例如，可以在[此处](https://stackoverflow.com/questions/7784345/conversion-between-base64string-and-hexadecimal)找到如何实现它的示例：

```
string HashInString = BitConverter.ToString(computedHashCode ).Replace("-", ""); 
```

提供的示例是正确的：

`M1UOF9zlCe+LwCfDNcWGPw==`in`Base64`等于`33550e17dce509ef8bc027c335c5863f`十六进制。使用[Base64 to Hex Converter](http://tomeko.net/online_tools/base64.php?lang=en)进行检查！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:32:44.333

> 输入：213441dasses 输出：M1UOF9zlCe+LwCfDNcWGPw== 预期输出：33550e17dce509ef8bc027c335c5863f

您的预期输出是十六进制字符串，而您的实际输出不是。您当前正在将哈希转换为基于 64 的字符串，这显然不是您想要的。

请参阅[此答案](https://stackoverflow.com/a/1436358/870604)以了解如何从哈希中返回您预期的十六进制字符串。

# php - php和curl验证

> ID：15095278
> 
> 赞同：0
> 
> 时间：2013-02-26T17:18:38.507
> 
> 标签：php, curl

我尝试使用 Curl 从其他网站获取内容并进行验证，如果验证可以从网站重新分配

我的代码：

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL,"http://cp.panel.com/index.php");
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, "inUsername=".$_REQUEST['inUsername']."&inPassword=".$_POST['inPassword']."&csfr_token=".$_POST['csfr_token']."");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_exec ($curl);
$result2 = curl_exec($curl);
curl_close ($curl);

echo $result2;

$result="Invalid";

if (eregi($result,$result2)) 
{
print '{"login":"ok"}';
} 
```

如果结果我从 curl 进入 eregi 检测词**无效**，得到响应并且没有重定向，如果得到其他响应，我可以重新分配

问题是 curl 什么也没得到，我不明白为什么会发生这种情况

感谢您的帮助，问候！

# c# - 从 c# 传递 json

> ID：15095287
> 
> 赞同：1
> 
> 时间：2013-02-26T17:19:11.807
> 
> 标签：c#, json

我正在尝试将 c# 中的 json 对象作为参数传递给 mvc 操作，但是当我收到它时，它的值变为 null

有什么建议吗？

```
var url = "myurl";
var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";

using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
{
var jsonContent = "{\"addProfileInfo\":{\"Address\" : \"Add Profile\",  \"Address2\" : \"add2\",  \"ArabicAddress1\" : \"\",  \"ArabicAddress2\" : \"\",  \"ArabicContactPerson\" : \"\",  \"ArabicFirstName\" : \"\",  \"ArabicMiddleName\" : \"\",  \"ArabicLastName\" : \"\",  \"BirthDate\" : \"1998-01-22T00:00:00\",  \"CSO\" : 120,  \"CompanyActivityId\" : 1,  \"ContactPerson\" : \"\",  \"Corporate\" : \"No\",  \"FaxNumber\" : \"\",  \"FirstName\" : \"Add Profile\",  \"GeographicalRegionId\" : 58,  \"HomeNumber\" : \"0235731789\",  \"LastName\" : \"Gamal\",  \"LoggedInUserID\" : 1976819,  \"MiddleName\" : \"AddProfile\",  \"MobileNumber\" : \"01111122829\",  \"NationalID\" : null,  \"NationalityId\" : 1,  \"OccupationId\" : 8,  \"OfficeNumber\" : \"\",  \"PagerNumber\" : \"0235731739\",  \"ParentID\" : 1989567,  \"PassportID\" : null,  \"Password\" : \"DLDovk65\",  \"SendNewsByMail\" : false,  \"StateID\" : null,  \"StatusID\" : 1,  \"StatusReasonID\" : 1,  \"TitleId\" : 4,  \"UCID\" : \"1007102885\",  \"UserAccountManagerID\" : 299489,  \"UserComments\" : \"\",  \"UserGender\" : 1,  \"UserName\" : \"AP.902651\",  \"UserPreferredEmail\" : \"AddProfile1@Domain.com\",  \"ZipCode\" : \"\"},\"sourceName\":\"LDNCRM\"}";

streamWriter.Write(jsonContent);
}
var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
var responseText = streamReader.ReadToEnd();             
Console.WriteLine(responseText);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:49:13.657

是否可以只创建一个 C# 对象，将其包装在 Json 函数中，然后将其作为参数传递给您正在调用的 ActionResult 而无需使用 javascript 获得所有低级别？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:06:38.593

我使用我相信也可以通过 NuGet 获得的restsharp ( [http://restsharp.org/ )。](http://restsharp.org/)使用这个库，我可以执行以下操作：

```
var myObject = new MyActionParameterType();            
var client = new RestClient(ConfigurationManager.AppSettings["ApiBaseUrl"]);

var request = new RestRequest("myurl", Method.POST);
request.RequestFormat = DataFormat.Json;
request.AddHeader("Content-Type", "application/json");
request.AddBody(myObject);

var response = client.Execute(request);
var content = response.Content; 
```

该库处理从强类型对象到 json 字符串的所有转换。

# php - 添加另一个选择

> ID：15095288
> 
> 赞同：0
> 
> 时间：2013-02-26T17:19:15.323
> 
> 标签：php, mysql

```
SELECT COUNT(a.aircraft) as total
    , a.aircraft
    , b.fullname AS aircraft_name 
FROM db_pireps AS a 
JOIN db_aircraft AS b ON a.aircraft = b.id 
WHERE pilotid = {$pilotid}
GROUP BY aircraft 
ORDER BY total DESC 
LIMIT 6 
```

我有这个查询，但是我正在尝试添加`b.registration AS reg`，但我的尝试似乎失败了，因为我不知道如何在该查询中放置另一个 SELECT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:23:00.827

使用逗号：

```
SELECT
  COUNT(a.aircraft) as total,
  a.aircraft,
  b.fullname AS aircraft_name,
  b.registration AS reg
FROM db_pireps AS a JOIN db_aircraft AS b 
  ON a.aircraft = b.id WHERE pilotid = {$pilotid}
GROUP BY aircraft ORDER BY total DESC LIMIT 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:23:44.957

```
SELECT COUNT(a.aircraft) as total, a.aircraft, b.fullname AS aircraft_name, b.registration AS reg
FROM db_pireps AS a JOIN db_aircraft AS b ON a.aircraft = b.id 
WHERE a.pilotid = {$pilotid}
GROUP BY a.aircraft 
ORDER BY total DESC LIMIT 6 
```

提示：为避免列命名问题，如果您使用别名作为表名，请在查询中使用的所有列上使用别名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:24:06.797

我不太了解您的问题，但我认为这应该可行：

```
$aircraft_query = "SELECT COUNT(a.aircraft) as total, a.aircraft, b.fullname AS aircraft_name, b.registration AS reg 
                  FROM db_pireps AS a JOIN db_aircraft AS b ON a.aircraft = b.id 
                  WHERE pilotid = {$pilotid}
                  GROUP BY aircraft 
                  ORDER BY total DESC LIMIT 6"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:26:12.160

您只需要添加列 b.registration 并将其别名为 reg。见下文。它和你做的一样

```
SELECT COUNT(a.aircraft) as total, a.aircraft, b.fullname AS aircraft_name, b.registration   AS reg
FROM db_pireps AS a JOIN db_aircraft AS b ON a.aircraft = b.id 
WHERE pilotid = {$pilotid}
GROUP BY a.aircraft 
 ORDER BY total DESC LIMIT 6 
```

# sql-server-2008-r2 - 如何使用 Execute SQL Task 的输出参数来使用数据流任务获取其他数据？

> ID：15095293
> 
> 赞同：0
> 
> 时间：2013-02-26T17:19:36.577
> 
> 标签：sql-server-2008-r2, ssis

我有一个场景，我需要从**`Database 1`**on获取数据并在特定条件下`Server 1`插入**`Database 2`**on 。`Server 2`

我正在使用 SSIS 2008。

1.  `Database 2`首先，我从using中获取一个 ID `Execute SQL Task`。

2.  然后，我使用步骤 1 中的 ID 并`Database 1`再次使用另一个获取一组行`Execute SQL Task`

3.  我现在想将这些获取的行重新插入`Database 2`.

我想我可能应该使用 Foreach 容器，但我觉得应该有更好的方法来使用数据流任务执行第 2 步。

我知道有一种方法可以使用传递参数（**ID**）， `Execute SQL Task`但我找不到将`Execute SQL Task`（**ID**）的输出作为输入传递给数据流任务的方法。

可能吗？还是有更好的方法来做我想要实现的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:22:56.237

谢谢RBarryYoung！谢谢你西瓦帮助我！我浏览了你的帖子，它可能对我接下来要尝试的事情有所帮助。

我在下面的博客中找到了我正在寻找的解决方案：

我将第 2 步和第 3 步放在一个数据流任务中。

[http://geekswithblogs.net/stun/archive/2009/03/05/mapping-stored-procedure-parameters-in-ssis-ole-db-source-editor.aspx](http://geekswithblogs.net/stun/archive/2009/03/05/mapping-stored-procedure-parameters-in-ssis-ole-db-source-editor.aspx)

谢谢！南非

# android - 在android中将LinearLayout添加到滚动视图

> ID：15095298
> 
> 赞同：1
> 
> 时间：2013-02-26T17:19:59.880
> 
> 标签：android

请朋友们帮帮我。我试图在android中绘制饼图。首先，我将此视图添加到线性布局，然后尝试将该线性布局添加到 ScrollView。我需要滚动视图，因为我的内容是动态可扩展的。然后将该滚动布局添加到我的父级相对布局中。在向父程序添加线性布局时工作正常。但是在向父级添加滚动视图时，它什么都没有。我的代码是

```
RelativeLayout r1 = (RelativeLayout) findViewById(R.id.rl1);

values = calculateData(values);
MyGraphview graphview = new MyGraphview(this, values);
ScrollView sv = new ScrollView(this);
sv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));

LinearLayout ll = new LinearLayout(this);
ll.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

ll.setOrientation(1);
ll.addView(graphview);
sv.addView(ll);     

r1.addView(sv); 
```

注意这个朋友。

```
ll.addView(graphview);
//sv.addView(ll);       

r1.addView(ll); 
```

这工作正常。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:30:57.660

我通过覆盖 MyGraphView 类的 onMeasure 方法解决了这个问题。但是现在出现了新问题，即图表也像气泡滚动一样滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:35:20.100

为什么不在布局 xml 中定义布局？

# ssis - 在ssis中加载excel文件时sheetname总是不同

> ID：15095300
> 
> 赞同：0
> 
> 时间：2013-02-26T17:20:07.937
> 
> 标签：ssis

我需要从excel文件（.xlsx）将数据加载到sql server表（2008R2）中。我的excel文件名总是不同，工作表名也总是不同。但是列数和列名总是相同的。我有每个 excel 工作簿一张。（.xlsx 文件）我尝试了 Nitesh rai 以及 Nik-shahriar Nikkhah 和其他人提供的解决方案。当我创建包时，所有解决方案一开始都有效。但是当新文件带有新的工作表名称和新的 Excel 名称时，我的包失败了。我很沮丧，真的很沮丧，很长时间都在寻找解决方案。没有运气。可以身体请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:17:56.110

我确定我玩游戏迟到了，但您可以使用脚本组件循环浏览指定文件夹中包含您期望的部分文件名的 excel 文件。这将为您提供文件（前提是您没有将多个名称相似的 excel 文件放在同一个文件夹中但用于不同的目的）。

为了获取工作表名称，您可以创建一个 OBJECT 类型的变量，然后使用以下代码：

```
Public Sub Main()

    GetExcelSheets()
    'SetExcelConnString(GetExcelConnString)

    Dts.TaskResult = ScriptResults.Success
End Sub

Private Sub GetExcelSheets()
    Dim excelFile, connstr, curTable As String
    Dim excelConnection As OleDb.OleDbConnection
    Dim tablesInFile As DataTable
    Dim tablenameInFile As DataRow
    Dim tableCount As Integer = 0
    Dim tableIndex As Integer = 0
    Dim excelTables As String()
    Dim blnFound As Boolean = False

    ReDim excelTables(0)
    excelFile = Dts.Variables("sFilePath").Value.ToString
    connstr = GetExcelConnString()

    excelConnection = New OleDb.OleDbConnection(connstr)
    excelConnection.Open()

    tablesInFile = excelConnection.GetSchema("Tables")
    tableCount = tablesInFile.Rows.Count

    For Each tablenameInFile In tablesInFile.Rows
        curTable = tablenameInFile.Item("TABLE_NAME").ToString.Trim.ToLower

        If curTable.IndexOf("sheet1$") >= 0 Then   'change this to be part of the sheet name that you are looking for.  It should be unique to the specific sheet
            blnFound = True
            ReDim excelTables(tableIndex)
            excelTables(tableIndex) = "[" + curTable + "]"
            tableIndex += 1
        End If
    Next

    excelConnection.Close()

    Dts.Variables("objExcelSheet").Value = excelTables
End Sub

Private Function GetExcelConnString() As String
    Dim sExtendedProperties, sExtension, sFilePath, sExcelConn As String

    sFilePath = Dts.Variables("sFilePath").Value.ToString
    sExtension = sFilePath.Substring(sFilePath.LastIndexOf("."))
    If sExtension.ToLower = ".xlsx" Then
        sExtendedProperties = ";Extended Properties=""EXCEL 12.0;HDR=NO"";"
    ElseIf sExtension.ToLower = ".xls" Then
        sExtendedProperties = ";Extended Properties=""EXCEL 8.0;HDR=NO;IMEX=1"";"
    Else
        sExtendedProperties = String.Empty
    End If

    sExcelConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & sFilePath & sExtendedProperties

    Return sExcelConn
End Function

Private Sub SetExcelConnString(ByVal sExcelConn As String)
    Dts.Connections("Excel").ConnectionString = sExcelConn
End Sub 
```

然后，您可以使用带有该对象的 For Each 循环来获取每个工作表名称，并在找到指定工作表时处理您需要执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:23:23.780

您唯一的希望是使用外部代码组装（脚本组件/脚本任务）来处理这种情况。SSIS 抱怨元数据已更改，因为它在 excel 连接管理器中找不到旧的 excel 文件。您是否尝试过使用 SSIS 包配置在运行时更改文件名？

这应该能够帮助您处理工作簿名称一直不同的部分。但是，您遇到了更改工作表名称的问题。我猜这是您需要通过脚本组件弄清楚的事情。

# android - 半透明活动和 DialogFragment = 周围的背景仍然显示

> ID：15095305
> 
> 赞同：0
> 
> 时间：2013-02-26T17:20:35.357
> 
> 标签：android, android-alertdialog, android-dialogfragment

我有一个 FragmentActivity，它在开始时进行片段事务，加载一个构建 AlertDialog 的 DialogFragment。Activity 的主题设置为@android:style/Theme.Translucent.NoTitleBar。我尝试了所有方法，但如果没有背景，我无法显示 DialogFragment。

请不要关心红色的，我只是混淆了我的应用程序。绿色是问题是我想摆脱的背景，如果我将颜色设置为透明，它仍然显示为白色。

![在此处输入图像描述](../Images/bb0680b17a7423f2579e86f7569b26a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:18:15.917

在对话框样式中将 android:windowIsFloating 设置为 false 并将 android:windowBackground 设置为我的自定义颜色。

查看类似[问题](https://stackoverflow.com/questions/15007272/how-to-change-the-background-color-around-a-dialogfragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:02:48.410

当您创建 DialogFragment 并使用 show() 调用它时，您将获得背景，无论您是否将背景颜色设置为透明。如果您执行片段事务以显示 DialogFragment，那么您可以更改周围背景的颜色，并将其设置为透明。

# html - 使用后退按钮返回页面和在该页面上点击刷新按钮有什么区别？（对于 jGrowl）

> ID：15095312
> 
> 赞同：0
> 
> 时间：2013-02-26T17:20:47.340
> 
> 标签：html, caching, browser, refresh, jgrowl

我正在研究一个错误，在此过程中我发现了以下两种情况之间的不同结果：

**场景 1**）没有获取或发布数据的链接将我带到页面 A。在页面上 AI 执行几个 AJAX 调用，刷新和更改页面上显示的一些数据。然后我点击一个指向页面 B 的链接。*要返回页面 AI，请单击后退按钮*。

**场景 2**）没有获取或发布数据的链接将我带到页面 A。在页面上 AI 执行几个 AJAX 调用，刷新和更改页面上显示的一些数据（与场景 1 相同）。*然后我单击刷新按钮*。

除了重新填充非隐藏输入字段之外，这两种情况之间有什么区别？

具体来说，我遇到的提示这个问题的是 jGrowl 在单击后退按钮时会在页面 A 上重新显示消息，但如果我点击刷新则不会重新显示消息。我怀疑这是 jGrowl 的设计，或者是上述两种情况的差异性质的副作用。对此的任何想法都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:35:14.680

jGrowl 将只显示它被告知为该页面的特定状态显示的内容。它没有会话或历史概念。如果您单击“返回”并且您要返回的页面具有与第一次访问相同的 $.jGrowl("Message") 调用，那么它们将执行相同的操作。避免这种情况的方法是更改​​页面上的缓存标头，以便获取新的。

# sql - 基于三个不同的表创建视图

> ID：15095313
> 
> 赞同：0
> 
> 时间：2013-02-26T17:20:47.543
> 
> 标签：sql, sql-server, tsql, view

我有一个名为成分的表，其中包含以下字段：

**成分**- 成分 ID (PK)、制造商 ID (FK)、类别 ID (FK)、条形码 ID (FK)、尺寸 ID (FK)、质量。

该表的工作方式是这样的：每种成分都将基于制造商、类别或条形码，**三者中只有一个，并且总是需要一个**。因此，如果一条记录具有 ManufacturerID，CategoryID 和 BarcodeID 都将为空，反之亦然。

我的数据库中还有其他三个表：

**制造商**- 制造商 ID (PK)、名称

**类别**- CategoryID (PK)、名称

**条形码**- BarcodeID (PK)、名称

我需要一个看起来像这样的视图：

**视图**- 视图 ID (PK)、成分 ID (FK)、名称、尺寸 ID、质量

其中**ViewID**将是 PK， **成分**ID 将是成分记录的 FK， **名称**将是来自制造商、类别或条形码表的名称字段，这取决于三个字段中的哪一个在成分表中具有值，并且**SizeID**和**Quality**将直接来自成分表。

我对 SQL 的了解非常有限，如果有任何指导，我将不胜感激。如果我对问题的描述缺少任何重要信息，请告诉我。

编辑：更新了视图以包含 FK 成分 ID，这可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:26:55.070

像这样的东西应该使用`CASE`语句来工作：

```
SELECT I.IngredientID, 
   CASE 
      WHEN I.ManufacturerID IS NOT NULL THEN M.Name 
      WHEN I.CategoryID  IS NOT NULL THEN C.Name 
      WHEN I.BarcodeID IS NOT NULL THEN B.Name 
   END Name,
   I.SizeID,
   I.Quality
FROM Ingredients I
   LEFT JOIN Manufacturers M ON I.ManufacturerId = M.ManufacturerId
   LEFT JOIN Categories C ON I.CategoryID = C.CategoryID
   LEFT JOIN Barcodes B ON I.BarcodeID = B.BarcodeID 
```

这使用 IngredientId 作为您的主键 - 这是我假设您想要的。不需要另一个主键。如果您真的只想要一个增量 ID，请使用 ROW_NUMBER - 但我不明白为什么需要它：

```
SELECT ROW_NUMBER() OVER (ORDER BY I.IngredientID), ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:28:39.937

```
select 
  i.IngredientID as ViewID, 
  isnull(m.Name, isnull(c.Name, isnull(b.Name, ''))) as Name
  i.SizeID,
  i.Quality
from Ingredients i
  left join Manufacturers m on i.ManufacturerID = m.ManufacturerID 
  left join Categories c on i.CategoryID = c.CategoryID
  left join Barcodes b on i.BarcodeID = b.BarcodeID 
```

# java - 如何将 JTree 设置为始终使用其单元格编辑器显示？

> ID：15095322
> 
> 赞同：1
> 
> 时间：2013-02-26T17:21:06.533
> 
> 标签：java, swing, jtree

我有一个 JTree

```
JTree tree = new JTree();
tree.setCellRenderer(// ...);
tree.setCellEditor(// ...);
tree.setEditable(true); 
```

使用它的单元格渲染器来显示它的单元格；如果单击单元格，则它们使用单​​元格编辑器显示。有没有办法*只能*使用单元格编辑器显示？

1.  我试图只删除渲染器。这不起作用，因为 JTree 使用其默认的单元格渲染器。
2.  这类似于[此问题](https://stackoverflow.com/questions/9604095/jtree-always-display-all-nodes-in-edit-mode)，但是，该问题似乎不包含与我的特定问题相关的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:44:09.040

最简单的做法是创建一个返回关联的 TreeCellEditor 组件的 TreeCellRenderer。

尝试这样的事情：

```
 tree.setCellRenderer(new TreeCellRenderer() {
        @Override
        public Component getTreeCellRendererComponent(
                JTree tree, Object value, 
                boolean selected, boolean expanded,
                boolean leaf, int row, boolean hasFocus) {
            return tree.getCellEditor().getTreeCellEditorComponent(tree, value, 
                                                      selected, expanded, leaf, row);
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:48:56.137

单元格编辑器和渲染器的问题在于，应该重新使用一个 GUI 组件来绘制列表中的每个元素（渲染器），并且一次只能编辑一行（编辑器）。如果你打破了单一的 GUI 组件规则，Swing GUI 的行为就会变得笨拙、缓慢甚至完全崩溃。

换句话说，为单元格渲染器使用编辑组件（如 dropdiwn）会遇到问题，因为应该为列表的每个元素使用相同的 JComboBox。如果为每个树元素创建不同的渲染器对象，则会遇到内存问题和其他异常行为

如果你真的想为渲染器使用下拉菜单，你可以通过自己实现一个 TreeCellRenderer 来实现，它在`public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus)`被调用时返回一个唯一的 JComboBox 实例。

# ruby-on-rails - Rails 表单提交两种不同的模型

> ID：15095323
> 
> 赞同：0
> 
> 时间：2013-02-26T17:21:09.933
> 
> 标签：ruby-on-rails, ruby, forms, sunspot

我正在开发一个简单的 web 应用程序，您可以在其中导入 CSV 并使用 Sunspot 搜索它。用户使用的唯一操作是索引和显示。所有这些都运行良好，但最终目标是能够准确跟踪正在搜索的内容并将其导出。

我的`datasheets`模型是用于上传 CSV 的模型。同样，包括搜索在内的工作正常。两者`datasheets`和`datalog`默认情况下都是脚手架和路由的。第一次尝试时我想我只需在我的定义中添加一个定义，该定义将使用搜索`DatasheetsController`创建模型的新实例。`datalog`

**datasheets_controller.rb**（工作正常）

```
def index
  @search = Datasheet.search do
    fulltext params[:search]
  end

  @datasheets = @search.results

  respond_to do |format|
    ...
  end
end 
```

这是我创建新数据记录的尝试。我是 Rails 的新手，意识到这不是 RESTful，但我可以在这里使用快速而肮脏的解决方案。

```
class DatasheetsController < ApplicationController

  after_filter :log_it

  def log_it
    @datalog = Datalog.new(params[:datalog])
  end

end 
```

这对 development.log 没有任何帮助，因此我尝试将参数更改为`@datalog = Datalog.new(params[:search])`但它给了我以下错误：

```
NoMethodError in DatasheetsController#index

undefined method `stringify_keys` for "[whatever is searched for]":string 
```

我确定我离这里很远，但我认为这很容易投入，但事实并非如此。如果它有帮助，一旦它起作用，我想让创建的`datalog`属性`:name`与搜索的字符串相同。任何朝着正确方向的观点（或者因为做得不好而受到批评）都会非常感激。

编辑：我还想补充一点，如果有一种简单的方法来记录搜索结果（它不必在模型中），任何东西都是受欢迎的（包括宝石）。我在 Google 和 SO 上搜索了尽可能多的关键字变体，但一无所获。

**编辑2：**

在编辑了一些东西之后，我已经接近了，但我仍然遇到问题。

我已将以下内容添加到`def index`：

`@logkey = :search`

并将`log_it`定义更改为：

```
def log_it
  @datalog = Datalog.new(params[:id])
  @datalog.update_attribute(:name, @logkey)
end 
```

现在一个新的 Datalog 将节省搜索，这很棒，但`:name`属性总是以“搜索”结尾。

我现在有一个用于数据记录的示例表是：

* * *

## 姓名

搜索显示编辑销毁

搜索显示编辑销毁

搜索显示编辑销毁

搜索显示编辑销毁

搜索显示编辑销毁

新数据记录

* * *

我尝试将`@logkey`行更改为：`@logkey = :search.to_s`但它并没有真正影响任何事情。

**编辑以回应答案**

SQL (0.5ms) INSERT INTO "datalogs" ("created_at", "name", "updated_at") VALUES (?, ?, ?, ?) [["created_at", Tue, 26 Feb 2013 18:26:04 UTC +00:00], ["name", nil], ["updated_at", 2013 年 2 月 26 日星期二 18:26:04 UTC +00:00]]

同样，如果这只是其他地方的问题，我会得到它，我可以在自己的时间寻找它。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:04:58.433

问题如下：

*   我假设您的 Datalog 模型源自`ActiveRecord::Base`（在 Rails 中做模型的标准方法）
*   `.new`此类的方法（[在此处记录](http://apidock.com/rails/ActiveRecord/Base/new/class)）采用属性哈希（和选项，但我们现在不关心）

    *   从此散列`.new`尝试使用散列的每个键值对创建类的实例，以将实例键命名属性设置为值
*   问题是`params[:search]`在您的示例中不能用作参数`.new`，因此它会引发异常

它应该是什么样子：

*   在 Datalog 模型中，您应该具有以下内容：`:attr_accessor name`
*   参数应该`params[:search] = { :name => 'My favourite search name' }`

**另一个注意事项**
如果您只是简单地运行`bundle exec rails s`，您可以在服务器日志中看到您的参数。在生产中只需使用：`less log/development.log`. 您可以检查您为您的应用程序发送的内容。

**问题更新后更新**

`@logkey = params[:search].to_s`

**评论后更新**

好的，这`@datalog.update_attribute(:name, @logkey)`条线是没有必要的。只需使用您原来的方式：`@datalog = Datalog.new(params[:datalog])`它是“rails 方式”。

请记住我的第一部分答案，所以`params[:datalog]`应该是一个哈希。但是，如果您无法做到这一点，那么只需使用：

```
@datalog = Datalog.new(params[:id])
@datalog.name = params[:search] # I dont think to_s is needed
@datalog.save # To save it into the database 
```

# jquery - 如何使用 jQuery 获取 HTML 标签属性中的值

> ID：15095331
> 
> 赞同：1
> 
> 时间：2013-02-26T17:21:47.760
> 
> 标签：jquery, attr

我知道以下 jquery 语法将为 src 设置属性值

```
$(this).closest('img.button').attr('src', '/images/button.png'); 
```

但是如何获取或获取 'src' 属性的值以在我的 jQuery 脚本中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:22:54.973

同样的方法，只是不提供第二个参数。

```
$(this).closest('img.button').attr('src'); 
```

如果您只提供一个参数，`.attr(...)`则充当**getter**。

如果您提供两个参数，则`.attr(...)`充当**setter**。

* * *

如果您想稍后删除该值，您将执行以下操作：

```
$(this).closest('img.button').removeAttr('src'); 
```

这是 jQuery 文档的链接[`$.attr()`](http://api.jquery.com/attr/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:25:05.460

attr 是 getter 和 setter 函数。此处的文档：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

获取属性：

```
$(this).closest('img.button').attr('src'); 
```

设置属性：

```
$(this).closest('img.button').attr('src', '/images/button.png'); 
```

# c++ - NetHack 走廊实施

> ID：15095333
> 
> 赞同：8
> 
> 时间：2013-02-26T17:21:51.137
> 
> 标签：c++, nethack

我只是在玩 NetHack，因为我正在为自己编写一个简化版本。我的问题是，走廊是如何实施的？几天来我一直在想一种方法，但无法提出任何合理的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:35:32.423

Nethack 中的地图生成发生在 mkmap.c 中。该方法`join_map`确定应连接哪些房间。`dig_corridor`sp_lev.c 中的方法进行实际挖掘。

兴趣线：

```
if (tx > xx)        dx = 1;
else if (ty > yy)   dy = 1;
else if (tx < xx)   dx = -1;
else            dy = -1; 
```

这会将“当前 X 和 Y”与“目标 X 和 Y”进行比较，以确定我们最初将挖掘的方向。

```
while(xx != tx || yy != ty) {
    /* loop: dig corridor at [xx,yy] and find new [xx,yy] */
    if(cct++ > 500 || (nxcor && !rn2(35)))
    return FALSE; 
```

我们将继续前进，直到达到目标，但有一些例外：如果“走廊数”`cct`为 500，那么我们已经挖了很长的路，想放弃。如果 nxcor 为真，则允许走廊进入死胡同。`rn2`是一个随机数生成器，因此如果可能出现死胡同，那么在每个循环期间我们都会放弃的可能性很小。

```
 crm = &levl[xx][yy];
    if(crm->typ == btyp) {
    if(ftyp != CORR || rn2(100)) {
        crm->typ = ftyp;
        if(nxcor && !rn2(50))
            (void) mksobj_at(BOULDER, xx, yy, TRUE, FALSE);
    } else {
        crm->typ = SCORR;
    } 
```

crm 是我们当前所在的磁贴。大多数时候，我们把瓷砖做成一条普通的走廊。有时，我们会将图块做成 SCORR 或秘密走廊，只有在您通过搜索找到它之后才能遍历。如果路径可能是死胡同，我们也会放置巨石。

```
 /* do we have to change direction ? */
    if(dy && dix > diy) {
    register int ddx = (xx > tx) ? -1 : 1;

    crm = &levl[xx+ddx][yy];
    if(crm->typ == btyp || crm->typ == ftyp || crm->typ == SCORR) {
        dx = ddx;
        dy = 0;
        continue;
    }
    } else if(dx && diy > dix) {
    register int ddy = (yy > ty) ? -1 : 1;

    crm = &levl[xx][yy+ddy];
    if(crm->typ == btyp || crm->typ == ftyp || crm->typ == SCORR) {
        dy = ddy;
        dx = 0;
        continue;
    }
    } 
```

如果当前位置和目标位置之间绘制的线的“斜率​​”明显远离 45 度，我们尝试改变方向；如果我们沿 X 轴移动，则开始沿 Y 轴移动；反之亦然。这导致了连接两个对角线房间的典型曲折楼梯形走廊。如果改变方向会导致我们撞到障碍物（其他房间、熔岩等），那么我们将继续朝着我们前进的方向前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:24:37.500

你可以自己查看源码！[关联](http://www.nethack.org/v343/download-src.html)

我记得很久以前浏览过源代码。内存有点生疏，但我认为这是一个非常简单的顺序过程。将根据可用瓷砖的一定比例为房间绘制盒子，然后它们会生成走廊并将房间遮盖住。我认为他们有一个通行证，可以在其中寻找无法进入的区域（使用洪水填充？）。

然后楼梯/门/等被填充。

您正在寻找的是[迷宫生成算法](http://en.wikipedia.org/wiki/Maze_generation_algorithm)。有吨。

# css - 媒体查询在 Chrome 中但在 Firefox 中不起作用？

> ID：15095334
> 
> 赞同：1
> 
> 时间：2013-02-26T17:22:17.690
> 
> 标签：css, media-queries

我目前正在处理的网站没有在 chrome 中为 480 像素以下的设备选择样式，而是在 Firefox 中工作，chrome 正在获取 800 像素和 1200 像素的媒体查询，我终生无法弄清楚为什么会这样没有选择 480px 媒体查询。

请参阅下面的样式表。

```
@media screen and (max-width:1200px) { 

.ui-tabs .tab {
    clear:both; 
    height:386px; 
    width:550px; 
    margin:0 auto;
}

.ui-tabs .groundFloor {
    background:url(img/groundFloor_550.jpg) top center;
}

.ui-tabs .firstFloor {
    background:url(img/firstFloor_550.jpg) top center;
}

.ui-tabs .secondFloor {
    background:url(img/secondFloor_550.jpg) top center;
}

}

@media screen and (max-width:800px) {

#slide1 h1.logo {
    width:350px;
}

.mainnav {display:none;}
.navMobile {display:block;}

.navMobile {
    height:auto;
}

.navMobile .menuBox {
    height:auto;
    min-height:40px;
    width:100%;
    display:inline-block;
    position:fixed;
    top:0;
    left:0;
    right:0;
    background:#fff;
    z-index:99999;
}

.navMobile .menuBox ul {
    display:block;
    clear:both;
    height:auto;
    width:100%;
    padding:0;
    margin:0;
    border-top:1px solid #eee;
    font-family: "proxima-nova";
}

.navMobile .menuBox ul>li {
    display:block;
    clear:both;
    padding:10px 0;
    text-align:center;
    border-bottom:1px solid #eee;
}

.navMobile .menuBox ul>li a {
    padding:0;
    margin:0;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color:#ccc;
    font-size: 0.9em;
    font-weight:500;
    opacity: 1;
}

.navMobile .menuBox ul>li a:hover,.mainnav ul>li a:focus {
    text-decoration: none;
}

.navMobile .menuBox ul>li:last-child a {
    margin-right: 0;
    padding-right: 0;
}

.navMobileBtn {
    clear:both; 
    height:40px;
    width:40px;
}

.button {
    margin-left: -37px;
}

.home-block {
    width:100%;
    margin-right:0;
}

.caption {
    font-size: 1.6em;
}

.building .area .colLarge {
    float: none;
    clear: both;
    width: 100%;
    padding:0;
    padding-top: 2%;
}

.building .area .colSmall {
    float: none;
    clear:both;
    width:100%;
    padding:0;
    padding-top: 2%;    
}

.building .area .divide .divideLeft {
    float: none;
    clear:both;
    width: 100%;
    padding:0;
    padding-top: 4%;
}

.building .area .divide .divideRight {
    float: none;
    clear:both;
    width: 100%;
    padding:0;
    padding-top: 4%;
}

.ui-tabs ul li {
    font-size:1.2em; 
}

.formBox {
    display:inline-block;
    float:none;
    clear:both;
    height:auto;
    width:100%;
    margin:0;
}

.formBox .title {
    float:left;
    margin-right:4%;
    width:100%; 
}

.formBox .firstName {
    float:left;
    margin-right:4%;
    width:100%;
}

.formBox .surname {
    float:left;
    width:100%;
}

.formBox .email {
    float:left;
    margin-right:4%;
    width:100%;
}

.formBox .number {
    float:left;
    width:100%;
}

.formBox .businessType {
    float:left;
    margin-right:4%;
    width:100%;
}

.formBox .businessType input[type=text] {
    padding-left:2%;
    width:100%;
}

.formBox .unit {
    float:left;
    width:100%;
}

.formBox .additionalInfo {
    float:left;
    width:100%;
}

.formBox .additionalInfo input[type=text] {
    padding-left:1%;
    width:100%;
}

.formBox input[type=text] {
    display:block;
    width:97%;
    height:30px;
    padding-left:3%;
    border:0;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box; /* prevents bg color from leaking outside the border */
    background-color: #ebebeb; /* layer fill content */
    font-size:0.8em;
    color:#797886;
}

.formTop {
    display:inline-block;
    float:none;
    clear:both;
    height:auto;
    width:100%;
    margin:0;
}

.formSubmit {
    float: none;
    clear:both;
    width: 90%;
    margin: 30px auto;
}

form.mobileForm {
    display:block;
}

form.mainForm {
    display:none;
}

@media screen and (max-width: 480px) {

#slide1 h1.logo {
    width:250px;
}

.ui-tabs ul li {
    font-size:0.8em; 
    font-weight:100;
}

.ui-tabs .tab {
    clear:both; 
    height:211px; 
    width:300px; 
    margin:0 auto;
}

.ui-tabs .groundFloor {
    background:url(img/groundFloor_300.jpg) top center;
}

.ui-tabs .firstFloor {
    background:url(img/firstFloor_300.jpg) top center;
}

.ui-tabs .secondFloor {
    background:url(img/secondFloor_300.jpg) top center;
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:28:38.413

你有一些不好的嵌套，或者不正确的大括号。如果我删除实际样式，它看起来像这样：

```
@media screen and (max-width:1200px) { 

}

@media screen and (max-width:800px) {

/* Missing } brace here */

@media screen and (max-width: 480px) {

} 
```

Firefox 可能只是以不同的方式处理错误。照顾好这一点，你应该很[高兴](http://jsfiddle.net/sWBuN/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:30:42.483

试试这个：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
} 
```

[来源>>](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# memory - 全局内存和 CUDA 流

> ID：15095335
> 
> 赞同：1
> 
> 时间：2013-02-26T17:22:21.200
> 
> 标签：memory, cuda, cuda-streams

我正在研究 CUDA，我对全局内存和流 CUDA 有疑问。

让：

```
__device__ float Aux[32];
__global__ void kernel1(...) {
    [...]
    Aux[threadIdx.y] = 0;
    [...]
} 
```

所以，如果我在不同的流 GPU 上运行这个内核。所有流的 Aux 都相同吗？或者所有流都有一个 Aux 变量作为 Aux 全局变量？我在指南 cuda 中找不到该信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:00:34.083

所有流都一样。

流控制内核执行的（部分）顺序。它们不会创建新的命名空间。

# ios - 如何为导航控制器创建始终可用的 iOS 隐藏滑动菜单视图

> ID：15095342
> 
> 赞同：0
> 
> 时间：2013-02-26T17:22:57.277
> 
> 标签：ios, objective-c, cocoa-touch, uinavigationcontroller

我知道这个主题已经有所涉及，但我没有看到我需要发布的确切内容。抱歉，如果我错过了它。基本上我想要一些与 Facebook 滑出式导航菜单非常相似的东西。我在这里看到了指向使用 ViewDeck 的帖子，但由于各种原因，我想自己动手。我的应用程序基于导航控制器，我计划在导航栏上有一个按钮来切换菜单视图的可见性。

我的问题不是一般如何创建和管理这样一个视图，而是更具体地说，我如何为这个视图创建一个视图控制器并让它始终存在和可用，无论我的导航顶部当前是什么视图控制器控制器的堆栈？我正在使用情节提要，我的第一个想法是向我的主导航控制器添加一个容器视图并在那里添加菜单视图，但正如我所怀疑的那样，情节提要编辑器不允许我直接向我的导航控制器添加任何视图。我知道这是有道理的，无需向我解释为什么我无法做到这一点，包括更多以表明我想做这样的事情 - 在全球最高级别创建它，所以它总是无需由我的应用程序中的每个视图控制器创建。

我希望我的问题很清楚。以防万一，让我说明一下我的想法 - 如果我在我的初始根视图控制器中添加了一个容器视图，我设法隐藏并从侧面滑出，一旦我通过在我的导航堆栈，此菜单视图将不再存在。当然，我不希望随后被要求为我的应用程序中的每个不同的视图控制器创建它。

非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:47:18.123

好吧，我不确定我的建议是否与您正在寻找和上面提到的完全相同。但是让我试着为你画一个视觉草图。

1.  创建一个菜单视图作为 UIViewController 并根据需要设置设计。
2.  使用 Hide & Show 方法在同一视图中为您的菜单架构实现设计和逻辑，这些方法将对各自的委托做出反应。现在，您的菜单视图已准备好作为普通视图，通常我们可以推送和弹出来导航。现在，重头戏开始了。
3.  由于您的应用程序有一个 UINavigationController，它将有一个自定义工具栏，其中包含一个 UIButton 来欢迎菜单视图。
4.  现在，将创建一个 menuview 的单例实例来管理整个应用程序的通用菜单操作，最重要的是，它将添加到 UIWindow 上。
5.  这个单例菜单视图实例将根据自定义工具栏按钮的要求请求显示/隐藏。
6.  根据显示/隐藏的要求，应用具有预期逻辑的相应动画。
7.  在请求 Hide 时，menuview 将从 UIWindow 中移除，并且下次需要 Show 时再次在 UIWindow 上添加它。

希望，这可能对你有用。如果有任何误解，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:41:05.403

您可以使用一些可用的开源控件，例如 JASidePanels（[此处](http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:45:20.117

实际上，我刚刚完成了一个项目，该项目完全符合您的要求。

这是我采取的步骤。

*   做了一个视图控制器
*   在左侧添加了菜单导航
*   在菜单导航上添加 UIView
*   添加了用于左右滑动的 IBActions，带有这样的动画......

    ```
    [UIView animateWithDuration:.25f delay:0.0 options:0
                 animations:^{
                     [mainView setFrame:CGRectMake(0, mainView.frame.origin.y, mainView.frame.size.width, mainView.frame.size.height)];

                 }
                 completion:^(BOOL finished){
    }]; 
    ```

*   在同一个视图控制器中添加了其他视图

所以几乎你的一个主视图控制器拥有你所有的视图，你只需用一个按钮或 UIGestureRecognizers 动画它们左右滑动。您可以使用容器视图将子视图控制器嵌套在该主视图控制器中，以使代码端更易于管理。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T19:27:27.887

感谢您的建议。我不想使用 3rd 方库，部分原因是我不想有完全相同的行为。例如，我希望菜单出现在内容视图之上，而不是侧边菜单将主视图推开。我还希望它出现在导航栏下方。另外，我没有使用正确的菜单，因此我可以使用更轻的代码来处理我需要的内容。

我想我已经想出了一个解决方案。我创建了一个菜单视图控制器，并在我的应用程序委托中添加了对此的引用。现在无论用户在哪里，当他或她单击菜单按钮时，它都会调用应用程序委托上的一个方法来隐藏或显示菜单。因此应用程序委托处理动画并添加和删除菜单作为当前显示的视图控制器的子视图。

# firefox - 在 Firefox 的扩展中获取页面大小

> ID：15095344
> 
> 赞同：1
> 
> 时间：2013-02-26T17:23:03.830
> 
> 标签：firefox, xpcom

我想在我的 Firefox 扩展中获取页面的大小。之前，我使用了这段代码：

```
var pageSize         = null,
    cacheService     = Components.classes["@mozilla.org/network/cache-service;1"].getService(Components.interfaces.nsICacheService),
    httpCacheSession = cacheService.createSession("HTTP", 0, true),
    cacheEntryDescriptor;

httpCacheSession.doomEntriesIfExpired = false;

cacheEntryDescriptor = httpCacheSession.openCacheEntry(content.document.location.toString().replace(/#.*$/, ""), Components.interfaces.nsICache.ACCESS_READ, false);

if ( cacheEntryDescriptor ) {
    pageSize = Math.round(cacheEntryDescriptor.dataSize / 1024 * 100) / 100;
} 
```

但是更新浏览器后，我得到了错误：

```
NS_ERROR_NOT_AVAILABLE: Component returned failure code: 0x80040111 (NS_ERROR_NOT_AVAILABLE) [nsICacheSession.openCacheEntry] 
```

排队：

```
cacheEntryDescriptor = httpCacheSession.openCacheEntry(content.document.location.toString().replace(/#.*$/, ""), Components.interfaces.nsICache.ACCESS_READ, false); 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:26:02.433

`openCacheEntry`从主线程调用时失败，请使用`asyncOpenCacheEntry`

# c++ - C++ 中主要和设计问题之前的类

> ID：15095348
> 
> 赞同：2
> 
> 时间：2013-02-26T17:23:14.270
> 
> 标签：c++, oop, design-patterns, object, ooad

**第 1 部分：**我有一个非常奇怪的情况，在这种情况下，我必须在 main() 之前或在它进入 main() 时立即调用几个类的构造函数。还有另一个子系统需要该数据尽快启动这个子系统的 main() 和更多的东西，这使得这个概念看起来更有用。

我在这里有两种方法：

1.  在 main() 之前使用全局对象。

2.  在 main() 的第一行中使用静态类定义。

另一个想法是（因为我使用 gcc）是使用`attribute __constructor__`gcc 保留功能。

你有什么建议？

**第 2 部分：**为了进一步解决这个问题，我需要解耦这些类的开发。（这更像是一个代码库设计问题。）

也就是说，如果有人正在编写**classA**而其他人正在编写**classB**，那么我们将拥有两个单独的文件，分别是**classA**和**classB**，在他们的 files/modules 中定义并*调用他们自己的构造函数*。

这是一个示例代码，说明了我的想法：

```
class Init_myclass
{
public:
  Init_myclass(): myvar(10)
  {
    std::cout << __PRETTY_FUNCTION__ << ":" << myvar << std::endl;
  };
private:
  int myvar;
};

static Init_myclass TestInit; //Initializing object prior to main
int main ()
{
  std::cout << __PRETTY_FUNCTION__ << std::endl;
  //Use the data populated by the Init_myclass constructor
  return 0;
} 
```

在上面的代码中，将**Init_myclass**替换为 100 个类定义，如**classA、classB**等。

另一种方法是*使用文件中的单个构造函数*从内部调用其他文件中定义的多个类构造函数。

这是可以帮助您理解我的想法的示例代码：

```
class InitializeOne
{
public:
  InitializeOne(): myvar(10)
  {
    std::cout << __PRETTY_FUNCTION__ << ":" << myvar << std::endl;
    A bunch of constructors of other classes here();
    classA();
    classB();
    ....
  };
private:
  int myvar;
};

int main()
{
static InitializeOne TestInit;//Object after main
... //functions depending on data populated by Initialize constructor 
} 
```

类的初始化顺序无关紧要，但它们必须在 main 之前或进入 main 时立即初始化。

哪种设计更可取，为什么？

我希望，我让我的问题可以理解。如果没有，请告诉我，我遗漏了哪些信息或过于简单/复杂等。

感谢您的回复和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:33:36.853

如果可能，您应该选择方法 2。

创建一个单例类：

```
class InitializeOnce {

public:
    static InitializeOnce& getInstance()
    {
        static InitializeOnce theInstance;
        return theInstance;
    }

    virtual ~InitializeOnce() {}

    classA& getClassA() { return classA_; }
    classB& getClassB() { return classB_; }

private:
    classA classA_;
    classB classB_;

    InitializeOnce()
    : classA_()
    , classB_()
    {
    }

    InitializeOnce(const InitializeOnce& rhs); // Prohibit copying!
    InitializeOnce& operator=(const InitializeOnce& rhs); // Prohibit assigning!
}; 
```

...并从 main 访问它一次：

```
int main()
{
    static InitializeOnce& theInstance = InitializeOnce::getInstance();

    // ... functions depending on data populated by Initialize constructor 
} 
```

在方法 1 的情况下，这将是：

```
static InitializeOnce& theInstance = InitializeOnce::getInstance();

int main()
{

   // ... functions depending on data populated by Initialize constructor 
} 
```

**注意**
您提出的方法将导致不同的行为，因为函数局部静态变量保证在至少第一次访问它们之前被实例化，如果您真的需要在调用 main()**之前**访问它，您必须选择方法 1。

恕我直言，应该避免您的第三个想法，编译器特定的属性定义（即使它是 gcc）将使代码的可移植性降低。

# c# - 为什么很少有运算符不能重载？

> ID：15095349
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:23:14.897
> 
> 标签：c#, operator-overloading

我对 C# 中的运算符重载的概念有疑问。我们可以重载少数运算符，而少数不能重载。限制少数运算符重载是否有任何特殊原因。如果是这样，任何人都可以解释我的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:32:01.630

原因与引用在 C# 中只能具有一组行为这一事实有关。您应该搜索过[Stack Overflow](https://stackoverflow.com/questions/599367/why-can-not-be-overloaded-in-c)。这是一个解决此类问题的好网站；）

这篇文章只处理赋值运算符，但像 ?: 这样的运算符也处理引用，所以它们也不能重载。

# c - 定义一些东西（1 << 0）

> ID：15095350
> 
> 赞同：15
> 
> 时间：2013-02-26T17:23:18.680
> 
> 标签：c

我来到了这行代码：

```
#define CPARSER_FLAGS_DEBUG        (1 << 0) 
```

它有什么作用？它与以下内容相同：

```
#define CPARSER_FLAGS_DEBUG        (1) 
```

对？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T17:25:20.813

是的。在设置标志值时，它可能用于对称性：

```
#define FLAG_1  (1 << 0)
#define FLAG_2  (1 << 2)
#define FLAG_3  (1 << 3)
/* ... */ 
```

不要担心性能，一个好的编译器将能够优化这样的操作。

您可以按如下方式组合这些值：

```
/* Flags FLAG_1, FLAG_2 and FLAG_3 are set. */
f = FLAG_1 | FLAG_2 | FLAG_3; 
```

并测试是否设置了给定标志：

```
/* True if FLAG_1 is set. */
if (f & FLAG_1) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-26T18:03:51.413

在受 C 启发的语言中，`<<`运算`>>`符是左移和右移[运算](http://en.wikipedia.org/wiki/Bitwise_operation#Shifts_in_C.2C_C.2B.2B.2C_C.23)符（尽管在 C++ 中它们可以重载——最著名的重载可能是[I/O 流运算符](http://en.wikipedia.org/wiki/Input/output_%28C++%29)）。例如，

```
x = y << 2; 
```

将 y 左移两位的结果赋给 x.

通常你会在低级代码中看到很多字节移位，这就是为什么......任何硬件都提供了一种配置和控制其行为的方法，但没有人愿意使用整个整数来表示，比如说，开/关状态。因此，硬件开发人员通常提供单个整数（也称为寄存器，通常是无符号 32 位）并声明，例如，位 #0 启用或禁用数据传输，位 #1 启用或禁用数据过滤，位 #3 确实一些其他的魔法等等力量。通常，可以同时读取或更改一项或多项设置。现在想象一下，这对软件开发人员来说是多么方便——而不是使用简单的整数（或布尔值），程序员必须处理 CPU 通常无法寻址的位。为了简化他们的生活，开发人员定义了掩码。坚持上面的例子，

```
#define MYDEV_ENABLE_DATA_FLOW (1u<<0)
#define MYDEV_ENABLE_FILTERING (1u<<1)
#define MYDEV_ENABLE_MAGIC     (1u<<2) 
```

由于已知移位表达式的右侧，编译器将为每个值分别生成以下整数：

*   1
*   2
*   4

起初这可能没有多大意义，但如果您以二进制表示形式查看这些值，则如下所示：

*   0b001
*   0b010
*   0b100

换言之，每个值在不同位置仅设置一个位。然后，假设我们想要启用数据传输和魔术功能，但不启用我们想象中的设备的过滤。为此，我们只需要设置#0 和#2 位（`1`），以及取消设置#1 位（`0`）。这是当[按位或](http://en.wikipedia.org/wiki/Bitwise_operation#OR)运算符以及我们预定义的掩码派上用场的时候。我们要做的是：

```
uint32_t value_for_device = MYDEV_ENABLE_DATA_FLOW | MYDEV_ENABLE_MAGIC; 
```

其中 "OR"`0b001`和`0b100`，赋予`0b101`价值。我们将其发送到设备，它会检查每一位并启用或禁用相应的功能。

也经常使用其他位操作。比如说，我们不知道当前启用或禁用了什么，我们不想更改任何内容，只需确保关闭数据过滤即可。这可以通过读取当前配置、取消设置位并将其写回来完成。例如：

```
uint32_t value;
value = read_from_device();
value &= (~MYDEV_ENABLE_FILTERING);
write_to_device(value); 
```

当然，这不是唯一的用法。有关许多有用的示例，请参阅[Sean Eron Anderson 的“Bit Twiddling Hacks”](http://graphics.stanford.edu/~seander/bithacks.html)。

好的，回到你最初的问题——为什么要写作`(1<<0)`而不是简单地写作`(1)`？有几个原因：

## 一致性

有这样的东西更一致：

```
#define A (1<<0)
#define B (1<<1)
#define C (1<<2) 
```

而不是这样：

```
#define A (1)
#define B (1<<1)
#define C (1<<2) 
```

甚至这样：

```
#define A 1
#define B 2
#define C 4 
```

## 可维护性

### 容易改变周围的事物

它使改变周围的事物变得更容易。通过仅更改移位宽度而不是继续添加/删除 '<

### 意向表达

它向阅读代码的人清楚地说明了作者的意图。只是`1`意义不大。但是当您看到时，`1<<0`您很可能会假设涉及位移并且代码使用位掩码。

## 灵活性

想象一下，应该执行移位的数字被定义为宏。例如：

```
#define MY_BIT (1u<<MAGIC_BIT_OFFSET) 
```

然后，你真的不知道结果是否正确`1`。您可以单独保留位偏移定义。

可能还有更多的理由不会立即出现在我的脑海中。

希望它能澄清一些*事情*。祝你好运！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-26T17:25:29.493

通常这样做是为了表明定义代表一个位标志。特别是。当有多个标志一起定义时。在这种情况下，移位的幅度定义了定义所代表的位位置。像这样定义它也能让事情很好地排列起来：

```
#define FOO_FLAG (1 << 0)
#define BAR_FLAG (1 << 1)
#define BAZ_FLAG (1 << 2) 
```

这可以在调用需要一系列标志的函数时使用，如下所示：

```
int ret = some_function(FOO_FLAG | BAR_FLAG) & BAZ_FLAG; 
```

然后使用位`0`和`1`(FOO & BAR) 调用函数并检查返回以查看位`2`(BAZ) 是否已设置。

# java - 使用字符串的 Java 方法

> ID：15095355
> 
> 赞同：2
> 
> 时间：2013-02-26T17:23:28.000
> 
> 标签：java, string, methods

请我需要这种方法的帮助：

```
String d = ret.getData(); //I get the string using this
int ui;
ui = d.indexOf("=", d.indexOf("=")+1);
do{
int f=d.indexOf("=", ui+1 );
System.out.println(d.substring(ui+1, f-1));//Here I'm showing the results of my code
ui = ui + d.indexOf("=", ui);}
while ((d.indexOf("=") + ui)!= 0); 
```

我拥有的字符串是这个：

```
!re
=.id=*1
=name=ether1
=mtu=1500
=l2mtu=1600
=mac-address=D4:CA:6D:37:44:26
=arp=enabled
=auto-negotiation=true
=full-duplex=true
=speed=100Mbps
=running=true
=slave=false
=disabled=false 
```

我的代码的结果是：

```
*1
ether1
l2mt
24:22
nin 
```

我想要得到的是：

```
*1
ether1
1500
1600
D4:CA:6D:37:44:26
enabled
true
true
100Mbps
true
false
false 
```

我需要得到“=”之后的所有内容

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:27:14.057

也许您可以使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)，以“=”作为分隔符。只需运行scanner.next() 并读取每个令牌：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:30:07.193

您可以使用`d.split("=")`方法并获取结果数组的最新值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:31:53.040

就这样做吧。

```
Scanner scan = new Scanner( ret.getData() );
scan.nextLine(); //skip the first line

While (scan.hasNextLine()){
     String s = scan.nextLine();
     int index = s.lastIndexOf("=");
     System.out.println(s.substring(index+1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:36:15.680

尝试在 string.split 函数的帮助下拆分字符串`=`。它将返回字符串数组。现在在 for 循环中将其递增两次并显示输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T17:36:20.803

拆分器会有所帮助，并且是最简单和正确的方法。但是，如果您想以其他方式触摸鼻子或寻找替代方法，则可以使用正则表达式/模式匹配器。:-)

```
public static void main(String[] args) {
    TestClass test = new TestClass();

    String d = "=mtu=1500"; //I get the string using this
    Scanner scan = new Scanner(d);
    System.out.println(scan.nextLine().split("=")[2]);

} 
```

这将打印 - 1500

# asp.net - JuiceUI 菜单在带有分页栏的 ASP.NET Postback 上中断

> ID：15095358
> 
> 赞同：0
> 
> 时间：2013-02-26T17:23:37.483
> 
> 标签：asp.net, dopostback, juice-ui

我有一个设置了 JuiceUI 菜单的 ASP.NET 4.0 网站。当页面默认出现时，一切看起来都很好。在我的页面上有一个表格显示（在代码中使用 GridView）和底部的分页，调用类似 PostBack

```
__doPostBack('ctl00$MainContent$GridView21','Page$3') 
```

导致 JuiceUI 菜单中断。

Web 开发者控制台中的错误代码说

未捕获的类型错误：无法读取 null 的属性“eval”

完整的跟踪：

```
Uncaught TypeError: Cannot read property 'eval' of null juice.js:97
(anonymous function) juice.js:97
jQuery.extend.each jquery-1.8.2.js:605
(anonymous function) juice.js:96
jQuery.extend.each jquery-1.8.2.js:611
ready juice.js:55
fire jquery-1.8.2.js:974
self.fireWith jquery-1.8.2.js:1082
jQuery.extend.ready jquery-1.8.2.js:406
DOMContentLoaded 
```

似乎与第一次加载页面时看到以下监视表达式的事实有关：

```
widget.options: Object 
proto: Object 
```

单击分页#后，值更改为：

```
widget.options: Object 
icons: Object 
menu: null 
position: Object 
proto: Object 
```

是什么导致 doPostback 时小部件选项中的菜单为空，我能做些什么来解决这个问题？

有人可以阐明正在发生的事情以及可以采取哪些措施来解决此问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:49:02.547

代码中有一个错误。

必须从以下位置更改 juice.js 文件：

```
 $.each( widget.options, function( prop ) {
            if( this.eval ){
                var on = this.on; 
```

至：

```
 $.each( widget.options, function( prop ) {
            if( this && this.eval ){
                var on = this.on; 
```

仅供参考，即使没有更改，这在 IE 中也可以正常工作，但在 Chrome 和 Firefox 中却被破坏了。包括“this”检查解决了这个问题。希望果汁开发人员看到这篇文章并做出更改或回复。

# jquery - ie9 中的 Keith Wood Datepick 在点击时不起作用

> ID：15095359
> 
> 赞同：3
> 
> 时间：2013-02-26T17:23:38.540
> 
> 标签：jquery, jquery-plugins, datepicker, internet-explorer-9

我正在使用带有 JQuery 1.8.2的[Keith Wood Datepick 插件。](http://www.keith-wood.name/datepick.html)我有两个日历日期选择器输入。用户单击第一个输入（显示日历），然后单击下一个输入，因此显示第二个日历，关闭第一个。

在这一步中，在 FF 中发生了这个错误：

> TypeError: inst.div is null
> inst.div.remove();

但继续工作。但是，在 Internet Explorer 9 上的同一步骤中，插件停止运行并且不再工作。我需要刷新页面以恢复功能。这是我的 JavaScript 代码：

```
$(function() {
     $('#date1,#date2').datepick();
}); 
```

请检查此示例：http: [//jsfiddle.net/wjwa5/8/](http://jsfiddle.net/wjwa5/8/)。

它适用于 jQuery 1.4.4，但我需要它在 1.8.2 版本中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:58:43.950

问题是 Datepicker **hide()**方法假设 jQuery 如何处理它自己的**hide()**方法的参数。也就是说，回到 jQuery 1.4.4，如果你打了一个电话

```
$('#some-element').hide('',someCallback) 
```

jQuery 会将第一个元素视为`speed`参数，除非该参数满足表达式

```
speed || speed === 0 
```

jQuery 将忽略参数并像以前一样执行函数

```
$('#some-element').hide() 
```

这意味着*回调永远不会被调用*。

好吧，为 Datepicker 实现代码的人认识到了这种行为，并且没有更改参数以正确触发回调，而是想出了仅手动调用回调的解决方法。

**这是4.0.6**（OP版本）的摘录

```
else { 
  // Note: This branch will always execute when one datepicker opening
  //       triggers the closing of another. Moreover, showAnim === ''
  var hideAnim = (showAnim == 'slideDown' ? 'slideUp' :
    (showAnim == 'fadeIn' ? 'fadeOut' : 'hide'));
  inst.div[hideAnim]((showAnim ? showSpeed : ''), postProcess);
}
if (!showAnim) {
  postProcess();
} 
```

当一个日期选择器的打开触发另一个日期选择器的关闭时，上面的代码将减少为

```
inst.div.hide('', postProcess); // this is the jQuery.fn.hide function
postProcess(); 
```

**哪个工作正常...在 jQuery 1.4.4 中。**

然而，从那时起，jQuery 得到了改进，如果你将回调传递给**hide**方法，jQuery 将确保它在完成时被调用。因此，您遇到的问题是回调`postProcess`被调用了两次。

## 解析度

要解决此问题，使其不再在以后的 jQuery 版本中引发异常，您只需要消除/注释掉这些行

```
if (!showAnim) {
  postProcess();
} 
```

如果您还希望修复与旧 jQuery 版本向后兼容，您还应该更改

```
inst.div[hideAnim]((showAnim ? showSpeed : ''), postProcess); 
```

到

```
inst.div[hideAnim]((showAnim ? showSpeed : 0), postProcess); 
```

## [Plunk](http://plnkr.co/edit/GkD2XJAMPYTjs9tH6XGn?p=preview)（使用 4.1.0）

[**注意：**在**4.1.0**中引入了一种解决方法，它只是在`postProcess`方法中进行测试以首先检查`null`值。但是，这忽略了回调被调用两次的核心问题。]

# android - 不同安装的基本身份验证

> ID：15095364
> 
> 赞同：0
> 
> 时间：2013-02-26T17:23:49.287
> 
> 标签：android, authentication, basic-authentication

我正在创建的应用程序使用电话号码进行身份验证。对于我们使用的身份验证

phoneNumber：基本身份验证标头的密码。目前，相同的密码用于多个设备上的用户。

我们现在需要支持多种设备。所以我们正在考虑为每个号码分配一个新密码。

这样做有意义吗？无论电话号码如何，我们是否应该在每次安装时都有一个 UserId 和用户？我们是否应该为每个安装/每个用户/每个电话号码设置一个新密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:26:13.590

这绝对与应用程序的功能有关。您想在设备之间共享数据吗？您可能应该使用 Facebook、Google 和用户名/密码登录（支持以上所有），以便您的所有用户都可以登录并拥有相同的帐户。然后，您可以将电话号码分配给该帐户。

如果您想要不同平台的单独数据，那么当然使用电话号码作为用户标识。

# java - Arraylist 提取值并更新

> ID：15095373
> 
> 赞同：0
> 
> 时间：2013-02-26T17:24:30.847
> 
> 标签：java, arraylist

我有 2 个数组列表。我使用一个数组列表作为存储值的键。

简而言之，我的代码如下。

```
 for(int i=0;i<transactionid.size(); i++)
    {
        if(transactionid.get(i).equals(transactionnumber))
        {
            transactionvalue.set(i, transactionvalues);
        }
    } 
```

在上面的程序片段中，**transactionid**用于存储我的键值。如果键值匹配，我将更新 arraylist **transactionvalue**。

到目前为止，一切都很好。但是现在，我想根据上面的两个arraylist 值更新另一个arraylist **diskitemvalues 。**更新如下所示。

```
for(int i=0;i<transactionid.size(); i++)
{
    if(transactionid.get(i).equals(transactionnumber))
    {
    try
    {
        /* Open file to read contents*/
        while ((strLine = br.readLine()) != null)   
        {
           /* Get the values of transactionvalue arraylist and update them. */
           /* The transactionvalue arraylist contains values like {X Y}     */
           /* So my update in the diskitemvalues arraylist 
              should be X = so & so Y = so & so based on file               */ 
```

我必须导航到 transactionid 数组列表中的特定值，**对于**那个特定的键，我必须找出 transactionvalue 数组列表中的相应值，并为**transactionvalue****数组**列表中存在的所有值更新**diskitemvalues 数组列表**。

 **例子：

Transactionid 交易价值 1 XY

2 百万

对于 transactionid = 2，我的 diskitemvalues [2] 应该有来自输入文件的 M = so & so 和 N = so & so。如果它是 transactionid = 1，我的 diskitemvalues[1] 应该有 X = so & so 和 Y = so & so 来自输入文件。**

# ios6 - 在 UIPageViewController 中预加载下一页

> ID：15095375
> 
> 赞同：7
> 
> 时间：2013-02-26T17:24:37.813
> 
> 标签：ios6, uipageviewcontroller, uiswipegesturerecognizer

我已经看了很多很多地方，但还没有找到一些好的示例代码来展示如何在 UIPageViewController 中预加载“下一个”页面。SO上有一些答案详细说明了一些理论方法（请参阅[this question](https://stackoverflow.com/questions/11659604/preloading-pages-of-uipageviewcontroller)），但还没有人发布一个工作示例。

在我的应用程序的工作流程中，我每个屏幕显示 1 页，我希望预加载“下一个”屏幕，因为实际上，滑动到下一页可能非常慢，有时需要 2 次滑动（如果你滑动太快) 以便渲染和显示下一页。这提供了糟糕的用户体验。我并不真正关心预加载“上一个”或任何其他屏幕，因为典型的工作流程是用户在移动到下一个屏幕（右侧）之前在屏幕上停留一段时间。我正在使用幻灯片动画（不是卷曲）。我以编程方式创建所有视图，根本不使用 IB。

我尝试将一些 UIViewControllers 存储在 NSMutableArray 中并从那里加载控制器，但是要正常工作很棘手，而且似乎没有加快任何速度。必须有一个好的方法来做到这一点。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-30T09:27:23.753

我已经通过一些技巧解决了我的情况。对于每个`ContentView`，我都有一个用于缩放的`UIImageView`内。`UIScrollView`我的问题是，在启动应用程序时，如果用户在滑动之前进行了缩放，那么在放大时转到下一页不会很好。我使用以下代码（Swift 1.2）来解决这个问题。正如我所说，这有点像黑客攻击。

```
var layoutsubs = false

override func viewDidLoad() {
    super.viewDidLoad()
    //Other code for implementing pageViewController omitted

    //add pageViewController to main view
    self.addChildViewController(pageViewController)
    self.view.addSubview(pageViewController.view)
    pageViewController.didMoveToParentViewController(self)

    //Load to the viewController after the starting VC, then go back to the starting VC
    var viewControllers = [afterVC]
    pageViewController.setViewControllers(viewControllers as [AnyObject], direction: .Forward, animated: true, completion: nil)
    viewControllers = [startingVC]
    pageViewController.setViewControllers(viewControllers as [AnyObject], direction: .Reverse, animated: true, completion: nil)
}

override func viewWillLayoutSubviews() {
    //Load the viewController before the starting VC then go back to the starting VC
    //viewWillLayoutSubviews() is called multiple times, so do this only once
    if !layoutsubs {
        let startingVC = self.viewControllerAtIndex(imageIndex) as ContentViewController
        let beforeVC = pageViewController(pageViewController, viewControllerBeforeViewController: startingVC) as! ContentViewController

        var viewControllers = [beforeVC]
        pageViewController.setViewControllers(viewControllers as [AnyObject], direction: .Reverse, animated: true, completion: nil)
        viewControllers = [startingVC]
        pageViewController.setViewControllers(viewControllers as [AnyObject], direction: .Forward, animated: true, completion: nil)
        layoutsubs = true
    }
} 
```

本质上，我在启动视图控制器之前和之后加载视图控制器。我通过将每个设置为 VC 以查看通过`setViewControllers(_:direction:animated:completion:)`（[请参阅 ref](https://developer.apple.com/library/prerelease/ios//documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/index.html#//apple_ref/occ/instm/UIPageViewController/setViewControllers:direction:animated:completion:)），然后返回到起始视图控制器来做到这一点。为什么这是两个不同的功能？好吧，如果你把它们合二为一，那么只有启动 VC 旁边的两个视图控制器中的一个会加载。这在某些情况下可能是可取的，但我需要加载所有三个 VC（之前、启动和之后）。

`UIPageViewController`如果已经加载，我不确定这种方法的效果如何。例如，如果您需要在几次滑动后将页面 2 加载到远离正在查看的页面的位置。如果你把它放进去，它可能会跳来跳去`willTransitionToViewControllers()`。

# visual-studio-2010 - 无法分析 Azure 辅助角色

> ID：15095376
> 
> 赞同：2
> 
> 时间：2013-02-26T17:24:43.587
> 
> 标签：visual-studio-2010, azure, profiling

我正在尝试使用 Visual Studio 2010 Premium 的 Azure 内置分析，但遇到了问题。我在做什么似乎遵循教程，但我的“启用分析”复选框是灰色的。我以管理员身份使用在 Windows 8 x64 上运行的 Windows Azure 工具 1.8（2012 年 10 月）和 VS2010 Premium。我也启用了 RDP。我的理解是我已经满足了分析的所有要求。

我知道管理这些配置文件的唯一方法是右键单击我的云项目（带有文件的项目`.csdef`）`.cscfg`，单击“发布...”，然后使用其中的设置。在“高级”选项卡下，“启用分析”复选框是灰色的，所以我什至无法访问“分析设置”链接。

知道这笔交易是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:09:10.433

我现在已经放弃了，只是使用 dotTrace 进行远程分析。我概述了[在其他 SO question 上进行此](https://stackoverflow.com/a/15102944/294863)操作的步骤。如果有人对原始问题有特定的答案，我仍然对此非常感兴趣，如果您发布它，我很乐意将所选答案转移到该答案。在那之前，这个解决方案对我来说已经足够好了......

# c# - 使用敲除将对象从一个数组复制到另一个数组

> ID：15095380
> 
> 赞同：0
> 
> 时间：2013-02-26T17:25:06.290
> 
> 标签：c#, .net, json, mvvm, knockout.js

我正在使用 Webforms 页面。在它上面我有一个 KnockoutJS ViewModel，它通过调用后端 C# 代码来获取“客户”的序列化 JSON 列表。

我将该数组数据绑定到一个组合框，并且我想在单击按钮时将选定的客户添加到另一个数组。我希望选定客户的列表出现在一个简单的无序列表中。

单击“添加”按钮时，我不太确定如何将客户添加到“SelectedCustomers”属性。注意：我不想移动它们，只是复制。

**Javascript/淘汰赛绑定**

```
<script type="text/javascript">
    $(document).ready(function() {

        function CustomerViewModel() {
            var self = this;

            self.Customers= <%= getJson() %>;
            self.SelectedCustomers = ko.observableArray([]);

            //operations
            self.addCustomerToList = function() {
                //Add selected customer to self.SelectedCustomers 
            }

        }

        ko.applyBindings(new CustomerViewModel());
    });
    </script> 
```

**HTML 元素**

```
<select data-bind="options: Customers, optionsText: 'CustomerName', value: CustomerID, optionsCaption: 'Select a Customer to Add'"></select>

<button type="submit">Add Customer</button>

Selected Customers:

<ul data-bind="foreach: SelectedCustomers">
 <li><span data-bind="text: CustomerName"></span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:05:45.147

您可以将列表中选定的客户数据绑定到另一个数组 (ChosenCustomers)。请参阅[http://knockoutjs.com/documentation/selectedOptions-binding.html](http://knockoutjs.com/documentation/selectedOptions-binding.html)

```
<select data-bind="selectedOptions: ChosenCustomers, options: Customers, optionsText: 'CustomerName', value: CustomerID, optionsCaption: 'Select a Customer to Add'"></select> 
```

在 javascript 类中定义了 ChosenCustomers 数组：

```
self.Customers= <%= getJson() %>;
self.SelectedCustomers = ko.observableArray([]);
self.ChosenCustomers = ko.observableArray([]); 
```

在该方法中，我们检查它是否不存在，如果不存在，则将其添加到 SelectedCustomers 数组中。

```
self.addCustomerToList = function() {
    self.ChosenCustomers.each(function(index, item){
        if(self.SelectedCustomers.indexOf(item) < 0){
            self.SelectedCustomers.push(item);
        }
    });
}; 
```

**注意**：虽然您的组合框可能一次只允许选择 1 个客户，但 selectedOptions 绑定将始终是一个数组，但其中只有 1 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:21:51.903

我能够弄清楚这一点。在这里查看我的解决方案：

[http://jsfiddle.net/6vBsm/1/](http://jsfiddle.net/6vBsm/1/)

```
function ViewModel() {
    var self = this;

    self.Components = ko.observableArray([{
        "ID": "1",
            "Name": "Tennis Ball",
            "Description": "Basic Yellow Tennis Ball 9",
            "Quantity": 0,
            "Price": 1.99,
            "Discount": 0.0,
            "FreePeriods": 0
    }, {
        "ID": "2",
            "Name": "Hockey Stick",
            "Description": " Premium Carbon Fiber Construction",
            "Quantity": 0,
            "Price": 67.99,
            "Discount": 0.0,
            "FreePeriods": 0
    }, {
        "ID": "3",
            "Name": "Cycling Helmet",
            "Description": " For going fast.",
            "Quantity": 0,
            "Price": 226.99,
            "Discount": 0.0,
            "FreePeriods": 0
    }]);

    self.componentToAdd = ko.observable();
    self.SelectedComponents = ko.observableArray([]);

    // Computed data
    self.totalSurcharge = ko.computed(function () {
        var total = 0;
        for (var i = 0; i < self.SelectedComponents().length; i++)
        total += self.SelectedComponents()[i].Price;
        return total;
    });

    //Operations
    self.addComponent = function () {
        var mycopy = JSON.parse(ko.toJSON(self.componentToAdd()));
        self.SelectedComponents.push(mycopy);
    };

}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T17:31:08.220

假设您要复制 self.SelectedCustomers = ko.observableArray([]);

然后使用敲除的切片功能，如下所示

```
self.newselectedCustomers(self.SelectedCustomers().slice(0)); 
```

# mysql - 简单的 Rails/MySQL 查询产生一个奇怪的结果

> ID：15095386
> 
> 赞同：0
> 
> 时间：2013-02-26T17:25:26.927
> 
> 标签：mysql, ruby-on-rails, ruby

```
1.8.7 :011 > User.find(:first).id
  User Load (0.4ms)  SELECT `users`.* FROM `users` LIMIT 1
 => 1 

1.8.7 :012 > User.find(:first, :select => 'id')
  User Load (0.3ms)  SELECT id FROM `users` LIMIT 1
 => #<User id: 2> 
```

从我这边...我完全糊涂了。它应该在两个查询中都给我用户 ID 1 对吗？我所知道的是数据库中的第一个用户的 ID 为 1，我知道这个“问题/奇怪的结果”与 MySQL 有关。

```
SELECT * FROM `users` LIMIT 1;
= 1

SELECT id FROM `users` LIMIT 1;
= 2

SELECT id FROM `users` ORDER BY id ASC LIMIT 1;
= 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:27:58.607

在您明确排序之前，不会对来自选择的结果进行排序。没有特定的“第一”记录，除非您添加一个`ORDER BY`子句，告诉它应该根据哪些标准将记录视为“第一”。

特别是在 Ruby 中，`.first`方法 (or `find(:first)`) 不会应用任何排序，因此结果将（基本上）是随机的。如果您需要“第一条”记录每次都相同，则需要对结果进行排序：

```
User.order(:id).first 
```

这（有点奇怪）与该方法形成鲜明对比，该`.last`方法*将*自动应用`order(:id)`。

# safari - Selenium - 禁用弹出窗口拦截器

> ID：15095389
> 
> 赞同：3
> 
> 时间：2013-02-26T17:25:59.063
> 
> 标签：safari, selenium-webdriver, selenium-grid, popup-blocker

在发现我需要禁用弹出窗口阻止程序以允许我拥有的登录弹出窗口之前，我刚刚花`Selenium`了几个小时坚持下去。`Safari`

我的问题是，有没有办法在创建节点/webdriver 时禁用弹出窗口阻止程序`Selenium Grid 2`，或者在创建`RemoteWebDriver`代码时，或两者兼而有之？

否则，我必须手动记住通过自己打开浏览器来更改此设置。目的是让 Selenium 在多台机器上运行，因此能够以编程方式设置它会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T15:49:39.017

好的，这是我最终编写的 AppleScript：

```
tell application "System Events" to tell process "Safari"
    set frontmost to true
    keystroke "," using {command down}  -- open preferences
    delay 1
    tell window "Security"
        tell group 1
            tell group 1
                click checkbox "Block pop-up windows"
            end tell
        end tell
        key code 53  -- close preferences
    end tell
end tell 
```

如果你保存它，`popup.as`你可以像这样运行它：

`$ osascript popup.as`

请记住，这仅适用于本地，不适用于 Sauce Labs 等云服务。

# oracle - Grails 的 save(flush:true) 在 socketRead0 中挂起线程

> ID：15095396
> 
> 赞同：1
> 
> 时间：2013-02-26T17:26:15.213
> 
> 标签：oracle, hibernate, grails

Grails 2.2 中有一项`transactional=true`服务，我在其中执行以下操作：

```
...
client.save(flush: true) // it hangs here
... 
```

`withTransaction`如果我删除flush：true，则执行会进一步传递，尽管它稍后会挂起调用。

在我目前的大型项目中，我从未遇到过这样的问题。

我有*一个想法*扔掉一些flush'es和withTransaction，但这有点不受欢迎，因为目前代码中有很多。因此，即使它可以解决问题，这也将是一个痛苦的改变。

知道如何治愈/调查吗？

Grails 2.2 / Java 1.6 / Windows 7 x64 / Oracle XE

挂起线程的堆栈跟踪：

```
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:150)
java.net.SocketInputStream.read(SocketInputStream.java:121)
oracle.net.ns.Packet.receive(Unknown Source)
oracle.net.ns.DataPacket.receive(Unknown Source)
oracle.net.ns.NetInputStream.getNextPacket(Unknown Source)
oracle.net.ns.NetInputStream.read(Unknown Source)
oracle.net.ns.NetInputStream.read(Unknown Source)
oracle.net.ns.NetInputStream.read(Unknown Source)
oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:971)
oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:941)
oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:432)
oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:181)
oracle.jdbc.driver.T4CPreparedStatement.execute_for_rows(T4CPreparedStatement.java:543)
oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:8674)
   - locked oracle.jdbc.driver.T4CPreparedStatement@36df36e5
   - locked oracle.jdbc.driver.T4CConnection@788d1087
org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:114)
org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109)
org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244)
org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2412)
org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2875)
org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)
org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
org.codehaus.groovy.grails.orm.hibernate.events.PatchedDefaultFlushEventListener.performExecutions(PatchedDefaultFlushEventListener.java:46)
org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
org.codehaus.groovy.grails.orm.hibernate.metaclass.SavePersistentMethod.flushSession(SavePersistentMethod.java:87)
org.codehaus.groovy.grails.orm.hibernate.metaclass.SavePersistentMethod$1.doInHibernate(SavePersistentMethod.java:60)
org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:339)
org.codehaus.groovy.grails.orm.hibernate.metaclass.SavePersistentMethod.performSave(SavePersistentMethod.java:56)
org.codehaus.groovy.grails.orm.hibernate.metaclass.AbstractSavePersistentMethod.doInvokeInternal(AbstractSavePersistentMethod.java:215)
org.codehaus.groovy.grails.orm.hibernate.metaclass.AbstractDynamicPersistentMethod.invoke(AbstractDynamicPersistentMethod.java:63)
sun.reflect.GeneratedMethodAccessor662.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1243)
org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSite.invoke(PojoMetaMethodSite.java:189)
org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:55)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
org.codehaus.groovy.grails.orm.hibernate.HibernateGormInstanceApi.save(HibernateGormEnhancer.groovy:911)
xxx.domain.Consumer.save(Consumer.groovy)
xxx.domain.Consumer$save.call(Unknown Source)
org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
xxx.UserService.createUser(UserService.groovy:350)
............ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:01:57.280

您的堆栈跟踪指出了可能的问题：

```
oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:8674)
   - locked oracle.jdbc.driver.T4CPreparedStatement@36df36e5
   - locked oracle.jdbc.driver.T4CConnection@788d1087 
```

您的数据库上有一个（或多个线程）卡住的线程，并且应用程序正在挂起等待线程。您需要检查数据库状态以查看是否可以确定哪些查询挂起。更新到最新的 JDBC 驱动程序将很有帮助。

使用时发生这种情况的原因`flush: true`是因为它强制您的 Hibernate 会话刷新到数据库，在那里它遇到了卡住的线程。

# php - php常量不区分大小写问题

> ID：15095399
> 
> 赞同：3
> 
> 时间：2013-02-26T17:26:21.877
> 
> 标签：php

我用不区分大小写的参数覆盖了一个常量。但是 php 没有给我“常量已经定义”的错误。我启用了 E_ALL,E_STRICT 错误。示例：1

```
define('ONE',1000);
define('one',2000,true);
echo ONE; // prints 1000
echo one; // prints 2000 
```

在第二行中，我将 'one' 设置为另一个不区分大小写的常量，这意味着重新定义 'ONE'。但是 PHP 没有给出错误/警告。

示例：2

```
define('ONE',1000,true);
define('one',2000);
echo ONE; // prints 1000 with constant already defined notice
echo one; // prints 1000 
```

在这里我可以得到错误通知。

这两个代码块有什么区别。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T17:34:53.093

从[文档](http://www.php.net/manual/en/function.define.php)中：

> 注意：不区分大小写的常量存储为小写。

因此，当尝试在第二个示例中定义常量的小写版本时，由于先前对同名常量的不区分大小写定义，该常量已经定义。

```
define('ONE', 1000, true);  // defines strtolower("ONE") = "one"
define('one', 2000);        // error redefining "one" 
```

在第一种情况下，没有这样的碰撞：

```
define('ONE', 1000);        // defines "ONE"
define('one', 2000, true);  // defines strtolower("one") = "one" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:38:22.793

定义函数中的第三个参数是 case_insensitive 选项。 [http://php.net/manual/de/function.define.php](http://php.net/manual/de/function.define.php)

在第一个示例中，定义了常量 ONE。以及 case_insensitive 为 true 的常量。意味着您有一个可以通过 ONE 访问的变量和一个可以通过 oNe、One、oNE 等访问的变量。

在第二个示例中，您首先使用 case_insensitive true 定义常量 ONE，然后定义常量 ONE。但是这次所有可能的名字（OnE,oNe,one）都已经给出了，所以解释器给你一个错误通知

# php - Multisort - 大写/小写？

> ID：15095402
> 
> 赞同：1
> 
> 时间：2013-02-26T17:26:25.157
> 
> 标签：php

我试图使用多重排序，按排序字段然后按标题对数组进行排序。

```
foreach ($productContent as $key => $row)
{
    $title[$key] = $row['title'];
$sort[$key] = $row['sort'];
}

array_multisort($sort, SORT_ASC, $title, SORT_ASC, $productContent); 
```

这可行，但它不考虑标题字段中字符串的大小写。

我查看了文档，它建议创建一个小写数组，我对此进行了测试，它搞砸了多重排序。

任何人都可以给我这样的方式，所以它排序标题忽略字符串的大小写？

# php - 标题内容配置允许和字符

> ID：15095407
> 
> 赞同：0
> 
> 时间：2013-02-26T17:26:48.823
> 
> 标签：php, header, save, filenames

对不起我的英语不好..

我又来给你一些问题了！

我使用下面的代码行：

```
$link = $_GET['url'];
$name = $_GET['name'];
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: private");
header("Content-Disposition: attachment; filename=\"(wanted-web.ro) $name.mp3\"");
header("Content-type: audio/mpeg;\r\n");
readfile(str_replace(' ', '_', $link)); 
```

该代码用于从外部服务器下载直接链接 .mp3！

我的问题是：当我下载一些包含**&**字符的文件时，不要显示该字符之后的其余信息！

例如： **蕾哈娜和阿肯**

.. 总是给我保存名为**Rihanna**的文件.. Corect 是**Rihanna 和 Akon**，但是 amp 字符停止显示并且**Akon**

我尝试了许多不同的方法，但总是失败..

为了更好地解释，该脚本是一个 php 下载文件。当我点击下载**Rihanna & Akon**时，显示提示下载框！在下载框中只显示**蕾哈娜，但如果在****蕾哈娜**之后包含**&**字符，则永远不会和**Akon**

 ****希望能理解一些东西！

先感谢您 ！！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:34:19.130

上面代码示例的编码将是

```
header("Content-Disposition: attachment; filename=\"(wanted-web.ro) "
  .urlencode($name). ".mp3\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:31:48.533

尝试`urlencode`文件名，如下所示：

```
$name = urlencode($_GET['name']); 
```****

# python - 以尽可能高的精度打印 8 个字符的浮点数

> ID：15095411
> 
> 赞同：0
> 
> 时间：2013-02-26T17:27:04.073
> 
> 标签：python, floating-point

我正在寻找一种有效的方法来在 Python 中以 8 个字符的最高精度打印浮点数。可以使用`%f`或`%e`格式，具体取决于数字。您可以省略前导零和尾随零，因此`-0.123456`可以写成`-.123456`. 如果使用科学计数法，你也可以省略“e”这样`-1.234e-8`可以写`-1.234-8`。

我基本上是在寻找一个更快的版本： [http ://code.google.com/p/pynastran/source/browse/trunk/pyNastran/bdf/fieldWriter.py#80](http://code.google.com/p/pynastran/source/browse/trunk/pyNastran/bdf/fieldWriter.py#80)

在分析之后，我发现我的代码大约一半的时间都花在了链接的例程中，这被称为数十万次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:33:59.287

它可能有点不同的方向，但使用 python3-64 使用内置的**十进制模块**有大量小数。

[http://docs.python.org/3.3/library/decimal.html#](http://docs.python.org/3.3/library/decimal.html#)

这是一个例子：

```
>>> from decimal import *
>>> getcontext().prec = 20
>>> D = decimal.Decimal
>>> D('1')/D('22')
Decimal('0.045454545454545454545')
>>> getcontext().prec = 40
>>> D('1')/D('22')
Decimal('0.04545454545454545454545454545454545454545')
>>> 
```

PS。由于条款和条件始终适用，请查看有关顺序操作的说明：http: [//docs.python.org/3.3/library/decimal.html#mitigating-round-off-error-with-increased-precision](http://docs.python.org/3.3/library/decimal.html#mitigating-round-off-error-with-increased-precision)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:08:34.120

这是我能想到的最好的。它比我以前使用的功能更具可读性（在我看来），但它并不快。

```
def print_float_8(val, tol=0.0):
    if abs(val) <= tol:
        return '      0.'
    if val < 0:
        return print_float_neg_8(val)
    else:
        return print_float_pos_8(val)

def print_float_pos_8(val):
    if val < 0.01 or val > 100000:
        return print_float_sci_pos_8(val)
    if val < 0.1:
        f = '%8.6g' % val
    else:
        f = '%8.7g' % val
    if len(f) > 8:
        f = f.lstrip('0')
    return f

def print_float_sci_pos_8(val):
    if val < 1.0e-9:
        f = ('%10.3e' % val).replace('e-', '-')
    elif val < 1:
        f = ('%10.4e' % val).replace('e-0', '-')
    elif val <= 1.0e9:
        f = ('%10.4e' % val).replace('e+0', '+')
    else:
        f = ('%10.3e' % val).replace('e+', '+')
    return f.strip()

def print_float_neg_8(val):
    if val > -0.01 or val < -10000:
        return print_float_sci_neg_8(val)
    if val > -0.1:
        f = '%8.5g' % val
    else:
        f = '%8.6g' % val
    if len(f) > 8:
        f = f.replace('-0.', '-.')
    return f

def print_float_sci_neg_8(val):
    if val > -1.0e-9:
        f = ('%-8.2e' % val).replace('e-', '-')
    elif val > -1:
        f = ('%-8.3e' % val).replace('e-0', '-')
    elif val >= -1.0e9:
        f = ('%-8.3e' % val).replace('e+0', '+')
    else:
        f = ('%-8.2e' % val).replace('e+', '+')
    return f.strip() 
```

# trigger.io - Trigger.io Forge 中的本机共享菜单

> ID：15095413
> 
> 赞同：4
> 
> 时间：2013-02-26T17:27:13.590
> 
> 标签：trigger.io

有没有办法从 Trigger.io 应用程序访问本机共享菜单？也就是说，通常会显示用户在手机上拥有的所有兼容应用程序的菜单，他们可以从打开的应用程序中共享某些内容？

# powershell - 使用当前日期时间向数据表添加日期时间？

> ID：15095421
> 
> 赞同：2
> 
> 时间：2013-02-26T17:27:54.623
> 
> 标签：powershell, datatable

我正在尝试使用当前日期时间将字段添加到数据表中。我想在此处添加它，以便当我使用另一段代码创建表时，它会将其创建为 datetime（add-sqltable，值得一提）。

```
#create the datatable
$quer = invoke-sqlcmd2 -serverinstance myservername -database "tempdb" -query "select @@servername as servername" -As 'DataTable' 
#now add the datetime field
$quer.columns.add("InsDate",[DateTime]) 
```

在这一点上，我卡住了。这不起作用：

```
$quer | %{$_.InsDate = get-date} 
```

我收到此错误消息：

```
Exception setting "InsDate": "Unable to cast object of type
 'System.Management.Automation.PSObject' to type 'System.IConvertible'.Could
n't store <2/26/2013 11:26:23 AM> in InsDate Column.  Expected type is DateTime." 
```

更改格式也不起作用。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:22:42.327

试试这个：

```
$quer | %{[datetime]$_.InsDate = get-date} 
```

或这个：

```
$quer | %{$_.InsDate = [datetime](Get-Date)} 
```

我没有能力测试您的具体案例，但我相信其中一个应该可以工作。

编辑：将关闭的“）”更改为“}”以修复答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:58:16.647

这是一个解决方法：

```
 $date = get-date 
    $quer | %{$_.InsDate = [DateTime]$date} 
```

在这里找到： [DateTime parsing in PowerShell](https://stackoverflow.com/questions/12488879/datetime-parsing-in-powershell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:50:54.387

嗯可能在这里遗漏了明显的东西，但是您不能调整您的 SQL 查询以从源头提取日期时间吗？

像这样的东西：

```
select
@@servername as [servername],
GETDATE() as [DateTime] 
```

这可能是我会做的，而不是以后再捏造它！:D

# php - 使用函数将 DOMDocument 从 PHP 传输到 Javascript

> ID：15095424
> 
> 赞同：0
> 
> 时间：2013-02-26T17:28:15.303
> 
> 标签：php, javascript, domdocument

我有一个 PHP 函数创建一个 DOMDocument XML 文件，我需要将 DOMDocument 转换为 Javascript，我考虑过使用

PHP中的函数返回DOMDocument，这是PHP函数

```
function coursexml($cc, $type){
    $xmlfile = new DOMDocument();

    if (@$xmlfile->load("books.xml") === false || $cc == "" || $type == "") {

        header('location:/assignment/errors/500');
        exit;
    }
    $string = "";

    $xpath = new DOMXPath($xmlfile);
    $nodes = $xpath->query("/bookcollection/items/item[courses/course='$cc']");
    $x = 0;
    foreach( $nodes as $n ) {

        $id[$x] = $n->getAttribute("id");

        $titles = $n->getElementsByTagName( "title" );
        $title[$x] = $titles->item(0)->nodeValue;
        $title[$x] = str_replace(" /", "", $title[$x]);
        $title[$x] = str_replace(".", "", $title[$x]);

        $isbns = $n->getElementsByTagName( "isbn" );
        $isbn[$x] = $isbns->item(0)->nodeValue;

        $bcs = $n->getElementsByTagName( "borrowedcount" );
        $borrowedcount[$x] = $bcs->item(0)->nodeValue;

        if ($string != "") $string = $string . ", ";

        $string = $string . $x . "=>" . $borrowedcount[$x];
        $x++;
    }

    if ($x == 0) header('location:/assignment/errors/501');
    $my_array = eval("return array({$string});");
    asort($my_array);

    $coursexml = new DOMDocument('1.0', 'utf-8');
    $coursexml->formatOutput = true;
    $node = $coursexml->createElement('result');
    $coursexml->appendChild($node);
    $root = $coursexml->getElementsByTagName("result");
    foreach ($root as $r) {
        $node = $coursexml->createElement('course', "$cc");
        $r->appendChild($node);
        $node = $coursexml->createElement('books');
        $r->appendChild($node);
        $books = $coursexml->getElementsByTagName("books");
        foreach ($books as $b) {
            foreach ($my_array as $counter => $bc) {
                $bnode = $coursexml->createElement('book');
                $bnode = $b->appendChild($bnode);
                $bnode->setAttribute('id', "$id[$counter]");
                $bnode->setAttribute('title', "$title[$counter]");
                $bnode->setAttribute('isbn', "$isbn[$counter]");
                $bnode->setAttribute('borrowedcount', "$borrowedcount[$counter]");
            }
        }
    }   
    return $coursexml;
} 
```

所以我想做的是在 Javascript 中调用该函数，并返回 DOMDocument。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:02:06.357

尝试以下

```
<?php include('coursexml.php'); ?> 
<script> 
    var xml = <?php $xml = coursexml("CC140", "xmlfile"); 
                    echo json_encode($xml->saveXML()); ?>; 
    document.write("output" + xml);
    var xmlDoc = (new DOMParser()).parseFromString(xml, 'text/xml');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:31:46.310

你可以简单地把这个函数放到一个 URL 中（例如把它放在一个独立的文件中？这取决于你），然后通过 AJAX 从客户端调用它。有关进行此类调用的详细信息，请参阅[如何在没有 jQuery 的情况下进行 AJAX 调用？](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery).

**编辑：** 尝试创建一个简单的 PHP 文件，其中包含并调用您拥有的函数。从你到目前为止所描述的，它可能看起来像

```
 <?php 
    include("functions.php");
    print coursexml($cc, $type); 
```

假设该文件名为 xml.php ，当您通过浏览器在[http://mydomain.com/xml.php](http://mydomain.com/xml.php)访问它时，您应该会看到 XML 文档（到目前为止与 Javascript 无关）。

现在，在您的主文档中，您包含一段 Javascript，它将调用此 URL 来加载 XML。一个例子是（假设您使用的是 jQuery，对于一个简单的 Javascript 函数，请参考上面的链接）：

```
 $.ajax({
   url: "xml.php",
   success: function(data){
      // Data will contain you XML and can be used in Javascript here
   }
 }); 
```

# javascript - 使用 highcharts.js 标签进行绘图是偏离中心而不是居中呈现

> ID：15095431
> 
> 赞同：1
> 
> 时间：2013-02-26T17:28:40.987
> 
> 标签：javascript, highcharts

我正在使用 highcharts (highcharts.js) 使用“bands”功能创建一个绘图。频段配置如下：

```
"plotBands": [{
                "color": "#E5F6F6",
                "from": -0.5,
                "to": 4.5,
                "label": {
                    "text": 'January',
                    "align": "center",
                    "verticalAlign": "top"
                }
            }, {
                "color": "#FFFFFF",
                "from": 3.5,
                "to": 8.5,
                "label": {
                    "text": "February",
                    "align": "center",
                    "verticalAlign": "top"
                }
            }] 
```

此配置在标签上使用 align:center，因此它们应该水平居中。不幸的是，它们被渲染为偏离中心。

您可以在此处找到演示该问题的小提琴：http: [//jsfiddle.net/MpvSA/](http://jsfiddle.net/MpvSA/)。

“一月”标签应水平居中，但在 65% 时显示的比在 50% 时更多。这个问题在我试过的所有浏览器中都能可靠地重现。

知道为什么标签偏离中心以及如何纠正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:42:12.173

这是因为你有两个图带，白色（右）首先重叠，因为太宽了。（比例为 7，但 plotband 为 8,5）

因此，您可以将 zIndex 设置为第一个（蓝色）并且问题消失。[http://api.highcharts.com/highcharts#xAxis.plotBands.zIndex](http://api.highcharts.com/highcharts#xAxis.plotBands.zIndex)

# jqgrid - 根据单元格值在jqGrid中选择一行

> ID：15095433
> 
> 赞同：1
> 
> 时间：2013-02-26T17:28:42.303
> 
> 标签：jqgrid

```
colModel: [
            { name: 'Id', index: 'Id', hidden: true, search: false },
            { name: 'Name', index: 'Name', hidden: true, search: false },
          ] 
```

正如 setSelection 方法允许根据行号在 jqGrid 中选择一行一样，是否可以类似地根据其中一个单元格值选择一行。

例如，在上面的 colModel 中，是否可以选择具有特定“Id”或“Name”值的行...假设这些值对于每一行都是唯一的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:37:51.287

在`loadComplete:`jqGrid 的部分中，您可以遍历每一行并测试您正在寻找的值。如果找到该值，请选择该行。

前任

```
loadComplete: function () {
    var rowIds = $(this).jqGrid('getDataIDs');

    for (i = 1; i <= rowIds.length; i++) {
        rowData = $(this).jqGrid('getRowData', i);

        if (rowData['Id'] == idSearchValue ) {
           $(this).jqGrid('setSelection',i); 
        } //if

    } //for
... 
```

也会有，`rowattr:`但我似乎找不到在哪里可以获得当前行的 rowID。Oleg 可能会看到这一点并做出响应，就像他对 jqGrid 的添加一样，但是我的测试没有任何运气，或者阅读了您将在何处获取当前 rowId 以传递给该`setSelection`方法的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T06:52:53.863

如果您有一个包含单元格值的对象数组，您将需要另一种方法。

例如。使用您的`colModel`，您想检索具有这些值的行：

```
let toSearch = [ 
        { Name: 'Arthur', Id: 150},
        { Name: 'Julien', Id: 90},            
] 
```

然后你可以做的是从 jqGrid 表中检索整个数据并动态寻找值：

```
let data = $grid.jqGrid('getGridParam', 'data');
let toSelect = data.filter((row,i) => {
    return toSearch.some(toSelectRow => {
        for(let prop in prevRow) {
            if(prevRow[prop] != row[prop])
                return false;
        }
        return true;
    })
});

toSelect.forEach((row) => $grid.jqGrid('setSelection',row.id, false)); // Prevent firing onSelectRow event 
```

在这里我们通过`false`以防止触发`onSelectRow`事件，如果您需要它只需删除`false`

# mysql - 如何在 MySql 中复制多条记录？

> ID：15095434
> 
> 赞同：1
> 
> 时间：2013-02-26T17:28:42.590
> 
> 标签：mysql, sql, field, record

我在 MySql 数据库中有一个表“tb_products”，其中一个字段“ID”作为主键并自动递增；SQL 中按 ID 选择多个记录并将它们复制到具有新的递增 ID 的同一个表中的最佳实践是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T17:31:11.483

```
INSERT INTO tb_products
SELECT NULL id, field1, field2, field3, ...
FROM tb_products
WHERE id IN (id1, id2, id3, ...) 
```

子句中的字段列表`SELECT`应该是除 之外的所有字段`id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:33:02.737

```
INSERT INTO NewTbl(Field_1,Field_2,...)
SELECT Field_1,Field_2,...
FROM OldTbl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:31:01.770

使用 mysql 的 insert select [http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)，当您从现有表中选择时，您只需省略选择 ID，并允许新表生成新的id

# formatting - XSLT 十进制格式导致异常

> ID：15095435
> 
> 赞同：1
> 
> 时间：2013-02-26T17:28:44.503
> 
> 标签：formatting, xslt-1.0

我正在尝试使用 xslt:decimal-format 元素，但无论我使用自己的代码还是 w3schools.com 提供的示例代码，我都会收到相同的错误消息。这是 w3 示例代码：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:decimal-format name="euro" decimal-separator="," grouping-separator="."/>

<xsl:template match="/">
<xsl:value-of select="format-number(26825.8, '#,###.00', 'euro')"/>
</xsl:template>

</xsl:stylesheet> 
```

这是我在 Visual Studio 2010 中运行它时产生的 XsltException：

“格式 '#,###.00' 不能在小数点后的数字符号后有零位符号。”

我这边有什么问题导致此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:32:20.490

您更改了十进制格式，称为“欧元”，因此有效数字看起来像“1.232,99”（一千，二百三十二，点九九）。这与您请求的格式“#,###.00”不匹配。

将您的格式编号模式更改为“#.###,00”

# asp.net-mvc-4 - 在 jqGrid url 选项中发送附加参数

> ID：15095446
> 
> 赞同：0
> 
> 时间：2013-02-26T17:29:20.530
> 
> 标签：asp.net-mvc-4, jqgrid-asp.net

我需要向 jqGrid 中的 url 方法发送一个或两个额外参数。有没有办法做到这一点？

```
 $(document).ready(function () {
        jQuery("#frTable").jqGrid ({
            cmTemplate: { sortable: false },
            caption: '@TempData["POPNAME"]' + ' Population',
            url: '/Encounters/GetAjaxPagedGridData/'+ @TempData["POPULATIONID"]+'',
            ... 
```

这将是我试图达到的方法......

```
 public string GetAjaxPagedGridData(int page, int rows, int popId) {
        return "";
    } 
```

我在想这样的事情

```
url: '@Url.Action("GetAjaxPagedGridData", "Encounters", new { popId = TempData["POPULATIONID"] })' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:11:31.023

例如，使用发布数据选项执行以下操作：

```
 $(document).ready(function () {
    jQuery("#frTable").jqGrid ({
        cmTemplate: { sortable: false },
        caption: '@TempData["POPNAME"]' + ' Population',
        url: '/Encounters/GetAjaxPagedGridData/',
        postdata: {popId : TempData["POPULATIONID"],
                   // and any other parameters that you need to pass} 
```

# c - 为什么会出现以下分段错误

> ID：15095455
> 
> 赞同：1
> 
> 时间：2013-02-26T17:30:07.783
> 
> 标签：c

我正在尝试从字符串中删除两个连续的重复元素。我在第 16 行遇到分段错误。即使注释的第 17 行也给我同样的错误。

不要担心我的程序逻辑。它可能是错误的......但我对这个错误感到震惊..帮助我......解释为什么我收到这个错误

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *st="fvvbbyyr";
    int i=0,j,len;
    for(len=0;st[len]!='\0';len++);
    for(i=0;i<len;i++)
    {
        if(st[i]==st[i+1])
        {
            for(j=i+2;j<len;j++)
               {
                   *(st+j-2)=*(st+j);
                   //st[j-2]=st[j];
               }
            len = len-2;
            i=-1;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:31:57.173

```
char *st = "fvvbbyyr"; 
```

`st`指向匿名字符串`"fvvbbyyr"`，它可以位于只读内存中。

```
*(st+j-2) = *(st+j); 
```

尝试修改此类值会导致未定义的行为。

一个好习惯是将指针声明为`const char *`因为字符串字面量以这种方式运行。

```
const char *st = "fvvbbyyr"; 
```

然后你的编译器应该打印一些警告/错误。而是使用一个数组：

```
char st[] = "fvvbbyyr"; 
```

顺便说一句，数组下标运算符`[]`可能会使您的代码更具可读性。

```
st[j - 2] = st[j]; 
```

此外，您正在循环中访问`st[i+1] == st[len]`一次。

# php - 显示值在数组中的次数

> ID：15095457
> 
> 赞同：0
> 
> 时间：2013-02-26T17:30:10.980
> 
> 标签：php

下面的 php 代码显示存储在数据库中的 IP 的国家/地区位置，并将其输出到 HTML 表中。照原样，它会为每个单独的 IP 创建一长串国家/地区代码。

例如...

美国
美国
MX
美国

我想做的是，而不是为每个单独的项目创建一个长列表，而是显示一个项目在数组中出现的次数。使用上面的示例...

国家频率

美国 3
MX 1

我将如何实现这一点？这是完整的代码...

```
require_once("geoip.inc");
$gi = geoip_open("GeoIP.dat",GEOIP_STANDARD);

include_once($_SERVER['DOCUMENT_ROOT'] . 'connect.php'); 

/* Performing SQL query */
 $data = mysql_query("SELECT * FROM the_ips LIMIT 100")
 or die(mysql_error());

 echo "<table>";
 echo "<td><strong>Country</strong></td><td><strong>Frequency</strong></td></tr>";

 while($info = mysql_fetch_array( $data ))
     {
      $ip = $info['ip_address'];
      $country_code = geoip_country_code_by_addr($gi, $ip);
      $countrylist = array($country_code);
      $frequency = array_count_values($countrylist);

      echo "<tr><td style='width: 100px;'>".$country_code."</td><td style='width: 100px;'>".$frequency."</td></tr>";
     }
 echo "</table>";
 geoip_close($gi); 
```

我需要分配`$frequency`和删除包含重复“国家”值的行，但不确定如何执行此操作。照原样，当我希望得到一个数字（即 US 3）时，$frequency 返回“Array”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:33:11.323

您可以使用该[`array_count_values()`](http://php.net/manual/en/function.array-count-values.php)功能

想象一下这个简单的例子：

```
$colors = array('red', 'green', 'red', 'blue');
var_dump(array_count_values($colors)); 
```

什么给你：

```
array(3) {
  'red' =>
  int(2)
  'green' =>
  int(1)
  'blue' =>
  int(1)
} 
```

# android - DDMS 中偶尔关闭的设备选项卡

> ID：15095458
> 
> 赞同：1
> 
> 时间：2013-02-26T17:30:16.637
> 
> 标签：android, eclipse, ddms

在 Eclipse 中开发我的应用程序时，我偶尔会关闭 DDMS 中的**Devices选项卡。**所以，我不能再选择设备了。

我怎样才能返回这个标签？

* * *

已经找到答案：

**窗口 -> 显示视图 -> 其他 -> ... Android -> 设备**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:21:48.730

从你想要的视角来看......

窗口>显示视图>其他...>Android>设备

![在此处输入图像描述](../Images/976e6129d50390c2687d650b7448d96a.png)

# c# - C# 组合框适当的事件类型

> ID：15095459
> 
> 赞同：0
> 
> 时间：2013-02-26T17:30:16.700
> 
> 标签：c#, combobox

我有一个组合框，我有一个关联的事件

```
private void comboBox8_SelectedIndexChanged(object sender, EventArgs e)
{
} 
```

我的组合框填充了两个项目`a and b`

我在`combobox8.selectedItem = x`哪里设置`x= a or b`。我的事件只有在我选择`a`from`b`或`b`from时才会触发`a`。如果我再次从中选择，**它不会触发**。`a``a`

我该怎么做以及处理它的适当事件是什么？

此外，我正在以编程方式进行所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:34:34.720

事件不会再次触发是有道理的。选定的项目不会改变。根据您的实际需要，[您可以使用很多事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_events.aspx)。例如，您可以从[Click](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)、[DropDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownclosed.aspx)或[DropDownClosed](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdown.aspx)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:34:55.030

它不会触发，因为 Selected Index 没有改变......

查看 msdn 文档以获取组合框事件列表：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_events.aspx)

你会发现你可以根据你想要达到的目的使用更多的（`leave`, `lostfocus`, [...]）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:48:59.187

因为索引没有改变，所以事件没有被触发。由于您在以编程方式刷新表单时需要此处理，因此也以编程方式调用适当的代码：

```
private void comboBox8_SelectedIndexChanged(object sender, EventArgs e)
{
    ProcessComboBoxInput();
}

private void RefreshFormProgrammatically()
{
    // Refresh the form here...
    ProcessComboBoxInput();
}

private void ProcessComboBoxInput()
{
     // Process the comboBox8 here...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:34:16.433

因为它选择的索引改变了事件。从a到a什么都没有改变。您可以尝试 onclick 事件。

# css - 如何将布局的“功能”部分完全居中（请参阅链接）？

> ID：15095468
> 
> 赞同：0
> 
> 时间：2013-02-26T17:30:34.853
> 
> 标签：css, html, layout, responsive-design

我已经使用 DIV/CSS 创建了一个布局。我在下面附上了一个示例图像和链接，显示了我希望如何组织事情。在标题中，有一个标志和一个菜单，它们的宽度累计为 1000 像素。功能、内容和页脚部分的宽度也应为 1000 像素。但是，所有部分的实际背景图像都是 100% 的宽度并且水平重复。

下面是我想做的一个例子：

![示例布局概念](../Images/0d04fb173a1eb8105bbdc79afce10d0b.png)

到目前为止，我实际整理的内容（就设计而言）可以在这里查看：http: [//ohachem.com/2/](http://ohachem.com/2/)。这就是我想要遵循的。CSS 可以在这里查看：http: [//ohachem.com/2/style.css](http://ohachem.com/2/style.css)

实现这一目标的最佳方法是什么？如您所见，“特征”部分中的文本并未完全居中对齐。我试过使用 clear:both、overflow:hidden 和其他几种方法，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:34:18.967

您指向的网站使用了液体布局，这里有很多例子：[http](http://www.dynamicdrive.com/style/layouts/category/C13/) ://www.dynamicdrive.com/style/layouts/category/C13/ 。

请注意，在您的示例中，我无法辨别定位属性，使布局响应式的很大一部分是确保它在所有浏览器和屏幕上看起来一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:39:04.547

我**建议您使用 CSS3 媒体**查询而不是脚本来进行**响应式/自适应网页设计。**

请看看[这个](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

这些**不会处理很多**，因此**重量轻，大多数现代浏览器和设备都支持 CSS3，**因此是一个**方便可靠的选项。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:37:43.660

“特色”文字的“错位”是由浮动标识引起的。因为浮动尚未清除并延伸到您的标题之外，它导致该文本在它周围流动。添加`overflow: hidden`到您的`#header`元素将更正它，但还有其他方法可以在不添加额外标记的情况下清除浮动。

或者，您可以使您的徽标与标题的高度相同。现在 height 属性设置为相同的值，但是徽标有一些额外的填充，这会导致溢出。

# javascript - 从 html 字符串中获取 img 标签的 src 属性，而不加载图像？

> ID：15095472
> 
> 赞同：1
> 
> 时间：2013-02-26T17:30:52.743
> 
> 标签：javascript, jquery, html, xml

在 jQuery 中，我们可以使用`find()`过滤`img`标签并检索它们的`src`属性，但是这样做会导致图像加载。

我实际上是**从 feeds 获取 html 字符串**，所以我不能相信它的格式是否正确。

**我尝试了 XML 解析器：**

```
function searchXml(xmlStr, selector) {
  var parser, xmlDoc;
  if(window.DOMParser) {
   parser = new DOMParser();
   xmlDoc = parser.parseFromString(xmlStr, "text/xml");
  } else {
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async = false;
    xmlDoc.loadXML(xmlStr); 
  }
  return $(xmlDoc).find(selector);
}    
console.log(searchXml('<p><img src="http://image.url/file.jpg" /></p>','img').attr('src')); 
```

它适用于小的 HTML 字符串，但不适用于来自提要的 HTML。

有理由不这样做吗？

# java - 将 hbm.xml 添加到现有项目

> ID：15095473
> 
> 赞同：0
> 
> 时间：2013-02-26T17:30:53.327
> 
> 标签：java, mysql, eclipse, hibernate, eclipse-plugin

我的项目包含 hibernate.cfg.xml 文件和位于 MySql 中的 3 个不同表的 3 个 hbm.xml 文件，每个 hbm.xml 文件都有一个匹配的 .java 类。我得到了这一切。

现在我需要创建另一个表，我想生成它的 hbm.xml 和 .java 文件。

我添加到 eclipse Hibernate Tools (JBoss) 但我不明白我是怎么做到的。

我不想创建另一个 hibernate.cfg.xml，我想更新它以包含新表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:36:15.433

您不必使用另一个`hibernate.cfg.xml`配置文件（尤其是如果您只是添加另一个表）。创建一个新`.hbm`文件，将其映射到相应的模型类，并将此配置添加到现有的`hibernate.cfg.xml`.

# javascript - 悬停仅适用于一个元素

> ID：15095475
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:30:56.153
> 
> 标签：javascript, hover, jsfiddle

我正在使用 JavaScript 并尝试在鼠标悬停时显示每个元素信息。到目前为止，我只得到了第一个元素信息，第二个没有激活。如何开始工作所有元素？

这是JavaScript代码：

```
$('#user').hover(function() {
    $('#popup').show();
}, function() {
    $('#popup').hide();
}); 
```

```
<div id='user'>I am a user. Move your mouse over me</div>
<div id='popup'>Extended info about a user</div>
<div id='user'>I am a user. Move your mouse over me</div>

<div>I a piece of useless information. No use hovering over me.</div> 
```

[http://jsfiddle.net/Hyw7Z/1/](http://jsfiddle.net/Hyw7Z/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:32:31.603

如果不发生这种情况，您不能在多个元素上使用相同的“id”值。相反，使用“类”

```
<div class="user" ... > 
```

然后，在 JavaScript 中：

```
$('.user').hover(function() { ... 
```

“弹出窗口”也是如此，但为此你需要这样的东西：

```
$('.user').hover(function() {
  $(this).next('.popup').show();
}, function() {
  $(this).next('.popup').hide();
}); 
```

这将在悬停后找到下一个具有`<div>`“弹出”类的元素，并显示/隐藏它。如果没有这样的元素，什么都不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:33:07.903

您正在使用 ID 选择器。ID 只允许在一个页面上放置一次。您可以为此使用类选择器。

```
<div class='user'>I am a user. Move your mouse over me</div>
<div id='popup'>Extended info about a user</div>
<div class='user'>I am a user. Move your mouse over me</div>

$('.user').hover(function() {
    $('#popup').show();
}, function() {
    $('#popup').hide();
}); 
```

[JSF](http://jsfiddle.net/Hyw7Z/2/)中。

# android - 空间不足，无法显示 Admob 广告警告

> ID：15095476
> 
> 赞同：0
> 
> 时间：2013-02-26T17:30:59.290
> 
> 标签：android, android-layout, admob

我想将我的 admob 广告放在所有活动的父级底部。但在某些情况下它会显示此错误。

```
W/Ads(13240): Not enough space to show ad! Wants: <240, 37>, Has: <240, 0> 
```

我的**XML**代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white"
    android:orientation="vertical" >

    <LinearLayout
        style="@style/padding_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_title" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="Tickets &amp; Cards"
            android:textColor="@color/white"
            android:textSize="18.0sp"
            android:textStyle="bold" />
    </LinearLayout>

     <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
     <More items here>
      </ScrollView>

    <include layout="@layout/ad_container" />

</LinearLayout> 
```

而**ad_container.xml**是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/linear_layout_adv_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="a15xxxxxxa8088"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" />

</RelativeLayout> 
```

我不知道我错过了什么，为什么它的高度为 0 而不是必需的。我希望有人指出问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:34:20.983

您的外部布局有 height `match_parent`。这意味着它是窗口的大小。它的所有孩子都有高度`wrap_content`，这意味着每个孩子都适合各自内容的高度。如果前面所有子项（您的广告单元毕竟是最后一个）的内容高度加起来超过窗口高度，则广告单元没有空间了。

# arrays - 比较两个关联数组

> ID：15095485
> 
> 赞同：2
> 
> 时间：2013-02-26T17:31:33.177
> 
> 标签：arrays, perl, hash, comparison, associative

我上周开始学习 Perl。

我有一个来自包含“令牌”的文件的关联数组 - 只是一堆数字。我有另一个来自包含“令牌”的 SQL 数据库的关联数组。

我想看看文件中是否有任何标记不在数据库中。然而，我所做的任何事情似乎都不起作用，我得出的结论是我只是让自己感到困惑。

我不确定我是否*完全*理解关联数组，但这是我的文件哈希代码片段：

```
while($row = <FILE>){
    if($row =~ /^000\E/){
        @tmp=split(/\s+/,$row);     
        if($tmp[1] ne "Unassigned"){
            $tokenfile{$tmp[0]} = $tmp[1] . " " . $tmp[2];
        }
    }
} 
```

`$tmp[1]`+`$tmp[2]`是名字和名字。我稍后会比较名称，看看它们是否相等。但是我想比较`$tmp[0]`- 令牌。这是 SQL 哈希：

```
while(@rows = $sth->fetchrow_array){
    ($name, $passwd, $uid, $gid, $quota, $comment, $gcos, $dir, $shell) = getpwnam("\L$rows[1]\E");
    $gcos =~ s/,.*//;
    if(!defined($gcos)){
        $missing++;
        $tokendb{$rows[0]} = $rows[1];
    }
    else{
        $tokendb{$rows[0]} = $gcos;
    }
} 
```

`$rows[0]`是令牌。

我假设我会使用两个 foreach 循环，例如：

```
foreach $token (keys(%tokendb)) {
    foreach $token2(keys(%tokenfile)){
        if($token ne $token2){
            print "$token2 NOT IN DATABASE\n";
        }
    }
} 
```

但这给了我*许多*仍在数据库中的值的结果。

我很想知道为什么这不起作用的一些提示。非常令人沮丧，因为我知道这很简单，但我的大脑今天工作得不太好（即使这是我的 21 岁生日:|）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:44:32.897

```
foreach $token (keys(%tokenfile)) {
  if (! exists $tokendb{$token}) {
    print "$token NOT IN DATABASE\n";
  }
} 
```

您的嵌套循环失败了，因为即使一个键存在，它也不匹配所有其他键。要使用嵌套循环，它应该是：

```
foreach $token (keys(%tokenfile)) {
  $found = 0;
  foreach $token2 (keys(%tokendb)) {
    if ($token eq $token2) {
      $found = 1;
      last;
    }
  }
  if (!found) {
    print "$token NOT IN DATABASE\n";
  }
} 
```

当然，没有理由这样写，这只是为了帮助您了解您的逻辑是如何失败的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:14:14.937

如果您要遍历散列并单独测试每个键以查看其中一个是否为目标值，那么您就没有利用散列的强大功能：查找。尝试类似的东西

```
foreach $token (keys(%tokenfile)) {
  unless (exists $tokendb{$token}) {
    print "$token NOT IN DATABASE\n";
  }
} 
```

反而。

# flash - 如何制作简单的动画精灵动作脚本？

> ID：15095487
> 
> 赞同：0
> 
> 时间：2013-02-26T17:31:38.477
> 
> 标签：flash, actionscript, air, flashdevelop, flash-builder

我找不到任何解释清楚的创建动画精灵的简单方法。假设我有 2 个 .png 文件显示兔子正在运行：

**rabbit1.png**和 **rabbit2.png**

```
 [Embed(source='assets/rabbit1.png')] public static const R1: Class;
 [Embed(source='assets/rabbit2.png')] public static const R2: Class; 
```

我知道我可以创建精灵并添加这样的框架：

```
var rabbit1:Bitmap = new R1();
var rabbit2:Bitmap = new R2();

var bunny:Sprite = new Sprite();
bunny.addChildAt(rabbit1,1);
bunny.addChildAt(rabbit2,2); 
```

没关系，但是如何以简单的方式对其进行动画处理？（无需创建额外的 xml 文件或类似文件）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:03:26.850

理想情况下，您会创建一个类，比如说“SimpleAnimation”，但如果您不想这样做，还有另一种方法（使用您的代码）

```
var rabbit1:Bitmap = new R1();
var rabbit2:Bitmap = new R2();

var bunny:Sprite = new Sprite();
var currFrame:int = 0;
bunny.addChildAt(rabbit1,0);
bunny.addChildAt(rabbit2,1);
bunny.getChildAt(1).visible = false;

bunny.addEventListener(Event:ENTER_FRAME, onBunnyFrame);
function onBunnyFrame(e:Event):void
{
    var maxFrame:int = bunny.numChildren;
    bunny.getChildAt(currFrame).visible = false;
    currFrame++;
    currFrame = currFrame % maxFrame;
    bunny.getChildAt(currFrame).visible = true;
} 
```

# sql-server - sql server mdx 已存在

> ID：15095489
> 
> 赞同：0
> 
> 时间：2013-02-26T17:31:40.147
> 
> 标签：sql-server, mdx

我正在学习《一步一步的MDX》这本书。我正在关注这些示例，并且对如何理解 EXISTING 有疑问。我理解（我认为）下面的 1 和 2，但不理解 3。

注意：屏幕截图不完整，但您可以理解。

1 它返回所有产品的前 5 名经销商销售额，并且只与 4 个类别交叉连接，这是不希望的。您可以看到排名前 5 位的产品在重复。

```
 SELECT
    {([Measures].[Reseller Sales Amount])} ON COLUMNS,      
    ([Product].[Category].[Category].Members) *
    Generate(
        {[Product].[Category].[Category].Members},
         TopCount(
             {[Product].[Product].[Product].Members},
            5,
            ([Measures].[Reseller Sales Amount])
        ),
        ALL
    ) ON ROWS
    FROM [Step-by-Step] 
```

![在此处输入图像描述](../Images/bb81fe76d2cf8cd23dac6e0f956852aa.png)

2 现在我添加 EXISTING，它返回四个类别中每个类别的前 5 名经销商销售额，这是正确的。

```
 SELECT
    {([Measures].[Reseller Sales Amount])} ON COLUMNS,      
    ([Product].[Category].[Category].Members) *
    Generate(
        {[Product].[Category].[Category].Members},
         TopCount(
             EXISTING {[Product].[Product].[Product].Members},
            5,
            ([Measures].[Reseller Sales Amount])
        ),
        ALL
    ) ON ROWS
    FROM [Step-by-Step] 
```

![在此处输入图像描述](../Images/79d77f0a69acc007bcc9079aa308bc46.png)

3 现在这是我的问题。我把 EXISTING 放在 Topcount 上，怎么理解发生了什么？

```
 SELECT
    {([Measures].[Reseller Sales Amount])} ON COLUMNS,      
    ([Product].[Category].[Category].Members) *
    Generate(
        {[Product].[Category].[Category].Members},
        EXISTING TopCount(
            {[Product].[Product].[Product].Members},
            5,
            ([Measures].[Reseller Sales Amount])
        ),
        ALL
    ) ON ROWS
    FROM [Step-by-Step] 
```

![在此处输入图像描述](../Images/86d2259c6bc2be64ed0cebe3722940ae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:39:15.930

[MDX 运算符 Existing](http://www.iccube.com/support/documentation/mdx/Existing.html)正在本地更改单元评估的上下文。它不会“深入”到功能或措施中。在您的最后一个场景中，它只对 TopCount 的结果有影响，因为没有什么要评估的，所以没有影响。

可惜不是改变元组上下文的函数，例如：

```
 CubeContext( ...)  -> where ... is evaluated witht the slicer. 
```

# git - 为什么分支更新子模块的切换（没有显式拉）？

> ID：15095491
> 
> 赞同：1
> 
> 时间：2013-02-26T17:31:43.217
> 
> 标签：git, git-submodules

我刚刚克隆了一个存储库，我以前从未工作过。它包含子模块，所以我做了

```
~/projects/myProject (master) $ git submodule init
~/projects/myProject (master) $ git submodule update 
```

由于我需要更新版本的子模块，因此我尝试通过以下方式进行更新：

```
~/projects/myProject (master) $ cd subs/mySubmodule
~/projects/myProject/subs/mySubmodule ((no branch)) $ git checkout master
~/projects/myProject/subs/mySubmodule (master) $ git pull 
```

并得到

```
Already up-to-date. 
```

**怎么回事**？

在调查了删除所有内容并重试整个过程的情况后，我意识到子模块实际上是用分支开关更新的，因此不需要拉取并且响应 ( `Already up-to-date.`) 是正确的。

那为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:57:20.640

说交换机更新了子模块是不太对的。当您运行时，子模块已更新`git submodule update`。子模块有点奇怪。正如[这个页面](http://git-scm.com/book/en/Git-Tools-Submodules)所说：

> ...`git submodule update`从该项目中获取所有数据并检查您的超级项目中列出的相应提交：

因此，如果您运行`git submodule udpate`，即使您看到的版本不是最新的，您也已经拥有来自 repo 的所有更改。这是因为每个分支都有一个与之关联的特定提交。您看到的代码可能很旧，但子模块已经拥有所有最新数据。然后，当您`git checkout master`切换到可用的最新版本时，`git pull`什么也不做。

# c# - 缺少 ContentResult 指令或程序集？

> ID：15095495
> 
> 赞同：3
> 
> 时间：2013-02-26T17:31:50.127
> 
> 标签：c#, asp.net

我有以下代码：

```
 var resultData = new { d = sqlObject.ToArray() };
            ContentResult result = new ContentResult();
            result.Content = serializer.Serialize(resultData);
            result.ContentType = "application/json";
            return result; 
```

但是他们一直提示找不到类型或命名空间名称。您是否缺少指令或程序集。

有什么解决办法吗？我在 asp.net 上开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-21T10:24:56.310

`Microsoft.AspNet.Mvc`从 NuGet 包管理器在您的项目中安装包。

# post - HTTPweb请求图片点击发帖

> ID：15095497
> 
> 赞同：0
> 
> 时间：2013-02-26T17:31:55.897
> 
> 标签：post, httpwebrequest, scrape

所以我试图通过首先单击下拉列表中的项目来导航[http://www.historicflyingclothing.com/shop.php 。](http://www.historicflyingclothing.com/shop.php)使用以下命令从下拉列表中发布值后：

```
string poststring = String.Format("Cat1={0}", "7");
CookieContainer cookie = new CookieContainer();
HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create("http://www.historicflyingclothing.com/shop.php");

httpRequest.Method = WebRequestMethods.Http.Post;
httpRequest.CookieContainer = cookie;
httpRequest.AllowWriteStreamBuffering = true;
httpRequest.ProtocolVersion = HttpVersion.Version11;
httpRequest.AllowAutoRedirect = true;
httpRequest.ContentType = "application/x-www-form-urlencoded";

byte[] bytedata = Encoding.UTF8.GetBytes(poststring);
httpRequest.ContentLength = bytedata.Length;

Stream requestStream = httpRequest.GetRequestStream();
requestStream.Write(bytedata, 0, bytedata.Length);
requestStream.Close();

HttpWebResponse httpWebResponse = (HttpWebResponse)httpRequest.GetResponse();
Stream responseStream = httpWebResponse.GetResponseStream(); 
```

我能够获取页面上的项目。问题是当我需要单击下一步按钮时。我希望使用`CookieContainer`来帮助我导航，但我无法弄清楚帖子数据应该是什么。下次点击的html代码为：

```
<form method="POST" class="shopform" action="shop.php"> 
    <p style="text-align: center"> <input type="IMAGE" name="Submitnext" src="buttons/next.gif" value="npage" style="margin-bottom: -4pt"></p>
</form> 
```

下拉列表中的名称为“Cat1”，值为“7”，但我要为这个图像使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:32:11.707

从您提供并在该网站上列出的 HTML 中，您需要发布的值是：

提交next=npage

您会注意到您发布的名称包含在“名称”属性中，而值包含在“值”属性中。

# linux - 适用于 Linux 的 vDSP 等效项

> ID：15095504
> 
> 赞同：2
> 
> 时间：2013-02-26T17:32:09.810
> 
> 标签：linux, fft, vdsp

我在 OS X 和 iOS 下使用 Apple 的 vDSP 原语有很好的经验。

[http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)

现在我正在尝试将一些依赖于 vDSP 的代码移植到 Linux，我想知道是否有任何等价物可以内置到标准库之一中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:35:58.327

虽然目前没有任何与**vDSP**匹配的库，但您可以探索多种替代方案。我脑海中浮现出一对：

*   [**OpenCV**](http://opencv.org)是一个令人印象深刻的图像处理和计算机视觉例程集合，拥有一个充满活力的用户和研究社区。
*   [**Eigen**](http://eigen.tuxfamily.org)是一个**用于线性代数的C++11**模板库：矩阵、向量、数值求解器和相关算法。

我个人的建议是**Eigen**。

# powershell - 在 PowerShell 脚本中禁用严格模式

> ID：15095506
> 
> 赞同：2
> 
> 时间：2013-02-26T17:32:12.477
> 
> 标签：powershell

在我的 PowerShell 配置文件中，我有`Set-StrictMode -Version 2.0`. 不幸的是，我有一些脚本（和模块）在启用严格模式时无法正常工作。

我试图通过将其放在`Set-StrictMode -Off`脚本的顶部或使用行为不端的模块的脚本的顶部来解决此问题。不幸的是，它似乎没有任何效果。

如何在 PowerShell 中临时禁用严格模式？

**更多细节：**这特别发生在 PsGet 中。见[问题 57](https://github.com/psget/psget/issues/57)。我`Set-StrictMode -Version 2.0`在我的个人资料中有。如果我尝试`Install-Module`从脚本中使用 PsGet，我会收到错误消息“在此对象上找不到属性‘动词’”。

即使我放在`Set-StrictMode -Off`脚本的顶部也会发生这种情况。如果我`Set-StrictMode -Off`在运行脚本之前在命令行运行，则不会出现错误并且脚本运行良好。

在打开严格模式之前，PsGet 已导入到我的配置文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:58:14.560

就像马特在评论中说的那样，我没有看到这个问题重现。你能提供更多细节吗？

内容`StrictModeTest.ps1`：

```
Set-StrictMode -Off

# variable $x doesn't exist, should trigger strictmode error
"Value is [$($x.Path)]" 
```

测试（PSv3）：

```
PS C:\> Set-StrictMode -Version 2.0
PS C:\> .\StrictModeTest.ps1
Value is [] 
```

如果我注释掉该`Set-StrictMode -Off`行，我会收到预期的错误：

```
PS C:\> .\StrictModeTest.ps1
The variable '$x' cannot be retrieved because it has not been set.
At C:\StrictModeTest.ps1:4 char:14
+ "Value is [$($x.Path)]"
+              ~~
    + CategoryInfo          : InvalidOperation: (x:String) [], RuntimeException
    + FullyQualifiedErrorId : VariableIsUndefined

Value is [] 
```

# html - 如何从 Perl CGI 的下拉框中获取选定的值

> ID：15095511
> 
> 赞同：0
> 
> 时间：2013-02-26T17:32:28.520
> 
> 标签：html, forms, perl, cgi, param

我正在从数据库中填充下拉菜单。当我提交表单时，我在所选选项中得到空字符串。这是我的代码，任何帮助将不胜感激。我选择了第一个选项作为默认任何帮助。

```
print "<br>Name: <select>";
while ( my ($name) = fetchrow_array() ) {
    if ($name eq "Somethinge") {
        print "<option value=\"$name\" selected>" . $name . "</option>\n";
    }else {
        print "<option value=\"$name\">" . $name . "</option>\n";
        }
}
print "</select>"; 
```

我正在使用下面的值获取值，但无论我选择什么，它都返回空。

```
my $Name = param('name'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:34:20.613

您`name="client_name"`在选择标签中丢失了。

您可能应该在 value 属性中转义客户端名称（尽管对于 United Dynacare 来说没有必要）。使用库来生成您的 HTML（例如，[`CGI`](https://metacpan.org/module/CGI#CREATING-A-POPUP-MENU)）对这两件事都有帮助。

# asp.net-mvc - asp.net mvc 模型绑定失败 编辑器模板中的项目

> ID：15095513
> 
> 赞同：1
> 
> 时间：2013-02-26T17:32:36.600
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

我已经搜索了很多关于 SO 的帖子，但仍然不确定我在这里做错了什么。我有一个`model`“订单”，其中包括一个“订单项目`<list>`”

```
public class Order
{
    public int OrderId { get; set; }
    public int CustId { get; set; }
    public DateTime OrderDate { get; set; }
    public int OrderType { get; set; }
    ...
    ...
    public List<OrderItem> OrderItems = new List<OrderItem>();
}
public class OrderItem
{
    public string ProductCode { get; set; }
    public decimal RetailPrice { get; set; }
    public string ProductQuantity { get; set; }
} 
```

在我看来，这是对订单模型的强类型，我正在使用编辑器模板来显示订单项目

```
@model FTG.Models.Order
@Html.EditorFor(x => x.OrderItems) 
```

并且编辑器模板似乎为模型绑定分配了一个正确的名称：

```
input  type="number" id="OrderItems_0__ProductQuantity" name="OrderItems[0].ProductQuantity"...
input  type="number" id="OrderItems_1__ProductQuantity" name="OrderItems[1].ProductQuantity"... 
```

但是我的模型返回到控制器`count=0`列表中。模型的其余部分看起来不错，我只是无法从订单项列表中获取值。

有谁知道我做错了什么，或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:20:38.417

我认为您的模型类缺少子列表的属性。尝试为 OrderItems 列表添加一个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:31:45.037

OrderItems 是一个字段，而不是一个属性。您需要使用 getter 和 setter 使其成为属性，然后在构造函数中创建空列表并将其分配给属性。

# c - Infinite loop using MPI_Irecv and MPI_Test

> ID：15095514
> 
> 赞同：6
> 
> 时间：2013-02-26T17:32:38.820
> 
> 标签：c, mpi

I've few problems with an MPI program in C. I want to send two messages with MPI_Send from slaves to master (using MPI_Send, MPI_Irecv and MPI_Test), but only the first message works. After that, i've an infinite loop and i always receive a message from the slave -1 (according to status.MPI_Source).

So i don't understand why i receive all these messages from an unknown process (-1)...

My code :

```
#include <stdio.h>
#include <mpi.h>
#include <sys/time.h>

int main(int argc, char *argv[])
{

int rank, size;
MPI_Status status;

/* Init */
MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

if (rank != 0) { // Slaves
    int buf;

    if (rank == 1) {
        buf = 1;
        MPI_Send(&buf, 1, MPI_INT, 0, 0, MPI_COMM_WORLD); 
    }
    if (rank == 2) {
        buf = 2;
        MPI_Send(&buf, 1, MPI_INT, 0, 0, MPI_COMM_WORLD); 
    }

}
else { // Master
    int sum = 0;
    int flag, res;
    MPI_Request request;
    MPI_Status status;

    MPI_Irecv(&res, 1, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, &request);

    while (1) { 
        flag = 0;

        MPI_Test(&request, &flag, &status);

        if (flag != 0) { 
            printf("recv : %d, slave : %d\n", res, status.MPI_SOURCE);
            if (status.MPI_SOURCE != -1) 
                sum += res;
        }
        else
            printf("fail!\n");

        if (sum == 3)
            break;
    }

    printf("sum : %d\n", sum);
}

MPI_Finalize();
return 0;

} 
```

Thanks.

ps : sorry for my english

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-16T14:17:47.260

One thing is that you must call MPI_Irecv each time you are expecting a message. So in your case you have to call it 2 times. No more, no less.

Lets take a look on code changed by only moving MPI_Irecv call inside loop. **It's not correct. Will not work.**

```
else { // Master
int sum = 0;
int flag, res;
MPI_Request request;
MPI_Status status;

while (1) { 
    flag = 0;
    MPI_Irecv(&res, 1, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, &request);
    MPI_Test(&request, &flag, &status);
    if (flag != 0) { 
        printf("recv : %d, slave : %d\n", res, status.MPI_SOURCE);
        if (status.MPI_SOURCE != -1) 
            sum += res;
    }
    else
        printf("fail!\n");

    if (sum == 3)
        break;
} 
```

Assuming random time of delivering messages sended by slaves (which is always the case when we are talking about distributed systems or threads) it's easy to imagine that situation: Moment of time | event

```
0              | called first MPI_Irecv, allocated memory for MPI_Request object
1              | called second MPI_Irecv, allocated memory for MPI_Request (lets say) object2
2              | called third MPI_Irecv, allocated memory for MPI_Request object3
3              | called MPI_Send in slave no. 1
4              | called MPI_Send in slave no. 2
5              | received message by master from slave no. 1, filled object, flag variable still 0 because its related to object3
6              | received message by master from slave no. 2, filled object2, flag variable still 0 because its related to object3
7,8,9...       | infinite loop, flag still has value 0
 n            | error: MPI_Irecv(147): MPI_Irecv(buf=0x7fffecfa60c4, count=1, MPI_INT, src=MPI_ANY_SOURCE, tag=MPI_ANY_TAG, MPI_COMM_WORLD, request=0x7fffecfa60c8)
MPID_Irecv(53): failure occurred while allocating memory for a request object 
```

There are two solutions. You can slow down Master process by calling sleep(3) before while loop, so it will definitely starts later then MPI_Send's called.

Second, better engineering approach is to call MPI_Irecv only when we are expecting message. Initially call the MPI_Irecv and assign value 0 to the flag. After we receive message change flag again to -1 and call MPI_Irecv only when the flag has -1 value.

Here is code **it works**:

```
#include <stdio.h>
#include <mpi.h>
#include <sys/time.h>

int main(int argc, char *argv[])
{

int rank, size;
MPI_Status status;

/* Init */
MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

if (rank != 0) { // Slaves
    int buf;

    if (rank == 1) {
        buf = 1;
        MPI_Send(&buf, 1, MPI_INT, 0, 0, MPI_COMM_WORLD); 
    }
    if (rank == 2) {
        buf = 2;
        MPI_Send(&buf, 1, MPI_INT, 0, 0, MPI_COMM_WORLD); 
    }

}
else { // Master
    int sum = 0;
    int flag = -1, res;
    MPI_Request request;
    MPI_Status status;
    while (1) { 
    if(flag != 0)
    {
        MPI_Irecv(&res, 1, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, &request);
        flag = 0;
    }
        MPI_Test(&request, &flag, &status);

        if (flag != 0) { 
            printf("recv : %d, slave : %d\n", res, status.MPI_SOURCE);
            if (status.MPI_SOURCE != -1) 
                sum += res;
        flag = -1;
        }

        if (sum == 3)
            break;
    }

    printf("sum : %d\n", sum);
}

MPI_Finalize();
return 0;

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T17:53:20.913

The problem is that the master only ever posts one receive. You'll need to move the call to `MPI_Irecv` inside the loop, at the point where `MPI_Test` returned with success (inside the `if (status.MPI_SOURCE != -1)` block), so that subsequent messages can be received.

# c - 在我的程序中使用 findfile

> ID：15095520
> 
> 赞同：1
> 
> 时间：2013-02-26T17:32:50.013
> 
> 标签：c, recursion, header, find

我正在尝试将 findfile 函数合并到我的代码中，但出现错误“分段错误（核心转储）。我明白这意味着什么，我只是在代码中找不到错误。如果有人可以指出或指导我朝着正确的方向前进，我将不胜感激。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <dirent.h>
#include "find.h"       // utilize findfile function

#define NAMESIZE 256
#define TOKENSIZE 100

int main(int argc, char *argv[])
{
int choice = -1;
char *input_dir_name, *dirpath, *chptr;
struct stat statbuf;

input_dir_name = (char *) malloc(NAMESIZE * sizeof(char));
dirpath = (char *) malloc(NAMESIZE * sizeof(char));
printf("\n");
printf("SELECT THE FUNCTION YOU WANT TO EXECUTE:\n");
printf("1\. Find the 3 largest files in a directory\n");
printf("2\. List all zero length files in a directory\n");
printf("3\. Find all files with permission 777 in a directory\n");
printf("4\. Create a backup of a directory\n");
printf("\n");
printf("ENTER YOUR CHOICE: ");
scanf("%d", &choice);
printf("Enter a directory name in the current directory: ");
scanf("%s", &input_dir_name);
/**********************************************************/

printf(input_dir_name);//Segmentation Fault (core dumped) 

/*Form a full path to the directory and check if it exists*/
/**********************************************************/

if(choice == 1){
    printf("\nEXECUTING \"1\. Find the 3 largest files in a directory\"\n");
    /********************************************************/
    /**************Function to perform choice 1**************/
    /********************************************************/

}

else if(choice == 2){
    printf("\nEXECUTING \"2\. List all zero length files in a directory\"\n");
    /********************************************************/
    /**************Function to perform choice 2**************/
    /********************************************************/

}

else if(choice == 3){
    printf("\nEXECUTING \"3\. Find all files with permission 777 in a      directory\"\n");
    /********************************************************/
    /**************Function to perform choice 3**************/
    /********************************************************/

}

else if(choice == 4){
    printf("\nEXECUTING \"4\. Create a backup of a directory\"\n");
    /********************************************************/
    /**************Function to perform choice 4**************/
    /********************************************************/
}

else{
    printf("Invalid choice\n");
    exit(1);
}
free(input_dir_name);
free(dirpath);
return 0;
} 
```

==================================================== ======================================= 这是带有我的 findfile 函数的 find.h 文件：

```
#include <stdio.h>      // Standard input/output routines    
#include <stdlib.h>     // Standard library routines    
#include <dirent.h>     // readdir(), etc.                    
#include <sys/stat.h>       // stat(), etc.                       
#include <string.h>     // strstr(), etc.                     
#include <unistd.h>     // getcwd(), etc.
#define MAX_DIR_PATH 2048   // Maximal full path length we support

/*===========================================================================
 *   
 *   Function: findfile recusively traverses the current directory, searching
 *   for files with a given string in their name. Hence strstr().
 *   Input:    String to match.
 *   Output:   Any file found, printed to the screen with a full path.
 *   
 ============================================================================*/
void findfile (char *pattern)
{   

  DIR *dir;         // Pointer to the scanned directory
  struct dirent *entry;     //  Pointer to one directory entry
  char cwd[MAX_DIR_PATH + 1];   // Current working directory
  struct stat dir_stat;     // Used by stat()

// First, save the path of current working directory 

if (!getcwd (cwd, MAX_DIR_PATH + 1))
{
  perror ("getcwd:");
  return;
}

// Open the directory to read

 dir = opendir (".");
 if (!dir)
{
  fprintf (stderr, "Cannot read directory '%s': ", cwd);
  perror ("");
  return;
}

  /*=======================================================
   * 
   * Scan the directory, traversing each sub-directory, and 
   * matching the pattern for each file / directory name. 
   *
   ========================================================*/

while ((entry = readdir (dir)))
{
  // Check if the pattern matches

  if (entry->d_name && strstr (entry->d_name, pattern))
{
  printf ("%s/%s\n", cwd, entry->d_name);
}

  // Check if the given entry is a directory

  if (stat (entry->d_name, &dir_stat) == -1)
{
  perror ("stat:");
  continue;
}

  // Skip the "." and ".." entries, to avoid loops

  if (strcmp (entry->d_name, ".") == 0)
continue;

  if (strcmp (entry->d_name, "..") == 0)
continue;

  /* Is this a directory? */
  if (S_ISDIR (dir_stat.st_mode))
{
  /* Change into the new directory */
  if (chdir (entry->d_name) == -1)
    {
      fprintf (stderr, "Cannot chdir into '%s': ", entry->d_name);
      perror ("");
      continue;
    }

  /* check this directory */
  findfile (pattern);

  /* Finally, restore the original working directory. */

  if (chdir ("..") == -1)
    {
      fprintf (stderr, "Cannot chdir back to '%s': ", cwd);
      perror ("");
      exit (1);
    }
}
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:14:06.203

改变：

scanf("%s", &input_dir_name);

至：

scanf("%s", input_dir_name);

顺便说一句，头文件 (*.h) 通常不用于实现功能。它们通常仅用于函数、宏和变量的声明。实现（定义）在*.c/* .cpp 文件中完成。

# php - Zend Form 用 P 标签替换 DL 标签

> ID：15095522
> 
> 赞同：0
> 
> 时间：2013-02-26T17:32:55.967
> 
> 标签：php, zend-framework, zend-form

我正在使用 Zend_Form。我想制作一个忘记密码的表格，就像这样：

标签：[字段] [提交按钮]

我希望它都在一个段落标签中。我希望段落标签*位于*表单标签内。所以，基本上，我想用 P 标签替换 Zend_Form 的默认 DL 标签。我可以做到，有点，但不完全是。

如果我使用默认值，如下所示：

```
class Application_Form_Forgot {
    public function init() {
        // my fields, no special decorators...
    }
} 
```

这会产生这个 HTML：

```
<form {the attributes} ><dl class="zend_form"> {the fields} </dl></form> 
```

我想要这个 HTML：

```
<form {the attributes} ><p> {the fields} </p></form> 
```

这是我尝试过的：

```
class Application_Form_Forgot {
    public function init() {
        // my fields...

        $this->setDecorators(
            array(
                'FormElements',
                'Form',
                array('HtmlTag', array('tag' => 'p')),
            )
        );
    }
} 
```

但这会产生这个 HTML：

```
<p><form {the attributes} > {the fields} </form></p> 
```

段落标签围绕着表单。不完全是我想要的。

我也试过：

*   谷歌搜索并阅读 StackOverflow 和其他地方有关如何*删除*DL 标签的大量帖子。如果我在某处错过了答案，请原谅我，这是重复的。
*   阅读 Zend 源代码以找出一种方法。我找到了 DlDt 装饰器，但这似乎只适用于元素，而不适用于表单。
*   掌握在表单之外放置段落标签并继续我的生活。

有人可以指出我正确的方向吗 - 如果这可能吗？

谢谢，菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:26:58.200

你很亲密，改变你必须做的事情：

```
 $this->setDecorators(
     array(
         'FormElements',
         array('HtmlTag', array('tag' => 'p'))
         'Form',             
     )
 ); 
```

如果你想象装饰器工作时，每个装饰器都“围绕”之前存在的东西，按照这个顺序，它会渲染表单元素，然后围绕它放置段落，然后围绕它放置表单标签。

# java - 没有拍照和录像的相机权限？

> ID：15095523
> 
> 赞同：1
> 
> 时间：2013-02-26T17:32:56.343
> 
> 标签：java, android, android-camera, android-permissions

我制作了一个 AR（增强现实）应用程序，它只打开相机而不拍摄任何照片和视频。

在我的 Mainfest 中，我将此权限用于相机：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:required="false" android:name="android.hardware.camera.autofocus"></uses-feature>
<uses-feature android:required="false" android:name="android.hardware.camera.flash"></uses-feature>
<uses-feature android:required="false" android:name="android.hardware.camera.front"></uses-feature> 
```

但是，当我在谷歌播放上传时，它说

> 硬件控制 拍摄照片和视频 允许该应用使用相机拍摄照片和视频。此权限允许应用程序在没有您确认的情况下随时使用相机。

事实上，我的应用程序不拍照和录像。它只是打开相机并查看其中的信息，而没有拍照和视频的能力。

**我的问题是如何修改我的权限以仅使用相机而不拍照和录像？**

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:37:19.980

你不能。一旦您请求获得使用相机 API 的权限，就没有关于您打算如何使用它的荣誉系统。如果您可以访问相机，您就可以访问数据流，这意味着无论您是否通过记录的方法进行拍摄，您都可以拍摄照片和视频。无法让您访问此流并强制您不要捕获它，因此会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:38:49.440

`android:required`当您通过包含该属性并将其设置为清单中指定相机功能时，您可能可以做一些事情`false`

签出：[这个](http://developer.android.com/guide/topics/media/camera.html#manifest)

# android - ListView 项目上的背景色

> ID：15095528
> 
> 赞同：0
> 
> 时间：2013-02-26T17:33:05.097
> 
> 标签：android, listview, background-color

我的问题：

```
ring5Views[i]
                .setOnItemClickListener(new AdapterView.OnItemClickListener() {

                    public void onItemClick(AdapterView<?> parent,
                            View arg1, int position, long arg3) {

            arg1.setBackgroundColor(Color.parseColor("#444444"));

                    }

                }); 
```

如果我每隔一个项目（%2）单击一个项目（子项）就会改变它的背景颜色。为什么 ？

我想要的漏洞是一个包含项目和不同颜色的列表，但是 getChild 不能解决问题，因为每次都是 NULL。getItem 没有帮助，因为它只返回值（字符串）

这就是它应该如何工作......

```
for(int i=0; i<oneList;i++)
        {
            oneList.getChildAt(i).setBackgroundColor(Color.blue);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:18.243

扩展**ArrayAdapter**并覆盖**getView**方法。并且在 getView 方法中，您可以根据条件更改颜色

您可以查看此[示例](http://www.vogella.com/articles/AndroidListView/article.html)以供参考

# multithreading - 在单独的线程中处理每个 TCP 连接会改善延迟吗？

> ID：15095530
> 
> 赞同：1
> 
> 时间：2013-02-26T17:33:10.560
> 
> 标签：multithreading, qt, latency, qtcpsocket

我有一个 FTP 服务器，在 QTcpServer 和 QTcpSocket 之上实现。

我利用信号和槽机制同时支持多个 TCP 连接，即使我只有一个线程。我的代码尽快返回到事件循环，它不会阻塞（没有等待函数），并且它不会在任何地方使用嵌套事件循环。这样我就已经有了**协同多任务处理**，就像 Win3.1 应用程序一样。

但是很多其他 FTP 服务器都是多线程的。现在我想知道使用**单独的线程**来处理每个 TCP 连接是否会提高性能，尤其是**延迟**。

一方面，线程会增加延迟，因为您需要为每个新连接启动一个新线程，但另一方面，在我的协作多任务处理中，其他 TCP 连接必须等到我返回主循环后才能发出`readyRead()`/`bytesWritten()`信号可以处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:07:22.577

在您当前的系统中并忽略文件 I/O 时间，如果有一些有用的事情要做，一个处理器总是在做一些有用的事情，如果没有什么有用的事情要做，则等待准备就绪。如果这是一个单处理器（单核）系统，您将获得最大的吞吐量。这通常是一个非常好的设计——特别是对于一个 FTP 服务器，您通常不需要一个人在逐个数据包的基础上等待。

您还最小化了**平均**延迟（对于单处理器系统）。您没有的是**一致**的延迟。测量系统性能可能会显示很多***抖动***——处理数据包所需的时间有很多变化。同样因为这是 FTP 而不是实时过程控制或人工交互，所以抖动可能不是问题。

但是，现在请考虑您的系统上可能有多个处理器可用，并且可能会重叠 I/O 时间和处理时间。

要充分利用多处理器（核心）系统，您需要一些并发性。

这通常转换为使用多个线程，但可以通过异步（非阻塞）文件读取和写入来实现并发。

然而，在一个程序中添加多个线程会打开一个巨大的蠕虫罐。

如果你决定走 MT 路线，我建议你考虑依赖线程感知 I/O 库。QT 可能会为您提供（我不确定。）如果没有，请查看 boost::asio （或 ACE 用于较旧但仍然可靠的解决方案）。您会发现使用此类库的 MT 功能需要对学习时间进行大量投资；然而，事实证明，“手动”添加多线程并使其正确的时候会更糟。

所以我会说保留现有的解决方案，除非你担心未使用的处理器周期和/或抖动，在这种情况下开始学习 QT 的多线程支持或 boost::asio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:43:42.473

您是否需要为每个新连接启动一个新线程？你能不能只有一个线程池在请求到达时对请求起作用。这应该会减少一些延迟。我不得不说，一般来说，多线程 FTP 服务器应该比单线程服务器响应更快。是否有可能拥有基于事件的 FTP 服务器？

# python - Spyder 在 OSX 的虚拟 python 环境中不断崩溃

> ID：15095534
> 
> 赞同：0
> 
> 时间：2013-02-26T17:33:20.367
> 
> 标签：python, virtualenv, spyder

我正在使用[virtualenv](https://pypi.python.org/pypi/virtualenv)和 Python 的[Enthought](http://www.enthought.com/products/edudownload.php)学术版本在虚拟环境设置中运行 Spyder 的 OSX Mountain Lion 安装（版本['spyder-2.2.0beta2.zip' ）。](https://code.google.com/p/spyderlib/downloads/list)设置加载正常，但每当我在“另存为”对话框内时崩溃，特别是当我单击“位置：”下拉框选择文件夹时。用于打开 Spyder 的终端然后报告. 有什么想法是什么原因造成的？`Segmentation fault: 11`

![在此处输入图像描述](../Images/7feed3b338b28b7eed1f99abcafe5eba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:09:54.483

（这里是 Spyder 开发人员）这不是我们的错，也不是 Enthought 的错，而是[PySide 的](https://pypi.python.org/pypi/PySide)：Enthought 分发的 Python Qt 绑定。不幸的是，它们不是很稳定（导致像你描述的那样崩溃）并且目前没有维护，所以我们对此无能为力。

我们在 Mac 上推荐的安装方法是使用我们的[DMG](http://code.google.com/p/spyderlib/downloads/detail?name=spyder-2.2.0beta2_Lion.dmg&can=2&q=)（它使用 PyQt4，一组更稳定的绑定），然后将您的解释器切换到 EPD 的解释器。或者使用 MacPorts，如果你足够勇敢的话 :-)

# vba - 是否有可能让这段代码获取文件和文件夹？

> ID：15095535
> 
> 赞同：3
> 
> 时间：2013-02-26T17:33:24.110
> 
> 标签：vba, excel

我目前有这个代码：

```
Function GetSubDir(ByVal sDir)

Dim oFS As New FileSystemObject
Dim oDir
iCount = 1
Erase subArray()
Set oDir = oFS.GetFolder(sDir)
For Each oSub In oDir.SubFolders
    MsgBox oSubPath
    GetSubDir oSub.Path
    ReDim Preserve subArray(iCount)
    subArray(iCount) = oSub.Path
    iCount = iCount + 1
Next oSub

End Function 
```

有没有办法修改它以获取文件和文件夹？我曾尝试查看 MSDN，但它对我来说很陌生，是简单的语法更改还是整个代码需要返工？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:53:06.053

我认为这很有可能 - 此示例代码显示了如何循环文件：

```
Sub ShowFileList(folderspec)
    Dim fs, f, f1, fc, s
    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.GetFolder(folderspec)
    Set fc = f.Files
    For Each f1 in fc
        s = s & f1.name 
        s = s &  vbCrLf
    Next
    MsgBox s
End Sub 
```

只需您需要再添加一个`For...Each`循环。但是，如果您想将所有文件和所有子文件夹递归处理到最后一层 - 这将需要更多编码。`ready-to-go`但是，使用 Google 可能会在几分钟内显示大量此类片段。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T06:53:49.083

函数 GetSubDir(ByVal sDir)

```
Dim oFS As New FileSystemObject

Dim oDir
Dim oSub As Object
Dim i As Integer

Dim wbName As String

Set oDir = oFS.GetFolder(sDir)
For Each oSub In oDir.SubFolders
    SDCount = SDCount + 1
    ReDim Preserve wbSDName(1 To SDCount)
    wbSDName(SDCount) = oSub.Path
    GetSubDir oSub.Path
Next oSub 
```

结束功能

# vbscript - 是否可以在 Dictionary 对象中有一个数组

> ID：15095536
> 
> 赞同：4
> 
> 时间：2013-02-26T17:33:26.473
> 
> 标签：vbscript

我知道组合到类似的数据结构是不合逻辑的，但很想知道我们是否可以在 Dictionary 对象中包含一个数组元素。就像是：

```
Set d = CreateObject("Scripting.Dictionary")

d.Add "Name", "John"
d.Add "Age", 31
d.Add "Company", Array("microsoft", "apple") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:20:37.720

你`WScript.Echo`离自己解决这个问题还有一段距离：

```
>> Set d = CreateObject("Scripting.Dictionary")
>> d.Add "Company", Array("microsoft", "apple")
>> WScript.Echo Join(d("Company"))
>>
microsoft apple 
```

cf[这个问题](https://stackoverflow.com/a/15096268/603855)

**更新（感谢@Ansgar）：**

`.Item()`(and `For Each`)传递的元素是**副本**；和数组分配副本（不像其他语言那样引用）。因此，更改存储在字典中的数组元素意味着分配一个新数组：

```
>> Set d = CreateObject("Scripting.Dictionary")
>> d.Add "Company", Array("microsoft", "apple")
>> WScript.Echo Join(d("Company"))
>> d("Company") = Array(d("Company")(1), "samsung")
>> WScript.Echo Join(d("Company"))
>>
microsoft apple
apple samsung 
```

有时使用（另一个）字典、System.Collections.Arraylist 或自定义对象更方便（所有对象都是引用，因此分配可以访问原始元素）。

# gwt - Google Cloud Endpoints gwt Oauth2 身份验证

> ID：15095539
> 
> 赞同：3
> 
> 时间：2013-02-26T17:33:31.367
> 
> 标签：gwt, oauth-2.0, google-cloud-endpoints

我们将 Google Cloud Endpoints 与 GWT 应用程序一起使用。对于 OAuth2 的身份验证，我们使用 gwt-oauth2 ( [http://code.google.com/p/gwt-oauth2/](http://code.google.com/p/gwt-oauth2/) )，但它会在第一次访问时和每次令牌过期时不断提示用户弹出窗口。这不是一个良好的用户体验，因为它在使用 Google 帐户时仅使用 Cookie 身份验证。有没有人知道使用 gwt 向 Endpoints 进行身份验证的任何其他方式，而无需通过授权屏幕提示用户，或者至少在每次令牌过期时都无需提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:47:07.217

我不确定 gwt-oauth2 是否支持立即模式，但如果支持，这就是通过弹出窗口提示重复访问的解决方案。（如果没有，这是对库的错误/功能请求。）

Google API JS 客户端使用即时模式来获取新令牌，而不会弹出窗口，只要用户先前授权了应用程序（如[文档](https://developers.google.com/appengine/docs/java/endpoints/consume_js#adding-oath-authentication)中所示）。您需要在库中复制此行为。

根据设计，当用户第一次访问您的应用程序时，您总是会看到一个弹出窗口。

# functional-programming - 如何在 OCaml 中的 O(n) 中洗牌？

> ID：15095541
> 
> 赞同：7
> 
> 时间：2013-02-26T17:33:35.710
> 
> 标签：functional-programming, ocaml

`array`通过就地交换，在 O(n) 中洗牌并不难，

如何`list`在 OCaml 中使用 O(n) 执行此操作？

* * *

要求：

1.  没有阵列或就地使用

2.  将此视为面试问题

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T17:42:51.233

列表是不可变的，使用不可变数据通常需要付出*log n的代价。*如果您愿意支付此费用，则有一个明显的*n log n*方法：用随机值标记每个列表元素，根据随机值排序，删除随机值。这就是我在生产代码中随机播放列表的方式。

这是我销售的 iOS 应用程序的随机播放代码：

```
let shuffle d =
    let nd = List.map (fun c -> (Random.bits (), c)) d in
    let sond = List.sort compare nd in
    List.map snd sond 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:10:06.213

您可以模仿卡片的浅滩洗牌。

一副纸牌的洗牌意味着：

*   将甲板分成两部分
*   将两部分交错

做反向排列实际上更容易：

*   有两个辅助列表 A 和 B，遍历原始列表 L 并将每个元素随机（概率为 1/2）推到 A 或 B 前面。
*   L := List.rev A @ List.rev B（这可以使用自定义 List.rev 进行尾递归）。
*   重复k次。

根据“Persi Diaconis，2002 年对浅滩洗牌分析的数学发展”，选择 k = 3/2 log_2(n) + c。事实上，均匀性和结果之间的总变化距离呈指数快速下降到 0：每次增加 c 时它大约减半。您可以选择 c=10。

空间 O(1)（如果你破坏 L），时间 O(n log n)。但是对随机生成器有 O(n log n) 次调用，而 Jeffrey Scofield 的解决方案只需要 O(n) 个随机位，但需要 Θ(n) 个空间。

# jquery - 如何设置 jQ UI Slider Widget 以在最后一步显示图像？

> ID：15095542
> 
> 赞同：0
> 
> 时间：2013-02-26T17:33:40.243
> 
> 标签：jquery, jquery-ui-slider

我有一个 jQuery UI 滑块在这里工作：[http](http://energync.ehclients.com/slider2.html) ://energync.ehclients.com/slider2.html ，我喜欢它的工作方式。我只需要做一个调整，我就会准备好。

目前滑块有三个步骤： 1\. 第一张幻灯片 2\. 第二张幻灯片 3\. 空白。

如何将以下 jQuery 修改为仅两个步骤，仅显示幻灯片一和二，但不显示空白？

谢谢！

```
 $(function() {
    $('#sliderContent .item:first').addClass('shown').show();
    $("#slider").slider({
        value: 0,
        min: 0,
        max: $('#sliderContent .item').size(),
        step: 1
    }).bind("slide", function(event, ui) {
        var newIndex = ui.value;
        var oldIndex = $('#sliderContent .item').index('.shown');
        if (newIndex != oldIndex) {
            $('.shown').fadeOut(150).removeClass('shown');
            $('#sliderContent .item').eq(newIndex).fadeIn(150).addClass('shown');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:37:28.117

设置`max`为`$('#sliderContent .item').size() - 1`。

# git - 无法在代理后面执行 git-svn fetch

> ID：15095561
> 
> 赞同：19
> 
> 时间：2013-02-26T17:34:38.050
> 
> 标签：git, svn, git-svn

我正在尝试使用 git-svn 镜像 svn 存储库。

我正在做

```
git svn clone http://worldwind31.arc.nasa.gov/svn/trunk/WorldWind 
```

我得到

```
Initialized empty Git repository in f:/gstest/WorldWind/.git/
RA layer request failed: PROPFIND request failed on '/svn/trunk/WorldWind': PROPFIND of '/svn/trunk/WorldWind': could not connect to server (http://worldwind31.arc.nasa.gov) at /usr/lib/perl5/site_perl/Git/SVN.pm line 148 
```

如果我在另一台不在代理中的计算机上执行相同操作，那就没问题了。

我在win7上，我已经设置 了`$HTTP_PROXY`，`http.proxy`（git中的全局）和`$HOME/AppData/Roaming/Subversion/servers`正确的代理。

在shell`svn checkout [repo adress]`中工作。在shell`wget [repo adress]`中工作。但不是`git svn clone [repo adress]`

有任何想法吗？我发现的大多数问题都指向该`Subversion/servers`文件，但现在我已经编辑了该文件，但问题仍然存在......：/

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-16T14:00:02.497

我有同样的问题。

解决方案是找到正确的 Subversion 配置目录。至少在我的情况下，本机`svn.exe`使用文件`C:\Users\MYUSER\AppData\Roaming\Subversion\servers`，但`git-svn`使用`~/.subversion/servers`. 我的意思`~/.subversion/servers`是 Git Bash shell 中的这条路径，它`~`被扩展到正确的位置。`~/.subversion/servers`以与使用的另一个相同的方式进行编辑`svn.exe`，然后`git svn clone`应该可以工作。

简而言之，关键是找到要编辑的正确配置文件，因为您在 Windows 中可能有多个配置文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T12:20:23.640

要让 svn 在 linux 上的代理后面工作，请`~/.subversion/servers`使用代理详细信息更新文件。

```
[global]
# http-proxy-exceptions = *.exception.com, www.internal-site.org
http-proxy-host = YOURPROXY.com
http-proxy-port = YOURPORT
# http-proxy-username = defaultusername
# http-proxy-password = defaultpassword
# http-compression = no
# http-auth-types = basic;digest;negotiate
# No http-timeout, so just use the builtin default.
# No neon-debug-mask, so neon debugging is disabled.
# ssl-authority-files = /path/to/CAcert.pem;/path/to/CAcert2.pem 
```

我猜windows上有类似的配置......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-02T00:29:29.423

通常，单独的环境变量：

*   `HTTP_PROXY`
*   `HTTPS_PROXY`
*   `NO_PROXY`

足以让 git 或 git-svn 正常工作。

但让我明白的是要使用的确切网址。
例如：

*   `HTTP_PROXY=wwww.myproxy.company:8080`不会工作，但是
*   `HTTP_PROXY=http://wwww.myproxy.company:8080`将工作。

使用相同的 for `HTTPS_PROXY`，表示相同的*http*地址（我尝试首先为 放置一个 https url `HTTPS_PROXY`，但这不是它的工作方式）

当然，如果您需要进行身份验证，您可以（至少出于测试目的）在其中添加您的登录名/密码：

```
HTTP_PROXY=http://myLogin:myPassword@wwww.myproxy.company:8080 
```

它也有助于设置`NO_PROXY`一个：`localhost,*.company`.

* * *

所以这个答案背后的要点是“仔细检查你正在使用的确切网址”（并用一个简单`curl http://www.google.com`的 ，`wget`或者来自 msysgit 包或来自 的测试它[`Gnu On Windows`](https://github.com/bmatzelle/gow/wiki)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T03:23:39.900

查看 C:\Users\YOU\.subversion\servers 中的设置。你正在这个文件中寻找一些东西，比如......

```
[global]
# http-proxy-exceptions = *.exception.com, www.internal-site.org
http-proxy-host = 127.0.0.1
http-proxy-port = 3128 
```

... 这些设置适用于 CNTLM。取消注释我上面未注释的行并输入您自己的详细信息。有密码等字段。为我从 Sourceforge 获取内容修复了它。是的，Sourceforge 还在。

此外，CNTLM 非常适合通过 NTLM、前沿等。运行 Fiddler2 并将规则设置为“自动验证”为 true 以获取 CNTLM 错过的任何身份验证。Chrome 更新是 Fiddler 为我修复的一件事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-15T09:00:57.593

对我来说，解决方案只是更改**config**中的**url**。因为我无法访问现有的。为了检查，我只是使用我的浏览器访问了 repo url。如果使用禁止的网址，我会得到**'403 Forbidden'**。

# javascript - 使用 JS 客户端使 Google Drive 的访问令牌无效

> ID：15095563
> 
> 赞同：2
> 
> 时间：2013-02-26T17:34:51.140
> 
> 标签：javascript, google-drive-api, google-oauth

有没有办法让 Google Drive 收到的访问令牌在 1 小时内过期？这将大大加快测试过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:58:06.263

您可以发送请求以撤销访问令牌或刷新令牌：

[https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke](https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke)

# ajax - 硬编码导航栏与 ajax

> ID：15095567
> 
> 赞同：0
> 
> 时间：2013-02-26T17:35:00.273
> 
> 标签：ajax, database, web, loading

我有相当大的导航栏（300kb），这使它工作缓慢只是想知道什么会更好，

1.  使用硬编码版本并每周更新一次？（这样我不查询数据库，但客户端在加载时会等待时间）

2.  将 Ajax 用于第 3 级子菜单。网站会很小，这很好。对于不能使用 ajax 的客户来说，仍然是使用导航栏达到 2 级的一种方式。（没关系）。但我有点担心我会收到来自许多用户的许多请求，这可能会因为多次调用数据库而减慢一切。

哪种方式更好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:40:06.110

我个人会使用 SSI（服务器端包含）并让数据库管理我的导航。

我假设您使用的是某种 CMS，因此核心基础架构应该已经存在。

正确设置缓存，加载速度不会成为问题，并且会大大减少查询。

与其手动更新某些东西，不如每周清理一次缓存来更新它，就像馅饼一样简单:)

# php - PHP/MySQL 多票

> ID：15095569
> 
> 赞同：1
> 
> 时间：2013-02-26T17:35:03.313
> 
> 标签：php, mysql

您好，我的网站上有投票系统，但我想禁用用户的多次投票。如果用户投票，他/她不能再次投票。这是我拥有但不是很好的一种解决方案。

我在用户表中创建了一个列：`users_avoted`我将在其中存储他/她投票喜欢的文章的 ID：

```
1|2|5|6 
```

由此我将能够检查用户是否已经投票。但问题是会有很多文章，所以`VARCHAR(255)`不足以存储所有这些 ID。还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:39:07.223

不要那样去规范化它。只需有一个两列表 userVotes，其中包含 UserID 和 ArticleID 的复合键。

示例数据：

```
 userid  | articleid
   1          1
   1          2
   1          67
   2          1 
```

这比类似的东西要好

```
 userID    | articleID
    1         1,2,67 
```

这就是你所建议的。请不要这样做，并保持其正常化，除非您每次查询时都想做体操。详细地说，实施您的建议会破坏使用 RDBMS 的目的，以便“欺骗”一个特定的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:39:28.273

您可以改为制作如下表格：

```
users_avoted {
    article_id,
    user_id,
    answer_id
} 
```

从 article_id 和 user_id 中创建一个唯一索引。那将只允许为此输入一条记录。

所以，假设他们在文章 2 上选择了选项 5，他们是用户 1。

现在，当您尝试插入表时：

```
INSERT INTO users_avoted VALUES (2, 1, 5) 
```

你不能因为用户已经投票了。

* * *

**这种方法的好处**是您不必检查他们是否已经先投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:40:45.817

将投票存储在一个表格中，例如：id、username、voteid、vote。

然后当用户投票时，检查该表是否匹配行。

例如：

```
if ($username == $dbusername && $voteid == $dbvoteid){
     $disallowed = true;
} 
```

# jquery - 这个 jQuery 选择器中的“>”是什么意思？

> ID：15095570
> 
> 赞同：4
> 
> 时间：2013-02-26T17:35:03.520
> 
> 标签：jquery, css

大于号 ( `>`) 在这里有什么不同？

是`$('#someElement').find(">[someAttribute]")`一样的`$('#someElement').find("[someAttribute]")`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T17:35:59.343

否：它只选择一个元素，如果它是 . 的直接子元素`#someElement`。

它在语义上基于 CSS 直接子选择器。

查看[子选择器的文档](http://api.jquery.com/child-selector/)

# c++ - 对共享文件使用预处理器指令

> ID：15095571
> 
> 赞同：0
> 
> 时间：2013-02-26T17:35:03.907
> 
> 标签：c++, preprocessor-directive

我有一个带有以下预处理器指令的 .cpp 文件（我们称之为 check.cpp）：

```
#ifdef CHECK
// code to execute goes here
#endif 
```

check.cpp 文件用于两个不同的项目。（项目在同一个文件夹中并共享同一个 check.cpp 文件，该文件也在同一个文件夹中）

我希望一个项目执行此代码，但另一个项目不执行此代码。

所以最后，对于 ProjectA，check.cpp 将具有：

```
#ifdef CHECK
// This code WILL execute
#endif 
```

对于 ProjectB，check.cpp 将具有：

```
#ifdef CHECK
// This code WILL NOT execute
#endif 
```

是否可以使用预处理器指令，或者可能有更简单的方法？

我的想法是使用

```
#define CHECK 1 
```

并将其放在其中一个项目中而不是另一个项目中，但 .cpp 文件需要包含 #define 才能工作，并且该文件是共享的...

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:44:37.697

我不确定您使用的是哪个编译器，但在 Visual Studio 中，在您要执行代码的项目中定义“CHECK”：

项目设置 > 配置属性 > C/C++ > 预处理器 > 预处理器定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:44:05.457

无论你做什么，你都需要一个决定点，你在哪里指示编译器要编译什么代码。

不同的开发环境提供了各种方法来将数据注入到这个决策点。它可以通过对不同项目具有不同值的环境变量。另一种方法（我会说一种更简洁的方法）是将代码分隔在 2 个不同的文件中，一个包含在第一个项目中，一个包含在第二个项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:45:10.117

我不认为这是可能的。

```
#ifdef CHECK
...
#endif 
```

如果定义了 CHECK，将始终执行。不将封闭代码包含在项目中的唯一方法是取消定义该项目的 CHECK（如果已定义）。

```
#undef CHECK 
```

在项目 B

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:46:17.853

如果您想使用#defines 来使用您的方法，我建议您采用以下方法：

```
#ifdef FOO
#define BAR(x) f(x)
#undef FOO
#else
#define BAR(x) g(x)
#endif 
```

在 ProjectA.cpp 中：

```
#define FOO
#include "header.h"

void a(int x) {
    BAR(x); // f(x)
} 
```

在 ProjectB.cpp 中

```
#undef FOO
#include "header.h"  
void b(int x) {
    BAR(x); // g(x)
} 
```

这将调用两个版本的不同函数，但您的代码可以保留在同一个文件 common.cpp 中。因此，`g(x)`您可以运行特定于的代码，`ProjectB.cpp`并且`f(x)`可以运行特定于的代码`ProjectA.cpp`

希望我正确回答了这个问题。

# java - 在 java 中使用 Countdownlatch 和 Executor 时没有得到预期的输出

> ID：15095582
> 
> 赞同：0
> 
> 时间：2013-02-26T17:35:38.957
> 
> 标签：java, multithreading, executorservice

我对 Java**多线程**非常陌生。尝试在 Java 线程中学习 countdownlatch 和 executor 并实现以下代码-

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ExecutorBasicFramework {

    class MyThread extends Thread{

        int iCount ; String name;
        CountDownLatch latch;

        public MyThread(int iCount, String name, CountDownLatch latch) {
            super();
            this.iCount = iCount;
            this.name = name;
            this.latch = latch;         
        }

        @Override
        public void run() {
            for(int i=0;i<10;i++){
                System.out.println(name+" Printing .... "+ ++iCount+" L "+latch.getCount());
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }               
            }
            latch.countDown();

        }

    }

    public ExecutorBasicFramework() {
        createThread();
    }

    private void createThread() {
        ExecutorService exec = Executors.newFixedThreadPool(10);
        CountDownLatch latch = new CountDownLatch(10);
        for(int i=0;i<10;i++){          
            MyThread thread = new MyThread(i*10, ""+i,latch);
            exec.execute(thread);

            try {
                latch.await();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        exec.shutdownNow();     

    }

    public static void main(String[] args) {
        new ExecutorBasicFramework();
    }

} 
```

输出如下 -

```
0 Printing .... 1 L 10
0 Printing .... 2 L 10
0 Printing .... 3 L 10
0 Printing .... 4 L 10
0 Printing .... 5 L 10
0 Printing .... 6 L 10
0 Printing .... 7 L 10
0 Printing .... 8 L 10
0 Printing .... 9 L 10
0 Printing .... 10 L 10 
```

然后流程就像继续等待。我的预期输出与上面类似，但在打印 0 之后，它应该打印 1 到 9 的类似输出，然后程序应该停止。

我认为倒计时正在等待和等待，它不会增加执行器的下一个计数器。所以我无法获得预期的输出。我期待输出像 -

```
0 Printing .... 1 L 10
0 Printing .... 2 L 10
0 Printing .... 3 L 10
0 Printing .... 4 L 10
0 Printing .... 5 L 10
0 Printing .... 6 L 10
0 Printing .... 7 L 10
0 Printing .... 8 L 10
0 Printing .... 9 L 10
0 Printing .... 10 L 10

1 Printing .... 11 L 9
1 Printing .... 12 L 9
1 Printing .... 13 L 9
1 Printing .... 14 L 9
1 Printing .... 15 L 9
1 Printing .... 16 L 9
1 Printing .... 17 L 9
1 Printing .... 18 L 9
1 Printing .... 19 L 9
1 Printing .... 20 L 9

and So on ... 
2 Printing .... 21 L 8
2 Printing .... 22 L 8
2 Printing .... 23 L 8 
```

> 对于锁存器的每个递减计数器，下一个线程池必须执行计数直到 10。然后它必须再次减少锁存器计数器，并且该过程再次重复，直到线程 9 完成相同

请提出一些意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:39:13.593

因此，您将倒计时值配置为 10 `new CountDownLatch(10)`，但您的代码仅在每个线程中递减一次。在你只分叉 1 个线程后，你等待闩锁，但它位于 9。

```
MyThread thread = new MyThread(i*10, ""+i,latch);
exec.execute(thread);
latch.await(); 
```

不确定您的意图，但也许`latch.countDown();`应该*在*线程的 for 循环内？

```
for(int i=0;i<10;i++) {
   ...
   // if you want the latch to count-down 10 times, it should be inside the loop
   latch.countDown();
}
// it should not go here, outside the loop 
```

如果目标是等待所有作业完成，您可以使用以下`ExecutorService.awaitTermination(...)`方法：

```
// submit jobs in loop
exec.shutdown();
exec.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS); 
```

此外，您*不*`Thread`应该在`MyThread`课堂上进行扩展。你应该实施`Runnable`. 您的代码有效的唯一原因是它`Thread`也实现`Runnable`但*不*`MyThread`应该是. 需要 a或 a ，而不是 a 。它在服务内部为您管理线程。*`Thread``ExecutorService``Runnable``Callable``Thread`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:17:10.030

如果您的意图是使用`CountDownLatch`让该`main()`方法等到所有线程都已执行，那么您应该将提交线程的循环移到`latch.await()` *外部。*`InterruptedException`此外，如果没有再次设置中断标志，您不应该吃掉。（[见这篇文章](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)）。

更正如下所示：

```
for(int i=0;i<10;i++){          
    MyThread thread = new MyThread(i*10, ""+i,latch);
    exec.execute(thread);
}
try {
    latch.await();
} catch (InterruptedException e) {
    Thread.currentThread().interrupt();
} 
```

虽然这肯定会起作用，但当使用`ExecutorService`. 如果你使用`submit()`而不是`execute()`你可以使用`Future`returned by`submit()`来等待提交完成，`Runnable`通过调用`get()`就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:27:24.260

感谢大家的投入。我找到了一种更简单的解决方案来达到我的预期。我只是使用`Executors.newSingleThreadExecutor();`它，因为它已经确保所有任务都将保证按顺序执行。*

# javascript - 使用 Node.JS 解密 Rijndael（在使用 Delphi 和 Delphi Encryption Compendium 加密之后）

> ID：15095583
> 
> 赞同：3
> 
> 时间：2013-02-26T17:35:40.940
> 
> 标签：javascript, delphi, node.js, encryption

我有一个使用[Delphi Encryption Compendium](http://code.google.com/p/delphidec/) (DEC) 加密某些数据的 delphi 应用程序。它工作得很好，我可以毫不费力地加密和解密。我正在使用 Rijndael 加密。

我的挑战是使用 Node.JS 解密加密的 Delphi 数据（使用加密中的功能）。我查看了 StackOverflow 问题[Delphi DEC 库 (Rijndael) 加密](https://stackoverflow.com/questions/9226487/delphi-dec-library-rijndael-encryption)和[AES 加密在 Node.js 中解密在 PHP 中。失败。](https://stackoverflow.com/questions/6038620/aes-encrypt-in-node-js-decrypt-in-php-fail)，并且我认为我对我的问题的理解更好一些。

我学到的是，我需要模仿 DEC 在节点端使用的密钥派生。我不能以任何方式覆盖或更改加密方面。我必须使用已经存在的内容。

我的问题是：DEC 使用的密钥派生（给定密钥和 iv）标准，还是 DEC 库专用的东西？如果它是标准的，那么在给定相同输入的情况下，是否有人见过任何产生与 DEC 中的函数相同的输出的 JavaScript 代码？

我看到密钥派生序列的一部分涉及对密钥进行哈希处理（在本例中，是一个 32 字节的密钥，使用 RipeMD-256 进行哈希处理）。我进一步看到，作为密钥派生过程的一部分，密钥的大小从 32 个字节减少到了 16 个字节。我在 Delphi 代码中被绊倒的地方是 DEC 如何使用密钥和 iv 来派生实际用于解密的密钥。

我很高兴使用任何必要的代码来编辑它。我希望熟悉 DEC 库和 javascript / node.js 的人可以为我指明正确的方向。

===编辑===

因此，在进行了一些额外的挖掘之后，我发现了[这个用于 AES 的 Javascript 代码，](http://www.movable-type.co.uk/scripts/aes.html)作为使用加密模块的替代方法。作者取CIV值作为密文的前8个字节，所以我只是：

```
var encryptedData='B6F03982E2F6303ACA7313'; // 纯文本是 'Hello There'
变量键='01234567890123456789012345678901';
var hashedKey=hash('ripemd256',key);
var civ='549621EEF38647BE';
var decryptedData='';

var charEncryptedData=hex2a(encryptedData);
var charKey=hex2a(hashedKey);
var charCiv=hex2a(civ);

decryptedData=Aes.Ctr.decrypt(charCiv+charEncryptedData,hashedKey,128);

console.log('解密数据：'+decryptedData);

```

但毕竟，我想知道这个库中的密钥派生是否与 DEC 中的相同。

=== 编辑 ===

在回答评论时，不，在给定相同的密钥和 civ 值的情况下，这两种实现似乎不会计算相同的加密数据。打电话

```
var reEncryptedData=Aes.Ctr.encrypt('hello there', charKey, 128, charCiv); 
```

产生一个完全不同的加密字符串，即使考虑到 CIV 到加密文本的前置，仍然比 delphi 端的输出长 8 个字节。

===编辑===

Aes.Ctr 代码库（上面提到的）正在使用 CTR 模式，我在 delphi 端做 CBC。-叹-

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:30:55.883

我敢肯定这不是全部答案，但它是其中的一部分。

在比较各种 Javascript AES 实现时，包括 heinob 提交给这个问题的那些，我发现它们与 Delphi 版本之间存在一些差异。特别是在一些预先计算的值中。

所以，我有两个选择：在 Delphi 库中重新开发代码或从 Delphi 库构建一个 DLL，然后从 dot net 应用程序中调用它。我决定走点网路线：在 Delphi 库中构建一个调用解密路线的 dll。

如果其他人走这条路，我将传递几个花絮：

我的函数签名是：

```
function decrypt(encryptedData, key, iv: PAnsiChar): PAnsiChar; StdCall; Export; 
```

在 C# 中，函数签名是：

```
public static extern IntPtr decrypt(string encryptedData, string key, string iv); 
```

调用后，您将 IntPtr 编组为 ansi 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:40:40.197

您可以将算法与这两个 javascript 库进行比较：

*   [http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)
*   [https://code.google.com/p/passpack/](https://code.google.com/p/passpack/)

两者都肯定会产生正确的 crpyted 输出。

顺便说一句：MEGA（KimDotCom）使用第一个加密文件。

# scala - Scala Monad - 完整示例

> ID：15095588
> 
> 赞同：7
> 
> 时间：2013-02-26T17:35:53.987
> 
> 标签：scala

有没有人有一个完整的 Scala monad 示例来解决现实世界的问题并与用 Java 编写的相同代码进行比较？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T18:00:45.027

所有的集合都是单子（这是一个一般性的声明，而不是特定于 Scala 的声明），或者“有单子”，这取决于你想要对它有多严格。Scala 也有`Option`一个 monad，以及左右投影`Either`。每当你看到他们的理解时，你就可以看到他们的一元方面在起作用。

Scala 中一个更微妙的 monad 示例是解析器组合器。它更加微妙，因为运算符将一元操作隐藏在语法中看起来更好的同义词后面。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T18:01:22.763

```
def optionAdd(x:Option[Int], y:Option[Int]):Option[Int] = 
  for(xx <- x; yy <- y) yield xx+yy 
```

我不敢在 java 版本上浪费时间，特别是因为比我聪明得多的人已经做了[http://functionaljava.org/examples/1.5/#Option.bind](http://functionaljava.org/examples/1.5/#Option.bind)。链接中的示例基本上`optionAdd`是以无限简洁的方式完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:42:08.953

见[http://jazzy.id.au/default/2012/11/02/scaling_scala_vs_java.html](http://jazzy.id.au/default/2012/11/02/scaling_scala_vs_java.html)

例如，使用 monad 对四个客户端进行异步调用：

```
for {
  user <- getUserById(id)
  orders <- getOrdersForUser(user.email)
  products <- getProductsForOrders(orders)
  stock <- getStockForProducts(products)
} yield stock 
```

Futues 是一元的，for 推导可用于编写异步代码

在java中...开始等待[Java 8的Monads](https://stackoverflow.com/questions/13454347/monads-with-java-8)

# asp.net-mvc - 使用 PagedList 时从控制器设置 ASP MVC3 下拉列表项

> ID：15095596
> 
> 赞同：0
> 
> 时间：2013-02-26T17:36:18.340
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-select, pagedlist

我有一个使用[PagedList](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)的页面，但也包含一个用于排序的下拉列表。问题是，每当有人使用下拉列表项进行排序时，每当他们点击“下一个”或“后退”时，下拉列表项都会恢复为默认值，程序通过控制器运行默认（基本上是空白）排序标准，当您导航到第二页或第二页（并返回）时，您会丢失已排序的项目。

这是用于此页面的控制器：

```
 public ActionResult Index(FormCollection dropDownSelection, string currentFilter, int? page)
    {
        //security
        if (!Security.IsViewer(User)) return RedirectToAction("Message", "Home", new { id = 2 });

        if (ViewBag.Level == 0) return RedirectToAction("Message", "Home", new { id = 2 });

        if (!(Request.HttpMethod == "GET"))
        {
            page = 1;
        }

        string table = String.IsNullOrWhiteSpace(dropDownSelection["Table"]) ? "%" : dropDownSelection["Table"];
        string issue = String.IsNullOrWhiteSpace(dropDownSelection["IssueType"]) ? "%" : dropDownSelection["IssueType"];
        string status = String.IsNullOrWhiteSpace(dropDownSelection["Status"]) ? "%" : dropDownSelection["Status"];

        var followUpItem = from follow in db.FollowUpItems
                           where (follow.TableName.Equals(table) || table.Equals("%")) &&
                                 (follow.IssueType.Equals(issue) || issue.Equals("%")) &&
                                 (follow.Status.Equals(status) || status.Equals("%"))
                           orderby follow.Id
                           select follow;

        int pageNumber = (page ?? 1);
        int pageSize = 10;

        return View(followUpItem.ToPagedList(pageNumber, pageSize));
    } 
```

这是视图中的下拉列表：

```
 <select name="Table" title="Table" style="font-size:8pt;">
            <option value="%">--Table Name--</option>
            <option value="AgentContEd">CE</option>
            <option value="AgentProductTraining">PT</option>
          </select>
          <select name="IssueType" style="font-size:8pt;">
            <option value="%">--Issue Type--</option>
            <option value="W">Warning</option>
            <option value="E">Error</option>
          </select>
          <select name="Status" style="font-size:8pt;">
            <option value="%">--Status Type--</option>
            <option value="O">Open</option>
            <option value="U">Under Review</option>
          </select> 
```

并且（以防万一）下面是`<div>`包含视图中的 PagedList 导航按钮的：

```
<div>
Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
of @Model.PageCount

@if (Model.HasPreviousPage)
{
    @Html.ActionLink("<<", "Index", new { page = 1, sortOrder = ViewBag.CurrentSort, searchString = ViewBag.CurrentFilter, currentFilter = ViewBag.CurrentFilter })
    @Html.Raw(" ");
    @Html.ActionLink("< Prev", "Index", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, searchString = ViewBag.CurrentFilter, currentFilter = ViewBag.CurrentFilter })
}
else
{
    @:<<
    @Html.Raw(" ");
    @:< Prev
}

@if (Model.HasNextPage)
{
    @Html.ActionLink("Next >", "Index", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, searchString = ViewBag.CurrentFilter, currentFilter = ViewBag.CurrentFilter })
    @Html.Raw(" ");
    @Html.ActionLink(">>", "Index", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, searchString = ViewBag.CurrentFilter, currentFilter = ViewBag.CurrentFilter })
}
else
{
    @:Next >
    @Html.Raw(" ")
    @:>>
}
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:16:13.467

如果您首先通过 ViewModel 传递 followUpItem，然后实际传递下拉列表中的选定值，该怎么办？也许接近这个。

```
public ActionResult Index(FormCollection dropDownSelection, string currentFilter, int? page)
{
    //Stuff abbreviated 

    return View(new StuffViewModel(followUpItem.ToPagedList(pageNumber, pageSize)), "SelectedDropDownItem");
} 
```

然后你可以在 ViewModel 中处理它，例如在内存中创建你自己的 DropDownlist。像这样的东西。

```
public class StuffViewModel
{
    public List<FollowUpItem> FollowUpItems {get; private set;}
    public List<SelectListItem> DropDownList {get; private set}

    public StuffViewModel(List<FollowUpItem> followUpItems, string selectedDropDownValue)
    {
        FollowUpItems = followUpItems;

        List<SelectListItem> selectList = new List<SelectListItem>();
        //TODO: here you would decide which is selected from the selectedDropDownValue parameter
        selectList.Add(new SelectListItem{ Selected = true, Text = "Text", Value = "Value" });
        selectList.Add(new SelectListItem{ Selected = false, Text = "Text2", Value = "Value2" });
        //...and more values as you need them

        DropDownList = selectList
    }
} 
```

通过使用 ViewModel 执行此操作，无论您在 pagedList 中的哪个位置，每次单击都将始终保留从下拉列表中选择的值。

请记住，您的视图现在将包含一个包含 StuffViewModel 而不是仅包含 PagedList 的模型。现在你在视图中调用你的元素，如下所示：

```
@model StuffViewModel

//TODO: access dropdownlist
@Html.DropDownList("name", Model.DropDownList)

//TODO: access PagedList for instenace like this:
if(Model.FollowUpItems.HasPreviousPage)
{
    //do stuff
} 
```

我希望我有任何意义:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:30:33.140

这很简单。您没有保留下拉选择。分页链接需要包含当前的下拉选择，以便当您向下一页提交 GET 请求时，数据会在查询字符串中传递以用于呈现视图。

# python - (Python) If Else 问题和列表到字符串转换问题

> ID：15095600
> 
> 赞同：5
> 
> 时间：2013-02-26T17:36:22.447
> 
> 标签：python, list, if-statement

我对编程还很陌生，我被分配了一项将英语文本转换为 Pig Latin 的家庭作业。

我到目前为止的代码是：

```
VOWELS = ("a", "e", "i", "o", "u", "A", "E", "I", "O", "U")
def vowel_start(word):
     pig_latin = word + "ay"
     return pig_latin
def vowel_index(word):
     for i, letters in enumerate(word):
          if letters in VOWELS:
               vowel_index = i
               pig_latin = word[vowel_index:] + word[:vowel_index] + "ay"
               return pig_latin
          else:
               pig_latin = word   #The issue here is that even if the word
               return pig_latin   #has vowels, the program will still only
                                  #return the untranslated word as shown
                                  #in else.
english_text = raw_input("What do you want to translate?")
translate = english_text.split()

pig_latin_words = []
translated_text = "".join(str(pig_latin_words)) #The issue here is that the list
                                                #will not join with the string.

for i in translate:
     first = i[0]
     vow = False
     if first in VOWELS:
          vow = True
     if vow == True:
          pig_latin_words.append(vowel_start(i))
     else:
          pig_latin_words.append(vowel_index(i))

print "The text you translated is " + english_text
print "The translated text is " + translated_text #The issue here is that the program
                                                  #displays "The translated text is "
                                                  #and that's it 
```

如果我注释掉 def vowel_index 函数的 else 方面，那么 if 方面就会起作用。如果我将它留在程序中，则 if 方面不再起作用。过去几天我一直在尝试解决这个问题，但我不知道如何解决它。任何帮助将不胜感激，谢谢！

有关作业的更多详细信息：

*   如果单词以元音开头，则保持单词原样并在末尾添加“ay”。
*   如果单词包含元音，但开头没有，则取元音之前的字母，将其移到单词的末尾并在末尾添加“ay”。
*   如果单词不包含任何元音，则保持单词原样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:44:46.013

根据当前编写函数的方式，您将始终根据第一个字符是否为元音来返回 for 循环的第一次迭代。您需要遍历每个字符，并且仅在没有字符是元音时才返回单词不变。

首先删除`else`; 当您看到不是元音的单个字符时，您不想返回，因为后面的字符可能是元音。现在，由于`return`您`if`的`word`. 例如：

```
def vowel_index(word):
    for i, letters in enumerate(word):
        if letters in VOWELS:
            vowel_index = i
            return word[vowel_index:] + word[:vowel_index] + "ay"
    return word 
```

对于您的第二个问题，这里发生了几件事。

首先，您需要移动创建的，`translated_text`以便它在`pig_latin_words`已经有新词之后。这将在您最后的打印语句之前。

此外，要将单词列表转换为由空格分隔的单个字符串，您应该使用以下命令：

```
translated_text = " ".join(pig_latin_words) 
```

这是一个显示差异的简短示例：

```
>>> pig_latin_words = ['atcay', 'ogday']
>>> print "".join(str(pig_latin_words))  # your version
['atcay', 'ogday']
>>> print " ".join(pig_latin_words)      # my version
atcay ogday 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:46:28.017

第一个问题：

```
def vowel_index(word):
     for i, letters in enumerate(word):
          if letters in VOWELS:
               vowel_index = i
               pig_latin = word[vowel_index:] + word[:vowel_index] + "ay"
               return pig_latin
          else:
               pig_latin = word  
               return pig_latin 
```

如果你有单词'BA'，你的循环将第一次设置字母为'B'，然后执行else，并返回单词。您需要在返回任何内容之前查找第一个元音。

你的第二个问题：

```
translated_text = "".join(str(pig_latin_words)) 
```

这应该是：

```
translated_text = "".join(pig_latin_words) 
```

这是因为 join 需要一个列表，而您正在向它传递一个字符串。我还注意到 translate_text 设置为空字符串。您需要在该列表中添加一些内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:49:40.010

其他答案解决了您的第一个问题。我认为您可以通过将此行 `translated_text = "".join(str(pig_latin_words))` 移到 for 循环之后来解决您的第二个和第三个问题：

```
pig_latin_words = []

for i in translate:
     first = i[0]
     vow = False
     if first in VOWELS:
          vow = True
     if vow == True:
          pig_latin_words.append(vowel_start(i))
     else:
          pig_latin_words.append(vowel_index(i))

translated_text = " ".join(pig_latin_words) #The issue here is that the list
                                                #will not join with the string.

print "The text you translated is " + english_text
print "The translated text is " + translated_text #The issue here is that the program
                                                  #displays "The translated text is "
                                                  #and that's it 
```

正如其他地方提到的，您也可以`str()`从 around中删除`pig_latin_words`。我也认为你想用空格而不是空字符串加入它们：`" ".join()`

# file-upload - 通过 selenium 上传文件但文件输入元素被隐藏

> ID：15095601
> 
> 赞同：1
> 
> 时间：2013-02-26T17:36:26.153
> 
> 标签：file-upload, selenium, hidden-field

我正在尝试使用 Selenium 上传文件，但我的输入文件元素是隐藏的。

我隐藏的 HTML 是：

```
<input id="yui_3_9_0pr3_1_1361897421363_2239" type="file" style="visibility:hidden; width:0px; height: 0px;" multiple="" accept=""> 
```

选择文件按钮 HTML 是：

```
<button id="yui_3_9_0pr3_1_1361897421363_2242" class="yui3-button" tabindex="0" aria-label="Select Files" role="button" type="button" style="width: 100%; height: 100%;">Select Files</button> 
```

我尝试了您建议的相同方法`JavascriptExecutor`，但仍然出现异常`ElementNotVisible: Element is not currently visible`。

这是我的代码：

```
WebElement fileInput = driver.findElement(By.xpath(//@input[@type='file']));
System.out.println("h14");
String js = "arguments[0].style.height='auto'; arguments[0].style.visibility='visible';";
((JavascriptExecutor) driver).executeScript(js, fileInput);
System.out.println("h15");
LocalFileDetector detector = new LocalFileDetector();
String path = "//Users//pdua//Desktop//images.jpeg";

// File f = detector.getLocalFile(path);
//((RemoteWebElement)fileInput).setFileDetector(detector);
System.out.println("h16");

//fileInput.sendKeys(f.getAbsolutePath());
fileInput.sendKeys(path); 
```

隐藏的输入文件元素的 XPath 是`//input[@type='file']`. 不知道对不对！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-01T23:01:56.883

如果元素不可见和/或显示，Selenium 将不会与元素交互。这可能是由多种设置引起的：

*   `visibility=hidden`;
*   `display=none`;
*   `height=0`或`width=0`；
*   ~~可显示坐标之外的位置（例如 left=-1）~~

在您的代码中，您显示`height`and`width`等于 0，但仅 reset `height`。尝试以下JS：

```
String js = "arguments[0].style.height='1'; arguments[0].style.width='1'; "
            + "arguments[0].style.visibility='visible';"; 
```

此外，检查`input[@type='file']`浏览器中的元素以检查是否有任何其他样式或类应用于它会影响可见性。在我的例子中，有一个类应用于`button`包装`input[@type='file']`元素，设置`display=none;`。

**注意：**更改元素可见性时，测试正在修改测试下的应用程序。这是不推荐用于测试的侵入性行为。

**更新：**似乎屏幕外的元素（例如`left=-1200`）报告未显示在 Selenium 中，但它不会阻止 Selenium 在其上执行`sendKeys()`方法。该方法没有返回类型，并且在这种情况下不会通过异常。

# performance - 在服务器端限制 Meteor 中的结果数量？

> ID：15095603
> 
> 赞同：9
> 
> 时间：2013-02-26T17:36:33.900
> 
> 标签：performance, meteor, database-connection, subscriptions

我有一些代码，如下所示。我在 Mongo 的关键字集合中有大约 60K 条目。我真的只想要前 25 名，所以我试图设置一个限制查找。我正在运行相同的查询来打印我的结果数量。出于某种原因，限制似乎不起作用，因为我的日志消息说 60K 左右。

这种事情是不可能的吗？我可以在客户端设置一个有效的限制，但我想我会尝试限制服务器上的内容，以便发送更少的数据。

一些附加信息：

*   我使用的是我自己的 Mongo 数据库，而不是流星提供的数据库；用 env 变量指向它
*   版本 0.5.7

任何帮助将不胜感激。

```
if (Meteor.isServer) {
   Meteor.startup(function() {
   console.log('server startup');

   Meteor.publish("keyword_hits", function() {
        console.log('keywords: ' + Keywords.find({}, {sort: {count:-1}, limit:25}).count());
        return Keywords.find({}, {sort: {count:-1}, limit:25});
    });
 }); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-29T10:32:50.300

使用 Meteor 附带的 Mongo API，`.count()`不考虑`Limits`，或者`Skips`您所看到的将始终是您收藏中的最大数量的东西。

如果你这样做

```
Meteor.publish("keyword_hits", function() {
        console.log('keywords: ' + Keywords.find({}, {sort: {count:-1}, limit:25}).fetch().length);
        return Keywords.find({}, {sort: {count:-1}, limit:25});
}); 
```

因此，不是调用`.count()`，而是调用，`.fetch()`它会返回从您的集合中选择的 25 个条目，然后调用`.length`它，您将看到返回的条目数正确。

我实际上提出了一个关于 .count() 的问题，因为在普通的 Mongo 中你可以这样做：`.count({'applySkipLimit': true});`这将考虑到你的跳过和你的限制。

无论如何，这是你的问题。

# c# - 使用 .NET 4.5 的非阻塞 TCP 服务器

> ID：15095605
> 
> 赞同：0
> 
> 时间：2013-02-26T17:36:38.527
> 
> 标签：c#, .net, tcpclient, async-await, tcplistener

我需要使用 tcp 侦听器实现 Windows 服务，以无限期地侦听并处理来自 tcp 端口的数据馈送，并且我正在寻找使用 .NET 4.5 异步功能的任何示例。

到目前为止，我发现的唯一[样本是：](http://www.sadev.co.za/content/tcp-servers-net-scenario-4-non-blocking-servers-net-45)

```
class Program
{
    private const int BufferSize = 4096;
    private static readonly bool ServerRunning = true;

    static void Main(string[] args)
    {
        var tcpServer = new TcpListener(IPAddress.Any, 9000);
        try
        {
            tcpServer.Start();
            ListenForClients(tcpServer);
            Console.WriteLine("Press enter to shutdown");
            Console.ReadLine();
        }
        finally
        {
            tcpServer.Stop();
        }
    }

    private static async void ListenForClients(TcpListener tcpServer)
    {
        while (ServerRunning)
        {
            var tcpClient = await tcpServer.AcceptTcpClientAsync();
            Console.WriteLine("Connected");
            ProcessClient(tcpClient);
        }
    }

    private static async void ProcessClient(TcpClient tcpClient)
    {
        while (ServerRunning)
        {
            var stream = tcpClient.GetStream();
            var buffer = new byte[BufferSize];
            var amountRead = await stream.ReadAsync(buffer, 0, BufferSize);
            var message = Encoding.ASCII.GetString(buffer, 0, amountRead);
            Console.WriteLine("Client sent: {0}", message);
        }
    }
} 
```

由于我对这个主题比较陌生，我想知道：

1.  您会建议对此代码进行哪些改进？
2.  如何优雅地停止监听器（现在它会抛出`ObjectDisposedException`）。
3.  是否有更高级的 .net tcp 监听器示例？

# facebook - 发布到 Facebook 未发布完整消息

> ID：15095610
> 
> 赞同：0
> 
> 时间：2013-02-26T17:36:54.587
> 
> 标签：facebook, lua, coronasdk

我正在尝试将此消息发布到 facebook：`I have achieved (".. scorepost,") points, playing... download for FREE iPhone & Android at www.site`

但它只是发布：**我已经达到 1000)** 1000 是**math.random(100, 1000); 的结果；**那个位正在工作并且每次都发布正确的数字，但它没有发布其余的：**积分，玩......在www.site免费下载iPhone和Android**

```
local facebook = require "facebook"
local fbAppID = "appID" 

scorepost =  math.random(100, 1000);    
keeping_score = true
scoreText = display.newTmessageext( "Score: " .. scorepost,  20, 20,nil, 40)
scoreText:setTextColor(255,255,255)

local faceFunc = function ()

function onLoginSuccess()
  facebook.request( "me/feed", "POST", {message = "I have achieved (".. scorepost,") points, playing... download for FREE iPhone & Android at www.site"} )
end

-- facebook listener
function fbListener( event )
    if event.isError then
        native.showAlert( "ERROR", event.response, { "OK" } )
    else
        if event.type == "session" and event.phase == "login" then
            -- login was a success; call function
            onLoginSuccess()

        elseif event.type == "request" then
            -- this block is executed upon successful facebook.request() call

            native.showAlert( "Success", "The post has been uploaded.", { "OK" } )
        end
    end
end

-- photo uploading requires the "publish_stream" permission
facebook.login( fbAppID, fbListener, { "publish_stream" } )

end

--Button to activate the post to facebook
local facebutton = display.newRect (0, 0, 50, 50)
facebutton.x = display.contentWidth/2; facebutton.y = display.contentHeight/2
facebutton:addEventListener("tap", faceFunc) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:15:54.973

你不应该连接字符串吗？像这样：

```
facebook.request( "me/feed", "POST", {message = "I have achieved (".. scorepost .. ") points, playing... download for FREE iPhone & Android at www.site"} ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:01:32.647

您在 scorepost 之后使用“，”而不是“..”，因此，假设 scorepost 为 100，您将发送如下内容：

```
{
  "message":"I have achieved (1oo",
  ") points, playing... download for FREE iPhone & Android at www.site"
} 
```

# android - 触摸标签小部件时 TabActivity 未启动活动

> ID：15095611
> 
> 赞同：0
> 
> 时间：2013-02-26T17:36:56.700
> 
> 标签：android, tabactivity

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_uicreate_session);
TabHost tabHost = getTabHost();
TabSpec sessionTab = tabHost.newTabSpec("Sessions");
sessionTab.setIndicator("Sessions");
Intent i = new Intent().setClass(this, TabSessions.class);
sessionTab.setContent(i);
tabHost.addTab(sessionTab);
} 
```

当我单击“会话”时，什么也没有发生，没有堆栈跟踪，什么都没有。

我没有使用片段，因为我想将设备定位到 sdk 版本 8 的低版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T11:17:52.207

通过移动到片段布局来解决问题。

# java - 一流的功能

> ID：15095613
> 
> 赞同：3
> 
> 时间：2013-02-26T17:37:18.093
> 
> 标签：java, generics, first-class-functions

所以我们有一个名为 Func.java 的接口，它看起来像这样：

```
public interface Func<A,B> {
    public B apply(A x);
} 
```

然后我们有一个名为 mainClass.java 的主类，它看起来像这样：

```
public class mainClass{
    public static void main(String[] args) {
    }

    public static <A,B,C> Func<A,C> compose(final Func<A,B> f, final Func<B,C> g){
        return new Func<A,C>(){
            public C apply(A x){
                return g.apply(f.apply(x));
            }
        };
    }
} 
```

我不太确定如何在 main 方法中调用这个 compose 方法，以及这段代码是如何编译的！我的意思是，这里是否需要 Java 泛型才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:56:16.593

以下是调用 compose 的方法：

```
public class mainClass {
    public static <A, B, C> Func<A, C> compose(final Func<A, B> f, final Func<B, C> g) {
        return new Func<A, C>() {
            public C apply(final A x) {
                return g.apply(f.apply(x));
            }
        };
    }

    public static void main(final String[] args) {
        Func<String, Double> toDouble = new Func<String, Double>() {
            public Double apply(final String x) {
                return Double.parseDouble(x);
            }
        };
        Func<Double, Integer> toInt = new Func<Double, Integer>() {
            public Integer apply(final Double x) {
                return (int) x.doubleValue();
            }
        };
        Func<String, Integer> composed = compose(toDouble, toInt);
        System.out.println("Composed: " + composed.apply("1.23"));
    }
} 
```

我不太确定你在问什么泛型是必要的。从字面上看，不，它们不是。Java 泛型只是给你类型安全。您当然可以完全废弃它们并将 A、B 和 C 更改为只是对象。但是，如果您想显式定义正在使用的类型，例如在我的示例中使用 String、Integer 和 Double，那么是的，在这种情况下您需要使用泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:48:12.817

```
public class FirstClassFunction {
   interface Func< A, B > {
      public B apply( A x );
   }

   static <A, B, C>
   Func< A, C > compose( final Func< A, B > f, final Func< B, C > g ) {
      return new Func< A, C >() {
         @Override public C apply( A x ) {
            return g.apply( f.apply( x ) );
         }};
   }

   public static void main( String[] args ) {
      Func< Double, Character > f =
         new Func< Double, Character >(){
            @Override public Character apply( Double x ) {
               return 'a';
            }};
      Func< Character, String > g =
         new Func< Character, String >(){
            @Override public String apply( Character x ) {
               return "Hello";
            }};
      Func< Double, String > c = compose( f, g );
      System.out.println( c.apply( 3.14 ));
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:54:31.380

一个例子：

`Func<A,B>`将 String ( `A`) 转换为 Integer ( `B`)的A。

```
class Converter implements Func<String, Integer> {
    @Override
    public Integer apply(String x) {
         // System.out.println("Converter converting String \"" + x + "\" to an Integer");
        return Integer.valueOf(x);
    }
} 
```

另一种`Func<A,B>`实现，将 Integer ( `A`) 转换为 String ( `B`)，表示该 Strig 的二进制表示

```
class Binary implements Func<Integer, String> {
    @Override
    public String apply(Integer x) {
        // System.out.println("Binary converting Integer " + x + " to binary String");
        return Integer.toBinaryString(x);
    }
} 
```

`main`以及演示它的方法。

```
public static void main(String[] args) {
    // compose those to functions and you can convert strings representing
    // numbers (base 10) to Strings that represent the same number (base 2)
    Func<String, String> binaryStringConverter = compose(new Converter(), new Binary());
    System.out.println(binaryStringConverter.apply("123"));
} 
```

为了更好地了解正在发生的事情，您可以取消注释`System.out.println()`语句并运行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:58:39.827

如果你在一个只包含实数运算的问题域中工作，你不一定需要泛型——Func 的接口可能只是`public double apply(double x)`. 但是使用泛型可以让您灵活地将函数从一种类型转换为另一种类型。compose 方法只是为您提供了一种链接函数的方式，就像普通的数学函数组合一样。

# c# - 实体框架表值函数 - 默认实体映射

> ID：15095615
> 
> 赞同：0
> 
> 时间：2013-02-26T17:37:20.130
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我正在尝试`table-valued-function`Entity Framework 5 中的支持，我想将 a 的结果映射`TVF`到实体。但是，`TVF`不会返回实体的所有列，因此 EF 给出的错误是

> 实体列 * 没有被 TVF 的结果映射。

我无法从实体中删除那些不在`TVF`结果中的字段，因为它们是必填字段。

是否可以调整 EDMX 中的函数结果映射，使缺失的实体字段在从 TVF 的结果返回时获得一些默认值？

我不会使用结果写回服务，所以我不关心如果我这样做可能导致的一致性问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:40:07.283

您需要其他数据类型或修改 TVF 以返回实体的所有列。

# performance - matlab中的简单向量化实现

> ID：15095616
> 
> 赞同：0
> 
> 时间：2013-02-26T17:37:19.427
> 
> 标签：performance, matlab, for-loop, vectorization

我是matlab的新手。通过一个简单的例子，我想了解矢量化。如何矢量化以下代码片段。

```
for i = 1:z
  binno = binno + f*floor(clip(:,:,i)*bins/256);
  f=f*bins;
end 
```

这是一个非常简单的代码，但我确实需要了解如何正确对其进行矢量化。问题是在每次循环后重新计算 f。编辑： Binno 是 2d 矩阵，Clip 是 3d 和 f，bin 是标量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:03:38.027

您可以分三个步骤执行此操作：

1.  创建因子向量；使其成为 1×1×z

    ```
    fact = f .* bins.^(0:z-1);
    fact = reshape(fact,1,1,[]); 
    ```

2.  将剪辑乘以因子

    ```
    tmp = bsxfun(@times,floor(clip*bins/256),fact); 
    ```

3.  总结一切

    ```
    binno = sum(tmp,3); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:03:14.297

有时写下前几个循环的值会有所帮助，然后找到模式。向量 F（每次迭代一个条目）从第一个开始`f`（我们称之为`f0`）。然后第二个条目是`f0*bins`. 然后`f0*bins^2`，等等。所以`F`是`f0*[1 bins bins^2 bins^3]...` 并且可以计算为

```
F = f0 * bins .^ (0:z-1); 
```

因为 bins^0 是 1。

甚至在此之前，您就可以一次计算整个`floor`操作：`floor(clip*bins/256)`. 现在你只需要弄清楚如何将你的 P 元素向量 F 乘以那个 3D 矩阵 MxNxP。 `bsxfun`会做这种事情，但尺寸需要匹配，或者正好是 1。所以 F 必须是 1x1xP 而不是 P。然后只需将整个事物沿第 3 维求和即可。

`binno = sum(bsxfun(@times, floor(clip*bins/256), reshape(F, [1 1 length(F)])), 3);`

请注意...如果您的输入至少按大小定义，则可以更轻松地回答这个问题。更好的是生成正确尺寸的样本数据的几行。由于没有，我无法测试上面的代码，因此您有责任将其适应您的数据。

# javascript - jQuery 事件命名空间是如何工作的

> ID：15095617
> 
> 赞同：3
> 
> 时间：2013-02-26T17:37:21.503
> 
> 标签：javascript, jquery, dom, jquery-events

我想了解 jQuery 事件命名空间如何在不同的浏览器中工作。

[我在MDN](https://developer.mozilla.org/en-US/docs/DOM/event)上没有看到任何关于此的内容，我想知道如何在不使用 jQuery 的情况下命名事件（在旧版 IE 以及现代浏览器上）

* * *

### 更新（2017 年 10 月 1 日）：

如果有人感兴趣，我已经在另一个问题中回答了如何在 Vanilla JavaScript 中 使用**命名空间编写***最小*事件发射器： [https ://stackoverflow.com/a/44432013/104380](https://stackoverflow.com/a/44432013/104380)

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:38:35.060

jQuery 事件命名空间正是如此**——jQuery**事件命名空间。

这个特性是 jQuery 独有的；DOM 没有类似的东西。

事件命名空间的要点是能够仅按名称删除事件处理程序；DOM API 根本不这样做。**

# knockout.js - 淘汰赛点击事件后如何重定向到另一个页面

> ID：15095618
> 
> 赞同：3
> 
> 时间：2013-02-26T17:37:26.983
> 
> 标签：knockout.js

多页面站点中的每个页面都显示一个注销链接并绑定到实现身份验证功能和状态的视图模型。这是一个简化：

```
<a href="#" data-bind="click: logout">Logout</a>
...
function ViewModel() {
    var self = this;
    self.authenticated = ko.observable(true);                
    self.logout = function () {            
        self.authenticated(false);
    };
}; 
```

注销后，我想重定向回网站的登录页面。我知道我可以在注销功能中做到这一点：

```
self.logout = function () {
    self.authenticated(false);
    window.location.href = "login.html";
}; 
```

但是为了在视图和视图模型之间保持更清晰的分离，我宁愿视图响应视图模型的身份验证属性的变化。我设想这样的事情，虽然这个例子不起作用 - 脚本块没有隐藏，因此重定向总是发生：

```
<div data-bind="ifnot: authenticated()"><script>alert("window.location.href = 'login.html';");</script></div> 
```

那么，我们如何以 MVVM 的方式重定向到这里呢？感谢大家的帮助；Knockout 是一个很棒的图书馆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:09:56.600

The reason this wasn't redirecting to the login page:

```
<a href="login.html" data-bind="click: logout">Logout</a> 
```

was because I wasn't returning true in the bound handler to continue the event chain:

```
self.logout = function () {        
    self.authenticated(false);
    return true;
}; 
```

Solved!

# c++ - MSVC 在我的类成员函数上给了我错误 C2039

> ID：15095623
> 
> 赞同：1
> 
> 时间：2013-02-26T17:38:02.800
> 
> 标签：c++, class, templates, visual-c++, visual-studio-2012

这是我的课：

```
template<class T>
class Point2d
{
public:
    Point2d( void )
        : x( (T)0 )
        , y( (T)0 )
    { }

    Point2d( T px, T py )
        : x( px )
        , y( py )
    { }

    Point2d( DirectX::XMFLOAT2 p )
        : x( (T)p.x )
        , y( (T)p.y )
    { }

    operator XMFLOAT2( void )
    {
        return XMFLOAT2( x, y );
    }

    Point2d<T> operator=( const Point2d& p )
    {
        if ( *this == p ) return *this;

        x = p.x;
        y = p.y;

        return *this;
    }

    Point2d<T> operator=( XMFLOAT2 p )
    {
        x = p.x;
        y = p.y;

        return *this;
    }

    Point2d<T>& operator*( T m )
    {
        return Point2d<T>( x * m, y * m );
    }

    Point2d<T>& operator*( const Point2d& m )
    {
        return Point2d<T>( x * m.x, y * m.y );
    }

    Point2d<T>& operator*=( T m )
    {
        x *= m;
        y *= m;
        return *this;
    }

    Point2d<T>& operator*=( const Point2d& m )
    {
        x *= m.x;
        y *= m.y;
        return *this;
    }

    Point2d<T>& operator/( T d )
    {
        return Point2d<T>( x / d, y / d );
    }

    Point2d<T>& operator/( const Point2d& d )
    {
        return Point2d<T>( x / d.x, y / d.y );
    }

    Point2d<T>& operator/=( T d )
    {
        x /= d;
        y /= d;
        return *this;
    }

    Point2d<T>& operator/=( const Point2d& d )
    {
        x /= d.x;
        y /= d.y;
        return *this;
    }

    Point2d<T>& operator +( const Point2d& v )
    {
        return Point2d<T>( x + (T)v.x, y + (T)v.y );
    }

    Point2d<T>& operator+=( const Point2d& v )
    {
        x += v.x;
        y += v.y;
        return *this;
    }

    Point2d<T>& operator -( const Point2d& v )
    {
        return Point2d<T>( x - v.x, y - v.y );
    }

    Point2d<T>& operator-=( const Point2d& v )
    {
        x -= v.x;
        y -= v.y;
        return *this;
    }

    bool operator==( const Point2d& v )
    {
        return (x == v.x) && (y == v.y);
    }

    float Distance( const Point2d& p )
    {
        return std::sqrt( ((p.x-x)*(p.x-x)) + ((p.y-y)*(p.y-y)) );
    }

    float Dot( Point2d<T> p )
    {
        return ((float)p.x*(float)x) + ((float)p.y*(float)y);
    }

    union {
        struct {
            T   x, y;
        };
        struct {
            T   width, height;
        };
        T component[2];
    };
};
typedef Point2d<float> Point2f; 
```

当我尝试`Dot`在课堂上使用该函数时，MSVC 告诉我（在编译时）给了我`error C2039: 'Dot' : is not a member of 'Point2d<T>'`

文字示例代码：

```
Point2f test( 10.0f, -1.0f );
float result = test.Dot( Point2f( 5.0f, 2.0f ) ); 
```

我不知道为什么 MSVC 会将其标记为不是成员。

# jekyll - Jekyll 中的帖子和页面有什么区别？

> ID：15095625
> 
> 赞同：14
> 
> 时间：2013-02-26T17:38:04.070
> 
> 标签：jekyll

我正在使用 Jekyll。帖子和页面之间有什么区别？据我所知：

1.  它们都可以包含 YAML 前端内容，并且
2.  帖子有日期和永久链接，但页面没有。

还有更多的区别吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T18:43:33.460

以下是区别

*   帖子文件名包含帖子的标题和日期。文件名中的无效日期会导致错误。
*   帖子是可比较的对象，这意味着可以比较两个帖子。比较是通过发布日期和发布 slug 进行的。
*   生成的帖子和页面的默认相对 URL 不同（例如`/2000/01/01/my-post.html`和`/about.html`）。
*   页面可以放在任何地方，但帖子只能放在`_posts`文件夹下。
*   帖子包含更多开箱即用的数据，可用于 Liquid 模板（标题、URL、日期、ID、类别、下一个、上一个、标签、内容）。
*   帖子具有唯一的 ID。

一篇文章代表一篇博客文章（因此它用于轻松创建博客文章）。一个页面代表一个网站页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:48:09.663

关于如何生成和处理页面，主要有几个区别：

Post 是 _posts 目录中的任何文档。如果由`site.posts`集合处理，最终 URL 将使用配置 yaml 文件中配置的永久链接生成。

页面是位于 _posts 目录之外的任何文档 - 它们将始终保持到根目录的相对路径作为 URL。

除此之外，您提到的差异它们都相同。一些插件对它们的处理方式不同，但这取决于插件开发人员（没有关于这个主题的指南）。

# javascript - 替换类中的第一次出现

> ID：15095626
> 
> 赞同：-6
> 
> 时间：2013-02-26T17:38:08.390
> 
> 标签：javascript, jquery

```
<div class="section truck edit-track truck-army truck-ambulance"></div> 
```

我如何只替换第一个`truck`到`truck garage-active`？

我们应该得到这个：

```
<div class="section truck garage-active edit-track truck-army truck-ambulance"></div> 
```

不是这个：

```
<div class="section truck edit-track truck-army truck-ambulance garage-active"></div> 
```

jQuery`.addClass()`只是在类名的末尾添加了一个新类，所以它没有帮助 - [http://jsfiddle.net/xxbnt/](http://jsfiddle.net/xxbnt/)

需要这个来获得正确的**CSS 类链接**样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:40:35.857

```
<div class="truck garage-active edit-track truck-army truck-ambulance"></div> 
```

是相同的

```
<div class="truck edit-track truck-army truck-ambulance garage-active"></div> 
```

类名的顺序无关紧要。

您的代码与`addClass()`.

**更新**

正如[Blazemonger](https://stackoverflow.com/users/901048/blazemonger)指出的那样，顺序只有在你做类似的事情时才重要

```
$(".truck")[0].className.split(' ')[1] 
```

这将要求`garage-active`紧随其后`truck`。在所有其他情况下，您都没有问题。

# asp.net - 特定用户的 ASP.NET 默认页面

> ID：15095632
> 
> 赞同：0
> 
> 时间：2013-02-26T17:38:30.990
> 
> 标签：asp.net, c#-4.0

我使用 .NET Membership 进行用户身份验证。

我想在登录后为特定用户设置默认页面。是否可以通过 web.config 或其他方式实现？

示例所有用户在登录后转到 Default.aspx

超级用户登录后转到 Admin.aspx。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:49:37.153

可以使用登录控制的 LoggedIn 方法：

```
protected void Login1_LoggedIn(object sender, EventArgs e)
{
    if (Login1.UserName == "YourUserName")
        Login1.DestinationPageUrl = "YourDestinationPageUrl";
} 
```

# javascript - 动态 JQuery 移动导航

> ID：15095634
> 
> 赞同：5
> 
> 时间：2013-02-26T17:38:33.230
> 
> 标签：javascript, jquery, jquery-mobile, history, bookmarks

我对 jQuery 以及如何动态处理 url 有疑问。如果我有一个带有链接的页面，并且每个页面都有一个用于调用函数的 id 和一个 id，那么我想做的是。如何更改特定链接的 url 并将该 url 用作书签。下面是我的代码

```
<div data-role="page" id="#listview">
<div data-role="header">
    <h1>List</h1>
</div>

<div data-role="content">   
<ul data-role="listview" id="carlist">
  <li><a href="#" onclick="cardetails('1')">Acura</a></li>
  <li><a href="#" onclick="cardetails('2')>Audi</a></li>
  <li><a href="#" onclick="cardetails('3')>BMW</a></li>
</ul>
</div>

<div data-role="footer">
    <h4>Page Footer</h4>
</div> 
```

因此，当您单击列表中的汽车时，一个名为 cardetails 且参数为 1 的函数将返回服务器并获取 id=1 的汽车的 cardetails。我的问题不是那个，而是当 JSON 数据返回时，我希望 url 更改为 cardetails#1 或类似的东西。因此它可以识别用户的位置，浏览器可以将其添加到其历史记录中，如果用户将 url 加入书签，浏览器将能够找到显示相同数据的确切页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T21:57:06.417

此示例使用 jQM`changePage()`通过 Ajax 页面请求发送数据。`changePage()`只有当 'to' 参数是 URL时才可以使用它。查看[jQM 文档](http://api.jquerymobile.com/jQuery.mobile.changePage/)以获取更多信息。

测试示例的说明：

*   创建文件夹
*   在文件夹中创建一个名为 cars.js 的文件
*   在文件夹中创建一个名为 cars.html 的文件
*   在文件夹中创建一个名为 car-details.html 的文件
*   用您可以在下面找到的相应代码填充每个文件
*   打开作为第一页的cars.html并导航

在 car.js 文件中添加以下代码：

```
$(document).on( "pageinit", "#car-page", function( e ) {
    $('#car-list a').on('click', function(e) {
        e.preventDefault();
        $.mobile.changePage('car-details.html', {
            data: {
                id: this.id
            }
        });
    });
});

$(document).on( "pageinit", "#car-details-page", function( e ) {
    var passedId = (($(this).data("url").indexOf("?") > 0) ? $(this).data("url") : window.location.href ).replace( /.*id=/, "" );
    $("#details").html(["Selected id is: '", passedId, "'"].join(""));
}); 
```

在 cars.html 页面中添加以下代码。

```
<!doctype html>
<html lang="en">
   <head>
        <title>Cars example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script src="./cars.js"></script>
    </head>
    <body>
        <div id="car-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car list</a></h1>
            </div>
            <div data-role="content">   
                <ul data-role="listview" id="car-list">
                    <li><a href="#" data-transition="flip" id="acura">Acura</a></li>
                    <li><a href="#" data-transition="flip" id="audi">Audi</a></li>
                    <li><a href="#" data-transition="flip" id="bmw">BMW</a></li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

在 car-details.html 页面中添加以下代码。

```
<!doctype html>
<html lang="en">
   <head>
        <title>Car Example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script src="./cars.js"></script>
    </head>
    <body>
        <div id="car-details-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car details</a></h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div id="details"></div>
            </div>
        </div>
    </body>
</html> 
```

**例 2**

使用共享 JS 对象的解决方案：

在第二页上，选定的 id 出现在 div 上。此外，URL 包含 id，因此可以添加书签。如果用户通过第一页导航到第二页，则 id 通过共享的 JS 变量传递到第二页。如果用户打开书签页面，则从 window.location.href 中提取 id。

请注意，您可以传递 id 或任何其他有助于识别用户选择的值，而不是在共享变量中传递 href 值。

测试示例的说明：

*   创建文件夹
*   在文件夹中创建一个名为 cars.js 的文件
*   在文件夹中创建一个名为 cars.html 的文件
*   在文件夹中创建一个名为 car-details.html 的文件
*   用您可以在下面找到的相应代码填充每个文件
*   打开作为第一页的cars.html并导航

在 car.js 文件中添加以下代码：

```
var passDataObject = { selectedHref: null }

$(document).on( "pageinit", "#car-page", function( e ) {
    $(this).find('a').unbind('click').click(function() {
        passDataObject.selectedHref = this.href;
    });
});

$(document).on( "pageinit", "#car-details-page", function( e ) {
    var passedId = (passDataObject.selectedHref != null ? passDataObject.selectedHref : window.location.href).replace( /.*id=/, "" );
    $("#details").html(["Selected id is: '", passedId, "'"].join(""));
}); 
```

在 cars.html 页面中添加以下代码：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Cars example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script src="./cars.js"></script>
    </head>
    <body>
        <div id="car-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car list</a></h1>
            </div>
            <div data-role="content">   
                <ul data-role="listview" id="car-list">
                    <li><a href="./car-details.html?id=1" data-transition="flip" id="acura">Acura</a></li>
                    <li><a href="./car-details.html?id=2" data-transition="flip" id="audi">Audi</a></li>
                    <li><a href="./car-details.html?id=3" data-transition="flip" id="bmw">BMW</a></li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

在 car-details.html 中添加以下代码：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Car Example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script src="./cars.js"></script>
    </head>
    <body>
        <div id="car-details-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car details</a></h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div id="details"></div>
            </div>
        </div>
    </body>
</html> 
```

**例 3**

多页示例（地址栏 URL 不会根据汽车选择而改变）

```
<!doctype html>
<html lang="en">
   <head>
        <title>Cars example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script>
            var passDataObject = { selectedId: null }

            $(document).on( "pageinit", "#car-page", function( e ) {
                $(this).find('a').unbind('click').click(function(e) {
                    e.preventDefault();
                    passDataObject.selectedId = this.id;
                    $.mobile.changePage('#car-details-page', { transition: 'flip'} );
                });
            });

            $(document).on( "pagebeforeshow", "#car-details-page", function( e ) {
                $("#details").html(["Selected id is: '", passDataObject.selectedId, "'"].join(""));
            });
        </script>
    </head>
    <body>
        <div id="car-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car list</a></h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <ul data-role="listview" id="car-list">
                    <li><a href="#" id="acura">Acura</a></li>
                    <li><a href="#" id="audi">Audi</a></li>
                    <li><a href="#" id="bmw">BMW</a></li>
                </ul>
            </div>
        </div>
        <div id="car-details-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Car details</a></h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div id="details"></div>
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# asp.net - 发布后asp.Net无法呈现页面

> ID：15095652
> 
> 赞同：0
> 
> 时间：2013-02-26T17:39:28.737
> 
> 标签：asp.net, .net, visual-studio-2010, ajaxcontroltoolkit

无法理解该怎么办？Asp.net 页面发布后显示空白。

**查看源代码：**

```
<form name="ctl00" method="post" action="default.aspx" id="ctl00">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUENTM4MWRk8F3nytDudBWE1y4PycHzuh2S7RY=" />
</div>
</form><head><meta name="keywords" /><meta name="description" /><title>

</title></head> 
```

但是从 Visual Studio 它运行良好。

**配置** ：.NET 3.5，Windows 7 Pro 64 位，Ajax Control 工具包。SQL Server，亚音速。IIS 7.5.7600.16385

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:35:32.107

检查：IIS->应用程序池->高级设置->.NET Framework 版本
如果没有 .NET 4.0 你会尝试调用`aspnet_regiis.exe -i` [http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v= vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:19:27.993

如果您的应用程序在本地运行时显示正常，但在发布到 IIS 时不显示，您可能需要查看 IIS 设置（假设您正在使用该设置）。确保您已将 IIS 设置为显示错误。这是在 IIS 中通过转到 ASP 属性页面来完成的。展开调试属性，确保“向浏览器发送错误”设置为 true，启用服务器端调试设置为 true，启用客户端调试设置为 true。只需确保在准备好上线时将其全部重置为 false，因为这可能会向最终用户显示敏感信息。

# cross-platform - 如何在 Titanium 开发中使用第三方 Objective C 库？

> ID：15095657
> 
> 赞同：0
> 
> 时间：2013-02-26T17:39:48.807
> 
> 标签：cross-platform, titanium, titanium-mobile, titanium-modules

我有一个移动项目需要使用第三方库，我想在 iOS 和 android 上都使用 Titanium，但该库仅用 Objective C 编写。

Appcelerator 有一个帖子：[*Extending Titanium Mobile*](http://docs.appcelerator.com/titanium/3.0/#!/guide/Extending_Titanium_Mobile)

似乎需要重写代码，但它相当复杂。

还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:56:08.743

在不知道它是什么库或任何细节的情况下，我会说不，绝对没有办法解决这个问题。

用 Obj-C 编写的东西在 iOS 上运行，用 JAVA 编写的东西在 Android 上运行。因此，您必须在 JAVA 中编写一些内容才能使您的模块在 Android 上运行。

至于将现有的 Obj-C 库移植到 Titanium，这通常非常简单，并且在您链接的文档中也有详细描述。

另一方面，如果你的库可以用 JavaScript 实现，那么我会用 JavaScript 重写它，而不是为 android 重写它，这会给你更多的平台能力。

# c# - 检查是否进行了贝宝交易的一种方法

> ID：15095661
> 
> 赞同：1
> 
> 时间：2013-02-26T17:39:53.433
> 
> 标签：c#, asp.net, paypal

我正在尝试在我的 asp.net 项目中找到一种实现 paypal api 的方法。

基本上，我想要实现的是创建一个用户汇款的页面和一个检查付款的页面。

我找不到检查付款的方法。

这是我项目中的一个重要步骤，因为我需要检查是否付款以便将一些数据插入 SQL 数据库，并且我不希望使用付款/检查方法来利用数据库。

有人可以指导我吗？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:42:39.840

我相信您正在寻找[PayPal IPN（即时付款通知）](https://www.paypal.com/ipn)。它正是为此目的而设计的。

本质上，PayPal 将调用您网站上的特殊页面/处理程序，并断言交易已成功完成，并且可以安全地向您的用户发布产品。由于握手发生的方式，您可以信任此调用。

## 示例 IPN 处理程序

^(这段代码直接来自[PayPal 文档](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)，但我自己实现了它的一个变体，并且可以验证它是否“像宣传的那样”工作。)

```
using System;
using System.IO;
using System.Text;
using System.Net;
using System.Web;

public partial class csIPNexample : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //Post back to either sandbox or live
        string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
        string strLive = "https://www.paypal.com/cgi-bin/webscr";
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

        //Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
        string strRequest = Encoding.ASCII.GetString(param);
        strRequest += "&cmd=_notify-validate";
        req.ContentLength = strRequest.Length;

        //for proxy
        //WebProxy proxy = new WebProxy(new Uri("http://url:port#"));
        //req.Proxy = proxy;

        //Send the request to PayPal and get the response
        StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
        streamOut.Write(strRequest);
        streamOut.Close();
        StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
        string strResponse = streamIn.ReadToEnd();
        streamIn.Close();

        if (strResponse == "VERIFIED")
        {
            //check the payment_status is Completed
            //check that txn_id has not been previously processed
            //check that receiver_email is your Primary PayPal email
            //check that payment_amount/payment_currency are correct
            //process payment
        }
        else if (strResponse == "INVALID")
        {
            //log for manual investigation
        }
        else
        {
            //log response/ipn data for manual investigation
        }
    }
} 
```

# multithreading - 如何在 Windows 服务中使用 Threadpool.QueueUserWorkItem？

> ID：15095662
> 
> 赞同：2
> 
> 时间：2013-02-26T17:40:00.653
> 
> 标签：multithreading, c#-4.0, windows-services, queueuserworkitem

我有一个使用 Threadpool.QueueUserWorkItem 的 Windows 服务。该服务连接到多个客户端数据库，抓取数据，转换为 XLS 并将文件发送到相应的 FTP。

**我对以下代码有 3 个问题：**

1.  我是否正确使用了 Threadpool.QueueUserWorkItem？
2.  我是否需要在代码中的任何地方使用 Lock 以避免出现问题？如果是，在哪里和到什么对象。
3.  代码中有什么不正确的地方吗？如果是，是什么以及如何处理它？

**代码：**

```
private static System.Timers.Timer aTimer = new System.Timers.Timer(50000);

public void OnStart(string[] args)
        {
            CLE.WriteToEventLog("Service Started");
            try
            {
                aTimer.Elapsed += new ElapsedEventHandler(PerformTimerOperation);
                aTimer.Enabled = true;
            }
            catch (Exception ex)
            {
                CLE.WriteToEventLog("Error Starting Service: " + ex.Message);
            }
        }

private void PerformTimerOperation(object source, ElapsedEventArgs e)
        {
            CLE.WriteToEventLog("Timer Operation Started");
                Clients objClient = new Clients();
                List<Clients> objClientList = Clients.GetClientList();

                foreach (var list in objClientList)
                {
                    ThreadPool.QueueUserWorkItem(new WaitCallback(SendFilesToClient), list);
                }                
        }

private void SendFilesToClient(Object stateInfo)
        {
            CLE.WriteToEventLog("Send Files To Client Started");
            Clients oClient = (Clients)stateInfo;
            CLE.WriteToEventLog("Start Proecessing Client: " + oClient.ClientName + ", ClientId: " + oClient.ClientId);

            connectionString = App.Database.PrimaryConnectionString(oClient.ClientId);

            string reports = oClient.Reports;
            string[] values = reports.Split(',').Select(sValue => sValue.Trim()).ToArray();

            foreach (string item in values)
            {
    //Send data to FTP based on cliend id
            }
            // At this point all reports are being sent to the FTP. We will update the database with LastExecutionDateTime + 1 hour. This will be used as DateFrom param for all reports for the next execution.
        } 
```

该服务运行良好，我得到了适当的结果，但我需要确保我做对了，以后不会遇到问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:25:57.450

我假设您的服务旨在继续运行，而不是“一次性完成”。如果是这样，请注意该类的[`AutoReset`](http://msdn.microsoft.com/en-us/library/system.timers.timer.autoreset.aspx)属性默认设置为。这仅仅意味着每次经过 50 秒间隔（50000 毫秒 = 50 秒）时，计时器将继续引发事件。如果您**确定**在下一个间隔过去之前所有 操作都在足够长的时间内完成，那么您应该没问题。但是，我不会打赌。如果数据库在网络上并且网络出现故障怎么办？如果服务在较慢的系统或内核较少的系统上运行并且所有工作都没有及时完成怎么办？`System.Timers.Timer``true``Elapsed`**`SendFilesToClient`**

 **您可以通过`AutoReset`像这样关闭该功能来解决此问题。

```
private static var aTimer = new System.Timers.Timer(50000) { AutoReset = false }; 
```

这意味着该`Elapsed`事件只会触发一次。在 内部`PerformTimerOperation`，只需将`Enabled`属性重置为`true`以在退出之前重新启动计时器。

但这是一个不完整的解决方案，因为在计时器触发另一个`Elapsed`事件之前线程可能仍然需要很长时间才能完成。在这种情况下，您可能希望`ManualResetEvent`在每个线程完成时使用 a 发出信号并暂停退出`PerformTimerOperation`（并重置计时器）直到发生。例如，

```
private void PerformTimerOperation(object source, ElapsedEventArgs e)
{
    List<Clients> objClientList = new Clients().GetClientList();
    List<ManualResetEvent> handles = new List<ManualResetEvent();

    foreach (var list in objClientList)
    {
        // Create an MRE for each thread.
        var handle = ManualResetEvent(false);

        // Store it for use below.
        handles.Add(handle);

        // Notice two things:
        // 1\.  Using new WaitCallback(...) syntax is not necessary.
        // 2\.  Thread argument is now a Tuple object.
        ThreadPool.QueueUserWorkItem(SendFilesToClient, Tuple.Create(list, handle));
    }

    // Wait for threads to finish.
    WaitHandle.WaitAll(handles.ToArray());

    // Reset the timer.
    aTimer.Enabled = true;
} 
```

现在更新`SendFilesToClient`。

```
private void SendFilesToClient(Object stateInfo)
{
    // The parameter is now a Tuple<T1, T2>, not a Clients object.
    var tuple = (Tuple<Clients, ManualResetEvent>)stateInfo;

    try
    {
        Clients oClient = tuple.Item1;

        // Do your work here...
    }
    catch (Exception ex)
    {
        // Handle any exception here.
    }
    finally
    {
        // Signal that the work is done...even if an exception occurred.
        // Otherwise, PerformTimerOperation() will block forever.
        ManualResetEvent mreEvent = tuple.Item2;
        mreEvent.Set();
    }
} 
```

以这种方式，`PerformTimerOperation`将阻塞[`WaitHandle.WaitAll()`](http://msdn.microsoft.com/en-us/library/z6w25xa6.aspx)调用，直到所有工作线程，例如，`SendFilesToClient`发出它们已完成的信号。此时，您重置计时器并在下一个间隔重复。

对不起，这么久。希望能帮助到你。**

# php - 提交表单后返回/重定向到锚定的 div

> ID：15095664
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:05.850
> 
> 标签：php, html, forms, redirect

据我在几个帖子中研究过，下面的表单`#CCC`提交后应该返回到div

```
$editFormAction = $_SERVER['PHP_SELF']."#CCC";

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "formX")) { 
$updateSQL = sprintf("UPDATE foodtable SET food_preference=%s  WHERE food_id=%s",    
                       GetSQLValueString($_POST['food_preference'], "text"),
                       GetSQLValueString($_POST['food_id'], "int"));

  mysql_select_db($database_XYZ, $XYZ);
  $Result1 = mysql_query($updateSQL, $XYZ) or die(mysql_error());

  $updateGoTo = "preference.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
      }
  header(sprintf("Location: %s", $updateGoTo));
    exit ();
} 
```

* * *

```
<body>

<div id ="AAA">
<p>Some text</p>
</div>

<div id ="BBB">
<p>Some more text</p>
</div>

<div id ="CCC">
     <form action="<?php echo $editFormAction; ?>" method="post" name="formX" id="formX">
     <table align="center">
     <tr valign="baseline">
     <td align="right" nowrap="nowrap">Update Food Name:</td>
     <td><input type="text" name="food_name" value="" size="32" /></td>
     </tr>
     <tr valign="baseline">
     <td nowrap="nowrap" align="right">
     <input type="hidden" name="MM_update" value="formX" />
     <input type="hidden" name="food_id" value="<?php echo $query['food_id']; ?>" />
     </td>
     <td>
     <input type='submit' value='Update Food Name'/>"
    </td>
    </tr>
    </table>
   </form>
</div>

</body> 
```

但它不会`#CCC`在提交时返回到 div。上面的代码块有什么不足吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:45:42.867

The form is submitting to yourpage#CCC but the line

```
header(sprintf("Location: %s", $updateGoTo)); 
```

Is redirecting you, after you have processed the form.

# jquery - Jquery在嵌套函数中找到一个类

> ID：15095665
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:09.420
> 
> 标签：jquery, addclass

我对 jQuery 比较陌生，并且在动画完成后在函数中选择正确的元素时遇到了一些问题。

简而言之，当动画完成后，我希望将一个类添加到页面内的元素中。这是我到目前为止所拥有的：

```
<script type='text/javascript' charset='utf-8'>
    $(document).ready(function(){
        $('#lightsout').fadeTo(1000, 1,
            function(){
                $('.text404').addclass('lightsout');
            }
        );
    });
</script> 
```

如果有人能展示出正确的做法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T17:41:57.673

`.addClass()`必须有一个大写**C**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:41:48.483

改成：

```
<script type='text/javascript' charset='utf-8'>
    $(document).ready(function(){
        $('#lightsout').fadeTo(1000, 1,
            function(){
                $('.text404').addClass('lightsout');
            }
        );
    });
</script> 
```

错误是，你拼写错误`addClass`

# mysql - 比较两个mysql表的值

> ID：15095672
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:30.620
> 
> 标签：mysql, sql, phpmyadmin

我有一个名为的表`mainlinks`，它有大约 600 万行。有一个名为的列`url`包含来自网络的 url，另外还有两列被称为`metaTitle`并且`metaDesc`在大多数行上都是空的。

我有另一个名为的表`links1`，它有大约 350 万行，列`URL`，`Utitle`和`metaDesc`。所有的 URL`links1`也在`mainlinks`. `Links1`有几百万个 url，在它们的`Utitle`和`metaDesc`列中有标题和 meta:descriptions。我现在正试图让 SQL 来比较这两个表，并在任何地方`links1`都有 URL 的标题和描述，以将该信息复制`metaTitle`到`metaDesc`.`mainlinks`

我尝试了以下代码：

```
UPDATE mainlinks
INNER JOIN links1 ON (mainlinks.URL = links1.URL)
SET mainlinks.metaTitle = links1.UTitle, mainlinks.metaDesc = links1.metaDesc 
```

Phpmyadmin 告诉我更新了数百条记录，尽管我知道应该有几百万条记录。只需快速浏览这两个表，例如，两列中都显示“ [https://zvelo.com](https://zvelo.com) ” `URL`，但`Utitle`和`metaDesc`列中的值没有被复制到`mainlinks`. 知道问题可能是什么吗？

蒂亚！

编辑：可能是其中一个 URL 列在另一个没有的实际 url 之后有一些空格，因此它们被视为不同？如果是，我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:37:15.107

在这种情况下，答案是去掉所有列中的任何换行符、制表符等。我用了

```
UPDATE table SET column = REPLACE(REPLACE(REPLACE(column, '\r', ''), '\n', ''), '\t', ''); 
```

一旦我对两个表中的列执行此操作，一切都同步了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:53:58.030

根据我的评论，尝试验证空列值...

```
SET mainlinks.metaTitle = links1.UTitle, mainlinks.metaDesc = links1.metaDesc
WHERE NOT links1.UTitle IS NULL AND NOT links1.metaDesc IS NULL 
```

# php - cURL 表现得很奇怪

> ID：15095673
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:32.103
> 
> 标签：php, apache, curl, xampp

我正在使用 cURL 从外部域成功导入一些数据，直到我尝试使用此 URI：[http](http://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06) ://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06 ，这是一个 ics 日历。我可以在命令行上成功运行它（自己试试）： shell>> curl [https://www.airbnb.com/calendar/ical/760660.ics?s=593cc556438a8f0919beb6107b6f508d](https://www.airbnb.com/calendar/ical/760660.ics?s=593cc556438a8f0919beb6107b6f508d)，所以这不是网络问题。

但我的 php 脚本（确实返回其他 URI）不返回这个。或者更好的是它返回false。

这是小php

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);

    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$ical1= "http://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06";
echo file_get_contents_curl($ical1); 
```

我确实认为这与我的 apache 或 php 配置有关，因为它在 appfog 上运行，并且与我的旧 xampp 安装一起运行。恢复：所有 URI 都使用旧的 xampp 安装，现在只有示例中的一个失败。

在我的 phpinfo() 上，我可以阅读：

```
cURL support enabled
cURL Information 7.24.0
Age 3
Features
AsynchDNS Yes
Debug No
GSS-Negotiate Yes
IDN No
IPv6 Yes
Largefile Yes
NTLM Yes
SPNEGO No
SSL Yes
SSPI Yes
krb4 No
libz Yes
CharConv No
Protocols dict, file, ftp, ftps, gopher, http, https, imap, imaps, ldap, pop3, pop3s, rtsp, scp, sftp, smtp, smtps, telnet, tftp
Host i386-pc-win32
SSL Version OpenSSL/1.0.1c
ZLib Version 1.2.5
libSSH Version libssh2/1.3.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:36:16.027

该 URL 是有效的，只需将 URL 放入浏览器就可以毫无问题地下载，所以这不是您的问题。

该 URL 重定向到相同的 URL，但位于安全服务器上，但您已设置 CURLOPT_FOLLOWLOCATION，因此这也不是您的问题。

但是，安全 URL 执行 javascript 重定向到英国站点，这*是*您的问题。你拉回了错误的文件。

改用 URL 试试`https://www.airbnb.co.uk/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06`，看看效果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T17:40:02.217

我遇到了同样的问题，我尝试使用 curl 和 file_get_contents。我尝试了下面的方法并且它有效，我不知道它为什么有效以及它与上面的示例有何不同，但它完美地获取了 ICAL 文件。

网址必须是 https 或显示空白屏幕。

函数 file_get_contents_curl($url) { $ch = curl_init();

```
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);

$data = curl_exec($ch);
curl_close($ch);

return $data; 
```

}

echo file_get_contents_curl(' [https://www.airbnb.co.uk/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06](https://www.airbnb.co.uk/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06) ');

# java - Java-EE-6：如何在 @ManyToMany 和 @ManyToOne 关系中存储布尔值？

> ID：15095675
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:35.473
> 
> 标签：java, jakarta-ee, jpa, relationship, relation

我正在研究一个基本上由用户和文档组成的数据模型。现在每次添加一个新文档时，只要特定用户没有查看它（例如单击它），就应该有一个标志将文档标识为“未见过”。

你将如何模拟这样的场景？有没有办法将布尔值/标志附加到用户和文档之间的关系？

这是我的简化模型：

```
@Entity
@Table(name="User")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long id;
    @Column(length = 128)
    private String name;
    @ManyToMany(mappedBy = "users", fetch=FetchType.LAZY)
    private List<Document> documents = new ArrayList<Document>();

    // getters and setters ...

} 
```

这是文档类：

```
@Entity
@Table(name = "Document")
public class Document {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long id;
    @ManyToMany(fetch=FetchType.LAZY)
    @JoinTable(name = "Inbox", joinColumns = @JoinColumn(name = "document_id"), inverseJoinColumns = @JoinColumn(name = "user_id"))
    protected List<User> users = new ArrayList<User>();

    // getters and setters ...

} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:44:06.933

向您的连接表添加一个新列，以`Inbox`存储“未见”的布尔值。然后[将连接表映射为新实体，并将多对多关联分解为两个 OneToMany 关联](https://stackoverflow.com/a/5127262/139010)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:19:23.537

在 JB Nizet 的回答中，Matt 提到连接表有一个唯一的主键 ( `id`)、一个对两个外键的唯一约束和一个附加列。这是一个很好的方法。

但是当您使用`@ManyToMany`时，您很可能有一个主键，它由连接表中的两个外键组成。如果您想保留该模式并添加一个额外的`viewed`列，您很可能需要习惯使用`@Embeddable`类来让复合主键反映在您的`@Entity`. 请记住，当您这样做时，您将需要覆盖`equals`/ `hashcode`。

您可以将[我对另一个问题的回答](https://stackoverflow.com/questions/14890739/jsf2-0-jpa-how-to-set-list-element-mapped-in-onetomany/14891888#14891888)作为创建`@Entity`课程的起点。在答案中，描述了连接表中的实体及其主键。

# c# - 字典初始化期间的异常

> ID：15095680
> 
> 赞同：0
> 
> 时间：2013-02-26T17:40:58.097
> 
> 标签：c#, wcf, exception-handling

尝试从 WCF 服务调用方法时出现类型初始化错误。

> 'XYZAuditService' 的类型初始化程序引发了异常。

但是，我在代码中看不到任何会导致异常的内容。

```
public enum AuditProcessType
{
    Facility,
    Patient,
    Report,
}

[ServiceBehavior(Name = "AuditService",
    Namespace = "http://xyz/services/2008/08",
    InstanceContextMode = InstanceContextMode.PerSession,
    ConcurrencyMode = ConcurrencyMode.Single)]
public class AuditService : IAuditServiceContract
{
    private static Dictionary<AuditProcessType, Func<IAuditor>> auditServiceFactories;

    static AuditService()
    {
        auditServiceFactories = new Dictionary<AuditProcessType, Func<IAuditor>>()
        {
            { AuditProcessType.Facility, () => Auditor<Facility>.Instance },
            { AuditProcessType.Patient, () => Auditor<Patient>.Instance },
            { AuditProcessType.Report, () => Auditor<Report>.Instance },
        };
    }

    // ...

    private static IAuditor GetAuditor(AuditProcessType process)
    {
        Func<IAuditor> factory;
        if (!auditServiceFactories.TryGetValue(process, out factory) || factory == null)
        {
            throw new ArgumentException(..., "process");
        }

        IAuditor auditor = null;
        try
        {
            auditor = factory();
        }
        catch (Exception ex)
        {
            throw new InvalidOperationException(..., ex);
        }

        if (auditor == null)
        {
            throw new InvalidOperationException(...);
        }

        return auditor;
    }
}

public class Auditor<T> : IAuditor
{
    private static Auditor<T> _instance = new Auditor<T>();

    public static Auditor<T> Instance
    {
        get
        {
            return _instance;
        }
    }

    private Auditor()
    {
    }

    // ...
} 
```

我的日志框架没有显示任何内部异常细节，所以我无法获得比这更多的信息。无论我尝试了什么，我似乎都无法让 VS 调试器在类型初始化程序中停止。不过，我看不出这段代码是如何引发异常的。我的代码本身除了初始化工厂字典之外什么都不做，它甚至不调用`AuditService<T>.Instance`. 还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:48:52.177

为了使类型初始化程序失败，它必须执行一些代码——并且该代码必须失败。查看您发布的内容，唯一的可执行代码在这里：

```
{ ... , () => Auditor<Facility>.Instance },
{ ... , () => Auditor<Patient>.Instance },
{ ... , () => Auditor<Report>.Instance }, 
```

将您的 lambda 更改为

```
() => { 
    try { return Auditor<Facility>.Instance;  } 
        catch (Exception ex) 
        { System.Diagnostics.WriteLine(ex.Message); } 
} 
```

看看这是否没有捕捉到某种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:25:20.347

我将此归结为程序集加载错误。`IAuditor`是在一个单独的程序集中定义的`AuditService`，并且由于部署期间的问题，`IAuditor`接口的程序集没有正确包含在应用程序的 bin 目录中。它在类型初始化期间给了我一个错误，因为那是发生程序集负载的地方。

# android - 适用于 Android 应用的 CursorIndexOutOfBoundsException

> ID：15095681
> 
> 赞同：0
> 
> 时间：2013-02-26T17:41:00.953
> 
> 标签：android, database, cursor, indexoutofboundsexception

当试图运行我的应用程序时，我得到了这个错误，我不知道出了什么问题。我得到一个光标超出范围的异常。

堆栈跟踪：

```
 02-26 12:33:56.870: D/AndroidRuntime(1012): Shutting down VM
    02-26 12:33:56.870: W/dalvikvm(1012): threadid=1: thread exiting with uncaught exception (group=0x41452930)
    02-26 12:33:56.870: E/AndroidRuntime(1012): FATAL EXCEPTION: main
    02-26 12:33:56.870: E/AndroidRuntime(1012): java.lang.RuntimeException: Unable to create application com.example.myassistantcoach.AnotherHelper: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

这是我的代码

```
private void readBowlingScoresFromDB() {
        // TODO Auto-generated method stub
        allBowlingScores = new ArrayList<BowlingScores>();
        Cursor bowlingScoresCursor;
        bowlingScoresCursor = bowlingScoresDB.query(BOWLING_SCORES_TABLE,
                new String[] { RECORD_ID, DATE, GAME1, GAME2, GAME3 }, null,
                null, null, null, DATE);
        bowlingScoresCursor.moveToFirst();
        BowlingScores tempBS;
        if (!bowlingScoresCursor.isAfterLast()) {
            do {
                long id = bowlingScoresCursor.getLong(0);
                long dateEpoch = bowlingScoresCursor.getLong(1);
                int game1 = bowlingScoresCursor.getInt(2);
                int game2 = bowlingScoresCursor.getInt(3);
                int game3 = bowlingScoresCursor.getInt(4);
                tempBS = new BowlingScores(id, dateEpoch, game1, game2, game3);
                allBowlingScores.add(tempBS);
            } while (bowlingScoresCursor.moveToNext());
            bowlingScoresCursor.close();
        }
    }

    public void addBowlingScores(BowlingScores bowlingScores) {
        assert bowlingScores != null;
        ContentValues cv = new ContentValues();
        cv.put(BowlingScoresDatabaseHelper.DATE, bowlingScores.getDateEpoch()); // USE
                                                                                // EPOCH
        cv.put(BowlingScoresDatabaseHelper.GAME1, bowlingScores.getGame1());
        cv.put(BowlingScoresDatabaseHelper.GAME2, bowlingScores.getGame2());
        cv.put(BowlingScoresDatabaseHelper.GAME3, bowlingScores.getGame3());
        Log.d("Bowling Database", "Before Inserting a record" + bowlingScores);
        long idPassedBack = bowlingScoresDB.insert(
                BowlingScoresDatabaseHelper.BOWLING_SCORES_TABLE, null, cv);
        bowlingScores.setId(idPassedBack);
        allBowlingScores.add(bowlingScores);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:15:34.723

第一次通过 readBowlingScoresFromDB() 时，光标为空。我强烈建议使用 for 循环而不是带有 if 语句的 do-while 循环。这应该防止第一次迭代运行代码并在光标为空时跳过它。

```
for (bowlingScoresCursor.moveToFirst(); !bowlingScoresCursor.isAfterLast(); bowlingScoresCursor.moveToNext()) {

            long id = bowlingScoresCursor.getLong(0);
            long dateEpoch = bowlingScoresCursor.getLong(1);
            int game1 = bowlingScoresCursor.getInt(2);
            int game2 = bowlingScoresCursor.getInt(3);
            int game3 = bowlingScoresCursor.getInt(4);
            tempBS = new BowlingScores(id, dateEpoch, game1, game2, game3);
            allBowlingScores.add(tempBS);
}

bowlingScoresCursor.close(); 
```

# c# - 循环通过正则表达式替换

> ID：15095687
> 
> 赞同：7
> 
> 时间：2013-02-26T17:41:22.650
> 
> 标签：c#, regex

所以我有这个字符串[]：

```
string[] middleXMLTags = {"</Table1><Table2>", "</Table2><Table3>"}; 
```

我想用它做这样的事情：

```
int i = 0;
foreach (regex where it finds the replacement string)
{
    response = Regex.Replace(response, "</Table><Table>", middleXMLTags[i]);
    i++;
}
response = Regex.Replace(response, "<Table>", <Table1>);
response = Regex.Replace(response, "</Table>", </Table3>); 
```

最终，我只是问是否有可能以某种方式循环 a `Regex`，因此能够`string`用存储在 a 中的不同值替换 a `string[]`。它不一定是一个`foreach`循环，我知道这段代码很荒谬，但我把它听出来是为了问最清楚的问题。请评论您对我的任何问题。

感谢所有帮助 =)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T18:03:52.097

我将跳过“不要使用 Regex 解析 HTML”的讨论，并建议您查看采用 MatchEvaluator 委托的 Regex.Replace 的重载。

基本上，您可以将委托传递给 Replace() 方法，该方法会为每个匹配项调用并返回替换文本。

此[MSDN](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator%28v=vs.100%29.aspx)页面提供了一个将索引号放入替换文本的示例。您应该能够使用数组中的索引来获取替换文本。

这是一个反映您的示例的示例：

```
string[] middleXMLTags = {"</Table1><Table2>", "</Table2><Table3>"};

string response = "</Table><Table><foo/></Table><Table>";
Console.WriteLine(response);
int i = 0;

response = Regex.Replace(response,@"</Table><Table>",m=>middleXMLTags[i++]);
Console.WriteLine(response); 
```

输出：

```
</Table><Table><foo/></Table><Table>
</Table1><Table2><foo/></Table2><Table3> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T18:27:49.600

您可以枚举替换字符串。您必须对其进行定制以满足您的需求，但我想这样的事情会奏效。

```
Regex needle = new Regex("\[letter\]");
string haystack = "123456[letter]123456[letter]123456[letter]";
string[] replacements = new string[] { "a", "b", "c" };

int i = 0;
while (needle.IsMatch(haystack))
{
    if (i >= replacements.Length)
    {
        break;
    }

    haystack = needle.Replace(haystack, replacements[i], 1);
    i++;
} 
```

# asp.net-mvc - 通过@Html.ActionLink 通过单击传递对象

> ID：15095689
> 
> 赞同：1
> 
> 时间：2013-02-26T17:41:37.267
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html.actionlink

我想要做的是将被点击的项目传递给控制器​​进行编辑，但我唯一可以传递给控制器​​的是一个字符串。

看法：

```
foreach (MenuItemViewModel menuitem in category.MenuItemList)
{
  <span class="MenuItemTitel">
     @if (IsAdmin)
     {
       <span class="AdminSpan">
          @Html.ActionLink("Edit", "EditPage", "Admin", new { name = menuitem.Title })
       </span>
     }
      @menuitem.Title
  </span> 
} 
```

控制器：

```
public ActionResult EditPage(MenuItemViewModel MenuItem) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:09:24.883

该`@Html.ActionLink()`方法将生成一个指向给定 Controller/Action 的 url 链接。因此，它只能包含可以包含在链接的 url 中的参数。所以你不能在 url 上传递一个对象。

如果您需要传递对存储在服务器上的对象的引用，请尝试设置链接的参数以提供对存储在服务器上的对象的引用，然后可以通过操作检索该对象（例如，相关菜单项的 ID）。

中的参数`ActionLink`是通过您在上面的函数调用中作为第三项传入的集合设置的。假设默认路由，这将给出一个看起来像`/Admin/EditPage/?name=XXX`XXX 的值的地址`menuitem.Title`。如果您在此处包含其他内容，`itemId = menuitem.Id`那么它会将其作为查询字符串参数添加到生成的 url 中，然后作为此链接目标的操作可以访问该 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T13:14:00.437

我确实通过 helpt 传递了对象`@Html.Action()`。请看下面的代码：

```
@Html.ActionLink("Lista Valores", "Lista", "RandomName",
new {
    Id = @ViewBag.Id,
    Name = "fdsfsadf",
    LastName = @ViewBag.LastName,
    Breed = @ViewBag.Breed,
    System = ViewBag.sys
}, null) 
```

控制器：

```
public ActionResult Lista(CharNames character)
{
    return View(character);
} 
```

看法：

```
<p>@Html.LabelFor(x => x.Id) @Model.Id</p>
<p>@Html.LabelFor(x => x.Name) @Model.Name</p>
<p>@Html.LabelFor(x => x.LastName) @Model.LastName</p>
<p>@Html.LabelFor(x => x.Breed) @Model.Breed</p>
<p>@Html.LabelFor(x => x.System) @Model.System</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T06:03:33.670

```
on the Controller:
[Route("customer/detail")]
public ActionResult Detail(Customer customer)
{
   return View(customer);
}

on the source view:

@model List<AI.Models.Customer>
@{
   ViewBag.Title = "Customer List";
   Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Customers</h2>
<ul>
  @foreach (var customer in Model)
  {
    <li>@Html.ActionLink(@customer.Name, "detail", "customer", @customer, null)</li>
  }
</ul>

on the target view:
@model AI.Models.Customer
@{
  ViewBag.Title = "Details";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Customer Name : @Model.Name</h2> 
```

# c++ - PBO 2 方式从和复制到相同的 FBO 纹理附件

> ID：15095690
> 
> 赞同：0
> 
> 时间：2013-02-26T17:41:37.410
> 
> 标签：c++, opengl

我正在尝试实现这一点：我有一个自定义帧缓冲区，我在其中渲染了一些几何图形。FBO 在那一刻有一个颜色附件纹理。然后我将它复制到 PBO 中。之后我想从 PBO 复制回像素进入该纹理并将自定义FBOblit到默认帧缓冲区中。它不起作用。

我更新了代码，使其更易于理解：

```
 // Here I init the PBO :

   void Init(const int bufferWidth,const int bufferHeight){

    glGenBuffers(1,&_imagePBO);

    glBindBuffer(GL_PIXEL_PACK_BUFFER, _imagePBO);
    glBufferData(GL_PIXEL_PACK_BUFFER, bufferWidth * bufferHeight * 4,0, GL_DYNAMIC_COPY);
    glBindBuffer(GL_PIXEL_PACK_BUFFER, 0);

}
   //Inside Render loop:

          _fboA.BindForWrite();
    glClear(GL_COLOR_BUFFER_BIT);
    glViewport(0,0, _viewportWidth,_viewportHeight);
     //================== RENDER SOME GEOMETRY  =======================//
    ..............
            .........................

 //===============READ from texture into PBO=======================// 
    _fboA.BindForRead();
            glBindBuffer(GL_PIXEL_PACK_BUFFER, *_exporter->GetPBOID());
    glReadPixels(400,400,_viewportWidth ,_viewportHeight,GL_RGBA,GL_UNSIGNED_BYTE,NULL);
    glBindBuffer(GL_PIXEL_PACK_BUFFER, 0);

//=============== CLEAR TEXTURE IN FBO  to GREEN ===============//
    _fboA.BindForWrite();
    glClearColor(0,1,0,1);
    glClear(GL_COLOR_BUFFER_BIT);//|GL_DEPTH_BUFFER_BIT
    _fboA.Unbind();

//==================Read from PBO back into texture ===========//
    _texA->Bind();
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER, *_exporter->GetPBOID());
        glTexSubImage2D(GL_TEXTURE_2D,100,100,0,_viewportWidth,_viewportHeight,
            GL_RGBA,GL_UNSIGNED_BYTE ,NULL);
    glBindBuffer(GL_PIXEL_UNPACK_BUFFER,0);
    _texA->Unbind();
//======================== BLIT ===============================//
    _fboA.BindForRead();
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER , 0);
            glBlitFramebuffer(0,0,_viewportWidth,_viewportHeight,0,0,
           _viewportWidth,_viewportHeight,GL_COLOR_BUFFER_BIT,GL_LINEAR); 
```

我进入屏幕的是绿色，而不是我应该从 _fboA 复制到 PBO 中的渲染内容。

看起来 _fboA 纹理没有从 PBO 取回像素，或者 PBO 没有从 _texA 读取像素。

现在，就 OpenGL 而言，这种方法可能不是最佳的，正如一些人在这里指出的那样，但我需要这种乒乓球用于我的应用程序的 CUDA 部分，我将 PBO 作为 CUDA 内核的资源共享。

**更新：**

对于那些感兴趣的人，CUDA SDK 中的 OpenGL 互操作演示展示了纹理从 CPU 进入 PBO，然后被复制到目标纹理 2D 的情况。在我的情况下，我需要将图像从 FBO 获取到 PBO，通过 CUDA 内核中的图像处理将其传递，然后从 PBO 将其返回到目标纹理中，该纹理将再次渲染到屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:57:59.413

如果您取出帧缓冲区回读，它会起作用吗？

我不确定你为什么觉得有必要在这里使用 PBO？通常，只有当您的源或目标不在显卡上时，PBO 才会有好处。

考虑到 FBO 可以直接绑定到纹理句柄，以获得渲染到纹理的能力。（[http://www.songho.ca/opengl/gl_fbo.html#example](http://www.songho.ca/opengl/gl_fbo.html#example)）。如果那只鞋合适，您可以用绘制一个带纹理的四边形替换 glBlitFrameBuffer()。

此外，考虑使用 glCopyTexSubImage2D() 将像素从帧缓冲区直接读取到纹理对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:16:44.980

我认为您可以在 cuda 操作后将像素从 pbo 绘制到默认帧缓冲区。

# google-apps-marketplace - 向 Google Apps Marketplace 清单添加权限

> ID：15095692
> 
> 赞同：1
> 
> 时间：2013-02-26T17:41:45.667
> 
> 标签：google-apps-marketplace

我最近添加了访问 Google Apps Marketplace 的配置 API 的权限。新用户可以使用与此权限相关的功能；但是，不会提示旧用户更新他们的权限，因为[文档](https://developers.google.com/google-apps/marketplace/manifest#additional)指定：

> 如果应用程序实现了需要访问附加数据的新功能，开发人员只需在应用程序清单中定义所需的附加范围。系统将提示之前已安装该应用程序的每个域的域管理员在 Google Apps 控制面板 ( [http://www.google.com/a/](http://www.google.com/a/) ) 中授予其他访问权限。
> 
> 需要额外数据访问的应用程序将在控制面板 UI 中显示提示“更新数据访问要求”。然后，域管理员可以单击“查看并授予访问权限”，他们将在其中看到所请求的其他范围。如果批准对这些范围的访问，则应用程序可能会请求访问该数据。

有没有人成功完成这项工作的经验？老用户需要在控制面板里面哪里添加权限？该应用程序以前没有任何与之相关的权限，所以我有一种可能与问题有关的预感。

这是应用程序清单的示例，以确保我没有遗漏任何明显的东西。

```
<?xml version="1.0" encoding="UTF-8" ?>
<ApplicationManifest xmlns="http://schemas.google.com/ApplicationManifest/2009">
  <Name>App Name</Name>
  <Description>App Description</Description>

  <!-- Administrators and users will be sent to this URL for application support -->
  <Support>
    <Link rel="setup" href="http://www.example.com/setup?domain=${DOMAIN_NAME}" />
    <Link rel="support" href="http://www.example.com/support" />
    <Link rel="terms-of-service" href="https://www.example.com/terms" />
    <Link rel="privacy-policy" href="https://www.example.com/privacy" />
  </Support>

  <!-- Show this link in Google's universal navigation for all users -->
  <Extension id="navLink" type="link">
    <Name>App Name</Name>
    <Url>https://www.example.com/register?domain=${DOMAIN_NAME}</Url>
    <Scope ref="userFeed" />
  </Extension>

  <!-- Declare our OpenID realm so our app is white listed -->
  <Extension id="realm" type="openIdRealm">
    <Url>https://www.example.com/</Url>
  </Extension>

  <!-- Sets up permissions to access user feed in provisioning api -->
  <Scope id="userFeed">
    <Url>https://apps-apis.google.com/a/feeds/user/#readonly</Url>
    <Reason>This application will allow you to see who's on your domain.</Reason>
  </Scope>
</ApplicationManifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:01:13.630

事实证明，文档只是过时了。消息不再显示在较新的控制面板上。如果您单击应用程序的设置，则会显示该选项以接受新权限。希望这将有助于将来遇到此问题的人。

# sql - SQL 提示在执行前将整个表加载到 RAM 中？

> ID：15095695
> 
> 赞同：6
> 
> 时间：2013-02-26T17:41:49.920
> 
> 标签：sql, sql-server, olap, ramdisk, sqlperformance

我在 OLAP 环境中的一些非常大的表上运行一些聚合查询。我目前受到 200 MB/s 的磁盘 IO 的限制。

我在具有 92 GB RAM 的机器上执行这些查询。是否有任何 SQL 提示可以写入我的查询，基本上告诉 SQL 在执行之前将整个表加载到 RAM 中？

就像是：

使用 (ramdisk) 从 myTable 中选择 *

我正在使用 MS TSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:52:15.843

不会。如果页面缓存中有足够的空间，数据库引擎会自动执行此操作。

您可以使用 SQL Server Management Studio 设置正在使用的内存量。右键单击服务器，选择内存选项，在“最小服务器内存”框中输入一个较大的数字。如果您有 92 GB 的 RAM，那么像 85,000 这样的数字可能就不错了。您需要为机器上的操作系统和其他服务留出额外的内存。

假设表适合内存，这应该有助于处理。如果它们不适合记忆，那么您可能不得不采取另一种方法。

# sql - Firebird SQL 查询参数

> ID：15095697
> 
> 赞同：0
> 
> 时间：2013-02-26T17:41:56.440
> 
> 标签：sql, parameters, firebird

我有这个带有一些参数的查询：

```
INSERT INTO " & _
                "szamlaegyenlegek(szamlaszam, halmt, halmk, halme, uzleti_ev, alperiodus_kod, datum, targyt, targyk, targye, kpnem) " & _
                "SELECT DISTINCT " & _
                "szamlaegyenlegek.szamlaszam, (select max(halmt) from (select halmt from szamlaegyenlegek where uzleti_ev=@elozofoper and datum<=@elozovege)), " & _
                "(select max(halmk) from (select halmk from szamlaegyenlegek where uzleti_ev=@elozofoper and datum<=@elozovege)), " & _
                "(select max(halme) from (select halme from szamlaegyenlegek where uzleti_ev=**@elozofoper** and datum<=@elozovege)), " & _
                "@kovuzlev AS uzleti_ev, 0 AS alperiodus_kod, DATE @kovuzlev_kezdes AS datum, " & _
                "0, " & _
                "0, " & _
                "0, '" & KPNEM & "' AS kpnem " & _
                "FROM szamlaegyenlegek INNER JOIN szamlatukor ON szamlaegyenlegek.szamlaszam=szamlatukor.szamlaszam " & _
                "WHERE szamlatip IN ('Aktív', 'Passzív') AND szamlaegyenlegek.szamlaszam=@szamlaszam and uzleti_ev=@elozofoper AND datum<=@elozovege" 
```

如果我运行查询，我会收到错误：

> 动态 SQL 错误 SQL 错误代码 = -104 令牌未知 - 第 1 行，第 497 列？

第 497 列位于**@elozofoper**和基准<=@elozovege))，@kovuzlev AS uzleti_ev。

如您所见，所有参数都有一个值：

```
FirebirdSql.Data.FirebirdClient 信息：0：参数：
FirebirdSql.Data.FirebirdClient 信息：0：名称：@kovuzlev 类型：VarChar 使用值：2014
FirebirdSql.Data.FirebirdClient 信息：0：名称：@kovuzlev_kezdes 类型：时间戳使用值：01/01/2014 00:00:00
FirebirdSql.Data.FirebirdClient 信息：0：名称：@elozofoper 类型：VarChar 使用值：2013
FirebirdSql.Data.FirebirdClient 信息：0：名称：@elozovege 类型：VarChar 使用值：2013.12.31。
FirebirdSql.Data.FirebirdClient 信息：0：名称：@szamlaszam 类型：VarChar 使用值：541100

```

奇怪的是，为什么我在查询的上面一行没有得到相同的错误 fe。我有相同的参数。

# xml - 通过 xsl 访问 xml 标记的值并将该值放入 xsl 属性中

> ID：15095701
> 
> 赞同：1
> 
> 时间：2013-02-26T17:42:01.840
> 
> 标签：xml, jquery-mobile, xslt, tags

晚上好！

我有一个带有标签的 xml 文件

```
<min>0</min> 
```

我正在编写一个 xsl 文件，它应该从这个标签中提取“0”并将其放入一个 jquery 移动滑块中，如下所示：

```
<input type="range" name="slider-7" id="slider-7" value="5" min="THE ZERO I NEED" etc.../> 
```

xsl:value-of select="" 似乎没有做这项工作，因为它提取属性的值，而不是标签的值，我不能写 min=xsl:value-of...

那么我该如何进行这种提取呢？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:53:16.150

您可以将 AVT（[属性值模板](https://www.w3.org/TR/xslt-10/#attribute-value-templates)）与 XPath 一起用于您需要的值。

例如，如果`min`是当前上下文的孩子，你可以这样做：

```
<input min="{min}"/> 
```

如果`min` *是*当前上下文，只需使用`.`：

```
<input min="{.}"/> 
```

# android - 每次调用 onMeasure() 和 onSizeChanged() 时，视图都会变小

> ID：15095703
> 
> 赞同：3
> 
> 时间：2013-02-26T17:42:04.113
> 
> 标签：android, android-view, android-custom-view

我有一个自定义视图，里面只有一个圆圈。我的尺寸有问题。

我都覆盖了`onSizeChanged()`and `onMeasure()`，但我担心我错过了`onMeasure()`. 这个视图基本上只是一个圆，我覆盖了`getSuggestedMinimumHeight()`，`getSuggestedMinimumWidth()`为了让它们都返回圆的半径。现在一切似乎都很好，直到我决定更新活动的其他一些组件。

当我在视图所在的活动中更新 a `TextView`（或 a ）的文本时，我的视图会变小（在每次更新时）同时调用和。`Button``onMeasure()``onSizeChanged()`

这是我的`onMeasure()`方法。我的问题是：为什么它的行为总是不一样？

```
@Override
protected int getSuggestedMinimumHeight() {
    return (int) (mCircleRadius + mCircleStrokeWidth/2);
}

@Override
protected int getSuggestedMinimumWidth() {
    return (int) (mCircleRadius + mCircleStrokeWidth/2);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
Log.d("SIZES", "called onMeasure()");

    int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();

    int minh = getSuggestedMinimumHeight() + getPaddingBottom() + getPaddingTop();

    setMeasuredDimension(minw, minh);
} 
```

这是布局的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.nhasu"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:orientation="vertical">

    <com.nhasu.ProgressCircleTimer
        android:id="@+id/progcircle_smallBreaks"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:padding="10dp"
        custom:circle_radius="300dp" />

    <Button
        android:id="@+id/btn" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_centerInParent="true"

        android:onClick="onStartClicked"
        android:text="@string/btn_start"
        android:textSize="40sp" />
</RelativeLayout> 
```

请注意，我`Button`使用简单的`Button.setText()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:45:46.653

您不需要`onSizeChanged`确定自定义视图的大小。调用时`onSizeChanged`，您的自定义视图已被测量和布局。

只需`onMeasure`适当地实施：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    Log.d("SIZES", "called onMeasure()");

    int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();
    int minh = getSuggestedMinimumHeight() + getPaddingBottom() + getPaddingTop();

    setMeasuredDimension(
            resolveSize(minw, widthMeasureSpec),
            resolveSize(minh, heightMeasureSpec));
}

public static int resolveSize(int childSize, int measureSpec) {
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);
    switch (specMode) {
    case MeasureSpec.UNSPECIFIED:
        // Just return the child's size.
        return childSize;

    case MeasureSpec.AT_MOST:
        // Return the smallest of childSize and specSize
        return (specSize < childSize)? specSize : childSize;

    case MeasureSpec.EXACTLY:
        // Should honor parent-View's request for the given size.
        // If not desired, don't set the child's layout_width/layout_height to a fixed
        // value (nor fill_parent in certain cases).
        return specSize;
    }

    return childSize;
} 
```

我在这个答案中添加了实现，`resolveSize`这样你就可以看到会发生什么，但它已经在`View.resolveSize`.

# java - 两次调用 Web 服务时出现 Wss4j 和 soaphandler 错误

> ID：15095705
> 
> 赞同：1
> 
> 时间：2013-02-26T17:42:24.397
> 
> 标签：java, ws-security, wss4j

当我使用 wss4j 验证服务器上 SOAP 请求的安全性时遇到问题，这是我用来验证肥皂请求的安全标头的代码部分（我在 SOAPHandler 的 handleMessage 方法中执行） ：

```
// get the crypto file to retrieve dedicated certificate
final Crypto iCertificateStore = WSKeystoreManagement.getCryptoFile();
final WSSecurityEngine iEngine = new WSSecurityEngine();
// Add the default config file to the engine
final WSSConfig iConfig = WSSConfig.getNewInstance();
iEngine.setWssConfig(iConfig);

try {

  // check security header
  final List<WSSecurityEngineResult> iSecurityParts =
    iEngine.processSecurityHeader(aDocument, null, null, iCertificateStore);

} catch (final WSSecurityException iException) { ...} 
```

在请求上有一个签名和一个时间戳，当我第一次调用 Web 服务时，一切正常，请求被处理，我使用一个小型 Java 项目来调用我的 Web 服务，程序检索答案并正确完成。但后来我再次启动程序，但这一次在服务器端检查不起作用。我一直在查看 wss4j 代码以查看问题出在哪里，我已经在 DOMReference.validate 方法中到达这里：

```
 if (validateContext == null) {
        throw new NullPointerException("validateContext cannot be null");
    }
    if (validated) {
        return validationStatus;
    }
    Data data = dereference(validateContext);
    calcDigestValue = transform(data, validateContext);

    if (log.isDebugEnabled()) {
        log.debug("Expected digest: " + Base64.encode(digestValue));
        log.debug("Actual digest: " + Base64.encode(calcDigestValue));
    } 
```

这次 calcDigestValue 不同了，我找不到原因……有人知道吗？

谢谢。

编辑：我的研究一直在取得进展，问题在于请求信封的主体在客户端和服务器之间的某处发生了变化......我已经检查了客户端，我几乎可以确定主体那里没有改变。这些变化只出现在第二次调用，仍然不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:59:46.087

我终于找到了问题，我在客户端和服务器端使用的对象之间存在差异（不要问我为什么），当服务器端的传输层检索信封时，它会将命名空间放在那些正文中的对象导致签名的摘要检查失败。

# html - 使用 CSS 隐藏元素的文本

> ID：15095706
> 
> 赞同：2
> 
> 时间：2013-02-26T17:42:27.127
> 
> 标签：html, css

我[试图](http://jsfiddle.net/hbHnW/)在标签中隐藏文本（我用于屏幕阅读器），`a`而是使用背景图标。

HTML

```
<a href="#"><span>Search</span></a> 
```

CSS

```
span {
    display: none;
}
a {
    display: inline-block;
    width: 17px;
    height: 16px;
    background: url(http://i.stack.imgur.com/5c3zk.png);
} 
```

有没有办法做同样的事情`span`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:44:22.743

您可以缩进文本，使其完全脱离屏幕：

```
text-indent:-5000px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:44:46.063

我没有屏幕阅读器软件，但如果我猜对了，这应该可以：

```
<a href="#"><img src="http://i.stack.imgur.com/5c3zk.png" alt="Search" /></a> 
```

使用此 CSS 规则：

```
a img {
    border:0;
} 
```

基本上，该`alt`属性是替代文本，应在屏幕阅读器的情况下使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T17:48:22.940

您应该检查：[使用 css 隐藏文本](https://stackoverflow.com/questions/471510/hide-text-using-css)

但它是这样的：

HTML：

```
<a href="#">Search</a> 
```

CSS：

```
a {
    text-indent: -9999px;
    white-space: nowrap;  
    outline: none;

    display: inline-block;
    width: 17px;
    height: 16px;
    background: url(http://i.stack.imgur.com/5c3zk.png);
} 
```

[这是 jsFiddle](http://jsfiddle.net/uchrp/)（我添加了背景颜色：红色；因为图像没有加载。）

希望能帮助到你。
干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T17:50:33.193

html

```
<a class="my-title" href="#">Search</a> 
```

css

```
a.my-title { text-indent:-9999px } 
```

**或者**

html

```
<a class="my-title" title="Search" href="#"></a> 
```

css

```
a.my-title { display:block;width:123px; all-your-styling:...; } 
```

屏幕阅读器将从您的锚点捕获**标题**属性。

# php - 在 codeigniter 中找到正确的帖子 URL - PHP

> ID：15095710
> 
> 赞同：0
> 
> 时间：2013-02-26T17:42:40.683
> 
> 标签：php, codeigniter

在我的`controllers/automation.php`文件中，我有：

```
class Automation extends CI_Controller {
       // some code here
       public function search() {
           // implementation of the search function
       }
} 
```

现在，在我的`library.js`文件中，我有：

```
function search()
{
    var date = $("#datepicker").val();
    $.post('./automation/search', { date : date.toString() },
        function(answer){
            alert(answer);
        }
      );
    return;
} 
```

然而，萤火虫显示：

```
POST http://localhost/ci/automation/search 404 Not Found 
```

那什么是正确的`url`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:45:47.017

试试`http://localhost/ci/index.php?automation/search`。如果您没有使用 .htaccess 来修改路径，那将是默认设置，因此您不需要 index.php。

如果是这种情况，并且您想摆脱路径中的 index.php，谷歌将为您提供大量资源。一个例子是[here](https://stackoverflow.com/questions/5155333/remove-index-php-from-url-codeigniter-2)。

# asp-classic - 在数据库中插入记录时提醒网页

> ID：15095714
> 
> 赞同：0
> 
> 时间：2013-02-26T17:42:52.523
> 
> 标签：asp-classic, triggers, sql-server-2000

我有一个 sql server 2000 数据库，用于记录 PBX（呼叫中心）的电话呼叫。每次我们在 PBX 中有呼叫（呼入或呼出）时，都会在数据库中创建一条记录，其中包含呼叫的详细信息（时间、呼叫号码）。好吧，当驻留在 pc 上的特定电话响起时，我需要通知一个经典的 asp 页面以弹出一条带有此电话号码的消息。我相信唯一的方法是使用触发器。当我们有来电时，因此在表中添加了一条记录，触发器必须以某种方式启动，但如何？如何通知 asp 页面用户正在查看电话铃声？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:17:41.400

看看 SignalR，它旨在帮助您做您需要的事情。

基本上包装了所有不同的服务器到客户端的通信技术，这意味着您不必考虑每个客户端支持什么。

然而，使用 Classic ASP 会使您的任务变得非常困难。至少在应用程序的通知部分可能最容易使用 .Net

# java - 什么是通信 java applet -> MySQL 的安全方式

> ID：15095715
> 
> 赞同：1
> 
> 时间：2013-02-26T17:42:54.193
> 
> 标签：java, php, mysql, login

我正在制作一个在网页上运行的小型 Java 游戏。现在我试图让我的游戏与 MySQL db 通信，现在它通过 PHP 进行。

所以这就是发生的事情：

1.  有一个基本的登录系统，它在登录时设置会话（PHP）。
2.  当 java 游戏从 db 询问数据时，它会将 POST (URLConnection) 发送到 PHP 页面。
3.  PHP 页面检查是否设置了会话，如果是，它会从 db 中回显想要的信息。
4.  Java 游戏使用 PHP 页面输出。

像梦想一样工作和跑步！

我唯一担心的是，我实际上必须通过同一个周期将更多数据更改并存储到数据库中。因此，如果您的会话正在运行，您基本上可以制作漂亮的 HTML 表单并为您的角色设置更好的武器。

我试图用谷歌搜索与数据库通信的基本方法以及服务器如何安全工作的基本理论。没有简单的答案。

所以很快我的问题是，

java应用程序和数据库之间进行通信（读写）的安全和正确的方式是什么？

并且对于将来对 android 应用程序等做同样的事情。我很高兴你能给我一个正确的方向。

感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:50:55.960

空无一人。如果客户端可以通过*任何*方式从外部直接向服务器发出任意 SQL 查询，那么几乎没有任何保护措施可以阻止任何人对他们想要的数据库进行任何操作，包括`SELECT * FROM users`和`DROP TABLE users`.

您总是希望在外部世界和您的服务器组件之间有一个*API*，它定义了明确允许的操作并阻止其他任何操作。允许任意 SQL 查询基本上是一种 API，允许不受限制地访问数据库中的所有内容，这通常过于宽泛。

您通常执行此操作的方式是定义客户端可以执行的许多*操作*并通过 API（例如 REST API）公开它们。Java 客户端与此 API 对话，无论服务器幕后发生什么都无关紧要。这不是关于“与数据库交谈”，而是关于*在服务器上做某些事情*。这些东西的数量是并且应该是有限的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:53:34.930

看看这篇文章...

[**小程序能做什么和不能做什么**](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

[**小程序的安全问题**](http://www.roseindia.net/java/example/java/applet/security-issues-with-the-applet.shtml)

# android - android - 处理 ListView 中的项目点击

> ID：15095716
> 
> 赞同：1
> 
> 时间：2013-02-26T17:42:57.670
> 
> 标签：android, android-listview

我正在使用 a`ListView`来显示播放列表，并使用可点击`ImageView`来停止/恢复播放，目前我正在编写一个自定义适配器。问题：当我点击 时`ImageView`，尽管在 LogCat 输出中可以看到点击事件被检测到，但什么也没有发生。做错了什么？适配器代码如下

```
 public class AudioListAdapter extends ArrayAdapter<Playlist> {

Context context;
int layoutResourceId;
Playlist data[] = null;

public AudioListAdapter(Context context, int layoutResourceId,
        Playlist[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    PlaylistHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new PlaylistHolder();
        PlaylistHolder.imgBtnPlay = (ImageView) row
                .findViewById(R.id.imgListBtnPlay);
        holder.txtTitle = (TextView) row.findViewById(R.id.tvListItemSong);
        holder.txtArtist = (TextView) row
                .findViewById(R.id.tvListItemArtist);

        Playlist playlist = data[position];
        holder.txtTitle.setText(playlist.Title);
        holder.txtArtist.setText(playlist.Artist);
        PlaylistHolder.imgBtnPlay.setImageResource(playlist.btn);
        PlaylistHolder.imgBtnPlay
                .setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        PlaylistHolder.imgBtnPlay
                                .setBackgroundResource(R.drawable.list_button_pause);
                        Log.e("onClick", "image clicked"); //Click events are detected

                    }
                });

        row.setTag(holder);
    } else {
        holder = (PlaylistHolder) row.getTag();
    }

    return row;
}

static class PlaylistHolder {
    static ImageView imgBtnPlay;
    TextView txtTitle, txtArtist;
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:01:25.820

`setImageRessource()`通过使用而不是`setBackgroundResource()`无法解释解决了这个问题，但它现在可以工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:02:54.250

您可以使用 adaptername.notifyDatasetchanged 方法刷新列表。但不幸的是，这也不起作用，因为当单击事件将被触发时，列表无法知道单击了哪个视图。您可以尝试使用项目点击侦听器，它会为您提供点击项目的位置

# javascript - MVC 4 Jquery $.post 问题，发布不工作:(

> ID：15095718
> 
> 赞同：0
> 
> 时间：2013-02-26T17:43:00.667
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-4

在下面，我的 initData 是带有 ID #s 的国家名称。

我想做的是改变国家，获取我在课堂上实施的城市名称列表，它可以工作。但是，在下拉更改时，我不知道如何回发并获取这些城市 :(

任何帮助，将不胜感激。

谢谢

```
 <select class="Countries"></select>

    <script type="text/javascript">
    $(document).ready(function() {
        var initData= @Html.Raw(Json.Encode(Model))

        $(function() {
            var $select = $('.Countries');
            $(".Countries").append("<option value='0'>--Select Country--</option>");
            $.each(initialData, function(i, country) {
                var option = $('<option>', {
                    value: country.CountryID
                }).html(country.CountryName).appendTo($select);

            });
        });

        $('.Countries').change(function() {
             var postData = [];
                alert(postData);
                postData.push({value: $(this).val()});
                $.post('@Url.Action("Cities")', postData, function (data) {
                    if (data.success) {
                        alert('Retrieve list of cities');
                    }

                }, 'json');

        });
    });
    </script> 
```

我的控制器：

```
 public ActionResult Cities(int id)
    {
        List<CityModel> listCity = _da.GetCities(id);
        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:32:05.087

我的 ID 未定义，这意味着它没有相关名称。并且 postdata 仅包含 Value .. .. 添加 ID 后它起作用了。

```
 postData.push({name: 'id', value: $(this).val()}); 
```

# doctrine-orm - Doctrine2 多对多获取行问题

> ID：15095722
> 
> 赞同：1
> 
> 时间：2013-02-26T17:43:25.437
> 
> 标签：doctrine-orm, many-to-many, query-builder

我在 Symfony2 中将值传递给 Doctrine2 QueryBuilder 时遇到问题。我有两个实体加入了单向多对多关系：文章和标签，它工作正常，但是当我尝试将值传递给 qb 参数时，它读取错误 espetcted Literal got 'ORDER' 或一无所获（但记录存在）。编码：

```
$em=$this->getDoctrine()->getEntityManager()->getRepository('Bundle:Articles');
$qb = $em->createQueryBuilder('l')
        ->select('l,t')
        ->leftJoin('l.tags', 't')
        ->where('1=1')
        ->orderBy('l.titol', 'ASC');

if(isset($criteria['Titol']) && !empty($criteria['Titol']) &&
    strlen(trim($criteria['Titol']))){
        $qb->andWhere('l.titol like :titol')
           ->setParameter('titol','%'.$criteria['Titol'].'%');
}

if(isset($criteria['includeRecurs']) && 
    !empty($criteria['includeRecurs']) && 
    trim($criteria['includeRecurs']=='recurs')){
        $qb->andWhere('trim(l.urlMicroSite) !=\'\' and l.urlMicroSite is not null');
}

if(isset($criteria['tag']) && is_array($criteria['tag']) && count($criteria['tag'])){
    foreach($criteria['tag'] as $k=>$v){
        $qb->andWhere( 't.id=:'.$k)->setParameter($k,$criteria['tag'][$k]);
    }
} 
```

问题出在最后一个作业中，其他作品：

```
$qb->andWhere( 't.id=:'.$k)->setParameter($k,$v); 
```

如果我手动设置变量 $v 例如： setParameter($k,3) 或 setParameter($k,'3') 它工作正常......但如果我设置值 $v=3 然后调用代码，它没有得到任何东西（也没有错误）。如果我直接设置 andWhere 条件，例如 andWhere('t.id='.$v) 它会读取 Error especting Literal got 'ORDER'，硬编码它再次起作用的值。我确定 $v 是正确的（var_dump、echo 等）。任何帮助将不胜感激（对不起我的英语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:01:16.930

好吧，由于帖子空间，我需要在这里发布：案例 1 使用原始参数查询，没有结果：

```
 --no results (parameter $v)
    SELECT l0_.ISBN AS ISBN0, l0_.EAN AS EAN1, l0_.numeroPagines AS numeroPagines2,
    l0_.preuLlibre AS preuLlibre3, 
    l0_.format AS format4, 
    l0_.dataPublicacio AS dataPublicacio5, 
    l0_.titolOriginal AS titolOriginal6, 
    l0_.disenyCoberta AS disenyCoberta7,
    l0_.ilustrador AS ilustrador8, l0_.coleccio AS coleccio9, l0_.versioDe AS versioDe10,
    l0_.descripcioCurta AS descripcioCurta11, l0_.urlMicroSite AS urlMicroSite12,
    l0_.visibleInici AS visibleInici13, l0_.titol AS titol14, l0_.autor AS autor15,
    l0_.descripcio AS descripcio16, l0_.imatge AS imatge17, l0_.id AS id18,
    l0_.idUsuariCreacio AS idUsuariCreacio19, l0_.dataCreacio AS dataCreacio20,
    l0_.idUsuariModificacio AS idUsuariModificacio21, 
    l0_.dataModificacio AS dataModificacio22,
    l0_.userLock AS userLock23, 
    t1_.nomTag AS nomTag24, 
    t1_.tipusTag AS tipusTag25, 
    t1_.id AS id26, 
    t1_.idUsuariCreacio AS idUsuariCreacio27, 
    t1_.dataCreacio AS dataCreacio28, 
    t1_.idUsuariModificacio AS idUsuariModificacio29, 
    t1_.dataModificacio AS dataModificacio30,
    t1_.userLock AS userLock31 
    FROM Llibre l0_ LEFT JOIN llibre_tag l2_ 
        ON l0_.id = l2_.llibre_id 
    LEFT JOIN Tags t1_ 
        ON t1_.id = l2_.tag_id 
    WHERE 1 = 1 
        AND t1_.id = '3' 
        **AND t1_.id = ''** <-- empty duplicated parameter (but why duplicated??)
    ORDER BY l0_.titol ASC 
```

这里使用参数 $v=3 硬编码的相同查询

```
--1 result as expected (parameter $v)
    SELECT l0_.ISBN AS ISBN0, l0_.EAN AS EAN1, l0_.numeroPagines AS numeroPagines2,
    l0_.preuLlibre AS preuLlibre3, 
    l0_.format AS format4, 
    l0_.dataPublicacio AS dataPublicacio5, 
    l0_.titolOriginal AS titolOriginal6, 
    l0_.disenyCoberta AS disenyCoberta7,
    l0_.ilustrador AS ilustrador8, l0_.coleccio AS coleccio9, l0_.versioDe AS versioDe10,
    l0_.descripcioCurta AS descripcioCurta11, l0_.urlMicroSite AS urlMicroSite12,
    l0_.visibleInici AS visibleInici13, l0_.titol AS titol14, l0_.autor AS autor15,
    l0_.descripcio AS descripcio16, l0_.imatge AS imatge17, l0_.id AS id18,
    l0_.idUsuariCreacio AS idUsuariCreacio19, l0_.dataCreacio AS dataCreacio20,
    l0_.idUsuariModificacio AS idUsuariModificacio21, 
    l0_.dataModificacio AS dataModificacio22,
    l0_.userLock AS userLock23, 
    t1_.nomTag AS nomTag24, 
    t1_.tipusTag AS tipusTag25, 
    t1_.id AS id26, 
    t1_.idUsuariCreacio AS idUsuariCreacio27, 
    t1_.dataCreacio AS dataCreacio28, 
    t1_.idUsuariModificacio AS idUsuariModificacio29, 
    t1_.dataModificacio AS dataModificacio30,
    t1_.userLock AS userLock31 
    FROM Llibre l0_ LEFT JOIN llibre_tag l2_ 
        ON l0_.id = l2_.llibre_id 
    LEFT JOIN Tags t1_ 
        ON t1_.id = l2_.tag_id 
    WHERE 1 = 1 
        AND t1_.id = '3' 
        **AND t1_.id = '3'** 
    ORDER BY l0_.titol ASC 
```

最后查询具有不重复的其他参数..

```
--1 result as expected (parameter $v=4,$title="%quil%")
SELECT l0_.ISBN AS ISBN0, l0_.EAN AS EAN1, l0_.numeroPagines AS numeroPagines2,
l0_.preuLlibre AS preuLlibre3, 
l0_.format AS format4, 
l0_.dataPublicacio AS dataPublicacio5, 
l0_.titolOriginal AS titolOriginal6, 
l0_.disenyCoberta AS disenyCoberta7,
l0_.ilustrador AS ilustrador8, l0_.coleccio AS coleccio9, l0_.versioDe AS versioDe10,
l0_.descripcioCurta AS descripcioCurta11, l0_.urlMicroSite AS urlMicroSite12,
l0_.visibleInici AS visibleInici13, l0_.titol AS titol14, l0_.autor AS autor15,
l0_.descripcio AS descripcio16, l0_.imatge AS imatge17, l0_.id AS id18,
l0_.idUsuariCreacio AS idUsuariCreacio19, l0_.dataCreacio AS dataCreacio20,
l0_.idUsuariModificacio AS idUsuariModificacio21, 
l0_.dataModificacio AS dataModificacio22,
l0_.userLock AS userLock23, 
t1_.nomTag AS nomTag24, 
t1_.tipusTag AS tipusTag25, 
t1_.id AS id26, 
t1_.idUsuariCreacio AS idUsuariCreacio27, 
t1_.dataCreacio AS dataCreacio28, 
t1_.idUsuariModificacio AS idUsuariModificacio29, 
t1_.dataModificacio AS dataModificacio30,
t1_.userLock AS userLock31 
FROM Llibre l0_ LEFT JOIN llibre_tag l2_ 
    ON l0_.id = l2_.llibre_id 
LEFT JOIN Tags t1_ 
    ON t1_.id = l2_.tag_id 
WHERE 1 = 1 
    AND l0_.titol LIKE '%quil%' 
    AND t1_.id = '3' 
    **AND t1_.id = '3**' 
ORDER BY l0_.titol ASC 
```

# php - Jquery，将innerHTML 添加到DIV 并通过该innerHTML 的ID 访问元素？

> ID：15095724
> 
> 赞同：0
> 
> 时间：2013-02-26T17:43:29.357
> 
> 标签：php, javascript, jquery, html, ajax

**脚本**：

```
$(document).ready(function(){
    $.ajax({   
        type    : "POST",
        url     : "list_controller.php",
        data    : "a=get&list_id=my_list",
        success : function(data){
            $('#list_container').innerHTML = data;
        }
    });                     
}); 
```

**HTML**：

```
<div id="list_container"></div> 
```

从服务器返回的`data`HTML 包含一些可点击的链接，这些链接应该会触发另一个 jQuery 函数并`#list_container`再次重新加载 DIV：

```
<a href="#" value="a=edit&list_id=my_list&user=artur&id=110" id="adminlink">
    <img src="images/edit_user.png" />
</a> 
```

我希望这些链接调用其他 AJAX 函数 f.ex：

```
$(document).ready(function(){
    $('#adminlink').click(function () {
        var val = $(this).attr("value");
        $.ajax({       
            type    : "POST",
            url     : "list_controller.php",
            data    : val,
            success : function(data){
                $('#list_container').innerHTML = data;
            }
        });
    });
    return false;
 }); 
```

问题是我无法访问`#adminlink`触发点击功能的锚元素。

其他一切都完美无缺，但不能再访问*innerHTML*动态的任何元素。`data`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:46:28.707

Because you're overwriting the contents of `#list_container`, the `#adminlink` on which you registered the handler is no longer the one on the page.

The simplest solution is event delegation, which relies on event bubbling:

```
$('#list_container').on('click', '#adminlink', function() { 
    ...
}); 
```

i.e. it's actually the static `#list_container` element that receives the `click` event, but jQuery then checks whether it was an element with ID `adminlink` that was actually clicked before invoking the required handler.

Always try to use the "closest" static ancestor element that you can when using event delegation. In this case this would appear to be `#list_container`. In the worst case you would end up using `document` but then the event has to bubble *all* the way up through the DOM before it can be processed.

# scala - 在 Scala 2.10 中，如何在给定 TypeTag 的情况下创建 ClassTag

> ID：15095727
> 
> 赞同：11
> 
> 时间：2013-02-26T17:43:43.737
> 
> 标签：scala, scala-2.10

我想定义一个返回数组的函数，并且我有一个 TypeTag。我可以生成所需的 ClassTag 吗？

```
scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> def fun[X: TypeTag]: Array[X] = Array.ofDim[X](10)
<console>:11: error: No ClassTag available for X
       def fun[X: TypeTag]: Array[X] = Array.ofDim[X](10) 
```

或者是否有必要提供 ClassTag 的隐含证据：

```
scala> import reflect.ClassTag
import reflect.ClassTag

scala> def fun[X: ClassTag: TypeTag]: Array[X] = Array.ofDim[X](10)(implicitly[ClassTag[X]])
fun: [X](implicit evidence$1: scala.reflect.ClassTag[X], implicit evidence$2: reflect.runtime.universe.TypeTag[X])Array[X] 
```

我会认为从 TypeTag 生成 ClassTag 很简单，但我看不到明显的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T18:45:04.030

我很想看到一个更简单的解决方案，但这是我想出的：

```
def fun[X:TypeTag]: Array[X] = {
  val mirror = runtimeMirror(getClass.getClassLoader)
  implicit val xClassTag = ClassTag[X]( mirror.runtimeClass( typeTag[X].tpe ) )
  Array.ofDim[X](10)
} 
```

您需要确保您确实需要首先通过 a `TypeTag`。你不能通过 a`ClassTag`代替（如`def fun[X: ClassTag]`）吗？

# c++ - 彩色复选框、组框等

> ID：15095728
> 
> 赞同：4
> 
> 时间：2013-02-26T17:43:45.940
> 
> 标签：c++, winapi

我用这种方式为静态标签着色：

```
case WM_CTLCOLORSTATIC:
{
    DWORD CtrlID = GetDlgCtrlID((HWND)lParam); //Window Control ID

    if(OptionColored)
    {
        HDC hdcStatic = (HDC) wParam;
        SetTextColor(hdcStatic, RGB(255,255,255));
        SetBkColor(hdcStatic, RGB(70,70,70));
        return (INT_PTR)hBrush;
    }
} 
```

现在，如何为复选框和组框着色？

编辑：当我尝试使用此代码更改颜色时，背景工作。文字颜色不。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:09:17.770

尝试使用这些消息：

```
WM_CTLCOLORBTN
WM_CTLCOLOREDIT
WM_CTLCOLORDLG
WM_CTLCOLORLISTBOX
WM_CTLCOLORSCROLLBAR
WM_CTLCOLORSTATIC //You are already using 
```

我知道您需要处理`WM_CTLCOLORBTN`颜色复选框，~~但不确定哪个是用于组框的。~~它也应该适用于继承自的组框`CButton`

在您的代码中还注意到您正在检查 ( `OptionColored`)，不确定那是什么，但您需要检查消息是否针对您想要的颜色控件。

因此，您不需要检查`if(OptionColored)`，而是需要以下内容：

```
DWORD CtrlID = GetDlgCtrlID((HWND)lParam));
if (CtrlID == IDC_STATIC1) //If desired control
    {
       //Color my STATIC CONTROLE
    } 
```

# r - r中的理论密度分布图

> ID：15095730
> 
> 赞同：1
> 
> 时间：2013-02-26T17:43:49.030
> 
> 标签：r, graph, plot, ggplot2

我有如下数据：

```
type1 <- c(rep(1,49), rep(2, 30), rep(3, 20), rep(4,1))
type2 <- c(rep(1,10), rep(2, 20), rep(3, 40), rep(4,20), rep(5,10))
type3 <- c(rep(5,49), rep(4, 30), rep(3, 20), rep(2,1))

dat2 <- data.frame(dens = c(type1, type2, type3), lines = rep(c("a", "b", "c"), 
each = 100)) 
```

这是直方图：

```
require(ggplot2) 
ggplot(dat2, aes(x = dens, fill = lines)) + geom_bar(position="dodge")+ theme_bw() 
```

![在此处输入图像描述](../Images/47bf5578467bf6352914e0e0116559b4.png)

密度图并不完全适用，因为这是离散测量的：

```
ggplot(dat2, aes(x = dens, fill = lines)) + geom_density(alpha = 0.5) 
```

除此之外，我想产生一个平滑的理论分布。我尝试了如下的 beta 发行版，我不确定如何才能最适合上面的数据（dat2）。

```
dat3 <- data.frame(dens = c(rbeta(4000000, 1, 3, ncp = 0),
 rbeta(4000000, 2, 2, ncp = 0), rbeta(4000000, 3, 1, ncp = 0))
                   , lines = rep(c("a", "b", "c"), each = 4000000))
#Plot.
ggplot(dat3, aes(x = dens, fill = lines)) + geom_density(alpha = 0.5) + theme_bw() 
```

![在此处输入图像描述](../Images/01ef6021d7cb7dbf08d8d3493cc03ea6.png)

# javascript - Bootstrap 不起作用，但同时包含 js 和 css

> ID：15095737
> 
> 赞同：1
> 
> 时间：2013-02-26T17:44:10.990
> 
> 标签：javascript, jquery, twitter-bootstrap

Bootstrap 根本不起作用，模态不关闭，转换不起作用等。Firebug 说没有名为 .modal 的函数，所以我尝试使用不同版本的 Jquery、bootstrap 等。没有任何效果这是我使用的代码（不是擦亮了:(所以不要介意它有点乱）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" rel="stylesheet" href="index.css" />
<link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
<script type='text/javascript' src="js/bootstrap.js"></script>
<script type='text/javascript' src="js/jquery.js"></script>
<title></title>
</head>
<body>
<!-- 

-->
<div class="modal hide " id='myModal'>
  <div class="modal-header">
    <h3>Select a friend</h3>
  </div>
  <div class="modal-body">
    <p></p>
  </div>
  <div class="modal-footer">
    <span id="friendSelector" onClick='selectFriend()'>Select a friend first</span>
  </div>
</div>
<center id="page">
  <h2 id="title">  </h2>
  <div id="tabs">
    <div class="tabTitle"><span class="tabTitleText">Mutual Friends</span></div>
    <div class="tabContent">
      <div class="tabContentHeader">
        <div class="clientInfo">
          <div class="container">
            <div class="containerLeft">
              <div class="image">
                // NOT INTERESTING AND SECRET! :p
  </div>
</center>
<!--
Js scripts
-->
<script>
var id = '';
$(function() {
  $('.modal-body').load('request.php', { 'type': 'getFriends' });
  $('#myModal').modal({
      keyboard: false
    });
});
$('#myModal').modal('hide');
function selectFriend(){
    alert(id);
    if(id != '') {
    alert('nice');
    jQuery.noConflict();
    (function ($) {
        $('#myModal').modal('hide');
    }
    )(jQuery);
    }
}
function markFriend(friendId) {
    id = friendId;
    $('#friendSelector').html('Continue');
}

</script>
</body>
</html> 
```

谢谢，山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:49:53.103

twitter bootstrap 的 javascript 插件依赖于 JQuery。

交换脚本行，以便在 bootstrap.js 之前加载 JQuery

# javascript - 使用jquery计算表中的数量

> ID：15095738
> 
> 赞同：1
> 
> 时间：2013-02-26T17:44:12.223
> 
> 标签：javascript, jquery, html-table

我只想计算行数，

```
 <button id="add">Add row</button>
<table>
    <tbody id="mytbody">
    </tbody>
</table>
Number of rows: <span id="counter"></span> 
```

Javascript：

```
$(function() {
    $('#add').bind('click', function() {
        $('#mytbody').after('<tr><td>'+ new Date() +'</td></tr>');
        var count = $('#mytbody').children().length;
        $('#counter').html(count);
    });
}); 
```

我找到了这个[jQuery: count of rows in a table](https://stackoverflow.com/questions/1149958/jquery-count-number-of-rows-in-a-table)

这不起作用[http://jsfiddle.net/H8sBr/](http://jsfiddle.net/H8sBr/)

我只是不明白它的工作。帮助？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T17:45:47.013

脚本错误，使用`append()`：

```
$(function() {
    $('#add').bind('click', function() {
        $('#mytbody').append('<tr><td>'+ new Date() +'</td></tr>');
        var count = $('#mytbody').children('tr').length;
        $('#counter').html(count);
    });
}); 
```

### 演示：http: [//jsfiddle.net/praveenscience/H8sBr/115/](http://jsfiddle.net/praveenscience/H8sBr/115/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T17:47:20.803

使用纯js获取`tr` *计数；*

```
var count = document.getElementById("mytbody").getElementsByTagName("tr").length; 
```

[JS 小提琴演示](http://jsfiddle.net/H8sBr/119/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:55:06.497

由于您使用的是 after()，因此您的代码在 #mytbody 之后添加了 tr，

```
<button id="add">Add row</button>
<table>
    <tbody id="mytbody">
    </tbody>
    <tr>Tue Feb 26 2013 23:41:09 GMT+0530 (India Standard Time)</tr>
    <tr>Tue Feb 26 2013 23:41:09 GMT+0530 (India Standard Time)</tr>   
</table> 
```

所以当你执行你的代码时

```
$('#mytbody').children().length; 
```

它总是返回 0。

所以代替 after() 尝试使用 append() [http://forum.jquery.com/topic/after-vs-append](http://forum.jquery.com/topic/after-vs-append)

[http://jsfiddle.net/H8sBr/118/](http://jsfiddle.net/H8sBr/118/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:45:55.207

您不是`.append()`新节点，而是在表体*之后*`<tr>`插入它们。采用

 *```
$('#mytbody').append('<tr><td>'+ new Date() +'</td></tr>'); 
```

反而。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T17:46:19.213

试试这个：

```
 $('#add').click(function() {
        $('#mytbody').append('<tr><td>'+ new Date() +'</td></tr>');
        var count = $('#mytbody > TR').length;
        $('#counter').html(count);
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T17:46:50.107

试试这个[**jsFiddle 示例**](http://jsfiddle.net/j08691/H8sBr/113/)。

```
$('#add').bind('click', function () {
    $('#mytbody').append('<tr><td>' + new Date() + '</td></tr>');
    var count = $('#mytbody tr').length;
    $('#counter').html(count);
}); 
```

您可以简单地使用，`$('#mytbody tr').length`但也必须使用`append`而不是`after`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T17:57:48.033

更正了您的 JS 代码。**[http://jsfiddle.net/HwEA7/](http://jsfiddle.net/HwEA7/)**

```
$(function() {
    $('#add').bind('click', function() {
        $('#mytbody').append('<tr><td>'+ new Date() +'</td></tr>');
        var count = $('#mytbody tr').length;
        $('#counter').html(count);
    });
}); 
```

1.  用于`append`在之后添加行`<tbody>`
2.  将行数计算为`$('#mytbody tr').length`*

# c++ - 我想要使 用棋盘的外在矩阵，但solvePnP的结果很奇怪

> ID：15095739
> 
> 赞同：1
> 
> 时间：2013-02-26T17:44:15.073
> 
> 标签：c++, opencv

我正在使用棋盘来获取外在矩阵。 `findChessboardCorners`正确找到图像点，并且应正确设置物点。但是当捕捉相同的场景时，我得到了非常奇怪的结果。

*   我正在使用 OpenCV 2.1.0。
*   [我正在捕获的一些屏幕截图](http://imgur.com/a/XjEsm)。
*   样本结果（注意 nan...）

```
    +2,2267e+35 -1,8254e+00 -1,4695e+07 +3,8279e+08
    +1,5230e+19 -1,5452e+00 -1,4752e-21 +3,5204e+16
    -1,3286e+13 +1,7682e+00 -2,9379e-15 +2,6464e-34
    +0,0000e+00 +0,0000e+00 +0,0000e+00 +1,0000e+00

    -南 -1,7778e+00 +5,9374e-20 +3,4842e+17
    +2,5102e+36 +1,6198e+00 -1,1908e-31 +2,6853e+16
    -4,1601e+13 +1,8132e+00 +1,7271e+27 +7,3568e-01
    +0,0000e+00 +0,0000e+00 +0,0000e+00 +1,0000e+00

```

所以我显然做错了什么。什么？

代码：

```
#include <cv.h>
#include <highgui.h>
#include <vector>
#include <iostream>
#include <cstdio>

class Camera
{
    cv::VideoCapture* cam;
    cv::Mat_<float> intr, extr;
public:
    Camera (int n = 0)
    {
        intr = cv::Mat_<float>(3, 3, 0.f);

        intr.at<float>(0, 0) = 2.7105506628580332e+02;
        intr.at<float>(0, 1) = 0;
        intr.at<float>(0, 2) = 1.5950000000000000e+02;

        intr.at<float>(1, 0) = 0;
        intr.at<float>(1, 1) = 2.7105506628580332e+02;
        intr.at<float>(1, 2) = 1.1950000000000000e+02;

        intr.at<float>(2, 0) = 0;
        intr.at<float>(2, 1) = 0;
        intr.at<float>(2, 2) = 1;

        cam = new cv::VideoCapture(n);
        if(!cam->isOpened())
            std::cerr << "arg\n";

    }

    void calib_extrinsic ()
    {
        cv::namedWindow("w");
        std::vector<cv::Point3f> obj_points;
        std::vector<cv::Point2f> img_points;
        std::vector<cv::Point2f> corners;
        cv::Size size(4, 3);
        float cell_size = 1;

        for(int i = 0; i < size.height; ++i)
            for(int j = 0; j < size.width; ++j)
                obj_points.push_back(cv::Point3f(float(j*cell_size),
                                                 float(i*cell_size), 0.f));

        cv::Mat img, gray;

        while(1) {
            *cam >> img;
            cv::cvtColor(img, gray, CV_BGR2GRAY);

            img_points.clear();
            corners.clear();
            bool found = cv::findChessboardCorners(gray, size, corners,
                                                   CV_CALIB_CB_ADAPTIVE_THRESH
                                                   | CV_CALIB_CB_FILTER_QUADS);

            if(found) {
                // cv::cornerSubPix(gray, corners,
                //                  cv::Size(11, 11),
                //                  cv::Size(-1, -1),
                //                  cv::TermCriteria(CV_TERMCRIT_EPS
                //                                   | CV_TERMCRIT_ITER, 30, 0.1));
                cv::drawChessboardCorners(img, size, cv::Mat(corners), found);
            }

            cv::imshow("w", img);
            int key = cv::waitKey(15) & 0xff;
            //std::cout << found << " " << key << "\n";
            if(key == ' ' && found) {

                cv::Mat_<float> distCoeffs (4, 1, 0.f);
                cv::Mat_<float> r (3, 3, 0.f);
                cv::Mat_<float> rvecs (3, 1, 0.f);
                cv::Mat_<float> tvecs (3, 1, 0.f);

                cv::solvePnP(cv::Mat(obj_points), cv::Mat(corners), intr, distCoeffs, rvecs, tvecs);
                cv::Rodrigues(rvecs, r);
                extr = cv::Mat_<float>(4, 4, 0.f);

                for(int y = 0; y < 3; y++) {
                    for(int x = 0; x < 3; x++)
                        extr.at<float>(y, x) = r.at<float>(y, x);

                    extr.at<float>(y, 3) = tvecs.at<float>(y, 0);
                }

                extr.at<float>(3, 0) = 0.f;
                extr.at<float>(3, 1) = 0.f;
                extr.at<float>(3, 2) = 0.f;
                extr.at<float>(3, 3) = 1.f;

                for(int y = 0; y < 4; y++) {
                    for(int x = 0; x < 4; x++) {
                        printf("%+.4e ", extr.at<float>(y, x));
                    }
                    putchar('\n');
                }
                putchar('\n');

                //break;
            }
        }

    }
};

int main ()
{
    Camera cam;
    cam.calib_extrinsic();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:15:51.123

这是一个类型问题。SolvePNP 创建双矩阵，而不是浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:31:10.897

看起来旋转和平移向量没有被正确访问。例如，您可能需要在 Rodrigues 函数中使用 rvecs[0]（对平移向量执行相同操作）。您可以尝试运行此代码吗？确保将 model_points 和 image_points push_backs 替换为您自己各自的 3D 模型和 2D 图像点。这对我有用并显示重新投影的输出，以便您验证结果：

```
Mat frame = imread("path/to/image.png");

vector<vector<Point3f> > model_points(1);
model_points[0].push_back(Point3f(FILL HERE AND ADD MORE));

vector<vector<Point2f> > image_points(1);
image_points[0].push_back(Point2f(FILL HERE AND ADD MORE));

Mat camera_matrix;
Mat distortion(1, 5, CV_32FC1);
distortion.setTo(0);
vector<Mat> rvecs, tvecs;
calibrateCamera(model_points, 
              image_points, 
              frame.size(), 
              camera_matrix, 
              distortion, 
              rvecs, tvecs, 
              CV_CALIB_FIX_K1 | CV_CALIB_FIX_K2 |
              CV_CALIB_FIX_K3 | CV_CALIB_FIX_K4 |
              CV_CALIB_FIX_K5);

Mat rotation;
Rodrigues(rvecs[0], rotation);

vector<Point2f> new_points;
projectPoints(model_points[0], rvecs[0], tvecs[0], camera_matrix, distortion, new_points); 

for (int i = 0; i < new_points.size(); ++i) {
    circle(frame, new_points[i], 3, Scalar(0, 0, 255), -1);
}

namedWindow("temp");
imshow("temp", frame);
waitKey(0); 
```

# python - Python Pandas 的累积 OLS

> ID：15095740
> 
> 赞同：5
> 
> 时间：2013-02-26T17:44:14.693
> 
> 标签：python, optimization, pandas, regression

我使用的是 Pandas 0.8.1，目前无法更改版本。如果较新的版本将有助于解决以下问题，请在评论而不是答案中注明。此外，这是针对研究复制项目的，因此即使在仅添加一个新数据点后重新运行回归可能很愚蠢（如果数据集很大），我仍然必须这样做。谢谢！

在 Pandas 中，有一个参数`rolling`选项，但似乎暗示这需要选择窗口大小或使用整个数据样本作为默认值。我希望以累积的方式使用所有数据。`window_type``pandas.ols`

我正在尝试对`pandas.DataFrame`按日期排序的 a 进行回归。对于每个索引`i`，我想使用从最小日期到 index 日期的可用数据进行回归`i`。所以窗口在每次迭代时有效地增长一个，所有数据都是从最早的观察中累积使用的，并且没有数据从窗口中丢弃。

我编写了一个函数（如下）`apply`来执行此操作，但速度慢得令人无法接受。相反，有没有办法`pandas.ols`直接执行这种累积回归？

以下是关于我的数据的更多细节。我有一个`pandas.DataFrame`包含标识符列、日期列、左侧值列和右侧值列。我想使用`groupby`基于标识符进行分组，然后对由左侧和右侧变量组成的每个时间段执行累积回归。

这是我可以`apply`在标识符分组对象上使用的函数：

```
def cumulative_ols(
                   data_frame, 
                   lhs_column, 
                   rhs_column, 
                   date_column,
                   min_obs=60
                  ):

    beta_dict = {}
    for dt in data_frame[date_column].unique():
        cur_df = data_frame[data_frame[date_column] <= dt]
        obs_count = cur_df[lhs_column].notnull().sum()

        if min_obs <= obs_count:
            beta = pandas.ols(
                              y=cur_df[lhs_column],
                              x=cur_df[rhs_column],
                             ).beta.ix['x']
            ###
        else:
            beta = np.NaN
        ###
        beta_dict[dt] = beta
    ###

    beta_df = pandas.DataFrame(pandas.Series(beta_dict, name="FactorBeta"))
    beta_df.index.name = date_column
    return beta_df 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:43:45.400

根据评论中的建议，我创建了自己的函数，该函数可以用于`apply`并依赖于`cumsum`累积所有需要的单独项，以向量方式从 OLS 单变量回归中表达系数。

```
def cumulative_ols(
                   data_frame,
                   lhs_column,
                   rhs_column,
                   date_column,
                   min_obs=60,
                  ):
    """
    Function to perform a cumulative OLS on a Pandas data frame. It is
    meant to be used with `apply` after grouping the data frame by categories
    and sorting by date, so that the regression below applies to the time
    series of a single category's data and the use of `cumsum` will work    
    appropriately given sorted dates. It is also assumed that the date 
    conventions of the left-hand-side and right-hand-side variables have been 
    arranged by the user to match up with any lagging conventions needed.

    This OLS is implicitly univariate and relies on the simplification to the
    formula:

    Cov(x,y) ~ (1/n)*sum(x*y) - (1/n)*sum(x)*(1/n)*sum(y)
    Var(x)   ~ (1/n)*sum(x^2) - ((1/n)*sum(x))^2
    beta     ~ Cov(x,y) / Var(x)

    and the code makes a further simplification be cancelling one factor 
    of (1/n).

    Notes: one easy improvement is to change the date column to a generic sort
    column since there's no special reason the regressions need to be time-
    series specific.
    """
    data_frame["xy"]         = (data_frame[lhs_column] * data_frame[rhs_column]).fillna(0.0)
    data_frame["x2"]         = (data_frame[rhs_column]**2).fillna(0.0)
    data_frame["yobs"]       = data_frame[lhs_column].notnull().map(int)
    data_frame["xobs"]       = data_frame[rhs_column].notnull().map(int)
    data_frame["cum_yobs"]   = data_frame["yobs"].cumsum()
    data_frame["cum_xobs"]   = data_frame["xobs"].cumsum()
    data_frame["cumsum_xy"]  = data_frame["xy"].cumsum()
    data_frame["cumsum_x2"]  = data_frame["x2"].cumsum()
    data_frame["cumsum_x"]   = data_frame[rhs_column].fillna(0.0).cumsum()
    data_frame["cumsum_y"]   = data_frame[lhs_column].fillna(0.0).cumsum()
    data_frame["cum_cov"]    = data_frame["cumsum_xy"] - (1.0/data_frame["cum_yobs"])*data_frame["cumsum_x"]*data_frame["cumsum_y"]
    data_frame["cum_x_var"]  = data_frame["cumsum_x2"] - (1.0/data_frame["cum_xobs"])*(data_frame["cumsum_x"])**2
    data_frame["FactorBeta"] = data_frame["cum_cov"]/data_frame["cum_x_var"]
    data_frame["FactorBeta"][data_frame["cum_yobs"] < min_obs] = np.NaN
    return data_frame[[date_column, "FactorBeta"]].set_index(date_column)
### End cumulative_ols 
```

我已经在许多测试用例中验证了这与我以前的函数的输出和 NumPy 的`linalg.lstsq`函数的输出相匹配。我还没有对时间进行完整的基准测试，但有趣的是，在我一直在研究的情况下，它快了大约 50 倍。

# c# - Accurate way to detect the main frequence of a sound file using NAudio

> ID：15095742
> 
> 赞同：1
> 
> 时间：2013-02-26T17:44:20.090
> 
> 标签：c#, fft, frequency, naudio

I am a beginner in NAudio programming and i have this problem. I have a lot of sound files which are used in a project i am working on. These files are a different frequency wave sounds which starts from 20 Hz to 20kHz. I searched online and i found the NAudio library to be -may- helping me to do the Recording and the calculation which i need.

All what i need is a function which takes the stream from the mic (lets say for 5 second) and calculate the fundamental frequency and return it as a float. The input coming from the mic should be also a good source (not noisy) so we can say that this signal is going to be good. Is that possible with NAudio library or i should use another library ? - Is there any ready C# samples for this ?

Thanks in advance for help.

-- Regards, Ahmad

# objective-c - 在 NSMutableArray 的末尾添加一个元素

> ID：15095744
> 
> 赞同：-6
> 
> 时间：2013-02-26T17:44:25.743
> 
> 标签：objective-c, nsmutablearray

如何将元素添加到数组的末尾？我知道有一个方法 objectAtIndex: 但是如何检查我是否位于数组的末尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:46:32.113

而不是`objectAtIndex`，你可以`addObject:`

根据开发人员说明：

`addObject:`

在数组末尾插入给定对象。

`- (void)addObject:(id)anObject`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:46:54.813

来自苹果文档：[`[array addObject:obj];`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/addObject%3a)

你是什​​么意思：

> 如何检查我是否位于数组的末尾？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:47:13.867

默认情况下，对象放在最后。

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

# qt - Infinite scrolling of a qt listView in QML

> ID：15095748
> 
> 赞同：6
> 
> 时间：2013-02-26T17:44:45.020
> 
> 标签：qt, qml, qt5

I have a listview object that reads data from a web api via a javascript function that appends the data to the listmodel. I've attached the listview and listmodel below.

I want to implement a type of infinite scroll when the user gets close or reaches the last element of the listview.

I can't figure out how to detect the scroll event and grab the relative scroll position.

Thanks for any help.

```
ListModel {

        id: subModel
        function getSub(idx){
            return (idx >=0 && idx < count) ? get(idx).display_name: "";
        }
    }

ListView {
        clip: true
        width: parent.width
        height: parent.height - searchButton.height
        model: subModel         
        on
        delegate: ListingDelegate{
                text: title;
                subText: subTitle;
                icon: Qt.resolvedUrl(thumbnail)
                __iconWidth: units.gu(5)
                __iconHeight: units.gu(5)
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:11:47.003

在 QML 中，每个属性都有相应的变化信号。在您的情况下，您应该收听 ListView 的 atYEnd 属性：

```
ListView {
  id: messageList
  // Stuff
  onAtYEndChanged: {
    if (messageList.atYEnd) {
      // Loading tail messages...
    }
  }
} 
```

# sql - SQL substituting NULL using NVL, having problems checking substituted value in the where clause correctly

> ID：15095752
> 
> 赞同：2
> 
> 时间：2013-02-26T17:44:52.030
> 
> 标签：sql, informix, nvl

I am running a query to display messages when the from date is before (<=) the current date and to_date is after (>) the current date.

If the `to_date` is `NULL`, then i give it a value using the `NVL` method and make the check n the where clause, and if it is not null - ie the user has provided the value for it - then it should use that value and check the condition in the where clause.

```
select a.id,
       title,
       body,
       NVL(a.to_date, '9999-12-31 23:59:59') as todate,
       cr_date
from   a,
       b
where  a.cust_id = 20 and
       a.body_id = b.body_id and
       a.from_date <= current and 
       a.to_date > current 
```

However when I do run this query for my database, I only get the results for when the user has entered a to_date. I DO NOT get results when to_date is null and it has the value '9999-12-31 23:59:59' - i.e.: It fails the a.to_date > current condition in the where clause and so does not return those entries. The value when to_date is NULL is substituted correctly with '9999-12 ...' but the where condition '> current' fails.

I want to make the substitution within the query and not as a seperate statement. Logically I think it should work but for some reason I am going wrong somewhere . Also not sure if this effects the query execution but the default value of to_date is set to NULL when creating the table.

Can you please help me with this issue. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:56:11.893

您需要阅读 NULL 值比较 - [http://www.w3schools.com/sql/sql_null_values.asp](http://www.w3schools.com/sql/sql_null_values.asp)

NULL 和 'SOME_DATE' 不能与 =、< 或 <> 运算符进行比较。与这些运算符的比较总是错误的。

因此，您的条件“a.to_date > current”将始终为 false，并且永远不会返回任何 to_date 为 NULL 的行。

如果您需要返回它们，您需要更改您的查询：

```
where  a.cust_id = 20 and
       a.body_id = b.body_id and
       a.from_date <= current and 
       ((a.to_date > current) OR (a.to_date IS NULL)) 
```

希望这可以帮助。

编辑：

根据您的评论，我想澄清在 SQL 执行中存在优先顺序。在这种情况下，将首先评估 FROM 子句，然后是 WHERE，最后是 SELECT 子句。您在 SELECT 子句中所做的任何事情都只会影响“显示”输出的方式。它不会更改评估的行数。在您的示例中， where 子句已经消除了 NULL 值，因此 SELECT 子句中的 NVL() 替换实际上是多余的，因为输出中永远不会有任何 NULL 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:57:14.933

我对您的问题不是 100% 清楚，但听起来您希望在`WHERE`条款中评估您的替代日期，即使您没有包含`NVL()`. 你有没有试过这个：

```
select a.id,
   title,
   body,
   NVL(a.to_date, to_date('9999-12-31 23:59:59', 'YYYY-MM-DD HH24:MI:SS')) as todate,
   cr_date
from   a,
   b
where  a.cust_id = 20 and
   a.body_id = b.body_id and
   a.from_date <= current and 
   NVL(a.to_date, to_date('9999-12-31 23:59:59', 'YYYY-MM-DD HH24:MI:SS')) > current 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:16:24.293

基本问题是“显示标签”或“列别名”不可用于查询主体（WHERE 子句）。您可以使用子查询解决此问题：

```
SELECT id, title, body, to_date, cr_date
  FROM (SELECT a.id,
               a.title,
               b.body,
               NVL(a.to_date, '9999-12-31 23:59:59') AS to_date,
               b.cr_date
          FROM a JOIN b ON a.body_id = b.body_id
         WHERE a.cust_id = 20
           AND a.from_date <= CURRENT
       ) AS t
 WHERE to_date > CURRENT 
```

这避免了重复 NVL 表达式。

`todate`请注意，您在 AS 和`to_date`WHERE中存在冲突。我还建议在查询使用多个表时识别每列来自哪个表（就像内部查询一样，但外部查询没有）。我通常对表格使用单字母别名；这一次，别名是不必要的，因为给定的表名是单字母名称。

对此的查询计划很可能与单级查询相同。当然，您可以使用 SET EXPLAIN 进行检查。

# haskell - Creating images to use with repa-devil

> ID：15095754
> 
> 赞同：1
> 
> 时间：2013-02-26T17:44:59.897
> 
> 标签：haskell, repa

I am using `repa-devil` to read and write images. Now I need to programmatically create images. However, the `Image` constructors (such as `RGB`) in `Data.Array.Repa.IO.DevIL` all require foreign memory buffer arrays. Do I have to go off and learn how to work with that foreign pointer stuff (which sounds scary)? Or can I convert an unboxed array to the type I need?

```
emptyImage :: RandomGen r => (Int, Int) -> Rand r Image
emptyImage (w,h) = do
  xs <- getRandomRs (0, 255)
  let ps = take (w*h*3) xs :: [Word8]
  let arr = fromListUnboxed (Z :. w :. h :. (3::Int)) ps :: Array U DIM3 Word8
  let arr2 = ???how can I convert arr??? :: Array F DIM3 Word8
  return $ RGB arr2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:37:10.463

最简单的方法是使用更通用的`fromList`功能。这样，你就可以做到

```
...
let arr = fromList (Z :. w :. h :. (3 :: Int)) ps :: Array F DIM3 Word8
return $ RGB arr 
```

该`fromList`功能可以在`Data.Array.Repa.Eval`

```
fromList :: (Shape sh, Target r e) => sh -> [e] -> Array r sh eSource 
```

通常，您可以确保在使用该`computeP`函数显示数组时生成所需的表示。因此，您可以执行以下操作（如果您不介意额外的复制）

```
let arr = fromListUnboxed (Z :. w :. h :. (3::Int)) ps :: Array U DIM3 Word8
arr2 <- computeP arr
return $ RGB arr2 
```

类型注释是不必要的，因为编译器知道它需要什么类型才能使用`RGB`构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:15:46.687

我想你真的需要写一些与随机图像不同的东西。如果您可以构造纯索引函数，则有更有效的方法将数组加载到内存中，通过`D`elayed 数组：

```
let delayed = fromFunction (Z :. w :. h :. (3::Int))
                           (\(Z :. x :. y :. comp) -> myComp)
foreignArr <- computeP delayed 
```

使用`yarr`库和`yarr-image-io`包 -`repa-devil`它的端口如下所示：

```
let delayed =
        fromFunction (h, w)
                     (\(y, x) -> return $ VecList [myRed, myGreen, myBlue])
foreignArr <- dComputeP delayed 
```

但是，如果您确实想要随机图像，则`yarr`允许以相对较快的速度加载具有状态计算的数组：

```
import Data.Yarr
import Data.Yarr.Shape as S
import qualified Data.Yarr.Utils.FixedVector as V
import Data.Yarr.IO.Image

emptyImage :: StdGen -> Dim2 -> IO (Image, StdGen)
emptyImage gen sh@(h, w) = do
    arr <- new sh
    let writeRandColor gen i _ = do
            let (rgb, gen') = runRand (V.replicateM random) gen
            linearWrite arr i rgb
            return gen'
    gen' <- S.foldl writeRandColor (return gen) (const ()) 0 (size sh)
    touchArray arr
    return (RGB arr, gen') 
```

# c# - XMLSerializer not reading all Elements

> ID：15095755
> 
> 赞同：0
> 
> 时间：2013-02-26T17:45:04.520
> 
> 标签：c#, serialization, xml-serialization

I have a class used to serialize and deserialize via XMLSerializer. ExportSteps is another class which implements IXmlSerializer for custom serialization.

My issue is it's not reading and setting any properties after it reads exportSteps. If I move IsNew and Test2 above Steps, it works fine. I don't think that is a valid solution though, what if I need two custom serialized classes?

```
public class PublishOptions
{

    [XmlElement( "test" )]
    public bool Test { get; set; }

    [XmlElement( "exportSteps" )]
    public ExportSteps Steps { get; set; } <-- implements IXmlSerializable

    [XmlElement( "isNew" )]
    public bool IsNew { get; set; }

    [XmlElement( "test2" )]
    public bool Test2{ get; set; }}
}

var test = serializer.Deserialize(stream) as PublishOptions; 
```

XML (Example):

```
<publishingOptions>
  <test>true</test>
  <exportSteps>     
    <option>foo</option>
    <option>bar</option>
  </exportSteps>
  <isNew>true</isNew>
  <test2>true</test2>
</publishingOptions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:13:34.997

我发现了错误，它在 ReadXml 方法中。阅读器在元素中间退出自定义阅读器。这导致自定义序列化程序失败后的任何事情。

# javascript - Enabling dropdown when checkbox checked

> ID：15095756
> 
> 赞同：1
> 
> 时间：2013-02-26T17:45:05.393
> 
> 标签：javascript, forms

I've thoroughly looked for an answer but everything seems to only give me half of what I need, which is how I managed to get this started. What I'm trying to do is enable a dropdown menu when a checkbox is checked, but keep it disabled otherwise. I'm not really sure how to call the function in the tag, but then again i'm not really sure it's working.

```
function .onCheckChange() {
    if ($("#partoption2").is(':checked')) {
        $("#parttwoqty").attr('disabled', 'disabled');
        $("#partoption2").val("TRUE");
    } else {
        $("#parttwoqty").attr('disabled');
        $("#partoption2").val("FALSE");
    }
} 
```

This is the fiddle: [http://jsfiddle.net/xjn3Q/1/](http://jsfiddle.net/xjn3Q/1/)

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:59:18.430

我已经修改了你的小提琴，你可以在这里看到结果[http://jsfiddle.net/xjn3Q/9/](http://jsfiddle.net/xjn3Q/9/)

```
var $checkBox = $('#partoption2'),
$select = $('#parttwoqty');

$checkBox.on('change',function(e){
if ($(this).is(':checked')){
    $select.removeAttr('disabled');
}else{
   $select.attr('disabled','disabled');
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:56:10.870

功能是正确的，但名称不正确。此外，如果您使用的是 jQuery，则不应`onchange`直接在 html 标签上使用该属性。

在您的小提琴中，在包含 jQuery 库（1.8+）之后，将 JS 更改为此作品。要考虑的另一件事是使用 of`prop`而不是`attr`。

```
$(function(){
  $("#partoption2").on('change',function() {
    if (!$(this).is(':checked')) {
      $("#parttwoqty").prop('disabled', 'disabled');
    } else {
      $("#parttwoqty").prop('disabled', false);
    }
  });
}); 
```

也许您需要先禁用选择，以便在选中复选框之前它显示为禁用，`$("#parttwoqty").prop('disabled', 'disabled');`在该`$(function(){`行之后添加以执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:57:00.787

您的代码存在多个问题，但我只会解决使此示例有效的问题。

首先，在您的 jsFiddle 中，您使用的是 jQuery，但从不加载它（在左侧）。

其次，既然您使用的是 jQuery，为什么不使用 jQuery 点击处理程序，如下所示：

```
$('#partoption2').click(function () {
    if ($("#partoption2").is(':checked')) {
        $("#parttwoqty").attr('disabled', 'disabled');
        $("#partoption2").val("TRUE");
    } else {
        $("#parttwoqty").attr('disabled', false);
        $("#partoption2").val("FALSE");
    }
}); 
```

# c# - ReSharper telling me Boolean.TryParse() inside IF statement redundant?

> ID：15095759
> 
> 赞同：3
> 
> 时间：2013-02-26T17:45:11.440
> 
> 标签：c#, resharper

I would like some clarification on the following IF statement. I know this sort of statement can be written in many different ways... that's not what i'm asking. I am really curious why ReSharper 7 is telling me that comparing `canceled == true` is redundant.

```
bool canceled;
if (Boolean.TryParse(Request.QueryString["cancel"], out canceled) && 
    canceled == true)
{
    // Transaction canceled...
} 
```

It's my understanding that `Boolean.TryParse()` will return true/false based on the success of the conversion, not the actual **result** of the out parameter. Why then would comparing `canceled == true` be redundant? It very well could be false at that point, right?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T17:46:07.323

Just use

```
if (Boolean.TryParse(Request.QueryString["cancel"], out canceled) && canceled)
{
    // Transaction canceled...
} 
```

As `canceled` is not nullable, you don't need to explicitly compare with the `true` boolean, as `(canceled == true) == canceled`.

# python - 修改 Twisted 的 FileSender() 以支持字节范围标头

> ID：15095762
> 
> 赞同：1
> 
> 时间：2013-02-26T17:45:40.743
> 
> 标签：python, http-headers, twisted, twisted.web

我在我的视频流应用程序中使用了 twisted，HTML5 视频流在很大程度上依赖于字节范围进行清理......但 FileSender 似乎不支持字节范围（导致一些问题）。

以前我只是将所有内容传递给 Static.File.render_GET，它必须支持字节范围，但由于从那时起进行了一些更改，这不再可行。

```
request.setHeader('Content-Type','video/octet-stream')
print request.getAllHeaders()
self.isLeaf = False
#return static.File.render_GET(self,request)
f = open('.path/to/file.mp4','rb')

def cbFinished(ignored):
    f.close()
    request.finish()

d = FileSender().beginFileTransfer(f,request)
d.addErrback(err).addCallback(cbFinished)
return NOT_DONE_YET 
```

如果请求的文件类型为“mp4”，则通过请求的代码，并且我收到如下错误：

```
<GET /file.mp4 HTTP/1.1>
{'range': 'bytes=66673263716-', 'host': '192.168.1.64:8000', 'accept': '*/*', 'user-agent': 'Mozilla/5.0 (Nintendo WiiU) AppleWebKit/534.52 (KHTML, like Gecko) NX/2.1.0.8.23 NintendoBrowser/1.1.0.7579.EU'}
Unhandled Error
Traceback (most recent call last):
Failure: exceptions.Exception: Consumer asked us to stop producing
Unhandled Error
Traceback (most recent call last):
Failure: exceptions.RuntimeError: Producer was not unregistered for file.mp4
<GET /file.mp4 HTTP/1.1>
{'range': 'bytes=69839914264-', 'host': '192.168.1.64:8000', 'accept': '*/*', 'user-agent': 'Mozilla/5.0 (Nintendo WiiU) AppleWebKit/534.52 (KHTML, like Gecko) NX/2.1.0.8.23 NintendoBrowser/1.1.0.7579.EU'} 
```

这表明 WiiU 正在请求不同的字节范围，这让我认为这就是问题所在。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:33:01.163

没关系，事实证明`static.File`这正是我想要的。我说服自己它仅在设置为目录时才有效，但作为单个文件可以正常工作。代码现在是：

```
rangedFile = static.File('/path/to/file.mp4',
                         defaultType='video/octet-stream')
return rangedFile.render_GET(request) 
```

# digital-signature - 带有 JavaCard 的 CMS 数字签名

> ID：15095773
> 
> 赞同：1
> 
> 时间：2013-02-26T17:46:04.407
> 
> 标签：digital-signature, pkcs#7, javacard

**我想要的是**

以标准格式（CMS / CAdES-EPES）创建分离的数字签名。

**我现在如何创建数字签名**

我从文档 (SHA-256) 创建哈希，获取哈希算法 ID 并将其全部放入一条消息中，该消息发送到智能卡 (JavaCard)。为此消息（RSA-512）生成分离的签名并发送回。我可以使用纯 Java（到目前为止还没有 BouncyCastle）使用代码验证此签名：

```
RSAPublicKey pubK = (RSAPublicKey) cert.getPublicKey();
Signature sig = Signature.getInstance("SHA256withRSA", "BC");
sig.initVerify(pubK);
//load signed file and update sig
...
sig.verify(signedMessage) 
```

**问题**

我的目标是从已签名的数据中获取 CMS(PKCS#7) 签名。悬停，如此处所述->[如果我有证书，我们如何将 PKCS#1 转换为 PKCS#7？](https://stackoverflow.com/questions/12796545/how-can-we-convert-pkcs1-to-pkcs-7-if-i-have-the-certificate)- 由于签名属性，“转换”为 CMS 并不容易。好吧，让我们说，无论如何我都想尝试一下（只是为了有备份解决方案）。首先，我尝试使用 BouncyCastle。但是，我找不到使用已签名数据且无法访问主键的方法（因为它在智能卡上，因此无法导出）。所以我尝试了这样的原生java库：

```
X500Name xName = X500Name.asX500Name(cert.getSubjectX500Principal());
BigInteger serial   = cert.getSerialNumber();
AlgorithmId digestAlgorithmId = new AlgorithmId(AlgorithmId.SHA512_oid);
AlgorithmId signAlgorithmId = new AlgorithmId(AlgorithmId.RSAEncryption_oid);

//SignerInfo
SignerInfo sInfo = new SignerInfo(xName, serial, digestAlgorithmId, signAlgorithmId, signatureBytes);
//Create ContentInfo
ContentInfo cInfo = new ContentInfo(ContentInfo.DATA_OID, new DerValue(DerValue.tag_OctetString, dataToSign));
//create PKCS7 signature
PKCS7 p7 = new PKCS7(new AlgorithmId[] { digestAlgorithmId }, cInfo,
        new java.security.cert.X509Certificate[] { cert },
        new SignerInfo[] { sInfo });
//Write PKCS7 to bYteArray
ByteArrayOutputStream bOut = new DerOutputStream();
p7.encodeSignedData(bOut);
byte[] encodedPKCS7 = bOut.toByteArray(); 
```

老实说，这种方法对我来说似乎“不正确”，我什至无法使用 PKCS7.verify() 方法对其进行验证（它返回 null，这是不成功的验证并且不会引发异常）。

所以我的问题是：

1.  **有没有办法直接从 JavaCard 获取 CMS 签名？**
2.  **是否可以仅使用签名者证书（没有访问私钥）从已经生成的签名创建 CMS 签名？**
3.  **你看到上面的“转换”代码有什么问题吗？**
4.  **您知道任何可用于验证分离签名的工具吗？（能够检查我的结果）**

A 一直在寻找答案 2 周了，我真的很绝望。感谢您提供任何信息/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:47:27.627

> (1) 有没有办法直接从 JavaCard 获取 CMS 签名？

由于 JavaCard 的用途非常广泛，如果您是对它们进行编程的人，那么这就是可能的。但是，检索这些 CMS 容器所需的通信将是非常专有的，很可能只能由您的代码（这对您可能是好或坏；对于客户来说通常是坏的）和来自破解您的解决方案的人的代码可用。

> (2) 是否可以仅使用签名者证书从已经生成的签名创建 CMS 签名（不访问私钥）？

如果您已经拥有 PKCS#1 签名，则可以创建非常原始的 CMS 签名容器，参见。如果我有您所指[的证书，我们如何将 PKCS#1 转换为 PKCS#7](https://stackoverflow.com/questions/12796545/how-can-we-convert-pkcs1-to-pkcs-7-if-i-have-the-certificate)问题。

但是，如果您打算与其他签名验证软件互操作，那么这种原始签名（具有巨大的操纵潜力）很可能会被拒绝。

> (3) 你看到上面的“转换”代码有什么问题吗？

还请提供样本 PKCS#1 输入签名和样本 CMS 结果。此外，正如@owlstead 评论的那样，*您不应该使用 Sun 内部类，它们可能会被更改、重命名甚至删除，恕不另行通知。*（实际上我更愿意将*should*替换为*shall*。）

> (4) 你知道任何可以用来验证分离签名的工具吗？（能够检查我的结果）

OpenSSL 包含验证工具。此外，还有许多提供签名验证服务的 Web 服务。其中哪一个适合您，很大程度上取决于您签名的 PKI 和法律环境。

# xml - 没有外部url的弹簧加载xml定义

> ID：15095774
> 
> 赞同：3
> 
> 时间：2013-02-26T17:46:07.227
> 
> 标签：xml, spring, load, definition

在我使用 Spring 框架的应用程序中，在我的 environment.xml 顶部，我有通常的

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
"> 
```

现在我正试图摆脱对这些外部 URL 的依赖，以防它们出现故障。有没有办法从一些 spring 或任何 java 库中加载这些 XML 定义。如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:55:13.600

Spring 将从本地资源加载模式定义，因为它们包含在 spring jar 中。在每个 jar 中，您都会找到一个`/META-INF/spring.schemas`将 URI 映射到类路径资源的文件。

引用[Spring 参考文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/extensible-xml.html#extensible-xml-registration-spring-schemas)：

> 名为“spring.schemas”的属性文件包含 XML 模式位置（与 XML 文件中的模式声明一起引用，使用模式作为“xsi:schemaLocation”属性的一部分）到类路径资源的映射。需要这个文件来防止 Spring 绝对必须使用需要 Internet 访问来检索模式文件的默认 EntityResolver。

# html - CSS图像缩略图翻转显示文本

> ID：15095778
> 
> 赞同：0
> 
> 时间：2013-02-26T17:46:14.563
> 
> 标签：html, css, positioning, css-position, rollover

我正在努力实现这一目标：

![滚下](../Images/ae711488d459e2ff02307a514cf0f913.png)

STEP logo 是一个缩略图，旁边的 RV logo 是一样的，只是它被悬停在上面，此时 VIEW PROJECT 和一个蓝色的透视背景出现。

我尝试了几件事：

使img成为`<a>`标签的背景并将`<p>`标签放在`<a>`标签中并使用`display: none;`然后`:hover`更改为`display: block;`

这个布局是响应式的，所以导致了问题，我的代码是这样的：

HTML：

```
<a class="work-thumb" href="#"><p class="work-thumb-rollover">view project</p></a> 
```

CSS：

```
a.work-thumb {
    width: 20%;
    padding-top: 50%;
    background-image: url(images/work1.jpg);
    background-size: cover;
    -moz-background-size: cover;  /* Firefox 3.6 */
    background-position: center;
}
    /* This code works, the image as the background is responsive */

p.work-thumb-rollover {
    display: none;
}

p.work-thumb-rollover:hover {
    display: block;
    text-align: centre;
    width: 100%;
    background: rgba(54, 25, 25, .5);
}

    /* This doesn't seem to work, the width 100% doesn't take the width of it's parent and on rollover no color appears? */ 
```

我还尝试在 HTML 和绝对定位中使用 img 标签：

HTML：

```
<a class="work-thumb" href="#"><img src="images/work1.jpg" alt="work"><p class="work-thumb-rollover">view project</p></a> 
```

CSS：

```
.work-thumb {
    position: relative;
}

.work-thumb img {
    width: 33%;
    height: auto;
    float: left;
    padding: 0;
    margin: 0;
    border: 0;
    z-index: 1;
}

p.work-thumb-rollover {
    display: none;
}

p.work-thumb-rollover:hover {
    position: absolute;
    display: block;
    text-align: centre;
    width: 100%;
    background: rgba(54, 25, 25, .5);
    top: 50%;
    left: 50%;        
} 
```

这一个，P 标签宽度不会采用它的父标签宽度，并且会粘在框的右上角（无论我给它什么`top`或属性）。`left`

我尝试了与此类似的事情，我删除了它们并返回到第一方（除了当前的响应性之外，只有 html 中的图像没有 CSS），但我尝试了这些变化，但无法获得它们去工作。

任何人都可以对此有所启发，或者提供他们可能已经使用或看到的简单解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:53:22.520

您可以只使用 CSS/3 和 HTML 来做到这一点：

[这是我为你做的一个例子](http://jsfiddle.net/7Db9n/)

你必须更换

```
 background-color 
```

和

```
 background-image 
```

得到你所追求的结果。

编辑：**继承人更新的 JSFiddle** [链接>>](http://jsfiddle.net/7Db9n/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:56:00.053

您可以将锚标记转换为具有**特定宽度和高度**的 div，并且在**:hover**上可以**更改背景图像**。div 必须有样式

> 显示：内联块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:02:38.270

如果我正确理解您的问题，您希望显示文本并在悬停时更改背景图像。为什么不使用一点 jquery 来完成它：

```
<a class="work-thumb" href="#"><img src="images/work1.jpg" alt="work"><p class="work-thumb-rollover"></p></a>

$('.work-thumb').hover( function() {

$('.work-thumb-rollover').text('view project');
$('.work-thumb > img').attr('src', 'images/work2.jpg');

}); 
```

# .net - 在 .NET 中访问更新语句并调用所述语句

> ID：15095790
> 
> 赞同：1
> 
> 时间：2013-02-26T17:46:39.873
> 
> 标签：.net, ms-access, sql-update

我正在使用一个我真的不喜欢顺便说一句的 Access 数据库，并且正在尝试使用“联系人”表对记录执行更新。声明是这样写的……

```
UPDATE contacts SET FirstName = [c_FirstName], LastName = [c_LastName], Title = [c_Title], Email = [c_Email], IncludeSection4 = [c_IncludeSection4] WHERE (((ContactID)=[c_ContactID])); 
```

现在.NET 部分是这样的......

```
Public Shared Function Update(ByVal contact As IContact) As Boolean
        Dim parameterList As New List(Of DataParameter)
        parameterList.Add(New DataParameter("c_ContactID", contact.ContactID, ParameterDirection.Input, OleDbType.Integer))
        parameterList.Add(New DataParameter("c_FirstName", contact.FirstName, ParameterDirection.Input, OleDbType.VarChar))
        parameterList.Add(New DataParameter("c_LastName", contact.LastName, ParameterDirection.Input, OleDbType.VarChar))
        parameterList.Add(New DataParameter("c_Title", contact.Title, ParameterDirection.Input, OleDbType.VarChar))
        parameterList.Add(New DataParameter("c_Email", contact.Email, ParameterDirection.Input, OleDbType.VarChar))
        parameterList.Add(New DataParameter("c_IncludeSection4", contact.IncludeSection4, ParameterDirection.Input, OleDbType.Boolean))
        If DAL.SendData("UpdateContact", parameterList) Then
            Return True
        End If
        Return False
End Function 
```

由于某种原因，这不会更新并且总是返回 false。cmd.ExecuteNonQuery 总是返回 0.... 我在想它的 Access 部分不正确，这里有什么明显的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:58:07.853

带有 Access 的 OleDb 会忽略参数名称。按照它们在`UPDATE`语句中出现的顺序提供参数。

```
 parameterList.Add(New DataParameter("c_FirstName", contact.FirstName, ParameterDirection.Input, OleDbType.VarChar))
    parameterList.Add(New DataParameter("c_LastName", contact.LastName, ParameterDirection.Input, OleDbType.VarChar))
    parameterList.Add(New DataParameter("c_Title", contact.Title, ParameterDirection.Input, OleDbType.VarChar))
    parameterList.Add(New DataParameter("c_Email", contact.Email, ParameterDirection.Input, OleDbType.VarChar))
    parameterList.Add(New DataParameter("c_IncludeSection4", contact.IncludeSection4, ParameterDirection.Input, OleDbType.Boolean))
    parameterList.Add(New DataParameter("c_ContactID", contact.ContactID, ParameterDirection.Input, OleDbType.Integer)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:59:47.207

您的更新声明看起来很奇怪。自从我完成访问以来已经很长时间了，但它应该看起来更像这样：

```
UPDATE [contacts] SET [FirstName] = @c_FirstName, [LastName] = @c_LastName, ... 
```

此外，您的 Access 并不真正关心参数名称，只需确保它们的顺序相同。

# javascript - Error of variable undefined when the variable is defined

> ID：15095791
> 
> 赞同：0
> 
> 时间：2013-02-26T17:46:40.493
> 
> 标签：javascript, jquery, iframe

This code has worked for 6 months, then all of a sudden it started throwing this code. It is for a Tumblr theme that we had to create a work around for an issue with iframe youtube videos.

The line that is apparently throwing the error is:

```
if(theVidURL.indexOf('youtu.be') >= 0) 
```

Error: TypeError: theVidURL is undefined

Here is the rest of the code:

```
function replaceThumbnailImg(){
    // var classes = $('article.video').attr('class').split(' ');
        articles = $('article.video');
        articles.each(function(){

            var headers = $(this).find('header');
            var theVidURL = $(this).find('.source_link').attr('href');

            var theVidURLArray = null;

            if(theVidURL.indexOf('youtu.be') >= 0){
                theVidURLArray = theVidURL.split('.be/');
                if(typeof theVidURLArray[1]!='undefined'){theVidURLArray = theVidURLArray[1].split('/');}

            } else {
                theVidURLArray = theVidURL.split('v=');

                if(typeof theVidURLArray[1]!='undefined'){theVidURLArray = theVidURLArray[1].split('&');}
                    theVidURLArray = theVidURLArray[0].split('?');
                }
        if(theVidURL.indexOf('youtu') >= 0){ 
            headers.each(function(){
                    theThumbURL = 'http://img.youtube.com/vi/'+theVidURLArray[0]+'/0.jpg';

                    $(this).html('<img src="'+theThumbURL+'" />');
                });
        }
            // $('header').html('');
        });
    } 
```

# c# - 后台线程的 MSTest 失败

> ID：15095794
> 
> 赞同：5
> 
> 时间：2013-02-26T17:46:52.193
> 
> 标签：c#, multithreading, mstest, assert

我有一个使用多个线程的集成测试。我希望任何线程都能够通过测试（并拆除其余线程）。但是，后台线程上的异常会导致 MSTest 失败——您只会得到一个错误：

> 测试运行时代理进程已停止

我想我可以在后台线程上捕获任何异常，并唤醒主线程以使测试失败，但是有没有更简单/更优雅的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:17:36.813

如果您绝对需要使用不同的线程（而不是`ThreadPool`一个），您可以使用`Task`with`TaskCreationOptions.LongRunning`选项，该选项将为该任务创建一个专用线程（而不是来自 的线程`ThreadPool`）。然后您可以检查该任务`IsFaulted`的`Exception`属性。这是一个简单的代码：

```
var task = new Task(() => { throw new InvalidOperationException(); }, TaskCreationOptions.LongRunning);
task.Start();
try { task.Wait(); }
catch { }

if (task.IsFaulted)
{
    // do something about the exception
    Console.WriteLine(task.Exception);
} 
```

# javascript - 带有 url 的可重置表单

> ID：15095797
> 
> 赞同：0
> 
> 时间：2013-02-26T17:46:58.147
> 
> 标签：javascript, html, forms

我正在使用具有可选值的 html“表单”。我希望当我选择一个值时，页面会加载一个 URL，同时我会重置表单（选择默认值，即代码选中 =“selected”的那个）。

我可以分别获得这两个结果。如果我尝试使这些一起工作，页面只加载一个功能（在桌面浏览器中工作，但我需要它们在移动设备中工作）

我需要因为如果用户在选择一个值后决定返回上一页，会找到选择的值，并且他不能再次选择它

我向您展示了代码，一个带有 jquery，另一个没有：

///////////////////////////////////////// /jQuery

```
<head>

<script type='text/javascript' src='jquery.min1.7.2.js'></script>

<SCRIPT LANGUAGE="Javascript">
$(function(){
// bind change event to select
$('#titolo').on('change', function () {
var url = $(this).val(); // get selected value
if (url) { // require a URL
this.selectedIndex = 0;
window.location = url; // redirect
}
return false;
});
});
</script>

</head>

<body>

<form name="contatto" id="contatto">
<SELECT name="titolo" size="1" id="titolo" style="WIDTH: 441px" LANGUAGE="javascript">
<OPTION selected="selected"></OPTION>
<OPTION value="www.ciao.it">01</OPTION>
<OPTION value="www.ciao1.it">02</OPTION>
<OPTION value="www.ciao2.it">>03</OPTION>
</SELECT>
</form>

</body> 
```

///////////////////////////////////////// ///////// 没有

```
<head>

<SCRIPT LANGUAGE="Javascript">
function resetcampi() {
document.forms['contatto'].titolo.selectedIndex = 0;
}
</script>

</head>

<body>

<form name="contatto" id="contatto">
<SELECT name="titolo" size="1" id="titolo" style="WIDTH: 441px" LANGUAGE="javascript"
onchange="location.href=contatto.titolo.value; resetcampi()">
<OPTION selected="selected"></OPTION>
<OPTION value="www.ciao.it">01</OPTION>
<OPTION value="www.ciao1.it">02</OPTION>
<OPTION value="www.ciao2.it">>03</OPTION>
</SELECT>
</form>

</body> 
```

///////////////////////////////////////// ////////

有些帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:54:33.110

一些浏览器将表单数据存储在它们的缓存中，它们会使用最后的数据自动填充表单。所以如果我是你，我会在页面加载时重置表单：

```
<script type="text/javascript" language="javascript">
   $(document).ready(function() {
      //Reset the form when you load the page
      resetForm();

      //Go to the selected URL when the user selects a url
      $('#titolo').change(function() {
         var url = $(this).val();
         if (url.length > 0) {
            window.location = url;
         }
      });
   });

   function resetForm() {
      $('#contatto').each(function() {
         this.reset();
      });
   }
</script> 
```

# spring - AspectJ 切入点，用于具体类上的注释方法

> ID：15095799
> 
> 赞同：0
> 
> 时间：2013-02-26T17:47:05.477
> 
> 标签：spring, aop, aspectj, spring-aop

我正在使用带有 CGLIB 代理的 Spring 的 AspectJ。我有一个定义如下的方面，我希望它在使用注释“ValidatorMethod”注释的具体类上建议公共方法：

```
@Aspect
public class ServiceValidatorAspect {
    @Pointcut("within(@com.example.ValidatorMethod *)")
    public void methodsAnnotatedWithValidated() {
}

@AfterReturning(
            pointcut = "methodsAnnotatedWithValidated()",
            returning = "result")
    public void throwExceptionIfErrorExists(JoinPoint joinPoint, Object result) {
         ...
} 
```

示例服务接口

```
public interface UserService {

    UserDto createUser(UserDto userDto);
} 
```

示例服务实现

```
 public class UserServiceImpl implements UserService {

       public UserDto createUser(UserDto userDto) {

             validateUser(userDto);

             userDao.create(userDto);
       }

       @ValidatorMethod
       public void validateUser(UserDto userDto) {

            // code here
       }
} 
```

AOP 弹簧配置：

```
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

据我了解，设置`proxy-target-class`为“true”将导致具体类中的公共方法被代理，而不仅仅是接口方法。但是我的方面没有被触发。关于什么是错的任何想法？我知道我的 UserServiceImpl 类被 CGLIB 正确代理，因为我可以在调试器的调用堆栈中验证这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:47:43.643

似乎问题是这样的（取自[这里](http://www.javacodegeeks.com/2010/07/aspect-oriented-programming-with-spring.html)）：

> Aspects do not apply to intra–operation calls. Meaning that there is no way for the proxy to intercept the calling of a method originated from another method of the same “proxy–ed” bean

# firefox - 如何在Firefox中取消订阅实时RSS书签

> ID：15095801
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:47:11.563
> 
> 标签：firefox

我想看到[这个页面](http://weather.yahooapis.com/forecastrss?w=2502265)，但我总是看到这个警报： ![在此处输入图像描述](../Images/53b2a90376c63bae4c55aff35e25eafb.png)

而且我无法看到该页面，请告诉我如何摆脱它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:05:34.033

转到工具>选项>应用程序，看看可能有这个

![在此处输入图像描述](../Images/71d113a4f56e194f740628a84aba21be.png)

只需将其更改为：

![在此处输入图像描述](../Images/1827f13c9105da31a7b59ff94383c36a.png)

# google-drive-api - 谷歌驱动器中的文件夹ID可以更改吗？

> ID：15095802
> 
> 赞同：0
> 
> 时间：2013-02-26T17:47:12.210
> 
> 标签：google-drive-api

我正在编写一个深深依赖于谷歌驱动器文件夹 ID 的应用程序。由于谷歌内部更改等原因，我没有找到任何有关此文件夹 ID 可能随时间变化的信息……有人知道是否有任何相关信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:10:43.047

任何 id 都不应随时间而改变，这适用于文件和文件夹。不幸的是，对于文件的特定子集，这种情况已经发生过一次，但它不应该再发生了。

# javascript - 新文件上传后jQuery刷新图像

> ID：15095816
> 
> 赞同：0
> 
> 时间：2013-02-26T17:47:42.290
> 
> 标签：javascript, jquery, image

上传后我无法刷新页面上的图像。我将多部分图像发布到隐藏的 iframe。然后我使用 javascript 回调来更改原始图像。它有时会起作用，但并非总是如此。

这不是缓存问题，因为我尝试附加到 URL 没有效果。Chrome 和 Firefox 之间也是一致的，所以我不怀疑浏览器。

在所有情况下，如果我刷新整个页面，它就是正确的。

如果我用 Chrome 检查元素，它似乎将图像显示为数组？有人可以解释发生了什么吗？

谢谢

上传 servlet 以（在 iframe 内）结尾：

```
<script>parent.changeImage('/cdn/orig/prof-1.gif')</script> 
```

哪个电话：

```
function changeImage(image){
    $("#store-image").attr('src', '');
    var ts = new Date().getTime();
    $("#store-image").attr('src', image+"?"+ts);                
} 
```

然后在几次加载后，Chrome 检查显示：

```
Frames
    file.jsp
        images
            image-1.gif
            image-1.gif
            image-1.gif
            image-1.gif
            image-1.gif 
```

每个旁边都有不同的缩略图。

为什么javascript构建一个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:23:02.863

为什么不每次上传时更改图像名称？你所面临的问题，真的只是冰山一角。Web 服务器会缓存静态内容，刷新此缓存需要一些时间。一些浏览器非常持久地缓存静态内容。一些缓存代理做同样的事情。

如果您不愿意更改文件名，至少在 img src 中添加一些递增参数。喜欢 myimage.gif?1235698

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:14:47.100

可能已经解决了...

在服务器端，我依赖于用相同的文件名覆盖旧文件。我认为由于文件系统的滞后，浏览器有时能够在新文件可用之前抓取旧文件 - 即使就程序而言写入已完成。

我改了代码先删除旧的，然后服务器写入同名的新文件。这似乎阻止了浏览器抓取旧的，而是等待新的下来。Chrome 也不再多次列出该文件...

走着瞧。

# c# - 添加到通用字典会导致 IndexOutOfRangeException

> ID：15095817
> 
> 赞同：33
> 
> 时间：2013-02-26T17:47:45.173
> 
> 标签：c#, .net, concurrency, race-condition

我在一些任务中使用字典。

从逻辑上讲，我已经设置了它，以便我的键永远不会发生冲突，但有时当我添加到字典时，我会得到这个异常。

```
Index was outside the bounds of the array.
at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Rpc.<MapIntoRpc>b__4[T](Object x) in Rpc.cs:line 113
   at System.Threading.Tasks.Task`1.InvokeFuture(Object futureAsObj)
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

我知道尝试多次删除或添加相同的密钥可能会出现并发问题，但我已经在算法上考虑了这一点。

是什么导致添加有时失败？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-26T17:58:29.173

您应该查看文档。这就是它所说的：

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。有关线程安全的替代方案，请参阅 ConcurrentDictionary。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-26T18:00:43.997

您的问题很可能是同步。添加 Dictionary 时，有时需要增加底层结构（数组）的大小。如果您从可能导致`IndexOutOfRangeException`. 您需要使用锁等来确保以安全的方式添加。

或者，您可以使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)它是一个线程安全的集合。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-10-01T18:00:44.263

所以你可能会想`Whatever! it will just break the one time`——但不是：

### 重要提示：一旦字典坏了，它就坏了！

由于添加了用于调试目的的字典，甚至从未被读取过，因此销售了三个小时（直到 IIS 按计划回收）。

[![在此处输入图像描述](../Images/d0d45cd9fa3d03ed5667ce0e31c33ed4.png)](https://i.stack.imgur.com/NxijS.png)

*注意：*在我遇到这种情况之前，它已经运行了 3.5 年。

```
 private Dictionary<string, string> _debugLookup;

 _debugLookup[key] = virtualPath; 
```

这甚至不是一个静态字典——它是一个`IViewLocationCache`作为实例方法的 MVC。

# java - 如何杀死runtime.exec？

> ID：15095819
> 
> 赞同：2
> 
> 时间：2013-02-26T17:47:49.417
> 
> 标签：java, process, exec

我在我的jframe中使用下面的代码通过java程序执行shell脚本，但是当我实现其他方法来停止运行进程时，这个方法首先被阻止，我无法停止我的程序。所以我msut杀死了新进程，问题是如何获取进程的pid以及如何将其置于后台以杀死它。

```
public static void execShellCmd(String cmd) {
    try {

        testPath = getPath();

        System.out.println(cmd);
        Runtime runtime = Runtime.getRuntime();
        process = runtime.exec(new String[] { "sh",
                testPath + "/install.sh", cmd, "&" });
        int exitValue = process.waitFor();
        value = exitValue;
        System.out.println("exit value: " + exitValue);
        BufferedReader buf = new BufferedReader(new InputStreamReader(
                process.getInputStream()));
        String line = "";
        BufferedWriter bufferedWriter = null;
        while ((line = buf.readLine()) != null) {
            System.out.println("exec response: " + line);
            log = line;
            writeToFile(line);
        }
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:45:34.623

如果您的“其他方法”可以访问`Process`原始返回的对象，`exec`那么您可以简单地调用`process.destroy()`以终止正在运行的进程。您不需要知道本机 PID。[这是一个使用SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)的或多或少完整的示例（可能有一些我忘记的 try/catch 块）：

```
private Process runningProcess = null;

public static void execShellCmd(String cmd) {
    if(runningProcess != null) {
        // print some suitable warning about process already running
        return;
    }
    try {

        testPath = getPath();

        System.out.println(cmd);
        Runtime runtime = Runtime.getRuntime();
        runningProcess = runtime.exec(new String[] { "sh",
                testPath + "/install.sh", cmd });

        new SwingWorker<Integer, Void>() {
            protected Integer doInBackground() {
                // read process output first
                BufferedReader buf = new BufferedReader(new InputStreamReader(
                    process.getInputStream()));
                String line = "";
                while ((line = buf.readLine()) != null) {
                    System.out.println("exec response: " + line);
                    log = line;
                    writeToFile(line);
                }

                // only once we've run out of output can we call waitFor
                while(true) {
                    try {
                        return runningProcess.waitFor();
                    } catch(InterruptedException e) {
                        // do nothing, wait again
                    } finally {
                        Thread.interrupted();
                    }
                }
                return -1;
            }

            protected void done() {
                runningProcess = null;
            }
        }.execute();
    }
}

public static void stopProcess() {
    if(runningProcess != null) {
        runningProcess.destroy();
    }
} 
```

只要`execShellCmd`和`stopProcess`仅从事件调度线程调用，则不需要同步，因为对`runningProcess`字段的所有访问都发生在同一个线程上（重点`SwingWorker`是`doInBackground`发生在工作线程上但`done`在 EDT 上运行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:54:35.617

为此，您可以使用[java.util.concurrent 中的功能](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)

在包含 UI 的现有类中，您必须添加类似于以下内容的内容：

```
//class variable to store the future of your task
private Future<?> taskFuture = null;

//to be called from button "Start" action handler
public void actionStart() {

  //don't double start, if there is one already running
  if(taskFuture == null || taskFuture.isDone()) {

    //create the new runnable instance, with the proper commands to execute
    MyShellExecutor ex = new MyShellExecutor(new String[] { "sh",testPath + "/install.sh", cmd, "&" });

    //we only need one additional Thread now, but this part can be tailored to fit different needs
    ExecutorService newThreadExecutor = Executors.newSingleThreadExecutor();

    //start the execution of the task, which will start execution of the shell command
    taskFuture = newThreadExecutor.submit(ex);
  }
}

//to be called from button "Stop" action handler
public void actionStop() {
  //if not already done, or cancelled, cancel it
  if(taskFuture !=null && !taskFuture.isDone()) {
    taskFuture.cancel(true);
  }
} 
```

完成这项工作的主要组件是`Runnable`我命名的组件`MyShellExecutor`，如下所示：

```
public class MyShellExecutor implements Runnable {

    //stores the command to be executed
    private final String[] toExecute;

    public MyShellExecutor(String[] toExecute) {
        this.toExecute=toExecute;
    }

    public void run() {
        Runtime runtime = Runtime.getRuntime();
        Process process = null;

        try {
            process = runtime.exec(toExecute);

            int exitValue = process.waitFor();
            System.out.println("exit value: " + exitValue);
            BufferedReader buf = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String line = "";
            while ((line = buf.readLine()) != null) {
                System.out.println("exec response: " + line);
                //do whatever you need to do
            }

        } catch (InterruptedException e) {
            //thread was interrupted.
            if(process!=null) { process.destroy(); }
            //reset interrupted flag
            Thread.currentThread().interrupt();

        } catch (Exception e) {
            //an other error occurred
            if(process!=null) { process.destroy(); }
        }

    }
} 
```

注意：运行耗时操作时，一定不要在UI线程上做。这只会阻止用户，并不能提供良好的用户体验。总是做一些可能使用户在不同线程上等待的事情。

推荐阅读：[Java 并发实践](http://jcip.net)

# c++ - 每次运行时计算不同的数字

> ID：15095822
> 
> 赞同：0
> 
> 时间：2013-02-26T17:47:52.987
> 
> 标签：c++

我有一个多图，其中有 1000 个数字。现在我需要生成一个随机数。说它的 560。然后我将取数组的第 560 个元素。我用兰特。

```
int number = 0;
int size = mmap.size();
int rand = rand() % size + 1; 
```

但问题是，我正在运行这个程序 n 次。每次，我都会得到相同数量的随机值。每次运行程序时如何生成随机值。

```
 i tried using including random library. it gave error when i compile. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:49:25.920

你忘了[srand](http://www.cplusplus.com/reference/cstdlib/srand/)。

```
srand(time(NULL)) 
```

在代码的开头添加它。你只需要调用一次。它将根据当前时间播种。因为你有 time(NULL) 在那里你必须包括 time.h

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T17:49:32.930

你需要用一些东西来播种你的随机数。尝试`srand (time(NULL));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:15:49.747

除了播种随机数生成器之外`rand()`，如果可能的话，我建议您完全避免。它通常不是一个很好的 pRNG，并且常见的用法（例如`rand() % size`）会产生有偏差的结果。如果可用，一个更好的选择是标准 C++`<random>`库。

`<random>`over的一些好处`rand()`：

*   几种具有明确特性的发动机，以满足不同的需求。
*   预定义的发行版，比自己制作更容易正确使用。
*   线程程序中明确指定的行为。

例子：

```
#include <random>
#include <iostream>
#include <functional>

int main() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    std::mt19937 e(seed);

    int size = 10;
    std::uniform_int_distribution d(1,size);

    std::cout << d(e) << '\n';
} 
```

如果更适合您的使用，您还可以将所有内容绑定到单个函数对象中。

```
#include <functional>

std::random_device r;
std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};

auto rand = std::bind(std::uniform_int_distribution<>(1,size),
                      std::mt19937(seed));
std::cout << rand() << '\n'; 
```

# regex - 使用 emacs 将文件名转换为 google 标准

> ID：15095826
> 
> 赞同：1
> 
> 时间：2013-02-26T17:48:10.560
> 
> 标签：regex, emacs

我有一堆文件，我必须将它们的名称转换为谷歌标准。我可以去手动更改它，但我想知道是否有相同的 emacs 绑定。

基本上我需要转换

*   文件名.cpp 到文件名.cpp
*   文件名.h 到文件名.h

并在 cpp 文件中

`#include <FileName.h>`至`#include <file_name.h>`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T17:54:47.500

有几种方法-

1.  适用于您使用 Mac OS - 部分解决方案：这只会更改文件名，但不会更改 cpp 文件中的文件名。Macbook 有一个名为 automator 的工具，您可以在其中指定所有文件所在的文件夹，然后采取行动将文件名编辑为特定模式。我经常使用它来更改从 Web 下载的图像文件或从 Itunes 下载的音乐文件的名称。

2.  你可以编写一个 shell 脚本来做你需要的事情。

3.  编写一个 C++ 方法来做到这一点。

# matlab - MATLAB - 如何实现这种优化？

> ID：15095830
> 
> 赞同：1
> 
> 时间：2013-02-26T17:48:24.220
> 
> 标签：matlab, regression, mathematical-optimization

我正在关注文本并希望在 MATLAB 中实现部分代码，但是我不明白该怎么做。它的目标是优化一组值，这将根据一些输入更好地预测输出。

这是功能：

![在此处输入图像描述](../Images/bb8fdf9aa97f5f84a83d26bc0cfa134f.png)

我已经实现了 L 函数。虽然我知道 'd' 意味着一个非常小的变化，但我不确定如何在 MATLAB 中实现它。我需要指定这个值吗？如果是这样，改变只能朝一个方向发展吗？

作为背景，这里是论文：[http](http://www.ee.kth.se/php/modules/publications/reports/2006/IR-EE-SB_2006_026.pdf) ://www.ee.kth.se/php/modules/publications/reports/2006/IR-EE-SB_2006_026.pdf第 4 页有这个特殊的公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:27:53.330

看起来您正在实施牛顿优化多维函数[http://en.wikipedia.org/wiki/Newton](http://en.wikipedia.org/wiki/Newton) 's_method_in_optimization 的方法，尽管您的公式与该链接中给出的不同。无论如何，方括号中的项是 Hessian 的逆，它本身是成本函数 L 的二阶偏导数矩阵。最后一项是梯度，它是成本函数 L 的一阶偏导数的向量。你需要将梯度和 Hessian 实现为单独的函数，这可能并不容易。然后，您可以只使用 Matlab 中的反斜杠运算符，而不是取 Hessian 的倒数并乘以梯度：`inv(A)*x`相当于`A\x`.

# c# - asp.net - 如何成功更新已动态生成的网格视图（或列表视图）？

> ID：15095831
> 
> 赞同：0
> 
> 时间：2013-02-26T17:48:29.700
> 
> 标签：c#, asp.net, listview, gridview

在后面的代码中，我从数据库中收集信息，然后循环，在不同的表中显示该信息。我想让网站的用户能够更新每一行的“用户”和“注释”字段。

Environments.aspx 的一部分：

```
<asp:ListView ID="ListView1" runat="server" ItemPlaceholderID="Panel1" 
                    OnItemDataBound="ListView_ItemDataBound" CellSpacing="2" 
                    CellPadding="2" ShowHeaderWhenEmpty="True">
                    <LayoutTemplate>
                        <asp:Panel runat="server" ID="Panel1"></asp:Panel>
                    </LayoutTemplate>
                    <ItemTemplate>
                        <br />
                        <%#Eval("Name") %> (Database: <%#Eval("Database") %>): 
                        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                        <ContentTemplate>
                        <asp:Timer ID="Timer1" runat="server" Interval="180000" ontick="Timer1_Tick">
                        </asp:Timer>
                        <asp:GridView ID="GridView1" runat="server" Width="800" CellPadding="2" CellSpacing="2" AutoGenerateColumns="False" >
                            <Columns>
                                <asp:HyperLinkField DataNavigateUrlFields="LinkAddress" DataTextField="ServerName" HeaderText="Server:" Target="_blank" ItemStyle-Width="200" />
                                <%--<asp:BoundField DataField="ServerName" HeaderText="Server:" />--%>
                                <asp:BoundField DataField="Environment" HeaderText="Environment" ItemStyle-Width="50" />
                                <asp:BoundField DataField="Users" HeaderText="Users" ItemStyle-Width="50" />
                                <asp:BoundField DataField="Build" HeaderText="Build" ItemStyle-Width="200" />
                                <asp:BoundField DataField="Notes" HeaderText="Notes" />
                                <asp:TemplateField HeaderText="Update" ItemStyle-Width="50">
                        <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" 
                            Text="Update"></asp:LinkButton>
                        <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel"
                            Text="Cancel"></asp:LinkButton>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="EditRow" 
                                Text="Edit" Visible='<%# PrivilegedUser() %>'></asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                        </ContentTemplate>
                </asp:UpdatePanel>
                    </ItemTemplate>
                </asp:ListView> 
```

Environments.aspx.cs 的一部分：

```
protected void Page_Load(object sender, EventArgs e)
{
    ListView ListView1;
    ListView1 = (ListView)LoginView2.FindControl("ListView1");
    if (!IsPostBack)
    {
        ListView1.DataSource = Envs;
        ListView1.DataBind();
    }
}

protected void Timer1_Tick(object sender, EventArgs e)
{
    ListView ListView1;
    ListView1 = (ListView)LoginView2.FindControl("ListView1");
    if (!IsPostBack)
    {
        ListView1.DataSource = Envs;
        ListView1.DataBind();
    }
}

protected Boolean PrivilegedUser()
{
    SQLConnections SQL = new SQLConnections();
    bool IsPrivileged = SQL.IsUserPrivileged();
    return IsPrivileged;
}

public class Environment
{
    public int EnvId { get; set; }
    public string LineBreak { get; set; }
    public string Name { get; set; }
    public string Database { get; set; }
    public List<Svrs> Svrs { get; set; }
}

public class Svrs
{
    public int ServerId { get; set; }
    public string ServerName { get; set; }
    public string Environment { get; set; }
    public string Users { get; set; }
    public string Build { get; set; }
    public string Notes { get; set; }
    public string LinkAddress { get; set; }
}

public List<Environment> Envs
{
    get
    {
        string[] EnvList = GetEnvs();
        List<string> ServerList = GetServers();
        string[,] DBNamesAndServers = GetDBNamesAndServers();
        string[] DBServers = GetDataBaseServer(DBNamesAndServers);
        string[] DBNames = GetDataBaseName(DBNamesAndServers);
        int num = EnvList.Count();
        List<Environment> CompleteEnvList = new List<Environment>();
        List<Environment> CompleteServerList = new List<Environment>();
        List<Environment> CompleteTempList = new List<Environment>();
        int i = 0;
        int z = 1;

        while(i<num)
        {
            string envname = EnvList[i];
            string dbserver = "Unknown";
            int index = 0;
            if (DBNames.Contains(EnvList[i]))
            {
                index = Array.IndexOf(DBNames, EnvList[i]);
                dbserver = (DBServers[index]);
            }
            string[,] CurServerInfo = GetSvrs(ServerList, envname);
            List<Svrs> NewSvr = new List<Svrs>();
            NewSvr.AddRange(NewSvrInfo(CurServerInfo, z));
            Environment CurrentSvr = new Environment();
            Environment CurrentEnv = new Environment();

                CurrentSvr = new Environment
                    {
                        EnvId = i+1,
                        LineBreak = "",
                        Name = envname,
                        Database = dbserver,
                        Svrs = NewSvr,
                    };
                CompleteServerList.Add(CurrentSvr);

            CompleteEnvList.AddRange(CompleteServerList);
            i++;
            z = z + 10;
        }

        return CompleteServerList; //CompleteEnvList;
    }
} 
```

目前，当我点击“编辑”链接时，页面刚刚刷新。我需要能够知道用户正在更新的行的“环境”、“用户”和“注释”的值，这样我才能真正更新数据库并刷新表。任何帮助将不胜感激。

# ajax - 表单未通过 jQuery 的 ajax POST 提交

> ID：15095832
> 
> 赞同：0
> 
> 时间：2013-02-26T17:48:29.673
> 
> 标签：ajax, jquery

我正在尝试通过 jQuery 的 ajax 函数提交表单，如下所示：

```
$("form#game_submit").submit(function(){   
var away = $("#away_score").val();
var home = $("#home_score").val();
var game = "1148";
var home_team = "Cleveland Cavaliers";
var away_team = "Orlando Magic";
var home_short = "Cavaliers";
var away_short = "Magic";
var date = "463";
var league = "nba";

if(away != home
&& is_numeric(home)
&& is_numeric(away))
{        
    $.ajax({  
        type: "POST",  
        url: "/model/ajax/game_predictions_submit.php",  
        data: ({
            away_score: away,
            home_score: home,
            away: away_team, 
            home: home_team, 
            game: game,
            date: date,
            league: league
        }),
        success: function()
        {
            if(away > home)
            {
                var winner = away_team;
                var loser = home_team;

                var winner_short = away_short;
                var loser_short = home_short;

                var win_score = away;
                var lose_score = home;
            }

            if(home > away)
            {
                var winner = home_team;
                var loser = away_team;

                var winner_short = home_short;
                var loser_short = away_short;

                var win_score = home;
                var lose_score = away;
            }

            if(league == "ncaa")
            {
                var win_img = winner_short;
                var lose_img = loser_short;
            }

            if(league != "ncaa")
            {
                var win_img = winner;
                var lose_img = loser;
            }

            alert(hi);
            $('#away_score').attr('readonly', true);
            $('#home_score').attr('readonly', true);
            return false;
        } 
    });   
}
return false;
}); 
```

HTML如下：

```
<form id='game_submit'>
    <input type='text' name='away_team' maxlength='3' id='home_score' class='bar' style='width:30px;top:0px;' autocomplete='off'  value='0'/>
    <input type='text' name='away_team' maxlength='3' id='away_score' class='bar' style='width:30px;top:0px;' autocomplete='off'  value='0'/>

    <button class='minimal' id='game_submit_button' style='float:right;'>Save</button>
</form> 
```

我试图查看 Chrome 的 javascript 控制台中的问题，但它并没有给我带来任何错误。可以在[这里找到一个工作示例](http://sportannica.com/games/nba/1148/predictions)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:18:50.413

尝试使用 not isNaN （不是数字）

```
if(away != home
&& !isNaN(home)
&& !isNaN(away))
{ 
```

# css - 如何在 CSS3 媒体查询中自动使正文宽度等于设备宽度？

> ID：15095833
> 
> 赞同：21
> 
> 时间：2013-02-26T17:48:32.870
> 
> 标签：css, media-queries

我现在正在做一个移动网站，并尝试使用 CSS3 媒体查询来定位不同的设备。我的部分代码如下：

```
@media screen and (max-width:320px) {
body {
    width: 320px;
}
/* some other style */  
} 
```

如您所见，我必须明确设置正文宽度，以确保它不会显示我在普通 css 中为桌面设置的宽度，即 920 像素。我想知道是否有任何方法可以将主体宽度自动设置为设备宽度，并且每次创建新的`@media`.

顺便说一句，我还在我的`head`标签中添加了以下代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-05-04T21:06:15.507

你也可以使用

```
width: 100vw; 
```

这会将元素设置为视口宽度的 100%。在添加之前，您可能需要检查浏览器的兼容性：http: [//caniuse.com/#search=vw](http://caniuse.com/#search=vw)

有关视口大小的更多信息： [https ://css-tricks.com/viewport-sized-typography/](https://css-tricks.com/viewport-sized-typography/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-26T17:55:03.917

只需使用`width: auto;`

`width: 100%;`和之间的区别在于`width: auto;`100% 的外部宽度是`100% + padding-left + padding-right`, 内部`100%`。`width: auto`is的外部宽度`100%`，内部宽度是`100% - padding-left - padding-right`当且仅当`display`is`block`和 no`float`被设置（并且之前没有没有 clear 的浮动元素）。

# java - 为什么这个通用方法调用不起作用？

> ID：15095835
> 
> 赞同：1
> 
> 时间：2013-02-26T17:48:48.797
> 
> 标签：java, generics, effective-java

以下代码来自 Effective Java book ：

```
Set<Integer> integers = ... ;
Set<Double> doubles = ... ;
Set<Number> numbers = union(integers, doubles); 
```

这段代码没有编译，作者建议通过告诉编译器确切的类型来解决这个问题，如下所示：

```
Set<Number> numbers = Union.<Number>union(integers, doubles) 
```

如果联合的签名如下，为什么早期的程序不能编译？这个特殊的解决方法叫什么？

```
public static <E> Set<E> union(Set<? extends E> s1,
Set<? extends E> s2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:05:10.927

请注意，Double 和 Integer 不仅扩展了 Number，还实现了 Comparable。因此编译器猜测的返回类型将是 Set<Number&Comparable>，它不能转换为 Set<Number>。您需要告诉编译器要使用哪种跟随类型。使用后续代码，您不需要确切的类型。

```
interface X {}
class U implements X {}
class V implements X {}

public static void main(String[] args) {
    Set<U> integers = new HashSet<U>();
    Set<V> doubles = new HashSet<V>();
    Set<X> numbers = union(integers, doubles);
}
public static <E> Set<E> union(Set<? extends E> s1,   Set<? extends E> s2) {
    return null;

} 
```

但是如果你稍微改变一下，你会得到原点错误。

```
 interface X {}
interface Y {}
class U implements X, Y {}
class V implements X, Y {}

public static void main(String[] args) {
    Set<U> integers = new HashSet<U>();
    Set<V> doubles = new HashSet<V>();
    Set<X> numbers = union(integers, doubles);
}
public static <E> Set<E> union(Set<? extends E> s1,   Set<? extends E> s2) {
    return null;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:55:10.690

唯一的问题是编译器不够聪明，无法确定要替换的类型`E`，因此您必须明确指定它。该习语没有名称，它只是您显式指定泛型类型参数的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T17:59:42.147

如果 union 方法定义为`<E> Set<E> union(Set<? extends E> s1, Set<? extends E> s2)`，旧的 Java 编译器不够聪明，无法正确推断返回的类型。因此，有必要告诉编译器您想从方法中返回哪种类型，以确保类型安全。（我认为 Java 7 编译器可能能够正确推断这一点，但我不确定）。

我也不知道这个“成语”的名称，它只是称为通用函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:02:48.540

Java 编译器尝试尽可能地缩小返回类型。尝试模拟此示例后，我收到以下编译器错误消息，但未指定`.<Number>union`：

```
EffectiveJava.java:19: incompatible types
found   : java.util.Set<java.lang.Number&java.lang.Comparable<? extends java.lang.Number&java.lang.Comparable<?>>>
required: java.util.Set<java.lang.Number>
      Set<Number> numbers = union(integers, doubles); 
```

它试图包含`Comparable`在“E”中，因为整数和双精度也是`Comparable`. 所以这就是为什么你必须告诉编译器，不，我只想要`Number`.`.<Number>union`

据我所知，我不知道这个成语是否有名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T16:54:16.977

当你说

```
Set numbers = Union.union(integers, doubles) 
```

这里 Union 是包含方法静态方法 union 的类的名称

```
static  Set union(Set s1, Set s2) 
```

因此，如果您的类名是定义了方法 union 的 GenericDemo，那么您将编写的代码-

```
Set numbers = GenericDemo.union(integers, doubles)
```

如果联合是非静态方法，则可以用对象实例替换 GenericDemo。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-29T12:18:04.823

它都是关于泛型符号原则和概念的。我正在从 ijrandom 发布的示例中前进。让我们以 U 和 V 仅实现 X 的第一个场景为例。目前我们没有将方法输出分配给参考变量。我们调用了联合方法，如下所示：

联合（整数，双打）；

我们知道，对于泛型，实际参数类型由调用方法时指定的类型决定，因此在这种情况下，方法的返回类型将是 Set of X，只需将光标移到方法调用上，您就会看到 java 编译器是如何确定的编译时的实际参数类型。

在我们的第二个场景中，我们再次调用方法 union：

union(integers, doubles);//注意我们还没有将返回值赋给变量。

将光标移到方法调用上，您会注意到方法的返回类型更改为 Set of unknown extends X，因此这里编译器无法完全解析实际类型，因为 U 和 V 同时实现了 X 和 Y，而 X 不是 Y。因此，一旦您为变量赋值，就会产生错误，因为编译器仍然无法识别实际类型。在这种情况下，您需要告诉编译器要使用哪种实际类型。

# sql - 在插入时将数字转换为数据类型数字的算术溢出错误

> ID：15095839
> 
> 赞同：2
> 
> 时间：2013-02-26T17:48:55.883
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我在使用显示算术溢出错误的查询时遇到问题。

```
INSERT INTO seed_health_testing_form (seedlotno, modeoftesting, datetested, 
    datecollected, placecollected, sampleno, germination1, germination2, 
    germination3, germination4, germination5, germination6, germination7, 
    germination8, germination9, germination10, remarks) 
VALUES ( 'A00075', 'GTest', '2/14/2013', 
    '2/19/2013', 'Laguna', 0, 50.00, 50.00, 
    50.00, 50.00, 0.00, 0.00, 0.00, 
    0.00, 0.00, 0.00, '') 
```

表设计

```
[id]                [int]       IDENTITY(1,1) PRIMARY KEY NOT NULL
[seedlotno]         [varchar](50)   NULL
[modeoftesting]     [varchar](100)  NULL
[datetested]        [datetime]      NULL
[datecollected]     [datetime]      NULL
[placecollected]    [varchar](100)  NULL
[sampleno]          [int]           NULL
[germination1]      [decimal](3, 2) NULL
[germination2]      [decimal](3, 2) NULL
[germination3]      [decimal](3, 2) NULL
[germination4]      [decimal](3, 2) NULL
[germination5]      [decimal](3, 2) NULL
[germination6]      [decimal](3, 2) NULL
[germination7]      [decimal](3, 2) NULL
[germination8]      [decimal](3, 2) NULL
[germination9]      [decimal](3, 2) NULL
[germination10]     [decimal](3, 2) NULL
[remarks]           [varchar](1000) NULL 
```

我尝试逐行打破 INSERT 查询以跟踪错误的位置，但它始终指向第 1 行。我仍然找不到我的问题所在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:53:19.300

您的所有`[decimal](3, 2)`数据类型都是问题所在。

告诉您该`(3,2)`数字总共可以具有 3 位的精度，其中 2 位保留用于小数部分。

因此，您只有 1 位可用于存储诸如 之类的值`50`，这会导致溢出。

有关详细信息，请参阅[十进制数据类型文档](http://msdn.microsoft.com/en-us/library/aa258832%28v=sql.80%29.aspx)。

# ios - 如何确定 Dropbox 是否已安装在 iOS 设备上？

> ID：15095845
> 
> 赞同：2
> 
> 时间：2013-02-26T17:49:10.520
> 
> 标签：ios, objective-c, dropbox

我的应用使用 Dropbox 允许用户备份他们的核心数据存储。有没有办法以编程方式确定 Dropbox 应用是否已安装，以便提示用户设置备份？我不想打扰不使用 Dropbox 的用户，但我想尝试让尽可能多的用户使用备份。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:51:36.357

Dropbox 定义了自己的 URI 方案，`dbapi-1`因此您可以查看操作系统是否可以使用该方案打开 URL，如下所示：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"dbapi-1://"]]) {
    NSLog(@"Dropbox is installed.");
} else {
    NSLog(@"Dropbox is not installed.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T08:16:23.760

当前接受的答案不合适。`dbapi-1`可能并不总是有效。这实际上取决于您是否使用 SDK（您应该使用）。

如果您阅读`DBChooser.m`( [https://github.com/dropbox/dropbox-ios-dropins-sdk/blob/master/DBChooser/DBChooser.m](https://github.com/dropbox/dropbox-ios-dropins-sdk/blob/master/DBChooser/DBChooser.m) ) 的代码，您将看到以下方法：

```
+ (NSURL*)dbc_chooserURLForAppKey:(NSString*)appKey linkType:(DBChooserLinkType)linkType
{
    NSString *baseURL = [NSString stringWithFormat:@"%@://%@/chooser", kDBCProtocol, kDBCAPIVersion];
    NSString *linkTypeString = [[self class] dbc_getLinkTypeString:linkType];

    return [NSURL URLWithString:[NSString stringWithFormat:@"%@?k=%@&linkType=%@", baseURL, appKey, linkTypeString]];
} 
```

常数`kDBCProtocol`是你需要的。目前最新的是`dbapi-3`. 如果您使用的是最新的 Dropbox sdk，则应始终使用与您正在使用的框架对应的那个。

# vba - 在特定工作表之间对选择工作表进行排序

> ID：15095853
> 
> 赞同：0
> 
> 时间：2013-02-26T17:49:33.960
> 
> 标签：vba, excel

我有一个包含四个“系统”工作表的工作簿，每个系统工作表都有一个动态编号或用于各种数据收集的后续选项卡。我需要的是一种按字母顺序对系统及其子工作表进行排序但存在于两个特定工作表之间的方法。例子：

> [介绍/参考表] [客户信息表] **[系统 1] [Sys1 Child 1-12] [System 2] [Sys2 Child 1-12] [System 3] [Sys3 Child 1-12] [System 4] [Sys4 1-12]** [其他表]

我试过排序潜艇，如

```
For Each w1 In Sheets
 For Each w2 In Sheets
  If w1.Range("Z1") <> "" And w2.Range("Z1") <> "" Then
   If w2.Range("Z1").Value < w1.Range("Z1").Value Then
    If w2.Range("Z1").Value = "S1L0" Then
     w2.Move after:=Cover
    Else
     w2.Move before:=w1
    End If
   End If
  End If
 Next w2
Next w1 
```

它开始工作得很好，但随后循环失控，我在目标范围内有一张带有“S1L0”的表格，其他所有内容都在列表的末尾。关于如何让它发挥作用的任何想法？

编辑：系统工作表都以“S1”到“S4”开头，但它们被重命名为“S1 - %string%”到“S4 - %string%”，子工作表是最初命名的隐藏工作表的副本“ S#L#" 其中 # 分别是系统编号和子编号。子表也可以重命名，但它将遵循模式“S#L# - %string%”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:36:18.167

这应该做的工作：

```
Sub SortSheets()
    Dim lngParentID As Long, lngChildID As Long
    Dim wsParent As Worksheet, wsChild As Worksheet, wsLast As Worksheet

    Set wsLast = Sheets("Customer Info Sheet")
    For lngParentID = 1 To 4
        Set wsParent = GetSheet(lngParentID)
        If Not wsParent Is Nothing Then
            wsParent.Move After:=wsLast
            Set wsLast = wsParent

            For lngChildID = 1 To 12
                Set wsChild = GetSheet(lngParentID, lngChildID)
                If Not wsChild Is Nothing Then
                    wsChild.Move After:=wsLast
                    Set wsLast = wsChild
                End If
            Next lngChildID
        End If
    Next lngParentID
End Sub

Private Function GetSheet(lngParentID As Long, Optional lngChildID As Long = 0) As Worksheet
    Dim ws As Worksheet

    For Each ws In Sheets
        If (lngChildID = 0 And (ws.Name = "S" & lngParentID Or Left(ws.Name, 4) = "S" & lngParentID & " -")) Or _
            Left(ws.Name, 5) = "S" & lngParentID & "L" & Format(lngChildID, "00") Then
            Set GetSheet = ws
            Exit Function
        End If
    Next
End Function 
```

# java - 在jsp中显示深度非常大的树结构

> ID：15095859
> 
> 赞同：0
> 
> 时间：2013-02-26T17:49:42.990
> 
> 标签：java, jsp, recursion

在 JSP 页面上，加载了具有大量节点的树。树以对角线方式显示，如下所示

```
Root
 |
 |----Dependencies
 |        |----A
 |        |----B
 |        |----Dependencies 
                    |----A
                    |----B
                    |----Dependencies ...........    
                              |
                              |
                              |
                              n 
```

由于它大于页面大小，因此出现了垂直滚动条。但问题是**没有水平滚动条出现。树有这么多节点，它对角线直到页面的终点，然后它再次从最左边的点开始，但不是树状结构。其余的树节点仅显示为列表，如下所示**

```
Dependencies
A
B
C
|
|
n 
```

请建议我如何在我的 JSP 页面上显示这么大的树。有浏览器限制吗？或者我应该使用其他方法来显示这么大的树吗？

# mysql - MySQL，将表中的多个字段拆分为一列

> ID：15095861
> 
> 赞同：1
> 
> 时间：2013-02-26T17:49:57.893
> 
> 标签：mysql, union-all, into-outfile

我有一个表，其中有几个零件号列： `PN1`, `PN2`, `PN3`, `otherData`。

我想创建一个高效的 MySQL 查询，它将零件编号列折叠到一个称为`PN`将零件编号链接到 otherData 的列中。

这种转换对于我们的业务逻辑是必要的。我在下面有一个可以正常工作的查询，但我们需要大幅提高性能。

有没有更好的方法来执行以下操作？

SQL Query 可以正确转换数据，但效率低下：

```
SELECT 'Pn', 'Mfg', 'TableId', 'SourceColumn', 'OtherData'
SELECT PN1, Mfg, '26', 'PN1', OtherData FROM Table
UNION ALL
SELECT PN2, Mfg, '26', 'PN2', OtherData FROM Table
UNION ALL
SELECT PN3, Mfg, '26', 'PN3', OtherData FROM Table
UNION ALL
SELECT PN4, Mfg, '26', 'PN4', OtherData 
INTO OUTFILE 'XXX.dat'
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM Table d; 
```

输入表如下表所示：

```
|  PN1  |  PN2  |  PN3    |  PN4    |  MFG  |  TableId  |  OtherData  |
-----------------------------------------------------------------------
|  asdf |  abde |  12354  |  asdfc  |  2    |  26       |  0.2456     |
|  nupo |  1354 |  null   |  null   |  2    |  26       |  1.53       |
|  ...  |  ...  |  ...    |  ...    |  ...  |  ...      |  ...        |
|  ...  |  ...  |  ...    |  ...    |  ...  |  ...      |  ...        |
|  ...  |  ...  |  ...    |  ...    |  ...  |  ...      |  ...        | 
```

我希望输出`.dat`文件如下所示：

```
"Pn",    "Mfg", "TableId",  "SourceColumn","OtherData"
"asdf",  2,     26,         "PN1",         0.2456
"abde",  2,     26,         "PN2",         0.2456
"12354", 2,     26,         "PN3",         0.2456
"asdfc", 2,     26,         "PN4",         0.2456
"nupo",  2,     26,         "PN1",         1.53
"1354",  2,     26,         "PN2",         1.53
... 
```

请注意，PN1 到 PN4 被折叠成 PN。

有没有更快的方法在 MySQL 中进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:13:30.857

我在数据库管理员页面下交叉发布了这个问题

[https://dba.stackexchange.com/questions/35514/better-query-to-select-multiple-columns-into-a-single-output-column](https://dba.stackexchange.com/questions/35514/better-query-to-select-multiple-columns-into-a-single-output-column)

看来查询是（至少对于 MySQL）我暂时能做的最好的。如果 MySQL 曾经实现对`PIVOT`/的支持，`UNPIVOT`那么应该重新审视这个问题。

# javascript - 正则表达式在 IE8 中不起作用

> ID：15095862
> 
> 赞同：1
> 
> 时间：2013-02-26T17:49:57.927
> 
> 标签：javascript, regex, internet-explorer

好的，在这里和谷歌上搜索高和低后，我不得不硬着头皮在这里问一个关于 IE8 中的 RegEx 的新问题。

我有以下代码：

`var output = input.replace(/^\S+(\s|&nbsp;)+/, '');`

其目的是从金额中删除货币名称，因此“kr 12 345,00”变为“12 345,00”，“NOK 12 345,00”变为“12 345,00”等等。

这在任何地方都可以正常工作，除了在 Internet Explorer 8 或更低版本中，*它使输入保持不变*。

最初我使用的是`new RegExp()`这样做的方式，但将其更改为正则表达式文字，以查看 IE 处理这两种变体的方式之间是否存在差异 - 谢天谢地，没有:)

我也试过只用`\s`and 只用 the`&nbsp;`但这并没有什么不同。

***真正***奇怪的是，当在 IE 8 的 W3 School 的“Try It Yourself”页面上以“kr 12 345,00”作为输入运行上述正则表达式时，它可以正常工作[！](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_replace)（也当第一个空格被替换为`&nbsp;`）

所以重申一下：我看到这个问题的地方是在我的 Javascript 代码中使用正则表达式时，它位于 AngularJS 过滤器函数中（我正在定义一个过滤器），并且过滤器返回 IE8 中的原始输入（其中在 IE8 中也可以通过 console.log() 看到）。其他人为我在 IE9 中对其进行了测试，并报告说它在那里运行良好——我也在 Chrome 中进行了测试。我遇到此问题的唯一浏览器是 IE8 和 IE7。

**这里到底发生了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:21:59.463

尝试

```
var output = input.replace(/^\S+([\s\xA0]|&nbsp;)+/, ''); 
```

根据[此处](http://www.nivas.hr/blog/2012/01/19/non-breaking-white-space-in-internet-explorer-8-bug-and-how-to-fix-it/)，“在 IE8 中... \s （应包括所有空格）不包括不间断空格”。

或者更好，只需使用

```
var output = input.replace( /^\D+/, '' ); 
```

其中`\D`是任何非数字字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:53:22.297

首先，当您检查时，`&nbsp;`我猜您正在从 html 中获取此值（使用`el.innerHTML`or `$(el).html()`。将所有非破坏性空格转换为 ' ' 的更好方法是使用`el.textContent`or `$(el).text()`（这也涵盖了您的情况，例如货币名称被包裹在一个跨度中（可能在其属性中包含数字））

然后使用以下正则表达式替换字符串开头的所有非数字

```
var output = input.replace(/^[^\d]+/, ''); 
```

# ios - 如何实现持久/通用右栏按钮项目，如音乐应用程序和 Pandora 的“正在播放”按钮？

> ID：15095866
> 
> 赞同：0
> 
> 时间：2013-02-26T17:50:06.143
> 
> 标签：ios, uinavigationcontroller

我正在编写一个流媒体音乐应用程序，我真的很喜欢音乐应用程序和 Pandora 中的通用“正在播放”按钮。我正在尝试自己实现它们。不幸的是，我尝试过的方法让我自己以及试图帮助我的人都感到困惑。到目前为止，这是我尝试过的，所有这些都不起作用/部分起作用：

*   `static UIBarButtonItem`在所有控制器中使用 a （工作不一致，有时没有 segue）
*   手动向 Interface Builder 中的所有控制器添加按钮（有效，但在转换时会导致淡出/淡入动画）
*   创建一个视图控制器，该控制器具有`static UIBarButtonItem`所有控制器的子类（消除了方法 1 中的 no segue 问题，但仍然表现不一致）

TL;DR：我不知道如何实现一个通用的右栏按钮项。请告诉我怎么做。

带有我的层次结构的空白表示的[演示项目。](http://cl.ly/1S3N0m3G3k3c)

编辑：潘多拉的开发者尼尔混合[回答了这个问题](https://stackoverflow.com/a/855879/1593651)。完全一样的问题。但我不明白。如果有人能解释他的方法，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:04:57.743

我为您实现了一个解决方案，它使用一个`BarButtonManger`由自定义`UINavigationController`子类用作委托的单例。
您仍然必须确定按钮的目标应该是什么（VC 导航到，导航控制器，其他一些单例/应用程序委托，..）但是这个解决方案应该可以帮助您：[http](http://cl.ly/3M151o1i3z3O)
://cl.ly/3M151o1i3z3O 不要忘记将故事板中导航控制器的类更改为 CustomNavigationController！

```
//  BarButtonManager.h
#import <UIKit/UIKit.h>

@interface BarButtonManager : NSObject <UINavigationControllerDelegate>

+ (BarButtonManager*)sharedInstance;

@end

//  BarButtonManager.m
#import "BarButtonManager.h"

@implementation BarButtonManager {
    UIBarButtonItem *_sharedItem;
}

+ (BarButtonManager*)sharedInstance
{
    static BarButtonManager *instance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[BarButtonManager alloc] init];
    });
    return instance;
}

- (UIBarButtonItem*)sharedButtonItem
{
    if (!_sharedItem) { // not thread safe, but let's assume this is only called from UI thread
        UIButton *nowPlayingButton = [UIButton buttonWithType:UIButtonTypeCustom];

        UIImage *background = [[UIImage imageNamed:@"nav-bar-now-playing-button-silver.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(4.0, 7.5, 5.0, 13.0)];
        UIImage *backgroundPressed = [[UIImage imageNamed:@"nav-bar-now-playing-button-pressed-silver.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(4.0, 7.5, 5.0, 13.0)];

        [nowPlayingButton setBackgroundImage:background forState:UIControlStateNormal];
        [nowPlayingButton setBackgroundImage:backgroundPressed forState:UIControlStateHighlighted];

        nowPlayingButton.frame = CGRectMake(0.0, 0.0, background.size.width, background.size.height);

        NSMutableParagraphStyle *centre = [[NSMutableParagraphStyle alloc] init];
        centre.alignment = NSTextAlignmentCenter;
        centre.lineBreakMode = NSLineBreakByWordWrapping;

        NSMutableAttributedString *nowPlayingTitle = [[NSMutableAttributedString alloc] initWithString:@"Now Playing"];
        [nowPlayingTitle addAttributes:@{NSFontAttributeName : [UIFont boldSystemFontOfSize:9.5], NSParagraphStyleAttributeName : centre, NSForegroundColorAttributeName : [UIColor whiteColor]} range:NSMakeRange(0, nowPlayingTitle.length)];

        [nowPlayingButton setAttributedTitle:nowPlayingTitle forState:UIControlStateNormal];

        nowPlayingButton.titleLabel.lineBreakMode = NSLineBreakByCharWrapping;
        nowPlayingButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
        nowPlayingButton.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;
        [nowPlayingButton setTitleEdgeInsets:UIEdgeInsetsMake(0, -3, 0, 5)];

        [nowPlayingButton addTarget:nil action:@selector(nowPlayingPressed) forControlEvents:UIControlEventTouchUpInside];

        _sharedItem = [[UIBarButtonItem alloc] initWithCustomView:nowPlayingButton];
    }
    return _sharedItem;
}

- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    navigationController.topViewController.navigationItem.rightBarButtonItem = nil;
    UIBarButtonItem *sharedItem = [self sharedButtonItem];
    sharedItem.target = viewController;
    viewController.navigationItem.rightBarButtonItem = sharedItem;
}

@end

//  CustomNavigationController.h
#import <UIKit/UIKit.h>

@interface CustomNavigationController : UINavigationController

@end

//  CustomNavigationController.m
#import "CustomNavigationController.h"
#import "BarButtonManager.h"

@implementation CustomNavigationController

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.delegate = [BarButtonManager sharedInstance];
    }
    return self;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-15T05:28:31.197

我最近写了一篇关于这个问题的博客文章：http: [//www.codebestowed.com/ios-shared-barbuttonitems](http://www.codebestowed.com/ios-shared-barbuttonitems)

它使用与 Martin Ullrich 相同的策略，但还详细说明了如何在 Storyboard 中进行设置，这需要一些技巧。我将尝试在这里进行总结，因为我知道在 SO 中不鼓励仅发布链接。

基本上，问题是当您将 NavigationController 拖到 Storyboard 中时，它不会为您创建可编辑的 NavigationBar。为了解决这个问题，创建一个 ViewController 并选择 Editor->Embed In->Navigation Controller。通过此方法创建的 NavigationController 将具有一个 NavigationBar，您可以将 BarButtonItems 拖动到该导航栏。将此新控制器链接到 UINavigationController 的自定义子类，然后您可以为导航栏中的任何内容创建 IBOutlets。

因此，结合使用此 hack 和 Martin Ullrich 的答案，将为您提供所需的功能 + 使用 Storyboard 功能的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:19:48.437

没有太大的痛苦。您可能有一个“播放器”视图控制器。并在应用程序委托中创建一个变量日历“universalPlayer”。在您创建“播放器”对象时，您应该将其分配给“通用播放器”。然后将条形按钮添加到您的导航控制器。在 bar 按钮的操作上，您可以简单地从 AppDelegate 获取播放器视图控制器。这是一个简单的解决方案。

# jquery - jquery.click() 在 iOS 中不起作用

> ID：15095868
> 
> 赞同：24
> 
> 时间：2013-02-26T17:50:19.783
> 
> 标签：jquery, ios

HTML：

```
<div id="footer">
    <a class="button1 selected" id="button1" href="#"><div class="icon"></div><div class="text">Option 1</div></a>
    <a class="button2" id="button2" href="#"><div class="icon"></div><div class="text">Option 2</div></a>
    <a class="button3" id="button3" href="#"><div class="icon"></div><div class="text">Option 3</div></a>
    <a class="button4" id="button4" href="#"><div class="icon"></div><div class="text">Option 4</div></a>
</div> 
```

JS：

```
$('#button1').click(function() {
    alert('button1');
});

$('#button2').click(function() {
    alert('button2');
}); 
```

现在，这个脚本在我的 PC 浏览器上运行良好，但在 iOS 上却不行。我也尝试过这个解决方案：[$(document).click() 在 iPhone 上无法正常工作。jquery](https://stackoverflow.com/questions/3705937/document-click-not-working-correctly-on-iphone-jquery)但它不起作用。

我在 jQuery 1.8.3 上使用，没有 jQuery Mobile（我不喜欢）。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-26T18:01:11.473

尝试在按钮上添加一个指针光标，并使用 .on 来绑定点击事件。

```
$('#button1').css('cursor','pointer');
$(document).on('click', '#button1',  function(event) {
    event.preventDefault();
    alert('button1');
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-07T08:34:00.357

我遇到了这个： [http ://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html](http://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html)

简而言之，iOS 浏览器需要满足以下条件之一才能从触摸事件生成点击事件：

> 1.  事件的目标元素是链接或表单域。
> 2.  目标元素，或者它的任何祖先，直到但不包括`<body>`，都为任何鼠标事件设置了显式事件处理程序。此事件处理程序可能是一个空函数。
> 3.  目标元素，或者它的任何祖先，包括文档，都有一个 cursor:pointer CSS 声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T10:45:36.707

一般的解决方案可能是这样的：

JS

```
const IS_IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

if (IS_IOS) {
    document.documentElement.classList.add('ios');
} 
```

CSS

```
.ios,
.ios * {
    // causes dom events events to be fired
    cursor: pointer;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-20T15:39:59.743

解决此问题的最简单方法是添加`cursor: pointer;`到您所定位元素的样式 (CSS)。

```
#button1 {
    cursor: pointer;
} 
```

或者，这可以内联添加：

```
<a class="button1 selected" id="button1" href="#" style="cursor: pointer;"><div class="icon"></div><div class="text">Option 1</div></a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-20T09:27:50.073

Yacuzo 的回答是最详尽的。但我想添加第四招（我最喜欢的）：

`$('div:first').on('click', $.noop);`

第一个 div 是否是目标元素的父级并不重要！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-23T07:08:07.720

$('#button1').css('cursor','pointer');

此功能不适用于cordova 10.0、Xcode 13.2

我用这个功能解决问题↓</p>

```
document.getElementById('chatpage').click();
document.getElementById('chatpage').click(); 
```

.click两次可以解决我的问题

供你参考

# c# - MVC4 Ajax.BeginForm 不替换 UpdateTargetId

> ID：15095870
> 
> 赞同：14
> 
> 时间：2013-02-26T17:50:27.377
> 
> 标签：c#, ajax, asp.net-mvc-4, ajax.beginform, razor-2

关于 Ajax.BeginForm 没有正确更新目标元素的问题有很多关于返回部分视图的问题：
[mvc4 ajax 更新同一页面](https://stackoverflow.com/questions/12483812/mvc4-ajax-updating-same-page)
[ASP.NET MVC 4 - Ajax.BeginForm 和 html5](https://stackoverflow.com/questions/12512417/asp-net-mvc-4-ajax-beginform-and-html5)
[MVC 4 (razor) - Controller is返回一个局部视图但整个页面正在更新](https://stackoverflow.com/questions/13374035/mvc-4-razor-controller-is-returning-a-partialview-but-entire-page-is-being-u)
[MVC 4 Ajax 没有更新页面内的 PartialView](https://stackoverflow.com/questions/13626225/mvc-4-ajax-is-not-updating-the-partialview-within-the-page)
但是，所有这些都可以通过手动写出 jQuery ajax 或包含丢失的 javascript 文件来回答。

```
 @using (Ajax.BeginForm("PostcardDetails", new AjaxOptions()
  {
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "details"
  }))
  {
    <div id="PostcardSearchResults">
      @{Html.RenderAction("PostcardSearchResults", Model);}
    </div>
  }
  <div id="details">
  </div> 
```

相关控制器代码：

```
[AcceptVerbs(HttpVerbs.Post | HttpVerbs.Get)]
public ActionResult PostcardSearchResults(PostcardSearchFilter filter)
{
        PostcardSearchResults model = new PostcardSearchResults(filter);
        return PartialView("_PostcardSearchResults", model);
} 
```

在我的布局中，我引用了这些 jQuery 文件。此外，我已验证该页面正在输出正确的路径，并且它找到了正确的文件。我试过切换 and 的顺序`unobtrusive-ajax.min.js`，`validate.min.js`但没有成功。

```
<script type="text/javascript" src="@Url.Content("~/Scripts/globalize.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.9.1.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.10.0.custom.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script> 
```

此外，在我网站的根 web.config 和我的 View 文件夹中的 web.config 中，我包括：

```
<add key="webpages:Version" value="2.0.0.0"/>
<add key="PreserveLoginUrl" value="true"/>
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

我不知道还能去哪里看。没有抛出 javascript 错误，并且控制器被正确命中，返回 PartialViewResult。HTML 中的 Form 元素填充了所有正确的`data-`属性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T17:57:19.750

[jquery.unobtrusive-ajax.min 和 JQuery 1.9 存在问题](http://jquery.com/upgrade-guide/1.9/)，因为 JQuery 1.9 不再支持 live() 方法。所以你应该使用JQuery migrate 插件，并参考JQuery migrate js。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-09T16:20:10.253

确保将 unobtrusive-ajax.js 包含到您放置 ajax 表单的页面中。

```
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-27T20:42:46.130

我遇到了这个问题，我刚刚从 NuGet 安装了最新的不显眼的包并解决了这个问题

PM> 安装包 Microsoft.jQuery.Unobtrusive.Ajax

需要JQ 1.8+

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-23T21:47:06.463

我不知道其他人是否会遇到这种情况，但就我而言，它似乎只是没有更新。我正在构建一个简单的编辑表单，您可以在其中从下拉列表中选择要编辑的项目，单击一个按钮，然后 AJAX 会为所选项目加载一个编辑表单。

它第一次工作，但在更改下拉列表中的选择并单击按钮后，没有任何表单值更改，即使我验证了我的服务器端代码正在将新项目加载到视图模型中。所以看起来替换不起作用。在逐步浏览 jquery.unobtrisive-ajax.js 之后，我发现它*正在*替换我的目标元素的内容，只是使用它已经拥有的相同视图标记，这与传递给视图的模型不匹配！

就在那时我意识到，正是它`ModelState`让我着迷。我第二次单击加载按钮时，它提交了我的下拉选择以及我填写的编辑表单。编辑表单中的所有值都已添加到`ModelState`（如您所料）。然后，我的控制器代码将提交的视图模型（模型绑定器从编辑表单值创建）替换为所选下拉值的视图模型，并将其传递给局部视图。然而，局部视图使用了一堆`Html.[X]For`辅助方法。这些忽略更新的视图模型并直接从`ModelState`. 例如：

```
@Html.DisplayFor(m => m.Name)
@Model.Name 
```

将显示两个不同的名称值；前者显示提交的名称，后者显示更新的名称。这是让 MVC 在（服务器端）验证错误后记住用户表单条目的机制。在这种情况下，因为这是部分页面加载并且我只是丢弃了所有提交的值，所以我不需要任何 ModelState 值，所以我只需调用 ModelState.Clear() 在返回我的更新视图之前视图模型。

```
 public ActionResult GetItemEditForm(EditItemsViewModel editItemsVM)
    {
        if (editItemsVM.SelectedItemID != null)
        {
            //Load the selected item
            ItemsModelManager.GetEditItemsVM(editItemsVM);

            //Clear the submitted form values
            ModelState.Clear();
        }

        return PartialView("_ItemsEditor", editItemsVM);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-20T23:20:26.470

以下内容需要在任何使用 ajax 的页面上。

```
@section Script {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-03T15:33:42.613

我遇到了与您类似的问题 - 我将所有脚本捆绑并正确加载，并且所有代码都正确实现。我检查了包管理器以查看是否需要更新任何脚本，而 jQuery 和 jquery.unobtrusive-ajax 确实需要。jQuery 从 1.9 升级到 1.9.1。当我重建我的解决方案时，目标 DIV 已成功更新。尝试更新解决方案中的所有 JS，它可能会起作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-12T19:07:54.017

哇，这里有很多答案。我的问题是由于引导面板。它正在创建一个“嵌套”面板。我删除了面板标记，只使用了一个普通的旧 div，它就可以工作了。我认为 UpdateTargetId 必须是 AJAX 表单的直接父级。

这是说明问题的html。

```
<div class="panel panel-default" id="notes-form">
  <div class="panel-body">
    @using (Ajax.BeginForm("EditNote", new { id = Model.Id }, new AjaxOptions { UpdateTargetId = "notes-form" }, htmlAttributes: new { @class = "form-horizontal" }))
    {
    }
  </div>
</div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-04T21:33:06.613

对于那些需要更多解释的人......

在包管理器控制台 PM> Install-Package jQuery.Migrate 中键入此内容

在您的部分视图中引用此内容：

脚本 src="~/Scripts/jquery.unobtrusive-ajax.js">

祝大家编码愉快。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-13T06:18:08.250

如果未添加有关此 js 的参考，请检查母版页或您的页面的脚本参考关于 jquery.unobtrusive-ajax.js：jquery.unobtrusive-ajax.js

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-22T07:25:59.193

首先，从 NuGet Manager安装“ **Microsoft.JQuery.Unobtrusive.Ajax** ”，然后在“ **BundleConfig”**中包含“ ***jquery-{version}.js ”后包含“*** ***~/Scripts/jquery.unobtrusive*** ”；这看起来类似于：

 ***```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                "~/Scripts/jquery-{version}.js",
                "~/Scripts/jquery.unobtrusive*)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-17T11:08:07.223

live() 方法在 jQuery 1.7 版中被弃用，并在 1.9 版中被删除。请改用 on() 方法。有关更多信息，请参阅：[http ://www.w3schools.com/jquery/event_live.asp](http://www.w3schools.com/jquery/event_live.asp)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-10T20:13:12.053

用户 xr280xr 的回答包括

`ModelState.Clear();`

为我工作。我正在使用的应用程序位于较旧的 jQ (1.7.x) 上，因此 migrate 在我们的情况下不起作用。清除控制器中的模型状态正是我们期望 BeginForm 做的事情。***

# jquery - jQuery + CSS 画廊悬停效果

> ID：15095873
> 
> 赞同：1
> 
> 时间：2013-02-26T17:50:34.233
> 
> 标签：jquery, css, fancybox, gallery, jquery-hover

我在使用图片库时遇到了一些问题。为了实现翻转效果，我有这个 jQuery 脚本：

```
var gallery=$("#galeria .one-third.column");

        var thumbs = $("#galeria .one-third.column a.fancybox img");        

        for (var c = 0, count = gallery.length; c < count; c++)
        {
            for (var i = 0, ii = thumbs.length; i < ii; i++)
            {
                if (thumbs[i].title && thumbs[i].title.length > 0)
                {   
                    var imgtitle = thumbs[i].title;
                    $(thumbs[i]).wrap('<div id="wrapperGal" />').after('<div class=\'caption\'><span class="title">' + imgtitle + '</span></div>').removeAttr('title');
                }                   
            }
        }
        $('#wrapperGal').hover(

            function()
            {
                $(this).find('img').toggleClass("galGrey");
                $(this).find('.caption').animate({opacity: "1"}, 300);
            },

            function()
            {
                $(this).find('img').removeClass("galGrey");
                $(this).find('.caption').animate({opacity: "0"}, 300);
            }       
        ); 
```

这样做是为了找到画廊，在画廊图像周围应用一个包装器，当将鼠标悬停在项目上时，它会变为灰度，并且您会在现有画廊拇指顶部获得一个标题 div（带有 .caption 类）。画廊由 9 个缩略图组成，脚本将包装器和标题应用于所有现有的画廊项目，但是我只在第一个缩略图上获得悬停效果。

这是画廊 HTML 的一个示例：

```
<div class="one-third column alpha">
        <a title="t1" class="fancybox" rel="group" href="../img/galeria/big1.jpg"><img src="../img/galeria/thumb1.jpg" title="t1"/></a>
        </div>

        <div class="one-third column">
        <a class="fancybox" rel="group" href="../img/galeria/big2.jpg"><img src="../img/galeria/thumb2.jpg" title="t2"/></a>
        </div>

        <div class="one-third column omega">
        <a class="fancybox" rel="group" href="../img/galeria/big3.jpg"><img src="../img/galeria/thumb3.jpg" title="t3"/></a>
        </div> 
```

这是我得到的 CSS：

```
 #wrapperGal{
    width:288px; 
    height:210px; 
    position:relative;
}

#wrapperGal img{
    -webkit-transition: 0.5s;  
    -moz-transition: 0.5s;  
    -o-transition: 0.5s;
    transition: 0.5s;
}

.galGrey{
    -webkit-filter: grayscale(100%);
}

.caption{
    height:190px;
    position:relative;
    top:20px;
    opacity:0;
    background-image:url(../img/galeria/thumbRoll.png);
}

.caption span.title{
    width:288px;
    height:190px;
    padding-top:157px;
    overflow:hidden;
    position:absolute;
    text-align:center;
} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:12:46.883

因为您用作`id`包装器的选择器。相同的 id**不能**应用于不同的元素。

工作演示：http: [//jsfiddle.net/indream/QxuPm/](http://jsfiddle.net/indream/QxuPm/)

```
 for (var c = 0, count = gallery.length; c < count; c++)
    {
        for (var i = 0, ii = thumbs.length; i < ii; i++)
        {
            if (thumbs[i].title && thumbs[i].title.length > 0)
            {   
                var imgtitle = thumbs[i].title;
                $(thumbs[i]).wrap('<div class="wrapperGal" />').after('<div class=\'caption\'><span class="title">' + imgtitle + '</span></div>').removeAttr('title');
            }                   
        }
    }
    $('.wrapperGal').hover(

        function()
        {
            $(this).find('img').toggleClass("galGrey");
            $(this).find('.caption').animate({opacity: "1"}, 300);
        },

        function()
        {
            $(this).find('img').removeClass("galGrey");
            $(this).find('.caption').animate({opacity: "0"}, 300);
        }       
    ); 
```

# eclipse - 通过 eclipse 克隆 BitBucket (Git) repo

> ID：15095874
> 
> 赞同：0
> 
> 时间：2013-02-26T17:50:36.723
> 
> 标签：eclipse, bitbucket, mercurialeclipse

我有一个想要通过 Eclipse 处理的 BitBucket (Git) 存储库。当我在网上搜索时，我发现我需要使用 mercurialeclipse。所以我安装它。然后我尝试在 eclipse 中做`File > import > mercurial > clone existing mercurial repository`。但是当我从 BitBucket 复制 url 时，它说`Clone repository URL is invalid!`我的猜测是这种情况正在发生，因为我的 repo 是一个 Git repo。同样，我对 BitBucket 非常陌生，所以我可能错了。

有人可以指导正确的方法吗？经过多次失败，我终于找到了关于 EGit 的讨论。我应该改用它吗？我在 mac osx 山狮上使用 Juno。

我的目标是能够在 Eclipse 中进行提交等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:14:17.733

安装 eclipse EGit 插件并使用它来克隆 Git 存储库。无需卸载其他插件（mercurial）即可使用 eclipse EGit 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-05T16:08:07.230

仔细检查用户的凭据，如果您尝试克隆存储库的位置是服务器或 ip，请检查`Windows`+`R`输入存储库的路径并进行身份验证，以便 eclipse 可以正确获取存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:02:52.460

您可能应该考虑使用 EGit 插件：界面非常直观，导入也很容易。

# java - 如何一起使用 log4j 2.0 和 slf4j 和 Commons Logging

> ID：15095877
> 
> 赞同：16
> 
> 时间：2013-02-26T17:50:53.477
> 
> 标签：java, logging, slf4j, apache-commons-logging, log4j2

我目前正在启动一个新的 Webapp（在 tomcat 6 上运行）我有使用 slf4j 的组件和使用 commons 日志记录的组件由于多种原因我计划使用 log4j 2.0 作为日志实现（主要用于附加程序：SocketAppender 和 SyslogAppender，但也因为在不丢失日志事件的情况下提升配置重新加载）

现在我的问题是： - 我将新类编程到哪个接口？loag4j 还是 slf4j？甚至公共记录？

*   部署 jar 的首选方式是什么？将它们放入我的应用程序战争中还是将它们放入 tomcat 库中？

*   我需要部署什么罐子？log4j（包括 slf4j 和 commons 绑定）、commons logging (slf4j-api-1.7.2.jar) 和 slf4j api (slf4j-api-1.7.2.jar)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-26T18:40:18.800

> 我将新类编程到哪个接口？loag4j 还是 slf4j？

如果您要使用 SLF4J，请编程到该界面。它为底层日志实现提供了最大的灵活性。slf4j 的重点是成为您可以编程的接口，因此如果您将来决定切换到 logback，您将不必重写代码。

> 部署 jar 的首选方式是什么？将它们放入我的应用程序战争中还是将它们放入 tomcat 库中？

把它们放在你的 WAR 中。

将 JAR 放在 Tomcat 库目录中的唯一原因 (imo) 是它们是否需要加载本机库。由于 Java 不允许您从两个不同的类加载器加载相同的本机库，因此您需要将 then 放在一个公共位置。但这不适用于这里。

有些人认为 lib 目录是一种节省空间的方法。当“服务器级”机器有 1 GB 的 RAM 时，这可能是有效的，但现在不再适用了。避免`lib`意味着您避免了大多数难以调试的类加载问题。

> 我需要部署什么罐子？

*   slf4j-api 是基本 API
*   slf4j-log4j12 将实际日志记录路由到 Log4J
*   jcl-over-slf4j 拦截 Commons Logging 并通过 SLF4J 路由它（到 Log4J）
*   log4j 将是你的物理日志框架

我假设您已经有 Log4J 的配置和/或很容易编写该配置。如果不是，并且您所关心的只是处理在内部使用 Log4J 的代码，那么`log4j-over-slf4j`将拦截 Log4J 调用。然后你需要选择一个框架，比如 Logback。

（注意：我最初添加了所有这些包的链接，但没有足够的代表来发布它们。所以[这里](http://search.maven.org/#search%7Cga%7C1%7Cg:%22org.slf4j%22)有一个指向 Maven 存储库的链接，突出显示了所有 SLF4J 包）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-05T16:01:35.730

我正在使用 slf4j 和 log4j2 并使用

```
slf4j-api-1.7.12.jar
log4j-api-2.2.jar
log4j-core-2.2.jar
log4j-slf4j-impl-2.2.jar
jcl-over-slf4j-1.7.12.jar(get rid of commons logging jars) 
```

如果您的应用服务器有冲突的版本，您可能需要使用某些供应商特定的类加载器设置来覆盖

例如，在 weblogic 12 c 中，我在 src/main/webapp/WEB-INF 内的 weblogic.xml 中有这个

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-web-app 
xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd 
http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.5/weblogic-web-app.xsd">
<container-descriptor>
    <prefer-application-packages>
        <package-name>org.apache.log4j.*</package-name>
        <package-name>org.apache.commons.logging.*</package-name>
        <package-name>org.apache.commons.lang.*</package-name>
        <package-name>org.apache.commons.io.*</package-name>
        <package-name>org.apache.commons.collections4.*</package-name>
        <package-name>org.slf4j.*</package-name>
    </prefer-application-packages>
</container-descriptor>
<jsp-descriptor>
    <keepgenerated>true</keepgenerated>
    <debug>true</debug>
</jsp-descriptor>
<context-root>/cnfg</context-root>
</weblogic-web-app> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:28:29.770

请注意，我没有使用过 Log4J 2.0，尽管我使用过 SLF4J 和 Log4J 1.2。话虽如此，我将回答您的问题如下：

1.  编程到 SLF4J。它有一个漂亮、简单的 API，它是您可能需要的日志框架的一切。另外，如果您出于某种原因决定要切换到 logback 或 Log4J 1.2 或其他任何东西而不是 Log4J 2.0，则只需切换后端的 jar。
2.  绝对将罐子放在应用程序大战中。您几乎不应该将 jars 放入应用程序服务器的`lib`目录中。否则，它们将影响该应用程序服务器上的所有 Web 应用程序，而不仅仅是您的。另外，应用服务器`lib`目录下的jar包不能通过部署webapp来控制，只能手动管理。
3.  看起来您将需要[`slf4j-api-1.7.2.jar`](http://www.slf4j.org/download.html),和[`log4j-to-slf4j-2.0-beta4.jar`](http://logging.apache.org/log4j/2.x/log4j-to-slf4j/project-summary.html),以及任何依赖项。如果您使用它，我确信 Maven 会引入所需的依赖项。[`log4j-2.0-beta4.jar`](http://logging.apache.org/log4j/2.x/log4j-to-slf4j/project-summary.html)[`log4j-core-2.0-beta4.jar`](http://logging.apache.org/log4j/2.x/log4j-core/project-summary.html)

# c# - 独立 Doxygen 文件中没有自动链接

> ID：15095882
> 
> 赞同：0
> 
> 时间：2013-02-26T17:51:05.707
> 
> 标签：c#, doxygen

我正在尝试按照[使用 doxygen 记录代码的最佳提示中的最高建议为我的应用程序编写一个独立的 Doxygen 文件？](https://stackoverflow.com/questions/51667/best-tips-for-documenting-code-using-doxygen).

在我的概述中，我引用了类文件，但没有显示链接。

文件 A.cs：

```
namespace NoAutoLinks
{
    public class A
    {
    }
    public class B
    {
        public A A { get; set; }
    }
} 
```

文件 Doxygen.cs：

```
/// @file Doxygen.cs
/// @mainpage No Auto Links
/// I want to link to A and B here.  Even explicit @ref A and \ref B links don't show up here. 
```

主页已呈现，但没有指向 A 或 B 的链接。在 B 的类页面中，确实显示了指向 A 的自动链接。

Doxyfile 确实包含`AUTOLINK_SUPPORT = YES`

我看到几篇关于关闭自动链接的文章，但没有关于自动链接失败的这种特殊情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:12:29.943

这是一个命名空间问题。以下作品。

```
namespace NoAutoLinks
{
    /// @file Doxygen.cs
    /// @mainpage No Auto Links
    /// I want to link to A and B here.
} 
```

不幸的是，这个例子比实际问题简单。在实际问题中有两个命名空间，这个解决方案只修复了其中一个。添加 a`using otherNamespace`似乎没有帮助。类文档似乎在桥接命名空间方面没有任何问题。

当然，一旦您知道了答案，就更容易找到参考资料，但看起来其他人也没有针对第二个命名空间的解决方案。

*   [http://comments.gmane.org/gmane.text.doxygen.general/6730](http://comments.gmane.org/gmane.text.doxygen.general/6730)

*   [Doxygen 注释的“使用命名空间”](https://stackoverflow.com/questions/2499128/using-namespace-for-doxygen-comments)

*   [http://osdir.com/ml/text.doxygen.general/2005-12/msg00040.html](http://osdir.com/ml/text.doxygen.general/2005-12/msg00040.html)

欢迎解决第二个命名空间的其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:33:49.720

显式链接，包括命名空间工作：

```
@link Namespace.C C @endlink 
```

# mongoid - mongoid - 有人可以向我解释关系吗

> ID：15095883
> 
> 赞同：0
> 
> 时间：2013-02-26T17:51:07.533
> 
> 标签：mongoid

刚刚从 mongo_mapper 切换到 mongoid，我发现一切都更加明确。通过关系，我定义了两个对象之间的多态关系。

两个对象 apples & fruit_bowl 被定义为：

```
class Apples
include Mongoid::Document

field colour, type: String

belongs_to :fruits, :polymorphic=>true
end 
```

和：

```
class FruitBowl
include Mongoid::Document

field size, type: Integer

has_many :apples, as: :fruits, validate: false 
end 
```

当我分别创建一个fruit_bowl 和一个苹果，然后尝试将苹果放入碗中时，出现错误... undefined method __ bson_dump __

我使用的代码是：

```
apple = Apple.create(colour: 'Red')
fruit_bowl = FruitBowl.create(size: 5)
fruit_bowl << apple
fruit_bowl.save #Errors here 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:55:38.633

试试fruit_bowl.apples <<苹果

# javascript - 谷歌地图内容框加载

> ID：15095886
> 
> 赞同：0
> 
> 时间：2013-02-26T17:51:20.113
> 
> 标签：javascript, google-maps-api-3

如何让我的代码在加载后立即显示谷歌内容框？我可以让它在点击时工作，但不能在页面加载时工作。有什么建议吗？

这是我的鼠标点击代码：

```
google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:59:26.733

在您的 onload 函数中，初始化地图后：

```
google.maps.event.trigger(marker, "click"); 
```

（假设标记在调用范围内）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:58:04.167

您可能需要在文档加载时执行完全相同的操作。假设你不使用任何库（如 jQuery），你可以简单地改变你的 body 标签来调用一个 javascript 函数

```
<body onload="myFunction()"> 
```

包含上面的代码，即

```
function myFunction() {
   marker = [ your logic ]     
   map = [ your logic ]  
   infowindow.open(map,marker);
} 
```

# mysql - mysql选择包含在相同标签中的多个值

> ID：15095891
> 
> 赞同：0
> 
> 时间：2013-02-26T17:51:34.687
> 
> 标签：mysql

我不知道是否有更好的描述我的问题，但这里是我需要帮助的：

我有一个包含大量数据的字段，我需要解决的部分如下所示：

```
::field_x::<br />||field_x||519||/field_x||<br />||field_x||281||/field_x||<br />::/field_x:: 
```

我必须从中提取每个数字（id），在此示例中为 519 和 281，并将它们插入另一个表的字段中，以空格或逗号分隔。我知道如何使用 SUBSTRING - LOCATE 方法，但这只会返回第一个实例，那么有没有一种方法可以一次性提取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:03:32.477

`SUBSTRING INDEX LOCATE`将工作。正则表达式没有内置功能，所以除非你在它到达 mysql 之前处理它......你被困在使用该`SUBSTRING INDEX LOCATE`方法......

如果您需要遍历数据集，则需要启动游标，或`FOR`循环并使用存储过程。

[通过 REGEX 在 MySQL 中解析结果](https://stackoverflow.com/questions/2412895/parse-results-in-mysql-via-regex)

# javascript - 如何在点击时切换 AccordionContainer？

> ID：15095893
> 
> 赞同：1
> 
> 时间：2013-02-26T17:51:37.877
> 
> 标签：javascript, widget, onclick, dojo

我有一个使用`dijit.layout.AccordionContainer`带有两个子容器的应用程序。

加载地图时，其中一个容器默认打开。我希望在单击按钮时关闭默认容器并打开第二个容器。知道怎么做吗？

我尝试过使用该`selectChild()`方法，但一定是做错了，还是我完全脱离了基础？

编辑我的 HTML 是：

```
<div dojotype="dijit.layout.ContentPane" id="leftPane" region="left" splitter="true">
   <div dojotype="dijit.layout.AccordionContainer">
      <div dojotype="dijit.layout.ContentPane" title="Table of Contents">
           <div id="tocDiv"></div>
      </div>
      <div dojotype="dijit.layout.ContentPane" title="Search Results" id="tab2">
           <div id="datagrid">
                <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="grid"  id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
                     <thead>
                         <tr>
                            <th field="Parcel Identification Number" width="25%">Parcel ID/th>
                            <th field="Site Address" width="30%"> Address </th>
                         </tr>
                     </thead>
                 </table>
             </div>
           </div>
    </div>
</div> 
```

我试图通过我为点击时需要发生的其他一些事情创建的功能在点击时打开“tab2”

JS：

```
function doFind() {             
     //Set the search text to the value in the box
     findParams.searchText = dojo.byId("parcel").value;
     grid.showMessage("Loading..."); //Shows the Loading Message until search results are returned.
     findTask.execute(findParams,showResults);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:49:49.900

听起来您在尝试使用该`AccordionContainer#selectChild`方法时走在正确的轨道上。通过如下设置 Button 的处理程序，这应该很容易处理`onClick`：

```
onClick: function(){
    var container = dijit.byId("container");
    container.selectChild("pane2", true); 
} 
```

其中`"pane2`" 是您希望在单击按钮时打开的 ContentPane 的 id，`true`表示您希望窗格的打开具有动画效果。您可以在[this fiddle](http://jsfiddle.net/H7Zh8/29/)中看到一个示例。

# c - 使用 strcmp 比较结构数组中的两个元素返回不正确的值

> ID：15095894
> 
> 赞同：0
> 
> 时间：2013-02-26T17:51:54.137
> 
> 标签：c

我试图用来`strcmp`与存储在称为索引的结构数组中的字符串进行比较。该索引包含一个称为网页的字符串和一个称为排名的整数。这个想法是比较两个索引并创建第三个索引，其中包含前两个索引之间相同的网页以及它们各自排名的总和。

问题是，当我使用 for 循环查找索引之间的相似页面数时，它总是返回 7。它应该只返回 4。我是否错误地使用了这个函数？

int 相同 = 0;

```
for(i = 0; i < 8; i++) {
    for(j = 0; j < 7; j++) {
        if(strcmp(hotels[i].webpage,seattle[i].webpage) == 0) {
             thesame++;
         }
    }
}
printf("%d\n", thesame);

return 0; 
```

我也知道我有很多硬编码的长度值，这不是好的编码习惯。我计划在更改此设置之前让程序正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:53:38.747

```
if (strcmp (hotels[i].webpage, seattle[i].webpage) == 0) 
```

您正在使用索引`i`两次。我猜你想要的是类似的东西：

```
if (strcmp (hotels[i].webpage, seattle[j].webpage) == 0)
---------------------------------------^---------------- 
```

# python - 使用记事本++ python脚本插件在特定位置插入文本

> ID：15095896
> 
> 赞同：0
> 
> 时间：2013-02-26T17:52:07.177
> 
> 标签：python, sql, insert, notepad++

我应该先声明我是一个完整的 Python 新手，但我需要完成一项任务:(

我已经安装了 python 脚本插件并阅读了它是如何工作的。但是我有很大的问题要理解我必须编程/脚本。

我有一个文本文件，我用 notepad++ 打开它，其中包含许多语句，例如：

```
Insert into XXX (XXX,XXX,XXX) Values (XXX, XXX, XXX); 
```

我需要使用 notepad++ python 脚本将这些语句转换为

```
BEGIN
Insert into XXX (XXX,XXX,XXX) Values (XXX, XXX, XXX);
EXCEPTION
WHEN dup_val_on_index
THEN dbms_output.PUT_LINE('XXX');
END;
/ 
```

这意味着我必须在 Insert into Statement 之前和之后放置代码。

有人可以帮助我吗？我可能会通过经济计算或类似的方法来提供帮助，但是这项任务对我来说非常困难：/

十分感谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:20:40.027

假设[这](http://npppythonscript.sourceforge.net/)是您正在使用的特定 python 插件，您可以使用正则表达式替换：

```
editor.pyreplace(r"^([Ii]nsert into.*? [Vv]alues.*?\;)", r"BEGIN\r\n\1\r\nEXCEPTION\r\nWHEN dup_val_on_index\r\nTHEN dbms_output.PUT_LINE('XXX');\r\nEND;/\r\n") 
```

*注意：*我不确定`'XXX'`字符串中 的字符串`dbms_output.PUT_LINE('XXX')`应该是表名还是值之一或文字字符串“XXX”。您可以将另一个捕获组添加到正则表达式字符串中，以捕获想要的任何一个，如果文字字符串

您也可以在没有 python 插件的情况下使用类似的搜索/替换模式。Notepad++ 支持正则表达式搜索和替换。

*编辑：*这应该在正则表达式模式下与 Notepad++ 的内置搜索和替换一起使用：

```
Find what: ([Ii]nsert into.*? [Vv]alues.*?\;)
Replace with: BEGIN\r\n\1\r\nEXCEPTION\r\nWHEN dup_val_on_index\r\nTHEN dbms_output.PUT_LINE\('XXX'\);\r\nEND;/\r\n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:09:19.247

如果您正在寻找基于 Notepad++ 的查找和替换解决方案，您可以尝试以下方法。
我假设这`dbms_output.PUT_LINE('XXX')`是为了显示表名（插入语句中的第一个 xxx）。

在 Find & Replace 取消选中`Match case`并选择 Regular Expression with `match Newline`unchecked ( Notepad++ version > 6.0)

寻找

```
Insert\s*into\s*([a-z0-9]*)(\s*)(.*)(\s*)values(\s*)(.*); 
```

代替

```
BEGIN\r\n\Insert into \1 \3 values \6;\r\nEXCEPTION\r\nWHEN dup_val_on_index\r\nTHEN dbms_output.PUT_LINE\(\'\1\'\);\r\nEND; 
```

祝你好运

# java - 精灵移动不流畅

> ID：15095898
> 
> 赞同：0
> 
> 时间：2013-02-26T17:52:12.397
> 
> 标签：java, 2d, slick2d

我正在用 Java/Slick2D 开发一个 2D 平台游戏。

到目前为止，我的角色每帧移动了恒定数量的像素。我已经尝试像建议的那样切换到使用“delta”变量（帧之间的时间量），但角色的动作似乎非常紧张。

我可以做些什么来平滑角色的运动？

```
 private static final float DEFAULT_SPEED = 0.15f;

    Vector2f trans = new Vector2f();
    Input i = gc.getInput();
    boolean run = false;

    // X-Axis Movement
    if (i.isKeyDown(Input.KEY_D)){
        trans.x += DEFAULT_SPEED * delta;
        lastMoveDirection = Direction.RIGHT;
    }
    if (i.isKeyDown(Input.KEY_A)){
        trans.x -= DEFAULT_SPEED * delta;
        lastMoveDirection = Direction.LEFT;
    }
    if (i.isKeyDown(Input.KEY_LSHIFT)){
        trans.x *= RUN_SPEED_MULTIPLIER;
        run = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:54:23.797

你如何定义增量？它应该是绘制一帧所花费的时间/每秒移动的距离，或类似的。

# performance - GHC 产生冗余核心操作

> ID：15095902
> 
> 赞同：16
> 
> 时间：2013-02-26T17:52:43.600
> 
> 标签：performance, haskell, ghc, core

我有以下用于将 6 位 ASCII 转换为二进制格式的程序。

```
ascii2bin :: Char -> B.ByteString
ascii2bin = B.reverse . fst . B.unfoldrN 6 decomp . to6BitASCII -- replace to6BitASCII with ord if you want to compile this
    where decomp n = case quotRem n 2 of (q,r) -> Just (chr r,q)

bs2bin :: B.ByteString -> B.ByteString
bs2bin = B.concatMap ascii2bin 
```

这将产生以下核心部分：

```
Rec {
$wa
$wa =
  \ ww ww1 ww2 w ->
    case ww2 of wild {
      __DEFAULT ->
        let {
          wild2
          wild2 = remInt# ww1 2 } in
        case leWord# (int2Word# wild2) (__word 1114111) of _ { 
          False -> (lvl2 wild2) `cast` ...;                                                                                   
          True ->
            case writeWord8OffAddr#
                   ww 0 (narrow8Word# (int2Word# (ord# (chr# wild2)))) w
            of s2 { __DEFAULT ->
            $wa (plusAddr# ww 1) (quotInt# ww1 2) (+# wild 1) s2
            }   
        };  
      6 -> (# w, (lvl, lvl1, Just (I# ww1)) #)
    }   
end Rec } 
```

请注意`ord . chr == id`，因此这里有一个冗余操作：`narrow8Word# (int2Word# (ord# (chr# wild2)))`

GHC 是否有理由从 Int -> Char -> Int 进行不必要的转换，或者这是代码生成不佳的一个例子？这可以优化吗？

编辑：这是使用 GHC 7.4.2，我没有尝试使用任何其他版本进行编译。此后我发现问题仍然存在于 GHC 7.6.2 中，但冗余操作已在 github 上的当前 HEAD 分支中删除。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T18:51:01.297

> GHC 是否有不必要地从 转换的原因`Int -> Char -> Int`，或者这是代码生成不佳的一个例子？这可以优化吗？

不是真的（对两者）。你从中得到的核心`-ddump-simpl`不是终点。之后在汇编代码的路上还有一些优化和转换。但在这里删除多余的转换实际上并不是一种优化。

它们可以并且已经在核心和组件之间被移除。关键是这些primops - 除了缩小之外 - 是no-ops，它们只存在于核心中，因为它是输入的。由于它们是无操作的，因此核心中是否存在它们的冗余链并不重要。

7.6.1 从代码中生成的程序集[它比 7.4.2 生成的更易读，所以我接受它] - 用`ord`而不是`to6BitASCII`- 是

```
ASCII.$wa_info:
_cXT:
    addq $64,%r12
    cmpq 144(%r13),%r12
    ja _cXX
    movq %rdi,%rcx
    cmpq $6,%rdi
    jne _cXZ
    movq $GHC.Types.I#_con_info,-56(%r12)
    movq %rsi,-48(%r12)
    movq $Data.Maybe.Just_con_info,-40(%r12)
    leaq -55(%r12),%rax
    movq %rax,-32(%r12)
    movq $(,,)_con_info,-24(%r12)
    movq $lvl1_rVq_closure+1,-16(%r12)
    movq $lvl_rVp_closure+1,-8(%r12)
    leaq -38(%r12),%rax
    movq %rax,0(%r12)
    leaq -23(%r12),%rbx
    jmp *0(%rbp)
_cXX:
    movq $64,192(%r13)
_cXV:
    movl $ASCII.$wa_closure,%ebx
    jmp *-8(%r13)
_cXZ:
    movl $2,%ebx
    movq %rsi,%rax
    cqto
    idivq %rbx
    movq %rax,%rsi
    cmpq $1114111,%rdx
    jbe _cY2
    movq %rdx,%r14
    addq $-64,%r12
    jmp GHC.Char.chr2_info
_cY2:
    movb %dl,(%r14)
    incq %r14
    leaq 1(%rcx),%rdi
    addq $-64,%r12
    jmp ASCII.$wa_info
    .size ASCII.$wa_info, .-ASCII.$wa_info 
```

`narrow8Word# (int2Word# (ord# (chr# wild2)))`出现在核心中的部分在`cmpq $1114111, %rdx`. 如果商没有超出范围，则代码跳转到`_cY2`不再包含此类转换的代码。一个字节被写入数组，一些指针/计数器递增，就是这样，跳回顶部。

我认为可以从中生成比 GHC 目前更好的代码，但是冗余的无操作转换已经消失了。

# node.js - 有没有办法在通过响应发送之前获取 JADE 模板的 HTML

> ID：15095904
> 
> 赞同：1
> 
> 时间：2013-02-26T17:53:09.120
> 
> 标签：node.js, express, pug

我通常做的是：

```
res.render('myJadeTemplate'); 
```

但我想在将其附加到响应之前向 html 添加另一个转换。

如何获取呈现的 HTML，然后对其进行修改并通过`res.send()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:41:17.497

如果您使用的是 Express3。还有一个额外的（和可选的）参数[`res.render()`](http://expressjs.com/api.html#res.render)是一个回调，它将为您提供呈现的 HTML，而不是直接将其发送到客户端。

```
res.render('myJadeTemplate', function (err, html) {
    // html => rendered HTML from jade template
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:02:13.810

好的，我找到了解决方案：

```
 var jade = require('jade');
var fs = require('fs');

var jadetemplate = jade.compile(fs.readFileSync('code.jade', 'utf8'));

var html = jadetemplate({
 params:"{Some parames}"
});

console.log(html); 
```

感谢这个线程 [节点说翡翠没有方法“renderFile”，为什么？](https://stackoverflow.com/questions/7292477/node-says-jade-has-no-method-renderfile-why)

# ios - 没有进入的for循环

> ID：15095907
> 
> 赞同：0
> 
> 时间：2013-02-26T17:53:19.197
> 
> 标签：ios, objective-c

所以我在一个函数中得到了这个for循环，但它永远不会被输入，

```
 for (Window *window in _app.windows) {
                        NSLog(@"test.");

    } 
```

我是初学者，所以我从哪里开始调试它并查看它哪里出错了？

**编辑** 这是在另一个班级

（它在我的 ViewController 中调用的函数 (loadApp) 中，如下所示： self.app = [MyClass loadApp]; ，上面的代码也在我的 ViewController 中。

```
 Window *window = [[Window alloc] initWithName:title subtitle:subtitle number:number ident:ident type:type chapternumber:chapternumber icon:icon text:text img:img question:question answerFormat:answerFormat answerLength:answerLength tip1:tip1 tip2:tip2 tip3:tip3 tip1Answer:tip1Answer tip2Answer:tip2Answer tip3Answer:tip3Answer];

    [app.windows addObject:window];

}

return app; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:59:47.097

尝试以下

```
if(!_app)  {
  NSLog(@"app is nil");
}
else if(!_app.windows) {
  NSLog(@"windows is nil");
}
else  {
  NSLog(@"there are %d windows", [_app.windows count]);
} 
```

我怀疑你会看到有 0 个窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:54:32.797

你必须确保你访问的是同一个变量。这就是您获得的所有其他评论和答案的要点。它需要像这样设置。请记住，您的应用程序可能不会完全像这样设置。这只是要遵循的一般结构：

```
//myViewController.h
#import "WindowClass.h"
#import "AppClass.h"
@property (strong, nonatomic) AppClass *app;

//myViewController.m
#import "myViewController.h"
@synthesize app;

(id)init....{
   //...init code here
   //Synthesized objects must be initialized before they are accessed!
   self.app = [[AppClass alloc] init];
   return self;
}
(void)loadApp {
   WindowClass *aWindow = [[WindowClass alloc] init];
   [self.app.windowArray addObject:aWindow];
   return;
}
(void)loopFunction {
   for (WindowClass *window in self.app.windowArray) {
      NSLog(@"test.");
   }
   return;
}

//AppClass.h
@property (strong, nonatomic) NSArray *windowArray;

//AppClass.m
#import "AppClass.h"
@synthesize windowArray; 
```

# opengl - 在 OpenGL GLSL 中从 RGB 到 HSV

> ID：15095909
> 
> 赞同：32
> 
> 时间：2013-02-26T17:53:21.070
> 
> 标签：opengl, glsl, rgb, hsv

我需要从 RGB 颜色空间传递到 HSV .. 我在互联网上搜索并找到了两种不同的实现，但它们给了我不同的结果：

A：

```
precision mediump float;
 vec3 rgb2hsv(float r, float g, float b) {

     float h = 0.0;
     float s = 0.0;
     float v = 0.0;

     float min = min( min(r, g), b );
     float max = max( max(r, g), b );
     v = max;               // v

     float delta = max - min;

     if( max != 0.0 )
         s = delta / max;       // s
     else {
         // r = g = b = 0       // s = 0, v is undefined
         s = 0.0;
         h = -1.0;
         return vec3(h, s, v);
     }
     if( r == max )
         h = ( g - b ) / delta;     // between yellow & magenta
     else if( g == max )
         h = 2.0 + ( b - r ) / delta;   // between cyan & yellow
     else
         h = 4.0 + ( r - g ) / delta;   // between magenta & cyan

     h = h * 60.0;              // degrees

     if( h < 0.0 )
         h += 360.0;

     return vec3(h, s, v);
 } 
```

乙：

```
 precision mediump float;
 vec3 rgb2hsv(float r, float g, float b) {

     float K = 0.0;
     float tmp;

     if (g < b)
     {
         tmp = g;
         g=b;
         b=tmp;

         K = -1.0;
     }

     if (r < g)
     {
         tmp = r;
         r=g;
         g=tmp;

         K = -2.9 / 6.9 - K;
     }

     float chroma = r - min(g, b);

     float h = abs(K + (g - b) / (6.0 * chroma + 1e-20));
     float s = chroma / (r + 1e-20);
     float v = r;

     return vec3(h, s, v);
 } 
```

你知道哪个是正确的实现吗？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-07-27T11:27:46.283

我是第二个实现的作者。它对我来说一直表现正确，但你写`2.9 / 6.9`的不是`2.0 / 6.0`.

由于您以 GLSL 为目标，因此您应该使用为 GPU 编写的转换例程：

```
// All components are in the range [0…1], including hue.
vec3 rgb2hsv(vec3 c)
{
    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

    float d = q.x - min(q.w, q.y);
    float e = 1.0e-10;
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);
} 
```

```
// All components are in the range [0…1], including hue.
vec3 hsv2rgb(vec3 c)
{
    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
} 
```

取自[http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl](http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl)。

**编辑：代码在**[WTFPL](https://en.wikipedia.org/wiki/WTFPL)下获得许可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:44:52.563

我没有要检查的开发环境，但您可以使用 wolframAlpha 来构建一些断言。

[例如：](http://www.wolframalpha.com/input/?i=RGB%201,%200,%200.00) rgb(1,0,0)(纯红色) 到 hsv 在 hsv 中是 0, 100%, 100%。

# javascript - JQGrid - 在网格之间复制选定的行

> ID：15095911
> 
> 赞同：0
> 
> 时间：2013-02-26T17:53:22.790
> 
> 标签：javascript, jquery, jqgrid

我有两个网格，允许用户在它们之间复制行。对于小型数据集，没问题，但对于大型数据集（5-10000），我注意到 JQGrid 非常慢。这就是我现在所拥有的：

```
 $('#imgRightArrow').click(function ()
{
    var fromGrid = $('#fromGrid');
    var toGrid = $('#toGrid');
    var rowKeys = fromGrid.getGridParam('selarrrow');
    var j = rowKeys.length - 1;
    if (j >= 0) $('body').addClass('loading');

    (function ()
    {
        for (; j >= 0; j--)                        // - high to low to avoid id reordering
        {
            var row = fromGrid.jqGrid('getRowData', rowKeys[j]);
            toGrid.addRowData('gtp_' + rowKeys[j], row); // - add prefix to keep rowid's unique between grids
            fromGrid.delRowData(rowKeys[j]);

            if (j % 100 === 0)
            {
                $('#fromGridHeader').text(fromGrid.jqGrid('getGridParam', 'records') + ' Cards on this Order');
                $('#toGridHeader').text(toGrid.jqGrid('getGridParam', 'records') + ' Cards to be Dispatched');

                if (j === 0)        // - done
                    $('body').removeClass('loading');
                else
                {
                    j--;
                    window.setTimeout(arguments.callee); // - set a timer for the next iteration 
                    break;
                }
            }
        }
    })();
}); 
```

它太慢了，我不得不使用 kludge 来防止浏览器超时。

我试过这样的事情：

```
$('#imgRightArrow').click(function ()
{
    var fromGrid = $('#fromGrid');
    var toGrid = $('#toGrid');

    var copyData = toGrid.jqGrid('getRowData'); // - existing data
    var rowKeys = fromGrid.getGridParam('selarrrow');

    var j = rowKeys.length - 1;
    if (j >= 0) $('body').addClass('loading');

    (function ()
    {
        for (; j >= 0; j--)
        {
            copyData.push(fromGrid.jqGrid('getRowData', rowKeys[j]));
            fromGrid.jqGrid('delRowData', rowKeys[j]);

            if (j % 100 === 0)
            {
                if (j === 0)
                {
                    fromGrid[0].refreshIndex();
                    toGrid.jqGrid('clearGridData', true);
                    toGrid.setGridParam({ data: copyData });
                    toGrid[0].refreshIndex();
                    toGrid.trigger('reloadGrid');

                    $('#fromGridHeader').text(fromGrid.jqGrid('getGridParam', 'records') + ' Cards on this Order');
                    $('#toGridHeader').text(toGrid.jqGrid('getGridParam', 'records') + ' Cards to be Dispatched');
                    $('body').removeClass('loading');
                }
                else
                {
                    j--; // - manually decrement since we break
                    window.setTimeout(arguments.callee); // - set a timer for the next iteration 
                    break;
                }
            }
        }
    })();
}); 
```

...似乎更快，但从 fromGrid 中删除行仍然使用 delRowData，这非常慢。

关于如何有效地为大型数据集完成此任务的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:35:16.480

当涉及数千行时，任何客户端操作都会非常缓慢。加速它的最佳方法是在服务器端进行操作。例如，您可以将 ID 作为 AJAX 请求的一部分传递给服务器，然后在收到服务器响应时刷新网格。

或者，用户是否真的选择了 5000 行进行复制，或者他们只是尝试进行批量操作，例如“全部复制”？也许您可以实现这样的功能来改善整体体验，并消除将任何 ID 传递给 AJAX 请求的需要。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T09:24:56.260

通过按 ctrl+c 我们可以使用以下方法复制和粘贴选定的行，

```
 $(document).ready(function () {

$('#gvMygrid').keyup(function (e) {
    var crtlpressed = false;
    var celValue = "";
    var celValue1 = "";
    var celValue2 = "";
    if (e.keyCode == 17) {
        crtlpressed = true;
    }
    if (e.keyCode == 67 && e.ctrlKey == true) {
        var myGrid = $('#gvMygrid');
        var my_array = new Array;
        my_array = $("#gvMygrid").getGridParam('selarrrow');

         for (var i = 0; i < my_array.length; i++) {

            var rowInfo = $("#gvMygrid").getRowData(my_array[i]);
            if (rowInfo != null)
                var data = JSON.stringify(rowInfo);
            var splitData = data.split('","');

         for (var j = 1; j < splitData.length; j++) {
                celValue1 = celValue1 + splitData[j].split(":")[1] + "      ";
            }
            celValue1 = celValue1 + '\r\n';
        }
        celValue2 = celValue1.replace(/"/g, '');
        celValue = celValue2.replace(/}/g, '');
        crtlpressed = false;
        copyToClipboard(celValue);
    }
    function copyToClipboard(s) {
        if (window.clipboardData && clipboardData.setData) {
            window.clipboardData.clearData("Text");
            clipboardData.setData("Text", s);
        }
    }

});  }); 
```

我们在 for 循环中用四个空格分割数据，这样我们就可以得到每个单元格的四个空格数据。

# git - Git - 如何撤消意外合并并改为创建分支

> ID：15095913
> 
> 赞同：-3
> 
> 时间：2013-02-26T17:53:32.093
> 
> 标签：git, version-control

我是 Git 的超级新手，我确实是这样的：

![Git历史 - 合并](../Images/f91ccdfd54dd83cda993d7c58e9f05bb.png)

我现在该如何解决我标记的这个烂摊子？我只是想创建一个新分支并在那里添加一个文件，但我合并了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:16:38.830

您必须执行的命令是`git merge [branchname]`.

您需要执行的命令是`git checkout -b [new_branchname] && git add [files...] && git commit`.

要撤消合并，请使用`git reset HEAD^`（仅一次） - 您可能需要使用`--hard`.

如果这不是你的意思，请澄清你的问题。

# javascript - JavaScript中的方向0和360有什么区别？

> ID：15095918
> 
> 赞同：0
> 
> 时间：2013-02-26T17:53:49.927
> 
> 标签：javascript

在尝试使用 JavaScript window.orientation 时，我发现了一些对 window.orientation == 360 的引用，并且想知道 window.orientation == 0 和 window.orientation == 360 之间到底有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:54:25.877

完全没有区别。

转了一圈，到了360，又回到了起点，所以角度变成0了，可以再走，720又变成0了……

它与 相同`window.orientation == 2160`。

# sql - 插入没有交叉部分的表格

> ID：15095919
> 
> 赞同：0
> 
> 时间：2013-02-26T17:53:58.537
> 
> 标签：sql, intersection

如果我有两个 SQL 表，table_a 和 table_b，它们都是相同的，除了它们可能包含不同的数据，我想将 table_b 中 table_a 中不存在的所有行插入到 table_b 中，查询应该如何？这些表仅包含 id1 和 id2 列。如果我的问题不清楚，请告诉我

```
Insert into table_a ... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:02:24.947

```
Insert into table_a ( id1, id2 ) 
select b.id1, b.id2
from table_b b
left outer join table_a a on a.id1 = b.id1 and a.id2 = b.id2
where a.id1 is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:59:39.437

您可以使用`EXCEPT`运算符：

```
INSERT INTO table_a (id1, id2)
SELECT id1, id2
FROM (
  SELECT id1, id2
  FROM table_b

  EXCEPT

  SELECT id1, id2
  FROM table_a
) except_gry 
```

SQL Fiddle 演示[在这里](http://sqlfiddle.com/#!3/848c3/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:58:26.253

```
; with cte_left as
(
select id1+id2
from table_a
where id1+id2 not in (select id1+id2 from table_b)
)

insert into table_b
select * from cte_left 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:36:43.633

您可以在查询中使用不存在：

```
insert into table_a(id1,id2)
select id1,id2 
from table_b 
where not exists(select id1,id2 from table_a) 
```

# javascript - Javascript - Array.prototype.slice.call 导致性能问题

> ID：15095923
> 
> 赞同：0
> 
> 时间：2013-02-26T17:54:11.353
> 
> 标签：javascript, performance

`prototype.slice.call( array, 0 )`在其中一个 Jquery 文件中。页面基本上带来了一种父子类型的搜索结果。当用户单击与父级相邻的链接以查看其下的子级列表时，将执行此脚本。

我们面临的问题是，在执行此脚本时，浏览器会抱怨“此浏览器上的脚本导致它运行缓慢”，它指向此脚本和以下行：

```
array = Array.prototype.slice.call( array, 0 ); 
```

请让我知道是否有任何替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:57:28.137

如果要将 jQuery 集转换为数组，则应使用提供的[get](http://api.jquery.com/get/)函数：

```
array = array.get(); 
```

请注意，内部 jQuery 使用`slice`没有`0`索引。相当于

```
array = [].slice.call(array); 
```

# android - 如何在 Android 上进行直播

> ID：15095926
> 
> 赞同：0
> 
> 时间：2013-02-26T17:54:20.493
> 
> 标签：android, shoutcast

有没有办法在安卓上播放直播？我的广播 ip：188.247.86.66 端口 8002

有人可以给我一个应用程序的代码以进行流式直播吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:40:46.700

这只能在 Android 2.2 及更高版本中实现。您可以本地流式传输到直播。

# css - 纯 CSS 折叠/展开 div

> ID：15095933
> 
> 赞同：109
> 
> 时间：2013-02-26T17:54:37.473
> 
> 标签：css, collapsable

我有一个纯 CSS 可折叠 div，它基于使用`:target`psuedoclass 的其他人的代码。我要设置的是一个包含 12 个以上问题的页面，当您单击 + 按钮时，答案 div 会在下方展开。如果不编写大量额外的 CSS，我无法弄清楚如何在此页面上制作多个折叠 div 元素。任何人都对如何编写此代码有建议，以便最小化我的 CSS 代码？（即，所以我不必为 12+ 个问题中的每一个都输入一堆独特的选择器）。

我不能使用 Javascript，因为这是在不允许 JS 的 wordpress.com 网站上进行的。

这是我的 jfiddle：http: [//jsfiddle.net/dmarvs/94ukA/4/](http://jsfiddle.net/dmarvs/94ukA/4/)

```
<div class="FAQ">
    <a href="#hide1" class="hide" id="hide1">+</a>
    <a href="#show1" class="show" id="show1">-</a>
    <div class="question"> Question Question Question Question Question Question Question Question Question Question Question? </div>
        <div class="list">
            <p>Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer </p>
        </div>
</div> 
```

```
/* source: http://www.ehow.com/how_12214447_make-collapsing-lists-java.html */

.FAQ { 
    vertical-align: top; 
    height:auto !important; 
}
.list {
    display:none; 
    height:auto;
    margin:0;
    float: left;
}
.show {
    display: none; 
}
.hide:target + .show {
    display: inline; 
}
.hide:target {
    display: none; 
}
.hide:target ~ .list {
    display:inline; 
}

/*style the (+) and (-) */
.hide, .show {
    width: 30px;
    height: 30px;
    border-radius: 30px;
    font-size: 20px;
    color: #fff;
    text-shadow: 0 1px 0 #666;
    text-align: center;
    text-decoration: none;
    box-shadow: 1px 1px 2px #000;
    background: #cccbbb;
    opacity: .95;
    margin-right: 0;
    float: left;
    margin-bottom: 25px;
}

.hide:hover, .show:hover {
    color: #eee;
    text-shadow: 0 0 1px #666;
    text-decoration: none;
    box-shadow: 0 0 4px #222 inset;
    opacity: 1;
    margin-bottom: 25px;
}

.list p{
    height:auto;
    margin:0;
}
.question {
    float: left;
    height: auto;
    width: 90%;
    line-height: 20px;
    padding-left: 20px;
    margin-bottom: 25px;
    font-style: italic;
} 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-01T11:12:01.300

根据您希望支持的浏览器/设备，或者您准备为不兼容的浏览器提供的内容，您可能需要查看`<summary>`和`<detail>`标签。他们正是为了这个目的。完全不需要 css，因为折叠和显示是标签定义/格式的一部分。

我在[这里](http://jsfiddle.net/thurstanh/emtAm/2/)做了一个例子：

```
<details>
<summary>This is what you want to show before expanding</summary>
<p>This is where you put the details that are shown once expanded</p>
</details> 
```

[浏览器支持各不相同。](http://caniuse.com/#feat=details)在 webkit 中尝试以获得最佳效果。其他浏览器可能默认显示所有解决方案。您也许可以回退到上述隐藏/显示方法。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-08-19T13:35:04.990

# 使用`<summary>`和`<details>`

使用`<summary>`和`<details>`元素是最简单的，但请查看[浏览器支持](http://caniuse.com/#feat=details)，因为当前的 IE 不支持它。您可以使用[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#new-tag)（大多数是基于 jQuery 的）。请注意，不受支持的浏览器当然只会显示扩展版本，因此在某些情况下可能是可以接受的。

```
/* Optional styling */
summary::-webkit-details-marker {
  color: blue;
}
summary:focus {
  outline-style: none;
}
```

```
<details>
  <summary>Summary, caption, or legend for the content</summary>
  Content goes here.
</details>
```

另请参阅[如何设置`<details>`元素样式（HTML5 Doctor）](https://html5doctor.com/the-details-and-summary-elements/#styling)（有点棘手）。

# 纯 CSS3

选择`:target`器有很好的[浏览器支持](http://caniuse.com/#feat=css-sel3)，它可以用来在框架内制作**单个可折叠元素。**

```
.details,
.show,
.hide:target {
  display: none;
}
.hide:target + .show,
.hide:target ~ .details {
  display: block;
}
```

```
<div>
  <a id="hide1" href="#hide1" class="hide">+ Summary goes here</a>
  <a id="show1" href="#show1" class="show">- Summary goes here</a>
  <div class="details">
    Content goes here.
  </div>
</div>
<div>
  <a id="hide2" href="#hide2" class="hide">+ Summary goes here</a>
  <a id="show2" href="#show2" class="show">- Summary goes here</a>
  <div class="details">
    Content goes here.
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-08-11T20:39:27.883

[@gbtimmon 的答案](https://stackoverflow.com/a/15096324/3303195)很棒，但是太复杂了。我已经尽可能地简化了他的代码。

```
#answer,
#show,
#hide:target {
    display: none; 
}

#hide:target + #show,
#hide:target ~ #answer {
    display: inherit; 
}
```

```
<a href="#hide" id="hide">Show</a>
<a href="#/" id="show">Hide</a>
<div id="answer"><p>Answer</p></div>
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-02-26T18:16:30.940

您只需要迭代两个链接中的锚点。

```
<a href="#hide2" class="hide" id="hide2">+</a>
<a href="#show2" class="show" id="show2">-</a> 
```

看到这个 jsfiddle [http://jsfiddle.net/eJX8z/](http://jsfiddle.net/eJX8z/)

我还在常见问题解答电话中添加了一些空白以改进格式。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-02-26T18:20:11.580

或者一个几乎没有任何 CSS 的超级简单版本 :)

```
<style>   
.faq ul li {
    display:block;
    float:left;
    padding:5px;
}

.faq ul li div {
    display:none;
}

.faq ul li div:target {
    display:block;
}

</style>

<div class="faq">
   <ul>
   <li><a href="#question1">Question 1</a>   
   <div id="question1">Answer 1 </div>
   </li>

   <li><a href="#question2">Question 2</a>
   <div id="question2">Answer 2 </div>
   </li>
   <li><a href="#question3">Question 3</a>
   <div id="question3">Answer 3 </div>
   </li>
   <li><a href="#question4">Question 4</a>
   <div id="question4">Answer 4 </div>
   </li>
   <li><a href="#question5">Question 5</a>
   <div id="question5">Answer 5 </div>
   </li>
   <li><a href="#question6">Question 6</a>
   <div id="question6">Answer 6 </div>
   </li>
   </ul>  
</div> 
```

[http://jsfiddle.net/ionko22/4sKD3/](http://jsfiddle.net/ionko22/4sKD3/)

# java - 将图像保存到 .jpg 文件：Java

> ID：15095934
> 
> 赞同：1
> 
> 时间：2013-02-26T17:54:37.657
> 
> 标签：java

我将 jFreeChart 保存到 jpeg 文件的方式是：

```
JFreeChart chart = ChartFactory.createXYLineChart(
"Hysteresis Plot", // chart title
"Pounds(lb)", // domain axis label
"Movement(inch)", // range axis label
dataset, // data
PlotOrientation.VERTICAL, // orientation
false, // include legend
true, // tooltips
false // urls
); 
```

然后：

```
 image=chart.createBufferedImage( 300, 200); 
```

图像显示为： ![在此处输入图像描述](../Images/7fa2d4050818db86e18c1dc80c5a7bb7.png)

我的保存功能是：

```
public static void saveToFile(BufferedImage img)
    throws FileNotFoundException, IOException
    {
        FileOutputStream fos = new FileOutputStream("D:/Sample.jpg");
        JPEGImageEncoder encoder2 =
        JPEGCodec.createJPEGEncoder(fos);
        JPEGEncodeParam param2 =
        encoder2.getDefaultJPEGEncodeParam(img);
        param2.setQuality((float) 200, true);
        encoder2.encode(img,param2);
        fos.close();
    } 
```

我称它为：

```
try{
            saveToFile(image);
           }catch(Exception e){
           e.printStackTrace();
         } 
```

保存的图像显示为：

![在此处输入图像描述](../Images/c8eb93b1e0ff5827180d49ab617ceeea.png)

任何建议，我错的地方或如何以它的显示方式保存它，或者我可能需要另存为.png。谁能告诉我如何保存为.png？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:13:24.180

一个简单的解决方案：

```
public static void saveToFile(BufferedImage img)
    throws FileNotFoundException, IOException
    {

        File outputfile = new File("D:\\Sample.png");
    ImageIO.write(img, "png", outputfile);
    } 
```

保存图像，它的显示方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T17:52:51.977

我宁愿建议不要使用 ImageIo.write 来保存图像，而最好使用以下函数：

```
ChartUtilities.saveChartAsJPEG("name of your file", jfreechart, lenght, width); 
```

因为这样您就可以管理图片的大小，还可以保存没有过滤器的图片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T15:30:06.650

这是一个很好的例子，说明如何做到这一点。

```
File imageFile = new File("C:\\LineChart.png");
int width = 640;
int height = 480;
try {
    ChartUtilities.saveChartAsPNG(imageFile, chart, width, height);
} catch (IOException ex) {
    System.err.println(ex);
} 
```

# gcc - 用于连接微控制器和 AT 调制解调器的 C 库

> ID：15095935
> 
> 赞同：3
> 
> 时间：2013-02-26T17:54:41.297
> 
> 标签：gcc, embedded, microcontroller, modem, uart

我正在开发一些嵌入式系统，我使用低端的uC，即Atmega128。我的系统还包括调制解调器，通过 AT 命令驱动。我试图寻找任何合适的 C 库（用于 GCC），但找不到。尽管我知道将“所有”可能的 AT 命令集放入 uC 内存中，因此拥有“通用”库是不合理的（整个操作我只需要大约 30 个命令），我只需要获得一些合适的（即**轻量级，强大**的) 控制机制，用于在 uC 中处理发送和接收的 UART 字符串。有人知道任何经过验证的库或功能吗？或者也许有人可以指出我一些好的资源/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T09:14:30.840

我希望您可以将它用于 GSM 或 GPRS 调制解调器接口，假设您没有指定应用程序。

*简介：GSM、GPRS调制解调器也使用AT命令接口与外部控制器通信。*

在此处查看详细说明：

[Microchip AN1373 - 使用 PIC32 MCU 开发 GSM/GPRS/GPS 解决方案](http://ww1.microchip.com/downloads/en/DeviceDoc/01373A.pdf)

```
void UART_Buf(void)
{
        ch=SCI2D;
        if(rx_buffer[2] == 'O' && rx_buffer[3] =='K')
        {   
          rx_buffer[5] = '\0';
          msgindex=2;    // code for OK
          rx_wr_i=0;    
        }
        if(rx_buffer[2] == 'B' && rx_buffer[3] =='U' && rx_buffer[4] == 'S' && rx_buffer[5] =='Y')
        {   
          msgindex=3;    // Code for Busy
          rx_wr_i=0;    
        }

        if(rx_buffer[2] == 'N' && rx_buffer[3] =='O' && rx_buffer[4] == ' ' && rx_buffer[5] =='C' && rx_buffer[6] =='A' && rx_buffer[7] =='R'&& rx_buffer[8] =='R' && rx_buffer[9] =='I' && rx_buffer[10] =='E' && rx_buffer[11] =='R')
        {   
          msgindex=3;    // Code for  No Carrier
          rx_wr_i=0;    
        }
        if(rx_buffer[2] == 'E' && rx_buffer[3] =='R' && rx_buffer[4] == 'R' && rx_buffer[5] =='O' && rx_buffer[6] =='R' )
        {   
          msgindex=4;    // Code for Error
            rx_wr_i=0;  
        } 
         if(rx_buffer[2]=='+' && rx_buffer[3]=='C' && rx_buffer[4] == 'M' && rx_buffer[5] =='S' )
        {   
          msgindex=3;
        } 
         if(rx_buffer[2]=='+' && rx_buffer[3]=='C' && rx_buffer[4] == 'M' && rx_buffer[5] =='E' )
        {   
          msgindex=3;
        }     
        if(rx_buffer[2]=='+' && rx_buffer[3]=='C' && rx_buffer[4] == 'M' && rx_buffer[5] =='G' && rx_buffer[6]== 'R')
        {   
          msgindex=6;
        }

        if(rx_buffer[2]=='E' && rx_buffer[3]=='R' && rx_buffer[4] == 'R' && rx_buffer[5] =='O' && rx_buffer[6] == 'R')
        {   
          msgindex=3;
        } 

        if(rx_buffer[2]=='+' && rx_buffer[3]=='C' && rx_buffer[4] == 'S' && rx_buffer[5] =='Q' )
        {
          msgindex=7;
        }

        if(rx_buffer[2]=='+' && rx_buffer[3]=='C' && rx_buffer[4] == 'O' && rx_buffer[5] =='L'&& rx_buffer[6] =='P' )
        {
         msgindex=8;
        }
        if(ch == '\r')
          linefeed++;
} 
```

在 ISR 中

```
__interrupt void isrVsci2rx(void)
{
      SCI2S1_RDRF = 0;
      rx_buffer[rx_ack++]= SCI2D;
      if(rx_ack>RX_BUFFER_MASK)
        rx_ack=0;
      UART_Buf();
      rx_length++;

} 
```

检查***msgindex***和***linefeed***以了解收到的响应。

# javascript - 使用 Backbone 0.9.10 创建简单的 Backbone 模型时出错

> ID：15095936
> 
> 赞同：0
> 
> 时间：2013-02-26T17:54:42.570
> 
> 标签：javascript, backbone.js

我正在尝试创建一个非常简单的主干模型，但一直出现错误。

```
<script src="/dugoutServices/js/jquery-1.4.2.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"</script>
<script src="/dugoutServices/js/backbone.js"></script>

<script type="text/javascript">
var Team = Backbone.Model.extend({});
</script> 
```

这会引发以下错误：

TypeError: 'undefined' 不是函数（评估'_.has(protoProps, 'constructor')'）

Backbone 文档说这个函数正在查看构造函数属性是否被覆盖，如果没有，它使用默认的父构造函数。由于某种原因，在搜索此构造函数属性时出现问题。

我尝试添加一个 initialize() 方法，但没有奏效。这个简单的代码在使用 Backbone 0.3.3 时有效。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:09:42.953

你使用的版本好像`underscore`没有这个`_.has`方法。如果您更新下划线版本，它应该可以正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:09:52.597

改变

```
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"</script> 
```

到

```
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script> 
```

你缺少一个`>`.

# iphone - 如果我在代码中创建了一个对象，我可以稍后引用它来进行更改吗？

> ID：15095939
> 
> 赞同：-1
> 
> 时间：2013-02-26T17:54:49.603
> 
> 标签：iphone, ios, objective-c, ipad

我希望在代码中而不是在界面构建器中构建尽可能多的新应用程序，因为其中大部分将涉及制作多个重复视图。然而，我希望能够回到我正在制作的许多对象，以便稍后与它们进行交互。

是否需要在我的 .h 文件中创建所有这些对象，然后在我的 .m 中进行设置，或者我可以仅在需要时构建它们吗？如果我只在需要时创建对象，对记忆不是更好吗？

例如，我可以用一种方法制作 UIView，如下所示：

```
-(void)makeViewOne {
UIView *viewOne = [[UIView alloc] init];
viewOne.frame = CGRectMake(0,0,50,50);
viewOne.backgroundColor = [UIColor whiteColor];
[mainView addSubview:viewOne];
}

-(void)changeViewOneBackgroundColor {
viewOne.backgroundColor = [UIColor grayColor];
} 
```

但是在第二种方法中，我如何能够重新参考这个观点？我还想构建并参考诸如 UITextFields、UILabels、UIButtons 等内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:13:12.707

有多种方法可以实现这一点，这只是我通常使用的其中一种：

注意：此示例使用内部属性来保存对您的视图的引用。*HotLicks*和*tom*在您的评论中提到了这方面的关键教训，您可以使用 ivars 和属性（除其他外）：

***我的视图控制器.m***

```
@interface MyViewController()
@property (nonatomic, retain) UIView *viewOne;
@end

@implementation MyViewController
@synthesize viewOne;
...
...
-(void)makeViewOne 
{
    self.viewOne = [[[UIView alloc] init] autorelease];
    self.viewOne.frame = CGRectMake(0,0,50,50);
    self.viewOne.backgroundColor = [UIColor whiteColor];
    [mainView addSubview:self.viewOne];
}
-(void)changeViewOneBackgroundColor 
{
    self.viewOne.backgroundColor = [UIColor grayColor];
}
/*
 Bonus!
*/
-(void)removeViewOne 
{
    [self.viewOne removeFromSuperview];
}
...
...
@end 
```

**编辑**

需要明确的是，重点是在某处保存对您的视图的引用。在评论中，您提到您可能有多个对象，或者可能没有，具体取决于您的情况。这不会改变任何东西。但是，您可以考虑将视图存储在集合中，HotLicks 再次指出。但是，要做到这一点，您还需要在某处存储对您的集合的引用以获取其内容。因此，使用我的示例，您可能会决定创建一个 or 类型或各种其他类型的属性`NSMutableDictionary`，`NSMutableArray`然后添加您希望在其中创建的任何视图。使用 a`NSMutableDictionary`可能对您更有用，因为您可以使用键将视图存储在其中，然后使用键引用这些视图。

另一种可能性，假设您有一个参考`mainView`是设置每个视图的标签属性，或一些自定义属性。然后，您可以枚举`mainView.subviews`以获取您正在寻找的视图，以便对其进行更改。

# url - 参数错误中的挂毯“/”

> ID：15095941
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:01.443
> 
> 标签：url, tapestry

如果我在页面参数中添加斜线`/`，即使是编码形式，`%2F`我也会收到错误消息。

示例网址：

```
http://mywebsite.com/somepage?param=dfgdfg%2F 
```

错误：

```
Input string 'dfgdfg/' is not valid; the character '/' at position 7 is not valid. 
```

我正在尝试将整个 URL 作为参数传递（以便稍后将用户重定向到该 URL），因此那里有很多斜杠。

这是一个错误吗？有什么解决方法吗？

从理论上讲，我可以用其他东西替换所有斜线，`%2F`但这是在其他一切都失败后我会尝试的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:18:36.150

据我所知，这仅发生在 Jetty 上，我将其用于开发......

这个自定义服务覆盖解决了这个问题：

[http://tapestry.1045711.n5.nabble.com/Customising-T5-URL-Encoding-tp2412550p2412551.html](http://tapestry.1045711.n5.nabble.com/Customising-T5-URL-Encoding-tp2412550p2412551.html)

看起来很hacky但有效:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T15:01:08.620

请参阅[JumpStart](http://jumpstart.doublenegative.com.au/jumpstart/)页面上的[Web 服务更多](http://jumpstart.doublenegative.com.au/jumpstart/examples/ws/webservicesmore)示例。在码头上为我工作。

JumpStart 页面有许多“如何在 Tapestry 中执行此操作”示例。

# c# - 从 StreamReader C# - asp.net MVC3 到数组的文件名

> ID：15095942
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:02.380
> 
> 标签：c#, asp.net-mvc, arrays, json

我的应用程序是 MVC3 C#；我使用以下内容使用 json 填充两个下拉列表：

```
public ActionResult CheckWord(string cword)
    {
        try
        {
            List<string[]> arrayList = new List<string[]>();
            List<string[]> stateList = new List<string[]>();
            //
            List<string[]> fileList = new List<string[]>();
            //
            string[] filePaths = Directory.GetFiles(System.Web.HttpContext.Current.Server.MapPath("/Video"), "*.srt");
            string[] fnList = new string[filePaths.Length];
            for (int i = 0; i < fnList.Length; ++i)
            {
                FileInfo fi = new FileInfo(filePaths[i]);
                fnList[i] = fi.Name.Substring(0, fi.Name.LastIndexOf(".srt"));

            }
            int nFiles = filePaths.Length;
            string cacheline = "";
            string line;

            for (int i = 0; i < nFiles; ++i)
            {
                StreamReader file = new StreamReader(System.Web.HttpContext.Current.Server.MapPath("/Video/" + fnList[i] + ".srt"));

                List<string> lines = new List<string>();
                List<string> statments = new List<string>();
                //
                List<string> fnames = new List<string>();
                //
                while ((line = file.ReadLine()) != null)
                {
                    if (line.Contains(cword))
                    {
                        statments.Add(line);
                   //     fnames.Add(file);
                        lines.Add(cacheline);
                    }
                    cacheline = line;
                }
                file.Close();
                var array = lines.ToArray();
                arrayList.Add(array);
                stateList.Add(statments.ToArray());
            }

            return Json(new { success = true, fnList = fnList, arrayList = arrayList.ToArray(), stateList = stateList.ToArray() });
        }
        catch { }
        return Json(new { success = false });
    } 
```

我正在检查一组文件中是否存在一个单词；然后在一个下拉列表中显示文件的名称，并在另一个下拉列表中显示每个文件的行。它工作正常，但是它给了我所有文件的列表，因为我要发回 fnlist。但是我试图只显示包含该单词的文件；我无法从 StreamReader 获取文件名并将其添加到数组 fileList。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:59:59.560

已经有这么多名单了！为什么不是另一个？您已经在循环的上下文中打开了文件`fnList[i]`，所以......

```
List<string[]> results = new List<string[]>();
....
while ((line = file.ReadLine()) != null) {
  if (line.Contains(cword)) {
    results.Add(fnList[i]);
    break; // optional, if possible, but if you need to continue check for dupes
  }
}
....
return Json(new { 
  success = true, 
  fnList = results.ToArray(),
  arrayList = arrayList.ToArray(), 
  stateList = stateList.ToArray() 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T23:29:07.990

System.IO.StreamReader 文件 = new System.IO.StreamReader("setup.txt");

稍后，我们想打印流阅读器正在使用的文件的名称。例如，如果有错误，我想要一个显示“错误读取文件：'filename'”的消息框

```
 MessageBox.Show("Error loading " + ((FileStream)file.BaseStream).Name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:07:51.173

不确定您到底在寻找什么，但是由于您是从文件名创建 StreamReader 为什么不在单独的变量中包含文件名并稍后使用它：

```
var fileName = System.Web.HttpContext.Current.Server.MapPath(
    "/Video/" + fnList[i] + ".srt");
StreamReader file = new StreamReader(fileName); 
```

# python - 如何使用python从文本文件中检索值？

> ID：15095947
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:08.220
> 
> 标签：python, file-io, python-2.7

```
import re
sum=0
file = open("pro.txt").readlines()
for lines in file:
        word= len(re.findall('(^|[^\w\-])able#1(?=([^\w\-]|$))', lines))
        if word>0:
                sum=sum+1 
```

pro.txt

```
0         6          9     able#1
0         11         34    unable#1
9         12         22    able#1
0         6          9     able#1-able#1
0         11         34    unable#1*able#1 
```

我想获取单词的值，例如，如果用户输入句子并且它包含单词able，而不是像`9 6 0`or那样检索对它的值`0 6 9`，但是现在作为示例，我只希望如果我只关注其中的able#1 单词这个 txt 文件我如何通过它检索值，因为我只是在尝试以一种拆分它的方式而不是仅仅将队列放在上面

```
for lines in file:
    k=lines.split()
    print k

['0', '6', '9', 'able#1', 'you#1']
['0', '11', '34', 'unable#1']
['9', '12', '22', 'able#1']
['0', '6', '9', 'able#1-able#1']
['0', '11', '34', 'unable#1*able#1']
['9', '12', '22', 'able#1_able#1'] 
```

预期输出：

```
enter the word you want to find in text file : able#1
word found !!
values are
0         6          9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:02:58.833

```
for line in file:
    print line.split()[:3] 
```

您将获得每行的前三个元素，例如 ['0', '6', '9']。

如果你想按单词查找这 3 个数字，你可以先用文件的内容构建一个字典。

```
counts_by_word = dict((line[3], line[:3]) for line in file)
print counts_by_word["able#1"]
# Output: ['9', '12', '22'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:08:32.127

干得好：

```
s = "able#1"

for line in open("pro.txt").readlines():
    if s == line.split()[3].strip():
        print line.rsplit(' ',1)[0].strip() 
```

**输出**

```
>>> 
0         6          9
9         12         22 
```

* * *

如果数字之间只需要一个空格，请使用以下命令：

```
print ' '.join(line.split()[:3]) 
```

**更新**

完整代码：

```
s = raw_input("enter the word you want to find in text file : ")

f = False
for line in open("pro.txt").readlines():
    if s == line.split()[3].strip():
        if not f:
            print "word found !!"
            f = True
        print ' '.join(line.split()[:3]) 
```

**输出**

```
>>> 
enter the word you want to find in text file : able#1
word found !!
0 6 9
9 12 22
>>> 
```

# java - Java，将数据发送到不同的 IP

> ID：15095951
> 
> 赞同：3
> 
> 时间：2013-02-26T17:55:29.297
> 
> 标签：java, networking

我正在制作一个简单的聊天客户端来玩，我让服务器/客户端完美地工作并发送数据。我想知道如何将数据发送给选定的用户。选择部分我可以解决，但我不知道如何将东西发送到选定的 IP。到目前为止，这是我的服务器。

```
package Server;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

/**
 * @class Connect
 * @date Feb 25, 2013 10:14:00 PM
 * @author Zach
 */

public class Connect { //Server
    public static void main(String[] args) throws IOException {
        ServerSocket server = new ServerSocket(43595);

        while (server.isBound()) {

            Socket s = server.accept();
            DataOutputStream out = new DataOutputStream(s.getOutputStream());
            DataInputStream in = new DataInputStream(s.getInputStream());

            int length = in.read();
            byte[] data = new byte[length];
            in.read(data);
            String str = new String(data, "UTF-8");

            s.close();
        }
    }
} 
```

我想将信息从服务器重定向到特定客户端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:00:53.220

制作一个接受的套接字数组，在您的情况下从“s”套接字，然后您可以循环它以查找要将数据发送到哪个客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:09:28.037

创建一个处理每个客户端的类：

```
public class ClientHandler {

Socket connection;
DataInputStream in;
DataOutputStream out;

public ClientHandler(Socket s) {
    connection = s;
}
public void startup() throws IOException {
    in = new DataInputStream(connection.getInputStream());
    out = new DataOutputStream(connection.getOutputStream());
    out.flush();
}

public void sendMessage(byte[] message) throws IOException {
    out.write(message);
}

} 
```

在您的服务器中放置一个列表并为每个 ClientHandler 分配一个 ID，然后您可以遍历您的列表，如果 ID 匹配，请在客户端上使用 sendMessage()。

我建议您对输入和输出使用缓冲区，因为它们更有效。我还建议您在服务器类中使用线程，尤其是在处理多个客户端时。

# html - 溢出隐藏隐藏一个方向的完整图片，但不隐藏另一个

> ID：15095957
> 
> 赞同：1
> 
> 时间：2013-02-26T17:55:45.280
> 
> 标签：html, css

[这是我的代码（请参见此处](http://jsfiddle.net/bsjnq/)的小提琴）：

```
img {
    width: 200px;
    height: 200px;
}

.image-container {
    width: 600px;
    height: 200px;
    overflow: hidden;
} 
```

我有很多图像，都是 200px 的平方，在一个`image-container`. 溢出的图像被隐藏。

当我将图像向左滑动时，最左侧的图像以平滑的方式消失。

当我将图像向右滑动时，最右侧的图像*不会*以平滑的方式消失。相反，它会在一瞬间消失。

为什么左右行为之间存在差异？我怎样才能在两边都有流畅的动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:01:38.503

是因为您的图像容器不够宽，并且图像下降到下一行，但溢出隐藏了这一点。

请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/bsjnq/2/)**。

使用您当前在图像容器上拥有的 CSS 将您的图像容器包装在一个包装器中，并使您的图像容器与所有图像的组合一样宽（在我的示例中为 4000 像素）。

```
.image-container {
    width: 4000px;
    height: 200px;
}
#wrapper {
    width: 600px;
    height: 200px;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:08:18.533

我建议`white-space:nowrap`

```
 img {
    width: 200px;
    height: 200px;
}
.image-container {
    white-space:nowrap;
    height: 200px;
}
#wrapper {
    width: 600px;
    height: 200px;
    overflow: hidden;
} 
```

在此处查看演示：http: [//jsfiddle.net/pavloschris/bsjnq/3/](http://jsfiddle.net/pavloschris/bsjnq/3/)

# .net - EMDK 摩托罗拉 ES400 程序 GPS .NET

> ID：15095958
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:44.890
> 
> 标签：.net, motorola-emdk, windows-mobile-gps

我正在尝试在摩托罗拉 ES400 中激活和编程 GPS。EMDK 在 .NET 中没有任何示例可以执行此操作是否有人需要一个工作示例来执行此操作？

考虑乔纳坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:40:49.103

您可以在安装 Windows Mobile 6.5.3 标准 DTK（开发者工具包）时找到示例应用程序。您可以在以下位置找到此示例：

```
C:\Program Files\Windows Mobile 6.5.3 DTK\Samples\PocketPC\CS\GPS 
```

C#程序说明：

演示如何使用托管代码编写 C# Windows Mobile 全球定位系统 (GPS) 应用程序。此代码示例演示如何将本机 GPS API 包装在 C# 类中。它演示了如何使用“平台调用”(PInvoke) 来调用非托管 API（在本例中为 CreateProcess）。

文件夹：\PocketPC\CS\GPS

# javascript - 简单的 XMLHttpRequest 并打印 XML 数据

> ID：15095959
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:46.250
> 
> 标签：javascript, xmlhttprequest

我想将一些 xml 数据发送到服务器，然后在屏幕上打印我收到的 xml。

到目前为止，我所拥有的是：

```
<script type="text/javascript">
function authIHC() {
var req = new XMLHttpRequest();
var xml_request;
var username = "user";
var password = "password";

xml_request = "<?xml version='1.0' encoding='UTF-8'?>\n";
xml_request = xml_request + "<SOAP-ENV:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n";
xml_request = xml_request + "<SOAP-ENV:Body>\n";
xml_request = xml_request + "<ns1:authenticate1 xmlns:ns1=\"utcs\" xsi:type=\"ns1:WSAuthenticationData\">\n";
xml_request = xml_request + "<ns1:password xsi:type=\"xsd:string\">" + password + "</ns1:password>\n";
xml_request = xml_request + "<ns1:username xsi:type=\"xsd:string\">" + username + "</ns1:username>\n";
xml_request = xml_request + "<ns1:application xsi:type=\"xsd:string\">treeview</ns1:application>\n";
xml_request = xml_request + "</ns1:authenticate1>\n";
xml_request = xml_request + "</SOAP-ENV:Body>\n";
xml_request = xml_request + "</SOAP-ENV:Envelope>\n";

req.onreadystatechange=function()
  {
  if (req.readyState==4)
    {
    alert(req.statusText);
    }
    else {alert ("nothing");}
  }

req.open('PUT', 'https://10.0.0.254/ws/AuthenticationService', true);
req.setRequestHeader('Content-Type', 'text/xml');
req.send(xml_request);

}
</script> 
```

问题是我从来没有得到任何东西，它总是打印在一个盒子里：什么都没有。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:37:01.353

发布到不同的服务器意味着您正在使用相同的来源策略。查看 http 响应代码，您会发现它不是 400。

如果您控制其他域，则可以查看启用[CORs](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。只有现代浏览器支持它。

# c++ - 将文本放入运行时注册的静态控件

> ID：15095961
> 
> 赞同：0
> 
> 时间：2013-02-26T17:55:46.677
> 
> 标签：c++, winapi, static

我想在主窗口中注册一个静态控件，然后用一些文本填充它。

这是完整的代码：

```
#include <windows.h>
#include "resource.h"
#include <commctrl.h>
void RegisterCommonControls();
#pragma comment(lib, "comctl32.lib")

HINSTANCE hInstance;
HINSTANCE hPrevInstance;
int nCmdShow;

LRESULT CALLBACK MainWndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch (Msg)
    {
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
        default:
            return DefWindowProc(hWnd, Msg, wParam, lParam);
    }
}

LRESULT CALLBACK LblStateProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    return DefWindowProc(hWnd, Msg, wParam, lParam);
}

void RegisterCommonControls()
{
    INITCOMMONCONTROLSEX iccex;

    iccex.dwSize = sizeof(INITCOMMONCONTROLSEX); 
    iccex.dwICC  = ICC_TREEVIEW_CLASSES | ICC_LISTVIEW_CLASSES; 
    InitCommonControlsEx(&iccex);
}

bool RegisterWindow(void)
{
    if (hPrevInstance)
        return false;
    WNDCLASS wc;
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = MainWndProc;
    wc.cbClsExtra   = wc.cbWndExtra = 0;
    wc.hInstance = hInstance;
    wc.hIcon = LoadIcon(0, IDI_APPLICATION);
    wc.hCursor = LoadCursor(0, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_BTNFACE + 1);
    wc.lpszMenuName = MAKEINTRESOURCE(IDC_WIN_API);
    wc.lpszClassName = L"Class1";
    if (!RegisterClass(&wc))
        return false;
    return true;
}

bool RegisterEdit(void)
{
    if (hPrevInstance)
        return false;
    WNDCLASS wc;
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = LblStateProc;
    wc.cbClsExtra   = wc.cbWndExtra = 0;
    wc.hInstance = hInstance;
    wc.hIcon = wc.hCursor = NULL;
    wc.hbrBackground = (HBRUSH)(GetStockObject(WHITE_BRUSH));
    wc.lpszMenuName = NULL;
    wc.lpszClassName = L"STATIC";
    if (!RegisterClass(&wc))
        return false;
    return true;
}

int CALLBACK wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR lpCmdLine, int nCmdShow)
{
    const int size = 600;
    MSG msg;
    RegisterWindow();
    HWND hMainWnd = CreateWindow(L"Class1", L"Main Window", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, size, size, 0, 0, hPrevInstance, NULL);
    RegisterCommonControls();
    RegisterEdit();
    HWND hLblState = CreateWindow(L"STATIC", L"1", WS_CHILD | WS_VISIBLE | SS_SIMPLE | SS_OWNERDRAW, 200, 200, 100, 50, hMainWnd, 0, NULL, NULL);
    ShowWindow(hMainWnd, nCmdShow);
    UpdateWindow(hMainWnd);
    SendMessage(hLblState, WM_SETTEXT, NULL, (LPARAM)L"Rectangle");
    while(GetMessage(&msg, 0, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return 0;
} 
```

因此，我在主窗口（控件位于正确的坐标）内得到一个白色的“静态”窗口，里面没有文本（“1”和“矩形”都没有）。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:25:49.410

您正在注册一个名为“STATIC”的窗口类。这优先于内置的“STATIC”窗口类使用，因此您的窗口不会像静态控件那样运行。

要修复它，请不要注册名为“STATIC”的窗口类。将使用标准的。

# ruby-on-rails-3 - 通过 has_and_belongs_to_many 关系向具有 Cancan 和 Rolify 的用户授予访问权限

> ID：15095962
> 
> 赞同：1
> 
> 时间：2013-02-26T17:55:47.237
> 
> 标签：ruby-on-rails-3, cancan, has-and-belongs-to-many, rolify

我得到了拥有许多代理的 Partenaires 资源和拥有许多代理的用户。

我想通过 Cancan & Rolify 限制每个 Partenaire 的访问权限。

我发现这样做的唯一技巧是评估 user.agence_ids 和 partenaire.agence_ids 的数组大小，以及它是否大于或等于 1，以便用户可以访问 Partenaire。

我做了自定义操作来将我的索引视图过滤到我的 Partenaires_controller 中。

如果 Partenaire 和用户至少有一个共同的代理，是否可以授予用户访问权限？

```
class Ability
 include CanCan::Ability

 def initialize(user)
  # Define abilities for the passed in user here. For example:
  #
    user ||= User.new # guest user (not logged in)
   if user.has_role? :admin
     can :access, :rails_admin # grant access to rails_admin
     can :dashboard # grant access to the dashboard
     can :manage, :all
   elsif user.has_role? :user
     can [:index, :edit, :update, :show, :new, :create], Partenaire do |partenaire|
       (user.agence_ids & partenaire.agence_ids).size >= 1
     end
   end
 end
end 
```

Partenaires_controller.rb

```
def index
 flash[:ville] = params[:id]
 @ville = flash[:ville]
 #Permet l'affichage des partenaire sur un tri de ville
 if current_user.has_role? :user
   if params[:id] == 'ALL' || params[:id].nil?
   @partenaires = @search.includes(:agences).where(['agences.id IN (?)', current_user.agence_ids]).order(:ville, "partenaires.nom asc")
   elsif params[:id] != 'ALL' && !params[:id].nil?
   @partenaires = @search.where(:ville => params[:id]).order("ville, nom asc").where(:id => current_user.agence_ids)
   end
 elsif current_user.has_role? :admin
  if params[:id] == 'ALL' || params[:id].nil?
  @partenaires = @search.order("ville, nom asc")
  elsif params[:id] != 'ALL' && !params[:id].nil?
  @partenaires = @search.where(:ville => params[:id]).order("ville, nom asc")
  end
end 
```

用户.rb

```
class User < ActiveRecord::Base
 rolify
 has_and_belongs_to_many :agences
end 
```

代理.rb

```
class Agence < ActiveRecord::Base
 has_and_belongs_to_many :users
 has_and_belongs_to_many :partenaires 
```

Partenaire.rb

```
class Partenaire < ActiveRecord::Base
 has_and_belongs_to_many :agences 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:16:40.977

在另一个 SO 帖子上找到了解决方案。

```
 (user.agence_ids & partenaire.agence_ids).present? 
```

# javascript - 通过javascript中的正则表达式在单词边界匹配希伯来语字符？

> ID：15095964
> 
> 赞同：3
> 
> 时间：2013-02-26T17:55:54.217
> 
> 标签：javascript, regex, unicode

我可以在 JS 中匹配并突出显示这个希伯来字母：

```
var myText = $('#text').html();
var myHilite = myText.replace(/(\u05D0+)/g,"<span class='highlight'>$1</span>");
$('#text').html(myHilite); 
```

[小提琴](http://jsfiddle.net/nathanbweb/mf9Su/2/)

但无法在单词边界突出显示包含该字母的单词：

```
/(\u05D0)\b/g 
```

[小提琴](http://jsfiddle.net/nathanbweb/mf9Su/3/)

我知道 JS[不擅长使用 Unicode 的正则表达式](https://stackoverflow.com/questions/10590098/javascript-regexp-word-boundaries-unicode-characters)（首选服务器端），但我也知道我不擅长正则表达式。这是 JS 的限制还是我的语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:04:45.250

我看不懂希伯来语...这个正则表达式是否符合您的要求？

```
/(\S*[\u05D0]+\S*)/g 
```

您的第一个正则表达式`/(\u05D0+)/g`仅匹配您感兴趣的字符。

您的第二个正则表达式 ,`/(\u05D0)\b/g`仅当您感兴趣的字符是单词边界之前的最后一个（或最后一个重复的）字符时才匹配......所以这不会与开头或中间的那个字符匹配一个字。

编辑：

看看这个答案

[javascript中的utf-8字边界正则表达式](https://stackoverflow.com/questions/2881445/utf-8-word-boundary-regex-in-javascript)

使用该答案中的信息，我想出了这个正则表达式，这是正确的吗？

`/([\u05D0])(?=\s|$)/g`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T11:25:35.293

使用以下正则表达式如何使用句子中单词的所有情况：

```
/^u05D0\s|\u05D0$|\u05D0\s|^\u05D0$/ 
```

它实际上使用了 4 个带有 OR 运算符 ('|') 的正则表达式。

1.  字符串以您的确切单词开头，后跟一个空格
2.  或者你的字符串有空格+你的单词+空格
3.  或者你的字符串以空格+你的单词结尾
4.  或者您的字符串只是确切的单词。

# java - 在没有类型安全警告的情况下覆盖泛型抽象方法的返回类型

> ID：15095966
> 
> 赞同：3
> 
> 时间：2013-02-26T17:56:04.017
> 
> 标签：java, generics, abstract

在一些`SuperClass`我有一个抽象的通用方法：

```
protected abstract <T extends Foo> T getFoo(); 
```

在我的`SubClass`我尝试覆盖它：

```
@Override
protected SubFoo getFoo() {             
    return new SubFoo();
} 
```

在哪里`public class SubFoo extends Foo`

在我的子类中，`getFoo`我收到以下错误。

“类型安全：来自 SubClass 类型的 getFoo() 的返回类型 SubFoo 需要未经检查的转换以符合来自 SuperClass 类型的 T”

我的问题是：

1）有没有不安全的情况？

2）如果不是，编译器不应该能够弄清楚吗？是什么阻止编译器在编译时确定 SubFoo 是 Foo 的子类？

3）有没有办法实现这样的目标，但没有警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T17:57:50.797

是的，这是不安全和非法的。`SuperClass`您编写的声明允许*调用者*（而不是`SuperClass`子类）选择`Foo`它想要的子类型，因此您的实现`SubClass`不能正确实现它。

相反，您必须将`T`其作为通用参数`SuperClass`，而不仅仅是方法: `SuperClass<T extends Foo>`，然后`SubClass extends SuperClass<SubFoo>`。

# glassfish - InitialContext 中的 NullPointerException

> ID：15095969
> 
> 赞同：0
> 
> 时间：2013-02-26T17:56:15.750
> 
> 标签：glassfish, client, ejb, remoteobject

InitialContext 中的 NullPointerException

```
private void connect() {
 try {
    InitialContext ctx = new InitialContext();
    IServerBean serverBean = (IServerBean)ctx.
       lookup("java:global/applicationserver/ServerBean!
       com.test.applicationserver.IServerBean");
 } catch (NamingException  e) {
    logger.error(e.getMessage(), e);
   }
} 
```

尝试通过控制台执行客户端应用程序时出现此异常`java -cp cleint-0.0.1-SNAPSHOT-jar-with-dependencies.jar com.test.client.EJBClient`：

```
java.lang.NullPointerException
at com.sun.enterprise.naming.impl.SerialContext.<init>(SerialContext.java:276)
at com.sun.enterprise.naming.impl.SerialContext.<init>(SerialContext.java:335)
at com.sun.enterprise.naming.impl.SerialInitContextFactory.createInitialContext
(SerialInitContextFactory.java:358)
at com.sun.enterprise.naming.impl.SerialInitContextFactory.getInitialContext
(SerialInitContextFactory.java:353)
at com.sun.enterprise.naming.SerialInitContextFactory.getInitialContext
(SerialInitContextFactory.java:69)
at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
at javax.naming.InitialContext.init(Unknown Source)
at javax.naming.InitialContext.<init>(Unknown Source)
at com.test.client.EJBClient.connect(EJBClient.java:33)
at com.test.client.EJBClient.main(EJBClient.java:61) 
```

此应用程序连接到远程 EJB 模块。但是当我尝试在 Eclipse 中执行它时，一切都很好。我的配置：

*   Java SE 1.7
*   GlassFish Server 开源版 3.1.2.2（内部版本 5）
*   面向 Web 开发人员的 Eclipse Java EE IDE。版本：Juno Service Release 1 内部版本 ID：20121004-1855

Maven依赖：

```
<dependencies>
    <dependency>
        <groupId>com.sun</groupId>
        <artifactId>tools</artifactId>
        <version>1.4.2</version>
        <scope>system</scope>
        <systemPath>C:\Java\jdk1.7.0_11\lib\tools.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>org.glassfish.main.extras</groupId>
        <artifactId>javaee</artifactId>
        <version>3.1.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.appclient</groupId>
        <artifactId>gf-client</artifactId>
        <version>3.1.1</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T21:27:39.237

I had the same problem. Resolved : You must add gf-client.jar and appserv-rt.jar not only in classpath of your project but also in runtime (With Eclipse, See Run As > Run configurations > Classpath > Add jars ) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:28:04.020

我用这个解决方案解决了这个问题：

使用应用程序将此库添加到文件夹：

*   glassfish-embedded-all-3.1.1.jar hk2-core-1.6.9.jar
*   内部-api-3.1.2.2.jar
*   common-util-3.1.2.2.jar
*   glassfish-corba-internal-api-3.2.0-b005.jar
*   glassfish-命名-3.1.2.2.jar

在运行应用程序时，将此库添加到类路径：

`java -cp glassfish-embedded.jar;hk2-core.jar;internal-api.jar;common-util.jar;glassfish-corba-internal-api.jar;glassfish-naming.jar;cleintconsole-0.0.1-SNAPSHOT-jar-with-dependencies.jar com.test.client.EJBClient`

# java - android中的画布绘制路径

> ID：15095971
> 
> 赞同：0
> 
> 时间：2013-02-26T17:56:17.513
> 
> 标签：java, android, android-canvas

我是 android 的新手，我想制作一个简单的程序来检测触摸坐标并绘制一个圆圈和触摸路径，我制作了一个简单的程序，在触摸周围画一个圆圈并跟随它，但我仍然可以做路径的触摸。当我用路径启动程序时它崩溃，当我删除它正常工作的路径时......

```
public class MainActivity extends Activity {

    float x = 0;
    float y = 0;
    LinearLayout layout; //declarea variabilor pentru desenarea cercului

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); //specificarea 
        layout = (LinearLayout)findViewById(R.id.layout); //gasirea id 
        layout.addView(new CustomView(MainActivity.this));
    }

    public class CustomView extends View { //crearea unei mape pentru canvas
        Bitmap mBitmap;
        Paint paint;
        Path path;

        public CustomView(Context context) {
        super(context);
        mBitmap = Bitmap.createBitmap(640, 1024, Bitmap.Config.ARGB_8888);
            paint = new Paint();
            path = new Path();
            paint.setColor(Color.BLUE);//culoare cercului desenat
            paint.setStyle(Style.FILL);
        }

    protected void onDraw(Canvas canvas) {//desenarea cercului la atingere
        super.onDraw(canvas);
        canvas.drawPath(path,paint);
        canvas.drawCircle(x, y, 25, paint);
    }

    public boolean onTouchEvent(MotionEvent event) {

        int action = event.getAction();

        switch (action){
            case MotionEvent.ACTION_DOWN:
                path.moveTo(event.getX(), event.getY());
                path.lineTo(event.getX(), event.getY());
                break;
            case MotionEvent.ACTION_MOVE:
                x = event.getX();
                y = event.getY();
                path.lineTo(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                path.lineTo(event.getX(), event.getY());
                break;
            case MotionEvent.ACTION_CANCEL:
                break;
            default:
            break;
        }
        return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:33:48.763

您没有初始化`path`. 最有可能的是，您的程序因`NullPointerException`. 尝试在`CustomView`构造函数中添加它：

```
path = new Path(); 
```

将来，当您发布有关您的 Android 程序崩溃的信息时，如果您发布崩溃的 logcat 输出将是最有帮助的。

# vbscript - 数组是否可以具有不同数据类型的值

> ID：15095973
> 
> 赞同：1
> 
> 时间：2013-02-26T17:56:18.713
> 
> 标签：vbscript

一般来说，数组不会有不同数据类型的值，但是当使用 Items 方法从字典对象中提取数据时。它处理不同数据类型的数据。

谁能澄清一下，数组是否有可能具有不同数据类型的值？

```
Option Explicit

Dim D, i, Arr

Set D = CreateObject("Scripting.Dictionary")

D.CompareMode = VbTextCompare

D.Add "1", 56

D.Add "2", 78

 D.Add "3", "John"

D.Add "4", 100

Arr = D.Items

For i=0 to ubound(Arr) Step+1

Msgbox Arr(i)

Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:13:51.497

VBScript 的类型非常弱。所有变量都是变体（不同的子类型：整数、字符串、对象……）。集合可以包含所有子类型的项目；这些项目甚至可以是不同的子类型。

甚至字典的键也不必是字符串；它们也可以是对象。WRT[这个关于字典和数组](https://stackoverflow.com/a/15097463/603855)的问题，我必须补充：数组可以是项目，但不是字典的键：

```
>> Set d = CreateObject("Scripting.Dictionary")
>> d.Add "Company", Array("microsoft", "apple")
>> WScript.Echo Join(d("Company"))
>> a = d("Company") <== array assignment in VBScript COPIES!
>> a(1) = "samsung"
>> WScript.Echo Join(a)
>> WScript.Echo Join(d("Company"))
>>
microsoft apple
microsoft samsung
microsoft apple
>> d.Add a, "won't work"
>>
Error Number:       5
Error Description:  Invalid procedure call or argument 
```

需要注意的子类型是固定数组（用 定义`Dim a(ConstNumber)`）。元素是相当不受限制的，但是如果您可以将固定数组放入集合中，我会感到惊讶。

**更新（wrt 固定数组）：**

固定数组及其元素以某种特殊方式存储以提高性能。我对细节一无所知，但它是一种特殊类型的数组（不能增长）。

将某些东西放入集合中意味着：将某些东西（类型 + 值）的副本放入。如果该东西是一个简单的变量或数组，那么您将失去与原始的连接（再次考虑指出这一点，@Ansgar ）。如果某物是对象，则引用（对象）的副本仍然可以让您访问原始数据。

进入集合的固定数组的副本（好的，测试只使用字典）丢失了特殊类型：

```
Option Explicit

Dim Af(0)   : Af(0) = "fixed"
ReDim Ad(0) : Ad(0) = "dyn"
WScript.Echo 0, Af(0), Ad(0)

Dim dicX : Set dicX = CreateObject("Scripting.Dictionary")
dicX(0) = Af
dicX(1) = Ad
WScript.Echo 1, dicX(0)(0), dicX(1)(0)
Af(0)    = UCase(Af(0))
Ad(0)    = UCase(Ad(0))
WScript.Echo 2, Af(0), Ad(0)
WScript.Echo 3, dicX(0)(0), dicX(1)(0)
grow dicX(0)
grow dicX(1)
WScript.Echo 4, Join(dicX(0)), Join(dicX(1))
grow Ad
WScript.Echo 5, Join(Ad)
grow Af

Sub grow(a)
  ReDim Preserve a(Ubound(a) + 1)
  a(1) = "array"
  WScript.Echo "**", Join(a)
End Sub 
```

输出：

```
cscript doa.vbs
0 fixed dyn
1 fixed dyn
2 FIXED DYN
3 fixed dyn
** fixed array
** dyn array
4 fixed dyn
** DYN array
5 DYN array
E:\trials\SoTrials\answers\15008949\vbs\doa.vbs(23, 3) Microsoft VBScript runtime error: This array is fixed or temporarily locked 
```

该`** fixed array`行证明传递给的数组`grow`不再**固定**；它与`Af`不能生长的类型不同。

# android - 膨胀不兼容片段时出现 ClassNotFoundException

> ID：15095976
> 
> 赞同：1
> 
> 时间：2013-02-26T17:56:31.530
> 
> 标签：android, android-layout, android-fragments

由于在我看来是一个奇怪的错误，我的应用程序在启动时不断崩溃。我已经包含了下面的 logcat 以及相关的布局，但是正如您所看到的，有一个由 class not found 的 class 异常引起的膨胀异常`android.view.fragment`。我没有使用兼容性片段（该应用程序不支持 pre-ICS），所以一切都在期待`android.app.Fragment`。我能找到的所有其他帖子都建议使用`FragmentActivity`，但这不是解决方案，因为我们不使用支持库。有没有人有任何见解？

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/locations"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- Some views here -->

    <!-- The line below is line 38 referenced in the LogCat -->
    <fragment
        android:id="@+id/ad_fragment"
        android:name="tenkiv.billing.AdFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        tools:layout="@layout/ad_fragment_view" />

</RelativeLayout> 
```

和 LogCat 输出：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tenkiv.environment.application/com.tenkiv.environment.application.EnvironmentMainActivity}: android.view.InflateException: Binary XML file line #38: Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #38: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.slidingmenu.lib.SlidingMenu.setMenu(SlidingMenu.java:384)
    at com.tenkiv.environment.application.EnvironmentMainActivity.onCreate(EnvironmentMainActivity.java:335)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.fragment" on path: /data/app/com.tenkiv.environment.application-2.apk
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:59:38.370

我不确定是否尝试给出这样的完全限定名称

```
 <fragment android:id="@+id/fragmentDetails" 
android:layout_height="fill_parent" 
android:layout_width="fill_parent" 
class="tenkiv.billing.AdFragment"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T10:28:46.677

请确保在您的 FragmentActivity 类中，您还从超类调用 onCreate 方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T20:11:56.587

这个问题可能是由一些愚蠢的事情引起的，比如错别字或奇怪的不可见字符被注入到你的 xml 标签中。就我而言，原因是我的“片段”开始标签中的拼写错误。我有“frsgment”，当然 Android Studio 没有举旗。我花了一段时间才弄清楚。不好！

# asp.net - 存储多个文本的最佳位置在哪里（没有数据库）

> ID：15095980
> 
> 赞同：2
> 
> 时间：2013-02-26T17:57:16.190
> 
> 标签：asp.net, html, web-applications, webpage, page-lifecycle

假设我有一个用于 10 个不同页面的控件，并且该控件有一个帮助图标。每个页面都应该显示它自己的帮助文本——每个页面大约是一个段落。JavaScript 函数选择要显示的帮助文本。

我意识到在我的情况下 10 段不会对性能造成重大影响；但是为了知识，最好的实现是什么？将文本保存在服务器控件（例如 HiddenField）中还是直接保存在 JavaScript 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:00:21.587

如果我必须创建一个无 DB 解决方案，我会做以下三件事之一：

**选项1**

将文本存储在您的 Web 应用程序可以读取的 XML 文件中。

```
<?xml version="1.0" encoding="utf-8" ?>
<HelpTexts>
  <HelpText name="HelpText1">
    Some help text
  </HelpText>
  ...
</HelpTexts> 
```

**选项 2**

将文本存储在`web.config`.

```
<add key="HelpText1" value="[Some help text" />

var foo = WebConfigurationManager.AppSettings["HelpText1"]; 
```

**选项 3**

将文本存储在使用控件的模板中并将其设置为属性。这是我的偏好，因为它相对干净并且允许控件快速轻松地在另一个页面上使用。

```
protected void Page_Load(object sender, EventArgs e)
{
    myControl.HelpText = "[Some help text]";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:01:57.903

你可以这样做 -

创建一个 10 个帮助页面，在加载 java 脚本时单击帮助按钮，您可以在 iframe 中显示特定的帮助页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:05:24.577

正如 James 所说，我建议使用 XML Files。特别是使用 ASP.net 提供的资源。

它们使用简单，正是您所需要的！

你可以阅读更多关于[这里](http://msdn.microsoft.com/en-us/library/ms247246%28v=vs.100%29.aspx)

# ruby - 将 Ruby 变量传递给 xtractr 查询

> ID：15095983
> 
> 赞同：0
> 
> 时间：2013-02-26T17:57:19.900
> 
> 标签：ruby, variables

我有一个数组（src_ip）中的数据。我希望将这些数据作为参数传递给 xtractr 查询。有人可以帮我解决这个问题吗？这是我的代码：

```
src_ip=Array.new

src_ip=open("/home/sakshi/Desktop/test/src_ip.txt", &:read).scan(/#<host:(.+?)>/).flatten

i=0

n=src_ip.length

while i != n

p xtractr.packets('pkt.src:src_ip[i]').sum('pkt.src','pkt.length')

i+=1

end 
```

在这里，我想在 while 循环中将数组（src_ip）传递给 xtractr 查询（xtractr.packets...）。我无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:23:30.347

假设您希望每个条目单独传入，您可以这样做：

```
src_ip.each do |i|
   p xtractr.packets("pkt.src:#{i}").sum('pkt.src','pkt.length')
end 
```

如果您一次想要它们：

```
p xtractr.packets("pkt.src:#{src_ip}").sum('pkt.src','pkt.length') 
```

# protobuf-net - 我可以在没有完整类型定义的情况下将 protobuf-net 用作类似 SAX 的解析器吗？

> ID：15095991
> 
> 赞同：1
> 
> 时间：2013-02-26T17:57:55.960
> 
> 标签：protobuf-net

[这里](https://stackoverflow.com/questions/5356236/protobuf-csharp-port-streaming-records-from-a-file-a-bit-like-an-axis-function/5356376#5356376)提到protobuf-net 可以像 SAX 解析器一样使用，但我找不到不需要或多或少完整描述要解析的对象的示例。

*（跳到第**2 点）**问题，**1）**只是提供一些上下文）*

**1）也许我应该先提供一些背景信息：**

我目前在我的项目中使用 JSON.Net，并创建了几个 JSONConverter 来自定义各种类型的序列化方式——基本上所有主要类型都有手写的序列化指令（ReadProperty、ReadValue 等）。

我为什么这样做以及在哪里这样做的一些例子：

*   我有一个`MetaType`类来描述某些`Value`对象在运行时的行为。这些`Value`对象有一个`Type`被序列化的属性。一个Converter`MetaType`在序列化这个属性时只返回该属性的名称，反序列化时使用该名称获取对应`MetaType`的inf。这样做的原因是类型的名字就够了，`MetaType`类序列化太麻烦，生成的JSON更紧凑。
*   一些对象的集合包含不需要序列化的值，因为我可以根据`MetaType`它们不存在的时间重新创建它们。转换器过滤这些集合并仅存储那些不是默认值的值 - 而 JSON.Net 具有防止属性在设置为默认值时被序列化的属性，我不知道任何内置方法来过滤默认值从一个集合。

**我的目标是什么：**

由于我已经有这么多手写的序列化代码，我想摆脱 OR-Mapper。这样做的原因是我可以更轻松地创建可以读取旧 JSON 格式并执行必要的**迁移**步骤（添加数据、忽略不再需要的数据等）的迁移器。使用 OR-Mapper，我需要旧类型来解析旧格式，然后将旧类型转换为新类型——这是一种有效的策略，但是因为我有手写代码，所以我可以执行非常精细的迁移步骤并对几乎任何变化。基本上更强大，我不需要旧的对象模型。

**2）那么实际的问题是什么？**

我可以使用 protobuf-net 或多或少地从流中手动读取/写入数据，或者以***其他*** 方式对（反）序列化具有类似的能力（例如 RuntimeTypeModel？）

要使用上面的示例：

*   我有一个具有 type 属性的对象`MetaType`，但不是序列化整个对象`MetaType`，我只想存储一个字符串或 ID。反序列化时，使用字符串或ID来获取正确的`MetaType`（<=我只需要解析器存储/读取ID，我会做查找）
*   我希望能够在序列化时过滤集合，并且只存储满足特定条件的对象。
*   我希望能够通过读取它们并根据需要迁移数据来支持旧格式。**我已经存储了一个版本号**，可用于分支反序列化或创建不同类型的对象（v1、v2）——尽管如果我不需要使用我的对象模型的多个版本，我更喜欢它，迁移在解析器级别（在创建对象之前）会很棒。

一个伪代码示例（如果上面没有意义）：

```
int version = Reader.ReadInt()
// [...] decide how to proceed based on version
var typeName = Reader.ReadString()
var type = MetaType.For(typeName)
// [...] read some more properties
return new ValueObject(type, property1, property2) 
```

protobuf-net 是否可能/推荐类似的东西？（示例/文档或教程的链接会很棒——我知道有一个 ProtoReader 类，但我不确定我是否应该使用它/如果我足够聪明，可以在没有任何文档的情况下使用它）

**编辑：**
在此处添加 Marc 的评论以获得更好的可见性：

可以在**[此处](http://marcgravell.blogspot.co.uk/2010/10/datatable-life-in-old-beast.html)**`ProtoReader`找到/的原始用法示例（[直接链接到代码](https://code.google.com/p/protobuf-net/source/detail?r=356)）。`ProtoWriter`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:33:32.547

大部分是可能的。在最原始的层面上，ProtoReader 具有用于读取底层流的完整 API。如果您知道您只想阅读“预期的字段 1”（对于版本等），您可以设置一个模型并让库完成繁重的工作：

```
[ProtoContract] class VersionStub {
    [ProtoMember(1)] public int Version {get;set;}
} 
```

如果您有同一模型的多个不兼容版本，则可以单独创建和使用不同的 RuntimeTypeModel 实例（您仍应尽可能缓存和重用模型以提高性能）。

但是，该 API 基于预先存在的具体类型 - 它允许您在运行时配置地图，但它目前不动态创建 DTO 类型。它可能。虽然 - 它已经有足够多的内置元编程......

我回答问题了吗？还是另一种？

# php - 从数组中删除重复的strlen项？

> ID：15095992
> 
> 赞同：2
> 
> 时间：2013-02-26T17:57:57.463
> 
> 标签：php, arrays, loops, foreach

这是从数组中删除重复的 strlen 项的最简单方法吗？我做了很多与此类似的任务的编程，这就是为什么我问，如果我做得太复杂，或者这是否是最简单的方法。

```
$usedlength = array();
$no_duplicate_filesizes_in_here = array();
foreach ($files as $file) {
    foreach ($usedlength as $length) {
        if (strlen($file) == $length) continue 2;
    }
    $usedlength[] = strlen($file);
    $no_duplicate_filesizes_in_here[] = $file;
}
$files = $no_duplicate_filesizes_in_here; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:19:24.473

手动循环并没有太大的*错误*，尽管您的示例可能是：

```
$files = array_intersect_key($files, array_unique(array_map('strlen', $files))); 
```

PHP 有大量有用的[数组函数](http://php.net/ref.array)可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:13:02.243

你可以试试这个：

```
$no_duplicate_filesizes_in_here = array();
for ($i=count($files)-1;$i>=0;$i--){
  $no_duplicate_filesizes_in_here[strlen($files[$i])] = $file;
}
$files = array_values($no_duplicate_filesizes_in_here);
// if you don't care about the keys, don't bother with array_values() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:23:03.600

如果您使用的是 PHP 5.3 或更高版本，[array_filter](http://php.net/manual/en/function.array-filter.php)提供了一个很好的语法来执行此操作：

```
$nodupes = array_filter($files, function($file) use (&$lengths) {
    if (in_array(strlen($file), (array) $lengths)) {
        return false;
    }

    $lengths[] = strlen($file);
    return true;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:38:49.660

不像其他一些答案那么短，但另一种方法是使用基于键的查找：

```
$used = array();
$no_dupes = array();
foreach ($files as $file) {
  if ( !array_key_exists(($length = strlen($file)), $used) ) {
    $used[$length] = true;
    $no_dupes[] = $file;
  }
} 
```

这将有一个额外的好处，即不会浪费时间存储重复项（仅在以后覆盖它们），但是，这个循环是否会比 PHP 的一些内置数组方法更快可能取决于许多因素（重复项的数量，数组的长度`files`等）并且需要进行测试。以上是我认为在大多数情况下会更快，但我不是处理器；）

以上还意味着找到的第一个文件是保留的文件，而不是在其他一些方法中找到的最后一个文件。

# android - Android - 在 4.2.2 (Nexus 10) 上显示/隐藏系统栏

> ID：15095998
> 
> 赞同：3
> 
> 时间：2013-02-26T17:58:16.083
> 
> 标签：android, root, android-4.2-jelly-bean, nexus-10

我遇到了 Nexus 10 - 4.2.2 的问题。我在 Galaxy Tab 10.1 和 4.0.4 上测试下面的代码，它工作正常：

```
try 
{
    Process proc = Runtime.getRuntime().exec(new String[]{"sh","startservice","-n","com.android.systemui/.SystemUIService"});
    proc.waitFor();
} 
catch (Exception e) 
{
    e.printStackTrace();
}

try
{
    //REQUIRES ROOT
    Process proc = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity 42 s16 com.android.systemui"}); //WAS 79
    proc.waitFor();
}
catch(Exception ex)
{
    //Toast.makeText(getApplicationContext(), ex.getMessage(), Toast.LENGTH_LONG).show();
} 
```

但是在 Nexus 10 系统栏之后不会显示，只是隐藏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T09:54:56.753

在 4.2.2 和其他版本上显示和隐藏系统栏和通知栏：

隐藏：

```
 try
    {
        String command;
        command = "LD_LIBRARY_PATH=/vendor/lib:/system/lib service call activity 42 s16 com.android.systemui";
        Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", command }, envp);
        proc.waitFor();
    }
    catch(Exception ex)
    {
        Toast.makeText(getApplicationContext(), ex.getMessage(), Toast.LENGTH_LONG).show();
    } 
```

显示：

```
 try 
    {
         String command;
         command = "LD_LIBRARY_PATH=/vendor/lib:/system/lib am startservice -n com.android.systemui/.SystemUIService";
         Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", command }, envp);
         proc.waitFor();
    } 
    catch (Exception e) 
    {
          e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T10:12:13.990

我认为您不应该使用系统调用通过`Runtime.exec()`来获得该结果。您应该查看`FullscreenActivity`模板中的代码（源代码放在 中`<android-sdk-folder>/tools/templates/activities/FullscreenActivity/root`）：这是一个完整的工作示例，展示了如何以编程方式显示/隐藏系统栏（顶部和底部），它甚至支持 API 13+ 的动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-22T15:39:36.420

goodm 的回答很好，但我们大多数人都不知道**envp**

所以这里是完整的代码：

**隐藏**

```
try
{
    String command;
    command = "LD_LIBRARY_PATH=/vendor/lib:/system/lib service call activity 42 s16 com.android.systemui";

    ArrayList<String> envlist = new ArrayList<String>();
    Map<String, String> env = System.getenv();
    for (String envName : env.keySet()) {
        envlist.add(envName + "=" + env.get(envName));
    }
    String[] envp = (String[]) envlist.toArray(new String[0]);
    Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", command }, envp);
    proc.waitFor();
}
catch(Exception ex)
{
    Toast.makeText(getApplicationContext(), ex.getMessage(), Toast.LENGTH_LONG).show();
} 
```

您可以使用类似的节目。